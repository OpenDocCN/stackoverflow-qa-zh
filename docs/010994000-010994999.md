# StackOverflow 问答 10994000-10994999

# arrays - 基于 ID 的 CakePHP 用户查找

> ID：10994000
> 
> 赞同：0
> 
> 时间：2012-06-12T09:37:49.227
> 
> 标签：arrays, cakephp, cakephp-2.0, cakephp-model

我认为这将是一件相对常见的事情，但我在任何地方都找不到示例，而且食谱`find()`中关于该主题的部分也没有明确说明。也许这只是一些如此简单的事情，Cake 假设你可以自己做。

我在这里要做的就是根据视图中的数组传递给我的 ID 在 Cake 中检索用户的名称（不是当前登录的用户……不同的用户）。

这是我在控制器中的内容：

```
public function user_lookup($userID){
  $this->User->flatten = false;
  $this->User->recursive = 1;
  $user = $this->User->find('first', array('conditions' => $userID));
  //what now?
} 
```

在这一点上，我什至不知道我是否走在正确的轨道上……我假设这将返回一个包含用户数据的数组，但我该如何处理这些结果？我怎么知道阵列会是什么样子？我只是`return($cakeArray['first'].' '.$cakeArray['last'])`？不知道……</p>

帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:47:48.717

您需要使用`set`来获取返回的数据，并使其在您的视图中作为变量访问。`set`是将数据从控制器发送到视图的主要方式。

```
public function user_lookup($userID){
  $this->User->flatten = false;
  $this->User->recursive = 1;

  // added - minor improvement
  if(!$this->User->exists($userID)) {
      $this->redirect(array('action'=>'some_place')); 
      // the requested user doesn't exist; redirect or throw a 404 etc.
  }

  // we use $this->set() to store the data returned. 
  // It will be accessible in your view in a variable called `user` 
  // (or what ever you pass as the first parameter)
  $this->set('user', $this->User->find('first', array('conditions' => $userID)));

}

// user_lookup.ctp - output the `user`
<?php echo $user['User']['username']; // eg ?>
<?php debug($user); // see what's acutally been returned ?> 
```

[手册](http://book.cakephp.org/1.3/en/view/977/Controller-Methods#Interacting-with-Views-978)中的更多内容（这是基本的蛋糕材料，因此可能值得一读）

# sql - TFS 分支和数据库

> ID：10994004
> 
> 赞同：5
> 
> 时间：2012-06-12T09:38:06.760
> 
> 标签：sql, database, tfs, branch

我有一个项目，我们需要设置一个简单的分支策略，以启用新功能的开发，同时仍然能够修复另一个分支上的错误。

我遇到的问题是数据库。

数据库模式是作为数据库项目的 TFS 的一部分，但是为了有足够的测试数据，我们曾经备份过一个实时数据库，并在开发过程中使用它进行测试。

目前，数据库（总共树）位于工作组服务器上，每个开发人员都有一组数据库，并且每组数据库不时使用其他开发人员在更改架构时创建的 sql 脚本进行更新。

我的问题：我们如何重新组织它，以便每个分支都是独立的，并且我们可以轻松地从一个分支切换到另一个分支。我已经研究过使用 SQL express 并将数据库放在分支中，但这并不好。我们还研究了使用所有数据创建脚本并从数据库重建数据库，但结果证明这花费了太多时间，而且一些开发人员往往会忘记这样做。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T09:40:32.087

Visual Studio 支持[数据库项目](http://msdn.microsoft.com/en-us/library/ff678491.aspx)。使用它，然后希望分支会相对简单。

您可以恢复数据库备份，然后使用 GDR 同步/升级您的数据库架构。您需要编写数据更改脚本。

它确实涉及相当多的初始设置工作。

*   [VSTS 数据库团队博客](http://blogs.msdn.com/b/vstsdb/)

*   [Visual Studio TFS 分支和合并指南](http://msdn.microsoft.com/en-us/magazine/gg598921.aspx)

*   [Visual Studio Team Foundation Server 分支和合并指南](http://vsarbranchingguide.codeplex.com/releases)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:51:55.140

Visual Studio 数据库项目不是支持数据库升级同时保留数据的最佳工具。

重新考虑全新安装和升级之间的关系可能会很有用。对于许多公司来说，升级是事后才想到的，升级脚本是基于全新安装脚本的增量创建的。这会导致“当前”模式的细节在升级路径上的重复维护、不一致和严重依赖。

因此我会推荐

*   只维护升级脚本（除非首选声明性源代码并且每次升级都可以完全刷新）
*   决定是否支持降级
*   确保在基础架构级别上，每个升级脚本最多应用一次
*   基本上从不编辑升级脚本，尽量坚持在应用程序序列末尾添加新脚本

这是一个非常具有侵略性的变化，它需要改变思维方式，因此首先要仔细评估您的长期升级需求。您需要进行更改的一个迹象是期望在多个发布和开发分支中进行大量并行开发或维护。

# git - 如何缓存与分支关联的未跟踪（二进制）文件？

> ID：10994005
> 
> 赞同：1
> 
> 时间：2012-06-12T09:38:09.863
> 
> 标签：git, version-control, compilation

假设我是在一个庞大的代码项目中使用 git 的众多开发人员之一，该项目的**编译时间非常长**。

现在，我个人的日常更改通常是有限的，并且代码库是相当模块化的，这意味着就我*个人*的工作而言，**从头开始编译是只需支付一次的代价**。之后，我只能重新编译我修改过的模块。

另一方面，**我经常不得不修复**（至少两个）**分支中的错误，这些错误反映了与我工作的分支完全不同的代码库状态**。这两个分支确实是整个开发团队的工作成果，并且经常重写或添加整个模块。**在推送错误修复之前编译所有内容是强制性的**。

我的第一种方法是每次需要修复错误时从我的开发分支切换，然后清理，修复错误，从头开始重新编译，推送，切换回原始分支，再次清理，重新编译 -**这样做的延迟是无法容忍的**。

然后我开始**在我的机器上保留三个单独的代码库签出**。这解决了“*昂贵的重新编译*”问题（我在每个分支中的更改都是增量的），但它提出了一个问题“我现在在开发什么？” 回答起来更复杂（因为它取决于当前目录），并且它使这三个副本的同步变得复杂（它将我必须执行的所有例程 // 命令乘以三`push`）`remote update`。`pull`

一个更简单的解决方案是**能够在每次结帐“离开”分支时保存目录的状态**（未跟踪，我在其中生成编译文件）**，并每次调用该目录的状态（如果存在）我“进入”**（结帐）**一个分支**。

*   是否有 git 命令可以帮助我实现这种行为？
*   如果没有，是否有工具可以让我这样做？
*   如果没有，git 是否提供结帐钩子可以帮助我编写此行为的脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:00:50.127

我建议使用 stash，它们非常接近您的需要。

`--include-untracked`在最新版本的 git 中，您可以使用该选项存储未跟踪的文件。您还可以向您的 stash 发送消息并召回它们，这样您就可以在签出分支后检查必须应用哪个 stash。

```
#before leaving branch
git stash save --include-untracked "compiled stuff for my_branch"
git checkout another_branch
#what stash contains compiled stuff for another_branch?
git stash list
git stash pop stash@{n} 
```

您可以编写一些脚本以使事情更实用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:09:08.127

恐怕我没有确切的答案，因为我不必处理像你这样的案例，但无论如何我想提供可能的提示：Git 能够使用几个不同的工作树“连接”到单个存储库（例如在[这个答案](https://stackoverflow.com/a/5283457/720999)中阅读更多内容），因此您可以只使用多个工作树和一个存储库，而不是维护多个签出。

我应该补充一点，我更喜欢@CharlesB 的解决方案（在概念上），但另一方面我会衡量：据说`git stash`会在将文件转换为 blob 以存储在存储中时有效地*复制*文件，这将 a) 暂时使那些巨大的空间占用的空间增加一倍文件系统上的文件；b) 对 Git 的对象数据库大小有未知的长期影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:47:14.727

[我的 2 美分：将编译目录作为子模块](http://git-scm.com/book/en/Git-Tools-Submodules%20submodule)跟踪- 但由于我尚未使用此 git 功能，我只能将您指向文档页面...

# jsf-2 - 通过邮件发送数据表的内容

> ID：10994008
> 
> 赞同：0
> 
> 时间：2012-06-12T09:38:17.750
> 
> 标签：jsf-2

我是 jsf 的新手，我正在用 jsf 开发一个项目并休眠它是我的数据访问层，我有一个带有 primefaces 的数据表所以我搜索如何通过邮件发送这个数据表的内容

你能帮我吗 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T00:11:36.260

您始终可以将数据放入电子邮件中。只需查看托管 bean 的代码，即您的 dataTable 值，这将表明您必须获取数据。结合一些 JavaMail 代码，您可以以您选择的任何格式发送数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:38:15.960

您可以使用[PrimeFaces DataTable Exporter](http://www.primefaces.org/showcase/ui/exporter.jsf)将结果导出为 PDF（另外还有 XML、XLS、CSV）文件。然后使用[JavaMail](http://www.oracle.com/technetwork/java/javamail/index.html)以该文件作为附件发送邮件。

# php - Kohana - 如何在不刷新的情况下创建表单？

> ID：10994012
> 
> 赞同：1
> 
> 时间：2012-06-12T09:38:27.623
> 
> 标签：php, jquery, ajax, kohana

如何在不刷新的情况下创建 jQuery + ajax 表单？这是我的控制器和视图：

[http://pastebin.com/GL5xVXFZ](http://pastebin.com/GL5xVXFZ)

在“清除”PHP中，我创建了这样的东西：

```
$(document).ready(function(){
    $("form#submit").submit(function() {

    var note = $('#note').attr('value');

        $.ajax({
            type: "POST",
            url: "add.php",
            data: "note="+ note,
            success: function(){
                $('form#submit').hide(function(){$('div.success').fadeIn();});

            }
        });
    return false;
    });
}); 
```

在 add.php 文件中插入到数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:51:49.437

有更复杂的方法可以做到这一点，例如在您的操作中检测 ajax 请求，然后如果检测到打印出 javascript 响应。你这样做的方式是

JAVASCRIPT

```
function postForm(note){
     $.ajax({
      url  : '/controller/action',
      type : 'POST',
      data : 'note='+note,
      success : function(jsn){
        var json = $.parseJSON(jsn);
        if(json.status == 200)
          alert('Completed Successfully');
        else
          alert('Not Completed Successfully');
      },
      error : function(xhr){
        //Debugging
        console.log(xhr);
      }

     });
   } 
```

PHP

```
 <?php  
  Class Controller_ControllerName extends Controller_Template{
      public $template = 'template';

      public function action_index(){}

      public function action_form(){
        $this->auto_render = false; // <-EDITED
        $array = array();

        //PROCESSING FORM CODE HERE

        if($success){
          $array['status'] = 200;
        }else{
          $array['status'] = 500; 
        }

        print json_encode($array);
      }

    }
?> 
```

这是一个我没有测试的例子，但这肯定足以让你工作

# jquery - 从 Spring 的 AutoPopulatingList 中删除项目

> ID：10994015
> 
> 赞同：0
> 
> 时间：2012-06-12T09:38:38.493
> 
> 标签：jquery, spring, spring-mvc

我使用 Spring AutoPopulatingList 和 JQuery 创建了一个动态表单。加法就像一个魅力，新项目被创建并持久化到数据库中。问题在于删除：我的更新方法总是得到完整的列表，不管浏览器端的元素是否被删除。

Controller的更新方法就这么简单

```
@RequestMapping(value = "/user/{id}", method = RequestMethod.POST)
@ResponseBody
public String updateUser(@PathVariable("id") int id, @ModelAttribute("user") User user, HttpServletRequest request) {
    userService.update(user);
    return messageSource.getMessage("user.data_updated", null, request.getLocale());
} 
```

用户POJO实现如下

```
@Entity
public class User implements Serializable {
...

@OneToMany(targetEntity = Language.class, fetch = FetchType.EAGER, cascade = CascadeType.ALL)
private List<Language> languages = new AutoPopulatingList(Language.class);
...
} 
```

发送到我的控制器的 POST 请求如下所示（另外，添加了语言 2）：

```
languages[0].code:pl
languages[0].level:Fluent
languages[1].code:de
languages[1].level:Native
languages[2].code:cc
languages[2].level:Intermediate 
```

和移除（使用 JQuery *.remove()*方法移除语言 1）：

```
languages[0].code:pl
languages[0].level:Fluent
languages[2].code:cc
languages[2].level:Intermediate 
```

所以从通信方面看起来不错，但是在 updateUser 方法中从 @ModelAttribute("user") 检索到的用户仍然具有三个语言元素，都是有效的（即不为空）。有什么建议么？如果相关，我正在使用 Spring 3.1.1 和 JQuery 1.7.2。

编辑：添加/删除字段的客户端代码如下：

```
$.addLanguage = function()  {
            var newLanguage = $('<input type="text" id="languages' + languagesCounter + '.code" name="languages[' + languagesCounter + '].code" class="langIdentifier"/>' +
                                '<select id="languages' + languagesCounter + '.level" name="languages[' + languagesCounter + '].level" class="langSelect">'  +
                                    '<option value="Basic">Basic</option>' +
                                    '<option value="Intermediate">Intermediate</option>' +
                                    '<option value="Fluent">Fluent</option>' +
                                    '<option value="Native">Native</option>' +
                                '</select>' +
                                '<input type="button" id="remove' + languagesCounter + '" onclick="$.removeLanguage(' + languagesCounter + ')"' +
                                        'name="Remove" value="Remove" class="removeButton"/>' +
                                '<br/>');
            languagesCounter++;
            newLanguage.insertBefore($("#add"));
        } 
```

并删除：

```
$.removeLanguage = function(languageId) {
    var languageField = '#languages' + languageId + '\\.code';
    var levelField = '#languages' + languageId + '\\.level';
    var removeButton = '#remove' + languageId;
    $(languageField).fadeOut(250, function() { $(this).remove(); });
    $(levelField).fadeOut(250, function() { $(this).remove(); });
    $(removeButton).fadeOut(250, function() { $(this).remove(); });
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:54:31.613

尝试使用**LazyList**而不是**AutoPopulatingList**。我正在使用它将动态内容添加到 html 并将数据返回到模型属性对象中。下面是我用来创建列表的代码。

```
 private List<OperationParameters> operationParameterses = LazyList.decorate(new ArrayList<OperationParameters>(), FactoryUtils.instantiateFactory(OperationParameters.class));

    @OneToMany(cascade=CascadeType.ALL, fetch=FetchType.LAZY, mappedBy="operations")
    public List<OperationParameters> getOperationParameterses() {
        return this.operationParameterses;
    }

    public void setOperationParameterses(List<OperationParameters> operationParameterses) {
        this.operationParameterses = operationParameterses;
    } 
```

在控制器中，当我在模型属性中填充列表时，我首先检查列表中的空数据并使用以下代码将其删除，然后持久保存在数据库中。否则它会尝试在数据库中插入空数据。

```
operations.getOperationParameterses().removeAll(Collections.singleton(null)); 
```

希望这对您有所帮助。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T19:30:06.277

当您使用 jquery 从视图中删除列表元素标记时，它只会阻止 spring 将新值绑定到该元素。但它不会从控制器的列表中删除元素。

为了清楚起见，这里是 jsp + spring 如何将数据绑定到列表元素。为了绑定列表的第 i 个元素，它将调用 list.get(i).set(newVal)。因此，当您从视图中删除第 i 个元素时，不会绑定任何内容，但同时第 i 个元素也不会被删除。

对于删除，您可能会在每次删除元素并从控制器中的列表中删除元素时发送 ajax 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T17:01:01.177

回答我自己的问题（也许会让人头疼）：

我有过

```
@ModelAttribute("user")
public User getUserById(@PathVariable("id") int id) {
    logger.fine("Getting user for id: " + id);
    return userService.findById(id);
} 
```

在 GET 中填充模型，以及

```
@RequestMapping(value = "/user/{id}", method = RequestMethod.POST)
@ResponseBody
public String updateUser(@PathVariable("id") int id, @ModelAttribute("user") User user, HttpServletRequest request) {
    userService.update(user);
    return messageSource.getMessage("user.data_updated", null, request.getLocale());
} 
```

更新用户。现在整个问题出在 POST 处理程序中的 @ModelAttribute 中——它不能与预填充代码中的键名相同。将其更改为 @ModelAttribute("updated") 解决了这个问题。现在从表单中删除的对象确实是空的。

现在我正在努力在坚持之前将它们从列表中删除，因为

```
removeAll(Collections.singleton(null)); 
```

似乎不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-15T18:20:55.570

用户“Japs T”提出的解决方案对我也不起作用：

```
operations.getOperationParameterses().removeAll(Collections.singleton(null)); 
```

我对可能的解决方案感到满意。这是列表：

*   在从请求中绑定值之前删除服务器端的所有项目
*   通过 AJAX 更新服务器状态

我会尝试的“不透明”解决方案是隐藏 HTML 元素而不是删除和清除输入中的值，然后在服务器端您可以实现忽略“空”记录的功能。例如：

```
interface Removeable {
boolean isEmpty();
}

(Collection<Removeable>)myCollection.removeIf(e -> e.isEmpty()) 
```

# php - 什么类型的项目存在于 php none 框架中用于 xss 过滤和安全性

> ID：10994020
> 
> 赞同：-1
> 
> 时间：2012-06-12T09:38:56.020
> 
> 标签：php, security, xss

用于 xss 过滤和安全的 php none 框架存在哪些类型的项目？

我知道有[***用于 PHP 的 OWASP ESAPI，***](http://code.google.com/p/owasp-esapi-php/) 但它几乎没有更新，而且看起来也不是很好，我正在寻找可以为输入过滤器的安全部分提供良好解决方案的东西，而不仅仅是这个。我正在寻找最佳实践的东西，呵呵，

同样，如果有人对安全有很好的建议，那么如果什么都没有，那么我知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:43:50.217

你可以试试[http://htmlpurifier.org/](http://htmlpurifier.org/)

# php - 带有 2 个参数的 PHP 子字符串输出

> ID：10994026
> 
> 赞同：-1
> 
> 时间：2012-06-12T09:39:14.570
> 
> 标签：php, php-5.3

我有一个这样的 php 代码，我的输出是正确的？日期格式是 (YY/MM/DD)

年月日格式>> 120924（就像2012/09/24）

```
 $yearchk=(int)substr($date,0,4);
        $monthchk=(int)substr($date,5,2);
        $daychk=(int)substr($date,8,2); 
```

这里有一个子字符串。这个输出在子字符串中是否正确。

```
My Yearchk output > 12
my monthck output > 09
my daychk  output > 24 
```

这个输出正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:47:29.383

不要使用 substr。

使用**date**和**strtotime**函数来执行此操作。

这样做： -

```
<?
$userdate = "2012/09/24";
$y = date('Y',strtotime($userdate));
$m = date('m',strtotime($userdate));
$d = date('d',strtotime($userdate)); 

echo 'Year: ' . $y . ' Month: ' . $m . ' Date: ' . $d; 
```

参考**[现场演示](http://codepad.org/cxsuslHv)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:50:05.873

不，你没有得到`substr()`纠正的论据。这会起作用：

```
$date = '120924';

$yearchk=(int)substr($date,0,2);
$monthchk=(int)substr($date,2,2);
$daychk=(int)substr($date,4,2);

// $yearchk  -> 12
// $monthchk -> 9
// $daychk   -> 24 
```

请记住，当您投射它们时，`(int)`您将丢失任何前导零。

# python - 用于 Python GUI 的强大表格小部件

> ID：10994030
> 
> 赞同：2
> 
> 时间：2012-06-12T09:39:31.283
> 
> 标签：python, user-interface

我想编写一个类似表格的 GUI。你知道一个强大的表格小部件（适用于任何 GUI），它具有现成的功能，如过滤、排序、编辑等（如 Excel 中所示）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T10:31:42.780

您可以使用 wxGrid - 这是一些演示代码 - 您需要自己管理/连接底层表上的所有事件。用文字来解释有点复杂，这里有一些代码（主要基于 wx 示例代码）：

```
import wx
from wx import EVT_MENU, EVT_CLOSE
import wx.grid as gridlib

from statusclient import JobDataTable, JobDataGrid

app = wx.App()

log = Logger(__name__)

class JobManager(wx.Frame):

    def __init__(self, parent, title):
        super(JobManager, self).__init__(parent, title=title)
        panel = wx.Panel(self, -1)

        self.client_id = job_server.register()
        log.info('Registered with server as {}'.format(self.client_id))
        self.jobs = job_server.get_all_jobs()
        grid = self.create_grid(panel, self.jobs)       
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(grid, 1, wx.ALL|wx.EXPAND)
        panel.SetSizer(sizer)

        # Bind Close Event
        EVT_CLOSE(self, self.exit)
        self.Center()
        self.Show()

    def exit(self, event):
        log.info('Unregistering {0} from server...'.format(self.client_id))
        job_server.unregister(self.client_id)
        job_server.close()
        exit()

    def create_grid(self, panel, data):
        table = JobDataTable(jobs=data)
        grid = JobDataGrid(panel)
        grid.CreateGrid(len(data), len(data[0].keys()))
        grid.SetTable(table)
        grid.AutoSize()
        grid.AutoSizeColumns(True)
        return grid

def main():
    frame = JobManager(None, 'Larskhill Job Manager')
    app.MainLoop()

if __name__ == '__main__':
        job_server = zerorpc.Client()
        job_server.connect('tcp://0.0.0.0:4242')
    main()

####
ui/client.py
####

import wx
import wx.grid as gridlib

EVEN_ROW_COLOUR = '#CCE6FF'
GRID_LINE_COLOUR = '#ccc'
COLUMNS = {0:('id', 'ID'), 1:('name', 'Name'), 2:('created_at', 'Created'), 3:('status', 'Current Status')}

log = Logger(__name__)

class JobDataTable(gridlib.PyGridTableBase):

    """
    A custom wxGrid Table that expects a user supplied data source.
    """
    def __init__(self, jobs=None):
        gridlib.PyGridTableBase.__init__(self)
        self.headerRows = 0
        self.jobs = jobs

#-------------------------------------------------------------------------------
# Required methods for the wxPyGridTableBase interface
#-------------------------------------------------------------------------------

    def GetNumberRows(self):
        return len(self.jobs)

    def GetNumberCols(self):
        return len(COLUMNS.keys())

    #---------------------------------------------------------------------------
    # Get/Set values in the table.  The Python version of these
    # methods can handle any data-type, (as long as the Editor and
    # Renderer understands the type too,) not just strings as in the
    # C++ version. We load thises directly from the Jobs Data.
    #---------------------------------------------------------------------------
    def GetValue(self, row, col):
        prop, label = COLUMNS.get(col)
        #log.debug('Setting cell value')
        return self.jobs[row][prop]

    def SetValue(self, row, col, value):
        pass

    #---------------------------------------------------------------------------
    # Some optional methods
    # Called when the grid needs to display labels
    #---------------------------------------------------------------------------
    def GetColLabelValue(self, col):
        prop, label = COLUMNS.get(col)
        return label

    #---------------------------------------------------------------------------
    # Called to determine the kind of editor/renderer to use by
    # default, doesn't necessarily have to be the same type used
    # natively by the editor/renderer if they know how to convert.
    #---------------------------------------------------------------------------
    def GetTypeName(self, row, col):
        return gridlib.GRID_VALUE_STRING

    #---------------------------------------------------------------------------`
    # Called to determine how the data can be fetched and stored by the
    # editor and renderer.  This allows you to enforce some type-safety
    # in the grid.
    #---------------------------------------------------------------------------
    def CanGetValueAs(self, row, col, typeName):
        pass

    def CanSetValueAs(self, row, col, typeName):
        pass

    #---------------------------------------------------------------------------
    # Style the table, stripy rows and also highlight changed rows.
    #---------------------------------------------------------------------------
    def GetAttr(self, row, col, prop):
        attr = gridlib.GridCellAttr()

        # Odd Even Rows
        if row % 2 == 1:
            bg_colour = EVEN_ROW_COLOUR
            attr.SetBackgroundColour(bg_colour)

        return attr

#-------------------------------------------------------------------------------
# Custom Job Grid
#-------------------------------------------------------------------------------
class JobDataGrid(gridlib.Grid):
    def __init__(self, parent, size=wx.Size(1000, 500), data_table=None):
        self.parent = parent
        gridlib.Grid.__init__(self, self.parent, -1) # so grid references a weak reference to the parent
        self.SetGridLineColour(GRID_LINE_COLOUR)
        self.SetRowLabelSize(0)
        self.SetColLabelSize(30)
        self.table = JobDataTable() 
```

如果需要澄清，请大声告诉我。

# php - wordpress 中的类别特定日历（get_calendar）

> ID：10994042
> 
> 赞同：0
> 
> 时间：2012-06-12T09:40:21.747
> 
> 标签：php, mysql, wordpress, calendar, categories

我找不到特定类别的日历，或任何示例代码，让我有点脏......任何人都知道特定类别的日历，所以我可以称之为例如：

get_calendar(true, true, $cat_id);

否则我将不得不复制 get_calendar 函数并按类别循环制作我自己的*帖子*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:59:37.813

最后制作了自己的日历。

这是一种非常不稳定的做法，但效果很好。

1.  在您的模板目录中创建一个名为“the-calendar.php”的新页面，将以下代码放入其中： http: [//pastebin.com/sUSzJMWM](http://pastebin.com/sUSzJMWM)

2.  创建一个新的脚本文件（可以访问 jquery）。
    将以下代码放入其中
    **（确保您已将 site_url 设置为等于“get_template('blog_info') .'/'”）：** [http ://pastebin.com/Q16ibAZ0](http://pastebin.com/Q16ibAZ0)

3.  现在只需将它包含在您想要日历的任何位置（请记住，上面的脚本必须是可访问的）：
    [http](http://pastebin.com/fyhXrCiW)
    **://pastebin.com/fyhXrCiW 不要忘记在您的 wordpress 主题目录中设置 date.php 页面的样式！ ！！**

4.  这是一些看起来很糟糕但应该让您入门的默认样式：http:
    [//pastebin.com/NMauFJWq](http://pastebin.com/NMauFJWq)

日历通过调用（通过 AJAX）一个外部 PHP 文件来工作，该文件收集和回显生成表格的 HTML 代码。在 AJAX 成功时，它只是用返回的 html 填充特定的 div。

请随意扩展代码，如果你不能让它工作，也可以提出问题！我希望它可以为您节省一些时间！

# php - 在数组中搜索键并从查询结果中返回值

> ID：10994046
> 
> 赞同：0
> 
> 时间：2012-06-12T09:40:45.083
> 
> 标签：php, arrays, codeigniter

我使用 CI Active Record 运行查询，结果如下：

```
Array (
    [0] => Array ( [id_kelurahan] => 6 [id_indikator] => 8 [nilai] => 20 )
    [1] => Array ( [id_kelurahan] => 6 [id_indikator] => 9 [nilai] => 20 )
) 
```

从该结果中，我想搜索“id_kelurahan = 6”的位置并返回“nilai”的值。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:45:59.607

在你的数组上做一个循环并检查它的元素。

假设您的数组存储在名为的变量中`$theArray`：

```
foreach( $theArray as $arrayEach){
    if(6 == $arrayEach['id_kelurahan']){
        echo $arrayEach['nilai'];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:47:33.113

您需要遍历数组结果，例如：

```
foreach($result_array as $key) {
  if ( 6 == $key['id_kelurahan']) {
     print $key['nilai'];
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:51:16.657

试试这个

```
foreach($array as $internalArray){
    foreach($internalArray as $key => $value){
        if($key == 'id_kelurahan' && $value == 6){
            echo $internalArray['nilai'];
        }
    }
} 
```

# spring - Spring MVC 在 Tomcat 6.0.35 上使用 @RequestParam 和 RequestMethod.DELETE

> ID：10994049
> 
> 赞同：9
> 
> 时间：2012-06-12T09:41:08.087
> 
> 标签：spring, spring-mvc, http-delete

我有一个简单的方法（在 Tomcat 6.0.35 上运行），如下所示：

```
@RequestMapping(value = "/bla/d", method = RequestMethod.DELETE)
@ResponseStatus(HttpStatus.NO_CONTENT)
public void d(@RequestParam String d){
    //logic here
} 
```

当我发送带有类似帖子的参数的 DELETE 请求（正文中的 d=gggg）时，我收到 400 错误请求。但是，如果我将其更改为

```
@RequestMapping(value = "/bla/d", method = RequestMethod.POST)
@ResponseStatus(HttpStatus.NO_CONTENT)
public void d(@RequestParam String d){
    //logic here
} 
```

它完美地工作。我正在使用 Firefox 附加组件对其进行测试（以及 python 和 Spring 的 RestTemplate 具有相同的结果）这是请求在 POST 中的外观（a 是一个名为 a 并带有参数 a 的应对粘贴方法）：

```
POST /bla/a HTTP/1.1
Host: ~~~~:8080
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding: gzip, deflate
Connection: keep-alive
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Content-Length: 7
Pragma: no-cache
Cache-Control: no-cache
a=asdas

HTTP/1.1 204 No Content
Server: Apache-Coyote/1.1
Date: Tue, 12 Jun 2012 09:29:46 GMT 
```

删除看起来像：

```
DELETE /bla/d HTTP/1.1
Host: ~~~~~:8080
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding: gzip, deflate
Connection: keep-alive
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Content-Length: 7
d=asdas

HTTP/1.1 400 Bad Request
Server: Apache-Coyote/1.1
Content-Type: text/html;charset=utf-8
Content-Length: 971
Date: Tue, 12 Jun 2012 09:30:04 GMT
Connection: close 
```

请帮助我，我可能错过了一些愚蠢的东西，但我看不到它。我最初的问题是通过带有 DELETE 请求的 post-like body 发送一个数组，但似乎更基本的东西是错误的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-13T14:05:40.103

在做了一些研究和调试之后，我发现 Spring 的 ServletWebREquest 调用了 org.apache.catalina.connector.RequestFacade.getParameterValues 的 getParameterValues，它调用了 getParameterValues，我在其中找到了以下行（Request.java 2599-2600）：

```
if (!getMethod().equalsIgnoreCase("POST"))
return; 
```

这会杀死任何使用 DELETE 发送类似 POST 的参数的尝试，这意味着即使 RFC[不限制此类使用](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-p2-semantics-19#ref-Part6)，Tomcat 也会主动限制此用例（尽管它确实说某些现有实现可能会拒绝此类请求，但 Tomcat 只是抛出它的参数离开）。是什么带来了一个使用 Spring 和 Tomcat 并尝试向丑陋的解决方案发送带有参数的 DELETE 请求的原因，例如使用 @RequestBody 获取所有请求正文并手动提取它，这使得您所谓的无辜方法只想删除一些知道某个 Map 的东西包含请求正文。

@fmucar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-08T00:08:29.953

我遇到了类似的问题，我发现的解决方案是在查询字符串中添加字段。我仍然想知道以这种方式排除表单主体的原因，但目前这是一种解决方法。

因此，对于您的示例，这意味着将 ?a=asdas 添加到 Host: ~~~~~:8080 URL。

我正在使用 spring-webmvc:3.2.4.RELEASE 所以我不确定这是否适用于您的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-09T22:11:33.830

这是一篇很老的帖子，但如果其他人正在寻找如何在 DELETE 方法上启用 @RequestParam，这就是我在 tomcat 8.5.4 上所做的。

```
@Value("${server.parseBodyMethods}")
private String parseBodyMethods;

@Bean
public TomcatEmbeddedServletContainerFactory containerFactory() {
    return new TomcatEmbeddedServletContainerFactory() {
        protected void customizeConnector(Connector connector) {
            super.customizeConnector(connector);
            connector.setParseBodyMethods(parseBodyMethods);
        }
    };
} 
```

将“POST，DELETE”插入该定制器，您的删除请求参数应该开始工作。

我在 org.apache.catalina.connector.Connector 中找到了 parseBodyMethods，这里是 Tomcat 的文档：

> 这在想要支持 PUT 请求的 POST 样式语义的 RESTful 应用程序中很有用。请注意，除了 POST 之外的任何设置都会导致 Tomcat 的行为方式违背 servlet 规范的意图。根据 HTTP 规范，此处明确禁止使用 HTTP 方法 TRACE。默认为 POST ( [Source](https://tomcat.apache.org/tomcat-8.5-doc/config/http.html#Common_Attributes) )

# c++ - 调整动态字符串的大小会导致内存泄漏

> ID：10994052
> 
> 赞同：3
> 
> 时间：2012-06-12T09:41:12.487
> 
> 标签：c++, memory-leaks, dynamic-allocation

我从一个非常简单的程序开始：

```
#include <TBString.h>

int main(int argv, char** argc)
{
    tb::String test("");
    test = "Hello World!";

    return 0;
} 
```

`tb::String`是我自己的字符串类，旨在处理`char`字符串和`wchar_t`（Unicode）字符串。它是大量模板化的，`tb::String`是`tb::StringBase<char>`.

整个过程是使用 CRT 调试实用程序编译的，以检查内存泄漏。这是输出：

```
Detected memory leaks!
Dumping objects ->
c:\users\sam\svn\dependencies\toolbox\headers\tbstring2.inl(38) : {442} normal block at 0x00D78290, 1 bytes long.
 Data: < > 00 
{131} normal block at 0x00C5EFA0, 52 bytes long.
 Data: <                > A0 EF C5 00 A0 EF C5 00 A0 EF C5 00 CD CD CD CD 
Object dump complete.
Detected memory leaks!
Dumping objects ->
c:\users\sam\svn\dependencies\toolbox\headers\tbstring2.inl(38) : {442} normal block at 0x00D78290, 1 bytes long.
 Data: < > 00 
Object dump complete.
The program '[2888] SAM_release.exe: Native' has exited with code 0 (0x0). 
```

所以它看起来像一个空的 tb::String （大小为 0）导致内存泄漏。用这个程序确认，它不会泄漏：

```
#include <TBString.h>

int main(int argv, char** argc)
{
    tb::String test("Hello World!");

    return 0;
} 
```

原始程序的调用堆栈：

*   `StringBase<char>`用字符串创建一个`""`。
*   `m_Length`设置为 0。
*   `m_Maximum`设置为`m_Length + 1`(1)。
*   `m_Data`创建长度为`m_Maximum`(1)。
*   `m_Data`被清除并充满`""`。
*   `_AppendSingle`设置为`StringBase<char>::_AppendDynSingle`。
*   重载的运算符`StringBase<char>::operator =`用字符串调用`"Hello World!"`
*   `_AppendSingle`叫做。
*   `m_Length`为 0，`m_Maximum`为 1。
*   `checklen`设置为`m_Length + src_len + 1`(13)。
*   `m_Maximum`乘以 2 直到大于`checklen`(16)。
*   使用新的最大值调用该`StringBase<char>::Resize`函数。

调整大小功能：

```
template <typename C>
TB_INLINE StringBase<C>& StringBase<C>::Resize(int a_Maximum /*= -1*/)
{
    if (!m_Data)
    {
        m_Maximum = (a_Maximum == -1) ? 4 : a_Maximum;
        m_Data = new C[m_Maximum];
        StringHelper::Clear<C>(m_Data, m_Maximum);
    }
    else
    {
        int newmax = (a_Maximum == -1) ? (m_Maximum * 2) : a_Maximum;

        C* temp = new C[newmax];
        StringHelper::Clear<C>(temp, newmax);
        if (m_Length > 0) { StringHelper::Copy(temp, m_Data, m_Length); }
        delete [] m_Data;
        m_Data = temp;

        m_Maximum = newmax;
    }

    return *this;
} 
```

这是我怀疑的问题。现在，我的问题变成了：

如何在 C++ 中重新分配内存而不触发 CRT 调试器中的内存泄漏？

构造函数：

```
TB_INLINE StringBase<char>::StringBase(const char* a_String)
{
    m_Length = StringHelper::GetLength<char>(a_String);
    m_Maximum = m_Length + 1;
    m_Data = new char[m_Maximum];
    StringHelper::Clear<char>(m_Data, m_Maximum);

    StringHelper::Copy<char, char>(m_Data, a_String, m_Length);

    _AppendSingle = &StringBase<char>::_AppendDynSingle;
    _AppendDouble = &StringBase<char>::_AppendDynDouble;
} 
```

析构函数：

```
TB_INLINE StringBase<char>::~StringBase()
{
    if (m_Data) { delete [] m_Data; }
} 
```

赋值运算符：

```
TB_INLINE StringBase<char>& StringBase<char>::operator = (const char *a_String)
{
    Clear();
    return (this->*_AppendSingle)(a_String);
} 
```

附加功能：

```
template<>
TB_INLINE StringBase<char>& StringBase<char>::_AppendDynSingle(const char* a_String)
{
    if (!a_String) { return *this; }

    int src_len = StringHelper::GetLength<char>(a_String);

    // check size

    if (m_Maximum == -1)
    {
        m_Maximum = src_len + 1;
        m_Data = new char[m_Maximum];
        StringHelper::Clear<char>(m_Data, m_Maximum);
        m_Length = 0;
    }

    int checklen = m_Length + src_len + 1;
    if (checklen > m_Maximum)
    {
        while (checklen > m_Maximum) { m_Maximum *= 2; }
        Resize(m_Maximum);
    }

    // append

    strcat(m_Data, a_String);

    // new length

    m_Length += src_len;

    return *this;
} 
```

请注意：我不想使用`std::string`or `std::vector`，我想修复这个功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:35:59.447

执行赋值后，您正在泄漏构造函数中初始化的任何字节。要调试泄漏，请在执行分配时使用调试器单步执行。在变量上设置观察点可能很有用，`m_Data`以便调试器在更改值时停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:55:29.643

这将是一个漫长的过程。

首先，我决定检查我的理智。CRT 内存调试器是否正常工作？

```
int* src_test = new int[10];
for (int i = 0; i < 10; i++) { src_test[i] = i; }
int* dst_test = new int[10];
for (int i = 0; i < 10; i++) { dst_test[i] = src_test[i]; }
delete [] src_test; 
```

这正确地报告了 40 个字节的泄漏。此行修复泄漏：

```
delete [] dst_test; 
```

好吧，还有什么？好吧，也许解构器没有被调用。让我们把它放在一个函数中：

```
void ScopeTest()
{
    tb::String test("Hello World!");
    test = "Hello World! Again!";
} 
```

它有效，但它会泄漏。让我们绝对确保调用了解构器。

```
void ScopeTest()
{
    tb::String* test = new tb::String("Hello World!");
    *test = "Hello World! Again!";
    delete test;
} 
```

还在漏。那么，`=`运营商是做什么的呢？它清除并附加。让我们手动完成：

```
void ScopeTest()
{
    tb::String* test = new tb::String("Hello World!");
    test->Clear();
    test->Append("Hello World! Again!");
    delete test;
} 
```

结果相同，因此与运算符无关。我想知道如果我删除了会发生什么`Clear`...

```
void ScopeTest()
{
    tb::String* test = new tb::String("Hello World!");
    test->Append("Hello World! Again!");
    delete test;
} 
```

好吧，它……等等，什么？*不*漏吗？那做什么`Clear`呢？

```
template <>
TB_INLINE StringBase<char>& StringBase<char>::Clear()
{
    if (m_Data)
    {
        StringHelper::Clear<char>(m_Data, m_Maximum);
    }

    m_Length = 0;

    return *this;
} 
```

那是……无害的。但是让我们把它注释掉。

```
template <>
TB_INLINE StringBase<char>& StringBase<char>::Clear()
{
    /*if (m_Data)
    {
        StringHelper::Clear<char>(m_Data, m_Maximum);
    }

    m_Length = 0;*/

    return *this;
} 
```

结果相同，没有泄漏。让我们`Clear`再次删除调用。

```
void ScopeTest()
{
    tb::String* test = new tb::String("Hello World!");
    //test->Clear();
    test->Append("Hello World! Again!");
    delete test;
} 
```

再次泄漏字节...

但是等一下，它还在清除`tb::String`? 长度设置为 0 并且数据清零，即使正文已被注释掉。怎么，什么……

好吧，编译器，让我们看看你编译*这个*：

```
/*template <>
TB_INLINE StringBase<char>& StringBase<char>::Clear()
{
    if (m_Data)
    {
        StringHelper::Clear<char>(m_Data, m_Maximum);
    }

    m_Length = 0;

    return *this;
}*/ 
```

哈！那会告诉他的！哦等等......它......仍然编译并运行。

我使用的是同一文件的不同版本吗？不，我只有一个版本的`TBString2.h`and`TBString2.inl`在这台电脑上...

哦。

哦，等一下。

哦，该死的。

这最好不要像我想的那样。

```
Project Toolbox -> $(OutDir)\$(ProjectName)_d.lib 
```

我要杀了那个为此花了三个小时的人。

```
Project Game -> Toolbox.lib 
```

等一下。那是我。

**TL;DR：我链接到一个旧版本的字符串类，导致各种奇怪的行为，包括内存泄漏。**

# c++ - GCC 的函数 __attribute__s 是否与虚函数一起使用？

> ID：10994055
> 
> 赞同：13
> 
> 时间：2012-06-12T09:41:13.117
> 
> 标签：c++, gcc, pure-virtual

[GCC C++ 编译器通过函数属性](http://gcc.gnu.org/onlinedocs/gcc-4.3.2//gcc/Function-Attributes.html)提供了一系列扩展，例如：

```
int square(int) __attribute__((const)); 
```

特别是两个属性`const`和`pure`，允许您声明函数的评估没有副作用，并且仅取决于其参数（`const`），或仅取决于其参数和全局变量（`pure`）。这允许消除公共子表达式，这可能会导致调用此类函数的次数少于在代码中编写的次数。

我的问题是这是否可以安全、正确和合理地用于虚拟成员函数：

```
struct Foo
{
    virtual int square(int) __attribute__((pure));   // does that make sense?
}; 
```

这有任何合理的语义吗？是否允许？或者它只是被忽略了？恐怕我在 GCC 文档中找不到这个问题的答案。

这个问题的原因是有一系列编译器选项`-Wsuggest-attribute`使 GCC 产生建议，这些属性可以放置在何处以改进代码。然而，似乎最终甚至对虚拟功能也提出了这些建议，我想知道这些建议是否应该被认真对待。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T12:23:43.163

GCC 允许并接受它。它通常*不会*被忽略（你知道这一点，因为 GCC 总是输出`warning: attribute ignored`，当它完全忽略一个属性时，它不会在这里）。但也阅读了最后一段。

是否有意义是另一个问题。虚函数可以被重载，你可以在没有属性的情况下重载它。这就引发了下一个问题：*这*合法吗？

人们会期望具有不同属性的函数具有不同的签名（例如使用`const`限定符或不同的异常规范），但事实并非如此。GCC 在这方面将它们视为完全相同。您可以通过派生和实现成员函数 non-const`Bar`来验证这一点。`Foo`然后

```
decltype(&Bar::square) f1 = &Foo::square;
decltype(&Foo::square) f2 = &Bar::square; 
```

正如您所期望的那样，将在第二行给出编译时错误，但不会在第一行给出。如果签名不同（尝试使函数具有 const 限定，而不是使用属性！），*第一*行已经给出了错误。

最后，它是否安全，是否有意义？它总是安全的，编译器必须确保它是安全的。它在语义上确实有意义，在一定范围内。

从语义的角度来看，声明一个函数`const`或者`pure`如果它确实是这样是“正确的”。但是，就您向界面的用户做出可能不真实的“承诺”而言，这有点尴尬。有人可能会调用这个函数，这个函数看起来是`const`在派生类上，但事实并非如此。编译器必须确保它仍然可以工作，但用户对性能的期望可能与现实有所不同。

将函数标记为`const`或`pure`可能允许编译器更好地优化。现在，使用虚函数，这有点困难，因为对象可能是派生类型，而这不是真的！
这必然意味着编译器必须忽略优化的属性，除非虚拟调用可以静态解析。这种情况可能仍然经常发生，但并非普遍如此。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T12:46:03.293

第一个问题是这些属性是否甚至对虚拟方法具有有效的语义。在我看来，他们确实如此。我希望如果一个虚函数被标记为纯，你会向编译器保证所有实现只依赖于它们的参数和全局内存中的数据（并且不要改变它），其中全局内存中的数据也将包括物体。如果一个虚函数被标记为 const 这意味着它只能依赖于它的参数，甚至不允许它检查对象的内容。编译器必须强制所有重写的虚拟方法声明属性至少与其父级一样强。

下一个问题是 GCC 是否使用这些属性进行优化。在下面的测试程序中，您可以看到版本 4.6.3 没有（尝试使用 -O3 编译到汇编程序，您将看到循环已展开）。

```
struct A {
    virtual int const_f(int x) __attribute__((const)) = 0;
};

int do_stuff(A *a) {
    int b = 0;
    for (int i=0; i<10; i++) {
        b += a->const_f(0);
    }
    return b;
} 
```

即使在编译时已知类型的以下程序中，编译器也不会优化循环。

```
struct A {
    virtual int const_f(int x) __attribute__((const)) = 0;
};

struct B : public A {
    int const_f(int x) __attribute__((const));
};

int do_stuff(B *b) {
    int c = 0;
    for (int i=0; i<10; i++) {
        c += b->const_f(0);
    }
    return c;
} 
```

从 A 中删除继承（从而使方法成为非虚拟方法）允许编译器进行预期的优化。

没有关于这些属性的标准或文档，因此我们可以拥有的最佳参考是实现。由于它们目前没有效果，我建议避免在虚拟方法上使用它们，以防将来行为发生意外变化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T12:31:32.820

在您链接到的文档中，在 const 属性的描述下有此注释：

> 请注意，具有指针参数并检查指向的数据的函数*不得*声明为 const。

我会说这包括成员函数，因为它们有一个隐式指针参数（至少虚函数需要检查它才能到达 vtable，不是吗？）。

他们似乎在这个线程中得出了类似的结论：http: [//gcc.gnu.org/ml/gcc/2011-02/msg00460.html](http://gcc.gnu.org/ml/gcc/2011-02/msg00460.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-23T04:28:14.437

**当且仅当函数通过静态绑定调用时，**G++ 4.8.1**似乎尊重虚拟成员函数的`pure`和函数属性。`const`**

 **给定以下源代码：

```
struct Base {
    void w();
    void x() __attribute__ ((const));
    virtual void y();
    virtual void z() __attribute__ ((const));
};

struct Derived : public Base {
    void w() __attribute__ ((const));
    void x();
    virtual void y() __attribute__ ((const));
    virtual void z();
};

void example() {
    Base b, *pb;
    Derived d, *pd;
    b.w(); // called
    b.x(); // not called
    b.y(); // called
    b.z(); // not called
    pb->w(); // called
    pb->x(); // not called
    pb->y(); // called
    pb->z(); // called
    d.w(); // not called
    d.x(); // called
    d.y(); // not called
    d.z(); // called
    pd->w(); // not called
    pd->x(); // called
    pd->y(); // called
    pd->z(); // called
} 
```

…编译器生成以下（摘录）汇编代码：

```
void example() {
    Base b, *pb;
    Derived d, *pd;
    b.w(); // called
  1c:   e8 00 00 00 00          callq  21 <_Z7examplev+0x21>
    b.x(); // not called
    b.y(); // called
  21:   48 89 e7                mov    %rsp,%rdi
  24:   e8 00 00 00 00          callq  29 <_Z7examplev+0x29>
    b.z(); // not called
    pb->w(); // called
  29:   48 89 df                mov    %rbx,%rdi
  2c:   e8 00 00 00 00          callq  31 <_Z7examplev+0x31>
    pb->x(); // not called
    pb->y(); // called
  31:   48 8b 2b                mov    (%rbx),%rbp
  34:   48 89 df                mov    %rbx,%rdi
  37:   ff 55 00                callq  *0x0(%rbp)
    pb->z(); // called
  3a:   48 89 df                mov    %rbx,%rdi
  3d:   ff 55 08                callq  *0x8(%rbp)
    d.w(); // not called
    d.x(); // called
  40:   48 8d 7c 24 10          lea    0x10(%rsp),%rdi
  45:   e8 00 00 00 00          callq  4a <_Z7examplev+0x4a>
    d.y(); // not called
    d.z(); // called
  4a:   48 8d 7c 24 10          lea    0x10(%rsp),%rdi
  4f:   e8 00 00 00 00          callq  54 <_Z7examplev+0x54>
    pd->w(); // not called
    pd->x(); // called
  54:   48 89 df                mov    %rbx,%rdi
  57:   e8 00 00 00 00          callq  5c <_Z7examplev+0x5c>
    pd->y(); // called
  5c:   48 8b 2b                mov    (%rbx),%rbp
  5f:   48 89 df                mov    %rbx,%rdi
  62:   ff 55 00                callq  *0x0(%rbp)
    pd->z(); // called
  65:   48 89 df                mov    %rbx,%rdi
  68:   ff 55 08                callq  *0x8(%rbp)
} 
```**

# ajax - JSF2 HTML5 输入（电子邮件）不更新模型

> ID：10994057
> 
> 赞同：0
> 
> 时间：2012-06-12T09:41:19.300
> 
> 标签：ajax, html, jsf-2, renderer

如果值绑定到 html5 输入类型 = 电子邮件，我在考虑在 JSF2 应用程序的 ajax 往返中更新我的支持 bean 时遇到问题。

1.  首先，我创建了一个“Html5InputRenderer”，以便 JSF-runtime 可以为 a 创建 html5-markup，以便编写

2.  “Html5InputRenderer”的核心“魔法”是：

    ```
    markup.replaceAll("type=\"text\"", "type=\"email\""); 
    ```

    在 javax.faces.renderer.Renderer 的重写方法 encodeEnd(..) 中。

3.  这个 h:input 被放入一个表单并用 f:ajax 丰富：

    ```
    <h:form id="form">                      
      <f:ajax render="testOut">
        <h:inputText id="test" renderedType="email" value="#{testBean.value}" />
      </f:ajax>
      <h:outputText id="testOut" value="#{testBean.value}" />
    </h:form> 
    ```

4.  属性“renderedType”是 JSF-“Html5InputRenderer”为 h:input 渲染 html5 标记的提示

5.  测试片段。尽管 JSF 运行时调用了 ajax 往返，但它不会更新 #{testBean.value}。

6.  测试删除属性“renderedType”的片段，一切都按预期工作。

# vb.net - 使用 office interop 检测 word 文档中的表格和图像

> ID：10994060
> 
> 赞同：2
> 
> 时间：2012-06-12T09:41:37.713
> 
> 标签：vb.net, office-interop

我正在使用 word interop API 遍历 word 文档中的段落。到目前为止，我没有遇到使用样式对象检测不同标题的问题。但是现在我有一种情况，表内的内容与表外的内容具有相同的样式。我需要找到一种方法来理解所讨论的段落何时实际上是一个表格。

我有类似的需要弄清楚段落何时实际上是嵌入图像。

当我在 word 文档中物理选择表格或图像时，我可以看到上面的工具部分格式发生了变化。When an image is selected it is "Picture tools" when a table is selected it is 'Table tools" and when a normal paragraph is selected the tools section does not show.

如何使用 word interop API 检测这种行为？

谢谢萨米尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T12:43:36.213

虽然这篇文章似乎很旧，但我在从事办公自动化工作时寻找类似问题时遇到了这个问题，希望这篇文章有助于进一步调查和扩展。

在遍历 word 文档的段落时，

`Paragraph.Range.Tables.Count`提供一个值，指示段落是否在表格内。

```
Paragraph Outside table :  Paragraph.Range.Tables.Count = 0
Paragraph Inside  table :  Paragraph.Range.Tables.Count = 1 ( or above not checked ) 
```

获取表格末尾（表格内的最后一段）

```
 :  Paragraph.Next().Range.Tables.Count == 0 
```

（上述逻辑适用于使用 NetOffice 程序集，而后者又使用互操作程序集，希望这也可以直接适用于 word 互操作程序集）

# canvas - 有人知道 HTML5 画布中游戏的“好”框架吗？（见要求）

> ID：10994071
> 
> 赞同：2
> 
> 时间：2012-06-12T09:42:35.970
> 
> 标签：canvas, frameworks

我需要一个用于 HTML5 和画布的框架：

*   免费和开源
*   用 javascript 编写（没有 GWT，没有 java，没有 coffescript，没有其​​他语言）（因为我将在服务器上使用 node.js，并且可能会与 qooxdoo 应用程序集成）
*   拖放大图像（3000x2000px）
*   放大和缩小
*   允许我使用一些 UI：标签、按钮、textField、textArea、滚动条
*   动画框架，只是简单的位移。
*   图层

一个优点可能是：

*   为每个绘制的对象使用对象和 OOP 方法；
*   支持模块化组件（MVC结构）

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:34:00.030

ImpactJS 应该是您的正确选择。（不确定大图像的 DnD）。

[http://impactjs.com/](http://impactjs.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T17:57:22.397

我会支持 CraftyJS。除了宏图像和 UI 类之外，它具有您正在寻找的大部分功能。这是实体/组件设计模式的一个很好的实现。如果您有兴趣，请查看它。[http://craftyjs.com](http://craftyjs.com)

# c - 为什么 strcpy 会因 char *s 而失败，而不会因 char s[1024] 而失败？

> ID：10994072
> 
> 赞同：3
> 
> 时间：2012-06-12T09:42:41.760
> 
> 标签：c, segmentation-fault

为什么会发生以下情况：

```
char s[2] = "a";
strcpy(s,"b");
printf("%s",s); 
```

--> 执行没有问题

```
char *s = "a";
strcpy(s,"b");
printf("%s",s); 
```

--> 段错误

第二个变体不应该也分配2个字节的内存`s`，因此有足够的内存可以复制到`"b"`那里吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T09:47:35.240

```
char *s = "a"; 
```

指针`s`指向字符串字面量`"a"`。尝试对此进行写入具有未定义的行为，因为在许多系统上，字符串文字存在于程序的只读部分中。

字符串文字是类型`char[N]`而不是`const char[N]`使它更清晰是历史的偶然。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T09:49:21.943

> 第二个变体不应该也为 s 分配 2 个字节的内存，从而有足够的内存来复制“b”吗？

不，`char *s`指向包含字符串的静态内存地址`"a"`（写入该位置会导致您遇到的段错误），而`char s[2];`它本身提供了字符串所需的空间。

如果要手动为字符串分配空间，可以使用动态分配：

```
char *s = strdup("a"); /* or malloc(sizeof(char)*2); */
strcpy(s,"b");
printf("%s",s); /* should work fine */ 
```

之后不要忘记`free()`你的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T12:35:39.197

总而言之，另一种方式/答案：我认为错误在于您没有创建指针必须指向的变量，因此是段错误。

**我遵循的一条规则**：声明一个指针变量不会创建变量的类型，它指向。它创建一个指针变量。因此，如果您指向字符串缓冲区，则需要指定字符数组和缓冲区指针并指向字符数组的地址。

# php - Zend 选择数据库，没有获取列

> ID：10994081
> 
> 赞同：1
> 
> 时间：2012-06-12T09:43:08.370
> 
> 标签：php, zend-framework, zend-db

从数据库中选择数据时，zend 出现问题。在我的查询中，我不想从与另一个表连接的表中选择任何列。我在第三个参数中使用 array() 。但是当我这样做时：

```
$sql = $db->select();
    $sql->from( "message", "message.message_id" )

        ->->join("network_users","message.network_id = network_users.network_id and message.user_id = network_users.user_id","network_users.network_id") //no get column
        ->join("users","message.user_id = users.user_id",array()) //no get column
        ->where( "message.network_id = :network_id" )
        ->where( "message.del_flg = 0" )
        ->where( "network_users.del_flg = 0" )
        ->where( "users.del_flg = 0" )
        ->order( "message.regist_date DESC" );

 $ary[':network_id']   = $network_id;
 $ret = $db->fetchAll($sql, $ary);

return empty($ret[0]["user_id"]) ? array():$ret; 
```

我总是得到结果是`array(0) {}`

当我在每个表中获得至少一列时，它会响应正确的结果。

对我的问题有任何想法吗？？？？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T15:14:24.690

使用`null`代替`array()`

所以它看起来像这样： `->join("users","message.user_id = users.user_id",null)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T01:54:54.587

我发现了问题，问题是我使用`return empty($ret[0]["user_id"]) ? array():$ret;`而不是`return empty($ret[0]["message_id"]) ? array():$ret;`.

这就是我总是收到的原因`array(0) {}`。

感谢帮助。^_^

# javascript - position text alongside icon using css or jquery

> ID：10994086
> 
> 赞同：0
> 
> 时间：2012-06-12T09:43:39.920
> 
> 标签：javascript, jquery, html, css, xhtml

My features HTML is code generated, I would like to display the text along side the icons but the only way I have managed to do it, is by `position:absolute;` and this is NOT good as some products have a cart box directly above the features and some dont, therefore absolute position doesnt work.

Is there a way to relatively position the feature names along side the icons using either css or jquery?

I have tried this: [http://jsfiddle.net/nHHkQ/](http://jsfiddle.net/nHHkQ/)

**HTML:**

```
<div id="FeatureIconsWrapper">
    <div class="FeatureIconImages">
      <a title="CapacityChildren" href=
      "popup.aspx?title=CapacityChildren&amp;topic=feature_CapacityChildren" rel="icons"
      class="iconClick"><img title="CapacityChildren" alt="CapacityChildren" src=
      "http://i50.tinypic.com/hwh0ud.png" /></a>
    </div>

    <div class="FeatureIconImages">
      <a title="EasyBackpackingSystem" href=
      "popup.aspx?title=EasyBackpackingSystem&amp;topic=feature_EasyBackpackingSystem"
      rel="icons" class="iconClick"><img title="EasyBackpackingSystem" alt=
      "EasyBackpackingSystem" src="http://i50.tinypic.com/hwh0ud.png" /></a>
    </div>

    <div class="FeatureIconImages">
      <a title="EasyInflationSystem" href=
      "popup.aspx?title=EasyInflationSystem&amp;topic=feature_EasyInflationSystem" rel=
      "icons" class="iconClick"><img title="EasyInflationSystem" alt=
      "EasyInflationSystem" src="http://i50.tinypic.com/hwh0ud.png" /></a>
    </div>

    <div class="FeatureIconImages">
      <a title="MaxLoadCapacity" href=
      "popup.aspx?title=MaxLoadCapacity&amp;topic=feature_MaxLoadCapacity" rel="icons"
      class="iconClick"><img title="MaxLoadCapacity" alt="MaxLoadCapacity" src=
      "http://i50.tinypic.com/hwh0ud.png" /></a>
    </div>

    <div class="FeatureIconImages">
      <a title="Weight" href="popup.aspx?title=Weight&amp;topic=feature_Weight" rel=
      "icons" class="iconClick"><img title="Weight" alt="Weight" src=
      "http://i50.tinypic.com/hwh0ud.png" /></a>
    </div>

    <ul id="FeatureIconNamesWrapper">
      <li class="FeatureIconNames">ISO 6185-1</li>

      <li class="FeatureIconNames">ISO 6185-1</li>

      <li class="FeatureIconNames">ISO 6185-1</li>

      <li class="FeatureIconNames">ISO 6185-1</li>

      <li class="FeatureIconNames">ISO 6185-1</li>
    </ul>

    <div class="c1"></div>
  </div> 
```

**CSS:**

```
div#FeatureIconsWrapper {
    background-color: #DEDEDE;
    border-left: 1px solid white;
    border-radius: 0 0 7px 7px;
    padding-bottom: 10px;
    width: 236px;
}

div.FeatureIconImages, div#FeatureIconNames {
    font-size: 14px;
    font-weight: bold;
    line-height: 20px;
    padding-left: 7px;
    padding-top: 17px !important;
}

div.FeatureIconImages {
    padding-left: 7px;
    padding-top: 20px;
}

div.FeatureIconImages {
    width: 60px;
}

ul#FeatureIconNamesWrapper {
    font-size: 14px;
    font-weight: bold;
    padding-right: 40px;
    position: absolute;
    top: 375px;
}

li.FeatureIconNames {
    margin-bottom: 57px;
    margin-left: 85px !important;
} 
```

![problem](../Images/87ce990ec6b51167240ee4144911e01d.png)

![This is how it should look](../Images/67f36e451f136f57a7564806be5e7a79.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:51:48.400

I guess the problem is your wrong structure of html. If you can tweak your html as in my fiddle then you can easily obtain img - label pair using css float. Please check this fiddle - [http://jsfiddle.net/ashwyn/cgj5U/](http://jsfiddle.net/ashwyn/cgj5U/)

OR

You can even do this without changing your html structure. used `float:left` on both the main sections [http://jsfiddle.net/ashwyn/9dUDX/](http://jsfiddle.net/ashwyn/9dUDX/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T09:52:59.057

```
$imgs = $('#FeatureIconsWrapper .FeatureIconImages'); // cache image wrappers for better performance
$('#FeatureIconNamesWrapper li').each(function(i,e){
    $imgs.filter(':eq(' + i + ')').after($(e).detach());
})​ 
```

[Proof of concept fiddle here – disregard the CSS.](http://jsfiddle.net/nHHkQ/2/).

Note: This solution sucks for multiple reasons. If there is any way you can alter the markup: Do it!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T10:00:56.987

i have edited the Fiddle. take a look at here : [Fiddle](http://jsfiddle.net/MFCDeveloper/nHHkQ/14/)

# javascript - 单击该图像时如何在canavs html5中获取图像ID？

> ID：10994090
> 
> 赞同：0
> 
> 时间：2012-06-12T09:44:02.367
> 
> 标签：javascript, html

这是我的代码：

```
<body>
    <canvas id="myCanvas" width="1100" height="600" style="border:1px solid #c3c3c3; cursor:move">
        Your browser does not support the canvas element.
    </canvas>

    <script type="text/javascript">
        var c=document.getElementById("myCanvas");

        var ctx=c.getContext("2d");
        var img=new Image();
        img.src="image.jpg";
        img.id="im";

        img.onload = function(){
            ctx.drawImage(img,0,0,100,100);
            autoRun();
        };

        function autoRun(){
            ctx.clearRect(0, 0, 1100,600);
            img.id="im";
            ctx.drawImage(img,Math.floor((Math.random()*1000)+1),Math.floor((Math.random()*500)+1),70,70);
            setTimeout('autoRun()',1000);
        }   
    </script>
</body> 
```

在这里，我使用随机方法来设置 X 和 Y 坐标，因此图像将动态移动将移动画布区域......

```
 setTimeout('autoRun()',1000); 
```

上面的行将每秒钟调用一次自动运行函数javascript，该函数将清除画布并用新坐标重绘图像......

现在我想在我们单击它时获取图像的 id。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:47:54.877

编辑-这行不通！这对你有用吗？还是有其他并发症？

```
//This would bind to all image, but you can use
//other jquery selectors to select your perticular 
//image
$('img').click(function(){
  var my_id = $(this).attr('id');
  return false;
}); 
```

**编辑**

“..图像本身在 DOM 中不可用，您只是临时创建它以将其绘制到画布中。因此画布保存图像的内容，图像本身不在 DOM 中”

[使用 jQuery 在画布中选择图像](https://stackoverflow.com/questions/8801168/select-image-within-canvas-with-jquery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:15:19.600

我认为您应该分割您的形状`image`（定义其边界像素），然后检查当您在 内部单击时`canvas`，选择的点（单击时的鼠标位置）是否在图像内部`shape`。

这可以解决您的问题。

# android - 如何在drawable中引用颜色属性？

> ID：10994091
> 
> 赞同：43
> 
> 时间：2012-06-12T09:44:16.640
> 
> 标签：android, android-layout

我想做一件简单的事情：定义一个与系统状态按下的背景颜色具有完全相同背景颜色的可绘制对象。我在 res/drawables/my_drawable.xml 中这样做：

```
<?xml version="1.0" encoding="utf-8"?>
  <selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_selected="true">
      <color android:color="?android:attr/colorPressedHighlight"/>
    </item>
    <item android:state_selected="false">
      <color android:color="@color/section_list_background"/>
    </item>    
  </selector> 
```

我总是得到：

```
java.lang.UnsupportedOperationException: Cant convert to color: type=0x2 
```

有什么线索吗？

问候

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-04-13T22:19:05.300

您可能需要执行以下操作来解决您的问题：

1) 在颜色文件中为每个主题定义 2 种颜色：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="my_color_dark">#ff33B5E5</color>
    <color name="my_color_light">#ff355689</color>
</resources> 
```

2) 创建文件 res/values/attrs.xml 的内容：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <attr name="my_color" format="reference" />
</resources> 
```

3) 假设您的 styles.xml (`Theme.dark`和`Theme.light`) 中有 2 个主题定义：

```
<style name="Theme.dark" parent="@style/Theme.Sherlock">
    <item name="my_color">@color/my_color_dark</item>
</style>

<style name="Theme.light" parent="@style/Theme.Sherlock.Light">
    <item name="my_color">@color/my_color_light</item>
</style> 
```

4）在drawable中使用颜色：

```
<color android:color="?attr/my_color"/> 
```

希望这可以解决您的问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-12T09:51:05.143

只需在其中创建一个新的 color.xml 文件`/res/values/color.xml`并在其中放入如下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="editcolor">#ff99ffff</color>
    <color name="transparent">#00000000</color>
</resources> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-11-27T17:00:16.537

您不能`?attr`在 xml 可绘制资源中使用，因为可绘制资源由 aapt 在编译时创建。运行时用于动态连接的 attr 资源

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-12T10:02:38.613

您正在尝试将属性转换为颜色。属性是通常附加到视图的属性，然后可以使用主题对其进行样式设置。

您需要在 xml 中引用颜色资源。您可以通过创建自己的资源来做到这一点：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="colorPressedHighlight">#FF8800</color>
</resources> 
```

然后像这样引用它：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_selected="true">
        <color android:color="@color/colorPressedHighlight"/>
    </item>
    <item android:state_selected="false">
        <color android:color="@color/section_list_background"/>
    </item>    
</selector> 
```

或者您可以参考 Android 资源中可用的颜色：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_selected="true">
        <color android:color="@android:color/holo_orange_light"/>
    </item>
    <item android:state_selected="false">
        <color android:color="@android:color/holo_blue_dark"/>
    </item>
</selector> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T10:11:07.720

尝试这种方式将颜色放入 android:drawable 如下

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="?android:attr/colorPressedHighlight"/> <!-- pressed -->
    <item android:state_focused="true" android:drawable="@color/blue"/> <!-- focused -->
    <item android:drawable="@color/section_list_background"/> <!-- default -->
</selector> 
```

或者

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
   <item android:state_focused="true" android:color="?android:attr/colorPressedHighlight"/>
   <item android:state_enabled="false" android:color="@color/section_list_background" />
   <item android:color="@color/testcolor5"/>
 </selector> 
```

# javascript - 将 onMouseOver 事件绑定到 jQuery 自动完成项目

> ID：10994095
> 
> 赞同：0
> 
> 时间：2012-06-12T09:44:30.460
> 
> 标签：javascript, jquery, jquery-ui-autocomplete

我有一个 jQuery 自动完成字段，它从 Amazon 的自动完成中获取结果，您可以在下面的源代码中看到。每次用户将光标悬停在自动完成列表上的项目上时，我都需要调用一个函数。

函数本身不是问题，只是我不知道如何调用它。因此，为简单起见，假设我只需要提醒项目光标已结束。如果我想在onClick 上执行此操作，我想我可以添加一个`select`属性，但是如何在onMouseOver 上执行呢？

这是jQuery：

```
$(document).ready(function () {

    //http://completion.amazon.com/search/complete?method=completion&q=halo&search-alias=videogames&mkt=1&x=updateISSCompletion&noCacheIE=1295031912518
    var filter = $("#new_item").autocomplete({
        source: function (request, response) {
            $.ajax({
                url: "http://completion.amazon.com/search/complete",
                type: "GET",
                cache: false,
                dataType: "jsonp",
                success: function (data) {
                    response(data[1]);
                },
                data: {
                    q: request.term,
                    "search-alias": "stripbooks",
                    mkt: "1",
                    callback: '?'
                }
            });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:04:12.983

自动完成列表在 dom 中作为 ul 与`class="ui-autocomplete ..."`菜单项在其中作为 li 与`class="ui-menu-item"`所以使用 jQuery 将 onMouseover 绑定到它们：

`$('.ui-autocomplete .ui-menu-item').hover(mouseInHandler, mouseOutHandler);`更多关于悬停功能的信息可以在[这里](http://api.jquery.com/hover/)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:17:37.530

如果我猜对了，您想在触发鼠标悬停事件时在自动完成列表中选择一个条目吗？然后你可以这样做：

```
 $j('.ui-autocomplete').on('mouseover', '.ui-menu-item', function () {
        $(this).find('a').click();
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:25:26.263

写吧：

```
$('#element').hover(function()
{
    alert('hoho!');
}); 
```

# jquery - jquery .append() 在 Windows 上不起作用

> ID：10994097
> 
> 赞同：0
> 
> 时间：2012-06-12T09:44:33.943
> 
> 标签：jquery, windows, append, document-body

我正在尝试生成一种可打印版本的联系表格。通过单击“#drucken”按钮，我试图隐藏内容包装器并将表单的内容附加到带有新类“print”的正文中。一切似乎都可以在 Mac 上运行，但在 Windows 计算机上却不行。IE 和 Firefox 都不能在 Windows 计算机上运行。

```
$('#drucken').click(function(){
    // druckfunktion
    // I'm getting all the variables and combine the in the dataString

        var dataString = 'patName=' + patName + '&patAdresse= ' + patAdresse + '&patTel=' + patTel + '&patTelG=' + patTelG + '&gebDatum=' + gebDatum + '&privat=' + privat + '&kkNummer=' + kkNummer + '&kkAdresse=' + kkAdresse + '&versicherung=' + versicherung + '&implantationsort=' + implantationsort + '&extraktion=' + extraktion + '&provisorium=' + provisorium + '&implantattypen=' + implantattypen + '&suprastruktur=' + suprastruktur + '&nachkontrollen=' + nachkontrollen + '&opt=' + opt + '&dvt=' + dvt + '&beilagen=' + beilagen + '&arzt=' + arzt + '&datum=' + datum;  
        //alert (dataString);return false;  
        $.ajax({  
            type: "POST",  
            url: "",  
            data: dataString,
            success: function(){
                $('body').addClass('print');
                $('#wrapper').fadeOut(200);
                $('body.print').append("<table><tr><td>Patienten Name:</td><td>" + patName + "</td></tr><tr><td>Patienten Adresse:</td><td>" + patAdresse + "</td></tr><tr><td>Tel. Nr.:</td><td>" + patTel + "</td></tr><tr><td>Tel. G.:</td><td>" + patTelG + "</td></tr><tr><td>Geb. Datum:</td><td>" + gebDatum + "</td></tr><tr><td>Privat/Krankenkasse:</td><td>" + privat + "</td></tr><tr><td>Krankenkassen Nummer:</td><td>" + kkNummer + "</td></tr><tr><td>Adresse Krankenkasse:</td><td>" + kkAdresse + "</td></tr><tr><td>Versicherung/IV/MV:</td><td>" + versicherung + "</td></tr><tr><td>Implantationsort:</td><td>" + implantationsort + "</td></tr><tr><td>Extraktion vor Implantation:</td><td>" + extraktion + "</td></tr><tr><td>Provisorium:</td><td>" + provisorium + "</td></tr><tr><td>Implantattyp:</td><td>" + implantattypen + "</td></tr><tr><td>Suprastruktur:</td><td>" + suprastruktur + "</td></tr><tr><td>Nachkontrollen:</td><td>" + nachkontrollen + "</td></tr><tr><td>R&ouml;ntgen:</td><td>" + opt + " " + dvt + "</td></tr><tr><td>Beilagen:</td><td>" + beilagen + "</td></tr><tr><td>&Uuml;berweisender Arzt:</td><td>" + arzt + "</td></tr><tr><td>Datum:</td><td>" + datum + "</td></tr><tr><td colspan=\'2\'><input type=\'button\' value=\'Formular ausdrucken\' onClick=\'javascript:window.print()\'></td></tr><tr><td colspan=\'2\'><input type=\'button\' value=\'zur&uuml;ck\' id=\'back\'></td></tr></table>")
                .hide()  
                .fadeIn(1500);
                $('#back').click(function(){
                    $('table').fadeOut(500);
                    $('body').removeClass('print');
                    $('#wrapper').fadeIn(1500);
                });
            }

        });  
        return false;  

}); 
```

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:11:17.860

我正在使用 Opera，但我不明白为什么它只适用于 Mac？这是我的 jsfiddle：http: [//jsfiddle.net/nfSRf/](http://jsfiddle.net/nfSRf/)？

![在此处输入图像描述](../Images/17e9ea25bf8f03b718fcdbe53e23adae.png)

# iphone - iPhone测试中的核心数据问题

> ID：10994098
> 
> 赞同：0
> 
> 时间：2012-06-12T09:44:42.230
> 
> 标签：iphone, ios, xcode, core-data

我有一个应用程序，我在我的 mac 和模拟器中进行了测试，它很震撼。但是当我尝试用 iPhone 或其他人测试它时，尝试运行它。它在某个地方出错并发送：

> 2012-06-12 11:27:26.932 CogniviaTaxi2012[23463:707] Valor: Nancy, Meurthe-et-Moselle, France
> 
> 2012-06-12 11:27:26.933 CogniviaTaxi2012[23463:707] 价值：21758
> 
> 2012-06-12 11:27:27.097 CogniviaTaxi2012[23463:707] 支付：FR
> 
> 2012-06-12 11:27:27.228 CogniviaTaxi2012[23463:707] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** -[__NSArrayM insertObject:atIndex:]：对象不能为 nil”

```
DetailTaxi *detailView = [[DetailTaxi alloc] initWithNibName:nil bundle:[NSBundle mainBundle]];

NSString *nomville = [[_jsonDict objectAtIndex:indexPath.row] objectForKey:@"label"];
NSString *idVille = [[_jsonDict objectAtIndex:indexPath.row] objectForKey:@"id"];

detailView.title = nomville;
detailView.idVille = idVille;

NSLog(@"Valor: %@", nomville);
NSLog(@"Valor: %@", idVille);

AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

NSManagedObjectContext *context = [appDelegate managedObjectContext];
NSManagedObject *villesR = [NSEntityDescription
                                   insertNewObjectForEntityForName:@"Ville"
                                   inManagedObjectContext:context];
[villesR setValue:idVille forKey:@"idV"];
[villesR setValue:nomville forKey:@"nom"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:32:15.943

最后..这是一个 NSMutableArray 中的图像插入。我在硬盘中有图像，但在项目中没有。因此，当我导出项目时，图像不存在。

抱歉打扰了。

# django - Django 1.4 USE_TZ 迁移，数据库部分：最佳实践？

> ID：10994101
> 
> 赞同：0
> 
> 时间：2012-06-12T09:44:54.127
> 
> 标签：django

Django 的文档提到，在切换到 USE_TZ=True 时，所有数据都应该转换为 UTC。请参阅：[https ://docs.djangoproject.com/en/dev/topics/i18n/timezones/#other-databases](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#other-databases)

这是一个相当简洁的评论。是否有任何脚本/技巧可以“一次性”执行此操作，并且能够在开发和生产中轻松进行相同的转换。

我想这不是 South 应该做的事情，因为 USE_TZ 设置是在项目级别完成的，而 South 迁移绑定到应用程序。另外，我不确定 South 会从数据中获得什么观点。推测 South 正在重用 Django 的 ORM，因此尝试通过该层做任何事情会导致令人困惑的结果，并且还取决于设置 USE_TZ 是否已经更改为 True。事实上，对于通过 ORM 路由的数据库的任何操作都可以这样说。正确的？

非常感谢，

克拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:50:45.700

当文档说“数据”时，它指的是固定装置。简单地说，当移动到 TZ 感知的数据库时，您需要更新夹具中的任何日期时间字符串。因此，下文提到的固定装置部分包含您正在寻找的附加信息。

也就是说，这不是你应该在开发和生产之间来回改变的东西。很多人喜欢使用 SQLite 进行开发（有充分的理由），但不幸的是目前 TZ 不知道它。因此，如果您需要创建一个站点，您确实需要在开发中使用不同的数据库。TZ 感知数据很棘手，一旦投入生产，这不是你应该第一次测试的东西。您应该在开发时处理它，因此您知道它将在生产中工作。

因此，Django 的建议集中在将旧的 TZ naive 数据一次性迁移到 TZ 感知数据，而不是如何一时兴起来回切换它们。

# html - 如何在短段落中居中图像和文本？

> ID：10994105
> 
> 赞同：1
> 
> 时间：2012-06-12T09:45:07.373
> 
> 标签：html, css

我有以下内容：

```
<p style="height: 25px; line-height: 25px;">
   <img width="16" height="16" src="/Content/images/icons/fugue/book-open.png" style="margin-top: 3px;">Test - 5</p> 
```

我已经尝试了一些带有 line-height 的东西，但它似乎不起作用。文本总是只有几句话。

如何使图像的中心与文本的中心对齐？

所以我想要的是如下 xs 代表图像的地方：

```
xxx
xxx text
xxx 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:48:44.270

您还没有说是要水平还是垂直排列元素，所以我将解释两者：

**垂直对齐：**
由于默认情况下图像是内联块，因此可以使用[`text-align`](https://developer.mozilla.org/en/CSS/text-align). 只需在它们之间添加一个like-break ( `<br/>`) 或在图像中添加一个`display: block`.styling 并`text-align: center`在您的段落中使用。

[看到它在 jsfiddle 上工作](http://jsfiddle.net/XPWWb/1/)。

**对于水平对齐：**
最简单的解决方案是使用[`position: relative`](https://developer.mozilla.org/en/CSS/position)并向`top:2px`下移动图标。

[看到它在 jsfiddle 上工作](http://jsfiddle.net/XPWWb/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:48:48.103

您是否尝试设置[`vertical-align`](https://developer.mozilla.org/en/CSS/vertical-align)图像元素？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:49:13.987

如果你设置一个`vertical-align: middle;`就`img`应该这样做！

注意：我已经从示例中删除了宽度和高度属性，但请参见此处：http: [//jsfiddle.net/SZYtB/](http://jsfiddle.net/SZYtB/)

# c# - Fluentvalidation - 将验证与特定流程的最佳实践联系起来

> ID：10994107
> 
> 赞同：0
> 
> 时间：2012-06-12T09:45:10.510
> 
> 标签：c#, validation, c#-4.0, moq, fluentvalidation

[使用http://fluentvalidation.codeplex.com/](http://fluentvalidation.codeplex.com/)将验证规则与特定流程绑定的最佳实践是什么

目前我正在使用“规则集”功能将规则分组到不同的进程：

```
 public class ObjAValidation: AbstractValidator<A>
    {
        public ObjAValidation()
        {
            RuleSet("ProcessA", () =>
            {
                RuleFor(x => ...);
                RuleFor(x => ...);
            }); 
           RuleSet("ProcessB", () =>
            {
                RuleFor(x => ...);
                RuleFor(x => ...);
            }); 
        }
    } 
```

然后验证使用：

```
var a = new A(){...};
IValidator<A> validator = new ObjAValidation();
var result = validator.Validate(a, ruleSet: "ProcessA"); 
```

这种方法有两个问题：

1.  我不喜欢使用字符串作为进程名称。我想使用更强类型的方法。例如能够使用标记接口或属性。
2.  在我的单元测试中，我无法设置 IValidator 的 Validate 方法，因为您不能在 Moq 中使用可选参数。

```
 Mock<IValidator<A>> _mockValidator = new Mock<IValidator<A>>();
_mockValidator.Setup(x => x.Validate(new A(), ruleSet: "ProcessA")); 
```

第二行生成运行时错误：**表达式树可能不包含命名参数规范。**如果你想将没有命名参数的 ruleSet 参数传递给 Validate 方法，你必须提供一个“IValidatorSelector 选择器”对象。但是这个接口没有记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:51:54.017

是什么阻止你创建一个帮助类，你可以在其中使用变量、数据结构，以及任何你喜欢的东西来防止硬编码字符串参数的使用？另外，不要忘记使用枚举的可能性。

是什么阻止您创建一个实现 IValidator 的类，您还可以在其中实现您需要的自定义功能？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-02T05:30:44.653

我遇到了同样的问题，发现你不能通过 Moq 等模拟这个方法的原因`validator.Validate(a, ruleSet: "ProcessA");`是因为它是一个扩展方法，而 Moq 不能模拟静态方法。

有人在 FluentValidation 问题中提出了同样的问题：[https ://github.com/JeremySkinner/FluentValidation/issues/191](https://github.com/JeremySkinner/FluentValidation/issues/191)

简单的解决方案是不使用扩展方法，而是使用即时方法`IValidator.validate(context)`。您需要做的就是构建上下文。从这里查看源代码：[https ://github.com/JeremySkinner/FluentValidation/blob/master/src/FluentValidation/DefaultValidatorExtensions.cs#L819](https://github.com/JeremySkinner/FluentValidation/blob/master/src/FluentValidation/DefaultValidatorExtensions.cs#L819)

```
if(ruleSet != null) {
                var ruleSetNames = ruleSet.Split(',', ';').Select(x => x.Trim());
                selector = ValidatorOptions.ValidatorSelectors.RulesetValidatorSelectorFactory(ruleSetNames.ToArray());
            } 

            var context = new ValidationContext<T>(instance, new PropertyChain(), selector);
            return validator.Validate(context); 
```

# xml - 通过将 CSV 转换为 XML 并使用 xsd 进行验证来验证 CSV 并获取 CSV 的行号以查找错误

> ID：10994108
> 
> 赞同：0
> 
> 时间：2012-06-12T09:45:11.043
> 
> 标签：xml, csv

我有一个 CSV 文件供上传。我正在将该文件转换为 XML，以便它可以针对 xsd 文件进行验证。我正在使用 xmlReader 使用 xsd 文件验证 XML 文件。

我想知道是否有一种方法可以获得验证失败的 CSV 的行号或行号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:02:20.323

在解析 CSV 文件之前给行编号：

```
$ head /etc/passwd | nl -s:
 1:root:x:0:0:root:/root:/bin/bash
 2:daemon:x:1:1:daemon:/usr/sbin:/bin/sh
 3:bin:x:2:2:bin:/bin:/bin/sh
 4:sys:x:3:3:sys:/dev:/bin/sh
 5:sync:x:4:65534:sync:/bin:/bin/sync
 6:games:x:5:60:games:/usr/games:/bin/sh
 7:man:x:6:12:man:/var/cache/man:/bin/sh
 8:lp:x:7:7:lp:/var/spool/lpd:/bin/sh
 9:mail:x:8:8:mail:/var/mail:/bin/sh
10:news:x:9:9:news:/var/spool/news:/bin/sh 
```

将冒号替换为与您的 CSV 输入格式匹配的字符。

# excel - VBA设置电子表格字体大小和行大小？

> ID：10994109
> 
> 赞同：1
> 
> 时间：2012-06-12T09:45:12.773
> 
> 标签：excel, vba

是否有从 VBA 设置工作表字体大小和行高的便捷方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T12:28:58.137

这应该有效：

```
Sub SetFormat()
    With ActiveSheet
        .Cells.Font.Size = "12" 
        .Cells.RowHeight = 25.5
    End With
End Sub 
```

# perl - 如何从 Perl 中的单个完整路径创建多个目录？

> ID：10994112
> 
> 赞同：1
> 
> 时间：2012-06-12T09:45:20.277
> 
> 标签：perl

> **可能重复：**
> [如何在一个 Perl 命令中创建目录和父目录？](https://stackoverflow.com/questions/1050365/how-do-i-create-a-directory-and-parent-directories-in-one-perl-command)

鉴于这种情况：我得到了一个像“37093”这样的ID。我执行一些 perl 代码来创建一个路径名

```
my $id = "37093";
my $path = join('/', split(//, $id ) ); 
```

路径现在是：“3/7/0/9/3”；

现在我想递归地创建所有尚未创建的目录。

这怎么能轻松完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T09:48:40.197

[`File::Path`](http://p3rl.org/File%3a%3aPath)和[`Try::Tiny`](http://p3rl.org/Try%3a%3aTiny)：

```
use File::Path qw(make_path);
use Try::Tiny;

try {
    make_path '3/7/0/9/3';
} catch {
    warn "make_path failed: $_\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:47:31.773

```
mkdir -p $the_path 
```

这可能会有所帮助。

或者自己写，但我发现这应该有帮助而且更优雅： http: [//perldoc.perl.org/File/Path.html](http://perldoc.perl.org/File/Path.html)

# php - 根据数组的一部分对PHP中的多维数组进行排序

> ID：10994115
> 
> 赞同：0
> 
> 时间：2012-06-12T09:45:49.730
> 
> 标签：php, arrays, multidimensional-array

我有以下数组：

```
items = array(
        'note' => array(),
        'text' => array(),
        'year' => array()
        ) 
```

所以我有：

```
[note] => Array
(
   [0] => 'note1'
   [1] => 'note2'
   [2] => 'note3'
), 
[text] => Array
(
   [0] => 'text1'
   [1] => 'text2'
   [2] => 'test3'
), 
[year] => Array
(
   [0] => '2002'
   [1] => '2000'
   [2] => '2011'
) 
```

我想按年排列上述数组。但是在移动元素时，我想移动其他数组中的相应元素（注意，文本）。

例如：

```
[note] => Array
(
   [2] => 'note3'
   [0] => 'note1'
   [1] => 'note2'
), 
[text] => Array
(
   [2] => 'text3'
   [0] => 'text1'
   [1] => 'test2'
), 
[year] => Array
(
   [2] => '2011'
   [0] => '2002'
   [1] => '2000'
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T10:03:36.757

[我将首先使用arsort()](http://www.php.net/manual/en/function.arsort.php)提取年份部分并按值对其进行排序，同时仍保留密钥：

```
$yearData = $array['year'];
arsort($yearData);//sort high-to-low by value, while maintain it's key. 
```

最后，使用这个新排序的年份对数据进行排序：

```
$newArray['note'] = array();
$newArray['text'] = array();
$newArray['year'] = array();

foreach($yearData as $key => $value){
    $newArray['note'][$key] = $array['note'][$key];
    $newArray['text'][$key] = $array['text'][$key];
    $newArray['year'][$key] = $array['year'][$key];
} 
```

仅供参考，有[一堆函数可以处理 PHP 中的排序数组](http://php.net/manual/en/array.sorting.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:01:33.967

我认为对您的阵列更好的组织将是这样的：

```
[0] => Array(
    'note' => note1, 'text' => 'text1', 'year' => '2002)
[1] => Array(
    'note' => note2, 'text' => 'text2', 'year' => '2000)
[2] => Array(
    'note' => note3, 'text' => 'text4', 'year' => '2011) 
```

这样，每个相关项目都保持在一起，并且更容易按所需类型对它们进行排序。

```
$items = array(
    array(
        'note' => value,
        'text' => value,
        'year' => value
        ),
    array(
        'note' => value,
        'text' => value,
        'year' => value
        )
    ) 
```

# openssl - Openssl 将仅包含 RSA 私钥的 .PEM 转换为 .PKCS12

> ID：10994116
> 
> 赞同：25
> 
> 时间：2012-06-12T09:45:50.620
> 
> 标签：openssl, rsa, pem, pkcs#12

目前我有一个仅包含私钥的 .PEM 文件。我需要将此文件转换为 .PKCS12 文件。目前我正在尝试使用 openssl 来实现这一点，但遇到了一些问题。

我使用的 .PEM 文件格式如下：

```
-----BEGIN RSA PRIVATE KEY-----

Some key

-----END RSA PRIVATE KEY----- 
```

我使用以下 Openssl 命令尝试将此 .PEM 文件转换为 .PKCS12：

```
openssl pkcs12 -export -inkey file.pem -out file.p12 
```

然后控制台挂起并显示以下消息：

```
Loading 'screen' into random state -done 
```

我在做什么错？

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-08-29T18:25:28.687

我遇到了这个问题，并通过`-nocerts`在导出后添加选项来解决它。我对“冻结”原因的猜测是，openssl 可能正试图从控制台读取额外的输入。

```
openssl pkcs12 -export -nocerts -inkey your.private.key.pem -out your.private.key.p12 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-11-22T15:02:56.250

我认为您还必须提供证书，而不仅仅是私钥：

> openssl pkcs12 -export -inkey privatekey.pem -in certificate.cer -out bothAsPKCS12.p12

# php - 如何在 PHP MVC 中将变量从控制器传递到模型

> ID：10994117
> 
> 赞同：0
> 
> 时间：2012-06-12T09:45:52.603
> 
> 标签：php, database, model-view-controller

我一直在尝试通过控制器函数将一些变量传递给模型，以便可以在数据库中的相应查询中使用该变量。这是我的代码

```
public function chooseGroup()
{
    $data['area']=$_GET['area']; //variable from a view source;this is loaded successfully in this function, i have printed an echo to be sure.
    $this->load->model('information_model',$data);
    $groupdata['rows']= $this->information_model->getGroupDetails();
  // var_dump($groupdata);
} 
```

型号代码：

```
function getGroupDeatils() {
            $this->db->select('area'); //area is suppose to contain the value 
            $q = $this->db->get('group'); //group is the table name
            if ($q->num_rows() > 0)
                foreach ($q->result() as $rows) {
                    $data[] = $rows;
                }
            return $data;
        } 
```

由于某种原因，值 $data['area'] 未被信息模型识别，因此未处理查询。我哪里出错了？:(请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:30:12.737

在您的控制器中，您对模型的调用应如下所示

```
public function chooseGroup()
{
    $data['area']=$_GET['area']; 
    $this->load->model('information_model');
    $groupdata['rows']= $this->information_model->getGroupDetails($data);
} 
```

然后在您的模型中声明如下方法

```
function getGroupDetail($data) {
    // query code here
} 
```

# java - 组织一个 Struts2 项目（哪些包）

> ID：10994119
> 
> 赞同：0
> 
> 时间：2012-06-12T09:45:59.250
> 
> 标签：java, struts2

目前我使用简单的 JSP 和 servlet 开发的项目有以下包

```
1-Business package (Contains summed up methods from service package under a business rule)
2-Service package  (Contains different services and their implementation - along with factory
                     method to call a specific implementation of each service)
3-Controller package (All the servlet controls ..)
3-Views              (All the jsps)
4-CustomTags         (Contain the Custom Tags)
5-Domain             (Contains Domain objects) 
```

现在我计划使用 struts2 实现相同的项目，你能告诉我应该引入哪些包吗？我知道服务和业务包将保持不变，控制器包呢？我应该将所有动作都放在控制器包中吗？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:07:13.883

不要根据他们的类型来组织你所有的课程，他们应该与他们的直接合作者一起组织或分组。如果可以，请将 XAction 和 XController 放在同一个包中。将 XAction 与 49 个其他动作放在一个单独的包中是很愚蠢的，这些动作实际上没有关系，而它的控制器在其他地方。

如果您将协作者组合在同一个包中，则很容易了解工作组，并且相当有信心改变一个可能会影响另一个。根据您的原始建议，谁真正知道什么 Action 与什么 Controller 一起使用等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-01T17:17:36.043

有可能！Struts 从 2.0 到 2.3.x（我使用了这些版本），如果你使用注解 struts2-convention-plugin.jar 依赖，你可以这样做：

[![在此处输入图像描述](../Images/112333a7f57dcd8fe76ebe5c77874609.png)](https://i.stack.imgur.com/p9yZh.png)

包默认值（通常是 zx.yz.actions）映射了项目上的所有操作，它是上图中的包命名空间。

当您创建一个新的包内部 Actions 包时，例如 zx.yz.actions.example，您将在应用程序中创建一个新的命名空间 /servletContext/example。

要禁用它，您只需在“Action()”注释方法之前放置一个“/”。例如：

```
 public class ExampleAction {

      @Action(value="/example", 
        @Result(name="ok", type="httpheader", params={"status", "200"})
      public String execute() {
      }
    } 
```

'/example' 中的 '/' 将放入 de 命名空间默认值。

# asp.net - 异常消息是：无法加载文件或程序集“App_Code”或其依赖项之一。该系统找不到指定的文件

> ID：10994121
> 
> 赞同：0
> 
> 时间：2012-06-12T09:46:01.147
> 
> 标签：asp.net, wcf, iis

我正在尝试访问像 xxx.svc 这样的 WCF 服务端点。我得到了这个错误：

```
The exception message is: Could not load file or assembly 'App_Code' or one of its dependencies. The system cannot find the file specified 
```

我打开了融合日志，得到了这个：

```
=== Pre-bind state information ===
LOG: User = xxx\xxx
LOG: DisplayName = App_Code
 (Partial)
LOG: Appbase = file:///D:/myService/
LOG: Initial PrivatePath = D:\myService\bin
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: D:\myService\web.config
LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework64\v2.0.50727\Aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v2.0.50727\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: The same bind was seen before, and was failed with hr = 0x80070002. 
```

我的 Web 应用程序中没有 App_Code 文件夹。为什么要找 App_Code ？？？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:44:29.763

我只是在睡个好觉之后才弄清楚。我忘记了 precompiledApp.config 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:21:32.770

可能您使用了无效的引用，或者您没有引用您想要使用的东西。解决方案是查看您的 web.config 和所有引用，搜索需要但缺少的引用或无效的引用。

# r - 如何在 R 中创建转换列

> ID：10994123
> 
> 赞同：0
> 
> 时间：2012-06-12T09:46:07.533
> 
> 标签：r, dataframe

我在数据框中有一个状态列，我想创建两个新列：一个展望下一个阶段的变化，一个回顾上一个状态变化。因此生成的数据框将如下所示：

```
state coming  previous
  a     a-b     NA
  a     a-b     NA
  a     a-b     NA
  a     a-b     NA
  b     b-c     a-b
  b     b-c     a-b
  b     b-c     a-b
  c     c-a     b-c
  c     c-a     b-c
  c     c-a     b-c
  a     NA      c-a
  a     NA      c-a 
```

或者甚至更好，但现在您只需创建两个转换列：

```
state trans1   trans2
  a     a-b     NA
  a     a-b     NA
  a     a-b     NA
  a     a-b     NA
  b     a-b     b-c 
  b     a-b     b-c
  b     a-b     b-c
  c     c-a     b-c
  c     c-a     b-c
  c     c-a     b-c
  a     c-a     NA 
  a     c-a     NA 
```

[编辑] 将名为“1”的状态更改为“c”，因为它令人困惑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:13:59.860

让我们给那个数据框起一个名字，比如'inp'。使用`rle`函数构造“状态”序列：

```
> rle(inp$state)
Run Length Encoding
  lengths: int [1:4] 4 3 3 2
  values : chr [1:4] "a" "b" "1" "a"

runinp <- rle(inp$state)$values
paste( runinp[-length(runinp)], runinp[-1], sep="-")
# [1] "a-b" "b-1" "1-a"
inp$coming <- rep( c( paste( runinp[-length(runinp)], runinp[-1], sep="-"), NA), 
                    rle(inp$state)$lengths )
inp$coming
# [1] "a-b" "a-b" "a-b" "a-b" "b-1" "b-1" "b-1" "1-a" "1-a" "1-a" NA    NA   

inp$previous <- 
 rep( c( NA_character_, paste(runinp[-1], runinp[-length(runinp)], sep="-")), 
      rle(inp$state)$lengths )
inp$previous
 [1] NA    NA    NA    NA    "b-a" "b-a" "b-a" "1-b" "1-b" "1-b" "a-1" "a-1" 
```

（我能够克服理解您的第一个请求的困难，但在第二部分中一直存在困难。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:59:03.233

感谢 DWin 的回答，我自己找到了第二部分的答案。这是创建带有转换列的数据框的完整代码：

```
state = rep(c('a','b','c','a'), c(4,3,3,2))
inp=data.frame(state, vals=rnorm(12))
runinps=rle(as.character(inp$state)) # doesn't work without as.character

(rs <- runinps$values)
(ls=runinps$lengths)

(inp$coming <- rep( c( paste( rs[-length(rs)], rs[-1], sep="-"), NA), ls ))
(inp$previous <-rep( c( NA, paste(rs[-length(rs)], rs[-1], sep="-")), ls ))

# Create the first transitions column
(reps=rep(1:(length(ls)/2),each=2))
(ls2=as.vector(tapply(ls , reps, sum)))
seqRs=seq(from=1,to=length(rs),by=2)
(inp$trans <- rep(paste( rs[seqRs], rs[seqRs+1], sep="-"), ls2 ))

# Create the second transitions column
reps=c(reps[-1], max(reps)+1)
(ls2=as.vector(tapply(ls , reps, sum)))
seqRs=seq(from=2,to=length(rs)-1,by=2)
(inp$trans2 <- rep(c(NA, paste( rs[seqRs], rs[seqRs+1], sep="-"), NA), ls2 ))

# some last commands to create one transition column
inp2=subset(inp,!is.na(inp$trans2))
inp2$trans=inp2$trans2
inp=rbind(inp,inp2)
inp$trans2<-NULL 
```

# iframe - 锚点和 iframe？

> ID：10994127
> 
> 赞同：0
> 
> 时间：2012-06-12T09:46:37.343
> 
> 标签：iframe, anchor

我有一个带有 iframe 的 HTML 文档。现在，如果您单击 iframe 中的某个按钮/链接，我希望父文档滚动回顶部。

我不知道如何使这项工作。当我在父文档的顶部放置一个锚点并让按钮执行类似的操作`window.parent.location = '#anchorname';`时，浏览器会打开 iframe 文档本身，而父文档会消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:29:03.903

首先，我建议使用 JQuery scrollTop（参见[此处](http://api.jquery.com/scrollTop/)）在顶部滚动。这还不够，但是，您需要从 iFrame 中的页面调用您的函数，因此，假设您的滚动文档的函数称为“foo”，您可以通过这种方式从 iFrame 中的页面调用您的函数：

```
window.parent.foo(); 
```

希望这可以帮助。

# php - 上传文件的内部服务器错误

> ID：10994129
> 
> 赞同：2
> 
> 时间：2012-06-12T09:46:45.457
> 
> 标签：php, apache, dreamhost

**错误**
我有一个带有大量照片上传器 (Plupload) 的 Web 应用程序，当我上传二十张照片时，大约六张（大约 30%）将因内部服务器错误而失败。我已经检查了该域的 Apache error.log，它没有任何新内容（我知道我正在查看正确的 error.log，因为这里确实显示了旧的错误）。

这只发生在我的 Dreamhost（我的托管服务提供商）服务器上的 VPS 上，而在我的开发服务器上，它运行如丝般顺滑。

哦，一个月前一切*都*很好，然后就开始失败了。那时我使用的是 Uploadify，因为它使用了 Flash，所以我无法调试上传失败的位置。

**文件和脚本**
上传的文件是照片，大约 100 kB 大，尽管我已经成功上传（并且仍然可以）3 MB 的照片。我的 .htaccess 在上传过程中自然不会改变。服务器端是一个 PHP 脚本，它使用 GD2 库来移动和调整照片大小。

**服务器状态**
我最近将我的 VPS 从 300 MB 的 RAM 升级到了 400 MB。这东西以前可以工作，我升级它只是为了排除内存的原因。我对 PHP 的内存限制也是 200 MB，所以这应该足够了。

我对*Dreamhost 不想提供帮助*感到非常沮丧，并表示“我们不能对您的代码导致的错误负责”和“不幸的是，我们仍然无法帮助您调试问题。”
当我的应用程序无法运行并且我的客户感到沮丧时，已经有一周的“支持”稀少了。

**问题**

1.  这种“你靠自己”是否支持整个行业的标准，即您的主机会以不同的方式处理这个问题吗？
2.  *我*该如何调试呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T11:28:04.883

我将假设您有一个标准的 Apache + PHP 设置。一种可能的配置是预分叉设置；在这种情况下，Apache 将通过派生更多的子节点来适应系统负载。

只有 400 MB 的 RAM，你会非常紧张，所以如果你正在运行 20 个进程，每个进程占用 200MB（假设每个进程都使用 GD 处理相当大的文件），你就会陷入内存管理器的一些困境。

我会先将实例总数减少到 2 个，看看情况如何；还可以通过运行来关注内存使用情况`top`。

无论如何，运行一个单独的任务管理器（例如 Gearman）来执行调整大小任务可能对您有利，这样上传只需要专注于移动上传的文件并运行调整大小任务；这样，您可以大大减少运行 PHP 实例所需的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:41:33.570

至于你的 Q1：简单的答案是你得到你所支付的。一个 300Mb RAM Dreamhost VPS 每年花费约 360**美元**。为此，您可以获得 VPS 服务以及与提供虚拟环境相关的服务故障响应。操作系统、软件堆栈和应用程序不在此服务范围内。为什么？这种自定义知识库支持**每小时**可能花费 50-300 美元。如果您期望 Dreamhost 无偿提供此类服务，您就是在自欺欺人。这就是像这样的网站所做的。

所以我的建议是你吸收愤怒和沮丧，然后想办法帮助自己。

至于你的 Q2。(i) 您需要了解您的 Apache 错误在哪里；(ii) 如果您使用的是 D/B，则同上任何 SQL 错误。(iii) 您需要确保启用 PHP 错误日志并验证 PHP 日志的去向。*(iv) 您需要检查这些日志，并通过使用会生成运行时*错误的小脚本来验证日志记录是否正常工作。

您还应该考虑使用增强的工具（例如 php_xdebug）来增强日志记录级别并引入应用程序日志记录。

根据我的经验，系统和功能很少会无声无息地消亡。但是，应用程序程序员通常会忽略返回状态等。例如，在 GD 库中，**imagecopyresized()**可能会失败，它会返回一个状态码来告诉应用程序什么时候有，但如果应用程序没有测试这个状态并采取相应的行动那么它最终可能会默默地沿着奇怪的执行路径走下去，并且在用户（或开发人员）看来只是“它刚刚停止工作”。

我的最后一条评论是，您真的应该考虑在您的开发环境中设置一个私有 VPS，以反映您的 Dreamhost 生产配置，并将其用于集成、验收测试和支持。这很容易做到，你可以搞砸它并添加调试/假设选项，然后回滚而不会污染你的生产环境。VMare Appliances 和 VirtualBox 等工具让这一切变得简单。有关我如何为托管服务执行此操作的说明，请参阅[此博客文章。](http://blog.ellisons.org.uk/article-61)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T02:52:23.347

尝试回答问题 2：如果您检查了所有代码并且没有发现任何错误，我认为您能做的最好的事情就是检查服务器上运行的所有程序的版本（apache、php、 ...)，例如，我记得我在 apache 和 php 上运行的 web 服务有问题，php 版本是 5.2.8，经过大量调查，我发现该版本解析有问题xml 数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T11:50:49.827

关于问题的第一部分：Dreamhost 确实提供带有“回电”的付费支持服务。我们曾经使用它来降低某些东西。他们在一般支持方面非常出色（比许多主机 IMO 更好），但您不能指望专门的服务，他们必须处理很多琐碎的问题。但是支付回电费，在电话上大约 2 分钟后，您就可以得到您想要的答案，而且他们还可以获得 10 美元（经常性）的时间。你们俩都赢了。请记住取消经常性费用。

关于问题的第二部分，我们与他们有同样的问题。他们的回应（正如 Linus 在评论中所建议的那样）是他们记录了您的“用户”使用的所有进程的 CPU 使用情况。如果该总数超过阈值，他们将简单地终止进程以降低周期。没有错误消息，没有警告，没有任何东西。进程可以包括 MySQL、CGI (perl) 或 PHP。没有办法监控或预测，我们也无法围绕它进行编程。解决方案......不幸的是，不是 DreamHost。（webhostingtalk.com 将为您提供大量的主机创意）。所以我们用于某些站点，但不用于其他站点。

# c++ - 如何在 Visual Studio 中禁用基于对话框的 MFC 应用程序的自动关闭？

> ID：10994130
> 
> 赞同：-2
> 
> 时间：2012-06-12T09:46:46.313
> 
> 标签：c++, visual-studio, mfc, dialog

当我启动程序时，我得到了对话框和所有内容。但它会在大约 10 秒后自行关闭。我该如何禁用它？

编辑：当我运行“调试-> 不调试启动”时会发生这种情况。这是我知道如何运行程序的唯一方法。

EDIT2：我的对话框继承自`CDialogEx`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:50:05.677

如果您的对话框不是模态的，即您没有使用 DoModal() 成员函数启动它，则它可能是使用构造函数创建的，并在超出范围时使用析构函数删除。您会在一些启动画面的实现中看到这种类型的行为。要弄清楚发生了什么，请在您的对话框析构函数上放置一个断点，并查看导致它的调用堆栈。在调试器中打开所有异常也是值得的，因为您可能会遇到终止应用程序的未捕获异常。

正如其他人已经说过的，这不是 MFC 应用程序的正常行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:02:36.913

通常对话框不会那样做。

但在默认情况下，它们关闭 OnOk (CDialog::OnOk)，即“Enter Key Pressed”和 OnCancel (CDialog::OnCancel())，即“Esc Key Pressed”

尝试在 Dialog 中重载这两个，看看它们是否被调用并根据需要处理那里的行为。

也许 Close 事件也应该被处理或观察。

这里有很多可以用 Dialog 完成的例子（尤其是 OnOk、OnCancel 和 Close）[CDialog 例子](http://aclacl.brinkster.net/MFC/ch08b.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-11T19:29:47.243

我在使用 Visual Studio 2013 时遇到了同样的问题：

我正在使用 Visual Studio 向导（基于对话框、基于单/多文档）创建最基本的 MFC 应用程序，并且只是重新编译生成的代码。根本没有修改代码。

我刚刚**发现****关闭防病毒软件**时不会出现“重新启动” 。:-) 这不是 Visual Studio 中的错误，而是环境问题。

我的杀毒软件是`Avast`。

**解决方案`Avast`是关闭 Deepscreen 功能。**

> 在那里，转到设置/主动保护/深屏 - 并**禁用**它。

有关此解决方案的更多详细信息，请参见 Avast 论坛上的讨论： [https ://forum.avast.com/index.php?topic=139935.0](https://forum.avast.com/index.php?topic=139935.0)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-17T12:21:48.720

已确认，Visual Studio 2010 会发生这种情况，而 Visual Studio 2008 不会发生这种情况。这意味着所有的反对票都是完全没有必要的。这是 Visual Studio 2010 的默认设置，我没有更改任何内容。我也没有犯任何错误，因为我明确表示我创建了一个新应用程序而没有更改任何内容。

感谢所有的反对票。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-12-16T14:04:49.930

只是为了记录，我使用 Visual Studio 2010 进行了尝试。我选择了基于对话框的应用程序，并将所有其他选项保留为默认设置。为 x86 和 x64 编译了调试和发布配置。当使用 Start without Debugging 启动时，四个可执行文件都不会自行终止。

如果这发生在您身上，我会假设您有一些应用程序正在运行（在后台），这些应用程序会干扰预期的行为。尝试设置虚拟机，安装干净的 Visual Studio 并再次执行相同的过程。

# java - OpenJPA 合并/持久化非常慢

> ID：10994139
> 
> 赞同：3
> 
> 时间：2012-06-12T09:47:29.700
> 
> 标签：java, mysql, performance, openjpa

我在 WebSphere Application Server 8 上使用 OpenJPA 2.2.0 和 MySQL 5.0 DB。

我有一个要合并到数据库中的对象列表。

就像是：

```
for (Object ob : list) {
            Long start = Calendar.getInstance().getTimeInMillis();
            em = factory.createEntityManager();
            em.getTransaction().begin();

            em.merge(ob);

            em.getTransaction().commit();
            em.close();
            Long end = Calendar.getInstance().getTimeInMillis();
            Long diff = end - start;
            LOGGER.info("Time: " + diff);
        } 
```

当我运行这个循环时，我需要大约 300-600 毫秒来合并一个对象。当我删除“em.merge(ob);”行时 然后我需要“0”毫秒来迭代 1 个列表对象。

所以我的问题是：我能做些什么来缩短合并一个对象的时间？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T10:44:23.837

您可以尝试在迭代之前启动事务，然后在单个事务中提交它。所以，基本上你正在创建一个将在提交时合并/持久的批处理。

此外，您可以限制一次要处理的批处理中的对象数量，并且可以将更改显式刷新到数据库中。

在这里，您正在启动一个事务并在每次迭代中提交它，并且每次都创建/关闭实体管理器，这将影响大量数据的性能。

它将类似于下面的代码。

```
em = factory.createEntityManager();
em.getTransaction().begin();
int i = 0;

   for (Object ob : list) {
       Long start = Calendar.getInstance().getTimeInMillis();

       em.merge(ob);

       Long end = Calendar.getInstance().getTimeInMillis();
       Long diff = end - start;
       LOGGER.info("Time: " + diff);

       /*BATCH_SIZE is the number of entities 
            that will be persisted/merged at once */

       if(i%BATCH_SIZE == 0){    
           em.flush();
           em.clear(); 
       }

       i++;
   }

em.getTransaction().commit();
em.close(); 
```

在这里，如果任何对象无法持久/合并，您还可以回滚整个事务。

# logging - 跟踪 awked 日志

> ID：10994145
> 
> 赞同：1
> 
> 时间：2012-06-12T09:47:37.090
> 
> 标签：logging, awk

这是困扰我的：

我有一个日志文件，以特定格式编写，例如：

```
[DEBUG    7] 2012-06-12 09:26:37.847 [MOD: UNK/0 ] [FILE:ModuleManager.cpp:541] [FUNC: ModuleManager::handleStatusRequestMessage] [MSG:Got request for unsupported ALLOCATION_STATUS ] 
```

所以这些块很好地分开了。我在 80x25 的终端屏幕上通过尾巴查看此日志，它看起来很糟糕（不，我无法更改屏幕，它是嵌入式设备）。

你能帮我创建一个tail/awk（或类似的）组合来实现类似的东西：

```
2012-06-12 09:26:37.847 Got request for unsupported ALLOCATION_STATUS 
```

或者

```
2012-06-12 09:26:37.847 ModuleManager::handleStatusRequestMessage - Got request for unsupported ALLOCATION_STATUS 
```

或者

```
2012-06-12 09:26:37.847 ModuleManager.cpp:541 ModuleManager::handleStatusRequestMessage - Got request for unsupported ALLOCATION_STATUS 
```

从上面的长线？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:04:02.417

```
$ awk -F '[][]' '{print $3, $10}' logfile
2012-06-12 09:26:37.847  MSG:Got request for unsupported ALLOCATION_STATUS
$ awk -F '[][]' '{print $3, $8, $10}' logfile
 2012-06-12 09:26:37.847  FUNC: ModuleManager::handleStatusRequestMessage MSG:Got request for unsupported ALLOCATION_STATUS
$ awk -F '[][]' '{print $3, $6, $8, $10}' logfile
 2012-06-12 09:26:37.847  FILE:ModuleManager.cpp:541 FUNC: ModuleManager::handleStatusRequestMessage MSG:Got request for unsupported ALLOCATION_STATUS 
```

或者

```
$ awk -F '[][]|MOD:|FUNC:|FILE:|MSG:' '{print $3, $8, $11 " - " $14}' inputfile
2012-06-12 09:26:37.847  ModuleManager.cpp:541  ModuleManager::handleStatusRequestMessage - Got request for unsupported ALLOCATION_STATUS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:55:51.113

我建议`sed`彻底清除格式：

```
tailf -f logfile | sed -e 's/\[MSG:\([^]]*\)\]/\1/' -e 's/\[[^]]*\] *//g' 
```

# php - 新的 OOP 插件中的 $wpdb

> ID：10994154
> 
> 赞同：0
> 
> 时间：2012-06-12T09:48:09.683
> 
> 标签：php, wordpress

嗨，我正在尝试编写我的第一个 Wordpress 插件。我正在使用类来使其更易于维护。

我想知道如何在我的 wordpress 插件中使用 WPDB 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:21:25.843

`$wpdb`是一个`global`变量，它是已经设置为与`WordPress`数据库对话的类的实例化。

您可以以这种方式使用它 -

```
global $wpdb;
$result = $wpdb->get_row( "SELECT value FROM ".$wpdb->prefix."plg_table" );
echo $result; 
```

有关更多信息，您还可以查看此链接 -[链接到 CODEX](http://codex.wordpress.org/Class_Reference/wpdb)

如果它是您的第一个我更喜欢修改我几天前建议的现有的，请检查此链接，因为它可以帮助您[在网站的前端或页面中显示插件](https://stackoverflow.com/questions/10816046/showing-plugin-in-frontend-of-website-or-in-page/10816329#10816329)

# vb.net - 垂直调整表单大小时如何使表单对齐到特定高度？

> ID：10994157
> 
> 赞同：0
> 
> 时间：2012-06-12T09:48:24.113
> 
> 标签：vb.net, variables, resize, picturebox

我在一个表格上有 3 个图片框，它们相互重叠。该表单的最小值为 (502, 416)，最大值为 (502, 1080)。

因为用户可以从 MenuStrip 中选择显示“1”、“2”、“0r”、“3”图片框，“3”是底部，“1”是顶部图片框。我需要的是，当用户向下拖动表单时，它会捕捉到下一个 PictureBoxes 位置，所以它会以块的形式下降，这是我到目前为止所拥有的，离工作还很远。

```
 If Me.Height <= (1079) Then
        Me.Height = (732)

    ElseIf Me.Height <= (732) Then
        Me.Height = (424)
    ElseIf 
    ...
    End If 
```

我还认为如果我新如何创建这样的变量，我可能能够弄清楚

```
 If Me.Height <= (1079 to 733) Then
        Me.Height = (732) 
```

我知道这不是正确的语法，但这是一种想法

如果您能从我不太好的描述中理解并指出正确的方向/代码示例，我将不胜感激:)

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:37:43.760

您可以尝试使用[Select](http://msdn.microsoft.com/en-us/library/cy37t14y.aspx)语句：

```
Select Case Me.Height

    Case 425 To 732
        Me.Height = 424

    Case 733 To 1079
        Me.Height = 732

End Select 
```

* * *

回答你的进一步问题。如果您要使用 Form Resize 事件，您拥有的任何动画都会变得有趣，因为当您更改 Form Height 时，它将重新触发事件。就个人而言，如果我是你，我会坚持你最初的想法，即捕捉到下一个高度，如果你想为表单高度设置动画，我会认真研究 WPF。但这里是我说过要展示给你看的 SubRoutine，我使用了三个按钮来启动调整大小。如果您不阻止该事件重新运行子例程，则将其放入表单调整大小事件中时要小心，它将冻结您的计算机。

```
Public Class Form1

    Private Sub Form1_Resize(sender As Object, e As System.EventArgs) Handles Me.Resize
        Me.Text = Me.Height
    End Sub

    Public Sub ChangeFormHeight(fromHeight As Integer, toHeight As Integer)
        If fromHeight > toHeight Then
            For newHeight As Integer = fromHeight To toHeight Step -1
                Me.Height = newHeight
            Next
        Else
            For newHeight As Integer = fromHeight To toHeight
                Me.Height = newHeight
            Next
        End If
    End Sub

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        ChangeFormHeight(Me.Height, 424)
    End Sub

    Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
        ChangeFormHeight(Me.Height, 733)
    End Sub

    Private Sub Button3_Click(sender As System.Object, e As System.EventArgs) Handles Button3.Click
        ChangeFormHeight(Me.Height, 1080)
    End Sub

End Class 
```

# jsf-2 - JSF2.0 Tomcat7中@Named和@ManagedBean注解的区别

> ID：10994158
> 
> 赞同：24
> 
> 时间：2012-06-12T09:48:27.217
> 
> 标签：jsf-2, dependency-injection, el, tomcat7

这可能是一个菜鸟问题，但是在很多教程和示例中，我看到这些注释被使用，就好像它们做同样的事情一样。

但是，我在使用它时遇到了一些限制`@Named`（尤其是依赖注入等）。我找不到解释差异的来源，如果有人能粗略概述何时使用一个或其他。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-12T10:35:29.643

`@Named`为 CDI 托管 bean 提供一个 EL 名称，以便在 JSF 或 JSP 等视图技术中使用。请注意，在 CDI 应用程序中，您*不需要*注释来制作由 CDI 管理的`@Named`bean（感谢 @Karl 的评论）。

`@ManagedBean`使 bean 由 JSF 管理，您可以：

*   将其注入到其他 @ManagedBean 注释的 bean 中（但不是注入到 @Named bean 中！）
*   通过表达式语言从您的视图中访问它

有关注入如何在两种 bean 之间工作的更多信息，请参阅此[相关问题。](https://stackoverflow.com/questions/9921324/managedproperty-in-cdi-named-bean-returns-null/9921449#9921449)

请注意，bean 的范围也有所不同。它们来自不同的包，但名称相同（JSF: `javax.faces.bean`， CDI: `javax.enterprise.context`，因此如果包含错误的类，通常会导致错误和混乱。

根据我的经验：您应该尽可能使用 CDI bean，因为它们比 JSF 托管 bean 更灵活。~~唯一的缺点是 CDI 不知道视图范围，因此您需要退回到 @ManagedBean 或使用诸如 Seam 之类的第三方扩展。~~

编辑：CDI 支持 ViewScope，有关[LINK的更多信息](https://stackoverflow.com/questions/14384369/how-to-replace-managedbean-viewscope-by-cdi-in-jsf-2-0-2-1)

# linux - 模式匹配日志文件

> ID：10994159
> 
> 赞同：1
> 
> 时间：2012-06-12T09:48:33.143
> 
> 标签：linux, perl

我在文件夹中获取 .log 和 _log 之类的文件，我可以使用 /*.log$/ 选择 .log 文件，但无法找到 _log 文件。

需要一个正则表达式模式，它将从指定的文件夹中获取两种类型的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:03:50.923

您的问题被标记为“perl”和“linux”。我在这里假设您正在谈论 Perl 样式的正则表达式，因为看起来这就是您在示例代码段中显示的内容。

`*.`顺序是错误的。

让我们专注于您想要匹配的内容。您想匹配以点结尾并后跟文字字符“log”的任何文件名。您还希望匹配以下划线结尾的任何文件名，后跟文字字符“log”。你真的不应该关心最后一个点或下划线之前的“任何东西”。所以正则表达式可能会更好地写成这样：

```
/[._]log$/ 
```

请注意，我们甚至不关心点星。在这种情况下没有帮助。

如果您希望您的模式也匹配其中文字字符“log”可以选择后跟整数序列的文件（您的问题中未提及，但在您的后续评论之一中进行了讨论），您可以这样写：

```
/[._]log\d*$/ 
```

*这里的*“星星”很有帮助；它允许零个或多个数字夹在“g”和字符串的末尾之间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:32:50.067

我完全同意（通过投票）DavidO 的解决方案，但使用 glob() 从特定目录获取文件列表通常更有意义，并提高可读性

```
my $dir = "/path/here";

my @log_files = grep { /[\._]log\d*$/ } glob("$dir/*");

print join "\n", @log_files; 
```

这会抓住

```
foo.log
foo_log
foo.log1
foo_log22 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T09:51:56.953

使用正则表达式`/.*[._]log$/`。

我很惊讶你的第一个案例有效——`/*.log$/`不是合法的正则表达式（因为`*`没有说明*它*应该匹配零个或多个）。仔细检查您当前的结果。

# node.js - Node.js REPL 的问题

> ID：10994161
> 
> 赞同：0
> 
> 时间：2012-06-12T09:48:43.600
> 
> 标签：node.js

我在使用 node.js REPL 时遇到问题。我将以下行放入节点 REPL：

> var p = {fname: "john", lname= "Doe"}

我得到的是一个省略号（...），好像 REPL 正在等待继续。我也尝试放一个 ; 最后，或者去掉 var 关键字，但得到相同的结果。

为什么它认为这不是一个陈述的结束？我错过了什么？

env：节点版本 0.6.2，在 windows 上运行。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T09:51:36.250

您的语法错误，应该是：

```
var p = {fname: "john", lname: "Doe"} 
```

（注意`:`代替`=`）

# nant - 如何在 Jenkins 中配置 Nant 插件

> ID：10994164
> 
> 赞同：1
> 
> 时间：2012-06-12T09:48:47.293
> 
> 标签：nant, jenkins-plugins

我有 Jenkins 和 Nant 插件。我有一份关于 nunit 测试的工作。构建项目时出现错误：

> 执行命令： cmd.exe /C ""NAnt.exe ./nant.build && exit %%ERRORLEVEL%%"" [GuiTests] $ cmd.exe /C '"NAnt.exe ./nant.build && exit %% ERRORLEVEL%%"' 'NAnt.exe' 未被识别为内部或外部命令、可运行程序或批处理文件。

这是否意味着我应该安装 nant 并手动设置环境变量？那么为什么要使用 Nant 插件呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:09:03.573

是的，就像 ANT 插件一样，它需要外部安装。`http://<jenkins-server>/configure`您可以在主 Jenkins 配置页面（搜索*Nant Builder* ）上配置自动安装，但根据我的经验，最好不要参与 Jenkins 自动安装 - 它们相当古怪。

该插件的原因是构建的可移植性。使用该插件，您不必为 Linux（*执行 Shell*）和 Windows（*执行 Windows 批处理命令*）构建指定不同的构建步骤，而是可以使用相同的*Execute NAnt 构建*步骤。

# c++ - 我在给定程序中哪里错了？

> ID：10994166
> 
> 赞同：1
> 
> 时间：2012-06-12T09:49:10.537
> 
> 标签：c++, algorithm, recursion, std

这是我查找给定集合的所有子集的程序。为了解决它，我使用了递归。但是当我在代码块上的窗口中编译它时。它给

> 此应用程序已请求运行时以不寻常的方式终止它。

在 gcc 编译器中它没有显示任何答案，没有响应。

```
#include <iostream>
#include <vector>
#include <string>

using namespace std;

vector<string> findAllSubset(char c, vector<string> v) {
    int size = v.size();
    if(size == 1) {
        v.push_back("");
        return v;
    }
    c = v[size-1][0];
    v.pop_back();
    v = findAllSubset(c, v);

    for(int i = 0; i < v.size(); i++) {
        string s= "";
        if(v[i].size() == 0){
            s += c;
            v.push_back(s);
        }
        else {
            s += v[i] + c;
            v.push_back( s );
        }
    }
    return v;
}

main() {
    vector<string> v, ans;
    char c = 65;
    v.push_back("a");
    v.push_back("b");
    //v.push_back("c");
    //v.push_back("d");
    ans = findAllSubset(c, v);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T10:13:46.520

for 循环是一个无限循环，每次向量中的元素 push_back 时，向量大小都会增加，使得条件 i < v.size() 始终为真。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T10:01:26.233

当你循环遍历它时，你不断地将字符串推到你的向量上。有无限循环。在循环遍历容器时更改容器通常是个坏主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T09:55:55.170

似乎有一个无限循环。程序正常编译运行但从不退出

# vi - 如何计算特定短语在 gvim 编辑器中出现的次数

> ID：10994167
> 
> 赞同：0
> 
> 时间：2012-06-12T09:49:12.587
> 
> 标签：vi

如何计算以下短语的次数：

`Bitwidth differs`

发生在使用 gvim 编辑器的测试中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:58:40.130

希望，这有助于[http://vim.wikia.com/wiki/Count_number_of_matches_of_a_pattern](http://vim.wikia.com/wiki/Count_number_of_matches_of_a_pattern)

# android - 如何使用 Http 流保存在 VideoView 中播放的视频

> ID：10994172
> 
> 赞同：0
> 
> 时间：2012-06-12T09:49:26.780
> 
> 标签：android, video-streaming

如何使用 Http 流保存在 VideoView 中播放的视频，以便如果用户再次播放它可以播放而无需再次从流服务器下载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:12:37.397

您无权访问由`VideoView`（或底层`MediaPlayer`）拉入的流数据。

# .net - .net 不是 MSMQ 的消息队列解决方案

> ID：10994176
> 
> 赞同：6
> 
> 时间：2012-06-12T09:49:34.347
> 
> 标签：.net, message-queue

任何人都可以推荐与.net winforms 应用程序一起使用的消息队列解决方案，最好是开源的。

到目前为止，我们一直在使用 MSMQ，发现它对我们来说效果很好，但是应用程序将部署到的环境不受我们对这个项目的控制，所以我们不能保证 MSMQ 会被安装，使用应用程序的人不会有安装它的知识，我们没有资源在整个过程中谈论它们。

所以我正在寻找类似于 MSMQ 但可以包含在应用程序安装包中的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T09:51:59.337

[RabbitMQ](http://www.rabbitmq.com/)将是我的首选。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T10:00:18.833

还有[DotNetMQ](http://sourceforge.net/projects/dotnetmq/)（和相关的[CodeProject 链接](http://www.codeproject.com/Articles/193611/DotNetMQ-A-Complete-Message-Queue-System-for-NET)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T06:32:38.213

WebSphere MQ 快速且稳定： [http ://www.redbooks.ibm.com/redbooks/pdfs/sg247012.pdf](http://www.redbooks.ibm.com/redbooks/pdfs/sg247012.pdf)

# zotonic - Zotonic - 在哪里可以找到快速入门

> ID：10994179
> 
> 赞同：6
> 
> 时间：2012-06-12T09:49:46.093
> 
> 标签：zotonic

我去过[zotonic docs](http://zotonic.com/documentation)，但是，它们并没有真正提供帮助，因为那里的一切都是零碎的。我是一个普通的优秀 erlang 程序员，我想我需要的是一个网站或网络应用程序的完整示例，无论多么简单，但从头开始。

通常，一个建立在基础上的示例将用于说明库的所有基本概念。例如，一个站点是如何安排的？我如何以及在哪里放置这些文件？这个配置是什么意思？此任务有哪些选项？等

Zotonic 在外面看起来很棒，我很想深入了解它。它看起来像是使用 erlang 构建网站和管理网站的唯一 Erlang 简便方法。

**问题：**有没有人遇到过一个成熟的 Zotonic 构建的网站或网络应用程序，他可以分享其源代码或从头开始的教程，特别是对于 Erlang 程序员，可以真正开始？*类似于此**[Django 介绍](https://docs.djangoproject.com/en/1.1/intro/tutorial01/)***
的内容 此外，是否有任何可以安装在 Windows Server 上的 Zotonic 构建？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T07:21:13.907

我正在开发（在我的业余时间，最近不太好）zotonic 中的项目/问题跟踪器。代码可在此处获得：[https](https://github.com/kaos/trackz) ://github.com/kaos/trackz和运行代码的演示站点：http: [//trackz.astekk.se/](http://trackz.astekk.se/)

它处于早期阶段，因此通过查看所做的提交从头开始跟踪进度不会太难，为此，也没什么可看的。

它是针对 0.8.x 开发的，因此在 0.9-dev 上运行它可能不会没有问题。

我还有一些关于 zotonic 内部结构（如何为 zotonic 编写模块）和其他相关主题的文章：http: [//blog.astekk.se/en/by_keyword/318/zotonic](http://blog.astekk.se/en/by_keyword/318/zotonic)

希望这至少可以解决您的一些问题:)

暗示：

研究数据模型和目录结构。一旦你理解了这一点，剩下的就很容易了。

# security - MS 访问用户和组权限 - 更改未传播 - 多用户 MDE 前端 - 网络后端

> ID：10994189
> 
> 赞同：1
> 
> 时间：2012-06-12T09:50:33.770
> 
> 标签：security, ms-access, permissions

设置：

*   每个 X 用户都使用连接到单个后端 MDB 的 MS Access 前端 MDE 实例。
*   到位的用户级访问/权限控制（例如用户、可信用户、管理员）。
*   所有更改都是通过工具->安全->等进行的。MS Access 菜单选项。
*   所有安全性都存储在单个 secure.mdw 文件中，所有 MDB 实例都连接到该文件。

问题：

*   当修改特定组的权限（例如 Trusted-Users）时 - 例如，从被允许修改查询到不能修改查询 - 更改在 MDB 实例上起作用（如预期的那样），但在其他实例（即其他 PC 上的 MDB 实例）。基本上，在进行更改之后，如果我们然后转到其他实例之一并以管理员身份登录，我们会看到组（受信任的用户）的权限没有更改。

*   有趣的是（回到第一个 MDB 实例），如果我们将用户从一个组移到另一个组，然后移到另一个 MDB 实例，我们现在看到这个更改已经传播到所有其他实例 - 从而表明它们确实指向相同的 MDW 文件。

问题：

*   修改组对一个 MDB 实例的权限是否不会传播到所有 MDB 实例（即使它们指向单个 MDB 文件）？

*   如果是，这是否意味着我们必须在更改组权限后重新安装每个 MDB 实例？

*   或者相反，我们的方法不正确吗？我们应该以不同的方式修改组权限吗？

如果您需要任何进一步的信息，请告诉我。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:00:22.363

"*所有的安全都存储在一个单独的 secure.mdw 文件中，所有 MDB 实例都连接到该文件。* "

工作组信息文件 (MDW) 仅存储用户和组的定义。数据库对象权限存储在包含这些对象的数据库中。并且数据库对象权限引用了 MDW 中定义的用户和组。

因此，您的查询权限存储在 MDE 文件中。在一个 MDE 中更改权限不会影响其他 MDE 副本。

您可以执行以下操作之一：

*   向您的用户分发更新的 MDE 版本
*   在每个 MDE 中由管理用户执行 DDL 语句 (GRANT/REVOKE)

”*有趣的是（回到第一个 MDB 实例），如果我们将用户从一个组移到另一个组，然后移到另一个 MDB 实例，我们现在看到此更改已传播到所有其他实例 - 从而表明它们确实指向相同的 MDW 文件。* ”

在这种情况下，您更改了该用户的*定义*。现在，她的权限将是授予她在当前 MDE 中的组成员身份的权限。

# .net - 在 VB.net 中使用谷歌分析 API 获取分析数据时出现 401（无效凭证）

> ID：10994192
> 
> 赞同：0
> 
> 时间：2012-06-12T09:50:41.893
> 
> 标签：.net, vb.net, oauth-2.0

我正在重写一个从谷歌分析 API 获取数据的 Windows 服务，因为我们当前的版本在 v2.3 上运行并且我们想要升级到 v3。

我已经下载了 google api .net 库并具有以下代码来授权和从 google 获取数据。我知道查询没问题，因为它在查询资源管理器中运行。

当我从我的服务器运行它时，我收到一个 401 错误，凭据无效，并且不知道如何修复它。我正在使用以下代码。

```
 Dim auth As New OAuth2LeggedAuthenticator(ConsumerKey, ConsumerSecret, User, DomainName)

    Dim ga As New AnalyticsService(auth)
    ga.Key = ApiKey ' Simple API Access - API Key 

    Dim query = ga.Data.Ga.Get("ga:" + myprofileID, _startDate.ToString("yyyy-MM-dd"), _endDate.ToString("yyyy-MM-dd"), "ga:totalEvents")
    query.Dimensions = "ga:eventLabel,ga:source,ga:medium,ga:keyword,ga:campaign,ga:isMobile,ga:date"

    Dim res = query.Fetch 
```

提取返回 401，不确定它在做什么，似乎没有办法使用 Oauth2leggedauthentication 类设置范围，这可能是一个问题。

此外，我正在为 Web 应用程序使用客户端 ID 和密码，我也为已安装的应用程序设置了一个，但两者都无法正常工作。

Oauth2LeggedAuthenticator 或 AnalyticsService 都没有公开 Oauth 令牌，所以我想知道这是否是问题的一部分，但也不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:36:47.910

最后，如果不恢复使用 ClientLogin 进行身份验证，我就无法解决这个问题

[https://developers.google.com/accounts/docs/AuthForInstalledApps](https://developers.google.com/accounts/docs/AuthForInstalledApps)

它已被弃用，但希望在 2015 年弃用政策结束时会有更优雅的 OAuth 解决方案

# python - 如何创建 404 页面？

> ID：10994195
> 
> 赞同：7
> 
> 时间：2012-06-12T09:50:51.177
> 
> 标签：python, flask, jinja2

我的应用程序使用 捕获所有 url 请求`@app.route`，但偶尔会遇到一个错误的 url，我没有匹配的 jinja 文件（但它确实匹配现有的`@app.route`）。因此，我想将此类请求重定向到该错误 url 的 404 页面。

在返回之前如何区分“一个 jinja 文件存在”和“一个 jinja 文件不存在” `render_template()`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-12T10:46:15.973

如果找不到模板，Jinja 会抛出异常：`TemplateNotFound`

所以而不是：

```
def myview():
    return render_template(...) 
```

你可以这样做：

```
def myview():
    try:
        return render_template(...)
    except TemplateNotFound:
        abort(404) 
```

[然后按照Flask 文档](http://flask.pocoo.org/docs/patterns/errorpages/#error-handlers)中的说明使用自定义错误页面处理 404 错误。不要忘记`abort`从`flask`和`TemplateNotFound`从导入`jinja2`

# entity-framework - JOIN三角关系

> ID：10994198
> 
> 赞同：0
> 
> 时间：2012-06-12T09:50:56.560
> 
> 标签：entity-framework, ienumerable

关系：

```
Profil>Branch>City
Profil>Hotel>City 
```

命令：

```
from p in Profil.getData()
join b in Branch.getData() on p equals b
join h in Hotel.getData() on p equals h
join c in City.getData()
                        ^how to reuse the equals join 
```

我可以加入 City 到 Branch 和 Hotel 餐桌吗？我可以在没有 City.getData() 的情况下克隆 c 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:50:25.410

当然，只需执行（按照您的伪代码）：

```
from p in Profil.getData()
join b in Branch.getData() on p equals b
join h in Hotel.getData() on p equals h
join c1 in City.getData() on b equals c1
join c2 in City.getData() on h equals c2 
```

EF 会将其转换为 City 表的两个别名。因此，您不会重用或克隆城市，但在 SQL 中这也是不可能的。SQL server 将能够在查询的执行计划中对其进行优化。

# linq - linq中的简单内部连接

> ID：10994210
> 
> 赞同：0
> 
> 时间：2012-06-12T09:51:57.793
> 
> 标签：linq, join

我有三张桌子`A`，`B`和`C`。`C`有很多`B`，有很多`A`。

我想在树中显示所有这些数据，所以我绑定`db.A`到具有三层层次结构的嵌套控件。唯一的问题是我得到了太多行，因为它没有在 and 之间进行内部`B`连接`C`。

那么我怎么能在 linq 中做这样的事情：

```
SELECT A.name, B.name
FROM A
INNER JOIN B ON A.id = B.AID 
INNER JOIN C ON B.id = C.BID
GROUP BY A.Name, B.Name
ORDER BY A.Name 
```

我尝试了以下方法无济于事：

```
from a in A
join b in B on a.id equals b.AID
join c in C on b.id equals c.BID
select c 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:16:24.040

试试这个 ：

```
from a in A 
join b in B on a.id equals b.AID 
join c in C on b.id equals c.BID 
group new {a,b} by new {a.name,b.name} into g
select g 
```

上面的连接与您在 sql 查询中所做的相同，但您想要的是：

```
from a in A 
join b in B on a.id equals b.AID 
join c in C on b.id equals c.BID 
group c by c.name into g
select g 
```

# php - CodeIgniter 连接返回最后一行

> ID：10994213
> 
> 赞同：1
> 
> 时间：2012-06-12T09:52:11.473
> 
> 标签：php, codeigniter, join

我有两张桌子：

```
orders: 
orderid      customer_id amount
1       5           1
2       5           2
3       8           3
4       5           11
5       8           45
6       11          23
7       11          2

orders_items:
id      orderid      item    quantity
1       1           'item1'     1
2       1           'item2'     2
3       2           'item1'     1 
4       3           'item1'     3
5       3           'item2'     1 
6       3           'item3'     1 
```

现在我想获取每个订单的信息，包括每个订单的所有不同商品。我用：

```
 $this->db->select()->from('orders')->join('orders_items', 'orders.orderid = orders_items.orderid' );
    $query = $this->db->get();
    $result_array = $query->result_array(); 
```

然而，这给了我每个订单只有最后一项的数组。我究竟做错了什么？我的最终数组应该是这样的：

```
Array
(
    [0] => Array
        (
            [orderid] => 49
            [customerid] => 2
            [amount] => 438.00
            [id] => 63
            array(
               array(
                 [item] => Service1
                 [quantity] => 22
                 [subtotal] => 439
                    ),
               array(
                 [item] => Service2
                 [quantity] => 22
                 [subtotal] => 439
                    )
                 )
        ) 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:55:54.950

需要做[foreach](http://codeigniter.com/user_guide/database/results.html)循环，如：

```
foreach ($query->result_array() as $row)
{
   echo $row['title'];
   echo $row['name'];
   echo $row['body'];
} 
```

# html - 不同的浏览器为网页提供不同的输出

> ID：10994215
> 
> 赞同：0
> 
> 时间：2012-06-12T09:52:37.447
> 
> 标签：html, css

我在一个网站上工作，我设计了一个页面，但它在 chrome 和 firefox 中给出了不同的结果。我想要的布局在 chrome 中正确给出，但 Firefox 给出了不同的结果..

我还希望所有表格都应该从顶部开始，就像在它们出现的 Firefox 中一样，但是 chrome 没有给出正确的结果

请帮助我摆脱这个问题...我将屏幕截图附加为：- ![在此处输入图像描述](../Images/b7bcded670cd83b76a86567ce7b6bd56.png)在Firefox中 ![铬图像](../Images/f20ec78a9c3c61b279754cf7ba9f75a8.png)

镀铬

我的html文件代码如下：

```
 <div id="page">
    <div class="container" >         
      <div style="overflow:hidden;">
            <table width="44%" >
            <tr>
            <th>Todays To-Do</th>
            </tr>
            <tr><td>T-shirts.xls</td></tr>
            <tr><td>Caps.xls</td></tr>
            <tr><td>Mugs.xls</td></tr>
            <tr><td>Pens.xls</td></tr>
            <tr><td>xxx</td></tr>
            <tr><td>xxx</td></tr>
            <tr><td>xxx</td></tr>
            </table>
            <table width="27%" >
            <tr>
            <th>Vendor Contact List</th>
            </tr>
            <tr><td>T-shirts.xls</td></tr>
            <tr><td>Caps.xls</td></tr>
            <tr><td>Mugs.xls</td></tr>
            <tr><td>Pens.xls</td></tr>
            <tr><td>xxx</td></tr>
            </table>
            <table width="27%">
            <tr>
            <th>Price list</th>
            </tr>
            <tr><td>T-shirts.xls</td></tr>
            <tr><td>Caps.xls</td></tr>
            <tr><td>Mugs.xls</td></tr>
            <tr><td>Pens.xls</td></tr>
            <tr><td>xxx</td></tr>
            </table>
            </br>
            </div>
            <table width="45.56%" >
            <tr>
            <th>Add new+</th>
            </tr>
            </table>
              </div>
           </div>
       </div> 
```

我的css包括在其中：

```
body 
{

     background: url(../images/bg-main.jpg)top repeat-x;
     text-align:left;
     color:#333;
     font-family:Arial, Helvetica, sans-serif;
}

   #maincontainer-02 
   {
       background:#ffffff;
       border-left:1px solid #dedede!important;
       border-right:1px solid #dedede!important;
       margin-top:5px;
   }

    table
    {
        display:inline;
        border-collapse: collapse;
        border-spacing: 0px;
    }

    td
    {
        border:solid 1px #bfbfbf;
    }

    th
    {
        background-color:#bfbfbf;
        border:solid 1px black;
        text-align:left;
        font-family:"Times New Roman", Times, serif;
        font-size:1.875em;
    }
    *
    {
        margin: 0;
        padding: 0;
    }

    #content
    {
        width:100%;
    }

    pre
    {
        border:3px solid #ccc;
        padding:5px;
        font-size:12px;
        font-family:arial;
    }
    .bold{font-weight:bold;}
    .blue{color:blue;}
    .red{color:red;} 
```

还有[它的小提琴](http://jsfiddle.net/tusTD/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:56:21.970

尝试将 valign=top 添加到您的表格中。

并在您的 CSS 中重置 HTML 和正文的浏览器默认值。像这样：

html，正文{边距：0；填充：0 }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:58:08.773

嘿用这个 css 重置你的 css 文件

```
 html, body, div, span, applet, object, iframe,
    h1, h2, h3, h4, h5, h6, p, blockquote, pre,
    a, abbr, acronym, address, big, cite, code,
    del, dfn, em, img, ins, kbd, q, s, samp,
    small, strike, strong, sub, sup, tt, var,
    b, u, i, center,
    dl, dt, dd, ol, ul, li,
    fieldset, form, label, legend,
    table, caption, tbody, tfoot, thead, tr, th, td,
    article, aside, canvas, details, embed, 
    figure, figcaption, footer, header, hgroup, 
    menu, nav, output, ruby, section, summary,
    time, mark, audio, video, input[type="checkbox"] {
        margin: 0;
        padding: 0;
        border: 0;
        font-size: 100%;
        font: inherit;
        vertical-align: baseline;
    }
    ol, ul {
        list-style: none;
    }
    img{
        border:0;
        outline:0;
        vertical-align:top;
    }
    a{
        outline:0;
        text-decoration:none;
        display:inline-block;
    }
    table {
        border-collapse: collapse;
        border-spacing: 0;
    }
table tr td{
vertical-align: top;
} 
```

# permissions - 基于工作流状态的不同权限

> ID：10994216
> 
> 赞同：4
> 
> 时间：2012-06-12T09:52:43.877
> 
> 标签：permissions, workflow, openerp

我需要根据对象的工作流状态为其设置不同的权限。例如，“经理组”只能在状态=草稿时编辑对象，但“超级经理组”也可以在状态=已验证时编辑。

似乎无法使用`ir.model.access`，我正在评估是否可以使用`ir.rule`. 好像不是...

有没有`official`办法得到这个或者我需要实现这个功能（也许通过在 ir.model.access 机器中添加一个条件）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T10:32:43.153

这在默认情况下是不可能的`ir.model.access`，因为这个权限模型被设计为像简单的 Unix 权限一样对 CRUD 操作进行操作，并且它是静态定义的，每个模型和每个组。

您可以使用 来实现类似的东西`ir.rule`，因为它实现了基于字段值的动态每条记录访问控制。通过仅针对`write`and`unlink`操作并基于`state`字段定义一组规则，您将能够防止某些组修改某些状态下的记录。通过使用始终为真规则的技术，`[(1,'=',1)]`您可以为拥有“超级访问权限”组的用户放宽非全局规则。另请参阅此[答案](https://stackoverflow.com/questions/10945270/tasks-should-show-up-only-if-the-user-has-been-assigned-it/10947529#10947529)。
但是，此选项将有重要的警告：

*   注意不要让这些规则适用`read`，因为它会使记录完全消失，并且通常会对您的流程造成严重破坏
*   当规则生效时，界面不会变为只读，如果您想将字段和按钮设置为只读，您必须找到一种方法来`attrs`以取决于用户组的方式指定它。另请参阅此[Launchpad 问题](https://answers.launchpad.net/openobject-server/+question/178779)。
*   UI 中的保存按钮不会被禁用
*   限制情况下的标准错误报告`ir.rule`不是很清楚，所以它肯定会让用户感到困惑（注意：它正在为 7.0 改进）

如您所见，`ir.rule`为此目的使用过滤器远非完美的解决方案，您首先需要为上述问题找到合适的解决方案。

最终，您可能有一个更简单的任务来实现自己的逻辑，在 ORM 原始 API 方法中插入一个新机制：（`fields_view_get`用于根据用户组动态地使字段只读）和 CRUD 方法（用于实际限制操作）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:36:58.647

还有另一种方法，而不是破解网络客户端。对于同一个 Object ，您始终可以有 2 个视图。

1.  对于经理组。

2.  对于超级经理组。

在经理组中，您可以使用 attrs = {'readonly': [('state', '!=', 'draft')]}

或您需要的任何条件。

并且在超级经理组中同样的方式，您可以将他的条件放在字段中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:34:53.560

我在生产环境中使用此功能，仅使用记录规则：在项目问题中，“基本用户”可以创建和取消问题，但不能打开或关闭它们。尽管@odony 提到了 GUI 限制，但它运行良好。

这些是使用的记录规则![在此处输入图像描述](../Images/5b4dbe2f1fd5269e90a148018b7ef01f.png)：：

有一种特殊情况需要注意：从读写状态变为只读状态：

在action的方法中，如果经过其他`write`操作改变了State，用户就可以改变State；但是如果状态更新后有一些`write`操作，用户将无法改变状态。

在我的示例中，打开问题的项目问题方法是`case_open()`. 它首先更改状态，然后进行其他更改，例如设置打开日期、用户和消息历史记录。因此，基本用户无法打开问题。如果您希望他们能够这样做，`case_open()`则必须将其覆盖，以便在`write`完成所有其他操作后更改状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T04:14:37.703

我有一个类似的要求......我的要求是如果用户属于“销售用户”组，则在 sale.order 中只读一个字符字段（比如“test_123”），否则对于“销售经理”组可编辑。也就是说，如果销售订单处于草稿状态，那么任何人都可以编辑，但如果销售订单被确认，那么这个字段“test_123”只能对“销售经理”进行编辑

我所做的是我添加了一个功能字段（is_group_manager），如果用户属于“销售经理”组并且状态不是“草稿”，则返回 True，否则返回 false。然后在 xml 视图中，我添加了带有属性的字段“test_123”，`attrs="{'readonly':[('is_group_manager','=',0)]}"` 例如

```
<field name="is_group_manager" invisible="1"/>
<field name="test_123" attrs="{'readonly':[('is_group_manager','=',0)]}"/> 
```

这仅适用于 openerp v6.0。也许这对你有帮助。:)

# objective-c - 将数据传递给 UIView - 失败

> ID：10994218
> 
> 赞同：0
> 
> 时间：2012-06-12T09:52:54.783
> 
> 标签：objective-c, cocoa-touch, uiview, ios5, uiviewcontroller

我有一个以前从未遇到过的奇怪问题，我的 viewController 中有我想在 UIView 中显示的数据。

这是一个涉及 SplitView 控制器的 iPad 应用程序，当我单击表视图（masterView）中的一个元素时，它会在我的 detailViewController 中执行一个功能（通过协议）。

执行一个启动 UIView 并向其发送数据的函数：

我的控制器：

```
- (void)SelectionChanged:(DocumentInfo*)document_info withDocu:(Document *)document{ 

    DocumentView *viewDoc=[[DocumentView alloc]initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height)];
    viewDoc.doc=document;
    viewDoc.doc_info=document_info;
    [viewDoc setBackgroundColor:[UIColor whiteColor]];

    [self.view addSubview:viewDoc]; 
} 
```

文档视图.h

```
#import <UIKit/UIKit.h>
#import "Document.h"
#import "DocumentInfo.h"

@class Document;
@class DocumentInfo;

@interface DocumentView : UIView

@property(strong,nonatomic) Document *doc;
@property(strong,nonatomic) DocumentInfo *doc_info;

@end 
```

文档视图.m

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {        
        UILabel *titreDoc=[[UILabel alloc] initWithFrame:CGRectMake(20, 32, 339, 21)];
        titreDoc.textColor = [self makeColorRGB_RED:66 GREEN:101 BLUE:149];
        titreDoc.font = [UIFont fontWithName:@"System" size:(24.0)];
        [self addSubview:titreDoc];
        NSLog(@"%@ - %@",doc,doc_info);
        titreDoc.text=@"Nouveau Document";
    }
    return self;
} 
```

我的视图显示得很好（我的意思是标签出现了），但无法获取本来会传递给它的数据......（NSLog print (null) (null)）

有人知道原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:11:33.940

NSLog 打印 null 的原因是调用 initWithFrame 方法时 doc 和 doc_info 为 nil。在 selectionChanged: 方法中调用 initWithFrame 方法后设置 doc 和 doc_info 属性。在 selectionChanged 方法的第 3 行之后添加 NSLog 函数，如下所示：

```
- (void)SelectionChanged:(DocumentInfo*)document_info withDocu:(Document *)document{ 

  DocumentView *viewDoc=[[DocumentView alloc]initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height)];
  viewDoc.doc=document;
  viewDoc.doc_info=document_info;
  NSLog(@"%@ - %@",doc,doc_info);
 [viewDoc setBackgroundColor:[UIColor whiteColor]];

[self.view addSubview:viewDoc]; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:10:18.057

这个问题似乎很简单。您初始化您的视图（这意味着您运行`- (id)initWithFrame:(CGRect)frame`），**然后**您正在设置数据，因此您在方法中看到`null`值是正常的，`init`因为尚未设置 ivars。您可以做的是修改您的 init 方法，以便在考虑这些 ivars 的情况下构建您的视图。可能是这样的：

```
- (id)initWithFrame:(CGRect)frame doc:(Document *)doc docInfo:(DocumentInfo *)docInfo; 
```

附言。如果您选择自定义`init`方法，请不要忘记`-initWithFrame:`在任何自定义之前调用指定的初始化程序 ( )。

# ruby - 用于编辑富文本编辑器的 Ruby 脚本

> ID：10994220
> 
> 赞同：0
> 
> 时间：2012-06-12T09:53:04.267
> 
> 标签：ruby, watir

我是 Watir 的新手。我已经安装了 Watir 3.0.0。AMD Ruby 1.9.3。我正在编写脚本来自动化 Web 应用程序。它有一个论坛，其中有一个富文本框来发表评论。我在脚本中找不到富文本框的名称和 ID 等任何属性。如何实现自动化？我想在其中输入文本并自动化富文本框。

请帮我写我的 Watir 脚本。

```
<td>
  <select>
  <option value="Trebuchet MS,Verdana,Arial,Helvetica,sans-serif">
  Trebuchet
  <option value="arial,helvetica,sans-serif">
  Text - Arial
<td>
  <div class="space"/>
<td>
  <select>
    <option value="1">
      Text - 1 (8 pt)
    <option value="2">
      Text - 2 (10 pt)
<td>
  <div class="space"/>
<table border="0" cellSpacing="0" cellPadding="0">
  <tbody>
    <tr>
      <td>
       <div title="Justify Left" class="button">
        <img style="width: 18px; height: 18px;" src="http://xxxxx.com/images/ed_align_left.gif" complete="complete"/>
      <td>
        <div title="Justify Center" class="button">
          <img style="width: 18px; height: 18px;" src="http://xxxxxxxx.com/images/ed_align_center.gif" complete="complete"/>
        <iframe class="iframe" src="http://xxxxxx.com/blank.html" style="width: 591px; height: 334px;">
          <html>
            <head>
             <title></title>
             <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
             <base href="http://xxxxxx.com/forum/"/>
             <style type="text/css">CSS Stylesheet</style>
           <body contentEditable="true">
             <font size="2"/> 
```

这就是它的外观。这是我尝试测试的部分代码。ContentEditable=true 代表文本框。如何编写测试脚本以使用 Ruby 编辑文本框... ??? 帮助！！！

感谢查克提供的信息...请帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:38:43.210

富文本编辑器是您自己的代码还是第三方库（例如 Jquery 控件）？

我问的原因是，如果它不是你自己的代码，那么测试别人的代码就没有多大价值，特别是如果它是你为之付费的东西。您最好将编辑器的内容“设置”为测试应用程序所需的文本，而不是花费大量精力测试其他人的代码，而不是确保它已正确配置（启用/禁用所需的功能）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T04:57:49.733

看起来您的编辑控件完全在一个框架内，这很可能适合您。您需要阅读有关如何使用框架的信息 从[这里开始](http://wiki.openqa.org/display/WTR/Frames)

# php - Kohana 404 自定义页面

> ID：10994221
> 
> 赞同：0
> 
> 时间：2012-06-12T09:53:12.507
> 
> 标签：php, exception-handling, kohana, kohana-3.2

我一直在环顾四周并关注每个教程，其中有一个很突出。[http://blog.lysender.com/2011/02/kohana-3-1-migration-custom-error-pages/](http://blog.lysender.com/2011/02/kohana-3-1-migration-custom-error-pages/) <--我按照本教程进行操作，一切顺利

1.  正在检测错误
2.  正在处理异常

但有一个我似乎找不到的例外。我目前有这个例外

```
Fatal error: Exception thrown without a stack frame in Unknown on line 0 
```

我的所有代码都与站点链接相同。请帮助我.. 我一直在为此烦恼，我也浏览过这里[Kohana 3 - 重定向到 404 页面](https://stackoverflow.com/questions/5958157/kohana-3-redirect-to-404-page)，但由于我是初学者，真的很难理解它。我还发现从 KO 3.0 到 3.1 进行了重大改造，那么 KO 3.2 怎么样？谢谢你们的帮助：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:31:28.523

来自 kohana 源代码。

> `- > If you receive *Fatal error: Exception thrown without a stack frame in Unknown on line 0*, it means there was an error within your exception handler. If using the example above, be sure *404.php* exists under */application/views/error/*.`

也许它有帮助。这可能已经修复，但我并没有那么多关注 kohana 的发展。它与拉取请求 #246 相关：[https](https://github.com/kohana/core/pull/246) ://github.com/kohana/core/pull/246这是来源：[https ://github.com/kohana/core/pull/246/files#L208L76](https://github.com/kohana/core/pull/246/files#L208L76)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T21:11:06.673

这是我使用 Kohana 3.2 的方法

*   **在index.php**中添加异常处理内容

 **```
    尝试
    {
        $request = $request->execute();
    }
    捕捉（Kohana_HTTP_Exception_404 $e）
    {
        $request = Request::factory('errors/404')->execute();
    }
    捕获（异常 $e）
    {
        $request = Request::factory('errors/500')->execute();
    }

    echo $request->send_headers()->body();

```

*   然后编写错误控制器

```
类 Controller_Errors 扩展控制器
{
    公共函数 __construct($request, $response)
    {
        父::__construct($request, $response);
    }

    公共函数 action_404()
    {
        $this->response->body(View::factory('errors/404'));
    }

    公共函数 action_500()
    {
        $this->response->body(View::factory('errors/500'));
    }
}

```

*   创建 2 个对应的错误页面（views/errors 中的 404.php 和 500.php）

*   将新路由添加到 bootstrap.php 或使用默认路由（取决于您的项目结构），只需确保在抛出异常时可以到达 Controller_Errors

*   现在每次在控制器中抛出异常时，它都会显示自定义错误页面，如下所示

```
抛出新的 HTTP_Exception_404；

```**

# delphi - 在 FastReport 中创建数据集的分布图（钟形曲线）的最佳方法是什么？

> ID：10994223
> 
> 赞同：3
> 
> 时间：2012-06-12T09:53:19.917
> 
> 标签：delphi, charts, fastreport

我正在将自制报告 Delphi 报告解决方案移植到 FastReport 中，并且我需要一个图表来显示数据集中字段的分布（“钟形曲线”或正态分布）。以前我编写了代码来将字段值分类到单元格中（例如 100 个），然后绘制一个单元格计数 (Y) 与 1-100 (X) 的 TChart 直方图。FastReport 与 TChart 有很好的集成，我可以轻松地绘制字段值线。是否有绘制分布图的现有方法，或者我应该创建一个新的排序单元格数据集并绘制它？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T05:39:13.713

当我意识到没有直接的解决方案时，我创建了一个其他人可能会觉得有用的类。它需要一个数据集，并为特定字段名称构建频率单元列表，然后将其缓存以允许来自名为“Distributions”的 TfrxUserDataSet 的“GetValue”调用。然后，报告用户可以简单地在报告中放置一个条形图，指定“分布”作为数据集，并为“Y 值”选择所需的字段。“X 值”必须设置为相同的字段名称，但附加“-X” - 然后我的类透明地返回在第一次调用时构建频率单元的图表的 X 和 Y 值。不涉及 FastReport 代码。

虽然可以工作，但这是初出茅庐的代码，可以进一步改进，例如目前 X 值从最小值到最大值。更好的显示是使用 3 或 6-sigma（标准偏差），但这很容易修改。

```
unit UartFastReportsDistribution;
interface

uses
  DB,
  Classes;

const
  CellCount = 101;

type
  TCellArray = array[0..CellCount-1] of integer;
  TXValues   = array[0..CellCount-1] of double;

  TDistributionCells = class( TObject )
    constructor Create( ADataSet : TDataSet; const AFieldName : string );
  PRIVATE
    FDataSet : TDataSet;
    FFieldName : string;
    FCells : TCellArray;
    FLastRecNo : integer;
    FCellsMax : integer;
    FDataMin, FDataMax : double;
    procedure BuildCells;
    function  XValue( AIndex : integer ) : double;
    function  YValue( AIndex : integer ) : double;
    function  DataMean : double;
    function  DataDevPk : double;
  end;

  TArtFastReportsDistribution = class( TObject )
    constructor Create( ADataSet : TDataSet );
    destructor Destroy; override;
  private
    FDataSet : TDataSet;
    FDistributions : TStringList;

    function  NameToDistribution( const AFieldName: string) : TDistributionCells;
  PUBLIC
    procedure DoGetData( const AFieldName: string; ARecNo : integer; var Value: Variant);
    function  RecordCount : integer;
  end;

implementation

uses
  Math,
  SysUtils;

{ TArtFastReportsDistribution }

function TArtFastReportsDistribution.NameToDistribution( const AFieldName: string) : TDistributionCells;
var
  I : integer;
begin
  I := FDistributions.IndexOf( AFieldName );
  if I = -1 then
    begin
    Result := TDistributionCells.Create( FDataSet, AFieldName );
    FDistributions.AddObject( AfieldName, Result );
    end
   else
    Result := FDistributions.Objects[I] as TDistributionCells;
end;

constructor TArtFastReportsDistribution.Create(ADataSet: TDataSet);
begin
  inherited Create;
  FDataSet := ADataSet;
  FDistributions := TStringList.Create;
  FDistributions.OwnsObjects := True;
end;

destructor TArtFastReportsDistribution.Destroy;
begin
  FreeAndNil( FDistributions );
  inherited;
end;

procedure TArtFastReportsDistribution.DoGetData(const AFieldName: string;
  ARecNo : integer; var Value: Variant);

var
  sFieldName : string;
  bIsXValue  : boolean;
  I          : integer;
  Dist       : TDistributionCells;
begin
  sFieldName := AFieldName;
  I := Pos( '-X', sFieldName );
  bIsXValue := I > 0;
  if bIsXValue then
    Delete( sFieldName, I, MaxInt );

  Dist := NameToDistribution( sFieldName );

  If (ARecNo = 1) and (Dist.FLastRecNo <> 1) then
    Dist.BuildCells;

  Dist.FLastRecNo := ARecNo;

  if bIsXValue then
    Value := Dist.XValue(ARecNo-1)
   else
    Value := Dist.YValue(ARecNo-1);
end;

function TArtFastReportsDistribution.RecordCount: integer;
begin
  Result := CellCount;
end;

{ TDistributionCells }

{ TDistributionCells }

procedure TDistributionCells.BuildCells;

  procedure ClearCells;
  var
    I : integer;
  begin
    for I := 0 to CellCount-1 do
      FCells[I] := 0;

    FCellsMax := 0;
    FDataMin := 0.0;
    FDataMax := 0.0;
  end;

  function GetDataSetFieldValues : TFloatArray;
  var
    I : integer;
    Field : TField;
  begin
    Field := FDataSet.FieldByName( FFieldName );
    if not Assigned( Field ) then
      Raise Exception.CreateFmt( 'Missing distribution field "%s"', [FFieldName] );

    SetLength( Result, FDataSet.RecordCount );
    FDataSet.First;
    I := 0;
    While not FDataset.EOF do
      begin
      Result[I] := Field.AsFloat;
      Inc(I);
      FDataSet.Next;
      end;
  end;

var
  I,
  iCellCount,
  iOffset : integer;
  F : double;
  Data : TFloatArray;
begin
  ClearCells;

  If FDataSet.RecordCount = 0 then
    Exit;

  Data := GetDataSetFieldValues;

  FDataMin  := MinValue( Data );
  FDataMax  := MaxValue( Data );

  FCellsMax := 0;
  iCellCount   := Length( FCells );

  for I := 0 to Length( Data )-1 do
    begin
    F := Data[I];

    F := (F - DataMean + DataDevPk)/(2*DataDevPk);
    iOffset := Trunc( iCellCount * F );
    If iOffset < 0 then
      iOffset := 0
     else
      If iOffset > iCellCount-1 then
       iOffset := CellCount-1;
    FCells[iOffset] := FCells[iOffset] + 1;

    If I = 0 then
      FCellsMax := FCells[iOffset]
     else
      FCellsMax := Max( FCells[iOffset], FCellsMax );
    end;

end;

constructor TDistributionCells.Create(ADataSet: TDataSet;
  const AFieldName: string);
begin
  inherited Create;
  FDataSet := ADataSet;
  FFieldName := AFieldName;
end;

function TDistributionCells.DataDevPk: double;
begin
  Result := FDataMax - DataMean;
end;

function TDistributionCells.DataMean: double;
begin
  Result := (FDataMin + FDataMax) / 2;
end;

function TDistributionCells.XValue(AIndex: integer): double;
begin
  Result := AIndex;
  Result := (Result / CellCount) - 0.5;               
  Result := DataMean + (Result*2*DataDevPk);
end;

function TDistributionCells.YValue(AIndex: integer): double;
begin
//  Result := 100.0 * FCells[AIndex] / FCellsMax;
  Result := FCells[AIndex];
end; 
```

# c - 定时器的内部工作

> ID：10994224
> 
> 赞同：1
> 
> 时间：2012-06-12T09:53:21.987
> 
> 标签：c, winapi, timer

我知道 QueryPerformanceCounter() 可用于计时功能。我想知道：

1-我可以通过超频 CPU 来增加计时器的分辨率（所以它的*滴答*声更快）？

2-基本上是什么让某些计时器比其他计时器更精确（例如，QueryPerformanceCounter() 与 GetTickCount() 相比更精确）？如果主板上有单晶振荡器，为什么有些定时器比其他定时器慢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:58:02.490

1.  `QueryPerformanceCounter`具有非常高的分辨率——通常小于一纳秒。我不明白你为什么要增加它。超频会增加它，但这似乎是超频的一个非常微弱的理由。

2.  `QueryPerformanceCounter`非常准确，但有点贵，不太方便。
    一个。它很昂贵，因为它使用了昂贵的`rdtsc`指令。更快的计时器可以从内存中读取一个整数。这个整数需要更新，我们不想太频繁（每秒 1000 次是合理的），所以我们得到了一个非常便宜的定时器，精度低。基本上就是这样`GetTickCount`。
    湾。这很不方便，因为它使用在计算机之间更改的单位。有时是纳秒，有时是半纳秒，或其他值。它使计算变得更加困难。
    一个。另一个不便之处是它返回非常大的数字，当您尝试对它们进行数学运算时可能会溢出，因此您需要小心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:46:33.530

QPC 的时序源取决于机器。它通常是从芯片组某处可用的频率中获取的。CPU超频是否会影响它在很大程度上取决于您的主板设计。最简单的方法就是试一试，使用QueryPerformanceFrequency 看看效果。

GetTickCount 由完全不同的定时器源驱动，该信号也产生时钟中断。它不是很精确，通常为 1/64 秒，但它非常精确。您的机器会不时联系时间服务器以重新校准时钟并调整时钟校正因子。这使得它在一整年中精确到大约一秒钟。QPC 非常精确，但几乎没有那么精确。仅用于短时间间隔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:01:16.477

1 - 是的，在内部，更好的计时器之一是 rdtsc，它确实为您提供时钟值。将此与 cpuid 指令中的信息相结合，可以为您提供时间。

2 - 其他定时器依赖于各种定时源，例如 8253 定时器。

QPF 是 Microsoft 在 rdtsc 提供的内容上添加的包装器。阅读本文了解更多信息： http: [//www.strchr.com/performance_measurements_with_rdtsc](http://www.strchr.com/performance_measurements_with_rdtsc)

# html - 使用 CSS 放大或缩小图像之间是否存在性能差异？

> ID：10994225
> 
> 赞同：1
> 
> 时间：2012-06-12T09:53:22.850
> 
> 标签：html, css, image-scaling

在响应式 css 设计的情况下，假设您有几个不同大小的图像版本，并且您的屏幕宽度达到了 900 像素。

在这种情况下，最好的办法是什么？案例a）缩小950像素的图像或案例b）放大850像素的图像（这些值当然是虚构的，我不是在谈论特定情况）

从我的立场来看，每个都有自己的优点和缺点：

使用缩减，作为专业人士，图像应该具有更好的质量（至少我认为是这样，我对不同浏览器的缩减算法了解不多）。作为一个 CON，下载图像需要更长的时间，如果您还针对移动设备，这很重要。

使用升级可以提高下载速度，但会降低质量。

当然，假设您可以选择，您不会将 500 像素的图像放大到 1000 像素的宽度，就像您出于明显的原因不会缩小 2000 像素的图像一样。但是，如果您有相似的值，是否有一种经验法则可以帮助您做出决定，或者它并没有真正产生影响，这取决于开发人员？

或者，至少，有没有更重要的因素？例如，通过使用升级，您可以从下载时间减少中获得更大的收益，然后从质量下降中获得更大的收益，反之亦然。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:10:37.230

我想你可以用不同的方式来看待它。另外，你应该问自己一些问题：

*   您想要覆盖哪些受众（面向**移动设备**（例如最大宽度为 640 像素）或**桌面设备**（任何大于 640 像素的设备））
*   您将使用的最大图像是多少（宽度和高度）
*   您的移动网站是否需要您的图片（即您能否制作网站的简化移动版本，而不会丢失太多内容？）

当您的注意力集中在上面定义的桌面环境上时，我不会过多地担心您的问题。当然，更大的图像需要一些时间来加载，但不要忘记大多数移动浏览器都有两个非常简洁的功能：1\. 设备检索到的数据首先由服务器压缩（想想*Blackberry*，*Opera* ......） 2\. 大多数情况下，浏览器允许选择图像质量（低、正常、高）。所以用户仍然可以选择他们想要什么样的质量，而不需要你为他们做决定！

我认为，当您专注于移动受众时，最好是高档的。不过，我不认为您的网站仅适用于移动设备，并且您希望使您的网站在宽屏设备上也看起来不错，所以我会进行缩减！另外，不要忘记**优化您的图像**（JPG 压缩为 80% 应该会大大减小尺寸，但不应该对质量造成太大影响）。

* * *

编辑：所以我一直在考虑这个问题，你还可以做其他事情：使用两个不同的图像。我可以听到你在想：但这听起来不合逻辑，浏览器如何检测尚未加载时需要更改的图像（加载两个图像会很愚蠢）。好吧，给[你](http://jsfiddle.net/BramVanroy/MAbQD/)。[（这个](https://stackoverflow.com/questions/4815398/jquery-to-prepend-url-in-img-src-attribute)问题归功于 jAndy ）

jQuery 代码（请注意，我链接到我自己的网站空间。因此，这个小提琴不会永远工作！）

```
$(document).ready(function() {
    $("#jsDisabledMessage").hide(); // HIDES MESSAGE THAT TELLS USER TO ENABLE JS

    if ($(window).width() < 480) {
            $("img").attr('src', function(index, src) {
       return "http://bramvanroy.be/files/jsfiddle/8mZnk/" + this.getAttribute('data-path') + "-mobile.jpg"; // FOR MOBILE DEVICES
        });
    }
    else {
        $("img").attr('src', function(index, src) {
       return "http://bramvanroy.be/files/jsfiddle/8mZnk/" + this.getAttribute('data-path') + "-not-mobile.jpg"; // FOR DESKTOP
        });
    }

   $("img").show();
}); 
```

那么，会发生什么：

*   浏览器读取 HTML
*   浏览器不想找到图像（无论如何，图像都被 CSS 隐藏了）
*   jQuery 找到合适的 URL（取决于屏幕大小）并相应地调整 HTML
*   jQuery 显示图像
*   当 JS 被禁用时，将显示一条消息告诉用户，无法显示请求的图像。

我希望这是朝着正确的方向发展。

# ruby-on-rails - Rails Jquery Mobile 资产路由错误

> ID：10994226
> 
> 赞同：1
> 
> 时间：2012-06-12T09:53:29.820
> 
> 标签：ruby-on-rails, jquery-mobile

在我的 Rails 应用程序中，我使用的是 mobile-fu 和 jquery mobile ui。当我通过桌面浏览器测试移动 UI 时，一切正常。当我通过移动浏览器测试我的应用程序时，我看到 development.log 及其显示中所有资产的路由错误。在移动浏览器中一切正常。

```
Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2012-06-12 15:02:00 +0530
Served asset /jquery.js - 304 Not Modified (0ms)

Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2012-06-12 15:02:00 +0530

ActionController::RoutingError (No route matches [GET] "/jquery.js"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  thin (1.3.1) lib/thin/connection.rb:80:in `block in pre_process'
  thin (1.3.1) lib/thin/connection.rb:78:in `catch'
  thin (1.3.1) lib/thin/connection.rb:78:in `pre_process'
  thin (1.3.1) lib/thin/connection.rb:53:in `process'
  thin (1.3.1) lib/thin/connection.rb:38:in `receive_data'
  eventmachine (0.12.10) lib/eventmachine.rb:256:in `run_machine'
  eventmachine (0.12.10) lib/eventmachine.rb:256:in `run'
  thin (1.3.1) lib/thin/backends/base.rb:61:in `start'
  thin (1.3.1) lib/thin/server.rb:159:in `start'
  rack (1.4.1) lib/rack/handler/thin.rb:13:in `run'
  rack (1.4.1) lib/rack/server.rb:265:in `start'
  railties (3.2.2) lib/rails/commands/server.rb:70:in `start'
  railties (3.2.2) lib/rails/commands.rb:55:in `block in <top (required)>'
  railties (3.2.2) lib/rails/commands.rb:50:in `tap'
  railties (3.2.2) lib/rails/commands.rb:50:in `<top (required)>'
  script/rails:6:in `require'
  script/rails:6:in `<main>'

  Rendered /usr/local/ruby/lib/ruby/gems/1.9.1/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms) 
```

这是我正在使用的代码

application_controller.rb

```
 has_mobile_fu
  ... 
```

移动.js

```
//= require jquery
//= require jquery_ujs
//= require 'jquery.mobile'
//= require_self 
```

移动.css

```
 *= require 'jquery.mobile'
 *= require_self 
```

应用程序.mobile.erb

```
 <%= stylesheet_link_tag "mobile" %>
  <%= javascript_include_tag "mobile" %> 
```

如何解决路由问题

# apache - Apache中的Tomcat

> ID：10994227
> 
> 赞同：0
> 
> 时间：2012-06-12T09:53:37.763
> 
> 标签：apache, tomcat

我正在尝试按照以下链接中的步骤在 apache 中包含 tomcate

[http://tomcat.apache.org/tomcat-3.2-doc/uguide/tomcat_ug.html](http://tomcat.apache.org/tomcat-3.2-doc/uguide/tomcat_ug.html)。

在该链接中，他们提到在 tomcat 启动后将有一个文件 tomcat-apache.conf 在 tomcat\conf 目录中，但我无法找到它。我正在使用 tomcat 6 二进制文件。

我是在使用正确的 tomcat 还是应该换一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:57:31.500

如果您在 Windows 上，您可以轻松地将 XAMPP 用于它支持并包含 tomcat 的 Windows，并且它已配置并且您可以使用它

# .net - 从 Active Directory 获取所有用户？

> ID：10994228
> 
> 赞同：0
> 
> 时间：2012-06-12T09:53:44.563
> 
> 标签：.net, active-directory

我有以下代码：

```
 DirectoryEntry directoryEntry = default(DirectoryEntry);
        // Binding object. 
        DirectoryEntry objGroupEntry = default(DirectoryEntry);
        // Group Results. 
        DirectorySearcher objSearchADAM = default(DirectorySearcher);
        // Search object. 
        SearchResultCollection objSearchResults = default(SearchResultCollection);
        // Binding path. 
        ActiveDirectory result = new ActiveDirectory();
        ActiveDirectoryItem treeNode;

    string adServer = ADTestProject.Properties.Settings.Default.Server;
    string adDomain = ADTestProject.Properties.Settings.Default.Domain;
    string adUsername = ADTestProject.Properties.Settings.Default.AdiminUsername;
    string password = ADTestProject.Properties.Settings.Default.Password;

    string[] dc = adDomain.Split('.');

    string dcAdDomain = string.Empty;

    foreach (string item in dc)
    {
        if (dc[dc.Length - 1].Equals(item))
            dcAdDomain = dcAdDomain + "DC=" + item;
        else
            dcAdDomain = dcAdDomain + "DC=" + item + ",";
    }

    // Get the AD LDS object. 

        if (pathToAD.Length > 0)
            directoryEntry = new DirectoryEntry("LDAP://" + adServer + "/CN=Users," + dcAdDomain, adUsername, password);
        else
            directoryEntry = new DirectoryEntry();

        DirectorySearcher ds = new DirectorySearcher(directoryEntry);
        ds.SearchScope = SearchScope.Subtree;
        ds.Filter = "(&(objectClass=group))";

        objSearchResults = ds.FindAll(); 
```

然后这个：

```
if (objSearchResults.Count != 0)
{
    foreach (SearchResult objResult in objSearchResults)
    {
        objGroupEntry = objResult.GetDirectoryEntry();
        result.ActiveDirectoryTree.Add(new ActiveDirectoryItem() 
        { Id = objGroupEntry.Guid, 
            ParentId = objGroupEntry.Parent.Guid, 
            AccountName = objGroupEntry.Name, 
            Type = ActiveDirectoryType.Group, 
            PickableNode = false 
        });

        foreach (object child in objGroupEntry.Properties["member"])
        {
            treeNode = new ActiveDirectoryItem();
            var path = child.ToString().Replace;
            using (var memberEntry = new DirectoryEntry(path))
            {

                if (memberEntry.Username != null && memberEntry.SchemaEntry.Name.CompareTo("group") != 0 
                    && memberEntry.Properties.Contains("sAMAccountName") && memberEntry.Properties.Contains("objectSid"))
                {
                    treeNode.Id = Guid.NewGuid();
                    treeNode.ParentId = objGroupEntry.Guid;
                    treeNode.AccountName = memberEntry.Properties["sAMAccountName"][0].ToString();
                    treeNode.Type = ActiveDirectoryType.User;
                    treeNode.PickableNode = true;
                    treeNode.FullName = memberEntry.Properties["Name"][0].ToString();

                    byte[] sidBytes = (byte[])memberEntry.Properties["objectSid"][0];
                    treeNode.ObjectSid = new System.Security.Principal.SecurityIdentifier(sidBytes, 0).ToString();

                    result.ActiveDirectoryTree.Add(treeNode);
                }
            }
        }
    }
} 
```

Child.ToString 可能如下所示：

```
CN=S-1-5-18,CN=ForeignSecurityPrincipals,DC=MyDomain,DC=local 
```

问题是 memberEntry 的属性有很多异常吗？为什么？

例外是：

> “memberEntry.Name”引发了“System.Runtime.InteropServices.COMException”字符串 {System.Runtime.InteropServices.COMException} 类型的异常 - 未指定的错误 -2147467259
> 
> 堆栈跟踪：在 System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail)
> 在 System.DirectoryServices.DirectoryEntry.Bind() 在 System.DirectoryServices.DirectoryEntry.get_Name()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T12:25:58.357

在与 OP 交谈后，我们确定问题出在`path`正在使用的变量中，`DirectoryEntry`并且在 OP 的环境中需要显式身份验证。

相关的变化是：

```
using (var memberEntry = new DirectoryEntry(path)) 
```

到

```
using (var memberEntry = new DirectoryEntry("LDAP://" + adServer + "/" + path, adUsername, password)) 
```

详情：[完整成绩单](https://chat.stackoverflow.com/transcript/12432)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:17:47.187

这可能是[从 AD 获取用户列表的副本](https://stackoverflow.com/questions/5162897/how-can-i-get-a-list-of-users-from-active-directory)

但是，尽管如此，有一篇文章描述了[CodeProject 上关于 AD 的许多有用查询：Querying MS AD using dot Net](http://www.codeproject.com/Articles/9570/Querying-Microsoft-Active-Directory-Using-Microsof)

# python - 如何使对象正确可散列？

> ID：10994229
> 
> 赞同：70
> 
> 时间：2012-06-12T09:53:46.903
> 
> 标签：python, python-3.x

这是我的代码：

```
class Hero:
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def __str__(self):
        return self.name + str(self.age)

    def __hash__(self):
        print(hash(str(self)))
        return hash(str(self))

heroes = set()

heroes.add(Hero('Zina Portnova', 16)) # gets hash -8926039986155829407
print(len(heroes)) # gets 1

heroes.add(Hero('Lara Miheenko', 17)) # gets hash -2822451113328084695
print(len(heroes)) # gets 2

heroes.add(Hero('Zina Portnova', 16)) # gets hash -8926039986155829407
print(len(heroes)) # gets 3! WHY? 
```

为什么会这样？
第一个和第三个对象具有相同的内容和相同的哈希值，但`len()`讲述了 3 个唯一的对象？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-06-12T09:55:13.313

您还需要以`__eq__()`兼容的方式定义[`__hash__()`](http://docs.python.org/reference/datamodel.html#object.__hash__)- 否则，相等性将基于对象身份。

在 Python 2 上，建议您还定义`__ne__`与`!=`. `==`在 Python 3 上，默认`__ne__`实现将为`__eq__`您委托。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-07-08T04:51:38.810

这是整个代码：

```
class Hero:
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def __str__(self):
        return self.name + str(self.age)

    def __hash__(self):
        print(hash(str(self)))
        return hash(str(self))

    def __eq__(self,other):
        return self.name == other.name and self.age== other.age

heroes = set()
heroes.add(Hero('Zina Portnova', 16)) # gets hash -8926039986155829407
print(len(heroes)) # gets 1

heroes.add(Hero('Lara Miheenko', 17)) # gets hash -2822451113328084695
print(len(heroes)) # gets 2

heroes.add(Hero('Zina Portnova', 16)) # gets hash -8926039986155829407
print(len(heroes)) # gets 2 
```

该函数识别`__eq__`并且因此 len 为 2。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-07-09T15:45:50.177

[Python 文档](https://docs.python.org/3/reference/datamodel.html#object.__hash__)可能会有所帮助：

> 如果一个类没有定义一个`__cmp__()`或`__eq__()`方法，它也不应该定义一个`__hash__()`操作；

# php - 填充下拉列表从不同的 MySQL 表中获取数据

> ID：10994231
> 
> 赞同：1
> 
> 时间：2012-06-12T09:53:54.467
> 
> 标签：php, mysql, drop-down-menu

我需要你的帮助来解决一个愚蠢的问题。我的数据库中有 2 个表（内容和类别）。

我已经填充了名为“类别”的 MySQL 表，现在我想以一种形式查看存储在数据库中的旧类别，同时将其修改为新类别。

不幸的是，我写的只显示了从数据库表中获取的类别列表。

```
<select name="PostedCat">
    <?php 

    $query_category = "SELECT * FROM categ";
    $result_category =  mysql_query($query_categ) or die (mysql_error());

    while($categ = mysql_fetch_assoc($result_category)){        
    ?>
        <option value="<?php echo $categ['cat_title']; ?>" ><?php echo $categ['cat_title']; ?></option>
    <?php
    }                       
    ?>
</select> 
```

使用此代码，我可以看到存储在数据库中的类别，但是如何获得“旧”选择的类别？存储的那个？

希望得到一些帮助，但我现在是盲人。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:59:03.067

假设您的旧类别在`$oldcat`，就做

```
$query_category = "SELECT * FROM categ";
$result_category =  mysql_query($query_categ) or die (mysql_error());

while($categ = mysql_fetch_assoc($result_category)){        
?>
    <option value="<?php echo $categ['cat_title']; if ($categ['cat_title']==$oldcat) echo '" selected="true'; ?>" ><?php echo $categ['cat_title']; ?></option>
<?php
}                       
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:00:23.087

所以，再次感谢你的好意。这就是我所做的。

我有一个页面，其中包含我所有内容的列表，并且靠近我拥有的每个内容和“编辑”按钮。当我点击它时，我会进入一个新页面，其中包含一个直接从 MySQL 获取数据并将所有内容放在正确字段中的填充表单。在 function.php 我有：

```
function getPost($id) {
    $id = (int) $id;
    $query = mysql_query("SELECT * FROM contents WHERE id = '$id'") or die (mysql_error());

    return mysql_fetch_array($query);
} 
```

在edit.php中我有这个例如：

```
<?php $editedpost = getPost($_GET['id']); ?>
<form action="editingPost.php" method="post">
<table>
    <tr>
        <td><label for="ContentTitle">Title</label></td>
        <td><input type="text" name="ContentTitle" value="<?php echo $editedpost['content_title']; ?>" /></td>
    </tr>

    <tr>
        <td><label for="ContentCategory">Category</label></td>
        <td>
            <select name="ContentCategory">
                <?php 
                $query_category = "SELECT * FROM categ";
                $result_category =  mysql_query($query_categ) or die (mysql_error());

                while($categ = mysql_fetch_assoc($result_category)){        
                ?>
                    <option value="<?php echo $categ['cat_title']; ?>" >Here I would like to see the data stored in the database, that I choosed before.</option>
                <?php
                }                                   
                ?>
            </select>
        </td>
    </tr>

    <tr>
        <td colspan="2"><input type="submit" name="submit_post_new" /></td>
        <td><input type="hidden" name="id" value="<?php echo $_GET['id']; ?>" /></td>
    </tr>
</table>
</form> 
```

# c# - 从 Windows Phone 7 访问 WiFi 信息

> ID：10994234
> 
> 赞同：2
> 
> 时间：2012-06-12T09:54:07.620
> 
> 标签：c#, visual-studio-2010, windows-phone-7, namespaces, opennetcf

我目前正在尝试从我的 windows phone 7.5 中提取 WiFi 信息，例如信号强度和 MAC 地址，以获得我正在开发的准确位置应用程序。OpenNETCF.Net 框架具有我需要的所有功能（甚至被描述为我的 MSDN：http: [//msdn.microsoft.com/en-us/library/aa446491.aspx](http://msdn.microsoft.com/en-us/library/aa446491.aspx)）但是我似乎无法导入命名空间使用visual studio进入我的项目。它抱怨该框架不是为 Windows Phone 项目设计的。有没有办法解决？或者是否存在适用于 WP7 的等效框架？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:04:38.240

Windows Phone 7 仅与 Windows Mobile 和 Windows CE（该库所针对的）关系较远。

在 MSDN 上有[一些处理网络信息的方法](http://msdn.microsoft.com/en-us/library/hh202867%28v=vs.92%29.aspx)，尽管我不认为此时 WiFi 信号强度可供应用程序使用。

值得注意的是，有一个[特定的获取位置信息](http://msdn.microsoft.com/en-us/library/ff431803%28v=vs.92%29.aspx)的方法，操作系统可以使用 Wi-Fi 信号信息来帮助对 GPS 不工作的位置进行三角定位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:12:09.747

恐怕在当前版本是**不可能的**`Windows Phone`

# python - 为每个线程定义一个记录器

> ID：10994235
> 
> 赞同：2
> 
> 时间：2012-06-12T09:54:24.623
> 
> 标签：python, multithreading, logging

我有一个用于处理 XMLRPC 请求的服务器应用程序。每个连接都创建自己的线程。我想设置日志记录，以便一些线程/连接特定信息进入日志。我可以做类似的事情：

```
import logging

@add_unique_request_id
def thread_top(request_id):
    logging.info('thread %d says: hello'%request_id)
    logging.error('thread %d says: darn!!'%request_id) 
```

并按照我的意愿设置全局根记录器，但我不喜欢这个解决方案。我想要以下内容：

```
import logging

@setup_logger
def thread_top():
    logging.info('hello')
    logging.error('darn!!') 
```

但我不知道 setup_logger 装饰应该是什么样子。我想出了一个解决方法，为每个请求使用单独的进程，然后在每个进程中设置根记录器将完全符合我的要求。有什么方法可以在不被迫使用多处理的情况下完成这项工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:23:49.760

我正在使用自定义格式化程序和线程本地存储来执行此操作：

```
from collections import defaultdict
import logging
import threading

class ContextAwareFormatter(logging.Formatter):
    """
    Makes use of get_context() to populate the record attributes.
    """

    def format(self, record):
        # Using defaultdict to avoid KeyErrorS when a key is not in the context.
        def factory():
            return ""
        record.__dict__ = defaultdict(factory, record.__dict__)

        for k, v in get_context().iteritems():
            if not hasattr(record, k):
                setattr(record, k, v)
        return logging.Formatter.format(self, record)

THREADLOCAL_ATTR = "logging_context"
_threadlocal = threading.local()

def get_context():
    result = getattr(_threadlocal, THREADLOCAL_ATTR, None)
    if result is None:
        result = {}
        setattr(_threadlocal, THREADLOCAL_ATTR, result)
    return result

def set_context(**context):
    c = get_context()
    c.clear()
    c.update(**context)
    return c

def update_context(**context):
    c = get_context()
    c.update(**context)
    return c 
```

然后在记录器配置中：

```
"formatters": {
    "default": {
        "()": "log.ContextAwareFormatter",
        "format": "%(asctime)s %(levelname)s [%(request_id)s] %(message)s (%(module)s:%(lineno)d)",
    },
} 
```

在记录上下文之前填充：

```
update_context(request_id=request_id) 
```

`request_id`您可能希望在日志记录中可能不需要的应用程序的不同部分使用不同的格式化程序。

# vim - 插入模式下vim（linux）中的箭头键对我来说坏了

> ID：10994238
> 
> 赞同：3
> 
> 时间：2012-06-12T09:54:39.430
> 
> 标签：vim

当我在插入模式下使用 vim 中的箭头键时，我会插入字母而不是移动。

*   向上产生一个 A
*   Down产生B
*   左产品 ​​a D
*   右产生一个 C

有谁知道这会导致什么？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T10:22:40.133

如果这些键在正常模式下工作正常，但在插入时不能正常工作，那么您必须对前一个或两个字符进行一些映射（通常`<Up>`是`<Esc>[A`（使用 CSI 的终端）或`<Esc>OA`(xterm)）。尝试检查输出

```
verbose imap <Esc> 
```

，以插入模式开始的映射应该不多`<Esc>`（例如，我没有）。我可以说，箭头键在插入模式下正常工作，使用

```
inoremap <Esc> <Esc> 
```

产生与终端识别有问题或设置“兼容”相同的行为。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T10:01:43.077

您`vim`似乎是在`vi`兼容模式下启动的。做这个

*   打开 Vim 编辑器，
*   通过键入以下内容获取主目录的路径：`echo $HOME`
*   检查您的位置是否有 .vimrc 文件`$HOME`，（如果您没有创建它）
*   将以下行添加到`.vimrc`文件 `:set nocompatible`

[在这里](http://vim.wikia.com/wiki/Fix_arrow_keys_that_display_A_B_C_D_on_remote_shell)找到相同问题的更多解决方案（特别是如果您的问题与终端相关，重新映射键解决方案可能对您有用）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-31T03:11:48.567

以下对我有用。把它放在你的 .vimrc 中

```
:set term=cons25 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T10:01:36.977

1.  打开 Vim 编辑器。
2.  通过键入以下内容获取主目录的路径：`:echo $HOME`。
3.  检查 $HOME 位置是否有 .vimrc 文件，如果没有创建它。
4.  将以下行添加到 .vimrc 文件：`:set nocompatible`

参考：http: [//vim.wikia.com/wiki/Fix_arrow_keys_that_display_A_B_C_D_on_remote_shell](http://vim.wikia.com/wiki/Fix_arrow_keys_that_display_A_B_C_D_on_remote_shell)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-17T12:29:16.037

这里没有一个答案对我有用。我在 Linux 中，使用 konsole/yakuake 终端和 tmux。这个修复对我有用：

```
nnoremap <silent> <ESC>OA <ESC>ki
nnoremap <silent> <ESC>OB <ESC>ji
nnoremap <silent> <ESC>OC <ESC>hi
nnoremap <silent> <ESC>OD <ESC>li
inoremap <silent> <ESC>OA <ESC>ki
inoremap <silent> <ESC>OB <ESC>ji
inoremap <silent> <ESC>OC <ESC>hi
inoremap <silent> <ESC>OD <ESC>li 
```

# django - 在 Django 中使用日期选择器

> ID：10994241
> 
> 赞同：1
> 
> 时间：2012-06-12T09:55:14.550
> 
> 标签：django, django-forms, twitter-bootstrap

我将 Django 和 Datepicker 与 Twitter-Bootstrap 一起使用，如果它们属于相同的小部件（DateInput），我希望 form.fields 具有相同的类和相同的 ID。具体来说，我想相应地更改 id。每次都应该有不同的id。

这是我在下面定义的类。我如何每次都将 id 更改为不同的。

```
class MyDatePicker(forms.DateInput)
  def __init__(self, *args, **kwargs):
      attrs = kwargs.pop("attrs",{})
      attrs["class"] = "datepick" 
      attrs["id"] ="date_1"
      kwargs["attrs"] = attrs
      super(MyDatePicker, self).__init__(*args, **kwargs) 
```

我该怎么做？需要一些帮助...欢迎任何建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:07:49.993

您可以注册一个模板标签来找出小部件类型：

```
@register.filter('klass')
def klass(obj):
    return obj.__class__.__name__ 
```

然后在您的模板中：

```
{% load your_filter_module %}
<form id="form" enctype="multipart/form-data" class="form-horizontal" method="POST" action="">{% csrf_token %}
    <fieldset>
        {{ form.non_field_errors }}
        {% for field in form %}
            <div class="control-group{% if field.errors %} error{% else %}{% if form_errors %} success{% endif %}{% endif %}">
                <label class="control-label" for="{{ field.auto_id }}">{% trans field.label %}</label>
                <div class="controls">
                    {% if field.field.widget|klass == "CheckboxInput" %}
                        <label class="checkbox">
                            <input type="checkbox" id="{{ field.auto_id }}" name="{{ field.name }}"{% if field.value == "on" %} checked{% endif %}>
                            {% trans "Some random text" %}
                        </label>
                    {% endif %}
                    # ... etcetera continue check for other classes ... 
```

**注意：**更简洁的 DRY 方法是将循环和类逻辑（水平/垂直等）添加到返回 html 小部件的过滤器

# regex - 第一个怎么去掉 .......[内容] [仅开始和结束标记] 使用 html 解析器或正则表达式

> ID：10994246
> 
> 赞同：0
> 
> 时间：2012-06-12T09:55:33.017
> 
> 标签：regex, html-parsing

```
String  s  = "<p>test with only p tag </p>"; 
```

输出应该是`test with only p tag`

```
String  t  = "<p>test with only p tag </p><p></p>"; 
```

输出应该是`test with only p tag <p></p>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:12:10.477

```
(?<=<p>).+(?=</p>) 
```

应该管用

# php - Highcharts 图表不同日期范围的 X 轴标签

> ID：10994248
> 
> 赞同：8
> 
> 时间：2012-06-12T09:55:33.563
> 
> 标签：php, javascript, jquery, graph, highcharts

我编写了下面的代码，它为选定的日期（日期和日期）生成面积图。

```
$(document).ready(function() {
    var options = {
        "series": [{
            "showInLegend": false,
            "color": "#D0D0D0",
            "name": "Revenue",
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}],
        "credits": {
            "enabled": false
        },
        "chart": {
            "renderTo": "highchart_id",
            "defaultSeriesType": "area",
            "shadow": true
        },
        "title": {
            "text": null,
            "align": "center",
            "x": 0,
            "y": 20
        },
        "xAxis": {
            "type": "datetime",
            "dateTimeLabelFormats": {
                "month": "%e. %b",
                "year": "%b"
            },
            "labels": {
                "enabled": "false"
            }
        },
        "legend": {
            "enabled": true
        },
        "yAxis": {
            "title": {
                "text": ""
            },
            "labels": {
                "enabled": true
            }
        },
        "plotOptions": {
            "area": {
                "stacking": "normal",
                "lineColor": "#3E3E3E",
                "lineWidth": 3,
                "marker": {
                    "lineWidth": "1",
                    "lineColor": "#3E3E3E",
                    "states": {
                        "hover": {
                            "enabled": true,
                            "radius": 1
                        }
                    }
                }
            },
            "series": {
                "pointStart": 1335823200000,
                "pointInterval": 86400000
            }
        }
    };
    var chart = new Highcharts.Chart(options);
});​ 
```

x 轴上的日期间隔减少了一天。这里的系列值 2 代表 10 可能，而它在图中显示为 9 可能。

我是这个highchart的新手，任何人都可以建议解决方案，如果您需要对问题进行更多说明，请告诉我。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-12T10:29:45.210

在声明图表之前尝试添加此代码

```
Highcharts.setOptions({      
  time: {
    useUTC: false
  }
}); 
```

默认情况下，highchart 使用 UTC 时间。通过添加上面的代码，它将使用浏览器的时区。

# python - mechanize、urllib、beautifulsoup 和相关路径

> ID：10994251
> 
> 赞同：0
> 
> 时间：2012-06-12T09:55:54.190
> 
> 标签：python, web-crawler, beautifulsoup, mechanize, urllib2

mechanize、urllib 或 beautifulsoup 是否有任何内置方法来处理具有绝对和相对 url 混合的网站的抓取？

解决方案有很多例外

```
'http://' + 'www.stackoverflow.com'
'http://www.stackoverflow.com' + '/questions/ask' 
```

有更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:33:13.170

作为记录，这是我的解决方案:)

```
domain = re.search('(http:\/\/.*\.\D+?|https:\/\/.*\.\D+?)\/',url.strip()).group(1)

if re.search('mailto',url.strip()) != None:
    pass
elif re.search('(http:\/\/.*\.\D+?|https:\/\/.*\.\D+?)\/',url.strip()) != None:
    u = url.strip().encode('utf8')
elif re.search('^/',url.strip()) != None:
    u = domain+url.strip().encode('utf8')
else:
    u = domain+'/'+url.strip().encode('utf8') 
```

# c# - 透明几何模型3D

> ID：10994254
> 
> 赞同：1
> 
> 时间：2012-06-12T09:55:55.327
> 
> 标签：c#, wpf, 3d

我需要创建一个透明的 GeometryModel3D。
像这样：
![像这样：](../Images/76bc65a5934b56a94e24c119fc6cf64a.png)

我试过这段代码：

```
var m = new Model3DGroup();
var panelsGeometry = MyMeshGeometry3D;
        Brush br = new SolidColorBrush(Colors.Red);
        br.Opacity = 0.5;
        m.Children.Add(new GeometryModel3D(panelsGeometry, new DiffuseMaterial(br)) { BackMaterial= new DiffuseMaterial(br) }); 
```

但结果我得到了这个：
![在此处输入图像描述](../Images/a509e9e571b1c3bed57914efd59471cd.png)

我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:29:59.053

您可以使用带有 的透明图像`ImageBrush`，一个像素就足够了，但您需要[`TextureCoordinates`](http://msdn.microsoft.com/en-us/library/system.windows.media.media3d.meshgeometry3d.texturecoordinates.aspx)在网格对象上进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T06:34:51.637

确保您的盒子网格几何包含 24 个点。如果您的框包含最少数量的点 (8)，则不会渲染后面的面。

例如，请参见[此处](http://kindohm.com/blog/2007/04/30/use-of-normals-in-wpf-3d.html "在 WPF 3D 中使用法线")。

您可以下载 Normals3D.zip 并更改完整网格框的画笔不透明度以获得所需的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:36:23.293

您需要使用 TextureCoordinates 并且您必须订购从后到前绘制的侧面，以便它们正确融合。WPF 不这样做。

看[这篇文章](http://www.ericsink.com/wpf3d/2_Transparency.html)

# asp.net - ASP .NET 中没有表单身份验证的基于角色的安全性

> ID：10994259
> 
> 赞同：0
> 
> 时间：2012-06-12T09:56:03.500
> 
> 标签：asp.net, forms-authentication, iprincipal, iidentity

我想利用：

```
 Page.User.IsInRole("CustomRole");
        Page.User.Identity.IsAuthenticated 
```

在 Page 方法以及web.config中的**授权部分工作时：**

```
<authorization>
    <allow roles="Administrators, Supervisors" />
    <deny users="*" />
</authorization> 
```

并在类和方法级别应用规则：

```
[PrincipalPermission(SecurityAction.Demand, Role = "Administrators")] 
```

在我的应用程序中，我使用 ... 自定义机制进行身份验证，该机制在 ... http 标头中为我提供用户身份。我得到用户 PIN 码（某种 ID）+ 角色。但这是一个支线情节。没关系。

我真正想要实现的是利用 ASP .NET 内置的授权功能，但拥有我的自定义身份验证机制。我想我必须实现**IPrincipal**和**IIdentity**，对吗？我在网上看到了很多示例，但所有示例都包括指定提供程序的 web.config 配置，以及**FormsAuthentication**之类的类，我想我不需要这些。我只需要将我的用户对象（由我准备）注入到请求中，就是这样。

所以：

*   实现它的最简单方法是什么？
*   GenericPrincipal / IPrincipal 有什么区别？
*   如何获取/创建 IIdentity 对象？我看到了样本：

    var id = new FormsIdentity(authTicket);

但我没有使用 FormsAuthentication。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:02:52.960

简而言之，您必须实现自己的身份验证模块。

身份验证模块只是一个 ASP.NET 模块，但具有特殊用途。它的`AuthenticateRequest`方法应该`HttpContext.Current.User`使用`IPrincipal`.

回答您的其他问题：`IPrincipal`只是一个接口，`GenericPrincipal`而是它的实现之一。您可以使用它，顾名思义，它只是一个通用实现，这意味着它应该适合您。由于`IPrincipal`只是`IIdentity`加角色，您可能还需要`GenericIdentity`.

其他实现，如`RolePrincipal`+`FormsIdentity`是为特定目的而设计的，这两个例如由表单身份验证模块使用。

有一些很好的例子，只是谷歌的“自定义身份验证模块”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T15:19:22.673

在您这样做之前（创建/实施您自己的），您是否尝试过/考虑过将表单身份验证适应您现有的身份验证方案？

我认为你“几乎在那里”（使用所有内置的 ASP.net auth/membership/profiles/roles），并且将现有的身份验证方案“插入”到表单身份验证中*可能更容易/更简单。*

这段[代码](http://msdn.microsoft.com/en-us/library/xdt4thhy.aspx)应该让您了解表单身份验证的灵活性：

```
if ((UserEmail.Text == "jchen@contoso.com") && (UserPass.Text == "37Yj*99Ps"))
{
      FormsAuthentication.RedirectFromLoginPage 
         (UserEmail.Text, Persist.Checked);
}
else
{ ... } 
```

因此，它适用于硬编码的“身份验证方案”（不是您应该这样做，但可以让您了解可能性），甚至是[web.config 中](http://msdn.microsoft.com/en-us/library/1d3t3c61.aspx)的列表- 再次，只是一个示例：

```
<authentication mode="Forms">
  <forms name=".FUBAR">
    <credentials passwordFormat="MD5">
      <user name="foo" password="b7ab5072e8fba7bed20384cc42e96193"/>
      <user name="bar" password="1c42e49a360aa7cc337a268a1446a062"/>
      <user name="john" password="5f4dcc3b5aa765d61d8327deb882cf99"/>
      <user name="jane" password="7c6a180b36896a0a8c02787eeafb0e4c"/>
    </credentials>
  </forms>
</authentication> 
```

只是一个想法-hth....

# asp.net - ASP.NET 服务器控件中的 Html

> ID：10994260
> 
> 赞同：0
> 
> 时间：2012-06-12T09:56:04.810
> 
> 标签：asp.net, html, controls

当我在 ASP.NET 中开发 ServerControl 时，有没有办法编写纯 HTML？

我想将我的控件创建为 .dll 文件。但是当我编写控件时，我只能在我的 .cs 文件中添加 C# 中的 HTML 标记和属性。

所以我被迫在我的 RenderContents() 方法中使用它：

```
output.RenderBeginTag(...
output.AddAttribute(...
output.RenderEndTag(... 
```

而不是例如：

```
<div attribute1="value"></div> 
```

这个问题有解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:00:35.477

不幸的是，只有用户控件 (ASCX) 允许这种类型的方法（描述性标记），但它们不能被打包到 DLL 中。我一直讨厌这种限制，对我来说，这是一种以编程方式生成标记的代码气味，但这是我们必须忍受的！

如果您有非常静态的标记，您总是可以将其放入资源文件 (resx) 中，而不是以编程方式输出 HTML

# jquery - JQUERY：当 2 个字段更改其值时触发提交按钮

> ID：10994268
> 
> 赞同：2
> 
> 时间：2012-06-12T09:56:25.247
> 
> 标签：jquery, button, triggers, submit

当 2 个单独的字段更改其值（“onHide”）时，我需要单击提交按钮。该代码与 2 个酒店预订日历相关。也许解决方案比我认为的更简单，但我真的是 jquery 的新手。基本脚本：

```
$("#checkIn").bind("onHide", function()  { 
    checkIn = $("#checkIn").val();

    $.post('file.php', {"checkIn": checkIn}, function() {
        // do something more
    });
});

$("#checkOut").bind("onHide", function()  {  
    checkOut = $("#checkOut").val();

    $.post('file.php', {"checkOut": checkOut}, function() {
        // do something more
    });     
}); 
```

...因此，下一步将是（当两个字段都更改值时）：

```
$("#submitButton").trigger('click'); 
```

该功能（onHide）工作正常。顺便说一句：checkOut 取决于 checkIn，但并不重要。我只需要知道如何将点击发送到 submitButton。请给点建议好吗？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T09:59:29.583

您最好直接提交表单，而不是尝试模拟单击按钮：

```
document.forms[0].submit();//this will submit the first form found on the page 
```

或使用[JQuery 的提交](http://api.jquery.com/submit/)（感谢@akalucas）：

```
$("#form").sumbit(); 
```

* * *

如果您需要在提交上做额外的工作，我建议将一个函数绑定到提交按钮的单击事件，然后在字段更改时调用该函数：

```
$("#submitButton").click(SubmitForm);

function SubmitForm(){
   //something else I might need to do like validation
   document.forms[0].submit();
}

function AnyOtherFuntion(){
   SubmitForm();
} 
```

* * *

**编辑**：根据你可能想要这样的新信息：

```
var checkInValue = "";
var checkOutValue = "";

$(document).onload(function(){
   checkInValue = $("#checkIn").val();
   checkOutValue = $("#checkOut").val();

   $("#checkIn").change(OnChange);
   $("#checkOut").change(OnChange);
});

function OnChange(){
   if(checkInValue != $("#checkIn").val() && checkOutValue != $("#checkOut").val()){
      SubmitForm();
   }
}

function SubmitForm(){
   document.forms[0].submit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:04:02.903

您可以在不单击提交的情况下提交表单，更好地去做

```
 document.form_name.submit(); 
```

# javascript - 多个 TinyMCE

> ID：10994269
> 
> 赞同：2
> 
> 时间：2012-06-12T09:56:26.247
> 
> 标签：javascript, jquery, tinymce, rte

我最近在开发具有多个 TinyMCE 的页面时遇到了一个问题。

```
<textarea style='width:90%;height:500px;' class='tinymce' name='message' id="mce_editor_0" placeholder='Long Message'>{if isset($message)}{$message}{/if}</textarea>
<textarea style='width:90%;height:200px;' class='tinymce' name='signature' id="mce_editor_1" placeholder='Long Message'></textarea>

$.ajax({
             url: "../action/getEmailTemplate?id="+id+'&type='+type
        }).done(function ( data ) {
            console.log("../action/getEmailTemplate?id="+id+'&type='+type);
            console.log(data);
            if(type=='email'){
                tinyMCE.execCommand('mce_editor_0', 'mceSetContent', false, data);
            }
            if(type=='sig'){
                tinyMCE.execCommand('mce_editor_1', 'mceSetContent', false, data);
            }
        }); 
```

这不起作用。我是否误解了 tinyMCE.execCommand 背后的逻辑？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T11:08:48.083

这行不通。您将在[此处](http://www.tinymce.com/wiki.php/Command_identifiers)找到正确的使用说明。

您可以使用 tinyMCE 调用一般命令，并且在编辑器实例上调用特定于编辑器的命令：

```
tinymce.get('mce_editor_1').execCommand('mceCodeEditor', false, 5); 
```

您还可以使用以下内容来解决特定的编辑

```
tinyMCE.execInstanceCommand('mce_editor_1', command, user_interface, value, focus) 
```

# c# - 将docx word文件转换为文本时如何阅读“行号”？

> ID：10994275
> 
> 赞同：2
> 
> 时间：2012-06-12T09:56:43.100
> 
> 标签：c#, xml-parsing, docx

我使用以下代码（在 C# 中）将 .docx 单词文件（xml 内容）转换为文本：

```
private string ReadNode(XmlNode node)
{
    if (node == null || node.NodeType != XmlNodeType.Element)
        return string.Empty;

    StringBuilder sb = new StringBuilder();
    foreach (XmlNode child in node.ChildNodes)
    {
        if (child.NodeType != XmlNodeType.Element) continue;
        switch (child.LocalName)
        {
            case "t":                           // Text
                sb.Append(child.InnerText.TrimEnd());

                string space = ((XmlElement)child).GetAttribute("xml:space");
                if (!string.IsNullOrEmpty(space) && space == "preserve")
                    sb.Append(' ');
                break;

            case "tab":// Tab
                sb.Append("\t");
                break;
            case "p":// Paragraph
                if (ReadNode(child).Trim() != "")
                {
                    sb.Append(ReadNode(child));
                    sb.Append(Environment.NewLine);                            
                }
                break;
            default:
                sb.Append(ReadNode(child));
                break;
        }
    }
    return sb.ToString();
} 
```

如何在我的代码中读取页面内容的“行号”（类似读取“p”或“tab”）？

请查看图片文件（[http://i.stack.imgur.com/OVx3O.jpg](https://i.stack.imgur.com/OVx3O.jpg)）： ![docx 文件中的行号。](../Images/2c832ca85ac2e330b60b17a1a76bcd70.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T22:21:37.673

编辑：

恐怕 XML 不存储该信息。XML 只是存储文本的一般布局，因此您必须尝试复制布局，然后查看每段文本的位置。这不是很容易。更详细地解释您的问题（为什么要这样做），也许我们可以提出另一个不需要获取行号的解决方案？

您需要的信息位于其他“xmlData”节点之一下

```
See "<Pages>2</Pages>" 
```

完整的xml如下：

```
 <pkg:part pkg:name="/docProps/app.xml" pkg:contentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" pkg:padding="256">
    <pkg:xmlData>
      <Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes">
        <Template>Normal.dotm</Template>
        <TotalTime>0</TotalTime>
        <Pages>2</Pages>
        <Words>341</Words>
        <Characters>1948</Characters>
        <Application>Microsoft Office Word</Application>
        <DocSecurity>0</DocSecurity>
        <Lines>16</Lines>
        <Paragraphs>4</Paragraphs>
        <ScaleCrop>false</ScaleCrop>
        <HeadingPairs>
          <vt:vector size="2" baseType="variant">
            <vt:variant>
              <vt:lpstr>Title</vt:lpstr>
            </vt:variant>
            <vt:variant>
              <vt:i4>1</vt:i4>
            </vt:variant>
          </vt:vector>
        </HeadingPairs>
        <TitlesOfParts>
          <vt:vector size="1" baseType="lpstr">
            <vt:lpstr/>
          </vt:vector>
        </TitlesOfParts>
        <Company/>
        <LinksUpToDate>false</LinksUpToDate>
        <CharactersWithSpaces>2285</CharactersWithSpaces>
        <SharedDoc>false</SharedDoc>
        <HyperlinksChanged>false</HyperlinksChanged>
        <AppVersion>14.0000</AppVersion>
      </Properties>
    </pkg:xmlData>
  </pkg:part> 
```

# java - Guice AOP 增强的解包类

> ID：10994276
> 
> 赞同：3
> 
> 时间：2012-06-12T09:56:49.823
> 
> 标签：java, aop, guice

对于 Guice AOP 增强的类，是否有“官方”方式来“解包”（即获取非增强类）？

到目前为止，我通过在类名中查找字符串“$$EnhancerByGuice$$”来检测这些类，并且 - 如果它存在 - 恢复到超类（Guice AOP 在使用继承的类上工作）。

当 Guice 决定更改此后缀字符串（这绝不是任何 API 或合同的一部分）时，我更喜欢不会中断的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:48:26.497

据我所知，没有官方的方法。有一个[问题](http://code.google.com/p/google-guice/issues/detail?id=187)可以解决，但考虑到优先级，我怀疑它会发生。同时，如果您想避免在 Guice 决定更改后缀字符串时中断，请添加一个单元测试来证明您可以检测到增强的类。

# vb.net - 使用 vb.net 遍历组合框控件的值

> ID：10994279
> 
> 赞同：5
> 
> 时间：2012-06-12T09:57:05.467
> 
> 标签：vb.net, for-loop

我在这里更新了我的问题..我正在使用一个没有电话号码的组合框。我想在变量中一个接一个地获取电话。现在正在使用下面的代码来获取组合框值。但现在仍然收到以下错误消息 System.Data.DataRowView。请帮我解决这个错误。我是 vb.net 的新手。

我的部分代码在这里..

```
 For i = 0 To ComboBox1.Items.Count
            Dim s As String

            s = Convert.ToString(ComboBox1.Items(i))
        Next i 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-30T10:31:43.707

您正在使用从零开始的索引。

改变这个：

```
For i = 0 To ComboBox1.Items.Count 
```

对此：

```
For i = 0 To ComboBox1.Items.Count - 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T10:05:18.910

您的问题可能发生在这里：

```
s = Convert.ToString(ComboBox1.Items(i)) 
```

这不会返回值。它返回给定索引处对象的字符串表示形式，在您的情况下显然是 type `System.Data.DataRowView`。

您必须转换`ComboBox1.Items(i)`为适当的类型并访问其`Value`. 或者，由于它是 a `DataRowView`，您可以通过适当的列名访问这些值：

```
Dim row = CType(ComboBox1.Items(i), System.Data.DataRowView)
s = row.Item("column_name") 
```

尽管如此，首先你**绝对应该关闭并处理**连接，无论事务是失败还是成功。这可以在[`finally`](http://msdn.microsoft.com/en-us/library/fk6t46tz.aspx)块中（选项 1）或[`using`](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)语句（选项 2）中完成。

**选项1**

```
// ...
con1 = New MySqlConnection(str)
con1.Open()
Try
    // ...
Catch ex As Exception
    Lblmsg.Text = " Error in data insertion process....." + ex.Message
Finally
    con1.Close()
    con1.Dispose()
End Try 
```

**选项 2**

```
// ...
Using con1 as New MySqlConnection(str)
    con1.Open()
    Try
        // ...
    Catch ex As Exception
        Lblmsg.Text = " Error in data insertion process....." + ex.Message
    Finally
        con1.Close()
    End Try
End using 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-05T20:03:58.987

这也有效！

```
 Dim stgTest = "Some Text"
        Dim blnItemMatched As Boolean = False

        '-- Loop through combobox list to see if the text matches
        Dim i As Integer = 0
        For i = 0 To Me.Items.Count - 1
            If Me.GetItemText(Me.Items(i)) = stgTest Then
                blnItemMatched = True
                Exit For
            End If
        Next i

        If blnItemMatched = False Then

            Dim stgPrompt As String = "You entered  '" & stgTypedValue & "',  which is not in the list."
            MessageBox.Show(stgPrompt, "Incorrect Entry", MessageBoxButtons.OK, MessageBoxIcon.Information)

            Me.Text = ""
            Me.Focus()

        End If 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-03T13:27:22.733

即使经过很长时间，您也可以通过以下方式实现这一目标

```
For Each item As Object In combx.Items

    readercollection.Add(item.ToString)

        Next 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-11T23:22:57.697

请试试这个

```
 For j As Integer = 0 To CboCompany.Items.Count - 1
              Dim obj As DataRowView = CboCompany.Items(j)
              Dim xx = obj.Row(0)

              If xx = "COMP01" Then
                   CboCompany.SelectedIndex = j
                   Exit For
              End If
  Next 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-05T02:17:28.033

我无法在网上完整找到这个答案，但将其拼凑在一起。在下面的代码片段中，cbox 是一个 ComboBox 控件，它初始化了 DisplayMember 和 ValueMember 属性。

```
 Dim itemIE As IEnumerator = cbox.Items.GetEnumerator
    itemIE.Reset()
    Dim thisItem As DataRowView
    While itemIE.MoveNext()
        thisItem = CType(itemIE.Current(), DataRowView)
        Dim valueMember As Object = thisItem.Row.ItemArray(0)
        Dim displayMember As Object = thisItem.Row.ItemArray(1)
        ' Insert code to process this element of the collection. 
    End While 
```

# blackberry - 自定义弹出窗口可以像工具提示一样工作而不会超时

> ID：10994282
> 
> 赞同：0
> 
> 时间：2012-06-12T09:57:15.153
> 
> 标签：blackberry, popup, tooltip, customization

我需要创建一个自定义弹出窗口来像工具提示一样工作我如何实现它我已经处理过代码请检查并告诉我我需要改进的地方

```
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.container.PopupScreen;
import net.rim.device.api.ui.container.VerticalFieldManager;

    public class ToolTip extends PopupScreen{

        private static VerticalFieldManager vfm;
        private LabelField lbl;
        private int xPosition;
        private int yPosition;
        private String message;
        public ToolTip(String message,int xPos,int yPos){
            super(vfm);
            this.xPosition=xPos;
            this.yPosition=yPos;
            this.message=message;
            vfm=new VerticalFieldManager(){
                protected void paint(Graphics graphics) {
                    graphics.setColor(0x00FFFFFF); 
                    graphics.fillRect(0,0,getWidth(),getHeight());
                    graphics.setColor(0x00000000);
                    graphics.drawRect(0,0,getWidth(),getHeight());
                    super.paint(graphics);
                }       

            };

            lbl=new LabelField(message);
            vfm.add(lbl);
        }

        protected void sublayout(int width, int height) {
            super.sublayout(width, height);
            setExtent(lbl.getPreferredWidth(), lbl.getPreferredHeight());
            setPosition(xPosition, yPosition);

        }

    } 
```

我收到 NullPointer Exception 的错误，`super(vfm)`因为当我按如下方式使用 vfm 时它为空。我怎样才能优化我的代码。

```
ButtonField bf1=new ButtonField("Login"){
            protected boolean navigationClick(int status, int time) {

            UiApplication.getUiApplication().pushScreen(new ToolTip("Hello ", 50, 50));
                return super.navigationClick(status, time);
            }

        };
        add(bf1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:05:44.073

`VerticalFieldManager`传递to `super(..)`of的初始化实例`PopupScreen`。检查以下代码。

```
class ToolTip extends PopupScreen {
    private static VerticalFieldManager vfm = new VerticalFieldManager() {
        protected void paint(Graphics graphics) {
            graphics.setColor(0x00FFFFFF);
            graphics.fillRect(0, 0, getWidth(), getHeight());
            graphics.setColor(0x00000000);
            graphics.drawRect(0, 0, getWidth(), getHeight());
            super.paint(graphics);
        }
    };

    // other codes

    public ToolTip(String message, int xPos, int yPos) {
        super(vfm);
        // other codes
    }

    protected void sublayout(int width, int height) {
        // other codes
    }
} 
```

*更新了自定义背景支持的代码*

```
class ToolTip extends PopupScreen {
    private int xPosition;
    private int yPosition;

    public ToolTip(String message, int xPos, int yPos) {
        super(new VerticalFieldManager());

        // Define and set background here
        // Use - BackgroundFactory.createBitmapBackground(bitmap) for bitmap background
        getDelegate().setBackground(BackgroundFactory.createSolidBackground(Color.RED));

        // Add other UI Field here
        this.xPosition=xPos;
        this.yPosition=yPos;

        add(new LabelField(message));
        // other codes
    }

    // Empty implementation of this will disable default rounded border.
    protected void applyTheme() {
    }

    protected void sublayout(int width, int height) {
        super.sublayout(width, height);
        setPosition(xPosition, yPosition);
    }
} 
```

您需要使用`getDelegate().setBackground(..)`来设置背景。检查`BackgroundFactory`用于创建自定义背景的类。

# selenium - 如何使用 Selenium 在 Button 的特定部分单击以显示选项列表？

> ID：10994285
> 
> 赞同：3
> 
> 时间：2012-06-12T09:57:28.273
> 
> 标签：selenium, webdriver, selenium-rc, junit4, sahi

```
<table id="ext-comp-1389" class="x-btn x-btn-text-icon " cellspacing="0" style="width: auto;">
<tbody class="x-btn-small x-btn-icon-small-left">
<tr>
<tr>
<td class="x-btn-ml">
<td class="x-btn-mc">
<em class="x-btn-split" unselectable="on">
<button id="ext-gen128" class="x-btn-text create" type="button">New</button>
</em>
</td>
<td class="x-btn-mr">
<i>&nbsp;</i>
</td>
</tr>
<tr>
</tbody>
</table> 
```

以上是嵌入 HTML 元素的方式..！HTML 元素是一个“新建”按钮，旁边有一个“+”号……如果我只单击“+”，我可以获得菜单选项，例如“D”、“P” '、'T' 和 'U'。如果我单击“新建”按钮（在代码中，就是这部分， **新建** ，没有任何内容显示为单击操作，发生在中心...下面是按钮的图像...

![当我单击中间或任何地方的新建按钮时，没有发生任何事件。 当我点击“+”时，会显示选项列表，我给出的选项是“D”、“P”、“T”、“U”](../Images/e1cc4e14a42c49dc350657691eca3e21.png)

这是我尝试过的代码......在过去的几个小时里，

```
 package com.hr.testpack;
import static org.junit.Assert.fail;
    import java.util.concurrent.TimeUnit;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.openqa.selenium.By;
import org.openqa.selenium.Keys;
    import org.openqa.selenium.NoSuchElementException;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebDriverBackedSelenium;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.interactions.Actions;
    import com.thoughtworks.selenium.*;

public class Classtest2 {

static Selenium selenium;
static final String HOST = "localhost";
static final int PORT = 4444;
static final String BROWSER = "*firefox";
static final String URL = "http://test.test.com";
private static int buttonwidth=42;//value got from firebug computation tab...
    private static final int Xoffset = (buttonwidth/2)+6;
private static final int Yoffset = 0;
private WebDriver driver;
private String baseUrl;

private StringBuffer verificationErrors = new StringBuffer();
//private StringBuffer verificationErrors = new StringBuffer();

@Before
public void setUp() throws Exception {
driver = new FirefoxDriver();
baseUrl = "http://test.test.com/RMprojectProject";
    driver.manage().timeouts().implicitlyWait(90, TimeUnit.SECONDS);
}

@Test

public void testrr1() throws Exception
{

/*  Only Driver...Driver's way to open a URL*/

driver.get(baseUrl + "/");  

/* Webdriver Backed Selenium method- 

//*selenium = new WebDriverBackedSelenium(driver, baseUrl);

//*selenium.open("/");

//selenium.wait(15000); - Never use Wait, when Implicit wait is used

//WebDriver driver = ((WebDriverBackedSelenium) selenium).getWrappedDriver();

//Driver should be instantiated for using Driver's methods for

// SeleniumBackedWebdriver

     // Comments over
     */

driver.findElement(By.id("username")).clear();
driver.findElement(By.id("username")).sendKeys("test@test.com");

driver.findElement(By.id("password")).clear();
driver.findElement(By.id("password")).sendKeys("test124");

/* For normal Selenium RC and SeleniumBackedWebDriver method

selenium.type("username", "test");
selenium.type("password","test124");

*/

/* Internal Wait methods, which can be used for normal web
 * 
 * applications. Methods written in the end of the program
 * 
 * waitFor("xpath=.//*[@id='loginButton']/tbody/tr[2]/td[2]'");
 waitSecond(20); */

driver.findElement(By.xpath(".//*[@id='loginButton']/tbody/tr[2]/td[2]")).click();

//selenium.waitForPageToLoad("85000");

//selenium.waitForCondition("selenium.isElementPresent(\"xpath=.//*[@id='ext-gen165']/div/table/thead/tr/td[3]\")", "70000");

WebElement ele = driver.findElement(By.xpath("//*[@id='ext-gen128']"));
Actions build = new Actions(driver);

build.moveToElement(ele, Xoffset, Yoffset).click().build().perform();

    //  selenium.waitForCondition("selenium.isElementPresent(\"xpath=//*[@id='ext-gen246']\")", "20000");

driver.findElement(By.xpath("//*[@id='ext-gen245']")).click();

  }

@After

public void tearDown() throws Exception{

    selenium.stop();
    //driver.quit();
    String verificationErrorString = verificationErrors.toString();
    if (!"".equals(verificationErrorString)) {
        fail(verificationErrorString);
    }
}

private boolean isElementPresent(By by) {
    try {
        driver.findElement(by);
        return true;
    } catch (NoSuchElementException e) {
        return false;
    }
}

/* The Below methods can be used, for page loading/waits in 
 * 
 * normal web applications...waitFor(seconds),when called in
 * 
 * the application, the wait happens...useful in occasions

public void waitFor(String locator) throws Exception {
    for (int second = 0;; second++) {
        if (second >= 60)
            fail("timeout");
        try {
            if (selenium.isVisible(locator))
                break;
        } catch (Exception e) {
        }
        Thread.sleep(1000);
    }
}

public void waitSecond(int n) throws Exception {
    for (int second = 0;; second++) {
        if (second >= 60)
            fail("timeout");
        try {
            if (second > n - 1)
                break;
        } catch (Exception e) {
        }
        Thread.sleep(1000);
    }
}

*/ 
```

代码已成功执行并且测试用例通过，但是当单击“+”按钮时应该看到的元素没有看到！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-12T11:44:16.670

按以下方式使用操作 -

```
 WebElement ele = driver.findElement(By.xpath("//*[@id='ext-gen128']");
Actions build = new Actions(driver);
build.moveToElement(ele, Xoffset, Yoffset).click().build().perform(); 
```

可能通过使用偏移量，您可以准确地使硒驱动程序单击您提到的 + 按钮。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-18T19:03:02.557

使用以下命令 _click(_xy(_cell("New"),-5,5)); 在 sahi 解决了我的问题...!!!

# java - 如何设置 eclipse 以跟踪导入的 maven 依赖项中方法的源代码？

> ID：10994286
> 
> 赞同：2
> 
> 时间：2012-06-12T09:57:28.803
> 
> 标签：java, eclipse, maven, classpath

我已经通过 Maven 在 eclipse 中导入了一些项目。我想在我的示例项目中访问该项目的方法。但是通常当我们想从某个项目中访问方法时，我们只需导入包并简单地访问该方法。

但是因为它是通过 Maven 导入的，所以它不是系统本地的。所以我决定，如果我将类路径设置为那个特定的项目/包，那么它可能会起作用。

我应该怎么做才能从中访问方法，或者我应该如何为其设置类路径？

如果您知道这一点，请尽快建议我。我从来没有在这种情况下工作过。

请指教

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:25:19.053

The Maven plugin for eclipse will dynamically build the classpath for your projects based on their maven dependencies. Now, that classpath will be made up of your projects and, as @plucury says, what's in `~/.m2/repository`.

If you want to follow methods and see the source implementation of the imported libraries, eclipse will work as usual (because it's just referencing jars from a different folder), *but* by default eclipse will not instruct maven to also download javadoc or source bundles for your classes. To do that, you need to set it in Windows>Preferences>Maven (Download Artifact Sources and Download Artifact Javadocs). In my experience, eclipse will not do that for already downloaded bundles, so you'll have to manually erase them from `~/.m2/repository` and compile again. When eclipse downloads the jar, this time, it will also get the source, which will let you follow through.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:08:00.837

Maven导入的jar包也存在于你的本地计算机上，我们称之为Local Repository。当你将项目导入eclipse时，你应该将classpath变量设置`M2_REPO`为你的Local Repository。默认情况下，路径是`~/.m2/repository`

# jquery - 如何在jquery中重置/刷新触发器

> ID：10994288
> 
> 赞同：1
> 
> 时间：2012-06-12T09:57:30.177
> 
> 标签：jquery, triggers, refresh, reset

如何重置触发器

```
$("#poButton").click(function(){

    $('.myPrint').trigger('click');

 }); 
```

当我第一次单击按钮（即 poButton）时，触发一次触发，第二次单击 2 次，第三次单击 3 次，依此类推...

如何重置/刷新触发器？因为当我刷新浏览器时，它会刷新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:21:23.503

从您的评论中看到有两种选择。如果您只期望该类中有一个元素，`myPrint`那么您应该解决该问题，即。弄清楚为什么你有多个如果你在另一边只是希望调用一次方法而不考虑类 myPrint 有多少元素你只需调用作为事件处理程序附加的函数或执行以下操作

```
$(".myPrint").first().click(); 
```

我个人更喜欢直接调用函数而不是触发事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:10:13.893

如果要从对象`.unbind()`上的对象调用中取消绑定事件侦听器，如下所示：

```
$('#foo').unbind(); 
```

您甚至可以指定要取消绑定的事件：

```
$('#foo').unbind('click'); 
```

如果您想“刷新”事件侦听器，只需将它们全部解除绑定并将**1 个**新事件侦听器绑定到它。

# lotus-notes - Lotus notes 8.5 收件箱恢复默认排序并选择下一封未读邮件

> ID：10994304
> 
> 赞同：0
> 
> 时间：2012-06-12T09:58:36.620
> 
> 标签：lotus-notes

我的默认 Lotus Notes (v 8.5.2FP2) 收件箱按日期/时间排序（最新在顶部）。然后我可以执行以下步骤：

*   选择一条消息（单击以选择）
*   单击“谁”标题：排序顺序更改为“按发件人”（例如查看他们以前的消息）。
*   我可以选择并打开发件人以前的邮件。

到目前为止一切正常。要返回正常/默认收件箱视图 - 即按日期/时间排序（顶部最新），我需要：

*   单击“日期”标题（第一次以相反的顺序排序）
*   再次单击“日期”标题（这次按正确顺序排序）
*   单击“下一个未读”导航按钮以跳转到下一条最新消息。

我的问题是我觉得必须点击这三下有点痛苦。是否有一个简单的“取消排序”按钮？如果没有，我该怎么做才能一键返回默认收件箱视图和排序顺序**？**

我怀疑我需要创建一个自定义按钮来对收件箱进行排序并将我导航到下一条消息。有一个“@sort”函数（对列表进行排序）和一个“NavigateNextUnread”命令，但我不确定如何对当前收件箱执行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:14:24.837

您应该能够通过单击 Who 标题返回到默认排序（我可以在我的邮件数据库中这样做）。

# c# - 将参数从 ImageButton 传递给后面的代码

> ID：10994310
> 
> 赞同：0
> 
> 时间：2012-06-12T09:59:04.377
> 
> 标签：c#, asp.net

**编辑问题**

我想将一个变量（在本例中为包含字符串 bill 的“名称”）传递给代码隐藏方法并使用 debug.print 来查看它

```
string name = "bill";
<asp:ImageButton runat="server" id="DeleteButton"  ImageUrl="Images/delete.jpg" 
CommandArgument='<%# Eval("name") %>' CommandName="ThisBtnClick" text="Delete Me" onclick="DeleteMonth" /> 
```

我试过了：

```
CommandArgument='<%# Eval("name") %>'
CommandArgument='<%# Bind("name") %>'
CommandArgument='<%= "name" %> 
```

这是我的打印功能

```
protected void DeleteMonth(object sender, EventArgs e)
{
    ImageButton btn = (ImageButton)sender;
      switch (btn.CommandName)
    {
        case "ThisBtnClick":
            Debug.Print("--" + btn.CommandArgument.ToString());
            break;
        case "ThatBtnClick":
            break;
    }
} 
```

我想我需要先对一些东西进行数据绑定，但老实说我不知道​​。当我打印时，我只是得到一个空白。有没有人处理过这个

**编辑**

我想要做的是动态创建一个表。name 变量从数据库中提取，然后基于该名称创建一个表。我希望表格的最后一列是 X，这样我就可以删除该行中的所有内容。我正在使用图像按钮。这是我的代码

```
using (System.Data.SqlClient.SqlConnection conn = new System.Data.SqlClient.SqlConnection(sqlConnectionString))
    {
        conn.Open();
        string query = "SELECT * FROM dbo.Archive";
        System.Data.SqlClient.SqlCommand cmd = new System.Data.SqlClient.SqlCommand(query, conn);
        System.Data.SqlClient.SqlDataReader rdr = cmd.ExecuteReader();

        while (rdr.Read())
        {
            string name, created, 1Updated, 2Updated, 3Updated;
            name = rdr.GetString(1);                    // name of month
            if (!(rdr.IsDBNull(2)))                     // checks date for a null value
            { created = rdr.GetDateTime(2).ToString(); }// if not null date is turned into a string and saved in a variable
            else
            { created = "---"; }                        // else date is given a default value
            if (!(rdr.IsDBNull(3)))
            { 1Updated = rdr.GetDateTime(3).ToString(); }
            else
            { 1Updated = "---"; }
            if (!(rdr.IsDBNull(4)))
            { 2Updated = rdr.GetDateTime(4).ToString(); }
            else
            { 2Updated = "---"; }
            if (!(rdr.IsDBNull(5)))
            { 3Updated = rdr.GetDateTime(5).ToString(); }
            else
            { 3Updated = "---"; }

            Response.Write("<tr><td>" + name + "</td>");
            Response.Write("<td>" + created + "</td>");
            Response.Write("<td>" + 1Updated + "</td>");
            Response.Write("<td>" + 2Updated + "</td>");
            Response.Write("<td>" + 3Updated + "</td>");
            Response.Write("<td><a>1</a></td>");
            Response.Write("<td><a>2</a></td>");
            Response.Write("<td><a>3</a></td>");
            Response.Write("<td><a>Compliance Summary</a></td>");

            Response.Write("<td align = 'center'>"+name);%> 
            <asp:ImageButton runat="server" id="DeleteButton"  ImageUrl="Images/delete.jpg" 
            CommandArgument='<%# Eval("name") %>' CommandName="ThisBtnClick" text="Delete Me" onclick="DeleteMonth" /> 
            <% Response.Write("</td></tr>");
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:14:12.383

像这样使用......

```
<asp:ImageButton runat="server" id="DeleteButton"  ImageUrl="Images/delete.jpg"      
CommandArgument='<%# Eval("UserName")%>' text="Delete Me" onclick="DeleteMonth" />

 protected void DeleteMonth(object sender, EventArgs e)
 {

**ImageButton btn = ((ImageButton)sender).CommandArgument;** 
  switch (btn.ToString()) 
  { 
        case "ThisBtnClick": 
            Debug.Print("--" + btn.CommandArgument.ToString()); 
            break; 
        case "ThatBtnClick": 
            break; 
   } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:00:10.583

利用`CommandArgument='<%#Eval("name")%>'`

代替`CommandArgument="<%Response.Write(name);%>"`

**编辑**

你用的不是像GridView、FormView或者DataList这样的Data控件吗？如果不是，您必须使用其中之一才能使用 Eval 方法。作为 GridView 的示例，您必须首先绑定 GridView 数据源。

[http://msdn.microsoft.com/en-us/library/aa479353.aspx](http://msdn.microsoft.com/en-us/library/aa479353.aspx)

**或者**

为您的数据库字段声明公共属性。 [如何在 asp.net 中使用 Eval 从数据库中读取字段？](https://stackoverflow.com/questions/8347173/how-can-i-use-eval-in-asp-net-to-read-fields-from-a-database)

Eval 方法采用数据字段的名称并返回一个字符串，该字符串包含数据源中当前记录中该字段的值。

# java - Java EE应用弹性负载均衡的Http请求转发

> ID：10994312
> 
> 赞同：0
> 
> 时间：2012-06-12T09:59:13.500
> 
> 标签：java, servlets, load-balancing

我目前正在研究流应用程序的灵活负载平衡的可能解决方案。我将有几个节点运行将处理内容并将内容流式传输给用户的应用程序。文档分布在任意数量的服务器中，因此一台机器负责为它所托管的文档集提供请求。

因此，我需要某种代理，它知道所请求的文档驻留在哪台服务器上并转发到该服务器。我不想使用`HttpConnection`代理中的一些，然后将该 http 调用的响应包含到原始请求的响应中（这显然是一个瓶颈）。

`POST`所以我的问题是：在分析请求数据（ /`GET`参数、标头或其他）并确定目标服务器后，如何将请求转发到另一台服务器？

是否已经有一个好的负载均衡器允许我使用某种形式的钩子来提供如何确定目标服务器的逻辑（循环显然不起作用）？

我想使用 Tomcat 或类似的东西来托管流应用程序，并且只使用基本的 servlet 堆栈。任何工具或模式的提示都值得赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:15:20.293

一种选择可能是寻找[第 7 层交换](https://devcentral.f5.com/blogs/us/layer-7-switching-load-balancing-layer-7-load-balancing#.USTLRDfw-41)或[URL 负载平衡](http://www.cisco.com/en/US/docs/app_ntwk_services/data_center_app_services/ace_appliances/vA3_1_0/configuration/slb/guide/classlb.html#wp1021430)硬件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-12T11:56:34.413

有几个负载均衡器具有基于请求参数的明确定义的节点选择机制，例如：

*   标题
*   请求 uri
*   查询参数

# iphone - XCode 中的 iPhone jQuery mobile+ PhoneGap .. 带有用于多个视图/页面的多个 html 文件

> ID：10994316
> 
> 赞同：1
> 
> 时间：2012-06-12T09:59:26.237
> 
> 标签：iphone, ios, xcode, jquery-mobile, cordova

直到现在我开发了一个`app with jquery mobile in phonegap.`

它有**多个视图/页面。**

如何使用 jQuery mobile 加载多个页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:12:23.493

以下片段显示了如何加载不同的页面：

```
<a href="#page2" data-role="button">Go to Page2</a> <!-- for page2 in same html -->   
<a href="page2.html" data-role="button">Go to Page2</a> <!-- redirect to different html --> 
```

或者

```
$.mobile.changePage("#page2"); // for page2 in same html
$.mobile.changePage("page2.html"); // to go to different html file 
```

我在 Github 中有一个示例[Android Phonegap 应用程序](https://github.com/dhavaln/phonegap-jqm)，其中包含两个带有两个页面的 html 文件，并将它们连接在一起。

虽然它使用的是 Android，但`/www`iOS XCode 项目的文件结构也将保持不变。因此，您可以复制该文件夹并在 xcode 中运行它。我已经使用 Cordova 1.7.1 在 XCode 上测试了设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:13:22.253

您应该在首先加载的第一页中添加所有 javascripts 和 css 文件；；

例如：我的应用程序的第一页是 index.html；

```
<!DOCTYPE html>
<html>
  <head>
  <title></title>

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0,minimum-scale=1.0, maximum-scale=1.0, user-scalable=no;" />     

       <link rel="stylesheet" href="css/jquery.mobile-1.0.min.css" />  

       <link rel="stylesheet" href="css/jqm-docs.css" />

      <link rel="stylesheet" type="text/css" href="css/jquery.mobile.datebox.min.css" /> 
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile.scrollview.css" /> 

    <link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />    
    <!--
    <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />       

    <!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->

  </head>
  <body>
      <div data-role="page" id="indexPage"  > 
          <div data-role="header"> 
                <a href="#" id="btnExit" data-role="button" data-inline="true"  data-icon="back" >Exit</a>
              <h1>Sample App</h1> 
          </div> 
          <div data-role="content">

          </div> 
      </div> 

      <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
      <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
       <script type="text/javascript" src="js/iscroll.js"></script>  
      <script type="text/javascript" src="js/cordova-1.7.0rc1.js"></script>    
       <script type="text/javascript" src="js/jquery.easing.1.3.js"></script>  
      </script>

      <script type="text/javascript" src="controllers/firstpage.js" ></script>     
      <script type="text/javascript" src="controllers/secondpage.js" ></script>  

       </body>
</html> 
```

和第一页应该是这样的：

```
<!DOCTYPE html>
<html>
  <head>
  <title></title>

  </head>
  <body>

      <div data-role="page" id="firstpage" > 

          <div data-role="header" data-inline="true"> 
              <a href="#"  data-role="button" data-inline="true" id="btnLogOut"  data-icon="back" >Log out</a>

          </div> 

          <div data-role="content" data-content-theme="a"  style="width:97%;">

           the first page

          </div>                   
        <div data-role="footer" data-position="fixed">
              <div data-role="navbar">
                      <ul style='background-color:#313439'>

                      </ul>           
             </div> 
        </div>
      </div> 

  </body>
</html> 
```

还有第一页.cs

$( 文档 ).delegate("#firstpage" ,"pageinit", function() {

```
 /// add your code here                        
}); 
```

# arduino - 最有效的沟通方式（理论）

> ID：10994319
> 
> 赞同：-1
> 
> 时间：2012-06-12T09:59:32.763
> 
> 标签：arduino, performance

我有一个通过 USB 连接到 PC 的 Arduino Uno，我通过串口与 PHP 的温度传感器通信。

目前，温度传感器记录一个值并将其直接通过串行连接发送到 PC。但是，这可能不会在很长一段时间内阅读。因此，我认为这种方法可能效率低下。

我想我可以在 Arduino 上收听来自 PX 的串行消息，在实际检查它并通过串行将消息发送回 PC 之前请求温度，因此变得更有效率，因为它不是每 0.1 秒检查一次温度。

我的问题如下：

1.  从代码效率的角度来看，这实际上值得吗？
2.  有没有比我建议的方法更好的方法来改进这一点？
3.  这些更改是否会提高电池性能（例如，如果我使用不同的通信模型而不是串行通信模型，因此可能需要电池）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:23:07.897

**A1：**由于您已经有了测量温度然后将其发送到 PC 的例程，因此在执行例程之前等待来自 PC 的触发应该没有太多编码要做。

**A2：**总有一种“更好”的方式:)

**A3：**如果您的 µC 没有许多其他任务要执行以使其保持忙碌，那么您绝对可以通过在这些短暂的活动期间让 µC 进入睡眠状态来节省*大量电量 - 在耗尽电池时无论如何都应该这样做。*

# asp.net-mvc - Html 输入 type="image" onclick 事件

> ID：10994321
> 
> 赞同：0
> 
> 时间：2012-06-12T09:59:40.050
> 
> 标签：asp.net-mvc, jquery, asp.net-mvc-2

朋友我有一个问题我们需要做一个可以删除自己的用户控件，我做了但是我们没有明确删除机制，它应该绑定到一个漂亮的图片。下面给出了附加到框架的代码，但不是

```
 $('#delete').bind('click', function () {

    alert('test');
        var urlA = '<%=Url.Action("DeleteMessage","Ticket")%>';
        $.ajax({
            url: urlA,
            type: 'POST',

            data: { idMessage:$(this).parents("div:first").find("input[name='MessageID']").val(),idticket:$('#TicketID').val() },
            success: function (data) {
                alert(data);
            }
        });
    }); 
```

但是当我写这个时，却把我扔到主页有什么问题

```
 $('#delete').live('click', function () 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:12:38.483

```
$("#delete").live("click", function(){
    //code
    $(this).remove(); //delete itself
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:02:48.437

如果您的图像被声明为 input type="image" 那么它将表现得像一个提交按钮并提交您的页面。您应该通过添加 event.preventDefault() 或等效于您的 javascript 函数来防止提交页面的默认行为。

# html - 多个类几乎没有相同的名称

> ID：10994322
> 
> 赞同：1
> 
> 时间：2012-06-12T09:59:53.130
> 
> 标签：html, css

我有一个小问题，似乎互联网上没有地方可以找到答案，除了这里：p

所以我有`html`一些页面`tables`。那些`tables`有线条（像往常一样：p），在那些线条中它们是一些`inputs`. 我想在我的 css 文件中添加一条对所有这些行都有影响的规则。这些行具有`id`几乎相同的语义。

这是我的代码：

```
<table>
    <tr id="tr_creneau_1">
        <td>
            <input />
        </td>
    </tr>
    <tr id="tr_creneau_2">
        <td>
             <input />
        </td>
    </tr>
</table>

<table>
    <tr id="tr_logo_1">
       <td>
           <input />
       </td>
    </tr>
</table> 
```

最后，我想要一个影响 tr_* 行中所有输入的 CSS 规则。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:04:08.503

您可以尝试：

```
tr[id^="tr_"] input 
```

但这是一个 css 3 选择器，它不适用于所有浏览器，或者您可以简单地使用：

```
tr input 
```

或向具有该 ID 的每一行添加一个类并匹配该类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:04:32.263

您始终可以为您希望定位的每个表格行添加一个 CSS 类。例如

```
<table>
    <tr id="tr_creneau_1" class="style-me">
        <td>
            <input />
        </td>
    </tr>
    <tr id="tr_creneau_2"  class="style-me">
        <td>
            <input />
        </td>
    </tr>
    <tr id="somethingElse">
        no input, so no class needed
    </tr>
</table> 
```

然后样式如下：

```
table .style-me input {
    background-color: red;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T10:10:42.963

你可以试试：

```
tr[id^="tr_"] { --your css here-- } 
```

`tr`如果它们的 id 以 . 开头，它将检查所有标签`tr_`。

如果它不需要位于 id 属性的开头，只需位于 random 的某个位置，您可以使用：

```
tr[id*="tr_"] 
```

如果上述方法不起作用，我建议采用基于类的方法。

# jquery - 如何在 html 中访问 jQuery 变量

> ID：10994323
> 
> 赞同：0
> 
> 时间：2012-06-12T10:00:01.517
> 
> 标签：jquery, asp.net-mvc-3, razor

我有一个二维数组（`_BgtArray`），我已将其传递到我的视图中。我想在鼠标悬停时显示特定的数组值。我已将配对值作为 id 传递（如 00,01,02,10,11,12 等..）。鼠标悬停功能是这样的：

**jQuery：**

```
 $('.Cell').hover(function (e) {
                var row = $(this).attr('id').substr(0, 1);
                var column = $(this).attr('id').substr(1, 2);
                $('div#pop-up').html("Budget Allocated: @Model._BgtArray[row,column]");
                $('div#pop-up').show();
        }, function () {
            $('div#pop-up').hide();
        }); 
```

**HTML：**

```
<td class="Cell" id="@k@i" > // k and i are loop variables
              *Some text here*
         </td> 
```

@Model._BgtArray[row,column] 给我一个错误。虽然我很清楚我们不能以这种方式使用 jQuery 变量，但我无法为此找到合适的解决方案。你能建议一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:15:34.457

有几种方法可以给这只猫剥皮。一种方法是为每个单元附加一个特定的事件处理程序，另一种方法是从您的模型构造一个 JS 数组。后者是最简单的。你只需要一些改变。

```
 //initialize array based on your model. E.g. in a for loop or a foreach
 var budget = ...;

 $('.Cell').hover(function () {
                var row = $(this).attr('id').substr(0, 1);
                var column = $(this).attr('id').substr(1, 2);
                $('div#pop-up').text("Budget Allocated: " + budget[row]column]");
                $('div#pop-up').show();
        }, function () {
            $('div#pop-up').hide();
        }); 
```

# google-chrome-extension - 升级或安装后重新注入 Chrome 扩展内容脚本

> ID：10994324
> 
> 赞同：55
> 
> 时间：2012-06-12T10:00:04.793
> 
> 标签：google-chrome-extension, browser-extension, content-script

在安装或升级我正在使用的 Chrome 扩展程序后，不会重新注入内容脚本（在清单中指定），因此需要刷新页面才能使扩展程序正常工作。有没有办法强制再次注入脚本？

我相信我可以通过从清单中删除它们然后处理要在后台页面中注入哪些页面以编程方式再次注入它们，但这不是一个好的解决方案。

我不想自动刷新用户的标签，因为这可能会丢失他们的一些数据。安装或升级扩展程序时，Safari 会自动刷新所有页面。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-22T08:23:56.067

有一种方法可以让内容脚本繁重的扩展在升级后继续运行，并使其在安装后立即运行。

# 安装/升级

install 方法是简单地遍历所有窗口中的所有选项卡，并以编程方式将一些脚本注入到具有匹配 URL 的选项卡中。

显然，您必须在 manifest.json 中声明的[后台页面](https://developer.chrome.com/extensions/background_pages)或[事件页面](https://developer.chrome.com/extensions/event_pages)脚本中执行此操作：

```
"background": {
    "scripts": ["background.js"]
}, 
```

背景.js：

```
// Add a `manifest` property to the `chrome` object.
chrome.manifest = chrome.runtime.getManifest();

var injectIntoTab = function (tab) {
    // You could iterate through the content scripts here
    var scripts = chrome.manifest.content_scripts[0].js;
    var i = 0, s = scripts.length;
    for( ; i < s; i++ ) {
        chrome.tabs.executeScript(tab.id, {
            file: scripts[i]
        });
    }
}

// Get all windows
chrome.windows.getAll({
    populate: true
}, function (windows) {
    var i = 0, w = windows.length, currentWindow;
    for( ; i < w; i++ ) {
        currentWindow = windows[i];
        var j = 0, t = currentWindow.tabs.length, currentTab;
        for( ; j < t; j++ ) {
            currentTab = currentWindow.tabs[j];
            // Skip chrome:// and https:// pages
            if( ! currentTab.url.match(/(chrome|https):\/\//gi) ) {
                injectIntoTab(currentTab);
            }
        }
    }
}); 
```

### 清单V3

清单.json：

```
"background": {"service_worker": "background.js"},
"permissions": ["scripting"],
"host_permissions": ["<all_urls"], 
```

这些 host_permissions 应该与内容脚本的`matches`.

背景.js：

```
chrome.runtime.onInstalled.addListener(async () => {
  for (const cs of chrome.runtime.getManifest().content_scripts) {
    for (const tab of await chrome.tabs.query({url: cs.matches})) {
      chrome.scripting.executeScript({
        target: {tabId: tab.id},
        files: cs.js,
      });
    }
  }
}); 
```

这是一个不处理帧的简化示例。您可以使用[getAllFrames](https://developer.chrome.com/docs/extensions/reference/webNavigation/#method-getAllFrames) API 并自己匹配 URL，请参阅[匹配模式](https://developer.chrome.com/extensions/match_patterns)的文档。

#### 历史琐事

在古老的 Chrome 26 和更早的版本中，内容脚本可以恢复与后台脚本的连接。它已于 2013 年修复[http://crbug.com/168263](http://crbug.com/168263)。您可以在此答案的早期版本中看到此技巧的示例。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-20T18:11:05.613

强制注入内容脚本*而不刷新页面*的唯一方法是通过程序注入。

您可以使用 chrome tabs API 获取所有选项卡并将代码注入其中。例如，您可以将清单版本存储在本地存储中，并且每次检查清单版本是否是旧版本（在后台页面中），如果是，您可以获得所有活动选项卡并以编程方式注入您的代码，或者任何其他可以让您确保扩展已更新。

使用以下方式获取所有选项卡：
[chrome.tabs.query](http://code.google.com/chrome/extensions/tabs.html)

并将您的代码注入所有页面
`chrome.tabs.executeScript(tabId, {file: "content_script.js"});`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-04-07T06:31:49.803

在你的后台脚本中试试这个。很多老方法现在已经被弃用了，所以我重构了代码。对于我的使用，我只安装单个 content_script 文件。如果需要，您可以遍历 `chrome.runtime.getManifest().content_scripts`数组以获取所有 .js 文件。

```
chrome.runtime.onInstalled.addListener(installScript);

function installScript(details){
    // console.log('Installing content script in all tabs.');
    let params = {
        currentWindow: true
    };
    chrome.tabs.query(params, function gotTabs(tabs){
        let contentjsFile = chrome.runtime.getManifest().content_scripts[0].js[0];
        for (let index = 0; index < tabs.length; index++) {
            chrome.tabs.executeScript(tabs[index].id, {
                file: contentjsFile
            },
            result => {
                const lastErr = chrome.runtime.lastError;
                if (lastErr) {
                    console.error('tab: ' + tabs[index].id + ' lastError: ' + JSON.stringify(lastErr));
                }
            })
        }
    });    
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-04T20:45:13.657

Chrome 添加了一种方法来监听扩展的安装或升级事件。当此类事件发生时，可以重新注入内容脚本。 [https://developers.chrome.com/extensions/runtime#event-onInstalled](https://developers.chrome.com/extensions/runtime#event-onInstalled)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-28T04:52:09.050

由于[https://bugs.chromium.org/p/chromium/issues/detail?id=168263](https://bugs.chromium.org/p/chromium/issues/detail?id=168263)，您的内容脚本和后台脚本之间的连接被切断。正如其他人所提到的，解决此问题的一种方法是重新注入内容脚本。[这个 StackOverflow 答案](https://stackoverflow.com/a/25844023/1394731)中详细介绍了粗略的概述。

主要的棘手部分是在注入新的内容脚本之前有必要“破坏”您当前的内容脚本。销毁可能非常棘手，因此减少必须销毁的状态量的一种方法是制作一个小的可重复注入脚本，该脚本通过 DOM 与您的主要内容脚本对话。

* * *

## 回答 #6

> 赞同：-13
> 
> 时间：2012-10-31T17:34:06.430

你不能`?ver=2.10`在你升级的css或js末尾添加吗？

```
"content_scripts": [ {
      "css": [ "css/cs.css?ver=2.10" ],
      "js": [ "js/contentScript.js?ver=2.10" ],
      "matches": [ "http://*/*", "https://*/*" ],
      "run_at": "document_end"
   } ], 
```

# c - Openssl 编译错误

> ID：10994327
> 
> 赞同：10
> 
> 时间：2012-06-12T10:00:26.873
> 
> 标签：c, linux, unix, openssl, debian

我使用 openssl 库在 C 代码中包含了以下头文件。

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <time.h>
#ifdef __VMS
#include <in.h>
#include <inet.h>
#else
#include <netinet/in.h>
#include <arpa/inet.h>
#endif
#include <openssl/crypto.h>
#include <openssl/ssl.h>
#include <openssl/err.h> 
```

然后我使用`gcc -o openssl -lssl -lcrypt openssl.c` 在我的办公室编译的程序，这段代码编译并运行良好，但在我家的系统中（办公室都是 linux-debian 6，家里是 Ubuntu 12.04），它给出了以下错误：

```
/tmp/ccZcmLk4.o: In function `main':
server.c:(.text+0x3d): undefined reference to `SSL_library_init'
server.c:(.text+0x42): undefined reference to `SSL_load_error_strings'
server.c:(.text+0x47): undefined reference to `SSLv3_method'
server.c:(.text+0x57): undefined reference to `SSL_CTX_new'
server.c:(.text+0x6f): undefined reference to `ERR_print_errors_fp'
server.c:(.text+0x97): undefined reference to `SSL_CTX_use_certificate_file'
server.c:(.text+0xa8): undefined reference to `ERR_print_errors_fp'
server.c:(.text+0xd0): undefined reference to `SSL_CTX_use_PrivateKey_file'
server.c:(.text+0xe1): undefined reference to `ERR_print_errors_fp'
server.c:(.text+0xf9): undefined reference to `SSL_CTX_check_private_key'
server.c:(.text+0x154): undefined reference to `SSL_CTX_load_verify_locations'
server.c:(.text+0x165): undefined reference to `ERR_print_errors_fp'
server.c:(.text+0x18d): undefined reference to `SSL_CTX_set_verify'
server.c:(.text+0x1a1): undefined reference to `SSL_CTX_set_verify_depth'
server.c:(.text+0x397): undefined reference to `SSL_new'
server.c:(.text+0x3c2): undefined reference to `SSL_set_fd'
server.c:(.text+0x3ce): undefined reference to `SSL_accept'
server.c:(.text+0x3e6): undefined reference to `ERR_print_errors_fp'
server.c:(.text+0x3fe): undefined reference to `SSL_get_current_cipher'
server.c:(.text+0x406): undefined reference to `SSL_CIPHER_get_name'
server.c:(.text+0x42e): undefined reference to `SSL_get_peer_certificate'
server.c:(.text+0x455): undefined reference to `X509_get_subject_name'
server.c:(.text+0x46d): undefined reference to `X509_NAME_oneline'
server.c:(.text+0x4b1): undefined reference to `X509_get_issuer_name'
server.c:(.text+0x4c9): undefined reference to `X509_NAME_oneline'
server.c:(.text+0x50d): undefined reference to `X509_free'
server.c:(.text+0x593): undefined reference to `SSL_write'
server.c:(.text+0x5ab): undefined reference to `ERR_print_errors_fp'
server.c:(.text+0x5d3): undefined reference to `SSL_read'
server.c:(.text+0x5eb): undefined reference to `ERR_print_errors_fp'
collect2: ld returned 1 exit status 
```

我知道这是由于我的家用 PC 中缺少某些库。但是谁能告诉我需要为此安装哪些库？提前致谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-12T10:04:34.147

将库放在源文件之后：

```
gcc -o openssl openssl.c -lssl -lcrypto 
```

见： http: [//www.network-theory.co.uk/docs/gccintro/gccintro_18.html](http://www.network-theory.co.uk/docs/gccintro/gccintro_18.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T02:58:26.890

将文件名放在 -l 选项之前

# javascript - JavaScript - 头部、主体还是 jQuery？

> ID：10994335
> 
> 赞同：62
> 
> 时间：2012-06-12T10:00:50.923
> 
> 标签：javascript, jquery, html

这个问题只是为了澄清一些事情。以前有人问过这样的问题，这会将它们全部归结为一个问题 - JavaScript 应该在 HTML 文档中的什么位置，或者更重要的是，它是否重要？所以，我要问的一件事是，

```
<head>
<script type="text/javascript">
alert("Hello world!");
</script>
</head> 
```

完全不同（在功能方面）

```
<body>
<!-- Code goes here -->
<script type="text/javascript">
alert("Hello world!");
</script>
</body> 
```

更重要的是，我想专注于以任何方式修改或使用 DOM 元素的 JS。所以我知道如果你在你的身体里放了一些像`document.getElementById("test").innerHTML = "Hello world!"`以前一样的东西`<element id="test"></element>`，那么它就不会起作用，因为身体是从上到下加载的，首先加载 JS，然后它会继续尝试操作一个没有的元素还存在。所以它应该，就像上面一样，要么进入标签，要么`<head>`就在`</body>`标签之前。问题是，除了组织和排序之外，选择其中的哪一个是否重要，如果是，以什么方式？

当然，还有第三种方式——jQuery方式：

```
$(document).ready(function(){ /*Code goes here*/ }); 
```

这样，将代码放在正文中的哪个位置都无关紧要，因为它只会在所有内容加载后执行。这里的问题是，是否值得导入一个巨大的 JS 库*，只是*为了使用一种可以用准确放置脚本来替换的方法？我只是想在这里澄清一下，如果您想回答，请继续！摘要：不同类型的脚本应该放在哪里 - 头部或身体，和/或重要吗？jQuery 是否值得仅仅为 ready 事件？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-06-12T10:03:58.283

最推荐的方法是把它放在`</body>`标签之前。[雅虎性能文章](http://developer.yahoo.com/performance/rules.html)还建议除了雅虎和谷歌的[YSlow](http://yslow.org/)和[Page Speed](https://developers.google.com/speed/pagespeed/%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B)插件之外。

引用上面链接的雅虎文章：

> **脚本引起的问题是它们会阻止并行下载。HTTP/1.1 规范建议浏览器每个主机名并行下载不超过两个组件。**如果您从多个主机名提供图像，则可以同时进行两次以上的下载。但是，在下载脚本时，浏览器不会启动任何其他下载，即使在不同的主机名上也是如此。

当您将脚本放入`<head>`标记中时，浏览器会选择它们，从而保持其他内容处于暂停状态，直到加载脚本，用户会觉得页面加载缓慢。这就是为什么你应该把脚本放在底部。

至于：

```
$(document).ready(function(){/*Code goes here*/}); 
```

当 DOM 可用并准备好被操作时，它会被触发。如果将代码放在最后，则不一定需要它，但通常需要它，因为您想在DOM 可用时*立即执行某些操作。*

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-06-12T10:05:13.027

尽管通常的做法是，在 中放置`script`标签`head`通常不是一个好主意，因为它会阻止页面的呈现，直到这些脚本被下载和处理（除非您使用`async`or`defer`和支持它们的浏览器）。

通常的建议是将标签放在`script`标签的最后`body`，例如，就在之前`</body>`。这样，脚本上方的所有 DOM 元素都可以访问（参见下面的链接）。需要注意的一点是，您的页面至少已部分渲染但您的脚本尚未处理（尚未），并且如果用户开始与页面交互，他们可能会做一些事情来引发一个事件您的脚本还没有时间挂钩。所以你需要意识到这一点。*这是渐进增强*的原因之一，即页面可以在没有 JavaScript 的情况下工作，但使用它会更好。如果您正在做的页面/应用程序根本无法在没有 JavaScript 的情况下运行，您可能会包含一些*内联的*`body`标记顶部的脚本（例如， `<script>minimal code here</script>`），它钩住任何冒泡事件，`document.body`并在加载脚本时将它们排队等待操作，或者只是要求用户等待。

使用 jQuery 之类的特性`ready`很好，但在库之外并不是必需的（例如，如果您可以控制`script`标签的位置，通常不需要使用它；但如果您正在编写 jQuery 插件 -因为需要在加载时做一些事情[这是相对罕见的，通常他们只是等待被调用]，你通常会这样做）。

更多阅读：

*   [YUI 网站加速最佳实践](http://developer.yahoo.com/performance/rules.html)
*   [Google 何时准备好 DOM](http://groups.google.com/group/closure-library-discuss/browse_thread/thread/1beecbb5d6afcb41)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-12T10:46:23.770

可以通过执行以下操作并行下载 javascript：

```
(function () {
    var ele = document.createElement('script');
    ele.src = "https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js";
    ele.id = "JQuery";
    ele.onload = function () {
        //code to be executed when the document has been loaded
    };
    document.getElementsByTagName('head')[0].appendChild(ele);
})(); 
```

在示例中，它从 Google 下载缩小的 JQuery v1.7.2，这是一种下载 JQuery 的好方法，因为从 Google 下载它就像使用 CDN，如果用户访问过使用相同文件的页面，它可能会被缓存并因此不需要下载

这里有一个非常好的谷歌技术讨论[http://www.youtube.com/watch?v=52gL93S3usU&feature=plcp](http://www.youtube.com/watch?v=52gL93S3usU&feature=plcp)

# windows - Qt - 通过双击打开自定义文件

> ID：10994339
> 
> 赞同：2
> 
> 时间：2012-06-12T10:01:03.143
> 
> 标签：windows, qt, loading

我有一个程序和一个包含一些信息行的 .l2p 文件。我已经运行了一个注册表文件：

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\.l2p\DefaultIcon]
@="\"C:\\Program Files\\ToriLori\\L2P.exe\",0"

[HKEY_CLASSES_ROOT\.l2p\shell\Open\command]
@="\"C:\\Program Files\\ToriLori\\L2P.exe\" \"%1\"" 
```

当我双击 .l2p 文件时，程序启动但不加载文件。我该怎么做才能使其正确加载？示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T12:21:19.677

当您双击文件时，文件名将作为命令行参数传递给相关程序。您必须解析命令行，获取文件名并打开它（如何做到这一点取决于您的程序如何工作）。

```
#include <iostream>

int main(int argc, char *argv[])
{
    for (int i = 1; i < argc; ++i) {
        std::cout << "The " << i << "th argument is " << argv[i] << std::endl;
    }
} 
```

如果你从命令行运行这个程序：

```
>test.exe "path/to/file" "/path/to/second/file"
The 1th argument is path/to/file
The 2th argument is /path/to/second/file 
```

在 Qt 中，如果您创建 QApplication，您还可以通过[QCoreApplications::arguments()](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#arguments)访问命令行参数。

您可能希望在创建主窗口后加载文件。你可以这样做：

```
#include <QApplication>
#include <QTimer>

#include "MainWindow.h"

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    MainWindow window;

    QTimer::singleShot(0, & window, SLOT(initialize()));

    window.show();

    return app.exec();
} 
```

这样`MainWindow::initialize()`，一旦事件循环开始，插槽（您必须定义）就会被调用。

```
void MainWindow::initialize()
{
    QStringList arguments = QCoreApplication::arguments();
    // Now you can parse the arguments *after* the main window has been created.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:14:34.993

如果我正确理解了您的问题，`L2P.exe`您是否创建了一个 Qt 程序，并且您希望将传递的参数作为指定要打开的文件来处理。如果是这种情况，您只需要在您的`main()`方法中读取该参数并处理它。（这不是自动发生的事情。）如下所示，尽管您显然想添加一些错误检查：

```
int main(int argc, char *argv[]) {
  QApplication a(argc, argv);

  const QStringList arguments = a.arguments();

  // The final argument is assumed to be the file to open.
  if (arguments.size() > 1 && QFile::exists(arguments.last())) {
    your_app_open(arguments.last());
  }

  // ... etc.
} 
```

# mongodb - 在 Mongo 的数据上运行 Map/Reduce 的最佳方法是什么？

> ID：10994340
> 
> 赞同：12
> 
> 时间：2012-06-12T10:01:04.090
> 
> 标签：mongodb, hadoop, amazon-s3, amazon-web-services, mapreduce

我有一个托管在云（MongoLab 或 MongoHQ）中的大型 Mongo 数据库（100GB）。我想对数据运行一些 Map/Reduce 任务来计算一些昂贵的统计数据，并且想知道完成这项工作的最佳工作流程是什么。理想情况下，我想使用 Amazon 的 Map/Reduce 服务来做到这一点，而不是维护我自己的 Hadoop 集群。

将数据从数据库复制到 S3 是否有意义。然后在上面运行 Amazon Map/Reduce？或者有更好的方法来完成这项工作。

此外，如果再往下走，我可能想像每天一样频繁地运行查询，所以 S3 上的数据需要反映 Mongo 中的内容，这会使事情复杂化吗？

任何建议/战争故事都会非常有帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T23:12:41.713

Amazon S3 提供了一个名为 S3DistCp 的实用程序，用于将数据传入和传出 S3。这通常在运行 Amazon 的 EMR 产品并且您不想托管自己的集群或用尽实例来存储数据时使用。S3 可以为您存储所有数据，EMR 可以从 S3 读取/写入数据。

但是，传输 100GB 需要时间，如果您计划多次执行此操作（即不止一次的批处理作业），这将是您处理中的一个重大瓶颈（尤其是在数据预计会增长的情况下）。

看起来您可能不需要使用 S3。Mongo 已经实现了一个适配器来在 MongoDB 上实现 map reduce 作业。[http://blog.mongodb.org/post/24610529795/hadoop-streaming-support-for-mongodb](http://blog.mongodb.org/post/24610529795/hadoop-streaming-support-for-mongodb)

这看起来很吸引人，因为它允许您在 python/js/ruby 中实现 MR。

我认为这种 mongo-hadoop 设置比将 100GB 数据复制到 S3 更有效。

[更新：这里](http://www.cubrid.org/blog/dev-platform/log-analysis-system-using-hadoop-and-mongodb/)使用带有 mongo 的 map-reduce 的示例。

# ruby-on-rails - 如果第一个键不存在，我如何在哈希中使用另一个键值，例如 ruby /rails 中的某种类型的后备？

> ID：10994342
> 
> 赞同：0
> 
> 时间：2012-06-12T10:01:17.813
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

基本上我有一个关注按钮，当点击页面刷新时，我会在适当的位置显示一个取消关注按钮。下面是我用来呈现所需特定表单的代码：

**follow_forms 部分：**

```
<% unless current_user?(@user) %>
  <% if current_user.following?(@user) %>
    <%= render 'relationships/partials/unfollow' %>
  <% else %>
    <%= render 'relationships/partials/follow' %>
  <% end %>
<% end %> 
```

任何我将表单更改为 ajax 表单，因为我不希望页面刷新并且表单提交成功后，我想用取消关注按钮/表单替换关注按钮/表单。这不是直截了当的，因为一次只显示一个表单，所以无论如何我都不能使用我的 jquery 选择器来找到这个表单。

我决定做的是创建一个新的操作，以这种方式呈现 follow_form 部分，以便我可以使用我的 jquery 选择器操作适当的表单。

**新动作：**

```
class RelationshipsController < ApplicationController

  def get_follow_form
    respond_to do |format|
      format.html { render :partial => 'relationships/partials/follow_form_ajax' }
    end
  end
end 
```

现在的问题是我无权访问 @user 实例变量。这无关紧要，因为我可以通过 jquery 成功数据获取刚刚被关注的用户，然后将其作为新 ajax 调用中的数据传递给 get_follow_form_url，然后将该信息作为局部变量传递给局部变量。

我仍然有@user 实例变量不可用的问题。这让我想到了我的问题。

如果实例变量不是 nil/不存在，我该如何使用另一个值？

**以下表格：**

```
<%= form_for current_user.relationships.build(:followed_id => @user.id), :remote => true do |f| %>
<%= f.hidden_field :followed_id %>
<%= f.submit "Follow", :class => 'followButton' %>
<% end %> 
```

我可以做这样的事情吗

```
 :followed_id => @user.id <-if this doesn't exist use this-> user.id 
```

还有其他方法可以解决这个问题，例如创建仅用于整个情况的新部分或创建一些混乱的 if 语句，但我觉得创建重复表单应该是我最后的选择。

我期待你的解决方案谢谢

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:09:42.263

有一个非常简单的方法可以做到这一点，假设你有你的“后备”ID：

```
:followed_id => @user.present? ? @user.id : fallback_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:16:51.063

使用类似[andand gem](https://github.com/raganwald/andand)或 just `try`and 一个逻辑表达式：

```
:followed_id => @user.andand.id || user.id 
```

即使没有，您也可以使用相同的逻辑，当然不需要多个部分：

```
:followed_id => (@user && @user.id) || user.id 
```

但是正如 Frederick 所说，如果您已经为该对象设置了替换值，您就不能设置它吗？

# iphone - 如何在iphone中连接三个字符串

> ID：10994343
> 
> 赞同：8
> 
> 时间：2012-06-12T10:01:20.487
> 
> 标签：iphone, xcode

我有三个字符串，我希望它们连接，但它们没有连接。我正在使用此代码。

我希望我的最后一个字符串显示如下：

> Cerenia 结果 2012 年 6 月 12 日.pdf

像这样

```
NSString *fileName = @"Cerenia Results";

NSString* str = [formatter stringFromDate:date]; 

NSString*extention=@".pdf";

NSString * strRR = [NSString stringWithFormat:@"Cerenia Results_%@ [%@].pdf", extension]; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-12T10:05:00.577

**一般情况**：连接您应该使用的所有三个字符串

```
NSString * strRR = [NSString stringWithFormat:@"%@%@%@", fileName, str, extension]; 
```

**你的情况**：

您可以添加您喜欢的任何格式，例如在两者之间插入字符（以获得您之后的结果 >> Cerenia Results 12Jun 2012.pdf）

```
[formatter setDateFormat:@"ddMMMyyyy"]
NSString* fileName = @"Cerenia Results";
NSString* str = [formatter stringFromDate:date];
NSString* extension = @"pdf";
NSString* strRR = [NSString stringWithFormat:@"%@ %@.%@", fileName, str, extension]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:09:02.790

做这个：

```
 [formatter setDateFormat:@"ddMMMyyyy"]
 NSString* str = [formatter stringFromDate:date]; 
 NSString * strRR = [NSString stringWithFormat:@"Cerenia Results %@.pdf",str]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:53:25.423

您可以使用“ **stringByAppendingFormat** ”附加字符串 ...

```
[formatter setDateFormat:@"ddMMMyyyy"]
NSString* fileName = @"Cerenia Results";
NSString* str = [formatter stringFromDate:date];
NSString* extension = @".pdf";
NSString* strRR = [[fileName stringByAppendingFormat:str]stringByAppendingFormat:extension]; 
```

# ruby-on-rails - 尽管 rake 路线中有一条路线，但没有路线匹配

> ID：10994344
> 
> 赞同：7
> 
> 时间：2012-06-12T10:01:20.910
> 
> 标签：ruby-on-rails, routes

我觉得奇怪`ActionController::RoutingError: No route matches`。可以生成路由：

```
> r = Rails.application.routes
> r.generate controller: :items, action: :index, user_id:1
  => ["/users/1/items", {}] 
```

它位于`rake routes`：

```
$ rake routes
     user_items GET    /users/:user_id/items(.:format)          items#index
                POST   /users/:user_id/items(.:format)          items#create
  new_user_item GET    /users/:user_id/items/new(.:format)      items#new
 edit_user_item GET    /users/:user_id/items/:id/edit(.:format) items#edit
      user_item GET    /users/:user_id/items/:id(.:format)      items#show
                PUT    /users/:user_id/items/:id(.:format)      items#update
                DELETE /users/:user_id/items/:id(.:format)      items#destroy
(...) 
```

但我不承认：

```
r.recognize_path "/users/1/items"
ActionController::RoutingError: No route matches "/users/1/items" 
```

我的`routes.rb`：

```
Sumo2::Application.routes.draw do
  resources :users do
    resources :items
  end
  (...)
end 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T10:18:44.847

你有`ItemsController`定义类吗？没有它，您的路线将不会被识别。也许你拼错了。

```
irb(main):001:0> r = Rails.application.routes
=> #<ActionDispatch::Routing::RouteSet:0x1cbba00>
irb(main):002:0> r.recognize_path "/users/1/items"
ActionController::RoutingError: No route matches "/users/1/items"
        ... errors ...
irb(main):003:0> class ItemsController; end # <----------<
=> nil
irb(main):004:0> r.recognize_path "/users/1/items"
=> {:action=>"index", :controller=>"items", :user_id=>"1"} 
```

# c# - 将 Ruby 的时间转换为 C#

> ID：10994348
> 
> 赞同：6
> 
> 时间：2012-06-12T10:01:31.460
> 
> 标签：c#, ruby, function

我正在尝试将 Ruby 的[时间](http://www.techotopia.com/index.php/Looping_with_for_and_the_Ruby_Looping_Methods#The_Ruby_times_Method)转换为 C#，但我现在卡住了。

这是我的尝试：

```
public static class Extensions
{
    public static void Times(this Int32 times, WhatGoesHere?)
    {
        for (int i = 0; i < times; i++)
            ???
    }
} 
```

我是 C# 新手，也许这个应该很容易，而且我知道我想使用 Extensionmethods。但是由于函数不是 C# 中的“头等舱”，所以我现在被困住了。

那么，我应该为*WhatGoesHere 使用什么参数类型？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T10:02:37.903

您可以使用[Action](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)类型：

```
public static class Extensions
{
    public static void Times(this Int32 times, Action<Int32> action)
    {
        for (int i = 0; i < times; i++)
            action(i);
    }
}

class Program
{
    delegate void Del();

    static void Main(string[] args)
    {
        5.Times(Console.WriteLine);
        // or
        5.Times(i => Console.WriteLine(i));
    }
} 
```

还可以在[这里查看](http://msdn.microsoft.com/en-us/library/ms173171%28v=vs.80%29.aspx)以了解代表。

# eclipse - 如何将移动的 git 存储库与其在 Egit 中的原始项目重新连接？

> ID：10994353
> 
> 赞同：4
> 
> 时间：2012-06-12T10:01:44.363
> 
> 标签：eclipse, git, repository, egit

我在 Eclipse 工作区中有许多项目。一个项目与一个 git 存储库相连。这是原始目录/项目结构：

```
Eclipse_workspace
  Eclipse_workspace/Project1
    Eclipse_workspace/Project1/.git
  Eclipse_workspace/Project2 
```

[在阅读了将 git 存储库保留在工作区（此处](http://wiki.eclipse.org/EGit/User_Guide#Considerations_for_Git_Repositories_to_be_used_in_Eclipse)）中项目的父目录中可能引起的复杂性之后，我决定最好将存储库移到工作区之外。这是修改后的结构：

```
Eclipse_workspace
  Eclipse_workspace/Project1
    Eclipse_workspace/Project1
  Eclipse_workspace/Project2
.git
  .git/Project1 
```

在“Git 存储库”视图中，我重新添加了存储库。我认为通过更改一些文件路径设置将存储库重新连接到“Project1”会很简单。我发现从 Project1 的属性中这是不可能的（右键单击项目-> 属性）。我注意到在“共享项目”向导中，您可以连接到“现有存储库”。因此，我断开了项目与现在不存在的存储库的连接，并尝试使用“共享项目”向导重新连接它。但是，尽管存储库显示在“Git 存储库”视图中，但我无法选择它。我单击“创建”按钮并尝试输入文件路径，但这给了我一个错误，指出目录“非空”。

所以我现在陷入困境，因为似乎没有其他选择。如何重新连接此存储库？我对这有多复杂感到惊讶，我一定是在做一些明显错误的事情。我真的需要继续做一些工作，而与 Egit 混在一起占用了我所有的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:18:13.377

我遇到了同样的问题，这是我的解决方案：

1.  将您的存储库（包括 .git 目录和工作目录）复制到您的新位置。
2.  在 Eclipse 的“Git Repositories”视图中添加新的存储库。
3.  然后导入您的“来自 Git 的项目”。

关键是：尽量不要重新连接，只需将新存储库中的项目导入 Eclipse 工作区即可。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-20T00:41:11.277

*   转到您的项目目录
*   打开控制台 - 键入 cmd
*   运行 git init
*   用 - git branch 检查你的分支
*   更改分支 - git checkout

注意：您需要在您的计算机中安装一个 git 工具。

它对我有用。

# unix - 遍历目录中的文件夹而不列出

> ID：10994354
> 
> 赞同：0
> 
> 时间：2012-06-12T10:01:52.223
> 
> 标签：unix, loops, directory

我在一个名为 TestJ 的目录中。在此目录中，我有许多文件夹，例如 MSC1，MSC2 ... MSC19，HLR1，HLR2 ..，SGSN1，SGSN2 ..。现在每个目录中都有一个脚本 ALARMS.sh。我想要做的是遍历所有这些文件夹并在每个文件夹中执行 ALARM.sh 。我现在的代码所做的是使用它

```
ls -d SGSN* > temp.txt
while read sgsn_line;do
    echo $sgsn_line
    cd $sgsn_line
    ALARMS.sh
    cd ..
done < temp.txt

ls -d HLR* > temp.txt
while read hlr_line;do
    echo $hlr_line
    cd $hlr_line
    ALARMS.sh
    cd ..
done < temp.txt

ls -d MSC* > temp.txt
while read msc_line;do
    echo $msc_line
    cd $msc_line
    ALARMS.sh
    cd ..
done < temp.txt
rm temp.txt 
```

但我想做同样的工作而不列出任何文件中的文件夹。例如，我们可以使用`for file in *.txt`. 我希望能够对文件夹（仅文件夹）做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:16:53.707

**像下面这样使用...**

```
for sgsn_line in `ls -ltr SGSN* | grep ^d | awk '{print $NF}'`;do
    echo $sgsn_line
    cd $sgsn_line
    ALARMS.sh
    cd ..
done

.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:55:16.437

如果您的版本`find`支持该`-execdir`选项，最简单的做法是：

```
find . -name ALARMS.sh -type f -execdir {} \; 
```

# html - CSS：改变浮动列结构布局？

> ID：10994355
> 
> 赞同：1
> 
> 时间：2012-06-12T10:01:54.293
> 
> 标签：html, css, css-float

我有三列，其中一列宽度为 50%，另外两列是宽度为 25% 的侧边栏。

**HTML**

```
<article></article>
<aside id="s1"></aside>
<aside id="s2"></aside> 
```

**CSS**

```
article {
    width:50%; 
    float:left;
}

aside {
    width:25%;
    float:left;
} 
```

维护 HTML 结构，是否有可能以某种方式浮动它们以实现不同的布局 - 我想`#s1`在文章的左侧和文章`#s2`的右侧。

**这可能与 CSS3 吗？**这是[上面代码的jsFiddle](http://jsfiddle.net/UaFFP/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:03:05.260

如果不改变页面的结构，就没有办法做到这一点——CSS 并不意味着用于结构目的。它完全违背了语义标记的原则。

您可以轻松地重新构建页面，如本[示例](http://jsfiddle.net/UaFFP/1/)中使用 HTML 更改结构。或者，@sandeep 似乎有一个很好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T12:01:33.437

带有 css 的两列表结构示例

```
#content {

  -webkit-column-count: 2;
  -webkit-column-rule: 1px solid #bbb;
  -webkit-column-gap: 2em;

  -moz-column-count: 2;
  -moz-column-rule: 1px solid #bbb;
  -moz-column-gap: 2em;

  column-count: 2;
  column-rule: 1px solid #bbb;
  column-gap: 2em;

  display: block;
}​ 
```

这是一个现场演示。

[http://playground.html5rocks.com/#columns](http://playground.html5rocks.com/#columns)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:04:52.123

你可以用`display:table`这个。像这样写：

```
article {
    background:#f0f0f0;
    width:50%;
    display:table-cell;
}

aside {
    width:25%;
    display:table-cell;
} 
```

**HTML**

```
<aside id="s1"></aside>
<article></article>
<aside id="s2"></aside> 
```

检查这个[http://jsfiddle.net/UaFFP/2/](http://jsfiddle.net/UaFFP/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T10:08:19.357

您希望 S1 位于文章的左侧 - 所以，将其放在首位

```
<aside id="s1"></aside> 
```

那么文章

```
<article></article> 
```

然后，在右边 - 你想要“s2” - 所以，把它放在最后

```
<aside id="s2"></aside> 
```

尽管对 CSS 进行一些更改会很好 - 但它可以在不对 CSS 进行任何更改的情况下工作。

# jquery - 如何克隆 jQuery 更改的 html

> ID：10994358
> 
> 赞同：0
> 
> 时间：2012-06-12T10:02:07.157
> 
> 标签：jquery, quicksand

我正在尝试使用[此处的原始流沙代码](http://razorjack.net/quicksand/demos/one-set-clone.html)

```
 $(function() {

 // bind radiobuttons in the form
 var $filterType = $('#filter input[name="type"]');
 var $filterSort = $('#filter input[name="sort"]');

 // get the first collection
 var $applications = $('#applications');

 // clone applications to get a second collection
 var $data = $applications.clone(); 
```

一切正常，除了 $('#applications') 中的元素已使用 jQuery 进行了轻微更改（例如，一些 div 元素已被隐藏，一些类已被交换）。使用 clone() 我只能设法克隆原始源代码。

有没有办法克隆 $('#applications') 的“实时”版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:56:28.750

我真的不明白你，但我看到你谈论的 div 包含更改的 html 代码，而未应用的更改`$data`是 的克隆`$applications`，我想你可以试试这段代码，看看这是否符合你的要求：

后`var $data = $applications.clone();`

添加这些行：

```
$('#applications').change(function() {
    $applications = $('#applications');
    $data = $applications.clone();
}); 
```

如果我的理解是正确的，我希望这是有效的。

**编辑：**操作我忘了说，当你改变 div 时添加以下代码：

```
$("#applications").change(); 
```

此代码将触发更改事件，因此请刷新克隆对象。

# windows-phone-7 - 如何使用 wp7 中的可观察集合绑定列表框项目？

> ID：10994359
> 
> 赞同：0
> 
> 时间：2012-06-12T10:02:08.740
> 
> 标签：windows-phone-7

我的代码：

```
 ObservableCollection<SampleCheckedData> interestrates = new ObservableCollection<SampleCheckedData>();
 XDocument xmlDocu = XDocument.Load(new MemoryStream(System.Text.UTF8Encoding.UTF8.GetBytes(result)));

                interestrates = (from rts in xmlDocu.Descendants("Friend")

                                 select new SampleCheckedData
                                 {

                                     Id = (string)rts.Element("userid"),
                                     Name = (string)rts.Element("name"),
                                     Icon = (string)rts.Element("imageurl"),
                                     VisibleStatus = (string)rts.Element("visiblestatus"),
                                     AppStatus = (string)rts.Element("loginstatus"),

                                     imgBubble =bitmapRed,
                                 }).ToList<SampleCheckedData>(); 
```

然后出现错误，因为不能像这样将 system.collection.generic.list 隐式转换为 system.collection.observablecollection。如何使用可观察集合绑定列表框项？

编辑：

```
Button b = sender as Button;
                    var res = interestrates.Where(a => a.Id.Equals(((System.Windows.FrameworkElement)(e.OriginalSource)).Tag)).ToList();
                    if (res.Count == 1)
                        interestrates.Remove(res.First());
                    interestrates = new ObservableCollection<SampleCheckedData>();
                    lstFriendRequuest.ItemsSource = "";
                    bindGetFriends(); 
```

这里成功地从列表中删除项目，但是在调用 bindGetFriends() 新绑定项目之后，我没有得到新项目得到旧项目。为什么服务返回旧项目列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:35:51.280

使用这个扩展：

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;

public static class Extensions
{
    public static ObservableCollection<T> ToObservableCollection<T>(this IEnumerable<T> collection)
    {
        var observableCollection = new ObservableCollection<T>();
        foreach (var item in collection) observableCollection.Add(item);
        return observableCollection;
    }
} 
```

用法：

```
interestrates = (from rts in xmlDocu.Descendants("Friend") 
    select new SampleCheckedData
    {    
        Id = (string)rts.Element("userid"),
        Name = (string)rts.Element("name"),
        Icon = (string)rts.Element("imageurl"),
        VisibleStatus = (string)rts.Element("visiblestatus"),
        AppStatus = (string)rts.Element("loginstatus"),    
        imgBubble =bitmapRed,
    }).ToObservableCollection<SampleCheckedData>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:13:10.903

将您的 Observable 集合更改为 List，

```
List<SampleCheckedData> interestrates = new List<SampleCheckedData>(); 
```

您还可以将 List 绑定到 ListBox，而不是 ObservableCollection

要解决从列表框中删除所选项目的其他问题，请尝试以下代码：

```
 var selectedIndex = listbox.SelectedIndex;
 var listItems = listbox.ItemsSource as List<SampleCheckedData>;
 listItems.RemoveAt(selectedIndex);
 listbox.ItemsSource = null;
 listbox.ItemsSource = listItems; 
```

如果您仍然面临问题，请告诉我

# php - htaccess 适用于第一条规则，但不适用于第二条

> ID：10994360
> 
> 赞同：0
> 
> 时间：2012-06-12T10:02:12.873
> 
> 标签：php, mysql, .htaccess

我有 2 个页面 Advertisement.php 和 Gidc.php，如果它们有 user="some value" 它们就可以工作 例如：

```
example.com/advertisement_final_page.php?user=sumeet 
```

和

```
example.com/gidc_final_page.php?user=nikhil 
```

我希望 htaccess 的代码将其重定向到上述页面：

```
example.com/sumeet 
```

和

```
example.com/nikhil 
```

**我的数据库是：**

**编号** 1

**类型**广告

**用户**会话

**联系** 651651

**所有者** Sumeet Patel

**网站** asdfkjh.com

**电子邮件** sdfjh@skdj.com

**地址** skjdf, sd, sdh

**编号** 2

**类型**Gidc

**用户**nikhil

**联系** 651651

**所有者** 尼基尔·帕特尔

**网站** sadfjh.com

**电子邮件** sdf@sdhf.com

**地址** skjdf, sd, sdh

**我的 htaccess 规则：**

```
Options +FollowSymlinks
RewriteEngine on

RewriteRule ^([a-zA-Z0-9_-]+)$ advertisement_final_page.php?user=$1
RewriteRule ^([a-zA-Z0-9_-]+)$ gidc_final_page.php?user=$1 
```

但是通过上面的代码，它到达了advertising_final_page.php 页面。就像我进入

```
example.com/nikhil 
```

它重定向到

```
example.com/advertisement_final_page.php?user=nikhil 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:13:45.380

您的规则中的模式似乎是相同的。RewriteEngine 将匹配它可以匹配的第一个规则，在这种情况下是第一个。

您可能应该编写一个控制器文件，将所有请求重定向到该文件。然后从 中读取所需`$_GET['user']`的用户，从您的数据库中读取用户的数据，并根据用户的`Type`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:18:09.603

仅当先前的匹配错误时才会处理您的第二场匹配。在这种情况下，两者都是相同的，并且第一个始终为 TRUE。因此，`advertisement_final_page.php?user=nikhil`已加载，并跳过剩余的行。

您可以说出您真正想要实现的目标，让我们为您提供指导。:-)

**- - - - - - - - - - - - 编辑 - - - - - - - - - - - -**

根据您的需要，您可以执行以下操作：

`RewriteRule ^([a-zA-Z0-9_-]+)$ redirect.php?user=$1`

在redirect.php 中，您可以编写：

```
$u = $GET['user'];

if( $u == 'sumeet'){
   header('location: advertisement_final_page.php?user=sumeet');
} else if ( $u == 'nikhil') {
   header('location: gidc_final_page.php?user=nikhil');
} 
```

**但请理解，此代码不是标准代码。**为了使此代码更好，您需要`$user`在数据库中进行检查，然后相应地重定向，而不是使用`if()`来比较所有名称。

为此，您可以使用如下表：

```
+------------+---------------------------------------+
|  username  |             redirect_url              |
+------------+---------------------------------------+
|   nikhil   |       gidc_final_page.php?user=       |
+------------+---------------------------------------+
|   sumeet   |  advertisement_final_page.php?user=   |
+------------+---------------------------------------+
|    alice   |       gidc_final_page.php?user=       |
+------------+---------------------------------------+
|     ....   |                  ....                 |
+------------+---------------------------------------+ 
```

我希望这会帮助你:-)

# sql-server-2005 - suser_sname() 在 sql server 2000 和 sql server 2005 中返回不同情况下的值

> ID：10994362
> 
> 赞同：0
> 
> 时间：2012-06-12T10:02:13.870
> 
> 标签：sql-server-2005, sql-server-2000

我在 sql server 2000 和 sql server 2005 中都有一个用户名 'abc'（小写字母 S 的用户名）。

首先，我通过输入用户名“ABC”通过 sql server 2000 登录。登录后，我运行查询“SELECT SUSER_SNAME()”并得到结果为“ABC”（大写）

但是，如果我通过输入用户名“ABC”登录到 Sql server 2005 并运行查询“SELECT SUSER_SNAME()”，我得到的结果为“abc”（小写字母）

谁能告诉我为什么我在 sql server 2005 中会这样。我需要大写字母的结果而不更改上述查询。

提前致谢。

# java - 将对象作为参数传递并在方法内对其进行修改

> ID：10994369
> 
> 赞同：10
> 
> 时间：2012-06-12T10:02:51.920
> 
> 标签：java, optimization, memory

假设我有 a`Map<String, String>`并且我想删除 value 包含的所有条目`foo`。就优化/内存/等而言，最好的方法是什么？下面四个`syso`打印的结果是一样的，也就是说`{n2=bar}`.

```
public static void main(String[] args) {

    Map<String, String> in = new HashMap<String, String>();
    in.put("n1", "foo");
    in.put("n2", "bar");
    in.put("n3", "foobar");

    // 1- create a new object with the returned Map
    Map<String, String> in1 = new HashMap<String, String>(in);
    Map<String, String> out1 = methodThatReturns(in1);
    System.out.println(out1);

    // 2- overwrite the initial Map with the returned one 
    Map<String, String> in2 = new HashMap<String, String>(in);
    in2 = methodThatReturns(in2);
    System.out.println(in2);

    // 3- use the clear/putAll methods
    Map<String, String> in3 = new HashMap<String, String>(in);
    methodThatClearsAndReadds(in3);
    System.out.println(in3);

    // 4- use an iterator to remove elements
    Map<String, String> in4 = new HashMap<String, String>(in);
    methodThatRemoves(in4);
    System.out.println(in4);

}

public static Map<String, String> methodThatReturns(Map<String, String> in) {
    Map<String, String> out = new HashMap<String, String>();
    for(Entry<String, String> entry : in.entrySet()) {
        if(!entry.getValue().contains("foo")) {
            out.put(entry.getKey(), entry.getValue());
        }
    }
    return out;
}

public static void methodThatClearsAndReadds(Map<String, String> in) {
    Map<String, String> out = new HashMap<String, String>();
    for(Entry<String, String> entry : in.entrySet()) {
        if(!entry.getValue().contains("foo")) {
            out.put(entry.getKey(), entry.getValue());
        }
    }
    in.clear();
    in.putAll(out);
}

public static void methodThatRemoves(Map<String, String> in) {
    for(Iterator<Entry<String, String>> it = in.entrySet().iterator(); it.hasNext();) {
        if(it.next().getValue().contains("foo")) {
            it.remove();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T10:13:15.457

最好的方法是`methodThatRemoves`因为：

1.  在内存消耗方面：它不会创建新地图，因此不会增加内存开销。
2.  在 CPU 使用方面：迭代器在调用下一个或删除当前元素时具有 O(1) 复杂度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T10:23:22.050

最有效的方法*methodThatRemoves*，因为它

*   几乎不使用内存
*   除了（轻量级）迭代器之外不创建任何对象
*   非常快（不使用任何地图查找）

不过我不会先复制，除非您有不可修改的地图或需要保留原件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T10:16:21.757

对我来说最好的是带有 -methodThatRemoves 的那个`Iterator`，*因为*您不创建中间 Map 并且不使用`put`方法。

顺便说一下，第一个：`methodThatReturns`可以更快，因为`put`复杂性是 O(1)，而在最坏的情况下 remove 是 O(n)，但它会使用更多内存，因为你有 2 个不同的 Map 实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T10:12:22.333

我个人会同意，`methodThatRemoves`因为您只是执行循环操作并检查“foo”是否相等。其他人这样做以及对象映射创建和映射清除/放置操作。所以你显然有一种方法做得更少。

此外，如果您想减少内存使用量，最好不要创建额外的 HashMap 来删除 1 个或多个条目。这是假设您不介意迭代地图的额外计算。

如果你真的想更深入，你应该使用探查器或某种工具来评估它。

# javascript - 如何为浏览器中的每个用户只保留一个选项卡或页面？

> ID：10994371
> 
> 赞同：0
> 
> 时间：2012-06-12T10:02:52.887
> 
> 标签：javascript, jquery, cookies, chat, real-time

我正在编写一个实时聊天应用程序。我只想在浏览器中保留一个标签（chrome）

（Firefox 似乎就是这样）。

我试过用cookie ..

下面是使用 jquery.cookie.js 的 js 代码

```
if($.cookie("online")){
    window.close();
}else{
    $.cookie("online",1);
} 
```

但我没有得到我想要的。刷新页面后无论如何都会终止选项卡。并且 cookie 将保持活动状态，直到关闭浏览器而不是选项卡。有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:17:06.213

除非您使用 Javascript 打开它，否则您无法以编程方式关闭当前选项卡。

这也会让访问者感到非常困惑，因为他们不会得到关于发生了什么的信息，当他们试图打开它时，窗口只会在他们身上关闭。

相反，请考虑显示错误消息或启动页面，告诉他们为什么没有获得聊天室的第二份副本，并告诉他们返回上一个窗口。这将更加用户友好。

# ruby-on-rails - Rspec / shoulda：测试，调用自定义验证器

> ID：10994373
> 
> 赞同：3
> 
> 时间：2012-06-12T10:02:57.360
> 
> 标签：ruby-on-rails, rspec, shoulda

我有一个自定义验证器（位于 app/validators/uri_validator.rb），用于：

```
validates :link, uri: true 
```

如何在我的规范中指定这一点？

理想情况下，我想打一个单线电话，例如：

```
it { should validate_uri_of(:link) } 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:27:46.970

另一种选择是使用`allow_value`匹配器，虽然并不理想，但它可以在某些情况下工作。

```
it { should allow_value(value_which_is_valid).for(:link) }
it { should_not allow_value(value_which_is_invalid).for(:link) } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T13:30:21.933

使用 factory girl 构建一个包含无效数据和一个包含有效数据的模型对象，并调用 be_valid 匹配器。

```
#factory girl
build(:model, link: valid_uri).should be_valid
build(:model, link: invalid_uri).should_not be_valid 
```

# ravendb - RavenDB、RavenHQ 和 Appharbor - 第一个文档的文档大小错误

> ID：10994380
> 
> 赞同：2
> 
> 时间：2012-06-12T10:03:08.097
> 
> 标签：ravendb, appharbor, ravenhq

我有一个完全空的 RavenHQ 数据库，它链接到我的 Appharbor 应用程序。数据库当前使用的空间量是我的青铜帐户可用的 25mb 空间中的 1.1mb。数据库以前有记录，但我在管理工作室中使用“删除集合”删除了它们。

我第一次调用 session.Store(myobject)，在调用 .SaveChanges() 之前，我收到以下错误。

```
System.InvalidOperationException: Url: "/docs/Raven/Hilo/AccItems"

Raven.Database.Exceptions.OperationVetoedException: PUT vetoed by Raven.Bundles.Quotas.Triggers.DatabaseSizeQoutaForDocumetsPutTrigger because: Database size is 45,347 KB, which is over the allowed quota of 25,600 KB. No more documents are allowed in. 
```

现在，文档肯定没那么大，所以我不知道这个错误意味着什么，尤其是因为我没有通过调用 SaveChanges 关闭会话，所以我认为我什至没有访问数据库()。有任何想法吗？这是代码本身。

```
 XDocument doc = XDocument.Parse(rawXml);
    var accItems = ExtractItemsFromFeed(doc);
    using (IDocumentSession session = _store.OpenSession())
    {
        var dbItems = session.Query<AccItem>().ToList();
        foreach (var item in accItems)
        {
            var existingRecord = dbItems.SingleOrDefault(x => x.Source == x.SourceId == cottage.SourceId);
            if (existingRecord == null)
            {
                session.Store(item);
                _logger.Info("Saved new item {0}.", item.ShortName);
            }
            else
            {
                existingRecord.ShortName = item.ShortName;
                _logger.Info("Updated item {0}.", item.ShortName);
            }
            session.SaveChanges();
        }
    } 
```

任何其他有关此代码样式的评论都将受到欢迎，因为我不确定处理“更新现有项目或在不存在时创建”方案的最佳方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T15:46:22.847

这里的答案如下。

RavenHQ 支持人员发现数据库确实过大，但似乎 Appharbor 品牌的 RavenHQ 控制面板中报告的大小不正确。我已经用上面发布的代码的先前错误版本填充了超过限制的数据库，所以我收到的错误消息实际上是正确的。

在不花钱升级数据库的情况下解决这个问题并不简单，因为不可能缩小数据库。因为我也无法删除我的单个 Appharbor/RavenHQ 数据库或创建另一个数据库，这让我不得不选择创建一个全新的 Appharbor 应用程序，或者直接在 RavenHQ 注册一个新帐户。我选择了后者。RavenHQ 品牌的控制面板与 Appharbor 略有不同，因为它具有创建和删除数据库的能力。

总而言之：使用 RavenHQ 作为 Appharbor 的附加组件似乎没有任何好处——您不妨去获得一个合适的免费 RavenHQ 帐户。

# sql-server - Oracle 和 SQL Server 选择 (+) 等效项

> ID：10994381
> 
> 赞同：5
> 
> 时间：2012-06-12T10:03:14.213
> 
> 标签：sql-server, oracle, select, outer-join

在甲骨文我有：

```
SELECT t2.Regkood, t2.naitatel, t2.naitafaks, t3.lahtiolekuaeg, t1.*
FROM table1 t1, table2 t2, table3 t3
WHERE t1.client = t2.client AND t1.client = t3.client(+) AND t1.client = 414246 
```

我如何在 SQL Server 中获得相同的结果？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T10:06:06.607

```
SELECT t2.Regkood, 
       t2.naitatel, 
       t2.naitafaks, 
       t3.lahtiolekuaeg, 
       t1.* 
FROM   table1 t1 
       INNER JOIN table2 t2 
               ON t1.client = t2.client 
       LEFT JOIN table3 t3 
               ON t1.client = t3.client 
WHERE  t1.client = 414246 
```

一些了解连接的示例：

ORACLE 中的左外连接

```
SELECT *
FROM A, B
WHERE A.column = B.column(+) 
```

ORACLE 中的右外连接

```
SELECT *
FROM A, B
WHERE A.column(+)=B.column 
```

# .net - List查询中的Linq列表

> ID：10994383
> 
> 赞同：0
> 
> 时间：2012-06-12T10:03:24.897
> 
> 标签：.net, linq

```
Class A
{
   string name;
   IList<A> minorList = new List<A>();
}

IList<A> majorList = new List<A>(); 
```

我想`majorList`根据 name 值获取 A 的实例，但没有必要将它放在`majorList`. `minorList`也可以包含名称。如何使用 Linq 获得它。如果它只有在那里，`majorList`我可以通过使用来获得它

```
A a = majorList.First(s => s.Name == "Name"); 
```

如果它不在majorList 中而是在majorList 的一些实例列表中呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:05:26.817

听起来你想要这样的东西：

```
bool ContainsName(A a, string name)
{
    return a.name == name || a.minorList.Any(x => ContainsName(x, name));
} 
```

然后：

```
A a = majorList.First(x => ContainsName(x, name)); 
```

当然，如果您的列表中有任何循环，您最终会遇到问题......

# c# - 错误歧义和缺少部分修饰符

> ID：10994385
> 
> 赞同：0
> 
> 时间：2012-06-12T10:03:36.440
> 
> 标签：c#, wcf, windows-phone-7

我只是按照这个[http://www.dotnetcurry.com/ShowArticle.aspx?ID=585](http://www.dotnetcurry.com/ShowArticle.aspx?ID=585) 来做这个项目，但有错误歧义和缺少部分修饰符。

我在 Iservice1.cs 的代码

```
namespace WCT_DataServiceApp
{
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        ImageEmployee GetEmpByEmpNo(int EmpNo);
    }

    [DataContract]
    public class ImageEmployee
    {
        [DataMember]
        public int EmpNo { get; set; }
        [DataMember]
        public byte[] EmpImage { get; set; }
    }
} 
```

和 Service1.svc.cs 中的代码

```
namespace WCT_DataServiceApp
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Service1" in code, svc and config file together.
    public class Service1 : IService1
    {
        public ImageEmployee GetEmpByEmpNo(int EmpNo)
        {
            var Conn = new SqlConnection(@"Data Source=yeo-pc\sqlexpress;Initial Catalog=image;Integrated Security=True");
            Conn.Open();
            var Cmd = new SqlCommand();
            Cmd.Connection = Conn;
            Cmd.CommandText = "Select * from ImageEmployee where EmpNo=@EmpNo";
            Cmd.Parameters.AddWithValue("@EmpNo", EmpNo);

            var Reader = Cmd.ExecuteReader();

            ImageEmployee objImgEmp = new ImageEmployee();

            while (Reader.Read())
            {
                objImgEmp.EmpNo = Convert.ToInt32(Reader["EmpNo"]);
                objImgEmp.EmpImage = (byte[])Reader["EmpImage"];
            }
            Reader.Close();
            Conn.Close();
            return objImgEmp;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:11:39.467

看来您`Service1`的解决方案中已经有课程了。如果您在一个新的 WCF 项目中尝试它，那么默认情况下您将获得两个文件，一个用于接口，一个用于类，分别命名为：`IService1.cs`和`Service1.cs`. 您需要删除这两个或用您的代码替换它们的代码。该错误要求您使用单词 partial，该词用于 Partial 类，因为它假设您`Service1`在新代码文件中定义部分类。

# ruby-on-rails - Sprockets/Rails：查找 Sprockets 知道如何编译的所有文件

> ID：10994396
> 
> 赞同：6
> 
> 时间：2012-06-12T10:04:08.417
> 
> 标签：ruby-on-rails, asset-pipeline, sprockets, konacha

对于用于测试 Rails 应用程序的 Rails 引擎 Konacha，我们需要一种方法来查找 Sprockets 可以编译为 JavaScript 的所有文件。

现在我们使用类似的东西

```
Dir['spec/javascripts/**/*_spec.*'] 
```

但这会拾取`.bak`,`.orig`和其他备份文件。

**Sprockets 能否以某种方式告诉我们它是否知道如何编译文件**，以便自动排除备份文件？

`content_type_of`没有帮助：

```
Rails.application.assets.content_type_of('test/javascripts/foo.js.bak')
=> "application/javascript" 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-12T21:46:53.283

您可以使用以下方法遍历`Sprockets::Environment`加载路径中的所有文件`each_file`：

```
Rails.application.assets.each_file { |pathname| ... } 
```

`Pathname`将使用加载路径中每个文件的完全扩展路径的实例调用该块。

`each_file`返回一个`Enumerator`，因此您可以跳过该块并使用 获取一个数组`to_a`，或者调用`include?`它。例如，要检查文件是否在加载路径中：

```
assets = Rails.application.assets
pathname1 = Pathname.new("test/javascripts/foo.js").expand_path
pathname2 = Pathname.new("test/javascripts/foo.js.bak").expand_path
assets.each_file.include?(pathname1) # => true
assets.each_file.include?(pathname2) # => false 
```

# joomla1.5 - 登录在 joomla 1.5 中跟踪的用户操作中

> ID：10994400
> 
> 赞同：0
> 
> 时间：2012-06-12T10:04:22.980
> 
> 标签：joomla1.5

我需要一个 Joomla 1.5 组件来执行以下任务

当必须跟踪用户登录时的所有操作时，

这些行动包括：

登录日期、登录时间、登录用户访问的页面、每个页面上的时间、登录用户单击的链接、提交的表单、退出时间本次访问在网站上花费的总时间以及上述所有操作的报告

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:03:58.190

你可以试试这个：http: [//joomlax.net/downloads/Access---Security/User-Management/User-Trace/](http://joomlax.net/downloads/Access---Security/User-Management/User-Trace/)

很容易根据您的需要进行修改。

考虑谷歌分析模块： [http ://extensions.joomla.org/extensions/site-management/analytics/site-analytics-google-based](http://extensions.joomla.org/extensions/site-management/analytics/site-analytics-google-based)

# python - Python timeit：结果缓存而不是计算？

> ID：10994405
> 
> 赞同：1
> 
> 时间：2012-06-12T10:04:36.633
> 
> 标签：python, caching, timeit

我正在测试几种不同的算法（用于解决 16x16 数独），使用 timeit 模块测量它们的性能。但是，似乎实际上只计算了第一次 timeit.repeat() 迭代，因为其他迭代变得更快。使用 t.repeat(repeat=10, number=1) 测试单个算法，得到以下结果：

[+] 结果......：solve1（函数1/1）
[+] 最快............：0.00003099
[+] 最慢............： 32.38717794
[+] 平均值*............：0.00003335（平均值计算，不含最小值/最大值）

10 个结果中的第一个总是需要更长的时间才能完成，这似乎只能通过 timeit.repeat() 循环的第 2 到 10 次迭代以某种方式使用循环先前迭代的缓存结果这一事实来解释。当在 for 循环中实际使用 timeit.repeat() 来比较几种算法时，似乎只计算了一次难题的解决方案：

[+] 结果......：solve1（函数 1/3）
[+] 最快............：0.00003099
[+] 最慢............： 16.33443809
[+] 平均*.......: 0.00003263（平均计算没有最小值/最大值）

[+] 结果......：solve2（函数2/3）
[+] 最快............：0.00365305
[+] 最慢............： 0.02915907
[+] 平均值*.........：0.00647599（平均值计算，不含最小值/最大值）

[+] 结果......：solve3（函数3/3）
[+] 最快............：0.00659299
[+] 最慢............： 0.02440906
[+] 平均值*.........：0.00717765（平均值计算，不含最小值/最大值）

真正奇怪的是算法的相对速度（相对于彼此）在整个测量过程中是一致的，这表明所有算法都在计算它们自己的结果。由于大部分中间结果（在计算第一个解决方案时获得）仍然在某种缓存中，由 python 进程保留，因此性能的这种极端提高？

任何帮助/见解将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:13:19.620

我认为内存分配是问题所在。

python解释器本身拥有一个内存池，它从没有（或很少？）内存池开始。在你的程序第一次运行之后，分配了很多内存（从系统中）并释放（到池中），然后接下来的运行从池中获取内存，这比从系统中请求内存要快得多。

但这只有在您的算法会消耗大量内存时才有意义。

# android - glReadPixels 在 android opengl es 2.0 中得到错误的数据

> ID：10994412
> 
> 赞同：2
> 
> 时间：2012-06-12T10:04:54.073
> 
> 标签：android, android-ndk, opengl-es-2.0

我从 camera 获取 yuv 数据，并将它们发送到 opengl，然后我使用片段着色器将数据转换为 RGBA 格式并显示在屏幕上。一切顺利，但是当我使用 glReadPixels 将 RGBA 数据从帧缓冲区获取到 int 数组时，我得到了错误的数据。

```
// I use VBO to draw
glBindBuffer(GL_ARRAY_BUFFER, squareVerticesBufferID);
glVertexAttribPointer(gvPositionHandle, 2, GL_FLOAT, GL_FALSE, 0, 0);
glEnableVertexAttribArray(gvPositionHandle);
glBindBuffer(GL_ARRAY_BUFFER, textureVerticesBuferID);
glVertexAttribPointer(gvTextureHandle, 2, GL_FLOAT, GL_FALSE, 0, 0);
glEnableVertexAttribArray(gvTextureHandle);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, squareVerticesIndexBufferID);
glDrawElements(GL_TRIANGLE_STRIP, 4, GL_UNSIGNED_INT, 0);

// Then I use glReadPixels to read the RGBA data
unsigned char *returnDataPointer = (unsigned char*) malloc(width * height * 4);
glReadPixels(0, 0, width, height, GL_RGBA, GL_UNSIGNED_BYTE, returnDataPointer); 
```

不幸的是我得到了错误的数据，数组中的最后数千个元素是 0，相同的代码在 ios 上运行良好，我错过了什么吗？

我在 Android 4.0.3 上工作并使用 NDK 的 OpenGL ES 2。

# database - 创建模式时“缺少授权条款”

> ID：10994414
> 
> 赞同：6
> 
> 时间：2012-06-12T10:05:04.540
> 
> 标签：database, oracle, schema

我正在尝试使用 Enterprise Manager Console 在 Oracle 中创建数据库模式：

```
CREATE SCHEMA SCM AUTHORIZATION SCM 
```

但它给出的错误是：“缺少 AUTHORIZATION 子句”。

你能帮忙吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T10:09:30.980

`CREATE SCHEMA`用于在单个语句中创建一整套对象。它不会像其他 DBMS（例如 PostgreSQL）使用该术语那样创建“模式” **。**

从[手册](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_6014.htm)：

> *使用 CREATE SCHEMA 语句在单个事务中创建多个表和视图并在您自己的模式中执行多个授权*

一开始的重要说明：

> *此语句实际上**并不**创建模式。Oracle 数据库在您创建用户时自动创建模式*

（强调我的）

在 Oracle 中，模式和用户（或多或少）是相同的东西。所以很可能您实际上正在寻找：

```
create user scm identified by scm; 
```

# hudson - 如何使用 webservice 检查 jenkins 是否完全启动并运行？

> ID：10994415
> 
> 赞同：8
> 
> 时间：2012-06-12T10:05:07.753
> 
> 标签：hudson, jenkins, command-line-interface

我想知道，如何使用 webservice 检查 jenkins 是否完全启动并运行？

我想使用詹金斯网络服务来检查这一点。有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T10:20:23.067

可能最简单的方法是在 Jenkins 服务器根 URL 上执行简单的 HTTP 获取。如果 Jenkins 完全启动，您将获得成功状态 (200)。如果不是，您将得到 503 - `Service Temporarily Unavailable`（或者可能是其他错误，具体取决于具体情况）。

在命令行中，您可以使用诸如[wget](http://www.gnu.org/software/wget/)之类的工具来执行该请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-06T16:09:55.233

也可以使用 curl：

```
while [[ $(curl -s -w "%{http_code}" http://server -o /dev/null) != "200" ]]; do
  sleep 5
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-11T10:57:15.080

除了以前的答案：如果启用了安全性，您将从根 URL 获得 HTTP 403。要获得 HTTP 200，您可以检查 http://server/login。

# telerik - 无论如何通过JavaScript在动态创建的选择框上应用telerik组合？

> ID：10994418
> 
> 赞同：0
> 
> 时间：2012-06-12T10:05:15.067
> 
> 标签：telerik, telerik-mvc, drop-down-menu

我有创建选择框的 java 脚本取决于 ajax 结果。

例如，如果结果 = 2x 组合，我通过 javascript 创建 2x 选择框。

```
if (this.Type == "combo") {
                var result = "<label>" + this.Name + "</label><select onChange='ProChange(this)' name='" + this.ID + "'>";

                result += "<option value='0'>Please select</option>";
                for (var i = 0; i < this.Values.length; i++) {
                    var resultId = this.Values[i].ID;
                    var resultName = this.Values[i].Name;

                    result += "<option value= " + resultId + ">" + resultName + "</option>";
                }
                result += "<option value='-1'>Other</option>";
                result += "<input type='text' name='"+this.ID+"other' style='display:none;' id='"+this.ID+"' />";
                result += "</select>"; 
```

所以我的主要问题是，我可以在动态创建的选择框上应用 Telerik 样式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:22:13.800

您可以使用 Telerik RadFormDecorator

```
<telerik:RadFormDecorator ID="rfd_combo" runat="server" DecoratedControls="Select" /> 
```

并通过javascript创建您的控件后：

```
$find("<%= rfd_combo.ClientID %>").decorate(); 
```

更多细节：[http ://www.telerik.com/support/kb/aspnet-ajax/formdecorator/decorate-dynamically-added-controls-by-using-radformdecorator.aspx](http://www.telerik.com/support/kb/aspnet-ajax/formdecorator/decorate-dynamically-added-controls-by-using-radformdecorator.aspx)

# java - cross-language Network exchanges design

> ID：10994419
> 
> 赞同：2
> 
> 时间：2012-06-12T10:05:15.197
> 
> 标签：java, networking, casting

I have been looking for an answer on stackoverflow and on the web more generally for the past two days and I couldn't find a decent answer. However I am surely not the first one to do that:

I am implementing a p2p overlay in Java. The aim is to exchange messages between peers. The messages are represented by a Message class which contains a sender, a receiver and a content. The content is represented as a class extending a Context interface (for each type of messages a new class extending Context is created which can contain additional fields, it is application specific). The className of the context is also store in the message. However I want to keep the messages transmitted over the network language-agnostic which is why I convert my converted them to a JSON object before transmitting them across the network. So far nothing marvelous.

The questions arise when receiving a message: I receive a JSON object which I assume is of class Message (a type checking is performed). It contains a content of the class stored in the message as a className.

1.  Is it wise to store the classname like that and then create an instance of the class to store the content dynamically when receiving a message (i.e. the content will be an instance of the SpecificContent class but seen as the interface Content). The content will then be available at the application level and can be casted to access its specific methods.

2.  is there any better/standard way to send messages over network without simply serializing the java class? (in this case it could not communicate with a program written in C++, etc ) (without talking about CORBA which is nothing less than a Rube Goldberg machine)

Thank you very much for your time, any comment/question/answer is appreciated.

Regards,

B.F.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:42:25.413

Yours is the challenge of **integration** of **heterogeneous systems**. What you are doing is loosely the practice being followed (at least in principle).

The idea that a text based (JSON in your case here) protocol is used to exchange the information between heterogeneous systems, is central to the **system-integration or interoperability**. In fact the standard practice of **web-services** is nothing but just this. Here the XML used as text based protocol among heterogeneous system.

To answer your question:

1.  If you using your **own protocol** then its fair to send a classname coz that's where you interpret the message object you received. If you used standard practices like SOAP-Web services, these things are taken care automatically. All you need to define is **service-contract** of message exchange called [WSDL](http://en.wikipedia.org/wiki/Web_Services_Description_Language).

2.  **XML is the language of internet**. Use xml to exchange information over network. For all the widely used languages (Java,C#,PHP etc) ready made programs are available to convert a native language object into equivalent xml representation (e.g [Jaxb](http://www.oracle.com/technetwork/articles/javase/index-140168.html) is used to convert Java object into xml representation).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:44:25.863

When selecting a particular messaging layer implementation is it generally boils down to balancing between performance and flexibility. The most flexible and least performing is text-based self-descriptive encoding (JSON, XML/SOUP, YAML, tag/type/value variations, etc.) SOUP web services or FIX would be an example, the ones of best performance are ones with fixed fields offsets and binary encoding, ASN.1 would be an example. Somwhat balanced but biased towards the latter would be Google Protocol Buffers.

# ruby-on-rails-3 - mongoid，映射/减少 SUM 投票的最佳方式？

> ID：10994424
> 
> 赞同：0
> 
> 时间：2012-06-12T10:05:28.453
> 
> 标签：ruby-on-rails-3, mongodb, ruby-on-rails-3.1, mongoid

在大数据中统计成员的 SUM 投票。我想在一个事件中显示所有成员的 SUM 投票（在这个问题中我不使用事件模型）。

获得所有会员总和投票

首先，我使用 map/reduce 来查找每个成员的总投票数。#=> 名称结果：'sum_vote'

然后我用 6 个新选票插入“成员 a”，用 2 个新选票插入“成员 b”。

我不想再次读取所有数据，因为它太大了。

我尝试：（在 2 种情况下我使用缓存对象结果）

1.  使用选项查询运行 map/reduce 是 member_id = member_a.id AND option out:{merge:'sum_vote'}。member_b 也这样做

2.  当插入 1 票时，我通过键 _id(='member_id') 查找结果更新结果“sum_vote”，然后对其值 +1。

你是怎么做到的？请分享我一些问题。感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:39:12.610

在 map/reduce 中有输出类型： 'reduce' 。这正是我需要的。

只需使用 option:query 运行第二个 map/reduce 并设置：{reduce: 'sum_vote'}

感谢您的关注

# c# - 使用实体框架，哪种方法更高效？

> ID：10994426
> 
> 赞同：1
> 
> 时间：2012-06-12T10:05:42.170
> 
> 标签：c#, linq, entity-framework

我有一些代码可以在循环中更改数据库中某些数据的值。我只是想知道首先过滤数据的最有效方法是什么？我举个例子：-

与班级： -

```
public class myObj 
{
    int id {get;set;}
    string product {get; set;}
    string parent{get;set;}
    bool received {get;set;}
} 
```

和 DbContext：-

```
public class myCont:DbContext
{
    public DbSet<myObj> myObjs {get;set;}
} 
```

这样做更好吗：-

```
int[] list;
/* Populate list with a bunch of id numbers found in myOBjs */
myCont data = new myCont();
myObj ob = data.myObjs.Where(o => o.parent == "number1");
foreach(int i in list)
{
    ob.First(o => o.id == i && o.received != true).received = true;
} 
```

或者：-

```
int[] list;
/* Populate list with a bunch of id numbers found in myOBjs */
myCont data = new myCont();
foreach(int i in list)
{
    data.myObjs.First(o => o.parent == "number1" && o.id == i && o.received != true).received = true;
} 
```

还是没有区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:54:04.673

不确定如何编译上面的代码示例。

在您的`myObj`对象中，该`received`属性是 an `int`，但您正在根据 a 评估它，`bool`这应该会导致该行`o.received != true`导致 error `Cannot apply operator '!=' to operands of type 'int' and 'bool'`。

**检查 SQL**
代码编译后，使用[SQL Profiler](http://weblogs.asp.net/zeeshanhirani/archive/2008/04/18/how-to-use-profiler-with-linq-to-sql-queries.aspx)查看生成的 SQL。

这将向您展示构建的 SQL

**基准测试**
下面是对您可以对代码执行进行基准测试的***一种可能方法的非常粗略的描述。***

将您的代码包装到一个方法中，例如：

```
public void TestingOperationOneWay()
{
    int[] list;
    /* Populate list with a bunch of id numbers found in myOBjs */
    myCont data = new myCont();
    myObj ob = data.myObjs.Where(o => o.parent == "number1");
    foreach(int i in list)
    {
        ob.First(o => o.id == i && o.received != true).received = true;
    }
} 
```

和：

```
public void TestingOperationAnotherWay()
{
    int[] list;
    /* Populate list with a bunch of id numbers found in myOBjs */
    myCont data = new myCont();
    foreach(int i in list)
    {
        data.myObjs.First(o => o.parent == "number1" && o.id == i && o.received != true).received = true;
    }
} 
```

使用与此类似的方法创建一个在每个方法上迭代 x 次的方法`Stopwatch`：

```
private static TimeSpan ExecuteOneWayTest(int iterations)
{
    var stopwatch = Stopwatch.StartNew();

    for (var i = 1; i < iterations; i++)
    {
        TestingOperationOneWay();
    }

    stopwatch.Stop();

    return stopwatch.Elapsed;
} 
```

评估与此类似的结果：

```
static void RunTests()
{
    const int iterations = 100000000;

    var timespanRun1 = ExecuteOneWayTest(iterations);
    var timespanRun2 = ExecuteAnotherWayTest(iterations);

    // Evaluate Results....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:58:53.673

在您的两个查询之间进行选择的情况下，我同意它们都会以类似的方式执行，并且基准测试是一个适当的响应。但是，您可以做一些事情来优化。例如，您可以使用方法 'AsEnumerable' 来强制使用 IEnumerable 'Where' 代替 LINQ 'Where' 子句（转换为 SQL 和针对数据源执行或处理对象层次结构中的 where 的区别）。由于您似乎只在操作属性（而不是实体关系），您可以这样做：

```
int[] list;
/* Populate list with a bunch of id numbers found in myOBjs */
myCont data = new myCont();
myObj ob = data.myObjs.Where(o => o.parent == "number1").AsEnumerable<myObj>();
foreach(int i in list)
{
    ob.First(o => o.id == i && o.received != true).received = true;
} 
```

这样做可以避免为每条记录访问数据库的损失（可能避免网络延迟），但会增加内存占用。这是一个[相关的 LINQ，进一步解释了这个想法](https://stackoverflow.com/questions/3311244/understanding-asenumerable-in-linq-to-sql)。这实际上取决于您可以在哪里吸收性能成本。

# wpf - 在 wpf 中使用数据网格进行奇怪的选择

> ID：10994430
> 
> 赞同：0
> 
> 时间：2012-06-12T10:06:18.037
> 
> 标签：wpf, binding, datagrid, observablecollection

我正在使用 WPF 和 EF。我正在使用 Datagrid 来显示信息。

在我的视图模型中，我有一个 ObservableCollection。这个集合是我的 DataGrid 的直接来源。这是我的 DataGRid 的声明：

```
<DataGrid Margin="6" BorderBrush="Black" BorderThickness="1" 
          AutoGenerateColumns="False" 
          SelectionMode="Extended" 
          SelectionUnit="FullRow"
          AlternatingRowBackground="Gainsboro" 
          AlternationCount="2" 
          Name="DataGridClientSpecs" 
          CanUserAddRows="False"
          ItemsSource="{Binding ClientSpecifications}" 
          VerticalScrollBarVisibility="Auto" Height="500" >
    <DataGrid.Columns>
            <DataGridCheckBoxColumn Header="Wanted ?" Binding="{Binding Wanted}" />
            <DataGridTextColumn Header="Product" Binding="{Binding ProductSpecification.ProductType}" />
            <DataGridTextColumn Header="Conditionnement" Binding="{Binding ProductSpecification.ConditionnementType}" />
    <DataGrid.Columns>
</DataGrid> 
```

我有两个问题：

*   当我尝试选择一行时，它总是选择第一行。

*   有些行重复。

当我将集合绑定到 ListBox 时，我没有重复的行，但选择仍然不起作用。

希望可以有人帮帮我...

干杯

托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:34:59.910

我解决了我的问题:-)

这是实体框架的错！因为它是一个新项目列表（我的意思是它们不存在于数据库中）所以它们的 ID 等于 0 并且因为我正在覆盖这个类的 Equals() 方法并且我正在对 ID 进行比较， ID 始终为 0，因此我列表中的所有项目都是相同的 :-)

顺便说一句，所有显示项目列表的控件都是一样的。

问题解决了 ！希望它会帮助人们。

干杯托马斯

# android - 使用重复方法创建服务

> ID：10994431
> 
> 赞同：0
> 
> 时间：2012-06-12T10:06:24.533
> 
> 标签：android, android-service

我正在尝试创建一个每 5 秒执行一次的服务。问题是我把`while(true)`它给了我一个错误的那一刻。我想这是不允许的。如果是这样，实现重复方法的更好方法是什么？

```
public class repService extends Service {

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    while(true){
        Thread timer = new Thread(){
            public void run(){
                try {
                    sleep(5000);
                    // do something
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } finally {
                    // do something
                }
            }
        };
        timer.start();  
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:09:42.817

您不能将语句放在要运行的方法之外。将**while 循环**放入服务的方法`onCreate`或`onStartCommand`方法中。一旦你的服务启动，这些方法保证被调用。

为了实现重复性任务，使用`HandlerThread`,`Looper`和`Handler`handler 的`postDelayed`方法来充分利用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:13:30.887

```
Timer timer = new Timer();
timer.scheduleAtFixedRate(new TimerTask() {     
    @Override
    public void run() {
        // do something     
    }
}, 0, 5000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:12:06.643

```
which every 5 seconds does something 
```

您可以使用`Timer().schedule`每 5 秒重复一次任务。

```
new Timer().schedule(new TimerTask() {

            @Override
            public void run() {
                //Do your task here

            }
        }, System.currentTimeMillis(), 5000); 
```

如果您需要修改或玩 UI 部分，请确保编写比代码`runOnUiThread`

# iphone - 在 xcode/ios 中以编程方式编辑 RTF/DOC 文件

> ID：10994432
> 
> 赞同：2
> 
> 时间：2012-06-12T10:06:29.020
> 
> 标签：iphone, ios, xcode, ipad

我有一个可以在 iphone 上查看的 RTF 文件，现在我需要以编程方式编辑该文件，请告诉我该怎么做。示例 RTF 文件内容“我是 StackOverflow 的新手”现在我需要以编程方式更改为以下行。“我经常访问 StackOverflow”并保存为 PDF 文件。请帮帮我:)

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:17:39.733

在您的 .h 文件中添加一些对象并定义

```
#define kBorderInset            20.0
#define kBorderWidth            1.0
#define kMarginInset            10.0

@interface ViewController : UIViewController
{
    CGSize pageSize;
    NSString *pdfFileName;
    NSString *contents_for_pdf;
}

- (void)generatePdfWithFilePath:(NSString *)thefilePath; 
```

在 .m 文件中添加此行，单击按钮以获取字符串中 rtf 文件的内容

```
NSString *rtf_path = [[NSBundle mainBundle] pathForResource:@"example" ofType:@"rtf"];
contents_for_pdf = [[NSString alloc] initWithContentsOfFile:rtf_path encoding:NSUTF8StringEncoding error:nil];
NSLog(@"%@",contents_for_pdf);
contents_for_pdf = [contents_for_pdf stringByReplacingOccurrencesOfString:@"I am new to StackOverflow" withString:@"I regularly visit StackOverflow"];

pageSize = CGSizeMake(612, 792);
NSString *fileName = @"Demo.pdf";
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
pdfFileName = [documentsDirectory stringByAppendingPathComponent:fileName];

[self generatePdfWithFilePath:pdfFileName]; 
```

我没有修改 rtf 文件的文本，我只是在 rtf 文件中使用了相同的文本。你应该做你想做的（我注意到文本中有一些编码字符）和生成 pdf 的函数就在这里。

```
- (void) generatePdfWithFilePath: (NSString *)thefilePath
{
    UIGraphicsBeginPDFContextToFile(thefilePath, CGRectZero, nil);
    //Start a new page.
    UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, pageSize.width, pageSize.height), nil);

    //Draw text fo our header.

    CGContextRef    currentContext = UIGraphicsGetCurrentContext();
    CGContextSetRGBFillColor(currentContext, 0.0, 0.0, 0.0, 1.0);

    UIFont *font = [UIFont systemFontOfSize:14.0];

    CGSize stringSize = [contents_for_pdf sizeWithFont:font
                                     constrainedToSize:CGSizeMake(pageSize.width - 2*kBorderInset-2*kMarginInset, pageSize.height - 2*kBorderInset - 2*kMarginInset) 
                                         lineBreakMode:UILineBreakModeWordWrap];

    CGRect renderingRect = CGRectMake(kBorderInset + kMarginInset, kBorderInset + kMarginInset + 50.0, pageSize.width - 2*kBorderInset - 2*kMarginInset, stringSize.height);

    [contents_for_pdf drawInRect:renderingRect 
                        withFont:font
                   lineBreakMode:UILineBreakModeWordWrap
                       alignment:UITextAlignmentLeft];

    UIGraphicsEndPDFContext();

    UIAlertView *Alert = [[UIAlertView alloc] initWithTitle:@"PDF Created" message:@"Sucessfull" delegate:self cancelButtonTitle:@"ok" otherButtonTitles:nil, nil];
    [Alert show];
} 
```

# .net - 关于 TIBCO EMS 队列和 BW 监听器的性能

> ID：10994433
> 
> 赞同：-1
> 
> 时间：2012-06-12T10:06:31.927
> 
> 标签：.net, wcf, tibco, tibco-ems, businessworks

我们计划在这些队列上使用 TIBCO EMS 队列和 TIBCO BW 侦听器，以便在新消息到达时调用一些 .NET WCF 服务。我们组织中当前的 ENS 设置是文件存储，而不是队列内容的数据库存储。

有没有人有经验和证据证明这种基础设施可以处理的工作量？有人担心，当新消息放入队列时，BW 可能需要几秒钟才能调用我们的 .NET 端点，而我假设这将在近乎实时的情况下发生，前提是网络和服务器没有过载。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T07:05:10.673

正如汤姆所说，你怀疑，这应该是近乎实时的（当然 < 1 秒），但需要解决相关因素，如消息大小、操作系统、基础设施和网络。

但是，我认为值得指出的是，TIBCO 有一个用于 EMS 的 WCF 绑定，它允许您直接在 EMS 队列上公开 WCF 端点。这可能会消除在中间使用 BW“桥接”客户端的需要，并且首先肯定会减轻对这种对话的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T04:02:48.483

根据您所描述的（使用 BW 作为 EMS 和 SOAP 服务之间的协议桥），它不应该花费“几秒钟”。它应该是亚秒级的。当然，真正知道的唯一方法是自己测试它，但除非你的情况有什么非常不寻常的地方，否则它应该很快。

# codeigniter - Codeigniter 和 Phil Sturgeon 的模板库 - 我可以将视图部分放在主题文件夹中吗？

> ID：10994434
> 
> 赞同：2
> 
> 时间：2012-06-12T10:06:32.013
> 
> 标签：codeigniter, templates, themes, partial

我在 CI 安装中使用了[Phil Sturgeon 的模板库](http://philsturgeon.co.uk/demos/codeigniter-template/user_guide/)。当我尝试将视图部分文件放在主题文件夹中时，它们确实被正确调用，但如果我尝试在其中回显 $template 变量，我会收到一条错误消息，指出 $template 变量未定义。如果我将这些相同的视图部分放在根视图文件夹中，则 $template 会正确回显。

如何在主题中查看部分内容并同时将 $template 传递给它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:19:08.603

我遇到了同样的问题。这看起来像是 Phil 为了与模块化扩展兼容而不得不使用的一些花哨的 hack 的问题。

如果您不使用解析器，只需在模板配置文件中关闭 parser_enabled。它是第一个选项。然后它会工作。

如果您使用的是解析器，则必须深入研究该库。问题出在 _load_view 函数中，检查第 725-728 行。这里需要做一些事情来获取解析模板的变量。

# ruby-on-rails-3 - 身份验证后带有瘦/nginx的omniauth返回登录屏幕-未填充会话哈希值

> ID：10994437
> 
> 赞同：1
> 
> 时间：2012-06-12T10:06:53.197
> 
> 标签：ruby-on-rails-3, omniauth, thin

我正在使用带有[https://github.com/zquestz/authpoint](https://github.com/zquestz/authpoint)作为模板的 google oauth2 提供程序的omniauth。一切正常，除了应用程序在身份验证后返回登录页面而不是转到主页（或重定向页面）。仅当我将 'thin' 与 'nginx' 一起使用时才会出现此问题。在我的开发机器上，它可以在 WEBrick 服务器上正常工作。

身份验证后，如果我显式访问主页（或重新加载页面），应用程序会正确访问主页。

相关代码为：

```
# Get current provider
def current_user_id
  session[:user_id]
end

# Setup the session if we have a valid user.
def setup_session(user_id)
  session[:user_id] = user_id
end

# Store a url in the session that is safe to go back to (non-volatile)
def store_location
  session[:return_to] = request.fullpath
end

# Redirect back to last good page, or the page you pass it if it doesn't know where to go.
def redirect_back_or_default(default)
  location = session[:return_to] || default
  location = default if location == request.fullpath
  redirect_to(location)
  session[:return_to] = nil
  return
end 
```

问题是会话哈希在redirect_back_or_default中从授权重定向后没有获取存储变量的新值，因此当在'current_user_id'中查询：user_id时，它返回nil，将应用程序返回到登录页面。

我使用 ActiveStore 作为会话存储。

# regex - 在雅虎管道中与正则表达式作斗争

> ID：10994441
> 
> 赞同：1
> 
> 时间：2012-06-12T10:07:06.830
> 
> 标签：regex, rss, web-scraping, yahoo-pipes

我正在使用 Yahoo Pipes 构建一个抓取工具，它可以通过 xPath 抓取我们公司的微型站点，并生成一个 RSS 提要，然后我可以将其嵌入到主站点中。

到目前为止，我已经从页面上抓取了职位名称和位置，但我无法将这些项目链接到微型网站。

到目前为止，这是我的管道： http://pipes.yahoo.com/pipes/pipe.info?_id= [2bb5b8fedd0064b64d0e8861e3fc8fd5](http://pipes.yahoo.com/pipes/pipe.info?_id=2bb5b8fedd0064b64d0e8861e3fc8fd5)

我想我需要从每个节点中提取 href 链接，然后应用正则表达式，但我真的无法理解它。

该链接在代码中如下所示： www2.jobs.badenochandclark.ch/JavaScript:OpenAssignment('a960c93a-11fe-4751-bc27-83a48429c3ba',%20'/Jobs/Details/a960c93a-11fe-4751-bc27-83a48429c3ba ');

但我正在努力生成一个基本上可以做到这一点的正则表达式： www2.jobs.badenochandclark.ch/ ~~JavaScript:OpenAssignment('a960c93a-11fe-4751-bc27-83a48429c3ba',%20'~~ /Jobs/Details/a960c93a-11fe -4751-bc27-83a48429c3ba ~~');~~

所以我坚持如何提取链接，然后如何将其构建到管道上。任何朝着正确方向的帮助或推动将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:09:04.103

给你.. [http://pipes.yahoo.com/pipes/pipe.info?_id=d564b802185d5777d757ed4189470941](http://pipes.yahoo.com/pipes/pipe.info?_id=d564b802185d5777d757ed4189470941)

在正则表达式模块中使用稍微不那么复杂的代码。删除您不想要的代码通常比尝试提取并分配给变量更容易

在**plx.link.href**中找到 this-> **JavaScript(.+)Jobs** 替换为-> **jobs**

在**plx.link.href**中 找到这个-> **\'\);** 替换为->*留空*

代码的尾随位 '); 需要反斜杠作为**'**和**)**是控制字符添加反斜杠 **\**使正则表达式将它们从字面上读取为文本字符。

这一点正则表达式**a(.+?)b** 意味着匹配或抓取 a 和 b 之间的所有内容，并且对于这类事情非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:20:17.043

成熟的 URL 解析并不简单，但只要有足够的限制，它就会变得易于管理。

例如，如果你知道

1.  总是`JavaScript:OpenAssignment(`跟在 a`/`之后，
2.  第一个参数始终是引号中的十六进制+破折号字符串，
3.  第二个参数（至少是您需要的部分）也在引号中，
4.  并且您可以丢弃“函数”之后的 URL 的剩余部分

那么这样的事情可能是一个起点：

```
\/JavaScript:OpenAssignment\([^'"]*['"][0-9a-fA-F\-]+['"][^,)]*,[^'")]*['"]([0-9a-fA-F\-]+)['"].* 
```

然后，`$1`将包含您希望保留的匹配项。解释如下。

```
\/                           Slashes need to be escaped (usually).
JavaScript:OpenAssignment    Our function of interest.
\(                           Parentheses need to be escaped too.
[^'"]*                       We're looking for a quote next, so ignore any
                             string of non-quotes, e.g. %20.
['"]                         A quote character.
[0-9a-fA-F\-]+               A hexadecimal-and-dashes string.
['"]                         A quote character.
[^,)]*                       We're looking for a comma next, so ignore any
                             string of non-quotes, e.g., again, %20.
,                            A comma character.
[^'"]*                       We're looking for a quote again, so ignore any
                             string of non-quotes, e.g. %20.
['"]                         A quote character.
([0-9a-fA-F\-]+)             A hexadecimal-and-dashes string, this time captured.
['"]                         A quote character.
.*                           The rest of the string that we don't care about. 
```

# pixel - 强度到像素的转换

> ID：10994444
> 
> 赞同：0
> 
> 时间：2012-06-12T10:07:29.310
> 
> 标签：pixel, java-2d

我有一个 20 x 20 像素的图像数据，以通过抗锯齿标准化的强度形式。我从[MNIST 数据库](http://yann.lecun.com/exdb/mnist/)中获取了这些数据 我想将这些强度转换为像素（0-255），以便我可以可视化这些灰度图像它在java中。还有为什么会有负值（-1 到 1）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:10:09.047

将值范围从 -1 到 +1 转换为 0 到 255 的范围有什么困难。只需将每个分量（-1 到 +1] 乘以 255/2 并四舍五入。

# c# - 12 小时时间格式的正则表达式

> ID：10994445
> 
> 赞同：4
> 
> 时间：2012-06-12T10:07:30.653
> 
> 标签：c#, regex

我需要一个正则表达式格式来验证 AM/PM 的时间

我用这个

```
^(?:0?[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$ 
```

但这不接受任何时候。

我的时间格式将是这样的 12 小时格式（上午 03:23:15）。任何人都知道一个正则表达式来处理这个？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:53:08.313

尝试这个：

```
[0][0-9]|[1][0-2][:][0-5][0-9][:][0-5][0-9][ ][AM]|[PM] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T10:12:37.457

你能试试这个吗？

```
([0][0-9])|([1][0-2])\:[0-5][0-9]\:[0-5][0-9][:b]*(AM|PM|am|pm) 
```

*   匹配 xx:yy:zz 其中
*   第一项`([0][0-9])|([1][0-2])`匹配 xx 到 00-09 或 10-12
*   随后的术语`[0-5][0-9]`将 yy, zz 限制为 00-59 的分、秒
*   空格是可选的
*   最后 AM 或 PM 以大写或小写匹配

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T10:12:42.097

`[01][0-9]:[0-5][0-9]:[0-5][0-9] (AM|PM)`应该符合你的例子。

`[01]\d(:[0-5]\d){2} (AM|PM)`如果你想简化它。

编辑：正如评论指出这不起作用，试试这个：`([01][0-2]|0?[1-9])(:[0-5][0-9]){2} (AM|PM)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T10:09:57.473

尝试这个：

```
(1[012]|[1-9])(:[0-5][0-9]){2}(\\s)?(?i)(am|pm) 
```

正则表达式也包括 am pm

```
(\\s)?  - follow by a white space (optional)
(?i)    - next checking is case insensitive
(am|pm) - follow by am or pm 
```

# php - 我怎样才能让 Magento ajax 调用块，从控制器动作

> ID：10994446
> 
> 赞同：0
> 
> 时间：2012-06-12T10:07:32.857
> 
> 标签：php, ajax, magento

我怎样才能得到输出：

```
<block type="page/template_links" name="top.links" as="topLinks"/> 
```

在控制器动作中？

事实上，我必须通过 AJAX 显示链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:15:34.287

如果我对您的理解正确，您可以在您的操作功能中执行此操作：

```
$linksBlock = $this->getLayout()->createBlock('page/template_links');
echo $linksBlock->toHtml(); 
```

要通过 ajax 调用获取内容，请添加以下 js 脚本：

```
new Ajax.Updater('your_container', '/your_controller/your_action'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:01:06.090

```
$this->getLayout()->getBlock('top.links')->toHtml() 
```

请试试这个，我已经检查过了，它的工作原理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-08T02:45:58.073

虽然提供的赞成答案确实回答了这个问题，但它们都忽略了常见情况，即使用 AJAX 加载的块所采取的某些特定操作将阻止 Magento 重定向按预期工作。

采取以下情况：

*   通过 AJAX 加载的块
*   块有“添加到购物车”按钮（可能由`getAddUrl($product)`助手生成）
*   系统配置>>结帐>>购物车>>'将产品重定向到购物车后' == NO

在这种情况下，单击“添加到购物车”后，Magento 将尝试使用 CartController.php 的`_goBack()`方法重定向用户。这会导致您之前通过 AJAX 加载的块在页面上呈现，而不是用户实际被重定向到他们所在的页面。

* * *

为防止这种情况发生，`'your_param'`请向加载您的块的 AJAX 请求添加一个附加参数，并为其指定一个值`Mage::helper('core/url')->getCurrentUrl()`（或您可能想要的任何其他值）。如：

```
jQuery.ajax({
    url: '<?php echo $yourUrl ?>',
    page: '<?php echo Mage::helper("core/url")->getCurrentUrl()?>'
}) 
```

Then, in your controller's relevant action method, add a quick condition to the beginning of the method, such as:

```
if (!this->getRequest()->isXmlHttpRequest()) {
    $this->getResponse()->setRedirect($this->getRequest()->getParam('your_param'));
}
// ... existing controller code ...
// ... ie: $block->toHtml() ... 
```

This will allow the user to return to their previous page after adding to cart. This also will provide a way for the user to return to the site if they happen to end up at your controller's URL.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-01T12:55:29.707

您可以查看[http://www.magentocommerce.com/magento-connect/catalog/product/view/id/18152/s/ajax-blocks-6911/](http://www.magentocommerce.com/magento-connect/catalog/product/view/id/18152/s/ajax-blocks-6911/) 此模块允许您使用 ajax 加载块，只需通过你的布局文件

# browser - 浏览器调整大小的不需要的导航堆栈

> ID：10994449
> 
> 赞同：0
> 
> 时间：2012-06-12T10:07:40.590
> 
> 标签：browser, navigation, resize, stack

这是我第一次来论坛。我是网页设计的初学者，遇到了一个我找不到正确答案的问题。到目前为止，我在多个网站上搜索了我的答案，但最接近我的问题的是这个；

[水平到垂直菜单，在浏览器窗口调整大小](https://stackoverflow.com/questions/7820369/horizontal-to-vertical-menu-on-browser-window-resize)。

我的问题如下：当我将浏览器窗口的大小调整为小时，我的导航列表会堆积起来......我知道必须有可能让它全部水平保持在桌面屏幕上......就像在 APPLE 的页面上一样以商店为例。我只是不知道我做错了什么。

下面是我的代码....希望有人可以帮助我并过滤掉我的错误。

```
HTML

<div id="navcontainer">
<div id="navlist">
  <ul>
     <li id="active"><a href="home.html" target="_self" id="current">Home</a></li>
     <li><a href="about.html" target="_self">About</a></li>
     <li><a href="services.html" target="_self">Services</a></li>
     <li><a href="gallery.html" target="_self">Gallery</a></li>
     <li><a href="contact.html" target="_self">Contact</a></li>
  </ul>
</div>

CSS

 body {
margin: 200px 0px 10px 0px;
padding: 0px;
text-align: center;
background-image:url(../images/bg.jpg);
background-repeat: repeat;}

/*****  HEADER  *****/
#header {
width: 900px;
text-align: center;
font-family: Raleway;
font-size: 30px;
font-weight: bolder;
font-variant: normal;
color: rgba(51,51,51,1);
position: absolute;
display: block;
top: 0px;}

/*****  NAVIGATION  *****/

#navcontainer {
position: relative;
background-image: url(../images/navbar.png);
background-repeat: repeat-x;
height: 37px;
-o-box-shadow: 0em 0.2em 0.3em 0em rgba(51,51,51,0.8);
-moz-box-shadow: 0em 0.2em 0.3em 0em rgba(51,51,51,0.8);
-webkit-box-shadow: 0em 0.2em 0.3em 0em rgba(51,51,51,0.8);
-ms-box-shadow: 0em 0.2em 0.3em 0em rgba(51,51,51,0.8);
box-shadow: 0em 0.2em 0.3em 0em rgba(51,51,51,0.8);
font-family: Raleway;
display: block;
width: 100%; }

#navlist {
float:left;
position:relative;
left:50%;
padding-top: 1.5px;}

#navlist ul {
float:left; /* IE6 needs this */
position:relative;
left:-50%;
list-style:none;
margin: 0 auto;
font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
font-size: 100%;
font-style: normal;
font-weight: bolder;
font-variant: normal;
text-decoration: none;
padding: 0px; }

 #navlist li {
float:left;
display: inline;
padding-top: 6.8px;
padding-right: 25px;
padding-bottom: 6.8px;
padding-left: 25px;}

 #navlist li a {
text-decoration: none;
color: #424242;
padding-top: 6.8px;
padding-right: 19px;
padding-bottom: 6.8px;
padding-left: 19px;}

#navlist li a:hover {
background-image: url(../images/navbar3.png);
background-repeat: no-repeat;
background-position: bottom;
padding-right: 19px;
paddin-left: 19px;}

#navlist li a:active {
background-image: url(../images/navbar1.png);
background-repeat: no-repeat;
background-position: bottom;
border-width: 1px;
border-top-style: inset;
border-right-style: inset;
border-bottom-style: none;
border-left-style: inset;
border-top-color: rgba(102,102,102,1);
border-right-color: rgba(153,153,153,1);
border-left-color: rgba(153,153,153,1); }

#navlist li a:visited {
text-decoration: none;
color: #424242;
padding-top: 6.8px;
padding-right: 0px;
padding-bottom: 6.8px;
padding-left: 0px;}

#navlist li a:focus {
    background-image: url(../images/navbar1.png);
background-repeat: no-repeat;
background-position: bottom;
padding-right: 19px;
padding-left: 19px; 
    border-width: 1px;
border-top-style: inset;
border-right-style: inset;
border-bottom-style: none;
border-left-style: inset;
border-top-color: rgba(102,102,102,1);
border-right-color: rgba(153,153,153,1);
border-left-color: rgba(153,153,153,1);
text-shadow: 1px 1px #FFF, -0.3px -0.3px #000;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T18:34:59.470

我的导航也有同样的问题。我的导航的结构与下面的解决方案不完全相同，但相应地应用 CSS 效果很好。

这是我找到的解决方案。

[http://jsfiddle.net/9x7Am/5/](http://jsfiddle.net/9x7Am/5/)

HTML

```
<ul id='navbar'>
<li><a href='#'> 1 </a></li>
<li><a href='#'> 2 </a></li>
<li><a href='#'> 3 </a></li>
<li><a href='#'> 4 </a></li>
<li><a href='#'> 5 </a></li>
<li><a href='#'> 6 </a></li>
</ul> 
```

CSS

```
#navbar {margin:0; padding:0; overflow:hidden; width:100%;}
li      {width:100%}
li a    {padding: 6px 0; float:left; width:16%; text-align:center;} 
```

# c# - 带有空格的路径无法使用 File.CreateText(filePath) c# 创建文件

> ID：10994451
> 
> 赞同：2
> 
> 时间：2012-06-12T10:07:43.603
> 
> 标签：c#, file, path, streamwriter

我正在开发一个解析 xml 文件并生成 txt 文件的控制台应用程序。我已经创建了文件路径来存储新文件，但这有空格，如下所示：

```
string filePath = "C:\\Program Files\\my path\\fileName.txt" 
```

但我正在使用以下方法创建路径：

```
string filePath = Path.Combine(temp, "fileName.txt"); 
```

而 temp 是前一条路径。当我打电话时：

```
StreamWriter sw = File.CreateText(filePath); 
```

给出此异常：找不到路径的一部分：filePath

有人可以帮我解决这个问题吗？如何使用此路径创建文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:10:57.143

您的文件路径似乎有问题

尝试`@"C:\Program Files\my path\fileName.txt"`

注意：您已使用评论中提到的更改更新了您的问题。

您的问题可能是“我的路径”不存在，因为此控制台应用程序在以管理员身份运行时对我来说可以正常工作。不运行时，我得到 UnathorizedAccessException

```
class Program
{
    static void Main(string[] args)
    {
        try
        {
            var temp = @"C:\\Program Files\\my path\\";
            string filePath = Path.Combine(temp, "fileName.txt");
            StreamWriter sw = File.CreateText(filePath);
            Console.WriteLine("I got here");
        }
        catch (Exception)
        {
            Console.WriteLine("I didn't");
            //
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:11:25.317

用这个：

```
string filePath = @"C:\Program Files\my path\fileName.txt" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:11:08.767

您在字符串中有单个反斜杠。使它们成为双反斜杠：

```
string filePath = "C:\\Program Files\\my path\\fileName.txt" 
```

# java - Derby 数据库编码

> ID：10994455
> 
> 赞同：0
> 
> 时间：2012-06-12T10:08:11.280
> 
> 标签：java, derby

我发现 Derby 数据库是随 jdk 自动安装的。我想使用但我遇到了一个我在谷歌中找不到解决方案的问题。我有俄文版的windows。Derby 似乎安装正确，但是当我启动数据库本身或 sysinfo 时 - 它给了我一些信息，但在一些未知符号中 - 实际上它是西里尔符号而不是简单的英语。当我尝试创建数据库时 - 它会引发异常，因此我无法连接，但由于符号混乱，我无法阅读该消息。有没有人有同样的问题？如果我没有找到解决方案，如何从 jdk-release 卸载 Derby 并将其本地安装到另一个目录中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:24:47.463

You can also use derby as a filesystem DB. Download from [here](http://db.apache.org/derby/derby_downloads.html) Then in your code, you need to change driver name and connection string accordingly.

For in memory

```
driver=org.apache.derby.jdbc.EmbeddedDriver
url=jdbc:derby:memory:myDB;create=true 
```

For fileSystem ,

```
driver=org.apache.derby.jdbc.ClientDriver
url=jdbc:derby://localhost:1527/schema_name;create=true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:16:11.653

您可以通过访问[http://db.apache.org/derby](http://db.apache.org/derby/)并下载 JAR 文件并将其添加到您的项目类路径来单独安装 derby。我总是这样做，而不是使用 JDK 附带的默认 derby。

顺便说一句，如果你这样做并且仍然得到那些奇怪的符号，你的问题可能在其他地方。希望你能解决这个问题，derby 是一个很酷的嵌入式数据库 :)

# mysql - MySQL 在 LEFT JOIN 查询中拆分左表以提高性能

> ID：10994462
> 
> 赞同：0
> 
> 时间：2012-06-12T10:08:46.270
> 
> 标签：mysql, performance, join, split

我有以下 MySQL 查询：

```
SELECT pool.username
FROM pool
LEFT JOIN sent ON pool.username = sent.username
AND sent.campid = 'YA1LGfh9'
WHERE sent.username IS NULL
AND pool.gender = 'f'
AND (`location` = 'united states' OR `location` = 'us' OR `location` = 'usa'); 
```

问题是池表包含数百万行，并且此查询需要超过 12 分钟才能完成。我意识到在这个查询中，整个左表（池）正在被扫描。台球桌有一个自动递增的 id 行。

我想将此查询拆分为多个查询，而不是扫描整个池表，而是一次扫描 1000 行，在下一个查询中，我会从我离开的地方继续（1000-2000,2000-3000）等等关于使用 id 列进行跟踪。

如何在我的查询中指定这个？如果您知道答案，请举例说明。谢谢你。

如果有帮助，这是我的索引：

```
mysql> show index from main.pool;
| Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| pool  |          0 | PRIMARY  |            1 | id          | A         |     9275039 |     NULL | NULL   |      | BTREE      |         |
| pool  |          1 | username |            1 | username    | A         |     9275039 |     NULL | NULL   |      | BTREE      |         |
| pool  |          1 | source   |            1 | source      | A         |           1 |     NULL | NULL   |      | BTREE      |         |
| pool  |          1 | location |            1 | location    | A         |       38168 |     NULL | NULL   |      | BTREE      |         |
| pool  |          1 | pdex     |            1 | gender      | A         |           2 |     NULL | NULL   |      | BTREE      |         |
| pool  |          1 | pdex     |            2 | username    | A         |     9275039 |     NULL | NULL   |      | BTREE      |         |
| pool  |          1 | pdex     |            3 | id          | A         |     9275039 |     NULL | NULL   |      | BTREE      |         |
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
8 rows in set (0.00 sec)

mysql> show index from main.sent;
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| sent  |          0 | PRIMARY  |            1 | primary_key | A         |         351 |     NULL | NULL   |      | BTREE      |         |
| sent  |          1 | username |            1 | username    | A         |         175 |     NULL | NULL   |      | BTREE      |         |
| sent  |          1 | sdex     |            1 | campid      | A         |           7 |     NULL | NULL   |      | BTREE      |         |
| sent  |          1 | sdex     |            2 | username    | A         |         351 |     NULL | NULL   |      | BTREE      |         |
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

这是我的查询的解释：

```
----------------+
| id | select_type | table | type  | possible_keys | key  | key_len | ref   | rows    | Extra                                |
+----+-------------+-------+-------+---------------+------+---------+-------+---------+--------------------------------------+
|  1 | SIMPLE      | pool  | ref   | location,pdex | pdex | 5       | const | 6084332 | Using where                          |
|  1 | SIMPLE      | sent  | index | sdex          | sdex | 309     | NULL  |     351 | Using where; Using index; Not exists |
+----+-------------+-------+-------+---------------+------+---------+-------+---------+--------------------------------------+ 
```

这是台球桌的结构：

```
| pool  | CREATE TABLE `pool` (
`id` int(20) NOT NULL AUTO_INCREMENT,
`username` varchar(50) CHARACTER SET utf8 NOT NULL,
`source` varchar(10) CHARACTER SET utf8 NOT NULL,
`gender` varchar(1) CHARACTER SET utf8 NOT NULL,
`location` varchar(50) CHARACTER SET utf8 NOT NULL,
PRIMARY KEY (`id`),
KEY `username` (`username`),
KEY `source` (`source`),
KEY `location` (`location`),
KEY `pdex` (`gender`,`username`,`id`)
) ENGINE=MyISAM AUTO_INCREMENT=9327026 DEFAULT CHARSET=latin1 | 
```

这是发送表的结构：

```
| sent  | CREATE TABLE `sent` (
`primary_key` int(50) NOT NULL AUTO_INCREMENT,
`username` varchar(50) NOT NULL,
`from` varchar(50) NOT NULL,
`campid` varchar(255) NOT NULL,
`timestamp` int(20) NOT NULL,
PRIMARY KEY (`primary_key`),
KEY `username` (`username`),
KEY `sdex` (`campid`,`username`)
) ENGINE=MyISAM AUTO_INCREMENT=352 DEFAULT CHARSET=latin1 | 
```

这会产生语法错误，但开头的这个 WHERE 子句是我之后的内容：

```
SELECT pool.username
FROM pool
WHERE id < 1000
LEFT JOIN sent ON pool.username = sent.username
AND sent.campid = 'YA1LGfh9'
WHERE sent.username IS NULL
AND pool.gender = 'f'
AND (location = 'united states' OR location = 'us' OR location = 'usa'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:34:08.960

看起来它使用 pool.location 可以尝试添加性别索引，但可能没有太大帮助。将位置合理化为数据中的国家/地区代码，并编制索引可能会有用。

但是要添加的第一个索引对我来说看起来很野蛮，这可能会严重减少它必须测试的记录数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:41:39.877

拆分查询听起来不像是正确的方法。

更好的方法是从现有查询中获取一些记录，发送消息，然后继续获取。

* * *

您的查询可以从另一个复合索引中受益

```
pool( location, gender, username ) 
```

这应该允许从`sdex`您的新索引运行您的完整查询。

* * *

如果您真的想拆分查询，一种简单的方法可能是

```
SELECT MIN(id), MAX(id) FROM pool 
```

然后以 的步骤从 min 循环到 max `1000`，并添加`id >= r AND id < r+1000`到您的查询中。

如果您有间隙，这可能会返回`0`行，但它永远不会一次返回超过 1000 行。`pool`包含 ( `id`、`location`和`gender`可能)的不同复合索引`username`可能有助于此查询。

# c# - 从与 Exchange 不在同一域的服务器发送的 C# SMTP 为空白

> ID：10994464
> 
> 赞同：1
> 
> 时间：2012-06-12T10:08:52.660
> 
> 标签：c#, asp.net-mvc, email, smtp, exchange-server

我刚刚为 MVC 网站编写了一段代码，该网站使用 .NET`SmtpClient`通过我们的 Exchange 服务器发送 SMTP 电子邮件。它发送的电子邮件有一个 HTML 正文，其中包含指向网站上托管的图像和文件的链接。

电子邮件在我们的网络内部运行时可以正常发送，但是当它从不在我们域中的托管服务器上运行时，电子邮件会通过，但正文是空白的。有人知道为什么吗？是因为链接的图像或文件可能是潜在威胁并且来自不在域上的服务器，因此不受信任？

这是发送电子邮件的代码，它使用`MailDefinition`该类将指向文件的链接插入到他们要求下载的正文中：

```
MailDefinition md = new MailDefinition();
md.From = "test@testing.com";
md.Subject = "Test Email";
md.IsBodyHtml = true;

ListDictionary replacements = new ListDictionary();
replacements.Add("REQUESTED_LINK", @"C:\MyFile.pdf");

MailMessage email = md.CreateMailMessage(mailTo, replacements, content, new System.Web.UI.Control());

SmtpClient emailClient = new SmtpClient();
emailClient.Host = "MyExchangeServer";

emailClient.Send(email); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:49:06.550

我的猜测是[`MailDefinition.BodyFileName`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.maildefinition.bodyfilename.aspx)代码中缺失的值。

*包含消息正文的文件的名称。默认值为空。*

对开发或在内部服务器`BodyFileName`有一定的价值。托管服务器上的文件丢失，因此电子邮件正文为空。

请参阅此[示例以供参考](http://jesal.us/2008/10/send-templated-emails-using-maildefinition-object/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:09:55.703

已修复，原来包含电子邮件正文的 .html 文件尚未部署到实时服务器，因此电子邮件正文为空白。添加它可以解决问题，因此它毕竟不是安全问题。谢谢你的帮助

# hadoop - 使用 hadoop map reduce 连接非常大的数据集

> ID：10994470
> 
> 赞同：1
> 
> 时间：2012-06-12T10:09:13.883
> 
> 标签：hadoop

使用 hadoop map reduce 在 2 个非常大的数据集上执行连接的最佳方法是什么？分布式缓存或像数组列表这样的临时存储将无法存储中间数据，因为这两个数据集都非常大。

# php - 我们可以自定义facebook邀请朋友javascript api的高度和宽度吗？

> ID：10994472
> 
> 赞同：0
> 
> 时间：2012-06-12T10:09:30.687
> 
> 标签：php, facebook-graph-api, mobile, facebook-javascript-sdk

我正在开发一个移动网站，并且我已经将 facebook 邀请朋友 api 集成到其中。但是邀请朋友窗口不适合我的浏览器窗口。有没有办法自定义这个请求对话框的高度和宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:50:21.340

不，您无法使用任何参数来调整 facebook 提供的邀请朋友弹出窗口的大小。高度/宽度固定为特定尺寸。您可以尝试使用 jQuery 破解框架的宽度/高度。

# solr - 如何在 solr 中保留换行符

> ID：10994473
> 
> 赞同：1
> 
> 时间：2012-06-12T10:09:30.967
> 
> 标签：solr, dataimporthandler

我是 Solr 的新手。我已经成功地从我的数据库中索引了数据（使用 dataImporthandler） n 检索到的数据（使用 solr 管理页面）。

正在索引的表有一个字段类型为“*文本*”的列。索引时面临的问题是正在丢失数据库表中存在的换行符（*换行符**）*。

我正在将此字段索引到paragraph_t（动态字段）。因此，当我检索数据（使用 solr 管理控制台）时，该字段中的整个数据都在一个段落中（我想要换行符）

提前致谢。

# iphone - for(NSString *key in [rewards allKeys]) 使应用程序崩溃？

> ID：10994475
> 
> 赞同：0
> 
> 时间：2012-06-12T10:09:36.880
> 
> 标签：iphone, ios

我有一个应用程序，它有一个从 web 服务返回的字典。我正在将该字典传递给另一个视图控制器。

而在这个

```
NSDictionary *rewards=[rewardsdictionary objectForKey:@"rewards"];
NSLog(@"%@",rewards);

NSMutableArray *dataArray=[[NSMutableArray alloc] init];
for(NSString *key in [rewards allKeys])
{
    NSDictionary *dict1=[rewards objectForKey:key];
    [dataArray addObject:dict1];
}
self.rewardsarray=[[NSMutableArray alloc] init];
self.rewardsarray=dataArray; 
```

但是在这一行`for(NSString *key in [rewards allKeys])`中，应用程序正在崩溃。但是当我打印奖励或奖励字典时，值就在那里。

> -[__NSArrayM allKeys]：无法识别的选择器发送到实例 0x76636b0

有人可以帮我摆脱这个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T10:17:26.367

显然，`rewards`不是一个`NSDictionary`。这是一个`NSArray`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:28:13.253

在向其发送消息之前，使用 NSAssert 检查是否`rewards`为 an 。`NSDictionary``allKeys`

# android - 按钮可见性/不可见性问题。

> ID：10994480
> 
> 赞同：0
> 
> 时间：2012-06-12T10:09:49.127
> 
> 标签：android, button, visibility

我正在使用需要登录的android应用程序，现在我想要成功登录到我的应用程序后，登录按钮应该是不可见的，注销按钮应该是可见的，但是出现错误。

我正在使用这个功能：

```
login.setVisibility(View.GONE);    &    logout.setVisibility(View.VISIBLE); 
```

Eclipse 在 logcat 中给我错误，例如：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.rahul.cheerfoolz/com.rahul.cheerfoolz.CheerfoolznativeActivity}: java.lang.NullPointerException. 
```

主类

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

      session = new SessionID();
      Button login = (Button) findViewById(R.id.home_btn_feature_login);
      Button logout = (Button) findViewById(R.id.home_btn_feature_logout);

         int userID = SessionID.getUserID();

         System.out.println("value of the userID into the main page:====>"+userID);
         //  when user login then here I got the userID value

        if ((userID) > 0) {

            login.setVisibility(View.GONE);  //when Execute this give me error
            logout.setVisibility(View.VISIBLE);  //when Execute this give me error

        } else {

            login.setVisibility(View.VISIBLE); //when Execute this give me error
            logout.setVisibility(View.GONE); //when Execute this give me error

        }

    setContentView(R.layout.main);
    setHeader_home("");
    } 
```

主.xml

```
 <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="2"
        android:orientation="horizontal" >

   <!-- Here Login Button  -->

        <Button
            android:id="@+id/home_btn_feature_login"
            style="@style/HomeButton"
            android:drawableTop="@drawable/login_button"
            android:onClick="onClickFeature"
            android:text="@string/title_feature_login" />

   <!-- Here Logout Button  -->

        <Button
            android:id="@+id/home_btn_feature_logout"
            style="@style/HomeButton"
            android:drawableTop="@drawable/logout_button"
            android:onClick="onClickFeature"
            android:text="@string/title_feature_logout" />

        <Button
            android:id="@+id/home_btn_feature2"
            style="@style/HomeButton"
            android:drawableTop="@drawable/register_button"
            android:onClick="onClickFeature"
            android:text="@string/title_feature_register" />
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T10:10:55.600

您必须添加`setContentView(R.layout.main)`after`super.onCreate(savedInstanceState);` 或`before Accessing Any View from XML Layout File`。然后您的 Button 从 xml 获取 refrenced。并且在代码中无法从 main.xml 获取 Button refrence .so NullPointer 异常。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);<<<<<<<<<<<<<<ADD THIS LINE

    session = new SessionID();
    Button login = (Button) findViewById(R.id.home_btn_feature_login);
    Button logout = (Button) findViewById(R.id.home_btn_feature_logout); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T10:13:19.593

`setContentView(R.layout.main);`之后添加这个`super.onCreate(savedInstanceState);`

# php - Magento 产品图片链接

> ID：10994481
> 
> 赞同：0
> 
> 时间：2012-06-12T10:09:53.370
> 
> 标签：php, magento

我有一个关于我在 Magento 中遇到的小问题的问题。

创建产品时，您可以将多张图片上传到产品视图页面的主图片下方显示的产品库中。

我的问题是，是否可以像添加标签一样在产品后端添加指向每个图像的链接。

因此，当在产品视图页面上单击额外的图像时，它会将用户带到不同的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:25:29.267

我认为这是可能的，您必须在此基础上创建自己的模块。

# extjs - 如何在容器中滚动

> ID：10994483
> 
> 赞同：1
> 
> 时间：2012-06-12T10:09:57.690
> 
> 标签：extjs, extjs3

我以下列方式在 Ext.js 3.2 中使用容器

```
con = new Ext.Container( {
autoScroll: true,
... 
```

容器中有一个列表。但我发现我无法滚动容器。谁能帮我？

非常感谢

# amazon-web-services - 使用 AWS 的消息队列

> ID：10994486
> 
> 赞同：0
> 
> 时间：2012-06-12T10:10:02.853
> 
> 标签：amazon-web-services, amazon-sqs, amazon-sns

我正在使用 AWS 框架编写应用程序。如果 SQS 具有 FIFO 访问权限，那将是一个完美的框架！

我正在使用 SNS 将消息发布到队列，消息的顺序很重要。有谁知道可以使用的MQ，可扩展的等等。像可以使用的SQS？

我一直在考虑使用 ironMQ，但 SNS 似乎在接收消息时有问题？

（或者更好的是，如果您知道使用 SQS 排序消息的好方法）

谢谢，本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-28T08:55:50.777

如今，[Amazon Kinesis](https://aws.amazon.com/kinesis/)将是一个不错的选择。（提出问题时它不可用。）

Kinesis 捕获流中的数据，保持顺序并允许数据被重放，甚至被多个应用程序使用。

# r - 使用 R 从 XTS 对象中提取每月第一个工作日的返回

> ID：10994496
> 
> 赞同：9
> 
> 时间：2012-06-12T10:10:38.167
> 
> 标签：r, xts

我对 R 很陌生，如果我在解释这个问题时弄错了任何术语，我深表歉意。

我在 csv 文件中有一组每日返回数据，我已设法将其转换为 xts 对象。数据格式为：

```
 HighYield..EUR. MSCI.World..EUR.
2002-01-31          0.0144           0.0031    
2002-02-01          0.0056          -0.0132       
2002-02-02          0.0373           0.0356       
2002-02-03         -0.0167          -0.0644      
2002-02-04         -0.0062          -0.0332      
2002-02-05         -0.0874          -0.1112 
... 
```

我想创建一个脚本，它将找到该月的第一个工作日（从索引中的值范围），然后创建一个新的 xts 对象，其中包含这些返回。

例如，脚本运行后，我将有一个格式为 xts 的对象：

```
 HighYield..EUR. MSCI.World..EUR.
2002-01-31          0.0144           0.0031    
2002-02-28          0.0011          -0.0112       
2002-03-31          0.0222           0.0224       
2002-04-30         -0.0333          -0.0223      
2002-05-30         -0.0011          -0.0012      
2002-06-30         -0.0888          -0.0967 
... 
```

有人能帮助我吗？如果可能的话，解释脚本的每个部分在做什么。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-12T13:16:05.583

由于基础 R 语言的强大功能，您可以在一行中完成此操作：

```
 library(xts)
 data(sample_matrix)
 x <- as.xts(sample_matrix)
 do.call(rbind, lapply(split(x, "months"), first)) 
```

解释每个步骤在做什么：

```
 # Split the xts object into a list with an element for each month.
 x1 <- split(x, "months")
 # Loop over the list (x1) and call the first() function on each element.
 # This returns a new list where each element only contains the first observation
 # from each respective element in x1.
 x2 <- lapply(x1, first)
 # Call rbind() with all the elements of x2 as arguments to rbind()
 # Same as rbind(x2[[1]], x2[[2]], ..., x2[[N]])
 x3 <- do.call(rbind, x2) 
```

# c++ - 模板中有两个默认参数，这里有什么问题？

> ID：10994498
> 
> 赞同：5
> 
> 时间：2012-06-12T10:10:51.013
> 
> 标签：c++, visual-studio-2010, templates, default

下面的代码显示了 2 个 Foo 模板，每个模板都有 2 个默认参数，Foo1 有一个单独的原型，而 Foo2 没有，它们在其他方面是相同的。

为什么第一次调用 Foo1 会导致编译器（VS2010 Native C++）产生错误而其他 3 个工作？

```
#include <limits>

// not needed but to prevent answers in this direction...
#undef max
#undef min

template< typename T >
void Foo1( T v1 = std::numeric_limits< T >::min(), T v2 = std::numeric_limits< T >::max() );

template< typename T >
inline
void Foo1( T v1, T v2 )
{
    // ...
}

template< typename T >
inline
void Foo2( T v1 = std::numeric_limits< T >::min(), T v2 = std::numeric_limits< T >::max() )
{
    // ...
}

int main()
{
    Foo1<int>(0);  /* Will cause  error C2589: '::' : illegal token on right side of '::' */
    Foo1<int>(0, 10);  
    Foo2<int>(0);
    Foo2<int>(0, 10);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:24:18.200

这是[此处](https://connect.microsoft.com/VisualStudio/feedback/details/496593/msdn-forum-splitting-templated-function-with-default-argument-into-declaration-definition-gives-compilation-error)报告的编译器错误。解决方法似乎是：

> 感谢您提交此反馈。虽然我们认识到这是一个有效的编译器错误，但它在产品周期的这个阶段低于我们的分类栏。解决方法是在您声明它的地方定义模板函数。如果您担心为每个翻译单元重新编译模板函数对性能的影响，使用 PCH 文件应该可以消除这种开销。
> 
> 谢谢，Mark Roberts Visual C++ 团队

# c# - 使用多个 Regex 命令解析消息时的性能问题

> ID：10994507
> 
> 赞同：2
> 
> 时间：2012-06-12T10:11:10.047
> 
> 标签：c#, regex

使用多个正则表达式命令（总共大约 20 个）解析消息时，我遇到了性能问题：

为了提高效率，我有：

1) 按可能性对正则表达式命令进行排序。

2）确保一旦找到匹配项，我就会跳出匹配循环。

我想知道我是否可以进行任何其他改进，或者是否有更好的方法来解决我的问题。

调用代码：

```
 bool resolved = false;
        Match regexMatch = null;

        foreach (var resolverKvp in _resolvers)
        {
            if (resolverKvp.Key.Pattern.IsMatch(topicName))
            {
                regexMatch = resolverKvp.Key.Pattern.Match(topicName);
                //  Use the kvp value
                resolved = true;
                break;
            }
        } 
```

迭代的正则表达式命令示例：

```
 <add messagename="BackLayVolumeCurrencyOddsFormat" pattern="^.*/M/E_([0-9]+)/MEI/MDP/(\d{1,3})_(\d{1,3})_(\d+)_([a-zA-Z]{3})_([1-3])$" assembly="Client.Messaging"
      type="Client.Messaging.TopicMessages.BackLayVolumeCurrencyOddsFormatResolver">
    </add>

    <add messagename="Market1" pattern="^.*/M/E_([0-9]+)$" assembly="Client.Messaging"
      type="Client.Messaging.TopicMessages.Market1Resolver">
    </add> 
```

数据示例：

```
regex 1:
6/E/E_1/E/E_511010/E/E_527901/E/E_631809/E/E_631810/E/E_631811/M/E_1379656/MEI/MDP/10_10_1_USD_3

regex 2:
1/E/E_1/E/E_100004/E/E_190539/E/E_632113/E/E_632120/M/E_1380084 
```

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:14:07.230

首先（小）值得注意的是，找到的正则表达式被执行了两次：一次检查匹配，然后查找匹配。不确定 ismatch 给出了多少性能差异，但您可以结合检查并找到：

```
regexMatch = resolverKvp.Key.Pattern.Match(topicName);
if (regexMatch.Success)
{
      //etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:20:37.287

要尝试的一件事是避免`.*`在你的表达中。在您的示例中，它似乎不需要，而且它不是免费的，尤其是在表达式不匹配的情况下。一个非常快速而肮脏的测试显示，您的模式 1 和没有该`^.*`部件的等价物之间有两倍的系数。

此外，`.*`在表达式中多次使用可能会导致[灾难性的回溯](http://www.regular-expressions.info/catastrophic.html)。

# haskell - GADT 与 MultiParamTypeClasses

> ID：10994508
> 
> 赞同：14
> 
> 时间：2012-06-12T10:11:11.057
> 
> 标签：haskell, gadt

我正在努力掌握`GADTs`，并且我查看了GHC 手册中的[GADT 示例。](http://www.haskell.org/ghc/docs/7.4.2/html/users_guide/data-type-extensions.html#gadt)据我所知，可以用以下方法做同样的事情`MultiParamTypeClasses`：

```
{-# LANGUAGE MultiParamTypeClasses, FunctionalDependencies,
    FlexibleInstances, UndecidableInstances #-}

class IsTerm a b | a -> b where
  eval :: a -> b

data IntTerm  = Lit Int
              | Succ IntTerm
data BoolTerm = IsZero IntTerm
data If p a   = If p a a
data Pair a b = Pair a b

instance IsTerm IntTerm Int where
  eval (Lit i)      = i
  eval (Succ t)     = 1 + eval t

instance IsTerm BoolTerm Bool where
  eval (IsZero t)   = eval t == 0

instance (IsTerm p Bool, IsTerm a r) => IsTerm (If p a) r where
  eval (If b e1 e2) = if eval b then eval e1 else eval e2

instance (IsTerm a c, IsTerm b d) => IsTerm (Pair a b) (c, d) where
  eval (Pair e1 e2) = (eval e1, eval e2) 
```

请注意，我们有与 GHC 示例中完全相同的构造函数和完全相同的代码`eval`（跨实例定义传播）`GADTs`。

那么所有的绒毛是`GADTs`什么？有什么我可以做而`GADTs`我不能做的事情`MultiParamTypeClasses`吗？还是他们只是提供了一种更简洁的方式来做我可以做的事情`MultiParamTypeClasses`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-12T10:49:39.357

您可以方便地将相同类型但具有不同构造函数的 GADT 值放入容器中，

```
map eval [Lit 1, If (IsZero (Lit 3)) (Lit 4) (Succ (Lit 6))] 
```

很简单，但至少很难使用不同的类型和具有功能依赖关系的 MPTC 来获得相同的结果。在您的多参数类型类方法中，`Lit`并且`If`是不同类型的构造函数，因此需要一个包装类型将它们放入同一个容器中。据我所知，包装器类型必须是存在类型 à la

```
data Wrap t = forall a. (IsTerm a t) => Wrapper a 
```

带着

```
instance IsTerm (Wrap t) t where
    eval (Wrapper e) = eval e 
```

以确保某种类型的安全性和在列表中`map`运行的能力`eval`。所以你已经中途或更多地回到了 GADT，减去了便利。

我不确定 GADT 是否允许您做任何没有它们您无法实现的事情，但有些事情会牺牲**很多**优雅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:53:45.017

`GADTs`只是允许您提供更自然的构造函数定义方式，并允许在类型级别和构造函数上一起使用匹配（我认为，如果没有它，您将无法做到这一点）。

```
{-# LANGUAGE GADTs #-}
data Term a = (a ~ Bool) => IsZero (Term Int)
            | (a ~ Int) => Lit Int
eval :: Term a -> a
eval (IsZero t) = eval t == 0
eval (Lit a) = a 
```

# iphone - 如何在 Facebook iPhone 上向朋友发送直接消息

> ID：10994511
> 
> 赞同：3
> 
> 时间：2012-06-12T10:11:23.667
> 
> 标签：iphone, objective-c, facebook, ios5, fbconnect

如何通过对话向 Facebook iPhone sdk 上的朋友发送直接消息？我已尝试过此代码但无法正常工作？

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"I'm using the MyFBTest App", @"name",@"http://listentowebby.com/wp-content/themes/cw/images/facebook.png", @"link",nil];

AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[[delegate facebook] dialog:@"send"
                  andParams:params
                andDelegate:self]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:25:25.910

you can't send direct message in mobile devices says facebook documentation [send dialog](http://developers.facebook.com/docs/reference/dialogs/send/)

and the method you are using will only send the request, and if the user to whom sending request, has installed the app, then it will able to read the message else not.

one other way to convey your message is to post on friends wall, for which you may refer to this thread [facebook ios post on friend's wall](https://stackoverflow.com/questions/4126400/api-facebook-iphone-possible-to-post-to-a-friends-wall)

# android - 无法在同一个 Android 布局中使用两个或多个链接

> ID：10994513
> 
> 赞同：1
> 
> 时间：2012-06-12T10:11:25.430
> 
> 标签：android, textview

我的问题是我无法在同一布局中打开两个相同定义的链接，只能打开第一个。如果我长按第一个，会出现一个上下文菜单，上面写着“复制 URL”，但对于第二个，它不会。链接是有效的。

这是定义的两个文本视图：

```
<TextView
    android:id="@+id/txt_id1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:autoLink="web" 
    android:gravity="center_horizontal"
    android:linksClickable="true"
    android:text="@string/text1"
    android:textColor="@color/white"
    android:textColorHighlight="@color/white"
    android:textSize="18sp" />

<TextView
    android:id="@+id/txt_id2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:autoLink="web"
    android:gravity="center_horizontal"
    android:linksClickable="true"
    android:text="@string/text2"
    android:textColor="@color/white"
    android:textColorHighlight="@color/white"
    android:textSize="18sp" /> 
```

我正在摩托罗拉 Defy（约旦）上运行带有 Android 2.3.7（CyanogenMod）的自定义 rom。我在模拟器上试过了，还是不行。

任何答案都非常感谢。

* * *

编辑：

```
<string name="text1"><a href="http://www.google.com">http://www.google.com</a></string>
<string name="text2"><a href="http://www.wikipedia.org">Text2</a></string> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:30:39.850

你猜怎么着。如果我这样做： `<string name="text1"><a href="http://www.google.com">Text1</a></string>` 它带有下划线、突出显示等作为链接，但它不会将我重定向到所需的页面。

相反，如果我在 textview 中插入这个字符串`android:text="http://www.google.com"`，它也会被加下划线并突出显示为链接，但这一次它将我重定向到所需的页面。

这意味着我不需要任何`<a>`s。

# sql - Rails - 多个模型之间的公共字段/报告数据 - STI、hstore 或拆分表？

> ID：10994514
> 
> 赞同：1
> 
> 时间：2012-06-12T10:11:25.757
> 
> 标签：sql, ruby-on-rails, postgresql, database-design

我有一个 Rails 应用程序，其中有一组模型（我们称之为它们`Events`），它们有一些共同的字段（、、、`date`）`title`，`user_id`但是我需要一些“子类型”。A`SalesEvent`可能有一个`article_id`和一个`amount`。一个`InterviewEvent`可能有一个`comments`字段。等等。

我知道我需要满足 3 个业务要求：

1.  在某些情况下，我会想将它们`Events`作为一个整体来构建（即“`Events`为该用户获取所有信息，并按时间顺序对它们进行排序，按月分组”）
2.  在其他情况下，我只需要“子类型”（“获取该用户出售的所有文章”）。
3.  子类型的数量可能适中（仍待定，但我们估计大约 20 个，具体取决于用户反馈）

我正在思考如何构建表格以支持此模型。我提出了 5 种可能的方法来对此进行建模，但每种方法都有其自身的缺点。

*   选项 A：**单独的表格**-`sales_events`和`interview_events`. 这将使 2) 非常简单，并且 3) 可行，但是 1) 实施起来会**非常**麻烦。
*   选项 B：**单表继承**。这将或多或少容易地解决 1) 和 2)，但存在需要越来越多的可空字段的问题，这与 3) 不兼容
*   选项 C：**使用`hstore`**- 因为我们在生产中使用 Postgres，我们可以使用[hstore](http://softa.github.com/activerecord-postgres-hstore/) - 我们将有一个由“类型”字符串字段控制的“数据”字段。这将解决 1)、2) 和 3)，但将我们与 postgresql 联系在一起，并且我们将使用我们不太熟悉的技术实现关键业务对象。如果可能的话，我宁愿避免这种情况。
*   选项 D：**带有多态链接的事件表`***_event_data`**。我们基本上会有一个带有 type 和 event_data_id 的事件表，然后我们会有`sale_event_data`,`interview_event_data`等。这很好地满足了 1) 和 3)，但是 2) 比其他方法有点弱，因为会有很多连接参与将事件与其数据联系起来。
*   选项 E：**销售`has_one`：事件**。这与选项 D 的作用相同，只是“与其他人的链接”位于“数据”部分。也解决了1）和3），也涉及到了2）中的一些join，但是看起来更“干净”了一些；这里没有多态关联，只有“常规” sql 关联。

现在我倾向于使用选项 E。但我想知道是否有人认为它有明显的劣势，或者其他选项中的一个更大的好处，或者我没有想到的更好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:39:50.877

我已经使用了几乎所有你建议的选项。虽然出于以下原因我会消除选项 A、B 和 D，但我不能谈论 C，因为我不知道`hstore`也不使用 Postgres：

*   选项 A：如您所说，**单独的表**将很难维护。每次您想要更改**events**的结构时，都必须在所有**sub_events**表上进行。
*   选项B：**单表继承**，我用过很多，弃了。我觉得你在数据库中看到的和你的模型看起来之间存在很大的设计缺陷。也有很多 nil 字段。
*   选项 D：**带有指向 *_event_data 的多态链接的事件表**。多态表不是为了这个目的。它们是一种`type`在模型中拥有不同字段的方法，因此您可以在不明确指定类型的情况下引用它。

选项 E 看起来不错，但是外键应该存储在哪里？很难说，并可能导致难以维护的情况。

就个人而言，我会使用**我想编写的代码**，什么会使使用它并在以后更容易阅读。我喜欢更具体的东西。我会简单地改变我命名模型的方式，以满足我的需求。你必须有创意！

我宁愿写这样的东西：

```
conference.event_information.users OR
sales_event.settings.title OR
interview.shared_information.comments OR
event.interview_details.starting_at 
```

对于所有这些例子，我会使用经典`has_many`和`belongs_to`关系。

我认为数据类型和继承的整个概念会使您处于无法解决问题或使事情变得更清晰的情况。有时您只需要以不同的方式看待事物。

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:35:02.720

默认情况下，Rails 不支持多表继承，但事实证明可以非常接近地对其进行建模。

见这篇文章：

[http://mediumexposure.com/multiple-table-inheritance-active-record/](http://mediumexposure.com/multiple-table-inheritance-active-record/)

基本上，它使用一个模块来“修改”选项 D。我还在思考 Wawa Loo 的答案，但这一个也值得考虑。

编辑：关于多表继承的更多信息：一个名为“citier”的宝石[http://peterhamilton.github.com/citier/index.html](http://peterhamilton.github.com/citier/index.html)

EDIT2：我最终使用了multiple_table_inheritance：

[https://github.com/mhuggins/multiple_table_inheritance](https://github.com/mhuggins/multiple_table_inheritance)

但我对结果不是很满意。这可能是让业务数据与持久性策略（如 ActiveRecord 所做的那样）紧密耦合并没有多大帮助的地方之一。它可以很好地完成这项工作，但并不完美（值得注意的是，实例方法可以“继承”，但不能“继承”类方法。范围之类的东西必须在每个子类上单独重复/混合）。

# css - 左右浮动

> ID：10994515
> 
> 赞同：36
> 
> 时间：2012-06-12T10:11:29.403
> 
> 标签：css, css-float

这个问题困扰了我一段时间。所以我为我的问题创建了一些视觉描述

首先是我的 HTML 结构，我有 6 个 div。前 3 个向左浮动，最后 3 个向右浮动。最后一张图片显示了我想要但似乎无法得到的结果。有人可以在这里帮助我吗

编辑//对不起，我的 HTML 和 CSS

```
<style>
    .left { float:left; }
    .right { float:right; }
</style>
<div id="container">
   <div class="left"></div>
   <div class="left"></div>
   <div class="left"></div>
   <div class="right"></div>
   <div class="right"></div>
   <div class="right"></div>
</div> 
```

注意：我不能做一个左右左右选项，因为我通过查询从 PHP 获取我的数据到我的数据库..第一个查询向左第二个查询向右....谢谢一堆

/编辑

![这是我的 HTML 结构的模型](../Images/6f0598f2f80348dce7f9f1974f7c0f61.png)

我的花车导致了这个

![这是我目前的结果](../Images/cf534009a1396b067bf291ffa264db72.png)

这就是我要的

![我要这个](../Images/6bb74fd80766aff87fa47d8500453bab.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-12T10:14:59.293

向左浮动，向右浮动，并首先给出 clear:both 属性

```
<div class="left clear"></div>
<div class="right"></div>
<div class="left clear"></div>
<div class="right"></div> 
```

css

```
.left {float:left}
.right {float:right}
.clear {clear:both} 
```

[例子](http://jsfiddle.net/WCzaN/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-12T10:48:08.483

您可以为此使用 CSS3`column-count`属性。像这样写：

```
.parent{
    -moz-column-count: 2;
    -moz-column-gap: 50%;
    -webkit-column-count: 2;
    -webkit-column-gap: 50%;
    column-count: 2;
    column-gap: 50%;
}
.parent div{
    width:50px;
    height:50px;  
    margin:10px;
}
.left{
    background:red;
}
.right{
    background:green;
} 
```

检查这个[http://jsfiddle.net/UaFFP/6/](http://jsfiddle.net/UaFFP/6/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-12T10:12:59.797

添加第一个左 div，然后添加第一个右 div，然后添加`<br style="clear:both">`并重复该过程。

**编辑**：这是一个更新的答案：

```
<div style="border:1px solid blue;float:right;height:100px;width:100px;clear:right;"></div>
<div style="border:1px solid red;float:left;height:100px;width:100px;clear:left;"></div>
<div style="border:1px solid blue;float:right;height:100px;width:100px;clear:right;"></div>
<div style="border:1px solid red;float:left;height:100px;width:100px;clear:left;"></div>
<div style="border:1px solid blue;float:right;height:100px;width:100px;clear:right;"></div>
<div style="border:1px solid red;float:left;height:100px;width:100px;clear:left;"></div> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-12T10:15:31.510

假设您在它们中间有另一个 div。然后使用这个时间顺序：

```
<div class="left"></div>
<div class="right"></div>
<div class="content"></div> 
```

或者，如果您不这样做，只需添加另一个为其提供样式`clear:both`的 div。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-12T10:30:40.520

```
<style type="text/css">

.parent {width:50px; border:1px solid red;}

.left {float:left; }

.right{float:right;}

.child{height:50px;width:50px;border:solid 1px green;margin:0 0 10px 0;}

</style>

<body>

<div class="left parent">
    <div class="child"></div>
    <div class="child"></div>
    <div class="child"></div>
</div>

<div class="right parent">
    <div class="child"></div>
    <div class="child"></div>
    <div class="child"></div>
</div>

</body>

</html> 
```

请注意，如果没有中央 DIV 会很奇怪，如果是这样的话，父 DIV 会向左浮动，例如宽度为 20% 60% 20%。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-30T18:18:40.530

`column-count`已经得到广泛支持 - [http://caniuse.com/#feat=multicolumn](http://caniuse.com/#feat=multicolumn) 所以如果旧浏览器不打扰你考虑使用它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-15T21:43:06.297

尝试这个：

```
.leftcolums {
  float: left;
}

.rightcolums {
  float: right;
}

.clear {
  clear: both;
}
```

```
<div class="leftcolums">
  <div class="left">1</div>
  <div class="left">2</div>
  <div class="left">3</div>
</div>
<div class="rightcolums">
  <div class="right">4</div>
  <div class="right">5</div>
  <div class="right">6</div>
</div>
<div class="clear">7</div>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-12T10:19:47.263

使用 :nth-child 选择器并在 2 个 div 后清除：

```
​div {
    width: 50px;
    height: 50px;
    background-color: red;
    float: left;
}
div:nth-child(2n) {
    background-color: green;
    float: right;
} 
```

[活生生的例子](http://jsfiddle.net/nSDcb/)

否则使用这个相当hacky的方法，它不需要额外的标记：

```
div {
    width: 50px;
    height: 50px;
    background-color: red;
    float: left;
}
div:nth-child(n) {
    clear: both;
}

div:nth-child(2n) {
    background-color: green;
    float: right;
    margin-top: -50px; //match this to the div height
} 
```

​现场 [示例](http://jsfiddle.net/nSDcb/1/)

# string - 通过 TCL 脚本中的字符串解析

> ID：10994516
> 
> 赞同：2
> 
> 时间：2012-06-12T10:11:31.007
> 
> 标签：string, tcl

我需要解析数组并找出 TCL 脚本中特定位置的值

例如，我有一个字符串

> 设置变量“00 01 02 03”

我需要解析 var 以找到第三个条目 (02) 中的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T10:16:21.607

您需要的是一份 TCL[清单](http://www.tcl.tk/man/tcl8.5/TclCmd/list.htm)。请记住索引计数器从 0 开始，因此将 2 传递给**lindex**以查找第 3 个元素

```
% set my_list [list 00 01 02 03]
00 01 02 03
% lindex $my_list 2
02 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T10:18:40.640

您的字符串可以被解释为一个列表，因此您可以`lindex`用来获取第三个列表元素（从索引 0 开始计数）：

```
lindex $var 2 
```

更好的是（并且也可以使用不同的分隔符）：

```
lindex [split $var " "] 2 
```

# c# - Zedgraph 上的自定义数据表

> ID：10994533
> 
> 赞同：2
> 
> 时间：2012-06-12T10:12:35.800
> 
> 标签：c#, markers, zedgraph

有什么方法可以在 ZedGraph 控件上添加自定义数据表，我使用两个动态标记，当用户更改标记并且需要显示相应的数据点时。

```
// Resize The Plot Area
Rectangle rc = zedGraphControl1.Bounds;
rc.Height = Convert.ToInt32((rc.Height) * 0.85);
rc.Width = rc.Width - 10;

// Link the new phane
Graphics g = zedGraphControl1.CreateGraphics();

pane.ReSize(g, rc); 
```

上面的代码是调整绘图区域大小的示例，我想在 x 轴下方添加数据表或文本。

# mysql - MySQL 将视图列从 BIGINT 更改为 BIT

> ID：10994538
> 
> 赞同：1
> 
> 时间：2012-06-12T10:12:45.483
> 
> 标签：mysql, sql

我有一张这样的桌子。

```
(BIGINT)     (BIGINT)
PLAYER_ID    FRIEND_ID
----------------------
1            2
2            1
1            3 
```

我想我可以将视图设为

```
SELECT * FROM FRIEND F1 LEFT OUTER JOIN FRIEND F2 ON F1.FRIEND_ID = F2.PLAYER_ID 
```

印刷

```
F1.PLAYER_ID    F1.FRIEND_ID    F2.PLAYER_ID    F2.FRIEND_ID
[BIGINT]        [BIGINT]        [BIGINT]        [BIGINT]
------------------------------------------------------------
1               2               2               1
2               1               1               2
1               3               NULL            NULL 
```

我可以制作一个代表那些 F2 作为 BIT 存在的视图吗？

```
F1.PLAYER_ID    F1.FRIEND_ID    BACK
[BIGINT]        [BIGINT]        [BIT]
-------------------------------------
1               2               1     // exist (1 -> 2)
2               1               1     // exist (2 -> 1)
1               3               0     // no backing relation (3 -> 1) 
```

更新 - - - - - - - - - - - - - - - - - - - - - - - - - -----------------

抱歉，上面的查询并不完美。

带有@Romil 答案的查询必须这样写。

```
SELECT
    F1.PLAYER_ID,
    F1.FRIEND_ID,
    CASE WHEN F2.FRIEND_ID IS NULL THEN 0 ELSE 1 END AS BACK
FROM FRIEND F1
    LEFT OUTER JOIN FRIEND F2
        ON F1.FRIEND_ID = F2.PLAYER_ID AND F1.PLAYER_ID = F2.FRIEND_ID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:15:19.780

```
SELECT *, EXISTS (SELECT * FROM FRIEND WHERE PLAYER_ID = F1.FRIEND_ID) AS BACK
FROM   FRIEND AS F1 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/42836/2)上查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T10:15:11.497

```
SELECT F1.PLAYER_ID, 
       F2.PLAYER_ID, 
       CASE 
         WHEN F2.PLAYER_ID IS NULL THEN 0 
         ELSE 1 
       end AS Back 
FROM   FRIEND F1 
       LEFT OUTER JOIN FRIEND F2 
                    ON F1.FRIEND_ID = F2.PLAYER_ID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T10:17:27.983

你可以尝试一些类似的东西

```
SELECT F1.*, if(F1.FRIEND_ID = F2.PLAYER_ID,1,0) FROM FRIEND F1 LEFT JOIN FRIEND F2 ON F1.FRIEND_ID = F2.PLAYER_ID 
```

# java - Java：通过文件写入输出流

> ID：10994539
> 
> 赞同：1
> 
> 时间：2012-06-12T10:12:52.853
> 
> 标签：java, file, md5, outputstream

我不确定这是否可以实现。

我有一个第三方库，它有一个接受的函数`File`：

```
String function(File file); 
```

此功能将简单地从云端下载一些内容并写入该文件。

现在，我有一个特殊`OutputStream`的内部计算文件的 MD5。当数据通过流时，会计算 MD5。

由于我无法更改库的签名，无论如何我仍然可以使用接受文件的函数，但让数据通过我的`OutputStream`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:14:59.157

不是以独立于平台的方式使用标准 API。

在 *nix（也许还有 windows）中，您可以创建一个 LIFO 文件，将其传递给库函数，您可以自己阅读该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:20:00.087

如果您无法访问库的源代码，您别无选择，只能在库函数编写完成后读取文件。当然，前提是该库不提供写入 OutputStream 而不是直接使用文件的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:14:45.893

下载 lib 的源代码，对其进行修改并编译 JAR 文件。输出流并不意味着这是一个文件。它可以是任何东西。

# php - 关于面向对象设计和包装方法的建议

> ID：10994543
> 
> 赞同：1
> 
> 时间：2012-06-12T10:13:03.110
> 
> 标签：php, oop, factory

我有一个包含配置以及一些特定于状态的方法的 State 类。我还有一个工厂类，我从中继承了我的 MVC 类，它也引用了这个 State 对象。这确保我所有的 MVC 对象都具有特定的与状态相关的功能。例如，我的 State 类包括设置和读取缓存或会话的方法。

我的 Factory 类有许多只是包装器的方法，如下所示：

```
public function myFunction($data){
    $this->State->myFunction($data);
} 
```

想法是这些方法是在 Factory 中定义的，但实际上是由 State 对象执行的。这允许我在编写代码时调用： `$this->myFunction();`而不是包含 State 的较长的。

我对 PHP 内部的工作方式知之甚少，但这有效吗？我的想法是，因为我通常只有一个 State 对象实例，所以在我的 Factory 类中包含方法包装器会更好，因为否则这些方法将包含很多大部分时间不使用的代码。但我不确定 PHP 在内部是如何工作的。

有时我可以有十几个具有父工厂类的对象，并且它们都引用同一个 State 对象。在 Factory 中定义包装器方法是否有效，只需调用 State 的方法，而不是直接处理 State？还是我只是为整个系统增加了额外的开销？

我的想法是，如果 Factory 只是一个可继承的类并包含许多功能的包装器，那么我可以更有效地简化开发。如果您继承的类具有包装器而不是方法中完全定义的代码，它会节省内存吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T00:04:31.130

不，这样的包装器没有性能优势。实际上，您得到的只是性能的极小损失。

更重要的是，这种方式隐藏了依赖关系，这可能会使代码的维护变得更加困难。

* * *

## 关于你的话题的一些想法

我的印象是你*做错了^(tm)*。以下是我对您在问题中所写内容的看法：

*   该类是否`State`负责配置*或*“状态特定方法”？

    有这样的东西[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)，它指出，每个类都应该有一个单一的责任。你也可以说，每个班级应该只有一个赛季可以改变。

*   为什么你的“MVC 类”从`Factory`类继承？

    在面向对象的代码中，关键字`extends`表示类之间的**is-a** 关系。拥有它是可以的`class Oak extends Tree`，但是当你写作时`class User extends Table`，这完全是精神错乱......而且有点侮辱。[LSP](http://en.wikipedia.org/wiki/Liskov_substitution_principle)涵盖了这一点（为了简化解释：[看这里](http://www.globalnerdy.com/wordpress/wp-content/uploads/2009/07/liskov_substitution_principle_small.jpg)）。

*   你误解了`Factory`模式的目的。

    工厂是一种创造模式。这意味着，工厂的目的是返回对象实例。`State`您应该将其注入每个创建的结构中，而不是继承一些提供对实例的访问的方法。

    ```
    class Factory
    {
        protected $state = null;

        public function __construct( $state )
        {
            $this->state = $state;
        }

        public function create( $name )
        {
            $instance = new $name( $this->state );
            return $instance;
        }
    } 
    ```

    这将具有额外的好处，即`Factory`创建哪个实例的所有结构共享同一个`State`实例。

*   似乎您正在尝试让全局状态考虑您的代码库

    如果您的应用程序中的每个人都需要访问 的实例`State`，那么整个架构就存在严重问题。您最终会遇到所有层中都存在单个对象的情况，从而导致抽象的重大泄漏。您基本上只是隐藏了一个全局变量。

# linux - 在linux中对客户端断开做出反应

> ID：10994550
> 
> 赞同：0
> 
> 时间：2012-06-12T10:13:19.860
> 
> 标签：linux, multithreading, sockets

我正在编写一个简单的套接字守护程序，女巫监听一个端口并读取传入的数据。它工作正常，直到我选择断开客户端与服务器的连接......然后它进入无限循环 recv() 返回最后一个数据包永远不会到达-1。我的问题是如何检测到客户端已断开连接并关闭线程/套接字 el

我的线程如下：

```
void * SocketHandler(void* lp){
    int * csock = (int*)lp;
    int test = 0;

    char buffer[1024];
    int  buffer_len = 1024;
    int  bytecount,ierr;
    memset(buffer,0,buffer_len);
    while (test == 0)
    {
    if ((bytecount = recv(*csock, buffer, buffer_len, 0))== -1){

        close(csock);
        free(csock);
        test++;
        return 0;
    }
    else
    {
        syslog(LOG_NOTICE,"%s",buffer);

    }
    }
    return 0;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:18:42.697

干净关闭的套接字将以`ZERO`读取结束，而断开的连接是返回的错误状态`-1`。你需要赶上`0`你的recv的回报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:27:38.850

这里发生的情况是您的终端可能无法检测到套接字已死的事实（特别是，如果您只是从中读取）。

你可以做的是在套接字上设置keepalive。这将打开套接字活跃度的定期检查。但不要期望快速反应，默认超时时间约为 20 分钟。

```
i = 1;
setsockopt(sock, SOL_SOCKET, SO_KEEPALIVE, (char *)&i, sizeof(i)); 
```

另一种选择是进行自己的保持活动通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:44:02.633

`recv()`将通过返回指示正确关闭套接字`0`（有关详细信息，请参见[手册页](http://linux.die.net/man/2/recv)）。`-1`当且仅当发生错误时它才会返回。您应该检查确切的错误，因为它可能表示连接失败，`errno`也可能不表示连接失败（或[假定的非阻塞套接字]都是可恢复的错误）。`EINTR``EAGAIN``EWOULDBLOCK`

旁注：无需将`fd`套接字的作为指针传递，并且由于您要返回 a`void *`您可能想要更改`return 0`为`return NULL`（只是为了便于阅读）。

# r - ggplot2 barplot 处理 1 个异常值将轴向上推

> ID：10994553
> 
> 赞同：2
> 
> 时间：2012-06-12T10:13:30.793
> 
> 标签：r, ggplot2

> **可能重复：**
> [使用ggplot2，我可以在轴中插入一个中断吗？](https://stackoverflow.com/questions/7194688/using-ggplot2-can-i-insert-a-break-in-the-axis)

我正在使用以下 ggplot2 代码生成 faces_grid 条形图：

```
ggplot(plotobj, aes(as.factor(gm) , peaks, fill=rvalue)) +
  geom_bar(stat="identity") +
  facet_grid(rvalue ~ .,scales="free") + 
  opts(legend.position = "none") 
```

这给出了以下情节（第一个方面的屏幕截图）： ![ggplot2条形图轴问题](../Images/3bd8f1b4a5b2ef93eb76c62a9e0c7481.png)

如您所见，由于 1 个异常值，y 轴被拉伸到相当高的值。我想做的是通过在 2e+05 之前有更多的滴答声来创建更合理的缩放比例，然后只有 1 个滴答声直接指向 5e+05。这样，缩放将不再是线性的，但它可以显示其中 1 个类别存在巨大的峰值。

无论如何用ggplot2做这个简单吗？这样做有R技巧吗？如果可能的话，我不想使用像 ylim 这样的东西来不再显示顶部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:36:41.937

您可以在 y 轴上使用转换。未经测试，因为您没有提供可重现的示例。

```
ggplot(plotobj, aes(as.factor(gm) , peaks, fill=rvalue)) +
    geom_bar(stat="identity") + facet_grid(rvalue ~ .,scales="free") + 
    opts(legend.position = "none") + scale_y_log10()
ggplot(plotobj, aes(as.factor(gm) , peaks, fill=rvalue)) +
    geom_bar(stat="identity") + facet_grid(rvalue ~ .,scales="free") + 
    opts(legend.position = "none") + scale_y_sqrt()
ggplot(plotobj, aes(as.factor(gm) , peaks, fill=rvalue)) +
    geom_bar(stat="identity") + facet_grid(rvalue ~ .,scales="free") + 
    opts(legend.position = "none") + coord_trans(y = "log10")
ggplot(plotobj, aes(as.factor(gm) , peaks, fill=rvalue)) +
    geom_bar(stat="identity") + facet_grid(rvalue ~ .,scales="free") + 
    opts(legend.position = "none") + coord_trans(y = "sqrt") 
```

# python - 包 __init__ 进行测试

> ID：10994557
> 
> 赞同：4
> 
> 时间：2012-06-12T10:13:58.187
> 
> 标签：python, unit-testing, initialization, package

我在一个项目中有以下结构：

```
app/
    __init__.py
    main.py
    tests/
        __init__.py
        test_a.py
        test_b.py 
```

我想为`tests`包下的测试初始化​​日志记录。我假设初始化代码在`app/tests/__init__.py`任何测试运行之前运行，但我发现情况并非如此。

如何使此初始化代码在以下情况下运行？

*   `python test_a.py`从命令提示符运行时
*   `test_a.py`在 eclipse\aptana\pycharm 下作为单元测试运行时
*   在 eclipse\aptana\pycharm 下运行整个测试套件时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:32:32.027

您可以使用记录器配置文件进行正常运行和测试，这是拥有不同配置的最安全方式。

“解决方法”的方法是重新创建记录器。您可能刚刚在 __init__.py 中添加了新的记录器？配置后，日志记录会保持其配置，并且只允许扩展。但是，您可以尝试重新创建整个记录器，如下所述： [Python logging before you run logging.basicConfig?](https://stackoverflow.com/questions/1943747/python-logging-before-you-run-logging-basicconfig) 例如：

```
root = logging.getLogger()
if root.handlers:
    for handler in root.handlers:
        root.removeHandler(handler)
# now create your test config
logging.basicConfig(format='%(asctime)s %(message)s',level=logging.DEBUG) 
```

将此代码添加到您的 test.py 文件中，或将其添加到 __init__.py 但您可能需要：

```
from tests import * 
```

使其在测试中执行。

# android - how to make my application device administrator in android?

> ID：10994558
> 
> 赞同：13
> 
> 时间：2012-06-12T10:14:01.450
> 
> 标签：android, device-admin

I am trying to make my application device administrator , i followed some notes provided on the same at [Device admin SAMPLE notes](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/DeviceAdminSample.html) or [TUTORIAL here](http://rootfs.wordpress.com/2010/09/09/android-make-your-application-a-device-administrator/#comment-98) but still could not implement it.

Can some one plz point out a working example of the same , i just need to make sure that to uninstall the application , user needs to enter the password which is set in my application.

Any help will be useful , Thanks in advance

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T11:14:59.813

> i just need to make sure that to uninstall the application , user needs to enter the password which is set in my application.

Fortunately, this is not possible for an SDK application. Even a device admin app cannot prevent the user from uninstalling it.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-09T03:31:18.220

I found the sample tutorial [here](https://github.com/twitter-university/DevicePolicyDemo). I hope it will help you.

**Warning** :::: If you click "Reset Device", your device will be factory reset because of

```
devicePolicyManager.wipeData(ACTIVATION_REQUEST); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-05T06:34:49.197

You cannot activate it programmatically but you can ask user to enable it at runtime Here is the complete solution

```
 var devicePolicyManager: DevicePolicyManager? = null
    var deviceAdmin: ComponentName? = null 
```

call this method in oncreate where ever it is needed

// call this method to check if its enabled or not

```
checkAndTakeUserToEnableEnableAdminApp()

private fun checkAndTakeUserToEnableEnableAdminApp() {
        devicePolicyManager = getSystemService(Context.DEVICE_POLICY_SERVICE) as DevicePolicyManager
        deviceAdmin = ComponentName(this, DeviceAdminReceiverClass::class.java)
        if (devicePolicyManager!!.isAdminActive(deviceAdmin!!)) {
        //do whatever is needed here is its active
        } else {
            showDeviceAdminPopup(this)
        }

    } 
```

Where `DeviceAdminReceiverClass`

```
import android.app.admin.DeviceAdminReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.widget.Toast;

/**
 * This is the component that is responsible for actual device administration.
 * It becomes the receiver when a policy is applied. It is important that we
 * subclass DeviceAdminReceiverClass class here and to implement its only required
 * method onEnabled().
 */
public class DeviceAdminReceiverClass extends DeviceAdminReceiver {
    static final String TAG = "DeviceAdminReceiverClass";

    /** Called when this application is approved to be a device administrator. */
    @Override
    public void onEnabled(Context context, Intent intent) {
        super.onEnabled(context, intent);
        Toast.makeText(context, "Device admin is enabled",
                Toast.LENGTH_LONG).show();
        Log.d(TAG, "onEnabled");
    }

    /** Called when this application is no longer the device administrator. */
    @Override
    public void onDisabled(Context context, Intent intent) {
        super.onDisabled(context, intent);
        Toast.makeText(context, "Device admin is disabled",
                Toast.LENGTH_LONG).show();
        Log.d(TAG, "onDisabled");
    }

    @Override
    public void onPasswordChanged(Context context, Intent intent) {
        super.onPasswordChanged(context, intent);
        Log.d(TAG, "onPasswordChanged");
    }

    @Override
    public void onPasswordFailed(Context context, Intent intent) {
        super.onPasswordFailed(context, intent);
        Log.d(TAG, "onPasswordFailed");
    }

    @Override
    public void onPasswordSucceeded(Context context, Intent intent) {
        super.onPasswordSucceeded(context, intent);
        Log.d(TAG, "onPasswordSucceeded");
    }

} 
```

**manifest**

```
<receiver
            android:name=".DeviceAdminReceiverClass"
            android:permission="android.permission.BIND_DEVICE_ADMIN" >
            <intent-filter>

                <!-- This action is required -->
                <action android:name="android.app.action.DEVICE_ADMIN_ENABLED" />
            </intent-filter>

            <!-- This is required this receiver to become device admin component. -->
            <meta-data
                android:name="android.app.device_admin"
                android:resource="@xml/device_admin" />
        </receiver> 
```

**@xml/device_admin**

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2010 The Android Open Source Project
     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at
          http://www.apache.org/licenses/LICENSE-2.0
     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->
<device-admin xmlns:android="http://schemas.android.com/apk/res/android"
    android:visible="false">
    <uses-policies>
        <watch-login />
        <force-lock />
    </uses-policies>
</device-admin> 
```

# javascript - 相当于 LinqPad 的 Javascript

> ID：10994559
> 
> 赞同：15
> 
> 时间：2012-06-12T10:14:03.273
> 
> 标签：javascript, linqpad

我想要一个小的 javascript 暂存器，我可以在其中编写和测试（非 DOM 相关的）函数。

我不喜欢使用 Firebug 控制台来执行此操作。

这样的东西作为独立应用程序存在吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T20:39:37.080

有[jQueryBuddy](http://jquerybuddy.codeplex.com/)，目前处于测试阶段。

它确实支持 DOM 操作，但如果您不需要它，则不必使用它。和 LinqPad 一样，它有一个非常相似的 Dump() 方法来查看对象。

# java - 从jsp调用java类

> ID：10994562
> 
> 赞同：0
> 
> 时间：2012-06-12T10:14:22.273
> 
> 标签：java, jsp

```
<%@ page language="java" import="DBConnect"%>

<%
try
{
System.out.println("\n--------------------");
System.out.println("\n loading ..");

DBConnect.connectToDb();

%>

<h3>Connection ok</h3>
<%
}
catch(Exception e)
{
e.printStackTrace();
}
%> 
```

给我以下错误如何在jsp中加载java类

```
org.apache.jasper.JasperException: Unable to compile class for JSP: 

An error occurred at line: 12 in the generated java file
The import DBConnect cannot be resolved

An error occurred at line: 16 in the jsp file: /applicationservices/fileshare/vm/TestJdbc.jsp
DBConnect cannot be resolved
13: System.out.println("\n--------------------");
14: System.out.println("\n loading ..");
15: 
16: DBConnect.connectToDb();
17: 
18: %>
19: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:31:12.317

您需要为应用程序创建一个包，类似于

```
com.yourappname.data 
```

然后在该包中创建您的 DBConenct 类或在那里重构它，以便当您需要导入该类时，您可以使用

```
import com.yourappname.data.DBConnect 
```

您可以在 jsp 中导入和使用该类

```
<%@page import="com.yourappname.data.DBConnect"%> 
```

附带说明一下，您不应该在 jsp 中进行任何数据库访问，而应该在 servlet 中进行所有数据访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:17:37.563

将包前缀添加到 DBConnect：

```
<%@ page language="java" import="full.package.path.DBConnect"%> 
```

`full.package.path`的实际包装在哪里`DBConnect`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:53:23.627

确保你看到

```
DBConnect.class 
```

在你的

```
WEB-INF/classes 
```

目录。如果它不存在，则如果您在 tomcat 或类似的环境中运行，则该类不在您的类路径中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T10:27:14.497

类应该是公共的，方法也应该声明为公共的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T11:47:45.510

您的页面没有错误。请再次清理并构建您的项目并重新测试它。将您的课程放在某个包中是一种很好的做法，但不使用它对于测试项目来说没有问题。

# ios - AVPlayer 进度滑块随用户拖动而变化

> ID：10994567
> 
> 赞同：5
> 
> 时间：2012-06-12T10:14:33.960
> 
> 标签：ios, avplayer

我正在使用 AVPlayer，它运行良好。

我放了滑块，它是根据玩家持续时间的进展。但是我想如果用户拖动滑块然后播放时间会相应地改变。即根据滑块位置向前或向后播放歌曲。

我试过了

```
-(IBAction)sliderChange:(id)sender{
[player pause];
CMTime t = CMTimeMake(slider.value,1);
[player seekToTime:t];    
[player play];
} 
```

但它再次将滑块带到起点。任何帮助将非常感激。

编辑（使用以下链接）

[AVPlayer 视频 SeekToTime](https://stackoverflow.com/questions/6329706/avplayer-video-seektotime)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T11:22:27.743

```
-(IBAction) valueChangeSliderTimer:(id)sender{
    [avplayer pause];
    isPlaying = FALSE;
    [btnPauseAndPlay setTitle:@"Play" forState:UIControlStateNormal];

    float timeInSecond = sliderTimer.value;

    timeInSecond *= 1000;
    CMTime cmTime = CMTimeMake(timeInSecond, 1000);

    [avplayer seekToTime:cmTime toleranceBefore:kCMTimeZero toleranceAfter:kCMTimeZero];
} 
```

编辑代码。

也试试这个链接： [试试这个链接](https://stackoverflow.com/questions/6329706/avplayer-video-seektotime)

# wcf - 如何在分布式缓存中缓存 DbCompiledModel（或仅其元数据）

> ID：10994569
> 
> 赞同：3
> 
> 时间：2012-06-12T10:14:40.527
> 
> 标签：wcf, caching, entity-framework-4.1, distributed-caching

我在一个带有大型 dbContext（800 多个实体）的实体框架代码优先项目上工作。

我遇到的问题是，第一次构建和编译元数据最多需要 30 秒，即使在 AppFabric WarmUp 的帮助下，我也无法让所有场服务器以这种方式延迟第一个请求 (WCF)模块。一种选择是将编译后的模型缓存在分布式缓存上，这样在实例化 DbContext 时，场中的其他服务器可以利用现有模型。

我发现了一些事情：

*   DbCompiledModel 实例不能被序列化；
*   DbCompiledModel 使用“ICachedMetadataWorkspace”的实现来缓存其元数据，称为“CodeFirstCachedMetadataWorkspace”；
*   'CodeFirstCachedMetadataWorkspace'（甚至是'ICachedMetadataWorkspace'）确实可以用来提供一个可序列化的工作空间（在'DbDatabaseMapping.ToMetadataWorkspace'方法的帮助下），它作为xml存储在分布式缓存上；

不幸的是，所有提到的类型都由 EF Code First 定义为内部类型（当然 DbCompiledModel 除外），直到现在我找不到合适的方法将其缓存在进程之外。

我尝试过的另一件事是拥有一个自定义 ObjectContext（在 DbContext 构造函数中使用它），在其中以编程方式生成/加载 csdl、ssdl 和 msl 映射（来自 db 模式），但实际视图（poco 类）仍然存在未映射到整个数据库上下文。

任何帮助深表感谢。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:07:02.207

试试 Arthur Vickers 在 EF 团队上发表的这篇博文：http: [//blog.oneunicorn.com/2012/04/21/code-first-building-blocks/](http://blog.oneunicorn.com/2012/04/21/code-first-building-blocks/)

它专门展示了如何缓存已编译的模型。

# linux - 将数组作为 linux 内核模块的命令行参数传递

> ID：10994576
> 
> 赞同：8
> 
> 时间：2012-06-12T10:15:06.490
> 
> 标签：linux, arrays, command-line, linux-kernel, kernel

我想将一组数据传递给 Linux 内核模块。

在内核中：

```
 int a[5]; 
 int count;
 module_param_array(a, int, &count, 0); 
```

但我不知道如何从命令行传递值。如果它是一个公正的变量，我将使用：

```
insmod k1.ko a=10 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-12T11:05:31.683

您可以通过

```
 insmod k1.ko a=10,20,30,40 
```

有关更多信息和示例，请参阅[Linux 内核模块编程](http://www.linuxtopia.org/online_books/linux_kernel/linux_kernel_module_programming_2.6/x323.html)。

# php - 允许的内存大小 33554432 字节用尽（尝试分配 11264 字节）

> ID：10994577
> 
> 赞同：-3
> 
> 时间：2012-06-12T10:15:07.907
> 
> 标签：php, apache, phpinfo

我正在尝试使用简单的表单上传文件。文件大小为 1.37 MB。
页面重新加载后，我收到此错误：

```
Allowed memory size of 33554432 bytes exhausted (tried to allocate 11264 bytes) 
```

这是来自`phpinfo()`：

```
Directive        Local Value    Master Value
memory_limit     32M            32M 
```

我前段时间做的最大上传文件是25MB。

这是我的 php.ini：

```
[PHP]

; Maximum allowed size for uploaded files.
upload_max_filesize = 25M

; Maximum size of POST data that PHP will accept.
post_max_size = 25M

;;;;;;;;;;;;;;;;;;;
; Resource Limits ;
;;;;;;;;;;;;;;;;;;;

; Maximum execution time of each script, in seconds
max_execution_time = 600

; Maximum amount of time each script may spend parsing request data
max_input_time = 600

; Maximum amount of memory a script may consume (8MB)
memory_limit = 32M 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:49:19.100

尝试使用其他脚本来调整文件大小，如果它不会帮助提高内存限制，如果你不能这样做，请上传较小的图像。没有其他选择。

# php - 过滤帖子变量并为每个组合打印一份简历

> ID：10994583
> 
> 赞同：1
> 
> 时间：2012-06-12T10:15:20.517
> 
> 标签：php, arrays, forms, post, filter

我喜欢下面：

```
<form name="crea">
        <table class="table table-striped table-bordered table-condensed">
            <thead>
                <tr>
                    <th>Articolo</th>
                    <th>Pellame</th>
                    <th>Colore</th>
                    <th>Fondo</th>
                    <th>Taglia</th>
                    <th>Quantit&agrave;</th>
                    <th>+/-</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <input type="text" name="articolo[]" class="input-small" />
                    </td>
                    <td>
                        <select name="pellame[]" class="input-medium">
                            <option value="nabuk">Nabuk</option>
                            <option value="vitello">Vitello</option>
                            <option value="capretto">Capretto</option>
                        </select>
                    </td>
                    <td>
                        <select name="colore[]" class="input-medium">
                            <option value="nero">Nero</option>
                            <option value="blu">Blu</option>
                            <option value="rosso">Rosso</option>
                            <option value="bianco">Bianco</option>
                            <option value="argento">Argento</option>
                            <option value="platino">Platino</option>
                            <option value="bronzo">Bronzo</option>
                            <option value="tortora">Tortora</option>
                        </select>
                     </td>
                    <td>
                        <select name="fondo[]" class="input-medium">
                            <option value="gomma">Gomma</option>
                            <option value="cuoio">Cuoio</option>
                            <option value="sughero">Sughero</option>
                        </select>
                    </td>
                    <td>
                        <select name="taglia[]" class="input-mini">
                            <option value="35">35</option>
                            <option value="36">36</option>
                            <option value="37">37</option>
                            <option value="38">38</option>
                            <option value="39">39</option>
                            <option value="40">40</option>
                            <option value="41">41</option>
                            <option value="42">42</option>
                            <option value="43">43</option>
                            <option value="44">44</option>
                            <option value="45">45</option>
                            <option value="46">46</option>
                            <option value="47">47</option>
                        </select>
                    </td>
                    <td>
                        <input type="number" min="1" max="200" name="qnt[]" step="1" value="1" class="input-mini"/>
                    </td>
                    <td></td>
                </tr>
            </tbody>

        </table>
                <input type="submit" class="btn btn-primary" name="genera" value="Genera" />

    </form> 
```

我在 ajax (jquery.post) 中提交了这个表单。在服务器端 PHP 接收数据，我需要打印提交表单的简历。例如是用户输入（对于行）：

ART1 - nabuk - 尼禄 - gomma - 35 - 1

ART1 - nabuk - 尼禄 - gomma - 39 - 5

ART1 - nabuk - 尼禄 - gomma - 40 - 9

ART1 - nabuk - 尼禄 - gomma - 45 - 1

ART1 - nabuk - rosso - gomma - 38 - 1

ART1 - nabuk - rosso - gomma - 38 - 1

ART1 - nabuk - 尼禄 - gomma - 38 - 1

ART1 - vitello - 蓝光 - gomma - 38 - 1

ART1 - vitello - 蓝光 - gomma - 40 - 1

ART561 - nabuk - 尼禄 - gomma - 40 - 1

简历将按前 4 个字段过滤，例如：

```
ART1 - nabuk  - nero - gomma

                                                            35->1
                                                            39->5
                                                            40->9
                                                            45->1 
```

另一份简历将是：

```
ART1 - vitello - blu - gomma 

                                                            38->1
                                                            40->1 
```

所以4个字段是过滤条件，另外4个是每个过滤规则的公共数据。该表使用javascript在高度上动态扩展/减少，我的问题是**如何过滤发送到PHP的帖子数据的示例。** 然后将它们写入文件，不是问题......

简历将打印在 PDF 文件上（这不是问题）。我已经尝试过foreach cicle，但我不知道如何选择标准......我认为这非常困难。（程序没有数据库）

任何人都可以帮助我吗？太感谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:24:24.817

我想我明白你想要做什么。以正确的方式将所有帖子数据添加到数组中，然后使用 array_multisort 应该负责您的过滤，以升序方式对简历进行排序。

我认为以下应该可以得到你的结果。请注意，您确实应该在表单标签 (action="mypage.php") 中添加一个操作，并且可能还有 method="post"。祝你好运。见下文。我希望这有帮助。

为了便于使用，我假设您也希望将输出放在表格中，但这很容易更改为 PDF 或其他内容的字符串。

```
//if all post variables are at least set...
if(isset($_POST['articolo']) && $_POST['articolo']!=''
    && isset($_POST['pellame']) && $_POST['pellame']!=''
    && isset($_POST['colore']) && $_POST['colore']!=''
    && isset($_POST['fondo']) && $_POST['fondo']!=''
    && isset($_POST['taglia']) && $_POST['taglia']!=''
    && isset($_POST['qnt']) && $_POST['qnt']!=''){

//resumes array
$resumes = array();

//Loop through each post row (based on the articolo), if all the same keys are set for the required post we have
// a valid resume.
foreach($_POST['articolo'] as $key=>$value){
    if(isset($_POST['articolo'][$key]) && $_POST['articolo'][$key]!=''
        && isset($_POST['pellame'][$key]) && $_POST['pellame'][$key]!=''
        && isset($_POST['colore'][$key]) && $_POST['colore'][$key]!=''
        && isset($_POST['fondo'][$key]) && $_POST['fondo'][$key]!=''
        && isset($_POST['taglia'][$key]) && $_POST['taglia'][$key]!=''
        && isset($_POST['qnt'][$key]) && $_POST['qnt'][$key]!=''){
        $resumes[] = array('articolo'=>$_POST['articolo'][$key],
            'pellame'=>$_POST['pellame'][$key],
            'colore'=>$_POST['colore'][$key],
            'fondo'=>$_POST['fondo'][$key],
            'taglia'=>$_POST['taglia'][$key],
            'qnt'=>$_POST['qnt'][$key]);
    }
}

//Multi sort our resumes array ASCENDING for each key.
array_multisort($resumes);

//set up our "current" article to start with, the details are blank so we print the first details always.
$current['articolo'] = '';
$current['pellame'] = '';
$current['colore'] = '';
$current['fondo'] = '';

//start output
echo '<table>';

//loop through the resumes
foreach($resumes as $thisResume){

    //Print this row
    echo '<tr><td>';
    //If this resume is of a different type (any of the keys/filters) then print the info, otherwise it's the
    // same as above so don't bother.
    if($thisResume['articolo']!=$current['articolo']
            || $thisResume['pellame']!=$current['pellame']
            || $thisResume['colore']!=$current['colore']
            || $thisResume['fondo']!=$current['fondo']){
        echo htmlentities($thisResume['articolo']
                .' - '.$thisResume['pellame']
                .' - '.$thisResume['colore']
                .' - '.$thisResume['fondo']);

    }
    //Echo the resume specific quantity info.
    echo '</td><td>'.htmlentities($thisResume['taglia']
                .' -> '.$thisResume['qnt']).'</td></tr>';

    //Update our current array info which stores the resume attributes for comparison of next resume.
    $current['articolo'] = $thisResume['articolo'];
    $current['pellame'] = $thisResume['pellame'];
    $current['colore'] = $thisResume['colore'];
    $current['fondo'] = $thisResume['fondo'];
}
//end output
echo '</table>';
}
?> 
```

# java - 使用 ImageIO 将文件后缀映射到内容类型

> ID：10994584
> 
> 赞同：2
> 
> 时间：2012-06-12T10:15:29.653
> 
> 标签：java, image, javax.imageio

我正在整理一些使用[javax.imageio.ImageIO](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html)的代码。我有用户请求的文件后缀，例如 jpg，我们转换保存的图像，然后以正确的格式将其呈现给用户。

现在我想将后缀映射到 MIME 类型。使用快速切换相对容易做到这一点，但鉴于 ImageIO 具有

*   `static Iterator<ImageWriter>` [`getImageWritersBySuffix(String fileSuffix)`](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html#getImageWritersBySuffix%28java.lang.String%29)
*   `static Iterator<ImageWriter>` [`getImageWritersByMIMEType(String MIMEType)`](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html#getImageWritersByMIMEType%28java.lang.String%29)

它必须知道后缀和 MIME 类型之间的映射，或者特定的[`ImageWriter`](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageWriter.html). 因此，必须有一种方法可以从我将要使用的作者那里获取内容类型。但我在 ImageWriter 上看不到任何返回内容类型的方法或属性，甚至是足够的。

本质上，我正在尝试完成以下代码块：

```
Iterator<ImageWriter> imageWriters = ImageIO.getImageWritersBySuffix(type);
ImageWriter imageWriter = imageWriters.hasNext() ? imageWriters.next() : null;
if (imageWriter != null) {
    contentType = imageWriter. ???
} 
```

谢谢！我猜的蛮力方法是获取所有支持的 MIME 类型，然后遍历这些类型，直到找到一个返回与 get-by-suffix 调用相同的 ImageWriter 的类型（如果确实很容易比较结果），但我是希望有比这更优雅的东西 - 我更喜欢切换到那个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:43:58.610

试试这个：

```
String[] mimeTypes = imageWriter.getOriginatingProvider().getMIMETypes(); 
```

# ios - 用部分动态填充分组的 uitableView

> ID：10994588
> 
> 赞同：0
> 
> 时间：2012-06-12T10:15:40.090
> 
> 标签：ios, dynamic, uitableview

我正在开发一个包含分组 UITableView 并使用 XMLparser 获取其数据的视图。

我的 XMLParser 将 NSDictionary 数据存储在 NSArray 中。

在 cellForRowAtIndexPath 我写这个是为了动态填充 UITableView：

```
-(UITableViewCell*) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"CellArticle";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

}
//configuration cellule

if(mParser.summaryArray == nil||[mParser.summaryArray count]==0)
{
//do nothing
}
else {
NSDictionary *sommaire=[mParser.summaryArray objectAtIndex:0];
cell.textLabel.text=[NSString stringWithFormat:@"%@",[sommaire objectForKey:kArticle]];
[mParser.summaryArray removeObject:[mParser.summaryArray objectAtIndex:0]];
}

return cell;
} 
```

问题是，当视图加载时，单元格设置正确，但是当我向下滚动表格时，单元格混合在一起，其中一些丢失了。此外，当我达到表限制时，它会崩溃并返回此错误：

***** -[UITableView _createPreparedCellForGlobalRow:withIndexPath:] 中的断言失败，/SourceCache/UIKit_Sim/UIKit-1914.84/UITableView.m:6061****

 ***** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“UITableView 数据源必须从 tableView:cellForRowAtIndexPath:”返回一个单元格****

请问有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:29:26.773

而不是你的`// do nothing`，你宁愿在那里做`return nil;`吗？否则，您只需返回一个填充有空白标签文本的单元格。

**编辑**

你能在这里添加一个 NSLog() 吗：

```
cell.textLabel.text=[NSString stringWithFormat:@"%@",[sommaire objectForKey:kArticle]];
NSLog(@"kArticle = '%@' text = '%@'", kArticle, cell.textLabel.text);
[mParser.summaryArray removeObject:[mParser.summaryArray objectAtIndex:0]]; 
```**

# javascript - 是否可以在“overflow-x:scroll”div-container 中证明 div 元素的可见性？

> ID：10994590
> 
> 赞同：2
> 
> 时间：2012-06-12T10:15:41.550
> 
> 标签：javascript, jquery, html, css

我目前正在尝试弄清楚如何获取溢出-x:scroll 容器内 div 的可见百分比的信息。我还需要知道它是来自右边还是来自左边？这有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:34:07.533

这可能会有所帮助。您可以编辑该问题的答案中的代码，以检查元素是从右侧还是左侧滚动。

[检查滚动后元素是否可见](https://stackoverflow.com/questions/487073/jquery-check-if-element-is-visible-after-scrolling)

要计算可见百分比，您只需将孩子的大小与父母的大小以及孩子的“左”偏移量进行比较。

（我稍后可能会添加一个代码示例）

**编辑**

我做了一个小例子，展示了如何检测“overflow-x:scroll” div-container 中该孩子的可见百分比以及**孩子**来自左侧还是右侧。

```
<style>
#parent {
    overflow-x:scroll;
    width: 300px;
    height:120px;
    border: solid 1px #000;
}
#child {
    width: 200px;
    height: 100px;
    background:#FF0;
    margin-left: 200px;
}
#scrollPane {
    width: 800px;
}
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
$(document).ready(function(){
    $("#button").click(function(){
        alert(percantageVisible() + "% of the child is visible");
    });
});

function percantageVisible()
{
    var parent = $("#parent");
    var parentLeftOffset = parent.offset().left;
    var parentRightOffset = parentLeftOffset + parent.width();

    var child = $("#child");
    var childLeftOffset = child.offset().left;
    var childRightOffset = childLeftOffset + child.width();

    if(childLeftOffset < parentLeftOffset && childRightOffset > parentLeftOffset && childRightOffset < parentRightOffset){
        // percentage from the left
        var width = child.width();
        var hiddenWidth = Math.abs(childLeftOffset - parentLeftOffset);
        var visibleWidth = width - hiddenWidth;
        return visibleWidth/(width/100);
    } 
    else if(childRightOffset > parentRightOffset && childLeftOffset < parentRightOffset && childLeftOffset > parentLeftOffset ){
        // percentage from the right
        var width = child.width();
        var hiddenWidth = Math.abs(parentRightOffset -childRightOffset);
        var visibleWidth = width - hiddenWidth;
        return visibleWidth/(width/100);
    }
    else if (childLeftOffset > parentLeftOffset && childRightOffset < parentRightOffset){
        // all visible
        return 100;
    }
    else{
        // invisible
        return 0;
    }
}
</script>

<div id="parent">
    <div id="scrollPane">
        <div id="child"> </div>
    </div>
</div>
<button id="button">check percentage</button> 
```

希望这可以帮助

# wcf - 视觉工作室 2010 wcf 调试

> ID：10994592
> 
> 赞同：0
> 
> 时间：2012-06-12T10:15:52.867
> 
> 标签：wcf, visual-studio-2010

我的 IIS 上有 2 个虚拟目录（第一个用于服务器开发，第二个用于客户端开发）。

每个目录指向不同的文件夹：c:\Server\ -> localhost/Server/service.svc c:\Client\ -> localhost/Client/service.svc（只要服务器“二进制文件”稳定，我就会将它们复制到客户端路径）

我的问题是，每当我为服务器启动调试器时（在 VS 中我将“使用本地 IIS Web 服务器”设置为“localhost/Server/service.svc”），断点也会从 localhost/Client/service.svc 中命中（也当“二进制文件”是不同的）。

我认为这是因为调试器连接到 w3wp.exe 。

我试图更改 AssemblyInfo.cs 但这没有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:58:18.113

我假设在同一个 IIS AppPool 下运行这两个网站。这意味着两个网站在同一个进程中运行。如果您希望 Visual Studio 仅调试服务器，则需要使用不同的 IIS AppPools。

你也可能有架构问题。通常客户端和服务器不需要相同的 service.svc。通常，您应该拥有一个包含 3 个项目的 Visual Studio 解决方案，配置如下：

1.  有合同的项目（包含数据和服务合同）
2.  带有 *.svc 文件的服务器项目
3.  包含为服务器端点生成的服务器引用的客户端项目。

客户端和服务器都引用合同。

# r - 重命名 t-test R 中的 x,y 向量

> ID：10994593
> 
> 赞同：1
> 
> 时间：2012-06-12T10:15:57.237
> 
> 标签：r

我正在 R 中进行 t 检验

```
out <- t.test(x=input1, y=input2, alternative=c("two.sided","less","greater"), mu=0, paired=TRUE, conf.level = 0.95) 
```

它给出了结果

```
Paired t-test

data:  input1 and input2
t = -1.1469, df = 7, p-value = 0.2891
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 -0.15100900  0.05236717 
sample estimates:
mean of the differences 
            -0.04932091 
```

我需要更改结果中数据的名称。例如，

> 数据：水果和蔬菜

请任何人给我一个想法，在 t.test 中包含一些属性来更改数据名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T10:29:50.850

带有一些虚拟数据

```
set.seed(1)
input1 <- rnorm(20, mean = -1)
input2 <- rnorm(20, mean = 5) 
```

重命名或创建具有所需名称的对象会更容易：

```
Fruits <- input1
Vegetables <- input2

t.test(x = Fruits, y = Vegetables, paired = TRUE, alternative = "two.sided")

    Paired t-test

data:  Fruits and Vegetables 
t = -18.6347, df = 19, p-value = 1.147e-13
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 -6.454791 -5.151218 
sample estimates:
mean of the differences 
              -5.803005 
```

但是如果你真的想在事后这样做，那么抓住返回的对象`t.test()`：

```
tmp <- t.test(x = input1, y = input2, paired = TRUE, alternative = "two.sided") 
```

看对象的结构`tmp`

```
> str(tmp)
List of 9
 $ statistic  : Named num -18.6
  ..- attr(*, "names")= chr "t"
 $ parameter  : Named num 19
  ..- attr(*, "names")= chr "df"
 $ p.value    : num 1.15e-13
 $ conf.int   : atomic [1:2] -6.45 -5.15
  ..- attr(*, "conf.level")= num 0.95
 $ estimate   : Named num -5.8
  ..- attr(*, "names")= chr "mean of the differences"
 $ null.value : Named num 0
  ..- attr(*, "names")= chr "difference in means"
 $ alternative: chr "two.sided"
 $ method     : chr "Paired t-test"
 $ data.name  : chr "input1 and input2"
 - attr(*, "class")= chr "htest" 
```

并注意`data.name`组件。我们可以用字符串替换它：

```
tmp$data.name <- "Fuits and Vegetables" 
```

印刷品`tmp`：

```
> tmp

    Paired t-test

data:  Fuits and Vegetables 
t = -18.6347, df = 19, p-value = 1.147e-13
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 -6.454791 -5.151218 
sample estimates:
mean of the differences 
              -5.803005 
```

# android - Android：BroadcastReceiver.onReceive() 调用之间的持久对象

> ID：10994595
> 
> 赞同：1
> 
> 时间：2012-06-12T10:16:03.223
> 
> 标签：android, broadcastreceiver

我有一个接收短信并开始某些“工作”的应用程序，现在这项工作是通过相机和其他一些第三方 API 完成的。因此，当我收到适用于我的应用程序的 START 消息 (SMS) 时，我开始工作并继续工作，直到应用程序收到来自远程设备的 STOP 消息。

接收器在 manifest.xml 文件中注册，否则可以正常工作。

现在的问题是，我的应用程序在收到 START 消息时开始正常工作，但是当我在一段时间后收到 STOP 消息时，我无法真正停止工作，因为我对相机和第三方 API 都有的句柄/对象引用为空。我对它们中的任何一个都没有任何控制权——也不能让它们成为单身人士。所以我需要在两次调用之间保留这些对象引用`BroadcastReceiver`，我无法找到正确执行此操作的方法。目前，我刚刚创建了该类的这两个静态成员，它工作正常，但这并不是一个很好的解决方案。在这种情况下处理情况的最佳方法是什么？如何在多个`onReceive()`调用之间使用初始化的对象`BroadcastReceiver`？

任何帮助/指针将不胜感激！

TIA, - 马尼什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:37:43.960

您不能使用单例该类，但您可以创建一个普通类并将其设为单例。该类有一个 HashMap 并用一个键存储您的 api 和相机对象。当您需要停止特定任务时，您可以通过某个键找到它并通过该对象停止它们。

当您启动任务时，将该对象存储在该单例中，并且当您想要停止从哈希图中找到该对象并停止/处置任务时。

我建议你创建一个单例对象 volatile。

```
private static volatile Utils _instance = null;

public static Utils Instance() {
    if (_instance == null) {
        synchronized (Utils.class) {
            _instance = new Utils();
        }
    }
    return _instance;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:27:43.110

您还可以在类中添加对象引用，`ApplicationClass`即从类扩展的`Application`类。您的应用程序类会一直保留在内存中，直到任何`Activity`或`Service`正在运行。它只会杀死所有的`Activity`和`Service`杀死的。

我认为这是静态字段的更好方法。但这也不是**Full-Proof**。我也在寻找这个问题。

# javascript - 使用 cufon/sifr 时如何允许用户选择文本？

> ID：10994597
> 
> 赞同：4
> 
> 时间：2012-06-12T10:16:11.850
> 
> 标签：javascript, html, css, http, bookmarklet

以这个站点为例，主标题：Working with Sessions and Cookies in PHP and MYSQL is with cufon。

[http://blog.themeforest.net/tutorials/working-with-sessions-and-cookies-in-php-and-mysql/](http://blog.themeforest.net/tutorials/working-with-sessions-and-cookies-in-php-and-mysql/)

我需要一种使用 Javascript（放置在小书签中）的方法来获取用户选择的标题，就像您要进行检查一样。所以操作将是用户突出显示文本并点击一个按钮。但是选择不会发生，并且 DOM 中没有文本，只有一些 cufon 注入的画布内容。

怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:44:34.473

Cufon 将文本替换为图像，但其背后隐藏了文本以供屏幕阅读器和可访问性使用。如果你检查元素，你会看到它，所以它在 DOM 中。您可能想尝试更改其 CSS，使其位于 cufon 文本的上方或下方，可能将不透明度设置为 0.01，使其不可见但可选择。

我自己没有尝试过，但这是我在这种情况下尝试的第一件事:)

就像是：

```
cufon cufontext {
  display: inline-block !important;
  height: 16px;
  overflow: visible;
  text-indent: 0;
  width: auto;
  font-size: 16px;
  opacity: 0.1;
  position: relative;
  top: -16px;
} 
```

# silverlight - Silverlight + webrequest HTTP POST 大数据

> ID：10994601
> 
> 赞同：3
> 
> 时间：2012-06-12T10:16:30.540
> 
> 标签：silverlight, post, webrequest

我正在从 Silverlight 向支持基本身份验证并接受两个输入字符串参数的服务发出 webrequest 调用。当 POST 数据较小时，请求可以正常工作并返回结果。但是，当字符串参数之一超过 2MB 时，请求未正确发送。当我在 Fiddler 中调查时，具有大量数据的参数只是空的。发送 POST 数据有限制吗？还是我缺少任何设置？

我的代码类似于在此链接的第一篇文章中找到的代码 [Silverlight HTTP POST 几个变量，简单示例（最少代码）](https://stackoverflow.com/questions/3493921/silverlight-http-post-few-variables-simplest-example-least-code)

非常感谢任何输入。

谢谢！

# c++ - 使用 istreambuf_iterator<> 将文件内容转换为字符串流

> ID：10994602
> 
> 赞同：0
> 
> 时间：2012-06-12T10:16:35.550
> 
> 标签：c++, visual-c++, compiler-errors

我正在使用以下代码（使用命名空间 std）将文件的内容转换为字符串。

**代码 1**

```
string fileToString(const string& filename)
{
    ifstream file(filename, ios::binary);
    if (!file) return "";
    string str(istreambuf_iterator<char>(file),
               (istreambuf_iterator<char>()));
    return str;
} 
```

我觉得上面的代码有效（我将 string::size() 与在 Windows 资源管理器中找到的实际文件大小匹配）很奇怪，但以下代码不起作用：

**代码 2**

```
string fileToString(const string& filename)
{
    ifstream file(filename, ios::binary);
    if (!file) return "";
    string str(istreambuf_iterator<char>(file),
               istreambuf_iterator<char>());
    return str;
} 
```

请注意第二个参数周围缺少括号。第二个函数给出以下编译器错误：

> 1 错误 C2664: 'std::basic_string<_Elem,_Traits,_Ax>::basic_string(const std::basic_string<_Elem,_Traits, *Ax> &)' : 无法从 'std::string (* _cdecl *)转换参数 1 (std::istreambuf_iterator<_Elem,_Traits>,std::istreambuf_iterator<_Elem, *Traits> (* _cdecl *)(void))' to 'const std::basic_string<_Elem,_Traits,_Ax> &'
> 
> 2 IntelliSense：不存在合适的构造函数来将“std::string (std::istreambuf_iterator> file, std::istreambuf_iterator> (*)())”转换为“std::basic_string, std::allocator>”

我在 Windows XP SP3 上使用**Visual Studio 2010 ， Win32 控制台应用程序。**

令我惊讶的是，以下代码可以按预期编译和工作：

**代码 3**

```
string fileToString(const string& filename)
{
    ifstream file(filename, ios::binary);
    if (!file) return "";
    return string(istreambuf_iterator<char>(file),
                  istreambuf_iterator<char>());
} 
```

为什么**Code 2**会产生编译器错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:27:28.710

> 为什么 Code 2 会产生编译器错误？

代码 2 产生编译错误，因为在代码 2 中，以下行声明了一个函数：

```
string str(istreambuf_iterator<char>(file),
           istreambuf_iterator<char>()); 
```

它声明了一个函数。函数名称是`str`。返回类型是`string`. 该函数有两个参数：

*   第一个参数是类型`istreambuf_iterator<char>`。
*   第二个参数的类型`istreambuf_iterator<char> (*)()`是函数指针类型，它返回`istreambuf_iterator<char>`并且不接受任何参数。

因此，在代码 2 中，您返回一个名为`str`. 由于无法转换为`string`函数的返回类型`fileToString`，因此会产生编译错误。

在 Code1 和 Code3 中，没有这样的问题，因此它们按预期工作。

# jquery - 继承的悬停“鼠标离开”不起作用

> ID：10994603
> 
> 赞同：0
> 
> 时间：2012-06-12T10:16:39.713
> 
> 标签：jquery, html

我在悬停时有一个继承的事件，如下所示：

```
$('#menu').on("hover", '#menu li', function() {    
//mouse over LI and look for A element for transition
$(this).find('img')
    .animate( { opacity:1 }, 200)
}); 
```

它适用于所有继承的元素，但我不能让“mouseleave”事件继承。如果我添加：

```
 $('#menu').on("hover", '#menu li', function() {    
    //mouse over LI and look for A element for transition
    $(this).find('img')
        .animate( { opacity:1 }, 200)
},
function() {
    $(this).find('img')
        .animate( { opacity:0.5 }, 200)
}); 
```

它不起作用。它如何用于悬停 onleave 事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:25:35.590

`hover` is no typical javascript event, you have to split your binding in `mouseenter` and `mouseleave` event.

```
$('#menu').on("mouseenter", '#menu li', function() {    
    //mouse over LI and look for A element for transition
    $(this).find('img').animate( { opacity:1 }, 200)
});

$('#menu').on("mouseleave", '#menu li', function() {
    $(this).find('img').animate( { opacity:0.5 }, 200)
}); 
```

See [http://api.jquery.com/hover/](http://api.jquery.com/hover/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T10:32:48.303

```
$("#menu").on('mouseenter','#menu li', function(){

    $(this).find('img')
        .animate( { opacity:1 }, 200)
     })
.on('mouseleave','#menu li', function(){
$(this).find('img')
        .animate( { opacity:0.5 }, 200) 

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:25:47.077

```
$('#menu').on("mouseover", '#menu li', function() {    
    alert('mouse entered');
});

$('#menu').on("mouseleave", '#menu li', function() {    
   alert('mouse left');
}); 
```

# c# - 添加数据时WPF DataGrid的高度会增加

> ID：10994604
> 
> 赞同：8
> 
> 时间：2012-06-12T10:16:42.540
> 
> 标签：c#, wpf, height, wpfdatagrid

我有一个 WPF DataGrid，当我向它添加不适合其初始高度的数据时，它的高度会增加。除非用户增加窗口大小，否则我不希望改变高度。有没有办法阻止这种自动调整大小？

```
<Window x:Class="WpfDataGridSizeTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Loaded="Window_Loaded"
        SizeToContent="WidthAndHeight">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <DockPanel Grid.Row="0">
            <DataGrid x:Name="wordsDataGrid" VerticalAlignment="Top" ItemsSource="{Binding}" MinHeight="100" SelectionMode="Single" AutoGenerateColumns="False" VerticalScrollBarVisibility="Auto" >
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Column" Width="Auto" Binding="{Binding AString}"/>
                </DataGrid.Columns>
            </DataGrid>
        </DockPanel>
    </Grid>
</Window>

    public partial class MainWindow : Window
    {
        MyList myList = new MyList();

        public MainWindow()
        {
            InitializeComponent();
        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            wordsDataGrid.DataContext = myList;
            for (int i = 0; i < 100; ++i)
            {
                myList.AddOne("blah blah");
            }
        }
    }

    public class MyList : ObservableCollection<AClass>
    {
        public MyList() { }

        public void AddOne(string aString)
        {
            base.Add(new AClass(aString));
        }
    }

    public class AClass
    {
        public string AString { get; set; }

        public AClass(string aString)
        {
            AString = aString;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T13:53:34.370

如果我没有误会您的意思，您希望您的 DataGrid 最初处于中间高度，在 Windows 内的 DataGrid 下方有一些空白空间......然后在调整 Window 大小时，DataGrid 将更改它的大小。

向 Grid 添加一个 Row，并定义该 Row 的 MinHeight。然后将 DataGrid 设置为 VerticalAlignment = Stretch。还为 Window 设置默认高度大小。

```
<Window x:Class="WpfDataGridSizeTest.MainWindow" 
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        Title="MainWindow" Loaded="Window_Loaded" Height="300"> 
    <Grid> 
        <Grid.RowDefinitions> 
            <RowDefinition Height="*"/> 
            <RowDefinition MinHeight="100"/> 
        </Grid.RowDefinitions> 
        <DockPanel Grid.Row="0" VerticalAlignment="Stretch"> 
            <DataGrid x:Name="wordsDataGrid" VerticalAlignment="Stretch" ItemsSource="{Binding}" MinHeight="100" SelectionMode="Single" AutoGenerateColumns="False" VerticalScrollBarVisibility="Auto" > 
                <DataGrid.Columns> 
                    <DataGridTextColumn Header="Column" Width="Auto" Binding="{Binding AString}"/> 
                </DataGrid.Columns> 
            </DataGrid> 
        </DockPanel> 
    </Grid> 
</Window> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-08T00:35:02.640

我遇到了同样的问题，我通过简单地在 Window 定义中删除**SizeToContent="WidthAndHeight"来修复它。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T08:06:13.790

这将满足您的要求：

```
<Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="1*"/>
      <RowDefinition Height="1*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="70"/>
      <ColumnDefinition Width="Auto"/>
    </Grid.ColumnDefinitions>

    <DataGrid Name="dgMain" AutoGenerateColumns="True"></DataGrid>

    </Grid> 
```

除此之外：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        Foo foo;
        List<Foo> foos = new List<Foo>();

        foo = new Foo() { Name = "Sjaak" };
        foos.Add(foo);

        foo = new Foo() { Name = "Joepie" };
        foos.Add(foo);

        dgMain.ItemsSource = foos;

    }
}

public class Foo
{
    public Foo() { }

    public String Name { get; set; }
} 
```

诀窍在于通过对两行的高度属性使用“1*”来按比例（均匀）分布行高。您还可以通过将一行高度设置为“2*”等来将其分配到其他“共享”中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T10:18:52.443

尝试使用`VerticalAlignment = Top`例如或显式地将`Height`属性设置为某个值。

[这](https://stackoverflow.com/questions/1368140/wpf-toolkit-fit-datagrid-height-to-content-height)也可能有助于将 DataGrid 放入 StackPanel 并控制 StackPanel 的大小调整行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T10:45:14.413

如果问题是整个网格在增长（但您对单个行的增长感到高兴）那么：DataGrid 所在的父面板是什么？更改它会影响控件调整大小的方式。

例如：a`StackPanel`将允许其子元素在一个方向（堆叠方向）生长，a`DockPanel`将“填充”元素的大小限制为可用空间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-08T14:03:29.393

```
 VerticalAlignment="Bottom" 
```

为我解决了这个完全相同的问题。我也用过

```
 VerticalScrollBarVisibility="Auto" 
```

# php - php/mysql - 仅将长文本的片段插入数据库

> ID：10994611
> 
> 赞同：0
> 
> 时间：2012-06-12T10:16:58.683
> 
> 标签：php, mysql, insert, fragment, longtext

在我的代码中，我使用变量`$content`. 它是一个长度约为 200000 的文本字符串。 `$session`在这种情况下没关系。如果我尝试插入以下数据，...

```
$c = mysql_real_escape_string($content);

mysql_query("
  INSERT INTO data (time, session, key_, value_) 
  VALUES('".time()."', '".$session."', 'content', '".$c."')
"); 
```

...在数据库中生成一个新行`time`，并写入`session`、和 。但是当长度为 ~200000 时，插入的文本只是前 ~1300 个字符的片段。字段类型设置为，排序规则为。`key_``value_``$content``longtext``utf8_bin`

如果我选择`$c = strlen(mysql_real_escape_string($content));`，将写入有关“200000”的内容`value_`。无论如何都没有mysql_error。

那么为什么只插入了我的变量的“短”片段？

**编辑：**

为了避免这个问题，我使用`base64_encode()`, 对所有数据进行编码，并且查询完成了它的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:22:54.873

检查数据库中字段的类型，您使用的是什么类型？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:24:52.847

Try to set field type to `TEXT` .

# xml - 在包含位置坐标的 XML 文件中搜索和排序

> ID：10994614
> 
> 赞同：1
> 
> 时间：2012-06-12T10:17:17.030
> 
> 标签：xml, cordova, xml-parsing

好吧，我有一个 xml 文件，我用它来存储位置名称及其地址和坐标。我需要这些数据来帮助在地图上定位位置。现在 xml 文件很大，因为它包含大量数据，所以我想减少搜索时间，因为我想在移动平台上部署应用程序 - android 和 iphone。我所做的是，获取用户当前位置，然后一一解析xml，获取坐标，计算位置和用户之间的距离，然后如果距离小于半径，则在屏幕上打印。**所以我可以在这里实现任何排序或搜索算法，它将在用户当前位置坐标上？？？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T21:39:57.167

XML 似乎不是数据的选择。如果您可以控制数据的存储方式，请考虑将其保存到数据库中（据我所知，Phonegap 支持）并首先在矩形半径中搜索。如果您真的必须使用 XML，对其进行排序可能不会有太大帮助（坐标来自二维集）。也许你可以把它分成两个文件（每个坐标一个）并对它们进行排序，但这确实是一个非常丑陋的解决方案。排序可以通过 XSLT 来实现，请参见[此处](http://www.xml.com/pub/a/2002/07/03/transform.html)的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T23:26:35.107

您对使用该 XML 文件有限制，好的。但是您是否也有不使用数据库的限制？反对同时保留 XML 和数据库？

如果没有，您可以将坐标和键存储在 XML 文件中以立即搜索到数据库中。这将为您提供快速搜索，并从 XML 文件中读取速度较慢（但最少）。

如果您也不能使用数据库，您可以尝试将 XML 文件的坐标和（再次）键存储在另一个文件中，该文件会小得多，并且您可以在其中组织某种树排序或分区。

最后，如果您只能使用一个 XML 文件，您将不得不快速解析文件并提取相关坐标信息。您可以使用正则表达式来做到这一点，方法是定期读取足够的数据，以便在内存搜索缓冲区中始终拥有完整的记录（您需要估计最大记录大小才能做到这一点）。但它看起来很贵。我会强烈推动其他方式来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T02:15:44.077

您基本上是在尝试重新创建成百上千的数据库工程师已经解决的问题。成千上万的极客已经学会了排序方法以及什么是最佳的，什么不是。然后，大公司聘请其中最聪明的人将这些算法放入数据库中。

您的解决方案听起来不是很健壮。XML 不适用于您正在做的事情。话虽如此，如果您坚持使用 XML...

我将至少有 2 个 xml 文件 - 一个包含按人工键排序的数据，另一个包含您要搜索的参数。然后你将不得不对后一个文件进行搜索，然后在前一个文件中查找它。巧合的是，这大致就是数据库所做的。

我会真诚地推动为您进行查找/计算的 Web 服务。您可以使用现有的或创建自己的。听起来您需要连接才能让您的应用程序正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T23:11:37.120

非常糟糕的选择在 XML 之上进行。**[将 SpatiaLite](http://www.gaia-gis.it/gaia-sins/)**捆绑到您的应用程序。它是空间特征的 SQLite 扩展，因此可以对地理位置数据进行各种查询......包括搜索最近的地理点，或者在某个半径范围内。通过 SQL 查询。解析 XML 数据并将它们放入**SpatiaLite** DB 文件......它肯定会比原始 XML 小。

# php - 使用向上和向下按钮向上或向下滚动表格

> ID：10994615
> 
> 赞同：0
> 
> 时间：2012-06-12T10:17:22.303
> 
> 标签：php, javascript, html, scroll

我想为我的主页创建一个横幅滚动功能。我不太确定在这里使用哪种编程语言。我想编写类似于：[http](http://www.squidfaceandthemeddler.com/) ://www.squidfaceandthemeddler.com/ 的代码。但我希望页脚在用户滚动表格时保持在同一位置。有可能得到这样的结果吗？我创建了一个简单的表格和 2 个图像供用户单击

这是我的表格代码：

```
<div id="banner" style="height:750px; width:600px; overflow:scroll;" > 
    <table width="750px" height="600px"> 
    <tr> 
    <td><a href="sale_1.php"><img src="banner1.png"/></a></td> 
    </tr> 
    </table> 

    <table width="750px" height="600px"> 
    <tr> 
    <td><a href="sale_2.php"><img src="banner2.png"/></a></td> 
    </tr> 
    </table> 

    <table width="750px" height="600px"> 
    <tr> 
    <td><a href="sale_3.php"><img src="banner3.png"/></a></td> 
    </tr> 
    </table> 
</div> 
```

这是滚动的向上和向下按钮：

```
<table width="750px" height="30px"> 
<tr> 
<td align="right"><img src="images/up_arrow.png"/><img src="images/down_arrow.png"/></td> 
</tr> 
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:20:58.370

如果将内容放在两个 div 标签内，则可以使用 CSS 剪辑外部 div 并通过编写 CSS“top”值脚本来“滚动”内部 div，因此：

```
<html><head><style>
#contents{ 
 position: relative; top: 0; left: 0; width: 100px; height: auto;}
 #scrollable{ overflow: hidden; width: 100px; height: 100px; border: 1px
solid black;
 }
</style>
<script>
var t = 0;

function up()
{
 t += 10;

 with(document.getElementById("contents"))
 {
   if (t > 0)
    t = 0;

 if(style)
    style.top = t + "px";
 else
  setAttribute("style", "top: " + t + "px");
}
}

function down()
{
 t -= 10;

with(document.getElementById("contents"))
{
  if(t < -clientHeight)
      t = -clientHeight;

  if(style)
       style.top = t + "px";
  else
       setAttribute("style", "top: " + t + "px");
  }
 }
</script></head>
   <body><table><tr><td><a href="javascript:void(0)" onclick="up()">up</a></td>
   <td rowspan="2"><div id="scrollable">
     <div id="contents">scrolling content scrolling content scrolling content
        scrolling content scrolling content scrolling content scrolling content
        scrolling content scrolling content scrolling content scrolling content
   </div></div> 
       </td></tr><tr><td>
     <a href="javascript:void(0)" onclick="down()">down</a></td></tr></table>
    </body></html> 
```

借助此编辑您的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:40:02.213

看看 jquery scrolltop：[http](http://api.jquery.com/scrollTop/) ://api.jquery.com/scrollTop/ 。我会将表格宽度固定到某个高度，就像您已经做过的那样，然后：

```
$('#buttonUpID').click(function () {
    var currentScrollTop = $('body').scrollTop();
    $('body').scrollTop(currentScrollTop - 600);
});

$('#buttonDownID').click(function () {
    var currentScrollTop = $('body').scrollTop();
    $('body').scrollTop(currentScrollTop + 600);
}); 
```

# ftp - 对 FTP 的困惑

> ID：10994618
> 
> 赞同：-2
> 
> 时间：2012-06-12T10:17:32.373
> 
> 标签：ftp, web

我正在学习 Web 开发，但我有点卡在 FTP 上。我知道它用于文件传输，但我如何实际使用它？我找到了一些 PHP 函数来连接到 FTP 服务器并登录，但是我用什么登录呢？如何创建用户名？FTP 是不是像 MySQL 一样有自己的命令行？还是类似于 Apache？

我使用的是 Ubuntu 12.04，并且安装了 LAMP。我在某个地方找到了需要安装程序才能使用 FTP 的地方，但在其他地方找到了在安装 PHP 时需要安装 FTP 的地方。这真的很令人困惑。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:35:02.203

FTP是文件传输协议。它不是一种编程语言。FTP 用于连接到计算机以访问其文件系统——上传或下载文件。想象一下从您的计算机上打开一个文件夹。在大多数 linux 中，您可以在您使用的任何文件浏览器的位置栏中输入 ftp 地址，然后像访问本地文件夹一样访问 ftp 服务器。您还可以为此使用特定软件 - gftp、filezilla。

一个 ftp 守护进程不附带灯。有关如何在 ubuntu 上安装/配置 ftp 守护程序的详细信息，请参阅[https://help.ubuntu.com/12.04/serverguide/ftp-server.html 。](https://help.ubuntu.com/12.04/serverguide/ftp-server.html)

您将使用 ftp 的目的是将您的 .php 文件放在远程机器上。如果您只在您的计算机上做事，您可能不需要 ftp。

# asp.net-mvc-4 - 移至 Web API RC，获取：找不到方法：'System.Web.Http.Services.DependencyResolver System.Web.Http.HttpConfiguration.get_ServiceResolver()'

> ID：10994619
> 
> 赞同：2
> 
> 时间：2012-06-12T10:17:36.617
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我将一个站点从 WebAPI Beta 移动到 WebAPI RC，现在加载站点时出现错误：`Method not found: 'System.Web.Http.Services.DependencyResolver System.Web.Http.HttpConfiguration.get_ServiceResolver()'.`

第一次尝试注册我的错误时发生`AutoFacWebApiDependencyResolver`（根据[此处](http://alexmg.com/?tag=/autofac)的说明）：

```
var resolver = new AutofacWebApiDependencyResolver(IoCManager.Container);
GlobalConfiguration.Configuration.DependencyResolver = resolver; 
```

堆栈跟踪显示以下内容：

```
[MissingMethodException: Method not found: 'System.Web.Http.Services.DependencyResolver System.Web.Http.HttpConfiguration.get_ServiceResolver()'.]
   System.Web.Http.GlobalConfiguration.<.cctor>b__0() +0
   System.Lazy`1.CreateValue() +12775823
   System.Lazy`1.LazyInitValue() +355
   StatusBoard.Web.MvcApplication.RegisterDependencyInjection() in C:\path-tp-app\Global.asax.cs:125
   StatusBoard.Web.MvcApplication.Application_Start() in C:\path-to-app\Global.asax.cs:75 
```

基于此，似乎在静态 GlobalConfiguration 类的初始化期间发生了错误。当我深入研究该类的源代码时，我看到以下内容：

```
private static Lazy<HttpConfiguration> _configuration = new Lazy<HttpConfiguration>((Func<HttpConfiguration>) (() =>
{
  local_0 = new HttpConfiguration((HttpRouteCollection) new HostedHttpRouteCollection(RouteTable.Routes));
  local_0.get_ServiceResolver().SetService(typeof (IBuildManager), (object) new WebHostBuildManager());
  return local_0;
}));
private static Lazy<HttpControllerDispatcher> _dispatcher = new Lazy<HttpControllerDispatcher>((Func<HttpControllerDispatcher>) (() => new HttpControllerDispatcher(GlobalConfiguration._configuration.Value)));

public static HttpConfiguration Configuration
{
  get
  {
    return GlobalConfiguration._configuration.Value;
  }
} 
```

这里的第四行似乎是问题 - 它试图调用类中不再存在的 get_ServiceResolver() 方法`HttpConfiguration`（应该是`DependncyResolver`，可能）。

这只是 RC for WebAPI 的一个错误吗？有什么办法可以解决这个问题吗？还是我陷入了一些 DLL/Nuget 地狱（如果是这样，我该如何自拔）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:17:22.260

确保包含正确的 nuget 包（RC！）并在构建包的机器上安装新的 mvc4rc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:30:40.647

依赖关系解析已在 RC 中完全重写。最好是卸载 beta DLL，然后您的问题很可能会消失。

只需在 Windows 的“卸载程序”中卸载标记为“（捆绑）”的那个。

# xml - HTMLStripCharFilterFactory 显然不起作用，仍在检索 xml 标签

> ID：10994624
> 
> 赞同：0
> 
> 时间：2012-06-12T10:17:49.823
> 
> 标签：xml, search, solr

HTMLStripCharFilterFactory 显示在查询分析器中条带化的 xml 标签，但是当我使用搜索命令检查浏览器时，它不会剥离 XML 标签。

当我在 .../admin/analysis.jsp 中分析查询时，它可以工作，但是当我尝试查看搜索结果时，它会重新显示 XML。

```
<analyzer type="index">
                <charFilter class="solr.HTMLStripCharFilterFactory"/> 
```

...

查询分析器是

```
 <analyzer type="query">
                              <charFilter class="solr.HTMLStripCharFilterFactory"/> 
```

...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:30:48.750

分析页面显示索引时间分析，因此您看不到 xml 标记，因为它们已被 HTML Strip 过滤器剥离。

但是，当您运行搜索命令时，Solr 将仅返回存储的结果。
它不返回索引数据。索引数据仅用于搜索。

# android - android强制相机以横向模式拍照

> ID：10994631
> 
> 赞同：5
> 
> 时间：2012-06-12T10:18:14.007
> 
> 标签：android, android-camera-intent

我想强制默认的安卓相机只在横向模式下拍照。我试过以下：

```
 Intent cameraIntent=new Intent("android.media.action.IMAGE_CAPTURE");
         File photo = new File(Environment.getExternalStorageDirectory().getAbsolutePath(), "Pic.jpg");
         cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
         cameraIntent.putExtra(MediaStore.EXTRA_SCREEN_ORIENTATION, ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
         startActivity(cameraIntent); 
```

但这仅适用于 2.1，不适用于以后。我只想让照片图像以横向模式保存。我不想使用任何图像处理，例如矩阵或自定义相机。

注意：我从将方向固定为“**纵向**”的活动中调用此意图

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:21:24.487

在 androidmanifest.xml 中

```
<activity android:name="activity_name" android:screenOrientation="landscape" /> 
```

此活动将是您的图像捕捉活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-06T11:27:21.600

使用`ACTION_IMAGE_CAPTURE`意图，您对实际驱动相机的应用程序的控制有限。您可以期望它遵守 Intent[合同](http://developer.android.com/reference/android/provider/MediaStore.html#ACTION_IMAGE_CAPTURE)，但仅此而已。

> 可以发送标准 Intent 操作以使相机应用程序捕获图像并返回它。
> 
> 调用者可能会传递一个额外的 EXTRA_OUTPUT 来控制该图像将被写入的位置。如果 EXTRA_OUTPUT 不存在，则在额外字段中将小尺寸图像作为位图对象返回。这对于只需要小图像的应用程序很有用。如果存在 EXTRA_OUTPUT，则将全尺寸图像写入 EXTRA_OUTPUT 的 Uri 值。从 LOLLIPOP 开始，这个 uri 也可以通过 setClipData(ClipData) 提供。如果使用这种方法，您仍然必须通过 EXTRA_OUTPUT 字段提供 uri 以与旧应用程序兼容。如果您没有设置 ClipData，它将在调用 startActivity(Intent) 时为您复制到那里。
> 
> 注意：如果您的应用程序以 M 及以上为目标并声明为使用未授予的 CAMERA 权限，则尝试使用此操作将导致 SecurityException。

如果您有兴趣，您可以从此意图接收图像并将其强制旋转为横向。请注意，今天的许多相机应用程序都只能生成风景照片。

# javascript - 通过 DOM 设置 Javascript 函数参数

> ID：10994637
> 
> 赞同：0
> 
> 时间：2012-06-12T10:18:43.823
> 
> 标签：javascript, html, dom

我有一个通过 javascript (DOM) 创建的选择元素

```
var cell_stock_id = row.insertCell(0);
var cell_stock_id_sel = document.createElement('select'); 
```

我为此保留了一个 onchange javascript 函数-

```
cell_stock_id_sel.setAttribute("onchange","populateOtherFields"); 
```

当我在选择中更改所选选项时，该函数被调用。

有没有办法可以将参数传递给这个函数“populateOtherFields”？

我在表格行中有一个选择框和很多文本字段。我想根据选择填充这些行。我能够访问必须在这些字段中插入的数据，但我不知道如何在该行的这些文本字段中输入数据。我正在考虑传递一个唯一编号，该编号将与行中元素的名称标识，并且 javascript 将在行中元素的名称中解析该模式。

```
 document.forms["0"].elements[i].name.indexOf("pattern"). 
```

那么有没有一种方法可以让我传递这个“模式”，它本质上是迭代（行数，行数）数。

```
select__1, text__1, text2__1
select__2, text__2, text2__2 
```

'__1' 和 '__2' 需要通过。而且它们不是静态模式。可以是任何数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T10:21:29.820

不要`setAttribute`用于设置事件处理程序，使用直接分配或（更好）`addEventListener`/`attachEvent`然后您可以创建一个函数，该函数将使用所需的参数调用您的函数。（当然，无论如何你都可以这样做，但是使用`setAttribute`你要么必须内联，要么创建另一个全局命名函数。）

直接赋值：

```
cell_stock_id_sel.onchange = function() {
    populateOtherFields(arguments, here);
}; 
```

适用于所有浏览器，但您只能`change`在使用此方法的元素上拥有一个处理程序（如`setAttribute`）。

`addEventListener`：

```
cell_stock_id_sel.addEventListener('change', function() {
    populateOtherFields(arguments, here);
}, false); 
```

这是[标准](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget-addEventListener)，但在旧版本的 IE 上不存在。

`attachEvent`：

```
cell_stock_id_sel.attachEvent('onchange', function() {
    populateOtherFields(arguments, here);
}); 
```

这是仅限 IE 的（呃，大多数情况下，一些浏览器会对仅限 IE 的站点产生影响）。这是微软的预标准方式。在标准模式下的 IE8 及以上版本中，您可以`addEventListener`改用。

**所有**这些方法的另一个优点是您不必拥有任何全局函数，而`setAttribute`如果您使用函数名称，则该函数必须是全局的。浏览器上的全局命名空间已经*非常*拥挤，我总是建议避免添加混乱。

* * *

由于浏览器之间的各种变幻莫测，我倾向于推荐使用任何体面的 JavaScript 浏览器库，例如[jQuery](http://jquery.com)、[YUI](http://developer.yahoo.com/yui/)、[Closure](http://code.google.com/closure/library)或[其他任何一种](http://en.wikipedia.org/wiki/List_of_JavaScript_libraries)。这些平滑了`addEventListener`/之类的差异，`attachEvent`并且还提供了**许多**有用的实用程序功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:21:54.773

```
cell_stock_id_sel.addEventListener("onchange", function() {
    populateOtherField(arguments);
}); 
```

# mysql - Tomcat JDBC MySQL ClassNotFoundException

> ID：10994642
> 
> 赞同：2
> 
> 时间：2012-06-12T10:19:00.813
> 
> 标签：mysql, spring, hibernate, tomcat, jdbc

我想在我的 tomcat 7 服务器（在我的 Mac 上本地运行）上使用 springMVC 和 JPA（使用休眠）。

我能够使用嵌入式 H2 数据库成功设置所有内容。

现在我切换到mysql并收到以下错误

```
java.lang.ClassNotFoundException: "com.mysql.jdbc.Driver"
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556) 
```

这表明 tomcat 无法找到用于 java 的 mysql-connector。有许多关于如何将连接器添加到 $CATALINA_HOME/lib 的教程。

在尝试为我的项目使用 maven 依赖项后，我按照建议将 .jar 文件复制到 lib 目录中：

```
$ ls $CATALINA_HOME/lib/mysql*.jar
/Users/david/Applications/tomcat/lib/mysql-connector-java-5.1.20-bin.jar 
```

我已读取和执行目录和文件的权限。

目前我不知道如何让tomcat知道这个jar。该文件夹包含在

```
$CATALINA_HOME/conf/catalina.properties 
```

我已经多次重新启动服务器。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T10:36:14.573

通常，CNFE 的输出如下：

```
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver 
```

而您的错误消息显示

```
java.lang.ClassNotFoundException: "com.mysql.jdbc.Driver" 
```

我认为您的配置中的驱动程序类名称仍然有引号。

# android - 图像视图在特定时间间隔后更改图像

> ID：10994644
> 
> 赞同：-3
> 
> 时间：2012-06-12T10:19:06.503
> 
> 标签：android, android-imageview

我使用图像视图，我想以特定的时间间隔更改图像。

我有 10 张图片。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:39:12.077

您将需要 TimerTask 。

下面的片段会帮助你

它将每 3 秒更改一次图像。

```
 timer = new Timer();
            timer.schedule(new TimerTask() {

                @Override
                public void run() {
                    runOnUiThread(new Runnable() {

                        public void run() {

                            if (flag > 1) {
                                timer.cancel();
                                timer = null;
                            } else
                                imageView.setImageResource(images[flag++]);

                        }
                    });

                }
            }, System.currentTimeMillis(), 3000); 
```

# sql - 如何更改使用 UTL_FILE.FOPEN 创建的文件的权限？

> ID：10994647
> 
> 赞同：3
> 
> 时间：2012-06-12T10:19:18.310
> 
> 标签：sql, oracle, file-permissions

我有一个使用 UTL_FILE.FOPEN 函数创建文本文件的 oracle 程序。该文件是使用权限660创建的。如何在不使用chmod的情况下更改文件的权限？（我无权访问服务器）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T10:24:44.857

You could change the umask of the Unix user that owns the Oracle process (resp. ask the system administrator to perform this task for your), see

[UTL_FILE permissions](http://jenniferlinca.wordpress.com/2008/03/28/using-utl_file-how-file-permissions-are-determined-working-sample/)

# java - Hibernate 什么都不选择

> ID：10994648
> 
> 赞同：3
> 
> 时间：2012-06-12T10:19:19.557
> 
> 标签：java, mysql, spring, hibernate, character-encoding

我有 MySQL InnoDB 表 utf-8 编码。该表只有 id 和 name 字段。名称为俄语，1 个英文名称用于测试目的。英文名称选择正常，但是当尝试使用俄语名称进行选择时，它返回空列表。我尝试使用 Criterion 和 HQL 构建查询。

```
getHibernateTemplate().find("from FirstName where name='free' ");
getHibernateTemplate().find("from FirstName where name='ИННА' "); 
```

这是连接字符串 - `?zeroDateTimeBehavior=convertToNull&amp;useUnicode=true&amp;characterEncoding=utf8`

我正在使用休眠 3.2.7.ga 和 spring 2.5.6.SEC03

这是休眠日志：

```
Hibernate: /* from FirstName where name='ИННА'  */ select firstname0_.`id` as id1_24_, firstname0_.`name` as name2_24_ from `first_name` firstname0_ where firstname0_.`name`='ИННА' limit ? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:17:25.427

谢谢大家，我找到了答案。

问题出在连接字符串中。我确实重构并将连接字符串移动到属性文件而不是带有spring-bean的xml。但我没有将“ `&amp;`”实体更改为“&”。成功的连接字符串在属性文件中

```
jdbc:mysql://${host}:${port}/${database}?zeroDateTimeBehavior=convertToNull&useUnicode=true&characterEncoding=UTF-8&characterSetResults=UTF-8 
```

XML 文件将`&amp;`实体更改为正确的，但属性格式不这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:10:26.850

```
Criteria coCriteria = Session.createCriteria(coClass).add(Restrictions.eq(strColumnName, strColumnValue));
list = coCriteria.list(); 
```

您是否尝试过使用此休眠标准。
其中“Session”将是hibernate生成会话的会话对象。
1)coClass = "pojo class name"
2)strColumnName = "pojo class field name" 在你的情况下它将是 "name" 我猜
3)strColumnValue = 在你的情况下它将是 "ИННА"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:58:35.587

您是否尝试在数据库级别更改字符编码？根据 MySQL 文档，“cp1251”支持西里尔字符

你也可以看看[这个链接](http://dev.mysql.com/doc/refman/5.1/en/charset-cyrillic-sets.html)

# sql - 我的网站中的错误列表

> ID：10994649
> 
> 赞同：0
> 
> 时间：2012-06-12T10:19:20.343
> 
> 标签：sql, database, vbulletin

我不知道为什么我的网站给我这个错误。这是错误列表。请盖住我！我该怎么办 ？

```
Fatal error: Out of memory (allocated 6029312) (tried to allocate 8192 bytes) in /home/lifegat/domains/life-gate.ir/public_html/includes/functions.php on line 7216

Fatal error: Out of memory (allocated 7602176) (tried to allocate 1245184 bytes) in /home/lifegat/domains/life-gate.ir/public_html/misc.php(89) : eval()'d code on line 1534

Fatal error: Out of memory (allocated 786432) (tried to allocate 1245184 bytes) in /home/lifegat/domains/life-gate.ir/public_html/showthread.php on line 1789

Fatal error: Out of memory (allocated 7340032) (tried to allocate 30201 bytes) in /home/lifegat/domains/life-gate.ir/public_html/includes/class_core.php(4633) : eval()'d code on line 627

Fatal error: Out of memory (allocated 2097152) (tried to allocate 77824 bytes) in /home/lifegat/domains/life-gate.ir/public_html/includes/functions.php on line 2550

Warning: mysql_query() [function.mysql-query]: Unable to save result set in [path]/includes/class_core.php on line 417

Warning: Cannot modify header information - headers already sent by (output started at [path]/includes/class_core.php:5615) in [path]/includes/functions.php on line 4513 
```

数据库错误

```
Fatal error: Out of memory (allocated 786432) (tried to allocate 311296 bytes) in /home/lifegat/domains/life-gate.ir/public_html/includes/init.php on line 552

Fatal error: Out of memory (allocated 3145728) (tried to allocate 19456 bytes) in /home/lifegat/domains/life-gate.ir/public_html/includes/functions.php on line 8989

Fatal error: Out of memory (allocated 262144) (tried to allocate 311296 bytes) in /home/lifegat/domains/life-gate.ir/public_html/forum.php on line 475

Warning: mysql_query() [function.mysql-query]: Unable to save result set in [path]/includes/class_core.php on line 417

Warning: Cannot modify header information - headers already sent by (output started at [path]/includes/class_core.php:5615) in [path]/includes/functions.php on line 4513 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:26:20.853

`Fatal error: Out of memory` means that the server is out of reserved memory. This usually happens when you are working with big objects, such as images.

The solution is to use the `&` operator. This makes a variable point towards another object. Example:

```
$object = new BigObject();
$copy = $object;              // this copies the object thus more memory is required
$pointer = &$object;          // the & makes the $pointer variable point to $object 
```

Because the variable is pointed to another variable, if you change one, the other will change as well.

```
$object = new BigObject();
$pointer = &$object;

$object->x = 12345;

echo $object->x;
echo $pointer->x; // will have the same output as $object->x 
```

Pointers are often used in functions, like this:

```
$object = new BigObject();
x( $object );

function x( &$object ) {
     // do stuff with $object
} 
```

The `Warning: Cannot modify header information` warning is usually given when you are trying to change the header data after sending output. You probably have a `header();` call after you have echo'd something or have some whitespaces before you use the PHP open tag `<?php`.

Finally, the `Warning: mysql_query() [function.mysql-query]: Unable to save result set` error is usually a MySQL issue. But knowing you are out of memory, you might fix the other errors first.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:23:30.467

增加或精简您的代码`memory_limit`。`php.ini`

# apache - Apache Rewrite：不匹配的模式不起作用

> ID：10994650
> 
> 赞同：0
> 
> 时间：2012-06-12T10:19:23.427
> 
> 标签：apache, mod-rewrite

当访问者对我的子域执行请求时，我想将访问者重定向到我的主域，然后是不匹配的 URI。

例如，访问者可以访问资源，`sub.domain.com/product/10`但当`domain.com`他尝试访问与`product/:id`我的子域不匹配的其他资源（如`sub.domain.com/anOtherResource`.

我必须用 apache 重写模块来做到这一点。我发现`!`操作员可以完成这项工作，但它不适合我。

这是我的 .htaccess 文件中的重写配置：

```
RewriteCond %{HTTP_HOST} sub\.domain\.com
RewriteCond %{REQUEST_URI} !^/product/[0-9]+$
RewriteRule ^(.*)$ http://www.domain.com [L,R] 
```

我还测试了这个配置：

```
RewriteCond %{HTTP_HOST} sub\.domain\.com
RewriteRule !^/product/[0-9]+$ http://www.domain.com [L,R] 
```

不知道哪里错了。。。

[编辑]

.htaccess 文件是为 Wordpress 配置的。这是整个 .htaccess ：

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{HTTP_HOST} sub.domain.com
    RewriteCond %{REQUEST_URI} !^/product/[0-9]+$
    RewriteRule ^(.*)$ http://www.domain.com/$1 [L,R]

    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T16:00:45.680

问题出在 Wordpress 重写配置中，发生了什么？

## 步骤1

我在 sub.domain.com/product/1 执行请求，因此它与这些 RewriteCond**不匹配：**

```
RewriteCond %{HTTP_HOST} sub.domain.com
RewriteCond %{REQUEST_URI} !^/product/[0-9]+$ 
```

然后，它**不会**重定向到`www.domain.com`

## 第2步

它继续重写到下一个 Cond（Worpdress 重写）：

```
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

在这一步，它发送一个**内部重定向**（不发送给客户端）到`sub.domain.com/index.php`

## 第 3 步

由于重定向，它再次应用之前的 RewriteCond

```
RewriteCond %{HTTP_HOST} sub.domain.com
RewriteCond %{REQUEST_URI} !^/product/[0-9]+$
RewriteRule ^(.*)$ http://www.domain.com/$1 [L,R] 
```

它**与**Cond 匹配，然后将客户端重定向到`www.domain.com`我没想到的位置。

# 解决方案

我通过在 index.php 上添加 RewriteCond 来解决问题，如下所示：

```
RewriteCond %{HTTP_HOST} sub.domain.com
RewriteCond %{REQUEST_URI} !^/product/[0-9]+$
RewriteCond %{REQUEST_URI} !^/index.php$
RewriteRule ^(.*)$ http://www.domain.com/$1 [L,R] 
```

现在它管理由 Worpress 重写发送的内部重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:18:32.900

重写规则看起来不错，但请尝试以下操作：

```
RewriteCond %{HTTP_HOST} ^sub[.]domain[.]com$
RewriteCond %{REQUEST_URI} !^/product/[0-9]+$
RewriteRule ^(.*)$ http://www.domain.com [L,R] 
```

如果这不起作用，那么您可能需要复制并粘贴 VirtualHost 配置的全部内容，因为它可能是导致问题的其他原因。

# silverlight - 如何在 Silverlight 文本框上设置垂直内容对齐

> ID：10994651
> 
> 赞同：2
> 
> 时间：2012-06-12T10:19:23.630
> 
> 标签：silverlight, xaml, silverlight-4.0

我有一个 silverlight 文本框，它将所有文本对齐到中心。VerticalContentAlignment 不起作用！如何对齐此文本，使文本从顶部而不是中心开始。

```
<StackPanel>
    <TextBox Text="{Binding OverView,Mode=TwoWay}" AcceptsReturn="True" 
    Loaded="Update_EditableState" 
    Height="135" HorizontalAlignment="Left" 
    TextWrapping="Wrap" Width="200">
    </TextBox>
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T06:13:58.323

根据[Microsoft 文档](http://msdn.microsoft.com/en-us/library/cc645061%28v=vs.95%29)VerticalContentAlignment 不适用于文本框的默认模板。

为了解决这个问题，我们需要自己的风格。将绑定verticalalignment 添加到模板的verticalcontentalignment 解决了这个问题。

这是我从标准文本框样式更改的元素

```
<ScrollViewer x:Name="ContentElement" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Padding="{TemplateBinding Padding}" BorderThickness="0" IsTabStop="False"/> 
```

这是我用来实现这一目标的完整风格

```
<Style x:Key="TextBoxWithVerticalContentAlignment" TargetType="TextBox">
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Background" Value="#FFFFFFFF"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="Padding" Value="2"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TextBox">
                    <Grid x:Name="RootElement">
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="CommonStates">
                                <vsm:VisualState x:Name="Normal"/>
                                <vsm:VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <ColorAnimation Storyboard.TargetName="MouseOverBorder" Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)" To="#FF99C1E2" Duration="0"/>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="DisabledVisualElement" Storyboard.TargetProperty="Opacity" To="1" Duration="0"/>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="ReadOnly">
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="ReadOnlyVisualElement" Storyboard.TargetProperty="Opacity" To="1" Duration="0" />
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="FocusStates">
                                <vsm:VisualState x:Name="Focused">
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="FocusVisualElement" Storyboard.TargetProperty="Opacity" To="1" Duration="0"/>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Unfocused">
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="FocusVisualElement" Storyboard.TargetProperty="Opacity" To="0" Duration="0"/>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="ValidationStates">
                                <vsm:VisualState x:Name="Valid"/>
                                <vsm:VisualState x:Name="InvalidUnfocused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement" Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="InvalidFocused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement" Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip" Storyboard.TargetProperty="IsOpen">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <sys:Boolean>True</sys:Boolean>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>
                        <Border x:Name="Border" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="1" Opacity="1" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}">
                            <Grid>
                                <Border x:Name="ReadOnlyVisualElement" Opacity="0" Background="#5EC9C9C9"/>
                                <Border x:Name="MouseOverBorder" Background="White" BorderThickness="1" BorderBrush="Transparent">
                                    <ScrollViewer x:Name="ContentElement" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Padding="{TemplateBinding Padding}" BorderThickness="0" IsTabStop="False"/>
                                </Border>
                            </Grid>
                        </Border>
                        <Border x:Name="DisabledVisualElement" Background="#A5F7F7F7" BorderBrush="#A5F7F7F7" BorderThickness="{TemplateBinding BorderThickness}" Opacity="0" IsHitTestVisible="False"/>
                        <Border x:Name="FocusVisualElement" BorderBrush="#FF6DBDD1" BorderThickness="{TemplateBinding BorderThickness}" Margin="1" Opacity="0" IsHitTestVisible="False"/>
                        <Border x:Name="ValidationErrorElement" BorderThickness="1" CornerRadius="1" BorderBrush="#FFDB000C" Visibility="Collapsed">
                            <ToolTipService.ToolTip>
                                <ToolTip x:Name="validationTooltip" Template="{StaticResource ValidationToolTipTemplate}" Placement="Right" 
                         PlacementTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}"
                         DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}">
                                    <ToolTip.Triggers>
                                        <EventTrigger RoutedEvent="Canvas.Loaded">
                                            <EventTrigger.Actions>
                                                <BeginStoryboard>
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip" Storyboard.TargetProperty="IsHitTestVisible">
                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                <DiscreteObjectKeyFrame.Value>
                                                                    <sys:Boolean>true</sys:Boolean>
                                                                </DiscreteObjectKeyFrame.Value>
                                                            </DiscreteObjectKeyFrame>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </EventTrigger.Actions>
                                        </EventTrigger>
                                    </ToolTip.Triggers>
                                </ToolTip>
                            </ToolTipService.ToolTip>
                            <Grid Width="12" Height="12" HorizontalAlignment="Right" Margin="1,-4,-4,0" VerticalAlignment="Top" Background="Transparent">
                                <Path Margin="1,3,0,0" Data="M 1,0 L6,0 A 2,2 90 0 1 8,2 L8,7 z" Fill="#FFDC000C"/>
                                <Path Margin="1,3,0,0" Data="M 0,0 L2,0 L 8,6 L8,8" Fill="#ffffff"/>
                            </Grid>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

[从另一个问题](https://stackoverflow.com/a/6760888/278266)获得了很多帮助

# php - Facebook 注册插件出错

> ID：10994655
> 
> 赞同：0
> 
> 时间：2012-06-12T10:19:48.730
> 
> 标签：php, facebook, json, plugins, registration

我正在使用以下 iframe json 代码在我的网站上显示一个用于用户注册的表单。虽然当我在一定数量之后添加自定义字段时，我收到一条错误消息：

**错误请求 您的浏览器发送了此服务器无法理解的请求。请求头字段的大小超过服务器限制。推荐人/n**

我尝试联系我的托管帮助，他们说 facebook 代码存在问题，但我想这不是问题所在，因为在一定数量的复选框中代码可以正常工作，但一旦超出此范围，我就会明白上述错误。这是代码：

```
 <iframe src='http://www.facebook.com/plugins/registration.php?
                                    client_id=325340244194060&
                                         redirect_uri=http://www.pingcampus.com/facebook_registration_plugin/fbwe/trial.php&
                                    fields=[
            {
                "name": "name"
            },
            {
                "name": "email"
            },
            {
                "name": "gender"
            },
            {
                "name": "birthday"
            },

            {
                            "name": "Arts",
                            "description": "Arts",
                            "type": "checkbox",
                            "value": "Arts"
                        },
                        {
                            "name": "Act",
                            "description": "Act",
                            "type": "checkbox",
                            "value": "Act"
                        },
                        {
                            "name": "Cooking",
                            "description": "Cooking",
                            "type": "checkbox",
                            "value": "Cooking"
                        },
                        {
                            "name": "Dance",
                            "description": "Dance",
                            "type": "checkbox",
                            "value": "Dance"
                        },
                        {
                            "name": "Designing",
                            "description": "Designing",
                            "type": "checkbox",
                            "value": "Designing"
                        },
                        {
                            "name": "Fashion",
                            "description": "Fashion Designing",
                            "type": "checkbox",
                            "value": "Fashion Designing"
                        },
                        {
                            "name": "Interior",
                            "description": "Interior Designing",
                            "type": "checkbox",
                            "value": "Interior Designing"
                        },
                        {
                            "name": "Modeling",
                            "description": "Modeling",
                            "type": "checkbox",
                            "value": "Modeling"
                        },
                        {
                            "name": "Photography",
                            "description": "Photography",
                            "type": "checkbox",
                            "value": "Photography"
                        },
                        {
                            "name": "Poetry",
                            "description": "Poetry / Writing",
                            "type": "checkbox",
                            "value": "Poetry / Writing"
                        },
                        {
                            "name": "Programming",
                            "description": "Programming",
                            "type": "checkbox",
                            "value": "Programming"
                        },
                        {
                            "name": "Reading",
                            "description": "Reading",
                            "type": "checkbox",
                            "value": "Reading"
                        },
                        {
                            "name": "Sketching",
                            "description": "Sketching / Drawing",
                            "type": "checkbox",
                            "value": "Sketching / Drawing"
                        },
                        {
                            "name": "Singing",
                            "description": "Singing",
                            "type": "checkbox",
                            "value": "Singing"
                        },
                        {
                            "name": "Sports",
                            "description": "Sports",
                            "type": "checkbox",
                            "value": "Sports"
                        },
                        {
                            "name": "Stunting",
                            "description": "Stunting",
                            "type": "checkbox",
                            "value": "Stunting"
                        },
                        {
                            "name": "Videography",
                            "description": "Videography",
                            "type": "checkbox",
                            "value": "Videography"
                        },
                        {
                            "name": "Other",
                            "description": "Other",
                            "type": "checkbox",
                            "value": "Other"
                        },
                        {
                            "name": "captcha"
                        }

            ]'
                                    scrolling="auto"
                                    frameborder="no"
                                    style="border:none"
                                    allowTransparency="true"
                                    width="500"
                                    height="800"

                     >
                            </iframe> 
```

谁能猜出我哪里出错了？我正在使用[此处](http://developers.facebook.com/docs/plugins/registration/)给出的示例代码通过 php 处理表单。如果需要请询问代码，我也会提供 php 代码，但它与上面链接中的示例几乎相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:02:10.197

“获取”请求通常有限制。因此，当您返回服务器时，生成的 get 请求会超出该限制。（限制由 Apache 配置设置）。与 Facebook 无关，这个限制是由您的托管服务提供商设置的，所以您问他们是对的。

选项：

1.  要求托管服务提供商增加限制（不太可能）
2.  将数据存储在会话变量中，或连接到唯一 ID 的数据库表中。返回时，从会话中获取数据，或者使用唯一 id 作为发送给 Facebook 的参数，并使用该唯一 id 作为返回来建立完整数据。这种方法还有其他优点（显示的数据更少，允许更少的操作最终用户）

# sql - 使用 ADODB 恢复 SQL Server 数据库保留了数据库恢复状态

> ID：10994658
> 
> 赞同：1
> 
> 时间：2012-06-12T10:20:00.517
> 
> 标签：sql, sql-server, asp-classic, database-restore

我正在使用 ASP 代码 (ADODB) 恢复数据库。.bak 文件位于本地系统中。SQL 是本地的，带有 SQL 身份验证。

如果我在 SSMS 中尝试恢复查询，则恢复成功。但是在 ASP 代码中同样的查询是不成功的。数据库将处于正在恢复...状态。

查询是

```
RESTORE DATABASE [myDB] FROM  
DISK = N'D:\DB\myDB_20120611_190339.bak' WITH  FILE = 1,  
MOVE N'myDB' TO N'C:\Program Files\Microsoft SQL Server\MSSQL10.WEB2K8\MSSQL\DATA\myDB.mdf',  
MOVE N'myDB_log' TO N'C:\Program Files\Microsoft SQL Server\MSSQL10.WEB2K8\MSSQL\DATA\myDB_1.ldf',  
NOUNLOAD,  REPLACE,  STATS = 10
GO 
```

我不知道是什么问题。

任何帮助，将不胜感激。

谢谢

加内什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:37:07.033

您需要将 WITH RECOVERY 选项与您的数据库 RESTORE 命令一起使用，以使您的数据库在线作为恢复过程的一部分。

# .net-4.0 - 无法安装 .net 框架 4.0

> ID：10994660
> 
> 赞同：0
> 
> 时间：2012-06-12T10:20:22.897
> 
> 标签：.net-4.0, windows-server-2008, windows-installer

我已经使用 clean 实用程序从我的系统中清理了 .net 框架 4.0。它被卸载了 .net 框架工作框架 4.0。然后我尝试使用从下面的链接获得的设置文件重新安装 4.0。

[http://msdn.microsoft.com/en-us/netframework/aa569263.aspx](http://msdn.microsoft.com/en-us/netframework/aa569263.aspx)

但我收到安装失败错误。

错误消息：安装失败，错误代码：（0x80070643），“安装过程中出现致命错误。

我正在使用 Windows Server 2008 32 位操作系统。

任何人都可以给我一个解决方案吗？

问候，卡蒂克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:28:01.767

这通常意味着您的系统上已经安装了 .NET，但它已损坏。如果是这种情况，您可以尝试以下方法：

转到`Control Panel->Programs and Features`并打开`.NET Framework 4 Client Profile`安装程序。

选择`Repair .NET Framework 4 Client Profile to its original state`。之后重新启动。

完成此操作后，尝试使用离线安装程序重新安装 .NET Framework 4

[http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=17718](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=17718)

# javascript - jQuery：处理混合的 html/js ajax 响应

> ID：10994662
> 
> 赞同：1
> 
> 时间：2012-06-12T10:20:23.573
> 
> 标签：javascript, jquery, ajax, modal-dialog

在混合的 html/js ajax 响应中访问 javascript 代码时遇到问题。jQuery ajax 文档状态：

> 如果指定了 html，则检索数据中的任何嵌入 JavaScript 都会在 HTML 作为字符串返回之前执行

我可以通过在 html 回复中添加一个简单的片段来确认：

```
<script type="text/javascript"> alert($(this)); </script> 
```

那么如何保留对 js 代码的访问权与一次性执行？尝试实现模式登录（以防止表单提交屏幕中会话超时时数据丢失）。当然，我需要能够访问 ajax 的 js 代码，然后验证电子邮件/密码字段并 ajax 验证远程服务器上的用户凭据。

这是模态登录咖啡脚本片段：

```
# submit form
$.ajax
  success: (data) -> ...
  error: (data) ->
    popAuth(data.responseText) if(data.status == 401)

popAuth = (title) -> 
  $.fancybox({
    href: "/login"
    ajax: { type: "GET" }
    title: title
  }) 
```

也许我可以向 popAuth() ajax 选项添加一个成功回调来存储返回的 js 代码？jQuery“实时”处理程序怎么样？不幸的是，这种情况并不像人们希望的那样直截了当；-) 我认为`$.getScript`这是一种选择，但不希望将 html 与 js 分开，因为服务器端已经组装了 html + js 并且原始的 ajax 调用将其全部拉下来一气呵成。（即避免创建专用的服务器端控制器来发送回 js 文件内容包）

我当然愿意接受替代解决方案来解决这个问题。例如，我可以在隐藏的 div 中存储每个屏幕上的登录字段和 js 登录验证代码（JVM CRUD 应用程序位于 WordPress 前端，因此基本上每个屏幕都需要身份验证），然后“本地”弹出模式登录窗口，其中我假设会绕过远程 ajax 内容的烦人的一次性 js 执行。

无论如何，想法赞赏！客户端既非常简单又......非常复杂;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:09:43.233

好的，抵挡名副其实的大量回复，我会亲自出击。

据我所知，由于混合的 html/js 内容是一次性执行的，我们有机会捕获 ajax 响应 js 代码并将其绑定到当前范围。

首先，在原始 ajax 调用（即返回潜在 401 未授权状态的表单提交）中，将模式登录的 ajax 设置的上下文设置为 $(this)，当前执行的范围包含 jquery 验证和其他所需的共享 js 代码模态登录ajax提交工作。

就我而言，使用fancybox，添加上下文参数现在看起来像：

```
popAuth = (title) -> 
  $.fancybox({
    href: "/login"
    ajax: { type: "GET" }
    context: $(@)
    title: title
  }) 
```

然后，由于父窗口包含大部分所需的 javascript，唯一的要求是创建一个 js 文件，将模式登录表单按钮单击事件绑定到验证和 $.ajax 提交。

```
# login.coffee
jQuery ->
  $('#loginSubmit').click (e) ->
    e.preventDefault()
    isValid = $('#loginForm').validate().form()
    if isValid
      $('#spinner').show()
      $.ajax
        data: $('#loginForm').serialize()
        success: (data) ->
          $('#status').fadeOut()
          location.href = '/foo'
        error: (data) ->
          $('#status > div').html( data.responseText )
          $('#status').fadeIn()
        complete: () ->
          $('#spinner').hide() 
```

完成，一切都好，工作;-)

# objective-c - keyDown:(NSEvent *)当焦点位于文本字段时不调用事件

> ID：10994663
> 
> 赞同：3
> 
> 时间：2012-06-12T10:20:33.213
> 
> 标签：objective-c, cocoa

我已经覆盖`- (void)keyDown:(NSEvent *)event`了我的`NSPanel`子类。

但是，仅当焦点不在`NSTextField`我的面板内部时才会调用它。但是，无论焦点是在文本字段还是面板上，我都需要捕获*“按下 Enter 按钮”事件。*

如何确保它总是被调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T10:34:18.110

您确定需要为此捕获按键事件吗？

Apple 在文档中声明，摆弄`keyDown:`控件是最后的手段，只有当围绕代表的正常 Cocoa 架构不能满足您的要求时才使用。

如果目的是捕获按下的输入按钮，请注意文本字段中的此事件触发`textDidEndEditing`委托方法（或通知，如果您愿意的话）。

因此，如果您`controlTextDidEndEditing:`为您的委托实施，`NSTextField`您应该能够对事件做出反应。当字段编辑器结束编辑时，会发送此通知（以及相关的委托方法）。

如果您希望提前一步捕获事件（在字段编辑器结束编辑之前），您可以实现委托方法，该方法`control:textView:doCommandBySelector:`允许您拦截特定的键事件（例如返回键）并修改编辑器的行为。

一个例子可能如下：

```
- (BOOL)control:(NSControl *)control textView:(NSTextView *)fieldEditor doCommandBySelector:(SEL)commandSelector
{
    BOOL retval = NO;
    if (commandSelector == @selector(insertNewline:)) {
        retval = YES; // Handled

        // Do stuff that needs to be done when newLine is pressed
    }
    return retval;
} 
```

Apple 网站上有很多关于它的文档，例如[这里](http://developer.apple.com/library/mac/#documentation/TextFonts/Conceptual/CocoaTextArchitecture/TextFieldsAndViews/TextFieldsAndViews.html)的介绍。

# jsf-2 - 如何通过 JSF 导航规则重定向或键入 URL 来检测用户是否已到达页面？

> ID：10994666
> 
> 赞同：5
> 
> 时间：2012-06-12T10:20:39.780
> 
> 标签：jsf-2

JSF 中是否有任何方法可用于确定用户是否通过 JSF 的导航规则访问了页面，或者用户是否直接键入了 URL 以访问该页面？

实际上，我想通过直接在浏览器中键入 URL 来防止用户直接进入页面，而是希望限制用户使用应用程序导航栏进入页面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T11:42:14.480

有*一种*方法：检查`referer`标题的存在（是的，拼写错误）。

```
if (externalContext.getRequestHeader("referer") == null) {
    // User has most likely accessed the page by directly typing the URL.
} 
```

或者

```
<h:panelGroup rendered="#{empty header['referer']}">
    <!-- User has most likely accessed the page by directly typing the URL. -->
</h:panelGroup> 
```

`referer`但是，对于那些在您的网页中巧妙地使用该链接但正在使用一些完全隐藏标题的过度热心的代理/防火墙/安全软件的用户，这将失败。

您可能需要考虑通过将页面放置在文件夹中并将其用作由 POST 请求执行的条件包含（如果需要使用 ajax）来使用户*永远无法*直接使用该页面。`/WEB-INF`例如

```
<h:form>
    <h:commandLink action="#{bean.showPage}" />
</h:form>

<h:panelGroup rendered="#{bean.showPage}">
    <ui:include src="/WEB-INF/includes/foo.xhtml" />
</h:panelGroup> 
```

# windows-phone-7.1 - 在 Windows Phone 7 中查看滚动查看器的隐藏部分

> ID：10994668
> 
> 赞同：0
> 
> 时间：2012-06-12T10:20:50.540
> 
> 标签：windows-phone-7.1, crop

我正在创建一个 WP7 应用程序来裁剪照片，然后添加一些效果并上传到服务器。我希望当用户选择要裁剪的照片区域时，他们可以看到剩余部分。

我的照片包含在滚动查看器中，因此用户可以滚动到他们想要的位置，并裁剪照片的可见部分。

但是，在scrollviewer中滚动时，照片的隐藏部分是完全透明的，这让用户难以辨认。我希望用户可以查看不透明度约为 50% 的不可见部分。

这张图可以解释的更清楚： ![在此处输入图像描述](../Images/09d9fa91e211c150fee4b6b53b0334ce.png)

是否有解决此问题的解决方法或其他控件？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:15:10.337

而不是使用裁剪，我会尝试在顶部分层一些东西来创建半透明。

裁剪意味着不显示图像的这一部分。它不仅仅是暂时隐藏它。

# objective-c - Xcode 和不推荐使用的警告并不总是有效

> ID：10994669
> 
> 赞同：0
> 
> 时间：2012-06-12T10:20:57.897
> 
> 标签：objective-c, xcode, ios5

我对 Xcode (4.3.2) 和不推荐使用的警告有一个奇怪的行为，我想了解原因。似乎已弃用的警告仅在某些方法上触发。例如（这两种方法都已弃用）：

```
[[UITableViewCell alloc] initWithFrame:CGRectMake(0, 0, 0, 0) reuseIdentifier:@"Cell"]; 
```

编译器警告（正确地）该方法已被弃用。但：

```
[self presentModalViewController:viewController animated:YES]; 
```

不会触发警告。为什么？:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:31:41.893

检查开发人员文档，你会得到 -

1-目前已弃用-

`// Frame is ignored. The size will be specified by the table view width and row height.`

```
- (id)initWithFrame:(CGRect)frame reuseIdentifier:(NSString *)reuseIdentifier __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_NA,__MAC_NA,__IPHONE_2_0,__IPHONE_3_0); 
```

2-它将很快被弃用。

`// Display another view controller as a modal child. Uses a vertical sheet transition if animated.This method has been replaced by presentViewController:animated:completion: // It will be DEPRECATED, plan accordingly.`

```
- (void)presentModalViewController:(UIViewController *)modalViewController animated:(BOOL)animated; 
```

希望它清楚为什么你首先收到警告，而不是第二次。

# android - Mapview上的气球，并且还想在Android地图上气球位置发生变化时获取位置

> ID：10994672
> 
> 赞同：2
> 
> 时间：2012-06-12T10:21:11.677
> 
> 标签：android, google-maps, google-maps-markers, balloon

最近我展示了 ubicabs 出租车预订应用程序。我在其中发现了非常好的功能。在这个应用程序中，他们有用于显示标记的谷歌地图，但他们为此使用了非常好的 UI 组件。我还发现另一个独特之处是，每当用户通过触摸移动或更改标记的位置时，它都会获取当前位置。我知道的一件事是它正在使用 Overlay 的 onTouchEvent，但如何创建该标记气球以及如何根据该标记获取更新的位置。

我在此处附上该标记的预览。还想知道我们如何滚动那个气球内的文本？

![在此处输入图像描述](../Images/92ab5e00982f354dfc36394e1b5b4b3f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:33:05.350

到目前为止我发现的最好的覆盖开放项目是这个，[链接](http://github.com/jgilfelt/android-mapviewballoons)。但与上图相比，这不算什么。也想知道他们是如何创造这个的！好问题和图片；）

# c# - 在 c# 中同时使用 Directshow.Net 进行视频流和录制？

> ID：10994673
> 
> 赞同：2
> 
> 时间：2012-06-12T10:21:17.897
> 
> 标签：c#, directshow.net

我想使用 Directshow.Net 通过网络摄像头录制视频。我可以使用 ASFWriter 录制视频，但除了录制之外，我还想将视频流式传输到 LAN 中的 PC ..我试过这个..

我运行我为录制视频而开发的项目这是代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using DirectShowLib;
using DirectShowLib.DMO;
using System.Runtime.InteropServices;
using System.Drawing.Drawing2D;
using System.IO;

namespace Cam_Recording_V1_directshow.net_
{
public partial class Form1 : Form
{
    string captureDeviceName = string.Empty;
    IFilterGraph2 Graph = null;
    IMediaControl m_mediaCtrl = null;
    public List<DsDevice> AvailableVideoInputDevices { get; private set; }
    IAMVideoProcAmp vpa;
    [DllImport("olepro32.dll", CharSet = CharSet.Unicode, ExactSpelling = true)]
    private static extern int OleCreatePropertyFrame(IntPtr hwndOwner, int x, int y,
        string lpszCaption, int cObjects,
        [In, MarshalAs(UnmanagedType.Interface)] ref object ppUnk,
        int cPages, IntPtr pPageClsID, int lcid, int dwReserved, IntPtr pvReserved);
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

        IBaseFilter capFilter = null;
        IBaseFilter asfWriter = null;
        IFileSinkFilter pTmpSink = null;
        ICaptureGraphBuilder2 captureGraph = null;
        object o;

        //
        //Get list of video devices
        //
        AvailableVideoInputDevices = new List<DsDevice>();
        DsDevice[] videoInputDevices = DsDevice.GetDevicesOfCat(FilterCategory.VideoInputDevice);
        AvailableVideoInputDevices.AddRange(videoInputDevices);
        if (AvailableVideoInputDevices.Count > 0)
        {
            //
            //init capture graph
            //
            Graph = (IFilterGraph2)new FilterGraph();
            captureGraph = (ICaptureGraphBuilder2)new CaptureGraphBuilder2();

            //
            //sets filter object from graph
            //
            captureGraph.SetFiltergraph(Graph);
            //
            //which device will use graph setting
            //
            Graph.AddSourceFilterForMoniker(AvailableVideoInputDevices.First().Mon, null, AvailableVideoInputDevices.First().Name, out capFilter);
            captureDeviceName = AvailableVideoInputDevices.First().Name;
            #region WMV
            //
            //sets output file name,and file type
            //
            captureGraph.SetOutputFileName(MediaSubType.Asf, /*DateTime.Now.Ticks.ToString()  +".wmv"*/ "test.wmv", out asfWriter, out pTmpSink);
            //
            //configure which video setting is used by graph
            //                
            IConfigAsfWriter lConfig = asfWriter as IConfigAsfWriter;
            Guid cat = new Guid("8C45B4C7-4AEB-4f78-A5EC-88420B9DADEF");
            lConfig.ConfigureFilterUsingProfileGuid(cat);
            #endregion                      
            captureGraph.RenderStream(PinCategory.Preview, MediaType.Video, capFilter, null, null);

            captureGraph.RenderStream(PinCategory.Capture, MediaType.Video, capFilter, null, asfWriter);
            m_mediaCtrl = Graph as IMediaControl;
            m_mediaCtrl.Run();
        }
        else
        {
            MessageBox.Show("Video Capture Device Not Found!!");
            button1.Visible = false;
        }
    } 
```

这将开始视频录制..之后我从“Release”文件夹运行[这个](http://www.codeproject.com/Articles/80413/Streaming-Server-using-Direct-Show-and-Windows-Med)项目 exe，它会给出类似“媒体运行失败”的错误

现在我的问题**是可以同时进行录制和直播吗？**

如果是，那么请指导我完成这个..也请在我的这篇[文章](https://stackoverflow.com/questions/10926178/how-to-show-preview-in-picturebox)中指导我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T21:25:15.833

我认为您应该手动构建图表。该图应如下图所示。您可以使用 GraphEdt 测试 Graph。这也有助于获取 Guid 和 PinNames。

```
VideoSource -> SmartTee -> StreamingFilter
                        -> CaptureFilter 
```

DirectShowLib 提供了构建图形所需的所有功能。

您可以像在示例中那样创建过滤器。可以直接创建 SmartTee 过滤器。

您应该使用 graph.Connect() 方法连接过滤器。使用它，您可以使用 SmartTee 过滤器构建以下图表。SmartTee 过滤器应该在您的系统上可用，并提供两个输出引脚，一个用于捕获，一个用于预览。您应该为 Streaming 使用 preveiw pin，为 Capture 过滤器使用 capture pin。

您可以使用以下函数获取连接方法所需的 Pin：

```
 public IPin GetPin(IBaseFilter filter, string pinname)
    {
        IEnumPins epins;
        int hr = filter.EnumPins(out epins);
        if(hr < 0)
            return null;
        IntPtr fetched = Marshal.AllocCoTaskMem(4);
        IPin[] pins = new IPin[1];
        epins.Reset();
        while (epins.Next(1, pins, fetched) == 0)
        {
            PinInfo pinfo;
            pins[0].QueryPinInfo(out pinfo);
            bool found = (pinfo.name == pinname);
            DsUtils.FreePinInfo(pinfo);
            if (found)
                return pins[0];
        }
        return null;
    } 
```

最后，您必须启动图表，一切都会有希望地工作。在每次调用错误处理方法后检查 hr 代码是很重要的。

# ios - 如何使用 UISaveVideoAtPathToSavedPhotosAlbum 保存 youtube 视频？

> ID：10994678
> 
> 赞同：1
> 
> 时间：2012-06-12T10:21:26.000
> 
> 标签：ios, video, youtube, save

我可以在`UISaveVideoAtPathToSavedPhotosAlbum`.

我想将你的视频保存到相册中。是否可以？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:55:24.763

不幸的是，由于两个主要原因，您无法在本地保存 YouTube 视频：

1.  YouTube 不允许用户将视频下载到本地设备。
2.  iOS 中没有为此提供适当的 API。

# c# - Excel 插件按钮

> ID：10994683
> 
> 赞同：1
> 
> 时间：2012-06-12T10:21:40.357
> 
> 标签：c#, excel, add-in

我是 Excel 插件编程的新手。我在 C# 中为 Excel 2010 创建了一个 Excel 插件，它将在每张工作簿中创建按钮。

有人能告诉我这段代码有什么问题吗：

```
Excel.Worksheet activeWorksheet = Globals.ThisAddIn.Application.ActiveWorkbook.ActiveSheet;
Microsoft.Office.Tools.Excel.Worksheet vstoWorksheet = activeWorksheet.GetVstoObject(Globals.Factory);
Excel.Range selection = vstoWorksheet.Range[2, 2];
Microsoft.Office.Tools.Excel.Controls.Button button = new Microsoft.Office.Tools.Excel.Controls.Button();
button.Tag = vstoWorksheet.Controls.AddControl(button,selection, "Click"); button.Name = "Click";
button.BackColor = System.Drawing.Color.Cyan;
button.Text = "Click"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T01:37:15.383

我看到了问题：

```
button.Tag = vstoWorksheet.Controls.AddControl(button,selection, "Click"); 
```

应该：

```
vstoWorksheet.Controls.AddControl(button,selection, "Click"); 
```

# iphone - iOS XCode 和代码签名

> ID：10994684
> 
> 赞同：0
> 
> 时间：2012-06-12T10:21:40.930
> 
> 标签：iphone, ios, xcode, ios5, ios4

我目前正要开始为某人开发一个 iOS 应用程序，但他们有自己的 Apple Developer 帐户，他们希望我们能够使用。如何设置我的 MAC，以便我可以使用他们的帐户在我的设备上构建、开发和测试他们的应用程序？

我假设我需要在我的 MAC 上创建一个单独的用户帐户。我已经这样做了，但是当我尝试安装他们创建的证书时，我得到了诸如“找不到有效的签名身份”之类的错误。

为什么 Apple 不能让这个过程变得简单，我总是不得不重新参考文档并且仍然感到困惑只是开始创建一个新的应用程序！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:28:44.970

不，您不需要创建单独的帐户。Xcode 提供了同时使用多个配置文件和证书的工具。

有关更多信息，请查看此线程 -[在一个 Xcode 管理器中的多个证书/配置文件？](https://stackoverflow.com/questions/4956988/multiple-certificates-provisioning-profiles-in-one-xcode-organizer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:29:39.380

您不必为此在 Mac 上创建新的用户帐户，但我知道一些开发人员在使用多个开发人员帐户时更喜欢拥有单独的帐户，以便于开发和分发配置文件。

如果您的客户将您（通过 Apple ID --> 电子邮件地址）作为团队成员添加到他们的帐户（假设他们的帐户属于公司而不是个人），那么您可以通过请求并稍后接收签名的开发来开始开发过程证书。然后，您还需要所需的配置文件来开发/分发应用程序的构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:35:14.413

首先，您无需在 Mac 上创建新帐户即可开发 iOS 应用程序。在 Xcode 4 中，开始开发和签署应用程序变得非常容易。您需要做的就是转到 Organizer（Xcode 工具栏上最右边的按钮）。在 Provisioning Profiles 部分，您可以在屏幕底部看到 Refresh 按钮。当您单击它时，会询问您的开发者帐户信息，例如帐户名和密码。然后它会尝试自动将所有配置文件和证书安装到您的 Mac。然后您可以选择您的个人资料并签署您的应用程序。如果自动安装失败，请检查自己是否下载了所需的所有内容。

1.  在您的 Mac 上创建密钥并提交给 Apple。
2.  下载您的证书和 WWDR 证书。二！！！！
3.  将您的设备添加到设备部分并创建开发证书（以及分发）。手动下载它或通过在 Xcode Organizer 中刷新。

希望能帮助到你。谢尔盖！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-01T07:22:13.467

获得 Apple 开发人员帐户凭据后，您可以按照我创建的要点进行操作：

[Apple 的代码签名流程](https://gist.github.com/DalwadiV/2e43760d973c1d2baada)

# cakephp - CakePHP 详细请求处理

> ID：10994685
> 
> 赞同：1
> 
> 时间：2012-06-12T10:21:50.257
> 
> 标签：cakephp

您是否知道任何资源（教程、文档），我可以从中了解在 CakePHP 中处理 HTTP 请求的方式？

我想看看哪些类被实例化，哪些方法被调用（以及什么顺序）等。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:26:19.283

您可以使用 Xdebug 的分析器来执行此操作：http: [//xdebug.org/docs/profiler](http://xdebug.org/docs/profiler)

教程：[http ://devzone.zend.com/1139/profiling-php-applications-with-xdebug/](http://devzone.zend.com/1139/profiling-php-applications-with-xdebug/)

# c - 在事先不知道要输入多少值的情况下，如何设计输入？

> ID：10994687
> 
> 赞同：1
> 
> 时间：2012-06-12T10:22:01.147
> 
> 标签：c

我想根据用户输入的值的数量进行输入，而不是期望值的确切数量。

在我的程序中，我希望用户输入整数，但问题是我希望允许用户输入一个或两个空格分隔的整数。

因此，如果用户输入两个空格分隔的整数，它们应该存储在变量 a 和 b 中，如果他在按 enter 之前只输入一个数字，那么它应该存储在 a 中，程序应该继续进行而不等待第二个数字.

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:25:34.983

Try getting the whole input as a character array, than parse it as you wish.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T10:26:11.703

Think about how you would do it yourself then turn that into code:

*   Get a line from the input
*   Tokenise it by whitespace
*   Check that the tokens are integers can convert them

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T10:46:18.063

看起来你可以很容易地做到这一点`scanf`：

```
int a,b;
char c[1];
int n = scanf("%d%0[ ]%d",&a,&c,&b); 
```

只有用空格分隔它才会读取`b`，因此它将在换行处停止。

`n`将包含读取的字段数（包括分隔符）。

我不确定它是否完全有效或跨平台。在将其放入任何严肃的程序之前，您应该检查文档。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T10:25:36.420

You should read the whole line as a character string using `fgets()` and then parse into the integer(s) you need.

# php - 使用 PHP 引用数组中的字段

> ID：10994689
> 
> 赞同：0
> 
> 时间：2012-06-12T10:22:17.560
> 
> 标签：php, arrays, moodle

这是一个非常简单的问题，我正在努力解决。我有一个变量 ($foo)，它是一个从 sql 调用创建的数组。

当我在代码中引用一个字段时，有什么区别

`$foo['bar']`和`$foo->bar`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:24:36.483

```
$foo['bar'] 
```

references an element with the key 'bar' in an array assigned to the variable $foo, as retrieved by mysql_fetch_array()

```
$foo->bar 
```

references the property called 'bar' in an object instance in the variable $foo, as retrieved by mysql_fetch_object()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:24:24.890

The difference is the mysqli_fetch_* method you use.

*   mysqli_fetch_object -> $foo->bar
*   mysqli_fetch_assoc -> $foo['bar']
*   mysqli_fetch_array -> $foo[0]

'Assoc' stands for 'associated (array)'.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:24:43.597

$foo['bar'] is used to access array index this case $foo is an array variable and $foo->bar is used to access class method . in this case $foo is a class object

```
$foo = new StdClass();
$foo->bar = "Anything"; 
```

or

```
$foo['bar'] = "dfgdfG"; 
```

# jira - JIRA 中的数字格式异常

> ID：10994690
> 
> 赞同：1
> 
> 时间：2012-06-12T10:22:19.970
> 
> 标签：jira, jira-plugin

尝试使用 id 获取问题详细信息时出现数字格式异常。

```
RemoteIssue ri = jira.getIssueById(JIRAtoken, string.Format(IssueKey)); 
```

这`jiratoken`是字符串。但是例外。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:31:18.017

我有同样的问题，使用 JIRA (4) 的 SOAP Web 服务 API。

我通过使用**`getIssue`**而不是解决了它`getIssueById`。使用`getIssue`，JIRA 期望像 MYPROJECT-3 这样的密钥。

现在我发送这样的请求，它可以工作：

```
<soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soap="http://soap.rpc.jira.atlassian.com">
   <soapenv:Header/>
   <soapenv:Body>
      <soap:getIssue soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
         <in0 xsi:type="xsd:string">MyAuthToken</in0>
         <in1 xsi:type="xsd:string">MYPROJECT-1</in1>
      </soap:getIssue>
   </soapenv:Body>
</soapenv:Envelope> 
```

# php - 消除 字符串开头和结尾的标签（JavaScript 或 PHP）

> ID：10994693
> 
> 赞同：1
> 
> 时间：2012-06-12T10:22:29.993
> 
> 标签：php, javascript, string

我从服务器接收以下格式的数据

```
<ul>
    <li>Some text</li>
    <li>Other text</li>
</ul> 
```

基本上是包含标准无序列表的字符串。我现在要做的是删除`ul`包装列表项的标签，这样我就只会收到内部内容。像这样：

```
<li>Some text</li>
<li>Other text</li> 
```

值得一提的`ul`是，当我获取数据时，标签总是存在的，所以我并不关心它里面有什么，或者是否有更多的`ul`标签嵌套在其中。我只需要删除外部的并获取内部的数据。

JavaScript 或 PHP 解决方案都将受到欢迎。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T10:25:25.920

```
var div = document.createElement("div");
div.innerHTML = "<ul><li></li></ul>";
div.firstChild.innerHTML; //"<li></li>" 
```

请注意，只有在字符串开头没有空格/文本时`.firstChild`才会出现这种情况。`ul`

在这种情况下，您可以使用：

```
var div = document.createElement("div");
div.innerHTML = "    <ul><li></li></ul>";
div.getElementsByTagName("ul")[0].innerHTML //"<li></li>" 
```

反而

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:27:45.443

```
var txt="<ul>\n    <li>Some text</li>\n    <li>Other text</li>\n</ul>";
var result=txt.replace(/^<ul>\s*/,'').replace(/\s*<\/ul>$/,''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:34:53.933

```
text.replace(/^<ul>/, "")​​​​​​​​​​​​.replace(/<\/ul>$/, ""); 
```

# ruby - 用于解析可选内容的 PEG 语法

> ID：10994696
> 
> 赞同：0
> 
> 时间：2012-06-12T10:22:53.067
> 
> 标签：ruby, treetop, peg

谁能告诉我如何在支持两者的[Treetop上编写语法：](http://treetop.rubyforge.org/)

```
system u AAA1 car=5, motor=4 
```

和

```
system u car=5, motor=4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:30:52.217

您想使用“可选表达式”（请参阅[​​此页面](http://treetop.rubyforge.org/syntactic_recognition.html)上大约 60% 的内容）：

```
grammar Sokmesa
  rule line
    "system" wsp+ marker wsp+ (category wsp+)? attributelist
  end
  rule category
    "AAA1" # Or whatever
  end
  # Add rules for 'marker', 'wsp', and 'attributelist' here
end 
```

# c++ - 在 VS 项目中包含 boost 库的错误

> ID：10994699
> 
> 赞同：1
> 
> 时间：2012-06-12T10:23:05.550
> 
> 标签：c++, visual-studio-2008, boost, boost-thread

我正在尝试在 64 位平台上编译 VS2008 C++ 项目。在这个项目中，我使用 boost 线程。我可以在 32 位平台上正确编译项目。

在 64 位平台上，我下载了预编译的 boost 库（适用于 64 位）。我在`C/C++ -> General -> Additional Include Directories`. 我确定路径是正确的。

当我尝试编译时出现错误：

```
Error   34  fatal error LNK1104: cannot open file 'libboost_thread-vc90-mt-1_49.lib'    BioCpp  BioCpp 
```

我确定我的计算机上确实有这个文件，并且我正确设置了`C/C++ -> General -> Additional Include Directories`路径。

也许我错过了其他东西......有人可以提供一些帮助吗？

PS：我正在使用共享服务器，我无法构建库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:27:25.323

这是一个库，而不是包含文件，因此“附加包含目录”设置无关紧要。将路径添加到项目配置中“链接器”下的“附加库目录”设置。

# asp.net - 下拉值在gridview中不刷新

> ID：10994704
> 
> 赞同：0
> 
> 时间：2012-06-12T10:23:22.603
> 
> 标签：asp.net, drop-down-menu

我正在使用一个`DropDownList`这样的`GridView`：

```
 <asp:DropDownList ID="drpstatus" Style="outline: 0" runat="server" SelectedValue='<%#Eval("status_value")%>'>
      <asp:ListItem Text="Inactive" Value="0"></asp:ListItem>
      <asp:ListItem Text="Active" Value="1"></asp:ListItem>
      <asp:ListItem Text="Rejected" Value="2"></asp:ListItem>
 </asp:DropDownList> 
```

当我第一次绑定时，它会显示正确的选定值，但是当我通过另一个网络表单更改值并刷新此页面时，值仍然保持不变。我检查了数据库；它*已经*改变，但在下拉列表中没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:30:36.450

更改值后，再次绑定网格并检查。

希望这可以帮助您...如果没有，请提供更多详细信息

# jquery - Colorbox - 如何仅显示特定的 DIV

> ID：10994706
> 
> 赞同：1
> 
> 时间：2012-06-12T10:23:24.277
> 
> 标签：jquery, colorbox

我正在使用 Colorbox 在电子商店中显示产品，但我只想显示产品 div (#prodpreview) 而不是带有页眉、页脚等的整个页面。

每个产品链接如下所示：

```
<a class="items" href="product.php?id=1" rel="items">Link to product 1</a>
<a class="items" href="product.php?id=2" rel="items">Link to product 2</a> 
```

这是我对 Colorbox 的调用：

```
$("a.items").colorbox({rel: 'items', iframe:true, transition:"fade", 
width:"80%", height:"90%", 
onClosed:function(){ location.reload(true); } }); 
```

我读过[这个](https://stackoverflow.com/questions/9025937/colorbox-load-specific-div-from-iframe) ，但它对我不起作用，还有其他建议吗？

更新：我已经改变了一些事情，现在我正在使用以下调用在 Colorbox 中打开一个页面并显示一个特定的 div。

```
$('a.items').colorbox({ href:function(){ return this.href + " #prodpreview"; }}); 
```

但是现在我失去了 Colorbox 的所有 iframe 功能，当我在 colorbox 中提交表单时，窗口关闭，我只剩下产品页面。那么我该如何从这里开始以结合这两个功能，打开一个 Colorbox 窗口以显示一个#div，但还具有 iframe 功能，以便我可以在 Colorbox 中提交表单？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T10:30:58.490

如果你想在颜色框中显示特定的 div，你应该这样做：

```
<div id="prodpreview" style="display:none">
   your stuff here
</div>
<a class='inline' href="#prodpreview">Inline HTML</a>

<script>
$(".inline").colorbox({inline:true});
</script> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-08-13T11:53:19.440

该 div 的正确脚本是：

```
<script>$("#inline").colorbox({inline:true});</script> 
```

因为它是一个 id 而不是一个类

# java - 使用java将变量列excel表导入mysql

> ID：10994712
> 
> 赞同：0
> 
> 时间：2012-06-12T10:23:47.510
> 
> 标签：java, mysql, hibernate, spring-mvc, apache-poi

我正在使用 apache poi 将数据从 excel 读取到 mysql 表。我已经为具有 2 个字段的 excel 表做了它。我的代码就像，

```
try
        {
            fis = new FileInputStream(filePath);

        //creating workbook, sheet(from poi jar file)
        HSSFWorkbook workBook = new HSSFWorkbook(fis);
        HSSFSheet sheet = workBook.getSheetAt(0);
        //Iterator for iterating rows in sheet
        Iterator itr = sheet.iterator();
        while(itr.hasNext())
        {

            HSSFRow row = (HSSFRow) itr.next();
            Iterator cell = row.cellIterator();
            List data = new ArrayList();
            while(cell.hasNext())
            {
                HSSFCell value = (HSSFCell) cell.next();                    
                if (value.getCellType() == Cell.CELL_TYPE_NUMERIC) 
                {
                    data.add(value.getNumericCellValue());
                }
                else if (value.getCellType() == Cell.CELL_TYPE_BOOLEAN) 
                {
                    data.add(value.getBooleanCellValue());
                }
                else if (value.getCellType() == Cell.CELL_TYPE_STRING)
                {
                    data.add(value.getStringCellValue());
                }
            }
            sheetData.add(data);

        }
    }
    catch (Exception e) {
        // TODO: handle exception
    } 
```

并将数据放在数组列表中。十将其插入数据库..但现在我需要系统来获取具有不同数量的 cloumns 的 excel 文件。我能达到吗？我只是非常需要一些帮助。所以请帮助我一些想法，可能还有一些代码。

提前致谢。苏吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:59:36.717

迭代单行时

```
if (value.getCellType() == Cell.CELL_TYPE_NUMERIC){
                     data.add(value.getNumericCellValue());                 
} 
```

您可以添加一个新的 if 块来检查

```
if(value.getCellType() == Cell.CELL_TYPE_BLANK){
break;
} 
```

在这里，我假设您的列中的所有数据都是同时的（1 2 3 4 空白）而不是这样（1 空白空白 2 3 4 5）。因此，当您获得空白类型时，您的迭代器将转移到下一行。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:28:40.627

可以使用excel表格的第一行来存储mysql表的列名，这样就会有一个**column-index-column-name的**映射信息。

然后，插入mysql表时，可以选择第一行的列名进行操作。例如

**Excel 1**

```
 =========================
   | A      | B      | C
===+========+========+======
1  | name   | gender | age   <-- column name row
---+--------+--------+------
2  | josh   | male   | 28
---+--------+--------+------
3  | linda  | female | 22
---------------------------- 
```

**SQL 1**

```
INSERT INTO table (name, gender, age) VALUES ('josh', 'male', 28),('linda', 'female', 22) 
```

**Excel 2**

```
 ==================
   | A      | B 
===+========+========
1  | name   | country <-- column name row
---+--------+--------
2  | 张三   | China
---+--------+--------
3  | emily  | USA
--------------------- 
```

**SQL 2**

```
INSERT INTO table (name, country) VALUES ('张三', 'China'),('emily', 'USA') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-11T07:15:00.463

我们也可以使用简单和最好的方法 2 将 Excel 表上传到数据库

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<form action="./ExcelSample" method="post" id="formdata"
    enctype="multipart/form-data" onsubmit="return excelUpload('Conform')">
<label for="inputSuccess2" class="control-label">
<div id="scn">Select Excel File</div>
</label> <input type="file" name="excel" id="excelfile"
    class="form-control active"> <label class="control-label">&nbsp;</label>
<input type="submit" class="form-control btn btn-orange" id="Upload"
    value="Upload"></form>
</body>
</html>

package com.excel.Sample.ExcelAnn;

import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Retention(RetentionPolicy.RUNTIME)
@Target(value=ElementType.METHOD)
public @interface ExcelColumn {
    boolean ignore() default false;
    String label() default "";
}

package com.excel.Sample.ExcelAnn;

import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Retention(RetentionPolicy.RUNTIME)
@Target(value=ElementType.TYPE)
public @interface ExcelReport {
    String reportName();
}

    package com.excel.Sample.Actions;

import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.lang.reflect.Method;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;

import org.apache.poi.hssf.usermodel.HSSFCellStyle;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.hssf.util.HSSFColor;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.CellStyle;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.ss.usermodel.Workbook;

import com.excel.Sample.ExcelAnn.ExcelColumn;
import com.excel.Sample.ExcelAnn.ExcelReport;

public class ExcelAction {
    private HSSFWorkbook workbook = null;
    private String workbookName = "Book1.xls";
    private Map<String, String> fieldLabelMap = new HashMap<String, String>();
    private List<String> orderLabels = new ArrayList<String>();
    private CellStyle columnHeaderCellStyle = null;

    public ExcelAction() {
        initialize();
    }

    private void initialize() {
        setWorkbook(new HSSFWorkbook());
        setColumnHeaderCellStyle(createColumnHeaderCellStyle());
    }

    private CellStyle createColumnHeaderCellStyle() {
        CellStyle cellStyle = getWorkbook().createCellStyle();
        cellStyle.setFillPattern(HSSFCellStyle.SOLID_FOREGROUND);
        cellStyle.setFillBackgroundColor(new HSSFColor.GREY_25_PERCENT()
                .getIndex());
        cellStyle.setBorderTop(HSSFCellStyle.BORDER_THIN);
        cellStyle.setBorderLeft(HSSFCellStyle.BORDER_THIN);
        cellStyle.setBorderBottom(HSSFCellStyle.BORDER_THIN);
        cellStyle.setBorderRight(HSSFCellStyle.BORDER_THIN);
        return cellStyle;
    }

    public void closeWorksheet() {
        FileOutputStream fileOut;
        try {
            fileOut = new FileOutputStream(getWorkbookName());
            getWorkbook().write(fileOut);
            fileOut.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private HSSFSheet getSheetWithName(String name) {
        HSSFSheet sheet = workbook.getSheet(name);
        return sheet;
    }

    private void initializeForRead(InputStream inp) throws IOException {
        workbook = new HSSFWorkbook(inp);
    }

    private <T> void processAnnotations(T object) {
        Class<?> clazz = object.getClass();
        ExcelReport reportAnnotation = (ExcelReport) clazz
                .getAnnotation(ExcelReport.class);

        for (Method method : clazz.getMethods()) {

            ExcelColumn excelColumn = method.getAnnotation(ExcelColumn.class);
            if ((excelColumn != null) && !excelColumn.ignore()) {
                getFieldLabelMap().put(excelColumn.label(), method.getName());
                getOrderLabels().add(excelColumn.label());
            }
        }
    }

    @SuppressWarnings("unchecked")
    public <T> List<T> readData(String classname, InputStream inp)
            throws Exception {
        Class clazz = Class.forName(classname);
        processAnnotations(clazz.newInstance());
        initializeForRead(inp);
        HSSFSheet sheet = getSheetWithName("Sheet1");
        List<T> result = new ArrayList<T>();
        Map<String, String> mp = new HashMap<String, String>();
        Iterator<Row> rowIterator = sheet.rowIterator();
        int rowCount = 0;
        while (rowIterator.hasNext()) {
            T one = (T) clazz.newInstance();
            try {
                int colCount = 0;
                result.add(one);
                Row row = rowIterator.next();
                Iterator<Cell> cellIterator = row.cellIterator();
                while (cellIterator.hasNext()) {
                    Cell cell = cellIterator.next();
                    if (rowCount == 0) {
                        mp.put(colCount + "", cell.getStringCellValue()
                                .toString().trim());

                    } else {
                        int type = cell.getCellType();
                        String labelName = mp.get(colCount + "");
                        String getter = getFieldLabelMap().get(labelName);
                        String fieldName = getter.substring(3);
                        fieldName = decapitalize(fieldName);
                        Method method = constructMethod(clazz, fieldName);
                        if (type == 1) {
                            String value = cell.getStringCellValue();
                            Object[] values = new Object[1];
                            values[0] = value;
                            method.invoke(one, values);
                        } else if (type == 0) {
                            Double num = cell.getNumericCellValue();
                            Class<?> returnType = getGetterReturnClass(clazz,
                                    fieldName);
                            if (returnType == Integer.class) {
                                method.invoke(one,(Integer) num.intValue());
                            } else if (returnType == Double.class) {
                                method.invoke(one, (Integer) num.intValue());
                            } else if (returnType == Float.class) {
                                method.invoke(one, num.floatValue());
                            } else if (returnType == Date.class) {
                                method.invoke(one, cell.getDateCellValue());
                            }
                        } else if (type == 3) {
                            double num = cell.getNumericCellValue();
                            Object[] values = new Object[1];
                            values[0] = num;
                            method.invoke(one, values);
                        }
                    }
                    colCount++;
                }
            } catch (Exception e) {
                System.out.println(e);
            }
            rowCount++;
        }
        return result;
    }

    private Class<?> getGetterReturnClass(Class<?> clazz, String fieldName) {
        String methodName = "get" + capitalize(fieldName);
        Class<?> returnType = null;
        for (Method method : clazz.getMethods()) {
            if (method.getName().equals(methodName)) {
                returnType = method.getReturnType();
                break;
            }
        }
        return returnType;
    }

    @SuppressWarnings("unchecked")
    private Method constructMethod(Class clazz, String fieldName)
            throws SecurityException, NoSuchMethodException {
        Class<?> fieldClass = getGetterReturnClass(clazz, fieldName);
        return clazz.getMethod("set" + capitalize(fieldName), fieldClass);
    }

    public <T> void writeReportToExcel(List<T> data) throws Exception {
        processAnnotations(data.get(0));
        Sheet sheet = getWorkbook().createSheet(
                data.get(0).getClass().getName());
        int rowCount = 0;
        int columnCount = 0;
        Row row = sheet.createRow(rowCount++);
        for (String labelName : getOrderLabels()) {
            Cell cel = row.createCell(columnCount++);
            cel.setCellValue(labelName);
            cel.setCellStyle(getColumnHeaderCellStyle());
        }
        Class<? extends Object> classz = data.get(0).getClass();
        for (T t : data) {
            row = sheet.createRow(rowCount++);

            columnCount = 0;

            for (String label : getOrderLabels()) {
                String methodName = getFieldLabelMap().get(label);
                Cell cel = row.createCell(columnCount);
                Method method = classz.getMethod(methodName);
                Object value = method.invoke(t, (Object[]) null);
                if (value != null) {
                    if (value instanceof String) {
                        cel.setCellValue((String) value);
                    } else if (value instanceof Long) {
                        cel.setCellValue((Long) value);
                    } else if (value instanceof Integer) {
                        cel.setCellValue((Integer) value);
                    } else if (value instanceof Double) {
                        cel.setCellValue((Double) value);
                    }
                }
                columnCount++;
            }
        }
    }

    public Map<String, String> getFieldLabelMap() {
        return fieldLabelMap;
    }

    public void setFieldLabelMap(Map<String, String> fieldLabelMap) {
        this.fieldLabelMap = fieldLabelMap;
    }

    public List<String> getOrderLabels() {
        return orderLabels;
    }

    public void setOrderLabels(List<String> orderLabels) {
        this.orderLabels = orderLabels;
    }

    public String capitalize(String string) {
        String capital = string.substring(0, 1).toUpperCase();
        return capital + string.substring(1);
    }

    public String decapitalize(String string) {
        String capital = string.substring(0, 1).toLowerCase();
        return capital + string.substring(1);
    }

    public String getWorkbookName() {
        return workbookName;
    }

    public void setWorkbookName(String workbookName) {
        this.workbookName = workbookName;
    }

    void setWorkbook(HSSFWorkbook workbook) {
        this.workbook = workbook;
    }

    Workbook getWorkbook() {
        return workbook;
    }

    public CellStyle getColumnHeaderCellStyle() {
        return columnHeaderCellStyle;
    }

    public void setColumnHeaderCellStyle(CellStyle columnHeaderCellStyle) {
        this.columnHeaderCellStyle = columnHeaderCellStyle;
    }

}

package com.excel.Sample.Model;

import java.util.Date;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

import com.excel.Sample.ExcelAnn.ExcelColumn;

@Entity
@Table(name = "directory")
public class Directory {
    @Id
    @GeneratedValue
    @Column(name = "id")
    private Integer id;
    @Column(name = "Test_Name")
    private String name;
    @Column(name = "Path", nullable = false)
    private String path;
    @Column(name = "Directory", nullable = false)
    private String directory;
    @Column(name = "ContainedFiles", nullable = false)
    private Integer containedFiles;

    @Column(name = "DateFormate", nullable = false)
    private Date dateFormate;

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    @ExcelColumn(label = "Test Name")
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @ExcelColumn(label = "Path")
    public String getPath() {
        return path;
    }

    public void setPath(String path) {
        this.path = path;
    }

    @ExcelColumn(label = "Directory")
    public String getDirectory() {
        return directory;
    }

    public void setDirectory(String directory) {
        this.directory = directory;
    }

    @ExcelColumn(label = "ContainedFiles")
    public Integer getContainedFiles() {
        return containedFiles;
    }

    public void setContainedFiles(Integer containedFiles) {
        this.containedFiles = containedFiles;
    }

    @ExcelColumn(label = "DateFormate")
    public Date getDateFormate() {
        return dateFormate;
    }

    public void setDateFormate(Date dateFormate) {
        this.dateFormate = dateFormate;
    }
}

package com.excel.Sample.Servlet;

import java.io.IOException;
import java.io.PrintWriter;
import java.text.SimpleDateFormat;
import java.util.List;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.fileupload.FileItem;
import org.apache.commons.fileupload.FileItemFactory;
import org.apache.commons.fileupload.FileUploadException;
import org.apache.commons.fileupload.disk.DiskFileItemFactory;
import org.apache.commons.fileupload.servlet.ServletFileUpload;
import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.Transaction;

import com.excel.Sample.Actions.ExcelAction;
import com.excel.Sample.Model.Directory;
import com.excel.util.HibernateUtil;

/**
 * Servlet implementation class ExcelSample
 */
public class ExcelSample extends HttpServlet {
    private static final long serialVersionUID = 1L;
    public static String modelName = "com.excel.Sample.Model.Directory";

    /**
     * @see HttpServlet#HttpServlet()
     */
    public ExcelSample() {
        super();

        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse
     *      response)
     */
    protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse
     *      response)
     */
    protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        PrintWriter out = response.getWriter();
        try {

            boolean isMultipart = ServletFileUpload.isMultipartContent(request);
            if (!isMultipart) {
            } else {
                FileItemFactory factory = new DiskFileItemFactory();
                ServletFileUpload upload = new ServletFileUpload(factory);
                List items = null;
                try {
                    items = upload.parseRequest(request);
                } catch (FileUploadException e) {
                    e.getMessage();
                }
                FileItem item = (FileItem) items.get(0);
                try {
                    ExcelAction ea = new ExcelAction();
                    List<Directory> e = ea.readData(modelName, item
                            .getInputStream());
                    out.println("<table>");
                    for (int i = 1; i < e.size(); i++) {
                        Directory ex = (Directory) e.get(i);
                        Session session = HibernateUtil.getSessionFactory()
                                .openSession();
                        Transaction transaction = null;

                        try {
                            transaction = session.beginTransaction();
                            session.save(ex);
                            transaction.commit();
                        } catch (HibernateException exp) {
                            transaction.rollback();
                            exp.printStackTrace();
                        } finally {
                            session.close();
                        }
                        String date = new SimpleDateFormat("dd/MM/yyyy")
                                .format(ex.getDateFormate());
                        out.println("<tr><td>" + ex.getContainedFiles()
                                + " </td><td> " + ex.getDirectory()
                                + " </td><td> " + ex.getPath() + " </td><td> "
                                + ex.getName() + "</td><td> " + date
                                + "</td></tr>");
                    }
                    out.println("</table>");
                } catch (Exception e) {
                    System.out.println(e);
                }
            }
        } catch (Exception e) {
            System.out.println(e);
        }

    }

} 
```

1.  Excel For Mate 如下

> 测试名称路径目录 ContainedFiles DateFormate .settings /home/david/dev/workspaces/Dec2009/ExcelAnnotationReport/.settings 目录 1 5/2/2013 src /home/david/dev/workspaces/Dec2009/ExcelAnnotationReport/src 目录 1 12/3 /2013 .classpath1 /home/david/dev/workspaces/Dec2009/ExcelAnnotationReport/.classpath1 file1 1 11/4/2013 测试 /home/david/dev/workspaces/Dec2009/ExcelAnnotationReport/test 目录 1 3/5/2013 测试。 xls /home/david/dev/workspaces/Dec2009/ExcelAnnotationReport/test.xls 文件 11 6/6/2013 .project /home/david/dev/workspaces/Dec2009/ExcelAnnotationReport/.project 文件 1 12/7/2013 bin / home/david/dev/workspaces/Dec2009/ExcelAnnotationReport/bin 目录 1 6/8/2013

# c# - 如何将 .net 4.5 Async/Await 示例转换回 4.0

> ID：10994714
> 
> 赞同：14
> 
> 时间：2012-06-12T10:23:52.557
> 
> 标签：c#, asp.net-mvc-4, async-await, task-parallel-library

等效的 asp.net mvc 4.0 代码是什么样的？

```
using System.Net;
using System.Net.Http;
using System.Web.Mvc;
using System.Threading.Tasks;
using Newtonsoft.Json;
namespace Web.Controllers
{
    public class HomeController : Controller
    {
        private HttpClient httpClient = new HttpClient();
        private static dynamic shots;

        public async Task<ActionResult> Index()
        {
            if (shots == null)
            {
                try
                {
                    var responseMessage = 
                       await httpClient.GetAsync
                            ("http://api.dribbble.com/shots/everyone?per_page=30");
                    responseMessage.EnsureSuccessStatusCode();

                    var value = await responseMessage.Content.ReadAsStringAsync();
                    shots = await JsonConvert.DeserializeObjectAsync<dynamic>(value);
                }
                catch (WebException)
                {
                }
            }
            return View(shots);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T10:30:53.983

**注意：**这仅适用于 Async/Await 部分。

最简单的方法是使用[Async CTP](http://blogs.msdn.com/b/visualstudio/archive/2011/04/13/async-ctp-refresh.aspx)。它具有 Go live 许可证，这意味着您可以在生产代码中使用它。在异步 CTP 不提供异步等效项的情况下，您必须进行一些修改。

您可以在 Azure 上使用 Async CTP，因为唯一需要的是一个额外的 DLL。这里有一个类似的 SO question [Async CTP and Windows Azure Support](https://stackoverflow.com/questions/7465719/async-ctp-and-windows-azure-support)

我已经在生产中使用 Async CTP 一年多了，没有出现任何问题。我肯定会推荐这个。升级到 .NET 4.5 相当容易，本质上只需要更改一些类名（TaskEx 到 Task）和一些签名更改。

如果您可以使用 Visual Studio 2012 RC，您还可以使用[Async Targeting 包](http://www.microsoft.com/en-us/download/details.aspx?id=29576)，它允许您在 .NET 4 中使用您的异步代码，并且比使用 Async CTP 的更改更少。

最后，蛮力解决方案是使用 ParallelExtensionsExtras 示例中的[TaskIterator](http://blogs.msdn.com/b/pfxteam/archive/2010/11/21/10094564.aspx)来模拟 async/await 的作用。您必须将所有异步调用转换为任务或返回任务的方法，然后遍历这些任务的列表。它的代码要多得多，但如果您不想使用 CTP 代码，即使它有 Go Live 许可证，它也是唯一的解决方案。

ParallelExtensionsExtras 包括WebClient 的[异步任务，](http://blogs.msdn.com/b/pfxteam/archive/2010/05/04/10007557.aspx)如果您决定从 HttpClient 切换到 WebClient，这可能很有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T08:14:27.850

作为探索如何在 .NET 4.0 中使所有这些工作的人，我还没有在这个线程上找到给定的答案，其他人还没有足够完整，可以立即启动并运行。因此，以下是简单操作的更全面的答案：

**======= 步骤 #1) 安装 Microsoft ASP.NET Web API 客户端库 (RC) 4.0.20505.0 =======**

[http://nuget.org/packages/Microsoft.AspNet.WebApi.Client](http://nuget.org/packages/Microsoft.AspNet.WebApi.Client)

```
PM> Install-Package Microsoft.AspNet.WebApi.Client 
```

安装：System.Net.Http.dll、System.Net.Http.Formatting.dll、System.Net.Http.WebRequest.dll、Newtonsoft.Json.dll

**======= 第 2 步）Microsoft .NET Framework 4 HTTP 客户端库 2.0.20505.0 =======**

[http://nuget.org/packages/Microsoft.Net.Http](http://nuget.org/packages/Microsoft.Net.Http)。

```
PM> Install-Package Microsoft.Net.Http. 
```

如果您已经按照第 1 步进行操作，NuGet 实际上应该已经获取了这个依赖项：System.Net.Http.dll。系统.Net.Http。是提供 HttpClient、HttpRequestMessage 和 HttpResponseMessage 的。

此时，在使用 async/await 时会出现错误（尽管这些关键字仍然显示为关键字），例如：

> 找不到“异步”修饰符所需的所有类型。您的目标是错误的框架版本，还是缺少对程序集的引用？

因此：

**======= 第 3 步）Visual Studio 的异步目标包 =======**

[http://www.microsoft.com/en-us/download/details.aspx?id=29576](http://www.microsoft.com/en-us/download/details.aspx?id=29576)

```
PM> Install-Package Microsoft.CompilerServices.AsyncTargetingPack 
```

（'...Visual Studio 11' 名称需要在 NuGet 上更新，都是 1.0.0 版）

安装 1 个 dll：Microsoft.CompilerServices.AsyncTargetingPack.Net4.dll

““Visual Studio 2012 的异步目标包”使面向 .NET Framework 4.0 或 Silverlight 5 的项目能够使用 C# 5 中的异步语言功能......” [http://www.microsoft.com/en-us/download/ details.aspx?id=29576](http://www.microsoft.com/en-us/download/details.aspx?id=29576)

除其他外，添加了 TaskEx（一个 .NET 4.0 版本，它填充了许多新的任务功能。TaskEx 仅适用于 4.0 版本......所以 .NET 4.5：“Task.Run”在 4.0 中：“TaskEx.Run”，这个库还有很多其他的东西）

突然间，等待和异步，整个作品开始像魅力一样工作！如果你反思一下，最重要的事情之一就是类（声明时没有命名空间）：AsyncCompatLibExtensions。一个包含扩展方法的静态类，特别是：1）流。例如 ReadAsync。所以现在 stream.ReadAsync 突然出现了！（如果你想知道，它实际上干净地包装了流的 BeginRead/BeginWrite），2）WebClient。例如 webClient.DownloadStringTaskAsync 等等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T12:10:42.220

**警告**没有错误检查！

好吧，我觉得我今天学到了一些东西，请阅读这篇文章[http://blogs.msdn.com/b/pfxteam/archive/2010/11/21/10094564.aspx](http://blogs.msdn.com/b/pfxteam/archive/2010/11/21/10094564.aspx)以了解更好的处理方法:)

```
using System.Net.Http;
using System.Threading.Tasks;
using System.Web.Mvc;
using Newtonsoft.Json;
namespace DribbbleR.Web.Controllers
{
    public class HomeController : Controller
    {
        private static dynamic shots;
        private HttpClient client = new HttpClient();
        private string url = "http://api.dribbble.com/shots/everyone?per_page=30";

        public Task<dynamic> Index()
        {    if (shots == null)
             shots = Task.Factory.StartNew
                   (() => return DownloadContent();).Unwrap();    
             return shots;
        }
        public Task<dynamic> DownloadContent()
        {    var responseTask = client.GetAsync(url);
             var readTask = responseTask.ContinueWith
                 (t =>
                     {   t.Result.EnsureSuccessStatusCode();
                         return t.Result.Content.ReadAsStringAsync();
                      }
                  ).Unwrap();
            var deserializeTask = readTask.ContinueWith
                  (t => return JsonConvert.DeserializeObjectAsync<dynamic>(t.Result);)
            .Unwrap();
            var viewTask = deserializeTask.ContinueWith
                  (t =>  return this.View(t.Result););
            return viewTask;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T12:07:02.130

您可以使用 Visual Studio 2012 的异步目标包[http://www.microsoft.com/en-us/download/details.aspx?id=29576](http://www.microsoft.com/en-us/download/details.aspx?id=29576)

# .net - Animation width to actual width in WPF?

> ID：10994716
> 
> 赞同：7
> 
> 时间：2012-06-12T10:24:10.187
> 
> 标签：.net, wpf, xaml, animation

How can I animate the width of an element from 0 to its actual width in WPF?

I tried this:

```
<ControlTemplate.Triggers>
    <EventTrigger RoutedEvent="Loaded">
        <BeginStoryboard>
            <Storyboard>
                <DoubleAnimation Duration="0:0:0.3" To="{Binding ElementName=MyElement, Path=ActualWidth}" From="0" Storyboard.TargetProperty="Width" Storyboard.TargetName="MyElement" />
            </Storyboard>
        </BeginStoryboard>
    </EventTrigger>
</ControlTemplate.Triggers> 
```

If I change the binding to a hard coded value, like `100`, then the width is properly animated, except that I want to bind to the actual width of the element.

If it matters, `MyElement` is a border, and I'm animating a tab item.

For the record, this does not work either:

```
To="{Binding RelativeSource={RelativeSource AncestorType={x:Type Border}}, Path=ActualWidth}" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T11:03:50.067

I'm sure this is wrong for SO many reasons and please feel free to tell me how many WPF laws I've violated but.. I solved the same problem by creating my own BindableDoubleAnimation.

```
public class BindableDoubleAnimation : DoubleAnimationBase
{
    DoubleAnimation internalAnimation;

    public DoubleAnimation InternalAnimation { get { return internalAnimation; } }

    public double To
    {
        get { return (double)GetValue(ToProperty); }
        set { SetValue(ToProperty, value); }
    }

    /// <summary>
    /// Dependency backing property for the <see cref="To"/> property.
    /// </summary>
    public static readonly DependencyProperty ToProperty =
        DependencyProperty.Register("To", typeof(double), typeof(BindableDoubleAnimation), new UIPropertyMetadata(0d, new PropertyChangedCallback((s, e) =>
            {
                BindableDoubleAnimation sender = (BindableDoubleAnimation)s;
                sender.internalAnimation.To = (double)e.NewValue;
            })));

    public double From
    {
        get { return (double)GetValue(FromProperty); }
        set { SetValue(FromProperty, value); }
    }

    /// <summary>
    /// Dependency backing property for the <see cref="From"/> property.
    /// </summary>
    public static readonly DependencyProperty FromProperty =
        DependencyProperty.Register("From", typeof(double), typeof(BindableDoubleAnimation), new UIPropertyMetadata(0d, new PropertyChangedCallback((s, e) =>
        {
            BindableDoubleAnimation sender = (BindableDoubleAnimation)s;
            sender.internalAnimation.From = (double)e.NewValue;
        })));

    public BindableDoubleAnimation()
    {
        internalAnimation = new DoubleAnimation();
    }

    protected override double GetCurrentValueCore(double defaultOriginValue, double defaultDestinationValue, AnimationClock animationClock)
    {
        return internalAnimation.GetCurrentValue(defaultOriginValue, defaultDestinationValue, animationClock);
    }

    protected override Freezable CreateInstanceCore()
    {
        return internalAnimation.Clone();;
    }
} 
```

I'm now free to use bindings for the To From properties.

```
<local:BindableDoubleAnimation Storyboard.TargetProperty="Width" From="0" To="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=Window}}"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T10:42:58.440

That bindings cannot be used in animations is a common problem.

One workaround would be that you use a helper object which has `SourceValue` & `TargetValue` (which you can bind to whatever you want, including `ActualWidth`) a `CurrentValue` (which returns the animated value) and a `Progress` which can be animated from 0.0 to 100.0\. When the progress is changed you just need to calculate the `CurrentValue` to which you then can bind the `Width` of your object. It is not pretty but should work.

# iphone - Sql 查询给出 NULL 作为结果（期望文本）

> ID：10994717
> 
> 赞同：0
> 
> 时间：2012-06-12T10:24:10.377
> 
> 标签：iphone, ios, database, sqlite

```
-(NSMutableArray*) fetchMakeNamesYear1:(int) year1 Year2:(int) year2 compileStaement:    (sqlite3_stmt*)compiledStatement
{
    NSMutableArray *makeNames=[NSMutableArray array];
    NSString *selectQuery=[NSString stringWithFormat:@"SELECT DISTINCT Make FROM Inventory  WHERE   [Year] BETWEEN 2009 AND 2012 AND Make IS NOT NULL ORDER BY Make",year1 ,year2 ];
//   if (sqlite3_exec(((StorageManager*)[StorageManager sharedStorageManager]).database,  [selectQuery cStringUsingEncoding:NSUTF8StringEncoding], NULL, NULL, NULL) == SQLITE_OK) 
//   {
//       
//   }
    if(sqlite3_prepare_v2(((StorageManager*)[StorageManager sharedStorageManager]).database,  [selectQuery UTF8String] , -1, &compiledStatement, NULL) != SQLITE_OK) 
    {
        return nil;

    }
    while (sqlite3_step(compiledStatement) == SQLITE_ROW)
   {

        NSLog(@"return TYpe: %d",sqlite3_column_type(compiledStatement, 5));

        if (sqlite3_column_text(compiledStatement, 5)!= NULL)
        { 
            **NSString *makeName = [NSString  stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 6)];**
            [makeNames addObject:makeName];

        } 
       sqlite3_reset(compiledStatement);   
}
[self finalize:compiledStatement];

return  makeNames  ; 
```

}

sqlite3_column_text(compiledStatement, 5) 返回的值为 NULL。

在我的数据库中，第 5 列的数据类型是 nvarchar[50]。

它的列名是“Make”

我的表名是“库存”

在上面的示例中，我为 to 和 from 年份硬编码了值。

我在 sqlite manager 中尝试了相同的 sql 查询，我发现所有品牌名称的数据都显示。我还发现 sqlite3_column_type(compileStatement,5) retuns 5 (SQLITE_NULL 5) 但根据我的列类型它应该是 3 (SQLITE_TEXT 3)

有人可以对上述行为有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:27:59.740

您在 sqlite3_column_text() 中使用了错误的列索引 - 您的查询中不存在第 5 列，请尝试使用 0（请参阅[SQLite 文档](http://www.sqlite.org/c3ref/column_blob.html)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:47:20.993

```
-(NSMutableArray*) fetchMakeNamesYear1:(int) year1 Year2:(int) year2 compileStaement:    (sqlite3_stmt*)compiledStatement
{
NSMutableArray *makeNames=[NSMutableArray array];
NSString *selectQuery=[NSString stringWithFormat:@"SELECT DISTINCT Make FROM Inventory  WHERE   [Year] BETWEEN 2009 AND 2012 AND Make IS NOT NULL ORDER BY Make",year1 ,year2 ];
//   if (sqlite3_exec(((StorageManager*)[StorageManager sharedStorageManager]).database,  [selectQuery cStringUsingEncoding:NSUTF8StringEncoding], NULL, NULL, NULL) == SQLITE_OK) 
//   {
//       
//   }
if(sqlite3_prepare_v2(((StorageManager*)[StorageManager sharedStorageManager]).database,  [selectQuery UTF8String] , -1, &compiledStatement, NULL) != SQLITE_OK) 
{
    return nil;

}
while (sqlite3_step(compiledStatement) == SQLITE_ROW)
{

    NSLog(@"return TYpe: %d",sqlite3_column_type(compiledStatement, 0));

    if (sqlite3_column_text(compiledStatement, 0)!= NULL)
    { 
        **NSString *makeName = [NSString  stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 1)];**
        [makeNames addObject:makeName];

    } 
   sqlite3_reset(compiledStatement);   
}
[self finalize:compiledStatement];

return  makeNames  ;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:57:58.047

在您的选择语句中，您只选择一列是 Make，因此列索引`sqlite3_column_text(compiledStatement, 0)`应该是 0 而不是 5。它不是数据库中列（Make）的索引，而是您在 select 语句中给出的列的索引。

# c# - C# Security: How do I secure a user password?

> ID：10994731
> 
> 赞同：0
> 
> 时间：2012-06-12T10:25:23.093
> 
> 标签：c#, security, password-encryption

> **Possible Duplicate:**
> [Best way to store password in database](https://stackoverflow.com/questions/1054022/best-way-to-store-password-in-database)

does anyone know a way to secure a password that the user is creating on the site which is then saved in a database table?

The passwords are currently stored as Plain text, I know..I Know!

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:32:15.917

标准答案是这样的：不要以明文形式存储密码。存储密码的散列版本。当您散列密码时 - 选择适当的散列算法并使用唯一的盐值。 [http://www.troyhunt.com/2011/06/owasp-top-10-for-net-developers-part-7.html](http://www.troyhunt.com/2011/06/owasp-top-10-for-net-developers-part-7.html)

另请阅读此内容。 [http://krebsonsecurity.com/2012/06/how-companies-can-beef-up-password-security/](http://krebsonsecurity.com/2012/06/how-companies-can-beef-up-password-security/)

一些散列算法太快（或者使用现代计算能力太容易破解）。使用密码散列算法（如 scrypt）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:32:28.227

使用每个记录的盐对密码进行加盐（即所有用户根据某些用户信息使用不同的盐）。而不是获取这个加盐密码并使用一些散列算法（例如 SHA 散列）对其进行散列。

参见例如[C# 中的哈希和盐密码](https://stackoverflow.com/questions/2138429/hash-and-salt-passwords-in-c-sharp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:27:57.650

您可以通过[散列来保护密码](http://brianreiter.org/2011/05/19/secure-password-hashing-in-c/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T10:30:43.750

您可以使用[md5](http://msdn.microsoft.com/en-us/library/system.security.cryptography.md5.aspx)加密对其进行哈希处理。

# javascript - asp.net ajaxtoolkit 自定义控件扩展器

> ID：10994735
> 
> 赞同：1
> 
> 时间：2012-06-12T10:25:33.500
> 
> 标签：javascript, asp.net, ajaxcontroltoolkit

好吧，我正在尝试编写我自己的自定义控件扩展器，但我无法让 javascript 工作

这里有一个空类：

```
Imports System.ComponentModel
Imports AjaxControlToolkit
Imports System.Web.UI
Imports System.Web.UI.WebControls

<Assembly: System.Web.UI.WebResource("GuiExtensions.PrintButtonBehavior.js", "text/javascript")> 

<Designer(GetType(PrintButtonExtenderDesigner))>
<ClientScriptResource("Sys.Extended.UI.PrintButtonExtender", "GuiExtensions.PrintButtonBehavior.js")>
<TargetControlType(GetType(IButtonControl))> _
Public Class PrintButtonExtender
    Inherits ExtenderControlBase

End Class 
```

在这里你有javascript：

```
Type.registerNamespace('Sys.Extended.UI');
Sys.Extended.UI.PrintButtonExtender = function (element) {
    Sys.Extended.UI.PrintButtonExtender.initializeBase(this, [element]);
}

Sys.Extended.UI.PrintButtonExtender.prototype = {
    initialize: function () {
        Sys.Extended.UI.PrintButtonExtender.callBaseMethod(this, 'initialize');
        var element = this.get_element();
        this._clickHandler = Function.createDelegate(this, this._onClick);
        $addHandler(element, "click", this._clickHandler);
    },

    dispose: function () {

        $removeHandler(this.get_element(), "click", this._clickHandler);
        this._clickHandler = null;

        Sys.Extended.UI.PrintButtonExtender.callBaseMethod(this, 'dispose');
    },

    _onClick: function () {
        alert("Test");
        return false;
    }
}

Sys.Extended.UI.PrintButtonExtender.registerClass('Sys.Extended.UI.PrintButtonExtender', Sys.Extended.UI.BehaviorBase); 
```

这里的问题是，当有人单击我将扩展器分配给的按钮时，永远不会调用 _onClick。我已经验证了“this.get_element();” 返回正确的元素，但我没有运气让 _onClick 函数运行。

到目前为止，我已经通过查看 codeplex 的源代码来解决这个问题，但没有成功！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:57:16.800

更改类型 this._onClick

this._clickHandler = Function.createDelegate(this, this._onClick);

到

this._clickHandler = Function.createDelegate(this, this._clickCallback);

希望这会得到结果:)

# salesforce - 在 2 行中显示列标题

> ID：10994740
> 
> 赞同：4
> 
> 时间：2012-06-12T10:25:38.993
> 
> 标签：salesforce, apex-code, visualforce

我想在 2 行中显示 apex:column 标题。我有标题为“分布式总计”的列，我想在 2 行中显示

```
<apex:column headerValue="Distributed Total$">
  <apex:outputText value="${0, number, ###,##0.00}">
  <apex:param value="{!item.Dtotal}"/>
</apex:outputText>
</apex:column> 
```

知道我们如何实现这一目标

谢谢

普拉迪普

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T04:24:55.447

如果我理解这个问题，你想要一个超过 2 行的列标题？

```
<apex:column>
    <apex:facet name="header">
        Distributed<br/>Total$
    </apex:facet>
    <apex:outputText value="${0, number, ###,##0.00}">
        <apex:param value="{!item.Dtotal}"/>
    </apex:outputText>
</apex:column> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:16:26.317

我会尝试玩`<br/>`标签。

# javascript - ComboBox that shows a tree in the dropdown

> ID：10994742
> 
> 赞同：0
> 
> 时间：2012-06-12T10:25:47.153
> 
> 标签：javascript, combobox, treeview, dojo

I want to write a ComboBox which lets the user type in a query and at the same time lets him select a value from a tree. I have tried writing a tree-select but if I change the code to inherit from `dijit.form.ComboBox` instead of a `dijit.form.Select`, the code breaks.

Here is what I had tree for tree select:

```
dojo.declare('TreeSelect',dijit.form.Select,{
    constructor: function(widgetArgs){
        this.tree = widgetArgs.tree || new FC_Tree();
        this.initTree = widgetArgs.initTree;
        if(dojo.isFunction(this.initTree))
            this.initTree();
    },
    postCreate: function(){
        this.inherited(arguments);
        this.option = {label: '', value: 'NoValue'};
        this.tree.option = this.option;
        this.addOption(this.option);

        dojo.connect(this.tree,'onClick',this,'closeDropDown');

        dojo.connect(this.tree,'itemSelected',this,'selectOption');
    },
    selectOption: function(opt){
        this.option.label = opt.label || opt;
        this.option.value = opt.value || opt;
        this.option.id = opt.id || opt;
        this.set('value',this.option);                      
    },
    _getMenuItemForOption: function (option){
        return this.tree;
    },
    openDropDown: function(){
        this.tree.refresh();
        this.inherited(arguments);
    },
    clear: function(){
        this.tree.clear();
        this.tree.option.value = '';
        this.tree.option.label = '';
        this.tree.option.id = '';
        this.set('value',this.tree.option);
    },

    initializeTree: function(treeData) {
        // Init the tree only if needed
        dojo.forEach(treeData, function(field) {
            var store = this.tree.model.store;
            store.newItem(field);
        }, this);

    },
    setOpenCallback: function(callback){
        this.tree.setOpenCallback(callback);
    },
    resetTree: function() {
        var store = this.tree.model.store;
        store.fetch( { query: { id: "*" },  
            onItem: function(item) {
                store.deleteItem(item);
            }
        });
    }
}); 
```

I had tried replacing the code for combobox like this:

```
dojo.declare('TreeSelect',dijit.form.ComboBox,{ 
```

Please help me rectify it. Thanks in advance!

Adding the code for FC_Tree:

```
dojo.declare('FC_Tree',dijit.Tree,{
    showRoot: false,
    openOnClick: true,
    noIconForNode: true,
    noMarginForNode: true,
    persist: false,
    openCallback: null,
    constructor: function(){
        if(dojo.isUndefined(arguments[0]) || dojo.isUndefined(arguments[0].model))
        {
            var forest_store = new FC_DataStore({id: 'id', label: 'label'});
            this._storeloaded = false;
            dojo.connect(forest_store,'loaded',this,function(){this._storeloaded = true;})
            this.model = new dijit.tree.ForestStoreModel({store:forest_store});
        }
    },

    setOpenCallback: function(callback){
        this.openCallback = callback;
    },

    option: {},
    itemSelected: function(item){
    },

    onClick: function(item, node, evt){
        var store = this.model.store;
        get = function(){
            return store.getValue(item, "isDir");
        };
        // on folder click mark it unselectable
        if(get("isDir")) 
        {
            this.isExpanded = true;
            this.isExpandable = true;

        }
        else
        {   //In case the item has 'onClick' delegate execute it and assign the output to 'selItem'
            var selItem = (item.onClick && item.onClick[0])? item.onClick[0](this.model.store,item.parentID[0]):item.id[0]; 

            this.option.id = item.id;
            this.option.value = item.value;
            this.option.label = item.label;
            this.itemSelected(this.option);

        }
    },

    onOpen: function(item, node){
        if(this.rootNode.item == item){
            return this.inherited(arguments);
        }

        var data = (this.openCallback != null) ? this.openCallback(item, node) : {};
        if(!data.length){
            return this.inherited(arguments);
        }
        FC_Comm.when(data,{
            onCmdSuccess: dojo.hitch(this,function(data){
                var store = this.model.store;
                var children = store.getValues(item, 'children');
                dojo.forEach(children, function(child) {
                    // don't delete child if doNotDelete flag is true
                    if(!store.getValue(child, "doNotDelete"))
                        store.deleteItem(child);
                });
                if (data) {
                    var store = this.model.store;
                    if (store) {
                        dojo.forEach(data, function(child) {
                            store.newItem(child, {parent : item, attribute: 'children'});
                        });
                    }
                }
            })
        });
    },

    refresh: function(){

        if(this._storeloaded){
            // Close the store (So that the store will do a new fetch()).
            this.model.store.clearOnClose = true;
            this.model.store.close();

            // Completely delete every node from the dijit.Tree     
            this._itemNodesMap = {};
            this.rootNode.state = "UNCHECKED";
            this.model.root.children = null;

            // Destroy the widget
            this.rootNode.destroyRecursive();

            // Recreate the model, (with the model again)
            this.model.constructor(this.model)

            // Rebuild the tree
            this.postMixInProperties();
            this._load();
            this._storeloaded = false;
        }
    },
    clear: function(){
        this.model.store.load([]);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:04:53.133

Possibly you will find inspiration / answer in [this fiddle](http://jsfiddle.net/seeds/QhWxz/)

The recursiveHunt and selectTreeNodeById [functions](http://dojotoolkit.org/reference-guide/1.7/dijit/Tree-examples.html) are logic to seek out the path of an item by its id. Its quite excessive and you may find a better solution (dont know 100% what data your json is like)..

Basically, use FilteringSelect and reference the tree in this object. Also for Tree, reference the select. Then for your tree, hook into load function (also called on refresh afaik) and in turn for the select, use onBlur to initate selecting treenode.

```
var combo = new dijit.form.FilteringSelect({
    onBlur: function() {
        // called when filter-select is 'left'
        if (this.validate()) {
            // only act if the value holds an actual item reference
            var id = this.get("value");
            var name = this.get("displayedValue");
            this.tree.selectNode(id);
        }
    }
});
var tree = new dijit.Tree( {  ....
    onLoad: function() {
        combostore.setData(this.model.store._arrayOfAllItems);
    },
    onClick: function(item) {
        // uses 'this.combo', must be present
        // also, we must have the same 'base store' for both combo and model
        var _name = this.model.store.getValue(item, this.combo.searchAttr);
        this.combo.set("item", item,  false, _name);
    },
    selectNode: function(lookfor) {
        selectTreeNodeById(this, lookfor);
    },
    combo: combo // <<<<<<
});
combo.tree = tree // <<<<<< 
```

Make sure that the model has a rootId, and also that your select.searchAttr matches tree.model.labelAttr. See working sample on the fiddle

# ruby-on-rails - 使用 Cucumber 和 Devise 登录失败，没有消息

> ID：10994743
> 
> 赞同：1
> 
> 时间：2012-06-12T10:25:53.400
> 
> 标签：ruby-on-rails, devise, cucumber, bdd

此功能工作了一点，然后停止工作。

```
Background:
  Given a user is logged in
  Then I should see "Signed in successfully." 
```

和

```
Given /^a user is logged in$/ do
  @user = FactoryGirl.create(:user)
  @user.confirm!
  visit new_user_session_path
  fill_in 'Email', :with => @user.email
  fill_in 'Password', :with => @user.password
  click_on 'Sign in'
end

Then /^I should see "(.*?)"$/ do |message|
   page.should have_content(message)
end 
```

`Given a user is logged`通过但因`Then I should see "Signed in successfully."`错误而失败`expected there to be content "Signed in successfully."`。**它停留在登录页面中**。

任何人都知道可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:16:59.520

**解决了！**

我变了

```
click_on 'Sign in' 
```

到

```
click_button 'Sign in' 
```

奇怪的是，Capybara 没有抱怨找不到`Sign in`可点击的。

感谢大家的评论和回答！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:11:21.143

尝试将[launchy](https://github.com/copiousfreetime/launchy)添加到您的测试 gemspec 组并`save_and_open_page`在单击“登录”后调用 - 这应该可以帮助您查看您的登录过程是否有任何问题。

# hadoop - Hadoop中的粘性位

> ID：10994745
> 
> 赞同：2
> 
> 时间：2012-06-12T10:25:55.557
> 
> 标签：hadoop, file-permissions, hdfs, sticky

我正在使用 Apache Hadoop (hadoop-0.20.203.0) 并且无法在 hdfs 中为 /tmp 目录设置粘性位。我的意图是将其权限设置为 1777。

```
$hadoop dfs -chmod 1777 /tmp
chmod: chmod : mode '1777' does not match the expected pattern. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:17:52.717

试试这个：

```
sudo -u hdfs hadoop fs -chmod 1777 /tmp 
```

使用 hadoop(0.20.2-cdh3u2) 为我工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:35:18.940

Sticky bit 直到 0.21 才出现在 Apache 中，这不是一个稳定的版本，所以更现实的是，在 2.0 分支中。它在 2009 年 1 月致力于主干线的事实说明了该项目的漫长道路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:15:45.477

尝试将模式指定为字母而不是八进制：

```
hadoop dfs -chmod +t /tmp 
```

编辑：为了记录，1777（你的例子）对我来说很好（0.20.2-cdh3u2）。

# ubuntu - 如何使用 dpkg --build 使用 dsc 制作 debian 软件包？

> ID：10994746
> 
> 赞同：3
> 
> 时间：2012-06-12T10:25:58.213
> 
> 标签：ubuntu, debian, packaging, deb

我正在使用`dpkg --build <package name>`以构建软件包。这些软件包与`dpkg -I <package name>`. 为了使它们与`apt-get`我需要`package_name.dsc`的文件一起工作，这是无法通过`dpkg --build`命令获得的。

我不知道如何使用`debuild`or构建软件包`dpkg-buildpackage`。任何人都可以告诉是否有任何简单的方法可以做到这一点，因为它`*.dsc`的文件是简单的文本文件，我可以通过其他工具生成它。

[http://ubuntuforums.org/showthread.php?t=1624438](http://ubuntuforums.org/showthread.php?t=1624438)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T02:56:30.483

如果您正在寻找生成 .dsc 包，您应该使用该`debuild -S`命令。

假设您正在 Ubuntu 上构建包，您应该查阅[有关打包的 Ubuntu 指南](http://packaging.ubuntu.com/html)。

它将帮助您入门并指出如何使用其他参数`debuild`来构建 .dsc 包等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:31:26.533

您可能应该使用 Debhelper。有很多关于如何学习 debhelper 打包的教程；你可以在这里找到一个很好的最近的一个以及一些补充材料：[http ://www.lucas-nussbaum.net/blog/?p=676](http://www.lucas-nussbaum.net/blog/?p=676)

正如您所做的那样，可以从一个简单的目录组装裸二进制 deb，但它们的用处非常有限，因为它们难以复制、移植、维护、自动构建，并且通常违反各种 Debian/Ubuntu 政策。

# html - 网站反馈表上评论字段的合理字符限制？

> ID：10994748
> 
> 赞同：3
> 
> 时间：2012-06-12T10:26:07.213
> 
> 标签：html, forms, user-interface, comments, user-feedback

我在网站的每个页面上都有一个简单的反馈表（见截图）。用户必须选择页面是否有用（单选按钮是/否），并且还有一个文本区域输入，用户可以在其中添加有关如何改进页面的额外信息。

**您是否会建议我在此字段上设置字符限制**（我已经在与我类似的其他网站上看到过），如果是这样，**设置的合理字符限制是多少？**

![在此处输入图像描述](../Images/4bd28cb6e57f45cc49bb134f567097d1.png)

**注意**我找不到关于反馈/评论字段字符限制的类似问题，所以如果已经发布了类似的问题，请编辑（我很惊讶我找不到）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:46:10.997

根据 w3.org - [http://www.w3.org/MarkUp/html3/textarea.html](http://www.w3.org/MarkUp/html3/textarea.html)：-

注意：在表单的初始设计中，多行文本字段由 TYPE=TEXT 的 INPUT 元素支持。不幸的是，这会导致具有长文本值的字段出现问题，因为 SGML 限制了属性文字的长度。HTML 2.0 DTD 最多允许 1024 个字符（SGML 默认只有 240 个字符）。

那么也许将其限制为 1024 个字符？

**编辑：**

实际上，这是一个非常有趣的问题（！），因为我相信这可能是出于内存原因在这一点上引入的（如果字符是 1 字节（？），相信这是 1Kb，但我似乎无法找到这个限制是否有曾经增加过！这应该是合理的 - 所以会进一步看看。

# python - OS X 上的 pyHook 之类的东西

> ID：10994750
> 
> 赞同：4
> 
> 时间：2012-06-12T10:26:20.647
> 
> 标签：python, macos, keylogger, pyhook

我实际上正在使用**pyHook**，但我也想为 OS X 编写我的程序。如果有人知道这样的模块......我已经在互联网上寻找了一段时间，但没有什么真正相关的。

-> 这个想法是能够在 python 应用程序之外记录击键。我的应用程序是一个*社区统计*生成器，所以如果能从 OS X 中获取统计数据也很棒。

提前致谢 ;）

**编辑**：PyHook：在 python 应用程序之外记录击键和其他内容 [http://sourceforge.net/apps/mediawiki/pyhook/index.php?title=PyHook_Tutorial](http://sourceforge.net/apps/mediawiki/pyhook/index.php?title=PyHook_Tutorial) http://pyhook.sourceforge.net/doc_1.5.0/ [http： //sourceforge.net/apps/mediawiki/pyhook/index.php?title=Main_Page](http://sourceforge.net/apps/mediawiki/pyhook/index.php?title=Main_Page)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T20:42:09.233

据我所知，没有用于此的 Python 库，因此您将调用本机 API。好消息是 PyObjC（在最近的 OS 版本中带有内置的 Python）通常使这变得容易。

有两个主要选择。要使其中任何一个工作，您的应用程序必须具有 Cocoa/CoreFoundation 运行循环（就像在 Windows 中一样，很多事情都要求您成为“Windows GUI 可执行文件”而不是“命令行可执行文件”），我赢了'这里不解释如何做。（如果您不知道如何使用 Python 构建 GUI 应用程序，请找到一个很好的教程，因为这是最简单的方法。）

最简单的选择是 Cocoa 全局事件监视器 API。但是，它有一些主要的限制。您只会获得前往另一个应用程序的事件——这意味着媒体键、全局热键和无论出于何种原因被忽略的键都不会显示。此外，您需要“信任可访问性”。（最简单的方法是要求用户在系统偏好设置的通用访问面板中全局打开它。）

最难的选择是 Quartz 事件点击 API。它更加灵活，并且只需要完全适当的权限（取决于您使用的设置，可能包括可访问性和/或以 root 身份运行），并且功能更强大，但需要很多更多的工作要开始，如果你弄错了，可能会搞砸你的系统（例如，通过吃掉所有的击键和鼠标事件，这样它们就永远不会进入操作系统，而且你不能重启，除非使用电源按钮）。

有关所有相关函数的参考，请参阅[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsevent_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsevent_Class/Reference/Reference.html)（对于 NSEvent）和[https:// /developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html)（用于 Quartz 事件）。谷歌搜索应该会在 Objective C（用于 NSEvent）或 C（用于 CGEventTap）中找到大量示例代码，但在 Python 中很少或根本没有，所以我将展示一些小片段来说明如何移植Python 示例：

```
import Cocoa
def evthandler(event):
  pass # this is where you do stuff; see NSEvent documentation for event
observer = Cocoa.NSEvent.addGlobalMonitorForEventsMatchingMask_handler_(NSKeyDown, evthandler)
# when you're done
Cocoa.NSEvent.removeMonitor_(observer)

import Quartz
def evthandler(proxy, type, event, refcon):
    pass # Here's where you do your stuff; see CGEventTapCallback
    return event
source = Quartz.CGEventSourceCreate(Quartz.kCGEventSourceStateHIDSystemState)
tap = Quartz.CGEventTapCreate(Quartz.kCGSessionEventTap,
                              Quartz.kCGHeadInsertEventTap,
                              Quartz.kCGEventTapOptionListenOnly,
                              (Quartz.CGEventMaskBit(Quartz.kCGEventKeyDown) |
                               Quartz.CGEventMaskBit(Quartz.kCGEventKeyUp)),
                              handler,
                              refcon) 
```

另一个选项，与 Quartz 事件的级别大致相同，是 Carbon 事件（从 InstallEventHandler 开始）。然而，Carbon 已经过时了，最重要的是，它更难从 Python 中获得，所以除非你有特定的理由这样做，否则不要这样做。

还有一些其他方法可以达到同样的目的——例如，使用 DYLD_INSERT_LIBRARIES 或 SIMBL 将一些代码插入到每个应用程序中——但我想不出任何其他可以在纯 Python 中完成的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T13:42:57.087

一个可能的快速替代方案也许是这个

[https://github.com/gurgeh/selfspy](https://github.com/gurgeh/selfspy) 它声称可以在 mac 和 windows 上工作。它基于 windows 部分的 pyhook。

祝你好运。

# php - function mail()

> ID：10994753
> 
> 赞同：-4
> 
> 时间：2012-06-12T10:26:23.923
> 
> 标签：php

Look this code:

```
$to="$email";
$sub="Hi";
$mex="hi <br />  \"<a href='http://exemple.com/ver.php?id=$cod'</a>"\";
$int  = "From:h@h.com";
$int .= "Reply-To:try@try.com";
$int .= "X-Mailer: PHP/".phpversion();
mail($to, $sub, $mex, $int); 
```

The error is on $mex, I think it's on `"<a href.."`

How to fix this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:28:06.027

```
$mex="hi <br />  \"<a href='http://exemple.com/ver.php?id=$cod'></a>\""; 
```

您放错了最后一个反斜杠 ( `\`)，它应该用于转义`"`;

**注意**：使用[Swiftmailer](http://swiftmailer.org/)之类的库而不是`mail()`让你的生活更轻松。*例如*添加**标题**（您应该在每个标题后添加 CRLF，如[手册页](http://php.net/manual/en/function.mail.php)所述）。老实说，我认为初学者根本不应该使用该`mail()`功能。去过也做过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T10:28:06.823

试试看

```
$mex="hi <br />  \"<a href='http://exemple.com/ver.php?id=$cod'</a>\""; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:28:46.557

```
$mex="hi <br />  \"<a href='http://exemple.com/ver.php?id=$cod'</a>"\"; 
```

应该

```
$mex= "hi <br/><a href='http://exemple.com/ver.php?id=$cod'>something here</a>"; 
```

无需将`<a href ... ></a>`引号括起来，您可能希望在中间放一些东西`>`并`</a>`允许用户单击

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T10:29:21.783

```
$to="$email";
$sub="Hi";
$mex="hi <br /> <a href='http://exemple.com/ver.php?id=$cod'>something</a>";
$int  = "From:h@h.com";
$int .= "Reply-To:try@try.com";
$int .= "X-Mailer: PHP/".phpversion();
mail($to, $sub, $mex, $int); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T10:30:25.873

```
$mex="hi <br />  <a href=\"http://exemple.com/ver.php?id=$cod\">Your link text HERE</a>"; 
```

标题也应以换行符结尾：

```
$int  = "From:h@h.com\n\r";
$int .= "Reply-To:try@try.com\n\r";
$int .= "X-Mailer: PHP/".phpversion()."\n\r"; 
```

`\n\r`换行符取决于操作系统，这适用于 Windows，仅适用于UNIX`\n`或`\n\n`.

# django - Should a database connection be opened only once in a django app or once for every user within views.py?

> ID：10994755
> 
> 赞同：0
> 
> 时间：2012-06-12T10:26:33.423
> 
> 标签：django, kyotocabinet

I'm working on my first Django project.

I need to connect to a pre-existing key value store (in this case it is Kyoto Tycoon) for a one off task. i.e. I am not talking about the main database used by django.

Currently, I have something that works, but I don't know if what I'm doing is sensible/optimal.

views.py

```
from django.http import HttpResponse
from pykt import KyotoTycoon

def get_from_kv(user_input):

    kt=KyotoTycoon()
    kt.open('127.0.0.1',1978)

    # some code to define the required key
    # my_key = ...

    my_value = kt.get(my_key)

    kt.close()

    return HttpResponse(my_value) 
```

i.e. it opens a new connection to the database every time a user makes a query, then closes the connection again after it has finished.

Or, would something like this be better?

views.py

```
from django.http import HttpResponse
from pykt import KyotoTycoon

kt=KyotoTycoon()
kt.open('127.0.0.1',1978)

def get_from_kv(user_input):

    # some code to define the required key
    # my_key = ...

    my_value = kt.get(my_key)

    return HttpResponse(my_value) 
```

In the second approach, will Django only open the connection once when the app is first started? i.e. will all users share the same connection?

Which approach is best?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:33:44.577

在需要时打开连接可能是更好的解决方案。否则，连接可能不再打开。因此，您需要测试连接是否仍然打开，如果没有，则重新启动它，然后再继续。

这意味着您可以在上下文管理器块中运行查询，即使发生未经处理的异常，它也会为您自动关闭连接。

或者，您可以有一个连接池，然后只获取一个当前未使用的连接（我不知道在这种情况下这是否会成为问题）。

这一切都取决于创建连接的成本，以及能够重用它们是否有意义。

# java - 使用传入的方法实例化 Java 对象

> ID：10994756
> 
> 赞同：3
> 
> 时间：2012-06-12T10:26:37.253
> 
> 标签：java, functional-programming

自从我深入 Java 以来已经有几年了。回过头来，我到处都看到了这种模式：

```
ratingBar.setOnRatingBarChangeListener(new OnRatingBarChangeListener() {
  public void onRatingChanged(RatingBar ratingBar, float rating, boolean fromUser) {
    // do work
  }
}); 
```

这在我看来更像是函数式编程。这是一个很好的模式，但怎么可能通过这样的方法呢？在过去，一个类就是一个类，一旦编译，你几乎无能为力。

我的问题是：

1.  谁能告诉我这种模式叫什么？
2.  我怎样才能编写一个可以以这种方式实例化的类。
3.  是否还有其他有用的功能模式示例已进入 Java？
4.  我需要谷歌了解更多关于此的信息吗？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T10:28:05.933

这传递了一个匿名类，而不是方法。

这是一个典型的模式，不仅在 Swing 编程中，而且在任何你需要（希望）简短的、不需要重用的接口或类的“丢弃”实现的地方，而不是创建一个成熟的执行。

任何类/接口都可以像这样实例化，没有什么特别之处：

```
public interface Foo {
    String foo();
} 
```

...

```
public class Main {
    public static void main(String[] args) {
        System.out.println(new Foo() {
            public String foo() {
                return "plugh";
            }
        });
    }
} 
```

匿名内部类也有自己的类文件，即使它们的源是嵌入的。

在这个例子中，`Main$1.class`除了预期的文件之外，还将为匿名内部类生成一个`Main.class`文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:31:43.607

声明：`new OnRatingBarChangeListener()`创建一个类的新实例。花括号内的以下部分是类的定义。

在这种情况下，实现命名接口的匿名类中的类。

匿名类是没有名称声明的类，因此不能像常规命名类一样使用。

这种模式在使用侦听器时非常常见，通常只包含一个或几个方法来完成几乎微不足道的任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:33:05.247

这就是监听器模式。评分栏接受一个实现并在适当的事件上`OnRatingBarChangeListener`调用它的方法。`onRatingChanged`

您可以使用任何实现的类的实例`OnRatingBarChangeListener`。因此，您可以使用自己的命名类，也可以将其传递给示例中的匿名类。示例中的匿名类实际上是一个未命名的类，它扩展了 Object 并实现了 OnRatingBarChangeListener。由于该类未命名，因此无法引用它，因此传递的实例是唯一存在的实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T10:38:49.320

这被称为“观察者模式”。一个很好的例子是为 java 按钮或其他组件添加动作侦听器。例如，

```
myButton.addActionListener(
                new java.awt.event.ActionListener()
            {
                public void actionPerformed(ActionEvent e)
                {
                    //Work here
                }
            }); 
```

在这里，“myButton”是主题，ActionListener 是观察者。

# php - 同时在一个表单中显示两个 json 值？

> ID：10994759
> 
> 赞同：0
> 
> 时间：2012-06-12T10:26:38.450
> 
> 标签：php, javascript, json

我正在使用下面提到的 java 脚本生成 2 个 json 对象。我正在将我的 json 填充到表单字段中，现在的问题是我一次只能显示一个，如何同时在表单中显示另一个 json ?

//第一个json：

```
{"vIRnumber":"195412","dReceivedDate":"2012-06-06","vDescription":"GP Coils","fThickness":"888","fWidth":"4566","fQuantity":"122","vStatus":"work in progress"} 
```

//第二个json：

```
{"vIRnumber":"45","dReceivedDate":"2012-04-26","dDate":"0000-00-00","dStartDate":null,"nPartyName":"Aasha","vDescription":"MS Channels","fThickness":"1.8","fWidth":"1220","fQuantity":"34523"} 

        //**i am filling the fields using the javascript below:**

        var json =<?php echo($data); ?>;
        for(key in json)
        {
          if(json.hasOwnProperty(key))
            $('input[name='+key+']').val(json[key]);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:53:23.730

例如，为了显示第一个 json，您可以在表单项旁边添加值

```
<label for="form-item-staddress">St.Adress</label>
<input id="form-item-stadress" type="text" name="stadress"/>
<div class="default">Default value from first json</div> 
```

加载 div 中的第一个 json 以显示当前值

对于传递/保存两个 json 以提交表单或处理其他内容，您可以尝试

```
<input type="hidden" id="firstJSON" value="FirstJSON"/>
<input type="hidden" id="seondJSON" value="SecondJSON"/> 
```

或使用第一个 json 的值的 2 个表单，但不能编辑/提交仅用于查看/参考和第 2 个表单用于编辑/提交。
您可以尝试做更多类似
的更改比较

# c - 不同数量的for循环

> ID：10994762
> 
> 赞同：0
> 
> 时间：2012-06-12T10:26:46.667
> 
> 标签：c, for-loop

我正在尝试编写一个可以打印这样的代码

```
-xv
-xvv
-xvvv
-xvvvv
-xvvvvv

-xxv
-xxvv
-xxvvv
-xxvvvv
-xxvvvvv

-xxxv
-xxxvv
-xxxvvv
-xxxvvvv
-xxxvvvvv 
```

3 个“组”之间的额外间距只是为了清楚起见。'-' 的最大个数是 1，'x' 是 3，'v' 是 5，每个符号的个数递增。

要绘制此图，我有以下代码

```
for (k = 1 ; k <= num_dash ; k++)
{
   for (i = 1 ; i <= num_x ; i++)
   {
      for (j = 1 ; j <= num_v ; j+++)
      {
         for (k1 = 0 ; k1 < k ; k++)
            printf("-");
         for (i1 = 0 ; i1 < i ; i++)
            printf("x");
         for (j1 = 0 ; j1 < j ; j++)
            printf("v");
         printf("\n");
      }
   }
} 
```

这是我知道有 3 种不同类型的符号的时候。如果仅在运行时知道符号的数量，是否可以这样做？例如，如果我希望相同的程序也能够打印怎么办

```
xv
xvv
xvvv
xvvvv
xvvvvv

xxv
xxvv
xxvvv
xxvvvv
xxvvvvv

xxxv
xxxvv
xxxvvv
xxxvvvv
xxxvvvvv 
```

在这种情况下，我的代码只会是

```
 for (i = 1 ; i <= num_x ; i++)
   {
      for (j = 1 ; j <= num_v ; j+++)
      {
         for (i1 = 0 ; i1 < i ; i++)
            printf("x");
         for (j1 = 0 ; j1 < j ; j++)
            printf("v");
         printf("\n");
      }
   } 
```

而且只有 2 个 for 循环而不是 3 个。我可以编写代码以使 for 循环的数量发生变化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:31:32.203

使用函数而不是最内层的 for 循环，并将字符和迭代次数作为参数传递给该函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T16:10:18.707

例如

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void print_aux(char **symbols, int *times, int len, int pos, char *acc){
    int i;
    char *p;

    if(pos == len){
        printf("%s\n", acc);
        return;
    }
    p = malloc(sizeof(char)*strlen(symbols[pos])*times[pos]+strlen(acc)+1);
    for(i=0;i<times[pos];++i){
        int j;
        *p='\0';
        strcpy(p, acc);
        for(j=0;j<=i;++j){
            strcat(p, symbols[pos]);
        }
        print_aux(symbols, times, len, pos + 1, p);
    }
    if(pos + 1 == len)// when last symbol
        printf("\n",pos);
    free(p);
}

//wrap function
void print(char **symbols, int *times, int len){
    print_aux(symbols, times, len, 0, "");
}

int main() {
    int i,n;
    char **symbols;
    int  *times;

    fprintf(stderr,"number of symbols :");
    scanf("%d", &n);
    symbols=(char**)malloc(sizeof(char*)*n);
    times = (int*)malloc(sizeof(int)*n);
    for(i=0;i<n;++i){
        char wk[128];
        fprintf(stderr,"input symbol [%d]:", i+1);
        scanf(" %s", wk);
        symbols[i] = strdup(wk);
        fprintf(stderr,"maximum number of \"%s\":",wk);
        scanf(" %d", &times[i]);
    }

    print(symbols, times, n);

    {   //release the allocated area
        for(i=0;i<n;++i){
            free(symbols[i]);
        }
        free(symbols);
        free(times);
    }
    return 0;
} 
```

# javascript - 无法设置未定义的属性 X - 以编程方式创建的元素

> ID：10994763
> 
> 赞同：0
> 
> 时间：2012-06-12T10:26:48.053
> 
> 标签：javascript

我正在研究一个类来创建一个相当复杂的自定义元素。我希望能够在创建元素时定义元素属性（主要是 CSS）。在给定输入数组的情况下，我想出了以下函数来快速为我设置属性：

```
// Sample array structure of apply_settings
//var _button_div =   {
//    syle    :   {
//        position:   'absolute',
//        padding :   '2px',
//        right   :   0,
//        top     :   0
//    }
//};
function __apply_settings(__el,apply_settings){
    try{
        for(settingKey in apply_settings){
            __setting = apply_settings[settingKey];
            if(typeof(__setting)=='string'){
                __el[settingKey] = __setting;
            }else{
                for(i in __setting){
                    __el[settingKey][i] = apply_settings[settingKey][i];
                } 
            }
        }
    }catch(ex){
        alert(ex + "   " + __el);
    }
} 
```

该功能工作正常，除了这里：

```
function __draw_top(){
    var containerDiv = document.createElement('div');
    var buttonDiv = document.createElement('div');
    __apply_settings(containerDiv,this.settings.top_bar);
    if(global_settings.show_x)
        buttonDiv.appendChild(__create_img(global_settings.images.close));
    containerDiv.appendChild(buttonDiv);
    __apply_settings(buttonDiv,this.settings.button_div);
    return containerDiv;
} 
```

失败的特定部分`__apply_settings(buttonDiv,this.settings.button_div);`出现错误“无法设置未定义的属性'位置'”。所以很自然地，我假设 buttonDiv 是未定义的。我`alert(ex + " " + __el);`输入 __apply_settings() 来验证我正在使用什么。令人惊讶的是，该元素是一个 div。有什么理由为什么这个函数适用于 containerDiv 而不是 buttonDiv？任何帮助将不胜感激 ：）

{编辑} [http://jsfiddle.net/Us8Zw/2/](http://jsfiddle.net/Us8Zw/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:41:37.940

那是因为你这里有一个错字：

```
var _button_div =   {
    syle    :   { //<--- here
        position:   'absolute',
        padding :   '2px',
        right   :   0,
        top     :   0
    }
}; 
```

如果将其更正为`style`，则可以正常工作；[http://jsfiddle.net/Us8Zw/3/](http://jsfiddle.net/Us8Zw/3/)

我还建议您尝试遵循著名的风格指南（而不是看似自己编造的）；您的代码目前很难阅读。我推荐的一个是[Crockford Style Guide](http://javascript.crockford.com/code.html)。

# parameters - 如何从 Mule 将参数传递给外部 web 服务

> ID：10994765
> 
> 赞同：1
> 
> 时间：2012-06-12T10:27:01.537
> 
> 标签：parameters, mule

如何使用 CFX 通过 mule 流将参数传递给外部 Web 服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T15:30:53.433

*   如果使用[WSDL-CXF 连接器](http://www.mulesoft.org/documentation/display/MULE3USER/WSDL+Connectors)，则将参数作为飞行中 Mule 消息中的对象数组传递。此数组中只能使用原语和字符串。
*   否则，如果您需要使用复杂的对象作为参数，请使用您根据[此方法](http://www.mulesoft.org/documentation/display/MULE3USER/Consuming+Web+Services+with+CXF)从 WSDL 生成的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T05:51:23.550

非常感谢。有效。我放置了一个转换器来将我的参数转换为 cxf:jaxws-client 的 Object[] 数组，如下所示。

```
<custom-transformer class="tranformers.ObjectArrayTransformer" doc:name="Java"/>
<http:outbound-endpoint exchange-pattern="request-response" address="http://localhost:8080/WebService/HelloWorldImpl" doc:name="HTTP">
    <cxf:jaxws-client operation="getParamData" serviceClass="miniwebservice.HelloWorld" port="80" doc:name="SOAP"/>
</http:outbound-endpoint> 
```

# java - 删除然后查询在 JPA 中失败（已删除的实体传递给持久化）

> ID：10994766
> 
> 赞同：0
> 
> 时间：2012-06-12T10:27:07.917
> 
> 标签：java, hibernate, jpa, seam

我有两个实体 MobeeCustomer 和 CustomerRegion 我想首先从 CustomerRegion 中删除对象我将 CustomerRegion 中的 join Coloumn 为 null 然后从 entityManager 中删除对象但我得到了异常

Mobee客户：

> ```
>  public class MobeeCustomer implements Serialization{
> 
>   private Long id;
> 
>   private String custName;
> 
>   private String Address;
> 
>   private String phoneNo; 
> 
>   private Set<CustomerRegion> customerRegion = new HashSet<CustomerRegion>(0);
> 
>   @OneToMany(cascade = { CascadeType.PERSIST, CascadeType.REMOVE },
>    fetch =    FetchType.LAZY, mappedBy = "mobeeCustomer")     
>    public Set<CustomerRegion> getCustomerRegion() { 
>     return CustomerRegion;  
>      }
> 
>   public void setCustomerRegion(Set<CustomerRegion> customerRegion) {
>       CustomerRegion = customerRegion;    
>     }
> 
>   } 
> ```

客户区域

```
 public class CustomerRegion implements Serializable{

private Long id;

private String custName;

private String description;

private String createdBy;
private Date createdOn;

private String updatedBy;
private Date updatedOn;
   private MobeeCustomer mobeeCustomer;

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "MOBEE_CUSTOMER")
public MobeeCustomer getMobeeCustomer() {
    return mobeeCustomer;
}
public void setMobeeCustomer(MobeeCustomer mobeeCustomer) {
    this.mobeeCustomer = mobeeCustomer;
}

   } 
```

示例代码：

```
 if (doUpdateRegion.getStatus().equals(UserOperations.DELETE.getType())) {

custEntity = getEntityManager().find(CustomerRegion.class,doUpdateRegion.getId());

      BeanUtils.copyProperties(custEntity, doUpdateRegion);

deletedRegionsList.add(custEntity);

}

  for (CustomerRegion region : deletedRegionList) {

            region.setMobeeCustomer(null);
      getEntityManager().remove(region);
}

StackTrace:

please suggest me how to remove the CustomerRegion Object I  am getting Exception

  javax.persistence.EntityNotFoundException: deleted entity passed to persist:          [com.manam.mobee.persist.entity.CustomerRegion#<null>]
15:46:34,614 ERROR [STDERR]     at org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:613)
15:46:34,614 ERROR [STDERR]     at org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:299)
15:46:34,614 ERROR [STDERR]     at org.jboss.seam.persistence.EntityManagerProxy.flush(EntityManagerProxy.java:92)
15:46:34,614 ERROR [STDERR]     at org.jboss.seam.framework.EntityHome.update(EntityHome.java:64) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:42:14.703

您正在尝试删除没有`id`. 因此实体管理器无法在数据库中找到它。这称为分离实体。

在删除它们之前尝试从数据库中检索区域列表。

如果你这样做了，那么这看起来是个`transaction`问题。您在事务之外，因此实体与会话分离。尝试在同一个事务中完成所有操作，不要调用`entityManager.remove()`，只需从集合中删除该项目，当您关闭事务并提交时，刷新将自动进行。

例如与`Spring`

```
@Transactional(readOnly = false)
public void deleteRegions(Set<CustomerRegion> deletedRegionList){
    revion.getMobeeCustomer().getCusotmerRegion.removeAll(deletedRegionList);
} 
```

如果该方法结束事务，它将提交。Hibernate/JPA 结束的所有修改都会调用刷新，它将内存状态与数据库同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:42:19.937

也许问题是 MobeeCustomer 中仍然有对 CustomerRegion 的引用。如果这是问题，这应该解决它：

```
for (CustomerRegion region : deletedRegionList) {
      region.getMobeeCustomer().getCustomerRegion().remove(region);
      getEntityManager().remove(region);
} 
```

# c++ - 为什么我的地图分配会导致编译器错误？

> ID：10994767
> 
> 赞同：2
> 
> 时间：2012-06-12T10:27:14.123
> 
> 标签：c++, map, compiler-errors

我无法理解为什么这不会编译：

```
#include <map>
#include <string>

std::map<std::string, std::string> m;
m["jkl"] = "asdf"; 
```

我收到[此编译器错误](http://codepad.org/aFyQS0br)：

`Line 5: error: expected constructor, destructor, or type conversion before '=' token compilation terminated due to -Wfatal-errors.`

我发誓我一定在这里遗漏了一些简单的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T10:30:47.027

`m["jkl"] = "asdf"`是一个表达式。您不能在函数体之外拥有自己的表达式。函数体之外唯一允许的就是声明和定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T10:31:05.700

该分配需要在函数内（即*块范围*）。如果要初始化地图，则必须在定义时进行。[这](https://stackoverflow.com/questions/138600/initializing-a-static-stdmapint-int-in-c)是一个相关的 SO 问题（关于`map`在文件范围内初始化）。

# java - Spring/RMI 服务器错误

> ID：10994770
> 
> 赞同：1
> 
> 时间：2012-06-12T10:27:24.943
> 
> 标签：java, spring, rmi, socketexception, connectexception

我们有一个 Spring MVC Web 应用程序（WAR）部署到 Tomcat（6.0.35），它在部署时在单独的 JVM 中启动一个线程（不要问为什么 -**不是**我的设计），然后通过 RMI 通过端口与该线程通信8888。

尽管完全令人费解，但直到昨天为止，这一切都很好，现在线程在启动时失败了，尽管我们尽最大努力将日志记录添加到组合中，但我们还是碰壁了。这是我们能够在日志中找到的唯一异常：

```
Jun 12, 2012 3:11:36 AM com.ourapp.ImageController destroy
SEVERE: Shutdown Error: Lookup of RMI stub failed; nested exception is      java.rmi.ConnectException: Connection refused to host: localhost; nested exception is:
    java.net.ConnectException: Connection refused
Jun 12, 2012 3:11:37 AM org.apache.catalina.core.StandardContext listenerStop
SEVERE: Exception sending context destroyed event to listener instance of class    org.springframework.web.context.ContextLoaderListener
java.lang.NoClassDefFoundError: org/springframework/web/context/ContextCleanupListener
    at org.springframework.web.context.ContextLoaderListener.contextDestroyed(ContextLoaderListener.java:80)
    at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:3973)
    at org.apache.catalina.core.StandardContext.stop(StandardContext.java:4577)
    at org.apache.catalina.startup.HostConfig.checkResources(HostConfig.java:1165)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1271)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:296)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1337)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1601)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1610)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1590)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.ClassNotFoundException: org.springframework.web.context.ContextCleanupListener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1387)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1233)
    ... 12 more 
```

这是负责启动这个守护进程/生成的 RMI 线程`ImageController`的 Spring MVC 。`Controller`根据此错误的措辞，是否有人*知道*可能导致此“连接被拒绝”错误的原因？

运行 a `netstat -an | grep 8888`（这是一台 Linux 机器）不会产生任何输出，这意味着该端口上没有任何东西在监听。提前感谢任何导致修复的想法/建议。

**编辑**：这是`ConnectionException`我们看到的另一个：

```
Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:529)
    at java.net.Socket.connect(Socket.java:478)
    at java.net.Socket.<init>(Socket.java:375)
    at java.net.Socket.<init>(Socket.java:189)
    at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:22)
    at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:128)
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:595)
    ... 74 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:01:47.173

我会将我的评论移至此答案。

日志中的所有内容都表明问题出在您连接到端口 8888 的另一台计算机上。`netstat`结果证明没有进程在该端口上侦听 - 因此日志中出现连接错误。

我将采取的下一步是检查另一台机器（或其他JVM）上的应用程序是否正在运行（例如`ps ax|grep java`）。如果确实如此，请检查其日志以了解它未能启动 RMI 服务的原因，或者如果它没有 - 启动它。

通常，如果应用程序无法打开套接字，这是因为其他应用程序已经在使用该端口。你的情况并非如此。可能是同一个应用程序的两个实例已启动：第一个应用程序占用 8888 端口，第二个应用程序无法占用 8888 并失败，然后第一个应用程序被关闭。毕竟你最终没有人在监听端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:46:38.360

> 有谁知道可能导致此“连接被拒绝”错误的原因？

它就在堆栈跟踪中：

```
java.lang.NoClassDefFoundError: org/springframework/web/context/ContextCleanupListener 
```

您的部署缺少该类，即它所包含的 JAR 文件。

# php - PHP die(header): 搞砸了我的 SEO？

> ID：10994772
> 
> 赞同：2
> 
> 时间：2012-06-12T10:27:27.057
> 
> 标签：php, seo

我在 index.php 文件的开头有这段代码：

```
 if ( !isset($_GET['cat']) )
        die(header("Location: ?cat=top")); 
```

基本上，如果没有设置类别，它会自动重定向到类别“Top”。

我现在注意到 Google 添加了 index.php，但它只在搜索结果中显示 URL，而不是显示我定义的元标记。

所有其他页面的索引都非常好，只是没有 index.php 文件。有什么解决办法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T10:34:45.197

PHP 在使用 header: Location 时默认使用 302 重定向。这会与 SEO 混淆，因为 google 不会将重定向的位置与初始位置交换。尝试使用

```
if ( !isset($_GET['cat']) ) {
    header("HTTP/1.1 301 Moved Permanently");
    header("Location: ?cat=top");
    die();
} 
```

这应该告诉谷歌索引具有元信息的重定向位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T10:32:36.853

函数`die`能够打印出文本/字符串数据，我从未见过调用`header`inside `die`。

正确的做法应该是：

```
if ( !isset($_GET['cat']) ) {
    header("Location: ?cat=top");
    die();
} 
```

您可以调用`exit;`而不是`die();`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T10:30:48.490

我认为没有必要调用`die()`函数。你可以打电话

```
if ( !isset($_GET['cat']) )
   header("Location: ?cat=top"); 
```

# wordpress - 从开发环境安装的wordpress博客不起作用

> ID：10994773
> 
> 赞同：0
> 
> 时间：2012-06-12T10:27:28.150
> 
> 标签：wordpress

我在我的开发环境中安装了一个 wordpress 博客。此环境的 URL 是`dev.mysite.com`，我的实时环境位于`mysite.com`. 他们都共享同一个数据库。有一个适用于两种环境的 SVN。

我已经在我的开发环境中安装了 wordpress 博客，一切都很好，但是当我移动到真实环境时，它并没有打开。

```
SELECT * FROM wp_optionsLIMIT 1000 
```

上面的查询显示，**siteurl**是`dev.mysite.com`. 我可以改变它，但它会停止在开发环境中工作（对吗？）。有什么方法可以从两种环境访问博客，同时共享同一个数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:33:19.037

简而言之，我认为答案是否定的。Wordpress 将站点/基本 URL 存储在该 wp_options 表中的几行中，因此它仅适用于一个 URL。您是否有理由需要将它们都指向同一个数据库？

当我在使用 Wordpress 时，我只在一个开发环境中工作，然后逐步更新我的实时站点。我认为这就是你会有不同环境的原因！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:37:00.973

将相同的数据库用于开发和生产是一个非常糟糕的想法，因为您可能会意外破坏它（总是有备份！）。您应该有单独的数据库，而用于生产的数据库只能由生产应用程序使用。

如果您经常需要，最好使用一些构建工具来自动更新生产，或者至少手动更新。考虑使用[Phing](http://www.phing.info/trac/)或其他构建工具。

# jsp - jsp连接数据库

> ID：10994775
> 
> 赞同：0
> 
> 时间：2012-06-12T10:27:29.973
> 
> 标签：jsp

我设计了一个 jsp 页面，我从中将字段值传递给另一个 jsp 页面。在此页面中，我想将值存储在数据库中并根据此页面中的成功或失败显示适当的消息。除了数据没有插入数据库并且没有显示错误消息之外，一切似乎都正常工作。

* * *

学生.jsp

```
<form id="form" method="post" action="students_final.jsp">
  Student name:<input type="text" value="" name="name">
  Reg no:<input type="text" value="" name="regno">
  <input type="submit" value="Register" />
</form> 
```

* * *

student_final.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@page language="java"%>
<%@page import="java.lang.*" import="java.sql.*"%>

<% 
  try {
    Class.forName("com.mysql.jdbc.Driver");  
    String url="jdbc:mysql://localhost:3306/userdbase";
    Connection connection = DriverManager.getConnection(url, "root", "passwd");  

    String name=request.getParameter("name");
    String regno=request.getParameter("regno");

    "INSERT INTO `schooldatabase`.`test` (`name`) VALUES ('" + name + "');";
    Statement st= connection.createStatement();
    int count=st.executeUpdate(strquery);

    /*ResultSet rs= st.executeQuery(strquery);*/
  }
  catch(Exception e)
  {
    System.out.println("Could not connect");
  }
%> 
```

我知道有一个非常愚蠢的错误。请帮我找出来！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:29:48.243

尝试提交事务。自动提交可能是错误的。

您应该使用 PreparedStatement。这是等待发生的 SQL 注入攻击。

您不会关闭任何资源，因此如果您让它工作，这个应用程序将不会运行很长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T02:35:48.220

```
String url = "jdbc:mysql://localhost:3306/schooldatabase"; 
```

If I'm not mistaken you ran this query in MySQL and as far as I can tell "schooldatabase" is the database name and "test" is the table in it. Also

```
String query = "INSERT INTO test ('name') VALUES ("+name+")";
int count = st.executeUpdate(query); 
```

This will work.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T15:10:19.843

"插入`schooldatabase`. `test`( `name`) 值 ('" + 名称 + "');";

将此分配给变量

# android - 如何在 android 上显示有关当前可见活动的对话框？

> ID：10994777
> 
> 赞同：7
> 
> 时间：2012-06-12T10:27:35.810
> 
> 标签：android, android-activity, android-dialog

我的问题类似于[这个 2 岁的问题](https://stackoverflow.com/questions/3136187/how-to-detect-if-any-of-my-activity-is-front-most-and-visible-to-user)，我只是重新发布相同的问题以获得更新的答案，因为两年内发生了很多变化。

我正在为 GingerBread+ 设备开发应用程序，我有很多活动，并且在后台我从服务器接收一些数据。现在基于该数据，在某些情况下我需要向`Dialog`用户显示。问题是我如何知道当前最前沿的活动？

**我尝试过的，** 我尝试过创建`getApplicationContext()`while `Dialog`，但是那是行不通的。抛出一些异常。

**一个办法 ？（我真的很讨厌它），**`Application`一个解决方案可能是通过在类中有一个变量并将其设置`onResume()`为每个活动 来跟踪当前可见的活动。如果他们是实现这一目标的更聪明的方法，我真的不想做这本书，我相信他们是实现这一目标的更聪明的方法，

我的简单问题是，
**如何显示有关当前可见活动的对话框？**, 这样我就可以引用 AlertDialog.Builder，我认为它会完成我的工作。如果不是，**我如何在最顶层的 Activity 上显示一个对话框？**

**编辑，**我使用以下代码创建了一个简单的对话框 private View.OnClickListener cancelClickListener = new OnClickListener() {

```
 @Override
    public void onClick(View v) {
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                LoginActivity.this);

        // set title
        alertDialogBuilder.setTitle("Roobroo will exit..");

        // set dialog message
        alertDialogBuilder
                .setMessage("Are you sure you want to exit ?")
                .setCancelable(false)
                .setPositiveButton("Yes",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                // if this button is clicked, close
                                // current activity
                                LoginActivity.this.finish();
                            }
                        })
                .setNegativeButton("No",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                // if this button is clicked, just close
                                // the dialog box and do nothing
                                dialog.cancel();
                            }
                        });

        // create alert dialog
        AlertDialog alertDialog = alertDialogBuilder.create();

        // show it
        alertDialog.show();
        // TODO Write the code to exit from the app, (gracefull exit)
        Log.i(LOG_CAT, "Cancel Button is clicked");
    }
}; 
```

**使用 AlertDialog.Builder 的异常** alertDialogBu​​ilder = new AlertDialog.Builder(getApplicationContext()); 给了我以下例外，

```
06-11 14:09:16.732: E/AndroidRuntime(1005): FATAL EXCEPTION: main
06-11 14:09:16.732: E/AndroidRuntime(1005): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
06-11 14:09:16.732: E/AndroidRuntime(1005):     at android.view.ViewRoot.setView(ViewRoot.java:531)
06-11 14:09:16.732: E/AndroidRuntime(1005):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
06-11 14:09:16.732: E/AndroidRuntime(1005):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
06-11 14:09:16.732: E/AndroidRuntime(1005):     at android.app.Dialog.show(Dialog.java:241)
06-11 14:09:16.732: E/AndroidRuntime(1005):     at com.mycompany.myapp.activities.LoginActivity$3.onClick(LoginActivity.java:127)
06-11 14:09:16.732: E/AndroidRuntime(1005):     at android.view.View.performClick(View.java:2485)
06-11 14:09:16.732: E/AndroidRuntime(1005):     at android.view.View$PerformClick.run(View.java:9080)
06-11 14:09:16.732: E/AndroidRuntime(1005):     at android.os.Handler.handleCallback(Handler.java:587)
06-11 14:09:16.732: E/AndroidRuntime(1005):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-11 14:09:16.732: E/AndroidRuntime(1005):     at android.os.Looper.loop(Looper.java:123)
06-11 14:09:16.732: E/AndroidRuntime(1005):     at android.app.ActivityThread.main(ActivityThread.java:3683)
06-11 14:09:16.732: E/AndroidRuntime(1005):     at java.lang.reflect.Method.invokeNative(Native Method)
06-11 14:09:16.732: E/AndroidRuntime(1005):     at java.lang.reflect.Method.invoke(Method.java:507)
06-11 14:09:16.732: E/AndroidRuntime(1005):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-11 14:09:16.732: E/AndroidRuntime(1005):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-11 14:09:16.732: E/AndroidRuntime(1005):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T10:41:10.700

如果对您有帮助，请尝试以下操作：

**1.**`Activity`用`transparent theme and no title`. _

**2.**在`onCreate()`定义你的`alert dialog`.

**3.**从 broadcastReceiver 开始这个活动将显示`alert dialog`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T11:01:10.630

只需像这样创建一个`Activity`并将其主题设置`Dialog`为`manifest`：

```
 <activity
        android:name="Dialog_MsgBox"
        android:launchMode="singleInstance"
        android:theme="@android:style/Theme.Dialog" >
    </activity> 
```

还设置`launchMode`为`singleInstance`防止多个活动实例。使用您想要用于对话框的任何布局。

要设置不同的消息，请放置额外的字符串消息并在您启动对话框（活动）时获取它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T08:04:15.067

**不是最好的解决方案，但它对我有用..**

我创建了一个抽象类 MyActivity，它扩展了 Activity 并将 setter 调用放在此类的 OnResume 和 OnPause 一侧。我的应用程序的所有其他活动只是扩展了这个自定义超类而不是活动。

然后我在Application类中创建了这个类的一个变量，

```
private Activity currentOnTopActivity; 
```

我在MyActivity 类中`onResume()`设置/重置了这个变量。`onPause()`

完成后，每当我想向用户显示一个对话框时，我只需执行以下操作...

```
 if (currentOnTopActivity!=null && !currentOnTopActivity.isFinishing()) {
                currentOnTopActivity.runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        String msg = "Some msg";
                        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(currentOnTopActivity);
                        AlertDialog invitationDialog = null;

                        // set title
                        alertDialogBuilder.setTitle("Title ");

                        // set dialog message
                        alertDialogBuilder.setMessage(msg).setCancelable(false).setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int id) {
                                         // do something                            }
                        });

                        // create alert dialog
                        invitationDialog = alertDialogBuilder.create();

                        // show it on UI Thread
                        invitationDialog.show();

                    }

                });
            } 
```

引入一个 Super Activity 类也让我可以灵活地将通用代码放在这个抽象类中，而不是在每个其他 Activity 中复制它。

# ios - IOS：UIgestureRecognizer 和 touchBegan

> ID：10994789
> 
> 赞同：0
> 
> 时间：2012-06-12T10:28:17.057
> 
> 标签：ios, xcode, uigesturerecognizer

在我看来，我使用三种方法（touchbegan、touchmoved 和 touchended），因为我在视图中着色；我的问题是我想在这个视图中添加一个带有 2 个水龙头的 UITapGestureRecognizer；是否可以？还是 touchbegan 不允许这个手势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:42:05.350

雅它可能

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
[super touchesBegan:touches withEvent:event];

UITouch *touch = [touches anyObject];
if([touch tapCount] == 2){
     NSLog("2 taps");
}
} 
```

愿这对你有帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-12T10:51:07.687

```
 UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapDetected)];
    doubleTap.numberOfTapsRequired = 2;
    [self.view addGestureRecognizer:doubleTap];
    [doubleTap release];

-(void)tapDetected{
    NSLog(@"Double Tap");

} 
```

# asp.net-mvc - 如何在 MVC 3 中将列表从控制器传递到视图

> ID：10994790
> 
> 赞同：35
> 
> 时间：2012-06-12T10:28:27.027
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有一个 List<> 与 Controller 操作中的一些数据绑定，我想将该 List<> 传递给 View 以与 Razor View 中的 DataGrid 绑定。

我是 MVC 的新手。任何人都可以帮助我如何通过以及如何在 View 中访问。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-12T10:36:23.373

将数据传递给视图就像将对象传递给方法一样简单。看看 [Controller.View 方法](http://msdn.microsoft.com/en-us/library/dd492930.aspx)

```
protected internal ViewResult View(
    Object model
) 
```

像这样的东西

```
//controller

List<MyObject> list = new List<MyObject>();

return View(list);

//view

@model List<MyObject>

// and property Model is type of List<MyObject>

@foreach(var item in Model)
{
    <span>@item.Name</span>
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-04-08T05:51:13.653

我这样做了；

在控制器中：

```
public ActionResult Index()
{
  var invoices = db.Invoices;

  var categories = db.Categories.ToList();
  ViewData["MyData"] = categories; // Send this list to the view

  return View(invoices.ToList());
} 
```

鉴于：

```
@model IEnumerable<abc.Models.Invoice>

@{
    ViewBag.Title = "Invoices";
}

@{
  var categories = (List<Category>) ViewData["MyData"]; // Cast the list
}

@foreach (var c in @categories) // Print the list
{
  @Html.Label(c.Name);
}

<table>
    ...
    @foreach (var item in Model) 
    {
      ...
    }
</table> 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-12T10:30:48.570

您可以使用动态对象`ViewBag`将数据从控制器传递到视图。

将以下内容添加到您的控制器：

```
ViewBag.MyList = myList; 
```

然后您可以从您的视图中访问它：

```
@ViewBag.MyList

// e.g.
@foreach (var item in ViewBag.MyList) { ... } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-12T14:27:35.887

1.  创建一个模型，其中包含您的列表和视图所需的其他内容。

    例如：

    ```
    public class MyModel
    {
        public List<string> _MyList { get; set; }
    } 
    ```

2.  从 action 方法中，将您想要的列表放入 Model`_MyList`属性中，例如：

    ```
    public ActionResult ArticleList(MyModel model)
    {
        model._MyList = new List<string>{"item1","item2","item3"};
        return PartialView(@"~/Views/Home/MyView.cshtml", model);
    } 
    ```

3.  在您的视图中访问模型如下

    ```
    @model MyModel
    foreach (var item in Model)
    {
       <div>@item</div>
    } 
    ```

我认为这将有助于开始。

# jquery - 获取浏览器宽度和高度附加div jQuery

> ID：10994796
> 
> 赞同：0
> 
> 时间：2012-06-12T10:28:54.513
> 
> 标签：jquery, css, browser, append, browser-width

我正在尝试获取浏览器的宽度和高度，并使用 jQuery 将两个不同的 DIV 附加到两个不同的位置。

DIV ONE 应该是绝对定位的，距离浏览器窗口左侧 40px 和距离底部 40px，而 DIV TWO 应该距离右侧 40px 和底部 40px，无论什么设备正在查看网页（因此必须在 iPad 上工作、iPhone 等）。

我在两个 div 中也有内容（图像、子 div 和文本），但我只是不知道如何处理这个问题，因为我对 jQuery 毫无用处。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:33:16.383

你不需要 jQuery（至少是定位）。CSS 有足够的技巧。

不要使用*绝对*定位，使用固定：

```
#div-1, #div-2 {position:fixed;}
#div-1 {left:40px; bottom;40px;}
#div-2 {right:40px; bottom;40px} 
```

使用`position:fixed`时，left、right、top 和 bottom 属性指的是固定位置对象的相应边缘与视口相应边缘的距离。

...所以你在哪里应用你的 div 并不重要。只需将它们附加到正文：

```
var myDivsHtml = howeverYouGetYourDivs();
$('body').append(myDivsHtml) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:33:26.633

我相信您正在寻找固定的定位而不是绝对的。

只需为此使用 CSS

```
.div1{
   position:fixed;
   bottom:40px;
   left:40px;
}
.div2{
   position:fixed;
   bottom:40px;
   right:40px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:39:49.157

试试这个：

```
$(function(){
    var $body = $("body");
    $("<div/>").css({
        "position":"fixed",
        "bottom":"40px",
        "left":"40px"
        }).appendTo($body);
    $("<div/>").css({
        "position":"fixed",
        "bottom":"40px",
        "right":"40px"
        }).appendTo($body);
}); 
```

# android - Android 模拟器，使用 screenLayout = SIZE_LARGE 创建和 AVD

> ID：10994804
> 
> 赞同：1
> 
> 时间：2012-06-12T10:29:35.053
> 
> 标签：android, emulation, avd

我正在开发一个针对 android 4+ 的应用程序，它的行为因屏幕大小而异。更详细：

*   在小/中型屏幕上，方向被强制为纵向，应用程序通过切换活动来运行。
*   在大/超大屏幕上，横向是强制的，屏幕被分成两部分，菜单片段在左边，其他片段在右边。

问题是，我无法创建被检测为大屏幕的 AVD。

刚刚在分辨率为 640x1024、密度为 240 的 AVD 上进行了测试，此代码从未进入第一个 IF。

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    // forcing layout to landscape if display is LARGE or more
    if ((getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_LARGE ||
            (getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_XLARGE) {
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        dualPane = true;
    }
    else {
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        dualPane = false;
    }
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T11:27:00.063

假设您安装了适用于 Eclipse 的 Android SDK 插件，您可以创建一个仅使用 LARGE 布局的模拟器：

1.  在 Eclipse 中，单击绿色的小 Android 按钮（“打开 Android 虚拟设备监视器”）。
2.  新的...
3.  名称 = [随便]
4.  目标 = **Android 4.x**
5.  CPU/ABI = [随便] 但英特尔仿真器通常更好/更快。
6.  **分辨率 = 1024 x 600。这是重要的部分。**不要使用 600 x 1024。**它必须是横向设备**（如“迷你平板电脑”）
7.  同样重要的是：**手动将密度设置为 MDPI**：单击“抽象 LCD 密度”-> 将 MDPI 的数字更改为 160。
8.  创建 AVD

现在启动设备。它只会使用 LARGE 布局 (Configuration.SCREENLAYOUT_SIZE_LARGE)。使用 Ctrl+F11 旋转到纵向。纵向模式也将使用 LARGE 布局。

# eclipse - Hg + Eclipse - 过滤变更集以进行移植

> ID：10994805
> 
> 赞同：2
> 
> 时间：2012-06-12T10:29:38.490
> 
> 标签：eclipse, mercurial, cherry-pick, mercurial-revsets

我一遍又一遍地重复的动作是将我的更改从生产分支[移植](http://javaforge.com/wiki/76412#section-Transplant)`default`到生产分支。然而，每次这意味着手动挑选我想要在大量其他变更集之间移植的变更集的繁琐且容易出错的任务。

![移植向导](../Images/927f7b00778b80beef423060aa55b35a.png)

有没有办法按作者和消息过滤可用的 chagnesets？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T15:04:13.433

从屏幕截图来看，没有。看起来你不能。正如评论者所提到的，您可以使用命令行或 TortoiseHG 使用[revset 查询进行查询](http://www.selenic.com/mercurial/hg.1.html#revsets)：

```
hg log -r "user('vartec') and desc('needle')" 
```

在 Tortoise HG 中，单击“搜索”图标（放大镜）并在搜索框中输入 revset 查询。

# c# - 在两个日期之间搜索并显示结果 - gridview

> ID：10994814
> 
> 赞同：0
> 
> 时间：2012-06-12T10:29:53.687
> 
> 标签：c#, asp.net, sql

我有一个gridview 和sqldatasource。

这是网格视图：

```
 +----+--------------+--------+----------+
    | No |  Names       |   ID   |  Date    |
    +----+--------------+--------+----------+
    |  1 |  Name1       |1636    |04.15.2012|
    |  2 |  Name7       |1236    |09.12.2012|
    |  3 |  Name1       |1136    |08.16.2012|
    |  4 |  Name3       |1536    |09.25.2012| 
    |  5 |  Name11      |1436    |09.15.2012|
    |  6 |  Name1       |1836    |09.11.2012| 
    |  7 |  Name2       |1736    |09.15.2011|
    |  8 |  Name1       |1296    |08.15.2012| 
    +----+--------------+--------+----------+ 
```

现在我在 Names 中搜索 Name1 并显示第一个日期和最后一个日期之间的所有行

```
 Names : [Name1]
    First date : [08.01.2012]
    Final date : [09.30.2012] 
                 [[SEARCH]] 
```

结果将是：

```
+----+--------------+--------+----------+
| No |  Names       |   ID   |  Date    |
+----+--------------+--------+----------+
|  3 |  Name1       |1136    |08.16.2012| 
|  8 |  Name1       |1296    |08.15.2012| 
|  6 |  Name1       |1836    |09.11.2012| 
+----+--------------+--------+----------+ 
```

我不知道怎么做，如果他不介意，有人可以帮我吗？

谢谢你，贾克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:39:53.143

```
select *
from your_table
where name='Name1' and Date between 'First date' and 'Final date'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:41:24.117

你可以使用 sql 查询来解决这个问题，查询是

> ```
>  select NO,Names,ID,Date from [your table] where Names='Name1' and Date Between FirstDate and SecondDate 
> ```

希望对你有帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T11:30:44.213

**如果First Date**和**Final Date**的数据类型为 DateTime ，请使用以下查询

```
SELECT 
   NO,Names,ID,Date 
FROM 
   [Table Name] 
WHERE 
   Names = 'Name1' AND
   Date BETWEEN FirstDate AND SecondDate 
```

如果您将**First Date**和**Final Date**作为 string 传递，那么您需要将它们转换为 DATE 数据类型并在查询中使用，如下所示。

```
SELECT 
   NO,Names,ID,Date 
FROM 
   [Table Name] 
WHERE 
   Names = 'Name1' AND
   CONVERT(DATE,[Date],101) BETWEEN CONVERT(DATE,FirstDate,101) AND    
   CONVERT(DATE,SecondDate,101) 
```

# java - Spring MVC - 使用 Poincuts 用动态数据填充 Spring MVC 部分

> ID：10994825
> 
> 赞同：3
> 
> 时间：2012-06-12T10:30:40.940
> 
> 标签：java, spring, model-view-controller, spring-mvc, aop

每次调用一组控制器（页面控制器）而不是其他控制器（表单控制器，ajax，...）时，如何在 Spring MVC Web 应用程序中使用动态数据（如用户名）填充可重用部分（如标题）？

标题：

```
<#import "../spring.ftl" as spring />
<!DOCTYPE html>
<html>
<head>
<title>DW-Client</title>
</head>
<body>
<h2>Welcome ${menu.userName}</h2> 
```

指数：

```
<#include "common/header.ftl">
<!-- stuff -->
<#include "common/footer.ftl" /> 
```

[这是对这个 SO 帖子](https://stackoverflow.com/questions/5383112/spring-mvc-complex-model-population-from-multiple-sources/10994463#10994463)的一种跟进。然而，这家伙似乎不再活跃，我想听听一些关于我们用动态菜单之类的数据在 spring mvc web 应用程序中填充部分的方法的新意见......

另一个人建议使用`AbstractController`由所有页面控制器扩展并通过带`@ModelAttribute`注释的方法填充变量的方法，这似乎是一个不错的主意。但我最初的想法是：

为什么不使用带有切入点的 AOP 来填充`ModelAndView.model`One 只会用 say 注释控制器或方法`@MenuData`。现在，每当调用控件时，它都会被向 ModelAndView 添加所需信息的 Aspect 截获：

```
@RequestMapping(value = "/")
@MenuData
public ModelAndView homePath() {
    ModelAndView mav = new ModelAndView();
    mav.setViewName("index");        
    return mav;
}

@Target({ ElementType.TYPE, ElementType.METHOD })
@Retention(RetentionPolicy.RUNTIME)
public @interface MenuData {
}

@Aspect
@Component
public class MenuDataAspect {

    @Inject
    private MenuDataProvider menuDataProvider;

    @Pointcut("within(@MenuData *) && execution(public * * (..))")
    public void menuDataRequested() {            
    }

    @Around("menuDataRequested()")
    public Object provideMenuData(ProceedingJoinPoint pjp) throws Throwable {
        Object output = pjp.proceed();
        ModelAndView mav = (ModelAndView) output;
        mav.getModel().put("menu", menuDataProvider.getMenuData());            
        return mav;
    }

} 
```

现在我应该可以`${menu.userName}`在我的标题部分中说或任何内容......这样我可以准确控制哪个控制器应该有menuData。

通过告诉切入点拦截所有以 Page 开头的控制器，可以使这个概念更加灵活（不确定语法，但我知道它会起作用，例如`@Pointcut("within(*.Page*)")`pageController 包中的所有控制器或其他东西。

当然，也可以为不依赖于会话而是依赖于页面的不同菜单场景定义多个注释。

* * *

所以我想知道，这种方法看起来是个好主意还是有什么陷阱？你会做什么不同/更好？您使用哪种方法？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T11:15:17.333

AOP 对于在一些控制器类中初始化数据似乎有点矫枉过正。

我质疑（a）不是应用程序范围的行为，（b）仅限于少数用户页面级控制器，以及（c）可以使用传统继承来实现的复杂性。

虽然它在技术上可以工作，但*不*使用继承的令人信服的理由是什么？

如果我在这方面提供oversite，您将不得不更加努力地在权衡中卖给我。

# javascript - 字符编码适用于一页，但不适用于另一页

> ID：10994831
> 
> 赞同：0
> 
> 时间：2012-06-12T10:30:48.040
> 
> 标签：javascript, encoding, character-encoding

我有一个`http://199.193.248.80/test/test.php`包含 « 字符的页面。

但是当我打开js阅读这个页面时`http://199.193.248.80/test/test.html`，字符变成了?</p>

两个页面都使用 Charset Windows-1252，所以我不知道为什么它可以在一个页面上工作，而在另一个页面上却不行。需要做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:40:12.587

这可能是因为 PHP 在标头中设置的字符集（在提供 . 时`.php`）与 Apache（在提供 时`.html`）不同。浏览器使用响应标头中提到的字符集；它实际上覆盖了`<meta>`标签。

默认情况下 PHP 选择`iso-8859-1`我相信，但您可以使用以下命令覆盖 PHP 中的字符集：

```
header('Content-Type: text/html; charset=windows-1252'); 
```

或更改`php.ini`全局更改。

也可以看看：

*   [http://httpd.apache.org/docs/2.0/mod/core.html#adddefaultcharset](http://httpd.apache.org/docs/2.0/mod/core.html#adddefaultcharset)（用于 Apache）
*   [http://www.php.net/manual/en/ini.core.php#ini.default-charset](http://www.php.net/manual/en/ini.core.php#ini.default-charset)（用于 PHP）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-12T10:35:42.467

我建议使用 HTML-entity 表单：`&laquo;`

这样，您对文件使用什么字符集并不重要，因为您的浏览器只是解析它。

在 PHP 中，您可以使用`$str = htmlentities( $str );`对字符串进行编码

# ruby-on-rails - 本地化数据库记录的最佳方法

> ID：10994838
> 
> 赞同：2
> 
> 时间：2012-06-12T10:31:25.450
> 
> 标签：ruby-on-rails, activerecord, localization, internationalization, translation

例如，我有项目模型和 5 个可用的语言环境。用户应该能够创建本地化到这 5 个语言环境的项目吗？添加这种功能的最佳方法是什么，有什么方法可以解决这个问题吗？我知道我应该将所有这些翻译存储在数据库中，但是对于每个字段，像`text_en`, `text_pt`, `text_es`, `text_fr`,之类的东西都让我害怕。`text_it`你能给我一个建议吗？谢谢！

UPD。似乎我为这项工作找到了不错的工具[https://github.com/svenfuchs/globalize3](https://github.com/svenfuchs/globalize3) :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-07T19:36:12.520

Globalize3 相当不错，是的，但它可能会给更大的项目带来一些麻烦。

主要是因为它为您要翻译的每种数据类型创建一个表。我见过一个包含超过 35 个（！）翻译表的项目，这极大地复杂化了维护。想象一下这个项目的翻译管理系统。您也可以避免一些复杂性。

使用序列化的想法非常好，我会推荐它与 postgres 和*jsonb*（或*hstore*）。它仍然允许您进行一些全文搜索：

```
MyModel.where("name @> ?", {fr: "NomFrancais"}.to_json) 
```

运算符的`@>`意思是“它包含”。搜索使用的是全文优化，所以成本不是那么高。您可以在这里获取更多信息：

[http://www.postgresql.org/docs/9.4/static/datatype-json.html](http://www.postgresql.org/docs/9.4/static/datatype-json.html)

否则我做了一个gem，它**仍然不成熟**，但它允许将所有i18n的数据库放在同一个表中：[https ://github.com/anykeyh/rails_db_localize](https://github.com/anykeyh/rails_db_localize)

这里的优点是您可以轻松构建翻译界面，并且它完全覆盖您的项目（当您想要翻译字段时无需更新架构）。

在我看来，翻译总是很痛苦，永远不要低估:)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:46:18.203

您可能希望对依赖于语言环境的数据使用序列化属性，并将标题（或任何内容）定义为哈希：

```
class Project
  serialize :title, Hash
...

p.title[:pt] = "title in pt" 
```

问题是您将无法对文本值进行 SQL 搜索。如果要按名称搜索项目，只需将依赖于语言环境的属性提取到另一个表中：

```
class Project
  has_many :titles
end

class Title
  belongs_to :project
  belongs_to :locale # or just put there a string attribute
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:52:47.173

我会创建另一个表。主表将仅保留文本键。第二个表将保留带有字段键和本地化键的本地化文本。当然文本键+本地化键应该是唯一的。

您将选择一种语言作为主要语言。因此，例如英文文本将是另一个的关键。

希望能帮助到你..

# macos - 在 Mac 上，除了 /etc/hosts 之外，还可以在哪些文件中设置主机？

> ID：10994839
> 
> 赞同：0
> 
> 时间：2012-06-12T10:31:27.760
> 
> 标签：macos, localhost, ip-address, hosts

我有一个烦人的问题，一个特定的 URL 一直在本地指向 127.0.0.1，无论我是否让它在我的 /etc/hosts 文件中引用不同的 IP 地址。我曾经使用防毒面具，但发现它有问题并将其移除 - 希望它会自行清理。

在访问主机文件之前，是否还有其他文件可以获取任何 IP 重定向？或者有没有一种方法可以让我遵循 URL 请求的确切路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:36:35.290

[这不是一个编程问题，如果您询问在http://serverfault.com](http://serverfault.com)上闲逛的超级用户和系统管理员，您可能会得到更好的答案，但是有足够多的人进行指向“localhost”的编程，这可能是值得的在这里回答。

除了编辑 hosts 文件，您还必须刷新 dnscache。EG 类型“ `dscacheutil -flushcache`”。

[更多说明可以在这里找到](http://decoding.wordpress.com/2009/04/06/how-to-edit-the-hosts-file-in-mac-os-x-leopard/)。

您还需要重新启动“ `mDNSResponder`”进程。[可以在这个相关问题中找到详细信息](https://stackoverflow.com/questions/6841421/mac-osx-lion-dns-lookup-order)

# android - 谷歌地图和列表在一项活动中

> ID：10994842
> 
> 赞同：2
> 
> 时间：2012-06-12T10:31:41.463
> 
> 标签：android, listview, android-activity, maps

我正在尝试将 Google Maps View 和 ListView 放入一项活动中。MapsView 占左侧屏幕的 2/3，右侧的列表占 1/3（横向）。

[http://i.stack.imgur.com/LA3XN.png](http://i.stack.imgur.com/LA3XN.png)

MapsView 和 ListView 都将收到相同的 JSON 信息，它们将获得 onCreate()。我已经能够在屏幕的 2/3 上放置 MapsView，但 ListView 不会接收任何数据。有人可以告诉我，当超类不是 ListActivity 时，如何正确处理 ListView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:10:25.647

您必须为列表视图创建和设置列表适配器。因此，您不仅可以在列表活动中调用 setAdaptor()，还可以从布局中获取 List 视图的实例

```
ListView l = (ListView)findViewById(R.id.myListView); 
```

并设置它的适配器。

```
l.setAdaptor(adaptor); 
```

# php - 处理来自查询/多个查询的多个结果时的最佳实践？

> ID：10994846
> 
> 赞同：1
> 
> 时间：2012-06-12T10:31:45.730
> 
> 标签：php, mysql, oop

这是我第一次制作一个有许多用户访问它的 PHP 应用程序，所以我以前不必担心加载速度，现在我这样做了。

这些是我想到的方法，但它们似乎都有点“hack-ish”，我相信有更好的方法。

对于索引页，我可以这样：

```
<h1><?php $job->getTitle($id); ?></h1>
<p><?php $job->getDescription($id); ?></p>
<p><?php $job->getSomethingElse($id); ?></p> 
```

类为：

```
function getTitle($id) {
    $query = "SELECT title FROM table WHERE id = $id";
    $result = $db->query($query);

    $row = $result->fetch_array(MYSQLI_ASSOC);
    echo $row['title'];
}

function getDescription($id) {
    $query = "SELECT description FROM table WHERE id = $id";
    $result = $db->query($query);

    $row = $result->fetch_array(MYSQLI_ASSOC);
    echo $row['description'];
} 
```

ETC...

或者我可以有一个函数，将所有结果调用到一个数组中。将它们存储为字符串并在需要时将它们分解。

我的另一个想法与上面类似，除了我在课堂上做所有事情并回显 html。

就速度而言，输出我想要的东西的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:36:41.983

我认为它最好执行一次查询..所以获取你想要的所有细节并在你想要的时候使用它

```
 function getDetails($id){
     $query = "SELECT title,description FROM table WHERE id = $id";
     $result = $db->query($query);

     return $result->fetch_array(MYSQLI_ASSOC);

 } 
```

你可以像这样使用

```
 <?php  $details = $job->getDetails($id); ?>
 <h1><?php echo $details['title']; ?></h1>
 <p><?php echo $details['description']; ?></p> 
```

我不知道更多关于这个......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T10:37:41.953

为每个属性创建一个 getter 和 setter，运行 1 个查询，设置所有变量并使用 getter 获取实际值。

像这样的东西应该工作：

```
 private $name;
    private $street;
    private $number;

    public function setName($name)
    {
        $this->name = $name;
    }

    public function getName()
    {
        return $this->name;
    }

    public function setNumber($number)
    {
        $this->number = $number;
    }

    public function getNumber()
    {
        return $this->number;
    }

    public function setStreet($street)
    {
        $this->street = $street;
    }

    public function getStreet()
    {
        return $this->street;
    }

    public function getUser()
    {
        $query = "SELECT * FROM users WHERE x = y";

        $this->setName($result['name']);
        $this->setStreet($result['street']);
        $this->setName($result['number']);

    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T10:40:55.723

Jee，你听说过 MVC（模型-视图-控制器）设计模式吗？

虽然我不希望您重写整个应用程序，但您仍然可以习惯使用模型...通过这种（以非常简单的方式）方式您创建一个`class Model`具有`__construct($id)`查询数据库以加载所有必要数据的方法并将它们存储在私有/公共/受保护（无论什么让您感觉良好）属性中。

然后你`getXYZ()`在那个只返回它的属性值的模型上调用这些方法......

像这样：

类文章 { 私人 $title; 私人$描述；私人 $somethingElse;

```
 public function __construct($id) {
        $query = "SELECT title, description, somethingElse FROM table WHERE id = $id";
        $result = $db->query($query);

        $row = $result->fetch_array(MYSQLI_ASSOC);
        $this->title = $row['title'];
        $this->description = $row['description'];
        $this->somethingElse = $row['somethingElse'];
    }

    public function getTitle() {
        return $this->title;
    }

    public function getDescription() {
        return $this->description;
    }

    public function getSomethingElse() {
        return $this->somethingElse;
    } 
```

就是这样...只需一个查询即可检索所有数据...

如果您还想编辑此模型，您还可以创建一个`setXYZ($value)`将设置的方法`$this->XYZ = $value;`和一个`save()`将更新数据库中这个非常具体的行的方法...

这些方法（get 和 set）被称为 getter 和 setter...

# android - 安卓usb枚举

> ID：10994848
> 
> 赞同：5
> 
> 时间：2012-06-12T10:32:00.847
> 
> 标签：android, permissions, usb, broadcastreceiver, android-pendingintent

我正在编写一个 android USB 主机应用程序，我正在尝试枚举与平板电脑连接的设备。我遵循开发人员站点中的 android USB 主机文档中的代码。

我的代码如下

**AndroidUSBActivity**

```
public class AndroidUSBActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    USBClass usb = new USBClass();
    ArrayList<String> deviceList = usb.GetUSBDevices(getBaseContext());
    final CharSequence[] items = deviceList.toArray(new CharSequence[deviceList.size()]);

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Select a Reader");
    builder.setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) {
            String selectedDevice = (String) items[item];
            dialog.dismiss();

            TextView DeivceName = (TextView)findViewById(R.id.textView1);
            DeivceName.setText(selectedDevice);
        }
    });
    AlertDialog alert = builder.create();
    alert.show();
}
} 
```

**USB类**

```
public class USBClass {

private static UsbManager mManager = null;
private static HashMap<String, UsbDevice> mdevices;
private static PendingIntent mPermissionIntent;
private static final String ACTION_USB_PERMISSION =
        "com.android.example.USB_PERMISSION";
private final BroadcastReceiver mUsbReceiver = new BroadcastReceiver() {

    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (ACTION_USB_PERMISSION.equals(action)) {
            synchronized (this) {
                UsbDevice device = (UsbDevice)intent.getParcelableExtra(UsbManager.EXTRA_DEVICE);
                if (intent.getBooleanExtra(UsbManager.EXTRA_PERMISSION_GRANTED, false)) {
                    if(device != null){
                        //call method to set up device communication 
                        Log.i("usb", "permission granted for device " + device);
                    }
                } 
                else {
                    Log.i("usb", "permission denied for device " + device);
                }
            }
        }
    }
};   

public ArrayList<String> GetUSBDevices(Context context){
    mManager = (UsbManager) context.getSystemService(Context.USB_SERVICE);
    mdevices = new HashMap<String, UsbDevice>();
    ArrayList<String> deviceList = new ArrayList<String>();
    mPermissionIntent = PendingIntent.getBroadcast(context, 0, new Intent("com.android.example.USB_PERMISSION"), 0);
    IntentFilter filter = new IntentFilter(ACTION_USB_PERMISSION);
    context.registerReceiver(mUsbReceiver, filter);

    // check for existing devices
    for (UsbDevice device :  mManager.getDeviceList().values()) {
        String deviceName = null;
        UsbDeviceConnection connection = null;
        if(device.getVendorId() == 0x0123){
            mManager.requestPermission(device, mPermissionIntent);
            connection = mManager.openDevice(device);
            byte rawBuf[] = new byte[255];
            int len = connection.controlTransfer(0x80, 0x06, 0x0302, 0x0409, rawBuf, 0x00FF, 60);
            rawBuf = Arrays.copyOfRange(rawBuf, 2, len);
            deviceName = new String(rawBuf);
            deviceList.add(deviceName);
            mdevices.put(deviceName, device);
        }

     }
    context.unregisterReceiver(mUsbReceiver);
    return deviceList;
}
} 
```

**LOGCAT**

```
06-13 10:13:54.556: D/dalvikvm(2219): Late-enabling CheckJNI
06-13 10:13:54.586: I/System.out(2219): Sending WAIT chunk
06-13 10:13:54.586: W/ActivityThread(2219): Application bri.sample is waiting for the debugger on port 8100...
06-13 10:13:54.596: I/dalvikvm(2219): Debugger is active
06-13 10:13:54.786: I/System.out(2219): Debugger has connected
06-13 10:13:54.786: I/System.out(2219): waiting for debugger to settle...
06-13 10:13:54.986: I/System.out(2219): waiting for debugger to settle...
06-13 10:13:55.186: I/System.out(2219): waiting for debugger to settle...
06-13 10:13:55.406: I/System.out(2219): waiting for debugger to settle...
06-13 10:13:55.596: I/System.out(2219): waiting for debugger to settle...
06-13 10:13:55.796: I/System.out(2219): waiting for debugger to settle...
06-13 10:13:55.996: I/System.out(2219): waiting for debugger to settle...
06-13 10:13:56.206: I/System.out(2219): waiting for debugger to settle...
06-13 10:13:56.406: I/System.out(2219): waiting for debugger to settle...
06-13 10:13:56.645: I/System.out(2219): waiting for debugger to settle...
06-13 10:13:56.846: I/System.out(2219): debugger has settled (1337)
06-13 10:13:57.116: E/UsbManager(2219): exception in UsbManager.openDevice
06-13 10:13:57.116: E/UsbManager(2219): java.lang.SecurityException: User has not given  permission to device   UsbDevice[mName=/dev/bus/usb/001/004,mVendorId=1254,mProductId=20758,mClass=0,mSubclass=0,mProtocol=0,mInterfaces=[Landroid.hardware.usb.UsbInterface;@41679100]
06-13 10:13:57.116: E/UsbManager(2219):     at android.os.Parcel.readException(Parcel.java:1327)
06-13 10:13:57.116: E/UsbManager(2219):     at android.os.Parcel.readException(Parcel.java:1281)
06-13 10:13:57.116: E/UsbManager(2219):     at android.hardware.usb.IUsbManager$Stub$Proxy.openDevice(IUsbManager.java:340)
06-13 10:13:57.116: E/UsbManager(2219):     at android.hardware.usb.UsbManager.openDevice(UsbManager.java:250)
06-13 10:13:57.116: E/UsbManager(2219):     at  bri.sample.USBClass.GetUSBDevices(USBClass.java:66)
06-13 10:13:57.116: E/UsbManager(2219):     at bri.sample.AndroidUSBActivity.onCreate(AndroidUSBActivity.java:19)
06-13 10:13:57.116: E/UsbManager(2219):     at android.app.Activity.performCreate(Activity.java:4465)
06-13 10:13:57.116: E/UsbManager(2219):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-13 10:13:57.116: E/UsbManager(2219):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-13 10:13:57.116: E/UsbManager(2219):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-13 10:13:57.116: E/UsbManager(2219):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-13 10:13:57.116: E/UsbManager(2219):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-13 10:13:57.116: E/UsbManager(2219):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-13 10:13:57.116: E/UsbManager(2219):     at android.os.Looper.loop(Looper.java:137)
06-13 10:13:57.116: E/UsbManager(2219):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-13 10:13:57.116: E/UsbManager(2219):     at java.lang.reflect.Method.invokeNative(Native Method)
06-13 10:13:57.116: E/UsbManager(2219):     at java.lang.reflect.Method.invoke(Method.java:511)
06-13 10:13:57.116: E/UsbManager(2219):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-13 10:13:57.116: E/UsbManager(2219):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-13 10:13:57.116: E/UsbManager(2219):     at dalvik.system.NativeStart.main(Native Method)
06-13 10:13:57.566: D/dalvikvm(2219): threadid=1: still suspended after undo (sc=1 dc=1)
06-13 10:14:04.266: D/AndroidRuntime(2219): Shutting down VM
06-13 10:14:04.266: W/dalvikvm(2219): threadid=1: thread exiting with uncaught exception (group=0x40a531f8)
06-13 10:14:04.296: E/AndroidRuntime(2219): FATAL EXCEPTION: main
06-13 10:14:04.296: E/AndroidRuntime(2219): java.lang.RuntimeException: Unable to start activity ComponentInfo{bri.sample/bri.sample.AndroidUSBActivity}: java.lang.NullPointerException
06-13 10:14:04.296: E/AndroidRuntime(2219):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-13 10:14:04.296: E/AndroidRuntime(2219):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-13 10:14:04.296: E/AndroidRuntime(2219):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-13 10:14:04.296: E/AndroidRuntime(2219):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-13 10:14:04.296: E/AndroidRuntime(2219):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-13 10:14:04.296: E/AndroidRuntime(2219):     at android.os.Looper.loop(Looper.java:137)
06-13 10:14:04.296: E/AndroidRuntime(2219):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-13 10:14:04.296: E/AndroidRuntime(2219):     at java.lang.reflect.Method.invokeNative(Native Method)
06-13 10:14:04.296: E/AndroidRuntime(2219):     at java.lang.reflect.Method.invoke(Method.java:511)
06-13 10:14:04.296: E/AndroidRuntime(2219):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-13 10:14:04.296: E/AndroidRuntime(2219):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-13 10:14:04.296: E/AndroidRuntime(2219):     at dalvik.system.NativeStart.main(Native Method)
06-13 10:14:04.296: E/AndroidRuntime(2219): Caused by: java.lang.NullPointerException
06-13 10:14:04.296: E/AndroidRuntime(2219):     at bri.sample.USBClass.GetUSBDevices(USBClass.java:68)
06-13 10:14:04.296: E/AndroidRuntime(2219):     at bri.sample.AndroidUSBActivity.onCreate(AndroidUSBActivity.java:19)
06-13 10:14:04.296: E/AndroidRuntime(2219):     at android.app.Activity.performCreate(Activity.java:4465)
06-13 10:14:04.296: E/AndroidRuntime(2219):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-13 10:14:04.296: E/AndroidRuntime(2219):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-13 10:14:04.296: E/AndroidRuntime(2219):     ... 11 more 
```

**问题**

我已插入设备，然后安装应用程序。应用程序第**一次**启动时，它会崩溃。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-13T18:09:17.543

当您尝试使用以下方式访问设备时会发生崩溃

```
connection = mManager.openDevice(device); 
```

它崩溃是因为它正在抛出 a `SecurityException`，因为您尚未获得用户使用该设备的许可。看起来您试图在此之前的行中获得用户的许可

```
mManager.requestPermission(device, mPermissionIntent); 
```

但是您需要了解调用`requestPermission()`是异步的。它不会在获得许可的情况下立即返回。它的作用是向用户显示一个对话框并询问用户他是否会授予您的应用程序的权限。一旦用户授予或拒绝权限，对话框就会被关闭，并且`PendingIntent`您传递给`requestPermission()`的 用于广播指示权限已授予（或未授予）的 Intent。您需要在已注册的情况下收听此内容，`BroadcastReceiver`并且在调用该`onReceive()`方法时，您可以检查收到的附加内容`Intent`并决定如何继续。只有当用户授予您权限时，您才能继续调用`openDevice()`。

这听起来有点复杂，但这就是它的工作方式。

基本上，你需要打电话

```
mManager.requestPermission(device, mPermissionIntent); 
```

然后等到获得许可后再尝试访问设备。

# iphone - UITabbar 控制器

> ID：10994855
> 
> 赞同：2
> 
> 时间：2012-06-12T10:32:32.627
> 
> 标签：iphone, objective-c, uitabbarcontroller

在我的应用程序中，我使用带有 5 个标签的标签栏控制器，在 3 个标签中，当单击一个按钮时，它会调用一个视图控制器。我对这 3 个选项卡使用相同的视图控制器，因此在不同选项卡中调用相同视图时遇到问题，因此在更改选项卡时我不想调用 ViewWillAppear 方法。那我有什么办法？或者如何找到标签栏控制器以前选择的索引？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:49:18.857

我想你对 iOS 开发并不熟悉。

1.  在 TabbarController 中，我们可以指定尽可能多的 UIViewcontroller/UINavigationController 对象。
2.  如果我们需要重用 UIViewcontroller，您需要使用属性对象标记视图控制器。
3.  您需要为不同的选项卡使用不同的 UIViewController 实例。
4.  在显示 UIViewController 时，它的 viewWillAppear 被解雇了。我们无法删除此行为。但在大多数情况下，我们可以使用 viewDidLoad 处理这种情况（视图控制器实例调用一次）。
5.  如果我们需要跟踪之前选择的选项卡项，我们需要通过使用共享类或静态变量来解决我们自己的问题。

谢谢，

纳文山

# objective-c - Objective C - 解析 NSData

> ID：10994861
> 
> 赞同：2
> 
> 时间：2012-06-12T10:32:53.123
> 
> 标签：objective-c, parsing, nsdata

我在 NSData 对象中有以下数据：

<00000000 6f2d840e 31504159 2e535953 2e444446 3031a51b 8801015f 2d02656e 9f110101 bf0c0cc5 0affff3f 00000003 ffff03>

我在解析这些数据时遇到问题。此数据包含由标签标记的信息

标签 1 是从字节值 0x84 到 0xa5

标签 2 是从字节值 0xa5 到 0x88

标签 3 是从字节值 0x88 到 0x5f0x2d

标签 4 从字节值 0x5f0x2d 到 0x9f0x11

我将如何从 NSData 对象中获取这些值？

问候， EZFrag

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:39:00.880

用于`-[NSData bytes]`获取指向内容的指针。然后使用指针算法遍历字节，直到找到您要查找的内容。由于您想逐字节进行，因此您可能应该将返回的指针转换为`bytes`to `uint8_t*`。然后，`pointer[0]`指向第一个字节，`pointer[1]`指向第二个字节，依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:05:00.963

我管理了一个很好的解决方案，决定实际使用灰质

```
-(int)getIndexOfSubDataInData:(NSData*)haystack forData:(NSData*)needle{
    int dataCounter = 0;
    NSRange dataRange = NSMakeRange(dataCounter, [needle length]);
    NSData* compareData = [haystack subdataWithRange:dataRange];

    while (![compareData isEqualToData:needle]) {

        dataCounter++;
        dataRange = NSMakeRange(dataCounter, [needle length]);
        compareData = [haystack subdataWithRange:dataRange];
    }

    return dataCounter;
}

-(NSData*)getSubDataInData:(NSData*)targetData fromTag:(NSData*)fromTag toTag:(NSData*)toTag{

    int startIndex = [self getIndexOfSubDataInData:targetData forData:fromTag] + [fromTag length];
    int endIndex = [self getIndexOfSubDataInData:targetData forData:toTag];
    int dataLength = endIndex - startIndex;

    NSRange dataRange = NSMakeRange(startIndex, dataLength);

    return [targetData subdataWithRange:dataRange];
}

//here is how I use the code
 NSData* langTagStart=[[NSData alloc] initWithBytes:"\x5F\x2D" length:2];
    NSData* langTagEnd=[[NSData alloc] initWithBytes:"\x9F\x11" length:2];

    NSData* languageData = [self getSubDataInData:[response bytes] fromTag:langTagStart toTag:langTagEnd]; 
```

感谢您的建议。

问候， EZFrag

# eclipse - Tomcat 和 Eclipse：图像文件和 css 文件空白

> ID：10994862
> 
> 赞同：2
> 
> 时间：2012-06-12T10:33:03.483
> 
> 标签：eclipse, jakarta-ee, tomcat

我正在 Eclipse 中开发一个 Java EE 项目，并将其部署在 Apache Tomcat 上。（在 Eclipse 中，我右键单击该项目，然后“运行为”->“在服务器上运行”。）

然而，由于某种原因（我猜是 Eclipse 配置错误），浏览器无法找到任何 JavaScript 或 CSS 文件。例如，网页有以下代码：

```
<link rel="stylesheet" style="text/css" type="text/css" href="generated-res/css/main.css">
<script src="generated-res/scripts/all.js" type="text/javascript" ></script> 
```

但是，在 Firefox 源视图中单击它们只会打开一个空白页面。我的 Eclipse 项目有一个 WebContent 目录，其中包含 generate-res 目录等。[我在http://imagepaste.nullnetwork.net/viewimage.php?id=4185](http://imagepaste.nullnetwork.net/viewimage.php?id=4185)上传了一张图片（关于 Eclipse Web Deployment Assembly）。谁能发现导致此问题的原因？

我有包含 Apache Tomcat v6.0 的 Eclipse“Indigo Service Release 2”。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:16:15.530

这似乎是 molgenis 特有的问题。在 molgenis.properties 文件中，您应该添加负责交付文件的服务（这是在单独的服务中完成的，以允许应用程序级别的安全规则）。您需要的服务是“core.servlets.FileService”

在您的 molgenis.properties 中，一组典型的服务如下所示：

```
services = app.servlet.GuiService@/molgenis.do,\
    org.molgenis.framework.server.services.MolgenisXrefService@/xref,\
    org.molgenis.auth.service.MolgenisCaptchaService@/captchaImg,\
    org.molgenis.framework.server.services.MolgenisTmpFileService@/tmpfile,\
    core.servlets.FileService@/ 
```

这包括： - 用户界面 - 基于 Ajax 的查找服务 - 新注册的验证码服务 - tmp 文件 - WebContent 中的文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:02:11.453

从您的查询看来，您的意思是您正在使用开源 molgenes 项目，所以我认为询问他们是一个不错的选择。

但是，作为一个简短的外观，我会说 css 是作为 /css/main.css 生成的，因此要测试尝试以下地址：

本地主机：8080/molgenis_apps/css/main.css

# ios - IOS - 第 5 和第 6 个 tabBar 选项

> ID：10994864
> 
> 赞同：0
> 
> 时间：2012-06-12T10:33:08.180
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller

在我的 tabBar 应用程序中，我在视图顶部有一个导航栏。但是，我有超过 4 个 tabBars，因此出现了可以选择其他选项卡的 TableView。

如果最终用户决定更改订单，是否有隐藏前 4 个视图的导航？

我有点像这样想，但是这段代码中的 if 语句是不正确的。

```
 if([[self.tabBarController viewControllers] objectAtIndex:5])
{
    [_navBar setHidden:YES];
}
else {
    [_navBar setHidden:NO];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:00:46.970

您应该在自定义对象中实现 UITabBarControllerDelegate 协议的 –tabBarController:didEndCustomizingViewControllers:changed: 方法，并将其设置为 UITabBarController 的委托。在这里阅读：http: [//developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITabBarControllerDelegate](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITabBarControllerDelegate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:42:22.197

更改 TabBar 中视图的顺序后，您应该像这样隐藏导航栏

```
[self.tabBarController.viewControllers 
   enumerateObjectsUsingBlock:^(id obj, NSUInteger index, BOOL *stop)
{
    if (index < 4)
    {
       UIViewController *vc = (UIViewController *)obj;
       [vc.navigationController setNavigationBarHidden:YES];
    }

}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:39:10.017

如果您担心用户重新排序您的选项卡，您可能会考虑的另一个选择是创建一个自定义的 MoreViewController（并且没有重新排序）。请参阅[此](https://stackoverflow.com/a/9840273/741626)SO 答案。

# naming-conventions - “非阻塞与后台同步”的简称？

> ID：10994865
> 
> 赞同：1
> 
> 时间：2012-06-12T10:33:10.863
> 
> 标签：naming-conventions, naming

对于用户操作是非阻塞且状态在后台同步的概念，一个简短的人名（以便支持人员可以拼写）是什么？

在我的情况下，我将一些客户标记为具有非常糟糕的网络，从而迫使他们进入这种操作模式。

正常的操作模式是在线、同步、阻塞、实时、软实时并忽略缓存数据。

现代“离线 html5”应用程序这样做，ajax 这样做，unix AIO 这样做，但它叫什么？

到目前为止的候选人

*   异步（拼写）
*   非阻塞
*   离线（不清楚）
*   批处理（不正确）
*   网络挑战（）
*   缓存（托马斯）
*   延迟
*   ...
*   ...
*   ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:43:26.967

我不是技术诗人，但我的第一个想法也是“异步”。

但是，它不适合无辜者，所以我的第二个想法是围绕词干“缓存”。

所以，我会尝试：

*   本地缓存
*   离线缓存

或者，反名：“同步”（我们技术人员很快将其理解为“阻塞”，而简单、诚实的约翰不知道为什么同步化应该阻塞）。

所以“同步”或“本地同步”。

不幸的是，这完全是口味问题。更重要的是一句话解释，支持人员/gal应该给客户......

编辑：“本地同步”又是我们给出的那种名称，普通人无法理解。例如，它可以是“同步远程”。

你可能想知道，相反的应该是什么？即快速网络的同步模式？好吧，我将其称为“在线模式”或其他一些名称，暗示人们*应该*“在线”才能使用它；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:34:40.580

**“无需签名交付”？**（哦...，这有点长。）

# javascript - 修复了标题导航和 scrollTo() 下一个/上一个元素

> ID：10994871
> 
> 赞同：0
> 
> 时间：2012-06-12T10:33:37.913
> 
> 标签：javascript, jquery

首先，我使用此代码使导航栏始终保持固定；

添加CSS绝对位置后：

```
var yOffset = $("#header").offset().top;
$(window).scroll(function() {
    if ($(window).scrollTop() > yOffset) {
        $("#header").css({
            'top': 0,
            'position': 'fixed'
        });
    } else {
        $("#header").css({
            'top': yOffset + 'px',
            'position': 'absolute'
        });
    }
}); 
```

但是现在我用于滚动到下一个元素的下一个/上一个关键事件没有捕捉到正确的元素位置。

这是我浏览下一个/上一个元素的代码。

```
// scroll to next post
function scrollToNew () {
  scrollTop = $(window).scrollTop();
  $('.post').each(function(i, h1){
    h1top = $(h1).offset().top;
    if (scrollTop < h1top) {
      $.scrollTo(h1);
      return false;
    }
  });
}

// scroll to previous post
function scrollToLast () {
  scrollTop = $(window).scrollTop();
  var scrollToThis = null;
  $('.post').each(function(i, h1) {
    h1top = $(h1).offset().top;
    if (scrollTop > h1top) {
      scrollToThis = h1;
    } else {
      return false;
    }
  });
  if(scrollToThis != null) {
    $.scrollTo(scrollToThis);
  }
} 
```

我只是在按下键时触发 scrollToNew 并且它一直在工作，直到我进行固定导航（#header），因为它始终保持在顶部，因此用户滚动到的帖子标题变得不可见。我不知道如何解决这个问题。

任何建议真的很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:28:12.787

这是修复。

我将导航标题的高度添加到偏移量中。确切地说是 61 像素。问题解决了。

```
// scroll to next post
function scrollToNew () {
  scrollTop = $(window).scrollTop();
  $('.post').each(function(i, h1){
    h1top = $(h1).offset().top;
    if (scrollTop < h1top - 61) {
      $.scrollTo(h1, {offset: {left: 0, top: -61}});
      return false;
    }
  });
}

// scroll to previous post
function scrollToLast () {
  scrollTop = $(window).scrollTop();
  var scrollToThis = null;
  $('.post').each(function(i, h1) {
    h1top = $(h1).offset().top;
    if (scrollTop > h1top - 61) {
      scrollToThis = h1;
    } else {
      return false;
    }
  });
  if(scrollToThis != null) {
    $.scrollTo(scrollToThis, {offset: {left: 0, top: -61}});
  }
} 
```

# c# - ToDictionary 中的 Lambda 表达式

> ID：10994872
> 
> 赞同：0
> 
> 时间：2012-06-12T10:33:38.507
> 
> 标签：c#, list, dictionary

要将列表转换为字典，我们可以使用以下方法轻松完成：

```
list.ToDictionary(v=> v, v=>true); 
```

对于 中的第一个参数`ToDictionary`，我可以理解为第一个参数是字典的元素。但这是什么意思`v=> true`？

第二个参数应该是类型`IEqualityComparer`。这是为了什么目的？怎么`v=> true`一样`IEqualityComparer`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:37:16.893

[这](http://msdn.microsoft.com/en-us/library/bb548657.aspx)是使用的方法。

第二个参数 (v => true) 是**elementSelector**（*从每个元素生成结果元素值的转换函数*）。

一个包含元素的列表`1`，`2`并且`3`会产生一个具有以下映射的字典（所有值都是`true`）：

```
1: true
2: true
3: true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:38:14.557

当您的列表具有 [1,2,3,4] 并且您将其转换为字典时，`list.ToDictionary(v=> v, v=>true);`您的字典具有此值

```
[1,true]
[2,true]
[3,true]
[4,true]. 
```

第一个值是键，第二个是值

编辑：

正如@dkson 所说，第二个参数是**elementSelector**。当您转到 4 个条目中的第 3 个时，您可以在智能感知中看到这一点 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T10:39:09.440

你看看[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.todictionary.aspx)。这是采用第二个`IEqualityComparer`参数的重载：

```
ToDictionary<TSource, TKey>(IEnumerable<TSource>, Func<TSource, TKey>, IEqualityComparer<TKey>) 
```

但是，在您的示例中，您使用的`Func<TSource, TElement>`是负责生成字典*值的重载：*

```
ToDictionary<TSource, TKey, TElement>(IEnumerable<TSource>, Func<TSource, TKey>, Func<TSource, TElement>) 
```

（在您的情况下，所有值都是简单的`true`）

# c# - C# Regex.匹配十进制

> ID：10994876
> 
> 赞同：0
> 
> 时间：2012-06-12T10:33:55.153
> 
> 标签：c#, regex, decimal

我有一个字符串“-4.00 %”，我需要将其转换为小数，以便我可以将其声明为变量并稍后使用。字符串本身位于 string[] 行中。我的代码如下：

```
foreach (string[] row in rows)
{
string row1 = row[0].ToString();
Match rownum = Regex.Match(row1.ToString(), @"\-?\d+\.+?\d+[^%]");
string act = Convert.ToString(rownum); //wouldn't convert match to decimal
decimal actual = Convert.ToDecimal(act);
textBox1.Text = (actual.ToString());
} 
```

这将导致“输入字符串的格式不正确”。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:40:41.543

我看到这里发生的两件事可能会有所帮助。

您将正则表达式匹配视为您希望它是一个字符串，但匹配检索的是一个 MatchGroup。

而不是转换`rownum`为字符串，您需要查看`rownum.Groups[0]`.

其次，您没有要捕获的带括号的匹配项。`@"(\-?\d+\.+?\d+)%"`将从整个批次中创建一个捕获组。这可能无关紧要，我不知道 C# 在这种情况下究竟是如何表现的，但是如果你开始扩展你的正则表达式，你会想要使用带括号的捕获组，所以你可以开始你想继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T10:43:00.577

这是您的代码的修改版本，它将正则表达式更改为使用捕获组并显式查找`%`. 因此，这也简化了对十进制的解析（不再需要中间字符串）：

**编辑：** *根据执行人在评论中的建议进行**检查`rownum.Success`*

```
string[] rows = new [] {"abc -4.01%", "def 6.45%", "monkey" };

foreach (string row in rows)
{
    //regex captures number but not %
    Match rownum = Regex.Match(row.ToString(), @"(\-?\d+\.+?\d+)%");

    //check for match
    if(!rownum.Success) continue;

    //get value of first (and only) capture
    string capture = rownum.Groups[1].Value;

    //convert to decimal
    decimal actual = decimal.Parse(capture);

    //TODO: do something with actual
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T10:39:28.457

如果您打算使用`Match`该类来处理此问题，那么您必须访问该`Match.Groups`属性以获取匹配的集合。此类假定出现不止一次。如果你能保证你总是得到 1 并且只有 1 你可以得到它：

```
string act = rownum.Groups[0]; 
```

否则，您需要像[MSDN 文档](http://msdn.microsoft.com/en-us/library/twcw2f1c.aspx)中那样解析它。

# jquery - 带有可排序选项的 jQuery 表单构建器

> ID：10994877
> 
> 赞同：2
> 
> 时间：2012-06-12T10:33:55.540
> 
> 标签：jquery, html, css, forms, jquery-ui-sortable

我正在尝试使用 jQuery 构建一个调查创建者模块，该模块构建各种类型的问题。从一个包含一个问题和几个选项的多项选择问题开始。我已经编写了以下代码。

```
$(function () {
    $("#sortable").sortable({

    });
});
$('#sortable3').sortable({
    //helper: 'clone',
    //placeholder: 'ui-state-highlight',
    //opacity: '.5',
    start: function (event, ui) {
        $(ui.item).show();
    }
});

(function () {
    $("#txt").live('click', function () {

        var $ctrl = $('<input type="text" name="inputtext" value="Enter Your Questions Here..."> <br /> <label>Required.? </label> <input type="checkbox" value="required"> <br /><input type="text" name="inputtext" value="Enter Notes Here..."> <br />').addClass("text");
        $("#holder").append($ctrl);

        var $options = $('<ul id="sortable3"><li>Item 1</li><li>Item 2</li><li>Item 3</li><li>Item 4</li><li>Item 5</li></ul>');

        $("#holder").append($options);
    });

})();

(function () {
    var i = 3;
    //var num = i++;
    $(".addChoices").live('click', function () {
        var $opt = $('<div id="div' + ++i + '" ><input type="text" name="inputtext" value="choice ' + i + ' " id="txt" + i++ +>  <span class="addChoices"> + </span>&nbsp; &nbsp; &nbsp; <span class="removeChoices" id="' + i + '"> - </span> </div>');
        $("#options").append($opt);

        //alert("Add");
    });

})();
(function () {
    $(".removeChoices").live('click', function () {
        alert("Getting Id " + $(this).attr('id'));
        var $idRem = $(this).attr('id');
        var div = $(this).attr('id');
        //alert("div"+div);
        var divId = "div" + div;
        $("#" + divId).remove();
    });

})(); 
```

HTML

```
<div style="display:inline">
  <input type="button" id="txt" value="Add Text Box" style= " " />
</div>
<div id="holder"> </div>
<div id="options"> </div> 
```

现在，当我单击一个按钮时，它会添加问题和一些选项。我可以添加或删除选项。现在我想让选项可排序，以便用户可以按照他希望它出现的顺序排列它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:22:07.470

有可用于此类事物的插件：

[http://jqueryui.com/demos/sortable/](http://jqueryui.com/demos/sortable/)
[http://farhadi.ir/projects/html5sortable/](http://farhadi.ir/projects/html5sortable/)

# jquery - 具有多个相同ID的jQuery中textarea的访问值？

> ID：10994878
> 
> 赞同：0
> 
> 时间：2012-06-12T10:33:56.683
> 
> 标签：jquery, function, html, jquery-mobile, textarea

我的页面中有多个 div 标签的“ **post** ”名称，我想做的是在提交点击时在服务器上发布数据。我无法在我的 jquery 方法**commentPost()中检索 textarea“** **commentText** ”的值。

 **```
<div id="post">
  <br>topic containtment is here
  <form name="postComment" id="commentForm" action="javascript:void(0);" method="post"    
   target="_top" onsubmit="return commentPost();">
    <textarea name="comment" id="commentText" cols="10" rows="3" accesskey="1">
    </textarea><br>
    <input type="submit" name="submit" id="commentpost" value="Submit" accesskey="2">
   </form>
</div> 
```

jQuery 方法

```
function commentPost()
{
    alert("Inside commentpost");
        //how to get value of commentText
    var comment=("form > commentText").val(); //<--not working
    alert(comment);
    //further code to be written
} 
```

注意：页面中有多个**div post**标签。

如何获得文本区域的价值。？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:35:49.020

[多个元素](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)具有相同的`ID`.

如果你解决了这个问题，那么你的 jQuery 问题将被间接解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:40:47.283

`id`必须能够识别页面上的*唯一*元素。

通常，您尝试做的事情可以通过使用来解决`class`：

```
<textarea name="comment" class="commentText" cols="10" rows="3" accesskey="1">
</textarea><br> 
```

然后，使用`$("form > .commentText")`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T11:00:18.943

如果您的文档中有一个值为“commentText”的 id，那么您的函数应如下所示：

```
function commentPost()
{
    alert("Inside commentpost");
        //how to get value of commentText
    var comment=("form > #commentText").val(); //<--not working
    alert(comment);
    //further code to be written
} 
```

如果您有更多带有此 ID 的标签，则您的标记无效，您应该在标记中将 id="commentText" 更改为 class ="commentText"。在这种情况下，您的函数应如下所示：

```
function commentPost()
{
    alert("Inside commentpost");
        //how to get value of commentText
    var comment=("form > .commentText").val(); //<--not working
    alert(comment);
    //further code to be written
} 
```

当这有效时，不要忘记从您的函数中删除警报。**

# c++ - __cplusplus 宏告诉 g++ C 标头声明不正常工作

> ID：10994882
> 
> 赞同：3
> 
> 时间：2012-06-12T10:34:13.470
> 
> 标签：c++, c, g++

我混合了 C C++ 代码。全部用 g++ 编译。无论我在哪里有 C 头文件，我都会在其中包含头文件的内容

```
#if defined(__cplusplus)
extern "C" {
#endif 
```

和

```
#if defined(__cplusplus)
    extern "C" {
    #endif 
```

但是在一个 C 头文件中，我遇到了 g++ 编译错误，我不小心将参数名称用作模板，这显然是不正确的，并且与 c++ 关键字**模板**冲突。

我知道我可以去更改这个参数名称，但我在想为什么这个`extern "C"`声明不起作用，为什么头文件被视为 C++ 代码而不是我想要的 C。

g++ 版本 4.1.1 Linux Red Hat Enterprise。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T10:36:02.840

`extern "C"`唯一告诉编译器~~（实际上是链接器）~~C++ 名称修改不适用于该范围内声明的函数。它与语法或关键字本身无关。

您最好的解决方案是重命名冲突的符号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T12:47:52.370

考虑：

```
extern "C" {
  namespace n
  {
    int& foo(bool b)
    {
      if (!b)
        throw std::invalid_argument("fail!");
      static int i = 0;
      return ++i;
    }
  }
} 
```

此函数具有 C 语言链接，但使用引用、命名空间和异常，我希望这`extern "C"`不会神奇地将编译器切换到编译 C，它只是告诉编译器使用 C 调用约定和函数的符号命名约定和具有 C 语言链接的变量（这通常意味着它禁用名称修饰并导致不同名称空间中的匹配声明引用同一实体。）

# css - Opera Mobile 不显示 jQuery Mobile 图标

> ID：10994889
> 
> 赞同：0
> 
> 时间：2012-06-12T10:34:45.823
> 
> 标签：css, jquery-mobile, opera-mobile

我在 Opera Mobile 浏览器中遇到问题，无法显示 jQuery 对话框图标。这是这样的：

![在此处输入图像描述](../Images/8b495ef13f7074fd5e7e2010d5fe9254.png)

如您所见，错误留下的图标，应该是关闭按钮（x）丢失，以及“确定”按钮中的图标。此外，背景中的“自动”按钮（屏幕截图的右下方）也没有图标。

知道这可能是什么问题，记住这只发生在 Opera 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:58:53.777

我也有 Opera Mobile 不呈现 Jquery Mobile 元素的问题 -

试试这个来测试...

```
 <a href="tel:02258588528" style="color:White;" data-role="button" data-icon="gear" data-theme="a">Call Now - 02258 588 528</a> 
```

这应该显示齿轮 - 如果那不起作用，那么我会说你有 CSS 和图像映射的问题。要解决这个问题，您应该从 Jquery Mobile 下载包中获取新的 CSS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:25:05.337

我找到了解决方案。当我下载 jQuery Mobile 文件时，我以为我只需要 js 和 css 文件，但结果发现有一个名为“Images”的文件夹，其中包含所有 jQuery Mobile 图标 :)

总结一下，不要只下载 js 和 css 文件，下载并部署整个 zip 文件！

# java - 能够通过套接字发送图像但不能发送文本文件

> ID：10994899
> 
> 赞同：0
> 
> 时间：2012-06-12T10:35:20.143
> 
> 标签：java, image, sockets, text

我的客户端可以正常将图像发送到服务器，但是当涉及到文本文件时，它们到达时是空的。任何想法我做错了什么？我真的很感激帮助，因为我已经尝试了很多天了。谢谢。

这是服务器代码：

```
class TheServer {

    public void setUp() throws IOException { // this method is called from Main class.
        ServerSocket serverSocket = new ServerSocket(1991);
        System.out.println("Server setup and listening...");
        Socket connection = serverSocket.accept();
        System.out.println("Client connect");
        System.out.println("Socket is closed = " + serverSocket.isClosed());

        BufferedReader rd = new BufferedReader(new InputStreamReader(connection.getInputStream()));

        String str = rd.readLine();
        System.out.println("Recieved: " + str);
        rd.close();

        InputStream is = connection.getInputStream();

        int bufferSize = connection.getReceiveBufferSize();

        FileOutputStream fos = new FileOutputStream("C:/" + str);
        BufferedOutputStream bos = new BufferedOutputStream(fos);

        byte[] bytes = new byte[bufferSize];

        int count;

        while ((count = is.read(bytes)) > 0) {
            bos.write(bytes, 0, count);
        }

        bos.flush();
        bos.close();
        is.close();
        connection.close();
        serverSocket.close();

    }
} 
```

这是客户端代码：

```
public class TheClient {

    public void send(File file) throws UnknownHostException, IOException { // this method is called from Main class.
        Socket socket = null;
        String host = "127.0.0.1";

        socket = new Socket(host, 1991);

        // Get the size of the file
        long length = file.length();
        if (length > Integer.MAX_VALUE) {
            System.out.println("File is too large.");
        }

        BufferedWriter wr = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
        wr.write(file.getName());
        wr.newLine();
        wr.flush();

        byte[] bytes = new byte[(int) length];
        FileInputStream fis = new FileInputStream(file);
        BufferedInputStream bis = new BufferedInputStream(fis);
        BufferedOutputStream out = new BufferedOutputStream(socket.getOutputStream());

        int count;

        while ((count = bis.read(bytes)) > 0) {
            out.write(bytes, 0, count);
        }

        out.flush();
        out.close();
        fis.close();
        bis.close();
        socket.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:48:26.630

1.  `BufferedReader`在读取所有数据之前，您过早地关闭了服务器端。这基本上关闭了连接。
2.  您不应使用`Reader`或`Writer`用于二进制图像数据等非字符流。并且您不应该`BufferedReader`与同一流的任何其他流包装器混合，因为它可能读取与填充缓冲区一样多的数据。

# android - 在 Android 上刷新选取框文本

> ID：10994900
> 
> 赞同：1
> 
> 时间：2012-06-12T10:35:20.360
> 
> 标签：android, textview, marquee

启动时，我的字幕文本正常工作。然后我想在某个时候更新文本。我在互联网上获取文本并将其设置为 textview：

```
marqueeText.setText(Html.fromHtml(GetNew.getNews())); 
```

从互联网获取文本没有问题。但随后文本没有滑动。这有什么问题？谢谢你的帮助。

编辑：我在尝试刷新它时得到这个日志。我在一个线程中刷新它。

```
06-12 10:25:04.403: E/tag(498): Only the original thread that created a view hierarchy can touch its views. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:56:13.737

您应该使用处理程序来处理 UI 线程。

```
private Handler handler = new Handler(new Callback() {

        public boolean handleMessage(Message msg) {
            marqueeText.setText(Html.fromHtml(GetNew.getNews()));
            marqueeText.setSelected(true);
            marqueeText.setEllipsize(TruncateAt.MARQUEE);
            return false;
        }
    }); 
```

当您想更新线程中的文本时，请使用`handler.sendEmptyMessage(0);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:51:00.727

我想你还没有添加活动

```
 marqueeText.setSelected(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:54:26.640

仅当 TextView 处于选中或聚焦状态时，TextView 上的选取框才会滚动

尝试`TextView.setEnabled(true) or TextView.requestFocus() or TextView.setSelected(true);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T10:55:42.897

您不能从 UI 线程以外的线程更新视图。

# mysql - 具有许多表的复杂查询，这可能在一个查询中实现吗？

> ID：10994902
> 
> 赞同：3
> 
> 时间：2012-06-12T10:35:34.027
> 
> 标签：mysql, sql

我在以下数据库设计方面遇到了麻烦（为示例进行了简化）。它允许人们创建自定义表单，与谷歌电子表格非常相似。表单生成脚本完成，包括将答案保存到数据库。我无法显示用户输入。

表格**表格**（每个表格在此表格中是一行）

```
form_id | form_name
1         Contact Form
2         BBQ sign up Form 
```

表格**问题**（表格中的问题）

```
question_id | form_id | question_name      | sorting_order
1             1         Full Name            1
2             1         E-mail address       2
3             1         Subject              3
4             1         Message              4
5             2         Your name            1
6             2         Are you vegetarian?  2
7             2         Beer or wine?        3 
```

table **completed_forms**（将答案组合在一起）

```
complete_id | form_id | timestamp
1            1          1339496914
2            1          1148691493
3            2          1256235334 
```

表格**答案**（用户对特定问题的回答）

```
answer_id | complete_id | question_id | answer
1           1             1             Barack Obama
2           1             2             president@whitehouse.gov
3           1             3             Test message
4           1             4             This is a test. Regards, Barack.
5           2             1             Thomas something
6           2             2             thomas@email.com
7           2             3             Another message
8           2             4             Hey, it's Thomas. This is my message.
9           3             5             Dirk
10          3             6             No, I love meat
11          3             7             Red wine! 
```

我要显示的是用户输入的概述，**这非常复杂，因为**每个表单的名称和列数不同。例如，我想显示来自联系人表单 (form_id: 1) 的用户输入，如下所示：

```
id | timestamp | Full Name | E-mail Address | Subject | Message
1    133949...   Barack...   president@w...   Test...   This is a t...
2    114869...   Thomas...   thomas@emai...   Anot...   Hey, it's T... 
```

并从 form_id 2 如下：

```
id | timestamp | Your name | Are you vegetarian? | Beer or Wine?
3    125623...   Dirk        No, I love meat       Red wine! 
```

有谁如果以及如何实现这一目标？

非常感谢任何愿意花时间来解决这个问题的人！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:44:09.023

基本上，您正在尝试编写 PIVOT，但 MySQL 本身没有 PIVOT 函数，因此您必须编写稍微不同的查询。对于此查询的静态版本，您将在问题的值中进行编码，您可以使用以下内容：

表格 1（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/491d9/54)）：

```
select cf.complete_id
  , cf.ts
  , Min(CASE WHEN q.question_name = 'Full Name' THEN a.answer END) as 'Full Name'
  , Min(CASE WHEN q.question_name = 'Email Address' THEN a.answer END) as 'Email Address'
  , Min(CASE WHEN q.question_name = 'Subject' THEN a.answer END) as 'Subject'
  , Min(CASE WHEN q.question_name = 'Message' THEN a.answer END) as 'Message'
from completed_forms cf
inner join questions q
  on cf.form_id = q.form_id
inner join answers a
  on cf.complete_id = a.complete_id
  and q.question_id = a.question_id
where cf.form_id = 1
group by cf.complete_id 
```

表格 2（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/491d9/55)）：

```
select cf.complete_id
  , cf.ts
  , Min(CASE WHEN q.question_name = 'Your Name' THEN a.answer END) as 'Your Name'
  , Min(CASE WHEN q.question_name = 'Are you vegetarian?' THEN a.answer END) as 'Are you vegetarian?'
  , Min(CASE WHEN q.question_name = 'Beer or Wine' THEN a.answer END) as 'Beer or Wine'
from completed_forms cf
inner join questions q
  on cf.form_id = q.form_id
inner join answers a
  on cf.complete_id = a.complete_id
  and q.question_id = a.question_id
where cf.form_id = 2
group by cf.complete_id 
```

现在，由于每个表单的问题都会发生变化，那么您应该考虑使 Pivot 自动化。我建议查看位于此处的文章：

[http://www.artfulsoftware.com/infotree/queries.php#523](http://www.artfulsoftware.com/infotree/queries.php#523)

它包含如何在 MySql 中使用枢轴的示例。StackOverflow 上还有其他答案应该能够帮助动态编写这个：

[mysql查询将行数据动态转换为列](https://stackoverflow.com/questions/1599788/mysql-query-to-dynamically-convert-row-data-to-columns)

[具有基于单列数据的动态标题的 MySQL 数据透视表](https://stackoverflow.com/questions/6158230/mysql-pivot-table-with-dynamic-headers-based-on-single-column-data)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T11:18:35.643

很好的标准化架构！

在纯 SQL 中执行此操作非常困难，因为您需要创建具有列名别名的查询，这些别名来自您的 questions.question_name 中的行。

如果您在纯 SQL 中执行此操作，那么您将编写 SQL 语句，该语句会以某种方式为 form_id 的每个不同值编写 SQL 语句。这会导致您的 SQL 代码中出现一些无法维护的猴子业务。就您的长期成本而言，这将彻底消除您为能够轻松处理多种表格所做的工作。

这在 PHP、PERL、Java 或其他在处理字符串列表方面做得不错的语言中要容易得多。

PostgreSQL 和 Oracle 允许您使用 Java 和/或 PERL 等语言编写存储过程。*如果您必须*将此代码驻留在您的 DBMS 中，那么这可能就是您要走的路。

# java - 未生成堆转储

> ID：10994903
> 
> 赞同：0
> 
> 时间：2012-06-12T10:35:40.597
> 
> 标签：java, android, eclipse, heap-dump

我已经添加`-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath="C:\hd.hprof"`到默认 VM 参数，但我不知道为什么`OutOfMemoryError`抛出时没有生成堆转储文件。谁能阻止我？

更多细节：

*   我的 JRE 版本是 1.7.0_02

*   堆转储第一次生成一次，但是当我更改 HeapDumpPath 时，它不再生成。已将 HeapDumpPath 恢复为与第一次相同，但仍未生成堆转储

*   文件`C:\hd.hprof`已存在。

*   下图是我强制关闭 Eclipse 时的 Eclipse 对话框。在那个对话框中，我可以看到 eclipse 包含了我的参数 ]！[下图是我强制关闭 eclipse 时的 eclipse 对话框。在那个对话框中，我可以看到 eclipse 包含了我的论点

![在此处输入图像描述](../Images/228348aee905519abac14b9d195a6f04.png)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-09-24T12:29:26.553

有些抛出的堆溢出并不是真正的溢出，而是计算后直接抛出的。实际上并没有溢出，所以不会产生堆转储。比如使用DirectByteBuffer的时候

# gtk - 将标签小部件对齐到 EventBox 的左侧

> ID：10994908
> 
> 赞同：0
> 
> 时间：2012-06-12T10:36:02.140
> 
> 标签：gtk

我一直在尝试将整个标签与`GtkEventBox`放置它的左侧的文本对齐。但是，我不能这样做。我试图对齐标签上的文本，因为我不知道任何可以将标签本身对齐到我的事件框左侧的函数。事件框放置在这段代码中的表格中：

```
label1 = gtk_label_new(res);
gtk_label_set_justify(GTK_LABEL(label1), GTK_JUSTIFY_LEFT);
gtk_label_set_line_wrap (GTK_LABEL (label1), TRUE);
gtk_label_set_single_line_mode(GTK_LABEL(label1),TRUE);

//align = gtk_alignment_new(0.0, 0.5, 0.0, 0.0);
//gtk_container_add(GTK_CONTAINER(align), label1);
//gtk_table_attach(GTK_TABLE(table), align, 0, 10, 2, 3, GTK_FILL | GTK_SHRINK, GTK_FILL | GTK_SHRINK, 20, 10);

embedLabel= gtk_event_box_new();
gtk_container_add( GTK_CONTAINER(embedLabel), label1 );
gtk_container_set_resize_mode(GTK_CONTAINER(embedLabel), FALSE);
gtk_table_attach(GTK_TABLE(table), embedLabel, 0, 10, 2, 3, GTK_FILL | GTK_SHRINK, GTK_FILL | GTK_SHRINK, 20, 20); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:33:56.247

也许尝试在可用空间内[设置对齐？](http://developer.gnome.org/gtk/2.24/GtkMisc.html#gtk-misc-set-alignment)

```
gtk_misc_set_alignment(GTK_MISC(label1), 0, .5); 
```

# jquery - 当页面滚动并有一些位置时做一些事情

> ID：10994909
> 
> 赞同：5
> 
> 时间：2012-06-12T10:36:02.530
> 
> 标签：jquery, css, scroll, position

我的页面滚动有点问题...我想在向下滚动页面时更改一些 CSS，如果窗口距离顶部位置有 100 像素...这是我的代码。非常感谢您的帮助。

```
$(document).ready(function(){
    $(window).scroll(function(){
        if ($(window).scroll(100)){
            $('.ufo').css('right','800px');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-12T10:39:11.957

试试这个：

```
$(document).ready(function(){
    $(window).scroll(function(){
        if ($(window).scrollTop() > 100){
            $('.ufo').css('right','800px');
        }
    });
}); 
```

# sql - 在 sql 中使用 if...else 语句作为返回值

> ID：10994918
> 
> 赞同：0
> 
> 时间：2012-06-12T10:36:35.633
> 
> 标签：sql, if-statement

我正在尝试用 sql 编写他的：

```
SET `Field` = (
    If `Field` is empty then "b", 
    if `Field` is not empty, concat(`Field`,"_b")) 
```

意思是，如果`Field`有值 a 它将更改为 a_b，如果它为空，它将更改为 b 是否有一个 sql 合成器可以正确创建此 if..else 语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:41:01.387

```
IF(Field = "" or Field IS NULL,'b',concat(Field,'_b')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T10:40:49.420

您可以使用[CASE](http://msdn.microsoft.com/en-us/library/ms181765.aspx)语句。

例子：

```
SELECT 
    CASE  
        WHEN myField IS NULL THEN 'b'
        WHEN myField = '' THEN 'b'
        ELSE myField + '_b'
    END 
FROM myTable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T10:39:53.947

您需要使用[CASE](http://msdn.microsoft.com/en-us/library/ms181765.aspx)关键字。

就像是

```
UPDATE tbl
SET field = 
    CASE
        WHEN field = ''
            THEN 'b'
            ELSE field + '_b'
    END 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T10:51:13.163

您可以使用 Cases，但您可以像这样缩短它：

```
 set Field = isnull(field, '') 
             +  case when isnull(field, '') = '' then '' else '_' end 
             + 'b' 
```

# python - 无法通过 Apache 运行 Python 脚本

> ID：10994919
> 
> 赞同：0
> 
> 时间：2012-06-12T10:36:36.527
> 
> 标签：python, apache

我有一个 Python 脚本。我可以从提示中晒太阳：

```
python myscript.py 
```

Python 脚本连接到 MySQL 并获取/计算一些值并打印出来。

但是当我通过 Apache 运行相同的程序时：

```
Via Browser request 
OR
curl "http://box.com/script/myscript.py" 
```

我在 Apache 日志中收到以下错误：

```
[Tue Jun 12 03:31:57 2012] [error] [client xx.xx.xx.xx] Exception AttributeError: "Data instance has no attribute 'cursor'" in <bound method Data.__del__ of <__main__.Data instance at 0x160f4c20>> ignored 
```

而通过 cgitb 的日志状态：

```
Traceback (most recent call last):
  File "cgi-bin/myscript.py", line 114, in <module>
    Data = Data()
  File "cgi-bin/myscript.py", line 14, in __init__
    self.conn = MySQLdb.connect(host="host",user="",passwd="",db="test")
AttributeError: 'module' object has no attribute 'connect' 
```

我的盒子里安装了多个 Python，但我想知道应该如何设置以及应该设置什么配置？最大的麻烦是我怎么能从命令行运行我的脚本呢？

该脚本只是连接到后端并从表中获取值。

# javascript - ScrollSpy.js 偏移百分比

> ID：10994931
> 
> 赞同：1
> 
> 时间：2012-06-12T10:37:14.260
> 
> 标签：javascript, twitter-bootstrap

如何使[ScrollSpy.js](http://twitter.github.com/bootstrap/javascript.html#scrollspy)的数据偏移量以百分比而不是像素为单位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:43:26.440

它看起来不像你可以，除非不破解 scrollspy JS 文件。

我建议您根据滚动百分比计算像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:51:24.277

我想你想抵消你的#header，它的高度是 %

然后在你的#header 上使用[http://api.jquery.com/height/](http://api.jquery.com/height/)来抵消 scrollspy

# php - 连接mysql函数的区别？

> ID：10994933
> 
> 赞同：0
> 
> 时间：2012-06-12T10:37:26.443
> 
> 标签：php, mysql

谁能说出 php 函数和php 函数`mysql_connect()`之间的区别？因此，它将成为所有有关此问题的参考。`mysql_pconnect()``mysqli_connect()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:39:14.807

此处详细解释了差异：

[http://www.php.net/manual/en/mysqlinfo.api.choosing.php](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:39:50.793

和的区别`connect()`，`pconnect()`就像商店一样，当您进入商店时，您将打开门并拿走您的物品，然后出来并关上门。那是`connect()`在mysql中调用的。脚本终止时，与 mysql 数据库的连接将自动关闭。当商店的门已经打开并且从未关闭时，它被调用`pconnect()`，打开一个连接`mysql_pconnect()`，连接不会关闭，并且会“持续”以供将来使用。

阅读更多：[http ://wiki.answers.com/Q/What_is_the_difference_between_mysql_connect_and_mysql_pconnect_in_PHP#ixzz1xZfVfXzv](http://wiki.answers.com/Q/What_is_the_difference_between_mysql_connect_and_mysql_pconnect_in_PHP#ixzz1xZfVfXzv)

与mysqli和mysql的区别：

关于哪个连接器/扩展更快有不同的意见。这是您应该遵循的简单指南：

如果您要连接的 MySQL 数据库 <= 4.1.3，则使用 mysql_connect。如果您要连接的 MySQL 数据库 > 4.1.3，则使用 mysqli_connect。

尽管您可以将 mysql_connect 与较新版本一起使用，但您无法访问某些功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T10:41:11.870

PHP 检查是否已经存在相同的持久连接（从之前保持打开状态） - 如果存在，则使用它。如果不存在，则创建链接。“相同”连接是打开到同一主机的连接，具有相同的用户名和相同的密码（如果适用）。

检查这些链接—— [链接 1](http://php.net/manual/en/features.persistent-connections.php) [链接 2](http://www.mysqlperformanceblog.com/2006/11/12/are-php-persistent-connections-evil/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T10:46:58.407

mysqli 是 php 的扩展。我不会推荐使用它，因为有传言说在未来的 php 版本中会过时。

# c# - 如何正确处理 ZoneLocalMapping.ResultType.Ambiguous？

> ID：10994948
> 
> 赞同：1
> 
> 时间：2012-06-12T10:38:06.460
> 
> 标签：c#, nodatime

在我的代码中，我尝试处理 ZoneLocalMapping.ResultType.Ambiguous。线

```
unambiguousLocalDateTime = localDateTimeMapping.EarlierMapping; 
```

抛出 InvalidOperationException 并显示消息“不应在类型不明确的结果上调用 EarlyMapping 属性”。

我不知道我应该如何处理它。你可以给我一个例子吗？

这就是我的代码的样子：

```
public Instant getInstant(int year, int month, int day, int hour, int minute)
{
        var localDateTime = new LocalDateTime(year, month, day, hour, minute); //invalidated, might be not existing
        var timezone = DateTimeZone.ForId(TimeZoneId); //TimeZone is set elsewhere, example "Brazil/East"
        var localDateTimeMapping = timezone.MapLocalDateTime(localDateTime);
        ZonedDateTime unambiguousLocalDateTime;
        switch (localDateTimeMapping.Type)
        {
            case ZoneLocalMapping.ResultType.Unambiguous: 
                unambiguousLocalDateTime = localDateTimeMapping.UnambiguousMapping;
                break;
            case ZoneLocalMapping.ResultType.Ambiguous:
                unambiguousLocalDateTime = localDateTimeMapping.EarlierMapping;
                break;
            case ZoneLocalMapping.ResultType.Skipped: 
                unambiguousLocalDateTime = new ZonedDateTime(localDateTimeMapping.ZoneIntervalAfterTransition.Start, timezone);
                break;
            default:
                throw new InvalidOperationException(string.Format("Unexpected mapping result type: {0}", localDateTimeMapping.Type));
        }
        return unambiguousLocalDateTime.ToInstant();
} 
```

如果我查看 ZoneLocalMapping 类，我会看到以下代码：

```
 /// <summary>
    /// In an ambiguous mapping, returns the earlier of the two ZonedDateTimes which map to the original LocalDateTime.
    /// </summary>
    /// <exception cref="InvalidOperationException">The mapping isn't ambiguous.</exception>
    public virtual ZonedDateTime EarlierMapping { get { throw new InvalidOperationException("EarlierMapping property should not be called on a result of type " + type); } } 
```

这就是我收到异常的原因，但我应该怎么做才能获得 EarlyMapping？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:53:03.103

看起来您使用的是相对较旧的版本。`ZoneLocalMapping`从那以后发生了一些变化，我怀疑我已经修复了你发现的错误。这是一个有效的示例：

```
using System;
using NodaTime;

class Program
{    
    public static void Main()
    {
        var local = new LocalDateTime(2012, 10, 28, 1, 30, 0);
        var zone = DateTimeZone.ForId("Europe/London");
        var mapping = zone.MapLocal(local);

        Console.WriteLine(mapping.Count); // 2
        Console.WriteLine(mapping.First()); // 1.30 with offset +1
        Console.WriteLine(mapping.Last()); // 1.30 with offest +0
    }    
} 
```

由于改进的“解析器”API，您的实际方法现在可以完全消失。您现在可以使用：

```
private static readonly ZoneLocalResolver CustomResolver =
    Resolvers.CreateMappingResolver(Resolvers.ReturnEarlier,
                                    Resolvers.ReturnStartOfIntervalAfter);

...

Instant instant = zone.ResolveLocal(localDateTime, CustomResolver).ToInstant(); 
```

# javascript - jQuery 通过索引从 '.find' 访问每个匹配的元素

> ID：10994951
> 
> 赞同：0
> 
> 时间：2012-06-12T10:38:15.597
> 
> 标签：javascript, jquery

使用 jQuery 的`.find()`方法返回一组元素，我试图通过它们在该集中的顺序访问返回集中的项目。

例如，一个有两行的表，每行有一个选择框和两个文本输入字段，可通过以下方式访问：

```
$('table#tbl').find('tr.row').each(function(i)
{

}); 
```

为了获得我认为可以使用的第一个元素

```
$('table#tbl').find('tr.row').each(function(i)
{
    alert( $(this).find(':input').get(1).val() );
}); 
```

以及上述的变体，但显然这不起作用。谁能建议正确的方法来访问返回的 n 个元素中的 x 项？

编辑：

JSFiddle在这里：http: [//jsfiddle.net/Lenqt/42/](http://jsfiddle.net/Lenqt/42/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:39:46.303

```
alert( $(this).find(':input:eq(0)').val() ); 
```

# android - 面板小部件与 android 中的其他内容重叠

> ID：10994953
> 
> 赞同：0
> 
> 时间：2012-06-12T10:38:16.197
> 
> 标签：android, android-layout, android-widget

我正在尝试利用[android-misc-widgets](http://code.google.com/p/android-misc-widgets/)中引入的 Panel 小部件。到目前为止一切都很好。现在的问题是滑动面板与我的顶部菜单栏重叠。为了清楚起见，请查看以下屏幕截图。

这是当我使用拖动手势打开面板时（这里没问题）： ![在此处输入图像描述](../Images/8183a40fe833358898261785dd161251.png)

这是当我单击打开面板时（查看与顶部菜单重叠的图标）： ![在此处输入图像描述](../Images/0495972954c7c2be763ce2de325650dd.png)

还有一个问题，如果 Activity 中有任何内容，打开面板会将这些内容推出屏幕！
![在此处输入图像描述](../Images/d4d5b63671f2d74847330d301fb1a666.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:15:05.880

我设法用`Relative Layout`. 将每个项目放置在正确的位置。如果有人遇到同样的问题，这里是 xml 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:panel="http://schemas.android.com/apk/res/com.ms.rightel.store"
    android:layout_width="fill_parent"
    android:layout_height="match_parent" >

    <RelativeLayout
        android:id="@+id/RelativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/bg" >
  >

        <ScrollView
            android:id="@+id/scrollView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/include1"
            android:layout_marginTop="3dp" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/imageView1"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="10dp"
                    android:src="@drawable/categories" />

                <com.devsmart.android.ui.HorizontalListView
                    android:id="@+id/catsHList"
                    android:layout_width="fill_parent"
                    android:layout_height="88dp" >
                </com.devsmart.android.ui.HorizontalListView>

                <ImageView
                    android:id="@+id/imageView2"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="10dp"
                    android:src="@drawable/latest" />

                <com.devsmart.android.ui.HorizontalListView
                    android:id="@+id/topHList"
                    android:layout_width="fill_parent"
                    android:layout_height="88dp" >
                </com.devsmart.android.ui.HorizontalListView>
            </LinearLayout>
        </ScrollView>

        <org.miscwidgets.widget.Panel
            android:id="@+id/panel1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/include1"
            panel:animationDuration="500"
            panel:closedHandle="@drawable/top_switcher_collapsed_background"
            panel:content="@+id/panelContent"
            panel:handle="@+id/panelHandle"
            panel:linearFlying="false"
            panel:openedHandle="@drawable/top_switcher_expanded_background"
            panel:position="top" >

            <LinearLayout
                android:id="@+id/panelContent"
                android:layout_width="match_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical" >

                <ImageView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:src="@drawable/android_ldpi" />

                <ImageView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:src="@drawable/android_ldpi" />
            </LinearLayout>

            <Button
                android:id="@+id/panelHandle"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal" />
        </org.miscwidgets.widget.Panel>
 <include
            android:id="@+id/include1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            layout="@layout/header" />
    </RelativeLayout>

</FrameLayout> 
```

# android - 在 android ICS 框架中更改状态栏的位置

> ID：10994954
> 
> 赞同：0
> 
> 时间：2012-06-12T10:38:17.410
> 
> 标签：android, frameworks

我是 android 新手。我想将我的 android ICS 状态栏的位置从屏幕底部向上移动 50 dp。（ie.layout_marginBottom=50dp）。在哪里进行框架中的修改才能完成这项工作？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T05:34:00.460

这是我的解决方案：

为此，在深入研究了 StatusBar.java 代码后，我找到了如下解决方案：

```
final WindowManager.LayoutParams lp = new WindowManager.LayoutParams(
                ViewGroup.LayoutParams.MATCH_PARENT,
                height,
                WindowManager.LayoutParams.TYPE_STATUS_BAR,
                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE
                    | WindowManager.LayoutParams.FLAG_TOUCHABLE_WHEN_WAKING
                    | WindowManager.LayoutParams.FLAG_SPLIT_TOUCH,
                PixelFormat.RGB_565);

//Line to be added 
    lp.y = 50; 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:46:25.190

这是一个很好的解释教程[http://developer.android.com/guide/practices/ui_guidelines/icon_design_status_bar.html](http://developer.android.com/guide/practices/ui_guidelines/icon_design_status_bar.html)

# c - 为什么我会从此代码中收到“对非结构或联合的成员的请求”？

> ID：10994957
> 
> 赞同：0
> 
> 时间：2012-06-12T10:38:32.247
> 
> 标签：c, pointers, struct, linked-list

我正在尝试通过编写一个链表来自学 C。我是指针和内存管理的新手，我有点困惑。我有这个代码：

```
/* Remove a node from the list and rejiggle the pointers */
void rm_node(struct node **listP, int index) {
    struct node *prev;
    struct node *n = *listP;
    if (index == 0) {
        *listP = *listP->next;
        free(n);
        return;
    }
    for (index; index > 0; index--) {
        n = n->next;
        if (index == 2) {
        prev = n;
        }
    }
    prev->next = n->next;
    free(n);
} 
```

从列表中删除一个元素。如果我想删除第一个节点，我仍然需要一些引用列表的方式，这就是为什么`listP`arg 是一个双指针，所以它可以指向列表的第一个元素并允许我释放使用的节点成为头。但是，当我尝试取消引用`listP`以访问指向下一个节点的指针时，编译器会告诉我`error: request for member ‘next’ in something not a structure or union` . 我在这里做错了什么？我想我可能是无可救药地混淆了..？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T10:41:58.610

这个：

```
*listP->next 
```

与此相同：

```
*(listP->next) 
```

你想要这个：

```
(*listP)->next 
```

# jquery - 对话框无法正常工作

> ID：10994959
> 
> 赞同：0
> 
> 时间：2012-06-12T10:38:47.130
> 
> 标签：jquery, jquery-ui

```
 function showPopup(){
     var popup = $('<div>').dialog();
     popup.html('<div id="mydiv"></div>');
     for (var i=1; i<5; i++)
         setContent($('#mydiv'));
         popup.dialog("option", "buttons", {"Add":function(){
         //code to add 
         $(this).dialog('close');

      $(this).dialog('destroy');},"Cancel":function(){
           //code to add 
           $(this).dialog('close');
           $(this).dialog('destroy');
                                              },    
      });   
      }

      function setContent(container){       
            container.append('<p>sadfsdfsdfsdfdsf</p>');        
      } 
```

单击“添加按钮”时，会调用 showPopup 函数，该函数会显示一个对话框，通过 setContent 方法设置其内容。在第一次单击时，内容会正确显示，而在进一步单击时（关闭前一个对话框后）则不显示任何内容。

有人能帮忙吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:00:02.567

利用

```
 <div class = "mydiv"></div> 
```

而不是 id = "mydiv"

# codeigniter - Codeigniter 多语言网址

> ID：10994962
> 
> 赞同：-1
> 
> 时间：2012-06-12T10:38:52.340
> 
> 标签：codeigniter

请帮我。我搜索了 2 个小时，但没有看到任何适合我的案例的解决方案。我的客户要求我提供多语言，但他们希望链接为：

**http://site.com/controller_name/lang_code 或 [http://site.com/controller_name/paramenter1/parameter2/lang_code](http://site.com/controller_name/paramenter1/parameter2/lang_code)**

语言代码总是在最后一段。它存储在会话中。网址也可能

**http://site.com/controller_name/ 或 [http://site.com/controller_name/paramenter1/parameter2/](http://site.com/controller_name/paramenter1/parameter2/)**

在这种情况下。保存在 session 中的语言会被加载，但 url 不需要显示。

我尝试了 i18n 库，但它不能解决我的问题。谁能帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:18:16.830

在路线中，您只需要忽略语言代码，这样它就不会影响链接和表单帖子。

```
$route['^fr/(.+)$'] = "$1";
$route['^en/(.+)$'] = "$1";
$route['^es/(.+)$'] = "$1";
$route['^pl/(.+)$'] = "$1";
$route['^tr/(.+)$'] = "$1"; 
```

您还需要制作基本网址，使其包含语言代码，然后阅读语言代码并相应地更改语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:48:56.080

您是否尝试过这个[http://codeigniter.com/wiki/URI_Language_Identifier/](http://codeigniter.com/wiki/URI_Language_Identifier/)。如果您想要最后的语言代码，则必须将路线更改为以下内容：

```
$route['((.*)/\w{2})'] = '$1'; 
```

# c++ - 在同一工作簿中打开新工作表的 C++ Excel 命令

> ID：10994964
> 
> 赞同：0
> 
> 时间：2012-06-12T10:39:00.887
> 
> 标签：c++, excel, for-loop

我正在使用 C++ 创建一个 Excel 图表。我的问题是我想在同一个工作簿中创建多个图表。这是我的代码：

```
 CoInitialize(NULL);
    Excel::_ApplicationPtr XL;
    XL.CreateInstance(L"Excel.Application");
    XL->Visible=true;
            XL->Workbooks->Add(Excel::xlWorksheet);
    Excel::_WorksheetPtr pSheet = XL->ActiveSheet;
            pSheet->Name = "Name";
            ...
            Excel::_ChartPtr pChart=XL->ActiveWorkbook->Charts->Add();
            pChart->Name =arr1;
            ...
            CoUninitialize(); 
```

...代表我用数据填充表格的部分代码。当我运行它一次时，它会创建一个包含一个工作表和一个绘图的新工作簿。但是当我想把它放在 for 循环中时，它会打开多个 Excel 工作簿，所有工作簿都带有对表/绘图。但我希望它们都在一个工作簿中。顺便说一句，我在这一行之后放了 for 循环： XL->Visible=true; 并在 CoUninitialize(); 之前完成它。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:14:23.853

嗯，我不知道 Excel COM API，自从我上次自己使用 COM 以来已经有很长时间了，但是，我认为很明显，那些陈述

```
XL->Workbooks->Add(Excel::xlWorksheet);
Excel::_WorksheetPtr pSheet = XL->ActiveSheet;
pSheet->Name = "Name"; 
```

指示 Excel 添加一个新工作簿（Workbooks 是复数形式，它的 Add 方法可以合理地假设创建一个新工作簿），然后在其中创建一个新工作表。

鉴于此声明

```
Excel::_ChartPtr pChart = XL->ActiveWorkbook->Charts->Add(); 
```

我假设还应该有一个`XL->ActiveWorkbook->Sheets`带有方法的方法`Add()`，它在当前工作簿中创建一个新工作表，并返回一个指向它的指针。因此，`XL->Workbooks->Add`我不会尝试`XL->ActiveWorkbook->Sheets->Add()`在当前活动的工作簿中创建一个新工作表。

请注意，我没有阅读此答案的任何文档，这只是我对方法命名和了解 Microsoft OOP 方案过去工作方式的假设（多年前）。

# java - 来回发送对象到线程

> ID：10994969
> 
> 赞同：0
> 
> 时间：2012-06-12T10:39:09.843
> 
> 标签：java, client-server, serversocket

我正在尝试用 Java 制作一个简单的服务器客户端线程应用程序，关于一个类似测验的游戏。我有一个`Main`班级作为它的“大脑”，它将处理诸如提问、检查答案等主要过程。我还有另外两个班级，`ServerHandler`和`Player`. 是`ServerHandler`连接`Main`。`Player`到目前为止，问题是我想发送 to 的`Main`属性`ServerThread`。我尝试使用`this`但它不起作用。任何有助于改进我的程序的建议也将受到欢迎。

```
 public class Main 
    {
        public static int MYECHOPORT = 8189;
        /**
         * @param args the command line arguments
         */
        public static void main(String[] args) 
        {
            // TODO code application logic here

            ServerSocket s = null;
            int count;
            count=0;
            Pemain [] player=new Pemain[3];

        try 
            {
            s = new ServerSocket(MYECHOPORT);
        } 
            catch(IOException e) 
            {
            System.out.println(e);
            System.exit(1);
        }
        while (true) 
            {
                for(int i=0;i<3;i++)
                {
                    player[i]=new Pemain();
                    player[i].setNo(i+1);
                    count++;
                }            
            try 
                {
            for(int i=0;i<3;i++)
                    {
                        player[i].setS(s.accept());
                    }
            } 
                catch(IOException e) 
                {
            System.out.println(e);
            continue;
            }

                if(count==3)
                {
                    for(int i=0;i<3;i++)
                    {
                        new ServerHandler(player[i].getS(), this).start();
                    }
                }

                // ignore
            }
        }  

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:57:16.177

*这*不起作用，因为您使用的是静态方法（main()）。重构为非静态方法。

去掉 main 中的 static 并重命名为 m(String[] args)。然后插入这个主要方法：

```
public static void main(String[] args) {
   new Main().m(args)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:58:06.113

首先，尽量避免说“它不起作用”。告诉它*如何*不起作用。告诉你会发生什么。告诉你得到的错误信息。

其次，您似乎没有掌握对象和静态方法等基本的 OO 概念，处理套接字 IO 和多线程等*非常*复杂的东西还为时过早。

现在解决您的问题：您试图`this`作为方法参数传递。`this`表示调用当前方法的对象。但是您尝试执行此操作的方法是静态方法，因此它没有任何封闭对象。main 方法的代码应该是这样的：

```
public static void main(String[] args) {
    Main main = new Main();
    main.execute();
} 
```

该`execute()`方法包含您的主要方法当前包含的内容。

有关静态类成员的更多信息，请阅读[http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)。

# eclipse - 使用活动删除 Eclipse PDE 中的上下文菜单条目

> ID：10994973
> 
> 赞同：1
> 
> 时间：2012-06-12T10:39:13.603
> 
> 标签：eclipse, eclipse-rcp, eclipse-pde, eclipse-plugin

我正在使用`org.eclipse.ui.activities`删除某些上下文菜单条目。我成功删除了

> 团队，在远程系统视图中显示，从本地历史恢复

通过在我的 plugin.xml 中使用以下内容

```
<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin> 
<extension point="org.eclipse.ui.activities">
<activity description="Disable Menu/Context Menu Contributions"
    id="com.myapp.myactivity" name="MyViewActivity">
</activity>

<activityPatternBinding activityId="com.myapp.myactivity"
    pattern="org.eclipse.team.*"/>

    <activityPatternBinding activityId="com.myapp.myactivity"
    pattern="org.eclipse.rse.*"/>

    <activityPatternBinding activityId="com.myapp.myactivity"
    pattern="org.eclipse.compare.*"/>

</extension>
</plugin> 
```

我需要删除 "Profile As" 、 "Source" 、 "Configure" 条目。我使用了 eclipse 的插件 spy 并且能够获取关联的类，它的插件 jar 就像 ex

```
<activityPatternBinding activityId="com.myapp.myactivity" 
    pattern="org\.eclipse\.ui\.workbench/org\.eclipse\.jst\.servlet\.ui\.internal\.actions\.ConvertToWebModuleTypeAction"/> 
```

用于删除上下文菜单中的配置->转换为动态 Web 项目条目，但这不起作用。我在这里错过了什么吗？

来自插件间谍

```
The active contribution item identifier:
convertToWebModuleTypeAction
The active contribution location URI:
menu:org.eclipse.ui.projectConfigure?after=convertToWebModuleTypeAction
The active contribution item class:
ConvertToWebModuleTypeAction
The contributing plug-in:
org.eclipse.ui.workbench (3.7.1.v20120104-1859) 
```

任何删除上述条目的帮助（即 Profile As、Source、Configure）将不胜感激。

# python - 带有字典列表的奇怪 python 行为

> ID：10994975
> 
> 赞同：0
> 
> 时间：2012-06-12T10:39:24.070
> 
> 标签：python

我有一个字典列表`listEntries`。当我`print listEntries`在 IPython 中说时，我得到以下输出。

```
[{'div': ' ',
  'id': '   EE 760 ',
  'instructor': 'Narayanan H.',
  'instructor_type': 'I ',
  'name': 'Advanced Network Analysis',
  'slot': '3 ',
  'student': '28'},
 {'div': ' ',
  'id': '   EE 764 ',
  'instructor': 'Karandikar Abhay',
  'instructor_type': 'I ',
  'name': 'Wireless & Mobile Communication',
  'slot': '1 ',
  'student': '36'}] 
```

但是，当我`a = listEntries[0]`遵循`print a`所有我得到的是`{}`。

更新：当我使用 pop 方法时，我得到了预期的行为。我通过解析 csv 文件创建了这个列表。

这是代码。

```
import os
import csv

file1 = open('./data.txt', 'r');
csv1 = csv.reader(file1);
listEntry = list();
for row in csv1 :
    # if first row is a number then this row represent course.
    course = {}
    if row[0].isdigit() :
        course['id'] = row[1]
        course['name'] = row[2]
        course['instructor'] = row[3]
        course['instructor_type'] = row[4]
        course['slot'] = row[5]
        course['div'] = row[6]
        course['student'] = row[7]
    else : pass
    listEntry.append(course);

print listEntry[0] 
```

这是我正在解析的文件 data.txt。我正在使用python2.7

```
"Running courses for year 2005-2006 and semester 2 "
"   1991-1992  1992-1993  1993-1994  1994-1995  1995-1996  1996-1997  1997-1998  1998-1999  1999-2000  2000-2001  2001-2002  2002-2003  2003-2004  2004-2005  2005-2006  2006-2007  2007-2008  2008-2009  2009-2010  2010-2011  2011-2012  2012-2013    1 - Autumn 2 - Spring 3 - Summer 4 - winter     "
"Instructor Status A=Associate"
"Sr no.","Course Code","Course Name","Instructor Name","Instructor Status","Slot","Division","Enrolled students","Biometric Attendance Enabled?","Registration Limit","Restrictions","Division"
"67","   EE 760 ","Advanced Network Analysis","Narayanan H.","I ","3 "," ","28","-","0","",""
"68","   EE 764 ","Wireless & Mobile Communication","Karandikar Abhay","I ","1 "," ","36","-","0","","" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:45:27.720

你发布的内容非常好：

```
In [1]: L = [{'div': ' ',
  'id': '   EE 760 ',
  'instructor': 'Narayanan H.',
  'instructor_type': 'I ',
  'name': 'Advanced Network Analysis',
  'slot': '3 ',
  'student': '28'},
< {'div': ' ',
  'id': '   EE 764 ',
   ...:   'id': '   EE 760 ',
   ...:   'instructor': 'Narayanan H.',
   ...:   'instructor_type': 'I ',
   ...:   'name': 'Advanced Network Analysis',
   ...:   'slot': '3 ',
   ...:   'student': '28'},
   ...:  {'div': ' ',
   ...:   'id': '   EE 764 ',
   ...:   'instructor': 'Karandikar Abhay',
   ...:   'instructor_type': 'I ',
   ...:   'name': 'Wireless & Mobile Communication',
   ...:   'slot': '1 ',
   ...:   'student': '36'}]

In [5]: print L[0]
{'slot': '3 ', 'name': 'Advanced Network Analysis', 'instructor_type': 'I ', 'student': '28', 'div': ' ', 'instructor': 'Narayanan H.', 'id': '   EE 760 '}

In [6]: print L[1]
{'slot': '1 ', 'name': 'Wireless & Mobile Communication', 'instructor_type': 'I ', 'student': '36', 'div': ' ', 'instructor': 'Karandikar Abhay', 'id': '   EE 764 '}

In [7]: a = L[0]

In [8]: print a
{'slot': '3 ', 'name': 'Advanced Network Analysis', 'instructor_type': 'I ', 'student': '28', 'div': ' ', 'instructor': 'Narayanan H.', 'id': '   EE 760 '} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:08:06.120

这是一个愚蠢的错误。显然，txt 文件中的前几行创建了空字典并将它们推送到 listEntries。

```
for i in listEntries :
   if i :
       print i 
```

解决了这个问题。

# javascript - 仅当从另一个 url 加载数据时触发另一个插件

> ID：10994977
> 
> 赞同：0
> 
> 时间：2012-06-12T10:39:26.520
> 
> 标签：javascript, jquery, ticker, news-ticker

我想从外部页面获取一些数据，而不是用自动收报机效果显示。

它自己的网站上有一个示例，但数据不是从另一个页面（http://www.jquerynewsticker.com）中提取的。

使用以下代码，从外部页面成功加载数据。

但是当我没有收到任何错误时，ticker 插件不起作用。

```
 $(function FeedTicker() {
        $.ajax({
            type: "GET",
            url: "default.cs.asp?Process=ViewCheckins",
            success: function(data) {
            $(".feedme").html(data);
            $('#js-news').ajaxSuccess(function(){
               $(this).ticker();
            })
            },
            error: function(data) {
            $(".feedme").html(data);
            }
        })
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:44:43.913

试试这个：

```
$('#js-news').ajaxSuccess(function(){
   $(this).ticker();
}) 
```

# powershell - NET USE 只能在 powershell 中工作一次

> ID：10994979
> 
> 赞同：3
> 
> 时间：2012-06-12T10:39:30.657
> 
> 标签：powershell

我的要求是连接到远程计算机，将扩展名为 的文件复制`.TRA`到另一台远程计算机。

现在我的困难在于源机器不在域中，所以我需要使用备用凭据进行连接。

我的第一个症结是尝试使用`New-PSDrive`. 它似乎不允许我传递存储的凭据。我试过这个的各种版本：

```
$cred = Get-Credential
New-PSDrive -NAME Z: -PSprovider Filesystem -root \\Computer\Exchange -credentials $cred 
```

我得到一个错误

> 提供程序不支持使用凭据。在不指定凭据的情况下再次执行该操作。

这似乎是一个错误（请参阅 halr9000 的评论：[Connecting to a network folder with username/password in Powershell](https://stackoverflow.com/questions/303045/connecting-to-a-network-folder-with-username-password-in-powershell)）

我的替代方法是使用`NET USE`，它工作正常但只有一次。

在下面的完整脚本中，我映射到 8 台不同的机器。这些作品中的第一个。之后，任何尝试使用`NET USE`（或`New-Object WScript.NETWORK`在上面链接的 Technet 文章中提到的解决方法）都会失败。或者更确切地说，它不会失败。

它创建了一个映射驱动器，我可以看到我是否键入`NET USE`，或者如果我查看资源管理器（及其可浏览）。但我无法在 Powershell 中连接到该驱动器。它就像它不存在一样，`Test-Path Z:`返回 False。直到我运行`NET USE Z: /D`成功删除驱动器。

有人可以帮我解决我的一个或其他问题吗？不要让我在 DOS 中这样做！

完整脚本：

```
$int = 0
$arrStagePC = "BOX42", "BOX43", "BOX44", "BOX45", "BOX46", "BOX47", "BOX48", "BOX49" 
$arrData = "0848","5144","5292","5383","2158","2646","0061","2331"
Foreach($strComp in $arrStagePC)
    {
    $arr = $arrData[$int]
    $comp = $strComp
    net use z: \\$arr\Exchange /user:admin password
    Copy-Item z:\*$date.tra \\$comp\Export$
    net use z: /d
    $int++
    } 
```

**编辑** 看看下面@Christians 接受的答案。我实际上并不需要 Get-Content 那个文件夹，我只需要从源中复制数据，因此在那里进行业务的脚本部分现在看起来像：

```
Foreach($strComp in $arrStagePC)
        {
        $arr = $arrData[$int]
        $comp = $strComp
        net use z: \\$arr\Exchange /user:admin password
        Copy-Item FILESYSTEM::Z:\*.TRA \\$comp\Export$
        net use z: /d
        $int++
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T10:50:44.490

使用 NET USE 尝试以这种方式访问​​：

```
 Set-Location  FILESYSTEM::Z: 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T23:51:17.027

有同样的问题。通过在 NET USE 之后添加 *New-PSDrive z FileSystem z:* 来修复我的问题。似乎 NET USE /DELETE 扰乱了 PS 家务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T10:46:55.223

试试这个，也许：

```
$net = new-object -ComObject WScript.Network
$net.MapNetworkDrive("Z:", "\\$arr\Exchange", $false, "admin", "password") 
```

# sql - 如何从自定义日期范围中查找当前月份和年份？

> ID：10994980
> 
> 赞同：0
> 
> 时间：2012-06-12T10:39:39.260
> 
> 标签：sql, sql-server-2008, sql-server-2005

我对自定义日期范围有疑问。让我解释一下，对于我们公司从当月第 21 天到下个月第 20 天的月份计数。如果我想知道哪个员工加入了当月，那么通常我可以使用 sql 找到

```
SELECT *
  FROM tblEmployeeMaster
  --CURRENT MONTH
  WHERE MONTH(DateOfJoining)=MONTH(GETDATE())  AND YEAR(DateOfJoining)=YEAR(GETDATE()) 
```

但是对于这个自定义日期范围，我找不到本月加入的员工。例如，在这个系统中，如果我想查找本月加入的员工列表，那么结果将显示上个月从第 21 天到当月第 20 天加入的员工。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T10:56:14.967

在这个例子中，这个月的时间段被认为是从上月21日到本月20日，那个时期的员工被认为是本月的员工（所有在2012-05-21之后到2012-06来公司的人） -20（包括 2012-06-20））。尝试一下：

```
SELECT  DateOfJoining,
        DATEADD(DAY, 20, DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) - 1, 0)) PeriodStart,
        DATEADD(DAY, 19, DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0)) PeriodEnd
FROM    tblEmployeeMaster
WHERE   DateOfJoining > DATEADD(DAY, 20, DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) - 1, 0)) 
        AND 
        DateOfJoining < DATEADD(DAY, 20, DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:08:37.847

```
SELECT *
FROM tblEmployeeMaster  
WHERE DateOfJoining BETWEEN CAST(CAST(YEAR(GETDATE()) AS VARCHAR) +'-'+ CAST(MONTH(GETDATE()) AS VARCHAR) +'-21' AS DATETIME)
AND CAST(CAST(YEAR(DATEADD(month,1,GETDATE())) AS VARCHAR) +'-'+ CAST(MONTH(DATEADD(month,1,GETDATE())) AS VARCHAR) +'-20' AS DATETIME) 
```

# javascript - 当名称包含“[”字符时，jQuery 按名称获取对象

> ID：10994986
> 
> 赞同：4
> 
> 时间：2012-06-12T10:39:56.927
> 
> 标签：javascript, jquery, jquery-selectors

考虑这个 HTML：

```
<input type="text" name="inputa[42]" value="2012-05-02" />
<input type="text" name="inputb[42]" value="74,178" />

<input type="text" name="inputa[85]" value="2013-02-14" />
<input type="text" name="inputb[85]" value="21,35" /> 
```

如何使用 jQuery 选择器获取带有 name 的输入值`inputa[85]`？

如果 name 不包含`[85]`，那将非常容易，但现在我无法开始`$("input[name=inputa[85]]")`工作，这是可以理解的，但是如何解决它（不更改 name 属性）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T10:41:18.340

在引号中：

```
$("input[name='inputa[85]']") 
```

或者

```
$('input[name="inputa[85]"]') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:45:44.350

`$('input[name*="inputa"]')`如果您不知道括号中的值或上面 abuduba 的答案，您可以使用。

# batch-file - 在创建将查找某些文件类型的 Windows 批处理文件时需要帮助

> ID：10994988
> 
> 赞同：0
> 
> 时间：2012-06-12T10:40:04.267
> 
> 标签：batch-file

我以前没有在 Windows 机器上工作过，我需要删除特定文件夹中的一些文件，一旦文件被清除，我们应该压缩文件。有没有可能的方法。

我需要运行批处理文件，应该提示我需要输入值的目标路径，一旦完成，它应该删除其中的 *.txt 文件，一旦删除完成，它应该压缩文件夹并将其发送到新目录。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:53:50.470

```
rem Prompt for the target path
set /p TargetPath=Target path: 
rem Delete text files
del /q %TargetPath%\*.txt
rem Create zip archive
zip -r -j C:\SomeNewDirectory\foo.zip %TargetPath% 
```

适应您的需求。

# sql - 与正在连接的列的连接具有不同的长度

> ID：10994989
> 
> 赞同：-1
> 
> 时间：2012-06-12T10:40:05.707
> 
> 标签：sql, oracle

假设我有两张桌子，

```
 - emp(empId number(1),empName varchar2(50)) and
 - manager(manId number(5),managerName varchar2(100)) 
```

我发出一个查询-

```
select * from emp e,manager m where e.empId = m.manId; 
update emp set empName= (select managerName from manager where manId='2'); 
```

由于empName和managerName的长度不同，这个sql会有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:21:11.963

第一个会起作用（好吧，不会引发错误），如果 managerName > 50 的长度，第二个会引发错误。

它可以 `substr(managerName, 0, 50)` 和

```
WHERE empId = 2 
```

在最后。

顺便说一句，你可以尝试！

# perl - 比较 strftime 格式的日期间隔

> ID：10994990
> 
> 赞同：0
> 
> 时间：2012-06-12T10:40:05.723
> 
> 标签：perl, bash, strftime

我有多个带有日期的输入文件`strftime format`。日期格式是输入变量之一。我需要确定他们的时间线是否连续；换句话说，如果所有输入文件的日期间隔不重叠。

文件中的数据是连续的。这就像一个文件是一个间隔。文件中的第一个日期在间隔的左侧，最后一个日期在间隔的右侧。

为了更好地展示我的问题（只是数据格式为 %Y.%m.%d %H:%M 的示例）：

有 2 个数据文件，日期格式为 %Y.%m.%d %H:%M

数据1.txt

```
2012.11.20 17:10 134343
2012.11.21 00:10 13323343
2012.12.22 15:10 13432323 
```

数据2.txt

```
2012.10.20 17:10 134343
2012.11.29 00:10 13333223343
2012.11.30 15:10 134323123 
```

因此，您可以看到文件 data1.txt 和 data2.txt 中的日期重叠。

```
 2012.10.20         2012.11.20           2012.11.30                2012.12.22 
```

`data2.txt <=============================================>`

```
 data1.txt <===================================================> 
```

我正在 bash 中实现这个问题，但我也欢迎一些 Perl 片段。

我找不到任何简单的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:34:17.200

计算数据范围的重叠并非易事，尤其是在处理日期/时间值时。

我建议[`Time::Piece::Range`](https://metacpan.org/module/Time%3a%3aPiece%3a%3aRange)模块。它扩展了核心`Time::Piece`模块来处理日期范围，并且有一个`overlap`方法。

下面的代码实现了一个函数`range_from_file`，当提供一个文件名时，它从包含一个文件的所有记录中读取一个日期并创建一个`Time::Piece`对象数组。对数组进行排序，并`Time::Piece::Range`从排序列表的第一个和最后一个元素形成一个对象并返回。

对两个数据文件调用此子例程会产生两个`Time::Piece::Range`对象，并且该方法的最终调用`overlap`确定这两个文件是否包含重复的日期/时间。

当应用于您的示例文件`data1.txt`并且`data2.txt`此代码确认它们重叠时。

请注意，虽然`Time::Piece`现在是核心模块，`Time::Piece::Range`但不是，它还需要非核心模块`Date::Range`并`Date::Simple`安装。该`cpan`实用程序会自动为您安装依赖项，但如果您无权扩充 Perl 安装，这可能会成为问题。

```
use strict;
use warnings;

use Time::Piece::Range;

sub range_from_file {

  my $file = shift;
  open my $fh, '<', $file or die qq(Unable to open "$file" for reading);

  my @dates;
  while (<$fh>) {
    next unless /(\d+\.\d+\.\d+[ ]\d+:\d+)/;
    push @dates, Time::Piece->strptime($1, '%Y.%m.%d %H:%M');
  }

  return Time::Piece::Range->new((sort {$a <=> $b} @dates)[0,-1]);
}

my $r1 = range_from_file('data1.txt');
my $r2 = range_from_file('data2.txt');

print $r1->overlaps($r2) ? 'overlap' : 'distinct'; 
```

* * *

**更新**

鉴于除了核心模块之外您无法使用任何东西，并且您假设`strftime`格式只包含固定长度的字段（例如`%B`），我建议使用这种替代方法。

我已经修改了`range_from_file`一个附加`$format`参数，该参数是`strftime`用于解码数据的格式。

每个记录的初始日期/时间字段的长度是通过使用提供的格式格式化当前日期/时间并查找结果字符串的长度来确定的。

从每个文件记录的开头提取等效数量的字符，并将文件中的第一个和最后一个日期存储在数组中`@dates`。

这两个日期被转换为`Time::Piece`对象，并作为匿名数组中的文件*范围返回。*

一个新的子程序`overlap`检查两个范围是否重叠。如果第一个结束在第二个开始之前，或者第二个结束在第一个开始之前，它们是分开的。否则它们会重叠。

同样，此代码确认您在文件中的示例数据`data1.txt`和`data2.txt`重叠。

```
use strict;
use warnings;

use Time::Piece 'localtime';

sub range_from_file {

  my ($file, $format) = @_;
  open my $fh, '<', $file or die qq(Unable to open "$file" for reading);

  my $size = length Time::Piece->new->strftime($format);

  my @dates;
  while (<$fh>) {
    pop @dates if @dates >= 2;
    push @dates, substr $_, 0, $size;
  }

  my @range = map Time::Piece->strptime($_, $format), @dates;
  return \@range;
}

sub overlap {
  my ($r1, $r2) = @_;
  return not $r1->[1] < $r2->[0] or $r2->[1] < $r1->[0];
}

my $r1 = range_from_file('data1.txt', '%Y.%m.%d %H:%M');
my $r2 = range_from_file('data2.txt', '%Y.%m.%d %H:%M');

print overlap($r1, $r2) ? 'overlap' : 'distinct'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T15:59:58.750

好的，所以您需要比较已转换为词法可比格式的日期（有或没有时间？）。这意味着日期是一致的`YYYY.MM.DD`（必要时带有前导零。

```
#!/bin/bash
file1=$1
file2=$2
read -r start1 end1 < <(awk 'NR == 1 {print "$1-$2"} END {print "$1-$2"}' "$file1")
read -r start2 end2 < <(awk 'NR == 1 {print "$1-$2"} END {print "$1-$2"}' "$file2")
if [[ $start1 > $start2 || $end1 > $start2 ]]
then
    echo "Overlap!"
fi 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T12:49:13.980

用 perl 来做。

如果两个文件续。那么只有当 file1 的最后一行中的日期早于 file2 的第一行时，日期才会重叠。

1) 获取第一行 2) 解析行 my ($date1,$data) = line (/\t/,$line); 或者你 Text:Csv 3) 解析 date1 和 date2 my ($Y1,$m1,$d1,$H1,$M1) = $date =~ m!(\d\d\d\d).(\d\ d).(\d\d)\s+(\d\d):(\d\d)!gis; 4）使用DateTime创建纪元；

$dt1 = DateTime->new(year => $Y1, month => $m1, day => $d1, hour => $h1, minute => $m1, second => 0, nanosecond => 0, time_zone = > 'UTC', ); 我的 $epoch1 = $dt1->epoch; 我的 $epoch2 = $dt2->epoch;

5）如果 epoch1 小于 epoch2 你很好。

# jfreechart - JFreeChart 中的无穷大

> ID：10994991
> 
> 赞同：1
> 
> 时间：2012-06-12T10:40:08.293
> 
> 标签：jfreechart, infinity

我找到了这个链接：[http ://www.jfree.org/forum/viewtopic.php?f=3&t=6314](http://www.jfree.org/forum/viewtopic.php?f=3&t=6314)

早在 2007 年，他们就同意 JFreeChart 应该支持无穷大。

有人知道它是否支持吗？我需要能够支持这一点。或者能够在 X 轴上画一条没有端点的线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:29:24.447

除了. `JFreeChart`_ *_* _`Double`

Unicode 字符 ∞，名为[`INFINITY`(U+221E)](http://www.fileformat.info/info/unicode/char/221e/index.htm)，可用于组成`String`文字。您还可以渲染字形，如此处所示，或使用[此处](https://stackoverflow.com/a/4151403/230513)`GlyphVector`提到的 或通过[此处](https://stackoverflow.com/q/7465829/230513)`TextLayout`说明[的](https://stackoverflow.com/a/8282330/230513)方式获得轮廓。

如需更多指导，请编辑您的问题以包含展示您预期用途的[sscce](http://sscce.org/)，例如标题、图例、轴、注释、标签、形状等。

# eclipse - 如何在 Eclipse IDE 中显示通过 maven 构建生成的 checkstyle 违规

> ID：10994994
> 
> 赞同：0
> 
> 时间：2012-06-12T10:40:16.763
> 
> 标签：eclipse, maven

我想要通过 Eclipse IDE（使用外部 maven）中的 maven 构建生成的检查样式违规，例如当您执行“使用 checkstyle 检查代码”时，您的 java 文件如何以 checkstyle 违规发布。

我可以使用 eclipse checkstyle 插件显式运行我的文件，但我的项目要求是使用 maven build 运行。

有没有办法做到这一点？我找不到有关此问题的任何链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:03:43.613

就我个人而言，我通过运行 checkstyle 的 Sonar 来做到这一点。我在本地安装了 Sonar 并将以下配置文件添加到我的 maven 项目中（您也可以将其添加到您的个人 ~/.m2/settings.xml 中）：

```
 <profile>
        <id>sonar</id>
        <activation>
            <activeByDefault>false</activeByDefault>
        </activation>
        <properties>
            <sonar.jdbc.url>jdbc:postgresql://localhost:5432/sonar</sonar.jdbc.url>
            <sonar.jdbc.driver>org.postgresql.Driver</sonar.jdbc.driver>
            <sonar.jdbc.username>sonar</sonar.jdbc.username>
            <sonar.jdbc.password>sonar</sonar.jdbc.password>
            <sonar.host.url>http://localhost:7080/sonar</sonar.host.url>
        </properties>
    </profile> 
```

现在，您可以使用以下命令在您的项目上运行 Sonar：

```
mvn sonar:sonar -Psonar 
```

[在 Eclipse 中，您需要安装 Sonar 插件](http://docs.codehaus.org/display/SONAR/Using+Sonar+in+Eclipse/)。它允许您直接在 Eclipse 中运行本地分析或检索远程分析的结果。在这两种情况下，违规和问题都会添加到 Eclipse 警告/消息对话框中，以便您轻松跟进。

# c# - 水印文本框中的问题

> ID：10994995
> 
> 赞同：1
> 
> 时间：2012-06-12T10:40:38.987
> 
> 标签：c#, wpf

我是 wpf 的新手。我下载了 wpf 工具包，然后将它的 dll 文件添加到我的项目文件中。然后尝试了一些代码来创建水印文本框，但显示错误（XML 命名空间中不存在标签“WatermarkTextBox”）。

```
<Window 
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"  
x:Class="TRAINING.WaterMark"
x:Name="Window"
Title="WaterMark"
Width="640" Height="480">
<extToolkit:WatermarkTextBox>
        <extToolkit:WatermarkTextBox.Watermark>
            <StackPanel Orientation="Horizontal">
                <Image Source="Contact16.png" Stretch="None" />
                <TextBlock Text="Enter First Name" Margin="4,0,0,0" />
            </StackPanel>
        </extToolkit:WatermarkTextBox.Watermark>
    </extToolkit:WatermarkTextBox>  
</Window> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:49:48.200

我以前没有使用过 wpf 工具包，但我很确定当你添加了命名空间 using`xctk`时，你应该在 xaml 中使用它 - 即`xctk:WatermarkTextBox`而不是`extToolkit:WatermarkTextbox`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:49:17.390

```
<Window 
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 xmlns:extToolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit/extended"
xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"  
x:Class="TRAINING.WaterMark"
x:Name="Window"
Title="WaterMark"
Width="640" Height="480">
<extToolkit:WatermarkTextBox>
        <extToolkit:WatermarkTextBox.Watermark>
            <StackPanel Orientation="Horizontal">
                <Image Source="Contact16.png" Stretch="None" />
                <TextBlock Text="Enter First Name" Margin="4,0,0,0" />
            </StackPanel>
        </extToolkit:WatermarkTextBox.Watermark>
    </extToolkit:WatermarkTextBox>  
</Window> 
```

我猜你错过了那个 extToolkit 的引用，所以我添加了。我希望它会帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-11T06:18:09.363

我出现这个问题的原因是 xceed ($) 与 dotnetprojects (Free) NuGet 包之间的混淆。

因此，一旦我卸载了 xceed，一切正常，错误也得到了解决。

# c# - 需要标识符，字符串是关键字

> ID：10994997
> 
> 赞同：0
> 
> 时间：2012-06-12T10:40:42.073
> 
> 标签：c#, c#-4.0

我有一个这样的 php 代码，将其转换为 C#。

```
function HuntingDate()
{
    Global $nameofselectbox,$startYear,$endYear,$year,
    $startDate,$endDate,$startMounth,$endMounth,$startDay,$endDay;
    $today = getdate();
    $year=$today['year'];
    $mounth=$today['mon'];
    $day=$today['mday']; 
```

这是我的尝试（我尝试为此使用枚举）

```
public enum  HuntingDate{string StartYear,string EndYear,string Year,string StartDate,string EndDate,string StartMonth,string EndMonth,stirng StartDay,string EndDay} 
```

我可以用枚举做这个吗？我收到错误“需要标识符，字符串是关键字”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:43:17.003

不，不是[enum](http://msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.80%29.aspx)，你应该为此使用一个[类](http://msdn.microsoft.com/en-us/library/0b0thckt%28v=vs.71%29.aspx)：

```
public class HuntingDate
{
    string StartYear;
    string EndYear;
    string Year;
    string StartDate;
    string EndDate;
    string StartMonth;
    string EndMonth;
    string StartDay;
    string EndDay;
} 
```

然后你有更多的事情要考虑：

1.  字符串对于日期类型数据并不理想，因此请考虑使用[DateTime](http://msdn.microsoft.com/en-us/library/system.datetime.aspx) - 这样您可以将年、月和日值合并到一个[属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw%28v=vs.80%29.aspx)中：

    ```
    public class HuntingDate
    {
        public DateTime StartDateTime;
        public DateTime EndDateTime;
    } 
    ```

2.  类用于定义对象的结构，如我的示例所示，您需要[创建该类的实例](http://msdn.microsoft.com/en-us/library/ms173115%28v=vs.80%29.aspx)才能使用它：

    ```
    HuntingDate huntingDate = new HuntingDate(); 
    ```

    有了这个，你必须考虑你想在哪里访问它。如果您需要一个全局可访问的实例，您可以在全局范围级别初始化该类，或考虑使用[静态类](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)（尽管应该注意这些值将在整个应用程序中保持不变）：

    ```
    public static class HuntingDate 
    {
        public static string Something;
    } 
    ```

3.  我强烈建议阅读 C#（买一本[书](http://en.wikipedia.org/wiki/Book)！）如果你想更认真地做这件事，你应该牢牢掌握 C# 的基础

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:51:53.007

请记住，我不知道 php 从...好吧 php...

```
function HuntingDate()
{
    Global $nameofselectbox,$startYear,$endYear,$year,
    $startDate,$endDate,$startMounth,$endMounth,$startDay,$endDay;
    $today = getdate();
    $year=$today['year'];
    $mounth=$today['mon'];
    $day=$today['mday'];

   ... rest of code
} 
```

我猜你需要一个类（而不是一个[enum](http://www.4guysfromrolla.com/articles/042804-1.aspx)）

```
 public class HuntingDate()    
  {
     string NameOfSelectbox;
     DateTime endDate;

     rest of code ...
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T10:48:53.907

> **不**，你可以用枚举做到这一点。默认情况下，枚举中每个元素的基础类型是 int。您可以使用冒号指定另一种`integral numeric`类型，如下例所示。有关可能类型的完整列表，请参阅 enum（C# 参考）。

例子：

```
enum Months : byte { Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec }; 
```

为此，您可以使用[结构](http://msdn.microsoft.com/en-us/library/ah19swz4%28v=vs.71%29.aspx)或[类类型。](http://msdn.microsoft.com/en-us/library/x9afc042.aspx)

```
public struct HuntingDate
{
    int StartYear;
    int StartMonth;
    int StartDay;         
    int Year;             
    DateTime StartDate;  // it smells like you are storing date then why do 
                         // you not use DateTime rather than these..   
    DateTime EndDate;
    int EndYear;
    int EndMonth;        
    int EndDay;
} 
```

如果你`Year`没有必要，那么它可以缩短为：

```
public struct HuntingDate
{
  public DateTime StartDate;                         
  public DateTime EndDate;
} 
```

其他明智的选择包括`Year`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T10:49:55.097

我猜你想要（字符串）值“StartYear”、“EndYear”等作为枚举的值。你不能这样做：枚举总是基于某种整数类型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-12T10:50:55.050

我认为您最好使用 DateTime 类型作为开始日期和结束日期，并将其全部包装在一个类似这样的类中：

```
public class HuntingDate
{
    public HuntingDate(DateTime start, DateTime end)
    {
        _start = start;
        _end   = end;
    }

    public DateTime End
    {
        get
        {
            return _end;
        }
    }

    public DateTime Start
    {
        get
        {
            return _start;
        }
    }

    private readonly DateTime _start;
    private readonly DateTime _end;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-12T11:17:33.680

我看到有很多答案，最好的答案是什么？