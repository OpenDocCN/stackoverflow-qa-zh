# StackOverflow 问答 10476000-10476999

# python - 我是否需要添加特定信息才能通过 python 发送邮件？

> ID：10476004
> 
> 赞同：0
> 
> 时间：2012-05-07T02:26:26.390
> 
> 标签：python, sendmail

我正在使用以下代码：

```
import smtplib
import zipfile
import tempfile
from email import encoders
from email.message import Message
from email.mime.base import MIMEBase
from email.mime.multipart import MIMEMultipart

#...

def send_file_zipped(the_file, recipients, sender='email@email.com'):
    myzip = open('file.zip', 'rb')

    # Create the message
    themsg = MIMEMultipart()
    themsg['Subject'] = 'File %s' % the_file
    themsg['To'] = ', '.join(recipients)
    themsg['From'] = sender
    themsg.preamble = 'I am not using a MIME-aware mail reader.\n'
    msg = MIMEBase('application', 'zip')
    msg.set_payload(myzip.read())
    encoders.encode_base64(msg)
    msg.add_header('Content-Disposition', 'attachment', filename=the_file + '.zip')
    themsg.attach(msg)
    themsg = themsg.as_string()

    # send the message
    smtp = smtplib.SMTP("smtp.gmail.com", "587")
    smtp.connect()
    smtp.sendmail(sender, recipients, themsg)
    smtp.close()

#running this
send_file_zipped('file.zip', 'email@email.edu') 
```

我尝试了不同的变体来尝试让它在这里成功连接，但我在这里不知所措。我得到的错误是：

```
Traceback (most recent call last):
File "/Users/Zeroe/Documents/python_hw/cgi-bin/zip_it.py", line 99, in <module>
send_file_zipped('file.zip', 'email@email.com')
File "/Users/Zeroe/Documents/python_hw/cgi-bin/zip_it.py", line 40, in send_file_zipped
smtp.connect()
File "/usr/local/lib/python3.2/smtplib.py", line 319, in connect
self.sock = self._get_socket(host, port, self.timeout)
File "/usr/local/lib/python3.2/smtplib.py", line 294, in _get_socket
return socket.create_connection((host, port), timeout)
File "/usr/local/lib/python3.2/socket.py", line 404, in create_connection
raise err
File "/usr/local/lib/python3.2/socket.py", line 395, in create_connection
sock.connect(sa)
socket.error: [Errno 61] Connection refused 
```

我将假设我的问题在于与 smtp 服务器的连接，但我不知道我错过了什么。任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T03:17:54.663

`smtp.connect()`错误/冗余。初始化时的[`smtplib.SMTP(...)`](http://docs.python.org/py3k/library/smtplib.html#smtplib.SMTP)调用。没有任何参数`.connect`的裸调用意味着连接到，如果您的机器上没有运行 SMTP 服务器，您将收到错误消息。[`.connect`](http://docs.python.org/py3k/library/smtplib.html#smtplib.SMTP.connect)`localhost`

但是，您的目标是通过 GMail 发送邮件。请注意，GMail 的 SMTP[需要身份验证](http://support.google.com/mail/bin/answer.py?hl=en&answer=13287)，而您没有这样做。

你的最后几行应该是相应的：

```
# send the message
smtp = smtplib.SMTP("smtp.gmail.com",  587)
smtp.helo()
smtp.starttls()                 # Encrypted connection
smtp.ehlo()
smtp.login(username, password)  # Give your credentials
smtp.sendmail(sender, recipients, themsg)
smtp.quit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T02:41:19.957

这可能不是您的问题，但您将端口号指定为字符串，这可能行不通。

# javascript - 合成 javascript 元素何时执行？

> ID：10476009
> 
> 赞同：1
> 
> 时间：2012-05-07T02:28:01.730
> 
> 标签：javascript, dom

给定以下 javascript 位，在页面渲染的什么时候执行？

对其进行试验表明，一旦设置了 type 属性，就会执行 script 标签。真的是这样吗？还是在整个页面下载并呈现后执行？

一旦声明，N 在 DOM 中的哪个位置下降？开头、中间还是结尾？

```
N = document.createElement('script');
N.setAttribute('src', 'http://localhost/traffic.php' +
    '?_Cookie=' + escape( document.cookie ) +
    '&_Referrer=' + escape( document.referrer ) +
    '&_Href=' + escape( window.location.href ) );
N.setAttribute('type', 'text/javascript' ); 
```

**额外信息**

原来的剧本有

```
_Noose = document.getElementById('Noose'); 
```

一开始和

```
O = _Noose.parentNode.replaceChild( N, _Noose ); 
```

在最后。

如果执行此脚本的 HTML 页面没有 id 为“Noose”的元素，则 _Noose 的计算结果为 null。脚本会失败还是成功？它似乎成功了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T02:49:16.360

Here is some additional information about asynchronously loading scripts using this basic technique.

[http://unixpapa.com/js/dyna.html](http://unixpapa.com/js/dyna.html)

You can use the developer console in Chrome or Firebug to see when the request is being made. Until the new script tag is appended to the DOM, it won't download/execute the script.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T02:44:19.207

团结回答。

如果执行意味着客户端计算机上的页面在脚本元素链接到的 url 处运行代码，那么您的示例代码不会执行。脚本标签在手动附加到 DOM 之前不会执行。这也回答了它被附加的位置（无论你把它放在哪里），以及它在什么上下文中执行（你将它附加到的窗口）。

如果您询问浏览器何时请求您设置为脚本源的 url，则在设置后请求它，但在将脚本元素附加到 DOM 之前，它不会对获取的代码执行任何操作。如果在您设置类型后看起来 url 正在加载，那是因为浏览器中的每个页面大部分都是单线程的 - 浏览器必须完成执行您的代码才能检查其队列并意识到它应该请求脚本的网址。（这也是你永远不想在文档头部执行 javascript 的原因。）

# php - 将数组发布到/通过 ajax 到 php

> ID：10476010
> 
> 赞同：0
> 
> 时间：2012-05-07T02:28:18.303
> 
> 标签：php, ajax, arrays

所以我有一个从 php 循环创建的数组，如下所示：

```
echo '<input type="checkbox" name="types[]" id="types[]" value="' . $id . '"> ' . $type . '<br>'; 
```

虽然它只是将它传递给 php，但我想做一些更新并将其传递给 ajax 以传递给 php，这样我就可以让 ajax 在页面上为我做一个花哨的返回。

我已经尝试了所有类型的方法来让它传递给 ajax 并传递给 php，但没有任何效果。

这是ajax代码：

```
jQuery(document).ready(function(){

    $('#contactform').submit(function(){

        var action = $(this).attr('action');

        $("#message").slideUp(750,function() {
        $('#message').hide();

        $('#submit')
            .after('<img src="assets/ajax-loader.gif" class="loader" />')
            .attr('disabled','disabled');

        $.post(action, {
            types['types[]']: $('#types').val(),
            form_name: $('#form_name').val(),
            site_id: $('#site_id').val()
        },
            function(data){
                document.getElementById('message').innerHTML = data;
                $('#message').slideDown('slow');
                $('#contactform img.loader').fadeOut('slow',function(){$(this).remove()});
                $('#submit').removeAttr('disabled');
                if(data.match('success') != null) $('#contactform').slideUp('slow');

            }
        );

        });

        return false;

    });

}); 
```

我试图让它也能正常工作，因为网站的其余部分使用相同的功能，我想保持这种方式。我不想在已经创建的页面上删除其他 ajax 内容。

因此，非常感谢任何见解。

谢谢

## 编辑/更新：

所以在设置了像 Meager 这样的线路后解释说：

```
echo '<input type="checkbox" name="types[]" class="types" value="' . $id . '"> ' . $type . '<br>'; 
```

并将ajax代码调整为：

```
 $.post(action, {
        form_name: $('#form_name').val(),
        site_id: $('#site_id').val(),
        types: $('.types').map(function(){ $(this).val(); });

    }, 
```

它似乎只是绕过了 ajax 并直接发布到我的 process.php 文件中：

```
Array
(
    [types] => Array
        (
            [0] => 20
            [1] => 21
            [2] => 22
        )

    [site_id] => 112
    [form_name] => prd_svc
    [Submit] => Submit
) 
```

===========================================

```
jQuery(document).ready(function(){

$('#contactform').submit(function(){

    var action = $(this).attr('action');

    $("#message").slideUp(750,function() {
    $('#message').hide();

    $('#submit')
        .after('<img src="assets/ajax-loader.gif" class="loader" />')
        .attr('disabled','disabled');

    $.post(action, {
        form_name: $('#form_name').val(),
        site_id: $('#site_id').val(),
        types: $('.types').map(function(){ $(this).val(); });

    },
        function(data){
            $('#message').html(data);
            $('#message').slideDown('slow');
            $('#contactform img.loader').fadeOut('slow',function(){$(this).remove()});
            $('#submit').removeAttr('disabled');
            if(data.match('success') != null) $('#contactform').slideUp('slow');

        }
    );

    });

    return false;

});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T02:42:06.317

您尝试通过以下方式创建元素“数组”：`id="types[]"`是错误的。您不能以这种方式对元素进行分组，如果可以的话，这仍然不会返回值数组：`$('#types').val()`.

您必须为每个元素分配一个唯一的 ID，或者给它们一个共享的类并通过它进行选择：

```
echo '<input type="checkbox" name="types[]" class="types" value="' . $id . '"> ' . $type . '<br>'; 
```

然后，要将一组选定的元素转换为它们的值，您可以使用`map`：

```
// Collect all values
$('.types').map(function () { $(this).val(); }); 
```

# php - 如何根据文本格式将文本输入到 php 数组中

> ID：10476011
> 
> 赞同：0
> 
> 时间：2012-05-07T02:28:31.643
> 
> 标签：php, arrays, text

我有一个由 php 打开和读取的文本文档，看起来像这样

```
ABC: 123

DEF: 456

GHI: 789 
```

所以基本上它是以冒号结尾的一段文本，然后是另一段文本。为了分隔行，有一个换行符（即“ \n ”）

是否可以将其放入由冒号和换行符分隔的数组中？因此，当我打印该值时，它应该如下所示：

" ABC:123,DEF:456,GHI:789 "

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T02:33:26.900

您需要做的第一件事是将这些线路分开。

```
$lines = explode("\n", $doctext); 
```

接下来，逐一处理这些行，拆分出适当的值。

```
$output = array();
foreach ($lines as $line) {
    $line_parts = explode(': ', $line, 2); // Limit 2, in case data contains a colon
    $output[$line_parts[0]] = $line_parts[1];
} 
```

然后，您可以在`$output`. 请注意，您还应该对这些行添加一些验证，以确保它们包含您期望的数据。此外，如果行可选地包含冒号和值之间的空格，或可变数量的空格，则在冒号上拆分并根据需要[`trim()`](http://php.net/manual/en/function.trim.php)在值上使用。

# objective-c - 在委托函数中模态显示视图控制器

> ID：10476015
> 
> 赞同：0
> 
> 时间：2012-05-07T02:29:20.273
> 
> 标签：objective-c, ios

`UIViewController`我有一些代码在委托中显示两个。

根视图控制器.m

```
request = [[NSURLRequest alloc] initWithURL:[NSURL URLWithString:@"***some https url here ***"]];
// custom implementation of NSURLConnectionDelegate
dataman = [[DataManager alloc] initWithParentcontroller:self]; 
mainConn = [[NSURLConnection alloc] initWithRequest:request delegate:dataman]; 
```

在 AuthenticationViewController.h

```
@protocol ShowAuthenticationWindowDelegate <NSObject>
@required
- (void) onFinishedEnteringCredentials:(NSURLCredential*)credentials;
- (void) onCancelAuthentication;
@end 
```

在 AuthenticationViewController.m

```
- (IBAction) onClickLogin:(id)sender;
{
    ....
    // authDelegate => id <ShowAuthenticationWindowDelegate>
    [authDelegate onFinishedEnteringCredentials:credentials];
    [self dismissModalViewControllerAnimated:YES];
    ....
} 
```

在 DataManger.h（DataManager 类）中实现`NSURLConnectionDelegate`and `ShowAuthenticationWindowDelegate`。

在 Datamanager.m 在`didReceiveAuthenticationChallenge`委托函数中，我将其显示`AuthentiationViewController`为模式对话框以收集用户名/密码。

```
-(void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
    AuthenticationViewController *authview = [[AuthenticationViewController alloc] initWithNibName:@"AuthenticationViewController" bundle:[NSBundle mainBundle]];
    authview.modalPresentationStyle = UIModalPresentationFullScreen;
    authview.modalTransitionStyle   = UIModalTransitionStyleFlipHorizontal;
    authview.credentialsDelegate = self;
    [rootController presentModalViewController:authview animated:YES];
} 
```

这里我展示了`UIViewController`一个视图中的活动指示器。在我`AuthenticationViewController`通过调用关闭登录按钮事件处理程序之一中的前一个对话框后，我以模态方式显示它`dismissModalViewController`。在发送带有质询对象（以前缓存）的凭据后，我以模态方式显示 ActivityViewController，但**无论我做什么都不会显示**。我试图展示一个`UIAlertView`可行的方法，但没有显示我的 activityviewcontroller。我检查了参数和对象，一切都有效。连代表都接电了！！！所有代码都被调用，但未显示对话框。

**可能是我错过了什么吗？？？**

```
- (void) onFinishedEnteringCredentials:(NSURLCredential*)credentials;
{

    [[authChallenge sender] useCredential:credentials forAuthenticationChallenge:authChallenge];
    // create an activity modal dialog 
    if (activityController == nil) {
        activityController = [[ActivityViewController alloc] initWithNibName:@"ActivityViewController" bundle:[NSBundle mainBundle]];
        activityController.modalPresentationStyle = UIModalPresentationFullScreen;
        activityController.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    }
    [rootController presentModalViewController:activityController animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T23:18:07.373

我已经找到了解决方案，如果有人想背靠背显示两个模态对话框，您应该在正在关闭的控制器上将“动画”参数设置为“否”。下一个控制器使用“presentViewController”功能显示时，动画转换似乎尚未完成。

# java - 在代码中使用绑定类 - JIBX

> ID：10476020
> 
> 赞同：1
> 
> 时间：2012-05-07T02:29:53.833
> 
> 标签：java, xml, xsd, jibx

我成功地绑定了通过 XSD 生成的文件，并且在我的目录中得到了以下文件

```
C:\jibx\tutorial\example25>dir
Volume in drive C is WINDOWS
Volume Serial Number is 1C8F-663E

Directory of C:\jibx\tutorial\example25

05/06/2012  07:12 PM    <DIR>          .
05/06/2012  07:12 PM    <DIR>          ..
05/06/2012  07:12 PM             3,313 Address.class
05/06/2012  07:08 PM             3,447 Address.java
05/06/2012  07:10 PM             2,912 binding.xml
05/06/2012  07:12 PM             2,516 Customer.class
05/06/2012  07:08 PM             1,763 Customer.java
05/06/2012  07:12 PM             2,582 Item.class
05/06/2012  07:08 PM             1,878 Item.java
05/06/2012  07:12 PM             2,529 JiBX_bindingFactory.class
05/06/2012  07:12 PM             2,384 JiBX_bindingMungeAdapter.class
05/06/2012  07:12 PM             2,490 JiBX_bindingOrder_access.class
05/06/2012  07:12 PM             7,539 Order.class
05/06/2012  07:09 PM             4,869 Order.java
05/06/2012  07:11 PM             1,034 Shipping.class
05/06/2012  07:09 PM               879 Shipping.java
05/06/2012  12:22 AM             5,137 starter.xsd
          15 File(s)         45,272 bytes
           2 Dir(s)  160,023,375,872 bytes free 
```

现在我将这些文件复制到 Eclipse 中新创建的 JAVA 项目中，在该项目中创建了一个名为 example25 的包并将这些文件粘贴到那里，然后我使用以下代码并在调试模式下运行它

```
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.util.Iterator;

import org.jibx.runtime.BindingDirectory;
import org.jibx.runtime.IBindingFactory;
import org.jibx.runtime.IMarshallingContext;
import org.jibx.runtime.IUnmarshallingContext;
import org.jibx.runtime.JiBXException;
import example25.*;

public class Test
{

public static void main(String[] args)
{

        try
        {

            // unmarshal customer information from file
            IBindingFactory bfact = BindingDirectory.getFactory(Order.class);
            IUnmarshallingContext uctx = bfact.createUnmarshallingContext();
            FileInputStream in = new FileInputStream("D:\\Java Libraries\\jibx\\dwcode2\\starter.xml");
            Order order = (Order)uctx.unmarshalDocument(in, null);

            // compute the total amount of the order
            float total = 0.0f;
            for (Iterator<Item> iter = order.getItemList().iterator(); iter.hasNext();)
            {
                Item item = iter.next();
                total += item.getPrice() * item.getQuantity();
            }
            order.setTotal(new Float(total));

            // marshal object back out to file (with nice indentation, as UTF-8)
            IMarshallingContext mctx = bfact.createMarshallingContext();
            mctx.setIndent(2);
            FileOutputStream out = new FileOutputStream("c:\\out.xml");
            mctx.setOutput(out, null);
            mctx.marshalDocument(order);
            System.out.println("Processed order with " +  order.getItemList().size() + " items and total value " + total);

        }
        catch (FileNotFoundException e)
        {
            e.printStackTrace();
            System.exit(1);
        } catch (JiBXException e)
        {
            e.printStackTrace();
            System.exit(1);
        }
    }

}//end main 
```

执行第一条语句后出现以下错误

```
Unable to access binding information for class example25.Order
Make sure the binding has been compiled
java.lang.NoSuchFieldException: JiBX_bindingList
at java.lang.Class.getDeclaredField(Unknown Source)
at org.jibx.runtime.BindingDirectory.getBindingList(BindingDirectory.java:68)
at org.jibx.runtime.BindingDirectory.getFactory(BindingDirectory.java:211)
at Test.main(Test.java:24) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:43:27.807

拉杰什，

您在该目录中显示的文件意味着您正确执行了所有操作！

您犯的错误是使用eclipse，因为eclipse会再次自动编译源代码文件（没有您在绑定步骤中添加的绑定信息）

尝试使用您在第一步中生成的类文件运行 Test.class 文件。

你的 java 命令应该是这样的：

```
java -cp C:\directorywithtestclass;C:\jibx\tutorial Test 
```

大学教师

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-22T11:37:45.570

由于 JiBX Binding 编译器修改生成的类文件并使用 binding.xml 放入绑定信息，因此我们需要使用**Binding 编译器**将生成的 .java 文件和 binding.xml 生成类文件。要使用 eclipse 来执行此操作，我们可以按照[此链接](http://jibx.sourceforge.net/bindcomp.html)中的说明使用。

# java - 如何从 Jena 获取嵌套的 RDF/XML？

> ID：10476022
> 
> 赞同：5
> 
> 时间：2012-05-07T02:30:42.123
> 
> 标签：java, rdf, jena

我需要创建如下所示的 RDF：

```
<rdf:Description rdf:about='uri1'>
  <namespace:level1>
    <rdf:Description>
      <namespace:blankNode rdf:resource='uri2'/>
      <namespace:text></namespace:text> 
    </rdf:Description>
  </namespace:level1>
</rdf:Description>

<rdf:Description rdf:about="uri2">
  some properties here
</rdf:Description> 
```

如您所见，有嵌套结构，也有空白节点。（我不知道这是否是我结构中“blankNode”属性的确切术语。）如果我使用

```
model.write(System.out, "RDF/XML-ABBREV"); 
```

然后即使是空白节点也是嵌套的，这是我不想要的。有没有办法使用 Jena 获得这种结构？或者是否有任何其他 Java 库可以更好地处理这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T05:01:49.820

我认为你这样做是错误的。

嵌套是一个只有在谈论树时才有意义的概念。但是 RDF 不是关于树的，而是关于三元组的。暂时忘掉 XML 的结构，想想在 XML 中编码的三元组。我觉得`model.write(System.out, "N-TRIPLES");`最有用的。

您首先需要了解您希望 RDF/XML 文件表达哪些三元组。只要它表达了正确的三元组，一个节点是否嵌套在另一个节点中或事物出现的顺序无关紧要。这些纯粹是“修饰”问题，例如缩进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-22T14:16:13.603

同时，在 RDF4J 中，我发现`org.eclipse.rdf4j.rio.rdfxml.util.RDFXMLPrettyWriter`可以完全按照我的意愿进行操作，生成一个漂亮的嵌套干净且紧凑的嵌套配置 RDFXML 文档。

虽然我同意@cygri，但通常非常希望（例如在咨询情况下）拥有一个易于阅读的 RDFXML，并且 Writer 经常吐出难以消化的 RDF（可能是由于流和内存消耗/速度的优化）。

# html - ios设备中的css问题

> ID：10476023
> 
> 赞同：0
> 
> 时间：2012-05-07T02:31:11.377
> 
> 标签：html, css

请在台式计算机上查看此网站：

[http://www.imageworkz.asia/cranium](http://www.imageworkz.asia/cranium)

此处的页眉和页脚在台式计算机中看起来不错，但如果您在 iPad 或任何移动设备上查看。页眉和页脚看起来好像不完整。

如果你在萤火虫中检查，它们的宽度都设置为 100%，所以我认为没有理由不适应整个 100%。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:34:53.850

您可以使用 css3 媒体查询来定位 ipad 样式：如下所示：

```
<link rel="stylesheet" media="all and (orientation:portrait)" href="portrait.css"> 
<link rel="stylesheet" media="all and (orientation:landscape)" href="landscape.css"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T03:28:18.947

HTML5 样板是响应式的。如果您缩小浏览器尺寸，它会以新的分辨率模拟与 iPad（或其他小型设备）相同的响应。`header`和具有新的`footer`宽度。您可能需要检查 css 媒体查询。

# java - 如何设置 IOConsole 的插入符号

> ID：10476025
> 
> 赞同：2
> 
> 时间：2012-05-07T02:31:25.753
> 
> 标签：java, eclipse-plugin, console, eclipse-rcp, rcp

我正在编写一个创建新控制台的 eclipse 插件。请看我的源代码：

CliConsoleFactory.java

```
import java.io.IOException;

import org.eclipse.jface.text.DocumentEvent;
import org.eclipse.jface.text.IDocument;
import org.eclipse.jface.text.IDocumentListener;
import org.eclipse.ui.IWorkbenchPage;
import org.eclipse.ui.PartInitException;
import org.eclipse.ui.PlatformUI;
import org.eclipse.ui.console.ConsolePlugin;
import org.eclipse.ui.console.IConsole;
import org.eclipse.ui.console.IConsoleConstants;
import org.eclipse.ui.console.IConsoleFactory;
import org.eclipse.ui.console.IConsoleView;
import org.eclipse.ui.console.IOConsoleOutputStream;

public class CliConsoleFactory implements IConsoleFactory {

    private static final String ENTER_KEY = "\r\n";
    private static final String CLI_PROMPT = "CLI> ";
    private IConsoleView m_consoleView = null;

    @Override
    public void openConsole() {

        IWorkbenchPage page = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage();
        try {
            m_consoleView = (IConsoleView) page.showView(IConsoleConstants.ID_CONSOLE_VIEW);
        } catch (PartInitException e1) {
            e1.printStackTrace();
        }
        if (m_consoleView == null) {
            return;
        }

        final MyIOConsole myConsole = new MyIOConsole("CLI", null);

        final IDocument document = myConsole.getDocument();
        document.addDocumentListener(new IDocumentListener() {

            @Override
            public void documentChanged(DocumentEvent event) {
                if (ENTER_KEY.equals(event.getText())) {
                    // Print the Prompt
                    writeToConsole(myConsole, CLI_PROMPT);
                }
            }

            @Override
            public void documentAboutToBeChanged(DocumentEvent event) {
            }
        });

        ConsolePlugin.getDefault().getConsoleManager().addConsoles(new IConsole[] { myConsole });
        m_consoleView.display(myConsole);
        writeToConsole(myConsole, CLI_PROMPT);
    }

    private void writeToConsole(final MyIOConsole myConsole, String msg) {
        IOConsoleOutputStream stream = myConsole.newOutputStream();
        stream.setActivateOnWrite(true);
        try {
            stream.write(msg);
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (stream != null) {
                try {
                    stream.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

MyIOConsole.java

```
import org.eclipse.jface.resource.ImageDescriptor;
import org.eclipse.ui.console.IOConsole;

public class MyIOConsole extends IOConsole {

    public MyIOConsole(String name, ImageDescriptor imageDescriptor) {
        super(name, imageDescriptor);
    }

} 
```

它工作得很好。当我进入一个新行时，提示是“CLI>”，但是插入符号的位置不正确，它在该行的第一个位置而不是最后一个位置。我想让插入符号移到最后一个位置。谁知道请帮帮我。！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T11:57:37.230

要访问插入符号位置，您需要实现一个控制台查看器。

这是我的自定义控制台的设置，

```
public class MyConsole extends IOConsole
{
   ....
        @Override
    public IPageBookViewPage createPage(IConsoleView view) {
        return new MyConsolePage(this, view);
    }
}

public class MyConsolePage extends TextConsolePage
{
   ....
       @Override
    protected TextConsoleViewer createViewer(Composite parent) {
        return new MyConsoleViewer(parent, (MyConsole) this.getConsole());
    }
}

public class MyConsoleViewer extends TextConsoleViewer
{
    //This class gives you access to setting the caret position
    //by getting the styled text widget and then using setCaretOffset
} 
```

有多种获取样式文本小部件的方法，具体取决于您要覆盖的方法。我还创建了自己的控制台历史记录类来跟踪插入符号的偏移量，因为我需要使用向上和向下箭头键来浏览先前输入的命令的附加功能。

实现 MyConsoleViewer 的最佳方式是使用 Eclipse 的大量源代码，这些源代码设置了一个完美的示例。我几乎重用了所有这个类`org.eclipse.ui.internal.console.IOConsoleViewer`。它甚至显示了设置插入符号的示例。

希望这仍然会有所帮助，因为您的问题是不久前提出的。

# php - 这种退出和死亡的特殊处理是否记录在 PHP 中？

> ID：10476028
> 
> 赞同：8
> 
> 时间：2012-05-07T02:32:53.603
> 
> 标签：php, expression, language-construct

我刚刚阅读了 PHP 文档中关于[表达式](http://ca.php.net/manual/en/language.expressions.php)的页面，在顶部它说：

> 定义表达式的最简单但最准确的方法是“任何有价值的东西”。

这个简单的定义包括所有函数和大多数语言结构，但是有一些语言结构明确声明它们不返回值。

以下是确实返回值的语言结构列表：

*   [空的](http://www.php.net/manual/en/function.empty.php)
*   [评估](http://www.php.net/manual/en/function.eval.php)
*   [包括](http://www.php.net/manual/en/function.include.php)
*   [包含一次](http://www.php.net/manual/en/function.include-once.php)
*   [伊塞特](http://www.php.net/manual/en/function.isset.php)
*   [列表](http://www.php.net/manual/en/function.list.php)
*   [要求](http://www.php.net/manual/en/function.require.php)
*   [要求一次](http://www.php.net/manual/en/function.require-once.php)
*   [打印](http://www.php.net/manual/en/function.print.php)

以下是一些有趣的不返回值，因此不是表达式：

*   [死](http://www.php.net/manual/en/function.die.php)
*   [回声](http://www.php.net/manual/en/function.echo.php)
*   [出口](http://www.php.net/manual/en/function.exit.php)
*   [返回](http://www.php.net/manual/en/function.return.php)
*   [未设置](http://www.php.net/manual/en/function.unset.php)
*   [__halt_compiler](http://www.php.net/manual/en/function.halt-compiler.php)

我发现`die`并且`exit`特别感兴趣，因为尽管它们没有返回值，但它们可以用作 PHP 中的表达式。正如预期的那样，以下代码行都会引发语法错误：

```
echo 'Hi' or echo 'Bye';

if(echo('foo'))
     return return(1);

$foo['bar'] = isset($foo['bar']) ? unset($foo['bar']) : 0;

if(unset($foo['bar']))
    __halt_compiler() or die; 
```

然而，以下 PHP 代码完全没有语法错误：

```
print 'Hi' or print 'Bye';    // Makes sense, print returns a value

if(!die() and exit)           // Wait what's happening here?
    quit(die(exit(quit())));  // die and exit don't have return values (does quit?)

$x = true ? die/2 : 5*exit();
$y = pow(die,7);

isset($_GET['bar']) or die(); // This one is actually pretty commonly used.

function quit(){              
    return exit;
} 
```

我浏览了 PHP 文档，找不到任何关于 die() 和 exit() 的特殊处理的提及。是否有任何 PHP 专家知道这是否记录在任何地方。这是预期的行为吗，并且该`isset($_GET['bar']) or die();`模式可以安全使用；它会在 PHP 的未来版本中突然中断吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T16:53:36.317

PHP 不会检测错误，除非在运行时到达代码路径。与许多其他语言不同，它不会在页面“编译”时列出错误 - 因此您只会在执行相应的源代码行时看到错误。

`exit`在您的示例中， or的返回值的评估`die` *从未完成*。PHP 没有报告错误，因为它从一开始就没有尝试评估结果，因为线程退出了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T19:09:10.500

`die`并且`exit`（它们共享`T_EXIT`令牌）属于[`expr_without_variable`](http://lxr.php.net/xref/PHP_TRUNK/Zend/zend_language_parser.y#expr_without_variable)解析阶段的规则，这就是为什么 PHP 乐于将它们放在表达式上下文中而不给出语法错误的原因。

> 是否有任何 PHP 专家知道这是否记录在任何地方。

PHP 手册中没有对*特殊处理*的描述，但是手册页上的[第一个示例](http://php.net/exit#refsect1-function.exit-examples)`exit`显示它被用作`… or exit`.

> 这是预期的行为吗，并且该`isset($_GET['bar']) or die();`模式可以安全使用；它会在 PHP 的未来版本中突然中断吗？

是的。是的。一切皆有可能，但不太可能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T02:38:49.127

一个疯狂的猜测是，`die`并且`exit`确实返回了一个值，但是，它**永远不会**被返回，因为执行在返回之前就停止了。

这可能是为了给`die`and`exit`函数添加一些“有用性”而实现的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T16:24:38.553

die 和 exit 返回值，但是该值必须由调用 PHP 脚本的程序使用。[此评论](http://www.php.net/manual/en/function.exit.php#61987)描述了该行为。

# c++ - 将错误从链接时移动到编译时

> ID：10476031
> 
> 赞同：0
> 
> 时间：2012-05-07T02:33:34.090
> 
> 标签：c++, hyperlink, copy-constructor, compile-time

我声明了一个类`copy-ctor`并`operator=` `private`使其对象不可复制，并且不为它们提供定义。所以如果类在这些对象上`friends`调用，就会发生错误，对吧？`copying behavior``link-time`

```
class A
{
    public:
        ...

    private:
        A(const &a);
        A& operator=(const &a);  //just declarations, no definitions
}; 
```

但是为了将错误从`link-time`移到`compile-time`，我从一本书中了解到我可以这样做：

```
class UnCopyable
{
    public:
        ...

    private:
        Uncopyable(const &u);
        Uncopyable& operator=(const &u);  //also no definitions
}; 
```

然后进行`A`继承`Uncopyable`，

```
class A: private Uncopyable
{
    ...
}; 
```

并且在书中说，如果有人在 上调用复制`A`，那么`A`应该首先调用`Uncopyable`' 复制对应方，但是`Uncopyable`'`copy-ctor`和`operator=`是私有的，所以这会失败并且会出现错误，这会发生在`compile-time`.

我的问题是为什么会发生这种情况`compile-time`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T02:38:02.733

因为违反语言语义是编译时错误，而链接时错误是由于声明了函数但链接器找不到它的定义而导致的错误。

换句话说，链接器错误意味着您的程序是一个有效的 C++ 程序，并且已经进入链接阶段，链接器只是修补对其他编译单元中函数的引用（因为编译器一次只考虑一个编译单元）但是它到处搜索，找不到定义。编译时错误意味着您的程序以某种方式违反了 C++ 规则。

**但是**，您的假设有点不正确。对试图分配这些对象的人来说，这样做`operator=` `private` *会导致编译时错误。*只有当一个函数可以访问该类的私有函数（例如`friend`函数或成员函数）时，才会出现链接器错误，*然后*您会得到链接器错误。

# cakephp - 上传插件问题

> ID：10476033
> 
> 赞同：0
> 
> 时间：2012-05-07T02:33:48.097
> 
> 标签：cakephp, plugins, file-upload, cakephp-2.2

试图让[CakePHP 上传插件](https://github.com/josegonzalez/upload)工作。文件上传正常，缩略图被创建......等等，但有一些问题：

-“上传”表中的“名称”字段为空

-“上传”表中的“上传”字段为空（文档示例中的“附件”字段）

- 如果我在上传模型中设置的“路径”中使用 {model}，它使用“上传”作为模型文件夹 - 它应该放在关联模型的文件夹中，而不是每次都上传模型

```
//Upload MODEL
public $actsAs = array(
    'Upload.Upload' => array(
        'photo' => array(
            'thumbnailSizes' => array(
                'xvga' => '1024x768',
                'vga' => '640x480',
                'thumb' => '80x80',
            ),
            'thumbnailMethod' => 'php',
            'path' => '{ROOT}webroot{DS}uploads{DS}{model}{DS}{field}{DS}', 
            'maxSize' => '5242880', //5MB
            'mimetypes' => array('image/jpeg', 'image/png', 'image/gif', 'image/bmp'),
            'extensions' => array('jpg', 'gif', 'png'),
        ),
    )
);

//ArticleData MODEL
public $hasMany = array(
    'Upload' => array(
        'className' => 'Upload',
        'foreignKey' => 'foreign_key',
        'conditions' => array(
            'Upload.model' => 'ArticleData',
        ),
    ),
);

//CONTROLLER
public function admin_upload() {        
    if(!empty($this->request->data)) {
        $this->loadModel('Upload');
        debug($this->request->data);
        if($this->Upload->save($this->request->data)) {
            $this->Session->setFlash('SAVED!!!!!!!!');
        } else {
            $this->Session->setFlash('NOT SAVED!!!!!!!!');
        }
    }
}

// VIEW
echo $this->Form->create('ArticleData', array('type'=>'file'));
echo $this->Form->input('Upload.model', array('type'=>'hidden', 'value'=>'ArticleData'));
echo $this->Form->input('Upload.foreign_key', array('type'=>'hidden', 'value'=>'4f93676e-347c-4e0c-8e6c-0a3cadcd7f7c'));
echo $this->Form->input('Upload.photo', array('type'=>'file'));
echo $this->Form->end('Submit'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T23:58:43.847

戴夫：

> -“上传”表中的“名称”字段为空

这很正常，我认为更多的是“显示”名称字段而不是“文件名”字段。该名称应存储在示例中的“照片”字段中。

> - 如果我在上传模型中设置的“路径”中使用 {model}，它使用“上传”作为模型文件夹 - 它应该放在关联模型的文件夹中，而不是每次都上传模型

您需要给模型起别名，如下所示：

```
//ArticleData MODEL
public $hasMany = array(
    'AliasModelHere' => array(
        'className' => 'Upload',
        'foreignKey' => 'foreign_key',
        'conditions' => array(
            'Upload.model' => 'ArticleData',
        ),
    ),
);

// Then

$this->ArticleData->AliasModelHere->save($data) 
```

# iphone - 生产代码：在调用 abort/exit(-1) 之前显示一条消息

> ID：10476036
> 
> 赞同：2
> 
> 时间：2012-05-07T02:34:15.497
> 
> 标签：iphone, objective-c, xcode, core-data, uialertview

所以这与核心数据异常有关。我知道这不太可能，但如果它发生，并且我无法从错误中恢复，我想打电话

```
abort(); 
```

但是，在调用 abort 之前，我想显示一条消息，例如

```
There is an unrecoverable error. The app is going to shut down. 
```

我该如何做到这一点？使用 alertView 不起作用，因为在应用程序有机会显示消息之前调用了 abort()。

同样在这一点上，我想阻止线程进一步执行任何代码。这几乎就像强行使应用程序崩溃......但是通过在此之前显示一条消息来优雅地做到这一点。

谢谢mbh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T14:11:34.920

以编程方式终止您的应用程序的执行违反了 Apple 的人机界面指南，这将导致 Apple 拒绝您的应用程序。

*   [iOS 人机界面指南：用户体验指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW27)
*   [ios - 退出我的 iPhone 应用程序的按钮是否违反了 Apple 的指导方针？- 堆栈溢出](https://stackoverflow.com/questions/7155157/would-a-button-to-exit-my-iphone-app-be-in-violation-of-apples-guidelines)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:18:45.953

我认为几乎总是可以从核心数据异常中恢复`[moc save:error]`。保存不成功后，您可以这样做`[moc rollback]`-恢复应该足够了。最终你可以忘记所有的变化`[moc reset]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T03:00:54.600

显示警报视图， call `return;`，然后在 UIAlertView 的按钮上点击 call `abort();`。

祝你好运 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T03:13:44.880

当按下 ok 按钮时，在其委托中使用`UIAlertView`and 调用。`abort()`

# jquery - 遍历 JSON 以动态创建多个 JQuery 移动页面

> ID：10476037
> 
> 赞同：1
> 
> 时间：2012-05-07T02:34:27.277
> 
> 标签：jquery, json, jquery-mobile

我正在学习 JQuery mobile 并帮助我走上我正在寻找示例问题解决方案的道路。我想遍历 JSON 查询以在单个 HTML 页面中动态创建多个页面（请参阅多页[http://jquerymobile.com/test/docs/pages/multipage-template.html](http://jquerymobile.com/test/docs/pages/multipage-template.html)）。理想情况下，每个页面都有一个前进和后退按钮，用于通过 JQuery 移动页面前进/后退。

更新：到目前为止我所拥有的；

```
<!DOCTYPE html>
<html lang="en">
 <head>
  <title>Get JSONP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
  <script type="text/javascript" src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>
 </head>
<body>
<div id="target">
<script>
// best to put this code in an external .js file
var loadtwitter = function() {

  $.getJSON('http://search.twitter.com/search.json' + '?q=jquery&callback=?', function(data) {
     $.each(data.results, function(index, value) {
       var o1 = "<div data-role='page' id='page" + index +"' data-title='Twitter Item " + index +"'>";
       var o2 = "<div data-role='header'><h1>Item " + index + "</h1></div>"; 
       var o3 = "<div data-role='content'><p>" + value.text + "</p>";
       var o4 = "<a href='#page" + (index - 1) + "' data-role='button' data-inline='true' data-icon='arrow-l'>Previous</a>";
       var o5 = "<a href='#page" + (index + 1) + "' data-role='button' data-inline='true' data-icon='arrow-r'>Next</a>";
       var o6 = "</div>";           
       var output = o1 + o2 + o3 + o4 + o5 + o6;  
       $('#target').append(output);
     });

    }); 
   $.mobile.changePage($("#page1"));
  };

  $(document).ready(loadtwitter);
 </script>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T07:11:26.143

如果您使用的是 jquery mobile，则不应依赖 $(document).ready。您最好使用从[jQuery docs](http://jquerymobile.com/test/docs/pages/page-dynamic.html)借来的以下模式。

```
$(document).bind( "pagebeforechange", function( e, data ) {
            loadtwitter();
            e.preventDefault();
        }
    }
}); 
```

# sql - 将某些 SQL Server 行的一部分复制到同一数据库中

> ID：10476040
> 
> 赞同：1
> 
> 时间：2012-05-07T02:35:13.027
> 
> 标签：sql, sql-server-2008

我有一个 SQL Server 数据库，我想在其中复制部分行，而行的另一部分需要用新数据填充并放入同一个表中。例如：

表名：预算

```
ItemID   Item   Date
1         A     4/22/2012
2         B     4/15/2012
3         C     4/24/2012 
```

当我复制表时，我想将列复制到同一个表中`item`，而不是列。`date`该`date`列将获取今天的日期，但 Item 将复制行。如下所示。

表名：预算

```
ItemID   Item   Date
1         A     4/22/2012
2         B     4/15/2012
3         C     4/24/2012
4         A     5/6/2012
5         B     5/6/2012
6         C     5/6/2012 
```

我试过了：

```
SELECT Item 
INTO Budget 
FROM Budget 
```

但我得到错误

> 数据库中已经有一个名为“预算”的对象。

另外，我不确定在复制行后如何用新`date`数据填充列的其余部分。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T02:40:49.327

您需要尝试插入。生成一个包含新行的查询，然后尝试以下操作：

```
Insert into <table>
    Select *
    From <q> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T02:42:05.337

您正在尝试创建一个名为“Budget”的新表，该表已通过“SELECT INTO”语句存在。

您的 ItemID 是自动递增的吗？试试这个。

```
SELECT * into Budget FROM Budget_Temp

INSERT INTO Budget(Item,Date)
SELECT Item,'5/6/2012' FROM Budget_Temp

DROP TABLE Budget_Temp 
```

# codeigniter - CodeIgniter：current_url 显示问号

> ID：10476042
> 
> 赞同：1
> 
> 时间：2012-05-07T02:35:17.650
> 
> 标签：codeigniter, codeigniter-2, codeigniter-url

假设我的页面在：

`http://localhost/app1/profile/index/123/`

current_url() 的结果是这样的：

`http://localhost/app1/?profile/index/123`

有一个`?`不应该在那里。问号似乎是由以下配置设置引起的：

`$config['enable_query_strings'] = TRUE;`

我需要在我的应用程序中启用查询字符串。有什么想法我需要做什么吗？

**编辑1：**

此外，如果 URL 确实有查询字符串，我需要 current_url 也返回它。我希望 Phil Sturgeon 的解决方案[CodeIgniter current_url does not show query strings](https://stackoverflow.com/questions/4160377/codeigniter-current-url-doesnt-show-query-strings)对我有帮助。

我正在使用 CI 2.1.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:49:25.343

如前所述，当没有支持（真的，没有）`$config['enable_query_strings']`时，这是 Codeigniter 中的一种“遗留”设置。`$_GET`

> [http://codeigniter.com/user_guide/general/urls.html](http://codeigniter.com/user_guide/general/urls.html)
> 
> ### 启用查询字符串
> 
> 在某些情况下，您可能更喜欢使用查询字符串 URL：
> `index.php?c=products&m=view&id=345`

`c`=== 您的控制器名称 `m`=== 您的方法名称

其余的是方法参数。这是一个非常具有误导性的描述，并且在 URL 文档的其余部分中根本没有提及其他设置或查询字符串。我从来没有听说过有人真正使用它。CI`$config['allow_get_array']= TRUE;`默认自带，这就是你想要的。

您可以修改`current_url()`查询字符串支持的函数，只需创建`application/helpers/MY_url_helper.php`并使用它：

```
function current_url($query_string = FALSE)
{
    $CI =& get_instance();
    $current_url = $CI->config->site_url($CI->uri->uri_string());

    // BEGIN MODIFICATION
    if ($query_string === TRUE)
    {
        // Use your preferred method of fetching the query string
        $current_url .= '?'.http_build_query($_GET);
    }
    // END MODIFICATION

    return $current_url;
} 
```

然后像`current_url(TRUE)`包含查询字符串一样调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T02:46:18.457

不要使用：`$config['enable_query_strings'] = TRUE;`

改用这个：`$config['allow_get_array']= TRUE;`

`enable_query_strings`不是你想的那样，用的不多。

要构建您自己的查询字符串，请使用以下两者之一：

```
$query_string = http_build_query($this->input->get());
$query_string = $this->input->server('QUERY_STRING'); 
```

除此之外：

```
$lastseg_with_query = $lastseg.'?'.$query_string; 
```

有关更多信息，请参阅此 SO Q&A：[带有问号的 URI 段](https://stackoverflow.com/questions/10464940/uri-segment-with-question-mark/10465002#10465002)

# core-data - 核心数据声明删除 ItemsAtIndex 方法导致无法识别的选择器

> ID：10476043
> 
> 赞同：1
> 
> 时间：2012-05-07T02:35:17.820
> 
> 标签：core-data

我有一个与 ListItems 有有序关系的核心数据“列表”实体。

Core Data 本身，在 .h 中生成一个方法，

```
- (void)removeListItemsAtIndexes:(NSIndexSet *)indexes; 
```

但是，当我尝试调用该方法时，应用程序在运行时崩溃，说明它是一个无法识别的选择器。

这个方法真的没有实现吗？如果没有实现，Core Data 为什么要声明它？我应该做其他事情来完成这项工作吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:23:21.780

你应该看看这篇文章： [problems-with-nsorderedset](https://stackoverflow.com/questions/7385439/problems-with-nsorderedset)

这是狮子应用程序，但我认为问题是一样的。

# php - 用 php 定义带变量的数组值

> ID：10476047
> 
> 赞同：0
> 
> 时间：2012-05-07T02:36:12.860
> 
> 标签：php, arrays, variables

我正在使用`$_POST`将数据发布到 php 文件。在那个 php 文件中，我有以下内容。

```
$params = array(
        'name' => "$fname",
        'email' => "$email",
        'ad_tracking' => 'test',
        'ip_address' => '$_SERVER["REMOTE_ADDR"]',
    );
    $subscribers = $list->subscribers;
    $new_subscriber = $subscribers->create($params); 
```

`$_POST`使用数据定义数组中每个键的值的最佳方法是什么？的使用`$_SERVER["REMOTE_ADDR"]`也没有像希望的那样工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T02:51:31.833

POST variables are passed via the super global array `$_POST` in PHP. So in your case, this would technically work:

```
$params = array(
    'name' => $_POST['fname'],
    'email' => $_POST['email'],
    'ad_tracking' => 'test',
    'ip_address' => $_SERVER['REMOTE_ADDR'],
); 
```

Your code for `$_SERVER["REMOTE_ADDR"]` was enclosed in single quotes, which in PHP means a verbatim string (i.e. without variable interpolation).

Btw, you should think of input filtering too - [http://www.php.net/filter](http://www.php.net/filter)

To give you an example, this would perform input filtering in your current case:

```
$filtered = filter_input_array(INPUT_POST, array(
    'fname' => FILTER_SANITIZE_STRING,
    'email' => FILTER_VALIDATE_EMAIL,
); 
```

Each value inside `$filtered` will either have a value (valid), be `NULL` (not present) or `false` (invalid).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T02:42:10.857

关于“使用 $_SERVER["REMOTE_ADDR"] 也没有像希望的那样工作。”：单引号不评估 php 变量

```
$params = array(
    'name' => $_POST["fname"],
    'email' => $_POST["email"],
    'ad_tracking' => 'test',
    'ip_address' => $_SERVER["REMOTE_ADDR"],
);
$subscribers = $list->subscribers;
$new_subscriber = $subscribers->create($params); 
```

# haskell - 不在范围内：数据构造函数

> ID：10476050
> 
> 赞同：5
> 
> 时间：2012-05-07T02:36:51.377
> 
> 标签：haskell

我写了一个程序，`haskell`但我从 ghci 得到了错误

这是源代码，我构建它，如果我有

```
p1 :: Prop
p1 = And (Var 'A') (Not (Var 'A')) 
```

它将显示`A && ~A`这是源代码

```
import Data.List
import Data.Char
data Prop = Const Bool | 
        Var Char | 
        Not Prop | 
        And Prop Prop | 
        Or Prop Prop | 
        Imply Prop Prop
        deriving Eq
instance Show Prop where
  show (Var Char) = show Char
  show (Not Prop) = "(~" ++ show Prop ++ ")"
  show (And Prop Prop) = "(" ++ show Prop ++ "&&" ++ show Prop ++ ")"
  show (Or Prop Prop) = "(" ++ show Prop "||" ++ show Prop ++ ")"
  show (Imply Prop Prop) = "(" ++ show Prop "=>" show Prop ++ ")" 
```

我从 ghci 得到了两个主要错误......

```
Not in scope: data constructor `Char'
Not in scope: data constructor `Prop' 
```

我是haskell的初学者，非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T02:56:11.287

以大写字母开头的值名称是为*构造函数*保留的，例如`Var`, `True`,`False`等。变量必须以小写字母开头。

此外，您不能对两个不同的变量使用相同的名称。每次使用它们时，Haskell 怎么知道你指的是哪一个？您不能简单地将构造函数的定义用作函数中的模式；您需要为每个字段指定一个单独的名称。

所以，而不是`Var Char`，写`Var name`; 而不是`Imply Prop Prop`，写`Imply p q`（或`Imply prop1 prop2`），等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T02:56:38.667

稍作修改即可使其正常工作：

```
instance Show Prop where
  show (Var c) = [c]
  show (Not p) = "(~" ++ show p ++ ")"
  show (And p1 p2) = "(" ++ show p1 ++ " && " ++ show p2 ++ ")"
  show (Or p1 p2) = "(" ++ show p1 ++ "||" ++ show p2 ++ ")"
  show (Imply p1 p2) = "(" ++ show p1 ++ "=>" ++ show p2 ++ ")" 
```

# java - 运行方法中的 java.io.OptionalDataException？

> ID：10476056
> 
> 赞同：0
> 
> 时间：2012-05-07T02:37:36.900
> 
> 标签：java, networking, client

为什么我`java.io.OptionalDataException`在 run 方法中收到？

ObjectInputStream 多次读取项目和用户，然后它与`OptionalDataException`. 我认为这有关`EOFException`。

创建新套接字时打印一条消息 它打印 objectInputStream 的值 它还打印消息

### 堆栈跟踪 + 消息

已创建新套接字 已
创建新套接字 已创建
新套接字
这里是 ObjectInputStream :java.io.ObjectInputStream@1430b5c
这里是消息 :REA:ITEM:
这里是 ObjectInputStream :java.io.ObjectInputStream@1decdec <
这里是消息 :ADD:ITEM:
新套接字created
New socket created
Here is ObjectInputStream :java.io.ObjectInputStream@b2fd8f
Here is message :REA:ITEM:
New socket created
**java.io.OptionalDataException**
                   at java.io.ObjectInputStream.readObject0(Unknown Source)
                   at java.io.ObjectInputStream。
                   在 fedaih.SocketTask.run(SocketTask.java:55) 处读取对象（未知来源）
                   在 java.lang.Thread.run(Unknown Source)
创建了新套接字
这里是 ObjectInputStream :java.io.ObjectInputStream@1c39a2d
这里是消息 :REA:USER:
这里是 ObjectInputStream :java.io.ObjectInputStream@13bad12
这里是消息 :ADD :USER:
New socket created
New socket created
Here is ObjectInputStream :java.io.ObjectInputStream@eb7859
这是消息 :REA:USER:
**java.io.OptionalDataException**
                   at java.io.ObjectInputStream.readObject0(Unknown Source)
                   at java.io。 ObjectInputStream.readObject(Unknown Source)
                   at fedaih.SocketTask.run(SocketTask.java:55)
                   在 java.lang.Thread.run（未知来源）

```
public void run() {

    try {
        ObjectOutputStream objectOutputStream = new ObjectOutputStream(outputStream);
        ObjectInputStream objectInputStream = new ObjectInputStream(inputStream);
        User user = null;
        Item item = null;
        String upc = null;
        String username = null;

        // This is the line where the error occurs
        String message = (String) objectInputStream.readObject();
        switch (message) {

            case "REA:ITEM:":   upc = (String) objectInputStream.readObject();
                                item = inventoryFileManager.readItem(upc);
                                objectOutputStream.writeObject(item);
                                objectOutputStream.flush();
                                break;

            case "REA:USER:":   username = (String) objectInputStream.readObject();
                                user = userFileManager.readUser(username);
                                objectOutputStream.writeObject(user);
                                objectOutputStream.flush();
                                break;

            case "REM:ITEM:":   upc = (String) objectInputStream.readObject();
                                inventoryFileManager.removeItem(upc);
                                break;

            case "REM:USER:":   username = (String) objectInputStream.readObject();
                                userFileManager.removeUser(username);
                                break;

            case "ADD:ITEM:":   item = (Item) objectInputStream.readObject();
                                if (item != null) {
                                        inventoryFileManager.addItem(item);
                                }
                                break;

            case "ADD:USER:":   user = (User) objectInputStream.readObject();
                                if (user != null) {
                                        userFileManager.addUser(user);
                                }
                                break;

            case "UPD:ITEM:":   item = (Item) objectInputStream.readObject();
                                inventoryFileManager.updateItem(item);
                                break;

            case "UPD:USER:":   user = (User) objectInputStream.readObject();
                                userFileManager.updateUser(user);
                                break;

            case "ALL:ITEM:":   objectOutputStream.writeObject(inventoryFileManager.readAllItems());
                                objectOutputStream.flush();
                                break;

            case "ALL:USER:":   objectOutputStream.writeObject(userFileManager.readAllUsers());
                                objectOutputStream.flush();
        }
        objectOutputStream.close();
        objectInputStream.close();

    } catch (IOException e) {
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } catch (PointOfSaleException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T03:55:01.710

javadoc 对异常的解释如下：

> 异常指示由于未读取的原始数据或流中属于序列化对象的数据结束而导致对象读取操作失败。在两种情况下可能会抛出此异常：
> 
> *   当流中的下一个元素是原始数据时，尝试读取对象。在这种情况下，OptionalDataException 的长度字段设置为可立即从流中读取的原始数据的字节数，并且 eof 字段设置为 false。
> *   试图通过类定义的 readObject 或 readExternal 方法读取数据的末尾。在这种情况下，OptionalDataException 的 eof 字段设置为 true，长度字段设置为 0。

简而言之，写入套接字的内容与您的代码试图读取的内容之间存在不匹配。要深入了解这一点，您需要：

*   找出异常和异常中的值是什么`eof`，`length`以及
*   限制发生故障的环境。

然后，将您的代码与编写对象的代码进行比较，并（使用上面的证据）找出不匹配的地方。

# objective-c - malloc + 自动引用计数？

> ID：10476057
> 
> 赞同：10
> 
> 时间：2012-05-07T02:37:49.083
> 
> 标签：objective-c, malloc, automatic-ref-counting

如果我使用 malloc 和自动引用计数，我还需要手动释放内存吗？

```
int a[100];
int *b = malloc(sizeof(int) * 100);
free(b); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-07T02:50:41.813

Yes, you have to code the call to `free` yourself. However, your pointer may participate in the reference counting system *indirectly* if you put it in an instance of a reference-counted object:

```
@interface MyObj : NSObject {
    int *buf;
}
@end

@implementation MyObj

-(id)init {
    self = [super init];
    if (self) {
        buf = malloc(100*sizeof(int));
    }
}
-(void)dealloc {
    free(buf);
}

@end 
```

There is no way around writing that call to `free` - one way or the other, you have to have it in your code.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T02:38:30.780

是的。ARC 仅适用于 Objective-C 实例，不适用于`malloc()`and `free()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-14T18:11:37.137

[NSData](https://developer.apple.com/documentation/foundation/nsdata)的一些“NoCopy”变体可以与对 malloc 的调用配对，这将使您不必释放任何东西。

[NSMutableData](https://developer.apple.com/documentation/foundation/nsmutabledata)可以用作 calloc 的更高开销版本，它提供了 ARC 的便利性和安全性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-15T15:24:59.547

在 dealloc 中添加一个 if not nil 并分配给 nil 以确保安全。不想释放 nil，malloc 可能会在 init 等之外使用。

```
@interface MyObj : NSObject {
    int *buf;
}
@end

@implementation MyObj

-(id)init {
    self = [super init];
    if (self) {
        buf = malloc(100*sizeof(int));
    }
}

-(void)dealloc {
    if(buf != null) {
        free(buf);
        buf = null;
    }
}

@end 
```

# asp.net - Gridview 行、切换按钮文本和行属性在回发时恢复为原始 - 如何修复？

> ID：10476059
> 
> 赞同：0
> 
> 时间：2012-05-07T02:37:58.100
> 
> 标签：asp.net, gridview

这很奇怪。我有一个gridview，每行都有项目模板复选框和按钮。我正在切换按钮的文本值（使用 JQuery），代表用户将行添加到购物车中以进行购买。我在表单上有一个与 gridview 分开的按钮，单击该按钮时会在后面的代码中引发一个事件，以旋转行并处理选定的（切换按钮文本）行。但是发生的事情是在按下处理按钮时，网格行将恢复到其原始状态（原始按钮文本以及先前选择的行的修改行属性）。我没有重新绑定网格。这也不是更新网格。现在复选框一直工作得很好，但按钮文本显然非常不同。谁能告诉我为什么会发生这种情况以及我该如何纠正它？我的一个想法是创建一列隐藏的复选框，当我切换按钮文本时，我也可以切换复选框。但我当然希望我能理解为什么会这样。此外，在检查了进程按钮的回发时，屏幕也以原始状态呈现。

这是我的带有复选框和按钮的网格：

```
 <div class="OneHundredPercentWide" style="padding-top:7px">
        <asp:Panel ID="Panel1" runat="server" Width="100%" >
            <asp:GridView id="grvSessionOrderDownloads" runat="server" BorderWidth="2px" BorderStyle="Solid" BorderColor="#C0C0FF"
                Font-Names="Arial" Font-Bold="True" Font-Size="8pt" GridLines="Horizontal" AutoGenerateColumns="False" 
                HorizontalAlign="Left" ForeColor="Blue" CellPadding="2" AllowSorting="True" Width="100%" 
                OnRowDataBound="grvSessionOrderDownloads_OnRowDataBound" DataKeyNames="SORD_ID">

                <HeaderStyle Font-Names="Arial" HorizontalAlign="Center" ForeColor="White" BackColor="#152EE5" 
                    CssClass="sessionOrderDownloadHeaders" />
                <RowStyle BackColor="White" ForeColor="#333333" />
                <AlternatingRowStyle BackColor="#A5B0FF" />
                <Columns>
                    <asp:BoundField Visible="False" DataField="SORD_ID" HeaderStyle-Width="0px" >
                <HeaderStyle Width="0px" />
                    </asp:BoundField>
                   <asp:TemplateField HeaderText="Select <br /> Files" HeaderStyle-ForeColor="White" > 
                 <ItemTemplate >
                            <asp:CheckBox ID="chkSelectVideo" runat="server" OnClick="checkboxClicked(this)" ToolTip="Select file for download" 
                                Enabled='<%# Eval("SORD_EnableSelectionCheckBox") %>' Checked='<%# Eval("SORD_SelectedForDownloadFlag") %>' />
                  </ItemTemplate>
                        <HeaderStyle Width="6%" />
                        <ItemStyle VerticalAlign="Middle" HorizontalAlign="Center" />
                    </asp:TemplateField><asp:TemplateField HeaderText="Prior <br /> Downld" HeaderStyle-ForeColor="White" > 
                        <ItemTemplate >
                            <asp:Button id="btnBuy" runat="server" OnClientClick="btnBuyToggle(this); return false;"
                                 Text="BUY This" CssClass="buyButton" Visible='<%# Eval("SORD_ShowBuyButton") %>' />
                         </ItemTemplate>
                        <HeaderStyle Width="7%" />
                        <ItemStyle CssClass="sessionOrderDownloadItems" VerticalAlign="Middle" HorizontalAlign="Center" />
                    </asp:TemplateField>
                </Columns>
             </asp:GridView> 
```

这是我检查按钮文本的代码的一部分：

```
Dim gvr As GridViewRow
    For Each gvr In grvSessionOrderDownloads.Rows
        Dim selBtn As Button = CType(gvr.FindControl("btnBuy"), Button)
        If Not selBtn Is Nothing Then
            If selBtn.Enabled And selBtn.Visible Then
                Dim strSORD_ID As String = grvSessionOrderDownloads.DataKeys(gvr.RowIndex)("SORD_ID").ToString
                If selBtn.Text = "BUY Video" Then
                    // Note: I will process here
                End If
            End If
        End If
    Next 
```

谢谢你，吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:50:30.893

复选框更改一旦在浏览器中更改，就会发送回服务器。但是当你使用 JS 更改网格中按钮（或其他字段）的文本时，更改的按钮文本（或其他字段）不会发送到服务器。因此，当按钮在下一个帖子中呈现时，它使用原始默认值“购买此”。

为了保留按钮文本，您必须与按钮一起创建一个隐藏字段。当您更改按钮的文本时（在 OnClientClick JS 事件中），同时更改隐藏字段的值。隐藏字段更改被发送到服务器，这可以帮助您在流程按钮单击事件中读取它们。

# mysql - mysql查询orderby groupby，

> ID：10476063
> 
> 赞同：2
> 
> 时间：2012-05-07T02:38:42.403
> 
> 标签：mysql, group-by, sql-order-by

我有一个包含以下关键字段的表：`commentid`, `comment`, `time`,`parentid`

评论有两种类型，`regular`和`replies`。正则有parentid 0；回复的 parentid 等于他们回复的 commentid。

我以为我已经通过 group by 和 orderby 解决了这个问题，但我的想法没有奏效，我现在正在苦苦挣扎，因为我对 sql 的了解还很初级。

我希望它按时间 DESC 显示，除了我希望将具有相同 parentid 的那些组合在一起并在该 parentid 内，它们也按时间排序。我只允许一级答复。

例如，我想要以下顺序：

```
time3 commentid3 parentid0
time2 commentid2 parentid0
    parentid2 commentid4 time4 (this one is a reply)
    parentid2 commentid5 time5 (this one also reply)
time1 comment1 parentid0 
```

我试过`SELECT * from comments GROUP BY parentid ORDER BY TIME DESC`了，但这没有用。如果需要，我可以添加另一列。任何建议，将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T03:05:53.933

我在这里做一些假设。我假设您的 commentid 是一个自动递增的 id，所以这意味着插入顺序将从最旧到最新。如果您没有使用自动递增的 id 或者您对这些表有某种部分保存功能，这将不起作用。所以有点脆弱。

如果它是父级，我还假设 parent_id 为空。

```
SELECT commentid, comment, time, parent_id, if(parent_id = 0, commentid, parent_id) thread 
FROM comments  
ORDER BY thread desc, time asc 
```

无论如何要添加更多信息。

`Group By`不是您想要使用的，因为它将按分组列将所有行分组为一行。`Group By`通常用于聚合计算，例如对行中的值进行计数或求和等。

编辑：

我更新了查询以按时间 asc 排序，这将把常规评论放在第一位，然后是父评论下方的回复，从最旧到最新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T08:50:34.737

您无法从 sql 查询中检索“树状”结果（有很多方法，但它们似乎在这里实际上不可用）

您可以做的是从常规和回复中检索所有数据（这意味着如果“常规”数据有很多回复，则将被复制，并且您必须在获取数据后对其进行处理，以获得“树”结果)

结果看起来像这样

```
regular.time, regular.commentid, replies.commentid, replies.time 
```

如果常规没有评论，replies.commentid 和replies.time 将为空

查询（带有“self left join”）看起来像这样（我移动了一些现在似乎没用的字段）

```
select 
regular.time as regulartime,
regular.commentid as regularid, 
replies.commentid as repliesid, 
replies.time as repliestime
from comments regular
left join comments replies on replies.parentid = parent.commentid
where regular.parentid = 0
order by regular.time desc, replies.time asc 
```

按照你的例子，你应该得到

```
time3 commentid3 null       null
time2 commentid2 commentid4 time4 (this one is a reply)
time2 commentid2 commentid5 time5 (this one also reply)
time1 commentid1 null       nulll 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T11:15:16.097

要获取数据的两层，您将需要原始评论的最顶层的 UNION，以及任何可能的回复的 UNION。查询第一部分的第一列将包含 1 或 2 用于排序目的。这将用于将原始帖子浮动到给定问题的组顶部......然后，所有回复将在此之后按自然顺序显示。

此外，为了保留按原始日期/时间进行的正确分组，我将原始发表评论时间与“2”评论类型记录一起保留，因此它们确实以完全相同的原始时间开始分组，但获取实际评论和时间RESPONSE（别名“r”）用于各自的排序。

```
select
      PreQuery.*
   from
      ( select
              '1' as CommentType,
              c.Time as OriginalTime,
              c.CommentID StartingCommentID,
              c.Comment,
              c.Time as LastTime,
              c.CommentID as EndCommentID
           from
              comments c
           where
              c.ParentID = 0
        UNION ALL
        select 
              '2' as CommentType,
              c.Time as OriginalTime,
              c.CommentID StartingCommentID,
              r.Comment,
              r.Time as LastTime,
              r.CommentID as EndCommentID
           from
              comments c
                 join comments r
                    on c.CommentID = r.ParentID
           where
              c.ParentID = 0 ) PreQuery
   order by
      PreQuery.OriginalTime DESC,
      PreQuery.StartingCommentID,
      PreQuery.CommentType,
      PreQuery.LastTime 
```

这应该会给你我认为你正在寻找的结果（稍作修改）

```
CommentType  OriginalTime  StartingCommentID  Comment  LastTime  EndCommentID
1            Time3         ID3                Comm3    Time3     ID3  <-- ID 3 IS the start
1            Time2         ID2                Comm2    Time2     ID2  <-- ID 2 is the start of next
2            Time2         ID2                Comm4    Time4     ID4     <- ID4 is reply to orig ID2
2            Time2         ID2                Comm5    Time5     ID5     <- another reply to ID2
1            Time1         ID1                Comm1    Time1     ID1  <-- start of new comment ID1 
```

因此，对于所有行，第 2 列和第 3 列将始终表示开始第一个评论的父 ID...对于评论类型 = 1 的那些，评论、最后一次和结束评论 ID 是来自开始评论。对于comment type = 2，最终评论、最后一次和结束评论将是RESPONSE记录的ID。

# html - 使用电子表格数据填充电子邮件中的 HTML 表格

> ID：10476064
> 
> 赞同：0
> 
> 时间：2012-05-07T02:38:42.857
> 
> 标签：html, email, google-apps-script, google-sheets

我有一个带有数据表的 Google 电子表格。填写表格后，我的脚本将获取数据并通过电子邮件发送。我有代码可以从数据范围中获取我想要的每个值并将其放入表中，但这一切都是通过识别一百多个变量来完成的。

有没有办法使用某种数组，以便用数据范围中的每一行数据填充 html 表？

我坦率地承认自己是一个编程新手，这可能是最糟糕的意大利面条代码。非常感谢任何帮助（即使它是 javascript 的入门）。

```
function Gradereport() { 
```

// 此脚本将表单的内容通过电子邮件发送给给定的收件人

```
var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Report");
var recloc = sheet.getRange("D2"); //cell location of student email
var recipient = recloc.getValue(); //student's email address
var lastloc = sheet.getRange("B2");
var last = lastloc.getValue();  
var firstloc = sheet.getRange("A2");
var first = firstloc.getValue();
var courseloc = sheet.getRange("E2");
var course = courseloc.getValue();
var dateloc = sheet.getRange("C2");
var date = dateloc.getValue();
var gradeloc = sheet.getRange("D5");
var grade = gradeloc.getValue();
var totloc = sheet.getRange("D4");
var total = totloc.getValue();
var perloc = sheet.getRange("D6");
var percent = perloc.getValue();
var dataRange = sheet.getRange("A4:B9");
var data = dataRange.getValues();
// assignment cell locations
var assignloc1 = sheet.getRange("A5");
var assignloc2 = sheet.getRange("A6");
var assignloc3 = sheet.getRange("A7");
var assignloc4 = sheet.getRange("A8");
var assignloc5 = sheet.getRange("A9");
// assignment values
var assign1 = assignloc1.getValue();
var assign2 = assignloc2.getValue();
var assign3 = assignloc3.getValue();
var assign4 = assignloc4.getValue();
var assign5 = assignloc5.getValue();
// assignment score locations
var scoreloc1 = sheet.getRange("B5");
var scoreloc2 = sheet.getRange("B6");
var scoreloc3 = sheet.getRange("B7");
var scoreloc4 = sheet.getRange("B8");
var scoreloc5 = sheet.getRange("B9");
// assignment score values
var score1 = scoreloc1.getValue();
var score2 = scoreloc2.getValue();
var score3 = scoreloc3.getValue();
var score4 = scoreloc4.getValue();
var score5 = scoreloc5.getValue();

  // error message
var errmess = first+' '+last+', your Pin code did not match. Please double check your entry and re-submit. Contact your professor if you get this message again.';
var subject = course+' Grade Report';
var body = first+' '+last+', here is your grade report, requested on '+date+'. Grade '+grade+'/'+total+', '+percent+'%. Score breakdown: '+data;
var bodyHTML1 = '<p>'+first+' '+last+', here is your grade report.<br> Grade '+grade+'/'+total+', '+percent+'%.</p>';
// var bodyHTML2 = '<p>'+data+'</p>';
var bodyHTML2 = '<table> <tr> <td> '+assign1+' </td> <td> '+score1+' </td> </tr> <tr> <td> '+assign2+' </td> <td> '+score2+' </td> </tr> <tr> <td> '+assign3+' </td> <td> '+score3+' </td> </tr> <tr> <td> '+assign4+' </td> <td> '+score4+' </td> </tr> <tr> <td> '+assign5+' </td> <td> '+score5+' </td> </tr> </table>';

var bodyHTML3 = '<p>Sent by the <a href="http://www.steegle.com/">Steegle.com</a> Contact Us Form Google Apps Script</p>';
var advancedArgs = {htmlBody:bodyHTML1+bodyHTML2 ,};
var pinloc = sheet.getRange("G2");
var pin = pinloc.getValue();

if(pin == 1){       
MailApp.sendEmail(recipient, subject, body, advancedArgs);
}else{
MailApp.sendEmail(recipient, subject, errmess);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T14:03:36.000

我冒昧地对您的代码进行了一些更改，以及生成表格的循环，这里是：

```
function report2() {
  var LOC = {
    recipient: [1,3],//D2
    first: [1,0],    //A2
    last: [1,1],     //B2
    course: [1,4],   //E2
    date: [1,2],     //C2
    grade: [4,3],    //D5
    total: [3,3],    //D4
    percent: [5,3],  //D6
  };

  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Report");
  var values = sheet.getDataRange().getValues(); //get all values on the spreadsheet at once
  var data = {};
  for( var i in LOC )  //row        //column   (all zero-based index)
    data[i] = values[ LOC[i][0] ][ LOC[i][1] ];

  var errmess = data.first+' '+data.last+', your Pin code did not match. Please double check your entry and re-submit. Contact your professor if you get this message again.';
  var subject = data.course+' Grade Report';
  var body = data.first+' '+data.last+', here is your grade report, requested on '+data.date+'. Grade '+data.grade+'/'+data.total+', '+data.percent+'%. Score breakdown: '+data.data;
  var bodyHTML1 = '<p>'+data.first+' '+data.last+', here is your grade report.<br> Grade '+data.grade+'/'+data.total+', '+data.percent+'%.</p>';

  var bodyHTML2 = '<table>';
  for( var i = 4; i < 9; ++i )
    bodyHTML2 += '<tr><td> '+values[i][0]+' </td><td> '+values[i][1]+' </td></tr>';
  bodyHTML2 += '</table>';

  var advancedArgs = {htmlBody: bodyHTML1+bodyHTML2};
  var pin = values[1][6]; //G2 
  if( pin == 1 )
    MailApp.sendEmail(recipient, subject, body, advancedArgs);
  else
    MailApp.sendEmail(recipient, subject, errmess);
} 
```

我开发了一个脚本来根据电子表格数据发送电子邮件，就像你正在尝试的那样。我想你可能会发现它很有用。它被称为FormEmailer。您可以在脚本库（在菜单插入 > 脚本下）及其[网站](http://sites.google.com/site/formemailer)上找到它。

# c# - For 循环结构

> ID：10476067
> 
> 赞同：-29
> 
> 时间：2012-05-07T02:39:56.847
> 
> 标签：c#, c++

这个循环会准确执行`N`Times 吗？

```
for (int i = 0; i < N; i++) 
{
    //statement
    someMethodCall();
} 
```

这个循环最多会执行`N`多少次？

```
for (int i = 1; i < N; i++)  
{
    someMethodCall();
} 
```

这个循环至少会执行`N`Times 吗？

```
for (int i = 0; i <= N; i++) 
{
    //statement
    someMethodCall();
} 
```

如果我需要在`m`和`n`时间之间执行语句，例如调用方法，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T02:42:58.097

你的三个问题的答案是肯定的，不是的，我想是的，尽管第三个答案有点欺骗性；它会执行 N 次，不多也不少（除非有异常终止循环。）你可以编写一个 for 循环来循环一定次数，或者直到某个条件成立，然后你有使用`break`或`return`提前终止循环的能力。

但是没有执行“至少 N 次”的概念；它根本不是这种——或任何其他——计算机语言的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T02:52:12.037

In for loop you can have these code,

N Time

```
for (int i = 0; i < N; i++) {

} 
```

N+1 Time

```
for (int i = 0; i <= N; i++) {

} 
```

And if there isn't any time and you want handle it your self you can use this,

```
for (;;) {
   //do something and don't forget use break or return !         
} 
```

OR

```
while(x>10){    

} 
```

and loop in loop is good as Ernest Friedman-Hill said

```
for (int i = 0; i <=10; i++) {
    for (int i = 0; i < length; i++) {

    }
} 
```

use 2xTab for visual studio help.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T02:44:43.103

循环公式可以计算为

```
Math.Round (condition - initialization )/increment 
```

在第一种情况下

```
(N-0)/1 which evaluates to N times 
```

在第二种情况下

```
(N-1)/1 which evaluates to N-1 times 
```

在第三种情况下

```
(N-0+1)/1 which evaluates to N+1 times 
```

`How would I do if I need to execute statement between m and n times? For instance I want to call one method between m and n times?`

然后检查它的条件

```
for (int i = m; i < n; i++)
{
    someMethodCall();
} 
```

# soap - 如何通过 JAX-WS 添加 SOAP 标头？

> ID：10476071
> 
> 赞同：0
> 
> 时间：2012-05-07T02:40:48.190
> 
> 标签：soap, jax-ws, soapheader

我们的系统需要在 SOAP 消息中添加一些头信息。那么 JAX-WS 是如何实现的呢？我知道实现这一点的一种方法是添加 `@WebParam(name = "login", header = true),`，但这个解决方案不是我们想要的。我们想要一种不需要更改端点接口的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T21:36:56.613

您需要编写一个拦截器来实现 SOAPHandler 来拦截请求。

# asp.net-mvc-3 - 如何在 MVC 3 RAZOR 中动态设置图像路径

> ID：10476073
> 
> 赞同：6
> 
> 时间：2012-05-07T02:40:52.170
> 
> 标签：asp.net-mvc-3, image, dynamic, razor, path

如何为以下动态设置图像路径：

```
<img src="/Images/Model" + @item.ModelImagePath /> 
```

**“/Images/Model”**这个路径是固定的，其余路径来自Model DBTable的[ **ModelImagePath** ]列。

请指导我如何在 View 中动态设置路径。

并且是否有任何**Html 辅助标记来显示**MVC RZOR 中可用的图像？

注意：我有类似的问题，如

[如何在 ActionLink 中使用/传递隐藏字段值](https://stackoverflow.com/questions/10464003/how-to-use-pass-hidden-field-value-in-actionlink)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-07T02:51:52.550

```
<img src="@Url.Content(String.Format("~/Images/Model/{0}", item.ModelImagePath))" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-01T03:54:11.450

如果您已经将整个路径保存到表中，请按照它

```
<img src="@Url.Content(String.Format("{0}",item.ModelImagePath))"/> 
```

或者

```
<img src="@Url.Content(item.ModelImagePath)" style="width:100px;height:100px"/> 
```

# android - 如果我们不将意图过滤器设置为接收器，是否会处理系统中发生的任何广播？

> ID：10476074
> 
> 赞同：0
> 
> 时间：2012-05-07T02:40:54.557
> 
> 标签：android, broadcastreceiver

在 android 中，如果我们没有将 intent-filter 设置为广播接收器，我们会覆盖该`onReceiver`方法。请问这个广播接收器电缆可以接收任何广播消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T02:42:26.987

你将一无所获。：（ 所以..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T03:28:51.823

如果您不添加意图过滤器，您将一无所获。

# java - Java GUI DiceRoll 应用程序

> ID：10476080
> 
> 赞同：0
> 
> 时间：2012-05-07T02:41:51.063
> 
> 标签：java, user-interface, dice

我目前正在开发一个掷两个骰子的简单 GUI 应用程序。我目前正在使用两个类，一个叫做“Game”，另一个叫做“DiceRoll”。为了满足分配标准，我们必须使用多个课程才能使程序正常工作。使用一个类会容易得多......无论如何，我在我的“DiceRoll”类中成功调用了我的“roll()”方法，该类使用switch语句并按顺序实现“Graphics.drawImage()”方法绘制指定的“.png”图像。一切看起来都很好，在运行它之前我没有任何错误。当我运行程序时，GUI 框架会弹出，并且我创建的所有按钮/菜单都可以正常工作。但是，一旦我按下“掷骰子”按钮，我就会不断收到多个运行时错误。这是我到目前为止所拥有的：

游戏课

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

public class Game extends JFrame implements ActionListener 
{
JPanel mainPanel;
JPanel optionPanel;
JPanel dicePanel;
JButton rollDice;
JMenu options;
JMenuItem quit;
JMenuItem explanation;
JMenuBar menuBar;
JLabel diceLabel;
JLabel diceLabel2;
DiceRoll dr;
Graphics die1;
Graphics die2;

public Game()
{
    setTitle("Rollin' Dice");
    this.setPreferredSize(new Dimension(600,600));

    mainPanel = new JPanel();
    optionPanel = new JPanel();
    dicePanel = new JPanel();
    rollDice = new JButton("Roll Dice");
    options = new JMenu("Options");
    quit = new JMenuItem("Quit");
    explanation = new JMenuItem("Explanation");
    menuBar = new JMenuBar();
    dr = new DiceRoll();
    diceLabel = new JLabel();
    diceLabel2 = new JLabel();

    options.add(quit);
    options.add(explanation);

    menuBar.add(options);

    optionPanel.add(menuBar);
    optionPanel.setPreferredSize(new Dimension(600,100));

    dicePanel.add(rollDice);

    dicePanel.add(diceLabel);
    dicePanel.add(diceLabel2);

    mainPanel.setPreferredSize(new Dimension(600,600));
    mainPanel.add(optionPanel);
    mainPanel.add(dicePanel);

    quit.addActionListener(this);
    explanation.addActionListener(this);
    rollDice.addActionListener(this);

    this.getContentPane().add(mainPanel);

    this.pack();
    this.setVisible(true);
}

public void actionPerformed(ActionEvent e) {
    if (e.getSource()== quit)
        System.exit(0);

    if (e.getSource() == explanation)
    {
        JOptionPane.showMessageDialog(mainPanel,
                "Win: Roll a sum that is an even number \nLose: Roll a sum that is an odd number" + dicePanel, "Rules", JOptionPane.INFORMATION_MESSAGE); 
    }

    if (e.getSource() == rollDice)
    {

        dr.roll(die1);
        dr.roll(die2);

        diceLabel.updateUI();

        dicePanel.updateUI();
    }

}

public static void main (String []args)
{
    Game dg = new Game();
} 
```

}

骰子类

```
 import java.awt.Graphics;
    import java.awt.image.BufferedImage;
    import javax.imageio.*;
    import java.io.File;
    import java.io.IOException;
    import javax.swing.JComponent;

public class DiceRoll extends JComponent {

private BufferedImage die1;
private BufferedImage die2;
private BufferedImage die3;
private BufferedImage die4;
private BufferedImage die5;
private BufferedImage die6;

public DiceRoll()
{
    try {
        die1 = (ImageIO.read(new File("die1.png")));
        die2 = ImageIO.read(new File("die2.png"));
        die3 = ImageIO.read(new File("die3.png"));
        die4 = ImageIO.read(new File("die4.png"));
        die5 = ImageIO.read(new File("die5.png"));
        die6 = ImageIO.read(new File("die6.png"));
    } catch (IOException ex){
        System.err.println("That is invalid");
    }
}

public Graphics roll(Graphics g)
{
    int dieResult = (int)(6 * Math.random());

    switch(dieResult){
    case 1: 
        g.drawImage(die1, 0, 0, null);
        break;
    case 2:
        g.drawImage(die2, 0, 0, null);
        break;
    case 3:
        g.drawImage(die3, 0, 0, null);
        break;
    case 4:
        g.drawImage(die4, 0, 0, null);
        break;
    case 5:
        g.drawImage(die5, 0, 0, null);
        break;
    case 6:
        g.drawImage(die6, 0, 0, null);
        break;
    }
    return g;
} 
```

}

我收到的错误

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at DiceRoll.roll(DiceRoll.java:51)
at Game.actionPerformed(Game.java:89)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T02:47:28.547

你通过`null` 这里：

```
dr.roll(die1);
dr.roll(die2); 
```

因为您从不实例化`die1`and `die2`，所以您会得到**NullPointerException**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T03:04:06.197

我认为您使这比必要的复杂得多。你为什么不改变你的`public Graphics roll(Graphics g)`方法来计算滚动和更新`JLabel`，像这样......

```
public void roll(JLabel dieLabel) {
    int dieResult = (int)(6 * Math.random());
    dieLabel.setIcon(new ImageIcon("die" + dieResult + ".png"))
} 
```

然后你需要做的就是在这里改变你的代码......

```
if (e.getSource() == rollDice){
    dr.roll(die1);
    dr.roll(die2);
    diceLabel.updateUI();
    dicePanel.updateUI();
} 
```

发送您要更改的标签，像这样......

```
if (e.getSource() == rollDice){
    dr.roll(diceLabel);
    dr.roll(diceLabel2);
} 
```

您将传递传递`JLabel`给该`roll()`方法，该方法计算滚动并将图像设置在该标签上。简单得多。

这也意味着您也不需要 2 个`Graphics`对象 (`die1`和`die2`)，因此您可以摆脱这些对象。您也不需要`BufferedImages`, 因为图像文件的加载是由`ImageIcon`类完成的

让我知道您是否需要有关我的建议的更多信息，以供学习。

编辑...

这是我对您的构造函数的重写`Game()`，它显示了如何添加项目以`JPanels`使用`GridLayout`和`BorderLayout`作为布局管理器......

```
public Game(){
    // Set the JFrame properties
    setTitle("Rollin' Dice");
    this.setPreferredSize(new Dimension(600,600));

    // Create the main JPanel to hold the interface
    mainPanel = new JPanel(new BorderLayout());

    // Build the Menu
    options = new JMenu("Options");

    quit = new JMenuItem("Quit");
    options.add(quit);

    explanation = new JMenuItem("Explanation");
    options.add(explanation);

    menuBar = new JMenuBar();
    menuBar.add(options);

    // Add the menu to the top of the main panel
    mainPanel.add(menuBar,BorderLayout.NORTH);

    // Create the dice
    dr = new DiceRoll();
    diceLabel = new JLabel();
    diceLabel2 = new JLabel();

    dicePanel = new JPanel(new GridLayout(2,1));
    dicePanel.add(diceLabel);
    dicePanel.add(diceLabel2);

    // Add the dicePanel to the center of the main panel
    mainPanel.add(dicePanel,BorderLayout.CENTER);

    // Add the rollDice button to the bottom of the main panel
    rollDice = new JButton("Roll Dice");
    mainPanel.add(rollDice,BorderLayout.SOUTH);

    // Add listeners to the menu items and buttons
    quit.addActionListener(this);
    explanation.addActionListener(this);
    rollDice.addActionListener(this);

    // Add the main panel to the JFrame
    this.getContentPane().add(mainPanel);

    // Show the JFrame
    this.pack();
    this.setVisible(true);
} 
```

# google-app-engine - 如何从 GQL 中的另一个模型类中选择没有引用的所有行？

> ID：10476085
> 
> 赞同：2
> 
> 时间：2012-05-07T02:42:15.523
> 
> 标签：google-app-engine, gql, gqlquery

我有

```
class Question(db.Model):
    wording = db.StringProperty(required=True)

class Answer(db.Model):
    question = db.ReferenceProperty(Question, required=True)
    userId = db.IntegerProperty(required=True) 
```

我想

```
SELECT * FROM Question WHERE Id NOT IN (
       SELECT QuestionId FROM Answer WHERE userId = 1) 
```

如何在 GQL 中做到这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T03:18:39.527

GQL 没有`NOT IN`声明，所以不幸的是，不可能完全按照您的意愿行事。

如果 userIds 的总集很小，您可以反转查询以使用该`IN`语句。例如：

```
SELECT * FROM Answer WHERE userId IN ('2', '3') 
```

请注意，这是为`IN`语句中的每个值执行一个子查询，并且每个 GQL 语句最多允许 30 个查询。

如果答案的总集合`userId = 1`很小，您可以选择所有答案并从`userId = 1`您自己的代码中过滤掉答案。但是，如果来自 userId 1 的 Answers 集很大，这将不是特别有效。

最后，您可以使用 cron 预先计算结果（并将它们存储到数据存储和/或内存缓存中），而不是按需计算这些查询中的任何一个。当您的代码需要这些查询之一的结果时，您可以加载缓存的结果。

# php - 这个查询有什么问题？为什么局部结果不同？

> ID：10476089
> 
> 赞同：0
> 
> 时间：2012-05-07T02:42:44.510
> 
> 标签：php, mysql, database

我正在为我的一类使用 mysql 数据库编写一个 php 站点，但我一生都无法弄清楚它有什么问题。我有一个可以在我的机器上本地运行的查询（在与教师服务器上的数据库相同的数据库上）但是当我上传它时，它不起作用。问题是查询返回 0 结果，即使数据库中有应该显示的信息。

```
function bigAssQuery($whereCondition)
{

    $queries[] = 'CREATE TEMPORARY TABLE subAssignments (SELECT ua.assignmentid, ua.assignmentnum, ua.description
                    FROM Course c JOIN UserAssignment ua ON ua.crn = c.CRN AND ua.term = c.term
                    WHERE c.CRN = "'.$_SESSION["crnum"].'" AND c.term = "'.$_SESSION["mysem"].'")';

    $queries[] = 'CREATE TEMPORARY TABLE subStudents (SELECT s.studentid, s.lastname, s.firstname
                    FROM Course c JOIN Student s ON s.crn = c.CRN AND s.term = c.term
                    WHERE c.CRN = "'.$_SESSION["crnum"].'" AND c.term = "'.$_SESSION["mysem"].'")';

    $queries[] = 'CREATE TEMPORARY TABLE subRubric(SELECT assignmentid, re.rubricelementid, re.learning_goal_char
                    FROM RubricElement re JOIN RubricAssignmentRelation rar ON re.rubricelementid = rar.rubricelementid)';

    $queries[] = 'CREATE TEMPORARY TABLE subAssignRub(SELECT subAssignments.assignmentid, rubricelementid, learning_goal_char, assignmentnum, description
                    FROM subRubric JOIN subAssignments ON subAssignments.assignmentid = subRubric.assignmentid)';

    $queries[] = 'CREATE TEMPORARY TABLE subAssignRubStud (SELECT *
                    FROM subAssignRub CROSS JOIN subStudents)';

    $queries[] = 'CREATE TEMPORARY TABLE subAssignInstRubStud (SELECT sars.assignmentid, ai.ainstanceid, rubricelementid, learning_goal_char, assignmentnum, description, sars.studentid, lastname, firstname
                    FROM subAssignRubStud sars LEFT JOIN AssignmentInstance ai ON sars.studentid = ai.studentid AND sars.assignmentid = ai.assignmentid)';

    $queries[] = 'CREATE TEMPORARY TABLE subTotal (SELECT assignmentid, siars.ainstanceid, s.ainstanceid As scoreAID, siars.rubricelementid, learning_goal_char, assignmentnum, description, studentid, lastname, firstname, score
                    FROM subAssignInstRubStud siars LEFT JOIN Score s ON siars.ainstanceid = s.ainstanceid AND siars.rubricelementid = s.rubricelementid
                    ORDER BY lastname, assignmentid)';

    $queries[] = 'SELECT *
        FROM subTotal
        '.$whereCondition.' Order By lastname, assignmentnum, learning_goal_char';  

    return($queries);
} 
```

然后当查询数据库时，代码如下所示。. .

```
$queries = bigAssQuery($whereCondition);

$result = 1;
foreach($queries as $query)
{
    $result = $db->query($query);

    if(!$result)
    {
        echo '<script type="text/javascript"> 
                window.onload=function(){ alert("Error: Could not extract course information. Please try again later."); } 
             </script> ';
        exit;
    }
}

$num_rows = $result->num_rows; 
```

我向您保证，本地和远程数据库是相同的。我看不出没有结果的原因。我确实测试了一些简单的临时表，以查看服务器是否由于某种原因没有读取这些表，但在我的测试中它们不是问题。我会尝试使用嵌套子查询，但它变得如此复杂，以至于我无法组织它。也许有更好的方法？此外，只是为了澄清查询没有失败，当我知道它们应该返回时，它们只是没有返回任何内容。我为文字墙道歉，但感谢任何帮助。

编辑：我真的不知道问题出在哪个查询上。我知道我可能遗漏了一些重要信息。部分原因在于我缺乏网络经验。我首先在本地进行测试，因为我已经让调试器工作了，但老实说，我不知道如何进行远程调试。我正在使用 netbeans 和 xdebug。如果有人可以建议如何设置远程调试，我可能会想出一些更好的数据。任何的意见都将会有帮助

再次编辑：发现问题。令人尴尬的是，这是数据输入错误；我的一个外键输入错误。感谢大家为我指出正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T03:19:45.720

快速浏览一下，您的代码会不恰当地停止 PHP 的执行。你至少应该让其余的继续。只需使用而不是退出循环`break;`。

```
if(!$result)
{
    echo '<script type="text/javascript"> 
            window.onload=function(){ alert("Error: Could not extract course information. Please try again later."); } 
         </script> ';
    break; //exit the loop only NOT THE PHP's Execution
} 
```

此外，单独检查每个查询并在 phpMyAdmin 上单独运行它们以查看它们是否正确执行。找到断点并修复错误。

# python - python 库的 setup.py 和对发行版级 python 代码的依赖

> ID：10476090
> 
> 赞同：0
> 
> 时间：2012-05-07T02:42:47.017
> 
> 标签：python, setup.py, pypi, cherokee

因此，我将一些我拥有的代码打包为适当的“pypi-compliant”python 包。

问题是，我的 python 库依赖于发行版级库中的一些 python 类——特别是 cherokee。

通过安装

```
 aptitude install cherokee 
```

或者

```
pacman -S cherokee 
```

或者

```
emerge cherokee 
```

当然，这取决于您使用的发行版。

在我安装的 cherokee 库中，我可以找到

```
[root@li280-195 ~]# find / -name "Config.py"
/usr/share/cherokee/admin/CTK/CTK/Config.py 
```

所以问题是，我应该如何在我的 python 库`setup.py`中指出我所依赖的`Config.py`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:49:58.327

CTK 不能作为独立软件包提供。

# image - 在哪里为我的网站存储大量图像？

> ID：10476094
> 
> 赞同：-1
> 
> 时间：2012-05-07T02:43:02.403
> 
> 标签：image, store

如果我想部署一个网站，比如 ebay，人们可以在其中出售东西，我需要存储大量图像，比如很多图像，并且我需要在某些页面上显示大约 30 张图像。

**通常我会制作一个单独的服务器并将它们存储在那里，但我还能做什么？**

我试图将我的图像存储在像 ImageShack 这样的图像主机上，但我注意到如果我尝试同时请求 30 张图像，一些图像没有显示，看起来像 imageshack 不喜欢以这种方式使用。

仍然必须有一些其他的方法来做到这一点，也许是云服务器，或者像 imageshack 这样的其他服务。这个事情谁有经验 ？除了拥有第二台服务器之外，最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T02:52:37.107

For redirecting traffic, you can store all images (even static files like CSS) in a separate server , like [http://staticimg.yourdomain.com](http://staticimg.yourdomain.com) . With this way, your web server will be less busy serving download requests.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T02:45:52.290

让 HTTPD 服务器（例如 Apache HTTPD）为这些静态内容提供文件服务器。

您可以将静态内容的位置存储到 DBMS 文件中，而不是以这种方式保存为 BLOB。

# c# - 如何通过 C# 中的反射将基类型实例附加到列表？

> ID：10476103
> 
> 赞同：1
> 
> 时间：2012-05-07T02:45:18.800
> 
> 标签：c#, reflection

这是我们正在处理的自定义 ORM 事情。这不是很棒，但这是我们决定要做的。

基本上，基类`Entity`由任意数量的其他类扩展。这些子类必须使用属性进行注释。

有一种特定类型的属性是集合。该属性定义了集合的子类型。

例如。

```
public class Blah2 : Entity
{
    ...
}

public class Blah : Entity 
{
    [QRel(Type = typeof(Blah2)]
    public IEnumerable<Blah2> blahs;
} 
```

加载这些子对象很容易，但它们是作为基本类型加载的，`Entity`.

通过反射，所以在运行时我在 ORM 管理器中：

*   属性中标注的类型：`Type t`
*   blahs 的字段信息：`FieldInfo f`
*   类型的实体实例`Blah`：`i`
*   包含一组`Blah2`实例的通用加载列表：`List<Entity> l`

我需要`lt`使用派生类型创建一个列表`t`（即动态创建和填充 a `List<Blah2>`）并将其分配给 type 字段`Blah`：

```
var lt = ...
f.SetValue(i, lt); 
```

请注意，因为这都是通过反射完成的，所以我拥有的对象的*类型*是：`t`-> `Type`，`i`-> `Entity`，`f`-> `FieldInfo`，`l`-> `List<Entity>`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T03:41:59.567

我建议您创建一个辅助类，`Helper<T>`它分配正确类型的通用列表，并用项目填充列表。您可以缓存帮助程序类的实例以降低反射成本。

```
abstract class Helper
{
    public abstract IEnumerable<Entity> CreateList(IEnumerable<Entity> loadedList);
}

sealed class Helper<T> : Helper where T : Entity
{
    public override IEnumerable<Entity> CreateList(IEnumerable<Entity> loadedList)
    {
        return new List<T> (loadedList.OfType<T> ());
    }
} 
```

要创建 的实例`Helper<T>`，只需执行以下操作：

```
var helperType = typeof (Helper<>).MakeGenericType (t);
var helper = Activator.CreateInstance (helperType) as Helper; 
```

然后`Blah2`根据通用列表分配和填充列表：

```
var lt = helper.CreateList (l); 
```

# javascript - 有没有办法检测外部 javascript 文件是否已完全加载？

> ID：10476105
> 
> 赞同：5
> 
> 时间：2012-05-07T02:45:23.757
> 
> 标签：javascript

我有一个使用**reCAPTCHA**过滤掉机器人的网络表单。该表单有一个`<script>`标签，可以将验证码质询加载到`<iframe>`. 如果此脚本无法加载，则验证码挑战将不会出现，并且没有人能够发送帖子。

有什么方法可以检测脚本是否已加载，以便我可以从我这边关闭此功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T02:49:01.947

将`load`事件附加到`script`指向 reCAPTCHA 的元素。

```
var script = document.createElement("script");

script.addEventListener("load", function() {
   // Script has loaded.
});

script.src = "/path/to/recaptcha.js";

document.body.appendChild(script); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T02:48:48.957

您可能会找到一种方法来进行检测，但我不推荐它，因为它违背了验证码的目的。计算机/机器人可以轻松地使脚本无法加载。主机文件条目可以解决问题。

也可以制作一个脚本，只执行您对加载失败案例的处理，从而绕过您的验证码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T06:28:27.430

script.addEventListener 不能在 IE8 和 IE7 上工作。为此，您需要

```
 if (!script.addEventListener) {
        script.attachEvent("onload", function(){
        // script has loaded in IE 7 and 8 as well.
});
    }
    else
    {
    script.addEventListener("load", function() {
       // Script has loaded.
    });
} 
```

# actionscript-3 - 从 TileList 拖放图像并放在 Flex 3 中的 Canvas 上

> ID：10476107
> 
> 赞同：0
> 
> 时间：2012-05-07T02:45:52.057
> 
> 标签：actionscript-3, apache-flex, canvas, drag-and-drop, flex3

我正在开发一个 Flex 项目，我将不得不使用拖放功能。我有一个 TileList，里面装满了图像作为项目，还有一个 Canvas。我使用 tilelist 的**“dragEnabled”**和**“dragMoveEnabled”**属性使图像（项目）可拖动，但不能使画布成为可放置区域。

顺便说一句，我是 flex 新手，所以请让它简单一点。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:19:12.117

拖放功能可以手动添加到任何非基于列表的控件。看一眼：

[http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7cfc.html#WS2db454920e96a9e51e63e3d11c0bf69084-7d03](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7cfc.html#WS2db454920e96a9e51e63e3d11c0bf69084-7d03)

如果您在尝试实现上述内容后仍然苦苦挣扎，请发布一些代码，我将很乐意提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T02:32:40.543

我最终制作了这段代码！

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute">
<mx:Script>
    <![CDATA[
//Import classes####################################################################
import mx.managers.DragManager;
import mx.core.DragSource;
import mx.events.DragEvent;
import flash.events.MouseEvent;

// IMAGES ###########################################################################

[Bindable]
[Embed(source="assets/images/thumb/1.jpg")]
public var photo1:Class;            

[Bindable]
[Embed(source="assets/images/thumb/2.jpg")]
public var photo2:Class;

// FUNCTIONS ###########################################################################

import mx.core.DragSource;
import mx.managers.DragManager;
import mx.events.DragEvent;
import mx.controls.Alert;

private function dragEnterHandler(event:DragEvent):void {
if (event.dragSource.hasFormat("items")){
DragManager.acceptDragDrop(Canvas(event.currentTarget));
}
}

private function dragDropHandler(event:DragEvent):void {

}

]]>
</mx:Script>

<!-- ######## CONTROLS ############################################################ -->

<!-- canvas -->
<mx:Canvas dragDrop="{dragDropHandler(event)}" dragEnter="{dragEnterHandler(event)}" x="395" y="10" width="436" height="486" backgroundColor="#FFFFFF">
</mx:Canvas>

<!-- tile list -->
<mx:TileList    x="0" y="10" height="100%" width="154" columnCount="1" id="tl"  maxColumns="1"  dragEnabled="true" dragMoveEnabled="false" allowMultipleSelection="false"  >
<mx:dataProvider>
<mx:Array>
<mx:Object label="photo 1" icon="{photo1}" data="photo" />
<mx:Object label="photo 2" icon="{photo2}" data="photo" />
</mx:Array>
</mx:dataProvider>
</mx:TileList>  

</mx:Application> 
```

画布现在接受我的拖动，但是当我将图像放到它上面时，图像就消失了。我知道我必须创建一个函数来处理 DragDrop 事件，但我真的不知道如何获取 dragSource 图像。任何帮助..我将不胜感激

# phpexcel - PHPExcel 加载受保护的工作簿

> ID：10476117
> 
> 赞同：3
> 
> 时间：2012-05-07T02:47:12.180
> 
> 标签：phpexcel

我有 35 个受保护的工作簿。我正在使用 PHPExcel 从相应的 excel 文件中提取信息。不幸的是，由于受保护的工作簿，PHPExcel 无法加载我怀疑的文件。这是我的代码：

```
$inputFileType = PHPExcel_IOFactory::identify($inputFileName);
$objReader = PHPExcel_IOFactory::createReader($inputFileType);
$objReader->setReadDataOnly(true);
$objPHPExcel = $objReader->load($inputFileName); 
```

是否有任何解决方法可以使 PHPExcel 从受保护的工作簿中提取信息？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-25T08:01:14.327

请注意，从 1.8.0 版开始，PHPExcel**确实**支持读取受保护的 Excel5 工作簿。它没有包含在文档中，因为您不需要做任何特别的事情，PHPExcel 只是在读取文档时对其进行解密

请注意，这不适用于具有用户密码的文档，但“VelvetSweatshop”受保护的文档

[http://meindertjan.nl/2012/08/22/microsoft-offic-and-its-velvetsweatshop-password-protected-files/](http://meindertjan.nl/2012/08/22/microsoft-offic-and-its-velvetsweatshop-password-protected-files/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T02:48:48.997

In short, PHPExcel does not support protected sheets / workbook . See: [http://phpexcel.codeplex.com/discussions/244865](http://phpexcel.codeplex.com/discussions/244865)

# java - Scala解析器解析scala？

> ID：10476120
> 
> 赞同：3
> 
> 时间：2012-05-07T02:47:30.873
> 
> 标签：java, parsing, scala

> **可能重复：**
> [Scala 中的 Scala AST](https://stackoverflow.com/questions/1788627/scala-ast-in-scala)

你知道一个解析 scala 的 java/scala 解析器吗？

我想对 AST 做一些代码分析。

# c# - 竞赛：存储任意数量的字段

> ID：10476130
> 
> 赞同：1
> 
> 时间：2012-05-07T02:49:01.257
> 
> 标签：c#, javascript, asp.net, database-design

我将在我正在开发的当前网站上创建比赛。每场比赛都不会相同，并且可能有不同数量的输入字段，用户必须输入这些字段才能成为比赛的一部分，例如。

比赛 1 可能只需要名字

比赛 2 可能需要名字、姓氏和电子邮件地址。

我还将构建一个工具来观察这些条目，以便我可以查看每个单独的条目。

我的问题是存储任意数量的字段的最佳方法是什么？我在考虑两个选项，一个是将每个条目写入一个包含所有竞赛条目的 CSV 文件，另一个是在数据库中有一个带有 varchar 字段的 db 表，该表仅将整个条目存储为文本。这两种方法看起来都很乱，这种任务有什么常见的做法吗？

理论上，我可以为每个可能的字段创建一个包含一列的数据库表，但是当比赛有特定要求时，例如“用 100 个字告诉我们为什么……”或“输入你最喜欢的 5 件事”，它就行不通了。 。”

**回答：**

我决定使用下面描述的方法，其中有多个通用列可用于每次比赛的不同目的。

最初我打算使用 EAV，但我仍然认为它可能更适合这种特定场景。但一般不推荐，因为它的可扩展性差，查询复杂，我不想养成使用它的习惯。在我的测试中，这两个答案都非常有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T03:21:46.983

我认为您对 EAV 保持谨慎是正确的，因为它会使您的代码更加复杂，并且对表进行临时查询会更加困难。

我见过许多企业应用程序简单地采用类似以下架构的东西 -

```
t_Comp_Data
-----------    
CompId  
Name  
Surname  
Email 
Field1 
Field2 
Field3 
... 
Fieldn 
```

在这种情况下，通用字段（Field1 等）对于不同的比赛有不同的含义。为了便于查询，您可以为每个比赛创建不同的视图，并在其中使用正确的字段名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T02:58:48.053

我通常对使用它犹豫不决，但如果您使用数据库，这对于实体属性值模型来说似乎是一个很好的情况。

基本上，您有一个 CompetitionEntry（实体）表，其中包含构成每个条目（Competition_id，可能是日期等）的标准字段，然后是一个带有 CompetitionEntry_id、属性和值的 CompetitionEntryAttribute 表。您可能还需要另一个带有模板属性的表每次创建新条目的比赛。

不幸的是，您将只能存储一种数据类型，它可能必须是一个大的 nvarchar。另一个缺点是难以查询 EAV 数据库。

另一种选择是为每个比赛创建一个表（可能在代码中作为比赛创建的一部分），但根据比赛的数量，这可能是不切实际的。

# php - PHP正则表达式查找字符串是否包含YYYY-MM-DD

> ID：10476134
> 
> 赞同：4
> 
> 时间：2012-05-07T02:49:25.457
> 
> 标签：php, regex, string, date

我想检查一个 URL（或任何字符串）是否包含以下模式的任何形式####-##-##

有没有人有一个方便的 str_replace() 或正则表达式来做到这一点？

就像是：

```
contains_date_string($string); 
```

如果 $string 包含 ####-##-## 则返回 true

谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T02:52:39.490

```
if (preg_match('/\b\d{4}-\d{2}-\d{2}\b/', $str)) {
    // ...
} 
```

如果单词边界 ( `\b`) 不能解决问题，您可以尝试[消极的lookbehind 和lookaheads](http://www.regular-expressions.info/lookaround.html)：

```
if (preg_match('/(?<!\d)\d{4}-\d{2}-\d{2}(?!\d)/', $str)) {
    // ...
} 
```

作为附加验证，您可以使用[`checkdate()`](http://php.net/manual/en/function.checkdate.php)清除无效日期，例如[此答案](https://stackoverflow.com/a/10476175/166339)`9999-02-31`中提到的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T02:55:52.160

`preg_match`结合使用`checkdate`：

```
function contains_date($str)
{
    if (preg_match('/\b(\d{4})-(\d{2})-(\d{2})\b/', $str, $matches))
    {
        if (checkdate($matches[2], $matches[3], $matches[1]))
        {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T02:56:42.600

```
'/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/' 
```

“确保像 1998-13-32 这样的事情不会过去和验证。”

我从谷歌得到这个... [http://www.devnetwork.net/viewtopic.php?f=29&t=13795](http://www.devnetwork.net/viewtopic.php?f=29&t=13795)

看起来很有希望。希望这将有助于搜索与 stackoverflow 相同的人是**最**容易获得的 SEO 明智的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T02:56:44.590

[这里](http://html5pattern.com/)给出的测试应该有效：

```
if (preg_match('#[0-9]{4}-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])#', $str)) {
   // do something
} 
```

无论您选择什么正则表达式，都要小心！当机器看到 2004-04-01 时，它无法区分 1 月 4 日和愚人节，除非你另有说明......

# operating-system - How could one interrupt handler go until the same source is free?

> ID：10476137
> 
> 赞同：0
> 
> 时间：2012-05-07T02:49:55.407
> 
> 标签：operating-system, x86, kernel, interrupt

Note that a single interrupt source (timer, keyboard, etc.) will not signal a new interrupt to the processor until the processor has indicated that handling of the previous interrupt from that source is ``done'', even if the system-wide interrupt-enable flag is on.

Who tells the PIC the current interrupt is over, and what does "systerm-wide interrupt-enable flag" mean?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:06:10.707

我在另一个问题的评论中已经涵盖了这一点。:)

好的...更多细节...

如果我们谈论 PIC 及其通常的操作（如在 BIOS 和 DOS 中），则有 16 条 IRQ 线。它们被映射（在 PIC 中）到中断向量**8 到 0Fh**（**IRQ0 到 IRQ7**）和**70h 到 77h**（**IRQ8 到 IRQ15**）。

通过重新编程 PIC，您可以更改此分配（请参阅 PIC（**8259**芯片）文档）。更改此分配通常不仅仅是在保护模式下可取的，因为各种重要的异常被硬连线到从**0**到大约**1Fh**的中断向量（例如，一般保护异常（AKA **#GP**）位于向量**0Dh**，在此默认分配中为**IRQ5** ） .

**IRQ0**是周期性计时器（AKA **PIT**）
**IRQ1**是键盘
**IRQ2**用于**链接第二个 PIC**（每个 PIC 最多处理 8 个 IRQ，因此 16 个 IRQ 有 2 个；IRQ8 到 15 实际上是通过这个 IRQ2 传递的）
**IRQ3**和**IRQ4**用于 COM1 和 COM2 串行端口
**IRQ6**用于 FDD
**IRQ7**用于并行端口（我们以前连接打印机的地方，现在通常是 USB 端口）
**IRQ8**用于另一个定时器，真正的-时钟 (AKA **RTC** )
**IRQ12**通常用于 PS/2 鼠标
**IRQ14 和 IRQ15**用于 HDD/CDROM

其他 IRQ 不是很固定。

PIC 本身通过 I/O 端口 20h 和 21h (PIC1) 以及 0A0h 和 0A1h (PIC2) 连接到 CPU。

CPU 通过将`EOI`命令发送到相应的 PIC 来发出 IRQ 处理完成的信号，该 IRQ 来自该 PIC。

因此，对于**IRQ0 到 IRQ7**，ISR 通常以以下代码结束：

```
...
mov al, 20h
out 20h, al ; send EOI to PIC1
; restore al using pop or mov
iret 
```

对于**IRQ8 到 IRQ15**，同样的情况如下所示：

```
mov al, 20h
out 0a0h, al ; send EOI to PIC2
out 20h, al ; send EOI to PIC1
; restore al using pop or mov
iret 
```

在后一种情况下，每个 PIC 都会获得一个 EOI，因为正如我之前提到的，PIC2 不直接将 IRQ 传递给 CPU，而是通过 PIC1（在 PIC1 的 IRQ2 上；这有效地将 IRQ 的数量限制为 15），所以两者涉及到 PIC。PIC2 是 PIC1 的中断源，就像键盘一样。所以，2个EOI。

此外，一些设备（可能）有自己的`EOI`. 例如，XT 键盘在它们的一个寄存器中等待一个位脉冲（从 1 到 0）作为键盘中断处理完成的指示。在这种情况下，您发送`EOIs`给设备和 PIC。

**编辑**：您所指的[文本](http://www.cs.cmu.edu/~410/p1/proj1.html)`FLAGS.IF`很可能是“系统范围的中断启用标志”。

# python - cjklib和CEDICT安装成功后，我使用的时候报错，为什么？

> ID：10476140
> 
> 赞同：0
> 
> 时间：2012-05-07T02:50:26.467
> 
> 标签：python, cjk

这是我在这里的第一篇文章。

自从我开始学习 python 以来，我一直在这里阅读帖子，这对我的学习过程有很大的帮助。所以，在我提出问题之前，只想对大家说一声非常感谢！

**问题：**

我成功安装了 cjklib 包。然后，我也成功安装了 CEDICT 字典。但是当我尝试使用 CEDICT 时，它总是会抛出如下错误：

```
>>> d = CEDICT()
......
  File "build/bdist.linux-x86_64/egg/sqlalchemy/engine/default.py", line 335, in do_execute
sqlalchemy.exc.OperationalError: (OperationalError) unknown database "cedict_0" 'PRAGMA "cedict_0".table_info("CEDICT")' ()
>>> 
```

**要重现问题：**

*安装 cjklib 包：*

下载 cjklib-0.3.tar.gz，解压并更新目录 Cjklib-0.3/cjklib/build/*.py 中的文件（具体来说，builder.py 和**init** .py）：

将“来自 sqlalchemy.exceptions”更新为“来自 sqlalchemy.exc”

```
$cd djklib-0.3/cjklib/build/
$sudo python setup.py install
$sudo installcjkdict CEDICT
$python
Python 2.7.3 (default, Apr 20 2012, 22:39:59) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from cjklib.dictionary import CEDICT
>>> d = CEDICT() 
```

发生错误，具体如下：

```
>>> d = CEDICT()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/cjklib/dictionary/__init__.py", line 605, in __init__
    super(CEDICT, self).__init__(**options)
  File "/usr/local/lib/python2.7/dist-packages/cjklib/dictionary/__init__.py", line 532, in __init__
    super(EDICTStyleEnhancedReadingDictionary, self).__init__(**options)
  File "/usr/local/lib/python2.7/dist-packages/cjklib/dictionary/__init__.py", line 269, in __init__
    if not self.available(self.db):
  File "/usr/local/lib/python2.7/dist-packages/cjklib/dictionary/__init__.py", line 276, in available
    and dbConnectInst.hasTable(cls.DICTIONARY_TABLE))
  File "/usr/local/lib/python2.7/dist-packages/cjklib/dbconnector.py", line 444, in hasTable
    schema = self._findTable(tableName)
  File "/usr/local/lib/python2.7/dist-packages/cjklib/dbconnector.py", line 429, in _findTable
    if hasTable(tableName, schema=schema):
  File "build/bdist.linux-x86_64/egg/sqlalchemy/engine/base.py", line 2525, in has_table
  File "build/bdist.linux-x86_64/egg/sqlalchemy/engine/base.py", line 2412, in run_callable
  File "build/bdist.linux-x86_64/egg/sqlalchemy/engine/base.py", line 1959, in run_callable
  File "build/bdist.linux-x86_64/egg/sqlalchemy/dialects/sqlite/base.py", line 567, in has_table
  File "build/bdist.linux-x86_64/egg/sqlalchemy/engine/base.py", line 1450, in execute
  File "build/bdist.linux-x86_64/egg/sqlalchemy/engine/base.py", line 1627, in _execute_text
  File "build/bdist.linux-x86_64/egg/sqlalchemy/engine/base.py", line 1697, in _execute_context
  File "build/bdist.linux-x86_64/egg/sqlalchemy/engine/base.py", line 1690, in _execute_context
  File "build/bdist.linux-x86_64/egg/sqlalchemy/engine/default.py", line 335, in do_execute
sqlalchemy.exc.OperationalError: (OperationalError) unknown database "cedict_0" 'PRAGMA "cedict_0".table_info("CEDICT")' ()
>>> 
```

**试用：** 我自己尝试了一些解决方案，例如：

如错误所示，它在 sqlite 数据库文件中找不到表，因此我通过添加以下行来编辑 cjklib.conf 文件，告诉它该表就在此处：

```
url = sqlite:////usr/local/share/cjklib/cedict.db 
```

然后，它找到了表 CEDICT 并停止抛出错误。但不幸的是，当我运行下面的代码时，它开始抛出另一种错误：

```
>>> from cjklib import characterlookup
>>> cjk = characterlookup.CharacterLookup('T') 
```

错误：

```
>>> cjk = characterlookup.CharacterLookup('T')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/cjklib/characterlookup.py", line 118, in __init__
    self.hasComponentLookup = self.db.hasTable('ComponentLookup')
  File "/usr/local/lib/python2.7/dist-packages/cjklib/dbconnector.py", line 444, in hasTable
    schema = self._findTable(tableName)
  File "/usr/local/lib/python2.7/dist-packages/cjklib/dbconnector.py", line 429, in _findTable
    if hasTable(tableName, schema=schema):
  File "build/bdist.linux-x86_64/egg/sqlalchemy/engine/base.py", line 2525, in has_table
  File "build/bdist.linux-x86_64/egg/sqlalchemy/engine/base.py", line 2412, in run_callable
  File "build/bdist.linux-x86_64/egg/sqlalchemy/engine/base.py", line 1959, in run_callable
  File "build/bdist.linux-x86_64/egg/sqlalchemy/dialects/sqlite/base.py", line 567, in has_table
  File "build/bdist.linux-x86_64/egg/sqlalchemy/engine/base.py", line 1450, in execute
  File "build/bdist.linux-x86_64/egg/sqlalchemy/engine/base.py", line 1627, in _execute_text
  File "build/bdist.linux-x86_64/egg/sqlalchemy/engine/base.py", line 1697, in _execute_context
  File "build/bdist.linux-x86_64/egg/sqlalchemy/engine/base.py", line 1690, in _execute_context
  File "build/bdist.linux-x86_64/egg/sqlalchemy/engine/default.py", line 335, in do_execute
sqlalchemy.exc.OperationalError: (OperationalError) unknown database "cjklib_0" 'PRAGMA "cjklib_0".table_info("ComponentLookup")' () 
```

如果我删除我添加的行，它将再次按预期工作。

**解决方案：**

如何让它同时读取 cedict.db 和 cjklib.db ？我猜，只有这样，它才可能适用于这两种情况而不会引发任何错误。

有没有人遇到过类似的情况？你是怎么解决的？或者，您还有什么想尝试的吗？请放一些灯！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:36:23.200

（1）您使CEDICT工作的方法**不完整**。虽然 "d = CEDICT()" 不会引发任何错误，但是当你使用字典函数时会遇到错误，例如 "d.getFor(u'Friend')"。您应该在配置文件中添加一个项目：

```
attach = sqlite:////usr/local/share/cjklib/cjklib.db 
```

但是，这种方法仍然会给出一个“characterlookup”错误（正如你提到的）。

(2) 真正的解决方案：为字典显式创建“dbconnection”。

```
>>> from cjklib.dictionary import CEDICT
>>> from cjklib.dbconnector import getDBConnector
>>> db = getDBConnector({'sqlalchemy.url': 'sqlite://', 'attach': ['cjklib']})
>>> d=CEDICT(dbConnectInst=db)
>>> it=d.getFor(u'朋友') 
```

**编辑：**

将 cjklib.conf 保留为默认配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T16:37:08.673

当您在 python 中全局初始化 CEDICT() 对象时，此错误也可能发生在多线程环境中，但随后您尝试在新创建的线程中使用相同的对象。

解决方案是在您打算进行字典查找的线程内创建对象。

# ios - 如何改变UITabbarViewController的navigationBar的颜色？

> ID：10476147
> 
> 赞同：0
> 
> 时间：2012-05-07T02:50:56.427
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller, uicolor

有一个 UITabBarController

```
- (void)getToMCGatherViewController
{
    mCGatherViewController = [[MCGatherViewController alloc] initWithNibName:@"MCGatherViewController" bundle:nil];
    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:mCGatherViewController];
    navigationController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:navigationController animated:YES];
    [navigationController release];
} 
```

在 .h 文件中：

```
 @interface MCGatherViewController : UITabBarController 
```

在 .m 文件中。我想改变视图导航栏的颜色

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.navigationController.navigationBar.tintColor=[UIColor greenColor];
} 
```

它根本不起作用。

帮我解决这个问题，提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:48:32.360

只需添加

```
[navigationController.navigationBar setTintColor:[UIColor greenColor]]; 
```

后

```
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:mCGatherViewController]; 
```

在您的 getToMCGatherViewController 方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:57:19.920

只需像这样编辑您的代码并尝试我认为这对您有用。

```
mCGatherViewController = [[MCGatherViewController alloc] initWithNibName:@"MCGatherViewController" bundle:nil];
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:mCGatherViewController];
navigationController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

[self.view addSubview:nav.view]; 
```

然后你改变你的导航栏色调颜色。

# android - 与中文 unicode 对比的语音识别结果

> ID：10476148
> 
> 赞同：2
> 
> 时间：2012-05-07T02:51:21.180
> 
> 标签：android, speech-recognition

我正在尝试为我国的老年人开发一个应用程序。在一个多种族的国家，我需要检测英语和汉语的声音（现在）。在将中文输出与中文 unicode 或字符进行比较时，我遇到了一些问题。

例如，如果语音识别救命（帮助），这将是一个正确的比较方法？

目前我正在使用这个。

`if(d[i] .equals("help") || d[i] .equals("&#25937;&#21629;"))`

可悲的是它不起作用。这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T02:54:20.663

您已经使用 HTML 编码对您的汉字进行了编码，这对于 Java 源代码是不合适的。尝试：

```
if(d[i] .equals("help") || d[i] .equals("\u6551\u547d")) 
```

有关完整信息，请参阅[Java 语言规范的 3.3 Unicode Escapes 部分。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.3)

# mysql - Rails Server Not Starting In OSX 10.73

> ID：10476151
> 
> 赞同：0
> 
> 时间：2012-05-07T02:51:50.337
> 
> 标签：mysql, ruby-on-rails, webrick

Installed Rails 3.2.3 and MySQL 5.6 fine on my OSX 10.7.3

I created a new project called "simple_cms" and then, in the terminal, tried to launch webrick with "rails server" and got nothing.

Hideyoshis-MacBook-Pro:simple_CMS gregpfeffer$ rails s /Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle: dlopen(/Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle, 9): Library not loaded: libmysqlclient.18.dylib (LoadError) Referenced from: /Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle Reason: image not found - /Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle from /Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2.rb:9 from /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `require' from /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in`require' from /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `each' from /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in`require' from /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `each' from /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in`require' from /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler.rb:119:in `require' from /Users/gregpfeffer/Sites/simple_cms/config/application.rb:7 from /Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/commands.rb:53:in`require' from /Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/commands.rb:53 from /Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap' from /Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/commands.rb:50 from script/rails:6:in`require' from script/rails:6 Hideyoshis-MacBook-Pro:simple_CMS gregpfeffer$ sudo install_name_tool -change libmysqlclient.16.dylib /usr/local/mysql/lib/libmysqlclient.16.dylib /Library/Ruby/Gems/1.8/gems/mysql2-0.2.4/lib/mysql2/mysql2.bundle install_name_tool: can't open file: /Library/Ruby/Gems/1.8/gems/mysql2-0.2.4/lib/mysql2/mysql2.bundle (No such file or directory)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T03:27:19.133

尝试添加：

```
export DYLD_LIBRARY_PATH=/usr/local/mysql/lib/:$DYLD_LIBRARY_PATH 
```

到你的 .bash_profile

这假设您接受了 mysql 的默认安装位置

# c++ - 如何授予用户应用程序的 root 访问权限？

> ID：10476154
> 
> 赞同：2
> 
> 时间：2012-05-07T02:52:09.667
> 
> 标签：c++, linux, root

我有一个在 linux 移动设备上运行的用户级 C++ 测试应用程序。其中一项测试涉及启用/禁用需要 root 权限写入设备文件的打印机纸张传感器。有没有办法授予我的应用程序这种特权？如果没有，是否有解决方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T03:06:43.140

这会做，

作为`root`执行：

```
chown -v root:root /path/to/yourapp
chmod -v 4755 /path/to/yourapp 
```

或者

```
chmod -v u+s /path/to/yourapp 
```

或者

```
man chmod 
```

这**不适用于脚本**。是的，你应该认真对待**jdizzle**所说的放弃不必要的特权。

解决此问题的另一种方法是使运行应用程序的用户成为拥有设备文件的组的成员。例如，

```
ls -la /dev/devicefile
crw-rw---- 1 root printer 4, 0 may  6 10:56 /dev/devicefile 
```

该`printer`组的成员可以读取和写入设备，因此您只需添加`joe`到该`printer`组（并重新启动会话）。

```
gpasswd -a joe printer 
```

如果您需要调整设备文件权限，您可能需要编辑 udev 规则以使其永久化。但`chmod`也应该工作。

其他值得研究的选项：（[这里](https://wiki.archlinux.org/index.php/Using_File_Capabilities_Instead_Of_Setuid)[`setcap(8)`](http://linux.die.net/man/8/setcap)有很好的指南）和.[`sudo(8)`](http://linux.die.net/man/8/sudo)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T02:59:50.053

您可以设置程序 setuid root，这意味着即使由用户运行，它也将始终以 root 身份运行。一旦完成需要 root 访问权限的必要操作，这通常需要特别小心地在程序中删除权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T04:54:30.030

您还可以有一个帮助程序，它本身是 setuid root - 或具有适当的功能，或通过`sudo`- 与打印机通信。您的主应用程序将分叉并执行该程序并通过管道与其通信，因此它本身不应以 root 身份运行。

帮助程序将是一个简单的可执行文件（具有适当的功能），它只能由您的主应用程序（而不是用户直接启动）启动，并通过管道或程序参数等与其通信。

很多图形管理程序也是这样做的：图形部分是一个与管理部分分开的程序，它们之间可以适当地进行通信。只有管​​理程序（通常是现有的命令行程序，如`adduser`）需要特殊权限。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-07T07:14:59.847

您绝对应该尽量避免以“root”身份运行您的程序，因为这不仅允许您的程序读/写 /dev/sensordevice，而且还会授予对系统上几乎所有内容的访问权限（包括完全变砖的能力）

因此，您应该尝试添加对所需资源的细粒度访问，使用适当的组并确保您的设备文件授予您的组写入访问权限。请参阅（例如）[udev](http://wiki.debian.org/udev)，了解如何编写适当的 udev 规则，该规则将特定设备的写访问权限授予给定组。

# php - fetch twitter content using simpleXmlElement in php fails

> ID：10476156
> 
> 赞同：0
> 
> 时间：2012-05-07T02:52:27.980
> 
> 标签：php, sxml

I had googled a code to fetch a public twitter content, it work fine when on my localhost but when I put it online on a hosted server, it does not seem to respond at all! Code is as below.

For example `url ='https://twitter.com/#!/NatureMagazine'`

```
if($entered['domain']=='twitter.com')
{
    $baseName = basename($url);
    // HINT Code works fine up to here but after this statement, nothing comes out

    $sXML = new SimpleXMLElement('http://twitter.com/users/show.xml?screen_name='.$baseName, NULL, TRUE);

    // TRUE specifies that data is a path or URL to an XML document instead of string data.
    $screen_name                = $sXML->screen_name;
    $location                   = $sXML->location;
    $description                = $sXML->description;
} 
```

Note: The same code works as expected on my local system.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T03:09:17.100

> 注意：在 PHP 5.1.2 之前，需要 --enable-simplexml 来启用这个扩展。

做一个`phpinfo()`检查 libxml 扩展是否在您的服务器环境中打开。

分享更多关于这正是问题所在。因为从代码中，您没有放置状态检查器来帮助您一路调试。

我希望`exit();`没有完全上传到服务器。

# iphone - where is class SBSMSManager located in ios5?

> ID：10476160
> 
> 赞同：0
> 
> 时间：2012-05-07T02:52:46.327
> 
> 标签：iphone, ios5, jailbreak

With ios 4.x it is under SpringBoard, but in ios5 I can't find it.

Where is SBSMSManager in ios5 or which class in ios5 has same functions with SBSMSManager in ios4.x?

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:47:34.277

似乎没有`SBSMSManager`，但我得到了一个名为`SMSPluginManager`. 获取`ChatKit`在您的 iPhone 中命名的二进制文件。该文件位于路径“/System/Library/SpringBoardPlugins/ChatKit.servicebundle/”下，然后对其进行类转储。

顺便说一句，SpringBoard 启动时会加载一些 /System/Library/SpringBoardPlugins 下的插件。当你找不到课程时，试试那里。

# python - ipython for Python 2.7.2 users on PUIAS (RedHat) Linux

> ID：10476161
> 
> 赞同：0
> 
> 时间：2012-05-07T02:52:54.897
> 
> 标签：python, redhat, ipython

I am guessing that I am not the only one using non-system Python 2.7.2 for scientific computations on 6.2 PUIAS Linux (RedHat)). My Python 2.7.2 is installed in the sandbox and I call it with the command python2.7\. When I need to execute scripts this is not the problem. However, I would like to use ipython instead default Python shell for interactive use. I added ipython using yum? When I start it, it defaults to system python. How do I force it to load python2.7?

Thanks a bunch!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:35:51.753

IPython is a Python package. When you have multiple Pythons, you must (generally, barring PYTHONPATH hacks) install a package for a given Python. yum would only install it for the System Python, so you must install it separately for your own Python. The solution is to simply `pip install ipython` with your own Python (install distribute/pip first, if you haven't).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:50:51.347

I am going to answer my own question. For people who are using Python for scientific computing on RedHat clones (PUIAS for example) the easiest way to get all they need is to use rpm package manager and [Enthought Python Distribution (EPD for short)](http://www.enthought.com/). EPD installs everything in a sandbox so system tools which are based on an obsolete version of Python are not massed up. However, paths have to be adjusted for system or even easier on the user base so that the using shell invokes non-system tools.

# sql - 删除数据透视表中显示的重复行

> ID：10476166
> 
> 赞同：3
> 
> 时间：2012-05-07T02:54:09.900
> 
> 标签：sql, tsql, pivot

基本上，我创建了一个数据透视查询，它将显示每个员工的每个成本代码的 total_work_hours。

这是我想要的输出：

```
employeeno  8322.170    10184.2648    8321.169    10184.2649 <- costcodes
--------------------------------------------------------------------------
080418         10.00          1.50        NULL          NULL
080441          6.50          NULL        1.00          3.00 
```

但这是我查询的结果：

```
employeeno  8322.170    10184.2648    8321.169    10184.2649 <- costcodes
--------------------------------------------------------------------------
080418         10.00          NULL        NULL          NULL
080418          NULL          1.50        NULL          NULL
080441          NULL          NULL        1.00          NULL
080441          6.50          NULL        NULL          NULL
080441          NULL          NULL        NULL          3.00 
```

这是我的内部查询的结果：

```
 employeeno    costcoding  hour_per_costcode        
      --------------------------------------------------
      PH080418   8322.170       10.00
      PH080418   10184.2648     1.50
      PH080441   8321.169       1.00
      PH080441   8322.170       6.50
      PH080441   10184.2649     3.00 
```

这是我的查询：

```
WITH PivotData AS  
    (SELECT wa.id,wa.sitecode, wa.companycode, wa.startdate, wa.enddate,  
            wa.description, wa.ratetypeid, wa_details.employeeno,  
            CAST(wa_details.costcode AS NVARCHAR(MAX)) + '.' +
            CAST(wa_details.subcostcode AS NVARCHAR(MAX)) costcoding ,
            wa_details.subcostcode, wa_details.hrswork [hour_per_costcode],  
            view_ttl_hours.ttl_work_hrs 
       FROM workallocation wa  
      INNER JOIN workallocation_details wa_details 
         ON wa.id = wa_details.workallocationid   
      INNER JOIN 
            (SELECT SUM(ttl_work_hrs) ttl_work_hrs, employee_id 
               FROM vwu_SUM_TIMESHEET_DAILY  
              WHERE TKSDATE BETWEEN '02-09-2012' AND '02-09-2012' 
              GROUP BY employee_id
            ) view_ttl_hours 
         ON wa_details.employeeno=view_ttl_hours.employee_id  WHERE wa.id=99
    )
SELECT employeeno, [8322.170], [10184.2648], [8321.169], [10184.2649]
  FROM PivotData   
 PIVOT (MAX([hour_per_costcode])          
        FOR costcoding         
         IN ([8322.170], [10184.2648], [8321.169], [10184.2649])
        ) AS PivotResult  
 ORDER BY employeeno; 
```

我的问题是如何将我的多行的值统一起来，以便实现我想要的输出？我也尝试了交叉表查询，但结果也是一样的。

我需要一些关于如何解决这个问题的指导；你能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T06:07:43.393

从 CTE 中删除不需要的列。像这样的东西应该适合你。

```
WITH PivotData AS  
    (SELECT wa_details.employeeno,  
            CAST(wa_details.costcode AS NVARCHAR(MAX)) + '.' +
            CAST(wa_details.subcostcode AS NVARCHAR(MAX)) costcoding ,
            wa_details.subcostcode, wa_details.hrswork [hour_per_costcode]
       FROM workallocation wa  
      INNER JOIN workallocation_details wa_details 
         ON wa.id = wa_details.workallocationid   
      INNER JOIN 
            (SELECT SUM(ttl_work_hrs) ttl_work_hrs, employee_id 
               FROM vwu_SUM_TIMESHEET_DAILY  
              WHERE TKSDATE BETWEEN '02-09-2012' AND '02-09-2012' 
              GROUP BY employee_id
            ) view_ttl_hours 
         ON wa_details.employeeno=view_ttl_hours.employee_id  WHERE wa.id=99
    )
SELECT employeeno, [8322.170], [10184.2648], [8321.169], [10184.2649]
  FROM PivotData   
 PIVOT (MAX([hour_per_costcode])          
        FOR costcoding         
         IN ([8322.170], [10184.2648], [8321.169], [10184.2649])
        ) AS PivotResult  
 ORDER BY employeeno; 
```

以上查询您的数据：

```
WITH PivotData AS  
    (select 'PH080418' as employeeno,   8322.170 as costcoding, 10.00 as hour_per_costcode union all
     select 'PH080418', 10184.2648, 1.50 union all
     select 'PH080441', 8321.169,   1.00 union all
     select 'PH080441', 8322.170,   6.50 union all
     select 'PH080441', 10184.2649, 3.00
    )
SELECT employeeno, [8322.170], [10184.2648], [8321.169], [10184.2649]
  FROM PivotData   
 PIVOT (MAX([hour_per_costcode])          
        FOR costcoding         
         IN ([8322.170], [10184.2648], [8321.169], [10184.2649])
        ) AS PivotResult  
 ORDER BY employeeno; 
```

结果：

```
employeeno 8322.170   10184.2648   8321.169   10184.2649
---------- ---------- ------------ ---------- -----------
PH080418   10.00      1.50         NULL       NULL
PH080441   6.50       NULL         1.00       3.00 
```

# c++ - ## 运算符是什么？

> ID：10476168
> 
> 赞同：1
> 
> 时间：2012-05-07T02:54:22.687
> 
> 标签：c++

> **可能重复：**
> [## 对 C(C++) 预处理器意味着什么？](https://stackoverflow.com/questions/2025858/what-does-mean-for-the-cc-preprocessor)

```
#define SIMPLE16_DESC_FUNC1(num1, log1) \
    bool                            \
    Simple16::try##num1##_##log1##bit(uint32_t *n, uint32_t len)    \
    {                                       \
            uint32_t        i;              \
            uint32_t        min;            \
\
            min = (len < num1)? len : num1; \
\
            for (i = 0; i < min; i++) {     \
                    if (int_utils::get_msb(n[i]) > log1 - 1)        \
                            return false;   \
            }               \
\
                return true;    \
        } 
```

我在某人的代码中发现了这段代码，似乎“##”运算符在函数名中起着重要作用。有人告诉我它的用途是什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T02:55:36.407

这是令[牌粘贴运算符](http://msdn.microsoft.com/en-us/library/09dwwt6y%28v=vs.80%29.aspx)。它连接两个标记，其中一个是宏的参数。

# meteor - 如何在meteor.com 上的Meteor 应用程序中部署节点模块？

> ID：10476170
> 
> 赞同：19
> 
> 时间：2012-05-07T02:55:07.897
> 
> 标签：meteor

我有一个使用节点 twit 模块的应用程序，可通过

```
npm install twit 
```

我从 .meteor/local/build/server/ 在本地部署了节点模块

因此，它在 .meteor/local/build/server/node_modules/twit 可见

我尝试在项目根目录安装它，但项目没有找到该模块。这导致我找到了上述有效的解决方案。

我的应用程序现在在本地运行良好。我能够运行和做所有事情，并且可以根据我想要做的事情从我的 Meteor 服务器端或客户端与 Twitter 交互。没有崩溃。

当我通过命令部署到meteor.com

```
meteor deploy [appname] --password 
```

应用程序部署成功。

当我尝试从浏览器访问 (app at anonistream.meteor.com)[anonistream.meteor.com] 时失败并且日志包含此错误。

```
[Mon May 07 2012 01:59:53 GMT+0000 (UTC)] WARNING
node.js:201
   throw e; // process.nextTick error, or 'error' event on first tick
         ^
Error: Cannot find module 'twit'
at Function._resolveFilename (module.js:332:11)
at Function._load (module.js:279:25)
at Module.require (module.js:354:17)
at require (module.js:370:17)
at app/server/server.js:2:12
at /meteor/containers/84162a7c-24e8-bf26-6fd8-e4ec13b2a935/bundle/server/server.js:111:21
at Array.forEach (native)
at Function.<anonymous>
 (/meteor/containers/84162a7c-24e8-bf26-6fd8-     e4ec13b2a935/bundle/server/underscore.js:76:11)
at /meteor/containers/84162a7c-24e8-bf26-6fd8-e4ec13b2a935/bundle/server/server.js:97:7
[Mon May 07 2012 01:59:53 GMT+0000 (UTC)] INFO STATUS running -> waiting
[Mon May 07 2012 01:59:53 GMT+0000 (UTC)] ERROR Application crashed with code: 1
[Mon May 07 2012 02:29:55 GMT+0000 (UTC)] INFO HIT / 24.94.158.145
[Mon May 07 2012 02:29:59 GMT+0000 (UTC)] INFO HIT /favicon.ico 24.94.158.145
[Mon May 07 2012 02:30:46 GMT+0000 (UTC)] INFO HIT / 24.94.158.145
[Mon May 07 2012 02:30:50 GMT+0000 (UTC)] INFO HIT /favicon.ico 24.94.158.145 
```

有人对如何实现这一点有任何建议吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-30T23:57:26.273

从 Meteor 6.0 开始，现在我们需要使用 Npm.require() 来代替。此外，我们需要将模块声明为全局变量，因为 Meteor 现在具有文件级范围。

```
 var path = Npm.require('path');
  var fs = Npm.require('fs');
  var base = path.resolve('.');
  var isBundle = fs.existsSync(base + '/bundle');
  var modulePath = base + (isBundle ? '/bundle/static' : '/public') + '/node_modules';
  MODULE_NAME = Npm.require(modulePath + '/MODULE_NAME'); // NOTE, this is going to be a global variable 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-04T15:19:04.633

最后，我是这样写的。它适用于本地和流星服务器。谢谢伊恩：D

在“app/public”中安装 npm 模块：

```
    app/public# npm install MODULE_NAME

```

在 app/server/server.js 内：

```
Meteor.startup(function () {
    var require = __meteor_bootstrap__.require;
    var path = require('path');
    var base = path.resolve('.');
    var isBundle = path.existsSync(base + '/bundle');
    var modulePath = base + (isBundle ? '/bundle/static' : '/public') + '/node_modules';

    var MODULE_NAME = require(modulePath + '/MODULE_NAME');
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-08T09:51:09.623

从流星 irc 上的 JonathanKingston 找到答案。提到[流星项目](https://github.com/me/meteorirc)

将节点模块放在项目公共目录中。

使用这样的代码来确保它加载。

```
var require = __meteor_bootstrap__.require;
var path = require("path");
var fs = require('fs');
var Twit;
var twitPath = 'node_modules/twit';

var base = path.resolve('.');
if (base == '/'){
  base = path.dirname(global.require.main.filename);   
}

var publicPath = path.resolve(base+'/public/'+twitPath);
var staticPath = path.resolve(base+'/static/'+twitPath);

if (path.existsSync(publicPath)){
  Twit = require(publicPath);
}
else if (path.existsSync(staticPath)){
  Twit = require(staticPath);
}
else{
  console.log('node_modules not found');
} 
```

之后流星部署应该可以工作，我把我的节点模块放在服务器目录中

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-10-27T11:35:50.733

刚刚花了半个小时弄清楚“在`app/public`步骤中安装 npm 模块，并认为我会为下一个人节省一些时间。从您的应用程序的主目录中：

```
cd public
mkdir node_modules
npm install foo 
```

默认情况下，`npm install foo`“本地”安装，但如果当前目录中没有`node_modules`文件夹，则它会向上移动目录树来寻找一个。我最终安装了包`$HOME/node_modules/foo`而不是本地项目。很好`localhost`，但不适合部署。

（感谢[npm install local](https://stackoverflow.com/questions/6514621/npm-install-locally)解决了我的根本问题。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-06-05T01:41:12.197

这段代码对我有用，meteor 0.8.x 和 node_modules 安装在我的应用程序的 ./public 中：

```
var path = Npm.require('path')
var fs = Npm.require('fs')
var base = path.resolve('.')
var isBundle = fs.existsSync(base + '/bundle')
var modulePath = base + (isBundle ? '/bundle/static' : '/../client/app') + '/node_modules/'

var twit  = Npm.require(modulePath+'rssparser') 
```

在 ./public 中创建 packages.json 文件也是一个好主意，以便通过 npm 更轻松地更新/安装。

流星万岁！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-17T23:27:24.927

改变：

```
var modulePath = base + (isBundle ? '/bundle/static' : '/../client/app') + '/node_modules/' 
```

到：

```
var modulePath = base + (isBundle ? '/bundle/static' : '/../web.browser/app') + '/node_modules/' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-14T03:32:06.663

你

```
base = base + "/bundle" 
```

让它发挥作用。

# android - 在 Android 中是否有更简洁的点击监听器方法？

> ID：10476187
> 
> 赞同：2
> 
> 时间：2012-05-07T02:56:46.157
> 
> 标签：android, onitemclicklistener, android-event

所以我已经在 Android 上开发了很长一段时间，而且我本身就是一个 .Net 开发人员。我面临的问题是我的代码看起来很糟糕，而且我真的不喜欢 Java\Android 不确定哪个导致点击事件出现在代码中的方式。在下面的这个例子中，我有一个带有点击事件的列表视图。

```
list_view.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            // TODO Auto-generated method stub

        }
    }); 
```

在 .Net 中，我会在我的 Initialize Components 方法中设置我的点击事件，然后在我的主代码页中实现它。我如何告诉 android 在我的代码中使用下面的点击事件方法，而不是在那里引用它。也许是这样的？

```
list_view.setOnItemClickListener(onItemClick()); 
```

稍后在我的代码页中。

```
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub

    }
}); 
```

总而言之，我只是在寻找一种更简洁的方法来将我的事件连接到我的控件，以便我可以更好地阅读代码。当最初是一名 .Net 开发人员时，迁移到 Java 和 Android 是一项艰巨的任务。

谢谢！

**编辑**

感谢您在下面的回答我在这里发布了我的工作。

```
list_view.setOnItemClickListener(list_view_onItemClickListener);

//below in my code
private OnItemClickListener  list_view_onItemClickListener = new OnItemClickListener (){
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub

    }

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T02:58:46.917

你可以试试[这个](https://codereview.stackexchange.com/a/10586/12329)！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T04:40:51.533

你可能喜欢或不喜欢，但我发现最适合我的方法是例如这是你的`layout.xml`

```
<Button1 android:id="@+id/btn1"  android:onClick="btnHandle">

</Button1>

<Button2 android:id="@+id/btn2 android:onClick="btnHandle">

</Button2> 
```

在你的`activity.Java`

```
public void btnHandle(View v)
{
  if(v.getId()==R.id.btn1){

}else if(v.getId()==R.id.btn2){

} 
```

通过这种方法，您不必实现任何接口，即使您将 Button 视图更改为 ImageView，您也不必在代码中做任何事情。但如果`setOnClickListener`您必须将`instance variable`类型从 Button 更改为`ImageView`. }

# php - 如何更改“转到应用程序”按钮？

> ID：10476189
> 
> 赞同：0
> 
> 时间：2012-05-07T02:57:22.377
> 
> 标签：php, facebook

我可以看到当我想使用某些应用程序时，它们有一些“好的，阅读文章”而不是“转到应用程序”按钮，我该如何在我的应用程序上更改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T03:10:12.560

查看[Facebook 的操作和对象](https://developers.facebook.com/docs/opengraph/keyconcepts/#actions-objects)。

*   [定义对象](https://developers.facebook.com/docs/opengraph/define-objects/)
*   [定义动作](https://developers.facebook.com/docs/opengraph/define-actions/)
*   [定义聚合](https://developers.facebook.com/docs/opengraph/define-units/)

您还必须提交它们以供[批准](https://developers.facebook.com/docs/opengraph/opengraph-approval/)。

# scheme - 偷看计划？

> ID：10476190
> 
> 赞同：1
> 
> 时间：2012-05-07T02:57:23.130
> 
> 标签：scheme, racket

`enter code here`只需要知道偷看计划的基础知识。我尝试查看球拍网站寻求帮助，但没有太多内容。或者，也许我在寻找错误的部分。无论如何，重点如下。

如果我有 (#\x #\b #\o #\x #\space #\3 #\6 #\0)

我希望能够将 x 识别为一个字符，然后继续查看直到达到空间并将其重新定义为一个单词。然后对 360 执行相同的操作。

有小费吗？谢谢，麻烦您了！:)

这是我的代码的样子，以防万一

```
(define (work x) 
(cond
((null? x)(write '$$))
(char-numeric? (car x))
(write 'Num)
(toke (cdr x)))
((char-alphabetic? (car x))
(write 'ID)
(work (cdr x)))
(else (write "other"))) 
```

这样做的问题是它会给我“xbox”的 IDIDIDID（这是代码的原因），但我想让它只为整个单词 xbox 输出一次 ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:03:23.157

有一些更简单的方法可以解决这个问题，但它们涉及到一些额外的语言知识。例如，使用[正则表达式](http://docs.racket-lang.org/reference/regexp.html)在空格处拆分字符串[`map`并`filter`](http://docs.racket-lang.org/reference/pairs.html)处理每个单词：

```
(define line "xbox 360")

(define (process line)
  (map (lambda (word)
         (cond ((string->number word) "number")
               (else "word")))
       (filter (lambda (str)
                 (not (equal? str "")))
               (regexp-split #px"\\s+" line)))) 
```

请注意，接收到的输入是一个*字符串*，其中包含输入文件中的一行（由过程返回`file->lines`）。一般的想法是：逐行读取文件，并使用上面的代码片段依次处理每个文件。

如果您可以在代码中使用更高级的功能，那么上面的方法就可以了。

**编辑 ：**

我编写了一个仅使用列表迭代和`read-char`(not `peek-char`，它只读取第一个字符并且不会前进到下一个字符) 的版本，但是您会发现这比上述过程要复杂得多：

```
(define (process line)
  (let ((port (open-input-string line)))
    (let loop ((char (read-char port))
               (acc  '()))
      (cond ((eof-object? char)
             (cond ((null? acc) '())
                   ((string->number (list->string acc)) (list "number"))
                   (else (list "word"))))
            ((char-whitespace? char)
             (cond ((null? acc)
                    (loop (read-char port) '()))
                   ((string->number (list->string acc))
                    (cons "number" (loop (read-char port) '())))
                   (else
                    (cons "word"   (loop (read-char port) '())))))
            (else
             (loop (read-char port) (cons char acc))))))) 
```

对于以下测试，两种解决方案都按预期工作：

```
(process "xbox 360")
> '("word" "number")

(process "1")
> '("number")

(process "a")
> '("word")

(process " ")
> '()

(process "")
> '()

(process "  a  b  1 a   ")
> '("word" "word" "number" "word") 
```

# c++ - Qt 应用程序在退出时崩溃

> ID：10476191
> 
> 赞同：3
> 
> 时间：2012-05-07T02:57:31.820
> 
> 标签：c++, qt

我有一个用 Qt 库用 C++ 编写的 GUI。对于我的应用程序，我使用了 TreeView 对象。为了使这个对象的重用变得容易，我制作了一个模板类，我的 QObjects 可以从中继承。由于 moc 不能与模板类一起使用，我制作了这样的类：

```
class Tree : public QObject, public TreeTemplate<TreeType, TreeItemType>
{
     Q_OBJECT
}; 
```

这样只允许 Tree 类使用 moc（TreeTemplate 不继承 QObject 或使用 Q_OBJECT 宏），同时获得模板的好处。

我的问题是，在退出我的应用程序时崩溃，没有失败（即使我调用 exit 并跳过 QApplication 清理）。我认为生成的 moc 类可能存在问题，它们的“静态元对象”

我不能使用 valgrind，因为`__ASM__`它无法处理。:-(

有谁知道我使用继承自模板类的模板化 Qt 类 (+moc) 的设计是否会导致此问题？

崩溃出现在：退出后的 libc.so 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:38:07.747

AFAIK，你的方法行不通。

在 C++ 预处理器之前运行，这`moc`就是`QObject`模板类不起作用的原因 - 预处理器尚未生成类。您正在对类进行模板化，因此`moc`关于该类的数据将与在预处理器期间从该类创建的任何模板类的签名不匹配。

# git - Git Pre Commit Hook -- 将文件更改转储到文件中

> ID：10476192
> 
> 赞同：2
> 
> 时间：2012-05-07T02:57:50.267
> 
> 标签：git

我最近制作了一个使用 Github API 来处理本地更新脚本 (php) 的 cms。该脚本读取所有文件更改，然后获取每个文件的原始数据，并更新 cms 文件...问题是，在重命名文件时，github API 缺乏。

我对此的解决方案是创建一个预提交挂钩来获取所有文件更改，并将信息转储到 1 个文件中，该文件在文件重命名时可以更具描述性。这可能吗？我更喜欢信息是否可以存储在 json 数组中，以便 php 直接读取？如果这是可能的，我将如何编写这样的脚本？我知道一些 python，但对 ruby​​ 或 bash 知之甚少。任何帮助表示赞赏！

# sql - 只能在语句内部使用 <> 或 !=

> ID：10476208
> 
> 赞同：0
> 
> 时间：2012-05-07T03:02:34.870
> 
> 标签：sql, oracle, stored-procedures, if-statement, plsql

我有一个过程用游标遍历一个表中的记录，然后将插入语句启动到另一个表中。

我在 If 语句中收到此错误`!= ALL`

```
 Begin

 If V_Item = V_Item_G 
    And V_New_Part Is Null   
    And (V_Delete_G Is Null or V_Delete_G != 'Y')
    And Status_G != ALL  ('KNOWN', 'NEW', 'UNKNOWN', 'SOLD') 
 THEN INSERT INTO PART     
    VALUES ( V_Item, V_New_Part);

  End IF;

  End; 
```

请注意，`NOT IN`这不起作用。

Using`not in`不会插入任何值。当我手动排除故障`!= ALL`或`!= Any`返回需要从 select 语句插入的正确值时，但是当我在语句中使用 NOT IN 时，它不会插入正确的值。如果我注释掉该行并执行该过程，它会返回大部分正确的值。

```
Not In ('KNOWN', 'NEW', 'UNKNOWN', 'SOLD') 
--Does not work 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T03:33:33.310

做这个...

```
And Status_G != ALL  ('KNOWN', 'NEW', 'UNKNOWN', 'SOLD') 
```

...首先使用显式方法：

```
And 
(Status_G <> 'KNOWN' AND Status_G <> 'NEW' 
AND Status_G <> 'UNKNOWN' AND Status_G <> 'SOLD') 
```

你也可以这样做：

```
And 
NOT (Status_G = 'KNOWN' OR Status_G = 'NEW' 
OR Status_G = 'UNKNOWN' OR Status_G = 'SOLD') 
```

如果仍然（非常明确的条件）没有插入正确的值，则代码中的错误不在该行。查看您的 IF 语句的其他条件，或者您的数据

**也许**

变量 Status_G 有错字？请调试打印 Status_G 的值

# php - Wordpress query_posts（）不显示旧帖子

> ID：10476210
> 
> 赞同：0
> 
> 时间：2012-05-07T03:02:48.613
> 
> 标签：php, html, css, wordpress

这是我的示例站点[http://box7.host1free.com/~avodes/](http://box7.host1free.com/~avodes/)我在博客文章 (blog.php) 上遇到了问题。即使我点击了“旧条目”链接，仍然显示 5 个新帖子而不是旧帖子。

这是我的代码：

博客.php

```
 <?php

/*
Template Name: Blog-2
*/

?>

<?php get_header(); ?>
        <?php query_posts( array(
     'posts_per_page' => 5,
     'cat' => '1',
     'paged' => ( get_query_var('page') ? get_query_var('page') : 1 ),
));
?>

<div id="main-content">

    <?php if (have_posts()) : while (have_posts()) : the_post(); ?>

        <div <?php post_class() ?> id="post-<?php the_ID(); ?>">

            <h2><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h2>

            <?php include (TEMPLATEPATH . '/inc/meta.php' ); ?>

            <div class="entry">
                <?php the_content(); ?>
            </div>

            <div class="postmetadata">
                <?php the_tags('Tags: ', ', ', '<br />'); ?>
                Posted in <?php the_category(', ') ?> | 
                <?php comments_popup_link('No Comments &#187;', '1 Comment &#187;', '% Comments &#187;'); ?>
            </div>

        </div>

    <?php endwhile; ?>

    <?php include (TEMPLATEPATH . '/inc/nav.php' ); ?>

    <?php else : ?>

        <h2>Not Found</h2>

    <?php endif; ?>

    </div>

<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T05:03:46.610

我没有方便检查的 WordPress 安装，但[这个页面](http://scribu.net/wordpress/wp-pagenavi/right-way-to-use-query_posts.html)似乎暗示你应该在你的`get_query_var`.

这有什么区别吗？

# objective-c - 在 Objective C 中使用 NSString 放置注册符号的示例

> ID：10476212
> 
> 赞同：3
> 
> 时间：2012-05-07T03:03:05.653
> 
> 标签：objective-c

有没有人成功地在目标 C 中使用 NSString 将注册符号符号添加到他们的文本中？我尝试使用等效的 unicode：\u00AE 但这并没有给我应有的注册符号符号！任何人都可以提供任何见解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T03:10:46.647

`NSLog(@"Hello\u00AE");`在我的控制台上输出带有注册字符的预期字符串。可能真的是您在显示字符串时尝试使用的字体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T04:55:53.473

在美式键盘上，可能还有其他键盘上，您只需输入`Option`- `R`：®®®®®®®®®®®®

或者，使用“编辑”菜单中的“特殊字符”面板并将其拖放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T03:10:01.550

您可以简单地按原样放置字符（没有 unicode 转义它）。版权和商标字符也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T03:13:19.903

使用 NSLocalizedString 作为您的就地字符串，例如 NSLocalizedString(@"registered sign symbol",@"")，然后在 InfoPlist.strings 文件中添加 "registered sign symbol"="registeredsymbol"; InfoPlist.strings 是 utf8 或 utf16，因此您可以直接在其中输入注册的符号，有一些共享软件应用程序，例如“UnicodeChecker”，可以让您输入奇怪的 unichar 字符。

或者，您可以使用 +[NSString stringWithCharacters:(const unichar *)chars length:(NSUInteger)length] 从 unchar 字符数组创建字符串。

# postgresql - ActiveRecord - 创建一个没有 Rails 的数据库

> ID：10476213
> 
> 赞同：0
> 
> 时间：2012-05-07T03:03:13.593
> 
> 标签：postgresql, activerecord

如果 ActiveRecord 尚不存在，我无法找出如何从 ActiveRecord 创建数据库。我看过这个：[http](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/PostgreSQLAdapter.html#method-i-create_database) ://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/PostgreSQLAdapter.html#method-i-create_database ，但据我所知，它不想玩得很好。 ..我不确定我在这里缺少什么。这甚至可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T20:45:13.980

I managed to cobble together this thing that works with both heroku and on my local machine, and will create a database if one doesn't exist.

```
# ./lib/db_connect.rb

require 'erb'
require 'uri'
require 'em-synchrony/activerecord'

class DbConnect
  attr_accessor :config
  def initialize
    @db = URI.parse(ENV['DATABASE_URL'] || 'http://localhost')
    if @db.scheme == 'postgres' # This section makes Heroku work
      ActiveRecord::Base.establish_connection(
        :adapter  => @db.scheme == 'postgres' ? 'postgresql' : @db.scheme,
        :host     => @db.host,
        :username => @db.user,
        :password => @db.password,
        :database => @db.path[1..-1],
        :encoding => 'utf8'
      )
    else # And this is for my local environment
      environment = ENV['DATABASE_URL'] ? 'production' : 'development'
      @db = YAML.load(ERB.new(File.read('config/database.yml')).result)[environment]
      ActiveRecord::Base.establish_connection(@db)
      @config = ActiveRecord::Base.connection.pool.spec.config
    end
  end
end

# connect to the database
DbConnect.new 
```

And here's a Rakefile that uses it.

```
# ./Rakefile

$: << './lib'
require 'db_connect'

db = DbConnect.new
config = db.config

desc 'create the database'
task :create_db do
  unless ENV['DATABASE_URL'].present?
    ActiveRecord::Base.establish_connection adapter:'postgresql',username:config[:username],password:config[:password], database: 'postgres'
    ActiveRecord::Base.connection.create_database config[:database]
  else
    raise StandardError, "You cannot do this on Heroku!"
  end
end

desc 'create the users table'
task :create_users_table do
  ActiveRecord::Schema.define(:version => 0) do
    create_table "users", :force => true do |t|
      t.string   "first_name"
      t.string   "last_name"
      t.datetime "created_at", :null => false
      t.datetime "updated_at", :null => false
    end
  end
end 
```

Problem solved.

# ios - applicationDidFinishLaunching 后统一游戏崩溃

> ID：10476214
> 
> 赞同：0
> 
> 时间：2012-05-07T03:03:17.430
> 
> 标签：ios, unity3d

我通过 unity 3.4.2 构建我的项目并在 Xcode 4.2 中运行它。执行UnityInitApplication（appPath）函数时游戏退出。我可以正确构建和运行其他项目。我想知道可能的原因。有人可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:36:41.337

1.  在构建应用程序之前，请确保 unity 和 xcode 中的包标识符相同
2.  如果它没有解决删除应用程序缓存：Organizer -> Projects -> 选择您的应用程序并删除并重建项目。

# python - 在 python 中使用 matplotlib 绘制直方图

> ID：10476217
> 
> 赞同：0
> 
> 时间：2012-05-07T03:03:53.313
> 
> 标签：python, matplotlib, histogram

我有一个包含 2 列的文件，例如：

```
111, 3  
122, 4  
155, 3  
192, 5  
11,  9  
123, 10  
120, 23 
```

我怎样才能写出像 ((111,122,155,192,11,123,120),(3,4,3,5,9,10,23)) 这样的数据。现在我要做的就是使用`matplotlib`.
请帮助一些基本的想法。！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T05:19:48.630

你的意思是这样的吗？

```
>>> import numpy as np
>>> import matplotlib.pyplot as plt
>>> xs, ys = np.loadtxt('/tmp/example.txt', delimiter=',').T
>>> print xs
[ 111\.  122\.  155\.  192\.   11\.  122\.  120.]
>>> print ys
[  3\.   4\.   3\.   5\.   9\.  10\.  23.]
>>> plt.bar(xs, ys)
<Container object of 7 artists>
>>> plt.show() 
```

![在此处输入图像描述](../Images/8ddbd05f0e89123a8ea6857f09c7532d.png)

# image-processing - 手部区域提取并与人脸区分开来

> ID：10476219
> 
> 赞同：0
> 
> 时间：2012-05-07T03:04:00.460
> 
> 标签：image-processing, opencv, computer-vision

现在我正在研究一个可以识别人类手势并执行相应命令的系统。但是，由于手和脸的颜色相似，我在定位和手以及排除面部区域的影响方面有些麻烦。因此，我需要一种鲁棒的算法来更准确、更稳定地定位手部区域。任何人都可以给我一些建议吗？

顺便说一句，还有一个小问题：如果生成的二值图片中的手部区域充满了孔洞，我怎样才能有效地填补这些孔洞，以便找到正确的手部轮廓？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:19:11.630

首先，就像在 opencv 中用于检测人脸一样，您可以训练一个[Haarcascade](http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html)分类器 ( [Adaboost](http://en.wikipedia.org/wiki/AdaBoost) ) 来检测手部。您应该建立一个包含大量手部图像的训练数据库。

其次，应使用[膨胀](http://en.wikipedia.org/wiki/Dilation_%28morphology%29)算子（形态学）解决二进制图像中的填充孔。

# regex - 正则表达式前面的单词匹配

> ID：10476221
> 
> 赞同：1
> 
> 时间：2012-05-07T03:04:19.933
> 
> 标签：regex

我试图制作一个正则表达式来查找某个单词后跟“not”，例如“does not”、“are not”等。到目前为止，我的正则表达式是：[http ://rubular.com/r/ 5bPRtuz9lA](http://rubular.com/r/5bPRtuz9lA)

```
/\b(are|can|could|did|does|do|had||has|should|have|is|were|might|must|will|would)+\snot/i 
```

问题是“不”匹配这不是我想要的。如果它前面有一个指定的单词，我只希望它匹配。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T03:11:12.037

你这里有一个额外的管道：（`had||has`应该是`had|has`）。

这就像说`"had" or "" or "has"`。因此，一个空字符串后跟一个空格，后跟“not”将匹配您的正则表达式。

顺便说一句，您可能不希望`+`在单词列表的末尾出现。这使它成为一个或多个，因此您的正则表达式将匹配“canwoulddoes not”。只需删除`+`即可解决此问题。

# java - 如何从 Java 网站读取 .dat 文件中的文本？

> ID：10476223
> 
> 赞同：0
> 
> 时间：2012-05-07T03:04:29.457
> 
> 标签：java, android

我正在使用 java 并尝试从网站读取 .dat 文件，但它不起作用。我试过的是：

```
URL url = new URL("http://myExample.com/Example.dat");
BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(url.openStream())); 
```

我将示例 url 放在那里，但在我的代码中它确实有现有的 .dat 文件，并且在该 dat 文件中它有完整的文本。

它甚至没有显示错误，我试图查看错误是什么，但在`catch`声明中，它说`null`。

请问我可以得到一个建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T03:17:31.230

您没有显示足够的代码来确定问题所在。但作为参考，以下工作：

```
URL url = new URL("http://google.com");
BufferedReader br = new BufferedReader(new InputStreamReader(url.openStream()));
String line = null;
while((line = br.readLine()) != null){
    //print line
} 
```

# forms - 单击“取消”按钮将修改后的输入字段替换为原始值

> ID：10476224
> 
> 赞同：0
> 
> 时间：2012-05-07T03:04:30.133
> 
> 标签：forms, jsp, struts2

我有一个表单，当加载时从表中检索成员配置文件详细信息并显示在表单中，用户可以更改表单字段并使用“更新配置文件”按钮保存，此功能工作正常。但是当用户单击“取消”按钮时，修改后的值应该被替换为原来的一次，即当我们重新加载页面时。取消按钮应该只用原始一次替换修改过的，而不重新加载表单。

这是表单字段的片段

```
<div class="control-group"><label class="control-label" >Last Name</label>
<div class="controls"><input id="lastName" type="text" 
value=" <s:propertyvalue="#currentMember.memberlastname" escape="false"/>"
name="member.memberlastname"/> 
```

我们在项目中使用 struts2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:08:46.683

除非我想念你，否则这很简单。只是不要使用取消按钮提交表单。您是否使用`<s:submit/>`取消按钮的标签？如果是这样，请不要使用`<s:url/>`标签进行取消操作。

# c++ - 如何在 Linux 上使用智能指针（例如 auto_ptr r shared_ptr）在 C++ 中生成链表数据结构？

> ID：10476226
> 
> 赞同：0
> 
> 时间：2012-05-07T03:04:36.843
> 
> 标签：c++, linux, segmentation-fault, shared-ptr, auto-ptr

这是一个 C++ 编程问题。

我需要生成一个列表并返回一个指针，以便其他函数可以使用该列表。该代码有效，但存在内存泄漏，因为我使用“new”为列表分配每个新节点。

使用列表后，我必须释放内存。

我的代码如下：

```
#include <iostream>
#include <stack>
#include <memory>
using namespace std;

class linkListClass
{

private:
      int data;
      auto_ptr<linkListClass> nextData;
public:
     auto_ptr<linkListClass> buildLinkList(const int size);
     int getData(){return data;};
     int printListBackward(auto_ptr<linkListClass> listroot);
};

inline auto_ptr<linkListClass> linkListClass::buildLinkList(const int size)
{
            linkListClass *trueRoot;
            linkListClass *listRoot = new linkListClass ;
            linkListClass *trueRoot;
            linkListClass *listRoot = new linkListClass ;
            // data is random int
            for (int i = 0; i < size ; ++i)
            {
                    if (i < size -1)
                    {
                            if (i == 0 )
                            {
                                    listRoot->data = rand()%10 ;
                                    listRoot->nextData = auto_ptr<linkListClass>(0) ;
                                    trueRoot = listRoot ; // transfer ownership
                            }
                            else{
                                    listRoot->nextData = auto_ptr<linkListClass> (new linkListClass );  // segmentation fault 
                                    listRoot->data = rand()%10 ;
                                    listRoot = listRoot->nextData ;
                            }

                    }
                    else
                            listRoot->nextData = auto_ptr<linkListClass>(0) ;

            }

    cout << "the built list has " << size << " data \n\n" ;
    return trueRoot;
 }
 inline int linkListClass::printListBackward(auto_ptr<linkListClass> listroot)
 {
    int counter =0 ;
    stack<int> outputStack;
    cout << "print the list forward \n\n" ;
    //if (listroot != NULL)
    cout << "print the list forward \n\n" ;
    //if (listroot != NULL)
    if (listroot.get() != 0)
    {
            do
            {
                    try{
                            cout << listroot->getData() << " \t " ;
                            outputStack.push(listroot->data);
                            listroot = listroot->nextData;
                            ++counter;
                            cout << "in printListBackward counter is " << counter << endl;
                            //if (listroot == 0 ) break;
                    }
                    catch(exception& e)
                    {
                            cout << "an error is " << e.what() << endl;
                            return 1;
                    }

            //}while(listroot != 0);
            }while(listroot.get() != 0);
            cout << "in printListBackward outof do while \n\n " << endl ;
    }
    else
    {
            cout << "the input list is null \n\n" << endl;
            return 1;
    }
    cout << endl ;
    cout << "there are" << counter << " data in the list \n\n " << endl ;
    cout << "print the list backward \n\n" ;

    if (outputStack.empty() == 1)
    {
            cout << "the ouytput queu is empty \n\n " << endl ;

            cout << "the ouytput queu is empty \n\n " << endl ;
            return 1;
    }
    else
    {
            do
            {
                    cout << outputStack.top() << " \t" ;
                    outputStack.pop();
            }while(outputStack.empty() == 0);
    }
    cout << endl;
    cout << "there are" << counter << " data in the list \n\n " << endl ;
    return 0 ;
  }

  int main()
  {
    const int listSize = 5;
    linkListClass linkListObj;
    auto_ptr<linkListClass> myRoot  ; //= linkListClass::buildLinkList(listSize);
    myRoot = linkListObj.buildLinkList(listSize);
    linkListObj.printListBackward(myRoot);

    return 0;
   }

  // EOF 
```

代码存在分段错误，因为 auto_ptr 转移了指针对象的所有权，因此之后

```
listRoot = listRoot->nextData 
```

链表被破坏并且 listRoot->nextData 为 NULL。

我试过 tr1::shared_ptr 和 waek_ptr

```
 tr1::weak_ptr<linkListClass> wp1 = listRoot->nextData;
    listRoot = wp1.lock() ;
    listRoot = listRoot->nextData ; 
```

但我得到编译错误：

> listPtSharedptr.cpp:63: 错误: 从 linkListClass* 转换为非标量类型 std::tr1::weak_ptr 请求 listPtSharedptr.cpp:65: 错误: listRoot = listRoot.std::tr1::shared_ptr 中的 operator= 不匹配<_Tp>::operator-> with _Tp = linkListClass->linkListClass::nextData /usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++ /4.1.2/tr1/boost_shared_ptr.h:486：注意：候选者是：std::tr1::shared_ptr& std::tr1::shared_ptr::operator=(const std::tr1::shared_ptr&)

任何帮助将不胜感激 。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T05:06:22.067

这是对您的函数“buildLinkList”的修改，现在应该可以使用。不过，有一个区别。您正在创建一个 FIFO 列表。此版本创建一个 LIFO 列表。我想仅使用 auto_ptrs 很难创建 FIFO。之后，您可以尝试使用此工作示例来使用 shared_ptrs 并将其转换为 FIFO 列表。

```
inline auto_ptr<linkListClass> linkListClass::buildLinkList(const int size)
{
            auto_ptr<linkListClass> trueRoot(0);
            auto_ptr<linkListClass> listRoot(0);
            // data is random int
            for (int i = 0; i < size ; ++i)
            {
                     listRoot = auto_ptr<linkListClass> (new linkListClass );
                     listRoot->data = random()%10 ;
                     listRoot->nextData = trueRoot;
                     trueRoot = listRoot;
            }
    cout << "the built list has " << size << " data \n\n" ;
    return trueRoot;
 } 
```

# java - 在线 java webstart 小程序将不允许在 mac osx 上使用 mouseDragged()，但可以在 Windows 上运行。我错过了什么吗？

> ID：10476228
> 
> 赞同：0
> 
> 时间：2012-05-07T03:04:54.700
> 
> 标签：java, macos, applet, processing, java-web-start

**请注意*，我一直在阅读，Apple Inc 的 java 插件可能不允许这样做，也可能不会，但我觉得这是我正在做的事情。话虽如此....*

我使用...编写了一个 java 小程序`Processing 1.5.1`，上传到我的网站后，它可以在使用 IE、FF、Safari 和 Chrome 的 Windows 上完美运行。

但是，没有一个浏览器允许它在 mac osx 上正常工作。它可以正常加载和显示，但您根本无法与之交互。

该应用程序所做的只是加载一个 .obj 并让您在拖动鼠标时旋转它。

非常简单的程序。但是由于某种原因，鼠标拖动功能在 mac 上不起作用。就像小程序永远不会从浏览器或操作系统中获取焦点一样。

知道我能做什么吗？我正在使用java webstart。

*Processing 在导出小程序时生成 .jar 和 java 脚本。我需要在我的草图中添加一些东西以使其适用于 Mac 吗？这是我的处理草图：

```
//this sketch was created as an example for the IMA 
//by Joseph Aaron Campbell
//josephaaroncampbell.com
//it uses OBJLoader and the SAITO example as a base

import processing.opengl.*;
import processing.opengl.PGraphicsOpenGL;//put this in because I got a random error looking for 
                                         //it.probably dont need it
import saito.objloader.*;

OBJModel model ;

float rotX, rotY;

void setup()
{
    size(640, 450, P3D);
    frameRate(30);
    ///keep your poly count 32000 and below for obj files
    //'or youre going to have a bad time'
    //
    //create and load instance of model
    model = new OBJModel(this, "vase_18.obj", "absolute", TRIANGLES);
    model.enableDebug();
    //scale of model. not sure the relationship to original size
    model.scale(10);
    model.translateToCenter();
    stroke(255);
    noStroke();
}

void draw()
{
   //what color is your background? 0=black, 255=white
    background(15);
     //add some info about model and origins
    String s = "Original Vase found at: Http://www.imamuseum.org/art/collections/artwork/abstract-vessel-black  Artist: Odundo, Magdalene";
    fill(200, 200, 200);
    textSize(12);
    textMode(SCREEN);
    textSize(12);
    text(s, 15, 20, 450, 50);

    //retrieve mouse cordinates for later use
    //adds directional light to position of mouse
    float dirY = (mouseY / float(height) - 0.5) * 2;
    float dirX = (mouseX / float(width) - 0.5) * 2;

    //Lights
    directionalLight(100,100, 100, -300, 150, -1);
    lightSpecular(255, 255, 255); 
    shininess(15.0);
    directionalLight(145,145,145, 300, 200, 1);
    directionalLight(100,100,100, -400,400,-1);

   //pushMatrix and popMatrix create little bubble for model to be in
    pushMatrix();//begin changes to model
    translate(width/2, height/2, 0);
    rotateX(rotY*0.4);
    rotateY(rotX*0.4);
    model.draw();
    popMatrix();//end changes to model

}

void mouseDragged()
{

   rotX += (mouseX - pmouseX) * 0.01;
   rotY -= (mouseY - pmouseY) * 0.01;

}//mousevoid 
```

我如何通过处理生成的 html 加载草图：

```
 ...

  <div id="vase_container">
<applet code="org.jdesktop.applet.util.JNLPAppletLauncher"
    width="640"
    height="450"
    archive="http://absolute path to/vase.jar,
             http://absolute path to/opengl.jar,
             http://absolute path to/OBJLoader.jar,
          http://absolute path to/core.jar,
          http://jogamp.org/deployment/jogamp-current/jar/applet-launcher.jar,
          http://jogamp.org/deployment/jogamp-current/jar/jogl.all.jar,
          http://jogamp.org/deployment/jogamp-current/jar/gluegen-rt.jar">
  <!--http://jogamp.org/deployment/webstart/jogl-demos/jogl-demos.jar-->
  <param name="codebase_lookup" value="false" />
  <param name="subapplet.classname" value="vase" />
  <!--<param name="subapplet.displayname" value="Pretty Name Here">-->
  <param name="noddraw.check" value="true" />
  <param name="progressbar" value="true" />
  <param name="jnlpNumExtensions" value="1" />
  <param name="jnlpExtension1"
     value="http://jogamp.org/deployment/jogamp-current/jogl-all-awt.jnlp" />
  <param name="java_arguments" value="-Dsun.java2d.noddraw=true" />
  <!--<param name="jnlp_href" value="applet-gears.jnlp">-->

        .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:29:05.993

[`Processing`](http://processing.org/reference/libraries/opengl/)与`OpenGL`through接口[`JOGL`](http://jogamp.org/jogl/www/)。您可能需要构建一个 Mac OS 版本，这将需要安装 Mac[开发工具](http://en.wikipedia.org/wiki/Apple_Developer_Tools)来获取 OpenGL 头文件。

# mongodb - “点不在区间 [-180,180)” MongoDB 错误

> ID：10476232
> 
> 赞同：1
> 
> 时间：2012-05-07T03:05:59.370
> 
> 标签：mongodb, pymongo

我使用 PyMongo 的语句在我的集合上创建了地理空间索引：

```
self.geo_collection.create_index([('location',pymongo.GEO2D)],\
         min=0,max=700,name='test_name') 
```

但是当我尝试执行以下查询时：

```
{'_id': ObjectId('4fa739422d38036937000000'), 'location': {'$within': {'$polygon': [[165, 10], [165, 90], [290, 10], [290, 90]]}}} 
```

我总是得到一个

```
database error: point not in interval of [ -180, 180 ) 
```

谁能帮我弄清楚发生了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:46:11.713

地理空间索引按广告宣传。要使用 $polygon，您必须拥有 mongodb 1.9 或更高版本。我在 mongodb 2.0.4 上运行以下脚本没有任何问题

```
import pymongo

db = pymongo.Connection().foo
db.foo.create_index([("loc","2d")], min=0, max=700, safe=True)
db.foo.insert({"loc":(180, 50)}, safe=True)
db.foo.insert({"loc":(240, 490)}, safe=True)
db.foo.insert({"loc":(240, 530)}, safe=True)
polygonA = [ [ 165, 10 ], [ 165, 90 ], [ 290, 10 ], [ 290, 90 ] ]
for doc in db.foo.find({"loc":{"$within":{'$polygon':polygonA}}}):
    print doc 
```

结果如下

```
{u'loc': [180, 50], u'_id': ObjectId('4fa7b47c81dde04973000000')} 
```

# java - Flickr JSON 解析错误

> ID：10476237
> 
> 赞同：0
> 
> 时间：2012-05-07T03:07:45.773
> 
> 标签：java, json, flickr

我编写了这段代码来从 flickr 检索照片。但是当我运行程序时，它显示了这个错误：

```
Exception in thread "main" org.codehaus.jettison.json.JSONException: JSONObject["photo"] not found. 
```

这是源代码

```
public static void main(String[] args) throws IOException, JSONException {

    HttpGet httpget = new HttpGet("http://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=********&format=json&nojsoncallback=1&per_page=1&text=MatrixMovie");

    ResponseHandler<String> responseHandler = new BasicResponseHandler();
    HttpClient httpClient = new DefaultHttpClient();

    String responseBody = httpClient.execute(httpget, responseHandler);

    System.out.println(responseBody);

    JSONObject jo2 = new JSONObject(responseBody);
    System.out.println(jo2);
    JSONArray jarray = jo2.getJSONArray("photo");
    System.out.println(jarray);

    for(int i=0; i<jarray.length(); i++)
    {

        JSONObject jobject = jarray.getJSONObject(i);
        //System.out.println(jobject.getString("id"));
        System.out.println(jobject.getString("owner"));
    }

}

} 
```

这是我从 flickr 得到的回复。

```
{"photos":{"page":1,"pages":9,"perpage":1,"total":"9",
"photo": 
[{"id":"5589016310",
"owner":"61369554@N03",
"secret":"eb2bf0f940",
"server":"5293",
"farm":6,
"title":"MatrixMovie-GoldenAwake",
"ispublic":1,
"isfriend":0,
"isfamily":0}]},
"stat":"ok"} 
```

但不知道为什么它没有得到“照片”数组。谁能帮我解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-08T11:40:16.183

要调用照片，您应该首先将另一个对象称为照片，然后在该对象内调用数组照片！像这样：

```
JSONObject jo3 = jo2.getJSONObject("photos");
JSONArray jarray=jo3.getJSONArray("photo"); 
```

我检查了，这行得通！希望能帮助到你 ：）

# sql - T-SQL 中必须转义的字符

> ID：10476252
> 
> 赞同：20
> 
> 时间：2012-05-07T03:11:15.887
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我正在寻找必须在 ms sql server 中转义的特殊字符列表，但找不到我看到的关于建议使用参数化查询的类似问题的一个和大部分答案。我已经在做但是我正在使用的框架对我没有任何逃避。

因此，我想我会试一试，看看哪个失败了....我尝试了一个简单的查询

```
select * from x where value = '<characters>' 
```

在这样的查询中，我尝试了几乎所有我能在键盘上找到的字符，它们似乎都可以工作......除了单引号......那个失败了。

因此，我想知道无效的字符列表，并且必须在 ms sql server - tsql 中转义，并且不想冒险只转义单引号而留下可能导致麻烦的其余部分

感谢你的帮助

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-07T03:16:29.280

字符串中唯一需要转义的字符是单引号（用两个单引号一起完成）。否则，它是一个字符串，t-sql 不会再大惊小怪了。

如果您使用的是 LIKE 语句，请参阅此 SO 主题[Escape a string in SQL Server，以便在 LIKE 表达式中安全使用](https://stackoverflow.com/questions/258757/escape-a-string-in-sql-server-so-that-it-is-safe-to-use-in-like-expression)

顺便说一句，任何不允许我使用参数的框架，对于我来说不能正确地逃避东西，都是一个硬停止。尝试手动清理字符串输入就像依赖拉出方法一样；最终它会得到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-14T08:16:00.427

我只是想说_（下划线）也需要转义。

select * from Products where SomeColumn like 'FD[_]%'

顺便说一句，参数化查询没什么问题，但有时你想去 SQL 管理控制台，快速运行一个查询来找出一些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-22T14:49:06.480

不确定这是否准确。

`%`和`.`其他通配符取决于查询，也可能需要转义。你在哪里寻找一个点。这将失败

```
select * from xxxx where field like '%.%' 
```

# scala - 在 Scalala 中切片 SparseVector 以获得 SparseVector

> ID：10476253
> 
> 赞同：2
> 
> 时间：2012-05-07T03:11:29.353
> 
> 标签：scala, scalala

我想在[scalala](http://www.scalanlp.org/docs/scalala/0.4.1-SNAPSHOT/#package)中切片一个稀疏向量并得到另一个稀疏向量。法线切片总是给出标准向量。我可以在切片时提供一个隐式函数来执行此操作吗？如果可以，它会是什么样子？

例如，我想完成以下任务：

```
val v:SparseVectorRow[Double] = ...
val v2:SparseVectorRow[Double] = v(List(1,3,5)) 
```

最后，我使用的是 Scalala 版本 1.0.0.RC3-SNAPSHOT。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:13:57.243

是的，您可以定义自己的适当参数化的[`CanSliceVector`](http://www.scalanlp.org/docs/scalala/0.4.1-SNAPSHOT/scalala/generic/collection/CanSliceVector.html). 以下不是通用的或不一定有效的，但它有效：

```
import scalala.generic.collection.CanSliceVector

implicit object svrSlicer extends
  CanSliceVector[SparseVectorRow[Double], Int, SparseVectorRow[Double]] {
  def apply(from: SparseVectorRow[Double], keys: Seq[Int]) =
    SparseVector.create(from.size)(keys.map(k => (k, from(k))): _*).t
}

val v: SparseVectorRow[Double] = SparseVector.create(10)((0, 1.0), (3, 2.0)).t
val v2: SparseVectorRow[Double] = v(List(1, 3, 5)) 
```

您可以在 Scalala 源代码中四处寻找以找出执行此操作的“正确”方法。

# c++ - 从 char 数组中获取 int

> ID：10476254
> 
> 赞同：0
> 
> 时间：2012-05-07T03:11:35.557
> 
> 标签：c++

我在从 char[] 获取整数时遇到问题。我是一个非常简单的代码行，但我看不出问题出在哪里。
这是代码：

```
char* rawd = .....
int resultSize = ((int*)rawd)[0];

cout << "BYTES ::: " << (int)(rawd[0]) << " " << (int)(rawd[1]) << " " << (int)(rawd[2]) << " " << (int)(rawd[3]) << endl;
cout << "SIZE RETURNED :::::: " << resultSize << endl; 
```

这是打印的内容：

```
BYTES ::: 0 0 4 0
SIZE RETURNED :::::: 262144 
```

我预计`resultSize`是1024。

为什么`resultSize`包含 262144 而不是 1024？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T03:16:43.197

您将在具有“大端”处理器（如 68000 系列）的机器上获得预期的转换。在英特尔处理器——“小端”机器上——字节顺序是颠倒的，你得到的答案是预期的。

将原始内存字节转换为 , 等数据类型`int`很`double`棘手，如果数据可能来自另一台机器，则*非常*棘手。`ntohs()`有称为, `ntohl()`,的半标准函数`htons()`，`htonl()`它们在特定于主机的顺序和标准的“网络顺序”之间进行转换，即大端；这些函数在所有类 UNIX 系统和一些 Windows C 库中都可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T03:18:37.750

显然您的系统是大端的，这意味着较大整数的最低有效字节位于更大的地址，而最高有效字节位于较低的地址。

小端结果将是 0 + 4*256 + 0*256 ² + 0*256 ³ = 1024

大端结果将是 0 + 0*256 + 4*256 ² + 0*256 ³ = 262144

# jquery - 如何通过 jquery 设置 Html.DataList.column

> ID：10476264
> 
> 赞同：1
> 
> 时间：2012-05-07T03:13:49.787
> 
> 标签：jquery, asp.net-mvc, razor, datalist

我有一个包含如下 DataList 的视图，并且喜欢在用户调整浏览器大小时根据浏览器窗口的宽度动态更改“列”。我已经有一个 jquery 函数来测量宽度和灵活的列值。如何为 DataList 分配新的列数？DataList 代码如下：

```
<div class="product-grid">
   @(Html.DataList<ProductModel>(Model, columns,
        @<div class="item-box">
           @Html.Partial("_ProductBox", @item)
        </div>
   ))
</div> 
```

# python - 从 python 或 bash 批量填写 PDF 表单

> ID：10476265
> 
> 赞同：17
> 
> 时间：2012-05-07T03:13:53.020
> 
> 标签：python, forms, pdf, automation

我有一个需要多次填写的 PDF 表格（准确地说是时间表）。现在，由于我不想手动执行此操作，因此我正在寻找一种方法来使用 python 脚本或可在 bash 脚本中使用的工具来填写它们。

这个事情谁有经验？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-10T02:37:32.613

**对于 Python，您需要 fdfgen lib 和 pdftk**

@Hugh Bothwell 的评论是 100% 正确的，所以我将通过一个有效的实现来扩展这个答案。

如果您在 Windows 中，您还需要确保 python 和 pdftk 都包含在系统路径中（除非您想使用长文件夹名称）。

下面是从 CSV 数据文件中自动批量填充 PDF 表单集合的代码：

```
import csv
from fdfgen import forge_fdf
import os
import sys

sys.path.insert(0, os.getcwd())
filename_prefix = "NVC"
csv_file = "NVC.csv"
pdf_file = "NVC.pdf"
tmp_file = "tmp.fdf"
output_folder = './output/'

def process_csv(file):
    headers = []
    data =  []
    csv_data = csv.reader(open(file))
    for i, row in enumerate(csv_data):
      if i == 0:
        headers = row
        continue;
      field = []
      for i in range(len(headers)):
        field.append((headers[i], row[i]))
      data.append(field)
    return data

def form_fill(fields):
  fdf = forge_fdf("",fields,[],[],[])
  fdf_file = open(tmp_file,"w")
  fdf_file.write(fdf)
  fdf_file.close()
  output_file = '{0}{1} {2}.pdf'.format(output_folder, filename_prefix, fields[1][1])
  cmd = 'pdftk "{0}" fill_form "{1}" output "{2}" dont_ask'.format(pdf_file, tmp_file, output_file)
  os.system(cmd)
  os.remove(tmp_file)

data = process_csv(csv_file)
print('Generating Forms:')
print('-----------------------')
for i in data:
  if i[0][1] == 'Yes':
    continue
  print('{0} {1} created...'.format(filename_prefix, i[1][1]))
  form_fill(i) 
```

*注意：弄清楚如何定制它不应该是火箭手术。初始变量声明包含自定义配置。*

在 CSV 中，第一行中的每一列都将包含 PDF 文件中相应字段名称的名称。模板中没有相应字段的任何列都将被忽略。

在 PDF 模板中，只需创建要填充数据的可编辑字段，并确保名称与 CSV 数据匹配。

对于此特定配置，只需将此文件放在与 NVC.csv、NVC.pdf 和名为“输出”的文件夹相同的文件夹中。运行它，它会自动完成其余的工作。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-04-28T12:34:57.250

更快的版本，不需要 pdftk 或 fdfgen，纯 Python 3.6+：

```
# -*- coding: utf-8 -*-

from collections import OrderedDict
from PyPDF2 import PdfFileWriter, PdfFileReader

def _getFields(obj, tree=None, retval=None, fileobj=None):
    """
    Extracts field data if this PDF contains interactive form fields.
    The *tree* and *retval* parameters are for recursive use.

    :param fileobj: A file object (usually a text file) to write
        a report to on all interactive form fields found.
    :return: A dictionary where each key is a field name, and each
        value is a :class:`Field<PyPDF2.generic.Field>` object. By
        default, the mapping name is used for keys.
    :rtype: dict, or ``None`` if form data could not be located.
    """
    fieldAttributes = {'/FT': 'Field Type', '/Parent': 'Parent', '/T': 'Field Name', '/TU': 'Alternate Field Name',
                       '/TM': 'Mapping Name', '/Ff': 'Field Flags', '/V': 'Value', '/DV': 'Default Value'}
    if retval is None:
        retval = OrderedDict()
        catalog = obj.trailer["/Root"]
        # get the AcroForm tree
        if "/AcroForm" in catalog:
            tree = catalog["/AcroForm"]
        else:
            return None
    if tree is None:
        return retval

    obj._checkKids(tree, retval, fileobj)
    for attr in fieldAttributes:
        if attr in tree:
            # Tree is a field
            obj._buildField(tree, retval, fileobj, fieldAttributes)
            break

    if "/Fields" in tree:
        fields = tree["/Fields"]
        for f in fields:
            field = f.getObject()
            obj._buildField(field, retval, fileobj, fieldAttributes)

    return retval

def get_form_fields(infile):
    infile = PdfFileReader(open(infile, 'rb'))
    fields = _getFields(infile)
    return OrderedDict((k, v.get('/V', '')) for k, v in fields.items())

def update_form_values(infile, outfile, newvals=None):
    pdf = PdfFileReader(open(infile, 'rb'))
    writer = PdfFileWriter()

    for i in range(pdf.getNumPages()):
        page = pdf.getPage(i)
        try:
            if newvals:
                writer.updatePageFormFieldValues(page, newvals)
            else:
                writer.updatePageFormFieldValues(page,
                                                 {k: f'#{i} {k}={v}'
                                                  for i, (k, v) in enumerate(get_form_fields(infile).items())
                                                  })
            writer.addPage(page)
        except Exception as e:
            print(repr(e))
            writer.addPage(page)

    with open(outfile, 'wb') as out:
        writer.write(out)

if __name__ == '__main__':
    from pprint import pprint

    pdf_file_name = '2PagesFormExample.pdf'

    pprint(get_form_fields(pdf_file_name))

    update_form_values(pdf_file_name, 'out-' + pdf_file_name)  # enumerate & fill the fields with their own names
    update_form_values(pdf_file_name, 'out2-' + pdf_file_name,
                       {'my_fieldname_1': 'My Value',
                        'my_fieldname_2': 'My Another alue'})  # update the form fields 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-04T12:42:53.280

替换原始文件

```
os.system('pdftk "original.pdf" fill_form "data.fdf" output "output.pdf"')
os.remove("data.fdf")
os.remove("original.pdf")
os.rename("output.pdf","original.pdf") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-25T22:18:19.047

我写了一个基于：'pdfrw'、'pdf2image'、'Pillow'、'PyPDF2' 的库，称为 fillpdf （`pip install fillpdf`和 poppler 依赖项`conda install -c conda-forge poppler`）

基本用法：

```
from fillpdf import fillpdfs

fillpdfs.get_form_fields("blank.pdf")

# returns a dictionary of fields
# Set the returned dictionary values a save to a variable
# For radio boxes ('Off' = not filled, 'Yes' = filled)

data_dict = {
'Text2': 'Name',
'Text4': 'LastName',
'box': 'Yes',
}

fillpdfs.write_fillable_pdf('blank.pdf', 'new.pdf', data_dict)

# If you want it flattened:
fillpdfs.flatten_pdf('new.pdf', 'newflat.pdf') 
```

更多信息在这里： [https ://github.com/t-houssian/fillpdf](https://github.com/t-houssian/fillpdf)

如果某些字段未填写，可以使用 fitz ( `pip install PyMuPDF`) 和 PyPDF2 ( `pip install PyPDF2`)，如下所示根据需要更改点：

```
import fitz
from PyPDF2 import PdfFileReader

file_handle = fitz.open('blank.pdf')
pdf = PdfFileReader(open('blank.pdf','rb'))
box = pdf.getPage(0).mediaBox
w = box.getWidth()
h = box.getHeight()

# For images
image_rectangle = fitz.Rect((w/2)-200,h-255,(w/2)-100,h-118)
pages = pdf.getNumPages() - 1
last_page = file_handle[pages]
last_page._wrapContents()
last_page.insertImage(image_rectangle, filename=f'image.png')

# For text
last_page.insertText(fitz.Point((w/2)-247 , h-478), 'John Smith', fontsize=14, fontname="times-bold")
file_handle.save(f'newpdf.pdf') 
```

# wpf - 当水平滚动条可见时，在 WPF ListView 中导航到第一个/最后一个项目后，焦点转移到滚动条

> ID：10476266
> 
> 赞同：0
> 
> 时间：2012-05-07T03:13:59.050
> 
> 标签：wpf, listview, keyboard, navigation, scrollbar

我有一个 WPF ListView，在其中使用向上/向下键我希望所选项目（行）向上/向下移动。这通常工作正常。

但是，当 ListView 上出现水平滚动条并且我向上移动到第一（顶）行时，或者最后（底）行焦点然后转移到滚动条，这样当我然后使用向上/向下或向左/向右键垂直和水平滚动条移动。选定的项目不会改变，只有滚动条移动。

我希望向上/向下键始终移动选定的项目/行。如果到达第一行，焦点应保持在所选项目（行）上，而不是移动到滚动条，这样当我按下向下键时，焦点将移动到第二行。如果到达最后一行，焦点应保持在最后一行，当按下向上键时，倒数第二行应获得焦点。

当水平滚动条不可见时，即使垂直滚动条可见，这也是我想要的方式。但是，当两个滚动条都可见时，焦点会转移到滚动条上，当到达第一行或最后一行后，向上/向下键会影响滚动条，如上所述。

我该如何解决这个问题，以便向上/向下键始终影响所选行而不影响滚动。

# java - 如何打开带有 jar 文件的文件？

> ID：10476277
> 
> 赞同：0
> 
> 时间：2012-05-07T03:16:44.667
> 
> 标签：java, file, jar, associations

一旦我的程序运行，我不会尝试打开文件，例如。使用 Desktop.open，我正在尝试制作它，以便我可以右键单击文件，然后选择“打开方式”，然后选择我的应用程序。然后，我希望将打开的文件的路径作为参数之一传递给我的应用程序。例如，这可以让我制作一个文本编辑器，而不必运行客户端程序来运行它处理的其他文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:45:13.300

如果您单击文件并选择打开方式，您应该已经能够选择您的应用程序。也许它不会出现在建议的应用程序列表中，但您可以浏览它并且它应该启动。

我不知道它在 linux 系统上是如何工作的，但是在 windows 系统上，您可以将文件路径放入您的应用程序中。以下示例将打印您使用“打开方式”打开的文件的路径：

```
public static void main(String[] args) { 
     System.out.println(args[0]);
} 
```

# javascript - 浏览器是javascript的一种虚拟机吗？

> ID：10476278
> 
> 赞同：0
> 
> 时间：2012-05-07T03:16:45.290
> 
> 标签：javascript, browser, compilation, virtual-machine

是的，这是一个初学者的问题：我看到 javascript 在浏览器中运行。那么，每个浏览器都是一种在其上运行 javascript 代码的虚拟机（就像在 java 中一样）？我不能以任何形式“编译”javascript？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T03:18:58.123

是的，你不能提前将 Javascript “编译”成其他任何东西。浏览器会为您编译它，然后运行它。一些浏览器拥有比其他浏览器更复杂的 Javascript 编译器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T03:24:23.460

每个浏览器窗口甚至该窗口中的每个浏览器框架都是它自己的 HTML/javascript 执行引擎（类似于虚拟机）。

它们并不是完全独立的，因为（受一些安全限制），它们可以相互通信并相互了解，但它们都有自己的执行状态、自己的全局变量、自己的代码、自己的事件处理程序， ETC...

Javascript 代码的编译与编译 C/C++ 代码的意义不同。浏览器只接受文本形式的 javascript。然后浏览器解释该文本。不同的浏览器有不同的方式来解释 javascript 文本以便尽快执行。它不像 C/C++ 代码那样直接编译成纯机器语言，而是编译（或更改）成解释器可以比纯文本更快地执行的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T03:26:41.883

实际上，浏览器内部运行着一个[JavaScript 引擎](http://en.wikipedia.org/wiki/JavaScript_engine)。该引擎读取并执行 JavaScript 代码。所以，它是一个[解释器](http://en.wikipedia.org/wiki/Interpreter_%28computing%29)（根本没有编译）

# php - 服务器上的php文件夹空间限制

> ID：10476280
> 
> 赞同：-1
> 
> 时间：2012-05-07T03:17:08.113
> 
> 标签：php, directory

大家好，我有问题可以帮助我很多。

在 php 中，我们可以为服务器上的文件夹创建空间限制以上传该特定文件夹中的数据。

请帮我

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T03:18:56.957

您可以通过在“接受”新上传之前检查文件夹中有多少东西来伪造它，但是 PHP 本身没有任何类型的配额支持 - 这是由 PHP 运行的操作系统在文件系统级别完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T03:19:32.197

只需从配额大小[中减去当前文件夹](https://stackoverflow.com/questions/478121/php-get-directory-size)的大小，然后与上传文件的大小进行比较。

# android - Android facebook SDK，在网络视图中显示朋友的墙？

> ID：10476283
> 
> 赞同：0
> 
> 时间：2012-05-07T03:17:40.233
> 
> 标签：android, facebook, sdk

如何使用 facebook SDK 访问朋友的墙？我已经有一个朋友列表，我可以从中选择一个，但我不知道如何将用户重定向到它的朋友墙，我必须使用“我/供稿”或“我/朋友”之类的请求吗？任何帮助表示赞赏。

**编辑：** 我只想在 webview 上显示朋友的墙，我已经有一个带有 webview 的活动，我可以使用这个 URL 看到我的墙：

```
http://m.facebook.com/?rdr#!/profile.php?_user= 
```

在 _user 变量中使用我记录的用户 ID。我用朋友的 id 尝试了相同的 URL，但我被重定向到当前登录用户的墙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T03:37:35.123

```
使用此 url，您可以访问您朋友墙源上的帖子。
```

https://graph.facebook.com/PROFILE_ID/feed?access_token=ACCESSTOKEN

# objective-c - 从 NSDictionary 对象计算货币

> ID：10476285
> 
> 赞同：0
> 
> 时间：2012-05-07T03:18:23.167
> 
> 标签：objective-c, ios, nsnumberformatter, nsenumerator

基本思想是遍历一个充满 .plist 的目录，这些目录具有包含货币价值的 NSDictionary 对象。

## 问题

**如何遍历所有目录内容并提取所有“ `Current Value`”对象并将它们加在一起以获得总量？**

## 例子

```
NSArray * itemList = [MANAGER contentsOfDirectoryAtPath:[NSString stringWithFormat:@"%@",INVENTORY_PATH] error:nil];
for ( NSString * item in itemList )
{
    NSDictionary * currentItem = [NSDictionary dictionaryWithContentsOfFile:[NSString stringWithFormat:@"%@/%@",INVENTORY_PATH, item]];

    float monetaries = [[currentItem objectForKey:@"Current Value"] floatValue];

    NSLog(@"Current Value: %.2f",monetaries);       
} 
```

## 电流输出

```
2012-05-06 22:11:33.583 WrightsCS[3151:15803] Current Value: 350.99
2012-05-06 22:11:33.584 WrightsCS[3151:15803] Current Value: 321.54 
```

## 期望的输出

```
2012-05-06 22:11:33.584 WrightsCS[3151:15803] Total Value: 672.53 
```

## 解决方案

```
float total = 0.0f ;
float monetaries = 0.0f;

NSArray * itemList = [MANAGER contentsOfDirectoryAtPath:[NSString stringWithFormat:@"%@",INVENTORY_PATH] error:nil];
for ( NSString * item in itemList )
{
    NSDictionary * currentItem = [NSDictionary dictionaryWithContentsOfFile:[NSString stringWithFormat:@"%@/%@",INVENTORY_PATH, item]];

    monetaries = [[currentItem objectForKey:@"Current Value"] floatValue];
    total += monetaries ;     

    NSLog(@"Current Value: %.2f",monetaries);  
}    

NSLog(@"Total Value: %.2f",total); 
```

## 解决方案输出

```
2012-05-06 22:26:05.460 WrightsCS[3205:15803] Current Value: 350.99
2012-05-06 22:26:05.462 WrightsCS[3205:15803] Current Value: 321.54
2012-05-06 22:26:05.462 WrightsCS[3205:15803] Total Value: 672.53 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T03:22:50.557

你不能保持一个运行总数还是我错过了？

```
NSArray * itemList = [MANAGER contentsOfDirectoryAtPath:[NSString stringWithFormat:@"%@",INVENTORY_PATH] error:nil];

float total = 0.0f ;
for ( NSString * item in itemList )
{
    NSDictionary * currentItem = [NSDictionary dictionaryWithContentsOfFile:[NSString stringWithFormat:@"%@/%@",INVENTORY_PATH, item]];

    float monetaries = [[currentItem objectForKey:@"Current Value"] floatValue];
    total += monetaries ;
//    NSLog(@"Current Value: %.2f",monetaries);       
} 

NSLog(@"Total Value: %.2f",monetaries); 
```

# c - 尝试用 C 中的指针反转 Line

> ID：10476292
> 
> 赞同：0
> 
> 时间：2012-05-07T03:19:06.737
> 
> 标签：c, input, line, reverse

当我使用指向反向函数的指针时，当我尝试调用反向函数时，我得到错误，而不是打印它。指针发送错误信息。所以我试图改变一些代码，但它无能为力。

```
#include <string.h> 
#include <stdio.h>

char *strrev(char *str)
{
    char *p1, *p2;

    if(!str) {return NULL;}
    printf("%s",__LINE__); //checking
    for (p1 = str, p2 = str + strlen(str) - 1; p2 > p1; ++p1, --p2)
    {
        *p1 ^= *p2;
        *p2 ^= *p1;
        *p1 ^= *p2;
    }
    printf("%s",str);  //checking
    return str;
}

int main(void)
{
    char *str ;
    printf(" Please enter string \n");
    scanf("%s",&str);
    printf("%s\n", strrev(*str));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T03:21:27.720

> ```
> char *str ;
> scanf("%s", &str); 
> ```

1.  您永远不会为`str`. 尝试`malloc`或更好，首先使用数组
2.  您需要`&`从`scanf`行中删除

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T03:50:05.753

你那里有很多问题。

**1/**首先，您不为字符串分配任何存储空间。这可以`char str[128];`根据您的尺寸要求通过简单的方式解决。这也意味着 NULL 检查是不必要的，您不必担心以后打印（或尝试打印）NULL 指针 - 更改函数合同，以便明确禁止。

**2/接下来，***永远*不要使用`scanf("%s")`（即，使用无界字符串格式说明符）——这是解决缓冲区溢出问题的简单途径。如果您想要一个带有溢出检查的强大输入功能，请参阅[此答案](https://stackoverflow.com/questions/4023895/how-to-read-string-entered-by-user-in-c/4023921#4023921)。

在任何情况下，`%s`扫描一个*单词*而不是一行，因此，如果您输入`"Hello Pax"`（带空格），它将看到`Hello`.

**3/**第三，如果`str`是 a `char*`，那么`*str`是一个*字符，*而不是一个 C 字符串。您应该传递`str`给`strrev`，而不是`*str`。即使使用上述第 1 点中的修复也是如此。

**4/**宏扩展为整数类型，因此不会根据格式说明符`__LINE__`将其视为字符指针。`%s`您可能想`%d`改用。

**5/**根据C11 ， ISO 标准保留所有`str`以小写字母开头的名称供自己使用。`7.31.13 Future library directions`所以`strrev`实际上并不是一个好主意。

**6/**最后，XOR 交换技巧是一种时代错误，在当今的现代环境中没有立足之地。考虑到计算而不是临时变量解决方案的简单移动，这既是不必要的，也可能会更慢。交换到变量的正确方法是：

```
int t = a;
a = b;
b = t; 
```

帮自己一个忙，放弃这个把戏。它与达夫的设备属于同一个桶:-)

* * *

其他一些问题，虽然这比其他任何东西都更具风格（就像我更喜欢这种风格），但基于多年的编程教学。

**7/**我遇到的大多数人发现理解数组索引比理解指针更容易，因为考虑字符串中的字符而不是任意内存位置更容易。经验丰富的 C 程序员知道没有区别（无论是在功能方面，还是在今天的编译器中，性能方面）。因此，我倾向于使用索引而不是指针，例如：

```
char *reverseStr (char *str) {
    char tmpchar;
    int front = 0;
    int back = strlen (str) - 1;
    while (front < back) {
        tmpchar = str[front];
        str[front++] = str[back];
        str[back--] = tmpchar;
    }
    return str;
} 
```

**8/**你还会注意到另一件事，使用更详细的变量，如`front`,`back`和`tmpchar`. 编译器不在乎您的标识符有多大（在合理范围内），这使代码更具可读性。

# .htaccess - 这些 htaccess 规则是如何工作的？

> ID：10476293
> 
> 赞同：0
> 
> 时间：2012-05-07T03:19:30.947
> 
> 标签：.htaccess, url-rewriting

我被指示将这些规则放在我的 .htaccess 文件中，以将我的网站请求重定向到子目录，而不在 URL 中添加子目录，但我不明白这些规则是如何工作的。有人可以向我解释吗？

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www.)?dinhani.com.br$ [NC]
RewriteCond %{REQUEST_URI} !^/dinhani/
RewriteRule ^(.*)$ /dinhani/$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T03:23:30.290

在伪代码中：

```
if ($HTTP_HOST is NOT dinhani.com.br NOR www.dinhani.com.br, doing case-insensitive comparisons) {
    if ($REQUEST_URI does NOT start with /dinhani/) {
        change requested URL into /dinhani/original_request_url_here
    }
} 
```

# java - 如何使用 Modeshape 查询分隔文本内容？

> ID：10476295
> 
> 赞同：0
> 
> 时间：2012-05-07T03:19:32.243
> 
> 标签：java, jcr, modeshape

我已通读参考指南和论坛，寻找使用 JCR 获取存储在分隔 (CSV) 文件中的数据的方法，但尚未找到解决方案。我已经读过可以访问基础数据以及元数据，我只是不知道如何。

我查看了 Modeshape 论坛上的“初学者指南”并修改了配置以使用分隔文本排序器。然后我使用与论坛中相同的代码将 csv 文件添加到 repo。

当我使用`select * from [nt:file]`我没有得到任何内容，只有`nt:file`元数据查询存储库时。当我查询`[jcr:content]`and时，我得到了同样的结果`[jcr:data]`。

所以我的问题是，一旦 CSV 文件在存储库中，如何查询数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:21:17.550

假设排序成功，输出的结构应该与[此处](https://docs.jboss.org/author/display/MODE28/Text+Sequencers)定义的类似。

要查询此内容，一种可能性是构建和执行 JCR_SQL2 查询，如下所示：

```
String expr = "SELECT * FROM [text:column] WHERE [text:data] LIKE 'somestring'";
Query query = session.getWorkspace().getQueryManager().createQuery(expr, Query.JCR_SQL2);    
QueryResult result = query.execute(); 
RowIterator iter = result.getRows();
while (iter.hasNext()) {
     //your code
} 
```

查询可以是您需要的任何内容。查看[ModeShape 的文档](https://docs.jboss.org/author/display/MODE28/Querying+and+Searching+using+JCR)以获取更多信息。

*注意：这个答案最初是作为对 ModeShape 论坛上相同问题的[回应而发布的。](https://community.jboss.org/message/734003#734003)*

# eclipse - 在 Windows 7 上安装 Eclipse 3.7.2 插件时出错

> ID：10476298
> 
> 赞同：0
> 
> 时间：2012-05-07T03:20:30.197
> 
> 标签：eclipse, windows-7, installation

尝试解决问题所采取的步骤：1-确认 Eclipse 以管理员身份运行。2- 将 Eclipse 从 /ProgramFiles 移动到 C:/eclipse

以下错误继续出现：

收集要安装的项目时发生错误会话上下文是：（profile=epp.package.javascript，phase=org.eclipse.equinox.internal.p2.engine.phases.Collect，operand=，action=）。无法在 http://pydev.org/updates/plugins/org.python.pydev_2.5.0.2012040618.jar 读取存储库。读取超时无法读取位于 http://pydev.org/updates/plugins/org.python.pydev.core_2.5.0.2012040618.jar 的存储库。读取超时无法读取位于[http://pydev.org/updates/plugins/org.python.pydev.parser_2.5.0.2012040618.jar](http://pydev.org/updates/plugins/org.python.pydev.parser_2.5.0.2012040618.jar)的存储库。读取超时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T03:26:45.220

通过软件更新再次从软件存储库更新 python

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T03:27:13.877

到达此远程计算机时出现网络问题。如果访问需要网络代理，请检查您的首选项以确保您的代理设置正确（首选项 -> 网络连接）。或者查看 pydev 更新站点的内容是否以 zip 文件的形式提供，您可以将其下载到本地计算机并从中进行更新。

# .net - 滑块的双向值绑定延迟导致不稳定的行为

> ID：10476301
> 
> 赞同：0
> 
> 时间：2012-05-07T03:21:11.073
> 
> 标签：.net, wpf, vb.net, data-binding, wpf-controls

我将[Slider](http://msdn.microsoft.com/en-us/library/system.windows.controls.slider.aspx)的值绑定到表示联网设备上的音量的整数属性。这个网络请求需要一点时间（通常小于 100 毫秒），并且不知何故会导致 Slider 感觉不稳定。

这是我过于简化的代码来澄清：

```
 Private _playbackVolume As Integer
    Private _deviceForDemonstrationPurposes As New Device

    Public Property PlaybackVolume As Integer
        Get
            Return _playbackVolume
        End Get
        Set(value As Integer)
            _deviceForDemonstrationPurposes.Volume = value
        End Set
    End Property

    Friend Sub UpdateVolume(volume As Integer)
        ' this is called by the instance of Device whenever its volume changes.
        _playbackVolume = volume
        RaisePropertyChanged("PlaybackVolume") ' INotifyPropertyChanged implementation.
    End Sub 
```

绑定到`PlaybackVolume`属性将导致 setter 在仍然拖动拇指时触发。由于网络延迟问题，无论请求完成多少毫秒，滑块都会被锁定。

什么被认为是使滑块再次变得光滑的最佳方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T03:52:57.797

考虑将 UI（滑块）与实际获取和设置音量的组件分离。当滑块值更改时，它应该排队请求将音量更改为新值，但继续其愉快的方式。仅在您第一次从设备绘制或刷新 UI 时从设备的音量设置滑块位置；您可能可以暗示音量设置为用户将其拖动到的位置。

*编辑*

（完全披露：我自己没有做过很多 WPF）

因此，在查看了我的意思的实际示例后，我了解了 UpdateSourceTrigger，它为您提供了多种触发绑定元素以重新绑定的方法。我找到[了这个例子](http://social.msdn.microsoft.com/Forums/en/wpf/thread/50d9853e-db6f-4c70-85f2-e87745b32ac3)，它结合`UpdateSourceTrigger`了一个计时器。这个想法是拖动滑块开始一个短暂的超时，之后`UpdateSourceTrigger`被告知更新其数据绑定。诀窍是当用户继续更改滑块值时，超时会中断。因此，最终效果是，在用户最终确定他们想要的值之前，您的设备实际上不会使用滑块值进行更新，这应该会在您正在寻找的滑动时为您提供流畅、响应式的 UI。您仍然可以像现在一样保持设备上滑块的实时更新。我希望这能让事情变得更清楚一些。

# ios - 如何像 iOS Photos 应用一样实现缩放*和*分页

> ID：10476302
> 
> 赞同：2
> 
> 时间：2012-05-07T03:21:21.073
> 
> 标签：ios, uiscrollview

在 Apple 的照片应用程序中，您可以在查看照片时在照片之间滑动，还可以放大和平移照片。当您到达缩放照片的边缘时，您仍然可以滑动到下一张图像 - 需要什么样的滚动视图设置才能实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T04:54:15.643

WWDC 2010 上有一段很棒的视频 - [https://developer.apple.com/videos/wwdc/2010/](https://developer.apple.com/videos/wwdc/2010/)

本次会议的标题是“设计带有滚动视图的应用程序”。这正是您所要求的一步一步。

根据 omz 的回复，分页滚动条部分非常简单。但是 Apple 在如何创建和重用可缩放滚动视图方面做了一些更复杂的事情。你真的应该看看视频。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T04:14:53.903

最简单的方法是创建一个仅水平滚动并`pagingEnabled`设置为`YES`. 然后，此滚动视图的每一页都包含单个照片的另一个可缩放滚动视图。

# iphone - 如何在 ARC 下创建不泄漏的 CFUUID NSString？

> ID：10476313
> 
> 赞同：7
> 
> 时间：2012-05-07T03:23:08.077
> 
> 标签：iphone, objective-c, ios, automatic-ref-counting

关于 CFUUID 有几个很好的例子，特别是这个：

[如何使用 iPhone SDK 创建 GUID/UUID](https://stackoverflow.com/questions/427180/how-to-create-a-guid-uuid-using-the-iphone-sdk)

但它是为前 ARC 代码制作的，而且我还不是 CF 迷（还），所以有人可以提供适用于 ARC 的示例代码吗？

```
+ (NSString *)GetUUID
{
  CFUUIDRef theUUID = CFUUIDCreate(NULL);
  CFStringRef string = CFUUIDCreateString(NULL, theUUID);
  CFRelease(theUUID);
  return [(NSString *)string autorelease];
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-07T03:33:01.767

你想要一个“桥接转移”：

```
+ (NSString *)GetUUID
{
  CFUUIDRef theUUID = CFUUIDCreate(NULL);
  CFStringRef string = CFUUIDCreateString(NULL, theUUID);
  CFRelease(theUUID);
  return (__bridge_transfer NSString *)string;
} 
```

[过渡到 ARC](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)指南说

> `__bridge_transfer`或`CFBridgingRelease()`将非 Objective-C 指针移动到 Objective-C 并将所有权转移给 ARC。

*然而*！您还应该重命名您的方法。ARC 使用方法名称约定来推断保留计数，并且`get`以 Cocoa 开头的方法具有特定含义，包括传入缓冲区以填充数据。更好的名称是`buildUUID`描述 UUID 使用的另一个词：`pizzaUUID`或`bearUUID`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-18T02:15:09.257

假设此时您不再需要支持 6.0 之前的 iOS，您可以跳过所有 Core Foundation UUID 内容，只需执行以下操作即可获得新的内容：

```
NSString * uuidStr = [[NSUUID UUID] UUIDString]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T13:44:48.780

单线：

```
NSString *UUID = CFBridgingRelease(CFUUIDCreateString(kCFAllocatorDefault, CFUUIDCreate(NULL))); 
```

# multithreading - OpenCL 中的处理器关联性

> ID：10476315
> 
> 赞同：3
> 
> 时间：2012-05-07T03:23:21.227
> 
> 标签：multithreading, opencl, gpgpu

我们可以在 OpenCl 中施加处理器亲和力吗？例如线程#1 在处理器#5 上
执行，线程#2 在处理器#6 上执行，线程#3 在处理器#7 上执行，等等？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T04:02:30.150

据我所知，您无法在 OpenCL 的低级别上指定亲和力。[但是，从 OpenCL 1.2 开始，通过使用clCreateSubDevices](http://www.khronos.org/registry/cl/sdk/1.2/docs/man/xhtml/clCreateSubDevices.html)（可能使用 clCreateSubDevices 在每个子设备中使用一个处理器）划分为子设备并在每个子设备`CL_DEVICE_PARTITION_BY_COUNTS, 1`上运行单独的内核执行，可以对亲和力进行一些控制。

除了基于 CPU 的 OpenCL 实现之外，这很可能在其他任何东西上都运行不佳，我不得不质疑您为什么要做这样的事情。如果您想限制 OpenCL-CPU 实现的 CPU 使用率，您可以使用`clCreateSubDevices`来分配一些计算资源。

来自英特尔的描述“设备裂变”的 PDF[在这里](http://software.intel.com/file/43564)，其中包含有关如何`clCreateSubDevices`有效使用设备分区的大量信息。

# c# - 当鼠标指针在 RichTextBox 中的粗体字上时如何更改光标？

> ID：10476325
> 
> 赞同：3
> 
> 时间：2012-05-07T03:25:51.803
> 
> 标签：c#, cursor, richtextbox

当鼠标指针位于 RichTextBox 中的**粗体**字上时，我想将光标更改为 HAND 。这该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T03:46:06.723

将此函数添加到richtextbox.OnMouseMove 事件。

```
private void richTextBox2_MouseMove(object sender, MouseEventArgs e)
        {
            int c = richTextBox2.GetCharIndexFromPosition(new Point(e.X, e.Y));
            richTextBox2.Select(c, 1);
            if (richTextBox2.SelectionFont.Bold)
            {
                richTextBox2.Cursor = Cursors.Hand;
            }
            else
            {
                richTextBox2.Cursor = Cursors.Default;
            }

        } 
```

您只需要 1 个字符即可知道它是否为粗体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T03:34:44.430

*   注册 OnMouseMove 处理程序
*   调用[GetCharIndexFormPosition](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.getcharindexfromposition.aspx)
*   确定该索引是否超过粗体字符
*   根据需要设置[Cursor](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.cursor.aspx)属性。

# windows - 为什么这个错误会一直弄乱 XE2 IDE 工具栏？

> ID：10476327
> 
> 赞同：5
> 
> 时间：2012-05-07T03:26:18.873
> 
> 标签：windows, delphi, windows-7, ide, delphi-xe2

**截屏**

![在此处输入图像描述](../Images/a07bf868aa41a5d2764eec69678620c5.png)

以下源代码用于产生上述错误。您所要做的就是编译程序并确保 IDE 仍在运行（如果 IDE 关闭，则不会发生错误），单击按钮 12 到 15 次，将弹出错误。

一旦发生错误，切换回 IDE，IDE 的所有工具栏都消失了。您必须关闭 IDE 并再次运行，它们才能重新出现。

**源代码**

```
unit MainUnit;

interface

uses
  Winapi.Windows, Winapi.Messages, Winapi.ShlObj, System.SysUtils,
  System.Variants, System.Classes, System.StrUtils, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.StdCtrls;

type
  TMainFrm = class(TForm)
    Button1: TButton;
    procedure FormCreate(Sender: TObject);
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  MainFrm: TMainFrm;
  hDesktop: HWND;

implementation

{$R *.dfm}

function GetHandle(theHandle: HWND; NotUsed: NativeInt): LongBool; stdcall;
begin
  if (theHandle <> 0) then
  begin
    hDesktop := FindWindowEx(FindWindowEx(theHandle, 0, 'SHELLDLL_DefView',
      nil), 0, 'SysListView32', nil);
  end;
  Result := (hDesktop = 0);
end;

procedure TMainFrm.FormCreate(Sender: TObject);
var
  lpss: TShellState;
begin
  ZeroMemory(@lpss, SizeOf(lpss));
  try
    SHGetSetSettings(lpss, SSF_HIDEICONS, False);
  finally
    Button1.Caption := IfThen(lpss.fHideIcons, 'Show Icons', 'Hide Icons');
  end;
  EnumWindows(@GetHandle, 0);
  Button1.Enabled := (hDesktop <> 0);
end;

procedure TMainFrm.Button1Click(Sender: TObject);
const
  nCmdShow: array [Boolean] of NativeInt = (SW_HIDE, SW_SHOW);
var
  lpss: TShellState;
begin
  ZeroMemory(@lpss, SizeOf(lpss));
  try
    SHGetSetSettings(lpss, SSF_HIDEICONS, False);
    ShowWindow(hDesktop, nCmdShow[lpss.fHideIcons]);

    lpss.fHideIcons := (not BOOL(lpss.fHideIcons));
    Button1.Caption := IfThen(lpss.fHideIcons, 'Show Icons', 'Hide Icons');
  finally
    SHGetSetSettings(lpss, SSF_HIDEICONS, True);
  end;
end;

end. 
```

**应用程序屏幕截图**

![在此处输入图像描述](../Images/4006ccba6a4d1040e20b737dbbb39df3.png)

任何帮助将不胜感激。

**更新**

IDE 工具栏不再消失，错误也不再出现，感谢 TOndrej 提供有关关闭“Profiler 工具栏”的信息。现在我得到一个非常烦人的闪烁，有时需要 10 到 15 秒才能恢复正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T11:01:54.517

你有安装 AQTime 吗？如果您只是隐藏 Profiler 工具栏，问题似乎就消失了。

# php - Codeigniter - 设置限制和偏移时的分页问题

> ID：10476339
> 
> 赞同：0
> 
> 时间：2012-05-07T03:28:38.260
> 
> 标签：php, mysql, codeigniter

我很难编写此查询并使其与分页一起正常工作。查询本身运行良好。问题在于`$query_count`，它被传递给控制器​​来处理分页。

`$query_count`应该等于查询返回的总行数，但现在它被限制为 10，因为我在`get()`. 如何将限制和偏移量传递给查询，但仍从中获取总行数`$query`？

```
// Build query result for active projects
    if ( !empty($campus) && $campus != 'all-campuses' ) {
        $this->db->where('campus', $campus);
    }
    if ( !empty($type) && $type != 'all-types' ) {
        $this->db->where('type', $type);
    }
    if ( !empty($talent) && $talent != 'all-talent' ) {
        $this->db->like('talent', $talent);
    }
    if ( !empty($keyword) ) {
        $this->db->like('title', $keyword);
    }
    $this->db->where('active', true);
    $this->db->order_by("date_created", "desc");
    $query = $this->db->get('projects', 10, $data['offset']);
    $the_rows = $query->result_array();
    $query_count = $query->num_rows();
    $query_meta['count'] =  $query_count; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T03:35:57.053

您需要编写另一个查询来获取行数（无限制）。它应该可以解决您的问题。

# jquery - 在动画完成之前停止动画以重新启动它

> ID：10476341
> 
> 赞同：1
> 
> 时间：2012-05-07T03:29:22.580
> 
> 标签：jquery, jquery-animate

我无法在动画完成之前停止它。我从第 24 行开始的代码旨在允许用户再次运行动画。这很好用，但是如果用户在动画完成之前单击它会导致问题。我发现一些类似的问题是 .stop() 方法被推荐。我尝试在第 24 行的 .live 之前立即包含 .stop() ，但这似乎不起作用。有人可以指出我正确的方向吗？

```
1.<script type="text/javascript>
2.$(document).ready(function() {
3\.    header();
4\. });
5.
6\. function header(){
7\.     $("#title").delay(300).animate({ 
8\.       left: "280px",
9\.        opacity: "0"
10\.        }, 2000
11\.   );
12\.     $("#subtitle1").delay(300).css({"visibility": "visible", "opacity": "0"}).animate({ 
13\.      left: "500px",
14\.       opacity: "1"
15\.        }, 2000 
16\.   );
17\.     $("#subtitle2").delay(300).css({"visibility": "visible", "opacity": "0"}).animate({
18\.        left: "560px",
19\.        opacity: "1"
20\.        }, 2000
21\.     );
22\. }; 
23.
24.$("#img").live('click',function(){
25\.   $("#title").css({"left": "220px", "opacity": "1.0"});
26\.     $("#subtitle1").css({"left": "425px", "visibility": "hidden"});
27\.     $("#subtitle2").css({"left": "615px", "visibility": "hidden"});
28\.     header();
29\. });
30.</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T03:33:34.207

`.stop()`是这样做的方法。尝试将它移动到函数内部——例如，在第 24 行之后和第 25 行之前。在连接函数时将其放在之前`.live()`停止它。将它放在函数中会在您即将启动新动画时停止它。

或者再看一遍，也许把它`.animate()`放在第 7、12 和 17 行的每一个之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T03:35:29.493

`stop`停止当前为选定元素运行的动画（[请参阅文档](http://api.jquery.com/stop/)）。您想要的是，每次调用 header 以停止一切。所以就这样做吧。

试试这个：

```
6\. function header(){

       $('#title, #subtitle1, #subtitle2').stop();           

7\.     $("#title").delay(300).animate({ 
8\.       left: "280px",
9\.        opacity: "0"
10\.        }, 2000
11\.   );
12\.     $("#subtitle1").delay(300).css({"visibility": "visible", "opacity": "0"}).animate({ 
13\.      left: "500px",
14\.       opacity: "1"
15\.        }, 2000 
16\.   );
17\.     $("#subtitle2").delay(300).css({"visibility": "visible", "opacity": "0"}).animate({
18\.        left: "560px",
19\.        opacity: "1"
20\.        }, 2000
21\.     );
22\. }; 
```

# jquery - 如何使用 JQuery Ajax 返回新记录

> ID：10476346
> 
> 赞同：0
> 
> 时间：2012-05-07T03:30:58.433
> 
> 标签：jquery, ajax

我正在创建一个网站元素，用户可以在其中参与讨论。这样做时，需要使用 Ajax 以固定的短时间间隔出现在列表顶部的最新贡献。

虽然我知道如何返回初始结果，但我不确定如何仅将最新更新添加到当前项目列表中。

帮助，有人吗？

谢谢，杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T03:33:57.597

一种方法是，对服务器页面进行 ajax 调用，该页面以 reguar 间隔返回内容并在内容 div 中显示。

下面是一个简单的示例，它每五秒调用一次名为 getlatestposts.php 的页面并显示给带有 id 注释的 div。这将在文档就绪时开始执行（在加载 dom 之后）

```
$(document).ready(function()
{
    var refreshId = setInterval( function()
    {
        var tstmp = new Date();
        var uniqueTimeStamp = tstmp.getTime()
        $('#coments').load('getlatestposts.php?'+uniqueTimeStamp);
    }, 5000);
}); 
```

如果您不想在每 2 秒左右对服务器进行如此多的调用，那么您应该认真研究像 SignalR 这样的东西，它对被调用者进行异步推送。

# ruby - 复制 Ruby 类有什么用？（我在做粗鲁的嘲笑。）

> ID：10476348
> 
> 赞同：2
> 
> 时间：2012-05-07T03:31:24.627
> 
> 标签：ruby, class, module, mocking

我有这种情况，在其中我定义了一个实例方法，它返回类本身的“安全篡改”测试虚拟对象。

```
require 'test/unit'
require 'shoulda'

module TestExtension
  def provides_tested_class_dummy
    self.class_exec do
      def tested_class_dummy
        txt = "class #{@tested_class.name}Dummy < #{@tested_class.name}; end"
        sub = self.singleton_class.class_eval txt
        duplicated = sub.dup
        duplicated.class_exec do
          # do evil things to the dummy,
          # such as redefining constants and stubbing methods
        end
      end
    end
  end
end

Test::Unit::TestCase.extend TestExtensions 
```

请不要笑。我这样做是因为它适用于我需要做的事情，即测试课程并对他们的假人做坏事，而不以任何方式接触测试的课程。

```
class SomeClass
  # define some constants
  # define some methods
end 
```

然后，测试它：

```
class SomeClassTest < Test::Unit::TestCase
  @tested_class = ::SomeClass
  provides_tested_class_dummy()

  should "somehow comply" do
    dummy = tested_class_dummy()
    assert_kind_of Module, dummy
    # other assertions about the dummy's behavior
  end
end 
```

现在你可以开始笑了。

我的主要问题是，在“duplicated = sub.dup”行中，我复制了子类测试类，那行有什么意义吗？对我来说，这是伏都教，我这样做只是为了尽量减少对假人进行的篡改对测试类本身的任何负面影响。我通过#dup-ping 课程获得了什么吗？

附带问题：如果我在做一些公然可笑的事情，请告诉我。我简化了这段代码，但我不确定它是如何工作的（更复杂的原始代码确实可以按我的预期工作），但我希望你至少能明白这一点。另外，请那里的向导向我推荐一个好的模拟框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T05:08:22.033

如果您想在不践踏原始类的情况下更改常量或其他类范围的数据之类的事情，那么复制它似乎是要走的路 -

```
class Lion
  ROAR = 'roar!'
end

L2 = Lion.dup

puts Lion::ROAR             # "roar!"
puts Lion::ROAR.object_id   # 2152285120

puts L2::ROAR               # "roar!"
puts L2::ROAR.object_id     # 2152285120

L2::ROAR = 'rawrrr'

puts Lion::ROAR             # "roar!"
puts Lion::ROAR.object_id   # 2152285120

puts L2::ROAR               # "rawrrr"
puts L2::ROAR.object_id     # 2152285000 
```

# zend-framework - zend 框架 flash messanger 消息和重定向

> ID：10476349
> 
> 赞同：3
> 
> 时间：2012-05-07T03:31:40.177
> 
> 标签：zend-framework, action, helper, flash-message

所以我正在使用 zend-framwork 创建一个项目，我正在尝试实现 flash messenger 助手，但我找不到任何好的实践来实现它。我需要的是使用 flash messenger 发送消息并重定向，而消息将直接出现在 layout.phtml 中的特定位置。我知道对于重定向器我可以这样做：

```
$redirector = Zend_Controller_Action_HelperBroker::getStaticHelper('redirector');
$redirector->gotoUrl('/my-controller/my-action/param1/test/param2/test2')
               ->redirectAndExit();' 
```

我可以对 flash messenger 做些什么来使其正常工作？什么是最好的做法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T08:25:26.470

在您的控制器中

```
public function init()
{
$messages = $this->_helper->flashMessenger->getMessages();
if(!empty($messages))
$this->_helper->layout->getView()->message = $messages[0];
} 
```

在你的 layout.phtml

```
 <!-- Global notification handling to use call flashMessenger action helper -->
    <?php if(isset($this->message)) :?>
    <div class="notification">

    <?php echo $this->message ;?>

    </div>    
 <?php endif;?> 
```

然后每当你想使用它

```
public function loginAction()
{
$this->_helper->flashMessenger('Login is success');
$this->_helper->redirector('home');
} 
```

几乎每次您在使用 flashMessenger 后都会重定向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T05:45:21.853

如何在 Zend 中使用 flash messenger 假设您有一个名为 'foo' 的操作

```
public function fooAction(){

 $flashMessenger = $this->_helper->getHelper('FlashMessenger');
 //some codes
 $flashMessenger->addMessage(array('error' => 'This is an error message'));
$this->_redirect('/someothercontroller/bar');

}
//someothercontroller/barAction
public function barAction(){

$flashMessenger = $this->_helper->getHelper('FlashMessenger');
 $this->view->flashmsgs = $flashMessenger->getMessages();  //pass it to view 

} 
```

在你看来部分

```
<?php if(isset($this->flashmsgs)) { ?>
                 <?php foreach($this->flashmsgs as $msg){ 
                       foreach ($msg as $key=>$diserrors) {
                        if($key=="error"){?>
      //do wat you want with your message
<?php } } }?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T05:42:09.750

这应该在控制器内工作

```
/**
 * @var Zend_Controller_Action_Helper_FlashMessenger
 */
protected $flashMessenger = null;

/**
 * initalize flash messenger
 *
 * @return void
 */
public function init() 
{
    $this->flashMessenger = $this->_helper->FlashMessenger;
}

/**
 * Action wich is redirectin.. and sets message
 *
 * @return void
 */
public function actiononeAction()
{
    $this->flashMessenger->addMessage('FLY HiGH BiRD!');
    $this->_redirect('/whatever/url/in/your/project');
}

/**
 * display messages from messenger
 * 
 * @return void
 */
public function displayAction()
{
    $myMessages = $this->flashMessenger->getMessages();
    $this->view->messages = $myMessages;
} 
```

# python - 使用 Tweepy 编写通知程序

> ID：10476350
> 
> 赞同：1
> 
> 时间：2012-05-07T03:31:46.133
> 
> 标签：python, twitter, tweepy

在尝试学习 Python-tweepy api 时，我整理了一些代码，告诉我在最近的约 10 秒间隔内是否有任何新推文（当然，实际上它超过 10 秒，因为代码除了`sleep(10)`还需要一些时间来运行）：

```
from getApi import getApi
from time import sleep
from datetime import datetime

api = getApi()
top = api.home_timeline()[0].id

while True:
    l = api.home_timeline()
    if top != l[0].id:
        top = l[0].id
        print 'New tweet recognized by Python at: %s' % str(datetime.now())
    sleep(10) 
```

getApi 只是我编写的几行 Python 代码，用于使用 tweepy 管理 OAuth。getApi 方法返回 tweepy api，我的帐户已通过身份验证。

我不得不一次又一次地询问推特是否有任何新推文，这似乎非常低效。这是通常的做法吗？如果不是，那么“规范”的做法是什么？

我本来以为会有一些代码，例如：

```
api.set_home_timeline_handler(tweetHandler) 
```

只要有新推文，就会调用 tweetHandler。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:46:42.690

这就是 twitter API 的工作方式——每次你想知道 twitter 上的东西时，你都会问。`https://dev.twitter.com/docs/rate-limiting`但要注意每 10 秒的速率限制高于最大值。

或者，还有流 api：`https://dev.twitter.com/docs/streaming-api/methods`它可以像您想象的那样工作，但它用于比检查时间线更大的任务。

# javascript - Jquery Validate 以检查选择框 unqiue 和必需

> ID：10476351
> 
> 赞同：3
> 
> 时间：2012-05-07T03:31:46.140
> 
> 标签：javascript, jquery, jquery-validate

我使用了 jquery validate 插件来检查选择框的唯一性和必需性。

但是，**检查唯一性根本不起作用，**需要**检查仅适用于第一个选择框**，

如何解决这个问题？谢谢

jQuery

```
 $("#insertResult").validate({
    rules: {
         'select[]': {
              required: true,
              unique: true
          }
       },
   }); 
```

html

```
<form id="insertResult" method="post" action="excelSQL.php" >
       <select id="selectField0" name="select[]" style="float:left">
                       <option selected="" value="">Select one</option>
    <option value="Email">Email</option>
    <option value="1_Name2">1_Name2</option>
    </select>

    <select id="selectField1" name="select[]" style="float:left">
    <option selected="" value="">Select one</option>
    <option value="Email">Email</option>
    <option value="1_Name2">1_Name2</option>
    </select>
</form> 
```

更新：我已经编辑了我之前做过的 js 文件，我尝试过 selectField0 或 selectField_0 ，仍然没有运气

```
 checkForm: function() {
        this.prepareForm();
        for ( var i = 0, elements = (this.currentElements = this.elements()); elements[i]; i++ ) {
            if (this.findByName( elements[i].name ).length != undefined && this.findByName( elements[i].name ).length > 1) {
                for (var cnt = 0; cnt < this.findByName( elements[i].name ).length; cnt++) {
                    this.check( this.findByName( elements[i].name )[cnt] );
                }
                } else {
            this.check( elements[i] );
        }
        }
    return this.valid(); 
```

},

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T03:41:18.380

这是 jQuery 验证器的常见问题。有两种方法可以解决这个问题：

**方法1：**

修改 jQuery Validator 插件，使其按照以下说明处理两者：http: [//www.codeboss.in/web-funda/2009/05/27/jquery-validation-for-array-of-input-elements /](http://www.codeboss.in/web-funda/2009/05/27/jquery-validation-for-array-of-input-elements/)

**方法2：**

将验证器分别应用于每个选择：

HTML：

```
<form id="insertResult" method="post" action="excelSQL.php" >
    <select id="selectField0" name="select[]" style="float:left" class="error">
        <option selected="" value="">Select one</option>
        <option value="Email">Email</option>
        <option value="1_Name2">1_Name2</option>
    </select>

    <select id="selectField1" name="select[]" style="float:left">
        <option selected="" value="">Select one</option>
        <option value="Email">Email</option>
        <option value="1_Name2">1_Name2</option>
    </select>
    ...
</form> 
```

JavaScript：

```
 $("#insertResult").find("select").each(function() {
     $(this).validate({
         rules: {
             'select[]': {
                 required: true,
                 unique: true
              }
         }
     });
 }); 
```

**方法#3：**

虽然 jQuery 插件对于更基本的任务可能非常有价值，但在某些情况下，您尝试做的事情实际上可能超出了插件的设计范围。每当我听到诸如“修改库代码”之类的解决方案时，我都会想，也许那个库不适合我。这取决于修改的复杂性，以及我的同事或继任者在将插件更新到最新版本时可能无法弄清楚为什么事情停止工作的可能性。

因此，方法#3 完全避开了 jQuery 验证器，只使用 jQuery 来促进基本验证：

JavaScript：

```
 // submit handler for form
    $('#insertResult').submit(function(event) { 

        // if either field is not selected, show error and don't submit
        if( itemNotSelected( $('#selectField0'), $('#selectField1') ) == true )  { 

            $('.error2').css("display","block");
            event.preventDefault(); 
            return false;

        } else if( isEqual($("#selectField0"), $("#selectField1") ) == true ) {

            $('.error2').css("display","none");
            $('.error1').css("display","block");alert("afda")
            event.preventDefault(); 
            return false;

        } 
    });

    // hide error text on focus of element
    $('#selectField0, #selectField1').focus(function() {
        $('.error2, .error1').hide();

    });

// helper methods to check if both fields are equal
function isEqual(elem1, elem2) {
    return (elem1.find("option:selected").html() == 
            elem2.find("option:selected").html());
}

// helper methods to check if one field (or both) is not selected
function itemNotSelected(elem1, elem2) {
    return ( elem1.find("option:selected").html() == "Select one" || 
             elem2.find("option:selected").html() == "Select one" );
} 
```

HTML：

```
<select id="selectField0" name="select[]" style="float:left" class="error">
    <option selected="" value="">Select one</option>
    <option value="Email">Email</option>
    <option value="1_Name2">1_Name2</option>
</select>

<select id="selectField1" name="select[]" style="float:left">
    <option selected="" value="">Select one</option>
    <option value="Email">Email</option>
    <option value="1_Name2">1_Name2</option>
</select>
<span class="error2" style="display:none">These are required fields</span>
<span class="error1" style="display:none">Fields must be unique</span>

<input type="submit" name="submit" value="submit" /> 
```

当且仅当满足以下条件时，上述代码才会提交表单：

*   两个选择框都选择了项目。这符合“要求”的条件。
*   选择不一样，满足“唯一”条件。

*   当用户聚焦选择框时，错误就会消失。

*   如果用户在上述提交条件不成立的情况下尝试提交，则会显示以下错误：

*   如果未选择一个或多个选择框，则会显示“这些是必填字段”消息。

*   如果两者相等且被选中，则会显示“字段必须是唯一的”消息。

# php - 图片库php代码

> ID：10476352
> 
> 赞同：-1
> 
> 时间：2012-05-07T03:31:54.747
> 
> 标签：php, html, css

我在看这个页面：[http ://davidwalsh.name/generate-photo-gallery](http://davidwalsh.name/generate-photo-gallery)

它有一些代码来创建一个 php 库。我可以在将代码编译成有效的工作文件方面获得一些帮助吗？我看到那里的代码，我只是对如何将它们组合在一起有点困惑。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:30:10.350

这就是我为工作模型所做的-

1）在此结构下的我的 xampp/htdocs/photogallery
文件夹下创建文件夹/文件结构-

*   预加载图像（文件夹）
*   预加载图像拇指（文件夹）
*   索引.php
*   mootools-1.2.4.js
*   平滑盒.css
*   平滑盒.js
*   样式.css
*   测试.php

**preload-images**文件夹包含 jpg 图像（这是要放置在此文件夹下的内容，除非您会收到“无图像显示”消息）

**preload-images-thumbs**自动为先前文件夹 images 下的图像生成缩略图

我的**index.php**包含指向这些文件的链接-smoothbox.css、style.css、mootools-1.2.4.js、smoothbox.js（这些文件的来源，我从站点演示中提取）

然后我将 php 文件包含为 include_once('test.php'); 使用以下代码-

```
/** settings **/
$images_dir = 'preload-images/';
$thumbs_dir = 'preload-images-thumbs/';
$thumbs_width = 200;
$images_per_row = 3;

/** generate photo gallery **/
$image_files = get_files($images_dir);
if(count($image_files)) {
    $index = 0;
    foreach($image_files as $index=>$file) {
        $index++;
        $thumbnail_image = $thumbs_dir.$file;
        if(!file_exists($thumbnail_image)) {
            $extension = get_file_extension($thumbnail_image);
            if($extension) {
                make_thumb($images_dir.$file,$thumbnail_image,$thumbs_width);
            }
        }
        echo '<a href="',$images_dir.$file,'" class="photo-link smoothbox" rel="gallery"><img src="',$thumbnail_image,'" /></a>';
        if($index % $images_per_row == 0) { echo '<div class="clear"></div>'; }
    }
    echo '<div class="clear"></div>';
}
else {
    echo '<p>There are no images in this gallery.</p>';
} 
```

在**test.php**下我放置了这个内容——

```
/* function:  generates thumbnail */
function make_thumb($src,$dest,$desired_width) {
    /* read the source image */
    $source_image = imagecreatefromjpeg($src);
    $width = imagesx($source_image);
    $height = imagesy($source_image);
    /* find the "desired height" of this thumbnail, relative to the desired width  */
    $desired_height = floor($height*($desired_width/$width));
    /* create a new, "virtual" image */
    $virtual_image = imagecreatetruecolor($desired_width,$desired_height);
    /* copy source image at a resized size */
    imagecopyresized($virtual_image,$source_image,0,0,0,0,$desired_width,$desired_height,$width,$height);
    /* create the physical thumbnail image to its destination */
    imagejpeg($virtual_image,$dest);
}

/* function:  returns files from dir */
function get_files($images_dir,$exts = array('jpg')) {
    $files = array();
    if($handle = opendir($images_dir)) {
        while(false !== ($file = readdir($handle))) {
            $extension = strtolower(get_file_extension($file));
            if($extension && in_array($extension,$exts)) {
                $files[] = $file;
            }
        }
        closedir($handle);
    }
    return $files;
}

/* function:  returns a file's extension */
function get_file_extension($file_name) {
    return substr(strrchr($file_name,'.'),1);
} 
```

现在从您的服务器运行代码，如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T03:59:04.393

你不必编译任何东西。您只需要将代码上传到支持 php 的服务器上。或者，您可以在 PC/笔记本电脑上安装 XAMMP 或 WAMP。

[http://www.wampserver.com/en/](http://www.wampserver.com/en/)

# c# - C++ 数据类型与 C# 数据类型

> ID：10476353
> 
> 赞同：-3
> 
> 时间：2012-05-07T03:32:02.593
> 
> 标签：c#, c++, types

作为一名学习 C++ 的专业 C# 程序员，我想保持与 C# 中相同的数据类型。我写了一个头文件，应该对此有所帮助。我想知道的是它是否正确。

```
// boolean
//#DEFINE bool char
//#DEFINE true 0x01
//#DEFINE false 0x00

// 8-bit integers
#DEFINE byte unsigned char
#DEFINE UInt8 unsigned char
#DEFINE Byte unsigned char
#DEFINE sbyte char
#DEFINE Int8 char
#DEFINE SByte char

// 16-bit integers
#DEFINE ushort unsigned short int
#DEFINE UInt16 unsigned short int
#DEFINE short short int
#DEFINE Int16 short int

// 32-bit integers
#DEFINE uint unsigned int
#DEFINE UInt32 unsigned int
//#DEFINE int int
#DEFINE Int32 int

// 64-bit integers
#DEFINE long long long
#DEFINE Int64 long long
#DEFINE ulong unsigned long long
#DEFINE UInt64 unsigned long long

// 32-bit floating point
//#DEFINE float float
#DEFINE Single float

// 64-bit floating point
//#DEFINE double double
#DEFINE Double double 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T03:43:49.657

C++ 中的内置类型具有实现定义的大小，而 C# 没有。如果您想要等效的行为，请使用`<cstdint>`. 不仅是字节，还有位数！此外，`char`可能会或可能不会`signed`-`signed char`改为使用。

尽管无论你在做什么听起来都是个糟糕的主意。只需学习 C++，而不是一些愚蠢的混合语言。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-07T04:25:53.817

除了可怕的风格之外，这些宏甚至都无法按您期望的方式工作。

```
#define long long long 
```

容易出现各种问题。

[http://ideone.com/Jg9DK](http://ideone.com/Jg9DK)

颠倒宏定义的顺序也不能完全解决问题。

[http://ideone.com/45wUS](http://ideone.com/45wUS)

类似的问题发生在

```
#define short short int 
```

[http://ideone.com/dERGm](http://ideone.com/dERGm)

# github - GitHub 上的“密钥无效”消息

> ID：10476360
> 
> 赞同：118
> 
> 时间：2012-05-07T03:33:13.547
> 
> 标签：github, ssh-keys

我已根据[此处](http://help.github.com/mac-set-up-git/)概述的过程为新服务器安装生成了 SSH 密钥。但是，当我将内容复制`id_rsa.pub`到 GitHub 上的密钥列表时，我收到错误消息“密钥无效。确保您已正确复制文件。”

生成的密钥*是*有效的，我正在完全按原样复制它（全部在一行中，开头/结尾没有空格）。

有人知道会发生什么吗？

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2012-05-07T16:05:41.573

我来这里是因为我有同样的问题。从您的问题中，我意识到我正在从错误的文件中复制内容，没有*扩展*`.pub`名（这是我的私钥，即`id_rsa`文件，应该始终保密！）

**从 MAC：**

```
vi ~/.ssh/id_rsa.pub 
```

从字符块的末尾（电子邮件域扩展名的最后一个字母）精确复制到开头，以*ssh-rs ...*

如果它不起作用，那么您肯定没有正确复制。

有效。

如果您在**Windows**上，请使用记事本并如上所述复制粘贴。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2013-06-11T18:42:15.463

以下是一些在复制/粘贴公钥时根本不清楚的步骤。（作为记录，我使用 Putty Key Generator 作为我的密钥。）

*   在第一行，输入 ssh-rsa。
*   确保在 ssh-rsa 之后添加一个空格
*   当您将密钥复制/粘贴到密钥文本框中时，它应该保留 \n 字符 (x0A)。如果您在 Windows 上使用记事本，则在将文本复制到 Github 之前，您不会看到这些新行。

注意在这个截图中，ssh-rsa 后面有一个空格（见光标。） 公钥文本还包含三个 \n 字符，因此您可以看到公钥文本在文本框中三次向下跳到下一行。![SSH RSA 密钥](../Images/ab3273b6c015880fb8a408fc03ab0f45.png)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2018-08-22T11:23:17.270

我知道这是一个 cpl 岁的问题，但如果有人在 2018 年遇到这个： ![](../Images/f7d65c0b199e41b4f17bc32face2c680.png)

那么下面是显而易见的：

我的问题是我试图复制**私钥**

> id_rsa

而不是**公钥**内容

> id_rsa。**酒馆**

作为我的 SSH gitlab 存储库密钥，所以在你之后：

```
ssh-keygen -t rsa -C "your@email.com" -b 4096 
```

请记住要从以下位置复制 的**.pub文件扩展名：**

*   *操作系统*：

  pbcopy < ~/.ssh/id_rsa. **酒馆**

*   *Linux*：

  xclip -sel 剪辑 < ~/.ssh/id_rsa。**酒馆**

*   *Windows PowerShell*

  猫 ~/.ssh/id_rsa. **酒吧**| 夹子

然后将其粘贴到您的 gitlab/github 或其他存储库作为您的 SSH 密钥

这很有意义，因为您应该始终只共享您的公钥，而不是私钥:)

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-11-22T11:27:22.890

我尝试了几种方法，但都没有帮助（我的操作系统是 ubuntu）。然后我想我是否可以使用命令“more”打印~/.ssh/id_rsa.pub 的内容。

对不起，我没有发布图片的声誉！当我有时，我会发布它！

这是一个您可以看到图像的网址：

![在此处输入图像描述](../Images/19987c981bbaf7167f5834111aaf1f2d.png)

我从命令行复制了内容，它工作了！！！

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-02-18T12:04:39.350

有人建议使用， `$ vi ~/.ssh/id_rsa.pub`但它对我不起作用。

所以代替那个，我`$ cat ~/.ssh/id_rsa.pub`在 Windows 机器上使用命令在终端上打印出来然后复制它。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-07T06:50:26.713

如果您确实复制了`id_rsa.pub`密钥的内容（在一行中），结果应该如下所示（来自 The [GitHub ssh help page](http://help.github.com/win-set-up-git/#_set_up_ssh_keys)）：

![SSH 密钥](../Images/6adc429fe2fe8ede972ee871a79a32b0.png)

[OP louism](https://stackoverflow.com/users/1062679/louism) [确认](https://stackoverflow.com/questions/10476360/key-is-invalid-message-on-github/20143785#comment13587458_10485316)了复制粘贴问题：

> *   由于一个非常模糊的原因，**从 emacs 复制粘贴删除了`\n`after ssh-rsa**，这就是导致问题的原因。
> *   **从 vi 复制粘贴解决了这个问题**。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-02-20T09:19:37.107

**GitHub***[推荐](https://help.github.com/articles/adding-a-new-ssh-key-to-your-github-account/)*_

 **# 复制`SSH-KEY`：

我一起`xclip`复制`id_rsa.pub`密钥，如下所示：

## 1.安装`xclip`

`sudo apt-get install xclip`

## 2\. 复制`xclip`

`xclip -sel clip < ~/.ssh/id_rsa.pub`

* * *

祝你好运。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-07-25T07:30:42.230

在窗户里，

只需从密钥文件中复制裸密钥数据并**删除新行。** 在对话框中写下以下内容以解决您的问题。ssh-rsa 密钥

**注意：ssh-rsa 和密钥之间有空格**

你完成了。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-03-10T16:45:51.657

对于那些展望未来的人来说，另一个常见的问题是自动换行。例如，如果您运行它可以换行，从而在每个换行符处`cat ~/.ssh/id_rsa.pub`添加额外的字符。`\`删除这些，您的密钥应该可以正常工作。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-10-26T17:43:10.303

`cat`尽管直接从终端（Cmder/ConEmu）的输出中复制了公钥，但我遇到了同样的问题。您用来复制公钥的方法似乎有所不同。这是一种检查方法：

```
$ ssh-keygen -l -f ~/.ssh/id_rsa.pub
4096 SHA256:... 
```

然后将失败的密钥粘贴到新文件中，并尝试验证：

```
$ ssh-keygen -l -f test.pub
test.pub is not a public key file. 
```

就我而言，我一直在使用`cat`;从终端输出中复制密钥。`vim`而是从工作中获取密钥。这是在启用自动换行的情况下在 vim 中打开密钥的方法：

```
$ vim "+set wrap" ~/.ssh/id_rsa.pub 
```

我怀疑终端模拟器*可能*与它有关，因为我在 Terminal.app 上没有这个问题。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-10-12T05:32:55.003

这是我们在生成密钥时面临的常见问题。在生成 SSH 时，我们会得到两个 diff 文件，一个是 id_rsa 和 id_rsa.pub。这里带有 pub 扩展名的文件是公钥持有者文件。您必须从该文件中复制内容并添加到 Github。

注意： 1\. 公钥文件内容以“SSH-RSA”开头 2\. 以您的 Github 电子邮件 ID 结尾。例如：如果您使用 @gmail.com 注册了 Github，那么 pub 文件最后具有指定的电子邮件 ID

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-05-29T00:22:22.567

我的笔记本电脑在 macOS Big Sur 版本 11.3.1 上，并`ssh-keygen -t rsa`在开头生成了一个非常长的密钥 ssh-rsa-cert-v01@openssh.com。 `ssh-keygen -t rsa -b 4096`工作过；它使用 ssh-rsa 算法创建了一个密钥。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-09-11T05:58:50.997

如果你使用腻子（puttygen），复制这个！！！！

[![在此处输入图像描述](../Images/db49df4f8b6a8bdb5443ae7cdceddd75.png)](https://i.stack.imgur.com/4947h.png)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-08-10T12:06:14.147

如果您使用 Sublime，您可以正确看到 ssh-key。检查是否有任何 id_rsa.pub

```
ls -al ~/.ssh 
```

如果它到位，用崇高的文字打开它

```
sudo subl /home/user_name/.ssh/id_rsa.pub 
```

然后复制并粘贴您的公共 ssh 密钥。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-02-22T09:16:54.337

在我的情况下，我必须在我的电子邮件之后（在整个密钥字符串之后）添加一个额外的白色规则，然后才能被接受。在尝试复制在 Gitlab 上输入的 ssh 密钥后，我偶然发现了这一点。

来自我的 pub 密钥的 pbcopy 直接从命令行不起作用。来自 gitlab 的副本，最后带有额外的白色规则，成功了。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-10-01T02:38:52.897

我刚遇到这个问题。超级沮丧。我想我的情况可能会影响问题的原因。我正在使用平板电脑，尝试通过平板电脑浏览器（Chrome）在 githubs 站点上设置密钥，并且我正在从连接到远程 linux 服务器的 ssh 应用程序复制密钥。

最终发生的事情是，当我将密钥复制到浏览器时，它引入了许多换行符。不仅如此，它还从插入新行的每个点删除了一个字符。

所以为了让它工作，我必须手动找到每个新的换行符，然后寻找那个部分的键来找到丢失的字符。然后我添加了字符并删除了新行。在我追查每一个变化之后，钥匙工作得很好。

顺便说一句，我自己并没有添加任何新的换行符，例如ssh-rsa之后其他人提到的那个。

希望这对其他人有帮助。我不知道为什么会这样。愚蠢的是，复制到剪贴板会改变复制的文本。哦，我也是直接从 Vim 中复制出来的。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-02-07T23:51:45.137

如果您使用 bash for windows 作为终端，并且通过 shift + highlighting + ctrl-c 进行复制，那么此解决方案可能对您有用：

1.  复制密钥并将其粘贴到记事本后：

[![示例 SSH 密钥](../Images/04e0f23d818950ca0a99f5a6dee4e9ef.png)](https://i.stack.imgur.com/I3SZ6.jpg)

2.  现在去编辑>全选或Ctrl-A

[![突出显示的文本](../Images/22f4cb4ea76767c0e1c9281bd75e1569.png)](https://i.stack.imgur.com/Z42h1.jpg)

3.  大量的蓝色区域是空白。您需要使用退格键或删除键删除它们。留下绿色圆圈中的空白。

[![在此处输入图像描述](../Images/251c1caa6dc639d5a86dc9214364ab01.png)](https://i.stack.imgur.com/bIazk.jpg)

4.  您现在应该能够将此编辑后的版本复制并粘贴到 github 中。

[![在此处输入图像描述](../Images/9f1e8d175a287fbb8d4ddcdd8c7eb86b.png)](https://i.stack.imgur.com/Bq6m7.jpg)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-01-12T18:55:35.850

如果使用 vs 代码

`code ~/.ssh/id_rsa.pub` 将打开`.pub`文件复制到github

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-02-18T14:48:11.057

将 id_rsa.pub 的全部内容复制到剪贴板：

运行 > `pbcopy ~/.ssh/id_rsa.pub`

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-05-27T07:27:51.500

我试图上传我的公钥并收到“无效密钥”消息。我的格式不正确，因为密钥末尾有多余的空格。它应该是格式：`ssh-rsa <public-key>`

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-02-18T23:16:35.967

如果您使用的是 linux 或 mac，只需执行以下操作：

```
$ cat ~/.ssh/id_rsa.pub 
```

输出应采用如下形式：

```
ssh-rsa somerandomcharacters user@domain 
```

最后一步是复制内容并将其粘贴到您的目的地

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-03-13T05:17:05.960

将 ssh 公钥复制到剪贴板主要是这里的技巧，最好的方法是直接从终端。**您必须通过以下命令将此密钥输出到终端上，** `cat ~/.ssh/id_rsa.public`然后按回车键。ssh public 将显示在 GitBash 终端屏幕上，然后您只需**从电子邮件的最后一个字符到密钥的开头选择仔细复制它，即 ssh rsa ...** 我花了几天时间，然后最终得出了这个解决方案.

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-10-06T18:26:10.907

我正在使用窗口操作系统，由于某些原因它对我不起作用：

```
$ clip < ~/.ssh/id_ed25519.pub
bash: clip: command not found 
```

* * *

我在地址找到了隐藏`.ssh`文件夹：`C:\Users\g1100_000\.ssh` 您将看到 pub 文件如下：

[![在此处输入图像描述](../Images/b403b40cc7de341112c93affbd29dd06.png)](https://i.stack.imgur.com/gp2Lm.png)

使用您的代码编辑器打开它，然后将密钥复制到 github。希望这可以帮助你。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2022-01-06T18:19:39.063

$ cat /c/Users/User/.ssh/id_rsa.pub 使用此命令代替 $ cat /c/Users/User/.ssh/id_rsa

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2021-02-17T06:12:23.357

只需尝试安装 wps2019 并打开 wps2019 上的 .pub 并复制代码并粘贴即可：

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2022-02-03T10:56:24.773

**从头开始按照以下说明进行操作，您将能够解决此问题。**

许多 Git 服务器使用 SSH 公钥进行身份验证。为了提供公钥，系统中的每个用户都必须生成一个，如果他们还没有公钥的话。这个过程在所有操作系统中都是相似的。首先，您应该检查以确保您还没有密钥。默认情况下，用户的 SSH 密钥存储在该用户的 ~/.ssh 目录中。您可以通过转到该目录并列出内容来轻松检查您是否已经拥有密钥：

```
$ cd ~/.ssh
$ ls
authorized_keys2  id_dsa       known_hosts
config            id_dsa.pub 
```

您正在寻找一对名为`id_dsa`or`id_rsa`的文件和一个带有`.pub`扩展名的匹配文件。该`.pub`文件是你的公钥，另一个文件是对应的私钥。如果您没有这些文件（或者您甚至没有`.ssh`目录），您可以通过运行一个名为 的程序来创建它们`ssh-keygen`，该程序在 Linux/macOS 系统上随 SSH 包一起提供，并随 Git for Windows 一起提供：

```
$ ssh-keygen -o
Generating public/private rsa key pair.
Enter file in which to save the key (/home/schacon/.ssh/id_rsa):
Created directory '/home/schacon/.ssh'.
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/schacon/.ssh/id_rsa.
Your public key has been saved in /home/schacon/.ssh/id_rsa.pub.
The key fingerprint is:
d0:82:24:8e:d7:f1:bb:9b:33:53:96:93:49:da:9b:e3 schacon@mylaptop.local 
```

首先，它确认您要保存密钥的位置 ( `.ssh/id_rsa`)，然后它会询问两次密码，如果您不想在使用密钥时输入密码，可以将其留空。但是，如果您确实使用密码，请确保添加该`-o`选项；它以一种比默认格式更能抵抗暴力破解密码的格式保存私钥。您还可以使用该`ssh-agent`工具来避免每次都输入密码。

现在，执行此操作的每个用户都必须将其公钥发送给您或管理 Git 服务器的任何人（假设您正在使用需要公钥的 SSH 服务器设置）。他们所要做的就是复制`.pub`文件的内容并通过电子邮件发送。公钥看起来像这样：

```
$ cat ~/.ssh/id_rsa.pub
ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAklOUpkDHrfHY17SbrmTIpNLTGK9Tjom/BWDSU
GPl+nafzlHDTYW7hdI4yZ5ew18JH4JW9jbhUFrviQzM7xlELEVf4h9lFX5QVkbPppSwg0cda3
Pbv7kOdJ/MTyBlWXFCR+HAo3FXRitBqxiX1nKhXpHAZsMciLq8V6RjsNAQwdsdMFvSlVK/7XA
t3FaoJoAsncM1Q9x5+3V0Ww68/eIFmb1zuUFljQJKprrX88XypNDvjYNby6vw/Pb0rwert/En
mZ+AW4OZPnTPI89ZPmVMLuayrD2cE86Z/il8b+gw3r3+1nKatmIkjn2so1d01QraTlMqVSsbx
NrRFi9wrf+M7Q== schacon@mylaptop.local 
```**

# objective-c - 应用程序偶尔会收到 SIGKILL，似乎是 stringWithContentsOfURL:encoding:error:

> ID：10476362
> 
> 赞同：0
> 
> 时间：2012-05-07T03:33:17.290
> 
> 标签：objective-c, macos

```
NSString *urlString = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%@&output=csv", [temp stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]];
DLog(@"urlString:%@",urlString); //http://maps.google.com/maps/geo?q=Kebon%20Jeruk,Jakarta&output=csv
NSURL * Url= [NSURL URLWithString:urlString]; //http://maps.google.com/maps/geo?q=Kebon%20Jeruk,Jakarta&output=csv
// Getting a SIGKILL on the next line; the program aborts
NSString * result = [NSString stringWithContentsOfURL:Url encoding:NSASCIIStringEncoding error:nil];
DLog(@"Result:%@",result); 
```

我不知道为什么我的 Mac 应用程序会收到 SIGKILL；它只会偶尔发生一次。

我检查，检查，检查，没有任何意义。我在那条线上发送的所有论点都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:37:54.887

```
NSString *result = [NSString stringWithContentsOfURL:Url encoding:NSUTF8StringEncoding error:&error] 
```

试试这个。

# mysql - MySQL 从多个按左连接表计数排序的表中选择

> ID：10476365
> 
> 赞同：1
> 
> 时间：2012-05-07T03:33:56.510
> 
> 标签：mysql, join, count

我一直在尝试从多个表中选择数据，而我通过左连接加入的另一个表中的 id 计数进行排序。一切都很好，除了计数增加 600something 而不是每行一个。

正如我在类似问题中看到的那样，我尝试将 distinct 放入 count 语句中，但唯一的结果是冻结数据库。

表：

```
CREATE TABLE IF NOT EXISTS `places` (
  `PlaceId` int(10) NOT NULL AUTO_INCREMENT,
  `Name` varchar(45) COLLATE utf8_unicode_ci NOT NULL,
  `AreaId` int(10) NOT NULL DEFAULT '1',
  PRIMARY KEY (`PlaceId`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=0;

CREATE TABLE IF NOT EXISTS `places_descriptions` (
  `DescId` int(45) NOT NULL AUTO_INCREMENT,
  `PlaceId` int(10) NOT NULL,
  `Description` varchar(1024) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`DescId`),
  KEY `PlaceId` (`PlaceId`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=0;

CREATE TABLE IF NOT EXISTS `places_hits` (
  `HitId` int(45) NOT NULL AUTO_INCREMENT,
  `PlaceId` int(45) NOT NULL,
  PRIMARY KEY (`HitId`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=0; 
```

询问：

```
SELECT 
    p.PlaceId, 
    p.Name, 
    pd.Description,
    COUNT(ph.HitId) AS numHits
FROM 
    places_descriptions AS pd, 
    places AS p 
    LEFT JOIN places_hits AS ph 
    ON (p.PlaceId = ph.PlaceId) 
WHERE 
    (p.PlaceId = pd.PlaceId) AND 
    (p.AreaId = 1) 
GROUP BY 
    p.PlaceId, 
    p.Name, 
    pd.Description 
ORDER BY 
    numHits DESC, 
    p.PlaceId 
LIMIT 0, 10 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:24:44.300

乍一看，您的问题可能是您正在交叉连接 pd 和 p 因为没有 ON 子句。where 中的 placeId=placeId 通过过滤掉连接不准确的行来掩盖此问题，但最好将该条件置于 ON 中。过滤之前实际存在的大量行可能会导致计数，但我不确定。

试试这个，开始：

```
SELECT 
    p.PlaceId, 
    p.Name, 
    pd.Description,
    COUNT(ph.HitId) AS numHits
FROM 
    places_descriptions AS pd
    INNER JOIN places AS p 
            ON p.PlaceId = pd.PlaceID
    LEFT JOIN places_hits AS ph 
    ON (p.PlaceId = ph.PlaceId) 
WHERE 
    (p.AreaId = 1) 
GROUP BY 
    p.PlaceId, 
    p.Name, 
    pd.Description 
ORDER BY 
    numHits DESC, 
    p.PlaceId 
```

# android - 如何在 Android 模拟器上模拟睡眠模式

> ID：10476373
> 
> 赞同：42
> 
> 时间：2012-05-07T03:35:39.770
> 
> 标签：android, android-emulator, avd

当手机进入睡眠/省电模式时，我的 Android 应用程序的一些用户报告了错误。

我想在 Android 虚拟设备上测试这个问题。是否可以在 AVD 上模拟手机进入睡眠/省电模式？

提前致谢。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-08-23T06:11:02.157

在模拟器上尝试以下

1.  去`Settings`
2.  去`Developer options`
3.  取消选中`Stay awake`（从顶部开始的第三个选项）

如果不更改，模拟器将在 1 分钟（默认设置）后进入睡眠状态。

按电源按钮[![在此处输入图像描述](../Images/e684352b60bc20e4723174f0ac2ec323.png)](https://i.stack.imgur.com/xt899.png)唤醒模拟器。

`Developer options`默认情况下未启用，要启用它，请执行以下操作：

1.  去`Settings`
2.  点击`About emulated device`
3.  点击`Build number`7 次，应该会通知您`Developer options`现在已启用
4.  回去你应该看到`Developer options`

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2017-06-04T08:03:16.490

在模拟器上，将设置/安全/屏幕锁定从“无”更改为“滑动” [![在此处输入图像描述](../Images/0dd2e436f4ed9b1c89af71115272ff33.png)](https://i.stack.imgur.com/9XuDw.png)

然后，单击右侧控制栏上的“电源”按钮关闭屏幕，然后再次按下打开屏幕。现在将显示锁定屏幕。 [![在此处输入图像描述](../Images/37c9d8f265cbc446223dbfe79f02b859.png)](https://i.stack.imgur.com/8hEVn.png)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-10-19T05:41:35.300

`Power Button`模拟器旁边的侧边栏上的将执行此操作。

我的 Mac 上的热键是`⌘ P`

*注意：您需要使用 Swipe 而不是 None 来设置 Lock Screen*

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-02-25T22:23:13.217

要使用命令行使设备进入睡眠状态，请运行： `adb shell input keyevent 223`

要使用命令行将设备从睡眠中唤醒，请运行： `adb shell input keyevent 224`

有关您可以使用 ADB 发送的关键事件的更多信息，请查看[KeyEvent](https://developer.android.com/reference/android/view/KeyEvent)`KEYCODE_...`的常量，例如：

```
/** Key code constant: Sleep key.
 * Puts the device to sleep.  Behaves somewhat like {@link #KEYCODE_POWER} but it
 * has no effect if the device is already asleep. */
public static final int KEYCODE_SLEEP           = 223;

/** Key code constant: Wakeup key.
 * Wakes up the device.  Behaves somewhat like {@link #KEYCODE_POWER} but it
 * has no effect if the device is already awake. */
public static final int KEYCODE_WAKEUP          = 224; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-21T07:40:19.093

不知何故 fn + F7 在我的mac上不起作用。所以我使用的是：

`adb shell input keyevent 26`

这将发送 POWER KEY 事件并将关闭屏幕。注意：它不会显示屏幕已关闭。图像将保留。但是你不能与之交互。再次执行此操作`adb shell input keyevent 26`后，您将看到锁定屏幕指示该设备之前已关闭。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-11T03:29:34.363

By pressing `F7` you can emulate sleep mode in your emulator.

# ios - 在 UITableViewCell 的附件视图中使用自定义按钮的问题

> ID：10476376
> 
> 赞同：0
> 
> 时间：2012-05-07T03:36:43.793
> 
> 标签：ios, xcode, uitableview, uibutton, accessoryview

我正在 UITableView 中构建一个简单的清单。我通过在导航栏中放置常用的编辑按钮来添加编辑功能。该按钮打开编辑模式。在我在每个单元格的附件视图中添加自定义复选框（作为按钮）之前，编辑模式效果很好。我正在使用这段代码来做到这一点：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        // put the tasks into the cell
        [[cell textLabel] setText:[NSString stringWithFormat:@"%@", [[[CLTaskStore sharedStore] allTasks] objectAtIndex:[indexPath row]]]];

        // put the checkbox into the cell's accessory view
        UIButton *checkBox = [UIButton buttonWithType:UIButtonTypeCustom];
        [checkBox setImage:[UIImage imageNamed:@"checkbox.png"] forState:UIControlStateNormal];
        [checkBox setImage:[UIImage imageNamed:@"checkbox-checked.png"] forState:UIControlStateSelected];
        checkBox.frame = CGRectMake(0, 0, 30, 30);
        checkBox.userInteractionEnabled = YES;
        [checkBox addTarget:self action:@selector(didCheckTask:) forControlEvents:UIControlEventTouchDown];
        cell.accessoryView = checkBox;

        // put the index path in the button's tag
        checkBox.tag = [indexPath row];
    }
    return cell;
} 
```

如您所见，我使用按钮的标签将 indexPath 传递给我的 didCheckTask: 方法：

```
- (void)didCheckTask:(UIButton *)button
{
    task = [[[CLTaskStore sharedStore] allTasks] objectAtIndex:button.tag];
    task.didComplete = YES;

    // toggle checkbox
    button.selected = !button.selected;

    [checkList reloadData];
} 
```

复选框和编辑似乎都在表面上正常工作。但是，当我进入编辑模式，删除 tableView 中的一个项目，然后尝试使用复选框时，出现了一个大问题。例如，如果我删除 tableView 中的第一项，然后尝试检查最后一项的复选框，程序会崩溃：

> 2012-05-06 21:45:40.645 CheckList[16022:f803] *** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[__NSArrayM objectAtIndex:]：索引 4 超出范围 [0 .. 3]”

我一直试图找出这个错误的来源，但我没有运气。我真的可以使用一些帮助 - 我是可可的新手。相关代码如下。

CLTaskFactory.h

```
#import <Foundation/Foundation.h>

@interface CLTaskFactory : NSObject
{
    NSString *taskName;
    BOOL didComplete;
}

@property NSString *taskName;

- (void)setDidComplete:(BOOL)dc;
- (BOOL)didComplete;

@end 
```

CLTaskFactory.m

```
#import "CLTaskFactory.h"

@implementation CLTaskFactory

@synthesize taskName;

- (void)setDidComplete:(BOOL)dc
{
    didComplete = dc;
}

- (BOOL)didComplete
{
    return didComplete;
}

- (NSString *)description
{
    // override the description
    NSString *descriptionString = [[NSString alloc] initWithFormat:@"%@", taskName];
    return descriptionString;
}

@end 
```

CLTaskStore.h

```
#import <Foundation/Foundation.h>

@class CLTaskFactory;

@interface CLTaskStore : NSObject
{
    NSMutableArray *allTasks;
}

+ (CLTaskStore *)sharedStore;

- (NSMutableArray *)allTasks;
- (void)addTask:(CLTaskFactory *)task;
- (void)removeTask:(CLTaskFactory *)task;
- (void)moveTaskAtIndex:(int)from toIndex:(int)to;

@end 
```

CLTaskStore.m

```
 #import "CLTaskStore.h"

    @implementation CLTaskStore

    + (id)allocWithZone:(NSZone *)zone
    {
        return [self sharedStore];
    }

    + (CLTaskStore *)sharedStore
    {
        static CLTaskStore *sharedStore = nil;
        if (!sharedStore) {
            sharedStore = [[super allocWithZone:nil] init];
        }
        return sharedStore;
    }

    - (id)init
    {
        self = [super init];
        if (self) {
            allTasks = [[NSMutableArray alloc] init];
        }
        return self;
    }

    - (NSMutableArray *)allTasks
    {
        return allTasks;
    }

    - (void)addTask:(CLTaskFactory *)task
    {
        [allTasks addObject:task];
    }

    - (void)removeTask:(CLTaskFactory *)task
    {
        [allTasks removeObjectIdenticalTo:task];

        NSInteger taskCount = [allTasks count];
        NSLog(@"Removed: %@, there are now %d remaining tasks, they are:", task, taskCount);
        for (int i = 0; i < taskCount; i++) {
            NSLog(@"%@", [[[CLTaskStore sharedStore] allTasks] objectAtIndex:i]);
        }
    }

    - (void)moveTaskAtIndex:(int)from toIndex:(int)to
    {
        if (from == to) {
            return;
        }

        CLTaskFactory *task = [allTasks objectAtIndex:from];
        [allTasks removeObjectAtIndex:from];
        [allTasks insertObject:task atIndex:to];
    }

    @end

CLChecklistViewController.h

    #import <Foundation/Foundation.h>

    @class CLTaskFactory;

    @interface CLCheckListViewController : UIViewController
    {
        CLTaskFactory *task;
    }

    - (void)didCheckTask:(UIButton *)button;

    @end

CLCheckListViewController.m

#import "CLCheckListViewController.h"
#import "CLTaskFactory.h"
#import "CLTaskStore.h"

@implementation CLCheckListViewController
{
    __weak IBOutlet UITableView *checkList;
}

- (id)init
{
    self = [super init];
    if (self) {
        // add five sample tasks
        CLTaskFactory *task1 = [[CLTaskFactory alloc] init];
        [task1 setTaskName:@"Task 1"];
        [task1 setDidComplete:NO];
        [[CLTaskStore sharedStore] addTask:task1];

        CLTaskFactory *task2 = [[CLTaskFactory alloc] init];
        [task2 setTaskName:@"Task 2"];
        [task2 setDidComplete:NO];
        [[CLTaskStore sharedStore] addTask:task2];

        CLTaskFactory *task3 = [[CLTaskFactory alloc] init];
        [task3 setTaskName:@"Task 3"];
        [task3 setDidComplete:NO];
        [[CLTaskStore sharedStore] addTask:task3];

        CLTaskFactory *task4 = [[CLTaskFactory alloc] init];
        [task4 setTaskName:@"Task 4"];
        [task4 setDidComplete:NO];
        [[CLTaskStore sharedStore] addTask:task4];

        CLTaskFactory *task5 = [[CLTaskFactory alloc] init];
        [task5 setTaskName:@"Task 5"];
        [task5 setDidComplete:NO];
        [[CLTaskStore sharedStore] addTask:task5];
    }
    return self;
}

- (void)viewDidLoad
{
    [[self navigationItem] setTitle:@"Checklist"];

    // create edit button
    [[self navigationItem] setLeftBarButtonItem:[self editButtonItem]];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [[[CLTaskStore sharedStore] allTasks] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        // put the tasks into the cell
        [[cell textLabel] setText:[NSString stringWithFormat:@"%@", [[[CLTaskStore sharedStore] allTasks] objectAtIndex:[indexPath row]]]];

        // put the checkbox into the cell's accessory view
        UIButton *checkBox = [UIButton buttonWithType:UIButtonTypeCustom];
        [checkBox setImage:[UIImage imageNamed:@"checkbox.png"] forState:UIControlStateNormal];
        [checkBox setImage:[UIImage imageNamed:@"checkbox-checked.png"] forState:UIControlStateSelected];
        checkBox.frame = CGRectMake(0, 0, 30, 30);
        checkBox.userInteractionEnabled = YES;
        [checkBox addTarget:self action:@selector(didCheckTask:) forControlEvents:UIControlEventTouchDown];
        cell.accessoryView = checkBox;

        // put the index path in the button's tag
        checkBox.tag = [indexPath row];
    }
    return cell;
}

- (void)didCheckTask:(UIButton *)button
{
    task = [[[CLTaskStore sharedStore] allTasks] objectAtIndex:button.tag];
    task.didComplete = YES;

    // toggle checkbox
    button.selected = !button.selected;

    [checkList reloadData];
}

- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    [super setEditing:editing animated:animated];

    // set editing mode
    if (editing) {
        self.navigationItem.title = @"Edit Checklist";
        [checkList setEditing:YES];
    } else {
        self.navigationItem.title = @"Checklist";
        [checkList setEditing:NO];
    }
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle
                                            forRowAtIndexPath:(NSIndexPath *)indexPath
{
    // remove guest from store
    if (editingStyle == UITableViewCellEditingStyleDelete) {

        task = [[[CLTaskStore sharedStore] allTasks] objectAtIndex:[indexPath row]];
        [[CLTaskStore sharedStore] removeTask:task];

        // remove guest from table view
        [checkList deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }
}

- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath toIndexPath:(NSIndexPath *)destinationIndexPath
{
    [[CLTaskStore sharedStore] moveTaskAtIndex:[sourceIndexPath row] toIndex:[destinationIndexPath row]];
}

@end 
```

非常感谢您的帮助和专业知识！

编辑：

我使用循环 NSLogs 修改了两种方法以获得一些见解。一、CLTaskStore：

```
- (void)removeTask:(CLTaskFactory *)task
{
    [allTasks removeObjectIdenticalTo:task];

    NSInteger taskCount = [allTasks count];
    NSLog(@"Removed: %@, there are now %d remaining tasks, they are:", task, taskCount);
    for (int i = 0; i < taskCount; i++) {
        NSLog(@"%@, status: %@", [[[CLTaskStore sharedStore] allTasks] objectAtIndex:i], [[[[CLTaskStore sharedStore] allTasks] objectAtIndex:i] didComplete]?@"YES":@"NO");
    }
} 
```

二、CLTaskListViewController：

```
- (void)didCheckTask:(UIButton *)button
{
    task = [[[CLTaskStore sharedStore] allTasks] objectAtIndex:button.tag];
    task.didComplete = YES;

    NSInteger taskCount = [[[CLTaskStore sharedStore] allTasks] count];
    for (int i = 0; i < taskCount; i++) {
        NSLog(@"%@, status: %@", [[[CLTaskStore sharedStore] allTasks] objectAtIndex:i], [[[[CLTaskStore sharedStore] allTasks] objectAtIndex:i] didComplete]?@"YES":@"NO");
    }

    // toggle checkbox
    button.selected = !button.selected;

    [checkList reloadData];
} 
```

我注意到两件事。如果我从下到上向上删除，则没有问题。我可以检查任何东西 - 一切正常。但是，如果我删除第一行然后检查最后一行，程序就会崩溃。删除的 NSLog 很干净，工作正常。

如果我删除第一行并检查第四行，则 CLTaskStore 报告中的 NSLog 报告第 5 行已检查。

这就是问题。删除后两者肯定是乱序的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T05:47:29.640

Your entire problem stems from the bad idea of using tags to indicate what row a button is in. This is bad enough when you aren't deleting rows from the datasource, but when you are, this is the sort of problem you can run into.

Using the location of the tapped item in the table view, and getting the index path of the location from the table view, is far more robust and works with editable tables and multi-section tables. See sample code in my answer [here](https://stackoverflow.com/questions/9274494/how-to-know-the-uitableview-row-number/9274863#9274863).

If you do it that way there is no re-indexing necessary.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:13:34.113

在进入 tableView 的编辑模式后按下删除按钮时，您必须从数据源中删除相应的数据项。您的代码显示您有一个 removeTask: 方法，但我看不到您实际调用该方法以从数据源中删除相应任务条目的位置。执行此操作的好地方是视图控制器中的 tableview:commitEditingStyle:forRowAtIndexPath: 方法。

由于您正在删除数据源中的相应项目，因此对代码的进一步研究表明您的复选框标记值仍然具有其原始值。如果您删除最后一个之前的任何 tableView 项目，然后尝试检查最后一个，您的 didCheckTask 方法会尝试访问原始 indexPath 行值，该值现在不存在并导致边界异常。如果删除前两个单元格，那么最后两个 tableView 项都会导致异常，以此类推。

它在 didCheckTask 方法中不起作用，但在 removeTask: 方法中，从数据源中删除对象后，循环遍历剩余对象并将每个标记设置为其对应的数组索引。在 moveTaskAtIndex:toIndex: 方法中，在由于用户重新排序项目而移动数组条目后，执行相同的操作 - 循环遍历数组并将每个标记设置为其在数组中的索引。

# jquery - 如何使用 $(function() { $('

> ID：10476381
> 
> 赞同：2
> 
> 时间：2012-05-07T03:38:29.673
> 
> 标签：jquery, asp.net, css

这是我到目前为止所做的：

//delcare html:

```
<div class="success" id="divStatus" style="display:none;" ><a href="#" class="close">&times;</a></div> 
```

后面的asp.net代码：

```
 ScriptManager.RegisterClientScriptBlock(this.Page, this.Page.GetType(), "_key"+this.UniqueID, "$(function() { $('#divStatus').html('" + msg + "').show().fadeIn(9000).fadeOut(9000); });", true); 
```

//css类：

```
.success
    {  
        display:block;  
        color: #4F8A10;
        background-color: #DFF2BF;
    } 
```

我想到的唯一合乎逻辑的解释是，$function ....中的>>#divStatus中没有css类（.success）被定义了吗？

**更新结束**

我正在尝试向下面的选择器添加一个类，但不确定这是否是正确的做法，有什么帮助吗？

这是我尝试做的，但我没有看到添加了类并且没有任何操作（希望看到一些颜色）

```
"$(function() { $('#divStatus').addClass('success').html(......... 
```

这是我在 asp.net 中在代码隐藏中执行的完整代码。

```
ScriptManager.RegisterClientScriptBlock(this.Page, this.Page.GetType(), "_key"+this.UniqueID, "$(function() { $('#divStatus').html('" + msg + "').show().fadeIn(9000).fadeOut(9000); });", true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:34:41.167

这可能是您正在寻找的

**HTML**

```
<div id="divStatus"></div> 
```

**CSS**

```
#divStatus{
    display: none;
}

.success{
    color: red;
} 
```

**JavaScript**

```
$(function() {
    $('#divStatus')
        .html('hello')
        .show('fade', 2000, function(){
            $(this).addClass('success');
        })
        .hide('fade', 2000);
}); 
```

一个替代方案可能是

```
$(function() {
    $('#divStatus')
        .html('hello')
        .show('highlight', 2000, function(){
            $(this).addClass('success');
        });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T03:46:14.433

您可能需要提供更多信息。addClass 基本上就像你一样工作。这是一个小提琴，可以在单击按钮时显示您想要的更改：

[http://jsfiddle.net/lucuma/6mSXP/](http://jsfiddle.net/lucuma/6mSXP/)

例子：`$('#status').html('it worked').addClass('success');`

# php - 如何在表格中添加一条记录

> ID：10476382
> 
> 赞同：1
> 
> 时间：2012-05-07T03:39:12.873
> 
> 标签：php, mysql, sql

使用这种语法，我可以在字段中添加记录，但它总是添加 2 条记录。例如，我输入 Ana 作为名称。输出将是 2 安娜。而且，如果我删除了一条记录，则两条记录都已从表中删除/删除。这是添加记录的语法：

```
 <?php
$host="localhost"; // Host name 
$username="****"; // Mysql username 
$password="****"; // Mysql password 
$db_name="inventory"; // Database name 
$tbl_name="client"; // Table name

mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("inventory", $con);

$addclient="INSERT INTO client(account_name, maintenance_type, ma_status, ma_contract_start, ma_contract_end, ma_reference_no) 
VALUES ('". $_POST['account_name'] . "', '". $_POST['maintenance_type'] . "', '". $_POST['ma_status'] . "', '". $_POST['ma_contract_start'] . "', '". $_POST['ma_contract_end'] . "', '". $_POST['ma_reference_no'] . "')";

mysql_query($addclient,$con);

if (!mysql_query($addclient,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added";

mysql_close($con); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T03:44:05.320

```
...
mysql_query($addclient,$con);

if (!mysql_query($addclient,$con)) {
... 
```

第一次调用 'mysql_query' 会执行一次命令。'if' 子句中的第二个，再次执行查询。

试试这个：

```
...
$result = mysql_query($addclient,$con);

if (!$result) {
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T03:40:56.487

评论这一行 pl

```
mysql_query($addclient,$con); 
```

# c# - App_code 文件夹导入初学者

> ID：10476383
> 
> 赞同：0
> 
> 时间：2012-05-07T03:39:23.013
> 
> 标签：c#, asp.net, .net, app-code

我正在做一个 C# 教程，但出现此错误无法继续，我在 App_Code 文件夹下设置了 Product 类，不知何故没有加载或导入它。知道为什么吗？

> “/Beginning ASP.NET 4”应用程序中的服务器错误。编译错误
> 
> 说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：CS0246：找不到类型或命名空间名称“产品”（您是否缺少 using 指令或程序集引用？）**
> 
> 源文件：c:\Documents and Settings\Desktop\Books\Beginning ASP.NET 4\Chapter03\Website\Default.aspx 行：8

源错误：

```
<%@ Page Language="C#" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<script runat="server">
    private void Page_Load(object sender, EventArgs e)
    {
        Product saleProduct = new Product("Kitchen Garbage", 49.99M, "garbage.jpg");
        Response.Write(saleProduct.GetHtml());
    }
</script>

<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Product Test</title>
</head>
<body></body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T03:44:17.823

尝试使用

```
Product saleProduct = new Product("Kitchen Garbage", "49.99M", "garbage.jpg"); 
```

为 49.99M 加上双引号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T05:37:38.350

试试这个 App_Code/Product.cs

```
public class Product
{
    public Product()
    {
        //
        // TODO: Add constructor logic here
        //
    }

    public string ProductName { get; set; }
    public string Property2 { get; set; }
    public string Image { get; set; }

    public Product(string _ProductName, string _Property2, string _Image)
    {
        this.ProductName = _ProductName;
        this.Property2 = _Property2;
        this.Image = _Image;
    }

    public string GetHtml
    {
        get
        {
            StringBuilder sb = new StringBuilder();
            sb.Append("<table>");
            sb.Append(string.Format("<tr><td>{0}</td><td>{1}</td><td>{2}</td></tr>", this.ProductName, this.Property2, this.Image));
            sb.Append("<table>");
            return sb.ToString();

        }

    }

} 
```

这是 Default.aspx.cs 文件中的代码。

```
 protected void Page_Load(object sender, EventArgs e)
{

    Product saleProduct = new Product("Kitchen Garbage", "49.99M", "garbage.jpg");
    Response.Write(saleProduct.GetHtml);
} 
```

# database - Drupal 上的多数据库

> ID：10476384
> 
> 赞同：2
> 
> 时间：2012-05-07T03:39:26.073
> 
> 标签：database, drupal

我必须使用 Drupal 实现一个包含多站点的系统。（预计 1000 个站点） Drupal 允许我们使用多个数据库或一个带前缀的数据库。对于数千个站点，我可能会选择多个数据库而不是一个带前缀的数据库。并且所有数据库都具有相同的表结构。但问题是：有一些非常**频繁**的查询从所有站点（所有数据库）收集信息。例如：选择 20 个类别为鞋类的产品，并且从所有数据库中获得良好的投票率。我现在有 3 个解决方案：

1.  使用 for 循环选择数据库。这意味着 1000 次查询“从 db1.table1 中选择 *，其中类别 = 123 和投票 = 10”；然后选择匹配的产品。我认为这在性能上会更差，因为如果所有数据库中有很多行，就会使用很多内存。
2.  使用 Select * FROM db1.table1 .... UNION SELECT * FROM db2.table1 .... 我认为这也很糟糕。因为mysql会先从db1中选择，如果20个产品足够多，mysql就会停止查找。
3.  每当插入所有数据库时，我们都会插入一个带有站点标志的非常大的数据库。因此，我们可以使用一个简单的查询从这个非常大的数据库中进行选择查询：“SELECT * FROM largeDB.table WHERE category=123 and vote=10”。

请给我更多的建议。非常感谢。PS：当我有 1000 个相同的数据库时，请告诉我更多关于数据库维护的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:13:52.187

我只是想确保您了解 Drupal 开箱即用的多站点功能？您所要做的就是在站点文件夹中创建一个新文件夹，然后创建一个符号链接和/或将其添加到sites.php（取决于服务器可能会或可能不会工作）。

抱歉，如果您已经知道这一点，想确保您不会自定义解决方案，如果这对您有用。它可以在单个 Drupal 安装上很好地处理具有自己数据库的多个站点。不幸的是，我无法帮助来自单个站点的多个数据库查询，过去我只是通过手动 PHP 查询来完成的。

# cocoa - 综合属性和 ivar 错误

> ID：10476385
> 
> 赞同：4
> 
> 时间：2012-05-07T03:39:44.587
> 
> 标签：cocoa, compiler-construction, properties, ivar, synthesize

我一直在“调试 X86-64”模式（Xcode 3.6）下构建我的程序，并且一切正常。但是，我只是尝试切换到“Release X86-64”模式，并且在编译时收到我的每个属性的以下错误：

```
Synthesized property 'x' must either be named the same as a compatible ivar or must
explicitly name an ivar. 
```

其中“x”是我的属性之一，第一个是“公司”（我收到了 51 个此类错误。）。在我的 .h 接口文件中，我以这种方式列出了这些项目：

```
@property (copy) NSString   *company,
                        *address1,
                        *address2,
                        *city,
                        *usState,
                        *zip,
                        *phone,
                        *fax,
                        *email,
                        *web; // etc, etc. 
```

在我的 .M 实现文件中，我将它们合成为：

```
@synthesize company,
        address1,
        address2,
        city,
        usState,
        zip,
        phone,
        fax,
        email,
        web; // etc, etc. 
```

我的理解是，实例变量是为这些属性自动创建的……事实上，它们似乎工作得很好，直到我尝试在“发布”模式下编译。

我在书中找不到任何我必须解释的东西。我做错了什么，或者更具体地说，我应该为“发布”编译修复这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-21T00:48:24.570

还有另一个快速的解决方案：也在委托定义中添加这些属性

```
 @interface YourAppDelegate : NSObject <NSApplicationDelegate> {
      NSTextField * company;
      NSSlider * company;
         ...
     }

    @property (copy) NSString   *company,
                                *address1,
                                ... ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:41:02.127

我相信我已经在这里回答了我自己的问题。我做了两件事来纠正这些错误：

首先，我在接口文件中添加了实例变量声明。其次，我将@Synthesize 指令更改为：

```
@synthesize company = company;
@synthesize address1 = address1;
etc... 
```

这已经修复了所有错误，并且在构建和发布模式下都可以正确编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-02T19:01:42.493

如果您只想发布，但不想为“旧”运行时限制而烦恼，请在构建设置中禁用 32 位架构。（实际上，“新”运行时最终得到的，是自 1991 年以来在 IBM SOM 中实现的，所以“旧”和“新”在 Objective-C 运行时是非常相关的，但那是另一回事了。）

# regex - 正则表达式模式 findall 和搜索给出不同的原因，尽管模式相同

> ID：10476387
> 
> 赞同：0
> 
> 时间：2012-05-07T03:40:04.213
> 
> 标签：regex, python-2.7

我有一串模式 {{Start date|2005|8|29}} 现在我想将 2005,8, 29 提取为三个单独的元素。因此我使用的正则表达式： re.findall('([0-9])+',str) 这给了我 5,8 和 9 而不是 2005, 8, 29 当我尝试搜索方法 re.search 时使用相同的模式('([0-9])+',str).group() 然后我得到第一个元素为 2005。为什么这两种方法的输出之间存在差异。什么时候应该是我当前日期模式的正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T03:44:54.507

长话短说：你的意思是`'([0-9]+)'`，不是`'([0-9])+'`。

详细信息：每对括号确定一个组。如果在一次匹配尝试中多次捕获该组，则仅报告最后一次捕获。

特别是，当您针对字符串调用此 re 时，它`"2005"`​​在第一轮匹配所有的，因为`([0-9])`部分匹配`'2'`, then `'0'`, then `'0'`, then `'5'`, 在它无法再匹配之前。所以它匹配了所有的`"2005"`，但组本身只报告了该子表达式的最后一个匹配项：`'5'`。

相比之下，后来您尝试`re.search`使用 group 方法。group 方法返回与*整个正则表达式*匹配的子字符串，[而不是第一个组](http://docs.python.org/library/re.html#re.MatchObject.group)。所以它返回了所有的`"2005"`. 试着打电话`.group(1)`来看看有什么不同。

# mysql - 使用 Inner Join 确定表中特定记录和相关事件之间的间隔

> ID：10476388
> 
> 赞同：0
> 
> 时间：2012-05-07T03:40:11.937
> 
> 标签：mysql, sql, gaps-and-islands

我有一个简单的表，用于记录针对特定访问的事件：

```
Describe Histories;
    +------------------+
    | Field            |
    +------------------+
    | HistoryId        |
    | VisitId          |
    | Location         |
    | Event            |
    | EventTime        |
    +------------------+ 
```

个人与访问 (VisitId) 相关联。对于每次访问，一个人可能有多个历史记录。事件可以是入学、转学或出院。

我正在尝试编写一个查询来计算每个人在每个位置的持续时间。请注意，他们可能会在每次访问中多次访问某个位置。个人通过入场或转移事件进入位置并通过出院或转移离开。

如果个人进入地点“A”，他们的入院或转学记录将列出地点“A”，但是如果他们转出，他们的转出（或出院）将列出另一个地点，例如“B”。

因此，我必须找到转移到位置“A”和随后（及时）转移到位置“B”之间的时间间隔。不评估内部位置转移。

我知道该解决方案可能基于 INNER JOIN，但是我不知道如何选择与最近的“输入”转移相对应的转移“输出”记录。

我想这相当复杂——我希望我的解释已经足够清楚了。

非常感谢任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T03:56:19.967

假设转移或放电是一个独特的事件，你可以这样写

```
SELECT
   b.EventTime - a.EventTime        
FROM
   Histories a
   INNER JOIN Histories b
   ON a.VisitID = b.VisitID
WHERE
   a.event = 'Admission'
   and
   b.event in ('Transfer', 'Discharge') 
```

如果您对上次转移或出院感兴趣，您会写

```
SELECT
   b.EventTime - a.EventTime        
FROM
   Histories a
   INNER JOIN  Histories b
    ON a.VisitID = b.VisitID

   INNER JOIN 
   (SELECT
         VisitId, 
         MAX(HistoryID) HistoryID
    FROM Histories 
    WHERE 
       b.event in ('Transfer', 'Discharge')
    GROUP BY 
       VisitId) maxHistory
   ON b.HistoryID = maxHistoryId.HistoryId

WHERE
   a.event = 'Admission' 
```

但是，如果访问可能导致多次访问，因为 Andriy M 提到您有间隙和岛屿问题（特别是岛屿）

在这种情况下，您需要以下内容

```
SELECT  
       a.VisitId,
       a.Event a_Event, 
       a.Event b_Event, 
       a.EventTime a_EventTime,
       b.EventTime b_EventTime,
       b_EventTime - a_EventTime

FROM   histories a 
       INNER JOIN histories B 
         ON a.visitID = b.visitID 
            AND a.EventTime < b.eventTime 
       INNER JOIN (SELECT a.VisitId, 
                          a.EventTime      a_EventTime, 
                          Min(b.EventTime) b_EventTime 
                   FROM   histories a 
                          INNER JOIN histories B 
                            ON a.visitID = b.visitID 
                               AND a.EventTime < b.eventTime 
                   GROUP  BY a_EventTime, 
                             a.VisitId) MinTime 
         ON a.VisitID = MinTime.VisitID 
            AND a.EventTime = a_EventTime 
            AND b.EventTime = b_EventTime 
```

[演示](http://sqlfiddle.com/#!2/39c4f/2)

使用以下示例数据

```
CREATE TABLE Histories 
    (
     HistoryId int auto_increment primary key, 
     VisitId int,
     Location varchar(20),
     Event varchar(20), 
     EventTime datetime
    );

INSERT INTO Histories
(VisitId, Location, Event, EventTime)
VALUES
(1, 'A', 'Admission', '2012-01-01'),
(1, 'A', 'Discharge', '2012-01-03'),
(2, 'B', 'Admission', '2012-01-02'),
(2, 'C', 'Transfer', '2012-01-05'),
(2, 'C', 'Discharge', '2012-01-06'),
(3, 'D', 'Admission', '2012-01-06'),
(3, 'E', 'Transfer', '2012-01-07'),
(3, 'F', 'Transfer', '2012-01-08'),
(3, 'F', 'Discharge', '2012-01-10'); 
```

你得到以下结果

```
VISITID    A_EVENT   B_EVENT    A_EVENTTIME                     B_EVENTTIME                     B_EVENTTIME - A_EVENTTIME
1          Admission Discharge  January, 01 2012 00:00:00-0800  January, 03 2012 00:00:00-0800  2000000
2          Admission Transfer   January, 02 2012 00:00:00-0800  January, 05 2012 00:00:00-0800  3000000
2          Transfer  Discharge  January, 05 2012 00:00:00-0800  January, 06 2012 00:00:00-0800  1000000
3          Admission Transfer   January, 06 2012 00:00:00-0800  January, 07 2012 00:00:00-0800  1000000
3          Transfer  Transfer   January, 07 2012 00:00:00-0800  January, 08 2012 00:00:00-0800  1000000
3          Transfer  Discharge  January, 08 2012 00:00:00-0800  January, 10 2012 00:00:00-0800  2000000 
```

笔记：

*   这假设您不关心尚未有相应出院/转学的入学/转学。
*   如果您知道在输入记录后 eventTime 不会改变，您可以使用 historyID 而不是 eventtime 来确定事件的顺序。
*   您知道如何以您喜欢的格式获取事件时差

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T03:57:01.317

这对你有什么作用？

```
SELECT 
    h1.HistoryId, 
    h1.VisitId, 
    h1.Event AS InitialEvent, 
    h2.Event AS FinalEvent, 
    h1.Location AS StartLocation,
    h2.Location AS EndLocation,
    IF(h2.HistoryId, UNIX_TIMESTAMP(h2.EventTime) - UNIX_TIMESTAMP(h1.EventTime), NULL) AS transfer_duration_seconds
FROM Histories h1 
LEFT JOIN Histories h2 ON h1.VisitId = h2.VisitId AND h1.Location != h2.location AND h2\. EventTime > h1\. EventTime
GROUP BY h1.VisitId 
```

# css - div内图像的CSS垂直对齐

> ID：10476391
> 
> 赞同：0
> 
> 时间：2012-05-07T03:40:57.647
> 
> 标签：css, vertical-alignment

我有这个 div 并且 div 里面是一个图像，我想要做的是将图像垂直对齐到中间居中，我尝试的任何方法似乎都不起作用......

```
<div style=" height: 200px; vertical-align: middle; width: 225px;">
<img width="225" src="upload/home5.jpg">
</div> 
```

我也尝试过`vertical-align:middle;`在图像中添加一个，但这没有用。

有人有什么想法吗？

我忘了提到我正在使用一些 jQuery 代码，它使我的 div`position:absolute;`

这是我的 div 在通过 Jquery 后的样子

`<div style="position: absolute; top: 0px; left: 0px; display: block; z-index: 4; opacity: 1; width: 225px; height: 200px;">`

这是图像的css

```
img {    
    background-color: #eee;
    margin: auto;
    display:block;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T03:43:32.313

您可以在 div 上使用 display: table-cell 。这允许垂直对齐属性起作用。不支持IE7。如果您需要，还有其他解决方案。

[http://jsfiddle.net/5HzpM/](http://jsfiddle.net/5HzpM/)

```
div { border: 1px solid gray; display: table-cell;  }
img { vertical-align:middle; } 
```

# iphone - UISegment 控件背景图片用户更改

> ID：10476394
> 
> 赞同：1
> 
> 时间：2012-05-07T03:41:17.850
> 
> 标签：iphone, ios, xcode

我希望我的应用程序具有可以在用户按下 UISegmented 控件中的段时更改图像的设置，但是，我只知道在导航栏中显示它。我将如何以一种设置特定视图的方式实现它，当用户按下一个段时，当按下完成时，它将恢复为具有该背景图像的新视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:04:46.253

试试这行代码。

```
 NSArray *ary=[sgmntControl subviews];
 NSInteger intCount=0;
 for (id seg in ary) 
  for (id imageview in [seg subviews]) 
 if ([imageview isKindOfClass:[UIImageView class]])
  {
   if(intCount==1)
    {
    [imageview setimage:[UIImage imagenamed:@""]; 

    }
    else 
    {
   [imageview setimage:[UIImage imagenamed:@""]; 

    }

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:45:00.817

您可以像这样更改分段控件的图像 UISegmentedControl *segment;

```
[segment setImage:UIImage  forSegmentAtIndex:segmentIndex]; 
```

或者

```
[segment setBackgroundImage:UIImage  forState:ControlState barMetrics:UIBarMetrics]; 
```

**编辑：**

您可以尝试将值传递给 newViewController

```
- (IBAction)didChangeSegmentControl:(UISegmentedControl *)control {
   newViewController = [[NewViewController alloc] initWithNibName:@"NewViewController" bundle:nil];
newViewController. selectedIndex =control.selectedSegmentIndex;
[self.navigationController pushViewController: newViewController animated:NO];    
} 
```

在此之前，您必须在 newViewController 中设置一个属性

```
@interface NewViewController : UIViewController
{
NSInteger selectedIndex;
}

@property(nonatomic)NSInteger selectedIndex;

@end 
```

并在实施中

```
@implementation NewViewController

@synthesize selectedIndex;
//your codes
@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T05:10:10.837

```
 One of the solution is you can add imageView under UISegmented controller with same size , set alpha for UISegmented 0.01 and change the imageview image in UISegmented action method.like below

self.imageViewSegment.image = [UIImage imageNamed:[NSString stringWithFormat:@"segment%d.png",self.segmentedControl.selectedSegmentIndex]];
//here your image names like segment0.png,segment1.png,segment2.png..etc 
```

# c# - LINQ 中的不同元素

> ID：10476401
> 
> 赞同：1
> 
> 时间：2012-05-07T03:42:00.737
> 
> 标签：c#, linq

我有一种情况，我为客户显示产品列表。所以，有两种产品。因此，如果客户注册了两种产品，那么这两种产品都会显示。所以，我需要显示不同的行。我这样做了：

```
 var queryProducts = DbContext.CustomerProducts.Where(p => p.Customers_Id ==  
                                            customerID).ToList().Select(r => new
                           {
                               r.Id,
                               r.Products_Id,
                               ProductName = r.Product.Name,
                               ShortName = r.Product.ShortName,
                               Description = r.Product.Description,
                               IsActive = r.Product.IsActive

                           }).Distinct(); 
```

在此，customerID 是我从下拉列表中获得的值。但是，它仍然显示同一行两次。那么，你能告诉我如何只显示不同的记录吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T03:51:59.757

最可能的原因可能是默认情况下不带参数调用 Distinct 时会比较所有公共属性是否相等。我怀疑您的 ID 将是唯一的。因此 Distinct 不适合你。

你可以尝试类似的东西

`myCustomerList.GroupBy(product => product.Products_Id).Select(grp => grp.First());`

我发现这是答案

1.  [如何通过 Lambda 或 LINQ 从列表中获取不同的实例](https://stackoverflow.com/questions/1183403/how-to-get-distinct-instance-from-a-list-by-lambda-or-linq)
2.  [与 lambda 不同（）？](https://stackoverflow.com/questions/1300088/distinct-with-lambda)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T03:48:25.370

您可以编写[IEqualityComparer<CustomerProduct>](http://msdn.microsoft.com/en-us/library/ms132151.aspx)的实现。一旦你有了它，那么你可以使用它：

```
DbContext.CustomerProducts.Where(p => p.Customers_Id == customerId)
    .ToList()
    .Distinct(new MyComparer())
    .Select(r => new {
    // etc.

public class MyComparer : IEqualityComparer<CustomerProduct>
{
    // implement **Equals** and **GetHashCode** here
} 
```

请注意，使用此匿名比较器可能更适合您，但它会比较匿名类型中的所有属性，而不仅仅是问题中指定的客户 ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T03:48:33.433

看看[LINQ Select Distinct with Anonymous Types](https://stackoverflow.com/questions/543482/linq-select-distinct-with-anonymous-types)

我猜 r.ID 在两个相同的产品之间是不同的，但是你有相同的 Products_Id？

# jquery - jqGrd 超链接或 showlink

> ID：10476402
> 
> 赞同：1
> 
> 时间：2012-05-07T03:42:31.423
> 
> 标签：jquery, jqgrid, backbone.js

我正在使用 jqGrid 并想知道实现它的最佳解决方案。我正在使用骨干网和 jQuery。以下是所需的功能

1.  带有超链接的列。它将是编辑/删除/自定义超链接。
2.  在点击链接时，基本上它不应该导航只是调用一些函数。例如，在删除时它只会删除该行。
3.  超链接列的数量是动态的。

超链接可以通过两种方式完成

1) 使用`showlink`格式化程序或客户格式化程序。问题`showlink`是我们只能调用*全局*函数，而且我`click`不习惯在函数中编写我的事件逻辑`loadComplete`。因为我的网格是可重复使用的并且不知道我将拥有超链接的列数。所以我正在使用这样的自定义格式化程序

```
deleteLinkFmatter : function(cellvalue, options, rowObject)
{
   return '<a onclick="deleteRow(' + options.rowId + ')">'+ cellvalue + '</a>';
} 
```

上面代码的问题是，`backbone.js`按其说法，`deleteRow`未找到。我在这个网站上发现了不同的方法，但都是徒劳的。任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T09:43:07.047

我同意预定义的格式化程序[showlink](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:predefined_formatter#showlink_example)是面向超链接的，如果您需要在单击链接时启动自定义 JavaScript 函数，这会让人不舒服。不过，[在答案](https://stackoverflow.com/a/3608421/315935)中，您会找到解释如何`showlink`在案例中使用的代码。

如果您想在单独的列中添加编辑/删除/自定义超链接，您可以轻松使用我[在此处](https://stackoverflow.com/a/9048483/315935)`dynamicLink`编写和描述的内容。你是对的，如果你写你在属性中调用的函数必须在全局级别上定义。您不应该忘记，可以使用一些通用的全局命名空间，例如并定义许多可以从命名空间调用的函数。例如，您可以从[此处](https://github.com/OlegKi/jqGrid-plugins)下载的内容可以与. 例如`onclick``<a>``jQuery``jQuery``dynamicLink``showlink`

```
{ name: 'editlink', formatter: 'dynamicLink',
    formatoptions: {
        onClick: function (rowid, iRow, iCol, cellText, e) {
            // any your code
        }
    }} 
```

在实现中，`$.fn.fmatter.dynamicLink.onClick`来自 的方法`dynamicLink`将在`onclick`属性中使用。

如果您更喜欢使用[不显眼的 JavaScript 样式](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)，我建议您阅读以下答案：[this](https://stackoverflow.com/a/4519333/315935)、[this](https://stackoverflow.com/a/5017528/315935)和[this](https://stackoverflow.com/a/7120678/315935)以及相应的演示[this](http://www.ok-soft-gmbh.com/jqGrid/CustomLink.htm)、[this](http://www.ok-soft-gmbh.com/jqGrid/UnobtrusiveLinks1.htm)和[this](http://www.ok-soft-gmbh.com/jqGrid/UnobtrusiveLinks3.htm)。或者，您可以使用[doInEachRow](https://github.com/OlegKi/jqGrid-plugins/blob/master/jQuery.jqGrid.doInEachRow.js)简化一点枚举

```
loadComplete: function() {
    var iCol = getColumnIndexByName.call(this, 'editlink'); // get index of the column

    $(this).jqGrid('doInEachRow', function (row, rowId, localRowData) {
        $(row.cells[iCol]).children("a").click(function (e) {
            e.preventDefault();
            // any your code here
        });
    });
} 
```

在哪里

```
var getColumnIndexByName = function (columnName) {
        var $this = $(this), cm = $this.jqGrid('getGridParam', 'colModel'), i,
            l = cm.length;

        for (i = 0; i < l; i++) {
            if (cm[i].name === columnName) {
                return i; // return the index
            }
        }
        return -1;
    }; 
```

如果您`<a>`在一列中放置许多超链接，您可以轻松修改上述代码。在这种情况下，您可以只替换`.children("a")`部分`$(row.cells[iCol]).children("a").click(function (e) {`to`.children("a").eq(0)`或`.children("a").eq(1)`and`.children("a").eq(2)`来定义与第一个、第二个或第三个超链接的绑定（“编辑”/“添加”/“删除”）。您最好保存`$(row.cells[iCol]).children("a")`在变量中并`.eq(1)`与变量一起使用。

另一种方法是不定义任何`<a>`一个全部并使用例如`<span>`（带有下划线装饰或带有背景图像）。如果您不需要抑制默认超链接操作，并且单击事件将冒泡，直到`<table>`定义网格体的元素为止。所以你可以使用`onCellSelect`or`beforeSelectRow`事件来绑定你的 JavaScript 代码。事件的`Event`（`e`参数）可以用来获取点击的行和列的所有信息。`var $cell = $(e.target).closest('td')`将为您提供单击的单元格，`var $row = $cell.closest('tr.jqgrow')`将为您提供单击的行，`$row.attr('id')`将成为 rowid 并为`var iCol = $.jgrid.getCellIndex($cell[0])`您提供列索引。是被单击的`this.p.colModel[iCol].name`列的名称。你可以[在这里](https://stackoverflow.com/a/5305904/315935)阅读更多关于方式的信息。

你怎么能看到你有很多可以使用的选项。因此，您可以选择更符合您要求的方式。

# java - Android：选择微调器项目后动态添加按钮

> ID：10476409
> 
> 赞同：0
> 
> 时间：2012-05-07T03:44:19.610
> 
> 标签：java, android, button, spinner

让它工作起来有点艰难，这对我来说是一个理解的部分......

如果我有一个包含文本“[item] is [color]”的微调器项目，并且在选择它时，我希望它填充一个...... tablerow 或类似的东西（或只是一个相对布局）......按钮，会有两个按钮，[item] 和 [color]，一个在另一个上。

```
public void onItemSelected(AdapterView<?> parentview, View arg1, int position, long id) 
{

    final TableLayout t1 = (TableLayout)findViewById(R.id.button_items);
    final TableRow tr = new TableRow(t1.getContext());
ArrayList<String> words = Create_ArrayList(R.raw.titles); 
```

// Create_ArrayList 只是解析已知的单词，如 [item] 和 [color] 项目，并将它们放入一个数组中......以便稍后进行枚举。

```
String sentence = (String) spin.getSelectedItem();

    if(sentence.contains("[item]"))
    {
        String line = words.get(1);
        ArrayList<String> x = getParts(line); 
```

//arraylist 此时应该只是 [item] 和 [color] ...

```
 Toast.makeText(getBaseContext(), Integer.toString(x.size()), Toast.LENGTH_SHORT).show();
    for(int i = 0; i<x.size(); i++)
    {
              Toast.makeText(getBaseContext(), x.get(i), Toast.LENGTH_LONG).show();

            Button btn = new Button(tr.getContext());
       btn.setText(x.get(i));
       btn.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
       tr.addView(btn);
       t1.addView(tr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
    }   
}
} 
```

但我不断...

```
java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first 
```

并且按钮不显示......应用程序只是崩溃......进入一座山。

非常感谢您的帮助...谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:51:49.047

这是因为您将相同的按钮一遍又一遍地添加到同一个表格行中。你可以使用一系列按钮，

```
btns = new Button[]{button1, button2, etc...} 
```

然后说：

```
for(int i = 0; i < x.size() ; i++ ){
     btn[i] = new Button(tr.getContext());
     btn[i].setText(x.get(i));
     tr.addView(btn[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:10:26.720

在第一个代码块中

```
final TableLayout t1 = (TableLayout)findViewById(R.id.button_items); 
```

您已经拥有 t1 的视图，但在第三个代码块中您再次添加了视图

```
tr.addView(btn);
       t1.addView(tr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT)); 
```

这就是你例外的原因。

当一个视图已经被使用时（例如，你用 findViewById 得到它，不要在它上面使用 addView）。当您想要添加视图时，请将 addView 与 NEW 视图一起使用。您可以将其中几个新视图添加到一个视图中，但不能多次添加该视图。

这是我在其他帖子中发现的

# php - 为什么mysqli在bind_result之后停止？

> ID：10476411
> 
> 赞同：1
> 
> 时间：2012-05-07T03:44:55.173
> 
> 标签：php, mysqli

在我自己的机器上运行良好的东西在生产服务器上失败了。

下面的代码输出“ **24** ”和“ **Begin try branch** ”，就是这样。之后就停止了。在我自己的机器上，变量是绑定的，我可以继续使用`$recPhotos->fetch()`等。

问题出现在这里：

```
$recPhotos = GetPhotos($_SESSION['album_uid'], $getVipImages, $arrPaginationParams["currentPage"], $arrPaginationParams["photosPerPage"]);
try 
{   
    echo($recPhotos->affected_rows);  // Outputs '24'
    echo("Begin try branch");
    $recPhotos->bind_result($file_name, $is_vip);   
    echo("End try branch");
}
catch (Exception $e)
{
    echo 'Exception caught: ',  $e->getMessage(), "\n";
}
echo("Continue"); 
```

调用的函数如下：

```
// Get photos from database
function GetPhotos($album_uid, $getVipImages,$page, $rows)
{
    $objMySqli = GetDbConnection();
    $page = ($page - 1) * 24;

    if ($objMySqliQuery = $objMySqli->prepare("SELECT file_name, is_vip from album_pic where album_uid = ? AND is_vip = ? OR is_vip = 'N' order by is_vip DESC, file_name ASC LIMIT ?,? ;")) 
    {
        $objMySqliQuery->bind_param('ssss', $album_uid, $getVipImages, $page, $rows); 
        $objMySqliQuery->execute();
        $objMySqliQuery->store_result();    
        return $objMySqliQuery;
    }
    else 
    {
        // Error
        printf("Prepared Statement Error: %s\n", $objMySqli->error);
        return false;
    }   
} 
```

奇怪的是，如果我尝试在函数内部输出一些行**，**它可以工作（我得到 24 行，正如预期的那样）

```
// Get photos from database
function GetPhotos($album_uid, $getVipImages,$page, $rows)
{
    $objMySqli = GetDbConnection();
    $page = ($page - 1) * 24;

    if ($objMySqliQuery = $objMySqli->prepare("SELECT file_name, is_vip from album_pic where album_uid = ? AND is_vip = ? OR is_vip = 'N' order by is_vip DESC, file_name ASC LIMIT ?,? ;")) 
    {
        $objMySqliQuery->bind_param('ssss', $album_uid, $getVipImages, $page, $rows); 
        $objMySqliQuery->execute();

        $objMySqliQuery->bind_result($col1, $col2);
        while ($objMySqliQuery->fetch()) 
        {
            printf("%s %s\n", $col1, $col2); // This will be executed 24 times
        }               
    }
    else 
    {
        // Error
        printf("Prepared Statement Error: %s\n", $objMySqli->error);
        return false;
    }   
} 
```

任何想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:57:05.407

我猜你出错的地方是假设你从函数 GetPhotos() 返回后连接保持打开状态

基本上，您正在在线打开连接：

```
$objMySqli = GetDbConnection(); 
```

当函数返回时，对象 $objMySqli 超出范围。之后，允许 PHP 随时销毁对象（这也将关闭连接）。在您的机器上，它恰好保持连接足够长的时间以获取数据行。在生产机器（可用内存较少）上，垃圾收集器的运行速度要快得多。

你应该做的是：

1) 不要使用 store_result() ，因为将结果复制出来要高效得多，而不是仅仅为了保存数据而保持 SQL 连接打开。

2）在外层函数中打开连接，作为参数传入GetPhotos()函数。

此外，您应该明确地关闭连接，而不是让它被 PHP 垃圾收集器或脚本完成时关闭。

# php - 当用户点击超链接时 WordPress 更新 Post Meta

> ID：10476412
> 
> 赞同：0
> 
> 时间：2012-05-07T03:45:18.313
> 
> 标签：php, wordpress

当用户单击 WordPress 博客前端的链接时，我正在尝试更新帖子元键。我真正想要的是当用户点击链接时，dealexp_expired_status 键更新为“on”值。

任何想法如何实现？谢谢！

**更新：**这是我到目前为止的代码：

```
add_filter( 'the_content', 'my_the_content_filter', 20 );

function my_the_content_filter( $content ) {
$content = dealexp_add_exp_link() . $content;

// Returns the content.
return $content;
}

function dealexp_add_exp_link() {
$exp_url = plugins_url('/deal-expirator/includes/update.php');
?>
<a href="<?php echo $exp_url; ?>?update_key=1">Mark Expired</a>
<?php } 
```

在 update.php 文件中，我有：

```
<?php

if (isset($_GET["update_key"])) {
global $post;
update_post_meta($post->ID, 'dealexp_expired_status', 'on');
}

?> 
```

但是，单击链接时出现致命错误。有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:14:38.630

1.  使用新参数创建超链接。例如 index.php?update_key=1

2.  在需要的 php 文件中创建 php 块。

例如，如果您在 single.php 中执行此操作，则将此类代码粘贴到`while ( have_posts() )`块中：

```
<?php if (isset($_GET["update_key"])) {update_post_meta($post->ID, 'dealexp_expired_status', 'key_value');} ?> 
```

# backbone.js - 在诸如骨干网之类的库中划分前端和后端逻辑的启发式方法

> ID：10476413
> 
> 赞同：0
> 
> 时间：2012-05-07T03:45:31.983
> 
> 标签：backbone.js, heuristics

我是学习 MVC 的新手。

我想知道是否有启发式（非编程方式）来划分和决定前端而不是后端的逻辑，特别是在使用像backbone.js这样的前端库时。

也就是说，backbone.js 之类的库将数据与 DOM 元素分开，这对于创建复杂的客户端逻辑很有用，而这些逻辑可能曾经在服务器端执行。

提前感谢乔伊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T21:50:47.707

执行模型 - 视图 - 控制器的“经典”方式是将所有三个都放在服务器上。HTML 和一些 JS 的 View 层输出然后由浏览器渲染。

Rails 就是一个很好的例子。

“新酷”的方式是将浏览器作为主计算引擎，后端服务器`services`通过 API 提供。

在这种情况下，模型、视图和控制器软件都在客户端上运行（作为 Javascript 或咖啡脚本）。Backbone 通常是浏览器端解决方案的一部分，但它也有替代方案，例如 spin、angularJS 等。

在后端服务器上，您运行 dbms 和良好的 API 系统。在 Ruby/Rack 上构建了一些很好的框架。请参阅 Daniel Doubrovkine 在[code.dblock.org](http://code.dblock.org)上的帖子您在这里有很多选择。

**MVC 在客户端的优势**

*   为用户提供响应式用户界面
*   酷炫的 Ajaxy 单页效果
*   单页 webapp 可以为用户提供比常规网站更快的 UI
*   良好的架构，专门构建 iPhone/Android 应用程序的推动者
*   根据应用程序，可用于创建无需网络连接即可工作的独立 Web 应用程序。
*   这就是现在许多酷孩子正在做的事情

**缺点**

*   需要决定旧浏览器、IE 等的方法
*   使内容可用于搜索引擎可能很棘手。可能需要仅用于搜索引擎的影子网站
*   测试可能是一个挑战。但是请参阅包含可测试性重点的新库，例如 AngularJS
*   这种方法涉及更多的软件：编写和测试需要更长的时间。

**选择**

由你决定。决定取决于您的时间框架、资源、经验、需求等。没有必要使用骨干或类似的东西。这样做是一种权衡（见上文）。不使用它总是会更快/更容易，但没有它（或类似的）可能无法实现您的目标。

您可以仅使用 Rails 或带有附加库或其他 MVC 解决方案的 PHP 构建出色的 MVC 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T21:34:37.060

我认为您在非编程意义上使用启发式这个词对吗？即你用它来表示“经验法则”的意思？

根据经验：

*   您希望服务器出于 UX 和 SEO 的原因呈现初始页面加载。
*   出于同样的原因，您还可以让服务器呈现后续的 AJAX 部分页面加载。配置文件以查看哪个更快：让服务器通过网络渲染和传输额外数据（标记）与发送更简洁的有效负载（使用 JSON）并让客户端渲染它。需要权衡取舍，特别是如果您考虑到移动设备可能在客户端上的渲染速度会更慢，但是再次有移动设备的互联网连接速度较慢......
*   像任何客户端-服务器架构一样：您希望客户端执行需要客户端快速响应的操作，然后将一些异步操作发送到执行相同任务的服务器。

结论是模糊的，但真实的：这都是关于权衡的，你必须决定你的产品需要什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T10:00:34.560

我首先想到的两件事是安全和搜索..

*   您将始终希望限制服务器上的读/写访问。
*   在大多数情况下，您会希望搜索功能尽可能接近数据。

# android - 在 Android 中集中警报消息

> ID：10476414
> 
> 赞同：0
> 
> 时间：2012-05-07T03:45:36.367
> 
> 标签：android

我正在尝试使 AlertDialog 集中。我知道默认情况下它是集中的，但是当我应用一些主题和样式来使默认消息集中时，警报出现在窗口的顶部。我跟着这个教程...... [http://www.coderzheaven.com/2012/02/03/changeing-the-style-or-theme-of-default-alertdialog-in-android/](http://www.coderzheaven.com/2012/02/03/changing-the-style-or-theme-of-default-alertdialog-in-android/)

我们可以让默认警报的重要性成为中心吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T04:33:45.607

默认警报对话框的重心位于中心。您正在尝试通过应用样式和主题来制作自定义警报对话框，这就是您在屏幕顶部获得对话框的原因。这段代码可以帮助您构建一个默认对话框。

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage("Are you sure you want to exit?")
           .setCancelable(false)

           .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                    finish();
               }
           })
           .setNegativeButton("No", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
               }
           });

    AlertDialog alert = builder.create();
    alert.show(); 
```

# c# - 使用 C++ 在图像中标记兴趣点

> ID：10476416
> 
> 赞同：2
> 
> 时间：2012-05-07T03:45:44.663
> 
> 标签：c#, c++, image-processing, histogram, vision

我有一个像这样的位图图像

![在此处输入图像描述](../Images/701885f90c78588b7c9800113d4fa2f3.png) 我的要求是创建一个 GUI 来加载图像并更改图像上的对比度和其他内容，以及使用 C++ 或 C# 以银色标记特定区域的算法，如图所示。我是图像处理的新手，并且通过我的搜索我发现我可以使用图像的直方图来找到所需的区域。这些是步骤。

*   获取直方图
*   搜索强度差异
*   搜索换行符

有人可以建议我如何从这里开始。我可以为此使用 Opencv 还是可以使用任何其他有效的方法..？

笔记：

![在此处输入图像描述](../Images/02fff17b3e0ed399df01ba5c413a5d0b.png)这张图片有很多亮点，blob算法不成功。检索矩形对象的正确坐标的任何其他建议。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T11:10:11.703

OpenCV 应该可以工作。

1.  将您的输入图像转换为灰度。
2.  `adaptiveThreshold`将其转换为黑白
3.  [特征检测](http://docs.opencv.org/modules/features2d/doc/features2d.html)具有完整的 OpenCV 特征检测器列表；根据您要检测的确切功能选择一个。

例如，看看[`Simple Blob Detector`](http://docs.opencv.org/modules/features2d/doc/common_interfaces_of_feature_detectors.html#simpleblobdetector)其中列出了所需的基本步骤。您的银色矩形当然可以称为“简单斑点”（没有孔或其他硬位）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:43:34.287

如果你所有的照片都是这样，在我看来分割银色区域并找到它的中心并不复杂。基本上，您需要按以下顺序应用这些算法：

1.  我建议使用 Otsu 自适应阈值算法对图像进行二值化
2.  应用标记（blob）算法
3.  如果您有一些噪音问题，您可以在 blob 算法之前使用开放滤波器或中值
4.  如果你最终只有一个斑点（我猜是最大的区域），请使用矩算法找到它的质心。然后你有你正在寻找的X，Y坐标

这些算法都是经典的图像处理，我想那时不难找到。无论如何，我可能已经用 C# 实现了它们，我可以稍后在这里发布，以防你认为它们解决了你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T03:48:38.693

可能是对 Directshow 的研究，Microsoft 的多媒体框架将帮助您完成任务。

# visual-studio - 如何在 Visual Studio 中检测右键单击事件？

> ID：10476420
> 
> 赞同：4
> 
> 时间：2012-05-07T03:46:50.860
> 
> 标签：visual-studio, events, mouseevent, right-click

好的，所以这应该是一个简单的问题，但是我在编程方面还很陌生，而且我一生都无法弄清楚如何使用右键单击事件。我要做的就是调用一个事件，当我右键单击图片框时会执行某些操作。它不在事件工具栏中，我觉得自己像个真正的白痴。任何帮助将不胜感激。我正在运行 2010 版本。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-07T03:52:58.343

您可以使用 mouse_down 事件并检查它是否是右键单击

```
Private Sub PictureBox1_MouseDown(Byval sender As Object, Byval e As System.Windows.Forms.MouseEventArgs) Handles PictureBox1.MouseDown

    If e.Button = MouseButtons.Right Then
        MsgBox("Right Button Clicked")
    End If

End Sub 
```

参考这个[http://www.homeandlearn.co.uk/net/nets10p2.html](http://www.homeandlearn.co.uk/net/nets10p2.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-21T03:09:36.097

对于那些初学者 C# 程序员，这是一个用 C# 编写的示例，供您参考。

```
private void PictureBox1_MouseDown(object sender, MouseEventArgs e)
{
    if(e.Button == MouseButtons.Right)
    {
        MessageBox.Show("Right Click");
    }
} 
```

# c# - 电子邮件模板基础，使用 C#

> ID：10476421
> 
> 赞同：0
> 
> 时间：2012-05-07T03:47:02.127
> 
> 标签：c#, email, system.net.mail

我想创建自己的电子邮件模板而不必使用第三方软件，我只想为自己清理一些基础知识:)
首先，所有电子邮件模板都归结为几乎是带有内联 CSS 的 HTML 正文吗？因此，使用 C# 发送模板化电子邮件将类似于：

```
SmtpClient smtpClient = new SmtpClient("smtphost");
MailMessage msg = new MailMessage();
msg.To.Add("toaddress6@place.com");
msg.Subject = "A TEMPLATE";
msg.Body = "<body> This is where the html goes O.o </body>";
msg.From = new MailAddress("fromaddress@anotherplace.com");
msg.IsBodyHtml = true;
smtpClient.Send(msg); 
```

其次，使用模板发送图像我假设它们要么作为附件添加，要么通过长地址链接到服务器上的图像位置，类似于网页？并显示在html中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:32:37.263

我以前没有尝试过，但看看[`MailDefinition`类](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.maildefinition.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T05:08:36.653

以下是我在创建电子邮件模板系统时遇到的一些解决方案：

*   我所知道的框架中没有内置的模板系统。我建立了一个过去运行良好的系统。现在我做事很简单。我会将 {year} 之类的项目替换为当前年份，{year2} 替换为 2 位数年份或 {year:2,} 这更多的工作，但会导致您的任何变量都能够在没有的`SubString()`情况下进行内联初始构建之后的许多工作。（你可以做 {var:name:upper}, :lower, :titlecase; 你可以传入一个对象并使用简单的反射技术来读取所有公共属性并进行自动替换......天空是极限！）重要的是给自己很大的回旋余地，不过分违反 YAGNI 原则。当您构建这样的系统时...

*   **从你想如何结束的例子开始**。我最终写了一些类似的东西`<html><body><h1><font face="arial">Hello, <b>{var:firstname}!</b> It's {hour} {ampm} here...</font></h1> ...</html>`来进行替换并吐出最终副本。然后，使用正则表达式检查所有内容都已替换，这样您就不会发送出去`Hi, null null! It's nice to see you at {hour} {ampm}!`，并使您成为收件人的笑柄。认真思考您希望如何插入内容。你可以用你自己的模板系统做很多疯狂的事情，无论好坏，所以 TEST TEST TEST。单元测试对于回归测试很方便。请记住，一旦您上线，您就不想犯错误，因为您将它们发送给客户，并且在客户看到它之前无法更改它，就像您对网站所做的那样。

*   大多数 HTML 时事通讯都是 HTML 格式，使用内联 CSS 或*(gasp!)* `TABLE` s 和`FONT`标签进行布局。这背后的原因是因为大多数电子邮件 HTML 渲染引擎都停留在过去。适用于 Thunderbird 的东西可能适用于 Mozilla，但在 GMail 或 Hotmail 中看起来像垃圾。我的建议是使用尽可能少的内联 CSS，如果这样做，请使用一些电子邮件客户端进行测试，包括基于 Web 和非基于 Web 的客户端，以确保在每个客户端中都能获得所需的效果。使用`TABLE`s 进行布局，没有花哨的 CSS3 东西。KISS 规则在这里适用，是的，它是过去使用旧式 HTML 的一次爆炸。在编写完可怕的代码、使用表格进行布局等之后，您可能会觉得需要洗个澡，但这就是我们需要用我们所得到的东西做的事情。

也请阅读：http: [//www.hongkiat.com/blog/design-perfect-newsletter/](http://www.hongkiat.com/blog/design-perfect-newsletter/)

# git - 我在 Git 终端中使用什么命令将目录上传到谷歌代码？

> ID：10476433
> 
> 赞同：1
> 
> 时间：2012-05-07T03:49:42.820
> 
> 标签：git

我想将我的网络目录上传到项目的谷歌代码。

我用来将目录上传到谷歌代码的终端命令是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:52:40.517

只需将您的 ggogle 代码存储库作为远程添加到您当前的本地 Git 存储库：

```
git remote add googlecode https://code.google.com/p/myprojectname 
git push googlecode master
git push googlecode --all 
```

如果 google 代码是您唯一的[上游](https://stackoverflow.com/questions/2739376/definition-of-downstream-and-upstream/2749166#2749166)存储库，则可以[将该远程命名`origin`](https://stackoverflow.com/questions/2570899/is-the-git-remote-name-origin-only-applied-to-one-created-by-git-clone/2570916#2570916)为`googlecode`.

确保您的本地配置（`git config`或 in `<your local repo>/.git/config`）包含：

```
["origin"] 
fetch = +refs/heads/:refs/remotes/origin/ 
url = https://code.google.com/p/projectname/ 
```

（或者`["googlecode"]`如果您选择该远程名称）

确保您在用户主目录中创建了`~/.netrc`(unix) 或`%HOME%/_netrc`(windows，这意味着您需要定义`HOME`) 文件，其中包含以下内容：

```
machine code.google.com 
login <login> 
password <login> 
```

并尽可能使用最新的 git 版本（如果您在 Windows 上，例如 msysgit1.7.10）

# javascript - 带有测试驱动开发的 Javascript 编码指南

> ID：10476434
> 
> 赞同：1
> 
> 时间：2012-05-07T03:49:48.727
> 
> 标签：javascript, tdd, javascript-framework

我正在从服务器端开发（java、php）迁移到客户端——HTML、CSS、javascript。

虽然我在技术上（大部分）了解 javascript 的工作原理，但我还没有找到创建应用程序的良好指南 - 特别是关于如何组织函数和对象以及为它们设置可靠的测试框架。

我目前已经完成了 Ruby on Rails 教程 [http://ruby.railstutorial.org/](http://ruby.railstutorial.org/)的一半 ，这非常好 - 我现在有信心理解在应用程序中安排所有代码的标准结构，并将良好的测试实践设置为我去。此外，与 heroku 和 git 的集成构成了一个真正切实的现实世界示例，使您全面了解如何开发和部署 Rails 应用程序。

任何人都可以推荐类似的 JS/AJAX 开发指南吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T03:56:16.077

编写 JavaScript 的一种好方法是以[模块化方式](http://addyosmani.com/writing-modular-js/)进行。对于依赖加载，您还需要像[RequireJS](http://requirejs.org/)这样的模块加载器。至于结构，有很多框架，我建议你试试[BackboneJS 。](http://documentcloud.github.com/backbone/)您还希望使您的[JS 可扩展](http://www.youtube.com/watch?v=vXjVFPosQHw)，这样您就不必担心扩展。这里还有更多关于它的[视频。](http://addyosmani.com/scalable-javascript-videos/)

JS中有很多框架可供选择。对它们进行全部测试并创建一个让您感觉舒适的堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T08:47:06.423

我认为您不会在 Ruby on Rails 上找到类似的关于 Javascript 的教程，因为 Rails 是一个框架，而 Javascript 只是一种语言，围绕它构建了数百个不同的框架。我不知道你愿意开发什么样的应用程序，但是 Backbone.js 是一个用于前端开发的 MVC 框架，你可以搜索一些关于它的教程。

但是，如果您刚开始使用 JS，您可能想先学习 JS 的基础知识。好的来源是前。MDN JS 指南： [https ://developer.mozilla.org/en/JavaScript/Guide](https://developer.mozilla.org/en/JavaScript/Guide)

然后，您可能想查看有关 JS 设计模式的指南，以了解如何构建代码： http: [//www.addyosmani.com/resources/essentialjsdesignpatterns/book/#designpatternsjavascript](http://www.addyosmani.com/resources/essentialjsdesignpatterns/book/#designpatternsjavascript)

希望这些会有所帮助！

# android - Android：将文件保存到外部存储器

> ID：10476436
> 
> 赞同：0
> 
> 时间：2012-05-07T03:51:03.977
> 
> 标签：android

我的应用程序正在下载一些音频文件，由于文件的大小，如果我可以将它们存储在用户的外部存储中会很好。但是，我需要它们对我的应用程序保持私有。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:10:53.357

不是字面意思。

你可以加密它们，但你必须自己处理游戏，以便解密它们（或者玩一些游戏，比如从本地“服务器”流式传输它们，在读取时解密它们）。

还要意识到，即使您的 .apk 本身中的内容也可以在大多数设备上访问（您需要小心混淆加密密钥），并且您的应用程序的私有存储文件夹的内容在众多根设备上都是可读的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:08:52.583

一个简单的建议是加密您的文件，然后将其存储在外部存储器中。这将保证数据的安全。其他应用程序将无法访问它。为此，您需要将文件转换为 ByteStream。然后使用加密功能对其进行加密并存储到外部存储器。将文件的扩展名更改为一些用户定义的扩展名，如 myExt 并将所有文件存储在某个文件夹中。当您想在应用程序中使用这些文件时，请解密并使用它。加密密钥将帮助您安全地保护数据。

据我所知，这将阻止其他应用程序访问您的信息。

# java - Java - “if”语句的问题

> ID：10476437
> 
> 赞同：-2
> 
> 时间：2012-05-07T03:51:20.930
> 
> 标签：java, if-statement

我必须在某处出现某种语法错误，因为两者`correctip`和`loginip`都相等，但我的代码仍然说它们不相等。

```
 if(correctip != loginip){
            event.disallow(null, "Access is denied to user " + name + ". If you believe this is in error, contact an admin.");
            System.out.println(loginip);
            System.out.println(correctip);
            System.out.println("[Denied] HIGHRISKUSER " + name + " denied login. IP Att: " + loginip + " | IP Cor: " + correctip);
        }else{
            System.out.println("[Allowed] HIGHRISKUSER " + name + " allowed login. IP Att: " + loginip + " | IP Cor: " + correctip);
        } 
```

两者`correctip`和`loginip`完全相等。还有其他可能导致问题的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T03:53:34.327

`correctip`并且`loginip`可能是`String`。在这种情况下，您应该使用`equals`比较器：

```
if(correctip != null && correctip.equals(loginip)) {
    //your logic goes here...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T03:54:34.220

如果两个变量都是字符串，则需要使用`correctip.equals(loginip)`或`correctip.equalsIgnoreCase(loginip)`比较它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T04:09:17.173

loginip和correctip的类型是什么？

根据您的说法，我假设类型不应该是原始的（例如：int、long、short 等）。相反，它将是一个对象（可能是字符串）。所以loginip或者correctip其实就是这两个对象的引用。

等号仅保证其引用地址的相等性。要比较两个对象，您应该使用方法`equals`或`equalsIgnoreCase`代替`=`。

# java - 只知道我当前 JSESSIONID 的人可以模拟/劫持我的会话（Tomcat 7/Glassfish 3.2））吗？

> ID：10476439
> 
> 赞同：8
> 
> 时间：2012-05-07T03:51:33.247
> 
> 标签：java, security, servlets, jsessionid, session-hijacking

我正在寻找一个简单的英语“傻瓜”解释 JSESSIONID 如何从安全方面工作

*   只知道我当前 JSESSIONID 的人可以模拟/劫持我的会话吗？
*   在什么情况下 JSESSIONID 将成为 URL 的一部分，这个[OWASP #2 安全风险](https://www.owasp.org/index.php/Top_10_2010-A3)（场景 #1）是否仍然与最新版本的 Tomcat / Glassfish 相关，如果是，如何“关闭/打开”以防止它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-07T04:07:04.620

> 问：只知道我当前 JSESSIONID 的人可以冒充/劫持我的会话吗？

答：是的。

这就是为什么您的网站小心使用 cookie 很重要的原因。事实上，如果您担心数据包嗅探，这意味着您应该只在通过 HTTPS 连接¹发出请求时发送会话 cookie 。设置“httpOnly”标志可以通过阻止客户端 javascript 等使用 cookie 来帮助解决问题。

> 问：在什么情况下 JSESSIONID 会成为 URL 的一部分

答：通常，当网络服务器（在容器级别）将会话令牌放入 URL 时会发生这种情况：

*   作为用户浏览器不设置 cookie 的解决方法，或
*   使 URL“适合”添加书签或通过电子邮件发送给其他人。

显然，这是不安全且“不好的做法”……尽管短暂的会话超时确实会减轻这种情况。（或者，通过 HTTPS 也可以……只要用户不与其他人共享 URL ¹。）

* * *

对于 Tomcat 6.x，我认为阻止容器（永远）将会话 ID 添加到 URL 的方法是将`disableURLRewriting="false"`属性添加到上下文中。

对于 Tomcat 7：

> Context.disableURLRewriting：这已被删除。通过在 Web 应用程序或全局 CATALINA_BASE/conf/web.xml 文件中配置 session-config/tracking-mode 元素可以获得等效的效果。

* * *

^(1 - 这假设您已修补（等）您的网络服务器以解决已知的 SSL 端点漏洞。否则，您的 HTTPS 连接可能不安全。)

# python - 如何在python中使用子进程模块

> ID：10476441
> 
> 赞同：1
> 
> 时间：2012-05-07T03:52:12.277
> 
> 标签：python, ubuntu, subprocess

如果我想从 python 2.7 调用类似终端（ubuntu）的命令，我应该怎么做，所以我想使用它可以在 ubuntu 终端中使用的 nfc-mfclassic ......有人可以帮我在 python 中使用它。

我运行这个东西：`nfc-mfclassic r a dumptest.mfd`在终端（Ubuntu）

```
Usage: nfc-mfclassic r|w a|b <dump.mfd> [<keys.mfd>]
  r|w           - Perform read from (r) or write to (w) card
  a|b           - Use A or B keys for action
  <dump.mfd>    - MiFare Dump (MFD) used to write (card to MFD) or (MFD to card)
  <keys.mfd>    - MiFare Dump (MFD) that contain the keys (optional)
Or: nfc-mfclassic x <dump.mfd> <payload.bin>
  x             - Extract payload (data blocks) from MFD
  <dump.mfd>    - MiFare Dump (MFD) that contains wanted payload
  <payload.bin> - Binary file where payload will be extracted 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:05:22.660

您可以直接使用 subprocess，但是有几个非常好的 subprocess 包装器可以让您的生活更轻松。

我喜欢[PBS](https://github.com/amoffat/pbs#readme)：

> PBS 是一个独特的子进程包装器，可将您的系统程序动态映射到 Python 函数。PBS 通过为您提供 Bash 的良好功能（简单的命令调用、简单的管道）以及 Python 的所有功能和灵活性，帮助您在 Python 中编写 shell 脚本。

例子：

```
import pbs
print pbs.nfc_mfclassic("r", "a", "dumptest.mfd") 
```

如果您想处理迭代应用程序，也许您应该寻找类似[pyexpect](http://www.noah.org/wiki/pexpect)的东西：

```
# This connects to the openbsd ftp site and
# downloads the recursive directory listing.
import pexpect
child = pexpect.spawn ('ftp ftp.openbsd.org')
child.expect ('Name .*: ')
child.sendline ('anonymous')
child.expect ('Password:')
child.sendline ('noah@example.com')
child.expect ('ftp> ')
child.sendline ('cd pub')
child.expect('ftp> ')
child.sendline ('get ls-lR.gz')
child.expect('ftp> ')
child.sendline ('bye') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:06:06.950

```
>>> import subprocess
>>> command = raw_input()
nfc-mfclassic r a dumptest.mfd

p = subprocess.Popen(command) 
```

command 正是您在 shell cmdline 中键入的内容。困难的部分是正确格式化命令文本。

参考：[http ://docs.python.org/library/subprocess.html#module-subprocess](http://docs.python.org/library/subprocess.html#module-subprocess)

# android - 需要帮助创建一个检查数据库中的条件是否满足的 Android 服务

> ID：10476443
> 
> 赞同：0
> 
> 时间：2012-05-07T03:52:49.340
> 
> 标签：android, service, time, location, scheduling

我正在创建一个存储位置、时间、联系人和电池电量等几个条件的 Android 应用程序。我打算让我的应用程序做的是将这些条件与用户想要在满足这些条件时激活的一些电话设置更改一起存储。如果我把我的问题放在一个列表中会更好：

1.  如何定期检查设备的位置？是否有一个侦听器服务（例如可以使用 TelephonyManager 的联系人选项）可用于在设备位置更改时侦听回调？
2.  有没有办法在 Android 中根据 Time 来安排一个特定的函数被调用？
3.  当设备的电池电量发生变化或设备正在充电或拔出电源时，有没有办法调用特定的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T05:35:01.680

这是您明智的答案：

1)**您可以使用 LocationManager 获取设备的位置。**

 **```
LocationManager locationManager = (LocationManager) 

this.getSystemService(Context.LOCATION_SERVICE);

LocationListener locationListener = new LocationListener() 
{

 public void onLocationChanged(Location location) 
 {

      makeUseOfNewLocation(location);  //here you get the new location
  }

    public void onStatusChanged(String provider, int status, Bundle extras) {}

    public void onProviderEnabled(String provider) {}

    public void onProviderDisabled(String provider) {}
  };

locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener); 
```*  *您还可以使用 GeoCoder 类使用从 locationManager 接收到的经度和纬度来准确指出地址。详细教程[在这里 - LocationManager](http://developer.android.com/guide/topics/location/obtaining-user-location.html)

2)**您可以安排要调用的特定函数 - 使用 BroadcastReceiver 和 AlarmManager 服务。**

私人无效setRecurringAlarm（上下文上下文）{

```
// we know mobiletuts updates at right around 1130 GMT.
// let's grab new stuff at around 11:45 GMT, inexactly
Calendar updateTime = Calendar.getInstance();
updateTime.setTimeZone(TimeZone.getTimeZone("GMT"));
updateTime.set(Calendar.HOUR_OF_DAY, 11);
updateTime.set(Calendar.MINUTE, 45);

Intent downloader = new Intent(context, AlarmReceiver.class);
PendingIntent recurringDownload = PendingIntent.getBroadcast(context,
        0, downloader, PendingIntent.FLAG_CANCEL_CURRENT);
AlarmManager alarms = (AlarmManager) getActivity().getSystemService(
        Context.ALARM_SERVICE);
alarms.setInexactRepeating(AlarmManager.RTC_WAKEUP,
        updateTime.getTimeInMillis(),
        AlarmManager.INTERVAL_DAY, recurringDownload); 
```

}

 *详细教程[BroadCastReceiver 和 AlarmManager](http://mobile.tutsplus.com/tutorials/android/android-fundamentals-scheduling-recurring-tasks/)

因此，如果您愿意，您可以在 BroadCastReceiver 的 OnReceive 中反复检查设备的当前位置（使用 LocationManager，如第 1 点所示）。

3）**当 BatteryLevel 发生如下变化时，有一个 BroadCastReceiver 可以捕获：**

 **```
private BroadcastReceiver mBatInfoReceiver 

= new BroadcastReceiver(){

    @Override
    public void onReceive(Context arg0, Intent intent) {
        int level = intent.getIntExtra("level", 0);
        // do something...
    }
}

    registerReceiver(this.mBatInfoReceiver, 
            new IntentFilter(Intent.ACTION_BATTERY_CHANGED)); 
```*  *对于插件或充电使用以下代码：

 **```
// Are we charging / charged?
int status = batteryStatus.getIntExtra(BatteryManager.EXTRA_STATUS, -1);

boolean isCharging = status == BatteryManager.BATTERY_STATUS_CHARGING ||
                     status == BatteryManager.BATTERY_STATUS_FULL;

// How are we charging?

int chargePlug = battery.getIntExtra(BatteryManager.EXTRA_PLUGGED, -1);
boolean usbCharge = chargePlug == BATTERY_PLUGGED_USB;
boolean acCharge = chargePlug == BATTERY_PLUGGED_AC; 
```*  *我希望这一切对你有帮助......*******

# php - 在上传时授予文件权限

> ID：10476450
> 
> 赞同：0
> 
> 时间：2012-05-07T03:53:41.060
> 
> 标签：php, file-upload, file-permissions

大家好，我有一个关于使用 php ocde 上传文件的问题。

请用 php 代码告诉我如何在上传时授予文件权限（777）。

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:02:25.707

您应该遵循[PHP 网站上处理文件上传](http://www.php.net/manual/en/features.file-upload.post-method.php)的最佳实践，一旦将上传的文件移动到您想要的位置，您就可以对文件执行[chmod](http://www.php.net/manual/en/function.chmod.php)以获得您想要的任何权限。

我会小心对任何文件使用 777 权限，这可能很危险，尤其是在共享服务器上运行代码时。755 是一种更安全的文件权限替代方案，通常被推荐。

# java - 启动 Glassfish 时出现 CREDENTIAL_ERROR

> ID：10476451
> 
> 赞同：0
> 
> 时间：2012-05-07T03:53:45.140
> 
> 标签：java, eclipse, glassfish

当突然出现以下消息时，我正在尝试在 Eclipse 中启动 Glassfish：

> Eclipse 插件无法与 Glassfish 服务器通信，状态为：CREDENTIAL_ERROR

我已经尝试过这里给出的解决方案：关闭防火墙，关闭 windows 防火墙，重新安装 glassfish，在 Eclipse 中再次删除和删除 glassfish。

我有 Windows 7，但在另一台计算机上我也有它，而且我工作得很开心。然后我决定将项目移动到我的笔记本上，安装所有东西，这发生了。

有什么推荐吗？

* * *

## 已编辑：已解决

**解决方案：** 将 Glassfish 环境从“jre”更改为 JDK 6 或更高版本。有任何疑问，在这里评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:40:57.243

检查是否可能发生为已被其他进程使用的玻璃鱼配置的端口。

要更改 prot，您可以更改 domain/config/domain.xml

```
 <network-listeners>
      <network-listener port="8080" protocol="http-listener-1" transport="tcp" name="http-listener-1" thread-pool="http-thread-pool"></network-listener>
      <network-listener port="8181" protocol="http-listener-2" transport="tcp" name="http-listener-2" thread-pool="http-thread-pool"></network-listener>
      <network-listener port="4848" protocol="admin-listener" transport="tcp" name="admin-listener" thread-pool="admin-thread-pool"></network-listener>
    </network-listeners> 
```

更改http端口并重新启动服务器。

# android - 从 sqlite 数据库中检索

> ID：10476454
> 
> 赞同：-1
> 
> 时间：2012-05-07T03:54:05.580
> 
> 标签：android, sqlite

我正在使用 sqlite db 编写可搜索的字典，我的助手类代码如下：

```
 package com.riffre.dictionary.sharma;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;
public class DBAdapter
{
public static final String KEY_ROWID = "_id";
public static final String KEY_WR = "word";
public static final String KEY_DF = "defn";

private static final String TAG = "DBAdapter";
private static final String DATABASE_NAME = "w";
private static final String DATABASE_TABLE = "defns";
private static final int DATABASE_VERSION = 1;
private static final String DATABASE_CREATE =
"create table defns (_id integer primary key autoincrement, "
+ "word text not null, defn text not null);";
private final Context context;
private DatabaseHelper DBHelper;
private SQLiteDatabase db;
public DBAdapter(Context ctx)
{
this.context = ctx;
DBHelper = new DatabaseHelper(context);
}
private static class DatabaseHelper extends SQLiteOpenHelper
{
DatabaseHelper(Context context)
{
super(context, DATABASE_NAME, null, DATABASE_VERSION);
}
@Override
public void onCreate(SQLiteDatabase db)
{
db.execSQL(DATABASE_CREATE);
}
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion,
int newVersion)
{
Log.w(TAG, "Upgrading database from version " + oldVersion
+ " to "
+ newVersion + ", which will destroy all old data");
db.execSQL("DROP TABLE IF EXISTS ");
onCreate(db);
}
}
//---opens the database---
public DBAdapter open() throws SQLException
{
db = DBHelper.getWritableDatabase();
return this;
}
//---closes the database---
public void close()
{
DBHelper.close();
}
//---insert a title into the database---
public long insertTitle(String word, String defn)
{
ContentValues initialValues = new ContentValues();
initialValues.put(KEY_WR, word);
initialValues.put(KEY_DF, defn);
return db.insert(DATABASE_TABLE, null, initialValues);
}
//---deletes a particular title---
public boolean deleteTitle(long rowId)
{
return db.delete(DATABASE_TABLE, KEY_ROWID +
"=" + rowId, null) > 0;
}
//---retrieves all the titles---
public Cursor getAllTitles()
{
return db.query(DATABASE_TABLE, new String[] {
KEY_ROWID,
KEY_WR,
KEY_DF,},
null,
null,
null,
null,
null);
}
//---retrieves a particular title---
public Cursor getTitle(long rowId) throws SQLException
{
Cursor mCursor =
db.query(true, DATABASE_TABLE, new String[] {
KEY_ROWID,
KEY_WR,
KEY_DF,

},
KEY_ROWID + "=" + rowId,
null,
null,
null,
null,
null);
if (mCursor != null) {
mCursor.moveToFirst();
}
return mCursor;
}
//---updates a title---
public boolean updateTitle(long rowId, String word,
String defn, String publisher)
{
ContentValues args = new ContentValues();
args.put(KEY_WR, word);
args.put(KEY_DF, defn);

return db.update(DATABASE_TABLE, args,
KEY_ROWID + "=" + rowId, null) > 0;
}
} 
```

我正在通过以下类在数据库中手动添加单词：

```
import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.util.Log;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AutoCompleteTextView;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class Search extends Activity {
    EditText qr;
    Button search;
     DBAdapter db ;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.search);

    db = new DBAdapter(this);
        db.open();
        long id;
        id = db.insertTitle("ASSIGNAT", " One of the notes, bills, or bonds, issued as currency by the revolutionary government of France (1790-1796), and based on the security of the lands of the church and of nobles which had been appropriated by the state.");
        id = db.insertTitle("ASSIGNATION", "1\. The act of assigning or allotting; apportionment.This order being taken in the senate, as touching the appointment and assignation of those provinces. Holland. 2\. An appointment of time and place for meeting or interview; -- used chiefly of love interviews, and now commonly in a bad sense.While nymphs take treats, or assignations give. Pope.3\. A making over by transfer of title; assignment. House of assignation, a house in which appointments for sexual intercourse are fulfilled.");
        id = db.insertTitle("ASSIGNEE", "In England, the persons appointed, under a commission of bankruptcy, to manage the estate of a bankrupt for the benefit of his creditors.");
        id = db.insertTitle("ASSIGNER", "One who assigns, appoints, allots, or apportions.");
        id = db.insertTitle("ASSIMILABILITY", "The quality of being assimilable. [R.] Coleridge.");
        id = db.insertTitle("ASSIMILABLE", "That may be assimilated; that may be likened, or appropriated and incorporated.");
        id = db.insertTitle("ASSIMILATE", "To become similar or like something else.");
        id = db.insertTitle("ASSIMULATE", "To feign; to counterfeit; to simulate; to resemble.");
        id = db.insertTitle("ASSIMULATION", "Assimilation.");
        id = db.insertTitle("ASSINEGO", "See Asinego.");

     qr=(EditText)findViewById(R.id.srchtxt);
    search=(Button)findViewById(R.id.srchbtn);
        search.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                String qu=qr.getText().toString();
                Log.v("s",qu);

            }

        });

    }
} 
```

那么，如果我想通过数据库中的单词进行搜索，我该如何完成呢？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:21:40.780

SqlLite 数据库与任何其他关系数据库没有太大区别，您可以说 sql lite 是普通关系数据库的一个子集，正如 Vincent 所说，您可以使用 Like 查询

> db.rawQuery("select word, defn from defns where word like 'myWord%',argument or null);

```
http://www.w3schools.com/sql/sql_like.asp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:23:31.617

试试[这个](http://www.vogella.com/articles/AndroidSQLite/article.html)教程，你可以随时用谷歌搜索更多信息。

# ruby - ruby：unicode字符十进制值到\uXXXX转换？.ord 方法不起作用

> ID：10476467
> 
> 赞同：9
> 
> 时间：2012-05-07T03:56:30.217
> 
> 标签：ruby, unicode, decimal

我正在尝试使用 unicode 字符，而字符串的 .ord 方法提供的信息对我没有帮助。我习惯于使用“\uXXXX”之类的代码。

```
ruby-1.9.3-p0 :119 > form[0]
=> "כ" 

ruby-1.9.3-p0 :120 > form[0].ord
=> 1499 
ruby-1.9.3-p0 :121 > puts "\u1499"
ᒙ 
```

...

:-(

.ord 产生的值似乎对应于此处提到的“小数点”： [http ://www.i18nguy.com/unicode/hebrew.html](http://www.i18nguy.com/unicode/hebrew.html)

我不知道如何使用这些值。如何从该字符获取 \uXXXX 代码？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-07T05:16:47.600

语法使用`\u`十六进制，你给它一个十进制值。你要：

```
>> "%4.4x" % form[o].ord
"05db"
>> puts "\u05db"
כ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-10T12:41:10.607

亩太短的答案很酷。

但是，最简单的答案是：

```
'好'.ord.to_s(16)     # => '597d' 
```

# .net - .net 代码转换数据源

> ID：10476468
> 
> 赞同：0
> 
> 时间：2012-05-07T03:56:41.473
> 
> 标签：.net, dataset, datalist

我有一个数据集，如何使用以下代码通过以下原始代码绑定 radchart？

```
Partial Public Class Chart_Examples_Skinning_Bars_DefaultCS
    Inherits System.Web.UI.Page
    Protected Sub Page_Load(sender As Object, e As EventArgs)
        If Not Page.IsPostBack Then
            Dim series As New ChartSeries()
            series.Type = ChartSeriesType.Bar
            series.DataXColumn = "XValue"
            series.DataYColumn = "YValue"

            CapacityRadChart.Series.Add(series)

            CapacityRadChart.DataSource = Me.GetDataSource()
            CapacityRadChart.DataBind()
        End If
    End Sub

    Private Function GetDataSource() As List(Of Class1)
        Dim r As New Random()
        Dim source As List(Of Class1) = New List(Of Class1)

        For i As Integer = 0 To 399
            Dim item As New Class1()

            item.XValue = i
            item.YValue = r.[Next](0, 100)

            source.Add(item)
        Next

        Return source
    End Function

End Class 
```

我正在这样做，但它抛出了以下错误：

> 带有“COUNT”的列类型不是数字”。

请问你能推荐合适的代码吗？

```
Dim dt As DataTable = ds.Tables.Item(0)
Dim dr As DataRow
Dim listdata As new List(Of Double)

Dim list As New List(Of DataRow)(dt.[select]())
    For Each dr  In dt.Rows            
            list.Add(dr.ToLis)
    Next

Dim series As New ChartSeries()
series.Type = ChartSeriesType.Bar
    series.DataXColumn  = "CapacityDelay"
    series.DataYColumn = "COUNT"

    BaselineRadChart.Clear()
    BaselineRadChart.Series.Add(series)

    BaselineRadChart.DataSource = list
    BaselineRadChart.DataBind() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:06:09.677

如何在 ds.Tables.Item(0) 中创建列？您是直接从数据库绑定 DataTable 还是手动创建 DataTable？

如果您手动创建它，那么您可能需要为 DataColumn 声明 DataType

```
Dim dt As DataTable
dt.Columns.Add("CapacityDelay", System.Type.GetType("System.String"))
dt.Columns.Add("Count", System.Type.GetType("System.Int32")) 
```

# sql - 在查询中使用包含 SQL 的数据库字段

> ID：10476469
> 
> 赞同：0
> 
> 时间：2012-05-07T03:56:42.337
> 
> 标签：sql, sql-server, sql-server-2008

对于我正在使用 SQL Server 处理的查询，我需要一些帮助。

该查询获取特定类别的搜索字段信息，并使用它返回按该类别中的配置文件数量排序的配置文件列表。

我需要使用 wn.sqlcheck 字段中包含的信息运行查询。然后按sectionCount 排序。

**查询**

```
SELECT wc.name,
   (SELECT count(*) FROM facilities WHERE wc.sqlcheck) AS sectionCount
FROM webcategories wc
WHERE wc.parentid = 1
ORDER BY sectionCount 
```

**网络类别示例**

```
parentid | name           | sqlcheck 
-----------------------------------------
1        | categorytitle  | (highcaretotalnumberbeds > 0 AND highcaredoubleroomsyn = 1)
1        | categorytitle2 | (othernumberbeds > 0 AND otherdoubleroomsyn = 1) 
```

* * *

## **我现在正在使用存储过程**

```
SET @sqlcheck = (select sqlcheck from webcategories where parentid=1)

EXEC('SELECT wc.id, wc.name,
   (SELECT count(id) FROM facilities WHERE '+@sqlcheck+') AS sectionCount
FROM webcategories wc
WHERE wc.parentid = 1
ORDER BY sectionCount') 
```

发生此错误：

> 子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

这是因为 parentid = 1 的子查询返回了多行。

## **我仍然需要有关如何遍历从 webcategories 表返回的所有结果的帮助。非常感激 ：）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:39:49.883

你可以这样尝试

```
 declare  @name  varchar(100)
    set @name=(select name from webcategories where parentid=1 )
    declare  @sqlcheck  varchar(100)
    set @sqlcheck=(select sqlcheck from webcategories where parentid=1 )

    exec('SELECT wc.'+@name+',
       (SELECT count(*) FROM facilities WHERE '+@sqlcheck+') AS sectionCount
    FROM webcategories wc
    WHERE wc.parentid = 1
    ORDER BY sectionCount') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T05:20:20.440

实际上，您需要使用**sp_executesql**。详细示例可以在这里找到：http: [//msdn.microsoft.com/en-us/library/ms188001](http://msdn.microsoft.com/en-us/library/ms188001(v=sql.100).aspx) (v=sql.100).aspx 。

以下是如何使用游标循环（它的快速版本）：

```
DECLARE @catName varchar(100), @sqlCheck varchar(max)

DECLARE webcat_cursor CURSOR FAST_FORWARD READ_ONLY FOR 
SELECT name, sqlcheck
FROM webcategories
WHERE parentId = 1
ORDER BY sectionCount

OPEN webcat_cursor

FETCH NEXT FROM webcat_cursor
INTO @catName, @sqlCheck

WHILE @@FETCH_STATUS = 0
BEGIN
    --the query to be executed
    --I have taken it from one of the answers
    EXEC('SELECT wc.' + @catName + ',
       (SELECT count(*) FROM facilities WHERE ' + @sqlCheck + ') AS sectionCount    
    FROM webcategories wc
    WHERE wc.parentid = 1
    ORDER BY sectionCount')
    --end of executed query

    FETCH NEXT FROM webcat_cursor 
    INTO @catName, @sqlCheck
END

CLOSE webcat_cursor
DEALLOCATE webcat_cursor 
```

# javascript - Webkit 移动浏览器中未准确捕获的 OpenLayers 纬度

> ID：10476470
> 
> 赞同：5
> 
> 时间：2012-05-07T03:56:53.133
> 
> 标签：javascript, openlayers, openstreetmap, mobile-webkit

我正在使用地图编程页面，我需要在地图上捕获点击/单击的位置并存储坐标。我正在使用 OpenLayers js。在桌面浏览器（IE/FF/Chrome）上，这工作正常。在移动设备上，点击在默认的 Android 浏览器上被正确捕获（在真实设备和模拟器中）。

然而，在移动 webkit 浏览器（iPhone Safari 和 Android Chrome Beta）上，我们遇到了一个问题，即在实际点击高几个像素（朝北）处捕获点击。该错误未修复（因此，我不能只在事件的 xy 上添加 100 来重新校准顶部。）

这是我用作点击处理程序的代码：

```
OpenLayers.Control.ClickHandler = OpenLayers.Class(OpenLayers.Control, {                
    defaultHandlerOptions: {
        'single': true,
        'double': false,
        'pixelTolerance': 0,
        'stopSingle': false,
        'stopDouble': false
    },

    initialize: function(options) {
        this.handlerOptions = OpenLayers.Util.extend(
            {}, this.defaultHandlerOptions
        );
        OpenLayers.Control.prototype.initialize.apply(
            this, arguments
        ); 
        this.handler = new OpenLayers.Handler.Click(
            this, {
                'click': this.trigger
            }, this.handlerOptions
        );
    }, 

    trigger: function(e) {
        that.inputLonLat_EPSG4326 = null;

        var lonlat = that.inputMap.getLonLatFromViewPortPx(e.xy);

        that.logMessage("XY " + e.xy);
        that.logMessage("LonLoat " + lonlat);

        that.inputMarkers.clearMarkers();

    that.inputMarkers.addMarker(new OpenLayers.Marker(lonlat,that.icons["green"].clone()));

    lonlat.transform(that.inputMap.getProjectionObject(), new OpenLayers.Projection("EPSG:4326"));

    that.inputLonLat_EPSG4326 = lonlat;
    // For the moderation sections
    $('#alertLatitude').val(that.inputLonLat_EPSG4326.lat);
    $('#alertLongitude').val(that.inputLonLat_EPSG4326.lon);

    //lonLat2.transform(that.inputMap.getProjectionObject(), new OpenLayers.Projection("EPSG:4326"));
    that.logMessage("Stored lat " + that.inputLonLat_EPSG4326.lat);
    that.logMessage("Stored lon " + that.inputLonLat_EPSG4326.lon);     

    that.callFunction(that.inputMapListener, e);
    }   
}); 
```

我应该做些不同的事情吗？有没有其他人在使用 OpenLayers 时看到移动 webkit 浏览器上的不准确问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:01:38.240

我终于找到了发生这种情况的原因。似乎在 webkit 移动浏览器上，图书馆似乎获得（或派生）的 x,y 是基于页面而不是地图所在的元素。因此计算关闭。似乎无法通过添加地图元素的 xy 或一些此类基于 DOM 的图形来解决不准确性（我试过了。）

我通过将地图容纳在 IFrame 中，然后将 iFrame 容纳在地图元素中来解决它。这样，地图点击处理程序接收到的 x,y 在 iF​​rame 内是准确的，因此 lat、long 也是准确的。由于父级和 iFrame 都来自同一个域，因此来回通信没有问题。

为了完成上下文，我测试过，基于 iFrame 的解决方案绝对兼容 BB 9 及更高版本、Android Chrome、Android Default 和 iPhone Safari。

查看解决方案 - [http://suat1.vocanic.net//saralee/apps/dengue_alert/](http://suat1.vocanic.net//saralee/apps/dengue_alert/) 和 iFrame 在[http://suat1.vocanic.net//saralee/apps/dengue_alert/mobileMap.php（WIP](http://suat1.vocanic.net//saralee/apps/dengue_alert/mobileMap.php)版本可能随时间改变或中断）

# ruby - if 直接在类声明中声明

> ID：10476478
> 
> 赞同：1
> 
> 时间：2012-05-07T03:58:39.887
> 
> 标签：ruby

为什么在 Ruby 中可以直接在类声明中直接使用 if 语句？又名：

```
class ApplicationController < ActionController::Base
  if foo
    bar = "x"
  end
end 
```

我知道有一些类实例变量，因为类继承自对象，是一样的吗？

我只需要对整个事情进行一些澄清:)

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T10:23:44.300

> 为什么在 Ruby 中可以直接在类声明中直接使用 if 语句

因为它*不是*一个类“声明”，它是一个类*体*，即它是可执行代码，就像方法体、块体、循环体或脚本体一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T04:26:50.837

类声明的主体是代码，就像 Ruby 中的其他所有内容一样。这就是你可以使用方法的方式`attr_accessor`，`private`和`include`——这些都只是类的方法。它是 Ruby 普遍面向对象哲学的一部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T04:20:28.193

没有任何问题。类声明代码通常会被执行，self = class 本身，定义局部变量如 foo 没有问题。请记住，您不是在类实例中，而是在类本身中。

```
class ApplicationController < ActionController::Base
  foo = true
  if foo
    bar = "x"
  end
  puts bar
end 
```

应该打印“x”

# python - 如何使用 SWIG 生成跨平台接口？

> ID：10476483
> 
> 赞同：9
> 
> 时间：2012-05-07T03:59:16.497
> 
> 标签：python, c, gcc, swig

我正在用 SWIG（Python 作为目标）包装一个库。库函数包含数据类型为“uint32_t”、“uint8_t”等的参数。我想创建尽可能跨平台的接口，所以我想在我的`interface.i`文件中使用原始函数签名。例如：

```
uint32_t func(uint32_t a, uint32_t b); 
```

我要解决的问题是 SWIG 不会将参数识别为整数，除非数据类型`typedef`上有 a `uint32_t`。现在我在接口文件上使用它：

```
typedef unsigned uint32_t; 
```

删除该`typedef`行将导致无法从目标 Python 绑定调用该函数：

```
>>> mylib.func(2, 2)
TypeError: in method 'func', argument 1 of type 'uint32_t' 
```

前一个`typedef`在我的本地机器上是可以的，但在另一个编译器/平台上可能会有所不同。使用该指令`%include "stdint.h"`将在 SWIG 上引发错误：

```
/usr/include/stdint.h:44: Error: Syntax error in input(1). 
```

Wich 是有道理的，因为 SWIG 不是功能齐全的编译器，并且无法完全评估`#ifdef`该标头上的所有内容。

如何正确使用编译器在`stdint.h`标头上选择的数据类型提供 SWIG？事实上，严格执行正确的数据类型是否有意义，或者只是`typedef`ing 所有的`intX_t`都`long`可以？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-07T09:12:46.333

如果要在 SWIG 接口文件中使用这些类型，可以执行以下操作：

```
%module test
%include "stdint.i"

uint32_t my_function(); 
```

哪个是现有的 SWIG 界面具有`typedef`适合您系统的正确 s。

# c++ - 修复了 C++ 中的时间步长循环

> ID：10476485
> 
> 赞同：3
> 
> 时间：2012-05-07T03:59:38.603
> 
> 标签：c++

我正在尝试实现一个固定的时间步长循环，以便游戏以恒定的速率刷新。[我在http://gafferongames.com/game-physics/fix-your-timestep/](http://gafferongames.com/game-physics/fix-your-timestep/)找到了一篇很棒的文章，但我无法将其转换为我自己的 2d 引擎。

我指的具体地方是最后一部分“The Final Touch”中的功能，这是大多数人推荐的。这是他的功能：

```
double t = 0.0;
    const double dt = 0.01;

    double currentTime = hires_time_in_seconds();
    double accumulator = 0.0;

    State previous;
    State current;

    while ( !quit )
    {
         double newTime = time();
         double frameTime = newTime - currentTime;
         if ( frameTime > 0.25 )
              frameTime = 0.25;   // note: max frame time to avoid spiral of death
         currentTime = newTime;

         accumulator += frameTime;

         while ( accumulator >= dt )
         {
              previousState = currentState;
              integrate( currentState, t, dt );
              t += dt;
              accumulator -= dt;
         }

         const double alpha = accumulator / dt;

         State state = currentState*alpha + previousState * ( 1.0 - alpha );

         render( state );
    } 
```

对我自己来说，我只是在屏幕上移动一个玩家来跟踪 x 和 y 位置以及速度，而不是进行微积分积分。**我对更新玩家位置（dt 还是 t？）的应用感到困惑。有人可以分解并进一步解释吗？

第二部分是我理解的插值，因为提供的公式是有意义的，我可以简单地在当前和之前的 x、y 玩家位置之间进行插值。

另外，我意识到我需要一个更准确的计时器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-06T18:48:45.597

如果您可以获得至少微秒的精度，请尝试以下操作：

```
long int start = 0, end = 0;
double delta = 0;
double ns = 1000000.0 / 60.0; // Syncs updates at 60 per second (59 - 61)
while (!quit) {
    start = timeAsMicro();
    delta+=(double)(start - end) / ns;
    end = start;

    while (delta >= 1.0) {
       doUpdates();
       delta-=1.0;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:01:52.037

见： [http](http://en.wikipedia.org/wiki/Integral) ://en.wikipedia.org/wiki/Integral & [http://en.wikipedia.org/wiki/Numerical_integration](http://en.wikipedia.org/wiki/Numerical_integration)

该函数是一种用于逼近积分函数（第 1 链接）的数值技术（第 2 链接）。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-07T04:08:38.770

你应该复习你的高中物理。简单地说，速度是距离随时间变化的变化（dxdt），加速度是速度随时间变化的变化（dvdt）可以通过对 t 积分得到速度。显然，这是一个非常简单的解释，但是如果您愿意的话，有大量的参考资料可以提供更多的细节。

# jquery-plugins - jQuery Touchwipe

> ID：10476486
> 
> 赞同：0
> 
> 时间：2012-05-07T03:59:43.163
> 
> 标签：jquery-plugins, jquery-mobile, swipe

我使用在 Stack Overflow 上学到的资源在这里找到示例脚本：http: [//www.netcu.de/jquery-touchwipe-iphone-ipad-library](http://www.netcu.de/jquery-touchwipe-iphone-ipad-library)。

如果我使用以下内容，则 android 上的滑动功能将失败，并且用户控制箭头将无法在 android 或 pc 上工作（我没有要测试的 iphone）：

```
 <script type="text/javascript">
 $(document).ready(function() {
 $('#imagegallery').cycle({
    fx: 'fade'
 }); 
 $("#imagegallery").touchwipe({
    wipeLeft: function() {
        $("#imagegallery").cycle("next");
    },
    wipeRight: function() {
        $("#imagegallery").cycle("prev");
    }
 });
 });
 </script> 
```

如果我使用它，那么用户控制箭头可以在 pc 和 android 上工作，但滑动功能仍然不起作用：

```
<script type="text/javascript">
$(document).ready(function() {
$('#imagegallery').cycle({
    fx: 'fade',
    prev: '#prev',
    next: '#next',
    speed: 300
}); 
$("#imagegallery").touchwipe({
    wipeLeft: function() {
        $("#imagegallery").cycle("next").alert("left");
    }, 
    wipeRight: function() {
        $("#imagegallery").cycle("prev").alert("right");
    }

});
});
var swipeOptions = { 
swipe     : swipe, 
threshold : 75 
} 

</script> 
```

我尝试了我能想到的一切来进行自己的学习和实验，但在这一点上，我真的可以朝着正确的方向推动。我在我儿子的网站上使用了一个测试页面：http: [//zachmcdonald.net/testgallery.php](http://zachmcdonald.net/testgallery.php)。

感谢您的想法！谢谢，朱莉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:56:44.317

我发现执行以下操作更简单

```
$("#imagegallery").touchwipe({
  wipeLeft: function() {
    $("#imagegallery .Next").click(); // selector for you 'next' btn
  }, 
  wipeRight: function() {
    $("#imagegallery .Previous").click() // selector for your 'prev' btn;
  }
}); 
```

# hibernate - session.evict 与 clear 之间的区别

> ID：10476488
> 
> 赞同：29
> 
> 时间：2012-05-07T04:00:29.710
> 
> 标签：hibernate

hibernate 中的 session.clear 和 evict 方法有什么区别。两者都是从 session 中删除的实例的分离对象。我什么时候应该在 hibernate 中使用 session.clear 和 session.evict。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-07T04:10:35.413

[evict()](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#evict%28java.lang.Object%29)从会话中逐出单个对象。[clear()](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#clear%28%29)驱逐会话中的所有对象。调用 clear() 就像在与会话关联的每个对象上调用 evict()。

# c# - 我的日期似乎没有以表格形式发回给控制器

> ID：10476489
> 
> 赞同：0
> 
> 时间：2012-05-07T04:00:56.453
> 
> 标签：c#, asp.net-mvc-3, datetime, razor, controller

我的模型有一个具有日期属性的对象...

```
 [Required(ErrorMessage="{0} is required")]
    [Display(Name="Donation date")]
    [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd/MM/yyyy}")]
    public DateTime DonationDate { get; set; } 
```

该视图有一个编辑器......

```
 <div class="editor-label">
        @Html.LabelFor(model => model.Donation.DonationDate)
    </div>
    <div class="editor-field">
        @Html.TextBox("txtDate", Model.Donation.DonationDate.ToString("dd/MM/yyyy"), new { @class = "date"      })
        @Html.ValidationMessageFor(model => model.Donation.DonationDate)
    </div> 
```

控制器只是接收模型...但是当我在控制器中执行此操作并将其提供给另一个视图时...

```
ViewBag.Date = model.Donation.DonationDate; 
```

每次我回到 0001 年 1 月 1 日凌晨 12:00:00 时，无论日期设置为什么。有什么想法吗？谢谢！

忘了提...我还在编辑器字段上使用 JQuery datepicker：

```
 $('.date').attr("placeholder", "dd/mm/yy").datepicker({
        dateFormat: "dd/mm/yy",
        changeMonth: true,
        changeYear: true
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:19:11.510

您可以使用**TextBoxFor**以便视图引擎知道如何适当地标记表单字段（以便模型绑定器在回发时识别它）：

```
@Html.TextBoxFor(model => model.Donation.DonationDate, new { @class = "date" }) 
```

或者，您可以手动正确命名文本框。我不确定那会是什么样子...

**更新**

好的，我很好奇，所以我检查了。嵌套字段的命名约定使用点表示法。所以你应该可以这样写：

```
@Html.TextBox("Donation.DonationDate", Model.Donation.DonationDate.ToString("dd/MM/yyyy"), new { @class = "date" }) 
```

**更新#2**

要正确格式化，请将属性应用于模型中的**DonationDate**属性：

```
[DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", ApplyFormatInEditMode=true)] 
```

为此，您还必须使用**@Html.EditorFor**而不是 TextBoxFor。

# java - hashcode 是在调用 hashcode() 方法时生成的

> ID：10476491
> 
> 赞同：3
> 
> 时间：2012-05-07T04:01:39.887
> 
> 标签：java, hashcode

我有点困惑，因为在一次采访中被问到这个问题，我说：““在当前运行的应用程序的堆上创建每个对象时，都会为每个对象生成哈希码””

但采访说：“它是我们在对象上调用hashcode方法时生成的”

此外，我希望更深入地了解哈希码（这对 java 来说也是如此），请分享一些链接/资源，因为它在一些工作面试中被广泛询问

PS：当我在一个对象上做 sysout 时，输出是employee@942f533

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T04:08:54.183

这取决于你在这里的意思。正如其他答案所述，创建函数时不会调用该函数本身。然而，

```
 90        * As much as is reasonably practical, the hashCode method defined by
   91        * class {@code Object} does return distinct integers for distinct
   92        * objects. (This is typically implemented by converting the internal
   93        * address of the object into an integer, but this implementation
   94        * technique is not required by the ... [JDK] 
```

来自[http://www.docjar.com/html/api/java/lang/Object.java.html](http://www.docjar.com/html/api/java/lang/Object.java.html)

由于对象的地址是在创建时分配的，因此在某种意义上您是正确的。但是，由于它不是必需的，并且许多对象都定义了覆盖，所以它不一定适用于所有对象。

通常在面试中，你必须稍微挑战面试官来描述你的意思。如果你这样做并且你是对的，那么问题就解决了，如果你这样做并且你错了，那么你至少表明你比原来的陈述所显示的有更深的理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T05:27:30.607

实际上，您需要了解哈希码的用法才能理解。

**哈希码不是在对象创建时生成，而是在调用 hashCode() 时生成。**

对于每个对象，您可能不想覆盖 java.lang.Object 哈希码的默认实现。实际上，所有在内部使用散列算法的类都需要它。例如 HashMap、HashSet 等。如果你去检查这些方法的内部实现，你会发现哈希码等的用法。

来自 java.util.HashMap 的代码片段：

```
public V get(Object key) {
    if (key == null)
        return getForNullKey();
    int hash = hash(key.hashCode());
    for (Entry<K,V> e = table[indexFor(hash, table.length)];
         e != null;
         e = e.next) {
        Object k;
        if (e.hash == hash && ((k = e.key) == key || key.equals(k)))
            return e.value;
    }
    return null;
} 
```

如您所见，它用于从数据结构中获取正确的对象。

如果您检查对象哈希码的注释，它也清楚地提到了这一点

```
 * Returns a hash code value for the object. This method is 
 * supported for the benefit of hashtables such as those provided by 
 * <code>java.util.Hashtable</code>. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T04:06:19.037

hashcode() 是与任何其他方法一样的方法。创建对象时不会调用它，当您将对象放入地图时可能会调用它。

我认为要阅读的第一个文档应该是：[http](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode) ://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode ()

# asp.net - 如何根据条件将 IgnoreDataMemberAttribute 动态设置为属性？

> ID：10476497
> 
> 赞同：2
> 
> 时间：2012-05-07T04:02:32.897
> 
> 标签：asp.net, serialization, c#-3.0

我有这样的课：

```
public class TestClass
{
    public int SNo { get; set; }
    public string Name { get; set; }
    public string MyProperty { get; set; }
} 
```

我正在尝试使用此函数将此类序列化为 XML：

```
public static string ToXML(object obj)
{
    DataContractSerializer _serializer = new DataContractSerializer(obj.GetType());
    MemoryStream msMemoryStream = new MemoryStream();
    _serializer.WriteObject(msMemoryStream, obj);
    string xml = Encoding.Default.GetString(msMemoryStream.ToArray());
    return xml;
} 
```

**我想要输出为 XML。如果我将空值传递给 TestClass 中的任何属性，则该属性不应出现在输出 XML 中。怎么做？**

# 更新：

如何根据条件将 IgnoreDataMemberAttribute 动态设置为 Testclass 属性？

# c# - 使用 HttpResponseMessage，当用户没有网络时如何加载缓存数据？

> ID：10476498
> 
> 赞同：1
> 
> 时间：2012-05-07T04:02:35.233
> 
> 标签：c#, windows-8, httpresponse, .net-4.5

我在 METRO APPLICATIONS 中使用 .NET FRAMEWORK 4.5 编写软件。我正在使用类 HttpClient 和 HttpResponseMessage 从 RSS 获取提要。

```
 private async Task<IList<FeedDataItem>> CreateRecipesAndRecipeGroups(string url)
    {
        HttpClient client = new HttpClient();
        HttpResponseMessage response = null;

        try
        {
            response = await client.GetAsync(url);
        }
        catch (Exception ex)
        {
            // here I need to load the last feeds loaded
        }
    } 
```

正如您在我的代码中看到的那样，例如，如果我没有互联网，程序应该加载以前或最新的提要。

您知道如何解决这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:59:00.893

将最后下载的提要序列化到磁盘，当没有互联网可用时从磁盘加载[快速入门：读取和写入文件（使用 C#/VB/C++ 和 XAML 的 Metro 风格应用程序）](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh758325.aspx)

# c - 当存在目标变量时，在 strcat、strcopy 等中返回 char* 的目的是什么？

> ID：10476501
> 
> 赞同：6
> 
> 时间：2012-05-07T04:03:24.157
> 
> 标签：c, string

只是一个愚蠢但快速的问题：为什么在存储输出的参数列表中有一个变量时，一些使用 c 样式字符串的函数（例如：fgets、strcpy、strcat 等）的返回类型为 char*？即，为什么会这样：

```
char *strcat ( char *dest, const char *src ); 
```

并不是

```
void strcat ( char *dest, const char *src ); 
```

甚至只是通过执行返回结果

```
char *strcat (const char *src ); 
```

我的意思是我可以看到如果您嵌套调用这些函数（这很危险），这将是多么有用，但我不明白为什么您需要同时拥有目标变量并返回结果......

我正在回顾一些 c 编程的东西，不敢相信我忘记了多少！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T04:19:10.203

为了方便使用，让这些函数可以用在更大的表达式中，也可以嵌套使用。

就像是：

```
strcat(path, strcpy(file, "foo.txt")); 
```

或者

```
printf("[%s]\n", strcat(string1, string2)); 
```

不用说，这些用法可以而且应该避免。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:23:34.540

在某些情况下，通过检查 NULL 的返回值还可以指示函数是否成功。然而，不一定是理想的做法。

# c - 如何使用 C 选择文本文件的最后一行

> ID：10476503
> 
> 赞同：3
> 
> 时间：2012-05-07T04:03:27.170
> 
> 标签：c, file-io

我正在尝试找到一种方法来使用 C（不是 c++ 或 c#，只是 C）选择文本文件的最后一行，如果有人可以帮助我解决这个问题，我很难找到一种方法我将不胜感激，谢谢！（顺便说一句，这是我正在尝试做的一个很好的例子，这与 tail -n 1 在 bash 中所做的类似）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T10:09:15.140

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void main(int argc, char *argv[])
{
    FILE *fd; // File pointer
    char filename[] = "./Makefile"; // file to read
    char buff[1024];

    if ((fd = fopen(filename, "r")) != NULL) // open file
    {
        fseek(fd, 0, SEEK_SET); // make sure start from 0

        while(!feof(fd))
        {
            memset(buff, 0x00, 1024); // clean buffer
            fscanf(fd, "%[^\n]\n", buff); // read file *prefer using fscanf
        }
        printf("Last Line :: %s\n", buff);
    }
} 
```

我正在使用 Linux。CMIIW

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T04:05:59.600

没有直接的方法，但我首选的方法是：

1.  转到文件末尾
2.  读取最后 X 个字节
3.  如果它们包含 '\n' - 你得到了你的行 - 从该偏移量读取到文件末尾
4.  在它们之前读取 X 个字节
5.  回到 3 直到找到匹配
6.  如果到达文件的开头 - 整个文件是最后一行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T09:35:01.330

E.g.

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#ifndef max
#define max(a, b) ((a)>(b))? (a) : (b)
#endif

long GetFileSize(FILE *fp){
    long fsize = 0;

    fseek(fp,0,SEEK_END);
    fsize = ftell(fp); 
    fseek(fp,0,SEEK_SET);//reset stream position!!

    return fsize;
}
char *lastline(char *filepath){
    FILE *fp;
    char buff[4096+1];
    int size,i;
    long fsize;
    if(NULL==(fp=fopen(filepath, "r"))){
        perror("file cannot open at lastline");
        return NULL;
    }
    fsize= -1L*GetFileSize(fp);
    if(size=fseek(fp, max(fsize, -4096L), SEEK_END)){
        perror("cannot seek");
        exit(1);
    }
    size=fread(buff, sizeof(char), 4096, fp);
    fclose(fp);
    buff[size] = '\0';
    i=size-1;
    if(buff[i]=='\n'){
        buff[i] = '\0';
    }
    while(i >=0 && buff[i] != '\n')
        --i;
    ++i;
    return strdup(&buff[i]);
}

int main(void){
    char *last;

    last = lastline("data.txt");
    printf("\"%s\"\n", last);
    free(last);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T06:20:27.677

一种简单而低效的方法是将每一行读入缓冲区。
当最后一次读取给你时`EOF`，你在缓冲区中有最后一行。

Binyamin Sharet 的建议更有效，但实施起来有点困难。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T05:13:29.160

如果你使用*nix 操作系统，你可以使用命令'last'。有关详细信息，请参见“最后一个”手册页。如果你想将功能集成到另一个程序中，你可以使用'system'调用来执行'last'并得到它的结果。

# dataset - 如何从统计上说明两种预测模式之间的改进

> ID：10476504
> 
> 赞同：1
> 
> 时间：2012-05-07T04:03:57.233
> 
> 标签：dataset, statistics, compare

我对如何在统计上比较两个数据集有疑问，非常感谢您的帮助。

问题：我有来自两种预测模式的两个数据集，例如 M1={1 2 3 4 5} 和 M2={3 4 2 5 6}，它们是原始数据和预测数据之间的均方误差。我如何或使用什么工具来查找和展示从 M2 到 M1 的改进？

我做了什么：我尝试了每组的标准偏差，并进行了比较。有一些增加但不那么明显。我可以在这个问题上做哪些其他测试以及如何判断改进是否显着？

谢谢你的帮助。

# spotify - 在 Spotify 应用程序中禁用下一个和上一个

> ID：10476506
> 
> 赞同：0
> 
> 时间：2012-05-07T04:04:25.203
> 
> 标签：spotify

有没有办法像 SoundDrop 那样禁用 Spotify 应用程序 api 中的下一个/上一个按钮？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:16:29.670

当您在没有上下文的情况下播放曲目，或在上下文仅包含一个曲目的情况下播放曲目时，播放控件将被禁用。

SoundDrop 采用第一种方法——它一次只播放一个曲目，没有上下文，并在需要时手动播放下一首曲目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:43:25.477

我设法解决了这个问题。

将上下文设置为只有一个轨道的上下文并不是完整的解决方案，因为我也必须在播放列表上运行一个未记录的函数。

但是在这里看看我的解决方案：

[在Spotify中禁用下一个上一个按钮](https://stackoverflow.com/questions/11293430/disable-next-previous-buttons-in-spotify)

# mysql - MySQL选择朋友的评论，然后按时间顺序选择其他评论

> ID：10476510
> 
> 赞同：0
> 
> 时间：2012-05-07T04:05:37.853
> 
> 标签：mysql, sql, database, comments

这个问题之前可以在某个地方问过，但无论如何我都找不到。

所以我有一个有很多评论的视频记录，每个评论都属于一个用户。另一方面，用户有很多用户朋友。

现在，当用户 X 登录并观看视频时，Y 我想首先显示他朋友的评论（按最新排序）。然后列出最近排序的其他评论。

如果可能的话，我更愿意在一个查询中创建这个逻辑。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:10:05.270

在您的 ORDER BY 中，执行以下操作。请知道我知道您的架构是什么样的，所以这个查询不起作用。但是只需创建一个 1/0 值来指示用户是否是朋友，然后先按该值排序，然后再按发布/评论 id 排序

```
SELECT
    posting.id,
    IF(a.friend_id = b.criteria, 1, 0) AS is_friend
...
ORDER BY is_friend DESC, posting.id DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T04:10:36.367

这个怎么样

```
Select comment of friends of X on video Y order by date
Union
Select comment on video Y where they is not friend of X order by date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T04:13:10.020

使用联合。

```
(
  SELECT 1 AS sort,*
  FROM comments
  INNER JOIN friends ON comments.poster_id=friends.friend_id
  WHERE friends.id='123'
)
UNION
(
  SELECT 2 AS sort,*
  FROM comments
  WHERE poster_id NOT IN(SELECT friend_id FROM friend WHERE id='123')
)
ORDER BY sort,time DESC 
```

# r - 如何根据另一列对一列进行排序？

> ID：10476519
> 
> 赞同：0
> 
> 时间：2012-05-07T04:06:13.860
> 
> 标签：r, sorting, ggplot2, scatter-plot

我有以下数据：

```
points <- structure(list(A = structure(c(1L, 1L, 2L, 2L, 3L, 4L, 
4L, 5L, 5L, 6L, 6L, 7L, 8L, 9L, 9L, 10L, 11L, 12L, 12L, 13L, 
14L, 15L, 16L, 16L, 17L, 17L, 18L, 18L, 19L, 19L, 20L, 21L, 21L, 
22L, 23L, 24L, 24L, 25L, 26L, 26L, 27L, 28L, 29L, 30L, 30L, 31L, 
32L, 32L, 33L, 34L, 34L, 35L, 35L, 36L, 36L, 37L, 37L, 38L, 38L, 
39L, 39L, 40L, 41L), .Label = c("00017dd3-f55e-e011-854c-00237de2db9e", 
"0005f624-565a-e011-854c-00237de2db9e", "0007b82f-bfe0-4b55-963e-be5a2a1e7f7b", 
"00095b52-fd0a-e011-9264-00237de2db9e", "00098835-9554-4898-8d4b-82d42b8b4464", 
"000a727f-8334-e011-854c-00237de2db9e", "000c0a31-f459-4365-aa3a-1978deb89f67", 
"000e36a4-6e56-4851-8d36-2caf0bdd63ec", "000f05a6-cf94-4518-8de7-1773cbea8198", 
"00105574-a775-43e8-8472-c8b294e46786", "00112a96-3c47-409c-83bd-6f30d8d77100", 
"0012f133-f68e-e011-986b-78e7d1fa76f8", "0012f899-1c45-4917-90b7-11bea31e467e", 
"0014606b-17b7-46d6-957f-e23b43fcc773", "001478e2-3e50-486c-ae3b-d1ceb36f0fd0", 
"00159bab-ce82-454a-9343-f7d8f1500a68", "0015b84e-a48d-443e-936e-cabdb80604dc", 
"0018f8ba-c289-4483-bf74-5cd0e6c6ae9e", "0019487f-f31e-4e3e-b499-fd48077f71f9", 
"00199523-c42f-47fd-a44a-066fb726f6dd", "0019dace-41e1-439f-8b73-328d02537fe7", 
"001a346e-2a15-45d4-9fb1-6b4e2448d362", "001b0c90-5c86-4290-bad3-0d6794a6bfe8", 
"001c0d0d-3059-e011-854c-00237de2db9e", "001c9cbb-8c79-4cbf-bc50-219a70ab20b8", 
"001dcf83-7492-e011-986b-78e7d1fa76f8", "001dd5cf-3e3b-4ceb-823c-346c15f88878", 
"001e0ef7-b977-436a-ab20-8c4af4f5b230", "001fc407-da48-4c42-9325-7756b160cbbd", 
"001fdaa1-9471-e011-81d2-78e7d1fa76f8", "0020029f-2667-4c03-b99f-d803eccd27d4", 
"00218e00-896e-e011-81d2-78e7d1fa76f8", "002196af-60c7-4baf-abdb-589b3a481686", 
"0021a908-7ff6-df11-9264-00237de2db9e", "0021bced-909a-e011-986b-78e7d1fa76f8", 
"0021f0fb-cb9f-e011-986b-78e7d1fa76f8", "00228254-9b20-4d40-a4a5-a7c608f81dfa", 
"002357ba-5656-4308-bb92-6cc97f50d7aa", "0025eafd-a64f-e011-854c-00237de2db9e", 
"0026b36c-ebc2-43f0-a0f7-72f43b70530b", "00277e09-543e-449a-8571-38f71a21cee2"
), class = "factor"), B = structure(c(10L, 10L, 27L, 
27L, 28L, 23L, 23L, 38L, 38L, 24L, 24L, 19L, 35L, 26L, 26L, 28L, 
5L, 36L, 36L, 21L, 11L, 1L, 14L, 14L, 4L, 4L, 9L, 9L, 16L, 16L, 
3L, 7L, 7L, 13L, 37L, 17L, 17L, 29L, 15L, 15L, 12L, 31L, 32L, 
8L, 8L, 2L, 30L, 30L, 39L, 6L, 6L, 22L, 22L, 20L, 20L, 34L, 34L, 
18L, 18L, 33L, 33L, 25L, 29L), .Label = c("Aashu", "Actonica Studio", 
"appyminds", "blackink", "BroeckiE", "Challenge Solutions LLC", 
"CPP_MSP", "Datentechnik Innovation GmbH", "DerekM", "Dimension Srl", 
"Dmitry Kazarin", "edg3", "fruitymo", "Geckosan", "Genera Interactive SL", 
"HandyWare", "Infinite Square", "JTO.C Sq.", "JuJuZ", "Kitten Flavour", 
"Krofita", "Mark Agholor", "MCTronix.com", "Michael Snow", "michaloxo", 
"mobilewares.net", "NotoMedia LLC", "OKR", "P.F. CHAUVET", "Panoylhs", 
"Pratik Gandhi", "raavr", "ReadBooks", "RGP", "Seesmic", "The KeitaCorp", 
"viileetek", "Violineage", "Yalla Apps"), class = "factor"), 
    Date = structure(c(1302926400, 1302926400, 1302408000, 
    1302408000, 1327467600, 1292994000, 1292994000, 1322370000, 
    1322370000, 1297486800, 1297486800, 1326949200, 1321333200, 
    1314763200, 1314763200, 1328418000, 1327381200, 1307505600, 
    1307505600, 1325221200, 1324530000, 1327381200, 1326862800, 
    1326862800, 1326171600, 1326171600, 1325566800, 1325566800, 
    1327122000, 1327122000, 1320379200, 1324702800, 1324702800, 
    1327726800, 1327986000, 1301544000, 1301544000, 1332302400, 
    1308369600, 1308369600, 1325912400, 1331611200, 1325912400, 
    1304481600, 1304481600, 1325653200, 1304395200, 1304395200, 
    1322542800, 1294117200, 1294117200, 1309147200, 1309147200, 
    1309320000, 1309320000, 1313208000, 1313208000, 1325739600, 
    1325739600, 1300334400, 1300334400, 1325826000, 1321938000
    ), class = c("POSIXct", "POSIXt"), tzone = "")), .Names = c("A", 
"B", "Date"), row.names = c(NA, -63L), class = "data.frame") 
```

我正在尝试绘制一个散点图，其中 Y 轴根据日期字段排序。但是，我只能在我将`A`其视为一个因素的情况下执行以下操作。关于如何实现这一目标的任何建议？

```
p = ggplot(points, aes(Date, factor(A))) +
    geom_point(aes(colour=factor(A)), size=1.8) + 
    scale_shape(solid=FALSE) + 
    scale_y_discrete("", breaks=NA) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:57:32.653

当您要求 ggplot 在交换 x 和 y 位置后将日期值视为离散变量时，就会出现错误。当您删除它时它会消失：

```
p = ggplot(points, aes(x=A, y=Date)) +
     geom_point(aes(colour=factor(A)), size=1.8) + 
     scale_shape(solid=FALSE) 
p 
```

或者，您可以通过将离散轴调用应用于 x 轴来消除线条：

```
 p = ggplot(points, aes(x=A, y=Date)) +
    geom_point(aes(colour=factor(A)), size=1.8) + 
    scale_shape(solid=FALSE) + 
    scale_x_discrete("", breaks=NULL)
 P 
```

不幸的是，问题的标题似乎与问题的文本没有非常明确的联系，所以我不知道这是否是你所要求的。

# android - 同一个android应用程序中的Activity和Service

> ID：10476521
> 
> 赞同：1
> 
> 时间：2012-05-07T04:06:28.180
> 
> 标签：android, service, background, alarmmanager

我正在开发一个应用程序，在该应用程序中，用户首先会看到一个带有日期和时间的简单 UI。用户将选择每天的时间。并单击“完成”按钮。现在，这将启动警报服务，根据选定的时间每天触发。（并将在这些时间关闭/打开蓝牙设备）。现在我每天都在使用单独的服务（初学者的直觉）。该应用程序运行良好。现在我想要的是，当用户单击“完成”按钮时，应用程序应该继续在后台运行，当用户再次单击应用程序图标并单击“默认”按钮时，它应该停止所有服务。我怎样才能做到这一点？每周日触发服务代码如下

```
time interval of 7 x days for the alarm to repeat every 7 days
     long interval = 1000 * 60 * 60 * 24 * 7; // to make the alarm repeat at every 7 days

//getting values for hours, mins and AM/PM from the spinner boxes for sunday
    index = sunHr.getSelectedItemPosition();
 int sunHrInt  = Integer.parseInt(hrList[index]); 

 index = spinnerSunMin.getSelectedItemPosition();
 int sunMinInt  = Integer.parseInt(minList[index]);

 index = spinnerSunAmPm.getSelectedItemPosition();

   //conversion of time to 24 hrs format
 if (ampmList[index] == "AM") //(convert to 24 hr format)
 {
   if (sunHrInt == 12)   
   {
       sunHrInt = 0;
   }
   else
   {
       if (sunHrInt != 12)
       sunHrInt = sunHrInt + 12;
   }
 }

    //setting current calender
    Calendar cur_cal = new GregorianCalendar();
         cur_cal.setTimeInMillis(System.currentTimeMillis());//set the current time and date for this calendar
     //setting calender for sunday
      Calendar calSun = new GregorianCalendar();
       calSun.add(Calendar.DAY_OF_YEAR, cur_cal.get(Calendar.DAY_OF_YEAR));
       calSun.set(Calendar.HOUR_OF_DAY, sunHrInt);
       calSun.set(Calendar.MINUTE,sunMinInt);
       calSun.set(Calendar.SECOND, 0);
       calSun.set(Calendar.MILLISECOND, cur_cal.get(Calendar.MILLISECOND));
       calSun.set(Calendar.DATE, cur_cal.get(Calendar.DATE));
       calSun.set(Calendar.MONTH, cur_cal.get(Calendar.MONTH));

       //finding out when the sunday is to occur from today  

     days = 8 - calSun.get(Calendar.DAY_OF_WEEK); // how many days until Sunday

       if (days >= 7)
       {
           days = days - 7;
       }

       calSun.add(Calendar.DATE, days);

        //finally triggering the intent
 Intent myIntentSun = new Intent(AndroidAlarmService.this, SunOffAlarmService.class);
           pendingIntentSun = PendingIntent.getService(AndroidAlarmService.this, 0, myIntentSun, 0);
           AlarmManager alarmManagerSun = (AlarmManager)getSystemService(ALARM_SERVICE);
           alarmManagerSun.set(AlarmManager.RTC_WAKEUP, calSun.getTimeInMillis(), pendingIntentSun); 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-07T04:21:13.387

使用首选项来存储值并尝试一下。它可以帮助你

# iphone - 核心数据集FetchBatchSize

> ID：10476522
> 
> 赞同：1
> 
> 时间：2012-05-07T04:06:39.613
> 
> 标签：iphone, ios, core-data

我想知道为什么在使用从 coredata db 获取数据时使用 setFetchBatchSize 以及它有什么好处。我目前只是将一个 NSData blob 放入我的 coredata 数据库中，所以我想知道它是否适用于我，或者它是否用于 nsarrays 或类似的东西。

我已经阅读了它在苹果文档中所说的内容，但它并没有继续下去。

> 接收器的批量大小。批量大小为 0 被视为无限，这将禁用批量错误行为。

没有帮助很多.. 目前我已禁用 setFetchBatchSize 并且一切似乎仍在工作但是我想知道如果我启用它是否可以从中受益。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T06:02:05.337

如果您的表（实体）中有许多记录，并且您的 fetch 设置为从该表中检索许多记录，则故障是您的应用程序可以保留内存的一种方法。您的 fetchBatchSize 不会同时检索所有这些记录并将它们全部加载到内存中，而是将检索到的记录数限制在该限制范围内，并且会使剩余的记录出错——它们只会在需要时被提取。如果您设置了 fetchBatchSize，则会自动为您处理此错误。

希望这能澄清一些事情。

# android - 如何处理多个音频？

> ID：10476523
> 
> 赞同：-1
> 
> 时间：2012-05-07T04:06:43.473
> 
> 标签：android, audio, handler

我做了一个项目，屏幕上有两个文本视图。我使用 Ontouch 方法为两个文本视图设置了两个音频。所以当我触摸任何文本视图时，它都会播放声音。这是代码

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
final TextView tv = (TextView) findViewById(R.id.CustomFontText);
TextView tv1 = (TextView) findViewById(R.id.CustomFontText1);
Typeface tf = Typeface.createFromAsset(getAssets(),
"fonts/DroidSansFallback.ttf");
Typeface tf1 = Typeface.createFromAsset(getAssets(),
"fonts/DroidSans.ttf");
tv.setTypeface(tf);
tv1.setTypeface(tf1);

tv.setOnTouchListener(new OnTouchListener() {
   @Override
   public boolean onTouch(View v, MotionEvent event)   
   {  
       if(event.getAction() == MotionEvent.ACTION_DOWN)  
       {  
           if( v == findViewById( R.id.CustomFontText ))
           {
               MediaPlayer mp=MediaPlayer.create(getBaseContext(), R.raw.robotrock);
                mp.start();
       }  
       return false;  
   }
    return false;  
   }

       });  
 tv1.setOnTouchListener(new OnTouchListener() {
   @Override
   public boolean onTouch(View v, MotionEvent event)   
   {  
       if(event.getAction() == MotionEvent.ACTION_DOWN)  
       {  
           if( v == findViewById( R.id.CustomFontText1 ))
           {
               MediaPlayer mp1=MediaPlayer.create(getBaseContext(), R.raw.nam);
            mp1.start();
           }
       }  
       return false;  
   }  

       });
  }} 
```

我就是这样做的。问题是当我同时触摸两个文本视图时，两个音频都在播放。但是我想当我触摸一个文本视图时，音频会播放，如果我触摸另一个，前一个音频需要停止并播放文本视图被触摸的相应音频。那么我该如何处理它们？我需要在哪里实现或编辑我的代码？

**请帮忙！！！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:24:31.790

全局声明两个媒体播放器实例并尝试此代码

```
mp=MediaPlayer.create(getBaseContext(), R.raw.robotrock);
    mp1=MediaPlayer.create(getBaseContext(), R.raw.nam);

tv.setOnTouchListener(new OnTouchListener() {
   @Override
   public boolean onTouch(View v, MotionEvent event)   
   {  
       if(event.getAction() == MotionEvent.ACTION_DOWN)  
       {  
           if( v == findViewById( R.id.CustomFontText ))
           {
               mp1.stop();
                mp.start();
       }  
       return false;  
   }
    return false;  
   }

       });  
 tv1.setOnTouchListener(new OnTouchListener() {
   @Override
   public boolean onTouch(View v, MotionEvent event)   
   {  
       if(event.getAction() == MotionEvent.ACTION_DOWN)  
       {  
           if( v == findViewById( R.id.CustomFontText1 ))
           {
            mp.stop();
            mp1.start();
           }
       }  
       return false;  
   }  

       });
  }} 
```

我认为这将解决问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:39:18.400

我认为您已经创建了两个媒体播放器实例。你要做的是检查哪个正在播放并停止它。

```
tv.setOnTouchListener(new OnTouchListener() {
   @Override
   public boolean onTouch(View v, MotionEvent event)   
   {  
       if(event.getAction() == MotionEvent.ACTION_DOWN)  
       {  
           if( v == findViewById( R.id.CustomFontText ))
           {
               MediaPlayer mp=MediaPlayer.create(getBaseContext(), R.raw.robotrock);
               if (mp1 != null && mp1.isPlaying()) {
                   mp1.stop();
               }
                mp.start();
       }  
       return false;  
   }
    return false;  
   }

       });  
 tv1.setOnTouchListener(new OnTouchListener() {
   @Override
   public boolean onTouch(View v, MotionEvent event)   
   {  
       if(event.getAction() == MotionEvent.ACTION_DOWN)  
       {  
           if( v == findViewById( R.id.CustomFontText1 ))
           {
               MediaPlayer mp1=MediaPlayer.create(getBaseContext(), R.raw.nam);
               if (mp != null && mp.isPlaying()) {
                   mp.stop();
               }
            mp1.start();
           }
       }  
       return false;  
   } 
```

# regex - 正则表达式搜索“/”、“<”和“>”等字符

> ID：10476524
> 
> 赞同：0
> 
> 时间：2012-05-07T04:06:49.897
> 
> 标签：regex

如果我的文本包含“\ / > <”等字符并且我想找到它们，那么正则表达式模式应该是什么。这是因为正则表达式将“/”视为搜索模式的一部分，而不是单个字符。

例如，我想`Super Kings`从字符串中查找`<span>Super Kings</span>`，使用 VB 2010。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:10:53.897

**试试这个：**

```
\bYour_Keyword_to_find\b 
```

`\b`在 RegEx 中用于匹配单词边界。

[编辑]

你可能正在寻找这个：

```
(?<=<span>)([^<>]+?)(?=</span>) 
```

**解释：**

```
<!--
(?<=<span>)([^<>]+?)(?=</span>)

Options: case insensitive; ^ and $ match at line breaks

Assert that the regex below can be matched, with the match ending at this position (positive lookbehind) «(?<=<span>)»
   Match the characters “&lt;span>” literally «<span>»
Match the regular expression below and capture its match into backreference number 1 «([^<>]+?)»
   Match a single character NOT present in the list “&lt;>” «[^<>]+?»
      Between one and unlimited times, as few times as possible, expanding as needed (lazy) «+?»
Assert that the regex below can be matched, starting at this position (positive lookahead) «(?=</span>)»
   Match the characters “&lt;/span>” literally «</span>»
--> 
```

[/编辑]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T04:19:24.087

在正则表达式中，您必须转义`/`with `\`。

例如，尝试：或~~`<span>(.*)<\/span>`~~ `<span>([^<]*)<\/span>``<span>(.*?)<\/span>`

阅读更多内容： [http ://www.regular-expressions.info/characters.html](http://www.regular-expressions.info/characters.html)

# javascript - 动画 HTML 背景图像淡入淡出

> ID：10476525
> 
> 赞同：1
> 
> 时间：2012-05-07T04:06:52.133
> 
> 标签：javascript, jquery, html, css

我有一个网站，其中背景图像被拉伸以适合整个屏幕。有点击会改变背景图像的缩略图。我试图在背景图像发生变化时发生交叉淡入淡出过渡，但我似乎无法让它工作。

现在，当单击缩略图时，整个屏幕（包括内容）淡出，然后以正确的背景图像淡入。我不希望内容淡出...我只是想让背景图像淡出。我认为我的问题是我告诉整个 HTML 页面淡出，但我不确定如何仅针对整个站点的背景图像。

CSS

```
html {
    background: url(../img/01.jpg) no-repeat center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

JavaScript

```
$("#wrapper #thumbs figure img").click(function() {
    var id = $(this).attr('id');        
    $('html').fadeOut("slow", function() { });
    $('html').fadeIn("slow", function() {
        $('html').css('background', 'url(' + images[id] + ') no-repeat center fixed');
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:14:02.690

您不应该为此定位 HTML 元素，而应使用多个`div`s 来表示正文的整个大小。然后，您可以根据需要指定`z-index`一次获得适当的堆叠和交叉淡入淡出两个元素。

我已经在这个[jsFiddle](http://jsfiddle.net/jonypawks/vKB68/1/)中举了一个开始的例子。虽然这是一个快速滚动您自己的背景褪色方法的示例，但如果 Avinash 的答案适合您的用例，它可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T04:22:44.693

您是否尝试过使用[**Backstretch**](http://srobbin.com/jquery-plugins/backstretch/)？

# cocoa-touch - 如何在被父视图部分裁剪的子视图上触发 UITapGestureRecognizer？

> ID：10476529
> 
> 赞同：5
> 
> 时间：2012-05-07T04:07:22.203
> 
> 标签：cocoa-touch, uiview, uigesturerecognizer

设置：我有父视图 A。它有一个子视图 B。B 部分位于 A 的边界内，但部分位于 A 的边界之外（A 的 clipsToBounds=false）。我已将 UITapGestureRecognizer (UITGR) 附加到 B.

观察到：当我点击 A 范围内的 B 部分时，UITGR 触发 OK。当我点击 A 范围之外的 B 部分时，UITGR 不会触发。

预期/问题：当我点击 A 边界之外的 B 部分时，如何使 UITGR 触发？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T08:31:08.547

这句话将回答你关于它*为什么*会这样的问题：

> 触摸事件。窗口对象使用命中测试和响应者链来找到接收触摸事件的视图。在命中测试中，窗口在视图层次结构的最顶层视图上调用 hitTest:withEvent:；此方法通过在视图层次结构中返回 YES 的每个视图上递归调用 pointInside:withEvent: 来继续，沿着层次结构向下进行，直到找到发生触摸的子视图。该视图成为命中测试视图。（[来源](https://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/EventsiPhoneOS/EventsiPhoneOS.html#//apple_ref/doc/uid/TP40009541-CH2-SW4)）

`UITapInSubviewsView`一种解决方法是使用以下定义创建您自己的`hitTest`：

```
(UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
    NSEnumerator *reverseE = [self.subviews reverseObjectEnumerator];
    UIView *iSubView;
    while ((iSubView = [reverseE nextObject])) {

        UIView *viewWasHit = [iSubView hitTest:[self convertPoint:point toView:iSubView] withEvent:event];
        if(viewWasHit)
           return viewWasHit;
     }
     return [super hitTest:point withEvent:event];
} 
```

然后你将这个类用于你的父视图。

（几周前我在 SO 的一篇帖子中找到了这段代码，但我似乎再也找不到它了；所以只是从我的项目中复制了它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-15T21:06:58.220

更新[@sergio](https://stackoverflow.com/users/671858/sergio)对**Swift 4.2**的回答：

```
override func hitTest(_ point: CGPoint, with event: UIEvent?) -> UIView? {
    let reversedSubviews = subviews.reversed()
    let hitSubview = reversedSubviews
        .first(where: { $0.hitTest(convert(point, to: $0), with: event) != nil })
    if hitSubview != nil {
        return hitSubview
    }

    return super.hitTest(point, with: event)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:38:53.327

您必须为视图 A 编写自己的 hittest 函数。

还要看这个问题：[UITapGestureRecognizer not trigger in deep view hiearchy](https://stackoverflow.com/questions/6871946/uitapgesturerecognizer-not-triggered-in-deep-view-hiearchy/6872802#6872802)

# vb.net - VB.NET 移动动态嵌入无边框表单

> ID：10476530
> 
> 赞同：1
> 
> 时间：2012-05-07T04:07:32.740
> 
> 标签：vb.net, forms, dynamic, drag-and-drop, move

正如您从下面提供的代码和标题中看到的那样，我在试图弄清楚如何在 VB.NET 中移动这个动态嵌入的无边框表单时遇到了麻烦。

```
Private Sub AddWidget_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles AddWidget.Click
        Dim WidgetForm As Form
        WidgetForm = New Form()
        WidgetForm.ShowInTaskbar = False
        WidgetForm.TopMost = True
        WidgetForm.FormBorderStyle = Windows.Forms.FormBorderStyle.None
        WidgetForm.BackgroundImage = Image.FromFile(Me.OpenFileDialog1.FileName)
        WidgetForm.BackgroundImageLayout = ImageLayout.Stretch
        WidgetForm.Show()

        opac = Me.OpacInt.Text
        WidgetForm.Opacity = opac

        sizew = Me.WidgetW.Text
        sizey = Me.WidgetY.Text
        WidgetForm.Size = New System.Drawing.Size(sizew, sizey)
    End Sub 
```

我过去曾多次使用此方法（下面的代码），它似乎总是适用于移动表单，但我不确定如何将其应用于动态嵌入的表单。

任何帮助将不胜感激。

```
Private Sub Form1_MouseDown(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseDown
    If e.Button = Windows.Forms.MouseButtons.Left Then
        drag = True
        mousex = Windows.Forms.Cursor.Position.X - Me.Left
        mousey = Windows.Forms.Cursor.Position.Y - Me.Top
    End If

    Timer1.Enabled = True
    Timer1.Interval = 2500
End Sub

Private Sub Form1_MouseMove(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseMove
    If drag Then
        Me.Top = Windows.Forms.Cursor.Position.Y - mousey
        Me.Left = Windows.Forms.Cursor.Position.X - mousex
    End If
End Sub

Private Sub Form1_MouseUp(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseUp
    Timer1.Enabled = False
    drag = False
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:24:52.883

动态形式的表现与正常形式相同。首先，您需要在创建动态表单时为其添加一些事件

```
Public WidgetForm As Form

Private Sub AddWidget_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles AddWidget.Click

    WidgetForm = New Form()
    WidgetForm.ShowInTaskbar = False
    WidgetForm.TopMost = True
    WidgetForm.FormBorderStyle = Windows.Forms.FormBorderStyle.None
    WidgetForm.BackgroundImage = Image.FromFile(Me.OpenFileDialog1.FileName)
    WidgetForm.BackgroundImageLayout = ImageLayout.Stretch
    WidgetForm.Show()

    opac = Me.OpacInt.Text
    WidgetForm.Opacity = opac

    sizew = Me.WidgetW.Text
    sizey = Me.WidgetY.Text
    WidgetForm.Size = New System.Drawing.Size(sizew, sizey)

    'Add the event here
    AddHandler WidgetForm.MouseDown, AddressOf WidgetForm_MouseDown
    AddHandler WidgetForm.MouseMove, AddressOf WidgetForm_MouseMove
    AddHandler WidgetForm.MouseUp, AddressOf WidgetForm_MouseUp
End Sub 
```

然后您可以通过事件处理程序移动表单

```
Private Sub WidgetForm_MouseDown(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) 
    If e.Button = Windows.Forms.MouseButtons.Left Then
        drag = True
        mousex = Windows.Forms.Cursor.Position.X - CType(sender, Form).Left
        mousey = Windows.Forms.Cursor.Position.Y - CType(sender, Form).Top
    End If

    Timer1.Enabled = True
    Timer1.Interval = 2500
End Sub

Private Sub WidgetForm_MouseMove(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs)
    If drag Then
        CType(sender, Form).Top = Windows.Forms.Cursor.Position.Y - mousey
        CType(sender, Form).Left = Windows.Forms.Cursor.Position.X - mousex
    End If
End Sub

Private Sub WidgetForm_MouseUp(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) 
    Timer1.Enabled = False
    drag = False
End Sub 
```

# php - 我的 php 爆炸有什么问题？

> ID：10476531
> 
> 赞同：-1
> 
> 时间：2012-05-07T04:08:28.587
> 
> 标签：php, string, split, explode

我有一串html代码。在这个 html 代码中，我有一个所谓的“html 分隔符”，它有助于将 html 代码拆分成更小的块。

分隔符的格式为

```
<br class="limit" /> 
```

html代码如下

```
<p>To be A Premier in Global Distinction<br class="limit" />To be A Premier Polytechnic of Global Distinction&nbsp;<br class="limit" />We provide quality education and training to prepare students and adult learners for work and life, equipping them to be life-long learners <br class="limit" />We will harness our resources, expertise, creativity and innovation to support the development of business and industry.</p> 
```

这是我的php代码

```
$htmlparts = explode("<br class='limit' />", $htmlcode);
echo $htmlparts [0];
echo $htmlparts [1];
echo $htmlparts [2]; 
```

正确 $htmlparts [0] 应该返回我

要成为全球杰出的总理，$htmlparts[1] 应该让我成为全球杰出的总理理工学院等等。

通过它无法分裂。感谢任何专家的建议。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T04:09:43.310

您的 html 示例有`"limit"`, 当您尝试爆炸时`'limit'`- 请注意引用样式的差异。Explode 需要在分隔符上完全匹配。由于您使用不同的引号，因此永远不会匹配，因此不会爆炸。

# jquery - 如何使用 jQuery 更改/编辑段落/div 的文本？

> ID：10476533
> 
> 赞同：2
> 
> 时间：2012-05-07T04:08:41.070
> 
> 标签：jquery, edit, paragraph

现在我要做的是更改/编辑段落和/或 div 标签的文本。这两个元素都是使用自己的增量 ID 动态创建的。我希望用户能够在 textarea 中输入文本，这将更改段落或 div 的文本。当他们选择段落或 div 时，应该会出现一个文本区域，以便用户可以更新文本。

问题：因为我在两个元素上都设置了增量 ID，所以我很难得到它们。

我怎样才能做到这一点？

这是我一直在处理的代码

[http://jsfiddle.net/RzvV5/93/](http://jsfiddle.net/RzvV5/93/)

jQuery：

```
$(document).ready(function(){

var pid = 1;
$("#addP").on({
    click: function(){
        var pr = $('<p />').attr({'class':'test', 'id':'paragraph_' + pid}).text('This is a paragraph ' + pid);
        var d = $("#Test");
        var pclone = $(pr).clone();
        pclone.on({
            mouseenter: function(){    
                $(this).addClass("inside");
            },
            mouseleave: function(){                             
                $(this).removeClass("inside"); 
            },
                    });
        pclone.appendTo(d);
pid++;
    }
});
var divid = 1;
$("#addDiv").on({
    click: function(){
        var pr = $('<div />').attr({'class':'test', 'id':'div_' +     divid}).text('This is a div ' + divid);
        var d = $("#Test");
        var pclone = $(pr).clone();
        pclone.on({
            mouseenter: function(){    
                $(this).addClass("inside");
            },
            mouseleave: function(){                             
                $(this).removeClass("inside"); 
            },
                    });
        pclone.appendTo(d);
divid++;
    }
});

var div =  $('<div class="customD" id="d"></div>');
var del = $('<a href="#" class="delete" id="erase">Delete</a>');

$('#updateP').hide();
$('#updateD').hide();

var flag = false;
$("#Test").on("click", "p", function(){ 
var cur = $(this).css("background-color");

   if(cur=="rgb(255, 255, 255)") {  
       if(flag==false){
           $('#updateP').show();
            $('#updateD').show();

    $(this).css("background-color","#FDD").addClass("help insider").after(div);
flag = true;

}

}
else { 
 $('#updateP').hide();
 $('#updateD').hide();

            $(this).css("background-color","white").removeClass('help insider');
 $(div).remove();
flag = false;
}    
$(div).append(del);  

$(".delete").on("click",function(){
    $(this).parent().prev().remove();
$(this).remove();
flag = false;

});

}); 

$('#updateP').change(function(){
var a = $(this).val();
$('p').text(a);

});
id++;     
}); 
```

HTML：

```
 <a href="#" id="addP">P tag</a> or <a href="#" id="addDiv">Div   tag</a><br/><br/>
    <textarea id="updateP"></textarea>
    <textarea id="updateD"></textarea>

    <div id="Test"></div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T05:57:40.213

有一个比您正在尝试的大页代码更简单的解决方案。最好的方法是：

*   设置保存点击的div/p的事件
*   制作一个 JavaScript 函数来显示一个文本区域
*   用 div/p 的内容填充 textarea
*   添加一个保存按钮，更新点击的 div/p
*   当他们想再次隐藏文本区域时添加一个关闭按钮

我制作了一个**[简单的 jsFiddle](http://jsfiddle.net/BenjaminRH/467S5/)**，完美地说明了这一点。

编辑：我已经更新了 jsFiddle。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T05:48:08.620

如果我的问题是正确的，并且 div 和段落的增量 id 部分是相同的，你可以试试这个：`div_class`为每个 div 添加一个类说。然后

```
$('.div_class').keydown(function() {//Use appropriate listener
//get the incremental_id part from the div
var incremental_id = $(this).attr('id').substring(4);

var text = $(this).text();
//Copy the text into para using appropriate function. I have assumed text will work.
$('#para_'+incremental_id).text(text);
}); 
```

我假设在 div 中输入，并将其复制到 para。根据您的需要使用。根据需要使用 On/Live。

# android - 如何根据android中本机相机拍摄的照片动态更新图片库？

> ID：10476536
> 
> 赞同：0
> 
> 时间：2012-05-07T04:08:57.043
> 
> 标签：android, android-camera, image-gallery

这是我的图片库代码。到目前为止，出于测试目的，我直接使用了一些手动存储的图像，

```
public class Photo_Gallery extends Activity
{    
//---the images to display---
Integer[] imageIDs = {
        R.drawable.a,
        R.drawable.b,
        R.drawable.c,
        R.drawable.d,
        R.drawable.e,
};

@Override    
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.displayview);

    Gallery gallery = (Gallery) findViewById(R.id.gallery1);

    gallery.setAdapter(new ImageAdapter(this));        
    gallery.setOnItemClickListener(new OnItemClickListener() 
    {
        public void onItemClick(AdapterView parent, View v, int position, long id) 
                {                
                    //---display the images selected---
                    ImageView imageView = (ImageView) findViewById(R.id.image1);                
                    imageView.setImageResource(imageIDs[position]);
                }
    });
}

public class ImageAdapter extends BaseAdapter 
{
    private Context context;
    private int itemBackground;

    public ImageAdapter(Context c) 
    {
        context = c;
        //---setting the style---
        TypedArray a = obtainStyledAttributes(R.styleable.Gallery1);
        itemBackground = a.getResourceId(
            R.styleable.Gallery1_android_galleryItemBackground, 0);
        a.recycle();                    
    }

    //---returns the number of images---
    public int getCount() {
        return imageIDs.length;
    }

    //---returns the ID of an item--- 
    public Object getItem(int position) {
        return position;
    }            

    public long getItemId(int position) {
        return position;
    }

    //---returns an ImageView view---
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView = new ImageView(context);
        imageView.setImageResource(imageIDs[position]);
        imageView.setScaleType(ImageView.ScaleType.FIT_XY);
        imageView.setLayoutParams(new Gallery.LayoutParams(75, 60));
        imageView.setBackgroundResource(itemBackground);
        return imageView;
    }
} 
```

}

这是我用来捕获图像的代码。

```
 case R.id.takeSnapBtn:

        try {

            i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(i, imageData);

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

以下是onActivityResult()，

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {

        Bundle extras = data.getExtras();
        bmp = (Bitmap) extras.get("data");

        imageView.setImageBitmap(bmp);

    }

} 
```

如果有人向我提供如何使用从相机拍摄的图像动态更新图库的示例，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:42:43.777

存储从应用程序捕获的图像并将这些图像从 sd 卡读取到图库..

```
File sdDir = new File("/sdcard/Pictures/YOUR_DIR");
sdDirFiles = sdDir.listFiles();
for (i = 0; i < sdDirFiles.length; i++) {
//ADD to gallery HERE..
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T05:46:04.327

```
如果您在特定存储桶（文件夹）的 sdcard 下获取所有图像，则使用此代码...
```

```
public class SubGalleryView extends Activity {

    private ArrayList<Integer> ImageIds = new ArrayList<Integer>();
    private GridView subGalleryView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sub_gallery_view);

            //Provide Bucket_Name/Folder_Name Using Bundle.

        Bundle bundle = getIntent().getExtras();
        Toast.makeText(this, bundle.getString("Bucket_Name"),
                Toast.LENGTH_SHORT).show();

            //Using Projection We get all images of all folder.
        String[] projection = new String[] { MediaStore.Images.Media._ID,
                MediaStore.Images.ImageColumns.BUCKET_DISPLAY_NAME };
        Cursor cursor = managedQuery(
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI, projection, null,
                null, null);
        cursor.moveToFirst();
        if (cursor.getCount() > 0) {
                    //using this do{}while(); we get all image_id under perticular bucket. and strored in ArrayList of ImagesIds.
            do {
                int columnIndex = cursor
                        .getColumnIndexOrThrow(MediaStore.Images.ImageColumns.BUCKET_DISPLAY_NAME);
                if (cursor.getString(columnIndex).equalsIgnoreCase(
                        bundle.getString("Bucket_Name"))) {
                    columnIndex = cursor
                            .getColumnIndexOrThrow(MediaStore.Images.Thumbnails._ID);
                    int imageID = cursor.getInt(columnIndex);
                    ImageIds.add(imageID);
                } else if (bundle.getString("Bucket_Name").equalsIgnoreCase(
                        "All Pictures")) {
                    columnIndex = cursor
                            .getColumnIndexOrThrow(MediaStore.Images.Thumbnails._ID);
                    int imageID = cursor.getInt(columnIndex);
                    ImageIds.add(imageID);
                }
            } while (cursor.moveToNext());
        }

            //Pass ImageIds arrayList to Adapter.
        subGalleryAdapter imageAdapter = new subGalleryAdapter(
                SubGalleryView.this, R.layout.sub_gallery_view_item, ImageIds);
        subGalleryView = (GridView) findViewById(R.id.subGallery);
        subGalleryView.setAdapter(imageAdapter);
    }

    public class subGalleryAdapter extends ArrayAdapter<Integer> {

        private Context contex;
        private int resourceId;
        private LayoutInflater layoutInflater = null;
        private ArrayList<Integer> mlist;

        public subGalleryAdapter(Activity context, int resourceId,
                ArrayList<Integer> list) {
            super(context, resourceId, list);
            this.mlist = list;
            this.contex = context;
            this.resourceId = resourceId;
            this.layoutInflater = context.getLayoutInflater();

        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            ImageView viewHolder;
            if (convertView == null) {
                viewHolder = new ImageView(contex);
                convertView = layoutInflater.inflate(resourceId, parent, false);
                viewHolder = (ImageView) convertView
                        .findViewById(R.id.imageView1);

            } else {
                viewHolder = (ImageView) convertView
                        .findViewById(R.id.imageView1);
            }
            viewHolder.setImageURI(Uri.withAppendedPath(
                    MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                    "" + mlist.get(position)));
            return convertView;
        }

    }
} 
```

```
使用此代码，您可以从特定文件夹中获取所有图像，并在捆绑包中传递存储桶显示名称。如果您从 sdcard 中获取所有存储桶（文件夹）的所有图像，则使用此代码
```

```
public class SubGalleryViewy extends Activity {

private Cursor cursor;

private int columnIndex;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sdcard);

    // Set up an array of the Thumbnail Image ID column we want
    String[] projection = {MediaStore.Images.Thumbnails._ID};
    // Create the cursor pointing to the SDCard
    cursor = managedQuery( MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI,
            projection, // Which columns to return
            null,       // Return all rows
            null,
            MediaStore.Images.Thumbnails.IMAGE_ID);
    // Get the column index of the Thumbnails Image ID
    columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails._ID);

    GridView sdcardImages = (GridView) findViewById(R.id.sdcard);
    sdcardImages.setAdapter(new ImageAdapter(this));

    // Set up a click listener
    sdcardImages.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView parent, View v, int position, long id) {
            // Get the data location of the image
            String[] projection = {MediaStore.Images.Media.DATA};
            cursor = managedQuery( MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                    projection, // Which columns to return
                    null,       // Return all rows
                    null,
                    null);
            columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            cursor.moveToPosition(position);
            // Get image filename
            String imagePath = cursor.getString(columnIndex);
            // Use this path to do further processing, i.e. full screen display
        }
    });
}

/**
 * Adapter for our image files.
 */
private class ImageAdapter extends BaseAdapter {

    private Context context;

    public ImageAdapter(Context localContext) {
        context = localContext;
    }

    public int getCount() {
        return cursor.getCount();
    }
    public Object getItem(int position) {
        return position;
    }
    public long getItemId(int position) {
        return position;
    }
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView picturesView;
        if (convertView == null) {
            picturesView = new ImageView(context);
            // Move cursor to current position
            cursor.moveToPosition(position);
            // Get the current value for the requested column
            int imageID = cursor.getInt(columnIndex);
            // Set the content of the image based on the provided URI
            picturesView.setImageURI(Uri.withAppendedPath(
                    MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, "" + imageID));
            picturesView.setScaleType(ImageView.ScaleType.FIT_CENTER);
            picturesView.setPadding(8, 8, 8, 8);
            picturesView.setLayoutParams(new GridView.LayoutParams(100, 100));
        }
        else {
            picturesView = (ImageView)convertView;
        }

           return picturesView;
        }
    }
} 
```

# java - 实例化泛型的参数

> ID：10476538
> 
> 赞同：6
> 
> 时间：2012-05-07T04:09:08.130
> 
> 标签：java, generics

我正在学习 Java 的泛型，在实例化从泛型参数接收到的类型时遇到了一些问题（尽管这在 C# 中是可能的）

```
class Person { 
    public static <T> T say() {
        return new T; // this has error
    }
} 
```

我试过这个：[Java中的泛型-实例化T](https://stackoverflow.com/questions/8173844/generics-in-java-instantiating-t)

```
public static <T> T say(Class<?> t) {
    return t.newInstance();
} 
```

错误：

```
incompatible types
found   : capture#426 of ?
        required: T 
```

那是行不通的。下面看起来不错，但它需要实例化一些类，不能用于静态方法：[Instantiating generics type in java](https://stackoverflow.com/questions/2434041/instantiating-generics-type-in-java)

```
public class Abc<T>
 {

    public T getInstanceOfT(Class<T> aClass)
    {
       return aClass.newInstance();
    }      

} 
```

这是Java 人所说的**类型擦除吗？**这是类型擦除的限制吗？

这个问题的解决方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T04:19:07.813

你非常亲近。您需要将`Class<?>`（表示“任何类型的类”）替换为`Class<T>`（表示“T 类型的类”）：

```
public static <T> T say(Class<T> t) throws IllegalAccessException, InstantiationException {
    return t.newInstance();
} 
```

# android - 编译 Android 时的内核和平台文件

> ID：10476543
> 
> 赞同：0
> 
> 时间：2012-05-07T04:10:23.730
> 
> 标签：android, kernel, platform, android-source

我为我的设备编译了内核文件，但是我不知道平台文件的用途。你能告诉我“内核”和“平台”文件的功能是什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:51:46.243

Android OS 由 4 个主要部分组成：Linux 内核、核心库、应用程序框架和应用程序。因此，Android 中与 Linux Kernel 相关的所有内容通常称为内核，而所有其他层（可能除了应用程序）都是平台。当您下载 AOSP（请参阅[source.android.com](http://source.android.com/source/index.html)上的说明）时，您会下载通常预构建内核的平台。但是您可以单独下载内核并对其进行修改（您所做的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:51:57.323

Android操作系统大致可以分为两部分——

*   Linux 内核

*   安卓框架。

Android 框架位于 linux 内核之上，它被称为**平台**。平台代码由窗口管理器、事件管理器等组成。它处理诸如触摸屏幕时应该发生的事情、如何绘制窗口以及许多其他事情。linux 内核提供了调度程序（操作系统的核心）、与硬件交互的驱动程序以及许多其他东西。

简而言之，平台在底层内核的帮助下与用户对话。*一般来说*，在android中，大部分平台代码是java，内核代码主要是C。

因此，除非您修改了一些平台 java 文件，否则您不需要编译它。你的`random.c`and`cipher.c`应该是内核的一部分，而不是平台的一部分

# c++ - 控制台 cout 动画 - C++

> ID：10476550
> 
> 赞同：1
> 
> 时间：2012-05-07T04:11:55.760
> 
> 标签：c++, windows, console

我想为我正在制作的 40x20 字符块制作动画`cout`。我想清除控制台，`system("cls");`然后立即出现下一个字符块。目前，下一个区块是打字机风格。

对我的问题最简单的答案就是一次拥有一个 20 行 x 40 个字符的 oss 流 cout，而不是打字机风格。

主要.cpp：

```
 mazeCreator.cout();
    Sleep(5000);
    system("cls"); 
```

cout()

```
void MazeCreator::cout() {
    char wallChar = (char) 219;
    char pavedChar = (char) 176;
    char lightChar = ' ';
    char startChar = 'S';
    char finishChar = 'F';
    char errorChar = '!';
    char removedWallChar = 'R';
    char landmarkLocationChar = 'L';

    ostringstream oss;
    for (int row = 0; row < rows; row++) {
        oss << " ";
        for (int col = 0; col < columns; col++) {
            if (mazeArray[row][col] == wall)
                oss << wallChar;
            else if (mazeArray[row][col] == paved)
                oss << pavedChar;
            else if (mazeArray[row][col] == light)
                oss << lightChar;
            else if (mazeArray[row][col] == start)
                oss << startChar;
            else if (mazeArray[row][col] == finish)
                oss << finishChar;
            else if (mazeArray[row][col] == removedWall)
                oss << removedWallChar;
            else if (mazeArray[row][col] == landmarkLocation)
                oss << landmarkLocationChar;
            else
                oss << errorChar;
        }
        oss << "\n";
    }
    oss << "\n\n";

    cout << oss.str();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:27:07.223

您可以在代码中维护两个二维数组，一个包含屏幕上的当前字符块（我们称之为它`cur`），一个包含下一个块（我们称之为它`next`）。

假设`cur`存储现在屏幕上的块。通过写入`next`数组来设置下一个块。当您准备好将其放在屏幕上时，请同时循环播放，并且`cur`仅*针对它们不同的字符*，使用跳转到该位置并写入新字符。`next`*`SetConsoleCursorPosition`*

 *完成后，复制`next`into的内容`cur`并继续下一个块。

**更新**：这是一个例子：

```
class console_buffer
{
public:
    console_buffer(int rows, int columns) 
                   // start out with spaces
                 : cur(rows, vector<char>(columns, ' ')), 
                   next(rows, vector<char>(columns, ' '))
    {
    }

    void sync()
    {
        // Loop over all positions
        for (int row = 0; row < cur.size(); ++row)
            for (int col = 0; col < cur[row].size(); ++col)

                // If the character at this position has changed
                if (cur[row][col] != next[row][col])
                {
                    // Move cursor to position
                    COORD c = {row, col};
                    SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), c);

                    // Overwrite character
                    cout.put(next[row][col]);
                }

         // 'next' is the new 'cur'
         cur = next;
    }

    void put(char c, int row, int col)
    {
        next[row][col] = c;
    }
private:
    vector<vector<char> > cur;
    vector<vector<char> > next;
};

...

int main()
{
    console_buffer buf(40, 20);

    // set up first block
    ... some calls to buf.put() ...

    // make first block appear on screen
    buf.sync();

    // set up next block
    ... some calls to buf.put()

    // make next block appear on screen
    buf.sync();

    // etc.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:26:22.400

[您可以使用CreateConsoleScreenBuffer](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682122%28v=vs.85%29.aspx)实现双缓冲。这些方面的东西应该起作用。我用过一次，很久以前，所以它可能并不完美。

```
HANDLE current = GetStdHandle (STD_OUTPUT_HANDLE);

HANDLE buffer = CreateConsoleScreenBuffer (
    GENERIC_WRITE,
    0,
    NULL,
    CONSOLE_TEXTMODE_BUFFER,
    NULL
);

WriteConsole (/*fill with what you're drawing*/);

system ("cls"); //clear this screen before swapping    
SetConsoleActiveScreenBuffer (buffer);

WriteConsole (/*do it to the other one now*/);

system ("cls");    
SetConsoleActiveScreenBuffer (current); //swap again

//repeat as needed

CloseHandle (buffer); //clean up 
```*

# c - 接收 SIGSEGV 的程序可能是针对 0xffffffff 的指针

> ID：10476552
> 
> 赞同：2
> 
> 时间：2012-05-07T04:13:04.763
> 
> 标签：c, segmentation-fault

我正在用户空间中调试一个程序，并且正在接收一个`SIGSEGV`我认为可能是 value 的指针`0xffffffff`。

我想知道是否`0xffffffff`是一个有效的指针地址？？

我使用了 GDB，下面是代码列表：

```
1414
1415        /* convert object handle */
1416        file = (PSLhandle_t*)hFile;
1417
1418        /* param check */
1419        if(file->hobject.fdesc == 0)   <----------------- it may be crashing here
1420            return INVALID_SET_FILE_POINTER;

----------------- during debugging---------------------------

1412        if((hFile == NULL) || (lpBuffer == NULL))
(gdb) s
1419        if(file->hobject.fdesc == 0)
(gdb) print file
No symbol "file" in current context.
(gdb) print hFile
$1 = (HANDLE) 0xffffffff
(gdb) s

Program received signal SIGSEGV, Segmentation fault.
WriteFile (hFile=0xffffffff, lpBuffer=0xb7f69294, nNumberOfBytesToWrite=65516, lpNumberOfBytesWritten=0xb3933238,
    lpOverlapped=0x0) at PSLWinWrapper.c:1419
1419        if(file->hobject.fdesc == 0) 
```

我正在使用 Linux ，

[root@DellB app]# uname -a Linux DellB 2.6.23.1-42.fc8 #1 SMP 2007 i686 i686 i386 GNU/Linux

我已经检查过了`NULL`。

```
/* param check */
if((hFile == NULL) || (lpBuffer == NULL)) <-------- CHECKED ALREADY FOR NULL
    return INVALID_SET_FILE_POINTER;

/* convert object handle */
file = (PSLhandle_t*)hFile;

/* param check */
if(file->hobject.fdesc == 0) <-------------- CRASH HERE
    return INVALID_SET_FILE_POINTER; 
```

我想知道是否`0xffffffff`是一个有效的指针地址？是否有任何 API 可以验证指针在用户空间中的 LINUX 上是否有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T04:14:28.817

我相信，至少在 32 位系统上`0xffffffff`是这样。`INVALID_HANDLE_VALUE`

许多 Windows API 函数返回`INVALID_HANDLE_VALUE`以指示发生了错误。例如，来自`CreateFile`文档（[s​​ource](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx)）：

> ### 返回值
> 
> 如果函数成功，则返回值是指定文件、设备、命名管道或邮槽的打开句柄。
> 
> 如果函数失败，则返回值为`INVALID_HANDLE_VALUE`。要获取扩展的错误信息，请调用`GetLastError`。

通常，任何指针值*都可以*指向有效内存，包括`NULL`. 但是许多操作系统和语言运行时为无效页面保留了一个接近 0 的空间，以便为程序员在取消引用时提供有用的崩溃`NULL`。这个空间可以双向扩展，在这种情况下，它包括`0xffffffff`在 32 位系统上。并且 C/C++ 系统中的任何对象都不会有地址 at `NULL`（所以如果 有什么东西`NULL`，最好不要管它）。

**您的第二个问题：**是的，有一种方法可以检查指针是否指向 Linux 上的有效内存（这与“有效指针”的概念略有不同）。取消引用指针并查看您的程序是否存在段错误。安装信号处理程序来捕获故障，使用长跳转从信号处理程序返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T06:18:31.860

`NULL`不是唯一无效的指针值。
通常，访问任何不是以正常方式之一获得的指针（例如变量的地址或 的返回值`malloc`）都是未定义的行为。这并不意味着访问它会崩溃，但它确实意味着它可能会崩溃。

所以测试`NULL`并不能保证指针是有效的。

具体来说，`0xffffffff`在几乎任何常见平台上都是无效的。
即使它是有效的，并且指向内存中的最后一个字节，你也只能访问这个字节，因为后面的字节在 address `0`，这肯定是无效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T05:16:59.000

具体来说，0xffffffff 是 32 位有符号整数 -1 的无符号值。您的问题的一个可能原因是任何返回 hFile 值的函数都会出错并返回 -1。当返回类型是指针时，大多数理智的程序在出错时返回 NULL，它的整数值为 0。这种情况可能是个例外。您能显示最初分配 hFile 的位置吗？

# javascript - __proto__，什么时候会消失？备择方案？

> ID：10476560
> 
> 赞同：16
> 
> 时间：2012-05-07T04:14:22.343
> 
> 标签：javascript, prototype-programming

Mozilla 声称它会在不久前（~2008 年）删除 __proto__ 并且它仍然在浏览器中。它还会被弃用吗？它也适用于 Opera（我认为是 Safari）和 Chrome。我不需要担心 IE，所以我很想继续使用它。

但是，我不希望我的代码有一天停止工作，所以我的问题是：

__proto__ 允许简单的继承：

```
a.__proto__ = {'a':'test'} 
```

无论如何我可以以符合标准的方式复制它吗？我知道有函数继承，这很丑陋，而且它使我只想创建一个原型链的事实过于复杂。只是想知道是否有任何巫师解决了这个问题。

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-07T05:46:00.443

**注意：**更改[`__proto__`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/proto). JavaScript 的创建者 Brendan Eich 等人强烈反对这样做。事实上，该[`__proto__`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/proto)属性已从一些 JavaScript 引擎（如 Rhino）中完全删除。如果您想知道原因，请阅读 Brendan Eich 的[以下评论](http://brendaneich.com/2011/01/harmony-of-my-dreams/#div-comment-6121 "我梦想的和谐 |  布伦丹·艾希")。

**更新：**浏览器不会删除该[`__proto__`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/proto)属性。事实上，[ECMAScript Harmony](http://wiki.ecmascript.org/doku.php)现在已经标准化了[`__proto__`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/proto)属性和[`setPrototypeOf`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf)函数。[`__proto__`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/proto)仅出于遗留原因支持该属性。强烈建议您使用[`setPrototypeOf`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf)and[`getPrototypeOf`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getPrototypeOf)而不是[`__proto__`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/proto).

**警告：**虽然[`setPrototypeOf`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf)现在是一个标准，但您仍然不鼓励使用它，因为改变对象的原型总是会破坏优化并使您的代码变慢。此外，使用[`setPrototypeOf`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf)通常表示代码质量差。

* * *

你不必担心你现有的代码有一天会失效。该[`__proto__`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/proto)物业将留在这里。

现在，对于手头的问题。我们希望以符合标准的方式做类似的事情：

```
var a = {
    b: "ok"
};

a.__proto__ = {
    a: "test"
};

alert(a.a); // alerts test
alert(a.b); // alerts ok 
```

显然你不能用它`Object.create`来达到这个目的，因为我们没有创建一个新对象。我们只是试图改变`[[proto]]`给定对象的内部属性。`[[proto]]`问题是一旦创建对象就不可能改变它的内部属性（除了`__proto__`我们试图避免的使用）。

所以为了解决这个问题，我写了一个简单的函数（注意它适用于除函数之外的所有对象）：

```
function setPrototypeOf(obj, proto) {
    var result  = Object.create(proto);
    var names   = Object.getOwnPropertyNames(obj);
    var getProp = Object.getOwnPropertyDescriptor;
    var setProp = Object.defineProperty;
    var length  = names.length;
    var index   = 0;

    while (index < length) {
        var name = names[index++];
        setProp(result, name, getProp(obj, name));
    }

    return result;
} 
```

因此，我们现在可以在创建任何对象后更改其原型，如下所示（请注意，我们实际上并没有更改`[[proto]]`对象的内部属性，而是创建一个与给定对象具有相同属性并继承自给定原型的新对象):

```
var a = {
    b: "ok"
};

a = setPrototypeOf(a, {
    a: "test"
});

alert(a.a); // alerts test
alert(a.b); // alerts ok
```

```
<script>
function setPrototypeOf(obj, proto) {
    var result  = Object.create(proto);
    var names   = Object.getOwnPropertyNames(obj);
    var getProp = Object.getOwnPropertyDescriptor;
    var setProp = Object.defineProperty;
    var length  = names.length;
    var index   = 0;

    while (index < length) {
        var name = names[index++];
        setProp(result, name, getProp(obj, name));
    }

    return result;
}
</script>
```

简单高效（我们没有使用该`__proto__`属性）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-07T04:39:00.957

我认为 Mozilla 想要提出的实际观点是它是非标准的，因此实施者完全有权删除它。

更简洁的原型链方式是`Object.create`. `a`使用原型创建对象的代码的等价物`{'a': 'test'}`是：

```
a = Object.create({'a':'test'}) 
```

如果您需要使用一个，在不支持它的浏览器中也可以使用 shims 来模拟此功能，这是与直接使用`__proto__`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T04:25:46.080

我不明白如何：

```
var a = {};
a.__proto__ = A; // A is object because no constructor is needed 
```

比简单：

```
var a = new A(); // A is Constructor function 
```

如果您不需要构造函数，现在在后一种情况下设置 A 可能会更冗长，但在这种情况下，您可以将其自动化，使其变得同样简单：

```
var A = Constructor({
    method: function(){}
}); // A is function, meant to be used with new 
```

相比：

```
var A = {
    method: function(){}
}; //A is object, meant to be set as __proto__ 
```

而且，如果您需要一些初始化逻辑，那么使用通常需要声明构造函数的方式最终可能会更容易

# json - JSON 是否有声明的索引库？

> ID：10476564
> 
> 赞同：1
> 
> 时间：2012-05-07T04:15:03.017
> 
> 标签：json, standards

我已经阅读了[RFC](https://www.rfc-editor.org/rfc/rfc4627)和[JSON.org](http://json.org)并且看不到关于数组索引是基于 0 还是基于 1 的参考。最初是在 JS 中“发现”的，是不是每个人都认为它是基于 0 的？

例如：

```
{ 
  "selectedItem": 1,
  "Items": ["boots", "gloves", "hat"]
} 
```

选择的项目是“靴子”还是“手套”？

如果是这种情况（假设从 0 开始），这种假设是否可能会带来麻烦，特别是如果 JSON 支持是在默认使用基于 1 的索引的语言中实现的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:33:55.140

我认为*数组索引*根本不是JSON 涵盖的概念。JSON 数组只是以特定方式编写的有序集合：

> *数组*是值的有序集合。数组以`[`（左括号）开始，以`]`（右括号）结束。值用`,`（逗号）分隔。

这就是它的全部。索引问题留给端点，第一个元素可以是索引 0、1、-10，或者`"pancakes"`只要索引与数组中元素的顺序匹配，它就不会对 JSON 产生任何影响.

回到细节。`"selectedItem": 1`是指还是`"boots"`取决于`"gloves"`JSON 生产者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T04:38:46.483

不，它不需要一个。JSON 中没有数组索引之类的东西。该`selectedItem`字段是一个简单的整数。如果它包含对另一个字段的引用，那是在应用程序域中，而不是数据符号。

JSON 不提供引用数组元素的方法，因此基本索引号无关紧要。

# cassandra - Astyanax：如何插入复合列？

> ID：10476565
> 
> 赞同：0
> 
> 时间：2012-05-07T04:15:23.483
> 
> 标签：cassandra

我对 astyanax 很陌生，我用谷歌搜索过，找不到插入复合列的简单示例。谁能提供一个简单的例子？例如复合列类型为 Long:Long:Long 为 123:122:233，值为字符串“测试字符串”。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T23:32:17.073

我会尝试下载源代码并查看单元测试。至少有一项测试可以证明这一点。查看源代码后，您就会明白为什么我推荐该路线而不是仅发布代码片段。它涵盖了相当数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:17:08.897

尝试这个：

```
//First you need an object.

// Annotated composite class
public class SessionEvent{
  @Component(ordinal=0) long sessiondId;
  @Component(ordinal=1) long timestamp;
  @Component(ordinal=2) long userId;

  // Must have public default constructor
  public SessionEvent() {
  }
  // ...
  // Don't forget to implement hashcode and equals and a constructor that accepts (long, long, long)

}

//... 
static AnnotatedCompositeSerializer<SessionEvent> eventSerializer
      = new AnnotatedCompositeSerializer<SessionEvent>(SessionEvent.class);
static ColumnFamily<String, SessionEvent> CF_SESSION_EVENTS
      = new ColumnFamily<String, SessionEvent>("SessionEvents",
            StringSerializer.get(), eventSerializer);

//...           
CompositeColumn cc = new SessionEvent("123","456","789"); // Column values  
keyspace.prepareColumnMutation(CF_SESSION_EVENTS, "row key goes here", cc)
    .putValue("this is the value", null)
    .execute(); 
```

# jquery - jQuery Pajinate 点击时转到页面顶部

> ID：10476567
> 
> 赞同：2
> 
> 时间：2012-05-07T04:15:56.987
> 
> 标签：jquery, jquery-plugins, pagination

我正在使用[jQuery Pajinate](http://dl.dropbox.com/u/4151695/html/pajinate/examples/example1.html)插件作为新闻文章的寻呼机。从设计和可用性的角度来看，我觉得最好只在页面底部放置寻呼机。但是，当我这样做时，它不会将我带到页面顶部，因此用户可能无法轻易看到这里发生的任何事情。我在文档中的任何地方都看不到您可以在点击时转到内容的顶部。有没有人遇到过这个问题？我在实现这样的事情时遇到了麻烦，[因为](http://jsfiddle.net/aaronk85/BctQL/)pajinate 插件生成的 href 是空的，例如 href=""

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T05:04:02.850

使用不显眼的 jQuery 来实现 Fiddle 中的效果。

```
$('a.class_for_pajinate').on('click', function() {
  top(); // Keep your functions starting with lower case
} 
```

更新小提琴：http: [//jsfiddle.net/BctQL/1/](http://jsfiddle.net/BctQL/1/)

# ios - iOS 中的 CURL 请求

> ID：10476568
> 
> 赞同：2
> 
> 时间：2012-05-07T04:15:56.947
> 
> 标签：ios, curl, request

我正在尝试在我的应用程序（[http://coopapp.com/api](http://coopapp.com/api)）中出于某些目的使用 CO-OP API

我知道如何使用 curl 执行请求：

```
curl http://coopapp.com/groups/20/statuses -H 'Accept: application/xml' \ -H 'Content-Type: application/xml' -u email:password 
```

但我无法弄清楚如何在 iOS 中做到这一点，希望有人可以推动我朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T05:16:41.300

你在`NSURLConnection`课堂上这样做。但我建议使用[MKNetworkKit](https://github.com/MugunthKumar/MKNetworkKit/)，它是一个方便的包装器。它实际上甚至`curl`在其操作的描述中显示了等效的命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:44:32.390

如果要加载相同的网页使用 UIWebView，将加载相同的 HTML 页面

# jquery - 我在使用 jQuery 的 $(selector).each() 时遇到了困难

> ID：10476571
> 
> 赞同：4
> 
> 时间：2012-05-07T04:16:50.673
> 
> 标签：jquery, each

这里的例子：http: [//jsfiddle.net/KyW6c/2/](http://jsfiddle.net/KyW6c/2/)

我有一个有序列表。每个列表项都是我的投资组合中的一个项目。我正在编写一些 jQuery，它将单击的列表项向上移动到有序列表的左上角。我已经完成了这项工作，但我遇到的问题是单击项下方的列表项正在移动。小提琴中提供了此代码（已注释掉）。

我尝试实施的解决方案将在加载页面后将每个列表项的位置设置为绝对位置，并将左右位置设置为有序列表中的当前位置。我不知道我是否遇到了麻烦，因为我误解了 .each() 的作用，或者只是如何实现它。

谢谢。

编辑：问题是每个列表项的 left 和 top 值都设置为 0，所以它们都只是在左上角重叠。如果您取消注释 jQuery，您将看到问题所在。

编辑 2：我发现如果我没有在设置 left 和 top 属性的同时将位置设置为绝对，它可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:11:46.527

问题是当您遍历每个元素时，您正在设置“位置：绝对”，它正在从定位中删除当前元素。由于每个元素都从布局中“删除”，因此以下元素浮动到 0,0 位置。

通过自下而上的迭代，您可以先保存左/上，然后应用 postion:absolute 而不影响下一个元素：

```
 $($('.project').get().reverse()).each(function(){
    var pos = $(this).position();
    $(this).css({
      left: pos.left + 'px',
      top: pos.top + 'px',
      position: 'absolute',
      'z-index': '999'
    })
  });

  // your original code
  $('.project').click(function(){
    var $this  = $(this),
        left = $this.position().left + 'px',
        top  = $this.position().top + 'px';
    $this.css({
      left:      left,
      top:       top,
      position:  'absolute',
      'z-index': '999'
    }).animate({
      left:       0,
      top:        0,
      width:      '750px'
    }, 'fast', 'swing')
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:39:18.210

[http://jsfiddle.net/KyW6c/11/](http://jsfiddle.net/KyW6c/11/)

在朋友的帮助下弄明白了。谢谢，[马特](http://twitter.com/#!/matthewgood)！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T04:23:48.487

```
$('.project').ready().each(..) 
```

应该

```
$('.project').each(..) 
```

你可以尝试这样的事情：

```
 var left = 0,
      top = 0;
$('.project').each(function(){
    var $this  = $(this),
    $this.css({
      left:      (left+10) + 'px',
      top:       (top+10) + 'px',
      position:  'absolute',
      'z-index': '999'
    })
  }); 
```

# c# - 如何在 asp.net 应用程序中从 Quickbase 获取记录？

> ID：10476572
> 
> 赞同：0
> 
> 时间：2012-05-07T04:17:04.083
> 
> 标签：c#, quickbase

```
IQClient client = Intuit.QuickBase.Client.QuickBase.Login("username", "pwd");
IQApplication app = client.Connect(applicationId, token);
Intuit.QuickBase.Client.IQTable rtable = app.GetTable(sTableID);` 
```

我正在asp.net 中创建一个Web 应用程序。我需要从 quickbase 获取数据来填充我的 GridView。我正在使用 Quickbase API。上面的代码检索表，但记录值始终为 0。我做错了什么还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:31:50.367

要获取表中的所有记录，您可以按照以下站点中的示例进行操作： [https](https://code.intuit.com/sf/wiki/do/viewPage/projects.quickbase_c_sdk/wiki/HomePage) ://code.intuit.com/sf/wiki/do/viewPage/projects.quickbase_c_sdk/wiki/HomePage 。

```
using System;
using Intuit.QuickBase.Client;

namespace MyProgram.QB.Interaction
{
    class MyApplication
    {
        static void Main(string[] args)
        {
            var client = QuickBase.Client.QuickBase.Login("your_QB_username", "your_QB_password");
            var application = client.Connect("your_app_dbid", "your_app_token");
            var table = application.GetTable("your_table_dbid");
            table.Query();

            foreach(var record in table.Records)
            {
               Console.WriteLine(record["your_column_heading"]);
            }
            client.Logout();
        }
    }
} 
```

要使用已构建的 C# API 进行特定查询，您可以执行以下操作：

```
var querystring1 = new QueryStrings(FieldID,ComparisonOperator.GTE,value,LogicalOperator.AND);
var querystring2 = new QueryStrings(FieldID, ComparisonOperator.XEX, value, LogicalOperator.NONE); 
```

然后

```
 var query = new Query();
query.Add(querystring1);
query.Add(querystring2);
table.Query(query, new[] { 1,2,3,4}, new[] { 1,2}); 
```

第二个参数是您想要的列的字段 ID，第三个参数是用于对记录进行排序的字段 ID。

在您的情况下，我只会执行循环并将所有记录添加到集合中。然后您可能会使用 LINQ 或仅使用列标题来遍历所有记录。

这是我获取特定数据的方式：

```
foreach(var record in table.Records)
            {
                var row = new String[8];
                row[0] = record["Column Name"];
                row[1] = record["Column Name"];
                row[2] = record["Column Name"];
                row[3] = record["Column Name"];
                row[4] = record["Column Name"];
                row[5] = record["Column Name"];
                row[6] = record["Column Name"];
                row[7] = record["Column Name"];
                list.Add(row);//This is a List<string[]> collection. But use what you want
            } 
```

# php - PHP'全局变量'

> ID：10476573
> 
> 赞同：0
> 
> 时间：2012-05-07T04:17:08.937
> 
> 标签：php

我正在用 PHP 创建游戏，但全局变量有问题。根据在我的 HTML 页面中按下的按钮，运行相应的 PHP 脚本并根据该函数调用一个`isset`函数。

我的问题是：我想保留一个分数变量，并且我希望在`post`发出多个语句后将来可以访问这个变量。

我曾尝试使用`global`关键字，但这似乎并没有达到我的预期。

我可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:33:21.150

您可以使用[会话](http://www.php.net/manual/en/book.session.php)或[cookie](http://php.net/manual/en/features.cookies.php)。谷歌起来，你可以找到一些关于它们的优秀教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:24:02.820

Memcache 可能是最佳解决方案，但这需要特殊设置，通常是专用设置。

大多数开发人员更容易使用 MySQL 数据库来保存分数并在每个请求中检索它。

# file-upload - struts2中如何上传Excel文件？

> ID：10476574
> 
> 赞同：0
> 
> 时间：2012-05-07T04:17:51.453
> 
> 标签：file-upload, struts2

我正在尝试在 Struts2 WEB 应用程序中上传仅 Excel 文件。因此在 Jsp 页面中使用以下代码：

```
<s:label value="File Name : *" />
<s:file name="fileUpload" label="Select a File to upload"/>
<br>

<br>
<s:submit value="Add" name="add" tabindex="8" /> 

    </s:form> 
```

在显示文件内容的 Response.jsp 页面中，其类型如下：

```
 <s:form  action="saveBulkStores.action" method="get" >

<h4>
   File Name : <s:property value="fileUploadFileName"/> 
</h4> 

<h4>
   Content Type : <s:property value="fileUploadContentType"/> 
</h4> 

<h4>
   File : <s:property value="fileUpload"/> 
</h4> 

<br>
    </s:form> 
```

在 Struts.xml 中：

```
 <action name="bulkStores" class="com.action.FilesUploadAction"
        method="loadBulkStoresPage"> 
        <result name="input">/viewfile.jsp</result>
        <result name="success">/uploadfile.jsp</result> 
    </action> 

            <action name="saveBulkStores" class="com.action.FilesUploadAction"
        method="saveBulkStores"> 
        <interceptor-ref name="exception"/>
        <interceptor-ref name="i18n"/>
        <interceptor-ref name="fileUpload">
            <param name="allowedTypes">text/plain</param>
            <param name="maximumSize">10240</param>
         </interceptor-ref> 
        <interceptor-ref name="params">
            <param name="excludeParams">dojo\..*,^struts\..*</param>
        </interceptor-ref>
        <interceptor-ref name="validation">
            <param name="excludeMethods">input,back,cancel,browse</param>
        </interceptor-ref>
        <interceptor-ref name="workflow">
            <param name="excludeMethods">input,back,cancel,browse</param>
        </interceptor-ref> 
        <result name="input">/uploadfile.jsp</result>
        <result name="success">/success.jsp</result> 
    </action> 
```

在行动课上：

```
 public String loadBulkStoresPage(){
    System.out.println("FILES BULK UPLOADS.........");
    return SUCCESS;
     }
         private File fileUpload;
     private String fileUploadContentType; 
     private String fileUploadFileName;
         //Getters and Setters for above Fields. 
```

显示文件名、内容类型如下：

```
 public String saveBulkStores(){
    System.out.println("check Bulk upload file");

    System.out.println("fileName:"+fileUploadFileName);
    System.out.println("content type:"+fileUploadContentType);
    System.out.println("fileupload:"+fileUpload); 

    return SUCCESS;
     } 
```

输出：

```
 It's displaying NUll value only for my display statements. So anyone help me to fix this issue. thanks in Advance. 
```

我是新来做这个任务的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:44:18.137

`<s:file id="myFile" name="myFile" disabled="true" ></s:file>`是用于上传文件的标签，将标签放在jsp中。

以及我在下面写的动作类中的属性

```
 private File myFile;
         private String myFileContentType;
         private String myFileFileName;

        /**
         * @return the myFile
         */
        public File getMyFile() {
            return myFile;
        }
        /**
         * @return the myFileContentType
         */
        public String getMyFileContentType() {
            return myFileContentType;
        }
        /**
         * @return the myFileFileName
         */
        public String getMyFileFileName() {
            return myFileFileName;
        }
        /**
         * @param myFile the myFile to set
         */
        public void setMyFile(File myFile) {
            this.myFile = myFile;
        }
        /**
         * @param myFileContentType the myFileContentType to set
         */
        public void setMyFileContentType(String myFileContentType) {
            this.myFileContentType = myFileContentType;
        }
        /**
         * @param myFileFileName the myFileFileName to set
         */
        public void setMyFileFileName(String myFileFileName) {
            this.myFileFileName = myFileFileName;
        }

and In execute method insert this code

      String destaddress=getText("ipaddress");
           if(myFile!=null){    
            File destDir= new File(destaddress+myFileFileName);
                    destDir.createNewFile();
                FileUtils.copyFile(myFile, destDir);
         }

you add ip address in apllication properties file as show below

ipaddress=\\\\192.168.105.68\\Shared2\\Files\\

and the following interceptors to your struts. XML file

    <interceptor-ref name="fileUpload">
                  <param name="maximumSize">52428800</param>
                </interceptor-ref>
                <interceptor-ref name="basicStack"/>

ipaddress=\\\\192.168.105.68\\Shared2\\Files\\ 
```

这将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:26:16.827

```
FileUtils is not part of the standard JDK, it a class in the Apache Commons IO library.It contains Methods like

FileUtils.readFileToString(file);
FileUtils.copyDirectoryToDirectory(source, destination);
FileUtils.deleteDirectory(source);......................which make copying files from one directory to other directory in most easier way in word it reduces voluminous amount of code as entire code is written by Apache people
please refer this URL for reference http://www.koders.com/java/fid002DB6BD79CABA7B6AA0F2669061424E3B9776D3.aspx 
```

# python - 在 python 2.7.3 中导入 slimxmpp 时 IDLE 挂起

> ID：10476575
> 
> 赞同：1
> 
> 时间：2012-05-07T04:18:44.933
> 
> 标签：python, module, python-idle

实际上 IDLE 并没有挂起，但是当 Sleekxmpp 库被导入时，它的行为有点不正常。我可以输入空闲，但它不会识别命令。但在同一台机器上的 python 3.2 上运行良好。所有其他软件包在 2.7 版本的 python 上都可以正常工作。导入后，idle 将不再执行输入的任何命令。它可以在 Python 2.7.3 命令行界面上正常导入。只是在 IDLE 上不起作用。请帮我。我已经尝试过软件包的“master”和“develop”版本。会有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:25:47.843

你是在自问自答。IDLE 确实是 python 中最糟糕的 IDE，27。如果你真的想使用 27，我会使用 ipython，如果你想更新，我会使用 python 3.2.3 中的 IDLE。ipython 可以在[这里](http://ipython.org/download.html)找到，python 3.2.3 可以在[这里](http://python.org/download/releases/3.2.3/)找到。

# android - 如何将 JNI 部分与 Android 应用程序分开？

> ID：10476585
> 
> 赞同：1
> 
> 时间：2012-05-07T04:19:58.220
> 
> 标签：android, java-native-interface

我正在编写一个 Android 应用程序。我正在使用 JNI 在 C++ 中实现一些应用程序。有没有办法将 JNI (C++) 代码与 Java Android 代码完全分开？比如创建一个 JNI 项目之类的？因为我的 C++ 代码将成为我将在另一个应用程序中使用的小库。我尝试创建一个 C++ 项目，但无法使用 ndk-build 进行编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:42:54.997

实际上，Java 和本机代码之间的联系相当松散，因为它是通过运行时的方法名称来完成的。

NDK 只是 C 编译器的特殊环境和库。必须生成一个合适的动态库文件，但这可以使用 ndk 脚本来完成，使用 ndk 生成的“独立工具链”，甚至可以在 java 项目构建之前（或之后，见下文）完成，在另一台机器上完成，等等

通常，.so 动态库会被复制到应用程序项目树中的适当位置，以便最终将其打包在 .apk 中并安装在可以通过 System.loadLibrary() 方法自动找到的设备上。但是您可以将其插入到其他完成的 .apk 中（这是一个带有特殊对齐和 jarsigner 签名的 zip 文件）。但即使 .pak 实际上也不是将其传送到设备的唯一方式（尽管它是唯一推荐的方式）- 库也可以存储在应用程序的私有文件夹等位置并使用 System.load( ) 它采用完整路径名而不是库名。

hotverspicy 确实有一点，java 代码需要一个本地方法“声明”来说明 jni 库中实现的内容，并且这需要与本地函数实现名称中编码的实际包名称相匹配。但是，该包名不必与 Java 代码的其余部分相同——它可能是可重用 C/C++ 库的通用名称，它只需要匹配的 Java 包中的一个简短匹配的 Java 类文件姓名。

但除了 Neevek 使用一个本机库与另一个库进行接口的想法之外，还可能使用对象工厂机制在运行时连接任意本机函数，只要在编译时设置一个关联 - 请参阅相关答案to [C/C++ Reflection and JNI - 一种调用尚未编写的本机代码的方法](https://stackoverflow.com/questions/958456/c-c-reflection-and-jni-a-method-for-invoking-native-code-which-hasnt-been-w)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:35:18.133

如果您在 C++ 代码中使用 JNI，那么它会绑定到 Android，并且它必须是正确定义的 Android 项目`Android.mk`，`Application.mk`（可选）。

如果您不在代码中使用 JNI API，假设您想创建一个通用库，您可以像往常一样编写 C++ 代码、编译、测试它，`ndk-build`不需要。完成库编码后，将代码构建为静态库，当您想在 Android 项目中使用此静态库时，围绕您要使用的静态库中的功能编写一些 JNI 包装器，链接到静态库在你的图书馆`Android.mk`，是这样的：

```
include $(CLEAR_VARS)
LOCAL_MODULE    := libgeneric
LOCAL_SRC_FILES := prebuilt/libgeneric.a
include $(PREBUILT_STATIC_LIBRARY) 
```

# php - Facebook API，使用 Facebook 登录不能仅在 IE 上运行

> ID：10476587
> 
> 赞同：2
> 
> 时间：2012-05-07T04:20:17.193
> 
> 标签：php, javascript, facebook, facebook-graph-api

我正在尝试使用 Open Graph API 实现“使用 Facebook 登录”。到目前为止，这适用于 FF、Chrome、Safari，但不适用于 IE。在 IE9 上测试。

在 IE 上，我得到 Facebook 对话框来登录。我可以成功登录 Facebook，但是什么也没有发生。在其他浏览器上，页面重定向并且 fb 用户数据存储到数据库中。

我也在不同的场合尝试了两种 FB 文档类型，但没有运气。

```
xmlns:fb="http://ogp.me/ns/fb#"
xmlns:fb="http://www.facebook.com/2008/fbml" 
```

编辑：我删除了 FB.api 的东西只是为了包含一个用于测试的警报框。适用于一切，但 IE 仍然。

```
<div id="fb-root"></div>
<script>
window.fbAsyncInit = function() {
    FB.init({
        appId   : '<?php echo $AppID; ?>',
        channelUrl : '//www.mysite.net/channel.php', // Channel File
        oauth   : true,
        status  : true, // check login status
        cookie  : true, // enable cookies to allow the server to access the session
        xfbml   : true // parse XFBML
    });

  };

function fb_login(){
    FB.login(function(response) {

        if (response.authResponse) {
            console.log('Welcome!  Fetching your information.... ');
            //console.log(response); // dump complete info
            access_token = response.authResponse.accessToken; //get access token
            user_id = response.authResponse.userID; //get FB UID

            FB.api('/me', function(response) {
  alert(response.id);
            });

        } else {
            //user hit cancel button
            console.log('User cancelled login or did not fully authorize.');
        }
    }, {
        scope: 'email,publish_actions'
    }
    );
}
  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:26:08.083

尝试删除/注释掉代码的 console.log() 区域，我知道这很疯狂，但是上次我在 IE 中尝试这些区域时，他们抱怨无法调用 log on undefined ......我希望 IE 能赶上次。

如果有的话，试一试，绝对值得一试潜在的简单修复。请相信我知道这听起来很傻，但它过去一直是我 IE 错误的根源！

# amazon-s3 - 如何在 AWS 上使用多个 EC2 实例在 AWS 上保存媒体文件

> ID：10476593
> 
> 赞同：7
> 
> 时间：2012-05-07T04:20:30.797
> 
> 标签：amazon-s3, amazon-ec2, amazon-web-services

在我的申请中；用户可以上传视频，我想将它们保存在文件系统而不是数据库中。如果我使用 Amazon Web Services (AWS) 并且只使用一个带有 EBS 的 EC2 实例（用于存储），那就没问题了。但是如果我使用自动缩放或多个 EC2 实例；然后，如果用户上传视频，它将保存在 EC2 之一（与 EBS 之一相关联）上。下次如果用户登录（或者如果会话粘性不存在；那么如果用户的下一个请求转到另一个 EC2 实例）它将如何访问他的视频？

这个问题的最佳解决方案是什么？使用 S3 是唯一的解决方案，但为此我不能简单地执行 java.io.File .. 我想我将不得不使用 AWS SDK api 来访问上传的视频.. 但那会不会更慢？

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T13:08:02.237

我会使用亚马逊 S3。如果您使用其他亚马逊网络服务，它速度快、相对便宜并且运行良好。

您可以先上传到 EC2 实例，然后使用 Simple Workflow Servie 自动集中传输文件。如果您想稍后将视频重新编码为多个比特率，这也很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:28:02.940

您需要设置 NAS。它可以是 NFS 或类似 GlusterFS 的东西。后者是现代的，并且可以很好地扩展...

# wpf - 在 MVVM 中，在 ViewModel 中挂钩模型项的事件会导致内存泄漏吗？

> ID：10476595
> 
> 赞同：1
> 
> 时间：2012-05-07T04:21:03.493
> 
> 标签：wpf, mvvm, memory-leaks, event-handling

试图追踪我们的 WPF/MVVM 应用程序中的一些内存泄漏，我发生了一些事情......

如果您使用特定于实例的处理程序在其关联的 ViewModel 中侦听 ModelItem 事件，那么只要 ModelItem 仍然存在，这是否会使 ViewModel 挂起？

考虑这种情况...

```
public class ItemViewModel
{
    public ItemViewModel(ModelItem item)
    {
        this.Item = item;
        item.SomeEvent += ItemSomeEventHandler
    }

    Public ModelItem Item { get; private set; }

    // Note: This is a handler on this instance, not a shared handler
    private void ItemSomeEventHandler(object s, EventArgs e)
    {
        Console.WriteLine(“The model changed!”);
    }
} 
```

如果这确实导致泄漏，您如何/在哪里解开它？您不能在“Dispose”中执行此操作，因为如果某些内容仍然具有对它的引用，则不会调用它，看起来确实如此：模型项。

合适的地方是在使用这个 ViewModel 的控件中实现 Dispose，然后在那里滴下一个事件取消挂钩例程吗？依靠外部的东西来确保你清理你自己的内部似乎有点危险，但是没有去一个 EventManager 架构，我不知道在这里做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:39:15.613

为什么不使用[Wea​​kEvent](http://msdn.microsoft.com/en-us/library/aa970850.aspx) / [DelegateCommands](http://mvvmlight.codeplex.com/discussions/353774)？

它们实现了对不需要确定性分离的委托的弱引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T04:40:47.103

是的，它会导致泄漏..或者更具体地说，`ItemViewModel`当不再显示视图时将不会收集，因为`ModelItem`持有对`ItemViewModel`

如果您可以`Dispose`控制`ViewModel`. 问题是什么组件正在创建`ItemViewModel`？如果它是另一个视图模型，那么您可以将处置委托给该视图模型，或者如果视图创建了视图模型，那么您可以调用该`Dispose`方法。

但是，如果您像`MVVMLight`工具包一样使用，那么您可以使用它的`ICleanup`界面或类似的东西。查看其他[答案](https://stackoverflow.com/a/7037282/373706)以获取更多信息。

# installation - 在一个部分中多次使用宏

> ID：10476599
> 
> 赞同：1
> 
> 时间：2012-05-07T04:21:43.257
> 
> 标签：installation, nsis

我在一个部分中多次调用宏。宏检查目录是否存在，如果不存在，则创建该目录。

**我的问题：**我收到一个错误，因为我在一个部分内多次调用此宏。如何修复我的编译错误？

**错误：** “错误：标签“CreateDirThenInstall：”已在部分中声明“

你能告诉我如何在一个部分中多次使用这个宏吗？

```
Section "Install Plugin Files" MainSetup
  !insertmacro ValidateDir "c:/blah"
  setOutPath "c:/blah"
  file "C:/blah/a.txt"
  file "C:/blah/b.txt"

  !insertmacro ValidateDir "c:/other"
  setOutPath "c:/other"
  file "c:/other/a.txt"
  file "c:/other/b.txt" 
sectionend

!macro ValidateDir dir
   IfFileExists "$dir" ExitMacro CreateDirThenInstall
   CreateDirThenInstall:   # Error here: Error: label "CreateDirThenInstall:" already declared in section
      createDirectory "${dir}"   
   ExitMacro: 
!macroend 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:52:41.660

问题出在标签上，而不是宏上。您在该部分中使用了两次完全相同的标签，这是不可能的。

您可以使宏中的标签唯一（即使宏插入不止一次）。编译时命令`${__LINE__}`可用于此。然后你可以写这样的东西：

```
!macro ValidateDir dir
  !define UniqueId1 ${__LINE__}
  !define UniqueId2 ${__LINE__}
  IfFileExists "${dir}" Exit_${UniqueId1} CreateDir_${UniqueId2}
  CreateDir_${UniqueId2}:
      createDirectory "${dir}"   
  Exit_${UniqueId1}: 
  !undef UniqueId1
  !undef UniqueId2
!macroend 
```

但在你的情况下，我认为以上没有必要。`SetOutPath`如果需要，说明会为您创建目录。来自文档：

> 如果不存在，则设置输出路径 ($OUTDIR) 并创建它（必要时递归）。

因此，如果您不需要了解创建的每个目录（并将其写入某处，例如在卸载期间使用它），您根本不必这样做。

# swing - 有什么方法可以在 jtextarea 中应用所见即所得？

> ID：10476600
> 
> 赞同：0
> 
> 时间：2012-05-07T04:22:21.667
> 
> 标签：swing

我正在尝试将我的系统信息（从 dos 命令“systeminfo >sysinfi.txt”中获得）放入`JTextarea`. 这个命令的输出很好地排列在一个文本文件中，但是当我将它添加到它时，`jtextarea`它变得混乱了。

有什么方法可以在 a 中应用所见即所得`JTextarea`？

代码：

```
Process proc = Runtime.getRuntime().exec ("systeminfo ");
BufferedReader input = new BufferedReader(new InputStreamReader(proc.getInputStream()));
while ((line = input.readLine()) != null)
{
 jTextArea1.append("\n"+line);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:50:38.983

这是一个[SSCCE](http://sscce.org)，它给了我所见即所得，

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;

public class TestTextarea {

    public static void main(String[] args) {

        String line;
        JFrame frame = new JFrame();

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JTextArea textArea = new JTextArea();
        textArea.setEditable(false);

        try {
            Process proc = Runtime.getRuntime().exec("systeminfo ");

            BufferedReader input = new BufferedReader(new InputStreamReader(proc.getInputStream()));
            while ((line = input.readLine()) != null) {
                textArea.append("\n" + line);
            }

        } catch (IOException e) {
            System.out.println("Exception :" + e.getMessage());
        }

        JScrollPane scrollPane = new JScrollPane(textArea);

        frame.add(scrollPane);
        frame.setSize(500,500);
        frame.setVisible(true);

    }
} 
```

# asp.net-mvc-3 - IIS (w3wp.exe) 使用不属于用户、组或内置安全主体的应用程序池的用户名运行

> ID：10476612
> 
> 赞同：0
> 
> 时间：2012-05-07T04:24:14.897
> 
> 标签：asp.net-mvc-3, windows-server-2008, orchardcms

尝试使用仪表板中的模块安装程序安装新模块时，Orchardcms 应用程序可以正常工作。我在下面收到此错误。

*安装包失败 包安装失败：安装请求的包时出错。如果服务器没有对网站的“~/Modules”或“~/Themes”文件夹的写入权限，就会发生这种情况。如果站点在共享托管环境中运行，有时需要通过 Hoster 控制面板手动添加对这些文件夹的写入权限。安装主题和模块后，建议删除对这些文件夹的写入权限。*

似乎使用 ApplicationPoolIdentity 安装的 IIS 7 应用程序池（可能与 Orchard 在 Web 平台安装程序中一起安装）。w3wp.exe 使用用户名 orchardmain 运行（这是我命名我的应用程序的名称，我本可以将其保留为默认果园）虽然这个问题是我无法像尝试在权限中添加用户名时那样更新我的 orchardmain 的 NTFS 权限找不到名称为 OrchardMain 的任何用户、组或内置安全主体。

将应用程序池更改为在行为不同的用户/服务帐户下运行是最佳实践，还是我可以做一些小事情来让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:33:02.947

`IIS APPPOOL\OrchardMain`编辑权限时尝试用作对象名称。

有关详细信息，请参阅此[博客文章](http://alasdaircs.wordpress.com/2011/08/22/granting-directory-permissions-to-a-website-using-iis-apppool/)。

# android - 如何在我的编辑文本中为 android 中的笔记应用添加表情符号/情感？

> ID：10476613
> 
> 赞同：1
> 
> 时间：2012-05-07T04:24:23.890
> 
> 标签：android, png, android-edittext, notepad

任何人都可以知道如何在文本中添加/插入情绪/微笑（我曾经在我的笔记中输入过我的编辑文本）。如果我想添加这些 .png 类型的微笑来编辑字符串的文本类型，我几乎没有困惑，这可能吗？而且我必须将这些输入保存到 sqlite 数据库中。通常我知道存储从编辑文本中获取的字符串数据。但与该文本一起，我还想在光标放置的位置添加微笑符号并存储在 sqlite 数据库中。并让它回来阅读。所以大家有什么想法，欢迎！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:30:40.163

阅读您的问题，我首先想到的是将每个图像映射到一个字母序列，例如:)是smiley.png等。现在您的数据库也有这些较小的表示但是从数据库中读取时，您可以转换那些特殊字符序列到适当的图像。

为了简单地搜索这些字符串，您可以将它们包装在一些较少使用的字符中，即 [ 或 { 或 <。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:53:42.787

尝试使用 java (ie android) spannable 方法来实现笑脸 (ie) 图像。你一定会明白的，在 google 中搜索“如何在 android 中使用 java spannable 方法添加图像/笑脸？” 你会得到好主意。

# android - Android 推送通知未使用 webview 打开我的活动

> ID：10476616
> 
> 赞同：11
> 
> 时间：2012-05-07T04:24:34.993
> 
> 标签：android, push-notification, android-webview

我按照本教程创建了一个推送通知应用程序：[http ://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)

它有效，当我收到通知时，我可以打开一个网站。但是，我可以将 webview 布局与这个推送通知应用程序结合起来吗？我觉得它必须是可能的，因为电子邮件通知以这种方式工作。

这是我处理收到的通知的代码：

```
private void handleData(Context context, Intent intent) {
    String app_name = (String) context.getText(R.string.app_name);
    String message = intent.getStringExtra("message");

    NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(android.R.drawable.stat_notify_chat, app_name + ": " + message, 0);

    PendingIntent pendingIntent = PendingIntent.getActivity(context, -1, new Intent(context, webviewactivity.class), PendingIntent.FLAG_UPDATE_CURRENT); // 
    notification.when = System.currentTimeMillis();
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notification.setLatestEventInfo(context, app_name, message, pendingIntent); //
    notificationManager.notify(0, notification);
} 
```

但是，链接到 main.xml 的 HomeActivity 只是一个按钮，用于注册和注销您的设备以接收通知。我在布局下创建了另一个文件 webviewactivity.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
 <WebView  xmlns:android="http://schemas.android.com/apk/res/android"
           android:id="@+id/webview"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent"
 /> 
```

我创建了以下活动 webviewactivity

```
public class BHWebView extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.bhwebview_activity);

        WebView myWebView = (WebView) findViewById(R.id.webview);
        myWebView.loadUrl("http://www.badgerherald.com");
    }
} 
```

出于某种原因，尽管当我单击通知时，它会打开主页活动，而不是 webview 活动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T06:19:14.297

让通知改为打开您的 WebView 应用程序：发送 PendingIntent，如此[处](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)所述。

# java - 如何使用 javac 正确编译此文件

> ID：10476619
> 
> 赞同：0
> 
> 时间：2012-05-07T04:25:28.570
> 
> 标签：java, compiler-construction

我有以下名为 Test.Java 的文件，其代码是

```
package example25;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.util.Iterator;
import org.jibx.runtime.BindingDirectory;
import org.jibx.runtime.IBindingFactory;
import org.jibx.runtime.IMarshallingContext;
import org.jibx.runtime.IUnmarshallingContext;
import org.jibx.runtime.JiBXException;

public class Test 
{   
public static void main(String[] args) 
{

    try
    {

        // unmarshal customer information from file
        IBindingFactory bfact = BindingDirectory.getFactory(Order.class);
        IUnmarshallingContext uctx = bfact.createUnmarshallingContext();
        FileInputStream in = new FileInputStream("D:\\Java Libraries\\jibx\\dwcode2\\starter.xml");
        Order order = (Order)uctx.unmarshalDocument(in, null);

        // compute the total amount of the order
        float total = 0.0f;
        for (Iterator<Item> iter = order.getItemList().iterator(); iter.hasNext();)
        {
            Item item = iter.next();
            total += item.getPrice() * item.getQuantity();
        }
        order.setTotal(new Float(total));

        // marshal object back out to file (with nice indentation, as UTF-8)
        IMarshallingContext mctx = bfact.createMarshallingContext();
        mctx.setIndent(2);
        FileOutputStream out = new FileOutputStream("c:\\out.xml");
        mctx.setOutput(out, null);
        mctx.marshalDocument(order);
        System.out.println("Processed order with " +  order.getItemList().size() + " items and total value " + total);

    }
    catch (FileNotFoundException e)
    {
        e.printStackTrace();
        System.exit(1);
    } catch (JiBXException e)
    {
        e.printStackTrace();
        System.exit(1);
    }
}//end main

}//end class 
```

这是我试图编译这个文件的方式和我得到的输出

```
C:\jibx\tutorial>javac example25\Test.java
example25\Test.java:8: error: package org.jibx.runtime does not exist
import org.jibx.runtime.BindingDirectory;
                   ^
example25\Test.java:9: error: package org.jibx.runtime does not exist
import org.jibx.runtime.IBindingFactory;
                   ^
example25\Test.java:10: error: package org.jibx.runtime does not exist
import org.jibx.runtime.IMarshallingContext;
                   ^ 
example25\Test.java:11: error: package org.jibx.runtime does not exist
import org.jibx.runtime.IUnmarshallingContext;
                   ^
example25\Test.java:12: error: package org.jibx.runtime does not exist
import org.jibx.runtime.JiBXException;
                   ^
example25\Test.java:25: error: cannot find symbol
IBindingFactory bfact = BindingDirectory.getFactory(Order.class);
        ^
symbol:   class IBindingFactory
location: class Test
 example25\Test.java:25: error: cannot find symbol
 IBindingFactory bfact = BindingDirectory.getFactory(Order.class);
                                ^
 symbol:   variable BindingDirectory
 location: class Test
 example25\Test.java:26: error: cannot find symbol
        IUnmarshallingContext uctx = bfact.createUnmarshallingContext();
        ^
 symbol:   class IUnmarshallingContext
 location: class Test
 example25\Test.java:40: error: cannot find symbol
        IMarshallingContext mctx = bfact.createMarshallingContext();
        ^
 symbol:   class IMarshallingContext
 location: class Test
 example25\Test.java:52: error: cannot find symbol
    } catch (JiBXException e)
             ^
 symbol:   class JiBXException
 location: class Test
 10 errors 
```

Test 使用的所有类文件都在它旁边，并且已经正确编译。测试是给我带来麻烦的最后一个文件。此外，测试中使用的一些类存在于 C:\jibx\lib> 中，而不是我正在执行命令的 C:\jibx\tutorial> 中。任何关于我如何在不修改我以前生成的类文件的情况下解决此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:34:53.253

由于存在一些导入错误，请按照 Satya 所说正确设置类路径，并且您当前在某个目录中的类您应该使用 javac 的 -d 属性对其进行编译，如下所示

爪哇 -d 。你的文件名.java

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:28:38.987

将目录 C:\jibx\lib 添加到您的类路径，例如

```
SET CLASSPATH=%CLASSPATH%;C:\jibx\lib;. 
```

然后做一个javac

# cakephp - 我应该在哪里添加 CakeLog::config

> ID：10476621
> 
> 赞同：1
> 
> 时间：2012-05-07T04:25:36.613
> 
> 标签：cakephp

我正在使用 1.3。我在 book.cakephp 中阅读了有关蛋糕日志记录活动的信息，
但是我应该在哪个文件中添加 CakeLog::config() 以设置日志记录详细信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:30:41.140

您可以在应用程序**bootstrap.php**文件中配置日志适配器。示例配置如下所示：

```
CakeLog::config('my_log', array('engine' => 'FileLog')); 
```

# android - 如何使用加速度计获得运动方向？

> ID：10476625
> 
> 赞同：19
> 
> 时间：2012-05-07T04:26:08.617
> 
> 标签：android, physics, accelerometer, direction

我正在开发一个 Android 应用程序，我想知道是否可以检测固定一个轴的运动方向。例如，我想将手机放在桌子上，并在移动时检测方向（左、右、上、下）。距离不是必须的，我只想知道准确的方向。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-07T05:30:42.463

是的。

使用`SensorEventListener.onSensorChanged(SensorEvent event)`可以确定沿 X 和 Y 轴提供的值。您需要记录这些值，然后将它们与您在后续调用该`onSensorChanged`方法时收到的任何新值进行比较，以获得增量值。如果一个轴上的 delta 值为正，则设备向一侧移动，如果其为负，则向相反方向移动。

您可能需要微调接收加速度计事件的速率和您考虑使用增量值指示方向变化的阈值。

这是我正在谈论的快速代码示例：

```
public class AccelerometerExample extends Activity implements SensorEventListener {
    TextView textView;
    StringBuilder builder = new StringBuilder();

    float [] history = new float[2];
    String [] direction = {"NONE","NONE"};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        textView = new TextView(this);
        setContentView(textView);

        SensorManager manager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
        Sensor accelerometer = manager.getSensorList(Sensor.TYPE_ACCELEROMETER).get(0);
        manager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_GAME);
    }

    @Override
    public void onSensorChanged(SensorEvent event) {

        float xChange = history[0] - event.values[0];
        float yChange = history[1] - event.values[1];

        history[0] = event.values[0];
        history[1] = event.values[1];

        if (xChange > 2){
          direction[0] = "LEFT";
        }
        else if (xChange < -2){
          direction[0] = "RIGHT";
        }

        if (yChange > 2){
          direction[1] = "DOWN";
        }
        else if (yChange < -2){
          direction[1] = "UP";
        }

        builder.setLength(0);
        builder.append("x: ");
        builder.append(direction[0]);
        builder.append(" y: ");
        builder.append(direction[1]);

        textView.setText(builder.toString());
    }

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        // nothing to do here
    }
} 
```

此代码只会为您提供手机移动的 X 轴和 Y 轴上的大致方向。为了提供更细粒度的方向确定（例如，尝试模拟计算机鼠标的移动），您可能会发现手机的加速度计不适合用途。

为了尝试这个，我首先将传感器延迟设置为`SensorManager.SENSOR_DELAY_FAST`并创建多个历史事件的列表，以便我可以检测随时间的运动，而不会受到在以如此精细的加速度计测量时经常发生的相反方向的轻微运动的影响等级。您还需要测量经过的时间量，以帮助计算您评论中建议的准确运动测量值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-19T15:52:55.080

根据我的阅读，使用传感器只能检测加速度和手机方向。因此，您可以轻松地检测到运动的开始（以及在哪个方向）和运动的停止，因为速度正在变化，因此存在加速度（当停止加速度时与速度方向相反）。

如果手机以恒定速度移动，加速度计将给出零值（减去重力的线性加速度）。所以为了知道手机是否在移动，你应该计算每个瞬间的速度，通过

```
V(t)=V(t-1)+a*dt 
```

其中：

*   `V(t-1)`是前一时刻的已知速度，
*   `V(t)`是当前时刻的速度，
*   `a`是加速度（考虑前一瞬间的加速度或前一瞬间和当前瞬间之间的平均加速度）。

问题在于，由于传感器值的不确定性，您最终可能会在每个瞬间汇总小误差，这将导致错误的速度值。可能您必须将低通滤波器调整为这些值。

# r - 使用 geom_text 组织 geom_point 上的文本

> ID：10476630
> 
> 赞同：5
> 
> 时间：2012-05-07T04:26:33.967
> 
> 标签：r, ggplot2

我有一个线图，其中一些时间点很难通过单独的颜色来区分，因此我想在图上标记时间点，但是标签重叠（见下图）以一种难以阅读的方式标签。

目前的剧情是这样的，

![当前地块](../Images/e112cbd6f2c7577d1ba3f1acdf0077ea.png)

我想知道是否有一种方法可以“堆叠”标签或某种方式（脚本）可以确保它们不重叠。像这样的东西，

![- - >](../Images/c38dd9d23eb3f4de710546e5f95ff2c5.png)

任何帮助，将不胜感激。

这是我用来制作情节的代码，

```
 require(ggplot2)
 require(plyr)
 require(reshape)

# create sample data
set.seed(666)
dfn <- data.frame(
Referral  = seq(as.Date("2007-01-15"), len= 26, by="23 day"),
VISIT01  = seq(as.Date("2008-06-15"), len= 24, by="15 day")[sample(30, 26)],
VISIT02  = seq(as.Date("2008-12-15"), len= 24, by="15 day")[sample(30, 26)],
VISIT03  = seq(as.Date("2009-01-01"), len= 24, by="15 day")[sample(30, 26)],
VISIT04  = seq(as.Date("2009-03-30"), len= 24, by="60 day")[sample(30, 26)],
VISIT05  = seq(as.Date("2010-11-30"), len= 24, by="6 day")[sample(30, 26)],
VISIT06  = seq(as.Date("2011-01-30"), len= 24, by="6 day")[sample(30, 26)],
Discharge = seq(as.Date("2012-03-30"), len= 24, by="30 day")[sample(30, 26)],
Patient  = factor(1:26, labels = LETTERS),
openCase  = rep(0:1, 100)[sample(100, 26)])

 # set today's data for cases that do not have an Discharge date
 dfn$Discharge[ is.na(dfn$Discharge) ] <- as.Date("2014-01-30")

 mdfn <- melt(dfn, id=c('Patient', 'openCase'), variable_name = "Visit")
 names(mdfn)[4] <- 'Year' # rename 

 # order data in mdfn by 'Referral' in dfn
 mdfn$Patient <- factor(mdfn$Patient,levels = 
 (dfn$Patient[order(dfn$Referral)]),ordered = TRUE)

 # subset a dataset to avoid 'Discharge' for cases that are not closed 
 mdfn2 <- subset(mdfn,!(Visit=="Discharge" & Year > as.Date("2014-01-01")))

 # the plot as it looks now
 ggplot(mdfn, aes(Year, Patient)) +
     geom_blank() +
     geom_line(data = mdfn[mdfn$openCase == 0,], colour = "black") +
     geom_line(data = mdfn[mdfn$openCase == 1,], colour = "grey") +
     geom_point(data = mdfn2, aes(colour = Visit), size = 4, shape = 124) + 
     geom_text(data=mdfn2, mapping=aes(x=Year, y=Patient, 
     label=substr(Visit, 1, 7), colour=Visit), size=2, 
     vjust=-.4, hjust=-.1, angle = 00) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T02:03:57.630

您可以根据访问的数值更改标签的垂直位置。

关键是：

```
 y=(as.numeric(Patient)+0.25*as.numeric(Visit)%%3)-0.12 
```

这目前产生：
根据访问值（%%3）的3个不同级别，您可以增加或减少
每个级别由y标签之间距离的四分之一（0.25）分隔
第一个标签在水平线下方
0.12秒为0.12以上

![在此处输入图像描述](../Images/ec3014f42ee71f0d25f88bd21c77d01e.png) ![在此处输入图像描述](../Images/99bee91900d5828e613f2791b2c430d5.png)

```
require(ggplot2)
require(plyr)
require(reshape)
# create sample data
set.seed(666)
dfn <- data.frame(
  Referral  = seq(as.Date("2007-01-15"), len= 26, by="23 day"),
  VISIT01  = seq(as.Date("2008-06-15"), len= 24, by="15 day")[sample(30, 26)],
  VISIT02  = seq(as.Date("2008-12-15"), len= 24, by="15 day")[sample(30, 26)],
  VISIT03  = seq(as.Date("2009-01-01"), len= 24, by="15 day")[sample(30, 26)],
  VISIT04  = seq(as.Date("2009-03-30"), len= 24, by="60 day")[sample(30, 26)],
  VISIT05  = seq(as.Date("2010-11-30"), len= 24, by="6 day")[sample(30, 26)],
  VISIT06  = seq(as.Date("2011-01-30"), len= 24, by="6 day")[sample(30, 26)],
  Discharge = seq(as.Date("2012-03-30"), len= 24, by="30 day")[sample(30, 26)],
  Patient  = factor(1:26, labels = LETTERS),
  openCase  = rep(0:1, 100)[sample(100, 26)])

# set today's data for cases that do not have an Discharge date
dfn$Discharge[ is.na(dfn$Discharge) ] <- as.Date("2014-01-30")

mdfn <- melt(dfn, id=c('Patient', 'openCase'), variable_name = "Visit")
names(mdfn)[4] <- 'Year' # rename 

# order data in mdfn by 'Referral' in dfn
mdfn$Patient <- factor(mdfn$Patient,levels = 
  (dfn$Patient[order(dfn$Referral)]),ordered = TRUE)

# subset a dataset to avoid 'Discharge' for cases that are not closed 
mdfn2 <- subset(mdfn,!(Visit=="Discharge" & Year > as.Date("2014-01-01")))

# the plot as it looks now
ggplot(mdfn, aes(Year, Patient)) +
  geom_blank() +
  geom_line(data = mdfn[mdfn$openCase == 0,], colour = "black") +
  geom_line(data = mdfn[mdfn$openCase == 1,], colour = "grey") +
  geom_point(data = mdfn2, aes(colour = Visit), size = 4, shape = 124) + 
  geom_text(data=mdfn2, mapping=aes(x=Year, y=(as.numeric(Patient)+0.25*as.numeric(Visit)%%3)-0.12, 
                                    label=substr(Visit, 1, 7), colour=Visit), size=2, 
            hjust=-.1, angle = 00) 
```

# css - 当模态对话框比屏幕长时如何滚动页面？

> ID：10476632
> 
> 赞同：97
> 
> 时间：2012-05-07T04:26:55.943
> 
> 标签：css, scroll

我的应用程序中有一个模态对话框，它在 y 方向上会变得很长。这引入了一个问题，即对话框的某些内容隐藏在页面底部之外。

![在此处输入图像描述](../Images/0fa0fb47323db425f7ed9799639be3b9.png)

我希望窗口滚动条在显示对话框时滚动对话框并且太长而不适合屏幕，但将主体留在模态后面的位置。如果您使用[Trello](http://trello.com)，那么您就会知道我要做什么。

如果不使用 JavaScript 来控制滚动条，这可能吗？

这是迄今为止我应用于模态和对话框的 CSS：

```
body.blocked {
  overflow: hidden;
}

.modal-screen {
  background: #717174;
  position: fixed;
  overflow: hidden;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  opacity: 0.9;
  z-index: 50;
}

.dialog {
  background: #fff;
  position: fixed;
  padding: 12px;
  top: 20%;
  left: 50%;
  z-index: 10000;
  border-radius: 5px;
  box-shadow: 0, 0, 8px, #111;
} 
```

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2016-01-20T10:47:16.590

尝试：

```
.modal-body {
    max-height: calc(100vh - 210px);
    overflow-y: auto;
} 
```

它会安排你的模态，然后给它一个垂直滚动

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-12-05T07:05:13.737

这就是为我解决的问题：

```
max-height: 100%;
overflow-y: auto; 
```

**编辑**：我现在使用 Twitter 上当前使用的相同方法，其中模式的行为有点像当前内容之上的单独页面，并且模式后面的内容不会随着您滚动而移动。

本质上是这样的：

```
var scrollBarWidth = window.innerWidth - document.body.offsetWidth;
$('body').css({
  marginRight: scrollBarWidth,
  overflow: 'hidden'
});
$modal.show(); 
```

使用模态上的这个 CSS：

```
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
overflow: auto; 
```

JSFiddle：[https](https://jsfiddle.net/0x0049/koodkcng/)
://jsfiddle.net/0x0049/koodkcng/ 纯JS版本（IE9+）：[https ://jsfiddle.net/0x0049/koodkcng/1/](https://jsfiddle.net/0x0049/koodkcng/1/)

无论页面或模态对话框的高度或宽度如何，这都有效，无论您的鼠标/手指在哪里都允许滚动，没有不和谐的跳转，某些解决方案在主要内容上禁用滚动，并且看起来也很棒。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-07T04:33:49.650

改变`position`

```
position:fixed;
overflow: hidden; 
```

到

```
position:absolute;
overflow:scroll; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-04-16T14:23:54.687

这是我的模态窗口演示，它自动调整其内容的大小并在它不适合窗口时开始滚动。

[模态窗口演示](http://demo.chobits.ch/CSS3/modal.html)（见 HTML 源代码中的注释）

**所有这些都只用 HTML 和 CSS 完成**- 不需要 JS 来显示和调整模态窗口的大小~~（但当然你仍然需要它来显示窗口~~- 在新版本中你根本不需要 JS）。

更新（更多演示）：

*   [模态窗口顶部对齐](http://demo.chobits.ch/css3/modal/top.html)

*   [居中的模态窗口](http://demo.chobits.ch/css3/modal/center.html)

*   [使用 Javascript 的旧演示](http://demo.chobits.ch/css3/modal/js.html)

关键是要有外部和内部 DIV，其中外部定义固定位置，内部创建滚动。*（在演示中实际上有更多的 DIV 使它们看起来像一个实际的模态窗口。）*

```
 #modal {
            position: fixed;
            transform: translate(0,0);
            width: auto; left: 0; right: 0;
            height: auto; top: 0; bottom: 0;
            z-index: 990; /* display above everything else */
            padding: 20px; /* create padding for inner window - page under modal window will be still visible */
        }

        #modal .outer {
            box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; -o-box-sizing: border-box;
            width: 100%;
            height: 100%;
            position: relative;
            z-index: 999;
        }

        #modal .inner {
            box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; -o-box-sizing: border-box;
            width: 100%;
            height: auto;       /* allow to fit content (if smaller)... */
            max-height: 100%;   /* ... but make sure it does not overflow browser window */

            /* allow vertical scrolling if required */
            overflow-x: hidden;
            overflow-y: auto;

            /* definition of modal window layout */
            background: #ffffff;
            border: 2px solid #222222;
            border-radius: 16px; /* some nice (modern) round corners */
            padding: 16px;       /* make sure inner elements does not overflow round corners */
        } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-11-25T07:21:41.313

简单的方法，你可以通过添加这个 css 来做到这一点所以，你只是把它添加到 CSS 中：

```
.modal-body {
position: relative;
padding: 20px;
height: 200px;
overflow-y: scroll;
} 
```

它正在工作！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-17T17:22:52.070

单独的固定定位应该可以解决该问题，但避免此问题的另一个好方法是将模态 div 或元素放置在页面底部而不是在您的站点布局中。大多数模态插件都给他们的模态定位绝对，以允许用户保持主页滚动。

```
<html>
        <body>
        <!-- Put all your page layouts and elements

        <!-- Let the last element be the modal elemment  -->
        <div id="myModals">
        ...
        </div>

        </body>
</html> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-10-27T09:53:09.567

在这里..非常适合我

```
.modal-body { 
    max-height:500px; 
    overflow-y:auto;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-07T05:03:54.580

`position:fixed`这意味着，模态窗口将相对于视点保持固定。我同意您的评估，即在这种情况下它是合适的，考虑到这一点，您为什么不向模式窗口本身添加滚动条？

如果是这样，正确的`max-height`和`overflow`属性应该可以解决问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-23T14:05:44.283

最后，我不得不对模态屏幕后面的页面内容进行更改，以确保它永远不会有足够长的时间来滚动页面。

一旦我这样做了，我在应用到对话框时遇到的问题`position: absolute`就解决了，因为用户不能再向下滚动页面。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-26T00:21:27.703

模式打开时可单击的窗口页面滚动条

这个对我有用。纯 CSS。

```
<style type="text/css">

body.modal-open {
padding-right: 17px !important;
}

.modal-backdrop.in {
margin-right: 16px; 

</style> 
```

试试看，让我知道

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-08-21T09:30:44.887

我想为这个动态宽度和高度的模态问题添加我的纯 CSS 答案。以下代码也适用于以下要求：

1.  将模态框放在屏幕中央
2.  如果模态高于视口，则滚动变暗（不是模态内容）

HTML：

```
<div class="modal">
    <div class="modal__content">
        (Long) Content
    </div>
</div> 
```

CSS/少：

```
.modal {
    position: fixed;
    display: flex;
    align-items: center;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    padding: @qquad;
    overflow-y: auto;
    background: rgba(0, 0, 0, 0.7);
    z-index: @zindex-modal;

    &__content {
        width: 900px;
        margin: auto;
        max-width: 90%;
        padding: @quad;
        background: white;
        box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.75);
    }
} 
```

这样，模态总是在视口内。模态框的宽度和高度可以随心所欲。为简单起见，我从中删除了关闭图标。

# tridion - 使用核心服务创建组件时如何传递 WebDavURL 而不是 TCM URI？

> ID：10476636
> 
> 赞同：2
> 
> 时间：2012-05-07T04:27:37.320
> 
> 标签：tridion

我可以使用文件夹 TCMURI 创建组件，如下所示：

```
var schemaInfo = client.ReadSchemaFields(
    "tcm:184-1882-8", true, new ReadOptions());

ComponentData component = (ComponentData)client.GetDefaultData(
    ItemType.Component, "tcm:19-454-2"); 
```

我可以在要创建组件的地方传递 WebDavURL 而不是这个 TCMURI 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T04:56:31.137

您应该简单地使用 WebDAV URL 而不是 TCM URI：

```
string folderWebDAVURL = "/webdav/MyPublication/Path/To/Folder";

ComponentData component = (ComponentData)client.GetDefaultData(
    ItemType.Component, folderWebDAVURL); 
```

# android - 将活动中的数据添加到电子邮件正文

> ID：10476638
> 
> 赞同：0
> 
> 时间：2012-05-07T04:27:53.777
> 
> 标签：android, string, email

不得不问这个问题我感到很愚蠢，但我找不到如何从多个 EditText 视图中获取 UI 信息并将其放置在电子邮件正文中。仅供参考，我的意图是，我只想填充消息正文。

```
 Intent buildingfireemail = new Intent(android.content.Intent.ACTION_SEND);
            buildingfireemail.setType("plain/text");///.setType("message/rfc822")
            buildingfireemail.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{"to@email.com"});
            buildingfireemail.putExtra(android.content.Intent.EXTRA_SUBJECT, "Subject");
            buildingfireemail.putExtra(android.content.Intent.EXTRA_TEXT, "Text"
    //////////////I need to add data from 80+ views into here.
    );try {
                startActivity(Intent.createChooser(buildingfireemail, "Send mail..."));
            } catch (android.content.ActivityNotFoundException ex) {
                Toast.makeText(BuildingFireActivity.this, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T04:37:44.967

试试这个 ：

```
Intent i = new Intent(Intent.ACTION_SEND);
i.setType("text/plain");
i.putExtra(Intent.EXTRA_EMAIL  , new String[]{"recipient@example.com"});
i.putExtra(Intent.EXTRA_SUBJECT, "subject of email");
i.putExtra(Intent.EXTRA_TEXT   , editText.getText().toString());
try 
{
     startActivity(Intent.createChooser(i, "Send mail..."));
} catch (android.content.ActivityNotFoundException ex) {
Toast.makeText(MyActivity.this, "There are no email clients installed.",Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T04:36:36.780

创建一个从所有文本编辑中返回整个字符串的函数。例如：

```
private String getText() {
    String text = "";

    text += mEditText1.getText().toString() + "\n";
    text += mEditText2.getText().toString() + "\n";

    return text;
} 
```

像这样使用：

```
buildingfireemail.putExtra(android.content.Intent.EXTRA_TEXT, getText()); 
```

类的初始化成员变量：

```
private EditText mEditText1; 
```

在 setContentView 之后将所有编辑文本带到 onCreate 中的成员变量中：

```
mEditText1 = (EditText) findViewById(R.layout.editText1); 
```

# php - Yii 框架单选按钮列表

> ID：10476646
> 
> 赞同：3
> 
> 时间：2012-05-07T04:29:05.147
> 
> 标签：php, yii, radiobuttonlist

任何人都可以阐明如何确定在提交表单后选择了哪个单选按钮？

我正在使用`CActiveForm::radioButtonList`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T05:48:07.037

你不需要确定它。客户将在`POST`数据中传输其价值。

例如这样的代码

```
<?=$form->radioButtonList($person,'gender_code',array('m'=>'Male','f'=>'Female')); ?> 
```

将形成`POST[gender_code]=m` 或`POST[gender_code]=f`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T07:45:50.930

单选列表反映了简单的表单提交过程。例如，如果您有以下列表实现

```
 <div class="form">
<?php echo CHtml::beginForm(); ?>     
    <div class="row">
        <?php
            echo CHtml::radioButtonList(
                    'registerMode',
                    'consumer',
                    array(
                        'consumer'=>'I am a FOODIE ',
                        'staff'=>'I want to give Services ',
                    ),
                    array('template'=>'<div class="rb">{input}</div><div class="rb">{label}</div><div class="clear">&nbsp;</div>')
                );
        ?>
    </div>     
    <div class="row">
        <?php echo CHtml::submitButton('Register',array('class'=>'submit')); ?>
    </div>

<?php echo CHtml::endForm(); ?>
</div><!-- form --> 
```

提交时生成以下输入

```
array
(
    'registerMode' => 'consumer'
    'yt0' => 'Register'
) 
```

它代表所选选项的名称或索引

以下代码可以获取值

```
 if(isset($_POST['registerMode']))
         CVarDumper::Dump($_POST['registerMode'],100,true); 
```

祝你好运

# maven - 用于标记空目录的 Maven 插件

> ID：10476648
> 
> 赞同：0
> 
> 时间：2012-05-07T04:29:53.863
> 
> 标签：maven, maven-plugin

Maven 有什么东西可以用来为空目录创建“占位符”（例如 .empty 或 EMPTY）文件吗？Mercurial 不包括空目录，因此我希望通过某种自动化方式填充这些目录。

过去，我使用的 Python 脚本正是这样做的。我希望有更多 Java 风格或 Maven 风格的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T05:38:39.287

您始终可以使用 maven-antrun-plugin 或 gmaven-plugin 编写将文件放入目录的脚本。然后将这些空文件提交到您的源代码管理。

但是，这会使 maven 生成将要签入的源代码。这是一个坏主意（或者至少不是您希望常规构建执行的操作）。

如果您的源代码管理不跟踪空目录，但您的构建需要它们，我建议您在 maven 生命周期中使用 generate-source 挂钩来创建这些目录。（理想情况下，在您的目标目录中保持干净，但是由于您的源代码管理不会跟踪它们，因此如果这会让您的生活更轻松，那么将它们放在您的源文件夹中几乎没有什么害处）。

类似的东西（考虑那个伪代码，绝对没有经过测试）：

```
<build>
  <plugins>
    <plugins>
      <artifactId>maven-antrun-plugin</...>
      <executions>
        <execution>
          <phase>generate-source</phase>
          <goals><goal>antrun</...
          <configuration>
            <tasks>
              <mkdir dir="my directory1"/>
              <mkdir dir="my directory2"/> 
```

# java - 为什么使用 Java 将数据发布到网站时会出现 405 错误？

> ID：10476650
> 
> 赞同：2
> 
> 时间：2012-05-07T04:30:23.323
> 
> 标签：java, http, http-status-code-405

我只是尝试使用以下代码将数据发布到谷歌，但总是出现 405 错误，谁能告诉我方法？

```
package com.tom.labs;
import java.net.*;
import java.io.*;
public class JavaHttp {
    public static void main(String[] args) throws Exception {
        File data = new File("D:\\in.txt");
        File result = new File("D:\\out.txt");
        FileOutputStream out = new FileOutputStream(result);
        OutputStreamWriter writer = new OutputStreamWriter(out); 
        Reader reader = new InputStreamReader(new FileInputStream(data));
        postData(reader,new URL("http://google.com"),writer);//Not working
        //postData(reader,new URL("http://google.com/search"),writer);//Not working
        sendGetRequest("http://google.com/search", "q=Hello");//Works properly
    }

    public static String sendGetRequest(String endpoint,
            String requestParameters) {
        String result = null;
        if (endpoint.startsWith("http://")) {
            // Send a GET request to the servlet
            try {
                // Send data
                String urlStr = endpoint;
                if (requestParameters != null && requestParameters.length() > 0) {
                    urlStr += "?" + requestParameters;
                }
                URL url = new URL(urlStr);
                URLConnection conn = url.openConnection();
                // Get the response
                BufferedReader rd = new BufferedReader(new InputStreamReader(
                        conn.getInputStream()));
                StringBuffer sb = new StringBuffer();
                String line;
                while ((line = rd.readLine()) != null) {
                    sb.append(line);
                }
                rd.close();
                result = sb.toString();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        System.out.println(result);
        return result;
    }

    /**
     * Reads data from the data reader and posts it to a server via POST
     * request. data - The data you want to send endpoint - The server's address
     * output - writes the server's response to output
     * 
     * @throws Exception
     */
    public static void postData(Reader data, URL endpoint, Writer output)
            throws Exception {
        HttpURLConnection urlc = null;
        try {
            urlc = (HttpURLConnection) endpoint.openConnection();
            try {
                urlc.setRequestMethod("POST");
            } catch (ProtocolException e) {
                throw new Exception(
                        "Shouldn't happen: HttpURLConnection doesn't support POST??",
                        e);
            }
            urlc.setDoOutput(true);
            urlc.setDoInput(true);
            urlc.setUseCaches(false);
            urlc.setAllowUserInteraction(false);
            urlc.setRequestProperty("Content-type", "text/xml; charset=UTF-8");
            OutputStream out = urlc.getOutputStream();
            try {
                Writer writer = new OutputStreamWriter(out, "UTF-8");
                pipe(data, writer);
                writer.close();
            } catch (IOException e) {
                throw new Exception("IOException while posting data", e);
            } finally {
                if (out != null)
                    out.close();
            }
            InputStream in = urlc.getInputStream();
            try {
                Reader reader = new InputStreamReader(in);
                pipe(reader, output);
                reader.close();
            } catch (IOException e) {
                throw new Exception("IOException while reading response", e);
            } finally {
                if (in != null)
                    in.close();
            }
        } catch (IOException e) {
            e.printStackTrace();
            throw new Exception("Connection error (is server running at "
                    + endpoint + " ?): " + e);
        } finally {
            if (urlc != null)
                urlc.disconnect();
        }
    }

    /**
     * Pipes everything from the reader to the writer via a buffer
     */
    private static void pipe(Reader reader, Writer writer) throws IOException {
        char[] buf = new char[1024];
        int read = 0;
        while ((read = reader.read(buf)) >= 0) {
            writer.write(buf, 0, read);
        }
        writer.flush();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T04:36:16.807

405 表示“方法不允许”。例如，如果您尝试访问`POST`不允许的 URL `POST`，则服务器将返回 405 状态。

您想通过向 Google 发出 POST 请求来做什么？我怀疑 Google 的主页只允许 GET、HEAD 和 OPTIONS。

这是对 Google 的 POST 请求的正文，其中包含 Google 的解释。

> **405.**这是一个错误。
> 
> 请求方法`POST`不适合 URL `/`。我们知道的就这些。

# c++ - 如何在 64 位机器中保存 8 位 bmp 图像？在 32 位机器上运行良好

> ID：10476653
> 
> 赞同：-1
> 
> 时间：2012-05-07T04:30:50.360
> 
> 标签：c++

下面提到的代码；在 32 位机器上运行良好，但在 64 位机器上无法运行..

任何想法/建议 - 以及如何解决这个问题？？？伙计们，你们怎么看 - 在 64 位机器中保存图像 8 位 BMP

```
void BMPFile::SaveBMP(char* fileName,BYTE * buf,UINT width,UINT height)
{
    short res1=0;
    short res2=0;
    long pixoff=54;
    long compression=0;
    long cmpsize=0;
    long colors=0;
    long impcol=0;
    char m1='B';
    char m2='M';

    DWORD widthDW = WIDTHBYTES(width *24);

    long bmfsize=sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER) +
                            widthDW * height;   
    long byteswritten=0;

    BITMAPINFOHEADER header;
    header.biSize=40;                       // header size
    header.biWidth=width;
    header.biHeight=height;
    header.biPlanes=1;
    header.biBitCount=24;                   // RGB encoded, 24 bit
    header.biCompression=BI_RGB;            // no compression
    header.biSizeImage=0;
    header.biXPelsPerMeter=0;
    header.biYPelsPerMeter=0;
    header.biClrUsed=0;
    header.biClrImportant=0;

    FILE *fp;   
    fp=fopen(fileName,"wb");
    if (fp==NULL)
    {
        return;
    }

    // should probably check for write errors here...

    fwrite((BYTE  *)&(m1),1,1,fp); byteswritten+=1;
    fwrite((BYTE  *)&(m2),1,1,fp); byteswritten+=1;
    fwrite((long  *)&(bmfsize),4,1,fp); byteswritten+=4;
    fwrite((int  *)&(res1),2,1,fp); byteswritten+=2;
    fwrite((int  *)&(res2),2,1,fp); byteswritten+=2;
    fwrite((long  *)&(pixoff),4,1,fp); byteswritten+=4;

    fwrite((BITMAPINFOHEADER *)&header,sizeof(BITMAPINFOHEADER),1,fp);
    byteswritten+=sizeof(BITMAPINFOHEADER);

    long row=0;
    long rowidx;
    long row_size;
    row_size=header.biWidth*3;
    long rc;
    for (row=0;row<header.biHeight;row++) 
    {
        rowidx=(long unsigned)row*row_size;                           

        // write a row
        rc=fwrite((void  *)(buf+rowidx),row_size,1,fp);
        if (rc!=1) 
        {
            break;
        }
        byteswritten+=row_size; 

        // pad to DWORD
        for (DWORD count=row_size;count<widthDW;count++) {
            char dummy=0;
            fwrite(&dummy,1,1,fp);
            byteswritten++;                           
        }
    }             
    fclose(fp);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:38:40.663

编辑：我再次查看了 Windows 标题，我错过了#pragma 包。所以对齐不是问题。

通常，如果您需要将固定大小的值写入磁盘，请使用显式大小的数据类型，因为 int/long 等的大小可能因编译器和体系结构而异。在 ANSI 平台上，您可以包含“stdint.h”，在视觉 c 上，您可以 typedef 这些：

```
typedef signed __int8 int8_t;
typedef signed __int16 int16_t;
typedef signed __int32 int32_t;
typedef signed __int64 int64_t;
typedef unsigned __int8 uint8_t;
typedef unsigned __int16 uint16_t;
typedef unsigned __int32 uint32_t;
typedef unsigned __int64 uint64_t; 
```

# php - 通过 ajax 到 php 的数组

> ID：10476661
> 
> 赞同：0
> 
> 时间：2012-05-07T04:31:58.993
> 
> 标签：php, jquery, arrays, post

经过一番折腾后，我得到了这段代码，以向我显示一个警报，其中包含检查的正确 id 数组：

```
alert($("input[name=our_types]:checked").map(function () {return this.value;}).get().join(",")); 
```

我需要能够将它传递给这里的 post action 函数：

```
 $.post(action, {
        form_name: $('#form_name').val(),
        site_id: $('#site_id').val()

    }, 
```

我试过做：

```
 var our_types = $("input[name=our_types]:checked").map(function () {return this.value;}).get().join(","); 
```

然后像这样传递它：

```
 $.post(action, {
        form_name: $('#form_name').val(),
        site_id: $('#site_id').val(),
                    our_types: $('#our_types').val()

    }, 
```

但无济于事。我已经坚持了几个小时，也许新的眼睛会有所帮助。

这是另一个示例的工作代码：

```
jQuery(document).ready(function(){

    $('#contactform').submit(function(){

        var action = $(this).attr('action');

        $("#message").slideUp(750,function() {
        $('#message').hide();

        $('#submit')
            .after('<img src="assets/ajax-loader.gif" class="loader" />')
            .attr('disabled','disabled');

        $.post(action, {
            USERNAME: $('#USERNAME').val(),
            PASSWORD: $('#PASSWORD').val()
        },
            function(data){
                document.getElementById('message').innerHTML = data;
                $('#message').slideDown('slow');
                $('#contactform img.loader').fadeOut('slow',function(){$(this).remove()});
                $('#submit').removeAttr('disabled');
                if(data.match('success') != null) $('#contactform').slideUp('slow');

            }
        );

        });

        return false;

    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T01:13:10.170

你很亲密。

当你

```
alert($("input[name=our_types]:checked").map(function () {return this.value;}).get().join(",")); 
```

看到内容就是你想要的。

您需要做的就是将其分配给一个变量：

```
var our_types_vals = $("input[name=our_types]:checked").map(function () {return this.value;}).get().join(","); 
```

并将该变量传递给 post() 函数，如下所示：

```
$.post(action, {
    form_name: $('#form_name').val(),
    site_id: $('#site_id').val(),
    our_types: our_types_vals
  },  // ... other codes
); 
```

您还可以绕过将其分配给变量并直接在属性-值对对象内部传递操作，如下所示：

```
$.post(action, {
    form_name: $('#form_name').val(),
    site_id: $('#site_id').val(),
    our_types: $("input[name=our_types]:checked").map(function () {return this.value;}).get().join(",")
  },  // ... other codes
); 
```

请注意删除操作上的结束分号，以防止对象字面量内的语法错误。

# android - 是否可以在 android 的列表首选项中列出联系人？

> ID：10476663
> 
> 赞同：0
> 
> 时间：2012-05-07T04:32:15.923
> 
> 标签：android, android-contacts, listpreference

我想将联系人列表添加到 android 中的“列表首选项”中，以便用户可以选择联系人作为首选项。但不幸的是，我无法找到一种方法来做到这一点。任何人都可以帮我解决它。

注意：在android开发方面我仍然是一个菜鸟，所以如果你能简单地解释一下，我会非常感激。:)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T05:49:03.390

做一件事使用内容解析器获取所有联系人并存储在光标中。之后使用 contentresolver.query() 方法获取所有联系人姓名，并将所有姓名存储在字符串数组中。

然后使用此代码创建动态 Listpreference ：

```
PreferenceScreen pf = getPreferenceManager().createPreferenceScreen(this);
dialogBasedPrefCat.setTitle("Category Title");
pf.addPreference(dialogBasedPrefCat);

enter code here

ListPreference lf = new ListPreference(this);
        lf.setKey("keyName"); //Refer to get the pref value
        lf.setEntries("Array of values");
        lf.setEntryValues("Array of item value"); // Here you can add Array of String
        lf.setDialogTitle("Dialog Title"); 
        lf.setTitle("Title");
        lf.setSummary("Summary");
        dialogBasedPrefCat.addPreference(lf); Adding under the category

        return pf; 
```

我认为它可以帮助你。

# c++ - 避免使用“return”语句复制对象

> ID：10476665
> 
> 赞同：48
> 
> 时间：2012-05-07T04:32:33.190
> 
> 标签：c++, object, copy, return, return-value

我在 C++ 中有一个非常基本的问题。返回对象时如何避免复制？

这是一个例子：

```
std::vector<unsigned int> test(const unsigned int n)
{
    std::vector<unsigned int> x;
    for (unsigned int i = 0; i < n; ++i) {
        x.push_back(i);
    }
    return x;
} 
```

据我了解 C++ 的工作原理，此函数将创建 2 个向量：本地向量 (x) 和将返回的 x 的副本。有没有办法避免复制？（而且我不想返回指向对象的指针，而是返回对象本身）

* * *

使用“移动语义”（在评论中说明）该函数的语法是什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-07T09:22:37.060

RVO（返回值优化）的工作原理似乎有些混乱。

一个简单的例子：

```
#include <iostream>

struct A {
    int a;
    int b;
    int c;
    int d;
};

A create(int i) {
    A a = {i, i+1, i+2, i+3 };
    std::cout << &a << "\n";
    return a;
}

int main(int argc, char*[]) {
    A a = create(argc);
    std::cout << &a << "\n";
} 
```

及其在[ideone](http://ideone.com/f0lsu)的输出：

```
0xbf928684
0xbf928684 
```

**令人惊讶？**

实际上，这就是 RVO 的效果：*要返回*的对象直接在调用者*中就地构造。*

**如何 ？**

传统上，调用者（`main`此处）将在堆栈上为返回值保留一些空间：*返回槽*；被调用者（`create`此处）被传递（以某种方式）返回槽的地址以将其返回值复制到其中。被调用者然后为它在其中构建结果的局部变量分配自己的空间，就像为任何其他局部变量一样，然后将其复制到`return`语句的返回槽中。

当编译器从代码中推断出可以将变量直接构造到具有等效语义的*返回槽中时（as-if 规则），就会触发 RVO。*

请注意，这是一种常见的优化，它被标准明确列入白名单，编译器不必担心复制（或移动）构造函数的可能副作用。

**什么时候 ？**

编译器最有可能使用简单的规则，例如：

```
// 1\. works
A unnamed() { return {1, 2, 3, 4}; }

// 2\. works
A unique_named() {
    A a = {1, 2, 3, 4};
    return a;
}

// 3\. works
A mixed_unnamed_named(bool b) {
    if (b) { return {1, 2, 3, 4}; }

    A a = {1, 2, 3, 4};
    return a;
}

// 4\. does not work
A mixed_named_unnamed(bool b) {
    A a = {1, 2, 3, 4};

    if (b) { return {4, 3, 2, 1}; }

    return a;
} 
```

在后一种情况 (4) 中，当返回时无法应用优化，`A`因为编译器无法`a`在返回槽中构建，因为它可能需要它来做其他事情（取决于布尔条件`b`）。

因此，一个简单的经验法则是：

*如果在声明之前没有声明其他返回槽的候选者，则应应用 RVO `return`。*

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-07T04:37:02.237

该程序可以利用命名返回值优化 (NRVO)。见这里：[http ://en.wikipedia.org/wiki/Copy_elision](http://en.wikipedia.org/wiki/Copy_elision)

在 C++11 中有移动构造函数和赋值，它们也很便宜。您可以在此处阅读教程：http: [//thbecker.net/articles/rvalue_references/section_01.html](http://thbecker.net/articles/rvalue_references/section_01.html)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-05-07T04:42:10.410

[命名返回值优化](http://msdn.microsoft.com/en-us/library/ms364057.aspx)将为您完成这项工作，因为*编译器会在使用它时尝试消除冗余的复制构造函数和析构函数调用*。

```
std::vector<unsigned int> test(const unsigned int n){
    std::vector<unsigned int> x;
    return x;
}
...
std::vector<unsigned int> y;
y = test(10); 
```

带返回值优化：

1.  y 已创建
2.  x 已创建
3.  x 分配给 y
4.  x 被破坏

（如果您想自己尝试以加深理解，请查看[我的这个示例](http://paste2.org/p/2012156)）

甚至更好，就像[Matthieu M.](https://stackoverflow.com/users/147192/matthieu-m)指出的那样，如果您`test`在声明的同一行中调用`y`，您还可以避免构建冗余对象和冗余分配（`x`将在存储的内存中构建`y`）：

```
std::vector<unsigned int> y = test(10); 
```

检查他的答案以更好地了解这种情况（您还会发现这种优化并不总是适用）。

**或者**您可以修改代码以将向量的引用传递给您的函数，这在语义上更正确，同时避免复制：

```
void test(std::vector<unsigned int>& x){
    // use x.size() instead of n
    // do something with x...
}
...
std::vector<unsigned int> y;
test(y); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T04:37:13.987

编译器通常可以为您优化掉多余的副本（这称为*返回值优化*）。见[https://isocpp.org/wiki/faq/ctors#return-by-value-optimization](https://isocpp.org/wiki/faq/ctors#return-by-value-optimization)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-28T13:18:40.963

**如果 NRVO 没有发生，则保证使用移动构造函数**

因此，如果您通过值返回具有移动构造函数（例如`std::vector`）的对象，则即使编译器未能进行可选的 NRVO 优化，也可以保证不会进行完整的向量复制。

两位对 C++ 规范本身具有影响力的用户提到了这一点：

*   Johathan Wakely 在[返回时是否保证对象会被移动？](https://stackoverflow.com/questions/11088023/is-an-object-guaranteed-to-be-moved-when-it-is-returned/11088507#11088507)
*   Howard Hinnant[如何从考虑 C++11 右值和移动语义的函数中返回对象？](https://stackoverflow.com/questions/4986673/how-to-return-an-object-from-a-function-considering-c11-rvalues-and-move-seman/4986802#4986802)

对我对名人的吸引力不满意？

好的。我不能完全理解 C++ 标准，但我可以理解它的示例！;-)

引用[C++17 n4659 标准草案](https://github.com/cplusplus/draft/blob/master/papers/n4659.pdf)15.8.3 [class.copy.elision]“复制/移动省略”

> 3 在以下复制初始化上下文中，可能会使用移动操作而不是复制操作：
> 
> *   (3.1) — 如果 return 语句 (9.6.3) 中的表达式是一个（可能带括号的）id 表达式，它命名一个对象，该对象具有在最内层封闭函数或 lambda 的主体或参数声明子句中声明的自动存储持续时间- 表达式，或
> *   (3.2) — 如果 throw 表达式 (8.17) 的操作数是非易失性自动对象的名称（函数或 catch 子句参数除外），其范围不超出最内层封闭 try-块（如果有的话），
> 
> 首先执行为副本选择构造函数的重载决策，就好像对象是由右值指定的一样。如果第一个重载决议失败或未执行，或者如果所选构造函数的第一个参数的类型不是对对象类型的右值引用（可能是 cv 限定的），则再次执行重载决议，将对象视为左值。[注意：无论是否会发生复制省略，都必须执行此两阶段重载解析。它确定如果不执行省略则要调用的构造函数，并且即使调用被省略，所选构造函数也必须是可访问的。——尾注]
> 
> 4 [ 示例：
> 
> ```
> class Thing {
> public:
>   Thing();
>   ~ Thing();
>   Thing(Thing&&);
> private:
>   Thing(const Thing&);
> };
> 
> Thing f(bool b) {
>   Thing t;
>   if (b)
>     throw t;          // OK: Thing(Thing&&) used (or elided) to throw t
>   return t;           // OK: Thing(Thing&&) used (or elided) to return t
> }
> 
> Thing t2 = f(false);  // OK: no extra copy/move performed, t2 constructed by call to f
> 
> struct Weird {
>   Weird();
>   Weird(Weird&);
> };
> 
> Weird g() {
>   Weird w;
>   return w;           // OK: first overload resolution fails, second overload resolution selects Weird(Weird&)
> } 
> ```
> 
> — 结束示例

我不喜欢“可能被使用”的措辞，但我认为其意图是表示如果“3.1”或“3.2”成立，则必须发生右值返回。

这在我的代码注释中非常清楚。

**通过引用传递 +`std::vector.resize(0)`用于多次调用**

如果您对 进行多次调用`test`，我相信这会更有效，因为`malloc()`当向量的大小翻倍时，它会节省一些调用 + 重定位副本：

```
void test(const unsigned int n, std::vector<int>& x) {
    x.resize(0);
    x.reserve(n);
    for (unsigned int i = 0; i < n; ++i) {
        x.push_back(i);
    }
}

std::vector<int> x;
test(10, x);
test(20, x);
test(10, x); 
```

鉴于[https://en.cppreference.com/w/cpp/container/vector/resize](https://en.cppreference.com/w/cpp/container/vector/resize)说：

> 当调整到更小的大小时，向量容量永远不会减少，因为这会使所有迭代器失效，而不仅仅是那些被等效的 pop_back() 调用序列失效的迭代器。

而且我认为编译器无法优化按值返回的版本来防止额外的 malloc。

另一方面，这是：

*   让界面更丑
*   减小矢量大小时使用的内存比需要的多

所以有一个权衡。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-07T08:04:18.177

引用它会起作用。

```
Void(vector<> &x) {

} 
```

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2012-05-07T04:44:59.503

首先，您可以将返回类型声明为 std::vector & 在这种情况下将返回引用而不是副本。

您还可以定义一个指针，在方法体中构建一个指针，然后返回该指针（或者该指针的副本是正确的）。

最后，在某些情况下，许多 C++ 编译器可能会执行返回值优化 (http://en.wikipedia.org/wiki/Return_value_optimization)，从而消除临时对象。

# sql - 计算并获取每个行成员的最大值

> ID：10476666
> 
> 赞同：1
> 
> 时间：2012-05-07T04:32:34.730
> 
> 标签：sql

我正在尝试建立一个查询来计算每个地区每个月哪个组织的官员出勤率最高？术语：“区”和“loinum”的意思相同。马萨诸塞州有 31 个区。“组织”是一个地方分会，位于其中一个地区。“官员”是名为“WM”到“TY”的职位。桌子是

```
loinum month   year  org  wm sw jw  ty
1        8     2011  Ma   0   1  1  1 
1        9     2011  CA   1   1  0  0 
1        8     2011  La   1   0  0  1 
2        7     2011  ME   1   1  1  1
2        6     2011  io   1   0  0  0  
2        9     2011  BO   1   0  0  0 
3        5     2011  Ch   1   1  1  1
3        4     2011  AL   0   0  0  1   
3        4     2011  EG   0   1  1  0 
```

我如何计算并获得每个 loinum 和每个月的最大值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:43:45.653

这是一个通用的解决方案，尽管对于特定的数据库可能会有更好的解决方案。创建一个内联视图，获取每个 loinum、月和年的最大值。然后将其加入主表。

注意：如果最大值相同，则给定的 loinum、月份和年份会有多个结果

```
SELECT t.* 
FROM   table1 t 
       INNER JOIN (SELECT loinum, 
                          month, 
                          year, 
                          Max(wm + sw + jw + ty) oCount 
                   FROM   table1 
                   GROUP  BY loinum, 
                             month, 
                             year) AS MAX 
         ON t.loinum = max.loinum 
            AND t.month = max.month 
            AND t.year = max.year 
            AND ( wm + sw + jw + ty ) = max.oCount 
```

[演示](http://sqlfiddle.com/#!3/2dcaf/1)

结果

```
LOINUM  MONTH   YEAR    ORG WM  SW  JW  TY
1           8   2011    Ma  0   1   1   1
1           9   2011    CA  1   1   0   0
2           6   2011    io  1   0   0   0
2           7   2011    ME  1   1   1   1
2           9   2011    BO  1   0   0   0
3           4   2011    EG  0   1   1   0
3           5   2011    Ch  1   1   1   1 
```

# sharepoint - 该文件不是有效的 XML 文件。该文件不是有效的 XML 文档

> ID：10476668
> 
> 赞同：0
> 
> 时间：2012-05-07T04:32:49.457
> 
> 标签：sharepoint, sharepoint-2007, infopath, infopath-2007

我正在尝试为 InfoPath 2007 中的数据连接向导输入 Web 服务的 url (http://servername:port#/_vti_bin/lists.asmx)，但我收到此错误：

> 该文件不是有效的 XML 文件。该文件不是有效的 XML 文档。一个文档必须只包含一个根元素。第 1 行，位置 0

我检查了 Web 服务的 url，它显示了操作列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:36:38.050

在错误对话框中应该有“显示详细信息”按钮。提供有关错误的更多详细信息。请同时提供该详细信息。您是否有任何参数要传递给此 Web 服务？如果是，请验证参数。

# php - PHP概念设计问题

> ID：10476676
> 
> 赞同：0
> 
> 时间：2012-05-07T04:33:52.960
> 
> 标签：php, design-patterns, frameworks, concept

我想再次确认我的 Web 应用程序的 php 设计理念。

我正在创建类似 wordpress MU 平台的东西。每个用户都有自己的数据库。而且我有一个为所有用户提供支持的核心框架。

我的设计理念是这样的。我使用相同的框架（文件/脚本）来补充我所有用户的需求。当用户访问他的网址时。让我们说 peter.mydomain.com。我的脚本将从 url 获取值“peter”并将其连接到配置文件中的“peter”数据库。

我可以知道这是否安全以及这样做的正确方法。它会发布哪些可能的安全问题？

# iphone - iPhone - 如何在降低高度后删除导航栏下方的黑色空间

> ID：10476682
> 
> 赞同：1
> 
> 时间：2012-05-07T04:34:48.473
> 
> 标签：iphone, uinavigationbar, frame

我不得不为这个 iPhone 应用程序调整 UINavigationBar 的高度。现在，当我在 tableview 中使用较小的 navBar 时，它下面有一个黑色空间。

我想看到它消失...

谁能帮我？非常感激！

视觉：[http ://tinypic.com/r/2gwchg2/6](http://tinypic.com/r/2gwchg2/6)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:44:42.003

设置您的导航栏框架并使其上方减少框架中的 y 方向。试试这个。

```
self.navigationController.navigationBar.frame=CGRectMake(<#CGFloat x#>, <#CGFloat y#>, <#CGFloat width#>, <#CGFloat height#>); 
```

使其 y=-10 和 height=30; 并根据您的要求进行检查和调整。

```
UIView *BtnView = [[UIView alloc] initWithFrame:CGRectMake(0,0,300,30)];
UILabel *compete_Label=[[UILabel alloc]initWithFrame:CGRectMake(100, 5, 60, 20)];
[compete_Label setText:@"Your Title name"];

compete_Label.backgroundColor=[UIColor clearColor];
[compete_Label setFont:[UIFont fontWithName:@"Helvetica-Bold" size:12]];
compete_Label.textColor=[UIColor whiteColor];
[BtnView addSubview:compete_Label];
[self.View addSubView:BtnView]; 
```

试试这个代码，我认为这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:40:40.597

如果您使导航栏变小，那么您应该相应地使 tableview 框架位置，以便将其 origin-y 设置为导航栏的底部。

设置 tableview origin-y 并调整 tableview 的高度。

# jquery - 访问突出显示/选定的文本

> ID：10476686
> 
> 赞同：1
> 
> 时间：2012-05-07T04:35:01.897
> 
> 标签：jquery, html, css

当用户突出显示网页的一部分时，我如何访问用户选择的那段 html 或文本。

看起来像[jquery select](http://api.jquery.com/select/)仅适用于输入元素。

基本上，访问 css3 [::selection 选择](http://%22http://www.w3schools.com/cssref/sel_selection.asp)器生效的部分的简单方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:40:40.537

你可以试试：

```
document.getSelection()

var text = '';
if (window.getSelection)
    {
        text = window.getSelection();
    }
    else if (document.getSelection)
    {
        text = document.getSelection();
    }
    else if (document.selection)
    {
        text = document.selection.createRange().text;
    }
    else return; 
```

# php - if 语句结果在 for 循环中被回显两次

> ID：10476688
> 
> 赞同：1
> 
> 时间：2012-05-07T04:35:14.577
> 
> 标签：php, html, for-loop, if-statement

[http://codepad.org/VnqZjQ7e](http://codepad.org/VnqZjQ7e)

所有的代码都在那里，所以这次我不会像上次那样忘记代码。

基本上，如果您在主机服务器中运行它，您会看到计划列在表格上方，这是我想要阻止的，但问题是我什至不知道它来自哪里，另一个问题是我如何会修复它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:37:17.850

问题出在这部分代码中

```
if($basicplan < $suckersplan && $basicplan < $compplan)
    echo $bestplan = $basicname;
if($compplan < $basicplan && $compplan < $suckersplan)
    echo $bestplan = $compname;
if($suckersplan < $basicplan && $suckersplan < $compplan)
    echo $bestplan = $suckersname; 
```

这在元素之外回响。相反，请使用以下内容。

```
if($basicplan < $suckersplan && $basicplan < $compplan)
    $bestplan = $basicname;
if($compplan < $basicplan && $compplan < $suckersplan)
    $bestplan = $compname;
if($suckersplan < $basicplan && $suckersplan < $compplan)
    $bestplan = $suckersname; 
```

# php - Mysql数据将在表格列中显示“Array”

> ID：10476693
> 
> 赞同：0
> 
> 时间：2012-05-07T04:36:10.973
> 
> 标签：php, mysql

我想问一下我的php编码..我
正在做一些数组编码但是当我提交我的数据时，在我的数据库中会在'description'和'qty'列显示一个数组..
我使用mysql ..下面是我的数组编码..

```
$item = array(
'item_description' => '',
'price' => '',
'qty' => '',
'amount' => '',
);
foreach ($item as $key => $value){
$item_description = $_POST['item_description'][$key];
$price = $_POST['price'][$key];
$qty = $_POST['qty'][$key];
$amount = $_POST['amount'][$key];}
} 
```

这是我的插入查询。

```
$sql1="INSERT INTO payment_item (payment_id, payment_item_id, item_description, price, qty, amount)
VALUES
('$last_insert_payment_id','NULL','$_POST[item_description]','$_POST[price]','$_POST[qty]','$_POST[amount]')"; 
```

这是我的表格：

```
<form>
<h1>Payment Item</h1>
Payment ID :<input id="payment_id" name="payment_id" type="text"><br>
<input type="button" value="Add Row" onClick="addRow('tableID')"/>
<input type="button" value="Delete Row" onClick="deleteRow('tableID')"/>
<table class="table" bgcolor="#CCCCCC">
<thead>
<tr>
<td></td>
<td><center>Item Description</center></td>
<td><center>Price (RM)</center></td>
<td><center>Month</center></td>
<td><center>Amount (RM)</center></td>
</tr>
</thead>
<tbody id="tableID">
<tr>
<td><input type="checkbox" name="chk"></td>
<td>
<select name="item_description">
    <option value="deposit">Deposit</option>
    <option value="rental">Rental</option>
    <option value="stamp">Stamp Duty</option>
    <option value="process">Process Fee</option>
    <option value="ap">AP</option>
</select>
</td>
<td><input id="price" name="price" type="text"></td>
<td><input id="month" name="qty" type="text"></td>
<td><input id="amount" name="amount" type="text"></td>
</tr>
</tbody>
</table>
<input name="submit" type="submit" value="Submit">
<input name="reset" type="reset" value="Reset">
</form> 
```

我很抱歉我的英语不好..
但我真的需要有人为此提供帮助..
谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T08:39:38.797

当 PHP 试图将数组转换为字符串时，会出现一个单词 'Array'。
因此，对于出现的字段，`Array`您必须以某种方式对其进行处理，这取决于您的应用程序逻辑，将您拥有的任何数组转换为适当的字符串。

这个问题与mysql无关。

还请记住，您必须格式化 SQL 字符串。至少做

```
$var = mysql_real_escape_string($var); 
```

对于您要放入查询的每个变量，并将其单引号括在查询中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T07:42:23.660

我不知道您的 $_POST 包含什么。但我假设你需要这个

```
<?php 
$item = array(
   'item_description' => '',
   'price' => '',
   'qty' => '',
   'amount' => '',
);
foreach ($item as $key => &$value)
{
    $value = $_POST[$key];
}
?> 
```

编辑：您必须指定表单方法

```
<form method="post"> 
```

最后是 INSERT 查询

```
$sql1="INSERT INTO payment_item (payment_id, payment_item_id, item_description, price,qty, amount) VALUES ('$last_insert_payment_id','NULL','$item[item_description]','$item[price]','$item[qty]','$item[amount]')"; 
```

# hibernate - Session.save 正在更新休眠中的数据

> ID：10476696
> 
> 赞同：3
> 
> 时间：2012-05-07T04:36:19.287
> 
> 标签：hibernate

我正在尝试在休眠 session.save() 中保存学生信息的示例代码。在那，学生姓名，班级，教师 ID。

表：学生

```
SNO SNAME             SCLASS         TNO
----------- ----------------------------------------
1 J D Alex            3                1
2 Goaty               2                2
3 J D Paul            7                1 
```

代码：-

```
Transaction tx1=session1.beginTransaction();
Object o2=session1.get(Student.class,new Integer(3));
((Student)o2).setSclass("8");
session1.save(o2);
log.info("loadStdYearlyInfo:class "+((Student)o2).getSclass());
tx1.commit();
session1.close(); 
```

保存数据并查看输出后，班级值更新为 8，学生 id 为 3

```
 SNO SNAME             SCLASS         TNO
    ----------- ----------------------------------------
    1 J D Alex            3                1
    2 Goaty               2                2
    3 J D Paul            8                1

[07/May/2012:10:03:06] info ( 3500): CORE3282: stdout: Hibernate: /* load com.aims.beans.Student */ select student0_.sno as sno0_, student0_.sname as sname1_0_, student0_.sclass as sclass1_0_, student0_.tno as tno1_0_ from student student0_ where student0_.sno=?
[07/May/2012:10:03:06] info ( 3500): CORE3282: stdout: loadStdYearlyInfo:class 8
[07/May/2012:10:03:06] info ( 3500): CORE3282: stdout: Hibernate: /* update com.aims.beans.Student */ update student set sname=?, sclass=?, tno=? where sno=?
[07/May/2012:10:03:06] info ( 3500): CORE3282: stdout: loadStdYearlyInfo2 
```

如何更新数据库中的学生班级值？.save 意味着插入数据。但是这里的值是更新的。请让我知道。如果有任何问题？如果有任何问题，对不起。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T06:55:12.250

This is the expected behaviour of Hibernate.

当休眠会话加载记录时，其实例将处于[持久](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#objectstate-overview)状态并由该会话管理。如果持久实例的值发生了变化，它们就被认为是脏的。在刷新过程中（即`Session.flush()`），hibernate会找出所有的脏实例（我们称之为这个过程`automatic dirty checking`），并生成并发出必要的SQL，让它们更新相应的DB记录，以确保DB记录具有相同的状态作为JVM中保存的相应实例。

休眠会话的刷新行为由`FlushMode`. 默认情况下，`FlushMode.AUTO` 这意味着 `session.flush()` 在提交事务或执行查询之前将自动调用。因此，在您的代码中，尽管您没有`session.flush()` 显式调用，但仍会发生刷新过程以发出这些 UPDATE 语句。

关于代码的一些注释：

```
Transaction tx1=session1.beginTransaction();   

/**
 * o2 is the in the persistent state and managed by session1
 */
Object o2=session1.get(Student.class,new Integer(3));

/**
 *As the value of o2 is changed , it becomes dirty and hibernate will issue an UPDATE SQL 
 *for it during flushing.
 */
 ((Student)o2).setSclass("8");

/**
 * save() only has effect on the transient instance. Nothing will 
 * be done when calling it on the persistent instance . So removing this line of code 
 * still produces the same result.
 */
session1.save(o2);
log.info("loadStdYearlyInfo:class "+((Student)o2).getSclass());

/**
 *I believe default FlushMode (FlushMode.AUTO) is used in here ,so session.flush()  will be invoked implicitly before tx1.commit().
 *Automatic dirty checking occurs and UPDATE SQL is generated and issued to the DB 
 *to update the dirty o2 instance
 */ 
tx1.commit();
session1.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:29:59.460

It's an expected behaviour.

Object returned by `get` is *persistent*. Call of `save` for persistent object is, basically speaking, ignored. But Hibernate automatically tracks changes in persistent object and updates the database accordingly, hence the `update` statement.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T05:00:04.597

I think it is because you are working with transactions. When you commit a transaction it automatically flushes any changes to an already loaded entity, in this case your Student object.
It does not save the object because it already has an unique identifier attached to the session.
I would have thought Hibernate would have thrown an exception because you tried to save an already attached object.

I hope this helps you out.

# blackberry - 如何使用 UID 查询黑莓联系人？

> ID：10476706
> 
> 赞同：-1
> 
> 时间：2012-05-07T04:37:46.213
> 
> 标签：blackberry, blackberry-jde

我想在本机联系人中搜索 UID。我有一个特定联系人的 UID，现在我想更新与我的数据库中的这个 UID 匹配的所有联系人。我的主要目标是阻止我插入的联系人重复。谁能帮我做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:37:50.283

嘿得到了我自己问题的答案。感谢您的所有努力。通过使用您的 UID 号。你可以调用这个方法

```
contact = (BlackBerryContact) contactsList.getByUID(uid, 1); 
```

传递您的 uid 并执行与使用电话号码检索联系人相同的操作。

# vb.net - 如何使用 vb 在 ASP.NET 底部单击事件中创建 SQL Server 2000 表？

> ID：10476711
> 
> 赞同：-1
> 
> 时间：2012-05-07T04:38:03.300
> 
> 标签：vb.net, sql-server-2000

我只是 ASP.NET 编程的初学者，我正在尝试使用 ASP.NET 和 VB.NET 准备一个小型计费项目。

我想通过在文本框控件中传递表名和行数来创建一个 SQL Server 2000 表。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:21:51.047

您可以执行 sp_executesql 存储过程来归档该类型的任务。这是VB.NET中的一个非常简单的示例

```
Dim cn As New SqlConnection("your DB connection string goes here")
        cn.Open()

        Dim createSql As String

        createSql = "BEGIN "

        createSql += "EXECUTE sp_executesql N'CREATE TABLE table1(id INT)'; "

        For i As Integer = 1 To 10
            createSql += "EXECUTE sp_executesql N'INSERT INTO table1 VALUES(" + i.ToString() + ")'; "
        Next

        createSql += "END "

        Dim cmd As New SqlCommand(createSql, cn)
        cmd.ExecuteNonQuery() 
```

要了解有关 sq_executesql SP 的更多信息，请 [使用 sp_executesql阅读这篇文章](http://msdn.microsoft.com/en-us/library/ms175170.aspx)

# r - 如何在 ubuntu 中升级 R？

> ID：10476713
> 
> 赞同：113
> 
> 时间：2012-05-07T04:38:20.803
> 
> 标签：r, ubuntu

我在我的 ubuntu 中安装了 R 2.12.1，我想升级到最新版本 2.15，如何实现？谢谢

* * *

## 回答 #1

> 赞同：235
> 
> 时间：2012-05-07T04:48:41.143

由于 R 已经安装，您应该可以使用此方法对其进行升级。首先，您可能希望在新版本中拥有之前版本中安装的软件包，因此查看此[帖子](https://stackoverflow.com/questions/1401904/painless-way-to-install-a-new-version-of-r/22989094#22989094)很方便。然后，按照[此处的说明进行操作](http://cran.cnr.berkeley.edu/bin/linux/ubuntu/)

1.  打开`sources.list`文件：

    ```
     sudo nano /etc/apt/sources.list 
    ```

2.  添加一行，其中包含将检索包的来源。例如：

    ```
     deb https://cloud.r-project.org/bin/linux/ubuntu/ version/ 
    ```

    替换为您想使用 `https://cloud.r-project.org`的任何[镜像](https://cran.r-project.org/mirrors.html)`version/`，并替换为您正在使用的任何[版本](https://cloud.r-project.org/bin/linux/ubuntu/)的 Ubuntu（例如 、`trusty/`等`xenial/`）。`/ubuntu/`如果您收到“格式错误的行错误”，请检查and之间是否有空格`version/`。

3.  获取安全 APT 密钥：

    ```
     gpg --keyserver keyserver.ubuntu.com --recv-key E298A3A825C0D65DFD57CBB651716619E084DAB9 
    ```

或者

```
 gpg --hkp://keyserver keyserver.ubuntu.com:80 --recv-key E298A3A825C0D65DFD57CBB651716619E084DAB9 
```

4.  将其添加到密钥环：

    ```
     gpg -a --export E084DAB9 | sudo apt-key add - 
    ```

5.  更新您的源并升级您的安装：

    ```
     sudo apt-get update && sudo apt-get upgrade 
    ```

6.  安装新版本

    ```
     sudo apt-get install r-base-dev 
    ```

7.  按照最适合您的解决方案恢复您的旧包（[请参阅此](https://stackoverflow.com/questions/1401904/painless-way-to-install-a-new-version-of-r/22989094#22989094)）。例如，要恢复所有包（不仅仅是来自 CRAN 的包），想法是：

-- 将包从 复制`R-oldversion/library`到`R-newversion/library`，（如果新版本中已经存在包，请不要覆盖它！）。

- 运行 R 命令`update.packages(checkBuilt=TRUE, ask=FALSE)`。

# android - 文本运行到 Button

> ID：10476715
> 
> 赞同：1
> 
> 时间：2012-05-07T04:38:26.463
> 
> 标签：android, android-listview, textview

对于放入列表视图中的项目，我有以下 XML 布局：

```
 <RelativeLayout·
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:padding="4dp"
 >

   <TextView·
     android:id="@+id/librarySongName"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:textAppearance="?android:attr/textAppearanceMedium"
     android:textStyle="bold"
     android:ellipsize="marquee"
     android:scrollHorizontally="true"
     android:lines="1"
     android:layout_alignParentLeft="true"
   />

   <TextView·
     android:id="@+id/libraryArtistName"
     android:layout_gravity="center_vertical"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:textAppearance="?android:attr/textAppearanceSmall"
     android:layout_below="@id/librarySongName"
     android:paddingLeft="4dp"
   />

   <ImageButton
     android:id="@+id/lib_add_button"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:minHeight="40dp"
     android:minWidth="40dp"
     android:src="@android:drawable/ic_input_add"
     android:layout_alignParentRight="true"
     android:gravity="center_vertical"
   />

 </RelativeLayout> 
```

但是，当我得到太长的歌曲标题时，我的视图最终看起来像这样：

![列表视图的图片](../Images/8e9020f3df7cb99a5d3f137a1116c8fe.png)

如您所见，有些歌曲标题只是被截断而不是被正确省略。有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:43:24.297

```
 <TextView·
         android:id="@+id/librarySongName"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:textAppearance="?android:attr/textAppearanceMedium"
         android:textStyle="bold" android:layout_toLeftOf="@+id/lib_add_button"
         android:ellipsize="marquee"
         android:scrollHorizontally="true"
         android:lines="1" gravity="left" 
         android:layout_alignParentLeft="true"
       /> 
```

在这里你添加`android:layout_toLeftOf="@+id/lib_add_button"`和`gravity="left"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:40:47.303

将 textview librarySongName 的 Padding 设置为：

```
 android:paddingRight="25dip" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T04:41:24.030

给`weight`或`fixed width`为 TextView 和 Image Button 而不是说 wrap_content... 因为当您说 weight 时，两个视图都需要一些固定的宽度.. 但是当您说 wrap_content 他们需要尽可能多的空间来包装他们的内容...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T04:53:36.967

试试这个布局：

```
 <RelativeLayout
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:padding="4dp"
 >

   <ImageButton
     android:id="@+id/lib_add_button"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:minHeight="40dp"
     android:minWidth="40dp"
     android:src="@android:drawable/ic_input_add"
     android:layout_alignParentRight="true"
     android:gravity="center_vertical"
   />

   <LinearLayout
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_toLeftOf="@id/lib_add_button"
     android:orientation="vertical">

     <TextView
       android:id="@+id/librarySongName"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:textAppearance="?android:attr/textAppearanceMedium"
       android:textStyle="bold"
       android:ellipsize="marquee"
       android:scrollHorizontally="true"
       android:lines="1"
     />

     <TextView
       android:id="@+id/libraryArtistName"
       android:layout_gravity="center_vertical"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:textAppearance="?android:attr/textAppearanceSmall"
       android:paddingLeft="4dp"
     />
   </LinearLayout>

 </RelativeLayout> 
```

我将 s 包裹`TextView`在 a 中`LinearLayout`，并使其从左到右填充该区域`ImageButton`。

# php - 将数据插入到 xml 中的现有节点

> ID：10476722
> 
> 赞同：1
> 
> 时间：2012-05-07T04:39:04.263
> 
> 标签：php, html, sql, xml, forms

我是 XML 和 PHP 的新手，但我有这个项目，这是需要做的。

我有一个像这样的html表单：

```
<table>   
  <tr>
    <td align="right" width="120px">First name:</td>
    <td><input id="txtfname" style="width: 200px" type="text" /></td>
  </tr>
  <tr>
    <td align="right">Last name:</td>
    <td><input id="txtlname" style="width: 200px" type="text" /></td>
  </tr>
  <tr>
    <td align="right">Business name:</td>
    <td><input id="txtbisname" style="width: 200px" type="text" /></td>
  </tr>
</table> 
```

我有一个这样的xml文件：

```
<data>
    <first_name></first_name>
    <last_name></last_name>
    <business_name></business_name>
</data> 
```

是否可以使用 php 文件将数据从 html 表单写入 xml 文件？如果是这样，谁能告诉我怎么做。我真的需要解决这个问题。

在此之后，我还需要将 xml 文件传输到 sql 数据库。

我全是耳朵。

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:00:17.097

试试这个。它假定，您有一个表单中的 HTML 表并将其发布到服务器。

```
<?php
$str = '<?xml version="1.0" encoding="utf-8"?><data></data>';
$xml = simplexml_load_string( $str );

$fname = trim( $_POST[ 'txtfname' ] );
$lname = trim( $_POST[ 'txtlname' ] );
$bname = trim( $_POST[ 'txtbisname' ] );

$fname = htmlentities( $fname, ENT_COMPAT, 'UTF-8', false );
$lname = htmlentities( $lname, ENT_COMPAT, 'UTF-8', false );
$bname = htmlentities( $bname, ENT_COMPAT, 'UTF-8', false );

$xml->addChild( 'first_name', $fname );
$xml->addChild( 'last_name', $lname );
$xml->addChild( 'business_name', $bname );

$doc = new DOMDocument( '1.0' );
$doc->formatOutput = true;
$doc->preserveWhiteSpace = true;
$doc->loadXML($xml->asXML(), LIBXML_NOBLANKS);
$doc->save( 'data.xml' );
?> 
```

现在，`data.xml`是xml文件。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:48:01.147

我认为 XSLT 对您很有用。看看这个：[http ://www.w3schools.com/xsl/](http://www.w3schools.com/xsl/)

# c# - 标题中的 URL 重写和 html 规范链接，以避免搜索引擎出现重复页面问题

> ID：10476724
> 
> 赞同：1
> 
> 时间：2012-05-07T04:39:26.777
> 
> 标签：c#, asp.net, url, url-rewriting, seo

我正在使用***Intelligenicai.URLRewriter.dll***重写我的网站 URL 它工作正常我以以下链接为例

[http://anupkumargupta.wordpress.com/2011/05/28/url-rewriting-with-urlrewriter-net-simplest-way-asp-net-c-sql-blog/](http://anupkumargupta.wordpress.com/2011/05/28/url-rewriting-with-urlrewriter-net-simplest-way-asp-net-c-sql-blog/)

在另一篇文章中，我读到 URL 重写会给搜索引擎带来问题，因为现在我们可以使用两个不同的 URL 访问同一个页面，一个没有 URL 重写，一个有 URL 重写。（检查此链接[http://thecodebug.com/?p=296](http://thecodebug.com/?p=296)）

上面提到的链接谈到搜索引擎如果在网站上发现重复的内容会受到惩罚。这篇文章 (http://thecodebug.com/?p=296) 讨论了“***标题中的 html 规范链接***”，如果我们不添加它们，那么我们可以告诉搜索引擎这个 url 是规范的。

现在我的问题即使我使用 Intelligenicai.URLRewriter.dll 也适用，如果这是事实，我应该采取哪些预防措施来避免这种情况。

**我的 URL 示例** 与 URL 重写 [http://www.xyz.com/Article/en-US/19/87/let-the-spirit-of-our-nation](http://www.xyz.com/Article/en-US/19/87/let-the-spirit-of-our-nation) 's-founders-guide-us.aspx

URL 无需重写 [http://www.xyz.com/Article/ArticleDetails.aspx?Language=en-US&PageID=19&ArticleID=87](http://www.xyz.com/Article/ArticleDetails.aspx?Language=en-US&PageID=19&ArticleID=87)

web.config 的一部分

```
 <rewriter>
    <rewrite url="~/Article/(.+)/(.+)/(.+)/(.+).aspx" to="~/ArticleDetails.aspx?Language=$1&amp;PageID=$2&amp;ArticleID=$3" processing="stop"/>
  </rewriter> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:25:44.553

您可以添加2条规则：一是将新样式链接重写为物理URL然后停止处理规则，然后按照规则将对aspx页面的直接请求重写为新样式URL，301永久重定向，并停止处理规则。301重定向很重要！如果您无法通过重写 DLL 来做到这一点，那么您可以将 URL 重定向到一个特殊的隐藏页面，该页面将接受旧页面作为查询字符串或查看引荐来源网址，然后使用 a 将其映射到新页面301重定向到那里。

**更新**：这里有更多信息：

使用 Intelligenica UrlRewriter，您将按以下顺序设置两个规则：

第一条规则使用您已经设置的规则，将花哨的 URL 重定向到物理文件。

第二条规则采用物理文件的路径，并且 (a) 404 或 (b) 301*永久*重定向到花哨的 URL。如果您有一个页面提供多页内容，您最好停止处理并出现 404 错误。此外，只要您从不在网站的任何地方使用旧式链接，就应该没问题。如果您在任何时候使用旧式链接（在您重写 URL 之前），您肯定需要确保重写设置以重定向或 404 页面，以便强制使用新式 URL。

```
<rewriter>
    <rewrite url="~/Article/(.+)/(.+)/(.+)/(.+).aspx" to="~/ArticleDetails.aspx?Language=$1&amp;PageID=$2&amp;ArticleID=$3" processing="stop"/><!-- rewrites URL -->
    <rewrite url="~/ArticleDetails.aspx?Language=(.+)&amp;PageID=(.+)&amp;ArticleID=(.+)" to="~/Article/$1/$2/$3.aspx" processing="stop" permanent="true" /><!-- Redirects old page to new url with 301 -->
</rewriter> 
```

希望这可以帮助。

# java - 异步任务发生异常

> ID：10476727
> 
> 赞同：0
> 
> 时间：2012-05-07T04:40:32.567
> 
> 标签：java, android, multithreading, android-asynctask, android-activity

我得到了这个例外。什么时候，我试图运行我的程序。在我的程序中，我正在执行`AsyncTask`每个下载和上传任务，我创建了新`AsyncTask`对象并尝试在后台运行它。我试图找出我的错误。但我找不到哪里出错了。下面是我的堆栈跟踪和我的程序代码 -

```
05-07 10:00:44.899: E/AndroidRuntime(367): FATAL EXCEPTION: AsyncTask #1
05-07 10:00:44.899: E/AndroidRuntime(367): java.lang.RuntimeException: An error occured while executing doInBackground()
05-07 10:00:44.899: E/AndroidRuntime(367):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
05-07 10:00:44.899: E/AndroidRuntime(367):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
05-07 10:00:44.899: E/AndroidRuntime(367):  at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
05-07 10:00:44.899: E/AndroidRuntime(367):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
05-07 10:00:44.899: E/AndroidRuntime(367):  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
05-07 10:00:44.899: E/AndroidRuntime(367):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
05-07 10:00:44.899: E/AndroidRuntime(367):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
05-07 10:00:44.899: E/AndroidRuntime(367):  at java.lang.Thread.run(Thread.java:1019)
05-07 10:00:44.899: E/AndroidRuntime(367): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
05-07 10:00:44.899: E/AndroidRuntime(367):  at android.os.Handler.<init>(Handler.java:121)
05-07 10:00:44.899: E/AndroidRuntime(367):  at android.widget.Toast.<init>(Toast.java:68)
05-07 10:00:44.899: E/AndroidRuntime(367):  at android.widget.Toast.makeText(Toast.java:231)
05-07 10:00:44.899: E/AndroidRuntime(367):  at com.android.test.Helper.downloadTask(t.java:269)
05-07 10:00:44.899: E/AndroidRuntime(367):  at com.android.test.Helper.doInBackground(t.java:132)
05-07 10:00:44.899: E/AndroidRuntime(367):  at com.android.test.Helper.doInBackground(t.java:1)
05-07 10:00:44.899: E/AndroidRuntime(367):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
05-07 10:00:44.899: E/AndroidRuntime(367):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
05-07 10:00:44.899: E/AndroidRuntime(367):  ... 4 more 
```

这是我的 AsynTask 助手

```
class Helper extends AsyncTask<Integer, Void, Void> 
{
    private SmbFile dfile;
    private String dfilepath;
    private SmbFile dfolder;
    private String dfolderpath;
    private File ufolder;
    private SmbFile ufoldersmb;
    private NtlmPasswordAuthentication auth;
    private int upstate=0;
    private int downstate=0;
    private Context context;
    private ArrayList<SmbFile> smbArray=new ArrayList<SmbFile>();
    private String ext;
    private int tasknumber;
    private String taskname;
    public Context getcontext()
    {
        return context;
    }
    public int gettasknumber()
    {
        return tasknumber;
    }
    public String gettaskname()
    {
        return taskname;
    }
    public int getupstate() 
    {
        return upstate;
    }
    public int getdownstate() 
    {
        return downstate;
    }
    public void setdfile(SmbFile a) 
    {
        this.dfile = a;
    }
    public void setdfilepath(String b) 
    {
        this.dfilepath = b;
    }
    public void setdfolder(SmbFile c) 
    {
        this.dfolder = c;
    }
    public void setdfolderpath(String d) 
    {
        this.dfolderpath = d;
    }
    public void setufolder(File g) 
    {
        this.ufolder = g;
    }
    public void setufoldersmb(SmbFile h) 
    {
        this.ufoldersmb = h;
    }
    public void setauthentication(NtlmPasswordAuthentication i) 
    {
        this.auth = i;
    }
    public void setupstate(int j) 
    {
        upstate = j;
    }
    public void setdownstate(int k) 
    {
        downstate = k;
    }
    public void setcontext(Context l) 
    {
        context = l;
    }
    public void setarraysmb(SmbFile m) 
    {
        this.smbArray.add(m);
    }
    public void setextstorage(String n) 
    {
        this.ext=n;
    }
    public void settasknumber(int o) 
    {
        this.tasknumber=o;
    }
    public void settaskname(String p) 
    {
        this.taskname=p;
    }
    @Override
    protected Void doInBackground(Integer... params) 
    {
        //check flag to execute exactly method
        switch (params[0]) 
        {
            case 0:
                downloadTask();
                break;
            case 1:
                Toast.makeText(context, "AccessPC Upload task "+tasknumber+" Started", Toast.LENGTH_LONG).show();
                uploadFolder(ufolder,ufoldersmb);
                break;
            default:break;
        }
        return null;
    }
    void downloadFile(SmbFile dfile,String dpath)
    {   
        StatFs statFs = new StatFs(Environment.getExternalStorageDirectory().getAbsolutePath()); 
        long blockSize = statFs.getBlockSize();
        long freeSize = statFs.getFreeBlocks()*blockSize;
        try
        {
            if(!((freeSize-dfile.length())<0))
            {
                SmbFileInputStream din=new SmbFileInputStream(dfile);
                FileOutputStream dout=new FileOutputStream(dpath);
                int c;
                while((c=din.read())!=-1)
                {
                    dout.write(c);
                }
                if (din != null) 
                {
                    din.close();
                }
                if (dout != null) 
                {
                    dout.close();
                }
            }
            else
            {
                Toast.makeText(context, "AccessPC Download Task failed ",Toast.LENGTH_LONG).show();
            }
        }
        catch(Exception e)
        {
            Toast.makeText(context, "AccessPC Download Task failed "+e,Toast.LENGTH_LONG).show();
        }
    }
    void downloadFolder(SmbFile dfolder,String dfolderpath)
    {
        try 
        {
            dfolderpath=dfolderpath+dfolder.getName();
            if(!(new File(dfolderpath)).exists())
            {
                (new File(dfolderpath)).mkdir();
            }
            SmbFile[] temp=dfolder.listFiles(); 
            if(temp.length==0)
            {
                Toast.makeText(context, "df,downstate="+downstate,Toast.LENGTH_LONG).show();
                return;
            }
            for(SmbFile m:temp)
            {
                if(m.isFile())
                {
                    downloadFile(m,dfolderpath+m.getName());
                }
                else
                {
                    downloadFolder(m,dfolderpath);
                }
            }
        } 
        catch (Exception e) 
        {
            Toast.makeText(context, "AccessPC Download Task failed "+e,Toast.LENGTH_LONG).show();
        }
    }
    void uploadFile(File ufile,SmbFile ufilesmb)
    {
        try
        {
            FileInputStream uin=new FileInputStream(ufile);
            SmbFile tempSmb=new SmbFile(ufilesmb.getPath()+ufile.getName(),auth);
            SmbFileOutputStream uout=new SmbFileOutputStream(tempSmb);
            int c;
            while((c=uin.read())!=-1)
            {
                uout.write(c);
            }
            if (uin != null)
            {
                uin.close();
            }
            if (uout != null) 
            {
                uout.close();
            }
        }
        catch(Exception e)
        {
            Toast.makeText(context, "AccessPC Upload Task failed "+e, Toast.LENGTH_LONG).show();
        }
    }
    void uploadFolder(File ufolder,SmbFile ufoldersmb)
    {
        try 
        {
            SmbFile tempSmb=new SmbFile(ufoldersmb.getPath()+ufolder.getName()+"/",auth);
            if(!tempSmb.exists())
            {
                tempSmb.mkdir();
            }
            File[] ftemp=ufolder.listFiles();
            if(ftemp.length==0)
            {
                setupstate(2);
                return;
            }
            for(File m:ftemp)
            {
                if(m.isFile())
                {
                    uploadFile(m,tempSmb);
                }
                else
                {
                    uploadFolder(m,tempSmb);
                }
            }
        } 
        catch (Exception e) 
        {
            Toast.makeText(context, "AccessPC Upload Task failed "+e,Toast.LENGTH_LONG).show();
        }
    }
    void downloadTask()
    {
        Toast.makeText(context, "AccessPC download task "+tasknumber+" Started", Toast.LENGTH_LONG).show();
        try 
        {
            for(SmbFile m:smbArray)
            {
                if(m.isFile())
                {       
                    setdfile(m);
                    setdfilepath(ext+m.getName());
                    downloadFile(dfile,dfilepath);
                }
                else
                {
                    setdfolder(m);
                    setdfolderpath(ext);
                    downloadFolder(dfolder,dfolderpath);
                }
            } 
            setdownstate(2);
        }
        catch (Exception e) 
        {
            Toast.makeText(context,"Download error "+e,Toast.LENGTH_LONG).show();
        }
    }   
    @Override
    protected void onPostExecute(Void result) 
    {
        if(upstate==2)
        {
            setupstate(0);
            Toast.makeText(context, "AccessPC "+taskname+" task "+tasknumber+" Finished", Toast.LENGTH_LONG).show();
        }
        if(downstate==2)
        {
            setdownstate(0);
            Toast.makeText(context, "AccessPC "+taskname+" task "+tasknumber+" Finished", Toast.LENGTH_LONG).show();
        }   
    }
} 
```

这是我的选项菜单。我用它来完成我在主要活动中使用的异步任务变量，这有助于这项任务：

```
String extStorage=Environment.getExternalStorageDirectory()+"/t/";
ArrayList<Helper> helpobject=new ArrayList<Helper>();
int uptask=0;
int downtask=0;
public boolean onOptionsItemSelected(MenuItem item) 
    {
        switch(item.getItemId())
        {
            case DOWNLOAD1:
                            MENU_STATE=MENU_DOWNLOAD;
                            map=display_check(current);
                            return true;
            case UPLOAD:
                            if(Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED))
                            {
                                if(current.getShare()==null)
                                {
                                    Toast.makeText(this,"UPLOAD FAILED",Toast.LENGTH_LONG).show();
                                }
                                else
                                {
                                    File f=new File(extStorage);
                                    Helper help=new Helper();
                                    help.setufolder(f);
                                    help.setufoldersmb(current);
                                    help.setauthentication(auth);
                                    help.setupstate(1);
                                    help.settasknumber(uptask);
                                    uptask++;
                                    help.settaskname("Upload");
                                    help.setcontext(this.getApplicationContext());
                                    help.execute(1);
                                }
                            }
                            else
                            {
                                Toast.makeText(this,"UPLOAD FAILED--NO SD CARD FOUND",Toast.LENGTH_LONG).show();
                            }
                            return true;
        case DELETE1:
                            MENU_STATE=MENU_DELETE;
                            map=display_check(current);
                            return true;
        case QUIT:
                            int x=0;
                            for(Helper k:helpobject)
                            {
                                if(k.getStatus().equals(AsyncTask.Status.RUNNING)||k.getStatus().equals(AsyncTask.Status.RUNNING))
                                {
                                    Toast.makeText(k.getcontext(), "AccessPC "+k.gettaskname()+" "+k.gettasknumber()+" Cancelled", Toast.LENGTH_SHORT).show();
                                    k.cancel(true);
                                }
                                helpobject.remove(x);
                                x++;
                            }
                            return true;
        case DOWNLOAD2:  
                            if(Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED))
                            {
                                int tempcount=0;
                                for(int i=0;i<object.getCount();i++)
                                {
                                    if(object.getter(i)==true)
                                    {
                                        tempcount++;
                                    }
                                }
                                if(tempcount==0)
                                {
                                    Toast.makeText(this,"Please choose atleast one item for download!!",Toast.LENGTH_LONG).show();
                                }
                                else
                                {
                                    Helper help=new Helper();
                                    helpobject.add(help);
                                    help.settasknumber(downtask);
                                    downtask++;
                                    help.settaskname("Download");
                                    help.setcontext(this.getApplicationContext());
                                    help.setextstorage(extStorage);
                                    help.setdownstate(1);
                                    for(int i=0;i<object.getCount();i++)
                                    {
                                        if(object.getter(i)==true)
                                        {
                                            help.setarraysmb(map.get(object.getItem(i)));
                                        }
                                    }
                                    help.execute(0);
                                }
                            }
                            else
                            {
                                Toast.makeText(this,"DOWNLOAD FAILED--NO SD CARD FOUND",Toast.LENGTH_LONG).show();
                            }                   
                            return true;
        case DELETE2:
                            for(int i=0;i<object.getCount();i++)
                            {
                                if(object.getter(i)==true)
                                {
                                    try 
                                    {
                                        map.get(object.getItem(i)).delete();
                                    } 
                                    catch (Exception e) 
                                    {
                                        Toast.makeText(this,"cannot be deleted "+e,Toast.LENGTH_LONG).show();
                                    }
                                }
                            }
                            return true;
        case CANCEL:
                            MENU_STATE=MENU_GENERAL;
                            map=display(current);
                            return true;
        case FINISH:
                            finish();
        default:
                            return super.onOptionsItemSelected(item);
        }
    } 
```

嗨，当我尝试显示 Toast 时，如以下评论之一所述，我得到了相同的异常。请参阅下面的代码，我曾经在我的异步任务中显示 Toast：

```
(new Activity()).runOnUiThread(new Runnable(){@Override public void run() {//Your Toast
            Toast.makeText(context, "AccessPC Download Task failed ",Toast.LENGTH_LONG).show();
            }}); 
```

我需要对我的异步任务代码或选项菜单代码进行任何更改吗？

我使用过这样的处理程序：

```
public Handler handler = new Handler() {
    public void handleMessage(Message msg) 
    {
        Bundle b = msg.getData();
        String key = b.getString(null);
        Toast.makeText(getApplicationContext(),key, Toast.LENGTH_SHORT).show();
    }
}; 
```

我正在像这样调用处理程序：

```
Message msg = new Message();
Bundle b = new Bundle();
b.putString(null, "AccessPC "+taskname+" task "+tasknumber+" Finished");
msg.setData(b);
//this is error
t.handler.sendMessage(msg); 
```

但是我如何调用非静态方法？我需要为我的主类创建一个对象（类 t 扩展列表活动）吗？

嗨，请查看当我从选项菜单中为上述异步任务和我发布的菜单选择“退出”操作时出现的另一个异常。如何避免此异常：

```
05-07 16:24:07.573: E/AndroidRuntime(13466): FATAL EXCEPTION: main
05-07 16:24:07.573: E/AndroidRuntime(13466): java.util.ConcurrentModificationException
05-07 16:24:07.573: E/AndroidRuntime(13466):    at java.util.ArrayList$ArrayListIterator.next(ArrayList.java:576)
05-07 16:24:07.573: E/AndroidRuntime(13466):    at com.android.test.t.onOptionsItemSelected(t.java:622)
05-07 16:24:07.573: E/AndroidRuntime(13466):    at android.app.Activity.onMenuItemSelected(Activity.java:2205)
05-07 16:24:07.573: E/AndroidRuntime(13466):    at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:748)
05-07 16:24:07.573: E/AndroidRuntime(13466):    at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:143)
05-07 16:24:07.573: E/AndroidRuntime(13466):    at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:855)
05-07 16:24:07.573: E/AndroidRuntime(13466):    at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:532)
05-07 16:24:07.573: E/AndroidRuntime(13466):    at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:122)
05-07 16:24:07.573: E/AndroidRuntime(13466):    at android.view.View$PerformClick.run(View.java:9080)
05-07 16:24:07.573: E/AndroidRuntime(13466):    at android.os.Handler.handleCallback(Handler.java:587)
05-07 16:24:07.573: E/AndroidRuntime(13466):    at android.os.Handler.dispatchMessage(Handler.java:92)
05-07 16:24:07.573: E/AndroidRuntime(13466):    at android.os.Looper.loop(Looper.java:123)
05-07 16:24:07.573: E/AndroidRuntime(13466):    at android.app.ActivityThread.main(ActivityThread.java:3683)
05-07 16:24:07.573: E/AndroidRuntime(13466):    at java.lang.reflect.Method.invokeNative(Native Method)
05-07 16:24:07.573: E/AndroidRuntime(13466):    at java.lang.reflect.Method.invoke(Method.java:507)
05-07 16:24:07.573: E/AndroidRuntime(13466):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-07 16:24:07.573: E/AndroidRuntime(13466):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-07 16:24:07.573: E/AndroidRuntime(13466):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T04:50:43.273

`Can't create handler inside thread that has not called Looper.prepare()`，错误信息相当简单。

您在（后台线程）中创建了一个`Handler`对象`AsyncTask.doInBackground()`，这需要该线程中的消息泵，就是这样`Looper.prepare()`。

`Handler`我认为将对象的创建从 AysncTask 移到 UI 线程可能更容易。

**以下是 OP 编辑​​他/她的问题后的编辑**

```
Toast.makeText(context, "AccessPC Upload task "+tasknumber+" Started", Toast.LENGTH_LONG).show(); 
```

上面的行在后台线程中根本不允许，显示`Toast`消息是更新**UI**的东西，这必须发生在 UI 线程中。

**再次编辑**

您可以使用`Handler`在 UI 线程中创建的 发送消息，并在 Handler 中通过显示所需的 Toast 消息来处理该消息。

**再次编辑 2**

```
private final static int TOAST_MSG_ID_1 = 1;
private final static int TOAST_MSG_ID_2 = 2;
private final static int TOAST_MSG_ID_3 = 3;
// declare a Handler as an instance variable
Handler msgHandler = new Handler(){
    @Override
    public void handleMessage(Message msg) {
            switch(msg.what()) {
                case TOAST_MSG_ID_1:
                    Toast.makeText(...msg1...).show();
                break;
                case TOAST_MSG_ID_2:
                    Toast.makeText(...msg2...).show();
                break;
                .... other messages follow....
            }
    }
};

// and you will use the following to show a Toast message:
msgHandler.sendEmptyMessage(TOAST_MSG_ID_1);
msgHandler.sendEmptyMessage(TOAST_MSG_ID_2);
msgHandler.sendEmptyMessage(TOAST_MSG_ID_3);
... 
```

有关 Handler 的更多信息，请先查看[javadoc](http://developer.android.com/reference/android/os/Handler.html)。[谷歌](https://www.google.com/search?sourceid=chrome&ie=UTF-8&q=handler%20android)会给你带来更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T05:23:55.270

如下写 Toast 消息，我希望它会起作用。

```
getApplicationContext().runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                       //Your Toast 

                    }
                }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T05:23:34.790

评论您使用非 UI 线程显示的所有 Toast 消息。我觉得这个问题..

# ruby-on-rails - 手动触发omniauth回调

> ID：10476730
> 
> 赞同：0
> 
> 时间：2012-05-07T04:40:42.513
> 
> 标签：ruby-on-rails, ruby-on-rails-3, omniauth, twitter-oauth

有什么办法可以手动触发omniauth回调？

我的意思是，我从 twitter 的 json 中获得了 oauth 响应，然后我可以将这些数据 POST/GET 到 omniauth 回调 url 吗？如果是这样，是否有任何特定格式我应该重新构造 json 数据？

我正在这些线上做一些事情，但无法`request.env['omniauth.auth']`在omniauth回调中填充。

这是请求规范

```
before(:each) do
  # response returned from twitter is in spec/fixtures/oauth_twitter_response.json
  twitter_oauth_response = File.join(Rails.root.to_s, 'spec', 'fixtures', 'oauth_twitter_response.json')
  data = File.read(twitter_oauth_response)
  @twitter_data = JSON.parse(data)
end

it 'should post the twitter data to omniauth callback' do
  post 'users/auth/twitter/callback', {}, {:env => {"omniauth.auth" => @twitter_data}}
end 
```

知道这是否可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:45:12.107

这个有可能。您唯一缺少的是您在设置时遇到的问题`omniauth.auth`。你这样做：

```
controller.stub!(:env).and_return('omniauth.auth' => @twitter_data) 
```

# string - cakephp中是否有与php的rtrim()和ltrim()相同的函数？

> ID：10476731
> 
> 赞同：-1
> 
> 时间：2012-05-07T04:40:44.013
> 
> 标签：string, cakephp, trim

好吧，这就是我必须做的。我需要修剪 cakephp 字符串的尾随和前导中的空格。我认为这很容易，因为在 php 中，它就像在 php 中使用 rtrim() 和 ltrim() 函数一样简单。当我在谷歌搜索时，我发现自己在搜索中迷失了将近一个小时。在 cakephp 中真的有任何修剪空格的功能吗？如果有的话会是什么？有教程或代码吗？:( 提前谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:42:50.283

> cakephp中是否有与php的rtrim()和ltrim()相同的函数？

CakePHP 是用 PHP 制作并使用 PHP，因此您可以继续使用CakePHP 中的`ltrim`,`trim`​​ 和`rtrim`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:51:38.660

如果本机`rtrim()`可以满足您的需求。为什么 Cake 应该有一个做同样事情的功能。

任何语言的基本编程。

> DRY 原则 - 不要重复自己。
> 
> 单一职责原则 - 每个功能应该只做一件事。

因此，如果您需要一些字符串清理功能，请参阅[数据清理类](http://book.cakephp.org/1.3/en/view/1184/paranoid)

# .net - Lucene.NET 短语搜索没有返回结果

> ID：10476736
> 
> 赞同：1
> 
> 时间：2012-05-07T04:41:11.643
> 
> 标签：.net, lucene

编辑

好的，我解决了。当我一次将一个术语添加到 PhraseQuery 对象时，它保留了常用词。在这种情况下，它是“The”。

我所做的是使用 QueryParser 对象来解析查询（包括引号）。这会删除常用词，短语查询现在就像一个魅力。

```
List<string> searchList = Regex.Matches(searchTerms, @"(?<match>\w+)|\""(?<match>[\w\s]*)""")
                   .Cast<Match>()
                   .Select(m => m.Groups["match"].Value)
                   .ToList();

QueryParser parser = new QueryParser(LuceneFields.BODY, Analyzer);
BooleanQuery booleanQuery = new BooleanQuery();

// go through each term
foreach (string term in searchList)
{
  Query query = null;
  if (term.Contains(" ")) // multi word phrase
    query = parser.Parse("\"" + term + "\"");
  else
    query = parser.Parse(term);
  if (query.ToString() != "")
    booleanQuery.Add(query, BooleanClause.Occur.MUST);
} 
```

* * *

我正在使用 Lucene.NET 创建一个简单的搜索，并且在将短语搜索与布尔查询组合时遇到了一些麻烦。

以下代码用于搜索：

```
List<string> searchList = Regex.Matches(searchTerms, @"(?<match>\w+)|\""(?<match>[\w\s]*)""")
                   .Cast<Match>()
                   .Select(m => m.Groups["match"].Value)
                   .ToList();

QueryParser parser = new QueryParser(LuceneFields.BODY, Analyzer);
BooleanQuery booleanQuery = new BooleanQuery();

// go through each term
foreach (string term in searchList)
{
  Query query = null;

  if (term.Contains(" ")) // multi word phrase
  {
    query = new PhraseQuery();
    foreach (string str in term.Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries))
    {
      ((PhraseQuery)query).Add(new Term(LuceneFields.BODY, str));
    }
  }
  else
    query = parser.Parse(term);

  string strQuery = query.ToString();

  if (query.ToString() != "")
    booleanQuery.Add(query, BooleanClause.Occur.MUST);
} 
```

我检查了正在创建的查询，对我来说它看起来不错：

```
+body:"The following table" 
```

而且我还确认此文本实际上在 Lucene 索引中，正如您从仅搜索“表”的搜索结果中看到的那样

![在此处输入图像描述](../Images/2a5b223ce0f4608d49ebb76baa6e33ef.png)

我真的不知道可能是什么问题。

我使用以下代码创建索引：

```
Directory = FSDirectory.Open(new System.IO.DirectoryInfo(IndexDirectory));
Analyzer = new StandardAnalyzer(Version); 

using (IndexWriter indexWriter = new IndexWriter(Directory, Analyzer, new IndexWriter.MaxFieldLength(Int32.MaxValue)))
{
  Response.Write("Adding document...");
  Document document = new Document();

  // Store the IDDataContent
  document.Add(new Field(LuceneFields.ID, id.ToString(), Field.Store.YES, Field.Index.ANALYZED));

  // store the url to the file itself
  document.Add(new Field(LuceneFields.HREF, FileURL, Field.Store.YES, Field.Index.ANALYZED));

  //document.Add(new Field(LuceneFields.TITLE, Article.Title, Field.Store.YES, Field.Index.ANALYZED));

  // store the text of the PDF
  document.Add(new Field(LuceneFields.BODY, PdfContents, Field.Store.YES, Field.Index.ANALYZED));
  indexWriter.AddDocument(document);
  indexWriter.Optimize();
  indexWriter.Commit();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T10:18:17.513

尝试使用空白分析器，因为标准分析器在这种情况下不起作用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:40:29.267

*   检查您在索引和搜索时是否使用相同的分析器。
*   检查您正在搜索的术语是否确实存在于索引中。（使用卢克）

# php - 操作多维数组

> ID：10476740
> 
> 赞同：0
> 
> 时间：2012-05-07T04:41:27.543
> 
> 标签：php

我有一个多维数组，我想做的是把数组插入每列中的元素

例如

多维数组：

```
Tony 14
Peter 20 
```

我想将它们插入到不同的数组中，这样

```
column0[]={Tony, Peter}
column1[]={14, 20} 
```

由于我不知道 column 的实际编号，我该如何实现？

```
 for ($row = 1; $row <= $highestRow; $row++) {
        for ($y = 0; $y < $highestColumn; $y++) {
    ................what should be added here................
            }
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:45:39.757

查看下面的代码。您在实际循环中所做的只是交换 $y 和 $row

```
<?php
$original_array = array(
    array('Tony', 14),
    array('Peter', 20)
);

print_r($original_array);

// Array
// (
//     [0] => Array
//         (
//             [0] => Tony
//             [1] => 14
//         )

//     [1] => Array
//         (
//             [0] => Peter
//             [1] => 20
//         )

// )

$new_array = array();

for ($row = 0; $row < count($original_array); $row++) {
    for ($y = 0; $y < count($original_array[0]); $y++) {
        $new_array[$y][$row] = $original_array[$row][$y];
    }
}

print_r($new_array);

// Array
// (
//     [0] => Array
//         (
//             [0] => Tony
//             [1] => Peter
//         )

//     [1] => Array
//         (
//             [0] => 14
//             [1] => 20
//         )

// ) 
```

# ruby-on-rails - Postgresql WHERE 子句在周围添加''？

> ID：10476752
> 
> 赞同：0
> 
> 时间：2012-05-07T04:42:51.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, pg

今天早上我切换到 postgresql，现在我的 where 选择不再起作用了。

我想做的是超级简单：

```
shirt_ids = "1,5,6" # String generated by javascript
Shirt.where("id in (?)", shirt_ids) 
```

这给了我：

```
PG::Error: ERROR:  invalid input syntax for integer: "1,5,6"
LINE 1: SELECT "shirts".* FROM "shirts"  WHERE (id in ('1,5,6')) 
```

这虽然有效：

```
Shirt.where("id in (#{shirt_ids})") 
```

但众所周知，这是不安全的。

我正在使用：

```
pg (0.13.2 x86-mingw32)
rails (3.2.2) 
```

postgresql 数据库是最新版本，我今天早上安装的。

感谢您的帮助。^

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T04:49:11.660

我相信 Postgres 期待一个数组，而不是 IN 函数的字符串。如果将字符串转换为数组，它应该可以工作：

```
shirt_ids = "1,5,6"
Shirt.where('id in (?)', shirt_ids.split(',')) 
```

此外，您可以这样做，看起来更干净：

```
Shirt.where(:id => shirt_ids.split(',')) 
```

# java - QA 团队的系统时钟

> ID：10476754
> 
> 赞同：1
> 
> 时间：2012-05-07T04:43:05.217
> 
> 标签：java, spring-aop, instrumentation, spring-batch, activiti

我的 QA 团队正在进行业务*生命周期*测试（即老化、到期、到期、逾期等），这需要移动应用程序时钟。我可以更改所有代码以引用调整后的时钟（由我控制）。问题是（网络）应用程序使用了几个依赖于当前时间并通过或`System.currentTimeMillis()`直接或间接使用的第三方工具（例如 Spring Batch、Activiti 等）。`Date``Calendar`

选项 1 - Spring AOP。当我尝试这个选项时，它似乎只检测 Spring 加载的 bean（？）因为`System`类是在 Spring 框架之外加载的，所以它无法检测它。

选项 2 - JMockit。让 JMockit jar 超越 JUnit 有点不合常规。

选项 3 - 使用 Java 6 工具（选项 1 和选项 2 之间的共同部分）。回到基础......（在下面找到相关代码）。

但是，测试代码中的断言总是失败。

我在所有三个选项中都遇到了障碍。不敢相信以前没有人这样做过，但也找不到合理的解决方案。

提前致谢。

```
public class InstrumentationAgent {
    private static Instrumentation instrumentation = null;

    /**
     * JVM hook to dynamically load InstrumentationAgent at runtime.
     * 
     * The agent class may have an agentmain method for use when the agent is
     * started after VM startup.
     * 
     * @param agentArgument
     * @param instrumentation
     */
    public static void agentmain(String agentArgument, Instrumentation instrumentation) {
        InstrumentationAgent.instrumentation = instrumentation;
    }

    /**
     * Programmatic hook to dynamically load modified byte codes. This method initializes/load the agent if necessary.
     * 
     * @param definitions
     * @throws Exception
     */
    public static void redefineClasses(ClassDefinition... definitions) throws Exception {
        if (InstrumentationAgent.instrumentation == null) {
            loadAgent();
        }

        InstrumentationAgent.instrumentation.redefineClasses(definitions);
    }

    private synchronized static void loadAgent() throws Exception {
        if (InstrumentationAgent.instrumentation != null) {
            return;
        }

        // Build the agent.jar file
        final File jarFile = File.createTempFile("agent", ".jar");
        jarFile.deleteOnExit();

        final Manifest manifest = new Manifest();
        final Attributes mainAttributes = manifest.getMainAttributes();
        mainAttributes.put(Attributes.Name.MANIFEST_VERSION, "1.0");
        mainAttributes.put(new Attributes.Name("Agent-Class"), InstrumentationAgent.class.getName());
        mainAttributes.put(new Attributes.Name("Can-Retransform-Classes"), "true");
        mainAttributes.put(new Attributes.Name("Can-Redefine-Classes"), "true");

        final JarOutputStream jos = new JarOutputStream(new FileOutputStream(jarFile), manifest);
        final JarEntry agent = new JarEntry(InstrumentationAgent.class.getName().replace('.', '/') + ".class");
        jos.putNextEntry(agent);
        final ClassPool pool = ClassPool.getDefault();
        final CtClass ctClass = pool.get(InstrumentationAgent.class.getName());
        jos.write(ctClass.toBytecode());
        jos.closeEntry();
        jos.close();

        // Attach to VM and load the agent
        VirtualMachine vm = VirtualMachine.attach(getPidFromRuntimeMBean());
        vm.loadAgent(jarFile.getAbsolutePath());
        vm.detach();
    }

    private static String getPidFromRuntimeMBean() throws Exception {
        RuntimeMXBean mxbean = ManagementFactory.getRuntimeMXBean();
        Field jvmField = mxbean.getClass().getDeclaredField("jvm");

        jvmField.setAccessible(true);
        VMManagement management = (VMManagement) jvmField.get(mxbean);
        Method method = management.getClass().getDeclaredMethod("getProcessId");
        method.setAccessible(true);
        Integer processId = (Integer) method.invoke(management);

        return processId.toString();
    }

}

public class SystemTimeInstrumentation {
    private static long timeAdjustment = 200000L;
    private static byte[] originalClassByteArray;

    public static void startAdjustedClock() {
        ClassPool pool = ClassPool.getDefault();

        CtClass ctClass = null;
        byte[] instrumentedClassByteArray = null;
        try {
            originalClassByteArray = pool.get(System.class.getName()).toBytecode();
            ctClass = pool.makeClass(new java.io.ByteArrayInputStream(originalClassByteArray), false);
            CtMethod ctMethod = ctClass.getDeclaredMethod("currentTimeMillis");

            ctMethod.setBody("return 0L;");

            instrumentedClassByteArray = ctClass.toBytecode();

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (CannotCompileException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (NotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } finally {
            if (ctClass != null) {
                ctClass.detach();
            }
        }

        try {
            InstrumentationAgent.redefineClasses(new ClassDefinition[] { new ClassDefinition(System.class,
                    instrumentedClassByteArray) });
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public static void stopAdjustedClock() {
        if (originalClassByteArray == null) {
            throw new RuntimeException("The stopAdjustedClock() called before startAdjustedClock()");
        } else {
            try {
                InstrumentationAgent.redefineClasses(new ClassDefinition[] { new ClassDefinition(System.class,
                        originalClassByteArray) });
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            originalClassByteArray = null;
        }
    }

public class SystemTimeInstrumentationTest extends TestCase {

    @Test 
    public void testModifiedClock() throws Exception {
        long unmodifiedTime = System.currentTimeMillis();
        SystemTimeInstrumentation.startAdjustedClock();
        long modifiedTime = System.currentTimeMillis();
        SystemTimeInstrumentation.stopAdjustedClock();

        assertTrue("The difference should me more than 200000", (modifiedTime-unmodifiedTime)>200000L);

    }

} 
```

# c++ - 如何使用 C++ 应用程序运行控制台

> ID：10476758
> 
> 赞同：1
> 
> 时间：2012-05-07T04:43:22.330
> 
> 标签：c++, logging, console, lcc-win32

我需要在没有 .bat 文件的应用程序启动（用于调试、日志等）时运行控制台。我在 Windows 7 x86 上使用 LCC 编译器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:51:04.133

查看 Windows 中的控制台 API，从 AllocConsole 开始。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms682010%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682010%28v=vs.85%29.aspx)

# mongodb - 什么 NoSQL 数据库适合开发 Wiki？

> ID：10476763
> 
> 赞同：1
> 
> 时间：2012-05-07T04:43:39.037
> 
> 标签：mongodb, couchdb, nosql

你推荐什么 NoSQL 数据库来开发类似 Wiki 的应用程序？

我需要文档有许多小节文本，并且每个都可以进行版本控制，并且可以标准化。

想想一个维基百科页面。它有很多部分，并且作为 Wiki，它具有文档的版本控制。但是，我不希望每次更改段落时都创建新文档（或完全复制文档）。我只希望那个特定的段落（或部分）有一个新版本，这样就不会浪费存储空间。

关于数据库或设计策略的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T13:03:49.307

目前没有 NoSQL 数据库提供你想要的东西（据我所知）。最接近您想要的是 CouchDB，它会在每次更新时保留文档修订历史记录。磁盘空间很便宜，所以通常这不是问题。

但是，如果版本控制是您业务的关键和业务需求之一，您应该选择专门为解决此问题而构建的工具——Git。Git 完全按照你的意愿去做，并且为你的 wiki 应用程序做了很多繁重的工作（比如版本差异，容易指责，换句话说，谁做了什么改变，有钩子等等）。

一个很好的例子是 GitHub wiki 页面。[他们基于 git ( Gollum](https://github.com/gollum/gollum) )构建的 wiki 引擎是开源的。

最后，以下是您的选择：

*   使用 git
*   为您进行修订跟踪的 CouchDB，但据我所知，它保存了文档的副本
*   在您的应用程序中实现修订逻辑，任何 NoSQL 数据库都非常适合。

# c# - 如何在 WP7 中删除锁定屏幕上的音量控制？

> ID：10476766
> 
> 赞同：11
> 
> 时间：2012-05-07T04:43:51.173
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, windows-phone-8, audio-player

当您停止在音乐播放器中播放的音乐时，它并没有真正停止它。它只是暂停它，因为您在锁定屏幕后仍然可以看到音乐控件。我想使用后面的代码删除出现在锁定屏幕上的音量控制（倒带、播放、前进）按钮。这已经通过市场上的现有应用程序实现`Stop the Music!`。我已经浏览了这个[页面](http://answers.microsoft.com/en-us/winphone/forum/wp7-wpdevices/stopping-songs-playing/d4c9dfa6-81a2-4a91-b004-417829c8a329)，但我仍然无法理解他们是如何做到的。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-10T14:26:28.977

很好的问题，经过一些反复试验，我实际上发现了如何从音量控制中删除音乐播放器：

*   您需要将**扩展​​名为 .wma 的空文件**添加到您的应用程序中，并将构建操作设置为“内容”，例如应用程序根文件夹中的“empty.wma”。
*   要停止媒体播放并删除媒体播放器，只需**创建虚拟 Song 对象并尝试**像这样播放它：

    ```
    Song s = Song.FromUri("empty", new Uri("empty.wma", UriKind.Relative));
    MediaPlayer.Play(s); 
    ```

仅此而已，因为该文件是无效的音乐文件，没有播放任何内容，甚至以前的音乐播放器也已被删除。
注意我已经在带有 GDR3 更新的 Windows Phone 8 设备上对此进行了测试。不确定，如果它在 Windows Phone 7.5 上也能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T16:23:15.027

你现在不需要这样做。Windows Phone 7.8 现在在设备上按下音量按钮时会弹出音乐控件。

# xcode - 在 Xcode 4 中找不到基于单元格的视图

> ID：10476768
> 
> 赞同：2
> 
> 时间：2012-05-07T04:43:56.323
> 
> 标签：xcode, cocoa, interface-builder

我正在研究 Cocoa 编程，在第 8 章中它说“使用属性检查器确保表格视图的内容模式设置为基于单元格” - 尽管似乎没有任何选项可以做到这一点。我继续阅读这一章，但是当我最后运行应用程序时，我无法将内容添加到表格视图中。我认为基于单元的选项可能是罪魁祸首。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T06:06:54.303

我认为问题在于您正在选择`NSScollView`，而不是`NSTableView`因为如果您`NSTableView`从 IB 输入您的代码，您已经**`NSTableView`嵌入了`NSScrollView`**. 因此，如果您想选择`NSTableView`您需要在 Interface Builder 中的 TableView 上慢慢推送时间，或者您可以像这样选择它：

![如何选择表格视图](../Images/42f09030383f2d2896efc3a931d11b8a.png)

然后转到属性检查器：

![属性检查器](../Images/6b70baf2f0c017db423262f2f9d127a5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:06:44.190

正如书中所说，选择表格视图并查看属性检查器。

![Xcode 4.3.1 的屏幕截图，显示在 nib 中选择的 NSTableView，属性检查器显示其内容模式设置为基于单元格。](../Images/1e3f4ce6881e39b659fbbcbfe628fb0b.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T11:50:27.740

我在 Xcode 4.2 for Snow leopard 10.6.8 中也遇到了这个问题。这个版本似乎没有 UITableview 的这个属性，也不支持 Mac 的可可应用程序的 ARC。而且我认为 Mac OS X 10.6 或更早版本中的表格视图应用程序默认是基于单元格的。在 Mac OS X 10.7 或更高版本之前，它支持基于视图的模式。但我不确定。参考自[http://saoqiao.com/3g/cocoa/753](http://saoqiao.com/3g/cocoa/753)

# mysql - 在mysql中选择字符串的一部分

> ID：10476769
> 
> 赞同：5
> 
> 时间：2012-05-07T04:44:03.563
> 
> 标签：mysql

我有一个`string`这样的专栏

```
India_Project1_BA_Protex_123

Japan_ProQ_CXR_Tbxc_3456 
```

我需要选择`Project1_BA`或`ProQ_CXR`喜欢这个`mySQL`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-07T05:07:21.053

有两个函数用于提取字符串的某些部分，它们是`SUBSTRING`&`SPLITSTRING`但`SUBSTRING`在这种情况下不能使用，并且`SPLITSTRING`不存在于`MySql`. 所以你必须编写自己的函数：

**MySQL 不包含拆分字符串的函数。但是，创建自己的函数非常容易。**

> **创建函数语法**
> 
> **[用户定义函数](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)**是一种使用新函数扩展 MySQL 的方法，其工作方式类似于原生 MySQL 函数。
> 
> ```
> CREATE [AGGREGATE] FUNCTION function_name
> RETURNS {STRING|INTEGER|REAL|DECIMAL} 
> ```
> 
> 要创建函数，您必须具有数据库的 INSERT 权限。
> 
> **拆分字符串**
> 
> 以下示例函数采用 3 个参数，使用 SQL 函数执行操作并返回结果。
> 
> 功能
> 
> ```
> CREATE FUNCTION SPLIT_STR(
>   x VARCHAR(255),
>   delim VARCHAR(12),
>   pos INT
> )
> RETURNS VARCHAR(255)
> RETURN REPLACE(SUBSTRING(SUBSTRING_INDEX(x, delim, pos),
>        LENGTH(SUBSTRING_INDEX(x, delim, pos -1)) + 1),
>        delim, ''); 
> ```
> 
> **用法**
> 
> ```
> SELECT SPLIT_STR(string, delimiter, position) 
> ```
> 
> **例子**
> 
> ```
> SELECT SPLIT_STR('India_Project1_BA_Protex_123', '_', 2) as second;
> SELECT SPLIT_STR('India_Project1_BA_Protex_123', '_', 3) as third;
> 
> +------------++-------+
> | second     || third |
> +------------++-------+
> | Project1   || BA    |
> +------------++-------+
> | ProQ       || CXR   |
> +------------++-------+ 
> ```

现在您可以**连接这两个结果**。得到你的最终结果。

**完整教程在这里：[http ://blog.fedecarg.com/2009/02/22/mysql-split-string-function/](http://blog.fedecarg.com/2009/02/22/mysql-split-string-function/)**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T04:48:30.270

这对你有用吗？

```
SELECT * FROM table WHERE colum LIKE '%Project1_BA%' OR column LIKE '%ProQ_CXR%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T05:21:32.853

编辑：他们为 ORACLE 工作

我写了以下查询，它们似乎工作......

```
SELECT 
SUBSTR( (SELECT SUBSTR('India_Project1_BA_Protex_123',      
INSTR('India_Project1_BA_Protex_123', '_')+1, instr('India_Project1_BA_Protex_123',    
'_', 1,2)) AS output
FROM DUAL),1, INSTR((SELECT SUBSTR('India_Project1_BA_Protex_123',   
INSTR('India_Project1_BA_Protex_123', '_')+1, instr('India_Project1_BA_Protex_123', 
'_', 1,2)) AS output
FROM DUAL),'_',1,2)-1) FROM DUAL

SELECT 
SUBSTR( (SELECT SUBSTR('Japan_ProQ_CXR_Tbxc_3456', INSTR('Japan_ProQ_CXR_Tbxc_3456',   
'_')+1, instr('Japan_ProQ_CXR_Tbxc_3456', '_', 1,2)) AS output
FROM DUAL),1, INSTR((SELECT SUBSTR('Japan_ProQ_CXR_Tbxc_3456', 
INSTR('Japan_ProQ_CXR_Tbxc_3456', '_')+1, instr('Japan_ProQ_CXR_Tbxc_3456', '_', 1,2)) 
AS output
FROM DUAL),'_',1,2)-1) FROM DUAL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-14T00:39:25.790

添加到[AlphaMale 的答案](https://stackoverflow.com/a/10476930/4852737)（*我是否建议更改代码编辑，不确定这里的礼仪？*），我`SPLIT_STR`稍微更改了 udf，因为它会因多字节字符而中断：

```
CREATE FUNCTION SPLIT_STR(
  x VARCHAR(255),
  delim VARCHAR(12),
  pos INT
)
RETURNS VARCHAR(255)
RETURN REPLACE(SUBSTRING(SUBSTRING_INDEX(x, delim, pos),
       /* use CHAR_LENGTH instead of LENGTH */
       CHAR_LENGTH(SUBSTRING_INDEX(x, delim, pos -1)) + 1),
       delim, ''); 
```

例子：

```
select split_str("Håkansson[!!]Maria", "[!!]", 2) as test;

+------------+
| test       |
+------------+
| Maria      |
+------------+ 
```

# validation - Symfony2：回调验证约束 - 找不到对象属性

> ID：10476770
> 
> 赞同：1
> 
> 时间：2012-05-07T04:44:05.290
> 
> 标签：validation, symfony

我正在使用[文档](http://symfony.com/doc/current/reference/constraints/Callback.html#the-callback-method)中定义的回调验证约束，如下所示：-

```
/**
 * GD\AdminBundle\Entity\Offer
 *
 * @ORM\Table(name="offers")
 * @ORM\Entity(repositoryClass="GD\AdminBundle\Repository\OfferRepository")
 * @Assert\Callback(methods={"isDateValid"})
 */
class Offer
{ 
```

...

```
public function isDateValid(ExecutionContext $context)
    {
        // This code block gets executed but $this->getEndDate() is NULL
        if( $this->getEndDate()->getTimestamp() < $this->getStartDate()->getTimestamp() ){
            $context->addViolation('End Date cannot be less than Start Date.', array(), null);
        }
    } 
```

但是，如果我做一个 var_dump 和测试，我发现那`$this->getEndDate()`是`NULL`

我正在使用 SonataAdminBundle 从管理员创建新的 Offer 实例。 **我在这里做错了什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:57:11.550

听起来您正在使用正确的名称空间。

```
use Symfony\Component\Validator\ExecutionContext;
use Symfony\Component\Validator\Constraints as Assert; 
```

你有这两个吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T07:00:22.687

不知道你是否已经弄清楚了。但我在我的项目中有完全相同的验证。这是我所拥有的（确认可以工作）：

我在我的实体中的回调： `* @Assert\Callback(methods={{ "CG5\BFG\CoreBundle\Validators\EndDateValidator", "isEndDateValid"}})`

我的验证器代码（单独的文件）：

```
namespace CG5\BFG\CoreBundle\Validators;

use Symfony\Component\Validator\ExecutionContext;

class EndDateValidator
{
    static public function isEndDateValid($entity, ExecutionContext $context)
    {
        if ($entity->getEndDate() <= $entity->getStartDate())
            $context->addViolationAtSubPath('endDate', 'End Date must be after Start Date', array(), null);
    }
} 
```

# xml - 在 Scala 中将 txt 文件转换为 XML

> ID：10476771
> 
> 赞同：0
> 
> 时间：2012-05-07T04:44:24.887
> 
> 标签：xml, scala, file-conversion

我应该为我在 Scala 中运行但不知道从哪里开始的程序将一个小的平面文本 (txt) 文件转换为 XML。我尝试了各种方法，但到目前为止遇到了麻烦。我的文件是几个字符串和几个整数。

我仍在使用非常基本的 Scala，所以越简单越好！

提前感谢任何提供帮助的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T09:51:16.237

有几个步骤。

首先，我将确定数据的格式独立结构并创建一个 Scala 类来保存这些数据。然后我会弄清楚这些数据在文本文件中的格式，并编写一个例程来解析文本文件并用数据填充类（或可能是该类的列表）。最后，找出 XML 文件的架构并使用 Scala 的 XML 文字将数据写入其中。

假设您的数据包含一个人的姓名、年龄、身高和体重。保存该数据的 Scala 类可能如下所示：

```
case class Person(name: String, age: Int, height: Double, weight: Double) 
```

在文本文件中，这可以通过多种方式表示，从最简单的方式开始：

```
Peter
34
178.2
83.2 
```

或“属性”样式格式：

```
name = Peter
age = 34
weight = 178.2
height = 83.2 
```

或最可能的 CSV 格式，如果您在一个文件中有多个人：

```
Peter,34,178.2,83.2
Tom,53,182.3,95.3
John,27,175.1,74.5 
```

我们以最后一种格式为例。读取文件的最简单方法是这样的：

```
val lines = io.Source.fromFile(new java.io.File("test.txt")).getLines.toList 
```

然后将每一行解析成一个人：

```
val persons = lines map { line =>   
    val elements = line split ","
    Person(elements(0), elements(1).toInt, elements(2).toDouble, elements(3).toDouble)
} 
```

在 Person 类上添加一个不错的方法，将其转换为一些像样的 XML：

```
 def toXml = 
        <person>
            <name>{ name }</name>
            <age>{ age }</age>
            <height>{ height }</height>
            <weight>{ weight }</weight>
        </person> 
```

最后将人员列表映射到 XML：

```
val personsXml = <persons>{ persons map(_.toXml) }</persons> 
```

并将其写入文件：

```
new java.io.FileOutputStream(new java.io.File("test.xml")).write(personsXml.toString.getBytes) 
```

请注意，错误处理和正确关闭文件留给读者练习！:)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-07T06:44:11.473

我不知道你到底想做什么。如果你只是想包装这些值，你可以这样做：

```
def string2xml[A](a: A): String = a match {
  case s: String => "<String>" + s + "</String>"
  case i: Int => "<Int>" + i + "</Int>"
  case any => "<Any>" + any + "</Any>"
} 
```

# ruby-on-rails-3 - Rails 资产管道和 Twitter Bootstrap Gem

> ID：10476772
> 
> 赞同：5
> 
> 时间：2012-05-07T04:44:26.963
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, asset-pipeline, ruby-on-rails-3.2, sprockets

我正在使用 bootstrap-rails gem 的最新主分支，并尝试以与 rails 资产管道兼容的方式修改默认引导变量。

我的 gem 文件包含这些 gem

```
gem 'twitter-bootstrap-rails', :git => 'git://github.com/seyhunak/twitter-bootstrap-rails.git'
gem 'uglifier', '>= 1.0.3'
gem 'less-rails-bootstrap' 
```

我也包含`*= require bootstrap_and_overrides`在我的`application.css`文件中。我知道 sprockets 会单独编译每个 css 文件，因此您不能期望多个 css 文件能够相互引用。因此 bootstrap_and_overrides.css.less 文件包括以下内容：

```
@import "twitter/bootstrap/bootstrap";
body { padding-top: 80px; }

//background-image: asset-url("background.png"); background-repeat:no-repeat; background-size: cover;  }

@import "twitter/bootstrap/responsive";

// Set the correct sprite paths
@iconSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings.png');
@iconWhiteSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings-white.png');

// Set the Font Awesome (Font Awesome is default. You can disable by commenting below lines)
@fontAwesomeEotPath: asset-path('fontawesome-webfont.eot');
@fontAwesomeWoffPath: asset-path('fontawesome-webfont.woff');
@fontAwesomeTtfPath: asset-path('fontawesome-webfont.ttf');
@fontAwesomeSvgzPath: asset-path('fontawesome-webfont.svgz');
@fontAwesomeSvgPath: asset-path('fontawesome-webfont.svg');

// Font Awesome
@import "fontawesome";

// Your custom LESS stylesheets goes here
//
// Since bootstrap was imported above you have access to its mixins which
// you may use and inherit here
//
// If you'd like to override bootstrap's own variables, you can do so here as well
// See http://twitter.github.com/bootstrap/less.html for their names and documentation
//
// Example:
// @linkColor: #ff0000;

@navbarHeight: 60px;
@navbarText: @white;
@textColor: @orange;
@navbarLinkColor: @white;
@navbarBackground: darken(@linkColor, 15%);
@navbarBackgroundHighlight: @linkColor; 
```

但是，我的覆盖都没有在资产管道下工作。没有它他们工作得很好。有谁知道为什么？

更新我的资产 Gem Group

```
# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'less-rails'
  #  gem 'twitter-bootstrap-rails', :git => 'git://github.com/seyhunak/twitter-bootstrap-rails.git'
  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyracer', :platform => :ruby
  gem 'uglifier', '>= 1.0.3'
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T01:08:51.767

在部署之前在本地运行`rake assets:precompile`解决了我上面的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T05:03:10.213

在我的情况下，资产管道引擎寻找资源的目录没有正确设置，导致资产没有正确编译。

我正在使用 bootstrap-sass，所以你的情况可能会有所不同。但就我而言，将以下代码添加到 application.rb 解决了我的问题。

```
module ApplicationModuleName
  class Application < Rails::Application

    config.sass.load_paths = []
    config.sass.load_paths << "#{Rails.root}/app/assets/stylesheets"
    %w(bootstrap-sass jstree-rails jquery-rails).each do |pkg|
      config.sass.load_paths << "#{Gem.loaded_specs[pkg].full_gem_path}/vendor/assets/stylesheets"
      config.assets.paths << "#{Gem.loaded_specs[pkg].full_gem_path}/vendor/assets/javascripts"
    end
  end
end 
```

在应用上述（丑陋的）补丁之前，请尝试运行`rails console`并检查值`load_paths`或类似的东西..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T17:12:19.627

我在 rails 4.1 和 ruby​​ 2.0 中使用较少的引导程序，但我通过将其添加到 application.css.scss 来解决这个问题

```
*= require_tree .
*= require bootstrap_and_overrides
*= require_self 
```

# c# - 如何在 C# 中读取 XML？

> ID：10476782
> 
> 赞同：1
> 
> 时间：2012-05-07T04:45:47.083
> 
> 标签：c#, .net, xml

我有一个看起来像这样的 XML 文件

```
<ss:demo>
<ss:Name>
    <ss:FirstName>First</ss:FirstName>
    <ss:SecondName>Second</ss:SecondName>
</ss:Name>
<ss:country code="IN">India</ss:country>
</ss:demo> 
```

如何使用 C# 阅读此内容。请帮助我。哪种阅读方式最简单？我试图将它读入 DataSet 但它显示了一些错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T04:49:06.713

使用 C# 读取 XML 文档或其部分的策略有多种。如果您更具体地了解要对 XML 文档执行的操作，社区可以为您提供更具体的指导。

以下是一些最佳选择：

LINQ转XML

[http://msdn.microsoft.com/en-us/library/bb387098.aspx](http://msdn.microsoft.com/en-us/library/bb387098.aspx)

[http://msdn.microsoft.com/en-us/library/bb387065.aspx](http://msdn.microsoft.com/en-us/library/bb387065.aspx)

XDocument（Linq to XML 框架的一部分）

[http://msdn.microsoft.com/en-us/library/bb387063.aspx](http://msdn.microsoft.com/en-us/library/bb387063.aspx)

xml文档

[http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)

XPath

[http://msdn.microsoft.com/en-us/library/ms256471.aspx](http://msdn.microsoft.com/en-us/library/ms256471.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T04:47:46.833

只是[LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)怎么样？

鉴于这种：

```
var xml = "<ss:demo>\r\n<ss:Name>\r\n    <ss:FirstName>First</ss:FirstName>\r\n    <ss:SecondName>" +
"Second</ss:SecondName>\r\n</ss:Name>\r\n<ss:country code=\"IN\">India</ss:country>\r\n</ss" +
":demo>"; 
```

（注意我必须`IN`用引号括起来`"IN"`）

声明一些命名空间并将其读入：

```
var mngr = new XmlNamespaceManager( new NameTable() );
mngr.AddNamespace( "ss", "urn:ignore" ); // or proper URL
var parserContext = new XmlParserContext(null, mngr, null, XmlSpace.None, null); 
```

如果从上面的字符串中读取：

```
var txtReader = new XmlTextReader( xml, XmlNodeType.Element, parserContext ); 
```

如果改为从文件中读取：

```
var txtReader = new XmlTextReader( new FileStream(filename, FileMode.Open), XmlNodeType.Element, parserContext ); 
```

然后加载：

```
var ele = XElement.Load( txtReader ); 
```

`ele`包含您需要的一切。

# ruby - 尝试使用 nokogiri 在 xml 文件中的 cdata 标记中获取内容

> ID：10476783
> 
> 赞同：15
> 
> 时间：2012-05-07T04:45:56.787
> 
> 标签：ruby, ruby-on-rails-3.1, xml-parsing, nokogiri, cdata

我已经看到了几件事，但到目前为止似乎没有任何效果。我正在使用 rails 3 ruby​​ 1.9.2 上的 nokogiri 通过 url 解析 xml。

xml 的片段如下所示：

```
<NewsLineText>
  <![CDATA[
  Anna Kendrick is ''obsessed'' with 'Game of Thrones' and loves to cook, particularly     creme brulee.
  ]]>
</NewsLineText> 
```

我正在尝试解析它以获取与 NewsLineText 关联的文本

```
r = node.at_xpath('.//newslinetext') if node.at_xpath('.//newslinetext')
s = node.at_xpath('.//newslinetext').text if node.at_xpath('.//newslinetext')
t = node.at_xpath('.//newslinetext').content if node.at_xpath('.//newslinetext')
puts r
puts s ? if s.blank? 'NOTHING' : s
puts t ? if t.blank? 'NOTHING' : t 
```

我得到的回报是

```
<newslinetext></newslinetext>
NOTHING
NOTHING 
```

所以我知道我的标签被正确命名/拼写以获取 newslinetext 数据，但 cdata 文本从未出现。

我需要对 nokogiri 做什么才能获得此文本？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T05:44:12.423

您正在尝试使用 Nokogiri 的 HMTL 解析器解析 XML。如果`node`来自 XML 解析器，那么`r`将是`nil`因为 XML 区分大小写；你`r`不是`nil`，所以你使用的是不区分大小写的 HTML 解析器。

使用 Nokogiri 的 XML 解析器，你会得到这样的东西：

```
>> r = doc.at_xpath('.//NewsLineText')
=> #<Nokogiri::XML::Element:0x8066ad34 name="NewsLineText" children=[#<Nokogiri::XML::Text:0x8066aac8 "\n  ">, #<Nokogiri::XML::CDATA:0x8066a9c4 "\n  Anna Kendrick is ''obsessed'' with 'Game of Thrones' and loves to cook, particularly     creme brulee.\n  ">, #<Nokogiri::XML::Text:0x8066a8d4 "\n">]>
>> r.text
=> "\n  \n  Anna Kendrick is ''obsessed'' with 'Game of Thrones' and loves to cook, particularly     creme brulee.\n  \n" 
```

并且您将能够通过`r.text`或获取 CDATA `r.children`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T09:27:45.797

啊，我明白了。@mu 说的是对的。但是要直接获取 cdata，也许：

```
xml =<<EOF
<NewsLineText>
  <![CDATA[
  Anna Kendrick is ''obsessed'' with 'Game of Thrones' and loves to cook, particularly     creme brulee.
  ]]>
</NewsLineText>
EOF
node = Nokogiri::XML xml
cdata = node.search('NewsLineText').children.find{|e| e.cdata?} 
```

# php - 在 magento cms>page 上添加自定义样式

> ID：10476784
> 
> 赞同：2
> 
> 时间：2012-05-07T04:46:16.770
> 
> 标签：php, magento

我如何将自定义样式添加到 magento 中的特定页面，例如：

我想知道我们如何在页面编辑器中添加样式标签

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T09:21:49.353

您可以为 cms 页面添加自定义样式表。只需在您的 cms 页面打开设计选项卡和布局更新 xml 字段中执行此操作，只需添加此代码

```
<reference name="head">
<action method="addCss">
    <stylesheet>css/your.css</stylesheet>
</action>
</reference> 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-05T16:56:29.560

所以遇到了同样的问题，我需要它来允许客户根据内容的编辑通过媒体查询调整一些值。

只需在样式的开头和结尾放置空注释，TinyMCE 就不会添加它自己的。

例如：

```
<style type="text/css" scoped><!-- -->
   p{color:red;}
<!-- --></style> 
```

这至少对 Magento v1.9.1 有效

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-18T06:55:21.717

由于直接添加 <style> 标记不起作用，您可以改用 javascript。如果你的主题使用的是 jQuery，你可以这样做（连接样式标签，这样编辑器就不会将其标记为注释）：

```
jQuery('body').append('<sty'+'le>'+'#header{margin:10px 0 0 0;}#morestylehere{display:inline}'+'</sty'+'le>') 
```

确保它包含在 <script> 标记中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T06:04:53.240

单击显示/隐藏编辑器，您将能够直接编辑 HTML 源代码，以便在`style`那里添加标签

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T09:10:07.910

@Max 不幸的是，tinyMCE 会将`style`标签转换为 html 注释。在每次修改 CMS 页面后，您应该注意将 html 注释替换回`style`标签 - 这不是很好的方法。
所以，我的建议是使用特定的 CMS 页面类名称，它被添加到`body`标签中。您可以转到您的 CMS 页面，并查看该页面的源代码以找到此类名称。

# jquery - jquery代码的含义

> ID：10476786
> 
> 赞同：0
> 
> 时间：2012-05-07T04:46:39.830
> 
> 标签：jquery, expression

我试图了解这些 jquery 代码是如何工作的

```
function findVideoForElement(el) {
      var parentControls=$(el).parents('.video_controls[rel]');
      if (parentControls.length==0) {
            return $('video[id=]');
      } else {
            return $('#'+parentControls.attr('rel'));
      }
} 
```

当`parents()`被调用时，它返回匹配表达式的元素。`'.video_controls[rel]'`这个表达式到底是什么意思。是`class="video_controls"`吗？我无法弄清楚这`[rel]`部分是什么意思。

另外，是否`$('video[id=]')`意味着 id="video" 的元素？

会`$('#'+parentControls.attr('rel'))`返回什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T04:49:23.470

您对 class="video_controls" 是正确的，它正在寻找具有以下内容的所有元素。[rel] 只是确保它具有属性“rel”

```
<div class="video_controls" rel="whatever"> 
```

$('video[id=]') 只是在寻找一个视频，id=""

$('#'+parentControls.attr('rel')) 从上面的 rel 标记转换为 $('#whatever')，因此它在 .video_controls 元素上寻找具有 rel 属性 ID 的元素

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T04:49:22.870

它是基本的 CSS，`[rel]`指的是任何具有`rel`属性的元素。

`.attr("rel")`因此返回该`rel`属性的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T04:51:59.487

1.  `'.video_controls[rel]'`表示“具有类`video_controls`并`rel`定义了属性”
2.  `$('video[id=]')`意思是“任何属性设置为空字符串的`<video>`标签。`id`
3.  `$('#' + parentControls.attr('rel'))`将返回 id 等于`rel`parentControls 元素上的属性的元素。

有关 jQuery 选择器的更多信息，您可以查阅他们的[文档](http://api.jquery.com/category/selectors/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T05:00:18.373

1.  `$(el).parents('.video_controls[rel]');' returns all parents of`el `that has a class`.video_controls `with`rel` 并返回一个父数组。

2.  `$('video[id=]');`返回`video`没有的标签`id`。

3.  `parentControls.attr('rel')`返回`rel`在第一点中选择提及的父母的属性。

4.  `$('#'+parentControls.attr('rel'));`是一个选择器`id`，这里`#`表示 id 选择器

# ios - 在iphone中单击按钮时如何将文本字段/标签中的值添加到数组中

> ID：10476787
> 
> 赞同：0
> 
> 时间：2012-05-07T04:47:19.727
> 
> 标签：ios, xcode, ipad, nsmutablearray, nsarray

我有一个文本字段，用户可以在其中输入 1-10 的值

在文本字段的底部我有按钮。

当用户单击完成按钮时，我需要将文本字段中的值添加到数组中

为此，我编写了这样的代码。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    PainlevelsArray = [[NSMutableArray alloc] init]; //PainlevelsArray declared in .h

}

-(IBAction)doneClick:(id)sender
{
    [PainlevelsArray addObject:txtField.text ];

    // [PainlevelsArray insertObject:rateLabel.text atIndex:0 ];
    NSLog(@"PainlevelsArray *** %@",PainlevelsArray);

   [self.navigationController popToRootViewControllerAnimated:YES];

} 
```

但是每次单击按钮时，数组仅在日志中仅显示最近添加的一个值，如下所示

***控制台输出***

=========================

```
2012-05-07 10:11:15.689 ESPT[796:10d03] PainlevelsArray *** (
    2
)
2012-05-07 10:11:27.984 ESPT[796:10d03] PainlevelsArray *** (
    4
) 
```

***`My array gets empty every time view loads, and adde a fresh entry when button clicks`*** 但我需要这样

```
2012-05-07 10:11:27.984 ESPT[796:10d03] PainlevelsArray *** (
        4,
        5,
        2,
        6,
        8,
    ) 
```

所有输入的 velues 都添加/插入到现有数组中。

提前致谢

**在练习开始视图控制器中**

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
 ExerciseResult *result = [[ExerciseResult alloc] init];
            [self.navigationController pushViewController:result animated:YES];
            [result release];
    } 
```

**在当前/ExerciseResult 视图控制器中**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    PainlevelsArray = [[NSMutableArray alloc] init]; //PainlevelsArray declared in .h

}

-(IBAction)doneClick:(id)sender
{
    [PainlevelsArray addObject:txtField.text ];

    // [PainlevelsArray insertObject:rateLabel.text atIndex:0 ];
    NSLog(@"PainlevelsArray *** %@",PainlevelsArray);

   [self.navigationController popToRootViewControllerAnimated:YES];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T05:30:13.880

您需要使用全局数组。

最好的解决方案是在 AppDelegate.h 文件中声明一个数组，并在 applicationdidfinishlaunch 方法中分配初始化这个数组。

```
AppDelegate *app =  (AppDelegate*)[[UIApplication sharedApplication] delegate];
[app.arrMutable addObject:textField.text ]; 
```

**使用 UserDefaults**：这些用于以键值格式保存您的应用程序数据。存储为 userdefaults 的值/对象始终保留在应用程序中，直到您没有将其从沙箱中删除。您可以使用以下代码将数组存储在 userdefaults 中。

```
[[NSUserDefaults standardUserDefaults] setObject:app.arrMutable forKey:@"Global_Array_Key"]; 
```

在 AppDelegae applicationDidFinishLuanch 方法中，您可以使用以下方法从 userdefaults 中检索此数组：

```
self.arrMutable = [[NSMutableArray alloc]initWithArray:[[NSUserDefaults standardUserDefaults]objectForKey:@"Global_Array_Key"]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T04:54:38.877

您需要全局声明和初始化 PainlevelsArray，即在 AppDelegate 或共享实例的单独类中，其中内存已分配一次，即使您多次访问该类，它也不会覆盖其数据，因此它将不断地将新值插入数组中，您将获得所需的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T05:02:16.377

```
ExerciseResult *result = [[ExerciseResult alloc] init];
[self.navigationController pushViewController:result animated:YES];
[result release]; 
```

我认为您可能会在您的操作中使用这种类型的代码来获取此视图。取而代之的是，您必须放松以将其作为全局练习结果 *结果

在.h

```
ExerciseResult *result; 
```

米

```
in viewDidLoad

result = [[ExerciseResult alloc] init]; 
```

在你的行动方法中，你会放松

```
[self.navigationController pushViewController:result animated:YES]; 
```

你会这样跟随

我希望它会帮助你

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T07:02:29.967

在 Delegate.h 页面中声明

```
 @interface AppDelegate : NSObject <UIApplicationDelegate>
  {
       NSMutableArray *commString;
  }
  @property (nonatomic, retain) NSMutableArray *commString;
  @end 
```

代表.m页面

```
 @sythesize commString;

 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    
          commString = [[NSMutableArray alloc] init];
          // some code.....
 } 
```

在您的按钮视图中

```
 -(IBAction)doneClick:(id)sender
{
NSMutableArray *mut=[[NSMutableArray alloc] initWithObjects:txtField.text,nil];
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
appDelegate.commString=mut;

   // some code....
} 
```

在你想要你的数组的地方声明这个代码，你可以很容易地得到你的数组。

```
 AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
   NSLog(@"commString=%@",appDelegate.commString); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T04:50:18.337

当您单击时使用这行代码只需编写添加此行。

```
[array addobject:textfield.text]; 
```

只用这个。

```
[PainlevelsArray addObject:txtField.text] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T05:00:00.660

在这种情况下，您应该使用数组的属性。

```
@property (nonatomic, strong) NSMutableArray *painlevelsArray; 
```

初始化数组

```
NSMutableArray *array = [[NSMutableArray alloc] init];
self.painlevelsArray = array; 
```

然后在每次单击按钮后将您的字符串添加到数组中

```
[self.painlevelsArray addObject:[NSString stringWithFormat:@"%@",self.textField.text]]; 
```

# erlang - Rebar：“发布 mynode 使用不存在的应用程序 mynode”

> ID：10476790
> 
> 赞同：4
> 
> 时间：2012-05-07T04:47:59.303
> 
> 标签：erlang, rebar

我一直在尝试使用 Rebar 设置一个简单的 Erlang 应用程序，但无法让它工作。我按照[http://skeptomai.com/?p=56](http://skeptomai.com/?p=56)上的说明进行操作，运行时`./rebar -v generate`出现此错误：

```
==> Entering directory `/home/adam/erlang-test3/testing-rebar/apps/myapp'
WARN:  'generate' command does not apply to directory /home/adam/erlang-test3/testing-rebar/apps/myapp
==> Leaving directory `/home/adam/erlang-test3/testing-rebar/apps/myapp'
==> Entering directory `/home/adam/erlang-test3/testing-rebar/rel'
==> rel (generate)
{"init terminating in do_boot","Release mynode uses non existing application mynode"}

Crash dump was written to: erl_crash.dump
init terminating in do_boot (Release mynode uses non existing application mynode) 
```

[关注https://bitbucket.org/basho/rebar/wiki/ReleaseHandling](https://bitbucket.org/basho/rebar/wiki/ReleaseHandling)时出现类似错误。关注[http://www.metabrew.com/article/erlang-rebar-tutorial-generating-releases-upgrades](http://www.metabrew.com/article/erlang-rebar-tutorial-generating-releases-upgrades)时，我得到：

```
{"init terminating in do_boot",{undef,[{dummy_proj,start,[]},{init,start_it,1},{init,start_em,1}]}} 
```

如何让钢筋工作？我的 Erlang 版本是`Erlang R14B04 (erts-5.8.5) [source] [64-bit] [smp:2:2] [rq:2] [async-threads:0] [kernel-poll:false]`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T06:47:31.007

我也开始学习erlang + rebar，前段时间我遇到了同样的问题，我想你的`reltool.config`文件 有问题

1.  将路径添加到`lib_dirs`. 我有`{lib_dirs, ["../../", "../deps/"]}`
2.  将您的应用添加到应用列表。就我而言，这是-`{app, MY_APP_NAME, [{incl_cond, include}]}`

**更新：** 您必须重命名您的应用程序。Fe 到 erlangtest1。我的工作 reltool.config

```
{sys, [  
       {lib_dirs, ["../../"]},  
       {erts, [{mod_cond, derived}, {app_file, strip}]},  
       {app_file, strip},  
       {rel, "exemplar", "1",  
        [  
         kernel,  
         stdlib,  
         sasl,  
     erlangtest1  
        ]},  
       {rel, "start_clean", "",  
        [  
         kernel,  
         stdlib  
        ]},  
       {boot_rel, "exemplar"},  
       {profile, embedded},  
       {incl_cond, exclude},  
       {excl_archive_filters, [".*"]}, %% Do not archive built libs  
       {excl_sys_filters, ["^bin/.*", "^erts.*/bin/(dialyzer|typer)",  
                           "^erts.*/(doc|info|include|lib|man|src)"]},  
       {excl_app_filters, ["\.gitignore"]},  
       {app, sasl,   [{incl_cond, include}]},  
       {app, stdlib, [{incl_cond, include}]},  
       {app, kernel, [{incl_cond, include}]},  
       {app, erlangtest1, [{incl_cond, include}]}  
      ]}.  

{target_dir, "exemplar"}.  

{overlay, [  
           {mkdir, "log/sasl"},  
           {copy, "files/erl", "\{\{erts_vsn\}\}/bin/erl"},  
           {copy, "files/nodetool", "\{\{erts_vsn\}\}/bin/nodetool"},  
           {copy, "files/exemplar", "bin/exemplar"},  
           {copy, "files/exemplar.cmd", "bin/exemplar.cmd"},  
           {copy, "files/start_erl.cmd", "bin/start_erl.cmd"},  
           {copy, "files/install_upgrade.escript", "bin/install_upgrade.escript"},  
           {copy, "files/sys.config", "releases/\{\{rel_vsn\}\}/sys.config"},  
           {copy, "files/vm.args", "releases/\{\{rel_vsn\}\}/vm.args"}  
          ]}. 
```

# c - 有没有办法使用 perl 解析为 C 程序文件

> ID：10476794
> 
> 赞同：2
> 
> 时间：2012-05-07T04:48:22.620
> 
> 标签：c, perl, parsing

我想使用 perl 解析 C 程序文件（.c 扩展名）。我希望以这样的方式完成解析，例如示例 c 程序可能包含如下语句

```
printf ("%d => Hello",x); 
```

令 x 为程序中的整数变量。所以当我解析上面的行时，有没有办法获得 x 值。请记住，我只想解析一行并获取 x 的值，我无法解析任何前面的行来获取 x 的值。有什么方法可以动态获取 x 的实际值，还是解析目标文件更好。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T04:51:54.257

世界上没有任何工具可以`printf ("%d => Hello",x);` 仅使用这条线可靠地找到 x 的值。该值取决于前面的行，并且可能取决于用户输入，这根本不在源代码中。

**编辑**

另一方面，有**很多**工具可以处理 C 代码，例如静态分析器、调试器、解释器等。您可能想要寻找这些选项之一。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-07T05:12:25.267

不，想一想：

```
int x = rand();
printf("%d", x); 
```

`x`如果不运行程序，你怎么可能知道是什么？

# asp.net-mvc-3 - MVC 3 - 具有 4 个参数的 RouteUrl

> ID：10476795
> 
> 赞同：2
> 
> 时间：2012-05-07T04:48:26.943
> 
> 标签：asp.net-mvc-3

我正在尝试在 razor 视图中构建 URL，它将 2 RouteData.Values 传递给我的操作。

这是代码：

```
<input type="button" value="View" onclick="location.href='@Url.RouteUrl("ViewMessage", new { threadId = 955, messageId = 11 })'" /> 
```

在 Global.asax 我定义了以下内容：

```
routes.MapRoute(
"ViewMessage", // Route name
"{controller}/{action}/{threadId}/{messageId}", // URL with parameters
new { controller = "Board", action = "Messages", threadId = UrlParameter.Optional, messageId = UrlParameter.Optional } // Parameter defaults 
```

);

为什么我的网址看起来像这样：

```
http://localhost/Site/Board/Messages/955?messageId=11 
```

而不是这样：

```
http://localhost/Site/Board/Messages/955/11 
```

我知道我可以使用 string.Format，而是找到 MVC 助手解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T04:51:58.287

尝试以下路线

```
routes.MapRoute(
"ViewMessage", // Route name
"{controller}/{action}/{threadId}/{threadId}/{messageID}", // URL with parameters
new { controller = "Board", action = "Messages", threadId = UrlParameter.Optional, messageId = UrlParameter.Optional } // Parameter defaults 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T04:57:01.027

我的猜测是：如果两者`threadId`都是`messageId`可选的，那么如何解析以下 URL：[http://localhost/Site/Board/Messages/955](http://localhost/Site/Board/Messages/955)？

尝试从中删除`UrlParameter.Optional`（`threadId`并可能为此使用不同的路线）。

# ruby - 使用 RabbitMQ 广播大型对象是否安全？

> ID：10476807
> 
> 赞同：1
> 
> 时间：2012-05-07T04:49:29.687
> 
> 标签：ruby, rabbitmq

我对 RabbitMQ 比较陌生，发现它非常方便和快捷，我使用 ruby​​ + bunny gem 将它用于通信小对象。

现在我正在尝试传递大约 10~20MB 的对象以进行交换，并将其扇出给它的订阅者。

看起来效果很好，但是使用 RabbitMQ 作为发布者是一个好习惯吗？或者我应该对 RabbitMQ 使用一些猜想吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-11-16T01:50:35.900

**您不应该通过 AMQP 发送文件。**

消息队列不是数据库。具体来说，RabbitMQ 的构建并没有考虑将大对象存储在队列中，因为消息不应该很大。

想想现实世界——多年来的邮政服务（不再需要那么多），都针对处理信件进行了优化。如果你的信太胖（太重），他们会收取相当高的额外邮费。大消息移动和破坏系统的成本更高。此外，您的邮箱不会保存大邮件 - 它们会留在其他地方 - 无论是在单独的包裹投递中还是在您的前门（它们有时会丢失）。

消息队列也是如此。消息通常包含一小段数据，描述在您的应用程序中发生的事件或其他有意义的事情。通常，一条消息所传达的数据可以在 100kB 或更少的时间内进行通信。

[正如我在这个答案](https://stackoverflow.com/a/47544515/1472222)中提到的，AMQP 协议（​​它是 RabbitMQ 的基础）是一个相当健谈的协议。它要求将大消息分成不超过 131kB 的多个段。这会给大型文件传输增加大量开销，尤其是与其他文件传输机制（例如 FTP、HTTP）相比时。

更重要的是，对于性能而言，消息在队列中可用之前必须由代理完全处理，并且在完成此操作时它会占用代理上的 RAM。将文件放入代理可能适用于一个客户端和一个代理，但在尝试横向扩展时会很快中断。最后，在传输文件时通常需要压缩——HTTP 自动支持 gzip 压缩，而 AMQP 不支持。

**你该怎么办？** 在面向消息的应用程序中，发送包含指向较大数据文件的资源定位符（例如 URL）的消息是很常见的，然后通过适当的方式访问该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:06:25.090

如果它有效并且不会给您带来任何问题，那就太好了。我建议将每个对象转换为字节数组可能会有时间成本。显然，消费者方面的情况也正好相反。由于每个对象都很大，可能需要考虑，除非速度不是您的主要目标。有必要寄这么大的东西吗？

发送大对象的一个​​大问题是它们会阻塞整个连接，因此如果您在同一个连接上发布多个频道，他们将不得不等待每个连接完成发送这个大对象。

[看这里](http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2012-May/019873.html)

# c# - 如果从 SqlDataReader 检索值，则不会将多个单词作为动态标签的文本值

> ID：10476808
> 
> 赞同：0
> 
> 时间：2012-05-07T04:49:40.060
> 
> 标签：c#, ado.net

当我尝试从 SQLDataReader 检索的值中设置代码中标签的文本属性时，我发现如果 Datareader 检索多个单词，则表单上的标签仅显示检索到的整个句子中的第一个单词。下面是我的表单的 groupbox 仅显示一个单词作为标签文本而不是具有多个单词字符串的数据库的代码。注意：我在这里动态创建标签，所以我应该手动更改标签的任何属性吗？

```
Label[] lb = new Label[10];
        int j = 25;
        for (int i = 0; i < 10; i++)
        {

            lb[i] = new Label();
            lb[i].Name = MySqlDataReader[i];
            lb[i].Text = MySqlDataReader.ToString();
            lb[i].Location=new Point(9,j);
            groupBox1.Controls.Add(lb[i]);
            j += 25;
        } 
```

请帮助我解决问题，以便我可以将整个字符串视为标签的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:21:13.587

只需在您的代码中包含以下语句。

```
lb[i].AutoSize = true; 
```

# node.js - 结合 node-http-proxy 的转发和路由器

> ID：10476809
> 
> 赞同：0
> 
> 时间：2012-05-07T04:49:56.417
> 
> 标签：node.js, http-proxy, node-http-proxy

我在一个 AWS 实例上托管多个 Node 应用程序。我一直在使用带有虚拟主机的 apache，但只想使用 Node.js。node-http-proxy 看起来可以完成任务，但我无法使用代理表进行转发。

这是代理表应该如何工作的：

```
var options = {
router: {
    'app1.website.com': 'localhost:7100',
    'app2.website.com': 'localhost:15110'
}
};

var proxyServer = httpProxy.createServer(options).listen(80); 
```

我在实例上运行 app1 和 app2 并分别监听 7100 和 15110，但仅使用路由器选项不允许转发。

我可以使用以下方法只转发一个：

```
var options = {
forward: {
    port: 15110,
    host: 'localhost'
}
};

var proxyServer = httpProxy.createServer(15110, 'localhost', options); 
```

知道如何获得两者的好处吗？文档说我可以通过选项传递“转发”和“路由器”，但不清楚如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T02:38:43.853

你试过`127.0.0.1`代替`localhost`吗？“不允许转发”是什么意思？node-http-proxy 所做的是在内部代理请求，而不是转发它:)

# bash - 如何让两个程序在 bash 中只使用一个自动完成功能？

> ID：10476815
> 
> 赞同：0
> 
> 时间：2012-05-07T04:50:22.873
> 
> 标签：bash, autocomplete, refactoring

我按照本[教程](http://www.debian-administration.org/articles/317)为`figlet`/设置自动完成功能`toilet`。

```
# bash completion for figlet/toilet

have figlet &&
_figlet()
{
    local prev cur opts
    _get_comp_words_by_ref cur prev
    opts="-f"

    COMPREPLY=()

    case $prev in
        -f)
            local running=$(find /usr/share/figlet -name '*.flf' -printf '%P\n' | sed 's/\.flf$//')
            COMPREPLY=( $(compgen -W "${running}" -- ${cur}) )
            return 0
            ;;
        *)
            ;;
    esac

    COMPREPLY=( $( compgen -W "$opts" -- "$cur" ) )

    return 0
} &&
complete -F _figlet figlet

###################################################################################################

have toilet &&
_toilet()
{
    local prev cur opts
    _get_comp_words_by_ref cur prev
    opts="-f"

    COMPREPLY=()

    case $prev in
        -f)
            local running=$(find /usr/share/figlet -name '*.[tf]lf' -printf '%P\n' | sed 's/\.[tf]lf$//')
            COMPREPLY=( $(compgen -W "${running}" -- ${cur}) )
            return 0
            ;;
        *)
            ;;
    esac

    COMPREPLY=( $( compgen -W "$opts" -- "$cur" ) )

    return 0
} &&
complete -F _toilet toilet 
```

`_figlet`并且`_toilet`几乎相同，除了`find`/`sed`命令中的模式。
如何提取一个`_figlet_toilet`以模式作为参数的函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T05:58:53.850

来自：[http ://www.gnu.org/software/bash/manual/html_node/Programmable-Completion.html](http://www.gnu.org/software/bash/manual/html_node/Programmable-Completion.html)

> 生成这些匹配项后，将调用使用 -F 和 -C 选项指定的任何 shell 函数或命令。当命令或函数被调用时，COMP_LINE、COMP_POINT、COMP_KEY 和 COMP_TYPE 变量被赋予如上所述的值（参见 Bash 变量）。如果正在调用 shell 函数，则还设置 COMP_WORDS 和 COMP_CWORD 变量。调用函数或命令时，**第一个参数是其参数正在完成的命令的名称**，第二个参数是正在完成的单词，第三个参数是当前命令行上正在完成的单词之前的单词。不针对正在完成的单词过滤生成的完成；该函数或命令在生成匹配项方面具有完全的自由。

* * *

```
# bash completion for figlet/toilet

{
    have figlet || have toilet
} &&
_figlet_toilet()
{
    local prev cur opts pat
    _get_comp_words_by_ref cur prev
    opts="-f"

    COMPREPLY=()

    case $prev in
        -f)
            case "${1}" in
                figlet)
                    pat='flf'
                ;;
                toilet)
                    pat='[tf]lf'
                ;;
            esac
            local running=$(find /usr/share/figlet -name "*.${pat}" -printf '%P\n' | sed "s/\.${pat}\$//")
            COMPREPLY=( $(compgen -W "${running}" -- ${cur}) )
            return 0
            ;;
        *)
            ;;
    esac

    # if '-f' is already given, then generate random string
    for (( i=0; i < ${#COMP_WORDS[@]}-1; i++ )); do
        if [[ ${COMP_WORDS[i]} == -f ]]; then
            # COMPREPLY=("'$(fortune -sn42)'")
            return 0
        fi
    done

    COMPREPLY=( $( compgen -W "$opts" -- "$cur" ) )

    return 0
} &&
complete -F _figlet_toilet figlet toilet 
```

# java - Java 表格布局

> ID：10476832
> 
> 赞同：9
> 
> 时间：2012-05-07T04:52:43.043
> 
> 标签：java, swing, layout, tablelayout, gridbaglayout

我目前想为 JPanels 构建一个表格类型的布局。我发现有一个用于 Java 的 TableLayout，但我不知道如何导入它。另一方面，我发现有一个 GridBagLayOut，它也可以构造一个类似布局的表格。但它似乎更复杂。任何建议。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-07T06:24:30.847

这是使用 TableLayout 的[SSCCE](http://sscce.org)，（[TableLayout 简介](http://www.oracle.com/technetwork/java/tablelayout-141489.html)）

```
import javax.swing.JButton;
import javax.swing.JFrame;
import layout.TableLayout;

public class TestTableLayout {

    public static void main(String args[]) {

        JFrame frame = new JFrame("Example of TableLayout");
        frame.setSize(450, 450);

        double size[][] = {{10, 75, 75, 75, 75, 75, 10}, // Columns
            {10, 75, 75, 75, 75, 75, 10}}; // Rows

        frame.setLayout(new TableLayout(size));

        String label[] = {"(1,1)", "(1,5)", "(1,3)", "(5,3)", "(3,3)"};
        JButton button[] = new JButton[label.length];

        for (int i = 0; i < label.length; i++) {
            button[i] = new JButton(label[i]);
        }

        frame.add(button[0], "1, 1");
        frame.add(button[1], "1, 5");
        frame.add(button[2], "1, 3");
        frame.add(button[3], "5, 3");
        frame.add(button[4], "3, 3");

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

* * *

TableLayout 所需的 jar 可以从[这里下载](http://www.oracle.com/technetwork/java/tablelayout.jar)

* * *

另请查看：[布局管理器的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)，以防万一。

* * *

如果您选择 GridBagLayout，请查看：[如何使用 GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)

# python - WTForms 在刷新 flask-wtf 时双重 POST 提交预防

> ID：10476836
> 
> 赞同：2
> 
> 时间：2012-05-07T04:53:11.173
> 
> 标签：python, flask, wtforms, double-submit-prevention

我使用带有 Flask-WTF 扩展的 WTForms 和 Flask

我的表格如下所示：

```
class CommentForm(Form):
    body = TextAreaField('Body', [validators.Length(min=4, max=300)])
    entity_id = HiddenField('Entity ID', [validators.required()]) 
```

Jinja2 模板：

```
 <form method="POST" action="{{ request.url }}#comment-question" id="comment-question">
     <div>{{ comment_form.body }} <button type="submit">Submit</button></div>
     {{ comment_form.entity_id(value=question.id) }}
     {{ comment_form.hidden_tag() }}
 </form> 
```

呈现形式：

```
<form method="POST" action="http://localhost:5000/answers/1/question-0#comment-question" id="comment-question">
  <div><textarea id="body" name="body"></textarea> <button type="submit">Submit</button></div>
  <input id="entity_id" name="entity_id" type="hidden" value="1">
  <div style="display:none;"><input id="csrf_token" name="csrf_token" type="hidden" value="20120507081937##ee73cc3cfc053266fef78b48cc645cbf90e8fba6"><input id="entity_id" name="entity_id" type="hidden" value=""></div>
</form> 
```

是否可以在不更改表单“操作”并进行重定向的情况下防止在浏览器刷新按钮单击时提交双重表单？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T05:46:13.717

我没有太多使用 WTForms 或 Flask 的经验，但是基于 Django 类的视图通过在 POST 之后重定向来防止双重发布，所以我假设执行重定向是处理这类事情的方法。

一种替代方法是生成一个唯一令牌并将其附加到您的表单参数（很像 CSRF 令牌）。缓存此值并在提交表单时对其进行检查。[可以在此处找到](https://github.com/salexkidd/django_double_post_blocker)Django 的一个相当原始的示例。

### 编辑：示例代码

虽然我真的会在成功提交表单后执行重定向，但这里有一个生成表单令牌的示例，它大量借鉴[了 CSRF 保护的这个 Flask 片段](http://flask.pocoo.org/snippets/3/)：

```
# yourapp/views/filters.py

import random
from string import ascii_letters, digits

from flask import request, session, redirect
from yourapp import app

def generate_form_token():
    """Sets a token to prevent double posts."""
    if '_form_token' not in session:
        form_token = \
            ''.join([random.choice(ascii_letters+digits) for i in range(32)])
        session['_form_token'] = form_token
    return session['_form_token']

@app.before_request
def check_form_token():
    """Checks for a valid form token in POST requests."""
    if request.method == 'POST':
        token = session.pop('_form_token', None)
        if not token or token != request.form.get('_form_token'):
            redirect(request.url)

app.jinja_env.globals['form_token'] = generate_form_token 
```

在您的模板中：

```
<!-- Again, I've never used WTForms so I'm not sure if this would change when using that app. -->
<input type='hidden' name='_form_token' value='{{ form_token() }}' /> 
```

请注意，在[代码段](http://flask.pocoo.org/snippets/3/)中使用 CSRF 保护方法也可以实现几乎相同的效果（尽管上面的代码执行重定向，而代码段返回 403）。

但这确实引出了一个问题——如果您正在对无效令牌执行重定向，为什么不摆脱所有这些复杂性并在成功提交表单时重定向？

# css - 宽度和高度不适用于 DIV 标签

> ID：10476838
> 
> 赞同：0
> 
> 时间：2012-05-07T04:53:27.720
> 
> 标签：css, html, height, width

你好，

我创建了一个高度和宽度为 500px 的 div 的小弹出窗口。当我直接显示它时，它看起来不错。但是当我默认设置 display:none 并在单击按钮时使其可见时，弹出窗口显示没有高度和宽度……谁能告诉我原因……

```
<!DOCTYPE HTML>
        <html>
         <head>
          <style>
           div{
             width:500px;
             height:500px;
             border:1px solid black;
             background:#988858;
             border-radius:14px;
             box-shadow:5px 5px 10px #666633;
             display:none;
           }
          </style>
         </head>

         <body>
          <button class="button">Click</button>

            <div id="Popup">
               <a href="#" id="Close" onClick="closePopup()">close</a>
            </div>

         </body>

         <script>
           document.getElementsByClassName('button')[0].addEventListener('click',showPopup,false);

           function showPopup(){
            //document.getElementById('Popup').style.width=500+'px';
            //document.getElementById('Popup').style.height=500+'px';
            document.getElementById('Popup').style.display='inline';
           }
           function closePopup(){
            document.getElementById('Popup').style.display='none';
           }

         </script>

        </html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T04:55:39.120

内联元素不保留宽度和高度，您需要将其设置`display`为`block`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T04:57:09.840

`display:inline`不支持宽度和高度。试试`display:block`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T05:04:45.547

```
 document.getElementById('Popup').style.display='inline';
                                                  ^^^^ 
```

显示内联不支持高度和宽度所以使用`block`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-05T18:43:28.933

不能使用这里的`initial`和`inline`属性`display`。`flex`并且`inherit`更合适（对齐方式与第一次加载 div 时相同）。除此之外，您可以使用`inline-block`,`block`和`inline-flex`. 试试弹性 :)

# vba - 无效使用财产？

> ID：10476850
> 
> 赞同：4
> 
> 时间：2012-05-07T04:55:43.427
> 
> 标签：vba, ms-access

我正在使用 Access 数据库，它背后有一个表单和 VBA。自从我涉足 VBA 已经有一段时间了，我的 google-fu 现在让我失望了，所以请耐心等待。

我创建了一个简单的类，但出现编译错误：

```
Dim oRecordSet As ADODB.RecordSet
Public Property Get RecordSet() As ADODB.RecordSet
    RecordSet = oRecordSet '' error here
End Property

Public Property Let RecordSet(ByVal val As ADODB.RecordSet)
    RecordSet = val
End Property 
```

我还有其他几个相同的属性（显然是不同的名称/变量）编译得很好；它们的类型是`String`和`Integer`。

我错过了什么？谢谢！

还有一个旁注，当我编码智能感知显示时`ADODB.Recordset`，但在自动格式化（回车、编译等）上它会将其更改为`ADODB.RecordSet`. 我需要担心吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T05:08:58.073

它应该是：

```
Public Property Get RecordSet() As ADODB.RecordSet
    Set RecordSet = oRecordSet '' error here
End Property 
```

# ios - 删除 mp3 源文件后 MPMoviePlayerController 仍然播放？

> ID：10476852
> 
> 赞同：0
> 
> 时间：2012-05-07T04:55:48.513
> 
> 标签：ios, mp3, mpmovieplayercontroller

我正在编写一个应用程序来播放媒体文件。我使用 MPMoviePlayerController。我的来源：

```
NSURL * mp3URL = [NSURL fileURLWithPath:mp3Path];
MPMoviePlayerController *mpv = [[MPMoviePlayerController alloc] init];
[mpv setContentURL:mp3URL]; 
```

但是当我删除 mp3Path 时，mpv 仍然播放。在这种情况下，MPMoviePlayer 创建一个 tmp 文件，从 mp3Path 加载数据到 tmp 路径并播放这个 tmp 文件？谁能给我解释一下？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:41:15.217

是的，它创建了一个 tmp 文件，这就是为什么你有 didloadfinish 和 didpreloadfinish 的通知，如果文件完全加载，它将播放整首歌曲......

# .net - 什么是 MVVM？它有什么用处？

> ID：10476855
> 
> 赞同：0
> 
> 时间：2012-05-07T04:56:10.230
> 
> 标签：.net, design-patterns, xaml, mvvm

> **可能重复：**
> [为什么选择 MVVM，它的核心优势是什么？](https://stackoverflow.com/questions/1644453/why-mvvm-and-what-are-its-core-benefits)

我有人就在我的应用程序上使用视图模型提出了很多建议。我完全不知道它是什么。谁能简单地解释一下视图模型是什么，如何使用它，它的好处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T05:39:00.303

尝试阅读Josh Smith 撰写的这篇[MSDN 文章。](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:15:34.277

我认为[Jason Dolinger 制作的录音](http://blog.lab49.com/archives/2650)是我见过的最好的演练。他遍历了一个标准的“我在 WPF 中进行 winforms 编程”，并逐渐将其转换为 MVVM 设计。节奏非常好，并且可以访问测试代码。

[直接链接到这里的视频文件](http://www.lab49.com/wp-content/uploads/2011/12/Jason_Dolinger_MVVM.wmv)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T06:20:32.687

MVVM 是一种 UI 模式，可帮助您基于 SOC 和层分离基础来构建应用程序。总之，您可以在 Silver Light 和 WPF 应用程序中使用 MVVM。

如果您查看@Tormod 建议的视频会很好

# blackberry - 如何在黑莓中创建自定义下拉菜单

> ID：10476856
> 
> 赞同：1
> 
> 时间：2012-05-07T04:56:12.887
> 
> 标签：blackberry, custom-controls

谁能帮我创建一个自定义下拉菜单，类似于黑莓 5.0 中附加的图像。我使用了对象选择字段，但它与标签一起出现。指导我创建自定义下拉菜单，如下图所示

![在此处输入图像描述](../Images/e345f36b5726347babe7ffc82c5e3d28.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:24:47.620

我已经使用弹出屏幕创建了我的自定义 ChoiceField。这是下面的代码示例

```
package com.src.java.rim.ui;

import net.rim.device.api.system.Bitmap;
import net.rim.device.api.system.Display;
import net.rim.device.api.ui.DrawStyle;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.XYEdges;
import net.rim.device.api.ui.component.ListField;
import net.rim.device.api.ui.component.ListFieldCallback;
import net.rim.device.api.ui.container.HorizontalFieldManager;
import net.rim.device.api.ui.container.PopupScreen;
import net.rim.device.api.ui.container.VerticalFieldManager;
import net.rim.device.api.ui.decor.BackgroundFactory;
import net.rim.device.api.ui.decor.Border;
import net.rim.device.api.ui.decor.BorderFactory;

public class FWCustomChoiceField extends HorizontalFieldManager {

    /*space between text and icon*/
    final int padding = 10;

    String arrowBitmapName = "arrow_state_grey_right.png";

    Object choice[] = null;

    int index = -1;

    String text = "Please select one option";

    ListField choiceField = null;
    public FWCustomChoiceField(final Object choice[]) {

        this.choice = new Object[choice.length];        
        this.choice = choice;

        choiceField = new ListField(){
            protected boolean navigationClick(int status, int time) {

                Field focus = UiApplication.getUiApplication().getActiveScreen() .getLeafFieldWithFocus();

                if (focus instanceof ListField) {
                    ChoicePopupScreen popup = new ChoicePopupScreen(10, 80, choice);
                    popup.setChoice(choice);                    
                    UiApplication.getUiApplication().pushScreen(popup);
                }
                return super.navigationClick(status, time);
                }
        };      

        choiceField.setSize(1);
        choiceField.setCallback(new TestListCallback());
        add(choiceField);
    }

    public void setSelIndex(int index){
        this.index = index; 
        this.text = choice[index].toString();
        choiceField.invalidate();
    }

    public int getSelectedIndex(){
        return index;
    }

    final class TestListCallback implements ListFieldCallback {
        TestListCallback() {
        }
        public void drawListRow(ListField list, Graphics g, int index, int y, int w) {
            Bitmap bitmap = Bitmap.getBitmapResource(arrowBitmapName);          
            int fontWidth = getFont().getAdvance(text);
            int width = Display.getWidth() ;
            int posX = (width-(fontWidth + padding + bitmap.getWidth()))/2; 

            int height = list.getRowHeight();
            int posY = (height - bitmap.getHeight())/2;

            g.drawText(text, posX, y, 0, w);
            g.drawBitmap(posX+fontWidth+padding,posY, bitmap.getWidth(), bitmap.getHeight(), bitmap, 0, 0);
        }
        public Object get(ListField listField, int index) {
            return null;
        }
        public int getPreferredWidth(ListField listField) {
            return Graphics.getScreenWidth();
        }
        public int indexOfList(ListField listField, String prefix, int start) {
            return listField.indexOfList(prefix, start);
        }
    }

    public class ChoicePopupScreen extends PopupScreen {
        Object []choice = null;

        /*holds the position for popup screen*/
        private int  _posX = 0;
        private int _posY = 0;

        public ChoicePopupScreen(int posx,int posy, Object[] choice) {
            /*calling super class constructor*/
            super(new VerticalFieldManager(), Field.FOCUSABLE);

            this.setMargin(new XYEdges(1,1,1,1));

            this.choice = new Object[choice.length];
            this.choice = choice;

            /*Setting position for popup screen*/
            _posX = posx;
            _posY = posy;

            /*list field customized to display as choice picker*/
            ListField choiceList = new ListField(){
                /*list field event handling using navigation click*/
                protected boolean navigationClick(int status, int time) {
                    /*getting the selected list index value*/
                    int index = this.getSelectedIndex();

                    /*returning the selected index to the main field*/
                    setSelIndex(index);

                    /*removing the popup screen from the screen stack*/
                    UiApplication.getUiApplication().popScreen(UiApplication.getUiApplication().getActiveScreen());

                    /*required for event handling*/
                    return super.navigationClick(status, time);
                }
            };

            /*displays the message when list is empty*/
            choiceList.setEmptyString("List is empty", DrawStyle.LEFT);
            choiceList.setSize(choice.length);
            choiceList.setCallback(new PopUpListCallback());            
            add(choiceList);

            Border border = BorderFactory.createSimpleBorder( new XYEdges(), Border.STYLE_TRANSPARENT);
            this.setBorder(border);
        }

        protected void  setChoice(Object []choice) {            
            this.choice = new Object[choice.length];
            this.choice = choice;
        }

        protected void sublayout(int width, int height) {
            super.sublayout(width, height);         
            /*setting the position for the popup screen*/
            setPosition(_posX , _posY);
        }
    }

    private class PopUpListCallback implements ListFieldCallback {
        PopUpListCallback() {
        }

        public void drawListRow(ListField list, Graphics g, int index, int y, int w) {
            String text = choice[index].toString();
            g.drawText(text, padding, y, 0, w);
        }

        public Object get(ListField listField, int index) {
            return null;
        }

        public int getPreferredWidth(ListField listField) {
            return Graphics.getScreenWidth();
        }

        public int indexOfList(ListField listField, String prefix, int start) {
            return listField.indexOfList(prefix, start);
        }
    }
} 
```

使用上面的类

```
String choicestrs[] = {"Opt 1", "Opt 2", "Opt 3"};
add(new FWCustomChoiceField(choicestrs)); 
```

# php - 如何让 $_POST 更安全？

> ID：10476863
> 
> 赞同：2
> 
> 时间：2012-05-07T04:57:02.490
> 
> 标签：php, security

这是我从 Facebook 工程页面获得的示例代码。

```
<?php
if ($_POST['name']) {
?>
    <span>Hello, <?=$_POST['name']?>.</span>
<?php 
} else {
?>
<form method="post">
What is your name?<br>
<input type="text" name="name">
<input type="submit">
</form>
<?php
} 
```

它说上面的代码不安全，因为它对跨站点脚本开放。正确的方法是通过 htmlspecialchars() 传递 $_POST['name']。但是，他们表示这是一种糟糕的编程习惯。

总是通过 htmlspecialchars() 传递 $_POST 变量效率低下？

我想不出任何方法来保证它的安全。他们介绍了我不愿意使用的 XHP。

参考：[https ://www.facebook.com/notes/facebook-engineering/xhp-a-new-way-to-write-php/294003943919](https://www.facebook.com/notes/facebook-engineering/xhp-a-new-way-to-write-php/294003943919)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:26:27.590

> 正确的方法是通过 htmlspecialchars() 传递 $_POST['name']。但是，他们表示这是一种糟糕的编程习惯。

这本身并不是一个糟糕的做法。问题是，当您`htmlspecialchars`每次将文本内容放入 HTML 时都必须输入，您很可能会忘记一个，从而留下漏洞。

该页面所说的正确的是，最好有一种*默认情况下*HTML 转义的模板语言，这样您就不必考虑它了。这是目前大多数 Web 框架已经学到的一课，但是原始 PHP 仍然没有方便的方法来做到这一点。

# javascript - 用于网络音频 api 的声音库

> ID：10476864
> 
> 赞同：0
> 
> 时间：2012-05-07T04:57:05.813
> 
> 标签：javascript, html, web-audio-api

我正在使用 Buzz.js 在我的网页上播放声音，但我找不到下载声音文件的地方。有谁知道我在哪里可以获得钢琴键库或任何其他大型相关声音文件（midi 会很棒）。如果可以的话请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:51:54.610

也许您可以使用这些来自 freesound.org 的采样钢琴包之一。您只需注册，它们都是 CC 许可下的声音。

我发现这些可能很有用，基本上是从某架钢琴上采样的键：

[http://www.freesound.org/people/Jovica/packs/669/](http://www.freesound.org/people/Jovica/packs/669/) http://www.freesound.org/people/Corsica_S/packs/3957/

我相信您可以找到其他包含其他乐器的包，以链接到每个 midi 音符。

来自巴塞罗那的问候，奥斯卡

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T16:40:03.600

Buzz 不使用网络音频 API。请更新问题标题。

示例不是 Buzz 的一部分，也不应该是。如果您访问 www.google.com 并输入“免费钢琴样本”，您可以找到您想要的内容。

最后，MIDI 文件不是声音文件，它们包含如何播放音乐序列的说明，但没有音频数据。考虑一下乐谱，如果有帮助的话。

# scheme - 方案中的 peek-char

> ID：10476866
> 
> 赞同：1
> 
> 时间：2012-05-07T04:57:26.600
> 
> 标签：scheme, racket

只需要知道偷看计划的基础知识。我尝试查看球拍网站寻求帮助，但没有太多内容。或者，也许我在寻找错误的部分。无论如何，重点如下。

如果我有`(#\x #\b #\o #\x #\space #\3 #\6 #\0)`

我希望能够将 x 识别为一个字符，然后继续查看直到达到空间并将其重新定义为一个单词。然后对 360 执行相同的操作。

有小费吗？谢谢，麻烦您了！:)

这是我的代码的样子，以防万一

```
(define (work x) 
(cond
((null? x)(write '$$))
(char-numeric? (car x))
(write 'Num)
(toke (cdr x)))
((char-alphabetic? (car x))
(write 'ID)
(work (cdr x)))
(else (write "other"))) 
```

这样做的问题是它会给我“xbox”的 IDIDIDID（这是代码的原因），但我想让它只为整个单词 xbox 输出一次 ID

奥斯卡，我知道你帮我解决了这个问题，但我缺乏计划知识并没有让我走得更远。很抱歉重新发布。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T06:33:10.793

请参阅手册中有关 peek-char 的部分：[http://docs.racket-lang.org/reference/Byte_and_String_Input.html#(def. *((quote.* ~23~25kernel)._peek-char))](http://docs.racket-lang.org/reference/Byte_and_String_Input.html#%28def._%28%28quote._~23~25kernel%29._peek-char%29%29)

一个示例（我使用字符串作为输入端口，以便示例在没有额外数据文件的情况下工作）：

```
> (define a-string "Foo bar")
> (define in (open-input-string a-string))
> (peek-char in)
#\F
> (peek-char in)
#\F
> (read-char in)
#\F
> (peek-char in)
#\o
> (peek-char in)
#\o
> (read-char in)
#\o
> (read-char in)
#\o
> (peek-char in)
#\space 
```

# asp.net-mvc-3 - 紧密结合的观点：在 POST 方法上向服务器发送纯值：使用黑客可以轰炸的任何工具

> ID：10476867
> 
> 赞同：0
> 
> 时间：2012-05-07T04:57:29.590
> 
> 标签：asp.net-mvc-3, security

我有一个添加/编辑用户页面，我在其中使用了紧密耦合视图。因此，无论何时最终用户要添加/编辑用户（在我们的术语 POST 方法中），发送到服务器的所有值都是纯文本。最终用户可以轻松地修改请求，或者服务器可以被相同的请求轰炸，只需更改一些值。我可以知道如何限制它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T05:01:27.187

查看 MVC3 中内置的防伪令牌助手（旨在完全防止您正在谈论的跨站点请求）：

[http://blog.stevensanderson.com/2008/09/01/prevent-cross-site-request-forgery-csrf-using-aspnet-mvcs-antiforgerytoken-helper/](http://blog.stevensanderson.com/2008/09/01/prevent-cross-site-request-forgery-csrf-using-aspnet-mvcs-antiforgerytoken-helper/)

# php - 为两个域设置 cookie

> ID：10476872
> 
> 赞同：0
> 
> 时间：2012-05-07T04:58:27.717
> 
> 标签：php, session, cookies, session-cookies, zen-cart

我正在尝试为同一个站点设置两个 cookie。（除了一个是 HTTP，一个是 HTTPS 站点。）

```
 $cookie_domain_http = parse_url(HTTP_SERVER);
 $cookie_domain_https = parse_url(HTTPS_SERVER); 
```

假设 HTTP_SERVER 包含[http://www.somesite.com](http://www.somesite.com)并且 HTTPS_SERVER 包含[https://ssl1.otherdomain.com](https://ssl1.otherdomain.com)，我正在使用以下内容。

```
 setcookie("referrer_key",
     $_GET['referrer'],
     time() + 60*60*24*365,
     $cookie_domain_http['path'], 
     $cookie_domain_http['host']); // Set the cookie for the non-HTTPS version.

if(ENABLE_SSL == "true") {
   setcookie("referrer_key",
     $_GET['referrer'], 
     time() + 60*60*24*365, 
     $cookie_domain_https['path'], 
     $cookie_domain_https['host']); // Set the cookie for HTTPs version.
} 
```

现在首先`setcookie`是正确设置会话 cookie。但是，第二行不会导致它显示。

我怎样才能使用这个代码，特别是 PHP 来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T05:18:23.030

您只能在一个域中设置一个 cookie，即您的代码正在运行的那个域。您可以获得的最接近的是设置为 somesite.com，在这种情况下，它将被发送到 somesite.com 的所有子域

您不能在同一段代码中同时在 somesite.com 和 othersite.com 上设置 cookie。

否则，没有什么可以阻止您为任意域添加 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T05:03:31.913

[http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

最后还有一个参数，您可以使用它来指定 cookie 是否安全。

```
if (ENABLE_SSL == "true") 
  setcookie("referrer_key", 
  $_GET['referrer'], 
  time() + 60*60*24*365, 
  $cookie_domain_https['path'], 
  '.somesite.com', // Parse out the base domain, and put it here with the leading "."
  true); //this is the parameter to set specify a secure cookie 
```

# svn - 如何在 Windows Server 2008 上使用命令提示符或其他 GUI 工具管理 Subversion 的访问权限？

> ID：10476876
> 
> 赞同：2
> 
> 时间：2012-05-07T04:59:09.683
> 
> 标签：svn, subversion-edge

我已经安装了 Subversion Edge，它是 Windows Server 2008 R2 上 Subversion 的开源集成包。

最近，我们在 subversion edge 安装的 apache 上遇到错误，我们的 Subversion Edge 控制中心现在无法访问，并且给我们一个内部服务器错误。（这不是问题，因为我们仍然可以在创建的存储库上签出/提交。并使用 view vc 和 svn 浏览它）。所以我们无法使用 Subversion Edge 提供的 GUI 来管理堆栈。

现在因为它的控制面板没有打开，我无法创建新的存储库，或者添加新用户或更新之前创建的用户或组的访问权限/权限。

在解决服务器错误之前，有什么方法（可能来自命令提示符）或其他 GUI 工具来管理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:39:43.283

可以在位于 csvn 安装的 \data\conf 文件夹中的文本文件“svn_access_file”中手动编辑访问权限。

不过，不知道如何手动创建新存储库或添加新用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:28:58.357

安装命令行 SVN 客户端，例如[Slik SVN](http://www.sliksvn.com/)。阅读*带有 Subversion 的版本控制中*[的管理员工具包](http://svnbook.red-bean.com/en/1.8/svn.reposadmin.maint.html#svn.reposadmin.maint.tk)部分。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T16:12:56.920

用控制台报告问题以便让它再次工作怎么样？我建议遵循此页面上的 ManualUpgrade 说明：

[https://ctf.open.collab.net/sf/wiki/do/viewPage/projects.svnedge/wiki/ManualUpgrade](https://ctf.open.collab.net/sf/wiki/do/viewPage/projects.svnedge/wiki/ManualUpgrade)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-14T08:47:13.783

转到Respective Repository位置，conf下会有一个passwd文件，如 `/data/Repository_Name/conf/passwd`

例如，如果您想授予给定 Repository_Name 存储库的权限，请按照以下步骤操作：

1.  去该位置找到passwd文件
2.  输入相应的用户 ID 并为他创建一个密码。
3.  将凭据详细信息发送给用户并让他尝试访问。

完成授予访问权限。

谢谢，班加罗尔 US Technologies 的 Manas Kumar Panigrahi。*

# php - 发布到多个 Facebook 朋友墙（在我的情况下为 20）

> ID：10476877
> 
> 赞同：0
> 
> 时间：2012-05-07T04:59:19.590
> 
> 标签：php, facebook, facebook-graph-api

我正在做一个 facebook 应用程序，直到昨天它都运行良好。我所做的是让用户选择他们的 20 个朋友，然后编写一个简单的脚本从这样的循环中发布到他们的墙上：

```
foreach($selectedids as $selectedid) {
    $invitation = new Invitations();
    $invitation->circle_id = $circle->id;
    $invitation->status = 0;
    $invitation->follower_id = $selectedid;
    if ($invitation->create()) {
        $id = $invitation->id;
        // Now Send the Invitations on Facebook
        $facebook->api($selectedid.'/feed', 'post', array(
            'picture' => '',
            'message' => $name."something",
            'name' => $config['app_title'],
            'link' => $config['redirect_uri']."?invitation=".$id,
            'caption' => '',
            'description' => '',
            'actions' => array(array('name' => 'Get Search',
                                     'link' => 'http://www.google.com'))
        ));
    }
} 
```

直到昨天一切都很好，但是当现在多个用户同时使用它时，脚本会在向大约 7-8 位朋友发帖后停止，并给出无法完成任务的错误。有没有更好的方法在 facebook 中向多个人发帖？我该怎么做，才能让这个表现更好？任何建议将不胜感激。

检查日志异常：发现“错误 201 用户不可见”。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:38:47.313

该错误是由于用户无法发布到他的朋友墙，我通过在发布之前通过运行 fql 来检查“can_post”到用户的朋友墙进行检查来解决这个问题。解决方案可以查看。

[检查facebook用户是否可以在他的朋友墙上发帖](https://stackoverflow.com/questions/10479123/check-if-a-facebook-user-can-post-in-his-friends-wall-or-not)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:30:45.853

将api调用放入变量并检查变量如何？

```
$result = $facebook->api($selectedid.'/feed', 'post', array(
            'picture' => '',
            'message' => $name."something",
            'name' => $config['app_title'],
            'link' => $config['redirect_uri']."?invitation=".$id,
            'caption' => '',
            'description' => '',
            'actions' => array(array('name' => 'Get Search',
                                     'link' => 'http://www.google.com'))
        )); 
```

因为如果成功，它会将帖子的 id 发回给您。

# css - 分页符在 UI WebView 中不起作用

> ID：10476882
> 
> 赞同：1
> 
> 时间：2012-05-07T05:00:28.717
> 
> 标签：css, ios, uiwebview

我正在尝试为 iPad 创建一个应用程序，例如 iBook。我已经在其中加载了一个 ePub 文件，一切正常。

我已经为 webview 页面编写了 CSS。以下是我获取分页符的代码

```
<span style="page-break-after: always" /> 
```

我已经加载了一张图片，以及它下面的一些文字。在图像之后我想要分页符，并且我希望将图像移动到下一页，但是分页符代码不起作用。我不确定我的代码行是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:19:24.557

添加这样的样式定义怎么样？

```
<style type="text/css">
  img.pagebreak {page-break-before: always;}
  ...
</style>
...
<body>
...
<img style="pagebreak" ...>
... 
```

# haskell - 为什么`($ 4) (> 3)`等价于`4 > 3`？

> ID：10476883
> 
> 赞同：10
> 
> 时间：2012-05-07T05:00:33.430
> 
> 标签：haskell

我今天在玩 Haskell 时注意到，可以做类似的事情

```
($ 4) (> 3) 
```

产生`True`。这里发生了什么？有一些直觉会很棒。

我猜？看起来这`($ 4)`是一个不完整的函数应用程序，但我感到困惑的是它`$`是一个中缀运算符，所以它不应该是这样的`(4 $)`吗？这不编译，很明显不是，这让我相信我并不真正理解发生了什么。这个`(>3)`词对我来说很有意义，因为如果你提供类似的东西`(\x -> x 4) (>3)`，你最终会得到相同的结果。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-07T05:06:11.180

`($ 4)`就是所谓的[section](http://www.haskell.org/haskellwiki/Section_of_an_infix_operator)。这是一种部分应用中缀运算符的方法，但提供右侧而不是左侧。它完全等同于`(flip ($) 4)`.

同样， (> 3) 是一个部分。

```
($ 4) (> 3) 
```

可以改写为

```
(flip ($) 4) (> 3) 
```

这与

```
flip ($) 4 (> 3) 
```

这与

```
(> 3) $ 4 
```

在这一点上，应该很清楚，这归结为`(4 > 3)`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-07T05:12:09.390

您可以从任一侧部分应用中缀运算符。对于诸如 的交换运算符，你说or`+`并不重要，但是例如对于除法，你可以提供除数或除数。`(+ 1)``(1 +)``(5 /)``(/ 5)`

函数应用运算符将​​函数作为左侧操作数，将参数作为右侧操作数 ( `f $ x`)，因此您可以将其部分应用于函数`(f $)`或参数`($ x)`。所以给定

```
($ 4) (> 3) 
```

您首先部分应用带有参数的 $-operator`4`并使用 function 提供它`(> 3)`。所以这基本上变成了

```
(> 3) $ 4 
```

这与`(4 > 3)`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-08T00:33:20.053

`($ 4)`是接受一个函数并应用于`4`它的函数。

`(> 3)`是接受一个数字并检查它是否大于 3 的函数。

因此，通过将后一个函数提供给前者，您实际上是在应用`4`检查其输入是否大于 的函数，`3`因此您得到`True`.

# eclipse - 如何获得包含 bitbucket (mercurial) 存储库的所有提交的工作区？

> ID：10476884
> 
> 赞同：1
> 
> 时间：2012-05-07T05:00:38.920
> 
> 标签：eclipse, mercurial, pydev, bitbucket

我刚刚开始使用 Mercurial（托管在 bitbucket 上，界面是通过 eclipse pydev），我很困惑。对于这个非常基本的问题，我深表歉意，但我无法在谷歌上找到答案。我尝试阅读 mercurial 教程，但无济于事。

所以这里是：

我创建了一个 bitbucket 并上传了我的代码。当我执行“hg clone”时，我会得到一个带有副本的本地工作区。那挺好的。

现在我已经推送了一些提交。我可以在 bitbucket 中看到它们。那也很好。

现在是让我感到困惑的部分：当我对不同的工作区进行另一个“hg 克隆”时，它不会填充最新的提交，而是填充我上传的原始文件集。

如何获得一个填充了最新提交集的工作区？

对于新手问题以及可能没有使用正确的白话，我深表歉意。

谢谢亚龙

# git - 将 aos ics 分支带入 master 时的 git merge 与 git rebase

> ID：10476885
> 
> 赞同：2
> 
> 时间：2012-05-07T05:00:39.917
> 
> 标签：git, version-control, merge, rebase

将 aos ics 分支引入 master（我的项目主分支）、git merge 或 git rebase 时，推荐使用哪种方法？（顺便说一句，我读到[什么时候使用 git rebase 而不是 git merge？，](https://stackoverflow.com/questions/804115/git-rebase-vs-git-merge)但仍然很困惑在这种情况下应该做什么。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:15:54.650

> 将aosp ics分支带入master？

**合并**（首先合并`master`到您的 `aosp ics`分支以在本地解决任何冲突，然后合并`aosp ics`到`master`）

`rebase`如果您没有推送您的`aosp ics`，即如果您没有将该分支的历史发布到公共上游存储库，则A仅对您的情况感兴趣。
然后你可以 `aosp ics`在`master`合并 `aosp ics`到`master`.
因此，即使使用 rebase，您最终也会从 `aosp ics`to合并`master`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-15T19:47:23.197

将“aosp_ics”分支重新定位到 master 的快速步骤是：

`git checkout aosp_ics`

`git rebase master`

`git checkout master`

`git rebase aosp_ics` - 或者 - `git merge -ff-only aosp_ics`

**这假设在变基期间没有未提交的更改和合并冲突。如果存在合并冲突，只需在 rebase 期间插入解决冲突的步骤，然后继续执行上述步骤。*gs

# azure - 对 Azure 有点困惑

> ID：10476888
> 
> 赞同：1
> 
> 时间：2012-05-07T05:01:26.093
> 
> 标签：azure

我一直在阅读有关 azure 存储系统、工作角色和 Web 角色的信息。

您是否必须为此专门为 azure 开发应用程序？看起来您可以像通常在 Windows 服务器上一样在 IIS 中设置远程桌面并在 IIS 中设置应用程序，对吧？我有点困惑，因为他们读起来就像你需要开发一个天蓝色的特定应用程序。

希望迁移到云端，但我不想为此重新设计我的应用程序。

感谢您的任何澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T05:07:37.173

对 ASP.NET 应用程序的更改很少（大多数情况下，Web 应用程序只能在 Azure 中运行）但是您不需要远程连接进行部署。您实际上构建了一个带有清单 (xml) 的包 (zip)，其中包含有关如何部署应用程序的信息，并将其提供给 Azure。反过来，Azure 将负责分配服务器和部署您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:14:52.787

这里有几个要素需要考虑——

代码方面 - 在很大程度上，这只是在 IIS 和 Windows 上运行的 .net，所以一切都非常熟悉，并且所有过去的学习、最佳实践等都适用。

最重要的是，您可能希望利用一些 Azure 特定功能——例如表存储、队列或与部署交互——您可能需要学习更多 API，但这些功能并不大，而且很好想到并保持非常简单，所以没有一点学习曲线。当然，好的架构会考虑将这些抽象出来以防止/减少锁定，但这是一种设计选择。

然而，在代码之外，还有更多需要考虑的事情——你想考虑你的部署——因为将 RDP 嵌入到机器中并以这种方式进行更改会带走 PaaS 的许多好处——即如果服务器出现故障，平台会通过自动重新部署您的应用程序来“自我修复”。您还想考虑监控——这需要稍有不同。

最后 - 云支持不同的场景，并提供横向扩展模型而不是纵向扩展模型，您可能想利用它，但可能需要做一些事情。

所以 - 底线 - 是的 - 你可能很快就可以在 Azure 中获得一个应用程序，而无需真正学习太多或任何东西，但要正确地做事，并真正从平台中获益，你想了解更多关于它。好消息是 - 它并不多，而且感觉非常熟悉，只是 .net 的另一个“框架”（以及 Java 等......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T05:34:24.420

您可以使用 SQL 后端构建一个漂亮的普通 Web 应用程序，并以最少的 Azure 依赖项使其在 Azure 上运行。然后，此应用程序将非常可移植到另一个服务器或云平台。

但正如您所见，有许多 Azure 特定功能。但是这些通常是可选的，您可以不使用它们，尽管在构建高度可扩展的站点时它们很有用。

Azure 是一个平台，所以在正常情况下你不应该需要在远程桌面上摆弄东西。RDP 实际上只是用于绝望的调试情况。

# java - 如何从使用 JDO 保留的 Set 中删除项目？

> ID：10476901
> 
> 赞同：1
> 
> 时间：2012-05-07T05:03:36.173
> 
> 标签：java, google-app-engine, jdo, datanucleus

我有一个容器对象，其中包含一组使用[JDO 2.3](https://developers.google.com/appengine/docs/java/datastore/jdo/overview)持久保存在 Google App Engine 中的对象。我想从设置的内容中删除一个对象。使用以下测试代码，remove() 方法返回 false，但更改不会持久化，如以下代码所示。但是，集合基数减少了（这种行为让我感到惊讶）。如何更正此示例以从集合中删除指定的对象（在本例中为对象“一个”）？

我无法在 JDO 文档中找到任何相关内容。平等检查和散列基于[这篇文章](http://www.artima.com/lejava/articles/equality.html)。

带有日志级别的控制台日志转储在[这里](http://pastebin.com/Jumr0Jue)（更新：这是无事务版本）。

带有事务的控制台日志转储在[这里](http://pastebin.com/ym5kdftw)。

**容器.java**

```
import java.util.HashSet;
import java.util.Set;

import javax.jdo.annotations.FetchGroup;
import javax.jdo.annotations.PersistenceCapable;
import javax.jdo.annotations.Persistent;
import javax.jdo.annotations.PrimaryKey;

@PersistenceCapable(detachable = "true")
@FetchGroup(name = "withContents", members = { @Persistent(name = "contents") })
public class Container
{
    @PrimaryKey
    private String id;

    @Persistent(dependentElement = "true")
    private Set<Containee> contents;

    public Set<Containee> getContents()
    {
        return contents;
    }

    public Container(String id)
    {
        super();
        this.id = id;
        contents = new HashSet<Containee>();
    }
} 
```

**容器.java**

```
import javax.jdo.annotations.Extension;
import javax.jdo.annotations.IdGeneratorStrategy;
import javax.jdo.annotations.PersistenceCapable;
import javax.jdo.annotations.Persistent;
import javax.jdo.annotations.PrimaryKey;

@PersistenceCapable(detachable = "true")
public class Containee
{
    @SuppressWarnings("unused")
    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    @Extension(vendorName = "datanucleus", 
       key = "gae.encoded-pk", value = "true")
    private String id;

    @Persistent
    private String friendlyName;

    public String getFriendlyName()
    {
        return friendlyName;
    }

    public Containee(String friendlyName)
    {
        this.friendlyName = friendlyName;
    }

    @Override
    public boolean equals(Object other)
    {
        if (other instanceof Containee)
        {
            Containee that = (Containee) other;
            return this.getFriendlyName().equals(that.getFriendlyName());
        }
        return false;
    }

    @Override
    public int hashCode()
    {
        return friendlyName.hashCode();
    }
} 
```

**测试片段**（作为 RemoteService 的一部分在服务器端运行）

```
...

        System.out.println("Fetching...");
        Container after = pm.getObjectById(Container.class, "test");

        // prints 2
        System.out.println("Pre-remove set cardinality "
                + after.getContents().size());

        // prints "true"
        System.out.println("Post-store containment: "
                + after.getContents().contains(one));

        for (Containee e : after.getContents())
        {
            System.out.println(e.getFriendlyName());
        }

        System.out.println("Mark");
        boolean result = after.getContents().remove(one);
        System.out.println("End Mark");

        System.out
                .println("'after' object class: " + after.getContents().getClass());

        // prints "false" (!?!?)
        System.out.println("Post-store removal: " + result);

        // prints 1 (...?)
        System.out.println("Post-remove set cardinality: "
                + after.getContents().size());

... 
```

**编辑：**

**带有事务的测试片段**

```
 Container before = new Container("test");

    Containee one = new Containee("one");
    Containee two = new Containee("two");
    Containee three = new Containee("three");

    before.getContents().add(one);
    before.getContents().add(two);
    before.getContents().add(three);

    // prints "true"
    System.out.println("Pre-store containment: "
            + before.getContents().contains(two));

    // prints "true"
    System.out.println("Pre-store removal: "
            + before.getContents().remove(two));

    PersistenceManager pm = pmf.getPersistenceManager();

    try
    {
        pm.makePersistent(before);
    }
    finally
    {
        pm.close();
    }

    pm = pmf.getPersistenceManager();
    pm.getFetchPlan().addGroup("withContents");

    Transaction tx = pm.currentTransaction();

    try
    {
        System.out.println("Fetching...");
        Container after = pm.getObjectById(Container.class, "test");

        // prints 2
        System.out.println("Pre-remove set cardinality "
                + after.getContents().size());

        // prints "true"
        System.out.println("Post-store containment: "
                + after.getContents().contains(one));

        for (Containee e : after.getContents())
        {
            System.out.println(e.getFriendlyName());
        }

        tx.begin();

        System.out.println("Mark");
        boolean hrm = after.getContents().remove(one);
        System.out.println("End Mark");

        tx.commit();

        System.out
                .println("'after' object class: " + after.getContents().getClass());

        // prints "false" (!?!?)
        System.out.println("Post-store removal: " + hrm);

        // prints 1 (...?)
        System.out.println("Post-remove set cardinality: "
                + after.getContents().size());

    }
    finally
    {
        System.out.println("Finalizing transaction...");
        if (tx.isActive())
        {
            System.out.println("Rolling back...");
            tx.rollback();
        }
    }

    pm.close();

    pm = pmf.getPersistenceManager();
    pm.getFetchPlan().addGroup("withContents");

    try
    {
        System.out.println("Fetching again...");
        Container after = pm.getObjectById(Container.class, "test");

        // prints 2
        System.out.println("Final set cardinality "
                + after.getContents().size());
    }
    finally
    {
        pm.close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T08:00:51.770

你的关系没有正确完成。

[https://developers.google.com/appengine/docs/java/datastore/jdo/relationships#Owned_One_to_Many_Relationships](https://developers.google.com/appengine/docs/java/datastore/jdo/relationships#Owned_One_to_Many_Relationships)

容器.java

```
// ...
@Persistent(mappedBy = "employee", dependentElement = "true")
private Set<Containee> contents; 
```

容器.java

```
// ...
@Persistent
private Container container; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T04:36:45.317

经过一个周末的头疼和沮丧之后，我找到了一种解决方法：在调用 Set.remove() 时利用*引用*相等而不是*值相等。*下面是代码（有趣的是从注释“获取对持久集中对象的引用”开始）：

```
 Container before = new Container("test");

    Containee one = new Containee("one");
    Containee two = new Containee("two");
    Containee three = new Containee("three");

    before.getContents().add(one);
    before.getContents().add(two);
    before.getContents().add(three);

    pm = pmf.getPersistenceManager();

    try
    {
        pm.makePersistent(before);
    }
    finally
    {
        pm.close();
    }

    pm = pmf.getPersistenceManager();

    try
    {
        Container after = pm.getObjectById(Container.class, "test");

        // prints 3
        System.out.println("Pre-remove set cardinality "
                + after.getContents().size());

        // prints "true"
        System.out.println("Post-store containment: "
                + after.getContents().contains(one));

        //get a reference to the object in the persisted Set
        //that is value-equivalent to Containee #1
        Containee ref = null;
        for (Containee c : after.getContents())
        {
            if (c.equals(one)) ref = c;
        }

        if (ref != null)
        {
            after.getContents().remove(ref);
        }

        // prints 2
        System.out.println("Post-remove set cardinality: "
                + after.getContents().size());

    }
    finally
    {
        pm.close();
    }

    pm = pmf.getPersistenceManager();

    try
    {
        Container after = pm.getObjectById(Container.class, "test");

        // prints 2 (as expected)
        System.out.println("Final set cardinality "
                + after.getContents().size());
    }
    finally
    {
        pm.close();
    } 
```

这段代码没有显示它，但是用悲观事务包装操作可能是一个好计划，以避免并发问题。

这种技术的成功让我怀疑 DataNucleus 框架使用对象引用而不是相等性检查来处理删除，但我在文档中没有发现任何证实或反驳该假设的内容。

# c# - 如何在 ListView 中插入对象类型？

> ID：10476902
> 
> 赞同：12
> 
> 时间：2012-05-07T05:03:37.450
> 
> 标签：c#, winforms

我想在我的 ListView 中同时维护 ID 和对象类型。我正在尝试这样做：

```
lstView.Items.Insert(MyObject);
// can't do this, because it takes only Int and String 
```

就我而言，ID 是 int，所以这部分没问题。但是如何插入一个对象类型并在 Item_Selection 更改事件中检索它呢？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-07T05:25:00.140

A`ListView`不能像`ListBox`or那样直接添加或插入对象`ComboBox`，而是需要创建 a`ListViewItem`并设置其`Tag`属性。

Msdn 的 Tag 属性

> 包含有关控件的数据的对象。默认值为空。
> 
> 从 Object 类派生的任何类型都可以分配给此属性。如果通过 Windows 窗体设计器设置 Tag 属性，则只能分配文本。Tag 属性的一个常见用途是存储与控件密切相关的数据。例如，如果您有一个显示客户信息的控件，您可以在该控件的 Tag 属性中存储一个包含客户订单历史记录的 DataSet，以便可以快速访问数据。

示例代码：

```
MyObject myObj = new MyObject();

ListViewItem item = new ListViewItem();
item.Text = myObj.ToString(); // Or whatever display text you need
item.Tag = myObj;

// Setup other things like SubItems, Font, ...

listView.Items.Add(item); 
```

当您需要从 中取回您的对象时`ListView`，您可以强制转换`Tag`属性。

```
private void OnListViewItemSelectionChanged(object sender, ListViewItemSelectionChangedEventArgs e) {
    MyObject myObj = (MyObject)e.Item.Tag;
    int id = myObj.Id;

    // Can access other MyObject Members
} 
```

通常更容易将功能包装到辅助方法中。

```
public static void CreateListViewItem(ListView listView, MyObject obj) {
    ListViewItem item = new ListViewItem();
    item.Tag = obj;

    // Other requirements as needed

    listView.Items.Add(item);
} 
```

你可以这样做：

```
CreateListViewItem(listView, obj); 
```

A`ListView`不支持`DataSource`像很多控件那样的属性，因此如果您希望进行数据绑定，则需要实现一些更自定义的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T05:27:22.853

创建新的 listviewitem 对象。使用标签属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T05:17:19.003

解决此问题的最快方法是将对象列表放在一边：

```
List<MyObject> list = ... ; // my list 
```

从列表中生成一个以字符串为 ID 的字典，或者您可以使用索引从原始列表中检索：

```
Dictionary<int,string> listBinder = new Dictionary<int,string>(
    list.Select(i => new KeyValuePair<int,string>(i.ID, i.Name))
); 
```

将列表视图绑定或代码隐藏附加到字典，然后使用所选项目从您的私人列表中检索您的对象。

# javascript - 具有本地支持的 javascript datetimepicker

> ID：10476905
> 
> 赞同：0
> 
> 时间：2012-05-07T05:03:55.063
> 
> 标签：javascript, date, time

我希望用户输入约会日期和时间，并在其前一小时向他发送提醒。

在服务器上，我想以 UTC 存储日期时间，但在客户端上，用户将以本地时间输入。处理这种转换的最佳方法是什么？有没有原生支持这个的插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T05:08:58.947

是的，有一个插件可以根据系统信息（[jsTimezoneDetect](https://bitbucket.org/pellepim/jstimezonedetect)）检测时区。实际上`date`-object 本身存储信息（但它有点奇怪！）。

SO 上有一篇[有趣的文章](http://corneliusweiss.de/2008/10/14/dealing-with-time-zones-in-javascript/)和[一个有趣的答案](https://stackoverflow.com/a/8840189/57508)，值得一读！

> 不要在 javascript 中进行任何日期时间计算。您可能会猜测浏览器的时区来定义它，但定义本身和所有日期时间计算都必须在时区感知系统中进行。

当您阅读本文时，您将对“javascript 中的 date/dst/utc/timezones”问题有更深入的了解 - 因此，如果您能告诉我们更多有关您的服务器端的信息，将会很有趣：

*   您在服务器端使用哪个框架？
*   您是否有任何逻辑可以使用某些设置（例如自定义时区设置）来代表帐户？

“正确”的方法（如果你有后端的话，这是故障安全的）将是：让用户使用日期时间 - 在浏览器范围内它或多或少是“未定义的”（不需要找到时区，偏移量，或任何类似的东西！）。现在您将这个“未定义”的日期时间信息提供给服务器（例如，将带有隐藏字段的 unix-timestamp 发送到服务器），您可以在其中获得用户被分配到的实际时区的信息。因此，您现在可以将此“未定义”日期时间信息转换为服务器端的时区感知日期时间对象，并将您的帐户范围的信息分配给它（现在“未定义”日期时间对象具有本地时间-zone - 例如“太平洋夏令时间”）。现在您可以轻松地进行任何您想要的转换。
这种方法的唯一缺点是，您将有 2 个定义时区的范围（用户的操作系统和您的 web 应用程序） - 但其他任何事情都是摆弄而不是故障安全！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T05:18:25.153

`getTimezoneOffset`使用计算 UTC 日期/时间客户端的方法向您的服务器发送时间戳可能是一个想法。要将其转换回客户端，您需要发送时间戳，创建一个虚拟日期客户端以确定当前时区偏移量（用户可能已移动到另一个时区！）并根据该信息创建客户端日期。客户端你会做这样的事情：

```
//[client side send]
var d = new Date(), //now
    offset = d.getTimezoneOffset()
    UTCTimeStamp = d.getTime()+(60000*offset); // send to server

//[client side receive]
var offset = 60000*new Date().getTimezoneOffset(),
    localDate = new Date(timestamp + (offset < 0 ? Math.abs(offset) : -offset)); 
```

[点击这里](http://testbed.nicon.nl/v8test/datetime.html)使用这个想法做一个简单的测试。

# c++ - Windows SDK 7.1 编译器上的 yvals.h C4514 警告

> ID：10476907
> 
> 赞同：5
> 
> 时间：2012-05-07T05:04:04.070
> 
> 标签：c++, visual-studio-2010, winapi

我正在使用警告级别为 4的`cl.exe`版本进行编译。我收到以下警告：`_MSC_FULL_VER == 160030319`

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\INCLUDE\yvals.h(773) : warning C4514: 'std::_Mutex::_Mutex' : unreferenced inline function has been removed 
```

这是一段源代码：

```
__thiscall _Mutex(_Uninitialized)
{   // do nothing
} 
```

`yvals.h`包含在`stdint.h`其中，我是这样包含的：

```
#pragma warning(disable:4514)

#include <stdint.h>

#pragma warning(default:4514) 
```

但它*仍然*没有摆脱警告。我在这里做错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T05:37:07.247

[我在这里](http://connect.microsoft.com/VisualStudio/feedback/details/506985/disabling-warnings-explicitly-on-locale-std-locale-still-causes-them-to-surface)找到了答案。有人报告它是一个错误，但它是按设计关闭的。答案是直到翻译单元结束时才会发出警告。引用：

> 感谢您报告此问题。我已将其作为按设计解决，因为 4514 和 4710 警告在翻译单元的末尾发出（翻译单元是源文件及其所有包含的标题）。这就是为部分翻译单元禁用它们无效的原因。尽管行号可能看起来好像编译器在编译代码时在翻译单元的中间发出这些警告，但事实并非如此。
> 
> 编译器前端（负责解析 C++）在翻译单元的末尾发出警告 4514“未引用的内联函数已被删除”，因为只有这样它才能确定翻译单元中没有任何内容引用该内联函数。它查找函数的行号，但是否发出警告取决于它是否在翻译单元的末尾启用，而不是在编译该函数时是否启用。

因此，您要么需要始终禁用它，要么不必担心它。

# php - 如何从类中实例化 $this 类的对象？PHP

> ID：10476908
> 
> 赞同：5
> 
> 时间：2012-05-07T05:04:16.950
> 
> 标签：php, oop

我有这样的课：

```
class someClass {

  public static function getBy($method,$value) {
    // returns collection of objects of this class based on search criteria
    $return_array = array();
    $sql = // get some data "WHERE `$method` = '$value'
    $result = mysql_query($sql);
    while($row = mysql_fetch_assoc($result)) {
      $new_obj = new $this($a,$b);
      $return_array[] = $new_obj;
    }
    return $return_array;
  }

} 
```

我的问题是：我可以像上面那样使用 $this 吗？

代替：

```
 $new_obj = new $this($a,$b); 
```

我可以写：

```
 $new_obj = new someClass($a,$b); 
```

但是当我扩展类时，我将不得不重写该方法。如果第一个选项有效，我就不必了。

更新解决方案：

这两个都在基类中工作：

1.)

```
 $new_obj = new static($a,$b); 
```

2.)

```
 $this_class = get_class();
  $new_obj = new $this_class($a,$b); 
```

我还没有在儿童班中尝试过它们，但我认为#2 会在那里失败。

此外，这不起作用：

```
 $new_obj = new get_class()($a,$b); 
```

它会导致解析错误：Unexpected '(' 它必须分两步完成，如上面的 2.)，或者更好，如 1.)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T05:26:48.187

简单，使用`static`关键字

```
public static function buildMeANewOne($a, $b) {
    return new static($a, $b);
} 
```

请参阅[http://php.net/manual/en/language.oop5.late-static-bindings.php](http://php.net/manual/en/language.oop5.late-static-bindings.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T05:12:05.937

您可以使用[ReflectionClass::newInstance](http://nz.php.net/manual/en/reflectionclass.newinstance.php)

[http://ideone.com/THf45](http://ideone.com/THf45)

```
class A
{
    private $_a;
    private $_b;

    public function __construct($a = null, $b = null)
    {
        $this->_a = $a;
        $this->_b = $b;

        echo 'Constructed A instance with args: ' . $a . ', ' . $b . "\n";
    }

    public function construct_from_this()
    {
        $ref = new ReflectionClass($this);
        return $ref->newInstance('a_value', 'b_value');
    }
}

$foo = new A();
$result = $foo->construct_from_this(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T05:07:18.937

尝试使用 get_class()，即使类被继承也可以使用

```
<?
class Test {
    public function getName() {
        return get_class() . "\n";
    }

    public function initiateClass() {
        $class_name = get_class();

        return new $class_name();
    }
}

class Test2 extends Test {}

$test = new Test();

echo "Test 1 - " . $test->getName();

$test2 = new Test2();

echo "Test 2 - " . $test2->getName();

$test_initiated = $test2->initiateClass();

echo "Test Initiated - " . $test_initiated->getName(); 
```

运行时，您将获得以下输出。

测试 1 - 测试

测试 2 - 测试

测试启动 - 测试

# java - 如何使用带有属性文件的 Eclipse“导出为 jar 选项”构建 jar

> ID：10476910
> 
> 赞同：0
> 
> 时间：2012-05-07T05:04:39.260
> 
> 标签：java, eclipse

```
public xFbConfigReader()
{

    //props = new Properties();
    propsdatabase = new Properties();

    try 
    {
        // load a properties file
        InputStream dbin = getClass().getResourceAsStream("/properties/database.properties");

        propsdatabase.load(dbin);

    } 
    catch (IOException ex) 
    {
        ex.printStackTrace();
    }

} 
```

我将名为“Database.properties”的属性文件保存在项目名为“Properties”的文件夹中。

当我在 Eclipse 中导出为 jar 时。属性文件夹可见。

![你可以看到属性文件夹](../Images/5befa5578c42fe81158856b0993ceabb.png)

但是当我运行程序时，它显示 dbin 中有一个 NUll 点异常。

所以这意味着我需要在 Eclipse 中形成一个 jar 的正确方法。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:15:11.487

处理属性文件时更好的解决方案是读取

```
static Properties databaseproperties= new Properties();
    static {
        try {
            connectionProps.load(YourClassName.class.getClassLoader()
                    .getResourceAsStream("databaseproperties.properties"));
        } catch (Exception e) {
            System.out.println("Exception is " + e.getMessage());
        }
    } 
```

这是更好的方法，因为

*   我们可以将我们的属性文件移动到其他文件夹。
*   事实上，我们可以将属性文件夹保留在 jar 之外。假设您可以创建一个名为 Configuration 的文件夹，您可以在其中包含所有属性文件。由于它在 jar 之外，因此您可以在需要时更改属性文件。
*   对于属性文件的更改，无需解压缩它。

（或）只需您可以进行此更改而无需考虑目录结构

1.  第 1 步：将属性文件移动到 SRC
2.  第2步：更改此行如下

    InputStream dbin = getClass().getResourceAsStream("/database.properties");

这与以前的代码没有太大区别，因为它仍然保留在 JAR 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T05:17:38.053

您收到空指针异常，因为未加载属性文件尝试使用 FileInputStream 加载属性，如下所示 FileInputStream dbin = new FileInputStream("/properties/database.properties"); 属性.load(dbin);

# database - 我可以从 django 模板访问数据库吗？

> ID：10476915
> 
> 赞同：1
> 
> 时间：2012-05-07T05:05:19.183
> 
> 标签：database, django, templates

假设我有一个`Photo`带有`ImageField`.

我试图迭代模板中的所有照片对象`{% for photo in Photo.objects.all %}`。
什么都没有出现。

这是不可能的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T05:41:52.193

执行此操作的通常方法是使用如下所示的视图：

```
def photo_view(request):
    return render_to_response('app_name/photos.html', {
        'photos': Photo.objects.all()
        }) 
```

然后模板（`app_name/templates/app_name/photos.html`在此示例中）具有以下内容：

```
{% for photo in photos %} 
```

* * *

如果你真的想做`{% for photo in Photo.objects.all %}`，那么你的视图代码必须`Photo`通过上下文传递：

```
def photo_view(request):
    return render_to_response('app_name/photos.html', {
        'Photo': Photo
        }) 
```

请记住，这并不是一种更好的方法，因为模板语法比 Python 更具限制性。比如模板中没有办法做`{% for photo in Photo.objects.filter(...) %}`；过滤需要在视图中进行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T05:13:53.737

你可能想错了。

HTTP 请求被路由到视图。

视图执行任何业务逻辑（可能涉及通过 ORM 访问数据库），然后将任何所需的数据/对象作为上下文字典传递给模板系统。

模板系统只看到它从视图中传递的内容。如果对象是一个惰性求值的 ORM DB 迭代器，那么它肯定可以访问 DB。但是视图必须将该对象传递到模板的上下文中。

尝试`{{Photo}}`在您的模板中确保它实际上被传递了一个`"Photo"`由相应视图命名的对象。您可能需要检查生成的 html 的源代码（以防`repr`它使用尖括号做一些奇怪的事情，并且无法在浏览器中正确显示。）

# ios5 - iOS 5 IB 在横向模式下将导航栏显示为 44 像素而不是 32 像素高

> ID：10476916
> 
> 赞同：1
> 
> 时间：2012-05-07T05:05:39.327
> 
> 标签：ios5, landscape, navigationbar

在最新的 xcode 中，当我将 UIView 设置为横向模式时，导航栏仍显示为 44 像素高而不是 32 像素。

当我运行它时，它在 32 像素高处是正确的。主要问题是我使用背景构建 UI，并使用背景将图像按钮放置在适当的位置。但是，如果没有一些试验和错误，这是不可能做到的，并且无法看到它在 IB 中的实际外观，因为背景随后被调整为 44 像素导航栏高度与 32 像素。这似乎是一个错误在 xcode 中，因为我看不到任何设置/重置高度的方法。

其他人有这个问题，如果有，你知道如何解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T07:48:17.240

问题是 ios 将 44px 图像放置在横向视图中。你必须这样写stk：

```
UIImage *backgroundImageLandscape = [UIImage imageNamed:@"imageForLandscape"];
[navBar setBackgroundImage:backgroundImageLandscape forBarMetrics:UIBarMetricsLandscapePhone]; 
```

# silverlight - 在silverlight中将数据绑定到数据网格中的组合框

> ID：10476917
> 
> 赞同：1
> 
> 时间：2012-05-07T05:05:57.810
> 
> 标签：silverlight, datagrid, datagridview, combobox, silverlight-5.0

如何在网格的组合框中绑定从 WCF 返回的数据。组合框未处于编辑模式。我能够显示静态数据，但不能显示从 WCF 返回的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T05:26:44.900

您可以使用*RelativeSource*在元素树示例中搜索所需的 DataContext/ViewModel/Page/UserControl 以查找在 ComBoxCollectionSource 附近定义的 DataGrid itemssource 的 ViewModel：

```
<ComboBox ItemsSource={Binding RelativeSource={RelativeSource AncestorType=sdk:DataGrid}, Path=DataContext.ComboBoxColloctionSource} /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T05:22:47.457

我假设静态数据是您手动输入到 Items 属性中的内容。组合框的语法有点不同，但这里是：

```
<ComboBox ItemsSource="{Binding Path=<your collection>,Mode=OneTime}" SelectedValuePath="<id-field>" DisplayMemberPath="<display-field>" SelectedItem="{Binding Path=<your-property>,Mode=TwoWay}" /> 
```

上面以 PATH 结尾的参数只是将属性名称作为字符串。

**编辑**：如果你使用字典，你会使用：

```
<ComboBox ItemsSource="{Binding Path=<your dictionsry>,Mode=OneTime}" SelectedValuePath="Key" DisplayMemberPath="Value" SelectedItem="{Binding Path=<your-int-property>,Mode=TwoWay}" /> 
```

# database-design - 支持/交叉实体的关键是什么？

> ID：10476919
> 
> 赞同：1
> 
> 时间：2012-05-07T05:06:04.763
> 
> 标签：database-design, entity-relationship

如果我们有

```
 ____________           /      \             ____________
|   Person   |-------- /        \    ------>|   Location |
|____________|        /  BornIn  \          |_____________
                      \          /
                       \        /
                        \      /

Person(SSN, first name, last name)
BornIn(..)
Location(City, Country, zip-code) 
```

其中**SSN**是 的键`Person`，`Location is`由所有三个属性决定。

对于弱实体，键由弱实体的所有属性+所有者实体的主键（或外键）组成。

1.  什么是/是什么`BornIn`？
2.  弱支持实体的关键是什么？

我只是无法在网上找到答案。这不是家庭作业。我正在学习数据库设计......

我的错。这是多对一的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:11:49.043

“弱实体”仅仅意味着它涉及识别关系（作为子端点）。而识别关系只是意味着子实体的密钥包含父密钥（因此无法独立识别）。

`BornIn`是一种关系，而不是实体，因此它不能是“弱”的，也不能在逻辑模型中具有键。

然而，在*物理*模型中，`BornIn` *可以*映射到表中并有一个键，具体取决于关系基数：

*   由于您说它是多对一的，因此它没有映射到表，因此没有键（并且由于它不是一对一的，因此`Person`表中的 FK 上也没有键）。
*   但是如果它*是*多对多的，那么`BornIn`将被映射到一个带有一个键的表，该键是两个父键的**组合**`{SSN, City, Country, zip-code}`： .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T05:13:37.270

人表的 PK 是 ssn 位置表必须有一个主键 - location_id（可能是自动增量值）

中间表 - BornIn 将 ssn 和 location_id 作为其列

因此，您可以通过此中间表将 Person 表与 Location 表连接起来。

```
 SELECT p.first_name,l.city from Person p inner join bornin b on b.ssn = p.ssn 
                                 inner join Location l on l.location_id=b.location_id 
```

# c# - Crystal 报表的 PrintToPrinter 方法引发登录异常

> ID：10476921
> 
> 赞同：1
> 
> 时间：2012-05-07T05:06:13.133
> 
> 标签：c#, .net, printing, crystal-reports

我在我的网站中使用 PrintToPrinter(1,false,1,1) 获取水晶报告。单击此按钮（btnPrintToPrinter）后，它会抛出 LogOnException 并说 Database Logon failed ：

```
protected void btnPrintToPrinter_Click(object sender, EventArgs e)
{
    int empno = Convert.ToInt32(Session["AnyVal"]);

    SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);

    string strQuery = "SELECT [View_EmplDetail].[Uni-Code], [View_EmplDetail].[FacultyCode], [View_EmplDetail].[EmpIDstr], [View_EmplDetail].[EngGivenName], [View_EmplDetail].[position_eng], [View_EmplDetail].[Emp_no], [View_EmplDetail].[GivenName], [View_EmplDetail].[position_name], [View_EmplDetail].[DariName], [Tbl_Dept].[EName], [View_EmplDetail].[photo] FROM   [MoHEDatabase].[dbo].[View_EmplDetail] [View_EmplDetail] INNER JOIN [MoHEDatabase].[dbo].[Tbl_Dept] [Tbl_Dept] ON [View_EmplDetail].[DepCode]=[Tbl_Dept].[DepCode] WHERE  [Emp_no] = @empno";
    SqlCommand command = new SqlCommand(strQuery, connection);
    command.CommandType = System.Data.CommandType.Text;

    command.Parameters.AddWithValue("@empno", empno);
    command.Connection = connection;
    command.Connection.Open();

    SqlDataAdapter da = new SqlDataAdapter(command);
    DataTable dt = new DataTable();
    da.Fill(dt);

    ReportDocument rpt = new ReportDocument();
    string _reportPath = Server.MapPath("..\\Student\\cardFinal.rpt");
    //rpt.Load(AppDomain.CurrentDomain.BaseDirectory + "\\" + @"\\Student\\CardFinal.rpt");
    rpt.Load(_reportPath);

    rpt.SetDataSource(dt);
    emp_card_report_viewer.ReportSource = rpt;

    string sq = "";

    //{View_OrgStr1.Uni-Code}=0 and {View_OrgStr1.FacultyCode}=119 
    //sq = "{View_StudentAddNew.Student_ID}=" + Session["AnyVal"];
    if (Session["AnyVal"].ToString() != "")
    {
        sq = "{View_EmplDetail.Emp_no}=" + int.Parse(Session["AnyVal"].ToString());
    }

    //emp_card_report.Report.FileName = "../Student/CardFinal.rpt";
    emp_card_report_viewer.SelectionFormula = sq;
    //ConnectionInfo connInfo = new ConnectionInfo();
    //connInfo.ServerName = "172.16.0.15";
    //connInfo.DatabaseName = "MoHEMISDatabase";
    //connInfo.UserID = "myuser";
    //connInfo.Password = "myuser@sabir";
    //TableLogOnInfos crtt = new TableLogOnInfos();
    //TableLogOnInfo crtto = new TableLogOnInfo();
    //Tables crtables;
    //crtables = rpt.Database.Tables;
    //foreach (CrystalDecisions.CrystalReports.Engine.Table crtable in crtables)
    //{
    //    crtto = crtable.LogOnInfo;
    //    crtto.ConnectionInfo = connInfo;
    //    //crtable.ApplyLogInInfo(crtto);
    //}
    ConnectionInfo connInfo1 = new ConnectionInfo();
   // connInfo1.ServerName = "server";

    setDBLOGONforReport(connInfo1);

    //emp_card_report_viewer.RefreshReport();

    //ConnectionInfo connInfo = new ConnectionInfo();
    //connInfo.ServerName = "server";
    //connInfo.DatabaseName = "MoHEDatabase";
    //connInfo.UserID = "hemis_admin";
    //connInfo.Password = "hemis@sabir";

    //setDBLOGONforReport(connInfo);

    CrystalDecisions.Shared.PageMargins pageMargins = new
    CrystalDecisions.Shared.PageMargins(0, 0, 0, 0);
    rpt.PrintOptions.ApplyPageMargins(pageMargins);

    rpt.PrintOptions.PrinterName = printerList.SelectedItem.Value;
    emp_card_report_viewer.RefreshReport();

    rpt.PrintToPrinter(1, false, 1, 1);

    rpt.Close();
    rpt = null;
} 
```

错误出现在：rpt.PrintToPrinter(1,falase,1,1);

知道哪里出错了吗？？？我已经注释掉了一些行，只是在检查它们......

任何帮助将不胜感激... tnx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T11:06:12.610

幸运的是，我怀疑您并不是说“在我编译之后”它会引发错误。我假设你的意思是“在我点击我的网络应用程序中的'btnPrintToPrinter'按钮之后”？无论如何，请更新问题以更具体地说明如何触发错误？

如果您的“btnPrintToPrinter”按钮在您单击它的那一刻就位于网页上，则您的数据库登录失败，这可能是因为您正在做两件相互矛盾的事情：

1) 您首先指定一个数据库作为报表的数据源。-THEN- 2) 您正在为报告设置连接详细信息，即

```
ConnectionInfo connInfo1 = new ConnectionInfo(); 
setDBLOGONforReport(connInfo1); 
```

删除设置连接信息的这些额外步骤。如果您向报告推送数据表，则报告不需要连接信息。（一旦您提供报告数据，它就不会连接到服务器以再次获取数据。）

注意：如果您在删除这些行后仍然看到问题。问题可能是您传递的数据表不是首先构建报告的数据表。例如：

1) 您使用名为“TableA”的表构建了报告，其中包含“field1”、“field2”和“field3”。2) 然后通过使用“field1”、“field2”、“fieldx”和“fieldz”查询“TableA”，在代码中构建一个数据表。3) 您将#2 中的表格传递到报告中。

这可能会导致数据库登录错误（即使它不是真正的登录问题）。因为报告是这样做的：

1）它尝试使用您传入的数据。然后它不能，因为这些字段与报告的设计内容*不匹配*。2）然后，没有数据的报告尝试连接到之前构建的数据库服务器。3) 由于您没有（也不*应该*）将有效的连接信息传递给报告，它现在会抛出“数据库登录失败”。

所以你看，这并不是因为登录失败你有问题。这是因为您提供的数据（这使得报告不需要连接）是无效数据。正如我之前所说，即使一个字段不同也会导致报告失败。事实上，即使只是更改单个字段的类型（例如将 varchar 更改为 int，或将 varchar(5) 更改为 nvarchar(10) 等），您传递的数据也可能与构建报告的数据不匹配。

所以在你的页面加载事件中（我假设你设置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T11:47:43.383

我用过这个：

```
myReport.SetDatabaseLogon("username","password"); 
```

方法，它解决了问题。

# jsp - 如何在 gsp 页面中包含 jsp

> ID：10476922
> 
> 赞同：1
> 
> 时间：2012-05-07T05:06:16.420
> 
> 标签：jsp, jakarta-ee, grails

我正在尝试包含一个 jsp，类似于我们如何通过使用标记将 jsp 包含在 jsp 中。但无法让这个工作。也尝试使用模板[http://grails.1312388.n4.nabble.com/Including-a-jsp-within-a-gsp-td1313927.html](http://grails.1312388.n4.nabble.com/Including-a-jsp-within-a-gsp-td1313927.html)也 没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T06:17:54.230

在您包含的链接中，格雷姆说：

> 目前不可能在 GSP 中包含 JSP

因此，你**不能做你所要求的**。您为什么要尝试将 JSP 与 GSP 混合在一起？JSP 只是功能较少的 GSP。

我的猜测是您有一个现有的 JSP，其中嵌入了许多非显示逻辑。如果是这种情况，**请不要这样做。**

JSP 和 GSP 用于呈现视图。他们不应该执行数据查找或处理复杂的逻辑。这些事情通常应该由控制器内的服务（或在某些情况下直接在控制器中）处理，或者如果它们是显示逻辑的一部分，则将它们包装在标签库中。

如果要在另一页中包含一个页面，则将文件放入`grails-app/views/some/path/`并命名`_myfile.gsp`。然后你使用`<g:render template="/some/path/myfile/>`. 请注意，文件必须以下划线 ( ) 开头，并**以****结尾**，但模板引用两者都没有。`_`**`.gsp`**

 **如果您有现有的 JSP 标记库，则可以[在 GSP 文件中重用这些](http://grails.org/doc/latest/guide/theWebLayer.html#usingJSPTagLibraries)标记库，这可能会有所帮助。**

# java - 无法对 Jasper 报告中的数据进行分组

> ID：10476932
> 
> 赞同：1
> 
> 时间：2012-05-07T05:07:37.203
> 
> 标签：java, jasper-reports, grouping, netbeans-7.1

我想将图像中显示的结果集分组为 JasperReports 中显示的报告格式。我正在使用 JasperReports 4.5。我用谷歌搜索了很多，但找不到满足我要求所需的 xml 标签。

![显示 Jasper 报告中所需报告格式和 SQL Server 结果集的图像](../Images/993dd45eec9368189e0dab664047baed.png) 查询结果集如下

```
 select Design, ProfitPer, LabourChg, WgtY, WgtR, TypeName, SetName, ShapeName, Size,
   Pieces, Weight, Price, sum(ProfitPer) Profit, round(sum(Cus2),3) Charges from 
   VDetaillist  where design like 'B101E' 
   group by  Design, ProfitPer, LabourChg, CompCost, WgtY, WgtR , TypeName, SetName, ShapeName, Size, Pieces, Weight, Price, SetCost, USS 
```

其中 Dsign Profit 和 Charges 是总和值。Design (B101E),ProfitPer,LabourChg,WgtY,WgtR 是非重复值。而 TypeName(Dia,Emarld),Shpae(Round,Square) 和 Size(4,2.2 * 2.2), Pieces, Weight 是重复值。

非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:12:41.787

在您使用的组标题带中转到属性，对于“组表达式”属性，请尝试添加：

```
$F{Design}+' '+$F{ProfitPer}+' '+$F{LabourChg}+' '+$F{CompCost}+' '+$F{WgtY}+'     '+$F{WgtR}+' '+$F{TypeName}+' '+$F{SetName}+' '+$F{ShapeName}+' '+$F{Size}+' '+$F{Pieces+'   '+$F{Weight}+' '+$F{Price}+' '+$F{SetCost}+' '+$F{USS} 
```

确保您的所有 groupby 项目都是 iReport 文档中的 $Fields

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T04:42:41.510

在组头带中，通过在“组表达式”属性中添加以下代码：

```
 $F{Design} 
```

解决了我的问题。

# r - 如何使用 R 查找系统驱动器的数量？

> ID：10476933
> 
> 赞同：-4
> 
> 时间：2012-05-07T05:07:52.057
> 
> 标签：r

使用 R，我想找到计算机上可用的系统驱动器数量和连接到它的外部闪存驱动器。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T07:45:59.123

这实际上不是 R 问题，而是针对操作系统的问题。您可以使用`system`将作业生成到系统并获取信息。

假设您使用的是 Windows，我在[SuperUser.com](https://superuser.com/questions/139899/see-available-drives-from-windows-cli)上找到了这个。

```
sysdrivereport <- system("wmic logicaldisk get caption", intern = TRUE)
substr(sysdrivereport[-c(1, length(sysdrivereport))], 1, 1)

[1] "C" "D" "E" "F" 
```

# java - 获取一个 ArrayList 并放入一个文本文件

> ID：10476934
> 
> 赞同：1
> 
> 时间：2012-05-07T05:08:13.407
> 
> 标签：java, serialization, arraylist, text-files

我正在尝试编写的程序有一些问题。基本上我需要做的是获取`ArrayList`我拥有的信息并将信息导出到文本文件。我尝试了谷歌的几种不同的解决方案，但没有一个给我任何成功。

基本上我有两个`ArrayList`，两个名单，一个毕业生和一个本科生。我只需要获取与这些相关的信息`ArrayList`并将它们放入一个文本文件中。

稍后我需要将`.txt`文件执行相反的操作（导入）到`ArrayList`中，但我稍后会弄清楚。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:55:59.163

这是使用[Apache commons-io 库](http://commons.apache.org/io/)的解决方案：

```
//Put all data into one big list, prepended with size of first list
List<String> allData = new ArrayList<String>(1+grads.size()+undergrads.size());
allData.add(String.valueOf(grads.size());
allData.addAll(grads);
allData.addAll(undergrads);
FileUtils.writeLines(new File("list.txt"), allData); 
```

读回数据：

```
List<String> allData = FileUtils.readLines(new File("list.txt"));
int gradsSize = Integer.parseInt(allData.get(0));
List<String> grads = allData.subList(1, gradsSize+1);
List<String> undergrads = allData.subList(1+gradsSize, allData.size()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T05:18:52.340

如果您需要以特定格式写入数据，您可以使用 a`PrintWriter`以您希望的任何方式将数据写入文件。这样做的问题是，您必须找出一种方法，然后重新读取文本文件并填充数据。

另一方面，您可以使用[XStream （](http://xstream.codehaus.org/)[此处](http://xstream.codehaus.org/tutorial.html)为教程）将文件编写为 XML。这将为您提供人类可读的文本文件（如上），但是，在填充数据时重新读取文本文件会容易得多。

最后，您可以使用[ObjectOutputStream](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInputStream.html)写入数据并使用[ObjectInputStream](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInputStream.html)重新读取数据。但是请注意，此方法不会产生人类可读的文本文件。此外，您的类将需要实现[Serializable](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)接口。

# mysql - MYSQL 一个查询上的一对多关系？

> ID：10476944
> 
> 赞同：1
> 
> 时间：2012-05-07T05:09:01.757
> 
> 标签：mysql, one-to-many

我正在尝试获取（例如）帖子的评论。我有两个表，发布和评论。评论表有一个属于帖子的外键。

是否可以进行一次查询以获得这样的数组？

```
Array
(
    [0] => stdClass Object
        (
            [id] => 1
            [title] => post title
            [content] => post content
            [comment] =>
                [0] => stdClass Object
                    (
                        [id] => 105
                        [content] => This is a comment
                    )
                [1] => stdClass Object
                    (
                        [id] => 199
                        [content] => This is other comment
                    )               
        )
) 
```

显然，如果结果是数组数组或对象数组，没关系

谢谢！

# java - 没有 CAS 登录屏幕的 JASIG CAS 登录

> ID：10476949
> 
> 赞同：12
> 
> 时间：2012-05-07T05:09:41.067
> 
> 标签：java, cas, jasig

我们正在尝试将 CAS 服务器用于我们现有的基于 Web 的应用程序的 SSO。我们的目标是

*   跨各种应用程序（包括跨域）实现 SSO。
*   当它们被重定向到 CAS 服务器登录页面时，为不同的应用程序定制登录（在 UI 术语中）页面。
*   无需进入 CAS 登录页面即可登录，原因是页面本身嵌入了“一个小的登录部分”，用户不会被重定向到 CAS 登录页面以获得更好的可用性。

我们完成了第一个和第二个目标。但是第三个有问题。

对于这个功能，我们试图复制与第二个目标相同的操作，唯一的区别是从非 CAS 登录页面提交/发布数据（凭证、登录票等）。

*   我们不能使用 iframe 在小部分中显示 CAS 登录页面，这容易受到浏览器兼容性问题的影响。
*   我们不能使用 ajax 来使用 CAS api 获取登录票并进行 HTTP 发布（跨域问题）
*   我们所做的是：通过在服务器端进行 HTTP 发布，在加载非 CAS 登录页面时检索登录票和执行 ID。当我们发布用户名/密码以及 loginticket 和 execId 时，CAS 服务器不接受发布数据，而是将用户重定向到 CAS 登录页面，但返回浏览器并再次提交数据可以正常工作。原因是 CAS 和浏览器之间没有建立会话，因此 CAS 拒绝任何发布数据。我们可以使用 CAS restAPI，但它只会让用户登录，对完成 SSO 没有帮助。

关于我们如何处理这个问题的任何想法？

谢谢，普拉蒂克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:29:42.570

有一个关于 CAS 的 wiki 页面对此进行了辩论：[https](https://wiki.jasig.org/display/CAS/Using+CAS+without+the+Login+Screen) ://wiki.jasig.org/display/CAS/Using+CAS+without+the+Login+Screen （但它比[Misagh](https://stackoverflow.com/users/1306655/misagh-m)提出[的谷歌小组讨论更早](https://stackoverflow.com/a/10509961/535203)[米](https://stackoverflow.com/users/1306655/misagh-m)）。

我的解决方案是“[从外部链接或自定义外部表单使用 CAS](https://wiki.jasig.org/display/CAS/Using+CAS+from+external+link+or+custom+external+form) ”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T14:16:03.513

我知道为时已晚，但如果有人正在寻找答案，这就是我解决这个问题的方法。这是我放在 casLoginView.jsp 中的代码

```
<head>
    <script language="javascript">
        function doAutoLogin() {
            document.forms[0].submit();
        }
    </script>
</head>
<body onload="doAutoLogin();">
    <form id="credentials" method="POST" action="<%= request.getContextPath() %>/login?service=<%= request.getParameter("service") %>">
        <input type="hidden" name="lt" value="${loginTicket}" />
        <input type="hidden" name="execution" value="${flowExecutionKey}" />
        <input type="hidden" name="_eventId" value="submit" />
        <input type="hidden" name="serviceLogin" value="<%= request.getParameter("serviceLogin") %>"/>
        <input type="hidden" name="username" value="<%= request.getParameter("username") %>" />
        <input type="hidden" name="password" value="<%= request.getParameter("password") %>" />
        <% 
        if ("true".equals(request.getParameter("rememberMe"))) {%>
            <input type="hidden" name="rememberMe" id="rememberMe" value="true"/>
        <% } %>

        <input type="submit" value="Submit" style="visibility: hidden;" />
    </form>
    <% } else {
        response.sendRedirect(request.getParameter("redirectURL"));
       }
    %>
</body> 
```

在您的 webapp 中，只需向您的 CAS 服务器发出 POST 请求。

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-24T01:03:28.490

在没有登录屏幕页面的情况下登录 cas，我​​自定义流程登录（编写另一个动作状态）

1.在 login-webflow.xml 中，您可以在 action-state id="generateLoginTicket" 中编写转换的其他动作状态。在这个动作状态（我称之为 submitNotUseForm）中，我执行相同的“realSubmit”动作状态。

2.在评估“submitNotUseForm”-> 类 AuthenticationViaFormAction 时，我编写方法 submitNotForm() 并检查：

2.1：如果没有服务调用，则返回调用“viewLoginForm”的值，否则我从凭据的请求集中获取参数

2.2：其他都做同样的方法提交

它对我有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-15T08:17:57.263

1.  您必须获得一份 CAS 官方客户端源代码（cas-client-core，[https://github.com/apereo/java-cas-client](https://github.com/apereo/java-cas-client)），并确保您可以编译它。

2.  您需要更改客户端源代码中 org.jasig.cas.client.authentication.AuthenticationFilter 中的 doFilter() 函数代码，如下所示。

    ```
    final HttpServletRequest request = (HttpServletRequest) servletRequest;
    final HttpServletResponse response = (HttpServletResponse) servletResponse;
    final HttpSession session = request.getSession(false);
    final Assertion assertion = session != null ? (Assertion) session.getAttribute(CONST_CAS_ASSERTION) : null;

    if(request.getServletPath().toLowerCase().equals("/caslogout.jsp"))
    {
        // Set the custom client login page when you logout from CAS server.
        request.setAttribute("casServerLogoutUrl",casServerLoginUrl.replace("login","logout"));
        request.setAttribute("customServerLoginUrl",customServerLoginUrl);

        //We must remove the attribute of CONST_CAS_ASSERTION manually
        if(session!=null)
            session.removeAttribute(CONST_CAS_ASSERTION);

        filterChain.doFilter(request, response);
        return;
    }

    if (assertion != null) {
        filterChain.doFilter(request, response);
        return;
    }

    // Although the custom login page must called caslogin, here you can change it.
    if(request.getServletPath().toLowerCase().equals("/caslogin.jsp"))
    {
        //Set the a default parameter to the caslogin
        request.setAttribute("defaultServerIndexUrl",defaultServerIndexUrl);
        request.setAttribute("casServerLoginUrl",casServerLoginUrl);
        filterChain.doFilter(request, response);
        return;
    }

    final String serviceUrl = constructServiceUrl(request, response);
    final String ticket = CommonUtils.safeGetParameter(request,getArtifactParameterName());
    final boolean wasGatewayed = this.gatewayStorage.hasGatewayedAlready(request, serviceUrl);

    if (CommonUtils.isNotBlank(ticket) || wasGatewayed) {
        filterChain.doFilter(request, response);
        return;
    }

    final String modifiedServiceUrl;

    log.debug("no ticket and no assertion found");
    if (this.gateway) {
        log.debug("setting gateway attribute in session");
        modifiedServiceUrl = this.gatewayStorage.storeGatewayInformation(request, serviceUrl);
    } else {
        modifiedServiceUrl = serviceUrl;
    }

    if (log.isDebugEnabled()) {
        log.debug("Constructed service url: " + modifiedServiceUrl);
    }

    final String urlToRedirectTo = CommonUtils.constructRedirectUrl(this.casServerLoginUrl, getServiceParameterName(), modifiedServiceUrl, this.renew, this.gateway);

    if (log.isDebugEnabled()) {
        log.debug("redirecting to \"" + urlToRedirectTo + "\"");
    }

    // Add a custom server login url parameter to the CAS login url.
    response.sendRedirect(urlToRedirectTo+"&customLogin=custom&customLoginPage="+customServerLoginUrl); 
    ```

3.  将自己编译的 cas-client-core 添加到客户端 webapp 的依赖中。

4.  将 caslogin.jsp 添加到您的客户端 webapp。

```
 <form method="GET" action="<%=request.getAttribute("casServerLoginUrl")%>">
    <p>Username : <input type="text" name="username" /></p>
    <p>Password : <input type="password" name="password" /></p>
    <p><input type="submit" value="Login" /></p>
    <input type="hidden" name="auto" value="true" />
    <input type="hidden" name="service" value="<%=request.getParameter("service")==null?request.getAttribute("defaultServerIndexUrl"):request.getParameter("service")%>" />
```

5.  在客户端 webapp 中编辑 web.xml。在 CASFilter 的过滤器中添加以下代码

```
<init-param>
    <param-name>defaultServerIndexUrl</param-name>
    <param-value>http://clientip:port/webappname/index.jsp</param-value>
</init-param>
<init-param>
    <param-name>customServerLoginUrl</param-name>
    <param-value>http://clientip:port/webappname/caslogin.jsp</param-value>
</init-param>
```

6.  在 CAS 服务器 Web 应用程序中编辑 cas-server-webapp/WEB-INF/view/jsp/default/ui/casLoginView.jsp 中的代码。

```
<%
  String auto=request.getParameter("auto");
  String customLogin=request.getParameter("customLogin");

  if(auto!=null&&auto.equals("true"))
  {
    %>
    <html>
    <head>
      <script language="javascript">
        function doAutoLogin()
        {
          document.forms[0].submit();
        }
      </script>
    </head>
    <body onload="doAutoLogin()">
    <form id="credentials" method="POST" action="<%=request.getContextPath()%>/login?service=<%=request.getParameter("service")%>">
      <input type="hidden" name="lt" value="${loginTicket}" />
      <input type="hidden" name="execution" value="${flowExecutionKey}" />
      <input type="hidden" name="_eventId" value="submit" />
      <input type="hidden" name="username" value="<%=request.getParameter("username")%>" />
      <input type="hidden" name="password" value="<%=request.getParameter("password")%>" />
      <input type="hidden" name="login_form" value="<%=request.getParameter("login_form")%>" />
      <input type="hidden" name="rememberMe" value="true" />
      <input type="submit" value="Submit" style="visibility: hidden" />
    </form>
    </body>
    </html>

    <%
}
else if(customLogin!=null&&customLogin.equals("custom"))
{  
  response.sendRedirect(request.getParameter("customLoginPage")+"?service="+request.getParameter("service"));
%>
<%
}
else
{%>
<!-- The Orgin Source Code of casLoginView.jsp!!!!!!!!!!!!!!!!!!!!!!!!! -->
<%}%>
```

7.  确保您可以使用 caslogin.jsp 登录 cas。
8.  将自己登录页面的内容放到 caslogin.jsp 中。
9.  现在您可以使用自己的 caslogin.jsp 登录 cas

我还制作了一个关于如何使用客户端自定义登录屏幕而不是服务器登录屏幕登录 cas 的示例。[您可以在https://github.com/yangminxing/cas-custom-login-page](https://github.com/yangminxing/cas-custom-login-page)上下载它

# html - svg元素背景图片和bg颜色

> ID：10476950
> 
> 赞同：1
> 
> 时间：2012-05-07T05:09:42.127
> 
> 标签：html, svg, jquery-svg

我的应用程序中有一个 SVG，上面有一个圆圈。我必须为该元素分配背景图像（ png ）+背景颜色+罢工。我得到了如下代码，用于为该元素制作 bg 图像。请帮我如何分配背景颜色+图像

```
<svg xmlns="http://www.w3.org/2000/svg" width="900" height="500"  id="holder"> 

    <defs>
    <pattern id="img1" patternUnits="userSpaceOnUse" width="40" height="40"  >
        <image xlink:href="test.png" x="0" y="0" width="40" height="40"  />
    </pattern>

</defs>

    <circle cx="700" cy="200" r="20" fill="url(#img1)" id="goal" class="goal" z-index="1500" fill-opacity="1" >
 </circle>

 </svg> 
```

提前致谢

# php - 如何在 PHP 中的对象中存储对象数组？

> ID：10476952
> 
> 赞同：0
> 
> 时间：2012-05-07T05:10:10.397
> 
> 标签：php

我希望我的对象的一个​​属性是另一种对象的数组。

我如何表示这个（即 public $someObjectArray;）

向该属性添加条目的语法是什么？

引用该对象的语法是什么？

提供一些（希望）有用的上下文。

让我们假设该对象是具有某些属性的属性，其中一个是许多租户，他们将拥有自己的属性，如姓名、年龄等......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:13:30.830

```
class Tenant {
    // properties, methods, etc
}

class Property {
    private $tenants = array();

    public function getTenants() {
        return $this->tenants;
    }

    public function addTenant(Tenant $tenant) {
        $this->tenants[] = $tenant;
    }
} 
```

如果租户模型具有某种可识别的属性（id、唯一名称等），您可以将其考虑在内以提供更好的访问器方法，例如

```
class Tenant {
    private $id;

    public function getId() {
        return $this->id;
    }
}

class Property {
    private $tenants = array();

    public function getTenants() {
        return $this->tenants;
    }

    public function addTenant(Tenant $tenant) {
        $this->tenants[$tenant->getId()] = $tenant;
    }

    public function hasTenant($id) {
        return array_key_exists($id, $this->tenants);
    }

    public function getTenant($id) {
        if ($this->hasTenant($id)) {
            return $this->tenants[$id];
        }
        return null; // or throw an Exception
    }
} 
```

# database-design - 什么是最好的方法：实体有这么多的属性

> ID：10476954
> 
> 赞同：-1
> 
> 时间：2012-05-07T05:10:18.820
> 
> 标签：database-design, entity

我有一个拥有这么多属性的实体，客户想稍后添加更多属性，也可能删除一些属性，他可以随时添加或删除

所以我做了这个 ![我做了什么](../Images/b74a41d5fbc19e3bde179f338384ba2e.png)

但现在当我需要添加或删除时，我需要更改 3 个表并添加约束

*   我知道这不是一个好的解决方案，但不知道该怎么做

你会如何解决这个问题？

*   笔记：

*   属性超过 40，可能是以太数字或字符串

*   我可能不会经常删除属性

编辑：关于attributeValues 我忘了提到的一点是我需要选择已经插入的旧值或添加新值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:14:38.603

> 现在当我需要添加或删除时，我需要更改 3 个表并添加约束

是的。[这是实体属性值](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)设计的缺陷之一。实际上; 这是较小的陷阱之一；等到您必须编写一些报告或运行复杂的查询。

但是，如果这是客户想要的...

通常，EAV 设计仅适用于可能的属性值数量较多而实际值数量较少的情况。典型的例子是医疗病人记录，病人可能出现的症状数量非常多，但实际症状的数量可能相对较少。

请注意，您设计中最左边的表格是错误的；`attribute1`而不是像,之类的字段，`attribute2`在最左边的表和中间的表之间应该有一个链接表，创建一个多对多的关系。

# perl - 在同一个 perl 程序中读取 2 个或多个 excel 工作表

> ID：10476957
> 
> 赞同：0
> 
> 时间：2012-05-07T05:10:47.597
> 
> 标签：perl, worksheet

我正在尝试在单个 perl 程序中读取 2 个 excel 表。

像这样 -->

```
#!/usr/bin/perl -w

use strict;
use IO::File;
use IO::Seekable;
use Spreadsheet::ParseExcel;

my $parser = Spreadsheet::ParseExcel->new();
my $workbook = $parser->Parse('FILE1.xls');
my $worksheet1 = $workbook->worksheet('Worksheet_name1');

my $workbookB  = $parser->Parse('FILE2.xls');
my $worksheetB = $workbookB->worksheet('Worksheet_name2'); 
```

但是，我面临这个错误 - 无法在 ./PERL_PROGRAM.pl 的未定义值上调用方法“工作表”

有人可以给我一些指示.. 谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:29:41.107

如果方法失败，则该`parse`方法返回`undef`，而您无需检查。（这就是你得到`Can't call method "worksheet" on an undefined value`. 的原因。）另外，它是`parse`，不是`Parse`（Perl 区分大小写）。尝试这个：

```
#!/usr/bin/perl

use strict;
use warnings;
use Spreadsheet::ParseExcel;

my $parser = Spreadsheet::ParseExcel->new();
my $workbook = $parser->parse('FILE1.xls') or die $parser->error;
my $worksheet1 = $workbook->worksheet('Worksheet_name1')
                 or die "Worksheet_name1 doesn't exist";

my $workbookB  = $parser->parse('FILE2.xls') or die $parser->error;
my $worksheetB = $workbookB->worksheet('Worksheet_name2')
                 or die "Worksheet_name2 doesn't exist"; 
```

# c# - 在 Razor 视图中设置 javascript 对象时遇到问题

> ID：10476959
> 
> 赞同：1
> 
> 时间：2012-05-07T05:11:03.670
> 
> 标签：c#, javascript, asp.net-mvc-3, razor

我试图在我的主视图中设置一个 JavaScript 对象：

```
<script type="text/javascript">
   xx.yy.zz = 
   {
     a: @Model.Id,
     b: '@Model.Name',
     c: @Html.Raw(Model.JsonFeature)
   }
</script> 
```

> 属性“a”是一个 int。
> 
> 属性“b”是一个字符串。
> 
> 属性“c”也是服务器端的一个字符串，但它实际上是一个 JSON 编码的字符串，因此我使用了@Html.Raw。

但问题是该字段可能为空，所以我正在尝试做这样的事情：

```
<script type="text/javascript">
   xx.yy.zz = 
   {
     a: @Model.Id,
     b: '@Model.Name',
     c: @(Model.JsonFeature != null ? Html.Raw(Model.MappingViewModel.JsonFeature) : null)
   }
</script> 
```

它会导致各种问题，例如呈现：

```
<script type="text/javascript">
   xx.yy.zz = 
   {
     a: 1,
     b: 'Foo',
     c: 
   }
</script> 
```

所以它用“Unexpected token }”（可以理解）破解它。

如何使用 Razor C# 条件将 javascript 属性设置为字符串值或为空？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T06:09:15.313

试试这样：

```
<script type="text/javascript">
    xx.yy.zz = @Html.Raw(Json.Encode(new {
        a = Model.Id,
        b = Model.Name,
        c = Model.JsonFeature != null && !string.IsNullOrEmpty(Model.MappingViewModel.JsonFeature)
            ? Json.Decode(Model.MappingViewModel.JsonFeature)
            : (string)null
    }));
</script> 
```

# c++ - C++：由于虚拟性导致的内存开销？

> ID：10476965
> 
> 赞同：0
> 
> 时间：2012-05-07T05:12:24.340
> 
> 标签：c++, memory, inheritance

> **可能重复：**
> [C++ 虚函数表内存开销](https://stackoverflow.com/questions/1626290/c-virtual-function-table-memory-cost)

我刚刚读过：http: [//www.parashift.com/c++-faq-lite/virtual-functions.html](http://www.parashift.com/c++-faq-lite/virtual-functions.html)，我想知道由于虚拟性导致的内存开销是多少。我目前正在为超级计算机编写优化代码，我必须在可读代码和内存消耗之间找到良好的平衡。

为了了解它是如何工作的，以下类的内存开销是多少：

```
class AbstractA {/* SOMETHING */};
class AbstractB {/* SOMETHING */};
class A : public AbstractA {/* SOMETHING */};
class B : public AbstractB {/* SOMETHING */};
class A2 : public A {/* SOMETHING */};
class B2 : public B {/* SOMETHING */};
class AbstractAB : public AbstractA, public AbstractB {/* SOMETHING */};
class AbstractAB2 : public AbstractAB {/* SOMETHING */}; 
```

假设我每个类有十亿个对象，我不得不担心非静态内存消耗。那么每种对象类型的费用是多少？（如果 AbstractA 的每个虚拟方法都会为每个“A”类型的对象创建一个指针，我死了......）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T05:29:40.103

您可能想查看 Scott Meyer 的《[更有效的 C++](http://my.safaribooksonline.com/9780321545190) 》的第 24 条。它的标题是“了解虚函数、多重继承、虚基类和 RTTI 的成本”。在这个项目中，迈耶斯讨论了使用这些设施所涉及的开销。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T05:38:35.533

它是实现定义的，但几乎每个实现都会使用：

*   每个多态对象 1 个指针（称为“vptr”）
*   每个多态类有 1 个函数指针和其他 RTTI 信息（称为“vtable”）的静态表。

您可以使用`sizeof`来检查每个对象的成本，并且每个类的成本可能可以忽略不计，除非您定义了大量的类。

# php - 单张图片到多张图片上传

> ID：10476967
> 
> 赞同：0
> 
> 时间：2012-05-07T05:12:35.100
> 
> 标签：php, mysql, image, file-upload

我有以下脚本，可以将图像和缩略图上传到目录并将 img 名称（img 和 thumb）存储到数据库中。

我最初在谷歌搜索时在网络上的某个地方找到了这个脚本，但是现在我需要能够上传不止一张图片......它适用于一张图片。

```
<?php 
//error_reporting(0);

$change="";
$abc="";

 define ("MAX_SIZE","400");
 function getExtension($str) {
         $i = strrpos($str,".");
         if (!$i) { return ""; }
         $l = strlen($str) - $i;
         $ext = substr($str,$i+1,$l);
         return $ext;
 }

 $errors=0;

 if($_SERVER["REQUEST_METHOD"] == "POST")
 {
    $image =$_FILES["file"]["name"];
    $uploadedfile = $_FILES['file']['tmp_name'];

    if ($image) 
    {

        $filename = stripslashes($_FILES['file']['name']);

        $extension = getExtension($filename);
        $extension = strtolower($extension);

 if (($extension != "jpg") && ($extension != "jpeg") && ($extension != "png") && ($extension != "gif")) 
        {

            $change='<div class="msgdiv">Unknown Image extension </div> ';
            $errors=1;
        }
        else
        {

 $size=filesize($_FILES['file']['tmp_name']);

if ($size > MAX_SIZE*1024)
{
    $change='<div class="msgdiv">You have exceeded the size limit!</div> ';
    $errors=1;
}

if($extension=="jpg" || $extension=="jpeg" )
{
$uploadedfile = $_FILES['file']['tmp_name'];
$src = imagecreatefromjpeg($uploadedfile);

}
else if($extension=="png")
{
$uploadedfile = $_FILES['file']['tmp_name'];
$src = imagecreatefrompng($uploadedfile);

}
else 
{
$src = imagecreatefromgif($uploadedfile);
}

echo $scr;

list($width,$height)=getimagesize($uploadedfile);

$newwidth=60;
$newheight=($height/$width)*$newwidth;
$tmp=imagecreatetruecolor($newwidth,$newheight);

$newwidth1=25;
$newheight1=($height/$width)*$newwidth1;
$tmp1=imagecreatetruecolor($newwidth1,$newheight1);

imagecopyresampled($tmp,$src,0,0,0,0,$newwidth,$newheight,$width,$height);

imagecopyresampled($tmp1,$src,0,0,0,0,$newwidth1,$newheight1,$width,$height);

$filename = "images/". $_FILES['file']['name'];

$filename1 = "images/small". $_FILES['file']['name'];

imagejpeg($tmp,$filename,100);

imagejpeg($tmp1,$filename1,100);

imagedestroy($src);
imagedestroy($tmp);
imagedestroy($tmp1);
}}

}

//If no errors registred, print the success message
 if(isset($_POST['Submit']) && !$errors) 
 {

    mysql_query("INSERT INTO `imgs` (`id` ,`user_id` ,`img_name`) VALUES (NULL ,  '$userID',  'img1.jpg');");
    $change=' <div class="msgdiv">Image Uploaded Successfully!</div>';
 }

?>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en"><head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="en-us" http-equiv="Content-Language">
  </head><body>
<?php echo $change; ?> 

              <div id="posts">
              <form method="post" action="" enctype="multipart/form-data" name="form1">
              <input size="25" name="file" type="file" style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size:10pt" class="box"/>
              <input type="submit" id="mybut" value="Upload" name="Submit"/>
              </form>
              </div>
</body></html> 
```

对于多个图像，我知道我可以将 html 部分更改为 foreach 循环，例如：

```
<form method="post" action="" enctype="multipart/form-data" name="form1">
            <?php
$allow_upload = 10; 
for($i=0; $i<$allow_upload; $i++) { 
            echo '<input size="25" name="file[]" type="file" style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size:10pt" class="box"/>'; 
        }
?>          
<input type="submit" id="mybut" value="Upload" name="Submit"/>
</form> 
```

但我无法弄清楚如何以及在何处放置 foreach 循环，并将其余部分调整为多个图像。

我的数据库设置将类似于 id、userID、big img、small img。任何帮助将不胜感激，我准备开始拔头发了！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T05:20:25.147

如果你想循环多个文件输入元素，那么你需要告诉它是一个数组，除非你对每个输入元素都有不同的名称。

```
for($i=0; $i<$allow_upload; $i++) { 
    echo '<input size="25" name="file[]" type="file"'/>; 
} 
```

如果你想从一个输入元素中选择多个文件，那么

```
<input name="filesToUpload[]" type="file" multiple/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:11:01.447

您可以使用单个输入文件并将所有文件保存在数组中，而不是多个输入文件，然后使用 foreach 将每个文件保存到文件夹中。

```
<?php
if($_SERVER["REQUEST_METHOD"] == "POST") {

foreach($_FILES['allimages'] as $files) {
var_dump($files);
    }
}

?>

<form id="fileupload" enctype="multipart/form-data" method="post">
<input type="file" name="allimages[]" id="allimages" multiple><!--Use CTRL key to upload multiple images -->
<input type="submit" name="submit" id="submit">
</form> 
```

您需要按住 cntrl 键来上传多个文件。

# flash - Adobe Air：为什么 SQLStatement 的 getResult().data 为空？

> ID：10476968
> 
> 赞同：0
> 
> 时间：2012-05-07T05:12:44.683
> 
> 标签：flash, apache-flex, sqlite, air, flash-builder

使用 Flash Builder 4.6，我以~~[http://www.flex-blog.com/adobe-air-sqlite-example](http://www.flex-blog.com/adobe-air-sqlite-example)~~ *（编辑：链接似乎已损坏）*为例，并且有一部分代码没有工作：

```
private function resault(e:SQLEvent):void
{
    // with sqls.getResault().data we get the array of objects for each row out of our database
    var data:Array = sqls.getResult().data;
    // we pass the array of objects to our data provider to fill the datagrid
    dp = new ArrayCollection(data);
} 
```

在运行时检查程序让我知道 sqls.getResult() 返回一个有效的 SQLResult 对象，但它的数据为空。

从我之前的问题[Adob​​e Air: convert sqlite's result [object Object] to String?](https://stackoverflow.com/q/10471187/144201) ，看来我问错了问题。

不过，我已经检查了我的 SQLResult 对象

```
trace(ObjectUtil.toString(sqls.getResult())); 
```

我可以看到我从 sqlite 获得了所有内容：

```
(flash.data::SQLResult)#0
  complete = true
  data = (Array)#1
    [0] (Object)#2
      first_name = "AAA"
      id = 1
      last_name = "BBB"
    [1] (Object)#3
      first_name = "AAA"
      id = 2
      last_name = "BBB"
    [2] (Object)#4
      first_name = "qqq"
      id = 3
      last_name = "qqq"
  lastInsertRowID = 0
  rowsAffected = 0 
```

那么这里发生了什么？我真的必须创建自己的函数来解析我所有的 sqlite 元素，然后自己将它们放在数据提供者中吗？是的，我可以这样做，但说真的，许多教程都显示使用：

```
var data:Array = sqls.getResult().data;
dp = new ArrayCollection(data); 
```

现在，回到这个问题：sqls.getResult().data 变为空的可能原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T09:11:37.917

这看起来不像是一个很好的教程（在我看来）。在该代码中，您为所有正在执行的语句提供了一个事件侦听器。它甚至只有一个执行不同查询的 SQLStatement。我不确切知道您的代码出了什么问题，但我相当确定原因可以在那里找到。（甚至不要让我开始谈论当语句仍在执行时用作延迟的 Timer。呸！）。我强烈建议您寻找更好的资源来学习 Flex/AIR/SQLite。

您应该简单地创建一个新的 SQLStatement，或者至少为每个 Statement 执行创建离散的事件处理程序。更好的方法是使用[Responder](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/Responder.html)类，如下所示：

```
var stmt:SQLStatement = new SQLStatement();
stmt.sqlConnection = connection;
stmt.text = query;

var token:Responder = new Responder(onResult, onFail);
stmt.execute(-1, token); 
```

但是，如果您不介意始终保持与数据库的连接打开，则可以共享 SQLConnection。

# php - PHP使用数组值将数组分成两个数组

> ID：10476969
> 
> 赞同：0
> 
> 时间：2012-05-07T05:13:03.827
> 
> 标签：php, arrays, search, split

我有一个如下的 PHP 数组：

```
 Array
    (
        [0] => 16
        [1] => 17
        [2] => 18
        [3] => 23
        [4] => 7
        [5] => 6
        [6] => 14
        [7] => 22
    ) 
```

我需要两个将这个数组分成两个数组，每个数组由 23 个值组成，如下所示：

```
 Array
    (
        [0] => 16
        [1] => 17
        [2] => 18
    )

 Array(
        [0] => 23
        [1] => 7
        [2] => 6
        [3] => 14
        [4] => 22
    ) 
```

任何人都可以知道如何用 PHP 做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T05:16:02.207

下面`23`代码中的 是硬编码的，只有在源数组中找到值时才会拆分原始`23`数组：

```
$arr = array(16, 17, 18, 23, 7, 6, 14, 22);
$split_by = array_search(23, $arr);

if ($split_by) {
    $first = array_slice($arr, 0, $split_by);
    $second = array_slice($arr, $split_by);

    var_dump($first, $second);
} 
```

[http://ideone.com/BPn7t](http://ideone.com/BPn7t)

或者

```
$arr = array(16, 17, 18, 23, 7, 6, 14, 22);
$split_by = array_search(23, $arr);

if ($split_by) {
    $first = array_slice($arr, 0, $split_by + 1);
    $second = array_slice($arr, $split_by + 1);

    var_dump($first, $second);
} 
```

如果您需要将找到的值留在第一个数组中

# android - 在Android中将两个数组插入ListView

> ID：10476980
> 
> 赞同：0
> 
> 时间：2012-05-07T05:13:50.410
> 
> 标签：android

我有两个数组

```
arr1:
1 2 3 4 5 6

arr2:
a b c d e f 
```

我有具有 TextView1 和 TextView2 的自定义 ListView

如何将两个数组绑定到自定义 ListView 中？

```
TextView1  |  TextView2
-----------------------
     1     |      a
     2     |      b
     3     |      c
     4     |      d
     5     |      e
     6     |      f 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T05:19:15.600

使用包含两个字符串的自定义对象数组代替两个字符串数组。并制作一个`custom adapter`并将其设置为您的`listview`. 还为**两列 listview**制作一个`Listitem`with two 。并在您的自定义适配器的.`textview`**`getView()`**

 **看这个教程[Android - Multi Column ListView](http://www.technotalkative.com/android-multi-column-listview/)

[Android – 多列 ListView](http://sochinda.wordpress.com/2012/02/06/android-multi-column-listview/)**

# android - 如何使页脚可单击并在其上设置侦听器？

> ID：10476982
> 
> 赞同：2
> 
> 时间：2012-05-07T05:14:30.413
> 
> 标签：android, listview, footer

这是活动

```
private View footer;
private Button btnmore;

linear = (LinearLayout) findViewById(R.id.layout_content);
    linear.setVisibility(View.VISIBLE);

    LayoutInflater liInflater = (LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    linear.addView(liInflater.inflate(R.layout.main_particularcategoryallnewslist, null));
linear.addView(liInflater.inflate(R.layout.main_particularcategoryallnewslistfv, null));
    footer = (View)getLayoutInflater().inflate(R.layout.main_particularcategoryallnewslistfv, null);
btnmore = (Button)findViewById(R.id.btn_more); 

ListView lv = (ListView) findViewById(android.R.id.list);
SimpleAdapter adapter = new SimpleAdapter(this, fillMaps,
            R.layout.main_particularcategoryallnewslist, from, to);
    lv.addFooterView(footer); <-- how to set footer being clickable?
    lv.setAdapter(adapter); 
```

在页脚中，我有一个按钮，但我在它上面设置了侦听器也没有响应，我认为页脚必须启用才能单击，然后才能单击按钮。

```
lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            Intent intent = new Intent(Main_ParticularCategoryAllNews.this,
                    Main_ParticularNewsDetail.class);
            bundle = new Bundle();
            bundle.putInt("newsid", newsid[arg2]);
            intent.putExtras(bundle);
            startActivity(intent);
        }
    });

    btnmore.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {
            if (isOnline() == true) {
                linear2.setVisibility(View.VISIBLE);
                AlphaAnimation alpha = new AlphaAnimation(0.5F, 0.5F);
                alpha.setDuration(15);
                alpha.setFillAfter(true);
                linear.startAnimation(alpha);
                btnrefresh.setVisibility(View.INVISIBLE);
                webservice.UpdateMoreCatNews(catnewsid);
                int secondsDelayed = 3;
                new Handler().postDelayed(new Runnable() {
                    public void run() {
                        startActivity(new Intent(Main_ParticularCategoryAllNews.this,
                                Main_AllLatestNews.class));
                        finish();
                    }
                }, secondsDelayed * 1000);
            } else {
                toast = Toast
                        .makeText(
                                Main_ParticularCategoryAllNews.this,
                                "Your device is not connect to internet, fail to update news!",
                                Toast.LENGTH_SHORT);
                toast.setGravity(Gravity.CENTER_VERTICAL
                        | Gravity.CENTER_HORIZONTAL, 0, 0);
                toast.show();
            }
        }
    }); 
```

点击页脚时如何设置监听器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T14:09:31.887

列表视图和按钮正在争夺焦点，而列表视图正在获胜。

在页脚上设置以下内容。`false`告诉页脚它是不可选择的：

```
 mylistView.addFooterView(footerView, null, **false**); 
```

或者，您可以使用`OnClickListener`FireDevil 在此处建议的方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-04T20:59:16.387

有一种更简单的解决方案：

只需将 a 设置`OnClickListener`为应用`View`：

```
View view = inflater.inflate(R.layout.xxx, null);
    view.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {
            //do something
        }
    }); 
```

解决它的非常简单的事情！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T06:44:23.193

我建议您使用以下提示：

1.  制作一个相对布局作为你的根布局
2.  将您的页脚布局和您的 ListView 放在上面
3.  在您的 ListView 中添加此属性：

    ```
    android:layout_above="@id/your_footer_layout_id" 
    ```

有关更多详细信息，请参阅[此](http://blog.blundell-apps.com/listviewwithfooter/)链接。您可以通过以下`onClick`方法检查视图是否被单击：

```
@Override
public void onClick(View v) {

    switch(v.getId()){

    case R.id.my_footer: 
        Toast.makeText(getContext(), "footer clicked",Toast.LENGTH_LONG).show();
        break;

    case R.id.my_header: 
        Toast.makeText(getContext(), "header clicked", Toast.LENGTH_LONG).show();
        break;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T05:45:37.590

将页脚视图的根更改为使用`<merge />`而不是`LinearLayout`. `View`a in a的父级`ListView`必须是 类型`AbsListView`。然后，在代码中，你会像这样膨胀你的页脚`View`：

```
liInflater.inflate(R.layout.main_particularcategoryallnewslistfv, lv, false); 
```

**编辑**

该`<merge />`部分可能是不必要的。尝试首先将通货膨胀方法更改为上述方法。

# networking - 内部应用程序的最佳 TCP 端口号范围

> ID：10476987
> 
> 赞同：115
> 
> 时间：2012-05-07T05:15:24.577
> 
> 标签：networking, tomcat

我在一个地方工作，我们的每个内部应用程序都在一个单独的 Tomcat 实例上运行并使用特定的 TCP 端口。**为了避免端口号与服务器上的任何其他进程发生冲突，这些应用程序使用的最佳 IANA 端口范围是什么？**

基于[http://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xml](http://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xml)，这些是我目前看到的选项：

1.  系统端口（0-1023）：我不想使用这些端口中的任何一个，因为服务器可能正在此范围内的标准端口上运行服务
2.  用户端口 (1024-49151)：鉴于应用程序是内部应用程序，我不打算要求 IANA 为我们的任何应用程序保留一个号码。但是，我想减少另一个进程使用同一端口的可能性，例如 1521 上的 Oracle Net Listener。
3.  动态和/或专用端口 (49152-65535)：此范围非常适合自定义端口号。我唯一担心的是如果发生这种情况：

    > 一种。我将我的一个应用程序配置为使用端口 X
    > b。应用程序关闭了几分钟或几小时（取决于应用程序的性质），使端口有一段时间未使用，
    > c。操作系统将端口号 X 分配给另一个进程，例如，当该进程充当需要与另一个服务器建立 TCP 连接的客户端时。假设它在动态范围内并且就操作系统而言当前未使用X，并且
    > d。应用程序无法启动，因为端口 X 已在使用中

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2015-02-06T16:04:09.813

我决定从 IANA 下载分配的端口号，过滤掉已使用的端口，然后按可用端口最多的降序对每个“未分配”范围进行排序。 ***这不起作用，因为 csv 文件的范围标记为“未分配”，与其他端口号保留重叠。****我手动扩展了分配*端口号 的范围，给我留下了所有分配端口号的列表。然后我对该列表进行排序并生成我自己的未分配范围列表。

由于这个 stackoverflow.com 页面在我对该主题的搜索中排名很高，我想我会在这里为任何感兴趣的人发布最大范围。这些适用于范围内端口数至少为 500 的 TCP 和 UDP。

```
Total   Start   End
829     29170   29998
815     38866   39680
710     41798   42507
681     43442   44122
661     46337   46997
643     35358   36000
609     36866   37474
596     38204   38799
592     33657   34248
571     30261   30831
563     41231   41793
542     21011   21552
528     28590   29117
521     14415   14935
510     26490   26999 
```

来源（通过 CSV 下载按钮）：

[http://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml](http://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-05-07T05:30:06.330

我不明白你为什么会在意。除了“不要使用低于 1024 的端口”特权规则之外，您应该能够使用任何端口，因为*您的客户端应该可以配置为与任何 IP 地址和端口通信！*

如果他们不是，那么他们还没有做得很好。回去并正确地做它们:-)

换句话说，在 IP 地址`X`和端口上运行服务器，`Y`然后使用该信息配置客户端。然后，如果您发现*必须*`X`在与您的冲突的服务器上运行不同的服务器`Y`，只需重新配置您的服务器和客户端以使用新端口。无论您的客户是代码还是在浏览器中键入 URL 的人，这都是正确的。

我和您一样，不会尝试获取 IANA 分配的号码，因为这应该是针对如此普遍的服务，以至于*许多*环境都会使用它们（想想 SSH 或 FTP 或 TELNET）。

你的网络就是*你的*网络，如果你想让你的服务器在端口 1234（或者甚至是 TELNET 或 FTP 端口）上，那是你的事。例如，在我们的大型机开发领域，3270 终端服务器使用端口 23，这与 telnet 完全不同。如果您想远程登录到大型机的 UNIX 端，请使用端口 1023。如果您使用 telnet 客户端而不指定端口 1023，这有时会很烦人，因为它会将您连接到对 telnet 协议一无所知的服务器 - 我们必须打破退出 telnet 客户端并正确执行：

```
telnet big_honking_mainframe_box.com 1023 
```

如果您确实*无法*使客户端可配置，请在第二个范围内选择一个，例如 48042，然后使用它，并声明这些盒子上的任何其他软件（包括将来添加的任何软件）都必须远离您.

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-01-23T16:24:23.033

简短回答：使用未分配的用户端口

超过成就者的答案 - 选择并部署资源发现解决方案。让服务器动态选择专用端口。让客户端使用资源发现。

服务器因为它想要监听的端口不可用而失败的风险是真实的；至少它发生在我身上。另一个服务或客户端可能会先到达那里。

通过避免动态分配给客户端的私有端口，您几乎可以完全降低来自客户端的风险。

如果您使用用户端口，则来自其他服务的风险很小。未分配端口的风险只是另一个服务恰好被配置（或动态）使用该端口。但至少这可能在你的控制之下。

包含所有端口分配（包括用户端口）的巨大文档在这里：[http](http://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.txt) ://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.txt查找未分配的令牌.

# javascript - 添加自定义属性以更好地分离 JavaScript 和 HTML

> ID：10476988
> 
> 赞同：1
> 
> 时间：2012-05-07T05:15:32.903
> 
> 标签：javascript, jquery, backbone.js

使用 jQuery 和backbone.js，我想尽可能地将JavaScript 与HTML 分开。
是否可以`custom attribute`在 JavaScript 和 HTML 之间添加一个更好的分离？那么我该如何使用新的 jQuery 选择器呢？

例子：

```
<input type="text" id="todo-input" class="todo-input" tid="tid-attribute" > hello world </input>

// The DOM events
// I would like to use another selector tid and not class or id
events: {
  "keypress #todo-input" : "updateOnEnter" // I would like to use another selector tid not id,
  "keypress .todo-input" : "updateOnEnter" // I would like to use another selector tid and not class
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T05:21:03.763

HTML5 允许使用以下开头的自定义数据属性`data-`：

```
<input type="text" data-custom-attr="somevalue"> 
```

然后在您的主干事件声明中：

```
"keypress [data-custom-attr='somevalue']" : "updateOnEnter" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T05:17:50.550

您可以使用：

```
$('input[type="text"]').attr('tid', 'tid-attribute'); 
```

或者

```
$('input[type="text"]').attr('data-tid', 'tid-attribute'); 
```

# linux-device-driver - .o 和 .ko 文件之间的区别

> ID：10476990
> 
> 赞同：58
> 
> 时间：2012-05-07T05:16:00.113
> 
> 标签：linux-device-driver

我正在编写简单的 Linux 模块 mod.c。当我编译 mod.c 文件时，它会创建两个输出文件**mod.o**和**mod.ko**。所以我只想知道，mod.o 和 mod.ko 文件有什么区别？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-07T05:31:04.800

简短的回答是**.ko**文件是与内核需要的一些内核自动生成的数据结构链接的目标文件。

**.o**文件是模块的目标文件 - 编译 C 文件的结果。然后，内核构建系统会自动创建另一个 C 文件，其中包含一些描述内核模块的数据结构（名为 your_module_kmod.c），将此 C 文件编译为另一个目标文件，并将您的目标文件和它构建的目标文件链接在一起以创建**.ko**文件。

内核中负责加载内核模块的动态链接器希望找到内核放在**.ko**文件中的 kmod 对象中的数据结构，如果没有它们，将无法加载您的内核模块。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-07T16:59:44.013

> 在 Linux 2.6 之前，用户空间程序将解释 ELF 对象 (.o) 文件并完成将其链接到正在运行的内核的所有工作，生成完成的二进制映像。程序会将该映像传递给内核，内核只会将其保存在内存中。在 Linux 2.6 中，内核进行链接。用户空间程序将 ELF 目标文件的内容直接传递给内核。为此，ELF 对象图像必须包含附加信息。为了识别这种特殊类型的 ELF 对象文件，我们将文件命名为后缀为“.ko”（“内核对象”）而不是“.o”。例如，Linux 2.4 中的串行设备驱动程序位于文件 serial.o 中在 Linux 2.6 中，位于文件 serial.ko 中。

来自[http://tldp.org/HOWTO/Module-HOWTO/linuxversions.html](http://tldp.org/HOWTO/Module-HOWTO/linuxversions.html)。

# mysql - 查询中的Mysql“IF”

> ID：10476995
> 
> 赞同：1
> 
> 时间：2012-05-07T05:16:38.597
> 
> 标签：mysql, if-statement

我有几张桌子

```
table201202
table201203
table201204
table201205  
...
tableversion 
```

在`tableversion`我有列： Version_ID Admin_ID MONTH YEAR

我需要得到这样的东西

```
Select *
FROM tableversion
LEFT JOIN table(tableversion.month tableversion.year) on
    table(tableversion.month tableversion.year).Version_ID=tableversion.version_id 
```

但是在tableversion中我有几个月没有前导0所以我必须检查是否有5然后将其更改为05，如果变量为12则什么都没有。我该怎么做？

好的，所以现在我有这样的东西

```
SELECT *, CONCAT('table',IF(tableversion.month < 10, CONCAT('0', tableversion.month ), tableversion.month ),year) as year
FROM tableversion
LEFT JOIN year ON tableversion.version_id=year.version_id WHERE ADMIN_ID=11

#1146 - Table 'database.year' doesn't exist 
```

但它不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T05:22:02.277

[如此处](https://stackoverflow.com/q/4595083/13860)所示，使用 LPAD：

> 选择 LPAD(月,2,'0') ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T05:19:55.383

在您担心比较月份的区域尝试此操作

```
IF(tableversion.month < 10, CONCAT('0', tableversion.month), tableversion.month) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T05:22:41.687

我认为`IF`声明可能会表现不佳，但我没有数据支持这种说法。

您可以尝试使用 IF 语句的这种替代方法来实现相同的效果： `SELECT *, LPAD(month, 2, '0') as month2 ....`