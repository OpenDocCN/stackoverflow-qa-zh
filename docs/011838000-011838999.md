# StackOverflow 问答 11838000-11838999

# php - 如何在php中实现电子邮件发布系统

> ID：11838005
> 
> 赞同：3
> 
> 时间：2012-08-07T01:07:19.293
> 
> 标签：php, email, blogs

我想知道如何在 php 中设置一个可以发送电子邮件的系统，电子邮件内容将作为新帖子在我的博客上发布，电子邮件主题将是新帖子的标题。

我没有使用 word press 或任何这些博客平台，我正在运行我自己的博客脚本和 php 5.x 版本。

我什至不知道如何开始这种编程挑战，欢迎任何有想法的人。

乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T01:23:54.873

您需要创建一个能够从您的电子邮件帐户读取的脚本。Php 具有[IMAP 库](http://www.php.net/manual/en/intro.imap.php)，可让您阅读电子邮件。[检查此链接](http://garrettstjohn.com/entry/reading-emails-with-php/)以了解如何使用该库。

您需要安排脚本以周期性的时间间隔运行（例如每 5 分钟）。在 Linux 中，您将设置一个 cron 作业来执行此操作。所以，我的意思是应该定期调用脚本。如果它发现一条新消息，它将通过获取电子邮件的正文来更新您的博客。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T01:32:22.140

您需要建立一个数据库，其中包含所有必要的表和行，以保存有关人们将通过电子邮件发送的帖子的所有重要信息。然后在您的 PHP 文件中使用 MYSQL，您需要连接到数据库（主机、用户名和密码），然后创建自己的查询以将所需的数据输入数据库。

# c# - 通过动作过滤器属性将实体自动映射到模型？

> ID：11838010
> 
> 赞同：2
> 
> 时间：2012-08-07T01:08:22.930
> 
> 标签：c#, asp.net-mvc-3, automapper

在**[这篇文章中](http://lostechies.com/jimmybogard/2009/06/30/how-we-do-mvc-view-models/)**，[Jimmy Bogard](https://stackoverflow.com/users/58508/jimmy-bogard)继续解释了他在做 MVC 时支持的一些最佳实践。

总体而言，这篇文章非常好，我发现他的建议（在其他博客文章中）总体上非常可靠。但是，他建议使用属性将实体映射到模型。

这怎么样

```
[AutoMap(typeof(Product), typeof(ShowProduct))]
public ActionResult Details(int id)
{
    var product = _productRepository.GetById(id);
    return View(product);
} 
```

比这更好（在我看来，这对于这段代码的实际意图更具声明性

```
public ActionResult Details(int id)
{
    var product = _productRepository.GetById(id);
    var model = Mapper.Map<Product, ShowProduct>(product);
    return View(model);
} 
```

除了这一点之外，似乎在某些情况下这是不切实际的，例如操作方法根据输入返回不同的模型，或者甚至更简单的情况，例如：

```
 [HttpGet]
    public ActionResult Index()
    {
        return List();
    }

    public ActionResult Until(long id) // "id" is the timestamp
    {
        return List(id);
    }

    [NonAction]
    internal ActionResult List(long? timestamp = null, int count = 8)
    {
        IEnumerable<Post> posts = postService.GetLatest(timestamp, count);
        PostListModel model = mapper.Map<IEnumerable<Post>, PostListModel>(posts);
        return ContextView("List", model);
    } 
```

这实际上是一种好的做法，还是只是不合理的，对本来就很简单的代码进行无根据的混淆？

我问是出于无知，而不是对我认为很棒的博主进行人身攻击，而且我已经喜欢 AutoMapper。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-02T18:03:10.973

我正在对这个主题进行搜索，并且还看到了 Los Techies 的帖子。我的下一次搜索导致 AutoMapper-users 组中的这篇[Google Groups 文章](https://groups.google.com/forum/#!topic/automapper-users/M1JT-wGTqf4)。

看起来吉米已经放弃了这个指导：

> 不要使用动作过滤器。我们最初是自己走的那条路，但最终还是选择了自定义操作结果。自定义那些 over action 过滤器要容易一些，这使得提供自定义行为几乎是不可能的。
> 
> 高温下，
> 
> 吉米

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:44:19.743

我对此的想法是，将映射放在控制器动作上会更好，因为它可以让您隐藏实际映射实现的一些细节。您还可以获得额外的灵活性，以便稍后在一个文件中更改映射，而不是在 7+ 操作方法中更改此调用。这假定了一个纯粹的基本 CRUD 操作。可能有一些特殊的用例不起作用，在这些情况下做一些不同的事情对我来说很好。

那只是我的2美分。

# bash - 使用 shell 脚本编辑文本格式

> ID：11838016
> 
> 赞同：4
> 
> 时间：2012-08-07T01:08:58.767
> 
> 标签：bash, shell, command-line, command-line-interface, sh

我正在尝试制作一个用于文本编辑的脚本。在这种情况下，我有一个名为 text.csv 的文本文件，内容如下：

```
first;48548a;48954a,48594B
second;58757a;5875b
third;58756a;58576b;5867d;56894d;45864a 
```

我想让文本格式像这样：

```
first;48548a
first;48954a
first;48594B
second;58757a
second;5875b
third;58756a
third;58576b
third;5867d
third;56894d
third;45864a 
```

我应该使用什么命令来实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T01:22:40.590

我会在 awk 中执行此操作。

假设您的第一行应该有 a`;`而不是 a `,`：

```
$ awk -F\; '{for(n=2; n<=NF; n++) { printf("%s;%s\n",$1,$n); }}' input.txt 
```

未经测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T01:26:48.923

这是一个纯 bash 解决方案，可以同时处理`,`和`;`.

```
while IFS=';,' read -a data; do 
   id="${data[0]}"
   data=("${data[@]:1}")
   for item in "${data[@]}"; do 
      printf '%s;%s\n' "$id" "$item" 
   done
done < input.txt 
```

更新 - 基于 chepner 建议的替代打印方法：

```
while IFS=';,' read -a data; do 
   id="${data[0]}"
   data=("${data[@]:1}")
   printf "$id;%s\n" "${data[@]}" 
done < input.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T01:25:59.940

`awk -v FS=';' -v OFS=';' '{for (i = 2; i <= NF; ++i) { print $1, $i }}'` 说明： awk 隐式地将数据拆分为记录（默认情况下由换行符分隔，即行 == 记录），然后通过给定的字段分隔符（`FS`用于输入字段分隔符和`OFS`输出分隔符）将其拆分为编号字段。对于每条记录，此脚本会打印第一个字段（即记录名称）以及第 i 个字段，这正是您所需要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T04:18:22.737

```
while IFS=';,' read -a data; do 
   id="${data[0]}"
   data=("${data[@]:1}")
   printf "$id;%s\n" "${data[@]}" 
done < input.txt 
```

或者

```
awk -v FS=';' -v OFS=';' '{for (i = 2; i <= NF; ++i) { print $1, $i }}' 
```

和

```
$ awk -F\; '{for(n=2; n<=NF; n++) { printf("%s;%s\n",$1,$n); }}' input.txt 
```

谢谢大家的建议，:d。真是让我长知识了。。

# asp-classic - ASP今天辞职了吗？

> ID：11838018
> 
> 赞同：0
> 
> 时间：2012-08-07T01:09:12.753
> 
> 标签：asp-classic

突然在工作的 Windows 2003 服务器上 - ASP 刚刚启动并退出服务页面？

我有一个简单的 hello.asp 脚本，内容如下：http: [//www.icontrolwebstudio.com/hello.asp](http://www.icontrolwebstudio.com/hello.asp)

当我运行它时 - 我得到：

```
msxml3.dll error '80072efe'
The connection with the server was terminated abnormally
/LM/W3SVC/7/Root/global.asa, line 63* 
```

我还有一个 test.asp 页面，其中只有文本：

```
Test - Page is running. 
```

我得到同样的错误？

不知道这笔交易是什么，任何帮助将不胜感激？

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:24:07.263

最常见的问题是您的防病毒软件或防火墙干扰了连接，或者它也可能是由名称解析问题引起的，例如主机名解析为 127.0.0.1（通过本地）并且 Web 服务器仅绑定到公共 IP 地址.

# android - 如何用阿尔法绘画？

> ID：11838022
> 
> 赞同：22
> 
> 时间：2012-08-07T01:09:31.937
> 
> 标签：android

我想将图形绘制到 Canvas 上，以便颜色是相加的。例如，我想制作这个：
![适当的加色](../Images/fb6263009d55249dbceba6441aaf374d.png)

但相反，我得到了这个：
![我的结果](../Images/a63dd686fa54227371f44683abe424eb.png)

请注意，半白半黑的背景是有意的，只是为了看看 alpha 如何与两种背景相互作用。我很乐意在这两种背景下完成这项工作。这是我的代码：

```
public class VennColorsActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        class VennView extends View {
            public VennView(Context context) {
                super(context);
            }

            @Override
            protected void onDraw(Canvas canvas) {
                super.onDraw(canvas);
                int alpha = 60, val = 255;
                int ar = Color.argb(alpha, val, 0, 0);
                int ag = Color.argb(alpha, 0, val, 0);
                int ab = Color.argb(alpha, 0, 0, val);
                float w = canvas.getWidth();
                float h = canvas.getHeight();
                float cx = w / 2f;
                float cy = h / 2;
                float r = w / 5;
                float tx = (float) (r * Math.cos(30 * Math.PI / 180));
                float ty = (float) (r * Math.sin(30 * Math.PI / 180));
                float expand = 1.5f;
                Paint paint = new Paint();
                paint.setColor(Color.WHITE);
                canvas.drawRect(new Rect(0, 0, (int) w, (int) (h / 2)), paint);
                PorterDuff.Mode mode = android.graphics.PorterDuff.Mode.ADD;
                paint = new Paint(Paint.ANTI_ALIAS_FLAG);
                paint.setColorFilter(new PorterDuffColorFilter(ar, mode));
                paint.setColor(ar);
                canvas.drawCircle(cx, cy - r, expand * r, paint);
                paint.setColorFilter(new PorterDuffColorFilter(ag, mode));
                paint.setColor(ag);
                canvas.drawCircle(cx - tx, cy + ty, expand * r, paint);
                paint.setColorFilter(new PorterDuffColorFilter(ab, mode));
                paint.setColor(ab);
                canvas.drawCircle(cx + tx, cy + ty, expand * r, paint);
            }
        }
        this.setContentView(new VennView(this));
    }
} 
```

有人可以帮助我了解如何在 Android 图形中使用加色进行绘画吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-07T02:03:15.317

你在正确的轨道上。您的代码中有 3 个主要问题：

*   您需要设置 xfer 模式 iso 滤色器
*   使用临时位图渲染图像
*   Alpha 应为 0xFF 以获得您正在寻找的结果

这是我使用 xfer 模式得到的结果。我在做什么 - 将所有内容绘制到临时位图中，然后将整个位图渲染到主画布。

![xfer 模式规则](../Images/a7d9bbf1e517d7d96113eb5d6fdbbf4d.png)

你问为什么需要临时位图？好问题！如果您在主画布上绘制所有内容，您的颜色将与主画布背景颜色混合，因此所有颜色都会混乱。透明的临时位图有助于让您的颜色远离 UI 的其他部分

请确保您没有在其中分配任何内容`onDraw()`- 这样您很快就会耗尽内存。同时确保您在不再需要临时位图时回收了它。

```
package com.example.stack2;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Bitmap.Config;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.PorterDuff.Mode;
import android.graphics.PorterDuffXfermode;
import android.os.Bundle;
import android.view.View;

public class YouAreWelcome extends Activity {

    Bitmap tempBmp = Bitmap.createBitmap(1, 1, Config.ARGB_8888);
    Canvas c = new Canvas();
    Paint paint = new Paint();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        class VennView extends View {
            public VennView(Context context) {
                super(context);

            }

            protected void onDraw(Canvas canvas) {
                super.onDraw(canvas);
                if(tempBmp.isRecycled() || tempBmp.getWidth()!=canvas.getWidth() || tempBmp.getHeight()!=canvas.getHeight())
                {
                    tempBmp.recycle();
                    tempBmp = Bitmap.createBitmap(canvas.getWidth(), canvas.getHeight(), Config.ARGB_8888);
                    c.setBitmap(tempBmp);
                }

                    //clear previous drawings
                c.drawColor(Color.TRANSPARENT, Mode.CLEAR);

                int alpha = 255, val = 255;
                int ar = Color.argb(alpha, val, 0, 0);
                int ag = Color.argb(alpha, 0, val, 0);
                int ab = Color.argb(alpha, 0, 0, val);
                float w = canvas.getWidth();
                float h = canvas.getHeight();
                float cx = w / 2f;
                float cy = h / 2;
                float r = w / 5;
                float tx = (float) (r * Math.cos(30 * Math.PI / 180));
                float ty = (float) (r * Math.sin(30 * Math.PI / 180));
                float expand = 1.5f;
                paint.setAntiAlias(true);
                paint.setXfermode(new PorterDuffXfermode(Mode.ADD));
                paint.setColor(ar);
                c.drawCircle(cx, cy - r, expand * r, paint);
                paint.setColor(ag);
                c.drawCircle(cx - tx, cy + ty, expand * r, paint);
                paint.setColor(ab);
                c.drawCircle(cx + tx, cy + ty, expand * r, paint);
                canvas.drawBitmap(tempBmp, 0, 0, null);
            }
        }
        this.setContentView(new VennView(this));
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T03:41:52.537

再次感谢帕维尔。这对我来说很难自己弄清楚。我正在回答我自己的问题以更好地深入了解细节，但我已接受您的问题作为最佳答案。

你说得对，我不想创建和管理屏幕外位图（和画布）。这就是为什么我提到黑色或白色背景可以很好地完成这项工作的原因。

在我看到一些工作之前，我从不关心性能，但在那之后我会分享你的谨慎。编辑您的版本以修复该问题并删除这些成员会提供以下实现。

这是健壮的吗？请注意对 Canvas.drawColor() 的两个调用，我怀疑它们也可以合并为一个。

```
package com.superliminal.android.test.venn;

import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.PorterDuff.Mode;
import android.graphics.PorterDuffXfermode;
import android.os.Bundle;
import android.view.View;

public class VennColorsActivity extends Activity {
    private Paint paint = new Paint();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        class VennView extends View {
            public VennView(Context context) {
                super(context);
            }

            @Override
            protected void onDraw(Canvas canvas) {
                super.onDraw(canvas);
                canvas.drawColor(Color.BLACK);
                canvas.drawColor(Color.TRANSPARENT, Mode.CLEAR);
                int alpha = 255, val = 255;
                int ar = Color.argb(alpha, val, 0, 0);
                int ag = Color.argb(alpha, 0, val, 0);
                int ab = Color.argb(alpha, 0, 0, val);
                float w = canvas.getWidth();
                float h = canvas.getHeight();
                float cx = w / 2f;
                float cy = h / 2;
                float r = w / 5;
                float tx = (float) (r * Math.cos(30 * Math.PI / 180));
                float ty = (float) (r * Math.sin(30 * Math.PI / 180));
                float expand = 1.5f;
                paint.setAntiAlias(true);
                paint.setXfermode(new PorterDuffXfermode(Mode.ADD));
                paint.setColor(ar);
                canvas.drawCircle(cx, cy - r, expand * r, paint);
                paint.setColor(ag);
                canvas.drawCircle(cx - tx, cy + ty, expand * r, paint);
                paint.setColor(ab);
                canvas.drawCircle(cx + tx, cy + ty, expand * r, paint);
            }
        }
        setContentView(new VennView(this));
    }
} 
```

# javascript - JSON 对象属性未定义

> ID：11838026
> 
> 赞同：-1
> 
> 时间：2012-08-07T01:10:08.400
> 
> 标签：javascript, ajax, json, undefined

我进行 AJAX 调用以获取一些数据，将数据作为 JSON 对象（不是字符串）取回。当我记录对象时，我得到了正确的对象及其属性。但是，当我尝试记录其中一个对象属性时，我得到了未定义。

对于我的代码截图：http: [//i.imgur.com/gnt3w.gif](http://i.imgur.com/gnt3w.gif)

控制台日志截图：http: [//i.imgur.com/DO09m.gif](http://i.imgur.com/DO09m.gif)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T01:15:37.103

看起来您`POST`正在返回数组中的数据，而不是作为单个对象。我敢打赌，如果您登录`data[0].bursary_name`，您将看到正确的记录输出。

# javascript - 如何运行调用函数的函数在调用下一个函数之前先完成它。创建回调函数

> ID：11838027
> 
> 赞同：0
> 
> 时间：2012-08-07T01:10:35.373
> 
> 标签：javascript, function, callback

当用户单击任何图像时，所有图像（images_holder）都会慢慢淡出。然后在它消失后，另一个图像淡入，然后在 3 秒后图像淡出。之后它消失了 images_holder 再次淡入。我的问题是在推子完成之前， secondStep 函数已经在运行。

我想要的是完成推子功能完成的第一步，然后第二步将运行。一直在尝试创建此回调，但没有运气。

这是我的html

```
<div id="container">
    <!--<img src="images/background.jpg"/>-->
    <div id="faces_holder">
        <img id="face1" onclick="loadUnload(1)" src="images/face_03.png" width=350; height=656;/><img id="face2" onclick="loadUnload(2)" src="images/face_04.png" width=350; height=656;/><img id="face3" onclick="loadUnload(3)" src="images/face_05.png" width=350; height=656;/><img id="face4" onclick="loadUnload(4)" src="images/face_06.png" width=350; height=656;/><img id="face5" onclick="loadUnload(5)" src="images/face_07.png" width=350; height=656;/>
    </div>
    <div id="pop_face"><img id="popface_img" src=""/></div>
</div> 
```

这是我的 JavaScript：

```
 var id = "";
    var kindface=0;
    var fadeIn;
    var counterValue;
    var objHolder;

    function loadUnload(kindface){
        //FADEIN FADEOUT    
        function fader() {
            if(fadeIn == true){
                counterValue++;
                //setPoint = 9;
            }else{
                counterValue--;  // update parameters
                //console.log("hit");
            }
            objHolder.style.opacity = "0."+counterValue // show frame
            if (counterValue == setPoint){  // check finish condition
                clearInterval(id);
                console.log("end fader");
            }
        }

        //FADEOUT 
```

## 更新

我刚刚添加了第三步，我将如何实现呢？我想在 secondStep 完成推子功能后运行第三步吗？

```
function thirdstep() {
        console.log("begin second step: ")

            fadeIn = true;
            counterValue = 0;
            setPoint = 9;
            objHolder = document.getElementById("popface_img");
            objHolder.src = "images/"+ kindface +".png";

            id = setInterval(fader, 100); // draw every 100ms
            console.log("end second step: ")
        }

        function secondStep() {
            console.log("begin second step: ")

            fadeIn = true;
            counterValue = 0;
            setPoint = 9;
            objHolder = document.getElementById("popface_img");
            objHolder.src = "images/"+ kindface +".png";

            id = setInterval(fader, 100); // draw every 100ms
            console.log("end second step: ")
        }

        function firstStep(callback) {
            console.log("begin first step: ")

            fadeIn = false;
            objHolder = document.getElementById("faces_holder");
            counterValue = 10;
            setPoint = 0;

            id = setInterval(callback, 100); // draw every 100ms
            console.log("end first step: ")
            secondStep();

        }

        //RUN FIRST STEP FUNCTION 
        console.log("BEGIN process ")             
            firstStep(fader);

        console.log("END OF ALL process ")

    }

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T01:17:31.690

在您的代码中：

```
> id = setInterval(callback, 100); // draw every 100ms
> console.log("end first step: ")
> secondStep(); 
```

*secondStep*被立即调用，它不等待由建立的序列`setInterval`完成。您需要从*推子调用**secondStep*，例如

 *```
function loadUnload(kindface){

    [...]
    function fader() {

        if (counterValue == setPoint){  // check finish condition
            clearInterval(id);
            console.log("end fader");

            // now call secondStep
            secondStep();
        }
    }
    [...]
} 
```*

# r - 在 .jcall 中传递参数

> ID：11838034
> 
> 赞同：1
> 
> 时间：2012-08-07T01:12:19.347
> 
> 标签：r, rjava

我刚刚开始使用 rJava 在基于 R 的应用程序中使用大量 Java 代码。我尝试了一些简单的“Hello world”类型的东西，所以我知道基本设置是有效的。我有几个问题，但是我希望如果我可以使用`.jcall`.

```
> cal = new(J("java/util/GregorianCalendar"))
> obj = new(J("au.gov.ips.dataarchive.TIndex"))
> obj$monthlyT(cal)
[1] 77
> .jcall(obj,"I","monthlyT",cal)
    Error in .jcall(obj, "I", "monthlyT", cal) : 
     method monthlyT with signature (Ljava/util/GregorianCalendar;)I not found 
```

据我了解，第 3 行和第 4 行是等效的，应该产生相同的结果。显然我做错了什么。'monthlyT' 方法在 java 代码中定义为：

```
static public Integer monthlyT(Calendar month) 
```

我不是 Java 专家，所以请让我知道我可能需要提供哪些有关 Java 对象的其他信息来回答这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:36:58.523

`cal`是一个`java.util.GregorianCalendar`而不是一个`java.util.Calendar`。如果您想使用低级`.jcall`接口（为什么？），那么您需要自己进行转换。所以是这样的：

```
.jcall(obj,"I","monthlyT",.jcast(cal, "java/util/Calendar" )) 
```

# java - Netbeans：加载组件属性时出错：其他组件->

> ID：11838035
> 
> 赞同：0
> 
> 时间：2012-08-07T01:12:23.953
> 
> 标签：java, netbeans, reinstall

它继续：

mainPanel->panMain->border 无法读取属性。

这是尝试从 Netbeans 6.8 到 Netbeans 7.0 和 7.1 和 7.2 的结果。后两者不支持 Swing 应用程序框架，并且 7.0 不允许我构建新项目，因此我正在努力回到 6.8，以便支持和维护一些大型公司正在使用的大型系统。我在 netbeans 论坛上问了一些问题，得到的回应很少，其中只有一小部分是有帮助的。

然而，stackOverflow 无所不知，这就是我在这里的原因。

谁能帮我弄清楚这个错误情况？我已经为此苦苦挣扎了一个星期。

如果我的软件没有保持某种向后兼容的路径，我们早就倒闭了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T02:10:31.510

我有类似的问题，我通过激活“Java SE”来修复它。由于某种原因，当我安装 Netbeans 时，Java SE 没有被激活。激活的方法是转到工具->插件->已安装，然后选中 Java SE 框，然后单击激活。重新启动 Netbeans IDE。这就是所有人，它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:41:35.677

好吧，这个错误似乎是由使用较新版本的 Netbeans 构建项目然后尝试使用旧版本处理它引起的。学过的知识？不要使用 NB 6.8 创建项目，使用 NB 7.0.x 构建它，然后由于 7.0.x 中的错误尝试恢复到 NB 6.8 或 6.9。

# java - 没有默认构造函数的杰克逊第 3 方类

> ID：11838039
> 
> 赞同：33
> 
> 时间：2012-08-07T01:13:16.247
> 
> 标签：java, json, jackson

我正在尝试使用 Jackson 将我的 POJO 读入/从 Json 读取/写入。截至目前，除了第 3 方课程外，我已经对其进行了配置并为我的课程工作。尝试读取 Json 时出现错误：

```
org.codehaus.jackson.map.JsonMappingException: No suitable constructor found for type 
```

经过一些快速的谷歌搜索，我的类似乎需要一个[默认构造函数](https://stackoverflow.com/questions/7625783/jsonmappingexception-no-suitable-constructor-found-for-type-simple-type-class)或[使用 annotations 覆盖默认构造函数](http://www.cowtowncoder.com/blog/archives/2011/07/entry_457.html)。不幸的是，失败的类来自第 3 方库，并且该类没有默认构造函数，我显然无法覆盖代码。

所以我的问题是，我能做些什么呢，还是我运气不好？

谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-07T02:30:42.220

您可以利用[Jackson 的 Mix-Ins 功能](https://github.com/FasterXML/jackson-docs/wiki/JacksonMixInAnnotations)以及[Creator 功能](http://wiki.fasterxml.com/JacksonFeatureCreators)。Mix-Ins 功能减轻了对原始第三方代码进行注释的需要，Creator 功能提供了自定义实例创建的机制。

[对于更多的自定义，编写自定义反序列](http://wiki.fasterxml.com/JacksonHowToCustomDeserializers)化器并不太复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-04T02:23:35.930

一种方法是实现一个自定义[`JsonDeserializer`](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/JsonDeserializer.html)来创建实例，用 注释该类型的字段[`@JsonDeserialize`](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/annotation/JsonDeserialize.html)。这种方法相对于 mixins 的一个优点是它不需要修改`ObjectMapper`.

该类[`StdNodeBasedDeserializer`](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/deser/std/StdNodeBasedDeserializer.html)允许从`JsonNode`表示值的映射到所需类型。

**缺少构造函数的类型**

```
public class ThirdPartyType {
    private String stringProperty;

    private int intProperty;

    private Object[] arrayProperty;

    public ThirdPartyType(String a, int b, Object[] c) {
        this.stringProperty = a;
        this.intProperty = b;
        this.arrayProperty = c;
    }

    // Getters and setters go here
} 
```

**自定义解串器**

```
import com.fasterxml.jackson.databind.DeserializationContext;
import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.deser.std.StdNodeBasedDeserializer;

import java.io.IOException;
import java.util.Spliterator;
import java.util.Spliterators;
import java.util.stream.StreamSupport;

public class ThirdPartyTypeDeserializer 
        extends StdNodeBasedDeserializer<ThirdPartyType> {
    protected ThirdPartyTypeDeserializer() {
        super(ThirdPartyType.class);
    }

    @Override
    public ThirdPartyType convert(JsonNode root, DeserializationContext ctxt)
            throws IOException {
        return new ThirdPartyType(
                root.get("stringProperty").asText(null),
                root.get("intProperty").asInt(),
                StreamSupport.stream(
                        Spliterators.spliteratorUnknownSize(
                                root.get("arrayProperty").elements(),
                                Spliterator.ORDERED),
                        false).toArray());
    }
} 
```

**包含第三方类型的类型**

```
public class EnclosingClass {
    @JsonDeserialize(using = ThirdPartyTypeDeserializer.class)
    private ThirdPartyType thirdPartyProperty;

    // Getters and setters go here
} 
```

**检索值**

```
String json = "{\"thirdPartyProperty\": {"
        + "\"stringProperty\": \"A\", "
        + "\"intProperty\": 5, "
        + "\"arrayProperty\": [1, \"B\", false]"
        + "}}";
ObjectMapper objectMapper = new ObjectMapper();
EnclosingClass enclosingClass =
        objectMapper.readValue(json, EnclosingClass.class); 
```

# ios - 是否有可用的 iOS Javascript 库允许我限制视频录制持续时间？

> ID：11838040
> 
> 赞同：1
> 
> 时间：2012-08-07T01:13:42.617
> 
> 标签：ios, ios5, cordova, video-capture

PhoneGap 的[VideoCaptureOptions](http://docs.phonegap.com/en/1.0.0/phonegap_media_capture_capture.md.html#CaptureVideoOptions)接受持续时间参数，但目前不支持：s

我们真的很想将应用程序构建为 HTML5/CSS3/Javascript 应用程序，但这一功能是一个阻碍。任何帮助将不胜感激！！

# java - 日期字段上的mongodb mongodump json解析错误

> ID：11838046
> 
> 赞同：0
> 
> 时间：2012-08-07T01:14:43.220
> 
> 标签：java, javascript, mongodb

我有这个查询，它生成 10340 Failure parsing JSON string near: my_da error。如果我将条件从 reading_Date 更改为具有 baisc 匹配的另一个字段，则它可以工作。解析 JSON 日期时发生了一些事情..

sudo bin/mongodump --db myDB --collection myColl -q "{my_date: {$gte: {Date(1341230400000)}}}" --out -> dump/myDB/will.bson

有人可以帮忙吗？

reading_date 以 ISODate 格式存储为： "my_date" : ISODate("2011-08-31T12:00:00Z")

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T01:35:59.713

试试这个：

```
$ mkdir dump
$ mongodump -d myDB -c myColl -q "{my_date: {\$gte: { \$date: 1341230400000 } }}" -o dump/ 
```

$date 是 64 位有符号整数的 JSON 表示形式，表示自纪元以来的毫秒数（在 1.9.1 版之前无符号）。 [Mongo 扩展 JSON](http://www.mongodb.org/display/DOCS/Mongo+Extended+JSON)

运算符 $ 也被转义

# objective-c - NSArrayController - 观察 selectionIndex

> ID：11838050
> 
> 赞同：0
> 
> 时间：2012-08-07T01:15:10.050
> 
> 标签：objective-c, cocoa

当我尝试设置对这个特定键的观察时，没有任何反应。这就是我的意思。

我有一个标准的 Cocoa 应用程序，带有一个 NSTableView，我想出了如何根据选择的单元格更改图像视图中显示的图像。

现在，我试图弄清楚如何通过选定的索引禁用/启用按钮。我的意思是，我在窗口中有一个按钮，该按钮在某些索引上被禁用。

SomeClass 的 init 方法

```
-(id)init {
    if (self=[super init]) {
        [arrayController addObserver:self forKeyPath:@"selectionIndex" options:NSKeyValueObservingOptionNew context:NULL];
    }
} 
```

但是，当我实现 observeValueForKeyPath: 方法时，当我选择新索引时，并没有获取更改。事实上，如果我尝试记录出口，出口会显示 (null)。但是，当我在 AppDelegate 中添加观察者时，AppDelegate（当指定为观察者时）会获取更改。

我的通用 SomeClass 对象没有某些原因吗？应该以不同的方式完成吗？

笔记：

我尝试将 SomeClass 子类化为 NSWindow，然后创建窗口的所有者 SomeClass，并在 awakeFromNib 中设置观察者，这可行，但似乎是一种不好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T02:39:20.233

该`init`方法在过程中发生得太早，在连接插座之前（我认为）。将代码放入`awakeFromNib`将正常工作。这来自`NSObject`类参考中的 Apple 文档：

> nib 加载基础结构向`awakeFromNib` 从 nib 存档重新创建的每个对象发送一条消息，但前提是存档中的所有对象都已加载和初始化。当一个对象收到一条`awakeFromNib`消息时，它保证已经建立了它的所有出口和动作连接。

# flash - 多个 Flash 应用程序可以同时访问麦克风吗？

> ID：11838058
> 
> 赞同：1
> 
> 时间：2012-08-07T01:16:07.170
> 
> 标签：flash, audio, microphone

我正在编写一个应用程序，它允许用户相互交谈以及从他们自己的麦克风录制片段。我正在为没有源代码的 VoIP 部分使用库，因此录制部分必须是单独的 Flash 应用程序。

当一个 Flash 应用程序使用麦克风时，另一个应用程序似乎没有从中获取任何数据。当两个应用程序位于同一页面上并且它们位于同一浏览器的不同窗口中时，会发生这种情况，但如果它们位于不同的浏览器中，则可以正常工作，因此这不是操作系统级别的问题。

这两个应用程序都`NetStream.attachAudio`用于将麦克风发布到 RTMP 服务器。

有没有办法让两个应用程序同时访问麦克风？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:31:35.127

事实证明，VoIP Flash 应用程序正在使用声学回声消除，这是一种高级 Flash 麦克风功能，可阻止其他 Flash 应用程序同时访问麦克风。请参阅本文中的“使用增强音频的限制”：http: [//www.adobe.com/devnet/flashplayer/articles/acoustic-echo-cancellation.edu.html#articlecontentAdobe_numberedheader_2](http://www.adobe.com/devnet/flashplayer/articles/acoustic-echo-cancellation.edu.html#articlecontentAdobe_numberedheader_2)

唯一的解决方案是在 VoIP 应用程序中禁用此功能。

# jquery - 通过 CSS 实现不同的动画

> ID：11838059
> 
> 赞同：0
> 
> 时间：2012-08-07T01:16:14.060
> 
> 标签：jquery, html, css

我的 HTML 页面中的元素很少，只有图像和工具提示。我希望它们根据我在 CSS 部分所做的动画随机制作动画。

目前，当页面加载时，所有元素都会一起动画，我不想要这个。

我正在考虑从 jQuery 中一个一个地调用 CSS 类，但是看看元素的数量，因为它只是一个基本的翻译动画，有没有更好的方法来做到这一点？

以下是元素：

```
<div class="twitter-animate">
  <div id="twitter-wrap"><a href="#" id="twitter"><img src="img/link-twitter.png"></a></div>
    <div id="twitter-tooltip"><span>Tweet!</span></div>
</div>

    <div id="youtube-wrap"><a href="#" id="youtube"><img src="img/link-youtube.png"></a></div>
    <div id="youtube-tooltip"><span>YouTube</span></div>

    <div id="facebook-wrap"><a href="#" id="facebook"><img src="img/link-fb.png"></a></div>
    <div id="facebook-tooltip"><span>Facebook</span></div>

    <div id="newspaper-wrap"><a href="#" id="newspaper"><img src="img/link-newspaper.png"></a></div>
    <div id="newspaper-tooltip"><span>Newspaper</span></div>

    <div id="www-wrap"><a href="#" id="www"><img src="img/link-www.png"></a></div>
    <div id="www-tooltip"><span>Put your URL!</span></div>

    <div id="email-wrap"><a href="#" id="email"><img src="img/link-email.png"></a></div>
    <div id="email-tooltip"><span>Mail me!</span></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T01:45:50.880

如果您不希望它们全部一起制作动画，而是在特定时间间隔后使用：

```
setTimeout(function() {
    //Put in animation here
}, 2500); 
```

其中 2500 是运行 setTimeout 中的代码之前的延迟时间（以毫秒为单位）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T02:57:04.180

为简单起见，我假设您希望您的元素从左向右翻译。工具提示也无关紧要，因此我将其删除。

您需要做的第一件事是为所有元素添加一个公共类。在这里，我添加`share`了一个类：

```
<div id="twitter-wrap" class="share"><a href="#" id="twitter">Twitter</a></div>
<div id="youtube-wrap" class="share"><a href="#" id="youtube">YouTube</a></div>
<div id="facebook-wrap" class="share"><a href="#" id="facebook">Facebook</a></div>
<div id="newspaper-wrap" class="share"><a href="#" id="newspaper">Newspaper</a></div>
<div id="www-wrap" class="share"><a href="#" id="www">WWW</a></div>
<div id="email-wrap" class="share"><a href="#" id="email">Email</a></div> 
```

然后你的 CSS 应该看起来像这样......

```
.share {
  width: 100px;
  background-color: #333;
  padding: 3px  0 3px 10px;
  margin-bottom: 3px;
  -webkit-transform: translate(-100px, 0);
  -moz-transform: translate(-100px, 0); 
  -o-transform: translate(-100px, 0);  
  -ms-transform: translate(-100px, 0); 
   transform: translate(-100px, 0); 
  -webkit-transition: all 500ms ease;
  -moz-transition: all 500ms ease; 
  -o-transition: all 500ms ease;  
  -ms-transition: all 500ms ease;
   transition: all 500ms ease;    
}

.share.animate {
  -webkit-transform: translate(0, 0);
  -moz-transform: translate(0, 0); 
  -o-transform: translate(0, 0);  
  -ms-transform: translate(0, 0); 
   transform: translate(0, 0); 
} 
```

​然后你需要一点 javascript 来触发第一个动画，然后在每个 trasition 结束时监听以触发下一个动画......

```
//after document ready
$(".share").first().addClass("animate")

$(".share").bind("webkitTransitionEnd oTransitionEnd msTransitionEnd transitionend", function(e){
  $(e.target).next('.share').addClass("animate");
}) 
```

您可以在这里找到所有内容：http: [//jsfiddle.net/HYAWj/](http://jsfiddle.net/HYAWj/)

# php - 相对 MySQL 数据库

> ID：11838060
> 
> 赞同：1
> 
> 时间：2012-08-07T01:16:20.110
> 
> 标签：php, mysql, database

我有一个 MySQL 数据库表，其构建如下。 ![用户数据库](../Images/fd056dc7194fb9629bbbae231c0b082f.png) 班级下方的数字表示班级的“级别”，例如高，中或低，0表示不参加该班级。

我需要建立另一个表来保存每个班级的家庭作业，但我对如何构建该表有点迷茫，特别指出行的确切列必须是什么，因为每个班级都没有表示它的特定事物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T01:23:40.500

A properly normalized structure would have a separate table for courses, giving each an id, and another table placing students into courses by including a student id, course id, and level.

```
CREATE TABLE students (
  id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  username VARCHAR(64) NOT NULL,
  password VARCHAR(64), 
  email VARCHAR(...)
  UNIQUE KEY (username)
);

CREATE TABLE courses (
  id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(64) NOT NULL
);

/* If a record doesn't exist for a course and student, 
   the student isn't enrolled in that course. Otherwise,
   the level is defined here */
CREATE TABLE enrollments (
  id INT NOT NULL PRIMARY KEY,
  student_id INT NOT NULL,
  course_id INT NOT NULL,
  level INT NOT NULL,
  /* Each student may be enrolled only once per course */
  UNIQUE KEY (student_id, course_id),
  FOREIGN KEY (student_id) REFERENCES students (id),
  FOREIGN KEY (course_id) REFERENCES courses (id)
); 
```

Finally then, you can create a table for assignments assigned in each course:

```
CREATE TABLE assignments (
  id INT NOT NULL PRIMARY KEY,
  course_id INT NOT NULL,
  description TEXT
  /*... other columns related to the assignment as necessary*/
); 
```

And for students to complete assignments if necessary:

```
CREATE TABLE student_assignments (
  student_id INT NOT NULL,
  assignment_id INT NOT NULL,
  assignment_body TEXT, /* or whatever... */
  /* Or to track when completed */
  submitted_timestamp TIMESTAMP,
  PRIMARY KEY (student_id, assignment_id),
  FOREIGN KEY (assignment_id) REFERENCES assignments (id),
  FOREIGN KEY (student_id) REFERENCES students (id)
); 
```

# jquery - 在 Firefox 中捕获希伯来语击键

> ID：11838062
> 
> 赞同：1
> 
> 时间：2012-08-07T01:16:31.813
> 
> 标签：jquery, firefox, jquery-events

我尝试`Ctrl`通过使用 JQuery keydown 事件来处理击键，特别是 +char：http: [//api.jquery.com/keydown/](http://api.jquery.com/keydown/)

这适用于拉丁字符（例如，按`Ctrl`+`B`会导致带有“ctrlKey:true”和“which:66”的事件）。

但是，当我将键盘布局更改为希伯来语并按下相同的键（在本例中为`Ctrl`+ `נ`）时，我得到“which:0”，keyCode 和 charCode 也是 0，因此我无法检测到究竟按下了哪个键。

这对我的用户来说非常烦人，因为他们输入的是希伯来语，并且每次他们想按`Ctrl`+ 时都必须将布局更改为英语。

我确信可以捕获希伯来语击键，因为在 GMail 编辑器中（例如），我可以在英语和希伯来语布局中单击`Ctrl`+ `B`，并获得相同的结果。

系统信息：Ubuntu 12.04、Firefox 14。（注意：在 Chrome 中我确实得到了正确的键码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:20:31.490

Ah, I found it - just use the "keypress" event instead.

# php - 我的页面在 IE 中被推到最左侧，但在 Chrome、Firefox 和 Safari 中看起来不错。在我使用包含之前我没有这个问题

> ID：11838063
> 
> 赞同：2
> 
> 时间：2012-08-07T01:16:50.877
> 
> 标签：php, html, css, include

由于我是初学者并且需要快速建立亲戚的网站，因此我购买了一个预制模板。我最初拥有纯 HTML 格式的所有内容，并且所有页面在 Chrome、FF、IE 和 Safari 中都显示得很好。考虑到页面会增长，最好将页眉、导航和页脚放在包含文件中，我没有太多麻烦就这样做了，并且在 Chrome、FF 和 Safari 中进行测试时一切顺利。IE（我使用的是 IE9）是另一回事。所有页面都被推到屏幕的最左侧。

让我感到困惑的是，除了创建包含并将所有 html 页面更改为 php 之外，我没有更改任何代码，以便它获取包含。如果我删除包含并将页眉、导航和页脚放回纯 html 页面......它在 IE 中再次完美运行。

[这是我的测试页。](http://www.fbcwalledlake.org/test/staff.php)

[这是CSS。](http://pastebin.com/YY7wF6WH)

为了减少这篇文章的页面大小，我通过 PasteBin 链接到它。如果这违反了任何规则或受到社区的反对，我深表歉意。让我知道，我会把它都放在这篇文章中。

我已经尝试将 CSS 中的边距从“0”更改为“自动”（第 3 行和第 12 行），但它没有做任何事情。不是它应该有，我只是在尝试任何事情。

如果已经针对我的具体情况回答了这个问题，我深表歉意，如果有人能指出我之前答案的方向，那就太好了。我搜索了，但没有看到任何人有同样的情况，它在 html 中运行良好，但在放入 php 包含时中断。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T01:18:47.413

您的页面在 IE 上处于 quirks 模式，我会尝试将您的 doctype 移动到页面顶部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T01:19:47.413

你的 DOCTYPE 搞砸了。标题的第一个输出行（或您的开口`<html>`所在的任何位置）应该是

```
<!DOCTYPE html> 
```

DOCTYPE 声明必须是 HTML 标记之前输出的第一行，否则 IE 将恢复为 Quirks 模式（IE 5.5 兼容模式）。

# mvvm - 如何从 mvvm 中的另一个视图更新一个视图的控件

> ID：11838064
> 
> 赞同：0
> 
> 时间：2012-08-07T01:16:59.443
> 
> 标签：mvvm, dependency-injection, dependencies, prism

嗨，我的 MVVM 应用程序中有三个基于区域的视图。我是 MVVM 的新手，我想从不同的视图单击按钮来更新 DataGrid。

一个视图有一个按钮，第二个视图有数据网格。当按下其他视图上的按钮时，我想更新数据网格结果或绑定数据网格。我看到很少有关于使用 eventService 进行操作的帖子，但我不确定如何操作。任何人都可以给我一些例子，因为我是新手，所以不确定。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:17:20.490

一个简单的解决方案是在两个视图中使用相同的 ViewModel：

视图模型：

```
public class MyModel : ViewModel
{
  static myModel;
  public static MyModel Current { get { if(myModel==null) myModel=new MyModel(); return myModel; } }

  public IEnumerable<T> Data { get { ... } set { /* Notification */ }}
  public ICommand SetData {get { return new DelegateCommand(()=>Data= /* return the data */); }
} 
```

按钮视图：

```
<Button Command={Binding SetData} /> 
```

数据网格视图：

```
<DataGrid ItemsSource={Binding Data} /> 
```

在两个视图的代码隐藏中，添加到构造函数： this.DataContext = MyModel.Current;

# node.js - 如何在mongodb中构建这个数据库？

> ID：11838065
> 
> 赞同：0
> 
> 时间：2012-08-07T01:17:04.220
> 
> 标签：node.js, mongodb, mongoose

假设我在 mongodb 中有两个集合，一个用于包含用户基本信息的用户，一个用于包含应用程序的应用程序。现在如果允许用户添加应用程序，下次登录时，网络应该获取用户添加的应用程序对于他们来说，我应该如何在 mongodb 中构建这种数据库。

```
users:{_id:ObjectId(),username:'username',password:'password'}
apps:{_id:ObjectId(),appname:'',developer:,description:}; 
```

我应该如何让用户为他们添加应用程序？？？我应该添加类似于 addedAppId 的内容，例如：

```
users:{_id:ObjectId(),username:'username',password:'password',addedApppId:[]} 
```

指示他们添加了哪个应用程序，然后使用**addedAppId**获取应用程序？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T01:51:30.273

`users`是的，收集跟踪用户添加的应用程序没有任何问题，就像您指出的那样。

`linking`这在 MongoDB中被称为。在关系系统中，您可能会创建一个单独的表 ，`added_apps`其中包含用户 ID、应用 ID 和任何其他相关信息。但是由于您不能加入，因此将这些信息保留在`users`集合中是完全合适的。

从[文档](http://www.mongodb.org/display/DOCS/Schema+Design)：

> 设计 MongoDB 模式时的一个关键问题是何时嵌入以及何时链接。嵌入是在 BSON 文档中嵌套对象和数组。链接是文档之间的引用。
> 
> MongoDB 中没有连接——分布式连接在 1000 个服务器集群上会很困难。嵌入有点像“预加入”数据。文档内的操作很容易被服务器处理；这些操作可以相当丰富。**相反，链接必须由应用程序在客户端处理；应用程序通过发出后续查询来做到这一点。**

（这是您需要做的额外工作，从用户的存储中获取应用程序信息`AppId`。）

> 一般来说，对于实体之间的“包含”关系，应该选择嵌入。不使用链接时使用链接会导致数据重复。

...

> **多对多关系通常是通过链接完成的。**

# php - PDO 动态查询构建

> ID：11838068
> 
> 赞同：8
> 
> 时间：2012-08-07T01:18:09.647
> 
> 标签：php, mysql, database, pdo, abstract-class

我一直在使用 mysql_query 并且现在开始使用 PDO。太棒了！

但是在我的旧脚本中，我构建了一个动态查询构建器，并且我很难通过使用 PDO 来移植它。

如果有人能给我一些指导，那就太好了！

这是它的理论。

1.  我有一个数组
2.  数据库字段和值（插入时）。
3.  创建查询字符串以生成有效的 PDO 事务

这是我正在尝试做的一部分。

```
public $dbFields; // This is an array of the fields plus VALUES

public function select($where, $limit) {
    // This is what I **had** before
    $query = "SELECT ". implode(", ", $this->dbFields) ." FROM ". $this->table." WHERE ". $where ." ". $limit."";

    // Now i need to convert that to PDO
    $this->connection->beginTransaction();

    # START Query
    $select = $this->connection->prepare("SELECT {$this->fieldNames} FROM {$this->table}");

    // I need to BIND my params and values, but i'm not sure the best route to take when I have a WHERE clause that includes, "AND" / "OR" operators.

    # EXECUTE the query
    $select->execute();

    $this->connection->commit();
} 
```

这是我**以前**的

```
$results = $db->select("userId = 111 OR userId = 222"); 
```

但我**想**我需要做的是使用更像

```
$results = $db->select(array("userId"=>111, "userId"=>222)); 
```

我知道这是一项艰巨的任务，我希望这对我正在尝试做的事情有意义，但是对于尝试构建这些查询的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T03:14:11.540

您的方法需要一个单独的`$params`参数`select`。我冒昧地为方法参数提供默认值。就像@userXxxx 笔记一样，您不需要交易只是为了做一个`SELECT`.

```
<?php

class db {

    public $connection; //PDO
    public $dbFields; // This is an array of the fields plus VALUES

    public function select($where = '1', $params = array(), $limit = '', $fetchStyle = PDO::FETCH_ASSOC) { //fetchArgs, etc
        $fields = implode(', ', $this->dbFields);

        //create query
        $query = "SELECT $fields FROM {$this->table} WHERE $where $limit";

        //prepare statement
        $stmt = $this->connection->query($query);

        $stmt->execute($params);

        return $stmt->fetchAll($fetchStyle);
    }

    //...
}

$where = 'userId IN(:userId1, :userId2)';
$params = array(':userId1' => 111, ':userId2' => 2222);
$db->select($where, $params); 
```

笔记：

*   如果你真的想要，你可以添加额外的方法参数来匹配[PDOStatement::fetchAll](http://www.php.net/manual/en/pdostatement.fetchall.php)的所有灵活性。
*   我不确定您所说`$dbFields`的“字段加值”是什么意思。你可以解释吗？

* * *

[编辑]

您可能想查看[PDOStatement::execute](http://www.php.net/manual/en/pdostatement.execute.php)的文档/示例，因为这似乎是您困惑的根源——尤其是`$input_parameters`方法参数。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-28T02:51:51.933

那这个呢？

```
public function select($where, $limit) {
    $query = "SELECT ". implode(", ", $this->dbFields) ." FROM ". $this->table." WHERE ". $where ." ". $limit."";
    $this->connection->query($query);
}

//Use what you had before:
$results = $db->select("userId = 111 OR userId = 222"); 
```

不确定为什么要使用事务（用于全有或全无或捕获异常和回滚）或准备好的查询（用于发送多个查询）...

# vim - Vim 使用日晒配色方案高亮显示

> ID：11838070
> 
> 赞同：8
> 
> 时间：2012-08-07T01:18:27.447
> 
> 标签：vim, color-scheme

我有一个 vim 高亮显示代码中的空白错误：

```
" Highlight redundant whitespaces and tabs.
highlight RedundantSpaces ctermbg=red
match RedundantSpaces /\s\+$\| \+\ze\t\|\t/ 
```

显示如下尾随空格问题： ![以红色突出显示的空白错误](../Images/6241f92b7c08053a092ac65c59853193.png)

但是，我最近开始使用[日晒](http://ethanschoonover.com/solarized)配色方案，但无法显示这些亮点。 ![日晒无亮点](../Images/1ad7c9a1605125e0cc003bc29db4d1b1.png)

我尝试更改颜色名称无济于事。我的（简单）.vimrc 的相关部分说：

```
syntax enable
set background=dark
colorscheme solarized 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T14:22:03.233

当您在 Vim 会话中切换颜色方案时，将 still移到`:highlight`后面对`:colorscheme`您没有帮助。

`ColorScheme`为此，请通过事件重新定义突出显示：

```
autocmd ColorScheme * highlight RedundantSpaces ctermbg=red 
```

* * *

顺便说一句，您的简约解决方案还有其他问题：

1.  它不会在拆分窗口中突出显示。
2.  您失去了通过`:match`.

有几个插件以更好的方式提供此功能。我的叫[ShowTrailingWhitespace](http://www.vim.org/scripts/script.php?script_id=3966)；插件页面包含指向替代品的链接。

# apache - mod_rewrite 规则给出 404 错误

> ID：11838071
> 
> 赞同：0
> 
> 时间：2012-08-07T01:18:34.217
> 
> 标签：apache, .htaccess, mod-rewrite, web

我**遇到**了 mod_rewrite 的问题，它给我带来了相同的错误 404，如下所示：

```
 RewriteRule ^music.mp3?id=(.*)$ music.php?id= [L] 
```

我需要 url /music.mp3?id=1 和真正的 url /music.php?id=1

任何想法？？

我认为 RewriteRule 路径中有些地方被误解了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T01:32:49.257

您无法匹配**.** `RewriteRule`但无论如何你并没有真正匹配它，看起来你只需要附加到你的目标 URI，所以：

```
RewriteRule ^music\.mp3$ music.php [L] 
```

应该够好了。任何查询字符串参数（如`?id=1`）将自动附加在末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T01:35:45.033

在你的表达（引擎规则）中，你想说的是：

“当 url 以 开头时`music.mp3?id=`，取后面的任何内容`=`并将 URL 更改为`music.php?id=`并将部分放在后面`id=`”

在正则表达式中，`.`字符具有特殊含义。如果要说“点字符”，而不是赋予它特殊含义，则需要对其进行转义，但在其`\`后面加上一个，如下所示：

`^music\.mp3?id=(.*)$`

@Jon Lin 已经给了你另一部分，关于查询字符串。

# php - 减少php中段落的返回中断

> ID：11838074
> 
> 赞同：0
> 
> 时间：2012-08-07T01:18:48.487
> 
> 标签：php, preg-replace

这是变量：

```
$letexts = "Hello this is a sample

after 2 return breaks there is ...

another 3 return breaks"; 
```

如您所见，有 2 次返回休息时间，然后是 3 次返回休息时间。我希望能够得到这样的结果：

```
echo $letexts; 
```

将显示：

```
Hello this is a sample

after 2 return breaks there is ...

another 3 return breaks 
```

我使用了所有这些并且没有工作，所以它让我拉扯我的头发：

```
$letexts = preg_replace("/\r\n\s*\r\n/", "\r\n", $letexts);
$letexts = str_replace(array("\r", "\n", "\r\n"), "\r\n", $letexts);
$letexts = trim($letexts);
$letexts = preg_replace('~[\r\n]~','',$letexts); 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T01:46:19.540

如果你想用html显示。

使用函数[nl2br](http://www.php.net/manual/en/function.nl2br.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T01:22:39.913

试试这个：

```
$letexts = preg_replace("/[\r\n]{3,}/", "\r\n\r\n", $letexts); 
```

# python - 当类中的函数返回一个值时，它返回到哪里？

> ID：11838075
> 
> 赞同：1
> 
> 时间：2012-08-07T01:18:50.940
> 
> 标签：python, class, python-2.7, return

我一直在学习类并且我的代码可以工作，但我只是想知道返回的值去哪里了？

代码：

```
from sys import exit
from random import randint

class Game(object):

    def __init__(self, start):
        self.pie = [ 'pie test']

        self.start = start

    def play(self):
        next_room_name = self.start
        while True:
            print "\n--------"
            room = getattr(self, next_room_name)
            next_room_name = room()

    def rooom(self):
        print "Test worked. good job"
        return "piez"

    def piez(self):
        print "pie room"
        exit(1)

a_game = Game("rooom")
a_game.play() 
```

例如，在上面的代码中，我在 rooom() 中返回“piez”，它现在将我带到 piez(self) 函数。但是，返回值将我带到哪里？

它是否在课堂外返回“piez”并以新值重新进入课堂？它是否将字符串“piez”返回给**init** (self, start) ？我只是将值返回到前一个函数 play(self) 吗？

除此之外，一切正常，但我只是不明白我是如何到达piez(self) 函数的，只需在前一个函数中返回“piez”。过去我只是通过用 () 输入函数的名称来跳转函数，但是这样我会返回一个字符串并且不确定我是如何跳转的。

这是我的观察：

1.) 将 Game("Rooom") 类实例化为 a_game

2.) 从 a_game 我们调用 play() 函数

3.) "Rooom" 被发送到 init 并分配给 self.start

4.) play(self) 启动并使用初始化函数 self.start 并设置为 next_room_name

5.) 循环开始。从 next_room_name 中获取下一个函数并分配给房间

6.) next_room_name 分配给 room() 。突然跳到房间（自己）

7.) 我们到达 rooom(self) 并返回“piez”

8.) ?? Piez 被返回某个地方......我们现在在piez(self)

有人可以帮我填补空白吗？这让我疯狂。我希望我说得通……我一直在努力理解这一点一个小时，即使在分解它之后，我似乎也误解了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T01:26:14.617

您在这里有轻微的困惑：

> 5.) 循环开始。从 next_room_name 中获取下一个函数并分配给房间
> 
> 6.) next_room_name 分配给 room() 。突然跳到房间（自己）

如果等号存在，则任何语句的返回值都分配给等号的左侧。

当你写

`x = hello()`

这表示：

“打招呼并将任何返回值存储在*x* ”

所以应该是

"被调用的函数的返回值`room()`存储在`next_room_name`"

希望这可以为您澄清。

# macos - 在 LaTeX 文档中使用 VC 包时，Emacs (AUCTex) 未写入 vc.tex 文件

> ID：11838079
> 
> 赞同：1
> 
> 时间：2012-08-07T01:19:47.850
> 
> 标签：macos, emacs, visual-c++, auctex

我在 Lion 上使用适用于 Mac OS X 的 GNU Emacs 24.1 以及最新版本的 AUCTeX 和 VC 包来在我的 LaTeX 文档的页脚中打印版本信息。问题是当我排版我的 LaTeX 文档时，它通过 \immediate\write18{./vc} 运行建议的 shell 命令就好了，但是在运行 vc 脚本时它没有向 vc.tex 文件写入任何内容。我每次都检查过日志文件，总是出现以下行：

runsystem(./vc)...安全执行（允许）。

我花了一天的大部分时间试图弄清楚为什么 vc.tex 没有被修改，我把它缩小到 Emacs/AUCTeX 的问题，因为 TeXShop 似乎做得很好。或者，我总是可以在终端中运行 vc 脚本，但我想弄清楚为什么 \immediate\write{./vc} 行在 Emacs 中不起作用。

有任何想法吗？？

# c - 当您从 execvp 接收输出时，从管道中读取适量的数据

> ID：11838082
> 
> 赞同：2
> 
> 时间：2012-08-07T01:20:22.707
> 
> 标签：c, pipe, execvp

这只是一个更大程序的一小部分，但我试图从 execvp 获取输出，我已经正确设置了 execvp `dup2`，并将其引导到管道中。当涉及到使用 read 读取管道的全长时，我的问题就出现了，我不知道`execvp`每次的输出有多大，因为它可能因输入而异。

```
 int fd[2];
    pipe(fd);
    pid_t pid = fork();
    if (pid == 0) {
        close(fd[0]);
        dup2(fd[1], 1);
        execvp(msg.v,(char *[]){msg.v,NULL});
    } else if (pid > 0) {
        close(fd[1]);
        read(fd[0],msg.v,....);
    } 
```

我尝试了几种不同的读取大小，但要么不够，要么最后我得到随机垃圾空白其他方式去获得输出。

整个程序是服务器的一部分的更多无用信息。我正在制作服务器和客户端..启动服务器给客户端一个终端命令，它通过 INET 流将其发送到服务器，并将输出发送回客户端以显示所有没有 stdio 的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T01:36:25.610

您必须注意有多少数据`read`返回到缓冲区。在`read`返回正数时，您有更多数据。当程序完成后，它会关闭它的结尾`pipe`，你`read`会返回`0`。

```
} else if (pid > 0) {
    close(fd[1]);
    ssize_t r = read(fd[0],buf,bufsz);
    if (r > 0) do {
        /* ... do something with r bytes in buf */
        r = read(fd[0],buf,bufsz);
    } while (r > 0);
    if (r < 0) {
        perror("read");
        /*...*/
    }
} 
```

如果您看到`read`出现“系统调用中断”错误，那么您遇到了`EINTR`caf 提到的情况。在这种情况下，您`read`再次重新启动。

```
 for (;;) {
            r = read(fd[0],buf,bufsz);
            if (r != -1 || errno != EINTR) break;
        } 
```

我假设您没有进行非阻塞 I/O，因此您不会遇到“资源暂时不可用”消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T01:37:52.010

您继续阅读，直到`read()`返回`0`，这表示 EOF（或 -1`errno`设置为永久错误，即`EAGAIN`or以外的任何内容`EINTR`）。

你不能忽略它的返回值`read()`- 它告诉你它返回了多少字节。这就是为什么您在缓冲区末尾看到“垃圾”的原因 - 在这些情况下`read()`并没有填满整个缓冲区，并且您忽略了返回值，因此您不知道它实际返回了多少。

# jquery - 如何将css样式应用于jquery效果

> ID：11838083
> 
> 赞同：0
> 
> 时间：2012-08-07T01:20:29.023
> 
> 标签：jquery, css, jquery-ui

我有一个包含列表的页面。我有一个按钮可以将新项目添加到列表中。我想将 JQuery-UI 效果应用于添加新项目，我的问题是显示效果动画时，列表项没有样式。看到这个小提琴 - [http://jsfiddle.net/Ec3x9/2/](http://jsfiddle.net/Ec3x9/2/)。

可以看到，当用户点击创建按钮时，会显示项目的动画，但由于未应用 CSS，因此列表项文本位于图标下方。我想显示列表项的动画。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T01:32:44.937

删除CSS 声明`>`之间`ul`和中的字符。`li`jquery 所做的是在它执行动画之前`li`用一个元素包装你。`div`发生这种情况时，`li`不再是 的直接后代，`ul`因此您的样式不会在动画期间应用。

例如：http: [//jsfiddle.net/Ec3x9/8/](http://jsfiddle.net/Ec3x9/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T01:36:09.930

看起来样式在 IE 7 中无法正常工作。在 FF 和 Chrome 中，文本显示在图像图标旁边。对于 IE，您可以删除`line-height`或将其设置为`0`，它应该可以工作。

试一试，看看它是否能解决您的问题。但是，这会破坏 FF 和 Chrome 的样式。因此，您必须添加一些聪明才智以使设计适用于 IE 7 和 Chrome/FF。

# php - 将欧洲时间格式转换为时间戳

> ID：11838084
> 
> 赞同：1
> 
> 时间：2012-08-07T01:20:38.660
> 
> 标签：php, date, format, unix-timestamp

将给定的欧洲格式日期 (DD/MM/YY) 转换为正确时间戳的最有效方法是什么？

示例：10/11/12 应输出 1352505600 作为 2012 年 11 月 10 日，而不是 2012 年 10 月 11 日

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T01:25:50.100

[`DateTime::createFromFormat()`](http://php.net/manual/en/datetime.createfromformat.php)

```
$date = DateTime::createFromFormat('d/m/y', $eu_date);
echo $date->format("U"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T01:24:34.837

Use the 2nd optional variable to the date function to feed it the unix timestamp

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-07T01:22:32.093

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

# php - 有可能做吗？somevalue

> ID：11838088
> 
> 赞同：0
> 
> 时间：2012-08-07T01:21:23.343
> 
> 标签：php

> **可能重复：**
> [php 将变量作为键，但未分配值](https://stackoverflow.com/questions/680914/php-get-variables-as-key-with-no-value-assigned)

当我处理我的一些 PHP 脚本时，我经常发现很难计算出仍然可以使页面看起来不错的 _GET 值，所以我想知道它是否有可能只是做例如 index.php?somevalue

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T01:22:32.603

是的，您可以通过[`$_SERVER['QUERY_STRING']`](http://php.net/manual/en/reserved.variables.server.php).

# javascript - Backbone.js 应该从 URL 中获取 GET 参数吗？

> ID：11838089
> 
> 赞同：5
> 
> 时间：2012-08-07T01:21:39.030
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我正在尝试为我的网站实现搜索功能。`foobar`当用户在框中键入搜索词`input`并提交时，他将被重定向到`http://mydomain.com/search?query=foobar`.

**问题::**我应该如何从 URL 中获取 GET 参数`query`，并将其发送到后端并以 JSON 响应的形式返回一组结果？我应该这样做吗？

我目前在下面的尝试甚至不会导致该`search`功能被触发。

**路由器**

```
var AppRouter = Backbone.Router.extend({
    routes: {
        'search?query=:query': 'search'
        // ... and some other routes
    },

    search: function(query) {
        this.photoList = new SearchCollection();
        var self = this;
        this.photoList.fetch({
            data: {query: query},
            success: function() {
                self.photoListView = new PhotoListView({ collection: self.photoList });
                self.photoListView.render();
            }
        });
    }

});

var app = new AppRouter();
Backbone.history.start({
    pushState: true,
    root: '/'
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T03:01:43.013

对于这个问题，已经有几个针对 Backbone 的问题。有一个现有的插件可以很好地解决这个问题：

[https://github.com/jhudson8/backbone-query-parameters](https://github.com/jhudson8/backbone-query-parameters)

或者，我目前在与 Backbone 的路由匹配匹配的模拟 API 中使用查询字符串参数。看起来像这样

**路线**

`"/api/v2/application/:query"`

**询问**

```
application: function(query) {
  var params = $.deparam(query.slice(1));
  // params.something...
} 
```

至于您手头的实际问题，您如何重定向`index.html`到支持`pushState`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-26T19:22:44.873

我遇到了同样的问题并考虑使用骨干查询参数，但这通常应该被认为是一种不正确的方法。

url 查询字符串不适用于前端。当从 page.html 导航到 page.html?something=something 时，它们会被发送到服务器并强制刷新。

您应该改用哈希片段。即[http://www.example.com/ajax.html#key1=value1&key2=value2](http://www.example.com/ajax.html#key1=value1&key2=value2)然后只需以正常的主干方式获取这些值并从中构建您的请求参数。

请参阅[https://github.com/jashkenas/backbone/issues/891](https://github.com/jashkenas/backbone/issues/891)、[https://developers.google.com/webmasters/ajax-crawling/docs/specification](https://developers.google.com/webmasters/ajax-crawling/docs/specification)、[https://www.rfc-editor.org/rfc /rfc3986#section-3.5](https://www.rfc-editor.org/rfc/rfc3986#section-3.5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T22:37:17.060

您始终可以通过 jQuery URL 插件读取 URL。它运作良好。

[https://github.com/allmarkedup/jQuery-URL-Parser](https://github.com/allmarkedup/jQuery-URL-Parser)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-07T15:55:10.123

在极少数情况下，您需要读取 URL 并提取 GET 参数。我认为您做错了，这是我的选择：

1）如果您的应用程序中只有一个页面（单个应用程序页面），您可以在他们在您的`input`字段中键入或点击后显示结果`submit`

2）如果您将用户重定向到另一个页面，这意味着您可以[引导数据](http://backbonejs.org/#FAQ-bootstrap)，以便在页面加载后`backbone`只需要呈现您的结果，并且只有在您更改搜索词时才发出其他请求

3）您可以有一个`javascript`变量，该变量在页面加载时直接从服务器初始化，使用 GET 参数可能更容易

# php - 奇怪的php数组？数据库查询后

> ID：11838092
> 
> 赞同：0
> 
> 时间：2012-08-07T01:22:00.060
> 
> 标签：php, arrays

> **可能重复：**
> [从 PHP 数组中输出（回显/打印）所有内容](https://stackoverflow.com/questions/693637/output-echo-print-everything-from-a-php-array)

我已经从数据库进行了查询，结果存储在一个变量中，该变量被认为是一个数组。输出只有一行和一列，所以我使用：

```
echo result[0]; 
```

输出结果。但是我收到一条错误消息：

```
Notice: Array to string conversion in "C:/apache/htdocs...."
array 
```

我尝试使用转储变量

```
var_dump result[0]; 
```

然后我得到这个

```
array(1) { [0]=> array(1) { ["var_datain"]=> string(4) "hai!" } } 
```

所以....我如何让它呼应价值***hai！***从那个数组？

万一这很重要，这是我的查询

```
 $db = new PDO(DSN, DBUSER, DBPASS);
    $stmt = $db->prepare("CALL test(?)");
    $parameter = 'hai!';
    $stmt->bindValue(1, $parameter, PDO::PARAM_STR);
    $rs = $stmt->execute();
    $result = $stmt->fetchAll(PDO::FETCH_ASSOC);
    var_dump($result); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T01:24:12.243

它是一个多维数组。

```
echo $result[0]['var_datain']; 
```

这取决于您进行查询的方式（向我们展示更多代码以更好地解释您），但在您的情况下，查询返回的每一行都是另一个包含您选择的列的数组。即使您只选择一个列和一行，它仍然作为多维数组返回。

知道了？

# ruby - Display output of ruby script requiring Mechanize on MacOS Desktop using GeekTools?

> ID：11838098
> 
> 赞同：1
> 
> 时间：2012-08-07T01:22:55.260
> 
> 标签：ruby, macos, mechanize, geektool

I have written a working ruby script using mechanize for fetching my

> 1.  Stackoverflow reputation and badges
> 2.  Twitter tweets and followers

and printing the output to screen.

I run this command on the terminal first :

```
/Users/cyclotrojan/.rvm/rubies/ruby-1.9.2-p290/bin/ruby /Users/cyclotrojan/Desktop/Snippets/get_so_reputation_and_tw_followers.rb 
```

The output is correctly displayed like this on the terminal:

```
StackOverflow :
    Reputation is : 406
    Total Badges  : 10
Twitter :
    Tweets     : 1,494
    Followers  : 137 
```

Now I wish to display the output of my script on my desktop using GeekTools and set refresh time to 30 minutes, so it keeps running the script over and over thus updating my stats. However when I paste the same command on a geektool shell, no output comes.

Here is the script :

# File get_so_reputation_and_tw_followers.rb

```
require 'mechanize'

def get_stackoverflow_data

  url_so = 'https://stackoverflow.com/users/898346/cyclotrojan'

  begin
    so_page = Mechanize.new.get(url_so)
    so_reputation = so_page.link_with(:href => "/users/898346/cyclotrojan?tab=reputation").to_s
    so_badges = so_page.search(".badgecount").first

    print "StackOverflow :" + "\n"
    print "    Reputation is : " + so_reputation + "\n"
    print "    Total Badges  : " + so_badges + "\n"
  rescue
    print "StackOverflow :" + "\n"
    print "\tReputation is : " + "NA" + "\n"
    print "\tTotal Badges  : " +  "NA" + "\n"
  end

end

def get_twitter_data

  url_tw = 'https://twitter.com/cyclotrojan'

  begin
    tw_page =  Mechanize.new.get(url_tw)
    tw_tweets = tw_page.link_with( :href => "/" + url_tw.split("/").last).to_s.split(" ").first
    tw_followers = tw_page.link_with( :href => "/#!/" + url_tw.split("/").last + "/followers").to_s.split(" ").first

    print "Twitter :" + "\n"
    print "\tTweets     : " + tw_tweets + "\n"
    print "\tFollowers  : " + tw_followers + "\n"
  rescue
    print "Twitter :" + "\n"
    print "\tTweets     : " + "NA" + "\n"
    print "\tFollowers  : " + "NA" + "\n"
  end

end # end function

  get_stackoverflow_data()
  get_twitter_data() 
```

However, the output simply doesnt show up on my desktop. I know that the problem is not with detecting ruby, since I tested it out using another file test.rb

# File test.rb

```
puts "hello" 
```

This command will work on GeekTool shell and display hello correctly :

```
/Users/cyclotrojan/.rvm/rubies/ruby-1.9.2-p290/bin/ruby /Users/cyclotrojan/Desktop/Snippets/test.rb; 
```

Output on geektool shell: hello

I have done some debugging and found that if I remove the line require 'mechanize' then the script runs correctly and due to exception the following output is displayed :

```
StackOverflow :
    Reputation is : NA
    Total Badges  : NA
Twitter :
    Tweets     : NA
    Followers  : NA 
```

So the issue is with including mechanize in the script. Please help me in resolving this. Thnx !

These questions didnt help : [How to run Ruby scripts in Geektool?](https://stackoverflow.com/questions/8528536/how-to-run-ruby-scripts-in-geektool) , [Ruby, Mac, Geektool question, file access rights?](https://stackoverflow.com/questions/1883664/ruby-mac-geektool-question-file-access-rights)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:52:24.460

您将能够判断您是否没有尝试挽救错误。看起来我们的老朋友 ssl 验证错误，所以试试这个：

```
@agent = Mechanize.new
@agent.verify_mode = OpenSSL::SSL::VERIFY_NONE
tw_page = @agent.get url_tw 
```

我应该补充一点，您可能想确保您了解 OpenSSL::SSL::VERIFY_NONE 的后果

这里还有一个提示：

```
tweets = tw_page.at('a[@data-element-term="tweet_stats"] strong').text rescue 'N/A'
followers = tw_page.at('a[@data-element-term="follower_stats"] strong').text rescue 'N/A'
puts "Twitter :" + "\n"
puts "\tTweets     : #{tweets}"
puts "\tFollowers  : #{followers}" 
```

# php - using sql and php how can i insert same record in my database automatically in a fixed time of everyday?

> ID：11838103
> 
> 赞同：0
> 
> 时间：2012-08-07T01:23:38.830
> 
> 标签：php, sql

In one of my website i need to insert some row of data in my database every day at a fixed time. I want to do this automatically using sql and php.

How can i do this? please help me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T01:31:25.207

如果您在虚拟主机上，他们通常使用内置 cron 作业的 cPanel 系统。转到菜单，或搜索 Cron Jobs 并添加一个。

使用“php -q ScriptPath”行（无引号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T01:27:35.020

If you are on a linux system, look into setting up a cron job.

This will enable you to execute a php script that you specify at fixed time intervals.

[http://www.linuxweblog.com/crotab-tutorial](http://www.linuxweblog.com/crotab-tutorial)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T01:30:18.413

您可以在 linux 服务器中使用 cronjob 来执行自动任务以每天运行一次文件

在 Windows 中，还有一个名为 schedule yask 的内置程序，它可以执行相同的操作，因此您可以编写命令 .bat 文件以在 CLI php 中运行 php 文件，或者如果可能，请记住运行特定的网址 blabla.com/mussl.php完成你需要的..

# android - Why won't eclipse allow me to parse JSON?

> ID：11838112
> 
> 赞同：0
> 
> 时间：2012-08-07T01:25:16.087
> 
> 标签：android, eclipse, json, parsing, arrays

I want to parse the JSON file at this link: [http://maps.googleapis.com/maps/api/directions/json?origin=33.7489,-84.3881&destination=33.7514,-84.7478&sensor=false](http://maps.googleapis.com/maps/api/directions/json?origin=33.7489,-84.3881&destination=33.7514,-84.7478&sensor=false)

I want to parse the "html_instructions" string, from the "steps" array as such:

```
String googledirectionsapi = "http://maps.googleapis.com/maps/api/directions/json?origin=" + origin + "&destination=" + destination0 + "&sensor=false";                     
                    try {   
                        JSONObject googleObject = Directions.getJSONfromURL(googledirectionsapi);
                        JSONArray parsedGoogleDirections = googleObject.getJSONArray("routes").getJSONArray("steps");       
                        thing.setText(googledirectionsapi);
                        if(parsedGoogleDirections.equals("") ){
                            Toast.makeText(FindDealer.this, "Cannot find suitable route", Toast.LENGTH_LONG).show();
                        }else{                           
                             for (int i = 0; i < parsedGoogleDirections.length(); i++) {
                                    JSONObject instructions = parsedGoogleDirections.getJSONObject(i);              
                                    if (i == 0){
                                        String step1 = parsedGoogleDirections.getString("html_instructions");

                             }
                             }
                             }
                    }catch (JSONException e) {
                              Log.d("log_tag","JSON parsing error - Google Directions Api:" + e.getMessage());
                        } 
```

However, eclipse is giving me errors at:

```
.getJSONArray("steps");  //<-- The method getJSONArray(int) in the type JSONArray is not applicable for the arguments (String). 
```

and and also giving me errors at:

```
.getString("html_instructions"); //<--he method getString(int) in the type JSONArray is not applicable for the arguments (String) 
```

Why is eclipse showing these errors? I've never had this issue before. THank you in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T01:39:50.680

有一个类似的问题：[JSON parsing of Google Maps API in Android App](https://stackoverflow.com/questions/7237290/json-parsing-of-google-maps-api-in-android-app)

我认为您应该首先使用索引从 JsonArray 获取一个对象。然后你应该得到腿作为数组。然后你应该从腿数组中得到一个对象。然后你可以得到steps数组。

[https://stackoverflow.com/a/7237305/538408](https://stackoverflow.com/a/7237305/538408)

# windows-phone-7.1 - Windows Phone 内置应用栏旋转动画

> ID：11838118
> 
> 赞同：0
> 
> 时间：2012-08-07T01:26:15.060
> 
> 标签：windows-phone-7.1, windows-phone, application-bar

我的页面中有一个图像控件，支持横向和纵向布局。我想实现一个动画，当方向改变时旋转图像。这就像应用程序栏的内置旋转动画一样。但我现在没有任何想法。谁能帮我一把？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:58:20.220

至少有两种实现方式：

1) 使用 Expression Blend 中的 Fluid UI 功能捕捉 OrientationChanged 事件和动画布局。它允许您从一种视觉状态平滑过渡到另一种视觉状态。

```
 void PhoneApplicationPage_OrientationChanged(object sender, OrientationChangedEventArgs e) {
        if(Orientation==PageOrientation.PortraitUp) {
            VisualStateManager.GoToState(this, "VisualStatePortrait", true);
        }
        else {
            VisualStateManager.GoToState(this, "VisualStateLandscape", true);
        }
    } 
```

您还应该为横向和纵向布局定义视觉状态。有关如何声明它们的更多信息，您可以从[该](http://www.microsoft.com/design/toolbox/tutorials/windows-phone-7/layout-tips/#FluidUI)视频中找到。

2) 另一种方法是由 Microsoft 的 Windows Phone 开发人员[引入的。](http://blogs.msdn.com/b/delay/archive/2010/09/28/this-one-s-for-you-gregor-mendel-code-to-animate-and-fade-windows-phone-orientation-changes-now-supports-a-new-mode-hybrid.aspx)他的解决方案需要额外的代码，但更可定制：您可以在旋转、淡入淡出或混合动画之间进行选择。还包括一个代码示例。

# objective-c - UIWebView crashes when touching any inputs for logging details

> ID：11838121
> 
> 赞同：2
> 
> 时间：2012-08-07T01:27:11.083
> 
> 标签：objective-c, ios, xcode, uiwebview

I added a simple in-app UIWebView feature. I noticed that when ever I touch an input box to enter login details (facebook login,twitter login, forums login,etc) the application crashes. I have tried on more than one device. I even created a new project to test it out and the app still crashes.

Is there some restrictions on UIWebView from Apple ?

Note: I would post the UIWebView code but it's simple and popular and I'm posting my Q from my iPhone. Will post any if you ask.

# unix - Code formatting script / Pretty Printer - PHP, JavaScript, jQuery, HTML

> ID：11838122
> 
> 赞同：1
> 
> 时间：2012-08-07T01:27:19.673
> 
> 标签：unix, printing, standards

I saw a couple of questions that are a bit similar to my question but most of them are about a specific language or unanswered.

I am looking for a application/script that allows me to apply our coding standards to the code we commit to SVN (it is going to be a pre-commit SVN hook on our UNIX system(s)). There are a couple of things out there (php-beautifier and a couple of online things) but I can't really find anything that is used professionally and is capable of formatting multiple languages. I was just wondering if any of you are using something that is capable of doing this. And if so, what are you using?

I'm looking for an application that at least can process PHP, JavaScript, jQuery and HTML. The more the better of course. Also, being able to define the rules myself is a must.

# sql-server-2008-r2 - How do you do feature flags with stored procedures

> ID：11838126
> 
> 赞同：3
> 
> 时间：2012-08-07T01:28:22.777
> 
> 标签：sql-server-2008-r2, continuous-delivery

I have a system I'm working on that has almost all of its logic in SQL Server stored procedures. As part of improving the development practices we want to move to a continuous delivery model using feature flags (aka toggles) to enable functionality in production.

How can I write the stored procs so that they check the flags efficiently and don't add load to the database by hammering a config table every time the procs are called?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T02:40:06.380

我不相信您需要针对您不知道会存在的性能问题过早地进行优化。如果您的表有 100 行并且经常被引用，那么几乎可以肯定它 100% 的时间都在内存中，并且访问将不是问题。

我们使代码向前兼容的一种方法是向过程添加一个具有默认值的参数，当应用程序准备好时，应用程序可以“升级”。这可以通过配置文件参数来完成，但大概必须重新编译应用程序才能利用新功能。

举个简单的例子：

```
CREATE PROCEDURE dbo.doStuff
  @version DECIMAL(10,2) = 1.0
AS
BEGIN
  SET NOCOUNT ON;

  IF @version >= 1.1 
  BEGIN
    PRINT 'This only executes if the app tells us it is 1.1 or newer.';
  END

  IF @version >= 2.5
  BEGIN
    PRINT 'This only executes if the app tells us it is 2.5 or newer.';
  END
END
GO 
```

当所有应用程序都是最新的时，您可以在参数上增加基本版本。否则，它们都可以按照自己的速率进行更新，并且模式可以以不同的速率进行。如果您可以将每个功能与顺序点发布相关联，那么这应该不会太难管理。但我再次坚持认为，100 行表不会像你想象的那样拖累你的表现……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T02:36:13.047

您可以使用[CONTEXT_INFO](http://msdn.microsoft.com/en-us/library/ms187768.aspx)在会话或连接的生命周期内存储 128 个字节的标志。

创建一个函数来检索标志值：

```
create function dbo.GetConfigFlags() returns VarBinary(128)
  begin
  -- Retrieve the configuration flag values.
  --   This can be context sensitive, e.g. return different values based on user, server, ... .
  declare @Result as VarBinary(128)
  if Context_Info() is NULL
    set @Result = 12345 -- Get value from table or hard code here.
  else
    set @Result = Context_info()
  return @Result
  end 
```

如果尚未加载，则使用获取标志的代码启动每个存储过程：

```
if Context_Info() is NULL
  begin
  declare @ConfigFlags as VarBinary(128) = dbo.GetConfigFlags()
  set Context_Info @ConfigFlags -- This is not allowed within a function.
  end
select Context_Info() -- Demo. 
```

丑陋的部分是管理位的含义。

# java - 时间将重置为零 - 我该如何补偿？

> ID：11838128
> 
> 赞同：0
> 
> 时间：2012-08-07T01:28:49.483
> 
> 标签：java, android

```
SystemClock.uptimeMillis() 
```

来自 Android SystemClock 的此调用将在“Maxes Out”之前重置为零

现在我用它来制作动画、运动等，下面是一个重置基本上会冻结我的应用程序的例子。

```
if (currentTime > frameTime + sequenceTime)
{
    frameTime = currentTime;
} 
```

这里的问题`currentTime`是说 50 然后`frameTime`设置为 50 对吗？理想情况下`currentTime`会增加，`SystemClock.uptimeMillis()`但如果它重置？`frameTime`与如何修复此问题或重置`currentTime`所有对象的时间相比，当前时间变得非常小？

如果我有不同的对象有类似的困境，这只是一个小例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T01:39:03.833

根据我对文档的阅读，“正常运行时间”时钟仅在设备重新启动时才会重置。除非您的应用程序……以某种方式……设法在重新启动后继续运行，否则您不必担心时钟重置。

（另一方面，如果您的应用程序确实需要在重启后继续播放动画，那么也许您应该使用“currentTimeMillis”时钟。Android 文档[`SystemClock`](http://developer.android.com/reference/android/os/SystemClock.html)描述了替代方案。）

* * *

文档说这个*“注意：这个值可能会偶尔重置（在它否则会环绕之前）。”* .

这对我来说没有多大意义。时钟是毫秒时钟，并以 long 形式返回，因此您不会期望它会*回绕*。（2^64 毫秒是一个非常非常长的时间。）我能想到的唯一解释是某些设备使用 32 位硬件定时器来实现这个时钟......这有点蹩脚。

# java - Java 布尔表达式行为

> ID：11838129
> 
> 赞同：5
> 
> 时间：2012-08-07T01:28:55.920
> 
> 标签：java, boolean

这是我在这里的第一篇文章，所以请原谅任何协议错误。

我的问题只是想了解以下 Java 代码发生了什么。我完全理解使用括号可以澄清一切，但结果输出似乎与 Java 操作顺序的约定背道而驰。

```
public class Tester
{
   public static void main(String[] args)
   {
    int total=9, num=13;
    if (total>4 || ++num>15 && total>0)
    {
           System.out.println("short");
    }
    System.out.println(num);
   }
} 
```

输出为：short 13

很明显 ++num 没有执行。如果遵守了严格的操作顺序，那应该是第一件事。它没有。所以接下来是&&。如果 && 是按照 || 的优先顺序完成的，那么同样... ++num 应该首先发生。它没有。所以，对我来说，输出似乎是由 || 决定的。首先执行，将 ++num 短路，然后与 && 一起使用，导致打印*短路。*是否只是忽略了运算规则的顺序，而布尔表达式从左到右执行？增量运算符是否导致不规则行为？

感谢您提供有关此代码实际情况的任何见解。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T01:32:10.180

这与优先级/关联性（处理如何解析表达式）无关……这与 Java 评估顺序有关——*从左到右*。您似乎误解了短路逻辑的工作原理。

> `&&`and运算符对两个布尔表达式`||`执行*条件与*和*条件或运算。*这些运算符表现出“短路”行为，这意味着仅在需要时才评估第二个操作数。

* * *

现在，让我们尝试逐步评估这个表达式......

```
total > 4 || ++num > 15 && total > 0 
```

由于`total > 4`评估为`true`，因此条件评估为`true`并`if`立即采用分支，而不是评估条件的其余部分。

如果更改`total`为 equal `4`，则`total > 4`短路 OR 的左操作数 ( ) 是`false`，因此它计算右操作数 ( `++num > 15 && total > 0`)。

如果更改`num`为 equal `15`，则短路 AND 左操作数 ( `++num > 15`) 的计算结果为`true`，因此它最终计算 AND 右操作数 ( `total > 0`) 以确定条件是否为`true`。如果`total > 0`为假，则条件也是`false`。

下面是为了清晰突出流程而重写的代码。

```
if (total > 4) {
  System.out.println("short");
} else {
  if (++num > 15) {
    if (total > 0) {
      System.out.println("short");
    }
  }
}
System.out.println(num); 
```

[您可以在相关的 Java 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)中阅读有关 Java 条件运算符的更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T01:31:59.537

通过使用双精度或 (||)，您可以激活 java 的短路；（如果您不想这样做，请使用单个 |）。一旦它达到一切都为真的程度，并且它遇到短路或（||），（或某些错误，并且它遇到短路&（&&）），它就会爆发。所以在你的情况下，total 大于 4，所以它停在那里（由于 ||），并返回 true 到 if 语句，并打印出简短；它永远不会到达增加 num 变量的部分，因为它认为不需要检查

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T01:32:51.690

发生了什么是[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。`total > 4`就是`true`，使整个有条件`true`。我们甚至不需要看后面的内容`||`。这是一种非常常见的运行时优化，也出现在 C、C++ 和 Javascript（以及许多其他语言）中。你观察到了它的副作用。

请注意，短路可以对您有利（例如，检查`||`or的左侧`&&`以获取（非）`null`值），或者它会使您感到困惑（就像在您的问题中所做的那样）。明智地使用它，年轻的学徒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T01:38:01.400

计算机会在你下面这样的布尔表达式 total>4 || (++num>15 && 总计>0) 。它就像标准 SQL 中的表达式。它找到 && 并在左侧和右侧抓取 2 个表达式，然后像我一样将它们放在括号中。在您的代码中，total=9>4 和 ++num=14<15 和 total=9>0 所以结果为 true ||(false && true) = true。终端打印出“short”和 num，即 13。

希望我的回答对你有所帮助。如果我错了，请纠正我

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T04:58:04.690

我认为在 if 子句中使用时它不会改变变量的实际值。存储在内存中的值保持不变。就像表达式中的 num+1>15

# php - 在元素内搜索字符串，然后将其放入条件语句中

> ID：11838132
> 
> 赞同：0
> 
> 时间：2012-08-07T01:29:06.850
> 
> 标签：php, javascript, jquery

例如，我有一个输入、锚标签、除数或任何可能有值的元素。如何在元素内部进行搜索，例如查看其中是否有
属性或我想要的任何值，然后将其放入条件语句（如 if 和 elseif 语句）中并检查选择器是否有
内部以及是否有警报是的，否则警报没有或在php中，如果有
内部则回显是，否则回显是。

我试过这个。假设我有一个 textarea

```
var isFound = $("#apostform textarea").val().search("<br>");
alert ('there is'); 
```

问题：即使我们
在指定的文本区域内没有发现警告框是否仍然被执行？

我需要在 javascript、jquery 和 php 中完成此操作。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T01:34:48.620

用jQuery：

```
if ($("element[your-attribute]").length) {
    //element has the attribute, do-something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T01:41:18.420

DOM 对象具有属性，要在所有属性中搜索特定值，您可以使用 for..in 循环：

```
for (var prop in element) {

  if ( element[prop] == 'some value' ) {

    // do stuff

  } else {

    // do other stuff

  }
} 
```

或者如果您知道您所追求的属性并且只想看看它是否具有真实价值：

```
if (element.property) {
  // do stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T01:42:34.133

这是您需要的代码片段

```
//retrieve elements having a special attribute
//for example input tags who are radio buttons
$('input[type=radio]'); 
```

您还可以使用 .attr() 方法来检索和检查元素的属性

```
if($myElement.attr('my_attribute').equals('desiredValue')){ /* do this   */} 
```

提醒使用以下内容：

```
window.alert('my message here'); 
```

# .net - Path.GetFileName 错误？

> ID：11838136
> 
> 赞同：1
> 
> 时间：2012-08-07T01:30:23.440
> 
> 标签：.net

我的 .NET 应用程序的一部分需要接受输入字符串（表示 URI）并仅返回文件名（如果适用，还需要扩展名）。

现在`Path.GetFileName`对于大多数路径都可以做到这一点，除了以下例外：如果输入字符串是一个仅由域名（例如 example.com）和端口号（例如 10210）组成的 HTTP 路径，则`GetFileName`返回端口号。

用简单的英语：输入字符串是`http://example.com:10210`，它是一个链接到互联网广播流的 URI。当`Path.GetFileName`使用该值调用时，返回值为`10210`.

这是预期的行为吗？我不记得有任何用冒号分隔路径段的平台。返回值不应该是`String.Empty`吗？

**编辑**

看起来干净的解决方案将是 和 之间的混搭`Uri.LocalPath`，`System.Web.VirtualPathUtility.GetFileName`但这意味着将您的项目从客户端配置文件重新定位到完整框架。

我想我会在最后一个正斜杠符号之前（包括）删除所有内容。无论如何，分隔符在我的场景中永远不会改变。这样做会给我`example.com:10210`作为返回值，这对我正在做的事情很有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T01:36:38.420

查看[Path class 上的文档](http://msdn.microsoft.com/en-us/library/3bdzys9w)，他们似乎并不打算将它与 http 或 ftp 或类似的东西一起使用。所有示例都围绕本地文件路径和网络共享路径。

基于来自网络的其他一些轶事信息，[例如这篇关于 Path.Combine 的文章](http://johnnycoder.com/blog/2008/06/08/pathcombine-for-urls/)，我被引导相信您不应该将 Path 用于 HTTP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T01:39:02.073

我不能确定这一点。这是我的猜测。。

`Path`类旨在用于具有底层文件系统的路径。（您的 HTTP 请求可能不指向文件系统。它可能只是一个动态生成的资源。）

您应该使用`Uri`类进行 URI 解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T01:41:35.893

`Path.VolumeSeparatorChar`（冒号）不是调用结果的一部分，`Path.GetInvalidPathChars`用于`Path.GetFileName`验证输入是否正常。不幸的是，这似乎是预期的行为。

# php - 按 ID 分组并显示来自 mysql 的所有结果

> ID：11838138
> 
> 赞同：1
> 
> 时间：2012-08-07T01:30:44.583
> 
> 标签：php, mysql, arrays, group-by

我有 2 张桌子

```
tabcats - Cat_Id, Cat_Name
tabnews - News_Id, News_Name, Cat_Id 
```

所以我试图在数据库上进行选择并返回所有结果，但使用

```
Group by Cat_Id 
```

所以我的结果应该是

假设我有 3 个类别和 5 个新闻

结果

## 猫名 1

*   新闻_名称 (1)
*   新闻_名称 (2)

## 猫名 2

*   News_Name (3)
*   News_Name (4)

## 猫名 3

*   新闻名称 (5)

我读了一些关于使用的东西，`LEFT OUTER JOIN`但我不清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T01:50:37.357

首先你要清楚你自己。我以为你试图做的是选择一些最新消息，不是吗？尝试与此类似的查询：*以下查询查找 Comp 提供的每门课程的课程 ID、学期、年份和标题。科学。部*

```
 select section.course_id, semester, year, title from section, course where section.course_id = course.course_id  and dept_name = ‘Comp. Sci.' 
```

订购可按以下方式进行：

```
return(mysql_query("SELECT  * FROM tabNews GROUP BY news_id DESC LIMIT *counts*")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T01:52:04.007

这是列出所有新闻以及按猫名排序的猫名，然后是新闻名。

```
SELECT News_Name,Cat_name from tabNews n left join tabCat c on n.cat_id=c.cat_id 
ORDER BY c.cat_name,n.news_name 
```

# javascript - 如何将 LARGE jQuery 对象数组合并为一个？

> ID：11838139
> 
> 赞同：0
> 
> 时间：2012-08-07T01:31:05.170
> 
> 标签：javascript, jquery, performance

我正在尝试使用 jQuery 的`add`功能......但是当合并 3000+ dom 元素的对象时，它会冻结。有没有更快的方法可以实现这一目标？

```
var a = [];
a[0] = $('small');
a[1] = $('.no');
a[2] = $('.yes');
//a is array of jQuery objects

//make b an empty jQuery object. loop through a, adding each to b
var b = $();
for(var i in a) {
    b = b.add(a[i]);
}
//browser freezes for a bit
console.log(b); 
```

编辑：不要质疑为什么我有这么多 DOM 元素，我正在对我正在编写的 jQuery 插件进行压力测试：D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T01:34:05.900

尽管我的评论，你可以做

`$('small, .no, .yes')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T01:34:55.057

这可能会有所帮助：API：[http ://api.jquery.com/jQuery.merge/](http://api.jquery.com/jQuery.merge/)

```
$.merge( [0,1,2], [2,3,4] ) 
```

如果我遗漏了什么，请让我知道，休息一下这个 api 应该可以帮助你合并。`:)`

该`$.merge()`操作形成一个数组，其中包含两个数组中的所有元素。保留数组中项目的顺序，并附加第二个数组中的项目。$.merge() 函数具有破坏性。它更改第一个参数以添加第二个参数。

```
var a = [];
a[0] = $('small');
a[1] = $('.no');
a[2] = $('.yes');

// now to merge 2 arrays

$.merge( a, b) // a & b are arrays. 
```

# .net - 控制初始化-完成指示？

> ID：11838140
> 
> 赞同：0
> 
> 时间：2012-08-07T01:31:11.223
> 
> 标签：.net, vb.net, winforms, vb6, controls

编写自定义控件（继承 Control 而*不是*UserControl）。

在控件的构造函数中，控件的属性值仍然无效（例如位置、高度、宽度、文本等）。只有在构造函数返回后才调用属性设置器。

考虑控制对象初始化已经完成的时间点，即在所有属性的值已经初始设置之后，并且对象准备好使用（即第一次绘制）。这个时间点可以在运行时被截获吗？**在第一次绘制控制表面**之前，即**在“OnPaint”事件处理程序之前，**是否存在某种“就绪”或“初始化完成”控制事件，或其他一些可以在运行时截获的指示**第一次调用**？

非常感谢。

**在 VB2005 上使用 Winforms**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T23:10:10.487

看看 [Control Inspector](http://www.codeproject.com/Articles/3317/ControlInspector-monitor-Windows-Forms-events-as-t) 这是一个很酷的小实用程序，可以显示控件的事件顺序。事件中的屏幕截图可能会回答您的问题。

# ios - 如何阻止 Xcode 忽略我的 iOS 应用程序的 CoreLocation.framework？

> ID：11838144
> 
> 赞同：0
> 
> 时间：2012-08-07T01:31:33.770
> 
> 标签：ios, xcode, core-location

我目前正在通过 Xcode 构建一个利用 corelocation.framework 的 iOS 应用程序，但不幸的是我遇到了一些麻烦。我下载了 Apple 的 LocateMe 示例应用程序，当我通过模拟器运行它时，它运行良好（没有错误或警告）。

然后，我构建了一个空的单页应用程序，并向其中添加了 corelocation.framework 文件。当我编译并运行它时，我收到一个警告：

```
 (null): Ignoring file/Users/Andrew/Documents/GoogleDrive/Developer/
 Xcode/Apps/GetLocation/CoreLocation.framework/CoreLocation, file
 was built for unsupported file format ( 0xce 0xfa 0xed 0xfe 0x c 0x
 0 0x 0 0x 0 0x 9 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ) which is not
 the architecture being linked (i386):/Users/Andrew/Documents/
 GoogleDrive/Developer/Xcode/Apps/GetLocation/CoreLocation.framework
 /CoreLocation 
```

我尝试使用 Finder 找到框架并添加它，并将框架从 Apple 的应用程序拖到我的应用程序中。两者都会产生相同的警告。

除了文件目录似乎很好（这是我的应用程序存储的地方）之外，我不能对上述错误说太多，而且我相信 i386 代表了我的 MacBook Air 的集成图形芯片组。

我还尝试将 Apple 的应用程序略读到基本级别，但这很困难——他们决定制作一个相当复杂的应用程序来代表这项技术。

不幸的是，我对这一切的了解都需要改进，我确实觉得我在完成这项任务，但我有赌注——需要在 15 日之前完成这项工作！

因此，如果有人可以就为什么会生成此警告以及如何解决它提供一些指导，我们将不胜感激。

**更新**

我仔细查看了 Apple 的 LocateMe 应用程序，发现它是针对 iOS 3.2 构建的。当我将其更改为 iOS 5.1 时，一切都很好，除了一个错误 - locationServicesEnabled 已弃用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T01:35:28.853

查看您的错误报告，您似乎已经设法将其复制`CoreLocation.framework`到您的项目目录中。

```
file/Users/Andrew/Documents/GoogleDrive/Developer/Xcode/Apps/GetLocation/CoreLocation.framework/CoreLocation 
```

我不知道你是怎么把它弄到这里的，但是你需要做的第一件事是从那个位置**删除 .framework 文件**，然后在你的 Xcode 项目中删除对 CoreLocation.framework的现在*红色的引用。*

然后执行以下操作：

*   在导航器中单击您的 xcode 项目以调出项目设置。
*   点击你的目标
*   点击“构建阶段”
*   展开“将二进制文件与库链接”部分
*   单击“+”并开始输入“CoreLocation”
*   选择出现的那个

**旁注：**

当您在上面的第 5 个要点中选择 CoreLocation.framework 时，请确保您选择的是 iOS 5.1 文件夹引用下方的 CoreLocation.framework。

# jquery - Jquery 动画滞后

> ID：11838155
> 
> 赞同：2
> 
> 时间：2012-08-07T01:32:58.387
> 
> 标签：jquery, lag

我已经让我的网站正常工作了，还有很多错误需要解决，尽管当我在本地构建网站时，并使用“类别”按钮过滤画廊，它根本没有滞后，如果你切换回来并与过滤器按钮，你会看到我在说什么。我不知道如何复活这个:(

我正在使用 quicksand.js 插件，这实际上定义了我的画廊，我已经包含了评论，所以你不必阅读太多！:( :(

[http://shannonhochkins.v5.cloudsvr.com.au/](http://shannonhochkins.v5.cloudsvr.com.au/)

```
//Gallery

$(document).ready(function(){
    var limit = 28
    var items = $('#stage li'),
        itemsByTags = {};

        // Looping though all the li items:

        $('#stage li').each(function(i){

            var elem = $(this),
                tags = elem.data('tags').split(',');

            // Adding a data-id attribute. Required by the Quicksand plugin:
            elem.attr('data-id',i);

            $.each(tags,function(key,value){

                // Removing extra whitespace:
                value = $.trim(value);

                if(!(value in itemsByTags)){
                    // Create an empty array to hold this item:
                    itemsByTags[value] = [];
                }

                // Each item is added to one array per tag:
                itemsByTags[value].push(elem);
            });
        });

        // Creating the "Everything" option in the menu:
        createList('Everything',items);

        // Looping though the arrays in itemsByTags:
        $.each(itemsByTags,function(k,v){
            createList(k,v);
        });

        $('#galleryNav a').live('click',function(e){

            var link = $(this);
            link.addClass('active').siblings().removeClass('active');
            // Using the Quicksand plugin to animate the li items.
            // It uses data('list') defined by our createList function:
            $('#stage').quicksand(link.data('list').find('li').slice(0, limit).show().animate({opacity:1.0}, 300));

            e.preventDefault();         
        });

        $('#galleryNav a:first').click();

        var high_performance = true;  
        var $performance_container = $('#performance-toggle');
        var $original_html = $performance_container.html();

        $performance_container.find('a').live('click', function(e) {
          if (high_performance) {
            $preferences.useScaling = false;
            $performance_container.html('CSS3 scaling turned off. Try the demo again. <a href="#toggle">Reverse</a>.');
            high_performance = false;
          } else {
            $preferences.useScaling = true;
            $performance_container.html($original_html);
            high_performance = true;
          }
          e.preventDefault();
        });

        function createList(text,items){

            // This is a helper function that takes the
            // text of a menu button and array of li items

            // Creating an empty unordered list:
            var ul = $('<ul>',{'class':'hidden'});

            $.each(items,function(){
                // Creating a copy of each li item
                // and adding it to the list:

                $(this).clone().appendTo(ul);
            });

            ul.appendTo('#container');

            // Creating a menu item. The unordered list is added
            // as a data parameter (available via .data('list'):

            var a = $('<a>',{           
                href:'#',
                id: text +'li',
                data: {list:ul}
            }).appendTo('#galleryNav');
        }

        $("#galleryNav #Animationli").append("<span class='Animation'></span>");
        $("#galleryNav #Modellingli").append("<span class='Modelling'></span>");
        $("#galleryNav #Environmentli").append("<span class='Environments'></span>");
        $("#galleryNav #Riggingli").append("<span class='Rigging'></span>");
        $("#galleryNav #Pluginsli").append("<span class='Plugins'></span>");
        $("#galleryNav #Websitesli").append("<span class='Websites'></span>");

        $("#galleryNav a").live('mouseenter',function() {
            $(this).find('span').stop(true).animate({opacity: 1.0, marginTop: -50}, 400);
        });
        $("#galleryNav a").live('mouseleave',function() {                       
            $(this).find('span').animate({opacity: 0.5, marginTop: 0}, 400);
        });
        $(".stage li img").live('mouseenter',function() {
            $(this).stop(true);
            $(this).animate({width: "80%",opacity: 0.45}, 500);

        });
        $(".stage li img").live('mouseleave',function() {
            $(this).animate({width: "94%", opacity: 1.00}, 500);
        }); 
        $('#Animationli,#Riggingli,#Environmentli,#Modellingli,#Pluginsli,#Websitesli').live('click', function(event){

            var x = event.pageX,
                y = event.pageY;

            $('#cloudNavGallery').stop(true).animate({
                top:y,
                left:x
            },600);
        });

    initRoulette();
}); 
```

# html - 在内联菜单中的 LI 标记中的 A 标记中换行

> ID：11838156
> 
> 赞同：-2
> 
> 时间：2012-08-07T01:32:59.510
> 
> 标签：html, css, css-float

请问，是否可以在内联菜单中将标签的文本包装在`<a>`固定大小的标签内？`<li>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T01:45:32.727

是的，只要您`float: left`在`<li>`标签上使用而不是`display: inline`. 您不应该在内联元素上使用固定宽度。

示例：http: [//jsfiddle.net/CprcT/](http://jsfiddle.net/CprcT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T01:47:04.780

我假设你的意思是这样的......

```
<a href="/my/link"><li>My Link</li></a> 
```

在这种情况下，技术上是的......但你为什么要这样做？像这样反过来做不是更有意义吗...

```
<li class="menu"><a href="/my/link">My Link</a></li> 
```

# list - 将列表组合成一个数组列表（C#）

> ID：11838163
> 
> 赞同：0
> 
> 时间：2012-08-07T01:33:53.977
> 
> 标签：list, arraylist

我有一个列表，我想将其他三个列表复制到其中。

```
// The main list
List<List<string>> list= new List<List<string>>();

// The lists which I want to combine
ArrayList sublist1= new ArrayList();;
ArrayList sublist2= new ArrayList();;
ArrayList sublist3= new ArrayList();; 
```

我尝试的是：

```
list[0].AddRange(sublist1);
list[0].AddRange(sublist2);
list[0].AddRange(sublist3); 
```

它不起作用，因为它是多维列表。我需要这种类型的清单来制定未来的计划。

我怎样才能完成它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T01:46:04.267

正如评论中已经提到的，只需使用`List<string>`而不是`ArrayList`. 它与多维数组无关，只是类型不匹配。

然后你说它`List<List<string>>`基本上意味着创建列表类型，它将包含`List<string>`作为项目（尖括号中的部分），所以你需要添加它们，而不是`ArrayList`s。同样`List<string>`意味着将包含`string`项目的列表类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T01:48:22.680

将子列表的类型更改为某些`IEnumerable<string>`（字符串 [] 或`List<string>`其他）

```
var sublist1 = new string[] {};
var sublist2 = new string[] {};
var sublist3 = new string[] {}; 
```

或者做演员

```
list[0].AddRange((IEnumerable<string>) sublist1);
list[0].AddRange((IEnumerable<string>) sublist2);
list[0].AddRange((IEnumerable<string>) sublist3); 
```

因为您正在尝试使用 AddRange 方法，`System.Collections.Generic.List<T>` 并且该方法的签名是

```
public void AddRange(System.Collections.Generic.IEnumerable<T> collection) 
```

所以它需要 IEnumerable 作为参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T01:52:09.677

正如在评论中一样，您需要传递一个遵循 IEnumerable 的类型。例如，您可以将 ArrayLists 更改为 List

```
// The main list
List<List<string>> list = new List<List<string>>();

// The lists which I want to combine
var sublist1 = new List<string>();
var sublist2 = new List<string>();
var sublist3 = new List<string>();

list[0].AddRange(sublist1);
list[0].AddRange(sublist2);
list[0].AddRange(sublist3); 
```

# php - Propel：尝试创建子对象时未定义的方法

> ID：11838169
> 
> 赞同：2
> 
> 时间：2012-08-07T01:34:37.010
> 
> 标签：php, inheritance, propel

推进版本：**1.6.7**

`PropelException`当我尝试在我的应用程序中运行以下代码时，我得到了一个（此代码在`AdminController`控制器操作下调用的类中运行）。有问题的代码尝试创建一个新`ContentPage`对象，该对象是该类的子`Page`类并使用 Propel 的**具体表继承**：

```
$page = new ContentPage;
$page->fromData($_POST); // Modified, more secure version of fromArray();
$page->save(); 
```

除了：

> 调用未定义的方法：getPage

`getParentOrCreate`使用在 Propel 生成的类中的 Propel生成的方法中调用的方法`BaseContentPage`。

```
//this prevent issue with deep copy & save parent object
if (null === ($parent = $this->getPage($con))) { 
```

我的`schema.xml`文件如下所示：

```
<!-- Page -->
<table name="page" phpName="Page">
  (columns)
</table>

<!-- ContentPage : Page -->
<table name="contentpage" phpName="ContentPage">
  <behavior name="concrete_inheritance">
    <parameter name="extends" value="page" />
  </behavior>
</table> 
```

我的`schema.xml`代码有问题吗，还是你们已经看到并解决了这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:35:51.650

您的架构可能没问题，但我今天偶然发现了同样的错误。我找到了一种解决方法并在 github 上创建了一个问题。简而言之，就是注释掉concrete_inheritance行为源代码中的三行代码，重新生成模型，如果还没做，更新数据库。

[https://github.com/propelorm/PropelBundle/issues/206](https://github.com/propelorm/PropelBundle/issues/206)

# jquery - 使用 jQuery 插件未捕获的 TypeErrors

> ID：11838174
> 
> 赞同：1
> 
> 时间：2012-08-07T01:35:22.480
> 
> 标签：jquery

首先，非常感谢这个社区。总是在这里找到答案，现在我正在使用它，我很喜欢它！当我可以回馈答案时，我会的！感谢你们提供了最快、最高效、最有帮助的社区。保持！

我今天的问题是我正在尝试使用的一个 jQuery 插件，当您单击它在灯箱中打开的其中一个图像时，它会获取 InstaGram 提要并将其放在网站上。

但是，它不会加载，我在网络检查器中遇到两个问题：

> 未捕获类型错误：无法读取未定义 instaviewr.js 的属性“fn”：1未捕获类型错误
> ：对象 [object Object] 没有方法“simpleInstagramFancybox”/jqueryissue/:73

这是网站：[http](http://tempsmz.hostzi.com/jqueryissue/) : //tempsmz.hostzi.com/jqueryissue/ 我做错了什么吗？

任何我可以包括的细节我都会很乐意做！

# css - 在硬币滑块周围设置边框

> ID：11838175
> 
> 赞同：1
> 
> 时间：2012-08-07T01:35:23.333
> 
> 标签：css, slider

我想像这样在滑块周围放置一个白色边框 >> ![在此处输入图像描述](../Images/45f83f13fe9a231b1d6ea7ac41a3ac5f.png)。

我尝试使用`.coin-slider img { border: 2px solid white;}`，但它没有用。

硬币滑块链接 >>[硬币滑块官方网站](http://workshop.rs/2010/04/coin-slider-image-slider-with-unique-effects/)

HTML：

```
<div id='coin-slider'>

                     <img src='images/slideshow1x.png' />
                            <span>
                                Description for img01
                            </span>

                     <img src='images/slideshow2x.jpg' />
                            <span>
                                Description for img01
                            </span>

                     <img src='images/slideshow3x.jpg' />
                            <span>
                                Description for img01
                            </span>

                     <img src='images/slideshow4x.jpg' />
                            <span>
                                Description for img01
                            </span>

</div> 
```

CSS：

```
.coin-slider { overflow: hidden; zoom: 1; position: relative; }
.coin-slider img { border: 2px solid white;}
/*.coin-slider a{ text-decoration: none; outline: none; border: none; } */

.cs-buttons { font-size: 0px; padding: 10px; float: left; }
/*.cs-buttons a { margin-left: 5px; height: 10px; width: 10px; float: left; border: 1px solid #B8C4CF; color: #B8C4CF; text-indent: -1000px; }*/
.cs-active { background-color: #B8C4CF; color: #FFFFFF;}

.cs-title { width: 545px; padding: 10px; background-color: #000000; color: #FFFFFF; }

.cs-prev, 
.cs-next { background-color: #000000; color: #FFFFFF; padding: 0px 10px; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T01:39:06.773

在您的 HTML 中，`coin-slider`是`id`of the `div`，而不是`class`，而在您的 CSS 中，您指的是`.coin-slider`任何地方。

在您的 HTML 中更改`<div id='coin-slider'>`为`<div class='coin-slider'>`，一切正常。

[这](http://jsfiddle.net/4kqjD/)是一个演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-12T10:17:59.053

***硬币滑块的白色边框***可以通过添加样式来设置

```
border: 2px solid white; 
```

到级联样式表“coin-slider-style.css”为

```
.coin-slider {overflow:hidden; zoom:1; position:relative; border:2px solid white;} 
```

# bash - bash脚本中的换行

> ID：11838179
> 
> 赞同：5
> 
> 时间：2012-08-07T01:35:43.520
> 
> 标签：bash, newline

在我的公司风格指南中，它说 bash 脚本不能超过 80 行。所以我有这个巨大的 sed 替换超过两倍的时间。我怎样才能把它分成更多的行以便它仍然有效？我有

```
sed -i s/AAAAA...AAA/BBBBB...BBB/g 
```

我想要类似的东西

```
sed -i s/AAAAA...AAA/
BBBBB...BBB/g 
```

仍然具有相同的效果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T01:44:46.917

## 可能的清理方法

1）将您的 sed 脚本放入文件中

```
sed -f script [file ...] 
```

2）使用正则表达式速记

```
sed 's!A\{30,\}!BBBBB...BBBB!g' 
```

3) 使用 Bash 变量来帮助分解它

```
regex="AAAA.AAAAAA"
replace="BBBB...BBBBBBB"
sed "s/${regex}/${replace}/g" 
```

## 什么不能做

1）转义换行符以将其分成多行。

你最终会在你的 sed 脚本中得到一个你不想要的换行符。

```
sed 's/THIS IS WRONG /\
AND WILL BREAK YOUR SCRIPT/g' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T01:38:34.130

使用 shell 连续字符，通常是`\`.

```
[~]$ foo \
> and \
> bar 
```

不需要空间：

```
[~]$ foo\
> and\
> bar\
> zoo\
> no space\
> whee!\ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T01:38:48.000

只需在换行符之前插入反斜杠字符：

```
sed -i s/AAAAA...AAA/\
BBBBB...BBB/g 
```

# android - 用于跟踪对话中哪个人说得最多的应用程序

> ID：11838187
> 
> 赞同：1
> 
> 时间：2012-08-07T01:36:32.387
> 
> 标签：android, iphone, statistics

我想到了一个应用程序，它可以在打完电话后向您显示您说话的时间百分比以及您作为对话伙伴说话的时间百分比。

为此，我有两种概念方法，我想知道这两种方法中哪一种最适合这个应用程序。

*   语音识别 - 在通话期间/通话后，应用程序会分析音频。根据您在对话中出现的声音量，它会计算一个百分比
*   数据识别——我假设当你说话时手机上传的数据比你沉默时更多。根据 kbps 的数量，可以确定通话分布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T01:47:31.490

您无法访问电话对话数据本身，但您可以获得上传/下载统计信息。有一些应用程序可以通过其他应用程序跟踪 3g 数据（现在大多数电话都使用 3g）。您可以在来电时开始跟踪，过滤掉其他应用程序的数据流量，然后在电话结束时结束。通过这种方式，您可以了解传入和传出的流量。您必须事先进行一些基本测试，因为除了声音本身之外，还会传输大量开销数据。您可以进行一些测试，看看通话量和数据流量之间是否存在相关性（以及程度如何）（应该存在）。

# sql - sql sum 不同的列值降序

> ID：11838191
> 
> 赞同：-2
> 
> 时间：2012-08-07T01:36:46.730
> 
> 标签：sql, sql-server, sql-server-2008

我有这个查询：

```
 Available Total Usage

7000.0     7021.9
7000.0    -15000.00
7000.0    -7700.85 
```

我想创建新列以降序对两列求和。我希望的结果是

```
Available         Total Usage         Total
7000.0    7021.9 -700.85+(-15000.00) = -15700.85
7000.0    -15000.00 7000+(-7700.85)  = -700.85
7000.0    -7700.85  7000 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T02:17:24.860

尝试这个：

```
with cte as(select Available, [Total Usage], Available+[Total Usage] as Total from <table>)
select * from CTE order y Total 
```

# sql - 在 PLSQL 中检索列名和数据类型

> ID：11838196
> 
> 赞同：1
> 
> 时间：2012-08-07T01:37:27.660
> 
> 标签：sql, plsql

我正在编写一个 PL SQL 块来检索数据库中表的所有列和数据类型。我能够获取列，但不能获取数据类型。寻找一个好的方法的建议。任何帮助，将不胜感激。我的代码如下

```
ACCEPT p_1 PROMPT 'Please enter the Table Name'

DECLARE
    v_table_name    VARCHAR2(40) :='&p_1';
    -- First cursor 
    CURSOR get_tables IS    
        SELECT DISTINCT table_name 
        FROM user_tables 
        WHERE UPPER(table_name) = UPPER(v_table_name);
    --Second cursor 
    CURSOR get_columns IS
        SELECT DISTINCT column_name
        FROM user_tab_columns
        WHERE table_name = v_table_name;
    v_column_name   VARCHAR2(100);
    -- Third Cursor
    CURSOR get_types IS
        SELECT data_type 
        FROM user_tab_columns
        WHERE table_name = v_table_name;

    v_data_type user_tab_columns.data_type%type;
BEGIN
    -- Open first cursor
    OPEN get_tables;
    FETCH get_tables INTO v_table_name;
    DBMS_OUTPUT.PUT_LINE(' ');
    DBMS_OUTPUT.PUT_LINE('Table = ' || v_table_name );
    DBMS_OUTPUT.PUT_LINE('=========================');
    CLOSE get_tables;
    -- Open second cursor
    OPEN get_columns;
    FETCH get_columns INTO v_column_name;
    WHILE get_columns%FOUND LOOP
        DBMS_OUTPUT.PUT_LINE('  ' || v_column_name);
        FETCH get_columns INTO v_column_name;
    END LOOP;
    CLOSE get_columns;
    --Open Third Cursor
    OPEN get_types;
    FETCH get_types into v_data_type;
    WHILE get_types%FOUND LOOP
        DBMS_OUTPUT.PUT_LINE(' ' || v_data_type );
        FETCH get_types into v_data_type;
    END LOOP;

    CLOSE get_types;     
END; 
```

我的错误状态为 PLS-00371：最多允许一个声明“V_DATA_TYPE”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T01:53:33.953

不是 PLSQL 大师，但这是我的观点。

```
Select data_type from user_tab_columns where TABLE_NAME = 'YourTableName' 
```

给埃里克的道具，检查[这个](https://stackoverflow.com/a/6738753/1326923)线程和他的答案。

请记住，您可以使用`DESC`命令来描述 Oracle 表、视图、同义词、包或函数。它会给你名字、数据类型和长度。如果这确实对您有用，您应该能够获取所有表的数据，尽管我不是游标的忠实粉丝，但您应该做得很好。

试试这个：

```
-- Open second cursor
            OPEN get_columns;
            LOOP
            FETCH get_columns INTO v_column_name, v_data_type;
            EXIT WHEN get_columns%NOTFOUND;
            DBMS_OUTPUT.PUT_LINE('  ' || v_column_name);
            END LOOP;
            CLOSE get_columns;
    END LOOP; 
```

但请注意您为`v_data_type`变量选择的数据类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T23:21:14.630

努力，但代码太多。你需要一个短暂的假期:)

```
SELECT table_name,
       column_name,
       data_type,
       data_length,
       nullable
FROM cols
WHERE table_name='&YOUR_TABLE'
ORDER BY column_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T17:15:41.993

你的块有太多的代码。这就是你所需要的：

```
begin
    for r in ( select column_name, data_type
               from    user_tab_columns 
               where table_name = upper('&&p_1')
               order by column_id )
    loop
        dbms_output.put_line(r.column_name ||' is '|| r.data_type );
    end loop; 
```

结尾;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-18T20:47:15.793

我遇到了类似的问题。可以在这里查看：[使用动态 SQL 检索表结构](https://stackoverflow.com/questions/39022808/retrieving-table-structure-with-dynamic-sql/39024607#39024607)。

需要注意的是，我确保如果 data_scale = 0 我表明它是一个整数，如果它是 >0，它是一个双精度数。

# java - PHP vs JAVA AES 加密，有什么区别？

> ID：11838197
> 
> 赞同：1
> 
> 时间：2012-08-07T01:37:28.700
> 
> 标签：java, php, cryptography, aes

我在这里遇到了一些奇怪的问题......

我有以下两个脚本：

首先，一个 PHP 脚本（我正在使用[http://writecodeonline.com/php/](http://writecodeonline.com/php/)进行测试）

```
$key = '[E%Xr6pG-IDIA89_&=NI[AREofOy0#Mv[nJ7rO@T^PwgT!NVY*Hri@($p4luBM)ugVvbnAnWL@xGK*jBP3s$g#-XTH{e3@X*0StJ';
$string = 'Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing ';

//
$encrypted = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_128, md5($key), $string, MCRYPT_MODE_ECB));

$decrypted = rtrim(mcrypt_decrypt(MCRYPT_RIJNDAEL_128, md5($key), base64_decode($encrypted), MCRYPT_MODE_ECB), "\0");

echo $encrypted . "<br>";
echo $decrypted; 
```

二、一个Java类，

```
import java.io.*;
import java.net.*;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;

import javax.crypto.*;
import javax.crypto.spec.*;

import org.apache.commons.codec.binary.Base64;
import org.apache.commons.codec.digest.DigestUtils;

public class Main {

    /**
     * @param args
     * @throws Exception 
     */
    public static void main(String[] args) throws Exception {

        String pw = "[E%Xr6pG-IDIA89_&=NI[AREofOy0#Mv[nJ7rO@T^PwgT!NVY*Hri@($p4luBM)ugVvbnAnWL@xGK*jBP3s$g#-XTH{e3@X*0StJ";
        String str = encode("Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing Testing ", pw);
        System.out.println(str);
        System.out.println(decode(str, pw));
    }

    public static String encode(String s, String p) throws Exception
    {
        String cleartext = padRight(s, s.length()+(16-(s.length()%16)));
        String key = DigestUtils.md5Hex(p);
        SecretKeySpec skeySpec = new SecretKeySpec(key.getBytes(), "AES");
        Cipher cipher = Cipher.getInstance("AES/ECB/NoPadding");
        cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
        byte[] encrypted = cipher.doFinal(cleartext.getBytes());
        return Base64.encodeBase64String(encrypted);
    }

    public static String decode(String encrypted, String p) throws Exception
    {
        byte[] bts = Base64.decodeBase64(encrypted);

        String key = DigestUtils.md5Hex(p);
        SecretKeySpec skeySpec = new SecretKeySpec(key.getBytes(), "AES");
        Cipher cipher = Cipher.getInstance("AES/ECB/NoPadding");
        cipher.init(Cipher.DECRYPT_MODE, skeySpec);

        byte[] decrypted = cipher.doFinal(bts);

        return new String(decrypted).replaceAll("\0", "");
    }

    public static String padRight(String s, int n) {
        while (s.length() < n)
        {
            s+="\0";
        }
        return s;
    }

} 
```

发生了一件非常奇怪的事情。当我测试 PHP 脚本时，我得到：

```
/wyCRFRmXFDGk0O5+EAHWv8MgkRUZlxQxpNDufhAB1r/DIJEVGZcUMaTQ7n4QAda/wyCRFRmXFDGk0O5+EAHWv8MgkRUZlxQxpNDufhAB1r/DIJEVGZcUMaTQ7n4QAda/wyCRFRmXFDGk0O5+EAHWv8MgkRUZlxQxpNDufhAB1r/DIJEVGZcUMaTQ7n4QAda/wyCRFRmXFDGk0O5+EAHWg== 
```

作为加密代码。

但是，当我测试 java 代码时，我得到：

```
/wyCRFRmXFDGk0O5+EAHWv8MgkRUZlxQxpNDufhAB1r/DIJEVGZcUMaTQ7n4QAda/wyCRFRmXFDGk0O5+EAHWv8MgkRUZlxQxpNDufhAB1r/DIJEVGZcUMaTQ7n4QAda/wyCRFRmXFDGk0O5+EAHWv8MgkRUZlxQxpNDufhAB1r/DIJEVGZcUMaTQ7n4QAda/wyCRFRmXFDGk0O5+EAHWsdyQJ3DP2jBsJcLh2n2wv0= 
```

如果您仔细观察，您会发现（不知何故）java 文本更长！但是，奇怪的是，这两个文本在“+EAH”之前是完全相同的，这是它们分歧的时候。我觉得这很奇怪——为什么？

因为我已经在许多其他字符串上测试了这段代码，从 lorum ipsum 到单词“Testing”，没有任何错误。我发现造成这种情况的唯一方法（到目前为止）是多次重复一个简短的单词，用空格分隔。

我对此非常担心，因为我不知道还有什么其他方法可以触发这种奇怪的行为。所以这让我想到了我的问题......以戴维·琼斯的储物柜的名义，这是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T02:10:50.447

我不是加密专家，但这可能是一个填充问题。您可以尝试以下方法。

**PHP**
设置内边距如下：

```
$blockSize = mcrypt_get_block_size(MCRYPT RIJNDAEIL_128, MCRYPT_MODE_ECB);
$padding = $blockSize - (strlen($string) % $blockSize);
$string .= str_repeat(chr($padding), $padding); 
```

这将使用 PKCS#5 填充，而不是 PHP 的空填充。

**Java**
更改以下行：

```
Cipher cipher = Cipher.getInstance("AES/ECB/NoPadding"); 
```

至：

```
Cipher cipher = Cipher.getInstance("AES/ECB/PKCS5Padding"); 
```

不幸的是，我没有可以比较结果的 Java 环境，但我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-31T08:59:54.627

该代码在常量名称中有拼写错误，正确的代码是：

```
$blockSize = mcrypt_get_block_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_ECB);
$padding   = $blockSize - (strlen($tokenRaw) % $blockSize);
$tokenRaw .= str_repeat(chr($padding), $padding);

$encode    = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, $tokenRaw, MCRYPT_MODE_ECB)); 
```

# google-apps-script - 使用沿路线/路径的距离映射 google-apps-script 信息

> ID：11838202
> 
> 赞同：0
> 
> 时间：2012-08-07T01:38:05.257
> 
> 标签：google-apps-script

我正在尝试找出一种使用地图脚本显示项目的方法，其中包含以下信息：

沿着 US 1 向北 10 英里，在 US 1 的右侧（东）10 英尺处绘制一个标记。例如，设置 0 英里开始于 US 1 和 Main Street 之间的交叉点。

也许有人以前遇到过这种情况或类似的事情，并且会很友好地给我一些指示。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:08:36.873

按照 Eric 的提示，我能够创建一个函数来从 Google 地图中获取道路中心线的折线。然后使用 google api 服务将该折线转换为经纬度坐标。从此，全是球面几何编码。下面是我不起眼的小代码：

```
//Function to grab a centerline from the Map Api
//start = lat and long for beginning of roadway centerline ie [27.64681, -82.38438]
//end = lat and long for end of roadway centerline ie [27.71248, -82.33518]
//startmile = beginning milepost
function grabmap(start, end, startmile){

  startmile = parseFloat(startmile);

  var points = [];
  var plinex = [];
  var pliney = [];

  var directions = Maps.newDirectionFinder().setOrigin(start).setDestination(end).getDirections();
// Much of this code is based on the template referenced in
// http://googleappsdeveloper.blogspot.com/2010/06/automatically-generate-maps-and.html
  for (var i in directions.routes) {
    for (var j in directions.routes[i].legs) {
      for (var k in directions.routes[i].legs[j].steps) {
// Parse out the current step in the directions
        var step = directions.routes[i].legs[j].steps[k];
// Call Maps.decodePolyline() to decode the polyline for
// this step into an array of latitudes and longitudes
        var path = Maps.decodePolyline(step.polyline.points);
        points = points.concat(path);
      }
    }
  }

  var lengthvector = (points.length / 2);
  for ( i = 0; i <= points.length; i++){
    if ( i % 2 == 0){
      plinex = plinex.concat(points[i]);
      pliney = pliney.concat(points[(i+1)]);
    }
  }
  var plineVector = new Array(plinex.length - 2);
    for ( i = 0; i <= plinex.length - 2; i++){
          plineVector[i] = new Array(2);
          plineVector[i][0] = plinex[i];
          plineVector[i][1] = pliney[i];
        }

return plineVector;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:31:31.417

我没有广泛使用地图服务，但应该可以。您使用 DiretionFinder 获取沿路径的点的纬度和经度，然后进行一些数学运算以获取标记的偏移量。

# ios - UIView Animation 将视图重置为原始矩形

> ID：11838209
> 
> 赞同：3
> 
> 时间：2012-08-07T01:38:47.753
> 
> 标签：ios, animation, uiview, uiwebview, cgrect

当点击链接时，我正在尝试从右边框将 UIWebView 动画到屏幕上。为了做到这一点，我使用了两个 UIView。一个叫onScreenWebView，另一个叫offScreenWebView。这个想法是我可以将 offscreenWebView 从右侧设置到屏幕上，并将 onScreenWebView 设置到左侧的屏幕上。然后交换视图（因此屏幕上的视图变为 onScreenWebView，反之亦然）但我的动画有问题。我必须注意它第一次效果很好。在那之后，它根本无法正常工作。

视图是这样对齐的

```
 __________ __________
      |        | |        |
      |   on   | |  off   |
      | screen | | screen |
      |________| |________| 
```

这是动画代码：

```
offScreenWebView.hidden = true;

offScreenWebView.frame = self.frame;
[offScreenWebView offSetX:self.bounds.size.width + kOffsetPadding];         // move offscreen to the right
[self logWebRects:@"begin"];
offScreenWebView.hidden = false;
[self bringSubviewToFront:offScreenWebView];

[UIView animateWithDuration:0.5f delay:0.0f options:UIViewAnimationCurveEaseInOut animations:^{
    [self logWebRects:@"during 1"];
    offScreenWebView.frame = self.frame;
    onScreenWebView.frame = CGRectMake(-(self.bounds.size.width + kOffsetPadding), 0, onScreenWebView.bounds.size.width, onScreenWebView.bounds.size.height);
    [self logWebRects:@"during 2"];
}completion:^(BOOL finished) {
    [self logWebRects:@"finished b4 swap"];
    [self swapWebViews];
    [self logWebRects:@"finished -- done"];
}]; 
```

这是我的 logWebRects 方法的输出（只是每个视图的来源）

```
Navigation Type ::      Link Clicked
Rect of self frame   ::  {{0, 0}, {320, 460}} 

99  --  Point of offscreen origin   begin          ::  {335, 0}
0   --  Point of onscreen origin    begin          ::  {0, 0}
99  --  Point of offscreen origin   during 1       ::  {335, 0}
0   --  Point of onscreen origin    during 1       ::  {0, 0}
99  --  Point of offscreen origin   during 2       ::  {0, 0}
0   --  Point of onscreen origin    during 2       ::  {-335, 0}
Navigation Type ::      Other
99  --  Point of offscreen origin   finished b4 swap       ::  {0, 0}
0   --  Point of onscreen origin    finished b4 swap       ::  {-335, 0}
0   --  Point of offscreen origin   finished -- done       ::  {-335, 0}
99  --  Point of onscreen origin    finished -- done       ::  {0, 0}

Navigation Type ::      Link Clicked
Rect of self frame   ::  {{0, 0}, {320, 460}} 

0   --  Point of offscreen origin   begin          ::  {335, 0}
99  --  Point of onscreen origin    begin          ::  {0, 0}
0   --  Point of offscreen origin   during 1       ::  {335, 0}
99  --  Point of onscreen origin    during 1       ::  {0, 0}
0   --  Point of offscreen origin   during 2       ::  {0, 0}
99  --  Point of onscreen origin    during 2       ::  {-335, 0}
Navigation Type ::      Other
0   --  Point of offscreen origin   finished b4 swap       ::  {335, 0}
99  --  Point of onscreen origin    finished b4 swap       ::  {0, 0}
99  --  Point of offscreen origin   finished -- done       ::  {0, 0}
0   --  Point of onscreen origin    finished -- done       ::  {335, 0} 
```

这些日志来自初始运行。然后也是第二轮。您会注意到，无论出于何种原因，动画块都会在完成块之前重置每个 Web 视图的帧。

我应该注意，我用经典的临时变量交换交换了 Web 视图。此外，它们是兄弟视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:27:31.630

我知道这有点老了，但我遇到了同样的问题，这是我发现的唯一一个关于它的线程。

问题是bringSubviewToFront 执行一个隐式动画（我猜），阻止动画块分配正确的帧。

我通过禁用隐式动画来解决它。尝试使用这段代码而不是普通的bringSubviewToFront。

```
[CATransaction begin];
[CATransaction setDisabledActions:YES];
[self bringSubviewToFront:offScreenWebView];
[CATransaction commit]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T06:09:38.267

在我的一个应用程序中，我的设置与您的设置类似。不幸的是，我看不到您的实现有任何明显错误（尽管我们看不到您的交换和日志记录方法）。我的没有调用其他方法或使用框架做太多工作。我确实遇到了临时变量交换的问题，因此恢复为使用下一个视图控制器作为方法的参数，它工作得更好。

`centreOffRight`和`centreOffLeft`是分别定义屏幕中心向左和向右偏移的 CGPoints。`next`并且`previous`是每个视图的视图控制器。从容器视图控制器调用此方法。

```
-(void)moveNext:(PlayerViewController*)sender
{
    // Need to push this one from the right
    next.view.center = centreOffRight; 
    [self.view bringSubviewToFront:next.view];
    [UIView animateWithDuration:0.3 
                     animations:^{
                         next.view.center = centreOfScreen;
                         current.view.center = centreOffLeft;} 
                     completion:^(BOOL finished){ 
                         [current wasMovedOffScreen];
                         current = next;
                         next = sender;
                         currentDouble = nextIndex;}];

} 
```

我不愿意将此作为答案发布，因为我不明白为什么当您的答案不起作用时这会起作用，但希望它对您有所帮助。

# excel - 在一个单元格中拆分名称并在新单元格之间添加逗号

> ID：11838218
> 
> 赞同：0
> 
> 时间：2012-08-07T01:39:59.607
> 
> 标签：excel, function

我是一个excel新手，我真的不知道我在做什么......

但是我在 A 列中有一个包含 1500 个名称的列表。我想为 C 列提供一个函数，该函数在 A 列中获取每个工作并在它们之间添加一个逗号，并在 C 列中显示它...

我在 A 列中有名称，并且想要创建将在 C 列中的标签字符串。

此外，如果可以获取字符串中最后一个单词的第一个字母，那么 C 列将由 First Name、Last Name、First Letter of Last Name 组成。

任何帮助都会很棒！

样本

![在此处输入图像描述](../Images/7e1658faf369e4b0f562a72d96127d60.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T02:11:41.707

随便挑吧：）

如果您在单元格 B1 中使用此公式并将其复制下来

`=SUBSTITUTE(A1," ",", ")&", "&LEFT(RIGHT(A1,LEN(A1)-FIND("*",SUBSTITUTE(A1," ","*",LEN(A1)-LEN(SUBSTITUTE(A1," ",""))))),1)`

然后您将获得如 Col B 所示的输出

如果您在单元格 C1 中使用此公式并将其复制下来

`=LEFT(A1,FIND(" ",A1)-1) & ", "&SUBSTITUTE(A1,LEFT(A1,FIND(" ",A1)-1),"")&", "&LEFT(RIGHT(A1,LEN(A1)-FIND("*",SUBSTITUTE(A1," ","*",LEN(A1)-LEN(SUBSTITUTE(A1," ",""))))),1)`

那么你的输出将像 Col C

![在此处输入图像描述](../Images/deb8214bc40fc352662c44085d94c6c5.png)

**编辑**

**第三种情况**

把它放在单元格 D1 中并复制下来。

`=TRIM(SUBSTITUTE(A1,RIGHT(A1,LEN(A1)-FIND("*",SUBSTITUTE(A1," ","*",LEN(A1)-LEN(SUBSTITUTE(A1," ",""))))),""))&", "&RIGHT(A1,LEN(A1)-FIND("*",SUBSTITUTE(A1," ","*",LEN(A1)-LEN(SUBSTITUTE(A1," ","")))))&", "&LEFT(RIGHT(A1,LEN(A1)-FIND("*",SUBSTITUTE(A1," ","*",LEN(A1)-LEN(SUBSTITUTE(A1," ",""))))),1)`

Col D 中的输出

![在此处输入图像描述](../Images/59a697e1d6e5ddf0babcff010bb92c40.png)

# java - Java System.getEnv()

> ID：11838219
> 
> 赞同：2
> 
> 时间：2012-08-07T01:40:00.447
> 
> 标签：java, variables, environment, getenv

在 mac OSX 和 Linux CentOS 中，我使用 .bashrc 和 .bash_profile 插入一个新的系统环境变量（即“MYAPP”）。我什至重新启动了我的笔记本电脑（mac）和我的服务器（linux）。

当我使用命令行“env”时，该环境变量显示为正确的值。但不知何故，每次我尝试在 mac 或 linux 中的 Java 应用程序（桌面应用程序或 Web 应用程序或 EJB 或 servlet 任何其他 Java 应用程序）中获取它时，都不会检索到该环境变量（“MYAPP”）。

我试图遍历 Java 可以检索的整个环境变量，结果发现它检索了除“MYAPP”之外的所有环境变量。这很奇怪。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T02:05:14.910

Did you `export MYAPP=...`? Exporting the variable makes it available to child processes, like java being run by your shell.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-31T19:36:43.223

定义并导出环境变量后。从同一个终端启动您的 IDE。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T16:39:45.493

在 Linux 中，如果您仅在 bash 会话中设置变量（或导出它），它将可用于一种“子”会话，该会话仅可用于您刚刚执行的命令，而没有其他任何东西。

您可能可以[在 bash 中使用点运算符](http://ss64.com/bash/period.html)（也称为“源”命令）。从页面：

当使用 `source' 运行脚本时，它在现有 shell 中运行，脚本创建或修改的任何变量在脚本完成后仍然可用。

所以你可以尝试做 . export VARIABLE=value，然后运行你的 java 程序。这类似于在 Windows 终端中设置变量，然后打开一个新终端并期望 env var 存在。它不会。

这样，您就告诉 bash “此命令应该在此特定会话（会话的进程）中可用”。否则你告诉它“为在我运行这个导出命令后将结束的 bash 会话设置这个环境变量”因此，当你运行你的 Java 程序时它不会存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-29T10:49:52.250

试着写

`"$System.env.STOREPWD"`

# xcode - Xcode 4.4 中没有格式安全警告

> ID：11838220
> 
> 赞同：1
> 
> 时间：2012-08-07T01:40:04.100
> 
> 标签：xcode, llvm, string-formatting, xcode4.4

我没有`-Wformat-security`从使用 Xcode 4.4 的代码中得到任何格式安全警告 ()：

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        // a = @"%@" or a = @"%@%@"
        NSString *a = [@"%@" stringByAppendingFormat:@"%@", arc4random_uniform(2)? @"%@": @"", nil];

        // 50% change of crash, but no warning
        NSLog(a, @"Hello, World!");

    }
    return 0;
} 
```

这是正常的还是我在 Xcode 中以某种方式禁用了这个警告？

我刚刚使用此代码创建了项目，因此它没有更改默认的项目设置。

# android - getIntent() 和 Intent 的子类

> ID：11838226
> 
> 赞同：5
> 
> 时间：2012-08-07T01:40:53.600
> 
> 标签：android

我写了一个扩展 Intent 的类 MyIntent。然后我使用 MyIntent 的一个实例来调用 startActivity(MyIntent)。

```
MyIntent i=new MyIntent(this,NewActivity.class); 
```

构造函数是：

```
public MyIntent(Context context,Class<?> cls){
super(context,cls);
putExtra(var1,var2);
//other codes
((Activity)context).startActivity(this);
} 
```

但是，当我在新开始的活动中调用 getIntent() 时，getIntent() 的返回值是一个 Intent 而不是 MyIntent，即

```
getIntent() instanceof Intent // true;
getIntent() instanceof MyIntent // false; 
```

当我尝试 (MyIntent)getIntent() 时，系统会抛出 ClassCastException。怎么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T02:16:25.303

你不能这样做，因为 Intent 实现`Parcelable`和`Cloneable`接口，它会在 Intent 对象跨进程移动时重新创建。因此，这将是一个不同的例子。

在[ActivityManagerProxy的源码中， startActivity](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.7_r1/android/app/ActivityManagerNative.java#ActivityManagerProxy) 你会注意到intent不会通过引用传递，而是写入一个Parcel来创建一个新的对象。所以在之前的Activity中创建的Intent对象将不再被引用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-25T08:39:58.410

您可以使用复制构造函数将您的“抽象”意图转换为更具体的意图。因此，您需要重写该类的复制构造函数`Intent`并简单地调用 super。

说这是你的意图：

```
public class StronglyTypedIntent extends Intent {
    private final static String ID = "verySecret";    

    public StronglyTypedIntent(final Activity initiator, final String someInformation) {
        super(initiator, SomeTargetActivity.class);
        putExtra(ID, someInformation);
    } 

    public StronglyTypedIntent(final Intent original) {
        super(original);
    }

    public String getSomeInformation() {
        return getStringExtra(ID)
    }
} 
```

然后，您可以从“发起者活动”发起此意图，如下所示：

```
...

public void someLogicInTheInitiatingActivity() {
    startActivity(new StronglyTypedIntent(this, "some information"));
}
... 
```

在“目标活动”中，您可以获得`Intent`如下信息：

```
...
public void someLogicInTheTargetActivity() {
    StronglyTypedIntent intent = new StronglyTypedIntent(getIntent());

    doSomethingWithTheInformation(intent.getSomeInformation());
}
... 
```

从技术上讲，这似乎是一种通过意图抽象数据传输细节的好方法。但是，总是复制意图可能是一个性能问题。

# css - jQuery mobile，将样式应用于 Windows Phone (mango) 上的动态内容

> ID：11838227
> 
> 赞同：1
> 
> 时间：2012-08-07T01:41:09.573
> 
> 标签：css, windows, windows-phone-7, jquery, jquery-mobile

我正在向我的页面动态添加内容（使用 AJAX）。这工作正常，除了不会自动应用的样式。解决方法是使用`.trigger("create");`（例如`$('#content').html(data).trigger("create")`）。这适用于 webkit、FF 和 IE（在 PC 上），但在 Windows Phone 的 IE 上它拒绝工作。显示内容，但没有任何（jquery mobile）样式。我尝试使用`.page`或使用 append 而不是“html”来添加内容，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T23:34:57.780

我刚刚解决了我的问题。工作正常，问题出`trigger("create")`在 jQuery`$.ajax({ })`调用中。作为数据类型`dataType: "text",`，我在传输 HTML 时使用了文本 ()。我将 dataType 更正为 html ( `dataType: "html",`)，现在它工作得很好。与 Firefox、IE 桌面和 Chrome 相比，Windows Phone 浏览器在这方面似乎更严格

# android - 在 onClick 期间控制软键盘 - Android

> ID：11838228
> 
> 赞同：2
> 
> 时间：2012-08-07T01:41:11.180
> 
> 标签：android, button, onclick, android-softkeyboard

我遇到了一个问题，如果用户输入并点击提交，键盘不会消失，所以我找到了这个代码来解决这个问题（通过将它放在 onClick 方法中）：

```
 InputMethodManager imm = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0); 
```

但是，如果用户手动关闭键盘，然后单击提交，我发现上面的代码会将键盘*带回来*——不好。

问题：

有没有更好的代码可以使用？或者我可以说像 =

```
 if (keyboard = displayed) {
            // do code above
          } else { 
            // do nothing 
          } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T02:07:59.767

隐藏键盘：

```
final InputMethodManager inputMethodManager =
            (InputMethodManager) context.getSystemService(Context.INPUT_METHOD_SERVICE);

inputMethodManager.hideSoftInputFromWindow(view.getWindowToken(), 0); 
```

要显示它：

```
final InputMethodManager inputMethodManager =
            (InputMethodManager) context.getSystemService(Context.INPUT_METHOD_SERVICE);

inputMethodManager.showSoftInput(view, InputMethodManager.SHOW_FORCED); 
```

# java - Java 计时触发器

> ID：11838229
> 
> 赞同：2
> 
> 时间：2012-08-07T01:41:16.827
> 
> 标签：java, timer, timertask

我想在一段时间后触发一个动作，我一直在谷歌搜索我会如何做到这一点，但我没有运气，我猜这只是我的游戏编码方式。无论如何，我需要在触发代码 a1 30 分钟后到达触发代码 a2 的位置。

一：

```
if (itemId == 608) {
        c.sendMessage("The scroll has brought you to the Revenants.");
        c.sendMessage("They are very ghastly, powerful, undead creatures.");
        c.sendMessage("If you defeat them, you may receive astounding treasures.");
        c.sendMessage("If you donate you may visit the Revenants anytime without a scroll.");
        c.getPA().movePlayer(3668, 3497, 0);
        c.gfx0(398);
        c.getItems().deleteItem(608, 1);
} 
```

a2：

```
c.getPA().movePlayer(x, y, 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T01:48:54.723

在 Java 中有很多方法可以做计时器，但是要向自己介绍一个不错的框架，请查看[http://quartz-scheduler.org/](http://quartz-scheduler.org/)。如果你使用它，Spring 也有石英集成。

但更重要的是，如果您正在创建游戏，您将需要一种称为[事件循环的游戏编程核心技术](http://en.wikipedia.org/wiki/Event_loop)

这似乎是关于[如何创建游戏架构的体面讨论](http://www.yaldex.com/games-programming/0672323699_ch01lev1sec7.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T01:53:13.143

您可以使用 Thread.sleep()，但如果您在主线程中调用它，它将冻结您的应用程序，因此，创建另一个线程并将您的代码放入其中。这样做不会停止主应用程序。

这是一个简单的例子。

```
public class MyThread implements Runnable {

    @Override
    public void run() {

        try {

            System.out.println( "executing first part..." );
            System.out.println( "Going to sleep ...zzzZZZ" );

            // will sleep for at least 5 seconds (5000 miliseconds)
            // 30 minutes are 1,800,000 miliseconds
            Thread.sleep( 5000L );

            System.out.println( "Waking up!" );
            System.out.println( "executing second part..." );

        } catch ( InterruptedException exc ) {
            exc.printStackTrace();
        }

    }

    public static void main( String[] args ) {
        new Thread( new MyThread() ).start();
    }

} 
```

这将只运行一次。要运行多次，您将需要一个包含 run 方法主体的无限循环（或由标志控制的循环）。

您还有其他一些选择，例如：

*   [java.util.Timer](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)
*   [javax.swing.Timer](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T02:07:50.343

由于此代码使用[Project Insanity](http://www.rune-server.org/runescape-development/rs2-server/downloads/283605-project-insanity.html)，因此您应该使用由`server.event.EventManager`.

下面是示例代码：

```
if (itemId == 608) {
  c.sendMessage("The scroll has brought you to the Revenants.");
  c.sendMessage("They are very ghastly, powerful, undead creatures.");
  c.sendMessage("If you defeat them, you may receive astounding treasures.");
  c.sendMessage("If you donate you may visit the Revenants anytime without a scroll.");
  c.getPA().movePlayer(3668, 3497, 0);
  c.gfx0(398);
  c.getItems().deleteItem(608, 1);

  /* only if the parameter Client c isn't declared final */
  final Client client = c;
  /* set these to the location you'd like to teleport to */
  final int x = ...;
  final int y = ...;

  EventManager.getSingleton().addEvent(new Event() {

    public void execute(final EventContainer container) {
      client.getPA().movePlayer(x, y, 0);
    }
  }, 1800000); /* 30 min * 60 s/min * 1000 ms/s = 1800000 ms */
} 
```

# regex - 使用两个数组，我需要检查一个的元素是否出现在另一个数组中，并分别打印匹配的元素

> ID：11838231
> 
> 赞同：1
> 
> 时间：2012-08-07T01:41:26.423
> 
> 标签：regex, string, perl

**F1.txt**

```
bob
tom
harry 
```

**F2.txt**

```
bob
a=1   b=2   c=3
bob
d=4   e=5   f=6
tom
a1=34  b1=32  c1=3443
tom
a2=534  b2=732  c2=673443 
```

***结果：***

**A1.txt**

```
bob
a=1   b=2   c=3
bob
d=4   e=5   f=6 
```

**A2.txt**

```
tom
a1=34  b1=32  c1=3443
tom
a2=534  b2=732  c2=673443 
```

我是 PERL 新手，你能帮我解决我的问题吗？现在上面我提到了两个文件，即 F1.txt 和 F2.txt，我的工作是在 F2.txt 中搜索 F1.txt 的任何元素并打印对应的行和下一行。如果找到一个元素，则结果必须保存在一个新文件中，我给出了示例 A1.txt，它存储了有关 bob 的所有信息，同样，A2.txt 存储了有关 Tom 的所有信息。直到现在我已经尝试过这段代码，但它不能有效地工作，

```
use strict; 
use warnings;  

my $line1; 
my $line2; 
my $fh; 
my $fh1; 
my $counter;  

open  $fh, "<", "F1.txt" or die $!; 
open  $fh1, "<", "F2.txt" or die $!;  

my @b = <$fh>; 
my @a = <$fh1>;  

for (@b) 
{     
  $line1 = $_;     

  for (@a)     
  {         
    $line2 = $_;         
    if ($line1 =~ /^$line2$/)         
    { 
      $counter++;             
      open my $outfile, ">>", "A_${counter}.txt";             
      print $outfile $line2;             
      close $outfile;         
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T03:47:10.650

每当您检查重复元素时，请考虑*hash*。例如，假设您有两个文件：

```
 File #1      File #2
 Bob          Tom
 Ted          Dick
 Alice        Harry
 Carol        Ted 
```

如果您的工作是在文件 #2 中找到也在文件 #1 中的名称，您可以将文件 #1 中的名称存储在哈希中，然后在浏览文件 #2 时，查看是否有任何名称匹配你的哈希。

首先，让我们阅读文件#1：

```
 use strict;
 use warnings;
 use autodie;  #This way, I don't have to check open statements

 open my $file_1, "<", "file_1";
 my %first_file_name_hash;
 while my $name (<$file_1>) {
    chomp $name;
    $first_file_name_hash{$name} = 1;
 }
 close $file_1; 
```

现在，`%first_file_name_hash`包含文件 #1 中的所有名称。

现在让我们打开文件 #2，然后检查一下：

```
open my $file_2, "<" "file_2";
while my $name (<$file_2>) {
   if ($first_file_name_hash) {
       print "User is in file #1 and file #2\n";
   }
}
close $file_2; 
```

是的，这不是您想要的，但它让您了解如何存储哈希值。

* * *

哈希具有与值关联的键。每个条目必须有一个唯一的键。但是，散列中的每个条目都可能有重复的值。这是一个简单的哈希：

```
 $hash{BOB} = "New York";
 $hash{CAROL} = "New York";
 $hash{TED} = "Los Angeles";
 $hash{ALICE} = "Chicago"; 
```

在上面，两者`$hash{BOB}`和`$hash{CAROL}`具有相同的值（纽约）。但是，在散列中只能有一个`BOB`或。`CAROL`

散列的最大优点是通过键访问元素非常容易。你知道关键，你可以很容易地调出元素。

在你的情况下，我会使用两个哈希。在第一个哈希中，我会将第一个文件中每个人的姓名保存在 $HASH_1 中。我会将每个人的姓名保存在 $HASH_2 中的第二个文件中。不仅如此，我还将 $HASH_2 的值作为文件的下一行。

这会给你：

```
$HASH_1{bob} = 1;
$HASH_1{tom} = 1;
$HASH_1{harry} = 1; 

$HASH_2{bob} = a=1  b=2  c=3
               d=4  e=5  f=6
$HASH_2{tom} = a1=34  b1=32  c1=3443
               a2=534   b2=732   c2=673443 
```

**注意**：哈希中的每个条目都有一个值的限制，因此当您有两行或多行的键为 时`bob`，您必须找出处理它们的方法。在这种情况下，如果密钥已存在于 中`$HASH_2`，我只需将其附加到 NL 值之后。

在现代 Perl 中，您可以将[数组存储在 hash](http://perldoc.perl.org/perldsc.html)中，但您是 Perl 程序员的初学者，所以我们将坚持使用更简单的技巧。

这是一个完全未经测试的程序：

```
use strict;
use warnings;
use autodie;
use feature qw(say);   #Better print that print

# Read in File #1
open my $file_1, "<", "F1.txt";
my %hash_1;
while my $name (<$file_1>) {
   chomp $name;
   $hash_1{$name} = 1;
}
close $file_1;

# Read in File #2 -- a bit trickier

open my $file_2, "<", "F2.txt";
my %hash_2;
while my $name (<$file_2>) {
    chomp $name;
    my $value = <$file_2>;              #The next line
    chomp $value;
    next if not exists $hash_1{$name};  #Not interested if it's not in File #1
    if (exists $hash_2{$name}) {        #We've seen this before!
        $hash_2{$name} = $hash_2{$name} . "\n" . $value; #Appending value
    }
    else {
        $hash_2{$name} = $value;
    }
 }
 close $file_2; 
```

现在，我们拥有我们想要的数据。`%hash_2`包含您需要的一切。我只是不确定你想如何打印出来。但是，它会是这样的：

```
 my $counter = 1;    #Used for file numbering..
 foreach my $name (sort keys %hash_2) {
    open my $file, ">", "A" . $counter . "txt";
    say $file "$name";     #Name of person
    my @lines = split /\n/, $hash_2{$key};  #Lines in our hash value
    foreach my $line (@lines) {
      say $file "$line";
    }
    close $file;
    $counter++;
 } 
```

请注意，通过使用哈希，我避免了双 for 循环，这最终会占用大量时间。我只经历三个循环：前两个在每个文件中读取。最后一个通过第二个文件的哈希，并将其打印出来。

使用哈希是跟踪您已阅读的数据的好方法。

# python - 在windowXP上安装eclipse+pydev时出错

> ID：11838232
> 
> 赞同：1
> 
> 时间：2012-08-07T01:41:32.810
> 
> 标签：python, eclipse, installation, pydev

我在 Window XP 上安装 eclipse+pydev 时遇到问题。Eclipse 版本是 4.2.0，我有 Python 2.7.3。我收到以下错误消息：

![错误信息](../Images/b16400024c0678949e0fc5cbbfc679f7.png)

谁能帮帮我？

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T01:49:26.940

确保 python 在您的路径变量中，这通常位于 C:\Python27\python.exe

右键我的电脑，选择属性，选择高级系统设置，选择“环境变量”。

查找名为 path 的变量

编辑它并包含你的 python 可执行文件的路径（通常是“C:\Python27\”）

如果你打开你的命令窗口（“cmd”控制台），你应该能够输入 python 并打开 python 解释器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T01:56:58.637

您必须配置 PyDev，以便它知道您的解释器在哪里。在 Window>Preferences 中，在左侧菜单中选择 PyDev>Interpreter - Python。在右侧的顶部窗格中添加一个新条目，该条目指向 Python exe 的位置。这是为 Eclipse 之外的工具设置 Python 路径的等效操作。

# r - excel文件大小限制

> ID：11838236
> 
> 赞同：0
> 
> 时间：2012-08-07T01:42:04.457
> 
> 标签：r

我需要使用 R 打开一个 excel 文件，该文件可以有 1000~10000 行和 5000~20000 列。我想知道R中这种excel文件的大小有什么限制吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T01:49:15.133

我在 R 方面没有看到任何障碍。看起来像一个大小适中的数据集。它可能取决于您“如何”执行此操作，但您没有描述任何代码，所以这仍然是一个未知数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T04:35:40.740

一般来说，您使用 R 的限制将是数据集在内存中的适合程度，而不是对数据集大小或维度的特定限制。您越接近填满可用 RAM（包括您在计算机上执行的所有*其他*操作），您遇到问题的可能性就越大。

但请记住，拥有足够的 RAM 来简单地将数据集*加载到内存中通常与拥有足够的 RAM 来**操作*数据集是完全不同的事情，因为R 的本质通常会涉及大量的对象复制。这反过来又导致了一整套专门的 R 包，这些包允许以最少（或零）复制操作 R 中的数据......

鉴于您提供的信息量非常有限，关于您的具体情况，我最多只能说您的数据似乎不会超过您的物理 RAM 限制，但它会足够大，您需要采取一些注意编写*智能*代码，因为许多幼稚的方法最终可能会非常缓慢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T22:05:09.627

以上答案正确讨论了内存问题。我最近也导入了一些大型的 excel 文件。我强烈建议尝试使用该`XLConnect`软件包来读取（和写入）文件。

```
options(java.parameters = "-Xmx1024m") # Increase the available memory for JVM to 1GB or more.
                                       # This option should be always set before loading the XLConnect package.
library(XLConnect)

wb.read <- loadWorkbook("path.to.file")
data <- readWorksheet(wb.read, sheet = "sheet.name") 
```

# replace - 默认的 bada 应用程序

> ID：11838240
> 
> 赞同：0
> 
> 时间：2012-08-07T01:42:37.760
> 
> 标签：replace, default, bada

有没有办法停止默认的 bada 应用程序功能，以便让另一个应用程序以相同的方式为用户服务？

例如，如果我制作了一个消息传递应用程序并想将其设为默认消息传递应用程序而不是 bada 应用程序，我应该怎么做？

我认为至少我需要一种方法来停止并行通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:56:48.537

我认为这在 Bada 2.0 中是不可能的 :( 如果您知道任何方法 - 请在此处分享信息。

# java - 开始在 JTable 中的单元格中进行编辑以获得焦点

> ID：11838242
> 
> 赞同：2
> 
> 时间：2012-08-07T01:42:48.743
> 
> 标签：java, swing, focus, jtable, tablecelleditor

我以以下方式为表中的两列定义了单元格编辑器：

Java 代码：

```
JComboBox combo = new JComboBox();
//code to add items to the combo box goes here.

JTextField textField = new JTextField();
textField.setHorizontalAlignment(JTextField.RIGHT);

TableColumn column = myJTable.getColumnModel().getColumn(0);
column.setCellEditor(new DefaultCellEditor(combo));

column = myJTable.getColumnModel().getColumn(1);
column.setCellEditor(new DefaultCellEditor(textField)); 
```

我面临的问题是，当焦点移动到表格单元格时，该单元格不会自动编辑。因此，当焦点移到第 2 列（具有作为编辑器的文本字段）时，插入符号不会出现，除非双击单元格或用户开始输入。与第 1 列（有一个组合框作为编辑器）的情况类似，因为这里组合框不会出现，除非单击单元格。这些行为是违反直觉的，对于使用键盘操作的用户来说是不可取的。:(

请就如何解决此问题提出建议。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T02:32:23.200

如上所述，您可以将 JComboBox 用作渲染器和编辑器。下面是一个非常基本的例子。它还显示[DefaultCellEditor.setClickCountToStart()](http://docs.oracle.com/javase/6/docs/api/javax/swing/DefaultCellEditor.html#setClickCountToStart%28int%29)用法。

```
import java.awt.Component;
import javax.swing.DefaultCellEditor;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumn;

public class ComboBoxEditorDemo {

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }

    private static void createAndShowGUI() {
        JFrame frame = new JFrame("ComboBoxEditorDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JTable table = new JTable(
                new Object[][] { { "1", "2" }, { "1", "2" } }, 
                new Object[] {"Col1", "Col2" });

        table.setRowHeight(24);

        TableColumn column = table.getColumnModel().getColumn(1);
        column.setCellRenderer(new MyComboBoxRenderer(new String[] { "1", "2", "3" }));
        column.setCellEditor(new MyComboBoxEditor(new String[] { "1", "2", "3" }));

        DefaultCellEditor editor = new DefaultCellEditor(new JTextField());
        editor.setClickCountToStart(1);
        column = table.getColumnModel().getColumn(0);
        column.setCellEditor(editor);

        JScrollPane scrollPane = new JScrollPane(table);
        frame.add(scrollPane);
        frame.pack();
        frame.setVisible(true);
    }

    static class MyComboBoxRenderer extends JComboBox implements
            TableCellRenderer {
        public MyComboBoxRenderer(String[] items) {
            super(items);
        }

        public Component getTableCellRendererComponent(JTable table,
                Object value, boolean isSelected, boolean hasFocus, int row,
                int column) {
            if (isSelected) {
                setForeground(table.getSelectionForeground());
                super.setBackground(table.getSelectionBackground());
            } else {
                setForeground(table.getForeground());
                setBackground(table.getBackground());
            }

            setSelectedItem(value);
            return this;
        }
    }

    static class MyComboBoxEditor extends DefaultCellEditor {
        public MyComboBoxEditor(String[] items) {
            super(new JComboBox(items));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T02:23:24.043

1.  这个[例子](https://stackoverflow.com/a/10067560/230513)覆盖`editCellAt()`了`JTable`一个`DefaultCellEditor`using `JTextField`。

2.  您可以将`Space`键绑定到为`startEditing`定义的操作`JTable`：

    ```
    table.getInputMap().put(
        KeyStroke.getKeyStroke(KeyEvent.VK_SPACE, 0), "startEditing"); 
    ```

# c++ - （渲染粒子）我应该学习着色器还是 OpenCL？

> ID：11838246
> 
> 赞同：11
> 
> 时间：2012-08-07T01:43:47.843
> 
> 标签：c++, opengl, opencl, shader

我正在尝试运行 100000 个和更多的粒子。我一直在观看许多演示着色器和 OpenCL 强大功能的教程和其他示例。

在我观看的一个示例中，粒子的位置是根据您的鼠标指针（您用一只手握住并且光标在屏幕上的物理设备）的位置计算的。每个粒子的位置存储为 RGB。R是x、G y 和B、z。并传递给像素着色器。然后将每个颜色像素绘制为粒子的位置。

然而，我对这种方法感到荒谬。

*   是不是应该避免这种方法或编码风格？
*   我不应该学习如何使用 OpenCL 并使用 GPU 的多线程功能来直接声明和传递我想要的代码吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-07T02:12:33.587

> 是不是应该避免这种方法或编码风格？

为什么？

着色器的全部意义在于让您能够做您想做的事情，更有效地表达您想要做的事情，并让您自己更好地控制硬件。

您永远不*应该*害怕将某些东西重新用于不同的功能。纹理不存储颜色；它们存储*数据*，*可以*是颜色，但也可以是其他内容。您越早停止将纹理视为图片，您作为图形程序员的工作就会越好。

GPU 和 API 存在以供使用。*随心所欲地使用*它；不要让你认为应该如何使用 API 来限制你。

> 我不应该学习如何使用 OpenCL 并使用 GPU 的多线程功能来直接声明和传递我想要的代码吗？

昨天，我会说“是”。然而，今天发布了：[OpenGL 计算着色器](https://www.opengl.org/wiki/Compute_Shader)。

事实上，OpenGL ARB 和 Khronos 创建了这种着色器类型等等，这默认了 OpenCL/OpenGL 互操作并不是为渲染目的生成数据的最有效方式。毕竟，如果是这样，OpenGL 就没有必要拥有通用的计算功能。有 3 个版本的 GL 4.x 没有提供此功能。它现在在这里的事实基本上是 ARB 说，“是的，好的，我们需要这个。”

如果由许多制造硬件的人组成的 ARB 认为 CL/GL 互操作不是最快的方法，那么很明显应该使用计算着色器。

当然，如果你现在就尝试做某事*，*那将无济于事；只有 NVIDIA 支持计算着色器。甚至那只是在测试版驱动程序中。AMD 需要几个月的时间才能获得对它们的支持，而在这种支持变得足够稳固和稳定以供使用之前，还需要更多的时间。

即便如此，您也不需要计算着色器来生成数据。人们已经使用[变换反馈和几何着色器来进行 LOD 和截锥剔除以进行实例渲染。](http://rastergrid.com/blog/2010/10/gpu-based-dynamic-geometry-lod/)不要害怕在“OpenGL 绘制东西”框之外思考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:01:11.647

要在 OpenCL 中模拟粒子，您应​​该尝试“Yet Another Shader Editor” [/http://yase.chnk.us/](http://yase.chnk.us/) - 它消除了所有棘手的部分，让您开始着手编写粒子控制算法的代码。在您的浏览器中。无需下载，无需创建帐户，只需更改您找到的任何示例。这是一个爆炸。

[https://lotsacode.wordpress.com/2013/04/16/fun-with-particles-yet-another-shader-editor/](https://lotsacode.wordpress.com/2013/04/16/fun-with-particles-yet-another-shader-editor/)

我与 yase 没有任何关系。

# php - 如何在 Symfony 2 的表单集合中传递当前引用的对象？

> ID：11838249
> 
> 赞同：0
> 
> 时间：2012-08-07T01:44:15.780
> 
> 标签：php, forms, symfony

我使用此代码

```
$builder->add('userTasks','collection',array('type' => new UserTaskType())); 
```

这工作正常

userTasks 将是一个集合，不同的 userTask 对象将依次创建表单。

现在有什么方法可以像这样在构造函数中传递单个 UserTask 对象

```
$builder->add('userTasks','collection',array('type' => new UserTaskType($userTask))); 
```

这样我就可以使用它为表单生成标签。

可能吗

如果我使用 `$user->UseTasks`，那将是所有任务的集合，但我只想要正在创建其表单的对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:36:11.233

如果我正确理解了这个问题，您想根据表单将绑定到的实际数据对象来调整表单吗？这是实际上有点涉及的那些简单的发声要求之一。

您需要使用表单事件系统： [http ://symfony.com/doc/master/cookbook/form/dynamic_form_generation.html](http://symfony.com/doc/master/cookbook/form/dynamic_form_generation.html)

一旦你完成了它，它就不是那么糟糕了。

===

回答第一条评论：

```
public function preSetData(DataEvent $event)
{
    $data = $event->getData();
    $form = $event->getForm(); 
```

$data 将是您的对象，在本例中为 $userTask。

# c# - 生成自动事件处理程序时，委托实例在哪里添加？

> ID：11838250
> 
> 赞同：1
> 
> 时间：2012-08-07T01:44:20.420
> 
> 标签：c#, asp.net, events, event-handling, generated-code

当我在 .aspx Web 表单的设计视图中双击一个按钮 (myButton) 时，会在后面的代码中自动生成一个事件处理程序：`protected void myButton_Click(object sender, EventArgs e)`

现在，如果我理解正确，为了将该方法与 Button.Click 事件相关联，某处必须有类似的东西：`myButton.Click += new EventHandler(this.myButton_Click);`

但是，我似乎在任何地方都找不到。我在整个解决方案中使用了 Ctrl+F，并检查了 mywebform.aspx.designer.cs。

起初我以为是因为 .aspx 页面的 AutoEventWireup 设置为 true。但是，即使在将 AutoEventWireup 设置为 false 之后，按钮仍然会通过运行代码来响应被点击`protected void myButton_Click(object sender, EventArgs e)`

我知道您不应该弄乱生成的代码，我也不打算这样做，我只是想更多地了解它是如何在幕后工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T01:52:24.527

事件处理程序的分配实际上是在 asp 标记中完成的。 [这](http://msdn.microsoft.com/en-us/library/dx5ybk93)是指向可以以声明方式分配给您的按钮的一系列不同属性的链接。

这是另一个关于使用 OnClick 属性的[MSDN 链接。](http://msdn.microsoft.com/en-us/library/3hc29e2a#RaisingClientClickEventsForServerControls)

我猜您的按钮的 ASP 标记分配了以下属性：

`OnClick="myButton_Click"`

至于它是如何被翻译成赋值的，页面在第一次被请求时在运行时被编译（[ASP.NET 编译概述](http://msdn.microsoft.com/en-us/library/ms178466.aspx)）。

# flash - 使用 Pixel Bender 进行图像边缘的加法混合

> ID：11838254
> 
> 赞同：1
> 
> 时间：2012-08-07T01:45:25.530
> 
> 标签：flash, adobe, shader, pixel-bender

我正在尝试将图像的边缘与 Pixel Bender 着色器相加混合，但我不太清楚如何检测边缘本身。我已经尝试过了，但它不起作用：

```
{
input image4 src;
output pixel4 dst;

void
evaluatePixel()
{
    if(outCoord().x == 0.0)
    {
        dst = sampleNearest(src, outCoord());
        dst.rgb = float3(255.0, 255.0, 255.0); // just a test to see if the left side will turn white
    }
    else
    {
        dst = sampleNearest(src, outCoord());
    }
}
} 
```

我也不确定如何检测图像的宽度和高度。

我试图通过将前几个像素加法混合在一起来使图像在边缘“发光”。x:0 是 1-4 混合，2 是 2-4 混合，3 是 3-4 混合类型的东西。

一些指导？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:38:40.327

我认为只有从 as3 传递宽度和高度作为着色器参数的方法......

# html - websocket不断断开连接

> ID：11838257
> 
> 赞同：4
> 
> 时间：2012-08-07T01:45:45.983
> 
> 标签：html, websocket

我一直在尝试制作一个在浏览器中运行的 websocket 聊天室。我做了一些谷歌搜索，找到了一个提供示例 websocket 连接的网站（www.websocket.org/echo.html）。但是每当我尝试他们的“连接”按钮时，它会立即显示“已断开连接”，并且我无法发送消息（这只发生在 Chrome 上）。所以我在 Firefox 上尝试了它，它显示“错误：未定义”然后“断开连接”。两种浏览器都支持 websocket 技术。

所以我去了另一个网站（http://www.tutorialspoint.com/html5/html5_websocket.htm）并复制了示例代码，将其保存为“.html”并在chrome中运行。它无法连接到 websocket。相反，它说“断开连接”。

问题：为什么我无法连接到 websocket/为什么它一直断开连接？我的 Chrome 版本是 21.0.1180.60。

为了进一步参考，这是我到目前为止的代码（注意：这只是应该连接并说它已经连接，而不是实际聊天）：

```
<!doctype html>
<head>
<title>Testing</title>
</head>
<body>
<script type="text/javascript">
    function confirm() {
    if ("WebSocket" in window) {
        alert("WebSocket is supported by your Browser!");
    }
    else {
        alert("Your Browser does not support WebSocket Technology. Please      update your Browser.");
    }
}
function sendmessage() {
    try {
        var ws = new WebSocket("ws://(ip of other user/")
        }
    catch(err)
        {
        alert("Error with creating the WebSocket")
        }
}
</script>
<a href="javascript:confirm()">Run Ip Connector</a>
</body>
</html> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:54:21.097

[我刚刚在http://websocket.org/echo](http://websocket.org/echo)上测试了 Echo 演示，它使用 Chrome 21 运行良好。您的另一个示例似乎也运行良好。你可以在[这里查看](http://jsfiddle.net/eQzxV/)。

由于您使用的是 Chrome 21，因此您可以[使用 Chrome 开发工具](https://stackoverflow.com/questions/5751495/debugging-websocket-in-google-chrome#10524936)查看 WebSocket 握手是否正在进行以及您是否看到任何消息。

您是否有可能坐在切断流量的路由器/防火墙后面？您可以在 websocket.org 上尝试 WSS 吗？（在位置字段中输入 wss://echo.websocket.org。）

# azure-table-storage - Azure 存储表 - 删除项目错误

> ID：11838258
> 
> 赞同：0
> 
> 时间：2012-08-07T01:45:49.730
> 
> 标签：azure-table-storage

我一直在研究这个问题一段时间，但无法解决它。任何帮助将非常感激...

使用 Azure 表存储（不是开发存储）我只是想从表中删除一行：

```
Public Sub DeleteByItemId(pairItemId As String)
    Dim item = (From c In _ServiceContext.UserTable Where c.Id = pairItemId Select c).Single()
    _ServiceContext.DeleteObject(item)
    _ServiceContext.SaveChanges()
End Sub 
```

这会导致错误：“上下文当前未跟踪实体。”

而这种方法：

```
Public Sub DeleteByItemId(itemId As String)
    Dim item = New <object type>
    item.PartitionKey = "sandbox"
    item.RowKey = itemId
    _ServiceContext.AttachTo(<table name>, item, "*")
    _ServiceContext.DeleteObject(item)
    _ServiceContext.SaveChanges()
End Sub 
```

错误：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<error xmlns="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
  <code>InvalidInput</code>
  <message xml:lang="en-US">One of the request inputs is not valid.
RequestId:e37b0824-3336-4089-b6ac-2824438618f6
Time:2012-08-07T01:37:28.2741813Z</message>
</error> 
```

如何创建服务上下文：

```
Public Sub New()
     Dim storageAccount = CloudStorageAccount.FromConfigurationSetting("DataConnectionString")
    _ServiceContext = New OroosoUserPairedAccountDataServiceContext(storageAccount.TableEndpoint.ToString(), storageAccount.Credentials)
    _ServiceContext.IgnoreResourceNotFoundException = True
    _ServiceContext.MergeOption = MergeOption.NoTracking

    ' Create the tables
    ' In this case, just a single table.  
    storageAccount.CreateCloudTableClient().CreateTableIfNotExist(<table name>)
End Sub 
```

Fiddler 没有透露任何有趣的东西。

我没主意了...

再次，任何帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:33:09.793

删除`_ServiceContext.MergeOption = MergeOption.NoTracking`. 这是为了防止`DataServiceContext`跟踪实体。

# perl - 在 Perl 中忽略某些匹配的情况

> ID：11838261
> 
> 赞同：0
> 
> 时间：2012-08-07T01:46:16.933
> 
> 标签：perl, pattern-matching

### 问题 1

我想匹配模式`dc_abc`并替换为`dc_ABC`，但如果模式是`.dc_abc`or `"dc_abc"`，它应该保持不变。

输入文件：

```
.dc_abc (dc_abc);
.dc_abc({dc_abc});
dc_abc("dc_abc"); 
```

输出文件：

```
.dc_abc (dc_ABC);
.dc_abc({dc_ABC});
dc_ABC("dc_abc"); 
```

* * *

### 问题2

在 Perl 中有什么方法可以创建两个数组，例如：

```
@match_pattern =(!dc_abc , dc_abc: ,dc_abc );
@ignore_pattern = (.dc_abc, {dc_abc}); 
```

*   如果模式属于`@match_pattern`，则将其替换为`dc_ABC`。
*   如果模式属于`@ignore pattern`，不要做任何事情。

输入文件：

```
.dc_abc(dc_abc, {dc_abc});
!dc_abc(!dc_abc);
dc_abc: (dc_abc:); 
```

输出文件：

```
.dc_abc(dc_ABC , {dc_abc});
!dc_abc(dc_ABC);
dc_ABC (dc_ABC); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T03:44:05.813

您可以使用[否定环视](http://www.regular-expressions.info/lookaround.html)来匹配断言。您可以告诉正则表达式您要匹配的部分不能跟随文字点或引号。这`(?<! )`部分是负面的回顾。在其中，我有 pattern `[."]`，它是一个字符类，其字符不能位于模式的其余部分之前：

```
use v5.10;

while( <DATA> ) {
    chomp;
    s/(?<![\."])dc_abc/dc_ABC/g;
    say;
    }

__END__
.dc_abc (dc_abc);
.dc_abc({dc_abc});
dc_abc("dc_abc"); 
```

这给出了：

```
.dc_abc (dc_ABC);
.dc_abc({dc_ABC});
dc_ABC("dc_abc"); 
```

环视不匹配任何字符，并且 Perl 中的负环视必须是固定宽度（因此，没有量词）。

对于第 2 个问题，Perl 拥有完成此任务所需的所有工具，并由您自己完成逻辑。不过，我并不特别想在这么晚的时候考虑它。也许我以后会想点什么。有各种蛮力方法来处理它，但可能有一些聪明的方法。

# hadoop - 如何将hadoop mapreduce的输出作为restful api的输入？

> ID：11838262
> 
> 赞同：0
> 
> 时间：2012-08-07T01:46:16.823
> 
> 标签：hadoop, mapreduce, restful-url

最近在研究mapreduce，可以使用mapreduce来处理我的数据。现在我想用restful API来显示mapreduce的输出，但是我不知道如何将hadoop mapreduce的输出作为restful api的输入？或者restful api如何处理hadoop mapreduce的输出？我真的需要你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:49:55.093

您必须将文件从 HDFS 导出到本地文件系统，或者通过 HDFS API 读取它们。

# php - 展开所有可能的从左到右的组合？

> ID：11838265
> 
> 赞同：4
> 
> 时间：2012-08-07T01:46:51.150
> 
> 标签：php, arrays

假设我有一个字符串，如下所示：

```
$string = 'president barack obama'; 
```

现在，假设我想把它分解成一个数组，打破单词。你会认为我可以使用`explode()`，对吗？那行得通，但是如果我想要一个包含所有可能的从左到右的单词组合的数组呢？像这样：

```
Array
(
    [0] => 'barack'
    [1] => 'barack obama'
    [2] => 'obama'
    [3] => 'president'
    [4] => 'president barack'
    [5] => 'president barack obama'
) 
```

**最有效的方法是什么？**

* * *

# 可能的解决方案：

到目前为止，我已经提出了一种可能的解决方案，但我希望你们中的一个能给我一个更好的主意。我想像这样接近这个：

1.  正常爆发。
2.  循环遍历每个单词。
3.  对于每个单词，将其存储在一个数组中。然后，检查数组中是否有另一个单词（在它自己之后）。如果有，添加一个新的数组值，它由`$current_word . ' ' . $new_word;`. 对每个单词都这样做。

现在，这可能会奏效。但是，这似乎很烦人，恐怕其他人可能有更好的方法来做到这一点。大家有什么推荐的？是否有一个我不知道的 PHP 函数可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T02:05:59.340

This should do what you are looking for:

```
$string  = 'president barack obama won';
$results = getWordPermutaions($string);
print_r($results);

function getWordPermutaions($inStr) {
  $outArr   = Array();
  $tokenArr = explode(" ", $inStr);
  $pointer  = 0;
  for ($i=0; $i<count($tokenArr); $i++) {
    $outArr[$pointer] = $tokenArr[$i];
    $tokenString = $tokenArr[$i];
    $pointer++; 
    for ($j=$i+1; $j<count($tokenArr); $j++) {
      $tokenString .= " " . $tokenArr[$j];
      $outArr[$pointer] = $tokenString;
      $pointer++;
    }
  }
  return $outArr;
}

/*
$results:
Array (
        [0] => 'president'
        [1] => 'president barack'
        [2] => 'president barack obama'
        [3] => 'president barack obama won'
        [4] => 'barack'
        [5] => 'barack obama'
        [6] => 'barack obama won'
        [7] => 'obama'
        [8] => 'obama won'
        [9] => 'won'
)
*/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T02:29:04.187

另一个工作解决方案：

```
 $s = 'president barack obama won';

  function myExplode($s) {
    $ex = explode(" ", $s);
    $ec = 0;
    $x = 0;
    foreach ($ex as $word) {
      $rs = isset($res) ? sizeof($res) : 0;
      if ($rs > 0)
        for ($i=$ec-$x; $i < $rs; $i++) $res[] = "{$res[$i]} {$word}";
      $x++;
      $res[] = $word;
      $ec = sizeof($res);
      }
    return isset($res) ? $res : false;
    }

  print_r( myExplode($s) ); 
```

**输出**

```
Array
(
    [0] => president
    [1] => president barack
    [2] => barack
    [3] => president barack obama
    [4] => barack obama
    [5] => obama
    [6] => president barack obama won
    [7] => barack obama won
    [8] => obama won
    [9] => won
) 
```

# c++ - 关于 C++ 指针和引用，需要澄清

> ID：11838271
> 
> 赞同：6
> 
> 时间：2012-08-07T01:47:57.543
> 
> 标签：c++, pointers, reference

请问以下哪项是错的？

我的理解是指针代表某种类型的地址。

所以, `int i = 18`, 指向它的指针是`int *pI = &i;`

以下2个声明是有效的

```
void foo (int &something) // Will accept an address of something
void bar (int *something) // Will accept a pointer to something 
```

当我们将函数声明为

```
void bar (int *something) 
```

我们最好发送一个指向某事的指针。确实，`foo(pI)`有效。

遵循相同的逻辑，当查看时

```
void foo (int &something) 
```

我们应该向它发送一个指向 int 的地址作为参数，那么：

为什么`foo(&i)`错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T01:51:13.930

> `void foo (int &something) // Will accept an address of something`

这是不正确的：`int&`是一个*引用*，一个在某些方面类似于指针的概念，但完全不同。

引用类似于指针，因为可以通过引用更改值，就像可以通过指针更改值一样。但是，没有“空引用”之类的东西，而 NULL 指针很常见。

当您调用一个带有引用的函数时，您只需将您要引用的变量传递给变量 - 不需要`&`运算符：

```
void foo (something); // "something" must be a variable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T01:51:54.850

声明`void foo (int &something)`采用[引用变量](http://www.cprogramming.com/tutorial/references.html)，而不是指针。

您调用它的方式与调用它的方式完全相同`void foo (int something)`，只是它`something`是[通过引用](http://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_reference)而不是[值](http://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_value)传递的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T01:52:09.420

> void foo (int &something) // 将接受某物的地址

不，虽然我能理解这种困惑。该函数*引用*. `int`在定义良好的程序中，引用保证不为空。它在概念上类似于指针，但在语义上不同。

要调用该函数，您不需要做任何特别的事情。

```
int i = 10;
foo(i);  // passed to foo by reference 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T01:53:02.703

因为在 C++ 中，*&*表示函数原型上下文中的“引用类型”，因为您在这里使用它。你的功能：

```
void foo (int &something) 
```

实际上是指定应传递整数引用类型，因此您只需像这样调用此函数：

```
foo(i); 
```

请注意，在这种情况下，您仍然将*i*的地址传递给函数，但您将其作为引用类型而不是原始指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T01:54:09.260

There are *two* different meanings for `&`.

The first is to create a pointer from an existing variable.

The second is to make a reference.

Even though they both use the same character, they are two completely different things.

# jekyll - Jekyll 每次都会重新编译每一页

> ID：11838277
> 
> 赞同：3
> 
> 时间：2012-08-07T01:48:58.077
> 
> 标签：jekyll

当我运行`jekyll`生成我的站点时，它会重新生成每个页面。我如何告诉它只生成新的或已更改的页面？

或者，我在做什么让 Jekyll 认为它需要重新创建每个页面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T18:32:14.110

Jekyll 每次运行时都会自动重新生成整个站点——这就是它的工作原理。但是，我相信如果您传递标志，它只会重新生成更改的文件：

```
--watch 
```

如：

```
jekyll build --watch 
```

* * *

*注意：`jekyll build --watch`旧版本的 jekyll 使用`jekyll --auto`.*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T22:12:57.387

正如 mipadi 所说，Jekyll 在编译时会重新生成整个站点。然而，`--auto`标志使它编译整个事情，*总是*。

这样做是因为，正如 elithrar 所说，每个帖子/页面都可以相互依赖，并且因为这一切都是在编译时决定的，所以它不能像在 WordPress 或 Tumblr 中那样动态生成。因此，为了避免断开的链接，一切都会重新生成。

从长远来看，这可能是个问题。例如，非常大的站点（>1000 个帖子）报告启用 LSI 的编译时间非常长，最近通过一些配置选项解决了这个问题。还有其他问题，即如果您正在处理 CSS/JS（或 LESS、SASS、CoffeeScript，请做我的客人），您为什么要重新创建整个事情？

[这是Jekyll 的 issue list](https://github.com/mojombo/jekyll/issues)上的一个反复讨论，所以如果你们能想到一个好的解决方案，请在此处发布。

但是，真心的？如果您的网站足够小，就让它重新生成所有内容。这种方式要简单得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-08T08:17:46.150

为了加快本地开发，您可以使用`--limit_posts NUM`限制要解析的帖子数量。这可以为拥有大量帖子的网站节省大量时间。

请参阅 [https://jekyllrb.com/docs/configuration/#build-command-options](https://jekyllrb.com/docs/configuration/#build-command-options)

# r - 根据 R 中的值绘制条件颜色

> ID：11838278
> 
> 赞同：47
> 
> 时间：2012-08-07T01:49:00.607
> 
> 标签：r, colors, plot, ggplot2

我想根据值绘制不同颜色的图表。我写了下面的代码，

```
np_graph <- data.frame(C1 = -5:5, C2 = -5:5)
x=np_graph2$C1
y=np_graph2$C2
plot(x,y,xlab="PC1",ylab="PC2") 
```

现在，如果 X 的值 > 0，则该值应为绿色（在图中）。如果 Y 的值 > 0，则该值应为红色（在图中）。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-08-07T02:11:47.797

该参数`col`将设置颜色，您可以将其与`ifelse`语句结合使用。有关`?plot`更多详细信息，请参阅。

```
# using base plot
plot(x,y,xlab="PC1",ylab="PC2", col = ifelse(x < 0,'red','green'), pch = 19 ) 
```

![在此处输入图像描述](../Images/bc18cffc367c28e0a972d8de1407954f.png)

在 中做同样的事情`ggplot2`。

```
#using ggplot2
library(ggplot2)
ggplot(np_graph) + geom_point(aes(x = C1, y = C2, colour = C1 >0)) +
  scale_colour_manual(name = 'PC1 > 0', values = setNames(c('red','green'),c(T, F))) +
  xlab('PC1') + ylab('PC2') 
```

![在此处输入图像描述](../Images/40c6400f8e97d7784e9619ffd7544a11.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2020-01-30T16:11:45.280

或者，在 中`ggplot2`，您可以根据 ifelse 语句设置一个新列“颜色”，然后用于`scale_color_identity`在图形上应用这些颜色：

```
np_graph %>% mutate(Color = ifelse(C1 > 0, "green", "red")) %>%
  ggplot(aes(x = C1, y= C2, color = Color))+
  geom_point()+
  scale_color_identity() 
```

[![在此处输入图像描述](../Images/b82391d28239185c5943c714ce8c1cb9.png)](https://i.stack.imgur.com/GY72G.png)

# asp.net - 如何在 EF Code First 中指定非负约束

> ID：11838280
> 
> 赞同：1
> 
> 时间：2012-08-07T01:49:20.853
> 
> 标签：asp.net, .net, entity-framework

我想在列上指定一个非负约束。不知道我应该怎么做。我在谷歌上的搜索没有任何帮助。

```
public class Price
{
  [Key, Column(Order = 0)]
  public int     ItemID { get; set; }
  [Key, Column(Order = 1)]
  public int     ItemQty { get; set; }
  [DataType(DataType.Currency), Column(TypeName = "MONEY")]
  public decimal ItemPrice { get; set; }
} 
```

在这里，我希望**ItemQty**是一个正整数。我确实考虑过使用 Range，但我不确定这是不是正确的方法......

* * *

最后我选择了 Range()。不过仍然对建议持开放态度。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2020-12-22T12:35:04.080

实际上你不能这样做EF中没有这样的功能这个问题已经得到回答，你可以在链接中看到它，第二个答案给你最好的答案如何以其他方式做，这是一个很好的解决方案到问题。希望它可以帮助您链接： [回答](https://stackoverflow.com/questions/13232777/check-constraint-entity-framework)

# xml - 我怎样才能有条件地转换一个 XML 节点，而不在这个条件之外省略它的实例？

> ID：11838285
> 
> 赞同：2
> 
> 时间：2012-08-07T01:50:23.250
> 
> 标签：xml, xslt, xpath-1.0

我正在转换所有  `<p>`  标签并将这些节点重命名为  `<Body_Text>`，条件是它们*位于*元素内  `<body>`  （使用  `xsl:if`）。

我的代码*正在*这样做，但是它忽略了  `<p>`  元素之外的所有元素  `<body>`  ，我*不*希望它这样做。

* * *

这是要转换的 XML：

```
<root>
<p>asdf</p>
<body>
<p>asdfasdf</p>
<p>asdfasdf</p>
</body>
<footer>
<p>asdf</p>
</footer>
</root> 
```

...这是 XSL：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" indent="yes" method="xml"/>
<xsl:strip-space elements="*"/>

    <!-- identity rule -->
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <!-- Body_Text -->
    <xsl:template match="p">
      <xsl:if test="parent::body">
        <Body_Text>
          <xsl:apply-templates select="@*|node()"/>
        </Body_Text>
      </xsl:if>
    </xsl:template>

</xsl:stylesheet> 
```

...这是不希望的结果（省略  `<p>`  元素之外的所有元素  `<body>`  ，我*不*希望它这样做）：

```
<root>
<body>
<Body_Text>asdfasdf</Body_Text>
<Body_Text>asdfasdf</Body_Text>
</body>
<footer/>
</root> 
```

这是在[http://xslt.online-toolz.com/tools/xslt-transformation.php](http://xslt.online-toolz.com/tools/xslt-transformation.php)测试的。

* * *

**这是我*没有*得到**的预期结果：

```
<root>
<p>asdf</p>
<body>
<Body_Text>asdfasdf</Body_Text>
<Body_Text>asdfasdf</Body_Text>
</body>
<footer>
<p>asdf</p>
</footer>
</root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T01:57:01.810

不需要`xsl:if`——只需指定正确的模板模式。

**这种转变：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="body//p">
  <Body_Text><xsl:apply-templates select="@*|node()"/></Body_Text>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<root>
    <p>asdf</p>
    <body>
        <p>asdfasdf</p>
        <p>asdfasdf</p>
    </body>
    <footer>
        <p>asdf</p>
    </footer>
</root> 
```

**产生想要的正确结果：**

```
<root>
   <p>asdf</p>
   <body>
      <Body_Text>asdfasdf</Body_Text>
      <Body_Text>asdfasdf</Body_Text>
   </body>
   <footer>
      <p>asdf</p>
   </footer>
</root> 
```

**说明**：

模板模式：

```
 <xsl:template match="body//p"> 
```

导致选择此模板仅在`p`作为元素后代的`body`元素上执行。所有其余节点都由身份规则“按原样”复制。

# ajax - 由 ajax 调用时，HighChart 不起作用

> ID：11838288
> 
> 赞同：0
> 
> 时间：2012-08-07T01:51:05.557
> 
> 标签：ajax, highcharts

嗨，伙计们，我有一个运行良好的页面，它包含一个高图。我想通过 ajax 调用在现有页面上显示此页面。我的 ajax 运行良好，但是当我进行 ajax 调用时，highcharts 没有显示。

我的highchart的链接是

```
http://www.rahatcottage.com/AI/J/examples/line-log-axis/index.php 
```

我的 ajax 脚本在这里

```
var xmlhtt

 function load(str,str1)
    {

      xmlhtt=GetXmlHttpObject();

     if (xmlhtt==null)
     {
       alert ("Your browser does not support Ajax HTTP");
       return;
       }

        var url="examples/line-log-axis/index.php";
         url=url+"?q="+str;
         url=url+"&q1="+str1;

       xmlhtt.onreadystatechange=getOutpt;
      xmlhtt.open("GET",url,true);
      xmlhtt.send(null);
       }

        function getOutpt()
         {

         if                                     (xmlhtt.readyState==3||xmlhtt.readyState==2||xmlhtt.readyState==1|
       |xmlhtt.readyState==0)

{

         document.getElementById("apDiv1").innerHTML="Loading ";

}

     if (xmlhtt.readyState==4)
      {
      document.getElementById("apDiv1").innerHTML=xmlhtt.responseText;
          document.getElementById("apDiv1").focus();
          }
            }

            function GetXmlHttpObject()
               {
    if (window.XMLHttpRequest)
         {
   return new XMLHttpRequest();
        }
       if (window.ActiveXObject)
       {
  return new ActiveXObject("Microsoft.XMLHTTP");
         }
       return null;
           } 
```

我猜是因为 highgraphs 使用的是 Jquery，所以 ajax 没有运行它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:21:04.970

**已编辑** 所以您正在做的是，您有一个工作图表页面，并且您希望通过 ajax 将该页面加载到`div`另一个页面中。我认为这是不可能的，你可以这样做，特别是如果该页面有 javascripts，你所做的只是获取工作图表页面的生成 html，并将其粘贴到 中`div`，这不会运行图表生成所需的 JavaScript。

尝试改用 iframe。

HTML

```
<iframe id="frame" /> 
```

脚本

```
function load(str,str1)
{
     $('#frame').attr('src', "examples/line-log-axis/index.php?q="+str+"&q1="+str1);
} 
```

~~**OLD** 系列：[{ data: JSON.parse("[" + text + "]") }] `text = ','`，因此出现 json 解析错误。重新访问您的 json 构建 @ php 以正确吐出 `text`~~

# javascript - Google Charts linechart 格式化 xcord,ycord,legendlabel

> ID：11838290
> 
> 赞同：0
> 
> 时间：2012-08-07T01:51:26.967
> 
> 标签：javascript, google-visualization

我是谷歌图表的新手，似乎无法弄清楚我将如何做以下事情：

我想制作一个包含我的 xcord、ycord、legendlabel 的数据表。我正在尝试以下操作：

```
var data = google.visualization.arrayToDataTable([]);   

            data.addColumn("number","reps");
            data.addColumn("number","weight");
            data.addColumn("string","legendlabel")

            //data.addColumn("string","workoutname");

            data.addRows([[150, 10,"workoutA"],
                          [300, 2,"workoutB"],

                        ]); 
```

但是，它显然不起作用，因为我们有两种不同的类型，数字和字符串。

有没有办法我可以指定xcord，ycord然后为这一点设置一个标签，然后如果有多个相同的标签，它会形成一个折线图？

提前谢谢各位！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T02:04:10.230

I there some reason you're initializing the empty data variable and then adding to it?

Why not do this:

```
var data = google.visualization.arrayToDataTable([
  ['legendlabel', 'Reps', 'Weight'],
  ['workoutA', 150, 10],
  ['workoutB', 300, 2]
]); 
```

…which works in my test at the [Google Code Playground](https://code.google.com/apis/ajax/playground/?type=visualization#line_chart).

Though, it probably doesn't display what you want, since you're comparing two scalars values of different scales (one is 2-10, one is 150-300). What sort of graph are you hoping to see?

This question may help you with dual y-axes: [Can Google Charts support dual y-axis (v-axis)?](https://stackoverflow.com/questions/7256672/can-google-charts-support-dual-y-axis-v-axis)

# xcode - 从前置摄像头拍照时出现无效数据错误

> ID：11838299
> 
> 赞同：1
> 
> 时间：2012-08-07T01:52:12.187
> 
> 标签：xcode, cgimage

我在使用前置摄像头的图像时遇到问题。当用户使用 CGBitmapContextCreate 方法拍照时，我会调整图像的大小和编辑图像。当我使用后置摄像头拍照时，它可以完美运行，但前置摄像头显示如下错误消息。
错误：CGBitmapContextCreate：无效数据字节/行：对于 8 个整数位/分量、3 个分量、kCGImageAlphaPremultipliedFirst，应至少为 3412。
我正在使用这些代码。

```
-(UIImage *) imageFlip:(UIImage *)img
{

CGSize size = img.size;
UIGraphicsBeginImageContext(size);
CGContextRef ctx = UIGraphicsGetCurrentContext();
CGContextTranslateCTM(ctx,size.width,size.height);
CGContextScaleCTM(ctx, -1, -1);
CGContextDrawImage(ctx, CGRectMake(0, 0, size.width, size.height),img.CGImage);
img = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

return img;
} 
```

我从这个 iPhone 尝试了 normalize 方法[：Changing CGImageAlphaInfo of CGImage](https://stackoverflow.com/questions/2457116/iphone-changing-cgimagealphainfo-of-cgimage)但它仍然说同样的错误。请帮我。

# javascript - 用于登录和注销功能的 Backbone.js 架构

> ID：11838301
> 
> 赞同：2
> 
> 时间：2012-08-07T01:52:37.853
> 
> 标签：javascript, backbone.js, backbone-events, backbone-views, backbone-relational

我有点不确定如何在 Backbone.js 中为登录/注销控件设置功能。

这就是我的想法，但我不确定这是否可以，或者这个架构是否存在问题：

*   `Model`是当前用户。如果模型在执行 a 时得到`HTTP 404`响应`fetch()`，则“当前用户”应该是匿名用户。如果不是，则`Model`保存当前用户的信息。
*   `View`: _
    *   如果当前用户为“匿名”，则显示用户名和密码输入框；和一个“登录”按钮。
    *   如果当前用户是有效用户，则视图显示当前用户的用户名和“注销”按钮。

当按下“登录”和“注销”按钮时，我不确定如何处理模型。是否应该通过模型的功能完成登录和注销`fetch()`，或者这些操作是否应该触发不同的 POST 请求，其成功结果要么填充`Model`要么 要求`Model`执行另一个`fetch()`？

任何输入表示赞赏，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T02:31:26.137

这可能有点出乎你的意料，但这就是我如何做到的：

我不确定你为什么需要模型本身，我对你如何使用它感到困惑。因此，我无法用“模型”来构建我的答案。

所以我是这样做的：

在视图中：只是用于登录/注销的文本框。

单击“登录”时，使用用户名/密码向服务器发送 POST 请求（希望不是明文：）

如果服务器的响应是 200 更改`window.location`您希望看到的目标页面，否则显示“无效的用户名/密码”（当然“下一页”页面或应用程序中的任何其他页面应检查用户是否已登录。如果不，显示登录页面）。

这是最简单的解决方案恕我直言。我不确定为什么需要为用户提供模型？那是“在”登录之后吗？然后，您可以生成并保留它，或者将其作为上述 200 响应的一部分发送。但是该模型不会在页面更改时保持不变。可以这么说，最好在“下一页”页面上重新创建模型。

（我假设页面更改而不是页面加载`$.load`- 如果是后者，那么您始终可以重用该模型）。

希望这是有道理的。如果没有，请您澄清模型的意图，也许我可以相应地更新我的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T06:44:41.953

我一直和你一样的情况。您应该关注这篇关于您正在寻找的内容的博客文章。它提供了有关如何处理错误和一些安全问题的更多信息。

> [http://42floors.com/blog/posts/user-authentication-with-rails-and-backbone-js](http://42floors.com/blog/posts/user-authentication-with-rails-and-backbone-js)

# android - 安卓中的多点触控

> ID：11838302
> 
> 赞同：0
> 
> 时间：2012-08-07T01:52:44.007
> 
> 标签：android, touch, screen, multi-touch

我读过：

> 当用户的第一根手指到达屏幕时调用 ACTION_DOWN。
> 当用户用第二、第三非主手指触摸屏幕时调用 ACTION_POINTER_DOWN。
> 当用户的非主手指离开屏幕时，调用 ACTION_POINTER_UP。
> 当最后一根手指离开屏幕时，调用 ACTION_UP。

那么如何检测用户的主要手指离开屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-23T13:41:23.427

只需使用以下示例，它是 Android 中多点触控的最佳示例

[https://github.com/siddhpuraamitr/MultitouchWithDynamicAddandRemove](https://github.com/siddhpuraamitr/MultitouchWithDynamicAddandRemove)

# c++ - “注释”掉宏函数定义

> ID：11838307
> 
> 赞同：2
> 
> 时间：2012-08-07T01:53:40.283
> 
> 标签：c++, googletest, c-preprocessor

我正在尝试使用 GTest 来测试我的代码，但困扰我的一件事是它总是被编译进去。这会减慢我的发布构建速度。GTest 测试看起来像这样

```
TEST(CaseName, TestName)
{
    ASSERT_EQ(3, 3);
} 
```

我希望能够通过一个简单的定义来注释掉我所有的测试。我可以将每个测试都包含在`#ifdef`'s 中，但这真的很难看。我不想包含 GTest 标头，而是自己定义 TEST 以摆脱测试。

# 到目前为止我所拥有的。

我有一个将其定义为静态函数的宏，因此它应该得到优化，但`assert`测试中的 's 仍然被编译（并且未定义）。这意味着我还必须定义每一个`ASSERT`，`EXPECT`至少可以说是乏味的。

```
#define TEST(tcase, test) static void uselessFunction##tcase##_##test(void) 
```

我*可以*坚持这一点，但我更喜欢更好的东西。希望有一些宏观魔术师可以提供帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T01:58:34.470

Rather than using macros like this, it might be better to put all your tests into files which are compiled into a test executable, and put all your production files into a library which is linked by the test exe.

In this way, you can have gtest run against both Debug and Release builds, but only compile the test code when you build the test executable.

# database - 从安装程序文件创建数据库？

> ID：11838308
> 
> 赞同：0
> 
> 时间：2012-08-07T01:53:48.410
> 
> 标签：database, winforms, installation

好吧，例如，您已经为餐厅，电影院，任何地方构建了一个程序，现在您在安装应用程序时如何做，数据库也已正确安装？我不确定，但我相信这是一个不同的数据库？例如一个文件？（谈论sql）。

查询会有什么不同？因为我相信我不会在 sql server 上拥有与文件数据库相同的功能

我将使用什么连接？我可以使用实体框架吗？

以及如何为数据库提供不同的文件？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T01:56:38.410

您可以使用支持 SQL 查询的基于文件的数据库，例如[SQLite](http://www.sqlite.org/index.html)。也有可用的 ADO 适配器。该链接也应该处理您的其余问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T01:59:21.077

好吧，由于您通常对目标环境一无所知，因此用户必须在安装时或稍后将程序配置到他的环境中（例如，首次启动时，这比在安装程序中实现相同的功能要简单得多）。用户指定 SQL 服务器地址（如果我们谈论的是基于服务器的系统）和他想使用的数据库名称。然后使用该信息以编程方式创建数据库。

# java - 我想给用户一个指定的消息，但是我的程序给了用户所有的 java 消息

> ID：11838320
> 
> 赞同：1
> 
> 时间：2012-08-07T01:56:57.073
> 
> 标签：java, swing, if-statement, joptionpane

在我的程序中，用户输入一个数字，下面的方法计算数字并根据他们输入的数字给用户一条消息，但是我使用 if 语句来计算要在数字上给出什么消息，但是当用户输入数字时它显示所有消息，数字以 10 为一组，这意味着如果用户输入一个从 40 到 49 的数字，那么它将输出 E 级消息，有人可以告诉我如何制作它，这样它只会给我与它进行比较的指定数字的消息？

```
public void checkInputScore() {

    if (convertedInputScore == -1) {
        System.exit(0);
    } 

    if (convertedInputScore < 39) {
        JOptionPane.showMessageDialog(Program1.this, "The student received a fail grade", "Student mark checker", JOptionPane.INFORMATION_MESSAGE);            
    }

    if (convertedInputScore <= 49) {
        JOptionPane.showMessageDialog(Program1.this, "The student received an E grade", "Student mark checker", JOptionPane.INFORMATION_MESSAGE);
    }

    if (convertedInputScore <= 59) {
        JOptionPane.showMessageDialog(Program1.this, "The student received an D grade", "Student mark checker", JOptionPane.INFORMATION_MESSAGE);
    }` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T01:59:03.013

使用`else if`声明。

```
if (convertedInputScore == -1) {
    System.exit(0);
} else if (convertedInputScore < 39) {
    JOptionPane.showMessageDialog(Program1.this, "The student received a fail grade", "Student mark checker", JOptionPane.INFORMATION_MESSAGE);            
} else if (convertedInputScore <= 49) {
    JOptionPane.showMessageDialog(Program1.this, "The student received an E grade", "Student mark checker", JOptionPane.INFORMATION_MESSAGE);
} else if (convertedInputScore <= 59) {
    JOptionPane.showMessageDialog(Program1.this, "The student received an D grade", "Student mark checker", JOptionPane.INFORMATION_MESSAGE);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T01:59:48.890

```
if (convertedInputScore == -1) {
   System.exit(0);
} 
```

使用其他一些：

```
 if (convertedInputScore < 39) {
    JOptionPane.showMessageDialog(Program1.this, "The student received a fail grade", "Student mark checker", JOptionPane.INFORMATION_MESSAGE);            
} else if (convertedInputScore <= 49) {
    JOptionPane.showMessageDialog(Program1.this, "The student received an E grade", "Student mark checker", JOptionPane.INFORMATION_MESSAGE);
} else  if (convertedInputScore <= 59) {
    JOptionPane.showMessageDialog(Program1.this, "The student received an D grade", "Student mark checker", JOptionPane.INFORMATION_MESSAGE);
}` 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T02:00:19.360

小于 39 的数字也将小于 49；并且由于第一次检查之后的每一次检查`if`都是正确的，因此您的程序会显示所有消息。

这应该可以帮助您解决家庭作业问题。

# jakarta-mail - can not receive email after server running few days

> ID：11838324
> 
> 赞同：0
> 
> 时间：2012-08-07T01:57:35.533
> 
> 标签：jakarta-mail, james

I had deployed apache james and a java mail application on business server. It works good about a week, but today, users complained that they can not receive new mail any more. I restart the server(the computer) and all solved. I don't know what's going on, I doubt that it is the config of james because it gives a lot of Exceptions in logs:
spoolmanager-2012-08-06-11-36.log

```
06/08/12 11:36:28 INFO  spoolmanager: Run JamesSpoolManager: Spool Thread #9
06/08/12 11:36:28 INFO  spoolmanager: Spool=$Proxy5
06/08/12 11:36:28 INFO  spoolmanager: Spool=$Proxy5
06/08/12 13:56:48 ERROR spoolmanager.transport: Exception calling LocalDelivery:
Exception spooling message: Exception caught while storing mail Container: 
javax.mail.MessagingException: Exception spooling message: Exception caught while     storing mail Container: ;
nested exception is:
javax.mail.MessagingException: Exception caught while storing mail Container: ;
nested exception is:
java.sql.SQLException: Listener refused the connection with the following error:
ORA-12519, TNS:no appropriate service handler found
The Connection descriptor used by the client was: 127.0.0.1:1521:spmmis 
```

the config file is below: [config.xml](http://www.cnblogs.com/ZhonghuaFY/archive/2012/08/07/2626164.html)

# java - cant use CompositeFilter with 4 FilterPredicate values

> ID：11838327
> 
> 赞同：1
> 
> 时间：2012-08-07T01:57:51.313
> 
> 标签：java, google-app-engine, google-cloud-datastore

I am building a program that will search thru the GAE data store that have latitude and longtitude parameters to ge the users that are within the specific geolocation block, bellow is the code snipet:

```
public Iterable<Entity> GetJSONForEntitiyNearByUsingBounds(float lng,float     lat,GeoLocation.GeoLocationBoundry bound)
{
    DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();

    Filter filter_min_lngt=new FilterPredicate("lng", FilterOperator.LESS_THAN, bound.lng1);
    Filter filter_max_lngt=new FilterPredicate("lng", FilterOperator.LESS_THAN, bound.lng2);
    Filter filter_min_lat=new FilterPredicate("lat", FilterOperator.GREATER_THAN, bound.lat1);
    Filter filter_max_lat=new FilterPredicate("lat", FilterOperator.LESS_THAN, bound.lat2);

    Filter filter_lng=new CompositeFilter(CompositeFilterOperator.AND,Arrays.asList(filter_min_lngt,filter_max_lngt));
    Filter filter_lat=new CompositeFilter(CompositeFilterOperator.AND,Arrays.asList(filter_min_lat,filter_max_lat));

    Filter filter=new CompositeFilter(CompositeFilterOperator.AND,Arrays.asList(filter_lng,filter_lat));

    q.setFilter(filter);

    PreparedQuery pq = datastore.prepare(q);

    return pq.asIterable();
} 
```

the is is that when i loop the query to extract the Entity the folowing message appear java.lang.IllegalArgumentException: Only one inequality filter per query is supported. Encountered both lng and lat

can somebody help me because i don't know what is the issue

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T05:23:29.230

请参阅[查询限制](https://developers.google.com/appengine/docs/java/datastore/queries#Restrictions_on_Queries)：它明确指出，不等式文件管理器一次只能用于一个属性。

您的问题的解决方案是 geohashing：[https ://stackoverflow.com/search?q=%5Bgoogle-app-engine%5D+geohashing](https://stackoverflow.com/search?q=%5Bgoogle-app-engine%5D+geohashing)

# android - 为什么片段不起作用

> ID：11838333
> 
> 赞同：0
> 
> 时间：2012-08-07T01:59:06.683
> 
> 标签：android, android-fragments, fragment, android-fragmentactivity

请帮忙。发生什么了？错误的原因是什么，我该如何解决？谢谢你的帮助！

```
>  java.lang.RuntimeException: Unable to start activity
> ComponentInfo{com.example.interviewhelpers/com.example.interviewhelpers.Dashboard}:
> android.view.InflateException: Binary XML file line #192: Error
> inflating class fragment

Caused by: android.view.InflateException: Binary XML file line #192: Error inflating class fragment 
```

这是我的代码：主类...

```
public class Dashboard extends Activity implements OnClickListener {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_dashboard); 
```

activity_dashboard... 有更多的元素和布局，而且这个：

```
<fragment
        android:id="@+id/listFragment"
        android:layout_width="150dip"
        android:layout_height="match_parent"
        android:name="com.example.interviewhelpers.ClientDetailActivity" ></fragment> 
```

和...

```
 package com.example.interviewhelpers;

    import android.os.Bundle;
    import android.support.v4.app.FragmentActivity;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.TextView;

    public class ClientDetailActivity extends FragmentActivity  {

        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            View view = inflater.inflate(R.layout.cliente_detailed, container, false);
            TextView textView = (TextView) view.findViewById(R.id.detailsText);
            return view;
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T02:06:01.730

（始终尝试使用支持库） 首先： 1\. 应该使用 FragmentActivity 而没有 Activity 2\. 应该对您将使用的子组件使用 Fragment。3\. 在 onCreateView 上的 Fragments 上只做 Inflate 4\. 在 Fragment 上使用 onViewCreated 找到 TextView。示例：//这是活动

```
public class MainActivity extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }    
} 
```

//这是layout.activity_main

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <fragment
        android:name="com.example.fragmentapp.ChildFragment"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textView1"
        android:layout_alignParentTop="true" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:padding="@dimen/padding_medium"
        android:text="@string/hello_world"
        tools:context=".MainActivity" />

</RelativeLayout> 
```

//这是要显示的片段

```
public class ChildFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        return inflater.inflate(R.layout.child_frag, null);
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        TextView tvText = (TextView)view.findViewById(R.id.textView1);
        tvText.setText("Found!");
    }
} 
```

//这是片段的布局 layout.child_fragment

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

</LinearLayout> 
```

# asp.net - MVC 模型未更新

> ID：11838335
> 
> 赞同：19
> 
> 时间：2012-08-07T01:59:22.700
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, model-binding

**型号**：

```
class Address
{
    public string City { get; set; }
    public string Zip { get; set; }
} 
```

**控制器**：

```
[HttpPost]
public ActionResult GetAddress(Address model)
{
    if (!String.IsNullOrEmpty(model.Zip))
    {
        model.City = GetCityByZip(model.Zip);
    }
    return View(model);
} 
```

**观点**：

```
<div class="formrow">
    @Html.LabelFor(model => model.City)
    @Html.TextBoxFor(model => model.City) 
    @Html.ValidationMessageFor(model => model.City)
</div>
<div class="formrow">
    @Html.LabelFor(model => model.Zip)
    @Html.TextBoxFor(model => model.Zip) 
    @Html.ValidationMessageFor(model => model.Zip)
</div> 
```

问题是每当城市被修改时，它永远不会反映在视图上。在调试期间，`model.City`包含正确的值，但未显示在视图中。即使是简单的事情`@Html.TextBoxFor(model => model.City)`也不会显示正确的`model.City`值。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-07T02:37:16.230

当您更新和返回模型时，HtmlHelpers 从模型状态而不是模型中获取模型值。为了更新和返回模型，在你的 post 方法中添加这行代码：

```
ModelState.Clear(); 
```

或者您可以在 ModelState 本身中设置 city 的值：

```
ModelState["City"].Value = GetCityByZip(model.Zip); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-05-19T15:00:47.223

正如 Tommy 所指出的，这有点违反直觉，这是正确的行为，因为在将数据绑定到返回的视图时，在 post 上提交的表单数据具有第一优先级。这是有道理的，因为用户在重新返回相同的视图时可能会出现验证错误，并可以按原样恢复他们的表单输入，而不会在恢复页面时丢失表单输入的问题

另一种选择是手动插入输入值

**所以代替这个**：

```
@Html.TextBoxFor(model => model.City) 
```

**改为这样做**：

```
<input type="text" name="City" **value="@Model.City"** /> 
```

**这将直接从模型中获取值*

**甚至更好**：

```
<input type="text" value="@Model.City"
       name="@Html.NameFor(model => model.City)"
       id="@Html.IdFor(model => model.City)" /> 
```

> ***注意**：这不会带来`data-val`属性。如果您在此属性上使用它们进行客户端验证，则需要[为给定元素构建数据验证属性列表](https://stackoverflow.com/q/42999080/1366033)

### 其他资源

*   [HiddenFor 没有从视图模型中获得正确的值](https://stackoverflow.com/q/4837744/1366033)
*   [HTML.HiddenFor 未在回发时更新](https://stackoverflow.com/q/20657706/1366033)
*   [ASP.NET MVC 回发和 HtmlHelper 控件忽略模型更改](https://weblog.west-wind.com/posts/2012/apr/20/aspnet-mvc-postbacks-and-htmlhelper-controls-ignoring-model-changes)

# jquery - 如何让 jquery 工具覆盖与页面的其余部分一起滚动？

> ID：11838339
> 
> 赞同：2
> 
> 时间：2012-08-07T02:00:00.393
> 
> 标签：jquery, scroll, overlay, positioning, jquery-tools

我在这个领域有点新。我已经在我的 aktrailhead.com 页面中实现了覆盖。例如，查看[http://aktrailhead.com/baldy/baldy.shtml](http://aktrailhead.com/baldy/baldy.shtml)

问题是，即使向上或向下滚动，叠加层总是停留在浏览器窗口中的相同位置。页面的其余部分相应地向上或向下移动，而叠加层则永远不会移动。

这是小屏幕（例如平板电脑）的问题，因为覆盖层的底部被小屏幕截断，仍然无法触及。

要进行测试，请在上面的链接中打开一个覆盖。然后，调整浏览器窗口的大小，使窗口底部切断页面 - 因此需要滚动。您会注意到在这种情况下，覆盖的下部是如何不可访问的，而页面的其余部分会滚动（就像它应该滚动的那样）。

也许这是相对于浏览器空间而不是页面本身的覆盖定位问题？我想如果它相对于 body 元素定位，它会相应地向上或向下移动。我不知道，但我希望这是一个简单的解决方法。我试过用 CSS 解决这个问题，但到目前为止还没有运气。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T04:53:50.463

我想通了这一点，在帮助下：http: [//jquerytools.org/documentation/overlay/index.html](http://jquerytools.org/documentation/overlay/index.html)

在代码中调用 overlay() 时，可以将**fixed**属性更改为**false**。

就我而言：

...覆盖（{效果：'苹果'，顶部：10，**固定：假**}）...

真的很简单，解决了整个问题。现在，叠加层与页面的其余部分一起正确滚动。我会早点找到它，但这些术语对谷歌来说太模糊了，而且“Jquery 工具”网页并没有帮助我立即找到答案。无论如何，它就像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T02:04:24.437

您可以为您的灯箱尝试[Fancybox](http://fancyapps.com/fancybox/)。它处理灯箱的定位和调整大小。

# python - Udacity CS101：Python 中的基本元胞自动机

> ID：11838342
> 
> 赞同：0
> 
> 时间：2012-08-07T02:00:19.743
> 
> 标签：python, computer-science, cellular-automata

谁能告诉我我的代码有什么问题（似乎带有“num”的行）。我的字符串索引超出范围，但在几乎相同的代码块中它似乎可以工作。如果有一些我可以在 python 中查看的代码，我也很想看到它的链接。谢谢！

```
def cellular_automaton(s,p,n):
    p = bin(p+256)[3:]
    s=s.replace('x', '1').replace('.', '0')
    while n>0:
        N = len(s)
        r=''
        for i in range(N):
            num = int(s[(i - 1) % N] + s[i] + s[(i + 1) % N], 2)
            r += p[-1 - num]
            s = r
        n-=1
    s=s.replace('x', '1').replace('.', '0')
    return s 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T02:13:21.363

抱歉，添麻烦了！

问题似乎来自行的不正确缩进

```
s=r 
```

我希望这对某人有用！我也很想看到改进这种方法的建议。

# android - 如何找出在android中运行apk时使用的布局？

> ID：11838343
> 
> 赞同：0
> 
> 时间：2012-08-07T02:00:34.653
> 
> 标签：android, xml, layout

我在 Eclipse 中有我的 apk 并在设备上运行它。在我的 apk 中有很多布局（sw240、sw300、sw340 sw360 等），并且加载的布局是一个错误。但是我对设备一无所知，所以我想从 eclipse（或其他方式）知道设备上现在正在使用哪种布局（当我从设备上的 eclipse 启动我的 apk 时）。

不在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T02:15:55.937

如果我有很多布局设计尺寸，我通常使用下面的代码来了解我运行的布局：

```
Display display = ((WindowManager) getSystemService(WINDOW_SERVICE))
                .getDefaultDisplay();

int orientation = display.getOrientation();

// use this to see on your console
System.out.println("Screen Size: " + orientation);

// use this to see on logcat
Log.v(TAG, "Screen Size:" + orientation); 
```

从中我认为您可以知道执行应用程序时加载的布局大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T04:09:09.077

我发现了类似的东西：

```
DisplayMetrics m = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(m);
Log.d(TAG, "@@@@@@ " + m); 
```

但这并不是我想要的。但我更接近。

那么如何重新计算这样的结果

```
DisplayMetrics{density=0.75, width=320, height=240, scaledDensity=0.75, xdpi=132.52174, ydpi=133.2459} 
```

在 swXXXX 上？

# php - MySQL 在整数之前不存储零（字段设置为文本（或 varchar））

> ID：11838345
> 
> 赞同：3
> 
> 时间：2012-08-07T02:00:54.573
> 
> 标签：php, mysql, html, integer, zero

我通过 HTML 将表单提交到 POST PHP 页面，然后将该信息存储到 MySQL 数据库中。输入字段之一是可以从零开始的数字字段。我已经在表单上将 HTML 数据类型设置为 text 并尝试将 MySQL 数据类型设置为 text 和 varchar，并且在整数被删除之前都设置为零。我不太确定我做错了什么。

这是我用于创建表的 PHP 代码：

```
$sql = "CREATE TABLE IF NOT EXISTS $tablename_db (
ID int NOT NULL AUTO_INCREMENT,
PRIMARY KEY(ID),
num text(4),
amnt DECIMAL(8,2)
);"; 
```

这是表单域的样子：

```
<div id="input1" class="cinput">
    # (last 4 digits): <input id="cnum" type="text" name="num[]" maxlength="4"     size="4" /> Amount: <input id="camnt" type="int" name="amnt[]" /> </br>
</div> 
```

使用这个，输入到'cnum'的0125这样的数字被保存为125。我做错了什么？

编辑：这是完整的代码，所以很清楚我在做什么。这不是一个很长的代码（我试图将内容转移到这里时可能会出现拼写错误）。

```
<?php

if(isset($_POST['submit']))
{
//Get Current User Login
global $current_user;
$current_user = wp_get_current_user();
$ulog = $current_user->user_login;
$tablename = "db_".$ulog;

//Check To See If User Has Already Created Table
$sql = "CREATE TABLE IF NOT EXISTS $tablename (
ID int NOT NULL AUTO_INCREMENT,
PRIMARY KEY(ID),
num text(4),
amnt DECIMAL(8,2)
);";

mysql_query($sql);

$num = $_POST['num'];
$amnt = $_POST['amnt'];

$items = array_combine($num,$amnt);
$pairs = array();

foreach($items as $key=>$value)
{
    if($key != 'submit')
    {   
        if($value != '')
        {
            $pairs[] = '('.intval($key).','.intval($value).')';
        }
    }
}

if (!mysql_query('INSERT INTO ' .$tablename. '(num, amnt) VALUES '.implode(',',$pairs)))
    die('Error: ' . mysql_error());
    else
        echo '<strong>', "Your information has been submitted and will be added to your account upon approval.", '</strong>', "/n";

}
?>

<html>

<head>
<title></title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>

<script type="text/javascript">
    $(document).ready(function() {
        $('#btnAdd').click(function() {
            var num     = $('.ccinput').length; // how many "duplicatable" input fields we currently have
            var newNum  = new Number(num + 1);      // the numeric ID of the new input field being added

            // create the new element via clone(), and manipulate it's ID using newNum value
            var newElem = $('#input' + num).clone().attr('id', 'input' + newNum);

            // insert the new element after the last "duplicatable" input field
            $('#input' + num).after(newElem);

            // enable the "remove" button
            $('#btnDel').attr('disabled','');

            // business rule: you can only add 20 names
            if (newNum == 20)
                $('#btnAdd').attr('disabled','disabled');
        });

        $('#btnDel').click(function() {
            var num = $('.ccinput').length; // how many "duplicatable" input fields we currently have
            $('#input' + num).remove();     // remove the last element

            // enable the "add" button
            $('#btnAdd').attr('disabled','');

            // if only one element remains, disable the "remove" button
            if (num-1 == 1)
                $('#btnDel').attr('disabled','disabled');
        });

        $('#btnDel').attr('disabled','disabled');
    });
</script>
</head>

<body>

Please fill in your information in the form below and press submit. If you need to add    more, please click the "Add" button at the bottom of the form. You may enter a maximum of   20 at a time. Leave all unused fields blank.

<form method="post" action="<?php echo htmlentities($PHP_SELF); ?>">
<fieldset>
<legend>Information:</legend>
<div id="input1" class="ccinput">
    # (last 4 digits): <input id="cnum" type="text" name="num[]" maxlength="4" size="4" /> Amount: <input id="camnt" type="int" name="amnt[]" /> </br>
</div>
<div>
    <input type="button" id="btnAdd" value="Add" />
    <input type="button" id="btnDel" value="Remove" />
</div>
</fieldset>
<input type="submit" value="Submit" name="submit" />
</form>

</body>
</html> 
```

经过多次调试，我认为错误在这两个部分的某个地方。

第 1 节：

```
$sql = "CREATE TABLE IF NOT EXISTS $tablename_db (
ID int NOT NULL AUTO_INCREMENT,
PRIMARY KEY(ID),
num text(4),
amnt DECIMAL(8,2)
);"; 
```

或者它可能在这一行：

```
if (!mysql_query('INSERT INTO ' .$tablename. '(num, amnt) VALUES '.implode(',',$pairs))) 
```

代码似乎一直到这一行都完美地保持了格式。因此，我认为在插入 MySQL 数据库时会删除零。我不确定它为什么会这样做......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T02:38:34.740

`intval()`意思是“获取字符串并将其转换为整数”，这就是导致字符串`"01234"`以数字形式出现的原因`1234`。

将其从`$pairs[] = '('.intval($key).','.intval($value).')';`数字字段中删除，因为您想将其作为文本插入；将其封装在引号中`'$value'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T02:40:05.847

您正在将您的字符串转换为 int 在这一行：

```
$pairs[] = '('.intval($key).','.intval($value).')'; 
```

之后，您使用来自`$pairs`（现在包含两个整数）的值进行插入：

```
mysql_query('INSERT INTO ' .$tablename. '(num, amnt) VALUES '.implode(',',$pairs)) 
```

你应该更换：

```
$pairs[] = '('.intval($key).','.intval($value).')'; 
```

和：

```
$pairs[] = '('.$key.','.$value.')'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T20:10:09.203

有人帮助我意识到我的错误。我在 $pairs[] 行中缺少一个引号，而不是将其作为字符串输入 MySQL，而是作为整数输入，这就是 MySQL 删除零的原因。现在一切正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T02:42:41.783

而不是`intval`你可以使用这样的东西

```
function toNumeric($str)
{
    return is_numeric($str) ? $str : preg_replace('/\D/',null,$str);
} 
```

# java - 使用运行时异常

> ID：11838346
> 
> 赞同：1
> 
> 时间：2012-08-07T02:00:55.973
> 
> 标签：java, exception

我刚刚学会了如何使用异常，我对 RuntimeExceptions 有点困惑，因为这些特别是未经检查的。所以我有这个代码：

```
 String path = "foo/bar/local/stuff.txt";
    File file = new File(path); 
```

如果找不到该路径，这不是 FileNotFoundException 吗？如何在我的方法中指定它？在这一步之后，我也会这样做：

```
 File[] listFiles = file.listFiles(); 
```

如果出现以下情况，这是否也会引发异常：
1\. 它不是目录，而是文件。
2.它不存在。

抱歉，如果这似乎是新手问题，我仍然不知道如何使用异常。有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T02:24:41.430

好的，我正在添加代码，所以我将添加一个新的答案。如果文件不是目录，listFiles 方法将返回 null。要抛出您自己的异常，请执行以下操作：

```
public void exampleMethod() throws Exception {
    File[] files = someFile.listFiles();
    if(files == null) {
        throw new Exception("File is not a directory, and as such cannot list files");
        //You can also create your own exception class (extends Exception), and explicitly throw that, rather than just a general Exception
        return;
    }

} 
```

如果你只是想让它打印这些东西，而不是抛出异常，那就做

```
new Exception("blah").printStackTrace(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T02:08:41.223

您仍然可以在签名中声明您的方法抛出的异常：

```
public void foo() throws FileNotFoundException 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T02:09:51.820

File(String) 构造函数不能抛出 FileNotFoundException，因此您不需要为问题的前半部分做任何特别的事情。

[File#listFiles()](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28%29)也不会抛出 FileNotFoundException。如果访问被拒绝，它可以抛出 SecurityException，但就是这样。如果文件不是目录或不存在，则该方法只返回 null，因此您应该在使用列出的文件之前对其进行 nullcheck。

```
File[] files = file.listFiles();
if (files != null) {
    // file exists and is a directory
    // interact with files
} 
```

至于实际使用异常，`throws`如果您希望通知编译器该方法可能会抛出所指出的异常，并且您的方法不处理抛出该异常的事件，则可以添加一条语句。

```
public void someMethod() throws IOException, SecurityException { /*...*/ } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T02:13:02.270

`File`是虚拟的概念。在 Java 中 a`File`被允许不存在（这就是我们拥有 的原因`File.exists()`）。这允许您指定一个“可能的”位置（例如用于写入）。

它还允许检查所需文件是否存在，允许开发人员做出决定（覆盖文件，不加载文件，对锁定文件执行其他操作）

`listFiles`是另一种野兽。`IOException`可以说，如果您尝试列出“文件”或目录不存在，它可能应该抛出某种。自 Java 1 以来，它一直是 API 的一部分。这表明当时的设计范式与我们过去所知道的不同。

`Properties`您可以在对类的更改中看到这一点，该类`save`已被弃用，`store`因为它会抛出一个`IOException`

Java 7 引入了一个新的 API 来帮助改进其中的一些缺点，并为文件操作引入了一个更好的工作模型

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T02:16:43.173

首先，根据[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#File%28java.lang.String%29)：

```
public File(String pathname) 
```

抛出：`NullPointerException`- 如果路径名参数为空

所以`File file = new File(path);`不**抛出**一个`FileNotFoundException`。

1）如果是文件，也不例外。

2）如果不存在，它不会抛出异常。

底线，将抛出的唯一异常是`NullPointerException`如果路径名为空。

另一方面`File.createNewFile()`可以抛出一个`IOException`或一个`SecurityException`。`File.ListFiles()`也可以抛出安全异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T02:20:32.190

> 嗯，我不认为这是我正在寻找的方法。他们目前不抛出任何异常。但是我知道代码在这些情况下会失败，所以我想知道如何向它们添加异常，以便我可以适当地处理这些情况。

它不会抛出异常。在`listFiles()`文档中，它说：

> 如果此抽象路径名不表示目录，或者发生 I/O 错误，则返回 null。

所以如果它是一个文件，或者一个不存在的文件，它会返回一个空值。

但这就是 RuntimeException 发挥作用的地方*。*如果在您编写的方法中说：

```
public void doStuffToAnExistingDirectory(String dirname)
{
    // stuff
} 
```

并且该方法的编写方式是它*需要一个现有目录的目录名称*，并且在该方法的某个地方执行以下操作：

```
 File file = new File(dirname);
    File[] listFiles = file.listFiles();
    int num = listFiles.length; 
```

这将抛出一个`NullPointerException`if`dirname`不表示现有目录。此异常是**Runtime**，因此您不必捕获它或在您的`doStuffToAnExistingDirectory()`方法中声明它，您可以让它传播直到最终捕获它。这本质上是说该方法不是为了处理目录不存在的异常而编写的。因此，在该程序运行期间，如果`dirname`以某种方式最终成为一个不存在的目录，则会引发**运行时异常。**

您可以选择在您的代码中处理这种情况（而不是在运行时，当程序运行时），并检查是否`listFiles`为空，然后可能抛出您自己的异常以让任何调用该`doStuffToAnExistingDirectory()`方法知道它只是给了你一个不存在的目录。

# ajax - open ajax page from within an ajax page

> ID：11838351
> 
> 赞同：0
> 
> 时间：2012-08-07T02:02:48.643
> 
> 标签：ajax

We have done a site, that loads content into a div, using ajax. My question is, within that ajax page, can I initiate a new page to load onclick in the existing pages place.

So as it stands on my index page I have:

```
<section id="mycontent">

</section> 
```

Onclick of a element my content gets loaded into the above section. Like so:

```
<span class="link_wrap" data-link="prices"><span class="link_title">Our Prices</span</span> 
```

So on click of the above, our js pulls in the relevant page: prices.php

In the JS I have:

```
case 'prices' :

     myFunctionAjax('prices.php', function () {

         _self._focustitle();

     });

break; 
```

So what I would like to do is, in say the prices.php page have a link to say deals.php

That onclick, similar to above, loads IN PLACE of prices.php content the new content from deals.php.

Any suggestions ?

# python - 在numpy中将几个矩阵相乘

> ID：11838352
> 
> 赞同：48
> 
> 时间：2012-08-07T02:02:55.447
> 
> 标签：python, numpy

假设你有 n 个方阵 A1,...,An。反正有没有以一种简洁的方式将这些矩阵相乘？据我所知，numpy 中的 dot 只接受两个参数。一种明显的方法是定义一个函数来调用自身并获取结果。有没有更好的方法来完成它？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-08-07T05:12:31.673

这可能是一个相对较新的功能，但我喜欢：

```
A.dot(B).dot(C) 
```

或者如果你有一条长链，你可以这样做：

```
reduce(numpy.dot, [A1, A2, ..., An]) 
```

更新：

这里有关于 reduce 的更多信息[。](http://docs.python.org/library/functions.html#reduce)这是一个可能有帮助的例子。

```
>>> A = [np.random.random((5, 5)) for i in xrange(4)]
>>> product1 = A[0].dot(A[1]).dot(A[2]).dot(A[3])
>>> product2 = reduce(numpy.dot, A)
>>> numpy.all(product1 == product2)
True 
```

2016 年更新：从 python 3.5 开始，有一个新的 matrix_multiply 符号`@`：

```
R = A @ B @ C 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-11-18T16:58:32.670

用更新复活一个老问题：

截至[2014 年 11 月 13 日，](https://github.com/numpy/numpy/pull/4977)现在有一个`np.linalg.multi_dot`功能可以完全满足您的需求。它还具有优化呼叫顺序的好处，尽管在您的情况下这不是必需的。

请注意，这从 numpy 版本 1.10 开始可用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-07T02:05:48.733

如果您先验地计算所有矩阵，那么您应该使用矩阵链乘法的优化方案。请参阅[此维基百科文章](https://secure.wikimedia.org/wikipedia/en/wiki/Matrix_chain_multiplication)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-03T07:14:18.740

实现此目的的另一种方法是使用[`einsum`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.einsum.html)，它为 NumPy 实现了[爱因斯坦求和约定](http://en.wikipedia.org/wiki/Einstein_notation)。

为了非常简要地解释关于这个问题的这个约定：当你把你的多矩阵乘积写成一个很大的乘积时，你会得到类似的东西：

```
P_im = sum_j sum_k sum_l A1_ij A2_jk A3_kl A4_lm 
```

其中`P`是您的产品的结果`A1`，`A2`、`A3`、 和`A4`是输入矩阵。请注意，您将准确地对在加法中出现两次的那些索引进行求和，即`j`、`k`和`l`。由于具有此属性的总和经常出现在物理学、矢量微积分以及可能的其他一些领域中，因此有一个 NumPy 工具可以解决它，即`einsum`.

在上面的示例中，您可以使用它来计算矩阵乘积，如下所示：

```
P = np.einsum( "ij,jk,kl,lm", A1, A2, A3, A4 ) 
```

在这里，第一个参数告诉函数将哪些索引应用于参数矩阵，然后将所有双重出现的索引相加，产生所需的结果。

请注意，计算效率取决于几个因素（因此您最好只测试它）：

*   [为什么 numpy 的 einsum 比 numpy 的内置函数慢？](https://stackoverflow.com/q/20149201/2127008)
*   [为什么 numpy 的 einsum 比 numpy 的内置函数快？](https://stackoverflow.com/q/18365073/2127008)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-07T08:07:16.857

```
A_list = [np.random.randn(100, 100) for i in xrange(10)]
B = np.eye(A_list[0].shape[0])
for A in A_list:
    B = np.dot(B, A)

C = reduce(np.dot, A_list)

assert(B == C) 
```

# html - How to remove iframe highlight border on focus?

> ID：11838356
> 
> 赞同：2
> 
> 时间：2012-08-07T02:03:45.507
> 
> 标签：html, css, iframe, focus, border

Wondering if it's possible to remove the dotted border that appears on focus of an iframe embedded within a page? The iframe contains a form that is tabbed to from some input boxes on the page that contains it. The focus border looks unsightly and would like to get rid of it. Have tried setting frameborder to 0 within the iframe, adding a hidefocus attribute and setting the border and outline to 0 through CSS to no avail. Any help would be greatly appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T02:05:50.543

if iframe is not on the same domain, it is not possible

# php - 以能够识别自定义 if 语句的方式解析纯文本

> ID：11838359
> 
> 赞同：11
> 
> 时间：2012-08-07T02:05:10.277
> 
> 标签：php, regex, arrays

我有以下字符串：

```
$string = "The man has {NUM_DOGS} dogs." 
```

我通过以下函数运行它来解析它：

```
function parse_text($string)
{
    global $num_dogs;

    $string = str_replace('{NUM_DOGS}', $num_dogs, $string);

    return $string;
}

parse_text($string); 
```

`$num_dogs`预设变量在哪里。取决于`$num_dogs`，这可能会返回以下任何字符串：

*   该男子有1条狗。
*   该男子有2条狗。
*   这个人有500条狗。

问题在于，在“男人有 1 条狗”的情况下，*狗*是复数形式，这是不受欢迎的。我知道这可以通过不使用该`parse_text`函数来解决，而是执行以下操作：

```
if($num_dogs = 1){
    $string = "The man has 1 dog.";
}else{
    $string = "The man has $num_dogs dogs.";
} 
```

但在我的应用程序中，我不仅仅解析`{NUM_DOGS}`，而且编写所有条件需要很多行。

我需要一种速记方式，可以将其写入`$string`可以通过解析器运行的初始值，理想情况下，这不会将我限制在两个真/假的可能性中。

例如，让

```
$string = 'The man has {NUM_DOGS} [{NUM_DOGS}|0=>"dogs",1=>"dog called fred",2=>"dogs called fred and harry",3=>"dogs called fred, harry and buster"].'; 
```

清楚最后发生了什么吗？我尝试使用竖线之后的方括号内的部分开始创建数组，然后将新数组的键与 {NUM_DOGS} 的解析值进行比较（现在将是 $num_dogs 变量在垂直条的左侧），并使用该键返回数组条目的值。

如果这不完全令人困惑，是否可以使用 preg_* 函数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-10T08:27:01.830

你的问题的前提是你想**匹配**一个特定的**模式**，然后在对匹配的文本执行**额外的处理后****替换它。**

 **似乎是一个理想的候选人[`preg_replace_callback`](http://php.net/preg_replace_callback)

用于捕获匹配的括号、引号、大括号等的正则表达式可能会变得相当复杂，而使用正则表达式来完成这一切实际上是非常低效的。事实上，如果你需要的话，你需要编写一个合适的解析器。

对于这个问题，我将假设复杂程度有限，并使用正则表达式通过两阶段解析来解决它。

* * *

首先，我能想到的最简单的正则表达式用于捕获花括号之间的标记。

```
/{([^}]+)}/ 
```

让我们分解一下。

```
{        # A literal opening brace
(        # Begin capture
  [^}]+  # Everything that's not a closing brace (one or more times)
)        # End capture
}        # Literal closing brace 
```

当应用于字符串时`preg_match_all`，结果如下所示：

```
array (
  0 => array (
    0 => 'A string {TOK_ONE}',
    1 => ' with {TOK_TWO|0=>"no", 1=>"one", 2=>"two"}',
  ),
  1 => array (
    0 => 'TOK_ONE',
    1 => 'TOK_TWO|0=>"no", 1=>"one", 2=>"two"',
  ),
) 
```

到目前为止看起来不错。

请注意，如果您的字符串中有嵌套的大括号，即`{TOK_TWO|0=>"hi {x} y"}`，此正则表达式将不起作用。如果这不是问题，请跳到下一部分。

可以进行顶级匹配，但我能够做到的唯一方法是通过递归。大多数正则表达式老手会告诉您，一旦您将递归添加到正则表达式，它就不再是正则表达式。

这是额外的处理复杂性开始的地方，并且对于长而复杂的字符串，很容易耗尽堆栈空间并使程序崩溃。如果您需要使用它，请小心使用它。

递归正则表达式[取自我的其他答案之一](https://stackoverflow.com/a/11468459/599857)并稍作修改。

```
`/{((?:[^{}]*|(?R))*)}/` 
```

坏掉了。

```
{                   # literal brace
(                   # begin capture
    (?:             # don't create another capture set
        [^{}]*      # everything not a brace
        |(?R)       # OR recurse
    )*              # none or more times
)                   # end capture
}                   # literal brace 
```

而这次输出只匹配顶级大括号

```
array (
  0 => array (
    0 => '{TOK_ONE|0=>"a {nested} brace"}',
  ),
  1 => array (
    0 => 'TOK_ONE|0=>"a {nested} brace"',
  ),
) 
```

同样，除非必须，否则不要使用递归正则表达式。（如果你的系统有旧的 PCRE 库，你的系统甚至可能不支持它们）

* * *

有了这个，我们需要确定令牌是否具有与之关联的选项。我建议根据我的示例保留带有令牌的选项，而不是根据您的问题匹配两个片段。`{TOKEN|0=>"option"}`

让我们假设`$match`包含一个匹配的标记，如果我们检查一个管道`|`，并在它之后获取所有内容的子字符串，我们将留下您的选项列表，我们可以再次使用正则表达式来解析它们。（别担心，我会把所有东西放在最后）

`/(\d)+\s*=>\s*"([^"]*)",?/`

坏掉了。

```
(\d)+    # Capture one or more decimal digits
\s*      # Any amount of whitespace (allows you to do 0    =>    "")
=>       # Literal pointy arrow
\s*      # Any amount of whitespace
"        # Literal quote
([^"]*)  # Capture anything that isn't a quote
"        # Literal quote
,?       # Maybe followed by a comma 
```

和一个示例匹配

```
array (
  0 => array (
    0 => '0=>"no",',
    1 => '1 => "one",',
    2 => '2=>"two"',
  ),
  1 => array (
    0 => '0',
    1 => '1',
    2 => '2',
  ),
  2 => array (
    0 => 'no',
    1 => 'one',
    2 => 'two',
  ),
) 
```

如果要在引号内使用引号，则必须为其制作自己的递归正则表达式。

* * *

总结一下，这是一个工作示例。

一些初始化代码。

```
$options = array(
    'WERE' => 1,
    'TYPE' => 'cat',
    'PLURAL' => 1,
    'NAME' => 2
);

$string = 'There {WERE|0=>"was a",1=>"were"} ' .
    '{TYPE}{PLURAL|1=>"s"} named bob' . 
    '{NAME|1=>" and bib",2=>" and alice"}'; 
```

一切都在一起。

```
$string = preg_replace_callback('/{([^}]+)}/', function($match) use ($options) {
    $match = $match[1];

    if (false !== $pipe = strpos($match, '|')) {
        $tokens = substr($match, $pipe + 1);
        $match = substr($match, 0, $pipe);
    } else {
        $tokens = array();
    }

    if (isset($options[$match])) {
        if ($tokens) {
            preg_match_all('/(\d)+\s*=>\s*"([^"]*)",?/', $tokens, $tokens);

            $tokens = array_combine($tokens[1], $tokens[2]);

            return $tokens[$options[$match]];
        }
        return $options[$match];
    }
    return '';
}, $string); 
```

请注意，错误检查很少，如果您选择不存在的选项，将会出现意外结果。

可能有更简单的方法来完成所有这些，但我只是接受了这个想法并实施了它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T02:11:02.410

首先，它有点值得商榷，但如果你可以轻松避免它，只需将`$num_dogs`其作为参数传递给函数，因为大多数人认为全局变量是邪恶的！

接下来，为了获得“s”，我通常会这样做：

```
$dogs_plural = ($num_dogs == 1) ? '' : 's'; 
```

然后做这样的事情：

```
$your_string = "The man has $num_dogs dog$dogs_plural"; 
```

它本质上与执行 if/else 块相同，但代码行更少，您只需编写一次文本。

至于另一部分，我仍然对你想要做的事情感到困惑，但我相信你正在寻找某种方式来转换

```
{NUM_DOGS}|0=>"dogs",1=>"dog called fred",2=>"dogs called fred and harry",3=>"dogs called fred, harry and buster"] 
```

进入：

```
switch $num_dogs {
    case 0:
        return 'dogs';
        break;
    case 1:
        return 'dog called fred';
        break;
    case 2:
        return 'dogs called fred and harry';
        break;
    case 3:
        return 'dogs called fred, harry and buster';
        break;
} 
```

最简单的方法是尝试使用`explode()`和正则表达式的组合，然后让它做我上面所说的事情。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-15T14:11:07.993

在紧要关头，我做了一些类似于你所要求的事情，实现方式有点像下面的代码。

这远没有@Mike 的答案那么丰富，但它在过去已经成功了。

```
/**
 * This function pluralizes words, as appropriate.
 *
 * It is a completely naive, example-only implementation.
 * There are existing "inflector" implementations that do this
 * quite well for many/most *English* words.
 */
function pluralize($count, $word)
{
    if ($count === 1)
    {
        return $word;
    }
    return $word . 's';
}

/**
 * Matches template patterns in the following forms:
 *   {NAME}       - Replaces {NAME} with value from $values['NAME']
 *   {NAME:word}  - Replaces {NAME:word} with 'word', pluralized using the pluralize() function above.
 */
function parse($template, array $values)
{
    $callback = function ($matches) use ($values) {
        $number = $values[$matches['name']];
        if (array_key_exists('word', $matches)) {
            return pluralize($number, $matches['word']);
        }
        return $number;
    };

    $pattern = '/\{(?<name>.+?)(:(?<word>.+?))?\}/i';
    return preg_replace_callback($pattern, $callback, $template);
} 
```

这里有一些类似于你原来的问题的例子......

```
echo parse(
    'The man has {NUM_DOGS} {NUM_DOGS:dog}.' . PHP_EOL,
    array('NUM_DOGS' => 2)
);

echo parse(
    'The man has {NUM_DOGS} {NUM_DOGS:dog}.' . PHP_EOL,
    array('NUM_DOGS' => 1)
); 
```

输出是：

> 该男子有2条狗。
> 
> 该男子有 1 条狗。

值得一提的是，在大型项目中，我总是放弃任何自定义滚动变形，转而支持[GNU gettext](http://php.net/manual/en/book.gettext.php)，这似乎是一旦需要多语言的最明智的前进方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T15:08:57.933

***这是从 2009 年 flussence 为回答[这个问题](https://stackoverflow.com/questions/1534127/pluralize-in-php)而发布的答案中复制的：***

您可能想查看[gettext 扩展名](http://php.net/gettext)。更具体地说，它听起来`ngettext()`会做你想做的事：只要你有一个数字可以计数，它就会正确地复数单词。

```
print ngettext('odor', 'odors', 1); // prints "odor"
print ngettext('odor', 'odors', 4); // prints "odors"
print ngettext('%d cat', '%d cats', 4); // prints "4 cats" 
```

您还可以让它正确处理翻译的复数形式，这是它的主要目的，尽管它需要做很多额外的工作。**

# ios - set MPMovieControlStyleNone make statusbar overlaps

> ID：11838361
> 
> 赞同：1
> 
> 时间：2012-08-07T02:05:31.853
> 
> 标签：ios, overlap

I set MPMoviePlayerController.controlStyle = MPMovieControlStyleNone, when i entry fullscreen lanscape and set MPMoviePlayerController.controlStyle = MPMovieControlStyleDefault when I entry portrait. Then I exit from portrait. I find the statusbar overlap ViewController, and when I jump to other ViewController, then same overlap. I know the frame of ViewController is changed, so If I do:

```
self.view.frame = [[UIScreen mainScreen] applicationFrame]; 
```

the ViewController will go to right position, but I jump to other ViewController, the same overlap happen. I have dozens of ViewController, I don't want to change everyone.

I guess MPMovieControlStyleNone change some setting of frame, and ViewControllers I make haven't set this setting, so I can modify this setting back when i exit the view of MPMoviePlayerController. But I don't know which setting it is.

BTW: I use xib to create my ViewControllers, and i choose it contain statusbar, so the frame of them begin from y.20.

# c# - Separating model concerns

> ID：11838368
> 
> 赞同：1
> 
> 时间：2012-08-07T02:07:03.727
> 
> 标签：c#, asp.net-mvc-3, separation-of-concerns

Any given model in my application might implement the `IHasOpenGraphMetadata`, if that's the case, a call to `@Html.Partial("_OpenGraphMetadata")` in my layout will render the related metadata, by accessing the model through that interface.

All's good and clean. That is until I wanted to do that from a partial action.

In `/Home/Index` I have the following call: `@Html.Action("List", "Posts")`

This returns:

```
public ActionResult List(long? timestamp = null, int count = 8)
{
    IEnumerable<Post> posts = postService.GetLatest(timestamp, count);
    PostListModel model = mapper.Map<IEnumerable<Post>, PostListModel>(posts);
    return PartialView(model);
} 
```

The issue becomes apparent here: the actual model for `/Home/Index` is `null`, while the actual metadata is in the `/Posts/List` partial view result

I went with this in my partial which renders the `og:data` (`"_OpenGraphMetadata"`):

```
@{
    OpenGraphModel openGraph = GetOpenGraphMetadata();
    if (openGraph != null)
    {
        @OpenGraphMetaProperty("title", openGraph.Title)
        @OpenGraphMetaProperty("description", openGraph.Description)
        @OpenGraphMetaProperty("url", openGraph.Url)
        @OpenGraphMetaProperty("image", openGraph.Image)
    }
}
@helper OpenGraphMetaProperty(string property, string value)
{
    if (!value.NullOrBlank())
    {
        <meta property="og:@property" content="@value" />
    }
}
@functions
{
    private OpenGraphModel GetOpenGraphMetadata()
    {
        IHasOpenGraphMetadata model = Model as IHasOpenGraphMetadata;
        if (model != null)
        {
            return model.OpenGraph;
        }
        return Context.Items[Constants.OpenGraphContextItem] as OpenGraphModel;
    }
} 
```

I figure this is pretty decent, try to extract the metadata from the actual model, and if the interface is not implemented, then access the `HttpContext` and look for the metadata there. The question now is, how should I be putting this metadata in the `HttpContext`?

I don't really want to pollute my action methods with calls like:

```
HttpContext.Items[Constants.OpenGraphContextItem] = model.OpenGraph; 
```

But what other options do I have? Should I be doing this in a global action filter? a result filter? Is there an alternative to these options?

**Update**
It doesn't seem possible to do this in an action filter, the way I figured out I could do this was overriding the base controller's PartialView, and both View overloads, but this seems like a really unpolished approach, there must be a better way to accomplish this.

# java - 在哪里可以找到可用 JSR-223 脚本语言的列表？

> ID：11838369
> 
> 赞同：42
> 
> 时间：2012-08-07T02:07:07.813
> 
> 标签：java, scripting, jsr223

我的应用程序需要一种基于 JVM 的脚本语言，并且想看看除了 Groovy、Ruby 和 Python 之外还有什么。

谷歌一直把我指向一个死页[http://scripting.dev.java.net/](http://scripting.dev.java.net/)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-07T02:22:12.760

这不是官方列表，但您可以从这里开始：[http ://en.wikipedia.org/wiki/List_of_JVM_languages](http://en.wikipedia.org/wiki/List_of_JVM_languages)

Rhino (JavaScript) 默认在 Oracle JDK/JRE 中实现。

使用此代码，您可以查看 JDK 中可用的脚本语言：

```
import java.util.*;
import javax.script.*;

public class A {

    public static void main( String[] args ) {

        ScriptEngineManager mgr = new ScriptEngineManager();
        List<ScriptEngineFactory> factories = mgr.getEngineFactories();

        for (ScriptEngineFactory factory : factories) {

            System.out.println("ScriptEngineFactory Info");

            String engName = factory.getEngineName();
            String engVersion = factory.getEngineVersion();
            String langName = factory.getLanguageName();
            String langVersion = factory.getLanguageVersion();

            System.out.printf("\tScript Engine: %s (%s)%n", engName, engVersion);

            List<String> engNames = factory.getNames();
            for(String name : engNames) {
                System.out.printf("\tEngine Alias: %s%n", name);
            }

            System.out.printf("\tLanguage: %s (%s)%n", langName, langVersion);

        }

    }

} 
```

这个例子是在这里获得的：[http ://www.oracle.com/technetwork/articles/javase/scripting-140262.html](http://www.oracle.com/technetwork/articles/javase/scripting-140262.html)

您可能也想尝试 Lua。看看这里：[如何在 java 中嵌入 lua？](https://stackoverflow.com/questions/2113432/how-can-i-embed-lua-in-java)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-13T22:28:29.997

旧页面位于此处[https://web.archive.org/web/20070610234337/https://scripting.dev.java.net/](https://web.archive.org/web/20070610234337/https://scripting.dev.java.net/)

JSR-223 项目页面上托管的那些可以在[https://web.archive.org/web/20140909141915/https://java.net/projects/scripting/sources/svn/show/trunk/engines](https://web.archive.org/web/20140909141915/https://java.net/projects/scripting/sources/svn/show/trunk/engines)浏览，但是清单是：

JSR-223 脚本引擎

*   AWK
*   豆壳
*   ejs
*   自由标记
*   时髦的
*   雅斯凯尔
*   爪哇
*   JavaScript
*   JavaScript（网络浏览器）
*   果冻
*   杰普
*   杰克斯
*   jst
*   柔道文
*   尤尔
*   OGNL
*   坚果
*   Python
*   红宝石
*   方案
*   睡觉
*   Tcl
*   速度
*   XPath
*   XSLT

JSR 223 脚本引擎在其他地方维护

*   JavaFX 脚本
*   ABCL
*   苹果脚本
*   Bex 脚本
*   OCaml 脚本项目
*   PHP
*   PHP（另一种）
*   Python
*   短暂聊天
*   CajuScript
*   数学日食

对于下载链接，请查看我上面提到的 index.html。对于任何 java.net 项目，只需删除 dev，以便 scripting.dev.java.net 变为 scripting.java.net。您可能必须在存储库中浏览旧网页。

值得注意的是，JavaScript 引擎 (Rhino) 正在为 Java 8 完全重写。新名称是 Nashorn。有关更多信息，请参阅： http: [//openjdk.java.net/projects/nashorn/](http://openjdk.java.net/projects/nashorn/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T02:23:01.277

我不知道一个完整的列表。

然而值得指出的是，只要它支持运行时的动态编译/执行，您几乎可以使用任何可嵌入的 JVM 语言来编写脚本。它是否是 JSR233 并不重要。

例如，我在一些应用程序中使用 Clojure 编写脚本（使用自定义 DSL）。

我自己没有尝试过，但我认为你也可以使用 Scala: [scala as scripting language](https://stackoverflow.com/questions/6164138/scala-as-scripting-language)

FWIW，我个人的选择是：

*   **Clojure**用于表达能力/DSL 功能（如果您自己或与专家团队一起使用脚本功能）
*   **如果您的主要目标是易于最终用户使用，则使用Groovy**（因为简单且与 Java 相似）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-01T04:35:50.173

我也找到了这个页面：http: [//java-source.net/open-source/scripting-languages](http://java-source.net/open-source/scripting-languages)

他们提到了其他脚本语言，例如称为 JBasic、LUA、LuaJava 的 Basic ...... ePascal 和许多其他

# php - 使用数据库进行 Jquery 同位素过滤

> ID：11838373
> 
> 赞同：2
> 
> 时间：2012-08-07T02:08:16.637
> 
> 标签：php, sql, database, jquery-isotope

我正在尝试让 Metafizzy 的 Isotope 插件正常工作。这是我的设置，除了我从 sql 数据库中提取容器项目 - [http://jsfiddle.net/trewknowledge/jJZEN/](http://jsfiddle.net/trewknowledge/jJZEN/)

谁能帮我弄清楚为什么它不起作用？

这是我正在使用的代码

**JavaScript**

```
 //Load all items straight away
    $(document).ready(function(){  
        showEntries('*');
    });  

    //Isotope filter
    function filterEntries() {
        var $container = $('#entries');
           $select = $('#filters select');

        $container.isotope({
            itemSelector: '.item'
        });

        $select.change(function() {
            var filters = $(this).val();
            $('.active').removeClass('active');
            if (filters != '.item') {
                $( filters).addClass('active');
            }
            $container.isotope({
                filter: filters
            });
        });

    };

    //Pull in data from database
    function showEntries(str) {

        if (str=="") {
            document.getElementById("entries").innerHTML="";
            return;
        }
        if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest(); 
        }
        else {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
            xmlhttp.onreadystatechange=function() {
                if (xmlhttp.readyState==4 && xmlhttp.status==200) {

                    document.getElementById("entries").innerHTML=xmlhttp.responseText;

                }
        }
            xmlhttp.open("POST","<?php bloginfo('template_url'); ?>/getentries.php?q="+str,true);
            xmlhttp.send();

            //Fire filter function
            filterEntries();
        }
</script> 
```

**HTML**

```
<section id="filters">
      <select name="entries" onchange="showEntries(this.value)">
        <option value="*">show all</option>
        <option value=".item323" >323</option>
        <option value=".item266" >266</option>
        <option value=".item277" >277</option>
        <option value=".item289" >289</option>
      </select>
</section> <!-- #filters -->

<div id="entries" class="clearfix">

</div><!--entries--> 
```

**PHP**

```
 $q=$_GET["q"];

    //Remove the '.item' before the cat id
    $q= ltrim ($q,'.item');

    $con = mysql_connect("localhost", "root", "root");
    if (!$con) {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("awards", $con);

    if ($q === "all" || $q === "*" ) {
        //Show all entries that have status registered if all is selected
        $sql="SELECT * FROM entry WHERE  status = 'registered'";
    } else {    
        //Else just show category entries of people who are registered
        $sql="SELECT * FROM entry WHERE awards_subcategory_id = '".$q."' && status = 'registered'";
    }
    $result = mysql_query($sql);

    while($row = mysql_fetch_array($result)) {

        print "<div class='item item$q'>";
        print '<img class="image" src="http://localhost:8888/awardsite/wp-content/themes/award/placeholder.jpg" />';
        print "<p class='studio'> Studio: " . $row['studio'] . "</p>";
        print "<p class='client'> Client: " . $row['client'] . "</p>";
        print "<p class='description'> Description: " . $row['description'] . "</p>";
        print "<p class='solutionprocess'> Solution Process: " . $row['solution_process'] . "</p>";
        print "</div>";

    }

    mysql_close($con); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:08:57.300

**Javascript**

```
//Pull in data from database
    function showEntries() {
        if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
            "use strict";
            xmlhttp=new XMLHttpRequest(); 
        }
        else {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange=function() {
            if (xmlhttp.readyState===4 && xmlhttp.status===200) {    
                document.getElementById("entries").innerHTML=xmlhttp.responseText;
                //Fire filter function once data loaded
                filterEntries();
            }
        }
        xmlhttp.open("POST","<?php bloginfo('template_url'); ?>/getentries.php?",true);
        xmlhttp.send();
    };

    //Load all items straight away
    showEntries('*');

    //Isotope filter
    function filterEntries() {
        var $container = $('#entries');
           $select = $('#filters select');

        $container.isotope({
            itemSelector : '.item',
            layoutMode : 'fitRows'
        });

        $select.change(function() {
            var filters = $(this).val();

            $container.isotope({
                filter: filters
            });
        });
    }; 
```

**HTML**

```
<section id="filters">
    <select name="entries"  onchange="filterEntries()">
        <option value="*">show all</option>
        <option value=".item323">323</option>
        <option value=".item266">266</option>
        <option value=".item277">277</option>
        <option value=".item289">289</option>
    </select>
</section> <!-- #filters -->

<div id="entries" class="clearfix">

</div><!--entries--> 
```

**PHP**

```
$con = mysql_connect("localhost", "root", "root");
    if (!$con) {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("awards", $con);

    $sql="SELECT * FROM entry WHERE  status = 'registered'";

    $result = mysql_query($sql);

    while($row = mysql_fetch_array($result)) {
        //Get award cat ids
        $awardcat =  $row['awards_subcategory_id']  ;

        print "<div class='item item$awardcat'>";//add award cat id to each div
        print '<img class="image" src="http://localhost:8888/awardsite/wp-content/themes/award/placeholder.jpg" />';
        print "<p > Studio: " . $row['studio'] . "</p>";
        print "<p class='client'> Client: " . $row['client'] . "</p>";
        print "<p class='description'> Description: " . $row['description'] . "</p>";
        print "<p class='solutionprocess'> Solution Process: " . $row['solution_process'] . "</p>";
        print "</div>";

    }

    mysql_close($con); 
```

# objective-c - 将 UIImage 存储为 Core Data 中的可转换属性

> ID：11838376
> 
> 赞同：1
> 
> 时间：2012-08-07T02:09:18.997
> 
> 标签：objective-c, ios, cocoa-touch, core-data

我目前正在开发一个应用程序，我想在其中存储一个`UIImage`我的核心数据实体。我已经读到 iOS 5`UIImage`现在符合一个名为 的协议，因此不再需要`NSCoding`转换方法 from 。`NSData`我已将图像属性设置为可变形，当我检索图像时，我的程序运行良好。

这是一种安全可靠的方法来存储`UIImage`允许未来低于 30 秒的迁移吗？在性能方面会很好吗？我还阅读了有关二进制数据属性类型的信息，它允许将文件存储在文件系统中，而不是数据库中。如果这是一个更好的选择，人们将如何实施它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T02:53:12.237

迁移时间取决于整个数据库架构和大小，而不仅仅是存储 UIImage。没有人能回答这个问题。

性能是相对的。如果将其存储在外部，通常会在性能方面更好，因为它不在数据库本身中，但还有许多其他性能问题，例如管理故障，特别是如果您将其存储为直接属性而不是关系。另外，这取决于您的使用情况。没有一种解决方案适合所有情况。

您必须分析您的应用程序用例，并做出最适合您的应用程序性能特征的决策。

对于任何重要的二进制数据，您确实应该让 Core Data 将其作为外部数据进行管理。这很简单。在数据模型 GUI 中，选中“存储在外部记录文件中”框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T02:52:18.667

抱歉，我没有注意到您说您已经完全了解如何对图像进行编码。我不建议将它们存储在数据库中，但祝你好运。

以前：[使用新的外部存储标志将 UIImage 存储在核心数据中](https://stackoverflow.com/questions/7924840/storing-uiimage-in-core-data-with-the-new-external-storage-flag)

该线程上关于错误的评论表明，自己将图像存储在文件系统上可能仍然是一个安全的想法。

# php - 您如何使用 AJAX 上传文件

> ID：11838377
> 
> 赞同：-3
> 
> 时间：2012-08-07T02:09:27.870
> 
> 标签：php, javascript, jquery, ajax, ajax-upload

我目前正在尝试使用 jQuery 通过我制作的表单上传文件。这就是我正在尝试做的事情：

```
 function ajax_upload(){
    var formData = new FormData($('form#userform'));
        $.ajax({
        url: location.protocol + "//" + location.host + "/profile/uploadPicture",
        dataType: 'json',
        data: formData,
        type: 'post',
        success: function(data, status){
        if (data.status == 'error') {
            $('#error').html(data.msg);
        }
        else {
            var filename = location.protocol + "//" + location.host + "/data/profiles/" + data.msg;

            $('input#filename').val(filename);
            close_upload_form();
            pop_profilechanger(filename);

        }
    }
});
    return false; 
```

}

该表单似乎发布到后端，但是在尝试从 JSON 对象中的上传文件返回文件名时，例如： echo json_encode(array('status' => $status, 'msg' => $msg));

有什么不对？请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:43:32.707

我就是这样做的。如果您想要更多信息，而不仅仅是我粘贴的代码，请查看此[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)，因为我的代码是用于拖放文件的

```
 handleFiles : function(files, evt, target)
        {
            console.log(target);
            $.each(files, function(index, value)
            {
                var file = value;

                reader = new FileReader();
                reader.onload = function(evt)
                {
                    var li = $("<li class='uploading'><img data-image-id='0' src='" + evt.target.result + "' /></li>");
                    target.find('.imagesList').append(li);

                    var request = new XMLHttpRequest();
                    var formData = new FormData();
                    formData.append('image', file);

                    request.open("Post", settings.uploadImageUrl);
                    request.addEventListener("load", function(evt)
                    {
                        var id = evt.target.responseText;
                        li.removeClass('uploading');
                        li.find('img').attr('data-image-id', id);

                    }, false);
                    request.send(formData);
                };

                reader.readAsDataURL(value);

            });
        }, 
```

# gcc - 我应该在 Xcode 中使用“#pragma GCC ...”还是“#pragma clang ...”

> ID：11838379
> 
> 赞同：9
> 
> 时间：2012-08-07T02:09:39.390
> 
> 标签：gcc, clang, c-preprocessor, pragma

我应该使用哪些来忽略警告？

```
#pragma clang diagnostic ignored "-W<warning>"
#pragma GCC diagnostic ignored "-W<warning>" 
```

两者似乎都对我有用，但是哪一个是正确的使用？

我应该总是使用与我正在使用的编译器匹配的那个吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T19:48:51.563

通常，您应该更喜欢`#pragma GCC`编译指示是 GCC 特定的，或者同样适用于 GCC、Clang 和其他尝试与 GCC 兼容的编译器（例如 ICC）的情况。在编译指示以某种方式特定于 Clang 的情况下使用`#pragma clang`（例如 GCC 中不存在的诊断选项）。

# c# - setter c# 显示错误确保您没有无限循环或无限递归

> ID：11838382
> 
> 赞同：-1
> 
> 时间：2012-08-07T02:09:57.293
> 
> 标签：c#, getter-setter

[这是在表单 2 中获取用户输入并在表单 1 中显示数据](https://stackoverflow.com/questions/11791071/get-user-input-in-form2-and-display-data-in-form1-in-c-sharp)的主题连接。

这是我在 form2 中的代码。

```
public string UserText
    {
        get 
        { 
            return this.textBox1.Text; 
        }
        set 
        {
            this.UserText = value;
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {

        if (textBox1.Text == "")
        {
            MessageBox.Show("Please enter keyword to search");
        }
        else 
        {
            //anta data input to form1.
            UserText = textBox1.Text;
        } 
```

这是我在 form1 中的代码

```
private void Form1_Load(object sender, EventArgs e)
    {
        Form2 form2 = new Form2();
        form2.ShowDialog();

        string text = form2.UserText;
    } 
```

我希望当我们点击按钮搜索时，它会在我们加载 form1 时自动显示数据。

当我跑步时，它在二传手上说：

> 确保您没有无限循环或无限递归。

为什么这么说？我做错了什么？

我也试过了。

```
public string UserText
    {
        get 
        { 
            return this.UserText; 
        }
        set 
        {
            this.UserText = value;
        }
    } 
```

但它看起来是一样的。

====EDIT==== 现在我正在尝试使用它：

```
public string UserText
{
    get 
    { 
        return this.textBox1.Text; 
    }
    set 
    {
        this.textBox1.Text = value;
    }
} 
```

我也试过这个：

```
public string UserText { get; set;} 
```

但是它没有显示错误，它也没有加载form1。操作就停在那里。有什么我做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T02:14:34.720

属性设置器中的代码`UserText`：`this.UserText = value;`调用自身。基于getter，我认为你应该让setter是这样的：

```
set
{
    this.textBox1.Text = value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T02:16:25.547

如果您使用的是 C# 4

```
public string UserText {get;set;} 
```

您必须将 Form2 放入 Form1 构造函数中

```
 public Form1()
    {
        this.InitializeComponent();

    Form2 form2 = new Form2();
    form2.ShowDialog();

    string text = form2.UserText;
    } 
```

这将在 Form1 显示之前发生

# android - Android自动启动服务未在设备上运行，但它在模拟器上运行？

> ID：11838384
> 
> 赞同：2
> 
> 时间：2012-08-07T02:10:23.347
> 
> 标签：android, service, device, boot

该服务是自动启动服务。如果我确实在模拟器中运行它，它运行正常。但是，当我将我的应用程序安装到 Android 设备上时，即使在我重新启动设备后它也不会运行。解决这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:25:49.067

我发现代码中没有错误但是，我已经在 android 2.3.3 上测试了该服务运行正常的代码。但是使用 android 4.0 服务不会在系统启动时自动启动

# java - Hive 中的自定义 UserDefinedFunction

> ID：11838386
> 
> 赞同：0
> 
> 时间：2012-08-07T02:10:34.303
> 
> 标签：java, hadoop, mapreduce, hive, hiveql

**问题陈述**

我创建了以下内容`UserDefinedFunction`以获取`yesterday's date`我想要的格式，因为我将从查询中将格式传递给下面的方法。

```
public final class YesterdayDate extends UDF {

         public String evaluate(final String format) { 
                 DateFormat dateFormat = new SimpleDateFormat(format); 
                 Calendar cal = Calendar.getInstance();
                 cal.add(Calendar.DATE, -1);     
                 return dateFormat.format(cal.getTime()).toString(); 
                } 
} 
```

因此，每当我尝试通过将 jar 添加到类路径并创建临时函数来运行如下查询时`yesterdaydate`，我总是得到零结果 -

```
hive> create temporary function yesterdaydate as 'com.example.hive.udf.YesterdayDate';
OK
Time taken: 0.512 seconds 
```

以下是我正在运行的查询 -

```
hive> SELECT * FROM REALTIME where dt= yesterdaydate('yyyyMMdd') LIMIT 10;
OK 
```

而且我总是得到零结果，但该表中的数据是 8 月 5 日的。

我做错了什么？任何建议将不胜感激。

如果今天的日期是 8 月 6 日，则查询应该是这样的-然后使用上述用户定义的函数查询将如下所示-

```
SELECT * FROM REALTIME where dt= '20120805' LIMIT 10; 
```

注意：- 由于我正在使用它，`Hive 0.6`所以它不支持变量替换，所以我不能`hiveconf`在这里使用，并且上表已在`dt(date) column`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T03:38:31.607

SELECT FROM_UNIXTIME(UNIX_TIMESTAMP()-1*24*60*60,'%Y%m%d');

# backbone.js - 如何根据模型 javascript 数组属性正确显示 Backbone Marionette 集合视图？

> ID：11838390
> 
> 赞同：6
> 
> 时间：2012-08-07T02:10:57.410
> 
> 标签：backbone.js, marionette

****更新****：请参阅下面最后一个代码块中的最终答案代码。**

目前，我在集合视图中显示集合时遇到问题。集合是现有模型的属性，就像这样（伪代码）

```
ApplicationVersion { Id: 1, VersionName: "", ApplicationCategories[] } 
```

所以本质上 ApplicationVersion 有一个名为 ApplicationCategories 的属性，它是一个 javascript 数组。目前，当我渲染与 ApplicationCategories 关联的集合视图时，没有渲染任何内容。如果我在 Chrome 的 javascript 调试器中进行调试，则似乎尚未填充类别（因此我假设尚未获取 ApplicationVersion）。这是我目前的代码

ApplicationCategory 模型、集合和视图

```
ApplicationModule.ApplicationCategory = Backbone.Model.extend({
    urlRoot:"/applicationcategories"
});

ApplicationModule.ApplicationCategories = Recruit.Collection.extend({
    url:"/applicationcategories",
    model:ApplicationModule.ApplicationCategory,

    initialize: function(){
        /*
         * By default backbone does not bind the collection change event to the comparator
         * for performance reasons.  I am choosing to not preoptimize though and do the
         * binding.  This may need to change later if performance becomes an issue.
         * See https://github.com/documentcloud/backbone/issues/689
         *
         * Note also this is only nescessary for the default sort.  By using the
         * SortableCollectionMixin in other sorting methods, we do the binding
         * there as well.
         */
        this.on("change", this.sort);
    },

    comparator: function(applicationCategory) {
        return applicationCategory.get("order");
    },

    byName: function() {
        return this.sortedBy(function(applicationCategory) {
            return applicationCategory.get("name");
        });
    }
});

_.extend(ApplicationModule.ApplicationCategories.prototype, SortableCollectionMixin);

ApplicationModule.ApplicationCategoryView = Recruit.ItemView.extend({
    template:"application/applicationcategory-view-template"
});

ApplicationModule.ApplicationCategoriesView = Recruit.CollectionView.extend({
    itemView:ApplicationModule.ApplicationCategoryView
}); 
```

ApplicationCategory 模板

```
<section id="<%=name%>">
   <%=order%>
</section> 
```

ApplicationVersion 模型、集合和视图

```
ApplicationModule.ApplicationVersion = Backbone.Model.extend({
    urlRoot:"/applicationversions"
});

ApplicationModule.ApplicationVersions = Recruit.Collection.extend({
    url:"/applicationversions",
    model:ApplicationModule.ApplicationVersion
});

ApplicationModule.ApplicationVersionLayout = Recruit.Layout.extend({
    template:"application/applicationversion-view-template",

    regions: {
        applicationVersionHeader: "#applicationVersionHeader",
        applicationVersionCategories: "#applicationVersionCategories",
        applicationVersionFooter: "#applicationVersionFooter"
    }
});

ApplicationModule.ApplicationVersionController = {
    showApplicationVersion: function (applicationVersionId) {
        ApplicationModule.applicationVersion = new ApplicationModule.ApplicationVersion({id : applicationVersionId});

        var applicationVersionLayout = new Recruit.ApplicationModule.ApplicationVersionLayout({
            model:ApplicationModule.applicationVersion
        });

        ApplicationModule.applicationVersion.fetch({success: function(){
            var applicationVersionCategories = new Recruit.ApplicationModule.ApplicationCategoriesView({
                collection: ApplicationModule.applicationVersion.application_categories
            });
            applicationVersionLayout.applicationVersionCategories.show(applicationVersionCategories);
        }});

        // Fake server responds to the request
        ApplicationModule.server.respond();

        Recruit.layout.main.show(applicationVersionLayout);
    }
}; 
```

这是我的 ApplicationVersion 模板

```
<section id="applicationVersionOuterSection">
<header id="applicationVersionHeader">
    Your Application Header <%= id %>
</header>
<section id="applicationVersionCategories">
</section>
<footer id="applicationVersionFooter">
     Your footer
</footer> 
```

需要注意的一件事我目前正在使用 Sinon 来模拟我的服务器响应，但我认为这不会导致问题，因为它正在响应我期望通过 javascript 调试器查看的信息（就像我说它正在显示 ApplicationVersion id 正确）。如果有帮助，我也可以提供此代码

它当前正在显示应用程序版本 id（模板中的 id），所以我知道它正在为普通属性正确获取数据，它只是没有呈现我的 ApplicationCategories javascript 数组属性。

所以最终我绑定到 ApplicationVersion 获取的成功，然后为 ApplicationCategories 设置视图。由于这不像我期望的那样工作，我想知道是否有更好的方法来创建这个集合视图？

谢谢你的帮助

**更新：Derek Bailey 也带领我的工作代码示例。**

```
ApplicationModule.ApplicationVersionController = {
    showApplicationVersion: function (applicationVersionId) {
        ApplicationModule.applicationVersion = new ApplicationModule.ApplicationVersion({id : applicationVersionId});

        var applicationVersionLayout = new Recruit.ApplicationModule.ApplicationVersionLayout({
            model:ApplicationModule.applicationVersion
        });

        ApplicationModule.applicationVersion.fetch();

        // Fake server responds to the request
        ApplicationModule.server.respond();

        Recruit.layout.main.show(applicationVersionLayout);

        var applicationVersionCategories = new Recruit.ApplicationModule.ApplicationCategoriesView({
            collection: new Backbone.Collection(ApplicationModule.applicationVersion.get('application_categories'))
        });
        applicationVersionLayout.applicationVersionCategories.show(applicationVersionCategories);
    }
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T21:04:38.700

Marionette 的 CollectionView 需要有效的 Backbone.Collection，而不是简单的数组。将数组传递给视图时，您需要从数组创建一个 Backbone.Collection：

```
 new MyView({
  collection: new Backbone.Collection(MyModel.Something.ArrayOfThings)
}); 
```

# asp.net-mvc-3 - MVC 防止基类控制器操作被路由到

> ID：11838391
> 
> 赞同：0
> 
> 时间：2012-08-07T02:11:20.003
> 
> 标签：asp.net-mvc-3

对于我的几个控制器，我有一个实现常见操作的基类。

例如
- BaseAccountController 有一个登录操作
- PublicAccountController 继承自 BaseAccountController 并实施进一步的行动
- CorporateAccountController 继承自 BaseAccountController 并实施进一步的行动

这给出了以下路线：
- BaseAccount/Login - PublicAccount/
Login
- CorporateAccount/Login

删除路由 BaseAccount/Login 的标准方法是什么，因为这是不需要的。我希望控制器上有一个属性:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T02:19:17.130

您可以为 Base 控制器使用以下自定义属性：

```
[AttributeUsage(AttributeTargets.Class, AllowMultiple = true, Inherited = false)]
public class ClosedAttribute : ActionFilterAttribute
{
   public override void OnActionExecuting(ActionExecutingContext filterContext)
   {
       filterContext.Result = new HttpStatusCodeResult(404);
   }
} 
```

您将收到 404 用于您的基本控制器路由 - BaseAccount/Login。但请确保 Inherited 属性为 false（如示例所示）。

使用示例：

```
[Closed]
public class BaseAccountController : Controller
{
    ...
} 
```

您可以在此处阅读有关自定义操作过滤器的更多信息（如果需要） - [http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T05:46:52.520

如果`BaseAccountController`只有登录操作，那么您可以将其标记为`abstract`.

# java - java 太阳黑子没有可用的串行端口（ttyACM0）

> ID：11838392
> 
> 赞同：1
> 
> 时间：2012-08-07T02:11:22.327
> 
> 标签：java, 64-bit, debian, sunspot

我正在尝试在 64 位 debian 上处理太阳黑子，但无论我做什么，我都一无所获。我搜索了各种错误，但是在实际的太阳黑子论坛下，我没有运气。

我尝试将 port= ttyACM0 添加到 .sunspot.properties，但随后我得到一个大致相同的错误。下面的错误消息来自试图从 ant 获取太阳黑子信息。我已将所有文本放在那里以防万一它有用，但实际错误消息是 [java] 请稍候，正在检查连接的 Sun SPOT... [java] 没有可用的串行端口 [java] Java 结果：255

整个文本shebang是

```
 Buildfile: /home/andrew/SunSPOT/sdk/Demos/AirText/build.xml

   -pre-init:

   -do-init:

   -post-init:

   -warn-jar-file:

    init:

    -override-warning-find-spots:

    -prepare-conditions-for-find-spots:

    -find-shared-basestation:

    -run-spotfinder:
         [exec] Using Hardware Abstraction Layer (HAL) to probe Sun SPOTS...

    -check-spotfinder-result:

    -decide-whether-to-run-spotselector:

    -run-spotselector:
         [java] Please wait while connected Sun SPOTs are examined...
         [java] No serial port available
         [java] Java Result: 255

    -collect-spotselector-result:

    -clean-up-spotselector-output-file:

   -spotselector-fail:

    BUILD FAILED
    /home/andrew/SunSPOT/sdk/ant/find-spots.xml:367: Spotselector failed or was      cancelled

   Total time: 8 seconds 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T23:52:56.000

我只是有同样的问题。

本文档解释了第 140 页下半部分的问题：http: [//www.sunspotworld.com/docs/Yellow/SunSPOT-Programmers-Manual.pdf](http://www.sunspotworld.com/docs/Yellow/SunSPOT-Programmers-Manual.pdf)

本文档在第 29 页解释了如何修复它： [http ://www.cs.umanitoba.ca/~comp4430/Documents/InstallationInstructions.pdf](http://www.cs.umanitoba.ca/~comp4430/Documents/InstallationInstructions.pdf)

我对 Linux 很陌生，所以基本上，我所做的就是输入：

```
sudo chmod 777 /dev/ttyACM0

sudo chmod 777 /var/lock 
```

这不是一个好的解决方案，但它有效！至少，它对我有用。

请注意，`sudo chmod 777 /dev/ttyACM0`每次连接 SPOT 时都必须运行该命令。

# java - 如何动态加载 Java3D 库？

> ID：11838393
> 
> 赞同：1
> 
> 时间：2012-08-07T02:11:34.480
> 
> 标签：java, dynamic, java-3d

我正在完成一个使用 Java3D 开发的游戏。由于 Java3D 不附带标准的 JRE，因此我提供此游戏的所有人都必须下载 Java3D。我的一些朋友不太懂计算机，所以我认为只需将 Jars 写入磁盘并在 Java 中动态加载它们会少很多工作。有没有更好的解决方案？还是动态加载罐子是要走的路？

我已经从这里在我的另一台计算机上安装了 Java3D：

*   [下载Java3D](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-client-419417.html#java3d-1.5.1-oth-JPR "Java3D")

这是一个非常快速的安装，但如果您根本不需要下载任何东西会更好。如果他们只打算在我的游戏中使用 Java3D，那么他们费尽心思去下载它似乎是不合逻辑的。

有没有更有效的解决方案？动态加载罐子只是要走的路吗？

* * *

**编辑**

这是我的问题简化：

1.  Java3D 不是 Java 的标准部分，它是一个必须单独安装的扩展
2.  Java3D 包含 3 个 Jar 文件（j3core.jar、j3dutils、vecmath）
3.  我希望能够在其他计算机上运行我的游戏而无需下载 Jar 文件

现在这是我的简化问题：

如何在没有安装 Java3D 的计算机上运行 Java3D？我想将 Jar 文件连同游戏一起写入 CD，并且能够直接从 CD 上玩游戏，无需安装无需下载。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:00:02.440

如果您通过磁盘分发它，您可以将您的应用程序包装在一个安装程序可执行文件中（例如使用免费的[Inno Setup](http://www.jrsoftware.org/isinfo.php)）。一旦用户放入您的磁盘，设置将开始。您可以在 Inno Setup 中配置您的设置以安装正确版本的 Java3D。

我认为这就是大多数磁盘分发游戏的工作方式。掌握这些更高级的设置包装器需要一些时间，但它们是值得的。除了 Inno Setup，我什么都不知道，但到目前为止它能够满足我的任何要求，这就是我推荐它的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T03:04:37.680

jar 不是特定于平台的，动态库中的本机代码是。动态库已经加载，因为它们在代码中被调用。如果您回顾一下该代码，您会发现它`loadLibrary()`不要求扩展。这是有原因的，JNI（Java 原生接口）会根据运行的系统查找某些扩展。出于这个原因，只需打包 JNI 可以找到的所有动态库，例如在您的应用程序旁边，JNI 将负责其余的工作。

一些代码可以为您指明正确的方向：

Blah.java

```
public class blah{
    public native void meh();

    public static void main(String args[]) {
        meh();
    }
}
static {
    System.loadLibrary("thing");
} 
```

废话.cpp

```
#include <jni.h>
#include <iostream>
#include "Blah.h"

JNIEXPORT void JNICALL Java_Blah_meh() {
    cout << "Meh.";
} 
```

Blah.cpp（带有由 javah 程序生成的 Blah.h）被编译为每个主要系统（thing.dll、thing.dylib、thing.so）的动态库。Blah.java 被编译成一个 .class 文件，为了便于执行，把它扔进一个罐子里。现在是重要的部分，文件的布局！

```
ThingApp //that's a folder
  |thing.dll
  |thing.dylib
  |thing.so
  |Blah.jar 
```

将它放在任何系统上，JNI 将根据扩展找到系统的正确文件，将库加载到内存中，执行代码，并打印出“Meh.”。JNI 会找到这些文件，因为它们位于 PATH 环境变量（或系统等效变量）中。PATH 包括执行代码/程序所在的文件夹、使用`java.library.path`系统属性设置的文件夹以及 PATH 变量本身包含的文件夹。

基本上你只需要担心关于 PATH 的部分，因为其他一切都是为你完成的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T07:53:18.050

从这里下载类：http: [//java3d.java.net/binary-builds.html](http://java3d.java.net/binary-builds.html)并提取包含的 zip 文件。将 lib 文件夹中的 jar 文件（vecmath、j3dcore、j3dutils）提取到您的类文件夹中。将您的类文件夹捆绑到一个 jar 文件中。

现在按照以下步骤将上述 zip 文件中 bin 文件夹中的库（*.dll、*.so）添加到您的 jar 文件中： [如何制作包含 DLL 文件的 JAR 文件？](https://stackoverflow.com/questions/1611357/how-to-make-a-jar-file-that-include-dll-files)

# java - 根据类中的现有字段自动生成 Java 代码

> ID：11838399
> 
> 赞同：3
> 
> 时间：2012-08-07T02:12:56.027
> 
> 标签：java, code-generation

## 设想

我正在使用在 Eclipse 中从头开始构建的 Java 模型。在这个模型中重要的是我们将输出保存到 MATLAB (.mat) 文件中。我不断添加新功能，这些新功能需要新字段，而这些新字段又必须在每次迭代时导出到 .mat 文件中。重新启动崩溃的模拟后，我可能必须导入 .mat 文件。要导出或导入我的 .mat 文件，我使用[JMatIO](http://sourceforge.net/projects/jmatio/)。

例如，如果我要在我的 CModel 类中添加一个新字段`rho_m`（一个简单的`double`），我必须添加到我的 Save() 方法中：

```
mlModel.setField("rho_m", new MLDouble(null, new double[] {rho_m}, 1)); 
```

对于我的 Load() 方法：

```
rho_m = ((MLDouble)mlModel.getField("rho_m")).getReal(0); 
```

请注意，即使`rho_m`是 a `double`，也需要在 JMatIO 中将其视为 a `double[]`。这可能与 MATLAB 面向矩阵和矩阵运算有关。

## 问题

我不想手动执行此操作（容易出错，维护烦人），我想自动化此过程。理想情况下，我希望我的 IDE 检测 CModel 中的所有字段并根据字段的名称和类型编写代码。有没有办法在 Java/Eclipse 中做到这一点？

## 到目前为止的想法

我没有接受过低级编程语言的正式培训（是的，Java 对我来说是低级的）并且对 Java 还是比较陌生。我确实有一些使用 MATLAB 的经验。在 MATLAB 中，我认为我可以在 for 循环中使用`eval()`and`fieldnames()`来执行我提到的操作。我最后的手段是将 Java 代码复制粘贴到 MATLAB 中，然后使用一个巨大而丑陋的脚本从那里生成代码。每次我想对模型进行更改时，我都会重新运行 MATLAB 脚本。

除了这个想法，我还找到了像 UML 这样的术语，但没有背景知识来确定这是否是我正在寻找的东西。

任何帮助，即使只是朝着正确方向的一小步，也将不胜感激。如果我需要进一步澄清任何事情，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:41:26.057

看你的场景，你在做模型驱动的代码生成，也就是说，你有一个模型，想要得到一些根据你当前的模型生成的代码。因此，您需要一个模型驱动的代码生成器。

我领导 ABSE/AtomWeaver 项目，所以我将概述使用 AtomWeaver 可以做些什么来获得想要的东西（但是还有其他解决方案，如 MetaEdit+、XText 或 Eclipse 自己的 GMT/EMF 子系统）。

AtomWeaver 是一个 IDE，您可以在其中构建模型并从该模型生成代码。您可以根据需要多次更改模型，然后单击“生成”按钮以获取代码的更新版本。ABSE 是建模方法的名称。

我们不需要详细介绍，但本质上 ABSE 遵循“构建块”方法。您创建一个模板来表示模型的特征或概念。然后，您可以将迷你代码生成器与该概念相关联。然后，您可以“实例化”并结合这些构建块来快速构建您的模型。变量增加了模型的灵活性。

您还可以更改模型，或添加新功能（“块”）并再次生成。生成器是使用 Lua 编程语言构建的，这是一种非常简单的语言，具有类似 C 的语法。

了解[ABSE 开发方法](http://www.abse.info)和[AtomWeaver IDE](http://www.atomweaver.com)的最佳方式是下载 IDE 并查看示例或尝试教程。是的，您可以免费使用 AtomWeaver。

# python - 需要帮助将 ANTLR 语法转换为 pyparsing

> ID：11838402
> 
> 赞同：2
> 
> 时间：2012-08-07T02:14:04.163
> 
> 标签：python, pyparsing

我有一个项目，它仍然处于萌芽状态，我正在尝试使用真正的语法编写 wiki 解析器。我发现了一个似乎相当完整的[克里奥尔语语法，并由第三方确认可以工作（使用 ANTLR）。](http://dirkriehle.com/wp-content/uploads/2008/01/creole10_with_extension.g)

我已经开始将事情向前推进，但是遇到了一些障碍，我假设这些障碍是 pyparsing 的常见绊脚石。

```
escaped
    :   ESCAPE  STAR  STAR
    |   ESCAPE  .
    // '.' in a parser rule means arbitrary token, not character
    ; 
```

我想出的是：

```
ESCAPE = Literal('~')
STAR = Literal('*')
escaped = ESCAPE + STAR + STAR | ESCAPE + Word(printables, max=1) 
```

我在 pyparsing 中找不到任何其他内容来匹配单个字符，但这似乎可行。但是，在查看标题内容时，我有这个子表达式：

```
heading_content
    :   heading_markup  heading_content  ( heading_markup )?
    |   ( ~( EQUAL | ESCAPE | NEWLINE | EOF ) | escaped )+
    ; 
```

我正在使用前锋，但对于第二部分，我最终得到：

```
OneOrMore(CharsNotIn("=~\r\n") | escaped)('heading_content') 
```

现在这匹配“test”和“test~=”，但不匹配“test~=foo”，它只匹配“test”部分。这是为什么？

其次，我想知道除了 CharsNotIn 是否还有其他方法来指定内容部分？

现在真正让我难过的是试图匹配未格式化的文本部分。这是匹配各种纯文本的核心。现在语法指定：

```
text_unformatted
  : ( ~(  ITAL
        |   STAR
        |   LINK_OPEN
        |   IMAGE_OPEN
        |   NOWIKI_OPEN
        |   EXTENSION
        |   FORCED_LINEBREAK
        |   ESCAPE
        |   NEWLINE
        |   EOF )
    |  forced_linebreak 
    |  escaped )+ 
```

这是我碰壁的地方。现在上面的简单位定义为：

```
# STAR, ESCAPE and escaped defined above
ITAL = Literal('//')
LINK_OPEN = Literal('[[')
IMAGE_OPEN = Literal('{{')
NOWIKI_OPEN = Literal('{{{')
EXTENSION = Literal('@@')
FORCED_LINEBREAK = Literal(r'\\')
CR = Literal('\r')
LF = Literal('\n')
NEWLINE = Optional(CR) + LF | CR 
```

然而，我的 OneOrMore(NotAny(...) | FORCED_LINEBREAK | escaped) 的幼稚方法不起作用，最终无限循环。多读一点文档表明 NotAny 实际上并没有返回任何匹配项。那么我们如何匹配这个呢？我不能使用 CharNotIn(...) 因为单个 '{' 是完全有效的。

指针表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T11:25:32.457

前段时间，我为 antlr 语法编写了一个用 pyparsing 编写的转换器，这可能会有所帮助，我将它作为 pyparsing 票证中的功能请求提交：

[http://sourceforge.net/tracker/index.php?func=detail&aid=3060671&group_id=97203&atid=617314](http://sourceforge.net/tracker/index.php?func=detail&aid=3060671&group_id=97203&atid=617314)

antlr 语法几乎是完整的，所以它可能会完成这项工作，否则，它可能是一个有用信息的来源，用于了解如何对 antlr 语法进行 pyparsing 等价，它还包括一些测试。

希望能帮助到你 ：-）

# php - 来自 php 和/或 flash 的实时视频流？

> ID：11838409
> 
> 赞同：0
> 
> 时间：2012-08-07T02:16:17.200
> 
> 标签：php, flash, html, html5-video, live-streaming

我需要制作一个从我的 php 服务器到 php 页面的实时流媒体网络摄像头应用程序。我可以使用 Flash 逐帧拍摄照片，然后以某种方式将它们转换为视频文件并流式传输，或者将图像捆绑在一起，压缩它们，然后将其输出到网页上。对将图像转换为视频并将其输出到网页上的 php 方法有任何帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:47:40.007

> 我可以使用闪光灯逐帧拍照

我做过一次。结果？一个可怕的，CPU占用的混乱。它奏效了，这一点毫无疑问。但这太可怕了。因为图像必须每 500 毫秒（半秒）编码一次，所以我的 CPU（Intel i7 4 核）的使用率高达**70%**。所以我建议你远离这种方法，除非你当然希望你的用户杀了你？

我建议看看 Flash Media Server。它不是免费的，但您可以免费试用。来，看看[这个](http://www.adobe.com/devnet/flashmediaserver/articles/beginner_installing_fm3.html)。

# iphone - iOS 访问存储在云存储中的文件

> ID：11838412
> 
> 赞同：2
> 
> 时间：2012-08-07T02:16:28.470
> 
> 标签：iphone, objective-c, ios, http, storage

我在云存储网站上有很多文件。要访问它们，只需在浏览器中，我必须登录然后访问文件。我是 iOS 新手，我想知道是否可以在我的应用程序中执行此操作，因此当用户单击按钮时，它会转到网站并获取文件并将其带回。有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T04:09:09.980

您的问题是：iCloud 是如何工作的。太宽泛。 [http://developer.apple.com](http://developer.apple.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T00:03:02.507

我使用亚马逊的 S3。他们现在有自己的官方 iOS SDK，所以如果你找到 ASI S3，尽量远离它，因为它不再被开发。

# php - 未能在 foreach 循环中将项目添加到数组中

> ID：11838416
> 
> 赞同：0
> 
> 时间：2012-08-07T02:17:27.107
> 
> 标签：php, zend-framework

我是 zend 框架的新手，在尝试将项目添加到数组时遇到问题。

首先我创建了一个数据库表对象：

```
$questionTable = new xxx();
        $db = $questionTable->getAdapter();
        $sql = "select * from questions where value='v'";
        $res = $db->query($sql)->fetchAll(); 
```

$res 是一个数组，在 JSON [{'a':1},{'a':2},{'a':3}] 中看起来像这样

然后我用了一个 foreach ：

```
foreach($res as $element)
        {
            $value = $element['a'];

            if($value == 2)
            {

                $element['extra'] = 10;

            }
        } 
```

然后当我使用以下方法打印结果时：

```
echo Zend_Json_Encoder::encode($res); 
```

它仍然是 [{'a':1},{'a':2},{'a':3}]。

有谁知道如何修理它？

提前谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T02:19:25.757

只需在您的`$element`

```
foreach($res as &$element)
----------------^ 
```

# objective-c - 我如何清除绘制uiview？

> ID：11838418
> 
> 赞同：2
> 
> 时间：2012-08-07T02:18:28.947
> 
> 标签：objective-c, ios, cocoa-touch, drawing, draw

我目前正在尝试刷新或清除我的`UIView`平局，但很多方法都不起作用。我试过了：

1.  `self.Draw.clearsContextBeforeDrawing`
2.  `[self.Draw setNeedsDisplay];`
3.  `self.Draw.removeFromSuperview;`

我的代码：

```
-(void)drawPoint:(UITouch *)touch 
{

    PointLocation *currentLoc = [[PointLocation alloc] init];

    currentLoc.location = [touch locationInView:self];

    self.previousPoint = self.point;

    self.point = currentLoc;
    [self drawToBuffer];

    [self setNeedsDisplay];
} 
```

有什么办法可以清除我的uidraw？或者至少重新加载它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T02:41:47.317

这里有几个基本问​​题。

Draw 是如何声明的？遵循可可命名约定。只有类名应该大写。类的实例应该以小写字母开头。

我想你想要的是：

```
@interface Draw: UIView
@end

@implementation Draw

- (void) drawRect: (CGRect) r {
  // here you will draw whatever you want in your view.
}

@end

Draw* draw; 
```

在您的 drawPoint 方法中：

```
[draw setNeedsDisplay]; 
```

有关更多详细信息，请参阅视图绘图周期：http: [//developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW136](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW136)

对于奖励积分，将您的视图命名为比 Draw 更具描述性的名称。它是某物的视图，一个包含某些内容的窗口。它不是动词。

# android - 活动重启后待定意图为空

> ID：11838420
> 
> 赞同：1
> 
> 时间：2012-08-07T02:18:59.340
> 
> 标签：android, null, alarmmanager, android-pendingintent

我正在制作一个使用 AlarmManager.setInexactRepeating() 方法的应用程序，它将 PendingIntent 作为参数。

我通过调用我的 setAlarm() 方法开始

```
public void setRepeatingAlarm() {

    Intent intent = new Intent(this, AlarmReceiver.class);
    String url = getAssembledUrl();
    intent.putExtra("url", url);
    pendingIntent = PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

    alarmManager.setInexactRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), interval, pendingIntent);

} 
```

并通过 stopAlarm() 停止它

```
private void stopRepeatingAlarm() {

    alarmManager.cancel(pendingIntent);
    pendingIntent.cancel();

} 
```

工作得很好。但是，当活动被破坏并且用户决定停止警报时，显然未决意图为空，因为它是在当前活动生命周期中未调用的 setRepeatingAlarm() 方法中创建的。

解决这个问题的正确方法是什么？

我可以在 Activity.onCreate() 中创建挂起的意图，这将解决这个问题，但是我将无法再次启动警报，因为挂起的意图被取消并且需要再次重新创建（我认为，除非有一种检查意图的方法被取消了，我不知道）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:55:48.013

事实上，事实证明

```
PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

返回相同的待处理意图，如果意图相同，我需要的只是

```
private void stopRepeatingAlarm() {

    if(pendingIntent == null) {
        pendingIntent = PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
    }

    alarmManager.cancel(pendingIntent);

} 
```

# java - Jsp、servlet后退按钮问题

> ID：11838421
> 
> 赞同：1
> 
> 时间：2012-08-07T02:19:01.133
> 
> 标签：java, jsp, jakarta-ee, servlets, back-button

我正在用 Java EE 创建一个简单的网站，我没有使用 bean，因为我想保持简单。

网站的结构就像我有不同的jsp页面，每个jsp页面都有一个对应的servlet，然后将jsp页面连接到数据库来存储和检索数据。

问题是我有这一页 index1，我在其中从下拉列表中选择了一些选项。我的下一个 jsp 页面 index2.jsp 应该根据从 index1.jsp 中选择的选项在其字段中加载数据库中的数据。

index2 有一个下一个和上一个按钮。我正在存储从 index1 中选择的选项的值，以便暂时显示在每个 jsp 页面上。但是，当我在此 index2.jsp 上单击下一步时，它会将我带到具有相同选项值的 index3，但是当我按下 index3 上的上一个按钮时，它会将我带到 index2 的 servlet，在这种情况下是 Servlet2，选项的值显示为无效的。当我按下“上一个”按钮时，它正在破坏会话中的值。之后，所有其他页面也将 option 的值显示为 null 。

另一个问题是为什么使用servlet将数据从db加载到indexa时是servlet的地址而不是indexa。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:11:20.930

好的，我将在这里发布所有代码以及描述...

好的，这里是第一个索引的代码，称为.. indexnpro.jsp，它在获取值后将它们转发给 Servletnpro，就像这样。 `<form class="form-class" name="myform" action="Servletnpro" method="POST">`注意：记住，因为这里的架构是 MVC，所以每个 jsp 都有自己的 servlet，所以值不会直接传递给另一个jsp 而是一个 servlet，然后将它们传递给下一个 jsp ......现在在 Servletnpro 的 dopost 方法中......

```
String connectionURL = "jdbc:mysql://localhost/secnok?"+ "user=root&password=";
Connection connection=null;
response.setContentType("text/html");
PrintWriter out = response.getWriter();

HttpSession session = request.getSession(true); 
```

//这些是我从 indexnpro.jsp 获得的不同值，其中一些是下拉框，但我不应该真的很重要..

```
String exproject=request.getParameter("country");
String corrcust=request.getParameter("state");
String excust=request.getParameter("country1" );
String corrproject=request.getParameter("state1");

String corrtoepost= request.getParameter("corrtoe"); 
```

<--------------- 当按下返回按钮时，我不断丢失这个值。当它再次返回到这个 servlet 时，它变为 null 。

```
System.out.println(corrtoepost);

System.out.println("doPost is running");
System.out.println("Session id on dopost: " + session.getId() ); 
```

`request.setAttribute("corrtoepost", corrtoepost);`<--------------- 在会话中存储价值，我仍然不断失去它..

////////// 从现在开始是数据库连接的简单代码，它将连接到数据库根据用户选择获取数据，即我刚刚存储在会话中的“corrtoepost”..然后将其显示回来在 indexa.jsp 上..

```
try{
int rs1;

// Load the database driver
Class.forName("com.mysql.jdbc.Driver");
// Get a Connection to the database
connection = DriverManager.getConnection(connectionURL); 

//Add the data into the database

Statement stmt = connection.createStatement(); 
Statement stmt1 = connection.createStatement(); 
Statement stmt2 = connection.createStatement(); 
Statement stmt3 = connection.createStatement(); 
Statement stmt4 = connection.createStatement(); 
Statement stmt5 = connection.createStatement(); 
Statement stmt6 = connection.createStatement(); 

ResultSet rs = stmt.executeQuery( "Select * from toe_description where toe_id= '" + corrtoepost + "' " ) ;

ResultSet rs2 = stmt1.executeQuery( "Select * from toe_text where type_id=1 AND toe_id= '" + corrtoepost + "' " ) ;
ResultSet rs3 = stmt2.executeQuery( "Select * from toe_text where type_id=2 AND toe_id= '" + corrtoepost + "' " ) ;
ResultSet rs4 = stmt3.executeQuery( "Select * from toe_text where type_id=3 AND toe_id= '" + corrtoepost + "' " ) ;
ResultSet rs5 = stmt4.executeQuery( "Select * from toe_text where type_id=4 AND toe_id= '" + corrtoepost + "' " ) ;
ResultSet rs6 = stmt5.executeQuery( "Select * from toe_text where type_id=5 AND toe_id= '" + corrtoepost + "' " ) ;
ResultSet rs7 = stmt6.executeQuery( "Select * from toe_text where type_id=6 AND toe_id= '" + corrtoepost + "' " ) ;

while(rs.next()){
String toeid= rs.getString(1);
String toename= rs.getString(2);
String Intname= rs.getString(4);
String Assetname= rs.getString(5);
String Objname= rs.getString(6);
String ProjectID= rs.getString(7);

request.setAttribute("toeid", toeid);
request.setAttribute("toename", toename);
request.setAttribute("Intname", Intname);
request.setAttribute("Assetname", Assetname);
request.setAttribute("Objname", Objname);
request.setAttribute("ProjectID", ProjectID);

while(rs2.next()){
String purpose= rs2.getString(4);

request.setAttribute("purpose", purpose);

while(rs3.next()){
String scope= rs3.getString(4);

request.setAttribute("scope", scope);
System.out.println(scope);

while(rs4.next()){
String toe_desc= rs4.getString(4);

request.setAttribute("toe_desc", toe_desc);

System.out.println(toe_desc);

while(rs7.next()){
String toe_ass= rs7.getString(4);

request.setAttribute("toe_ass", toe_ass);

while(rs6.next()){
String enviroment= rs6.getString(4);

request.setAttribute("enviroment", enviroment);

while(rs5.next()){
String ass_env= rs5.getString(4);

request.setAttribute("ass_env", ass_env);

}

}

}

}

}

}

}

request.getRequestDispatcher("/WEB-INF/indexa.jsp").forward(request, response); 
```

// 这里我将从 db 获取的所有数据发送到所需的 jsp，然后将显示数据。即“indexa.jsp”

```
System.out.println("Connected to the database"); 
connection.close();
System.out.println("Disconnected from database");

}

catch (Exception e) {
e.printStackTrace();
}

}

} 
```

////////Indexa.jsp的现在代码

此页面将显示从前面讨论过的 Servletnpro 获取的数据。

在页面的正文标签下，我检索了我之前在会话中保存在 Servletnpro 中的“corrtoepost”的值。我现在可以看到这个值了。

```
String corrtoepost1=request.getParameter("corrtoepost"); 
String corrtoepost=(String) session.getAttribute("corrtoepost"); 
session.setAttribute("corrtoepost",corrtoepost); 
```

然后将其显示在 jsp 页面上.. 目前显示正确的值..

现在这个页面中的下一个按钮的代码记住下一个按钮是假设带我到下一页，具有我从 servlet 获得的相同的正确toepost 值。

下一个

现在让我们进入下一页 indexb.jsp

在这里，我再次像这样从 indexa.jsp 获得“corrtoe”的值。

```
String corrtoe=(String) session.getAttribute("corrtoe"); 
session.setAttribute("corrtoe",corrtoe); 
```

直到现在，即使在此页面上，我也得到了正确的值...一旦我按下此页面上的返回按钮，就会出现问题...。

现在为此页面上的后退按钮编写代码..

以前的

现在，当我按下上一个按钮时，我失去了 indexa.jsp 页面中的脚趾值，它在界面上显示 corrtoe 值为 null .....之后，我尝试使用 Servlets Get 方法来获取可以工作一次但之后的值在 indexa.jsp 上按 next 它将在 indexb.jsp 和其余页面上显示 null ......问题是为什么当我将它存储在会话中时我会丢失这个值。！！！请给我一些想法......

另一个问题是，当我在 indexnpro 页面上按下提交时，为什么它会在地址栏中显示 Servletnpro 而不是 indexa.jsp ...但是它确实显示页面 indexa.jsp 填充了 indexa.jsp 中的值 ...我认为这是我不断丢失jsp页面之间的“corrtoe”值的原因..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T02:33:59.097

好的，首先没有任何代码我有点“在黑暗​​中回答”

**[...]每个jsp页面都有一个对应的servlet，然后将jsp页面连接到数据库以存储和检索数据[...]**

好吧，JSP 是一个 servlet，所以您的所有 servlet 代码都可以在 JSP 中运行，但我假设您选择了 MVC 架构。

我认为您的主要问题如下。

从 index1.jsp 向 index2.jsp 发出请求，参数为**param**（只是一个示例）。**然后在 index2.jsp 中，您使用名为param**的相同参数向 index3.jsp 发出另一个请求， 但是当您点击先前时，您没有将名为**param**的参数传递给 index2.jsp

要么将参数传回（最安全），要么使用浏览器的历史记录（不安全，但会执行从 index1.jsp 到 index2.jsp 的相同请求）

恐怕没有任何代码我不能再帮你了

**编辑**

我认为这是您的错误 `request.setAttribute("corrtoepost", corrtoepost);` ，您没有在**会话**中存储“corrtoepost”，而是在请求中。要在会话中存储参数，您必须执行以下操作 `request.getSession().setAttribute("corrtoepost", corrtoepost);`

**新编辑** 好的，这是我功能齐全的示例。我已经对其进行了测试，并且可以正常工作。

索引A.jsp

```
<html>
    <body>
        <form action="servletA" method="POST">
            <select name="corrtoe">
                <%if("1".equals(request.getSession().getAttribute("corrtoe"))){ %>
                    <option value="1" selected>1</option>
                <%}else{ %>
                    <option value="1">1</option>
                <%} %>
                <%if("2".equals(request.getSession().getAttribute("corrtoe"))){ %>
                    <option value="2" selected>2</option>
                <%}else{ %>
                    <option value="2">2</option>
                <%} %>
                <%if("3".equals(request.getSession().getAttribute("corrtoe"))){ %>
                    <option value="3" selected>3</option>
                <%}else{ %>
                    <option value="3">3</option>
                <%} %>
            </select>
            <input type="submit">
        </form>
    </body>
</html> 
```

ServletA.java

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String corrtoepost = request.getParameter("corrtoe");
        //Search in DB or whatever
        request.getSession(true).setAttribute("corrtoe", corrtoepost);
        getServletContext().getRequestDispatcher("/jsp/indexB.jsp").forward(request,response);
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        doGet(request, response);
    } 
```

索引B.jsp

```
<html>
    <body>
        <h1><%=request.getSession().getAttribute("corrtoe")%></h1>
        <form action="jsp/indexC.jsp" method="GET">
            <input type="submit">
        </form>
    </body>
</html> 
```

索引C.jsp

```
<html>
    <body>
        <h1><%=request.getSession().getAttribute("corrtoe")%></h1>
    </body>
</html> 
```

这是在我的 web.xml 上

```
<servlet>
   <display-name>servletA</display-name>
   <servlet-name>servletA</servlet-name>
   <servlet-class>org.test.servlets.ServletA</servlet-class>
   <load-on-startup>1</load-on-startup>
 </servlet>

 <servlet-mapping>
   <servlet-name>servletA</servlet-name>
   <url-pattern>/servletA</url-pattern>
 </servlet-mapping>

 <welcome-file-list>
   <welcome-file>jsp/indexA.jsp</welcome-file>
 </welcome-file-list> 
```

我希望它有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T12:25:29.200

看这个问题，它是关于跨来自 index1 页面值选择的请求的数据存储。有多种方法，一种是在会话中保留此值并跨页面使用它。另一个是在每个屏幕上都有隐藏字段并将其传递。这可能是粗鲁的方式。您可以有单个 servlet 和不同的页面方法，或者 servlet 到页面的映射。很高兴查看代码示例的[JSP 示例](http://www.deepakgaikwad.net/index.php/2009/04/13/java-server-pages-jsp-tutorial.html)。

# c# - XAML 用户控件未显示

> ID：11838422
> 
> 赞同：0
> 
> 时间：2012-08-07T02:19:06.263
> 
> 标签：c#, xaml

我在这里有一个用户控件，我想覆盖我当前的区域。除非它没有出现。

这是我的 SpatialMode.xaml 代码：

```
<UserControl x:Class="FilteringModule.View.SpatialFilterMode"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 

        MouseDown="UserControl_MouseDown"
        MouseUp="UserControl_MouseUp"
        MouseMove="UserControl_MouseMove">

<Canvas x:Name="SpatialCanvas" Background="Wheat">
    <Border 
            x:Name="dragSelectionBorder"
            BorderBrush="Blue"
            BorderThickness="1"
            Background="LightBlue"
            CornerRadius="1"
            Opacity="0.5"
            />
</Canvas>
</UserControl> 
```

我称之为：

```
 public void ShowSpatialFilterMode()
    {
        Console.WriteLine("SHOWING SPATIAL FILTER MODE?");
        _spatialFilterMode = new SpatialFilterMode();
        _spatialFilterMode.Visibility = Visibility.Visible;
    } 
```

它写入控制台，所以我知道它正确地击中它，除了它没有显示？

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T02:28:33.937

您实际上是在哪里将它插入到可视化树中？

```
Grid.Children.Add(_spatialFilterMode); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T02:25:02.430

您是否必须将控件添加到某个父容器？

# ember.js - 有没有办法在加载之前使用嵌入的 ember-data 模型关联而不引用根对象？

> ID：11838423
> 
> 赞同：2
> 
> 时间：2012-08-07T02:19:10.890
> 
> 标签：ember.js, ember-data

为了解释我的问题，我编造了一个人为的例子，所以请耐心等待。我有两个相关的 ember-data 模型，每个模型都具有相同类型的嵌入式关联：

```
App.Article = DS.Model.extend({
  title: DS.attr("string"),
  summary: DS.belongsTo(App.Summary, {embedded: true}),
});

App.Book = DS.Model.extend({
  title: DS.attr("string"),
  summary: DS.belongsTo(App.Summary, {embedded: true}),
});

App.Summary = DS.Model.extend({
  text: DS.attr("string"),
}); 
```

ember-data 的一个重要特性是它`find()`会返回一个正确类型的对象，该对象甚至可以在从服务器检索到实际数据值之前用于呈现视图。但是，我担心这种便利并没有完全扩展到关联。

在这种情况下，当多种类型的对象共享相同类型的关联数据时，我想重用我的视图，该视图显示`Summary`对象`Book`和对象的`Article`对象。特别是，我想做以下事情：

```
book: Ember.Route.extend({
  route: '/book',
  connectOutlets: function(router) {
    book = App.Book.find(1);
    router.get('applicationController').connectOutlet('titleOutlet', 'book', book);
    router.get('applicationController').connectOutlet('summaryOutlet', 'summary', book.get('summary'));
  },
}), 
```

也就是说，我希望对特定于书籍的内容有一个视图，对摘要有一个视图，这与是否显示 a`Book`或无关`Article`。

不幸的是，我不能这样做，`book.get('summary')`因为`null`如果这本书没有被 填充`store.load()`，这会返回，它被异步调用`Book.find()`。

另一种方法似乎是绕过 book 对象本身，并始终引用嵌套路径，从对象的根级别开始。在这种特殊情况下， 和 的结构`Book`是`Article`相同的，因此没有区别。但是如果我想使用一个关联并独立于它的上下文来引用它，似乎应该有另一种方式。

想法？

我整理了一个[要点](https://gist.github.com/3279738)来说明这个完整的例子。

**更新**

我接受 Mike Aski 的观点，即这是不可能的。但是为了保持我的逻辑抽象，我创建了一个统一命名的绑定，指向关联，无论它可能被埋在哪里，每次我 connectOutlet 时。正是当我调用 connectOutlet 时，我才知道要发送到控制器/视图的对象类型，因此视图可以使用绑定并且不需要知道对象的其余部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T05:37:55.367

您应该尝试直接将`article`or`book`实例作为`summaryOutlet`上下文传递，而不是`summary`. 然后，在视图中，使用：

```
{{view.content.summary.text}} 
```

而不是你目前肯定拥有的：

```
{{view.content.text}} 
```

这样，一旦加载记录数据，绑定就会被刷新。

`null`我没有看到任何替代方案：虽然实例中没有填充关系，但如果您尝试以同步的、命令式的方式遍历它们，您总会得到...

# asp.net-mvc-3 - 应用架构建议

> ID：11838426
> 
> 赞同：1
> 
> 时间：2012-08-07T02:19:26.490
> 
> 标签：asp.net-mvc-3, architecture, repository-pattern, service-layer

我一直在研究用于分层 MVC 应用程序的各种模式，需要一些建议。我目前拥有的是以下内容：

1）POCO领域模型，完全没有业务逻辑，所以基本上是一个贫血的领域模型。
2) EntityFramework 具有交回域对象的存储库层。
3）服务层，现在我不确定这是应用服务层还是领域服务层，但基本上它是一个针对领域模型的API。所有业务逻辑都驻留在这一层并确保域对象有效，然后将其交给存储库以通过 EF 持久化回数据库。
4) ASP.NET MVC 应用程序，该应用程序与服务层对话以获取它需要的对象。

我喜欢它的工作原理，因为它提供了与域模型的单点交互，但我认为我需要的是服务层和 mvc 应用程序之间的一层。该层的职责是将域对象与控制器可以交互的视图模型转换为视图模型，以获得视图所需的确切数据，并将填充的域对象提供回服务层。这会是应用程序服务层，而上面提到的服务层是域服务层吗？

我使用 AutoMapper 将域对象放入视图模型，但我不确定将它们返回到域对象的标准。

任何建议或想法都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:33:10.773

虽然理论上，您的域层（特别是如果您使用 POCO）类非常适合在控制器和视图中使用，但实际上，总是存在这些极端情况和差异。通常，控制器和视图处理的对象是您的域模型 POCO的*简化*，或者是您的应用服务层提供/理解的 POCO 的不同*聚合。*

因此，我**不**建议构建单独的层，而是建议将视图模型的方法添加到域层对象以发送到应用程序服务。

例如，如果您有`User`Domain Level 类和`UserModel`View Model，我会主张创建`User ToUser()`实例方法和`UserModel UserModel.FromUser(User user)`静态方法来处理转换。您还可以在其中混合和匹配其他视图模型，以便能够创建域对象。

# tabs - chrome 扩展 API 中突出显示的选项卡

> ID：11838437
> 
> 赞同：0
> 
> 时间：2012-08-07T02:22:05.723
> 
> 标签：tabs, google-chrome-extension, highlight, browser-tab

请给我有关 chrome 扩展 API 的建议。我正在尝试编写一个代码，它会做同样的事情，就像我突出显示 chrome 中的所有选项卡，单击它们上的右键并选择重新加载，这样所有选项卡都会一起重新加载。我对突出显示选项卡没有任何问题，但是如何对这些突出显示的选项卡应用一些操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T00:43:54.310

[在一组选项卡上应用操作需要将选项卡 ID 传递给chrome.tabs API](http://developer.chrome.com/extensions/tabs.html)中的相应方法。

因此，在您的情况下，只需记住您以编程方式突出显示的选项卡的选项卡 ID（或使用[chrome.tabs.query](https://developer.chrome.com/extensions/tabs.html#method-query)获取它们）并按顺序调用[chrome.tabs.reload](https://developer.chrome.com/extensions/tabs.html#method-reload)，每次调用传递一个选项卡 ID。（不幸的是，API 不接受 ID 数组，因此您必须一个接一个地传递它们。）

# database - 将数据导出为 C#/VB 格式以在 EF Code First 的数据库初始化中使用它们

> ID：11838439
> 
> 赞同：8
> 
> 时间：2012-08-07T02:22:32.570
> 
> 标签：database, entity-framework, export, code-first

有时，由于许多相关的表，样本数据很重要，但生成起来很无聊。因此，在 Entity Framework Code First 中，我认为将它们插入 DropCreateDatabaseIfModelChanges::Seed() 是一种优雅的方式。

但是有没有办法将现有数据从数据库导出回字符串作为插入 poco 对象的 C#/VB 语句？

如果可行，我们可以用它来优雅地备份数据，或者按场景保存到多个.cs，根据需要切换它们以更好地进行测试等。

## 数据库导出为以下代码：

```
var students = new List<Student>
{
    new Student { FirstMidName = "Carson",   LastName = "Alexander", },
    new Student { FirstMidName = "Meredith", LastName = "Alonso",    },
    new Student { FirstMidName = "Arturo",   LastName = "Anand",     },
    // ...
};
students.ForEach(s => context.Students.Add(s));
context.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-21T18:26:09.697

正如@Luke 在他的评论中所建议的那样。最好的方法是为您的种子数据生成 Json 文件。

[在本文中](https://www.simple-talk.com/sql/t-sql-programming/producing-json-documents-from-sql-server-queries-via-tsql/)，您可以找到**从 SQL 查询生成 Json 的简单方法。**

**那么你所需要的就是通过 Newtonsoft.Json 阅读它们**

例如

```
var countriesStream = new StreamReader(HostingEnvironment.MapPath("jsonFile.json"));
try
{
    countriesList = JsonConvert.DeserializeObject<List<Country>>(countriesStream.ReadToEnd());
} 
```

# database - Rails 测试数据库中的持久表

> ID：11838440
> 
> 赞同：1
> 
> 时间：2012-08-07T02:22:37.360
> 
> 标签：database, ruby-on-rails-3, testing, cucumber

我有几个表：在开发`cities`和`provinces`测试中，我已经从一个 sql 文件直接填充到数据库中，而没有在 Ruby 中使用迁移或种子文件。直接的 SQL。

每次使用 Selenium 运行测试时，数据库都会被删除，因此我需要运行`mysql (...) database_test < fill_cities_provinces.sql`

我怎样才能解决这个问题？我可以让两个表在测试中不可擦除吗？

我注意到如果场景标有 ，就会发生这种情况`@javascript`。否则，如果它使用默认驱动程序，则该表的内容不会被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:03:18.277

我假设您在测试期间使用[DatabaseCleaner](http://rdoc.info/gems/database_cleaner)清理数据库。以下策略应该会有所帮助

```
DatabaseCleaner.strategy = :truncation, {:except => %w[cities provinces]} 
```

# java - 导出到 CVS：防止自动转换为日期

> ID：11838445
> 
> 赞同：-1
> 
> 时间：2012-08-07T02:23:54.887
> 
> 标签：java, cvs

我希望在不进行日期转换的情况下导出到 CVS 的一些文本字段..

例子：

当我用 excel 打开 .cvs 文件时，“1/1”更改为 2012 年 1 月 1 日。

当前的解决方案是添加空格，请问是否有更优雅的解决方案？

额外问题：有用于将数据导出到 CVS 的 API 吗？我发现使用数组设置列非常粗糙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T03:43:08.633

这种转换是因为 Excel 而不是 CSV 文件。有两种解决方案

1.  使用库导出 xls 文件
2.  在 Excel 中创建一个新的 Excel 文件并选择整个工作表并将单元格类型更改为文本（或至少您认为不应更改的那些列）。然后，您可以通过将其内容复制并粘贴到 excel 文件中来导入 csv 文件，并使用导入向导拆分列。

# c# - 如何通过datatable中的行获取datatgridview中对应的行？

> ID：11838449
> 
> 赞同：1
> 
> 时间：2012-08-07T02:24:04.333
> 
> 标签：c#

在 C# 项目中，我有一个 datagridview dgv1，它的数据源是一个数据表 dt1。对于同一数据行，在对dgv1进行一些操作（例如排序）后，dt1中的行索引可能与dgv1中的行索引不同。现在，我在 dt1 中有一行的索引，我想在 dgv1 中找到它的对应行。除了在 dgv1 中搜索数据行的值之外，还有其他方法吗？

# ruby-on-rails - rspec-rails 2.11.1 + rails 3.2.6

> ID：11838450
> 
> 赞同：0
> 
> 时间：2012-08-07T02:24:19.133
> 
> 标签：ruby-on-rails, ruby, rspec, bundler, rspec-rails

我在我的应用程序中使用 rspec-rails 2.11.0，但是当我执行 rspec spec/ 时发生了错误。这是一堆错误：

```
/Users/diego/.rvm/gems/ruby-1.9.3-head@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:31:in `block in setup': You have already activated rspec-core 2.10.1, but your Gemfile requires rspec-core 2.11.1\. Using bundle exec may solve this. (Gem::LoadError)
from /Users/diego/.rvm/gems/ruby-1.9.3-head@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:17:in `setup'
from /Users/diego/.rvm/gems/ruby-1.9.3-head@global/gems/bundler-1.1.4/lib/bundler.rb:107:in `setup'
from /Users/diego/.rvm/gems/ruby-1.9.3-head@global/gems/bundler-1.1.4/lib/bundler/setup.rb:7:in `<top (required)>'
from /Users/diego/.rvm/rubies/ruby-1.9.3-head/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:59:in `require'
from /Users/diego/.rvm/rubies/ruby-1.9.3-head/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:59:in `rescue in require'
from /Users/diego/.rvm/rubies/ruby-1.9.3-head/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
from /Users/diego/Development/Rails/carros/carros-web/config/boot.rb:6:in `<top (required)>'
from /Users/diego/.rvm/rubies/ruby-1.9.3-head/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /Users/diego/.rvm/rubies/ruby-1.9.3-head/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /Users/diego/Development/Rails/carros/carros-web/config/application.rb:1:in `<top (required)>'
from /Users/diego/.rvm/rubies/ruby-1.9.3-head/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /Users/diego/.rvm/rubies/ruby-1.9.3-head/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /Users/diego/Development/Rails/carros/carros-web/config/environment.rb:2:in `<top (required)>'
from /Users/diego/.rvm/rubies/ruby-1.9.3-head/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /Users/diego/.rvm/rubies/ruby-1.9.3-head/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /Users/diego/Development/Rails/carros/carros-web/spec/spec_helper.rb:3:in `<top (required)>'
from /Users/diego/.rvm/rubies/ruby-1.9.3-head/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /Users/diego/.rvm/rubies/ruby-1.9.3-head/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /Users/diego/Development/Rails/carros/carros-web/spec/models/admin_spec.rb:1:in `<top (required)>'
from /Users/diego/.rvm/gems/ruby-1.9.3-head/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load'
from /Users/diego/.rvm/gems/ruby-1.9.3-head/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `block in load_spec_files'
from /Users/diego/.rvm/gems/ruby-1.9.3-head/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `map'
from /Users/diego/.rvm/gems/ruby-1.9.3-head/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load_spec_files'
from /Users/diego/.rvm/gems/ruby-1.9.3-head/gems/rspec-core-2.10.1/lib/rspec/core/command_line.rb:22:in `run'
from /Users/diego/.rvm/gems/ruby-1.9.3-head/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:69:in `run'
from /Users/diego/.rvm/gems/ruby-1.9.3-head/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:10:in `block in autorun' 
```

怎么了？这是我的 gem 文件 [https://gist.github.com/3280825](https://gist.github.com/3280825)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:43:46.377

发生的事情是您的 rspec 应用程序版本与您在全局环境中的版本不同。

当您执行 rspec 时，似乎正在使用来自 global 的那个。

使其工作的方法是使用`bundle exec`@prusswan 所说的，它将使用应用程序环境执行该命令（使用适当的 gems 版本等。）

错误消息还提到尝试`bundle exec`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:53:14.080

由于使用了 bundler，尽管错误消息显示为 "try" ，但如果您想确保仅使用中指定的 gem 版本`bundle exec`，您*确实*`Gemfile/Gemfile.lock`必须使用 bundle exec 运行它。另一种选择是使用 binstubs，如此[处](http://blog.davidchelimsky.net/2011/07/18/stop-typing-bundle-exec/)所述。

# ffmpeg - 未定义对“x264_encoder_open_125”的引用

> ID：11838456
> 
> 赞同：8
> 
> 时间：2012-08-07T02:26:15.340
> 
> 标签：ffmpeg, ubuntu-12.04

在 Ubuntu 12.04 上安装 ffmpeg

我收到以下错误

```
libavcodec/libavcodec.a(libx264.o): In function `X264_init':
/root/ffmpeg/libavcodec/libx264.c:492: undefined reference to `x264_encoder_open_125'
collect2: ld returned 1 exit status
make: *** [ffmpeg_g] Error 1 
```

我正在按照 [http://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide中的说明进行操作](http://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide)

有人知道这个错误吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-18T16:56:11.323

对于已经通过包管理系统安装了 x264 的人来说，这是一个典型的问题。您至少可以通过两种方式解决此问题：

1.  通过包管理系统从系统中卸载已经存在的 x264：

    ```
    # apt-get remove x264 
    ```

    并[从源代码编译您的新 x264](http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20quickly%20compile%20libx264)

2.  不要卸载 x264 包，而是[编译你的新 x264](http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20quickly%20compile%20libx264)然后[编译你的 ffmpeg](http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20quickly%20compile%20FFmpeg%20with%20libx264%20(x264%2C%20H.264))，告诉它使用新编译的 x264 库，通过指定你编译的 x264 库所在的目录，使用提到的`LD_LIBRARY_PATH`环境变量：

    ```
    LD_LIBRARY_PATH=/path/to/my/compiled/x264/library ./configure --enable-libx264 ... 
    ```

可以在这些链接上找到更多信息：

*   [ffmpeg 中 --enable-libx264 选项的问题](http://www.linuxquestions.org/questions/linux-newbie-8/problem-with-enable-libx264-option-in-ffmpeg-822156/page2.html)
*   [编译 FFmpeg](http://ffmpeg.org/trac/ffmpeg/wiki#CompilingFFmpeg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-17T21:01:36.347

通常，该错误意味着`libx264.so`链接器获取的库二进制文件与头文件中的版本不匹配`x264.h`。请参阅此头文件中的以下代码行：

```
/* Force a link error in the case of linking against an incompatible API version.
 * Glue #defines exist to force correct macro expansion; the final output of the macro
 * is x264_encoder_open_##X264_BUILD (for purposes of dlopen). */
#define x264_encoder_glue1(x,y) x##y
#define x264_encoder_glue2(x,y) x264_encoder_glue1(x,y)
#define x264_encoder_open x264_encoder_glue2(x264_encoder_open_,X264_BUILD) 
```

解决方案通常不需要自己构建libx264，只要确保自己安装`libx264-dev`正确，不干扰其他版本，其他版本也可能在`/usr/local/lib`等。

我对版本 155 有同样的问题： `undefined reference to 'x264_encoder_open_155'`. 就我而言，这是因为我有`/usr/lib/x86_64-linux-gnu`一份不合适的副本`libx264.so`（我自己制作并在那里复制不干净）。所以我所要做的就是`sudo apt-get install --reinstall libx264-dev`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-15T06:41:33.630

添加头文件和库路径

`gcc x264_test1.c -o x264_encoder -I/usr/local/include -L/usr/local/lib -lpthread -lm -lx264`

# javascript - 为什么这段代码会导致 IE 内存泄漏？

> ID：11838457
> 
> 赞同：0
> 
> 时间：2012-08-07T02:26:17.420
> 
> 标签：javascript, memory-leaks

我正在阅读一个[在线 JavaScript 教程](http://javascript.info/tutorial/memory-leaks)，其中声称以下代码将导致 IE 中早于版本 8 的内存泄漏。

```
function setHandler() {
  var elem = document.getElementById('id')
  elem.onclick = function() { /* ... */ }
} 
```

作者还提供了防止内存泄漏的修复：

```
function setHandler() {
  var elem = document.getElementById('id')
  elem.onclick = function() { /* ... */ }
  elem=null;
} 
```

为什么原始代码会导致内存泄漏，修复如何防止它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T02:37:17.207

文章给出了很好的解释，问题是IE和循环引用。

这意味着当你这样做时：

```
function setHandler() { 
  var elem = document.getElementById('id') // (1)
  elem.onclick = function() { /* ... */ } //(2)
} 
```

函数的第一行引用第二行，第二行引用第一行，这导致 IE 无法释放它分配的内存来创建 elem 变量。

您通过显式删除第二个引用来破坏引用，通过“破坏”elem 的值，在该行

```
elem = null 
```

所以IE可以释放内存

第二个引用的发生是因为[闭包](https://developer.mozilla.org/en/JavaScript/Guide/Closures)有问题，绑定在 onclick 中的内部函数可以访问`elem`（它存在于函数范围内），所以它被“锁定”在那里。

换句话说，有两个对 elem 的引用，一个在 var 语句中创建，一个在 onclick 函数中创建，并且在释放闭包之前不会释放该引用。

[您可以在此处](http://www.ibm.com/developerworks/web/library/wa-memleak/)、[此处](http://msdn.microsoft.com/en-us/library/bb250448(v=vs.85).aspx)和[此堆栈溢出答案](https://stackoverflow.com/questions/5708831/ie-memory-leak-from-referencing-dom-elements-in-closures)中找到更多信息

# bash - unix中时间命令的开销

> ID：11838458
> 
> 赞同：8
> 
> 时间：2012-08-07T02:27:02.780
> 
> 标签：bash, unix, time, overhead, unix-timestamp

我想知道在 unix 中使用 time 命令的开销是多少。

我知道如何使用它，但我想知道命令多长时间

```
$ time java HelloWorld 
```

使用终端，而不是命令

```
$ java HelloWorld 
```

我**特别**感兴趣的是这种开销如何随着正在运行的程序的持续时间而变化。

context:: 我用它来测量用 Java 编写的一系列长时间运行的实验所花费的时间。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-07T02:37:56.363

开销是固定的，根据[源代码](http://fossies.org/dox/time-1.7/time_8c_source.html)，只是由于正在启动一个额外的进程（`time`进程本身），引入了少量的额外处理^(（a）)。通常，shell 会启动您的程序，但在这种情况下，shell 会启动`time`并`time`启动您的进程（带有`fork`）。

这种额外的处理包括：

*   论据处理。
*   花费的时间`fork`和`exec`孩子。

当被测量的进程正在运行时，`time`它本身只是在等待它退出（通过`wait`调用），因此对进程没有影响。

因此，虽然过程的*启动时间*`time`实际上包含在测量中，但这些仅对非常短的过程很重要。如果您的流程运行了相当长的时间，那么开销`time`就无关紧要了。

至于我所说的明显是什么意思，您可以`time`通过使用非常快速的可执行文件运行它来看到效果，并且还可以查看它是否对长时间运行的进程有任何明显的开销增加：

```
pax> time sleep 0
real    0m0.001s
user    0m0.000s
sys     0m0.000s

pax> time sleep 1
real    0m1.001s
user    0m0.000s
sys     0m0.000s

pax> time sleep 10
real    0m10.001s
user    0m0.000s
sys     0m0.004s

pax> time sleep 100
real    1m40.001s
user    0m0.000s
sys     0m0.000s 
```

换句话说，几乎没有任何影响。

现在，因为如果它们是长时间运行的，你可能只是对它们进行计时（除非你连续运行多次，否则很难关心单个进程是否需要一两毫秒*，*在这种情况下有更好的提高性能的方法），固定开销`time`变得越来越不重要。

* * *

^((a))：而且，如果您使用`time`内置的外壳（例如`bash`带有`time`保留字），那么即使是很小的开销也会消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T02:39:41.993

无论程序是否定时，开销都`time`应该是相当恒定的。它所要做的就是获取一个时间戳，运行程序，获取另一个时间戳并输出结果。

在准确性等方面：您运行的程序越短，对它的影响`time`就越大。例如，在“Hello World”上的时间可能不会给你带来好的结果。运行一段时间的时间将非常准确，因为时间的开销将大大降低。

# c++ - 为什么不能在派生类的构造函数初始化列表中初始化基类的数据成员？

> ID：11838460
> 
> 赞同：2
> 
> 时间：2012-08-07T02:28:14.593
> 
> 标签：c++, inheritance, constructor, initializer-list

这就是代码，并且出现错误：“非法成员初始化：'a'不是基础或成员”，错误信息的含义是什么，为什么？

```
class A{
public:
int a;
};
class B:public A{

public:
B();
};

B::B():a(10){    // put  "a(10)" into the constructor body is right

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T02:44:01.633

在调用派生类的构造函数时，必须已经构造了基类。所以已经太晚了。要了解为什么必须这样，请考虑：

```
class Base
{
    public:
    int i;
    Base(int q) : i(q) { ; }
};

class Middle : public Base
{
    public:
    Middle() : Base(2) { printf("i=%d\n", i); }
};

class Derived : public Middle
{
    public:
    Derived() : i(3) { ; }
} 
```

现在，想想看。构造函数必须在构造函数`Middle`之前运行`Derived`。并且`Middle`构造函数确保它`i`是 2。那么`Derived`构造函数以后如何用不同的值重新构造它呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T02:37:16.940

有关此处发生的情况的更完整说明，请参阅[此答案。](https://stackoverflow.com/questions/2290733/initialize-parents-protected-members-with-initialization-list-c/#answer-2290803)基本上，您不能`A::a`在 的初始化程序中进行初始化`B`，因为根据标准它的格式不正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T03:28:39.303

一条更重要的信息 - 请记住，如果一个类没有通过构造函数初始化列表初始化成员对象，那么将在执行基类构造函数中的第一条语句之前调用该成员的默认构造函数。当你使用初始化器时，你实际上在做的是指定一个构造函数来代替默认构造函数。

显然，当您构造派生类时，父类成员已经被构造，因此您不能再次重构基成员，这就是您在本示例中试图通过将其包含在派生类初始化列表中所做的事情。

顺便说一句，如果您只想让派生类能够将*A::a*的值设置为特定值，那么请改用以下代码：

```
B::B()
{
    a = 10;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T02:35:48.250

因为基类可能希望以自己的方式初始化事物。正确的方法是调用初始化列表中的基本构造函数，并让基本 ctor 自行初始化。

# java - 捕获 Javamail 异常

> ID：11838461
> 
> 赞同：0
> 
> 时间：2012-08-07T02:28:25.730
> 
> 标签：java, jakarta-mail

我计划使用 javamail 以循环类型的方式发送自动电子邮件。因此，例如，我可能需要构建 300 封电子邮件，并一个接一个地使用 javamail 发送出去。我在 java 中使用定时器在每天的特定时间自动执行该过程。

当我在不中断循环的情况下捕获异常时，我应该尝试捕获哪些异常以及如何处理错误？我应该预期会遇到哪些例外情况？无法连接到 SMTP 服务器？无效的邮件地址？ETC？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T02:31:27.180

您必须将 try/catch 放入循环中。如果您希望循环继续进行，您应该只记录异常并处理下一次尝试。

至于要捕获哪些异常，您将被迫捕获所有已检查的异常。如果您不希望未经检查的异常中断处理，您也必须捕获这些异常。我不会去抓`Throwable`。

# javascript - 如何在与其数据对应的位置插入 enter() 选择？

> ID：11838463
> 
> 赞同：0
> 
> 时间：2012-08-07T02:28:38.853
> 
> 标签：javascript, d3.js

假设我使用数字本身作为键将数字列表绑定到“li”元素。所以如果我从 [1,2] 开始，那么我得到：

*   1*   2

现在，如果我将该列表更新为 [1,3,2]，那么我希望 HTML 看起来像：

*   1*   3*   2

我这辈子都想不出怎么做，因为如果我只做一个 enter().append('li')，那么输入选择是 3，所以 HTML 看起来像：

*   1*   2*   3

（选择也有 insert()，但它只接受常量值而不是回调。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:15:39.000

您还需要进行更新：

```
var container = d3.select("ul");
var selection = container.selectAll("li").data([1, 3, 2]);

// Enter
selection.enter().append("li");

// Update
selection.text(function(d) { return d; }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T03:54:28.840

我发现在更新后使用 selection.order 似乎可行，但它仍然不完全令人满意，因为我想在插入时这样做。

# php - CakePHP 2.0 - 图片库的分页（具有不同的项目限制）

> ID：11838465
> 
> 赞同：0
> 
> 时间：2012-08-07T02:29:12.530
> 
> 标签：php, cakephp, pagination, gallery, cakephp-2.0

我想用 CakePHP 构建一个小型图片库。因此，我创建了一个索引视图，它显示一个带有图像缩略图的 3x3 表格。对于分页和排序，我添加了以下代码：

图像控制器.php：

```
var $paginate = array(
            'limit' => 9,
            'order' => array('Image.id' => 'desc')
            );     

public function index() {  
  $data = $this->paginate('Image');
  $this->set('images', $data);
} 
```

索引.ctp：

```
<?php echo $this->Paginator->sort('id', 'Id'); ?> | 
<?php echo $this->Paginator->sort('name', 'Title'); ?>
...
<?php echo $this->Paginator->prev(' << Previous', null, null, array('class' => 'disabled')); ?>
<?php echo $this->Paginator->numbers(array('first' => 2, 'last' => 2)); ?>
<?php echo $this->Paginator->next('Next >> ', null, null, array('class' => 'disabled')); ?> 
```

这很好用。现在，当您单击缩略图时，将使用名为“view”的视图（例如 localhost/gallery/images/view/1）显示单个图像。与索引视图一样，该视图也应该有一个分页，其中当前选择了 id 为 1 的图像，并且您可以在其中导航到与当前选择的图像相关的 n 个上一个和下一个图像。此外，图像应该按照与索引视图上的图片相同的标准进行排序（例如按名称）。有没有一种优雅的方法可以用 CakePHP 解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T02:37:02.750

我会通过将页码从原始分页传递到详细视图来解决这个问题。

如果您`1`在 page 上查看 Image ID `2`，您的 URL 将类似于：

```
/gallery/images/view/1/2 
```

那是：

```
/gallery/images/view/:id/:page 
```

从这些信息中，您可以从指定页面上的索引操作中查询相同的分页数据，并从该数据中提供返回和下一个导航选项。

# iphone - CALayer 混合模式

> ID：11838466
> 
> 赞同：3
> 
> 时间：2012-08-07T02:30:07.240
> 
> 标签：iphone, ios, xcode, ipad, ipod

我正在创建一个简单的 iOS 应用程序，其中有两个 CALayer，我想在上部 CALayer 上添加混合效果以在第二层显示内容。我不想做阿尔法。有没有办法在不改变 alpha 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T03:41:53.190

iOS（从 5.1 开始）目前不支持`CALayer`. 在我的测试中，该`compositingFilter`属性被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-10T09:51:10.883

有一个棘手的方法来实现这一点。

`compositingFilter`有效，但过滤器名称应该像`subtractBlendMode`（小写骆驼），而不是`CISubtractBlendMode`.

这是一个演示：

[https://github.com/arthurschiller/CompositingFilters](https://github.com/arthurschiller/CompositingFilters)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T07:28:18.130

使用属性

> **不透明度**

CALayer 因为没有诸如 alpha 之类的东西。它的不透明度而不是 alpha，因此请尝试设置图层的不透明度。

# php - PHP如何回显关联数组的某个位置？

> ID：11838470
> 
> 赞同：1
> 
> 时间：2012-08-07T02:31:21.097
> 
> 标签：php, arrays, associative

我的数组如下所示：

```
Array
    ( [myarr] => Array (
                [504] => 2
                [508] => 25
        )
    ) 
```

是否可以回显该数组的某个位置？我努力了：

```
echo $_SESSION['myarr'][0][0]; 
```

我似乎无法得到任何回应。

编辑：更具体地说..是否可以根据数字索引回显它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T02:47:52.630

用于`array_keys()`将键放入数组中。然后使用键数组中的索引访问二维数组。并不是说这是最好的方法，而是使用数字索引来解决您的问题的一种方法。

```
$keys = array_keys($_SESSION["myarr"]);
$zero = $_SESSION["myarr"][$keys[0]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T02:33:23.937

它只是一个常规的嵌套数组。您可以像往常一样使用索引键：

```
echo $_SESSION['myarr'][504];  //2

echo $_SESSION['myarr'][508];  //25 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T02:35:05.310

看看[Get the first element of an array](https://stackoverflow.com/questions/1921421/get-first-element-of-array)。

以下应该有效（未经测试，因此没有保证）：

```
echo array_shift(array_values($_SESSION))[0][0]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T02:33:32.050

对的，这是可能的

```
print $array['myarr'][508]; // 25 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-07T02:38:05.093

这越来越丑了。

```
$i = 1;
foreach ($myarr as $array) {
    if ($i == 2) echo $array;
    $i++;
} 
```

# javascript - 在黄瓜测试中未触发 Javascript 更改事件

> ID：11838473
> 
> 赞同：2
> 
> 时间：2012-08-07T02:31:51.750
> 
> 标签：javascript, ruby-on-rails-3, selenium, cucumber

我有两个文本字段，日期和时间，它们有一个类“日期时间字段”和一个隐藏字段日期时间。每当更改日期或时间时，我都会尝试使用 javascript 将两者结合起来，并将其存储在 datetime 隐藏字段中。这是javascript（从coffeescript转换而来）：

```
$('.date-time-field').change(function() {
  var date, time;
  date = $('#date').val();
  time = $('#time').val();
  return $('#start_time').val(date + " " + time);
}); 
```

我的黄瓜测试有 @javascript 标记，因此它将在 Firefox 窗口中运行。只要我将焦点放在测试打开的 Firefox 窗口上，它就会通过，但是如果我将焦点移到另一个我打开的窗口，它会失败，因为更改事件不会触发。我担心如果用户做了一些奇怪的事情，这会在生产中重现。

步骤定义是填写表格：

```
When /^I create a valid event$/ do
  fill_in :name, :with => "Blackbeard's modest event for modest folk"
  select Tier.first.number.to_s, :from => 'event_tier_id'
  select Venue.first.name, :from => 'event_venue_id'
  fill_in 'date', :with => "05/03/2012"
  fill_in 'time', :with => " 08:45"
  click_button 'Save'      
end 
```

我应该使用另一个像模糊这样的事件，也许除了更改之外，还是它对生产来说不是问题，我应该在我的测试中调用 wait_for ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T13:50:42.607

根据[这个讨论](https://github.com/jnicklas/capybara/issues/620)，当文本区域失去焦点时，水豚`fill_in`实际上不会触发事件。`change`另一方面，jQuery 会推迟`change`textarea 上的事件，*直到*元素失去焦点（请参阅[文档](http://api.jquery.com/change/)）。

所以我猜测的是，当您将焦点移到另一个窗口时，`fill_in`不会触发`change`应有的事件，并且由于焦点丢失，`change`此后也不会触发事件。

但是，当焦点*没有*丢失时，在窗口仍处于焦点时单击保存按钮，并且（我猜）这*确实*成功触发了更改，设置了隐藏`datetime`字段。

这只是基于一些信息的猜测。在解决方案方面，上面的 github 讨论中发布了一些想法，我建议看看这些。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-13T23:33:13.243

这是一种无需执行 jquery 或 javascript`:selenium`即可触发的解决方法：`blur/change`

```
field.send_keys :tab 
```

# php - javascript 代码错误 - 函数（数据）错误，我不知道为什么

> ID：11838478
> 
> 赞同：0
> 
> 时间：2012-08-07T02:32:50.627
> 
> 标签：php, javascript, json

所以我的问题是我在函数（数据）部分出现错误，我不知道为什么 - 在dreamweaver中我得到错误它只是显示一个红色标记，说明代码错误

```
<script language="javascript" type="text/javascript">
    $("#dropdown").on('change', function() {//when you select something from the dropdown function run and will switch the data
        $.post("backgroundScript.php", {
                uid: $(this).val()
            } function(data) { // right here is the error im getting
                 $("#first").val(data.first);
               $("#last").val(data.last);
               // etc.;
            }, 'json'
        );
    });
</script> 
```

我想要做的是从 db 创建一个 autofil 表单继承我的代码的其余部分

```
try {  
  # MySQL with PDO_MYSQL  
  $DBH = new PDO("mysql:host=$hostname;dbname=$database", $username, $password);  
  $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

  //$DBH->prepare('SELECT first FROM contacts');
}  
catch(PDOException $e) { 
    echo "I'm sorry, I'm afraid I can't do that.";  
    file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND);   
}  
//get query
$FNresult=$DBH->query('SELECT first FROM contacts'); 
//set fetch mode
$FNresult->setFetchMode(PDO::FETCH_ASSOC);

$dropdown = "<select name='contacts' id='contacts' >";

while($row =$FNresult->fetch()) {

  $dropdown .= "\r\n<option value='{$row['first']}'>{$row['first']}</option>";
 // echo getLN();

}

$dropdown .= "\r\n</select>";

echo $dropdown;

//}
/*
//                  Get last name

function getLN(){
    $query = "SELECT last FROM contacts";
    $LNresult=mysql_query($query);

    $last;
    while($row = mysql_fetch_assoc($LNresult)) {

        $last = "{$row['last']}";

    }
    echo $last;
}//end getLN
*/

$DBH = null; 
?>
<!-- javascript on client-side -->
<script language="javascript" type="text/javascript">
    $("#dropdown").on('change', function() {//when you select something from the dropdown function run and will switch the data
        $.post("backgroundScript.php", {
                uid: $(this).val()
            } function(data) {
                 $("#first").val(data.first);
               $("#last").val(data.last);
               // etc.;
            }, 'json'
        );
    });
</script>

<script language="javascript" type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js">
//$("#[id]");
</script>

<form action="insert.php" method="post">
First Name: <input type="text" id="first" name="first"><br>
Last Name: <input type="text" id="last"><br>
Phone: <input type="text" id="phone"><br>
Mobile: <input type="text" id="mobile"><br>
Fax: <input type="text" id="fax"><br>
E-mail: <input type="text" id="email"><br>
Web: <input type="text" id="web"><br>
<input type="Submit">
</form> 
```

如果您需要其他任何东西，请告诉我，我将非常感谢，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T02:38:41.120

你错过了你`,`的“数据”部分之后`.post()`：

```
<script>
    $("#dropdown").on('change', function() {
        $.post(
            "backgroundScript.php", 
            {
                uid: $(this).val()
            }, // you were missing this comma
            function(data) {
                $("#first").val(data.first);
                $("#last").val(data.last);
                // etc.;
            }, 
            'json'
        );
    });
</script> 
```

请记住，格式为`.post()`：

`$.post(url, [data], [callback], [callback type])`, 方括号中的内容是可选的。

# ruby - 通过方法语法调用的运算符方法的优先级

> ID：11838490
> 
> 赞同：3
> 
> 时间：2012-08-07T02:35:15.833
> 
> 标签：ruby, operators

最近我开始学习 Ruby，我正在试验 Ruby 如何调用单个对象的方法。但是，下面的代码让我很难受，因为我没有意识到它实际上是如何工作的

```
a = 4
b = -3
c = 2

puts a*b-c                      # operator precedence preserved
puts a . * b . - c              # operator precedence not preserved
puts a.send(:*, b).send(:-, c)  # operator precedence preserved
puts a-b*c                      # operator precedence preserved
puts a . - b . * c              # operator precedence preserved
puts a.send(:-, b).send(:*, c)  # operator precedence not preserved 
```

输出：

```
-14
-20    
-14
10
10
14 
```

谁能解释运算符优先级如何在这里工作？我假设每个部分中的所有三种语法都应该反映相同的含义。如果这个问题已经被问过或解释过，我首先道歉。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T02:53:27.340

运算符优先级仅在使用运算符时适用。所有这些例子：

```
puts a . * b . - c              # operator precedence not preserved
puts a.send(:*, b).send(:-, c)  # operator precedence preserved
puts a . - b . * c              # operator precedence preserved
puts a.send(:-, b).send(:*, c)  # operator precedence not preserved 
```

是直接的方法调用，与相应的运算符相比，它们的顺序要么错误，要么正确。

也许括号使它更清楚？

```
puts a.*(b.-(c))                # .- called first, .* with the return value of .-
puts a.send(:*, b).send(:-, c)  # .* called first, .- with the return value of .*
puts a.-(b.*(c))                # .* called first, .- with the return value of .*
puts a.send(:-, b).send(:*, c)  # .- called first, .* with the return value of .- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T02:51:13.473

只有示例 1 和 4 遵循算术运算符优先级，因为只有示例 1 和 4 将运算符称为运算符。

示例 3 和 6 都调用了该`send`方法，因此它们的行为与任何其他方法调用一样。它们是从左到右的，就像你在一组数据上写一个复杂的单行代码时发生的那样，就像这样：

```
somearray.select{|x| somecondition(x)}.map{|x| somefunction(x)}.each{|x| puts x} 
```

唯一令人困惑的是示例 2 和 5。这些技巧是，如果删除句点周围的空格，您可以理解发生了什么。然后你得到：

```
puts a.* b.- c
puts a.- b.* c 
```

现在，很明显，首先在 b 上调用了一个方法，应用了一些将 c 作为参数的运算符。这会返回一些结果。该结果用作对 a 的运算符调用的参数。结果被赋予puts。换句话说，这些行从右到左求值，语句等价于

```
puts(a.*(b.-(c)))
puts(a.-(b.*(c))) 
```

# mysql - 聊天应用好友列表

> ID：11838491
> 
> 赞同：1
> 
> 时间：2012-08-07T02:35:31.810
> 
> 标签：mysql, sql, greatest-n-per-group

我有 3 个 MySQL 表，即 chat_comments、chat_friends 和 user_details，我想显示一个朋友列表。

我的桌子：

```
chat_comments(comment_id,comment,user_id,user_id2,date_added)
chat_friends(user_id,user_id2,approved)
user_details(user_id, mainimage_id, fullname) 
```

为此，我需要一个返回所需字段 ( `u.mainimage_id`, `u.fullname`, `b.comment`, `b.user_id`) 的查询，以便我可以遍历列表以显示表格。

到目前为止的 SQL（来自@Andriy M 的帮助）：

```
SELECT
cc.comment,
cc.date_added,
u.fullname,
u.mainimage_id 
FROM
user_details u
LEFT JOIN
    chat_comments cc
    INNER JOIN (
        SELECT
            user_id,
            MAX(comment_id) AS maxcomment
        FROM chat_comments WHERE user_id=2020 OR user_id2=2020
        GROUP BY user_id
    ) a ON a.user_id = cc.user_id
       AND a.maxcomment = cc.comment_id
ON a.user_id = u.user_id
WHERE u.user_id IN (
SELECT user_id2
FROM chat_friends
WHERE user_id = 2020
  AND approved = 1
) 
```

上面的查询返回登录用户的朋友在对话中最后发表的评论，而不是登录用户和他/她的朋友之间的最后评论，无论是谁发表的。

我希望它单独返回登录用户和他们的朋友之间的最后一条评论，无论是谁发表的。在`chat_messages`表中，`user_id`是发送者，`user_id2`是接收者。希望它有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:17:51.903

就像@imm 在评论中所说，您需要使用外连接。在左连接的情况下，`user_details`表应该成为连接的左侧，右侧是您`chat_comments`与`a`派生表的内部连接的结果。您还需要`user_id IN (…)`从子选择中删除条件`a`并将其重新应用到`user_details`表中。这里：

```
SELECT
    cc.comment,
    cc.date_added,
    u.fullname,
    u.mainimage_id 
FROM
    user_details u
    LEFT JOIN
        chat_comments cc
        INNER JOIN (
            SELECT
                user_id,
                MAX(comment_id) AS maxcomment
            FROM chat_comments
            GROUP BY user_id
        ) a ON a.user_id = cc.user_id
           AND a.maxcomment = cc.comment_id
    ON a.user_id = u.user_id
WHERE u.user_id IN (
    SELECT user_id2
    FROM chat_friends
    WHERE user_id = 2020
      AND approved = 1
)
; 
```

或者，您可以使用右连接。在这种情况下，您只需要移动`user_id IN (…)`条件，类似于上面的 LEFT JOIN 解决方案，并将第二个替换`INNER JOIN`为`RIGHT JOIN`：

```
SELECT
    cc.comment, cc.date_added, u.fullname, u.mainimage_id 
FROM
    (
        SELECT user_id, MAX(comment_id) AS maxcomment
        FROM chat_comments
        GROUP BY user_id
    ) a
INNER JOIN
    chat_comments cc ON 
        a.user_id = cc.user_id AND
        a.maxcomment = cc.comment_id
**RIGHT JOIN**
user_details u ON
 a.user_id = u.user_id
**WHERE u.user_id IN (select user_id2 from chat_friends where user_id=2020 AND approved=1)** 
```

# ruby-on-rails - Rails i18n copycopter 伸向无穷远

> ID：11838492
> 
> 赞同：1
> 
> 时间：2012-08-07T02:35:38.147
> 
> 标签：ruby-on-rails, internationalization, i18n-gem, copycopter

我不久前找到了copycopter，现在开始使用它。我对此很满意，但现在遇到了一些奇怪的问题。

我的数据库大小是 8M（第一天有数千个版本）并且它不断添加 blubs。它从几百开始，到周末它上升到 1800+。周末我没有碰过这个应用程序。

即使我不编辑应用程序，我也会不停地将简介添加到数据库中。应用程序中每个模型的 activerecord.model.x 和 activerecord.model.x.other 之类的东西，所以这绝对是一个重复问题。

我真的很想使用copycopter，但我被困在这个继续添加问题/8M DB 上。任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-07T16:59:39.783

我们刚刚发现了同样的问题。即使站点中没有copycopter语法，目前似乎也将任何形式变量添加到等式中。加班时，助手也会抓住它的标签。

我们将其缩小到仅开发 ENV，因此我们认为它可能是我们的调试器工具之一。它似乎捕获了写入的临时文件

# crash - 单击 SQL 查询按钮时 pgadmin 崩溃

> ID：11838493
> 
> 赞同：1
> 
> 时间：2012-08-07T02:35:39.243
> 
> 标签：crash, pgadmin

我在我的 Windows 64 位系统上安装了 pgAdmin 3，当我连接到某个服务器时，单击 SQL 按钮执行一些脚本，它崩溃了，我检查了错误日志，它说

> 2012-08-05 08:10:00 错误：错误：创建扩展“adminpack”的权限被拒绝提示：必须是超级用户才能创建此扩展。

你能帮我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T07:57:25.920

[`adminpack`](http://www.postgresql.org/docs/current/interactive/adminpack.html)是一个可选的扩展。如果您没有安装 pgAdmin，它绝对不会崩溃。

您可以尝试手动安装它。在 PostgreSQL 9.1 中，在您的一个数据库中运行一次：

```
CREATE EXTENSION adminpack; 
```

为此，您必须是超级用户。通常数据库用户`postgres`是超级用户。

# c - 仅使用停止条件时使用“for”或“while”循环？

> ID：11838496
> 
> 赞同：0
> 
> 时间：2012-08-07T02:36:07.380
> 
> 标签：c, for-loop, embedded, while-loop

> **可能重复：**
> [为什么使用 for 循环而不是 while 循环？](https://stackoverflow.com/questions/3875114/why-use-a-for-loop-instead-of-a-while-loop)

我目前正在使用嵌入式 c。我使用的软件是keil uvision。

所以我有一个关于你将使用哪个循环的问题？两个循环都做同样的事情。只要信号 = 0，'i' 就会增加 1。

首先，

```
for(;signal==0;)
{
    i++;
} 
```

下一个程序：

```
while(signal==0)
{
    i++;
} 
```

那么你会使用哪个循环，为什么？他们俩有什么区别？它在执行时间方面有什么不同吗？还是纯粹基于您的喜好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T02:44:56.513

一般来说，`for`当迭代次数已知时（即对于数组中的每个元素），循环是首选，而`while`当您不知道循环运行多少次时，循环更适合更一般的条件。但是，`for`循环可以做任何循环可以做的事情`while`，反之亦然；这完全取决于哪一个使您的代码更具可读性

在这种情况下，`while`循环会更可取，因为您正在等待`signal == 0`变为假，并且您不知道什么时候会发生。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T02:43:01.423

任何`for`循环都可以用`while`循环编写，反之亦然。你所做的是偏好、约定和可读性的混合。

通常，`for`循环用于计数，`while`循环有点等待满足某个条件（如文件结尾）。没有性能差异。

样板`for`和`while`循环：

```
for(int i = 0; i < someArraysLength; i++)
{
    // Modify contents of array
}

while(lineLeftInFile)
{
   // Read and parse the line
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T02:38:18.323

以最容易阅读和理解的为准。
请记住，其他人（除了您）可能会在某个时候尝试阅读您的代码。

我的意见：`while`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T02:48:05.400

执行时间无关紧要。任何值得该死的编译器都会生成完全相同的代码。

现在，至于语义等......计算上，

```
for (init; test; increment) { /* do stuff */ } 
```

完全等同于

```
init;
while (test) {
    /* do stuff */
    increment;
} 
```

没有`init`and `increment`, 就变成了

```
while (test) {
    /* do stuff */
} 
```

所以在计算上，两者是**相同**的。但是，从语义上讲，`for`循环适用于您*有*一个设置和/或增量阶段（特别是如果它们进行可预测的迭代次数）。既然没有，那就坚持吧`while`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T03:00:00.220

我同意 mariusnn 的观点，无论哪个最容易阅读，而且对`while`我来说似乎也更容易阅读。

查看 Visual Studio 2005 在进行调试构建时生成的汇编器，这两个循环的汇编器指令看起来是相同的。实际上，如果您使用 if 语句和标签执行相同的循环，其中 true 语句是递增 i 然后再次转到 if 语句，看起来这也会生成相同的汇编程序。

```
 for (; signal == 0; ) {
0041139C  cmp         dword ptr [signal],0 
004113A0  jne         wmain+3Dh (4113ADh) 
        i++;
004113A2  mov         eax,dword ptr [i] 
004113A5  add         eax,1 
004113A8  mov         dword ptr [i],eax 
    }
004113AB  jmp         wmain+2Ch (41139Ch) 

    while (signal == 0) {
004113AD  cmp         dword ptr [signal],0 
004113B1  jne         loop (4113BEh) 
        i++;
004113B3  mov         eax,dword ptr [i] 
004113B6  add         eax,1 
004113B9  mov         dword ptr [i],eax 
    }
004113BC  jmp         wmain+3Dh (4113ADh) 

loop: if (signal == 0) {
004113BE  cmp         dword ptr [signal],0 
004113C2  jne         loop+11h (4113CFh) 
        i++;
004113C4  mov         eax,dword ptr [i] 
004113C7  add         eax,1 
004113CA  mov         dword ptr [i],eax 
        goto loop;
004113CD  jmp         loop (4113BEh) 
      } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T04:56:26.153

> 那么你会使用哪个循环，为什么？

如果必须在两者之间进行选择，我可能会使用`while`循环，它更简单、更清晰，并且它清楚地向其他开发人员传达了以下代码块将持续执行直到信号更新。

然后再一次可以这样做：`for(; signal == 0; i++);`它似乎更简洁，尽管那是假设这确实是生产代码。

由于溢出，所有这些方法仍然看起来有点危险，即使在嵌入式设备上，大多数时钟仍然非常快，并且可能很快就会达到底层数据类型的上限，然后我不知道这是否会生产我也不知道这是否是可接受的结果。

> 他们俩有什么区别？

`for`就像你说的那样，尽管我确信还有其他方法，如我所展示或其他人提到的那样，但两者都实现了相同的目标，和之间最大的区别`while`是，一个通常在我们知道迭代次数时使用，而另一个我们不知道，虽然无论好坏，我已经看到了`for`它非常灵活的一些非常独特的用途。

> 它在执行时间方面有什么不同吗？还是纯粹基于您的喜好？

至于性能，基本上由您的编译器决定如何解释它，它可能会或可能不会产生相同的二进制文件，因此执行时间，您可以要求它产生程序集或进行一些分析。

似乎 uvision 4 IDE [http://www.keil.com/product/brochures/uv4.pdf](http://www.keil.com/product/brochures/uv4.pdf)确实支持反汇编，如第 94 页所述，以及如第 103 页所述的分析，如果这确实是您的版本使用。

虽然如果差异足够小，请不要为了增加几个纳秒而牺牲可读性，这只是我的意见，我相信还有其他人会不同意。

我能给你的最好建议是，尽你所能，编写清晰的代码，这意味着大多数人可以毫不费力地看到它传达的内容，这是高效且可维护的。

# c# - 在 (!IsPostBack) 中创建 EventHandler 委托关联即使在第一页加载时也不起作用 --- 为什么？

> ID：11838498
> 
> 赞同：2
> 
> 时间：2012-08-07T02:36:14.620
> 
> 标签：c#, asp.net, events, event-handling, postback

**作品：**

```
protected void Page_Load(object sender, EventArgs e)
{
    myButton.Click += new EventHandler(myButton_Click);
} 
```

**不起作用：**

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        myButton.Click += new EventHandler(myButton_Click);
    }
} 
```

* * *

现在，我在第二个示例中所期望的是事件处理程序仅在它不是回发时（即第一次加载页面时）才连接到按钮，然后在任何回发时，按钮将不再运行与事件关联的方法。情况似乎并非如此 --- 从第一次加载（不是回发）开始，按钮在单击时什么也不做。

我怀疑这与[页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)有关——但我不太确定这属于哪一种。如果我理解正确，与事件关联的方法会在页面回发后运行（即使您在页面第一次加载时单击它），但我指的是事件与方法的连接EventHandler 委托，而不是关联方法的实际运行。

注意：这纯粹是为了更好地了解幕后发生的事情，而不是试图解决现实世界的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:17:29.767

**您需要考虑每个页面请求**如何执行代码。服务器上发生的情况是为每个请求创建一个类实例，如果代码行

myButton.Click += new EventHandler(myButton_Click);

是有条件的，这意味着事件处理程序在回发时未连接到事件。

换句话说，如果你写类似

```
<asp:Button ID="myButton" runat="server" OnClick="myButton_Click"  /> 
```

这转化为您编写的代码，并且事件与每个**请求**相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T03:13:58.893

如果***不是***回发，则表示用户只是通过在浏览器中键入 URL（或单击链接，或...）来请求页面（HTTP Get 请求）。

如果用户点击了一个按钮，那么浏览器会发出一个 HTTP Post 请求，在服务器端，ASP.NET 通过将页面对象的 IsPostBack 属性设置为 true 来标记所请求的页面。

请参阅[此问题](https://stackoverflow.com/questions/183254/what-is-a-postback)的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T03:15:51.280

问题是，事件处理程序只能在回发时触发。事件处理程序的连接仅影响该类的实例。当回发发生时，会创建一个新的页面实例，并且不再连接事件处理程序。您需要连接它才能触发它。

最好的办法是始终连接事件处理程序。没有理由不这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T16:18:32.163

我猜你打算做的是禁用回发按钮。您可以通过将 enabled 属性设置为 false 来做到这一点。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack)
    {
        myButton.Enabled = false;
    }
} 
```

# regex - 使用 Perl 在标记的左侧和右侧提取 K 个字符

> ID：11838500
> 
> 赞同：1
> 
> 时间：2012-08-07T02:36:23.487
> 
> 标签：regex, string, perl

我有以下字符串。实际上，大小可以变化。

```
my $string = "ACCAGGGGGGCCTCCGCAG*AAGCGGTCGCCATAGTCAAAC"; 
```

我想要做的是在 * 标记的左右提取 10 个字符，结果是：

```
 my $output = "GCCTCCGCAG*AAGCGGTCGC"; 
```

在 Perl 中有一种紧凑的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T02:58:45.067

你去：

```
my $string = "ACCAGGGGGGCCTCCGCAG*AAGCGGTCGCCATAGTCAAAC";
my $output = substr($string, index($string, '*') - 10, 21); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T03:07:37.223

这是使用正则表达式的一种快速简便的方法。两个`{10}`s 代表每边要匹配的字符数。

```
my ($output) = $string =~ m{(.{10}\*.{10})}; 
```

# json - Grails - 如何让域类将 JSON 转换为域属性

> ID：11838501
> 
> 赞同：1
> 
> 时间：2012-08-07T02:36:25.060
> 
> 标签：json, grails

我想教我的域类自动将 JSON.parse(someJSON) 的结果转换为也是自定义域类的成员。

给定这些域类：

```
class Person {
    Long id
    String name

    static hasMany = [aliases: PersonAlias]
}

class PersonAlias {
    Person person
    Long id
    String name
} 
```

这个 JSON 代表一个带有一些 PersonAliases 的人：

```
{
     "id":20044397,
     "name":"John Smith",
     "aliases":[{"id":13376,"name":"Johnny Smith"},{"id":13377,"name":"J. Smith"}]
} 
```

我想保持控制器简单，例如：

```
class PersonController {
    def saveViaAjax = {
        def props = JSON.parse(params.JSON)
        Person p = Person.get(props.id)
        p.properties = props
        p.save(flush: true)
    }
} 
```

但遗憾的是我收到了这个错误：

> 无法将类型“org.codehaus.groovy.grails.web.json.JSONArray”的属性值转换为属性“别名”所需的类型“java.util.Set”；嵌套异常是 java.lang.IllegalStateException：无法将类型 [org.codehaus.groovy.grails.web.json.JSONObject] 的值转换为属性“别名 [0]”所需的类型 [heavymeta.PersonAlias]：没有匹配的编辑器或找到转换策略

所以，我想教我的领域类如何将 JSON 数据自动转换为 PersonAlias 实例。我想避免在将控制器中的数据传递给域对象之前对其进行格式化。我如何实现这些目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-27T08:03:42.340

您可以使用[bindUsing](http://grails.github.io/grails-doc/2.4.3/api/org/grails/databinding/BindUsing.html)注释并提供您的自定义绑定代码以将 json 转换为要绑定的属性。

```
class Person {
    Long id
    String name

    @BindUsing({obj, source ->
       List retVal = [] 
       def aliases = source['aliases']
       if(aliases) {
           aliases.each { 
             retVal << new PersonAlias(name:it.name)
           }
       } 
       return retVal
    })
    List<PersonAlias> aliases

    static hasMany = [aliases: PersonAlias]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:40:57.660

我也遇到了这个问题 - 我已尽力在我的网站上记录修复 - 请参阅[http://dalelotts.com/software-architect/grails](http://dalelotts.com/software-architect/grails)

一般来说，解决方案是将 JSON 转换为可用于数据绑定的参数映射。网站上的更多信息，包括 JSON 的注释驱动的 DomainClassMarshaller

```
protected Object readFromJson(Class type, InputStream entityStream, String charset) {

   def mapper = new ObjectMapper();
   def parsedJSON = mapper.readValue(entityStream, typeRef);

   Map<String, Object> map = new HashMap<>();

   parsedJSON.entrySet().each {Map.Entry<String, Object> entry ->
       if (List.isAssignableFrom(entry.getValue().getClass())) {

           List values = (List) entry.getValue();
           int limit = values.size()
           for (int i = 0; i <  limit; i++) {
               final theValue = values.get(i)
               map.put(entry.key + '[' + i + ']', theValue)

               appendMapValues(map, theValue, entry.key + '[' + i + ']' )

           }
       } else {
           map.put(entry.key, entry.value);
       }
   }

   def result = type.metaClass.invokeConstructor(map)

   // Workaround for http://jira.codehaus.org/browse/GRAILS-1984
   if (!result.id) {
       result.id = idFromMap(map)
   }
   result
}

private void appendMapValues(Map<String, Object> theMap, Object theValue, String prefix) {
    if (Map.isAssignableFrom(theValue.getClass())) {

        Map<String, Object> valueMap = (Map<String, Object>) theValue;

        for (Map.Entry<String, Object> valueEntry : valueMap.entrySet()) {
            theMap.put(prefix + '.' + valueEntry.key, valueEntry.value)
            appendMapValues(theMap, valueEntry.value, prefix + '.' + valueEntry.key)
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T05:06:49.677

我认为这个插件：[https](https://github.com/pedjak/grails-marshallers) ://github.com/pedjak/grails-marshallers可能会满足您的需求？我自己还没有尝试过。

# java - 在 Android 问题上写入文件

> ID：11838503
> 
> 赞同：1
> 
> 时间：2012-08-07T02:36:55.327
> 
> 标签：java, android

我目前正在尝试将当前时间粘贴到 Android 应用程序的文件中。代码如下所示，但未创建文件。我已启用我的应用程序通过清单在 SD 卡上写入的权限。有任何想法吗？

```
 Time today = new Time(Time.getCurrentTimezone());
    today.setToNow();
    try {
        File myFile = new File("/sdcard/mysdfile.txt");
        myFile.createNewFile();
        FileOutputStream fOut = new FileOutputStream(myFile);
        OutputStreamWriter myOutWriter = 
                                new OutputStreamWriter(fOut);
        SimpleDateFormat dF = new SimpleDateFormat("HHMMSS");
        StringBuilder current = new StringBuilder(dF.format(today));
        myOutWriter.append(current);
        myOutWriter.close();
        fOut.close();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T02:45:20.197

您应该使用 Environment.getExternalStorageDirectory() 而不是硬编码`/sdcard/`路径。

`File file = new File(Environment.getExternalStorageDirectory(), "mysdfile.txt");`

我已经尝试运行您的代码，但由于`dF.format(today)`.

而不是拥有这个，

```
 Time today = new Time(Time.getCurrentTimezone());
 today.setToNow(); 
```

它适用于这个

```
Date today = new Date(); 
```

此代码适用于我的设备。

```
Date today = new Date();

try {
    File myFile = new File(Environment.getExternalStorageDirectory(), "mysdfile.txt");            
    myFile.createNewFile();

    FileOutputStream fOut = new FileOutputStream(myFile);
    OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);
    SimpleDateFormat dF = new SimpleDateFormat("HHMMSS");
    StringBuilder current = new StringBuilder(dF.format(today));
    myOutWriter.append(current);
    myOutWriter.close();
    fOut.close();
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T02:58:48.893

尝试以下另一种方法，

```
private BufferedWriter buff = null;
private File logFile = null;
logFile = new File ( "/sdcard/mysdfile.txt" );
if ( !logFile.exists() )
{
    logFile.createNewFile();
}
buff = new BufferedWriter ( new FileWriter ( logFile,true ) );
buff.append( "Write what you want to store" );
buff.close(); 
```

您还需要`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>`在您的 AndroidManifest.xml 中授予权限。

# java - PowerMock NoClassDefFoundError

> ID：11838504
> 
> 赞同：0
> 
> 时间：2012-08-07T02:36:57.847
> 
> 标签：java, unit-testing, powermock

我有一些简单的课程用于查看是否可以开始`powermock`工作：

```
import org.junit.Test;
import org.junit.runner.RunWith;
import org.powermock.api.easymock.PowerMock;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;

@RunWith(PowerMockRunner.class)
@PrepareForTest(Foo.class)
public class FooTest
{
    @Test
    public void testFoobar(){
        Foo test = PowerMock.createPartialMock(Foo.class, "foobar");
        PowerMock.replay(test);
    }
} 
```

和

```
public class Foo
{
    public String foobar(String aString){
        return aString + " blah";
    }
} 
```

当我尝试运行这个单元测试时，它告诉我：

```
java.lang.NoClassDefFoundError: org/easymock/classextension/internal/ClassProxyFactory$MockMethodInterceptor
... 
```

我不知道它为什么这样做。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T02:46:19.183

确保在使用 PowerMock 时将[EasyMock](http://www.easymock.org/index.html)包含在类路径中...您可以在[此处](http://www.easymock.org/Downloads.html)找到下载页面。

根据 PowerMock 上的[Wiki](http://code.google.com/p/powermock/wiki/EasyMock)，它指出 EasyMock 是一个依赖项。

# actionscript-3 - 使用 actionscript 为 datagrid 创建自定义 itemrenderer

> ID：11838506
> 
> 赞同：0
> 
> 时间：2012-08-07T02:37:02.667
> 
> 标签：actionscript-3, flex4

我已经覆盖了 DataGrid 类中的函数

> [可绑定]
> 
> 受保护的 var dgir:DefaultGridItemRenderer = new DefaultGridItemRenderer();
> 
> 覆盖公共函数集 itemRenderer (value:IFactory) : void {
> dgir.label = "Sample Text";
> 
> }

我仍然有运行它的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T05:15:21.627

> [http://krasimrtsonev.com/blog/article/AS3-flex-Sort-DataGrid-DataGridColumn-which-contains-custom-ItemRenderer](http://krasimirtsonev.com/blog/article/AS3-flex-Sort-DataGrid-DataGridColumn-which-contains-custom-ItemRenderer)

愿此链接对您有所帮助！

# ruby-on-rails - HTML5 视频导轨

> ID：11838507
> 
> 赞同：0
> 
> 时间：2012-08-07T02:37:06.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3, html, ruby-on-rails-3.1

我对如何将 html5 视频标签与 rails 一起使用感到困惑。我几个问题

1-什么是源文件.ogg？？我不能只使用 mp4 文件并将其插入到我的视频标签中。

2- 如果我想向所有成员展示视频/图像，它应该是公开的吗？然后我如何访问公共，以及如果我创建它，我如何访问不同文件夹中的视频，例如断言/视频。

3- 我有以下文件，但没有显示任何文件，为什么？

4-我需要先对其进行编码以对视频进行编码吗？或者只是将其插入文件中。ogg 是一个好的编码器还是 zencoder 更好？

Javascript（应用程序.js）

```
function init() {
            if( !document.createElement('video').canPlayType ) return;
            var videos = document.querySelectorAll( 'div.video' ),
                videosLength = videos.length;
            for( var i=0; i < videosLength; i++ ) {
                var root = videos[i];
                    video = root.querySelector( 'video' ),
                    play = document.createElement( 'button' ),
                    mute = document.createElement( 'button' );
                video.controls = false;
                // Initial class name
                play.className = 'video-button video-play';
                play.innerHTML = play.title = 'Play';
                play.onclick = function() {
                    if( video.paused ) {
                        video.play();
                        // Additional class names for container and button while playing
                        root.className += ' video-on';
                        play.className += ' video-play-on';
                        play.innerHTML = play.title = 'Pause';
                    } else {
                        video.pause();
                        // Remove additional class names for container and button in paused state
                        root.className = root.className.replace( ' video-on', '' );
                        play.className = play.className.replace( ' video-play-on', '' );
                        play.innerHTML = play.title = 'Play';
                    }
                }
                // Initial class name
                mute.className = 'video-button video-mute';
                mute.innerHTML = mute.title = 'Mute';
                mute.onclick = function() {
                    if( video.muted ) {
                        video.muted = false;
                        // Remove additional class name in unmuted state
                        mute.className = mute.className.replace( ' video-mute-on', '' );
                        mute.innerHTML = mute.title = 'Mute';
                    } else {
                        video.muted = true;
                        // Additional class name for button in muted state
                        mute.className += ' video-mute-on';
                        mute.innerHTML = mute.title = 'Unmute';
                    }
                }
                root.appendChild( play );
                root.appendChild( mute );
            }
        }
        window.onload = init; 
```

HTML (index.html.erb)

```
<video controls poster="video/video.jpg" width="854" height="480">
    <source src="m/video.ogv" type="video/ogg">
    <source src="video/trailer_test.mp4" type="video/mp4">
    <object type="application/x-shockwave-flash" data="m/player.swf" width="854" height="504">
    <param name="allowfullscreen" value="true">
    <param name="allowscriptaccess" value="always">
    <param name="flashvars" value="file=video.mp4">
    <!--[if IE]><!--><param name="movie" value="m/player.swf"><!--<![endif]-->
    <img src="m/video.jpg" width="854" height="480" alt="Video">
    <p>Your browser can&rsquo;t play HTML5 video. <a href="m/video.ogv"> Download it</a> instead.</p>
    </object>
</video> 
```

CSS（应用程序.css）

```
body {
            margin:0;
            padding:50px;
            background:#444;
            }

        /* Video */
        .video {
            position:relative;
            overflow:hidden;
            float:left;
            background:#000;
            color:#fff;
            }
            .video video {
                display:block;
                opacity:.4;
                -webkit-transition:all .2s linear;
                -moz-transition:all .2s linear;
                -o-transition:all .2s linear;
                transition:all .2s linear;
                }
            .video:hover video {
                opacity:.6;
                }
        .video-on video,
        .video-on:hover video {
            opacity:1;
            }

        /* Button */
        .video-button {
            position:absolute;
            z-index:1;
            border:none;
            background:#CCC;
            text-indent:-9999px;
            cursor:pointer;
            -webkit-transform:scale(1.0);
            -moz-transform:scale(1.0);
            -o-transform:scale(1.0);
            transform:scale(1.0);
            -webkit-transition:all .2s linear;
            -moz-transition:all .2s linear;
            -o-transition:all .2s linear;
            transition:all .2s linear;
            }
        .video-button:hover {
            -webkit-transform:scale(1.1);
            -moz-transform:scale(1.1);
            -o-transform:scale(1.1);
            transform:scale(1.1);
            }
        .video-button:after {
            position:absolute;
            background:url(i/buttons.png) no-repeat;
            content:'';
            }

        /* Play */
        .video-play {
            bottom:30px;
            left:30px;
            -webkit-box-shadow:0 0 50px #FFF,
                inset 5px 5px 20px #444,
                inset 0 -20px 40px #000;
            -moz-box-shadow:0 0 50px #FFF,
                inset 5px 5px 20px #444,
                inset 0 -20px 40px #000;
            box-shadow:0 0 50px #FFF,
                inset 5px 5px 20px #444,
                inset 0 -20px 40px #000;
            width:50px;
            height:50px;
            -webkit-border-radius:25px;
            -moz-border-radius:25px;
            border-radius:25px;
            }
        .video-play:after {
            top:15px;
            left:16px;
            width:21px;
            height:21px;
            background-position:0 0;
            }
        .video-play-on:after {
            background-position:-23px 0;
            }

        /* Mute */
        .video-mute {
            bottom:35px;
            left:100px;
            -webkit-box-shadow:0 0 30px #FFF,
                inset 4px 4px 15px #444,
                inset 0 -15px 35px #000;
            -moz-box-shadow:0 0 30px #FFF,
                inset 4px 4px 15px #444,
                inset 0 -15px 35px #000;
            box-shadow:0 0 30px #FFF,
                inset 4px 4px 15px #444,
                inset 0 -15px 35px #000;
            width:38px;
            height:38px;
            -webkit-border-radius:19px;
            -moz-border-radius:19px;
            border-radius:19px;
            }
        .video-mute:after {
            top:13px;
            left:11px;
            width:17px;
            height:14px;
            background-position:0 -21px;
            }
        .video-mute-on:after {
            background-position:-18px -21px;
            } 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T03:02:15.097

**> 1- 什么是源文件.ogg?? 我不能只使用 mp4 文件并将其插入到我的视频标签中。** 是的，你可以只使用 mp4。请参阅 video_tag 上的 Rails API。它适用于 mp4。[http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-video_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-video_tag)

**> 2- 如果我想向所有成员展示视频/图像，它应该是公开的吗？然后我如何访问公共，以及如果我创建它，我如何访问不同文件夹中的视频，例如断言/视频。** 一个简单的方法是使用回形针 gem 来处理视频上传。很容易抓住你需要播放它的网址。

**> 3- 我有以下文件，但没有显示任何文件，为什么？> 4- 我需要编码吗？** 如果你在 HTML5 中使用 mp4，你只需要 video_tag，你不需要任何这个

# customization - 自定义 Google Call 小部件大小或图形

> ID：11838511
> 
> 赞同：2
> 
> 时间：2012-08-07T02:37:51.687
> 
> 标签：customization, call, voice

有没有办法自定义这个小部件的大小？我的客户想要它在标题中，但它太大了。

[![谷歌小部件](../Images/aadd2df7a00575d7e77b9993dca140bd.png)](https://i.stack.imgur.com/eqttV.jpg)
[（来源：[google.com](https://www.google.com/voice/resources/2714463893-style01_full.jpg)）]

这是他们为 WordPress 小部件提供的嵌入代码。必须有一种方法可以使自定义图像的点击触发这个？

```
<object type="application/x-shockwave-flash" data="https://clients4.google.com/voice/embed/webCallButton" width="230" height="85">
<param name="movie" value="https://clients4.google.com/voice/embed/webCallButton" />
<param name="wmode" value="transparent" />
<param name="FlashVars" value="id=#####numberhidden####&style=0" /></object> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:05:09.500

我能够找到这个链接，它不能完全让你调整它的大小，但它是一种通过输入字段以自定义格式推送谷歌需要的变量的方法。

[http://razvangavril.com/web-development/custom-google-voice-widget/](http://razvangavril.com/web-development/custom-google-voice-widget/)

和

[http://razvangavril.com/web-development/custom-google-voice-widget-2/](http://razvangavril.com/web-development/custom-google-voice-widget-2/)

`ButID`部分标签`button_id`是一个*文本字段*，您可以在其中输入您的**Google Voice ID**。您可以通过查找在他们的嵌入代码中找到`ID=`。我选择将其设为隐藏字段，然后手动插入我的。

其他两个字段是您的姓名和电话号码。然后，您将他们的脚本与表单一起插入，自定义外观，然后您就完成了。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-03T05:09:43.297

使用以下教程：

[http://razvangavril.com/web-development/custom-google-voice-widget/](http://razvangavril.com/web-development/custom-google-voice-widget/)

您可以创建任何类型的按钮或图像，并在调用表单中抛出一个对话框。

# android - 在地图视图中标记多个不同的位置？

> ID：11838514
> 
> 赞同：0
> 
> 时间：2012-08-07T02:38:09.437
> 
> 标签：android, google-maps

我是android的新手。我所能做的就是在用户当前位置放置一个标记。但我需要做的是在用户当前位置和用户位置附近的特定位置放置一个标记。例如，用户中的标记和用户位置附近的所有肯德基中的标记。但我还不知道如何使这项工作。

任何想法都会被接受。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T03:02:32.140

您可能需要做的是注释或 itemizedOverlay。这将在本教程的第 2 部分中逐步介绍。

[https://developers.google.com/maps/documentation/android/hello-mapview](https://developers.google.com/maps/documentation/android/hello-mapview)

否则，如果您只是向地图应用程序发起意图。然后只需发送肯德基的位置就足够了，因为无论如何用户位置都会出现在本机应用程序中

[http://developer.android.com/guide/appendix/g-app-intents.html](http://developer.android.com/guide/appendix/g-app-intents.html)

geo:latitude,longitude geo:latitude,longitude?z=zoom geo:0,0?q=my+street+address geo:0,0?q=business+near+city

# android - DarkActionBar - 浅色标签背景？

> ID：11838521
> 
> 赞同：1
> 
> 时间：2012-08-07T02:39:17.107
> 
> 标签：android, tabs, styles

我正在使用 Holo.Light.DarkActionBar 进行这些修改。

```
<style name="myTheme" parent="@android:style/Theme.Holo.Light.DarkActionBar">
    <item name="android:actionBarStyle">@style/MyActionBar</item>
    <item name="android:titleTextStyle">@style/MyActionBar.Text</item>
    <item name="@android:attr/actionBarTabTextStyle">@style/TabStyle</item>
</style>

<style name="TabStyle" parent="android:Widget.Holo.Light.ActionBar.TabText.Inverse">
    <item name="android:textColor">#ECECEC</item>
</style>

<style name="MyActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">#222</item>
    <item name="android:titleTextStyle">@style/MyActionBar.Text</item>
</style> 
```

所以我的操作栏是深色的，我的标签背景是浅色的，带有深色文本。问题是当我进入横向模式时，它会将选项卡放在操作栏中，这没关系，但现在深色操作栏中有深色文本。

**我正在寻找以下两种解决方案之一：**

1.  无论是纵向（深色）还是横向（浅色），文本颜色都不同。
2.  或者，选项卡背景全黑，文本全亮。

编辑：我认为 DarkActionBar 主题也将包括选项卡？

这是我的标签设置：

```
<TabHost
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:orientation="horizontal" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0" />

        <android.support.v4.view.ViewPager
            android:id="@+id/viewpager"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />
    </LinearLayout>
</TabHost> 
```

# jquery - 如何在调整大小时消除额外的填充

> ID：11838531
> 
> 赞同：1
> 
> 时间：2012-08-07T02:41:01.057
> 
> 标签：jquery, resize

我正在尝试做一些看起来应该很简单但事实并非如此的事情。实际应用程序比此处的示例更复杂，但这重现了我正在努力解决的问题。我的大部分开发都是用 IE9 进行的，但我已经在其他浏览器上进行了尝试，发现了同样的问题。

我有一个要根据浏览器窗口大小调整大小的 DIV。大多数情况下，代码都可以工作，除非用户缩小浏览器窗口，否则您最终会得到额外的填充，这些填充显然是为不需要的滚动条分配的（有时）。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Resize Test</title>
    <script src="/SharedLib/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        function resize(e) {
            $("#sized-content").width($(window).width() - 10); // 2 x 5px border = 10
            $("#sized-content").height($(window).height() - 10);
        }
        $(document).ready(function () {
            $(window).resize(resize);
            resize();
        });
    </script>
</head>
<body style="margin: 0px;">
    <div id="sized-content" style="border: 5px solid red;"></div>
</body>
</html> 
```

到目前为止，我发现了 2 个非常不受欢迎的修复：

1.  再次调用 resize 关闭计时器。非常明显的眨眼。
2.  将正文样式设置为“溢出：隐藏”。

我从调试中确定的是 $(document).width() 大于 $(window).width() 并且因此分配了滚动条。但是调整大小功能会更改内容大小以纠正此问题，但滚动条直到稍后更新所需的文档宽度并且发生另一个调整大小时才会消失。

在我看来，这个额外的滚动条填充应该能够在没有破解的情况下被消除。

# haskell - 得到低于 x 的素数

> ID：11838533
> 
> 赞同：3
> 
> 时间：2012-08-07T02:41:28.953
> 
> 标签：haskell, primes

我正在尝试编写一个返回给定数字以下所有素数列表的过程。

例如：

```
Prelude>primes 8  
[2,3,5,7] 
```

当我尝试加载文件时，`Parse error in pattern Failed, modules loaded: none.`如果有人能指出我正确的方向，我将不胜感激。

```
primes :: Int -> [Int]
primes x < 2 = []
primes x | isPrime x == True = primes (x - 1) ++ x
         | otherwise = primes (x - 1)

isPrime :: Int -> Bool
isPrime x | x < 2 = False
          | x == 2 || x == 3 = True
          | divEven x == True = False
          | divOdd x 3 == True = False
          | otherwise = True

divEven :: Int -> Bool
divEven x | mod x 2 == 0 = True
          | otherwise = False

divOdd :: Int Int -> Bool
divOdd x num | mod x num == 0 == True
             | num <= x/2 = divOdd x (num + 2)
             | otherwise = False 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T03:00:56.190

小错误的集合。

1.  你的语法不正确。

    ```
    primes x < 2 = [] 
    ```

    可能你的意思是

    ```
    primes x | x < 2 = [] 
    ```

    同样，你写的地方

    ```
    divOdd x num | mod x num == 0 == True 
    ```

    你可能是说

    ```
    divOdd x num | mod x num == 0 = True 
    ```

2.  类型签名

    ```
    divOdd :: Int Int -> Bool 
    ```

    无效。你可能是说

    ```
    divOdd :: Int -> Int -> Bool 
    ```

3.  `x`是 type `Int`，`(/) :: Fractional a => a -> a -> a`不能应用于它。你可能的意思是`num <= x `div` 2`或`2 * num <= x`。

    ```
    divOdd :: Int Int -> Bool
    divOdd x num | mod x num == 0 == True
                 | num <= x/2 = divOdd x (num + 2)
                 | otherwise = False 
    ```

4.  `x`是类型`Int`，不是`[Int]`。 `(++) :: [a] -> [a] -> [a]`将不适用于它。

    ```
    primes x | isPrime x == True = primes (x - 1) ++ x 
    ```

    也许你的意思是

    ```
    primes x | isPrime x == True = primes (x - 1) ++ [x] 
    ```

最后，这是一种相当低效的生成素数的方法。你考虑过筛子吗？ [素数 - HaskellWiki](http://www.haskell.org/haskellwiki/Prime_numbers)现在对你来说可能有点困难，但显示了许多不同的策略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T05:27:55.940

[这是使用列表推导](http://www.haskell.org/haskellwiki/List_comprehension)（也在[Wikipedia 中](http://en.wikipedia.org/wiki/List_comprehension#Haskell)）重写的函数，也许这在视觉上更明显：

```
primes :: Int -> [Int]
primes x | x<2  = [] 
         | x<4  = [2..x]
         | True = primes (x-1) ++ [x | isPrime x] 
```

你`isPrime`是

```
isPrime x = x > 1 && 
          ( x < 4 || 
            and [ rem x n /= 0 | n <- 2 : [3,5..(div x 2)+2] ] ) 
```

[`and`是标准 Prelude 中定义的函数](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#g:13)。它将从左到右测试列表中的条目，以查看是否全部为`True`. 它将在`False`遇到的第一个条目上停止，因此其余条目将不会被探索。

有时，当代码在视觉上更明显时，更容易看到如何改进它。

# mysql - 查询与 activerecord 的交集

> ID：11838537
> 
> 赞同：5
> 
> 时间：2012-08-07T02:41:52.680
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, activerecord

我真的很想在活动记录的帮助下进行以下查询

```
(select *
from people p join cities c join services s
where p.city_id = c.id and p.id = s.person_id and s.type = 1)

intersect

(select *
from people p join cities c join services s
where p.city_id = c.id and p.id = s.person_id and s.type = 2) 
```

问题是，首先，mysql 不支持 intersect。但是，这可以解决。问题是我可以获得活动记录以输出任何接近该记录的内容。

在活动记录中，我能做的最好的事情是发出多个查询，然后使用`reduce :&` 它们来连接它们，但后来我得到了一个数组，而不是一个关系。这对我来说是个问题，因为我想调用诸如限制之类的东西。另外，我认为交集最好由数据库完成，而不是 ruby​​ 代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-12T04:38:27.047

您的问题可能无需交叉即可解决，例如：

```
Person.joins(:services).where(services: {service_type: [1,2]}).group(
   people: :id).having('COUNT("people"."id")=2') 
```

然而，以下是我用于在 ActiveRecord 中构建类似查询的交集的一般方法：

```
class Service < ActiveRecord::Base
  belongs_to :person

  def self.with_types(*types)
    where(service_type: types)
  end
end

class City < ActiveRecord::Base
  has_and_belongs_to_many :services
  has_many :people, inverse_of: :city
end

class Person < ActiveRecord::Base
  belongs_to :city, inverse_of: :people

  def self.with_cities(cities)
    where(city_id: cities)
  end

  def self.with_all_service_types(*types)
    types.map { |t|
      joins(:services).merge(Service.with_types t).select(:id)
    }.reduce(scoped) { |scope, subquery|
      scope.where(id: subquery)
    }
  end
end

Person.with_all_service_types(1, 2)
Person.with_all_service_types(1, 2).with_cities(City.where(name: 'Gold Coast')) 
```

它将生成以下形式的 SQL：

```
SELECT "people".*
  FROM "people"
 WHERE "people"."id" in (SELECT "people"."id" FROM ...)
   AND "people"."id" in (SELECT ...)
   AND ... 
```

只要每个子查询在其结果集中返回匹配人员的 id，您就可以根据任何条件/连接等使用上述方法创建任意数量的子查询。

Each subquery result set will be AND'ed together thus restricting the matching set to the intersection of all of the subqueries.

*UPDATE*

For those using AR4 where `scoped` was removed, my other answer provides a semantically equivalent `scoped` polyfil which `all` is not an equivalent replacement for despite what the AR documentation suggests. Answer here: [With Rails 4, Model.scoped is deprecated but Model.all can't replace it](https://stackoverflow.com/questions/18198963/with-rails-4-model-scoped-is-deprecated-but-model-all-cant-replace-it/18327912#18327912)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:00:39.067

我在同一个问题上苦苦挣扎，只找到了一个解决方案：针对同一个关联的多个联接。这可能不太像rails-ish，因为我正在为连接构建SQL 字符串，但我还没有找到另一种方法。这将适用于任意数量的服务类型（城市似乎没有考虑在内，因此为了清楚起见省略了连接）：

```
s = [1,2]
j = ''
s.each_index {|i|
  j += " INNER JOIN services s#{i} ON s.person_id = people.id AND s#{i}.type_id = #{s[i]}" 
}
People.all.joins(j) 
```

# ruby-on-rails - Rails 3.1.0 对嵌套属性的条件验证

> ID：11838542
> 
> 赞同：2
> 
> 时间：2012-08-07T02:42:16.160
> 
> 标签：ruby-on-rails, validation, nested-attributes

我有一个结构，其中 an`Item`可能属于 a `Claim`，如果是，我希望它的另一个字段也是必需的。这些是相关的代码片段：

```
class Claim
  has_many :items
  accepts_nested_attributes_for :items
  validates_associated :items
end

class Item
  belongs_to :claim
  validates :amount_paid, :presence => {:if => :claim}
end 
```

这*几乎*适用于所有情况。当我编辑*现有的* `Claim`并尝试在该`amount_paid`字段中输入空格时，我得到了我想要的错误。并且`Claim`当它达到这个验证时应该存在，因为之前的迭代也有效，相当于

```
validates :claim_id, :presence => {:unless => :new_claim?}
...
def new_claim?
  claim.new_record? # would have thrown an error if claim was nil
end 
```

但是，当我在其上创建一个带有空白字段的*新* 时，验证通过，这是他们不应该的。`Claim``amount_paid``Items`

没用，我也试过

```
validates :amount_paid, :presence => {:if => :claim_exists?}
...
def claim_exists?
  !!claim
end 
```

还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:42:14.903

我相信可以通过向`:inverse_of`关联添加一个选项来解决这个问题：

```
class Claim
  has_many :items, :inverse_of => :claim
end

class Item
  belongs_to :claim, :inverse_of => :items
end 
```

（不过，自从我遇到这个问题以来已经有一段时间了，所以如果你遇到和我一样的问题，请做一些实验。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T04:06:59.117

我所做的可能有点骇人听闻，但它似乎有效：

```
class Item
  ...
  validates :amount_paid, :presence => {:if => :claimed?}
  ...
  def claimed?
    !!claim || caller.any? { |m| m =~ /claims_controller/ }
  end
end 
```

因此，如果声明存在，或者如果从`ClaimsController`堆栈跟踪中的任何位置调用此声明，则验证将运行。

我仍然欢迎任何有更好想法的人提供意见。

# sql-server - 如何删除我数据库上每个表中的所有数据

> ID：11838543
> 
> 赞同：1
> 
> 时间：2012-08-07T02:42:17.290
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我有一个数据库，其中包含 300 个包含数据的表。我需要删除每个表中的所有数据。我试图截断所有表，但由于表中的列之一是外键，所以我收到一个错误，该过程无法完成。还有其他方法可以解决我的问题吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T02:45:52.680

您需要：

*   删除所有外键，截断，然后重新创建 FK；
*   禁用所有外键，删除（不截断），然后重新启用 FK；或者，
*   先从子表中删除。

如果你有幸拥有循环引用，后者可能是不可能的，即使没有循环引用，它仍然可能很复杂。前两个也相对复杂，但我最近为不同的用户解决了一个非常相似的问题（我发现这些比尝试确定正确的删除顺序更容易）：

[暂时禁用所有外键约束](https://stackoverflow.com/questions/11639868/temporarily-disable-all-foreign-key-constraints)

另一个想法是执行更简单和更完整的擦除：

*   编写表（显然还有其他对象）脚本，删除数据库并重新创建它；或者，
*   创建数据库的副本，并使用 Visual Studio / SSDT 或 3rd 方模式比较工具在空数据库中创建所有对象（然后您可以删除旧数据库并重命名新数据库）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T03:05:12.613

试试这个： 一种快速的方法。`sp_msforeachtable`是一个未记录的 SP，因此使用它们存在风险。我通过禁用他的答案中使用的约束，使用 Aaron Logic 提出了这个[答案](https://stackoverflow.com/questions/11639868/temporarily-disable-all-foreign-key-constraints)。

```
use [YourDB]
Go

EXEC sp_MSForEachTable 'ALTER TABLE ? NOCHECK CONSTRAINT ALL'
EXEC sp_MSForEachTable 'Truncate Table ?'
EXEC sp_MSForEachTable 'ALTER TABLE ? CHECK CONSTRAINT ALL' 
```

# php - 用于获取亚马逊产品评论 (AWS) 的 PHP 代码

> ID：11838545
> 
> 赞同：2
> 
> 时间：2012-08-07T02:42:36.220
> 
> 标签：php, amazon-web-services, amazon, review

当我在谷歌上搜索这个主题时，看起来亚马逊一直很保护，只允许丑陋的 iFrame 在我们自己的网站上显示评论。

也就是说，有讨论讨论通过编程引入 iFrame 内容并自行显示：[https ://forums.aws.amazon.com/message.jspa?messageID=197867](https://forums.aws.amazon.com/message.jspa?messageID=197867)

但是，在 AWS 上找到 PHP 身份验证的工作代码示例，然后为指定产品拉取评论肯定不容易。有没有人有任何指示？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:26:37.257

[您可以通过将 iframe 的来源设置为“ http://www.amazon.com/product-reviews/B00891PV0G](https://rads.stackoverflow.com/amzn/click/com/B00891PV0G) ”在 iframe 中显示来自 amazon.com 的产品评论

用您的 ASIN 替换“B00891PV0G”

# asp.net-mvc-3 - Jquery Mobile 复选框值在 MVC3 视图模型中无效

> ID：11838547
> 
> 赞同：0
> 
> 时间：2012-08-07T02:42:44.393
> 
> 标签：asp.net-mvc-3, jquery-mobile, checkbox, viewmodel

我正在学习 Jquery Mobile。我正在尝试为我的 .NET MVC3 站点设置登录页面。我的控制器只是标准的 MVC3 帐户控制器。

这是我的 Jquery Mobile 页面：

```
<html>
<head>
    <title>Mobile Logon</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0-alpha.1/jquery.mobile-1.2.0-alpha.1.min.css" />

    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>

<script type="text/javascript">
        $(document).bind("mobileinit", function(){
           $.extend(  $.mobile , {
            ajaxEnabled: false
          });
        });
    </script>

    <script src="http://code.jquery.com/mobile/1.2.0-alpha.1/jquery.mobile-1.2.0-alpha.1.min.js"></script>

</head>
<body>

<div data-role="page" data-theme="e">
    <div data-role="header">

        <a href="@Url.Action("Index", "Home")" data-icon="arrow-l" rel="external" >Back</a>
        <h1>Logon</h1>
    </div>

    <div data-role = "content">        
        @Html.ValidationSummary(true, "Login was unsuccessful.")

        @using (Html.BeginForm("Logon", "Account", FormMethod.Post, null))
        {
            <label for="Username">User Name (e-mail address)</label><input type="email" name="Username" />
            <label for="Password">Password</label><input type="password" name="Password" />
            <label><input type="checkbox" name="RememberMe" data-theme="c" />Remember Me</label>
            <button type="submit" value="Log On"></button>
        }
        <center>or</center>

        @using(Html.BeginForm("Register", "Account", FormMethod.Get, null ))
        {
            <button type="submit" value="Register for an account" data-transition="flip"></button>  
        }

    </div>
</div> 
```

当我测试页面时，如果我不选中“记住我”框，那么一切正常。但是，**如果我选中该框并单击“登录”，则控制器会说该模型无效。** 当我单步执行代码时，我注意到它也认为“RememberMe”的值是假的，无论该框是否被选中。

这是登录页面的视图模型

```
public class LogOnModel
{
    [Required]
    [Display(Name = "E-mail address")]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [Display(Name = "Remember me?")]
    public bool RememberMe { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T03:14:04.647

使用 时，您可以使用额外的移动属性`HtmlHelpers`，示例如下：

```
@Html.TextBoxFor(x => x.UserName, new { type = "email" })
@Html.CheckBoxFor(x => x.RememberMe, new { data_theme = "c" }) 
```

MVC 3 将属性名称中的下划线转换为破折号，因此您的 data-theme 属性保持不变。我刚刚对此进行了测试，它非常适合您的需求。

# c# - 使用连接 C# 引用变量

> ID：11838552
> 
> 赞同：0
> 
> 时间：2012-08-07T02:43:08.853
> 
> 标签：c#, variables, concatenation

我有许多变量，例如

```
int foo1;
int foo2;
int foo3;
int foo4; 
```

现在，我有一个 for 循环，从 var x = 0 到 3（对于 4 个变量），我想使用 x 来调用这样的变量：

```
for(int x = 0; x < 4; x++)
{
    foo+x = bar;
} 
```

这样当 x = 1 时，我的变量 foo1 将被赋值为 bar（当 x = 1 时，foo+x = bar == foo1 = bar）。

有没有办法在 C# 中做到这一点，或者我应该采取另一种方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T02:48:19.050

这是不可能的，除非你想使用反射，这不是最好的方法。在不知道您要达到的目标的情况下，回答起来有点困难，但是您可以创建一个数组来保存变量，然后使用 x 作为索引器来访问它们

```
for(int x = 0; x < 4; x++)
{
    fooarr[x] = bar;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T02:50:08.420

很难判断在您的特定情况下什么是最好的方法，但这很可能不是好方法。你绝对需要 4 个变量，还是只需要 4 个值。一个简单的列表、数组或字典就可以完成这项工作：

```
int[] array = new int[4];
List<int> list = new List<int>(4);
List<int, int> dictionary1 = new Dictionary<int, int>(4);
List<string, int> dictionary2 = new Dictionary<string, int>(4);

for(int x = 0; x < 4; x++)
{
    array[x] = bar;
    list[x] = bar;
    dictionary1.Add(x, bar);
    dictionary2.Add("foo" + x.ToString(), bar);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T02:52:49.123

你能做这样的事情吗：

```
var listVariables = new Dictionary<string, int>
                    {
                        { "foo1", 1 },
                        { "foo2", 2 },
                        { "foo3", 3 },
                        { "foo4", 4 },
                    };

for (int x = 1; x <= 4; x++)
{
   listVariables["foo" + x] = bar;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T02:49:13.177

也许另一种方法会更好;-)

```
int[] foo;

// create foo

for(int i = 0; i < 4; i++)
{
  foo[i] = value;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T02:52:38.600

如果可能，您应该使用包含四个整数的**数组。**您可以像这样声明它：

`int[] foos = new int[4];`

然后，在您的循环中，您应该更改为以下内容：

```
for(int i=0;i<foos.Length;i++)
{
     // Sets the ith foo to bar. Note that array indexes start at 0!
     foos[i] = bar;
} 
```

通过这样做，你仍然会有四个整数；您只需使用 访问它们`foos[n]`，其中 n 是您想要的第 n 个变量。请记住，数组的第一个元素位于 0，因此要获取第一个变量，您将调用`foos[0]`，而要访问第 4 个 foo，您将调用`foos[3]`

# c++-cli - 如何在 C++.NET 中绘制到窗口的标题栏？

> ID：11838553
> 
> 赞同：0
> 
> 时间：2012-08-07T02:43:09.890
> 
> 标签：c++-cli, managed, wndproc

我正在尝试绘制一个自定义标题栏，并且我已经阅读过，为了在窗口的客户区之外进行绘制，我需要覆盖 WndProc 并处理 WM_NCPAINT 消息。目前，我正在这样做：

```
//WndProc override
virtual void WndProc(Message% m) override
{
    switch(m.Msg)
    {
        case 0x85:  //WM_NCPAINT
        case 0x0A:  //WM_PAINT
            //Call original
            System::Windows::Forms::Form::WndProc(m);

            //Now we'll do our painting
            DrawTitleBar(m.HWnd);

            break;
        default:
            System::Windows::Forms::Form::WndProc(m);
            break;
    }
} 
```

哪个有效，因为我可以在其中设置一个断点并且它会被击中。如果我删除对原始的调用，则不会绘制窗口的框架。`DrawTitleBar`看起来像这样：

```
void DrawTitleBar(IntPtr hWnd)
{
    IntPtr hDC;
    Graphics^ g;

    //Get the device context (DC)
    hDC = GetWindowDC(hWnd);
    //Get the graphics
    g = Graphics::FromHdc(hDC);

    //Draw
    g->FillRectangle(Brushes::Blue, 0, 0, 100, 10);

    //Cleanup
    g->Flush();
    ReleaseDC(hWnd, hDC);
} 
```

我首先从窗口句柄中获取 DC。然后我`Graphics`通过使用`Graphics::FromHdc`. 我用`ReleaseDC`. 如果这里有问题，这就是我导入本机 Win32 函数的方式：

```
[DllImport("user32.dll")]
extern IntPtr GetWindowDC(IntPtr hWnd);
[DllImport("user32.dll")]
extern int ReleaseDC(IntPtr hWnd, IntPtr hDC); 
```

另外：我尝试了很多不同的方法，结果都一样。我可以在网上找到一堆 C# 和 VB 示例，但没有 C++ 示例。我还阅读了有关 Windows Vista 兼容性是这类事情的一个问题。目前，我不在乎这一点，因为我稍后会添加它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-21T03:52:58.050

两个简单的事实。1\. DWM下GetWindowDC本质上是坏的。2\. 部分存在两种解决方法 A. 将兼容模式设置为 xp 或 98 或 95。 B. msdn social 中的程序示例存在。搜索“GetWindowDC broken”，然后跟随一个冗长的 url 到代码示例 [通过添加尾随 ) 来修复损坏的 url]。不幸的是，窗口在我的 box build 9200, win 8.0 上显示为圆角，没有更新。

# wcf - MSE 的替代方案

> ID：11838557
> 
> 赞同：0
> 
> 时间：2012-08-07T02:43:55.300
> 
> 标签：wcf, mse

我发现 MSE（托管服务引擎）使用起来非常困难且缓慢。Microsoft 不再在 MSE 上投入任何精力。无论如何，它从来都不是受支持的项目。MSE 的最佳替代方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T02:53:11.003

我可以将您推荐给[LinkSpan](http://linkspan.therightapi.com/Welcome)和/或[Sentient](http://www.nevatech.com/)。老实说，我是[在访问 codeplex 上的 MSE 页面](http://servicesengine.codeplex.com/)后才发现它们的。

我们选择了 LinkSpan，因为它是由 MSE 的原始作者编写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:39:40.760

LinkSpan 是针对 REST API 的云托管解决方案。Nevatech 的 Sentinet 是服务虚拟化概念的全能量级实现，重点关注 SOAP 和 REST，以及用于本地和云环境。微软 MSE 团队称赞 Sentinet 是 MSE 的继任者，[http://www.prweb.com/releases/2012/5/prweb9483718.htm](http://www.prweb.com/releases/2012/5/prweb9483718.htm)。

# python - Python 对象引用

> ID：11838560
> 
> 赞同：6
> 
> 时间：2012-08-07T02:44:14.653
> 
> 标签：python, python-3.x, python-2.7

我知道在 python 中，每个标识符或变量名都是对实际对象的引用。

```
a = "hello"
b = "hello" 
```

当我比较两个字符串时

```
a == b 
```

输出是

```
True 
```

如果我在 Java 中编写等效代码，则输出将是`false`因为比较是在引用（不同的）而不是实际对象之间进行的。

所以我在这里看到的是引用（变量名）在运行时被解释器替换为实际对象。

所以，我可以安全地假设“每次解释器看到一个已经分配的变量名时，它都会用它所指的对象替换它”？我用谷歌搜索了它，但找不到我正在寻找的任何合适的答案。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-07T02:48:07.710

如果你真的在 Java 中运行它，我想你会发现它可能因为字符串实习而打印出来，但这有点无关紧要。

我不确定您所说的“用它所指的对象替换它”是什么意思。实际发生的情况是，当您编写 时`a == b`，Python会[调用`a.__eq__(b)`](http://docs.python.org/py3k/reference/datamodel.html#object.__lt__)，这就像任何其他方法调用`a`一样`b`作为参数调用。

如果您想要类似 Java 的等价物`==`，请使用`is`运算符：`a is b`。比较名称是否与`a`引用相同的对象`b`，而不管它们是否相等。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-07T02:58:40.027

Python实习：

```
>>> a = "hello"
>>> b = "hello"
>>> c = "world"
>>> id(a)
4299882336
>>> id(b)
4299882336
>>> id(c)
4299882384 
```

短字符串往往会自动停顿，解释了原因`a is b == True`。请参阅[此处](https://stackoverflow.com/questions/1136826/what-does-python-intern-do-and-when-should-it-be-used)了解更多信息。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-07T03:35:46.440

To show that equal strings don't always have the same id

```
>>> a = "hello"+" world"
>>> b = "hello world"
>>> c = a
>>> a == b
True
>>> a is b
False
>>> b is c
False
>>> a is c
True 
```

also:

```
>>> str([]) == str("[]")
True
>>> str([]) is str("[]")
False 
```

# mysql - 使涉及小表和大表的条件 MySQL 连接有效

> ID：11838565
> 
> 赞同：2
> 
> 时间：2012-08-07T02:45:32.163
> 
> 标签：mysql, sql, database

我目前正在尝试执行的 MySQL 查询在功能上等同于：

```
SELECT small_table.A, small_table.B, small_table.C, huge_table.X, huge_table.Y
FROM small_table LEFT JOIN huge_table
ON small_table.D = huge_table.Z
WHERE small_table.E = 'blah' 
```

除了查询似乎没有终止（至少不是在合理的时间内），可能是因为第二个表很大（即 7500 行，总大小为 3 MB）。我可以在合理的时间内执行功能等效的连接，还是需要通过将大表中的列添加到小表中来引入冗余。（我是 SQL 的初学者。）

该子句`WHERE small_table.E = 'blah'`是静态的，`'blah'`永远不会改变。

这是请求的 EXPLAIN 输出：

`Array ( [0] => Array ( [0] => 1 [id] => 1 [1] => SIMPLE [select_type] => SIMPLE [2] => small_table [table] => small_table [3] => ref [type] => ref [4] => E [possible_keys] => E [5] => E [key] => E [6] => 1 [key_len] => 1 [7] => const [ref] => const [8] => 1064 [rows] => 1064 [9] => Using where [Extra] => Using where ) [1] => Array ( [0] => 1 [id] => 1 [1] => SIMPLE [select_type] => SIMPLE [2] => huge_table [table] => huge_table [3] => eq_ref [type] => eq_ref [4] => PRIMARY [possible_keys] => PRIMARY [5] => PRIMARY [key] => PRIMARY [6] => 4 [key_len] => 4 [7] => my_database.small_table.D [ref] => my_database.small_table.D [8] => 1 [rows] => 1 [9] => [Extra] => ) )`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:04:00.730

一些东西 ...

1）您是直接在 MySQL（Workbench GUI 或命令行）中执行此查询，还是此查询嵌入在 PHP 代码中？您的 EXPLAIN 输出似乎建议使用 PHP。如果您还没有这样做，请尝试直接在 MySQL 中执行查询并将 PHP 排除在外。

2）您的 EXPLAIN 输出看起来不错，除了我想知道您的`WHERE`子句与`small_table.E = 'blah'`. EXPLAIN 输出显示列上有索引，`E`但键长度 = 1，这与与`'blah'`. 您为列定义使用了什么数据类型`small_table.E`？

3) MySQL 估计需要扫描 small_table 中的 1064 行。small_table 中总共有多少行，您希望有多少行应该匹配这个特定的查询？

# google-drive-api - 400：上传错误请求

> ID：11838575
> 
> 赞同：2
> 
> 时间：2012-08-07T02:46:33.843
> 
> 标签：google-drive-api

我们有时会收到`BadRequest`请求`insert`。发布的正文值没有任何问题，但我注意到它发生在使用新创建的父级创建文件时。是否有可能是因为创建父文件夹和在其中插入新文件之间的时间非常短，导致我的更改尚未传播并导致插入失败并出现`BadRequest`错误？如果是，还有什么其他原因`BadRequest`可以提出？这是一个通用名称，我不相信它只是针对无效的父错误。我期待的是一个`404`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:22:42.840

每当您收到 400 Bad Request 时，响应还将包含一条描述性错误消息，告诉您请求无效的原因。

对于其他一些 Google Drive 特定错误，请查看[https://developers.google.com/drive/handle-errors上的页面](https://developers.google.com/drive/handle-errors)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T02:32:22.903

我们遇到以下但找不到通用 400 的文档。

```
400 Bad Request 
```

{“代码”：400，“错误”：[{“域”：“全局”，“消息”：“错误请求”，“原因”：“错误请求”}]，“消息”：“错误请求”}

# algorithm - 我应该使用哪种算法在未加权的网格中找到从 A 到 B 的最短路径？

> ID：11838578
> 
> 赞同：0
> 
> 时间：2012-08-07T02:47:32.977
> 
> 标签：algorithm, path-finding

该场景是基于回合的情况，玩家必须从源位置 A 向位置 B 移动，但只能移动最大数量的单位。

例如，B 与 A 相距 24 个单位（使用 BFS 计算），我的得分为 12。如何找到距离 B 仅 12 个运动单位的最佳路径？

笔记：

*   不能对角移动
*   有很大的障碍

**编辑：**这适用于类似于 Clue / Cluedo 的游戏，但只有文本，因此玩家将选择一个“朝向”移动的方向。

这是我尝试过的：

示例网格：（◘ 是障碍物，○ 不是）

```
○○○○○○○○○○
○○○○○○○○◘◘
○○○◘◘◘○○◘◘
○○○◘◘◘○○B◘
○A○◘◘◘○○◘◘ 
```

算法：

```
if paces == 0, return
try moving col closer to dest.col:
    if col == dest.col, move row closer to dest.row
    else if adjacent is blocked, move row away from start 
```

这在纸上可以正常工作，除非我自己跑到角落里：

```
○A→◘◘○○◘◘◘
○○↓◘◘○○B◘◘
○○↓◘◘○○◘◘◘
○○↓◘◘○○↑◘◘
○○↓→→→→→◘◘ 
```

**解决方案：**

```
public ArrayList<Location> shortestPath(final Location start, final Location dest) {
    HashSet<Location> visits = new HashSet<>();
    HashMap<Location, Location> links = new HashMap<>();

    PriorityQueue<Location> queue = new PriorityQueue<>(Board.GRID_COLS * Board.GRID_ROWS,
            new Comparator<Location>() {

                @Override
                public int compare(Location a, Location b) {
                    return Integer.compare(getHeuristic(a, dest), getHeuristic(b, dest));
                }
            });

    queue.add(start);

    while (!queue.isEmpty()) {
        Location current = queue.remove();
        if (current.equals(dest)) {
            ArrayList<Location> path = reconstruct(current, new LinkedList<Location>(), links);
            path.add(dest);
            return path;
        }

        visits.add(current);
        for (Location neighbour : getNeighbours(current)) {
            if (!visits.contains(neighbour)) {
                queue.add(neighbour);
                visits.add(neighbour);
                links.put(neighbour, current);
            }
        }

    }
    return null; // failed
}

// Manhattan distance
private int getHeuristic(Location src, Location dest) {
    return Math.abs(dest.row - src.row) + Math.abs(dest.col - src.col);
}

private ArrayList<Location> reconstruct(Location current, LinkedList<Location> list, HashMap<Location, Location> links) {
    if (links.containsKey(current)) {
        list.addFirst(links.get(current));
        return reconstruct(links.get(current), list, links);
    } else {
        return new ArrayList<>(list);
    }
}

private ArrayList<Location> getNeighbours(Location current) {
    ArrayList<Location> neighbours = new ArrayList<>();

    if (current.row < GRID_ROWS - 1) {
        Location n = LOCATIONS[current.row + 1][current.col];
        if (isAccessible(n, current)) neighbours.add(n);
    }
    if (current.row > 0) {
        Location n = LOCATIONS[current.row - 1][current.col];
        if (isAccessible(n, current)) neighbours.add(n);
    }
    if (current.col < GRID_COLS - 1) {
        Location n = LOCATIONS[current.row][current.col + 1];
        if (isAccessible(n, current)) neighbours.add(n);
    }
    if (current.col > 0) {
        Location n = LOCATIONS[current.row][current.col - 1];
        if (isAccessible(n, current)) neighbours.add(n);

    }
    return neighbours;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T03:18:52.403

听起来对[A*](http://en.wikipedia.org/wiki/A%2a_search_algorithm)来说是一份完美的工作。

在您的图表上，它基本上与广度优先搜索（在算法上）相同，但使用优先级队列*（按 排序`f(x)`）*而不是队列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T05:58:05.317

一些有用的注释，游戏板的左上角应该是坐标(0, 0)。如果您有兴趣只知道一条路径，您可以选择任何返回的路径。最佳步长是路径的长度 - 1，因为路径包括起点。希望它会帮助你。

```
using System;
using System.Collections.Generic;
using System.Drawing;

namespace Game
{
    class Program
    {
        /// <summary>
        /// Find a matrix with all possible optimum paths from point A to point B in the game board
        /// </summary>
        /// <param name="board">Game board</param>
        /// <param name="moves">Allowed moves</param>
        /// <param name="matrix">Resulting matrix</param>
        /// <param name="A">Point A</param>
        /// <param name="B">Point B</param>
        private static void FindMatrix(List<List<char>> board, List<Point> moves, out List<List<int>> matrix, out Point A, out Point B)
        {
            matrix = new List<List<int>>();
            A = new Point(-1, -1);
            B = new Point(-1, -1);
            //Init values of the matrix
            for (int row = 0; row < board.Count; row++)
            {
                matrix.Add(new List<int>());
                for (int col = 0; col < board[row].Count; col++)
                {
                    matrix[matrix.Count - 1].Add(board[row][col] == '◘' ? -1 : 0);
                    switch (board[row][col])
                    {
                        case 'A':
                            {
                                A.X = col;
                                A.Y = row;
                                matrix[row][col] = -1;
                                break;
                            }
                        case 'B':
                            {
                                B.X = col;
                                B.Y = row;
                                break;
                            }
                    }
                }
            }
            if ((A.X >= 0) && (A.Y >= 0) && (B.X >= 0) && (B.Y >= 0)) //To check if points A and B exist in the board
            {
                var pairs = new List<Point>[2] { new List<Point>(), new List<Point>() };
                int index = 0;
                int level = 0;
                pairs[index].Add(A);
                while ((pairs[index].Count > 0) && (pairs[index][pairs[index].Count - 1] != B))
                {
                    pairs[Math.Abs(1 - index)].Clear();
                    level++;
                    foreach (var pair in pairs[index])
                        foreach (var move in moves) //Test all possible moves
                            if ((pair.Y + move.Y >= 0) && (pair.Y + move.Y < board.Count) && (pair.X + move.X >= 0) && (pair.X + move.X < board[pair.Y + move.Y].Count) && (matrix[pair.Y + move.Y][pair.X + move.X] == 0)) //Inside the board? Not visited before?
                            {
                                pairs[Math.Abs(1 - index)].Add(new Point(pair.X + move.X, pair.Y + move.Y));
                                matrix[pair.Y + move.Y][pair.X + move.X] = level;
                            }
                    index = Math.Abs(1 - index);
                }
                matrix[A.Y][A.X] = 0;
            }
        }

        /// <summary>
        /// Finds all possible optimum paths from point A to point B in the game board matix
        /// </summary>
        /// <param name="matrix">Game board matrix</param>
        /// <param name="moves">Allowed moves</param>
        /// <param name="A">Point A</param>
        /// <param name="B">Point B</param>
        /// <param name="result">Resulting optimum paths</param>
        /// <param name="list">Temporary single optimum path</param>
        private static void WalkMatrix(List<List<int>> matrix, List<Point> moves, Point A, Point B, ref List<List<Point>> result, ref List<Point> list)
        {
            if ((list.Count > 0) && (list[list.Count - 1] == B)) //Stop condition
            {
                result.Add(new List<Point>(list));
            }
            else
            {
                foreach (var move in moves)
                    if ((A.Y + move.Y >= 0) && (A.Y + move.Y < matrix.Count) && (A.X + move.X >= 0) && (A.X + move.X < matrix[A.Y + move.Y].Count) && (matrix[A.Y + move.Y][A.X + move.X] == matrix[A.Y][A.X] + 1)) //Inside the board? Next step?
                    {
                        list.Add(new Point(A.X + move.X, A.Y + move.Y)); //Store temporary cell
                        WalkMatrix(matrix, moves, list[list.Count - 1], B, ref result, ref list);
                        list.RemoveAt(list.Count - 1); //Clean temporary cell
                    }
            }
        }

        /// <summary>
        /// Finds all possible optimum paths from point A to point B in the game board
        /// </summary>
        /// <param name="board">Game board</param>
        /// <returns>All possible optimum paths</returns>
        public static List<List<Point>> FindPaths(List<List<char>> board)
        {
            var result = new List<List<Point>>();
            var moves = new List<Point> { new Point(1, 0), new Point(0, 1), new Point(-1, 0), new Point(0, -1) }; //Right, Down, Left, Up (clockwise)
            List<List<int>> matrix; //Matrix temporary representation of the game to store all possible optimum paths
            Point A;
            Point B;
            FindMatrix(board, moves, out matrix, out A, out B);
            if ((A.X >= 0) && (A.Y >= 0) && (B.X >= 0) && (B.Y >= 0)) //To check if points A and B exist in the board
            {
                List<Point> list = new List<Point>();
                list.Add(A);
                WalkMatrix(matrix, moves, A, B, ref result, ref list);
            }
            return result;
        }

        static void Main(string[] args)
        {
            List<List<char>> board = new List<List<char>> //An example of game board
            {
                new List<char>("○○○○○○○○○○"),
                new List<char>("○○○○○○○○◘◘"),
                new List<char>("○○○◘◘◘○○◘◘"),
                new List<char>("○○○◘◘◘○○B◘"),
                new List<char>("○A○◘◘◘○○◘◘")
            };
            List<List<Point>> paths = FindPaths(board);
        }
    }
} 
```

# ruby-on-rails - Rails 引擎的使用

> ID：11838579
> 
> 赞同：0
> 
> 时间：2012-08-07T02:47:48.777
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-engines

全部，

我正在开发一个由多个模块组成的 Rails 应用程序（biz-tools），例如身份验证、业务管理等……我需要一些关于如何将这些模块创建为 gem、插件或引擎的指导/建议？一些要求是：

1.  为客户部署的每个 biz 工具都是特定的。除了身份验证模块（必需）之外，其他模块是可选的（取决于客户需求）。

2.  一些模块可能依赖于其他模块，例如，“business-mgmt”模块将依赖于“authentication”模块

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T02:42:18.523

两个想法

1.  根据应用程序的大小，您可能希望构建整个完整的应用程序，然后根据应用于安装实例的权限禁用功能。

2.  看看[狂欢](https://github.com/spree)。这是一个电子商务解决方案，具有多个配置为 Rails 引擎的扩展。

# c# - 只有赋值、调用、递增、递减和新对象表达式可以用作语句

> ID：11838585
> 
> 赞同：0
> 
> 时间：2012-08-07T02:48:35.173
> 
> 标签：c#

我创建了一个名为 Checker 的类。这是代码：

```
namespace WindowsFormsApplication1
{ 
    public class Checker
    {
        int CheckAdminEdit(Object Temp,int counter,int allow)
        {
            int _counter = counter;
            int _allow = allow;
            Admin _Temp = Temp as Admin;

            foreach (Control c in _Temp.edit_admin.Controls)
            {
                if (c is TextBox)
                {
                    TextBox textBox = c as TextBox;
                    if (textBox.Text.Equals(string.Empty))
                    {
                        _Temp.errorProvider1.SetIconPadding(textBox, 0);
                         _Temp.errorProvider1.SetError(textBox, "Field Empty");
                        _allow++;
                    }
                    else
                    {
                        _Temp.errorProvider1.SetIconPadding(textBox, 666);
                        if (textBox.Name == "textBox6")
                        {
                            if( CheckEmail(textBox.Text))
                                _Temp.errorProvider2.SetIconPadding(textBox, 666);
                            else
                            {
                                _Temp.errorProvider2.SetError(textBox, "Invalid email syntax");
                                _counter++;
                            }
                        }
                    }
                }
            }

            return (allow + counter);
        }

        private bool CheckEmail(string EmailAddress)
        {
            string strPattern = "^([0-9a-zA-Z]([-.\\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\\w]*[0-9a-zA-Z]\\.)+[a-zA-Z]{2,9})$";

            if (System.Text.RegularExpressions.Regex.IsMatch(EmailAddress, strPattern))
                return true;

            return false;
        }
    }
} 
```

在我的表单中，我试图用以下方式声明类：

```
Checker try = new Checker; 
```

但是第一个 Checker 还强调了 try = 符号和 ; 表示只有赋值、调用、递增、递减和新对象表达式可以用作语句。对不起，如果这很难理解，但我非常感谢那些可以提供帮助的人：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T02:54:36.097

您没有使用括号在运算符`()`之后调用构造函数`new`。这就是你得到`Only assignment, call, increment, decrement, and new object expressions can be used as a statement`错误的原因。

此外，try 是一个不能用作变量名的关键字。

你可以这样做

```
Checker @try = new Checker(); 
```

或者

```
Checker _try = new Checker(); 
```

在这种情况下，您将不得不像这样访问它

```
@try._counter = 0; 
```

或者

```
_try._counter = 0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T02:56:02.533

`try`是**关键字**，您应该为对象使用另一个名称（或类似的名称`_try`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T02:56:06.277

尝试这个：

```
Checker _try = new Checker(); 
```

# node.js - 为什么以下 nodejs 代码不适用于 socketio+express 3？

> ID：11838586
> 
> 赞同：1
> 
> 时间：2012-08-07T02:48:40.427
> 
> 标签：node.js

我不明白为什么这不起作用：

我有一个 sample.js 包含：

```
var http = require('http');
var socket = require('socket.io');
var express = require('express');

var app = express();
var server = http.createServer(app);
var io = socket.listen(server);

io.sockets.on('connection', function(client) {
    console.log('Client Connected...');

    client.emit('messages', {hello: 'world'});
});

server.listen(8080); 
```

我有一个 index.html 页面，其中包含：

```
<!DOCTYPE html>
<html>
    <head>
        <script src="socket.io.js"></script>

        <script>
            var server = io.connect('http://mydomain:8080');
            server.on('messages', function(data) {
                alert(data.hello);
            });         
        </script>
    </head>
    <body>
    </body>
</html> 
```

**更新：**使用 socket.io-client.js 库时，当我转到`http://mydomain:8080`页面时，我得到一个“信息 - 未处理的 socket.io url”

有人可以指出我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T03:27:38.867

您的服务器永远不会发送，`index.html`因为您从未告诉过它。你需要类似的东西：

```
app.get('/', function(req, res) {
  res.sendfile('index.html');
}); 
```

假设`index.html`在您的应用程序的根级别，或者更一般地说：

```
app.use(express.static(__DIRNAME+'/public')); 
```

然后将`index.html`（连同任何其他静态文件，如样式表）放在`public`应用程序的子目录中。

# sharepoint - 使子站点页面成为sharepoint中的主页

> ID：11838587
> 
> 赞同：0
> 
> 时间：2012-08-07T02:48:51.423
> 
> 标签：sharepoint

是否可以将子站点页面作为共享点中的主页，而无需访问所有文件存储位置的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:34:09.267

显然，由于某些安全问题，无法直接将子站点设为欢迎页面。可以在主站点中创建一个重定向页面并将其设置为登录页面，然后将用户从那里重定向到子站点。

# android - Android保存工作位图

> ID：11838590
> 
> 赞同：0
> 
> 时间：2012-08-07T02:49:17.727
> 
> 标签：android, canvas, bitmap, save

我有一个从画廊中选择的位图，它正在被编辑，比如贴上贴纸、调整色调、亮度……添加颜色等。它是一个照片编辑应用程序……一切正常，我的最后一个问题是我该怎么做使位图保存，以便进入下一个活动

喜欢，，

在我上次分享你制作的图像的活动中，有一个 imageview，它正在工作，它显示你从画廊导入的位图，但它没有被编辑，就像它显示原始位图而不是我编辑的那个..

当他们单击编辑活动中完成的按钮时我该`currentBitmap`怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T04:30:55.063

尝试这个

```
//create a class in your package
class objectclass{
  public static Bitmap bmp;
}

//save your previous activity bitmap like this
....
objectclass.bmp = b;//your bitmap
....

//use in another activity like this
Bitmap b1 = objectclass.bmp; 
```

希望帮助

# css - 由于容器 div，表单内部的验证没有扩展到全宽

> ID：11838591
> 
> 赞同：0
> 
> 时间：2012-08-07T02:49:29.037
> 
> 标签：css

`label`我对作为标签输出的表单进行了客户端验证。它们以我希望它们的方式显示，但它们的宽度不会自动调整到其中的内容。我相信这是由表单所在的容器的宽度引起的。有人可以帮我解决这个问题吗？这是一个jsFiddle：

[http://jsfiddle.net/4eZY6/3/](http://jsfiddle.net/4eZY6/3/)

如果您专注于，那么您将在字段之外看到验证错误。

将元素的宽度`.home-form-container`从 250px 更改为 450px 可以修复它，但我不希望该元素变宽。这是溢出问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:57:10.523

尝试将消息从“块”更改为“内联块”。这似乎解决了定位问题。

```
.field_with_errors .message { display:inline-block; white-space: nowrap; ... } 
```

块级元素会破坏流（有点像清除浮点数），但 inline-block 会将其保留在它之前的元素的流中，同时保留块级属性。

要防止消息换行，请停止使用`white-space: nowrap`属性换行元素文本。

# jquery - 需要 jquery 语法以在触摸另一个项目时使 slideToggle 消失 - 移动设备

> ID：11838594
> 
> 赞同：0
> 
> 时间：2012-08-07T02:49:56.237
> 
> 标签：jquery, mobile-safari

**编辑 1**
这是关于**触摸事件**。目的是通过一键操作（在移动设备上）-> 扩展，第二次触摸缩回。触摸另一个项目-> 它扩展和先前的缩回。

问题来了：iPad 4.3.3 运行良好。iPhone 5.1 & 6.0 和 Android 4 - 第二次触摸缩回和延伸。不是想要的效果。在此处查看[示例](https://flydata.mobi/bella/)感谢您的关注。

这是 jQuery 或移动操作系统中的错误吗？

```
$(document).ready(function () {   
    if((navigator.userAgent.match(/iPhone|iPod|iPad|Android/i))) {
        $('#nav li').click(function(){
            // attach a click event listener to provoke iPhone/iPod/iPad's hover event
            // Amended the next 3 lines 
            var $this_li = $(this);  
            $('#nav li ul').slideUp(function() {
                $('ul', $this_li).slideDown();
            });
        });
    } else {
        $('#nav li').hover(
            function () {
                //show its submenu
                $('ul', this).slideDown(200);
            }, 
            function () {
                //hide its submenu
                $('ul', this).slideUp(200);         
            }
        ); 
    }  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T03:11:04.230

尝试：

```
var test = 0;
$('#nav li').click(function(){
    if(test == 0) {
        $('ul', this).slideDown();
        test = 1;
    } else {
        $('ul', this).slideUp();
        test = 0;
    }
}); 
```

这是您所说的可以测试的开/关开关

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T03:06:37.777

首先收回**所有**的li，然后在slideup的回调中向下滑动点击的li。这样，在当前 li 被收回后，点击的 li 会向下滑动。

```
$('#nav li').click(function(){  
    var $this_li = $(this);  
    $('#nav li ul').slideUp(function() {
        $('ul', $this_li).slideDown();
    });
});
} else { 
```

ETC

# database - 如何在 Magento 中删除所有目录产品

> ID：11838596
> 
> 赞同：7
> 
> 时间：2012-08-07T02:50:17.640
> 
> 标签：database, magento, import

我正在尝试将产品列表导入到 magento。在第一次测试中，我取得了成功，但产品没有出现在后台或前台。

重做几次导入过程后，我发现我在数据库中有导入的产品，但是仍然没有显示。

如果我访问 de Catalog > Manage Categories > Default Category -> Category Products，我可能会看到导入的产品。

后来，我在我的导入文件中发现了一个错误......我可能会正确导入产品

相反......我在“sku”领域发现了冲突......

那些第一批产品还没有出现，但它们仍在数据库中......

问题：如果我无法访问这些产品，如何删除它们？？？？我可以直接在数据库上这样做吗？删除行会产生其他问题吗？

任何线索将不胜感激！

Magento 版本。1.7.0.1

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-07T22:53:49.040

重置所有产品表。请注意，以下脚本将删除您的所有产品数据，因此请谨慎操作。

```
SET FOREIGN_KEY_CHECKS = 0;
TRUNCATE TABLE `catalog_product_bundle_option`;
TRUNCATE TABLE `catalog_product_bundle_option_value`;
TRUNCATE TABLE `catalog_product_bundle_selection`;
TRUNCATE TABLE `catalog_product_entity_datetime`;
TRUNCATE TABLE `catalog_product_entity_decimal`;
TRUNCATE TABLE `catalog_product_entity_gallery`;
TRUNCATE TABLE `catalog_product_entity_int`;
TRUNCATE TABLE `catalog_product_entity_media_gallery`;
TRUNCATE TABLE `catalog_product_entity_media_gallery_value`;
TRUNCATE TABLE `catalog_product_entity_text`;
TRUNCATE TABLE `catalog_product_entity_tier_price`;
TRUNCATE TABLE `catalog_product_entity_varchar`;
TRUNCATE TABLE `catalog_product_link`;
TRUNCATE TABLE `catalog_product_link_attribute`;
TRUNCATE TABLE `catalog_product_link_attribute_decimal`;
TRUNCATE TABLE `catalog_product_link_attribute_int`;
TRUNCATE TABLE `catalog_product_link_attribute_varchar`;
TRUNCATE TABLE `catalog_product_link_type`;
TRUNCATE TABLE `catalog_product_option`;
TRUNCATE TABLE `catalog_product_option_price`;
TRUNCATE TABLE `catalog_product_option_title`;
TRUNCATE TABLE `catalog_product_option_type_price`;
TRUNCATE TABLE `catalog_product_option_type_title`;
TRUNCATE TABLE `catalog_product_option_type_value`;
TRUNCATE TABLE `catalog_product_super_attribute`;
TRUNCATE TABLE `catalog_product_super_attribute_label`;
TRUNCATE TABLE `catalog_product_super_attribute_pricing`;
TRUNCATE TABLE `catalog_product_super_link`;
TRUNCATE TABLE `catalog_product_enabled_index`;
TRUNCATE TABLE `catalog_product_website`;
TRUNCATE TABLE `catalog_product_entity`;
TRUNCATE TABLE `cataloginventory_stock`;
TRUNCATE TABLE `cataloginventory_stock_item`;
TRUNCATE TABLE `cataloginventory_stock_status`;
TRUNCATE TABLE `catalog_product_link`;
TRUNCATE TABLE `catalog_product_link_type`;
TRUNCATE TABLE `catalog_product_option`;
TRUNCATE TABLE `catalog_product_option_type_value`;
TRUNCATE TABLE `catalog_product_super_attribute`;
TRUNCATE TABLE `catalog_product_entity`;
TRUNCATE TABLE `cataloginventory_stock`;
TRUNCATE TABLE `catalog_category_product`;
DELETE FROM catalog_product_flat_1;
DELETE FROM catalog_product_flat_10;
DELETE FROM catalog_product_flat_11;
DELETE FROM catalog_product_flat_12;
DELETE FROM catalog_product_flat_13;
DELETE FROM catalog_product_flat_14;
DELETE FROM catalog_product_flat_15;
DELETE FROM catalog_product_flat_16;
DELETE FROM catalog_product_flat_17;
DELETE FROM catalog_product_flat_18;
DELETE FROM catalog_product_flat_19;
DELETE FROM catalog_product_flat_2;
DELETE FROM catalog_product_flat_20;
DELETE FROM catalog_product_flat_21;
DELETE FROM catalog_product_flat_22;
DELETE FROM catalog_product_flat_23;
DELETE FROM catalog_product_flat_24;
DELETE FROM catalog_product_flat_25;
DELETE FROM catalog_product_flat_26;
DELETE FROM catalog_product_flat_27;
DELETE FROM catalog_product_flat_28;
DELETE FROM catalog_product_flat_29;
DELETE FROM catalog_product_flat_3;
DELETE FROM catalog_product_flat_30;
DELETE FROM catalog_product_flat_31;
DELETE FROM catalog_product_flat_32;
DELETE FROM catalog_product_flat_33;
DELETE FROM catalog_product_flat_34;
DELETE FROM catalog_product_flat_35;
DELETE FROM catalog_product_flat_36;
DELETE FROM catalog_product_flat_37;
DELETE FROM catalog_product_flat_4;
DELETE FROM catalog_product_flat_5;
DELETE FROM catalog_product_flat_6;
DELETE FROM catalog_product_flat_7;
DELETE FROM catalog_product_flat_8;
DELETE FROM catalog_product_flat_9;
SET FOREIGN_KEY_CHECKS = 1;

insert  into `catalog_product_link_type`(`link_type_id`,`code`) values (1,'relation'),(2,'bundle'),(3,'super'),(4,'up_sell'),(5,'cross_sell');
insert  into `catalog_product_link_attribute`(`product_link_attribute_id`,`link_type_id`,`product_link_attribute_code`,`data_type`) values (1,2,'qty','decimal'),(2,1,'position','int'),(3,4,'position','int'),(4,5,'position','int'),(6,1,'qty','decimal'),(7,3,'position','int'),(8,3,'qty','decimal');
insert  into `cataloginventory_stock`(`stock_id`,`stock_name`) values (1,'Default'); 
```

运行上述查询后，您可能需要重新索引所有索引。

`System > Index Management > Reindex all`

[http://ka.lpe.sh/2012/08/09/magento-how-to-delete-remove-all-products-from-all-categories/](http://ka.lpe.sh/2012/08/09/magento-how-to-delete-remove-all-products-from-all-categories/)

玩得开心！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-09T08:04:33.567

使用 SQL 查询删除产品不是 Magento 的方式，我建议不要这样做。如此处所述，它可能会导致数据库损坏或外键索引/约束出现[问题](https://gist.github.com/cgdangelo/2175558)。

每个有兴趣在 Magento 中使用正确、安全且快速的方法来更改事物的人都应该始终使用 Magento 的 ORM 函数。

在这种情况下，这将在 php 脚本中。

```
Mage::getModel('catalog/product')->getCollection()->delete(); 
```

这是 Magento 中唯一安全的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-25T10:48:50.203

您可以使用 Direct Sql 删除所有产品。

请备份您的数据库，然后运行以下 sql 查询。

重置所有产品表。请注意，以下脚本将删除您的所有产品数据，因此请谨慎操作。

```
`SET FOREIGN_KEY_CHECKS = 0;
TRUNCATE TABLE `catalog_product_bundle_option`;
TRUNCATE TABLE `catalog_product_bundle_option_value`;
TRUNCATE TABLE `catalog_product_bundle_selection`;
TRUNCATE TABLE `catalog_product_entity_datetime`;
TRUNCATE TABLE `catalog_product_entity_decimal`;
TRUNCATE TABLE `catalog_product_entity_gallery`;
TRUNCATE TABLE `catalog_product_entity_int`;
TRUNCATE TABLE `catalog_product_entity_media_gallery`;
TRUNCATE TABLE `catalog_product_entity_media_gallery_value`;
TRUNCATE TABLE `catalog_product_entity_text`;
TRUNCATE TABLE `catalog_product_entity_tier_price`;
TRUNCATE TABLE `catalog_product_entity_varchar`;
TRUNCATE TABLE `catalog_product_link`;
TRUNCATE TABLE `catalog_product_link_attribute`;
TRUNCATE TABLE `catalog_product_link_attribute_decimal`;
TRUNCATE TABLE `catalog_product_link_attribute_int`;
TRUNCATE TABLE `catalog_product_link_attribute_varchar`;
TRUNCATE TABLE `catalog_product_link_type`;
TRUNCATE TABLE `catalog_product_option`;
TRUNCATE TABLE `catalog_product_option_price`;
TRUNCATE TABLE `catalog_product_option_title`;
TRUNCATE TABLE `catalog_product_option_type_price`;
TRUNCATE TABLE `catalog_product_option_type_title`;
TRUNCATE TABLE `catalog_product_option_type_value`;
TRUNCATE TABLE `catalog_product_super_attribute`;
TRUNCATE TABLE `catalog_product_super_attribute_label`;
TRUNCATE TABLE `catalog_product_super_attribute_pricing`;
TRUNCATE TABLE `catalog_product_super_link`;
TRUNCATE TABLE `catalog_product_enabled_index`;
TRUNCATE TABLE `catalog_product_website`;
TRUNCATE TABLE `catalog_product_entity`;
TRUNCATE TABLE `cataloginventory_stock`;
TRUNCATE TABLE `cataloginventory_stock_item`;
TRUNCATE TABLE `cataloginventory_stock_status`;
INSERT INTO `catalog_product_link_type` VALUES(1, 'relation');
INSERT INTO `catalog_product_link_type` VALUES(3, 'super');
INSERT INTO `catalog_product_link_type` VALUES(4, 'up_sell');
INSERT INTO `catalog_product_link_type` VALUES(5, 'cross_sell');
INSERT INTO `catalog_product_link_attribute` VALUES(1, 1, 'position', 'int');
INSERT INTO `catalog_product_link_attribute` VALUES(2, 3, 'position', 'int');
INSERT INTO `catalog_product_link_attribute` VALUES(3, 3, 'qty', 'decimal');
INSERT INTO `catalog_product_link_attribute` VALUES(4, 4, 'position', 'int');
INSERT INTO `catalog_product_link_attribute` VALUES(5, 5, 'position', 'int');
INSERT INTO `cataloginventory_stock` VALUES(1, 'Default');
SET FOREIGN_KEY_CHECKS = 1;`

**Remove the Product counts from category at back-end**

`SET FOREIGN_KEY_CHECKS = 0;
TRUNCATE TABLE `catalog_category_product`;
TRUNCATE TABLE `catalog_category_product_index`;
SET FOREIGN_KEY_CHECKS = 1;`

**Remove the Bestseller and Most view Products at Dashboards**

`SET FOREIGN_KEY_CHECKS = 0;
TRUNCATE TABLE `report_compared_product_index`;
TRUNCATE TABLE `report_viewed_product_aggregated_daily`;
TRUNCATE TABLE `report_viewed_product_aggregated_monthly`;
TRUNCATE TABLE `report_viewed_product_aggregated_yearly`;
TRUNCATE TABLE `report_viewed_product_index`;
TRUNCATE TABLE `sales_bestsellers_aggregated_daily`;
TRUNCATE TABLE `sales_bestsellers_aggregated_monthly`;
TRUNCATE TABLE `sales_bestsellers_aggregated_yearly`;
SET FOREIGN_KEY_CHECKS = 1;`

**Flush all the flat table of products**

`SET FOREIGN_KEY_CHECKS = 0;
DELETE FROM catalog_product_flat_1;
DELETE FROM catalog_product_flat_2;
DELETE FROM catalog_product_flat_3;
DELETE FROM catalog_product_flat_4;
DELETE FROM catalog_product_flat_5;
SET FOREIGN_KEY_CHECKS = 1;`

**Remove the review and rating of products**

`SET FOREIGN_KEY_CHECKS = 0;
TRUNCATE table `rating_option_vote`; 
TRUNCATE table `rating_option_vote_aggregated`;
TRUNCATE table `review`; 
TRUNCATE table `review_detail`; 
TRUNCATE table `review_entity_summary`; 
TRUNCATE table `review_store`;
SET FOREIGN_KEY_CHECKS = 1;`

**For enterprise flush the following tables**

`SET FOREIGN_KEY_CHECKS = 0;
TRUNCATE TABLE `catalog_category_flat_cl`;
TRUNCATE TABLE `catalog_category_product_cat_cl`;
TRUNCATE TABLE `catalog_category_product_index_cl`;
TRUNCATE TABLE `catalog_product_flat_cl`;
TRUNCATE TABLE `catalog_product_index_price_cl`;
TRUNCATE TABLE `cataloginventory_stock_status_cl`;
TRUNCATE TABLE `catalogsearch_fulltext_cl`;
SET FOREIGN_KEY_CHECKS = 1;` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-01T19:53:41.483

您还需要添加：

```
TRUNCATE TABLE catalog_product_entity; 
```

否则你会得到完整性约束错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-02T05:39:19.233

Kalpesh Mehta 给出的答案完美无缺。

但是在您删除所有产品后，导入一堆新产品并尝试使用管理 UI 将其删除，您可能会出现如下错误：

> SQLSTATE [22003]：数值超出范围：1690 BIGINT UNSIGNED 值超出“（...- `magento_store`1 `q`）`items_count`”的范围

所以，这篇文章对我帮助很大：[Magento 删除产品 BIGINT UNSIGNED value is out of range](http://www.pkdavies.co.uk/162-magento-deleting-product-bigint-unsigned-value-is-out-of-range.html)

它提供了几个解决问题的选项，第一个在我的案例中有效：

```
DELETE FROM sales_flat_quote WHERE updated_at < DATE_SUB(Now(),INTERVAL 30 DAY); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-16T08:44:44.090

**使用您的 SQL-Sql 脚本，我打破了我的价格指数。** 发生这种情况是因为我们在商店中使用团体价格。每次我尝试重新索引索引“catalog_product_price”时都会发生以下错误：

```
SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails     (`db`.`catalog_product_index_group_price`, CONSTRAINT `FK_CAT_PRD_IDX_GROUP_PRICE_ENTT_ID_CAT_PRD_ENTT_ENTT_ID` FOREIGN KEY (`entity_id`) REFERENCES `catalog_product_entity` (`entity_id`), query was: INSERT INTO `catalog_product_index_group_price` SELECT `gp`.`entity_id`, `cg`.`customer_group_id`, `cw`.`website_id`, MIN(IF(gp.website_id = 0, ROUND(gp.value * cwd.rate, 4), gp.value)) FROM `catalog_product_entity_group_price` AS `gp`
 INNER JOIN `customer_group` AS `cg` ON gp.all_groups = 1 OR (gp.all_groups = 0 AND gp.customer_group_id = cg.customer_group_id)
 INNER JOIN `core_website` AS `cw` ON gp.website_id = 0 OR gp.website_id = cw.website_id
 INNER JOIN `catalog_product_index_website` AS `cwd` ON cw.website_id = cwd.website_id WHERE (cw.website_id != 0) GROUP BY `gp`.`entity_id`,
        `cg`.`customer_group_id`,
        `cw`.`website_id` ON DUPLICATE KEY UPDATE `price` = VALUES(`price`) 
```

请添加以下行：

```
TRUNCATE TABLE `catalog_product_entity_group_price`; 
```

# linux - 在字符串外带有 $ 字符的 Bash 回显

> ID：11838597
> 
> 赞同：2
> 
> 时间：2012-08-07T02:50:30.130
> 
> 标签：linux, bash, echo

谁能解释一下有什么区别

```
echo $"Starting $CMD" 
```

和

```
echo "String $CMD" 
```

它们看起来一样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T03:00:38.673

查找手册页的`QUOTING`部分：`bash`

> 形式的词`$'string'`被特殊对待。该单词扩展为字符串，并按照 ANSI C 标准的规定替换反斜杠转义字符。反斜杠转义序列（如果存在）按如下方式解码：
> 
> *   \一个警报（铃）
> *   \b 退格
> *   \e 转义字符
> *   \f 换页
> *   \n 换行
> *   \r 回车
> *   \t 水平制表符
> *   \v 垂直制表符
> *   \ 反斜杠
> *   \' 单引号
> *   \nnn 八位字符，其值为八进制值 nnn（一到三位）
> *   \xHH 八位字符，其值为十六进制值 HH（一个或两个十六进制数字）
> *   \cx 一个 control-x 字符
> 
> 扩展的结果是单引号的，就好像美元符号不存在一样。

`$`请注意以下以( )开头的双引号字符串`$"string"`：

> 以美元符号 ($) 开头的双引号字符串将导致根据当前语言环境翻译该字符串。如果当前语言环境是 C 或 POSIX，则忽略美元符号。如果字符串被翻译和替换，则替换是双引号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T02:57:15.513

`$""`是一种用于语言翻译的引用形式。如果您使用该`-D`标志调用 bash，它将打印出所有此类字符串。当语言环境是`C`or`POSIX`时，这种形式的引用不会做任何事情。

这些字符串用于`gettext`查找适当的翻译。例如，如果您的脚本有字符串`$"Hello, World"`，并且您已经正确安装了 MO 文件以将该字符串翻译成法语，那么您可以这样执行您的脚本：

```
LANGUAGE=fr_FR ./yourscript 
```

并期望 的所有实例都`$"Hello, World"`输出为*Bonjour, Tout le Monde*（假设这是您的翻译文件中的实际内容）。

翻译不是魔术或自动的，因此[您必须向翻译引擎提供它还没有的任何翻译字符串](http://mywiki.wooledge.org/BashFAQ/098#Translate_the_strings)。

（PS - 我链接的指南确实提到[了这个安全漏洞](http://www.gnu.org/software/gettext/manual/html_node/bash.html)，但是如果你略读一下，你可能会错过它，所以我在这里再次强调它。）

# r - 更改默认参数值内置 R 函数

> ID：11838599
> 
> 赞同：0
> 
> 时间：2012-08-07T02:50:48.490
> 
> 标签：r

> **可能重复：**
> [在项目特定的基础上设置函数默认值 R](https://stackoverflow.com/questions/9073912/setting-function-defaults-r-on-a-project-specific-basis)

当我像这样调用内置函数表时，我希望这样：

```
table(x) 
```

结果与我调用的结果相同：

```
table(x, useNA='ifany') 
```

即我不想每次调用这个函数时都明确设置参数'useNA'。

更一般地说，我们如何指定内置函数的默认行为？

# java - 为什么在 Applet 中调用“repaint()”而不是直接调用“paint(..)”？

> ID：11838603
> 
> 赞同：3
> 
> 时间：2012-08-07T02:51:25.213
> 
> 标签：java, swing, applet, awt, repaint

我们像这样覆盖paint方法

```
public void paint(Graphics g)
{
   g.drawString(msg,xpos,ypos);
} 
```

如果我们有另一种方法，可以说一个 mousepressed 事件方法

```
public void mousePressed(MouseEvent me)    
    {
        xpos=me.getX();  // msg, xpos and ypos are variables of class
        ypos= me.getY();
        msg="You pressed mouse";
        repaint();
    } 
```

为什么我们不能叫paint`(Graphics g)`而不是`repaint()`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-07T02:58:51.330

你应该试试看。你会注意到

1.  您将不得不以某种方式获取`Graphics`对象`g`。
2.  调用事件处理程序的主体不是最佳实践，因为它会导致该方法的主体立即在 GUI 线程上执行，因此在返回`paint`之前无法处理更多事件。`paint`OTOH，`repaint`将绘制事件安排在将来某个方便的时间点发生，并且不会使 GUI 看起来挂起。当然，在你的情况下，`drawString`并不是非常慢，但总的来说......

[这是关于绘画的经典文章](http://java.sun.com/products/jfc/tsc/articles/painting/index.html)，来自 Java 人自己。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-07T03:00:07.797

调用 repaint() 不一定会立即导致调用 paint()。它要求安排一个呼叫。

您通常应该调用重绘而不是绘制，以便 GUI 框架可以正确安排重绘。它将做一些事情，例如确保在正确的线程上调用绘制，并且如果它们发生在框架开始进行实际绘制之前，则有机会合并多个重新绘制调用。

调用 repaint 会更加健壮。

# c# - 在特定坐标中绘制图像

> ID：11838605
> 
> 赞同：0
> 
> 时间：2012-08-07T02:51:38.553
> 
> 标签：c#, opencv, emgucv

我想在 EMGU CV 中制作一个像[http://andybest.net/2009/02/processing-opencv-tutorial-2-bubbles/这样的应用程序](http://andybest.net/2009/02/processing-opencv-tutorial-2-bubbles/)

问题是，我不知道如何在 emgu CV 中的特定坐标中绘制多个图像（或在捕获的图像/视频上覆盖多个图像）

任何帮助，将不胜感激...

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:17:47.423

可以用来混合几个图像的最简单的方法是使用 emgucv 中的 AddWeighted 函数。

有关整体介绍，请查看 opencv[图像添加](http://docs.opencv.org/doc/tutorials/core/adding_images/adding_images.html)教程。这里有几个可能对您有帮助的 c# 行代码：

```
 Image<Gray,Byte> result = new Image<Gray,Byte>(source.Size);
    CvInvoke.cvAddWeighted(source, movementFactor, overlay, 1.0-movementFactor, 0.0, result); 
```

# php - php curl 发布大数据

> ID：11838606
> 
> 赞同：0
> 
> 时间：2012-08-07T02:51:41.703
> 
> 标签：php, post, curl, nginx

我正在使用 php5-curl 发布大约 1M 的大数据。
当我收到发布数据时。它有时会正确，但有时会丢失一些数据。
例如
，我发布到

```
http://www.example.com/upload  
post data  
md5=769ab98787e897f89e&data={large data and urlencode} 
```

md5 字段是数据的 md5。
但是当我收到数据并计算 md5 时。有时不正确。

我将 nginx 作为 Web 服务器运行，将 php-fpm 作为 FastCGI 运行。
我已经添加

```
 client_max_body_size 10m; 
```

到 nginx.conf

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T09:47:35.837

您可能将二进制数据与[urlencode()](http://www.php.net/urlencode)一起使用。
尝试使用[base64_encode()](http://www.php.net/manual/en/function.base64-encode.php)之前。

> 这种编码旨在使二进制数据能够通过非 8 位干净的传输层进行传输。
> 
> 注意：Base64 编码的数据比原始数据多占用大约 33% 的空间。

# c++ - 如果缓冲区正在被数据流填充，c++ boost 会被缓冲区阻塞吗？

> ID：11838607
> 
> 赞同：1
> 
> 时间：2012-08-07T02:51:42.343
> 
> 标签：c++, boost-asio

例如，如果服务器正在向我的 tcp 客户端发送一个比特流数据包，并且我开始使用 async_read_some 来检索它。

此 async_read_some 操作是否可能仅从缓冲区中检索部分数据包，或者缓冲区是可变的，因此 async_read_some 将被阻塞，直到此数据包流完全到达？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T01:27:44.557

对于 TCP，async_read_some 可能只检索部分流，并且没有用户程序意义上的阻塞。

# c++ - 如何使用运行时选择 base-ctor 来初始化不可复制的基类

> ID：11838608
> 
> 赞同：0
> 
> 时间：2012-08-07T02:51:42.427
> 
> 标签：c++, inheritance, dynamic, constructor, initialization

我可以用这个技巧破坏基类并在派生中重新创建它吗？

```
class base: noncopyable
{
    base();         //ctor with none param
    base(int x);    //ctor with one param
    base(int x, int y); //ctor with two param

    virtual ~base();
}

struct params
{
    int x;
    int y;
    enum 
    {
        typeNoneParam,  //neither x nor y is defined
        typeOneParam,   //only x is defined
        typeTwoParam    //x and y both are defined
    }typeParam;
}

class Derived
{
    Derived(params p);  //construct base class conditionally by p.typeParam
}

Derived::Derived(params p)
    :base() //default typeNoneParam
{
    //typeNoneParam need not do special process

    if (p.typeParam == params::typeOneParam)
    {
        base::~base();  //delete the default-typeNoneParam creation by base-dtor
        base(p.x);      //recreate the new base with one-param base-ctor
    }
    if (p.typeParam == params::typeOneParam)
    {
        base::~base();  //delete the default-typeNoneParam creation by base-dtor
        base(p.x, p.y); //recreate the new base with two-param base-ctor
    }
} 
```

类派生和基类的所有声明都不能改变，结构参数也不能改变。

只有派生类的实现是允许更改的。

任何人都可以给出关于实施正确的想法吗？任何其他更温和的实现都可以很好地满足这种情况（使用动态选择 base-ctor 初始化不可复制的基类）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:16:00.000

在这种情况下，我会向您的派生类添加一个静态工厂函数（可选地使您的构造函数受到保护）。您可以将开关放在`typeParam`那里并使用正确的构造函数创建您的对象。您将需要在派生类中有三个构造函数，每个枚举条目一个。

这将在没有黑客攻击的情况下提供正确的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T02:55:42.857

Derived 类构造函数依赖于首先构造的有效基类对象。通过破坏 Base 类，我几乎可以肯定你正在与未定义的行为调情。例如，您可能会看到这体现在虚函数上。

正确的做法是让 Derived 类将参数作为初始化列表的一部分传递给 Base 类构造函数：

```
Derived(params p) : base(p) {}; 
```

# button - 按下通过插入 HTML 创建的按钮

> ID：11838613
> 
> 赞同：0
> 
> 时间：2012-08-07T02:52:37.167
> 
> 标签：button, insert

我正在使用存储在数据库中的数据编译元素的无序列表。值 'qid' 与单独的 div 元素相关联；我有它，以便在单击 div 时执行以下代码：

```
var liststring =
        '<li id="'+qid+'">'+
            '<button type="button" class="del" onclick="deleteQuestion(\''+qid+'\');" >X</button>'+
        '</li>';
$('ul').append(liststring); 
```

这给出了工作的每一个外观；列表项和按钮出现。但是，如果我在不刷新页面的情况下单击插入的按钮之一，则该按钮根本不起作用，并且我在代码的第 1 行收到此错误，其中我有 doctype 声明：

```
<!DOCTYPE html> 
```

Uncaught SyntaxError: Unexpected Token ILLEGAL

但是，一旦我刷新页面（列表保持不变），按钮就会起作用。我用铬。

我不确定发生了什么；我在另一个线程中阅读了有关不可见字符的信息，但我在编辑器 Notepad++ 中查找了它们，但没有找到。

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T03:22:35.387

尝试这个：

```
var liststring =
        '<li id="'+qid+'">'+
            '<button type="button" class="del" >X</button>'+
        '</li>';
$(liststring).click(function(){
    deleteQuestion(qid);
});
$('ul').append(liststring); 
```

# php - 使用分页类限制我的 sql 查询的问题

> ID：11838617
> 
> 赞同：0
> 
> 时间：2012-08-07T02:52:52.787
> 
> 标签：php, pagination

```
<?php
/****************************************************************************
* paging.class.php v 1.0
*
* version 1.0
*
* This script allow to generate dynamically navigation of pages on your web site
* It is easy to configure and use this paging class
*
* ----------------------------------------------------------------
*
* You can find examples in the index.php script (with this package)
*

Copyright (C) 2010 Deyan Spasov <deyan@e7studio.com>

*******************************************************************************/

class paging {

    public $showPagesNumber = true;     //Show page number     Example: Page 1 of 20
    public $showPagesForm = true;           //If you want to use pages form. The system show form with input field and go button
    public $showFirstAndLast = true;    //If you have paging buttons first page and last page
    public $showPrevAndNext = true;     //If you have paging button previous page and next page
    public $numberOfPages = 7;              //Set the number of shown pages

    public $pagingClass = 'paging';             //Set css class of your paging
    public $pagingFirstText = '&laquo;';    //Set text of first button
    public $pagingLastText = '&raquo;';     //Set text of last button
    public $pagingPrevText = '&lsaquo;';    //Set text of previous button
    public $pagingNextText = '&rsaquo;';    //Set text of next button
    public $pagingPageText = 'Page';            //Set page text
    public $pagingPageOfText = 'of';            //Set of text
    public $pagingFormButtonText = 'Go';    //Set text of form button

    /*
        Generate standart navigation
        example: generate('?page=', '&category=1', 5, 10, 100)      
        result:  « ‹ 1 2 3 4 5 6 7 8 9 10 › »

        @access public

        @parameters
            $frontUrl - Set the url before page number
            $backUrl  - Set the url after page number
            $currentPage - Set the current page number
            $rowsPerPage - Set how many rows you show on page
            $allRows  - Set the number of all rows that you have

        @return string with paging HTML source code
    */
    public function generate($frontUrl, $backUrl, $currentPage, $rowsPerPage, $allRows) {

        if($allRows <= $rowsPerPage) {
            return '';
        }

        $pages = ceil ( $allRows / $rowsPerPage );

        settype($currentPage, "int");

        if($currentPage < 1 || $currentPage > $pages) {
            $currentPage = 1;
        }

        $paging = '<div class="'.$this->pagingClass.'">';

        if ($currentPage > 2 && $this->showFirstAndLast) {
            $paging .= '<a href="' . $frontUrl . '1' . $backUrl . '" title="First page" class="arrows">'.$this->pagingFirstText.'</a>';
        }

        if ($currentPage > 1 && $this->showPrevAndNext) {
            $paging .= '<a href="' . $frontUrl . '' . ($currentPage - 1) . '' . $backUrl . '" title="Previous page" class="arrows">'.$this->pagingPrevText.'</a>';
        }

        $halfPages = $this->numberOfPages / 2;
        settype($halfPages, 'int');

        if($pages > $this->numberOfPages) {
            if($currentPage == 1) {
                for($i = 1; $i <= $this->numberOfPages; $i ++)
                    $paging .= '<a href="' . $frontUrl . '' . $i . '' . $backUrl . '" ' . (($i == $currentPage) ? ' class="selected"' : ' class="normal"') . '>' . $i . '</a>';
            } elseif ($currentPage == $pages) {
                for($i = $pages - $this->numberOfPages + 1; $i <= $pages; $i ++)
                    $paging .= '<a href="' . $frontUrl . '' . $i . '' . $backUrl . '" ' . (($i == $currentPage) ? ' class="selected"' : ' class="normal"') . '>' . $i . '</a>';
            } else {
                $start = $currentPage - $halfPages;

                if($start == 0) {
                    $start = 1;
                }

                if($start < 1) {
                    $start_at = 1;
                    $end = (- 1) * $start + $halfPages + $currentPage;
                } else {
                    $start_at = $start;
                    $end = $start_at + $this->numberOfPages - 1;
                    if ($end > $pages) {
                        $start_at = $start_at - ($end - $pages);
                        $end = $pages;
                    }
                }

                for($i = $start_at; $i <= $end; $i ++)
                    $paging .= '<a href="' . $frontUrl . '' . $i . '' . $backUrl . '" ' . (($i == $currentPage) ? ' class="selected"' : ' class="normal"') . '>' . $i . '</a>';
            }
        } else {
            for($i = 1; $i <= $pages; $i ++)
                $paging .= '<a href="' . $frontUrl . '' . $i . '' . $backUrl . '" ' . (($i == $currentPage) ? ' class="selected"' : ' class="normal"') . '>' . $i . '</a>';
        }

        if($currentPage < $pages && $this->showPrevAndNext) {
            $paging .= '<a href="' . $frontUrl . '' . ($currentPage + 1) . '' . $backUrl . '"  title="Next page" class="arrows">'.$this->pagingNextText.'</a>';
        }

        if($currentPage + 1 < $pages && $this->showFirstAndLast) {
            $paging .= '<a href="' . $frontUrl . '' . $pages . '' . $backUrl . '" title="Last page" class="arrows">'.$this->pagingLastText.'</a>';
        }

        if($this->showPagesForm) {
            $paging .= '<form method="post" action="" class="page_form">'.$this->pagingPageText.' <input type="text" name="page" value="" /> <button type="submit" name="go_page">'.$this->pagingFormButtonText.'</button></form>';
        }

        if($this->showPagesNumber) {
            $paging .= '<div class="page_numbers">'.$this->pagingPageText.' '.$currentPage.' '.$this->pagingPageOfText.' '.$pages.'</div>';
        }

        $paging .= '<div style="clear: both"></div>';

        return $paging . "</div>";
    }

}

?> 
```

我有这个 php 分页类，我想不出一种方法来限制我的 SQL 查询。这会很好地生成分页按钮，但不知道如何限制我的查询输出。另外，我将如何在我的 url 中使用这个类和其他变量。因为这个不支持它我不认为。像。

mypage.php?status=pending&page=4

这是我的“工作”页面中的内容。

```
<?php 

require_once('classes/class.paging.php');

// PAGINATION STUFF
$ordercount1 = mysql_query("SELECT * from orders WHERE technumber='$myuserid'");
$ordercount2 = mysql_num_rows($ordercount1);

// echo $ordercount2;

    $pagingClass = new paging();

    $limit = 10;        //Number of rows that we show on page
    $allRows = $ordercount2;    //Number of all rows that we have

    if(isset($_POST['page'])) {
        $_GET['page'] = $_POST['page'];
    }

    if(!isset($_GET['page']) || !is_numeric($_GET['page'])) {
        $_GET['page'] = 1;
    }

    //We off the page number
    $pagingClass->showPagesNumber = false;
    $pagingClass->showPagesForm = false;
    $pagingClass->numberOfPages = 10;
    echo $pagingClass->generate('?page=', '', $_GET['page'], $limit, $allRows);

// END PAGINATION STUFF

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:30:05.723

*   您提供的链接显示了用法：

    $pages = 新分页器；
    $pages->items_total = $num_rows[0];
    $pages->mid_range = 9;
    $pages->分页（）；
    回声 $pages->display_pages();

在此示例`9`中是您选择的结果`select count(1) from...`总数，在您使用 Paginator 之前使用以便找到此数字（结果总数）。

*   至于 POST/GET 参数：在调用参数的分页器循环并将它们保存到字符串之前：

`foreach($_GET as $key=> $val){ $str .= "$key=$val&";}`

然后在每次创建`HREF`例如更改时覆盖该类：

```
"href=\"{$_SERVER[PHP_SELF]}?page=$i&ipp=$this->items_per_page\">$i</a> "; 
```

到：

```
"href=\"{$_SERVER[PHP_SELF]}?" . $str . "page=$i&ipp=$this->items_per_page\">$i</a> "; 
```

# wcf - 在 WCF 中跨域使用 kerberos 委派并传递 ClientCredentials

> ID：11838618
> 
> 赞同：5
> 
> 时间：2012-08-07T02:53:03.333
> 
> 标签：wcf, cross-domain, kerberos, delegation

我在一个域 (Domain1) 中有一个客户端应用程序，它需要访问另一个域 (Domain2) 中的应用程序服务器上的 WCF 服务（没有信任）。用户必须将他们的 Domain2 凭据输入到客户端应用程序中。此 WCF 服务需要连接到 Domain2 中另一台服务器上的数据库。

我使用 ChannelFactory.Credentials.Windows.ClientCredential 传递凭据。我已经为用户和应用服务器（也是数据库服务器，但我认为没有必要）启用了委派。我已经在他们的应用程序配置中为委托设置了服务器和客户端。然而，当它连接时，它似乎只在访问应用程序服务器时使用模拟（而不是委托），所以我从数据库中收到了一个匿名访问错误。

我怀疑这可能是因为您不能跨域使用 kerberos 委派。所以我尝试在 Domain2 中运行客户端应用程序并得到同样的错误。但是，当我取出凭据设置（使用 ChannelFactory.Credentials.Windows.ClientCredential）并在 Domain2 中运行客户端（因此它将使用登录的用户凭据）时，它就可以工作了。

在我看来，这可能是因为它没有将 kerberos 令牌传递给 WCF 服务，而是传递了用户名和密码。但它肯定应该能够将用户名和密码传递给 Web 服务并连接，然后在该域中进行身份验证吗？

我环顾四周，但没有发现其他任何人在使用 ClientCredentials 的跨域委派方面遇到此问题。

希望有人可以帮助我。

# ios - 使用分页从 NSArray 创建多个 UIButton

> ID：11838626
> 
> 赞同：0
> 
> 时间：2012-08-07T02:54:47.240
> 
> 标签：ios, xcode, arrays, uiviewcontroller, uibutton

我正在尝试创建一个 iPhone 应用程序，为 NSArray 中的每个项目创建一个 UIButton。所以基本上，如果数组中有 20 个项目，则会创建 20 个 UIButton，每个按钮都有一个标识符，该标识符以某种方式将其连接到数组中的相应项目。如果我要向数组中添加另一个项目，将创建 21 个按钮而不是 20 个。有没有办法使用 Storyboards 和 Interface Builder 来做到这一点？

另外，有没有办法对创建的 UIButtons 进行分页？我想在屏幕上有六个按钮，可以选择滚动到下一个 6。因此，如果数组中有 20 个项目，它将创建一个 ScrollView，前 3 页有 6 个，最后一页有 2 个。

提前谢谢！出于视觉原因，我试图避免使用 TableView。如果有更简单的方法可以做到这一点，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:30:03.230

在我看来，使用 InterfaceBuilder 并不容易。您最好使用代码创建它们。对于分页，您必须使用分页 UIScrollView。

```
#define BUTTON_WIDTH 40
#define BUTTON_HEIGHT 30
#define BUTTON_PADDING 10
#define BUTTONS_PER_PAGE 6
#define PAGE_WIDTH ((BUTTON_WIDTH + BUTTON_PADDING) * BUTTONS_PER_PAGE)
#define MAGIC_BUTTON_TAG_OFFSET 6238 /* Maybe somebody already uses views with tags like 0, 1, 2, 3...)

// in an init... method:

UIScrollView *sv = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 80, 320, 320)];
sv.contentSize = CGSizeMake(PAGE_WIDTH, sv.frame.size.height);
sv.pagingEnabled = YES;
[self.view addSubview:sv]; // assuming a view controller

NSArray *a = [NSArray arrayWithObjects:...]; // whatever

for (int i = 0; i < a.count; i++)
{
    UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    btn.frame = CGRectMake(i * (BUTTON_WIDTH + BUTTON_PADDING), 0, BUTTON_WIDTH, BUTTON_HEIGHT);
    btn.tag = i + MAGIC_BUTTON_TAG_OFFSET; // to relate to the array index
    [btn setTitle:[NSString stringWithFormat:@"Button No. %d", i] forState:UIControlStateNormal];
    [btn addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
    [sv addSubview:btn];
}

- (void)buttonPressed:(UIButton *)btn
{
    int index = btn.tag - MAGIC_BUTTON_TAG_OFFSET;
    id object = [a objectAtIndex:index];

    [self doSomethingWithObject:object];
} 
```

希望这可以帮助。

# html - 使用带有 HTML5 应用缓存的 CDN 文件

> ID：11838627
> 
> 赞同：2
> 
> 时间：2012-08-07T02:54:56.600
> 
> 标签：html

Chrome 基本上无法检索我在 index.html 中指定的任何 CDN 文件（jQuery、AngularJS），因为我无法在 CACHE: 指令下拥有它们（它们不在我的域中）。

```
CACHE MANIFEST
# v1.0.7

CACHE:
/partials/account_items.html 
```

如何使用应用程序缓存和 CDN 文件使我的 Web 应用程序工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-10T23:13:20.120

对于应该是应用程序缓存一部分的 CDN 内容，我使用 // 而不是 /。例如，我当前的项目使用 fontawesome.io 和 jquery：

```
CACHE:
//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css
//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/fonts/fontawesome-webfont.woff2?v=4.3.0
//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T02:31:08.343

如果我对您的理解正确，您需要一个 NETWORK 部分并添加存储 jquery/angularJS 的域。

例如 - angularJS 和 JQuery 都托管在 ajax.googleapis.com 上。假设这是您使用的 CDN，只需将该主机添加到缓存清单的 NETWORK 部分：

```
NETWORK:
http://ajax.googleapis.com 
```

[我在http://gregsramblings.com/2012/05/28/html5-application-cache-how-to/](http://gregsramblings.com/2012/05/28/html5-application-cache-how-to/)上写了关于应用缓存的这个和其他方面的博客

格雷格

# vb.net - Crystal Reports 创建多个页面

> ID：11838628
> 
> 赞同：0
> 
> 时间：2012-08-07T02:54:58.307
> 
> 标签：vb.net, crystal-reports

我有一个水晶报告，它有一个 1 页的报告。当我尝试单击打印按钮进行打印时，我注意到它生成了 8400 页。那有什么问题？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:28:04.587

如果预览有 1 页但打印 8k，则可能是打印驱动程序有问题。您可以将其打印到另一台设备或 XPS 文档打印机并检查那里的页数吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T01:45:07.757

我找到了答案。我把所有的都放在细节部分。我只是将我的报告分为水晶报告页面的不同部分，并将必要的详细信息放在详细信息部分。

谢谢大家的回答......上帝保佑:)

# python - 什么是隐式方法调用和显式方法调用？

> ID：11838629
> 
> 赞同：1
> 
> 时间：2012-08-07T02:55:04.900
> 
> 标签：python, terminology

我在我的 Python 教科书中读到了这些术语。我无法通过查找它们的字面意思来弄清楚它们的含义。有人可以向我解释一下或提供一些参考吗？

--更新术语的上下文

```
i) (­42).__abs__() # Need parentheses to avoid confusing ... # ... method call '.' with decimal point
j) (42).__mul__(2) # Even multiplication is a method call
k) name.swapcase()
l) name.title().swapcase() # name.title() is an object so ... m) name.upper().find('TOM') # ... we can “cascade” method calls. 
```

> 希望您现在意识到，到目前为止，您在本课程中所做的大部分操作实际上都是通过隐式调用您一直在使用的对象（数据项）的方法提供的。事实上，所有的运算符（'+'、'*'等）只是方法调用的语法快捷方式，但只有一些内置函数对应于方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T03:14:39.470

好吧，我不知道您书中这些术语的上下文，但我发现了[implicit-vs-explicit-programming](http://www.dreamincode.net/forums/topic/74798-implicit-vs-explicit-programming/)。它首先谈到`explicit programming`然后和。不确定它是否有帮助。也许你可以给我们更多的细节。`implicit programming``implicit method call``explicit member call`

**编辑**：

我想这意味着当你使用`3+2`或者`3*2`看起来你没有显式调用任何方法但实际上你调用了，因为它们的实现方式是调用`(3).__add__(2)`or `(3).__mul__(2)`。所以你隐式调用这些方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T03:04:40.013

隐式方法调用是指特定方法将被自己调用（如java中的JVM），显式方法调用是指该方法将由用户调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T05:32:33.630

隐式调用是由编译器自动进行的函数调用，无需用户干预，而显式调用是用户使用特定类型的代码进行的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-26T11:01:31.113

Java 允许隐式和显式函数调用。

例子：

```
public class Junk
{
  private int a = 1;
  public String toString () { return (a); }
}

void main (String [] args)
{
  Junk j = new Junk (); // implicit call to Junk's default constructor 
  System.out.println (j); // implicit call to j.toString();
  System.out.println (j.toString()); // explicit call to j.toString();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-20T03:10:32.213

根据我的理解，由于某些运算符（如“+”、“-”、“*”、“.”、“//”、()、del 等）或内置函数，Python 会隐式调用某些方法（如 repr、str、divmod、pow 等）在表达式中使用。如此调用的方法是术语“魔术方法”或“dunder”，因为它们中的大多数都以`__`前缀和后缀命名。

有关更多详细信息，请参阅[https://docs.python.org/3.8/reference/datamodel.html](https://docs.python.org/3.8/reference/datamodel.html)。

这些方法也可以显式调用。例如，如您的问题所示：

```
abs(42) 
```

可以[称为](https://stackoverflow.com/q/66287670/6862601)：

```
(42).__abs__() 
```

或者

```
42.0.__abs__() 
```

# java - “辅助”工厂的输出应该是@Singleton

> ID：11838634
> 
> 赞同：2
> 
> 时间：2012-08-07T02:56:28.290
> 
> 标签：java, guice, inject

我目前正在尝试在一个小型应用程序中使用 Google Guice-3.0。

运行此应用程序时，系统会提示用户输入其姓名和密码。由于此信息直到运行时才知道，所以我使用它`AssistedInject`来实现我的`User`实例化。

这就是 my`UserFactory`进来的地方。它提供了一个`User`with 方法

```
public User create(@Assisted("Username") String username, 
                   @Assisted("Password") String password); 
```

该`User`课程在程序开始时（在用户输入之后）通过

```
User user = getInjector().getInstance(UserFactory.class).create(username, password); 
```

我想在应用程序的整个生命周期内使用这个实例。我已经将范围设置为`@Singleton`.

问题是，但是，我只得到错误。Guice 抱怨我在调用时没有传递任何变量

```
User user = getInjector().getInstance( User.class ); 
```

如果我`bind( User.class );`在`configure`方法中添加 a ，则会发生错误，即注释没有声明`@Assisted`（因为您可以将注释放在参数前面以唯一标识它们 - Guice 可能认为它是其中之一并要求设置依赖项（喜欢

```
bind( String.class ).annotatedWith( Assisted.class ).toInstance( username ); 
```

但这不是一件可行的事情（也许它会通过静态引用但为什么要使用 Guice？

这是您可以编译的示例。注释的代码会导致错误。特别是最后两行对我来说很烦人。

```
public class KSKB {

    @Singleton
    public static class User {

        public final String name;

        @Inject
        public User(@Assisted("Username") String username) {
            this.name = username;
        }

        public static interface Factory {
            public User create(@Assisted("Username") String username);
        }
    }

    public static void main(String... args) {
        Injector injector = Guice.createInjector(new AbstractModule() {

            @Override
            protected void configure() {
                install(new FactoryModuleBuilder().build(User.Factory.class));
                // bind( User.class );
            }

        });
        User user = injector.getInstance(User.Factory.class).create("Guice");
        System.out.println(user.name);

        // user = injector.getInstance( User.class ); // doesn't work - throws Exception!!
        // System.out.println( user.name );
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T08:44:03.937

我不认为能得到你想要的，因为你想破坏 Guice。

Guice 希望自己管理实例及其创建。即使在 Guice 的支持下，您*也可以*使用`Provider`和自定义工厂来自己创建对象。`Assisted`但是您*不能*将这些实例反馈回 Guice。这意味着，您不能告诉 Guice 使用特定对象作为单例实例。¹

可能且简单的解决方案：

*   在创建注入器之前确定用户名，并`bindConstant()`在模块中使用绑定用户名。在 中使用适当的对应物`User`。然后你可以标记`User`，`@Singleton`Guice 会尊重它。

*   用户`bind(User.class).toInstance(myUser);`。这类似于第一个提议，因为必须在 Guice 启动和运行之前获取所需的用户名。

*   不要注入`User`一个中间对象`UserHolder`（或`UserManager`），它是单例。该对象具有存储实际用户和获取它的方法。您的初始化代码将获取该持有人（当时为空）并将创建`User`的持有人放入持有人。您的应用程序的其他部分也将注入`UserHolder`.

* * *

¹至少没有*肮脏的把戏。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:15:25.827

辅助注射的输出不是注射——它是自动接线的工厂（很遗憾，该设施的名字很可怕）。

AssistedInject 产生的是一个工厂——这个工厂可以是单例的。但它是一个工厂，所以它的工作是创建对象，比如 User 对象。Factory 的内部没有设置为让它创建单例值对象。一般来说，值对象不是单例对象——你在这里使用一个作为“上下文”而不是数据，所以你有一个特殊情况。

此外，您的情况更加特殊，因为您希望在 guice 甚至运行之前预先验证数据库中的数据。这个用户完全是上下文，而不是数据，所以不要使用工厂来创建它。手动创建它，如果您需要在 guice 绑定系统的其他地方使用它，然后在 Guice 之外创建它，并将其作为 DatabaseCredentials 对象或类似对象传递到模块中。

为了适当地帮助您，我们需要看到一个更大的设计概念，但我的感觉是，您并没有清楚地考虑协作者/服务、值类型、上下文/配置等之间的区别，并且混淆主要是来是因为“用户”这个词在这里超载了。是的，它是一个“用户”，但数据库用户与系统中的其他用户不同——即使它在结构上相同，也意味着不同的东西，具有不同的生命周期等。

# django - windows + virtualenv - django runserver 搜索全局 pythonpath

> ID：11838635
> 
> 赞同：0
> 
> 时间：2012-08-07T02:56:50.733
> 
> 标签：django, virtualenv, pythonpath

**更新：注意这是在 Windows 机器上**

堆栈上有许多关于 virtualenv 和安装的 pythonpath 差异的帖子。在大多数情况下，这些用户只是忘记在进行 pip 安装之前激活 env。

*这不是我的问题*

相反，我的问题在于运行 manage.py runserver 时的 django。我正在尝试迁移在创建 virtualenv 之前启动的 django 项目。作为其中的一部分，我尝试在激活的 virtualenv 中创建一个新的 django 项目，并简单地将我的旧文件迁移过来。

```
(VENV) python django-admin.py startproject XYZ 
```

*注意：我已经激活了virutalenv并使用“python”运行命令，它指的是virutalenv中的python安装

然后我迁移我的旧文件并运行：

```
python manage.py runserver 
```

此时 DLL 加载失败。

```
Error: DLL load failed: The specified module could not be found. 
```

运行正常的 manage.py runserver 可以工作，但由于这是指全局 python 安装，这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T03:13:03.413

Windows 上的 Python 二进制安装程序与虚拟环境不兼容，只能安装到默认系统 Python（如注册表中所列）。

因此，诸如数据库驱动程序和其他诸如 Python 映像库之类的软件包与虚拟环境不兼容。

我知道三个选项：

1.  设置编译器环境并手动构建您的模块（不推荐）。
2.  使用系统 Python（更容易，并且可以与 Python 的预构建二进制 Windows 包一起使用）；并手动管理您的需求。
3.  手动将所需文件复制到您的虚拟环境。

我推荐＃2作为三个中最简单的。

您可以尝试使用 setuptools (`easy_install`或`pip`)，但除非您设置了开发环境，否则软件包将无法成功编译和安装（不会构建 DLL）；导致您遇到的错误。

对于heroku；您可以手动管理您的需求文件并添加 psycopg2 以确保 heroku 正确部署您的应用程序。

# objective-c - 移交 managedObjectContext 的问题

> ID：11838637
> 
> 赞同：0
> 
> 时间：2012-08-07T02:57:04.373
> 
> 标签：objective-c, ios5, core-data, nsmanagedobjectcontext

我一直在阅读有关此项目的大多数问题，但不知何故我无法弄清楚这一点。

我很容易将 ManagedObjectContext 从 AppDelegate 移交给我之前尝试过的应用程序中的第一个视图，其中初始 viewController 也处理数据。

现在在我正在构建的一个新应用程序中，我需要一个初始屏幕，用户需要在其中进行选择（通过几个可能的按钮）。在这个屏幕上，根据我的故障排除，我的 MOC 仍然完好无损（NSLog 消息为我提供了 MOC 的有效地址）。

做出选择后，应用程序会转到一个 UIViewController，其中包含一个 TableView。在这个视图中，我应该能够管理我的数据，但我的 MOC 返回 nil。

应用程序通过 UINavigationController 进入下一个视图。

我在我的 AppDelegate 中加入了以下代码：

```
UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
InitialViewController *controller = (InitialViewController *)navigationController.topViewController;
controller.managedObjectContext = self.managedObjectContext;
return YES; 
```

InitialViewController 是第一个 ViewController，一切都还好。

下一个视图控制器称为 MasterViewController，是 NSFetchedControllerDelegate。在这里，我似乎无法访问 NOC。我已经尝试了在同一主题的先前问题中建议的几种方法和解决方案，但似乎都没有奏效。

如何通过正确的编码让 NOC 在 MasterViewController 中工作？

哦，是的，其中一个有效的解决方案是在 MasterViewController 中的 ViewDidLoad 之后，我插入以下代码：

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
self.managedObjectContext = appDelegate.managedObjectContext; 
```

我的 MOC 现在可用，但这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:32:52.080

如果您使用故事板，

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    [super prepareForSegue:segue sender:sender];
    if ([[segue identifier] isEqualToString:@"segueNameOfPresentingYourModalViewController"] == YES) {
        UINavigationController *navigationController = segue.destinationViewController;
        YourCustomViewController *aController = (YourCustomViewController *)navigationController.topViewController;
        aController.managedObjectContext = self.managedObjectContext;
    }
    else if ([segue.identifier isEqualToString:@"segueNameOfPushingYourViewController"] == YES) {
        YourCustomViewController *aController = segue.destinationViewController;
        aController.managedObjectContext = self.managedObjectContext;
    }
} 
```

如果您不使用 Storyboard，则类似地将视图控制器的 managedObjectContext 设置在您将要推送或呈现它的位置。另一个常见的地方是`-tableView:didSelectRowAtIndexPath:`方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T03:20:31.477

您编写“controller.managedObjectContext”，因此您清楚地将 NSManagedObjectContext* 属性添加到 InitialViewController。您只需将相同的属性添加到 MasterViewController，并将 self.managedObjectContext 也分配给它。

如果您不想将 moc 添加到每个控制器，那么简单地为您的 MOC 声明一个全局变量并没有错：

在您的 appDelegate.h 中：

```
extern NSManagedObjectContext* moc; 
```

现在任何 .m 具有：

```
#import "AppDelegate.h" 
```

将可以访问 moc。您也可以只向您的 appDelegate 添加一个属性，然后在每个控制器中您可以执行以下操作：

```
AppDelegate* app = (AppDelegate*)[[UIApplication sharedApplication] delegate];
app.managedObjectContext 
```

# playframework - 服务端填写 HTML 模板，客户端更新

> ID：11838639
> 
> 赞同：13
> 
> 时间：2012-08-07T02:57:16.633
> 
> 标签：playframework, knockout.js, angularjs, dust.js

我有一个包含动态内容的网页。假设它是一个产品页面。当用户直接访问时，`example.com/product/123`我想在服务器上呈现我的产品模板并将 html 发送到浏览器。但是，当用户稍后单击指向`/product/555`我想使用 JavaScript 更新客户端上的模板的链接时。

我想使用 Knockout.js 或 Angularjs 之类的东西，但我不知道如何在服务器上使用一些初始数据预先填充这些模板，并且在客户端上仍然有一个正常工作的模板。即如果我的 Angular 模板是这样的：

```
<ul>
    <li ng-repeat="feature in features">
      {{feature.title}}
      <p>{{feature.description}}</p>
    </li>
</ul> 
```

当用户直接访问 URL 时，我需要一些仍可用作 Angular 模板的东西，但填充了当前产品的 html。显然这不起作用：

```
<ul>
    <li ng-repeat="feature in features">Hello
      <p>This feature was rendered server-side</p>
    </li>
    <li>Asdf <p>These are stuck here now since angular won't replace them when
       it updates.... </p></li>
</ul> 
```

似乎我唯一的选择是将服务器呈现的 html 与单独的匹配模板一起发送到浏览器......？

在这种情况下，我想避免每个模板都写两次。这意味着我需要为我的服务器语言切换到 JavaScript（我不会对此感到高兴），或者选择一种同时编译为 Java 和 JavaScript 的模板语言，然后找到一种方法将其破解到 Play 框架中（这就是我目前正在使用。）

有人有建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T04:41:31.343

如果您真的想在 Angular 激活之前将初始值存储在某个区域中 - 您可以使用 ng-bind 属性而不是 {{bound strings}}，从您的示例中：

```
<ul>
    <li ng-repeat="feature in features">
        <div ng-bind="feature.title">Hello</div>
        <p ng-bind="feature.description">This feature was rendered server-side but can be updated once angular activates</p>
    </li>
</ul> 
```

我不确定这会在哪里派上用场，但您还需要将初始数据集作为脚本标签的一部分包含在文档中，这样当 angular DOES 激活时，它不会清除显示的信息带空值。

**编辑：（**根据评论者的要求）

或者，您可以在列表顶部创建一个 ng-repeat，将其配置为根据“功能”列表本身进行填写。在该 ng-repeat 元素之后，具有具有设置 ng-hide="features" 的 ng-hide 属性的非 ng-repeat 元素，如果加载了 Angular，则原始服务器提供的列表中的所有元素都会隐藏自己，并且角度列表开始存在。没有对 Angular 进行任何修改，也没有摆弄直接 ng-bind 属性。

作为旁注，您可能仍然希望发送一段脚本，该脚本能够读取该初始服务器元素的数据，以便在角度同步之前将其馈入角度，如果您想避免在等待角度时清除数据的眨眼从服务器请求相同的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T04:26:24.900

我只使用了 Knockout，而不是 Angular，但我使用的一种看似非常常见的方法是将数据的初始状态作为 JSON 呈现到页面标记中，并在 DOM 上准备好使用它来构建您的初始 Javascript 视图模型，然后应用 Knockout 绑定来构建 UI。因此，即使对于已经存在于服务器上的产品（例如您的产品），UI 也会构建客户端。这意味着可以在初始 UI 创建和添加客户端时调用相同的模板，例如具有自己的视图模型和模板的子产品。这是您的选择吗？

编辑：如果我误解了您的要求，我正在谈论的方法在这个问题中有更详细的说明：[KnockoutJS 复制数据开销](https://stackoverflow.com/questions/11327138/knockoutjs-duplicating-data-overhead/11327353)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T04:26:47.123

AngularJS 中的一个选项可能是使用指令将服务器上呈现的值复制到模型中，并让后续操作通过 JavaScript 检索数据。

我在 ASP.NET WebForms 应用程序中使用[此处](https://groups.google.com/forum/#!topic/angular/t2JCjwpW4Lo/discussion)描述的方法，在第一次请求时通过来自服务器的隐藏值预填充我的模型。根据讨论，这与 Angular 方式不同，但这是可能的。

这是html的示例：

```
<input type="hidden" ng-model="modelToCopyTo" copy-to-model value='"this was set server side"' /> 
```

JavaScript：

```
var directiveModule = angular.module('customDirectives', []);

directiveModule.directive('copyToModel', function ($parse) {
    return function (scope, element, attrs) {
        $parse(attrs.ngModel).assign(scope, JSON.parse(attrs.value));
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T02:32:40.700

我不知道这样做有什么好的技术，但这是我暂时在我正在构建的 Rails 应用程序中确定的东西。

您首先使用[ng-init](http://docs.angularjs.org/api/ng.directive%3angInit)使用种子数据初始化模板。

```
<ul ng-init="features = <%= features.to_json %>">
    <li ng-repeat="feature in features">
      {{feature.title}}
      <p>{{feature.description}}</p>
    </li>
</ul> 
```

然后你渲染种子数据两次。一次来自服务器，一次 Angular 引导您的应用程序。当应用程序启动时，Angular 将隐藏初始种子数据，只留下角度化的模板。

在引导之前使用[ng-cloak隐藏角度模板很重要。](http://docs.angularjs.org/api/ng.directive%3angCloak)

```
<ul ng-hide="true">
  <% features.each do |feature| %>
    <li>
      <%= feature.title %>
      <p><%= feature.description =></p>
    </li>
  <% end %>
</ul>
<ul ng-hide="false" ng-cloak ng-init="features = <%= features.to_json %>">
    <li ng-repeat="feature in features">
      {{feature.title}}
      <p>{{feature.description}}</p>
    </li>
</ul> 
```

它不适用于大型模板，您正在复制标记，但至少在 Angular 引导您的应用程序时不会出现闪烁。

理想情况下，我希望能够在服务器上重复使用与客户端相同的模板。像小胡子这样的东西浮现在脑海中。显然，诀窍是实现 angular 的指令和流控制。不是一件容易的工作。

# java - Java - 调用方法中的累积总数 - 按值/引用调用

> ID：11838641
> 
> 赞同：1
> 
> 时间：2012-08-07T02:57:31.260
> 
> 标签：java, pass-by-reference, pass-by-value

在Java中，如何在调用函数中获得多个原始变量的累积总数。我想用另一种方法来做加法。但是，当它按值传递原始类型时，我该如何在 Java 中做到这一点？

```
public void methodA(){
    int totalA = 0;
    int totalB = 0;
    Car aCar = getCar() ; //returns a car object with 2 int memebers a & b

    methodB(aCar);
    methodB(bCar);
    methodB(cCar); 

    sysout(totalA); // should print the sum total of A's from aCar, bCar and cCar
    sysout(totalB); // should print the sum total of b's from aCar, bCar and cCar        
}

private methodB(aCar){
    totalA += aCar.getA();
    totalB += aCar.getB();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T02:59:56.663

不幸的是，Java 不像大多数语言那样支持元组分配或引用，这使事情变得不必要地困难。我认为您最好的选择是传入一个数组，然后填写数组中的值。

如果您想同时总结所有值，我会寻找某种矢量类，但由于缺少运算符重载，事情再次变得不必要地困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T03:07:18.220

你为什么不使用一个`Car`对象作为你的总数？

```
public void methodA() {
    Car total = new Car(); 
    Car aCar = getCar(); // etc

    methodB(total, aCar);
    methodB(total, bCar);
    methodB(total, cCar); 

    sysout(total.getA()); // prints the sum total of A's from aCar, bCar and cCar
    sysout(total.getB()); // prints the sum total of b's from aCar, bCar and cCar        
}

private methodB(Car total, Car car){
    total.setA(total.getA() + car.getA());
    total.setB(total.getB() + car.getB());
} 
```

# perl - 如何在 dotcloud 上获取真实的客户端 IP？

> ID：11838644
> 
> 赞同：2
> 
> 时间：2012-08-07T02:58:31.113
> 
> 标签：perl, dotcloud, dancer

我在 dotcloud 上为我的网站使用 dancer perl。我知道问题是**nginx**的设置。但我尝试我的方式来添加`nginx.conf`这样的。

```
location / { 
proxy_pass http://127.0.0.1:80; 
proxy_set_header Host $host; 
proxy_set_header X-Real-IP $remote_addr; 
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; 
} 
```

**并返回 505；** 无论如何，在我的代码中 remote_address 总是返回`10.*.*.*`
你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T08:20:19.840

我找到了解决方案：

```
my $user_ip = request->env->{'HTTP_X_REAL_IP'};
$user_ip =~ s/^::ffff:(.*)/$1/g; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T23:27:35.160

您可以考虑使用`Plack::Middleware::ReverseProxy`.

# fitnesse - 是否可以从 FitNesse 页面中知道 FitNesse 目录（根目录）的路径？

> ID：11838645
> 
> 赞同：2
> 
> 时间：2012-08-07T02:58:34.950
> 
> 标签：fitnesse

是否可以从 FitNesse 页面中知道 FitNesse 目录是什么？我需要使用相对于 FitNesse 目录的路径来引用文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T23:40:28.147

看起来像测试需要文件，您尝试通过根路径指定文件路径。我对吗？您可以通过配置fitnesse[`COMMAND_PATTERN`](http://fitnesse.org/FitNesse.UserGuide.CustomizingTestExecution)并将根路径指定为var。这是配置示例

运行但

```
java -Xmx100M -Dtestserver.Configuration=Debug -jar fitnesse.jar -p 88 -e 0 -d %~dp0

pause 
```

第一页

```
#
!*> Define variables

!define CONFIGURATION {${testserver.Configuration}}
!define TESTSDIRECTORY {..\Out\${CONFIGURATION}\FitNesseTests}

!define COMMAND_PATTERN {%m -a ${TESTSDIRECTORY}\FitNesseTests.dll.config -r fitnesse.fitserver.FitServer,${TESTSDIRECTORY}\fit.dll %p} 
!define TEST_RUNNER {${TESTSDIRECTORY}\Runner.exe} 
!path ${TESTSDIRECTORY}\*.dll

!define DATASTORE_PATH {${TESTSDIRECTORY}\DataStore}

!define COLLAPSE_SETUP {true}
!define COLLAPSE_TEARDOWN {true}

*!
#

!contents -R2 
```

现在您可以`DATASTORE_PATH`用作数据存储文件夹。

# android - android - 如何从另一个活动中获取按钮

> ID：11838650
> 
> 赞同：2
> 
> 时间：2012-08-07T02:59:18.860
> 
> 标签：android, button, text

如果我是一个活动，并且我知道另一个活动正在运行，我如何更改另一个活动的按钮文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:07:23.837

另一个活动正在运行，但它正在运行`onPause`，你不能保证在你再次回到那里之前活动不会破坏。

因此，您应该更好地查看`onResume`更新按钮文本的活动。如果您仍想在活动处于暂停状态时更改按钮文本，您可以在将更改文本的活动上使用广播接收器。您也可以使用处理程序可运行以更新按钮文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T03:07:50.097

更改持久存储中的某些内容，例如共享首选项。

然后在目标活动中，重写 onResume 方法来检查持久存储并在按钮上执行更改。

# php - Joomla 2.5 组件：如何在安装时将 config.xml 字段值安装到数据库？

> ID：11838651
> 
> 赞同：1
> 
> 时间：2012-08-07T02:59:20.723
> 
> 标签：php, joomla

我目前正在编写一个 Joomla 2.5 组件问题是：我在管理员中有 config.xml 文件。当我安装组件时，config.xml 文件的值没有安装在组件信息的 jos_extension 表中。

怎么做？

非常感谢

弥敦道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:33:00.363

config.xml 文件用于配置，并在编辑时即时读取。第一次在管理区域中更改配置时，数据将被保存。

# android - 如何在 Android 2.3 以下版本中创建 SearchView

> ID：11838653
> 
> 赞同：0
> 
> 时间：2012-08-07T02:59:33.527
> 
> 标签：android, searchview

我正在尝试在低于版本的 Android 2.3 中获取 SearchView。但是.. Android3.0支持SearchView。如何在以下版本中获取 SearchView？请帮我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:14:56.037

我认为[这个](http://rakhi577.wordpress.com/2012/06/26/buttons-on-list-view-with-easy-searching-in-android/)链接会对你有所帮助。这里不需要`searchview`. 只要你能达到你的要求`EditText`。否则你也可以使用[`AutoCompleteTextView`](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)。

# java - JAVA中的大稀疏矩阵特征分解

> ID：11838657
> 
> 赞同：0
> 
> 时间：2012-08-07T02:59:48.483
> 
> 标签：java, matrix, sparse-matrix, svd

我正在寻找一个 Java 中的线性代数库，它可以处理大型“稀疏”矩阵（比如 100 万乘 100 万）并在矩阵上执行像 SVD、LU 这样的分解。

我环顾四周并尝试了 COLT，但是它只能处理最多固定数量的元素的矩阵。

EJML 站点还提到它无法处理这个问题。（http://code.google.com/p/efficient-java-matrix-library/wiki/FAQ）

我知道 C++ 中有一些包可以处理这种大小的数据，但是，我不能从 Java 迁移，因为我有所有其他代码都是围绕 Java 构建的。

有什么想法吗？任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:16:16.457

尝试查看[la4j](http://la4j.org)（Java 的线性代数）。它处理稀疏矩阵和密集矩阵。所以你可以尝试这样的事情：

```
Matrix a = new CRSMatrix(...); // Compressed Row Storage format
Matrix vd[] = a.decompose(Matrices.EIGEN_DECOMPOSITOR); // vd[0] = V, vd[1] = D 
```

因此，它适用于稀疏矩阵，但我不确定（100 万 X 100 万）大小。

# antlr - 在 ANTLR 词法分析器规则中强制替代

> ID：11838662
> 
> 赞同：2
> 
> 时间：2012-08-07T03:00:08.703
> 
> 标签：antlr, antlr3, lexer

我正在尝试使用 ANTLR 编写上下文相关的词法分析器规则，但无法让它完成我需要的工作。该规则需要根据在规则开头找到的字符匹配 2 个备选方案中的 1 个。下面是问题的大大简化版本。

此示例语法：

```
lexer grammar X;

options
{
  language = C;
}

RULE :
  SimpleIdent {ctx->someFunction($SimpleIdent);}
  (
    {ctx->test != true}?
     //Nothing
  | {ctx->test == true}?
     SLSpace+ OtherText
  )
  ;

fragment SimpleIdent  : ('a'..'z' | 'A'..'Z' | '_')+;
fragment SLSpace    : ' ';
fragment OtherText :  (~'\n')* '\n'; 
```

*如果ctx->test*为假，我希望词法分析器退出此规则，忽略 SimpleIdent 之后的任何字符。不幸的是，ANTLR 会在测试谓词之前测试 SimpleIdent*之后*的字符，因此如果那里有空格，它将始终采用第二种选择。这在 C 代码中清楚地显示：

```
// X.g:10:3: ({...}?|{...}? ( SLSpace )+ OtherText )
{
    int alt2=2;
    switch ( LA(1) )
    {
    case '\t':
    case ' ':
        {
            alt2=2;
        }
        break;

    default:
        alt2=1;
    }

    switch (alt2)
    {
    case 1:
        // X.g:11:5: {...}?
        {
            if ( !((ctx->test != true)) )
            {
                    //Exception
            }

        }
        break;
    case 2:
        // X.g:13:5: {...}? ( SLSpace )+ OtherText
        {
            if ( !((ctx->test == true)) )
            {
                   //Exception
            } 
```

如何强制 ANTLR 在运行时在词法分析器中采用特定路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:57:24.750

使用*门控语义谓词*而不是*验证语义谓词* ¹。如果表达式验证为 ，则*验证谓词*会引发异常`false`。并让*“Nothing Alternative”*成为最后一个匹配的。

另外，`OtherText`还匹配 what `SLSpace`，使人`SLSpace+ OtherText`模棱两可。只需`SLSpace+`从中删除，或者`OtherText`从`' '`.

我对 C 目标不是很熟悉，但是这个 Java 演示应该适用于 C（当然是在翻译 Java 代码之后）：

```
grammar T;

rules
 : RULE+ EOF
 ;

RULE
 : SimpleIdent {boolean flag = $SimpleIdent.text.startsWith("a");}
   ( {!flag}?=> OtherText
   |            // Nothing
   )
 ;

Spaces 
 : (' ' | '\t' | '\r' | '\n')+ {skip();}
 ;

fragment SimpleIdent : ('a'..'z' | 'A'..'Z' | '_')+;
fragment OtherText   : (~'\n')* '\n'; 
```

如果您现在解析输入：

```
abcd efgh ijkl mnop
bbb aaa ccc ddd

```

你会得到以下解析：

![enter image description here](../Images/f0f4fe3e6a65b074ae58f11f92a2ab13.png)

I.e. whenever a `RULE` starts with a lower case `"a"`, it doesn't match all the way to the end of the line.

¹ [What is a 'semantic predicate' in ANTLR?](https://stackoverflow.com/questions/3056441/what-is-a-semantic-predicate-in-antlr)

# javascript - Javascript 计数复选框

> ID：11838667
> 
> 赞同：4
> 
> 时间：2012-08-07T03:01:39.597
> 
> 标签：javascript, checkbox, checked

我知道@stackoverflow 可能有一些类似的问题，但我还没有找到任何解决我的问题的方法：s

```
<?php
while($rowVideo = mysql_fetch_array($ResultQueryVideo))
{
?>
<input type="checkbox" name = "checkbox-1[]" class="checkbox" value ="<?php echo $rowVideo['idVideo'] ?>" /> <?php....some code... 
```

这会产生几个复选框，与 idVideo 相同的数字..这就是重点。

现在，在提交之前，我需要确保至少选中了一个复选框。但我没有成功：x

```
function isCountCheck (helperMsg) {
    var chkCnt = 0;
    var Frm = document.forms[0];
    var dLen = Frm.length - 1;
    for (i=0;i<=dLen;i++) {
        if(document.form1.["checkbox-1[]"].checked) chkCnt++;
    }

    if (chkCnt>0) {
        return true;
    } else {
        alert(helperMsg);
        return false;
    }
} 
```

额外细节：表格名称=“form1”

你能指导我一点吗？谢谢

编辑：

```
function isCountCheck(){
    if($("input[type=checkbox]:checked").length > 0)
    {
    return true;
    }
    else
    {
    alert('Invalid');
    return false;
    }
} 
```

但仍然无法正常工作..即使显示警报..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T03:43:39.990

主要问题是您没有使用`i`循环中的索引来引用各个复选框，并且您在 this`.`之前`[`有一个语法错误。所以改变：

```
if(document.form1.["checkbox-1[]"].checked) chkCnt++; 
```

到：

```
if(document.form1["checkbox-1[]"][i].checked) chkCnt++; 
```

但是您可以按如下方式整理功能：

```
function isCountCheck(helperMsg) {
    var i, dLen = document.form1["checkbox-1[]"].length;
    // if the length property is undefined there is only one checkbox
    if (typeof dLen === "undefined") {
        if (document.form1["checkbox-1[]"].checked) return true;
    }
    else {
        for (i = 0; i < dLen; i++) {
            if (document.form1["checkbox-1[]"][i].checked) return true;
        }
    }
    alert(helperMsg);
    return false;
} 
```

演示：http: [//jsfiddle.net/nnnnnn/ZjK3w/1/](http://jsfiddle.net/nnnnnn/ZjK3w/1/)

或者只是遍历表单中的*所有*输入，检查每个输入的类型（和/或名称）：

```
function isCountCheck(helperMsg) {
    var i, len, inputs = document.form1.getElementsByTagName("input");
    for (i = 0, len = inputs.length; i < len; i++) {
        if (inputs[i].type === "checkbox"
            && inputs[i].checked)
            return true;
    }
    alert(helperMsg);
    return false;
} 
```

演示：http: [//jsfiddle.net/nnnnnn/ZjK3w/2/](http://jsfiddle.net/nnnnnn/ZjK3w/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-24T21:20:14.067

# 最简单的解决方案：

```
var form = document.forms[0]; // your form element (whatever)
var checkedElms = form.querySelectorAll(':checked').length; 
```

不需要 jQuery。支持到 IE8。如果您愿意，可以为旧版浏览器使用 polyfill。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T03:16:33.747

使用jQuery：

```
function isCountCheck(helperMsg){
    if($("input[type=checkbox]:checked").length > 0)
        return true;
    alert(helperMsg);
    return false;
} 
```

# android - Android 在屏幕底部有标签？

> ID：11838671
> 
> 赞同：0
> 
> 时间：2012-08-07T03:02:16.943
> 
> 标签：android, android-layout, android-widget, android-tabhost

我正在尝试将选项卡放在屏幕底部，并让每个选项卡显示不同的活动。

但是根据我的阅读，您只能在手机 3.0+ 上使用它。

当我知道的大多数手机都在 2.3 左右时，这似乎有点荒谬。

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:36:25.853

This can be implemented using the android usual tab,just you have to do is add some extra codes in the xml.I hope this piece of code will help you for getting it done...

```
<TabHost 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/tabhost"
        android:background="@android:color/background_dark"

>

    <RelativeLayout
        android:id="@+id/LinearLayout01"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="match_parent" 
            android:layout_above="@android:id/tabs">
        </FrameLayout>

        <TabWidget
            android:id="@android:id/tabs"
            style="@style/customtab"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"

           >
        </TabWidget>
    </RelativeLayout>

</TabHost> 
```

The style is here @style/customtab

```
 <style name="customtab" parent="@android:style/Widget.TabWidget">
            <item name="android:tabStripEnabled">false</item>
            <item name="android:tabStripLeft">@null</item>
            <item name="android:tabStripRight">@null</item>
        </style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T03:05:41.890

您可以通过片段和底部的一组按钮来最好地实现这一点。

因此，当单击按钮时，在主内容区域上为用户单击的任何内容进行片段转换。

话虽如此，底部的标签在Android上是不好的形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T05:21:08.860

使用下面的 XML 代码作为底部标签栏。

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:padding="3dp" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_above="@android:id/tabs"
            android:layout_weight="1" />

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true" />
    </RelativeLayout>

</TabHost> 
```

并使用下面的java代码。

```
public class MainActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

                setContentView(R.layout.tab_screen);
        TabHost tabHost = getTabHost();

        tabHost.addTab(tabHost.newTabSpec("tab1").setIndicator("Home", getResources().getDrawable(R.drawable.home)).setContent(new Intent(this, HomeActivity.class)));

        tabHost.addTab(tabHost.newTabSpec("tab2").setIndicator("Second", getResources().getDrawable(R.drawable.invoice)).setContent(new Intent(this, SecondActivity.class)));

        tabHost.setCurrentTab(0);
    }
} 
```

# android - SQLite 数据库搜索不返回行

> ID：11838673
> 
> 赞同：0
> 
> 时间：2012-08-07T03:02:47.187
> 
> 标签：android, android-sqlite

我有一个方法，我想将一个字符串传递给它并在数据库中搜索匹配项。我是数据库新手，所以我束手无策。几天来，我一直在谷歌搜索并尝试不同的查询，但它只是不起作用。游标创建得很好，所以我不认为查询有任何语法问题。光标不为空，那里有一个 Cursor 对象，那里也有所有 3 列。但是没有行。当我传入一个我知道应该匹配的字符串时，它只是不返回任何数据。这是方法：

```
public Business getBusiness(String search) {
    File database=currentContext.getDatabasePath(DATABASE_NAME);
    SQLiteDatabase db = SQLiteDatabase.openDatabase(database.getAbsolutePath(),     
                                                        null, Context.MODE_PRIVATE);

    Cursor cursor = db.query(TABLE_NAME, new String[] {COLUMN_ONE, COLUMN_TWO,        
                             COLUMN_THREE}, COLUMN_ONE + " like ' " + search + " '", 
                             null, null, null, null);

    if (cursor != null)
        cursor.moveToFirst();

    Business business = new Business(currentContext, cursor.getString(0),  
                                     cursor.getString(1), cursor.getString(2),  
                                     cursor.getInt(3), cursor.getInt(4));
    db.close();

    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T07:40:20.057

你已经尝试过这段代码......这段代码运行正常..

```
Cursor cursor;

            try
            {
                cursor = db.query
                (
                        TABLE_NAME,
                        new String[] { TABLE_ROW_ID, TABLE_ROW_ONE, TABLE_ROW_TWO, TABLE_ROW_THREE, TABLE_ROW_FOUR, TABLE_ROW_FIVE, TABLE_ROW_SIX },
                        TABLE_ROW_ID + "=" + rowID,
                        null, null, null, null, null
                );

                cursor.moveToFirst();

                if (!cursor.isAfterLast())
                {
                    do
                    {                   
                        String row_item_id=cursor.getLong(0);
                        String row_item_name=cursor.getString(1);
                        String row_item_basic_price=cursor.getFloat(2);
                        String row_item_tax=cursor.getFloat(3);
                        String row_item_shipping=cursor.getFloat(4);
                        String row_item_price=cursor.getFloat(5);
                        byte[] imgByte = cursor.getBlob(6);
                            Bitmap row_item_bitmap=BitmapFactory.decodeByteArray(imgByte, 0, imgByte.length);

                    }

                    while (cursor.moveToNext());
                }
                cursor.close();
            }
            catch (SQLException e) 
            {
                Log.e("DB ERROR", e.toString());
                e.printStackTrace();
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:42:00.113

尝试更改您的like 语句以包含通配符

例如从

```
" like ' " + search + " '" 
```

至

```
" like ' " + search + "_'" 
```

或者

```
" like '_" + search + "_'" 
```

LIKE 模式中的百分号（“%”）匹配字符串中任何零个或多个字符的序列。LIKE 模式中的下划线（“_”）匹配字符串中的任何单个字符。

相信这是有帮助的。祝你好运

# java - 如何在java中读取带有空格的属性名称

> ID：11838674
> 
> 赞同：20
> 
> 时间：2012-08-07T03:02:56.617
> 
> 标签：java, properties

我正在尝试使用以下代码加载属性文件中存在的所有属性名称：

```
for(Enumeration<String> en = (Enumeration<String>) prop.propertyNames();en.hasMoreElements();){

    String key = (String)en.nextElement();
    System.out.println("Property name is "+key);
} 
```

但我的属性文件有以下内容：

```
username=
password=
Parent file name=
Child file name = 
```

运行代码后，我得到的输出为：

```
username password Parent Child 
```

如果属性名称有空格，它只返回第一个单词..

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-07T03:22:52.740

您可以转义属性文件中的空格，但我认为它会开始看起来很丑陋。

```
username=a
password=b
Parent\ file\ name=c
Child\ file\ name=d 
```

你可能会更好地编写你自己的实现，[`split()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)或者[`indexOf()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int%29)你想要避免任何未来的错误和/或头痛的任何东西。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T04:20:31.510

从属性文件加载时，在`Java.util.Properties`、、、或空格字符是键/值分隔符。`=``:`

下面是其详细的Javadoc`public void load(Reader reader)`

> 键包含行中的所有字符，从第一个非空白字符开始，直到（但不包括）第一个未转义`=`的`:`、 或除行终止符之外的空白字符。通过使用前面的反斜杠字符对它们进行转义，所有这些键终止字符都可以包含在键中。[http://docs.oracle.com/javase/6/docs/api/](http://docs.oracle.com/javase/6/docs/api/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-22T01:27:10.780

我就是这样做的：

```
public class PropHelper {
    final static String PROPERTY_FILEPATH = "blah/blah.properties";

    static String getPropertyWithSpaces(String property, String delimiter) {
        try {
            FileReader reader = new FileReader(PROPERTY_FILEPATH);
            Properties propertiesObj = new Properties();
            propertiesObj.load(reader);
            return propertiesObj.getProperty(property).replaceAll(delimiter, "");
        } catch (Exception ex) {
            System.out.println("FATAL ERROR: " + ex.getMessage());
            System.exit(1);
        }

        return null;
    }
} 
```

**.properties**文件中的某处：

```
settings = ` ⚙ Settings ` 
```

这就是我所说的：

```
System.out.println("|" + PropHelper.getPropertyWithSpaces("settings", "`") + "|"); 
```

此方法适用于前导、内部和尾随空格。享受！

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-08-07T03:22:44.517

对我来说似乎工作正常；这是我的代码：

```
 Properties prop = new Properties();
   prop.setProperty("test1", "val1");
   prop.setProperty("test number 2", "val number 2");
   prop.setProperty("test 3", "val3");
   prop.setProperty("test #4", "val #4");
   for(Enumeration<String> en = (Enumeration<String>) prop.propertyNames();en.hasMoreElements();){
       String key = (String)en.nextElement();
       System.out.println("'" + key + "'='" + prop.getProperty(key) + "'");
   } 
```

和输出：

```
'test 3'='val3'
'test number 2'='val number 2'
'test1'='val1'
'test #4'='val #4' 
```

您可以将其与您的设置进行比较，因为我们的显示似乎相同。如果您没有看到任何内容，请添加您的完整代码，我会看看

# jquery - jQuery 多个 css 值 - “float”的问题

> ID：11838676
> 
> 赞同：3
> 
> 时间：2012-08-07T03:03:01.610
> 
> 标签：jquery, css

所以，我用 jQuery 定义了一些 CSS 值。我正在定义多个值，如下所示：

```
$('#elementId').css({
    height  : '60px',
    width   : '268px',
    display : 'block',
    float   : 'left'
}); 
```

注意我也在调整“浮动”。虽然它确实有效，但“float”（显然）是一种数据类型，我的编辑器将其标识为这样。我想知道是否有更合适的方法来更改浮点 CSS 值，而不是使用保留的浮点数据类型。我想这是一种强迫症问题，但我喜欢做正确的事情。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T03:08:06.290

尝试用引号括起来：

```
$('#elementId').css({
    'height': '70px',
    'width': '280px',
    'display': 'inline-block',
    'float': 'left',
}); 
```

看这个[例子](http://jsfiddle.net/wgwbw/)

# login - 开发者控制台登录不起作用

> ID：11838677
> 
> 赞同：2
> 
> 时间：2012-08-07T03:03:17.247
> 
> 标签：login, console

我是一个相对较新的 Android 开发人员，我刚刚注册（并支付了 25.00 美元）将我的应用程序上传到 Playstore。但是，即使我已经完成注册，我也无法访问开发者控制台。

如果我访问页面[http://market.android.com/publish](http://market.android.com/publish)，我将被引导回注册页面，而不是我可以上传应用程序的页面......

Google 需要多长时间才能识别我的付款并允许我上传应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T14:23:49.280

我也是一样的状态。

我向 Google 客户支持咨询了这个问题，我收到了以下邮件。

> 请访问我们的已知问题页面：ttps://market.android.com/support/developer/bin/static.py?page=known_issues.cs 如果是这样，请查阅该页面以获取更新和说明。您的开发者帐户是否已被暂停？如果您的开发者帐户已被暂停，请在您的开发者帐户电子邮件中回复 Google Play 暂停通知电子邮件。只需回复一份，我们将按照收到的顺序处理您的申诉。我在访问我的开发者帐户时遇到了其他问题。
> 
> 请在每个步骤后重试访问该站点：
> 
> 1.  删除浏览器的 cookie 并清除缓存。
> 2.  确保 JavaScript 已启用。
> 3.  尝试使用其他浏览器（例如，如果您使用的是 Internet Explorer，请尝试使用 Firefox 或 Google Chrome）。如果这样可以解决问题，则可能是浏览器插件或扩展程序存在问题。尝试禁用浏览器中所有不起作用的插件和扩展。
> 
> 如果上述建议未能解决问题，请回复此消息并提供任何其他信息，以帮助我们解决您的问题。例如，您最后一次能够成功访问 Publisher 站点是什么时候？
> 
> 如果可能，请向我们发送以下信息以帮助我们进行调查： - 您收到的任何错误消息的屏幕截图。- 您正在使用的浏览器版本和操作系统类型。- 来自浏览器错误控制台、http 日志等的信息。

# php - 从 file1 到 filesA-Z 的 PHP 变量

> ID：11838678
> 
> 赞同：0
> 
> 时间：2012-08-07T03:03:17.513
> 
> 标签：php, include

所以我看到了一些关于使用 PHP 在文件之间传递变量的争议。什么是“最好的方法”？

目前，我有这样的设置

**文件 1：**

```
<? $foo = 'somethingCoolHere';
$bar = 'nothingLameThere'; ?> 
```

**档案一：**

```
<? include('/link/to/file1.php');
printf('stuff' .$foo. 'stuff'); ?> 
```

**文件 B：**

```
<? include('/link/to/file1.php');
printf('stuff' .$foo. 'stuff');
printf('stuff' .$bar. 'stuff'); ?> 
```

这行得通，“好吧”。但是，如果有人想扩展我所拥有的内容，他们可能需要记住在第一行包含“包含”以使变量起作用。与我现在正在做的事情相比，是否有“更好的实践”或“最佳实践”的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:53:45.677

我的项目也遵循类似的模式，但我想在您的代码中指出一件事。假设如果多个程序员正在处理一个大型项目，那么很难跟踪不同文件中定义的变量。所以我总是确保关联数组用于对相似的值进行分组，而不是为每个值使用单独的变量。您可以考虑使用以下结构。

**文件 1：**

```
<?php 
  $file1['foo'] = 'somethingCoolHere';
  $file1['bar'] = 'nothingLameThere';
?> 
```

**档案一：**

```
<?php
  include('file1.php');
  printf('stuff' .$file1['foo']. 'stuff');
?> 
```

**文件 B：**

```
<?
  include('file1.php');
  printf('stuff' .$file1['foo']. 'stuff');
  printf('stuff' .$file1['bar']. 'stuff');
?> 
```

通过这种方式，您可以组织数据，而且使代码审查和以后的开发变得不那么令人生畏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T03:13:40.760

就个人而言（不确定其他人是否会同意），我会在包含文件时使用绝对路径。我会让这些路径保持不变。为什么？因为如果我需要更改路径（比如我移动了一个文件或其他东西），我不必遍历每个文件来更改路径，而是只需要定义常量的文件即可。

一个例子：

常量.php

```
define('file1' , 'abolute/path/to/file1');
define('fileA' , 'abolute/path/to/fileA');
define('fileB' , 'abolute/path/to/fileB'); 
```

然后在需要使用常量的任何文件中包含 constant.php：

东西.php：

```
include_once($_SERVER['DOCUMENT_ROOT'].'/constant.php');//we now have access to our constants
include_once(fileA);
include_once(fileB);
include_once(file1); 
```

我并不是说这种方法是最佳实践，但这只是我在所有项目中都会做的事情。我也看不出有什么问题。

# c# - 我是否需要为抽象类提供一个空的受保护构造函数？

> ID：11838679
> 
> 赞同：1
> 
> 时间：2012-08-07T03:03:28.937
> 
> 标签：c#, .net, abstract-class, design-guidelines

我知道抽象类中的构造函数应该在 C# 中受到保护。

但是一些抽象类不需要非无参构造函数。例如：

```
public abstract MyAbstractClass {
    public abstract Method1();
    public abstract Method2();
    // non-parameterless constructors are not needed
} 
```

我的问题是，在上面的类中，是否需要提供一个空的受保护构造函数来覆盖默认的隐式构造函数？那是：

```
public abstract MyAbstractClass {
    protected MyAbstractClass() { }

    public abstract Method1();
    public abstract Method2();
} 
```

**如果我不提供这个空的受保护构造函数，就会有一个隐式默认构造函数，它是公共的（对吗？）。**这打破了“抽象类中的构造函数不应该是公共的”的规则。

但是当我查看 ASP.NET MVC 框架的源代码时，我发现它们没有为抽象类提供空的受保护构造函数。所以，也许设计规则应该是：

**如果在抽象类中定义构造函数，它们不应该是公共的。**

**如果您不需要抽象类中的非无参数构造函数，请不要定义它们。**

有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T03:05:59.670

不，您不需要声明受保护的默认构造函数。如果您在抽象类的构造函数中没有任何事情要做，请不要声明一个。如果您确实有事要做，将其标记为受保护将与将其标记为公共相同，因为基本构造函数只能由子级调用，并且子级无论如何都具有受保护的访问权限。

# java - PagedListHolder 按关键字搜索而不使用 DAO

> ID：11838680
> 
> 赞同：0
> 
> 时间：2012-08-07T03:03:36.327
> 
> 标签：java, jakarta-ee, spring-mvc, spring-3, pagedlist

我实际上正在使用 Spring 3 MVC 并使用`PagedListHolder`从我的服务层传递方法以从 DB 表中获取所有行的分页列出数据，如下所示：

```
PagedListHolder myList = new PagedListHolder(myService.getAll()); 
```

**这是我的控制器代码：**

```
public class MyListController implements Controller {

    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception {

        String page = request.getParameter("page");

        MyService myService = new MyService();
        PagedListHolder myList = new PagedListHolder(myService.getAll());
        myList.setPageSize(5); 

        if ("next".equals(page)) {
            myList.nextPage();
        }
        else if ("previous".equals(page)) {
            myList.previousPage();
        }

        ModelAndView modelAndView = new ModelAndView("myList");
        modelAndView.addObject("myList", myList.getPageList());
        return modelAndView;
    }
} 
```

所以，这是完美的，但我现在想`myList`通过使用关键字进行搜索，我认为通常的方式可能是在`DAO`和`Service`层中实现方法，例如：

```
...
String keyword = request.getParameter("keyword");
PagedListHolder myList = new PagedListHolder(myService.findByWord(keyword));
... 
```

此时`myList`将返回数据库中与我的关键字匹配的所有行。

我想知道的是是否有一种方法可以搜索`myList`（使用`myService.getAll();`方法，也许还有其他方法`PagedListHolder`），并避免修改`DAO`和`Service`层，以免创建额外的方法，就像我在上面的示例中使用的方法一样。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T04:40:14.807

中没有搜索方法`PagedListHolder`。你可以在[这里](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring/2.5.5/org/springframework/beans/support/PagedListHolder.java)查看代码。

此外，如果您使用 Maven 和 STS（或者也可能是 Eclipse），您可以通过**Open Type**命令检查代码。快捷方式是`Ctrl``Shift``T`。

# java - Java：将双向链表的arraylist作为参数传递

> ID：11838681
> 
> 赞同：1
> 
> 时间：2012-08-07T03:04:04.867
> 
> 标签：java, arraylist, parameter-passing, doubly-linked-list

大师，我很难将双向链表的数组列表作为参数传递。

我需要在涉及链表的数据结构中表示方阵。我决定使用双向链表的arraylist。从文本文件中读取的矩阵信息存储在：

```
ArrayList<DoubleLinkedList<Integer>> dLLArrayList 
```

读入第一个输入后，dllArryList 有内容`"[[5]]"`

我尝试通过调用自定义 Matrix 类的构造函数来创建一个新的矩阵对象：

```
Matrix mx1 = new Matrix (dimension, dLLArrayList); 
```

** 维度只是一个 int 变量，用于存储矩阵的大小，例如 1 表示 1 x 1 矩阵，如输入文本文件中所示。

但是，当我尝试打印出 Matrix 类中的矩阵内容时，它返回`"[[]]":`

```
System.out.println (this.getMatrixArrayList()); 
```

这是矩阵类中的 set 方法，假设设置 Matrix 对象的 ArrayList 元素：

```
public void setMatrixArrayList(ArrayList<DoubleLinkedList<Integer>> matrixArrayList) {
    for(int i = 0; i < matrixArrayList.size(); i ++){
        for (int j = 0; j < matrixArrayList.get(i).size(); j ++) {
            this.rowItemList.add(matrixArrayList.get(i).get(j));
        }
        this.matrixArrayList.add(this.rowItemList);
        this.rowItemList.clear();
    }
} 
```

有什么理由这行不通吗？建议、意见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T03:36:45.223

The problem is that you clear the rowItemList. When you add the rowItemList to the arraylist you just put the reference there. So when you clear it later the linkedlist just added inside the arraylist is also cleared. You need to clone the rowItemList when you add it in the outer list.

```
public void setMatrixArrayList(ArrayList<DoubleLinkedList<Integer>> matrixArrayList) {
for(int i = 0; i < matrixArrayList.size(); i ++){
    for (int j = 0; j < matrixArrayList.get(0).size(); j ++) {
        this.rowItemList.add(matrixArrayList.get(0).get(j));
    }
    this.matrixArrayList.add(this.rowItemList.clone());
    this.rowItemList.clear();
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T03:17:55.393

你不使用`i`任何地方。

我怀疑你想要：

```
for (int j = 0; j < matrixArrayList.get(i).size(); j ++) {
        this.rowItemList.add(matrixArrayList.get(i).get(j));
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T03:18:11.647

ArrayList 或 LinkedList 只是其他链表的数组

所以我假设

```
public ArrayList<ArrayList> methodTest(ArrayList<ArrayList> doubleList) {} 
```

会工作

# python - 如何使用pygtk或pango获取系统使用的默认字体？

> ID：11838687
> 
> 赞同：2
> 
> 时间：2012-08-07T03:05:58.193
> 
> 标签：python, pygtk, pango, pangocairo

我有一个使用 pygtk 的字体按钮。最初，我不想设置字体，因为系统将采用默认字体。我的问题是获取系统使用的默认字体的代码行是什么，所以我一开始就保持默认。稍后用户更改字体后，应应用其各自的字体。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T21:10:28.423

如果你在 GNOME 上，那么你可以像这样获得默认字体。（注意：未经测试）

```
from gi.repository import Gio
settings = Gio.Settings('org.gnome.desktop.interface')
font_name = settings.get_string('font-name') 
```

您也可以根据需要使用键`monospace-font-name`和`document-font-name`（我忘记了窗口标题字体的键名。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-02T10:40:34.863

在*PyGObject 上*，这适用于默认字体：

```
settings = Gtk.Settings.get_default()
font_name = settings.get_property('gtk-font-name')

print(font_name)
# 'Cantarell 11' 
```

不幸的是，我还没有找到访问等宽字体或任何其他字体的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T07:43:40.827

Gtk 是一个可以在许多操作系统和桌面环境上运行的工具包。Gtk 不对默认字体和颜色负责。因此（据我所知）没有单一的函数可以**从 Gtk**获取这些值。

您的 OS/DE 中可能没有**一种默认字体，但有很多。**例如，在 Ubuntu 上，您可以在（高级）系统设置中选择：

![在此处输入图像描述](../Images/95354dd1dd635076acb8f0228252167d.png)

如果您**需要**知道特定小部件的默认字体，例如标签，您可以执行以下操作：

```
from gi.repository import Gtk
l = Gtk.Label("Hello")
ls = l.get_style()
ls.font_desc.to_string()
# Ubuntu 11 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-19T04:42:43.503

有点晚了，但是如果将来有人遇到这种情况，一种巧妙的方法是使用`pygame`. 当然，这需要您安装和导入 pygame 并对其进行初始化！

```
import pygame
pygame.font.init()
def_font = pygame.font.get_default_font() 
```

# java - DocumentFilter 只允许将数字和句点 (.) 放入 JTextField？

> ID：11838689
> 
> 赞同：4
> 
> 时间：2012-08-07T03:06:23.650
> 
> 标签：java, swing, jtextfield, replaceall, documentfilter

\这里是 JTextField 的创建：

```
hourlyWageInput = new JTextField("7.25");
DocumentFilter filter = new UppercaseDocumentFilter();
((AbstractDocument) hourlyWageInput.getDocument()).setDocumentFilter(filter);
hourlyWageInput.setHorizontalAlignment(JTextField.CENTER);
add(hourlyWageInput); 
```

这是我的文档过滤器：

```
import javax.swing.text.BadLocationException;
import javax.swing.text.DocumentFilter;

public class UppercaseDocumentFilter extends DocumentFilter {

 public void replace(DocumentFilter.FilterBypass fb, int offset, int length,
      String text, javax.swing.text.AttributeSet attr)

      throws BadLocationException {
           fb.insertString(offset, text.replaceAll("\\D", ""), attr);   
 }
} 
```

这会自动从 JTextField 中删除所有字母和字符。

但是，我想知道是否有人知道所有命令都类似于“\D”的地方。我花了一段时间才找到正确的信息。

此外，我现在拥有的代码也可以防止 . 不是我在使用双打时需要的类型。有任何想法吗？

谢谢！令人惊讶的是我今天学到了很多东西。我已经连续编码了 13 个小时。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T03:43:59.083

该`replaceAll`函数采用正则表达式。您可以从许多在线教程（请参阅 @Hovercraft Full Of Eels 评论）或直接从 Java api 中学习一些关于正则表达式的知识：http: [//docs.oracle.com/javase/6/docs/api/java/util/正则表达式/Pattern.html](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)

本质上，您可以将任何正则表达式构造（在上面的链接中列出）组合在一起以形成正则表达式。例如，如果您想确保只有 0-9 和 . 被允许，您可以使用：

```
text.replaceAll("[^0-9.]", "") 
```

# php - 无法检索单选按钮值

> ID：11838693
> 
> 赞同：0
> 
> 时间：2012-08-07T03:06:39.750
> 
> 标签：php, forms

我有一个表单，无法使用 php 检索单选按钮的值。我已经搜索过了，可以找到很多像这样的问题，但似乎没有一个答案有帮助。

形式：

```
 <form method="post" action="wpurse.php" name="contactform" id="weddingform">

        <fieldset>
        <h4>Wedding Details</h4>
        <label for="bname" accesskey="A"><span class="required">*</span> Bride&rsquo;s name</label>
        <input name="bname" type="text" id="bname" size="30" value="" />

        <label for="gname" accesskey="B"><span class="required">*</span> Groom&rsquo;s name</label>
        <input name="gname" type="text" id="gname" size="30" value="" />

        <label for="weddate" accesskey="C"><span class="required">*</span> Wedding date (DD/MM/YYYY)</label>
        <input  name="weddate" type="text" id="weddate" />

        <label for="venue" accesskey="D"><span class="required">*</span> Venue</label>
        <input type="text" id="venue" name="venue"/>

        <label for="guestsno" accesskey="D"><span class="required">*</span> Number of guests</label>
        <input type="text" id="guestsno" name="guestsno"/>

        <h4>Bride &amp; Groom Details</h4>
    <label for="address" accesskey="E"><span class="required">*</span> Contact address</label>
    <input type="text" id="address" name="address" />

        <label for="bemail" accesskey="F"><span class="required">*</span> Bride&rsquo;s email</label>
        <input name="bemail" type="text" id="bemail" size="30" value="" />

        <label for="bphone" accesskey="G"><span class="required">*</span> Bride&rsquo;s phone</label>
        <input name="bphone" type="text" id="bphone" size="30" value="" />

        <label for="gemail" accesskey="H"><span class="required">*</span> Groom&rsquo;s email</label>
        <input name="gemail" type="text" id="gemail" size="30" value="" />

        <label for="gphone" accesskey="I"><span class="required">*</span> Groom&rsquo;s phone</label>
        <input name="gphone" type="text" id="gphone" size="30" value="" />

        <label>Will you require invitation inserts?</label>
        <label for="inserts0"> YES</label>
        <input type="radio" id="inserts0" name="inserts" value="Yes" class="inscheck" onclick="toggleAdditionalElements(this.value);"/>
        <label for="inserts1"> NO</label>
        <input type="radio" id="inserts1" name="inserts" value="No" class="inscheck" onclick="toggleAdditionalElements(this.value);"/>

        <div id="AdditionalElements" style="display: none;">
                    <label for="qty" accesskey="I">Quantity required</label>
                    <input name="qty" type="text" id="qty" value="" />
        </div>

        <label for="comments" accesskey="C"><span class="required">*</span> Your comments</label>
        <textarea name="comments" cols="40" rows="3" id="comments" style="width: 350px;"></textarea>

        <p><span class="required">*</span> Are you human?</p>

        <label for="verify" accesskey="V">&nbsp;&nbsp;&nbsp;3 + 1 =</label>
        <input name="verify" type="text" id="verify" size="4" value="" style="width: 30px;" /><br /><br />

        <input type="submit" class="submit" id="submit" value="Submit" />

        </fieldset>

        </form>

<script type="text/javascript">

    function toggleAdditionalElements(val) {
        if(val == "Yes")
            jQuery("#AdditionalElements").show(200);
        else
            jQuery("#AdditionalElements").hide(200);
    }
</script> 
```

PHP处理：

```
 <?php    
if(!$_POST) exit;

function isEmail($bemail) {
    return(preg_match("/^[-_.[:alnum:]]+@((([[:alnum:]]|[[:alnum:]][[:alnum:]-]*[[:alnum:]])\.)+(ad|ae|aero|af|ag|ai|al|am|an|ao|aq|ar|arpa|as|at|au|aw|az|ba|bb|bd|be|bf|bg|bh|bi|biz|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|com|coop|cr|cs|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|in|info|int|io|iq|ir|is|it|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mil|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|museum|mv|mw|mx|my|mz|na|name|nc|ne|net|nf|ng|ni|nl|no|np|nr|nt|nu|nz|om|org|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|pro|ps|pt|pw|py|qa|re|ro|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw)$|(([0-9][0-9]?|[0-1][0-9][0-9]|[2][0-4][0-9]|[2][5][0-5])\.){3}([0-9][0-9]?|[0-1][0-9][0-9]|[2][0-4][0-9]|[2][5][0-5]))$/i",$bemail));
}

if (!defined("PHP_EOL")) define("PHP_EOL", "\r\n");

$bname     = $_POST['bname'];
$gname     = $_POST['gname'];
$weddate    = $_POST['weddate'];
$venue    = $_POST['venue'];
$guestsno    = $_POST['guestsno'];
$address    = $_POST['address'];
$bemail    = $_POST['bemail'];
$bphone   = $_POST['bphone'];
$gemail    = $_POST['gemail'];
$gphone   = $_POST['gphone'];
$inserts    =$_POST['inserts'];
$qty   = $_POST['qty'];
$comments = $_POST['comments'];
$verify   = $_POST['verify'];

if(trim($bname) == '') {
    echo '<div class="error_message">Attention! You must enter the Bride&rsquo;s name.</div>';
    exit();
} else if (trim($gname) == '') {
    echo '<div class="error_message">Attention! You must enter the Groom&rsquo;s name.</div>';
    exit();
} else if(trim($weddate) == '') {
    echo '<div class="error_message">Attention! Please enter the wedding date (DD/MM/YYYY).</div>';
    exit();
} else if(trim($venue) == '') {
    echo '<div class="error_message">Attention! Please enter the wedding venue.</div>';
    exit();
} else if(trim($guestsno) == '') {
    echo '<div class="error_message">Attention! Please enter an approx number of guests.</div>';
    exit();
} else if(trim($address) == '') {
    echo '<div class="error_message">Attention! Please enter the best postal address to contact the Bride and/or Groom.</div>';
    exit();
} else if(trim($bemail) == '') {
    echo '<div class="error_message">Attention! Please enter a valid email address for the Bride.</div>';
    exit();
} else if(trim($bphone) == '') {
    echo '<div class="error_message">Attention! Please enter a valid phone number for the Bride.</div>';
    exit();
} else if(trim($gemail) == '') {
    echo '<div class="error_message">Attention! Please enter a valid email address for the Groom.</div>';
    exit();
} else if(trim($gphone) == '') {
    echo '<div class="error_message">Attention! Please enter a valid phone number for the Groom.</div>';
    exit();
} else if(!is_numeric($bphone)) {
    echo '<div class="error_message">Attention! The Bride&rsquo;s phone number can only contain digits.</div>';
    exit();
} else if(!is_numeric($gphone)) {
    echo '<div class="error_message">Attention! The Groom&rsquo;s phone number can only contain digits.</div>';
    exit();
} else if(!isEmail($bemail)) {
    echo '<div class="error_message">Attention! You have enter an invalid e-mail address for the Bride, try again.</div>';
    exit();
} else if(!isEmail($gemail)) {
    echo '<div class="error_message">Attention! You have enter an invalid e-mail address for the Groom, try again.</div>';
    exit();
} else if (trim($inserts) == '') {
    echo '<div class="error_message">Attention! Please indicate if you will require invitation inserts</div>';
    exit();
} else if(trim($subject) == '') {
    echo '<div class="error_message">Attention! Please enter a subject.</div>';
    exit();
} else if(trim($comments) == '') {
    echo '<div class="error_message">Attention! Please enter your message.</div>';
    exit();
} else if(!isset($verify) || trim($verify) == '') {
    echo '<div class="error_message">Attention! Please enter the verification number.</div>';
    exit();
} else if(trim($verify) != '4') {
    echo '<div class="error_message">Attention! The verification number you entered is incorrect.</div>';
    exit();
}

if(get_magic_quotes_gpc()) {
    $comments = stripslashes($comments);
}   

$address = "email@address.com";

$e_subject = 'Wedding purse registration - ' . $bname . '.';

$e_body = "Details below" . PHP_EOL . PHP_EOL;
$e_content = "\"$comments\"" . PHP_EOL . PHP_EOL;
$e_reply = "You can contact $name via email, $bemail or via phone $bphone";

$msg = wordwrap( $e_body . $e_content . $e_reply, 70 );

$headers = "From: $bemail" . PHP_EOL;
$headers .= "Reply-To: $bemail" . PHP_EOL;
$headers .= "MIME-Version: 1.0" . PHP_EOL;
$headers .= "Content-type: text/plain; charset=utf-8" . PHP_EOL;
$headers .= "Content-Transfer-Encoding: quoted-printable" . PHP_EOL;

if(mail($address, $e_subject, $msg, $headers)) {

    echo "<fieldset>";
    echo "<div id='success_page'>";
    echo "<h1>Email Sent Successfully.</h1>";
    echo "<p>Thank you <strong>$bname</strong>, your message has been submitted to us.</p>";
    echo "</div>";
    echo "</fieldset>";

} else {

    echo 'ERROR!';

} 
```

查询：

```
jQuery(document).ready(function(){

$('#weddingform').submit(function(){

    var action = $(this).attr('action');

    $("#message_box").slideUp(750,function() {
    $('#message_box').hide();

    $('#submit')
        .after('<img src="assets/ajax-loader.gif" class="loader" />')
        .attr('disabled','disabled');

    $.post(action, {
        bname: $('#bname').val(),
        gname: $('#gname').val(),
        weddate: $('#weddate').val(),
        venue: $('#venue').val(),
        guestsno: $('#guestsno').val(),
        address: $('#address').val(),
        bemail: $('#bemail').val(),
        bphone: $('#bphone').val(),
        gemail: $('#gemail').val(),
        gphone: $('#gphone').val(),
        inserts: $('#inserts').val(),
        qty: $('#qty').val(),
        comments: $('#comments').val(),
        verify: $('#verify').val()
    },
        function(data){
            document.getElementById('message_box').innerHTML = data;
            $('#message_box').slideDown('slow');
            $('#contactform img.loader').fadeOut('slow',function(){$(this).remove()});
            $('#submit').removeAttr('disabled');
            if(data.match('success') != null) $('#contactform').slideUp('slow');

        }
    );

    });
    return false;
}); 
```

});

我知道这可能是一个[切换问题](https://stackoverflow.com/questions/3086825/radio-button-value-not-in-post)，但即使我切换收音机，我仍然会得到“未选择任何内容”。

该表单在没有单选按钮的情况下完美运行，因此问题肯定出在它们身上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T03:30:39.360

`inserts: $('#inserts').val(),`那是你的问题。您没有 ID 为“插入”的输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T03:39:05.177

您必须`inserts: $('input[name=inserts]:checked').val(),`在您的 jQuery 表单提交部分中使用。

这应该有效。试试这个。

您不能按 ID 选择单选组，因为单选按钮很多。通过使用 ID，它将只选择一个，而无线电组则不是这样。单选按钮将在一个组中，并将在组内共享一个通用名称。因此，我们可以使用基于上述名称的选择器。

# android - ActionBarSherlock 只显示两个菜单项

> ID：11838696
> 
> 赞同：1
> 
> 时间：2012-08-07T03:07:10.233
> 
> 标签：android, actionbarsherlock

我有各种各样的菜单项——有些是用 Java 代码定义的，有些是用 XML 定义的。

XML 中的那些都`orderInCategory`设置为很高的值。

在代码中定义的项目中，有些有图标，有些没有。仅在带有图标的项目上`setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM)`调用。

所以，我期待的是出现一堆图标（尽可能多地出现），而其他所有东西都溢出了。但是，我得到的只是操作栏中的两个图标，其他所有图标都溢出了。

不确定缺少什么。这是在运行 Froyo 的 Archos 43 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T04:05:50.703

好吧，这只是正常的行为......

[https://groups.google.com/forum/?fromgroups#!topic/actionbarsherlock/9dfnA2hnNXg](https://groups.google.com/forum/?fromgroups#!topic/actionbarsherlock/9dfnA2hnNXg)

# solr - Solr 地理查询以查找对象的相交半径

> ID：11838700
> 
> 赞同：1
> 
> 时间：2012-08-07T03:07:33.273
> 
> 标签：solr, solrj

我需要返回半径相交的所有对象。换句话说，两个物体的半径之和大于它们之间的距离。

例如，假设我有以下对象，我的搜索中心是 A

```
A, radius=3k
B, radius=5k, distance from A = 6k
C, radius=15k, distance from A = 100k 
```

使用上面的对象，如果我的搜索中心是对象 A，我只需要返回对象 B。系统中可能有数千个对象，搜索中心可以在其中任何一个。

我已经用 solr 实现了简单的地理距离过滤（即给我从 A 开始的所有 3k 的东西），但我不确定从哪里开始这个查询。这可能与Solr有关吗？我可以访问数据，因此在将文档加载到 solr 之前，我可以预先计算任何必要的值来帮助查询。另外，我正在使用 Solr 4。

提前致谢！

**编辑：**

我突然想到，我真正需要的是获取 A（搜索中心）的半径以及在查询本身中检查的任何其他对象，以便我可以使用它们之间的差异。我现在使用的查询只返回点 x,y 3k 内的任何内容：

```
fl=*,_dist_:geodist()&fq={!geofilt}&pt=x,y&sfield=location&d=3&q=*:* 
```

参数`d=3`需要类似于. `d=(doc1.radius + doc2.radius) >= _dist_`我想问题是如何引用查询中正在比较的文档的元素？我可以`_dist_`在查询中使用伪字段作为值吗？

# linux - 如何在 linux 使用 qt 中将窗口置于顶部？

> ID：11838705
> 
> 赞同：1
> 
> 时间：2012-08-07T03:08:13.110
> 
> 标签：linux, qt

我尝试使用`QWidget::activatedWindows()`，但它没有工作！那么我怎样才能把`QWidget`其他窗口带到顶层呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T03:13:54.823

这可能会起作用：

```
window->setWindowFlags(Qt::WindowStaysOnTopHint); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T02:11:39.350

但`QWidget::raise()`会工作。

# html - 从表单中的 1 个选择标记中获取多个值以显示在表中的不同字段中

> ID：11838708
> 
> 赞同：0
> 
> 时间：2012-08-07T03:09:08.037
> 
> 标签：html, html-select

这是我的“选择”标签代码：

```
<select name="val[Payee_Name]" required>
    <option value="101| A">A</option>
    <option value="102| B">B</option>
    <option value="103| C">C</option>
</select> 
```

我希望值 (101,102,103) 显示在表中的不同字段（`Payee_Code`字段，而不是`Payee_Name`字段）中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T04:56:58.367

提交表单后，您可以轻松获取表单数据中的 payee_code。您也不需要`payee_code | payee_name`在选项值中使用。你可以接受`payee_code`它，然后点击提交按钮。您可以访问用户选择的 payee_code。

让我们考虑一下如果您使用的是 PHP，那么您可以这样做：

```
<form method="post" action="check_payer.php">
   <select name="Payee_Name" required>
       <option value="101">A</option>
       <option value="102">B</option>
       <option value="103">C</option>
   </select>
   <input type="submit" name="submit" value="Submit"/>
</form> 
```

在你的`check_payer.php`

```
<?php 
   if($_POST)
   {
      if($_POST['Payee_Name'] == '101')
      {
         echo 'A'; // You can also make it dynamic if you are using any database.
      }
      else if($_POST['Payee_Name'] == '102')
      {
         echo 'B';
      }
   }    
?> 
```

请询问它是否不适合您。

# c# - 是否可以有多个“参数”参数？

> ID：11838709
> 
> 赞同：41
> 
> 时间：2012-08-07T03:09:34.367
> 
> 标签：c#, parameters, params

`params`C#中可以有多个参数吗？像这样的东西：

```
void foobar(params int[] foo, params string[] bar) 
```

但我不确定这是否可能。如果是，编译器将如何决定在哪里拆分参数？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-07T03:11:38.287

你只能有一个 params 参数。您可以有两个数组参数，调用者可以使用数组初始化器来调用您的方法，但只能有一个 params 参数。

```
void foobar(int[] foo, string[] bar)

...

foobar(new[] { 1, 2, 3 }, new[] { "a", "b", "c" }); 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-08-07T03:12:00.450

不，这是不可能的。拿着这个：

```
void Mult(params int[] arg1, params long[] arg2) 
```

编译器应该如何解释这个：

```
Mult(1, 2, 3); 
```

它可以被解读为以下任何一种：

```
Mult(new int[] {         }, new long[] { 1, 2, 3 });
Mult(new int[] { 1       }, new long[] {    2, 3 });
Mult(new int[] { 1, 2    }, new long[] {       3 });
Mult(new int[] { 1, 2, 3 }, new long[] {         }); 
```

但是，您可以像这样将两个数组作为参数：

```
void Mult(int[] arg1, params long[] arg2) 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-05-17T18:24:50.143

I know this is a super old post, but here:

In C# 7, you actually can. You can use `System.ValueTuple` to do this:

```
private void Foobar(params (int Foo, string Bar)[] foobars)
{
    foreach (var foobar in foobars)
        Console.WriteLine($"foo: {foobar.Foo}, bar: {foobar.Bar}");   
} 
```

And then you can use it like this:

```
private void Main() => Foobar((3, "oo"), (6, "bar"), (7, "baz")); 
```

And the obvious output:

```
Foo: 3, Bar: foo
Foo: 6, Bar: bar
Foo: 7, Bar: baz 
```

The only downside is you have to do this: `foobars[0].foo;` instead of `foos[0];`, but that's really a tiny tiny issue. Besides, if you really wanted to, you could make some extension or function to convert them to arrays, though I don't think that's really worth it.

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-08-07T03:24:22.527

来自[MSDN - 参数](http://msdn.microsoft.com/en-us/library/w5zay9db.aspx)

> 方法声明中 params 关键字后面不允许有附加参数，方法声明中**只允许有一个 params 关键字**。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-08-07T03:12:23.807

不，只允许一个参数，即使这也必须是最后一个参数。读[这个](http://msdn.microsoft.com/en-us/library/w5zay9db.aspx)

这将起作用

```
public void Correct(int i, params string[] parg) { ... } 
```

但这行不通

```
public void Correct(params string[] parg, int i) { ... } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-07T03:13:24.183

这是不可能的。每个方法声明可能只有一个 params 关键字 - 来自 MSDN - [http://msdn.microsoft.com/en-us/library/w5zay9db(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/w5zay9db(v=vs.71).aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-07T03:15:35.177

```
void useMultipleParams(int[] foo, string[] bar)
{
}

useMultipleParams(new int[]{1,2}, new string[] {"1","2"}) 
```

# hadoop - Hadoop (1.0.1) 使用 libssl 编译错误

> ID：11838722
> 
> 赞同：2
> 
> 时间：2012-08-07T03:11:54.223
> 
> 标签：hadoop

出于某种原因，我需要使用以下命令编译 Hadoop：

```
$ ant compile -Dcompile.c++=true -Dlibhdfs=true 
```

然后它结束了以下信息：

```
[exec] checking for HMAC_Init in -lssl... 
[exec] configure: error: Cannot find libssl.so
[exec] /home/cshou/Documents/Lab/hadoop-1.0.1/src/c++/pipes/configure: line 5166: exit: please: numeric argument required
[exec] /home/cshou/Documents/Lab/hadoop-1.0.1/src/c++/pipes/configure: line 5166: exit: please: numeric argument required
[exec] no

BUILD FAILED
/home/cshou/Documents/Lab/hadoop-1.0.1/build.xml:2102: exec returned: 255 
```

然后我检查了（我使用的是 Ubuntu 12.04）

```
$ apt-cache search libssl 
```

然后我得到了

```
libssl-dev - SSL development libraries, header files and documentation
libssl-doc - SSL development documentation documentation
libssl1.0.0 - SSL shared libraries
libssl1.0.0-dbg - Symbol tables for libssl and libcrypto
dcmtk - OFFIS DICOM toolkit command line utilities
libcherokee-mod-libssl - Cherokee web server - SSL crypto functions plugin
libdcmtk2 - OFFIS DICOM toolkit runtime libraries
libdcmtk2-dev - OFFIS DICOM toolkit development libraries and headers
libssl-ocaml - OCaml bindings for OpenSSL (runtime)
libssl-ocaml-dev - OCaml bindings for OpenSSL
libssl0.9.8 - SSL shared libraries
libssl0.9.8-dbg - Symbol tables for libssl and libcrypto
libsslcommon2 - enterprise messaging system - common SSL libraries
libsslcommon2-dev - enterprise messaging system - common SSL development files 
```

看来我确实安装了 libssl 库...

我用谷歌搜索了很多，只找到了 0.20.0 的补丁，应该已经在 1.0.1 中修复了。

谁能帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-22T03:04:09.753

it is a bug,after add a path,it works. [https://issues.apache.org/jira/browse/MAPREDUCE-2127](https://issues.apache.org/jira/browse/MAPREDUCE-2127)

# api - 您将如何记录由供应商（而不是客户端）启动的 API 例程？

> ID：11838729
> 
> 赞同：-1
> 
> 时间：2012-08-07T03:12:37.693
> 
> 标签：api, rest

我们正在开发一个 REST API，除了开发人员可以访问的各种资源之外，我们的应用程序还会将信息发送到客户端服务器上的侦听器脚本。

我们的 API 文档列出了客户端应用程序可以访问的所有“资源”。那部分很容易。

但是我们应该如何列出我们的应用程序将 POST 内容到客户端侦听器脚本的各种 %???% 呢？

作为开发人员，您希望如何命名这些 %???%？

谢谢

注 1：我使用 %???% 因为我不知道如何称呼它们。注2：我第一次发布到stackoverflow，如果我没有遵守协议，请道歉。

**编辑**

抱歉，不清楚。

我们的 API 接收来自客户的请求。它还向客户端发送请求。

例如，当客户端收到一条消息时，我们会将该消息发送到他们的服务器。或者，当他们之前发送的其中一条消息的状态已更新时，我们会将更新发送到他们的服务器。

或者，以 Twitter 为例（假设我们是 Twitter），当你在一条推文中被提及时，我们将这条推文的详细信息发送到你的服务器

当客户端向我们的 API 发送请求时，这被描述为“访问资源”并且文档列出了“资源”。

但是当我们的 API 向客户端发送请求时，我们怎么称呼它呢？例如 API 发起的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T03:21:04.423

参数？

只要有一些约定，我不在乎它们是如何命名的！

# java - 在Java中将对象序列化为json？

> ID：11838730
> 
> 赞同：0
> 
> 时间：2012-08-07T03:12:54.317
> 
> 标签：java, json, struts2, gson

我首先使用以下代码尝试使用 gson 序列化 Adwords API 中的 Campaign 实例：

```
Campaign c = new Campaign(); 
c.setName("beijing");
c.setId(23423L);
Gson gson = new Gson();
String json = gson.toJson(c); 
```

我得到一个例外，即 Money 类声明了多个名为 __equalsCalc 的 JSON 字段。当我尝试使用下面的代码使用 struts2 的 json 插件序列化实例时

```
String str = org.apache.struts2.json.JSONUtil.serialize(c);
System.out.println(str); 
```

它工作并输出正确的结果

```
{"adServingOptimizationStatus":null,"biddingStrategy":null,"budget":null,"campaignStats":null,"conversionOptimizerEligibility":null,"endDate":null,"frequencyCap":null,"id":23423,"name":"beijing","networkSetting":null,"servingStatus":null,"settings":null,"startDate":null,"status":null} 
```

那么我的问题是，为什么struts2的json插件可以正确序列化实例而gson不能呢？我可以使用 struts2 的 json 插件将对象序列化为 json，因为它的设计目的是在 struts2 中生成 json 结果，而不是针对这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:06:39.183

您可以使用`json`struts2 中的插件手动将您的对象序列化为`json`字符串。您可以通过调用`serialize`静态方法来做到这一点。

```
String jsonString = JSONUtil.serialize(your_object); 
```

不要忘记`xwork-core`在你的类路径中包含 jar，因为它依赖于它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T03:36:15.510

Sounds like either a bug in Gson or it is more particular/less robust. Without looking at the code for either it would be hard to know more.

Personally I use [Jackson](http://wiki.fasterxml.com/JacksonInFiveMinutes) for JSON to POJO transformations.

Ultimately as long as the Structs2 plugin is available on your classpath I don't see why you couldn't leverage it's classes to handle JSON transformations. Ultimately JSON is a format therefore all JSON libraries need to produce commonly understandable data.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-06T08:42:52.230

我有一个类似的问题，并通过将我对 SimpleDateFormat 的使用从类级别移到方法内部来解决它。GSON 不必以这种方式序列化 SimpleDateFormat。

希望这对某人有所帮助 - 45 分钟的头部撞击我！:-)

# android - 引入类、对象的概念？

> ID：11838738
> 
> 赞同：0
> 
> 时间：2012-08-07T03:13:51.823
> 
> 标签：android, arrays, string, class, listadapter

我是新来的，所以这里的某些事情仍然很模糊。
&我对以下代码有点困惑。

```
public class SmsActivity extends ListActivity { 
private String[] mSmsReceiver; 
public SmsActivity(){
mSmsReceiver = new SmsReceived();

setListAdapter(new ArrayAdapter<String>(this, R.layout.main,mSmsReceiver)); 
```

## 我的理解：（应该是错的）

第 1 行：超类`SmsActivity`下的类`ListActivity`
第 2 行：我介绍一个字符串数组术语名称：`mSmReceiver`
第 3 行：调用方法`SmsActivity()`
第 4 行：内部`SmsActivity`方法，`mSmsReceiver`（字符串数组）调用方法 SmsReceived
第 5 行：（`ArrayAdapter`以字符串形式，加载信息。 mSmsReceiver) 加载到`setListAdapter`

我的问题：

1.  请纠正我对上面代码的理解。
2.  第5行，`this`指的是什么？
    （我在互联网和书籍上查看过，它总是说上下文。但我完全不知道上下文到底是什么意思，任何人都可以解释这里所指的上下文是什么？）

完整代码：

```
 import...
    ....   

    public class SmsActivity extends ListActivity {
    private String[] mSmsReceiver;
    public SmsActivity(){
    mSmsReceiver = new SmsReceived();

    setListAdapter(new ArrayAdapter<String>(this, R.layout.main,mSmsReceiver));

    ListView listView = getListView();
    listView.setTextFilterEnabled(true);

    //---method is call when listitem is clicked---
    listView.setOnItemClickListener(new OnItemClickListener() {edit later});
    }

    private class SmsReceived extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) 
    {..... }
    }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T03:43:55.777

基本上这是一个名为`SmsActivity`.

您对第 1 行和第 2 行是正确的。更准确地说，`mSmReceiver`是 class 的私人编号`SmsActivity`。

第 3 行应该是我不确定的构造函数，因为我不是 android 开发人员，我听说它`onCreate`在`Activity`. 但无论如何，这`calling the method`不仅仅是它的定义。构造函数将用于初始化类。

和第 4 行`mSmsReceiver(a string array) call method SmsReceived`。不是这样的，会的`initialize mSmsReceiver with an object, which is an instance of class SmsReceived`。

第 5 行`this`是指类`SmsActivity`。在类`this`中几乎总是指它所在的类。这提供了一个上下文，因此您可以使用`this.someMumber`or `this.someFunction`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T03:42:59.973

Java中的关键字“this”基本上是对其所在类的引用。例如：

```
public class MyClass {
    MyClass myVar = this;
} 
```

这会将 MyClass 类的实例放入该变量中。它为您提供了您所在的任何类的实例。如果您在方法中调用它：

```
public void myMethod() {
    MyClass m = this;
} 
```

这将为您提供调用 myMethod 的任何类的实例。天气它是 MyClass 的实例或 MyClass 的子类的实例。用于调用该方法的任何实例都将放在 m 变量中。

因此，当您在 Activity 中调用“this”时，它会为您提供该 Activity 的实例。

# php - 设置 PHPSESSID Cookie、CORS

> ID：11838739
> 
> 赞同：3
> 
> 时间：2012-08-07T03:13:53.473
> 
> 标签：php, javascript, jquery, ajax, cors

我执行`$.ajax`调用以从*host2查询主**host1*。

 *`Access-Control-Allow-Origin: host2`*标头在host1*上发送。

**问题**：我需要进行身份验证，但是由于 CORS，没有为*host1设置 PHP 会话。*

**问题**：我是否需要提取从*host1*返回的 PHPSESSID Set-Cookie 标头并将其设置回同一主机*host1*？

```
// On Host2
$.ajax({
    url: 'http://Host1/User/Login/',
    dataType: 'text',
    type: 'POST',
    data: {Id:Id,UserName:UserName},
    success: function(data) {
        $('#result').html(data);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T02:01:02.670

```
Access-Control-Allow-Origin: * 
```

您的 host1 需要像这样在响应标头中设置属性。*

# javascript - 字体调整最大大小

> ID：11838741
> 
> 赞同：2
> 
> 时间：2012-08-07T03:13:54.633
> 
> 标签：javascript, jquery

我的网站有一个字体大小调整器。我需要为调整大小设置最大大小。

大小调整器可以工作，但不确定为什么我的最大值不起作用？

```
// Reset Font Size
var targetContainers = $('.one-third, .two-thirds');
var originalFontSize = $(targetContainers).css('font-size');

// Increase Font Size
$(".resize-larger").click(function() {
    var currentFontSize = $(targetContainers).css('font-size');
    var maxSize = $('18');

    if (currentFontSize < maxSize) {

        var currentFontSizeNum = parseFloat(currentFontSize, 10);
        var newFontSize = currentFontSizeNum * 1.2;
        $(targetContainers).css('font-size', newFontSize);
        return false;

    }

});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T04:13:52.350

**参考：** [**jsFiddle**](http://jsfiddle.net/D5kUS/)

`font-size`我已经修改了您原来的想法，并说明了当使用 jQuery获取 CSS 时，单元（例如， `px`）得到正确处理。`maxSize`字体大小将“上限”为您在变量中指定的最大值。

**HTML：**

```
<div class="resize-larger">[+] Increase Font Size</div>   <br /><br />

<p class="one-third">This is a test</p> <br /><br />

<p class="two-thirds">This is a test</p> <br /><br />

<br /><br /><br />

<div id="results">Current font-size: </div> 
```

**CSS：**

```
.resize-larger {
    width: 175px;
    height: 40px;
    line-height: 40px;
    background-color: yellow;
    color: red;
    border: 1px solid red;
    margin: 10px;
    text-align: center;
}

p {
    font-size: 12px;
    font-family: Arial;
    font-weight: bold;
    color: blue;
} 
```

**jQuery：**

```
// Reset Font Size
var targetContainers = $('.one-third, .two-thirds');

// Increase Font Size
$(".resize-larger").click(function() {

    var currentFontSize = parseFloat($(targetContainers).css('font-size'), 10);

    var maxSize = 18;

    // This 'if' is 'true' when var maxsize (a number) is larger than var currentFontsize (also a number).
    if (currentFontSize < maxSize) {

        var currentFontSizeNum = parseFloat(currentFontSize, 10);
        var newFontSize = currentFontSizeNum * 1.2;

        // Once the calculated newFontSize value is obtained, it will be capped to maxSize if it's larger.
        if (newFontSize > maxSize) {
            newFontSize = maxSize;
        }

        // This will show the current font-size in the results div.
        $('#results').html('Current font-size: ' + newFontSize + 'px');

        // Apply the newFontSize value, adding in unit of 'px' to the current value.
        $(targetContainers).css('font-size', newFontSize + 'px');
        return false;

    }

});

// On page load, the results div will be populated with the current font size.
$('#results').html('Current font-size: ' + $(targetContainers).css('font-size')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T03:15:41.920

因为`$('18');`不是数字。不要过度使用 jQuery：

```
var maxSize = 18; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T04:07:12.217

这是解决方案：http: [//jsfiddle.net/pruGc/16/](http://jsfiddle.net/pruGc/16/)

```
// Reset Font Size
var targetContainers = ['.one-third', '.two-thirds'];

// Increase Font Size
$(".resize-larger").click(function() {
    var currentFontSize;
    var maxSize = 40;

    for (var i = 0; i < targetContainers.length; i++) {
        currentFontSize = parseInt($(targetContainers[i]).css('font-size'), 10);

        var newFontSize = currentFontSize * 1.2;
        if (newFontSize < maxSize) {
            $(targetContainers[i]).css('font-size', newFontSize);
        } else {
            $(targetContainers[i]).css('font-size', maxSize);
        }
    }
});​ 
```

我所做的不是拥有一个选定元素的数组，而是将它们的类名放在一个数组中，然后在`for`循环中使用它来获取数组中的每个元素，然后将每个元素设置为所需的大小。

这也使您能够`font-size`为每个元素设置不同的元素，并使每个元素单独变大。

出于某种原因，我知道为什么，但即使 css 属性设置在“pt”的 for 中，它也会将其转换为“px”，所以说最大值是 18（我假设你的意思是，就像在 Microsoft Word 中一样，字体大小为 18）错误的。

# python - 如何在 python 中获取文件名列表并将每个文件名分配为一个数字以供以后使用？

> ID：11838744
> 
> 赞同：-1
> 
> 时间：2012-08-07T03:14:06.537
> 
> 标签：python, windows, string, list

这是我到目前为止在 Windows 中的内容：

```
 import os
os.chdir("C:/Users/any/Desktop/test")
for files in os.listdir("."):

    print files 
```

现在它打印这个：

```
test picture.jpg
test script.bat
test text.txt 
```

但是现在我卡住的地方是每个文件夹的输出都是随机的，所以我的解决方案是让它获取列表并将每个文件夹单独标记为

```
filename1 
filename2
filename3 
```

所以现在`filename1 = test picture.jpg`

*编辑*

好吧，我要做的是稍后在我的代码中使用每个文件名，例如说我试图重命名我的文件，以便其中包含字母“e”的任何文件都将更改为“一个人物：

```
import os
os.chdir("C:/Users/any/Desktop/test")
for files in os.listdir("."):

    print files

files = files.replace('e', 'a')
print files 
```

但我需要能够让它单独执行每个文件名，以便代码看起来像这样：

```
import os
    os.chdir("C:/Users/any/Desktop/test")
    for files in os.listdir("."):

        print filename1

    filename1 = filename1.replace('e', 'a')
    print filename1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T03:19:34.550

虽然我不是 100% 确定我理解你想要做什么，但你可以试试这个：

```
dirlist = os.listdir('.') 
```

那么从零开始的每个索引`dirlist`都会从您的目录中产生一个条目。索引值实际上会代替文件名的数字。

所以与其拥有

```
filename1 
filename2
filename3 
```

你会有

```
dirlist[0]
dirlist[1]
dirlist[2] 
```

以最小的努力，并且可以很容易地使用索引以任何顺序引用单个条目。

*作为额外的奖励，如果*`for`需要，您可以使用 -loop轻松遍历此名称列表

```
for names in dirlist:
   ... 
```

对于您在原始帖子中提到的各个文件名，这会有点棘手。

**更新**：

鉴于您对帖子的编辑，您几乎可以使用原始代码实现目标：

```
import os
os.chdir("C:/Users/any/Desktop/test")
for fname in os.listdir("."):
    fname = fname.replace('e', 'a')
    print fname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T03:19:12.303

如果将所有这些名称添加到列表中，您将拥有一个预先构建的索引和编号系统：

```
>>> lst = ['a','b','c']
>>> lst.index('b')
1
>>> lst[1]
'b' 
```

在你的情况下：

```
files = os.listdir('.')
files[0] # first file
files[3] # fourth file (first one is 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T03:19:59.500

如果您只是要像那样**递增**地命名它们，为什么不将它们存储在**列表中**呢？

```
filenames = []
filenames.extend(os.listdir("."))

filenames[0] # filename1 equivalent
filenames[1] # filename2 equivalent 
```

我在`extend`这里使用的原因是听起来你想从*各种*文件夹中构建一个文件名列表。

# javascript - 谷歌地图在 JQuery Mobile 中显示不正确

> ID：11838745
> 
> 赞同：1
> 
> 时间：2012-08-07T03:14:08.457
> 
> 标签：javascript, jquery, google-maps, jquery-mobile, google-maps-api-3

我正在尝试在 JQuery Mobile 页面上显示 Google 地图，但每次加载页面时都很难让它正确显示。

我有两个主要页面工作：

1.  索引.php
2.  地图.php

从 index.php 加载站点然后在导航栏中切换到 map.php 时，地图会首次加载。切换回 index.php，然后再次切换回 map.php，地图的中心在左上角加载，并且在触摸屏幕之前不会显示完整的地图（但是，这在计算机的浏览器上不会发生）。但是，如果我首先加载 map.php，则地图会随着任何页面的来回更改而保持原位。

我的测试站点是[http://beersandears.net/mbeta/](http://beersandears.net/mbeta/)

关于我所缺少的任何想法？我从互联网上的研究中得到了这一点，但我没有尝试过帮助解决这个问题，包括：

*   [jQuery Mobile 和谷歌地图故障](https://stackoverflow.com/questions/8918197/jquery-mobile-google-maps-glitch "jQuery Mobile 和谷歌地图故障")
*   [如果重新加载，Google Map API v3 会偏离中心（不是通常的“调整大小”）](https://stackoverflow.com/questions/9911459/google-map-api-v3-off-center-if-reloaded-not-the-usual-resize-thing "如果重新加载，Google Map API v3 会偏离中心（不是通常的“调整大小”）")
*   [为什么在我的 jQuery Mobile / Google Maps API3 应用程序中我的地图没有居中？](https://stackoverflow.com/questions/9776761/why-is-the-centering-of-my-map-off-in-my-jquery-mobile-google-maps-api3-applic "为什么在我的 jQuery Mobile / Google Maps API3 应用程序中我的地图没有居中？")

第三个似乎与我的问题非常相似，但使用“pageshow”的解决方案不起作用。

这是map.php的代码：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="<?php bloginfo( 'charset' ); ?>" />
<title><?php wp_title('|', true, 'right'); ?></title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://maps.google.com/maps/api/js?key=AIzaSyBtVQWtkD4MjJ3zbe9DXgPqSlC2XDn5K7c&sensor=true" type="text/javascript"></script>
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
<style type="text/css">
img {
    max-width:100%;
    height:auto;
}
</style>
</head>
<body>
<div id="wrapper" data-role="page" id="map_page">
    <div id="header" data-role="header" data-position="fixed" data-id="head">
        <h1>WDW Map</h1>
    </div><!-- end header -->
    <div id="map_canvas" data-role="content">
    </div><!-- end content -->

<div id="footer" data-id="navbar" data-role="footer" data-position="fixed"> 
    <div id="navbar" data-role="navbar">
        <ul>
            <li><a href="index.php">WDW Beer List</a></li>
            <li><a href="map.php">WDW Map</a></li>
            <li><a href="blog.php">Articles</a></li>
        </ul>
    </div><!-- end navbar -->
</div><!-- end footer -->
<script type="text/javascript">
        $(function(){
            initializeMap(28.385208623548024,-81.56713485717773);
        });

        function initializeMap(lat,lng) {
            var adjustedHeight = ($(window).height());
            $('#map_canvas').css({height:adjustedHeight});
            //$("#map_canvas").height = $(window).height() - $("#header").height() - $("#footer").height();
            setTimeout(function() {

                var latlng = new google.maps.LatLng(lat, lng);
                var myOptions = {
                        zoom: 12,
                    center: latlng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };

                var map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);
                //var crosshairLayer = new google.maps.KmlLayer('http://freezoo.alwaysdata.net/justcrosshair2.kml',
                //{preserveViewport: true});

                //crosshairLayer.setMap(map);

                google.maps.event.trigger(map, 'resize');
                map.setZoom( map.getZoom() );
            }, 500);
        }
</script>
</div><!-- end wrapper -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:32:40.593

解决了。我在`data-role="page"`div 中有两个 ID，当我试图引用第二个时，它正在读取第一个作为 ID。pageshow 事件修复现在可以在[上面的第三个链接](https://stackoverflow.com/questions/9776761/why-is-the-centering-of-my-map-off-in-my-jquery-mobile-google-maps-api3-applic)中看到。

# jquery - 手风琴式按钮

> ID：11838747
> 
> 赞同：0
> 
> 时间：2012-08-07T03:14:30.640
> 
> 标签：jquery, jquery-ui, jquery-widgets

jquery 比较新。我正在尝试制作一个像手风琴按钮一样的按钮......可以使用按钮并在其下方滑出一个 div，就像此页面上的主题选择器一样：http: [//craigsworks.com/projects/qtip2/demos/ #themeroller](http://craigsworks.com/projects/qtip2/demos/#themeroller)（甚至不知道该怎么称呼它）。

最重要的部分是它滑出并且它位于页面内容的上方并且在滑出时不会改变 div 的高度。

有谁知道一个小部件或一种使用手风琴按钮（或其他按钮）来做到这一点的方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T04:34:26.607

[这个小提琴](http://jsfiddle.net/RkBTd/5/)应该让你开始。如果您担心 IE7，请注意 ie 7 存在一些问题。您可以通过一些条件样式来解决问题。

打破它

**HTML**

```
<div class="multiButton">
    <input class="main" type="button" Value="Set Up"/><input type="button" class="Selector" value="^"/>
    <ul class="options">
        <li><a href="linka.html">Set Up</a></li>
        <li><a href="linkb.html">Update</a></li>
    </ul>
</div>
<div>Some more content</div> 
```

**CSS**

```
/*This is the "Slider"*/
.multiButton ul
{
    display:none;
    border: solid 1px black;
    width:75px;
    position: absolute;
    background-color:#FFF;
} 

/*Main Part of the button*/    
.multiButton .main
{
    border: solid 1px black;
    width:60px;
}

/*Slider "trigger"*/
.multiButton .Selector
{
    border: solid 1px black;
    border-left:none;
    width:15px;
}

/*The Whole "Button"*/
.multiButton { position: relative;} 
```

**Javascript**

```
 /* Trigger the dropdown */    
 $(".multiButton .Selector").click(function(){
    $(".multiButton ul").slideToggle();
 });

 /* Slide up the drop down if the mouse leaves the button */
 $(".multiButton").mouseleave(function() {
    $(this).children("ul").slideUp();
});

/* Change the button text and slide the dropdown up on link click */
$(".multiButton a").click(function(){
    $(this).closest(".multiButton").children(".main").val($(this).text());
    $(this).closest(".options").hide();
    return false; /* Remove this line if you want to use the links in the drop down */
}); 
```

**注意：**这只是为了让您入门。根据您的需要，您可能需要连接更多事件处理程序以单击链接上的按钮。

# c# - Jabber-net 注册新用户

> ID：11838749
> 
> 赞同：0
> 
> 时间：2012-08-07T03:14:46.783
> 
> 标签：c#, wpf, visual-studio-2010, xmpp, chat

我是 jabber 和 xmpp 的新手。我正在使用 c#、wpf 和 jabber-net 开发聊天客户端应用程序。我已经创建了注册表单，但在后面的代码中出现了一些错误。

```
jc.OnRegisterInfo += new RegisterInfoHandler(this.jc_OnRegisterInfo);
jc.OnRegistered += new IQHandler(jc_OnRegistered); 
```

'jc_OnRegistered' 没有重载匹配委托 'jabber.client.IQHandler'

'jc_OnRegisterInfo' 没有重载匹配委托 'jabber.client.RegisterInfoHandler'

提前感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:27:44.560

该`OnRegisterInfo`事件是一个`RegisterInfoHandler`声明为：

```
public delegate bool RegisterInfoHandler(Object sender, Register register); 
```

您必须有一个返回 的方法，并将`bool`a`object`作为第一个参数，并将 a`Register`作为第二个参数。

该`OnRegistered`事件是一个`IQHandler`声明为：

```
public delegate void IQHandler(Object sender, IQ iq); 
```

您必须有一个返回 的方法，并将`void`an`object`作为第一个参数，并将 an`IQ`作为第二个参数。

确保`jc_OnRegisterInfo`看起来像这样：

```
private bool jc_OnRegisterInfo(object sender, Register register)
{
    // ...
} 
```

`jc_OnRegistered`看起来像这样：

```
private void jc_OnRegistered(object sender, IQ iq)
{
    // ...
} 
```

# ios - 什么是 CFNotificationCenter 回调函数观察者？

> ID：11838753
> 
> 赞同：2
> 
> 时间：2012-08-07T03:15:07.017
> 
> 标签：ios, c, macos, core-foundation

我是 CFNotificationCenter 的新手。我正在阅读 developer.apple 上的文档，它说在 CallbackFunction 中，观察者是“标识观察者的除 NULL 之外的任意值”。观察者可以是一个对象，以便我可以在回调函数中访问它的方法吗？这些是文档中显示的参数。

```
 void MyCallBack (
       CFNotificationCenterRef center,
       void *observer,
       CFStringRef name,
       const void *object,
       CFDictionaryRef userInfo
    ); 
```

另一个问题。为什么添加观察者时允许观察者为空？

```
void CFNotificationCenterAddObserver (
   CFNotificationCenterRef center,
   const void *observer,
   CFNotificationCallback callBack,
   CFStringRef name,
   const void *object,
   CFNotificationSuspensionBehavior suspensionBehavior
); 
```

“观察者。在 OS X v10.3 及更高版本中，此参数可能为 NULL。”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T03:22:18.823

`observer`参数是您传递给 的任意指针，它`CFNotificationCenterAddObserver`与您的回调指针一起存储。当通知中心调用您的回调时，它会将`observer`指针作为参数传递给回调。

就是这样。通知中心不会取消引用`observer`指针，也不会尝试保留它。如果需要，这是您将额外信息传递给回调的一种方式。如果你想用它来引用一个 Objective-C 对象，你可以。您应该确保在观察者注册时不会释放对象。

# iphone - iPhone - Google Directions API 响应问题

> ID：11838760
> 
> 赞同：0
> 
> 时间：2012-08-07T03:16:09.187
> 
> 标签：iphone, objective-c, ios, xcode, json

我正在使用 Google Directions iOS API。我正在使用 JSON 而不是 XML 获取数据。但我`AFNetworking`习惯于为我简化这一点。`AFNetworking`可在 github 上找到。现在，我可以在`MKMapView`. 这是我的代码：

```
// AFNETWORKING ==========================================================

        AFHTTPClient *_httpClient = [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:@"http://maps.googleapis.com/"]];

    [_httpClient registerHTTPOperationClass: [AFJSONRequestOperation class]];

    [_httpClient setDefaultHeader:@"Accept" value:@"application/json"];

    NSMutableDictionary *parameters = [[NSMutableDictionary alloc] init];

    [parameters setObject:[NSString stringWithFormat:@"%f,%f", location.coordinate.latitude, location.coordinate.longitude] forKey:@"origin"];

    [parameters setObject:[NSString stringWithFormat:@"%f,%f", location2.coordinate.latitude, location2.coordinate.longitude] forKey:@"destination"];

    [parameters setObject:@"false" forKey:@"sensor"];

    [parameters setObject:@"driving" forKey:@"mode"];

    [parameters setObject:@"metric" forKey: @"units"];

    NSMutableURLRequest *request = [_httpClient requestWithMethod:@"GET" path: @"maps/api/directions/json" parameters:parameters];

    request.cachePolicy = NSURLRequestReloadIgnoringLocalCacheData;

    AFHTTPRequestOperation *operation = [_httpClient HTTPRequestOperationWithRequest:request success:^(AFHTTPRequestOperation *operation, id responseObject) {

        NSInteger statusCode = operation.response.statusCode;

        if (statusCode == 200) {

            [self parseResponse:responseObject];

        } else {

        }

    } failure:^(AFHTTPRequestOperation *operation, NSError *error) { }];

    [_httpClient enqueueHTTPRequestOperation:operation];

// ROUTE SETUP AND RESPONSE RECIEVED METHOD ==========================================================

- (void)parseResponse:(NSDictionary *)response {

NSArray *routes = [response objectForKey:@"routes"];

NSDictionary *routePath = [routes lastObject];

if (routePath) {

    NSString *overviewPolyline = [[routePath objectForKey: @"overview_polyline"] objectForKey:@"points"];

    NSLog(@"Status: %@", [response objectForKey: @"status"]);

    NSLog(@"Legs: %@", [routePath objectForKey: @"legs[]"]);

    _path = [self decodePolyLine:overviewPolyline];

    NSInteger numberOfSteps = _path.count;

    CLLocationCoordinate2D coordinates[numberOfSteps];
    for (NSInteger index = 0; index < numberOfSteps; index++) {
        CLLocation *location = [_path objectAtIndex:index];
        CLLocationCoordinate2D coordinate = location.coordinate;

        coordinates[index] = coordinate;
    }

    polyLine = [MKPolyline polylineWithCoordinates:coordinates count:numberOfSteps];
    [self.mapView addOverlay:polyLine];
}

} 
```

这是使路由正常运行的主要代码。而且效果很好！但现在我要做的是获取方向列表和完整的持续时间和摘要。因此，我深入研究了[Google Directions API 文档](https://developers.google.com/maps/documentation/directions/)，它告诉我使用其不同的字典、数组和对象。但我没有运气。我的状态为 OK。当我记录`routes`数组的计数时，它只有一个对象。然后最重要的是，`legs[]`数组是`NULL`.

```
 NSLog(@"Legs is: %@", [routePath objectForKey: @"legs[]"]); 
```

输出：

> 腿是（空）

`Legs[]`包括所有重要的内容，例如方向列表和持续时间。`Summary`不是`NULL`，它给出了路线绕过的街道之一的名称。我不知道那是一个总结。可能是因为`routes`数组中只有一个对象。`waypoint_order`也是。`warnings[]`_ 当然是有效的，这就是我让路线工作的方式。`NULL``bounds``overview_polyline`

那么这里有什么问题呢？`NULL`为什么 Google Directions API在我需要时会提供这么多对象？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:59:12.163

好的，问题是对指示的响应时间过长。我希望`legs[]`响应与`overview_polyline`. 所以我只需要等到响应进来，这让我有机会插入一个缓冲 UI。

# cocoa - 是否有必要将 NSKeyedArchiver 用于标准 Cocoa 集合？

> ID：11838766
> 
> 赞同：2
> 
> 时间：2012-08-07T03:17:22.087
> 
> 标签：cocoa, collections, nskeyedarchiver

我最近想从用户默认值中存储和检索 NSArrays，我发现并使用了[在 NSUserDefaults 中将自定义对象存储在 NSMutableArray 中](https://stackoverflow.com/questions/537044/storing-custom-objects-in-an-nsmutablearray-in-nsuserdefaults/537849#537849)的建议，效果很好。

然而，回想起来，如果您使用标准集合类而不是自定义对象，这似乎有点过头了。任何人都可以确认我正在使用的建议解决方案的主要好处（上面链接）是您可以以这种方式存储自定义类，但是对于`NSArray`内容是字符串或其他数组或标准字典的地方，这种方法与`NSKeyedArchiver`是不必要的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T03:33:55.310

是的，请参阅以下`NSUserDefaults`文档：

[设置对象：forKey：](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html#//apple_ref/doc/uid/20000318-CIHDHAGB)

> value 参数只能是属性列表对象：NSData、NSString、NSNumber、NSDate、NSArray 或 NSDictionary。对于 NSArray 和 NSDictionary 对象，它们的内容必须是属性列表对象。

`NSCoder`如果您需要`NSKeyedArchiver`将对象转换为`NSData`.

# c# - 我们可以跨多个浏览器使用状态服务器会话吗？

> ID：11838769
> 
> 赞同：0
> 
> 时间：2012-08-07T03:17:44.147
> 
> 标签：c#, asp.net, .net, session-state

再一次混淆了与会话管理相关的[MSDN文档。](http://msdn.microsoft.com/en-us/library/75x4ha6s.aspx)

![如果图片不可见，请点击上面指定的链接](../Images/d2c621fde04886405be87844131242bc.png)

我浏览[了 MSDN 中的 Session Management Article](http://msdn.microsoft.com/en-us/library/75x4ha6s.aspx)，发现文章中说 - “**我们可以在服务器上存储特定于会话的数据，以便在同一个会话中跨*多个*浏览器或客户端设备请求使用。** ”

谁能告诉我这怎么可能。例如，如果您有两个浏览器，即 i)Firefox 和 ii) Internet Explorer (IE)。

现在，如果我在 Firefox 中运行 asp.net 应用程序（它使用 stateserver 来管理会话）。我再次通过 IE 运行相同的应用程序（没有关闭 firefox 会话）。这是否意味着两个浏览器将共享同一个会话？我觉得不是”。两种浏览器都将使用自己的会话运行，这彼此不同。

其次，我发现文章中的两种说法是相互矛盾的。它说-“*会话状态类似于应用程序状态，只是它的范围仅限于当前浏览器会话*”，另一方面它说-“*它将特定于会话的数据存储在服务器上以供跨多个浏览器或客户端使用-同一会话中的设备请求*“

那么，如果它的范围仅限于当前的浏览器会话，那么它如何跨多个浏览器使用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T03:23:54.133

这有点令人困惑，但我认为您误解了该声明。它们指的是多个***请求***，而不是浏览器或客户端设备。

会话确实限定于当前浏览器会话，使用 cookie 或查询字符串进行持久化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T03:23:36.043

通常，会话是通过 cookie 处理的。每个浏览器实现（IE、Chrome）都有自己的 cookie 存储。因此，如果没有一些重要的变通方法，不同的浏览器实现将无法共享会话。

**同一浏览器的**多个实例*可以引用*同一会话，因为它们都可以访问相同的 cookie。这可以描述为“多个浏览器”。

# php - 在 PHP 中输 出字符串，以便您可以将其粘贴到 Excel 中

> ID：11838777
> 
> 赞同：-1
> 
> 时间：2012-08-07T03:18:39.997
> 
> 标签：php, string, excel

如何格式化我的字符串，以便有人可以从浏览器中复制它并将其粘贴到 excel 中并以列的形式出现？

```
"apples oranges pears" 
```

在excel中出现

```
----------------------------------------
| apples     | oranges     | pears     |
---------------------------------------- 
```

有点像上面那个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T03:27:08.507

如果要启用复制和粘贴到 Excel 表格单元格，为什么不直接生成 HTML 表格？最后我检查了它是否有效。

编辑：

```
<?php
#example
$var1 = "Apples";
$var2 = "Oranges";
$var3 = "Pears";
echo "<table><tr><td>$var1</td><td>$var2</td><td>$var3</td></tr></table>"; 
```

在浏览器中使用此功能（页面当然显示为 HTML），文本的复制+粘贴应该会在您想要的列中生成文本。

# ios - Move Sprite to nearest Sprite

> ID：11838780
> 
> 赞同：0
> 
> 时间：2012-08-07T03:19:08.137
> 
> 标签：ios, cocos2d-iphone

When the user taps a button, I want to move a sprite to the next nearest ball (sprite), so they can move from place to place.

As there will only be a limited amount of balls on the screen at a time, I was thinking I should store them in an array, and then when they move offscreen (are destroyed by a function I have in place), they are removed from the array.

I have the current setup (not in a loop atm) :

```
ball = [[CCSprite spriteWithFile:@"ball.png"] retain];
ball.position = ccp(randX, randY);

NSMutableArray *myArray = [[NSMutableArray alloc] init];  
[myArray addObject: ball];
[myArray addObject: ball];
[myArray addObject: ball];

for (int i = 0; i < 2; i++) {
    CCSprite *sprite = [myArray objectAtIndex:i];
    NSLog(@"%@", sprite.position.x);
} 
```

Why is NSLog printing "(null)" to the console?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T03:25:48.943

Haha woops! Was a simple case of changing @"%@" to @"%f". Lol!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T03:43:52.093

It looks like you actually want to find the sprite with the lowest X position:

```
CCSprite *sprite = [myArray objectAtIndex:0];

for (CCSrpite *s in myArray)
{
    if (s.position.x < sprite.position.x)
        sprite = s;
}

// now 'sprite' will contain the sprite with the lowest X position 
```

# ruby-on-rails - 如何在本地网络上托管 Ruby on Rails 应用程序，以便多人可以访问它？

> ID：11838783
> 
> 赞同：3
> 
> 时间：2012-08-07T03:19:12.777
> 
> 标签：ruby-on-rails, ruby, web, localhost

我是 RoR 的新手，对它的体验几乎为零。我收到了别人的项目，我需要找到一种方法来托管应用程序，这样人们就可以在本地访问它。该应用程序是蜘蛛脚本/walker 脚本/网络爬虫，无论您如何称呼它。基本上，它连接到一个网站，登录，每天检索某些数据并将其与以前的数据进行映射。在本地机器上，你使用它，访问 localhost:3000，你会得到前人设计的网页。我只是想知道如何让我们本地网络上的人公开该页面，以便他们可以连接到某个任意 IP 并查看相同的页面（它每天更新）？

我尝试做的是使包含应用程序的文件夹对网络公开，但为了使用它，我必须让网络上的每个人都允许写入它，并且每个人都必须安装 RoR 才能使用它。我想避免这种情况，因为它看起来不合逻辑，也不是我想要做的。

查看代码，我可以进行逆向工程并理解它的作用，但是当涉及到在本地托管 Web 应用程序或类似的东西时，我以前从未这样做过。请帮忙！

提前致谢！

**编辑 - 这一切都是在 Windows 7 机器上完成的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T03:31:22.940

1.  由于您使用的是 Windows，因此请打开命令行并运行`ipconfig`以找出您的本地 IP。它将列在“IP 地址”下。
2.  告诉您 LAN 中的人员访问[http://192.168.xx:3000](http://192.168.x.x:3000)，将步骤 1 中的 IP 地址替换为 192.168.xx。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:09:33.877

编辑：我错过了一件重要的事情，你是窗户。在 Windows 上，您可以使用[Thin](http://code.macournoyer.com/thin/)并将其放在负载均衡器后面。虽然我建议将它托管在 UNIX 机器上:)

尽管在 webrick 中运行它（webrick 是用于开发的应用程序服务器，即当你运行 rails s 时）将让其他用户访问该网站永远不要为生产应用程序做同样的事情。如果你想在生产中运行这个应用程序，你需要更强大的应用程序服务器，比如[乘客](http://www.modrails.com/install.html)。我建议您将它与 Apache 或 Nginx 一起使用，而不是单独使用它。设置完所有这些后，其他人可以通过输入 IP（xx.xx.xx.xx）来使用您的应用程序，您也可以要求系统管理员设置本地 DNS，这样您的用户就不必总是记住 IP 地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-03T07:19:28.793

## 描述：

在启动 Rails Server 的同时，我们还可以设置一些选项来配置开发环境下站点的 IP 地址和端口号，以在本地网络中托管网站。因此，如果我们想将 IP 从[http://127.0.0.1:3000](http://127.0.0.1:3000)更改为[http://192.168.xx:port](http://192.168.x.x:port)（x= 0 到 255 任意一个数字），我们可以在 Rails 服务器命令中设置！但是为此，我们需要在当前网络中找出我们当前的 IP 地址，这将有助于我们在本地网络中为网站提供服务。

### 所以第一步：

我们将在我们的 PC 上打开我们的终端。对于 Android 用户，我们需要打开 Termux 应用程序。然后只需键入`ifconfig`以获取我们设备在当前网络中的 IP 地址。我们会得到这样的输出（这里我使用 Android 设备进行开发。所以输出可能与您 PC 终端上的输出不同，但过程相同）：

```
$ ifconfig
Warning: cannot open /proc/net/dev (Permission denied). Limited output.
lo: flags=XX<UP,LOOPBACK,RUNNING>  mtu XXXXX
    inet 127.0.0.1  netmask 255.XXX.XXX.XXX
    unspec 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  txqueuelen XXXX  (UNSPEC)
wlan0: flags=XXXX<UP,BROADCAST,RUNNING,MULTICAST>  mtu XXXX
    inet 192.168.1.103  netmask 255.XXX.XXX.XXX  broadcast 192.168.1.255
    unspec 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  txqueuelen XXXX  (UNSPEC) 
```

**`X= some numbers with our device credentials which is dummied with this variable`**

如果您使用的是 WiFi 路由器，那么我们将需要该**`wlan0`**部件来获取我们的设备 IP。在 wlan0 部分下有一个**inet**子部分显示我们当前的 IP！**是的**，我们需要 IP 地址**192.168.1.103**！**对于您的设备和网络，**这可能会有所不同。这是这个任务的关键！现在我们要进行第二个重要步骤。

### 所以第二步是：

这需要输入命令来配置 IP 地址。

`rails s -b 192.168.1.103 -p 8080`

这里：

1.  `rails s`用于**Rails 服务器**
2.  `-b 192.168.1.103`用于从默认 IP [http://127.0.0.1 （我们的本地主机地址）中](http://127.0.0.1)**竞标**自定义 IP地址。
3.  `-p 8080`用于**端口**设置。**这部分是可选的。默认端口是 3000**。

这是将 localhost IP ( [http://127.0.0.1](http://127.0.0.1) ) 更改为本地网络 IP 的过程，该 IP 可用于同一网络用户的其他设备。

现在我们的 Rails 应用程序在我们的本地网络中可用！同一网络中的其他用户也可以在服务器命令运行时访问该网站。如果您还配置了端口号，链接将为**[http://192.168.1.103:8080 。](http://192.168.1.103:8080)**否则，如果您使用了`rails s -b 192.168.1.103`没有端口配置的命令，链接将是：http: **[//192.168.1.103 :3000](http://192.168.1.103:3000)**

**再说一遍：** 192.168.1.103 是我的情况，您的 IP 地址会因您的设备而异。这将需要用于您的服务器和链接地址。

# windows - 全屏显示kinect中的色框

> ID：11838786
> 
> 赞同：0
> 
> 时间：2012-08-07T03:19:50.120
> 
> 标签：windows, kinect

我想在 wpf 中全屏显示 kinect 彩色帧，但是当我尝试它时，我得到的视频帧质量非常低。

如何做到这一点任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T03:45:38.890

Kinect 相机没有很好的分辨率。仅支持 640x480 和 1280x960。强制这些图像占据整个屏幕，尤其是在您使用高清显示器（例如 1920x1080）时，会导致图像被拉伸，这通常看起来很糟糕。如果您尝试放大任何图像，则会遇到同样的问题。原始图像中的每个像素都必须填充扩展图像中的更多像素，导致图像看起来像块状。

实际上，唯一能减少这种情况的方法是确保您使用的是 Kinect 的最大颜色流分辨率。您可以通过在启用 ColorStream 时指定 ColorImageFormat 来做到这一点。请注意，此分辨率的每秒帧数明显低于 640x480 流（12 FPS 与 30 FPS）。但是，它在全屏模式下应该比其他模式更好看。

```
sensor.ColorStream.Enable(ColorImageFormat.RgbResolution1280x960Fps12); 
```

# xna - 当页面再次导航到第二次时，Windows Phone 应用程序中的 XNA 麦克风不起作用

> ID：11838792
> 
> 赞同：0
> 
> 时间：2012-08-07T03:20:36.467
> 
> 标签：xna, windows-phone, microphone

我有一个带有使用 XNA 麦克风的页面的 Windows 手机应用程序，并且有一个录制按钮和播放按钮，与任何数量的在线教程非常相似。当我第一次导航到页面时，录制和播放功能工作正常。但是，如果我单击后退按钮，然后再次导航到该页面，则录制的声音听起来像是口语的一部分重复了几次。例如，我将录制“testing”，播放听起来像“sss...sss”。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T02:50:49.143

我想到了。以下行在页面的构造函数中：

this.MicroPhone.BufferReady += new EventHandler(this.Microphone_BufferReady);

每次导航到页面时都会构建一个新页面，因此会调用同一页面对象的多个实例中的 Microphone_BufferReady 函数，并且来自麦克风的数据有时会存储在其他实例中。关键是移除 OnNavigatedFrom 页面事件中的处理程序：

this.MicroPhone.BufferReady -= new EventHandler(this.Microphone_BufferReady);

# git - GIT：/.git/index.lock'：文件存在

> ID：11838793
> 
> 赞同：16
> 
> 时间：2012-08-07T03:20:48.683
> 
> 标签：git

我的一个 git 存储库一直存在问题。我不断收到以下错误：

```
 fatal: Unable to create 'v:/path/to/files/.git/index.lock': File exists.

    If no other git process is currently running, this probably means a
    git process crashed in this repository earlier. Make sure no other git
    process is running and remove the file manually to continue. 
```

我已经尝试过：**rm -f ./.git/index.lock**根据 stackoverflow 上的另一个线程，但每次我都会收到此错误：**rm: cannot unlink `./.git/index.lock': Permission denied**

当我关闭 aptana（我在终端中使用 git）时，我仍然无法删除该文件。

任何想法如何解决这个问题？

另一件要注意的是，当我偶尔在其中提交时，这个 git repo 非常慢（它允许我每 10 次尝试左右）

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-07T03:23:20.957

sudo 命令：

```
sudo rm -f ./.git/index.lock 
```

这两个错误都表明`index.lock`由另一个用户拥有。`rm`以超级用户身份运行，然后再次尝试您的命令。您也可以考虑设置`core.sharedRepository`是否`true`实际上是您的 repo 的情况：

> core.sharedRepository
> 
> 当 group（或 true）时，存储库可以在组中的多个用户之间共享（确保所有文件和对象都是组可写的）。
> 
> 当所有人（或世界或所有人）时，所有用户都可以读取存储库，此外还可以组共享。当 umask（或 false）时，git 将使用 umask(2) 报告的权限。当 0xxx（其中 0xxx 是八进制数）时，存储库中的文件将具有此模式值。0xxx 将覆盖用户的 umask 值（而其他选项只会覆盖用户的 umask 值的请求部分）。示例：0660 将使所有者和组可以读/写 repo，但其他人无法访问（相当于组，除非 umask 是例如 0022）。0640 是组可读但不可组写的存储库。
> 
> 请参阅 git-init(1)。
> 
> 默认为假。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T04:34:38.717

问题最终是 Aptana，每次我运行它时，当我尝试在 git 中提交时都会导致这个错误。

我停止使用 aptana studio，我不再有这个问题了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-16T12:36:48.737

如果您使用 Aptanta Git 和其他 git 客户端（如 fe TortoiseGit），也会出现此错误。因此，这个其他 Git 软件很可能锁定了您的 Git，使其无法用于 Aptana。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-08T21:13:37.510

做这个：

rm index.lock

其次是

git 重置

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-11T10:04:55.587

在 git 版本 2.11.0 中，`.git`文件夹可能不包含该`index.lock`文件。我发现`.git/refs/heads/`文件夹中包含一个`.lock`文件并使用`rm`命令将其删除。

还要确保使用`ps -aef | grep git`and 终止可能正在使用 git repo 的进程`kill -9`。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-04-19T09:36:13.497

这可能是一个旧的答复，但我希望这对下一个需要此解决方案的人更有用。

在 linux/unix/gitbash/cygwin 上，尝试

```
rm -f .git/index.lock 
```

在 Windows 命令提示符下，尝试：

```
del .git\index.lock 
```

希望有帮助，我在这里找到了这个解决方案：[致命：无法创建'project_path/.git/index.lock'：文件存在。](https://stackoverflow.com/questions/9282632/git-index-lock-file-exists-when-i-try-to-commit-but-cannot-delete-the-file)

# html - three.js - 如何用鼠标旋转对象（但不使用相机）

> ID：11838795
> 
> 赞同：1
> 
> 时间：2012-08-07T03:21:09.713
> 
> 标签：html, three.js

我想创建很多对象并使用鼠标分别旋转每个对象。到目前为止，我可以用鼠标选择其中一个对象，但不能使用鼠标进行对象旋转。

1.  由于鼠标只有`mouse.x = event.clientX - windowHalfX; mouse.y = event.clientY - windowHalfY;`，我只知道如何使用 mousemove 和 mousedown 事件处理程序来更改`SELECTED.rotation.y`and `SELECTED.rotation.x`（其中 SELECTED 是选定的对象）——我怎样才能控制`SELECTED.rotation.z`呢？

2.  如果选定的对象是倒置的，x 旋转也会向后，这似乎不是很可取。有没有办法修改这个？

我发现的许多示例都使用相机旋转而不是实际旋转对象。我想找到一种无需更换相机即可旋转对象的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:50:38.860

您应该从three.js 中查看给定的控制示例。它们不舒服，大多数情况下您需要复制它们并根据需要进行修改。但是他们拿了一个对象，它是控制器，这可能是相机或对象。这是一个小例子：

```
yawLeft = -((event['pageX'] - fullWidth) - halfWidth) / halfWidth;
pitchDown = ((event['pageY'] - fullHeight) - halfHeight) / halfHeight;

rotationVector.x = (-pitchUp + pitchDown);
rotationVector.y = (-yawRight + yawLeft);
rotationVector.z = (-rollRight + rollLeft);

var tmpQuaternion = new THREE.Quaternion();
tmpQuaternion.set(rotationVector.x * rotMult, rotationVector.y * rotMult, rotationVector.z * rotMult, 1).normalize();
object.quaternion.multiplySelf(tmpQuaternion); 
```

对象可以是相机或模型。没关系，因为相机也是 THREE.Object3D。

# json - 如何将此json保存在数据库中？

> ID：11838796
> 
> 赞同：0
> 
> 时间：2012-08-07T03:21:16.153
> 
> 标签：json, visual-studio-2010, asp.net-web-api

我的Json代码如下

```
[
    {"group":{"key":"Chinese","title":"Chinese","shortTitle":"Chinese","recipesCount":0,"description":"Chinese cuisine is any of several styles originating from regions of China, some of which have become increasingly popular in other parts of the world – from Asia to the Americas, Australia, Western Europe and Southern Africa. The history of Chinese cuisine stretches back for many centuries and produced both change from period to period and variety in what could be called traditional Chinese food, leading Chinese to pride themselves on eating a wide range of foods. Major traditions include Anhui, Cantonese, Fujian, Hunan, Jiangsu, Shandong, Szechuan, and Zhejiang cuisines. ","rank":"","backgroundImage":"images/Chinese/chinese_group_detail.png", "headerImage":"images/Chinese/chinese_group_header.png"},
    "key":1000,
    "title":"Abalone Egg Custard",
    "shortTitle" : "Abalone Egg Custard", 
    "serves":4,
    "perServing":"65kcal / 2.2g fat",
    "favorite":false,
    "rating": 3 , 
    "directions":["Step 1.","Step 2.","Step 3.","Step 4.","Step 5."],
    "backgroundImage":"images/Chinese/AbaloneEggCustard.jpg",
    "healthytips":["Tip 1","Tip 2","Tip 3"],
    "nutritions":["Calories 65kcal","Total Fat 2.2g","Carbs 4g","Cholesterol 58mg","Sodium 311mg","Dietary Fibre 0.3g"],
    "ingredients":["1 head Napa or bok choy cabbage","1/4 cup sugar","1/4 teaspoon salt","3 tablespoons white vinegar","3 green onions","1 (3-ounce) package ramen noodles with seasoning pack","1 (6-ounce) package slivered almonds","1 tablespoon sesame seeds","1/2 cup vegetable oil"]}
] 
```

我将如何将其保存在数据库中？导致一天结束时我必须从数据库中读取并能够使用 webapi 解析它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T03:23:45.127

`CLOB`如果长度可能超过 varchar 的限制，请将其作为数据库中的数据类型保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:42:16.663

这里有很多潜在的答案——您需要提供更多详细信息才能获得具体答案。

**数据库**
您使用的是什么数据库——它是关系、对象还是 no-sql？如果您从无 sql 的角度来看 - 将其保存为一个整体可能很好。从 RDBMS 的角度来看（如 SQL Server），您将所有字段映射到一组相关表中的一系列行。如果您使用的是关系数据库，那么仅仅在数据库中插入未解析、未验证的 JSON 文本块是*错误的做法*。为什么还要雇用一个提供 DRI 的数据库呢。

**数据操作层**
您的问题中包括您将使用哪种类型的数据操作——可以是 linq to sql，可以是直接 ADO，像 Dapper、Massive 或 PetaPoco 这样的微型 ORM，像 Entity Framework 或 NHibernate 这样的成熟 ORM .

您是否选择了其中之一，或者您是否正在寻找有关选择的指导？

**在 WebAPI 中解析在 WebApi**
中从 JSON 转换为 Object 或从 Object 转换为 JSON 很容易。特别是对于 JSON，JSON.Net 格式化程序就在附近。您可以从[这里](http://james.newtonking.com/projects/json-net.aspx)、[这里](https://stackoverflow.com/questions/8157636)、[这里](https://stackoverflow.com/questions/1212344)和[这里开始](https://stackoverflow.com/questions/401756)。

然而，从概念上讲，您似乎缺少了 WebAPI 的魔力。使用 WebAPI，您可以以本机状态返回对象（如果需要 OData 支持，则返回 IQueryable）。在您的函数调用完成后，Formatter 接管并根据客户端请求将其序列化为适当的形状。这个过程称为内容协商。这个想法是您的方法与格式无关，并且框架将数据序列化为您的客户想要的传输格式（xml、json 等）。

反之亦然，框架将客户端提供的格式反序列化为本机对象。

# jquery - jQuery：不是选择器

> ID：11838804
> 
> 赞同：2
> 
> 时间：2012-08-07T03:22:26.043
> 
> 标签：jquery

我很感兴趣哪种方法更快：`:not`选择器或`not()`方法。例如在这样的查询中：

```
$(this).find(':input').not(':input[type=button], :input[type=submit], :input[type=reset]').each(function() { ... }); 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T03:26:08.477

见[http://jsperf.com/jquery-css3-not-vs-not](http://jsperf.com/jquery-css3-not-vs-not)

:not 的平均速度大约是原来的两倍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T03:28:00.407

请试试这个：

好读：[jQuery 选择器问题（如何选择表单上的所有输入字段，除了按钮和复选框）](https://stackoverflow.com/questions/3129151/jquery-selector-question-how-to-select-all-input-fields-on-a-form-except-button)

[http://api.jquery.com/not-selector/](http://api.jquery.com/not-selector/)

这应该有助于您的事业`:)`

**代码**

```
$(this).find(':input:not(:button):not(:submit):not(:reset)').each(function() { ... }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T03:26:23.643

正如kolink所说`:not`的更快，因为您没有添加函数调用，您可以比较[jsperf中的速度](http://jsperf.com/)

例如：[在这个测试中](http://jsperf.com/not-vs-not2131/2)

# c# - string.Compare("KHA","KTB",true) 在 C# 中返回不正确的结果

> ID：11838820
> 
> 赞同：1
> 
> 时间：2012-08-07T03:23:58.180
> 
> 标签：c#

我正在使用 C#、.NET 3.5。我有以下代码

```
string.Compare("KHA","KTB",true) 
```

它返回值 1。这意味着 KHA > KTB 按字母顺序排列。我希望它返回值-1。

## 谁能帮我解决这个问题？

是的，你们都是对的。这是因为文化。我添加 CultureInfo.InvariantCulture 并解决了。谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T03:29:06.270

[srig.Compare](http://msdn.microsoft.com/en-us/library/zkcaxw5y.aspx)返回**排序顺序中的相对位置**。~~由于'H'出现在'T'之前，这就是你得到的原因`1`~~

它应该返回`-1`，查看图片 ![在此处输入图像描述](../Images/1368ab0ea48cb841662e0f469686fd85.png)

您的编译器一定有问题，它应该返回`-1`并且您对它的理解`string.Compare`是正确的。

您可以尝试使用`CultureInfo.InvariantCulture`：

```
int value = string.Compare("KHA", "KTB", true,CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T03:34:04.637

The call `string.Compare("KHA","KTB",true)` should return `-1` as expected. It does when I test it.

If you get any other result, you either are using other strings, or you have a default culture where `'T'` is actually considered to come before `'H'`.

For the latter case, you can specify a culture info in the call:

```
string.Compare("KHA", "KHB", true, CultureInfo.InvariantCulture) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T03:34:34.710

If you are really getting 1 against `string.Compare("KHA","KTB",true)` then your system's current culture must be making an effect. Check the documentation of [String.Compare](http://msdn.microsoft.com/en-us/library/hyxc48dt). Also check the best practices of comparing a string [here](http://msdn.microsoft.com/en-us/library/dd465121.aspx#the_details_of_string_comparison).

# java - 如何逐字节将 SHA-1 应用于大型十六进制数？

> ID：11838825
> 
> 赞同：2
> 
> 时间：2012-08-07T03:24:43.813
> 
> 标签：java, sha

我正在尝试创建一个程序，使我能够将 MEID（长度为 14 的十六进制数）转换为伪 ESN（长度为 8 的十六进制数）。从 MEID 获取 pESN 的方法在理论上相当简单。例如，给定 MEID 0xA0000000002329，要制作 pESN，需要将 SHA-1 应用于 MEID。A0000000002329 上的 SHA-1 给出 e3be267a2cd5c861f3c7ea4224df829a3551f1ab。取此结果的最后 6 个十六进制数字，并将其附加到 0x80 - 结果是 0x8051F1AB。

现在这是我到目前为止的代码：

```
public void sha1() throws NoSuchAlgorithmException {

    String hexMEID = "A0000000002329";

    MessageDigest mDigest = MessageDigest.getInstance("SHA1");      
    byte[] b = new BigInteger(hexMEID,16).toByteArray();    

    byte[] result = mDigest.digest(b);
    StringBuilder sb = new StringBuilder();

    for (int i = 0; i < result.length; i++) {
        sb.append(Integer.toString((result[i] & 0xff) + 0x100, 16).substring(1));
    }

    System.out.println(sb.toString());
} 
```

问题是使用这种方法，A0000000002329 上的 SHA-1 给出 6ad447f040941bf43c0693d2b391c6c79fa58320 而不是 e3be267a2cd5c861f3c7ea4224df829a3551f1ab。我在这里做错了什么？

有人给了我一个暗示

> 诀窍是将 SHA-1 应用于代表 MEID 的数字，而不是代表 MEID 的字符串。**您需要逐字节处理它，因此您必须一次给它两个十六进制数字（因为两个十六进制数字构成一个字节）并确保它们被解释为数字而不是 ASCII 字符**。

如果这些说明是正确的，那么如何逐字节将 SHA-1 应用于我的十六进制数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T05:48:31.193

您有一个小问题，这是使用`BigInteger`获取字节数组的结果。由于 MEID 只有 7 个字节长，因此当您将其泵入 BigInteger 时，您将得到一个长度为 8 的字节数组，因为 BigInteger 输出包含符号的 exta 字节。当然，这个额外的字节会导致您输入的 SHA-1 散列完全不同。你需要把它剥掉。

下面是 HEX MEID 到 ESN 代码的样子：

```
String hexMEID = "A0000000002329";
MessageDigest mDigest = MessageDigest.getInstance( "SHA1" );

byte[] input = new byte[ 7 ]; // MEIDs are only 7 bytes

// Now copy the bytes from BigInteger skipping the extra byte added by it
System.arraycopy( new BigInteger( hexMEID, 16 ).toByteArray(), 1, input, 0, 7 );

// Get the SHA-1 bytes
byte[] result = mDigest.digest( input );

// Build the SHA-1 String
StringBuilder sb = new StringBuilder();
for ( int i = 0; i < result.length; i++ )
{
    String hex = Integer.toHexString( 0xFF & result[ i ] );
    if ( hex.length() == 1 )
    {
        sb.append( '0' );
    }
    sb.append( hex );
}

String sha1 = sb.toString();
// Grab the last 6 characters of the SHA-1 hash
String lastSix = sha1.substring( sha1.length() - 6 );
// And prepend '80', now you have the ESN
System.out.println( "80" + lastSix );
// Will print 8051f1ab which is exactly what you want 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T15:55:07.117

Strelok 发现了`BigInteger`在返回的数组中添加额外字节的问题。这个更简单的版本也给出了预期的结果：

```
String hexMEID = "A0000000002329";

MessageDigest mDigest = MessageDigest.getInstance("SHA1");

byte[] b = new BigInteger(hexMEID,16).toByteArray();

// skip the first byte set by BigInteger and retain only 7 bytes (length of MEID)
byte[] result = mDigest.digest(Arrays.copyOfRange(b, 1, 8));

StringBuilder sb = new StringBuilder("80");

// need only the last 3 bytes
for (int i=17; i<20; i++) {
    sb.append(Integer.toHexString((result[i] & 0xff) | 0x100).substring(1));
}

String pESN = sb.toString();
System.out.println(pESN);
// -> 8051f1ab 
```

# android - 单选按钮在android中自动选择

> ID：11838828
> 
> 赞同：0
> 
> 时间：2012-08-07T03:25:27.973
> 
> 标签：android, listview, radio-button

quiz_list.xml : 我的 xml 文件

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

  <TextView
    android:id="@+id/question"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="#43bd00"
    android:textSize="20sp"
    android:textStyle="bold"
    android:paddingTop="4dip"
    android:paddingBottom="1dip" />

  <RadioGroup
        android:id="@+id/radioGroup"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="Radio Group"
        >
    <RadioButton 
        android:id="@+id/option1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />
    <RadioButton 
        android:id="@+id/option2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />
    <RadioButton
        android:id="@+id/option3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />
    <RadioButton
        android:id="@+id/option4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />
    </RadioGroup>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginLeft="5dp"
    android:gravity="bottom|center_horizontal"
    android:orientation="horizontal" >

<Button
    android:id="@+id/loadPrevious"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:layout_marginTop="10dp"
    android:text="Load Previous"
    android:visibility="invisible" />

<Button
    android:id="@+id/loadNext"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:layout_marginTop="10dp"
    android:text="Load Next" />

  </LinearLayout> 
```

我有一个问题列表，单选按钮有它的选项。我面临的问题是 1\. 当我加载下一个列表时，已经选择了一个按钮。2\. 当我加载上一个列表时，选择了一个不同的按钮，而不是我选择的那个。

这是我的代码，其中包含 json 格式的问题。

```
String json = "[{\"question\": \"What?\", \"option1\": \"alpha\" , \"option2\": \"beta\" , \"option3\": \"gamma\" , \"option4\": \"alpha\"},{\"question\": \"What is your name ?\", \"option1\": \"Dinesh\" , \"option2\": \"Boopesh\" , \"option3\": \"Srinath\" , \"option4\": \"JK\"},{\"question\": \"What is the capital of India?\", \"option1\": \"Delhi\" , \"option2\": \"Bombay\" , \"option3\": \"Calcutta\" , \"option4\": \"Chennai\"}]";

Gson gson = new Gson();
JsonParser parser = new JsonParser();
    JsonArray array = parser.parse(json).getAsJsonArray();

    for(JsonElement obj : array) {
    Quiz quiz = gson.fromJson(obj,Quiz.class);
    String question = quiz.getQuestion();
    System.out.println("Question: "+question);
    quizList.add(quiz);
    } 
```

我正在使用自定义适配器添加问题。

我怎样才能改变它以使其工作？有任何想法吗 ？？？请让我知道...

谢谢尼西特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T04:05:07.900

**试试这个**

```
RadioGroup radioGroup;
RadioButton radioButton1;
RadioButton radioButton2;
RadioButton radioButton3;

boolean hack = false;

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    radioGroup = (RadioGroup) findViewById(R.id.radioGroup);
    radioButton1 = (RadioButton) findViewById(R.id.r1);
    radioButton2 = (RadioButton) findViewById(R.id.r2);
    radioButton3 = (RadioButton) findViewById(R.id.r3);

    OnClickListener radioClickListener = new OnClickListener()
    {

        public void onClick(View v)
        {
            if (v.getId() == radioGroup.getCheckedRadioButtonId() && hack)
            {
                radioGroup.clearCheck();
            }
            else
            {
                hack = true;
            }
        }
    };

    OnCheckedChangeListener radioCheckChangeListener = new OnCheckedChangeListener()
    {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
        {
            hack = false;
        }
    };

    radioButton1.setOnCheckedChangeListener(radioCheckChangeListener);
    radioButton2.setOnCheckedChangeListener(radioCheckChangeListener);
    radioButton3.setOnCheckedChangeListener(radioCheckChangeListener);

    radioButton1.setOnClickListener(radioClickListener);
    radioButton2.setOnClickListener(radioClickListener);
    radioButton3.setOnClickListener(radioClickListener);

} 
```

# web-services - 我应该使用 Web 服务的设计模式

> ID：11838830
> 
> 赞同：1
> 
> 时间：2012-08-07T03:25:48.193
> 
> 标签：web-services, oop, design-patterns, single-responsibility-principle, chain-of-responsibility

我的项目中有一个要求，我必须构建一个 Web 服务。该网络服务将执行以下操作：

1.  接受 XML 格式数据
2.  返回 XML 格式数据
3.  XML 输入数据将有一个元素包含登录信息和另一个需要处理的元素数据。

现在我正在寻找一种设计模式，我可以在其中使 web 服务代码看起来整洁干净。因为网络服务必须做很多事情，比如。

1.  首先解析xml
2.  通过检查用户名和密码来验证请求
3.  从数据创建对象，然后将数据保存到数据库
4.  准备和将返回给客户端的 xml。

所以我有大约 4 个主要步骤，如果我在 .asmx.cs 文件中编写整个内容，肯定会使代码看起来很难看。

如果有人可以建议任何适合此的设计模式，以便代码在不久的将来易于维护。

由于这个模块要集成到我现有的项目中，因此有一些限制，比如我不能使用一些 3rd 方模块或 dll。

所以我一直在寻找类似单一职责原则、责任链或命令或装饰器模式或任何其他适合的 oop 概念的东西。

我已经搜索过，但还没有明白从哪种方式开始。

谢谢。

M。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:43:15.190

我不会从头开始写这些。使用 ServiceStack 或 MS MVC 4 作为 web 服务主机。依靠它们进行从 XML 到/从您的对象的转换。这两个框架都包含身份验证功能。从阅读他们的教程开始。在我看来，您似乎没有使用 ORM 或微型 ORM 或各种数据库选项的经验。我也阅读了很多关于这些的教程。

# c++ - Strassen 算法中的递归

> ID：11838838
> 
> 赞同：2
> 
> 时间：2012-08-07T03:26:53.657
> 
> 标签：c++, algorithm, recursion, strassen

我想知道您将如何在 Strassen 的算法中进行递归调用，以及它们究竟需要在哪里。

我知道 7 个乘数比我们原本拥有的 8 个更有效，但我对如何递归计算这些乘数感到困惑。特别是，如果我们遵循分而治之的范式，我们究竟要“划分”矩阵的哪一部分，以及在我们达到可以分别征服递归部分的基本情况之前，我们将如何做呢？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T04:02:03.110

我们在计算这 7 个乘数时进行递归调用。首先，我们将矩阵的大小扩展到 2 的幂，然后在每一步中，我们将每个矩阵分成 4 个部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T04:09:15.210

我们将 A 和 B 均匀地划分为四分之一、十六分之一或六十四分等，以便将它们减少为 2x2 矩阵。Strassen 的方法只能应用于 2^nx 2^n 类型的矩阵。

对于*不是*2^nx 2^n 类型的矩阵，您可以将填充归零，直到满足要求。

# c# - 获取完整的 URL，例如 http://google.com 作为操作输入

> ID：11838840
> 
> 赞同：3
> 
> 时间：2012-08-07T03:27:14.310
> 
> 标签：c#, asp.net-mvc, c#-4.0, asp.net-mvc-routing, asp.net-mvc-4

我想在我的操作中获取 url 以返回页面的 PageRank。我有这样的路线：

```
routes.MapRoute(
    name: "PRURL",
    url: "Utility/PR/{*url}",
    defaults: new { controller = "Utility", action = "PR", url = UrlParameter.Optional }
); 
```

但是每当我去时，`http://localhost:1619/Utility/PR/http://google.com`我都会得到一个`System.Web.HttpException`告诉我`A potentially dangerous Request.Path value was detected from the client (:).`我想解决这个问题但我不知道如何解决的问题！

有谁能够帮助我？

* * *

**更新**

我试过`[ValidateInput(false)]`了，但没有解决问题！动作是这样的：

```
[ValidateInput(false)]
public string PR(string url)
{        
    return GooglePageRank.PRChecker.PR(url);
} 
```

* * *

**通过** 添加更新2

```
<system.web>
   <httpRuntime requestValidationMode="2.0" />
</system.web> 
```

问题没有解决！:(

**终于** 错误解决了，但是 url 从`http://google.com`to变成了，我[在这里](https://stackoverflow.com/questions/11853025/input-url-like-http-site-com-changes-to-http-site-com-in-action-input)`http:/google.com`问了，我得到了答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T04:22:44.247

尝试添加一个`requestPathInvalidCharacters`属性`httpRuntime`

```
<httpRuntime requestValidationMode="2.0" 
    requestPathInvalidCharacters="&lt;,&gt;,*,%,&amp;,\,?" /> 
```

默认值为`&lt;,&gt;,*,%,&amp;,:,\,?`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T03:30:37.960

您可以禁用自动请求验证。

在 web.config 中：

```
<pages validateRequest="false"> 
```

或采取行动：

```
[ValidateInput(false)]
public ActionResult PR(... 
```

我忘记了 web.config。您需要添加到 web.config：

```
<system.web>
  <httpRuntime requestValidationMode="2.0" />
</system.web> 
```

或者您可以编码/解码网址

# php - 用 cakephp 对连接表进行分页

> ID：11838843
> 
> 赞同：0
> 
> 时间：2012-08-07T03:27:30.997
> 
> 标签：php, mysql, cakephp

我有几个动作都正确分页，但我无法弄清楚这个“加入”查询发生了什么。它显示了我表中的所有帖子，而不是像我指定的那样一次显示 3 个。

```
 public function index() { 
    $this->paginate = array(
    'joins' => array(
        array(
            'table' => 'Users',
            'type' => 'inner',
            'limit' => 3,
            'fields' => array('User.username'),
            'conditions' => array('Users.id = Post.user_id')
            )
        ));
    $posts = $this->paginate('Post');
    $this->set(compact('posts'));
} 
```

**在下面编辑**

```
table Users
id | username | password

table Posts
id | body | user_id | created 
```

此功能有效，但不分页。

```
public function index() { 
  $options['joins'] = array(
    array('table' => 'Users',
        'type' => 'inner',
        'fields' => array('User.username'),
        'conditions' => array('Users.id = Post.user_id')
        )
    );
    $post = $this->Post->find('all', $options);
    $this->set('posts', $post);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:03:44.620

尝试这个 ：

```
Your Model class should have relationship like :

Post Model :
public $belongsTo = array('User');

Post Controller :

$this->Post->recursive = 1;
$this->set('posts', $this->paginate());

Index View :
<table >
    <thead>
    <tr>
            <th><?php echo $this->Paginator->sort('id'); ?></th>
            <th><?php echo $this->Paginator->sort('body'); ?></th>
            <th><?php echo $this->Paginator->sort('User.username'); ?></th>
        <tr>
<?php foreach ($posts as $post){ ?>
    <tr>
    <td><?php echo h($post['Post']['id']); ?>&nbsp;</td>
        <td><?php echo h($post['Post']['body']); ?>&nbsp;</td>
        <td><?php echo h($post['User']['username']); ?>&nbsp;</td>
    </tr>
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T11:26:24.710

以下是施展魔法的 3 个步骤。

1) 在 First Model 中，只需添加 First 与 Second 的 $hasMany 关系

```
public $hasMany = array(
                ‘Second’ => array(
                     ‘className’ => ‘Second’,
                     ‘foreignKey’ => ‘first_id’,
                     ‘dependent’ => false,
                     ‘conditions’ => ”,
                     ‘fields’ => ”,
                     ‘order’ => ”,
                     ‘limit’ => ”,
                     ‘offset’ => ”,
                     ‘exclusive’ => ”,
                     ‘finderQuery’ => ”,
                     ‘counterQuery’ => ”
     )
); 
```

2）在第一个控制器中，添加第二个模型用法如下：

```
public $uses = array(‘First’,'Second’); 
```

3) 最后打印 $this->paginate() 你会得到想要的数组。

> NTB：在 First Model 的 $hasMany 数组中，添加任意数量的辅助表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:01:04.630

```
public function index() { 
$this->paginate = array(
'joins' => array(
    array(
        'table' => 'Users',
        'type' => 'inner',
        'fields' => array('User.username'),
        'conditions' => array('Users.id = Post.user_id')
        )
    ),
   'limit' => 3);
$posts = $this->paginate('Post');
$this->set(compact('posts'));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T03:44:09.240

读这个：-

[http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html)

分页不喜欢加入

除了定义通用分页值之外，您还可以在控制器中定义多个分页默认值，您只需在要配置的模型之后命名数组的键：

```
<?php
class PostsController extends AppController {

    public $paginate = array(
        'Post' => array (...),
        'Author' => array (...)
    );
} 
```

Post 和 Author 键的值可以包含模型/键少 $paginate 数组可以包含的所有属性。

# android - 互联网连接丢失时不间断读取输入流

> ID：11838849
> 
> 赞同：3
> 
> 时间：2012-08-07T03:28:05.047
> 
> 标签：android, android-asynctask, inputstream

我正在使用 asynctask 下载文件。它正常工作，直到我关闭我的android的wifi连接（没有其他互联网连接），下载对话框仍然没有变化。当我通过日志检查时，我发现输入流的函数 read() 是不间断的。那么如何检查这种情况呢？这是我的代码：

```
URL url = new URL(this.url);
        URLConnection connection = url.openConnection();
        connection.setReadTimeout(1000);
        connection.connect();
        // this will be useful so that you can show a typical 0-100% progress bar
        int fileLength = connection.getContentLength();
        fileName = "temp.zip";

        // download the file
        InputStream input = new BufferedInputStream(connection.getInputStream());
        OutputStream output = new FileOutputStream(path+fileName);

        byte buffer[] = new byte[1024000];
        long total = 0;
        int count;
        Log.v("test download:","download in background");
        while (((count = input.read(buffer)) != -1)) {
            Log.v("test download:","read:"+count);
            total += count;
            publishProgress((int) (total * 100 / fileLength - 1));
            output.write(buffer, 0, count);
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T21:33:10.460

由于您已经通过调用设置了超时[`setReadTimeout()`](http://developer.android.com/reference/java/net/URLConnection.html#setReadTimeout(int))，因此您应该`SocketTimeoutException`在连接断开后不久得到一个。

您的代码是否碰巧可能会静默捕获此异常？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:15:38.703

你的文件下载缓冲区大小太大 `byte buffer[] = new byte[1024];`就够了

当我尝试[使用 Android 下载文件并使用 asynctask 在 ProgressDialog](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)（最佳答案）中显示进度时，工作正常，没有遇到这个问题

# android - 在应用程序中连接数据库而不在网站上显示界面

> ID：11838860
> 
> 赞同：0
> 
> 时间：2012-08-07T03:30:11.403
> 
> 标签：android, mysql, phpmyadmin

我是新开发的 android 和 web 应用程序，我想知道是否可以连接已经托管在 phpmyadmin 平台提供的网站中的 mySQL DB，只是创建一个到 android 应用程序的接口？因为我只想在 DNS 上托管数据库以访问应用程序内部，并且如果有人尝试访问我的 DNS，我不想显示任何界面

如果可能，请详细说明我是如何得到这个的，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:47:20.953

您可以`Mysql`通过编程使用托管在您网站中的`Php`数据库。

对于这个阅读[`How to connect Android with PHP, MySQL`](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)。

否则，您只需执行以下操作。

```
 1) create db file 
 2) host the db file in database.
 3) download the db file to the device and you can use that db file. 
```

祝你好运。。

# asp-classic - 如何在 XAMPP 中运行 ASP？

> ID：11838861
> 
> 赞同：1
> 
> 时间：2012-08-07T03:30:11.563
> 
> 标签：asp-classic, xampp

我尝试将 asp mod 安装到我的 xampp 中，但是，当我尝试运行 asp 文件时出现服务器错误。

任何人都可以帮忙吗？谢谢！

或者有什么替代方法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-08T13:50:03.210

在 IIS/Windows 中，您使用的是经典管道吗？还要确保它不是给你任何错误的源代码，我认为不是，但为了安全起见，你可以创建一个新的页面名称，比如 test.asp 保存它并在里面写一些代码，如：

```
<html>
<head>
<title>Test ASP Page</title>
</head>
<body>
<%
strMessage = "Hello World"
Response.Write (strMessage)
%>
</body>
</html> 
```

然后在您的网络浏览器中运行它，看看您是否收到一条消息说 Hello World 如果没有，那么您需要在 IIS 中安装 classic-asp。

**请注意：**[如果您需要有关如何安装它的说明，则默认情况下](http://learn.iis.net/page.aspx/562/classic-asp-not-installed-by-default-on-iis/)**未**在 IIS 7.0 / 7.5 上安装经典 ASP 。

这将解决您在 Windows/IIS 中使用 Classic-ASP 时遇到的问题。

祝你好运，让我知道它对你有用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-07T18:47:01.737

您只能运行 ASP.NET（[安装说明](http://www.todayinwindows.com/2011/08/how-to-run-asp-net-on-xampp/)）

# java - 如何使用 Criteria 编写以下 JPQL？

> ID：11838863
> 
> 赞同：0
> 
> 时间：2012-08-07T03:30:37.707
> 
> 标签：java, hibernate, jpa-2.0

学生 - 课程：OneToMany

JPQL：

> 从 Student student, Course course where student.name=:STUDENTNAME and (course.courseName=:COURSENAME or course.courseDuration=courseDuration) 中选择 Student

让我们假设一个学生可能有 10 门课程，我只想检索两条包含 Student - Courses(2) 的记录。

```
CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();
CriteriaQuery<Student> criteriaQuery = criteriaBuilder.createQuery(Student.class);
Root<Student> studentRoot = criteriaQuery.from(Student.class);
studentRoot.fetch("courses", JoinType.LEFT);
Predicate condition = criteriaBuilder.equal(studentRoot.get("studentName"), "someName");
//how to add course condition here.
criteriaQuery.where(condition); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:10:45.333

我希望您的学生实体与课程映射与学生实体中的属性名称课程有关系。

这是标准查询

```
 Criteria criteria = getSession().createCriteria(Student.class);
        criteria.createAlias("course", "course");
        criteria.add(Restrictions.eq("name", STUDENTNAME));        
        Criterion courseNameCrit = Restrictions.eq("course.courseName", courseName);
        Criterion courseDurationCrit = Restrictions.eq("course.courseDuration", courseDuration);
        criteria.add(Restrictions.disjunction().add(courseNameCrit).add(courseDurationCrit));    
        List<Student> studentList = criteria.list(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:43:05.807

在 Criteria API 中没有等效的 JPA QL “JOIN FETCH”。

JOIN FETCH 使用 EAGER 提取，而与模型注释中指定的提取类型无关。

如果你使用的是criteria api，你可以在dao中调用child的getter方法，让它被加载。

# php - MYSQL 按日期或主键排序？

> ID：11838866
> 
> 赞同：4
> 
> 时间：2012-08-07T03:31:02.200
> 
> 标签：php, mysql

我有一个带有自动增量主键列和日期时间列的表。我想返回按创建日期排序的行。

我按日期或主键订购有关系吗？`0000-00-00 00:00:00`我想与日期格式或时间戳相比，主键更快。新记录将具有更大的主键。然而，每个人都按日期字段排序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T03:35:05.407

按日期字段排序，但请确保在日期字段上放置索引。

日期字段是二进制字段，它与主键一样快。（日期是 3 个字节，而整数主键是 4。）它不使用字符串对其进行排序，正如您所假设的那样。

更重要的是，它表明了你的意图，（加上主键可能会环绕）。

此外，如果您使用 innodb，则根据事务交错的方式，主键完全有可能不按顺序排列。

此外，如果您擅长阅读查询计划，请将日期列添加到用于查询的同一索引的末尾。但是，这仅适用于特定情况，因此只有在您知道它会有所帮助时才这样做。即不要盲目地去做。

# silverlight - Windows phone 7.5 - 动画数据透视项加载事件

> ID：11838872
> 
> 赞同：1
> 
> 时间：2012-08-07T03:32:23.963
> 
> 标签：silverlight, windows-phone-7

我想在应用程序中加载一个数据透视项时为其设置动画。以下代码引发异常 - 无法设置属性 RoutedEvent：

```
<controls:PivotItem x:Name="myPivot">
  <controls:PivotItem.Triggers>
     <EventTrigger RoutedEvent="controls:PivotItem.Loaded">
        <BeginStoryboard>
           <Storyboard>
              <DoubleAnimation Storyboard.TargetName="myPivot"
                               Storyboard.TargetProperty="Opacity"
                               From="0.6" To="1.0" Duration"0:0:1" />
           </Storyboard>
        </BeginStoryboard>
     </EventTrigger>
  </controls:PivotItem.Triggers>
  ...
</controls:PivotItem> 
```

完全相同的代码在网格或矩形上完美运行。我的印象是这适用于任何框架元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T05:17:06.803

尝试删除`RoutedEvent`属性

请参阅事件[文档的备注](http://msdn.microsoft.com/en-us/library/ms596558%28vs.95%29)

如果不指定路由事件，则默认为`Loaded`事件。

（这是我学会做的那些技巧之一，`XamlParseException`虽然我不完全理解。）

# sql-server - 仅取最近组的平均值

> ID：11838873
> 
> 赞同：1
> 
> 时间：2012-08-07T03:32:26.317
> 
> 标签：sql-server, stored-procedures

有一个名为的表，`StudentScore`其中包含以下字段：`Score`、和。后面三个是主键。`CourseID``StudentID``Semester`

我想编写一个存储过程来获取每个学生的平均分数。但是规则相当复杂，我不知道如何在一个查询中表达它。如果可能，应避免嵌套查询。

这是规则：

**如果一个学生多次参加一门课程，则只计算最后的分数。**

例如，有以下数据：

```
StudentID    | CourseID  | Semester  | Score
1              1           1           80
1              2           1           40
1              3           1           60
1              2           2           50
1              3           2           20
2              1           1           90 
```

存储过程应返回：

```
StudentID    | AvgScore
1              50 // which is avg(80, 50, 20)
2              90 
```

请建议尽可能高效的存储过程。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T03:43:05.133

```
;WITH x AS 
(
  SELECT StudentID, Score, rn = ROW_NUMBER() OVER 
   (PARTITION BY StudentID, CourseID 
    ORDER BY Semester DESC) 
  FROM dbo.StudentScore
)
SELECT StudentID, AvgScore = AVG(Score)
FROM x
WHERE rn = 1
GROUP BY StudentID; 
```

如果您想要四舍五入到某些小数位，也许：

```
;WITH x AS 
(
  SELECT StudentID, Score = 1.0*Score, rn = ROW_NUMBER() OVER 
   (PARTITION BY StudentID, CourseID 
    ORDER BY Semester DESC) 
  FROM dbo.StudentScore
)
SELECT StudentID, AvgScore = CONVERT(DECIMAL(10,2), AVG(Score))
FROM x
WHERE rn = 1
GROUP BY StudentID; 
```

# java - 尝试在 MapActivity 中执行的 AsyncTask 中显示 ProgressDialog

> ID：11838874
> 
> 赞同：0
> 
> 时间：2012-08-07T03:33:04.827
> 
> 标签：java, android, android-asynctask, progressdialog

我有一个 MapActivity，在 onCreate() 中有与此类似的代码：

```
if(...) {
    ...
    new FirstAsyncTask(id, this).execute((Object[]) null);
    ...
} else {
    ...
    myLocationOverlay.runOnFirstFix(new Runnable() {
        new SecondAsyncTask(lat, lon, ActivityName.this).execute((Object[]) null);
    }
    ...
} 
```

FirstAsyncTask 和 SecondAsyncTask 都做不同的事情，但它们都显示一个 ProgressDialog，如下所示：

```
public FirstAsyncTask(long id, Context context) {
    progressDialog = new ProgressDialog(context);
}

protected void onPreExecute() {
    ...
    progressDialog.show();
}

protected String doInBackground(Object... params) {
    ...
    progressDialog.dismiss();
    ...
} 
```

这适用于 FirstAsyncTask，但无论我在对 SecondAsyncTask 的调用中进行什么更改，它总是会失败并出现以下错误：无法在未调用 Looper.prepare() 的线程内创建处理程序。我尝试将上下文参数设置为“this”、“ActivityName.this”、getApplicationContext() 和 getBaseContext()。

我对 Android 还是很陌生，所以这个“上下文”的想法让我感到困惑。我对 FirstAsyncTask 有效但 SecondAsyncTask 无效感到更加困惑。我已经看到在其他问题中提到了很多这个错误，但似乎没有一个答案有效。有任何想法吗？

编辑：在 SecondAsyncTask 的构造函数中初始化 ProgressDialog 时引发异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:36:46.350

在方法中编写对话关闭代码`onPostExecute()`，它将在 UI 线程中运行代码

```
@Override
protected void onPostExecute(Void result) {
progressDialog.dismiss();
} 
```

以这种方式编写您的 AsyncTask 类：

```
private class FirstAsyncTask extends AsyncTask<String, Void, Void> {

    ProgressDialog myDialog = null;
@Override
protected void onPreExecute() {
myDialog = ProgressDialog.show(YourActivityClass.this, "",
                "Loading Data...");
return;
}

@Override
protected Void doInBackground(String... urls) {
//Your code which you want to run in background
return null;
}

@Override
protected void onPostExecute(Void result) {
myDialog.dismiss();
return;
}
} 
```

如果您已将 AsyncTask 类定义为 Activity 的内部类，则上述代码有效。如果您的 AsyncTask 类被定义为一个单独的类，那么您必须将活动的上下文传递给它的构造函数

```
ProgressDialog myDialog = null;
Context context;
public FirstAsyncTask (Context context) {
    this.context = context;     
}

@Override
protected void onPreExecute() {
myDialog = ProgressDialog.show(context, "",
            "Loading Data...");
return;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T03:39:20.403

问题就在这里

```
myLocationOverlay.runOnFirstFix(new Runnable() {
    new SecondAsyncTask(lat, lon, ActivityName.this).execute((Object[]) null);
} 
```

SecondAsyncTask 正在新生成的线程上构建。不是 UI 线程。

在活动中创建一个progressDialog。然后从 Asynctasks 访问 Activity 的 progressDialog。

```
public class MyActivity extends Activity {
    ProgressDialog mProgressDialog;

    onCreate(...){
        mProgressDialog = new ProgressDialog();
    }

    private class MyAsyncTask extends AsyncTask<...> {
        ...
        onPreExecute(...){
            mProgressDialog.show();
        }

        onPostExecute(...){
            mProgressDialog.dismiss();
        }
    }

    private class MyAsyncTask2 extends AsyncTask<...> {
        ...
        onPreExecute(...){
            mProgressDialog.show();
        }

        onPostExecute(...){
            mProgressDialog.dismiss();
        }
    } 
```

不要尝试从 doInBackground 执行 progressDialog.dismiss()，而是将其放在 UI 线程中运行的 postExecute 中。

一旦所有这些都正常工作，您将需要设置标志，以便仅在两个任务完成后关闭进度对话框。

# iphone - sortUsingComparator 在 NSMutableArray 中的 NSDictionary 上具有多个 objectKeys

> ID：11838876
> 
> 赞同：3
> 
> 时间：2012-08-07T03:33:18.473
> 
> 标签：iphone, ios, nsmutablearray, nsdictionary

我正在尝试对 NSDictionaries 的 mutableArray 进行排序，目前我可以通过使用一个 objectForKey 值进行排序来做到这一点，但这样做的问题是很多这些值可能是相同的，所以我需要另一个 objectForKey 来对数组进行排序。我想知道，如果第一个 objectForKey 比较返回相同的值，我如何才能进入第二个 objectForKey 比较等等。

目前我正在这样做，它有效..但显然只有一个键。

```
[dataArrayOfDictionaries sortUsingComparator:^ NSComparisonResult(NSDictionary *d1, NSDictionary *d2)
    {
        NSString *n1 = [d1 objectForKey:@"DESCRIPTION"];
        NSString *n2 = [d2 objectForKey:@"DESCRIPTION"];
        return [n1 localizedCompare:n2];
    } ]; 
```

在我的调查中，我尝试过这个 -

```
[dataArrayOfDictionaries sortUsingComparator:^ NSComparisonResult(NSDictionary *d1, NSDictionary *d2)
{
    NSString *n1 = [d1 objectForKey:@"DESCRIPTION"];
    NSString *n2 = [d2 objectForKey:@"DESCRIPTION"];
    return [n1 localizedCompare:n2];
    n1 = [d1 objectForKey:@"ID"];
    n2 = [d2 objectForKey:@"ID"];
    return [n1 localizedCompare:n2];

} ]; 
```

但是，这不起作用，因为它对描述进行排序，然后完全根据 ID 进行排序，如果描述键相同，我想要它然后按 ID 键对这些值进行排序.. 如果这不起作用，则进入列表钥匙直到它排序..我希望这是有道理的..任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T04:09:18.283

您在问题中几乎描述了解决方案：“如果描述键相同，则按 ID 键对这些值进行排序”。你可以直接把那个英文句子翻译成代码：

```
[dataArrayOfDictionaries sortUsingComparator:^ NSComparisonResult(NSDictionary *d1, NSDictionary *d2) {
    NSString *n1 = [d1 objectForKey:@"DESCRIPTION"];
    NSString *n2 = [d2 objectForKey:@"DESCRIPTION"];
    NSComparisonResult result = [n1 localizedCompare:n2];
    if (result == NSOrderedSame) {
        n1 = [d1 objectForKey:@"ID"];
        n2 = [d2 objectForKey:@"ID"];
        result = [n1 localizedCompare:n2];
    }
    return result;
}]; 
```

`NSSortDescriptor`您还可以使用两个对象执行排序：

```
[dataArrayOfDictionaries sortUsingDescriptors:[NSArray arrayWithObjects:
    [NSSortDescriptor sortDescriptorWithKey:@"DESCRIPTION" ascending:YES
        selector:@selector(localizedCompare:)],
    [NSSortDescriptor sortDescriptorWithKey:@"ID" ascending:YES
        selector:@selector(localizedCompare:)],
    nil]]; 
```

# ruby-on-rails - 如何减少ruby中数组的维度

> ID：11838877
> 
> 赞同：2
> 
> 时间：2012-08-07T03:33:19.687
> 
> 标签：ruby-on-rails, ruby

我们有一个这样的数组项：

```
items = [[[["2012-09-01", 10], ["2011-09-10", 20]]], [[["2010-01-01", 23]]]] 
```

如何将 4 维项减少为 2 维数组，如下所示：</p>

```
items = [["2012-09-01", 10], ["2011-09-10", 20], ["2010-01-01", 23]] 
```

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T03:37:22.150

试试数组#flatten。- [http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-flatten](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-flatten)

```
irb(main):001:0> items = [[[["2012-09-01", 10], ["2011-09-10", 20]]], [[["2010-01-01", 23]]]]
=> [[[["2012-09-01", 10], ["2011-09-10", 20]]], [[["2010-01-01", 23]]]]
irb(main):002:0> items.flatten(2)
=> [["2012-09-01", 10], ["2011-09-10", 20], ["2010-01-01", 23]] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T03:36:33.083

使用 Ruby 的 flatten 方法。

您可以指定要展平的级别量。

见[http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-flatten](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-flatten)

# java - 为什么解密函数返回垃圾码？

> ID：11838881
> 
> 赞同：1
> 
> 时间：2012-08-07T03:33:49.967
> 
> 标签：java, base64, apache-commons, encryption

我已将基于 C# 的解密函数翻译成 Java。它工作正常，可用于解密已由 C# 程序加密的密码。这是源代码：

```
import org.apache.commons.codec.binary.Base64;

import javax.crypto.Cipher;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;
import java.security.Key;

public class TestDecrpt {
    public static void main(String[] args) throws Exception {
        String data = "encrypted data";
        String sEncryptionKey = "encryption key";
        byte[] rawData = new Base64().decode(data);
        byte[] salt = new byte[8];
        System.arraycopy(rawData, 0, salt, 0, salt.length);

        Rfc2898DeriveBytes keyGen = new Rfc2898DeriveBytes(sEncryptionKey, salt);

        byte[] IV = keyGen.getBytes(128 / 8);
        byte[] keyByte = keyGen.getBytes(256 / 8);

        Key key = new SecretKeySpec(keyByte, "AES");
        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        cipher.init(Cipher.DECRYPT_MODE, key, new IvParameterSpec(IV));
        int pureDataLength = rawData.length - 8;
        byte[] pureData = new byte[pureDataLength];
        System.arraycopy(rawData, 8, pureData, 0, pureDataLength);
        String plaintext = new String(cipher.doFinal(pureData), "UTF-8").replaceAll("\u0000", "");
        System.out.println(plaintext);
    }
} 
```

我按照它的算法来编写加密函数。代码是：

```
import org.apache.commons.codec.binary.Base64;

import javax.crypto.Cipher;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;
import java.security.Key;
import java.security.SecureRandom;

public class testEncrypt {
    public static void main(String[] args) throws Exception {
        String data = "Welcome2012~1@Welcome2012~1@Welcome2012~1@Welcome2012~1@Welcome2012~1@";
        String sEncryptionKey = "encryption key"; # the same key
        byte[] rawData = new Base64().decode(data);
        SecureRandom random = new SecureRandom();
        byte[] salt = new byte[8];
        random.nextBytes(salt);
        Rfc2898DeriveBytes keyGen = new Rfc2898DeriveBytes(sEncryptionKey, salt);

        byte[] IV = keyGen.getBytes(128 / 8);
        byte[] keyByte = keyGen.getBytes(256 / 8);

        Key key = new SecretKeySpec(keyByte, "AES");
        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        cipher.init(Cipher.ENCRYPT_MODE, key, new IvParameterSpec(IV));
        byte[] out2 = cipher.doFinal(rawData);

        byte[] out = new byte[8 + out2.length];
        System.arraycopy(salt, 0, out, 0, 8);
        System.arraycopy(out2, 0, out, 8, out2.length);
        //String outStr=new String(out,"UTF-8");
        String outStr = new Base64().encodeToString(out);
        System.out.println(outStr);
        System.out.print(outStr.length());

    }
} 
```

但是加密后的数据无法正确解密，总是返回垃圾码，比如

> ꉜ뙧巓妵峩枢纽펶땝ꉜ뙧巓妵峩枢纽펶땝ꉜ뙧巓。</p>

加密功能有问题吗？

==================================================== =============================== [更新] 改代码后

```
byte[] rawData = data.getBytes("UTF-8"); 
```

数据可以成功加密和解密。但是，在 Java 中加密的数据无法在 C# 中正确解密。这是C#版本的解密函数：

```
using System;
using System.IO;
using System.Security.Cryptography;
using System.Text;

namespace Test
{
    class Program
    {
        public static void Main(string[] args)
        {
                string data="EncryptedData";
                string sEncryptionKey="EncryptionKey";

                byte[] rawData = Convert.FromBase64String(data);
                byte[] salt = new byte[8];
                for (int i = 0; i < salt.Length; i++)
                    salt[i] = rawData[i];

                Rfc2898DeriveBytes keyGenerator = new Rfc2898DeriveBytes(sEncryptionKey, salt);
                Rijndael aes = Rijndael.Create();
                aes.IV = keyGenerator.GetBytes(aes.BlockSize / 8);
                aes.Key = keyGenerator.GetBytes(aes.KeySize / 8);

                using (MemoryStream memoryStream = new MemoryStream())
                using (CryptoStream cryptoStream = new CryptoStream(memoryStream, aes.CreateDecryptor(), CryptoStreamMode.Write))
                {
                    cryptoStream.Write(rawData, 8, rawData.Length - 8);
                    cryptoStream.Close();

                    byte[] decrypted = memoryStream.ToArray();
                    Console.Out.WriteLine(Encoding.Unicode.GetString(decrypted));
                    Console.In.ReadLine();
                }

        }
    }
} 
```

我发现原始代码使用“Unicode”作为输出格式，

```
Encoding.Unicode.GetString(decrypted) 
```

所以我将我的 Java 代码更改为“Unicode”。

在 Java 中解密：

```
String plaintext = new String(cipher.doFinal(pureData), "Unicode");
System.out.println(plaintext); 
```

对于 Java 中的加密：

```
byte[] rawData = data.getBytes("Unicode"); 
```

但是用C#代码解密已经被Java程序加密的数据还是会遇到垃圾代码。

我该如何解决这个问题？有什么神奇的技巧吗？

* * *

[上次更新] 使用“UTF-16LE”而不是“UTF-8”后，问题消失了。似乎“UTF-16LE”是Java相当于C#的“Unicode”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T03:42:51.637

这就是问题：

```
String data = "Welcome2012~1@Welcome2012~1@Welcome2012~1@Welcome2012~1@Welcome2012~1@";
byte[] rawData = new Base64().decode(data); 
```

该文本并不意味着是 base64 编码的二进制数据。这只是文字。您为什么要尝试将其解码为 base64 数据？

你要：

```
byte[] rawData = data.getBytes("UTF-8"); 
```

这样，当您稍后编写时：

```
String plaintext = new String(cipher.doFinal(pureData), "UTF-8")
                                    .replaceAll("\u0000", ""); 
```

你正在做相反的动作。（诚​​然，您可能不需要`replaceAll`电话，但那是另一回事。）

对于这样的事情，你需要确保你在“出去”的路上所采取的步骤与在“进来”的路上所采取的步骤相反。所以在正确的代码中，你有：

```
Unencrypted text data => unencrypted binary data (encode via UTF-8)
Unencrypted binary data => encrypted binary data (encrypt with AES)
Encrypted binary data => encrypted text data (encode with base64) 
```

所以要反转，我们这样做：

```
Encrypted text data => encrypted binary data (decode with base64)
Encrypted binary data => unencrypted binary data (decrypt with AES)
Unencrypted binary data => unencrypted text data (decode via UTF-8) 
```

# c# - The applications started by console application fail to display on desktop

> ID：11838889
> 
> 赞同：0
> 
> 时间：2012-08-07T03:34:31.053
> 
> 标签：c#, winforms, windows-services

I have a windows service called MainService, which is used to monitor SubServices. The SubServices are actually some console applications and started by the MainService via Process.Start() method. Example code:

```
var subServiceProcess = Process.Start(subService.ServicePath); 
```

The SubServices work perfectly until one of them needs to start another desktop application like the MainService does. Example code:

```
var desktopApplicationProcess = Process.Start(desktopApplicationPath); 
```

The desktopApplicationProcess is created and we can see it in the taskmanager. However, its GUI doesn't show. I've tried to run the sub service manually, and then the desktop runs correctly. So, I guess this is caused by that the sub service is started by the MainService.

Can anybody give me some sugguestion? Thanks a lot~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:42:22.440

您是否允许服务与桌面交互？

![在此处输入图像描述](../Images/149a57fed57f8896c71a0554e92ba167.png)

# backgroundworker - 使用后台工作者和 process.start 无法检索进度状态

> ID：11838891
> 
> 赞同：0
> 
> 时间：2012-08-07T03:34:33.510
> 
> 标签：backgroundworker, process.start

晚上好，

我刚开始玩 C#，并尝试为在命令行中运行的程序创建 GUI。我已经能够让它运行，但现在我被困在试图为其实现一个进度条。

我已阅读其他帖子，但我无法找到确切的问题或了解如何将解决方案应用于我的问题。

这是我的代码（如果这很混乱，请道歉）：

```
private void MethodToProcess(Object sender, DoWorkEventArgs args)
    {
        // Set all the strings for passthrough
        String USMTPath_Work = USMTPath + USMTArch;
        String USMTPath_full = USMTPath_Work + @"\Scanstate.exe";
        String USMTFlags_Capture = @"/c /v:13 /o /l:scanstate.log /localonly /efs:copyraw";
        String Argument_full = SavePath + XML1 + XML2 + USMTFlags_Capture;

        // Test that USMT path is correct            
        if (USMTPath == null)
        {
            MessageBox.Show("Error: There is no USMT Path defined.");
            return;
        }

        // Test that Windows folder is correct when offline
        /* if (Windows_Path == null)
        {
            MessageBox.Show("Error: There is no Windows Path to capture.");
            return;
        } */

        // Runs the capture
        System.Diagnostics.Process Scanstate = new System.Diagnostics.Process();
        Scanstate.StartInfo.FileName = USMTPath_full;
        Scanstate.StartInfo.Arguments = Argument_full;
        Scanstate.StartInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
        Scanstate.StartInfo.WorkingDirectory = USMTPath_Work;
        //Scanstate.StartInfo.UseShellExecute = false;
        Scanstate.StartInfo.CreateNoWindow = true;
        //Scanstate.StartInfo.RedirectStandardOutput = true;
        Scanstate.Start();
        Scanstate.WaitForExit();

        String Str_ExitCode = Scanstate.ExitCode.ToString();

        if (Scanstate.ExitCode == 1)
            MessageBox.Show("Error: Data has not been captured. Please check the log files for details.");
        if (Scanstate.ExitCode == 0)
            MessageBox.Show("Success: Data has been captured. For more information, check log files.");
        else
        {
            MessageBox.Show("Error: Unknown error has occurred. Please check the log files for details.");
            MessageBox.Show("Error Code: " + Str_ExitCode);
        }

        Scanstate.Close();

    } 
```

基本上，我正在尝试运行进程scanstate.exe。现在，我正在尝试运行 backgroundworker 以便能够检索进度并将其传递给进度条。

```
 private void btnCapture_Click(object sender, EventArgs e)
    {
        progressBar1.Minimum = 0;
        progressBar1.Maximum = 100;
        progressBar1.Step = 1;

        BackgroundWorker CaptureBG = new BackgroundWorker();
        CaptureBG.WorkerReportsProgress = true;
        CaptureBG.DoWork += new DoWorkEventHandler(MethodToProcess);
        CaptureBG.RunWorkerCompleted +=new RunWorkerCompletedEventHandler(CaptureBG_RunWorkerCompleted);
        CaptureBG.ProgressChanged += new ProgressChangedEventHandler(CaptureBG_ProgressChanged);
        CaptureBG.RunWorkerAsync();
    } 
```

和

```
 private void CaptureBG_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs args)
    {
        progressBar1.Value = 100;
    }

    private void CaptureBG_ProgressChanged(object sender, ProgressChangedEventArgs args)
    {
        progressBar1.Value++;
    } 
```

但是，由于进程运行，我要么误解了使用，要么遗漏了一些东西，但我在进度条上没有任何进展。它仅在过程完成后填充。

我究竟做错了什么？一般来说，如果我不确切知道需要多长时间，流程将如何报告进度？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T03:46:16.710

*BackgroundWorker*负责在其任务进一步完成时更新进度。

您启动的流程与您的代码之间没有交互，该代码会将*流程的*进度提供给您的代码。

为了使它起作用，必须发生两件事：

1.  您需要为您的*流程*定义一种机制来向*BackgroundWorker*报告进度。
2.  *BackgroundWorker必须通过调用*[ReportProgress](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.reportprogress%28v=vs.90%29)方法来更新自己的进度，以便触发ProgressChanged 事件*。*

第一步很棘手，取决于*scanstate.exe 的*工作方式。它是否可以指示进度，例如写入控制台？如果是这样，您可以重定向控制台输出并解析该输出以确定或至少估计进度。

**更新**

[Scanstate.exe](http://technet.microsoft.com/en-us/library/dd560781%28v=ws.10%29.aspx)提供了将进度写入日志的能力，例如：

```
scanstate /i:migapp.xml /i:miguser.xml \\fileserver\migration\mystore /progress:prog.log /l:scanlog.log 
```

您可以在 BackgroundWorker 中使用[FileWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)来查找对进度日志的更改并相应地更新进度。

# c++ - C ++在杀死其父进程后保持进程存活

> ID：11838895
> 
> 赞同：3
> 
> 时间：2012-08-07T03:34:49.507
> 
> 标签：c++, macos, process, installation, daemon

我正在为 OS X 上的守护进程实现自我更新程序。更新以 .pkg 文件的形式发布，所以我要做的事情如下：当通知守护进程有可用更新时，它通过 system() 调用调用[安装](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man8/installer.8.html)程序来安装软件包。该软件包包含一个较新版本的守护程序、一个停止守护程序的升级前脚本 ( `launchctl unload /Library/LaunchDaemons/foo.plist`) 和一个在安装新版本后启动它的 postflight 脚本。我遇到的问题是安装程序过早退出。我怀疑这可能是因为安装程序为了更新它而杀死了它的父进程，然后自己被杀死而不是继续作为它自己的孤立进程。我试过以下没有运气：

*   使用“&”后挂安装程序命令以在后台运行它
*   [使用nohup](http://developer.apple.com/library/mac/#documentation/darwin/reference/manpages/man1/nohup.1.html)包装安装程序命令

当我从命令行运行安装命令时，安装命令始终如一地完成，而从安装程序运行时始终失败。当从安装程序调用时，我将输出通过管道传输到一个文件，有时它什么都没有，有时它显示安装在输出停止之前完成了大约 41%。关于如何弄清楚进程发生了什么或确保它在没有父进程的情况下保持活力的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T04:02:25.260

当您调用 时`launchctl unload`，它会杀死整个进程组（与简单的 不同`kill`）。您希望将子流程移动到单独的流程组中。最简单的方法是使用 C 调用`setsid()`。

如果您正在使用 shell 脚本，则应该查看以下方法。自从我处理 C 程序以来，我还没有尝试过这些，并且可以`setsid()`：

*   在调用安装程序之前，请使用`set -m`. 这应该打开监控模式，它表示“后台进程在单独的进程组中运行，并且在完成后打印包含其退出状态的行。”
*   试试这个子交互式 shell 技巧：[shell 脚本中的新进程组](http://caritas-space.blogspot.com/2009/06/new-process-group-in-shell-script.html)

# java - NTLM 身份验证 - 它只是一个提示（挑战），还是真的进行身份验证？

> ID：11838898
> 
> 赞同：0
> 
> 时间：2012-08-07T03:35:21.463
> 
> 标签：java, security, web-applications, ntlm

我有一个 (java) web 应用程序，并且我启用了 NTLM 身份验证。

当我们的（windows）内网环境中的浏览器出现登录提示时。我看到的行为是：

NTLM 提示似乎根本没有进行任何身份验证，我可以在用户 ID 提示中键入任何随机字符串，它允许用户继续进入应用程序。提示永远不会让用户失望。

那么，我需要在服务器端检查什么来查找身份验证是否成功？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T05:07:43.187

NTLM auth 背后的想法是登录用户无需再次明确输入其用户名和密码即可继续连接。因此，无论您的应用程序询问您什么都无关紧要（您可以自己看到），而是使用您的系统凭据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:26:46.470

[NTLM 身份验证](http://en.wikipedia.org/wiki/NTLM)已被破坏多年——NTLM 2 与 NT 4 一起发布，所以希望人们现在已经继续前进。如果要使用 Active Directory 登录信息，则应改用 Kerberos。

# c# - Can I make WPF ComboBox treat substring as new value?

> ID：11838905
> 
> 赞同：0
> 
> 时间：2012-08-07T03:36:29.420
> 
> 标签：c#, wpf, combobox

I'm using a ComboBox defined by:

```
 <ComboBox Grid.Column="2" Height="29" HorizontalAlignment="Left" Margin="137,192,0,0" Name="componentsComboBox" VerticalAlignment="Top" Width="224" 
              IsEditable="True"
              TextSearch.TextPath="Name">
        <ComboBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Name}" />
            </DataTemplate>
        </ComboBox.ItemTemplate>
    </ComboBox> 
```

..to display a list of objects by their "Name" properties. I'm observing the following behaviors:

1.  Click an item in the dropdown, and componentsComboBox.SelectedValue (and .SelectedItem) correspond to the clicked item. OK!
2.  Start typing the name of an item, autocomplete fills in as you type, .SelectedValue (and .SelectedItem) correspond to the autocompleted item. GREAT!
3.  Start typing the name of an item, autocomplete fills in as you type, *hit delete to truncate to only what you have actually typed*, .SelectedValue and .SelectedItem STILL correspond to the autocompleted item. NO! BAD WPF! BAD!
4.  Similar behavior to 3 if you delete characters from the end of the textbox portion

In essence, if I have a List containing two objects defined by, e.g.,

```
{ new Component() { Name = "COMPONENT1"}, 
  new Component() { Name = "COMPONENT2"} } 
```

I want the values:

*   COMPONENT1
*   COMPONENT2

to appear in the drop-down portion, and if the user enters "COMP" I would like to recognize that they have entered a new value, but as it stands right the control makes it look like they selected COMPONENT1.

What am I missing here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T05:48:13.963

您可以通过将 IsEditable 和 IsReadOnly 属性分别设置为 True 和 False 在 WPF 中轻松完成此操作。

参考：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.combobox.iseditable.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.combobox.iseditable.aspx)

例如[，如何允许用户在 WPF 的 ComboBox 中编辑文本？](http://learnwpf.com/post/2006/07/12/How-can-I-allow-users-to-edit-text-in-a-ComboBox-in-WPF.aspx)

```
<Window x:Class="LearnWPF.EditableComboBox.Window1" 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    Title="LearnWPF.EditableComboBox" Height="300" Width="300" 
    > 
  <Window.Resources> 
    <XmlDataProvider x:Key="items" XPath="//item"> 
      <x:XData> 
        <items xmlns=""> 
          <item>01</item> 
          <item>02</item> 
          <item>03</item> 
        </items> 
      </x:XData> 
    </XmlDataProvider> 
  </Window.Resources> 
    <Grid> 
      <ComboBox IsEditable="True" DataContext="{StaticResource items}" 
                ItemsSource="{Binding}"/> 
    </Grid> 
</Window> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T21:12:29.767

我今天经历了这种行为，并同意从表面上看，这似乎是一个错误。挖掘得更深一些，但会发现一些灰色区域。

我认为这里发生的是，每次更新文本框时，控件都会运行前缀匹配算法，而不管导致文本框更新的击键。所以当你删除文本的自动完成部分时，前缀匹配算法仍然匹配控件的ItemsSource中的一个项目；控件不会试图推断最终用户刚刚删除了自动完成的部分，因此算法不应该运行。

回复：您对 akjoshi 回复的评论，当您删除“2”时，在组合框的文本框中只留下“0”，前缀匹配算法正确匹配“01”项目。

我使用的解决方法是仅绑定到 ComboBox 的 Text 属性并以此构建所有视图模型逻辑。SelectedItem、SelectedIndex 和 SelectedValue 根本没有绑定。

# c# - 在 Literals 中加载 javascript 文件是一种不好的做法吗？(ASP.NET)

> ID：11838912
> 
> 赞同：2
> 
> 时间：2012-08-07T03:37:12.133
> 
> 标签：c#, javascript, asp.net, literals

好像比较方便。我想知道是否有充分的理由加载其中一种 RegisterScript 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:46:56.643

可以使用 RegisterScript 方法，而无需在页面中放置任何标记，也无需知道页面的特定类型。此外，您可以多次添加相同的脚本，并且它只会在页面中包含一次。

当您想要包含来自用户控件的脚本时，这很方便，因为您可以在不同的页面中使用该控件，并且可以在同一页面中多次使用该控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T04:32:06.203

也许我错了，但我不记得在没有`<form runat="server">...</form>`. 那咬了我一次。在这些情况下，使用文字或占位符并不是一个特别糟糕的选择。我能想到的其他选项是确保`head`标签（或其他一些有用的标签）有 runat="server" 然后动态添加到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T03:54:38.493

取决于您要达到的目标。你真的需要动态生成javascript吗？您可以创建一个单独的 js 文件并重用它。

与**RegisterScript**方法一样，您可以控制要放置 javascript 的位置。例如，使用**RegisterStartupScript**，它会在页面末尾注册您的脚本（有助于感知性能并确保所有对象都已加载）

如果您使用文字控件，您可能必须记住将它放在页面的末尾或顶部。

# php - iframe loads style of the parent page. Is here any way to specify the domain?

> ID：11838914
> 
> 赞同：1
> 
> 时间：2012-08-07T03:37:27.827
> 
> 标签：php, css, iframe

I am developing a HTML mobile browser simulator. For this I have used curl method for parsing the actual website content that is to be tested. This I loaded in the iframe in my website. The iframe src will looklike mydomain.com/tester.php?url=urltobetested.com where tester.php resides in my domain and parses the test url content as html string. My problem is that, the iframe also loads the styles that I used in my domain, so the actual styles of test url was missing.

Is there any way to specify the url within the html content something like ?

thanks in advance

# java - java中的回调是什么？

> ID：11838917
> 
> 赞同：0
> 
> 时间：2012-08-07T03:37:42.110
> 
> 标签：java, callback

我这里有这段代码。（此代码取自 Thinking in Java 4th Edition）

```
//{Args: "D.*\.java}
import  java.util.regex.*;
import java.io.*;
import java.util.*;

public class DirList {
    public static void main (String[] args){
        File path = new File(".");
        String[] list;
        if(args.length == 0)
            list = path.list();
        else
            list = path.list(new DirFilter(args[0]));

        Arrays.sort(list,String.CASE_INSENSITIVE_ORDER);
        for(String dirItem : list ){
            System.out.println(dirItem);
        }
    }
}

class DirFilter implements FilenameFilter{
    private Pattern pattern;
    public DirFilter(String regex){
        pattern = Pattern.compile(regex);
    }

    public boolean accept(File Dir,String name){
        return pattern.matcher(name).matches();
    }
} 
```

然后当我阅读它的解释时，我遇到了这个

> `DirFilter`存在的唯一原因是为方法提供`accept( )` 方法，`list( )`以便`list( )`可以“回调”`accept( )` 以确定哪些文件名应包含在列表中。因此，这种结构通常被称为回调。

Soo 回调具体是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T03:41:27.807

回调是您提供给正在使用的库的方法，以便库可以调用您的方法来执行工作（或者更确切地说是*回调*您的代码，因此得名）。

更一般地说，任何两层代码都可以通过回调函数进行交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T03:41:11.413

回调实际上只是一个您交给某个 API 的函数，然后该 API 在某些预期事件上调用该函数。例如，如果您正在使用一些网络 API，那么您可以发出异步发送请求以及在发送请求完成后将调用的回调。您可以使用该回调设置一些布尔值，让您知道如果/当您有任何新内容要发送时，您现在可以发送其他内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T03:42:04.163

在 Java 的上下文中，为接口实现的方法将被视为回调。在您的代码中，`DirFilter`实现`FilenameFilter`具有接受方法。由于我们传递了一个`DirFilter`to list 方法的实例，因此该方法可以调用 accept 方法，尽管不知道它的实现。

# sql - How to use LIKE with IN in DB2?

> ID：11838919
> 
> 赞同：13
> 
> 时间：2012-08-07T03:37:58.050
> 
> 标签：sql, db2

```
SELECT * FROM abc WHERE column1 IN (a1,b1,c1) 
```

I want to use LIKE with this select query; how can I write LIKE statement with IN, similar to the query below:

```
SELECT * FROM abc WHERE column1 LIKE IN (a%,b%,c%) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-07T03:41:13.527

You can't combine `like` with `in`. Write it as separate comparisons:

```
select column1
from abc
where column1 like 'a%' or column1 like 'b%' or column1 like 'c%' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T03:40:17.373

You can't. Write it as:

```
column1 LIKE 'a%' OR column1 LIKE 'b%' OR column1 LIKE 'c%' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T03:58:13.243

正如其他人所说，您可以使用 OR 条件列表来指定条件。

您还可以在 from 子句中使用临时表或子查询。以下是 from 子句中的子查询示例：

```
select column1
   from abc
   , table(
       (select 'a%' as term from SYSIBM.SYSDUMMY1)
       union all
       (select 'b%' from SYSIBM.SYSDUMMY1)
       union all
       (select 'c%' from SYSIBM.SYSDUMMY1)
   ) search_list
   where abc.column1  like search_list.term; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-24T14:37:17.993

如果您真的想查找以 a、b 或 c 开头的字符串，您可以选择：

```
SELECT * 
FROM abc
WHERE LEFT(column1, 1) IN ('a', 'b', 'c') 
```

我认为你的情况实际上更复杂，但也许你可以根据你的需要调整这个片段......

# ruby-on-rails-3 - 在 Linode 上托管 Rails 应用程序

> ID：11838923
> 
> 赞同：6
> 
> 时间：2012-08-07T03:38:56.687
> 
> 标签：ruby-on-rails-3, nginx, passenger, linode

我计划在 Linode 上托管一个 Rails 应用程序，但我仍然不确定部署的要求和过程。我只获得 512 计划，因为我预计该网站的流量相对较小。

我的问题是，我是否需要获取诸如 Github 之类的存储库来存储我的代码？我也有点担心设置服务器和部署过程需要多长时间。我浏览了 Linode 库，但我并不完全清楚如何部署 Rails 应用程序。我打算使用 nginx 作为我的服务器和乘客进行部署。有谁知道我在哪里可以学习在 Linode 机器上部署 Rails 应用程序？一个带有详细解释的分步教程会很棒。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T04:03:18.797

我在 Linode 上部署了几个简单的应用程序，发现它们的文档非常好。特别是他们有针对特定环境量身定制的分步教程。例如，在我的情况下（像你一样）我想使用 nginx，并且我使用的是 Ubuntu 10.04，所以我遵循了这个指南：

[http://library.linode.com/frameworks/ruby-on-rails-nginx/ubuntu-10.04-lucid](http://library.linode.com/frameworks/ruby-on-rails-nginx/ubuntu-10.04-lucid)

如果这是您第一次在 VPS 上设置，肯定会遇到一些障碍，但我发现这种体验非常有益。

关于托管您的代码，您有多种选择，但请记住，这实际上是与部署您的应用程序不同的问题。您在 linode 上部署您的应用程序，但您不必在那里托管您的代码，尽管您当然可以。

一般而言，如果您对开放代码感到满意，那么 github 无疑是一个不错的选择。如果您想保持代码私有但仍然可以在线访问（而不仅仅是在一台计算机上），您可以利用您的 linode 机器并在那里托管您的代码。

如果您将有许多其他人为代码库做出贡献，您可能会考虑设置[gitosis](https://wiki.archlinux.org/index.php/Gitosis)或[gitolite](https://github.com/sitaramc/gitolite/)，这样可以很容易地做到这一点。或者，如果您将成为代码库的主要用户，您可以通过 HTTP 设置更简单的配置，此处解释：http: [//dev.bazingaweb.fr/2011/02/23/how-to-set-up-git -over-http.html](http://dev.bazingaweb.fr/2011/02/23/how-to-set-up-git-over-http.html)

Linode 还有关于设置远程 git 存储库的文档：[https ://library.linode.com/linux-tools/version-control/git](https://library.linode.com/linux-tools/version-control/git)

如果您在 gitosis 和 gitolite 之间进行选择，我会选择 gitolite，因为 gitosis 似乎已被放弃并且不再被积极维护。

在 linode 上部署的其他参考资料：

*   [http://infinite-sushi.com/2011/01/deploying-a-rails-app-to-a-linode-box/](http://infinite-sushi.com/2011/01/deploying-a-rails-app-to-a-linode-box/)
*   [http://blog.chris-spencer.co.uk/from-zero-to-git-deployment-on-linode](http://blog.chris-spencer.co.uk/from-zero-to-git-deployment-on-linode)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T03:41:45.047

Ryan Bates 有一个关于将 Rails 应用程序部署到... Linode 的精彩视频！今天是你的幸运日 :) 吃点爆米花，尽情享受吧：[http ://railscasts.com/episodes/335-deploying-to-a-vps](http://railscasts.com/episodes/335-deploying-to-a-vps)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T03:56:36.457

您不需要 GitHub 帐户即可在 Linode 上进行部署。部署过程发生在您的本地计算机和 Linode 服务器之间，通常通过 Capistrano gem 进行。

来自 Smashing Magazine 的这个教程非常好。[http://coding.smashingmagazine.com/2011/06/28/setup-a-ubuntu-vps-for-hosting-ruby-on-rails-applications-2/](http://coding.smashingmagazine.com/2011/06/28/setup-a-ubuntu-vps-for-hosting-ruby-on-rails-applications-2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T04:47:25.637

安装nginx/PostgreSQL/Postfix/Node.js/添加部署用户/rbenv的完美脚本

![在此处输入图像描述](../Images/b440a1f5b87f8a60c0593e555df034cf.png)

也参考这个链接[https://medrails.wordpress.com/?blogsub=confirming#subscribe-blog](https://medrails.wordpress.com/?blogsub=confirming#subscribe-blog)

谢谢

# java - Standards and Best practice: Exporting Tree Structure Data to CSV

> ID：11838926
> 
> 赞同：6
> 
> 时间：2012-08-07T03:39:19.517
> 
> 标签：java, csv, tree

I have a tree structural data(parent child) to export into CSV.

Is there any standard format to display the data in a meaningful way and maybe for future usage?

Currently I am considering using empty "", to denote the next level.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T05:16:51.907

好吧，这里没有标准，至少我不知道。它通常涉及性能方面、易用性和树的大小。

我可以让您将树存储为一对父子关系，然后您就可以重新创建树。

例子：

让我们假设，你有一棵树：

根

```
a

b

  c 
```

这可以表示为一系列关系：

根 --> 一个

根 --> b

```
b --> c 
```

这正是您可以存储在文件中的内容：

```
root,a
root,b
b,c 
```

考虑到树（至少二叉树）可以表示为[数组这一事实，可以使用另一种有趣的方法](http://webdocs.cs.ualberta.ca/~holte/T26/tree-as-array.html)

这将让您将单行存储在您的 csv 文件中，因为数组是线性的，并且它自然地映射到一个数组中我相信您可以找到更多存储树的方法，这里的天空是一个限制，我刚刚给你指了几个。

希望这可以帮助

# c++ - 如何在opencv c ++中找到最大的轮廓

> ID：11838942
> 
> 赞同：1
> 
> 时间：2012-08-07T03:42:19.080
> 
> 标签：c++, opencv, contour

我想提取图像中的主要对象。所以我对图像应用了抓取算法。从那我想在抓取算法产生的结果图像中取最大的轮廓。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:22:35.203

只需使用函数来查找所有具有价值的`findContours`轮廓。`GC_FGD`在此使用`contourArea`和简单迭代所有轮廓之后，找到具有最大正方形的轮廓。

# html - 为什么我的文字闪烁？

> ID：11838945
> 
> 赞同：0
> 
> 时间：2012-08-07T03:42:37.797
> 
> 标签：html, animation, css

我建立了这个网站[Pineapple tutorials](http://pineapple.io)，我希望它有一个固定的标题（黑条）。

目前还没有因为这个问题修复，但是你可以使用chrome inspector或者firebug来模仿，然后选择`.header`（黑条）

分配以下属性

```
position: fixed;
width: 100%;
z-index: 9999; 
```

现在，当它全部设置为固定时，慢慢滚动页面并观察文本，因为它在搜索框上滚动......它应该淡化为看起来很古怪的奇怪文本。

我不知道是不是因为

A）我在黑条上使用@font-face

B）我有一个 css3 动画徽标（鼠标悬停在徽标上）。我注意到这会导致一些奇怪的故障，因为它的动画（如果你看一下我网站的最右边的描述，你会看到文本在动画时略微脱落）

任何想法都会很棒，谢谢！

编辑：我在最新版本的 chrome beta 中注意到了这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:48:10.107

我没有闪烁。闪烁是您的浏览器、操作系统、GPU 和其他事物的功能。

我以前总是从位置固定的元素中得到闪烁，但在我的新浏览器中我没有。（我非常讨厌它们，我安装了一个扩展来让我摆脱我不想要的元素。）

您对此无能为力。只需尝试确定标题栏是否*真的*需要一直在那里。

在我看来，绝对不是！那里的信息不是你经常需要的。如果人们想要常见问题解答等，他们可以向上滚动。看起来不错，是的，但这不是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T03:49:19.720

I'm not able to reproduce the problem in Chrome Inspector. Is it possible it's a local machine issue? I've seen this before with specific video cards (and drivers), and when I try it on another machine, the problem doesn't exist.

# jquery - jquery-ui 隐藏 chrome 滚动条

> ID：11838946
> 
> 赞同：1
> 
> 时间：2012-08-07T03:42:40.280
> 
> 标签：jquery, jquery-ui, google-chrome, datepicker, scrollbar

我正在使用 jquery 日期选择器。从 Google Chrome 20 开始，垂直滚动条会隐藏在使用日期选择器的任何页面上。

我试过设置 body { overflow-y: scroll; 高度：100%；这样做会显示一个空的垂直滚动条（没有可拖动的内容），并且使用鼠标滚轮、按键等仍然无法滚动。

我很确定这是 jquery 与 Chrome 20+ 的冲突。

任何建议表示赞赏！

# c# - 扩展方法将第一个参数转换为子类型。这个好吗？

> ID：11838949
> 
> 赞同：1
> 
> 时间：2012-08-07T03:43:01.970
> 
> 标签：c#, casting, extension-methods, nbuilder

[在同样的情况下，我在这里](https://stackoverflow.com/questions/11823977/class-and-extension-method-container-class-in-same-namespace-what-is-the-benefi)有另一个问题。现在我有另一个查询。

在[NBuilder](http://nbuilder.org/)中，`FizzWare.NBuilder`命名空间包含接口`ISingleObjectBuilder`和类`SingleObjectBuilderExtension`，它是扩展方法的容器`ISingleObjectBuilder`。

现在，扩展方法具有通用语法：

```
public static ISingleObjectBuilder<T> ExMethod<T,[more types...]>(this ISingleObjectBuilder<T> objectBuilder, [more params])
{
    ((IObjectBuilder<T>)objectBuilder).ExMethod([more params]);
    return objectBuilder;
} 
```

所以你可以看到，虽然方法 accept `ISingleObjectBuilder`，但它期望参数是 an`IObjectBuilder`的子接口`ISingleObjectBuilder`。

现在考虑这个情景：

*   我已经实现了 MySingleObjectBuilder:ISingleObjectBuilder。
*   在我使用的客户端代码中，`FizzWare.NBuilder`我可以访问`MySingleObjectBuilder.ExMethod()`
*   当我这样做时，我显然得到了一个例外，因为`MySingleObjectBuilder`不是`IObjectBuilder`.

当然，如果扩展方法是 for 会更安全`IObjectBuilder`。现在的问题是，**不是更安全的选择也更好吗？**

# android - NFC 空标签读取问题

> ID：11838954
> 
> 赞同：3
> 
> 时间：2012-08-07T03:43:29.623
> 
> 标签：android, nfc, ndef

我目前正在参与一个需要使用 NFC 进行通信的项目。

当我尝试读取 NFC 标签时，它非常适用于 URI 和文本。

但是当我试图读取一个空的 NFC 标签时，它会显示一个默认的“空标签”消息，这在我的代码中没有定义。

*AndroidManifest.xml*：

```
<activity
  android:name=".ReadActivity"
  android:label="@string/app_name" >
  <intent-filter>
    <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
    <data android:mimeType="application/example.nfcdemo"/>   
    <category android:name="android.intent.category.DEFAULT"/>
  </intent-filter>  
  <intent-filter>
    <action android:name="android.nfc.action.TAG_DISCOVERED"/>
    <category android:name="android.intent.category.DEFAULT"/>
  </intent-filter> 
</activity> 
```

`onCreate()`方法：

```
if (intent.getType() != null && intent.getType().equals(MimeType.NFC_DEMO)) {
  Parcelable[] rawMsgs = getIntent().getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
  NdefMessage msg = (NdefMessage) rawMsgs[0];
  NdefRecord cardRecord = msg.getRecords()[0];
  String msg = new String(cardRecord.getPayload());
  displayMessage("Tag Written here : " +msg);
}
else {
  displayMessage("This is an empty tag");
} 
```

我想使用我自己的活动显示这样的自定义消息。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:43:09.950

您可能希望启用前台调度。这样，您的 Activity 可以接收所有 NFC 意图，包括来自空标签的意图。有关说明和示例，请参阅[http://developer.android.com/guide/topics/connectivity/nfc/advanced-nfc.html#foreground-dispatch](http://developer.android.com/guide/topics/connectivity/nfc/advanced-nfc.html#foreground-dispatch)。

# c++ - postgresql c-extension 加载另一个外部库

> ID：11838963
> 
> 赞同：0
> 
> 时间：2012-08-07T03:44:11.513
> 
> 标签：c++, c, postgresql, linker, phash

我需要将 pHashes (phash.org) 与汉明距离函数进行比较。

我尝试了 pg_similarity 中的那个，但它似乎不能正常工作。（相同的 pHash 的汉明距离不为 0）。

所以我想我只需要使用 c 扩展来使用`ph_hamming_distance`pHash 库中的函数。

我有什么：phash.c

```
#include <postgres.h>
#include <pHash.h>
#include <fmgr.h>
#include <utils/bytea.h>
#include <utils/datum.h>

#ifdef PG_MODULE_MAGIC
PG_MODULE_MAGIC;
#endif

PG_FUNCTION_INFO_V1(phash_hamming);
Datum phash_hamming(PG_FUNCTION_ARGS) {

    bytea *bytea1 = PG_GETARG_BYTEA_P(0);
    bytea *bytea2 = PG_GETARG_BYTEA_P(1);
    //FIXME - length of bytea1 & bytea2 must be 4 bytes (64bits)

    ulong64 long1 = *((ulong64*) bytea1);
    ulong64 long2 = *((ulong64*) bytea2);

    int32 ret = ph_hamming_distance(long1, long2);

    PG_RETURN_INT32(ret);
} 
```

生成文件

```
CXXFLAGS=-I/usr/include/postgresql/server
LDFLAGS=-Bstatic -lpHash
all: phash.o

phash.o:
    $(CXX) $(CXXFLAGS) -fpic -c phash.c
    $(CXX) $(LDFLAGS) -shared -o phash.so phash.o

install:
    cp phash.so `pg_config --pkglibdir`

clean:
    rm -f phash.o phash.so 
```

SQL

```
 CREATE FUNCTION phash_hamming (bytea1 bytea, bytea2 bytea) RETURNS int AS '$libdir/phash' LANGUAGE C; 
```

我得到的错误：

```
ERROR:  could not load library "/usr/lib/postgresql/phash.so": /usr/lib/postgresql/phash.so: undefined symbol: _Z16pg_detoast_datumP7varlena 
```

我一定不能以某种方式链接到 postgresql 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-20T20:28:36.017

这是一个老问题，但是...

1.  无需添加额外的包装文件并使用 gcc 进行编译。
2.  您需要 extern "C" PostgreSQL 标头和 PostgreSQL 宏。

    ```
    extern "C" {
      #include <postgres.h>
      #include <fmgr.h>
      #ifdef PG_MODULE_MAGIC
      PG_MODULE_MAGIC
      #endif
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T04:16:06.163

我仍然相信可能有更好的方法，但这就是我所做的。

（我将添加范围检查，而不是仅仅假设所有 bytea 都是 4 字节......最终，在生产中留下潜在的段错误会很糟糕，所以这只是一个玩具项目是一件好事）

phash.c - 纯 C 文件，用 gcc 编译

```
#include <postgres.h>
#include <fmgr.h>
#include <utils/bytea.h>
#include <utils/datum.h>

//typedef unsigned __int64 ulong64;
#if defined(_MSC_VER) || defined(__BORLANDC__)
typedef unsigned __int64 ulong64;
#else
typedef unsigned long long ulong64;
#endif

extern int32 c_ph_hamming_distance (ulong64 b1, ulong64 b2);

#ifdef PG_MODULE_MAGIC
PG_MODULE_MAGIC;
#endif

PG_FUNCTION_INFO_V1(phash_hamming);
Datum phash_hamming(PG_FUNCTION_ARGS) {

    bytea *bytea1 = PG_GETARG_BYTEA_P(0);
    bytea *bytea2 = PG_GETARG_BYTEA_P(1);
    //FIXME - length of bytea1 & bytea2 must be 4 bytes (64bits)

    ulong64 long1 = *((ulong64*) bytea1);
    ulong64 long2 = *((ulong64*) bytea2);

    int32 ret = c_ph_hamming_distance(long1, long2);

    PG_RETURN_INT32(ret);
} 
```

phash_wrapper.cpp - 使用 c 链接而不是 cpp 链接转换 ph_hamming_distance 的版本（使用 g++ 编译）

```
#include <pHash.h>
extern "C" {
    int c_ph_hamming_distance (ulong64 b1, ulong64 b2){
        return ph_hamming_distance(b1, b2);
    }
} 
```

生成文件

```
CFLAGS=-I/usr/include/postgresql/server
LDFLAGS=-lpHash
all: phash.so

phash_wrapper.o: phash_wrapper.cpp
    $(CXX) $(CXXFLAGS) -fpic -c phash_wrapper.cpp

phash.o: phash.c
    $(CC) $(CFLAGS) -fpic -c phash.c

phash.so: phash.o phash_wrapper.o
    $(CC) $(LDFLAGS) -shared -o phash.so phash.o phash_wrapper.o

install:
    cp phash.so `pg_config --pkglibdir`

clean:
    rm -f phash.o phash.so phash_wrapper.o 
```

SQL - 相同

```
CREATE FUNCTION phash_hamming (bytea1 bytea, bytea2 bytea) RETURNS int AS '$libdir/phash' LANGUAGE C; 
```

# c# - C# 下载一系列文件

> ID：11838965
> 
> 赞同：3
> 
> 时间：2012-08-07T03:45:17.003
> 
> 标签：c#

我知道关于如何使用 WebClient 下载文件，有人问过一些类似的问题。我可以很好地下载单个文件，但我想下载一系列文件。1-6000 个文件。我可以将它们很好地下载到我当前的目录中，但是我很难根据下载它们的位置将它们下载到不同的目录。我需要在下载它们之前临时更改当前工作目录吗？

稍微在同一主题上，我被困在如何在下载文件之前验证文件是否存在。我不想用空文件浪费带宽或磁盘空间。这是我目前所拥有的：

```
 for (int x = 1; x <= 6000; x++)
            {
                pbsscount = x.ToString();

                // Used for downloading file
                string directoryName = textBox1.Text.ToString().Replace(":", "_");
                if (!Directory.Exists(textBox1.Text))

                    Directory.CreateDirectory(directoryName.Substring(7));
                string wholePBSSurl = textBox1.Text + "/" + "pb" + pbsscount.PadLeft(6, '0') + ".png";

                // Used for saving file, file name in directory
                string partPBSSurl = "pb" + pbsscount.PadLeft(6, '0') + ".png";

                Uri uri2 = new Uri(wholePBSSurl);

                //if (fileExists(wholePBSSurl))
                //{

                    // Initialize downloading info, grab progressbar info
                    WebClient webClient = new WebClient();
                    webClient.DownloadFileCompleted += new AsyncCompletedEventHandler(Completed);
                    webClient.DownloadProgressChanged += new DownloadProgressChangedEventHandler(ProgressChanged);

                    // Save file to folder
                    //webClient.DownloadFileAsync(uri2, textBox1.Text + "/" + partPBSSurl);
                    webClient.DownloadFileAsync(uri2, partPBSSurl);
                //}
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T04:02:22.260

> 我需要在下载它们之前临时更改当前工作目录吗？

第二个参数可以是完整路径`@"C:\folder\file.png"`。如果您对当前目录的相对路径感到满意，只需将代码更改为`webClient.DownloadFileAsync(uri2, directoryName + partPBSSurl);`甚至更好地使用`System.Path.Combine(directoryName, partPBSSurl)`

当然，如果服务器支持，您可以知道大小。请参阅：[如何从 http 标头获取文件大小](https://stackoverflow.com/questions/122853/c-sharp-get-http-file-size)

> 我不想用空文件浪费带宽或磁盘空间。

我不会担心的。性能下降可以忽略不计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T03:55:54.020

无需更改当前目录。您已经在使用*DownloadFileAsync*的重载，它接受文件路径作为第二个参数。

只需确保*partPBSSurl*包含目标文件的完整路径，包括目录和文件名。

关于您的第二个问题，即如果文件不存在则避免浪费时间，碰巧我最近问了同样的问题：

[使用 WebClient 快速失败](https://stackoverflow.com/q/11121706/141172)

最后，我最近扩展了 WebClient 以提供更简单的进度更改事件并允许更改超时。我在这里提出了该代码：

[https://stackoverflow.com/a/9763976/141172](https://stackoverflow.com/a/9763976/141172)

# apache - httpd.conf 没有额外的 www 重定向 /

> ID：11838967
> 
> 赞同：0
> 
> 时间：2012-08-07T03:45:33.683
> 
> 标签：apache, httpd.conf

我去了[http://no-www.org/](http://no-www.org/)并复制了他们的代码以删除 www。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L] 
```

但是，发生的事情是在基本 url 的末尾有一个额外的斜杠。

示例：learntodancetango.com --> learntodancetango.com 好

www.learntodancetango.com --> learntodancetango.com// WEIRD

有什么建议吗？我可以提供其他任何东西来帮助诊断吗？如果重要的话，这是一个 Django 站点。

谢谢！，大卫

编辑：或者，如果 httpd conf 是正确的，那么也许 Django 出于某种原因这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:28:35.413

由于这是在服务器配置中，因此当重写规则尝试匹配它时，URI 中将有一个前导斜杠。这意味着 URI`/`在分组中匹配，`^(.*)$`结果目标是`http://learntodancetango.com/`+ $1，其中 $1 是`/`。所以 2 // 的。

您可以删除目标末尾的斜线或在分组之外添加斜线：

```
RewriteRule ^(.*)$ http://%1$1 [R=301,L] 
```

或者

```
RewriteRule ^/(.*)$ http://%1/$1 [R=301,L] 
```

# php - PHP：显示取决于输入的值

> ID：11838970
> 
> 赞同：0
> 
> 时间：2012-08-07T03:45:58.033
> 
> 标签：php

在我看来，我有以下选择菜单，其中说明了可用的表单类型：

```
<label for="add_fields_type">Type: </label>
<select name="add_fields_type" id="add_fields_type">
    <option value="input">Input</option>
    <option value="textarea">Text Area</option>
    <option value="radiobutton">Radio Button</option>
    <option value="checkbox">Check Box</option>
</select> 
```

在我的控制器中，我目前有以下内容，但我不确定如何制作，这样如果`$_REQUEST['add_fields_type']`可以`=`说`radiobutton`，那么它将显示相应的代码。

**控制器：**

```
if (isset($_REQUEST['add_fields_type'])) 
        {

            echo $_REQUEST['add_fields_type'];
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T04:06:13.870

```
if (isset($_REQUEST['add_fields_type'])) {

    if ($_REQUEST['add_fields_type'] == 'input') {

            // echo stuff for input
    }
    else if ($_REQUEST['add_fields_type'] == 'textarea') {

            // echo stuff for textarea
    }
    else if ($_REQUEST['add_fields_type'] == 'radiobutton') {

            // echo stuff for radiobutton
    }
    else if ($_REQUEST['add_fields_type'] == 'checkbox') {

            // echo stuff for checkbox
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T04:58:21.007

另一种方式，使用 swapnesh 提到的 switch 代码（比使用多个 if 语句更简洁，并且在遇到正确的情况时会停止）：

```
if (isset($_REQUEST['add_fields_type']))
{
    switch($_REQUEST['add_fields_type'])
    {
        case('input'):
            // echo stuff for input
            break;
        case('textarea'):
            // echo stuff for textarea
            break;
        case('radiobutton'):
            // echo stuff for radiobutton
            break;
        case('checkbox'):
            // echo stuff for checkbox
            break;
        default:
            // echo stuff if the other cases fall through
            break;
    }
} 
```

# android - 监听 HOME 按钮按下并重新启动活动

> ID：11838972
> 
> 赞同：0
> 
> 时间：2012-08-07T03:46:03.277
> 
> 标签：android, android-service, android-homebutton

我试图在服务运行时阻止 HOME 按钮 KeyPress

```
protected void onPause () {
   if (isMyServiceRunning())
   {
       Intent Act2Intent = new Intent(PhysicalTheftDialog.this, PhysicalTheftDialog.class);              
       startActivity(Act2Intent);
   }
   else {

   }
}

private boolean isMyServiceRunning() {
    ActivityManager manager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
        if ("nyp.android.project.MyService".equals(service.service.getClassName())) {
            return true;
        }
    }
    return false;
} 
```

但是每次当我按下我的主页按钮时，应用程序都会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T04:12:50.387

请看，出于安全原因，android 开发人员本身不允许我们使用主页按钮更改任何类型的行为。但即使你真的想禁用主页按钮，你也可以通过添加以下代码来做到这一点：

```
@Override
public void onAttachedToWindow() {
    this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
    super.onAttachedToWindow();
}

@Override    
public boolean onKeyDown(int keyCode, KeyEvent event) { 
    if(keyCode == KeyEvent.KEYCODE_HOME) {
        Log.i("Home Button","Clicked");
    }

    if(keyCode==KeyEvent.KEYCODE_BACK) {

        finish();
    }
    return false;
} 
```

# objective-c - iPad：弹出窗口调整大小 iOS

> ID：11838975
> 
> 赞同：0
> 
> 时间：2012-08-07T03:46:13.227
> 
> 标签：objective-c, ios

```
CGRect rect = CGRectMake(0, 0, 1050, 900);

[wineAdminPopup presentPopoverFromRect:rect inView:master.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

嗨，我把上面的代码放在 tableview 中做一个弹出窗口。但是它不会在整个屏幕中弹出。如果我想在 iPad 屏幕上居中，中间没有箭头或箭头。我该怎么做。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T05:27:04.720

`rect`参数 in指定锚定弹出框的`presentPopoverFromRect:...`矩形，而不是显示的弹出框的大小。这将通过`contentSizeForViewInPopover`在弹出框的内容视图控制器上进行设置来指定。

如果您不想要箭头并且不需要弹出框的特定行为，那么您可以模态显示您的视图控制器：

```
controller.modalPresentationStyle = UIModalPresentationFullScreen; // or UIModalPresentationFormSheet
[self.navigationController presentModalViewController:controller animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:00:38.103

`presentModalViewController`在 iOS 6 及更高版本中已弃用。使用`presentViewController:yourViewController animated:YES completion:nil`（参数`animated`和`completion`可根据您的要求设置）。此外，如果您想调整您的 ViewController 的大小，您需要更改`self.view.frame`，下次您的视图控制器将具有该大小。

# jquery - Jquery UI，Json 之后的可拖动/可删除追加克隆

> ID：11838977
> 
> 赞同：0
> 
> 时间：2012-08-07T03:46:30.743
> 
> 标签：jquery, json, jquery-ui, draggable, droppable

我一直在玩这行代码，试图让它正常运行但没有成功决定在这里发布，希望有人能提供帮助。

我的问题围绕着使用 DRAGGABLE / DROPPABLE 和 Json 的 JQUERY UI。这是我的代码：

```
$('.drag').draggable({
        helper: 'clone'
    });
    $(".drop").droppable({
        drop: function(e, ui) {
            var dataString = 'type='+ui.draggable.clone().find('.type').attr('id')+'&update=update';
            $.ajax({
                url: 'phphandler.php',
                type: 'POST',
                data: dataString,
                dataType: 'json',
                success: function(json) {
                    $(this).append(ui.draggable.clone().html(json.Data));
                },
                error: function() {
                    alert(ui.draggable.clone().html);
                }
            });
        }
}); 
```

我的 HTML 本质上是：

```
<div class="drag">Object</div>
<div class="drop"></div> 
```

几乎我要做的就是在成功后将克隆附加到删除或在成功后更改克隆的 html。

注意：我可以毫无问题地在 Ajax 请求之前追加，但成功后无法更改克隆的 HTML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T05:02:14.003

注意函数的范围

尝试

```
$.ajax({
                url: 'phphandler.php',
                type: 'POST',
                data: dataString,
                dataType: 'json',
                context: this,
                success: function(json) {
                    $(this).append(ui.draggable.clone().html(json.Data));
                },
                error: function() {
                    alert(ui.draggable.clone().html);
                }
            }); 
```

或者

```
var dataString = 'type='+ui.draggable.clone().find('.type').attr('id')+'&update=update';
           var tmp = $(this);
           $.ajax({
                url: 'phphandler.php',
                type: 'POST',
                data: dataString,
                dataType: 'json',
                success: function(json) {
                    tmp.append(ui.draggable.clone().html(json.Data));
                },
                error: function() {
                    alert(ui.draggable.clone().html);
                }
            }); 
```

# post - CURL 中的 POST 参数

> ID：11838978
> 
> 赞同：1
> 
> 时间：2012-08-07T03:46:51.167
> 
> 标签：post, curl, asp.net-web-api

我正在尝试使用 CURL 将简单的 POST 参数（一个 int）发送到 ASP.NET Web api 控制器 POST 方法，如下所示：

```
curl -d "id=1" --ntlm --user <user>:<pass> http://dev.test.local/api/test 
```

这是将数据附加到 POST for Curl 的正确方法吗？我可以很好地联系 URL，但似乎没有传递参数“id”，因为我收到了从服务器返回的以下错误：

```
"The parameters dictionary contains a null entry for parameter 'id' of non-nulla
ble type 'System.Int32' for method 'System.String Post(Int32)' in 'Test.Si
te.Controllers.TestController'. An optional parameter must be a reference type,
a nullable type, or be declared as an optional parameter." 
```

我在 OrderController 中的 POST 方法如下：

```
 // POST api/test
    public string Post(int id)
    {
        return "Post successful";
    } 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T07:18:09.310

问题是，诸如 , 等简单类型`int`不能`string`与消息正文中的数据进行模型绑定，除非您明确告知如下：

```
public string Post([FromBody]int id)
{
    return "Post successful";
} 
```

另一种解决方案是您可以从`RouteData`或查询字符串中询问这些类型的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T08:12:57.047

就我个人而言，我会使用一个简单的 DTO 并通过 JSON 调用。

路线：

```
 routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}",
            defaults: new {   }
        ); 
```

控制器和 DTO：

```
[DataContract]
public class valueDto
{
    [DataMember]
    public int id { get; set; }
}

public class TestController : ApiController
{
    // POST api/values
    public string Post(valueDto value)
    {
        return string.Format("Post successful {0}", value.id);
    }
} 
```

用 curl 调用：

```
curl -d "{ "id": 1 }" --ntlm --user <user>:<pass> http://dev.test.local/api/test -H "Content-Type:application/json" 
```

*但*

只是从 tugberk 的回答中稍作跟进，并[在此处引用另一个](https://stackoverflow.com/questions/11515319/asp-net-web-api-post-frombody-not-binding-string-parameter)[答案](http://forums.asp.net/t/1812226.aspx/1)。

当您使用 FromBody 属性时，您还需要将“Content-Type”作为 Content-Type：application/x-www-form-urlencoded 发送。您还需要更改没有“id=1”的呼叫，而是使用“=1”，例如

```
curl -d "=1" --ntlm --user <user>:<pass> http://dev.test.local/api/test -H "Content-Type:application/x-www-form-urlencoded" 
```

# php - 验证程序流程

> ID：11838981
> 
> 赞同：0
> 
> 时间：2012-08-07T03:47:12.510
> 
> 标签：php, validation, flow

写作时`'validation code'`，最好的方法是什么？像这样：

```
if(!condition1) {
  print('error');
  return false;
}

if(!condition2) {
  print('error');
  return false;
}

do_something();
return true; 
```

或者像这样：

```
if(condition1) {
  do_something();

  if(condition2) {
    return true;
  } else {
    print('error');
    return false;
} else {
    print('error');
    return false;
} 
```

第一种方法对我来说似乎更干净，但我不确定是否有任何`advantage`/`disadvantage`使用一种方法而不是另一种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T04:01:46.770

您的第二个函数与第一个函数不同，因为`do_something()`即使 condition2 为假，它也会运行。

无论如何，我更喜欢结合我的条件，两个例子：

```
if(!condition1 || !condition2) {
  print('error');
  return false;
} else {
  do_something();
  return true;
} 
```

假设您想要不同的错误消息：

```
if(!condition1) {
  print('error1');
  return false;
} elseif(!condition2) {
  print('error2');
  return false;
} else {
  do_something();
  return true;
} 
```

我加入了他们的`if/elseif`链条。它使您的意图清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T04:03:54.120

这会更干净

```
$str="";
if(!$condition1){
  $str .="- Error! condition 1 is required.<br>";
}

if(!$condition2){
  $str .="- Error! condition 2 is required.<br>";
}

if(trim($str)!=""){
 print("Error occurred -<br>".$str);
 return false;
}else{
 return true;
} 
```

希望这可以帮助

# c - 类似于“typedef int arrChoice[5];” 全局变量？

> ID：11838984
> 
> 赞同：0
> 
> 时间：2012-08-07T03:47:29.847
> 
> 标签：c, arrays, variables, global

```
#include <stdio.h>
#include <conio.h>
typedef arrChoice[10] /*is this a global variable?*/
int main() {};

  getch();
  return 0;
} 
```

它还没有完成，但这就是我的意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:53:00.857

typedef 不是全局变量，它只是另一种类型的别名。当我传递它们时，我通常将它们用作函数指针，因为每次都将它们写出来很烦人。

`typedef int (*function)(int, int);`

我还使用它们将结构、联合或枚举定义为类型

```
typedef struct {
    int x;
    int y;
    int z;
} Point; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T03:52:53.960

typedef 声明新类型不是变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T05:14:37.477

这可能会帮助你。在您在此处发布的代码中，有一个错误。侧主函数中没有语句。getch 和 return 语句应该在 main 函数中。我觉得你的代码应该是这样的。

```
#include <stdio.h>
typedef int  arrChoice; /* arrChoice is alias to int */
arrChoice a[10] ;/* array a is a global variable of integers*/
int main()
{
 getch();
 return 0;
} 
```

请注意，typedef 的目的是为现有类型（int、float、double 等）分配替代名称。以下陈述类似。

```
typedef arrChoice[10]  is similar to typedef int[10]; 
```

当您尝试引用 arrChoice 时，您会收到一条错误消息

```
expected expression before 'arrChoice'. 
```

# windows - 是否可以在 Windows 中捕获内存分页请求？

> ID：11838985
> 
> 赞同：0
> 
> 时间：2012-08-07T03:47:44.723
> 
> 标签：windows, memory-management

有什么方法可以连接到 Windows 内存管理器以捕获分页事件 - 以便从自定义源/位置加载页面？

从我在网上找到的链接来看，这似乎在 Windows 中是不可能做到稳健或正确的。一个图书馆，例如 EasyHook 或类似的 - 是解决这个问题的最佳方式吗？

# javascript - Javascript：将函数指针放入对象中？

> ID：11838988
> 
> 赞同：3
> 
> 时间：2012-08-07T03:48:44.823
> 
> 标签：javascript, node.js, pointers, scope, function-pointers

环顾四周后，我找不到这个问题的答案，尽管我怀疑以前有人问过这个问题。我能找到的最接近的是[对象中的这个函数指针，](https://stackoverflow.com/questions/9080584/function-pointers-in-objects)尽管它并没有得到我想要的。

假设我们有这样一段代码：

```
var foo = function () { /* some code */ }; 
```

现在，我假设在评估期间名称 foo 在其环境中绑定到函数的内部表示，然后在应用程序期间查找。

现在假设我们在程序的稍后部分有一个对象：

```
var obj = {};
obj.func = foo; 
```

此时，环境中应该有同一个函数对象的两个副本，一个绑定到 foo，另一个绑定到 obj.func。但是假设我不想要该函数的两个副本，而是让 obj.func 指向 foo——有没有办法做到这一点？这就是我想出的：

```
var obj = {};
obj.func = function () { foo(); }; 
```

这行得通吗？有没有更好的办法？

非常感谢

**编辑澄清**

抱歉——我认为我说得不够清楚。我希望这有帮助。

我不确定 Javascript 评估过程是如何工作的，但假设它跟踪一些内部表示的环境，我们将在这里抽象地表示为一组键值对。

现在，当评估者看到一些代码时，例如

```
var foo = function () { /* some code  */ }; 
```

它在它的环境中构造它：['foo' : [function object]]。然后，稍后，当它看到这样的东西时：

```
var bar = foo; 
```

它在环境中查找 foo 以检索它的值，一个函数对象，然后像这样扩充环境。['foo'：[函数对象]，'bar'：[函数对象]]。现在，相同的功能在环境中确实存在两次。这是javascript设置环境的方式吗？如果没有，那么它是如何做到的？

我问的动机如下。假设我们定义了一些函数，然后我们导出一个对象作为这些函数的接口，并且我们知道我们将要实例化很多次。如果对象包含指向函数的指针，而不是函数本身，则效率会更高。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T03:58:59.263

JS变量、对象属性等不直接持有对象；它们持有对对象的*引用。*当你说`var foo = function() { };`,`foo`被分配一个对你刚刚定义的函数的引用。（顺便说一下，不是指针。区别可能很微妙，但很重要。JS 没有用户可见的指针，所以这不是什么大问题。但是这样做的语言使用它们的方式不同。不要让自己以后必须忘掉东西。）

稍后在程序中，当您说 时`obj.func = foo;`，您将*引用*复制到`obj.func`. 不是函数——仍然**只有一个函数对象**，有两个对它的引用。

所以`obj.func = foo;`已经做到了你所说的。当您调用 时`obj.func()`，它实际上调用的是由 . 引用的完全相同的函数`foo`。但是，有一个巨大的区别，这可能是给您带来麻烦的原因： `obj.func`是“方法调用”，而 JS 设置`this`为`obj`函数内部。如果`foo`用于`this`任何东西，假设它是其他对象，它会感到失望。

如果这是一个问题，你可能会做类似的事情

```
var that = this;
var foo = function() { /* use `that` instead of `this` here */ }; 
```

然后，无论你调用函数为`foo`or `obj.func`，它都不受更改的影响`this`。

如果这没有帮助，您需要澄清问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T03:57:59.213

您是否尝试过运行您的示例？

是的，这确实有效，但是请注意，如果您更改`foo`变量，它也会更改`objc.func()`. 我不知道有其他方法可以做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T03:58:27.923

这不是真的：

> 此时，环境中应该有同一个函数对象的两个副本，一个绑定到 foo，另一个绑定到 obj.func。但是假设我不想要该函数的两个副本，而是让 obj.func 指向 foo

如果你以这种方式分配东西，那么 obj.func 和 foo 指向同一个东西。我什至认为不可能复制一个函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T07:09:16.567

稍微详细说明一下：

函数是 javascript 中的一等公民或对象。它们的使用与任何其他对象一样。

```
var foo = func() {
//some code
}; 
```

类似于

```
var foo = {
//some code
}; 
```

在 Javascript 中，所有对象都是通过引用传递的。据我所知，javascript对象没有指针或按值传递的概念。

因此，当您将两个引用分配给同一个函数时，不会复制该函数对象。但是，对于两个引用，函数的内部状态保持不变。在你的情况下 foo 和 obj.func()

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-07T03:58:09.617

> 此时，环境中应该有同一个函数对象的两个副本，一个绑定到 foo，另一个绑定到 obj.func。

你这么认为？只是出于好奇，如果代码说：

```
var obj = {};
obj.func = 5; 
```

有多少副本在`5`四处飘荡？

不会。所有代码都被转换为函数，这些函数本质上是常量。您可以毫无困难地将多个变量分配给同一个常量。

至于“绑定”，绑定发生在函数被*调用*的时候。也就是`this`参数设置为`obj`，嗖嗖嗖……

# xcode - xcrun gcc 找不到头文件

> ID：11838993
> 
> 赞同：3
> 
> 时间：2012-08-07T03:49:23.180
> 
> 标签：xcode, gcc, header-files, osx-mountain-lion, xcrun

我想在 OSX 山狮中编译 ac 文件。在 Xcode 4.4 中，Preferences -> Downloads 我可以安装命令行工具来做到这一点。但是在该窗格上，它建议我可以使用 xcrun 代替：

> 在安装之前，请注意，您可以在终端中使用 XCRUN 工具来启动编译器和嵌入在 Xcode 应用程序中的其他工具。使用 XCODE-SELECT 工具定义激活的 Xcode 版本。在终端中键入“man xcrun”以了解更多信息。

我很乐意这样做，但我无法让它找到 stdio.h。

```
$ xcrun gcc hello.c
hello.c:1:19: error: stdio.h: No such file or directory 
```

通过 App Store 标准安装 Xcode 后，我的系统上肯定有这个文件：/Applications/Xcode.app/Contents/Developer//Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include /stdio.h

我尝试指定 SDK，但得到了同样的错误：

```
$ xcrun -sdk /Applications/Xcode.app/Contents/Developer//Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk gcc hello.c 
```

一些谷歌搜索让我尝试在上述命令之前运行 xcode-select，但没有运气。无论如何，我只安装了一个版本的 Xcode。

```
$ sudo xcode-select -switch /Applications/Xcode.app 
```

***我怎样才能找到标题？***

最终我放弃并安装了命令行工具，但如果知道如何使用内置的 Xcode 工具来做这件事会很好。

注意：这是我试图编译的文件：

```
#include <stdio.h>

int main() {
    printf("hello world!\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T08:45:18.327

您必须为编译器指定非标准的 sysroot。

使用 clang/llvm （这是新标准）可以解决问题：

```
xcrun clang --sysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/ -o hello hello.c 
```

如果您想坚持使用 gcc，只需将“clang”替换为“gcc”即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T06:18:16.087

可能对此没有任何直接帮助，但是您可以为常用的 xcrun 命令设置别名，以便在其他进程调用 gcc、make、gdb、git 等时使用 Xcode 版本：

```
 alias gcc='xcrun gcc' 
```

如果愿意，您可以将别名放入 .bashrc 文件中，以便它持续存在，并根据需要从 .bash_profile 中获取。

所有这些的好处是您不需要安装 Xcode 命令行工具，还可以避免使用包管理器，节省空间，降低复杂性并利用 Xcode 自动为您更新这些工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-09T07:45:40.110

使用 xcrun --sysroot 对使用 10.8 的我不起作用。查看 clang 文档，我发现 -isysroot 是在这种情况下使用的选项。

使用：

```
xcrun gcc -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk 
```

或者：

```
xcrun clang -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk 
```

对我来说，创建以下别名很有用：

```
alias xcrungcc='xcrun gcc -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk'
alias xcrunclang='xcrun clang -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk' 
```

# linux - 如何遍历具有 500GB 数据的 ext3 类型磁盘

> ID：11838995
> 
> 赞同：0
> 
> 时间：2012-08-07T03:49:47.207
> 
> 标签：linux, find, ext3

磁盘上有大约 1000 万个文件（不在同一目录下）。

我想获取所有文件的 [(file_name, file_size, file_atime)]。但是命令

查找 /data -type f -printf "%p\t%A@\t%s\n"

速度非常慢，导致 IO %util ~100%。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:55:33.133

你能做的不多。

检查您是否使用目录索引 ( `dir_index`)。

如果你很绝望，你可以使用`debug2fs`和读取原始数据，但我不推荐它。

您也可以购买 SSD - 缓慢可能是由于寻求，如果您经常使用 SSD 会加快速度。

# vb.net - Webview 给出的列不存在错误

> ID：11838997
> 
> 赞同：0
> 
> 时间：2012-08-07T03:50:38.500
> 
> 标签：vb.net, asp.net-mvc-3, webgrid

我在用

*   MVC 3
*   VB.NET 和
*   剃刀视图引擎。

我`WebGrid`在我的应用程序中玩弄，它告诉我“failEmList”不存在。

下面是调用函数、视图以及从中获取数据的模型部分的代码。

FailEmailSends 只是一个列表（字符串），并且具有包含单个电子邮件地址条目的行。

```
 Dim vm As New MassEmailVM
  For Each _fail In failEmailSends
      vm.failEmList.Add(_fail)
  Next
  ViewBag.succCount = succCount.ToString
  ViewBag.failECount = failEmailCount.ToString
  Return View(vm) 
```

视图如下：

```
@Modeltype xxxxxxxxxxxxx
@Code
ViewData("Title") = "Mass Emails Sent"

End Code

<table>
<tr><th>Total Sent</th><td>@ViewBag.succCount</td></tr>
<tr><th>Total Fail</th><td>@ViewBag.failECount</td></tr>
<tr><th>Fail Email Addresses</th></tr>
</table>

@code
Dim grid = New WebGrid(Model.failEmList)

End Code

<div id="grid">
@grid.GetHtml(
tableStyle:="grid",
headerStyle:="head",
alternatingRowStyle:="alt",
columns:=grid.Columns(
    grid.Column("failEmList", "Email List")
    ))
</div> 
```

视图模型的相关部分：

```
Private _failEmList As New List(Of String)
Public Property failEmList() As List(Of String)
    Get
        Return _failEmList
    End Get
    Set(ByVal value As List(Of String))
        _failEmList = value
    End Set
End Property 
```

任何想法为什么会引发以下错误：

```
 System.InvalidOperationException was unhandled by user code
  Message=Column "failEmList" does not exist.
  Source=System.Web.Helpers
  StackTrace:
   at System.Web.Helpers.WebGridRow.get_Item(String name)
   at System.Web.Helpers.WebGrid.GetTableBodyHtml(IEnumerable`1 columns, String rowStyle, String alternatingRowStyle, String selectedRowStyle)
   at System.Web.Helpers.WebGrid.Table(String tableStyle, String headerStyle, String footerStyle, String rowStyle, String alternatingRowStyle, String selectedRowStyle, String caption, Boolean displayHeader, Boolean fillEmptyRows, String emptyRowCellValue, IEnumerable`1 columns, IEnumerable`1 exclusions, Func`2 footer, Object htmlAttributes)
   at System.Web.Helpers.WebGrid.GetHtml(String tableStyle, String headerStyle, String footerStyle, String rowStyle, String alternatingRowStyle, String selectedRowStyle, String caption, Boolean displayHeader, Boolean fillEmptyRows, String emptyRowCellValue, IEnumerable`1 columns, IEnumerable`1 exclusions, WebGridPagerModes mode, String firstText, String previousText, String nextText, String lastText, Int32 numericLinksCount, Object htmlAttributes)
   at ASP._Page_Views_Admin_MassEmailsSent_vbhtml.Execute() in C:\Users\Skindeep\Documents\Visual Studio 2010\Projects\xxxxxxxxxx\Views\Admin\MassEmailsSent.vbhtml:line 21
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   at System.Web.WebPages.StartPage.RunPage()
   at System.Web.WebPages.StartPage.ExecutePageHierarchy()
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   at System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance)
   at System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer)
   at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   InnerException: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T05:37:36.367

您可以尝试以下方法：

```
@Code
    Dim grid = New WebGrid(Model.failEmList)
End Code

<div id="grid">
    @grid.GetHtml(
        tableStyle:= "grid",
        headerStyle:= "head",
        alternatingRowStyle:= "alt",
        columns:= grid.Columns(
            grid.Column(format:= Function(item) item, header:= "Email List")
        )
    )
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T05:26:26.957

试试这个

```
@grid.GetHtml(
 columns: new[] {
    grid.Column(format: (item) => item)
}
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-22T19:59:31.627

如果它对某人有帮助，就我而言，我犯了复制/粘贴错误，并且在声明网格时忘记更改源！一旦我用上面的建议更正了第一列，第二列就抛出了同样的错误。

```
Dim grid = New WebGrid(Model.WasTheWrongNameHere) 
```

# ruby-on-rails - Ember SelectView 仅在 Ember-rails 中不显示正确的内容绑定

> ID：11838998
> 
> 赞同：0
> 
> 时间：2012-08-07T03:50:44.413
> 
> 标签：ruby-on-rails, ember.js, jquery-chosen

[我为在这个](http://jsfiddle.net/camdub/Xu6UY/)小提琴中运行良好的 Chosen 插件制作了一个小的 mixin 。

当我在我的 ember-rails 应用程序中使用它时，选择的框会出现，但没有选项。我认为这与我使用 ArrayController.extend vs Object.create （在小提琴中）有关，但我不知道为什么。当我将扩展更改为在 rails 中创建时，它会尝试创建两次控制器并给出错误。

Ember 变化如此之快，我是否错过了从 fiddle 版本到 ember-rails 版本的某些内容？

（[https://github.com/camdub/watchd](https://github.com/camdub/watchd)资产下的 ember-rails 源代码）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:34:30.023

查看您的代码，您似乎正在使用路由。好的。你明白了，当使用路由时，框架会为你实例化控制器，每个 xxxView 都有它的 xxxController 实例，可以通过`controller`属性访问。

在 repos.handlebars 中，尝试直接使用 `controller'。

```
<div class="container top-section">
  {{view Watchd.ChosenSelect
    contentBinding="controller.content"
    valueBinding="controller.selected"
  }}
</div> 
```

# wordpress - 验证自定义字段

> ID：11838999
> 
> 赞同：0
> 
> 时间：2012-08-07T03:50:47.063
> 
> 标签：wordpress

如何在不使用 Javascript 的情况下验证 WordPress 自定义字段。我想使用 PHP 验证它们并在错误时停止创建帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T02:58:30.657

您可以使用 hook 来做到这一点[**`save_post`**](http://codex.wordpress.org/Plugin_API/Action_Reference/save_post)。WordPress Answers 中有很多示例，请查看[`+save_post +update_post_meta is:answer`](https://wordpress.stackexchange.com/search?tab=votes&q=%2bsave_post%20%2bupdate_post_meta%20is%3aanswer).

如果它不验证，使用[**`wp_die()`**](http://codex.wordpress.org/Function_Reference/wp_die)和帖子将不会被保存。