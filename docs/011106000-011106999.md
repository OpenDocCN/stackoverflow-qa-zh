# StackOverflow 问答 11106000-11106999

# python - Python多进程调试

> ID：11106000
> 
> 赞同：9
> 
> 时间：2012-06-19T17:14:54.580
> 
> 标签：python, debugging, multiprocessing, pycharm, winpdb

我正在尝试调试一个简单的 python 应用程序，但到目前为止还没有运气。

```
import multiprocessing

def worker(num):
    for a in range(0, 10):
        print a

if __name__ == '__main__':
    for i in range(5):
        p = multiprocessing.Process(target=worker, args=(i,))
        p.start() 
```

我想在for循环中设置一个断点来跟踪'a'的值，但我尝试过的工具都不能做到这一点。到目前为止，我尝试使用以下方法进行调试：

*   PyCharm 并收到以下错误：ImportError: No module named pydevd - [http://youtrack.jetbrains.com/issue/PY-6649](http://youtrack.jetbrains.com/issue/PY-6649)看起来他们仍在努力解决这个问题，据我所知，没有 ETA这个
*   我还尝试使用 Winpdb 进行调试 - [http://winpdb.org](http://winpdb.org)但它根本不会进入我的“worker”方法而只是打印“a”的值

我真的很感激这方面的任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2020-07-24T08:50:32.293

我发现当我要设置断点时`multiprocessing.Process()`替换它非常有用。`threading.Thread()`两个类都有相似的论点，所以在大多数情况下它们是可以互换的。

通常我的脚本会使用`Process()`，直到我指定命令行参数`--debug`，该参数有效地将这些调用替换为`Thread()`. 这允许我使用`pdb`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T17:24:07.873

在尝试调试 Python 代码时，我很少需要使用传统的调试器，而是更喜欢随意地在我的代码中添加跟踪语句。我会将您的代码更改为以下内容：

```
import multiprocessing
import logging

def worker(num):
    for a in range(0, 10):
        logging.debug("(%d, %d)" % (num, a))

if __name__ == '__main__':
    logging.basicConfig(level=logging.DEBUG)
    for i in range(5):
        p = multiprocessing.Process(target=worker, args=(i,))
        logging.info("Starting process %d" % i)
        p.start() 
```

在生产中，您可以通过将跟踪级别设置为 logging.WARNING 来禁用调试跟踪语句，这样您就只记录警告和错误。

Python 官方网站上有一个很好的[基础](http://docs.python.org/howto/logging.html#logging-basic-tutorial)和[高级日志教程。](http://docs.python.org/howto/logging.html#logging-advanced-tutorial)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T15:03:15.150

我将所有内容复制`/Applications/PyCharm\ 2.6\ EAP.app/helpers/pydev/*.py`到`site-packages`我的 virtualenv 中，它对我有用（我正在调试 celery/kombu，断点按预期工作）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-16T20:11:16.733

如果常规 pdb/ipdb 可以与多处理一起使用，那就太好了。如果我能摆脱它，如果配置的进程数为 1，我会串行处理对多处理的调用。

```
if processes == 1:
    for record in data:
        worker_function(data)
else:
    pool.map(worker_function, data) 
```

然后在调试时，将应用程序配置为仅使用单个进程。这并不涵盖所有情况，尤其是在处理并发问题时，但它可能会有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-24T18:28:36.713

您应该可以使用 remote-pdb 来做到这一点。

```
from multiprocessing import Pool

def test(thing):
  from remote_pdb import set_trace
  set_trace()
  s = thing*2
  print(s)
  return s

if __name__ == '__main__':
  with Pool(5) as p:
    print(p.map(test,['dog','cat','bird'])) 
```

然后只需 telnet 到日志中列出的端口。

例子：

```
RemotePdb session open at 127.0.0.1:54273, waiting for connection ... 
```

```
telnet 127.0.0.1 54273
<telnet junk>
-> s = thing*2
(Pdb) 
```

或者

```
nc -tC 127.0.0.1 54273

-> s = thing * 2
(Pdb) 
```

此时您应该能够调试该过程。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-02-02T02:27:39.637

[WingIDE Pro 开箱即用地](https://wingware.com/)提供了此功能。

不需要额外的代码（例如，使用`traceback`模块）。您只需运行您的程序，Wing 调试器不仅会`stdout`从子进程打印，而且会中断子进程中的错误并**立即创建一个交互式 shell，以便您可以调试有问题的线程**。没有比这更容易的了，而且我知道没有其他 IDE 以这种方式公开子进程。

是的，它是一种商业产品。但是我还没有找到任何其他提供调试器来匹配的 IDE。PyCharm Professional、Visual Studio Community、Komodo IDE——我都试过了。在我看来，WingIDE 在解析源文档方面也处于领先地位。而 Eye Ease Green 配色方案是我现在离不开的东西。

（是的，我意识到这个问题已有 5 年以上的历史了。无论如何我都会回答它。）

# objective-c - 关于 ARC for iOS 的几个问题？

> ID：11106003
> 
> 赞同：1
> 
> 时间：2012-06-19T17:15:03.733
> 
> 标签：objective-c, ios, automatic-ref-counting

我对 ARC for iOS 还很陌生（对 iOS 也很陌生），我有几个关于 ARC 的快速问题。

~ 在视图控制器中，如果我的 viewDidUnload() 方法中没有将我的属性设置为 nil 的语句，当我的视图控制器被释放时，属性的内存是否仍会被释放？如果是这样，为什么我需要明确地拥有这个 viewDidUnload 方法？

~ 在不是视图控制器的对象中，我应该在哪里将属性设置为 nil？在dealloc中？诸如`@property BOOL isActive;`...之类的原始属性怎么样？我需要将它们设置为零/零吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T17:19:30.317

1.  只要它们是弱引用，您就不需要将属性设置为 nil。IBOutlets 通常应该是弱引用，因为它们视图控制器包含对视图的强引用，而视图又包含对其所有子视图的强引用。（如果您有不属于该视图层次结构的 IBOutlets，它们应该很强大。）
2.  你不应该需要零或零任何东西，对象或标量。Xcode 在使用 Interface Builder 时会插入 nilling 语句，但这仍然是为 pre-ARC Objective-C 生成代码。

你可能甚至不需要`viewDidUnload`; 它只在特殊情况下调用，当内存压力较低时。因此，您不能依赖它进行清理。您的 IBOutlets 应该很弱，因此当视图从视图控制器中清除时它们会被自动清理（如果重新加载视图，它们将被恢复）。

我在这里假设您正在编写一个新产品，这意味着您只针对 iOS 5 或更高版本。如果您在新产品中以 iOS 4 为目标，那么您真的[不应该这样](http://tewha.net/2012/06/dont-write-new-apps-that-target-ios-4/)做。世界已经在发展，iOS 5 或更高版本占据了 80% 的市场份额。这就是今天。展望未来，对于更小比例的人来说，避免使用 iOS 5 功能将变得更加困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:32:43.760

@properties 的内存管理在 ARC 下自动处理。当您将自己设置为委托时，通常在离开之前将委托设置为 nil（例如在 viewWillDisapear 中），以便将来对委托的调用不会引用垃圾。请继续关注即将发布的 WWDC 视频以获取最新指导。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T17:20:21.247

在 viewDidUnload 中，您需要将 outlet 引用设置为 nil，因为 ARC 会释放它们，并且您不想在发生这种情况后意外使用它们。

您不必对属性做任何事情，它们将被自动处理。事实上，你通常甚至没有使用 ARC 的 dealloc 方法。

# lotus-notes - 通过脚本库创建文档

> ID：11106004
> 
> 赞同：0
> 
> 时间：2012-06-19T17:15:05.730
> 
> 标签：lotus-notes, xpages

当通过按钮保存表单时，我还想使用“MSG”表单创建一个新文档，其中包含消息标题、正文和收件人的字段。起初我认为可能只使用 JS 库，但现在我不确定。打开一个绑定到该文档表单的未渲染 XPage 并将值继承到其中会怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:10:08.550

我希望我能正确理解您的问题：尝试在 XPage 的数据源（例如 document1）postSave 事件中插入这样的代码：

```
var doc:NotesDocument=database.createDocument();
doc.replaceItemValue("Form","msg");
doc.replaceItemValue("title",document1.getItemValueString("title"));
...
doc.save(true); 
```

# javascript - 如何在茉莉花中伪造地理定位器的回电

> ID：11106008
> 
> 赞同：13
> 
> 时间：2012-06-19T17:15:07.887
> 
> 标签：javascript, unit-testing, geolocation, jasmine

我有一个调用地理定位器的函数，但我不知道如何测试这个函数。我尝试监视地理定位器并返回假数据，但没有成功，原始功能仍在使用，所以我不得不等待，我不能使用模拟数据。

```
// this doesn't work        
var navigator_spy = spyOn( navigator.geolocation, 'getCurrentPosition' ).andReturn( {
    coords : {
        latitude : 63,
        longitude : 143
    }
} ); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-06T20:01:12.040

当您调用地理位置代码时，它看起来像这样：

```
 navigator.geolocation.getCurrentPosition(onSuccess, onError); 
```

这意味着您正在调用它并传递它的功能：

```
 function onSuccess(position) {
      // do something with the coordinates returned
      var myLat = position.coords.latitude;
      var myLon = position.coords.longitude;
  }

  function onError(error) {
      // do something when an error occurs
  } 
```

因此，如果您想使用 jasmine 返回值来监视它，您需要使用原始调用的第一个参数调用成功函数，如下所示：

```
 spyOn(navigator.geolocation,"getCurrentPosition").andCallFake(function() {
         var position = { coords: { latitude: 32, longitude: -96 } };
         arguments[0](position);
  }); 
```

如果你想让它看起来像返回了一个错误，你会想使用原始调用的第二个参数来调用错误函数，如下所示：

```
 spyOn(navigator.geolocation,"getCurrentPosition").andCallFake(function() {
         arguments[1](error);
  }); 
```

**编辑**以显示完整示例：

这是您使用 Jasmine 测试的功能：

```
 function GetZipcodeFromGeolocation(onSuccess, onError) {
        navigator.geolocation.getCurrentPosition(function(position) {
              // do something with the position info like call
              // an web service with an ajax call to get data
              var zipcode = CallWebServiceWithPosition(position);
              onSuccess(zipcode);
        }, function(error) {
              onError(error);
        });
  } 
```

这将在您的规范文件中：

```
 describe("Get Zipcode From Geolocation", function() {
        it("should execute the onSuccess function with valid data", function() {
              var jasmineSuccess = jasmine.createSpy();
              var jasmineError = jasmine.createSpy();

              spyOn(navigator.geolocation,"getCurrentPosition").andCallFake(function() {
                     var position = { coords: { latitude: 32.8569, longitude: -96.9628 } };
                     arguments[0](position);
              });

              GetZipcodeFromGeolocation(jasmineSuccess, jasmineError);

              waitsFor(jasmineSuccess.callCount > 0);

              runs(function() {
                    expect(jasmineSuccess).wasCalledWith('75038');
              });
        });
  }); 
```

此时，当您运行规范时，它会告诉您，如果您的 Web 服务正常工作，您的 Web 服务会根据您提供的纬度和经度为您提供正确的邮政编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:18:31.263

等等，也许你必须在你的`beforeEach`块中创建间谍，因为 Jasmine 在每个测试用例之后会自动恢复间谍。如果你做了类似的事情：

```
var navigator_spy = spyOn( navigator.geolocation, 'getCurrentPosition' )

it("should stub the navigator", function() {
   // your test code
}); 
```

当你想测试它时，间谍已经恢复了。改用这个：

```
beforeEach(function() {
    this.navigatorSpy = spyOn( navigator.geolocation, 'getCurrentPosition' )
});

it("should work now since the spy is created in beforeEach", function() {
    // test code
}); 
```

# haskell - Haskell：如何定义严格的元组

> ID：11106009
> 
> 赞同：3
> 
> 时间：2012-06-19T17:15:08.613
> 
> 标签：haskell, lazy-evaluation

可以说我有以下内容：

```
f (a, b) = if a == 0 then (0, 0) else (a * b, a / b)

x1 = make_strict (0, undefined)
x2 = (0, undefined)

g f :: (b -> b) -> a -> a 
```

如何定义`make_strict`和`g`：

```
g f x = ... f x ...
make_strict x = ... 
```

以便：

```
g f x1 == undef
g f x2 == (0, 0) 
```

基本上我想制作一个严格版本的一对，然后我可以将它传递给一个接受一对的函数，`g`如果需要的话可能通过一个包装器。这里的具体实现`f`只是一个例子，解决方案不应该依赖它。关键是我不能改变`f`，我只能改变`g`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T17:18:51.690

怎么样

```
makeStrict (a, b) = seq a (seq b (a, b)) 
```

# javascript - 自定义谷歌地图嵌入图片

> ID：11106010
> 
> 赞同：2
> 
> 时间：2012-06-19T17:15:09.237
> 
> 标签：javascript, google-maps

我正在尝试像[这样](http://www.ward20.ca/neighbourhoods_detail.php?neighbourhood=entertainment_district)创建自定义谷歌地图。

如何放置我自己的地图图片并删除谷歌地图的其余部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T15:43:18.467

```
<!DOCTYPE html>
<html> 
<head> 
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0px; padding: 0px }
      #map_canvas { height: 100%; z-index: 0;}
      #gmnoprint {width: auto;}
</style>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/> 
<title>my custom map</title>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script>
function CustomMapType() {
}
CustomMapType.prototype.tileSize = new google.maps.Size(256,256);
CustomMapType.prototype.maxZoom = 5;
CustomMapType.prototype.getTile = function(coord, zoom, ownerDocument) {
    var div = ownerDocument.createElement('DIV');
    var baseURL = 'tiles/';
    baseURL +=zoom + '_' + coord.x + '-' + coord.y + '.png';
    div.style.width = this.tileSize.width + 'px';
    div.style.height = this.tileSize.height + 'px';
    div.style.backgroundColor = '#89919E';
    div.style.backgroundImage = 'url(' + baseURL + ')';
    return div;
};

CustomMapType.prototype.name = "Custom";
CustomMapType.prototype.alt = "Tile Coordinate Map Type";
var map;
var CustomMapType = new CustomMapType();
function initialize() {
  var mapOptions = {
      minZoom: 2,
    maxZoom: 5,
    isPng: true,
      mapTypeControl: false,
      streetViewControl: false,
        center: new google.maps.LatLng(65.07,-56.08),     
      zoom: 3,
    mapTypeControlOptions: {
      mapTypeIds: ['custom', google.maps.MapTypeId.ROADMAP],
      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    }
  };
map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions);
map.mapTypes.set('custom',CustomMapType);
map.setMapTypeId('custom');
}
</script>
</head> 
<body onload="initialize()"> 
<div id="map_canvas" style="background: #1B2D33;"></div> 
</body>
</html> 
```

使用该代码并将图块放入文件夹输出 =)

# php - PHP内爆函数相关问题

> ID：11106012
> 
> 赞同：0
> 
> 时间：2012-06-19T17:15:12.520
> 
> 标签：php, implode

我正在爆炸一个附加它的数组，然后我正在将数组内爆。一切正常，但我有一个小小的疑问。请看下面的例子。

```
$x = "123,456,789"
explode (' ', $x);
$x[] = "987";
implode (',', $x); 
```

输出如下所示：

```
,123,456,789,987 
```

问题是逗号出现在值之前。我希望它们像下面一样出现

```
123,456,789,987, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:17:04.447

您在空格而不是逗号上爆炸：

```
explode (' ', $x); 
```

应该

```
explode (',', $x); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:25:24.153

```
$x = '123,456,789'; // use ' instead " (just for performance)
$x = explode (',', $x);
$x[] = '987';
$y = implode (',', $x);

echo $y . ','; // add trailing comma (what nickb said)

// output: 
123,456,789,987, 
```

* * *

关于**单引号和双引号**的问题，请参考[PHP 字符串](http://php.net/manual/en/language.types.string.php)和PHP[中的单引号和双引号是否有性能优势？](https://stackoverflow.com/questions/482202/is-there-a-performance-benefit-single-quote-vs-double-quote-in-php)

# python - 如何在 Python 的同一个数组中添加不同的元素？

> ID：11106016
> 
> 赞同：2
> 
> 时间：2012-06-19T17:15:22.700
> 
> 标签：python, arrays

我是 Python 的新手，所以请原谅我的基本问题。

我有一个包含 400 个浮点元素的数组，我需要将第一项与第二项相加并除以二。

我正在尝试类似的东西：

```
x1=[0,...,399]

n = len(x1)

x2 = []

i = 0
for i in range(0,n): 
    x2[i]=(x1[i]+x1[i+1])/2 
```

但这给了我错误：`IndexError: list assignment index out of range`

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:20:51.953

这里的问题是您不能为列表中的索引分配一个大于列表长度的值。由于您只想继续向列表中添加项目，请改用该`list.append()`方法：

```
n = len(x1)

x2 = []

i = 0
for i in range(n-1): 
    x2.append((x1[i]+x1[i+1])/2) 
```

请注意，我还将范围减少了 1，否则`x1[i+1]`会导致 IndexError。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:22:51.667

使用列表推导的更短更快的单行解决方案：

```
x1=range(0,400)  #use xrange if on python 2.7
x2=[(x1[i]+x1[i+1])/2 for i in range(len(x1)) if i<len(x1)-1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T17:34:23.810

我能想到的最简洁的表达方式：

```
[(i + j)/2 for i, j in zip(xrange(400), xrange(1,400))] 
```

或者，等效地：

```
xs = range(400)
[(i + j)/2 for i, j in zip(xs, xs[1:])] 
```

显然，在 Python3 中，`xrange`已经过时了，所以你可以使用它`range`。此外，在 Python3 中，默认行为发生了`/`变化，因此`//`如果您需要整数，则必须改用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T17:24:54.747

FP-pythonic 方式：

```
x1 = [1.0, 2.0, 3.0, 4.0, 5.0]
x2 = map(lambda x, y: (x + y) / 2, x1, [0] + x1[:-1]) 
```

# iphone - 保存和检索图像使应用程序变慢

> ID：11106017
> 
> 赞同：0
> 
> 时间：2012-06-19T17:15:23.190
> 
> 标签：iphone, objective-c, ios, xcode, uiimage

`UIImagePicker`我通过这种方式保存图片：

将图片保存在文件中，然后我保存失败的路径，`NSUserDefaults`然后在另一个类中，我通过这个保存的路径检索图片。

**代码：**

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{    
    ideaImage.image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];

    [picker dismissModalViewControllerAnimated:YES];
}

-(void)saveIdea_alt
{
    [self performSelector: @selector(saveIdea)  withObject:nil afterDelay:0.1];
}
-(void)saveIdea
{
    UIImage *ideaPhoto = ideaImage.image;

    NSData *imageData = UIImagePNGRepresentation(ideaPhoto);

    NSString* imageName = @"MyImage.png";

    NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString* documentsDirectory = [paths objectAtIndex:0];

    NSString* fullPathToFile = [documentsDirectory stringByAppendingPathComponent:imageName];

    [imageData writeToFile:fullPathToFile atomically:NO];

    NSArray *arrayKeys = [[NSArray alloc]initWithObjects:@"ideaName",@"ideaCost",@"ideaNote", @"ideaImage", nil];
    NSArray *arrayObjects = [[NSArray alloc]initWithObjects:ideaName.text,ideaCost.text,ideaNote.text,fullPathToFile ,  nil];

    NSDictionary *dictionary = [[NSDictionary alloc]initWithObjects:arrayObjects forKeys:arrayKeys];
    NSMutableArray *ideasArray = [[NSMutableArray alloc]initWithArray:[[NSUserDefaults standardUserDefaults]objectForKey:@"ideasArray"]];

    [ideasArray addObject:dictionary];

    [[NSUserDefaults standardUserDefaults]setObject:ideasArray forKey:@"ideasArray"];

    [self dismissModalViewControllerAnimated:YES];
} 
```

但是，在那之后我的应用程序变慢了，它保存和加载图像的速度很慢。我做错了什么？谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:22:49.367

一项有趣的优化是不将其保存到 NSUserDefaults 中，而是使用 Core Data。这有很多原因，但一个重要的原因是，当您想从 NSUserDefaults 添加和删除内容时，应用程序必须将所有 NSUserDefaults 加载到内存中，只需检索一个键即可。

# list - 在applescript中使用函数时如何维护变量类型

> ID：11106018
> 
> 赞同：0
> 
> 时间：2012-06-19T17:15:34.157
> 
> 标签：list, function, types, applescript

我正在编写一个脚本，它将不断扫描 iTunes 中的新对话框并根据它们的操作正确关闭它们。在大多数情况下，我的脚本可以正常工作，只是它不搜索对话框的按钮。

到目前为止，脚本将等到另一个进程打开 iTunes，然后等待第一个对话框出现（使用旋转等待循环）。一旦出现一个对话框，它就会得到窗口，然后是窗口的按钮。我希望它然后根据按钮是什么来做出决定，但是我很难找出按钮是什么。下面是整个脚本：

```
#repeat
set windowOpen to false
tell application "System Events"
    repeat until windowOpen
        if window 1 of process "iTunes" exists then
            set windowOpen to true
        end if
    end repeat
    set windowOpen to false
    tell process "iTunes"
        set frontmost to true
        set wantedWindow to null
        repeat until windowOpen
            try
                set wantedWindow to first UI element whose role description is "dialog"
                set windowOpen to true
            on error erMessg
                set windowOpen to false
            end try
        end repeat
        set buttonList to every button in wantedWindow
        if (count of buttonList) is 1 then
            if title of item 1 of buttonList is not "Stop" then
                click item 1 of buttonList
            end if
        else
            if my windowContainsButton(buttonList, "Cancel") then
                say "Cancel"
            end if
            #           repeat with theButton in buttonList
            #               if title of theButton is "Cancel" or title of theButton is "Restore" then
            #                   say "cancel"
            #                   delay 1
            #               end if
            #           end repeat
        end if
    end tell
    set wantedWindow to null
end tell
#end repeat
on windowContainsButton(listOfButtons, searchFor)
    repeat with theButton in listOfButtons
        if title of theButton is searchFor then
            return true
        end if
    end repeat
    return false
end windowContainsButton 
```

到目前为止，我试图通过让它说“取消”来确定它是否找到了取消按钮。相反，它出现了一个错误：`System Events got an error: Can't make |title| of button "Cancel" of window 1 of application process "iTunes" into type reference.`然后它指向我的函数 windowContainsButton 在这一行：

```
if title of theButton is searchFor then 
```

它突出显示了searchFor。

windowContainsButton 函数正是被注释掉的代码部分，只是概括性的。注释掉的部分有效，这是我询问类型的很大一部分原因。

首先，我该如何实现这样的功能？可以说我实际上希望这个功能能够工作，我怎么能做到呢？

其次，有没有更好的方法来做到这一点？我不是指整个脚本（尽管我不怀疑它可以做得更好），我的意思是在按钮中搜索我期望的特定按钮。

编辑：我注意到的另一件事是“标题”是脚本正文中的保留字，但函数中的变量。我习惯了其他语言，其中保留字被普遍保留，所以我也想要一些关于那里发生的事情的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:50:33.480

我还没有完成整个脚本，但这应该可以修复您的处理程序：

```
on windowContainsButton(listOfButtons, searchFor)
    repeat with theButton in listOfButtons
        tell application "System Events"
            if title of theButton is searchFor then return true
        end tell
    end repeat
    return false
end windowContainsButton 
```

这有点干净：

```
 property theSeconds : 1

tell application "System Events"
    repeat until window 1 of process "iTunes" exists
        delay theSeconds
    end repeat
    tell process "iTunes"
        set frontmost to true
        repeat until exists (first UI element whose role description is "dialog")
            delay theSeconds
        end repeat
        set wantedWindow to first UI element whose role description is "dialog"
        tell wantedWindow
            set buttonList to title of every button in wantedWindow
            if (count of buttons) is 1 and title of button 1 is not "Stop" then
                click button 1
            else if buttonList contains "Cancel" then
                say "Cancel"
            end if
        end tell
    end tell
end tell 
```

# c++ - 不需要的 C 预处理器宏扩展

> ID：11106023
> 
> 赞同：6
> 
> 时间：2012-06-19T17:15:55.040
> 
> 标签：c++, macros, c-preprocessor

我正在使用一个依赖`REQUIRE`宏来执行断言的单元测试框架。

简化后，宏的工作方式如下：

```
#define REQUIRE( expr ) INTERNAL_REQUIRE( expr, "REQUIRE" ) 
```

其定义类似于：

```
#define INTERNAL_REQUIRE( expr, macroName ) \
PerformAssertion( macroName, #expr, expr ); 
```

`PerformAssertion`的前两个参数的类型为：`const char*`. 第二个参数 ( `#expr`) 的原因是可以记录断言的确切表达式。这就是问题所在。预处理器在将表达式作为 a 传递之前对其进行扩展`const char *`，因此它与最初断言的表达式不同。

例如：

```
REQUIRE( foo != NULL ); 
```

将导致此调用：

```
PerformAssertion( "REQUIRE", "foo != 0", foo != 0 ); 
```

如您所见，表达式被部分扩展，例如表达式`foo != NULL`在日志中显示为`foo != 0`. 在构建断言消息文本之前，C 预处理器扩展了`NULL`（定义为 be 的宏）。`0`有没有办法可以忽略或绕过消息文本的扩展？

编辑：对于任何好奇的人来说，这是解决方案：

```
#define REQUIRE( expr ) INTERNAL_REQUIRE( expr, #expr, "REQUIRE" )

#define INTERNAL_REQUIRE( expr, exprString, macroName ) \
PerformAssertion( macroName, exprString, expr ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T17:23:13.917

尝试在调用内部要求之前进行字符串化。您的问题是它在扩展 NULL 的第二次扩展中传递给内部要求。如果您在此之前进行字符串化，例如在 require 宏中，它不会扩展 NULL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T17:45:47.847

这是正在发生的事情：由于应用“字符串化”运算符的宏`#`是二级宏，因此操作顺序如下：

*   预处理器根据 C 6.10.3.1识别参数`REQUIRE(NULL)`并执行[*参数替换。*](http://port70.net/~nsz/c/c99/n1256.html#6.10.3.1)此时，替换看起来像`INTERNAL_REQUIRE( 0, "REQUIRE" )`，因为`NULL`被扩展为`0`。
*   预处理器继续扩展宏链`INTERNAL_REQUIRE`；在这一点上，宏已经被调用的事实`NULL`丢失了：就预处理器而言，传递给的表达式`INTERNAL_REQUIRE`是`0`。

解决此问题的关键在于标准的本段：

> 替换列表中的参数，除非前面有 # 或 ## 预处理标记或后跟 ## 预处理标记（见下文），在其中包含的所有宏都已展开后，将替换为相应的参数。

这意味着，如果您想捕获精确的表达式，您需要在宏扩展的第一级进行。

# c# - 动态创建网格

> ID：11106024
> 
> 赞同：1
> 
> 时间：2012-06-19T17:15:56.463
> 
> 标签：c#, wpf, visual-studio-2010, prism-4

我在数据库中有一个表，我需要在其中显示所有行的内容（作为 TextBlock），并且在每个 TextBlock 的右侧我需要显示一个 TextBox，以便用户可以为每一行输入一个值（一个数字）和当用户提供的值为负数时，我还需要能够更改任何 TextBox 的颜色。

有人可以给我一个线索吗？

PD：我正在使用带有 Prism 4 和 MVVM 模式以及 VS2010 Ultimate 的 WPF

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:24:40.053

很高兴知道您尝试了什么，以便我们可以更好地帮助您，但您几乎肯定希望将数据绑定到 a[`DataGrid`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.aspx)或，如果您绝对需要更大的灵活性（到目前为止，这听起来不像是案例），一个[`ItemsControl`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol)。你不想只是`Grid`动态地创建一个。

您关于 TextBox 以及当值为负数时如何更改其颜色的问题实际上是与如何进行布局不同的问题。我会[`Validation`](http://wpftutorial.net/DataValidation.html)为此研究 WPF 的组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:25:08.117

我不会给你一个完整的解决方案，但我可以为你指出正确的方向。

我首先创建一个数据结构，其中包含 和 的属性，`Name`并为属性更改通知`Value`实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)。

接下来`ViewModel`（或可能`Model`），我将创建一个`ObservableCollection<MyDataObject>`，并用数据库中的数据填充它。

在 XAML 中，我将使用绑定到集合的[ItemsControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx)`ItemTemplate` ，并覆盖将每个项目呈现为 Horizo​​ntal`StackPanel`或 a `Grid`，其中包含`Label`and`TextBox`

对于该`TextBox.Foreground`属性，我会将其绑定到绑定的相同值`TextBox.Text`，但我还会在绑定中使用[IValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)来检查该值是高于还是低于 0，并返回正确的颜色。由于它是一个绑定，它会在值更改时自动更新。

```
<TextBox Text="{Binding Value}"
         Foreground="{Binding Value, Converter={StaticResource MyCustomConverter}}" /> 
```

# javascript - 模块中的 Node.js 回调永远不会被调用

> ID：11106027
> 
> 赞同：0
> 
> 时间：2012-06-19T17:16:01.127
> 
> 标签：javascript, node.js, module, callback

**我的问题实际上是我在调用回调之前使用了响应主体，这导致了错误，因此从未调用过回调。**

我正在使用[request module](https://github.com/mikeal/request)，尽管这个问题似乎发生在任何回调中。

如果我做这样的事情。

```
var request = require('request');

module.exports.test = function ()
{
    request('http://www.google.com', function (error, response, body) {
        /**
         * This callback doesn't seem to ever be called.
         */

        console.log(body);
    });
}; 
```

并像使用它一样。

```
var mytest = require('./test.js');

mytest.test(); 
```

回调似乎从未被调用过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:25:42.810

您的代码正在按预期工作，如果您没有看到任何输出，则表示存在某些错误，应在`error`传递给您的函数的参数中指出。

```
var request = require('request');
request('http://www.google.com', function (error, response, body) {
  if (!error && response.statusCode == 200) {
    console.log(body) // Print the google web page.
  } else {
    console.log('error: '+ response.statusCode)
  }
}); 
```

# c# - C# LoadLibrary 来自字节 []

> ID：11106034
> 
> 赞同：3
> 
> 时间：2012-06-19T17:16:24.790
> 
> 标签：c#, pinvoke, loadlibrary

我想调用 LoadLibrary() 从嵌入式资源加载本机 DLL。我知道如何获取嵌入资源的字节 []，但我不知道如何调用 LoadLibrary() 和 GetProcAddress() 获取字节 []

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:36:34.167

您可以查看本教程，但如前所述，这并非易事：

[http://www.joachim-bauch.de/tutorials/loading-a-dll-from-memory/](http://www.joachim-bauch.de/tutorials/loading-a-dll-from-memory/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:21:02.407

从内存中加载库不是一件容易的事，并且不能使用 LoadLibray 来完成。

为什么不将本机 DLL 保存到临时文件并从那里加载呢？您可以在完成或退出应用程序时删除。

# iphone - 移动精灵 cocos2d 的铸造和参数

> ID：11106040
> 
> 赞同：0
> 
> 时间：2012-06-19T17:16:54.573
> 
> 标签：iphone, objective-c, cocos2d-iphone, parameter-passing

我无法弄清楚如何将触摸开始时的触摸位置传递给我在触摸开始时运行的方法。

```
-(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{
[self schedule:@selector(moveSprite:)];
return TRUE;
}

-(void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
{
[self unschedule:@selector(moveSprite:)];
}

-(void)moveSprite:(ccTime) delta
{

CGPoint spriteCenter = CGPointMake(player.contentSize.width /2,player.contentSize.height /2);

CGPoint touchPoint; //how to get this touch began?

float distanceX = touchPoint.x - spriteCenter.x;
float distanceY = touchPoint.y - spriteCenter.y;

float angle = atan2f(distanceY,distanceX); // returns angle in radians

player.rotation = angle;

} 
```

我还有一个关于`[self schedule:@selector:`这会不断调用我的移动精灵方法的问题吗？因为我希望精灵在按住触摸并且精灵位置发生变化时相应地不断移动和改变旋转。

我的最后一个问题是将精灵移动到触摸的 x 坐标。如果我使用 ccmoveto 我不能使用速度来使精灵慢慢增加它的速度，可以吗？如何将精灵移动到触摸点以增加速度？我猜它与三角洲有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:02:54.660

实际上，我认为您的预定方法没有任何必要。你可以实施

```
- (void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event 
```

方法并将您的精灵旋转逻辑放在那里。

要获得可变的移动速度，您可以使用`CCActionEase`子类之一。将您的移动动作包裹在其中之一中，您将看到移动过程中的速度变化。就像是

```
id move_ease_in = [CCEaseIn actionWithAction:yourMoveAction rate:3.0f];
[player runAction: move_ease_in]; 
```

[你可以在这里](http://cocos2d-iphone.googlecode.com/svn-history/r1861/trunk/tests/EaseActionsTest.m)看到几个例子

# asp.net - ViewEngines 会影响 Asp.Net MVC 的性能吗？

> ID：11106044
> 
> 赞同：2
> 
> 时间：2012-06-19T17:17:07.467
> 
> 标签：asp.net, asp.net-mvc, performance, razor, spark-view-engine

昨晚我在想asp.net mvc中有不同的视图引擎，比如；

```
Spark
Web Forms
Razor 
```

（我知道它们在语法上也不同，但是）

**它们会影响 asp.net mvc 项目的性能吗？**

假设我想使用“Razor”而不是 Web Froms。那么，**我会受到性能冲击吗？**如是。请！解释。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T17:21:24.577

是的，您在软件开发中所做的每一个选择都会影响性能。然而，许多选择并没有产生明显的差异。

您的 MVC 应用程序是否存在性能问题？除非您可以将 Razor 确定为性能瓶颈（这不太可能），否则请不要打扰。

Web 应用程序中的大多数性能问题都与数据库查询、一般网络流量、未压缩的静态资源等有关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T18:54:11.490

根据您对每个列出的视图引擎（Spark、Web 窗体、Razor）的使用情况，您可能会遇到潜在的性能问题。不幸的是，伟大的工具最终没有被正确使用，最终变成了一个问题。

总而言之，我会建议使用*您和您的团队感觉更舒服的视图引擎。*

基本上，尝试了解选项并掌握您的工具库是提高生产力和良好性能的方式。

# javascript - js原型class.create子类和超类中的变量共存

> ID：11106047
> 
> 赞同：0
> 
> 时间：2012-06-19T17:17:13.003
> 
> 标签：javascript, prototypejs, prototype-programming

很简单地说，我有很多共享变量并拥有自己的变量的类。所以我创建了一个名为 Resource 的超类和许多子类。问题是我希望能够设置和获取任何值。我简化了代码，但这是我做不到的。请记住，每个类中有很多变量，包括超类，我不想每次都重新定义该类。

```
var MySuperClass = Class.create({
    initialize:function () {
        var a;
        var b;
        var c;  
        //Getters
    this.getA=function () {
        return a;
    };
    this.getB=function () {
        return b;
    };
    this.getC=function () {
        return c;
    };

    //Setters

    this.setA=function (val) {
        a = val;
    };
    this.setB=function (val) {
        b = val;
    };
    this.setC=function (val) {
        c = val;
    };
    //end Setters   
},
sub:function () {
    return this.getA()-this.getB()-this.getC();
}
});

var MyClass = Class.create(MySuperClass, {
  initialize:function () {
        var d;
        var e;
           //Getters
    this.getD=function () {
        return d;
    };
    this.getE=function () {
        return b;
    };
    this.getC=function () {
        return c;
    };

    //Setters

    this.setA=function (val) {
        a = val;
    };
    this.setB=function (val) {
        b = val;
    };
    this.setC=function (val) {
        c = val;
    };
    //end Setters   
},
add:function () {
    return this.getA()+this.getB()+this.getC()+this.getD()+this.getE();
}
});

function test() {
 myclass=new MyClass();
 myclass.setA(1);
 myclass.setB(0);
 myclass.setC(3);
 myclass.setD(2);
 myclass.setE(3);
 var result=myclass.add();
 var result2=myclass.sub();
 alert(result+' '+result2);
} 
```

当然，子类会覆盖超类的初始化，因此无法访问这些值。如何初始化子类变量和超类变量，以便它们都可以从测试函数中访问？

一如既往，感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:33:59.280

您正在初始化 var variables ，这意味着它仅在初始化函数中可用。通过如下初始化使这些变量成为类级别变量

```
initialize:function () {
    this.a;
    this.b;
    this.c; 
```

},

```
getA:function () {
return this.a; 
```

}

这样，所有这些变量都将在基类和超类中可用。

# ruby - Perftools 错误：找不到符号：Ruby 1.9.3-p194 的 _ruby_current_thread

> ID：11106048
> 
> 赞同：0
> 
> 时间：2012-06-19T17:17:19.757
> 
> 标签：ruby

当我尝试执行 rake db:migrate 时出现此错误。相当令人沮丧。我已经安装了 perftools 2.0，但似乎没有帮助。

这是完整的跟踪：

```
dn51vdfn:rails jasonvdm$ rake db:migrate --trace
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
rake aborted!
dlopen(/Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/perftools.rb-0.5.6/lib/perftools.bundle, 9): Symbol not found: _ruby_current_thread
Referenced from: /Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/perftools.rb-0.5.6/lib/perftools.bundle
Expected in: flat namespace
in /Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/perftools.rb-0.5.6/lib/perftools.bundle - /Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/perftools.rb-0.5.6/lib/perftools.bundle
/Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:240:in `require'
/Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:240:in `block in require'
/Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:223:in `block in load_dependency'
/Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:640:in `new_constants_in'
/Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:223:in `load_dependency'
/Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:240:in `require'
/Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/rack-perftools_profiler-0.5.0/lib/rack/perftools_profiler/profiler.rb:43:in `initialize'
/Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/rack-perftools_profiler-0.5.0/lib/rack/perftools_profiler/profiler_middleware.rb:20:in `new'
/Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/rack-perftools_profiler-0.5.0/lib/rack/perftools_profiler/profiler_middleware.rb:20:in `initialize'
/Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/rack-perftools_profiler-0.5.0/lib/rack/perftools_profiler.rb:20:in `new'
/Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/rack-perftools_profiler-0.5.0/lib/rack/perftools_profiler.rb:20:in `new'
/Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/actionpack-3.1.3/lib/action_dispatch/middleware/stack.rb:43:in `build'
/Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/actionpack-3.1.3/lib/action_dispatch/middleware/stack.rb:112:in `block in build'
/Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/actionpack-3.1.3/lib/action_dispatch/middleware/stack.rb:112:in `each'
/Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/actionpack-3.1.3/lib/action_dispatch/middleware/stack.rb:112:in `inject'
/Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/actionpack-3.1.3/lib/action_dispatch/middleware/stack.rb:112:in `build'
/Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/railties-3.1.3/lib/rails/engine.rb:447:in `app'
/Users/jasonvdm/.rvm/gems/ruby-1.9.3-p194@wheelz/gems/railties-3.1.3/lib/rails/application/finisher.rb:37:in `block in <module:Finisher>'

Tasks: TOP => db:migrate => environment 
```

帮助？我正在使用 Ruby 1.9.3-p194

# git - Using git for deploy

> ID：11106051
> 
> 赞同：1
> 
> 时间：2012-06-19T17:17:26.927
> 
> 标签：git, deployment, tags, jenkins

I have a question.

Now in project we use git for automatically update testing server (deployment). There is fresh HEAD revision on hook when push to repository using Jenkins.

Now there is an Idea about using moving tags to point on deploy revision. Example git tag for-deploy, and move this tag to needed revision. By idea server should deploy revision marker for-deploy on each moving this tag using hook.

What are you think about it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:22:24.453

Tags generally shouldn't change as they are intended to mark a specific commit. Instead, what you are describing is exactly what a branch is intended for. You can create a new `deployment` branch where you can merge commits to whenever you are ready for deployment. Then you just need to deploy the `HEAD` of that branch using something like

```
git pull origin deployment 
```

# android - Google Android 控制台的每日设备安装和每日用户安装有什么区别？

> ID：11106052
> 
> 赞同：4
> 
> 时间：2012-06-19T17:17:27.397
> 
> 标签：android

请帮助我了解每日设备安装和每日用户安装之间的区别

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T17:29:48.877

每日用户安装量是指有多少人安装了您的应用。每日设备安装量是指您的应用安装在多少台设备上。用户可能拥有一个或多个设备（两部手机、一部手机、一部平板电脑等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-22T06:08:22.500

用户安装代表下载的人数（例如电子邮件 ID）。

设备安装表示下载应用程序的设备数量（用户可能拥有一台或多台设备）。

因此，设备安装次数可能多于用户安装次数。

对于货币化，我们只需要考虑“按用户安装”。

# java - 如何使用 Jackson 将地图序列化为列表

> ID：11106053
> 
> 赞同：10
> 
> 时间：2012-06-19T17:17:27.133
> 
> 标签：java, json, jackson

如何将作为 Map 的属性序列化为 Map 值的列表？我已经能够使用`@JsonSerialize(using=...)`getter 上的注释进行其他简单的转换。但是，我不确定是否存在我想做的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T17:56:24.553

我们需要类似的东西，在我们的例子中，我们使用了`@JsonSerialize`你评论的自定义，这很简单：

```
public class MyCustomSerializer extends JsonSerializer<Map<?, ?>> {
    @Override
    public void serialize(final Map<?, ?> value, final JsonGenerator jgen, final SerializerProvider provider)
            throws IOException, JsonProcessingException {
        jgen.writeObject(value.values());
    }
} 
```

使用它的代码：

```
import java.io.IOException;
import java.util.Collections;
import java.util.Map;

import org.codehaus.jackson.JsonGenerationException;
import org.codehaus.jackson.JsonGenerator;
import org.codehaus.jackson.JsonProcessingException;
import org.codehaus.jackson.map.JsonMappingException;
import org.codehaus.jackson.map.JsonSerializer;
import org.codehaus.jackson.map.ObjectMapper;
import org.codehaus.jackson.map.SerializerProvider;
import org.codehaus.jackson.map.annotate.JsonSerialize;

public class JacksonTest {

    public static class ModelClass {
        private final Map<String, String> map;

        public ModelClass(final Map<String, String> map) {
            super();
            this.map = map;
        }

        @JsonSerialize(using = MyCustomSerializer.class)
        public Map<String, String> getMap() {
            return map;
        }

    }

    public static void main(final String[] args) throws JsonGenerationException, JsonMappingException, IOException {
        ObjectMapper objectMapper = new ObjectMapper();
        objectMapper.writeValue(System.out, new ModelClass(Collections.singletonMap("test", "test")));
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T11:16:06.577

我使用**默认的 Serializer**实现了处理不仅仅是 String 的值：

```
@Override
public void serialize(final Map<Long, ?> value, final JsonGenerator jgen, final SerializerProvider provider) throws IOException,
            JsonProcessingException {
   provider.defaultSerializeValue(value.values(), jgen);
} 
```

编辑：正如 Radu Simionescu 所述，此解决方案仅适用于 Pojos 地图。

# java - 删除一个赫克托虚拟键空间

> ID：11106054
> 
> 赞同：1
> 
> 时间：2012-06-19T17:17:29.977
> 
> 标签：java, cassandra, hector

当我们定期在 Cassandra 中删除和创建键空间时，我的团队发现了问题。我发现 Hector 有虚拟键空间的概念。它似乎符合我们的需求，除了文档没有描述如何删除虚拟键空间。Hector 是否有一种简单的方法可以做到这一点，还是我需要遍历列族并删除带有虚拟前缀的行键？

# jquery - 点击事件问题

> ID：11106057
> 
> 赞同：0
> 
> 时间：2012-06-19T17:17:52.923
> 
> 标签：jquery, css

我有这个滑块可以很好地与 CSS 和 jquery 配合使用，但有一个问题：当我单击第一个选项卡时，它会播放我的动画（见下文），但是当我再次单击选项卡时如何让它反转？我不想对我的代码进行大的更改，所以请尽量保持我的代码相似，只需添加我需要的内容。

这是我的 Javascript：

```
$(".guitar").click(function(){
$(".guitar_content").css({display: "block"}).animate({width: "500px"},1000);
$(".guitar_text").delay(1200).animate({opacity: "1"},600); 
```

它只是将显示的 DIV 和扩展的宽度更改为看起来像滑动。然后文本在之后淡入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:07:11.883

你想要这个[`$.toggle()`](http://api.jquery.com/toggle-event/)功能。

```
$(".guitar").toggle(
    function(){
        $(".guitar_content").css({display: "block"}).animate({width: 500},1000);
        $(".guitar_text").delay(1200).animate({opacity: 1},600);
    },
    function(){
        // Reset previous values.
        $(".guitar_content").css({display: "inline"}).animate({width: 0},1000);
        $(".guitar_text").delay(1200).animate({opacity: 0},600);
    }
); 
```

# r - rJava 类未找到异常

> ID：11106061
> 
> 赞同：1
> 
> 时间：2012-06-19T17:18:09.110
> 
> 标签：r, rjava

我只是想获得一个使用 rJava 从 R 中访问自定义 java 类的简单示例。

HelloWorld.java

```
class HelloWorld {
        public static void main(String[] args){
                System.out.println("Hello World!");
        }
} 
```

将 .java 编译为 .class 如下：

```
javac HelloWorld.java 
```

R 代码（从与 HelloWorld.java 和 HelloWorld.class 相同的目录运行。

```
library(rJava)
> .jinit()
[1] 0
> .jnew("HelloWorld")
Error in .jnew("HelloWorld") : java.lang.ClassNotFoundException 
```

感谢您的任何指点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T17:41:31.713

由于您使用的是自定义类，因此您需要告诉 rJava 在哪里可以找到这些自定义类。一种方法是在调用 jinit 时指定类的位置。

```
library(rJava)
# Assuming HelloWorld is in the current working directory
.jinit(".")
.jnew("HelloWorld") 
```

我建议阅读 .jiit 的帮助页面

# c++ - 命令行参数是一些字符串吗？

> ID：11106062
> 
> 赞同：1
> 
> 时间：2012-06-19T17:18:14.447
> 
> 标签：c++, command-line-arguments

几个小时前，我问过一个关于 C++ 命令行参数的类似问题。现在我有另一个问题，据我所知，命令行参数将像字符串一样保存在 argv 数组中。所以将主题与字符串进行比较应该是合乎逻辑的，但它不能按我想要的方式工作，看看这段代码：

```
#include <iostream>
using namespace std;

int main(int argc,char** argv)
{
    if (argv[2]=="stack") cout << "right";
    cout << argv[2];
    return 0;
} 
```

现在我将此命令传递给我编译的名为 zero.exe 的应用程序；

```
zero.exe stack 
```

输出应该是“rightstack”，但是`if`命令会跳过并且只会`cout << argv[2];`执行，所以只有堆栈会显示在监视器上。它显示`"stack"`已保存到`argv[2]`中，因此`if (argv[2]=="stack")`应该可以工作，但事实并非如此。哪里有问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T17:26:03.547

由于历史原因，参数作为 C 风格的字符串传递；也就是说，每个都是指向字符数组的指针，用一个零值字符来标记结束。类似地，字符串文字（如`"stack"`）是一个简单的字符数组。

您的代码比较两个指针，即使字符串值相等，它们也不相等。要比较字符串，请将一个（或两个）转换为`std::string`：

```
#include <string>

std::string arg2(argv[2]);
if (arg2=="stack") std::cout << "right\n"; 
```

或者使用 C 库函数来比较 C 风格的字符串；这可能更有效，但也更难阅读：

```
#include <cstring>

if (std::strcmp(argv[2], "stack") == 0) std::cout << "right\n"; 
```

此外，参数从 1 开始计数，程序名称为`argv[0]`，因此您可能想要进行测试`argv[1]`而不是`argv[2]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T17:22:00.470

问题是它与程序中`argv[2]`的字符串文字“stack”*不同的“stack”。*
毕竟这是 C++，如果你按照你的方式比较两个字符串，你只是在比较它们的地址。

编辑：
在您的示例中，`zero.exe stack`,`argv[0]`包含程序名称并`argv[1]`包含“堆栈”，因此您也差了一个。

更多编辑：
我想我知道编号混乱来自哪里...如果您在 Visual Studio 调试器下运行，您可以在项目的属性页中输入命令行参数，在这种情况下，`zero.exe`将变为 argv[1 ]， 是的。程序本身的名称将始终在 argv[0] 中。

# android - 如何从 SQLLiteDatabase 获取表中所有记录的数量？

> ID：11106063
> 
> 赞同：0
> 
> 时间：2012-06-19T17:18:17.973
> 
> 标签：android, sqlite

我想从我的表中获取记录数，但我不能，因为我收到了这个错误：

> 06-19 19:11:12.599: E/AndroidRuntime(1811): java.lang.IllegalStateException: 尝试重新打开一个已经关闭的对象: android.database.sqlite.SQLiteQuery (mSql = SELECT * FROM zapisy)

我的功能：

```
// Getting contacts Count
public int getContactsCount() {
    String countQuery = "SELECT  * FROM " + TABLE_ZAPISY;
    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(countQuery, null);
    cursor.close();

    // return count
    return cursor.getCount();
} 
```

我在这个网站上找到了这个功能：[http ://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

怎么了？为什么它不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:20:16.790

您在返回语句中仍在使用游标时调用`cursor.close()`，如果您仍在使用游标，则无法关闭游标。

这就像关上一扇门然后试图穿过它:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:24:14.747

您关闭光标然后使用它，您需要在另一个地方记录数据并返回

# java - 如何使用 Java 找到某个文件的位置？例如 - 图片、文档、下载

> ID：11106066
> 
> 赞同：2
> 
> 时间：2012-06-19T17:18:25.607
> 
> 标签：java, io

我正在用 Java 制作一个程序，它会自动将所有 .png 文件从我的桌面移动到我的图片文件夹，现在我已经设法使用简单的方法找到 jar 文件

```
String path = DesktopCleaner.class.getProtectionDomain().getCodeSource().getLocation().getPath(); 
```

这可以很好地找到 jar 文件的位置，但我想找到图片文件夹的位置，因为它显然在每个人的计算机上都会有所不同。

有什么`%pictures%`我可以使用的吗？就像有`%appdata%`。

如果您在我的 OTT 解释中迷路了，我基本上是在问：

我怎样才能找到*图片*文件夹在某人计算机上的位置，例如，我将运行该函数，它将返回：`C:\Users\User\Pictures`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:22:45.030

`System.getProperty("user.home")`将返回用户目录（在您的示例中：）`C:\Users\User\`。
现在，图片文件夹的相对路径可能因 Windows 的一个版本而异（我假设这是一个 Windows 特定的问题）。

# c++ - 如果我在指向向量 std::vector 的指针上调用“删除”*，元素也会被删除吗？

> ID：11106073
> 
> 赞同：1
> 
> 时间：2012-06-19T17:18:53.343
> 
> 标签：c++, memory, allocation

> **可能重复：**
> [指向对象的 C++ 向量指针](https://stackoverflow.com/questions/1361139/c-vector-pointers-to-objects)
> [std::list::remove 方法是否调用每个已删除元素的析构函数？](https://stackoverflow.com/questions/4260464/)

如果我有一个 std::vector 定义为：

```
std::vector<Object*>* myObjects; 
```

然后调用：

```
delete myObjects; 
```

那么 myObjects 中的元素也会被删除吗？使用 std::array 或任何其他 stl 容器有什么区别吗？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T17:31:46.880

不，这就是原因。

考虑以下两种情况：

```
int a, b, c;

auto stackvec = new vector<int*> { &a, &b, &c };
auto heapvec  = new vector<int*> { new int, new int, new int };

delete stackvec;
delete heapvec; 
```

如果在他们持有的指针上调用`delete`s `vector*`，`delete`那么你会遇到一堆麻烦（双关语），因为你会`delete`使用第一个`delete`产生未定义行为的自动变量（一件坏事）。

当您知道指针是动态分配的，或者更好地使用并且您永远不需要调用任何东西时`vector`，您必须自己手动迭代指针。`delete``std::unique_ptr``delete`

此外，您可能首先不需要指向 a 的指针`vector`，但我不会评判您，因为我不知道您的情况。

至于`std::array`and `std::vector`，您需要`std::array`在编译时知道您的大小，并且您不能在运行时调整它的大小，但`vector`没有这些限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:22:54.170

1.  不，你会有内存泄漏。
2.  不，指针容器不会删除指向对象。

    *   使用 Boost，它有拥有数据的指针容器。
    *   `boost::ptr_vector<int>`

# c# - 在 MVC3 中存储非模型/非控制器代码的最佳位置

> ID：11106075
> 
> 赞同：1
> 
> 时间：2012-06-19T17:19:08.080
> 
> 标签：c#, asp.net-mvc-3, coding-style

[所以我正在阅读Scott Gu](http://weblogs.asp.net/scottgu/archive/2010/01/15/asp-net-mvc-2-model-validation.aspx)的一篇博客文章，其中有一段很好的代码，用于在 MVC3 中创建一个新的验证对象

![Scott Gu 博客的代码片段](../Images/f134f489185b061c3b2cc1960e275426.png)

“逻辑上”是在 MVC3 环境中存储它的最佳位置？是否最好将其存储在与解决方案链接的新项目中？MVC 中是否有与 Webforms 中相同的 app_code 文件夹？

我喜欢在编码时保持一切整洁（可能是强迫症！）但想在社区中挑选最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:22:06.290

我认为这样的代码可以在各种项目中重用，并且并不特定于我正在处理的 Web 应用程序。所以我创建了一个特殊的实用程序项目，在该项目中，我可能有一个用于注释或验证的命名空间或类似的东西，我会在其中放置这样的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:24:14.437

我通常将解决方案分成至少两个程序集（或项目）。一个托管实际的 Web 应用程序，一个包含业务对象、实用程序类和方法等。当您需要在不同的位置重用某些逻辑时，这通常也有帮助 - 例如，假设您最终编写了一个 Windows需要一些逻辑和那些业务对象的服务，如果它们在自己的程序集中被隔离，它会有所帮助。Web 项目名称空间仅保留用于与演示相关的内容，而不是业务功能。在某种程度上，我想我总是认为 ASP 或 WinForms 或 MVC 端只是通往业务程序集中应用程序实际内容的管道。所以这就是我最终可能会放置这样的东西的地方。

# .htaccess - 第一次重定向后重定向 301 不起作用

> ID：11106076
> 
> 赞同：1
> 
> 时间：2012-06-19T17:19:11.503
> 
> 标签：.htaccess, mod-rewrite, redirect, mod-alias

我在我的 .htaccess 文件中使用了以下内容，但它似乎无法正常工作。

```
Redirect 301 top_users.php http://example.com/top-users
RewriteRule ^top-users/?$ top_users.php

Redirect 301 register.php http://example.com/register
RewriteRule ^register/?$ register.php

Redirect 301 register.php?log=1 http://example.com/login
RewriteRule ^login/?$ register.php?log=1 
```

顶级用户页面似乎工作正常，如果我直接进入 /login 或 /register，它工作正常，但重定向不起作用。我尝试在重定向页面名称之前添加正斜杠，但它给了我错误的路径并说找不到。

有任何想法吗？

编辑：

更新：

我使用的最终代码如下，感谢 Jon Lin 的帮助。

```
RewriteEngine On
RewriteBase /
Options +FollowSymLinks

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /top-users(/|$|\ )
RewriteRule ^top-users(/|$|\ ) top_users.php [L]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /top_users\.php
RewriteRule ^top_users\.php$ http://example.com/top-users/ [R=301]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /register(/|$|\ )
RewriteRule ^register(/|$|\ ) register.php [L]

# check if request for register.php does not include log=1 in query string
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /register\.php
RewriteCond %{QUERY_STRING} !log=1
RewriteRule ^register\.php$ http://example.com/register/ [R=301]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /login(/|$|\ )
RewriteRule ^login(/|$|\ ) register.php?log=1 [L,QSA]

# check if request for register.php includes log=1 in query string
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /register\.php
RewriteRule ^register\.php$ http://example.com/login/? [R=301] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:02:58.843

您正在导致重定向循环。当原始请求是针对 php 文件时，您应该重定向，并在原始请求针对更好看的 URI 时进行重写：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /top-users(/|$|\ )
RewriteRule ^top-users top-users.php [L]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /top-users\.php
RewriteRule ^top-users\.php$ http://example.com/top-users/ [R=301]

etc... 
```

对于其他 2，您需要匹配查询字符串：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /register(/|$|\ )
RewriteRule ^register register.php [L]

# check if request for register.php does not include log=1 in query string
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /register\.php
RewriteCond %{QUERY_STRING} !log=1
RewriteRule ^register\.php$ http://example.com/register/ [R=301]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /login(/|$|\ )
RewriteRule ^login register.php?log=1 [L,QSA]

# check if request for register.php includes log=1 in query string
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /register\.php
RewriteCond %{QUERY_STRING} (^|&)log=1(&|$)
RewriteRule ^register\.php$ http://example.com/login/ [R=301] 
```

您无法匹配 a`Redirect`或中的查询字符串`RewriteRule`。您必须使用`RewriteCond %{QUERY_STRING}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:27:38.537

为什么不使用 mod_rewrite 标志？您可以通过以下方式将每两行编辑为一行

```
<IfModule mod_rewrite.c>

RewriteEngine On
RewriteBase /
Options +FollowSymLinks

RewriteRule ^top-users(/?)$ top_users.php [L,QSA,R=301]

</IfModule> 
```

`QSA`代表查询字符串追加，用于任何 GET 参数，并用`R=301`您替换每个规则的前一行。

# cryptography - 使用 hmac'd 密码短语改进了 bcrypt 吗？

> ID：11106087
> 
> 赞同：5
> 
> 时间：2012-06-19T17:20:17.727
> 
> 标签：cryptography, password-protection, password-encryption

给定：

$salt - 一个足够长的伪随机生成的字符串

$pepper - 一个足够强大的私钥，只有存储密码短语的数据库管理员知道

你会看到吗

$hash = bcrypt(hmac($userpassphrase,$pepper),$salt)

有意义地优于

$hash = bcrypt($userpassphrase,$salt)

考虑到管理/存储 $pepper 和 $salt 的额外负担？

我的假设是 hmac 并没有显着地增强产生的 $hash，并且存储 $pepper 的负担超过了任何假定的好处……但我很想听听有见地的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:40:08.723

密钥哈希或 HMac 用于验证数据来源，而不是用于密码保护。例如，如果你和我有一个共享密钥，我可以将一些数据与计算出的 hmac 一起发送给你，你可以使用相同的密钥来检查 hmac 哈希是否匹配，如果匹配，你就知道数据来自我，并没有被改变。

您无法在机器上有效地隐藏攻击者无法访问的秘密密码，您所要做的就是增加一层隐秘性。在没有共享密钥的情况下使用 HMac 与使用 SHA($userpassphrase, $salt) 基本相同，这很容易计算，因此一旦“秘密”不会为您的密码哈希方案添加任何有意义的安全性" 密码是已知的。

bcrypt 的全部目的只是为了减慢哈希过程，因此攻击者需要很长时间才能为你的 salt 生成彩虹表。如果您想让您的密码哈希方案更安全，只需增加原始哈希函数的成本即可。在 bcrypt 中，您可以指定“logRounds”的数量（我认为这就是他们所说的），即执行散列的次数。如果将 logRounds 指定为 15（默认值为 10），则哈希将执行 2^15 = 32768 次，这会显着减慢速度。执行散列所需的时间越长，攻击者破解它所需的时间就越长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T22:57:40.373

我不确定你想如何使用它。假设您存储 $hash 稍后进行质询响应身份验证，那么您需要将 $pepper 发送给客户端，它只是另一种盐。简单地添加一个 HMAC 不会有太大用处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T14:03:03.367

在 bcrypt 之类的密码扩展函数上添加额外的哈希是没有意义的。再重复几次会更容易更好。

“胡椒”是一种常用但有问题的做法；我个人认为，攻击者获取您的数据库但无法访问您的密钥的攻击模型是人为设计的，因此对它们进行保护不值得导致实现的复杂性。

# objective-c - “touchesEnded”无法识别整个视图

> ID：11106097
> 
> 赞同：0
> 
> 时间：2012-06-19T17:21:04.763
> 
> 标签：objective-c, ios, xcode4

我正在尝试自定义一个日历程序（最初是为 iPhone 编写的），我发现（http://code.google.com/p/iphonecal/）可以在 iPad 上工作。它是使用控制器和 UIView 的 .xib 文件编写的。

出于某种原因，它不会在整个视图右侧 2/3 的任何位置“触发” *touchesEnded 。*使用 iPhone 模拟器时效果很好，但 iPad 模拟器不行。

我的理解是*touchesEnded*监控整个视图，但在这种情况下似乎没有这样做。

关于可能导致这种情况的任何想法？

更新：它回来了......我重置了模拟器，做了一个干净的重新构建，问题又回来了。这是 UIView 右侧甚至没有触及的代码：

```
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
//--  touchesEnded
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event  {

    int width = self.frame.size.width;

    UITouch* touch = [touches anyObject];
    CGPoint touchPoint = [touch locationInView:self];
    //UIView* theview=[self hitTest:touchPoint withEvent:event];

    if(touchPoint.x < 40 && touchPoint.y < headHeight)
        [self movePrevMonth];
    else if(touchPoint.x > width - 40 && touchPoint.y < headHeight)
        [self moveNextMonth];
    else if(touchPoint.y > headHeight)  
        [self touchAtDate:touchPoint];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:24:44.277

我发现了问题...这两个 .xib 文件都没有设置为使用 iPad...我在[这里](https://stackoverflow.com/questions/10459498/xcode-4-2-change-the-iphone-xib-to-ipad-xib)找到了答案，它向我展示了如何更改 .xib 文件的源代码...它现在可以工作了像一个冠军！

# objective-c - iOS SDK 和自定义初始化程序中的值？

> ID：11106098
> 
> 赞同：0
> 
> 时间：2012-06-19T17:21:07.557
> 
> 标签：objective-c, ios

假设我有一个类的自定义初始化程序：

```
- (id) initWithBlah:(NSString *)blah{
    // do random stuff with blah and return self
} 
```

如何以另一种方法访问分配给“blah”的字符串？

```
- (void) getBlah {
    // get value of blah here from initializer
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:58:37.867

阅读属性：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)

# ios - 更新陀螺仪相对于预定义方向的旋转数据？

> ID：11106102
> 
> 赞同：1
> 
> 时间：2012-06-19T17:21:33.233
> 
> 标签：ios, xcode, math, gyroscope, core-motion

通常，来自陀螺仪 y 轴的旋转数据相对于手机的垂直方向进行更新。但是，如果这个方向如图所示略有变化，是否有任何方法可以将 y 旋转的分量带到垂直轴（手机的垂直方向位置），（这对于线性分量是可能的，通过使用余弦角正弦角) 但是旋转呢？无论如何我可以这样做吗？ ![只是一个粗略的概念](../Images/a771744c42a80699b7b0c95a1e395ef7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:59:00.420

根据我的经验，陀螺仪的值是可移动的，这意味着轴会随着旋转干预而更新（Android 是这样，iOS 没有理由不这样做）。

如果您想关注您的 3 轴方向，则必须不断更新旋转矩阵：

[方向余弦矩阵 IMU：理论](http://gentlenav.googlecode.com/files/DCMDraft2.pdf)

[欧拉角和 DCM](http://en.wikipedia.org/wiki/Euler_angles#Relationship_to_other_representations)

# php - 这是处理异常消息的好方法吗？

> ID：11106104
> 
> 赞同：1
> 
> 时间：2012-06-19T17:21:40.177
> 
> 标签：php, exception-handling

我想要一些系统，我不必一直查看 Exception 类并一次复制状态代码或文本。我也不想在捕获异常后继续编写简单的英文错误消息。这似乎可以实现两者，而且还可以轻松完成 IDE 自动完成！

这是一些演示代码：

```
<?php

class Thrive_URL_Exception extends Thrive_PrettyException
{
    const MISSING_CURL = "The cURL PHP extension must be enabled.";
    const MISSING_URL = "A URL has not been supplied or set.";
    const INVALID_URL = "The URL '%s' is not valid.";
    const BLANK_URL = "The URL '%s' contained no data. It is probably invalid.";
    const CONNECTION_TIMED_OUT = "The connection timed out.";
    const FILE_NOT_FOUND = "404: '%s' could not be found.";
    const NOT_ACCESSIBLE = "%d: '%s' is not currently accessible.";
    const PERMISSION_DENIED = "Permission denied.";
}

class Thrive_URL_Downloader
{
    public function fetch($url)
    {
        // Make sure the URL is valid.
        if (!self::isURLValid($url))
        {
            throw new Thrive_URL_Exception(Thrive_URL_Exception::INVALID_URL, array($url));
        }

        $ch = curl_init();
        curl_setopt_array($ch, array(CURLOPT_URL => $url,
                CURLOPT_RETURNTRANSFER => 1,
                CURLOPT_HEADERFUNCTION => array($this, 'captureHeader'),
                CURLOPT_TIMEOUT => 30,
            )
        );

        $data = curl_exec($ch);
        curl_close($ch);

        if ($data === false || is_null($data) || $data == '')
        {
            throw new Thrive_URL_Exception(Thrive_URL_Exception::BLANK_URL, array($url));
        }

        // TODO: Need to handle HTTP error messages, such as 404 and 502.
        $info = $this->getUrlInfo($ch);

        if ($info->httpCode == 401)
        {
            throw new Thrive_URL_Exception(Thrive_URL_Exception::PERMISSION_DENIED);
        }

        if ($info->httpCode == 404)
        {
            throw new Thrive_URL_Exception(Thrive_URL_Exception::FILE_NOT_FOUND, array($url));
        }

        if (in_array($info->httpCode, array(400, 401, 402, 403, 500, 501, 502, 503)))
        {
            throw new Thrive_URL_Exception(Thrive_URL_Exception::NOT_ACCESSIBLE, array($info->httpCode, $url));
        }

        $urlContent = new Thrive_Model_URLContent;
        $urlContent->url = $url;
        $urlContent->headers = $this->headers;
        $urlContent->info = $info;
        $urlContent->content = $data;

        return $urlContent;
    }
} 
```

我的问题是是否有明显更好的方法来做这种事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:30:29.313

恕我直言，这不是最好的解决方案。

您的异常类违反了[*单一职责原则*(SRP) ^(*Wikipedia*)](http://en.wikipedia.org/wiki/Single_responsibility_principle)*，因为您对不同类型的错误使用相同的异常类。我要做的是：*

 *为不同类型的错误创建单个异常类：

```
 InvalidUrlException
 PermissionDeniedException
 FileNotFoundException (probalny this exception exists in core php) 
```

然后您可以使用 excetion 而不传递任何消息。该消息是课程的私人部分。

对于更大的应用程序，这个解决方案是更好的恕我直言。*

# jquery - 需要添加类，但前提是元素可见

> ID：11106107
> 
> 赞同：1
> 
> 时间：2012-06-19T17:21:53.413
> 
> 标签：jquery

我需要删除所有#tips li 元素上的所有“no-right-marg”类。然后，我需要使用单击元素 ID 的类来隐藏所有这些元素。然后，我需要检查哪些元素仍在显示，并在每四个元素中添加一个“无右边距”类。我下面的代码不起作用。请看我的 jsfiddle [http://jsfiddle.net/VCZc4/2/](http://jsfiddle.net/VCZc4/2/)

```
jQuery('#selector li').click(function() {

   colour = '.' + jQuery(this).attr('id');
   jQuery('#tips ' + colour).toggle();
   jQuery(this).toggleClass('inactive');
   jQuery('#tips li').removeClass('no-right-marg');

   jQuery('#tips li:visible').each(function(index){

       if(index %4===0 ){// if divisible by 4
           jQuery(this).addClass('.no-right-marg');

       }            
   });

});​ 
```

HTML

```
<ul id="selector">
    <li id="brown">button 1</a>
    <li id="green">button 2</a>
    <li id="blue">button 3</a>
    <li id="orange">button 4</a>

</ul>

<ul id="tips">
    <li class="brown">text</li>
    <li class="orange">text</li>
    <li class="blue">text</li>
    <li class="blue no-right-marg">text</li>
     <li class="blue">text</li>
     <li class="orange">text</li>
     <li class="blue">text</li>
    <li class="blue no-right-marg">text</li>
    <li class="green">text</li>
</ul>
​ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T17:30:24.977

好像有个“。” 在您的 addClass 调用中。删除“。” 修复你的代码。

[http://jsfiddle.net/reygonzales/VCZc4/5/](http://jsfiddle.net/reygonzales/VCZc4/5/)

我希望得到你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:32:14.307

它是零索引的，因此您需要 mod 4 == 3。 `if(index % 4 === 0 )`应该`if(index % 4 === 3 )`

# java - 如何在 Spring MVC 中生成没有数据源的 Jasper 报告

> ID：11106108
> 
> 赞同：0
> 
> 时间：2012-06-19T17:21:56.337
> 
> 标签：java, spring, spring-mvc, jasper-reports

在这里，我只想将自定义类或参数传递给 Jasper 模板，但似乎没有数据源，那里只显示一个没有任何布局的空白 pdf 文件。

我猜这是因为`whenNoDataType`jrxml 中的默认值是“nopage”，但即使我将它设置为

```
whenNoDataType="AllSectionsNoDetail" 
```

那里仍然没有显示任何细节乐队，但只有标题乐队。

我能问一下如何解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:35:45.537

自己解决

当给一个空白数据源时，它就像一个魅力

```
// We must have an empty data source to make sure the layout can show up
    // otherwise will have a blank pdf file
    List<Object> emptyList = new ArrayList<Object>();
    Object nothing = null;
    emptyList.add(nothing);
    JRBeanCollectionDataSource jRBeanCollectionDataSource = new JRBeanCollectionDataSource(emptyList,false); 

    // This is declared inside the spring/jasper-views.xml
    model.put("datasource", jRBeanCollectionDataSource);
    modelAndView = new ModelAndView("pdfReport", model); 
```

# java - Java 设计帮助。继承和共享代码

> ID：11106109
> 
> 赞同：4
> 
> 时间：2012-06-19T17:21:56.947
> 
> 标签：java, oop

我在编程开发方面仍然有点菜鸟，并且在制作干净的设计时遇到了一些麻烦。具体来说，我有一个场景如下：

我有 4 个类，每个类都有共同的功能。让我们将这些方法称为 A、B、C 等。

类：帐户；方法：A、B、C、G、H、I、S1、S2、S3
类：文件夹；方法：A、B、C、D、E、S1、S2、S3
类：组；方法：A、B、C、D、E、F、S1、S2、S3
类：角色；方法：A、B、C、D、E、F、S1、S2、S3

上面指定的方法是抽象的。因为可能有一个 FooAccount 和一个 BarAccount 以不同的方式实现方法 A。但是 FooAccount 和 FooGroup 具有相同的方法 A（因为它们具有相同的实现；Foo）。还不错，除了有些方法 S1、S2 和 S3 甚至在 Foo 和 Bar 之间实现相同，因此 FooAccount 和 BarAccount 具有相同的方法 S1、S2 和 S3。

目前我的设计很丑：

**interface Object1：**声明A、B、C
**interface Object2 extends Object1：**声明D、E
**interface Object3 extends Object2：**声明F
**interface Account extends Object1：**声明G、H、I
**interface Folder extends Object2；**
**接口组扩展 Object3；**
**接口角色扩展了 Object3；**
**类助手：**定义 S1、S2、S3

我知道禁止多重继承是有充分理由的，但如果我被允许这样做，我可以将方法 S1、S2 和 S3 放入 Object1 并将所有接口转换为抽象。然后 FooAccount 可以扩展 Account 和 FooObject1。

谁能给我一些建议，什么结构可能更好？我是否应该将所有 A、B、C 等放入 Util 类（例如 FooUtil 和 BarUtil）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:27:02.110

您应该根据角色而不是发生来对接口中的方法进行分组。所以假设`A`, `B`,`C`属于一个角色，`D`并且`E`属于另一个角色并且属于`F`它自己

```
interface Role1 - A, B, C
interface Role2 - D, E
interface Role3 - F
interface Account extends Role1
interface Folder extends Role1, Role2
interface Group extends Role1, Role2, Role3 
```

如果您有方法的通用实现，则可以将它们移至提供默认实现的抽象基类

```
abstract class Helper - S1, S2, S3 
```

然后你可以声明你的具体类

```
class FooAccount extends Helper implements Account 
```

如果您可以提取 and 的共同行为，您也可以考虑使用泛型`Foo`，`Bar`并且已经`Account`是泛型类（采用`Foo`and `Bar`）而不是接口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:32:27.347

不要依赖继承作为减少重复代码的机制。相反，想办法将职责分离到单独的类中。

> FooAccount 和 FooGroup 具有相同的方法 A

这告诉我方法 A 的实现属于它自己的类 ( `FooA`)。`Account`如果对and`Group`暴露方法真的有意义，那么and`A`的实现应该简单地传递给.`FooAccount.A``FooGroup.A``FooA.A`

# android - 单个listview项目android的大小

> ID：11106110
> 
> 赞同：5
> 
> 时间：2012-06-19T17:21:58.500
> 
> 标签：android, android-listview

有谁知道 android 中单个列表视图项的标准大小，以 dpi 或像素为单位？

或者可能没有标准？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T17:32:50.363

Android 使用以下方法定义“首选尺寸”，

```
android:minHeight="?android:attr/listPreferredItemHeight" 
```

也记录[在这里](http://developer.android.com/reference/android/R.attr.html#listPreferredItemHeight)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T17:32:31.190

有一个强烈推荐的列表视图项目大小，您应该使用它：[48dip](http://developer.android.com/design/style/metrics-grids.html#48dp-rhythm)。这是新的 Android 设计指南推荐的。

# java - Java Runtime.getRuntime().exec

> ID：11106111
> 
> 赞同：2
> 
> 时间：2012-06-19T17:21:59.460
> 
> 标签：java, runtime, runtime.exec

我正在尝试将我制作的 2 个简单程序合并到一个 .jar 中。我将两个 .jar 打包成一个新的，并使用 Runtime.getRuntime().exec 方法来执行它们。

代码：

```
public class main {
  public static void main(String[] args) {
    try {
      Runtime.getRuntime().exec("cmd /c proj1.jar");
    } catch(Exception exce){ 
      /*handle exception*/
      try {
        Runtime.getRuntime().exec("cmd /c proj2.jar");
      } catch(Exception exc){
        /*handle exception*/

      }
    }
  }
} 
```

问题是只执行了 proj1.jar 而 proj2.jar 没有运行。我是java新手，不知道为什么会这样。我该如何解决？我希望两个文件都被执行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T17:26:29.307

你的问题是你的第二个文件只有在第一个抛出异常时才会执行。你正在寻找这个：

```
public class main {
  public static void main(String[] args) {
    try {
      Runtime.getRuntime().exec("cmd /c proj1.jar");
      Runtime.getRuntime().exec("cmd /c proj2.jar");
    } catch(Exception exce){ 
      /*handle exception*/
    }
  }
} 
```

或者，如果您绝对必须单独处理异常，则：

```
public class main {
  public static void main(String[] args) {
    try {
      Runtime.getRuntime().exec("cmd /c proj1.jar");
    } catch(Exception exce){ 
      /*handle exception*/
    }

    try {
      Runtime.getRuntime().exec("cmd /c proj2.jar");
    } catch (Exception e) {
      //handle the exception
    }
  }
} 
```

# sql-server-2008 - 如何将权重因子应用于 SSAS 中的 M2M 维度关系？

> ID：11106123
> 
> 赞同：2
> 
> 时间：2012-06-19T17:22:42.033
> 
> 标签：sql-server-2008, ssas, bids

我与桥表中的权重因子列有多对多关系，但在 BIDS 中开发我的多维数据集时我不知道如何利用它。通过谷歌，我找到了很多关于权重因子是什么以及为什么要使用权重因子的描述（我完全理解这一切），但我找不到如何在 BIDS 中的多维数据集中配置它的实用教程。

逐个点击的说明是理想的，但如果有人至少可以将我指向正确的窗口，我可能会弄清楚其余的。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:49:00.360

如果权重因子和要应用权重的值位于不同的度量组上，则可以使用度量的 MeasureExpression 属性

# forms - Java EE 6 网页中的多个文件夹

> ID：11106130
> 
> 赞同：2
> 
> 时间：2012-06-19T17:23:02.373
> 
> 标签：forms, servlets, java-ee-6

假设您有以下简单的应用程序：

```
<form action="helloServlet" method="post">

        Give name:<input type="text" name="name" />

        <input type="submit" value="Send"/>
</form> 
```

以及处理该表单的 servlet：

```
package org.servlets.hello;

import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet(name="helloServlet", urlPatterns={"/helloServlet"})
public class helloServlet extends HttpServlet {

protected void processRequest(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {

    response.setContentType("text/html;charset=UTF-8");
String name = request.getParameter("name");

    PrintWriter out = response.getWriter();

    try {

        out.println("<html>");
        out.println("<head>");
        out.println("<title>Servlet helloServlet</title>");  
        out.println("</head>");
        out.println("<body>");
        out.println("<h1>Hello  " + name + "</h1>");
        out.println("</body>");
        out.println("</html>");

    } finally { 
        out.close();
    }
} 

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
    processRequest(request, response);
} 
```

}

现在，当它从位于“网页”文件夹中的网页运行时，它可以完美运行，但是当我尝试在网页的子文件夹中执行相同操作时，出现 404 错误（请求的资源（）不可用。） . 我是否应该更改某些内容以使子文件夹成为调用 servlet 的有效位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:37:57.300

如果`POST`动作 url 以`"/"` 它开头是绝对的。否则，它是相对于当前页面的

因为 post url `<form action="helloServlet"`， helloServlet 是相对于当前路径的。

这是访问 helloservlet url 的方式：

```
 Current Page          Servlet URL
Usage 1   /form.html            /helloservlet
Usage 2   /subfolder/form.html  /subfolder/helloservlet 
```

在您的情况下，用法 1 有效，因为 Servlet 映射到`/helloservlet`.

**解决方案：**

修改行

`<form action="helloServlet" method="post">`

到

`<form action="/{contextPath}/}helloServlet" method="post">`

我认为您的上下文路径不是默认`"/"`上下文路径。在这种情况下，您应该拥有相对于域的 url。将 {contextpath} 替换为实际的上下文路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:23:27.647

好吧，我自己想通了。这是我的解决方案，以防其他人遇到同样的问题。据我了解，标准的 java web 项目文件夹结构如下：

*   网页
    *   网络信息
    *   子文件夹
*   源包
    *   org.whatever.name
*   图书馆
*   配置文件

因此，如果我们在 SUBFOLDER 中有一个 hello.jsp，我们有一个包含以下内容的表单：

```
<form action="helloServlet" method="post"> 
```

org.whatever.name 中的 servlet 如下：

```
@WebServlet(name="helloServlet", urlPatterns={"/helloServlet"}) 
```

然后根据Web Pages文件夹映射servlet位置，两个文件找不到。因此，为了使 servlet 可用于子文件夹，我们要么更改 servlet：

```
@WebServlet(name="helloServlet", urlPatterns={"SUBFOLDER/helloServlet"}) 
```

或形式：

```
<form action="../helloServlet" method="post"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T23:37:15.523

使用域相对 URL。

```
<form action="${pageContext.request.contextPath}/helloServlet"> 
```

无需重复 servlet 映射中的每个文件夹。

### 也可以看看：

*   [调用转发到 JSP 的 Servlet 时，浏览器无法访问/查找相关资源，如 CSS、图像和链接](https://stackoverflow.com/questions/3655316/browser-cant-access-css-and-images-when-calling-a-servlet-which-forwards-to-a-j/3658735#3658735)

# document - Google 文档 - 背景颜色

> ID：11106131
> 
> 赞同：1
> 
> 时间：2012-06-19T17:23:05.980
> 
> 标签：document, google-docs, google-apps-script

如何删除文档元素的背景颜色（又名设置为 null）？

我尝试将值设置为“null”，但是，系统给了我这个错误：“我们很抱歉，发生服务器错误。请稍候再试一次。（第 14 行）”

*如果我将第 14 行 (activeSel.setBackgroundColor) 注释掉，则脚本可以正常工作*

```
function clearDoc(){
  var doc = DocumentApp.openById(DOC1Id);
  var activeSel = doc.getActiveSection().getParagraphs()[2];
  var attr = activeSel.getAttributes(); // BACKGROUND_COLOR = "#ff0000"
  activeSel.setBackgroundColor(null); // errors out
  return
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-10T16:03:33.167

现在将 Background_COLOR 设置为 null（或使用`setBackgroundColor`）会清除背景颜色。上面给出的示例不再出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T23:41:05.447

您是否尝试将背景颜色设置为白色（“#ffffff”）？

# c# - 无法在 xna 中工作的 slimdx 中编译相同的着色器？

> ID：11106132
> 
> 赞同：1
> 
> 时间：2012-06-19T17:23:07.090
> 
> 标签：c#, shader, slimdx

我正在尝试在 slimdx 中加载 FX 文件，我已经使用 XNA 4.0 加载和编译了这个精确的 FX 文件，但是我遇到了 slimdx 错误，这是我加载它的代码。

```
 using SlimDX.Direct3D11;
    using SlimDX.D3DCompiler;

    public static Effect LoadFXShader(string path)
    {
        Effect shader;
        using (var bytecode = ShaderBytecode.CompileFromFile(path, null, "fx_2_0", ShaderFlags.None, EffectFlags.None))
            shader = new Effect(Devices.GPU.GraphicsDevice, bytecode);

        return shader;
    } 
```

这是着色器：

```
#define TEXTURE_TILE_SIZE 16

struct VertexToPixel
{
    float4 Position     : POSITION;    
    float2 TextureCoords: TEXCOORD1;
};

struct PixelToFrame
{
    float4 Color : COLOR0;
};

//------- Constants --------
float4x4 xView;
float4x4 xProjection;
float4x4 xWorld;
float4x4 preViewProjection;
//float random;

//------- Texture Samplers --------

Texture TextureAtlas;
sampler TextureSampler = sampler_state { texture = <TextureAtlas>; magfilter = Point; minfilter = point; mipfilter=linear; AddressU = mirror; AddressV = mirror;};

//------- Technique: Textured --------

VertexToPixel TexturedVS( byte4 inPos : POSITION, float2 inTexCoords: TEXCOORD0)
{   
    inPos.w = 1;
    VertexToPixel Output = (VertexToPixel)0;
    float4x4 preViewProjection = mul (xView, xProjection);
    float4x4 preWorldViewProjection = mul (xWorld, preViewProjection);

    Output.Position = mul(inPos, preWorldViewProjection);

    Output.TextureCoords = inTexCoords / TEXTURE_TILE_SIZE;

    return Output;
}

PixelToFrame TexturedPS(VertexToPixel PSIn) 
{
    PixelToFrame Output = (PixelToFrame)0;

    Output.Color = tex2D(TextureSampler, PSIn.TextureCoords);

    if(Output.Color.a != 1)
        clip(-1);

    return Output;
}

technique Textured
{
    pass Pass0
    {   
        VertexShader = compile vs_2_0 TexturedVS();
        PixelShader  = compile ps_2_0 TexturedPS();
    }
} 
```

现在这个精确的着色器在 XNA 中工作正常，但在 slimdx 中我得到了错误

```
ChunkDefault.fx(28,27): error X3000: unrecognized identifier 'byte4' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:41:48.640

如果我没记错的话，byte4 来自 XNA（使用着色器模型 2.0）的reach/hd 配置文件。您正在使用 directx11，但正在尝试将其编译为 Shader Model 2 配置文件。这是不支持的。您必须重写着色器以适应着色器模型 5 配置文件 (fx_5_0) 或使用功能级别[D3D_FEATURE_LEVEL_9_1](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476876%28v=vs.85%29.aspx#Overview)构建您的设备，并将您的着色器编译为目标 ps_4_0_level_9_1。

着色器中的一些东西在着色器模型 5 中不起作用。例如，sample_state 是 Directx9 的东西。从 Directx10 及更高版本开始，您必须使用 samplerstate 组。（[有关更多信息，请参见此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476144%28v=vs.85%29.aspx)）例如：

```
SamplerState MeshTextureSampler
{
    Filter = MIN_MAG_MIP_LINEAR;
    AddressU = Wrap;
    AddressV = Wrap;
}; 
```

其他一些不受支持的内容包括：

```
magfilter = Point; 
```

您必须将其转换为这样的过滤器：

```
Filter = MIN_MAG_LINEAR_MIP_POINT; 
```

这些是我扫描它时发现的东西。我希望这对你有所帮助。

# whitespace - CSS 样式“空白：前行”不能在 IE 9 上远程工作

> ID：11106140
> 
> 赞同：2
> 
> 时间：2012-06-19T17:23:51.997
> 
> 标签：whitespace

我使用前行空白样式来维护行刹车。

```
<div style="white-space: pre-line;">
 - Item
 - Another Item
 - Third Item    
</div> 
```

这项工作在本地按预期工作：
- 项目
- 另一个项目
- 第三个项目

但是，当发布到远程服务器时，不会保留换行符。即
- 项目 - 另一个项目 - 第三个项目

我尝试了多台机器并保持换行结果与以下相同：

本地化管理：

```
http://localhost/mysite/mypage.htm <br/>
C:\inetpub\wwwroot\mysite\mypage.htm <br/> 
```

远程省略，通过机器名称（即使来自同一台机器），省略换行符：

```
http://MachineName/MySite/Mypage.htm 
```

Web 服务器是 IIS 7。浏览器 IE9。

只是提到我尝试了Firefox并且它成功了。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:33:26.557

听起来好像在发布后，浏览器正在以错误的文档模式读取它。

您可以使用 Developer tool 判断 IE9 是否支持样式规则......

导航到您的页面...按 f12 显示开发人员工具，注意文档模式...在 IE9 中，它必须是 IE9 才能使用最新的 CSS 3 样式规则（您可以在顶部看到该模式）。

然后使用开发工具上的查找工具（看起来像一个箭头）并单击文档中要检查的元素。

单击 Trace Styles 选项卡并查看应用于该元素的样式规则列表...。如果未列出空白，则浏览器（使用该文档模式）无法识别该样式规则。

# sql - SQL Server 中的安全性

> ID：11106142
> 
> 赞同：2
> 
> 时间：2012-06-19T17:24:09.110
> 
> 标签：sql, sql-server-2008

我们如何使用 Sp_Configure。我们可以提供什么样的特权来运行以下查询。

```
sp_configure 'show advanced options', 1  
RECONFIGURE 
sp_configure 'Ad Hoc Distributed Queries', 1 
RECONFIGURE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T19:47:58.203

引用[在线图书](http://technet.microsoft.com/en-us/library/ms188787.aspx)

> 默认情况下，将不带参数或只带第一个参数的 sp_configure 执行权限授予所有用户。要使用两个参数执行 sp_configure 以更改配置选项或运行 RECONFIGURE 语句，您必须被授予 ALTER SETTINGS 服务器级权限。ALTER SETTINGS 权限由 sysadmin 和 serveradmin 固定服务器角色隐式持有。

# java - AndEngine 人像扭曲与 RotationModifier

> ID：11106148
> 
> 赞同：1
> 
> 时间：2012-06-19T17:24:45.950
> 
> 标签：java, android, andengine

我正在使用 AndEngine 尝试创建一个简单的球精灵，它不断旋转 360 度。旋转工作正常。但是，仅在纵向模式下，球的图片看起来会失真。

肖像：

![在此处输入图像描述](../Images/632e17e8fe89b99a42662f32d70381bd.png)

景观：

![在此处输入图像描述](../Images/08e198a614f250f5f5f025f92c2b3664.png)

您会注意到在纵向模式下球似乎是如何向上伸展的。我不确定是什么原因造成的。我只想让球保持完美的圆形。

如果有人问.. 球图像是完美的圆形，大小为 200 像素 x 200 像素。

这是我的代码：

```
Ball = new Sprite(100, 100, 200, 200, this.BallRegion);

LoopEntityModifier EntityModifier = 
             new LoopEntityModifier(new RotationModifier(10, 0, 360));          
Ball.registerEntityModifier(EntityModifier);

scene.attachChild(Ball); 
```

我的分辨率政策：

```
 this.mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
    return new org.anddev.andengine.engine.Engine(new EngineOptions(true,
            null, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT),
            this.mCamera)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T12:50:33.937

我采取了上述解决方案并对其进行了改进：

创建相机时，请执行以下操作：

```
Camera camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

camera.setResizeOnSurfaceSizeChanged(true);
camera.setCenter( 0.5f * CAMERA_WIDTH
                , 0.5f * CAMERA_HEIGHT); 
```

然后覆盖`onConfigurationChanged(Configuration newConfig)`：

```
@Override
    public void onConfigurationChanged(Configuration newConfig) {
        if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
            getEngine().getCamera().setRotation(0);
        }
        else if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
            getEngine().getCamera().setRotation(90f);
        }
    } 
```

同样在这种情况下，如果您在墙纸中使用加速度计，则应更正来自加速度计的数据：

```
 @Override
 public void onAccelerationChanged(final AccelerationData pAccelerationData) {
     boolean isCameraRotated = getEngine().getCamera().isRotated();

        float correctAccelerationX = isCameraRotated ? pAccelerationData.getY() 
                                                     : pAccelerationData.getX();
        float correctAccelerationY = isCameraRotated ? pAccelerationData.getX() 
                                                     : pAccelerationData.getY() * -1;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:51:56.530

我自己想通了。要在 AndEngine 中处理动态壁纸的方向变化，可以使用以下代码：

```
@Override
public void onConfigurationChanged(Configuration newConfig)
{
    if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT)
    {
        scene.setScale(1);
    }
    else if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE)
    {
        scene.setScaleX(480.0f / 720.0f);
        scene.setScaleY(1.0f);
    }

            //Rebuilds the scene. onLoadScene() calls to this method.
    BuildScene();

} 
```

您可能必须根据您的分辨率策略更改值，但这对我来说非常有效。

# c# - 当鼠标聚焦在面板范围内时添加事件

> ID：11106149
> 
> 赞同：3
> 
> 时间：2012-06-19T17:24:46.990
> 
> 标签：c#, .net, winforms, panel

我有：

*   文本框（多行）
*   控制板
*   面板内的不同控件（按钮、文本框）

设想：

当我的鼠标在我的面板范围内或面板区域内时，我需要向文本框添加文本，并且当不在面板中聚焦时再次清除文本框。我使用`MouseHover`和`MouseLeave`事件来实现这个效果。问题是当我专注于面板内的任何控件时，鼠标似乎失去了面板中的焦点并调用`MouseLeave`事件。

当鼠标在面板范围内时，有没有办法添加事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:09:30.953

您可以使用`MouseLeave`面板的 并检查您的鼠标位置是否真的不在面板表面。

```
 private void panel_MouseLeave( object sender, EventArgs e ) {
      Point mouseposition = this.PointToClient( MousePosition ); // to calculate the mouseposition related to the form (keyword this)

      //If the mouse isn't into the panel surface...
      if (!(mouseposition.X > panel1.Location.X && mouseposition.Y > panel1.Location.Y && mouseposition.X <  panel.Location.X + panel1.ClientSize.Width  && mouseposition.Y <  panel1.Location.Y + panel.ClientSize.Height) )
          textbox.Clear();
 } 
```

# c - 判断一个指针是否映射到当前进程

> ID：11106150
> 
> 赞同：1
> 
> 时间：2012-06-19T17:24:49.387
> 
> 标签：c, memory, system-calls

确定指针（任何类型的）是否映射到当前进程的肮脏技巧是将指针传递给`access`系统调用，然后`errno`检查`EFAULT`. 另一种是使用`munlock`和检查`ENOMEM`. 另一种是解析`/proc/PID/maps`。有没有副作用少的方法，最好不依赖procfs？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:15:26.373

检查指针是否可以访问的一种方法是简单地尝试使用它；如果您无权访问，您将收到一个 SIGSEGV - 您可以使用自己的信号处理程序捕获它。

为此，您将需要`setjmp()`在访问指针之前使用该函数，并且您将希望您的信号处理程序`longjmp()`退出。这些方面的东西：

```
if (setjmp(jmp_buf)) printf("The pointer was inaccessible.\n");
else {
    int x = *ptr;
    printf("The pointer was readable.\n");
} 
```

在您的信号处理程序中，您需要：

```
...
longjmp(jmp_buf, 1); 
```

这将导致您的应用程序以恢复所有寄存器并导致函数返回的方式在函数中*的*特定点恢复（而不是其默认值）。`setjmp()``1``0`

# php - 致命错误导致没有结果出现（Mysqli）

> ID：11106155
> 
> 赞同：3
> 
> 时间：2012-06-19T17:25:09.517
> 
> 标签：php, mysqli

我在我的脚本中收到此错误，我认为这导致搜索栏无法正常工作：

> 致命错误：在第 89 行的 /web/stud/xxx/Mobile_app/previousquestions.php 中的非对象上调用成员函数 bind_param()。

它指向的线是这条线：

```
$stmt->bind_param("s",$each); 
```

需要做什么才能修复此错误？目前，该错误导致用户在搜索栏中提交内容后没有出现任何结果。

```
 <?php

        //connect to db

          $questioncontent = (isset($_POST['questioncontent'])) ? $_POST['questioncontent'] : '';

        ?>

        <?php 

        if (isset($_GET['searchQuestion'])) {

        $searchquestion = $questioncontent;
        $terms = explode(" ", $searchquestion);
$parameters = array();

        $questionquery = "
        SELECT q.QuestionId, q.QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT(an.Answer ORDER BY an.Answer SEPARATOR ' ') AS Answer, r.ReplyType, 
               q.QuestionMarks 
          FROM Answer an 
          INNER JOIN Question q ON q.AnswerId = an.AnswerId
          JOIN Reply r ON q.ReplyId = r.ReplyId 
          JOIN Option_Table o ON q.OptionId = o.OptionId 

                         WHERE ";

        $i=0;
        foreach ($terms as $each) {     
            $i++;         

            if ($i == 1){         
                $questionquery .= "q.QuestionContent LIKE ?";     
                } else {         
                    $questionquery .= "OR q.QuestionContent LIKE ?";    
                     } 
                     }  

                     $questionquery .= "GROUP BY q.QuestionId, q.SessionId ORDER BY "; $i = 0; foreach ($terms as $each) {     
                         $i++;      

            if ($i != 1)         
            $questionquery .= "+";     
            $questionquery .= "IF(q.QuestionContent LIKE ?,1,0)"; 
            } 

            $questionquery .= " DESC "; 

            $stmt=$mysqli->prepare($questionquery);      
    $parameters[] = ($each)   
    $stmt->execute($parameters);  
            $stmt->bind_result($dbQuestionId,$dbQuestionContent,$dbOptionType,$dbNoofAnswers,$dbAnswer,$dbReplyType,$dbQuestionMarks); 
            $questionnum = $stmt->num_rows();

        }

    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:28:01.017

这意味着 $stmt 变量没有被正确设置 - 我认为你需要在行后有空格`LIKE ?`，因为你`GROUP BY`在它之后连接。

您需要检查您生成的 SQL 语句是否正确，以及数据库连接是否正常。

# java - 在应用程序启动时参数化 Java 属性文件

> ID：11106161
> 
> 赞同：3
> 
> 时间：2012-06-19T17:25:42.333
> 
> 标签：java, shell, properties

我继承的应用程序由从 shell 脚本中使用 -D 选项传入的属性文件配置：

*-Dcom.gtnet.systemProperties.override.url=文件:/usr1/app/gtx/config/override.properties_$INST*

我们运行此应用程序的多个并发实例，目前每个实例都有一个单独的属性文件。每个文件的唯一区别是日志文件的名称。因此，我们最终得到了分布在许多服务器上的多个几乎相同的文件。

我的问题是，有什么方法可以参数化或扩展属性文件，以便我们可以传入实例的名称并在文件中使用它？因此，我们每台服务器只有一个文件。我们没有修改应用程序代码的选项，我们需要在应用程序启动时传入文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:50:24.937

内置[`java.util.Properties#load(...)`](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html#load%28java.io.Reader%29)既不支持`#includes`也不支持变量替换。

如果您碰巧知道应用程序没有使用`Properties.load`，而是它自己的逻辑，您可以查看是否这样做......但除非现有支持，否则您将不得不修改应用程序代码。

由于您提到修改应用程序代码不是一种选择......您应该考虑使用属性文件生成器，并管理用于生成属性文件的模板。因此，您仍然有一堆完全扩展的属性文件，但它们将使用一个模板文件、可能是参数值文件和属性文件生成器来掌握。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:28:08.303

Java 对此不提供支持。如果您确实无法更改应用程序，则可以使用启动器将其包装起来，该启动器将读取参数化的属性文件，解析参数，并写出已解析参数的临时属性文件；然后使用该临时文件调用您的应用程序。

# c# - 只是一个简单的 UnauthorizedAccessException 问题

> ID：11106163
> 
> 赞同：2
> 
> 时间：2012-06-19T17:25:51.813
> 
> 标签：c#, file, file-io, unauthorizedaccessexcepti

我只是在整理一个小 POC 项目，并且在文件权限方面遇到了一些奇怪的问题。我现在要做的就是：

```
if (!File.Exists(Path.Combine(path,"Schedule.txt")))
            {
                File.Create(path);
                Debug.WriteLine("Schedule File Created.");
            } 
```

我得到：“访问路径“BlahBlahBlahMyPathWouldGoHere”被拒绝。” 路径是：`"C:\Users\MyUser\My Documents\TestStuff"`。

但是我已经设置了权限，以便内置的“Everyone”用户拥有该文件夹和所有子文件夹的所有权限。那么，什么给了？

我的公司使用 ViewFinity Agent 自私而无耻地剥夺了任何人有生产力的可能性，所以也许这就是问题的一部分。我不知道。我以前在这种事情上没有遇到很多麻烦。

有人知道这个问题的任何其他可能原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:37:08.203

哦，我很笨。

```
 File.Create(path); 
```

本来应该：

```
 File.Create(Path.Combine(path,"Schedule.txt")); 
```

所以我试图在与文件夹相同的位置创建一个文件。傻我:)

# c# - Azure Servicebus 上的 ConnectivityMode.Http 是否支持 HTTPS

> ID：11106169
> 
> 赞同：1
> 
> 时间：2012-06-19T17:26:32.717
> 
> 标签：c#, ssl, azure, servicebus

我正在尝试`ConnectivityMode.Http`在 WCF Web 服务中使用 SSL (HTTPS) 打开与 Azure 服务总线中继的连接。连接似乎默认为 HTTP。

从 WCF 侦听器到中继总线是否支持 HTTPS？

谢谢安东尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:45:52.723

当您使用 SSL 连接通过静态 ServiceBusEnvironment 类在 AppDomain 级别设置连接模式时，您应该使用 TCP 而不是 HTTP，因为 TCP 可以使用端口 9351 进行 SSL 连接，如[Service Bus Bindings](http://msdn.microsoft.com/en-us/library/windowsazure/hh410102.aspx)中所述：

*   **Tcp** ：服务通过端口 9351 (SSL) 与中继服务创建 TCP 连接。
*   **Http**：服务与中继服务创建 HTTP 连接，从而更容易解决 TCP 端口限制。

以下是受支持的[服务总线端口设置](http://msdn.microsoft.com/en-us/library/windowsazure/ee732535)列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:34:29.950

Anthony，ConnectivityMode 标志的当前行为是，如果设置为 Auto，侦听器将尝试使用 TCP 进行连接，然后是 HTTP。如果设置为 ConnectivityMode.HTTP 模式，它会尝试 HTTP 连接。在这两种情况下，都使用了明确的 HTTP。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/microsoft.servicebus.connectivitymode.aspx](http://msdn.microsoft.com/en-us/library/microsoft.servicebus.connectivitymode.aspx)。

计划支持 HTTPS，相关信息将在适当时候提供。

# sql - SQL AVG 返回一个 int

> ID：11106170
> 
> 赞同：32
> 
> 时间：2012-06-19T17:26:35.527
> 
> 标签：sql, casting, floating-point, average

在我的一个查询中，该`AVG`函数似乎返回了一个 int。

```
select ..., AVG(e.employee_level)avg_level 
```

如何让它返回浮点值？我尝试转换它，但我所有的行`avg_level`仍然是整数。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-19T17:29:25.493

尝试这样做：

```
AVG(Cast(e.employee_level as Float)) as avg_level 
```

我还发现[了这个](http://www.tek-tips.com/viewthread.cfm?qid=1512589)主题，您可以在其中找到另一种方法，但我没有使用它，也不知道确切是否有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T17:33:09.967

铸造更确定，但`...AVG(1.0 * e.employee_level)...`也可以这样做，并且可以更清晰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-02T08:05:56.870

返回的类型`AVG`取决于传递给函数的表达式的评估类型。

[![在此处输入图像描述](../Images/e143adff211505aa054c01e78d160c8f.png)](https://i.stack.imgur.com/P2qvx.png)

例如，如果您希望结果为`float`，则需要确保您的列或表达式类型为`float`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-09-03T08:31:04.383

AVG(Cast(e.employee_level as DECIMAL(10,O))

这将在 MYSQL 中起作用，您正在使用 ANS 将值设为 0 小数，因此假设 ANS 为 945.454，​​这将起作用，因此 AVG(Cast(e.employee_level as DECIMAL(10,O)) 将给出 945 和 AVG(Cast( e.employee_level 作为 DECIMAL(10,1)) 将给 945.5 希望你得到答案

# jquery-mobile - 确定 jQuery Mobile 的 pagebeforechange 事件的调用者

> ID：11106172
> 
> 赞同：2
> 
> 时间：2012-06-19T17:26:40.533
> 
> 标签：jquery-mobile

[我认为这与JQM pagebeforechange 和 event source](https://stackoverflow.com/questions/9179096/jqm-pagebeforechange-and-event-source)是同一个问题，但那里没有确凿的答案。

有谁知道如何获取触发事件的对象？

```
$(document).bind("pagebeforechange", function ( event , data) {
    //event is triggered from an anchor tag... 
    //Is it possible to get reference to anchor here?
}); 
```

谢谢。

更完整的例子：

```
<div data-role="page" id="ANGRY">
<div data-role="header">
    Solo Questions</div>
<div data-role="content">
    <fieldset data-role="controlgroup">
        <legend>Since your last scheduled prompt, how <strong>angry</strong> have you felt?</legend>
        <input type="radio" name="ANGRY" value="1" id="ANGRY1" />
        <label for="ANGRY1">
            None</label>
        <input type="radio" name="ANGRY" value="2" id="ANGRY2" />
        <label for="ANGRY2">
            Some</label>
        <input type="radio" name="ANGRY" value="3" id="ANGRY3" />
        <label for="ANGRY3">
            A Lot</label>
    </fieldset>
</div>
<div class="ui-grid-a">
    <div class="ui-block-a">
        <a href="#HAPPY" data-role="button" data-icon="arrow-l" data-iconpos="left">prev</a></div>
    <div class="ui-block-b">
        <a href="#IRRITABL" data-role="button" data-icon="arrow-r" data-iconpos="right">next</a></div>
</div>
</div> 
```

我希望能够确定是什么触发了 pagebeforechange 事件——“上一个”按钮或“下一个”按钮。这样做的目的是在移动到下一页之前执行验证，而不是在返回上一页时执行验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-23T14:26:14.040

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T01:59:21.760

toPage 是否适用于此？

*   [http://jsfiddle.net/pK6GX/1/](http://jsfiddle.net/pK6GX/1/)

JS

```
$(document).bind("pagebeforechange", function ( event , data) {
    console.log('To Page: '+data.toPage);
});​ 
```

HTML

```
<div data-role="page" id="home">
    <p>Open up the console and Click the Info link</p>
    <ul>
        <li><a href="#info">Info</a></li>
    </ul>
</div>

<div data-role="page" id="info">
    <ul>
        <li><a href="#home">Home</a></li>
    </ul>
</div>​ 
```

# ruby-on-rails - 如何在 Ruby on Rails 应用程序中使用 JQuery Mobile

> ID：11106173
> 
> 赞同：1
> 
> 时间：2012-06-19T17:26:47.617
> 
> 标签：ruby-on-rails, jquery-mobile, dry

您的 routes.rb 文件是什么样的？

您如何处理移动与网络路由？你定义了某种命名空间吗？

应该有一个 mysite.com/mobile 目录吗？对此的 DRY 方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:03:00.353

我认为这可以让你走上正轨： [http ://railscasts.com/episodes/199-mobile-devices](http://railscasts.com/episodes/199-mobile-devices)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-23T21:41:22.857

你真的不需要额外的视图 - 只需将一堆`<% if mobile? %>`放入现有的视图中。

受[http://scottwb.com/blog/2012/02/23/a-better-way-to-add-mobile-pages-to-a-rails-site/](http://scottwb.com/blog/2012/02/23/a-better-way-to-add-mobile-pages-to-a-rails-site/)的启发，我将其添加到我的`application_controller.rb`：

```
def mobile?
  if session[:mobile_override]
    session[:mobile_override] == "1"
  else
    request.user_agent.downcase =~ /mobile|android|touch|webos|hpwos/
  end
end
helper_method :mobile? 
```

同一篇文章还说明了为什么在移动设备上使用自定义域/路由是一个坏主意。

# jquery - 如何在不使用与前进和后退箭头一起使用的 hashbang 的情况下添加页面转换？

> ID：11106174
> 
> 赞同：0
> 
> 时间：2012-06-19T17:26:50.703
> 
> 标签：jquery, ajax, html, transitions, asynchronous-pages

有问题的网站是新发布的[http://mry.com/](http://mry.com/)。我完全被难住了。即使使用前进和后退箭头，页面转换也可以工作，并且似乎标题图像和导航只加载一次，即使它看起来像标准站点结构中的 URL 更改。我认为这可能是一个异步 ajax 加载，但是没有 hashbangs 是如何实现的呢？任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:35:34.730

# HTML5 历史 API

您可以使用[HTML5 History API](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#Adding_and_modifying_history_entries)。

## history.pushState()

> 调用[`pushState()`](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#The_pushState%28%29.C2.A0method)与设置类似`window.location = "#foo"`，两者都将创建和激活与当前文档关联的另一个历史条目。但是，[pushState()](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#The_pushState%28%29.C2.A0method)还有其他一些优点。

## 窗口.popState

至于[window.popState](https://developer.mozilla.org/en/DOM/window.onpopstate)：

> 每次活动历史条目更改时，都会向窗口发送一个[popState事件。](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#The_popstate_event)如果被激活的历史条目是由[`pushState()`](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#The_pushState%28%29.C2.A0method)调用 replaceState 创建或受其影响，则 popstate 事件的 state 属性包含历史条目状态对象的副本。

## 浏览器兼容性

[您可以在此处](https://github.com/balupton/history.js/wiki/The-State-of-the-HTML5-History-API)找到有关 HTML5 History API 状态的贡献 wiki 。

## 填充物和其他

[pjax](https://github.com/defunkt/jquery-pjax)和[History.js](https://github.com/balupton/history.js)似乎是一个很好的选择。

[GitHub Tree Slider](https://github.com/blog/760-the-tree-slider)帖子是一篇不错的快速阅读文章。

# ios - iOS UIWebVIew @font-face 与阿拉伯语

> ID：11106180
> 
> 赞同：2
> 
> 时间：2012-06-19T17:27:13.217
> 
> 标签：ios, uiwebview, font-face, arabic

我有一个包含 webview 的 iPhone 应用程序。此 webview 呈现一个[XHTML](http://en.wikipedia.org/wiki/XHTML)文件，其中包含一些具有 CSS 样式的阿拉伯文本。其他字体类型的样式都可以正常工作，如果我将包含的文本更改为英文，字体类型就可以正常工作。

阿拉伯字体有什么问题？

例子：

```
@font-face {
    font-family: "AHRAM";
    font-style: normal;
    font-weight: bold;
    src:url("../Fonts/andlso.ttf") format("truetype");
}

@font-face {
    font-family: "DroidSans";
    font-style: normal;
    font-weight: normal;
    src:url("../Fonts/arabtype.ttf") format("truetype");
}
@font-face {
    font-family: "DroidSansFallback";
    font-style: normal;
    font-weight: normal;
    src:url("../Fonts/A_Nefel_Adeti.ttf") format("truetype");
}

p.line1 {
    font-family: "AHRAM";
}

p.line2 {
    font-family: "DroidSans";
}

p.line3 {
    font-family: "DroidSansFallback";
}

    <head>
        <link href="../Styles/p1.css" rel="stylesheet" type="text/css" />
    </head>

    <body>
        <p class="line1"> أهلاً بكم </p>
        <p class="line2"> أهلاً بكم </p>
        <p class="line3"> أهلاً بكم </p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:04:36.210

这似乎是iOS中的一个错误。

有关更多详细信息和可能的解决方法，请在此处查看我的答案： [https ://stackoverflow.com/a/4361653/73195](https://stackoverflow.com/a/4361653/73195)

# c# - “Microsoft.Win32.Registry”是一种“类型”，但用作“变量”

> ID：11106181
> 
> 赞同：3
> 
> 时间：2012-06-19T17:27:21.890
> 
> 标签：c#, vb.net, c#-4.0

我正在尝试将一些 VB.net 代码转换为 C#，并且在尝试转换这一行时遇到问题。

VB.NET

```
Dim myreg As Microsoft.Win32.Registry 
```

我知道它是静态的，所以我无法创建实例，但是当我尝试将 VB.NET 转换器转换为 C# 时，网站给了我这个：

```
Microsoft.Win32.Registry myreg = null; 
```

并给我一条错误消息：'Microsoft.Win32.Registry' 是一种'类型'，但用作'变量'

在 VB.NET 函数的最后一部分中，使用了 myreg：

```
Finally
  myreg = Nothing
End Try 
```

这是整个功能：

```
Imports System.Data.OleDb
Imports System.Data
Imports Microsoft.Win32.RegistryKey
Imports MyLogger 'custom reference, not worried about this.

Private Function getRegistryString(ByVal sVal As String, Optional ByVal sKey As String = "") As String
    Dim myreg As Microsoft.Win32.Registry
    Dim s As String
    Try
        s = myreg.LocalMachine.OpenSubKey(sKey).GetValue(sVal)
    Catch ex As Exception
        l.EventLog(ex.Message, EventLogEntryType.Error)
        Throw ex
    Finally
        myreg = Nothing
    End Try
    Return s
    s = Nothing
End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T17:36:20.280

`Microsoft.Win32.Registry`是一个静态类，所以你不能实例化它。

[http://msdn.microsoft.com/library/microsoft.win32.registry.aspx](http://msdn.microsoft.com/library/microsoft.win32.registry.aspx)

编辑：应该是评论而不是答案。对不起，我还是这个网站的新手。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T17:38:23.123

在 VB.NET 中，无法定义*共享*（静态）类。但是，在 C# 中，您可以指定一个类是静态的。当一个类是静态的时，它强制它的所有成员也是静态的。如果你试图声明一个静态类型的变量，编译器会给你一个错误。

然而，在 VB 中，由于没有共享类之类的东西，它总是允许您声明任何类型的变量，即使它完全没有意义，因为实例没有成员。

无需将变量声明为 type `Registry`，您需要更改代码以仅使用`Registry`类名本身。将变量设置`Nothing`为 没有意义，因为变量从不存储对对象的引用。它总是`Nothing`。

你的函数应该是这样的：

```
Private Function getRegistryString(ByVal sVal As String, Optional ByVal sKey As String = "") As String
    Dim s As String
    Try
        s = Microsoft.Win32.Registry.LocalMachine.OpenSubKey(sKey).GetValue(sVal)
    Catch ex As Exception
        l.EventLog(ex.Message, EventLogEntryType.Error)
        Throw ex
    End Try
    Return s
End Function 
```

# gridview - Ext JS 4：更新网格的分页工具栏

> ID：11106182
> 
> 赞同：1
> 
> 时间：2012-06-19T17:27:37.973
> 
> 标签：gridview, extjs, extjs4, store, paging

如果其基础存储发生更改，我正在尝试更新分页工具栏的信息。假设我有以下代码。

```
Ext.Loader.setConfig({
  enabled: true
});

Ext.Loader.setPath('Ext.ux', 'examples/ux');
Ext.require(['Ext.ux.data.PagingMemoryProxy']);

Ext.onReady(function() {
  var data = [
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'}   
  ];

  Ext.define('model', {
    extend: 'Ext.data.Model',
    fields: [
      {name: 'name', type: 'string'},
      {name: 'phone', type: 'string'}
    ]
  });

  var store = Ext.create('Ext.data.Store', {
    model: 'model',
    proxy: {
      type: 'pagingmemory'
    },
    extraParams: {
      start: 0,
      limit: 1
    },
    //data: data,  // uncomment this
    pageSize: 7,
    remoteSort: false
  });

  Ext.define('mygrid', {
    extend: 'Ext.grid.Panel',
    store: store,  // initially just an empty store
    id: 'grid',
    dockedItems: [{
      xtype: 'pagingtoolbar',
      dock: 'bottom',
      store: store,
      displayInfo: true
    }],
    columnLines: true,
    height: 700,
    columns: [{
      header: 'Name',
      dataIndex: 'name',
      flex: 1,
      align: 'center'
    }, {
      header: 'Phone',
      dataIndex: 'phone',
      flex: 1,
      align: 'center'
    }]
  });

  Ext.create('Ext.Viewport', {
    layout: 'border',
    title: 'My viewport!',
    items: [{
      region: 'center',
      items: [Ext.create('mygrid')]
    }]
  });

  store.loadRawData(data);  // comment this out
  /*grid.addDocked({
    xtype: 'pagingtoolbar',
    store: store,
    displayInfo: true,
    dock: 'bottom',
    pageSize: 7
  });*/  // doesn't work
  //Ext.getCmp('grid').getDockedItems()[0].moveFirst();  // doesn't work
  //store.loadPage(1);  // doesn't work
}); 
```

运行此代码时，网格包含所有数据（无分页）。但是，如果您注释/取消注释我告诉您的行，则网格包含每页正确数量的数据。

我想知道的是，如何更新 PagingToolbar 以正确分页我添加到商店的数据？我尝试在 PagingToolbar 和 store.loadPage 函数上使用 moveFirst 函数，但这给了我一个 Firebug 错误“结果未定义”。我也试过[这个 SO 答案](https://stackoverflow.com/q/9076156/1253609)，但这似乎没有做任何事情......我尝试的最后一件事是在商店填充了它的数据之后添加一个 PagingToolbar ，但显然不行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:58:32.350

这是我的工作解决方案（更改上面有评论）。

```
Ext.Loader.setConfig({
  enabled: true
});

Ext.Loader.setPath('Ext.ux', 'examples/ux');
Ext.require(['Ext.ux.data.PagingMemoryProxy']);

Ext.onReady(function() {
  var data = [
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'},
    {name: 'john smith', phone: '4562135'},
    {name: 'blah blah', phone: '4445220'}   
  ];

  Ext.define('model', {
    extend: 'Ext.data.Model',
    fields: [
      {name: 'name', type: 'string'},
      {name: 'phone', type: 'string'}
    ]
  });

  // Excluding the proxy from the store
  var store = Ext.create('Ext.data.Store', {
    model: 'model',
    pageSize: 7,
    remoteSort: false
  });

  Ext.define('mygrid', {
    extend: 'Ext.grid.Panel',
    store: store,  // initially just an empty store
    id: 'grid',
    dockedItems: [{
      xtype: 'pagingtoolbar',
      dock: 'bottom',
      store: store,
      displayInfo: true
    }],
    columnLines: true,
    height: 700,
    columns: [{
      header: 'Name',
      dataIndex: 'name',
      flex: 1,
      align: 'center'
    }, {
      header: 'Phone',
      dataIndex: 'phone',
      flex: 1,
      align: 'center'
    }]
  });

  Ext.create('Ext.Viewport', {
    layout: 'border',
    title: 'My viewport!',
    items: [{
      region: 'center',
      items: [Ext.create('mygrid')]
    }]
  });

  // Manually setting the proxy and loading the store
  store.setProxy({
    type: 'pagingmemory',
    data: data
  });
  store.load();
}); 
```

我已经从 store 的定义中排除了代理，当需要在 store 中加载数据时，我调用 setProxy 函数，将其声明为 pagingmemory，并设置数据。然后你必须加载商店。

不太确定为什么 loadData/loadRawData 不起作用...我试图在 Firebug 中跟踪它们，只看到数据没有在核心 Ext 代码中的某个地方定义，但如果我在商店中对数据进行了硬编码，那就是定义（在同一行代码中）......猜它可能是一个错误？不管怎样，这个修复对我有用。

# azure - 无法解析 Microsoft.WindowsAzure.StorageClient

> ID：11106191
> 
> 赞同：1
> 
> 时间：2012-06-19T17:28:09.783
> 
> 标签：azure, azure-web-app-service

我有一个通过 git 部署的 Azure-Web-Site 设置，但是当我这样做时，我收到一个编译器错误，说明：

> D:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1360,9)：警告 MSB3245：无法解析此引用。找不到程序集“Microsoft.WindowsAzure.StorageClient，Version=1.7.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35，processorArchitecture=MSIL”。检查以确保该程序集存在于磁盘上。如果您的代码需要此引用，您可能会遇到编译错误。

这是一个单独的项目，而不是我的 MVC 项目，它确实有 Microsoft.WindowsAzure.StorageClient 作为参考，并且在我确实将其设置为 CopyLocal 的属性中

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:52:18.277

即使您将“Copy Local”属性设置为“true”，您仍然需要确保在将应用程序部署到 Windows Azure 时，所有文件都已部署。我相信关键是当你运行“git commit”时，确保列出所有将被推送的文件。

例如，当我运行**git commit -m "initial commit"**时，我可以验证下面是否包含与 Windows Azure 存储相关的参考：

![在此处输入图像描述](../Images/3349b00be474be6cfa7f35d409a3a291.png)

之后，当您调用**git push azure master**时，这些额外的引用肯定会被部署。

我在 Git 测试期间的所有步骤都记录在我的博客[Using Git to deploy an ASP.NET website 中，其中显示了 Windows Azure 网站上的 Windows Azure Blob 存储列表](http://blogs.msdn.com/b/avkashchauhan/archive/2012/06/19/using-git-to-deploy-an-asp-net-website-shows-windows-azure-blob-storage-list-at-windows-azure-websites.aspx)。

# bash - 如何在 BASH 中将目录中的所有文件转换为同名但格式不同的文件

> ID：11106194
> 
> 赞同：1
> 
> 时间：2012-06-19T17:28:18.173
> 
> 标签：bash, shell, unix

我有一个充满 JPEG 的目录。我想将它们中的每一个都转换为同名的 PNG。我试过`convert *.jpg *.png`了，但我最终得到了一堆名称为“ *-0.png”、“* -1.png”等的 PNG。

有没有办法在遍历整个目录时保留文件的名称？

任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T17:32:14.870

您可能需要 mogrify 命令而不是 convert 命令。

```
mogrify -format jpg *.png 
```

从`mogrify`手册页

> Mogrify 会覆盖原始图像文件，而 convert(1) 会写入不同的图像文件。

# wolfram-mathematica - 如何在 Mathematica 8.0 中使用 FORTRAN90 子程序？

> ID：11106198
> 
> 赞同：0
> 
> 时间：2012-06-19T17:28:37.973
> 
> 标签：wolfram-mathematica, fortran90

我正在做一个项目，我想使用一个 FORTRAN90 子程序来给我一些输出。我想使用这些输出来将它们与滑块和图表一起使用。这就是为什么输入将来自 Mathematica 接口，然后转到 FORTRAN90 子程序，最后输出将返回 Mathematica 进行可视化。

我阅读了有关 Mathlink 的信息，但我不知道如何在此应用程序中使用它。

有人已经回答了关于 stackoverflow 的类似问题，但这只是“一种方式”。

# objective-c - 在 MacOS 进入睡眠状态时收到通知

> ID：11106199
> 
> 赞同：1
> 
> 时间：2012-06-19T17:28:39.270
> 
> 标签：objective-c, macos, notifications, sleep

当我强制我的 Mac 进入睡眠状态时，我成功获得了 NSWorkspaceWillSleepNotification：但是，如果我的计算机在能量偏好中指定的一段时间后自行进入睡眠状态，则不会发出此通知。

有解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:42:09.643

As mentioned in my comment, I've been able to reproduce this on some computers but not others. From a very quick investigation, it looks like 10.7.4 doesn't send the notification on idle sleep unless I've also called IORegisterForSystemPower, but 10.6.8 does. So, it could be a bug in 10.7\. But, since my testing was pretty minimal, it could also be a bug in a specific hardware model, or something to do with strange settings that I didn't think of.

On the other hand, this could be intentional behavior—in which case I think there's a bug in the documentation. While it doesn't directly say that the notification is sent for both idle and forced sleep, but it certainly implies it.

The NSWorkspace notifications reference (can't get a URL because developer.apple.com seems to be down…) says it's "posted before the machine goes to sleep"—not "sometimes" or "only for forced sleep".

QA1340 (http://developer.apple.com/library/mac/#qa/qa1340/_index.html) discusses both kinds of sleep, and says that Cocoa can be used to receive notifications, without any hint that it only works for one kind. It gives sample code that should work, and that's what I used to reproduce the problem.

I'd strongly suggest filing a bug report with Apple, copying your bug report to [http://openradar.appspot.com](http://openradar.appspot.com), and opening a thread on Apple's dev forums. And, if you're a paid MDP member, try it on 10.8DP4.1, and start a thread in the NDA section of the dev forums. If 10.8 is still broken, your radar might lead to Apple fixing it before the final release, while it's unlikely to be fixed if nobody reports it.

# javascript - 在 javascript 中使用 .css() 设置细边框

> ID：11106205
> 
> 赞同：29
> 
> 时间：2012-06-19T17:29:18.220
> 
> 标签：javascript, jquery, colors, border

因此，当用户单击它们时，我试图在页面上的按钮周围设置边框。

要设置我要去的处理程序：

```
$(".reportButtons").click(function(){ //change border color }); 
```

我尝试了 2 种方法来更改其中按钮的边框颜色。第一种方法是使用 .css() 函数。

```
$(this).css({"border-color": "#C1E0FF", 
             "border-weight":"1px", 
             "border-style":"solid"}); 
```

但是当我这样做时，边框真的很胖（我希望它是细线，就像我将宽度设置为 1px 时一样）

我尝试过的另一种方法是下载 jquery-color 插件，然后执行以下操作：

```
$(this).animate({borderTopColor: "#000000"}, "fast"); 
```

当我这样做时，什么也没有发生。没有错误 - 只是没有任何反应。但是，如果我没有尝试更改边框颜色，而是尝试更改背景颜色，它工作正常......所以我使用 jquery-color 错误吗？作为参考，以下是我将如何更改背景：

```
$(this).animate({ backgroundColor: "#f6f6f6" }, 'fast'); 
```

就像我说的那样，这行得通。当我下载 jquery-color 时，我只下载了一个文件（jquery-color.js），如果这有什么不同的话......

那么我该如何获得发际线边框呢？（如果你知道如何让它工作，我更喜欢使用 animate() 方法）

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-06-19T17:33:54.633

## 当前示例：

你需要定义`border-width:1px`

您的代码应为：

```
$(this).css({"border-color": "#C1E0FF", 
             "border-width":"1px", 
             "border-style":"solid"}); 
```

## 建议示例：

理想情况下，您应该使用一个类和 addClass/removeClass

`$(this).addClass('borderClass');` `$(this).removeClass('borderClass');`

**在你的 CSS 中：**

```
.borderClass{
  border-color: #C1E0FF;
  border-width:1px;
  border-style: solid;
  /** OR USE INLINE
  border: 1px solid #C1E0FF;
  **/
} 
```

jsfiddle 工作示例：http: [//jsfiddle.net/gorelative/tVbvF/](http://jsfiddle.net/gorelative/tVbvF/) \

带有动画的 jsfiddle：http: [//jsfiddle.net/gorelative/j9Xxa/](http://jsfiddle.net/gorelative/j9Xxa/) 这只是给你一个例子，说明它是如何工作的，你应该明白了.. 最有可能有更好的方法来做到这一点.. 比如使用`toggle()`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T17:38:48.547

我建议使用类而不是设置 css 属性。所以代替这个：

```
$(this).css({"border-color": "#C1E0FF", 
             "border-width":"1px", 
             "border-style":"solid"}); 
```

定义一个 CSS 类：

```
.border 
{ 
  border-color: #C1E0FF; 
  border-width:1px; 
  border-style:solid; 
} 
```

然后将您的javascript更改为：

```
$(this).addClass("border"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-19T17:32:12.073

也许只是“边框宽度”而不是“边框重量”？没有“border-weight”，这个属性被忽略，而是使用默认宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-21T15:36:23.673

在与“SyntaxError: missing : after property id”消息斗争了几个小时后，我现在可以扩展这个主题：

border-width 是一个有效的 css 属性，但它不包含在 jQuery css oject 定义中，所以 .css({border-width: '2px'}) 会导致错误，但 .css({'border -width': '2px'})，大概是引号中的属性名称只是按接收方式传递。

# asp.net-mvc - 在 MVC 中为 Jquery 表转换为 JSON

> ID：11106206
> 
> 赞同：2
> 
> 时间：2012-06-19T17:29:23.590
> 
> 标签：asp.net-mvc, json, asp.net-mvc-3

我正在使用现有数据库在 MVC 中编写应用程序。我成功地将数据库与 EF 并通过脚手架连接起来。表格显示在视图中。

我想要 Jquery 插件，Datatable 用于排序和过滤。但他们需要 JSON 格式的数据。我环顾四周，没有找到将现有数据库中的值转换为 JSON 的可靠方法。

我看到了一些教程，其中添加了 DBController 和 DataService 等 WebAPI 属性并将其转换为 JSON。我无法通过这种方式工作...

所以我想知道如何将视图中的值转换为 JSON 的方法。如果我添加了很多不需要的信息，我很抱歉。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:32:22.230

```
var jsonData = @Html.Raw(new JavaScriptSerializer().Serialize(Model)); 
```

这是[JavaScriptSerializer Class](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)的 MSDN 文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T04:05:37.433

如果您想在视图中进行 JSON 转换，那么您可以按照 @Aleksey 的回答进行操作。您告诉您正在使用 jquery 插件（jquery 表？），因此您可能需要控制器操作来返回数据以将网格填充为 JSON？在这种情况下，您可以在控制器中执行返回 Json 操作结果的操作，并且您无需直接使用 JavaScript 序列化程序进行任何转换（这将由框架为您完成）。

例如。

```
public JsonResult GetDataToFillGrid(parameters)
{
  var dataCollection = .. get from db

  return Json(dataCollection, JsonRequestBehavior.AllowGet);
} 
```

`JsonRequestBehavior.AllowGet`您必须用于 GET 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T04:38:03.323

您的 Jquery DataTable 位于视图中，我们应该始终避免在视图内处理数据。View 应该只显示从 Controller 传递的数据。

话虽如此，您应该在控制器中创建一个方法，按照 Mark 的建议将结果作为 Json 对象返回。

# javascript - 使用 jQuery 让页面延迟重新加载

> ID：11106208
> 
> 赞同：0
> 
> 时间：2012-06-19T17:29:24.917
> 
> 标签：javascript, jquery, html

我想在提交表单时设置 3 秒延迟。现在，在提交时，标准文本会淡出，通知文本会淡入，但页面会在您有机会阅读之前重新加载。

```
<script type="text/javascript"> function changeText() { 
$('#free-planner').fadeOut('slow', function() {
       document.getElementById('free-planner').innerHTML = 'Check your email!';   }); {  $('#free-planner').fadeIn('slow', function() {  });    
 }   
} 
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T17:34:10.107

首先，阻止提交事件，然后在您准备好时以编程方式触发它。

```
$('form').on('submit', function(ev) {
  ev.preventDefault();
  form = $(this);
  fp = $('#free-planner');
  fp.fadeOut('slow', function () {
    fp.text('Check your email!').fadeIn('slow', function() {
      form.submit();
    });
  });
}); 
```

所有这些事情都应该在表单提交之后发生。也许您想要一个隐藏的 iframe 作为表单的目标？然后您可以提交表单而无需更新浏览器中的当前页面。就像是：

```
form = $('form');
$('body').append($('<iframe>').attr({ name:"hiddenifr", id:"hiddenifr" }).css({ display: 'none' }));

form.attr('target', 'hiddenifr');
form.on('submit', function(ev) {
  fp = $('#free-planner')
  fp.fadeOut('slow', function() {
    fp.text('Check your email!').fadeIn('slow');
  });
}); 
```

# iphone - 缺少预期的标识符警告消息

> ID：11106210
> 
> 赞同：0
> 
> 时间：2012-06-19T17:29:34.217
> 
> 标签：iphone

收到此语句的预期标识符的红色警告消息

```
CALayer = ImageView.layer; 
```

在下面的代码中使用上面的语句

```
// load all the frames of our animation
ImageView.animationImages = [NSArray arrayWithObjects:    
                             [UIImage imageNamed:@"2a.png"],
                             [UIImage imageNamed:@"2b.png"],
                             [UIImage imageNamed:@"2c.png"],
                             nil];

// all frames will execute in 28 seconds
ImageView.animationDuration = 28;
// start animating
[ImageView startAnimating];
[CALayer = [ImageView.layer]];
ImageView.layer.borderWidth = 2;
ImageView.layer.borderColor = [[UIColor whiteColor]CGColor];   
[ImageView.layer setMasksToBounds:YES];
[ImageView.layer setCornerRadius:15.0f];
[self.view addSubview:ImageView]; 
```

我在这里缺少什么。任何想法将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:37:38.483

```
[CALayer = [ImageView.layer]]; 
```

应该是这样的：

```
CALayer *myLayer = ImageView.layer; 
```

因为您不能只分配给类本身，所以您需要该类的对象。此外，您不需要括号进行分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:33:24.773

1）这是一个作业，所以它周围的方括号是错误的。

2) CALayer 不是一个变量，所以无论如何你都不能分配给它。

3) 属性引用`ImageView.layer`也不需要方括号。

# android - 以先进先出 (FIFO) 顺序从 sqlite 数据库中提取 Android

> ID：11106212
> 
> 赞同：1
> 
> 时间：2012-06-19T17:29:39.333
> 
> 标签：android, database, sqlite, querying

你好Stackoverflowers！

我像这样创建了一个简单的 sqlite 数据库。

```
//event table name
private static final String TABLE_EVENTS = "events";

//event table columns names
private static final String KEY_ID = "id";
private static final String KEY_EVENT = "event";

@Override
public void onCreate(SQLiteDatabase db) 
{
//String to define our database
String CREATE_EVENT_TABLE = "CREATE TABLE " + TABLE_EVENTS + "("
+ KEY_ID + " INTEGER PRIMARY KEY," + KEY_EVENT + " TEXT" + ")";

//create our database
db.execSQL(CREATE_EVENT_TABLE);
} 
```

我理解它是一个带有 id 列和 event 列的表。

在事件列中，我存储了一个转换为字符串的 JSONObject，我想以 FIFO（先进先出）的顺序从表中检索该字符串，这样如果我的应用程序崩溃，我可以在下次发送我存储的 JSONObjects应用程序已打开。

我可以使用以下方法毫无问题地插入表格：

```
public void addEvent(JSONObject event)
{
    //get our database so we can add to it
    SQLiteDatabase db = this.getWritableDatabase();

    //define content values to store our values
    ContentValues values = new ContentValues();

    //add our event to the ContentValues
    values.put(KEY_EVENT, event.toString());

    //insert a row
    db.insert(TABLE_EVENTS, null, values);

    //close the database connection
    db.close();
} 
```

我无法查询特定行或事件并从数据库中获取事件以及跟踪事件插入顺序的好方法，以便我可以按 FIFO 顺序将它们拉出。

示例代码特别有用，因为当我尝试查询时遇到语法错误，并且对 SQLite 不太熟悉。

任何帮助深表感谢！感谢您的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T17:41:49.170

你好 VinC 最好的方法是自动增加 id，这是你的主键，所以你可以这样做，

```
String CREATE_EVENT_TABLE = "CREATE TABLE " + TABLE_EVENTS + "("
+ KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT," + KEY_EVENT + " TEXT" + ")"; 
```

现在您可以使用 orderby Id 以升序查询数据库

```
database.query("TABLE_EVENTS", new String[]{"KEY_EVENT"},null,null, null, null,"KEY_ID ASC"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T17:38:37.227

通常插入的第一行位于表的顶部，因此如果您想在查询中使用 FIFO 查询整个表，您可以将排序顺序设置为按行 ID 升序排列，这意味着最新的行将位于底部和最老的在顶部

```
getContentLoader().query(DATABASENAME,new String[] {ID,EVENT},null,null,ID+" COLLATE LOCALIZED ASC"); 
```

这样，当您逐步浏览光标时，您将按照您想要的顺序获得列表，您可以使用它做任何您想做的事情

**编辑**

关于您遇到的错误，您需要这样做

```
if(cursor != null && cursor.moveToFirst()){
    do{
         String event = cursor.getString(0);
         //loops through all the elements in the cursor 
    }while(cursor.moveTONext());
}
cursor.close(); 
```

这可以防止强制关闭，因为它检查光标是否为空（其中没有任何内容）并且光标移动到第一个元素

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T17:52:11.320

您还可以有另一个名为“last_updated”的字段，它在插入期间以毫秒为单位插入时间戳。当您查询游标时，您可以按此字段排序。

# ios - iOS 继续完成任务

> ID：11106213
> 
> 赞同：0
> 
> 时间：2012-06-19T17:29:42.187
> 
> 标签：ios

我正在为我正在处理的应用程序实现一个提交队列。此应用程序旨在响应网络可用性的变化。如果队列中有对象，并且网络连接可用，则应用程序将开始提交队列中的对象，这在应用程序处于前台时完美运行。当应用程序进入后台并且队列正在提交时，我想做的是让队列提交继续，直到它尝试提交所有这些。

我的队列提交方法是：

```
-(void)submitAll {
    dispatch_async( dispatch_get_global_queue(DISPTACH_PRIOROITY_DEFAULT,0) ^(void){
        self.submitting = TRUE;
        for ( id queueObject in theQueue ) {
             [self submitQueueObject:queueObject];
        }
        self.submitting = FALSE;
    });
} 
```

当应用程序进入后台时，是否可以继续上述循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:52:11.273

如果你能在大约 10 分钟内完成，那么你可以使用

```
UIApplication:beginBackgroundTaskWithExpirationHandler: 
```

移出前台后继续执行

# xcode - “self.navigationItem.hidesBackButton = YES”不适用于 UITabBarController

> ID：11106215
> 
> 赞同：2
> 
> 时间：2012-06-19T17:29:50.720
> 
> 标签：xcode, ios5, uinavigationcontroller, uitabbarcontroller, back-button

我有一个 UINavigationController，其中嵌套了一个 UITabBarController。我试图隐藏导航栏中的后退按钮，以便我可以用自定义按钮替换它。但是一旦选项卡之一是活动视图，我似乎无法这样做。

我试过了

```
[self.navigationItem setHidesBackButton:YES animated:NO]; 
```

但无济于事。

任何帮助将非常感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:54:56.780

如果您使用拖放，则可以只拖放一个导航栏，在其上放置一个按钮并为其添加选择器。仅当您在其上放置一个条形按钮项时，您才会遇到隐藏问题。但话又说回来，如果您不使用导航栏的内置属性，为什么还要使用它。

另一种解决方案是创建自定义栏或图像视图并使用您自己的图像或栏颜色加载。只需创建一个类似于导航栏的栏，uiimageview - setimage - 一些类似于导航栏的图像。而不是放置按钮 - 根据您的要求自定义按钮。

# c# - 将参数传递给页面

> ID：11106217
> 
> 赞同：2
> 
> 时间：2012-06-19T17:29:55.680
> 
> 标签：c#, asp.net, .net, query-string

我擅长 C#，但我还没有使用过 ASP.NET。我想将参数传递给页面，页面会将其打印给用户。我在我的应用程序中执行以下操作以传递 POST 类型的参数

```
WebRequest request = WebRequest.Create("http://www.website.com/page.aspx");
request.Method = "POST";
string post_data = "id=123&base=data";
byte[] array = Encoding.UTF8.GetBytes(post_data);
request.ContentType = "application/x-www-form-urlencoded";
request.ContentLength = array.Length; 
```

现在我已经传递了参数，如何从我的页面访问它们？另外，我的上述方法对于 asp.net 发布是否正确？我用 PHP 试过了，效果很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:35:13.680

在您的 aspx 页面的代码隐藏中，只需编写

```
string id = Request.Form["id"].ToString(); 
```

如果它是发布的数据，并且

```
string id = Request.Querystring["id"].ToString(); 
```

如果数据在 URL 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:42:56.967

要发布数据：

```
var request = (HttpWebRequest) WebRequest.Create("http://www.website.com/page.aspx");
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";

var postData = Encoding.UTF8.GetBytes("id=123&base=data");
request.ContentLength = postData.Length;

using (var requestStream = request.GetRequestStream())
{
    requestStream.Write(postData, 0, postData.Length);
} 
```

要读取 ASP.NET 项目上发布的数据：

```
var id = Int32.Parse(Request.Form["id"]);
var data = Request.Form["base"]; 
```

# php - 刷新随机页面时出现问题

> ID：11106219
> 
> 赞同：0
> 
> 时间：2012-06-19T17:30:12.277
> 
> 标签：php, html

我在**PHP**文件中找到了这个**随机页面**脚本。**当我在浏览器**上单击**刷新**（**重新加载**）时，很难**刷新**页面，这让我有点沮丧。每个**随机页面**都有一篇文章，有些页面有两张图片，但大多是一张图片。只有**3**篇文章。

 ******问题是它需要**2**或3次**单击**才能**刷新****页面**。没有按钮，它仅**在**您单击**浏览器**（**所有浏览器**）上的**“重新加载”**页面**或**访问该站点时刷新**页面。**为了让它工作，它总是需要至少**2**或**3 次点击**才能刷新。

 ******这是代码：

```
<?php
$pagesArray = array("article1.php", "article2.php", "article3.php");
$randNum = rand(0, count($pagesArray)-1);
echo $pagesArray[$randNum];
?> 
```

我也尝试修改脚本以使用**“shuffle”**

```
<?php
$pagesArray = array("article1.php", "article2.php", "article3.php");
shuffle($pagesArray);
echo $pagesArray[0];
?> 
```

并且还使用了**“array_rand”**

```
<?php
$pagesArray = array("article1.php", "article2.php", "article3.php");
array_rand($pagesArray);
echo $pagesArray[0];
?> 
```

有没有办法让代码变得更好？我只希望代码**刷新**不同的**页面**，而不是单击**2 或 3 次**以使其工作。我很感激任何关于如何使它正常工作的建议，或者任何例子都会让我看到全貌！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:52:26.817

我对 PHP 不熟悉，但如果您问在数组中选择随机元素的哪种方法最快，我猜这是选项 1。生成随机整数需要恒定时间，并返回数组的元素通过数组索引也应该花费恒定的时间。我不知道 shuffle 是如何实现的，但我很确定获得一个随机数会比 shuffle 一个元素数组花费更少的时间。无论如何，如果您的数组中只有几个元素，那么用户应该不会有明显的差异。

至于为什么它需要 2 或 3 次刷新才能“工作”，我猜这可能是因为你只是多次返回同一个页面。如果您可以获取用户当前在（或已访问）的页面，则可以在选择一个之前从数组中删除该项目。************

# java - GWT 2：如何将 Button 添加到 CellTable 的标题中？

> ID：11106223
> 
> 赞同：0
> 
> 时间：2012-06-19T17:30:41.373
> 
> 标签：java, gwt, header, celltable

我的任务是创建一个带有控件以添加新行的表。这个典型的控件应该由相应的一组 TextEdits 和一个“添加新行”按钮组成。

我使用细胞表。

我可以单独创建这个“添加小部件”，只需在某个面板中组合按钮和必要的字段，但我想尝试将它绑定到表格。我想使用 CellTable 来制作它。为此，我尝试利用 CellTable 的标题。我创建了一个 Header 并添加了一个 EditCellText 和 ButtonCell。我有两个问题：

*   该按钮未显示。而是显示 getValue() 方法返回的值。
*   我不知道如何处理单击该按钮。

[1] 最后，第一个问题是：**如何将按钮添加到 CellTable 的表头中，如何处理对该按钮的点击？**该按钮应该看起来像一个按钮，而不仅仅是一些点击区域。

[2] 可能还有另一种方法可以完成我的任务。**是否可以创建不同行包含不同按钮的 CellTable？**即第一行持有按钮“添加”，所有其他行持有按钮“删除”。GWT 能做到这一点吗？

[3] 还有一个问题。目前，我使用 Java 代码描述了 CellTable 的结构。即，我在创建父小部件时手动创建和添加列和标题对象。**是否可以用 XML 表示我的 CellTable 的结构，即使用一些 mySpecialCellTable.ui.xml 文件？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T09:45:33.483

```
public static class BtnHeader extends Header<String>{

    public BtnHeader(ButtonCell cell) {
        super(cell);

    }
     @Override
       public void onBrowserEvent(Context context, Element elem, NativeEvent nativeEvent)
       {
          int eventType = Event.as(nativeEvent).getTypeInt();
          if (eventType == Event.ONCLICK)
          {
             nativeEvent.preventDefault();
            updateHeader();
          }
       }
    @Override
    public String getValue() {
        return "Click!";
    }
    protected void updateHeader() {
        // TODO to redefine in a defiant class

    }

 } 
```

在你的代码中

```
BtnHeader header = new BtnHeader(new ButtonCell()){
                @Override
                protected   void updateHeader(){
                    // Actions when clicking button
                }

cTable.addColumn(column, header); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T06:01:48.803

要在表格中显示按钮，您可以使用 ButtonCell：

```
Column<MyObject, String> delete = new Column<MyObject, String>(new ButtonCell()) {

            @Override
            public String getValue(final MyObjectobject object) {
                return "delete";
            }
        };

        delete.setFieldUpdater(new FieldUpdater<MyObject, String>() {

            @Override
            public void update(final int index, final MyObjectobject object, final String value) {

                myActivity.delete(object); // to whatever should happen if button is clicked
            }
        }); 
```

这也应该回答第二个问题。据我所知，您必须在 java 类中添加列。在您的 uibinder 文件中，您只能将单元格表作为一个整体添加。

```
<p1:CellTable ui:field="table"></p1:CellTable> 
```

希望这可以帮助。

# objective-c - 如何在 void 之间投射块 *

> ID：11106224
> 
> 赞同：14
> 
> 时间：2012-06-19T17:30:48.737
> 
> 标签：objective-c, casting, objective-c-blocks, void-pointers

所以，我试图将一个块作为`NSAlert` `contextInfo`参数传递。

```
[myAlert beginSheetModalForWindow: theWindow
                    modalDelegate: myAlert
                   didEndSelector: @selector(alertDidEnd:returnCode:contextInfo:)
                      contextInfo: (void *) aBlock]; 
```

并在另一端取回：

```
void (^responseBlock)() = (__bridge_transfer void (^)()) contextInfo; 
```

这在一定程度上有效。在我调用`beginSheetModalForWindow:...`aBlock之前`0x00007fff610e1ec0`，在响应 ( `alertDidEnd:...`) 中，contextInfo 是在`0x00007fff610e1ec0`。

但是，当我尝试调用该块时：

```
responseBlock(); 
```

我收到以下错误

> 错误：调用对象类型“__block_literal_generic *”不是函数或函数指针
> 错误：1 解析表达式错误

`void *`为了简单的转移，如何正确地将块转换为 from ？

**编辑：** 完整的尝试代码，使用答案中建议的强制转换方法。我现在在通话中收到 EXC_BAD_ACCESS 错误`responseBlock();`。

```
- (void)alertDidEnd:(NSAlert *)alert returnCode:(NSInteger)returnCode contextInfo:(void *)contextInfo
{
    void (^responseBlock)() = (__bridge typeof(responseBlock)) contextInfo;

    switch (returnCode)
    {
        case NSCancelButton:
        {
            break;
        }

        case NSOKButton:
        {
            responseBlock();
            break;
        }
    }
} 
```

**其他说明：** 使用时和`__bridge`的内存地址不同，使用时相同。两者都不能缓解 EXC_BAD_ACCESS 问题。`responseBlock``contextInfo``__bridge_transfer`

# 在职的：

```
[myAlert beginSheetModalForWindow: theWindow
                    modalDelegate: myAlert
                   didEndSelector: @selector(alertDidEnd:returnCode:contextInfo:)
                      contextInfo: (__bridge_retained void *) [aBlock copy]]; 
```

然后...

```
void (^responseBlock)() = (__bridge_transfer typeof(responseBlock)) contextInfo; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T17:37:45.010

这是一个小例子。我认为您的代码的问题在于您正在尝试使用`__bridge_transfer`不是`void *`由 ARC 管理的内存：

```
void takesBlock(void *asPointer)
{
    void (^asBlock)() = (__bridge typeof asBlock) asPointer;

    asBlock();
}

int main()
{
    @autoreleasepool {
        takesBlock((__bridge void *)[^{
            NSLog(@"Hello World!");
        } copy]);
    }
} 
```

# windows-phone-7 - Windows Phone 7.5 - 按下按钮

> ID：11106227
> 
> 赞同：0
> 
> 时间：2012-06-19T17:31:08.610
> 
> 标签：windows-phone-7, windows-phone-7.1

好的，当您按下按钮（图像）或活动磁贴时会产生效果，当您按下它时会产生效果 - 它会下降，我想在我的应用程序中实现它，但我不知道它是什么叫做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:37:01.183

[这是Silverlight for Windows Phone 工具包](http://silverlight.codeplex.com/)中的 TiltEffect

# javascript - 为什么我的本地 javascript 代码没有在本地 HTML 5 文件上运行？

> ID：11106228
> 
> 赞同：0
> 
> 时间：2012-06-19T17:31:12.640
> 
> 标签：javascript

代码完全复制在下面。

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Avaliações</title>
    <script type="text/javascript" src="jquery-1.7.2-min.js" />
    <script type="text/javascript" src="jquery.xslt.js" />
</head>
<body>
    <script type="text/javascript">
        alert('123');
        $(function(){
            alert('affe');
            $('body').xslt({xmlUrl: 'xxx.xml', xslUrl: 'xxx.xsl'});
        });
    </script>
</body>
</html> 
```

为什么连警报都不起作用？

编辑2：没关系，当包含 jQuery 时，这是我这边的输入错误......当 XLST 插件警告我未定义的 jQuery 和 $ 时，我意识到它是这样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:35:01.263

因为使用“ /> ”不适用于 javascript。不幸的是，你需要把

```
 <script type="text/javascript" src="jquery-1.7.2-min.js"></script> 
```

对于您的两个 javascript 文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T17:34:27.830

很确定`<script>`标签不能使用短格式语法。所以

```
<script type="text/javascript" src="jquery-1.7.2-min.js" />
<script type="text/javascript" src="jquery.xslt.js" /> 
```

应该

```
<script type="text/javascript" src="jquery-1.7.2-min.js"></script>
<script type="text/javascript" src="jquery.xslt.js"></script> 
```

# git - 使用 svn.pushmergeinfo 进行合并的 git-svn 工作流

> ID：11106229
> 
> 赞同：11
> 
> 时间：2012-06-19T17:31:17.587
> 
> 标签：git, svn, merge, git-svn, mergeinfo

使用 git-svn 合并 svn 跟踪分支的正确工作流程是什么。我已经阅读了一些关于 git-svn svn.pushmergeinfo 配置键的信息，注意事项是：

来自[http://www.kernel.org/pub/software/scm/git/docs/git-svn.html](http://www.kernel.org/pub/software/scm/git/docs/git-svn.html)：

> 配置键：svn.pushmergeinfo
> 
> 此选项将导致 git-svn 尝试在可能的情况下自动填充 SVN 存储库中的 svn:mergeinfo 属性。目前，这只能在 dcommitting 非快进合并时完成，其中除了第一个之外的所有父级都已被推入 SVN。

所以我的正常工作流程是：

假设我有一个 SVN 分支 ^/branches/feature_branch

```
# Ensure git-svn is configured to populate svn:mergeinfo
git config --global svn.pushmergeinfo true   

# Update my local svn remotes state
git svn fetch

# Track a local branch against a remote SVN backed ^/branches/feature_branch 
git checkout -b local_feature_branch remotes/feature_branch

# Modify files and commit to local git repo
git commit -a -m "changes"
# Push changes to SVN branch ^/branches/feature_branch
git svn dcommit 
```

然后将 ^/trunk 合并到我的 local_feature_branch 中，我假设我做了类似的事情？

```
# Sync to the latest SVN
git svn fetch
# Rebase "master" which is tracking the remote SVN ^/trunk
git checkout master
git svn rebase

# Checkout the local_feature_branch
git checkout local_feature_branch

# Merge "master" into "local_feature" which is tracking ^/trunk
git merge --squash master
git commit -m "merge master which is tracking SVN ^/trunk"

# Dry run the dcommit to SVN which should include svn:mergeinfo property changes
git svn dcommit --dry-run

# Commit merge to trunk
git svn dcommit 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-20T10:36:19.670

一起使用*merge --squash*和*svn.pushmergeinfo*没有多大意义。使用 merge --squash，生成的提交不会是合并提交，因此后续的*dcommit*不会创建任何合并信息。

我知道 stackoverflow 上的（主要是较旧的）线程建议使用 --squash，但我认为这在很大程度上是过去的遗物。我一直在使用 git-svn 管理我们公司的 svn 存储库近一年，到目前为止，它在以下工作流程中运行良好：

我总是在合并之前确保我是最新的，并且为了安全起见，我没有任何本地未同步的提交：

```
# On local_feature_branch
# Update from SVN
git svn fetch && git svn rebase -l

# push pending commits
git svn dcommit 
```

然后我使用“远程”SVN 分支作为源进行“真正的”合并。这节省了切换分支和更新，并确保传入分支没有任何本地未同步提交：

```
# Create a real, non-forward merge commit
git merge --no-ff svn/trunk

# ... and push it to SVN, including mergeinfo
git svn dcommit 
```

此外，通过这种方式，合并会正确记录在本地历史记录中，因此后续合并不必处理先前解决的冲突。使用 --squash 您会在每次合并时重新遇到那些。

但是请注意，从 local_feature_branch 合并回主干时，mergeinfo 存在一个未解决的问题（即在 svn-speak 中重新集成）：[Git-SVN with svn.pushmergeinfo: how to Avoid self-referencing mergeinfo lines](https://stackoverflow.com/questions/9700998/git-svn-with-svn-pushmergeinfo-how-to-avoid-self-referencing-mergeinfo-lines)。这在我们的回购中很少发生，但到目前为止它并没有给我带来任何麻烦。

# c - malloc 错误处理

> ID：11106237
> 
> 赞同：5
> 
> 时间：2012-06-19T17:31:50.873
> 
> 标签：c, memory, memory-management, memory-leaks, malloc

`malloc`使用except在内存分配过程中可能发生的错误是什么`out of memory`？处理这些错误的最佳策略是什么？

`out of memory exception`即使内存分配失败，是否有必要释放指针？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T17:34:57.507

在 C 中没有例外（无论如何您都不能在语言中使用），因此`malloc`发出失败信号的唯一方法是返回空指针。所以你必须检查返回值。如果为 0，则分配失败（无论出于何种原因）并且没有分配内存 - 没有可释放的内存；否则请求数量（*）的分配成功，您将不得不在不再需要时释放内存。

(*) 小心溢出：`malloc`接受一个`size_t`参数，该参数很可能是一个无符号数。如果您请求`size * sizeof(int)`带无符号`size`的字节并且乘法溢出（可能在获取 的值时出错`size`），则结果是一个小数字。 `malloc()`将为您以非空返回分配这少量字节，并根据 的实际（大）值对返回的数组进行索引`size`，可能导致*分段错误*或其等效项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:01:26.363

[我意识到这看起来像是一个产品插件，但您可以在我们关于CheckPointer](http://www.semanticdesigns.com/Products/MemorySafety)的文章中阅读各种内存分配错误，我们的工具是查找内存管理错误，包括此类分配错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T17:55:42.813

内存不足是唯一可检测到的错误......其他错误（例如释放已释放的内存）可能导致崩溃。

在 C 中检查内存不足的一种策略是使用 malloc 和 realloc 的包装器（您可能称它们为 xmalloc 和 xrealloc）来检查内存不足，如果是，则采取错误操作……打印一条消息并退出，或者可能试图释放内存池，然后重试分配。这将所有测试放在一个地方，产生一致的失败消息，并保证检查所有分配尝试是否失败。下面的评论中讨论了可能的缺点。

从历史上看，这种策略在 C 代码中很少见（与用这种古老语言编写的代码中的普遍低质量一致），但现在一些成熟的库框架包含了这种东西（尽管实现留下了一些期望；再次，请参阅评论以下）。另一种非常可取的方法是放弃 C 并转向更现代的语言......可能是 C++，其中任何失败都会`new`导致`bad_alloc`异常。

至于你的问题......如果 malloc 失败，它返回 NULL；没有指向免费的指针。（free(NULL) 是无操作的）。如果 realloc 失败，则原始分配保持不变。您可以通过阅读手册页或规范来找到这些内容，例如[http://pubs.opengroup.org/onlinepubs/7908799/xsh/realloc.html](http://pubs.opengroup.org/onlinepubs/7908799/xsh/realloc.html)

# postgresql - Postgresql - 数字主键的人类可读别名

> ID：11106239
> 
> 赞同：1
> 
> 时间：2012-06-19T17:31:58.220
> 
> 标签：postgresql

像许多数据库一样，我有一张带有序列生成数字主键的人员表，因为名称不是唯一的：

```
ID  NAME  STUFF
---------------
101  Bob     20
102  Bob     30 
```

其他几个表将这些 ID 作为外键引用：

```
ORDER  PERSON  NOTE
-------------------
1       02     Blah
2       01     Foo 
```

（不能使用名称而不是 ID 作为 FK，因为 FK 必须引用具有唯一约束的列）。由于我的数据输入是手动的，因此使用 GUI（现在是 Mac 上的 pgAdmin 或 LibreOffice）在处理订单表时更容易看到人名而不是数字 ID。对于这个看似简单的问题，我已经想到了许多解决方案，但似乎没有一个很好：

A) 视图 - 不可编辑。我知道[如何使用触发器使视图可编辑，](http://www.postgresql.org/docs/9.1/static/plpgsql-trigger.html)但 AFAIK 没有 GUI 编辑器可以使用它来允许可编辑视图。

B) 向 Order 表中添加一个名称列，然后使用触发器使所有内容保持同步 - 这很诱人，但是我有重复的数据，并且当我的表结构演变时很头疼。如果 Order name 列使用触发器强制为只读，那就更好了，但仍然有很多陷阱。

C）我真正想要的是某种方式在显示人员 ID 和相应名称之间切换 GUI 编辑器，无论它们出现在什么任意表中，而不会影响底层数据的完整性。

希望这很清楚；如果需要，可以提供更多详细信息。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:58:50.830

您可以使用 Microsoft Access 和 postgres ODBC 驱动程序来实现这一点（至少在 Windows 上）。步骤以 2010 年为基础，但过程与 2003 年和 2007 年相同。

1.  将表链接到新的 Access 数据库并设置它们之间的关系。
2.  在设计视图中使用外键打开表格并切换到底部的设计选项卡。
3.  选择组合框而不是文本框。
4.  单击查询源，然后单击右侧的三个点。
5.  将具有主键的表添加到查询设计器
6.  添加您想要查看的列，然后添加带有 ID 的列
7.  关闭编辑器
8.  将 Bound 列更改为 2，因为您的第二列是关键

在这里，您可以根据您的问题找到一个小示例：（虽然没有 ODBC）[https://www.sugarsync.com/pf/D949685_2198453_6801553](https://www.sugarsync.com/pf/D949685_2198453_6801553)

# iphone - iPhone自定义leftBarButtonItem在popViewControllerAnimated上闪烁：YES

> ID：11106244
> 
> 赞同：2
> 
> 时间：2012-06-19T17:32:15.663
> 
> 标签：iphone, ios, uibarbuttonitem, viewdidload

我已将自定义后退按钮添加到我的 viewController。

```
UIImage *buttonImage = [UIImage imageNamed:@"button_back.png"];
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setImage:buttonImage forState:UIControlStateNormal];
    button.frame = CGRectMake(0, 0, buttonImage.size.width, buttonImage.size.height);
    [button addTarget:self action:@selector(backClicked:) forControlEvents:UIControlEventTouchUpInside];
    UIBarButtonItem *customBarItem = [[UIBarButtonItem alloc] initWithCustomView:button];
    self.navigationItem.leftBarButtonItem = customBarItem;
    [customBarItem release]; 
```

但是，leftBarButtonItem 正在闪烁：

```
-(void)backClicked:(id)sender{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

你能帮我在按下后退按钮时禁用闪烁吗？

# ruby - Rhomobile：没有从表单发布参数

> ID：11106257
> 
> 赞同：0
> 
> 时间：2012-06-19T17:33:23.587
> 
> 标签：ruby, rhomobile, rhodes

我有一个简单的表格，我想用它来搜索姓氏：

```
<form method="POST" action="<%= url_for :action => :index %>">
  <label for="surname" class="itemLabel">Search Surname</label>
  <input type="text" id="surname" name="surname" class="" <%= placeholder("Surname") %> />
  <input type="submit" value="Search"/>
</form> 
```

在控制器索引方法中，我有以下代码：

```
def index   
    if @params['surname'].nil? or @params['surname'].empty?
      @fencers = Fencer.find(:all) 
    else
      @fencers = Fencer.find(:all, :conditions => {:surname => @params['surname']})
    end
    render :back => '/app'
end 
```

如果它有一个姓氏参数，那么它会搜索，如果没有，它只会显示所有可用的。当我调试此操作时，在发布搜索表单后调用它时，我从未看到任何参数。

这个搜索表单基于自动生成的登录表单（有效），所以我有点困惑。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:22:27.927

尝试在控制器中发布到不同的操作，或将索引操作重命名为 [model]_index 之类的名称。

Rhodes 似乎喜欢处理传递给索引操作的查询参数。

我使用您的代码进行了快速测试，如果您将控制器方法更改为“index_new”，则参数将成功传递。

# php - 在指定 WHERE 之前没有 MySQL 结果

> ID：11106262
> 
> 赞同：0
> 
> 时间：2012-06-19T17:33:36.020
> 
> 标签：php, mysql, count

多年来，我一直在使用简单的 MySQL 命令，并且想使用更复杂的命令。我已经接受了重写我的一些旧代码的任务，但我看不到这里发生了什么。

我正在尝试将两个表合并为一个结果，第二个表仅提供“计数”。

```
TABLE customers:
customerID, name, boxID
TABLE codes:
boxID, code, retrieved 
```

我想要的正是我从 SELECT * FROM 客户那里得到的，但我想要一个额外的列，其中包含代码表中所有代码的 count()，其中 boxID 相同。

这是我当前的查询；

```
SELECT customers.*, count(codes.code) as codesused 
FROM customers 
INNER JOIN codes 
ON customers.boxID = codes.boxID
WHERE codes.retrieved = 1 
```

在我添加“WHERE customers.customerID = 'x'”之前，这会导致 NULL。谁能解释为什么我不能从上面的代码中得到我想要的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T17:39:55.473

当您将聚合函数与其他字段结合使用时，您必须使用 group by 子句。您可以像这样进行查询；

```
SELECT customerID, name, boxID, count(codes.code) as codesused 
FROM customers 
INNER JOIN codes ON customers.boxID = codes.boxID 
GROUP BY customerID, name, boxID, codesused
HAVING codes.retrieved = 1 
```

并且您不能将 where 子句与 group by 一起使用，因此您必须使用 HAVING

# java - Java：你什么时候想自定义序列化过程？

> ID：11106272
> 
> 赞同：2
> 
> 时间：2012-06-19T17:34:16.677
> 
> 标签：java, serialization, deserialization

在什么情况下，出于什么原因应该考虑定制`serialization`流程？（以下方法是将被调用的方法`JVM`）

```
 private void writeObject(java.io.ObjectOutputStream out){
         //customize serialization
 }
 private void readObject(java.io.ObjectInputStream in){
         //customize de-serialization
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:41:17.373

阅读SUN的[高级序列化](http://java.sun.com/developer/technicalArticles/ALT/serialization/)

1.  `readObject`覆盖and的一个常见原因`writeObject`是序列化不是`Serializable`其自身的超类的数据。
2.  验证流
3.  加密序列化对象

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T17:41:22.600

我在想一些你可能想要控制序列化的情况：

*   当您想要加密并稍后解密序列化数据时。
*   您还可能希望用户或其他应用程序修改对象的序列化形式，因此在这种情况下，您可能想要编写更人性化的东西。
*   如果您通过网络传输数据，您可能需要调整数据，以便另一端的程序可以理解它。

这些是我现在能想到的原因。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T18:38:08.130

One of advantages of customized serialization is possibility to add transient fields (like inherited from other classes) into serialization process. You can do it like this

```
class NotMyClass implements Serializable {
    String login;
    transient String password;
    //...    
}

//I want to serialize also transient password field
class MyClass extends NotMyClass {

    private void writeObject(ObjectOutputStream out) throws IOException {
        System.out.println("defaul serialization");
        out.defaultWriteObject();

        System.out.println("my serialization >>>> adding inherited transient value");
        out.writeObject(password);
    }

    private void readObject(ObjectInputStream in) throws IOException,
            ClassNotFoundException {
        System.out.println("defaul deserialization");
        in.defaultReadObject();
        System.out.println("my deserialization <<<< reading stored transient value");
        password = (String) in.readObject();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T17:40:39.387

您可能希望在读取或写入时自定义您想要执行的操作——您可以添加额外的日志记录，您可以执行计算，您可能只想在满足某些条件时读取或写入，等等。真的，您可以做任何 Java 允许的事情。例如，请参阅[http://java.sun.com/developer/technicalArticles/Programming/serialization/上的“自定义默认协议”部分](http://java.sun.com/developer/technicalArticles/Programming/serialization/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T17:34:17.160

我能想到的唯一原因是当你希望你的子类`serialization`在超类已经是 void 时失效`serializable`，然后你可以简单地在子类的两个方法中抛出异常。

我不确定是否还有其他具体原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T18:08:22.230

另一个重要原因是当您想要减少被序列化的数据量时。以容量为 1024 的 a 为例`HashMap`。假设到目前为止它只有 3 个条目。序列化一个`Object`1024 的数组会非常浪费，因为它需要做的就是序列化三个条目。

另外，如果您正在序列化的对象引用了不可序列化的服务，您首先将这些成员标记为瞬态（以防止序列化），然后使用`writeObject`捕获足够的信息，以便`readObject`可以重新建立引用反序列化。

# ios - 在 Adob e AIR 移动应用程序上，IOS 会加载带有 actionscript 的外部 swf 吗？

> ID：11106274
> 
> 赞同：0
> 
> 时间：2012-06-19T17:34:20.127
> 
> 标签：ios, air, adobe, flash

我有大量包含资产的旧 swf 文件，需要在 IOS 的 AIR 应用程序中显示。一些资产包含简单的动作脚本代码，主要是 stop()。我真的不在乎 swf 中的动作脚本是否被执行。问题是 - 如果我尝试加载包含 actionscript 的 swf，它会加载吗？

我的意思是，我可以看到它在 Ad-Hoc 版本上加载，但是当我发布到应用商店时它会加载吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T06:30:16.967

**如果某些东西适用于 Ad-Hoc，它肯定会适用于 App Store。**唯一的潜在问题是 Apple 审核，在此期间他们可以确定您的应用程序不适合 App Store。

# eclipse - java.sql.SQLException：没有合适的驱动程序，启动tomcat服务器时

> ID：11106279
> 
> 赞同：1
> 
> 时间：2012-06-19T17:34:37.533
> 
> 标签：eclipse, tomcat, maven, sqlexception

我将一个正在运行的 Java Web 项目转换为基于 Maven 的项目，除了从 Eclipse 启动 tomcat 服务器外，一切正常。我收到一个奇怪的 SQLException：

```
... 
19.06.2012 17:09:08 org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: .:/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java
19.06.2012 17:09:08 org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNUNG: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.j2ee.server:IDATService' did not find a matching property.
19.06.2012 17:09:09 org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
19.06.2012 17:09:09 org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
19.06.2012 17:09:09 org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1372 ms
19.06.2012 17:09:09 org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
19.06.2012 17:09:09 org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.27
19.06.2012 17:09:09 org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/Users/wessamkais/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp1/wtpwebapps/IDATService/WEB-INF/lib/servlet-api-2.4.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
2012-06-19 17:09:10,786 [pool-2-thread-1] DEBUG [pool-2-thread-1] (Ejb3Configuration.java:<clinit>:142) - Logging Provider: org.jboss.logging.Log4jLoggerProvider
2012-06-19 17:09:10,858 [pool-2-thread-1] DEBUG [pool-2-thread-1] (BasicTypeRegistry.java:register:143) - Adding type registration boolean -> 
…
…
com.mchange.v2.c3p0.PoolBackedDataSource@1054f25f [ connectionPoolDataSource -> com.mchange.v2.c3p0.WrapperConnectionPoolDataSource@c55aab83 [ acquireIncrement -> 5, acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> false, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, debugUnreturnedConnectionStackTraces -> false, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> 1hge1d28o1gucuz1ec93hy|673a95af, idleConnectionTestPeriod -> 10, initialPoolSize -> 3, maxAdministrativeTaskTime -> 0, maxConnectionAge -> 0, maxIdleTime -> 5000, maxIdleTimeExcessConnections -> 0, maxPoolSize -> 25, maxStatements -> 0, maxStatementsPerConnection -> 0, minPoolSize -> 5, nestedDataSource -> com.mchange.v2.c3p0.DriverManagerDataSource@28fe56fb [ description -> null, driverClass -> null, factoryClassLocation -> null, identityToken -> 1hge1d28o1gucuz1ec93hy|4599d5b, jdbcUrl -> jdbc:mysql://127.0.0.1:3306/testIDAT, properties -> {user=******, password=******, autocommit=true, release_mode=auto} ], preferredTestQuery -> null, propertyCycle -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> false, unreturnedConnectionTimeout -> 0, usesTraditionalReflectiveProxies -> false; userOverrides: {} ], dataSourceName -> null, factoryClassLocation -> null, identityToken -> 1hge1d28o1gucuz1ec93hy|19e06de8, numHelperThreads -> 3 ]
2012-06-19 17:09:13,172 [pool-2-thread-1] DEBUG [pool-2-thread-1] (BasicResourcePool.java:incrementPendingAcquires:404) - incremented pending_acquires: 5
2012-06-19 17:09:13,172 [pool-2-thread-1] DEBUG [pool-2-thread-1] (BasicResourcePool.java:<init>:289) - com.mchange.v2.resourcepool.BasicResourcePool@42bc0eba config: [start -> 3; min -> 5; max -> 25; inc -> 5; num_acq_attempts -> 30; acq_attempt_delay -> 1000; check_idle_resources_delay -> 10000; mox_resource_age -> 0; max_idle_time -> 5000000; excess_max_idle_time -> 0; destroy_unreturned_resc_time -> 0; expiration_enforcement_delay -> 900000; break_on_acquisition_failure -> false; debug_store_checkout_exceptions -> false]
2012-06-19 17:09:13,173 [pool-2-thread-1] DEBUG [pool-2-thread-1] (BasicResourcePool.java:prelimCheckoutResource:538) - acquire test -- pool size: 0; target_pool_size: 5; desired target? 1
2012-06-19 17:09:13,173 [pool-2-thread-1] DEBUG [pool-2-thread-1] (BasicResourcePool.java:awaitAvailable:1291) - awaitAvailable(): [unknown]
2012-06-19 17:09:13,173 [com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0] DEBUG [com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0] (BasicResourcePool.java:run:1831) - An exception occurred while acquiring a poolable resource. Will retry.
java.sql.SQLException: No suitable driver
    at java.sql.DriverManager.getDriver(DriverManager.java:264)
    at com.mchange.v2.c3p0.DriverManagerDataSource.driver(DriverManagerDataSource.java:223)
    at com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:134)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:182)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:171)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:137)
    at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1014)
    at com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourcePool.java:32)
    at com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask.run(BasicResourcePool.java:1810)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)
2012-06-19 17:09:13,174 [com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1] DEBUG [com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1] (BasicResourcePool.java:run:1831) - An exception occurred while acquiring a poolable resource. Will retry.
java.sql.SQLException: No suitable driver
    at java.sql.DriverManager.getDriver(DriverManager.java:264)
    at com.mchange.v2.c3p0.DriverManagerDataSource.driver(DriverManagerDataSource.java:223)
    at com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:134)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:182)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:171)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:137)
    at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1014)
    at com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourcePool.java:32)
    at com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask.run(BasicResourcePool.java:1810)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)
2012-06-19 17:09:13,184 [pool-2-thread-1] DEBUG [pool-2-thread-1] (BasicResourcePool.java:trace:1644) - trace com.mchange.v2.resourcepool.BasicResourcePool@42bc0eba [managed: 0, unused: 0, excluded: 0]
2012-06-19 17:09:13,174 [com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2] DEBUG [com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2] (BasicResourcePool.java:run:1831) - An exception occurred while acquiring a poolable resource. Will retry.
java.sql.SQLException: No suitable driver
    at java.sql.DriverManager.getDriver(DriverManager.java:264)
    at com.mchange.v2.c3p0.DriverManagerDataSource.driver(DriverManagerDataSource.java:223)
    at com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:134)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:182)
    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:171)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:137)
    at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1014)
    at com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourcePool.java:32)
    at com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask.run(BasicResourcePool.java:1810)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547) 
```

我正在使用 MySQL、Tomcat、Eclipse，这是我新写的 pom：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>eu.paedrtx.register.server</groupId>
    <artifactId>IDATService</artifactId>
    <packaging>war</packaging>
    <version>1.7-SNAPSHOT</version>
    <name>eu.paedrtx.register.server.IDATService</name>

    <dependencies>
        <dependency>
            <groupId>eu.paedrtx</groupId>
            <artifactId>Common</artifactId>
            <version>1.7-SNAPSHOT</version>
        </dependency>
        <!-- the dependencies needed for the projekt -->
        <dependency>
          <groupId>javax.servlet</groupId>
          <artifactId>servlet-api</artifactId>
          <version>2.4</version>
          <scope>provided</scope>
        </dependency> 

        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
        </dependency>

        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <version>2.1</version>
        </dependency>

        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-lang3</artifactId>
            <version>3.1</version>
        </dependency>   

        <dependency>
            <groupId>com.google.code.gson</groupId>
            <artifactId>gson</artifactId>
            <version>1.7.1</version>
        </dependency>

        <!-- Update to the newest relese -->
        <dependency>
            <groupId>com.google.guava</groupId>
            <artifactId>guava</artifactId>
            <version>10.0.1</version>
        </dependency>

        <dependency>
            <groupId>com.google.inject</groupId>
            <artifactId>guice</artifactId>
            <version>3.0</version>
        </dependency>

        <dependency>
            <groupId>com.google.inject.extensions</groupId>
            <artifactId>guice-persist</artifactId>
            <version>3.0</version>
        </dependency>

        <dependency>
            <groupId>com.google.inject.extensions</groupId>
            <artifactId>guice-servlet</artifactId>
            <version>3.0</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-c3p0</artifactId>
            <version>${hibernateVersion}</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.2.0.Final</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${hibernateVersion}</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>${hibernateVersion}</version>
        </dependency>

        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-client</artifactId>
            <version>${jerseyVersion}</version>
        </dependency>

        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-core</artifactId>
            <version>${jerseyVersion}</version>
        </dependency>

        <dependency>
            <groupId>com.sun.jersey.contribs</groupId>
            <artifactId>jersey-guice</artifactId>
            <version>${jerseyVersion}</version>
        </dependency>

        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-json</artifactId>
            <version>${jerseyVersion}</version>
        </dependency>

        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-server</artifactId>
            <version>${jerseyVersion}</version>
        </dependency>

        <dependency>
            <groupId>joda-time</groupId>
            <artifactId>joda-time</artifactId>
            <version>2.0</version>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>
        <!-- update to 0.11 -->
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <version>${lombokVersion}</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.20</version>
        </dependency>

        <!-- slf4j dependencies of our dependencies - I think we can try to delete 
            it -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.6.1</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.6.1</version>
        </dependency>

        <dependency>
            <groupId>org.jadira.usertype</groupId>
            <artifactId>usertype.core</artifactId>
            <version>3.0.0.CR1</version>
        </dependency>

        <dependency>
            <groupId>org.jadira.usertype</groupId>
            <artifactId>usertype.spi</artifactId>
            <version>3.0.0.CR1</version>
        </dependency>

        <dependency>
            <groupId>com.jayway.restassured</groupId>
            <artifactId>rest-assured</artifactId>
            <version>1.6.1</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <!-- Generate compiled stuff in the folder used for development mode -->
        <outputDirectory>src/main/webapp/WEB-INF/classes</outputDirectory>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>false</filtering>
            </resource>
        </resources>
        <testResources>
            <testResource>
                <directory>src/test/resources</directory>
                <filtering>false</filtering>
            </testResource>
        </testResources>

        <plugins>

            <plugin>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>maven-jetty-plugin</artifactId>
                <version>6.1.22</version>
                <configuration>
                    <webAppConfig>
                        <contextPath>/</contextPath>
                        <baseResource implementation="org.mortbay.resource.ResourceCollection">
                            <!-- need both the webbapp dir and location where GWT puts stuff -->
                            <resourcesAsCSV>
                                ${basedir}/src/main/webapp,${project.build.directory}/${project.build.finalName}
                            </resourcesAsCSV>
                        </baseResource>
                    </webAppConfig>
                    <connectors>
                        <connector implementation="org.mortbay.jetty.nio.SelectChannelConnector">
                            <port>8080</port>
                            <host>127.0.0.1</host>
                        </connector>
                    </connectors>
                    <!-- the stopPort and stopKey are needed for the jetty:stop goal, which is used by mvn install and the integration-test -->
                    <stopPort>9966</stopPort>
                    <stopKey>foo</stopKey>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.7</version>  <!-- Note 2.8 does not work with AspectJ aspect path -->
                <configuration>
                    <encoding>${project.build.sourceEncoding}</encoding>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                    <wtpversion>2.0</wtpversion>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

我认为这与persistence.xml无关，因为在我转换为maven之前一切都运行良好，但预防性地这是我的persistence_unit：

```
<persistence-unit name="idat_unit" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5InnoDBDialect"/>
            <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver" />
            <property name="hibernate.connection.url" value="jdbc:mysql://127.0.0.1:3306/testIDAT" />
            <property name="hibernate.connection.username" value="testIDATUser" />
            <property name="hibernate.connection.password" value="test" />
            <property name="hibernate.hbm2ddl.auto" value="update"/>
            <!-- Automatic type resolver -->
            <property name="jadira.usertype.autoRegisterUserTypes" value="true"/>
            <!-- C3p0 connection pooling configuration -->
            <property name="hibernate.connection.provider_class" value="org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider"/>
            <property name="hibernate.c3p0.acquire_increment" value="5"/>
            <property name="hibernate.c3p0.idle_test_period" value="10"/>
            <property name="hibernate.c3p0.timeout" value="5000"/>
            <property name="hibernate.c3p0.max_size" value="25" />
            <property name="hibernate.c3p0.max_statements" value="0"/>
            <property name="hibernate.c3p0.min_size" value="5"/>
        </properties>
    </persistence-unit> 
```

# python - 安装和运行 pywin32 2.7 时出错

> ID：11106281
> 
> 赞同：18
> 
> 时间：2012-06-19T17:34:42.183
> 
> 标签：python, winapi, installation, pywin32

安装后出现几个错误：

> pywin32-217.win32-py2.7

我最近将 ArcGIS 升级到 10.1，它使用 Python 2.7（而不是 ArcGIS 10.0 附带的 2.6）

当我在 Windows 7 64 位上运行安装程序时，它会安装，但会抛出以下消息：

> 在文件对象析构函数中关闭失败：
> 
> sys.excepthook 丢失
> 
> 丢失 sys.stderr

我有一个简单的 python 脚本，可以从包含 .pdf 文件的文件夹打印到打印机，这些文件在升级之前就可以使用

```
import arcpy, glob, win32api, os

pdfLoc = arcpy.GetParameterAsText(0)

try:
    copies = int(arcpy.GetParameter(1))
except:
    copies = 1

for pdfname in glob.glob(os.path.join(pdfLoc, "*.pdf")):
    fullpath = os.path.join(pdfLoc, pdfname)
    for copy in range(copies):
        win32api.ShellExecute(0, "print", pdfname, None, ".", 0)

del fullpath
del pdfname
del pdfLoc 
```

现在，当我运行脚本时，出现以下错误：

> Traceback（最近一次调用最后）：文件“Z:\ESRI\Python\Solstice_Tools_Scripts\Printer_Tools\Batch_Print_From_PDF_Only\BatchprintFromPDFOnly_Test.py”，第 34 行，在 win32api.ShellExecute(0, "print", pdfname, None, ".", 0）错误：（31，'ShellExecute'，'连接到系统的设备不起作用。'）
> 
> 执行失败 (BatchPrintFromPDFOnly2)。

我一直在谷歌搜索并尝试了一些解决方案，例如在故障排除模式下运行可执行文件，但错误仍然存​​在。谁能建议可能导致这种情况的原因？

作为旁注，我将公司中的 4 台计算机升级到新版本的 python 和 ArcGIS，其中只有一台抛出此错误。其余的工作正常。

谢谢，迈克

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-01-12T23:30:33.970

我有同样的问题，但解决它有点不同。我无需创建另一个管理员帐户，而是能够从以*Run as Administrator*`pywin32-217.win32-py2.7.exe`开始的命令提示符成功执行。

 ** * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-23T19:43:45.847

另一种解决方案是 Mark Hammond[在 pywin32 邮件列表中](https://mail.python.org/pipermail/python-win32/2012-June/012388.html)提出的建议：

> > 如果用户访问控制 (UAC) 被禁用，这似乎会发生 - 它是否为您禁用？
> 
> 无论哪种方式，尝试从安装目录的根目录运行“python scripts\pywin32_postinstall.py -install”，事情应该会完成注册 - 这应该会修复您看到的下一个错误。

这对我来说很好。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-21T19:14:18.540

您*不能*以管理员身份安装，请参阅此[错误报告](http://sourceforge.net/mailarchive/message.php?msg_id=29300152)：

> 这可能是因为您在“管理员”帐户下运行 Windows，并且您通常运行的任何内容都等于“以管理员身份运行”
> 
> 并且自相矛盾地以管理员身份在 Windows 7 上运行 pywin32 的安装会导致此错误。
> 
> 所以解决方法是创建另一个管理员帐户
> 
> 网络用户管理员/添加
> 网络用户管理员
> 网络本地组管理员管理员/添加
> 
> 然后运行pywin32安装
> 
> runas /user:Admin pywin32-217.win32-py2.7.exe

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-08-24T08:07:16.767

没有一个解决方案对我有帮助（坐在 Windows 10 上）。

但是当我运行 c:\python27\scripts\pywin32_postinstall.py -install 时，我终于把它修好了

安装后，您可以尝试再次运行安装程序，以确保为我工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-03T08:51:07.863

我遇到了和作者一样的问题。[我使用来自Tim Golden python 员工](http://timgolden.me.uk/python/win32_how_do_i/print.html#shellexecute)的脚本来打印一个文本文件。运行后出现如下错误：

pywintypes.error: (31, 'ShellExecute', '连接到系统的设备无法运行。')

我的系统是windows 7、64位。python是python2.7 64位。

我认为该错误与pywin32的安装或windows系统设置无关。我猜原因是默认打开软件设置为 .txt 文件。因为在我将默认打开软件从 Nodepad++ 更改为记事本之后，我可以在我的 Hp 打印机上打印文件。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-06-27T11:22:08.200

`PowerShell command as admin`在 Windows 10 上为我运行，但`Command line prompt (as admin)`失败了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-24T09:43:47.233

安装pywin32的步骤-

1.  网络用户管理员/添加
2.  网络用户管理员
3.  网络本地组管理员管理员/添加
4.  runas /user:Admin pywin32-217.win32-py2.7.exe

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-23T12:37:52.673

当我通过以管理员身份运行安装程序文件来安装 pywin32-219.win-amd64-py2.7.exe 时，我遇到了同样的问题。

一旦我通过简单地执行文件（双击它）来安装它，我就再也没有遇到这个问题了。

我在带有 Python 2.7.9（64 位）的 Windows 7 64 位 SP1 上

但是，我确实注意到一件奇怪的事情，如果我只是双击安装程序 exe，则需要 20 多秒才能出现提示是否要运行 exe 文件，而如果以管理员身份运行文件，它发生在那时（不必等待那么久）我使用的是 120 GB SSD，所以在这种情况下不能质疑硬盘的缓慢性。

无论如何，在我的情况下，这是成功安装 pywin32 后的输出：

```
Copied pythoncom27.dll to C:\Windows\system32\pythoncom27.dll
Copied pythoncomloader27.dll to C:\Windows\system32\pythoncomloader27.dll
Copied pywintypes27.dll to C:\Windows\system32\pywintypes27.dll
Registered: Python.Interpreter 
Registered: Python.Dictionary 
Registered: Python 
-> Software\Python\PythonCore\2.7\Help[None]=None
-> Software\Python\PythonCore\2.7\Help\Pythonwin Reference[None]='C:\\Python27\\Lib\\site-packages\\PyWin32.chm'
Pythonwin has been registered in context menu
Creating directory C:\Python27\Lib\site-packages\win32com\gen_py
Shortcut for Pythonwin created
Shortcut to documentation created
The pywin32 extensions were successfully installed. 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-11T19:34:37.627

我用这个解决了它：

```
pip install pypiwin32 
```*

# php - 从同一列等于两个不同事物的表中选择？

> ID：11106288
> 
> 赞同：0
> 
> 时间：2012-06-19T17:35:17.190
> 
> 标签：php, mysql

我有一个包含 16 个表的数据库，但只有四个与此相关。该数据库跟踪不同的服务器、服务器信息（CPU、RAM、IP 地址等）以及它正在运行的软件。软件和机器通过连接表关联。

```
CREATE TABLE machsoftjt (
     mid int(4) NOT NULL,
     sid int(4) NOT NULL,
     slid int(4) NOT NULL,
     notes varchar(255) default NULL,
     UNIQUE KEY mid (mid,slid)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

mid是机器表中的机器ID，sid是软件表中的软件ID，其中包含软件名称和软件版本，slid是softlist表中的软件列表ID（仅列出正在运行和使用的软件的表用于唯一约束，以便在执行软件升级时，我没有一台机器运行同一软件的两个不同版本的条目）。因此，如果我有 machine1（中间值为 1）运行 Microsoft Word 2010（sid 为 1，slid 为 1）和 Adob​​e Photoshop 5（sid 为 2，slid 为 2），表格将

```
mid  sid   slid
1    1     1
1    2     2 
```

我想从这个表中选择所有运行 Microsoft Word 和 Adob​​e Photoshop 的机器。

```
SELECT machines.machinename FROM (machines INNER JOIN machsoftjt ON 
  machines.mid=machsoftjt.mid) INNER JOIN software ON machsoftjt.sid=software.sid
  WHERE machsoftjt.slid='1' AND machsoftjt.slid='2' 
```

当我运行这个查询时，我没有得到任何回报当我运行这个查询时，我没有得到任何回报。我现在很困惑，想不出别的办法。所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:45:12.020

这需要自加入。大致：

```
SELECT machines.machinename 
FROM machines 
INNER JOIN machsoftjt AS m1 ON machines.mid=m1.mid 
INNER JOIN machsoftjt AS m2 ON machines.mid=m2.mid 
WHERE m1.slid='1' AND m2.slid='2' 
```

要获取软件名称，大致：

```
SELECT machines.machinename, s1.*, s2.*
FROM machines 
INNER JOIN machsoftjt AS m1 ON machines.mid=m1.mid 
INNER JOIN machsoftjt AS m2 ON machines.mid=m2.mid 
INNER JOIN software s1 ON m1.sid=s1.sid
INNER JOIN software s2 ON m2.sid=s2.sid
WHERE m1.slid='1' AND m2.slid='2' 
```

您可能必须为 s1 和 s2 中的相关列起别名

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T17:42:03.573

由于这条线，它失败了：

其中 machsoftjt.slid='1' 和 machsoftjt.slid='2'

machsoftjt 不能同时等于 1 和 2；所以你没有得到任何结果。

您必须分别查询每个包。

我认为这样的事情应该这样做：

```
SELECT machines.machinename 
FROM machines 
WHERE mid IN (SELECT mid FROM machsoftht WHERE sid=1) AND 
 mid IN (SELECT mid FROM machsoftht WHERE sid=2) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T18:10:26.753

不需要自联接或子查询：

只需加入`machsoftjt`一次，然后要获得满足**所有**条件的机器，您可以将`HAVING`子句与 a 结合使用，`GROUP BY`以仅检索*两行加入*的机器，其中软件是*Photoshop 或 Word*：

```
SELECT
    a.machinename
FROM
    machines a
INNER JOIN
    machsoftjt b ON a.mid = b.mid
    AND b.slid IN (1,2)
GROUP BY
    a.mid
HAVING
    COUNT(*) = 2 
```

此外，由于`slid`is 的类型`INT`，您不需要在 and 周围`1`加上引号`2`。

这种方法也很灵活，因为它很容易添加/删除条件。如果您想要具有`slid`(1,2,4,8) 的所有 s 的机器，只需将`IN`子句和子句`COUNT(*)`中的向上调整`HAVING`为`4`（因为机器必须满足列表中的 4 个值）。

# import - Wordpress 的导入/导出插件设置

> ID：11106289
> 
> 赞同：3
> 
> 时间：2012-06-19T17:35:17.257
> 
> 标签：import, wordpress, export

如何将多个 Wordpress 插件的设置从一个站点导入/导出到另一个站点？最好通过 Wordpress UI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:46:55.793

你不能。
每个插件都有你自己的配置类型，只有导出和导入 mysql 数据库才能将你的设置传递到另一个站点。

导出和导入后运行此查询：

```
UPDATE wp_options SET option_value = replace(option_value, 'http://__www.old-site.com__', 'http://__www.new-site.com__') WHERE option_name = 'home' OR option_name = 'siteurl';
UPDATE wp_posts SET guid = replace(guid, 'http://__www.old-site.com__','http://__www.new-site.com__');
UPDATE wp_posts SET post_content = replace(post_content, 'http://__www.old-site.com__', 'http://__www.new-site.com__'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-09T01:43:57.227

WP Options Importer 插件看起来就是这样做的。

[wordpress 插件链接](https://wordpress.org/plugins/options-importer/)

# jquery-validate - 如何检索表单的验证器

> ID：11106297
> 
> 赞同：13
> 
> 时间：2012-06-19T17:35:44.537
> 
> 标签：jquery-validate

获取现有表单的当前 jQuery 验证器对象的正确方法是什么？

请注意，验证器是使用 jQuery Unobtrusive 验证插件配置的，因此我没有引用它。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-20T02:41:05.427

你要：

```
var validator = $("#form_id").data("validator"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-06-06T19:08:56.727

从[文档](https://jqueryvalidation.org/documentation/#link-validator)：

> **validate**方法返回一个Validator 对象

下一个代码将获取现有的验证器或初始化它

```
var validator = $("form_selector").validate(); 
```

# html - 向第一个元素添加边距

> ID：11106300
> 
> 赞同：0
> 
> 时间：2012-06-19T17:35:47.210
> 
> 标签：html, css

我有一个表格，我想为元素添加边距，这样我就可以有一个不填充整个表格列的底部边框，并且元素不受影响。另一种看待这个问题的方法是使用 with border-collapse: separate 和 with border-collapse: collapse 不幸的是它不起作用。

我考虑过使用两张表，一张用于标题，一张用于正文。还从表格单元格以外的其他内容更改第 th 元素的第 th 显示。两者都很讨厌，所以我正在寻找比存在更好的解决方案。

这是一个[jsFiddle](http://jsfiddle.net/VywK7/4/)，它有一个带有一些 css 的表格，如果你想快速解决这个问题。

下面是一些代码，主要来自我在 jsFiddle 上的尝试，试图让它做我想做的事情。

HTML

```
<table>
  <thead>
    <tr>
        <th>Month</th>
        <th>Amount</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>January</td>
      <td>$100</td>
    </tr>
    <tr>
      <td>February</td>
      <td>$200</td>
    </tr>
  </tbody>
</table>​ 
```

CSS

```
table
{
    width:100%;
    padding:2px;
    border-collapse: collapse;
}
td
{
    padding:2px;
}
th
{
    border-bottom:2px solid gray;
    padding: 0 2px 5px;
    line-height: 15px;
    margin: 0 10px 0 0;
} 
```

编辑：希望这将说明我正在努力实现的目标

```
---------------------------------------------
|Month     |Amount     |Month     |Amount      | <--TH element
|--------   ---------   --------   ---------   | <--bottom border doesn't fill cell
|----------------------------------------------|
|Jan       |$100       |Jan       |$100        |
|----------------------------------------------|
|Feb       |$200       |Feb       |$200        |
|----------------------------------------------| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:57:56.627

如果我理解你，这就像你想要的：

[http://jsfiddle.net/VywK7/21/](http://jsfiddle.net/VywK7/21/)

```
th {
    background-color: yellow;
}
th {
    border-top: 4px solid gray;
    border-bottom: 4px solid gray;
}
th:first-child {
    border-left: 4px solid gray;
}
th + th + th + th, /* choose one of these selectors */
th:last-child {
    border-right: 4px solid gray;
} 
```

伪元素乐趣： [​http://jsfiddle.net/VywK7/23/](http://jsfiddle.net/VywK7/23/)

```
th:after {
    content: ' ';
    display:block;
    width: 50%;
    background: red;
    height: 4px;
    margin-bottom: 4px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:40:27.380

您需要将边距添加到`td`和/或`th`元素中，恐怕因为`tr`s 不会接受它。

# scala - 在系统关闭时保证 Akka 中的日志输出刷新？

> ID：11106311
> 
> 赞同：4
> 
> 时间：2012-06-19T17:36:37.453
> 
> 标签：scala, logging, akka, fsm, application-shutdown

我将[Akka FSM](http://doc.akka.io/docs/akka/snapshot/scala/fsm.html)与 Scala 一起使用，并使用trait的`log`成员进行日志记录，即.`FSM``akka.event.Logging`

当应用程序想要正常终止时调用`context.system.shutdown()`关闭actor系统时，似乎最新的日志消息有时会丢失（并且根本没有打印出来）。

有没有办法保证在系统关闭之前始终打印出所有日志消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-18T12:46:17.963

根据 Kuhn 博士的建议，这里有一个 TerminatingLogger 示例。我将我的放在 error() 通道中，这样它就不会经常落入字符串比较中，但你显然可以把它放在你想要的任何地方。

```
class TerminatingLogger extends Actor with StdOutLogger {
    override def receive: Receive = {
      case InitializeLogger(_) ⇒ sender() ! LoggerInitialized
      case error : akka.event.Logging.Error if error.message.toString().equals("TERMINATE_SYSTEM") =>
      {
        context.system.shutdown()
      }
      case event: LogEvent     ⇒ 
      {
       print(event) 
      }
    }
  } 
```

然后只需在您的 application.conf 文件中配置它

```
akka {
  loggers = [com.namespace.TerminatingLogger]
} 
```

# c++ - 使用 BigO 表示法在 forward_lists 中排序？

> ID：11106313
> 
> 赞同：-1
> 
> 时间：2012-06-19T17:36:50.607
> 
> 标签：c++, algorithm, c++11, big-o

`sort()`基本上，任何人都知道，新的 C++11类的功能应该是什么 Big-O 表示法（赋值所需）`forward_list`？

只是一个小的工作示例：从文件中读取：

```
std::forward_list<string> words3;
ifstream songs;
songs.open ("songs.txt");
string line;

while (songs){
    getline (songs, line);
    words3.push_front(line);
}
words3.sort(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T17:42:45.130

检查 C++11 标准§23.3.4.6/23。

> *复杂性：*大约*N* log *N*比较，其中*N*是`distance(begin(), end())`。

# haskell - Haskell：定义严格的数据

> ID：11106318
> 
> 赞同：3
> 
> 时间：2012-06-19T17:37:08.003
> 
> 标签：haskell, lazy-evaluation

我一直在尝试制作一类“Strictable”类型。原因是我想定义这样的东西：

```
foldl'' f z = foldl' f (make_strict z) 
```

因此，当`fold''`在类型上使用时`strictable`，不会有未评估的 thunk。

所以我从以下开始：

```
{-# LANGUAGE TypeFamilies #-}

class Strictable a where
  type Strict a :: *
  make_strict :: a -> Strict a 
```

`Int`为s 和s定义实例`Float`很容易，`foldl'`已经可以很好地使用这些实例，因此无需做任何事情。

```
instance Strictable Int where
  type Strict Int = Int
  make_strict = id

instance Strictable Float where
  type Strict Float = Float
  make_strict = id 
```

这是棘手的部分。`foldl'`仅解开最外面的构造函数，因此例如使用一对，您仍然可以使用`foldl'`. 我想从一个普通的配对中创建一个严格的配对。所以我尝试了这个：

```
instance (Strictable a, Strictable b) => Strictable (a, b) where
  type Strict (a, b) = (! Strict a, ! Strict b)
  make_strict (x1, x2) = (make_strict x1, make_strict x2) 
```

不幸的是，我遇到了一堆编译错误。我应该如何实现这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:46:15.540

你在寻找这样的东西[吗](http://hackage.haskell.org/packages/archive/adaptive-containers/0.3/doc/html/Data-Adaptive-Tuple.html)？即使用关联*数据*，而不是类型同义词。

```
instance AdaptPair Bool Bool where
  data Pair Bool Bool = PBool {-# UNPACK #-}!Int {-# UNPACK #-}!Int

  fst (PBool x _) = Prelude.toEnum x
  snd (PBool _ x) = Prelude.toEnum x
  curry f x y    =  f (PBool (Prelude.fromEnum x) (Prelude.fromEnum y)) 
```

您将需要使用关联的数据类型，而不是类型同义词来添加所需的严格性注释。当你在那里时，你也可以为一些单态类型显式解包。

在那之后，只添加爆炸模式的通用实例就很容易了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T18:04:29.883

如果我正确理解了您的问题，并且我对[并行策略](http://community.haskell.org/~simonmar/papers/strategies.pdf)（PDF 链接）的理解没有让我失望，那么并行策略可以`make_strict`直接实施您的；请参阅API[`parallel`包](http://hackage.haskell.org/package/parallel)和并行策略的实现。

事实上，来自的[`rdeepseq`策略](http://hackage.haskell.org/packages/archive/parallel/3.2.0.3/doc/html/Control-Parallel-Strategies.html#v%3ardeepseq)[`Control.Parallel.Strategies`](http://hackage.haskell.org/packages/archive/parallel/3.2.0.3/doc/html/Control-Parallel-Strategies.html)可能正是您正在寻找的。

尽管名称中有“并行”，但它实际上是一种*评估*策略，通过利用惰性来声明性地指定计算，然后递归地向下递归数据结构以选择性地应用函数，如`seq`,`par`及其`pseq`元素。

# c# - 如何在 C# 中管理多个版本的非托管 DLL 调用的使用？

> ID：11106320
> 
> 赞同：2
> 
> 时间：2012-06-19T17:37:08.220
> 
> 标签：c#, dll, unmanaged, dllimport, multiple-versions

我想知道是否有人能指出我正确的方向我对 c# 还很陌生，所以请放轻松。

我的代码使用非托管 DLL，它是提供的用于与智能卡读卡器接口的 API，我无法控制 DLL，我只想将其包装在 c# 中以使其更易于使用。到目前为止，我已经设法做到了这一点，但我现在发现需要测试这个 DLL 的多个版本，这些版本的入口点相同，但参数*可能*不同。

我尝试了一些类似的方法来组织我的包装类；

```
internal static class UnSafeNativeMethods
{
    internal static class READER
    {
        internal static class SDK20
        {
            [DllImport(dllpath, EntryPoint = "CV_SetCommunicationType")]
            internal static extern int CV_SetCommunicationType(byte type);
            ...
        }

        internal static class SDK21
        {
            [DllImport(dllpath, EntryPoint = "CV_SetCommunicationType")]
            internal static extern int CV_SetCommunicationType(byte type);
            ...
        }
    }
} 
```

但是在检查要使用的调用时，它会产生非常难看的代码；

```
ReaderSDK sdk = ReaderSDK.SDK20  //Could come from a argument passed in or set in an 
                                 //instantiated class
...
switch (sdk)
{
    case ReaderSDK.SDK20:
        UnSafeNativeMethods.READER.SDK20.CV_SetCommunicationType(0x0);
        break;
    case ReaderSDK.SDK21:
        UnSafeNativeMethods.READER.SDK21.CV_SetCommunicationType(0x0);
        break;
    ...
} 
```

这对我来说似乎很乱，想知道是否有人能指出我正确的方向......

* * *

**编辑：**离开下面的评论，我想出了一些示例代码，仍然不确定我是否在正确的轨道上，因为我的开关仍然存在，但它现在是混凝土工厂类的一部分。

```
public enum ConnectionType
{
    RS232 = 0x0,
    USB = 0x1,
    UDP = 0x2
}

interface INativeMethods
{
    string Name();
    void SetCommunicationType(ConnectionType type);
}

class SDK20 : INativeMethods
{
    public string Name()
    {
        return "SDK Version 2.0";
    }

    // Thanks to @dzendras for this!!
    public void SetCommunicationType(ConnectionType type)
    {
        int result = UnSafeNativeMethods.READER.SDK20.CV_SetCommunicationType((byte)type);
        switch (result)
        {
            case 0:
                return;
            case 1:
                throw new NotSupportedException("Communication type not supported");
            case 2:
                throw AnyOtherMeaningfulException("Its message");
        }
    }

}

class SDK21 : INativeMethods
{
    public string Name()
    {
        return "SDK Version 2.1";
    }

    // Thanks to @dzendras for this!!
    public void SetCommunicationType(ConnectionType type)
    {
        int result = UnSafeNativeMethods.READER.SDK21.CV_SetCommunicationType((byte)type);
        switch (result)
        {
            case 0:
                return;
            case 1:
                throw new NotSupportedException("Communication type not supported");
            case 2:
                throw AnyOtherMeaningfulException("Its message");
        }
    }
}

class NativeMethodsFactory
{
    private static NativeMethodsFactory instance = new NativeMethodsFactory();
    private NativeMethodsFactory()
    {

    }

    public static NativeMethodsFactory Instance
    {
         get { return NativeMethodsFactory.instance; }
    }
    public INativeMethods Get(ReaderSDK version)
    {
        switch (version)
        {
            case ReaderSDK.SDK20:
                return new SDK20();

            case ReaderSDK.SDK21:
                return new SDK21();

            default:
                return new SDK20();
        }
    }
} 
```

我在正确的轨道上吗？

这就是我现在实现对 SDK 的调用的方式......

```
// sdk passed in as enum, NativeMethods stored as class member.
NativeMethods = NativeMethodsFactory.Instance.Get(sdk);
...
NativeMethods.SetCommunicationType(ConnectionType.USB); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:57:20.467

使用模式策略

关于模式的一些链接：

[http://www.oodesign.com/strategy-pattern.html](http://www.oodesign.com/strategy-pattern.html)

[策略模式的真实示例](https://stackoverflow.com/questions/370258/real-world-example-of-the-strategy-pattern)

在工厂模式的帮助下，使用策略模式最终如何实现的一些示例。

```
INativeMethods nativeMethods = NativeMethodsFactory.Get(UnsafeSdkVersion.V1);
nativeMethods.CV_SetCommunicationType(aType); 
```

好处：

1.  通过接口和工厂解耦
2.  没有开关
3.  易于添加新版本，所有其他代码都独立于要使用的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T06:14:40.670

我建议更改您的托管 API。调用 C 代码（从 DLL）不应该强迫你使用结构范式。你的包装应该是完全客观的。例如：

```
internal static extern int CV_SetCommunicationType(byte aType); 
```

1.  如果成功，则返回的 int 为 0，我想任何其他指示错误的值。返回 void 并在内部将代码从 DLL 调用转换为异常。

    ```
    public void SetCommunicationType(byte type) 
    {
         int result = CV_SetCommunicationType(type);
         switch (result)
         {
             case 0:
                 return;
             case 1:
                 throw new NotSupportedException("Communication type not supported");
             case 2:
                 throw AnyOtherMeaningfulException("Its message");
         }
     } 
    ```

2.  为 aType 创建一个枚举。

3.  求课。静态方法是纯粹的邪恶。分析您的领域并寻找*对象和行为*。例如，这可能是（愚蠢的名字，我知道...）ConnectionManager 的方法。

4.  取决于合同。让您的类（针对不同的 SDK）实现一些通用接口。

5.  不要以示例方法中显示的方式使用[匈牙利符号。](https://stackoverflow.com/questions/768255/hungarian-notation-in-c-sharp)

# web-services - 如何在不注册的情况下在 VBA 中使用 DLL？

> ID：11106321
> 
> 赞同：2
> 
> 时间：2012-06-19T17:37:09.153
> 
> 标签：web-services, sharepoint, vba, soap

这是参考我发布的另外两个 SO 问题：[使用 VBA 将项目添加到 Sharepoint 列表](https://stackoverflow.com/questions/10147731/how-to-add-items-to-a-sharepoint-list-using-excel-vba)并[从 VBA 调用 UpdateListItems](https://stackoverflow.com/questions/11092273/what-arguments-does-updatelistitems-take-when-calling-sharepoint-web-service-fro)。

我想根据一些 Excel 计算的结果使用新数据行更新 Sharepoint 列表。我当前的方法是对 Sharepoint 站点的 Web 服务进行 SOAP 调用。我已经使用 SOAP 3.0 库在本地机器上成功完成了这项工作。问题是这是 20-30 个用户之间共享的电子表格，所以我不想要一个要求他们每个人都注册 DLL 的解决方案。

我尝试将 MSSOAP30.DLL 放在与共享电子表格相同的文件夹中，然后通过浏览将其添加为参考。运行以下代码：

```
Sub test()

Dim soap As MSSOAPLib30.SoapClient30
Dim XMLstr As String
Dim listid As String
Dim listname As String

Set soap = New SoapClient30
Call soap.mssoapinit(par_wsdlfile:="http://wss/mySharepointSite/_vti_bin/lists.asmx?wsdl")

listid = "{e285aa1a-my-list-ID-d446cdbf091e}"
listname = "thisList"

XMLstr ="<Batch OnError='continue' ListVersion='1' ViewName='" & ListView & "'>" & _   
        "<Method ID='1' Cmd='New'>" & _
            "<Field Name='ID'>New</Field>" & _
            "<Field Name='personID'>1337</Field>" & _
        "</Method>"
        "</Batch>"

soap.UpdateListItems listid, XMLstr

End Sub 
```

但是当我运行代码时，`soap.UpdateListItems`出现以下错误：

```
Run-time error '-2147221164 (80040154)':

Client:The connector could not be created.  There might be an invalid endPoint specified in the WSDL file HRESULT=0x80040154: Class not registered
-Client:Unspecified client error. HRESULT=0x80040154: Class not registered 
```

同样，这段代码在我注册了 MSSoap 3.0 的本地机器上运行良好。也许浏览到 MSSOAP30.DLL 引用不足以正确定义`SoapClient30`对象？我看到 \MSSoap\Binaries 文件夹中有很多其他 DLL，我是否还需要包含对所有这些的引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:53:14.233

恐怕虽然它在技术上是可行的（有大量的 Jiggery Pockery - 是的官方技术术语）但尝试使用 COM dll 而不注册它并不可行。

下载到每个客户端的简单脚本会很快注册 dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:35:28.860

我在不使用另一个 DLL 的情况下解决了这个问题，只使用了 XMLHTTP POST 操作。解决方案张贴[在这里](https://stackoverflow.com/questions/11092273/what-arguments-does-updatelistitems-take-when-calling-sharepoint-web-service-fro/11125010)。

# android - 如何制作 Android 插页式广告？

> ID：11106322
> 
> 赞同：12
> 
> 时间：2012-06-19T17:37:09.543
> 
> 标签：android, admob

我尝试了许多博客中的东西，但没有一个给出一步一步的解决方案。我应该在 AdMob 网站上编辑某些内容吗？我通过站​​点和应用程序选项卡下的广告坐席/应用程序选项创建了站点。

我使用了这段代码：

```
interstitial = new InterstitialAd(this, "MyAdMobID");
// Set Ad Listener to use the callbacks below
interstitial.setAdListener(this);
// Create ad request
AdRequest adRequest = new AdRequest();
adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
// Begin loading your interstitial      
interstitial.loadAd(adRequest);
adRequest.setTesting(true); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-06-10T20:51:45.483

使用最后一个 Android 框架，我发现每次广告关闭时都需要调用 load() 函数。

```
import com.google.android.gms.ads.*;
import android.os.Handler;
import android.os.Looper;
import android.app.Activity;

class MyActivity extends Activity implements AdListener {
  private InterstitialAd adView;  // The ad
  private Handler mHandler;       // Handler to display the ad on the UI thread
  private Runnable displayAd;     // Code to execute to perform this operation

  @Override
  public void onCreate(Bundle savedInstanceState) {
    adView = new InterstitialAd(mContext);
    adView.setAdUnitId("ca-app-pub-XXXXXXXXXX");
    adView.setAdListener(this);
    mHandler = new Handler(Looper.getMainLooper());
    displayAd = new Runnable() {
      public void run() {  
        runOnUiThread(new Runnable() { 
          public void run() { 
            if (adView.isLoaded()) {
              adView.show();
            }
          }
        });
      }
    };
    loadAd();
  }

  @Override
  public void onAdClosed() {
    loadAd(); // Need to reload the Ad when it is closed.
  }

  void loadAd() {
    AdRequest adRequest = new AdRequest.Builder()
    //.addTestDevice(AdRequest.DEVICE_ID_EMULATOR)
   .build();

    // Load the adView object witht he request
    adView.loadAd(adRequest);
  }

  //Call displayInterstitial() once you are ready to display the ad.
  public void displayInterstitial() {
    mHandler.postDelayed(displayAd, 1);
  }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-25T20:13:56.380

与横幅不同，插页式广告在加载后不会自动显示。您必须监听 AdMob 的`onReceiveAd()`回调，并在该回调中调用`interstital.show()`以显示您的插页式广告。

```
public YourActivity extends Activity implements AdListener {
  ...

  @Override
  public void onReceiveAd(Ad ad) {
    Log.d("OK", "Received ad");
    if (ad == interstitial) {
      interstitial.show();
    }
  }
} 
```

[在此处](https://developers.google.com/mobile-ads-sdk/docs/android/doubleclick/#interstitials)查看代码示例。此示例将在收到插页式广告后立即显示。或者，您可能希望等到适当的时间显示插页式广告，例如在游戏关卡结束时，您可以检查`interstitial.isReady()`是否可以显示插页式广告。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-02T16:11:31.290

你不能再实现 AdListener，我是这样使用的：

```
final InterstitialAd mInterstitialAd = new InterstitialAd(this);
mInterstitialAd.setAdUnitId(getResources().getString(R.string.interstitial_ad_unit_id));
AdRequest adRequestInter = new AdRequest.Builder().build();
mInterstitialAd.setAdListener(new AdListener() {
    @Override
    public void onAdLoaded() {
        mInterstitialAd.show();
    }
});
mInterstitialAd.loadAd(adRequestInter); 
```

将您自己的 ID 放在名为 interstitial_ad_unit_id 的 strings.xml 中，或替换

```
getResources().getString(R.string.interstitial_ad_unit_id) 
```

用你的身份证。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-18T15:33:53.380

我认为这个示例代码会帮助你。

[如何在您的 Android 应用中添加 AdMob 插页式广告](http://jmsliu.com/828/how-to-add-admob-interstitial-ads-in-your-android-apps.html)

在此示例中，它向您展示了整个源代码。它还提供了一些常见错误的解决方案。例如 onFailedToReceiveAd 错误解决方案和无广告返回解决方案。您也可以从那里下载源代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-03T03:33:13.323

仅供参考，`interstitial.isReady()`不再支持该方法。这是正确的方法：

```
if (interstitial.isLoaded()) {
    interstitial.show();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-23T23:12:47.897

在应用程序打开时调用此函数：

```
InterstitialAd interstitial;

public void AdMob() {
    AdRequest adRequest = new AdRequest.Builder().addTestDevice("YOUR_TEST_DEVICE_ID").build();
    interstitial = new InterstitialAd(this);
    interstitial.setAdUnitId("YOUR_AD_ID");
    interstitial.setAdListener(new AdListener() {
        @Override
        public void onAdLoaded() {
            super.onAdLoaded();
            //Ads loaded
        }

        @Override
        public void onAdClosed() {
            super.onAdClosed();
            //Ads closed
        }

        @Override
        public void onAdFailedToLoad(int errorCode) {
            super.onAdFailedToLoad(errorCode);
            //Ads couldn't loaded
        }
    });
    interstitial.loadAd(adRequest);
} 
```

然后您可以展示广告：

```
if (interstitial.isLoaded()){
interstitial.show();
} 
```

您应该在展示之前准备好广告。这些需要 3-5 秒，具体取决于设备的互联网速度。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-10T06:20:45.037

`InterstitialAd mInterstitialAd;`

```
 //To load InterstitialAd ads

//app_id for test ca-app-pub-3940256099942544~3347511713

//full_id for test ca-app-pub-3940256099942544/1033173712

MobileAds.initialize(this, getString(R.string.app_id)); 
mInterstitialAd = new InterstitialAd(this);

mInterstitialAd.setAdUnitId(getString(R.string.full_id));

mInterstitialAd.loadAd(new AdRequest.Builder().build());

mInterstitialAd.setAdListener(new AdListener() {

@Override

public void onAdClosed() {

// Load the next interstitial

mInterstitialAd.loadAd(new AdRequest.Builder().build());

}

});

//To show ads
 if (mInterstitialAd.isLoaded()) {
 mInterstitialAd.show();
 } else {
Log.d("TAG", "The interstitial wasn't loaded yet.");
  } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-20T17:19:54.630

添加横幅和插页式广告：

```
 AdView mAdView;
        InterstitialAd interstitialAd;
        ProgressDialog pd;

        void showAds(){
            if(interstitialAd.isLoaded()){
                interstitialAd.show();
            }
        }
        public void initAds(){
            mAdView = (AdView) findViewById(R.id.adView);

            AdRequest adRequest = new AdRequest.Builder().build();
            mAdView.loadAd(adRequest);

            interstitialAd=new InterstitialAd(this);
            interstitialAd.setAdUnitId(getResources().getString(R.string.inetial3));
            AdRequest adRequest1=new AdRequest.Builder().build();
            interstitialAd.loadAd(adRequest1);
        } 
```

在 XML 中：

```
<com.google.android.gms.ads.AdView
xmlns:ads="http://schemas.android.com/apk/res-auto"
        android:id="@+id/adView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_alignParentBottom="true"
        ads:adSize="BANNER"
        ads:adUnitId="@string/banner_ad_unit_id2"
        android:layout_gravity="bottom|center">
    </com.google.android.gms.ads.AdView> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-26T01:07:36.943

在 MainActivity.java 中试试这个

```
 private InterstitialAd interstitial; 

 // Initialize the Mobile Ads SDK 
        MobileAds.initialize(this, getString(R.string.admob_app_id)); 
        AdRequest adIRequest = new AdRequest.Builder().build(); 

        // Prepare the Interstitial Ad Activity 
        interstitial = new InterstitialAd(MainActivity.this); 

        // Insert the Ad Unit ID 
       //add admob_interstitial_id unit id in string file 
        interstitial.setAdUnitId(getString(R.string.admob_interstitial_id)); 

        // Interstitial Ad load Request 
        interstitial.loadAd(adIRequest); 

        // Prepare an Interstitial Ad Listener 
        interstitial.setAdListener(new AdListener()  
{ 
            public void onAdLoaded() 
            { 
                // Call displayInterstitial() function when the Ad loads 
                displayInterstitial(); 
            } 
        }); 
    } 

    public void displayInterstitial() 
    { 
        // If Interstitial Ads are loaded then show else show nothing. 
        if (interstitial.isLoaded()) { 
            interstitial.show(); 
        } 
    } 
```

# c++ - 提升::精神。将（名称）（描述）文本解析为地图

> ID：11106323
> 
> 赞同：2
> 
> 时间：2012-06-19T17:37:11.840
> 
> 标签：c++, boost, boost-spirit

我目前正在以以下格式解析文本文件中的数据库模式：

```
(table_name) (table_description) 
```

元素之间的分隔符是双返回（`\n\n`）我需要将其解析为映射，`boost::spirit`用于解析。

问题是`table_description`还可以包含双返回 ( `\n\n`)。

table_name 具有严格的格式，即`*qi::char_("a-z0-9_")`. 可以包含任何字符，`table_description`但总是稍后从大写开始。

任何想法如何为这个解析器创建语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:34:41.247

这与 Spirit 文档中的文章非常相似：[Parsing a List of Key-Value Pairs Using Spirit.Qi](http://boost-spirit.com/home/articles/qi-example/parsing-a-list-of-key-value-pairs-using-spirit-qi/)（2009 年 11 月 15 日）。

我能想到的最直接的语法依赖于括号：

```
 start         = pair % "\n\n";
    parenthesized = '(' > *(char_ - ')') > ')';
    pair          = parenthesized >> "\n\n" >> parenthesized; 
```

您当然可以增强它以要求您需要的表名和描述（例如以大写开头）的确切语法，但以上只是为了说明。

唯一的 /nifty/ 位是：

*   使用`char_ - ')'`to _greedily 匹配括号内的任何内容（注意这还不支持嵌套的括号集）
*   使用 std::pair 的融合适配器直接解析为 std::pair
*   使用`qi::blank`(not `qi::space`) skipper 以避免忽略换行符

这是一个完整的示例：

```
//#define BOOST_SPIRIT_DEBUG
#include <boost/fusion/adapted/std_pair.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/karma.hpp>

namespace qi    = boost::spirit::qi;
namespace karma = boost::spirit::karma;

typedef std::map<std::string, std::string> map_t;

template <typename It, typename Skipper = qi::space_type>
    struct parser : qi::grammar<It, map_t(), Skipper>
{
    parser() : parser::base_type(start)
    {
        using namespace qi;
        // using phx::bind; using phx::ref; using phx::val;

        start         = pair % "\n\n";
        pair          = parenthesized >> "\n\n" >> parenthesized;
        parenthesized = '(' > *(char_ - ')') > ')';

        BOOST_SPIRIT_DEBUG_NODE(parenthesized);
        BOOST_SPIRIT_DEBUG_NODE(pair);
        BOOST_SPIRIT_DEBUG_NODE(start);
    }

  private:
    qi::rule<It, std::string(), Skipper > parenthesized;
    qi::rule<It, std::pair<std::string, std::string>(), Skipper> pair;
    qi::rule<It, std::map <std::string, std::string>(), Skipper> start;
};

template <typename C, typename Skipper>
    bool doParse(const C& input, const Skipper& skipper)
{
    auto f(std::begin(input)), l(std::end(input));

    parser<decltype(f), Skipper> p;
    map_t data;

    try
    {
        bool ok = qi::phrase_parse(f,l,p,skipper,data);
        if (ok)   
        {
            std::cout << "parse success\n";
            std::cout << "data: " << karma::format(
                 (karma::auto_ << ": \"" << karma::auto_ << "\"") % karma::eol, 
                 data) << "\n";
        }
        else      std::cerr << "parse failed: '" << std::string(f,l) << "'\n";

        if (f!=l) std::cerr << "trailing unparsed: '" << std::string(f,l) << "'\n";
        return ok;
    } catch(const qi::expectation_failure<decltype(f)>& e)
    {
        std::string frag(e.first, e.last);
        std::cerr << e.what() << "'" << frag << "'\n";
    }

    return false;
}

template <typename C>
    bool doParse(const C& input)
{
    return doParse(input, qi::blank);
}

int main()
{
    const std::string input = "(table_name)\n\n(table_description)\n\n(other_table)\n\n(other\n\ndescription)";
    bool ok = doParse(input);

    return ok? 0 : 255;
} 
```

测试输出：

```
parse success
data: other_table: "other

description"
table_name: "table_description" 
```

# shell - 我应该用什么语言编写命令 shell？

> ID：11106325
> 
> 赞同：0
> 
> 时间：2012-06-19T17:37:20.013
> 
> 标签：shell

我正在寻找一种语言，它虽然灵活**且**内存使用量非常轻，但仍然易于使用（如果不是 PHP、JavaScript 或 Python，我已经知道了）。我要写一个命令shell，让通过SSH登录的用户仅限于这个应用程序。我应该选择什么语言？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:44:19.597

如果您已经了解 python，请用 python 编写它，并且限制从 SSH 访问的资源取决于操作系统。

[检查强制访问控制](https://en.wikipedia.org/wiki/Mandatory_access_control#Implementations)的安全模型实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:49:01.637

由于您希望在用户登录后对其进行“沙箱化”，因此一个重要的方面是安全性：您必须确保用户无法“突破”沙箱。因此，我会投票反对使用一种你必须自己管理内存的语言，因为很容易犯有安全隐患的错误。所以没有 C 或 C++。出于安全原因，我也不会使用 PHP。

Python 听起来最合适。

# python - 用 django 1.4 连接 lamson

> ID：11106326
> 
> 赞同：0
> 
> 时间：2012-06-19T17:37:22.587
> 
> 标签：python, django, python-2.7, django-1.4, lamson

我正在尝试将 lamson 与 django 1.4 连接起来。我已经看到了有关将 lamson 与 django 连接起来的文档以及源代码中的 librelist 示例，但它似乎使用了以前版本的 django。

我创建了一个“webapp”项目，其中包含一个“电子邮件”应用程序，如基本 django 1.4 教程中所述。

webapp/webapp/settings.py 文件包含对 installed_apps 中的电子邮件应用程序的引用，如下所示：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'emails',
) 
```

lamson 应用程序文件夹包含 django 项目的 webapp 文件夹。现在，我没有一个“webapp/emails”文件夹，其中包含 Zed Shaw 提供的 librelist 示例中的所有内容，而是另一个包含 settings.py 的 webapp 文件夹，以及包含模型的额外应用程序文件夹（电子邮件）和所有（这是由于 django 1.4 中的新目录结构）。

在 lamson 的 config/settings.py 文件中，我添加了以下行：

```
os.environ['DJANGO_SETTINGS_MODULE'] = 'webapp.webapp.settings' 
```

现在，在我的处理程序代码（app/handlers/my_handler.py）中，我已经导入了我的模型：

```
import webapp.emails.models 
```

我可以从我的模型中正确创建实例，但是一旦我尝试使用 my_instance.save() 将它们保存到数据库中，就会出现以下错误：

```
File "/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
ImportError: No module named emails 
```

知道问题可能是什么吗？

否则，是否可以删除 django 1.4 并使用 django 1.3 使其工作？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:06:47.307

这是对我有用的设置

将 webapp 和 mailserver 文件夹移动到同一级别

```
mailserver #lamson project
- lamson files
webapp #django 1.4 app
- settings.py ... 
```

在 lamson settings.py

```
import sys
import os
sys.path.append('../webapp')

os.environ['DJANGO_SETTINGS_MODULE'] = 'settings' 
```

现在您可以在没有任何前缀的 lamson 处理程序中访问 django 项目模块

例如

```
import emails.models 
```

# xslt - 用于不同值的 XSLT 1.0 变体

> ID：11106331
> 
> 赞同：6
> 
> 时间：2012-06-19T17:37:39.437
> 
> 标签：xslt, xpath, xslt-1.0

我有一个 XSLT，我在其中创建（从输入数据）中间变量，如下所示（硬编码示例，但本质上是动态的）：

```
<xsl:variable name="variableX">
    <ValidCode CodePart="CP1" Code="C1"/>
    <ValidCode CodePart="CP2" Code="C2"/>
    <ValidCode CodePart="CP1" Code="C3"/>
    <ValidCode CodePart="CP2" Code="C4"/>
    <ValidCode CodePart="CP2" Code="C5"/>
</xsl:variable> 
```

我希望遍历 CodePart 值的不同出现。在 XSLT 2.0 中很容易：

```
<xsl:for-each select="distinct-values($variableX/ValidCode/@CodePart)">...</xsl:for-each> 
```

但是如何在 XSLT 1.0 中做到最好呢？
请注意，我不能使用密钥，因为它是动态确定的变量，而不是输入文件的一部分。

我的输入文件确实包含所有可能的代码部分的列表，如下所示：

```
<root>
    <CodePart><value>CP1</value></CodePart>
    <CodePart><value>CP2</value></CodePart>
    <CodePart><value>CP3</value></CodePart>
</root> 
```

所以我想到了循环`//CodePart/value`，以确保初学者的唯一性。但是我需要一些包含条件的 Xpath 表达式

“值出现在所有 $variableX/ValidCode/@CodePart 值的节点集中”

并使用类似的东西

```
<xsl:for-each select="//CodePart[..condition..]/value">...</xsl:for-each> 
```

是否有我正在寻找的 Xpath 表达式的简单形式？
还是另一种方法更可取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T02:57:05.707

> 请注意，我不能使用密钥，因为它是动态确定的变量，而不是输入文件的一部分。

**这根本不是真的。**

**这是使用键的简短，简单且最有效的解决方案**（顺便说一句，不使用任何条件指令或根本不使用`xsl:for-each`:)）：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kCodeByPart" match="ValidCode" use="@CodePart"/>

    <xsl:variable name="variableX">
        <ValidCode CodePart="CP1" Code="C1"/>
        <ValidCode CodePart="CP2" Code="C2"/>
        <ValidCode CodePart="CP1" Code="C3"/>
        <ValidCode CodePart="CP2" Code="C4"/>
        <ValidCode CodePart="CP2" Code="C5"/>
    </xsl:variable>

    <xsl:variable name="vCodes" select="ext:node-set($variableX)/*"/>

 <xsl:template match="/">
  <xsl:apply-templates select=
  "$vCodes[generate-id()
          =
           generate-id(key('kCodeByPart', @CodePart)[1])
           ]"/>
 </xsl:template>

 <xsl:template match="ValidCode">

  Code Part: <xsl:value-of select="@CodePart"/>
    Codes: <xsl:apply-templates select=
      "key('kCodeByPart', @CodePart)/@Code"/>
 </xsl:template>

 <xsl:template match="@Code">
   <xsl:value-of select="concat(., ' ')"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未使用）时，将产生所需的正确结果**：

```
 Code Part: CP1
    Codes: C1 C3 

  Code Part: CP2
    Codes: C2 C4 C5 
```

**说明**：

如**[W3C XSLT 1.0 建议](http://www.w3.org/TR/1999/REC-xslt-19991116#key)**中所述：

> ```
> "The key can be used to retrieve a key from a document other than the document containing the context node." 
> ```

在提供的解决方案中，我们甚至没有使用这种可能性——上下文节点和检索到的键都来自同一个文档——包含在`$vCodes`.

再次在那里，指定一个密钥可以用于多个文档：

> “样式表使用 xsl:key 元素**为每个文档声明一组键。”**

**简单来说**：索引是在*当前文档*（包含上下文（当前）节点的文档）上执行的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T18:35:15.277

在 XPath 1.0 中，您可以`distinct-values`通过查找前面具有相同值的同级来模拟该函数。

我已将您的第一个文档简化为这样，以便更容易复制（甚至不使用 XSLT）：

```
<?xml version="1.0"?>
<root>
    <ValidCode CodePart="CP1" Code="C1"/>
    <ValidCode CodePart="CP2" Code="C2"/>
    <ValidCode CodePart="CP1" Code="C3"/>
    <ValidCode CodePart="CP2" Code="C4"/>
    <ValidCode CodePart="CP2" Code="C5"/>
    <ValidCode CodePart="CP3" Code="C5"/>
</root> 
```

然后，下面的 XPath 表达式将只选择`CodePart`文档中出现的每个值的一个属性：

```
//ValidCode/@CodePart[not(../preceding-sibling::ValidCode/@CodePart = .)] 
```

因此，选择属性的条件`CodePart`是元素的前面没有同级`<ValidCode>`元素的`CodePart`属性与当前检查（选择）的属性具有相同的值`CodePart`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T18:11:29.763

我不认为你可以直接使用 XPath - 但你应该能够只检查这样的有效值：

```
<xsl:for-each select="//CodePart/value">
  <xsl:variable name="CodePart" select="."/>
  <xsl:if test="$variableX/ValidCode[@CodePart=$CodePart]">
    . . .
  </xsl:if>
</xsl:for-each> 
```

或更简单地说（感谢评论）：

```
<xsl:for-each select="//CodePart/value">
  <xsl:if test="$variableX/ValidCode[@CodePart=current()]">
    . . .
  </xsl:if>
</xsl:for-each> 
```

如果`$variableX`不是节点集而是 XML 片段，则需要将其转换为节点集 - 这取决于实现，使用 Microsoft 处理器：

```
<xsl:for-each select="//CodePart/value" xmlns:msxsl="urn:schemas-microsoft-com:xslt">
  <xsl:if test="msxsl:node-set($variableX)/ValidCode[@CodePart=current()]">
    . . .
  </xsl:if>
</xsl:for-each> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T18:34:05.180

解决这个问题的一种方法（没有密钥）是排序和测试`preceding-sibling`

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt">

    <xsl:variable name="variableX">
        <ValidCode CodePart="CP1" Code="C1"/>
        <ValidCode CodePart="CP2" Code="C2"/>
        <ValidCode CodePart="CP1" Code="C3"/>
        <ValidCode CodePart="CP2" Code="C4"/>
        <ValidCode CodePart="CP2" Code="C5"/>
     </xsl:variable>

     <xsl:variable name="refvarX" select="msxsl:node-set($variableX)" />

     <xsl:template match="/">
         <root>
             <xsl:for-each select="$refvarX/ValidCode">
                 <xsl:sort select="./@CodePart" data-type="text" />
                 <xsl:if test="not(./@CodePart = preceding-sibling::ValidCode/@CodePart)">
                     <cp>
                         <xsl:value-of select="./@CodePart" />
                     </cp>
                 </xsl:if>
             </xsl:for-each>
         </root>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T21:34:36.017

使用`node-set()`函数，例如撒克逊：

```
<xsl:template match="/">
  <xsl:apply-templates select="root/CodePart/value[
   . = saxon:node-set($variableX)/ValidCode/@CodePart]/>
</xsl:template>

<xsl:template match="value">
  <!-- template for distinct value -->
</xsl:template> 
```

# javascript - 使用 jquery 进行抓取和操作

> ID：11106335
> 
> 赞同：0
> 
> 时间：2012-06-19T17:37:49.607
> 
> 标签：javascript, jquery, ajax

我发出 ajax 请求以获取一个可以工作的外部页面 - 但我无法操纵页面内容，我想获取一些`h2`元素并将它们呈现到`div`我的页面上。

```
$.ajax({
    url: 'www.example.com',
    type: 'GET',
    dataType: 'jsonp',
    success: function(data) {
        var mycontent = $(data).filter("h2");
    }
}); 
```

我收到一个错误，因为我的响应包含 html/header 标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:41:14.070

要获取由另一个域或端口提供的外部文件并在现代浏览器中操作其内容，您必须要么

*   使用[JSONP](http://en.wikipedia.org/wiki/JSONP)

*   设置[CORS 标头](https://developer.mozilla.org/en/http_access_control)

在这两种情况下，这意味着您可以访问服务器。

顺便说一句，您似乎无法尝试执行 jsonp 请求并希望在成功函数中提供已回答的内容：服务器通过回答直接调用您的 javascript 函数`functionName(someJson)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:43:13.207

你不能。AJAX 旨在处理对页面（脚本）的*请求*以及一些数据；该脚本评估数据并返回*响应*。

这与普通网页的内容无关，除非服务器有特定的服务来处理页面的 HTML。换句话说，这种方式通常无法进行抓取。

# ruby-on-rails - 我可以为任意模型方法设置 Active Record 回调吗？

> ID：11106339
> 
> 赞同：1
> 
> 时间：2012-06-19T17:38:08.970
> 
> 标签：ruby-on-rails, rails-activerecord

我可以为任意模型方法设置 Active Record 回调吗？我可以看到这将如何有用，类似于控制器中的 before_filter。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-12T09:54:28.270

Active Model Callbacks 为任何类提供了一个接口，可以像回调一样拥有 Active Record。你可以在这里查看[http://api.rubyonrails.org/classes/ActiveModel/Callbacks.html](http://api.rubyonrails.org/classes/ActiveModel/Callbacks.html)

这适用于模型中的任意方法。这是一个代码片段。

```
class MyModel
  extend ActiveModel::Callbacks
  define_model_callbacks :initialize, :only => :after

  after_initialize :update_info

  def initialize
    run_callbacks :initialize do
      # Your create action methods here
    end
  end

  def update_info
    puts 'info'
  end
end 
```

这将在完成“初始化”方法后调用“update_info”方法。

# android - 列表视图中的类显示全名而不是其属性之一

> ID：11106347
> 
> 赞同：0
> 
> 时间：2012-06-19T17:38:38.653
> 
> 标签：android, class, spinner

我将类对象放在微调器视图中并可以显示它们，但显示的是完整的限定类名称，例如：wxyg.dash1.object.abc.adb93931。在我的课堂上，我有以下属性；gridNickName、gridName、firstName、lastName、密码和 loginURI。是否有一些我可以设置的属性，所以微调器视图中显示的是这些属性之一？整个类对象仍然需要在列表中。我必须调整我的适配器还是什么？这是我简要介绍的。

```
 //getting arrays from strings file
    String[] regions;
    Spinner gridSpinner;
    Spinner regionSpinner;

    ArrayList <Grid> al = new ArrayList<Grid>();
       Grid Grid1 = new Grid("meet grid1", "GridHB5", "pqppq", "wdwd","wdwdww", "www.google.com");
       Grid Grid2 = new Grid("meet grid2", "GridHB6", "zzz", "uuu", "secret1","www.ebay.com");
       Grid Grid3 = new Grid("meet grid3", "GridHB7", "xxx", "dskd", "secret3","www.amazon.com");
       Grid Grid4 = new Grid("meet grid4", "GridHB8", "qqq", "dsdsd", "secret4","www.me.com");

protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView (R.layout.activity_f1);
    setTitleFromActivityLabel (R.id.title_text);

    //declaring variables

    al.add(Grid1);
    al.add(Grid2);
    al.add(Grid3);
    al.add(Grid4);

    Button submitButton = (Button) findViewById(R.id.button1);
    Button cancelButton = (Button) findViewById(R.id.button2);

    //getting arrays from strings file
    regions = getResources().getStringArray(R.array.regions_array);
  //  grids = getResources().getStringArray(R.array.grids_array);

    this.gridSpinner = (Spinner) findViewById(R.id.gridSpinner);
    this.regionSpinner = (Spinner) findViewById(R.id.regionSpinner);

    //creating adapters for both spinners

    final ArrayAdapter<Grid> dataAdapter  = new ArrayAdapter<Grid>(this, android.R.layout.simple_spinner_item, al);
    ArrayAdapter<String> regionAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, regions);

    // drop down layout style with radio button type.

    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    regionAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    // attaching data adapters to spinners
    gridSpinner.setAdapter(dataAdapter);
    regionSpinner.setAdapter(regionAdapter); 
```

一如既往，我真的很感谢你们为我看这个。我确信这是一个简单的解决方法，并且可能有一个我不知道的属性。

再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:47:05.880

在 Grid 类中定义自己的 toString() 方法。

```
public String toString() {
    return gridName; // or gridNickName + lastName; Whatever you want
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:51:26.270

您需要创建一个自定义适配器而不是 ArrayAdapter 并实现`getView()`自定义适配器并将 textView 设置为适当的值。您面临的问题是因为 ArrayAdapter 只是对列表中提供的对象使用 .toString 函数，在您的情况下是`Grid`对象

# mysql - MySQL 按年龄划分的水平分区

> ID：11106350
> 
> 赞同：4
> 
> 时间：2012-06-19T17:38:44.820
> 
> 标签：mysql, partitioning

在我的 MySQL 数据库表中，我们的前端用户只使用最近两周的记录。任何比这更早的数据仅供管理使用。

我想做的是通过根据数据库中记录的年龄对数据库进行水平分区来优化前端用户的性能。

因此，前端将需要一个仅包含过去两周记录的分区和另一个分区以包含超过 2 周的任何记录。

但是，我没有在 MySQL 文档（[此处](http://dev.mysql.com/doc/refman/5.1/en/partitioning-overview.html)）中看到是否可以这样做。

有人可以建议这是否可以完成以及表的创建语句可能看起来如何？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-28T11:01:57.850

好的，对于两个表的解决方案，联合 sql 看起来像这样：

管理员用户将使用：

```
select
  id,
  column1,
  column2,
  age
from
  oldrecs

union

select
  id,
  column1,
  column2,
  age
from
  newrecs

order by
  age 
```

这是一个查询，将返回一个结果集。请注意，选择块具有相同的字段计数和类型。在您的情况下，两个表将具有相同的布局。

同时，您的网站用户只会使用该查询的最后一部分：

```
select
  id,
  column1,
  column2,
  age
from
  newrecs
order by
  age 
```

除此之外，您还需要一个 cron 作业来将老化的记录从 newrecs 表移动到 oldrecs 表。

```
 insert into oldrecs
  select
    id,
    column1,
    column2,
    age
  from
    newrecs
  where
    age < date(now()) - interval 7 days;

  delete from
    newrecs
  where
    age < date(now()) - interval 7 days; 
```

# javascript - func_get_args 用于 javascript

> ID：11106352
> 
> 赞同：2
> 
> 时间：2012-06-19T17:38:46.393
> 
> 标签：javascript, jquery

如何在数组中获取 javascript 中的所有函数参数？

```
function(a, b, c){

 // here how can I get an array of all the arguments passed to this function
 // like [value of a, value of b, value of c]
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T17:40:45.190

你想要~~数组~~对象。[`arguments`](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments)

 ~~```
function x(a, b, c){
    console.log(arguments); // [1,2,3]
}

x(1,2,3); 
```

**更新**：`arguments`实际上不是一个数组，它是一个“类似数组的对象”。要创建一个真正的数组，请执行以下操作：

```
var args = Array.prototype.slice.call(arguments); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-19T17:47:41.537

您使用该`arguments`对象（它不是其他答案中所述的*数组*，它具有其他一些有趣的属性，请参见 [此处](http://javascriptweblog.wordpress.com/2011/01/18/javascripts-arguments-object-and-beyond/)）。当您定义函数本身时，它会在函数的范围内自动创建。

```
functon bar(arg1,arg2,arg3,...)
{
     console.log(arguments[2]); // gets "arg2"'s value
} 
```

还有另一种形式作为函数对象的属性：

```
function foo(a,b,c,d) {
}

var args = foo.arguments; 
```

但是，虽然受到支持，但它已被弃用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-19T17:40:23.520

访问参数对象。

```
function(a, b, c){
    console.log(arguments);
    console.log(arguments[0]);
    console.log(arguments[1]);
    console.log(arguments[2]);
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-19T17:40:32.443

使用参数：

```
for (var i = 0; i < arguments.length; i++) {
  // arguments[i]
} 
```~~

# scala - Scala SBT Playframework 总是显示欢迎页面

> ID：11106354
> 
> 赞同：0
> 
> 时间：2012-06-19T17:38:56.300
> 
> 标签：scala, playframework, sbt, playframework-2.0

当我转到 sbt 并键入命令“start”时，它会向我显示它应该向我显示的内容，一个带有简单消息的简单页面。

但是当我去 sbt 并输入命令“运行”时，它会显示一个欢迎屏幕。路由文件显示发送到应用程序控制器和索引函数的默认页面。index 函数调用 index.scala.html。

为什么选择“运行”时总是出现欢迎屏幕？我无法摆脱欢迎页面。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T18:46:08.873

一切正常，欢迎屏幕总是显示在新创建的应用程序中`development mode`。开发模式通过命令调用`run`（与命令`production mode`开始相反`start`）。

正如您所发现的 - 要摆脱这个，您只需要替换`index.scala.html`视图的默认内容 - 之后，这**绝对是您的**视图，不再受到欢迎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:06:04.513

我仍然不确定为什么我总是看到欢迎屏幕，但是更改控制器中的视图解决了这个问题。

# c# - 将领域模型类型转换为 ViewModel

> ID：11106356
> 
> 赞同：4
> 
> 时间：2012-06-19T17:39:14.320
> 
> 标签：c#, asp.net-mvc, architecture, type-conversion, viewmodel

我有兴趣发现开发人员用来将他们的视图从他们的领域模型中抽象出来的不同方式。

目前，我为要在视图中使用的每个模型创建一个 ViewModel，并且我有一个转换器`IConverter<TIn,TOut>`来执行此操作。

我注意到的是，对于包含其他类型集合的类型，我为层次结构中的每种类型都有一个 ViewModel，而转换器使用其他转换器来构建最终的 ViewModel。

举个例子：

假设我有这个使用 FluentNHibernate 构建的域模型结构：

```
public class User
{
 [...]
   public virtual IEnumerable<QuestionSubscription> QuestionSubscriptions{get;set;}
}

public class QuestionSubscription
{
   public virtual bool VerifiedSubscription{get;set;} 
   public virtual Question Question{get;set;}
} 
```

鉴于我的工作方式，我将拥有 3 个 ViewModel 来支持这一点，并且由于我使用我的自定义转换器，因此会有一个从用户到问题的转换链：（为简洁起见，缩短了一些名称）

```
_userToUserViewModelConverter.Convert(userModel)
              |
              V 
              _qSubscriptionToViewModelConverter.Convert(userModel.QSubscriptions)
                   |
                   V
                  _questionToViewModelConverter.Convert(QSubscription.Question) 
```

这很好用，我只是想知道其他管理方式。

**我的第一个问题**是，你认为我不让我的领域模型触及我的观点采取了正确的方法吗？

**其次**，假设问题 1 为“是”，您会使用相同的方法让转换器执行其他转换器还是在控制器中一次执行每个转换器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:47:47.327

查看 automapper 中的嵌套映射：[嵌套映射](https://github.com/AutoMapper/AutoMapper/wiki/Nested-mappings)

这将为您节省大量时间，如果您在项目中使用 ORM，映射将很快成为小菜一碟:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:24:19.120

我经常有暴露域对象的视图，我认为在大多数情况下这没有什么问题。

我发现扁平化域对象通常使我的观点更加直接和易于理解，因为我删除了对象层次结构或至少简化了它。看来您的方法是一种扁平化对象的方法？

如果您还不熟悉[AutoMapper](http://automapper.org/) ，我会看看它。这是我通常用来将我的域对象扁平化为视图的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:52:14.720

> 我的第一个问题是，你认为我不让我的领域模型触及我的观点采取了正确的方法吗？

答案是：是的，这是处理软件的正确方法，正如 MVVM、MVC、MVP、MVPVM 等许多范例所展示的那样，它们都试图解决在视图中直接连接模型对象所产生的一些问题。

> 其次，假设问题 1 为“是”，您会使用相同的方法让转换器执行其他转换器还是在控制器中一次执行每个转换器？

通常，ViewModel 是 View 和 Model 之间的适配器。

因此，>通常<不是模型中的每个类都有一个 ViewModel，而是一个代表将在视图中显示的抽象部分的 ViewModel。

例如，这可以是整个公式、列表，尤其是列表中的项目，通常由模型的 1..n 个对象组成。但是：ViewModel 最有趣的一点是，它将所有这些数据以一种可以轻松绑定（绑定？）视图的形状获取。这样，视图就有了一些简单易懂的方式来访问它需要的数据。如果设计得当，它只需要在模型发生变化时进行小的更新。

关于模型是什么以及如何构建一个感知变化的应用程序，即可维护和可测试，即很容易断言您的软件符合预期，有一些非常好的资源。

我建议阅读：[分层架构中的 WPF 应用程序框架 (WAF) / MVVM](http://waf.codeplex.com/wikipage?title=Architecture%20-%20Get%20The%20Big%20Picture)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T10:24:51.770

您还应该看看[ValueInjecter](http://valueinjecter.codeplex.com/ "价值注入器")（是的，它是这样拼写的）。我同时使用了 Automapper 和 ValueInjecter，发现在大多数情况下，使用 ValueInjecter 更容易，因为它不像 Automapper 那样涉及设置。Automapper 更适合更复杂的对象和具有嵌套集合的对象。

# css - 渐变中的渐变？

> ID：11106359
> 
> 赞同：2
> 
> 时间：2012-06-19T17:39:45.660
> 
> 标签：css, webkit

好吧，我不知道这是否可能，只是我的代码有问题......

那么，我尝试在渐变中制作线性渐变？

`background: -webkit-linear-gradient(top, #9DB2F0 0%, #9DB2F0 40%, -webkit-linear-gradient(left, red 0%, yellow 100%) 40%)`

如果可能的话，请告诉我我是否做错了什么，或者它可能在哪个浏览器中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T17:43:28.230

渐变是[图像值](http://www.w3.org/TR/css3-images)，而不是[颜色值](http://www.w3.org/TR/css3-color)。由于 CSS3 中的渐变仅使用色标，因此您不能这样嵌套它们。

您需要找到一个渐变或图像编辑器，它可以帮助您可视化最终渐变的外观（因为我不知道您希望它看起来像什么），并且可能会生成相应的单个线性渐变你。

不过，从我所见，它看起来像是一个多向渐变。在这种情况下，您要么想要使用[分层背景](http://www.w3.org/TR/css3-background/#layering)（每层有一个渐变），要么甚至使用实际图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:14:56.453

只需在@BoltClock 中添加一些可以玩的技巧：

*   正如他在回答中所说的那样，分层背景。它使用多个背景“图像”（渐变）完成。每一个都可以通过以下方式控制：

    ```
    background-position: left center, right top;
    background-repeat: repeat, no-repeat; 
    ```

    如果您有 2 个图像/渐变要设置样式。

*   渐变添加到`:before`和`:after`伪。您可以根据需要调整这些伪图像的大小和位置（您必须：绝对定位，`z-index`在主背景和实际内容之间进行一些分层等）。例如，请参阅我以前的答案和小提琴：[使用 CSS 显示两个不同的渐变作为背景？](https://stackoverflow.com/questions/11046033/showing-two-different-gradients-as-a-background-using-css/11046122#11046122)

    看来您不能通过`content: url() url()`, 只有图像（url() 的任何有效值）添加渐变。并且通过添加的内容`content`无法控制为真实背景（重复，位置），因此即使有效，它也不是最通用的方法。

# ios - NSURLIsExcludedFromBackupKey 解决方法？

> ID：11106360
> 
> 赞同：0
> 
> 时间：2012-06-19T17:39:50.670
> 
> 标签：ios, backup, icloud, skip

目前我有一个看起来像这样的方法来防止文件被 iCloud 备份：

```
- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{
    const char* filePath = [[URL path] fileSystemRepresentation];
    const char* attrName = "com.apple.MobileBackup";
    if (&NSURLIsExcludedFromBackupKey == nil) {
        // iOS 5.0.1 and lower
        u_int8_t attrValue = 1;
        int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
        return result == 0;
    }
    else {
        // First try and remove the extended attribute if it is present
        int result = getxattr(filePath, attrName, NULL, sizeof(u_int8_t), 0, 0);
        if (result != -1) {
            // The attribute exists, we need to remove it
            int removeResult = removexattr(filePath, attrName, 0);
            if (removeResult == 0) {
                NSLog(@"Removed extended attribute on file %@", URL);
            }
        }

        // Set the new key
        return [URL setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:nil];
    }
} 
```

问题是，它使用 iOS 5.1 及更高版本的 API：NSURLIsExcludedFromBackupKey

在支持 5.1 以下的设备时，这对我来说是个问题。尽管下面的代码说它支持 5.1 以下的设备，但它有时会崩溃并且不一致。

那么，有什么方法可以防止文件在不使用 NSURLIsExcludedFromBackupKey API 的情况下被 iCloud 备份？

谢谢！

# css - p style=display:inline 麻烦

> ID：11106363
> 
> 赞同：1
> 
> 时间：2012-06-19T17:40:05.427
> 
> 标签：css, text, inline, paragraph

我正在尝试创建一个列表，每个列表都`<li>`在一行。我的问题在于“食物 4”，我需要有一个说明来描述`<h4>`; 我似乎无法清除`<p>`. 我已经尝试`<p style="display:inline>`了我能想到的每一个变化。我错过了什么？

```
<div id="carte">
        <h3 class="list-title">Menu a la carte</h3>
        <ul>
            <li><h4>Food 1 $20</h4></li>
            <li><h4>Food 2 $30</h4></li>
            <li><h4>Food 3 $40</h4></li>
            <li><h4>Food 4 $50</h4><p>vegetarian</p></li>
            <li><h4>Food 5 $60</h4></li>
        </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:42:58.610

你想`h4`和`p`在同一条线上吗？

`h4`默认情况下是`display`ed，`block`因此具有`width`of `auto`... 这意味着整行。所以你应该同时显示**和** `h4`作为`p`和`inline`/或`inline-block`（或者即使`table-cell`你想要垂直对齐）。

`p`编辑：如果标题后面没有文本（例如列表），则不应使用标题。他们应该介绍部分内容。没有内容，没有标题；）除了非常罕见的情况。WCAG 2.0 技术[G141](http://www.w3.org/TR/WCAG-TECHS/G141.html)、[H69](http://www.w3.org/TR/WCAG-TECHS/H69.html)、[G130](http://www.w3.org/TR/WCAG-TECHS/G130.html)和[H42](http://www.w3.org/TR/WCAG-TECHS/H42.html)详细说明了这一点。
它在网络上看起来很不直观，但你不会在 Word 或 Libre/OpenOffice 中留下没有段落的标题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T17:48:48.103

你想要 the`h4`和`p`to be `display:inline`。`h4`是默认的，`display:block`所以它会占据整行。也一样`p`。我们可以将它们都设置为内联，因为它们`li`也显示为块。所以里面的所有东西都是内`li`联的，但每个列表项仍然显示为块。

```
h4, p {
    display: inline;
}​ 
```

[在此处查看演示](http://jsfiddle.net/jg7Uq/)

# android - Android 地图气球旋转

> ID：11106370
> 
> 赞同：0
> 
> 时间：2012-06-19T17:40:25.440
> 
> 标签：android, android-mapview, itemizedoverlay

我正在使用此处提供的 BalloonItemizedOverlay： [https ://github.com/jgilfelt/android-mapviewballoons](https://github.com/jgilfelt/android-mapviewballoons)

它工作得很好。但是我的地图设置为“向上”是用户的方位，即如果用户的方位是东，那么地图将被旋转以使东指向上方。问题是当地图旋转时，气球也会旋转，导致它们变得不可读。基本上，“BalloonView”是一个自定义类，它定义了一个带有几个 TextView 的小气球形状，BalloonItemizedOverlay 扩展了 ItemizedOverlay，但使用这个新的 BalloonView 来显示信息。我已经尝试了几件事，比如获取定义 BalloonView 的 LinearLayout 并旋转它。我什至尝试将整个气球放入我的自定义 RotateView 中，这是一个可以旋转的容器，但这些都不起作用。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:34:17.793

您可以尝试在调用之前覆盖`draw()`并相应地`BalloonView`旋转.`Canvas``super.draw()`

# emacs - 有没有办法在emacs中撤消split-window-below？

> ID：11106377
> 
> 赞同：17
> 
> 时间：2012-06-19T17:40:39.597
> 
> 标签：emacs

如果我将我的框架水平拆分，然后用 split-window-below 垂直拆分其中一个窗口，有没有办法回到水平拆分的 2 个窗口而不必使用 delete-other-windows 然后拆分窗口-right ?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-19T18:19:46.500

如果启用`winner-mode`，您将获得类似于基于堆栈的撤消/重做功能，用于所有窗口配置更改。默认情况下，`C-c <left>`绑定到`winner-undo`，而`C-c <right>`执行`winner-redo`。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-19T18:37:02.630

您可以使用`delete-window`绑定到`C-x 0`.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-19T18:22:16.937

您可以保存窗口配置：

**窗口配置注册** *C-x rw*

并稍后恢复：

**跳转到寄存器** *C-x rj*

使用[寄存器](http://www.gnu.org/software/emacs/manual/html_node/emacs/Registers.html)

# java - 如何反序列化 JSON 数组？

> ID：11106379
> 
> 赞同：7
> 
> 时间：2012-06-19T17:40:44.867
> 
> 标签：java, json, cxf, jax-rs, jackson

我在 CXF 中使用 Jackson 来序列化/反序列化数据。不幸的是，我在配置 CXF/Jackson 来反序列化 JSON 数组时遇到了困难。我很感激帮助解决这个问题。

到目前为止，大部分 json 数据都是对象格式，即

`{ "objectCollection": [ {...}, {...}, {...}... ] }`

但是，有问题的 json 数据采用以下形式：

`[ {...}, {...}, {...} ]`

Web 服务端点需要一个“GroupsDto”对象（见下文），它有一个属性——一组组，通过 JSON 数组传输。

```
@PATH(...)
public Response createGroups(GroupsDto groups) {
...
} 
```

我在 GroupsDto 集合属性中添加了如下@JsonDeserialize，但它不起作用。我继续得到：“无法从 START_ARRAY 令牌中反序列化 GroupsDto 的实例”

```
public class GroupsDto {

       private Collection<GroupDto> groups;

       /**
        * @return the groups
        */
       @XmlElement(name="group")
       @JsonDeserialize(contentAs=GroupDto.class)
       public Collection<GroupDto> getGroups() {
               return groups;
       }
...
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-19T09:27:01.767

如果 json 数据的形式为：

```
[ {...}, {...}, {...} ] 
```

你必须使用添加另一个类说'包装器'：

```
@JsonIgnoreProperties(ignoreUnknown = true)
public class ListDto extends ArrayList<GroupDto> {

    public ListDto() {
    }
} 
```

并在脱轨时使用此类。这种方法对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:23:14.737

您只需要`@JsonDeserialize(contentAs=GroupDto.class)`在您的**setter**中指定。序列化总是在**得到**反序列化总是在**set**，或者如果你愿意，你可以在字段上指定两者。

[序列化](http://jackson.codehaus.org/1.2.1/javadoc/org/codehaus/jackson/map/annotate/JsonSerialize.html)和[反](http://jackson.codehaus.org/1.2.1/javadoc/org/codehaus/jackson/map/annotate/JsonDeserialize.html)序列化的文档

代码示例：

```
import java.io.IOException;
import java.util.List;

import org.codehaus.jackson.JsonGenerationException;
import org.codehaus.jackson.map.JsonMappingException;
import org.codehaus.jackson.map.ObjectMapper;
import org.codehaus.jackson.map.annotate.JsonDeserialize;

public class JacksonDeserialize {

    public static class ModelClass {

        private String name;

        public ModelClass() {
        }

        public String getName() {
            return name;
        }

        public void setName(final String name) {
            this.name = name;
        }

        public ModelClass(final String name) {
            super();
            this.name = name;
        }

        @Override
        public String toString() {
            return "ModelClass [name=" + name + "]";
        }

    }

    public static class ListModelClass {

        private List<ModelClass> list;

        @JsonDeserialize(contentAs = ModelClass.class)
        public void setList(final List<ModelClass> list) {
            this.list = list;
        }

        @Override
        public String toString() {
            return "ListModelClass [list=" + list + "]";
        }

    }

    public static void main(final String[] args) throws JsonGenerationException, JsonMappingException, IOException {
        ObjectMapper objectMapper = new ObjectMapper();
        System.out.println(objectMapper.readValue("{\"list\":[{\"name\":\"name1\"},{\"name\":\"name2\"}]}",
                ListModelClass.class));
    }

} 
```

# jquery - Jquery中的嵌套手风琴菜单

> ID：11106382
> 
> 赞同：0
> 
> 时间：2012-06-19T17:41:10.450
> 
> 标签：jquery, menu, accordion

我有一个问题，找不到解决方案。我正在 jquery 中制作手风琴菜单，并希望菜单的第二级一次打开一个。

并希望在网站上使用它来帮助如何在页面重新加载时保持打开状态。

我第一次问很抱歉，如果它不可读。

希望任何人都可以提供帮助。

我是这种东西的菜鸟。

```
$(document).ready(function(){
  menuHead = $('.slide-list li a').click(function() {
    $('.selected').removeClass('selected');
    $(this).addClass('selected');
    $(this).next().toggle("slow");
  });    
});
```

```
* {
  margin: 0;
  padding: 0;   
}

html, body {
  height: 100%;
  width: 100%;  
}

a:link {
  text-decoration:none;
  color: #000;
}

a:active {
  text-decoration:none;
  color: #000;
}

a:visitied {
  text-decoration:none;
  color: #000;  
}

a:hover {
  text-decoration:none;
  color: #CCC;
}

#menu-wrapper {

}

#menu-wrapper ul.slide-list li {
  list-style-type: none;    
}

#menu-wrapper ul.slide-list li a.selected {
  color: #F00;  
}

#menu-wrapper ul.slide-list li ul {
  display: none;    
}

#menu-wrapper ul.slide-list li ul li ul {
  display: none;    
}
```

```
<script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<div id="menu-wrapper">
  <ul class="slide-list">
    <li>
        <a href="javascript:void()">menu item 1</a>
          <ul>
            <li>
                <a href="javascript:void()">submenu item 1 level 2</a>
                  <ul>
                    <li>
                        <a href="javascript:void()">submenu item level 3</a>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="javascript:void()">submenu item 2 level 2</a>
                  <ul>
                    <li>
                        <a href="javascript:void()">submenu item level 3</a>
                      </li>
                  </ul>
              </li>
          </ul>
      </li>
      <li>
        <a href="javascript:void()">menu item 2</a>
          <ul>
            <li>
                <a href="javascript:void()">submenu item 1 level 2</a>
              </li>
          </ul>     
      </li>
    <li>
        <a href="javascript:void()">menu item 3</a>
      </li>
  </ul>
</div>
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:12:09.720

试试这个

```
if(window.location.hash.length > 0){
  var $licurrent = $($('.slide-list li').get(window.location.hash.replace('#','')));
  $licurrent.parents("ul").show();
  $licurrent.find("ul:first").show();
  $licurrent.find("a:first").addClass("selected");
}

$(document).ready(function(){
  $('.slide-list li a').click(function(e) {                     
      e.preventDefault();
      $('.selected').removeClass('selected');
      $(this).addClass('selected');

      var $licurrent = $(this).parent();
      window.location.hash = $('.slide-list li').index($licurrent);

      $licurrent.parent().find("li").not($licurrent).find("ul").hide("slow");
      $(this).next("ul").toggle("slow");
  });
});
```

```
* {
  margin: 0;
  padding: 0;    
}

html, body {
  height: 100%;
  width: 100%;    
}

a:link {
  text-decoration:none;
  color: #000;
}

a:active {
  text-decoration:none;
  color: #000;
}

a:visitied {
  text-decoration:none;
  color: #000;    
}

a:hover {
  text-decoration:none;
  color: #CCC;
}

#menu-wrapper {

}

#menu-wrapper ul.slide-list li {
  list-style-type: none;  
}

#menu-wrapper ul.slide-list li a.selected {
  color: #F00;    
}

#menu-wrapper ul.slide-list li ul {
  display: none;  
}

#menu-wrapper ul.slide-list li ul li ul {
  display: none;  
}
```

```
<script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<div id="menu-wrapper">
  <ul class="slide-list">
      <li>
          <a href="javascript:void()">menu item 1</a>
          <ul>
              <li>
                  <a href="javascript:void()">submenu item 1 level 2</a>
                  <ul>
                      <li>
                          <a href="javascript:void()">submenu item level 3</a>
                          <ul>
                            <li>
                                <a href="javascript:void()">submenu item level 4</a>
                            </li>
                          </ul>
                      </li>
                  </ul>
              </li>
              <li>
                  <a href="javascript:void()">submenu item 2 level 2</a>
                  <ul>
                      <li>
                          <a href="javascript:void()">submenu item level 3</a>
                      </li>
                  </ul>
              </li>
          </ul>
      </li>
      <li>
          <a href="javascript:void()">menu item 2</a>
          <ul>
              <li>
                  <a href="javascript:void()">submenu item 1 level 2</a>
              </li>
          </ul>     
      </li>
      <li>
          <a href="javascript:void()">menu item 3</a>
      </li>
  </ul>
</div>
```

此代码将在 URL 中添加哈希，当您刷新页面时，您会发现该菜单已被选中。

# python - Objective-C 中的 URL 安全 Base64

> ID：11106393
> 
> 赞同：6
> 
> 时间：2012-06-19T17:41:33.960
> 
> 标签：python, objective-c, base64, zlib

我查看了许多关于如何在 Objective C 中解码 Base64 编码字符串的 Stack Overflow 帖子，但我仍然遇到问题。

本质上，我正在尝试将 Python 脚本移植到 Objective C。Python 代码行是：

```
zlib.decompress(base64.urlsafe_b64decode(string)) 
```

当我通过 Python 版本的 base64.urlsafe_b64decode 运行“字符串”时，结果是正确的，然后可以正确地进行 Zlib 解压缩。当我通过Objective C Base64解码器的任何变体运行“字符串”时，它有点工作，但结果不一样，Zlib解压缩失败。

URL安全的Base 64解码和SO上广泛可用的代码之间有区别吗？如果有人以前遇到过这样的困难，任何关于如何做的见解都会受到赞赏。

谢谢，所以！

**编辑 1：我使用了**[此处](http://projectswithlove.com/projects/NSData_Base64.zip)找到的 Base 64 代码。原始数据（仍然是 Base64 编码的）可以在[这里](http://jakewood.org/Fingerprint.txt)找到，Objective-C 生成的可以在[这里](http://jakewood.org/Inflated.txt)找到，Python 生成的可以在[这里](http://jakewood.org/Python.txt)找到。理想情况下，我希望 Objective C 代码解码为与 Python 脚本相同的文本。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-19T18:47:24.100

特别感谢 Graham 指出 RFC 的不同之处，我得以解决问题。如果将来有人遇到此问题，请按以下方法解决：

1.  [从这里](http://projectswithlove.com/projects/NSData_Base64.zip)下载 NSData+Base64 代码。
2.  在`NSData+Base64.m`中，您需要将查找表更改为以下内容：

> ```
> //
> // Mapping from 6 bit pattern to ASCII character.
> //
> static unsigned char base64EncodeLookup[65] =
> "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";
> 
> //
> // Definition for "masked-out" areas of the base64DecodeLookup mapping
> //
> #define xx 65
> 
> //
> // Mapping from ASCII character to 6 bit pattern.
> //
> static unsigned char base64DecodeLookup[256] =
> {
>     xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, 
>     xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, 
>     xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, 62, xx, xx, 
>     52, 53, 54, 55, 56, 57, 58, 59, 60, 61, xx, xx, xx, xx, xx, xx, 
>     xx,  0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 
>     15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, xx, xx, xx, xx, 63, 
>     xx, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 
>     41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, xx, xx, xx, xx, xx, 
>     xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, 
>     xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, 
>     xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, 
>     xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, 
>     xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, 
>     xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, 
>     xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, 
>     xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, xx, 
> }; 
> ```

这将使 Objective C 的解码等同于 Python 的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-02-23T21:42:45.813

iOS 7.0 及更高版本在 NSData 上具有方法“base64EncodedStringWithOptions”，它将执行上述查找。但此方法不返回 URL 安全编码字符串。因此，必须手动进行替换以获得 URL 安全编码字符串。见下文..

```
NSData *originalData = [originalString dataUsingEncoding:NSUTF8StringEncoding];
NSString *base64String = [originalData base64EncodedStringWithOptions:NSDataBase64Encoding64CharacterLineLength];
base64String = [base64String stringByReplacingOccurrencesOfString:@"/" withString:@"_"];
base64String = [base64String stringByReplacingOccurrencesOfString:@"+" withString:@"-"]; 
```

生成的 base64String 现在是 URL 安全的。

# python - sed -unterminated `s' 命令

> ID：11106394
> 
> 赞同：0
> 
> 时间：2012-06-19T17:41:41.183
> 
> 标签：python, sed

我使用以下 sed 命令查找旧字符串并将其替换为新字符串：

```
 cmd = "sed -i 's/"+oldstr+"/"+newstr+"/'"+ "path_to/filename" #change the string in the file
  os.system(cmd) # am calling the sed command in my python script 
```

但我得到这个错误：

```
sed: -e expression #1, char 8: unterminated `s' command 
```

有人可以告诉我我的 sed 命令有什么问题吗？或者我给文件名的方式有什么问题吗？

更新：该命令的回显： sed -i 's/6.9.28 /6.9.29/' dirname/filename

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:00:45.167

无需调用`sed`

```
with open("path_to/filename") as f:
    file_lines = f.readlines()
    new_file = [line.replace(oldstr,newstr) for line in file_lines]

open("path_to/filename","w").write(''.join(new_file)) 
```

编辑：

结合 Joran 的评论：

```
with open("path_to/filename") as f:
    file = f.read()
    newfile = file.replace(oldstr,newstr)

open("path_to/filename","w").write(newfile) 
```

甚至

```
with open("path_to/filename") as f:
    open("path_to/filename","w").write(f.read().replace(oldstr,newstr)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:57:50.620

我不知道这是否是唯一的错误，但您可能希望在路径名之前有一个空格，以将其与命令分开：

```
cmd = "sed -i 's/%s/%s/' %s"%(oldstr, newstr, "path_to/filename") 
```

（我切换到字符串格式化操作符以使`sed`命令行的整体结构更易于查看）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T17:51:08.663

我不知道你的命令出了什么问题。无论如何，使用[subprocess.call()](http://docs.python.org/library/subprocess.html#subprocess.call)函数肯定会更好。假设我们有文件：

```
$ cat test.txt 
abc
def 
```

现在，如果我执行以下程序：

```
import subprocess
oldstr = 'a'
newstr = 'AAA'
path = 'test.txt'
subprocess.call(['sed', '-i', 's/'+oldstr+'/'+newstr+'/', path]) 
```

我们得到这个：

```
$ cat test.txt 
AAAbc
def 
```

此外，如果你的`oldstr`/里面`newstr`有一些斜线 ( `/`)，你的命令也会中断。我们可以通过用转义的斜杠替换斜杠来解决它：

```
>>> print 'my/string'.replace('/', '\\/')
my\/string 
```

所以，如果你有这个文件：

```
$ cat test.txt 
this is a line and/or a test
this is also a line and/or a test 
```

并且您想替换`and/or`，只需在变量中相应地替换斜杠：

```
import subprocess
oldstr = 'and/or'
newstr = 'AND'
path = 'test.txt'
subprocess.call(['sed', '-i', 's/'+oldstr.replace('/', '\\/')+'/'+newstr.replace('/', '\\/')+'/', path]) 
```

当然，它可以更具可读性：

```
import subprocess
oldstr = 'and/or'
newstr = 'AND'
path = 'test.txt'
sedcmd = 's/%s/%s/' % (oldstr.replace('/', '\\/'), newstr.replace('/', '\\/'))
subprocess.call(['sed', '-i', sedcmd, path]) 
```

# jquery - 如何在 jQuery UI 自动完成中设置至少两个字符？

> ID：11106395
> 
> 赞同：12
> 
> 时间：2012-06-19T17:41:42.557
> 
> 标签：jquery, jquery-ui

我正在使用 jQuery 自动完成功能，并且希望仅在用户键入至少 2 个字符时才限制显示结果。怎么做？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-19T17:49:30.570

作为记录：

在自动完成激活之前用户必须输入的最少字符数。零对于只有几个项目的本地数据很有用。当有很多项目时应该增加，其中单个字符将匹配几千个项目。

**代码示例**

使用指定的 minLength 选项初始化自动完成。

```
$( ".selector" ).autocomplete({ minLength: 0 }); 
```

在 init 之后获取或设置 minLength 选项。

```
//getter
var minLength = $( ".selector" ).autocomplete( "option", "minLength" );
//setter
$( ".selector" ).autocomplete( "option", "minLength", 0 ); 
```

minLengthInteger 默认值：1

[文档](http://jqueryui.com/demos/autocomplete/#option-minLength)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T17:50:25.670

```
$( "#myselectbox" ).autocomplete({ minLength: 2 }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-12T11:27:51.390

没有 minLength 属性。您正在搜索的属性是**minChars**。

见[https://github.com/devbridge/jQuery-Autocomplete](https://github.com/devbridge/jQuery-Autocomplete)

# android - ListView addHeaderView 导致位置加一？

> ID：11106397
> 
> 赞同：98
> 
> 时间：2012-06-19T17:41:45.067
> 
> 标签：android, listview, listadapter

下面是一个带有 ListView 的代码片段。我添加了一个emptyView 和一个headerView。添加 headerView 会导致 onItemClick 中的位置增加一。

因此，如果没有 headerView，第一个列表元素的位置将为 0，而使用 headerView，第一个列表元素的位置将为 1！

这会导致我的适配器出现错误，例如在调用 getItem() 和使用其他一些方法时，请参见下文。奇怪的事情：在适配器的 getView() 方法中，第一个列表元素被请求位置为 0，即使添加了 headerView ！

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    ListView list = (ListView) viewSwitcher.findViewById(R.id.list);
    View emptyView = viewSwitcher.findViewById(R.id.empty);
    list.setEmptyView(emptyView);

    View sectionHeading = inflater.inflate(R.layout.heading, list, false);
    TextView sectionHeadingTextView = (TextView) sectionHeading.findViewById(R.id.headingText);
    sectionHeadingTextView.setText(headerText);
    list.addHeaderView(sectionHeading);

    list.setAdapter(listAdapter);

    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            listAdapter.getItem(position);
            //Do something with it
        }
    });
} 
```

一些适配器方法：

```
@Override
public int getViewTypeCount() {
    return TYPE_COUNT;
}

@Override
public int getItemViewType(int position) {
    return (position < items.size()) ? ITEM_NORMAL : ITEM_ADVANCED;
}

    @Override
public Product getItem(int position) {
    return items.get(position);
}
@Override
public boolean areAllItemsEnabled() {
    return false;
}

@Override
public boolean isEnabled(int position) {
    return (position < items.size());
} 
```

这是添加 headerView 时的正常行为吗？以及如何克服适配器中的问题？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-11-15T16:56:11.873

我刚刚遇到了这个问题，最好的方法似乎是使用`ListView.getItemAtPosition(position)`而不是`ListAdapter.getItem(position)`作为`ListView`标题的版本帐户，即：-

改为这样做：

```
myListView.getItemAtPosition(position) 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-04-17T14:10:33.100

如果您不关心对标题的点击，请从位置中减去标题视图的数量以获得适配器的位置：

```
 listView.addHeaderView(inflater.inflate(
                R.layout.my_hdr_layout, null), null, false);
        listView.setAdapter(m_adapter);
        listView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            position -= listView.getHeaderViewsCount();
            final MyObject object = m_adapter.getItem(position);

        }
    }); 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-06-19T17:55:30.710

如果您将标题添加到`ListView`成为列表中的第一项。您可以通过覆盖来弥补这一点，`getCount()`以少返回一个项目，但确保您处理`getItem()`,`getItemId()`等等，因为标题将是位置 0 中的项目。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-02-26T04:14:03.487

在实现时`AdapterView.OnItemClickListener`，我们只是从位置中减去标题。

```
@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    position -= mListView.getHeaderViewsCount();
    // what ever else follows...
} 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-02-27T05:26:15.007

无需更改任何代码。只需使用下面的代码。

```
 list.setOnItemClickListener(new OnItemClickListener() {
     @Override
     public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
      parent.getAdapter().getItem(position);
         //Do something with it
     }
}); 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-01-20T04:03:06.763

不要使用您的适配器，请使用 getAdapter 中的“装饰”适配器。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-11-21T08:48:57.510

一种解决方案是将 id 映射到索引。基本上让 id 返回列表中的索引，点击监听器会这样做：

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            listAdapter.getItem((int) id);
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-05-23T13:16:46.570

嗨，我们可以通过这种方式解决此问题，首先您创建标题视图，然后在您的列表中注入，最后一步无法 setOnClickListener。它对我有用。欢迎任何反馈

```
ViewGroup headerView = (ViewGroup) getLayoutInflater().inflate(R.layout.your_header, list,false);
list.addHeaderView(headerView);
headerView.setEnabled(false);
headerView.setOnClickListener(null); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-26T03:35:18.287

不要添加很多@Ramesh 没有添加的新内容，而是添加一些额外的上下文：

```
personList.setOnItemClickListener(new OnItemClickListener() {
    @SuppressWarnings("unchecked")
    public void onItemClick( AdapterView<?> parent, View view, int position, long duration) {
        Map<String, Object> person = (Map<String, Object>) parent.getAdapter().getItem(position);
        if (person != null){

            // If the header was clicked on a null  is returned

            OnPersonUiChangeListener listener = (OnPersonUiChangeListener) getActivity();
            listener.onSelectedPersonChanged(person);
        }
    }
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-12-11T02:39:44.293

使用 getSelectedItemPosition() 返回当前选中项在适配器数据集中的位置。这种方法不需要担心页眉或页脚的大小。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-09T11:32:03.120

这可能对某人有所帮助，改进 Farid_z 和 Philipp 的答案，我们可以正确应用 setItemChecked 和 setTitle 类似这样的东西

```
 FragmentManager fragmentManager = getSupportFragmentManager();
        fragmentManager.beginTransaction().replace(R.id.content_frame, fragment).commit();
        position += 1;
        mDrawerList.setItemChecked(position, true);
        mDrawerList.setSelection(position);
        position -= 1;
        setTitle(mNavigationDrawerItemTitles[position]);
        mDrawerLayout.closeDrawer(mDrawerList); 
```

# c - 未导出函数时查找要调用的函数地址

> ID：11106399
> 
> 赞同：3
> 
> 时间：2012-06-19T17:41:53.630
> 
> 标签：c, windows, hex, portable-executable

在 Windows 上，我知道如果函数未导出，您始终可以扫描 DLL 或 PE 以获取特定的字节字符串以获取地址。

现在我的问题是如何在十六进制编辑器中找到这些函数，以便我可以使用相邻字节扫描并获取函数地址？

# windows - 使用 windbg 转储 EPROCESS

> ID：11106402
> 
> 赞同：4
> 
> 时间：2012-06-19T17:42:10.183
> 
> 标签：windows, windows-7, windbg

我正在试验 LibVMI 和 Windows 7 32 位；为了正确设置，我需要查看 EPROCESS 结构的前 8 个字节（该库在内存中搜索一个幻数，这应该是它）。

我的 Windows-fu 不强，所以谁能告诉我如何转储适当的内存？我正在运行本地内核调试器，并且我已经达到了“dt nt！_EPROCESS”，但这似乎只是向我展示了结构的格式，而不是它的实际内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T06:44:20.143

命令是：

```
dt nt!_EPROCESS <address> 
```

您应该能够从`!process 0 7`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:41:26.547

我想通了——Seva Titov 的回答与我所做的类似。我是这样做的：

`!process 0 0`

这给了我一个正在运行的进程的简短列表；我专门启动了 calc.exe 来运行一个简单的小程序，所以我查看了列表然后运行：

`!process calc.exe`

第一行输出的开头`PROCESS 83f81178`是重要的部分。然后我做了：

`db 83f81178`

这向我展示了从该偏移量开始的一大块内存，看起来像这样：

`83f81178 03 00 26 00 00 00 00 00--80 11 f8 83 80 11 f8 83 ..&............` `83f81188 88 11 f8 83 88 11 f8 83--80 23 e2 3e 00 00 00 00 ........#.>....`

那是我需要的，所以我停在那里。

# java - JLS的“覆盖和隐藏要求”中子类的返回类型不兼容

> ID：11106403
> 
> 赞同：1
> 
> 时间：2012-06-19T17:42:12.623
> 
> 标签：java, jls

引用 JLS

> 如果具有返回类型 R1 的方法声明 d1 覆盖或隐藏具有返回类型 R2 的另一个方法 d2 的声明，则 d1 必须是可替代 d2 的返回类型，否则会发生编译时错误。 **此外，如果 R1 不是 R2 的子类型，则必须发出未经检查的警告（除非被抑制（第 9.6.1.5 节））。**方法声明不得有与它覆盖或隐藏的任何方法冲突（第 8.4.6 节）的 throws 子句；否则，会发生编译时错误。

粗体句子是否与段落的第一部分相矛盾。

我可以在下面的 JLS 中读到这适用于通用返回，例如

`List<String>`返回类型被返回类型覆盖，`List`但 JLS 中的那句话仍然不排除这种情况，如果还有其他情况适用该句子，你能澄清一下吗？

# winapi - 将 IO 优先级设置为低而不是非常低

> ID：11106407
> 
> 赞同：0
> 
> 时间：2012-06-19T17:42:42.947
> 
> 标签：winapi

我正在尝试将进程的 IO 优先级设置为 LOW。目前我正在使用 PROCESS_MODE_BACKGROUND_BEGIN 调用 SetProiorityClass 函数。这会将 IO 优先级设置为“非常低”。我如何将其设置为“低”一级

[http://msdn.microsoft.com/en-us/library/ms686219(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms686219(VS.85).aspx)

# android - 如果每个列表视图有多个文本视图，如何设置适配器？

> ID：11106418
> 
> 赞同：10
> 
> 时间：2012-06-19T17:43:04.283
> 
> 标签：android, android-layout, android-listview

我`TextView`的`ListView`. 我已经学会了写一个`getView`我相信的正确方法，但我不确定我用什么`setAdapter`来调用那个方法。

```
private static String[] project = {"proj1","proj2"};
private static String[] workRequests = {"requirement gathering", "design"};
private static String[] startDate = {"02/21/2012","07/15/2011"};
private static String[] status = {"WIP","DONE"};

ListView mListView;

public class MyDashboardActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mydashboard);

        final LayoutInflater mInflater = LayoutInflater.from(this);
        mListView = (ListView)findViewById(R.id.dashboardList);
        mListView.setAdapter(
                // How do I set the adapter?
                );
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        System.out.println("enters");
        if(convertView == null){
            convertView = LayoutInflater.from(this).inflate(R.layout.mydashboard,null);
        }

        ((TextView) convertView.findViewById(R.id.project)).setText(project[position]);
        ((TextView) convertView.findViewById(R.id.work_request)).setText(workRequests[position]);
        ((TextView) convertView.findViewById(R.id.start_date)).setText(startDate[position]);
        ((TextView) convertView.findViewById(R.id.status)).setText(status[position]);

        return convertView;
    } 
```

这是xml布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/home_root"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <!-- Include Action Bar -->
    <include layout="@layout/actionbar_layout" />

    <ListView
        android:id="@+id/dashboardList"
        style="@style/LeftHeaderText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:background="@drawable/innerdashboard_bg"
        android:textColor="@color/textColor" >

        <TextView android:id="@+id/project" />

        <TextView android:id="@+id/work_request" />

        <TextView android:id="@+id/start_date" />

        <TextView android:id="@+id/status" />

    </ListView>

</LinearLayout> 
```

我尝试了几种方法，但都没有奏效。谁能建议在这种情况下如何设置适配器？谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-19T19:02:47.260

您需要实现自己的适配器。我的方法是定义一个“代表”视图的对象。

下面，有一个非常简单的示例，其中有两个`TextViews`可以满足您的需求。

代表视图的对象（ListView 中的一行）：

```
public class CustomObject {

    private String prop1; 
    private String prop2;

    public CustomObject(String prop1, String prop2) {
        this.prop1 = prop1;
        this.prop2 = prop2;
    }

    public String getProp1() {
        return prop1;
    }

    public String getProp2() {
       return prop2;
    }
} 
```

接下来是自定义适配器：

```
public class CustomAdapter extends BaseAdapter {

   private LayoutInflater inflater;
  private ArrayList<CustomObject> objects;

   private class ViewHolder {
      TextView textView1;
      TextView textView2;
   }

   public CustomAdapter(Context context, ArrayList<CustomObject> objects) {
      inflater = LayoutInflater.from(context);
      this.objects = objects;
   }

   public int getCount() {
      return objects.size();
   }

   public CustomObject getItem(int position) {
      return objects.get(position);
   }

   public long getItemId(int position) {
      return position;
   }

   public View getView(int position, View convertView, ViewGroup parent) {
      ViewHolder holder = null;
      if(convertView == null) {
         holder = new ViewHolder();
         convertView = inflater.inflate(R.layout.your_view_layout, null);
         holder.textView1 = (TextView) convertView.findViewById(R.id.id_textView1);
        holder.textView2 = (TextView) convertView.findViewById(R.id.list_id_textView2);
         convertView.setTag(holder);
      } else {
         holder = (ViewHolder) convertView.getTag();
      }
      holder.textView1.setText(objects.get(position).getprop1());
      holder.textView2.setText(objects.get(position).getprop2());
      return convertView;
   }
} 
```

现在您可以在您的活动中定义和设置您的适配器：

```
ArrayList<CustomObject> objects = new ArrayList<CustomObject>();
CustomAdapter customAdapter = new CustomAdapter(this, objects);
listView.setAdapter(customAdapter); 
```

现在您只需要在对象列表中管理您的 CustomObject。`customAdapter.notifyDataSetChanged()`当您想要对 ListView 进行重新修改时，不要忘记调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T18:26:12.270

**您的 getView() 代码需要进入扩展 BaseAdapter 或其子类之一的类。**

一种方法是在 MyDashboardActivity 中创建一个私有类。下面是一个简单的示例（需要一些额外的代码）。您可能还需要一个自定义对象来关联您想要在一个列表项中显示的所有内容。不要使用多个数组，而是使用一个自定义类型的数组，该数组具有您要跟踪的每个值的属性。

还有一件事：您的四个 TextView 应该进入它们自己的布局文件（请参阅[此处](http://developer.android.com/resources/tutorials/views/hello-listview.html)的 list_item.xml ）。该项目布局文件通过自定义适配器的构造函数连接起来（我在下面的代码中添加了注释以突出显示这一点）。

```
protected CustomAdapter mAdapter;

public class MyDashboardActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mydashboard);

        final LayoutInflater mInflater = LayoutInflater.from(this);
        mListView = (ListView)findViewById(R.id.dashboardList);

        mAdapter = new CustomAdapter(this, <array to be adapted>);
        mListView.setAdapter(mAdapter);
    }

    private class CustomAdapter extends ArrayAdapter<String> {

        protected Context mContext;
        protected ArrayList<String> mItems;

        public CustomAdapter(Context context, ArrayList<String> items) {
            super(context, R.layout.custom_list_item, items); // Use a custom layout file
            mContext = context;
            mItems = items;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            System.out.println("enters");
            if(convertView == null){
                convertView = LayoutInflater.from(this).inflate(R.layout.mydashboard,null);
            }

            // You'll need to use the mItems array to populate these...
            ((TextView) convertView.findViewById(R.id.project)).setText(project[position]);
            ((TextView) convertView.findViewById(R.id.work_request)).setText(workRequests[position]);
            ((TextView) convertView.findViewById(R.id.start_date)).setText(startDate[position]);
            ((TextView) convertView.findViewById(R.id.status)).setText(status[position]);

            return convertView;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-28T23:47:30.640

有几种方法可以做到这一点。我将向您展示我的方式，它包含两种布局，第一种是 ListView 它的自身，另一种是每个列表项的文本应如何显示。

列表集.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <ListView
        android:id="@+id/shipMenu"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

listitems.xml（这里也可以放图片，这里的思路是控制）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">

    <TextView
        android:id="@+id/makerID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="10dp"
        android:textSize="25dp"/>

</LinearLayout> 
```

有了上面我还没有艺术品，但我打算为图标添加一个 ImageView（你也可以添加更多的 TextViews）。这是我的自定义适配器类。

ListAdapter.java

```
class ListAdapter extends ArrayAdapter <String>
{

    public ListAdapter(Context context, String[] values) {

        super(context, R.layout.listitems, values); //set the layout that contains your views (not the one with the ListView)
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater inflater = LayoutInflater.from(getContext());
        View view = inflater.inflate(R.layout.listitems, parent, false); //same here.

        String text = getItem(position);

        TextView makerID = (TextView) view.findViewById(R.id.makerID);
        makerID.setText(text);

        return view;
    }

} 
```

在您的主要活动文件集中

```
setContentView (R.layout.listset); 
```

并将其添加到与 setContentView() 相同的括号中

```
ListAdapter adapter = new ListAdapter(this, MyString[]); //place your String array in place of MyString

        ListView lv = (ListView) findViewById(R.id.ListViewID); //the ID you set your ListView to.
        lv.setAdapter(adapter); 
```

**编辑**

我参加聚会有点晚了，但也许这会对某人有所帮助。

# codeigniter - CodeIgniter - 自动加载视图？

> ID：11106419
> 
> 赞同：1
> 
> 时间：2012-06-19T17:43:05.850
> 
> 标签：codeigniter

有没有办法在每个功能（在控制器中）上加载视图（用于页眉或页脚）？我在`if/else`那里有几个陈述，当我需要时改变它会很痛苦。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T17:45:21.833

`__construct`是的，您可以在控制器顶部的函数中加载视图。查看有关[构造函数的 PHP 手册](http://php.net/manual/en/language.oop5.decon.php)

```
function __construct()
{      
        parent::__construct();
        $this->load>-view('your_view');

} 
```

如果`header`and`footer`将是您网站视觉部分的常量和必需组件，但您可能希望在页眉和页脚之间加载不同的内容部分，那么您可以创建一个带参数的函数。

```
 private function doViews($argument) 
 {

        $this->load->view('header');

        $this->load->view($argument);

        $this->load->view('footer');

       return NULL;
 } 
```

您可能希望在`doViews`函数内有一组可用视图，以便正确验证文件是否存在。然后，您只需在控制器中的每个方法中调用该函数，如下所示：

```
$this->doViews('main_content'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:52:05.593

您可以创建您的 main_view ... 作为已经具有结构的母版页：

main_view.php

```
$this->load>-view('header');
<?php //get content here
?>
$this->load>-view('footer'); 
```

如果您想更改页眉或页脚中的某些内容（通过语句），您可以添加内容：

```
function __construct()
{      
        parent::__construct();

        $data['footer'] = ($a == 'foo') ? 'footer one' : 'footer two';

        $data_to_main = $this->load->view('template/footer', $data, TRUE);

        $data_to_main = 'others';

        $this->load>-view('main_view', $data_to_main);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:36:43.340

您应该尝试使用这样的模板库：[https ://github.com/philsturgeon/codeigniter-template](https://github.com/philsturgeon/codeigniter-template)

然后您只需将其放入控制器中（可以在 __construct 或方法中）

```
$this->template->set_partial('header', 'layouts/header');
$this->template->set_partial('footer', 'layouts/footer');
$this->template->set_partial('sidebar', 'layouts/sidebar'); 
```

然后像使用视图一样发送数据：

```
$this->template->build('create', $this->data); 
```

# mysql - 从一个表中返回在另一表中未找到字段的记录

> ID：11106421
> 
> 赞同：1
> 
> 时间：2012-06-19T17:43:16.243
> 
> 标签：mysql

我在这里迷路了，我什至不知道如何最好地为我的问题命名。

我正在创建一个简单的约会网站。我希望女性能够像所有其他约会网站一样阻止男性。发生这种情况时，我不希望在查询中返回女性的个人资料。

表 A 包含所有个人资料信息的成员表，包括成员名称 表 B 被阻止的成员表，其中包含女人的名字和男人的名字，在每个案例中女人阻止了一个男人

所以，我想要这样的东西： $query = 从表 A 中返回所有记录，其中性别 = 女性，并且表 B 中没有包含女性姓名和男性姓名的记录

我想我会对表 B 运行查询以检索所有阻止我的女性，然后对表 A 运行查询以返回我的第一个查询结果中不包含该女性用户名的所有女性。但是，我无法弄清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:48:25.373

如果我理解你的问题......似乎是一个简单的加入，不是吗？不知道我是不是误会了。可能是这样的：

`SELECT * FROM Table1 WHERE Table1.ID NOT IN (SELECT BLOCK_ID FROM table2)`

`Table1`女性的所有 ID 也是如此，并且`Table2`具有所有块 ID（例如）并且您想要其中没有的内容？显然，除此之外还需要进行一些更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:57:32.633

如果您想查看阻止当前用户的所有女性成员的列表，您可以使用如下查询：

```
SELECT member.*
FROM TableA member
JOIN TableB blocked ON (member.name = blocked.user_who_blocked)
WHERE member.sex = female
    AND blocked.blocked_user_name = 'Joe McCurrentUser'
; 
```

因此，如果您想查看**不是**这种情况的用户集，您可以使用 LEFT JOIN 并查找 null id。

```
SELECT member.*
FROM TableA member
LEFT JOIN TableB blocked ON (member.name = blocked.user_who_blocked)
WHERE member.sex = female
    AND blocked.blocked_user_name = 'Joe McCurrentUser'
    AND blocked.id IS NULL
; 
```

您可以根据需要修改表中的实际列。确保您在该表中的 user_who_blocked 和 blocked_user_name 列上都有索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:00:34.143

这行得通吗？

```
Select * from Table A
inner join Table B on a.womans_name = B.womans_name and B.mans_name="Mans Name"
where B.womans_name IS NULL 
```

如果表 B 包含一条与 womans_name 和 mans_name 匹配的记录，则连接将创建一条记录，其中包含表 A 和表 B 中的所有字段，*但*Where 子句将拒绝该记录，因为表 B 中的 womans_name 不会为空。如果表 B 不包含匹配记录，则所有这些字段都将为空（包括 B.womans_name），因此满足 Where 子句。

# java - 使用 java 1.4 使用默认程序打开文件

> ID：11106424
> 
> 赞同：1
> 
> 时间：2012-06-19T17:43:30.477
> 
> 标签：java, desktop-application, desktop

Desktop.getDestop().open(File) 启动关联的应用程序以打开文件。

Desktop 类从 Java 1.6 开始可用 - [http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html](http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html)

如何使用 1.4 Java 版本做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:50:24.960

您可以使用以下命令使用默认应用程序打开文件：

```
 /* build up command and launch */
    String command = "";
    String file = "FILE IN HERE";
    if (isLinux()) {
        command = "xdg-open " + file;
    } else if (isWindows()) {
        command = "cmd /C start " + file;
    } else
        return;

    try {
        Runtime.getRuntime().exec(command);
    } catch (Exception ex) {
        ex.printStackTrace();
    } 
```

从 1.0 开始可用：[运行时](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:50:05.850

`Runtime.exec()`

可以在以下位置找到更多详细信息：http: [//docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html)

# java - Java 的 == 运算符对于原始值可以是不对称的吗？

> ID：11106427
> 
> 赞同：0
> 
> 时间：2012-06-19T17:43:46.693
> 
> 标签：java, identity

Java 的`==`运算符对于**原始值是否可以是****不对称**的，所以, 但是, where和都是一些（**可能不同**的）原始类型的变量？**`x == y``y != x``x``y`**

 ******编辑：**

好吧，我会诚实地说我问的原因。在[Java Puzzlers book](http://www.javapuzzlers.com/)中，有一个谜题 #87，它涉及`==`原始类型的运算符。

它分为三个部分，一是挑战读者找到`==`算子不具有反射性的情况，二是寻找不及物的情况`==`。我已经找到了他们两个的解决方案，但我不知道如何解决第三个问题，它的定义如下：

```
public class Symmetric {
    public static void main(String[] args) throws Exception {
        /*
         * If you can come up with a set of primitive types and values
         * that causes this program to print "true false", then
         * you have proven that the == operator is not symmetric.
         */
        <typeX> x = <valueX>;
        <typeY> y = <valueY>;

        System.out.print ((x == y) + " ");
        System.out.println(y == x);
    }
} 
```

我不拥有这本书，所以我无法查找解决方案，我只找到了不包含解决方案的源文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T17:48:05.590

不。对于所有原语， == 符号是[可交换](http://en.wikipedia.org/wiki/Commutative_property)的。那是，

(x == y) => (y == x)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T17:51:34.377

`==`**对每种**类型都是对称的...

从规范：

> 如果操作数表达式没有副作用，则等式运算符是可交换的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-19T20:33:56.820

只有几个特殊值用于相等和比较。它们是 Float.NaN、Double.NaN、-0.0f 和 -0.0。

这些特殊的原因是它们不遵循一些正常的相等或 compareTo 规则

```
public static void main(String... args) {
    printComparisons("Float.NaN", Float.NaN);
    printComparisons("Double.NaN", Double.NaN);
    printComparisons("-0.0f", -0.0f);
    printComparisons("-0.0", -0.0);
}

private static void printComparisons(String desc, float v) {
    System.out.println("[ " + desc + " ]");
    System.out.println(v + " == " + v + " is " + (v == v));
    System.out.println(v + " != " + v + " is " + (v != v));
    System.out.println(v + " == 0.0  is " + (v == 0.0));
    System.out.println(v + " < 0 is " + (v < 0));
    System.out.println(v + " > 0 is " + (v > 0));
    System.out.println("Float.compareTo(" + v + ", 0) is " + Float.compare(v, 0));
    System.out.println();
}

private static void printComparisons(String desc, double v) {
    System.out.println("[ " + desc + " ]");
    System.out.println(v + " == " + v + " is " + (v == v));
    System.out.println(v + " != " + v + " is " + (v != v));
    System.out.println(v + " == 0.0  is " + (v == 0.0));
    System.out.println(v + " < 0 is " + (v < 0));
    System.out.println(v + " > 0 is " + (v > 0));
    System.out.println("Double.compareTo(" + v + ", 0) is " + Double.compare(v, 0));
    System.out.println();
} 
```

印刷

```
[ Float.NaN ]
NaN == NaN is false
NaN != NaN is true
NaN == 0.0  is false
NaN < 0 is false
NaN > 0 is false
Float.compareTo(NaN, 0) is 1

[ Double.NaN ]
NaN == NaN is false
NaN != NaN is true
NaN == 0.0  is false
NaN < 0 is false
NaN > 0 is false
Double.compareTo(NaN, 0) is 1

[ -0.0f ]
-0.0 == -0.0 is true
-0.0 != -0.0 is false
-0.0 == 0.0  is true
-0.0 < 0 is false
-0.0 > 0 is false
Float.compareTo(-0.0, 0) is -1

[ -0.0 ]
-0.0 == -0.0 is true
-0.0 != -0.0 is false
-0.0 == 0.0  is true
-0.0 < 0 is false
-0.0 > 0 is false
Double.compareTo(-0.0, 0) is -1 
```

总之。

*   NaN 不是 >、<、==、>= 或 <= 0.0，而是`compareTo(NaN,0)`返回 1
*   0.0 is == 0.0 but for compareTo(-0.0, 0.0) return -1

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T17:47:25.077

我不知道任何情况下对于原始类型都是如此。****

# build - 使用 REPO 初始化和签出的 TCL 脚本的打印输出有困难

> ID：11106430
> 
> 赞同：0
> 
> 时间：2012-06-19T17:44:01.280
> 
> 标签：build, automation, tcl, checkout, repository

我已经编写了 TCL 脚本来初始化并从 google 签出最新的 repo 目录。但它不会在终端中打印任何内容。我试过打开。

对于开放：

初始化时我有这个......它工作正常

```
 if { [ catch { set ID [ open "|repo init -u *android_stuff* "] } cErr ] } {
     puts "Error initializing (${cErr})" }

 while { ![ eof ${ID}] } {
     gets ${ID} Line
     puts "Line: ${Line}" } 
```

当以类似方式结帐时....但这不会打印任何东西...

```
 if { [ catch { set ID [ open "|repo sync -j **"] } cErr ] } {
     puts "Error checking out (${cErr})" }

 while { ![ eof ${ID}] } {
     gets ${ID} Line
     puts "Line: ${Line}" } 
```

我试图用“exec”来实现它，但类似于“open”我无法打印它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:36:18.133

你应该把`while`循环放在一个`else`子句中：如果你发现一个错误，你只打印一条消息并继续，就好像有一些有效的东西一样`$ID`

这种使用`eof`读取一行太多：请参阅[http://phaseit.net/claird/comp.lang.tcl/fmm.html#eof](http://phaseit.net/claird/comp.lang.tcl/fmm.html#eof)

# perl - 找不到对象方法 - perl 脚本

> ID：11106431
> 
> 赞同：0
> 
> 时间：2012-06-19T17:44:13.513
> 
> 标签：perl

Perl 很新，所以这里可能有一个非常明显的解决方案。我正在浏览一个日志文件，基本上将某些内容添加到哈希中，但我不断收到：

“在 logTest.pl 第 37 行第 9 行通过包“serv.int”（也许您忘记加载“serv.int”？）找不到对象方法“1339384721”。我已经初始化了这些变量和所有内容，所以我不明白为什么 perl 会抱怨......

```
#!/usr/bin/perl -w
use strict;
use warnings;

my $LOGFILE = '/Users/user/Desktop/logTest';
my $downTime = 0;
my $serviceName = 0;
my %downTimeHash = ();

open(LOGFILE, $LOGFILE) or die ("Couldn't open the file.");

foreach my $line (<LOGFILE>) {
chomp($line);

#Checks for 'STATE' lines down
if ($line=~/\s*;DOWN*/ && ($line=~/STATE:\s+([^;]+)/ || $line=~/ALERT:\s+([^;]+)/)) {
#Get time service went down
    if ($line=~/\[(\d*)\]*/) {
        $downTime = $1;
    }
#Get service that went down
    if ($line=~/STATE:\s+([^;]+)/ || $line=~/ALERT:\s+([^;]+)/) {
        $serviceName = $1;
    }   
#Add service and down time to hash
%downTimeHash = ($serviceName->$downTime);
}
}

print "%downTimeHash \n"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:52:32.837

我应该使用`=>`而不是`->`.

# http - 检测到循环重定向路径并显示错误的 Open Graph 数据

> ID：11106434
> 
> 赞同：1
> 
> 时间：2012-06-19T17:44:25.860
> 
> 标签：http, facebook-opengraph

将以下 URL 分享到 Facebook 时

`www.magicsoftware.com`

你会得到过时的信息。Facebook 引用该站点 (magicsoftware.com/en) 并从缓存中获取所有信息。

我试图通过访问 dubugger- [https://developers.facebook.com/tools/debug/og/object?q=www.magicsoftware.com来清除缓存](https://developers.facebook.com/tools/debug/og/object?q=www.magicsoftware.com)

但这并没有太大帮助。

有人知道我能做什么？

* * *

**PS** - 如果您检查调试器链接，您会看到提到了两个严重错误：

> 无法遵循重定向：URL 请求了 HTTP 重定向，但无法遵循。必须修复的错误
> 
> 循环重定向路径：检测到循环重定向路径（有关详细信息，请参阅“重定向路径”部分）。

这意味着什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:05:37.380

您的服务器正在根据某些条件发出重定向到与访问相同的 URL，实际上根据我对没有`Accept-Language`标头的任何请求的测试进行了重定向。

看到[有`Accept-Language`标题](http://hurl.it/hurls/bd5f66c05cf63c2e56730c7aa52fa1b2cdf0fc6f/de8a45477b632541d0aefa41bcc2ca0364f6fc05)，[没有任何标题](http://hurl.it/hurls/7c89e2d0c21f9c3d7096f6b30b229b4739a2c39d/8593230ff1cc3a2b836fd583c7bc1a50eead8ff2)

Facebook linter 在抓取您的 OpenGraph 元数据时似乎没有传递此标头，并且由于重定向循环而挂起。

您应该避免这种重定向（或至少有一些回退），以便 Facebook linter 能够收集更新的数据并更新缓存的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T21:01:09.720

我自己找到了解决方案——这只是耐心:)

Facebook 只是需要时间来删除他们的缓存文件。所以解决方法就是使用[Facebook Debugger](https://developers.facebook.com/tools/debug/)输入你的 URL 然后等待。Facebook 将自动刷新此 URL 缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T09:59:49.743

现在同样的事情也发生在我身上。我没有重定向。但我收到此消息“重定向路径后出现错误。” 在此 URL [http://www.mmaid.co/cleaning-services/offers/coupons/social-discount.php](http://www.mmaid.co/cleaning-services/offers/coupons/social-discount.php)上使用调试器时， 我会给它时间，看看它是否能自行修复。

# perl - 如何将文件句柄传递和读取到 Perl 子例程？

> ID：11106439
> 
> 赞同：3
> 
> 时间：2012-06-19T17:44:44.687
> 
> 标签：perl, subroutine, filehandle

我想要一个从特殊文件句柄中读取的 Perl 模块，并将其`<STDIN>`传递给子例程。当您看到我的代码时，您就会明白我的意思。这是以前的情况：

```
#!/usr/bin/perl
use strict; use warnings;

use lib '/usr/local/custom_pm'
package Read_FH

sub read_file {
my ($filein) = @_;
open FILEIN, $filein or die "could not open $filein for read\n";
# reads each line of the file text one by one
while(<FILEIN>){
# do something
}
close FILEIN; 
```

现在，子例程将文件名（存储在 中`$filein`）作为参数，使用文件句柄打开文件，并使用精细句柄逐行读取文件的每一行。

相反，我想从中获取文件名`<STDIN>`，将其存储在变量中，然后将此变量作为参数传递给子例程。从主程序：

```
$file = <STDIN>;
$variable = read_file($file); 
```

该模块的子程序如下：

```
#!/usr/bin/perl
use strict; use warnings;

use lib '/usr/local/custom_pm'
package Read_FH

# subroutine that parses the file
sub read_file {
my ($file)= @_;
# !!! Should I open $file here with a file handle? !!!!

# read each line of the file
while($file){
# do something
} 
```

有谁知道我该怎么做？我很感激任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T18:15:53.537

一般来说，使用词法文件处理程序是一个好主意。那是一个包含文件处理程序而不是裸词的词法变量。

您可以像任何其他变量一样传递它。如果您使用`read_file`from [File::](http://search.cpan.org/perldoc?File%3a%3aSlurp) Slurp，则不需要单独的文件处理程序，它将内容 slurp 到变量中。

因为尽快关闭打开的文件句柄也是一种好习惯，如果您真的只需要获取完整的文件内容，这应该是首选方式。

使用 File::Slurp：

```
use strict;
use warnings;
use autodie;
use File::Slurp;

sub my_slurp {
    my ($fname) = @_;
    my $content = read_file($fname);

    print $content; # or do something else with $content

    return 1;
}

my $filename = <STDIN>;
my_slurp($filename);

exit 0; 
```

没有额外的模块：

```
use strict;
use warnings;
use autodie;

sub my_handle {
    my ($handle) = @_;
    my $content = '';

    ## slurp mode
    {
        local $/;
        $content = <$handle>
    }

    ## or line wise
    #while (my $line = <$handle>){
    #    $content .= $line;
    #}

    print $content; # or do something else with $content

    return 1;
}

my $filename = <STDIN>;
open my $fh, '<', $filename;
my_handle($fh); # pass the handle around
close $fh;

exit 0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T18:23:28.370

我同意@mugen kenichi，他的解决方案比构建自己的解决方案更好。使用社区测试过的东西通常是个好主意。无论如何，这里是您可以对自己的程序进行的更改，以使其按照您的意愿行事。

```
#/usr/bin/perl
use strict; use warnings;

package Read_FH;

sub read_file {
    my $filein = <STDIN>;
    chomp $filein; # Remove the newline at the end
    open my $fh, '<', $filein or die "could not open $filein for read\n";
    # reads each line of the file text one by one
    my $content = '';
    while (<$fh>) {
        # do something
        $content .= $_;
    }
    close $fh;

    return $content;
}

# This part only for illustration
package main;

print Read_FH::read_file(); 
```

如果我运行它，它看起来像这样：

```
simbabque@geektour:~/scratch$ cat test
this is a
testfile

with blank lines.
simbabque@geektour:~/scratch$ perl test.pl
test
this is a
testfile

with blank lines. 
```

# android - 为膨胀的 RadioGroup 创建 onChangeListener

> ID：11106441
> 
> 赞同：1
> 
> 时间：2012-06-19T17:44:55.323
> 
> 标签：android, android-layout, layout-inflater

我`RadioGroup`在 XML 中创建了一个布局。所以我动态创建它：

```
RadioGroup segmentRadioGroup = new RadioGroup(parentActivity);
inflater.inflate(R.layout.segm_btn_stores, segmentRadioGroup);           
segmentRadioGroup.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(RadioGroup radioGroup, int i) {
            showMap();
        }
    }); 
```

哦，它不起作用！`showMap`不是开火！

可是等等。如果我们这样做呢？

```
RadioGroup segmentRadioGroup = (RadioGroup) inflater.inflate(R.layout.segm_btn_stores, null); 
```

有用。为什么？`segmentRadioGroup`在`RadioGroup`这两种情况下。如果我通过`segmentRadioGroup`之前创建而不是`null`它也不会工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:01:06.890

```
RadioGroup segmentRadioGroup = new RadioGroup(parentActivity); 
```

在上面的行中，您创建了一个 'empty' `RadioGroup`。然后...

```
inflater.inflate(R.layout.segm_btn_stores, segmentRadioGroup); 
```

...在上面的行中，您`RadioGroup`从布局文件中膨胀另一个，然后将其“添加”到第一个`RadioGroup`. 这里的逻辑似乎是，作为`RadioGroup`extends （实际上是 IS）`LinearLayout`， a`RadioGroup`包含 another是合法的`RadioGroup`。

```
segmentRadioGroup.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() { ...}); 
```

最后，在上面的行中，您将侦听器设置在 external / parent`RadioGroup`而不是 inner 上`RadioGroup`。因此，`onCheckedChanged(...)`永远不会为内部调用该方法`RadioGroup`。

嗯，这是我能想出的唯一逻辑。

用你的第二种方法......

```
RadioGroup segmentRadioGroup = (RadioGroup) inflater.inflate(R.layout.segm_btn_stores, null); 
```

您只是在膨胀一个`RadioGroup`没有外部父布局的布局，因为您将“null”作为第二个参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:07:43.337

这应该工作：

```
RadioGroup segmentRadioGroup = inflater.inflate(R.layout.segm_btn_stores, null);           
segmentRadioGroup.setOnCheckedChangeListener(
      new RadioGroup.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(RadioGroup radioGroup, int i) {
                showMap();
            }
      });
// add to the parent layout here.. 
```

# asp.net - 为什么 ASP.NET 服务器控件属性什么都没有

> ID：11106444
> 
> 赞同：1
> 
> 时间：2012-06-19T17:45:14.100
> 
> 标签：asp.net, vb.net

我正在尝试在 ASP.NET 中创建新的服务器控件类型。此控件会将RequiredFieldValidator 放入某个位置。我的类继承自 WebControl 类，它有一个 ControlID 属性，它是给定控件的 ID。RequiredFieldValidator 将在具有给定 ControlID 的控件附近生成。但是，ControlID 的值是什么。在什么情况下我可以成功使用这个属性？

```
Public Class MyControl
    Inherits WebControl

    '...
    Protected Property ControlID As String
    Protected Property IsLinkedBrother As Boolean = False
    '...

    Protected Overrides Sub OnPreRender(e as System.EventArgs)
        MyBase.OnPreRender(e)
        Dim rootControl = If(IsLinkedBrother, Parent, Page)
        Dim controls As Stack(Of Control) = New Stack(Of Control)
        Dim currentControl As Control = Nothing
        controls.Push(rootControl)
        Dim result As Control = Nothing
        While ((result Is Nothing) AndAlso (controls.Count > 0))
            currentControl = controls.Pop
            If ((Not String.IsNullOrEmpty(currentControl.ID)) AndAlso (currentControl.ID.Equals(ControlID))) Then
                result = currentControl
            Else
                For Each child As System.Web.UI.Control In currentControl.Controls
                    controls.Push(child)
                Next
            End If
        End While
        '...
    End Sub
'...
End Class 
```

但是由于某种原因 ControlID 是 Nothing 并且该事件引发异常。ControlID 在初始化后永远不会改变，它是这样初始化的：

```
<MyControl runat="server" ID="IDValue" ControlID="ControlIDValue" EnableCliendScript="true" 
    CssClass="Whatever" Display="Dynamic" /> 
```

我已经搜索并尝试了几个小时，但没有运气。谁能告诉我什么会导致这种行为以及为什么，有人对解决方案有一些建议吗？先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:23:51.317

ControlID 必须是公开的才能正常工作；它不能被保护并且能够从标记中设置。

# ruby-on-rails - 如何在 Rails 中更新远程计算机上的数据库

> ID：11106449
> 
> 赞同：0
> 
> 时间：2012-06-19T17:45:29.870
> 
> 标签：ruby-on-rails, activerecord

我有一个 Rails 3.1 应用程序，它允许最终用户添加/更新客户的信息列表。现在我请求将此 cust_info 表与远程机器上的数据库同步。因此，只要在 Rails 中进行了更改，它就会自动更新远程数据库。解决这个问题的最佳方法是什么？

我正在考虑在 config/database.yml 中设置远程数据库访问并创建一个模型来建立与该数据库的连接。但是在我的控制器中，当客户的信息被保存时，我如何使用远程数据库连接来更新一个表？我应该写一个原始的 sql 查询吗？

谢谢。

# c# - MEF - 具有通用接口和惰性的 ImportMany

> ID：11106450
> 
> 赞同：3
> 
> 时间：2012-06-19T17:45:31.587
> 
> 标签：c#, generics, mef

我正在使用 MEF（特别是[MEF 2 Preview 5](http://mef.codeplex.com/releases/view/79090)）开发应用程序，并且在尝试基于通用接口导入时遇到了问题。

我有一个界面：

```
public interface IMessageHandler<in T>
{
    void HandleMessage(T message);
} 
```

其中 T 是要处理的消息类型。我正在使用以下方法将这些东西导入目录`RegistrationBuilder`：

```
RegistrationBuilder context = new RegistrationBuilder();

context.ForTypesDerivedFrom(typeof(IMessageHandler<>))
    .Export(builder => builder.AsContractType(typeof(IMessageHandler<>))); 
```

然后，在我`[ImportMany]`用来将这些列表导入到的消费类中`IEnumerable<Lazy>>`：

```
[ImportMany(typeof(IMessageHandler<>))]
IEnumerable<Lazy<IMessageHandler<object>, HandledMessageTypeAttribute>> _messageHandlers; 
```

现在，这是第一个问题——此时您被迫为泛型接口分配一个类型。我正在使用`Lazy<T, TMetadata>`，因为`IMessageHandler<T>`实现具有我想要使用的相关元数据（`HandledMessageTypeAttribute`）。

现在，当我想访问`IEnumerable<Lazy<>>`集合中的任何元素时，我得到以下异常：

```
Cannot cast the underlying exported value of type 
'MessageHandlerImplementation (ContractName="IMessageHandler(System.Object)")' 
to type 'IMessageHandler`1[System.Object]'. 
```

我（大致）理解为什么我会遇到异常，问题是我不知道如何解决它。所以，基本上我想做的是：

1.  有一堆实现`IMessageHandler<T>`接口的类。
2.  使用 MEF 在运行时发现它们。
3.  将它们导入到一个集合中，这样我就可以使用它们拥有的任何元数据。
4.  能够实例化它们。

我知道我可以简单地制作`IMessageHandler`非泛型并`IMessageHandler.HandleMessage()`接受类型参数，`object`但我正在寻找一个更优雅的解决方案

任何指针或指导表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:45:20.277

在不使用非通用接口的情况下，我没有看到更好的方法来完成您想要实现的目标。问题的根源在于接口的定义：

```
public interface IMessageHandler<in T> 
```

这意味着如果我们有两个类，`A`并且`B`，其中`B`派生自`A`，那么这是允许的

```
IMessageHandler<B> handler = new AHandler(); 
```

但这不是：

```
IMessageHandler<A> handler = new BHandler(); 
```

您实际上是在尝试执行后者，这就是引发异常的原因。我假设你想做的是能够得到一个处理程序，给定一个类型。如果是这种情况，那么您可能应该使用非通用接口并在导出元数据中提供消息类型。然后你会有这样的东西：

```
public IMessageHandler GetHandler<T>()
{
    Type handlerType = typeof(T);
    return _messageHandlers.FirstOrDefault(x => x.Metadata.MessageType == handlerType);
} 
```

您可能会发现[这个问题](https://stackoverflow.com/q/9992159/389966)也很相关。希望这可以帮助。

# javascript - 转换 JSON 文件？

> ID：11106454
> 
> 赞同：0
> 
> 时间：2012-06-19T17:45:59.680
> 
> 标签：javascript

我有一个要转换的生成的 JSON 文件。有没有一种简单的方法可以在不使用任何框架的情况下将此 JSON 的“id”/“value”形式转换为正确的键/值 JSON 对象？

```

这些行：

     “价值”：“铬”，
     “身份证”：“富”

将转换为：

  “富”：“铬”

```

输入 JSON：

```
{“排”：[
    {
        “柱子”：[
            {
                “价值”：“铬”，
                “身份证”：“富”
            },
            {
                “价值”：0，
                “身份证”：“酒吧”
            },
            {
                “价值”：“baz1”，
                “身份证”：“巴兹”
            },
            {
                “价值”：0，
                “id”：“旧版”
            }
        ]
    },
    {
        “柱子”：[
            {
                “价值”：“火狐”，
                “身份证”：“富”
            },
            {
                “价值”：0，
                “身份证”：“酒吧”
            },
            {
                “价值”：“baz2”，
                “身份证”：“巴兹”
            },
            {
                “价值”：0，
                “id”：“旧版”
            }
        ]
    }
]
}

```

所需的 JSON：

```
{“排”：[

    {
        “富”：“铬”，
        “酒吧”：0，
        "baz":"baz1",
        “遗产”：0
    },
    {
        “富”：“火狐”，
        “酒吧”：0，
        "baz":"baz2",
        “遗产”：0
    }
]
}

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:52:09.193

这是解决方案：

```
var result = {"row": []}

for (var i = 0; i < input["row"].length; i++) {
  var object = {};
  var column = input["row"][i]["column"];

  for (var j = 0; j < column.length; j++) {
    object[column[j]["id"]] = column[j]["value"];
  }

  result.row.push(object);
}

console.log(result); 
```

输入变量是指您的初始 JSON 对象。

```
var input = {"row":[
    {
        "column":[
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:20:34.283

这是我的功能，在 ioseb 发布他的答案之前，我已经把它打出来了，所以我想它也发布了，它是 linted 和一切

```
function transform(data) {
    "use strict";
    var x, i, row, column, colNumb, out = {rows : []}, rownum = data.row.length;
    for (x = 0; x < rownum; x += 1) {
        row = {};
        column = data.row[x].column;
        colNumb = column.length;
        for (i = 0; i < colNumb; i += 1) {
            row[column[i].id] = column[i].value;
        }
        out.rows.push(row);
    }
    return out;
} 
```

# svn - 如何查看svn文件夹下文件的修订号？

> ID：11106455
> 
> 赞同：2
> 
> 时间：2012-06-19T17:46:04.960
> 
> 标签：svn

我想知道文件夹下文件的修订号，例如，

```
calc/Makefile: 4
     integer.c: 4
     button.c: 5 
```

我怎么能在 SVN 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:04:21.717

我不知道以您要求的格式输出所有版本号的方法

但是您可以`svn info`对每个文件使用，例如：

```
svn info integer.c | grep "Last Changed Rev" 
```

或者您可以使用`svnversion .`获取当前文件夹的版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:41:12.270

使用`svn status -v` 或`svn status -v -u`

# javascript - 使用 WebGL 和 three.js 进行运动模糊

> ID：11106463
> 
> 赞同：4
> 
> 时间：2012-06-19T17:46:48.887
> 
> 标签：javascript, animation, 3d, webgl, three.js

有没有办法在 WebGL 中实现高性能的运动模糊效果？

我正在使用 Three.js，场景是一些具有不同纹理的简单平面对象。我在 x 轴上移动相机。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T18:52:21.227

[这个例子做了一个运动模糊的后处理过程： http](http://mrdoob.github.com/three.js/examples/webgl_materials_cubemap_dynamic.html) ://mrdoob.github.com/three.js/examples/webgl_materials_cubemap_dynamic.html

# google-apps-script - Google Apps 脚本服务一天使用过多的计算机时间

> ID：11106464
> 
> 赞同：1
> 
> 时间：2012-06-19T17:46:51.287
> 
> 标签：google-apps-script, google-sheets, triggers

所以我在昨天运行的 1（一个）脚本的主题中收到了错误消息，我假设我今天会收到类似的消息。

我已经改进了脚本（它有一个每分钟运行一次的触发器），所以它的功能更像是它应该如何运行，但是错误消息让我思考可能需要什么样的功能或程序位服务时间比别人多。

例如，我不得不在我的谷歌应用程序脚本中使用多个睡眠调用以允许数据导入运行并再次用于工作表更改/复制粘贴调用以进行处理。就使用的服务时间而言，所有这些睡眠电话都对我不利吗？

我会代表社区要求将此保留为一个开放式问题，而不是特定于睡眠功能。脚本的哪些部分需要服务时间，哪些不需要（如果有的话）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T05:04:37.520

与常规 JavaScript 操作相比，每次调用服务（电子表格、日历或其他）都需要更多时间。例如，如果您必须修改电子表格中的 10 个单元格，则调用 range.setValue() 10 次所花费的时间远比将所有数据放在一个数组中然后使用 range.setValues() 一次性更新电子表格所花费的时间要多得多。

如果您可以粘贴您的代码片段，社区将能够就如何改进您的脚本提供更多建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T23:47:24.727

限制是基于时间的触发器中使用的 CPU 时间，我相信这些睡眠调用计入您的限制。我鼓励您找到避免睡眠呼叫的方法，或者安排您的脚本不那么频繁地运行。

# asp.net - 解析延迟加载结果表（json）

> ID：11106472
> 
> 赞同：0
> 
> 时间：2012-06-19T17:47:22.347
> 
> 标签：asp.net, html-parsing

我尝试解析此链接：[http ://agent.bronni.ru/Result.aspx?id=c7a6a33a-174e-426d-b127-828ee612c36e&account=27178&page=1&pageSize=50&mr=true](http://agent.bronni.ru/Result.aspx?id=c7a6a33a-174e-426d-b127-828ee612c36e&account=27178&page=1&pageSize=50&mr=true)

但我无法获得结果表，因为正如我在提琴手中看到的那样，有带有 json 结果的延迟加载方法。

我的代码是：

HtmlWeb hw = new HtmlWeb(); HtmlDocument doc = hw.Load("http://agent.bronni.ru/Result.aspx?id=c7a6a33a-174e-426d-b127-828ee612c36e&account=27178&page=1&pageSize=50&mr=true");

```
 // Get all tables in the document
    HtmlNodeCollection tables = doc.DocumentNode.SelectNodes("//table");

    // Iterate all rows in the first table
    HtmlNodeCollection rows = tables[0].SelectNodes(".//tr");

    var data = rows.Skip(1).ToList().Take(10).ToList().Select(x => new TableRow()
    {
        Price = x.SelectNodes(".//td").ToList()[4].InnerText,
        Operator = x.SelectNodes(".//td").ToList()[15].InnerText,
        DepartureDate = x.SelectNodes(".//td").ToList()[6].InnerText,
        DestinationRegion = x.SelectNodes(".//td").ToList()[7].InnerText
    }).ToList(); 
```

**更新** 第二个站点：代码

```
 WebClient wc = new WebClient();
        wc.Headers.Add("Referer", "http://sletat.ru/");//MUST BE THIS HEADER
        string result = wc.DownloadString("http://module.sletat.ru/Main.svc/GetTours?cityFromId=832&countryId=35&cities=&meals=&stars=&hotels=&s_adults=1&s_kids=0&s_kids_ages=&s_nightsMin=6&s_nightsMax=16&s_priceMin=0&s_priceMax=&currencyAlias=RUB&s_departFrom=25%2F06%2F2012&s_departTo=31%2F07%2F2012&visibleOperators=&s_hotelIsNotInStop=true&s_hasTickets=true&s_ticketsIncluded=true&debug=0&filter=0&f_to_id=&requestId=19198631&pageSize=20&pageNumber=1&updateResult=1&includeDescriptions=1&includeOilTaxesAndVisa=1&userId=&jskey=1&callback=_jqjsp&_1340633427022=");
        result = result.Substring(result.IndexOf("{"), result.LastIndexOf("}") - result.IndexOf("{") + 1);
        JavaScriptSerializer js = new JavaScriptSerializer();
        dynamic json = js.DeserializeObject(result);
        var prices = json["GetToursResult"]["Data"]["aaData"] as object[];
        // var operators = ((object[])json["result"]["prices"]).Cast<Dictionary<string, object>>();
        var temp = prices.ToList().Take(20).Select(x => new TableRow
        {
            Operator = (x as object[])[40].ToString(),
            //Price = x["operatorPrice"].ToString(),
            //DepartureDate = x["checkinDate"].ToString(),
            //DestinationRegion = ((Dictionary<string, object>)x["country"])["englishName"].ToString()
        }).ToList();

        string str = "";

        foreach (var tableRow in temp)
        {
            str += tableRow.Operator + "<br />";
        }
        Response.Write(str); 
```

通过这种方式，我尝试一切正常，但问题是这个链接工作了大约 30 分钟，然后我需要再次放置其他链接。有什么办法可以解决这个问题吗？（只有第二个站点有它）再次感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:55:53.127

数据真的来自这里：

[http://beta.remote.bronni.ru/LazyLoading.ashx/getResult?jsonp=jQuery17207647891761735082_1340131755603&id=c7a6a33a-174e-426d-b127-828ee612c36e&page=3&pageSize=50&_=134013175663](http://beta.remote.bronni.ru/LazyLoading.ashx/getResult?jsonp=jQuery17207647891761735082_1340131755603&id=c7a6a33a-174e-426d-b127-828ee612c36e&page=3&pageSize=50&_=1340131756631)

除了`page=#`和`pageSize=#`可以动态调整。

因此，您可以从 URL 获取 JSON 数据并对其进行解析，而不是解析 HTML。例如：

```
WebClient wc = new WebClient();
string result =wc.DownloadString("http://beta.remote.bronni.ru/LazyLoading.ashx/getResult?jsonp=jQuery17207647891761735082_1340131755603&id=c7a6a33a-174e-426d-b127-828ee612c36e&page=1&pageSize=1000&_=1340131756631");
result = result.Substring(result.IndexOf("{"),result.LastIndexOf("}")-result.IndexOf("{")+1);
JavaScriptSerializer js = new JavaScriptSerializer();
dynamic json =  js.DeserializeObject(result);
var prices = ((object[])json["result"]["prices"]).Cast<Dictionary<string,object>>();
var data = from p in prices 
           select new
{
  OperatorID = p["operatorID"],
  Price = p["operatorPrice"],
  Country = ((Dictionary<string,object>)p["country"])["englishName"],
  CheckinDate = p["checkinDate"]
};

Console.WriteLine(data); 
```

在我的 LinqPad 程序上，产生如下内容：

```
OperatorID Price Country CheckinDate 
0          1,27  Greece  2012-06-28 
0          55,90 Greece  2012-06-28 
0          67,34 Greece  2012-06-28 
```

还有更多行，具体取决于您要多少...

**注意**：该行的原因`result = result.Substring(result.IndexOf("{"),result.LastIndexOf("}")-result.IndexOf("{")+1);`是jsonp结果开头有这个垃圾：

```
jQuery17207647891761735082_1340131755603({" 
```

以 which 结尾`})`会使 JavascriptSerializer 在尝试解析它时窒息；因此需要删除它。

**更新：**

有趣的是，返回数据的 ASHX 处理程序似乎`Referer`在请求中需要一个 Header；否则，响应将不包含操作员信息。所需的推荐人不能是您想要的任何东西，似乎它实际上正在`http://agent.bronni.ru`特别寻找。

基本上，您需要做的就是以下几点：

```
WebClient wc = new WebClient();
wc.Headers.Add("Referer","http://agent.bronni.ru");//MUST BE THIS HEADER
string result =wc.DownloadString("http://beta.remote.bronni.ru/LazyLoading.ashx/getResult?jsonp=jQuery17207647891761735082_1340131755603&id=c7a6a33a-174e-426d-b127-828ee612c36e&page=1&pageSize=1000&_=1340131756631");
result = result.Substring(result.IndexOf("{"),result.LastIndexOf("}")-result.IndexOf("{")+1);
JavaScriptSerializer js = new JavaScriptSerializer();
dynamic json =  js.DeserializeObject(result);
var prices = ((object[])json["result"]["prices"]).Cast<Dictionary<string,object>>();
var data = from p in prices 
           select new
{
  OperatorID = p["operatorID"],
  Price = p["operatorPrice"],
  Country = ((Dictionary<string,object>)p["country"])["englishName"],
  Hotel = ((Dictionary<string,object>)p["hotel"])["englishName"],
  Operator = ((Dictionary<string,object>)p["operator"])["englishName"],//OPERATOR
  CheckinDate = p["checkinDate"]
};

OperatorID Price Country Hotel                           Operator          CheckinDate 
19681      1,27  Greece  Julia Hotel                     Mouzenidis Travel 2012-06-28 
19681      1,27  Greece  Forest Park                     Mouzenidis Travel 2012-06-28 
19681      1,27  Greece  Kassandra Mare (ï-îâ Êàññàíäðà) Mouzenidis Travel 2012-06-28 
```

**更新 2：**

我决定比较开箱即用的 Javascriptserializer 与[JSON.NET 序列化](http://james.newtonking.com/projects/json-net.aspx)器的性能，并且在我使用不同记录大小 (50,1000,3000) 的所有测试中，JSON.NET 至少比 Javascriptserializer 快两倍，并且在在较小的记录集上，某些情况甚至快 10 倍。

如果您决定使用 JSON.NET 库，以下代码将为您提供与上述代码相同的结果：

```
WebClient wc = new WebClient();
wc.Headers.Add("Referer","http://agent.bronni.ru");
string result =wc.DownloadString("http://beta.remote.bronni.ru/LazyLoading.ashx/getResult?jsonp=jQuery17207647891761735082_1340131755603&id=c7a6a33a-174e-426d-b127-828ee612c36e&page=1&pageSize=50&_=1340131756631");
result = result.Substring(result.IndexOf("{"),result.LastIndexOf("}")-result.IndexOf("{")+1);
JObject o = JObject.Parse(result);
var data = from x in o["result"]["prices"]
select new
 {
  OperatorID = x["operatorID"],
  Price = x["operatorPrice"],
  Country = x["country"]["englishName"],
  Hotel = x["hotel"]["englishName"],
  Operator = x["operator"]["englishName"],
  CheckinDate = x["checkinDate"]
};

Console.WriteLine(data); 
```

# postgresql - PostgresQL 存储过程：在更新语句中使用一组结果而不循环该组

> ID：11106474
> 
> 赞同：0
> 
> 时间：2012-06-19T17:47:31.707
> 
> 标签：postgresql, stored-procedures, local-variables

我有一个存储过程，我需要在其中查询一组，`ids`然后在`UPDATE`语句的`WHERE`子句中使用该组。我正在使用**PostgresQL 9.0+**。我宁愿不要在一组语句上使用循环`ids`并发出多个`UPDATE`语句——这不是很有效。

这是一个简单的例子：

```
CREATE OR REPLACE FUNCTION test_it()
RETURNS VOID AS $$
DECLARE
  cur_time  TIMESTAMP;
  ids       a%ROWTYPE;
BEGIN
  SELECT id FROM a INTO ids;
  UPDATE b
     SET state = 'foobar', updated_at = cur_time
   WHERE id IN ids;
END;
$$ LANGUAGE plpgsql; 
```

这甚至不编译。

我也尝试过*SELECT* -ing 之`ids`类的......

```
CREATE OR REPLACE FUNCTION test_it()
RETURNS VOID AS $$
DECLARE
  cur_time  TIMESTAMP;
  ids       a%ROWTYPE;
BEGIN
  SELECT id FROM a INTO ids;
  UPDATE b
     SET state = 'foobar', updated_at = cur_time
   WHERE id IN (SELECT ids);
END;
$$ LANGUAGE plpgsql; 
```

这会引发错误：*提示：没有运算符与给定的名称和参数类型匹配。您可能需要添加显式类型转换。*

我的实际存储过程要复杂得多，因为该集合的初始查询`ids`实际上是一个动态查询。

实际的错误输出是这样的（只是更多的上下文......）：

```
ERROR:  operator does not exist: integer = task_responses
LINE 3:      WHERE id IN (SELECT task_response_ids)
                      ^
HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts.
QUERY:  UPDATE task_responses
       SET state = state, updated_at = cur_time, rejected_at = cur_time
     WHERE id IN (SELECT task_response_ids)
CONTEXT:  PL/pgSQL function "reject_submissions_with_comment" line 38 at SQL statement 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:38:39.770

在我的 SP 执行过程中的某个时刻，无论如何我都需要循环遍历结果，所以我选择跟踪我正在访问它们的 ID，并稍后在动态查询中使用它们来进行单次更新。

FWIW：我永远无法让@Steve 的建议起作用，因为`task_response_ids`它是一个结果集，而不是一个表表达式。如果我嵌入了可以工作的查询，但是我需要在我的用例中多次运行相同的查询，因为我有多个更新（不同的表）要做。

这是基于我上面和原始问题中概述的需求的（假）代码：

```
CREATE OR REPLACE FUNCTION test_it() RETURNS VOID AS $$
DECLARE
  cur_time    TIMESTAMP;
  state       varchar(20);
  a_response  RECORD;
  ids         bigint[];
  other_ids   bigint[];
  s_ids       varchar(4000);
  s_other_ids varchar(4000);
BEGIN
  state    := 'foobar';
  cur_time := CURRENT_TIMESTAMP;

  FOR a_response IN (SELECT id,other_id FROM a) LOOP
    ids[id_index]       := a_response.id;
    other_ids[id_index] := a_response.other_id;
    id_index            := id_index + 1;
    -- do other stuff with the current record
  END LOOP;
  s_ids       := array_to_string(ids, ',');
  s_other_ids := array_to_string(other_ids, ',');

  EXECUTE '
    UPDATE b
       SET state = $1, updated_at = $2
     WHERE id IN (' || s_ids || ')'
  USING state, cur_time;

  EXECUTE '
    UPDATE c
       SET state = $1, updated_at = $2
     WHERE id IN (' || s_other_ids || ')'
  USING state, cur_time;

END;
$$ LANGUAGE plpgsql; 
```

这段代码非常虚构，但它演示了我需要完成的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:13:09.340

您想要一个 UPDATE ... FROM ... 样式查询，根据[http://www.postgresql.org/docs/9.1/static/sql-update.html](http://www.postgresql.org/docs/9.1/static/sql-update.html)

```
UPDATE b
  SET state = 'foobar', updated_at = cur_time
FROM
  ids i
WHERE
  b.id = i.id; 
```

# internet-explorer - 让ie标签进入睡眠需要什么？

> ID：11106476
> 
> 赞同：1
> 
> 时间：2012-06-19T17:47:43.533
> 
> 标签：internet-explorer, tabs

我注意到，在长时间不活动后，ie 倾向于让标签的线程进入睡眠状态。我有一些与此相关的问题

1>标签的线程休眠多少时间？

2>即使有连续的ajax调用，线程会休眠吗？

3>线程休眠的时间是否与浏览器或计算机上的用户特定设置有关？

将不胜感激提供指向处理此问题的文章的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:11:52.960

一个难题;-) 我没有找到任何关于标签线程暂停的信息。但我希望这些链接对您有所帮助：

*   [IE7 选项卡式浏览实现](http://blogs.msdn.com/b/ie/archive/2005/05/26/422103.aspx)
*   [打开新选项卡可能会使用 Internet Explorer 8.0 启动新进程](http://blogs.msdn.com/b/askie/archive/2009/03/09/opening-a-new-tab-may-launch-a-new-process-with-internet-explorer-8-0.aspx)

# c# - 使用 InputScope="Text" 关闭自动完成建议栏

> ID：11106477
> 
> 赞同：1
> 
> 时间：2012-06-19T17:47:58.680
> 
> 标签：c#, windows-phone-7, textbox

当我设置这个`<TextBox InputScope="Text" />`属性时，会有一个正常的 WP7 建议栏。有什么办法可以去掉吧？我需要 InputScope="Text" 来自动大写首字母和其他[打字功能](http://msdn.microsoft.com/en-us/library/ff426929%28VS.95%29.aspx)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:33:24.637

不幸的是没有。除了默认情况下，没有办法细化 InputScope 行为。

inputscope 定义包括是否使用自动完成选项。如果您真的不想要自动完成，那么您需要从不包含它的那些中进行选择。

# rest - 如何使用主干设计 REST 搜索

> ID：11106478
> 
> 赞同：15
> 
> 时间：2012-06-19T17:48:03.847
> 
> 标签：rest, backbone.js

我正在设计一个 API 并使用 Backbone.js 使用它。部分 API 将包括搜索操作。例如，在搜索汽车时，我可能会遇到以下情况：

```
http://api.mysite.com/search/cars?q=volvo 
```

使用骨干网，我可以看到两个使用结果的选项。

选项 1：搜索是一个集合

```
var CarSearch = Backbone.Collection.extend({
    model: Car,
    initialize : function(models, options){
        this.query = options.query;
    },
    url: function(){
        return "http://api.mysite.com/search/cars?q="+this.query;
    }
});

var volvos = new CarSearch([], {query:'volvo'});
volvos.fetch(); 
```

选项 2：搜索是一个模型，结果是一个集合

```
var CarSearchResults = Backbone.Collection.extend({
    model: Car
});

var CarSearch = Backbone.Model.extend({
    defaults: {
        "query":"",
        "carSearchResults":null
    },
    url: function(){
        return "http://api.mysite.com/search/cars?q="+this.get('query');
    },
    parse: function(resp,xhr){
        resp.carSearchResults = new CarSearchResults(resp.carSearchResults);
        return resp;
    }
});

var volvoSearch = new CarSearch();
volvoSearch.set({query:'volvo'});
volvoSearch.save(); 
```

这些选项的优点/缺点是什么？有没有一种骨干的方式来设计这个？

我倾向于选项 2，因为将诸如分页详细信息或下一个 url 之类的内容添加到响应中似乎更容易。但选项 2 在几个方面似乎更混乱。例如，我会在保存搜索模型时在服务器上生成一个 ID 吗？不要认为我需要通过 ID 获取该模型，删除或更新它也没有任何意义，因为我没有坚持它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T06:02:31.520

我不知道这是否是一个好习惯，但我使用“获取”方法中的“数据”选项进行搜索。

[https://stackoverflow.com/a/6659501/1067061](https://stackoverflow.com/a/6659501/1067061)

也许它有帮助。祝你好运！

**编辑**

这是在集合 url 中传递查询参数的正确方法， [对 Docs 的引用](http://backbonejs.org/#Collection-fetch)显示了如何在 fetch 选项中传递数据属性，数据属性实际上是一个对象，其中键值对引用查询参数及其值

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T18:09:23.117

我会选择选项一。至少imo一个模型应该对应于单个搜索结果，并且集合对应于整个搜索结果集。因此，如果您搜索 volvo 并返回 6 件商品，则每件商品都应该是您收藏中包含的模型。

现在这在很大程度上取决于您如何在服务器上表示结果。例如，如果说您有汽车实例，那么您只需使用查询执行搜索服务器端并将结果对象作为 json 返回。然后，您可以让返回的列表成为符合条件的汽车模型的集合。但是如果您打算以其他方式返回查询结果，那么您将不得不考虑模型应该如何表示数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T21:32:40.740

我建议使用一个集合，就像选项 1 一样，但不需要仅为搜索定义一个新集合。

在这里查看我的博客文章：[http ://willdemaine.ghost.io/restful-search-with-backbone/](http://willdemaine.ghost.io/restful-search-with-backbone/)

```
var SearchableCollection = Backbone.Collection.extend({},{

  search: function(query, options){
    var search = $.Deferred();
    options = options || {};
    var collection = new this([], options);
    collection.url = _.result(collection, 'url') + 'search?q=' + query;
    var fetch = collection.fetch();
    fetch.done(_.bind(function(){
      Backbone.Events.trigger('search:done');
      search.resolveWith(this, [collection]);
    }, this));
    fetch.fail(function(){
      Backbone.Events.trigger('search:fail');
      search.reject();
    });
    return search.promise();
  }

}); 
```

然后你可以这样做：

```
var Cars = SearchableCollection.extend({});

var findCars = Cars.search('volvo');  
findCars.done(function(cars){  
  var carsView = new CarsView({
    collection: cars
  });
  carsView.render();
}); 
```

# vba - Outlook 2003 VB 脚本创建转发规则

> ID：11106480
> 
> 赞同：0
> 
> 时间：2012-06-19T17:48:14.397
> 
> 标签：vba, outlook, outlook-2003

您好，有谁知道如何创建一个将在 Outlook 2003 中添加规则的 VB 脚本，这样如果我收到来自用户 PersonA@mail.com 的电子邮件，它将将该电子邮件转发到 PersonB@mail.com。

我还想知道是否可以创建一个 VB 脚本来删除以前创建的规则。

我做了一些研究，似乎可以创建一个宏来执行此操作，但我完全迷失了，因为我不熟悉我需要编辑的对象或拥有任何类型的 API。

也许我必须创建一个宏来添加规则，这使用一个 VB 脚本来触发宏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:18:22.177

我会改用直接的VBA。[ItemAdd 事件](http://msdn.microsoft.com/en-us/library/aa171270%28v=office.11%29.aspx)可用于检查默认收件箱中的传入消息并转发它们。如果您需要更改转发，编辑电子邮件地址很简单。

前任：

```
Private WithEvents Items As Outlook.Items 
Private Sub Application_Startup() 
Dim olApp As Outlook.Application 
Dim objNS As Outlook.NameSpace 
Set olApp = Outlook.Application 
Set objNS = olApp.GetNamespace("MAPI") 
Set Items = objNS.GetDefaultFolder(olFolderInbox).Items 
End Sub
Private Sub Items_ItemAdd(ByVal item As Object) 
On Error Goto ErrorHandler 
Dim Msg As Outlook.MailItem 
Dim newMsg As Outlook.MailItem
Dim recip As Outlook.Recipient

' *****************
' edit these to change forwarding rules
' *****************
Const INCOMING_EMAIL As String = "Persion@mail.com"
Const OUTGOING_EMAIL As String = "PersonB@mail.com"

If TypeName(item) = "MailItem" Then
Set Msg = item
  If Msg.SenderEmailAddress = INCOMING_EMAIL Then
    Set newMsg = Msg.Forward

    With newMsg
      Set recip = .Recipients.Add OUTGOING_EMAIL
      recip.Type = olTo
      .Send
    End With
    ' *****************
    ' perhaps a msgbox?
    ' MsgBox "Message forwarded", vbInformation
    ' *****************
  End If
End If
ProgramExit: 
Exit Sub
ErrorHandler: 
MsgBox Err.Number & " - " & Err.Description 
Resume ProgramExit 
End Sub 
```

此代码应放在 ThisOutlookSession 模块中，然后您必须重新启动 Outlook。如果您需要放置帮助，请参阅[我在哪里放置 Outlook VBA 代码？](http://www.jpsoftwaretech.com/outlook-vba/where-do-i-put-my-outlook-vba-code/)

# c# - DateTime.Now 在 C# 中生成 SQL Server 数据类型中的 Datetime2(3)

> ID：11106482
> 
> 赞同：8
> 
> 时间：2012-06-19T17:48:28.593
> 
> 标签：c#, sql-server-2008, tsql, c#-4.0, datetime-format

我尝试了几种方法`datetime2(3)`从 C# 代码中检索等价物，但徒劳无功。

其中之一如下。

```
DateTime dt = DateTime.Now.AddMilliseconds(DateTime.Now.Millisecond); 
```

我需要以下格式：

```
YYYY-MM-DD HH:MM:SS.FFF 
```

但是从上面的代码中，我得到了以下结果

```
6/19/2012 11:15:08 PM 
```

当我尝试以下方式时，

```
 string myTime = DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss:fff");
 DateTime dd = Convert.ToDateTime(myTime); 
```

它抛出以下错误

> 字符串未被识别为有效的日期时间。

我只需要格式的日期，`datetime2(3)`您可以建议我另存为`nvarchar`. 但我需要根据`datetime2`更新的条目对条目进行排序。

有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-19T18:06:32.213

```
var format = "yyyy-MM-dd HH:mm:ss:fff";
var stringDate = DateTime.Now.ToString(format);
var convertedBack = DateTime.ParseExact(stringDate, format, CultureInfo.InvariantCulture); 
```

DateTime 是一种表示日期和时间的数据类型，不存储格式信息。毫秒始终存储在 DateTime 中。唯一需要指定毫秒的时间是在选择如何将 DateTime 表示为另一种类型（如字符串）时。

# python - 自定义 HTML5 NumberField 始终无法通过验证

> ID：11106483
> 
> 赞同：0
> 
> 时间：2012-06-19T17:48:41.177
> 
> 标签：python, django, forms, html, widget

我有一个简单的自定义 NumberField：

```
class NumberInput(forms.widgets.Input):
    input_type = 'number'

class NumberField(forms.DecimalField):
    def __init__(self, *args, **kwargs):
        self.widget = kwargs.get('widget', NumberInput)
        self.min_value = kwargs.get('min', 0)
        self.max_value = kwargs.get('max', 10)
        self.step = kwargs.pop('step', 1)
        super(NumberField, self).__init__(*args, **kwargs)
    def widget_attrs(self, widget):
        attrs = super(NumberField, self).widget_attrs(widget)
        if self.min_value is not None:
            attrs['min'] = self.min_value
        if self.max_value is not None:
            attrs['max'] = self.max_value
        if self.step is not None:
            attrs['step'] = self.step
        return attrs 
```

我以这样的形式使用它：

```
class TimeLog
     time = NumberField(min_value = '0', max_value = '100000', step = '0.25') 
```

每次我尝试提交它时，无论输入如何，我都会收到相同的错误：

```
Ensure this value is greater than or equal to 0. 
```

页面上的元素肯定有一个有效值：

```
<input step="0.25" name="time" min="0" max="100000" type="number" id="id_time" value="0.25"> 
```

是什么导致了这种失效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:04:50.797

您使用最小值和最大值的字符串而不是整数对其进行初始化。

# ruby-on-rails - Digest::SHA1::hexdigest 为相同的字符串产生不同的哈希值

> ID：11106485
> 
> 赞同：1
> 
> 时间：2012-06-19T17:48:52.783
> 
> 标签：ruby-on-rails, string, encryption, sha1

我正在尝试进行简单的用户身份验证，但是`Digest::SHA1::hexdigest`会话控制器中的调用产生的哈希值与用户模型中的哈希值不同。

用户.rb：

```
 class User < ActiveRecord::Base

    before_save {|user| user.password = Digest::SHA1.hexdigest(user.password)}
    ...

    end 
```

session_controller.rb

```
 def create
        user = User.where(:username => params[:username], :password => Digest::SHA1.hexdigest(params[:password])).first
    end 
```

有没有什么办法解决这一问题？

例如，当我尝试登录时，字符串“密码”显示为“5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8”。

但是，在数据库中，相同的字符串“密码”显示为：“353e8061f2befecb6818ba0c034c632fb0bcae1b”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:02:04.780

before_save 在您保存的任何时候运行，因此创建您加密，然后在您正在加密的任何更新（已经加密的更新）上再次运行。尝试使用 before_create。

# asp.net-mvc - MVC3 ASPX 视图对象不包含定义

> ID：11106486
> 
> 赞同：3
> 
> 时间：2012-06-19T17:48:56.043
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

我使用 MVC2 开始这个项目，但改为 MVC3 dll。

我有一个资产实体。在控制器中，我将 Details ActionResult 定义如下：
***编辑：（输入正确的控制器代码。）***

```
 public ActionResult Details(int id)
    {
        using (var db = new AssetsContainer())
        {
            return View(db.Assets.Find(id));
        }
    } 
```

我的 Details.aspx 页面是这样定义的：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<CITracker.Models.Asset>" %>  
<%@ Import Namespace="CITracker.Models" %>  
<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">  
Details  
</asp:Content>  

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<h2>Details</h2>

<fieldset>
    <legend>Fields</legend>

    <div class="display-label">Id</div>
    <div class="display-field"><%: Model.Id %></div> 
```

我收到此错误：

```
CS1061: 'object' does not contain a definition for 'Id' and no extension method 'Id' accepting a first argument of type 'object' could be found (are you missing a using directive or an assembly reference?) 
```

任何想法为什么这与 MVC2 一起工作但在 MVC3 上失败？我没有遇到开发时错误，但确实遇到了运行时错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:56:26.697

我不确定，但看起来这就是问题所在。您正在将列表传递给视图

```
return View(db.Assets.ToList()); 
```

但你的继承人说 `Inherits="System.Web.Mvc.ViewPage<CITracker.Models.Asset>"`而不是

```
Inherits="System.Web.Mvc.ViewPage<IEnumerable<CITracker.Models.Asset>>" 
```

而且由于你的模型现在是一个 IEnumerable，你不能做一个简单的 Model.Id 而应该是 Model[0].Id （或者你选择的任何元素或者你做一个 foreach ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T17:18:36.783

这是一个老问题，但我在将一些 MVC 2 代码转换为 MVC 3 时遇到了同样的问题。要查找的一个简单配置问题是确保您的配置中有此应用程序设置：

```
<appSettings>
    <add key="enableSimpleMembership" value="false" />
</appSettings> 
```

有关更多信息，请参阅此[线程](http://forums.asp.net/t/1660481.aspx)。

# web-services - 从 Web 服务调用获取响应时出错

> ID：11106490
> 
> 赞同：0
> 
> 时间：2012-06-19T17:49:05.063
> 
> 标签：web-services, oracle, asp.net-3.5

我正在尝试使用 Web 服务，尽管显然我的所有参数似乎都没有问题，但我一直收到一个错误页面作为响应，而不是我期望的字节数组以及 WebService 应该返回的字节数组。

```
My objective is to Seal a file in order to make them only readable for the right people. I am using the IRM Oracle Web Services to acomplish that, but, though all my parameters semm alright, I can't get the reponse properly.

Acording to the Oraclel support, my request is fine, so it must be something on IIS I guess. Any help? 
```

* * *

异常消息：

响应的内容类型 multipart/related;start="";type="application/xop+xml";boundary="uuid:ab73a894-eaf4-4293-aa4e-c3358b95ec73";start-info="text/xml"消息与绑定的内容类型不匹配 (text/xml; charset=utf-8)。如果使用自定义编码器，请确保正确实现 IsContentTypeSupported 方法。响应的前 748 个字节是：'--uuid:ab73a894-eaf4-4293-aa4e-c3358b95ec73 Content-Id: Content-Type: application/xop+xml;charset=utf-8;type="text/xml"内容传输编码：二进制'。

异常堆栈跟踪：

服务器堆栈跟踪：在 System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout) 处 System.ServiceModel.Channels.HttpChannelUtilities.ValidateRequestReplyResponse(HttpWebRequest request, HttpWebResponse response, HttpChannelFactory factory, WebException responseException, ChannelBinding channelBinding) .ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout) at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout) at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) 在 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) 的操作，Object[] 输入，Object[] 输出，TimeSpan 超时）。ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) 在 [0] 处重新抛出异常：在 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) 在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke( MessageData& msgData，Int32 类型）在 HTMLToPDFComponenteConverter.sealing_services.SealingServices.Seal（SealRequest 请求）在 HTMLToPDFComponenteConverter.sealing_services.SealingServicesClient.HTMLToPDFComponenteConverter.sealing_services.SealingServices.Seal（SealRequest 请求）在 HTMLToPDFComponenteConverter.sealing_services.SealingServicesClient.Seal(Byte[] 流， HTMLToPDFComponenteConverter.ConvertToPDF.Page_Load(Object sender, EventArgs e) 处的字符串 mimeType、SealingOptions 选项Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) 在 HTMLToPDFComponenteConverter.sealing_services.SealingServices.Seal(SealRequest request) 在 HTMLToPDFComponenteConverter.sealing_services 在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 类型)。 SealingServicesClient.HTMLToPDFComponenteConverter.sealing_services.SealingServices.Seal(SealRequest request) at HTMLToPDFComponenteConverter.sealing_services.SealingServicesClient.Seal(Byte[] stream, String mimeType, SealingOptions options) at HTMLToPDFComponenteConverter.ConvertToPDF.Page_Load(Object sender, EventArgs e)Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) 在 HTMLToPDFComponenteConverter.sealing_services.SealingServices.Seal(SealRequest request) 在 HTMLToPDFComponenteConverter.sealing_services 在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 类型)。 SealingServicesClient.HTMLToPDFComponenteConverter.sealing_services.SealingServices.Seal(SealRequest request) at HTMLToPDFComponenteConverter.sealing_services.SealingServicesClient.Seal(Byte[] stream, String mimeType, SealingOptions options) at HTMLToPDFComponenteConverter.ConvertToPDF.Page_Load(Object sender, EventArgs e)seal_services.SealingServices.Seal(SealRequest request) at HTMLToPDFComponenteConverter.sealing_services.SealingServicesClient.HTMLToPDFComponenteConverter.sealing_services.SealingServices.Seal(SealRequest request) at HTMLToPDFComponenteConverter.sealing_services.SealingServicesClient.Seal(Byte[] stream, String mimeType, SealingOptions options) at HTMLToPDFComponenteConverter。 ConvertToPDF.Page_Load（对象发送者，EventArgs e）seal_services.SealingServices.Seal(SealRequest request) at HTMLToPDFComponenteConverter.sealing_services.SealingServicesClient.HTMLToPDFComponenteConverter.sealing_services.SealingServices.Seal(SealRequest request) at HTMLToPDFComponenteConverter.sealing_services.SealingServicesClient.Seal(Byte[] stream, String mimeType, SealingOptions options) at HTMLToPDFComponenteConverter。 ConvertToPDF.Page_Load（对象发送者，EventArgs e）

异常数据：

System.Collections.ListDictionaryInternal

异常来源：

mscorlib

* * *

```
Response.Clear();
Response.ClearHeaders();
Response.ClearContent();
Response.ContentType = "application/vnd.sealedmedia.softseal.pdf";
Response.AddHeader("Content-Disposition", "attachment; filename=Relatorio.spdf");

SealingServicesClient sealingServicesClient =
    new SealingServicesClient("SealingServices");

sealingServicesClient.ClientCredentials.UserName.UserName =
    ConfigurationManager.AppSettings["Irm-user"];
sealingServicesClient.ClientCredentials.UserName.Password =
    ConfigurationManager.AppSettings["Irm-password"];

// Create the classification details used in the sealing options
SealingOptions sealingOptions = new SealingOptions();
// This just set several parameters which the WebService validates. (They're all okay) 
sealingOptions.classification = GetClassificationSetUp();
String mimeType = "application/pdf";
// Here is where everything goes wrong. I keep getting an error message.
byte[] sealedFile = sealingServicesClient.Seal(file, mimeType, sealingOptions);

if (sealedFile != null && sealedFile.Length > 0)
{
    Response.AddHeader("Content-Length", sealedFile.Length.ToString());
    Response.BinaryWrite(sealedFile);
    Response.Flush();
    Response.End();
} 
```

* * *

Meu WebConfig está desse jeito:

* * *

```
<system.serviceModel>
        <client>
                <endpoint address="https://url:porta/irm_sealing/sealing_services"
                        binding="basicHttpBinding" bindingConfiguration="SealingServicesBinding"
                        contract="sealing_services.SealingServices" name="SealingServices"
                        behaviorConfiguration="IrmSealingAbril">
                        <identity>
                                <dns value="localhost" />
                        </identity>
                </endpoint>
        </client>
        <behaviors>
                <endpointBehaviors>
                        <behavior name="IrmSealingAbril">
                                <clientCredentials>
                                        <clientCertificate storeLocation="LocalMachine"
                                                                           storeName="Root"
                                                                           x509FindType="FindByThumbprint"
                                                                           findValue="XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX">
                                        </clientCertificate>
                                </clientCredentials>
                        </behavior>
      </endpointBehaviors>
    </behaviors>
        <bindings>
                <basicHttpBinding>
                        <binding name="SealingServicesBinding" closeTimeout="00:05:00"
                     openTimeout="00:05:00" receiveTimeout="00:10:00" sendTimeout="00:05:00"
                                         allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                     maxBufferSize="2097152" maxBufferPoolSize="524288" maxReceivedMessageSize="2097152"
                     messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                     useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                                <security mode="Transport">
                                        <transport clientCredentialType="Basic" realm="weblogic" />
                                </security>
                        </binding>
                </basicHttpBinding>
    </bindings>
  </system.serviceModel> 
```

我哪里错了？

附加信息：经甲骨文支持确认，该请求显然是正确的。但是，我无法得到返回响应。我认为这可能与 IIS 有关，但我没有配置它的技能。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:43:02.240

我在这里找到了我的问题的答案：

[使用 Web 服务时出错，内容类型“application/xop+xml”与预期类型“text/xml”不匹配](https://stackoverflow.com/questions/10496186/error-consuming-webservice-content-type-application-xopxml-does-not-match-ex)

不管怎么说，还是要谢谢你

# c# - 使用 HtmlAgilityPack/HttpWebRequest 加载禁用 javascript 的页面

> ID：11106491
> 
> 赞同：0
> 
> 时间：2012-06-19T17:49:14.563
> 
> 标签：c#, javascript, httpwebrequest, html-agility-pack

我想知道是否有办法加载禁用 javascript 的页面（即模拟浏览器访问禁用 javascript 的页面）。

我正在探索一种使用 WebRequest 和 UserAgent 的有前途的方法：

```
HttpWebRequest Req = (HttpWebRequest)WebRequest.Create(url);
Req.UserAgent = @"Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5";
WebPage result;

HttpWebResponse resp = (HttpWebResponse)Req.GetResponse();

HtmlDocument doc = new HtmlDocument();      
var resultStream = resp.GetResponseStream();
doc.Load(resultStream); 
```

我想说有一种方法可以在禁用 javascript 的情况下初始化用户代理（在本例中为 firefox），但我不太确定如何去做。

如果有人知道如何仅使用 HtmlAgilityPack 做到这一点，那也将非常有帮助。

此外，在旁注中：使用 HtmlAgilityPack 填写文本框，是否只是：

```
HtmlNode textbox = HtmlDocument doc.DocumentNode.SelectSingleNode("//text[@id='box']");
textbox.SetAttributeValue("value to put in textbox"); 
```

?

非常感谢！

# iphone - 这个 UI 元素是什么

> ID：11106492
> 
> 赞同：0
> 
> 时间：2012-06-19T17:49:20.887
> 
> 标签：iphone, objective-c, ios, macos, uitableview

嘿，我想弄清楚这个元素在我一直在使用的应用程序中是什么，它看起来像 UITableView，但是当你点击它时，它会下拉并显示一些滑块和按钮。如何在我的应用程序中执行此操作？

这里有几张照片来展示它是如何工作的，这是我点击色调曲线按钮之前的样子：

![在此处输入图像描述](../Images/9650f8eacfb3ba799efa53e2ac42a1d2.png)

这是单击色调曲线按钮后的样子：

![在此处输入图像描述](../Images/28c86fe58d3a18538a6d5ab66363ba3e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:55:57.910

真的很难确定。虽然它看起来像`UITableView`，但它可能是自定义对象的组合。如果没有从开发人员那里得到解释或没有看到代码，几乎不可能说出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:57:51.347

这种行为可以使用 UITableView 来实现。当用户点击箭头时，您将在表格视图中添加一个单元格，可能带有行动画以将其设置为动画，使用[`-[UITableView insertRowsAtIndexPaths:withRowAnimation:]`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/insertRowsAtIndexPaths%3awithRowAnimation%3a).

或者，它可以是 UIScrollView 中的自定义控件，它将新视图放置到位并为其大小和位置设置动画以显示，同时还为下部控件的位置设置动画，直到它们进一步位于下方。

# rotation - 俄罗斯方块：旋转碎片时的问题

> ID：11106496
> 
> 赞同：-4
> 
> 时间：2012-06-19T17:49:28.570
> 
> 标签：rotation

我通过旋转公式旋转每一块。更详细，因为旋转角度是 90 所以：

```
xNew = y;  

yNew = -x; 
```

但是我的方法遇到了两个问题：

**1) 开箱即用：**每种类型的部件都适合 4x4 正方形。（左下角的 0,0）但是通过这种旋转，在某些情况下它们会脱离这个框。例如，有一个坐标为 (5,6) 的点，请帮助我如何再次将这些坐标放入 4x4 框，或者给我另一个公式。

**2）在I case：**（4个正方形在同一行或同一列），只有两个旋转案例。但在上面的方法中，他们仍然有 4 件。那么，如何防止这种情况。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:29:01.347

俄罗斯方块板是网格布局。一个非常简单的理解方式是，俄罗斯方块只是一组“填充”的正方形。在布尔意义上，一块可以被视为`0`，或未填充，或`1`，已填充。使用网格（或基于图块）的方法将防止您的块超出界限，并且作为额外的好处，当您到达底部碰撞时还可以简化碰撞代码。

**伪代码**：您可以检查您想要移动的空间`if (!grid[x][y]) block.move(direction)`在哪里，并且是一个任意函数，可以在指定的任何方向上通过一个网格空间调整您的作品和地图。从这个意义上说，你的游戏循环也可以用来逐步丢弃一块并用于下一块。`grid[x][y]``block.move(direction)``block.move('down')``else block.stop(), game.generateBlock()`

使用网格方法，您可以轻松地检查旋转的部分是否会超出边界`if(x < 0 || x > gridWidth) block.move(direction)`，因为`direction`与移动超出边界的方向相反。

继续基于网格的示例，您的作品实际上也只是一种开/关模式，它们的旋转显示如下：

```
 ▇    ▇        ▇ ▇    ▇ ▇ ▇
  ▇ or ▇ ▇ ▇ or ▇   or     ▇
▇ ▇             ▇ 
```

这幅基本的艺术品所说明的是，由于通常是矩形的碎片，碎片不会围绕中心点旋转。但是，这些模式可以很容易地以布尔状态存储，并且您可以跟踪它所在的“位置”并编写代码来测试它，而不管方向如何。

由于每件作品都有有限数量的模式（最多 4 个），因此简单地硬编码它们可能符合您的最大利益。这个答案提供了一些您可能会觉得鼓舞人心的代码：[https ://stackoverflow.com /a/8131337/571506](https://stackoverflow.com/a/8131337/571506)

我强烈建议您进行研究并使用这些简单的变量学习一点线性代数，如果您有一点机会进入 3D 游戏编程。由于每个片段都可以存储为矩阵，因此您可以对基本“片段矩阵”应用简单的变换以获得新模式。这很容易被伪造，或者你可以全力以赴。我强烈建议您进行研究并使用这些简单的变量学习一点线性代数，如果您有一点机会进入 3D 游戏编程。对于算法，请查看以下问题：[如何旋转二维数组？](https://stackoverflow.com/questions/42519/how-do-you-rotate-a-two-dimensional-array)

俄罗斯方块是一个非常有据可查的游戏，可以为你的“工具箱”添加很多技能。尝试使用提供的范例尽可能多地解决它，同时手动进行大部分编程，从长远来看，您会发现它会受益匪浅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:53:07.103

我不明白问题 2，但对于问题 1，你需要做的不仅仅是旋转，你还必须将棋子移到左/右/上/下。

# c# - 使用 CreateUserWizard 时未将对象引用设置为对象错误的实例

> ID：11106498
> 
> 赞同：-1
> 
> 时间：2012-06-19T17:49:32.613
> 
> 标签：c#

当我点击 CreateUserWizard 控件的“下一步”按钮时出现错误 - “对象引用未设置为对象的实例”。我检查了我的代码，我没有将任何变量留空。但我仍然可以'不解决这个错误。

```
 Source Error: 

    Line 29:         object UserGUID = User.ProviderUserKey;
    Line 30: 
    Line 31:         DataSource.InsertParameters.Add("UserId", UserGUID.ToString()); //this is the line that caused the error
    Line 32: 
    Line 33:         DataSource.Insert();

This is my html code file: 

 <form id="form1" runat="server">
    <div>
        <asp:CreateUserWizard ID="CreateUserWizard1" runat="server" 
            OnCreatedUser="CreateUserWizard1_CreatedUser" CreateUserButtonText="Next" 
            FinishCompleteButtonText="Create User" Height="330px" 
            Width="512px">
            <WizardSteps>

                <asp:CreateUserWizardStep ID="CreateUserWizardStep2" runat="server" >
                <ContentTemplate>
                    <table>
                        <tr>
                            <th>User Information</th>
                        </tr>
                        <tr>
                            <td>Username:</td>
                            <td class="style2">
                                <asp:TextBox runat="server" ID="UserName" />
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator9" ControlToValidate="UserName" 
                                    ErrorMessage="Username is required." />
                            </td>
                        </tr>
                        <tr>
                            <td>Password:</td>
                            <td class="style2">
                                <asp:TextBox runat="server" ID="Password" TextMode="Password" />
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator10" ControlToValidate="Password" 
                                    ErrorMessage="Password is required." />
                            </td>
                        </tr>
                        <tr>
                            <td>Confirm Password:</td>
                            <td class="style2">
                                <asp:TextBox runat="server" ID="ConfirmPassword" TextMode="Password" />
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator13" ControlToValidate="ConfirmPassword" 
                                    ErrorMessage="Confirm Password is required." />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Email:</td>
                              <td class="style2">
                                <asp:TextBox runat="server" ID="Email" />
                                  <asp:RequiredFieldValidator ID="RequiredFieldValidator16" runat="server" ControlToValidate="Email" 
                                      ErrorMessage="Email required."></asp:RequiredFieldValidator>
                            </td>
                        </tr>
                        <tr>
                            <td>Question:</td>
                            <td class="style2">
                                <asp:TextBox runat="server" ID="Question" />
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator12" ControlToValidate="Question" 
                                    ErrorMessage="Question is required." />
                            </td>
                        </tr>
                        <tr>
                            <td>Answer:</td>
                            <td class="style2">
                                <asp:TextBox runat="server" ID="Answer" />
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator14" ControlToValidate="Answer" 
                                    ErrorMessage="Answer is required." />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                 <asp:CompareValidator ID="PasswordCompare" runat="server" ControlToCompare="Password"
                                        ControlToValidate="ConfirmPassword" Display="Dynamic" ErrorMessage="The Password and Confirmation Password must match."></asp:CompareValidator>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <asp:Literal ID="ErrorMessage" runat="server" EnableViewState="False"></asp:Literal>
                            </td>
                        </tr>
                    </table>

                </ContentTemplate>
                </asp:CreateUserWizardStep>
                <asp:WizardStep ID="CreateUserWizardStep0" runat="server" Title="User Details">
                    <table>
                        <tr>
                            <th>Billing Information</th>
                        </tr>
                        <tr>
                            <td>Name:</td>
                            <td class="style1">
                                <asp:TextBox runat="server" ID="CustName" />
                                  <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator18" ControlToValidate="CustName"
                                     ErrorMessage="Name is required."  />
                                     </td>
                        </tr> 
                        <tr>
                            <td>Contact Number:</td>
                            <td class="style1">
                                <asp:TextBox runat="server" ID="CustNum"  />
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator19" ControlToValidate="CustNum"
                                     ErrorMessage="Contact num is required."  />
                            </td>
                        </tr>   
                        <tr>
                            <td>Role:</td>
                            <td class="style1">
                                <asp:DropDownList ID="CustRole" runat="server" AutoPostBack="True" Height="16px" 
                                    Width="123px">
                                    <asp:ListItem></asp:ListItem>
                                    <asp:ListItem>Bride</asp:ListItem>
                                    <asp:ListItem>Groom</asp:ListItem>
                                </asp:DropDownList>
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator20" ControlToValidate="CustRole"
                                     ErrorMessage="Role is required." />
                            </td>
                        </tr>                
                        <tr>
                            <td>
                                Status:</td>
                            <td class="style1">
                                <asp:DropDownList ID="CustStatus" runat="server" AutoPostBack="True" 
                                    Height="17px" Width="121px">
                                    <asp:ListItem></asp:ListItem>
                                    <asp:ListItem>Status A</asp:ListItem>
                                    <asp:ListItem>Status B</asp:ListItem>
                                    <asp:ListItem>Status C</asp:ListItem>
                                </asp:DropDownList>
                                <asp:RequiredFieldValidator ID="RequiredFieldValidator15" runat="server" ControlToValidate="CustStatus"
                                    ErrorMessage="Status is required."/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                &nbsp;</td>
                            <td class="style1">
                                &nbsp;</td>
                        </tr>
                        <tr>
                            <td>
                                Partner&#39;s Name:</td>
                              <td class="style1">
                                <asp:TextBox runat="server" ID="PName"  />
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator5" ControlToValidate="PName"
                                     ErrorMessage="PName is required."  />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Partner Email:</td>
                            <td class="style1">
                                <asp:TextBox runat="server" ID="PEmail"  />

                            </td>
                        </tr>
                        <tr>
                            <td>
                                PRole:
                            </td>
                            <td class="style1">
                                <asp:DropDownList ID="PRole" runat="server" AutoPostBack="True" Height="16px" 
                                    Width="123px">
                                    <asp:ListItem></asp:ListItem>
                                    <asp:ListItem>Bride</asp:ListItem>
                                    <asp:ListItem>Groom</asp:ListItem>
                                </asp:DropDownList>
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator7" ControlToValidate="PRole"
                                     ErrorMessage="PRole is required." />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Wed Date:
                            </td>
                            <td class="style1">
                                <cc1:DatePicker ID="WedDate" runat="server" CalendarDate="" 
                                    TextCssClass="" />
                                <asp:RequiredFieldValidator ID="RequiredFieldValidator17" runat="server" ControlToValidate="WedDate"
                                    ErrorMessage="Wedding date required"/>
                            </td>
                        </tr>
                    </table>
                </asp:WizardStep>

                <asp:CompleteWizardStep ID="CompleteWizardStep1" runat="server">
                    <ContentTemplate>
                        <table>
                            <tr>
                                <td align="center" colspan="2">
                                    Complete</td>
                            </tr>
                            <tr>
                                <td>
                                    Your account has been successfully created.</td>
                            </tr>
                            <tr>
                                <td align="right" colspan="2">
                                    <asp:Button ID="ContinueButton" runat="server" CausesValidation="False" 
                                        CommandName="Continue" Text="Continue" ValidationGroup="CreateUserWizard1" />
                                </td>
                            </tr>
                        </table>

                       <asp:SqlDataSource ID="InsertExtraInfo" runat="server" ConnectionString="<%$ ConnectionStrings:ASPNETDBConnectionString1 %>"
                        InsertCommand="INSERT INTO [UserDetails] ([UserId], [CustName], [CustNum], [CustRole], [CustStatus], [PName], [PEmail], [PRole], [WedDate]) VALUES (@UserId, @CustName, @CustNum, @CustRole, @CustStatus, @PName, @PEmail, @PRole, @WedDate)"
                        ProviderName="<%$ ConnectionStrings:ASPNETDBConnectionString1.ProviderName %>">
                        <InsertParameters>
                            <asp:ControlParameter Name="CustName" Type="String" ControlID="CustName" PropertyName="Text" />
                            <asp:ControlParameter Name="CustNum" Type="String" ControlID="CustNum" PropertyName="Text" />
                            <asp:ControlParameter Name="CustRole" Type="String" ControlID="CustRole" PropertyName="Text" />
                            <asp:ControlParameter Name="CustStatus" Type="String" ControlID="CustStatus" PropertyName="Text" />
                            <asp:ControlParameter Name="PName" Type="String" ControlID="PName" PropertyName="Text" />
                            <asp:ControlParameter Name="PEmail" Type="String" ControlID="PEmail" PropertyName="Text" />
                            <asp:ControlParameter Name="PRole" Type="String" ControlID="PRole" PropertyName="Text" />
                            <asp:ControlParameter Name="WedDate" Type="String" ControlID="WedDate" PropertyName="Text" />
                        </InsertParameters>

                    </asp:SqlDataSource>

                    </ContentTemplate>
                </asp:CompleteWizardStep>
            </WizardSteps>

        </asp:CreateUserWizard>
        <br />
    </div>

This is the code behind: 

    using System;
    using System.Data;
    using System.Configuration;
    using System.Web.Security;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.UI;
    using System.Web.UI.WebControls;

    public partial class Register : System.Web.UI.Page
    {
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void CreateUserWizard1_CreatedUser(object sender, EventArgs e)
    {
        TextBox UserName=
        (TextBox)CreateUserWizardStep2.ContentTemplateContainer.FindControl("UserName");

        SqlDataSource DataSource =
        (SqlDataSource)CreateUserWizardStep2.ContentTemplateContainer.FindControl("InsertExtraInfo");

       MembershipUser User = Membership.GetUser(UserName.Text);

        object UserGUID = User.ProviderUserKey;

        DataSource.InsertParameters.Add("UserId", UserGUID.ToString());  //the error lies at here

        DataSource.Insert();

    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:35:02.557

> 我检查了我的代码，我没有让任何变量为空。但我仍然无法解决这个错误。

您尚未检查所有变量，否则不会发生此错误。

您是否检查过您的 DataSource 以确保找到了 SqlDataSource？确保DataSource的InsertParameters属性不为空？UserGUID 确保它不为空？

# string - Powershell 脚本 - 文件命名、日期时间和 FTP

> ID：11106514
> 
> 赞同：2
> 
> 时间：2012-06-19T17:50:32.430
> 
> 标签：string, date, powershell, casting

我是 Powershell 的新手，正在尝试编写一个脚本：

1.  提示输入发票编号
2.  提示日期，然后是月份，然后是发票的年份
3.  如果 2 中的任何值为 null，则它使用脚本运行当天的值来获取该值。
4.  将该信息与一些分隔符与发票编号连接成一个文件名并重命名给定文件（在本例中为“test.txt”）
5.  创建指示文件名的快速单行报告。

我被困在 2 和 3 上。我正在这样做：

```
$InvoiceNumber = read-host "Enter test invoice number: "
$InvDay = $(Read-Host "Enter day of month: "
if ($InvDay){""} Else {Get-Date -format dd})
$InvMonth = $(Read-Host "Enter Month of Year: "
if ($InvMonth){""} Else {Get-Date -format MM})
$InvYear = $(Read-Host "Enter day of month: "
if ($InvYear){""} Else {Get-Date -format yy})

$InvDate = "$InvMonth + "-" + $InvDay + "-" + $InvYear"
Write-Host "InvDate is $InvDate"` 
```

但输出显示`$InvMonth`,`$InvDay`和`$InvYear`as `System.Object[]`。我如何正确地将这些类型转换为可用？我已经搜索了几个小时，但没有找到有效的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:18:24.627

正如我所指出的，您发布的代码存在很多语法问题。这是清理语法并按照我认为您希望的方式运行的代码：

```
$InvoiceNumber = read-host "Enter test invoice number"
$InvDay = $(Read-Host "Enter day of month")
if ($InvDay -eq ''){$InvDay = Get-Date -format dd}
$InvMonth = $(Read-Host "Enter Month of Year")
if ($InvMonth -eq ""){$InvMonth = Get-Date -format MM}
$InvYear = $(Read-Host "Enter Year")
if ($InvYear -eq "") {$InvYear = Get-Date -format yy}

$InvDate = $InvMonth + "-" + $InvDay + "-" + $InvYear
Write-Host "InvDate is $InvDate" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:32:46.617

试一试，对于日期和月份，它会提示直到它获得有效值：

```
$InvoiceNumber = read-host "Enter test invoice number"

do {[int]$InvDay = Read-Host "Enter day of month (1-31)"}
while ((1..31) -notcontains $InvDay)

do {[int]$InvMonth = Read-Host "Enter Month of month (1-12)"}
while ((1..12) -notcontains $InvMonth)

[int]$InvYear = Read-Host "Enter Year"
if (!$InvYear) {$InvYear = Get-Date -format yy}

$InvDate = $InvMonth,$InvDay,$InvYear -join '-'
Write-Host "InvDate is $InvDate" 
```

# django - 托管私有 Sphinx 文档

> ID：11106515
> 
> 赞同：17
> 
> 时间：2012-06-19T17:50:36.370
> 
> 标签：django, python-sphinx

我目前正在为一个相当复杂的 Django 网站使用 Sphinx 编写一些广泛的文档。我一直在内部进行此工作，在我即将离开之前，我想留下可供新开发人员/管理员访问该站点的详细文档。

我的问题是托管此文档的选项是什么？我宁愿它是私人的。文档还涉及网站而不是 python 包。由于这两个原因，我认为阅读文档可能不是最合适的选择。

我遇到了[django-sphinxdoc](http://stefan.sofa-rockers.org/docs/django-sphinxdoc/)，尽管这需要将 Haystack 设置为后端。有没有办法使用内置的 js 搜索简单地为文档提供服务？还是允许私人托管文档的服务？

任何选项将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-19T18:12:48.827

Sphinx 可以生成静态`.html`文件 ( `make html`)。将这些 HTML 文件放在内部 Web 服务器上，您应该可以开始使用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-26T19:17:55.507

查看这个[问题](https://stackoverflow.com/questions/46154383/making-sphinx-documentation-private?noredirect=1&lq=1)的答案（完全披露，我问了这个问题，没有答案做了一些研究和编码并发布了答案，所以虽然它有效，但可能会有更好的答案。如果有人指出，我将非常感激他们出去。）

这个 gitlab repo[在这里](https://gitlab.com/rmenk/private-sphinx-test)展示了一个工作示例。

使用[静态密码保护](https://github.com/matteobrusa/Password-protection-for-static-pages/blob/master/index.html)并在[本期](https://gitlab.com/gitlab-org/gitlab-ce/issues/33422#note_41346218)中进行了讨论。

# android - 如何减少具有高分辨率图像的 ImageView 占用的内存？

> ID：11106516
> 
> 赞同：0
> 
> 时间：2012-06-19T17:50:41.653
> 
> 标签：android, memory, imageview

我在 ImageView 中有以下图像作为 src。我用它作为背景图片。这使我的应用程序内存从 ~5MB 增长到 ~20M。

![在此处输入图像描述](../Images/41af5edbfd6108a90e24ca2082791181.png)

这是使用此图像的代码：（android:id="@+id/listViewBackground" 是我正在谈论的图像视图）

```
 <RelativeLayout
    android:id="@+id/ContentLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/ButtonsMenu"
    android:background="@android:color/transparent" >

    <ImageView
        android:id="@+id/listViewBackground"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@android:color/transparent"
        android:scaleType="center"            
        android:src="@drawable/background" />

    <LinearLayout
        android:id="@+id/header"
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:background="@android:color/transparent" >

        <TextView
            android:id="@+id/leftHeader"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@drawable/button_green"
            android:gravity="center"
            android:text="@string/Title_BatteryLevel"
            android:textColor="@android:color/white" />

        <TextView
            android:id="@+id/rightHeader"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@drawable/button_blue"
            android:gravity="center"
            android:text="@string/Title_Duration"
            android:textColor="@android:color/white" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/AdLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:background="@android:color/transparent" >
    </LinearLayout>

    <ListView
        android:id="@+id/listView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@id/AdLayout"
        android:layout_below="@id/header"
        android:background="@android:color/transparent"
        android:cacheColorHint="#00000000"
        android:clickable="false"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:listSelector="@android:color/transparent"
        android:paddingBottom="5dp" >
    </ListView>
</RelativeLayout> 
```

我需要这个图像到不同的屏幕尺寸，所以它的分辨率很高。我还希望看到这些线条。

如何减少我的应用程序占用的内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:55:54.087

首先，将您的图像缩减为仅可重复的部分。

其次，按照本教程了解如何将背景图像应用于视图（在本例中为您的相对布局“listViewBackground”）[http://androidforbeginners.blogspot.com/2010/06/how-to-tile-background-image-在-android.html](http://androidforbeginners.blogspot.com/2010/06/how-to-tile-background-image-in-android.html)

# linux - 具有高 iowait 的 Amazon EBS 上的磁盘统计信息

> ID：11106520
> 
> 赞同：0
> 
> 时间：2012-06-19T17:51:02.750
> 
> 标签：linux, postgresql, disk, amazon-ebs

我目前正在尝试诊断出现 IO 绑定的 Postgres 数据库的问题。CPU 大部分时间都花在 iowait 上，但 vmstat -d 持续显示所有已安装卷的当前未完成操作为 0。有问题的卷是 EBS 挂载。任何人都知道 EBS 挂载的出色操作统计数据是否刚刚损坏或知道这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T17:26:37.270

很有可能您正遭受使共享物理基础设施饱和的嘈杂邻居的痛苦。

为了诊断这个，我会：

*   创建您的实例和附加的 EBS 挂载的 EBS 快照（您是否有[EBS 支持的实例](https://stackoverflow.com/questions/3630506/benefits-of-ebs-vs-instance-store-and-vice-versa/3630707#3630707)？）
*   在不同的可用区启动服务器的新副本
*   重新测试

请注意，在同一可用区启动一个新实例可能会导致您最终使用相同的硬件，而该硬件会受到嘈杂的邻居的影响。

# ruby-on-rails - 继承的应用程序出现奇怪的路由错误，没有路由匹配 {}

> ID：11106521
> 
> 赞同：5
> 
> 时间：2012-06-19T17:51:06.417
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routes

每当其中一个邮件程序启动时，如果正文包含类似的`link_to root_url`内容，就会出现这个令人难以置信的无用错误：

```
ActionView::Template::Error: No route matches {} 
```

跟踪要么是无用的，要么指向该`link_to`方法。由于这里也非常难以搜索，所以我问的是堆栈溢出。

**更新 1：**为了提供帮助，我发布了可怕的`routes.rb`文件：[https ://gist.github.com/2955610](https://gist.github.com/2955610)

**更新 2：**在控制台中，`app.root_url`提供正确的返回。

**更新3：** `link_to "whatever", root_url`工作得很好。这么奇怪！

**更新 4：**它在常规 rails 视图中运行良好。

**更新 5：已** *修复*现在`image_tag`没有在电子邮件中提供主机，输出：`http://assets/...png`。咳咳。

**更新 6：**我已将其范围缩小到与 (in console) 相同的错误`app.url_for`。我认为这可能是相关的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T17:35:57.907

所以真正的答案是`link_to`在 ActionMailer 中的工作方式与在 ActionController 中不同。不同之处在于 ActionController 显然有一个名为 的选项`:script_name`，这为您做出了各种假设。

现在虽然我不同意这种差异，但您对此无能为力，所以这就是我最终要做的：

```
link_to root_url, root_url 
```

现在，我为什么要同时使用两者？那么两个原因：

1.  我想要 url 作为锚文本和 href。
2.  如果 URL 发生变化，我不想更新所有这些字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:22:26.920

邮件程序的问题是您可能错过了“主机”选项？:)

# mysql - HQL/SQL 根据计数选择前 10 条记录

> ID：11106524
> 
> 赞同：7
> 
> 时间：2012-06-19T17:51:09.680
> 
> 标签：mysql, sql, hibernate, hql

我有 2 张桌子：

```
CATEGORY (id)
POSTING (id, categoryId) 
```

我正在尝试编写 HQL 或 SQL 查询来查找帖子数量最多的前 10 个类别。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T18:12:31.620

SQL查询：

```
SELECT  c.Id, sub.POSTINGCOUNT
FROM CATEGORY c where c.Id IN
( 
    SELECT TOP 10 p.categoryId
    FROM POSTING p
    GROUP BY p.categoryId 
    order by count(1) desc
) 
```

总部：

```
Session.CreateQuery("select c.Id
        FROM CATEGORY c where c.Id IN
        ( 
            SELECT  p.categoryId
            FROM POSTING p
            GROUP BY p.categoryId 
            order by count(1) desc
        )").SetMaxResults(10).List(); 
```

[http://sqlinthewild.co.za/index.php/2010/01/12/in-vs-inner-join/](http://sqlinthewild.co.za/index.php/2010/01/12/in-vs-inner-join/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:01:12.747

在 SQL 中，您可以这样做：

```
SELECT c.Id, sub.POSTINGCOUNT
FROM CATEGORY c 
INNER JOIN 
( 
    SELECT p.categoryId, COUNT(id) AS 'POSTINGCOUNT'
    FROM POSTING p
    GROUP BY p.categoryId
) sub ON c.Id = sub.categoryId
ORDER BY POSTINGCOUNT DESC
LIMIT 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:17:01.973

SQL 可以是：

```
SELECT c.* from CATEGORY c, (SELECT count(id) as postings_count,categoryId
FROM POSTING 
GROUP BY categoryId ORDER BY postings_count
LIMIT 10) d where c.id=d.categoryId 
```

此输出可以映射到 Category 实体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-15T11:37:54.217

我知道这是一个老问题，但我得到了一个令人满意的答案。

JPQL：

```
//the join clause is necessary, because you cannot use p.category in group by clause directly
@NamedQuery(name="Category.topN", 
     query="select c, count(p.id) as uses 
            from Posting p 
            join p.category c 
            group by c order by uses desc ") 
```

爪哇：

```
List<Object[]> list = getEntityManager().createNamedQuery("Category.topN", Object[].class)
            .setMaxResults(10)
            .getResultList();
//here we must made a conversion, because the JPA cannot order using a non select field (used stream API, but you can do it in old way)
List<Category> cats = list.stream().map(oa -> (Category) oa[0]).collect(Collectors.toList()); 
```

# c# - 我可以做哪些优化来更快地运行 C# 程序？

> ID：11106525
> 
> 赞同：-1
> 
> 时间：2012-06-19T17:51:12.447
> 
> 标签：c#

我正在编写交易软件，我需要每一微秒的速度。我能做些什么？我正在考虑使用`ngen`，但维基百科告诉 JIT 可能会更好。我可以调什么？我可以强迫它以`Xeon E5`某种方式使用指令吗？将Windows中的优先级更改为最高帮助，如果是这样，如何始终以最高优先级运行程序？我可以将此程序添加到“受信任”，以便.NET 不会检查安全性等。

即我想要硬件/软件/.net 中的完整配置列表和可以影响和帮助更快地运行程序的操作（如运行 ngen）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T17:52:36.427

是时候停止猜测并找出问题的实际所在。使用[EQATEC](http://eqatec.com/) *免费性能*分析器找出您的瓶颈并解决它们。

`NGEN`有助于提高应用程序的**启动**时间，但绝对不是解决该问题的金钥匙。您很可能会修复它来分析您的应用程序。

**运行时**优化呢：

*   结帐数据库访问（如果有），优化您的查询并将检索到的数据减少到您*真正*需要的数量

*   查看磁盘访问操作

*   看CPU消耗。分析 yoi 后，可以使用[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)从应用程序行为的角度检查 CPU 和内存消耗

*   分析后确定您进行的不必要或繁重的迭代（如果有），并使用字典（仅示例）进行 O(1) 访问

... 和更多...

就像阅读性能方面的文献一样，可以*肯定*地暗示IT 行业最伟大的性能专家之一的怪物博客：[Rico Mariani 的性能花絮](http://blogs.msdn.com/b/ricom/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:02:42.193

1.  不是windows，选择更实时的操作系统，因为速度有几个组成部分，一致的速度还是最好的？

2.  调优代码很好，但不要总是这样做。尝试代码审查、纠正大的逻辑错误或额外的工作比低级调优更有益。

3.  明白每一微秒都很重要，但你的 CPU 和逻辑是最快的部分，网络、磁盘、分页等很可能是真正的敌人。因此，请确保您专注于正确的事情。您必须停止所有不需要的 I/O。

4.  某些驱动程序、网卡等比其他驱动程序更快。

5.  检查您对库的使用并确保您了解它们的性能方面，很多运行时间都在库中等。

当然还有更多以 .NET 为中心的答案和特定的答案，但我尝试回答问题背后的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:06:37.657

消除GC！

人们在交易系统中使用的另一个“技巧”是编写不会进行垃圾收集的 C# 代码。显然，完全移除垃圾回收是不可能的，但您可以做的是在程序运行后最小化或消除 GC。您在初始化阶段完成所有工作以设置您的应用程序、初始化您的组件等，并在此处允许任何 GC。但是一旦您设置好并准备好运行，请确保代码不会产生垃圾并且不会执行装箱/拆箱。（在 SO 上搜索“避免 GC”，您会发现一些有用的信息）。

术语“交易系统”可以包含无数不同的东西。您是在谈论在 .NET 中编写算法吗？还是您的算法是用其他东西编写的，并且有 .NET 框架来托管它？你只是在谈论用户界面吗？你的交易系统是分布式的吗？你知道你的程序需要多快吗？如果您不交易高频模型，那么什么是“足够快”？当您的交易策略不需要时，不要仅仅推动必须在 1-2 毫秒范围内运行的东西。

重要的是，不要抛弃久经考验且值得信赖的 OO 原则；[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)仍然适用于交易系统，尽管在某些情况下您可能会违反规则。只需确保您确定哪些需要提高性能并对其进行优化 - 不要认为您必须优化所有内容并确保您对所有内容进行基准测试和测量，以便您知道哪些需要更快以及需要提高多少。

并保持简单！交易系统不必很复杂。

# objective-c - 获取 NSURLConnection 委托回调到正确的线程

> ID：11106526
> 
> 赞同：0
> 
> 时间：2012-06-19T17:51:19.890
> 
> 标签：objective-c, ios, multithreading, delegates, grand-central-dispatch

当我线程化我的代码时，我似乎无法让委托回调工作。我正在尝试使用 NSURLConnection 调用远程服务器以获取 access_token。access_token 在 connection:didReceiveResponse: delegate 中接收。在我穿线之前，这不是问题。我以为我为我的代表传递了正确的对象，但它没有达到连接：didReceiveResponse：

任何人都可以看到为什么在我线程调用时没有调用 LoginViewController 中的 connection:didReceiveResponse: 吗？谢谢。

登录视图控制器.m

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    NSString *access_token = [self getTokenFromResponse: response]; 
    [self.delegate didGetAccessToken:access_token]; 
}

- (void)fetchAccessTokenNoUI
{
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString: @"www.mysite.com"]];   
    [NSURLConnection connectionWithRequest:request delegate:self];
} 
```

访问令牌.h

```
@interface AccessToken : NSObject
@property (atomic, strong) LoginViewController *loginViewController; // doing this to try to keep it persistent
- (void) fetchAccessTokenWithDelegate: (id <LoginDelegate>)delegate;
@end 
```

访问令牌.m

```
- (void) fetchAccessTokenWithDelegate: (id < LoginDelegate >)delegate
{
    dispatch_queue_t downloadQueue = dispatch_queue_create("Fetch access_token queue", NULL);
    dispatch_async(downloadQueue, ^ {
        // this works fine if I don't do it in a queue
        self.loginViewController = [[LoginViewController alloc] init];
        self.loginViewController.delegate = delegate;
        [self.loginViewController fetchAccessTokenNoUI];

    });
    dispatch_release(downloadQueue);
} 
```

调用类.m

```
- (void)didGetAccessToken:(NSString *)access_token
{
    if (!access_token)
    {
        LoginViewController *userProfileViewController = [[LoginViewController alloc] init];
        userProfileViewController.delegate = self;
        [self.navigationController pushViewController:userProfileViewController animated:YES];
    }
}
- (IBAction)favourite:(id)sender 
{
    AccessToken *accessToken = [[AccessToken alloc] init];
    [accessToken fetchAccessTokenWithDelegate:self];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:05:26.320

您是否放置了存根来实现所需的协议方法，

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection;
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error;
-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data; 
```

因为我有一个类似的问题，在实施它们后就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T18:55:09.833

因此，经过更多研究，我找到了解决方案。

我实际上并不需要 AccessToken.h/m。我认为 NSURLConnection 调用会阻塞我的 UI 线程。但是 NSURLConnection connectionWithRequest:delegate: 会自动在单独的线程中运行。

所以我所要做的就是删除 AccessToken.h 和 AccessToken.m。然后，在 CallingClass.m 中，我将 favourte: 更改为

```
- (IBAction)favourite:(id)sender 
{
    LoginViewController *loginViewController = [[LoginViewController alloc] init];
    [loginViewController fetchAccessTokenWithDelegate:self];

} 
```

就是这样！根本不需要 dispatch_queue_t。

# c# - 使用 CreateUserWizard 时未将对象引用设置为对象错误的实例

> ID：11106528
> 
> 赞同：1
> 
> 时间：2012-06-19T17:51:28.943
> 
> 标签：c#

> **可能重复：**
> [使用 CreateUserWizard 时未将对象引用设置为对象错误的实例](https://stackoverflow.com/questions/11106498/object-reference-not-set-to-an-instance-of-an-object-errors-when-using-createuse)

当我点击 CreateUserWizard 控件的“下一步”按钮时出现错误 - “对象引用未设置为对象的实例”。我检查了我的代码，我没有将任何变量留空。但我仍然可以'不解决这个错误。

这是错误的原因：第 31 行：DataSource.InsertParameters.Add("UserId", UserGUID.ToString());

```
 Source Error: 

    Line 29:         object UserGUID = User.ProviderUserKey;
    Line 30: 
    Line 31:         DataSource.InsertParameters.Add("UserId", UserGUID.ToString()); 
    Line 32: 
    Line 33:         DataSource.Insert();

This is my html code file: 

 <form id="form1" runat="server">
    <div>
        <asp:CreateUserWizard ID="CreateUserWizard1" runat="server" 
            OnCreatedUser="CreateUserWizard1_CreatedUser" CreateUserButtonText="Next" 
            FinishCompleteButtonText="Create User" Height="330px" 
            Width="512px">
            <WizardSteps>

                <asp:CreateUserWizardStep ID="CreateUserWizardStep2" runat="server" >
                <ContentTemplate>
                    <table>
                        <tr>
                            <th>User Information</th>
                        </tr>
                        <tr>
                            <td>Username:</td>
                            <td class="style2">
                                <asp:TextBox runat="server" ID="UserName" />
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator9" ControlToValidate="UserName" 
                                    ErrorMessage="Username is required." />
                            </td>
                        </tr>
                        <tr>
                            <td>Password:</td>
                            <td class="style2">
                                <asp:TextBox runat="server" ID="Password" TextMode="Password" />
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator10" ControlToValidate="Password" 
                                    ErrorMessage="Password is required." />
                            </td>
                        </tr>
                        <tr>
                            <td>Confirm Password:</td>
                            <td class="style2">
                                <asp:TextBox runat="server" ID="ConfirmPassword" TextMode="Password" />
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator13" ControlToValidate="ConfirmPassword" 
                                    ErrorMessage="Confirm Password is required." />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Email:</td>
                              <td class="style2">
                                <asp:TextBox runat="server" ID="Email" />
                                  <asp:RequiredFieldValidator ID="RequiredFieldValidator16" runat="server" ControlToValidate="Email" 
                                      ErrorMessage="Email required."></asp:RequiredFieldValidator>
                            </td>
                        </tr>
                        <tr>
                            <td>Question:</td>
                            <td class="style2">
                                <asp:TextBox runat="server" ID="Question" />
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator12" ControlToValidate="Question" 
                                    ErrorMessage="Question is required." />
                            </td>
                        </tr>
                        <tr>
                            <td>Answer:</td>
                            <td class="style2">
                                <asp:TextBox runat="server" ID="Answer" />
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator14" ControlToValidate="Answer" 
                                    ErrorMessage="Answer is required." />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                 <asp:CompareValidator ID="PasswordCompare" runat="server" ControlToCompare="Password"
                                        ControlToValidate="ConfirmPassword" Display="Dynamic" ErrorMessage="The Password and Confirmation Password must match."></asp:CompareValidator>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <asp:Literal ID="ErrorMessage" runat="server" EnableViewState="False"></asp:Literal>
                            </td>
                        </tr>
                    </table>

                </ContentTemplate>
                </asp:CreateUserWizardStep>
                <asp:WizardStep ID="CreateUserWizardStep0" runat="server" Title="User Details">
                    <table>
                        <tr>
                            <th>Billing Information</th>
                        </tr>
                        <tr>
                            <td>Name:</td>
                            <td class="style1">
                                <asp:TextBox runat="server" ID="CustName" />
                                  <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator18" ControlToValidate="CustName"
                                     ErrorMessage="Name is required."  />
                                     </td>
                        </tr> 
                        <tr>
                            <td>Contact Number:</td>
                            <td class="style1">
                                <asp:TextBox runat="server" ID="CustNum"  />
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator19" ControlToValidate="CustNum"
                                     ErrorMessage="Contact num is required."  />
                            </td>
                        </tr>   
                        <tr>
                            <td>Role:</td>
                            <td class="style1">
                                <asp:DropDownList ID="CustRole" runat="server" AutoPostBack="True" Height="16px" 
                                    Width="123px">
                                    <asp:ListItem></asp:ListItem>
                                    <asp:ListItem>Bride</asp:ListItem>
                                    <asp:ListItem>Groom</asp:ListItem>
                                </asp:DropDownList>
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator20" ControlToValidate="CustRole"
                                     ErrorMessage="Role is required." />
                            </td>
                        </tr>                
                        <tr>
                            <td>
                                Status:</td>
                            <td class="style1">
                                <asp:DropDownList ID="CustStatus" runat="server" AutoPostBack="True" 
                                    Height="17px" Width="121px">
                                    <asp:ListItem></asp:ListItem>
                                    <asp:ListItem>Status A</asp:ListItem>
                                    <asp:ListItem>Status B</asp:ListItem>
                                    <asp:ListItem>Status C</asp:ListItem>
                                </asp:DropDownList>
                                <asp:RequiredFieldValidator ID="RequiredFieldValidator15" runat="server" ControlToValidate="CustStatus"
                                    ErrorMessage="Status is required."/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                &nbsp;</td>
                            <td class="style1">
                                &nbsp;</td>
                        </tr>
                        <tr>
                            <td>
                                Partner&#39;s Name:</td>
                              <td class="style1">
                                <asp:TextBox runat="server" ID="PName"  />
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator5" ControlToValidate="PName"
                                     ErrorMessage="PName is required."  />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Partner Email:</td>
                            <td class="style1">
                                <asp:TextBox runat="server" ID="PEmail"  />

                            </td>
                        </tr>
                        <tr>
                            <td>
                                PRole:
                            </td>
                            <td class="style1">
                                <asp:DropDownList ID="PRole" runat="server" AutoPostBack="True" Height="16px" 
                                    Width="123px">
                                    <asp:ListItem></asp:ListItem>
                                    <asp:ListItem>Bride</asp:ListItem>
                                    <asp:ListItem>Groom</asp:ListItem>
                                </asp:DropDownList>
                                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator7" ControlToValidate="PRole"
                                     ErrorMessage="PRole is required." />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Wed Date:
                            </td>
                            <td class="style1">
                                <cc1:DatePicker ID="WedDate" runat="server" CalendarDate="" 
                                    TextCssClass="" />
                                <asp:RequiredFieldValidator ID="RequiredFieldValidator17" runat="server" ControlToValidate="WedDate"
                                    ErrorMessage="Wedding date required"/>
                            </td>
                        </tr>
                    </table>
                </asp:WizardStep>

                <asp:CompleteWizardStep ID="CompleteWizardStep1" runat="server">
                    <ContentTemplate>
                        <table>
                            <tr>
                                <td align="center" colspan="2">
                                    Complete</td>
                            </tr>
                            <tr>
                                <td>
                                    Your account has been successfully created.</td>
                            </tr>
                            <tr>
                                <td align="right" colspan="2">
                                    <asp:Button ID="ContinueButton" runat="server" CausesValidation="False" 
                                        CommandName="Continue" Text="Continue" ValidationGroup="CreateUserWizard1" />
                                </td>
                            </tr>
                        </table>

                       <asp:SqlDataSource ID="InsertExtraInfo" runat="server" ConnectionString="<%$ ConnectionStrings:ASPNETDBConnectionString1 %>"
                        InsertCommand="INSERT INTO [UserDetails] ([UserId], [CustName], [CustNum], [CustRole], [CustStatus], [PName], [PEmail], [PRole], [WedDate]) VALUES (@UserId, @CustName, @CustNum, @CustRole, @CustStatus, @PName, @PEmail, @PRole, @WedDate)"
                        ProviderName="<%$ ConnectionStrings:ASPNETDBConnectionString1.ProviderName %>">
                        <InsertParameters>
                            <asp:ControlParameter Name="CustName" Type="String" ControlID="CustName" PropertyName="Text" />
                            <asp:ControlParameter Name="CustNum" Type="String" ControlID="CustNum" PropertyName="Text" />
                            <asp:ControlParameter Name="CustRole" Type="String" ControlID="CustRole" PropertyName="Text" />
                            <asp:ControlParameter Name="CustStatus" Type="String" ControlID="CustStatus" PropertyName="Text" />
                            <asp:ControlParameter Name="PName" Type="String" ControlID="PName" PropertyName="Text" />
                            <asp:ControlParameter Name="PEmail" Type="String" ControlID="PEmail" PropertyName="Text" />
                            <asp:ControlParameter Name="PRole" Type="String" ControlID="PRole" PropertyName="Text" />
                            <asp:ControlParameter Name="WedDate" Type="String" ControlID="WedDate" PropertyName="Text" />
                        </InsertParameters>

                    </asp:SqlDataSource>

                    </ContentTemplate>
                </asp:CompleteWizardStep>
            </WizardSteps>

        </asp:CreateUserWizard>
        <br />
    </div>

This is the code behind: 

    using System;
    using System.Data;
    using System.Configuration;
    using System.Web.Security;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.UI;
    using System.Web.UI.WebControls;

    public partial class Register : System.Web.UI.Page
    {
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void CreateUserWizard1_CreatedUser(object sender, EventArgs e)
    {
        TextBox UserName=
        (TextBox)CreateUserWizardStep2.ContentTemplateContainer.FindControl("UserName");

        SqlDataSource DataSource =
        (SqlDataSource)CreateUserWizardStep2.ContentTemplateContainer.FindControl("InsertExtraInfo");

       MembershipUser User = Membership.GetUser(UserName.Text);

        object UserGUID = User.ProviderUserKey;

        DataSource.InsertParameters.Add("UserId", UserGUID.ToString());  //the error lies at here

        DataSource.Insert();

    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:55:45.310

`InsertExtraInfo`实际上是在里面`CompleteWizardStep1`。试试这个：

```
SqlDataSource DataSource =
    (SqlDataSource)CompleteWizardSetp1.ContentTemplateContainer
        .FindControl("InsertExtraInfo"); 
```

但我相信您可以使用最外面的容器`CreateUserWizard1`，这样您就不必担心它在哪一步。

```
CreateUserWizard1.FindControl("InsertExtraInfo"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:00:08.817

你不需要把`SqlDataSource`控制放在里面`wizardcontrol`。把它移出去。你不需要找到它。只需通过其 ID 访问它。

# java - 以秒为单位获取日期表示？

> ID：11106532
> 
> 赞同：18
> 
> 时间：2012-06-19T17:51:49.397
> 
> 标签：java, data-conversion, java.util.date

我正在使用一个 API，它需要一个日期参数作为秒数，一个`int`.

我的问题是我目前存储了这个时间，`java.util.date`我想知道是否有某种方法可以将`java.util.date`变量转换为秒，以便我可以将其放入`int`API 所需的参数中？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-19T17:58:37.000

导入 java.util.Date；

... long secs = (new Date().getTime())/1000; ...

请参阅 - [http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#getTime()](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#getTime())

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-06-05T07:08:40.153

从 Java 8 及更高版本开始，有一种优雅的方法以秒为单位返回 Epoch 时间（自 1970 年 1 月 1 日 0:00:0 以来的秒数）。然后，您可以将此值存储为数值：在这种情况下为“long”。

`long timestamp = java.time.Instant.now().getEpochSecond();`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T17:58:51.377

`java.util.Date.getTime()`它返回自 1970 年 1 月 1 日 00:00:00 GMT 以来此 Date 对象表示的毫秒数。

```
 java.util.Date date=new Date();
    System.out.println(date.getTime()); 
```

*输出*：1340128712111

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T18:01:00.940

秒数本身并没有多大意义。当前分钟内的秒数？自 1970 年 1 月 1 日 0:00:00 以来的秒数？午饭后的秒数？你可以再详细一点吗。

将其放入 API 也没有多大意义，除非您明确指定您正在使用哪个 API，以及您尝试将这些秒数放在哪里。

# python - 将行/列标题添加到 NumPy 数组

> ID：11106536
> 
> 赞同：30
> 
> 时间：2012-06-19T17:52:13.093
> 
> 标签：python, matrix, numpy

我有一个`NumPy` `ndarray`我想添加行/列标题。

数据实际上是 7x12x12，但我可以这样表示：

```
 A=[[[0, 1, 2, 3, 4, 5],
      [1, 0, 3, 4, 5, 6],
      [2, 3, 0, 5, 6, 7],
      [3, 4, 5, 0, 7, 8],
      [4, 5, 6, 7, 0, 9],
      [5, 6, 7, 8, 9, 0]]

     [[0, 1, 2, 3, 4, 5],
      [1, 0, 3, 4, 5, 6],
      [2, 3, 0, 5, 6, 7],
      [3, 4, 5, 0, 7, 8],
      [4, 5, 6, 7, 0, 9],
      [5, 6, 7, 8, 9, 0]]] 
```

其中 A 是我的 2x6x6 数组。

**如何在第一行和第一列中插入标题，以便每个数组在我的`CSV`输出文件中看起来像这样？**

```
 A, a, b, c, d, e, f 
        a, 0, 1, 2, 3, 4, 5,
        b, 1, 0, 3, 4, 5, 6,
        c, 2, 3, 0, 5, 6, 7,
        d, 3, 4, 5, 0, 7, 8,
        e, 4, 5, 6, 7, 0, 9,
        f, 5, 6, 7, 8, 9, 0 
```

现在，我所做的是使数组 7x13x13 并插入数据，这样我就有一行和一列的零，但我更喜欢字符串。

我想我可以写一个 Excel 宏来用字符串替换零。但是，问题在于，如果我尝试将这些零重新分配为我想要的字符串，`NumPy`则无法转换`string`为。`float`

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-21T20:44:02.817

您可以将[`pandas.DataFrame.to_csv`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv)列和索引写入文件：

```
import numpy as np
import pandas as pd

A = np.random.randint(0, 10, size=36).reshape(6, 6)
names = [_ for _ in 'abcdef']
df = pd.DataFrame(A, index=names, columns=names)
df.to_csv('df.csv', index=True, header=True, sep=' ') 
```

将为您提供以下`df.csv`文件：

```
 a b c d e f 
a 1 5 5 0 4 4 
b 2 7 5 4 0 9 
c 6 5 6 9 7 0 
d 4 3 7 9 9 3 
e 8 1 5 1 9 0 
f 2 8 0 0 5 1 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-20T17:31:48.947

Numpy 可以很好地处理 n 维数组，但许多功能仅限于二维数组。甚至不确定您希望输出文件的外观。

许多希望命名列的人忽略了numpy 的[recarray()](http://docs.scipy.org/doc/numpy/reference/generated/numpy.recarray.html)功能。好东西要知道，但这只是“名称”一维。

对于二维，[Pandas](http://pandas.pydata.org)非常酷。

```
In [275]: DataFrame.from_items([('A', [1, 2, 3]), ('B', [4, 5, 6])],
   .....:                      orient='index', columns=['one', 'two', 'three'])
Out[275]: 
   one  two  three
A    1    2      3
B    4    5      6 
```

如果输出是您在这里尝试解决的唯一问题，我可能会坚持使用几行手工编码的魔法，因为它比为一个功能安装另一个包要轻。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T18:55:29.197

认为这通常可以解决问题

输入

```
mats = array([[[0, 1, 2, 3, 4, 5],
    [1, 0, 3, 4, 5, 6],
    [2, 3, 0, 5, 6, 7],
    [3, 4, 5, 0, 7, 8],
    [4, 5, 6, 7, 0, 9],
    [5, 6, 7, 8, 9, 0]],

   [[0, 1, 2, 3, 4, 5],
    [1, 0, 3, 4, 5, 6],
    [2, 3, 0, 5, 6, 7],
    [3, 4, 5, 0, 7, 8],
    [4, 5, 6, 7, 0, 9],
    [5, 6, 7, 8, 9, 0]]]) 
```

代码

```
# Recursively makes pyramiding column and row headers
def make_head(n):
    pre = ''
    if n/26:
        pre = make_head(n/26-1)

    alph = "abcdefghijklmnopqrstuvwxyz"
    pre+= alph[n%26]
    return pre

# Generator object to create header items for n-rows or n-cols
def gen_header(nitems):
    n = -1
    while n<nitems:
        n+=1
        yield make_head(n)

# Convert numpy to list
lmats = mats.tolist()

# Loop through each "matrix"
for mat in lmats:
    # Pre store number of columns as we modify it before working rows
    ncols = len(mat[0])

    # add header value to front of each row from generator object
    for row,hd in zip(mat,gen_header(len(mat))):
        row.insert(0,hd)

    # Create a "header" line for all the columns
    col_hd = [hd for hd in gen_header(ncols-1)]
    col_hd.insert(0,"A")

    # Insert header line into lead row of matrix
    mat.insert(0,col_hd)

# Convert back to numpy
mats = numpy.array(lmats) 
```

输出（存储在垫子中的值）：

```
array([[['A', 'a', 'b', 'c', 'd', 'e', 'f'],
        ['a', '0', '1', '2', '3', '4', '5'],
        ['b', '1', '0', '3', '4', '5', '6'],
        ['c', '2', '3', '0', '5', '6', '7'],
        ['d', '3', '4', '5', '0', '7', '8'],
        ['e', '4', '5', '6', '7', '0', '9'],
        ['f', '5', '6', '7', '8', '9', '0']],

       [['A', 'a', 'b', 'c', 'd', 'e', 'f'],
        ['a', '0', '1', '2', '3', '4', '5'],
        ['b', '1', '0', '3', '4', '5', '6'],
        ['c', '2', '3', '0', '5', '6', '7'],
        ['d', '3', '4', '5', '0', '7', '8'],
        ['e', '4', '5', '6', '7', '0', '9'],
        ['f', '5', '6', '7', '8', '9', '0']]], 
      dtype='|S4') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T18:44:05.567

我不知道有任何方法可以将标题添加到矩阵中（即使我觉得它很有用）。我要做的是创建一个为我打印对象的小类，重载`__str__`函数。

像这样的东西：

```
class myMat:
    def __init__(self, mat, name):
        self.mat = mat
        self.name = name
        self.head = ['a','b','c','d','e','f']
        self.sep = ','

    def __str__(self):
        s = "%s%s"%(self.name,self.sep)
        for x in self.head:
            s += "%s%s"%(x,self.sep)
        s = s[:-len(self.sep)] + '\n'

        for i in range(len(self.mat)):
            row = self.mat[i]
            s += "%s%s"%(self.head[i],self.sep)
            for x in row:
                s += "%s%s"%(str(x),self.sep)
            s += '\n'
        s = s[:-len(self.sep)-len('\n')]

        return s 
```

然后，您可以使用以下代码轻松地使用标题打印它们：

```
print myMat(A,'A')
print myMat(B,'B') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-19T19:34:58.650

不太确定，但您可以考虑看看[Pandas](http://pandas.pydata.org/index.html)。

# vb.net - 更改 TextBox vb.net 数组中 TextBoxes 的 .Text 属性

> ID：11106537
> 
> 赞同：0
> 
> 时间：2012-06-19T17:52:16.847
> 
> 标签：vb.net, visual-studio-2010, vb.net-2010

我有一个文本框数组。让我们说这个：

```
Dim BreakFast1() As TextBox = {txtMBreak1, txtTBreak1, txtWBreak1, txtThBreak1, txtFBreak1, txtSBreak1, txtSunBreak1} 
```

我想要做的是为数组的每个文本框设置 .Text 属性。我试过这个：

```
For i As Integer=0 to 6
  BreakFast1(i).Text= "Smt"
Next 
```

没有成功。我究竟做错了什么？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:54:32.033

您发布的代码没有任何问题，但假设您添加到数组中的文本框实际上引用了实例化`TextBox`对象。如果这些为空，它显然不会工作。要解决这个问题，您有几个选择：

*   将`Dim BreakFast1()...`行向下移动到这些文本框对象被实例化的位置下方。
*   将文本框变量设置为该行之前的新实例。
*   或者，放弃所有这些文本框变量，直接将它们实例化到数组中。

例如：

```
Dim BreakFast1() As TextBox = {New TextBox(), New TextBox(), New TextBox(), New TextBox(), New TextBox(), New TextBox(), New TextBox()} 
```

当您遍历它们时，我建议您使用`For Each`循环（除非有其他原因需要知道循环内的索引）：

```
For Each i As TextBox In BreakFast1
    i.Text = "Smt"
Next 
```

# jquery - .html() 无法从 div 加载背景颜色？

> ID：11106548
> 
> 赞同：1
> 
> 时间：2012-06-19T17:53:27.320
> 
> 标签：jquery, html

我正在使用此脚本在另一个 div 中加载 div 的内容，但未加载此 div 的背景颜色属性。

这是我的代码：

我的菜单：

```
<nav class="navegacao">
    <ul id="menu">
        <li><a href="#home">Home</a></li>
        <li><a href="#empresa">Empresa</a></li>
        <li><a href="#gallery_wrapper">Coleções</a></li>
        <li><a href="#encotre">Encontre</a></li>
        <li><a href="#diferenciais">Diferenciais</a></li>
        <li><a href="#marketing">Marketing</a></li>
    </ul>
</nav> 
```

这是我的内容 div 收件人：

```
<div class="wrapper">
<!--content-->
<section id="content_wrapper">
    <div id="content">
        <div id="splash"></div>
    </div>
</section>
 <!--content end-->
</div> 
```

这是我隐藏的div：

```
<div id="home">TESTE</div> 
```

这是我的CSS：

```
#content_wrapper > #content {
    padding: 48px 78px 30px 78px;
    margin: 135px 0 0 0;
    position: absolute;
    height: 372px;
    width: 791px;
    /*background:#fff;*/
    border-radius: 10px;
    overflow: hidden;
}

#home{
    width:500;
    height:500px;
    background:#FFCC00;
    display:none;
} 
```

这里是我的交换内容代码：

```
$(function() {
        $('#menu a').click(function(e) {
            e.preventDefault();
            var h = $(this).attr('href');
            $("#content").fadeOut("slow", function() {
                $(this).html($(h).html()).fadeIn("slow");
            });
            //alert(h);
        });
    }); 
```

如何使这个工作？

OBS：这是有问题的工作链接：[http ://www.alsite.com.br/sapatoterapia/](http://www.alsite.com.br/sapatoterapia/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:55:32.830

好的，所以我刚刚意识到您正在尝试将#home 的样式加载到#content 中的问题-这行不通...#home 的样式仅适用于ID 为home 的元素...现在您拥有来自home 的内容在#content 容器中..

你可以试试这个

```
var h = $("#home").detach(); // remove the element from the dom... maybe?? but you will now have to re-attach it when you're switching to a new page.
$(this).html("").append(h).fadeIn("slow"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:57:04.370

当您使用时，`$(h).html()`您会在其中获得 HTML ，而不是在***其***本身中。如果您想在那里进行完全隐藏的潜水，请尝试：`<div>``<div>`

```
$(function() {
    $('#menu a').click(function(e) {
        e.preventDefault();
        var h = $($(this).attr('href'));
        h.remove().css('display','block');
        $("#content").fadeOut("slow", function() {
            $(this).html($(h)).fadeIn("slow");
        });
    });
}); 
```

已编辑：更改`h`为实际上是 jQuery 对象，然后将其从 DOM 中删除并将其显示设置为`block`（因为它`none`在 css 中设置为）。这样，当您将其重新添加时，它是页面上的唯一 ID（保持其唯一性）并且它应该是可见的。

再次编辑以尝试使其适用于您正在做的事情：为什么不将隐藏的 div 放入内容 div 中。

```
<div id="content">
    <div id="splash"></div>
    <div id="home"></div>
    ...
</div> 
```

因为他们是`display:none`你仍然会得到你想要的外观。然后，在您的代码中，只需隐藏/显示而不是实际移动内容：

```
$(function() {
    $('#menu a').click(function(e) {
        e.preventDefault();
        var h = $(this).attr('href');
        $("#content").fadeOut("slow", function() {
            $(this).find('div').hide().siblings(h).fadeIn("slow");
        });
    });
}); 
```

当用户点击一个链接时，它会淡出内容，隐藏里面的所有 div，然后淡入与点击关联的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:20:01.243

是否更改此行

```
$(this).html($(h).html()).fadeIn("slow"); 
```

至

```
$(this).html($(h).wrap('<div />').parent().html()).fadeIn("slow"); 
```

并添加这个 CSS

```
#content > div{
   display:block !important;
} 
```

帮助 ？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T19:23:53.787

这是一个 CSS 问题而不是 jQuery 问题。您需要使用 CSS 在其新主页中设置 div 的样式，**或者**使用将与 div 一起移动的内联样式`style="background:someColor"`。

部分问题是您只获得了**#home**的内容，而不是创建具有相同属性的新 div。试一试`$(h).clone()`，而不是`$(h).html()`

# postgresql - PostgreSQL 中的 SELECT 查询

> ID：11106550
> 
> 赞同：1
> 
> 时间：2012-06-19T17:53:35.043
> 
> 标签：postgresql, wxpython

我正在尝试使用 WHERE 子句从 PostgreSQL 数据库中的变量中检索值，但出现错误。

查询是：

```
select age into x from employee where name=name.GetValue() 
```

`name`是我从 wxpython GUI 输入值的文本控件。

由于名称架构不存在，我收到错误消息。

检索值的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T18:09:14.863

"name.GetValue()" 是一个文字字符串，你将它发送到你的数据库，它对 wxpython 一无所知，对你程序中的变量一无所知。您需要将该数据的值发送到您的数据库，可能使用绑定参数。就像是：

```
cur.execute("select age from employee where name=%s", [name.GetValue()])
x = cur.fetchone()[0] # returns a row containing [age] from the db 
```

可能是你所追求的。这将在数​​据库中创建一个带有占位符的查询，然后将 name.GetValue() 的值绑定到该占位符并执行查询。下一行获取查询结果的第一行并将 x 分配给该行中的第一项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:55:31.493

我不确定您要做什么，但我认为您的问题可能是语法（滥用 INTO 而不是 AS）：

```
SELECT age AS x FROM employee WHERE name = .... 
```

# iphone - 在 UIPageViewController 中优化翻页

> ID：11106553
> 
> 赞同：0
> 
> 时间：2012-06-19T17:54:11.583
> 
> 标签：iphone, model-view-controller, uipageviewcontroller

我正在使用 xcode 4.3.1 并使用 File -> New -> Project -> Page-based application 创建了一个应用程序。

在 DataViewController 我创建了一个 webView 并实现了这个 viewWillAppear：

```
 - (void)viewWillAppear:(BOOL)animated {
          [self.webView loadHTMLString:[self.dataObject description] baseURL:[NSURL URLWithString:@""]];
    } 
```

这将创建所需的功能，但是它有点慢，因为 webview 直到它变得可见才开始加载。我想找到一种方法来在它们可见之前加载之前和之后的 webview，以便我可以获得更流畅的翻页效果。

谁能给我一些关于如何做到这一点的建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T05:24:22.680

我在基于导航的（主从）应用程序中使用了 Web 视图（开始一个空白项目并自己制作导航控制器）。在我的 Web 视图控制器类中，我在 viewDidLoad 中加载了 Web 视图，并添加了导航到推送和弹出视图控制器：

```
[UIView transitionWithView:self.navigationController.view duration:0.6 options:UIViewAnimationOptionTransitionCurlUp
                    animations:^{
                        [self.navigationController pushViewController:myViewController animated:NO];
                    }
                    completion:NULL]; 
```

这样，我完成了页面卷曲过渡，然后在 web 视图中加载了数据，我可以处理动画过渡时间`duration`。希望这对你也有帮助。

# php - 使用 PDO 获取插入和更新 ID

> ID：11106555
> 
> 赞同：3
> 
> 时间：2012-06-19T17:54:32.383
> 
> 标签：php, pdo

我正在尝试`mysql_insert_id`使用 PDO。到目前为止，我还没有找到一个适用于插入和更新的好例子。有没有人有一段完整的代码作为例子？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T18:03:21.337

如果您*需要* `$pdo->lastInsertId()`返回刚刚更新的行的 id（如果需要，我会认真重新考虑我的设计，但是嘿……可能是真正的需要），请像这样进行更新：

```
 UPDATE tablename  SET some_column='somevalue',id=LAST_INSERT_ID(id); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T18:00:28.157

[PDO::lastInsertId](http://php.net/manual/en/pdo.lastinsertid.php)。返回最后插入的行或序列值的 ID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:04:11.890

```
<?php 
try { 
    $dbh = new PDO('mysql:host=localhost;dbname=test', 'usrname', 'passwrd'); 

    $stmt = $dbh->prepare("INSERT INTO test (name, email) VALUES(?,?);"); 

    try { 
        $dbh->beginTransaction(); 
        $stmt->execute( array('user', 'user@example.com')); 
        $dbh->commit(); 
        print $dbh->lastInsertId(); 
    } catch(PDOExecption $e) { 
        $dbh->rollback(); 
        print "Error!: " . $e->getMessage() . "</br>"; 
    } 
} catch(PDOExecption $e) { 
    print "Error!: " . $e->getMessage() . "</br>"; 
} 
?> 
```

# java - java odbc foxpro

> ID：11106557
> 
> 赞同：1
> 
> 时间：2012-06-19T17:54:43.310
> 
> 标签：java, foxpro, visual-foxpro

我正在尝试构建一些使用 FoxPro 数据库的 Java 应用程序，该数据库是大型 Visual FoxPro 产品的一部分。我已经能够使用 jdbc-odbc 网桥读取数据。虽然我不得不进行漫长而艰苦的搜索以找出如何完成该任务，但我无法找到的是我是否可以安全地插入/删除/编辑表格。我不知道索引文件是否被 jdbc-odbc 库使用。在相关说明中，是否有人知道您是否使用 MS SqlServer 设置到 foxpro 数据的链接将使 FoxPro 数据“行为”像一个真正的关系数据库，或者以这种方式做事的功能是否与使用odbc 解决方案。
我不是要替换当前的 Visual FoxPro 产品，只是尝试添加一些功能，我不想破坏现有的产品。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:50:25.087

I would imagine the JDBC-ODBC bridge handles indexes transparently, it wouldn't be much use otherwise.

You might be better looking at StelsDBF or Hxtt's native JDBC drivers.

Visual FoxPro is already a relational database. Not sure what you would achieve via the MSSQL approach.

# function - 使用 $libdir/tablefunc crosstab_hash 函数的 postgres 交叉表查询

> ID：11106558
> 
> 赞同：0
> 
> 时间：2012-06-19T17:54:44.903
> 
> 标签：function, postgresql, pivot, crosstab

我的交叉表查询（见下文）运行良好。但是，我必须生成大量这样的查询，而且 - 至关重要的是 - 列定义的数量每天都会有所不同。如果输出 columndef 的数量与交叉表的第二个参数的数量不匹配，则交叉表将抛出错误并中止。因此，我不能像在当前查询中那样“硬连线”列定义，而是需要一个函数来确保列定义将即时同步。是否可以编写一个在所有此类情况下都可重用的通用 postgres 函数？这是我的查询：

```
SELECT *
FROM crosstab
('SELECT 
to_char(ipstimestamp, ''mon DD HH24h'') As row_name, 
ips.objectid::text As category, 
COUNT(*)::integer As value
FROM loggingdb_ips_boolean As log 
INNER JOIN IpsObjects As ips 
ON log.Varid=ips.ObjectId
WHERE ((    log.varid = 37551) 
OR (log.varid = 27087)
OR (log.varid = 29469)   
OR (log.varid = 50876)
OR (log.varid = 45096)
OR (log.varid = 54708)
OR (log.varid = 47475)
OR (log.varid = 54606)
OR (log.varid = 25528)
OR (log.varid = 54729))
 GROUP BY to_char(ipstimestamp, ''yyyy MM DD HH24h''), row_name, objectid, category     
 ORDER BY to_char(ipstimestamp, ''yyyy MM DD HH24h''), row_name, objectid, category', 

 'SELECT DISTINCT varid 
 FROM loggingdb_ips_boolean ORDER BY 1;' 
 )

 As CountsPerHour(row_name text,  
 "25528" integer,
 "27087" integer,
 "29469" integer,
 "37551" integer,
 "45096" integer,
 "54606" integer,
 "54708" integer,
 "54729" integer) 
```

PS：请注意，此查询可以针对以下服务器上的测试数据运行：主机：bellariastrasse.com 数据库：IpsLogging 用户：访客密码：访客

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T01:32:37.777

恐怕你想要的不是完全可能的。如果返回类型不同，您可以

*   创建一个返回泛型的函数`SETOF record`。

但是你必须在每次调用时都提供一个列定义列表——让你回到你开始的地方。

*   为每种不同的情况创建一个具有匹配返回类型的新函数。

但这就是您要避免的...

如果您必须编写“大量此类查询”，您可以改用**查询生成器**函数，它不会返回结果，而是您将在第二步中执行的 DDL 脚本。基本上是一个函数，它将可变部分作为参数并在您的示例中生成查询字符串`RETURNS text`......

这可能会变得非常复杂。必须考虑多个相互叠加的元级别，但这是绝对可能的。一定要大量使用[美元报价](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-DOLLAR-QUOTING)来阻止报价的疯狂。

# javascript - 查找并列出每个元素的 id 值

> ID：11106562
> 
> 赞同：2
> 
> 时间：2012-06-19T17:54:56.217
> 
> 标签：javascript, jquery

我试图在 a 中获取所有找到的元素`<div>`，但默认情况下它在找到第一次出现时停止，但我希望它列出每个找到的元素的`id`值。

所以这不起作用：

```
listy = $("DIV").find("SPAN").attr("id"); 
```

我一直在尝试`.get`and `.map`，但我认为它们不是我想要的..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T17:56:00.380

```
listy = $("div").find("span").map(function(){
    return this.id;
}).get(); 
```

没有`find`更好：**_**

```
listy = $("div span").map(function(){
    return this.id;
}).get(); 
```

[**现场演示**](http://jsfiddle.net/S6GL4/)

如果您只想定义属性`<span>`，`id`请将选择器更改为：

```
$(div span[id]).map(...) 
```

* * *

如果你想要所有的`id`s 作为一个字符串：

```
listy = $("div span").map(function(){
    return this.id;
}).get().join(''); 
```

的参数`join`是分隔符，例如`.join('-')`或`.join(',')`不带：`.join('')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:57:19.300

也许这样？

```
var ids = [];

$("div span").each(function() {
  if (this.id) {
    ids.push(this.id);
  }
}); 
```

attr() 方法将始终仅返回第一个元素属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T18:01:41.623

```
var listy = '';

$("div span").each(function(){  
  listy += this.id ;  
}); 
```

[jsBin 演示](http://jsbin.com/ewuwar/edit#javascript,html,live)

* * *

或者像：

```
var listy = [];                           // create array

$("div span[id]").each(function(){        // span with ID data
  listy.push( this.id );                  // push ID names into array
});

// Now use listy.join(); to see the list
// you can also do: listy+''  to transform it into string. 
```

[jsBIn 演示 2](http://jsbin.com/ewuwar/2/edit)

# c# - C# - 高效搜索和替换字符串中的字符数组

> ID：11106565
> 
> 赞同：5
> 
> 时间：2012-06-19T17:55:04.587
> 
> 标签：c#, asp.net

我有例如

```
string str ='Àpple';
string strNew="";
char[] A = {'À','Á','Â','Ä'};
char[] a = {'à','á','â','ä'}; 
```

我想查看 str 并查看是否找到替换为 Ascii 代码 'A' 。所以结果应该是：

```
strNew = 'Apple'; 
```

这是我的代码：

```
for (int i = 0; i < str.Length; i++)
{ 
    if(str[i].CompareTo(A))
       strNew += 'A'
    else if(str[i].CompareTo(a)) 
       strNew +='a'
    else
       strNew += str[i];
} 
```

但是比较功能不起作用，那我还可以使用什么其他功能呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T17:57:15.387

听起来你*可以*使用：

```
if (A.Contains(str[i])) 
```

但肯定有更有效的方法可以做到这一点。特别是，避免在循环中连接字符串。

我的猜测是，有些 Unicode 规范化方法*也不*需要您对所有这些数据进行硬编码。我确定我记得某个地方，围绕编码后备，但我不能把手指放在它上面......编辑：我怀疑它在附近[`String.Normalize`](http://msdn.microsoft.com/en-us/library/ebza6ck1.aspx)- 至少值得一看。

至少，这会更有效：

```
char[] mutated = new char[str.Length];
for (int i = 0; i < str.Length; i++)
{
    // You could use a local variable to avoid calling the indexer three
    // times if you really want...
    mutated[i] = A.Contains(str[i]) ? 'A'
               : a.Contains(str[i]) ? 'a'
               : str[i];
}
string strNew = new string(mutated); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T17:57:56.133

这应该有效：

```
for (int i = 0; i < str.Length; i++)
{ 
    if(A.Contains(str[i]))
        strNew += 'A'
    else if(a.Contains(str[i])) 
          strNew +='a'
    else
        strNew += str[i];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:06:15.070

尝试使用正则表达式（首先替换为“A”，然后替换为“a”：

```
string result = Regex.Replace("Àpple", "([ÀÁÂÄ])", "A", RegexOptions.None); 
```

然后你可以对“a”做同样的事情。

# php - 在数据库表中使用 php 将一行移动到另一行

> ID：11106570
> 
> 赞同：0
> 
> 时间：2012-06-19T17:55:39.317
> 
> 标签：php, mysql

我正在使用 php 在我的数据库上制作一些 mods，我有两个相同的表，我想将一行从第一个表移动到第二个表，我如何使用纯 php 和 mysql 来做到这一点。

这就是我的桌子的样子

```
CREATE TABLE users (
 username varchar(30) primary key,
 password varchar(32),
 userid varchar(32),
 userlevel tinyint(1) unsigned not null,
 email varchar(50),
 timestamp int(11) unsigned not null
); 
```

到目前为止，这是我的 php 代码

```
function procMoveUser(){
          global $session, $database, $form;
          /* Username error checking */
          $subuser = $this->checkUsername("user");

          /* Errors exist, have user correct them */
          if($form->num_errors > 0){
             $_SESSION['value_array'] = $_POST;
             $_SESSION['error_array'] = $form->getErrorArray();
             header("Location: ".$session->referrer);
          }
          /* move the user */
         else{

      $q = "SELECT * FROM ".TBL_USERS." WHERE username = '$subuser'"; 
      $result = $database->query($q); 

      if($result && $result->num_rows == 1){
          while($array = $result->fetch_assoc() ){
              $second_query = "INSERT INTO".TBL_USERSDONT."VALUES ($array['user'], $array['password'], $array['userid'] , $array['userlevel'] , $array['email'] , $array['timestamp'])"; 
              $second_result = $mysqli->query($second_query);
              if($second_result){
                  // it worked!
                  $q = "DELETE FROM ".TBL_USERS." WHERE username = '$subuser'";
                  $database->query($q);
              }
        }
      }

  }
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:05:18.987

首先，`SELECT * FROM`要移动的行的第一个表。然后，如上所述，使用第一个表中的值运行 INSERT 语句。

```
$q = "SELECT * FROM ".TBL_USERS." WHERE username = '$username'"; 
$result = $mysqli->query($q); 

if($result && $result->num_rows == 1){
    while($array = $result->fetch_assoc() ){
        $second_query = "INSERT INTO second_table VALUES ($array['user'], $array['something'])"; 
        $second_result = $mysqli->query($second_query);
        if($second_result){
        // it worked!
        }
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:12:12.243

也许这会有所帮助：[将现有的 MySQL 表复制到新表](http://www.tech-recipes.com/rx/1487/copy-an-existing-mysql-table-to-a-new-table/)

# sql - 使用来自选择的数据进行更新

> ID：11106582
> 
> 赞同：1
> 
> 时间：2012-06-19T17:56:12.347
> 
> 标签：sql, select, sql-update

我正在编写一个登录函数，我需要它来使用很少的资源，所以我试图尽可能少地调用数据库。

我有以下选择语句：

```
SELECT TOP (1) fldID, fldActive, fldAdmin, fldTester, fldBanned, fldLastLogin
FROM   tblUsers
WHERE  fldName=@n AND fldPass=@p 
```

如果是并且 fldBanned 为假，我需要更新`fldLastLogin`所选用户的字段。`fldActive``true`

有没有办法进行此更新*并仍然返回用户信息*？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:59:55.913

尝试使用`UPDATE / SET`语法作为子查询。 [W3Schools](http://www.w3schools.com/sql/sql_update.asp)有很好的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:51:20.280

我找到了解决方案

```
DECLARE @tbl TABLE (fldID int, fldActive bit, fldAdmin bit, fldTester bit, fldBanned bit, fldLastLogin datetime)
INSERT @tbl SELECT TOP (1) fldID, fldActive, fldAdmin, fldTester, fldBanned, fldLastLogin
FROM luka42_data.luka42_luka42.tblUsers
WHERE (fldName = @n) AND (fldPass = @p)
IF (SELECT COUNT(*) FROM @tbl)>0 AND (SELECT fldActive from @tbl)=1 AND (SELECT fldBanned from @tbl)=0
BEGIN
    UPDATE luka42_data.luka42_luka42.tblUsers SET fldLastLogin=@t;
END
SELECT * FROM @tbl 
```

如果有人有更快的解决方案，请分享

# objective-c - 使用 NSMutableString 附加到文件的末尾

> ID：11106584
> 
> 赞同：38
> 
> 时间：2012-06-19T17:56:21.223
> 
> 标签：objective-c, ios, file-io, append, nsmutablestring

我有一个日志文件，我正在尝试将数据附加到末尾。我有一个`NSMutableString` `textToWrite`变量，我正在执行以下操作：

```
[textToWrite writeToFile:filepath atomically:YES 
                                    encoding: NSUnicodeStringEncoding error:&err]; 
```

但是，当我这样做时，文件中的所有文本都将替换为 textToWrite 中的文本。我怎样才能追加到文件的末尾？（或者更好的是，我怎样才能将文件追加到新行的末尾？）

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-19T18:02:33.830

我想你可以做几件事：

```
NSFileHandle *fileHandle = [NSFileHandle fileHandleForWritingAtPath:aPath];
[fileHandle seekToEndOfFile];
[fileHandle writeData:[textToWrite dataUsingEncoding:NSUTF8StringEncoding]];
[fileHandle closeFile]; 
```

请注意，这会将 NSData 附加到您的文件中——而不是 NSString。请注意，如果您使用 NSFileHandle，则必须事先确保该文件存在。`fileHandleForWritingAtPath`如果路径中不存在文件，将返回 nil。请参阅[NSFileHandle 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilehandle_Class/Reference/Reference.html)。

或者你可以这样做：

```
NSString *contents = [NSString stringWithContentsOfFile:filepath];
contents = [contents stringByAppendingString:textToWrite];
[contents writeToFile:filepath atomically:YES encoding: NSUnicodeStringEncoding error:&err]; 
```

我相信第一种方法是最有效的，因为第二种方法涉及在将新内容写入文件之前将文件的内容读入 NSString。但是，如果您不希望您的文件包含 NSData 并希望将其保留为文本，则第二个选项将更适合您。

**[更新]** 由于 stringWithContentsOfFile 已被[弃用](https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/classes/NSString_Class/DeprecationAppendix/AppendixADeprecatedAPI.html)，您可以修改第二种方法：

```
NSError* error = nil;
NSString* contents = [NSString stringWithContentsOfFile:filepath
                                               encoding:NSUTF8StringEncoding
                                                  error:&error];
if(error) { // If error object was instantiated, handle it.
    NSLog(@"ERROR while loading from file: %@", error);
    // …
}
[contents writeToFile:filepath atomically:YES
                                 encoding:NSUnicodeStringEncoding
                                    error:&err]; 
```

[请参阅有关 stackoverflow 的问题](https://stackoverflow.com/questions/2954892/if-nsstring-stringwithcontentsoffile-is-deprecated-what-is-its-replacement)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-04-16T18:50:17.263

最初，我认为在接受的答案中使用 FileHandler 方法可以将一堆十六进制数据值写入我的文件，但我得到了我所需要的可读文本。因此，根据接受的答案，这就是我想出的：

```
-(void) writeToLogFile:(NSString*)content{
    content = [NSString stringWithFormat:@"%@\n",content];

    //get the documents directory:
    NSString *documentsDirectory = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
    NSString *fileName = [documentsDirectory stringByAppendingPathComponent:@"hydraLog.txt"];

    NSFileHandle *fileHandle = [NSFileHandle fileHandleForWritingAtPath:fileName];
    if (fileHandle){
        [fileHandle seekToEndOfFile];
        [fileHandle writeData:[content dataUsingEncoding:NSUTF8StringEncoding]];
        [fileHandle closeFile];
    }
    else{
        [content writeToFile:fileName
                  atomically:NO
                    encoding:NSUTF8StringEncoding
                       error:nil];
    }
} 
```

这样，如果文件尚不存在，则创建它。如果它已经存在，那么您只需附加到它。此外，如果您进入 plist 并在信息属性列表 UIFileSharingEnabled 下添加一个键并将值设置为 true，则用户可以与他们的计算机同步并通过 iTunes 查看日志文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-14T14:58:53.447

这是[Chase Roberts 解决方案](https://stackoverflow.com/a/16044803/1864294)的（略微采用）Swift 版本：

```
static func writeToFile(content: String, fileName: String = "log.txt") {
    let contentWithNewLine = content+"\n"
    let filePath = NSHomeDirectory() + "/Documents/" + fileName
    let fileHandle = NSFileHandle(forWritingAtPath: filePath)
    if (fileHandle != nil) {
        fileHandle?.seekToEndOfFile()
        fileHandle?.writeData(contentWithNewLine.dataUsingEncoding(NSUTF8StringEncoding)!)
    }
    else {
        do {
            try contentWithNewLine.writeToFile(filePath, atomically: true, encoding: NSUTF8StringEncoding)
        } catch {
            print("Error while creating \(filePath)")
        }
    }
} 
```

# prolog - 在 prolog/swiprolog 中启动一个单独的程序

> ID：11106585
> 
> 赞同：1
> 
> 时间：2012-06-19T17:56:21.993
> 
> 标签：prolog, swi-prolog

我想用 prolog 代码打开 firefox 或其他浏览器。但我怎么能意识到它。

具体我需要像序言一样的评论

open_url_in_Browser X。

其中 X 是 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:47:01.383

```
getenv(browser,"firefox"),www_open_url("url name"). 
```

解决了问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-24T19:57:17.997

我会简单地使用`shell/1`or `shell/2`, or `win_exec/2`, or `win_shell/2`。

# shell - 使用 awk 提取包含特定单词的行记录

> ID：11106588
> 
> 赞同：3
> 
> 时间：2012-06-19T17:56:38.647
> 
> 标签：shell, awk

假设我的输入文件是制表符分隔的，我如何识别 $0 是否包含单词“hello”并且它需要不区分大小写？

```
here is a hello       whateverColumn2
nonono nonono         whateverItIs
here HeLLo again      mockColumn2 
```

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:03:50.563

鉴于您在文件中的行`data.txt`：

```
awk -F"\t" '/hello/ {print $0}' data.txt 
```

将打印

```
here is a hello       whateverColumn2
here hello again      mockColumn2 
```

`-F"\t"`设置选项卡作为输入行的字段分隔符。

*更新*（根据 OP 在下面评论中的要求）：

要使此[不区分大小写](http://www.gnu.org/software/gawk/manual/html_node/Case_002dsensitivity.html#Case_002dsensitivity)，请使用以下`IGNORECASE`标志：

```
awk -F"\t" 'BEGIN{IGNORECASE=1} /hello/ {print $0}' data.txt 
```

请注意，[IGNORECASE 变量](http://www.delorie.com/gnu/docs/gawk/gawk_116.html#IDX863)是 GNU 扩展，在其他版本的 AWK 中可能不可用。

或者，使用`match`. 为了不区分大小写，输入被转换为小写：

```
awk -F"\t" '{if (match(tolower($0), "hello")) print $0}' data.txt 
```

由于 match 可以采用[正则表达式](http://www.gnu.org/software/gawk/manual/html_node/Regexp.html)，因此使用正确的正则表达式可能不需要转换为小写。

在 Linux 下使用 GNU Awk 3.1.6 测试

# php - PHP 意外的 T_FUNCTION/构造问题？

> ID：11106596
> 
> 赞同：1
> 
> 时间：2012-06-19T15:00:59.930
> 
> 标签：php, error-handling

我在 cake php 中有如下代码：

```
public $ceff_instance = array();

public function __construct() {

    $this->ceff_instance = $this->wsMethod_GO();
}

protected $filedMethodMappings = $this->$ceff_instance; 
```

where`$wsMethod_GO`返回一个数组。但是，它说`unexpected T_FUNCTION`我尝试将`$ceff_instance`数组放入`$filedMethodMappings`. 这是什么原因？

我这辈子都想不通。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:00:26.000

```
protected $filedMethodMappings = $this->$ceff_instance; 
```

您不能`$this`在方法之外设置使用。

```
public $ceff_instance = array();
protected $filedMethodMappings = NULL;

public function __construct() {
    $this->ceff_instance = $this->wsMethod_GO();
    $this->filedMethodMappings = $this->$ceff_instance;
} 
```

演示：[http ://codepad.org/1V6ChkY0](http://codepad.org/1V6ChkY0)

# ruby-on-rails - RSpec 测试模型和邮件程序

> ID：11106599
> 
> 赞同：2
> 
> 时间：2012-06-19T17:57:23.280
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

我在模型中有方法

（用户模型）

```
 def create_reset_code
      self.attributes = {:reset_code => Digest::SHA1.hexdigest( Time.now.to_s.split(//).sort_by {rand}.join )}
      save(:validate=>false)
      UserMailer.reset_password_email(self).deliver 
  end 
```

如何在 RSpec 中对其进行测试？我想测试代码生成，并发送电子邮件

PS：用谷歌，但没有找到例子

UPD

我写了两个测试：

```
it "should create reset code" do           
  @user.create_reset_code
  @user.reset_code.should_not be_nil
end    

it "should send reset code by email" do           
  @user.create_reset_code

  @email_confirmation = ActionMailer::Base.deliveries.first
  @email_confirmation.to.should == [@user.email] 
  @email_confirmation.subject.should == I18n.t('emailer.pass_reset.subject')
  @email_confirmation.body.should match(/#{@user.reset_code}/)
end 
```

但是这 --- @email_confirmation.body.should match(/#{@user.reset_code}/) ---- 不起作用

在一封信中，我给出了带有 reset_code 的 url，如下所示 reset_password_url(@user.reset_code)

固定的

```
it "should send reset code by email" do           
  @user.create_reset_code

  @email_confirmation = ActionMailer::Base.deliveries.last
  @email_confirmation.to.should == [@user.email] 
  @email_confirmation.subject.should == I18n.t('emailer.pass_reset.subject')
  @email_confirmation.html_part.body.should match /#{@user.reset_code}/
end 
```

这是工作！

谢谢大家，问题已结束

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T16:11:25.217

```
it "should create reset code" do           
  @user.create_reset_code
  @user.reset_code.should_not be_nil
end   

it "should send reset code by email" do           
  @user.create_reset_code

  @email_confirmation = ActionMailer::Base.deliveries.last
  @email_confirmation.to.should == [@user.email] 
  @email_confirmation.subject.should == I18n.t('emailer.pass_reset.subject')
  @email_confirmation.html_part.body.should match /#{@user.reset_code}/
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T19:13:49.097

您可以使用

```
mail = ActionMailer::Base.deliveries.last 
```

要获取在规范上调用该方法后发送的最后一封电子邮件，那么您可以针对 mail.to 或 mail.body.raw_source 进行规范

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T18:26:43.910

像这样的东西应该可以帮助你..我用过[Rspec 匹配器](http://rspec.rubyforge.org/rspec/1.1.9/classes/Spec/Matchers.html)

```
it "should test your functionality" do
user = Factory(:ur_table, :name => 'xyz', :email => 'xyz@gmail.com')
obj = Factory(:ur_model_table)
key = Digest::SHA1.hexdigest( Time.now.to_s.split(//).sort_by {rand}.join
data = obj.create_reset_code
data.reset_code.should be(key)
let(:mail) {UserMailer.reset_password_email(user) }
mail.to.should be(user.email)
end 
```

# ruby-on-rails - 设计：使用单表继承实例化 current_user

> ID：11106600
> 
> 赞同：8
> 
> 时间：2012-06-19T17:57:24.117
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, single-table-inheritance

我正在使用 rails 3.0.9 并设计用于身份验证。现在我尝试使用单表继承，因为我需要使用多态性，所以我有两个类：UserType1 和 UserType2，它们继承自 User 类。我需要根据用户类型正确地设计实例 current_user 。

例如，

```
class User < ActiveRecord::Base
 #devise and other user logic 
end

class UserType1 < User
  def get_some_attribute
     return "Hello, my type is UserType1"
  end
end

class UserType2 < User
  def get_some_attribute
   return "Hello, my type is UserType2"
  end
end

In controller 

class MyController < ApplicationController
  def action
    @message = current_user.get_some_attribute #depending the type using polymorphism
    render :my_view
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T11:12:40.520

这正是您所需要的：http: [//blog.jeffsaracco.com/ruby-on-rails-polymorphic-user-model-with-devise-authentication](http://blog.jeffsaracco.com/ruby-on-rails-polymorphic-user-model-with-devise-authentication)

您需要覆盖应用程序控制器中的登录路径方法，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T10:52:14.980

您需要在模型中添加`get_some_attribute`方法`User`

```
Module User < ActiveRecord::Base

   #devise and other user logic 

   def get_some_attribute
      #You can put shared logic between the two users type here
   end

end 
```

然后，在用户子类型中覆盖它，如下所示：

```
Module UserType1 < User

   def get_some_attribute
      super
      return "Hello, my type is UserType1"
   end

end

Module UserType2 < User

   def get_some_attribute
      super
      return "Hello, my type is UserType2"
   end

end 
```

然后，`current_user.get_some_attribute`将按您的预期工作，如果您想阅读更多关于 Ruby 中覆盖方法的信息，您可以在[此处阅读](http://rubylearning.com/satishtalim/ruby_overriding_methods.html)

我添加了`super`，因为我假设您在 中具有一些共享逻辑`get_some_attribute`，因为它将`get_some_attribute`在 User 模型中调用，如果您不需要它可以将其删除。

祝你好运！

# dart - dart #import 飞镖编辑器中的怪异

> ID：11106607
> 
> 赞同：2
> 
> 时间：2012-06-19T17:57:50.280
> 
> 标签：dart

所以我有两个 dart 文件——一个定义了入口点 Main()，另一个是我创建的类。主文件#imports dart:html 和#sources 我的班级。我的班级使用 dart:html 命名空间，如果我不 #import 它，Dart 编辑器将显示错误。但是，如果我#import dart:html，我的类将无法编译，因为主文件已经编译了，但是没有#import 可以正常编译。有没有办法安抚飞镖编辑器，或者这是飞镖编辑器如何解析命名空间的已知问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:31:15.217

您应该只进行一次导入，然后从主文件中获取程序文件。像这样的东西：

**主要.dart**

```
#import("dart:html");
#source("program.dart");

main() {
   var program = new Program();
   program.run();
} 
```

**程序.dart**

```
class Program {
   run() {
       var elm = new Element.html("<p>hello world</p>");
       document.body.nodes.add(elm);
   }
} 
```

绝对应该工作。

# hibernate-envers - Envers 为 Map<> 生成“添加”+“删除”编辑而不是“修改”

> ID：11106611
> 
> 赞同：1
> 
> 时间：2012-06-19T17:57:59.113
> 
> 标签：hibernate-envers

我有一个声明为 a 的字段`Map<MyEnum, String>`，该字段已被审核。当对映射中的一个元素进行更改时，会生成两个编辑， an`ADD`和 a `DEL`，而不是单个`MOD`，这反过来意味着尝试插入审计表时违反约束，因为有两个编辑对于同一修订中的单个实体中的单个字段。

我猜我可能可以通过制作`revision_type`表的键的一部分来解决这个问题（这将允许每个实体的每个字段的每种类型进行一次编辑），但这似乎是一个丑陋的黑客，除了我忘记了哪个首先发生了，事实是它是错误的。

顺便说一句，该字段正在正确保存……只是审核记录失败了。

字段声明：

```
@ElementCollection
@CollectionTable(name = "configuration_property", joinColumns = @JoinColumn(name = "configuration_id"))
@MapKeyColumn(name = "property_name")
@Column(name = "property_value", columnDefinition = "longtext")
@MapKeyEnumerated(EnumType.STRING)
private Map<ConfigurationProperty, String> properties = new EnumMap<ConfigurationProperty, String>(ConfigurationProperty.class); 
```

我正在使用休眠 v3.5.6。

我还没有找到任何关于此的错误报告，所以我认为我做错了什么......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:34:51.333

如果您查看 AbstractCollectionMapper.mapCollectionChanges，当前的实现只进行添加和删除。我认为地图被视为元组的集合：（键，值），所以从来没有任何修改。然后错误出现在模式生成中，它应该正确生成密钥。请提交 JIRA 错误 - [https](https://hibernate.onjira.com) ://hibernate.onjira.com，Envers 组件。

# facebook - 如何从 Javascript API 获取 Facebook apiKey？

> ID：11106613
> 
> 赞同：0
> 
> 时间：2012-06-19T17:58:02.157
> 
> 标签：facebook, api

过去，您可以通过检查来测试 Javascript API 中是否存在有效的 api 密钥`FB._apiKey`。但是，在 API 的最新弃用中，这似乎已经消失了（https://developers.facebook.com/blog/post/2012/05/16/platform-updates--operation-developer-love/）：

> 在接下来的几周内，我们将更新 Javascript SDK 以限制公开暴露的接口。这是提高 SDK 可靠性的持续过程的一部分。第一步将包括删除对所有内部属性和以 _ 为前缀的方法的访问权限。

那么：是否有另一种方法可以通过 获得以前可用的内容`FB._apiKey`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:05:31.490

您通常使用您的 appId（又名 API 密钥）初始化 FB.init

您始终可以将其存储为单独的变量并引用它，如下所示：

```
window.fbKey = 'YOUR_APP_ID';
window.fbAsyncInit = function() {
    FB.init({
      appId      : fbKey, // App ID
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    }); 
```

# javascript - 从数组列表Javascript中随机选择一个段落

> ID：11106614
> 
> 赞同：1
> 
> 时间：2012-06-19T17:58:15.510
> 
> 标签：javascript

我正在开发自己的 Lorem Ipsum 生成器，另外还可以在旁边的框中生成相应的 HTML 格式代码。

所以，段落是通过这个按钮生成的

`<button id="generate" type="button" onclick="LoremIpsumRandom()">1 Paragraph</button>`

并在此处生成 `<p id="textarea"></p>`

```
function LoremIpsumRandom()
{
    //global to store previous random int
     _oldInt = null;

var pickRandom = function(paragraphArray)
    {
        //random index of paragraphArray
        var randomInt = Math.floor(Math.random()*paragraphArray.length);
        //ensure random integer isn't the same as last
        if(randomInt == _oldInt)
            pickRandom(paragraphArray);
        else{
            _oldInt = randomInt;
            return paragraphArray[randomInt];
            }
    }
    //your lorem ipsum paragraphs
    var paragraphArray =     [
                            "Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.", 
                            "Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.", 
                            "Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem.", 
                            "Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur?", "Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?", 
                            "At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga.", 
                            "Et harum quidem rerum facilis est et expedita distinctio.", "Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus.", 
                            "Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae.", 
                            "Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat."
                            ];  

//update element content (e.g. `<div>` with paragraph
    document.getElementById("textarea").innerHTML = pickRandom(paragraphArray);
    //document.getElementById("textarea-code").innerText = pickRandom("&lt;P&gt;" + (paragraphArray) + "&lt;&#47;P&gt;");

} 
```

说实话，包括 CSS 没有意义——它只是标准的文本框和自动生成的按钮。

所以，问题是虽然我可以在 id="textarea" 部分生成普通段落，但我也希望能够生成原始 HTML 版本（显示段落和换行符代码。）到目前为止，我已经能够毫无问题地生成原始 HTML，但是当我添加 @pixelbobby 的部分时（确保选择一个句子时，下一个选择不会相同，因为有时会产生真正的随机性)，代码不起作用。在某些情况下，它会生成原始 HTML，但生成的段落是不同的。

其他功能（生成列表、多段落部分和多级列表）使用原始 HTML 并正确输出，并且运行流畅。原始 HTML 始终输出到 `<p id="textarea-code"></p>` 第一个 textarea 部分旁边的位置。

有人可以告诉我如何修改脚本，以便脚本的原始 HTML 部分生成与`pickRandom(paragraphArray)`

因此，这 -`document.getElementById("textarea-code").innerText = pickRandom("&lt;P&gt;" + (paragraphArray) + "&lt;&#47;P&gt;");` 需要与 -`document.getElementById("textarea").innerHTML = pickRandom(paragraphArray);` 但在该行的 pickRandom() 部分中指定的原始 HTML 相同。

任何人都可以帮忙吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:12:43.557

您可以将结果保存`pickRandom(paragraphArray)`在变量中并使用两次：

```
var randomParagraph = pickRandom(paragraphArray); //save the result of pickRandom

document.getElementById("textarea").innerHTML = randomParagraph;
document.getElementById("textarea-code").innerText = "&lt;P&gt;" + randomParagraph + "&lt;&#47;P&gt;"); 
```

# c# - 如何正确使用图像作为工具提示？

> ID：11106617
> 
> 赞同：1
> 
> 时间：2012-06-19T17:58:28.617
> 
> 标签：c#, wpf, image, tooltip, bitmapsource

我有一个1690x214（使用[此](https://stackoverflow.com/a/11102709/995246)`BitmapSource`代码从 EMF 文件中获取），我想将此图像用作. 这是使用 Paint 显示的图像：`ToolTip`

![在此处输入图像描述](../Images/0b724f554e8935fd3d36140296b43392.png)

所以我写了这段代码：

```
BitmapSource bmp = myBitmapSource; // "Dk01Light.EMF"

Image img = new Image()
{
    Source = bmp,
    Width = bmp.Width,
    Height = bmp.Height,
    Stretch = Stretch.Uniform,
};

myTooltip = img; 
```

这是结果：

![在此处输入图像描述](../Images/6be0704a5da5af95a08bee4db1bbc715.png)

如您所见，右边距和下*边距*完全不同。为什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:43:51.787

这似乎是一个 DPI 问题。首先尝试从图像初始化程序中删除宽度和高度。它还应该调整大小以适合其内容。

您还可以尝试将链接到的代码替换为以下代码，以确保正确生成图像：

```
using (System.Drawing.Imaging.Metafile emf = new System.Drawing.Imaging.Metafile(path))
using (System.Drawing.Bitmap bmp = new System.Drawing.Bitmap(emf.Width, emf.Height))
{
    bmp.SetResolution(emf.HorizontalResolution, emf.VerticalResolution);

    using (System.Drawing.Graphics g = System.Drawing.Graphics.FromImage(bmp))
    {
        g.DrawImage(emf,
            new Rectangle(0, 0, emf.Width, emf.Height),
            new Rectangle(0, 0, emf.Width, emf.Height),
            GraphicsUnit.Pixel
        );

        return System.Windows.Interop.Imaging.CreateBitmapSourceFromHBitmap(bmp.GetHbitmap(), IntPtr.Zero, Int32Rect.Empty, BitmapSizeOptions.FromEmptyOptions());
    }
} 
```

# c# - 未能分配给属性“System.Windows.Controls.Primitives.ButtonBase.Click”

> ID：11106618
> 
> 赞同：4
> 
> 时间：2012-06-19T17:58:30.317
> 
> 标签：c#, silverlight, xamlparseexception

有一个我不明白的有趣情况。

这是场景：

我创建了一个简单的 Silverlight 5 应用程序。我在主页上放置了一个按钮控件并创建了一个 Click 事件处理程序。

XAML 如下所示......

```
<UserControl x:Class="SilverlightApplication6.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot" Background="White">
        <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="130,43,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" />
    </Grid>
</UserControl> 
```

到目前为止，一切都很好。

在后面的代码中连接一个事件处理程序......

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    MessageBox.Show("Hi There!!!");
} 
```

编译并运行应用程序。我“单击”按钮并得到一个漂亮的小消息框。再说一次，到目前为止，很好。

在后面的代码中添加一个新方法（如下所示），方法名称与按钮单击事件处理程序相同，但签名不同。

```
private void button1_Click()
{
    MessageBox.Show("This method causes a XamlParseException!");
} 
```

编译并执行代码。调出应用程序并单击按钮，我得到以下异常：

```
System.Windows.Markup.XamlParseException was unhandled by user code
  Message=Failed to assign to property 'System.Windows.Controls.Primitives.ButtonBase.Click'. [Line: 10 Position: 149]
  LineNumber=10
  LinePosition=149
  StackTrace:
       at System.Windows.Application.LoadComponent(Object component, Uri resourceLocator)
       at SilverlightApplication6.MainPage.InitializeComponent()
       at SilverlightApplication6.MainPage..ctor()
       at SilverlightApplication6.App.Application_Startup(Object sender, StartupEventArgs e)
       at MS.Internal.CoreInvokeHandler.InvokeEventHandler(UInt32 typeIndex, Delegate handlerDelegate, Object sender, Object args)
       at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName, UInt32 flags)
  InnerException: 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:02:51.577

问题是这`void button1_Click()`不是`Click`事件的有效处理程序。 `Click`是 a `RoutedEventHandler`，定义为：

```
public delegate void RoutedEventHandler(
    Object sender,
    RoutedEventArgs e
) 
```

请注意，您也可以使用`void button1_Click(object anyName, EventArgs forTheParams)`，它只需要与委托匹配得足够紧密即可进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T06:53:38.660

我有这样的场景，我将按钮链接到这样的方法......

```
<Button Click="MethodName"..../> 
```

我不知何故复制了这个方法，结果我也得到了这个错误。未能分配给属性'System.Windows.Controls.Primitives.ButtonBase.Click 希望这可以帮助某人节省一些时间。

# ajax - 在 AJAX 服务器请求的末尾添加随机数如何防止缓存？

> ID：11106621
> 
> 赞同：2
> 
> 时间：2012-06-19T17:58:42.603
> 
> 标签：ajax, caching, get

在 AJAX 服务器调用的末尾添加一个随机数究竟如何防止数据库服务器或浏览器（不完全确定是哪一个）缓存？为什么这行得通？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:02:18.137

它旨在防止客户端（或反向代理）缓存。

由于缓存将被锁定在确切的请求上，通过在请求中添加随机元素，确切的请求 URL 永远不会被看到两次；所以它不会被使用超过一次，而且智能缓存也不会费心保留那些从未被多次看到过的东西，至少不会持续很长时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T18:00:48.933

这是为了防止您的浏览器（以及合理数量的网络代理）缓存请求。通常，一个查询参数——比如 ?rand2024= 告诉浏览器/代理发送转发请求，其中一个参数告诉你的应用程序行为不同。这就是为什么此类请求对破坏缓存有用的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:03:40.033

您的浏览器缓存由 URL 的确切文本键入的网页，因此添加随机数参数可确保 URL 每次都不同 - 因此没有*真正的*缓存。您的浏览器不知道服务器（希望）忽略此参数。

# iphone - 大数据 POST 后 NSConnection 抛出 303 错误

> ID：11106623
> 
> 赞同：2
> 
> 时间：2012-06-19T17:59:00.137
> 
> 标签：iphone, ios, ios5, nsconnection

```
ERROR: Error Domain=kCFErrorDomainCFNetwork Code=303 "The operation couldn’t be completed. (kCFErrorDomainCFNetwork error 303.)" UserInfo=0x1cd24f40 {NSErrorFailingURLKey=http://test.com/test/, NSErrorFailingURLStringKey=http://test.com/test/} 
```

我可以在没有附件的情况下进行 POST 并且它不会中断，但是只要我附加图像并将其 POST 之后的所有其他请求都失败并出现 303 错误。如果我重新启动应用程序，一切都会再次运行，直到我发布另一张图片。

为了澄清帖子工作正常，图像已正确上传并返回。

# php - 谷歌地图 - 在标记点击时加载多边形

> ID：11106624
> 
> 赞同：0
> 
> 时间：2012-06-19T17:59:07.583
> 
> 标签：php, mysql, google-maps

我有一个带有多边形数据的 kml 文件，该文件太复杂而无法加载到一个 googlemap 上，因为它包含数千个不会一次加载的 latlng 坐标。

我的问题是，点击地图标记时是否可以只加载一个多边形？我有一个 mysql 数据库表，其中包含每个标记的 latlngs，并且该表还有一个 polyCoords 列。我正在使用正确显示所有标记的 php 遍历数据。然后我可以向标记添加一个侦听器，该侦听器将从 polyCoords 列加载数据并仅显示该单击的地图标记的多边形吗？

```
<script type="text/javascript">
function initialize()
{

    var centre = new google.maps.LatLng(34.233753,-83.828712);

    var myOptions =
    {
        zoom: 4,
        center: centre,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    <?php while ($row = @mysql_fetch_assoc($result)) 
{?>

    var myLatlng = new google.maps.LatLng(<?php echo $row['lat'] . ','  . $row['lng']?>);

    var marker = new google.maps.Marker
    (
        {
            position: myLatlng,
            map: map
        }
    );  

<?php }?>

}
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:17:30.023

是的。研究 AJAX。

Google 文档中有一些文章可能会有所帮助：[https ://developers.google.com/maps/documentation/javascript/articles](https://developers.google.com/maps/documentation/javascript/articles)

看看*Using PHP/MySQL with Google Maps*和*Creating a store locator with PHP & MySQL*。后者包括从数据库中获取数据并更新地图上显示的内容（它是标记而不是多边形边界，但技术非常相似）。

如果您遇到特定的编码困难，请提出相关问题。

# pdf - 将道场图表导出为 pdf 或其他一些矢量格式

> ID：11106628
> 
> 赞同：0
> 
> 时间：2012-06-19T17:59:34.307
> 
> 标签：pdf, export, dojo, dojox.gfx

我需要将道场图表导出为 pdf 的帮助。我怎样才能将这样的道场图表导出[为](http://www.hiim.unizg.hr/mihovil/dojo/dojo.html)pdf 或其他一些矢量格式？我试图使用[它](http://dojotoolkit.org/reference-guide/1.7/dojox/gfx/utils/toSvg.html#dojox-gfx-utils-tosvg)，但我无法让它工作。任何矢量格式（即 svg）都适合我！另外，我尝试使用[此示例](https://stackoverflow.com/questions/8790108/export-convert-chart-from-dojo-charting-to-image)，但不知道该怎么做。

谁能帮帮我！！！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:39:48.363

您必须将 dojox 图表 htmlLabels 的属性设置为 false，然后您可以使用以下命令获取 svg：

```
var def = dojox.gfx.utils.toSvg(chart.surface); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:44:35.190

我也试图将道场图表导出为 pdf。我尝试使用 dojox gfx utils 的 toSvg 功能，然后将 svg 流发送到服务器并使用 apache 的 Batik 生成图像或 pdf。

这很好用，除了我无法**导出图表标签**。我尝试使用您共享的图表（http://www.hiim.unizg.hr/mihovil/dojo/dojo.html）来执行此操作，并且它的导出再次运行良好，除了标签。

让我知道，您所看到的确切问题。

谢谢，斯里拉塔。

# javascript - Angular.js 与 Ruby On Rails 表单的集成

> ID：11106631
> 
> 赞同：14
> 
> 时间：2012-06-19T17:59:46.057
> 
> 标签：javascript, html, ruby-on-rails, forms, angularjs

使用 angular.js 通常像 ng-click 或 ng-model 这样的项目直接写在 html 表单元素中，像这样......

```
<input type="text" ng-model="name"> 
```

我将如何使用 Rails 做到这一点？由于 rails 使用嵌入式 ruby​​ 并生成 html....

```
<%= form_for(@user) do |f| %>
<%= f.label :name %>
<%= f.text_field :name %> 
```

如何将 ng-model 添加到 <%= f.text_field :name %> ？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-20T17:13:15.147

理想情况下，您不想混合嵌入式 ruby​​ 插值和 Angular 的插值。最好让 ruby​​ 将 JSON 异步提供给 Angular，让 Angular 负责在客户端填充数据。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-20T17:20:06.073

试试这个，当它是一个连字符分隔的单词时，你需要放在一个哈希符号中。

```
f.text_field :name, :ng => {:model => "name"} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-03T19:28:28.563

我正在使用 AngularJS 指令和 Rails 4，以使 bootstrap-datepicker jquery 插件在 Rails 4 erb 模板上工作，我在其中使用的代码`text_field_tag`如下：

```
<%= text_field_tag(:start_day, nil, class: 'form-control', datepicker: 'datepicker') %> 
```

值得注意的是，这适用于 AngularJS 指令，您在 DOM 上获得的代码如下：

```
<input class="form-control" datepicker="datepicker" type="text"> 
```

我通过以下方式使用该指令：

```
timeAdminCal.directive('datepicker', function(){
      return {
        restrict: 'A',
        link: function ($scope, $element) {
          $element.datepicker({
            format: 'd/m/yyyy',
            autoclose: true,
            todayHighlight: true
          });
        }
      }
    }); 
```

请注意，根据[AngularJS 指令文档](http://docs.angularjs.org/guide/directive)，您可以`restrict`使用类名，因此您可以使用任何类名`text_field_tag`，它也可以使用。

```
timeAdminCal.directive('datepicker', function(){
      return {
        restrict: 'C', // Bind DOM element by class name 'datepicker'
        link: function ($scope, $element) {
          $element.datepicker({
            format: 'd/m/yyyy',
            autoclose: true,
            todayHighlight: true
          });
        }
      }
    }); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-09T20:32:33.000

以下是对我有用的（但它会禁用angularjs的错误消息（“请输入名称。”），即`required: "required"`）：

```
<%= f.input :id, as: :select, label: false, prompt: 'Select a selection',  input_html: { "ng-model" => ""} %> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T19:41:27.940

我认为您可以使用 :html 选项来设置任何元素属性。虽然没有尝试过使用 angular.js 特殊属性;-)

`f.text_field :name, :html => { :ng-model => "name" }`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-28T11:21:40.337

在我当前的项目中，我不得不开始将静态模板转换为 Angular 页面，我所做的就是在模板中渲染 jbuilder 视图并将其放入 ng-init 中。

如果屏幕成为单页应用程序的一部分，我只需要删除该渲染并向 api 添加查询以加载该数据。Twitter就是这样做的，而且简单有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-11T10:33:18.003

如果您使用 ng-model，这意味着您将覆盖对象的 form_for 行为。例如，如果您有

```
= form_for :user do |f|
  = f.text_field :username, 'ng-model': user.username 
```

这意味着文本字段不会呈现从 rails 控制器传递的值。您需要将用户名的值添加到角度控制器内的角度模型中。

# css - CSS 让 div 停留在页面底部

> ID：11106638
> 
> 赞同：0
> 
> 时间：2012-06-19T18:00:07.313
> 
> 标签：css, html, position

我在 Fireworks 中设计了一个页面，然后以 CSS 切片将其导入 Dreamweaver。当中间切片（indexr3c2）中的内容从底部溢出时，我希望最后一个切片（indexr4c1）留在页面底部，我不知道这是否可能按照我的方式完成......这是我的代码：

```
 <html>
    <head>
    <title>index.gif</title>
    <meta http-equiv="Content-Type" content="text/html;iso-8859-1">
    <meta name="description" content="FW MX CSS Layer">
    <style type="text/css">
    #indexr1c1 {
position:absolute;
left:0px;
top:0px;
width:955px;
height:143px;
background-image:url(index_r1_c1.gif);
    }
    #indexr2c1 {
position:absolute;
left:0px;
top:143px;
width:955px;
height:56px;
background-image:url(index_r2_c1.gif);
    }

    #indexr3c1 {
position:absolute;
left:0px;
top:199px;
width:185px;
height:326px;
background-image:url(index_r3_c1.gif);
    }
    #indexr3c2 {
position:absolute;
left:185px;
top:199px;
width:608px;
height:326px;
background-image:url(index_r3_c2.gif);
    }
    #indexr3c3 {
position:absolute;
left:793px;
top:199px;
width:162px;
height:326px;
background-image:url(index_r3_c3.gif);
    }
    #indexr4c1 {
position:absolute;
left:0px;
top:525px;
width:955px;
height:75px;
background-image:url(index_r4_c1.gif);
    }
    </style>
    </head>
    <body bgcolor="#ffffff" >
    <div id="indexr1c1"></div>
    <div id="indexr2c1"></div>
    <div id="indexr3c1"></div>
    <div id="indexr3c2"></div>
    <div id="indexr3c3"></div>
    <div id="indexr4c1"></div>
    </body>
    </html> 
```

非常非常感谢任何回复:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T18:09:42.133

与其从顶部给它一个位置，不如将它设置为`position:fixed`并给它一个*底部*距离`0`。

```
​#bottom {
    position:fixed;
    bottom: 0;
}​ 
```

[演示](http://jsfiddle.net/WAEMJ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:03:59.373

`<div style='position:absolute;'>`在屏幕底部 设置并为其提供坐标。[W3Schools](http://www.w3schools.com/Css/css_positioning.asp)有很好的例子。

# ruby - 为什么在 ruby 救援块中调用的函数无法修改变量？

> ID：11106641
> 
> 赞同：1
> 
> 时间：2012-06-19T18:00:19.183
> 
> 标签：ruby, loops, exception-handling

我的情况与此代码相当：

```
i=0
def add_one(i)
  i+=1
  puts "FUNCTION:#{i}"
end

begin
  puts "BEGIN:#{i}"
  raise unless i>5
rescue
  add_one(i)
  puts "RESCUE:#{i}"
  retry
end 
```

当我运行它时，我反复看到这个输出：

```
BEGIN:0
FUNCTION:1
RESCUE:0 
```

这个版本增加`i`并完美地完成了程序：

```
i=0
begin
  puts "BEGIN:#{i}"
  raise unless i>5
rescue
  i+=1
  puts "RESCUE:#{i}"
  retry
end 
```

为什么有区别？如何在救援块中获得一个函数来实际修改变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T18:26:44.670

这是因为在您的`add_one`函数中，您没有操作与`i`函数外部相同的变量。

让我试着解释一下。在 Ruby 中，您处理通常是可变的对象（值得注意的例外是数字、、、`true`和`false`）`nil`。变量是指向此类对象的指针。多个变量可以指向同一个对象。

```
a = 123
b = a 
```

现在`a`并`b`引用同一个对象。如果您将新对象分配给其中一个`a`或`b`，它们将再次引用不同的对象，同时仍保留名称。

你上面有的是局部变量。这些仅在*范围内*有效，主要是在方法的持续时间内。如果您创建一个新的局部变量（通过为其分配一个值），它将仅在方法执行期间有效，并且将在离开方法后的某个时间被垃圾收集。

现在正如我上面所说，Ruby 中的大多数对象都是可变的，这意味着您可以在保留变量指针的同时更改它们。一个例子是向数组中添加一个元素：

```
array = []
array << :foo 
```

现在该`array`变量仍将引用它初始化时使用的同一个 Array 对象。但是你已经改变了对象。如果您要为`array`变量分配一个新数组，例如

```
array = [:foo] 
```

它看起来像同一个对象，但实际上它们是不同的（您可以验证检查`object_id`每个对象的方法。如果相同，则指的是同一个对象）

现在，当您`i += 1`在`add_one`方法中执行此操作时，您实际上正在运行`i = i + 1`，它将 i 变量设置为本地方法范围内的新值。您实际上并没有更改`i`变量，而是在本地方法范围内为其分配了一个新值。这意味着在您的外部范围（即开始/结束块）上命名的变量将引用与您方法中`i` 的变量不同的对象。这是因为虽然它们具有相同的名称，但它们具有不同的范围。内部作用域总是掩盖外部作用域，因此虽然您在不同作用域中具有相同名称的变量，但它们不会以任何方式干扰（这在处理实例或类变量时会发生变化）`i``add_one`

不幸的是，正如我上面所说，数字是不可变的。你不能改变它们。如果为变量分配一个新数字，它就是一个新对象。因此，您不能将指向另一个范围内的数字的变量的值更改为更改值的代码。

为了避免这种情况，您可以从函数返回一个值并将其显式分配给`i`外部范围内的变量，如下所示

```
i = 0

def add_one(i)
  i+=1
  puts "FUNCTION:#{i}"
  return i
end

i = add_one(i) 
```

或者你可以使用这样的对象的实例变量

```
class Foo
  def initialize
    @i = 0
  end

  def add_one
    @i += 1
  end

  def do_something
    begin
      puts "BEGIN:#{@i}"
      raise unless @i>5
    rescue
      add_one
      puts "RESCUE:#{@i}"
      retry
    end
  end
end

# create a new object and run the instance method
Foo.new.do_something 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:22:25.263

add_one 中的“i”是对参数的本地引用——简而言之，它是一个不同的“i”。

您需要在正确的范围内使用变量。

# apache - Apache 会在没有安装证书的情况下接受 SSL（端口 443）请求吗？

> ID：11106645
> 
> 赞同：0
> 
> 时间：2012-06-19T18:00:28.287
> 
> 标签：apache, iis, ssl

一位顾问最近告诉我，他有使用 IIS 的客户。这些服务器接受端口 443 请求，但系统上没有安装证书。我无法验证这一点，而且我们的服务器无论如何都运行 Apache。

我相信 Apache 会拒绝接受安全流量，或者至少，Apache 会在没有安装证书的情况下大声尖叫。

Apache 会在没有证书的情况下路由端口 443 请求吗？

我们在 CentOS 5 上运行 2.2.3。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:04:30.817

如果您尝试`SSLEngine on`在 Apache Httpd 上启用 SSL ( ) 而不配置证书（及其私钥），您将收到此错误，并且它不会在该端口上侦听（443，除非您配置了另一个端口）：

> [错误] 服务器应该支持 SSL，但没有配置证书 [提示：SSLCertificateFile]

如果您不能依赖知名 CA，则此证书可以自签名或由您自己的 CA 颁发（尽管这不切实际，因为您必须独立分发证书）。

原则上，SSL/TLS 并不严格需要 X.509 证书，但 HTTPS 或多或少需要这样的证书。[此答案](https://serverfault.com/a/343556/47187)中的更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:06:20.310

apache 的默认安装会安装一个您可以使用的不受信任的 ssl 证书，但是当您尝试连接它时浏览器会报错。

不过，一般来说，如果您需要使用 SSL，那么您应该投资购买证书。

# reportviewer - Reportviewer 在本地系统（远程数据库）中工作，但在网络服务器中出错

> ID：11106648
> 
> 赞同：0
> 
> 时间：2012-06-19T18:00:36.120
> 
> 标签：reportviewer

当我设置 reporturl 路径和 remoteserverurl 详细信息 serverurl 时，reportviwer 在本地系统中工作正常：[http](http://sriventech.in/ReportServer) ://sriventech.in/ReportServer 报告路径 ：/invoice.rdlc 并上传显示错误的网站 :: 连接到报告服务器的尝试失败。检查您的连接信息以及报表服务器是否为兼容版本。请求失败，HTTP 状态为 404：未找到。

网络服务器或我的报告路径和 serverrul 详细信息是否有任何问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:00:20.230

除非您处于本地模式，否则您必须向报告服务器提供凭据才能运行报告。通用 404 可能正在掩盖身份验证错误。如果您使用集成身份验证，请确保您在正确的 Active Directory 组中。否则，该页面应提示您登录。

# jquery - 如何创建一个列表，其项目可以相互拖放以在列表中创建组？

> ID：11106649
> 
> 赞同：0
> 
> 时间：2012-06-19T18:00:40.707
> 
> 标签：jquery, jquery-ui, drag-and-drop

假设我有一个包含许多项目的列表。作为用户，我想将一个项目拖放到另一个项目上，这样我就可以在逻辑上将这两个项目分组到一个嵌套列表中，或者一个与主源列表分开的全新列表中。

当一个组被创建或更新时，它需要更新数据库以反映更改。

是否有 jQuery 插件或其他预先存在的解决方案可以帮助我完成此任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:02:40.230

看看可拖动的 jQuery UI 功能... [http://jqueryui.com/demos/sortable/#connect-lists](http://jqueryui.com/demos/sortable/#connect-lists)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:03:52.503

我觉得不需要插件，jQuery本身就可以，你可以使用jQueryUI。我建议“ [Droppable](http://jqueryui.com/demos/droppable/#accepted-elements) ”（当然与 Draggable 一起）

# mysql - 我的 SQL Fiddle 查询有什么问题？

> ID：11106652
> 
> 赞同：6
> 
> 时间：2012-06-19T18:00:52.513
> 
> 标签：mysql, sqlfiddle

看看 SQL fiddle 中的这个简单查询：[http](http://sqlfiddle.com/#!2/c1eb6/1) ://sqlfiddle.com/#!2/c1eb6/1 。这是一个超级简单的更新查询，为什么会产生错误？我想知道这是否可能是该网站中的错误？

构建架构：

```
create table your_table (some_column varchar(50));

insert into your_table set some_column = '30# 11';
insert into your_table set some_column = '30# 12.00';
insert into your_table set some_column = '30# 13.5';
insert into your_table set some_column = 'abdfs';
insert into your_table set some_column = '0000000'; 
```

询问：

```
UPDATE your_table
SET some_column = 1; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T18:38:27.300

对于那些对我在 SQL Fiddle 上处理的一些神秘问题感兴趣的人来说一些背景知识：

[在 JDBC 中禁用显式提交，在 SQL 中检测它们，或将数据库置于只读状态](https://dba.stackexchange.com/q/18971/5074)(dba.se)

从本质上讲，我试图确保小提琴始终保持一致的状态，即使人们在玩它们。我担心的一件事是人们故意弄乱数据库，为可能正在使用它们的其他人破坏它们（这种情况以前发生过，但幸运的是不经常发生）。

我已经找到了为每个数据库平台保持清洁的方法，但有趣的是，每个平台的每个方法都完全不同。不幸的是，对于 MySQL，我不得不求助于最糟糕的选择——只允许右侧的 SELECT。这是因为有太多方法可以编写包含隐式提交的查询，而且我发现没有办法阻止这种情况发生，除非在查询端完全拒绝。这很不幸，我意识到，但这似乎是必需的。

无论如何，这个特殊的错误是我最近对 ​​MySQL 逻辑所做的更改的结果。现在已修复，现在报告预期的错误消息：

> MySQL 的查询面板中不允许使用 DDL 和 DML 语句；只允许 SELECT 语句。将 DDL 和 DML 放在架构面板中。

# php - 如何在 Jcrop 中禁用 aspectRatio

> ID：11106655
> 
> 赞同：0
> 
> 时间：2012-06-19T18:01:00.780
> 
> 标签：php, javascript, jcrop

我实际上正在使用 Jcrop (http://tympanus.net/codrops/2009/10/17/jquery-image-cropper-with-uploader/)。

我想放一个2:3的比例

**或者**

完全禁用“aspectRatio”并让用户自由裁剪他想要的东西。

我刚刚完成阅读文档，但我并没有真正懂英文，所以我没有找到我正在寻找的答案，这里有一些可以帮助我做到这一点吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:14:43.920

我也无法在任何地方找到它的文档，但是查看源代码，通过 api 将纵横比设置为零将禁用它。

同样不把它放在首位将保持默认为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T14:34:09.673

完毕 ！ **aspectRatio : 1 --------- 变成 5 / 3 :)**

```
$(this).fadeIn().Jcrop({
        onChange: showPreview,
        onSelect: showPreview,
        aspectRatio: 5 / 3,
        onSelect: updateCoords,
        setSelect: [ 0, 0, 150, 150 ]
}); 
```

# jquery - Jquery Mobile - 多页 - getElementById 不起作用

> ID：11106658
> 
> 赞同：1
> 
> 时间：2012-06-19T18:01:05.850
> 
> 标签：jquery, asp.net-mvc-3, jquery-mobile

我有许多使用相同模板的页面。如您所知，当从一个页面导航到另一个页面时，jquery mobile 只会拉入下一页的正文。

```
<!-- Page starts here -->
<div data-role="page" class="ui-page">

<div data-role="content" class="ui-content" role="main">

<!-- Content Start -->

@RenderBody()

<!-- Content End -->    

</div><!-- contentMain -->

</div> <!-- page1 -->

<!-- Page ends here --> 
```

在此模板的开头，我引用了一个脚本文件：

```
<script src="@Url.Content("~/Scripts/Apps.js")" type="text/javascript"></script> 
```

在此，我有许多功能来检测每个页面的页面显示并在其中注册功能。

```
$('#Page1').live('pageshow', function (event, ui) {

$('#clear').click(function () {

//Doesn't Work when transitioning between pages - If I refresh or hit this url directly this works      
var word = document.getElementById("word").value;

//Doesn't Work when transitioning between pages - If I refresh or hit this url directly this works 
var word2 = $('#word').val();

});

}); 
```

我的问题是，当我尝试在页面转换后通过 getElementById 或 val() 获取元素时，它总是以未定义的形式返回。虽然如果我刷新页面或直接点击 url 它工作正常，但如果我从我的应用程序中的另一个页面开始（即使它们都使用相同的模板）并尝试导航到另一个它似乎所有的范围都不同，我不确定如何在页面显示后获取页面上的元素？

虽然这似乎有效：

```
alert($("#word").val()); $("#word").val("foobar"); alert($("#word").val()); 
```

如果在按钮上尝试类似下面的操作，它不会隐藏页面转换上的按钮，但是当我直接刷新页面时会隐藏？

```
$('#Page1').live('pageshow', function (event, ui) {

$('#stop').closest('.ui-btn').hide(); 
```

输入：

```
<input type="button" id="stop" value="Stop" data-theme="e" data-inline="true" class="ui-btn-hidden"> 
```

# android - 巨大的形式：我如何在Android中做到这一点？

> ID：11106661
> 
> 赞同：2
> 
> 时间：2012-06-19T18:01:12.843
> 
> 标签：android, layout

我正在使用 Android 3.1 SDK 开发一个 Android 平板电脑应用程序。

我必须在 Android 平板电脑中实现一个表单。现在我在一个屏幕上使用 TableLayout、TableRow、TextView、Spinner、按钮等。

目前我有 80 多个视图，然后我收到了警告。

表单分为几个部分，我想我可以将它分成选项卡，但我不知道我是否会遇到同样的问题（我对 Android 开发非常陌生，现在我正在学习选项卡的工作原理）。

你给我推荐什么？我可能会有 160 或更多的视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:14:00.403

我建议您以某种方式将这个巨大的表格分成多个屏幕/步骤，这对我来说似乎更有用和更易于管理。您可以使用片段来保存步骤，并使用一些分页机制在这些片段之间导航。通过切换片段并保存它们的状态，您可以将屏幕上的视图数量保持在相对较低的水平。查看[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)组件以通过滑动在片段之间导航。或者您可以使用基于普通旧按钮的导航（例如下一步/上一步）。

如果你真的需要在一个屏幕上显示所有的表单元素并且想要保持实例化视图的数量，你可以通过使用虚拟化 ListView 来做到这一点，虽然这对我来说似乎很尴尬。ListView 在滚动期间根据需要构造行，您需要告诉它的适配器您有 X 类型的行，其中 X 是表单部分的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:14:00.527

您为什么不从逻辑上打破这一点`Enormous form`并使用`Next`按钮之类的东西在多个活动中显示表单。这将保持屏幕清洁，不会用太多信息轰炸用户，最终不会在屏幕上发出过多视图的警告。

# c# - 超链接上的阴影效果

> ID：11106662
> 
> 赞同：2
> 
> 时间：2012-06-19T18:01:19.697
> 
> 标签：c#, wpf, xaml, effects

我似乎找不到如何向流文档中的超链接添加阴影。由于 HyperLink 不是 UIElement，它没有 Effect 属性（我所有的谷歌搜索都让我找到了 DropShadowEffect）。它确实有一个 TextEffects 集合，但我似乎无法弄清楚如何用它来创建投影。最终，我想做的是为背景画笔添加阴影，而不是文本本身。

我的要求很模糊，我只需要让焦点外观看起来更好（即标签焦点和键盘焦点，而不是鼠标悬停），我认为一个浅色阴影可以解决问题，但我愿意接受其他建议。

（我没有足够的代表上传截图*grr*所以这里是一个模拟）

`HyperLink`这里有一个

我想在灰色部分（我的应用程序中的浅蓝色）而不是文本（如前所述）周围添加一个阴影。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:28:54.063

我很确定您不能在每个内联的基础上执行此操作。WPF 提供效果的方式是将它们全部应用到可视树中的单个对象。像超链接这样的内容元素都在其父元素（FlowDocumentReader 或类似元素）中组合成一个可视元素。

FlowDocument 控件确实能够使用 BlockUIContainer 块内容元素或 InlineUIContainer 内联内容元素来承载子可视元素。您可以使用它来将 DropShadow 应用于单个超链接，如下所示：

```
<FlowDocument>
        <Paragraph>
            <Run Text="This is a" />
            <InlineUIContainer>
                <TextBlock Background="#FFCDCDCD">
                    <TextBlock.Effect>
                        <DropShadowEffect ShadowDepth="3" Color="#FFC9C9C9" />
                    </TextBlock.Effect>
                    <Hyperlink><Run Text="hyperlink" /></Hyperlink>
                </TextBlock>
            </InlineUIContainer>
        </Paragraph>
</FlowDocument> 
```

# maven - Twitter4j 通过 maven - 缺少类

> ID：11106664
> 
> 赞同：4
> 
> 时间：2012-06-19T18:01:29.877
> 
> 标签：maven, twitter4j

我已经通过 maven 将 twitter4j 集成到我的项目中，使用了 twitter4j 主页上显示的 depndencies/repositories：

```
 <dependency>
     <groupId>org.twitter4j</groupId>
     <artifactId>twitter4j-core</artifactId>
     <version>[2.2,)</version>
    </dependency>
..
    <repository>
     <id>twitter4j.org</id>
     <name>twitter4j.org Repository</name>
     <url>http://twitter4j.org/maven2</url>
     <releases>
        <enabled>true</enabled>
     </releases>
     <snapshots>
        <enabled>true</enabled>
     </snapshots>
    </repository> 
```

不幸的是，并非所有来自 twitter4j 核心项目的资源都在我的项目中可用。例如，接口“StatusListener”不是。也许有人可以提示我出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T19:21:51.940

看起来`twitter4j.StatusListener`该类已移至`twitter4j-stream`版本 2.2.0 中的工件。将其添加到您的依赖项列表中。

# ios - 我可以将图像保存到 Ipad 上的本地照片目录吗？

> ID：11106668
> 
> 赞同：0
> 
> 时间：2012-06-19T18:01:38.440
> 
> 标签：ios, apache-flex, air

我的相机将图像保存到应用程序路径中，但我的客户希望能够从照片目录（当您在 ipad 上使用本机相机应用程序时图像出现的路径）访问照片...如果我尝试保存到“///var/mobile/Media/Photos/”目录，我似乎收到“文件 I/O 错误”，这似乎是位置......这可能吗？还是没有安全或与之相关的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:34:21.820

我从未使用过它，但您想使用[CameraRoll](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/CameraRoll.html)类。它应该做你想做的事，并且基于它简单/简短的 API 似乎可以直接使用。

这是一个[Adob​​e 食谱示例](http://cookbooks.adobe.com/post_Use_CameraUI_to_save_image_to_CameraRoll_on_iOS-19113.html)，它也使用了 CameraUI 类。

# javascript - 带有 Infowindows 的 Google Maps API 多个标记

> ID：11106671
> 
> 赞同：97
> 
> 时间：2012-06-19T18:01:43.660
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers, infowindow

我正在尝试添加多个标记，每个标记都有自己的信息窗口，点击时会出现。我无法启动信息窗口，当我尝试它时，要么只显示一个没有信息窗口的标记。

谢谢，如果您需要更多信息，请告诉我

```
<meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
<style type="text/css">
html {
    height: 100%
}

body {
    height: 100%;
    margin: 0;
    padding: 0
}

#map_canvas {
    height: 100%
}
</style>
<script type="text/javascript"
    src="http://maps.googleapis.com/maps/api/js?key=AIzaSyB1tbIAqN0XqcgTR1-FxYoVTVq6Is6lD98&sensor=false">
</script>
<script type="text/javascript">

var locations = [
    ['loan 1', 33.890542, 151.274856, 'address 1'],
    ['loan 2', 33.923036, 151.259052, 'address 2'],
    ['loan 3', 34.028249, 151.157507, 'address 3'],
    ['loan 4', 33.80010128657071, 151.28747820854187, 'address 4'],
    ['loan 5', 33.950198, 151.259302, 'address 5']
];

function initialize() {

    var myOptions = {
        center: new google.maps.LatLng(33.890542, 151.274856),
        zoom: 8,
        mapTypeId: google.maps.MapTypeId.ROADMAP

    };
    var map = new google.maps.Map(document.getElementById("default"),
        myOptions);

    setMarkers(map, locations)
}

function setMarkers(map, locations) {

    var marker, i
    for (i = 0; i < locations.length; i++) {

        var loan = locations[i][0]
        var lat = locations[i][1]
        var long = locations[i][2]
        var add = locations[i][3]

        latlngset = new google.maps.LatLng(lat, long);

        var marker = new google.maps.Marker({
            map: map, title: loan, position: latlngset
        });
        map.setCenter(marker.getPosition())

        var content = "Loan Number: " + loan + '</h3>' + "Address: " + add

        var infowindow = new google.maps.InfoWindow()

        google.maps.AddListener(marker, 'click', function (map, marker) {
            infowindow.setContent(content)
            infowindow.open(map, marker)
        });
    }
}

</script>
</head>
<body onload="initialize()">
<div id="default" style="width:100%; height:100%"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2012-06-19T18:09:23.397

你可以使用闭包。只需像这样修改您的代码：

```
google.maps.event.addListener(marker,'click', (function(marker,content,infowindow){ 
    return function() {
        infowindow.setContent(content);
        infowindow.open(map,marker);
    };
})(marker,content,infowindow)); 
```

这是[**演示**](http://jsfiddle.net/2crQ7/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-09T17:28:04.897

这是肯定会起作用的代码片段。您可以访问以下[链接](http://www.coolcoder.in/2014/03/how-to-locate-multiple-addresses-on.html)以详细了解 jsFiddle 和说明。 [如何在谷歌地图上以完美缩放定位多个地址](http://www.coolcoder.in/2014/03/how-to-locate-multiple-addresses-on.html)

```
var infowindow = new google.maps.InfoWindow();  
google.maps.event.addListener(marker, 'mouseover', (function(marker) {  
           return function() {  
               var content = address;  
               infowindow.setContent(content);  
               infowindow.open(map, marker);  
           }  
         })(marker)); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-02-19T09:37:09.160

**来源[链接](http://www.freakyjolly.com/embed-google-maps-with-multiple-markers-and-infowindows-info-popups-open-on-click-or-mouse-hover/)**

**演示[链接](https://www.freakyjolly.com/demo/Google/EmbedGoogleMap/)**

以下代码将显示**带有 InfoWindow 的多个标记**。您也可以取消注释代码以在**悬停**时显示信息

[![在此处输入图像描述](../Images/d2b49715a9fafc85cd5797e262a73a56.png)](https://i.stack.imgur.com/yUfRl.jpg)

```
 var map;
            var InforObj = [];
            var centerCords = {
                lat: -25.344,
                lng: 131.036
            };
            var markersOnMap = [{
                    placeName: "Australia (Uluru)",
                    LatLng: [{
                        lat: -25.344,
                        lng: 131.036
                    }]
                },
                {
                    placeName: "Australia (Melbourne)",
                    LatLng: [{
                        lat: -37.852086,
                        lng: 504.985963
                    }]
                },
                {
                    placeName: "Australia (Canberra)",
                    LatLng: [{
                        lat: -35.299085,
                        lng: 509.109615
                    }]
                },
                {
                    placeName: "Australia (Gold Coast)",
                    LatLng: [{
                        lat: -28.013044,
                        lng: 513.425586
                    }]
                },
                {
                    placeName: "Australia (Perth)",
                    LatLng: [{
                        lat: -31.951994,
                        lng: 475.858081
                    }]
                }
            ];

            window.onload = function () {
                initMap();
            };

            function addMarkerInfo() {
                for (var i = 0; i < markersOnMap.length; i++) {
                    var contentString = '<div id="content"><h1>' + markersOnMap[i].placeName +
                        '</h1><p>Lorem ipsum dolor sit amet, vix mutat posse suscipit id, vel ea tantas omittam detraxit.</p></div>';

                    const marker = new google.maps.Marker({
                        position: markersOnMap[i].LatLng[0],
                        map: map
                    });

                    const infowindow = new google.maps.InfoWindow({
                        content: contentString,
                        maxWidth: 200
                    });

                    marker.addListener('click', function () {
                        closeOtherInfo();
                        infowindow.open(marker.get('map'), marker);
                        InforObj[0] = infowindow;
                    });
                    // marker.addListener('mouseover', function () {
                    //     closeOtherInfo();
                    //     infowindow.open(marker.get('map'), marker);
                    //     InforObj[0] = infowindow;
                    // });
                    // marker.addListener('mouseout', function () {
                    //     closeOtherInfo();
                    //     infowindow.close();
                    //     InforObj[0] = infowindow;
                    // });
                }
            }

            function closeOtherInfo() {
                if (InforObj.length > 0) {
                    InforObj[0].set("marker", null);
                    InforObj[0].close();
                    InforObj.length = 0;
                }
            }

            function initMap() {
                map = new google.maps.Map(document.getElementById('map'), {
                    zoom: 4,
                    center: centerCords
                });
                addMarkerInfo();
            } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-18T14:32:53.727

如果您还想将 infowindow 的关闭绑定到某个事件，请尝试这样的操作

```
google.maps.event.addListener(marker,'click', (function(marker,content,infowindow){ 
    return function() {
        infowindow.setContent(content);
        infowindow.open(map,marker);
        windows.push(infowindow)
        google.maps.event.addListener(map,'click', function(){ 
            infowindow.close();
        }); 
    };
})(marker,content,infowindow)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T18:11:33.210

```
function setMarkers(map,locations){

for (var i = 0; i < locations.length; i++)
 {  

 var loan = locations[i][0];
 var lat = locations[i][1];
 var long = locations[i][2];
 var add =  locations[i][3];

 latlngset = new google.maps.LatLng(lat, long);

 var marker = new google.maps.Marker({  
          map: map, title: loan , position: latlngset  
 });
 map.setCenter(marker.getPosition());

 marker.content = "<h3>Loan Number: " + loan +  '</h3>' + "Address: " + add;

 google.maps.events.addListener(marker,'click', function(map,marker){
          map.infowindow.setContent(marker.content);
          map.infowindow.open(map,marker);

 });

 }
} 
```

然后转到`var infowindow = new google.maps.InfoWindow()`函数`initialize()`：

```
function initialize() {

    var myOptions = {
      center: new google.maps.LatLng(33.890542, 151.274856),
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.ROADMAP

    };
    var map = new google.maps.Map(document.getElementById("default"),
        myOptions);
    map.infowindow = new google.maps.InfoWindow();

    setMarkers(map,locations)

  } 
```

# perl - 使用 perl DBI 和 postgresql 的连接池

> ID：11106673
> 
> 赞同：1
> 
> 时间：2012-06-19T18:02:07.043
> 
> 标签：perl, postgresql, connection-pooling, dbi

我正在使用 perl 脚本，它每 5 分钟将记录插入数据库。现在，当有大量可用数据时，与数据库建立的连接数量可能会增加，从而浪费我宝贵的资源。所以我希望连接池机制与 perl 一起工作。我使用 postgresql 作为我的数据库。我用谷歌搜索了一些解决方案，就像[我找到了这样的解决方案，但它们对我不起作用](http://archives.postgresql.org/pgsql-general/2001-01/msg01362.php)

谁能告诉我如何在 perl 中实现连接池？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:41:00.287

我不确定我是否会限制自己使用 perl 解决方案。只需安装[pgbouncer](http://wiki.postgresql.org/wiki/PgBouncer)并将其提供给您需要的任何客户端。

# java - 如何创建 RHQ 插件？

> ID：11106683
> 
> 赞同：3
> 
> 时间：2012-06-19T18:02:43.083
> 
> 标签：java, jboss, metrics, rhq

我正在尝试为需要指标的服务开发 rhq 插件。整个应用程序使用一个 rhq-server。需要一个新的 rhq-plugin，我知道我必须创建一个新的 rhq-plugin.xml 并将其部署为 jar 以供 rhq-server 使用。是否有关于创建 rhq 插件并向其添加指标的教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-28T20:56:25.447

作为对上述白皮书的后续和增强，现在[可以在 GitHub 上](https://github.com/pilhuhn/misc_writing/tree/master/HowToWriteAnRhqPlugin)获得它，其中对较新的 RHQ 版本进行了许多添加和调整。

文本提供了一个分步示例，还涉及编写插件的其他领域。

[RHQ wiki](https://docs.jboss.org/author/display/RHQ/Home)提供了更多信息 - 也在其视频部分。

如果你需要帮助，你也可以在 irc.freenode.net/#rhq 加入 irc 上的 RHQ 团队和社区

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:19:12.340

Red Hat 发布了一份关于如何创建 RHQ-Plugin的[白皮书。](http://www.redhat.com/f/pdf/Write_A_Plugin_WP_web.pdf)这可能是一个很好的起点。

其他有用的参考资料

1.  [视频](http://www.jboss.com/videos/jbosson/)
2.  [视频2](http://vimeo.com/16171314)

# python - 不使用 sudo 运行特定进程

> ID：11106688
> 
> 赞同：1
> 
> 时间：2012-06-19T18:02:54.787
> 
> 标签：python, linux, sudo

我知道我的问题不是很清楚，所以让我在这里尝试解释一下。

我想做的是在完成某项任务后暂停我的电脑。

我的脚本：

```
#my logic or task(Downloading a file)#
cmd = shlex.split("sudo pm-suspend")
>>> subprocess.call(cmd)
[sudo] password for noob: 
```

如您所见，它要求我输入密码，但问题是在执行脚本时我不会坐在我的系统上。

所以，我的问题是如何处理这个问题或有什么其他的替代方法来解决这个问题。

Python 版本是`2.7.3`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:05:45.677

假设您的 pm-suspend 在`/usr/sbin/pm-suspend`

让您的 sudoers 进入`/etc/sudoers`：

```
<username> ALL=(ALL) NOPASSWD: /usr/sbin/pm-suspend 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T18:14:54.423

您可以使用 SetUID 位使脚本以文件所有者的权限运行。您可以通过将其所有者更改为 root 并设置其 SetUID 位来允许特定文件始终以 root 身份运行。设置 SetUID 位：

```
chmod 4755 <filename> 
```

掩码：4000 是 SetUID，0700 是所有者 rwx，0050 和 0005 是组和世界 rx。

您必须确保所有者以外的用户不能编辑此文件，因为如果可以，他们将能够以您的用户身份运行任意命令，这是一个安全风险。

为了在需要时有效，您还必须将文件的所有者设置为 root：

```
sudo chown root <filename> 
```

在这种情况下，`<filename>`应该是您打算运行的任何脚本。它必须是可执行的——如果不是，即你试图运行一个没有设置为独立执行的python程序，你将需要使用一个启动它的包装器。

更多信息：[http ://en.wikipedia.org/wiki/Setuid](http://en.wikipedia.org/wiki/Setuid)

请注意，使用 SetUID 位会带来许多安全风险。如果您需要澄清，请发表进一步的评论。

一位评论者指出，这很可能不适用于 shell 脚本。相反，您需要使用一个包装器，该包装器将从 C 或 C++ 等编译语言调用您的进程。

```
/* setuid_wrapper.cpp */
#include <unistd.h>

int main(int c, char * v[])
{
    // the program to execute
    // replace this with the program you want to call.
    const char * executable = "/bin/false";

    // arguments to pass to program
    // MUST be null terminated, MUST start with executable path
    const char * arguments[] = {executable, "arg1", "arg2", "etc...", NULL};

    execv(executable, arguments);
    perror("execv: ");
    return 1;
} 
```

编译：

```
g++ -o setuid_wrapper setuid_wrapper.cpp 
```

按照前面的说明将其所有者更改为 root 并设置 SetUID 位，并配置您的系统以在需要时运行它而不是您的脚本。

# javascript - 使用PhoneGap 将数据从Symbian 设备传输到服务器？

> ID：11106693
> 
> 赞同：0
> 
> 时间：2012-06-19T18:03:03.903
> 
> 标签：javascript, cordova, symbian

因为**PhoneGap/FileTransfer**在 symbian 上不起作用，我有什么选择可以通过服务器发送和接收信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:31:03.960

只需使用普通的 HTTP 协议向服务器发送 POST 请求。

# javascript - 如何在 OpenLayers 中将标记弹出窗口置于最前面？

> ID：11106694
> 
> 赞同：0
> 
> 时间：2012-06-19T18:03:08.907
> 
> 标签：javascript, popup, openlayers

我有一个弹出窗口，我在 OpenLayers 中这样声明：

```
var feature = new O[penLayers.Feature(markers, lonLat);
feature.popupClass = OpenLayers.Class(OpenLayers.Popup.FramedCloud, {
    'autoSize': true;
    'maxSize': new OpenLayers.Size(500, 300)
}); 
```

问题是我的地图上的多个弹出窗口是使用连续的 z 索引创建的，因此弹出窗口将始终按添加标记的顺序显示，最新标记的弹出窗口始终位于顶部。

有没有办法改变它，使最近点击的标记弹出窗口位于顶部，而不是最近添加的标记？我已经尝试在 firebug 中手动更改 z-index（作为测试），但它并没有把它带到前面。我宁愿避免删除和重新制作弹出窗口或标记，但这似乎是我能找到的唯一解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-04T05:03:53.213

您可以使用 jQuery 来制作`zindex`类似这样的技巧

```
clientesLayer = new OpenLayers.Layer.Vector("PuntosVentas");

feature = new OpenLayers.Feature.Vector(
    new OpenLayers.Geometry.Point(vectorFatri.puntos[index][0],vectorFatri.puntos[index][1]),
    {description: '<div><div class="popup_title"><h4>'+vectorFatri.imei+'</h4></div><div class="popup_content">'+vectorFatri.fecha[index]+'</div></div>'} ,
    {
        strokeColor: "#00FF00",
        strokeOpacity: 1,
        strokeWidth: 2,
        fillColor: "#FF5500",
        fillOpacity: 0.5,
        pointRadius: 6,
        pointerEvents: "visiblePainted"
    }
);

controls = {
    selector: new OpenLayers.Control.SelectFeature(clientesLayer, {

        onSelect: function (feature) {
            feature.popup = new OpenLayers.Popup.FramedCloud("pop",
                    feature.geometry.getBounds().getCenterLonLat(),
                    new OpenLayers.Size(300,200),
                    '<div class="markerContent">'+feature.attributes.description+'</div>',
                    null,
                    true,
                    function() { controls['selector'].unselectAll(); }
            );
            map.addPopup(feature.popup);
            {# console.log('me seleccionaron');#}

            //jquery trick to make the popup front of everything
            $(".olPopup").css("z-index", 10000)

            {# setTimeout(function(){$(".olPopup").css("z-index", 10000);}, 2000);#}
        },

        onUnselect: function (feature) {
            map.removePopup(feature.popup);
            feature.popup.destroy();
            feature.popup = null;
        }
    })
}

map.addControl(controls['selector']);
controls['selector'].activate();
clientesLayer.addFeatures(feature); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T00:01:03.090

我无法弄清楚如何可靠地更改 z-index 并让它工作，但我能够通过完全删除然后在我想要它在前面创建地图标记的新克隆来解决我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-27T06:34:34.023

调用`ms.setZIndex(100000);`where`ms`是标记的容器（的一个实例`OpenLayers.Layer.Markers`）；

# java - 在 Java 上使用 String.endswith() 方法

> ID：11106696
> 
> 赞同：5
> 
> 时间：2012-06-19T18:03:16.600
> 
> 标签：java

我有一个数组，如果它在数组中，我想检查最后一位数字。

例子：

```
String[] types = {".png",".jpg",".gif"}

String image = "beauty.jpg";
// Note that this is wrong. The parameter required is a string not an array.
Boolean true = image.endswith(types); 
```

请注意：我知道我可以使用 for 循环检查每个单独的项目。

我想知道是否有更有效的方法来做到这一点。原因是图像字符串已经在不断变化的循环中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-19T18:05:41.043

```
Arrays.asList(types).contains(image.substring(image.lastIndexOf('.') + 1)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T18:05:19.467

您可以对最后 4 个字符进行子串化：

`String ext = image.substring(image.length - 4, image.length);`

然后使用一个`HashMap`或其他一些搜索实现来查看它是否在您批准的文件扩展名列表中。

`if(fileExtensionMap.containsKey(ext)) {`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:11:24.223

使用 Arrays.asList 转换为列表。然后，您可以检查会员资格。

```
String[] types = {".png",".jpg",".gif"};
String image = "beauty.jpg";
if (image.contains(".")) 
    System.out.println(Arrays.asList(types).contains(
        image.substring(image.lastIndexOf('.'), image.length()))); 
```

# sql-server-2000 - SQL Server 2000，表分配了太多空间

> ID：11106701
> 
> 赞同：1
> 
> 时间：2012-06-19T18:03:35.910
> 
> 标签：sql-server-2000

因此，我们正在使用的一些数据库出现了一个相当大的问题。出于某种原因，人们的数据库已经增长到一个荒谬的文件大小，而表的数据没有任何变化。虽然我不知道是什么突然导致了这种情况，但我现在更关心的是清除它使用的磁盘空间。我已经运行 sp_spaceused 并将罪魁祸首追踪到 2 个表中的 1 个（取决于数据库）。对于每个数据库，其中一个表为保留空间分配了超过半 GB 的空间，而数据只有 50 MB 左右。它显示 index_size 约为 113 MB。该表没有聚集索引，大约有 15 列，除了 2 列长度为 255 的 nvarchar 类型（这些列在表中通常为 null 或空）外，所有列的长度都相对较小。

我试过运行 DBCC 收缩数据库和截断表，但它没有做任何事情。我对此进行了一些研究，其他一些人也遇到了这个问题，但是如果 shrinkdatabase 没有修复它，那么也没有为他们找到解决方案。

让我知道你们是否需要了解有关表或数据库设置的任何其他信息。我不知道还能尝试什么，这对我们来说是一个重大问题，因为人们的数据库突然占用了之前 10 倍的空间。

编辑：在尝试运行 DBCC DBREINDEX 并尝试通过企业管理器更改为聚集索引后，我收到一条错误消息：

> 无法为数据库“DB”分配新页面。文件组 PRIMARY 中没有更多可用页面。可以通过删除对象、添加其他文件或允许文件增长来创建空间。

我也试过从这个表中删除行，它对表的大小没有影响。日志文件按预期增加，但这是表大小的唯一变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:23:56.667

这些是堆（没有聚集索引）？为什么？

如果用户做了很多更新或删除，我会尝试重建表。Shrinkdatabase 不是这样做的方法。它不会修复碎片、删除时未恢复的空间或更改列的宽度，或者作为转发指针浪费的行。我敢打赌，重建和/或聚集索引的表会更好。在 SQL Server 2000 中，您可以通过以下任一方式执行此操作：

(a) 添加聚集索引。（我无法为您提供添加聚集索引（或更改现有索引之一或要聚集的非聚集主键）的确切语法，因为我没有关于您的表的足够信息。）

(b) DBCC DBREINDEX('dbo.tablename');

这将在您的堆上重建非聚集索引，但这可能对您没有好处，具体取决于浪费空间的发生位置。我仍然建议您应该创建一个聚集索引。如果您可以分享有关您的表的一些详细信息（例如，存在的索引、通常运行的查询类型、您当前如何唯一标识行以及该表的数据更改/添加的性质），我们可能会提供更多信息详细的建议。

# oracle - 在 Oracle 中更改 TIMESTAMP WITH TIMEZONE 的时区组件

> ID：11106703
> 
> 赞同：5
> 
> 时间：2012-06-19T18:03:40.280
> 
> 标签：oracle, timezone, timestamp, ddl, timestamp-with-timezone

我有一些数据存储`TIMESTAMP(6) WITH TIMEZONE`在 Oracle 的列中，但它存储在错误的时区。按照惯例，数据库中的所有时间戳都必须以 UTC 格式存储，但该数据被错误地保存为 EDT。实际值等同于正确的 UTC 值；问题只是它被存储为何`19-JUN-12 12.20.42.000000000 PM AMERICA/NEW_YORK`时而不是它应该是`19-JUN-12 16.20.42.000000000 PM UTC`。甲骨文有*什么*办法可以改变这种情况吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T18:08:27.283

您真的需要更改存储在数据库中的数据吗？通常，只需转换为不同的时区进行显示就足够了，即

```
SELECT <<your_timestamp_column>> AT TIME ZONE 'UTC'
  FROM <<your table>> 
```

当然，如果你愿意，你也可以

```
UPDATE <<your table>>
   SET <<your timestamp column>> = <<your timestamp column>> AT TIME ZONE 'UTC' 
```

更改所有数据。

# visual-studio-2010 - 在 Visual Studio 2010 中查看框架类型的 MSDN 文档

> ID：11106716
> 
> 赞同：1
> 
> 时间：2012-06-19T18:04:30.710
> 
> 标签：visual-studio-2010

在 Visual Studio 2010 中是否可以在我的代码中右键单击诸如 System.Web.UI.Page 之类的框架类并能够单击以查看该类的文档？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T19:00:28.663

选择框架类并点击`F1`，它将打开 MSDN。

# windows - windows api 程序中的错误：无法从 'LRESULT (__stdcall *)(HWND,UINT,LPARAM,WPARAM) 转换为 WNDPROC

> ID：11106717
> 
> 赞同：1
> 
> 时间：2012-06-19T18:04:32.103
> 
> 标签：windows, winapi

我制作了一个简单的 windows api 程序，具有 WinMain() 和 WinProc() 函数，但我收到了这个错误：

```
 error C2440: '=' : cannot convert from 'LRESULT (__stdcall *)(HWND,UINT,LPARAM,WPARAM)'    to 'WNDPROC'
 1> This conversion requires a reinterpret_cast, a C-style cast or function-style cast

  #include<windows.h>

 LRESULT CALLBACK WindowProc(HWND hWnd, UINT message, LPARAM lParam, WPARAM wParam);

 int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
 {
  WNDCLASSEX WindowClass;

  static LPCTSTR szAppName = L"OFWin";
  HWND hWnd;
  MSG msg;

  WindowClass.cbSize = sizeof(WNDCLASSEX);

  WindowClass.style = CS_HREDRAW | CS_VREDRAW;
  WindowClass.lpfnWndProc = WindowProc;               // error
          ....
  }

  LRESULT CALLBACK WindowProc(HWND hWnd, UINT message, LPARAM lParam, WPARAM wParam)
  { ..... } 
```

该程序从我的书中逐字逐句（ivor horton's beginning visual c++ 2010），有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T20:29:06.517

```
LRESULT CALLBACK WindowProc(HWND hWnd, UINT message, LPARAM lParam, WPARAM wParam); 
```

这是你的问题：LPARAM 和 WPARAM 是倒退的，应该是：

```
LRESULT CALLBACK WindowProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam); 
```

WPARAM 和 LPARAM 有两种不同的类型（分别是 UINT_PTR 和 INT_PTR - 主要是出于历史原因），所以如果你不小心交换它们，你会得到一个与类型相关的错误。在您的情况下这是一件幸运的事情：如果它们是相同的类型，那么代码不会出现编译器错误，而是可以正常编译，而您会花一些时间想知道为什么您的 wndproc 显然会混淆传递给的参数它！

# c++ - Spirit Lex：哪个令牌定义生成了这个令牌？

> ID：11106718
> 
> 赞同：3
> 
> 时间：2012-06-19T18:04:31.810
> 
> 标签：c++, boost, boost-spirit, boost-spirit-lex

抱歉，如果这是一个新手问题，但我需要知道哪个令牌定义产生了某个令牌。当我打印令牌 ID 时，我只得到一个整数。我需要知道哪个正则表达式生成了这个令牌。

**编辑：**

这是我定义我的令牌的方式：

```
 template <typename LexerT>
   class Tokens: public lex::lexer<LexerT>
   {
      public:
         Tokens(const std::string& input):
            lineNo_(1)
         {
            using boost::spirit::lex::_start;
            using boost::spirit::lex::_end;
            using boost::spirit::lex::_pass;
            using boost::phoenix::ref;
            using boost::phoenix::construct;

            // macros
            this->self.add_pattern
               ("EXP",     "(e|E)(\\+|-)?\\d+")
               ("SUFFIX",  "[yzafpnumkKMGTPEZY]")
               ("INTEGER", "-?\\d+")
               ("FLOAT",    "-?(((\\d+)|(\\d*\\.\\d+)|(\\d+\\.\\d*))({EXP}|{SUFFIX})?)")
               ("SYMBOL",  "[a-zA-Z_?@](\\w|\\?|@)*")
               ("STRING",  "\\\"([^\\\"]|\\\\\\\")*\\\"");

            // whitespaces and comments
            whitespaces_ = "\\s+";
            comments_    = "(;[^\\n]*\\n)|(\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\/)";

            // literals
            integer_ = "{INTEGER}";
            float_   = "{FLOAT}";
            symbol_  = "{SYMBOL}";
            string_  = "{STRING}";

            // operators
            quote_         = "'";
            backquote_     = '`';

            // ... other tokens

            // whitespace and comment rules
            this->self += whitespaces_ [ref(lineNo_) += count(_start, _end, '\n'), _pass = lex::pass_flags::pass_ignore];
            this->self += comments_    [ref(lineNo_) += count(_start, _end, '\n'), _pass = lex::pass_flags::pass_ignore];

            // literal rules
            this->self += integer_ | float_ | string_ | symbol_;
            // this->self += ... other tokens
         }

         ~Tokens() {}

         size_t lineNo() { return lineNo_; }

      private:
         // ignored tokens
         lex::token_def<lex::omit> whitespaces_, comments_;

         // literal tokens
         lex::token_def<int>          integer_;
         lex::token_def<std::string>  float_, symbol_, string_;

         // operator tokens
         lex::token_def<> quote_, backquote_;
         // ... other token definitions of type lex::token_def<>

         // current line number
         size_t lineNo_;
   }; 
```

谢谢， 海瑟姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T21:11:43.950

从文档[http://www.boost.org/doc/libs/1_49_0/libs/spirit/doc/html/spirit/lex/tutorials/lexer_quickstart2.html](http://www.boost.org/doc/libs/1_49_0/libs/spirit/doc/html/spirit/lex/tutorials/lexer_quickstart2.html)：

> 为了确保为每个标记分配一个 id，Spirit.Lex 库在内部为标记定义分配唯一编号，从定义的常量开始`boost::spirit::lex::min_token_id`

因此，您实际上可以获得增量分配的令牌 ID。*但是*，为了让事情变得更友好/更健壮，我建议创建一个辅助函数来确定令牌的名称，这样您就可以执行以下操作：

```
while (iter != end && token_is_valid(*iter))
{
    std::cout << "Token: " << 
       (iter->id() - lex::min_token_id) << ": " << 
       toklexer.nameof(iter) << " ('" << iter->value() << "')\n";
    ++iter;
}
if (iter == end) { std::cout << "lineNo: " << toklexer.lineNo() << "\n"; } 
```

其中，对于像这样的输入：

```
const std::string str = "symbol \"string\" \n"
    "this /* is a comment */\n"
    "31415926E-7 123"; 
```

将打印：

```
Token: 5: symbol_ ('symbol')
Token: 4: string_ ('"string"')
Token: 5: symbol_ ('this')
Token: 3: float_ ('31415926E-7')
Token: 2: integer_ ('123')
lineNo: 3 
```

**笔记**

*   我认为不可能识别到模式表达式，因为一旦词法分析器返回令牌，信息就不会暴露并且不再可用
*   我想我记得看到带有调试信息的令牌（类似于`qi::rule<>::name()`？），但我目前找不到它的文档。如果您可以重用调试名称，该`Tokens::nameof(It)`功能的实现将大大简化。

## 代码

完整的演示代码（略微适应 Boost 1_49-1_57, GCC -std=c++0x）：

**`[Live On Coliru](http://coliru.stacked-crooked.com/a/16b842b1468ac715)`**

```
#define BOOST_RESULT_OF_USE_DECLTYPE
#define BOOST_SPIRIT_USE_PHOENIX_V3
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/spirit/include/lex_lexertl.hpp>
#include <boost/phoenix/function/adapt_callable.hpp>

namespace qi  = boost::spirit::qi;
namespace lex = boost::spirit::lex;
namespace phx = boost::phoenix;

///////////////////////////////////////////////////////////////////////////
// irrelevant for question: needed this locally to make it work with my boost
// version
namespace detail {
    struct count {
        template<class It1, class It2, class T> struct result { typedef ptrdiff_t type; };
        template<class It1, class It2, class T>
            typename result<It1, It2, T>::type operator()(It1 f, It2 l, T const& x) const {
                return std::count(f, l, x);
            }
    };
}

BOOST_PHOENIX_ADAPT_CALLABLE(count, detail::count, 3);
///////////////////////////////////////////////////////////////////////////

template <typename LexerT>
   class Tokens: public lex::lexer<LexerT>
   {

      public:
         Tokens():
            lineNo_(1)
         {
            using lex::_start;
            using lex::_end;
            using lex::_pass;
            using phx::ref;

            // macros
            this->self.add_pattern
               ("EXP",     "(e|E)(\\+|-)?\\d+")
               ("SUFFIX",  "[yzafpnumkKMGTPEZY]")
               ("INTEGER", "-?\\d+")
               ("FLOAT",    "-?(((\\d+)|(\\d*\\.\\d+)|(\\d+\\.\\d*))({EXP}|{SUFFIX})?)")
               ("SYMBOL",  "[a-zA-Z_?@](\\w|\\?|@)*")
               ("STRING",  "\\\"([^\\\"]|\\\\\\\")*\\\"");

            // whitespaces and comments
            whitespaces_ = "\\s+";
            comments_    = "(;[^\\n]*\\n)|(\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\/)";

            // literals
            integer_ = "{INTEGER}";
            float_   = "{FLOAT}";
            symbol_  = "{SYMBOL}";
            string_  = "{STRING}";

            // operators
            quote_         = "'";
            backquote_     = '`';

            // ... other tokens

            // whitespace and comment rules
            //this->self.add(whitespaces_, 1001)
                          //(comments_,    1002);
            this->self = whitespaces_ [phx::ref(lineNo_) += count(_start, _end, '\n'), _pass = lex::pass_flags::pass_ignore]
                       | comments_    [phx::ref(lineNo_) += count(_start, _end, '\n'), _pass = lex::pass_flags::pass_ignore];

            // literal rules
            this->self += integer_ | float_ | string_ | symbol_;
            // this->self += ... other tokens
         }

         template <typename TokIter>
         std::string nameof(TokIter it)
         {
             if (it->id() == whitespaces_.id()) return "whitespaces_";
             if (it->id() == comments_.id())    return "comments_";
             if (it->id() == integer_.id())     return "integer_";
             if (it->id() == float_.id())       return "float_";
             if (it->id() == symbol_.id())      return "symbol_";
             if (it->id() == string_.id())      return "string_";

             if (it->id() == quote_.id())       return "quote_";
             if (it->id() == backquote_.id())   return "backquote_";
             return "other";
         }

         ~Tokens() {}

         size_t lineNo() { return lineNo_; }

      private:
         // ignored tokens
         lex::token_def</*lex::omit*/> whitespaces_, comments_;

         // literal tokens
         lex::token_def<int>          integer_;
         lex::token_def<std::string>  float_, symbol_, string_;

         // operator tokens
         lex::token_def<> quote_, backquote_;
         // ... other token definitions of type lex::token_def<>

         // current line number
         size_t lineNo_;
   };

int main()
{
    const std::string str = "symbol \"string\" \n"
        "this /* is a comment */\n"
        "31415926E-7 123";

    typedef lex::lexertl::token<char const*> token_type;
    typedef lex::lexertl::actor_lexer<token_type> lexer_type;

    Tokens<lexer_type> toklexer;

    char const* first = str.c_str();
    char const* last = &first[str.size()];

    lexer_type::iterator_type iter = toklexer.begin(first, last);
    lexer_type::iterator_type end = toklexer.end();

    while (iter != end && token_is_valid(*iter))
    {
        std::cout << "Token: " << 
           (iter->id() - lex::min_token_id) << ": " << 
           toklexer.nameof(iter) << " ('" << iter->value() << "')\n";
        ++iter;
    }

    if (iter == end) { std::cout << "lineNo: " << toklexer.lineNo() << "\n"; }
    else {
        std::string rest(first, last);
        std::cout << "Lexical analysis failed\n" << "stopped at: \""
            << rest << "\"\n";
    }
    return 0;
} 
```

# php - 一个 mysql_query() 查询中的 PHP 多个 MYSQL 命令

> ID：11106719
> 
> 赞同：2
> 
> 时间：2012-06-19T18:04:32.893
> 
> 标签：php, mysql, command

我想用一个 mysql_query 函数发出多个 mysql 命令。这是我的代码：

```
$query .= "INSERT INTO `users` VALUES(1,'stack','overflow');";
$query .= "INSERT INTO `posts` VALUES('other','stack','overflow');";
mysql_query($query); 
```

如果我这样做，我会收到一条警告，说我的语法不正确。如果我回显输出，复制它并在 phpMyAdmin 中执行它就可以了。

那里的错误在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:09:04.810

```
$query = "INSERT INTO `users` VALUES (1,'stack','overflow'), ('other','stack','overflow');";
mysql_query($query); 
```

PHP 不支持通过 一次发送多个查询`mysql_query`，但您可以使用上述方法在单个查询中实现结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T18:10:25.607

我想你需要这个？？[http://us2.php.net/manual/en/mysqli.multi-query.php](http://us2.php.net/manual/en/mysqli.multi-query.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T18:09:03.623

根据[http://www.php.net/manual/en/function.mysql-query](http://www.php.net/manual/en/function.mysql-query) mysql_query() 向与指定链接标识符关联的服务器上当前活动的数据库发送一个唯一查询（不支持多个查询）。

但是这个家伙说你只需要将标志 65536 作为 mysql_connect 的 5 参数传递 [http://www.php.net/manual/en/function.mysql-query.php#91669](http://www.php.net/manual/en/function.mysql-query.php#91669)

# c++ - 您如何在类声明之外定义嵌套模板类的方法？

> ID：11106725
> 
> 赞同：1
> 
> 时间：2012-06-19T18:05:14.073
> 
> 标签：c++, templates

如何在`func`下面的类声明之外定义`class A{...};`？

```
template<typename T>
class A
{
    template<typename Q>
    class B
    {
        static void func(const A<T>& a){} // How do I define this function outside of the class declaration?
    };
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:07:00.550

使用双模板：

```
template<typename T>
template<typename Q>
void A<T>::B<Q>::func(const A<T>& a)
{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T18:07:27.040

这很简单：

```
template<typename T>
template<typename Q>
void A<T>::B<Q>::func(const A<T>& a) { } 
```

基本上，它与在类模板声明之外定义模板化类方法的技术相同。例如：

```
template<typename T>
class test
{
    template<typename U>
    void func(const U& u);
}; 
```

`func`您可以像这样在类之外定义：

```
template<typename T>
template<typename U>
void test<T>::func(const U& u) { } 
```

# c# - 充气城堡错误：无法将 RsaPrivateCrtKeyParameters 类型的对象转换为 ElGamalKeyParameters 类型

> ID：11106726
> 
> 赞同：3
> 
> 时间：2012-06-19T18:05:18.560
> 
> 标签：c#, bouncycastle, public-key-encryption, elgamal

我在使用 Bouncy Castle 解密 GPG 文件时遇到困难。我有加密的文件，我有一个私钥和私钥的密码。我可以使用桌面软件 GPG4win Kleopatra 成功解密文件，因此我拥有正确的私钥并且 gpg 文件有效。

但是，当我们的应用程序到达尝试使用 Bouncy Castle 解密数据的代码行时，我收到此错误：

```
Unable to cast object of type 'Org.BouncyCastle.Crypto.Parameters.RsaPrivateCrtKeyParameters' to type 'Org.BouncyCastle.Crypto.Parameters.ElGamalKeyParameters'. 
```

我正在使用与 Kleopatra 相同的私钥解密同一个文件，所以这必须是我可以通过将私钥文件更改为预期格式或在 Bouncy Castle 中设置一些选项来解决的问题。

私钥文件是一个以以下行开头的纯文本文件：

```
-----BEGIN PGP PRIVATE KEY BLOCK-----
Version: GnuPG v2.0.17 (MingW32) 
```

这是解密代码的扁平化版本。抱歉，如果我错过了什么：

```
PgpEncryptionKeys encryptionKeys = new PgpEncryptionKeys(publicKey, privateKey, passPhrase);

Stream encryptedStream = new StreamReader(encryptedFileName).BaseStream;
Stream encodedFile = PgpUtilities.GetDecoderStream(inputStream);

PgpObjectFactory factory = new PgpObjectFactory(encodedFile);
PgpObject pgpObject = factory.NextPgpObject();

PgpEncryptedDataList encryptedDataList;
if (pgpObject is PgpEncryptedDataList)
{
    encryptedDataList = (PgpEncryptedDataList)pgpObject;
}
else
{
    encryptedDataList = (PgpEncryptedDataList)factory.NextPgpObject();
}

PgpPublicKeyEncryptedData myEncryptedData = null;
PgpPublicKeyEncryptedData publicKeyED = null;
foreach (PgpPublicKeyEncryptedData encryptedData in encryptedDataList.GetEncryptedDataObjects())
{
    if (encryptedData != null)
    {
        myEncryptedData = encryptedData;
        break;
    }
}

Stream clearStream = myEncryptedData.GetDataStream(privateKey);
PgpObjectFactory clearFactory = new PgpObjectFactory(clearStream);

PgpObject message = clearFactory.NextPgpObject();
if (message is PgpCompressedData)
{
    message = ProcessCompressedMessage(message);
    PgpLiteralData literalData = (PgpLiteralData)message;
    using (Stream outputFile = File.Create(outputFilePath))
    {
        using (Stream literalDataStream = literalData.GetInputStream())
        {
            Streams.PipeAll(literalDataStream, outputFile);
        }
    }
} 
```

异常发生在这一行：

```
Stream clearStream = myEncryptedData.GetDataStream(privateKey); 
```

我希望你能给我一些建议让我尝试。我可以提供我可能错过的任何进一步的细节。

谢谢！

# networking - Zigbee 信标与非信标

> ID：11106730
> 
> 赞同：0
> 
> 时间：2012-06-19T18:05:28.300
> 
> 标签：networking, embedded-linux, zigbee

当使用非信标 Zigbee 网络时，我知道 802.15.4 规范定义了使用 CSMA-CA 来控制两个设备何时访问一个通道，以确保没有两个节点“互相踩脚”。我的理解很简单，它要求每个节点“先听后说”。那是对的吗？是否有更多关于 Zigbee 实施的信息？换句话说，我在哪里可以了解更多关于如何对 Zigbee 芯片进行编程以实现相同功能的信息？

另外，如果我有 20 个端节点向一个协调器异步发送数据，通道访问机制是否足以确保它们不会同时广播并淹没协调器？如果五个节点（例如）尝试同时广播，如何保证互斥？我在哪里可以得到这方面的一些细节？

谢谢瑞诗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:48:11.647

802.15.4 数据包的最大大小为 1024 位有效负载。因此，当您考虑前导码等时，帧的最大持续时间（在 2.4GHz 频段上以标准 250kbps 速率运行）约为 5ms。如果您的终端设备以每秒 1 次轮询的速度进行轮询，我认为它应该可以轻松管理 20 个终端节点。如果它变得太多，指数退避应该会降低碰撞率。

我确定您在搜索时已经看到了这些，但以防万一：

*   [http://www.prismmodelchecker.org/casestudies/zigbee.php](http://www.prismmodelchecker.org/casestudies/zigbee.php)
*   [http://www.dagstuhl.de/Materials/Files/07/07101/07101.FruthMatthias.Slides.pdf](http://www.dagstuhl.de/Materials/Files/07/07101/07101.FruthMatthias.Slides.pdf)
*   [http://www-public.it-sudparis.eu/~gauthier/Tools/802_15_4_MAC_PHY_Usage.pdf](http://www-public.it-sudparis.eu/~gauthier/Tools/802_15_4_MAC_PHY_Usage.pdf)

# sql - SQLite 中规范化的重要性

> ID：11106732
> 
> 赞同：3
> 
> 时间：2012-06-19T18:05:31.873
> 
> 标签：sql, sqlite, normalization, olap, denormalization

我开发了一个使用 SQLite 进行数据存储的黑莓应用程序（分类帐管理系统）。

我在我的应用程序中创建的表之间有几种关系

以下是一些表格及其列：

```
1\. Customer Details-Name,Phone,Email
2\. Bills-Name,Amount
3\. Update Customer-Name
4\. Update Bills-ID 
```

和许多其他临时表。

当我开发这个应用程序时，我从来没有真正费心查看我的表格是否被规范化。

现在在我完成我的应用程序之后，我想知道是否需要标准化。

我的大部分查询都是基于选择插入到客户和账单表单中的记录，然后对其进行操作。

例如，我有一个捕获所有客户数据的客户详细信息表。现在，一旦数据库中记录了一个名称，我不希望表中再次出现相同的名称，因此这需要规范化概念。

同样在像 SQLite 这样的 RDBMS 中，规范化是必不可少的。它是否与基于 DBMS 的表具有相同的含义。

在数据库规范化方面，OLAP 和 OLTP 系统之间也有任何区别。如果是，我的黑莓应用程序将归类到什么类别？

如果有人对此表示赞赏，请提供指导。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T18:33:52.977

[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)是指关系数据库。SQLite 是像 Oracle、MySQL 或 Postgress 之类的[RDBMS](http://en.wikipedia.org/wiki/RDBMS)（我认为这就是您所说的基于 DBMS 的表的意思），所以是的，规范化适用于存储在 SQLite 中的数据库。当然，您可以像键值存储一样使用 SQLite，但这似乎不是您的情况。

数据库规范化非常重要，但如果您仔细设计表，您通常会在[3FN](http://en.wikipedia.org/wiki/Third_normal_form)中得到一个数据库，即使没有尝试。追求更高的 FN 可能对您的应用程序来说不是必需的。

OLAP 数据库通常出于效率原因保存非规范化数据。除非您遭受性能问题并且您知道自己在做什么，否则最好不要尝试这样做，特别是在小型应用程序中。

似乎您正在使用一个人的名字作为键。为每个人分配一个数字标识符并使​​用它可能会更好，但这在您的应用程序中可能没有问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T20:23:20.467

如果您想避免在客户表中插入重复行的问题，则需要进行规范化。到什么程度取决于你。您可以通过阅读[规范化](http://en.wikipedia.org/wiki/Database_normalization)是什么以及为什么使用它来学习一些好东西。

您不希望在数据库中出现[数据冗余](http://en.wikipedia.org/wiki/Data_redundancy)（除非出于效率考虑而计划）。冗余会导致不一致，你想要的是数据一致性。在您的情况下，您似乎有一个非常小的数据库，因此您不需要任何冗余。

这是我将如何做的一个例子。

```
Customer:   custId(PK), custName,
Bills:      billId(PK), custId(FK), amount, timesStamp
CustPhone:  custId(PK)FK), type(PK), number
CustMail:   custId(PK)(FK), type(PK), mail 
```

例如，要从客户那里获取所有账单，它看起来像这样。

```
SELECT Customer.custId, Bills.billId, Bills.amount, Bills.timeStamp Customer.custName
FROM Bills
JOIN Customer
ON Customer.custId = Bills.custId; 
```

这将为您提供与唯一客户相关联的唯一账单，客户的姓名无关紧要，因为现在的主键是 ID 而不是名称。

我建议你阅读规范化，因为如果你不理解它的基本概念，它真的很难使用。

# sql-server-2012 - 如何在 DQS 中配置参照完整性类型规则？

> ID：11106733
> 
> 赞同：1
> 
> 时间：2012-06-19T18:05:37.223
> 
> 标签：sql-server-2012, data-quality-services

我有一个场景，我需要使用另一个域中的值来验证一个域。规则是：域 1 中的每个值都必须存在于域 2 中。第二个域中的唯一值列表将在 5000 万左右。如何在 DQS 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T23:50:55.440

您认为此 DQS 版本不直接支持引用完整性方案是正确的。但是，通过使用现有技术的组合，您可以获得此功能。我将在下面列出它们。此外，您可能想看看我在 DQS 上完成的一些短截屏视频 -[在这里](http://www.youtube.com/playlist?list=PL41EB59B228FECB9B&feature=plcp)。

模拟参照完整性： 1) 从 KB 中的每个源字段创建一个域 2) 从这些源字段创建一个复合域 3) 为您的 KB 中的复合域创建一个匹配规则，其中第一个源表中的值是'pivot' 记录被设置为先决条件 - 更多细节[在这里](http://msdn.microsoft.com/en-us/library/hh270290.aspx#Starting)和[这里](http://msdn.microsoft.com/en-us/library/hh270290.aspx#MatchingRules)。

![复合规则示例](../Images/03d4abaa2052744e634b1def3c40e570.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:53:02.653

交叉表检查似乎是许多数据分析工具中缺少的功能。我能看到的唯一方法是在某个地方创建一个带有左连接的视图。通常，这意味着将您想要分析的数据恢复到您自己的环境中（如果您能满足自己的延迟要求，这不是坏事）并创建视图来定义您希望测试的表之间的关系。

检查引用完整性似乎是数据分析中显而易见的第一步，但在网络上搜索它似乎并不是一个热门问题。我错过了什么吗？

# f# - f# 从函数返回部分函数

> ID：11106737
> 
> 赞同：3
> 
> 时间：2012-06-19T18:05:43.727
> 
> 标签：f#

虽然将部分函数传递给另一个函数很简单，但如何从函数返回不同签名的部分函数？

这是我正在尝试的基本代码，然后是各种尝试使其工作：

```
type InitData() =
    static member arrayIntAsc count = [|1..count|] 
    static member seqIntAsc count = {1..count}
    static member listIntAsc count = [1..count]
    (*more diverse signatures*)

module x =
    let getInitDataFun (initData:string) =
        match initData.ToLower() with
        | "arrayintasc" -> InitData.arrayIntAsc
        | "seqintasc" -> InitData.seqIntAsc
        | "listintasc" -> InitData.listIntAsc
        (*more diverse signatures*)
        | _ -> failwithf "InitData function %s not recognized" initData 
```

1.  尝试以各种方式强制使用通用返回签名，但 F# 3.0 总是将 getInitDataFun 返回签名强制为第一个匹配的签名：

    ```
    let getInitDataFun (initData:string) : 'a -> 'b  = ...
    let getInitDataFun (initData:string) : _ -> _  = ...
    let getInitDataFun (initData:string) : int -> #(int seq)  = ...
    let getInitDataFun (initData:string) : int -> #('a seq)  = ...
    (*even if I could get (int -> #(int seq)) to work, I would like to return
      signatures not in this pattern too*) 
    ```

2.  试过的盒子/拆箱：

    ```
    | "arrayintasc" -> box InitData.arrayIntAsc 
    ```

    这会编译，但拆箱尝试会引发运行时错误：

    > 未处理的异常：System.InvalidCastException：无法将类型的对象`'RangeInt32@4819-2'`转换为类型`'System.Collections.Generic.IEnumerable`1[System.Object]'`

3.  尝试将部分函数作为引号返回，但有类似的问题。如果我返回键入的引号，则返回不同的 Expr 签名时会遇到同样的问题。我可以返回无类型的引用，但是我必须在调用方知道返回的无类型表达式的签名。

4.  考虑反射，但基本上是相同的问题，需要在调用时知道实际签名。

5.  也尝试过以各种方式向上转换部分函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:29:44.627

您最好的选择是将静态成员更改为全部返回相同的类型：

```
type InitData() =
    static member arrayIntAsc count = seq [|1..count|] 
    static member seqIntAsc count = {1..count}
    static member listIntAsc count = seq [1..count] 
```

或用执行强制转换的函数包装它们：

```
let getInitDataFun (initData:string) =
    let asSeq f x = f x :> seq<_>
    match initData.ToLower() with
    | "arrayintasc" -> asSeq InitData.arrayIntAsc
    | "seqintasc" -> InitData.seqIntAsc
    | "listintasc" -> asSeq InitData.listIntAsc 
```

你*可以*让它通用：

```
let getInitDataFun<'T when 'T :> seq<int>> (initData:string) : (int -> 'T) =
    match initData.ToLower() with
    | "arrayintasc" -> (box >> unbox) InitData.arrayIntAsc
    | "seqintasc" -> (box >> unbox) InitData.seqIntAsc
    | "listintasc" -> (box >> unbox) InitData.listIntAsc 
```

但如果预期返回类型错误，它会产生运行时异常：

```
let f = getInitDataFun "arrayintasc"
let x : int list = f 10 //BOOM! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:26:59.637

我认为要么这就是你想要的

```
type InitData() = 
    static member arrayIntAsc count = [|1..count|]  
    static member seqIntAsc count = {1..count} 
    static member listIntAsc count = [1..count] 
    (*more diverse signatures*) 

let getInitDataFun (initData:string) : obj = 
    match initData.ToLower() with 
    | "arrayintasc" -> box InitData.arrayIntAsc 
    | "seqintasc" -> box InitData.seqIntAsc 
    | "listintasc" -> box InitData.listIntAsc 
    (*more diverse signatures*) 
    | _ -> failwithf "InitData function %s not recognized" initData 

let a = ((getInitDataFun "arrayintasc") :?> int->int[]) 20
printfn "%A" a 
```

或者我不清楚你在问什么。

# c - 关于存储在c中的“main”函数的信息在哪里，main在哪里定义？

> ID：11106739
> 
> 赞同：1
> 
> 时间：2012-06-19T18:05:48.263
> 
> 标签：c

在c中，main函数在哪里定义，是在编译器中定义还是在头文件中定义，编译器如何知道“main”字的含义？我无法在任何地方得到答案，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:11:52.493

两者都没有定义。`main`实际上不是 C 中的关键字 - 它只是一个常规函数。

标准 C 库包含一个函数，该函数设置初始环境（collects`argc`等`argv`）并调用您的`main`函数。

然后链接器将该函数的位置作为入口点放在目标文件中。

您可以在此处查看`glibc`的入口点：http: [//fossies.org/dox/glibc-2.15/dl-init_8c_source.html](http://fossies.org/dox/glibc-2.15/dl-init_8c_source.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:09:04.713

通常，操作系统定义了一个入口点（在 Unix 上，它通常是`start`函数），由操作系统（特别是加载程序）自动调用。你的 C 编译器提供了一个最小的运行时设置（同样，在 Unix 上，它很可能被称为`crt0.o`），它是一个预编译的目标文件，它设置 C 库内部然后调用你的 main() 函数。所以编译器与它无关；它是 crt0.o 和完成这项工作的操作系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:22:43.970

C 允许两种不同类型的执行环境：*独立*和*托管*。参考 5.1.2/1：

> 定义了两种执行环境：独立和托管。在这两种情况下，程序启动都是在执行环境调用指定的 C 函数时发生的。

然而：

> 这种初始化的方式和时间是未指定的。程序终止将控制权返回给执行环境。

根据 5.1.2.1/1 在独立环境（想想嵌入式系统）中：

> 在独立环境中（C 程序的执行可能在没有操作系统的任何好处的情况下发生），程序启动时调用的函数的名称和类型是实现定义的。

大多数（桌面）通用系统都属于*托管*类别，即有一个主机或操作系统为程序运行提供上下文。在这样的环境中（见 5.1.2.2.1/1）：

> 程序启动时调用的函数名为 main。

`main`不是关键字（即不在 6.4.1 定义的集合中）。将其视为 C 程序在具有主机 (OS) 的系统上运行和运行的绑定合同。因此，供应商有责任允许引导代码查找此特定功能，而程序员有责任提供合适的定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T18:46:38.263

> 在c中定义了main函数，它是在编译器中定义的还是在头文件中定义的

（免责声明：Windows 有色描述）

该函数`main`是 C 标准的一部分，通常是程序的起点，不需要特殊的头文件。“main”这个名字对操作系统来说并没有真正的意义，相反，链接器默认将 main 设置为程序的起点，但这个名字实际上可以是程序中的任何其他函数。

链接器可以选择在程序中指定另一个入口点，它只是程序开始执行的起点，但无论是调用 main、_tmain 还是 WinMain 都无关紧要——从操作系统的角度来看。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T18:10:29.033

当编译器生成应用程序时，代码有两个主要部分：

1.  操作系统粘合代码
2.  程序员编写的应用程序（包括主程序）

运行时生成的应用程序执行 OS 粘合代码，然后调用函数 main。因此，当编译器为应用程序生成代码时，如果找不到函数 main 将无法编译。如果它找到它，那么它就知道它的地址，从而知道如何调用它。

main 并没有什么特别之处（除了编译器会寻找它）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T18:18:09.980

`Call stack`存储计算机程序的活动子程序的信息。由于 Main() 函数已经由编译器定义。因此，它应该存储在类似于调用堆栈的数据结构中。请查看此链接 [http://en.wikipedia。 org/wiki/Call_stack](http://en.wikipedia.org/wiki/Call_stack) 希望这会有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-19T18:08:15.433

函数的含义`main`是语言规范的一部分。
编译器有特殊的代码来处理它。

# javascript - 如何在网页上以交互方式切换 CSS 表以进行测试/学习？

> ID：11106744
> 
> 赞同：3
> 
> 时间：2012-06-19T18:06:12.043
> 
> 标签：javascript, jquery, html, css

我正在寻找可以适应所有切换或选择网页上存在的样式表的不同方法，而无需注释多行代码，因为 CSS 中不允许嵌套注释。

背景：我正在尝试学习不同 css 表的不同效果，并希望交互对非开发人员来说是所见即所得。目前，我唯一[发现](http://www.webmasterworld.com/forum83/4087.htm)的是：

```
<a href="javascript:var%20i=0;if(document.styleSheets.length>0)
{cs=!document.styleSheets[0].disabled;
    for(i=0;i<document.styleSheets.length;i++)
        %20document.styleSheets[i].disabled=cs;};
    void(cs=true);">Toggle stylesheet</a> 
```

我对 HTML、JS、Java、JQuery 或 CSS 实现持开放态度。

*澄清*- 可以使用 JQuery 选择样式表吗？因为如果可以选择它们，这似乎是可能的。

对于那些一直关闭这个帖子的人，给我一些反馈怎么样，这样我就可以满足你的需求，而不是仅仅关闭这个帖子。如果您不知道，当您关闭它时，它会将我发送到常见问题解答页面，而不是您的反馈，我不知道要更改什么。另外，根据我的通知，还有其他人在回答，但是当我回到帖子时，我看不到它，因为它已关闭，并且通知仅包含前几个单词，所以它们不是很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:13:32.747

我会使用[Firefox Web Developer 插件](https://addons.mozilla.org/en-US/firefox/addon/web-developer/)。有一个 CSS 菜单可让您禁用和重新启用单个样式表。我相信这个插件也适用于 Chrome。它还允许您实时编辑 CSS。它为 Web 开发人员提供了许多很棒的工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T18:14:05.710

我使用 Firefox 作为我的“主要”浏览器，绝妙的 Firebug 插件将允许您在这些样式表中切换样式表或特定的 CSS 属性。

[在此处阅读有关 Firebug CSS 处理的更多信息](http://getfirebug.com/css)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T18:17:50.120

[Chrome 开发者工具](https://developers.google.com/chrome-developer-tools/)非常适合切换 CSS 样式，甚至添加样式，同时在页面上实时查看更改。

要使用，请在 Chrome 中打开您的页面，右键单击要检出的页面部分，然后选择“检查元素”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T19:17:32.180

您正在寻找这些方面的东西： [http ://www.cssnewbie.com/simple-jquery-stylesheet-switcher/](http://www.cssnewbie.com/simple-jquery-stylesheet-switcher/)

可以的东西，当点击使用不同的样式表切换`href=""`标签`<link>`时，上面的链接将完全按照提到的那样做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T18:44:22.210

您是否知道大多数现代浏览器都有一个“页面样式”菜单项，可让您从页面作者提供的样式表列表中选择页面的活动样式表？在 Firefox 中是`View > Page Style`. 不确定它在 Chrome 或 IE9 中是什么，但在这些中应该不难找到。

# c - 使线程进入睡眠状态（c pthreads）

> ID：11106757
> 
> 赞同：3
> 
> 时间：2012-06-19T18:06:39.250
> 
> 标签：c, multithreading, pthreads

我正在使用`pthreads`并试图让线程休眠 X 秒。

我试过`sleep()`，，`nanosleep()`（`pthread_cond_timedwait()`等待一个假的互斥锁 X 秒），，`pthread_yield()`每次线程唤醒时检查时间，看看是否该运行，最后只是忙等待 X 秒。

问题是，尽管考虑到结果，所有这些方法都可以正常工作，但它们并没有给出我期望的性能结果。性能以吞吐量（每秒回复）而不是时间来衡量。

在我的配置中，我在 2 个**模拟**物理内核（运行 Ubuntu Server 的 VirtualBox）上运行 3 个软件线程。当让 3 个线程中的 1 个进入睡眠状态时，我希望获得更好的性能，因为其他 2 个线程有一个专用的*物理*内核可以运行。然而，我得到了完全相反的行为（我所有的方法）：增加睡眠时间会降低性能。（注意，*休眠*线程的工作负载为 130-300ms。）

可能是因为虚拟化（主机有 4 个核心）？可能是因为我使用的方法与我使用的方法类似`pthread_yield`吗？

是如何实施`sleep()`的`nanosleep()`？他们使用信号吗？您认为使用信号处理程序的实现`alarm()`会是更好的方法吗？当我打电话时会发生什么`pthread_cond_wait()`？它是如何实施的？

我也尝试过使用`chrt`来更改调度策略，但没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:25:54.603

我同意@Aaron Digulla 的观点，即您永远不会通过反复试验和猜测来回答性能问题。但更重要的是，我不确定你测量的是正确的东西，至少按照你的说法，你的周期性线程之间的睡眠时间越长，你的吞吐量就越差。按照这种逻辑，您可以将睡眠时间设置为无限数（基本上大于您的测量时间），并且您的吞吐量应该是最差的。是这样吗？

请注意，测量服务器吞吐量可能是一项棘手的业务，在测量和客户端设置中存在许多陷阱。这里有一些例子说明你的综合基准数字是多么容易被欺骗： [http ://www.teamquest.com/pdfs/whitepaper/load-test.pdf](http://www.teamquest.com/pdfs/whitepaper/load-test.pdf)

如果您对性能测量感兴趣，请阅读该文章。是纯金。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:56:34.533

1.  通过分析器运行您的代码以查看时间花在了哪里。否则，你只是在猜测，根据我的经验，这些猜测在 90% 的情况下都是错误的。

2.  `alarm()`可能会有所帮助，但它实际上应该做的事情`sleep()`，所以我真的不希望有什么不同。

以下是可能导致此问题的一些想法：

*   缓存刷新。如果您的两个工作线程很好地使用了缓存，那么切换到新线程可能意味着缓存刷新，这可能非常昂贵。这里的想法是，如果睡眠者让它们保持更长的时间，工作线程可以填充更多缓存。

*   两个工作线程需要睡眠者占用/锁定的资源。

*   你如何衡量绩效？也许您测量了其他一些效果（桌面搜索索引您的计算机，无论如何）

要深入了解这一点，您必须逐个功能地减少代码功能，直到所需的行为开始出现 + 在分析器中运行它以检查意外情况。

# z3 - Microsoft Z3：将表达式转换为特定变量

> ID：11106765
> 
> 赞同：1
> 
> 时间：2012-06-19T18:07:30.080
> 
> 标签：z3, solver, smt

我正在使用 Microsoft 的 Z3 对动态观察进行一些简单的分析。作为其中的一部分，如果我可以将一些公式从使用一组变量转换为另一组目标变量，那将会很有帮助。

我对 Z3 真的很陌生，但我知道它有一些内部简化规则和其他转换公式的方法......基本上，我想知道是否可以进行一些转换，例如：

```
(declare-const local Real)
(declare-const x Real)
(declare-const y Real)
(declare-const midstep Real)
(declare-const local_1 Real)
(declare-const foo_ret Real)

(assert (= local (/ x y)))
(assert (= midstep local))
(assert (= local_1 (+ midstep 1.0)))

(assert (= foo_ret local_1) :name toTransform)

; this is what I'd love to do - give Z3 a formula and a target set of variables
(special-simplify (= foo_ret local_1) (foo_ret x y))
; and have Z3 do the appropriate substitutions, etc to spit back 
; a "simplified" version in terms of foo_ret, x, and y, e.g.: 
;    (= foo_ret (+ (/ x y) 1.0)) 
```

我认识到这并不是 Z3 的真正主要目标，但我知道它已经有一些简化/解决的能力......从帮助文本来看，我的印象是有一些方法可以设计目标状态和策略到达他们，但我真的无法根据 Z3 的`(help)`命令找到有关如何做到这一点的信息（除非我遗漏了一些东西......）。

我真的不想做任何复杂的事情——只是简单地替换/消除不在目标集中的符号......我想知道是否有某种方法可以诱使该工具执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:59:29.943

Z3 4.0 支持战术。它们可用于预处理公式并应用多种转换。教程[http://rise4fun.com/z3/tutorial/guide](http://rise4fun.com/z3/tutorial/guide)包含有关此新功能的更多信息。该命令`(help-tactic)`将显示 Z3 中可用的所有战术。

话虽如此，现有的策略都不能完全满足您的要求。我认为最接近的是量词消除策略/命令。在您的示例中，我们可以使用量词消除过程来消除`local`和。当然，这个过程可能非常昂贵，而且它所做的不仅仅是替换变量。这是一个例子。我使用的是 command而不是 tactic 。此外，如您所见，结果不一定采用我们称之为“简化”的格式。我们通过量词消除程序提供的唯一保证是：如果成功，则结果公式等价于输入公式。我们可以用 Z3 来证明由 产生的结果确实等价于公式。`local_1``midsep``elim-quantifiers``qe``elim-quantifiers``(= foo_ret (+ (/ x y) 1.0)))`

[http://rise4fun.com/Z3/jzZF](http://rise4fun.com/Z3/jzZF)

```
(declare-const x Real)
(declare-const y Real)
(declare-const foo_ret Real)

(set-option :pp-max-depth 100)

(elim-quantifiers 
  (exists ((local Real) (midstep Real) (local_1 Real))
    (and (= local (/ x y))
         (= midstep local)
         (= local_1 (+ midstep 1.0))
         (= foo_ret local_1)))) 
```

# maven - Maven Checkstyle：检查不起作用

> ID：11106767
> 
> 赞同：5
> 
> 时间：2012-06-19T18:07:35.870
> 
> 标签：maven, checkstyle

我一直在努力尝试让 Checkstyle 在 Eclipse Indigo IDE 中的 Maven 中工作一段时间。最后，我想我会就此寻求一些专家的建议。

我正在使用 Eclipse Indigo 并尝试将 Checkstyle 配置为在 Maven 中运行。

下面是我的 pom.xml 的片段。只有`checkstyle:checkstyle`在工作和创建报告。

```
 <profile>
        <id>checkstyle-profile</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-checkstyle-plugin</artifactId>
                    <version>2.9.1</version>
                    <configuration>
                        <includeTestSourceDirectory>true</includeTestSourceDirectory>
                        <configLocation>${basedir}/src/main/resources/maven_checks.xml</configLocation>
                    </configuration>
                    <executions>
                        <execution>
                            <id>checkstyle-check</id>
                            <goals>
                                <goal>check</goal>
                            </goals>
                            <phase>compile</phase>  <!--  Default is "verify" -->
                            <configuration>
                                <violationSeverity>error</violationSeverity>
                                <maxAllowedViolations>7000</maxAllowedViolations>
                                <failOnViolation>true</failOnViolation>
                                <failsOnError>true</failsOnError>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>   
            </plugins>
        </build>
    </profile>

</profiles>

<reporting>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-checkstyle-plugin</artifactId>
            <version>2.9.1</version>
            <configuration>
                <configLocation>${basedir}/src/main/resources/maven_checks.xml</configLocation>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jxr-plugin</artifactId>
            <version>2.3</version>
        </plugin>
    </plugins>
</reporting> 
```

**一些不起作用的事情是：**

1.  自定义 checkstlye 的 configLocation 将被忽略，并且始终默认为 Sun checkstlye。
2.  我无法运行`checkstlye:check`。我得到以下错误。我应该运行什么目标才能`checkstyle:check`运行。未能`org.apache.maven.plugins:maven-checkstyle-plugin:2.9.1:check`在项目 zzz-web 上执行目标 (default-cli)：您有 5950 次 Checkstyle 违规
3.  如果违规次数超过 7000，配置设置是否正确导致构建失败？
4.  Checkstyle 报告无法交叉引用报告中的 Java 代码。因此，例如，如果我尝试从包向下钻取到 Java 类，然后单击违规的行号，它不会将我带到 Java 文件。也许我没有正确配置 jxr 插件。

希望快速响应。

提前致谢。瓦玛

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T06:17:40.100

你有定相的`check`目标。在这种情况下，您需要运行才能使用您的配置。运行将使用默认配置。这看起来像是上面第 1 项和第 2 项最可能的情况。`maven checkstyle plugin``compile``mvn compile``mvn checkstyle:check`

即使您要运行`mvn compile`上述配置，仍然会由于两个配置条目`failOnViolation`而导致构建失败，并且`failOnError`它们都设置为`true`. `mvn compile`只要违规次数少于 ，删除这些条目并运行应该会通过构建`7000`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T04:42:21.340

> 1.configLocation 自定义 checkstyle 被忽略，始终默认为 Sun checkstyle。

为此，请使用以下标签：

```
<properties<checkstyle.config.location>properties/checkstyle.xml</checkstyle.config.location>  </properties> 
```

在您使用 checkstyle.this 行将位于 pom.xml 的顶部和下方标记的项目的 POM.xml 中。

```
<version>0.0.1-SNAPSHOT</version> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-24T08:11:53.103

googe_checks.xml 必须位于 pom.xml 所在的项目中。mvn checkstyle:检查

```
<properties>
    <checkstyle.config.location>google_checks.xml</checkstyle.config.location>
    <checkstyle.violationSeverity>warning</checkstyle.violationSeverity>
    <checkstyle.consoleOutput>true</checkstyle.consoleOutput>
</properties>

<build>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-checkstyle-plugin</artifactId>
                <version>3.0.0</version>
                <dependencies>
                    <dependency>
                        <groupId>com.puppycrawl.tools</groupId>
                        <artifactId>checkstyle</artifactId>
                        <version>8.8</version>
                    </dependency>
                </dependencies>
                <executions>
                    <execution>
                        <id>validate</id>
                        <phase>validate</phase>`
                        <properties>
                            <checkstyle.config.location>google_checks.xml</checkstyle.config.location>
                            <checkstyle.violationSeverity>warning</checkstyle.violationSeverity>
                            <checkstyle.consoleOutput>true</checkstyle.consoleOutput>
                        </properties>

                        <build>
                            <pluginManagement>
                                <plugins>
                                    <plugin>
                                        <groupId>org.apache.maven.plugins</groupId>
                                        <artifactId>maven-checkstyle-plugin</artifactId>
                                        <version>3.0.0</version>
                                        <dependencies>
                                            <dependency>
                                                <groupId>com.puppycrawl.tools</groupId>
                                                <artifactId>checkstyle</artifactId>
                                                <version>8.8</version>
                                            </dependency>
                                        </dependencies>
                                        <executions>
                                            <execution>
                                                <id>validate</id>
                                                <phase>validate</phase>
                                                <goals>
                                                    <goal>check</goal>
                                                </goals>
                                            </execution>
                                        </executions>
                                    </plugin>
                                </plugins>
                            </pluginManagement>
                        </build>
                        </project>
                        `
                        <goals>
                            <goal>check</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </pluginManagement>
</build>
</project> 
```

# android - Android Emulator 中的 HTTP 代理适用于浏览器，不适用于 WebView

> ID：11106769
> 
> 赞同：2
> 
> 时间：2012-06-19T18:07:44.600
> 
> 标签：android

我的开发环境落后和 HTTP 代理。在 Android 模拟器中，我可以在 wifi 首选项中设置我的代理地址和凭据。然后，当我在浏览器中查看该页面时，系统会提示我重新输入我指定的主机的凭据。不知道为什么我必须再次输入它们，但它可以工作并且我能够查看该页面。

然后我有一个带有 WebView 的应用程序，它加载相同的页面。该应用程序具有互联网权限：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

并支持平台通知：

```
WebView.enablePlatformNotifications(); 
```

但是...当我尝试查看该页面时，我得到代理的错误页面，说用户名和密码输入不正确。这向我表明该应用程序正在成功读取代理地址，但就像浏览器没有读取凭据一样。然后，它无法在完成请求之前显示与浏览器要求凭据相同的对话框。

有没有办法启用这个对话框（它是内置的？）或手动指定代理详细信息的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T20:35:05.647

翻看android浏览器源码，以下就很清楚了：

1.  WebView 可以访问设置中配置的 HTTP 代理主机名和端口。
2.  WebViews（和应用程序）无权访问设置中配置的 HTTP 代理用户名和密码。
3.  WebView 将代理身份验证请求视为其他 HTTP 身份验证请求，触发`onReceivedHttpAuthRequest`附加`WebViewClient`设置`host`为`"{proxy}:{port}"`并`realm`设置为空字符串。
4.  浏览器使用自己的自定义对话框来处理身份验证请求，并且此对话框不会暴露给其他应用程序。

因此，从 Android 浏览器复制代码和对话框布局的最简单方法：

1.  将[res/layout/http_authentication.xml](https://github.com/android/platform_packages_apps_browser/blob/master/res/layout/http_authentication.xml)复制到您自己的项目中。
2.  复制[src/com/android/browser/HttpAuthenticationDialog.java](https://github.com/android/platform_packages_apps_browser/blob/master/src/com/android/browser/HttpAuthenticationDialog.java)
3.  [从res/values/strings.xml](https://github.com/android/platform_packages_apps_browser/blob/master/res/values/strings.xml)复制相关字符串
4.  创建一个新类，该类实现`WebViewClient`并复制`onReceivedHttpAuthRequest`.[`com.android.browser.Controller`](https://github.com/android/platform_packages_apps_browser/blob/master/src/com/android/browser/Controller.java#L973)
5.  将方法修改为不依赖`mPagesDialogHandler`. `context`是你的活动。

    ```
    HttpAuthenticationDialog dialog = new HttpAuthenticationDialog(context, host, realm);

    dialog.setOkListener(new HttpAuthenticationDialog.OkListener() {
        public void onOk(String host, String realm, String username, String password) {
            handler.proceed(username, password);
        }
    });

    dialog.setCancelListener(new HttpAuthenticationDialog.CancelListener() {
        public void onCancel() {
            handler.cancel();
        }
    });

    dialog.show(); 
    ```

6.  将此新`WebViewClient`功能用于您的 Web 视图。

# java - 锁定应用程序焦点，避免使用任何其他应用程序

> ID：11106770
> 
> 赞同：3
> 
> 时间：2012-06-19T18:07:54.060
> 
> 标签：java, android, kiosk-mode

如何在应用程序首次启动时锁定我的应用程序，避免使用“返回”和“主页”按钮。
只有应用程序才能释放对设备的访问权限，用户被阻止使用他的主页或返回按钮。

有什么办法吗，即使需要一些技巧。

很抱歉破坏了 Android 的自由，但这是客户的特定需求。他不希望他的服务员拿一些安卓游戏开玩笑。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:21:32.487

对于 Back：在您的活动中覆盖 onBackPressed，以便它不会调用 super.onBackPressed()

对于主页按钮，请查看[此堆栈溢出线程](https://stackoverflow.com/questions/2162182/android-is-it-possible-to-disable-the-click-of-home-button)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:29:52.350

幸运的是，没有可靠的方法来做到这一点。在任何给定的 Android 设备上，用户只需在安全模式下重新启动（在启动过程中按住 Home 键）即可禁用所有第 3 方应用程序（即您的应用程序）并运行标准应用程序/卸载第 3 方应用程序。*Android 旨在确保用户始终控制他的设备。*

也许它适用于您的客户需要的任何东西，但只要知道如果用户知道如何就可以轻松绕过它。:)

# php - MYSQL 事件运行但不工作

> ID：11106772
> 
> 赞同：0
> 
> 时间：2012-06-19T18:07:59.363
> 
> 标签：php, mysql, events

我创建了 mysql 来删除 DATETIME 值低于 NOW() 的表行，`SHOW PROCESSLIST`显示事件和时间计数器正在运行，但它不会删除行。这是代码：

```
CREATE EVENT minute_event
    ON SCHEDULE EVERY 1 minute
    DO 
      DELETE FROM reservations WHERE 'reservation_end' < NOW(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:09:51.670

您使用的是单引号而不是反引号。该表达式`'reservation_end' < NOW()`应该会导致[MySQL 错误 #1267](http://dev.mysql.com/doc/refman/5.0/en/error-messages-server.html#error_er_cant_aggregate_2collations)，因为`'reservation_end'`它只是一个字符串。它应该是：

```
DELETE FROM reservations WHERE `reservation_end` < NOW(); 
```

或未引用，因为`reservation_end`不需要特别用反引号包围。

# asp.net-mvc - 使用 ContentManager.Create 从 Orchard CMS 中的服务添加新的 ContentType

> ID：11106779
> 
> 赞同：0
> 
> 时间：2012-06-19T18:08:26.397
> 
> 标签：asp.net-mvc, orchardcms

假设我在 Migrations.cs 中定义了一个 ContentType

```
public int Create(){
ContentDefinitionManager.AlterTypeDefinition("UserWrapper", builder => 
builder
.WithPart(typeof(UserPart).Name)
.WithPart(typeof(CommonPart).Name)
.Creatable();
return 1;
} 
```

然后，我有一个服务，该服务将在一个人“注册”之后从控制器调用（例如用户注册页面），并且此方法“CreateUserWrapper”使用 ContentManager 创建一个新的 UserWrapper（代码如下）：

```
public void CreateUserWrapper(string email){
var userWrapper = orchardServices.ContentManager.New("UserWrapper");
var userPart = userWrapper.As<UserPart>();
userPart.Email = email;
userPart.UserName = email;
userPart.NormalizedUserName = email.ToLowerInvariant();
userPart.Record.HashAlgorithm = "SHA1";
userPart.Record.RegistrationStatus = UserStatus.Approved;
userPart.Record.EmailStatus = UserStatus.Approved;

orchardServices.ContentManager.Create(userWrapper);

} 
```

上面的代码没有添加新用户。当我转到管理仪表板的“用户”部分时，没有新用户。此外，没有添加新的 UserWrapper 内容类型。我哪里出错了，为什么这段代码不回调到 NHibernate 并更新 Db？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:52:30.670

好的，上面的代码有效。事情是这样的，我实际上觉得我的 VS2010 有点错误，所以我重新安装了 SP1，在再次运行这段完全相同的代码后它就可以工作了。您可以完全按照上述方式从 ContentManager.Create 更新 ContentTypes。

# url - 解码 Base64 图像

> ID：11106781
> 
> 赞同：16
> 
> 时间：2012-06-19T18:08:31.690
> 
> 标签：url, base64, decode

我最近在网上找到了一个文件，我确实需要它的原始 url，但它被编码为 Base64。这是一个图像。

URL 以这样的开头：`data:image/png;base64,`然后是大量的数字和字母。

我的问题是，如何将其解码为原始形式？例如，而`mwo1fw#`不是`http://etc`

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-19T18:11:14.870

使用此网络实用程序：

[http://www.motobit.com/util/base64-decoder-encoder.asp](http://www.motobit.com/util/base64-decoder-encoder.asp)

将输出格式设置为二进制，然后复制粘贴后面的base64数据`data:image/png;base64,`；您的浏览器将下载该文件。将其重命名为 PNG 就可以了。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-29T12:31:30.313

保存图像的另一种方法是复制粘贴`data:image/png;base64,`，然后是浏览器 url 字段中的字符..
您会看到图像..
然后您可以将其保存到您的计算机..

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-07T19:57:07.500

试试这个在线 base64 解码/编码工具[http://base64online.org/decode/](http://base64online.org/decode/)

只需将您的 base64 编码图像粘贴到那里，它就会向您显示图像和下载链接。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-01-08T19:17:26.240

**在 Linux 机器**`base64`上，您可以使用此实用程序。只需两步。

*   将 base64 编码的文本保存在一个文件中（比如 image.base64）。base64 编码的文本是之后的一切`data:image/png;base64,`
*   在终端类型上：`base64 -d image.base64 > img.jpg`

而已。`img.jpg`是你的图像文件。通过从文件查看器中双击文件来查看它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T13:50:24.783

你可以在这里解码：http: [//base64decode.net/](http://base64decode.net/)并将响应保存为 .png 文件

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-01T11:21:04.703

作为记录，这是一个快速而肮脏的 Python 3 代码段。

```
import base64

def decode_base64_url(url):
    assert url.startswith('data:image/')
    assert ';base64,' in url
    schema, payload = url.split(',', 1)
    # Maybe parse the schema if you want to know the image's type
    # type = schema.split('/', 1)[-1].split(';', 1)[0]
    return base64.urlsafe_b64decode(payload) 
```

您可能希望从`open(..., 'wb')`将有效负载写入二进制文件的函数中运行它，或者将其传递给可以处理原始图像的东西`bytes`。也许另请参阅[将 base64 中的字符串转换为图像并保存在 Python 中的文件系统上](https://stackoverflow.com/questions/2323128/convert-string-in-base64-to-image-and-save-on-filesystem-in-python)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-26T11:49:29.337

如果您有兼容 Html5 的浏览器并启用了 Javascript，则可以使用[Base 64 Online](http://www.f2ko.de/en/ob64.php "Base64 在线")

确保`data:image/png;base64,`从编码的 base64 图像中删除。然后将字符串粘贴到文本输入区域并单击“解码>下载”并将结果保存为.png

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-02T21:43:39.413

您可以使用这个网站： [https ://ganixo.site](https://ganixo.site)

提交您的代码，他将生成一个链接供您下载解码后的图像。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-12-13T18:50:21.870

如何导出 Salesforce Quote PDF 文件并使用 Linux 命令行将其从 Base64 转换回 PDF

1.  使用 Dataloader 并导出包含所有字段和数据的 QuoteDocument 对象

[数据加载器1](https://i.stack.imgur.com/Iq4rN.jpg)

[数据加载器2](https://i.stack.imgur.com/waigg.jpg)

[dataloader3](https://i.stack.imgur.com/IS34e.jpg)   2\. 使用文本编辑器 TextPad 打开 csv 文件。不要使用记事本，因为它无法处理大尺寸数据并截断它。3\. TextPad 可以处理大数据并尊重任何换行符等，当您打开文件以及复制/粘贴数据时。4\. 转到数据中的特定行，选择并复制包含 PDF Base64 编码数据的单元格字段字符串。确保您一直选择它 - 但不要在其后包含后续字段。

[文本板1](https://i.stack.imgur.com/mhvCD.jpg)

5.  不要在其后包含后续字段。
6.  选择最多但不包括引号 " 符号的字符串。

[文本板2](https://i.stack.imgur.com/AvxLQ.jpg)

7.  将字符串复制/粘贴到新的 TextPad 窗口中。
8.  将新的 TextPad 保存到文件中，例如 document1.txt
9.  将 docuemnt1.txt 文件复制到您的 Linux 计算机（您可以使用 Dropbox）。
10.  打开 Linux 命令行终端窗口
11.  运行 base64 解码命令（base64 是 coreutils 包的一部分）， $ base64 --decode ~/Dropbox/linux_stuff/Document1.txt > ~/Dropbox/linux_stuff/decoded1.pdf
12.  该命令将读取 Document1.txt 文件并将解码后的 PDF 文件输出到 decoded1.pdf。
13.  您现在可以将 decoded1.pdf 文件作为 PDF 文件打开。
14.  您可以将 decoded1.pdf 文件重命名为您想要的任何名称，即，恢复为原始 Salesforce 报价对象记录中附加的原始文件名。

[linux_command_line](https://i.stack.imgur.com/6QKiU.jpg)

# javascript - jQuery iScroll 4 - 将 AJAX 内容加载到滑动面板的问题

> ID：11106782
> 
> 赞同：1
> 
> 时间：2012-06-19T18:08:48.123
> 
> 标签：javascript, jquery

我正在使用一个名为 iScroll 4 ( [iScroll4 Docs](http://cubiq.org/iscroll-4) ) 的 jQuery 插件，它允许我触摸、滑动、捏合和滚动滚动面板。这个滚动面板的内容是通过 AJAX 加载的，包括一个水平的图像列表。

这一切在第一次加载时工作正常，但如果我上传更多图像并让 AJAX 更新面板，iScroll 插件就不再工作了！

这是我的代码......这有效：

```
// the JS ////////////////////////

<script src="js/iscroll-lite.js"></script>
<script>

// start iScroll

var myScroll;
function loaded() {
    setTimeout(function () {
        myScroll = new iScroll('scroll-uploader-photos');
    }, 100);
}
window.addEventListener('load', loaded, false);

// load images to panel for first time

load_previous_uploads(<%=Session("article_id")%>);

// load images function

function load_previous_uploads(article_id) {
    if (article_id != "") {
        var data_str = "article_id="+article_id
        $.ajax({
        type : 'GET',
        data : data_str,
        url : 'ajax/get-uploader-photos.asp',
        dataType : 'html',
        success : function(data) {
            if (data != "") {
                $(".upload_result").html(data);
            }
        }
        });
    }
}
</script>

// the html //////////////////

<div class="upload_result"></div>

// the ajax content from external ASP page (get-uploader-photos.asp)

<div class="scroll-uploader-photos">
    <img><img><img><img><img><img><img><img><img><img><img><img><img>
</div> 
```

如果我现在去上传更多图像，并且成功运行该功能`load_previous_uploads()`，则 iScroll 插件将无法正常工作，因为滑动面板已更新，并且开始困扰我为什么无法修复它。在它停止工作后，我可以简单地刷新页面并使用新图像再次工作。

对于我所拥有的更好的例子：

![在此处输入图像描述](../Images/69bf386070c9e442e5eaaf568ad95241.png)

如果有人可以看到问题所在和/或可以看到修复，请告诉我 - 我将非常感激！

**** 我的尝试 ****

我想通过在上传后 AJAX 更新图像面板后立即调用 iScroll 函数`**loaded()**`，它可能会解决问题......但它没有！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:11:21.853

你试过iScroll的刷新方法吗？

从文档

```
ajax('page.php', onCompletion);

function onCompletion () {
    // Here modify the DOM in any way, eg: by adding LIs to the scroller UL

    setTimeout(function () {
        myScroll.refresh();
    }, 0);
}; 
```

# asp.net-mvc-3 - 带有 enctype = "multipart/form-data" 的 Form Post 导致参数无法传递

> ID：11106784
> 
> 赞同：3
> 
> 时间：2012-06-19T18:08:59.843
> 
> 标签：asp.net-mvc-3, url, razor, parameters

在 ASP.NET MVC 3 (Razor) 项目中，我正在尝试上传图片：视图的相关部分：

```
@using (@Html.BeginForm( new {enctype = "multipart/form-data" }))
{
    <text>Select a file </text>    
    <input type="file" name="file" />     
    <input type="submit" value="Upload" />        
} 
```

明确说明 enctype 参数是“负责”剥离参数部分。例如，如果 URL（打开视图）如下：

```
mydomain/Controller/Action/id?parameter1=somevalue1 
```

上述表格中的 BeginForm 语句将给出（回发）以下内容：

```
mydomain/Controller/Action/id 
```

因此剥离部分： ?parameter1=somevalue1 这是需要的！

我该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:13:41.570

由于您已经将数据发布到服务器，我会将所需的参数信息作为隐藏字段放入表单中。

问“我可以将这个信息集合发送到这个 URL 而不需要填充其他集合吗？”这个问题。

使用 querystring 方法，答案是否定的。我会把它作为一个隐藏的领域。

```
@Html.Hidden("SomeParameter", SomeValue); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:30:47.977

挖掘得更深一点，我发现我可以做到：

```
@using (@Html.BeginForm(new{parameter1= Request["parameter1"]},  new {enctype = "multipart/form-data" }))
{
    <text>Select a file </text>    
    <input type="file" name="file" />     
    <input type="submit" value="Upload" />        
} 
```

注意 Html.BeginForm 与初始的不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-10T17:34:44.897

您可以尝试通过将参数添加到操作示例 document.forms[0].action="photoprocess.asp?="+ 从 java 脚本调用 subit

然后提交

# php - php - 检查地址字符串是否有邮政编码

> ID：11106785
> 
> 赞同：0
> 
> 时间：2012-06-19T18:09:01.437
> 
> 标签：php, regex, zipcode

我正在尝试使用正则表达式来检查完整的地址字符串是否包含邮政编码，有人可以帮我吗？

```
$address = '10100 Trinity Parkway, 5th Floor Stockton, CA 95219';
if (preg_match('--regex_here--',$ad)) {
    echo 'true';
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T18:11:54.317

通常邮政编码遵循两个字母的州代码，因此类似以下的内容应该是相当可靠的：

```
/\b[A-Z]{2}\s+\d{5}(-\d{4})?\b/ 
```

解释：

```
\b         # word boundary
[A-Z]{2}   # two letter state code
\s+        # whitespace
\d{5}      # five digit zip
(-\d{4})?  # optional zip extension
\b         # word boundary 
```

您也可以`\b`将末尾更改为，`$`因为邮政编码通常（总是？）在地址的末尾。

# ruby-on-rails - 如何创建像 Facebook 这样的静态（非刷新）菜单栏？

> ID：11106786
> 
> 赞同：0
> 
> 时间：2012-06-19T18:09:01.683
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3, user-interface

我想知道如何（在rails中）制作一个菜单（或标题）栏，它不会像facebook那样加载到各种页面请求上。您能否简要介绍一下 Facebook 使用了哪些技术以及如何在 rails3 中复制该机制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:07:16.663

该技术称为ajax，您必须使所有链接都作为ajax请求工作并仅更新页面的所需部分...

你可以把你的布局分成两部分

```
<div id='header'>
  your code here...
</div>
<div id='content'>
  yield
</div> 
```

现在您可以在 Rails 上的 link_to 标记上使用 :remote => true 选项，因此请求将是 ajax 请求

那么你必须提供一个 .js 视图来更改 id 为“内容”的 div 的内容以及你的视图代码

您的 .js 应该执行类似...（假设您使用的是 jQuery）

```
$('#content').html('<%= escape_javascript(render(:file => your_file.html.erb)) =>'); 
```

这是基本的想法，你必须玩ajax

我猜 facebook 也使用 HTML5 的 pushstate 来更改位置地址[https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)以便您可以使用浏览器的后退/前进按钮

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:22:25.170

**[PJAX](https://github.com/rails/pjax_rails)**将 html 从您的服务器加载到当前页面，而无需加载整个页面。它是带有真正永久链接、页面标题和完全降级的工作返回按钮的 ajax。

# ssl - 设置 Jmeter 以执行 HTTPS

> ID：11106796
> 
> 赞同：16
> 
> 时间：2012-06-19T18:09:31.637
> 
> 标签：ssl, https, jmeter

我正在使用 jmeter 2.7 进行负载测试。当我们开始使用的 url 是简单的 http。现在我们已经转移到 HTTPS。有人可以告诉我如何在 jmeter 中启用 ssl 吗？我确实浏览了 jmeter 手册并取消了对 SSL 部分的注释（现在所有 SSL 行：（）来自 system.properties，并且还在 Http Request sampler -> Http Request 下将协议更改为 HTTPS，但仍然没有成功。我是迷失在如何在 jmeter 中设置 ssl url 有什么帮助吗？有人可以指向我的链接吗？

更多信息：我正在从我的 mac 运行 jmeter，它具有 Java 版本 1.6。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-25T13:54:50.790

不，您不需要更改任何系统属性。这是适用于的随机 github https 示例：

![在此处输入图像描述](../Images/1034cde3564c08687bf94897bdb47d09.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-25T04:13:35.183

我面临着类似的问题，现在能够使用 HTTPS 成功运行 Jmeter 2.11 版。要运行它，您需要将 HTTP 请求实现更改为 HTTPClient4 并将协议更改为 HTTPS。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-17T06:34:55.767

三 (3) 个步骤：

1）打开命令行：
`openssl s_client -connect hostname:port -showcerts`

使用 BEGIN / END 标记将 2nd+ 证书复制到记事本或文本文件： `Application_CA_Public_Cert.cer`

2) 使用 Java keytool 创建信任库 `keytool -importcert -alias APPLICATION_NAME_CA_PUBLIC_CERT -file Application_CA_Public_Cert.cer -keystore jmeter_truststore.jks -storepass Password01`

3) 更新 Jmeter system.properties 文件（根据 Jmeter 中的注释，所有 ssl 功能都移至此文件）

JMETER_HOME/bin/system.properties {Jmeter 2.13 版}

`https.default.protocol=TLSv1 javax.net.ssl.trustStore=C:/jmeter/apache-jmeter-2.13/jmeter_truststore.jks javax.net.ssl.trustStorePassword=Password01`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-21T00:09:12.510

我在使用 2.11 版并通过将实现更改为 HttpClient4 和协议 [http]: 更改为现在可以工作的每个线程中的 HTTPS 时遇到了完全相同的问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-12T09:54:17.663

我无法让它工作。

```
curl -X GET "https://x.com/PROMOT" -k -H "Authorization: Basic YWRtaW46cGFzcw==" 
```

会工作。

但是带有 https 和 HttpClient3.1/HttpClient4/Java 的 JMeter 2.13 会出错

```
javax.net.ssl.SSLException: Received fatal alert: protocol_version 
```

我的网站只使用了 https。

我做了一个wireshark，https curl似乎利用了TLSV1 JMeter似乎做了SSLv3，但它不起作用。添加此属性，因为它现在可以工作。

添加到 jmeter.propeties 中，现在一切正常！

```
https.default.protocol=TLSv1 
```

或与 jmeter 的争论。

```
 --jmeterproperty https.default.protocol=TLSv1 
```

* * *

附注：https.default.protocol=TLS 存在于 jmeter.properties 中注释，但取消注释仍默认为 SSLv3。必须明确将其更改为 TLSv1。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-12T23:08:16.273

您需要在 [apache path]\bin\system.properties 中配置包含针对 javax.net.ssl.trustStore 的 SSL 证书的密钥库。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-30T11:35:09.867

我有一个类似的问题。我在jmeter 2.9上。当我尝试访问 https（通过将协议设置为 https）时，我不断收到 403。

然后我将实现设置为 HttpClient3.1 并从那里开始工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-30T07:20:06.013

我有一个类似的问题。我在jmeter 3.0上。当我尝试访问 https（通过将协议设置为 https）时，我不断收到 403。

然后我将实现设置为 HttpClient4，然后从它开始完美运行的那一刻起将协议设置为 https。

# ruby-on-rails - 也通过资产管道提供我的视图（.html）文件

> ID：11106799
> 
> 赞同：0
> 
> 时间：2012-06-19T18:09:43.853
> 
> 标签：ruby-on-rails, asset-pipeline

最近我升级到 Rails 3.2 并使用资产管道功能，该功能对我的 javascripts 和 css 工作正常。我从应用程序/资产提供的所有这些文件。

现在我的 html 文件在 public/tpl 中。我还想通过资产 ppelining 包含和服务它们，以便所有 html 文件也作为单个文件提供。

我阅读了很多关于此的内容，发现我可以为此目的使用 JST。我试图将我的 .html 文件重命名为 .jst 文件并将它们放在 app/assets/templates 下。我认为转换它们的 JST 将作为单个文件提供。

但我收到错误消息：语法错误。当我在 application.js 中查找它时，我发现 JST 解析器正在尝试将它们转换为 jst 但无法正确执行。

我的方法是否正确，如果是，那么我应该怎么做，如果不是，最好的方法是什么。任何指针？

谢谢， 安库尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:35:37.583

I would look into using a gem which adds handlers. For example there is [`handlebars_assets`](https://github.com/leshill/handlebars_assets) for handlebars (`.hbs`), [`hogan_assets`](https://github.com/leshill/hogan_assets) for plain mustache templates, [`haml_coffee_assets`](https://github.com/netzpirat/haml_coffee_assets) for haml+coffeescript, and so on.

# objective-c - 类似于 CLRegion 的方形区域

> ID：11106800
> 
> 赞同：3
> 
> 时间：2012-06-19T18:09:45.393
> 
> 标签：objective-c, ios, mapkit, core-location

有没有一种类似于存储圆形 CLRegion 的方式来存储方形位置区域的方法？

目前，在初始化`CLRegion`I 调用时：

```
– initCircularRegionWithCenter:radius:identifier: 
```

这将创建一个圆形的 CLRegion。我希望能够创建一个与此类似但呈方形的区域。我需要存储一个可变大小的方形地图区域，我可以像`CLRegion`方法一样点击测试`– containsCoordinate:`。

我也看过，`MKCoordinateRegion`虽然我不确定它是否适用于我想做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:39:26.047

我不知道存在任何课程。但我认为自己创建一个并不难。

假设正方形与纬线平行对齐，您只需要检查纬度和经度是否在一定范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T18:07:10.423

我最终做了一个类来为我处理这个问题：[cknadler/CKSquareRegion](https://github.com/cknadler/CKSquareRegion)。

[我使用了来自http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)的坐标数学

# ruby - Ruby 项目在什么时候变成了 gem？

> ID：11106801
> 
> 赞同：2
> 
> 时间：2012-06-19T18:09:51.067
> 
> 标签：ruby, rubygems

如果我创建了一个满足 RubyGem 所需结构的 Ruby 项目，包括有效的 gem 规范文件，并将其托管在 Git 存储库中，**但尚未将其构建到`myproject.gem`文件**中，那么严格来说，它是 gem 吗？

毕竟，即使使用了该选项`gem install`，也无法安装它。`--source`

*注意。我意识到 Bundler 能够安装这样的项目。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:10:39.390

根据[RubyGems Guides](http://guides.rubygems.org/what-is-a-gem/)，gem 包含：

*   **代码**

    没有 Ruby 代码就不可能有一个 Ruby 项目。

*   **文档**

    从项目的 README 文件和源代码注释自动生成。

*   **宝石规格**

    项目元数据。

有了这个定义，可以看出Ruby 项目和 gem 之间的*唯一区别是规范。*

其实整个打包过程都是从规范*开始*的：

1.  你喂`gem build`一个`.gemspec`文件
2.  它评估文件，这是有效的 Ruby 代码，并获得一个`Gem::Specification`对象
3.  它将规范中列出的文件添加到存档中
4.  它将编译后的规范添加到第二个存档
5.  它会创建您的`.gem`文件，该文件只不过是这两个档案的容器

当你打开一个`.gem`包裹，你会发现什么？

![打开 gem 包](../Images/442e50f034c93effbc6f172d7a8ac99e.png)

您的项目文件和元数据。是的，基本上就是这样：一个美化的 tarball，包含一大堆项目元数据。

就其本身而言，这实际上与压缩整个项目树并将其下载以供下载，或者使用当前版本标记最新提交并告诉人们从 GitHub 获取存档没有什么不同。

常规软件源包和 gem 之间的*唯一区别是**RubyGems 软件*能够使用包中包含的信息来提供自动包管理、依赖关系解析、从远程存储库安装等等。其他软件包格式也是如此，例如 Red Hat`rpm`和 Debian 的`deb`.

虽然 a`gem`在技术上是软件包本身，但该名词也*非正式*地用于指代可以打包为 a 的整个项目`gem`——具有 gem 规范的项目。它是否已被推送到 RubyGems.org 或任何其他远程 gem 存储库并不重要，因为您仍然可以使用规范来生成`gem`包或提取有关项目的信息。

[例如， Gemnasium](https://gemnasium.com/)是一项解析您的服务`.gemspec`以确定和跟踪您的 gem 的依赖项的服务，它无需生成或下载任何包即可执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T18:13:14.977

我想说一个带有 gemspec 的项目现在是一个 gem。不应该仅仅因为项目不在 ruby​​gems.org 上就排除它被称为 gem。归根结底，rubygems.org 是一个 gems 存储库，您不必使用它。Github 存储库或任何其他存储库可以被视为另一个来源。我也不要求 gem 已被构建到 Gem 文件中。

# ruby - 验证 Ruby 哈希的形状？

> ID：11106805
> 
> 赞同：6
> 
> 时间：2012-06-19T18:10:03.470
> 
> 标签：ruby, mongodb

这个问题的一个更长的替代措辞是：“有哪些 Ruby 库或方法可以测试任意数据结构（散列、数组、整数、浮点数、字符串等）的形状？”

首先，让我举一个简单的例子：

```
hash_1 = {
  k1: 1.0,
  k2: 42,
  k3: {
    k4: "100.00",
    k5: "dollars"
  }
} 
```

接下来，我想验证它——我的意思是与形状/模式/模板进行比较，例如：

```
shape_a = {
  k1: Float,
  k2: Integer,
  k3: Hash
} 
```

或者，也许，更具体的形状：

```
shape_b = {
  k1: Float,
  k2: Integer,
  k3: {
    k4: String,
    k5: String
  }
} 
```

一种可能的 API 可能如下所示：

```
require '_____________'

hash_1.schema = shape_a
hash_1.valid? # => true

hash_1.schema = shape_b
hash_1.valid? # => true 
```

这些只是示例，我对其他方法持开放态度。

大约 3 年前，我写了[schema_hash](http://rubygems.org/gems/schema_hash)来挠痒痒。我计划更新它，但首先我想了解替代方案和更好的方法。

这个问题的动机来自一个 Mongo 用例，但这个问题不一定是 Mongo 特定的。

就像我在顶部提到的那样，我希望看到或构建验证任意数据结构的能力：散列、数组、原语等，在任何嵌套组合中。

### “你不需要 Mongo 的模式，那你为什么在乎呢？”

*   就像我上面提到的，我不仅仅考虑 Mongo 用*例*
*   但是即使在 Mongo 的上下文中，即使您不想*要求*数据结构具有某种形状，根据形状或模式测试数据结构并采取相应的行动仍然很有用。

### “为什么不写自定义验证？”

当我从事以前的项目时，这正是我开始的地方。为嵌套哈希重复编写验证是很痛苦的。我开始思考什么会使它变得更容易，我想出了一个类似于我上面分享的语法。

### 外面有什么？我应该尝试什么？

综上所述，我很好奇其他人在做什么。有没有“黄金之路”？我正在尝试不同的方法，例如嵌入文档和与[Mongoid 关联](http://mongoid.org/en/mongoid/docs/documents.html)的 validates_related ......但是当哈希嵌套超过一个级别或这么深时，这些方法似乎有点矫枉过正。

我四处寻找[Ruby Toolbox 上的 Validation 以](https://www.ruby-toolbox.com/search?utf8=%E2%9C%93&q=validation)进行验证（双关语），但没有找到我想要的东西。当我在那里时，我建议了一个名为“验证”的新类别。

我所要求的内容很可能不太适合“验证”主题领域，而更适合其他领域，例如“数据结构”和“遍历”。如果是这样，请指出我正确的方向。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T18:51:23.740

**编辑：**重读你的问题，我的回答似乎有点过于简单。我将把它留给你，我是否应该删除它，只需通过评论让我知道。

一个非常简单的方法是：

```
class Hash
  def has_shape?(shape)
    all? { |k, v| shape[k] === v }
  end
end 
```

像这样使用：

```
hash_1.has_shape?(shape_a) #=> true
shape_b = { k1: Float, k2: Integer, k3: Integer }
hash_1.has_shape?(shape_b) #=> false 
```

这似乎已经很好地照顾了您描述的第一个版本。将其分解到 lib 中并不难，因此它不会 monkey-patch `Hash`。向该方法添加递归`has_shape?`将处理您更复杂的情况。

**更新：**这是一个带有递归的版本：

```
class Hash
  def has_shape?(shape)
    all? do |k, v|
      Hash === v ? v.has_shape?(shape[k]) : shape[k] === v
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T07:01:41.287

这可能是您正在寻找的：

[https://github.com/JamesBrooks/hash_validator](https://github.com/JamesBrooks/hash_validator)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-14T01:14:19.507

如果您正在使用 Rails 并且只想验证密钥，您可以使用`assert_valid_keys`：

```
{ name: 'Rob', years: '28' }.assert_valid_keys(:name, :age) # => raises "ArgumentError: Unknown key: :years. Valid keys are: :name, :age"
{ name: 'Rob', age: '28' }.assert_valid_keys('name', 'age') # => raises "ArgumentError: Unknown key: :name. Valid keys are: 'name', 'age'"
{ name: 'Rob', age: '28' }.assert_valid_keys(:name, :age)   # => passes, raises nothing 
```

[https://apidock.com/rails/Hash/assert_valid_keys](https://apidock.com/rails/Hash/assert_valid_keys)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-31T19:12:27.457

我写了一个 gem 来验证哈希之类的数据[http://rubygems.org/gems/validates_simple](http://rubygems.org/gems/validates_simple)并且很容易添加验证来检查值是否是类的成员。至于验证嵌套值，如果需要，我将不得不更新 gem 以支持这一点。添加规则很简单

```
 module Validation
    module Rules
      def validates_is_a_member_of(field, class, message='')
         callback = lambda do |data|
           data[field].is_a? Class
         end
         validates(field, callback, message)
      end
    end
  end 
```

之后，您可以执行 validator.validates_is_a_member_of('age', Integer, 'age must be an int') 并执行 validator.validate({'age': 232423})

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-03T17:28:19.227

似乎[Schemacop](https://github.com/sitrox/schemacop)非常适合这种场合。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-28T02:53:03.500

这是对 Michael Kohl 的递归 has_shape 的一个小调整？适用于 shape_a 和 shape_b 的方法（添加了一个测试以检查形状是否具有要递归的子哈希）：

```
 def has_shape?(shape)
    all? do |k, v|
      (Hash === v && Hash === shape[k]) ? v.has_shape?(shape[k]) : shape[k] === v
    end
  end 
```

另外，FWIW 我发现 is_a? 比 === 更具可读性。例如：

```
 def has_shape?(shape)
    all? do |k, v|
      (v.is_a?(Hash) && shape[k].is_a?(Hash)) ? v.has_shape?(shape[k]) : v.is_a?(shape[k])
    end
  end 
```

但是，如果您的形状与 JSON 兼容，那么您可能需要考虑[Ruby JSON Schema Validator](https://github.com/ruby-json-schema/json-schema)。它更重量级和更冗长，但您可以使用它来验证散列以及 JSON，它为您提供更多控制权（例如，必需键、可选键等）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-04T12:46:55.410

这是一个使用表达式列表的版本：

```
class Hash
  def has_shape?(shape)
    all? do |key, value|
      if value.is_a? Hash
        value.has_shape?(shape[key])
      else
        shape[key].all? { |expression| expression.call(value) }
      end
    end
  end
end 
```

用法：

```
shape = {
  type: [
    -> (type) { type.is_a? String },
    -> (type) { !type.blank?  },
    -> (type) { %(text number).include? type }
  ]
}

{ type: "text" }.has_shape? shape # => true 
```

有了这个，您应该能够非常动态地确保哈希的形状。

更新：

使用此版本，您无法检查是否缺少键/值对，因为我们正在询问所有内容？从我们正在调用该方法的哈希中。这结果呢？仅迭代该哈希上存在的键/值。

我已经更新了实现以尊重“目标”哈希进行比较。现在has_shape？方法成功确定丢失的键/值对。

```
class Hash
  def has_shape?(shape)
    shape.all? do |key, _|
      if self[key.to_s].is_a? Hash
        self[key.to_s].has_shape?(shape[key])
      else
        shape[key].all? { |expression| expression.call(self[key.to_s]) }
      end
    end
  end
end 
```

# asp.net - WCF 调试未找到方法

> ID：11106809
> 
> 赞同：1
> 
> 时间：2012-06-19T18:10:14.613
> 
> 标签：asp.net, wcf, web-services, rest

调试 WCF - 对于我的生活，我无法弄清楚为什么我的服务方法返回 http 错误 400。DLL 部署在 IIS 中并且 SVC 指向它 - DLL 中的所有其他服务方法都可用并返回正确的数据。我在 IIS 的进程中附加了调试器，并且能够单步执行所有其他服务方法 - 但由于某种原因，调试器甚至没有捕获对此方法的调用。符号已正确加载。我什至尝试打破所有异常 - 它不想因任何原因在 GetCustomInquiries_POST 中停止，并且该服务仍然可用并在返回时显示 http 错误 400。有任何想法吗？我知道我在某个地方发胖了。

我有以下合同的服务：

```
 [OperationContract]
    [WebInvoke(BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]
    Stream GetCustomInquiries_POST(); 
```

以及以下实现：

```
 public Stream GetCustomInquiries_POST()
    {
        // Returns a list of of business objects
        CustomInquiries customInquiries = WebSupport.DocumentInquiry.GetCustomInquiries();

        // Create an empty list of WCFCustomInquiry, which is a data
        // contract that exposes certain properties of a customInquiry.  
        // This list will be filled with all of the saved inquiries
        List<WCFCustomInquiry> customInquiriesToReturn = new List<WCFCustomInquiry>();

        // For each of the inquiries that were returned.
        foreach (CustomInquiry customInquiry in customInquiries)
        {

            // Create a list of properties exposed via the web service
            List<WCFProperty> savedProperties = new List<WCFProperty>();

            // For each of the properties in the saved inquiry, cast it to a WCFProperty, 
            // which is added to the list of properties exposed to the web service
            foreach (InquiryPropertyValue testProperty in customInquiry.SearchCriteria.Properties.Values)
            {
                WCFProperty savedProperty = new WCFProperty(testProperty.PropertyID, testProperty.Prompt, testProperty.DataType);
                savedProperty.inquirySearchText = testProperty.Value.ToString();
                savedProperty.inquirySearchType = testProperty.SearchType;
                savedProperties.Add(savedProperty);
            }

            // create a new webInquiryCriteria instance, which exposes the listed
            // properties to the web service.
            WCFInquiryCriteria webInquiryCriteria = new WCFInquiryCriteria(customInquiry.TopLevelFolders, customInquiry.DocTypes, customInquiry.SearchCriteria.DocumentTypes, customInquiry.SearchCriteria.TopLevelFolders, savedProperties, "", "", false, null, null);

            // Created an instance of the data-contract, using the members
            // to be exposed from the inquiry
            WCFCustomInquiry customInquiryToReturn = new WCFCustomInquiry(customInquiry.CustomInquiryId, customInquiry.Name, customInquiry.Description, customInquiry.AutoRun, customInquiry.DocTypes, customInquiry.TopLevelFolders, webInquiryCriteria, customInquiry.UserSuppliedProperties);

            // Add that new instance to the list that 
            customInquiriesToReturn.Add(customInquiryToReturn);
        }

        return WebSupport.JSONSerializationHelper.GetJSONStreamToReturn(customInquiriesToReturn);
    } 
```

# java - 这个类读取文件线程安全吗？

> ID：11106821
> 
> 赞同：2
> 
> 时间：2012-06-19T18:11:09.080
> 
> 标签：java

有人可以查看此代码以查看它是否是线程安全的吗？

```
public class FileLinesSorter {   
private CountDownLatch startSignal = new CountDownLatch(1);

/**
 * The lines
 */
private List<String> lines;

/**
 * Read files from the file paths
 * @param filePaths the list of file paths
 * @throws IOException on I/O error
 */
public void readFiles(String[] filePaths) throws IOException {
    lines = new ArrayList<String>();
    for (String filePath : filePaths) {
        File file = new File(filePath);
        if (!file.exists()) {
            // File does not exist. Log it.
            continue;
        }
        List<String> fileLines = readFile(file);
        lines.addAll(fileLines);
    }
    if (!lines.isEmpty()) {
        Collections.sort(lines);
    }
    startSignal.countDown();
}

/**
 * Read a single file
 * @param file  the file
 * @return  the file content
 * @throws IOException  on I/O error
 */
private List<String> readFile(File file) throws IOException {
    List<String> contents = new ArrayList<String>();
    BufferedReader reader = null;
    FileReader fileReader = null;
    try {
        fileReader = new FileReader(file.getAbsolutePath());
        reader = new BufferedReader(fileReader);
        String line = "";
        while ((line = reader.readLine()) != null) {
            if (line.isEmpty()) {
                continue;
            }
            contents.add(line);
        }
    } catch (FileNotFoundException e) {
        throw e;
    } catch (IOException e) {
        throw e;
    } finally {
        if (fileReader != null) {
            fileReader.close();
        }
        if (reader != null) {
            reader.close();
        }
    }
    return contents;
}

public Iterator<String> getIterator() {
    try {
        startSignal.await();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    return lines.iterator();
}

public static void main(String[] args) throws Exception {
    String[] filePaths = {"C:\\Works\\files\\example-1 copy.txt", "C:\\Works\\files\\example-2 copy.txt"};
    FileLinesSorter sorter = new FileLinesSorter();
    sorter.readFiles(filePaths);
    Iterator<String> lines = sorter.getIterator();
    while (lines.hasNext()) {
        System.out.println(lines.next());
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:14:20.793

在我看来，这不是线程安全的。我对线程安全的理解意味着两个线程可以同时调用此类的同一个实例上的方法，并且该类将按预期运行。这对于这个类是不正确的。

考虑一下：

线程 1 调用`readFiles()`导致此行被调用：

```
lines = new ArrayList<String>(); 
```

`readFiles()`现在想象第二个线程也在第一个线程完成之前调用。再次调用此行：

```
lines = new ArrayList<String>(); 
```

您现在已经用第二个变量覆盖了第一个变量。

第一个线程将调用`lines.addAll(fileLines)`它实际上将使用第二个`lines`变量。这可能不是你想要的。

最简单的解决方法是将`synchronized`关键字添加到方法签名中。这当然会减慢它的速度，因为第二个调用将等待第一个调用完成。

您应该`readFiles()`实例化它自己`List`并返回它自己的实例。然后删除私有级别的行变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T18:22:50.553

如上所述，读取的代码本身是线程安全的，但迭代器方法不应该是公共的。

问题是您实现了 Iterable 接口。
我认为这是一个糟糕的设计。

你不应该在这里实现Iterable，而是有一个方法返回一个String对象的Iterable，只有在你完成读取文件后才会返回一个Iterable对象。
这样，您可以拥有读取文件并为其内容提供可迭代的功能。
我建议如下：

A. 有一个名为 MyFileReader 的类
B. 有你在上面定义的字段来保存行。C. 有一个[CountdownLatch](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html)对象 - 调用这个字段锁。让它初始化为 1。
D. 一旦文件被读取，您的 readFiles 方法应该执行 countDown。
E. 定义一个 getIterator 方法，它将为 lines 字段创建一个迭代器，但在创建之前，它将调用 lock.await() - 这意味着该方法将等待文件被完全读取。

我希望它更清楚。我真的应该不明白如何嵌入代码。我还没明白:(

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T18:15:29.697

即使文件读取本身是线程安全的，但读取的数据却不是。

您的`iterator()`方法是公开的，当一个线程正在读取文件时，另一个线程可以调用该`iterator()`方法并获取 ConcurrentModificationException。（因为 ArrayList 是快速失败的）。

# php - Facebook API 有效，但不适用于 codeigniter？

> ID：11106822
> 
> 赞同：0
> 
> 时间：2012-06-19T18:11:10.453
> 
> 标签：php, codeigniter, facebook-php-sdk

我正在开发一个使用 Facebook API 让用户登录的网站，但我在使用 Facebook API 本身时遇到了一些莫名其妙的问题。我认为这是使用 CodeIgniter 的结果。

我添加了一个不使用 Codeigniter 的 PHP 脚本，它可以连接。它看起来像这样：

```
require_once("application/libraries/Facebook/facebook.php");

$facebook = new Facebook(array(
        'appId'  => 'appid-removed-for-question',
        'secret' => 'secret-removed-for-question',
));

$user = $facebook->getUser();
echo $user; 
```

这会从 Facebook 返回相应的 UID。

一旦我尝试使用 CodeIgniter 库执行此操作，UID 始终返回为 0。这是库代码：

```
include(APPPATH.'libraries/Facebook/facebook.php');

class Fb_connect extends Facebook{

    public $user;

    public function __construct()
    {
        $CI =& get_instance();
        $CI->config->load("facebook",TRUE);
        $config = $CI->config->item('facebook');
        parent::__construct($config);

        $this->user = $this->getUser();
        echo $this->user;
    }
} 
```

我在配置文件中对我的 appid 和 secret 进行了双重和三重检查，甚至在此处回显它以确保它作为数组正确通过，但仍然没有。 `$this->user;`不断为 UID 返回 0。我错过了什么？

我刚刚看到这个[问题](https://stackoverflow.com/questions/2190668/facebook-apis-require-login-to-work-with-codeigniter)，它谈到了 uri_protocol 是问题，但我必须首先设置`$config['uri_protocol'] = 'QUERY_STRING';`让我的 mod_rewrite 脚本工作，这让我想知道它是否是同一个问题。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:14:34.960

我链接到的问题的答案实际上为我解决了这个问题：

```
$config['uri_protocol'] = 
    (isset($_SERVER['HTTP_REFERER']) && 
     strpos($_SERVER['HTTP_REFERER'], 'apps.facebook.com') !== false) ? 
         "PATH_INFO" : "REQUEST_URI"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:20:48.390

使用这个.. require_once($_SERVER['DOCUMENT_ROOT']."/".$this->config->item('app_folder_path')."application/libraries/Facebook/facebook.php");

确保您在 config.php 文件中设置了 app_folder_path 配置变量。

# python - 添加两个熊猫数据框

> ID：11106823
> 
> 赞同：54
> 
> 时间：2012-06-19T18:11:14.613
> 
> 标签：python, pandas

我有两个`dataframes`，都由`timeseries`. 我需要将元素添加在一起以形成一个新的`dataframe`，但前提是索引和列相同。如果该项目不存在于其中一个`dataframe`s 中，则应将其视为零。

我试过使用`.add`，但不管索引和列如何，这个总和。还尝试了一个简单的方法`combined_data = dataframe1 + dataframe2`，但这会给出一个`NaN`如果两个数据框都没有该元素。

有什么建议么？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-06-20T03:28:12.140

怎么样`x.add(y, fill_value=0)`？

```
import pandas as pd

df1 = pd.DataFrame([(1,2),(3,4),(5,6)], columns=['a','b'])
Out: 
   a  b
0  1  2
1  3  4
2  5  6

df2 = pd.DataFrame([(100,200),(300,400),(500,600)], columns=['a','b'])
Out: 
     a    b
0  100  200
1  300  400
2  500  600

df_add = df1.add(df2, fill_value=0)
Out: 
     a    b
0  101  202
1  303  404
2  505  606 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-19T19:02:15.203

如果我理解正确，你想要类似的东西：

```
(x.reindex_like(y).fillna(0) + y.fillna(0).fillna(0)) 
```

这将给出两个数据帧的总和。如果一个值在一个数据帧中而不是另一个数据帧中，则该位置的结果将是该现有值（查看 X 中的 B0 和 Y 中的 B0 并查看最终输出）。如果两个数据帧中都缺少一个值，则该位置的结果将为零（查看 X 中的 B1 和 Y 中的 B1 并查看最终输出）。

```
>>> x
   A   B   C
0  1   2 NaN
1  3 NaN   4
>>> y
    A   B   C
0   8 NaN  88
1   2 NaN   5
2  10  11  12
>>> (x.reindex_like(y).fillna(0) + y.fillna(0).fillna(0))
    A   B   C
0   9   2  88
1   5   0   9
2  10  11  12 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-07T11:04:13.510

为了使答案更笼统......首先我将采用公共索引来同步两个数据帧，然后我将它们中的每一个加入我的模式（**日期**），我将对同名的列求和，最后加入两个数据帧（删除其中之一中添加的列），

你可以在这里看到一个例子（谷歌的股票价格取自谷歌）：

```
import numpy as np
import pandas as pd
import datetime as dt

prices = pd.DataFrame([[553.0, 555.5, 549.3, 554.11, 0],
                       [556.8, 556.8, 544.05, 545.92, 545.92],
                       [545.5, 546.89, 540.97, 542.04, 542.04]],
                       index=[dt.datetime(2014,11,04), dt.datetime(2014,11,05), dt.datetime(2014,11,06)],
                       columns=['Open', 'High', 'Low', 'Close', 'Adj Close'])

corrections = pd.DataFrame([[0, 555.22], [1238900, 0]],
                    index=[dt.datetime(2014,11,3), dt.datetime(2014,11,4)],
                    columns=['Volume', 'Adj Close'])

dates = pd.DataFrame(prices.index, columns = ['Dates']).append(pd.DataFrame(corrections.index, columns = ['Dates'])).drop_duplicates('Dates').set_index('Dates').sort(axis=0)
df_corrections = dates.join(corrections).fillna(0)
df_prices = dates.join(prices).fillna(0)

for col in prices.columns:
    if col in corrections.columns:
        df_prices[col]+=df_corrections[col]
        del df_corrections[col]

df_prices = df_prices.join(df_corrections) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-16T12:19:46.397

以上两个答案 -`fillna(0)`如果它们中的任何一个具有不同的结构，直接添加都会给你 Nan 值。

最好使用 fill_value

`df.add(other_df, fill_value=0)`

# dapper - 如何使用 Dapper 传递空参数

> ID：11106825
> 
> 赞同：44
> 
> 时间：2012-06-19T18:11:15.817
> 
> 标签：dapper

我有一个存储过程，它的参数没有默认值，但它可以为空。但我不知道如何用 Dapper 传递 null。我可以在 ADO 中做得很好。

```
connection.Execute("spLMS_UpdateLMSLCarrier", new { **RouteId = DBNull.Value**, CarrierId = carrierID, UserId = userID, TotalRouteRateCarrierId = totalRouteRateCarrierId },
                                        commandType: CommandType.StoredProcedure); 
```

例外：

```
System.NotSupportedException was caught
  Message=The member RouteId of type System.DBNull cannot be used as a parameter value
  Source=Dapper
  StackTrace:
       at Dapper.SqlMapper.LookupDbType(Type type, String name) in C:\Dev\dapper-git\Dapper\SqlMapper.cs:line 348
       at Dapper.SqlMapper.CreateParamInfoGenerator(Identity identity) in C:\Dev\dapper-git\Dapper\SqlMapper.cs:line 1251
       at Dapper.SqlMapper.GetCacheInfo(Identity identity) in C:\Dev\dapper-git\Dapper\SqlMapper.cs:line 908
       at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in C:\Dev\dapper-git\Dapper\SqlMapper.cs:line 532
       at Rating.Domain.Services.OrderRatingQueueService.UpdateLMSLCarrier(Int32 totalRouteRateCarrierId, Int32 carrierID, Int32 userID) in C:\DevProjects\Component\Main\Source\Rating\Source\Rating.Domain\Services\OrderRatingQueueService.cs:line 52
       at Benchmarking.Program.OrderRatingQueue() in C:\DevProjects\Component\Main\Source\Benchmarking\Source\Benchmarking\Program.cs:line 81
       at Benchmarking.Program.Main(String[] args) in C:\DevProjects\Component\Main\Source\Benchmarking\Source\Benchmarking\Program.cs:line 28
  InnerException: 
```

不能关闭 RouteId，给我一个错误，说它是必需的。不能使用常规 null 也给我另一个错误。不能更改存储过程，它不属于我。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-06-19T18:16:19.467

我认为您应该可以通过转换`null`为适当的类型来做到这一点。假设 RouteId 是一个整数：

```
connection.Execute("spLMS_UpdateLMSLCarrier", new { RouteId = (int?)null, CarrierId = carrierID, UserId = userID, TotalRouteRateCarrierId = totalRouteRateCarrierId }, commandType: CommandType.StoredProcedure); 
```

`RouteId`使用常规 null 时遇到的问题很可能是编译器在不使用强制转换的情况下仅使用匿名类型时无法推断出匿名类型的类型`null`。

# php - 梨 DB：非常奇怪的行为

> ID：11106827
> 
> 赞同：0
> 
> 时间：2012-06-19T18:11:21.160
> 
> 标签：php

考虑以下代码

```
 $dsn = array('phptype'  => 'mysql',
        'username' => Config::DB_STORE_USERNAME,
        'password' => Config::DB_STORE_PASSWORD,
        'hostspec' => Config::DB_STORE_HOSTNAME,
        'database' => Config::DB_STORE_NAME);
    echo '222222';
    $db = DB::connect($dsn);
    echo '111111';
    if (PEAR::isError($db)) {
        echo '2143234234235';
        return null;
    } 
```

`222222`时输出`111111`。仍然没有输出错误（在`php.ini` `error_reporting`is 中`E_ALL`）。您知道如何跟踪问题吗？

**UPD：**如果有帮助，我安装的不是数据库，`pear install DB`而是下载和解压缩的存档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:14:39.200

正如例子所暗示的，

```
if (PEAR::isError($db)) {
die($db->getMessage()); } 
```

输出什么？

# xamarin.android - 调试在 Monodroid 4.2.3 中不起作用

> ID：11106830
> 
> 赞同：1
> 
> 时间：2012-06-19T18:11:22.023
> 
> 标签：xamarin.android

由于我和我的同事已经下载并安装了 Monodroid 4.2.3，我们一直无法运行调试并且断点工作。我们需要做什么才能让它们发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:39:58.747

邮件列表中的用户一直在[讨论 4.2.3 中的相同问题](http://mono-for-android.1047100.n5.nabble.com/4-2-3-debugger-td5710420.html)。

报告此问题的更好地方是他们的[错误跟踪器](https://bugzilla.xamarin.com/describecomponents.cgi?product=Mono%20for%20Android)。同时，如果这给您带来很多麻烦，您可以降级回 4.2.2。

# android - android中的移动按钮

> ID：11106832
> 
> 赞同：0
> 
> 时间：2012-06-19T18:11:24.053
> 
> 标签：android, animation, button, marquee

我需要水平移动几个按钮。这些按钮是动态创建的。我现在的代码是

```
 TranslateAnimation  mAnimation = new TranslateAnimation(
                        TranslateAnimation.RELATIVE_TO_PARENT, 1f,
                        TranslateAnimation.RELATIVE_TO_PARENT, -1.2f,
                        TranslateAnimation.ABSOLUTE, 0f,
                        TranslateAnimation.ABSOLUTE, 0f
                       );
               mAnimation.setDuration(15000);
               mAnimation.setRepeatCount(-1);
               mAnimation.setRepeatMode(Animation.INFINITE);
               mAnimation.setInterpolator(new LinearInterpolator());
               mAnimation.setFillAfter(true);

                LinearLayout alertlayout = (LinearLayout) findViewById(R.id.alertll);
                alertlayout.startAnimation(mAnimation); 
```

然后动态创建按钮并添加到这个线性布局中。但是所有按钮都没有显示。由于这个线性布局的宽度是屏幕宽度，所以它只显示屏幕宽度可以填充的按钮。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:19:07.700

您正在尝试为父布局设置动画。你需要你的按钮（子视图）来制作动画。正确的？。

创建一个`AnimationSet`包含每个按钮的动画对象。

# asp.net - 数据网格编辑命令集下拉列表选择值

> ID：11106838
> 
> 赞同：0
> 
> 时间：2012-06-19T18:11:47.437
> 
> 标签：asp.net, datagrid, drop-down-menu

我有一个数据网格，我想在 editcommand 中设置下拉列表的值。

但是，我找不到控件？

这是我的.net：

```
Private Sub dgUsers_EditCommand(ByVal source As Object, ByVal e As System.Web.UI.WebControls.DataGridCommandEventArgs) Handles dgUsers.EditCommand

    Dim ddl As DropDownList = CType(e.Item.Cells(3).FindControl("ddlRole"), DropDownList)
    'ddl.SelectedValue = "20"

    dgUsers.EditItemIndex = e.Item.ItemIndex
    Call bindUsers()
    dgUsers.ShowFooter = False
End Sub 
```

这是我的html：

```
<asp:TemplateColumn HeaderText="Role">
            <ItemTemplate>
                <asp:Label ID="lblRole" runat="server" Text='<%# Eval("GetRoleName") %>' />
            </ItemTemplate>
            <EditItemTemplate>
                <asp:DropDownList id="ddlRole" runat="server">
                    <asp:ListItem Text="User" Value="0" />
                    <asp:ListItem Text="WRA" Value="10" />
                    <asp:ListItem Text="Admin" Value="20" />
                </asp:DropDownList>
            </EditItemTemplate>
        </asp:TemplateColumn> 
```

在 EditCommand 中调试时，我可以找到标签 (lblRole)，但找不到下拉列表。

想法？！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:11:47.733

我刚刚想通了。即使 IDE 不显示该属性，您也可以在设计端设置 SelectedValue：

```
<EditItemTemplate>
                <asp:DropDownList id="ddlRole" runat="server" SelectedValue='<%# Eval("GetRoleId") %>'>
                    <asp:ListItem Text="User" Value="0" />
                    <asp:ListItem Text="WRA" Value="10" />
                    <asp:ListItem Text="Admin" Value="20" />
                </asp:DropDownList>
            </EditItemTemplate> 
```

# java - 递增整数

> ID：11106844
> 
> 赞同：-2
> 
> 时间：2012-06-19T18:11:55.357
> 
> 标签：java

> **可能重复：**
> [在Java中为数字添加前导零？](https://stackoverflow.com/questions/275711/add-leading-zeroes-to-number-in-java)

对于我的程序，我必须制作这种类型的代码

即`ABC000001`，`ABC000002` 等等，

前三个字符是固定的，之后代码应该递增，

像这样的代码：

```
int i = 000001;
String str = "ABC";

loop{
    String temp = str + i;
    i = i + 1;
} 
```

当我使用`int`000001 时，将其视为 1。

如果 10 代码将显示为类似`ABC000010` ，如果代码将 100 则`ABC000100`，`ABC000101` 等等...

所以任何人都可以告诉我我应该怎么做才能获得这种类型的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:32:03.520

这是一项微不足道的工作[`String.format`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax)（自 J2SE 5.0 起）

```
String temp = String.format("ABC%06d", i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:22:22.350

您需要使用其中一个`java.text`实用程序来格式化数字，否则数字将是“1”，而不是“000001”。

# java - 使用 Java 的 File.delete() 方法

> ID：11106850
> 
> 赞同：2
> 
> 时间：2012-06-19T18:12:28.327
> 
> 标签：java, java-io

当我使用该`File.delete()`方法删除文件时，删除的文件在哪里？我使用的是 Mac，但在垃圾箱中看不到该文件。我想知道文件存储在哪里？或者如果它永久消失了。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:16:13.787

Mac/Linux 中的垃圾箱（或 Windows 中的回收站）仅适用于特定的文件管理器（Finder、Nautilus/Dolphin 或资源管理器），它们实际上将文件移动到同一分区上的临时文件夹（又名垃圾箱/回收站） )，从中删除它。

从核心操作系统的角度来看， delete() 将永久删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:16:59.057

它消失了。当您通过操作系统“删除”文件时，垃圾箱只是在删除文件之前放置文件的临时位置。

然而，在大多数文件系统中，删除文件只会从系统的文件列表中删除指向它的指针。实际数据可能会在硬盘驱动器上放置很长时间，直到被覆盖。有可用的文件恢复工具可以尝试检索此类文件，但它们并非 100% 成功。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T22:37:10.447

> 文件存储在哪里？

它不是。你把它删了。它被删除了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T18:15:41.100

调用文件。[delete](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#delete%28%29) () 永久删除文件，而不进入回收站或类似的东西。

# php - 向 Googlebot 隐藏内容

> ID：11106851
> 
> 赞同：2
> 
> 时间：2012-06-19T18:12:28.643
> 
> 标签：php, user-agent

如果我想在 Mozilla Firefox 上隐藏一些内容，我使用以下代码：

```
<?php if (strpos($_SERVER['HTTP_USER_AGENT'], 'Gecko') == FALSE) { ?>
Hide only in Mozilla
<?php } ?> 
```

我的问题是，如何向 Googlebot 隐藏一些内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T18:38:42.457

您可以根据用户代理检测 googlebot，例如

[您可以在http://www.useragentstring.com/pages/Crawlerlist/](http://www.useragentstring.com/pages/Crawlerlist/)找到用户代理列表

**对于谷歌机器人：**

`if (strpos($_SERVER[‘HTTP_USER_AGENT’],"Googlebot")) { // do some functionality }`

但是为谷歌隐藏元素是个坏主意，谷歌很聪明，你肯定会因此受到惩罚。

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=66355](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=66355)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:24:49.417

您需要在您的网络服务器上放置一个 robots.txt 文件并将其配置为排除 googlebot 或所有搜索引擎。可以在[www.robotstxt.org上找到有关其工作原理的详细说明](http://www.robotstxt.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-18T20:13:43.057

另一种解决方案是阻止*Googlebot*跟踪您网站页面上的任何链接，即使用**nofollow 元标记。**

要阻止*Googlebot*跟踪单个链接，请添加：

```
rel="nofollow" 
```

链接本身的属性。

# mysql - 如何在mysql查询中使用一个或多个OR和AND

> ID：11106853
> 
> 赞同：1
> 
> 时间：2012-06-19T18:12:37.500
> 
> 标签：mysql, database, select

> **可能重复：**
> [MYSQL AND OR 在多对多表上](https://stackoverflow.com/questions/10712358/mysql-and-or-on-many-to-many-table)

我想做一个 mysql 查询，其中数据是从具有一定规则的数据库中检索的。

我想检查哪些条目类似于 var1 或 var2 或 var3 等。并且小于给定的 ID。

喜欢

```
SELECT * 
FROM database 
WHERE name = var1 
    OR name = var2 
    OR name = var3 
    AND id < 200 
```

但是上面的行并没有真正起作用。此外，当没有更多条目（其中 id 小于 200）时，它会向我显示一些条目。

你懂我的意思吗？查询应选择包含我想要的名称之一且小于 ID 的数据...

我有一个逻辑思维问题...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-19T18:14:00.340

逻辑运算符具有[优先级。](http://dev.mysql.com/doc/refman/5.0/en/operator-precedence.html)如有疑问，请使用括号。

在你的情况下：

```
SELECT * FROM database WHERE (name = var1 OR name = var2 OR name = var3) AND id < 200 
```

您的原始查询被解释如下，因为`AND`具有更高的优先级。

```
SELECT * FROM database WHERE name = var1 OR name = var2 OR (name = var3 AND id < 200) 
```

### 更新

正如**Rocket**所评论的那样，您可以将您的`OR`陈述浓缩为，[`IN`](http://www.tutorialspoint.com/mysql/mysql-in-clause.htm)因为它们在同一领域运作。这样做将消除对括号的需要。

```
SELECT * FROM database WHERE name IN (var1,var2,var3) AND id < 200 
```

尽管如此，了解两个原始查询之间的区别很重要，因为您不可避免地会编写具有多个条件的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:16:41.647

使用括号设置逻辑表达式的优先级：

```
SELECT * FROM database_table WHERE (name = var1 OR name = var2 OR name = var3) AND id < 200 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:21:56.107

请阅读下文。

***[这两个查询有区别吗？](https://stackoverflow.com/questions/10815876/is-there-a-difference-between-these-two-queries/10815979#10815979)***

您将了解OR 和 AND 中括号的***重要性***。

# blackberry - 如何以编程方式从我的黑莓应用程序中关闭其他应用程序？

> ID：11106855
> 
> 赞同：0
> 
> 时间：2012-06-19T18:12:44.483
> 
> 标签：blackberry, background

我需要开发一个应用程序来找到所有可见的应用程序（前景和/或背景）并尽可能多地关闭。我尝试使用以下代码：

```
ApplicationPermissionsManager appPermissionsManager = ApplicationPermissionsManager.getInstance();

ApplicationPermissions appPermissions = appPermissionsManager.getApplicationPermissions();

if (ApplicationPermissions.VALUE_ALLOW == appPermissions.getPermissio(ApplicationPermissions.PERMISSION_INPUT_SIMULATION)) {
try {
EventInjector.KeyCodeEvent pressKey = new EventInjector.KeyCodeEvent(EventInjector.KeyCodeEvent.KEY_DOWN, ((char) Keypad.KEY_ESCAPE), 0);

EventInjector.KeyCodeEvent releaseKey = new EventInjector.KeyCodeEvent(EventInjector.KeyCodeEvent.KEY_UP, ((char) Keypad.KEY_ESCAPE), 0);

EventInjector.invokeEvent(pressKey);
EventInjector.invokeEvent(releaseKey);

} catch (Exception e) {
System.out.println("\n\n >>>>>> Block App Excep Thread 6 : " + e.toString() + "\n");
}
} 
```

但这对解决问题没有多大帮助。谁能建议我可以用什么来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:44:04.110

我最近为同一任务开发了一个演示。

我使用与你在这里给出的相同的代码......你能详细告诉我，你的代码的哪一部分你面临问题......或者在这里提供你的代码。

您可以在以下位置找到更多详细信息： [链接 1](http://supportforums.blackberry.com/t5/Java-Development/global-event-listener-is-not-called-instantly-and-properly-on/m-p/1762841#M201781)

并在： [链接2](http://supportforums.blackberry.com/t5/Java-Development/how-to-pause-the-timer-thread/m-p/1752959#M201209)

我会推荐一个连续运行的线程，它只会“休眠”一秒钟，然后检查...当前的前台应用程序，是否要阻止它。可能 Timer 任务会增加您的应用程序的负载....如果您使用线程，您可以轻松地阻止/暂停其处理，直到它关闭当前的前台本机应用程序，但在 TimerTask 的情况下会很困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:03:04.140

使用`System.exit(0);`. 我以前用过它，它工作。

# css - 如何在 ExtJS 4.1 中获得更大的字体？

> ID：11106857
> 
> 赞同：3
> 
> 时间：2012-06-19T18:13:01.743
> 
> 标签：css, extjs

我绝不是一个老人，但我发现 Ext JS（使用 4.1）中的整体字体大小太小了。

我想更改所有内容的整体默认字体大小——标题、按钮、网格、树、表单字段标签、表单字段等，并将其提高到默认值的 120%。

我在这里最好的选择是什么？

创建自定义主题似乎太过分了（如果可以的话）。

这是我现在的解决方案，位于我的主 CSS 文件中：

```
div, span, p, body, a, input, textarea, label {
  font-family: Calibri, Helvetica, Arial !important;
  font-size:    14px !important;
} 
```

但是，这感觉很不雅，而且这对我的 Grid 列标题和选项卡造成了不利影响（它们的 chrome 不能正确拉伸）。这也让我偶尔想要不同字体的情况变得更加*困难*。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T20:00:57.370

恐怕最好的方法是重新编译主题。这样，所有组件的大小都将根据您的默认字体大小重新计算，并且您不会看到混乱的外观。

这实际上很容易做到。按照此处的说明进行操作。[ExtJS 主题指南](http://docs.sencha.com/ext-js/4-1/#!/guide/theming "ExtJS 主题指南")。一旦你确定你可以编译默认主题。**在themes/stylesheets/ext4/default/variables/_core.scss**处编辑文件，在第31 行，将字体大小更改为14px。

重新编译。

任务完成。

# eclipse - 无法在 Eclipse 中指定主类

> ID：11106858
> 
> 赞同：5
> 
> 时间：2012-06-19T18:13:06.443
> 
> 标签：eclipse, class, main

奇怪的事情正在发生。

我在 Eclipse 中创建了一个新项目并编码了一段时间。有四个类，其中一个包含一个 main 方法，所有四个都在一个包中，我已准备好进行第一次测试运行。当我按下 Ctrl+F11（运行）时，出现一条消息，如下所示：

```
Selection does not contain a main method. 
```

所以我转到运行配置，我发现没有设置主类。当我点击相应的“搜索”按钮以指定主类时，出现的对话框是空的。对话框运行良好，但没有可供我选择的课程。

这些文件位于项目和硬盘驱动器中的正确位置。运行配置中选择的项目也是正确的。

我尝试在 JRE 之间切换，但没有。重新启动 Eclipse 或刷新项目也没有用。如果我手动输入类 (Main) 的名称，它只会告诉我当我尝试运行它时找不到类 Main。我还尝试将课程移至另一个包。

我已经在同一台计算机上安装了 Eclipse 并制作了几个项目。第一次运行有时会失败，但摆弄运行配置总是很容易修复它。这一次似乎我注定永远不会运行这个程序。也许这个项目一开始是个坏主意……

有没有人遇到过这个问题？我错过了眼前最愚蠢的事情吗？

# asp.net-mvc-3 - Chrome：打印图表花费的时间太长

> ID：11106860
> 
> 赞同：1
> 
> 时间：2012-06-19T18:13:14.460
> 
> 标签：asp.net-mvc-3, google-chrome, printing, jqplot

我有一个带有 Jqplot 图的视图。对于打印，我使用浏览器的打印选项（我使用 print.css）

当我打印一个非常简单的 jqplot 图形（两个条形图）时，发送到打印机的文件大小接近 30 MB，打印机响应时间过长。将图表发送给 pdf 创建者也是如此。

浏览器打印预览工作速度很快。

我正在使用：

*   谷歌浏览器 19
*   ASP。网络MVC3
*   Jqplot 版本：1.0.0b2_r1012

这是图表的CSS：

```
#regimenCajaReductora
{
    height: 200px;
    width: auto;
    margin: 0;
    float: none;
} 
```

你能帮我解决这个问题吗？提前致谢。

**更新**

我用IE9试了一下。发送到打印机的文件接近 3 MB。比 Chrome 19 小 10 倍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:44:11.410

搜索我发现了这个：

[http://code.google.com/p/chromium/issues/detail?id=92304](http://code.google.com/p/chromium/issues/detail?id=92304)

Google Chrome 的打印预览 (ctrl+p) 存在问题。从那里打印会产生一个比从“高级”选项获得的**文件大 10/15 倍的巨大文件。**

当我使用 Chrome 的高级打印选项 (ctrl+shift+p) 打印时，发送到打印机的文件大小是正常大小。

# javascript - tinymce 中不可编辑的图像

> ID：11106863
> 
> 赞同：2
> 
> 时间：2012-06-19T18:13:23.710
> 
> 标签：javascript, tinymce, token

我正在尝试在 tinymce 窗口中添加不可编辑的标记。在后端令牌被替换为一些内容。我有一个脚本，可以将图像标签（代表我们的令牌）插入到 tinymce 窗口中。我想确保无法通过上下文菜单或工具栏编辑此图像。我决定使用图像标签，因为它可以在 tinymce 窗口中拖动。我为不可编辑的内容尝试了 tinymce 插件，但您无法在所见即所得中移动令牌。

# java - 可执行jar文件找不到main

> ID：11106865
> 
> 赞同：0
> 
> 时间：2012-06-19T18:13:36.100
> 
> 标签：java, apache-poi, executable-jar

我看过很多关于此的帖子，但我找不到解决我的具体问题的方法。我检查了我如何从 eclipse 导出 jar 的参数，并且我确定包含 main 的类被检查为主类（这个项目中只有一个类）。该程序在eclipse中运行良好。我也使用了一个 bat 文件来尝试运行它，它读取（其中 EDT2 是 jar 的名称）：

```
 java -jar EDT2.jar 
```

我查看了清单文件，内容如下：

```
 Manifest-Version: 1.0
 Sealed: true
 Main-Class: EDTCompiler2 
```

该文件的主要内容如下：

```
 public static void main(String[] args) throws IOException, InvalidFormatException { 
```

错误和命令行调用如下所示：

[http://s16.postimage.org/droox00sl/Untitled.png](http://s16.postimage.org/droox00sl/Untitled.png) ![在此处输入图像描述](../Images/8780c7139f7e0febfeed4f96d58c2429.png)

我看到的另一件不寻常的事情是它在第 53 行出现错误，这是来自外部库的对象声明类型。我在这个程序中使用 apache POI for excel。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:21:05.173

您的主类需要是一个完全限定的名称。

换句话说，如果`EDTCompiler2`在，那么您的`package org.apache.whatever;`JAR 文件需要指定一个`Main-Class`.`org.apache.whatever.EDTCompiler2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:48:24.363

Edwin 的诊断是正确的：在主类的静态初始化程序中，您正在加载另一个加载失败的类。这会引发 NoSuchMethodError 并阻止您的主类加载。因此，最后的错误消息。缺少的方法表明当您在 Eclipse 中运行程序以及在命令行上运行程序时，您正在使用不同版本的 Apache POI 库。

要解决此问题，您有两种选择：

1.  当您从 Eclipse 导出 JAR 时，请选中“将所需库提取到生成的 JAR”选项。这应该默认选择，但现在似乎不适合您。
2.  不要将依赖库打包到 JAR 中，而是在使用 -cp 选项调用 java 时将它们添加到类路径中。使用此选项，您必须确保添加正确版本的库。

# jquery - 由于 scrollHeight 和 scrollWidth 设置为 0 导致的 Jquery jScrollPane 初始化问题

> ID：11106868
> 
> 赞同：2
> 
> 时间：2012-06-19T18:13:46.890
> 
> 标签：jquery, jscrollpane

我有 3 个不同的 div，都填充了 AJAX。无论我尝试了何种渲染顺序，jScrollpane 都无法在我的一个 div 中工作。

在对插件进行一些调试后，我发现问题出在这一特定行`contentHeight = pane[0].scrollHeight;`，其中 scrollHeight 和 width 始终为 0。在完整代码段下方

```
 pane.css('overflow', 'auto');
            if (s.contentWidth) {
                contentWidth = s.contentWidth;
            } else {
                contentWidth = pane[0].scrollWidth;
            }
            contentHeight = pane[0].scrollHeight;
            pane.css('overflow', '');

            percentInViewH = contentWidth / paneWidth;
            percentInViewV = contentHeight / paneHeight;
            isScrollableV = percentInViewV > 1;

            isScrollableH = percentInViewH > 1;

            if (!(isScrollableH || isScrollableV)) {
              elem.removeClass('jspScrollable');
                pane.css({
                    top: 0,
                    width: container.width() - originalPaddingTotalWidth
                });
                removeMousewheel();
                removeFocusHandler();
                removeKeyboardNav();
                removeClickOnTrack(); 
```

`pane`是一个新创建的 jsPane 附加到原始 elem

```
pane = $('<div class="jspPane" />').css('padding', originalPadding).append(elem.children());
                    container = $('<div class="jspContainer" />')
                        .css({
                            'width': paneWidth + 'px',
                            'height': paneHeight + 'px'
                        }
                    ).append(pane).appendTo(elem); 
```

为什么这个特定div的scrollHeight总是0？其他 2 个 div 也是顶级的（只有 body 是父级），但有问题的 div 非常深。在此之上有 4 个父 div。我怀疑问题是由于任何父 div 中的一些高度设置造成的。但是不知道在哪里？

# c++ - __attribute__((constructor)) 调用顺序混乱

> ID：11106875
> 
> 赞同：9
> 
> 时间：2012-06-19T18:14:18.687
> 
> 标签：c++, linux, gcc, shared-libraries, static-initialization

[这里](https://stackoverflow.com/questions/8433484/c-static-initialization-vs-attribute-constructor)的答案表明 __attribute__((constructor)) 不是在静态初始化**之后**调用的，而是按声明顺序调用的。

那么，如果不保证在所有数据初始化时调用它，它的目的是什么？我们也可以在 Foo 构造函数中包含我们的 ((constructor)) 代码。

我正在寻找的是一种在共享库中拥有在初始化所有静态数据并调用静态构造函数后将执行的代码的方法。我看到人们推荐 __attribute__((constructor)) 作为 DllMain 的替代品；我们可以看到这是错误的，因为一些静态数据可能还没有初始化。

当然，在单个文件（编译单元）中，我们可以安排静态。但是在一个典型的程序中有很多文件。有没有办法保证一个文件中的 ((constructor)) 在共享库中的所有其他静态变量都被初始化后肯定会被调用？

如果我将带有静态初始化（构造函数、对象等）的文件放在 gcc 命令行的末尾：

```
g++ -shared -fPIC source1.o source2.o MyLastInitChance.o 
```

这个文件的静态构造函数是否保证最后被调用？我进行了实验，当我更改源文件的顺序时，printfs 的顺序发生了变化；但它是否在某处指定并保证在编译系统/计算机中相同？

例如，引用：

> 在链接时，gcc 驱动程序将 crtbegin.o 放在所有可重定位文件之前，并将 crtend.o 放在所有可重定位文件之后。[©](http://l4u-00.jinr.ru/usoft/WWW/www_debian.org/Documentation/elf/node4.html)

据我了解，上面的引用暗示传递给链接器的 .o 文件的顺序定义了静态初始化的顺序。我对么？

另一个有趣的可能解决方案可能是编写一个 GCC 插件来调整静态初始化（例如，将代码添加到 .ctors 部分等）。但这只是一个想法，也许有人可以扩展。

[这里介绍了](https://bugzilla.mozilla.org/show_bug.cgi?id=606137)另一种可能的解决方案。简而言之，可以使用外部构建后工具对可执行文件（库）中的 .ctors 条目进行重新排序。但我不是 ELF 格式的专家；我想知道以这种方式调整 .so 文件是否可行且足够容易。

我感兴趣的是解决一个特定的问题，或者证明它是不可能解决的（至少为什么上面的解决方案不起作用）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-25T23:40:23.267

您可以尝试将链接器脚本用于`ld`. [你可以在这里](http://ftp.gnu.org/old-gnu/Manuals/ld-2.9.1/html_node/ld_toc.html)阅读更多关于它的信息，但我猜你正在寻找的是

```
.ctors : { *(SORT(.ctors)) MyLastInitChance.o(SORT(.ctors)) }
.dtors : { *(SORT(.dtors)) MyLastInitChance.o(SORT(.dtors)) } 
```

在`SECTIONS{...}`块中。这应该重新排列`.ctors`部分，以便提供的文件将其构造函数称为最后一个。显然，如果您发现自己需要更高级的解决方案；）

提示：编写自己的链接脚本很乏味。使用`ld`'`--verbose`选项打印出使用的链接脚本并修改它。`-T`然后使用switch添加链接脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T17:51:14.813

**属性**((constructor))__的最大优势是与每个块相关联的优先级，并且特别有助于您的案例。

您有两个具有数据风险的代码块（应首先执行一组）。这是单个静态块无法实现的。由于顺序混乱，使用一个静态块和一个**属性**((constructor))__ 不会解决您的问题。

处理该问题的最佳方法是让两个**属性**((constructor))__ 具有两个不同的优先级。将现有的静态初始化块移至较高优先级 (0)，将另一个代码块移至较低优先级。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T19:23:53.473

请参阅： http: [//gcc.gnu.org/ml/gcc-help/2011-05/msg00220.html](http://gcc.gnu.org/ml/gcc-help/2011-05/msg00220.html)和答案[http://gcc.gnu.org/ml/gcc-help/2011-05/msg00221 .html](http://gcc.gnu.org/ml/gcc-help/2011-05/msg00221.html)

特别是从答案中引用：

> **所有具有 init_priority 属性的对象都在任何没有 init_priority 属性的对象之前构造。**

请注意，它实际上是关于`__attribute__((init_priority))`而不是关于，`__attribute__((constructor))`但我相信它们实际上都在 gcc 中使用相同的代码，分别在 gnu 链接器中。首先只是对应C++对象，即调用它们的构造函数/析构函数，后者是关于将特定函数标记为构造函数或析构函数。

恕我直言，`__attribute__((constructor))`存在主要是因为 C，而不是 C++。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T19:48:10.717

你能为这个全局实现“首次使用时构造”模式吗？

例如

```
Magic& gMagic()
{
    static Magic magic;
    return magic;
} 
```

它将在所有常规静态 ctor 之后构建，但在任何常规代码需要它之前。

# css - 是否可以为 Flexbox 插入和移除设置动画？

> ID：11106876
> 
> 赞同：65
> 
> 时间：2012-06-19T18:14:20.963
> 
> 标签：css, css-transitions, css-animations, flexbox

当我从 flexbox 中删除一个项目时，剩余的项目会立即“捕捉”到它们的新位置，而不是动画。

从概念上讲，由于项目正在改变它们的位置，我希望过渡适用。

我已经在所有涉及的元素（弹性框和子元素）上设置了过渡属性

有什么方法可以对弹性框的编辑（添加和删除）进行动画处理？这对我来说实际上是一件大事，也是 flexbox 缺少的一块。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-07-26T22:33:53.983

我已经根据[Treehouse](http://teamtreehouse.com/library/css-layout-techniques/flexbox-layout/animating-flexbox)中的这个示例修复了 @skyline3000 的演示。如果浏览器发生变化，不确定这是否会再次中断，但这似乎是动画 flex 大小变化的预期方式：

[http://jsfiddle.net/2gbPg/2/](http://jsfiddle.net/2gbPg/2/)

我也使用了 jQuery，但从技术上讲它不是必需的。

```
.flexed {
    background: grey;
    /* The border seems to cause drawing artifacts on transition. Probably a browser bug. */
    /* border: 1px solid black; */
    margin: 5px;
    height: 100px;
    flex-grow: 1;
    transition: flex-grow 1000ms linear;
}

.removed {
    /* Setting this to zero breaks the transition */
    flex-grow: 0.00001;
} 
```

关于 CSS 需要注意的一件事是你不能过渡到`flex-grow`零，它不会过渡它只会消失。您只需要输入一个非常小的值。绘制边框时似乎也存在人为错误，因此在这种情况下我使用了背景。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-03T16:07:37.383

请记住，灵活盒模型和网格布局规范不断变化，甚至属性和有效值也是如此。浏览器的实现也远未完成。话虽如此，您可以在`flex`属性上进行转换，以便元素平滑地转换，然后只听`TransitionEnd`最终从 DOM 树中删除节点。

这是一个示例 JSFiddle，在 Chrome 21 中运行：http: [//jsfiddle.net/5kJjM/](http://jsfiddle.net/5kJjM/) （单击中间 div）

```
var node = document.querySelector('#remove-me');

node.addEventListener('click', function(evt) {
  this.classList.add('clicked');
}, false);

node.addEventListener('webkitTransitionEnd', function(evt) {
  document.querySelector('#flexbox').removeChild(this);
}, false);
```

```
#flexbox {
  display: -webkit-flex;
  -webkit-flex-flow: row;
}

.flexed {
  border: 1px solid black;
  height: 100px;
  -webkit-flex: 1 0 auto;
  -webkit-transition: -webkit-flex 250ms linear;
}

.clicked {
  -webkit-flex: 0 0 auto;
}
```

```
<div id="flexbox">
  <div class="flexed"></div>
  <div class="flexed" id="remove-me"></div>
  <div class="flexed"></div>
</div>
```

**编辑**：为了进一步澄清，当你删除一个节点时，你应该将它的 flex 设置为 0，然后从 DOM 中删除它。添加节点时，使用 flex:0 添加它，然后将其转换为 flex:1

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-12-04T17:35:39.183

我已经完成了一个代码笔，当您删除一个元素时会为元素设置动画，看看： [https ://codepen.io/MauriciAbad/pen/yLbrpey](https://codepen.io/MauriciAbad/pen/yLbrpey)

## HTML

```
<div class="container">
    <div></div>
    <div></div>
    ... more elements ...
</div> 
```

## CSS

```
.container{
    display: flex;
    flex-wrap: wrap;
}
.container > * {
    transform-origin: left top;
} 
```

## 打字稿

如果您想要 JavaScript，只需`: Anything`从函数的签名和顶部的界面中删除 。

```
interface FlexItemInfo {
  element: Element

  x: number
  y: number
  width: number
  height: number
}

const container = document.querySelector('.container')
for (const item of container.children) {
  item.addEventListener('click', () => {
    removeFlexItem(container, item)
  })
}

function removeFlexItem(container: Element, item: Element): void {
  const oldFlexItemsInfo = getFlexItemsInfo(container)
  container.removeChild(item)
  const newFlexItemsInfo = getFlexItemsInfo(container)

  aminateFlexItems(oldFlexItemsInfo, newFlexItemsInfo)
}

function getFlexItemsInfo(container: Element): FlexItemInfo[] {
  return Array.from(container.children).map((item) => {
    const rect = item.getBoundingClientRect()
    return {
      element: item,
      x: rect.left,
      y: rect.top,
      width: rect.right - rect.left,
      height: rect.bottom - rect.top,
    }
  })
}

function aminateFlexItems(
  oldFlexItemsInfo: FlexItemInfo[],
  newFlexItemsInfo: FlexItemInfo[]
): void {
  for (const newFlexItemInfo of newFlexItemsInfo) {
    const oldFlexItemInfo = oldFlexItemsInfo.find(
      (itemInfo) => itemInfo.element === newFlexItemInfo.element
    )

    const translateX = oldFlexItemInfo.x - newFlexItemInfo.x
    const translateY = oldFlexItemInfo.y - newFlexItemInfo.y
    const scaleX = oldFlexItemInfo.width / newFlexItemInfo.width
    const scaleY = oldFlexItemInfo.height / newFlexItemInfo.height

    newFlexItemInfo.element.animate(
      [
        {
          transform: `translate(${translateX}px, ${translateY}px) scale(${scaleX}, ${scaleY})`,
        },
        { transform: 'none' },
      ],
      {
        duration: 250,
        easing: 'ease-out',
      }
    )
  }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-06-05T08:07:04.943

我不小心让它以一种简单的方式工作。基本上，你设置`width:0;flex-grow:1`，当然添加`transition:all 2s;`，就是这样。这是一个奇怪的黑客。

[看到它工作](https://codepen.io/balvin/pen/gKrXdM)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-04-06T13:14:05.727

对@skyline3000 和@chris-nicola 解决方案的另一种改编：http: [//jsfiddle.net/2gbPg/2/](http://jsfiddle.net/2gbPg/2/)

您可以简单地设置动画`max-width`（或`max-height`根据需要），`0`在移除和`100%`插入时设置动画。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-11T17:15:40.223

我一直在尝试为我的 flexbox 中的行设置动画。仅通过 css 是不可能的。所以我用一点 javascript 和一个额外的父级来为我的 flexbox 行做这件事。

HTML：

```
<div class="outer-container">
  <div class="inner-container">
    <div class="row">Row number 1</div>
  </div>
</div>

<button id="add">Add one more item</button> 
```

CSS：

```
.row{
  height : 40px;
  width : 200px;
  border: 1px solid #cecece;
  text-align : center;
  padding-top : 20px;
}

.outer-container {
  height : 500px;
  border : 1px solid blue;
  width : 250px;
  display: flex;
  justify-content : center;
  align-items: center;
}

.inner-container { 
  height : 42px;
  transition : height 0.3s;
 }

button {
  width : 200px;
  height: 30px;
  margin-left : 80px;
  margin-top : 10px;
} 
```

Javascript：

```
(() => {
    let count = 1;
    document.querySelector("#add").addEventListener('click', () => {
        const template = document.createElement('div');
        count += 1;
        template.textContent = `Row number ${count}`;
        template.className = 'row';

        const innerContainer = document.querySelector('.inner-container');
        innerContainer.appendChild(template);
        innerContainer.style.height = `${innerContainer.clientHeight + 42}px`;
    })
})(); 
```

工作演示：[https ://jsfiddle.net/crapbox/dnx654eo/1/](https://jsfiddle.net/crapbox/dnx654eo/1/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-27T14:24:48.457

您可以使用 MutationObserver 在添加或删除子项时启动动画。

优点是，您不必修改任何现有代码，包括 Angular、React 或 Blazor 等 SPA 框架（甚至服务器端）。您不必添加人工动画类。

它应该适用于任何布局，而不仅仅是 flexbox。

以下是基于[Maurici Abad](https://stackoverflow.com/a/53618561/475727)使用 MutationObserver 的回答：

```
//add this to your project

function animateChildren(container) {
  function getFlexItemsInfo(container) {
    return Array.from(container.children).map((item) => {
      const rect = item.getBoundingClientRect()
      return {
        element: item,
        x: rect.left,
        y: rect.top,
        width: rect.right - rect.left,
        height: rect.bottom - rect.top,
      }
    })
  }

  function animateFlexItems(oldFlexItemsInfo,  newFlexItemsInfo) {
    for (const newFlexItemInfo of newFlexItemsInfo) {
      const oldFlexItemInfo = oldFlexItemsInfo.find(e => e.element == newFlexItemInfo.element);

      if (!oldFlexItemInfo) {
        continue; 
      }

      const translateX = oldFlexItemInfo.x - newFlexItemInfo.x
      const translateY = oldFlexItemInfo.y - newFlexItemInfo.y
      const scaleX = oldFlexItemInfo.width / newFlexItemInfo.width
      const scaleY = oldFlexItemInfo.height / newFlexItemInfo.height

      newFlexItemInfo.element.animate(
        [
          {
            transform: `translate(${translateX}px, ${translateY}px) scale(${scaleX}, ${scaleY})`,
          },
          { transform: 'none' },
        ],
        {
          duration: 250,
          easing: 'ease-out',
        }
      )
    }
  }

  let oldFlexItemsInfo = getFlexItemsInfo(container);
  // Callback function to execute when mutations are observed
  const childListMutationCallback = function(mutationsList, observer) {
      const newFlexItemsInfo = getFlexItemsInfo(container);
      if (oldFlexItemsInfo) {
        animateFlexItems(oldFlexItemsInfo, newFlexItemsInfo);  
      }
      oldFlexItemsInfo = newFlexItemsInfo;
  };

  new MutationObserver(childListMutationCallback).observe(container, { childList: true });
}

const container = document.querySelector('.container');
animateChildren(container);

//emulate existing adding/removing items
document.addEventListener('click', e => {
  const item = e.target.closest('.item');
  if (item) {
    e.target.matches('.btn-close') 
      ? container.removeChild(item)
      : container.prepend(item.cloneNode(true));
  }
});
```

```
.container {
  display: flex;
  flex-wrap: wrap;
  gap: 2em;
  width: 100%;
  overflow: none;
}
.container>* {
  transform-origin: left top;  
}

.container>* {
  flex-grow: 1;
  max-width: 50%;
  min-width: 20%;
  border-radius: 5px;
  height: 5em;
  margin: 0.5rem;
  box-shadow: 0 1px 8px rgba(0,0,0,0.3);
  padding: 1em;
  background: white;
}

.btn-close:after {
  padding: .25em .25em;
  content: 'X';
  border: solid 1px
}
```

```
<div class="container">
  <div class="item"> 
    Item 1 <span class="btn-close"></span>
  </div>
  <div class="item" style="background: #f64f59"> 
    Item 2 <span class="btn-close"></span>
  </div>
  <div class="item"  style="background: #c471ed ">
    Click to add <span class="btn-close"></span>
  </div>
</div>
```

# user-interface - 当 *DO* 我们在生产系统上显示 StackTraces

> ID：11106880
> 
> 赞同：6
> 
> 时间：2012-06-19T18:14:40.603
> 
> 标签：user-interface, exception-handling, stack-trace

***在什么特定情况下可以（甚至推荐）在生产系统上向最终用户展示他们的 UI 的 StackTrace***。

有大量的网站和 SO 文章，人们询问是否应该向最终用户显示 StackTraces。毫不奇怪，答案是响亮的**“不！”** .

例如：

*   [Java：我们通常不希望向用户显示错误堆栈跟踪中的哪些信息？](https://stackoverflow.com/q/10954166/573083)
*   [java : 在生产环境中使用 printStackTrace](https://stackoverflow.com/q/8757046/573083)
*   [我应该打印异常堆栈跟踪吗？](https://stackoverflow.com/a/223344/573083)
*   [何时为捕获的异常记录堆栈跟踪](https://stackoverflow.com/q/7361201/573083)

然而，我最近与另一位开发人员进行了一次对话，在那里我花了很多时间来解释为什么不应该通过 UI 将堆栈跟踪传递给用户。那次讨论让我回过头来重新审视我的一个基本（绝对）租户——*用户永远不会在生产中看到原始的 StackTrace*。

我找不到一个*令人信服*的理由。但是，我确信有有效的用例，我想要么理解它，要么愿意继续坚持我的***绝对***租户。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T18:35:39.843

你没有——它们对用户没有帮助。

用户收到消息。开发人员可以在日志、电子邮件、队列中获得堆栈跟踪，也可能是在本地/内部运行时呈现的 HTML 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T18:21:57.297

在这里，在我的办公室有许多不同的内部项目，我受益于看到其他部门的同事在我的程序崩溃时看到的堆栈跟踪。他们只是没有恶意或知识渊博，无法知道发生了什么，否则他们会和我一起工作。它还给了我一个窗口期来询问用户可能确定他们在做什么（虽然它仍然在他们的脑海中是新鲜的）。如果堆栈跟踪已被抑制或其他一些漂亮（但隐藏）的错误处理已经到位，那么除了通过堆栈跟踪之外，我可能不知道错误是如何发生的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T09:56:46.467

The stack trace should be available to the user when the application crashes, because a stack trace usually identifies the bug that causes the crash, and there might be a work around available. The work-around obviously works only if the crash is caused by the bug the work-around is for - otherwise attempting the work-around is just wasted time.

A crash might also be caused by a bug in something that the user needs to update, e.g. graphics driver. In this case, the stack trace usually contains the name of the graphics driver, such as atiumdag.dll.

Let's imagine:

No stack trace:

Customer: I get a message box saying "the program stopped working".

Support: Try this.

Customer: Nope, doesn't help.

Support: Try this.

Customer: Nope, doesn't help.

Support: Try this.

Customer: Nope, doesn't help.

Support: Try this.

Customer: Nope, doesn't help.

With stack trace:

Customer: I get a message box saying "the program stopped working".

Support: Click on the "details" button and send me the stack trace.

Customer: (sends the stack trace)

Support: This is caused by a known bug in the application, which is triggered by feature X when the application is installed in a non-default path. It will be fixed in the next version, which is released next year. However, you can work around it by either disabling feature X or re-installing the application in the default installation path.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T15:52:36.797

in open source projects or where you have debug mode turned on. Maybe the user is using the application to learn how the technology works to make a similar app, or maybe they plan on contributing to it themselves.

There are many different types of users. I think allowing them to turn this option on is neat but it shouldn't be so easy where your average joe might turn on stacktraces by accident.

# android-activity - 将 SalesForce Chatter 数据迁移到 Dynamics CRM 2011 中的活动源

> ID：11106882
> 
> 赞同：3
> 
> 时间：2012-06-19T18:14:43.267
> 
> 标签：android-activity, migration, salesforce, feed, microsoft-dynamics

是否有人对将 Chatter 数据迁移到 MS Dynamics CRM 2011（本地）中的活动源的可行性/最佳方法有任何见解或经验？能够在整个提要历史记录中重新关联附件将是理想的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:21:09.820

最好的方法是使用诸如 Informatica 之类的 ETL 工具或将 Chatter 数据链接到 MS Dynamics 中的活动源的类似工具。然后，您有几个同步数据的选项 - 实时（出于性能原因不推荐）、每日同步（最好在晚上）或手动同步。

您可以购买 ETL 的云版本或本地版本。我知道的一些工具是：

1.  信息学
2.  塔伦德
3.  甲骨文

列表未按优先顺序排列。

阿努普

# ruby-on-rails - Rails 3局部变量未传递给部分

> ID：11106883
> 
> 赞同：3
> 
> 时间：2012-06-19T18:14:51.163
> 
> 标签：ruby-on-rails, partial-views, partial, local-variables

有谁知道为什么我在将本地人传递给 Ruby 部分时遇到以下问题？

我的部分（摘录）：

```
 <div class="control-group">
   <%= field_prefix %>
   <%= label_tag t("shared.email"),nil,:class => "control-label" %>
   <div class="controls">
   <%= email_field_tag "[email]", contact.nil? ? "" : contact[:email]  %>
   </div>
 </div> 
```

我的部分包含在以下方式中：

```
 <%= render "shared/contact", :field_prefix => 123 , :contact => @person.contact %> 
```

此外，如果我这样做它不会工作，我通过的第二个本地（field_prefix）不会通过：

```
 <%= render :partial => "shared/contact", :locals => {:field_prefix => 123 , :contact => @person.contact } %> 
```

我总是收到无法识别局部变量“field_prefix”的错误消息：

> #<#:0x5837418> 的未定义局部变量或方法“field_prefix”

它来自局部视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:32:54.310

大多数时候我真的很喜欢 Ruby，但有时它非常烦人和神秘 :-/

我必须重新启动我的 IDE (RubyMine) 和集成服务器才能使其正常工作而无需更改任何源。

当然，昨天我第一次尝试时也保存了源代码，但在这个 IDE 中似乎有缓存或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T02:49:37.310

只是一个健全的检查，你确定你正在看的部分是正确的吗？当这发生在我身上时，我以为我正在查看正确的文件，最终意识到我正在查看错误的代码。

# scala - Scala 双倍和精度

> ID：11106886
> 
> 赞同：133
> 
> 时间：2012-06-19T18:14:55.240
> 
> 标签：scala, double, truncate, rounding

是否有可以截断或舍入 Double 的函数？在我的代码中，我想要一个数字，例如：`1.23456789`四舍五入到`1.23`

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2012-06-19T18:22:27.870

您可以使用[`scala.math.BigDecimal`](http://www.scala-lang.org/api/current/scala/math/BigDecimal.html)：

```
BigDecimal(1.23456789).setScale(2, BigDecimal.RoundingMode.HALF_UP).toDouble 
```

还有许多其他[舍入模式](http://www.scala-lang.org/api/current/scala/math/BigDecimal$$RoundingMode$.html)，遗憾的是目前没有很好的文档记录（尽管[它们的 Java 等价物是](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/RoundingMode.html)）。

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2012-06-19T18:56:21.737

这是另一个没有 BigDecimals 的解决方案

截短：

```
(math floor 1.23456789 * 100) / 100 
```

圆形的：

```
(math rint 1.23456789 * 100) / 100 
```

或者对于任何双精度 n 和 p：

```
def truncateAt(n: Double, p: Int): Double = { val s = math pow (10, p); (math floor n * s) / s } 
```

可以对舍入函数进行类似的操作，这次使用柯里化：

```
def roundAt(p: Int)(n: Double): Double = { val s = math pow (10, p); (math round n * s) / s } 
```

这更可重用，例如，在四舍五入金额时，可以使用以下内容：

```
def roundAt2(n: Double) = roundAt(2)(n) 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2013-01-10T20:02:51.573

由于还没有人提到`%`运营商，所以来了。它只进行截断，您不能依靠返回值来避免浮点不准确，但有时它很方便：

```
scala> 1.23456789 - (1.23456789 % 0.01)
res4: Double = 1.23 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-06-18T20:17:26.300

怎么样 ：

```
 val value = 1.4142135623730951

//3 decimal places
println((value * 1000).round / 1000.toDouble)

//4 decimal places
println((value * 10000).round / 10000.toDouble) 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-06-19T19:29:18.493

编辑：修复了@ryryguy 指出的问题。（谢谢！）

如果你想让它快点，Kaito 有正确的想法。 `math.pow`不过速度很慢。对于任何标准用途，最好使用递归函数：

```
def trunc(x: Double, n: Int) = {
  def p10(n: Int, pow: Long = 10): Long = if (n==0) pow else p10(n-1,pow*10)
  if (n < 0) {
    val m = p10(-n).toDouble
    math.round(x/m) * m
  }
  else {
    val m = p10(n).toDouble
    math.round(x*m) / m
  }
} 
```

如果您在`Long`（即 18 位）范围内，这大约快 10 倍，因此您可以在 10^18 和 10^-18 之间的任何地方四舍五入。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-05-23T22:55:04.517

对于那些有兴趣的人，这里有一些时间建议的解决方案......

```
Rounding
Java Formatter: Elapsed Time: 105
Scala Formatter: Elapsed Time: 167
BigDecimal Formatter: Elapsed Time: 27

Truncation
Scala custom Formatter: Elapsed Time: 3 
```

截断是最快的，其次是 BigDecimal。请记住，这些测试是在运行 norma scala 执行时完成的，而不是使用任何基准测试工具。

```
object TestFormatters {

  val r = scala.util.Random

  def textFormatter(x: Double) = new java.text.DecimalFormat("0.##").format(x)

  def scalaFormatter(x: Double) = "$pi%1.2f".format(x)

  def bigDecimalFormatter(x: Double) = BigDecimal(x).setScale(2, BigDecimal.RoundingMode.HALF_UP).toDouble

  def scalaCustom(x: Double) = {
    val roundBy = 2
    val w = math.pow(10, roundBy)
    (x * w).toLong.toDouble / w
  }

  def timed(f: => Unit) = {
    val start = System.currentTimeMillis()
    f
    val end = System.currentTimeMillis()
    println("Elapsed Time: " + (end - start))
  }

  def main(args: Array[String]): Unit = {

    print("Java Formatter: ")
    val iters = 10000
    timed {
      (0 until iters) foreach { _ =>
        textFormatter(r.nextDouble())
      }
    }

    print("Scala Formatter: ")
    timed {
      (0 until iters) foreach { _ =>
        scalaFormatter(r.nextDouble())
      }
    }

    print("BigDecimal Formatter: ")
    timed {
      (0 until iters) foreach { _ =>
        bigDecimalFormatter(r.nextDouble())
      }
    }

    print("Scala custom Formatter (truncation): ")
    timed {
      (0 until iters) foreach { _ =>
        scalaCustom(r.nextDouble())
      }
    }
  }

} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-06-20T09:39:14.570

您可以使用隐式类：

```
import scala.math._

object ExtNumber extends App {
  implicit class ExtendedDouble(n: Double) {
    def rounded(x: Int) = {
      val w = pow(10, x)
      (n * w).toLong.toDouble / w
    }
  }

  // usage
  val a = 1.23456789
  println(a.rounded(2))
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-02-21T12:57:58.450

`f`使用 Scala插值器实际上很容易处理- [https://docs.scala-lang.org/overviews/core/string-interpolation.html](https://docs.scala-lang.org/overviews/core/string-interpolation.html)

假设我们要四舍五入到小数点后 2 位：

```
scala> val sum = 1 + 1/4D + 1/7D + 1/10D + 1/13D
sum: Double = 1.5697802197802198

scala> println(f"$sum%1.2f")
1.57 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-05-17T14:14:14.933

最近，我遇到了类似的问题，我使用以下方法解决了它

```
def round(value: Either[Double, Float], places: Int) = {
  if (places < 0) 0
  else {
    val factor = Math.pow(10, places)
    value match {
      case Left(d) => (Math.round(d * factor) / factor)
      case Right(f) => (Math.round(f * factor) / factor)
    }
  }
}

def round(value: Double): Double = round(Left(value), 0)
def round(value: Double, places: Int): Double = round(Left(value), places)
def round(value: Float): Double = round(Right(value), 0)
def round(value: Float, places: Int): Double = round(Right(value), places) 
```

我使用[了这个](https://stackoverflow.com/questions/2808535/round-a-double-to-2-significant-figures-after-decimal-point)SO 问题。对于 Float\Double 和implicit\explicit 选项，我有几个重载函数。请注意，在重载函数的情况下，您需要明确提及返回类型。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-02-01T02:43:07.923

这些在这个线程中是很好的答案。为了更好地展示差异，这里只是一个例子。我在工作期间将它放在这里的原因是 b/c 要求数字不是一半：

```
 import org.apache.spark.sql.types._
    val values = List(1.2345,2.9998,3.4567,4.0099,5.1231)
    val df = values.toDF
    df.show()
    +------+
    | value|
    +------+
    |1.2345|
    |2.9998|
    |3.4567|
    |4.0099|
    |5.1231|
    +------+

    val df2 = df.withColumn("floor_val", floor(col("value"))).
    withColumn("dec_val", col("value").cast(DecimalType(26,2))).
    withColumn("floor2", (floor(col("value") * 100.0)/100.0).cast(DecimalType(26,2)))

    df2.show()
+------+---------+-------+------+
| value|floor_val|dec_val|floor2|
+------+---------+-------+------+
|1.2345|        1|   1.23|  1.23|
|2.9998|        2|   3.00|  2.99|
|3.4567|        3|   3.46|  3.45|
|4.0099|        4|   4.01|  4.00|
|5.1231|        5|   5.12|  5.12|
+------+---------+-------+------+ 
```

`floor`功能层到小于当前值的最大整数。`DecimalType`默认情况下将启用`HALF_UP`模式，而不仅仅是切割到您想要的精度。如果您想在不使用模式的情况下切割到一定的精度`HALF_UP`，您可以使用上述解决方案（或使用`scala.math.BigDecimal`（您必须明确定义舍入模式）。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-01-10T15:11:23.613

如果您关心性能，我不会使用 BigDecimal。BigDecimal 将数字转换为字符串，然后再次解析：

```
 /** Constructs a `BigDecimal` using the decimal text representation of `Double` value `d`, rounding if necessary. */
  def decimal(d: Double, mc: MathContext): BigDecimal = new BigDecimal(new BigDec(java.lang.Double.toString(d), mc), mc) 
```

[正如Kaito](https://stackoverflow.com/a/11107546/2245646)建议的那样，我将坚持使用数学运算。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-02-04T14:19:47.727

由于问题专门指定了双精度数的舍入，这似乎比处理大整数或过多的字符串或数字运算要简单得多。

```
"%.2f".format(0.714999999999).toDouble 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-07-27T17:04:54.327

我认为以前的答案是：

*   完全错误：例如使用 math.floor 不适用于负值..
*   不必要的复杂。

这是基于@kaito 回答的建议（我还不能发表评论）：

```
def truncateAt(x: Double, p: Int): Double = {
    val s = math.pow(10, p)
    (x * s).toInt / s
} 
```

toInt 将适用于正值和负值。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-07-09T16:52:14.627

有点奇怪但很好。我使用 String 而不是 BigDecimal

```
def round(x: Double)(p: Int): Double = {
    var A = x.toString().split('.')
    (A(0) + "." + A(1).substring(0, if (p > A(1).length()) A(1).length() else p)).toDouble
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-04-08T11:53:49.747

你可以这样做：`Math.round(<double precision value> * 100.0) / 100.0` 但 Math.round 是最快的，但它在小数位数非常多（例如 round(1000.0d, 17)）或大整数部分（例如 round(90080070060.1d, 9) ）。

使用 Bigdecimal 它有点低效，因为它将值转换为字符串但更轻松： `BigDecimal(<value>).setScale(<places>, RoundingMode.HALF_UP).doubleValue()` 使用您对舍入模式的偏好。

如果您很好奇并想了解更多详细信息为什么会发生这种情况，您可以阅读以下内容： [![在此处输入图像描述](../Images/40ab089aef7dc48ef386ec22edcb3d26.png)](https://i.stack.imgur.com/CFM82.png)

# mysql - 在 MySQL 的 LIKE Query 中使用 OR 比较多个字段

> ID：11106888
> 
> 赞同：20
> 
> 时间：2012-06-19T18:15:04.893
> 
> 标签：mysql, sql-like

我一直认为您可以`OR`在`LIKE`语句中使用来查询 MySQL 中的内容。因此，如果我想将一行中的多个字段与 1 个关键字或术语进行比较：

```
SELECT * FROM MyTable WHERE Column1 OR Column2 LIKE '%keyword%'; 
```

如果我有一组单词要比较：

```
SELECT * FROM MyTable WHERE Column1 OR Column2 LIKE '%keyword1%' 
AND Column1 OR Column2 LIKE '%keyword2%'; 
```

但是，我不相信语法是正确的。除了以下内容之外，是否还有一种有效的方法来编写此内容：

```
SELECT * FROM MyTable WHERE Column1 LIKE '%keyword1%' OR Column2 LIKE 
'%keyword1%' AND Column1 LIKE '%keyword2%' OR Column2 LIKE '%keyword2%'; 
```

我这样做对吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-19T18:18:52.303

用这个：：

```
SELECT * FROM MyTable WHERE (Column1 LIKE '%keyword1%' OR Column2 LIKE 
'%keyword1%') AND (Column1 LIKE '%keyword2%' OR Column2 LIKE '%keyword2%'); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-19T18:29:11.913

最接近您想要的语法是：

```
SELECT * FROM MyTable
WHERE (CONCAT(Column1, Column2) LIKE '%keyword1%')
AND (CONCAT(Column1, Column2) LIKE '%keyword2%') 
```

注意：搜索字符串开头的“%”排除了索引的使用。如果有大量记录要搜索，最好重新考虑实现。

如果您不能保证每列都不为 NULL，请改用 CONCAT_WS：

```
SELECT * FROM MyTable
WHERE (CONCAT_WS("-", Column1, Column2) LIKE '%keyword1%')
AND (CONCAT_WS("-", Column1, Column2) LIKE '%keyword2%') 
```

此 CONCAT_WS 解决方案还具有可能的好处，即如果您选择的分隔符从未出现在关键字中，则可以确保仅在 Column1 或 Column2 中匹配您的“关键字”。

# java - int、double、char、long、float 等类型都以小写字母开头，String 类型除外。为什么？

> ID：11106898
> 
> 赞同：3
> 
> 时间：2012-06-19T18:15:44.100
> 
> 标签：java

我刚开始用 Java 编程，我注意到 String 是唯一以大写字母开头的类型。

这背后有什么原因吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T18:19:20.993

按照惯例，以大写字母开头的 Java 类型是 Objects，而以小写字母开头的 Java 类型是原始类型。

原语不能附加一个方法，因为没有对象来保存该方法。出于同样的原因，原语也不能被子类化。

原语也可以提升，这是对象无法做到的，因为提升以不兼容面向对象的方式改变了原语的有效类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T18:16:41.913

`String`是一个`Object`并且在 java 中，将类名 AbcDef 模式化是一种标准的命名实践

**看**

*   [Java 命名约定](http://en.wikipedia.org/wiki/Naming_convention_%28programming%29#Java)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T18:16:26.233

因为[`String`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)是一个类，其余只是原始数据类型，并且[命名约定](http://java.about.com/od/javasyntax/a/nameconventions.htm)指定类名必须采用 PascalCase。

此外，对应于原始数据类型，存在[Wrapper](http://en.wikipedia.org/wiki/Primitive_wrapper_class)类，它为这些原始数据类型提供对象方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T18:19:00.960

> 所有基本类型都以小写字母
> 开头 所有 Java 类都以大写字母开头

# javascript - jQuery Rotator 是按字母顺序排列的，我怎样才能让它在我的主页上随机化？

> ID：11106903
> 
> 赞同：0
> 
> 时间：2012-06-19T18:16:18.340
> 
> 标签：javascript, html, css, rotator

我怎样才能让我的旋转器上的图像是随机的？下面是我正在处理的网站的链接，主页上的旋转器当前按字母顺序显示，我希望它是随机的。

[http://www.greatrestaurantsmagazine.com/](http://www.greatrestaurantsmagazine.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:22:57.213

打开您的 dissolve.js 并进行以下更改。

这里的关键是随机化你的下一张图片，显然是下面的代码：

[你可以在这里](http://www.alohatechsupport.net/downloads/image-rotator.zip)下载一个小演示

确保您遵循代码中的[这些说明](http://www.alohatechsupport.net/webdesignmaui/maui-web-site-design/easy_jquery_auto_image_rotator.html)

```
//Un-comment the 3 lines below to get the images in random order

var sibs = current.siblings();
var rndNum = Math.floor(Math.random() * sibs.length );                      
var next = $( sibs[ rndNum ] );

And then below your document ready section will look like:

$(document).ready(function() {      
    //Load the slideshow
    $('div.rotator ul').shuffle();
    theRotator();
    $('div.rotator').fadeIn(1000);
    $('div.rotator ul li').fadeIn(1000); // tweek for IE
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:21:09.993

您可以执行一些操作，例如将列表移动到文档片段，然后使用随机发生器将它们一一添加，同时检查它尝试添加的项目是否尚未添加。

# sas - SAS 命令行 - 如何避免 PROC GRAPH 窗口

> ID：11106906
> 
> 赞同：1
> 
> 时间：2012-06-19T18:16:24.317
> 
> 标签：sas

当我在 Windows XP 或 Windows 7 机器上的命令行上运行 SAS 9.2 时，我遇到了这个问题。

它涉及利用 SAS 中的 GRAPH 功能的过程。考虑下面这个简单的程序（称之为'test.sas'）：

```
ods pdf file='c:\test.pdf';
data ds1;
    do x = 1 to 100;
        output;
    end;
run;

proc univariate data=ds1;
    var x;
    histogram; /* causes PROC Graph window to open 
                  when SAS is invoked from command line */
run;

ods pdf close; 
```

当我***使用命令行***（即 sas -sysin test.sas）运行 sas 并且当 SAS 在 PROC Univariate 步骤中生成直方图时，它会打开一个 PROC GRAPH 窗口，如果我不单击该窗口，它将无法继续。由于我使用 SAS ODS 将输出捕获到 PDF 文档中，因此不需要打开 PROC GRAPH 窗口。另一个缺点是，在我单击 PROC Graph 窗口之前，SAS 执行不会继续。

有没有什么方法可以在命令行上运行该程序而无需 SAS 打开 PROC GRAPH 窗口并在每次请求直方图时等待我的输入？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:40:55.577

是的，您只需要关闭 LISTING 目的地。添加“ods列表关闭；” 到程序的开头。

# iphone - 使用 iPhone 串行连接（引脚 12 和 13）

> ID：11106910
> 
> 赞同：6
> 
> 时间：2012-06-19T18:16:39.900
> 
> 标签：iphone, xcode4, serial-port, arduino, jailbreak

好的，所以我以前从未对串行连接做过任何事情。但...

我刚得到一个 Arduino，我正试图用它来远程发射模型火箭。我有一个 5 伏继电器，我可以用 Arduino 的数字输出来控制它。

现在，我想将我的 iPhone 的 Tx 连接到 Arduino 的 Rx，反之亦然。我会从 spark fun 购买 iPhone 分线板，这样我就可以将它连接到 Arduino。(http://www.sparkfun.com/products/10645) 我当时在想一些事情：当手机收到来自某个号码的短信或电话，或者甚至只是一个蓝牙信号时，它会告诉阿杜诺。但这些只是想法。

我怎样才能真正从我的 iPhone 发送信号？是否有 xCode 库可以做到这一点？我的手机已经越狱，所以我对其他非苹果发送信号的方式持开放态度。但我是一个新手程序员。

谢谢你。

PS 我是 Stack Overflow 的新手，如果你能帮助我，我将不胜感激。我第一次发布问题时有人告诉我它不在正确的网站上。所以请多多包涵。

编辑＃1：哈哈，我刚读完这个，听起来像是恐怖电影中的手机炸弹。我发誓那不是我正在做的。看看我的头像就知道了。

编辑#2：我还有一个用于 Arduino 的蓝牙加密狗。但老实说，我不知道如何将它与任何东西连接起来，它来自中国 10 美元，所以我想我会买它以保持我的选择余地。但是，无论如何，将 iPhone 插入 Arduino 真的很酷。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T19:05:33.620

您可以购买[适用于 iOS 的 Redpark 串行电缆，](http://www.makershed.com/Redpark_Serial_Cable_for_iOS_p/msrp01.htm)通过 RS-232 将 iPhone 连接到您的 Arduino 板。

这本书似乎也很有帮助：[iOS Sensor Apps with Arduino](http://shop.oreilly.com/product/0636920021179.do)

**编辑**：Redpark 常见问题解答：[http ://redpark.com/c2db9_FAQs.html](http://redpark.com/c2db9_FAQs.html)

此串行电缆有一个可用的 SDK。

尝试直接连接到扩展坞连接器时，您将无法编写通信软件！除非您的 Arduino 板具有用于坞站连接器通信的特殊解码芯片，否则外部附件框架不会帮助您。

玩得开心！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T18:49:17.073

我认为您需要做的就是利用该[`External Accessory`框架](http://developer.apple.com/library/ios/#documentation/ExternalAccessory/Reference/ExternalAccessoryFrameworkReference/_index.html)。我不确定它对您的效果如何，该库旨在与 MFi 认可的配件进行通信。我真的很想听听您的结果如何，我将使用分线板进行自己的实验

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T19:01:59.333

我和你在一条类似的船上，我已经使用 podbreakout 成功构建了自己的串行电缆，并实现了一个支持读/写的串行类。我可以确认我已经阅读了工作，因为我已经使用我的 RFID 阅读器对其进行了测试。我正在编写代码，该代码将从 iPhone 向 Arduino 发送命令，然后让 Arduino 根据命令执行任务。

这是我在iDevice serial com上整理的一个文件，

[https://docs.google.com/document/d/1Yi9_hcw8XSyYNCG2OJT9oHlTG-dC-Dnuc58VIULa81Q/edit?usp=sharing](https://docs.google.com/document/d/1Yi9_hcw8XSyYNCG2OJT9oHlTG-dC-Dnuc58VIULa81Q/edit?usp=sharing)

并且可以在我正在处理的项目中看到串行类。

[https://github.com/ipatch/KegCop](https://github.com/ipatch/KegCop)

# java - Jersey：如何获取资源的 URI？

> ID：11106911
> 
> 赞同：4
> 
> 时间：2012-06-19T18:16:40.213
> 
> 标签：java, uri, jersey-1.0

[ResourceContext.matchResource(URI)](http://jersey.java.net/nonav/apidocs/1.5/jersey/com/sun/jersey/api/core/ResourceContext.html#matchResource%28java.net.URI%29)允许我将 URI 转换为资源，但我如何从资源转到其 URI？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T19:31:12.407

回答我自己的问题：

```
@Context UriInfo uriInfo;

public URI getUri()
{
  return uriInfo.getBaseUriBuilder().path(MyResource.class).build();
} 
```

# objective-c - iOS ARC 当两个对象需要指向同一事物的指针时

> ID：11106916
> 
> 赞同：0
> 
> 时间：2012-06-19T18:16:59.463
> 
> 标签：objective-c, ios, automatic-ref-counting

我正在检查我的代码以确保我的所有属性都具有适当的弱/强修饰符，并且我遇到了这种我不知道该怎么办的情况。请记住，我对 iOS 编程相当陌生。

我有一个普通的 MVC 层次结构，我的控制器在其中创建一个名为`FieldManager`. 我`FieldManager`的控制器使用它来动态创建文本字段。但是，`FieldManager`控制器模型也需要使用它来定期查询管理器以查找有关字段的信息（例如是否需要，是否将其文本大写...等）。

总而言之，我有一个控制器，它创建一个由控制器和控制器模型使用的对象。因此，我不知道是否应该将模型对`FieldManager`弱属性的引用或控制器对它的引用设为弱属性。看来我应该同时制作两个弱属性，否则`FieldManager`会被释放。我应该怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:20:14.207

像这样的东西应该属于你的模型，所以要走的路是拥有一个数据源。

您的控制器要求数据源创建并返回文本字段，数据源联系模型并要求该模型的字段管理器。

这就是我会做的方式......

# c# - Bouncy Castle PGP 解密问题

> ID：11106918
> 
> 赞同：19
> 
> 时间：2012-06-19T18:17:02.100
> 
> 标签：c#, encryption, bouncycastle, pgp, encryption-asymmetric

我有一个使用 Bouncy Castle 进行 PGP 解密的应用程序，它在过去 8 个月左右的时间里运行没有任何问题，而在过去的 2 天里突然出现了一个问题，GetDataStream 方法抛出异常：

异常消息：“错误设置非对称密码”。

内部异常消息：“不是 RSA 密钥”。

```
private static PgpObjectFactory getClearDataStream(PgpPrivateKey privateKey, PgpPublicKeyEncryptedData publicKeyED)
{
    // Exception throws here.
    Stream clearStream = publicKeyED.GetDataStream(privateKey);

    PgpObjectFactory clearFactory = new PgpObjectFactory(clearStream);
    return clearFactory;
} 
```

密钥没有过期，它没有过期日期：

![在此处输入图像描述](../Images/92c73a00ae58bf8b2bea7ef72634850b.png)

我没有对应用程序进行任何更改，我没有触摸按键，所以我不太明白为什么会突然出现问题。有任何想法吗？我还可以使用我在应用程序中加载的相同密钥使用 Kleopatra 手动解密文件。

**更新 1 - 我下载了适用**[于 .NET 的 OpenPGP 库](http://www.didisoft.com/net-openpgp/)的免费试用版，它看起来也可以使用 BouncyCastle，并且使用相同的密钥解密文件没有问题。出于某种原因，我使用已经工作了几个月的 BouncyCastle 进行解密的实现由于某种我无法识别的原因而停止工作。

**更新 2** - 我从上周提取了有效的文件，并且我还下载了 BouncyCastle 的源代码，以便我可以逐步调试并查看异常抛出的位置以及变量在有效文件和一个不起作用的文件。在 PgpPublicKeyEncryptedData 类的 GetDataStream 方法的开头抛出异常：

```
byte[] plain = fetchSymmetricKeyData(privKey); 
```

当我进入此方法时，对于我可以毫无问题地解密的文件，我注意到 keyData.Algorithm 变量设置为“ElGamalEncrypt”，而对于异常抛出的文件，文件 keyData.Algortithm 设置为“RsaGeneral”。为什么这些会有所不同？向我发送文件的公司是否更改了他们的加密方法？BouncyCastle 是否不正确支持这种加密方法？

```
private byte[] fetchSymmetricKeyData(PgpPrivateKey privKey)
{
    IBufferedCipher c1 = GetKeyCipher(keyData.Algorithm);

    try
    {
        c1.Init(false, privKey.Key);
    }
    catch (InvalidKeyException e)
    {
        throw new PgpException("error setting asymmetric cipher", e);
    } 
```

另外，不确定这是否相关，我们密钥的证书类型是 DSA。

![在此处输入图像描述](../Images/3aa1c1da7a1373324c7287470edfe344.png)

**更新 3** - 在给定当前密钥的情况下，我一直无法弄清楚如何解决该问题。我昨天生成了新密钥（类型 DSA），并且使用新密钥问题已经解决。

**更新 4** - 这个问题刚刚再次出现，我上次更新时使用的新密钥。再一次，PgpPublicKeyEncryptedData 类中的 keyData.Algorithm 现在被“RsaGeneral”而不是“ElGamalEncrypt”看到。为什么算法属性会改变？加密文件的人是否在改变某些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:47:10.507

这可能很重要（来源：[http](http://www.opensourcejavaphp.net/csharp/itextsharp/PgpPublicKeyEncryptedData.cs.html) ://www.opensourcejavaphp.net/csharp/itextsharp/PgpPublicKeyEncryptedData.cs.html ）：

它解释了您的 keyData.Algorithm 的价值不同，但为什么我仍然不确定。很可能是输入文件。它可能不同（客户端使用不同的密钥？）

```
private static IBufferedCipher GetKeyCipher(
            PublicKeyAlgorithmTag algorithm)
        {
            try
            {
                switch (algorithm)
                {
                    case PublicKeyAlgorithmTag.RsaEncrypt:
                    case PublicKeyAlgorithmTag.RsaGeneral:
                        return CipherUtilities.GetCipher("RSA//PKCS1Padding");
                    case PublicKeyAlgorithmTag.ElGamalEncrypt:
                    case PublicKeyAlgorithmTag.ElGamalGeneral:
                        return CipherUtilities.GetCipher("ElGamal/ECB/PKCS1Padding");
                    default:
                        throw new PgpException("unknown asymmetric algorithm: " + algorithm);
                }
            }
            catch (PgpException e)
            {
                throw e;
            }
            catch (Exception e)
            {
                throw new PgpException("Exception creating cipher", e);
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T09:59:18.053

看起来另一方正在加密其他/不同的密钥。可能您的密钥环也包含 RSA 密钥，但 BouncyCastle 仅使用第一个 (???)。使用 gpg，您可以通过发出 gpg --list-packets YourEncryptedFile.pgp 检查加密文件的内容

之后，将相同的命令应用于“好”文件和您的密钥环，并将密钥标识符与加密文件进行比较。由于您使用的是 DSA 密钥，因此应将文件加密为 ElGamal 子密钥。

# prolog - 将整个文本文件读入 Prolog 变量

> ID：11106921
> 
> 赞同：3
> 
> 时间：2012-06-19T18:17:19.077
> 
> 标签：prolog, swi-prolog, dcg

我很难弄清楚这一点，尽管这是用其他语言做的最简单的事情之一：有没有一种简单的方法可以将文本文件的全部内容读入 Prolog 变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T19:13:52.457

只需使用 DCG 说明您要描述的内容，然后使用 library(pio) 从文件中解析：

```
:- use_module(library(pio)).

all([])     --> [].
all([L|Ls]) --> [L], all(Ls). 
```

例子：

```
?- once(phrase_from_file(all(Ls), 'all.pl')).
Ls = [10, 58, 45, 32, 117, 115, 101, 95, 109|...]. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T22:26:05.040

在[library(readutil)](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.24%27,swi%28%27/doc/Manual/readutil.html%27%29%29)中有一些内置函数：参见[read_file_to_codes](http://www.swi-prolog.org/pldoc/doc_for?object=read_file_to_codes/3)或[read_file_to_terms](http://www.swi-prolog.org/pldoc/doc_for?object=read_file_to_terms/3)

# search - 在文字编辑器中搜索通用号码

> ID：11106923
> 
> 赞同：0
> 
> 时间：2012-06-19T18:17:20.540
> 
> 标签：search, notepad++

在 Notepad++ 或具有类似功能的编辑器中，是否可以轻松搜索包含数字的单词？例如，假设数字用“~”表示，那么如果我在以下文本中搜索“abc~”：

```
abc4
abc not a number 
```

我只会得到第一个词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:26:56.480

使用“正则表达式”搜索模式。如果您只想查找数字组，请使用`\d+`. 如果您希望它选择包含一个或多个数字的整个单词，请使用`\w*\d+\w*`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T18:27:28.990

在“查找”对话框中键入此正则表达式（选择正则表达式选项）：

> \w*\d\w*

# jquery - 骨干在删除时获取上一个/下一个项目？

> ID：11106927
> 
> 赞同：0
> 
> 时间：2012-06-19T18:18:05.780
> 
> 标签：jquery, backbone.js, underscore.js

我有一个带有主干的标准列表视图设置，如下所示。我有一个需要删除项目的实例，这是在删除模型并取消渲染元素的删除函数中完成的。然而，就在销毁/取消渲染之前，我想选择列表中的前一个元素。

有没有一种在骨干网中执行此操作的好方法，现在我唯一能想到的就是使用一些 jQuery 来实现，但我想知道是否有办法在骨干网内部执行 prev/next。还是在附加列表项时需要手动设置？

```
App = (function(Backbone, _){
    var Item = Backbone.Model.extend(
    {
        defaults:
        {
            part1: 'hello',
            part2: 'world'
        }
    });

    var ItemList = Backbone.Collection.extend({
        model: Item
    });

    var ListRow = Backbone.View.extend(
    {
        tagName: 'li',

        initialize: function()
        {
            _.bindAll(this, 'render');
        },

        render: function()
        {
            $(this.el).html('<span>'+this.model.get('part1')+' '+this.model.get('part2')+'</span>');

            return this;
        },

        remove: function()
        {
            //toggle previous element if exists before destory

            $this.model.destroy();
        },

        toggle: function()
        {
            this.$el.addClass('active');            
        }
    });

    var ListView = Backbone.View.extend(
    {
        el: $('#layout_content'),

        events:
        {
            'click button#add': 'addItem'
        },

        initialize: function()
        {
            _.bindAll(this, 'render', 'addItem', 'appendItem');

            this.collection = new TableList();
            this.collection.bind('add', this.appendItem);

            this.counter = 0;
            this.render();
        },

        render: function()
        {
            var self = this;
            $(this.el).append("<button id='add'>Add list item</button>");

            $(this.el).append("<ul></ul>");

            _(this.collection.models).each(function(item){ // in case collection is not empty
                self.appendItem(item);
            }, this);
        },

        addItem: function()
        {
            this.counter++;

            var item = new Item();

            item.set({part2: item.get('part2') + this.counter});

            this.collection.add(item);
        },

        appendItem: function(item)
        {
            var listRow = new ListRow({
                model: item
            });

            $('ul', this.el).append(listRow.render().el);
        }
    });

    var app = function(initialModels)
    {
        this.start = function()
        {
            this.listView = new ListView({collection: new ItemList(initialModels)});
        };
    };

    return app;
})(Backbone, _);

var app = new App([{"id":"95","note_title":"can we find the title"},{"id":"93","note_title":"some title"}]);
app.start(); 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:02:04.143

骨干内部似乎没有直接的方法来实现这一点。我认为，在 Backbone 中实现这一点的最佳方式是，在将每个 listrowview 添加到 listview 并将实例存储在 listview 中的数组中时，为每个 listrowview 提供一个索引号。销毁时，只需`newindex = indexnumber +/- 1`显示驻留在新索引中的视图即可。

# java - Java：在修改集合的内容时迭代集合

> ID：11106931
> 
> 赞同：7
> 
> 时间：2012-06-19T18:18:20.120
> 
> 标签：java, data-structures, iterator, set, concurrentmodification

我希望迭代一个集合，但集合的内容将在其迭代期间修改。我希望在创建迭代器时迭代原始集合，而不是迭代添加到集合中的任何新元素。这怎么可能？这是 set 的默认行为还是我该如何完成？

我能想到的一种方法是从原始集合中获取一个不会被修改的新集合，但这似乎不优雅，必须有更好的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T18:22:08.093

如果您想确保没有看到任何新元素，对我来说拍摄场景快照听起来完全是正确的解决方案。有一些集合[`ConcurrentSkipListSet`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentSkipListSet.html)可以让你继续迭代，但我*看不到*任何关于迭代器在查看新元素方面的行为的保证。

编辑：[`CopyOnWriteArraySet`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArraySet.html)有你需要的要求，但写入很昂贵，这听起来不适合你。

这些是我能看到的唯一套装[`java.util.concurrent`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)，这是此类系列的自然包装。复制仍然可能更简单:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T18:21:56.217

**编辑：**这个答案是为单线程案例设计的，因为我将 OP 的问题解释为避免共修改而不是避免多线程问题。我把这个答案留在这里，以防它对将来使用单线程方法的任何人有用。

没有直接的方法可以做到这一点。然而，一个非常好的选择是有两个集合——你迭代的主集合，以及你插入所有需要添加的新元素的辅助集合。然后，您可以迭代主集，然后在完成后使用`addAll`将所有新元素添加到主集。

例如：

```
Set<T> masterSet = /* ... */

Set<T> newElems = /* ... */
for (T obj: masterSet) {
     /* ... do something to each object ... */
}

masterSet.addAll(newElems); 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T18:22:42.737

制作副本`Set` ***是***优雅的解决方案。

```
Set<Obj> copyOfObjs = new HashSet<Obj>(originalSet);
for(Obj original : originalSet) {
    //add some more stuff to copyOfObjs
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T18:35:39.533

As others have suggested here, there is no optimal solution to what you search for. It all depends on the use-case of your application, or the usage of the set
Since Set is an interface you might define your own DoubleSet class which will implement Set and let's say will use two HashSet fields.
When you retrieve an iterator, you should mark one of these sets to be in "interation only mode", so the add method will add only to the other set

I am still new to Stackoverlflow, so I need to understand how to embed code in my answers :( but in general you should have a class called MySet (Generic of generic type T) implementing Set of generic type T.
You need to implement all the methods, and have two fields - one is called iterationSet and the other is called insertionSet.
You will also have a boolean field indicating if to insert to the two sets or not. When iterator() method is called, this boolean should be set to false, meaning you should insert only to the insertionSet.
You should have a method that will synchronize the content of the two sets once you're done with the iterator.
I hope I was clear

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T18:22:17.340

您可以将[ConcurrentHashMap](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html) 与虚拟键一起使用。或[ConcurrentSkipListSet](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListSet.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T18:25:55.323

现在OP已经明确了要求，解决方案是

1.  在迭代之前复制集合
2.  使用[CopyOnWriteArraySet](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArraySet.html)
3.  编写您自己的自定义代码并尝试比许多聪明人更聪明。

＃1的缺点是即使可能不需要它也总是复制集合（例如，如果在迭代时实际上没有插入）我建议使用选项＃2，除非您证明频繁的插入会导致真正的性能问题。

# facebook - 更改 facebook 立即播放按钮链接

> ID：11106933
> 
> 赞同：1
> 
> 时间：2012-06-19T18:18:31.273
> 
> 标签：facebook, facebook-apps

我在 facebook 上有一个应用程序。

我想将立即播放按钮上的链接更改为不同的。

是否有可能通过任何 API 或配置？

![在此处输入图像描述](../Images/ba26089589c960acaaf0530e91c06eeb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:08:15.117

不，这不可能以这种方式改变 Facebook 的 UI。

您无法控制应用程序/游戏在该视图中的显示方式，也无法更改按钮。

实际上“立即播放”仅出现在非游戏应用程序的游戏中，它将是“立即使用”，请注意措辞可能（并且可能会在某些时候）更改，恕不另行通知。

# php - php autoloader 致命错误：找不到类

> ID：11106935
> 
> 赞同：3
> 
> 时间：2012-06-19T18:18:32.660
> 
> 标签：php, namespaces

我将 PHP ActiveRecord 与我的小型 MVC 框架一起使用，其中包含一个自动加载器。例如，在我的控制器中，我访问模型 Pub::find(64)。

我的问题是 Pub::find(64) 正在继承控制器的命名空间，我得到了错误

```
Fatal error: Class 'App\Controllers\Pub' not found in /home/i554246/public_html/mvc/App/Controllers/Index.php on line 27 
```

Pub 是模块名称。该文件得到包括确定。我可以通过附加 \Pub::find(64) 来解决这个问题，但这对于项目中的新人来说并不是很直观。

有没有办法在不更改该行的情况下停止为 Pub::find(64) 添加命名空间？

索引控制器

```
namespace App\Controllers;

class Index extends \Core\Controller
{
    protected
        $title = 'Home'
        ;

    /**
     * Default action
     */
    public function index()
    {
        // Pass the data to the view to display it
        $this->view->set('testdb', \Pub::find(64));

    }
} 
```

应用程序.php

```
/**
 * Class autoloader
 * @param $className
 * @see https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md
 */
public function autoload($className)
{
    preg_match('/(^.+\\\)?([^\\\]+)$/', ltrim($className, '\\'), $match);

    //Build namespace Autoloading
    $file = str_replace('\\', '/', $match[1]) . str_replace('_', '/', $match[2]) . '.php';

    //Build Model path
    $model = 'App/Models/' . $match[2] . '.php';

    if ( is_file($file) ) {
        require $file;
    }elseif ( is_file($model) ) {
        require $model;
    }

} 
```

模型/Pub.php

```
class Pub extends ActiveRecord\Model
{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T23:16:01.997

看来您不了解名称空间。

由于您使用的是命名空间`App\Controllers`，因此全局命名空间用 表示`\`。因此，如果您不想使用完全限定名称`\Pub`，则必须将 use 声明放在命名空间下方，例如：

```
namespace App\Controllers;
use Pub; 
```

PS：将模型放在命名空间中也是一个好习惯。

# reporting-services - 在报表生成器/SSRS 的每一页上重复一条垂直线

> ID：11106936
> 
> 赞同：2
> 
> 时间：2012-06-19T18:18:34.300
> 
> 标签：reporting-services, ssrs-2008, line, repeat

我希望在报告的每一页上都包含一条垂直线，它从报告正文的顶部到底部延伸。我怎样才能做到这一点？

我试过使用RepeatWith，但它似乎不起作用，该行只出现在第一页上。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:25:56.650

这仅用于外观和感觉目的吗？

我会用这样的线条创建一个图像并将其用作身体背景。或者，如果您使用跨多个页面的 tablix，另一个想法是在 tablix 上创建一个空列，左侧有边框。

还有一个想法是使用一个带有左/右边框的矩形，并将所有 tablixes 放在矩形内，因为这会使矩形扩展到多个页面，保持报表上的边框（垂直线）。

我不认为你可以告诉 SSRS 在多页上自动重复行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:26:40.687

我找到了解决该问题的方法（不使用 RepeatWith、RepeatOnNewPage 或报告背景图像）

我编写了一个简单的代码来向正文中的表格添加空白行。要添加的行数将由体高和行高决定。

例如，如果正文高度为 6 英寸，行高为 0.5 英寸，则一页总共可以容纳 12 行。因此，如果您的表格有 4 行，则添加 8 个额外的黑色行，以使表格高度等于报表正文。

如果行数超过 12，比如 15，那么您将添加 [12 - (15 mod 12)] rows ，即 9 个空白行。

您可以根据需要在任何列上设置侧边框，从而在整个页面中形成一条垂直线。

# php - 我怎么知道是否是require_once？

> ID：11106938
> 
> 赞同：2
> 
> 时间：2012-06-19T18:18:43.427
> 
> 标签：php

我有两个文件

**1 - index.php 2 - main.php**

**index.php**通过调用**main.php**`<?php require_once("../../includes/main.php"); ?>`

我如何从**main.php**知道它何时执行，

如果**index.php**调用他或同一个用户执行它独立？
如果是require_once，我应该在main php中问什么以继续运行程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:22:19.370

我之前通过在包含之前设置一个变量，然后执行包含来做到这一点。例如：

```
$included_main_from = 'index.php';
require ('../../includes/main.php'); 
```

然后在 main.php 中检查该变量及其值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T18:22:31.413

许多框架在 中定义了一个常量`index.php`，并且`main.php`您可以在其中检查它是否存在`defined()`。您可以使用调试回溯功能获得更多信息，但您不应该在生产/检查中使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T18:27:00.853

另一种方法是使用`get_included_files()`- 包含其他文件的“主”文件将始终显示在顶部 = 是返回数组的第 0 个元素：

```
if (get_included_files()[0] !== __FILE__) {
    // ..included
} else {
    // ..not included
} 
```

这在大多数情况下都有效。

# android - Flex ActionScript - ArrayList 问题

> ID：11106947
> 
> 赞同：0
> 
> 时间：2012-06-19T18:19:26.717
> 
> 标签：android, ios, apache-flex, actionscript

在过去的几天里，我一直在努力完成这项工作，但我做不到。有人请帮帮我！让我不要告诉你整件事，我会试着简单地解释清楚。我有 1 个 ArrayList。我正在尝试将其复制到另一个中，并尝试删除特定索引处的项目。但这不仅会删除复制的 ArrayList 中的项目，还会删除原始 ArrayList。

例如：

```
var DuplicateList:ArrayList = new ArrayList();
DuplicateList = OriginalList;

DuplicateList.removeItemAt(2); 
```

以上不仅删除了 DuplicateList 中 Index-2 处的“Item 3”，还删除了 OriginalList 中的“Item 3”。

我只需要使用这种方法的一些解决方法，因为这是我在使用 OriginalList 作为 dataProvider 的 FLEX 列表控件的 ItemRenderer 中的控件中键入的任何内容的唯一方法，当我更改列表控件的 dataProvider 时从 OriginalList 到 DuplicateList。以下方法不会保留所有数据。

```
var DuplicateList:ArrayList = new ArrayList();
DuplicateList.addAll(OriginalList);

DuplicateList.removeItemAt(2);
ListCntrl.dataProvider = DuplicateList; 
```

提前感谢您的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:48:10.070

理解一个非常非常重要的事情：

ActionScript3 使用对对象的引用。因此，这行代码中的两个变量指的是完全相同的 an 实例`ArrayList`：

```
DuplicateList = OriginalList; 
```

因此，当您从一个参考中删除一个项目时，它会从下一个参考中消失。如果您想要两个单独的实例`ArrayList`，那么您需要像稍后在代码中建议的那样克隆它。

到目前为止，一切都很好......但为什么你要`ListCntrl`保留来自的数据`OriginalList`？这根本没有任何意义。如果您从中删除一个项目`DuplicateList`，然后将其用作数据提供者，则该项目不应该存在。我觉得这个故事还有更多...

# java - Android 找不到类，嵌套 jars 问题？

> ID：11106948
> 
> 赞同：2
> 
> 时间：2012-06-19T18:19:27.700
> 
> 标签：java, android, eclipse, jar

我有两个项目，第一个是一个库（在 Eclipse 属性 -> android 设置中标记为“isLibrary”），第二个是一个 android 应用程序。android 应用程序使用该库，一切正常。

我现在正在尝试在库中包含一个 jar 文件并在类（我们将其称为 ClassA）中访问它的功能，该类也可以在库中再次找到。现在在 android 应用程序中，我创建了一个 ClassA 的新实例，并告诉它执行一些将使用我在库中添加的 jar 提供的函数的东西。我最终得到这个错误：

```
"Android could no find class 'com.blah.blah.blah' etc." 
```

我检查了库中的 .classpath，它正在正确导出 jar。我会错过什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:26:34.063

我认为虽然你可以在 Eclipse 中使用任何你想要的“lib”文件夹，并将其添加到类路径中，但我很确定 Android 可以正确打包东西，jar 应该放在一个名为`libs`.

# apache-poi - POI 读取单元格背景颜色

> ID：11106949
> 
> 赞同：1
> 
> 时间：2012-06-19T18:19:31.943
> 
> 标签：apache-poi

我正在使用 POI 3.8 版本并尝试读取 excel 表 (XLS) 中单元格的背景颜色。理想情况下，我想将此带有样式的单元格复制到另一张纸上。当我执行**cloneFrom(..)**方法时，它没有将正确的颜色复制到目标表。

当我尝试单独读取单元格的背景颜色时，我没有得到正确的 RGB 值。如果我能获得正确的 RGB 值，我可以创建一个自定义调色板并将其设置为目标工作表的单元格。

是否有从单元格读取背景颜色的正确方法？

我试过以下

```
cell.getCellStyle().getFillBackgroundColor()
cell.getCellStyle().getFillBackgroundColorColor().getTriplet() 
```

上面的行应该给我 159/200/222 的 RGB 值，但给我的值是 51/204/204 不正确。

有人可以帮忙吗？我已经检查了这个论坛的所有可能的答案，但仍然无法得到我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:48:27.797

问题在于 HSSF 使用调色板（本质上是颜色数组）来定义其 RGB 值。所以背景颜色实际上是调色板的索引。这是一些获取单元格背景颜色的实际 rgb 值的代码：

```
 CellStyle style = cell.getCellStyle();
    short colorIdx = style.getFillForegroundColor();
    HSSFPalette palette = ((HSSFWorkbook) wb).getCustomPalette();
    HSSFColor color = palette.getColor(colorIdx);
    short [] triplet = color.getTriplet();
    // triplet will contain the actual rgb values 
```

在您的输出电子表格中，您必须向调色板添加自定义颜色。如果输出调色板中有空白区域，则可以使用 HSSFPalette.addColor。否则，您将不得不使用 HSSFPalette.setColorAtIndex 替换未使用的现有颜色。添加自定义颜色后，使用 CellStyle.setFillBackgroundColor 设置单元格的背景颜色，传入刚刚创建的自定义颜色的索引。

如果您可以使用 XSSF (xlsx) 文件而不是 HSSF (xls) 文件，那么您就不需要使用调色板。您可以使用实际的 rgb 值。

# sql - Perl DBI SQL 字符串错误

> ID：11106950
> 
> 赞同：2
> 
> 时间：2012-06-19T18:19:32.287
> 
> 标签：sql, string, perl, dbi

我正在编写一个 perl 脚本，该脚本将访问 MySQL 数据库以确定工具是否通过或失败，当我尝试在代码上获取 row_array 时出现错误。

基本上正在发生的事情是我正在循环一个测试列表，看看它们是通过还是失败，所以循环看起来像：

```
foreach my $test (@tests){
    $sth = $dbh_k->prepare("select fn_get_test_status(' $test ');");
    $sth->execute();

    my @data = $sth->fetchrow_array();
    print("$test\n");
    print("@data\n"); 
```

}

并且该函数返回字符串“通过”或“失败”但是我不知道如何仅将那个字符串拉出并将其合并到我的 perl 脚本中。

我不断收到错误 Use of uninitialized value in join or string at line xx.

任何提示或想法？谢谢你

编辑：我可能有一个数组数组作为我的数据类型返回，我如何进入它来检查它的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:12:10.520

这是我们在聊天中找到的解决方案：

```
my $sth = $dbh_k->prepare("select fn_get_test_status(?);");
foreach my $test (@tests){
    $sth->execute($test);

    my @data = $sth->fetchrow_array();
    printf "%s: %s\n", $test, @data;
} 
```

主要问题是旁边的空间`' $test '`。

# css - 在 Chrome 中拖动时更改 HTML5 Canvas 上的光标

> ID：11106955
> 
> 赞同：2
> 
> 时间：2012-06-19T18:19:42.130
> 
> 标签：css, html, google-chrome, canvas, drag

[我正在研究如何在拖动鼠标时在 HTML5 画布上更改光标](https://stackoverflow.com/questions/4945874/change-cursor-over-html5-canvas-when-dragging-the-mouse)...遇到了这个问题：在拖动鼠标时更改 HTML5 画布上的光标

一个 :active 伪选择器可以解决问题似乎是合乎逻辑的......

然而，当我在我的页面上使用它时，由 :active 伪选择器中的规则设置的光标被忽略，而是显示文本选择光标。

在 Firefox 中，这种行为不存在 - 它遵循我设置的光标属性。

这是一个演示该行为的[示例。](http://jsfiddle.net/nXv63/466/)

知道如何在 chrome 中解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:22:12.867

**[工作小提琴](http://jsfiddle.net/nXv63/466/)**

为 Chrome 添加以下内容以在拖放时关闭文本选择。

```
document.onselectstart = function(){ return false; }​ 
```

这个回答了好几遍了

[chrome在拖动时将光标设置为文本，为什么？](https://stackoverflow.com/questions/2745028/chrome-sets-cursor-to-text-while-dragging-why)

[在 Chrome 中单击并拖动光标](https://stackoverflow.com/questions/6388284/click-and-drag-cursor-in-chrome)

# cocos2d-iphone - 访问不同类中的 b2Body 和 b2Fixture 属性

> ID：11106957
> 
> 赞同：1
> 
> 时间：2012-06-19T18:19:47.217
> 
> 标签：cocos2d-iphone, physics, box2d-iphone

是否可以通过创建关节的方式访问另一个类中的一个类中的 b2Fixture 和 b2Body 属性。如果是，怎么做。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:24:25.917

创建属性以访问您的 b2Body 对象。然后你可以得到这个 b2Body 的 b2Fixtures 列表。

在你的 .h 文件中

```
@interface MyClass
{
    b2Body* m_body;
}

@property (nonatomic, readonly) b2Body* body;

@end 
```

在您的 .mm 文件中（您必须使用 .mm 扩展名才能使用 c++ 类和方法）

```
@implementation MyClass

@synthesize body = m_body;

- (id) init
{
    self = [super init];

    if( self != nil )
    {
        // create your b2Body here and 
    }

    return self;
}

@end 
```

在此之后，所有 MyClass 实例都将具有属性主体，可以作为

```
myClassInstance.body 
```

或者

```
[myClassInstance body]; 
```

# r - 在 cbind 数据后重命名列名

> ID：11106964
> 
> 赞同：44
> 
> 时间：2012-06-19T18:20:08.900
> 
> 标签：r, rename

![在此处输入图像描述](../Images/6301569cf7e86a55b948cad0232dd0b9.png)

```
merger <- cbind(as.character(Date),weather1$High,weather1$Low,weather1$Avg..High,weather1$Avg.Low,sale$Scanned.Movement[a]) 
```

数据后`cbind`，新的DF自动有列名`V1`，`V2`......我想重命名列

```
colnames(merger)[,1] <- "Date" 
```

但失败了。当我使用时`merger$V1`，

```
Error in merger$V1 : $ operator is invalid for atomic vectors 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2014-04-01T22:37:48.627

You can also name columns directly in the `cbind` call, e.g.

```
cbind(date=c(0,1), high=c(2,3)) 
```

Output:

```
 date high
[1,]    0    2
[2,]    1    3 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-19T18:23:31.427

尝试：

```
colnames(merger)[1] <- "Date" 
```

## 例子

这是一个简单的例子：

```
a <- 1:10
b <- cbind(a, a, a)
colnames(b)

# change the first one
colnames(b)[1] <- "abc"

# change all colnames
colnames(b) <- c("aa", "bb", "cc") 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-11T21:36:12.780

您在问题中给出了以下示例：

```
colnames(merger)[,1]<-"Date" 
```

问题是逗号： colnames() 返回一个向量，而不是矩阵，所以解决方案是：

```
colnames(merger)[1]<-"Date" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-19T18:29:44.263

如果您仅将向量传递给`cbind()`它，则会创建一个矩阵，而不是一个数据框。阅读`?data.frame`。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-03-01T03:51:40.910

一种产生`data.frame`并能够在一行中执行此操作的方法是强制所有传递给`cbind`data.frame 的矩阵/数据帧，同时使用设置列名属性`setNames`：

```
a = matrix(rnorm(10), ncol = 2)
b = matrix(runif(10), ncol = 2)

cbind(setNames(data.frame(a), c('n1', 'n2')), 
      setNames(data.frame(b), c('u1', 'u2'))) 
```

产生：

```
 n1        n2         u1        u2
1 -0.2731750 0.5030773 0.01538194 0.3775269
2  0.5177542 0.6550924 0.04871646 0.4683186
3 -1.1419802 1.0896945 0.57212043 0.9317578
4  0.6965895 1.6973815 0.36124709 0.2882133
5  0.9062591 1.0625280 0.28034347 0.7517128 
```

~~不幸的是，没有`setColNames`类似的功能`setNames`~~但是，对于在列名之后返回矩阵的数据框，没有什么可以阻止您调整代码`setNames`以生成：

```
setColNames <- function (object = nm, nm) {
    colnames(object) <- nm
    object
} 
```

请参阅[此答案](https://stackoverflow.com/questions/28377295/setnames-equivalent-for-colnames-and-rownames-in-r)，该`magrittr`包包含此功能。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-19T18:34:30.587

如果您提供`cbind`一组参数，所有这些参数都是向量，您将得到的不是数据框，而是一个矩阵，在这种情况下是一个全字符矩阵。他们有不同的特点。如果您的一些论点仍然是数据框，您可以获得数据框，请尝试：

```
merger <- cbind(Date =as.character(Date),
             weather1[ , c("High", "Low", "Avg..High", "Avg.Low")] , 
             ScnMov =sale$Scanned.Movement[a] ) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-06-18T19:18:00.620

在添加矢量之前，只需在引号中添加要使用的名称即可

```
a_matrix <- cbind(b_matrix,'Name-Change'= c_vector) 
```

# python - 如何使用 Python 在多行文本中搜索 XPath 中的内容？

> ID：11106971
> 
> 赞同：5
> 
> 时间：2012-06-19T18:20:48.293
> 
> 标签：python, xpath, lxml

当我使用包含搜索元素的 text() 中是否存在数据时，它适用于纯数据，但不适用于元素内容中有回车符、新行/标签时。`//td[contains(text(), "")]`在这种情况下如何工作？谢谢！

**XML：**

```
<table>
  <tr>
    <td>
      Hello world <i> how are you? </i>
      Have a wonderful day.
      Good bye!
    </td>
  </tr>
  <tr>
    <td>
      Hello NJ <i>, how are you?
      Have a wonderful day.</i>
    </td>
  </tr>
</table> 
```

**Python ：**

```
>>> tdout=open('tdmultiplelines.htm', 'r')
>>> tdouthtml=lh.parse(tdout)
>>> tdout.close()
>>> tdouthtml
<lxml.etree._ElementTree object at 0x2aaae0024368>
>>> tdouthtml.xpath('//td/text()')
['\n      Hello world ', '\n      Have a wonderful day.\n      Good bye!\n    ', '\n      Hello NJ ', '\n    ']
>>> tdouthtml.xpath('//td[contains(text(),"Good bye")]')
[]  ##-> But *Good bye* is already in the `td` contents, though as a list.
>>> tdouthtml.xpath('//td[text() = "\n      Hello world "]')
[<Element td at 0x2aaae005c410>] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T03:45:15.997

**使用**：

```
//td[text()[contains(.,'Good bye')]] 
```

**说明**：

问题的原因不是文本节点的字符串值是多行字符串——真正的原因是该`td`元素有多个文本节点子节点。

**在提供的表达式中**：

```
//td[contains(text(),"Good bye")] 
```

**传递给函数的第一个参数`contains()`是多个文本节点的节点集**。

根据 XPath 1.0 规范（在 XPath 2.0 中，这只会引发类型错误），对需要字符串参数但传递给节点集的函数的求*值仅采用节点中第一个节点的字符串值-设置*。

**在这种特定情况下，传递的节点集的第一个文本节点具有字符串值**：

```
 "
                 Hello world " 
```

**所以比较失败并且`td`没有选择想要的元素**。

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:copy-of select="//td[text()[contains(.,'Good bye')]]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<table>
      <tr>
        <td>
          Hello world <i> how are you? </i>
          Have a wonderful day.
          Good bye!
        </td>
      </tr>
      <tr>
        <td>
          Hello NJ <i>, how are you?
          Have a wonderful day.</i>
        </td>
      </tr>
</table> 
```

**计算 XPath 表达式并将选定的节点（在本例中只有一个）复制到输出**：

```
<td>
          Hello world <i> how are you? </i>
          Have a wonderful day.
          Good bye!
        </td> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T20:56:46.533

使用`.`代替`text()`：

```
tdouthtml.xpath('//td[contains(.,"Good bye")]') 
```

# javascript - 在 JavaScript 中使用数组而不是对象

> ID：11106976
> 
> 赞同：0
> 
> 时间：2012-06-19T18:21:07.543
> 
> 标签：javascript, arrays, json

我有以下变量：

```
 filter =  {
            "country": 1,
            "Age Group": {},
            "Gender": {},
            "NEWSEC": {},
            "Telco_Segment": {}
    }; 
```

和功能：

```
function facetBuilder(key, val)
{
    if(key == 'country')
    {   
        filter.country = val;
    }
    else
    {
        if(typeof filter[key][val] !== "undefined" )
        {
            delete filter[key][val]; //I'm assuming you want to remove it
        }
        else
        {
            filter[key][val] = true;
        }
    }

    console.log(filter);
} 
```

生成的对象最终看起来像这样：

```
 filter =  {
            "country": 1,
            "Age Group": {
                4: true,
                3: true,
                2: true
            },
            "Gender": {
                1: true
            },
            "NEWSEC": {
                3: true,
                2: true
            },
            "Telco_Segment": {}
    }; 
```

但我真正想要的是这样的：

```
 filter =  {
            "country": 1,
            "Age Group": [4,3,2],
            "Gender": [1],
            "NEWSEC": [3,2],
            "Telco_Segment": []
    }; 
```

而且我不确定如何处理它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:24:28.030

代替

```
filter[key][val] = true; 
```

怎么样

```
filter[key].push(val); 
```

和

```
filter =  {
    "country": 1,
    "Age Group": [],
                 ^^---empty array, instead of {} for object. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:25:42.470

您现在拥有的 ,`if(typeof filter[key][val] !== "undefined" )`很好，因为对象具有恒定时间查找。如果您使用数组扫描，`if(filter[key].indexOf(val) !== -1)`时间复杂度会增加到 O(n)，因为您必须扫描每个元素以查看它是否在数组中。

# php - 使用 PHP 跟踪文本文件中的更改

> ID：11106979
> 
> 赞同：3
> 
> 时间：2012-06-19T18:21:11.570
> 
> 标签：php, server-push

我有一个 PHP 脚本，当服务器上发生特定事情时，它必须在客户端（服务器推送）上重新加载页面。所以我必须倾听变化。我的想法是有一个文本文件，其中包含当前页面的页面加载次数。所以我想监控文件，一旦它被修改，就使用服务器推送来更新客户端上的内容。问题是如何在 PHP 中跟踪文件的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:27:20.037

您可以执行以下操作：

```
<?php
while(true){
    $file = stat('/file');
    if($file['mtime'] == time()){
        //... Do Something Here ..//
    }
    sleep(1);
} 
```

这将每秒不断地寻找文件修改时间的变化。如果你不限制它，你可能会杀死你的磁盘 IO，并且可能需要调整你的 ulimit。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:29:19.300

这将检查您的文件是否有更改：

```
<?php
  $current_contents = "";  

  function checkForChange($filepath) {
    global $current_contents;

    $new_contents = file_get_contents($filepath);
    if (strcmp($new_contents, $current_contents) {
      $current_contents = $new_contents;
      return true;
    }

    return false;
  } 
```

但这不会解决你的问题。服务于客户端的 php 文件在呈现的 html 发送到客户端之前完成执行。该客户端将需要回调某个 php 文件以检查更改...由于这也是一个 http 请求，因此该文件将完成执行并忘记内存中的任何内容。

为了正确解决这个问题，您可能不得不放弃检查文件的想法。服务器需要知道何时以及如何联系当前连接的客户端，或者这些客户端需要定期轮询轻量级服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:32:05.120

这有点骇人听闻，但是如何创建一个吸引页面的 cron 作业，将其存储在范围或表中，然后每 30 秒简单地比较一次呢？

# ruby - 在不使用 Sort 方法的情况下在 Ruby 中对数组进行排序

> ID：11106981
> 
> 赞同：2
> 
> 时间：2012-06-19T18:21:17.497
> 
> 标签：ruby

我正在尝试使用冒泡排序方法对只有三个数字的数组进行排序。我正在使用的代码如下。

```
def my_sort(list)
  return list if list.size <= 1 

  swapped = false

  while !swapped
    swapped = false

    0.upto(list.size-2) do |i|
      if list[i] > list[i+1]
        list[i], list[i+1] = list[i+1], list[i]
        swapped = true
      end
    end

    list
  end

my_sort([3,1,2]) 
```

这是我不断收到的错误消息：

```
Syntax error, unexpected $end, expecting keyword_end 
```

我只是想知道不应该包括哪一端？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:27:03.017

你错过了一个`end`

```
 if list[i] > list[i+1]
    list[i], list[i+1] = list[i+1], list[i]
    swapped = true
  end # <-------------------------------------------------------- 
```

**编辑：** 正如其他答案所提到的，缩进您的代码以使这些错误更加明显。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T18:27:33.280

你缺少一个`end`after `swapped = true`。最好彻底准确地缩进代码以避免此类问题：

```
def my_sort(list)
  return list if list.size <= 1 

  swapped = false
  while !swapped
    swapped = false
    0.upto(list.size-2) do |i|
      if list[i] > list[i+1]
        list[i], list[i+1] = list[i+1], list[i]
        swapped = true
      end
    end
  end

  list
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-09T22:07:29.710

**这看起来更好更快**。

```
arr = [1,5,7,2,3,50,78,34, 1, 15, 89, 8]

def sort_array(arr)
  arr.size.times do
    arr.map.with_index do |num, index|
      next if index.eql?(arr.size - 1)
      arr[index], arr[index+1] = arr[index+1], arr[index] if num > arr[index+1]
    end
  end
end 
```

调用上述方法`print sort_array(arr)`以获得预期的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-10T22:41:39.077

您的代码适用于该特定数组。因为您的循环正在查看下一个元素是否更高，然后滑动。但是数组中的更多元素呢？这是适用于所有情况的递归解决方案。

```
def my_sort(list, new_array = nil)

  return new_array if list.size <= 0
  if new_array == nil
    new_array = []
  end
  min = list.min
  new_array << min
  list.delete(min)

  my_sort(list, new_array)

end

puts my_sort([3, 1, 2, 20, 11, 14, 3, 6, 8, 5]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-04T10:30:41.053

**对我有用的方法如下。**

```
def my_sort(list)   
  n = list.length   
  loop do
    swapped = false
    (n-1).times do |i|
      if list[i] > list[i+1]
        list[i], list[i+1] = list[i+1], list[i]
        swapped = true
      end
    end
    break if not swapped  
  end   
  list 
end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-19T11:18:05.777

```
def sort(arr)
    arr_len = arr.length - 1
    swap = true
    while swap
        swap = false
        arr_len.times do |i|
         if arr[i] > arr[i+1]
           arr[i],arr[i + 1] = arr[i + 1],arr[i]
           swap = true
         end
        end
     end
     p arr

end 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-09-15T00:17:01.173

```
#Using bubble sort algorithm in ruby

a = [1,5,7,2,3,50,78,34,89]

a.size.times.each do |t|
 i=0
 a.each do |b|
   if b > a[i+1]
     a[i],a[i+1] = a[i+1],a[i]
   end
   i+=1 if i < a.size-2
 end
end
print a
#output: [1, 2, 3, 5, 7, 34, 50, 78, 89] 
```

# asp.net - Adobe Dreamweaver 是否能够加快 ASP.NET 开发人员的标记开发过程

> ID：11106986
> 
> 赞同：-1
> 
> 时间：2012-06-19T18:21:39.680
> 
> 标签：asp.net, dreamweaver

我知道这个问题可能是主观的，这就是为什么我需要一个 ASP.NET 开发人员的答案，他实际尝试过将 Dreamweaver 与 VS2010 ASP.NET MVC 开发结合使用。

在做一个网站开发项目时，我花了 60% 的时间微调标记和 css，30% 的时间编写 JS 代码，只有 10% 的时间用于 C# 逻辑编码。我正在寻找减少标记混合时间以更快完成项目的方法。Adobe Dreamweaver 能否帮助我这个 ASP.NET MVC 开发人员更快地实现设计师提供的标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:04:49.133

这是一个很大的“是”和“否”，我将尝试解释，因为这取决于您如何使用它。

1.  **设计视图**

如果您从设计视图中直观地处理整个实现，就像 Adob​​e 认为您应该做的那样，这是一个很大的阴谋。您会发现自己花费更多时间在屏幕上用鼠标移动数英里。键盘编码 -> 总是更快，但不适合新手。

2.  **实时视图/拆分视图**

如果您打算使用内置的“实时视图”或“拆分视图”，它会比使用 Alt+Tab / Ctrl+R 慢。而且没有解决跨浏览器不一致的技巧

3.  **真正的速度是什么**

常规代码完成、语法高亮、自动标记关闭（如键入时`</`）、xHTML 模板、不在其他 hack 之上使用 hack、不使用条件样式、忽略房间中的其他人。

4.  **一般来说，您可以做些什么来加快前端开发速度**

除了外包，了解 HTML 和 CSS 以及您的经验和技术也会有所帮助。如果您放置一个 div，然后切换到 CSS，然后再切换到更多 div，然后再切换回其他一些 CSS，这比编写页眉和页脚 html 代码需要更长的时间，然后再开始设置 div、菜单等的样式。

最重要的是，切片图像仍然需要时间。而如果你希望将来能够快速更改布局中的内容，或者基于模板制作子布局，自然会花费更多时间。除此之外，还有跨浏览器兼容性测试。如果你有一个老板，他告诉你“让我们支持 IE6”，你可能想考虑在另一家公司工作。

PS：这是另一个[狩猎话题](https://blog.stackoverflow.com/2012/06/can-stack-exchange-capitalize-on-hot-trends/)吗？:)

# android - 缩放密度弄乱了我的字体

> ID：11106993
> 
> 赞同：0
> 
> 时间：2012-06-19T18:22:02.210
> 
> 标签：android, fonts, screen

我有几个设备（智能手机和平板电脑）......但其中一些在 1.5 中设置了“scaledDensity”值（您可以使用 DisplayMetrics 类获取此值）。这很麻烦，因为我在该设备上的应用程序中的所有字体都被放大了 50%……（我所有的字体都使用“sp”）。事实上，设备中的所有字体都是按比例放大的……

嗯......问题是：

为什么制造商会想做那件事……？

如何将我的字体设置为使用 1.0 的缩放密度？

谢谢！！！

# facebook - 在没有完整 OAuth 的情况下与 Facebook API 交互，这可能吗？

> ID：11106995
> 
> 赞同：-1
> 
> 时间：2012-06-19T18:22:10.333
> 
> 标签：facebook, facebook-graph-api, oauth, twitter

我需要使用 php 和 ZF 1.1.X 作为 cron 所有者在某个 FB 页面上发布消息。对于这个小问题，我不想创建完整的 OAuth 堆栈。没有它是否可以与 FB API（它是可取的，用于 FB 的 PHP SDK）进行通信，例如带有他预先创建的访问令牌（访问令牌，访问令牌秘密）的 twitter？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:49:25.533

只要您需要一个活动用户`access_token`来检索所需的数据，就不可能跳过 OAuth 流程。

如果没有对用户进行身份验证，您只有应用程序`access_token`（旧格式`APP_ID|APP_SECRET`，但它仍然有效）并且只能有限访问大多数 Graph API 端点和应用程序设置。

实际上，使用 OAuth 流程实现用户身份验证并不难，而且使用[PHP-SDK](https://developers.facebook.com/docs/reference/php/)是完全透明的。

只需查看[文档中的示例代码即可进行服务器端身份验证](https://developers.facebook.com/docs/authentication/server-side/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:33:15.320

是的，您需要构建一个应用程序，然后在请求[manage_page 权限](https://developers.facebook.com/docs/authentication/permissions/#page_perms)时通过该应用程序对页面进行授权。

您还应该熟悉[服务器端身份验证过程](https://developers.facebook.com/docs/authentication/server-side/)。