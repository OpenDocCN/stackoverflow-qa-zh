# StackOverflow 问答 11822000-11822999

# websocket - WebSockets (wss) 和带有 AsyncHttpClient 的代理服务器

> ID：11822000
> 
> 赞同：1
> 
> 时间：2012-08-06T02:52:49.627
> 
> 标签：websocket, netty, grizzly, asynchttpclient

我正在尝试使用带有代理服务器配置的 AsyncHttpClient 来使用 wss 进行连接，但没有运气。我一直在使用 async-http-client 1.7.5 和 grizzly-websockets 2.2.13 我的第一次尝试

```
AsyncHttpClientConfig config = new AsyncHttpClientConfig.Builder()
        .setSSLContext(sc)
        .setProxyServer(
        new ProxyServer(Protocol.HTTP, "192.168.1.130", 3128))
        .build();
NettyWebSocket w = (NettyWebSocket)c.prepareGet("wss://192.168.1.124/atmosphere-chat/chat")
        .execute(handler).get(); 
```

使用默认的 netty 配置无法正常工作，此尝试似乎至少通过代理并连接到远程服务器。我得到的例外是

```
java.lang.IllegalArgumentException: unsupported message type: class org.jboss.netty.handler.codec.http.websocketx.TextWebSocketFrame 
```

当我切换到使用 grizzly 时

```
AsyncHttpClient c = new AsyncHttpClient(new GrizzlyAsyncHttpProvider(config), config); 
```

事情变得更好/更糟。在这种情况下，grizzly 似乎无法通过 http 代理发送连接动词，并立即开始通过 ssl 进行通信，但失败了。我认为这将是一个得到很好支持的情况，因为在使用 SSL 时 websocket 连接将通过代理工作的可能性增加。]

```
Exception in thread "main" java.util.concurrent.ExecutionException: javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection? 
```

我是否超出了应该工作的范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T01:23:07.490

原来这是 AHC 中的一个错误（[https://github.com/sonatype/async-http-client/issues/131#issuecomment-7745037](https://github.com/sonatype/async-http-client/issues/131#issuecomment-7745037)）在 1.8.0 中得到修复。

# apache - 无法在 apache 模块中保留连接套接字

> ID：11822001
> 
> 赞同：0
> 
> 时间：2012-08-06T02:52:58.203
> 
> 标签：apache, sockets, module

我正在尝试使用套接字创建一个 Apache 模块以连接到另一台服务器。它运行良好，我可以检索数据，但我遇到了三个问题。

1.  我无法与我的服务器保持连接（每次请求后自动关闭）。
2.  对于错误日志中的每个请求，我都会收到 2 个错误`AH00052: child pid 7970 exit signal Segmentation fault (11)`。
3.  当我在浏览器上连续按 f5 时，出现错误“未收到数据”。

这是我模块的代码：

```
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h>
#include <unistd.h>
#include <sys/select.h>

#include "httpd.h"
#include "http_config.h"
#include "http_protocol.h"
#include "ap_config.h"

static int sockfd = -1;
static struct sockaddr_in saddr;
/* The sample content handler */
static int search_handler(request_rec *r)
{
    r->content_type = "text/html";

    ap_rprintf(r,"sockfd = %d<br>", sockfd);
    if(sockfd == -1){
            sockfd = socket(AF_INET, SOCK_STREAM, 0);
            struct hostent *server = gethostbyname("127.0.0.1");
            if(server == NULL ) return DECLINED;
            bzero((char *) &saddr, sizeof(saddr));
            saddr.sin_family = AF_INET;
            bcopy((char *)server->h_addr, (char *)&saddr.sin_addr.s_addr,server->h_length);
            saddr.sin_port = htons(9999);
            if(sockfd == -1) return DECLINED;
            if(connect(sockfd, (struct sockaddr *)&saddr, sizeof(saddr)) < 0){
                    ap_rputs("Can't connect.\n", r);
                    return OK;
            }
    }
    send(sockfd, r->args, strlen(r->args), 0);
    fd_set read_sd;
    FD_ZERO(&read_sd);
    FD_SET(sockfd, &read_sd);
    int sel = select(sockfd + 1, &read_sd, 0, 0, 0);
    if(sel < 0) {close(sockfd);return DECLINED;}
    if( sel == 0) {ap_rprintf(r, "time out."); return OK;}
    char buf[5000];
    if(recv(sockfd, buf, 5000, 0) <= 0) return DECLINED;
    ap_rprintf(r, "%s<br>%d", buf, sockfd);

    return OK;
}

static void search_register_hooks(apr_pool_t *p)
{
    ap_hook_handler(search_handler, NULL, NULL, APR_HOOK_LAST);
}

/* Dispatch list for API hooks */
module AP_MODULE_DECLARE_DATA search_module = {
STANDARD20_MODULE_STUFF,
NULL,                  /* create per-dir    config structures */
NULL,                  /* merge  per-dir    config structures */
NULL,                  /* create per-server config structures */
NULL,                  /* merge  per-server config structures */
NULL,                  /* table of config file commands       */
search_register_hooks  /* register hooks                      */
}; 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:31:12.340

不是一个明确的答案，但我相信您必须使用[apache 池](http://www.apachetutor.org/dev/pools)进行模块中的资源管理。

# java - Java UUID 压缩和解压返回

> ID：11822004
> 
> 赞同：5
> 
> 时间：2012-08-06T02:53:06.503
> 
> 标签：java, uuid

我想做以下...

a) 将生成的 UUID 压缩为长度为 8 的字符串。

b) 将压缩后的 UUID 解压回原来的 UUID。

原因是因为我必须将 UUID 发送到合作系统，而合作系统只接受 8 个字符的 UUID，并且我不能请求更改合作系统。

因此，剩下要做的就是将我必须的 UUID 压缩为 8 个字符字符串，然后在从合作系统返回消息时将其解压缩回原始 UUID。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T03:15:13.593

由于信息论的原因，您所问的内容是不可能的。

[RFC 4122](http://www.ietf.org/rfc/rfc4122.txt)指定的 UUID是 128 位，[`UUID`Java 中的对象也是](http://docs.oracle.com/javase/6/docs/api/java/util/UUID.html)如此。

Java`String`可以为每个字符存储 16 位，这*将*构成一个 8`char`字符串。但是，*并非所有位序列都是有效的 UTF-16 字符串*，因此在 8 个字符中您可以存储少于 128 位的信息。

因此，如果将 UUID 压缩为有效的 8 字符字符串，则会丢失信息，因此通常无法将其解压缩以取回原始 UUID。

您可能打算生成一个较短的字符串以用作唯一标识符。如果是这样，请参阅[仅生成 8 个字符的 UUID](https://stackoverflow.com/questions/4267475/generating-uuid-but-only-for-8-characters)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-17T16:47:11.727

实现 url 安全 uuid 压缩的最佳方法是将其编码为 base64

```
public class UUIDUtils {

  public static String compress(UUID uuid) {
    ByteBuffer bb = ByteBuffer.allocate(Long.BYTES * 2);
    bb.putLong(uuid.getMostSignificantBits());
    bb.putLong(uuid.getLeastSignificantBits());
    byte[] array = bb.array();
    return Base64.getEncoder().encodeToString(array);
  }

  public static UUID decompress(String compressUUID) {
    ByteBuffer byteBuffer = ByteBuffer.wrap(Base64.getDecoder().decode(compressUUID));
    return new UUID(byteBuffer.getLong(), byteBuffer.getLong());
  }

} 
```

结果：6227185c-b25b-4497-b821-ba4f8d1fb9a1 -> YicYXLJbRJe4IbpPjR+5oQ==

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T03:19:17.267

您可以将 UUID 转换为一个字符串，它实际上是一个 16 位`char`8 元素的序列，如下所示。

```
static String encodeUuid(final UUID id) {
  final long hi = id.getMostSignificantBits();
  final long lo = id.getLeastSignificantBits();
  return new String(new char[] {
    (char) ((hi >>> 48) & 0xffff), (char) ((hi >>> 32) & 0xffff),
    (char) ((hi >>> 16) & 0xffff), (char) ((hi       ) & 0xffff),
    (char) ((lo >>> 48) & 0xffff), (char) ((lo >>> 32) & 0xffff),
    (char) ((lo >>> 16) & 0xffff), (char) ((lo       ) & 0xffff)
  });
}

static UUID decodeUuid(final String enc) {
  final char[] cs = enc.toCharArray();
  return new UUID(
    (long) cs[0] << 48 | (long) cs[1] << 32 | (long) cs[2] << 16 | (long) cs[3],
    (long) cs[4] << 48 | (long) cs[5] << 32 | (long) cs[6] << 16 | (long) cs[7]
  );
} 
```

这段代码确实看起来应该可以工作（[在这里](http://ideone.com/J7tHB)自己尝试），并且可以使用 UTF-8 和 UTF-16 进行编码/解码，而大多数情况下都不会出现问题：

```
static boolean validate(final UUID id, final Charset cs) {
  final ByteBuffer buf = cs.encode(encodeUuid(id));
  final UUID _id = decodeUuid(cs.decode(buf).toString());
  return id.equals(_id);
}

public static void main(final String[] argv) {
  final UUID id = UUID.randomUUID();
  assert validate(id, StandardCharsets.UTF_8)  : "failed using utf-8";
  assert validate(id, StandardCharsets.UTF_16) : "failed using utf-16";
} 
```

* * *

```
C:\dev\scrap>javac UuidTest.java

C:\dev\scrap>java -ea UuidTest 
```

然而，确实存在一些 UTF-16 代码点被保留为代理项的问题。如果发生这种情况，编码将不起作用，您将无法重建原始 UUID。有关更多信息，请参阅上面的机械蜗牛的回应。

* * *

您可以始终如一地从通过[UUID.randomUUID生成的编码 UUID](http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html#randomUUID%28%29)*中删除*的唯一数据是用于 (always ) 的 2 位和用于( always ) 的 4 位。`variant``2``version``4`

> 这些全局标识符存在不同的变体。此类的方法用于操作 Leach-Salz 变体，尽管构造函数允许创建 UUID 的任何变体（如下所述）。
> 
> 变体 2 (Leach-Salz) UUID 的布局如下： 最重要的 long 由以下无符号字段组成： `0xFFFFFFFF00000000 time_low
> 0x00000000FFFF0000 time_mid
> 0x000000000000F000 version
> 0x0000000000000FFF time_hi`
> 
> 最不重要的 long 由以下无符号字段组成： `0xC000000000000000 variant
> 0x3FFF000000000000 clock_seq
> 0x0000FFFFFFFFFFFF node`
> 
> 变体字段包含一个标识布局的值`UUID`。上述位布局仅对`UUID`变量值为 2 的 a 有效，表示*Leach-Salz*变量。
> 
> version 字段包含一个描述 this 类型的值`UUID`。UUID 有四种不同的基本类型：基于时间、DCE 安全、基于名称和随机生成的 UUID。这些类型的版本值分别为 1、2、3 和 4。

# asp.net - 即使在使用更新面板后刷新页面 - AJAX

> ID：11822005
> 
> 赞同：0
> 
> 时间：2012-08-06T02:53:14.170
> 
> 标签：asp.net, ajax, scriptmanager, updatepanel

我有一个数据列表，其中超链接将填充文章名称列表。单击任何文章链接时，我会在其中加载内容

ID =“POST”的标签

问题是，当我单击数据列表中的链接时，页面会刷新以加载内容。我该如何解决这个问题？谢谢

```
<asp:ScriptManager ID="scm" runat="server">
</asp:ScriptManager>
<table>
    <tr>
        <td>
            <asp:Panel ID="Panel1" runat="server" Width="800">
                <div id="divContent" runat="server" class="post">
                    <table id="tblPost" style="float" border="1" style="border-style: outset; border-width: thin"
                        width="250" height="200" align="right">
                        <tr>
                            <td class="style2">
                                <asp:Label ID="Label1" runat="server" Width="200" Font-Bold="True" Text="Article Sections"></asp:Label>
                            </td>
                        </tr>
                        <tr>
                            <td align="left">
                                <asp:DataList ID="DLArticles" runat="server">
                                    <ItemTemplate>
                                        <table id="Table2" visible="true" align="left">
                                            <tr align="left">
                                                <td>
                                                    <asp:HyperLink ID="hypSubSections" runat="server" NavigateUrl='<%# "~/News.aspx?FID=" + DataBinder.Eval(Container.DataItem,"FID") + "&CID=" + DataBinder.Eval(Container.DataItem,"CID") %>'
                                                        Text='<%# DataBinder.Eval(Container.DataItem,"Title") %>'></asp:HyperLink>
                                                </td>
                                                </td>
                                            </tr>
                                        </table>
                                    </ItemTemplate>
                                </asp:DataList>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">
                                <asp:HyperLink ID="HypViewALL" runat="server">View All</asp:HyperLink>
                            </td>
                        </tr>
                    </table>
                    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                        <ContentTemplate>
                            <p id="POST" runat="server">
                            </p>
                        </ContentTemplate>
                        <Triggers>
                            <asp:AsyncPostBackTrigger ControlID="DLArticles" />
                        </Triggers>
                    </asp:UpdatePanel>
                </div>
            </asp:Panel>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:22:25.717

首先，您需要使用允许使用多个关键字段名称的数据驱动控件。DataList 没有这样的功能，所以你需要使用`GridView`或`ListView`控制。由于每个帖子都带有唯一的组合`FID`和`CID`值，因此将这些字段设置为 DataKeyNames。然后，更改`HyperLink`为`LinkButton`控件并设置适当的`CommandName`属性值。之后，您需要将每个 LinkBut​​ton 注册为 AsyncPostback 控件（在页面上，而不是在 UpdatePanel1 的触发器集合中），或者仅通过 UpdatePanel 包装整个 ListView。然后您只需要处理 SelectedIndexChanged 事件并更新帖子内容。

```
<asp:UpdatePanel runat="server" UpdateMode="Conditional" >
     <ContentTemplate>
          <asp:ListView runat="server" ID="ListView1" DataKeyNames="FID,CID">
               <LayoutTemplate>
                    <table>
                         <asp:PlaceHolder runat="server" ID="itemPlaceholder" />
                    </table>
               </LayoutTemplate>
               <ItemTemplate>
                    <tr style="text-align: left;">
                         <td>
                              <asp:LinkButton ID="LinkButton1" runat="server" CommandName="Select" Text='<%# Eval("Title") %>' />
                         </td>
                    </tr>
               </ItemTemplate>
          </asp:ListView>
     </ContentTemplate>
</asp:UpdatePanel>
<asp:UpdatePanel runat="server" UpdateMode="Conditional">
     <ContentTemplate>
          <p runat="server" id="POST">
          </p>
     </ContentTemplate>
     <Triggers>
          <asp:AsyncPostBackTrigger ControlID="ListView1" EventName="SelectedIndexChanged" />
     </Triggers>
</asp:UpdatePanel>

private static readonly List<Post> DataSource = new List<Post>
{
    new Post{FID = 1, CID = "1", Title="First", Content= Guid.NewGuid().ToString()},
    new Post{FID = 2, CID = "1", Title="Second", Content= Guid.NewGuid().ToString()},
    new Post{FID = 1, CID = "2", Title="Third", Content= Guid.NewGuid().ToString()},
    new Post{FID = 2, CID = "2", Title="Fourth", Content= Guid.NewGuid().ToString()},
};

protected void Page_Init(object sender, EventArgs e)
{
    ListView1.SelectedIndexChanging += ListView1_SelectedIndexChanging;
    ListView1.SelectedIndexChanged += ListView1_SelectedIndexChanged;
}

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        ListView1.DataSource = DataSource;
        ListView1.DataBind();
    }
}

void ListView1_SelectedIndexChanging(object sender, ListViewSelectEventArgs e)
{
    ListView1.SelectedIndex = e.NewSelectedIndex;
}

void ListView1_SelectedIndexChanged(object sender, EventArgs e)
{
    var dataKey = ListView1.SelectedDataKey;
    var fid = (int)dataKey["FID"];
    var cid = dataKey["CID"] as string;

    var post = DataSource.FirstOrDefault(p => p.FID == fid && p.CID == cid);
    if (post != null)
    {
        POST.InnerText = Server.HtmlEncode(post.Content);
    }

}

public class Post
{
    public int FID { get; set; }

    public string CID { get; set; }

    public string Title { get; set; }

    public string Content { get; set; }
} 
```

# g++ - 禁用g++返回值优化后，为什么最后调用构造函数进行临时引用？

> ID：11822011
> 
> 赞同：0
> 
> 时间：2012-08-06T02:54:07.570
> 
> 标签：g++, compiler-optimization

我使用以下命令编译 c++ 代码以禁用返回值。
`g++ -fno-elide-constructors rvoptimazation.cpp -o test`
但是 ./test 的输出是
10
10
10
13
0xbfdf0020
13
我对构造函数的最后一次调用感到困惑。谁能解释在运算符*中返回后哪一行代码将调用构造函数？提前致谢。

```
#include<iostream>    

using namespace std;  

class Rational{  
public:  
    Rational(int x ,int y){  
        _a = x;  
        _b = y;  
        cout << __LINE__ << endl;  
    }  
    Rational(Rational const &t){  
        cout << __LINE__ << endl;  
    }  
    Rational operator*(Rational const &t){  
        Rational re = Rational(_a * t._a ,_b * t._b);  
        cout << &re << endl;  
        return re;  
        //return *this;  
    }  
    Rational get()  
    {  
        return *this;  
    }  
public:  
    int _a ,_b;  
};  

int main()  
{  
    Rational r1(1 ,2);  
    Rational r2(2 ,3);  
    r1 * r2;  
 // cout << &r3 << endl;  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T17:18:42.717

`operator*`按值返回，所以必须构造返回的对象。该语句`return re`调用复制构造函数来执行此操作。

我认为[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)的解释很清楚。

# javascript - Jquery 菜单移位/重叠 div 部分图像

> ID：11822014
> 
> 赞同：1
> 
> 时间：2012-08-06T02:54:23.110
> 
> 标签：javascript, jquery, html, css

我是网络编程的新手，所以任何建议对我来说都是很好的资产。

我尝试使用 jquery 创建菜单和图像滑动，但该菜单与 chrome 中的图像和 IE 中的 shift div 部分重叠。

代码[http://jsfiddle.net/bM9vR/3/](http://jsfiddle.net/bM9vR/3/)

结果 [http://jsfiddle.net/bM9vR/3/embedded/result/](http://jsfiddle.net/bM9vR/3/embedded/result/)

我还附上了示例代码

```
<html>
<head>
<style type="text/css" >

body{background:#534741;font-family:Arial, Helvetica, sans-serif; font-size:12px;} 
ul, li{margin:0; padding:0; list-style:none;}  

.menu_head{border:1px solid #998675;}  
.menu_body {width:184px;border-right:1px solid #998675;border-bottom:1px solid #998675;border-left:1px solid #998675;}
.menu_body li{background:#493e3b;}
.menu_body li a{color:#FFFFFF; text-decoration:none; padding:10px; display:block;} 
.menu_body li.alt{background:#362f2d;}  
.menu_body {display:none; width:184px;border-right:1px solid #998675;border-bottom:1px solid #998675;border-left:1px solid #998675;} 
.menu_body li a:hover{padding:15px 10px; font-weight:bold;}  
                                                #slideshow { 
                                                            margin: 50px auto; 
                                                            position: relative; 
                                                            width: auto; 
                                                            height: auto; 
                                                            padding: 10px; 
                                                            box-shadow: 0 0 20px rgba(0,0,0,0.4); 
                                                        }

                                                        #slideshow > div { 
                                                            position: absolute; 
                                                            top: 10px; 
                                                            left: 10px; 
                                                            right: 10px; 
                                                            bottom: 10px; 
                                                        }

</style>  

<script src="http://jqueryjs.googlecode.com/files/jquery-1.2.6.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function () {  
$("ul.menu_body li:even").addClass("alt");
$('img.menu_head').click(function () {  
$('ul.menu_body').slideToggle('medium');
});

$('ul.menu_body li a').mouseover(function () { 
$(this).animate({ fontSize: "14px", paddingLeft: "20px" }, 50 ); 
});

$('ul.menu_body li a').mouseout(function () {
$(this).animate({ fontSize: "12px", paddingLeft: "10px" }, 50 );
});

$(function(){
$("#slideshow > div:gt(0)").hide();

setInterval(function() { 
  $('#slideshow > div:first')
    .fadeOut(1000)
    .next()
    .fadeIn(1000)
    .end()
    .appendTo('#slideshow');
},  3000);
});

});    
</script>  
</head>
<body style="margin:auto;">
<div style="width:1000px; height:600px; margin:20px;">
<div style="width:auto; height:100px">

<img src="https://encrypted-tbn3.google.com/images?q=tbn:ANd9GcQNrzbTsg60SbbpFVCI-Mt7gq6V6W3lSvFQznvZiuRUAP1Rh1pt" width="184" height="32" class="menu_head" alt="Click"/><br>  
<ul class="menu_body">
  <li><a href="#">AAAAAAAA</a></li>  
  <li><a href="#">AAAAAAAA</a></li> 
  <li><a href="#">AAAAAAAA</a></li>  
  <li><a href="#">AAAAAAAA</a></li>  
  <li><a href="#">AAAAAAAA</a></li>  
  <li><a href="#">AAAAAAAA</a></li> 
  <li><a href="#">AAAAAAAA</a></li>  
  <li><a href="#">AAAAAAAA</a></li>  
  <li><a href="#">AAAAAAAA</a></li>  
  <li><a href="#">AAAAAAAA</a></li> 
  <li><a href="#">AAAAAAAA</a></li>  
  <li><a href="#">AAAAAAAA</a></li>  
  <li><a href="#">AAAAAAAA</a></li>  
  <li><a href="#">AAAAAAAA</a></li> 
  <li><a href="#">AAAAAAAA</a></li>  
  <li><a href="#">AAAAAAAA</a></li>  
  <li><a href="#">AAAAAAAA</a></li>  
  <li><a href="#">AAAAAAAA</a></li> 
  <li><a href="#">AAAAAAAA</a></li>  
  <li><a href="#">AAAAAAAA</a></li>  
  <li><a href="#">AAAAAAAA</a></li>  
  <li><a href="#">AAAAAAAA</a></li> 
  <li><a href="#">AAAAAAAA</a></li>  
  <li><a href="#">AAAAAAAA</a></li>  
</ul>  
</div>
<div style="width:auto; height:100px; background-color:white;">
<div id="maindiv221">
<div id="slideshow">
   <div>
     <img src="https://encrypted-tbn2.google.com/images?q=tbn:ANd9GcRxhQOGp29MxjxwtL97VTm2lzyYYvOSLoOiMo3uWJFdBm91gMJjPvSD7Ag" alt="1">
   </div>
   <div>
     <img src="https://encrypted-tbn3.google.com/images?q=tbn:ANd9GcQvTJ-sdmw9EjrrL7j9izN3IavFusBzfvlc_Ow9as6TNfdfvr88" alt="2">
   </div>
   <div>
     <img src="https://encrypted-tbn1.google.com/images?q=tbn:ANd9GcTt4CqLzoaI9ehHYZs-B1eo8X-5qoMdaiRd6juWKmoFfwrmoK8Urg" alt="3">
   </div>
</div>

</div>
</body>
</html>
  ​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:01:19.300

在`.menu_body`课堂上将此代码添加到您的`CSS`部分

```
z-index: 999999;
position:relative; 
```

菜单的 Z-index 必须大于其他元素。z-index 较大的元素离我们“更近”。检查有关 z-index 的链接：http: [//www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp) 注意：z-index 仅适用于具有非静态位置的元素。（相对、绝对和固定位置）。

# android - 如何注销 Twitter - Twitter4J

> ID：11822018
> 
> 赞同：1
> 
> 时间：2012-08-06T02:55:08.080
> 
> 标签：android, twitter4j

我想退出 Twitter。我尝试使用新的请求 URI 清除引用和请求，但我的帐户仍然登录。我读[了这个问题](https://stackoverflow.com/questions/1960957/twitter-api-logout)，但它没有详细描述如何登录。如何注销 Twitter 并使用不同的帐户登录？你能给我一些注销或重新登录的代码吗？

函数获取请求 URI

```
public static String getRequestURI() {
    try {
        final Twitter twitter = new TwitterFactory().getInstance();
        twitter.setOAuthConsumer(Constant.CONSUMER_KEY, Constant.CONSUMER_SECRET);

        requestToken = twitter.getOAuthRequestToken(Constant.CALLBACK_URI);
        return requestToken.getAuthenticationURL();
    } catch (final TwitterException e) {
        e.printStackTrace();
    }
    return "";
} 
```

功能清除参考

```
public static boolean logout(final Context context) {
    getPrefs(context);
    CustomSharedPreferences.setPreferences(Constant.ACCESS_TOKEN, "");
    CustomSharedPreferences.setPreferences(Constant.ACCESS_TOKEN_SECRET, "");
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T10:27:51.137

```
mTwitter.setOAuthAccessToken(null);
mTwitter.shutdown(); 
```

有效，来源[http://wenchaokong.blogspot.in/2013/03/android-twitter-integration-twitter4j.html](http://wenchaokong.blogspot.in/2013/03/android-twitter-integration-twitter4j.html)

# ruby - 使用 elasticsearch 过滤带有空格的标签

> ID：11822019
> 
> 赞同：2
> 
> 时间：2012-08-06T02:55:08.317
> 
> 标签：ruby, mongoid, search-engine, elasticsearch, tire

我正在使用带有 mongoid 的轮胎（https://github.com/karmi/tire）。这是我的模型定义：

```
class SomethingWithTag
  include Mongoid::Document
  include Mongoid::Timestamps
  field :tags_array, type: Array

  include Tire::Model::Search
  include Tire::Model::Callbacks
  mapping do
      indexes :tags_array, type: :array, index: :not_analyzed
  end
end 
```

假设我有一个文档 {tags_array: ["hello world"]}。然后以下查询工作正常：

```
SomethingWithTag.tire.search { filter :terms, :tags_array => ["hello"] }
SomethingWithTag.tire.search { filter :terms, :tags_array => ["world"] }
SomethingWithTag.tire.search { filter :terms, :tags_array => ["hello", "world"] } 
```

但以下不返回任何结果：

```
SomethingWithTag.tire.search { filter :terms, :tags_array => ["hello world"] } 
```

我应该怎么做才能让它工作？

编辑：这里有一小段代码要测试： http: [//pastebin.com/n1rUtK3e](http://pastebin.com/n1rUtK3e)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T10:10:31.373

问题解决于：

使用属性`keyword`分析器`tags_array`：

```
class SomethingWithTag
  # ...
  mapping do
    indexes :tags_array, analyzer: 'keyword'
  end
end 
```

# visual-studio-2010 - 在 Visual Studio 中构建 lua，“setfenv”无法更改给定对象的环境

> ID：11822020
> 
> 赞同：2
> 
> 时间：2012-08-06T02:55:31.610
> 
> 标签：visual-studio-2010, lua

我想用 Visual Studio 2010构建**lua-5.1.4 ；**一切似乎都很好，但是下面的脚本：

```
local P = {}
P._G = _G

if _REQUIREDNAME == nil then
smartinput = P
else
_G[_REQUIREDNAME] = P
end
setfenv(1, P) 
```

收到错误消息：

```
‘setfenv’ cannot change environment of given object 
```

我从

[http://sigttou.com/lua-visual-studio-2010-2#comment-209](http://sigttou.com/lua-visual-studio-2010-2#comment-209)

这也是由Visual Studio 2010构建的。脚本运行良好，但是当我使用项目文件自己构建源时，再次出现错误。

我需要做些什么来避免这个问题？

# install4j - 我可以替换命令行选项吗

> ID：11822022
> 
> 赞同：0
> 
> 时间：2012-08-06T02:55:39.317
> 
> 标签：install4j

我有其他安装程序的这个选项 install.exe -D$FORCE_UPDATE$=true -l en

这是其他安装程序的选项。

这意味着下面。如果 $FORCE_UPDATE$ 键为“true”值，则安装语言为英语，没有语言选择对话框。

我想在不修改的情况下使用此选项。我已经知道如何像这样跳过语言选择对话框。install.exe -Dinstall4j.language=en install.exe -Vsys.languageId=en

但是，我想使用旧选项我不能修改这个选项，因为我已经发布了旧版本。

你能给我这个问题的方法吗？我可以以编程方式使用此选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:40:35.443

对于安装程序， install4j 翻译

```
-D$FORCE_UPDATE$=true 
```

到系统属性（例如 java 可执行文件的 VM 参数的命令行语法），因此您可以查询

```
Boolean.getBoolean("$FORCE_UPDATE$") 
```

在 install4j 的代码片段中。

# c# - 以另一种形式从datagridview获取所选记录的pk

> ID：11822023
> 
> 赞同：0
> 
> 时间：2012-08-06T02:56:45.617
> 
> 标签：c#, winforms, c#-4.0

当我执行 getPkRowReport() 时，如果我在同一表单 (form1) 上使用该值，它会正常工作。如果我需要表格 2 的 pk，它始终默认为第一行，而不是我在启动表格 2 之前选择的行。如果我在启动表格 2 后查看表格 1，则选择了正确的行，但我仍然得到pk为最高记录。任何帮助，将不胜感激。

表格一：

```
 private int pkFromReport;
    public int PkFromReport
    {
        get
        {
            pkFromReport = getPkRowReport();
            return pkFromReport;
        }
    } 

    private int getPkRowReport()
    {
        if (dgvReportGrid.CurrentRow != null)
        {
            //get selected row index
            int index = this.dgvReportGrid.CurrentRow.Index;
            //get pk of selected row using index
            string cellValue = dgvReportGrid["rptNo", index].Value.ToString();
            //change pk string to int
            int pKey = Int32.Parse(cellValue);

            return pKey;
        }
        else
        {
            return -1;
        }
    } 
```

表格 2：

```
private frmMain mainForm = new frmMain();

private void button1_Click(object sender, EventArgs e)
    {
        textBox1.Text = mainForm.PkFromReport.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:43:09.117

[CurrentRow](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.currentrow.aspx)获取包含当前单元格的行。当您的表单失去焦点时，您选择的行不再是当前行。

您应该使用该`SelectedRows`集合来获取您当前选择的行。由于您计划只选择一个行，因此请更改您的代码，如下所示：

```
private int getPkRowReport()
{
    if (dgvReportGrid.SelectedRows.Count > 0)
    {
        //get selected row index
        int index = this.dgvReportGrid.SelectedRows[0].Index;
        //get pk of selected row using index
        string cellValue = dgvReportGrid["rptNo", index].Value.ToString();
        //change pk string to int
        int pKey = Int32.Parse(cellValue);

        return pKey;
    }
    else
    {
        return -1;
    }
} 
```

# jpa - 将 SQL 连接转换为 JPQL

> ID：11822032
> 
> 赞同：2
> 
> 时间：2012-08-06T02:57:52.977
> 
> 标签：jpa, pagination, jpql, toplink

目前，查询连接中的**所有**文章都在该方法中返回，而应该只返回**一系列**文章。`JPQL``getRangeOfArticles`

 **我追求的 MySQL 控制台输出，但想在 JPQL 中实现：

```
mysql> 
mysql> SELECT * FROM articles LEFT OUTER JOIN newsgroups ON articles.NEWSGROUP_ID=newsgroups.ID  WHERE newsgroups.NEWSGROUP = "gwene.com.economist" AND articles.ID BETWEEN 450 AND 453;
+-----+---------------+--------------+------+---------------------+
| ID  | MESSAGENUMBER | NEWSGROUP_ID | ID   | NEWSGROUP           |
+-----+---------------+--------------+------+---------------------+
| 450 |           554 |            5 |    5 | gwene.com.economist |
| 451 |           555 |            5 |    5 | gwene.com.economist |
| 452 |           556 |            5 |    5 | gwene.com.economist |
| 453 |           557 |            5 |    5 | gwene.com.economist |
+-----+---------------+--------------+------+---------------------+
4 rows in set (0.02 sec)

mysql> 
mysql> show tables;
+------------------+
| Tables_in_usenet |
+------------------+
| articles         |
| newsgroups       |
+------------------+
2 rows in set (0.01 sec)

mysql> describe articles;
+---------------+------------+------+-----+---------+----------------+
| Field         | Type       | Null | Key | Default | Extra          |
+---------------+------------+------+-----+---------+----------------+
| ID            | bigint(20) | NO   | PRI | NULL    | auto_increment |
| MESSAGENUMBER | int(11)    | YES  |     | NULL    |                |
| NEWSGROUP_ID  | bigint(20) | YES  | MUL | NULL    |                |
+---------------+------------+------+-----+---------+----------------+
3 rows in set (0.00 sec)

mysql> describe newsgroups;
+-----------+--------------+------+-----+---------+----------------+
| Field     | Type         | Null | Key | Default | Extra          |
+-----------+--------------+------+-----+---------+----------------+
| ID        | bigint(20)   | NO   | PRI | NULL    | auto_increment |
| NEWSGROUP | varchar(255) | YES  |     | NULL    |                |
+-----------+--------------+------+-----+---------+----------------+
2 rows in set (0.00 sec)

mysql> 
```

我试图在`getRangeOfArticles`方法中复制 JPQL 中的那个 SQL 查询：

```
package net.bounceme.dur.usenet.driver;

import java.util.List;
import java.util.logging.Logger;
import javax.mail.Folder;
import javax.mail.Message;
import javax.persistence.*;
import net.bounceme.dur.usenet.model.Article;
import net.bounceme.dur.usenet.model.Newsgroup;

class DatabaseUtils {

    private static final Logger LOG = Logger.getLogger(DatabaseUtils.class.getName());
    private EntityManagerFactory emf = Persistence.createEntityManagerFactory("USENETPU");
    private EntityManager em = emf.createEntityManager();

    //SELECT MAX(MESSAGENUMBER) FROM articles LEFT OUTER JOIN newsgroups ON articles.NEWSGROUP_ID=newsgroups.ID  WHERE newsgroups.NEWSGROUP = "gwene.com.economist";
    public int getMaxMessageNumber(Folder folder) {
        int maxMessageNumber = 0;
        String newsgroup = folder.getFullName();
        String queryString = "select max(article.messageNumber) from Article article left join article.newsgroup newsgroup where newsgroup.newsgroup = '" + newsgroup + "'";
        try {
            maxMessageNumber = (Integer) em.createQuery(queryString).getSingleResult();
        } catch (Exception e) {
            LOG.severe("setting max to zero for " + newsgroup);
        }
        LOG.fine(folder.getFullName() + "\t" + maxMessageNumber);
        return maxMessageNumber;
    }

    //SELECT * FROM articles LEFT OUTER JOIN newsgroups ON articles.NEWSGROUP_ID=newsgroups.ID  WHERE newsgroups.NEWSGROUP = "gwene.com.economist" AND articles.ID BETWEEN 450 AND 500;   
    public List<Article> getRangeOfArticles(Page page) {
        String fullNewsgroupName = page.getFolder().getFullName();
        int minRange = page.getMin();
        int maxRange = page.getMax();
        String queryString = "select article from Article article left join article.newsgroup newsgroup where newsgroup.newsgroup = :newsGroupParam";
        TypedQuery<Article> query = em.createQuery(queryString, Article.class);
        query.setParameter("newsGroupParam", fullNewsgroupName);
        List<Article> results = query.getResultList();
        LOG.info(results.toString());
        return results;
    }

    public void persistArticle(Message message, Folder folder) {
        em.getTransaction().begin();
        String fullNewsgroupName = folder.getFullName();
        Newsgroup newsgroup = null;
        TypedQuery<Newsgroup> query = em.createQuery("SELECT n FROM Newsgroup n WHERE n.newsgroup = :newsGroupParam", Newsgroup.class);
        query.setParameter("newsGroupParam", fullNewsgroupName);
        try {
            newsgroup = query.getSingleResult();
            LOG.fine("found " + query.getSingleResult());
        } catch (javax.persistence.NoResultException e) {
            LOG.fine(e + "\ncould not find " + fullNewsgroupName);
            newsgroup = new Newsgroup(folder);
            em.persist(newsgroup);
        } catch (NonUniqueResultException e) {
            LOG.warning("\nshould never happen\t" + fullNewsgroupName);
        } /*
         * finally { if (em.getTransaction().isActive()) {
         * em.getTransaction().rollback(); }
         */
        Article article = new Article(message, newsgroup);
        em.persist(article);
        em.getTransaction().commit();
    }

    public void close() {
        em.close();
        emf.close();//necessary?
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:48:05.330

如果您想`Article`通过 s 的名称查询 s的集合，`Newsgroup`您可以执行以下操作：

```
String queryString = "select a from Article a where a.newsgroup.newsgroup = :newsGroupParam";
TypedQuery<Article> query = em.createQuery(queryString, Article.class);
query.setParameter("newsGroupParam", fullNewsgroupName);
List<Article> results = query.getResultList(); 
```

不要在 JPQL 中编写连接，让 JPA 为您完成工作。

作为一个额外的提示，您应该始终这样编写查询以防止 SQL 注入。

```
public int getMaxMessageNumber(Folder folder) {
    int maxMessageNumber = 0;
    String queryString = "select max(a.messageNumber) from Article a where a.newsgroup.newsgroup = :newsgroup";
    Query q = em.createQuery(queryString);
    q.setParameter("newsgroup", folder.getFullName());
    try {
        maxMessageNumber = (Integer) q.getSingleResult();
    } catch (Exception e) {
        LOG.severe("setting max to zero for " + newsgroup);
    }
    LOG.fine(folder.getFullName() + "\t" + maxMessageNumber);
    return maxMessageNumber;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T07:04:07.010

就查询而言，我相信`String queryString = "select article from Article article left join article.newsgroup newsgroup where newsgroup.newsgroup = :newsGroupParam and article.messageNumber between 100 and 500";`虽然我需要在其中添加一些参数以用于范围。见`getRangeOfArticles`下文：

```
package net.bounceme.dur.usenet.driver;

import java.util.ArrayList;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.mail.Folder;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.persistence.*;
import net.bounceme.dur.usenet.model.Article;
import net.bounceme.dur.usenet.model.Newsgroup;
import net.bounceme.dur.usenet.model.Usenet;

class DatabaseUtils {

    private static final Logger LOG = Logger.getLogger(DatabaseUtils.class.getName());
    private EntityManagerFactory emf = Persistence.createEntityManagerFactory("USENETPU");
    private EntityManager em = emf.createEntityManager();

    //SELECT MAX(MESSAGENUMBER) FROM articles LEFT OUTER JOIN newsgroups ON articles.NEWSGROUP_ID=newsgroups.ID  WHERE newsgroups.NEWSGROUP = "gwene.com.economist";
    public int getMaxMessageNumber(Folder folder) {
        int maxMessageNumber = 0;
        String newsgroup = folder.getFullName();
        String queryString = "select max(article.messageNumber) from Article article left join article.newsgroup newsgroup where newsgroup.newsgroup = '" + newsgroup + "'";
        try {
            maxMessageNumber = (Integer) em.createQuery(queryString).getSingleResult();
        } catch (Exception e) {
            LOG.severe("setting max to zero for " + newsgroup);
        }
        LOG.fine(folder.getFullName() + "\t" + maxMessageNumber);
        return maxMessageNumber;
    }

    //SELECT * FROM articles LEFT OUTER JOIN newsgroups ON articles.NEWSGROUP_ID=newsgroups.ID  WHERE newsgroups.NEWSGROUP = "gwene.com.economist" AND articles.ID BETWEEN 450 AND 500;   
    public List<Article> getRangeOfArticles(Page page) {
        String fullNewsgroupName = page.getFolder().getFullName();
        int minRange = page.getMin();
        int maxRange = page.getMax();
        String queryString = "select article from Article article left join article.newsgroup newsgroup where newsgroup.newsgroup = :newsGroupParam and article.messageNumber between 100 and 500";
        TypedQuery<Article> query = em.createQuery(queryString, Article.class);
        query.setParameter("newsGroupParam", fullNewsgroupName);
        List<Article> articles = query.getResultList();
        Usenet usenet = Usenet.INSTANCE;
        for (Article article : articles) {
            List<String> string = new ArrayList<>();
            string.add(article.getId().toString());
            string.add(Long.toString(article.getMessageNumber()));
            Message message = usenet.getMessage(page.getFolder(), article.getMessageNumber());
            try {
                string.add(message.getSubject());
            } catch (MessagingException ex) {
                Logger.getLogger(DatabaseUtils.class.getName()).log(Level.SEVERE, null, ex);
            }
            Newsgroup n = article.getNewsgroup();
            string.add(n.getNewsgroup());
            LOG.info(string.toString());
        }
        return articles;
    }

    public void persistArticle(Message message, Folder folder) {
        em.getTransaction().begin();
        String fullNewsgroupName = folder.getFullName();
        Newsgroup newsgroup = null;
        TypedQuery<Newsgroup> query = em.createQuery("SELECT n FROM Newsgroup n WHERE n.newsgroup = :newsGroupParam", Newsgroup.class);
        query.setParameter("newsGroupParam", fullNewsgroupName);
        try {
            newsgroup = query.getSingleResult();
            LOG.fine("found " + query.getSingleResult());
        } catch (javax.persistence.NoResultException e) {
            LOG.fine(e + "\ncould not find " + fullNewsgroupName);
            newsgroup = new Newsgroup(folder);
            em.persist(newsgroup);
        } catch (NonUniqueResultException e) {
            LOG.warning("\nshould never happen\t" + fullNewsgroupName);
        } /*
         * finally { if (em.getTransaction().isActive()) {
         * em.getTransaction().rollback(); }
         */
        Article article = new Article(message, newsgroup);
        em.persist(article);
        em.getTransaction().commit();
    }

    public void close() {
        em.close();
        emf.close();//necessary?
    }
} 
```

但是，我似乎遇到了一些错误：

```
Aug 06, 2012 12:00:02 AM net.bounceme.dur.usenet.model.Usenet getMessage
SEVERE: null
javax.mail.MessageRemovedException: No such article: 273 
```

所以也许查询语法或含义有错误，或者我有一个逻辑错误。**

# php - 如何在 PHP 中存储电子邮件模板？

> ID：11822033
> 
> 赞同：1
> 
> 时间：2012-08-06T02:57:55.290
> 
> 标签：php, sendmail

我有以下代码向用户发送验证电子邮件，其中包含一些变量，例如用于验证的用户名和令牌。变量显然会因人而异。但是，我想将此消息单独存储在 PHP include_path 中，以便在需要时可以在其他地方重新使用它。我不想像现在这样对它进行硬编码：

```
$to = $username;
$subject = 'Account Verification';
$now = date('Y-m-d H:i:s',time());
$message = "
Date sent:$now

Thanks for signing up! 

Your account has been created, however we need to verify that this is your email address. Here is your verification token which you should copy and paste on the verification page:

<strong>$token</strong>

Alternatively, click the below link to activate your account:

http://localhost/login/verification.php?username=$username&token=$token 

If you did not register with us. You <a href='http://localhost/login/'>can click</a> here to report this to us, or ignore this email.

Thanks,

The LocalHost Team
";
mail($to, $subject, $message); 
```

所以三个问题：

1.  如何以仍然可以访问变量的方式将此消息存储为像模板一样？
2.  如何将此消息转换为带有 h​​tml 标记的精美 HTML 格式的消息？
3.  我可以这样做：

    $to = $用户名；$subject = '账户验证'; $now = date('Ymd H:i:s',time()); $message = 包括“verification_template.php”；邮件（$to，$subject，$message）；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T03:01:30.007

我像这样解决包含：

```
ob_start();
include $filename;
$message = ob_get_clean(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T03:21:23.217

除了php，您可以使用[Smarty](http://www.smarty.net/)等模板引擎生成电子邮件所需的 html/文本。

使用模板引擎的优点是您的模板可以包含简单的逻辑（例如条件、用于处理动态数据的循环。

# oracle - 我们可以使用 System.Data.OracleClient 将 List<> 发送到 Oracle 存储过程吗？

> ID：11822036
> 
> 赞同：0
> 
> 时间：2012-08-06T02:58:14.383
> 
> 标签：oracle, odp.net

我需要将几个`List<>`对象发送到 Oracle 存储过程。我可以使用 ODP 做到这一点。

但我只是想确认`System.Data.OracleClient`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T18:46:41.277

`System.Data.OracleClient`不接受列表作为存储过程的参数。事实上，它也不允许标准数组。实际上，您唯一能做的就是序列化封装在 List 中的数据，并将其作为 String (Varchar2) 传递到存储过程中，然后在过程中拆分它。但这实际上取决于您的列表包含什么样的数据，以及它的动态程度。

# android - 当您可以使用服务时，为什么还要使用 AsyncTasks？

> ID：11822039
> 
> 赞同：1
> 
> 时间：2012-08-06T02:58:56.237
> 
> 标签：android, multithreading, asynchronous

当您学习为 Android 开发时，您会了解到如果在 ui 线程中运行任何类型的进程（需要超过 5 秒），系统将显示臭名昭著的 ANR 消息。就在那时他们介绍了邪恶的怪物...... AsyncTask。一开始你认为这个类是你的救星，但后来你意识到它是开发中最大的问题......处理旋转或 ui 事件变得如此成问题，甚至是痛苦的。你们怎么看... AsyncTasks 值得麻烦吗？无论屏幕旋转如何，还有其他方法可以减少执行长时间运行的任务的问题吗？我想你可能会说，嘿，你为什么不把它变成一个服务......是的，这是一个解决方案，但是让我们来看看我真正的问题。为什么我们不直接使用服务并完全停止使用 AsyncTasks...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T03:14:29.390

在开发过程中，为执行选择合适的组件总是好的。您需要明确您的要求，并根据要求在 a`Service`或`AsyncTask`.

*   服务是一个独立于任何其他组件的 Android 组件。活动可能来来去去，但如果您愿意，服务可以持续存在。它们扮演着许多角色，从管理多个活动所依赖的状态到充当 cron 作业，再到处理更长的应用程序小部件更新。

*   AsyncTask 是一个安排在主应用程序线程之外做一些工作的类。对于 AsyncTask 的实现者和用户来说，它如何执行这种魔法通常并不重要。实际上，它使用线程池和工作队列。AsyncTask 使用 Handler 来帮助安排在主应用程序线程上完成的选定工作（例如，通知用户进度更新）。

有关更多说明，请参阅它们之间的区别。

![在此处输入图像描述](../Images/7571657d1d73e13c21cca3e99a98bee1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T21:56:36.193

AsyncTasks 和 Services 不是对等的。任何一个都可以调用另一个，它们的目的是不同的。我只有几件事要添加到路西法的回答中。

要记住的关键一点是，如果您的进程在后台，托管一个服务并被杀死，那么该服务将在某个时候重生。对于可能在进程中运行的 AsyncTask 被杀死时，情况并非如此。这意味着在服务中完成的工作可以保证在未来取得进展（尽管不能保证何时）。如果您有*必须*完成的工作，最好在服务中完成。

对 Service.onStart 和 Service.onStartCommand 的调用发生在进程的主线程上。如果您长时间阻止此操作，您将获得相同的“应用程序无响应”对话框。因此，在 Service 中使用 AsyncTask 可以很好地完成实际工作。

我倾向于使用从 Activity 启动的 AsyncTasks 来处理与 UI 相关的事情。这些通常是不需要工作的事情，它们的工作可以在未来轻松地重做。例如，这可能是从磁盘读取一堆图像或调用 Web 服务以查看用户是否有任何通知。这项工作可以再次完成，如果 UI 因进程被终止而被破坏，则无论如何都可能需要再次完成这项工作。

另一方面，如果您想说尽快将一组照片上传到网络，我会将其发送给一个服务，该服务将使用一个或多个 AsyncTasks 来完成。这是我想要完成的工作，如果它被打断，我想继续。如果您要使用服务，请考虑使用 IntentService，以便您的服务在其工作完成时停止。

# ruby-on-rails-3 - Rails respond_with 删除资源的行为？

> ID：11822045
> 
> 赞同：0
> 
> 时间：2012-08-06T03:00:00.887
> 
> 标签：ruby-on-rails-3

我在 Rails 3 中使用 respond_to 和 respond_with 对来响应 DELETE #destroy 请求。销毁操作在 UsersController 中定义。它销毁指定的用户`params[:id]`并使用 JS 模板进行响应。但是，该请求在 RSpec 测试中一直失败，我不确定如何修复它。

这是我的 UsersController 的片段：

```
class UsersController < ApplicationController
  respond_to :html, only: [:index, :show, :new, :edit]
  respond_to :js, only: [:create, :update, :delete]
  ...

  def destroy
    @user = User.find(params[:id])
    @user.destroy

    respond_with @user
  end
end 
```

这是不断失败的测试：

```
require 'spec_helper'

describe UsersController do
  ...

  describe "DELETE #destroy" do
    before { @user = create(:user); delete :destroy, id: @user.id, format: :js }

    it "return HTTP success" do
      response.should be_success
    end

    it "respond with JS content" do
      response.content_type.should == 'text/javascript'
    end
  end
end 
```

测试“响应 JS 内容”确实成功，但是测试“返回 HTTP 成功”失败。当我使用调试器检查`response.code`时，它是 406。由于删除成功，我期待 2xx。这是正常的 Rails 行为还是我的代码有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T07:40:35.107

似乎你搞砸了 REST`delete`和控制器的`destroy`. Rails 响应者对 :delete action, change 一无所知

```
respond_to :js, only: [:create, :update, :delete] 
```

至

```
respond_to :js, only: [:create, :update, :destroy] 
```

或将块传递给响应者，而不是

```
respond_with @user 
```

利用

```
respond_with @user do |format|
 format.js
end 
```

# perl - Perl 中的“在标量 chomp 中使用未初始化的值”

> ID：11822049
> 
> 赞同：2
> 
> 时间：2012-08-06T03:00:33.063
> 
> 标签：perl, chomp

运行脚本时出现以下错误：有人可以帮我解决这个问题吗

```
Use of uninitialized value $user in scalar chomp at ./temp.pl line 38, <DATA> line 558.
Use of uninitialized value $modelName in scalar chomp at ./temp.pl line 39, <DATA> line 558.
Use of uninitialized value $Application in scalar chomp at ./temp.pl line 40, <DATA> line 558.
Use of uninitialized value $user in string eq at ./temp.pl line 42, <DATA> line 558. 
```

代码如下，有人可以帮助我吗：

```
my ($user) = $ARGV[0];
my ($modelName) = $ARGV[1];
my ($Application) = $ARGV[2];

chomp($user);
chomp($modelName);
chomp($Application);

if ( ($user eq "") || ($modelName eq "") || ($Application eq "")) {
  &usage;
}

sub usage {
  print "\tUsage : $0 User ModelName Application\n";
  exit (1);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T03:04:33.083

该程序在命令行上需要参数 - 用户、模型名称和应用程序 - 而您没有提供任何参数

不需要`chomp`从命令行传递值，因为它永远不会以新行结尾

你的代码最好这样写

```
usage() unless @ARGV == 3;

my ($user, $modelName, $Application) = @ARGV; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T04:03:53.050

假设您在运行程序时在命令行上输入了三个参数。但是，没有检查您是否在程序中这样做。因此，如果没有第一个参数，`$ARGV[0]`则为 null，而`$user`. 当你`chomp`使用时，你会得到一个错误。这是您的程序稍作修改的版本：

```
use strict;
use warnings;

# Let's give some directions

my $usage <<USAGE;

    Usage: <program> <user> <model> <application>

    All parameters are required!

USAGE

if (scalar @ARGV != 3) {
   die "$usage";
}

my $user =        shift;
my $modelName =   shift;
my $Application = shift;

# No need for this

chomp $user;
chomp $modelName;
chomp $Application; 
```

* * *

注意几点：

*   我有`use strict`和`use warnings`pragmas。始终在所有程序中使用这些。这些有助于发现人们在程序中犯的大约 90% 的错误。
*   在我做任何其他事情之前，我会检查论点是否存在。我过去常常`scalar`强制`@ARGV`给我它的标量值（在这种情况下它无论如何都会这样做），并查看其中是否实际上有三个并且只有三个值。如果没有三个值，我给出用法文本。
*   您不需要 chomp 命令行参数。仅在文件输入时才真正需要 Chomping，因为每个文件行都使用其 EOL 字符或字符读入。这主要是为了确保`<...>`如果该行只是空白，则不会返回零。如果该行为空白，您将`<...>`至少返回一个 NL 字符。

还有一件事...

我喜欢使用`$usage`文本而不是子程序。我将使用文本设置在程序的最顶部，查看我的代码的人可以看到它，并准确阅读程序的使用方式。我也可以将我的使用文本放在一个`die`声明中。

另外，在子程序中打印任何东西都是不好的形式。子程序应该返回调用程序可以操作的值。

# sql - 数字作为 SQLAlchemy 查询中的列

> ID：11822050
> 
> 赞同：0
> 
> 时间：2012-08-06T03:00:47.937
> 
> 标签：sql, sqlalchemy

如何在 SQL 查询中表达“c”列，如下所示：

```
SELECT a, b, 0 AS c
FROM mytable 
```

SQLAlchemy 代码：

```
session.query(mytable.c.a, mytable.c.b, {???, c is a dynamic column}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T04:33:06.380

```
from sqlalchemy.sql.expression import literal_column
session.query(mytable.c.a, mytable.c.b, literal_column(u'0').label(u'c')) 
```

# winapi - Win32 API 类似于 CreateProcess，但适用于 bat/cmd/等。（即使用PATHEXT）

> ID：11822051
> 
> 赞同：1
> 
> 时间：2012-08-06T03:00:55.503
> 
> 标签：winapi, createprocess

如果您使用[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)，它[显然](https://github.com/joyent/node/issues/2318#issuecomment-7465665)只适用于 .exe 文件。使它与其他可执行文件类型一起工作的最佳方法是什么？

到目前为止，我们最好的办法是预先`cmd /c`处理此类情况。这真的是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T04:19:30.193

批处理文件在技术上不是可执行文件，它们只是注册为使用`cmd`. 正如您提到您需要操作 I/O 句柄的能力，您最好的选择确实是使用`CreateProcess`with `cmd /c`。

# c++ - C++ 2010 Express Protobuf 编译错误

> ID：11822054
> 
> 赞同：0
> 
> 时间：2012-08-06T03:01:22.707
> 
> 标签：c++, protocol-buffers

我在为 .lib 和 .dll 编译 protobuf 源代码（2.4.1）时遇到了很多麻烦。我按照谷歌在自述文件中的说明，逐字逐句，但 gtest 有重大错误。虽然，我得到了 libprotobuf.lib、libprotobuf-lite.lib 和 libprotoc.lib，但 gtest 失败重要吗？此外，我可以将 libprotobuf 编译为 .dll，但对于 libprotobuf-lite.dll 和 libprotoc.dll，构建失败并出现错误。

我的问题：我如何仍然使用 protobuf 在 msvc++ 2010 express 中进行编程。还有其他人实现它吗？

谢谢。

编辑:: 一些构建错误...

```
1>------ Build started: Project: libprotobuf, Configuration: Debug Win32 ------
2>------ Build started: Project: gtest, Configuration: Debug Win32 ------
3>------ Build started: Project: libprotobuf-lite, Configuration: Debug Win32 ------
2>  gtest.cc
3>  zero_copy_stream_impl_lite.cc
1>  zero_copy_stream_impl_lite.cc
2>c:\users\null\desktop\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h(745): error C3855: 'std::tr1::tuple_element': template parameter '_Idx' is incompatible with the declaration
2>c:\users\null\desktop\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h(757): error C2039: 'type' : is not a member of 'std::tr1::tuple_element'
2>          c:\users\null\desktop\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h(742) : see declaration of 'std::tr1::tuple_element'
2>c:\users\null\desktop\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h(757): error C2146: syntax error : missing ',' before identifier 'type'
2>c:\users\null\desktop\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h(757): error C2065: 'type' : undeclared identifier
2>c:\users\null\desktop\protobuf-2.4.1\protobuf-2.4.1\gtest\include\gtest\internal\gtest-tuple.h(761): error C2039: 'type' : is not a member of 'std::tr1::tuple_element' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T13:39:45.327

我也有这个。感谢 jahhaj 的指点。我尝试在 gtest-tuple.h 中将 tuple_element 更改**为**tuple__element **（**双下划线）。它被使用了 3 次，其中一次在评论中。

然后在 Debug 和 Release 中一切都编译得很好，并且所有测试都成功运行。

There were a few warnings that came up during the compilation but as far as I could tell they were either deliberate or vagaries of Visual Studio.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T19:31:03.783

好吧，我可以告诉你问题是什么，如果不是解决方案。gtest 标头之一是定义一个名为`std::tr1::tuple_element`. MS 定义了一个同名的不同类，你可以在 <utility> 头文件中找到它。除了等待谷歌这样做之外，我没有看到任何解决此问题的方法。这是已向他们[报告](https://groups.google.com/forum/?fromgroups#!topic/protobuf/wNVDiburA1Q%5B1-25%5D)的问题。

或者，您可以下载[预编译的 Windows 版本](http://code.google.com/p/protobuf/downloads/detail?name=protoc-2.4.1-win32.zip&can=2&q=)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T01:41:38.387

I experienced this problem as well. Since I was using `Visual Studio 2010`, `std::tr1::tuple` is actually defined.

Reading a bit in the README file, section **Choosing a TR1 Tuple Library**, lead me to trying the compiler flag `-DGTEST_USE_OWN_TR1_TUPLE=0` or in Visual Studio would simply be `GTEST_USE_OWN_TR1_TUPLE=0`.

This solved my issue since this tuple is already defined in the TR1 features provided in Visual Studio 2010.

# xml - Xmlstarlet，多个元素和日期排除

> ID：11822056
> 
> 赞同：1
> 
> 时间：2012-08-06T03:01:41.450
> 
> 标签：xml, linux, bash, terminal, xmlstarlet

我从来没有使用过 xmlstarlet，所以我只是通过输入和所需的输出来保持简单，希望我可以从发布的答案中学到一些东西。

输入：

```
<channel>
    <title>
    <link>http://www.MYDOMAIN.com/</link>
    <description></description>
    <ttl>60</ttl>
    <category>Sports</category>

        <item>
             <sport><![CDATA[Women's Soccer]]></sport>
             <opponent><![CDATA[South Carolina (Exhibition)]]></opponent>
             <location><![CDATA[Columbia, S.C.]]></location>
             <date>08/09/2012</date>
             <time>7:00 PM</time>
             <tv><![CDATA[]]></tv>
             <tournamentname><![CDATA[]]></tournamentname>
             <homeaway>A</homeaway>
        </item>     

        <item>
             <sport><![CDATA[Men's Soccer]]></sport>
             <opponent><![CDATA[Ohio State (Exhibition)]]></opponent>
             <location><![CDATA[Fort Wayne, Ind.]]></location>
             <date>08/17/2012</date>
             <time>7:00 PM</time>
             <tv><![CDATA[]]></tv>
             <tournamentname><![CDATA[]]></tournamentname>
             <homeaway>H</homeaway>
        </item>     

        <item>
             <sport><![CDATA[Women's Soccer]]></sport>
             <opponent><![CDATA[William and Mary]]></opponent>
             <location><![CDATA[Williamsburg, Va.]]></location>
             <date>08/17/2012</date>
             <time>7:00 PM</time>
             <tv><![CDATA[]]></tv>
             <tournamentname><![CDATA[]]></tournamentname>
             <homeaway>A</homeaway>
        </item> 
```

期望的输出：

```
Women's Soccer Away @ South Carolina (Exhibition) at 7:00 PM
Men's Soccer Home vs Ohio State at 7:00 PM
Women's Soccer Away @ William and Mary at 7:00 PM 
```

一些事情使这不仅仅是简单的数据操作

1）我想删除所有没有`<date>`当前日期的数据

2）从所需的输出中可以看出，我希望元素的 A 结果`<homeaway>`显示文本“Away @”，我希望 H 标签显示文本“Home vs”

非常感谢您的帮助，我真的很感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:46:23.600

```
xmlstarlet sel --text -t \
    -m '//channel[category="Sports"]/item[date="'$(date +%m/%d/%Y)'"]' \
    -v sport -o ' ' \
    --if 'homeaway="H"' -o 'Home vs' --else -o 'Away @' -b -o ' ' \
    -v opponent -o ' ' \
    -o 'at ' -v time --nl \
    /tmp/rss.xml 
```

*   -m（或--match）开始一个foreach循环
*   -b（或--break）表示endif（实际上它是一个通用的端块或右大括号）

# ruby-on-rails - Sublime Text 2：如何为 Guardfile 设置一致的语法高亮？

> ID：11822057
> 
> 赞同：6
> 
> 时间：2012-08-06T03:01:48.767
> 
> 标签：ruby-on-rails, syntax-highlighting, sublimetext, sublimetext2, guard

虽然在 Sublime Text 中为给定（打开）文件设置语言很容易，但我想知道是否有任何方法可以提前告诉编辑器任何称为“Guardfile”的东西都应该像 Ruby 代码一样突出显示. 有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T03:32:09.577

Brian 在评论中推荐的插件都很好地完成了这项工作：

1.  [应用语法](https://github.com/facelessuser/ApplySyntax)
2.  [语法来自文件名](http://brizzled.clapper.org/blog/2012/02/06/%E2%80%A6)

**更新：**

由于某种原因，我无法让 SyntaxFromFileName 匹配我的任何正则表达式。另一方面，**DetectSyntax 带有*内置***Guardfile 的语法高亮显示。

**更新2：**

DetectSyntax 已[重命名](https://github.com/phillipkoebbe/DetectSyntax)为 ApplySyntax

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-08T23:01:39.527

Putting the following at the top of said file also works

```
#!/usr/bin/env ruby 
```

# linux - 在 BSD 中禁用 snmpd 登录？

> ID：11822058
> 
> 赞同：0
> 
> 时间：2012-08-06T03:01:51.543
> 
> 标签：linux, logging, snmp, bsd

我可以在 RHEL 或 CentOS 中禁用 SNMP 日志`snmpd.options`，但在 BSD 中找不到任何解决方案。有谁知道如何禁用它或更改日志位置？
SNMP 消息总是填满我的 /var 目录，这很烦人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:29:51.043

您可以配置传递给守护程序的选项，但如何配置它取决于 BSD（很像 Linux 发行版之间的不同）。因此，您最好参考文档。

对于通过端口安装的 FreeBSD 9.x + net-snmp，您可以在`/usr/local/etc/rc.conf`variable中进行配置`snmpd_flags`。检查`/usr/local/etc/rc.d/snmpd`它是如何使用的。

# google-app-engine - 是否可以更改实体的命名空间（NDB）

> ID：11822059
> 
> 赞同：4
> 
> 时间：2012-08-06T03:02:08.483
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

我想知道这是否是在数据存储中实现“垃圾桶”的一种简单方法。

* * *

抱歉，我的想法是，如果更改实体的命名空间很容易，那么您可以拥有一个命名空间，例如“deleted”，它将隐藏主命名空间中的实体，但让它们易于恢复。我在文档中找不到任何东西，但我想我会把问题放在那里以防万一..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T06:05:01.967

命名空间是实体键的一部分，一旦创建实体就不能更改。唯一的方法是创建新实体，复制属性并删除原始实体。

# android - 如何使用 android 4.0 为视频添加视觉效果

> ID：11822063
> 
> 赞同：4
> 
> 时间：2012-08-06T03:03:00.663
> 
> 标签：android, effect

如何使用 android 4.0 为视频添加视觉效果？Android4.0有打包效果，说可以在视频中使用，但是我不知道怎么用。

# java - Spring AOP 表达式中访问修饰符有什么用？

> ID：11822064
> 
> 赞同：5
> 
> 时间：2012-08-06T03:03:20.473
> 
> 标签：java, spring, spring-aop

来自[Spring 文档](http://static.springsource.org/spring/docs/2.5.x/reference/aop.html)：

> *6.2.3.4。例子*
> 
> Spring AOP 用户可能最常使用执行切入点指示符。执行表达式的格式为：
> 
> 执行（**修饰符模式？** ret 类型模式声明类型模式？名称模式（参数模式）抛出模式？）

我可以看到修饰符模式？您可以说公共，私人，受保护的地方。在同一份文件中，它说：

> *6.2.3.1。支持的切入点指示符*
> 
> 由于 Spring 的 AOP 框架基于代理的性质，根据定义，受保护的方法不会被截获，对于 JDK 代理（这不适用）和 CGLIB 代理（这在技术上可行但不推荐用于 AOP 目的）都是如此。**因此，任何给定的切入点都只会与公共方法匹配！**

我有点困惑，使用修饰符模式有什么意义？请举个例子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T07:41:47.523

该文档现在已过时。最新的是[https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/core.html#aop-pointcuts-designators](https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/core.html#aop-pointcuts-designators)并说

> 由于 Spring 的 AOP 框架基于代理的特性，根据定义，目标对象内的调用不会被拦截。对于 JDK 代理，只能拦截代理上的公共接口方法调用。使用 CGLIB，代理上的公共和受保护的方法调用被拦截（如果需要，甚至包可见的方法）。但是，通过代理的常见交互应始终通过公共签名进行设计。
> 
> 请注意，切入点定义通常与任何拦截的方法匹配。如果切入点严格来说是只公开的，即使在 CGLIB 代理场景中，通过代理进行潜在的非公开交互，也需要相应地定义它。
> 
> 如果您的拦截需求包括目标类中的方法调用甚至构造函数，请考虑使用 Spring 驱动的原生 AspectJ 编织，而不是 Spring 的基于代理的 AOP 框架。这就构成了具有不同特点的不同AOP使用模式，所以在做决定之前一定要让自己熟悉编织。

所以要小心非公共访问修饰符，但你可以在某些情况下使用它们与 cglib 代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:12:02.087

您使用与切入点声明相关的访问修饰符来控制切入点声明在应用程序中的可见位置。

切入点声明与常规 Java 方法具有相同的访问修饰符：

> 1.  public，切入点声明在您的整个应用程序方面都是可见的；
> 2.  默认（未指定修饰符），切入点声明对同一包中的所有其他方面可见；
> 3.  受保护，切入点声明仅对子方面可见；
> 4.  私有的，切入点声明仅在声明的方面可见。

# python - Python 语法错误

> ID：11822065
> 
> 赞同：1
> 
> 时间：2012-08-06T03:03:27.920
> 
> 标签：python

我的代码有一些问题。我正在遵循“使用 Python 和 Pygame 开始游戏开发”一书中的一个示例（示例 2-4 和 2-5），我遇到了语法错误。下面是有问题的代码。我是 Python 新手，可能只是打错字了。

本书使用python 2.4。我收到 2.7 和 3.2 的错误。

两个问题：

代码行：

```
my_tank = Tank("Bob") 
```

收到语法错误。`my_tank`突出显示。我确实让它开始工作，但我不确定它为什么开始工作。

代码行：

```
print self.name, "fires on", enemy.name 
```

也收到语法错误。此`self`行中的 高亮显示。开始工作时`my_tank`，我开始收到此错误。不知道这里发生了什么。

```
class Tank(object):

    def _init_(self, name):
        self.name = name
        self.alive = True
        self.ammo = 5
        self.armor = 60

    my_tank = Tank("Bob")

    def _str_(self):

        if self.alive:
            return "%s (%i armor, %i shells)" % (self.name, self.armor, self.ammo)
        else:
            return "%s (dead)" % self.name

    def fire_at(self, enemy):

        if self.ammo >= 1:
            self.ammo -= 1
            print self.name, "fires on", enemy.name
            enem.hit()
        else:
            print self.name, "has no shells!"

    def hit(self):

        self.armor -= 20
        print self.name, "is hit!"
        if self.armor <= 0:
            self.explode()

    def explode(self):

        self.alive = False
        print self.name, "explodes!" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T03:07:21.583

正如@aland 所说，函数名应该是`__init__`and `__str__`。

此外，这一行应该在课堂*之外*：

```
my_tank = Tank("Bob") 
```

毕竟，您想要一个类的*实例*供以后使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T03:24:04.657

chrsaycock 的[回答](https://stackoverflow.com/a/11822089/1322401)看起来是正确的，但我想强调注意您收到的回溯是多么重要。

当我运行您的代码时，我收到此错误：

```
Traceback (most recent call last):
  File "<pyshell#86>", line 1, in <module>
    class Tank(object):
  File "<pyshell#86>", line 9, in Tank
    my_tank = Tank("Bob")
NameError: name 'Tank' is not defined 
```

您的问题应该类似于“为什么我在`NameError`这里得到一个？我已经`Tank`在第一行定义了。”

不要将此错误视为一般语法错误。错误的*类型*告诉你很多你需要知道的东西。

# r - gvisMerge + gvisAnnotatedTimeLine 常用 RangeSelector

> ID：11822066
> 
> 赞同：3
> 
> 时间：2012-08-06T03:03:42.490
> 
> 标签：r, merge, range, google-visualization, annotatedtimeline

我`gvisMerge`用来把几个`gvisAnnotatedTimeLine`对象放在一起。是否所有 gvisAnnotatedTimeLine 对象都可以使用相同的 RangeSelector，即如果我在一个`gvisAnnotatedTimeLine`图表中选择两个日期/时间之间的范围，它随后会自动调整合并在一起的其他图表的范围以反映相同的范围？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T07:04:09.397

我很确定答案是***否定***的。

如果*gvisMerge*可以更改传递给它的 googleVis 对象的参数值，那么它将需要一个访问器方法和一个修改器方法（即，一个*getter*和一个*setter*），这两者都没有。

更重要的是，*gVisMerge*纯粹是为了在单个 HTML 页面上放置*两个*googleVis 对象（事实上，一次格式化两个以上的 googleVis 对象需要多次递归调用*gvisMerge*）。

如果您查看gVisMerge*的***方法签名**：

 *```
gvisMerge(x, y, horizontal = FALSE,
            tableOptions = "border=\"0\"", 
            chartid
) 
```

除了*x*和*y*（要在单个 HTML 页面上合并的两个 googleVis 对象）和*chartid*，它要求新的 mreged googleVis 对象具有唯一的 chartid，gvisMerge*的参数都与格式或样式有关：*

*Horizo​​ntal = FALSE*：两个图表是并排放置还是上下放置（默认）

*tableOptions*：纯 HTML 格式（例如，用于设置 HTML 页面的背景颜色或通过*gvisMerge*放置在页面上的两个图表之间的间距）

* * *

*不*使用 gvisMerge的解决方案：

从 googleVis 构造函数创建的图表是类*gvis*和类*list*的 R 对象。

gvis 对象的一个​​组件是***jsDrawChart***，它将数据和适当的 google 可视化 API 函数与用户选项（googleVis 函数的参数值）结合起来。

因此，您希望访问和修改传递给此函数的参数，但您必须在将 googleVis 对象（图表）传递给 gvisMerge*之前**执行*此操作——因为一旦您调用*gvisMerge*，您就会拥有一个新的 gvis 对象，其中原始带注释的时间线图是其中之一。

 **更重要的是，googleVis创建的图表在Flash中呈现；显然，您应该尽早在工作流程中修改 googleVis 对象。我的猜测是这应该不难，因为您需要为轴设置常见的最小值和最大值就是每个图表显示的数据集。因此，只需*事先*计算一个共同的范围：

```
> r1 = range(d1)
> r2 = range(d2)

> r1
  [1]  0.23 .75

> r2
  [1]  0.11 0.46 
```

将调用返回的值附加到每个 AnnotatedTimeLine 图表的范围，然后为每次调用 AnnotatedTimeLine 传递此聚合范围，这显然会给从构造函数绘制的每个图表在给定轴上相同的最小值和最大值。

```
r12 = append(r1, r2) 
```***

# php - 如何在 ATK 中跨 API 使用模板？

> ID：11822074
> 
> 赞同：0
> 
> 时间：2012-08-06T03:04:51.053
> 
> 标签：php, frameworks, atk4

我已经关注了视频商店和 Jobet 示例，并且我正在尝试在 ./admin 子目录中创建一个管理员界面。但是，我想使用模板，我不确定是否需要创建一个新的模板目录，即 ./admin/templates/ 或者我可以使用默认模板，即 ./templates/default/ 由主要API？

下面是网站的控制流程：

1) /admin/index.php <- 实例化 /admin/lib/AdminFrontend

2) /admin/lib/AdminFrontend <- 调用 /admin/page/index.php （隐式）登录管理员。

在 /admin/page/index.php 内部，它设置了一个登录页面并调用 defaultTemplate() 函数：

```
function defaultTemplate(){
    return array('page/login');
} 
```

但是，我收到错误消息“在所有者的模板中找不到 Spot”。

我尝试使用 AdminFrontend 中的 addlocation() 函数来添加根模板 (.template/default/)，但我无法让它工作。

```
$this->addLocation('../', array( 'template' => array('templates'),
   'php' => 'lib' )
)->setParent($this->pathfinder->base_location); 
```

所以没有找到登录模板，但我不确定atk在哪里寻找模板或如何更改它。

从 Roman 的帖子来看，似乎任何新的 API，例如管理员，出于安全原因都需要一个新的模板目录，因此普通用户和管理员界面之间不会共享任何页面/模板。

[在 ATK4 中，我可以从前端到后端定义不同的模板吗？](https://stackoverflow.com/questions/7407410/in-atk4-can-i-define-a-different-template-from-frontend-to-back-end)

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:31:19.593

不确定，但认为您可能想将子目录“admin”添加为 addLocation 的第一个参数，如下所示

```
 $this->addLocation('admin',array(
                'page'=>array(
                     'page',
                    ),
                'template'=>array(
                    'templates',
                    ),
                ))
        ->setParent($this->pathfinder->base_location); 
```

然后应该将 /admin/templates 添加到搜索模板的路径，并将 /admin/page 添加到它搜索页面的路径。

您也可以在仅用于管理员的不同 atkroot 下再次安装 atk4 文件夹。根据您的虚拟主机，您可以在管理页面上指向一个子域，例如 admin.yoursite.com，但它会使其与您的用户页面完全分开，但这是否可行取决于您是否有很多公共页面、视图和模型这将在用户和管理员之间共享，或者您是否愿意将所需的内容复制到管理员文件夹中。

# jquery - 两个 div 的响应式布局，其中一个具有固定长度的连续

> ID：11822075
> 
> 赞同：2
> 
> 时间：2012-08-06T03:04:53.847
> 
> 标签：jquery, html, css

*   我有两个 div
*   一个固定宽度20px；
*   我希望第二个 div 占用其父容器的所有可用剩余宽度
*   我不知道父容器的 px 宽度。我在“%s”中有它

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T03:07:55.570

制作第二个 div 的宽度，`100%`或者`auto`通过其边距删除第一个 div 的宽度。工作示例：http: [//jsfiddle.net/dAryP/](http://jsfiddle.net/dAryP/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T03:18:20.067

试试这个：

HTML：

```
<div id='wrapper'>
    <div id='first'/>
       first
    </div>
    <div id='second'/>
       second
    </div>    
</div> 
```

CSS：

```
#first {
   width: 20px;
   height:50px; // height is set for test
   background-color: red    
}

#second {
   height:50px;
   background-color: blue;
}

#wrapper div {
   float:left
} 
```

JS：

```
$(window).resize(function(){
   var r = $('#wrapper').width() - 20;
   $('#second').width(r)
}).resize() 
```

[演示](http://jsfiddle.net/MpPLr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T05:40:36.567

您不需要 javascript 来执行此操作，也不需要像其他人发布的那样多的 css；让这家伙需要的东西变得过于复杂：

HTML

```
<div id='wrapper'>
    <div id='first'/>
       &nbsp;
     </div>
    <div id='second'/>
       second
     </div>    
</div> 
```

​ CSS

```
#first {
   width: 20px;
   float: left;
} 
```

非浮动 div 将占据页面宽度的其余部分。

[http://jsfiddle.net/thundercracker/MpPLr/28/](http://jsfiddle.net/thundercracker/MpPLr/28/)

# php - PHP：根据所选选项加载特定区域

> ID：11822077
> 
> 赞同：0
> 
> 时间：2012-08-06T03:05:00.220
> 
> 标签：php, codeigniter

我有一个下拉菜单，其中包含来自数据库的动态设置值：

`view`选择一个值后，如何根据所选选项加载特定值？

我现在让它根据选择的选项加载一个特定的视图：

**代码：**

```
 if (isset($_REQUEST['general_options'])) {

            $page = strtolower(str_replace(" ", "", $_REQUEST['general_options']));

            $this->load->view( $page, $data, FALSE);
        } 
```

**如何根据所选问题动态生成包含特定问题的表单？**

**HTML：**

```
<label for="general_options">Quote Type: </label>
    <select name="general_options" id="general_options">

        <option value="Graphic Design">Graphic Design</option>

        <option value="Content Management System">Content Management System</option>

        <option value="Shopping Cart">Shopping Cart</option>

        <option value="E-Mail Marketing">E-Mail Marketing</option>

            </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:19:14.543

对于选项标签的值，您可以使用`id`s 而不是文本。然后，当用户提交表单时，您可以编写代码（服务器端）以使用选定的 id 查询数据库。如果你需要一种交互的方式，你可以使用 AJAX。

在 jQuery 中，有[get()](http://api.jquery.com/jQuery.get/)、[post()](http://api.jquery.com/jQuery.post/)和[ajax()](http://api.jquery.com/jQuery.ajax/)方法。你可以使用其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:26:27.370

我认为 php 将为此矫枉过正。我为此使用了jquery。你可以在[这里找到 jsfiddle](http://jsfiddle.net/gePcu/1/)

```
<label for="general_options">Quote Type: </label>
    <select name="general_options" id="general_options">
        <option value="graphic">Graphic Design</option>
        <option value="content">Content Management System</option>
        <option value="shopping">Shopping Cart</option>
        <option value="marketing">E-Mail Marketing</option>
</select><br/>

<div id="graphic" style="display:none;" class="questions">
    <p>Graphic content 1</p>
    <p>Graphic content 2</p>
    <p>Graphic content 3</p>
</div>

<div id="content" style="display:none;" class="questions">
<p>CMS content 1</p>
<p>CMS content 2</p>
<p>CMS content 3</p>
</div>

<div id="shopping" style="display:none;" class="questions">
<p>shopping content 1</p>
<p>shopping content 2</p>
<p>shopping content 3</p>
</div>

<div id="marketing" style="display:none;" class="questions">
<p>marketing content 1</p>
<p>marketing content 2</p>
<p>marketing content 3</p>
</div> 
```

和jQuery代码

```
$(document).ready(function() {
     $('#general_options').change(function() {

      theVal = $("#general_options").val();
     $('div.questions').each(function(){

        if(this.id == theVal){
            $('div.questions').hide();
            $('#'+this.id).show();
        }
    });         

  });   

});​
    ​ 
```

# android - 从数据库Android读取blob

> ID：11822078
> 
> 赞同：0
> 
> 时间：2012-08-06T03:04:59.617
> 
> 标签：android, database

我有一个预建的数据库，我使用 SQLiteMan 来填充包含短篇小说或文章的数据库，所以我有一个这样的表结构：

表：文本
id - 整数自增
标题 - 文本
内容 - blob

内容字段包含我从文本编辑器编辑的文本文件中的段落文本或字符串。

如何从数据库中以文本形式检索内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T03:13:41.570

您可以像这样获取您的 blob 数据。

```
byte[] byteArray = cursor.getBlob(columnIndex); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T03:49:58.617

鉴于您已询问*“作为文本”*，我将通过以下方式澄清先前的答案：

```
new String(cursor.getBlob(1), "utf-8"); 
```

当然，如果您使用了不同的字符集，那么您可以指定它而不是 utf-8。

# sharepoint - Sharepoint - UserProfile.PersonalSite 对于几个用户为空

> ID：11822079
> 
> 赞同：0
> 
> 时间：2012-08-06T03:05:01.753
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-api

我正在尝试获取我所有网站的公共 URL。我已经为每个登录名运行了此代码，并且除了一个用户之外，它的工作正常。对于这个用户，我在 up.PersonalSite 中得到了空值。我已经手动检查过，并且该用户的 mysite 存在。为什么 up.personalsite 返回 null 的任何想法。有什么建议么？

```
SPServiceContext context = SPServiceContext.GetContext(Site);
UP.UserProfileManager upm = new UP.UserProfileManager(context);
UP.UserProfile up = upm.GetUserProfile(LoginName);
 if (up.PersonalSite == null)
    return "#";
 else
    return up.PublicUrl.OriginalString; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:08:33.883

也许，您看到了现有用户的个人资料页面？(http://localhost/my/Person.aspx?accountname=DOMAIN%5CVPupkin) 用户应该自己创建您的站点，或者您可以通过编程方式创建

```
SPServiceContext context = SPServiceContext.GetContext(Site);
UP.UserProfileManager upm = new UP.UserProfileManager(context);
UP.UserProfile up = upm.GetUserProfile(LoginName);
up.CreatePersonalSite(); 
```

# vim - solarized 和 Terminal.app 的问题

> ID：11822081
> 
> 赞同：18
> 
> 时间：2012-08-06T03:06:00.320
> 
> 标签：vim, terminal

我真的很抱歉，因为我知道这个问题已经被问过很多次了。我已经完成了之前的所有问题，但我仍然没有在我的 Terminal.app 中为 OS X Mountain Lion 设置 Solarized 配色方案。到目前为止，这就是我所拥有的： ![在此处输入图像描述](../Images/6769dd36899bf309ee56a2c196c3cdc3.png)

我的 .vimrc 目前设置如下：

```
set number
syntax enable
set background="dark" 
colorscheme solarized 
```

但对于我的 MacVim，我得到了这个：

![在此处输入图像描述](../Images/39d515dc3972b7565fd51f58a0144331.png)

这也是我想让我的 Terminal.app 显示的内容。我的 .vimrc 对 MacVim 说的唯一内容是

```
colorscheme solarized 
```

**编辑**

在我提出这个问题后，我最终转向了[iTerm2](https://www.iterm2.com/)，事实证明它要好得多。

我不能 100% 确定，但我认为新版本的 OS X 终端将支持 256 色开箱即用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-25T21:30:51.110

[我遇到了同样的问题，然后我为 Mountain Lion 终端下载了 Solarized 主题](https://github.com/tomislav/osx-lion-terminal.app-colors-solarized)的替代实现，这似乎已经解决了。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-07T22:58:15.300

只需添加`let g:solarized_termcolors=256`到您的 vimrc

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-07T20:43:44.350

确保`TERM`设置为`xterm-256color`让 Vim 知道终端支持 256 色。这是 Lion 10.7 及更高版本中终端的默认设置†，因此您的偏好在某些时候进行了自定义。

要告诉终端设置`TERM`为不同的值，请转到

> **终端 > 首选项 > 设置 > [配置文件] > 高级**

并更改`Declare terminal as:`为`xterm-256color`.

[请注意，此首选项所做的只是设置`TERM`环境变量的值。它不会改变终端的行为或影响它模拟的终端类型。]

† 在 Lion 之前，默认值为`xterm-color`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-08-10T11:35:47.410

添加到您的`~/.vimrc`

```
" Solarized Dark
syntax enable
set t_Co=256
let g:solarized_termcolors=256
set background=dark
colorscheme solarized 
```

这适用于 Solarized 的 ansi 和 xterm-256color 版本。在新的 OS X 10.8.5 VM 安装上的终端 2.3 上进行了测试。

*注意这个答案取代了之前提出更改配置文件样本的答案。我最近意识到我的`.vimrc`文件中有这些实际配置 Solarized 的命令。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T04:21:40.180

要使用 256 色运行 vim，您必须使用 256 色终端。`xterm-256color`例如，您可以将终端设置为 ，`export TERM=xterm-256color`然后启动 vim。`$TERM`您可以在您的终端启动脚本之一（例如 .bashrc、.zshrc 等）中导出此设置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-30T15:06:54.023

这似乎违反直觉，但使用`set g:solarized_termcolors=16`. 用 确认这是正确的设置`:h solarized`。

# ruby-on-rails - 在haml元素中执行ruby代码

> ID：11822082
> 
> 赞同：0
> 
> 时间：2012-08-06T03:06:06.887
> 
> 标签：ruby-on-rails, ruby

这是我需要的不起作用的haml代码

```
%table
-@items.each do |item|
 %tr{:class=>"=cycle('list_line_odd', 'list_line_even')"} 
```

哪里`cycle`是标准的 Rails 方法。输出html是

```
 <table>
  <tr class="cycle('list_line_odd', 'list_line_even')"> 
```

我应该怎么做才能解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T03:09:55.490

```
%tr{:class=>cycle('list_line_odd', 'list_line_even')} 
```

你需要去掉双引号，这样解析器就会像方法调用而不是字符串一样读取它。

# asp.net - 在多个类之间使用通用方法

> ID：11822085
> 
> 赞同：0
> 
> 时间：2012-08-06T03:06:28.003
> 
> 标签：asp.net

我在 C# 中有几个类文件。我想写一个可以在所有类中使用的方法。例如，我正在尝试编写从数据库表中返回行数的方法，并且我多次需要它，因此想到编写一个方法来在所有类之间共享。我认为使用命名空间会很容易。但是当我在所有类文件中添加命名空间时，它会给出错误说明“当前上下文中不存在控制名称”。通过互联网搜索得出的结论是，我还需要在 xxx.designer.cs 文件中添加命名空间。这是正确的吗？我试图找到 Designer.cs 文件但找不到，并且在其中一种解决方案中指出，designer.cs 文件是在编译期间创建的。如果是这样，如何在 Designer.cs 文件中添加命名空间。

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:19:10.480

创建一个静态类并在其中创建静态成员函数。在这种情况下您不需要创建类的实例，您可以直接使用类名调用成员函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T03:30:22.603

您需要创建一个静态类，并且类需要共享的这个函数必须是静态成员。

现在可以从任何地方调用此函数。

```
static class Helper
{
    public static string Calculate(int myVariable) 
    {
        //do some common calculation
    }
    //...
} 
```

如果这些类有共同的数据成员，你需要共享一个共同的功能，你可以考虑使用基类。所有通用功能和通用数据成员都将进入基类，并且通过继承该类的优点，您的所有子类都可以调用此函数。

# spring-integration - Spring Integration 的高吞吐量、事务性使用

> ID：11822086
> 
> 赞同：4
> 
> 时间：2012-08-06T03:06:48.853
> 
> 标签：spring-integration, throughput

我搜索了 Internet，发布到 Spring 论坛，并阅读了几乎所有的在线文档，但我无法弄清楚 Spring Integration 是否可以在单个多资源 (JTA) 事务中处理多个消息。这对我的目的至关重要，以便获得必要的吞吐量。有谁知道这是否可能？（以及如何使其工作的一些指导将不胜感激。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T21:04:06.907

一旦事务开始，只要您不通过线程边界，所有工作都将保留在该事务中。

这意味着，如果您的事务管理器支持多资源事务并且您避免在事务中引入并发，那么您就可以了。

换句话说：这取决于，但它是可能的。

# ios - 滚动视图设计可行性 - iOS

> ID：11822096
> 
> 赞同：0
> 
> 时间：2012-08-06T03:08:14.303
> 
> 标签：ios, xcode, uiscrollview, uiimageview

![预期设计](../Images/82bd953c442ee82e800fa3dc93a5d6fb.png)

我正在研究滚动视图设计，其中“黑框”应该是图像项。蓝色框是滚动视图。是否可以采用之字形格式？盒子的数量取决于互联网上可用的图像。所以它更有活力。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:14:24.423

是的，你绝对可以做到这一点。

您将在 UIScrollView 的内容区域内定位 UIImageView 对象。只需设置`contentSize`您的 UIScrollView 以反映您的蓝色框的大小。将 UIScrollView 视为电影胶片。UIScrollView 是影片的可见部分，影片的整体是您的 contentSize。

现在通过根据需要设置其框架来定位每个 UIImageView，然后将其作为子视图添加到滚动视图。如果您发现自己需要更多水平空间，可以相应地调整 contentSize 的大小。

# xcode - 标题栏中的上标 ®

> ID：11822098
> 
> 赞同：-1
> 
> 时间：2012-08-06T03:08:22.957
> 
> 标签：xcode, ipad, superscript

我需要将`®`字符作为上标插入 iPad 应用程序的标题栏中。如何在 XCode 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T05:52:13.527

从 iOS 5.x 开始，您不能在标签文本中的单个字符上设置粗体、上标等文本属性。（这包括导航栏的内置标签。）

您可以在字符串中插入 ® 字符（您可以在带有选项-R 的美国 Mac 键盘上键入它，或者使用 Jessedc 的答案中的转义码）。它是否看起来很小和上标取决于标签使用的字体——一些字体使该符号看起来已经如此，其他字体使其更大并与基线对齐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T01:52:11.240

[获取 unicode 字符](http://www.fileformat.info/info/unicode/char/ae/index.htm)

把它放在一个字符串中

```
NSString *string = @"\u00AE"; //this is your (r) 
```

几乎与[如何在我的 Objective-C 源代码中转义 Unicode 字符？](https://stackoverflow.com/questions/833822/how-do-i-escape-a-unicode-character-in-my-objective-c-source-code)

# objective-c - 如何为 NSCollectionViewItem 内的按钮设置操作

> ID：11822102
> 
> 赞同：0
> 
> 时间：2012-08-06T03:08:46.473
> 
> 标签：objective-c, nsarraycontroller, nscollectionview, nscollectionviewitem

我正在使用 NSCollectionView 在绑定数组控制器中显示图片列表，另外，我想在每张图片的左上角添加一个删除按钮，以便当有人按下按钮时，它将删除相应的对象阵列控制器。

但是，当我尝试使 NSCollectionViewItem 成为我的自定义类的子类，并将删除按钮的操作设置为在我的自定义类中编写的方法时，它会报告如下错误

'无法将动作 XXX: 连接到 NSCollectionViewItem 类的目标'

此外，尝试在 NIB 文件中添加数组控制器对象时失败。

我应该怎么做才能让一切正常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:04:49.103

看来我们可以在 CollectionView 的默认 Protype 中添加一个按钮，并将其目标链接到控制器。

# sql-server - 从多结果集中返回单个结果集

> ID：11822109
> 
> 赞同：0
> 
> 时间：2012-08-06T03:09:59.647
> 
> 标签：sql-server

我创建了以下测试存储过程。

```
CREATE PROCEDURE [dbo].[TestA]  
AS
BEGIN
    SET NOCOUNT ON;
    CREATE TABLE #MyTableA (ID INT, Name VARCHAR(255))
    CREATE TABLE #MyTableB (ID INT, Name VARCHAR(255))

    ..............

    EXEC TestB;
    SELECT * FROM #MyTableB;

END 
```

TestB 存储过程返回一个结果集。但我需要调用它。根据这个存储过程，返回两个结果集。但是我需要退回一个。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:39:25.017

尝试这个 ：-

```
 CREATE PROCEDURE [dbo].[TestB]  
 AS
 BEGIN
 SET NOCOUNT ON;
 CREATE TABLE #MyTableA (ID INT, Name VARCHAR(255))
 CREATE TABLE #MyTableB (ID INT, Name VARCHAR(255))

 .............

 INSERT INTO #MyTableA
 exec TestA
 DROP TABLE #MyTableA
 SELECT * FROM #MyTableB;

END 
```

# objective-c - 无法在 iOS 中获取位置（GEOErrorDomain 代码=-204）

> ID：11822110
> 
> 赞同：6
> 
> 时间：2012-08-06T03:10:14.373
> 
> 标签：objective-c, ios

我正在尝试显示地图并使用`MKMapView`. 这是我的代码

```
MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } }; 
region.center.latitude = 37.47 ;
region.center.longitude = 122.26;
region.span.longitudeDelta = 0.01f;
region.span.latitudeDelta = 0.01f;
[mapView setRegion:region animated:YES]; 
```

但我得到下面的错误

```
<GEOTileSource: 0x8e4c160>: Error downloading tiles Server Error: Error Domain=GEOErrorDomain Code=-204 "The operation couldn’t be completed. (GEOErrorDomain error -204.)" UserInfo=0x88990f0 
{UnderlyingErrors=(
"Error Domain=GEOErrorDomain Code=-204 \"The operation couldn\U2019t be completed. (GEOErrorDomain error -204.)\" UserInfo=0x885b570 {IncompleteResponse=Asked for 2 tiles but only got 0 back}",
"Error Domain=GEOErrorDomain Code=-204 \"The operation couldn\U2019t be completed. (GEOErrorDomain error -204.)\" UserInfo=0x8890a50 {IncompleteResponse=Asked for 6 tiles but only got 0 back}"
)} 
```

我没有找到任何关于什么`GEOErrorDomain Code=-204`的参考。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:30:34.803

I upgraded to XCode DP4 and all seems to be ok now.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T05:18:48.547

我有同样的问题，在我的情况下，它只发生在地图完成加载所有图块之前关闭 UIViewController 时。修复是在关闭视图控制器时将 mapView (MKMapView) 委托设置为 nil。

```
mapView.delegate = nil; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T18:53:57.713

这是测试版的错误。由于他们如何加载位置图块，我偶尔会得到它。假设它在 beta 4 上运行良好，我不会太担心。他们仍在解决一些位置/地图问题，因此在测试期结束时发现更多问题我不会感到惊讶。

# python - python文件对象如何从当前种子位置删除字节到结束

> ID：11822111
> 
> 赞同：0
> 
> 时间：2012-08-06T03:10:44.763
> 
> 标签：python, file

python文件对象如何从当前种子位置删除字节到结束

`f = open(filename, "a+")`

`truncate_pos = f.tell()`

`f.truncate(truncate_pos)`

似乎不起作用，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T03:14:11.270

打开文件`a+`将指针定位在文件末尾；从那里截断不会导致文件更改。

# javascript - Toggle 停止在我的网站上工作？

> ID：11822114
> 
> 赞同：0
> 
> 时间：2012-08-06T03:11:15.733
> 
> 标签：javascript, jquery, toggle

我有以下代码用于切换从英语 div 到西班牙语 div 的切换，反之亦然：

```
$("#spanishlink").click(function () {
$("#spanishtext").fadeToggle ("fast");
$("#englishtext").fadeToggle ("fast");
});

$("#englishlink").click(function () {
$("#englishtext").fadeToggle ("fast");
$("#spanishtext").fadeToggle ("fast");
}) 
```

CSS很简单：

```
#englishtext {
    display:none;
} 
```

还有我的 HTML：

```
<a id="englishlink" href="#">English</a>
<a id="spanishlink" href="#">Espanol</a>

<div id="englishtext">
Blah Blah Blah
</div>

<div id="spanishtext">
Blah blah blah
</div> 
```

它似乎对我不起作用 - 西班牙语 div 消失了，但英语没有重新出现。无论我点击什么链接，都会发生这种情况。

我检查了所有拼写是否正确并且 JQuery 库已链接，但这没关系。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T03:20:58.280

它按原样工作，但您可能想要这样做：

[http://jsfiddle.net/JUjuq/](http://jsfiddle.net/JUjuq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T05:38:54.117

有可能在它不起作用的情况下（与所有表明它起作用的 jsfiddles 相反），这是因为浏览器渲染引擎选择优先考虑始终隐藏 #englishtext 的 CSS。我今天在尝试使用 jQuery show() 和 hide() 切换时遇到了类似的问题，但 CSS 将对象设置为可见性：隐藏。

# php - 如何仅绑定到 symfony2 和 Doctrine2 中的表单对象上的特定字段

> ID：11822116
> 
> 赞同：1
> 
> 时间：2012-08-06T03:11:20.253
> 
> 标签：php, symfony, doctrine-orm

我有一个很大的问题。

我在有两个字段的网站上有表格：`taskName`和`taskNote`.

我没有使用 symfony 表单小部件来显示表单，而是手动生成表单字段。

我只`taskNote`在输入文本字段中生成了字段，我只是`taskName`在标签字段中使用标签而不是文本框。

问题是，如果我这样做，答案是否正确进入数据库，但所有 taskName 都设置为 null

如何解决这个问题

# jquery - javascript 从 NodeLists 中剥离文本节点

> ID：11822117
> 
> 赞同：1
> 
> 时间：2012-08-06T03:11:40.287
> 
> 标签：jquery, dom, underscore.js, textnode

我发现自己的情况是，我得到了一个 NodeList，我试图将其放入 jQuery 对象中进行操作。问题是数组还包括文本节点、注释节点等，当你说`$(nodeList)`.

我使用下划线创建了一个快速`clean`函数，它去除了 DOM 元素并将它们作为数组返回：

```
_.mixin({
    clean: function(nodeList) {
        return _(nodeList).filter(function(node) {
            return node.nodeType == 1;
        });
    }
}); 
```

这`$(_(nodeList).clean())`给了我一个可用的 jQuery 对象。

有没有更好的方法来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T05:58:10.570

我真的不确定你在问什么问题，但这是一个有效的 jQuery 实现，它从 jQuery 对象中过滤掉非元素：

```
jQuery.fn.clean = function() {
    return this.filter(function() {
        return(this.nodeType == 1);
    });
}

var nodes = document.getElementById("container").childNodes;
var $elements = jQuery(nodes).clean(); 
```

而且，一个工作演示：http: [//jsfiddle.net/jfriend00/RV6H7/](http://jsfiddle.net/jfriend00/RV6H7/)

jQuery 有一个执行此类操作的内部函数，但我不知道有任何内置的公共方法可以执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T10:37:30.327

简单地说：`jQuery( nodelist ).filter( '*' )`？

这将过滤掉除元素节点之外的所有内容，只使用 vanilla jQuery。

# javascript - 如何禁用 iframe 中的复制粘贴？

> ID：11822119
> 
> 赞同：0
> 
> 时间：2012-08-06T03:12:07.847
> 
> 标签：javascript, html, iframe

我正在使用 google viewer api，我想禁用框架内的复制粘贴功能。
例子：

```
<iframe src="http://docs.google.com/gview?url=http://infolab.stanford.edu/pub/papers/google.pdf&embedded=true" style="width:600px; height:500px;" frameborder="0"></iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T04:26:27.130

这是我的解决方案（来自我的评论）：

> 我正在考虑的一个想法是在 iframe 上覆盖一个透明的 div，这样你就根本无法与之交互。

[**演示**](http://jsbin.com/iqitux/1/)

HTML

```
<div id="container">
  <div id="overlay">
  </div>
  <iframe src="http://docs.google.com/gview?url=http://infolab.stanford.edu/pub/papers/google.pdf&embedded=true" frameborder="0"></iframe>
</div> 
```

CSS

```
#overlay {
  width:590px;
  height:500px;
  z-index: 1;
  background-color:rgba(255,255,0,0.1);
}
iframe {
  width:600px;
  height:500px;

}
#container {
  position: relative;
}
#overlay, iframe {
  position: absolute;
  top: 0;
  left: 0;
} 
```

我将覆盖（黄色框）宽度设为 590 像素，因此滚动条仍有 10 像素。

# jsf - p:datatable 与 selectionMode 为多个

> ID：11822122
> 
> 赞同：0
> 
> 时间：2012-08-06T03:12:21.540
> 
> 标签：jsf, jsf-2, primefaces

根据 primefaces 文档，选择应该是一个数组。在下面的代码中 bean.selectedUsers 被定义为“HasUsersVO[] selectedUsers”，但数据表的值是 List。填充数据表后单击“确定”按钮时，出现粘贴在底部的转换错误。

```
 <p:dataTable id="userListTable" value="#{bean.peopleVOList}"
                    var="user" rowClasses="odd even" selection="#{bean.selectedUsers}" rowKey="#{user.userGuid}"
                    <p:column selectionMode="multiple" style="width:18px">
                    </p:column>
.....
.....
</p:dataTable> 
```

# 错误

```
22:59:16,962 INFO  [class com.zreflect.emyed.managedbean.circle.CircleController] (http--127.0.0.1-8080-3) *******************Outside getUsersList********************
22:59:38,943 WARNING [javax.enterprise.resource.webcontainer.jsf.lifecycle] (http--127.0.0.1-8080-3) [Lcom.user.PeopleVO; cannot be cast to java.util.Collection: java.lang.ClassCastException: [Lcom.user.PeopleVO; cannot be cast to java.util.Collection
    at org.primefaces.component.datatable.DataTable.getRowData(DataTable.java:835) [primefaces-3.3.1.jar:]
    at org.primefaces.component.datatable.DataHelper.decodeMultipleSelection(DataHelper.java:262) [primefaces-3.3.1.jar:]
    at org.primefaces.component.datatable.DataHelper.decodeSelection(DataHelper.java:240) [primefaces-3.3.1.jar:]
    at org.primefaces.component.datatable.DataTableRenderer.decode(DataTableRenderer.java:72) [primefaces-3.3.1.jar:] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T11:17:24.187

异常消息和堆栈跟踪表明您`PeopleVO[]`在`#{bean.peopleVOList}`. 这个不对。它必须是一个`Collection`，最好是一个`ArrayList<PeopleVO>`。

```
private List<PeopleVO> peopleVOList; 
```

`#{bean.selectedUsers}`必须确实是`PeopleVO[]`一个. 那部分很好。

# c++ - 在函数模板中创建容器迭代器

> ID：11822128
> 
> 赞同：5
> 
> 时间：2012-08-06T03:13:47.927
> 
> 标签：c++, templates, iterator

代码使用 GCC 编译。这项工作在 VC++ 中没有任何错误

```
template <typename T>
void Function(T& A){

  T::iterator it; //Error : dependent-name 'T::iterator' is parsed as a non-type,
                  //but instatiation yields a type.
} 
```

[本文](http://www.codeproject.com/Articles/268849/An-Idiots-Guide-to-Cplusplus-Templates-Part-2)指出编译器无法确定`T`类型中的迭代器是类还是静态成员。所以我们必须使用`typename`关键字来将符号分类为一个类型。

我的问题是，由于`T`在编译时已知，因此编译器已经知道`iterator`T 内部是一个类（在我的情况下是 T `vector<int>`）。那么为什么会出现错误呢？

`typename`除了将其用作定义模板参数之外，这也是关键字的另一种用途`T`。

**更新：**

[我从这里](https://stackoverflow.com/questions/642229/why-do-i-need-to-use-typedef-typename-in-g-but-not-vs)阅读了所有答案和其他答案，它们真正回答了我的所有想法。我可以总结为：

处理这个权利的正确编译器是 Gcc。VC++ 将允许您编译格式错误的代码。使用 Gcc 编译时产生的错误是由于语法分析，因为 Gcc 会尝试解析函数模板的代码，但它会发现语法错误，这是`T::iterator it;`因为 Gcc by Deafault 将`T::iterator`其视为变量（`T::iterator`被解析为非type) 而不是作为类型，要解决此问题，您必须明确告诉 Gcc 将`T::iterator`其视为类型，这是通过添加关键字来完成的`typename`。
现在回到 VC++。为什么这个工作的答案是因为 VC++ 中存在的错误，这是 VC++ 是否延迟决定是否`T::iterator`是变量或类型。或者 VC++`typename`在它认为需要的地方提供关键字。

[有用的文章](http://pages.cs.wisc.edu/~driscoll/typename.html)
**注意：**如果您发现不正确的内容，请随时编辑更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T03:37:12.247

您参考的文章提供了解释：

> 必须告诉编译器指定的符号实际上是一种类型，而不是给定类的静态符号。

考虑[这篇文章中](http://pages.cs.wisc.edu/~driscoll/typename.html)的一个例子：

```
class ContainsAType {
   class iterator { ... }:
   ...
};

class ContainsAValue {
   static int iterator;
}; 
```

所以在你`Function()`上面，编译器必须知道`T::iterator`是类型还是静态变量。该`typename`关键字消除了 C++ 中的歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T04:24:59.777

[这个线程](https://stackoverflow.com/questions/642229/why-do-i-need-to-use-typedef-typename-in-g-but-not-vs)包含一些关于在类似情况下使用 typename 的很好的讨论。

> 我的问题是，由于 T 在编译时是已知的，那么编译器已经知道 T 内部的迭代器是一个类（在我的情况下 T 是向量）。

是的，这就是 VC++ 可以不用 typename 关键字的原因。

> 那么为什么会出现错误呢？

因为标准规定模板名称查找应分两个阶段完成。在某些情况下，这需要消除歧义（[参见this](http://womble.decadent.org.uk/c++/template-faq.html#disambiguation)）。因此错误出现在 GCC 中，因为它符合两阶段名称查找的标准。另一方面，VC++ 使用后期解析方案。

正如 DeadMG 指出的那样，当编译器无法诊断丢失的类型名时，VC++ 的方法可能会因更复杂的代码而失败。

也看看[这个线程](https://stackoverflow.com/questions/5683257/why-is-typename-not-needed-here-in-visual-studio-2008-2010)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T04:32:41.683

当编译器看到`T::iterator it;`时，它还不知道是什么`T`。它只会知道`T`您调用函数时的内容（实例化时间）。这是两阶段名称查找的一部分，在第一阶段，编译器检查`Function`语法错误的声明并查找所有非依赖名称。这有助于在定义点检测错误，而不是等到实例化点。

例如：

```
template <typename T>
struct A
{
    X x;
};

struct X{};

int main()
{
    A<int> a;
} 
```

一个好的编译器会查找`X`并告诉你它不知道它是什么。但是，MSVC 编译器将接受这种格式错误的代码。

这是另一个例子：

```
template <typename T>
class A : public I_do_not_exist
{
}; 
```

一个好的编译器会告诉你`I_do_not_exist`不存在（MSVC 编译这段代码）。

# javascript - 使用 ajax 而不是 action 提交表单

> ID：11822130
> 
> 赞同：0
> 
> 时间：2012-08-06T03:14:01.880
> 
> 标签：javascript, ajax, jquery

只是想用ajax而不是一个动作来提交一个表单，但仍然没有运气。php 脚本有效，并且已通过操作提交进行测试。

到目前为止，我查看了示例，阅读了文档，提出了 SO 问题，但我仍然没有答案。我需要帮助，我本打算在两周前测试这个用例。

当我提交页面看起来像刷新但没有任何反应。用户帐户未插入数据库，并且不出现警告框。谁能看到出了什么问题？

javascript看起来像这样：

```
 $(document).ready(function()
{

$.validator.addMethod("uniqueuser", function(username){
    var response
    $.ajax({
        type: "POST",
        url: "check_username.php",
        data: "username=" + username,
        success: function(server_response){

                if(server_response == '0'){

                    response = true;
                }
                else if(server_response == '1'){

                    response = false;
                }

        }
    });
    return response;
}, "Username is not available");

$("#createaccount).validate({
    debug: false,
    rules:{
        fname:{
            required: true
        }
        surname:{
            required: true
        }
        email:{
            email:true,
            required: true
        }
        location:{
            required:true
        }
        username:{
            minlength: 6,
            required:true,
            uniqueuser:true
        }
        password:{
            required:true,
            minlength: 6
        }
        re_password:{
            required:true,
            equalTo: "#password"
        }
    }

    submitHandler: function(form){
        $.ajax({
            type: 'POST',
            url: 'createaccount2.php',
            data: $("#createaccount").serialize(),
            success: function(response){

                if(response == "1"){
                    alert("That username is already taken!");
                }
                else if(response == "2"){
                    alert("An account is already registered to that email address");
                }
                else if(response == "3"){
                    alert("Your account has been created!");
                }
                else if(response == "4"){
                    alert("Something went wrong, your account could not be created");
                }
            }

        });

    });
});
}); 
```

有关验证器的信息：http: [//docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:22:29.970

脚本中有很多问题。所有这些都与您正在使用的验证器插件明显相关。一种是异步调用。

当你使用时`$.validator`（我不知道这个插件，你能添加引用吗？）你尝试`return response;`设置 ASYNC。（在 AJAX 得到服务器响应之后）。这就是 AJAX 有回调函数的原因，因为你不知道什么时候会设置。

**发生了什么？**在`return`AJAX 完成之前执行 get 并修改变量（但范围很好）。

**修复？**您需要深入研究该验证器插件以查看它是否支持异步验证。

否则，您将需要设置自己的脚本验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T03:19:57.380

您如何将表单提交与表单相关联？您需要在 Form onSubmit 事件中做点什么吗？或使用提交事件处理程序？

```
<form id="target" action="destination.html"> 
```

像这样

```
$('#target').submit(function() {
  alert('Handler for .submit() called.');
  return false;
}); 
```

更多信息：[http ://api.jquery.com/submit/](http://api.jquery.com/submit/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T05:19:09.353

```
 <form id="target" onSubmit="return false;"> 
```

# css - 可以在网页上的单个图形图像周围和顶部放置多个活动元素吗？

> ID：11822135
> 
> 赞同：0
> 
> 时间：2012-08-06T03:14:23.490
> 
> 标签：css, html, user-interface, web

要求是有一个图像/图形，其周围和顶部以圆形方式放置五个或六个元素。这些元素是两个简短的文本短语，每个短语都有更新的统计信息。它们将出现在与图像相同的相对位置的图像顶部。这是因为图像本身包含与正在显示的统计信息相关的图形。

关键是，由于该网页以不同的尺寸和不同的浏览器显示，因此活动元素必须始终显示在相对于图像本身的相同位置。

此类事物的一个示例（尽管实际图像和需求完全不同）将是时钟图像，其中显示了看到的流星数量以及在每个偶数小时位置检测到的地震数量。统计数据需要显示在时钟本身的偶数小时数旁边（上、下、左、右）。无论显示器大小、浏览器、调整大小等如何（当然是在合理范围内），都需要保持显示的统计信息和图像之间的这种关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:23:27.000

制作一个包含所有文本和图像的页面。不用担心它出现在哪里，然后使用 css 样式

```
position:relative;
top/bottom: (x amount of pixels);
left/right: (x amount of pixels); 
```

更改它们出现的位置。请记住，在使用“位置：相对；”时 它将像素添加到指定的一侧。所以

```
top: 20px; 
```

将项目**向下**移动 20px 。

您还可以根据最有效的方法使用负值。

祝你好运，-布赖恩

# pjsip - STUN 消息的发送和回复端口？

> ID：11822139
> 
> 赞同：0
> 
> 时间：2012-08-06T03:14:54.453
> 
> 标签：pjsip, stun

我正在尝试使用 STUN（使用 PJSIP）实现以下流程：

[IE] <--TCP/UDP trans.--> [agentC] <----STUN-----> [agentS] <--UDP/TCP trans.--> [Apache]

[TCP/UDP trans.] 部分已准备就绪。

agentC 可能具有 stun 映射地址 1.1.1.1:11111

而 agentS 可能具有 stun 映射地址 2.2.2.2:22222

现在 agentC 向 agentS 发送一个 [HTTP GET]：

问题：

1.  agentC 的输出端口是什么？它会通过 NAT 端口 11111 还是随机端口 [ex:37654]？

2.agent应该如何回复html标签？回复11111还是之前的端口[ex:37654]？

3.如果agentC在对称NAT之后（而agentS在一个完整的锥体之后），agentC可以连接到agentS并且agentS可以回复agentC吗？

# json - 有没有一种简单的方法来解释来自 Dojo 使用 Node.js 的 sortBy 和查询？

> ID：11822142
> 
> 赞同：1
> 
> 时间：2012-08-06T03:15:19.703
> 
> 标签：json, node.js, dojo, express

dojo JsonRest 可能会向服务器发送如下内容：

```
/FooObject/?foo=value1&sortBy=+foo,-bar 
```

我在另一边有 express 和 mongodb。

获得 foo 很容易。但是，当我意识到：一定有更好的方法时，我正要编写自己的函数来解析 sortBy？当然，这是一个常见的问题，应该有一个既定的解决方案......？也许现在正在逃避我的知名中间件？

我还需要添加通配符 (`/FooObject/?foo=value%&sortBy=+foo,-bar`这样任何*以开头*的东西都`value`可以工作。但话又说回来，我想知道是否也有某种既定的模式呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:36:23.197

我认为您正在寻找[qs](https://github.com/visionmedia/node-querystring)，您可以安装它`npm install qs`：

```
> qs.parse('foo=value%&sortBy=%2bfoo,-bar');
{ foo: 'value%', sortBy: '+foo,-bar' } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:26:04.593

好吧，没办法……是时候写点东西放在GitHub了！

# processing - 处理：如何添加背景音乐

> ID：11822144
> 
> 赞同：4
> 
> 时间：2012-08-06T03:15:37.180
> 
> 标签：processing

我在处理中做了一个简单的小游戏，但需要一些帮助。我有一个 mp3，想将它添加到我的应用程序中，以便在后台循环运行。

这可能吗？非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T18:30:49.967

您可以使用声音库。处理已经包含了[Minim](http://code.compartmental.net/tools/minim/)。查看*文件 > 示例 > 库 > Minim Audio > LoadFile*

```
import ddf.minim.*;

AudioPlayer player;
Minim minim;//audio context

void setup()
{
  minim = new Minim(this);
  player = minim.loadFile("file.mp3", 2048);
  player.play();
}

void draw()
{
}

void stop()
{
  player.close();
  minim.stop();
  super.stop();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-16T17:12:49.157

您还可以使用 Processing 的声音库。转到*草图*>*导入* *库...* >*添加库...* >

然后搜索“声音”并从 Processing Foundation 下载声音库。

```
import processing.sound.*;
SoundFile file;

 void setup() {
  size(640, 360);
   background(255);

   // Load a soundfile from the /data folder of the sketch and play it back
  file = new SoundFile(this, "sample.mp3");
  file.play();
}      

void draw() {
} 
```

参考可以在这里找到： [https ://processing.org/reference/libraries/sound/index.html](https://processing.org/reference/libraries/sound/index.html)

# c++ - 通用流输出到文件或 cout——C++

> ID：11822146
> 
> 赞同：3
> 
> 时间：2012-08-06T03:15:47.410
> 
> 标签：c++, stream

我想更改一个显示有关类的一些信息的函数，以便可以打印到屏幕或写入文件，具体取决于我传递给函数的流类型。

我想要一个类似的功能：

```
void output(int x, default (what class do I need here??) &stream=cout){
    stream << x ;
} 
```

这样做的正确方法是什么？？？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T03:18:28.857

你一般想要`std::ostream&`. 请注意，大多数程序员只会重载而不是像您所做的那样`operator<<`定义一个单独的函数。`output()`

# c++ - 在内联汇编中访问 C 结构成员

> ID：11822151
> 
> 赞同：2
> 
> 时间：2012-08-06T03:16:18.740
> 
> 标签：c++, c, inline-assembly, masm

在下面的代码中，`rEDX, rEBX, rEBP, rESI and rEDI`是结构体的成员`scratch_space`。`scratch_space_arg`是结构的对象`scratch_space`。

```
lea eax, scratch_space_arg
mov [ecx+[eax].rEDX], edx
mov [ecx+[eax].rEBX], ebx
mov [ecx+[eax].rEBP], ebp
mov [ecx+[eax].rESI], esi
mov [ecx+[eax].rEDI], edi 
```

这段代码给了我一个：

```
error C2426: '[' : illegal operator in 'first operand' 
```

对于所有的`mov`陈述。知道如何解决这个问题吗？

PS：我用[这篇文章](http://msdn.microsoft.com/en-us/library/fabdxz08.aspx)来访问`struct`会员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T04:03:07.013

我建议反汇编一些引用结构元素的 C 代码：

```
struct scratch_space scratch_space_arg = { 0, 0, 0, 0, 0 };
int rEDX = scratch_space_arg.rEDX;
int rEBX = scratch_space_arg.rEBX;
int rEBP = scratch_space_arg.rEBP;
int rESI = scratch_space_arg.rESI;
int rEDI = scratch_space_arg.rEDI;
printf("%d %d %d %d %d\n", rEDX, rEBX, rEBP, rESI, rEDI); 
```

然后你就会知道自己使用的正确符号。

# javascript - HAML 中动态生成的 Javascript

> ID：11822153
> 
> 赞同：4
> 
> 时间：2012-08-06T03:16:43.130
> 
> 标签：javascript, ruby, haml

为什么这不起作用？

```
:javascript
    -[1,2,3].each do |number|
        $("#form_#{number}").my_method(); 
```

Rails 给我一个错误，说变量`number`没有定义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T03:41:29.413

过滤器的内容不会被解释为 Haml。你可以使用`#{...}`插值，这就是你看到错误的原因 - 过滤器看到`#{number}`in `"#form_#{number}"`，但上面`number`定义的行只是按原样传递，不被视为 Ruby，就 Ruby 而言`number`仍然未定义。

在这种情况下，您可以执行以下操作：

```
:javascript
    #{[1,2,3].map do |number|
        "$(\"#form_#{number}\").my_method();"
    end.join("\n")} 
```

虽然这有点笨拙。

一个更清晰的解决方案可能是创建一个帮助方法来创建 javascript，您可以从过滤器中调用它：

```
def create_js(arr)
  arr.map do |number|
      "$(\"#form_#{number}\").my_method();"
  end.join("\n")
end 
```

Haml 将是

```
:javascript
    #{create_js([1,2,3])} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T03:27:51.917

您的 javascript 中有 ruby​​ 语法，这显然行不通。您可以使用像 underscore.js 这样的库并像这样遍历您的数组：

```
_.each([1, 2, 3], function(number){
    $("#form_" + number).my_method();
}); 
```

试试看。

或者你可以使用 jQuery 的 each：

```
$.each([1, 2, 3], function(i, number){
     $("#form_" + number).my_method();
}); 
```

# jakarta-ee - 在struts中查找动作类的命中次数

> ID：11822154
> 
> 赞同：0
> 
> 时间：2012-08-06T03:16:50.037
> 
> 标签：jakarta-ee, struts2

是否可以在struts中找到一个动作类被访问的次数？面试题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:53:50.613

是的。解析容器的访问日志。

这是最通用、最灵活、最常见的解决方案，并且有很多工具可以做到这一点。

如果这不是一个可接受的答案（如果不是，而且这是一次采访，请害怕）然后我实际上会使用过滤器或拦截器来做，保持由 URL 键入的映射具有同步的写访问权限，更新一个计算每个请求的 URL（如果存在，则减去查询字符串）。如果需要持久化，可以。

这与 S2 配置的组合将使您可以非常精确地查看请求统计信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T05:16:47.933

一种可能的解决方案是将其存储在数据库/应用程序上下文或文件中，因为 Struts2 动作也可以作为数据对象工作，因此框架为每个请求创建一个唯一的动作实例，以使它们成为线程安全的。您可以在 prepare 方法中添加计数器逻辑，该方法将在任何 Action 方法调用之前被调用。

在此之前仍有许多问题需要回答。

1.  在许多情况下，实际操作不会被调用并且拦截器会发回流程。
2.  操作调用是指操作的特定方法调用还是仅操作实例创建。

我们不能将逻辑放在拦截器中，因为不会为每个请求创建拦截器，并且将特定于操作的数据保存在拦截器中是不安全的。

# wcf - WCF 基本部署到 iis7

> ID：11822156
> 
> 赞同：0
> 
> 时间：2012-08-06T03:17:48.837
> 
> 标签：wcf, iis-7

我对部署和 wcf 相当陌生，不知道为什么会发生以下情况

我有一个 VS2010 WCF 项目，它有一个 service.svc 和关联的合同，带有单一查找方法 GetStatus 接受和返回字符串。根据建议，我将 Web.config 保留为已生成，并注意到它没有定义端点。然后将其部署到本地 iis7，使用带有参数 ServiceURL: Localhost site/application : main/status 的发布

然后我去了 iis 并观察到它部署在 main/status 文件夹结构下

但是，当我尝试通过指定使用 wcf 测试客户端访问时

```
http://localhost/main/status/service.svc or
http://localhost/status/service.svc 
```

我收到未找到的错误。

```
Metadata from http://localhost/main/status/Status.svc If this is a Windows (R) Communication Foundation service to which you have access, please check that you have enabled metadata publishing at the specified address.  For help enabling metadata publishing, please refer to the MSDN documentation 
```

尝试从 iis 浏览时出现相同的错误。

请查看配置文件（生成）

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:41:46.343

请确保您在 web.config 文件中启用了元数据。

```
<system.serviceModel>
<behaviors>
<serviceBehaviors>
  <behavior>
    <!-- To avoid disclosing metadata information, set the values 
         below to false before deployment -->
    <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
    <serviceDebug includeExceptionDetailInFaults="false"/>
  </behavior>
</serviceBehaviors> 
```

如果启用了元数据，则该 url 上不存在该服务。默认情况下，WCF 将使用 basicHttpBinding 和 SOAP 1.1。

# c - 如何使 EUDC 在不重新启动的情况下开始生效？

> ID：11822157
> 
> 赞同：0
> 
> 时间：2012-08-06T03:18:03.033
> 
> 标签：c, winapi, fonts

我想以编程方式注册一些用户定义的字符字体。根据[这篇文章](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317836%28v=vs.85%29.aspx)，我在我的程序中设置了 EUDC 注册表项和值。但是字体没有开始生效。我必须重新启动才能正确显示字符。使用私人字符编辑器时，对字符所做的修改将立即生效，因此必须有某种方式通知系统更新字体而无需重新启动。任何人都知道如何实现这一目标？

顺便说一句，我曾尝试通过以下代码广播 WM_FONTCHANGE 消息，但它似乎不起作用......

```
SendMessage(HWND_BROADCAST, WM_FONTCHANGE, NULL, NULL); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:12:21.257

我认为您必须使用[EnableEUDC](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162593%28v=vs.85%29.aspx)功能。

例子：

```
EnableEUDC(FALSE);

// Your code for manipulating with registry

EnableEUDC(TRUE); 
```

我没有对此进行测试，但**Eudcedit.exe**使用了类似的技术。

# android - Android在进度条加载完成后隐藏标题栏

> ID：11822161
> 
> 赞同：2
> 
> 时间：2012-08-06T03:18:41.130
> 
> 标签：android, progress-bar, titlebar, android-titlebar

我试图在进度条加载完成后隐藏标题栏。谁能告诉我它是怎么做的？谢谢

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //this.requestWindowFeature(Window.FEATURE_CUSTOM_TITLE); **//Putting this make the whole title bar hidden**
        this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
        this.getWindow().requestFeature(Window.FEATURE_INDETERMINATE_PROGRESS);

        setContentView(R.layout.main); 
```

一堆代码...

```
webView.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress)   
            {
             //Make the bar disappear after URL is loaded, and changes string to Loading...
            MyActivity.setTitle("Loading...");
             MyActivity.setProgress(progress * 100); //Make the bar disappear after URL is loaded

             // Return the app name after finish loading
                if(progress == 100)

             this.requestWindowFeature(Window.FEATURE_NO_TITLE);**//Not Working (shows Error The method requestWindowFeature(int) is undefined for the type new WebChromeClient(){} )**  
              //MyActivity.setTitle(R.string.app_name);

              }

            });
        webView.setWebViewClient(new InsideWebViewClient());

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T03:30:43.633

您需要将以下语法写入您的 AndroidManifest.xml 文件

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

如果您想通过 Activity 中的编码来实现，那么您可以在 Activity 的 OnCreate() 方法中使用以下代码。

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

# objective-c - 将 html 文本解析为 UILabel，文本完全不可读。编码问题

> ID：11822164
> 
> 赞同：0
> 
> 时间：2012-08-06T03:18:53.600
> 
> 标签：objective-c, ios, xcode

我正在尝试将 HTML 页面中的“**阿拉伯语文本**”解析为我的应用程序中的一个标签。我正在使用 Ben Reeves 的[HTML Parser](https://github.com/zootreeves/Objective-C-HMTL-Parser)。

我已成功解析该行，但是该行完全不可读。像这样**的“ÙØªØ¯ÙØ§ØªØ§ÙÙØ§Ø¯Ø§ÙÙÙ”**

经过一番检查，我认为我的问题出在这 4 行之一。（我写它们是为了下载页面内容）

```
NSString *googleString = @"http://x1q.com/alf_news_app.html";
NSURL *googleURL = [NSURL URLWithString:googleString];
NSError *errorss;
NSString *googlePage = [NSString stringWithContentsOfURL:googleURL
                                                    encoding:NSASCIIStringEncoding
                                                   error:&errorss]; 
```

我明白这`UILabel`表明它完全没有变化。我有点说我必须解码一些东西才能得到可读的文本。虽然，我不知道怎么做。感谢您的帮助。

注意：在 Obj-C 方面不是很有经验

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:26:05.570

您正在下载的页面使用 UTF-8 编码，因此请`NSASCIIStringEncoding`使用`NSUTF8StringEncoding`.

IE 将最后一行更改为：

```
NSString *googlePage = [NSString stringWithContentsOfURL:googleURL
                                                encoding:NSUTF8StringEncoding
                                                   error:&errorss]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-11T09:13:35.913

我们对阿拉伯语也有同样的问题。解决方案是使用`NSUTF16StringEncoding`而不是`NSUTF8StringEncoding`

# iphone - 后台异步任务

> ID：11822166
> 
> 赞同：2
> 
> 时间：2012-08-06T03:19:04.007
> 
> 标签：iphone, nsurlconnection

我正在使用异步`NSURLConnection`上传我的图片。我有一个小要求，我想知道实现它的有效方法是什么。当我按下上传按钮时，我会弹出我当前的视图控制器，所以我需要的是我的上传操作继续在后台进行，即使我在我的导航控制器堆栈的任何部分。我可以导航并在任何地方，但仍希望在后台进行上传。

我只需要关于什么是实现这一目标的有效和优雅方式的提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T03:32:42.620

在这种情况下，您所说的“在后台”是指 - 在另一个线程上。因此，您正在谈论多线程。不要与 iOS 的后台处理相混淆 - 在应用程序处于后台时执行的任务。

为了做你想做的事，我推荐使用`GCD`（Grand Central Dispatch），你可以`dispatch`将一段`block`代码转移到另一个线程（除主线程之外），以实现平滑的“后台”处理——请记住主线程处理与 UI 相关的所有内容，因此，为了不阻止它（字面意思），有必要执行任何持久的过程，例如在另一个线程上从远程源下载/上传。

这是您可以这样做的一个示例：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    // Prepare your upload request

    NSError * _urlError = nil;
    NSHTTPURLResponse * _responseHeaders = nil;
    NSData * responseData = [NSURLConnection sendSynchronousRequest:uploadHTTPRequest 
                                                  returningResponse:&_responseHeaders 
                                                              error:&_urlError];

    // by this line, we have a response
    dispatch_async( dispatch_get_main_queue(), ^{
        // Update UI or whatever, this is where you "rejoin" the main thread if needed.
        // Maybe for development, show a UIAlertView...
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T03:41:55.010

您需要将上传逻辑与触发它的视图控制器分开。

也许你可以创建一个“上传管理器”类来处理来自队列中不同视图控制器的所有上传，并通知感兴趣的视图控制器有关进度、错误等的信息（例如通过通知）。

然后，它还可以管理后台任务标识符，以便在您的应用程序通过按下主页按钮发送到后台时继续上传。

# c# - UserControls 的高度和宽度属性

> ID：11822167
> 
> 赞同：1
> 
> 时间：2012-08-06T03:19:04.607
> 
> 标签：c#, asp.net, properties, user-controls

我有一个名为EmployeesCheckBoxList 的用户控件，它只包含一个由Employees 填充的标准CheckBoxList。我可以轻松地在我的EmployeesCheckBoxList 中创建属性，这些属性在我的UserControl 中获取/设置CheckBoxList 的宽度/高度：

```
public Unit Height
{
    get { return cblEmployees.Height; }
    set { cblEmployees.Height = value; }
}

public Unit Width
{
    get { return cblEmployees.Width; }
    set { cblEmployees.Width = value; }
} 
```

然后在我的 .aspx 页面中，我可以在运行时设置宽度和高度：

```
<MyUserControls:EmployeesCheckBoxList runat="server"
    Height="100px" Width="150px"/> 
```

这些属性正确地改变了我的用户控件中 Web 控件的尺寸。

我想知道的是，是否可以更改整个用户控件的尺寸，而不仅仅是将值作为属性然后修改用户控件中的控件？

例如，假设我的用户控件中还有其他 Web 控件，例如按钮。如果我将上面的 Height 和 Width 属性设置为 100px 和 150px，我希望实现的不是用这些测量值修改每个 Web 控件，而是将用户控件的可视空间设置为这些尺寸。这意味着在 CheckBoxList 充满员工和按钮的情况下，并将尺寸设置为 100 像素 x 150 像素，用户控件的全部内容将不适合，并且用户控件将在这些尺寸内变得可滚动。

这就是常规 CheckBoxList 的工作方式。如果你有 100 个项目，但将高度设置为 100 像素，一次只能看到几个项目，并且列表可以在 100 像素的空间内滚动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T03:24:29.197

在您的用户控件中使用 div 并为其设置宽度和高度属性。还包括溢出：在它的样式下滚动。

# upload - 带有图片上传的xforms重复元素？

> ID：11822173
> 
> 赞同：0
> 
> 时间：2012-08-06T03:19:56.720
> 
> 标签：upload, repeat, xforms, media-type

有人可以告诉我如何使用 XForms 编写代码，XForms 是一个允许人们选择上传图片文件的小部件，如有必要，可以重复使用？也就是说，用户一次上传一张照片，但如果有必要，可以选择一次又一次地继续上传。

它可以是元素，也可以只是一个简单的元素。我不确定重复元素与触发元素的关系如何。是否重复元素告诉 XForms 处理器重复显示哪些 UI 元素？触发元素是更新底层模型的按钮？

我不清楚如何捕获这些信息。我是否需要大致类似的东西：

```
<xforms:repeat 
                <xforms:trigger>
                    <xforms:label>Add pic</xforms:label>
                    <xforms:upload
                        ref="data/picture[@id='1']"
                        mediatype="image/*">
                    </xforms:upload>
                </xforms:trigger>
</xforms:repeat> 
```

例如，如果用户上传了 5 张图片，是否可以将每张图片识别为 pic1、pic2、pic3？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T01:30:10.317

Xforms 重复元素在现有数据中重复显示，您要做的是显示现有照片并*插入*新照片。XForms wikibook 非常全面，因此您可能想查看[http://en.wikibooks.org/wiki/XForms/Insert](http://en.wikibooks.org/wiki/XForms/Insert)和[http://en.wikibooks.org/wiki/XForms/Repeat_into_table](http://en.wikibooks.org/wiki/XForms/Repeat_into_table)

下面是一个*未经测试*的示例，它应该可以很好地指示您需要做什么。

```
<html 
   xmlns="http://www.w3.org/1999/xhtml" 
   xmlns:xf="http://www.w3.org/2002/xforms" 
   xmlns:ev="http://www.w3.org/2001/xml-events">
   <head>
      <title>XForms insert example</title>
      <xf:model>
         <xf:instance>
            <Data xmlns="">
               <Photo name="My Photo">
                    <!-- Data here -->
               </Photo>
               <NewPhoto name="">
               </NewPhoto>
            </Data>
         </xf:instance>
      </xf:model>
   </head>
   <body>
      <fieldset>
         <legend>Company Phone List</legend>
         <p>
            <b>Uploaded Photos...</b>
            <ul>
            <xf:repeat id="list" nodeset="/Data/Photo">
               <li><xf:output ref="@name" /></li>
            </xf:repeat>
            </ul>
         </p>
      </fieldset>
      <fieldset>
         <legend>Add New Photo</legend>
         <p> <!-- here is where we get the new record -->
            <xf:input ref="/Data/NewPhoto/@name">
               <xf:label>Photo Name:</xf:label>
            </xf:input>
            <xforms:upload
                        ref="/Data/NewPhoto"
                        mediatype="image/*">
            </xforms:upload>
            <xf:trigger>
               <xf:label>Insert... </xf:label>
               <xf:action ev:event="DOMActivate">
                  <xf:insert nodeset="/Data/Photo" at="index('list')" position="after" />
                  <xf:setvalue ref="/Data/Photo[index('list')]/@name" value="/Data/NewPhoto/@name" />
                  <xf:setvalue ref="/Data/Photo[index('list')]" value="/Data/NewPhoto" />
               </xf:action>
            </xf:trigger>
         </p>
      </fieldset>
   </body>
</html> 
```

# c - C语言中的gethostname(2)

> ID：11822175
> 
> 赞同：2
> 
> 时间：2012-08-06T03:20:17.413
> 
> 标签：c, io

我开发了一个接受来自标准输入的文本的迷你外壳。到目前为止它有效，但我需要让它返回（在>之前的小东西中）

他们登录的机器名称和当前工作目录。

我有

```
#include <unistd.h> 
```

在代码中，当前工作目录是使用 getcwd(2) 获得的，它工作正常，但 gethostname(2) 似乎不起作用。它不会在 MINGW32 上使用 gcc 进行编译，给出错误：未定义的对 'gethostname' collect2 的引用：ld reurned 1 exit status。

到目前为止，这是我的代码。

```
#include <stdio.h>
#include <string.h>
#include <unistd.h>

static int LINE_MAX = 10000;
static char *cmdLine = "Samcmd --> ";

int main( int argc, char *argv[] )
{
    char cwd[LINE_MAX];
    char hostName[LINE_MAX];
    int looper = 1;
    char *token = NULL;
    char line[LINE_MAX];
    char *placehold = NULL;

    getcwd(cwd, LINE_MAX - 1);
    gethostname(hostName, LINE_MAX - 1);
    while ( looper == 1 )
    {
        printf( "%s | %s", hostName, cmdLine );
        if( fgets( line, LINE_MAX, stdin ) != NULL )
        {
            token = strtok( line, ";" );
            do{
                if( strcmp(token, "exit\n") == 0 ) /*if an exit command is issued*/
                {
                    looper = 0;
                }
                system(token);
                token = strtok( NULL, ";" );
            } while ( token != NULL );
        }
    }
    return 0;
} 
```

欢迎任何批评和评论:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T03:27:22.527

这在我的系统上工作正常，打印主机名，然后是提示符。它*不会*打印当前的工作目录，但这只是因为它不在 中`printf`，这更适合：

```
printf( "%s | %s | %s", hostName, cwd, cmdLine ); 
```

在我的系统上，这给了我：

```
paxbox01 | /home/pax/Pax | Samcmd --> 
```

如果您*没有*看到主机名，则需要注意调用可能会失败。您应该检查`gethostname`（连同`errno`）的返回值，看看是否是这种情况。

您可能还想澄清“似乎不起作用”的意思。它会崩溃吗？它会给你一个空字符串吗？它是否给您一个您认为不正确的*非空字符串？*您是否只是因为在提示之前只输出了一个字符串而感到困惑（有关此问题的修复，请参见上文）？

这将极大地帮助这里的任何人帮助您。

* * *

根据您添加的文字：

> 它不会在 MINGW32 上使用 gcc 进行编译，给出错误：未定义对 'gethostname' collect2 的引用：ld reurned 1 exit status。

我认为您需要在 MinGW 中链接一个额外的库。MinGW 并不意味着提供 UNIX 的所有功能（例如，CygWin 试图这样做）。更多的是提供`gcc`构建 Windows 应用程序的工具链。

您应该将`-lws2_32`选项添加到您的编译器行（在末尾），以便它引入`ws2_32`库，这是代码所在的`gethostname`位置。

或者，Win32 API 包括[`GetComputerNameEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724301%28v=vs.85%29.aspx)我认为没有额外链接要求的，尽管此时您的代码当然是不可移植的。

另外，在MinGW下，你*可能会*发现需要用到WinSock（在调用任何网络函数之前先包含`winsock2.h`和调用）。`WSAStartup()`自从我在 MinGw 下尝试这个已经有一段时间了，但我似乎记得这是一个要求（它可能已经改变）。

# c++ - C++ 动态转换

> ID：11822177
> 
> 赞同：-1
> 
> 时间：2012-08-06T03:20:33.637
> 
> 标签：c++, virtual, dynamic-cast

```
class A
{
};

class B:public A
{
};
int main()
{
    A a;
    B b;
    A *ap = &b;
    B *bp = dynamic_cast<B*>(ap);
    if(bp!= NULL)
       cout<<"Pass"<<endl;
    else
       cout<<"Fail"<<endl;
    return 0;
} 
```

如果要进行动态转换，为什么 A 类应该是虚拟的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T03:36:21.247

`dynamic_cast`工作方式与`static_cast`. a 的结果`static_cast`始终是一个指针。但是，如果转换不正确（对于给定指针最初不是的类型），则转换的结果是未定义的；指针不一定有效。`static_cast`因此，使用;转换为派生类时存在一定程度的不确定性。没有任何机制可以防止你投错东西。

`dynamic_cast`如果转换正确，则返回有效指针，如果不正确，则返回空指针。因此，结果在所有情况下都是明确定义的。为了做到这一点，`dynamic_cast`必须是*动态*的。这意味着它必须对指针进行运行时检查，以查看被转换为的类型是否是合法的转换操作。

由于“按使用付费”原则，C++ 禁止对非虚类型进行强制转换：没有虚函数的类型通常不是您通过其基类传递的类型。没有虚拟的继承主要是关于使用现有的实现，而不是专门化函数。即使是像虚拟析构函数这样简单的东西也足够了。

需要做的机器`dynamic_cast`是非零的。*因此，根据“按使用付费”的原则，只有那些有用*的课程才会付费。IE：那些是虚拟的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T03:22:49.300

输出将大致如下：

> 错误 xxxx： 的参数无效`dynamic_cast`。类是非多态类型。

这些类需要是多态的，因为这是`dynamic_cast`. 在内部，`dynamic_cast`检查虚拟表指针，但这是一个实现细节。

您可以`static_cast`在这种情况下使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T11:29:23.527

`virtual`是多态性的关键。虚函数意味着它可以被派生类“覆盖”，否则类之间没有多态性，只有继承。如果类不是多态的，`dynamic_cast`则不能使用。

# apache - 如果查询匹配目录，.htaccess 发出 HTTP 重定向

> ID：11822186
> 
> 赞同：1
> 
> 时间：2012-08-06T03:22:02.913
> 
> 标签：apache, .htaccess, mod-rewrite

我正在使用 mod_rewrite 向 PHP 发送查询以在 CMS 中进行处理。我的问题：如果查询是目录的名称，则发送到 PHP 的查询将添加到 URL。

这是代码：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule (.*) /process.php\?query=$1 [QSA,NC,L] 
```

所以如果用户输入

```
http://example.com/lolcats 
```

mod_rewrite 静默重定向到

```
http://example.com/process.php?query=lolcats 
```

这很棒。但是如果`lolcats`是一个目录， mod_rewrite 重定向（不是静默）到

```
http://example.com/lolcats/?query=lolcats 
```

将查询添加到原始请求的末尾。Apache 仍然提供 PHP 输出，但它会更改用户地址栏中的 URL。

因此，即使查询是目录的名称，我也需要停止将查询添加到请求中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:23:31.183

我使用了上面 Jon Lin 提供的解决方案，对添加斜杠的规则稍作修改：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ $1/ [L,R=301] 
```

这使得该规则适用于其中包含多个斜杠的地址，例如

```
http://example.com/path/to/page 
```

对 PHP 的主要重写与 Jon 指出的完全一样：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)/$ /process.php\?query=$1 [QSA,NC,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T03:31:56.207

这是一个`DirectorySlash`问题，当您尝试访问目录时，apache 会使用尾部斜杠进行重定向。

您可以打开`DirectorySlash Off`（注意有[一个关于关闭此功能的安全警告](http://httpd.apache.org/docs/2.2/mod/mod_dir.html#directoryslash)），或者尝试让 mod_rewrite 抢先处理它，例如：

```
# Above your existing rules
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]+)$ /$1/ [R=301,L]

# and small modification to your existing rule to handle trailing slash
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)/$ /process.php\?query=$1 [QSA,NC,L] 
```

尽管如果您通过 路由所有现有目录`process.php`，则可能会忽略安全警告。

# c# - C# TreeView 前景色节点

> ID：11822187
> 
> 赞同：1
> 
> 时间：2012-08-06T03:22:03.460
> 
> 标签：c#, colors, treeview

我可以使用该属性设置节点的颜色`ForegroundColor`，但是会出现一个奇怪的问题：

如果您选择一个彩色节点（无论是什么颜色），然后在鼠标按下时左键单击任何其他节点，该节点就会恢复到其原始颜色（在我的情况下为黑色）。只要我松开鼠标，前景色就会重新设置。

谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:36:03.120

这是设计使然。但它只有在按下鼠标时才会保持这种状态，所以它不应该让用户分心，事实上，它向用户表明控件检测到你的动作。
但是，如果您热衷于改变这种行为，请覆盖`onMouseDown`事件

# command-line - SSH SCP本地文件到终端Mac Os X中的远程

> ID：11822192
> 
> 赞同：96
> 
> 时间：2012-08-06T03:23:21.027
> 
> 标签：command-line, ssh, terminal, scp

我正在尝试使用 SSH 通过 VPN 将本地文件“magento.tar.gz”从本地计算机复制到远程服务器。这是连接到我在这里用作 xx.xxxx 的虚拟机的内部 IP。

我对 SSH 帐户拥有完整的“sudo”访问权限，因此复制时应该没有任何问题。我尝试了以下方法：

我已经尝试了以下（magento.tar.gz 文件已经在本地根目录中）

```
sudo scp magento.tar.gz user@xx.x.x.xx/var/www/ 
```

这要求我输入我的本地密码。之后返回`cp: user@xx.x.x.xx/var/www: Not a directory`

```
sudo scp /Users/myname/magento.tar.gz user@xx.x.x.xx/var/www/ 
```

返回相同。

我需要在任何地方包含 SSH 吗？

我需要先通过 SSH 连接到站点吗？

旁注：我已经设法通过 SSH 连接到服务器，浏览到目录并创建一个文件夹并使用`sudo mkdir`etc 删除它，所以我绝对有权限。

* * *

## 回答 #1

> 赞同：211
> 
> 时间：2012-08-06T03:26:06.113

首先需要`:`在IP地址后面加上，表示路径如下：

```
scp magento.tar.gz user@xx.x.x.xx:/var/www 
```

我认为你不需要`sudo`. `scp`在这种情况下，它不会影响远程机器，只会影响本地命令。

然后，如果您的`user`@xx.xxxx 没有写入权限，`/var/www`那么您需要执行 2 次：

复制到您的主文件夹中的远程服务器（`:`代表您的远程主文件夹，`:subfolder/`根据需要使用，或`:/home/user/`用于完整路径）：

```
scp magento.tar.gz user@xx.x.x.xx: 
```

然后 SSH 并移动文件：

```
ssh user@xx.x.x.xx
sudo mv magento.tar.gz /var/www 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-12-29T17:21:32.870

只是为了澄清 JScoobyCed 给出的答案， scp 命令不能将文件复制到需要管理权限的目录。但是，您可以使用 scp 命令复制到属于远程用户的目录。

因此，要复制到需要 root 权限的目录，您必须首先使用 scp 命令将该文件复制到属于远程用户的目录。接下来，您必须使用 ssh 登录到远程帐户。登录后，您可以使用 sudo mv 命令将文件移动到您选择的目录。简而言之，使用的命令如下：

使用 scp，将文件复制到远程用户帐户中的目录，例如 Documents 目录：

```
scp /path/to/your/local/file remoteUser@some_address:/home/remoteUser/Documents 
```

接下来，使用 ssh 登录到远程用户的帐户，然后使用 sudo 将文件移动到受限目录：

```
ssh remoteUser@some_address
sudo mv /home/remoteUser/Documents/file /var/www 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-19T19:11:20.393

注意你的文件名也没有`:`。我发现我必须`mv blah-07-08-17-02:69.txt no_colons.txt`然后`scp no-colons.txt server:`不要忘记`mv`回到服务器上。以防万一这是一个问题。

# python - 烧瓶，烧瓶登录 - 我不明白

> ID：11822193
> 
> 赞同：2
> 
> 时间：2012-08-06T03:23:21.723
> 
> 标签：python, flask

我有一个包含用户和角色的 mysql 表，并且我有一个登录页面。有用。但是，我不知道如何从数据库中查找用户。

1）这是我的用户类和登录表单

```
class User(UserMixin):
    def __init__(self, email, password, org_role, user_role, id, active=True):
        self.email = email
        self.password = password
        self.org_role = org_role
        self.user_role = user_role
        self.id = id
        self.active = active
    def is_authenticated(self):
        return True
    def is_active(self):
        return True
    def is_anonymous(self):
        return False
    def get_id(self):
        return unicode(self.id)
    def __repr__(self):
        return '<User %r>' % (self.email)

@login_manager.user_loader
def load_user(id):
    return USERS.get(int(id))

@app.route("/login", methods=["GET", "POST"])
def login():
    form = LoginForm()
    if request.method == "POST" and form.validate():
        if form.email.data + form.password.data in USER_NAMES:
            remember = request.form.get("remember", "no") == "yes"
            if login_user(USER_NAMES[form.email.data + form.password.data], remember=remember):
                flash("Logged in!")
                return redirect(request.args.get("next") or url_for("index"))
            else:
                flash(u"Sorry, but you could not log in.")
        else:
            flash(u"Invalid email/password.")
    return render_template("login.html", title = 'Sign In', form = form) 
```

2）这是我不明白的。

我有这个代码：

```
USERS={}
for i,nn in enumerate(userlist):
    USERS[i+1]=User(nn['email'],nn['password'],nn['org_role'],nn['user_role'],int(nn['user_id']))
USER_NAMES = dict((u.email + u.password, u) for u in USERS.itervalues()) 
```

当我启动应用程序时，我有一个 mysql 查询，它填充了所有允许的`USERS`.

我试图关注来自 flask-login 的文档，但他们没有显示从数据库中查找用户的示例。仅来自预先填充的用户列表。如果我更新表中的用户，除非我重新启动服务器，否则它不会被拾取。

这真的没有意义。任何有关如何从 mysql 数据库中查找用户并将其添加到 User 类的指导都会很棒。

以下是我获取所有用户的代码：

```
def getUsers():
    conn = MySQLdb.connect(host=db_host,user=db_username,passwd=db_password,db=db_database)
    cursor = conn.cursor()
    #query = """SELECT * from rtb_users WHERE email='%s' and password='%s'""" % (email,user_password)
    query = """SELECT * from rtb_users"""
    cursor.execute(query)

    userlist = []
    rows = cursor.fetchall()
    for row in rows:
        user_id = row[0]
        email = row[1]
        password = row[2]
        first_name = row[3]
        last_name = row[4]
        org_role = row[5]
        user_role = row[6]

        temp = {'user_id':user_id,'email':email,'password':password,'first_name':first_name,'last_name':last_name,'org_role':org_role,'user_role':user_role}
        userlist.append(temp)
    cursor.close()
    conn.close()
    return userlist
userlist = getUsers() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T02:20:51.777

每次需要加载用户时只需访问数据库：

```
@login_manager.user_loader
def load_user(id):
    return get_user(id)

def get_user(user_id):

    # TODO: Return None on ValueError
    user_id = int(user_id)

    conn = MySQLdb.connect(...etc...)
    cursor = conn.cursor()
    user = cursor.fetchone("SELECT * FROM rtb_users WHERE ID = %s", (user_id, ))

    conn.close()

    try:
        # A simpler way to map row names to row values in a dictionary
        user = dict(zip(cursor.description, user))
        user = User(user['email'],
                        user['password'],
                        user['org_role'],
                        user['user_role'],
                        int(user['user_id']))
    except MySQLdb.Error:
        user = None

    return user 
```

最终，您很可能希望在`get_user`函数上进行缓存（以避免为与服务器建立的每个连接添加数据库调用），但对于测试，这*应该可以*工作。

# python - 如何覆盖 nltk 的 pos_tag 分配给文本的 POS 标签？

> ID：11822194
> 
> 赞同：2
> 
> 时间：2012-08-06T03:23:38.293
> 
> 标签：python, nltk

我正在使用来自 nltk 的 pos_tag 来标记一组（未标记的）技术文档中的文本并获得良好的结果，但它总是将诸如“已验证”之类的词标记为动词，有时它可以用作形容词。换句话说，简单地更改标签不会每次都起作用。

有没有一种好方法可以覆盖或更正考虑上下文的​​标记结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:14:02.607

不幸的是，您的问题归结为“如何改进我的标记？”。答案是，您需要构建一个更好的标记器。所有重要的标记器都会考虑上下文，因此这不仅仅是增加上下文敏感性的问题；它已经存在，只是在某些情况下失败了。

NLTK 标记模型允许您“链接”标记器，以便每个标记器都可以从另一个停止的地方开始（例如，ngram 标记器回退到未知单词的正则表达式标记器）。它是这样工作的：

```
t0 = nltk.DefaultTagger('N')
t1 = nltk.UnigramTagger(traindata, backoff=t0)
t2 = nltk.BigramTagger(traindata, backoff=t1) 
```

`traindata`这是标准 NLTK 形式中已标记句子的列表：每个句子都是形式中的元组*列表*`(word, tag)`。（如果你有理由，你可以为每个标注器使用不同的训练语料库；你肯定想要使用一致的标签集）。例如，这是一个两句长的训练语料库：

```
traindata = [ [ ('His', 'PRO'), ('petition', 'N'), ('charged', 'VD'), 
                ('mental', 'ADJ'), ('cruelty', 'N'), ('.', '.') ],
              [ ('Two', 'NUM'), ('tax', 'N'), ('revision', 'N'), ('bills', 'N'),
                ('were', 'V'), ('passed', 'VN'), ('.', '.') ] ] 
```

标记器`t2`（您将使用的那个）将构建一个二元模型；如果它看到未知的输入，它将回退到`t1`，它使用一元模型；如果这也失败了，它将遵循`t0`（它只是标记所有内容'N'）。

您可以添加一个特殊用途的重新标记器来改进默认标记，但当然您必须首先弄清楚它要做什么——这当然是您首先要求的。

如果 nltk 标注器不断地犯同样类型的错误，你可以整理一个更正的语料库，并在此基础上训练一个重新标注器。您需要多少数据取决于错误的一致性。我从未尝试过，但 Brill 标记器通过连续应用重新标记规则来工作，所以它也许是正确的工具。

另一种方法是尝试构建自己的特定领域标记语料库：使用 nltk 标记器标记训练集，手动或半自动更正它，然后在其上训练标记器并尝试在新数据上获得比使用默认 nltk 标记器（可能通过将两个标记器链接在一起）。

# javascript - XTK：找不到给定的容器

> ID：11822195
> 
> 赞同：2
> 
> 时间：2012-08-06T03:23:59.407
> 
> 标签：javascript, html, dom, xtk

我正在使用 jQuery 动态创建一个 div，然后将该 div 的 id 作为 renderer3D 的容器传递。当我做：

```
r.container = id 
```

我在 JS 控制台中看到“找不到给定容器”的错误。我已经检查过了，div 在 DOM 中并且可见。奇怪的是，这工作正常，但我对加载 XTK 库的时间做了一个小的改动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T01:18:58.420

提交 [https://github.com/xtk/X/commit/77d6c1e6e3062465acc297f782f410cf5a470211](https://github.com/xtk/X/commit/77d6c1e6e3062465acc297f782f410cf5a470211) 后应该一切正常！问题是 Google Closure Compiler 使用 $ 来优化代码，这打破了 jQuery 的使用。

请参阅此处的示例[http://jsfiddle.net/YLVPr/](http://jsfiddle.net/YLVPr/)

```
var element = $(document.body);
//container.show();
var id = 'xtkwidget_' + 1;//utils.uuid();
var xtkdiv = $('<div/>').attr('id',id);
xtkdiv.css('background-color','#FFF').width(400).height(300);
element.append(xtkdiv);
var obj_c54ce3e329b84364b5542aeb4c303ece = new X.renderer3D();
obj_c54ce3e329b84364b5542aeb4c303ece.container = document.getElementById(id); // NOTE here we have to pass the original div, not the id or the jQuery object
obj_c54ce3e329b84364b5542aeb4c303ece.init();

var obj_bd99e35ed147423faa2a2d77cbc540af = new X.mesh();
obj_bd99e35ed147423faa2a2d77cbc540af.magicmode = true;
obj_bd99e35ed147423faa2a2d77cbc540af.opacity = 0.700000;
obj_bd99e35ed147423faa2a2d77cbc540af.color = [1.000000,1.000000,1.000000];
obj_bd99e35ed147423faa2a2d77cbc540af.file = "http://x.babymri.org/?avf.vtk";
obj_c54ce3e329b84364b5542aeb4c303ece.add(obj_bd99e35ed147423faa2a2d77cbc540af);
obj_c54ce3e329b84364b5542aeb4c303ece.render();​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:17:36.907

该代码是一个非常复杂的 Web 应用程序的一部分。实际的 JavaScript 代码由服务器动态生成，通过 JSON 发送到浏览器并传递给 eval。以下是代码的示例：

```
container.show();
var id = 'xtkwidget_' + utils.uuid();
var xtkdiv = $('<div/>').attr('id',id);
xtkdiv.css('background-color','#FFF').width(400).height(300);
element.append(xtkdiv);
var obj_c54ce3e329b84364b5542aeb4c303ece = new X.renderer3D();
obj_c54ce3e329b84364b5542aeb4c303ece.container = id;
obj_c54ce3e329b84364b5542aeb4c303ece.init();

var obj_bd99e35ed147423faa2a2d77cbc540af = new X.mesh();
obj_bd99e35ed147423faa2a2d77cbc540af.magicmode = true;
obj_bd99e35ed147423faa2a2d77cbc540af.opacity = 0.700000;
obj_bd99e35ed147423faa2a2d77cbc540af.color = [1.000000,1.000000,1.000000];
obj_bd99e35ed147423faa2a2d77cbc540af.file = "files/smallsurface.vtk";
obj_c54ce3e329b84364b5542aeb4c303ece.add(obj_bd99e35ed147423faa2a2d77cbc540af);
obj_c54ce3e329b84364b5542aeb4c303ece.render(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T07:20:43.610

你能围绕这个给出更多的代码行吗？

第一个可能的问题：你是怎么写你的身份证的？If 必须是 'xtkcontainer' 而不是 '#xtkcontainer' 与 jQuery 不同。

另一个可能的问题：您的代码行是在窗口加载结束之前执行的。您的代码是在正文之后编写的，在“window.onload”函数中编写还是在用户加载窗口或超时事件后执行？

Ricola3D

# android - 如何在 Android App 中访问 SQLiteManager 中创建的 SQLite 数据库？

> ID：11822196
> 
> 赞同：0
> 
> 时间：2012-08-06T03:23:59.267
> 
> 标签：android, sqlite, sqlitemanager

我在 Mozilla 的 SQLiteManager 中创建了一个数据库，我将其导出并将 .sql 文件保存在 assets 文件夹中，现在如何从我的 android 应用程序读取或在该数据库中输入条目？我的 DatabaseHandler（扩展 SQLiteOpenHelper）应该是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:25:52.370

您不能直接从 assets/. 您需要将其复制到应用程序可以直接访问的文件（内部或外部存储）中。然后像往常一样打开。

更多细节在这里：[http ://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

# jakarta-ee - 如何编写一个程序以仅使用一个动作类而不使用调度动作或查找调度动作在 struts 中插入、更新、删除？

> ID：11822198
> 
> 赞同：-2
> 
> 时间：2012-08-06T03:24:04.057
> 
> 标签：jakarta-ee, struts

如何编写一个程序以仅使用一个动作类而不使用调度动作或lookupdispatch动作在struts中插入、更新、删除？有可能这样做吗？根据[dZone](http://www.dzone.com/tutorials/java/struts/struts-example/struts-lookup-dispatch-action-example-1.html)，

> LookupDispatchAction 提供了一种将一组相关函数分组为单个动作的机制，从而无需为每个函数创建单独的动作。

但是，我不想使用它。是否可以只使用一个动作类？如何实现？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:32:26.503

可以使用**javascript**。只是您应该**为**添加**，**更新**和**删除**设置**参数，并且在动作类中，如果您获得添加参数，则应该通过（**request.getParameter（“id”）**）获取这些参数，然后调用添加函数，否则**更新**或**删除**。

# django - Django异常值错误

> ID：11822199
> 
> 赞同：0
> 
> 时间：2012-08-06T03:24:08.110
> 
> 标签：django, json

我正在尝试将 JSON 格式的数据发送到我的 django 应用程序。当我尝试如下使用 POST 时，出现以下错误。那么，我的发布方式或视图方法有什么问题。

**编辑：错误信息：**

```
<pre class="exception_value">&#39;Key \&#39;data\&#39; not found in &lt;QueryDict: {u\&#39;{ &quot;data&quot;:\\n        {\\n          &quot;name&quot;: &quot;Something&quot;,\\n          &quot;content&quot;: &quot;Anything&quot;\\n        }\\n}\\n\&#39;: [u\&#39;\&#39;]}&gt;&#39;</pre>
                    <table class="meta">
                        <tr>
                            <th>Request Method:</th>
                            <td>POST</td>
                        </tr>
                        <tr>
                            <th>Request URL:</th>
                            <td>http://localhost:8000/api/recipes/item_new/</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:33:27.527

在我看来缩进是错误的。您开始处理的行`postdata`与您返回`HttpResponseBadRequest`. 将整个块向左移动一个空间，它应该可以工作。

顺便提一句。一个缩进最好使用 4 个空格。这是 Python 开发中的常见做法。无论如何：一个空间太难阅读和调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:18:42.540

您发布的是原始 JSON，而不是表单编码数据。您需要访问`request.body`：

```
postdata = request.body
postdata = json.loads(postdata) 
```

请注意，这是`request.raw_post_data`在 1.4 之前的版本中调用的。

# java - SQL Server 2000 - 双精度为 Null

> ID：11822202
> 
> 赞同：0
> 
> 时间：2012-08-06T03:24:35.023
> 
> 标签：java, sql-server-2000, junit4

我创建了一个数据类型为双精度的测试表

```
 String sql = "create table doub1 (value double precision)";

   fCursor.execute(sql);

   sql = "insert into doub1 values(null)";
   fCursor.parse(sql);
   fCursor.execute();
   fSession.commit();
   sql = "select value from doub1";
   fCursor.executeQuery(sql); 
```

当我在查询分析器中执行此操作时，我的输出为空。这是给出的

> 在 SQL 查询分析器中查看查询结果时，空值在结果集中显示为 (null)。

在以下链接中

[http://msdn.microsoft.com/en-us/library/aa196106(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa196106(v=sql.80).aspx)

但是当我通过 Junit 执行上述操作时，我的输出是 0.0。

我想知道为什么会这样。有人可以澄清一下吗？

谢谢

# haskell - 将 css 和图像添加到 snap 的 cabal 构建中？

> ID：11822203
> 
> 赞同：4
> 
> 时间：2012-08-06T03:24:38.967
> 
> 标签：haskell, cabal, haskell-snap-framework

当我构建我的[snap](http://snapframework.com/)项目时，它不包含我的任何静态资源或模板。

我的项目结构如下：

```
site.cabal
\src
\snaplets
      \heist
           *.tpl
\static
       \css
           *.css
       \images
           *.jpg 
```

目前，我正在将我的二进制文件与我的静态文件（我只是复制过来）分开部署到服务器。

有一个更好的方法吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:31:44.677

您不能将静态文件嵌入到可执行文件中，同时仍然可以正常工作，因为它们应该 wrt 其余部分。

此外，在 Windows 中，PE 文件中有一个“资源系统”，可让您嵌入资源，但在 Linux/Unix 上则没有。因此，使用外部文件是确保它们在每个平台上都可访问的唯一可靠方法。

此外，您可能希望在用户上传静态文件时添加或删除它们，而这对于嵌入式资源是不可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T22:35:20.627

对于我最近的项目，我创建了一个名为 deploy.sh 的脚本，它看起来像这样：

```
#!/bin/sh
rf -fr ../myapp-deploy/*
cp -R dist/build/myapp/myapp log snaplets static ../myapp-deploy 
```

然后我在 myapp-deploy 中部署所有内容。这可以通过多种方式完成。一种方法是将其压缩并通过 ftp/scp 将其发送到您的部署服务器。我喜欢并且过去使用过的另一种方法是将 myapp-deploy 放入它自己的 git 存储库中。然后在我运行 deploy.sh 之后，我提交 myapp-deploy 中的所有内容并将其推送到某个集中式存储库。然后在我的部署服务器上，我可以`git pull && killall -HUP myapp`使用最新版本上线。将它放在 git 存储库中的好处是我总是可以很容易地恢复到以前的版本。如果您有用户创建的动态文件系统资源，那么这种方法可能不适合您。

归根结底，可靠的生产部署是一个复杂的问题，需要采用个性化的方法。像这样的东西可能是一个有用的指南，但不能取代对良好 IT 工程的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-11T20:34:49.313

[您可以使用file-embed](https://hackage.haskell.org/package/file-embed)`Data.FileEmbed`中的found将静态文件嵌入到您的代码中。我创建一个目录并将所有静态的东西放在那里。然后使用以下代码访问它。`res`

```
{-# LANGUAGE TemplateHaskell #-}
-- src/Resources.hs

module Resources ( getResource, listResources ) where

import qualified Data.ByteString as BS
import Data.FileEmbed

resources :: [(FilePath, BS.ByteString)]
resources = $(embedDir "res")

getResource :: FilePath -> Maybe BS.ByteString
getResource path = findResource resources
  where
    findResource [] = Nothing
    findResource ((p,cont):xs) = if p == path
                                    then (Just cont)
                                    else findResource xs

listResources :: [FilePath]
listResources = map fst resources 
```

然后在定义路由的代码中，创建一个列表`(route, handlers)`：

```
-- src/Site.hs
resRoutes :: [(ByteString, Handler App App ())]
resRoutes = map f listResources
  where
    f res =
      (TE.encodeUtf8 $ T.pack res, (writeBS . fromJust) $ getResource res)

-- in your SnapletInit
app = makeSnaplet "app" "" Nothing $ do
  addRoutes resRoutes
  addRoutes otherRoutes
  return $ App () 
```

文件`res/css/custom.css`系统中的文件可通过`http://<site>/css/custom.css`. 这适用于文本文件和图像等二进制文件。

您应该注意，静态文件在编译期间被“消耗”，`src/Resources.hs`因此如果您添加、修改或删除资源，您将不得不触发该文件的重建。

* * *

我仍在寻找一种将 Heist 模板构建到可执行文件中的方法。应该类似，只是修改 Heist 查找和读取文件的方式，需要改用资源列表。

# jquery - 返回 jquery 中未定义的属性

> ID：11822204
> 
> 赞同：1
> 
> 时间：2012-08-06T03:24:55.160
> 
> 标签：jquery, undefined

html

```
<span class="checkbox" GroupName="ckmill">
<input id="ctl01" type="checkbox" name="ctl01" />
<label for="ctl01">A</label></span> 
```

js

```
 $(document).ready(function() {
        $('.checkbox').click(function(){
            var  $text2=$(this);

            alert($text2.attr("text"));
        });
    });​ 
```

执行时显示..`UNDEFINED`

解决办法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:26:16.387

如果您想要跨度的文本内容：

```
alert($text2.text()); 
```

没有“文本”属性可用作选择器。如果您想要跨度的 HTML 内容，请使用：

```
alert($text2.html()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T03:31:11.173

text 不是 HTML 标签的属性，您必须使用`$text2.text()`.

属性是在标签内定义的东西，例如`href`在锚标签 ( `<a href="website.com"></a>`) 或`id`几乎任何标签 ( `<div id="hello">Text</div>`) 中。

要获取属性`id`为`hello`（即“文本”）的 div 内的文本，则必须使用`.text()`.

```
alert($text2.text()); 
```

或获取 HTML 内容

```
alert($text2.html()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T03:31:51.547

**Dmeo**：http: [//jsfiddle.net/LuRqK/](http://jsfiddle.net/LuRqK/)

2件事：

1）获取内部输入的属性使用`children` [http://api.jquery.com/children/](http://api.jquery.com/children/)

2）获取文本或html使用`.text`或`.html`api

**代码**

```
 $(document).ready(function() {
        $('.checkbox').click(function(){
            var  $text2=$(this);
             alert($text2.text());
            alert($text2.children('#ctl01').attr('name'));
        });
    });​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T03:34:52.720

该对象似乎没有任何属性“文本”。你应该使用

```
alert($text2.html()); 
```

或者

```
alert($text2.text()); 
```

# c - 枚举类型如何用于分配寄存器

> ID：11822206
> 
> 赞同：1
> 
> 时间：2012-08-06T03:25:27.253
> 
> 标签：c

我无法理解下面代码的目的。阅读octeon的sdk时，枚举类型是如何分配寄存器的？以及如何使用 cvmx_fau_reg_64_t？

```
/*************************  FAU allocation ********************************/
/* The fetch and add registers are allocated here.  They are arranged
    in order of descending size so that all alignment constraints are
    automatically met.
    The enums are linked so that the following enum continues allocating
    where the previous one left off, so the numbering within each
    enum always starts with zero.  The macros take care of the address
    increment size, so the values entered always increase by 1.
    FAU registers are accessed with byte addresses. */

#define CVMX_FAU_REG_64_ADDR(x) ((x <<3) + CVMX_FAU_REG_64_START)
typedef enum
{
    CVMX_FAU_REG_64_START          = 0, 
    CVMX_FAU_REG_64_END            = CVMX_FAU_REG_64_ADDR(0),
} cvmx_fau_reg_64_t;

#define CVMX_FAU_REG_32_ADDR(x) ((x <<2) + CVMX_FAU_REG_32_START)
typedef enum
{
    CVMX_FAU_REG_32_START          = CVMX_FAU_REG_64_END,
    CVMX_FAU_REG_32_END            = CVMX_FAU_REG_32_ADDR(0),
} cvmx_fau_reg_32_t;

#define CVMX_FAU_REG_16_ADDR(x) ((x <<1) + CVMX_FAU_REG_16_START)
typedef enum
{
    CVMX_FAU_REG_16_START          = CVMX_FAU_REG_32_END,
    CVMX_FAU_REG_16_END            = CVMX_FAU_REG_16_ADDR(0),
} cvmx_fau_reg_16_t;

#define CVMX_FAU_REG_8_ADDR(x) ((x) + CVMX_FAU_REG_8_START)
typedef enum {
    CVMX_FAU_REG_8_START           = CVMX_FAU_REG_16_END,
    CVMX_FAU_REG_8_END             = CVMX_FAU_REG_8_ADDR(0),
} cvmx_fau_reg_8_t;

/* The name CVMX_FAU_REG_AVAIL_BASE is provided to indicate the first available
   FAU address that is not allocated in cvmx-config.h. This is 64 bit aligned. */
#define CVMX_FAU_REG_AVAIL_BASE ((CVMX_FAU_REG_8_END + 0x7) & (~0x7ULL))
#define CVMX_FAU_REG_END (2048) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T05:50:22.270

在 C 中，枚举类型类似于有符号整数数据类型。这是你应该如何使用`cvmx_fau_reg_64_t`：

```
cvmx_fau_reg_64_t myRegister;

myRegister=CVMX_FAU_REG_64_START;

//Do something with the *myRegister* variable

myRegister=CVMX_FAU_REG_64_END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-21T05:04:39.023

Cavium OCTEON FAU 寄存器实际上由一系列特殊内存支持，这些内存通过标签操作强制为原子，并通过 IOBDMA 访问。

因此，您只需指定寄存器编号和大小。您应该使用 cvmx-fau API，例如 cvmx_fau_fetch_and_add64(fau_reg_64_t reg, value)，或类似的用于 Add、Increment。OCTEON 架构将保证所有读/写都是**原子**的，使用标签操作和 IOBDMA 总线。

您的代码应该只选择并引用特定的 FAU 索引，并决定将它们用于 64/32/16/8 位值/计数器。其余的都是通过 SDK 提供的 FAU 功能**而已**。

cvmx-config 可以为您定义最初的几个，然后您可以根据需要在代码中添加更多。这些将在 FAU_AVAIL_BASE 之后进行。

在任何时候，您都不应该直接定义/操作/取消引用这些内存位置。这些**不像**普通的 64 / 32 位变量或指针。

派克西姆

# entity-framework - 无法删除对象，因为在 ObjectStateManager 中找不到它？

> ID：11822207
> 
> 赞同：2
> 
> 时间：2012-08-06T03:25:39.390
> 
> 标签：entity-framework, c#-4.0

我正在使用 EF4.1 从我的数据库中删除一个对象：

```
public virtual void Delete(T entity)
{
  _entities.CreateObjectSet<T>().DeleteObject(entity);
} 
```

收到错误：

```
The object cannot be deleted because it was not found in the ObjectStateManager 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T04:03:47.857

如果您尝试删除的对象未附加到当前上下文，则会出现此错误。要获取附加对象，您需要从上下文中的数据库查询对象，或者手动调用附加（在删除之前）将对象放入上下文中。

# hibernate - 多对一映射和 Struts2-jquery-grid

> ID：11822215
> 
> 赞同：1
> 
> 时间：2012-08-06T03:26:14.373
> 
> 标签：hibernate, struts2, many-to-one, jqgrid

我正在检查 struts2-jquery-grid 的展示。我可以理解如何将我的对象列表发送到网格模型，但在示例中，对象很简单，它没有作为对象的属性。但是在我的情况下，我的模型类看起来像这样：

```
public class Student(
 private String first_name;
 private String last_name;
 private Person father;
 private Person mother; // an attribute of another class

 // other attributes, getters and setters

} 
```

在示例中，他们有这样的：

```
<s:url id="remoteurl" action="jsontable"/>
    <sjg:grid
        id="gridtable"
        caption="Customers Examples"
        dataType="json"
        href="%{remoteurl}"
        pager="true"
        gridModel="gridModel"
        rowList="10,15,20"
        rowNum="15"
        rownumbers="true"
        resizable="true"
        resizableAnimate="true"
        resizableGhost="true"
        resizableHandles="all"
    >
        <sjg:gridColumn name="id" index="id" title="ID" width="30" formatter="integer" sortable="false"/>
        <sjg:gridColumn name="name" index="name" title="Name" width="250" sortable="true"/>
        <sjg:gridColumn name="country" index="country" title="Country" sortable="false"/>
        <sjg:gridColumn name="city" index="city" title="City" sortable="false"/>
        <sjg:gridColumn name="creditLimit" index="creditLimit" title="Credit Limit" align="right" formatter="currency" sortable="false"/>
    </sjg:grid>
  </div> 
```

请，关于如何显示父亲和母亲的 ID（我的数据库中的外键）的任何想法？另外，是不是可以不提所有属性？？十分感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T07:14:34.663

如果我的想法是正确的，你想显示属性的和`Id`属性的。这意味着该对象具有属性。如果正确，您可以这样做；`father``Id``mother``Person``Id`

```
<sjg:gridColumn name="father.id" index="father.id" title="Father Id" width="250" sortable="true"/>
<sjg:gridColumn name="mother.id" index="mother.id" title="Mother Id" width="250" sortable="true"/> 
```

我认为这将解决您的问题。

# php - 如何在一段时间后触发mysql事件？

> ID：11822217
> 
> 赞同：1
> 
> 时间：2012-08-06T03:26:32.720
> 
> 标签：php, mysql

我有一个存储在线用户的 mysql 数据库。是否有一种有效的方法可以在一段时间后触发事件以检测非活动用户（将其状态设置为“离线”）？我将用户上次活动的时间存储在表中（TIMESTAMP 值）。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:29:22.993

要定期运行 php 脚本，您有很多解决方案：

*   您使用 cron 作业（这意味着您有一个服务器）。要学习这样做，您可以[访问此链接](http://www.thegeekstuff.com/2011/07/php-cron-job/)。
*   您使用MySQL 提供的[Event Scheduler 。](http://dev.mysql.com/doc/refman/5.6/en/events.html)
*   如果您没有服务器，您可以使用会定期启动您的任务的提供商，最著名的是[Webcron.org](http://webcron.org/)（它不是免费的）。
*   其他解决方案，您创建一个脚本 PHP，该脚本将在后台运行，同时等待正确的时间执行操作；为此，您必须有权访问功能`set_time_limit()`和`ignore_user_abort()`. 然后，您创建一个连续循环的脚本，并检查是否有事可做。

# php - 继续一句话

> ID：11822227
> 
> 赞同：0
> 
> 时间：2012-08-06T03:28:49.157
> 
> 标签：php

我需要帮助这段代码：

```
<?php
$keyword = "pie is great";
if ($keyword == "pie is great"){
    echo "Cool :D";
}
?> 
```

现在图像，如果一个表单上有两个文本框，一个有`pie is`，另一个有`great`，我将如何检查句子是否完成`pie is great`？

诸如此类，只需检查句子是否在 2 个不同的文本框中完成，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:31:15.743

像这样...

```
if ($input1 == 'pie is' && $input2 == 'great')
  echo "I like pie too!"; 
```

将它们连接起来不会验证第二个输入是否“很棒”，因为它可能在第一个输入中具有“馅饼很棒”和一个空的第二个输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T03:37:21.303

您需要连接两个文本框值。

```
<?php
$keyword = "pie is great";
$newVal = $_POST['txtbox1'] . ' ' . $_POST['txtbox2'];
if ($keyword == $newVal)
{
    echo "Cool :D";
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T06:29:00.223

好的，如果我没记错的话，您要说的是，无论单词以什么顺序出现，您都希望对它们进行比较。好吧，花了几分钟写了一些代码，这就是我想出的。

```
<?php

$string1 = 'pie is great';

$user_input = $_POST['txtbox1'].' '.$_POST['textbox2'];

$user_input = explode(' ', $user_input);

$sorted = NULL;
foreach($user_input as $row)
{
    if($row === 'pie')
    {
        $sorted .= $row.' ';
    }
}
foreach($user_input as $row)
{
        if($row === 'is')
        {
            $sorted .= $row.' ';
        }
}
foreach($user_input as $row)
{
            if($row === 'great')
            {
                $sorted .= $row;
            }
}

if($sorted == $string1)
{
    // do something
}else{
    // do something else
}
?> 
```

我所做的只是获取输入并将其分解以使其成为一个数组，然后循环查找每个单词。这绝不是最好的方法。这只是可能解决方案的一个示例。我对其进行了测试以确保它可以正常工作，并且无论以何种方式输入单词都可以。

# javascript - 如何从类函数内部访问对象属性

> ID：11822234
> 
> 赞同：8
> 
> 时间：2012-08-06T03:29:50.923
> 
> 标签：javascript, class, object

我的 Javascript 课程之一有时需要使用 Json 进行“更新”。我一直在做一个函数，它更新数据数组，给定一个 id，但现在我想做更多的封装（函数更新，在类内）。

我做了什么：

```
function File(data){
        this.data = data;

        this.update = function (callback){
            var set = function(ajaxData){
                this.data = ajaxData.PcbFile;
            }
            getPcbFile(data.id, function(ajaxData){
                set(ajaxData);
                callback();
            });
        };
    } 
```

但是，`this.data = ajaxData.PcbFile;`不起作用......我的对象仍然是最后一个数据集，而不是更新的数据集。我创建的函数 SET 作为另一种设置数据的尝试。

ajax没有问题，因为我调试了ajaxData，没关系（当我更新时）。

那么，我如何真正`data`从内部函数访问对象属性？

（对不起我的英语不好...）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-06T03:34:12.543

我很难学到这一点，你必须小心`this`。它总是指`this`当前范围内的，而不是它的包含对象。每当您将某些内容包装在 中时`function() { ... }`，`this`就会成为不同的范围。在您的情况下，将对象复制到局部变量并操作它的`.data`属性。

```
function File(data){
    this.data = data;
    var file = this; //call the variable whatever you want
    this.update = function (callback){
        var set = function(ajaxData){
            file.data = ajaxData.PcbFile;
        }
        getPcbFile(data.id, function(ajaxData){
            set(ajaxData);
            callback();
        });
    };
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-06T03:34:40.287

缓存`this`，以便您可以在其他地方的相同上下文中引用它：

```
function File(data){

  var self = this;

  self.data = data;

  self.update = function (callback){
    var set = function(ajaxData){
      self.data = ajaxData.PcbFile;
    }
    getPcbFile(data.id, function(ajaxData){
      set(ajaxData);
      callback();
    });
  };
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T03:34:38.447

试试这个：

```
function File(data){
    this.data = data;

    var self = this;

    this.update = function (callback){
        var set = function(ajaxData){
            self.data = ajaxData.PcbFile;
        }
        getPcbFile(data.id, function(ajaxData){
            set(ajaxData);
            callback();
        });
    };
} 
```

函数内的值`this`取决于该函数的调用方式。例如，当您使用“点”表示法时，`someObj.someMethod()`您`someMethod()`将`this`设置为`someObj`. 您可以使用or方法显式设置`this`为其他对象。否则，如果你调用一个函数，那么将是全局对象（）。`.apply()``.call()``set(ajaxData)``this``window`

通过保持对`this`函数外部的引用（`self`为此我更喜欢变量名），您可以在函数内部引用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-03T13:35:21.337

```
 (function(){
   var accessible = {
     prop1: 'blabla',
     verify: function(){
       console.log( this.prop1);
       return this;
     },
     deepAccess: function(){
       return function(){
         accessible.prop1 = 'bloblo';
         return function(){
           console.log("Deep access ", accessible.prop1);
         }
       }
     },
     insideFunction: function(){
       //here you can use both 'this' or 'accessible' 
                  this.prop1 = 'bleble';
                  return this;
       },
       prop2: 3.1415
    };
   return accessible;
})().verify().insideFunction().verify().deepAccess()()();

/* console shows:
 blabla
 bleble
 Deep access bloblo
*/ 
```

# jquery - 之前已经禁用的jquery绑定事件

> ID：11822235
> 
> 赞同：0
> 
> 时间：2012-08-06T03:29:52.623
> 
> 标签：jquery, events, backbone.js, add, handlers

我想暂时禁用与 jstree 和 Backbone.View.delegateEvents() 绑定的 JQuery 元素上的单击事件。

以下是我的处理方式

在禁用事件之前，我使用将事件记录在局部变量中

```
self.defaultClick = $(this).data('events').click[0]; 
```

之后，我使用禁用点击事件

```
$(this).click(false); 
```

现在我需要再次绑定，我将它分配回元素使用

```
$(this).data('events').click = self.defaultClick; 
```

效果很好，直到第二次。

我从 JQuery.event.add 'Object # has no method 'push'' 在这一行得到这个错误

```
handlers.push( handleObj ); 
```

问题是“处理程序”在第二次分配后成为事件本身，而在第一次分配时它是一个数组。

任何想法，我该如何解决？通过在确定事件已经绑定后避免重新分配事件，或者可能正在使用其他方式分配事件？

感谢您的帮助。

编辑

我在这个应用程序上使用 jstree。我在 css 类上绑定了特定事件，但是，关于应用程序的状态，我需要能够禁用所有树（包括之前绑定的类）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:35:52.993

你为什么不只维护一些 var 来控制事件是否会被执行？有点像：

```
var runEventFor = {};

runEventFor[ "myComponent" ] = true;
$( "#myComponent" ).click(function(evt){
    if ( runEventFor[ $(this).attr("id") ] ) {
        // code to run...
    }
}); 
```

当您不想执行事件时，只需设置`runEventFor[ "myComponent" ]`为 false。我认为在您的情况下，这种方法比绑定/取消绑定事件更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T03:39:28.870

绑定/取消绑定处理程序很昂贵；为什么不直接使用委托事件处理程序，设置为针对特定类名（例如`.executeState`）运行——然后您可以通过切换类来控制是否运行代码：`$(element).toggleClass('executeState');`

这样，只有一个处理程序绑定到`document`（或您要定位的元素的任何父元素），只有一次。

```
$(document).on('click', '.executeState', function() {
    // handler for click event
}); 
```

# php - 回显多维数组

> ID：11822238
> 
> 赞同：4
> 
> 时间：2012-08-06T03:30:27.890
> 
> 标签：php, multidimensional-array

我有一个使命召唤 4 的玩家列表的多维数组。当我尝试回显该数组时，它会返回`Array`30 次，因为服务器中有 30 个当前玩家。

$promodplist 的 Var_Dump（玩家列表）

```
array(27) { 
    [0]=> array(6) { 
        ["frags"]=> string(1) "0" 
        ["ping"]=> string(2) "26"
        ["nick"]=> string(10) "DIVINEBRAH"
        ["gq_name"]=> string(10) "DIVINEBRAH"
        ["gq_score"]=> string(1) "0"
        ["gq_ping"]=> string(2) "26" 
    }
    [1]=> array(6) {
        ["frags"]=> string(1) "0" 
        ["ping"]=> string(2) "35" 
        ["nick"]=> string(7) "><> <><" 
        ["gq_name"]=> string(7) "><> <><" 
        ["gq_score"]=> string(1) "0" 
        ["gq_ping"]=> string(2) "35" 
    } 
    [2]=> array(6) { 
        ["frags"]=> string(1) "0" 
        ["ping"]=> string(2) "42" 
        ["nick"]=> string(10) "xXthe0neXx" 
        ["gq_name"]=> string(10) "xXthe0neXx" 
        ["gq_score"]=> string(1) "0" 
        ["gq_ping"]=> string(2) "42" 
    } 
```

* * *

```
$servers['promod'] = array('cod4', '67.202.102.224');
$servers['promod2'] = array('cod4', '67.202.102.224');
$gq = new GameQ();
$gq->addServers($servers);
$results = $gq->requestData();
function print_results($results) {
foreach ($results as $id => $data) 
```

这就是我试图用来列出当前玩家的内容。

```
$promodplist = $data['promod']['players'];
foreach($promodplist as $k => $v) 
```

我只是想`nick`在每个数组中回显（昵称）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T03:39:52.100

```
$promodplist = $data['promod']['players'];
foreach($promodplist as $k => $v)
    print($v['nick']); 
```

应该做你想做的。[`foreach`](http://us2.php.net/manual/en/control-structures.foreach.php)遍历数组中的键/值对，其中`$k`是元素的键（在您的情况下是从 0 开始的索引）和`$v`值（对您来说是玩家数据数组）。[您可以通过使用其名称作为数组访问器](http://us2.php.net/manual/en/language.types.array.php)中的键来访问其余信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T04:08:16.470

这样的功能怎么样

```
function print_results($results) {

    foreach ($results as $id){
        echo ": Player Info :<br />";
        foreach($id as $key => $val){

            // add this line to only print out the "nick" field
            if ($key == "nick")
            echo "Field: " . $key . " - Value: " . $val . "<br />";
        }
    }
} 
```

此外，格式化您的数组有助于我们了解您正在使用什么；一条长线比以下更难破译：

```
array(27) {
    [0]=> array(6) {
        ["frags"]=> string(1) "0"
        ["ping"]=> string(2) "26"
        ["nick"]=> string(10) "DIVINEBRAH"
        ["gq_name"]=> string(10) "DIVINEBRAH"
        ["gq_score"]=> string(1) "0"
        ["gq_ping"]=> string(2) "26"
    }
    [1]=> array(6) {
        ["frags"]=> string(1) "0"
        ["ping"]=> string(2) "35"
        ["nick"]=> string(7) "><> <><"
        ["gq_name"]=> string(7) "><> <><"
        ["gq_score"]=> string(1) "0"
        ["gq_ping"]=> string(2) "35" 
    }
    [2]=> array(6) {
        ["frags"]=> string(1) "0"
        ["ping"]=> string(2) "42"
        ["nick"]=> string(10) "xXthe0neXx"
        ["gq_name"]=> string(10) "xXthe0neXx"
        ["gq_score"]=> string(1) "0"
        ["gq_ping"]=> string(2) "42" 
    }
    [3]=> array(6) {
        ["frags"]=> string(1) "0"
        ["ping"]=> string(2) "50"
        ["nick"]=> string(5) "GenKY"
        ["gq_name"]=> string(5) "GenKY"
        ["gq_score"]=> string(1) "0"
        ["gq_ping"]=> string(2) "50" 
    }
    [4]=> array(6) {
        ["frags"]=> string(1) "0"
        ["ping"]=> string(2) "63"
        ["nick"]=> string(4) "dupe"
        ["gq_name"]=> string(4) "dupe"
        ["gq_score"]=> string(1) "0"
        ["gq_ping"]=> string(2) "63" 
    }
    [5]=> array(6) {
        ["frags"]=> string(1) "0"
        ["ping"]=> string(2) "72"
        ["nick"]=> string(7) "B2B vcc"
        ["gq_name"]=> string(7) "B2B vcc"
        ["gq_score"]=> string(1) "0"
        ["gq_ping"]=> string(2) "72" 
    }
    [6]=> array(6) {
        ["frags"]=> string(1) "0"
        ["ping"]=> string(2) "82"
        ["nick"]=> string(10) "[dB]tumble"
        ["gq_name"]=> string(10) "[dB]tumble"
        ["gq_score"]=> string(1) "0" 
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T03:53:47.573

这是我用来从多维数组构建数组的基本函数。

```
function db_result_array($result, $key_column = null) { 
    for ($array = array(); $row = mysql_fetch_assoc($result); isset($row[$key_column]) ? $array[$row[$key_column]] = $row : $array[] = $row); 
    return $array; 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T05:01:29.360

你做：

```
$promodplist = $data['promod']['players'];
foreach($promodplist as $k => $v)
var_dump($promodplist); 
```

这意味着您执行相同的 var_dump() 30 次。您不需要代码中的 foreach() ，这样可以：

```
$promodplist = $data['promod']['players'];
var_dump($promodplist); 
```

作为单独的说明，您可以做的另一件事是：

```
$promodplist = $data['promod']['players'];
echo "<pre>";
print_r($promodplist);
echo "</pre>"; 
```

# android - 已发布的应用程序和 Google Play 兼容性

> ID：11822252
> 
> 赞同：0
> 
> 时间：2012-08-06T03:32:08.453
> 
> 标签：android, compatibility, device

我刚刚在 Google Play 上发布了我的第一个应用程序，而我开发的手机被列为不兼容。经过一番研究，我将这些行添加到 AndroidManifest.xml：

```
<uses-feature android:name="android.hardware.telephony" android:required="false" />
<uses-feature android:name="android.hardware.screen.portrait" android:required="false" />
<uses-feature android:name="android.hardware.touchscreen" android:required="false" /> 
```

在应用商店更新 apk 后，我的设备在兼容设备列表中显示为兼容，但在应用的 Google Play 页面上显示为不兼容。它不会让我安装到我的手机上。以下是图片：

![](../Images/069b102791d785acce1c4df4ad1eb362.png)

![](../Images/8cbe97707e26210095f96f8a9f77ca9f.png)

我怎样才能解决这个问题？

这是我的 AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.mypackage"
      android:versionCode="3"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="13" android:targetSdkVersion="13" />

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name="com.mypackage.Activity"
              android:screenOrientation="portrait"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application>
<uses-permission android:name="android.permission.READ_SMS"/>
<uses-permission android:name="android.permission.READ_CONTACTS"/>
<uses-feature android:name="android.hardware.telephony" android:required="false" />
<uses-feature android:name="android.hardware.screen.portrait" android:required="false" />
<uses-feature android:name="android.hardware.touchscreen" android:required="false" />

</manifest>

package: name='com.mypackage' versionCode='3' versionName='1.0'
sdkVersion:'13'
targetSdkVersion:'13'
application-label:'My Package'
application-icon-120:'res/drawable-ldpi/icon.png'
application-icon-160:'res/drawable-mdpi/icon.png'
application-icon-240:'res/drawable-hdpi/icon.png'
application: label='My Package' icon='res/drawable-mdpi/icon.png'
launchable-activity: name='com.mypackage.MyPackage'  label='My Package' icon=''
uses-permission:'android.permission.READ_SMS'
uses-permission:'android.permission.READ_CONTACTS'
uses-feature-not-required:'android.hardware.telephony'
uses-feature-not-required:'android.hardware.screen.portrait'
uses-feature-not-required:'android.hardware.touchscreen'
main
supports-screens: 'small' 'normal' 'large' 'xlarge'
supports-any-density: 'true'
locales: '--_--'
densities: '120' '160' '240' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:34:30.390

您的最低 SDK 版本设置为 13 (Honeycomb MR2)。除非您的 SG2 在 ICS 或更高版本上，否则它将不兼容。

除非您依赖新的 API 功能，否则您可以将最低 SDK 版本降至 8 或 9（froyo/gingerbread）。

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="16" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T18:27:43.810

它现在显示为兼容。我 90% 确定问题出在复制保护上。感谢大家。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-06T11:33:46.453

您可以尝试将 minSDKVersion 设置为 7 或 8

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="13" /> 
```

13相当高。我不确定，但我认为 7 或 8 是 Android 2.1

# r - OpenCPU 安装应用程序

> ID：11822254
> 
> 赞同：1
> 
> 时间：2012-08-06T03:32:17.490
> 
> 标签：r, opencpu

我无法在我的 OpenCPU 服务器上看到应用程序。我 git 克隆了[https://github.com/jeroenooms/opencpu.demo](https://github.com/jeroenooms/opencpu.demo)我有文件/文件夹

```
.settings
inst
man
R
.project
DESCRIPTION
NAMESPACE
README 
```

我把所有这些文件都放在里面`/usr/lib/opencpu/apps/opencpu.demo`

在`/usr/lib/opencpu/apps/`文件夹内，我还看到我有一个`index.json`和一个`apps-readme`

我究竟做错了什么？我没有看到应用程序出现在服务器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T22:05:12.100

谢谢 Jeroen，我必须手动运行它。如果 CRON 作业没有自动运行，我会问另一个堆叠溢出问题。另外，我让它工作。我必须将 go 放入克隆存储库的 inst/opencpu/apps 文件夹，然后将文件夹（admin、nabel、markdown、storefunction）放入应用程序中，然后运行 ​​CRON

# postgresql - 尝试使用 OSX Snow Leopard (10.6.8) 在 Heroku 上启动 psql 时出现分段错误

> ID：11822255
> 
> 赞同：2
> 
> 时间：2012-08-06T03:32:32.853
> 
> 标签：postgresql, heroku

我正在尝试将 Postgresql 与 Heroku 一起使用。[我使用从http://www.enterprisedb.com/products-services-training/pgdownload](http://www.enterprisedb.com/products-services-training/pgdownload)下载的安装程序安装了 Postgres 9.1.4 。然后在我`/etc/profile`的位置添加`psql`到我的`PATH`. 当我尝试将`psql`shell 与 Heroku 一起使用时，我遇到了分段错误，但是当我尝试在本地使用它时，它似乎工作正常：

```
[Sun Aug 05 20:17:47] : which psql
/Library/PostgreSQL/9.1/bin/psql
[Sun Aug 05 20:22:15] : heroku pg:psql
psql (9.1.4)
Segmentation fault
[Sun Aug 05 20:22:21] : psql -U postgres
Password for user postgres: 
psql (9.1.4)
Type "help" for help.

postgres=# \q
[Sun Aug 05 20:22:29] : heroku version
heroku-toolbelt/2.30.2 (universal-darwin10.0) ruby/1.8.7 
```

我确实注意到了，`heroku version`但`ruby/1.8.7`我正在使用`rvm use 1.9.3`. 这个 Ruby 不匹配会是问题吗？如果是这样，我该如何解决？我不确定下一步该怎么做，因为分段错误错误消息非常模糊。这一切都在 Mac OS X 10.6.8 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:29:45.433

我联系了 Heroku 支持，他们建议通过 Homebrew (http://mxcl.github.com/homebrew/) 安装 Postgres。我这样做了，现在我可以访问我的 Heroku 数据库了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T04:20:53.630

我也有这个问题：`psql`在本地工作，但`heroku pg:psql`. 我发现降级到 Postgres 9.1.3（[安装程序仍然可用](http://www.enterprisedb.com/postgresql-913-installers-osx&ls=Crossover&type=Crossover)）解决了它。

看起来该`heroku pg:psql`命令只是`psql`使用适当的命令行参数调用并以某种方式传递密码。我可以在没有这样的`heroku`命令的情况下重现问题：

```
psql -U random_username -h ec2-10-10-10-10.compute-1.amazonaws.com -p 5432 random_dbname
Password for user random_username: 
psql (9.1.4)
Segmentation fault 
```

所以看来问题出在`psql`二进制文件上。我查看了核心转储的堆栈跟踪，看来问题出在 SSL 处理中（Heroku 使用它，但通常不用于与 localhost 的连接）：

```
#0  0x00000001000da622 in SSL_get_current_cipher ()
#1  0x0000000100007415 in printSSLInfo ()
#2  0x00000001000073c6 in connection_warnings ()
#3  0x00000001000141dd in main () 
```

这是有道理的，因为`psql`与 Heroku 的成功连接确实会吐出一行关于 SSL 密码连接的信息：

```
heroku pg:psql --app wattdepot-kukuicup-uhm-staging
psql (9.1.3, server 9.1.4)
SSL connection (cipher: DHE-RSA-AES256-SHA, bits: 256)
Type "help" for help.

random_dbname=> 
```

我没有进一步调查过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T23:14:00.423

我遇到了完全相同的问题。根据 Heroku 的建议，我刚刚从 postgres 9.1.4 更新到 9.1.5，现在“heroku pg:psql”工作正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T16:18:26.763

如前所述，我们绝对只是使用带有参数的 psql 命令，所以我真的不认为 Heroku 方面有什么问题。似乎 psql 中有一个错误显然已经修复，所以我认为更新你的本地 postgres 应该可以解决问题（它似乎已经修复了到目前为止我与之交谈过的每个人的问题。

# php - Joomla 外部链接

> ID：11822262
> 
> 赞同：0
> 
> 时间：2012-08-06T03:33:11.680
> 
> 标签：php, joomla

[这](http://ustudy.kz/vk/widget/test.php)是我的简单 php 页面，其中有 Joomla 文章的链接，但所有链接都已损坏，它返回“找不到文件”。我知道，这些外部链接不起作用，因为它们表示 Joomla(1.5) 的内部页面。我应该如何配置它们以便它们开始工作？

ps：请原谅我糟糕的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T04:11:55.657

您必须将页面的设置设置为公开。你可以通过使用 joomla 选项来做到这一点。然后获取URI尝试。应该管用。

编辑：您也可能必须定义访问级别。按照此[链接作为指南](http://magazine.joomla.org/issues/issue-feb-2012/item/639-Joomla-ACL-Access-Levels?tmpl=component&print=1)。

# css - Wordpress 重写 CSS 规则

> ID：11822263
> 
> 赞同：0
> 
> 时间：2012-08-06T03:33:16.263
> 
> 标签：css, wordpress, query-string, browser-cache

我使用动态生成 css `query_vars`。

现在查询变量的 url 是[http://example.com/index.php?loadcss=mycss](http://example.com/index.php?loadcss=mycss)

我如何将这些 url 重写为[http://example.com/css/mycss.css](http://example.com/css/mycss.css)而不是使用无法缓存的查询字符串，使用我上面写的东西看起来会更好。

我已经阅读过`add_rewrite_tag`，但不知道如何使用它。有人可以指导我如何使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:17:30.640

在 wordpress 的情况下，我只使用 PHP 来生成动态 CSS。这是大多数人使用的方法。例如，请参见[HERE](http://css-tricks.com/css-variables-with-php/)或[HERE](http://davidwalsh.name/css-variables-php-dynamic)或[HERE](http://www.codewalkers.com/c/a/Miscellaneous/Dynamic-CSS-with-PHP/)。

你有很多方法可以做到这一点，其中一些还在代码上显示 style.css 而不是 style.php （实际上它只是关于更改标题或将 php 代码放入 css 中......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T03:51:55.173

您不能使用 str_replace() 吗，因为每个网址都相同？

```
$baseURL = 'http://example.com/index.php?loadcss='
$cssURL = 'http://example.com/css/'

str_replace($baseURL . 'mycss', $cssURL . 'mycss.css', $the_queried_vars); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-06T05:57:09.490

试用[重定向](http://wordpress.org/extend/plugins/redirection/)WordPress 插件

# windows - 从命令行获取 Dropbox url

> ID：11822273
> 
> 赞同：1
> 
> 时间：2012-08-06T03:35:10.593
> 
> 标签：windows, dropbox

我是 Windows 7 用户，我想使用命令行从我的公共保管箱文件夹中访问一个对象。我该怎么做（注意我的命令行技能很弱，所以请温柔一点。这就是我的信息基础：[DROPBOX CITE LINK](http://www.dropboxwiki.com/Using_Dropbox_CLI#PUBURL)

这是我的投递箱的路径以及我的尝试：

```
#the path
C:/Users/trinker/Dropbox/Public/plot.png

#the attempt to retrieve the url of plot.png
CD C:/Users/trinker/Dropbox/Public/
C:/Users/trinker/Dropbox/bin/dropbox.py puburl C:/Users/trinker/Dropbox/Public/plot.png 
```

请注意，我的斜线与您通常在 Windows 机器上看到它们的方式相反，因为我在另一个程序中使用它，该程序需要斜线在这个方向或加倍`\\`

目标是检索 Dropbox 对象的 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T12:27:48.480

我的朋友 Dason 向我指出了一个解决方法。转到您的公共文件夹并从文件中复制链接。这是我的一个：

```
https://dl.dropboxusercontent.com/u/61803503/%20wordcloud.pdf 
```

您自己的投递箱的帐号始终相同。因此，以下表格将允许我共享文档：

```
file.path("https://dl.dropboxusercontent.com/u/61803503", DOCUMENT_NAME_HERE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T12:44:11.233

我不确切知道您在做什么，但如果这是您的保管箱共享的 url，并且您只是想通过命令行访问，您是否尝试将网络驱动器映射到该 URL 以查看它是否有效？

# xcode - 字符串比较只匹配第一次

> ID：11822274
> 
> 赞同：1
> 
> 时间：2012-08-06T03:35:35.847
> 
> 标签：xcode, nsstring

我有一个排序数组，其中包含一系列演讲中所有演讲者的姓名。我已经粘贴了下面的代码，但我的具体问题完全出现在第二个“for”循环中。有多个演示者在 MyClass.speechs 中有多个条目。因此，当我第一次在第二个“for”循环中点击“if”语句时，它的计算结果为真，我看到日志语句“添加了一个演讲……”。然而，第二次它应该评估为真（正如'if'正上方的日志语句所验证的那样），我从来没有看到“添加语音......”行打印到日志中。那么为什么在第一次'item.speaker'和'obj'相同之后我没有输入'if'呢？

```
[speakers sortUsingSelector:@selector(compare:)];
   for (id obj in speakers) { 

     //now create a unique list of speakers
        if ([uniqP containsObject:obj]) {
            NSLog(@"already have this object");
        }
        else {
            [uniqP addObject:obj];

            //now that we've found a new speaker, we need to go through the entire list of speeches and populate
            //them in the correct order.
            self.speechesByPresenter = [[NSMutableArray alloc] init];
            for (int j=0; j<numEntries; j++) {
                SpeechesItem *item = [MyClass.speeches objectAtIndex:j];
                NSLog(@"  %@--%@--%d  (%@)", item.speaker, obj, j, item.title);
                if(item.speaker == obj) {
                    [self.speechesByPresenter addObject:item];
                    NSLog(@"added a speech, %@ now has %d", item.speaker, [self.speechesByPresenter count]);
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:41:26.243

而不是`item.speaker == obj`which 比较指针，您应该使用`[item.speaker isEqualToString:obj]`which 比较字符串的内容。

# android - 如何将应用内购买添加到 Opera 移动商店的应用中

> ID：11822276
> 
> 赞同：3
> 
> 时间：2012-08-06T03:35:49.247
> 
> 标签：android, in-app-purchase, opera, in-app-billing

我试图弄清楚如何将 Opera 的移动商店与我的 Android 应用程序一起使用。几乎没有任何文档。有谁知道应用内购买 API 如何与 Opera 的移动商店通信？有没有这样的功能。Opera 的开发网站不提供任何 API。

或者您会建议我可以使用的第 3 方插件/支付系统吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T21:51:59.053

感谢您的留言。目前我们不提供应用内支付，但这可能会在明年发生变化。

您现在可以做的是集成任何 3-d 方应用内支付解决方案，并将此类应用提交到 Opera Mobile Store。这可能是来自 Boku、Zong、iFree、MoPay 等提供商的 SMS 付款，也可能是通过 PayPal、Google Checkout 等进行的应用内付款。

致以最诚挚的问候， Victor Shaburov - apps.opera.com

# android - EditText 不会自动启动

> ID：11822281
> 
> 赞同：1
> 
> 时间：2012-08-06T03:36:26.780
> 
> 标签：android, keyboard, android-edittext

在我的应用程序中，我有一个`EditText`. 如何让它不自动启动？比如：一旦他们打开活动，它会自动将鼠标设置为`EditText`并且键盘被打开以便他们输入......</p>

当他们点击它时，无论如何我可以打开它（键盘显示并且用户可以输入）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:49:09.513

好的，所以从你的问题中我发现你的 EditText 在开始活动时得到了关注。您可以使用以下命令禁用焦点以抑制键盘。

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

访问此[关闭/隐藏 Android 软键盘](https://stackoverflow.com/q/1109022/996493)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:15:12.387

路西法的答案必须有效。但是当我遇到同样的问题时，该解决方案不起作用，有人建议我这样做。

添加一个假布局作为父布局中的第一个元素并使其具有焦点。

像这样：

```
<ParentLayout
     .....
     ......>
    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:background="@android:color/transparent"
        android:focusable="true"
        android:focusableInTouchMode="true" >
    </LinearLayout>

     ......
     ......
     ......

</ParentLayout> 
```

这绝对有效，但最好的解决方案是：

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

# c# - 在 DataGridView 中，一列有一个文件名，我希望每一行都有一个按钮，以允许用户输入/更改文件名和路径

> ID：11822283
> 
> 赞同：0
> 
> 时间：2012-08-06T03:36:38.170
> 
> 标签：c#, datagridview, datagridviewcolumn

`DataGridView`绑定到`DataSet`一个. 假设此示例只有一列。1 列是文件名。对于每一行，我需要打开`FileOpenDialog`以更改或更新文件名列。如何添加按钮？它必须在单独的列中还是可以在同一列中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:40:22.710

添加另一个未绑定的列并用于`DataItemTemplate`为每一行添加按钮。在`Button_Click`事件中，打开`FileOpenDialog`并且在打开时您可以传递同一行第 0 列中的文件名的值。

# html - DIV的定位

> ID：11822285
> 
> 赞同：1
> 
> 时间：2012-08-06T03:36:51.763
> 
> 标签：html

我正在尝试将普通的网络播放器放入 wordpress 帖子中。我的网站是自托管的。问题在于 DIV 的定位（实际上不是 wordpress 的问题）。

这是我正在处理的页面：http: [//grayradio.com/mishkin-hits/](http://grayradio.com/mishkin-hits/)

音乐播放器应该出现在帖子区域，但它一直在页脚下方。

我在帖子的主容器中插入了所有必要的代码，但由于某种原因，div 类“ttw-music-player”超出了这个容器 div。

我通过将段落文本放在帖子的主容器中进行测试，同时保持 div 类“ttw-music-player”。段落文本正确显示，但播放器 div 消失了。

我可以更改我的代码和播放器的代码，但我不知道从哪里开始。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:37:06.107

我使用“body”标签将播放器定位在其中一个 JS 文件中。当我将其更改为特定的 DIV 时，它起作用了。不确定它是否是特定于 wordpress 的东西！

# sql - sql用多个条件更新多个列

> ID：11822286
> 
> 赞同：0
> 
> 时间：2012-08-06T03:36:55.290
> 
> 标签：sql, conditional-statements

我想从另一个表中更新 5 列。如果条件一为真且条件二为真，则列的 2 将从条件更新，其他 3 也将更新。有没有办法在一个声明中做到这一点？

```
update tableNew
set 
column1 = t1.column1
column2 = t1.column2

column3 = t1.column3
column4 = t1.column4
column5 = t1.column5
where t1.column10 in ('value1','value2') 

from tableOld t1
where t1.column8 is null 
```

我希望你能从这个例子中理解我需要什么，如果不是，我可以尝试提供更多！

# shell - Power shell 根据顺序循环子文件夹

> ID：11822287
> 
> 赞同：0
> 
> 时间：2012-08-06T03:37:05.593
> 
> 标签：shell, powershell

我想使用 power shell 循环所有子文件夹并运行其中的所有文件。但是，如果我的根目录包含 3 个子文件夹，我想按照以下顺序循环并列出它：子文件夹 C 、子文件夹 B 和子文件夹 A 以便文件执行将按照顺序运行（ C-->B-- >一）。

下面是我的编码。

```
Get-ChildItem -path "C:\Root\subfolders\" -recurse -Filter *.sql | foreach-object -process { $_.FullName }|
   ForEach-Object {
        sqlcmd -i $_
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T07:46:33.747

试一试，获取 C:\Root\subfolders 的所有文件夹，找到的 foreach 文件夹递归获取其文件：

```
Get-ChildItem C:\Root\subfolders | 
Where-Object {$_.PSIsContainer} | 
Foreach-Object  {Get-ChildItem $_.FullName -Recurse -Filter *.sql | Foreach-Object {sqlcmd -i $_.FullName} } 
```

# javascript - 如何检查星星是否被点击？（Jquery 星级评分插件）

> ID：11822293
> 
> 赞同：0
> 
> 时间：2012-08-06T03:37:24.270
> 
> 标签：javascript, jquery, rating-system

我正在使用这个插件[http://www.fyneworks.com/jquery/star-rating/#tab-Testing](http://www.fyneworks.com/jquery/star-rating/#tab-Testing)。我试图制作一个客户端验证系统来确定是否点击了星星。我想知道你怎么能做到这一点。

在我的 javascript 文件中，我有

```
 $('#star1').click(function (){
        document.getElementById('star1').checked=true;
        return false;
    }); 
```

我正在使用单选按钮类型的星星并有这样的 html 代码，

```
 <input id="star1" name="star1" type="radio" class="star" value="1"/>
    <input id="star1" name="star1" type="radio" class="star" value="2"/>
    <input id="star1" name="star1" type="radio" class="star" value="3"/>
    <input id="star1" name="star1" type="radio" class="star" value="4"/>
    <input id="star1" name="star1" type="radio" class="star" value="5"/> 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:40:20.977

**工作演示** [http://jsfiddle.net/2xTwb/](http://jsfiddle.net/2xTwb/)

希望它适合你的事业`:)`

**脚本**

```
 <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>

      <script type='text/javascript' src="http://jquery-star-rating-plugin.googlecode.com/svn/trunk/jquery.rating.js"></script>

      <link rel="stylesheet" type="text/css" href="http://jquery-star-rating-plugin.googlecode.com/svn/trunk/jquery.rating.css"> 
```

**代码**

```
$(".voting-star[value='3']").attr("checked", true);

$('.voting-star').rating({
    callback: function(value, link) {
        alert(value);
    }
});
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T03:40:12.660

您可以使用[.prop](http://api.jquery.com/prop/)方法来检查`checked`属性。

```
$('.star').click(function (){
   if ($(this).prop('checked')) {
     //...
   }
   return false;
}); 
```

# php - 是 ini_set("memory_limit", "512M"); 太多了？

> ID：11822294
> 
> 赞同：0
> 
> 时间：2012-08-06T03:37:29.093
> 
> 标签：php

我正在使用 2 个 php 库来提供文件 -`unzip`和[`dUnzip2`](http://www.phpclasses.org/package/2495-PHP-Pack-and-unpack-files-packed-in-ZIP-archives.html)

zip zip.lib
[http://www.zend.com/codex.php?id=470&single=1](http://www.zend.com/codex.php?id=470&single=1)

它们在 10MB 以下的文件上工作正常，但对于超过 10MB 的文件，我必须将内存限制设置为 256。对于超过 25MB 的文件，我将其设置为 512。看起来有点高......是吗？

我在一个专用服务器上——4 个 CPU 和 16GB RAM——但我们也有很多流量和下载，所以我有点想知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T04:56:22.530

也许您正在使用 php 将整个文件加载到内存中，然后再将它们提供给用户？我使用了在[http://www.php.net/manual/en/function.readfile.php](http://www.php.net/manual/en/function.readfile.php)（评论部分）中找到的一个函数，它部分地为文件提供服务，从而保持低内存。从该帖子中复制（因为我的版本已更改）：

```
<?php 
    function readfile_chunked ($filename,$type='array') { 
      $chunk_array=array(); 
      $chunksize = 1*(1024*1024); // how many bytes per chunk 
      $buffer = ''; 
      $handle = fopen($filename, 'rb'); 
      if ($handle === false) { 
       return false; 
      } 
      while (!feof($handle)) { 
          switch($type) 
          { 
              case'array': 
              // Returns Lines Array like file() 
              $lines[] = fgets($handle, $chunksize); 
              break; 
              case'string': 
              // Returns Lines String like file_get_contents() 
              $lines = fread($handle, $chunksize); 
              break; 
          } 
      } 
       fclose($handle); 
       return $lines; 
    } 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T03:55:03.593

> 我的脚本所做的是在用户下载之前许可文件

通常，您应该避免使用任何消耗大量内存或 CPU 时间的 Web 脚本。理想情况下，您会通过分离的进程将任务转换为运行。设置上限本身并不坏，但它使检测编写不佳的脚本变得更加困难，并且更容易对复杂页面的高需求损害即使是简单页面的性能。

例如，使用[gearman](http://pecl.php.net/package/gearman) ，您可以轻松设置一些在 CLI 上运行的许可证工作脚本，并通过 gearman API 与它们通信。

这样，您的 Web 服务器可以保持空闲来执行低 CPU 和内存的任务，并且您可以轻松地保证您永远不会同时运行超过 X 个许可任务（其中 X 取决于您允许运行的工作脚本的数量）。

您的前端脚本可能只是一个轮询服务器的 AJAX 小部件，检查任务是否已完成。

# android - 带有 SimplecursorAdapter 和 ListView 的 ArrayIndexOutOfBoundsException

> ID：11822296
> 
> 赞同：0
> 
> 时间：2012-08-06T03:38:09.530
> 
> 标签：android, listview, simplecursoradapter, indexoutofboundsexception

我不知道如何解决这个问题，请帮助。我唯一能说的是，如果我注释掉`setListAdapter(cursorAdapter);`，代码会运行，但我的`ListView`. 可能有用的代码的任何其他部分让我知道。谢谢您的帮助。

```
08-06 03:21:50.435: E/AndroidRuntime(489): Uncaught handler: thread main exiting due to uncaught exception
08-06 03:21:50.565: E/AndroidRuntime(489): java.lang.ArrayIndexOutOfBoundsException
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.widget.SimpleCursorAdapter.bindView(SimpleCursorAdapter.java:157)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.widget.CursorAdapter.getView(CursorAdapter.java:186)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.widget.AbsListView.obtainView(AbsListView.java:1274)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1147)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.widget.ListView.onMeasure(ListView.java:1060)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.view.View.measure(View.java:7964)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3023)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:888)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:350)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:278)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.view.View.measure(View.java:7964)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3023)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.view.View.measure(View.java:7964)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:464)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:278)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.view.View.measure(View.java:7964)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3023)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.view.View.measure(View.java:7964)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.view.ViewRoot.performTraversals(ViewRoot.java:763)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1633)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.os.Looper.loop(Looper.java:123)
08-06 03:21:50.565: E/AndroidRuntime(489):    at android.app.ActivityThread.main(ActivityThread.java:4363)
08-06 03:21:50.565: E/AndroidRuntime(489):    at java.lang.reflect.Method.invokeNative(Native Method)
08-06 03:21:50.565: E/AndroidRuntime(489):    at java.lang.reflect.Method.invoke(Method.java:521)
08-06 03:21:50.565: E/AndroidRuntime(489):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
08-06 03:21:50.565: E/AndroidRuntime(489):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
08-06 03:21:50.565: E/AndroidRuntime(489):    at dalvik.system.NativeStart.main(Native Method) 
```

我的活动：

```
public class SearchActivity extends ListActivity {
final String APP_TAG = "RouteTracker";

boolean APP_DEBUG = true;
int searchType;

DbAdapter dbAdapter;

Context context = this;

@Override
public void onResume(){
    dbAdapter.open();
    super.onResume();
}

@Override
public void onPause(){
    dbAdapter.close();
    super.onPause();
}
@Override
public void onCreate(Bundle savedInstanceBundle){
    super.onCreate(savedInstanceBundle);

    if (APP_DEBUG) {Log.d(APP_TAG, "Inside onCreate for SearchActivity");}

    dbAdapter = new DbAdapter(this);

    setContentView(R.layout.search_activity);

    Bundle searchActivityBundle = getIntent().getExtras();
    searchType = searchActivityBundle.getInt("SearchType");

    TextView titleLabel = (TextView) findViewById(R.id.search_activity_title_label);
    titleLabel.setText(getString(R.string.search_activity_default_title_label));

    final EditText search_criteria_edittext = (EditText) findViewById(R.id.search_activity_search_criteria_edittext);

    Button search_button = (Button) findViewById(R.id.search_activity_search_button);
    search_button.setText(getString(R.string.search_activity_search_button));

    //ListView searchResultsList; // = (ListView) findViewById(android.R.id.list);
    //searchResultsList = getListView();

    switch (searchType) {
    case RouteTrackerGlobal.SEARCH_NAME:
        search_criteria_edittext.setHint(getString(R.string.search_activity_textview_company_name_hint));
        break;
    case RouteTrackerGlobal.SEARCH_STREET:
        search_criteria_edittext.setHint(getString(R.string.search_activity_textview_street_hint));
        break;
    case RouteTrackerGlobal.SEARCH_CITY:
        search_criteria_edittext.setHint(getString(R.string.search_activity_textview_city_hint));
        break;
    case RouteTrackerGlobal.SEARCH_STATE:
        search_criteria_edittext.setHint(getString(R.string.search_activity_textview_state_hint));
        break;
    case RouteTrackerGlobal.SEARCH_ZIP:
        search_criteria_edittext.setHint(getString(R.string.search_activity_textview_zip_hint));
        break;
    }

    search_button.setOnClickListener(new OnClickListener(){

        public void onClick(View v) {
            // TODO Auto-generated method stub
            String searchCriteria = search_criteria_edittext.getText().toString();
            if (searchCriteria.trim().equals("")) {
                Toast.makeText(getBaseContext(), "No data entered, try again",Toast.LENGTH_SHORT).show();
                return;
            }

            String[] columns = new String[] {};
            int[] to = new int[] {R.id.search_activity_details_search_results, R.id.search_activity_details_company_name};

            Cursor dataCursor;

            switch (searchType) {
            case RouteTrackerGlobal.SEARCH_NAME:
                dataCursor = dbAdapter.search(searchType, searchCriteria); 
                columns= new String[] {"CompanyName"};
                break;
            case RouteTrackerGlobal.SEARCH_STREET:
                dataCursor = dbAdapter.search(searchType, searchCriteria);
                columns = new String[] {"AddressStreet","CompanyName"};
                break;
            case RouteTrackerGlobal.SEARCH_CITY:
                dataCursor = dbAdapter.search(searchType, searchCriteria);
                columns = new String[] {"AddressCity", "CompanyName"};
                break;
            case RouteTrackerGlobal.SEARCH_STATE:
                dataCursor = dbAdapter.search(searchType, searchCriteria);
                columns = new String[] {"AddressState", "CompanyName"};
                break;
            case RouteTrackerGlobal.SEARCH_ZIP:
                dataCursor = dbAdapter.search(searchType, searchCriteria);
                columns = new String[] {"AddressZip", "CompanyName"};
                break;
            default:
                dataCursor = dbAdapter.search(RouteTrackerGlobal.SEARCH_NAME, searchCriteria);
                columns = new String[] {"", "CompanyName"};
                break;
            }
            startManagingCursor(dataCursor);

            if (dataCursor == null) {
                Toast.makeText(getBaseContext(), "Something happened that failed", Toast.LENGTH_SHORT).show();
                setListAdapter(null);
                return;
            }
            if (dataCursor.getCount() == 0) {
                Toast.makeText(getBaseContext(), getString(R.string.search_activity_no_results), Toast.LENGTH_SHORT).show();
                setListAdapter(null);
                return;
            }
            SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(context, R.layout.search_activity_details, dataCursor, columns, to);
            setListAdapter(cursorAdapter);

            //Toast.makeText(getBaseContext(), dataCursor.getColumnName(1), Toast.LENGTH_SHORT).show();
        }}); 
```

我加载了 android 2.1 源代码并且能够找到它失败的地方，但我仍然不明白它。

它在 bindView 内的 SimpleCursorAdapter 类中失败。下面是 bindView，它在 **String text = cursor.getString(from[i]);中失败了**

```
public void bindView(View view, Context context, Cursor cursor) {
    final View[] holder = mHolders.get(view);
    final ViewBinder binder = mViewBinder;
    final int count = mTo.length;
    final int[] from = mFrom;

    for (int i = 0; i < count; i++) {
        final View v = holder[i];
        if (v != null) {
            boolean bound = false;
            if (binder != null) {
                bound = binder.setViewValue(v, cursor, from[i]);
            }

            if (!bound) {
                **String text = cursor.getString(from[i]);**
                if (text == null) {
                    text = "";
                }

                if (v instanceof TextView) {
                    setViewText((TextView) v, text);
                } else if (v instanceof ImageView) {
                    setViewImage((ImageView) v, text);
                } else {
                    throw new IllegalStateException(v.getClass().getName() + " is not a " +
                            " view that can be bounds by this SimpleCursorAdapter");
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:33:16.853

在我看来，您正在使用变量 i 来计算 mTo 数组的长度。您确定 mTo 的大小不大于 from[] 或 holder[] 的大小吗？因为如果你想在 i 处访问所有这些数组，你最好确保它们都具有相同数量的元素，否则你只是在自找麻烦。

# javascript - 如何在拉斐尔中找到元素的位置？

> ID：11822298
> 
> 赞同：2
> 
> 时间：2012-08-06T03:38:36.593
> 
> 标签：javascript, raphael

我正在使用 raphael 为球设置动画，并且需要在停止动画后找出位置，这是我的代码：

```
ball.stop();
console.log(ball.attrs.transform);
// t399.6625490203161,180r180 
```

如何将此字符串转换为球的 x,y 位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T07:42:09.270

您可以[`Element.getBBox`](http://raphaeljs.com/reference.html#Element.getBBox)为此使用：

```
var x = ball.getBBox().x;
var y = ball.getBBox().y;
var r = ball.getBBox().height / 2;
console.log(x, y, r); 
```

* * *

*但请注意*：

坐标 ( `element.getBBox().x`, `element.getBBox().y`) 将指向边界框的左上角。
如果球是一个圆，则该点甚至不会包含在圆中，使用中心的坐标可能更明智。

给定边界框`bbox`，那些将是

```
var x = bbox.x + bbox.width / 2,
    y = bbox.y + bbox.height / 2; 
```

# java - ColdFusion/Java - “找不到构建方法”

> ID：11822301
> 
> 赞同：0
> 
> 时间：2012-08-06T03:39:07.773
> 
> 标签：java, coldfusion

我们正在使用一些 org.apache 类作为实现 Web 服务的 WS 安全性的一部分。

```
variables.paths = arrayNew(1);
variables.paths[1] = getDirectoryFromPath(getCurrentTemplatePath()) & "lib\wss4j-1.5.8.jar";
variables.paths[2] = getDirectoryFromPath(getCurrentTemplatePath()) & "lib\xmlsec-1.4.2.jar";
variables.loader = createObject("component","lib.javaloader.JavaLoader").init(loadPaths=variables.paths,loadColdFusionClassPath=true);
variables.WSConstantsObj = loader.create("org.apache.ws.security.WSConstants");
variables.messageClass = loader.create("org.apache.ws.security.message.WSSecUsernameToken");
variables.secHeaderClass = loader.create("org.apache.ws.security.message.WSSecHeader"); 
```

以下代码：

```
<cfset var msg = getMessage()> 
```

产生：

![在此处输入图像描述](../Images/3f0363d6d903f8128b2f6e4d8291cb47.png)

以下代码：

```
<cfset var secHeader = getSecHeader()> 
```

产生：

![在此处输入图像描述](../Images/26f2827a44002d15381d2ebe5b1007f7.png)

以下代码：

```
<cfset var env = soapEnv.getDocumentElement()> 
```

产生：

![在此处输入图像描述](../Images/b8b4cebe4e0cb1ebdab3f478e1bf5eee.png)

```
env.getOwnerDocument() 
```

产生一个巨大的结构（太大而不能包括在这里），你可以[在这里查看](http://www.china-buy.com/tga/index.cfm?viewDump)。

但是，以下代码：

```
<cfset e = msg.build(env.GetOwnerDocument(),secHeader)> 
```

抛出错误：

```
 The build method was not found.
Either there are no methods with the specified method name and argument types or the build method is overloaded with argument types that ColdFusion cannot decipher reliably. ColdFusion found 0 methods that match the provided arguments. If this is a Java object and you verified that the method exists, use the javacast function to reduce ambiguity. 
```

但是 Build() 方法确实存在，根据第一个屏幕截图中的黄色突出显示。

错误消息谈到“...使用 javacast 函数来减少歧义”。如果这是问题所在，我将如何应用此解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:14:13.753

不是“build()”不存在，而是你的签名不正确。build 方法的 2 个参数是：

```
env.GetOwnerDocument(),secHeader 
```

我们知道 secHeader 属于该类

```
org.apache.ws.security.message.WSSecHeader 
```

因为您的 cfdump 表明了很多。

这可能意味着“env.GetOwnerDocument”没有返回类的对象

```
org.w3c.dom.Document 
```

它可能会返回错误或原语或其他类。实例化 envGetOwnerDocumet() 并将其转储并检查类。我认为它搞砸了方法签名。无论如何，这是我最好的猜测。

# java - 如何使用 JPA 和 Hibernate 连接两个不相关的实体

> ID：11822302
> 
> 赞同：18
> 
> 时间：2012-08-06T03:39:14.627
> 
> 标签：java, hibernate, jpa, join, entity

我有两张表 - 一张包含地址，另一张包含照片。它们之间唯一的共同字段是 PersonID。这些被映射到两个 POJO 类地址和照片。我能够通过创建条件和对字段添加限制来获取这些表中的详细信息。我们应该如何在两个表上编写连接。是否可以将结果作为两个对象 - 地址和照片。

我想做一个左连接，这样我也可以得到没有照片的人的记录。我已经读过这只能使用 hql 才能实现，但这也可以使用标准来完成吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-06T07:40:30.050

您可以轻松编写 HQL 查询，该查询将使用 Theta Join 将结果作为两个对象返回（如 Adrian 所述）。这是一个例子：

```
String queryText = "select address, photo from Address address, Photo photo " 
                 + " where address.personID=photo.personId";
List<Object[]> rows = session.createQuery(queryText).list();

for (Object[] row: rows) {
    System.out.println(" ------- ");
    System.out.println("Address object: " + row[0]);
    System.out.println("Photo object: " + row[1]);
} 
```

如您所见，查询返回代表每个提取行的 Object[] 数组列表。该数组的第一个元素将包含一个对象和第二个元素 - 另一个。

**编辑：**

如果是左连接，我认为您需要使用本机 SQL 查询（而不是 HQL 查询）。在这里你可以如何做到这一点：

```
String queryText = "select address.*, photo.* from ADDRESS address 
                    left join PHOTO photo on (address.person_id=photo.person_id)";

List<Object[]> rows = sess.createSQLQuery(queryText)
                          .addEntity("address", Address.class)
                          .addEntity("photo", Photo.class)
                          .list(); 
```

这应该适用于您的情况。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-04-07T14:33:45.417

基本上，您有两种选择：

1.  从 Hibernate 5.1 开始，您可以对不相关的实体使用[临时连接](http://in.relation.to/2016/02/10/hibernate-orm-510-final-release/)。

    ```
     Tuple postViewCount = entityManager.createQuery(
         "select p as post, count(pv) as page_views " +
         "from Post p " +
         "left join PageView pv on p.slug = pv.slug " +
         "where p.title = :title " +
         "group by p", Tuple.class)
     .setParameter("title", "High-Performance Java Persistence")
     .getSingleResult(); 
    ```

2.  在 Hibernate 5.1 之前，您只能使用 theta 样式的连接。但是，theta 样式的连接等同于等值连接，因此您只能模拟 INNER JOIN 而不是 OUTER JOIN。

    ```
     List<Tuple> postViewCount = entityManager.createQuery(
         "select p as post, count(pv) as page_views " +
         "from Post p, PageView pv " +
         "where p.title = :title and " +
         "      ( p.slug = pv.slug ) " +
         "group by p", Tuple.class)
     .setParameter("title", "Presentations")
     .getResultList(); 
    ```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-04-06T14:50:09.943

Hibernate 团队终于在 12 年后[实现了这样的功能](https://hibernate.atlassian.net/browse/HHH-16)

从[休眠文档](https://docs.jboss.org/hibernate/orm/5.1/userguide/html_single/Hibernate_User_Guide.html#hql-explicit-join)：

FROM 子句还可以包含使用 join 关键字的显式关系连接。这些连接可以是内部或左外部样式连接。

```
List<Person> persons = entityManager.createQuery(
    "select distinct pr " +
    "from Person pr " +
    "join pr.phones ph " +
    "where ph.type = :phoneType", Person.class )
.setParameter( "phoneType", PhoneType.MOBILE )
.getResultList();

List<Person> persons = entityManager.createQuery(
    "select distinct pr " +
    "from Person pr " +
    "left join pr.phones ph " +
    "where ph is null " +
    "   or ph.type = :phoneType", Person.class )
.setParameter( "phoneType", PhoneType.LAND_LINE )
.getResultList(); 
```

或者您可以使用`WITH`和`ON`关键字。对那些的评论

> 重要的区别在于，在生成的 SQL 中，WITH/ON 子句的条件是生成 SQL 中 ON 子句的一部分，这与本节中的其他查询相反，其中 HQL/JPQL 条件是 WHERE 的一部分生成的 SQL 中的子句。

例子

```
List<Object[]> personsAndPhones = session.createQuery(
    "select pr.name, ph.number " +
    "from Person pr " +
    "left join pr.phones ph with ph.type = :phoneType " )
.setParameter( "phoneType", PhoneType.LAND_LINE )
.list(); 
```

我目前渴望尝试新功能。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-27T06:59:24.560

在 Hibernate 5.1 中可以连接两个不相关的实体。

例如：

```
select objA from ObjectA objA   
JOIN ObjectB objB on objB.variable = objA.variable    
where objA.id = 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T04:13:00.480

你正在寻找的是

1.  高品质
2.  加入尚未建模为关系的字段
3.  左连接

***（在第一次提出问题并给出了这个答案期间）*** Hibernate 支持 Theta Join，它允许您执行 1 和 2。但是，只有内部连接可用于 theta 连接样式。

就个人而言，我建议您对适当的关系进行建模，因此您只需要 HQL 中很好支持的 1 和 3。

（另一个答案实际上提供了提供此类功能的新 Hibernate 功能的更新，您可以简单地参考）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T05:07:34.873

最好有一个包含您想要加入的课程的课程，以便将它们放在一起。

但是，如果您只是出于某些偶然目的而加入这些表，则可以使用条件并手动从每个表中加载数据并将它们放在一起。（是的，如果地址和照片有两个单独的类和表，您可以分别拥有这些表的数据）

# java - 如何在 ListActivity 之后更改 ImageView？

> ID：11822313
> 
> 赞同：0
> 
> 时间：2012-08-06T03:40:49.337
> 
> 标签：java, android, imageview, listactivity

这个想法是去一个 ListActivity，点击一个项目，如果你点击项目 X，它会显示一个特定的图像。

那是我的安卓代码。

```
package vds.cmc;
public class Dae extends ListActivity {
static final String bigfoot[] = {"Boy", "Girl"};

ImageView iv;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setListAdapter(new PeopleAdapter(this, bigfoot));
    iv = (ImageView) findViewById(R.id.ivID);
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    String qlo = bigfoot[position];
    try {
        if (qlo == "Girl") {
            setContentView(R.layout.ppl);
            iv.setImageResource(R.drawable.cw);
        }
        else {
            setContentView(R.layout.ppl);
            iv.setImageResource(R.drawable.no);
        }
    }
    catch (Exception e) {
        e.printStackTrace();
    }
}

} 
```

我该怎么做？或者我该如何解决？

谢谢，我在这方面很新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T05:22:01.987

产生一个新的活动来查看图像。

```
 Intent intent = new Intent(this, ImageViewerActivity.class);
    intent.putExtra(EXTRA_IMAGE_ID, R.drawable.boy); //could also pass the resource
    startActivity(intent); 
```

进而

```
public class ImageViewerActivity extends Activity {
    private static final String EXTRA_IMAGE_ID = "ImageViewerActivity.EXTRA_IMAGE_ID";
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Bundle extras = getIntent().getExtras();
    if (extras == null) {
        return;
    }

        Resource resId = extras.getInt(EXTRA_IMAGE_ID);
        mImageView.setImageDrawable(resId);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:01:07.877

您已经扩展`ListActivity`了，因此这意味着该活动只有一个 ListView，仅此而已。

您可以执行以下任何操作：

1.  创建一个将显示图像的新活动。

2.  使用片段，一个显示 ListView 一个显示图像，并在它们之间切换。

3.  使用 setContentView 两次，一次在选择之前（显示 ListView），一次在选择之后（显示图像）。

4.  使用不同的布局，您可以在 ListView 和 ImageView 之间切换（通过可见性或通过使用 ViewSwitcher）。

我敢肯定还有其他方法。

# php - 在单个属性中插入多个值

> ID：11822321
> 
> 赞同：1
> 
> 时间：2012-08-06T03:42:02.473
> 
> 标签：php, mysql, arrays, loops

我在一个数据库中有两个表，

```
  tbl_language：tbl_users
  lang_id lang_name user_id user_name user_lang
  1 英语                                 
  2 西班牙语                                 
  3 德语
  4 葡萄牙语

```

我有 PHP 代码可以从 tbl_lang 中选择语言，现在我可以在表单中进行多项选择，用户可以选择多种语言。在数据库中插入值时，我想将多个语言值存储在一个列/属性中。其中 user_lang 属性将仅存储 tbl_language 的 lang_ids，以逗号 (,) 分隔。

喜欢

```
  tbl_users：
  user_id 用户名 user_lang
  1 ABC 1,2
  2 XYZ 1,4

```

如何使用 PHP 和 MySQL 实现这一点？

我在这里有示例代码：

```
<?php

$user_name = $_POST['user_name'];
$user_lang = $_POST['user_lang']; // user_lang as array from multiple select
$qry = ""; // I need help with this query 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T04:00:30.233

根据您的设置，考虑到这`user_id`是一个自动增量 PK ：

```
$user_name = mysql_real_escape_string($_POST['user_name']);
$user_lang = mysql_real_escape_string(implode(',', $_POST['user_lang']);
$sql = "INSERT INTO tbl_users (`user_name`, `user_lang`) VALUES ('{$user_name}', '{$user_lang}'); 
```

但是，正如其他人所提到的，您可能应该寻找^(第三)级表：

```
tbl_users_lang
user_id    lang_id 
```

并插入喜欢（例如，没有错误处理，只是一个建议）

```
$user_name = mysql_real_escape_string($_POST['user_name']);
$sql = "INSERT INTO tbl_users (`user_name`) VALUES ('{$user_name}');"
mysql_query($sql);

$user_id = mysql_insert_id();
foreach ($user_lang as $lang) {
   $lang = mysql_real_escape_string($lang);
   $sql = "INSERT INTO tbl_users_lang (`user_id`, `lang_id`) VALUES ({$user_id}, '{$lang}');"
   mysql_query($sql);       
} 
```

### ** 编辑 **

作为奖励，使用此查询，您可以为任何给定用户的语言列表获取逗号分隔的行。想你可能会感兴趣：

```
SELECT DISTINCT u.user_id, u.user_name, GROUP_CONCAT(l.lang_name) 
  FROM `tbl_users` as u
  LEFT JOIN `tbl_users_lang` as ul ON u.user_id = ul.user_id 
  LEFT JOIN `tbl_language` as l on ul.lang_id = l.lang_id
  -- add WHERE clause here to filter (ex : WHERE u.user_name LIKE 'John%') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T04:01:29.970

这就是你想要的：

文件 view.html

```
<form method="POST" action="test.php">

    <label>Select langs: </label>
            <select name="languages[]" multiple="yes" size="5">

                <!--OR PUT lang id's instead of "en, fr, de" -->
                <option value="en">English</option>         <option value="fr">French</option>      <option value="de">Deutsch</option>

    </select>

    <button type="submit">Sub the form</button>

</form> 
```

文件：test.php

```
<?php

 // check if form submitted if so do 
 if ( !empty($_POST) ){

    //$_POST['languages'] is an array itself
    $langs = implode(', ', $_POST['languages']);
    //$langs you want to insert into the table:
    print $langs;

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T16:46:12.347

首先，是的，官方的答案是不将多个值放入一个字段、电子表格单元格或数组元素中。但是，当您需要：

1.  要使用的字段类型是整数或大整数
2.  使用素数的代码值
    *   3 == 英语
    *   5 == 法语
    *   7 == 西班牙语
    *   11 == 意大利语
3.  将所有适用于该领域的产品存储起来。
    *   21 == 英语和西班牙语
    *   385 == 法语、西班牙语和意大利语
4.  使用模函数确定字段中的值

    ```
    if ( field % 3 == 0 ) {  english() ;}
    if ! (field % 5) { french() ;} 
    ```

5.  同一个值可以出现多次
    *   9 == 英语，英语

我首先使用这种技术来存储尺寸。

*   3 == 时间
*   5 == 长度
*   7 == 质量
*   11 == 收费
*   13 == 温度
*   17 == 摩尔

例如，第一力矩杠杆臂的尺寸值为 35 == 质量 * 长度。为了将分数维数存储在整数中，我将分数维数乘以所有分数的乘积并在处理中进行处理。

*   255255 == 3*5*7*11*13*17
*   力 == 质量 * 长度 / (秒^2)
*   力 == ( 7 * 5 / ( 3 * 3 ) ) * 255255 * 255255
*   力 == 253381002875

请不要要求提取小数维度的代码。这一切都是 40 年前的 APL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T04:06:38.060

就像上面建议的 Marc B 一样，我不会在同一列中存储多个值 - 这是不好的做法。您可以在第二个表中为每种语言保存一行，并且仍然可以使用`group_concat`以下方法获得所需的结果：

```
select t2.user_id, t2.user_name, 
group_concat(t1.lang_name separator ', ') as language
from tbl_users, tbl_language
where t1.lang_id = t2.user_lang 
```

[**你可以在这里**](http://sqlfiddle.com/#!2/d6166/1)看到一个例子[](http://sqlfiddle.com/#!2/d6166/1)

# android - 将 SQLite 数据库中的数据显示到微调器中的问题 [Android]

> ID：11822323
> 
> 赞同：0
> 
> 时间：2012-08-06T03:42:25.337
> 
> 标签：android, database, spinner, sqlite

我需要有关如何从 SQLite 数据库中检索数据并将其放入微调器的帮助。另外，我无法打开我的 android 应用程序，并且 LogCat 显示“没有这样的列：名称”。我什至检查了我的 DBAdapter 类和非 DBAdapter 类。

我有两个 DBAdapter 类（InfoDBAdapter.java 和 BuddiesDBAdapter.java）都链接到我的 PersonalInfo.java 类。

下面是从数据库中检索数据并放入 spinner(PersonalInfo.class) 的代码。

```
InfoDBAdapter infoDB = new InfoDBAdapter(this);

//BuddiesDBAdapter buddyDB = new BuddiesDBAdapter(this);

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
setContentView(R.layout.info);

BuddiesDBAdapter buddyDB = new BuddiesDBAdapter(this);

buddyDB.open();
Cursor c = buddyDB.getAllContacts();

//Create an array to specify which fields want to display
    String[] from = new String[] {"name"};

    //Create an array of the display item want to bind our data to
    int[] to = new int[] {R.id.fName};

    nameSpinner = (Spinner) findViewById(R.id.nameSpinner);

    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, c, from, to);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    nameSpinner.setAdapter(adapter);

    buddyDB.close(); 
```

这些是将信息插入数据库的插入代码。

```
btnSave = (Button) findViewById(R.id.btnSave);
        btnSave.setOnClickListener(new View.OnClickListener()
            {

                @Override
                public void onClick(View v)
                {
                    infoDB.open();
                    long id;

                    Spinner nameSpinner = (Spinner) findViewById(R.id.nameSpinner);
                    String NameValue = nameSpinner.getSelectedItem().toString();

                    EditText txtDate = (EditText) findViewById(R.id.txtDate);
                    String DateValue = txtDate.getText().toString();

                    EditText txtType = (EditText) findViewById(R.id.txtType);
                    String TypeValue = txtType.getText().toString();

                    EditText txtLikes = (EditText) findViewById(R.id.txtLikes);
                    String LikesValue = txtLikes.getText().toString();

                    EditText txtDislikes = (EditText) findViewById(R.id.txtDislikes);
                    String DislikesValue = txtDislikes.getText().toString();

                    id = infoDB.insertContact(NameValue, DateValue, TypeValue, LikesValue, DislikesValue);
                    infoDB.close();

                    Toast.makeText(getBaseContext(), 
                            "Your information is saved successfully!", Toast.LENGTH_SHORT).show();

                }
            }); 
```

下面是两个 DBAdapter 类

InfoDBAdapter.java

```
public class InfoDBAdapter
{
    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "name";
    public static final String KEY_DATE = "date";
    public static final String KEY_TYPE = "type";
    public static final String KEY_LIKES = "likes";
    public static final String KEY_DISLIKES = "dislikes";

    private static final String TAG = "InfoDBAdapter";

    private static final String DATABASE_NAME = "anniversary";
    private static final String DATABASE_TABLE = "friends";
    private static final int DATABASE_VERSION = 2;

    private static final String DATABASE_CREATE = "create table friends(_id integer primary key autoincrement, "
            + "name text not null, date text not null, type text not null, likes text not null, dislikes text not null);";

    private final Context context;

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public InfoDBAdapter(Context ctx)
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper
    {
        DatabaseHelper(Context context)
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db)
        {
            try
            {
                db.execSQL(DATABASE_CREATE);
            } catch (SQLException e)
            {
                e.printStackTrace();
            }
        }// end onCreate()

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS friends");
            onCreate(db);
        }// end onUpgrade()

    }// end DatabaseHelper

        public InfoDBAdapter open() throws SQLException
        {
            db = DBHelper.getWritableDatabase();
            return this;
        }// end open()

        public void close()
        {
            DBHelper.close();
        }// end close()

        public long insertContact(String name, String date, String type, String likes, String dislikes)
        {
            ContentValues initialValues = new ContentValues();
            initialValues.put(KEY_NAME, name);
            initialValues.put(KEY_DATE, date);
            initialValues.put(KEY_TYPE, type);
            initialValues.put(KEY_LIKES, likes);
            initialValues.put(KEY_DISLIKES, dislikes);
            return db.insert(DATABASE_TABLE, null, initialValues);
        }// end insertContact()

        public boolean deleteContact(long rowId)
        {
            return db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
        }// end deleteContact()

        public Cursor getAllContacts()
        {
            return db.query(DATABASE_TABLE, new String[] 
                    { KEY_ROWID, KEY_NAME, KEY_DATE, KEY_TYPE, KEY_LIKES, KEY_DISLIKES }, null, null, null, null, null);
        }// end getAllContacts()

        public Cursor getContact(long rowId) throws SQLException
        {
            Cursor mCursor = db.query(true, DATABASE_TABLE, new String[] {
                    KEY_ROWID, KEY_NAME, KEY_DATE, KEY_TYPE, KEY_LIKES, KEY_DISLIKES }, KEY_ROWID + "=" + rowId,
                    null, null, null, null, null);
            if (mCursor != null)
            {
                mCursor.moveToFirst();
            }
            return mCursor;
        }// end getContact()

        public boolean updateContact(long rowId, String name, String date, String type, String likes, String dislikes)
        {
            ContentValues args = new ContentValues();
            args.put(KEY_NAME, name);
            args.put(KEY_DATE, date);
            args.put(KEY_TYPE, type);
            args.put(KEY_LIKES, likes);
            args.put(KEY_DISLIKES, dislikes);
            return db.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
        }// end updateContact()
}//end DBAdapter 
```

BuddiesDBAdapter.java

```
public class BuddiesDBAdapter
{
    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "buddy_name";
    private static final String TAG = "BuddiesDBAdapter";

    private static final String DATABASE_NAME = "anniversary";
    private static final String DATABASE_TABLE = "buddiesList";
    private static final int DATABASE_VERSION = 2;

    private static final String DATABASE_CREATE = "create table namesList(_id integer primary key autoincrement, "
            + "buddy_name text not null);";

    private final Context context;

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public BuddiesDBAdapter(Context ctx)
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper
    {
        DatabaseHelper(Context context)
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db)
        {
            try
            {
                db.execSQL(DATABASE_CREATE);
            } catch (SQLException e)
            {
                e.printStackTrace();
            }
        }// end onCreate()

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS namesList");
            onCreate(db);
        }// end onUpgrade()

    }//end DatabaseHelper class

    public BuddiesDBAdapter open() throws SQLException
    {
        db = DBHelper.getWritableDatabase();
        return this;
    }// end open()

    public void close()
    {
        DBHelper.close();
    }// end close()

    public long insertContact(String buddy_name)
    {
        ContentValues values = new ContentValues();
        values.put(KEY_NAME, buddy_name);
        return db.insert(DATABASE_TABLE, null, values);         
    }//end insertContact()

    public boolean deleteContact(long rowId)
    {
        return db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
    }// end deleteContact()

    public Cursor getAllContacts()
    {
        return db.query(DATABASE_TABLE, new String[] 
                { KEY_ROWID, KEY_NAME }, null, null, null, null, null);
    }// end getAllContacts()

    public Cursor getContact(long rowId) throws SQLException
    {
        Cursor mCursor = db.query(true, DATABASE_TABLE, new String[] {
                KEY_ROWID, KEY_NAME }, KEY_ROWID + "=" + rowId,
                null, null, null, null, null);
        if (mCursor != null)
        {
            mCursor.moveToFirst();
        }
        return mCursor;
    }// end getContact()

    public boolean updateContact(long rowId, String buddy_name)
    {
        ContentValues args = new ContentValues();
        args.put(KEY_NAME, buddy_name);
        return db.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
    }//end updateContact()
} 
```

我需要这方面的帮助。任何帮助，将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T04:18:18.270

因为

```
 String[] from = new String[] {"name"}; 
```

应该

```
 String[] from = new String[] {"buddy_name"}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T04:30:55.833

上面的答案是正确的。令人困惑的是，您有两个不同的数据库适配器，并且表名/列名不同。

为了可维护性，我不会对列名进行硬编码，而是使用

```
String[] from = new String[] {BuddiesDBAdapter.KEY_NAME}; 
```

希望这可以帮助...

# android - 如果我可以使用 android:configChanges="keyboard|orientation|screenLayout" 为什么我需要 setRetainInstance 或 onSaveInstance

> ID：11822325
> 
> 赞同：4
> 
> 时间：2012-08-06T03:43:31.400
> 
> 标签：android, fragment

为什么我需要使用`setRetainInstance()`或`onSaveInstance()`保存状态，我可以使用`android:configChanges="keyboard|orientation|screenLayout"`和获得相同的*“保存状态非 UI 状态”*？我的意思是减少头痛。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T03:51:21.503

不要使用`android:configChanges`. 它会以微妙的方式破坏事物，并阻止 Android 为当前配置获取正确的布局/主题/尺寸等。

`onSaveInstanceState()`与此完全正交：您需要保存状态，以便在 Android 杀死您的进程以节省内存时恢复它。`configChagnes`仅防止它重新创建旋转活动、键盘状态更改等。

`setRetainInstance()`用于您不希望在设备旋转等时重新创建的片段。如果您不调用它，Android 将在 Bundle 中序列化它们的状态，并与父活动一起重新创建它们。

简而言之，虽然`configChanges`看起来是一条“捷径”，但它不是。不要依赖它，并根据需要使用适合每种情况的工具来保存/恢复状态。

# javascript - 检测用户关闭标签或离开网站

> ID：11822326
> 
> 赞同：1
> 
> 时间：2012-08-06T03:43:37.730
> 
> 标签：javascript, login

我希望能够知道用户何时离开站点，以便我可以更新数据库中的字段（特别是`last_visit`用于确定每个用户的未读项目的字段）。但是，我不确定如何管理这样一个事实，即用户有时会打开网站的多个选项卡，因此我无法`onbeforeunload`可靠地使用它来实现这一目标。

理想情况下，只有当站点只有一个打开的选项卡时，我才能更新此字段。

另一方面，也许我可以通过简单地使用一个表来记录几天的读取项目并假设默认情况下读取比这更旧的线程来获得更多功能。

你怎么看？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:46:48.507

我能想到的只是使用 cookie 或本地存储来更新他们在每次页面加载时查看您的网站的时间。这样，一旦他们关闭了您网站打开的所有选项卡，cookie/本地存储条目将不会更新，您可以稍后在他们返回时访问该值。

所以每次页面加载时都运行这个：

```
window.localStorage.setItem('lastVisit',Date.now); 
```

并抓住它：

```
var lastVisit = window.localStorage.getItem('lastVisit'); 
```

# ruby-on-rails - crossdomain.xml 中的安全错误用于什么？

> ID：11822328
> 
> 赞同：2
> 
> 时间：2012-08-06T03:43:44.607
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-s3, crossdomain.xml

我们正在将文件从 HTTP uri 方案上传到我们的 S3。这意味着，我们的上传脚本在我们的服务器中。我们使用 S3 相应地签署表格。我们的 crossdomain.xml 文件如下所示：

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
  <allow-access-from domain="*" />
</cross-domain-policy> 
```

我应该`secure="false"`进去`allow-access-from`吗？例如：

```
<allow-access-from domain="*" secure="false" /> 
```

拥有的含义是`secure="false"`什么？我已经阅读[了 this](http://www.senocular.com/pub/adobe/crossdomain/policyfiles.html#allow-access-from-secure)和[this](http://shiflett.org/blog/2006/oct/the-crossdomain.xml-witch-hunt)，但不太理解它。

其次，应该`domain=*`是一个实际的域？即我们的域名？所以[http://foobar.com](http://foobar.com)和[http://www.foobar.com](http://www.foobar.com)？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T03:47:46.667

如果您`secure="true"`只允许来自 HTTPS 的请求，则`secure="false"`意味着允许来自 HTTP 和 HTTPS 的请求。

编辑：仅当您运行 HTTPS 网站时才适用。例如，如果[http://website1.com从网站](http://website1.com)[https://website2.com](https://website2.com)请求资源，该网站在 crossdomain.XML 中有一个`secure="true"`，那么该资源将被拒绝。但是，如果网站 2 是在 HTTP 而不是 HTTPS 上运行的，那么不管 crossdomain.xml 中的安全设置是什么，这都没关系，HTTP 和 HTTPS 都将被允许。

[http://www.senocular.com/pub/adobe/crossdomain/policyfiles.html#allow-access-from-secure](http://www.senocular.com/pub/adobe/crossdomain/policyfiles.html#allow-access-from-secure)

# sql - 1 级节点值的 SQL xpath

> ID：11822329
> 
> 赞同：1
> 
> 时间：2012-08-06T03:43:56.580
> 
> 标签：sql, sql-server, sql-server-2008, xpath

我正在尝试在 sql 2008 中创建一个存储过程，以从这样的一些 xml 中选择 id 值。

```
DECLARE @idPolygonXML XML

SET @idPolygonXML = 
'<polygons>
    <id>35</id>
    <id>36</id>
    <id>37</id>
    <id>38</id>
    <id>39</id>
    <id>40</id>
</polygons>' 
```

我可以获取特定索引的 id，但我需要所有这些，并且我不断收到“value() 需要一个单例”。

有谁知道如何在不更改 xml 的情况下获得所有这些值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T04:00:19.970

看看这个：http: [//msdn.microsoft.com/en-us/library/ms188282.aspx](http://msdn.microsoft.com/en-us/library/ms188282.aspx)

这未经测试，但您的查询看起来像这样

```
SELECT T2.ID.query('.')
CROSS APPLY @idPolygonXML.nodes('/polygons/id') as T2(ID) 
```

# asp.net-mvc - Scaffold MVC - 每个视图有多个模型

> ID：11822330
> 
> 赞同：0
> 
> 时间：2012-08-06T03:44:08.477
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在尝试使用脚手架我的模型。我的模型看起来像这样

```
 public class Patient
    {
        public virtual int Id { get; set; }
        public virtual string FirstName { get; set; }
        public virtual string LastName { get; set; }
        public virtual int MRN { get; set; }

        public virtual ICollection<Issue> Issues { get; set; } 

    }
public class Issue
    {
        public virtual int Id { get; set; }
        public virtual int PatientId { get; set; }
        public virtual Patient Patient { get; set; }
        public virtual string Room { get; set; }
        public virtual string Comment { get; set; }

    } 
```

因此，我希望当用户添加患者时，Create Scaffold 将显示患者和问题的字段。我现在得到的只是患者字段。有没有办法解决这个问题？

我想在创建新患者时提供选项，客户可以为患者添加多个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:55:15.320

据我所知，MVC3 甚至 4 中的默认脚手架内容无法处理此问题。在我看来，脚手架有太多不同且复杂的变量，无法真正可靠。你需要自己接线。我建议[为您的类型创建一个编辑器](http://buildstarted.com/2010/09/10/overriding-displayfor-and-editorfor-to-create-custom-outputs-for-mvc/)。这将至少简化一点。

# javascript - Javascript HTML 如何创建多用户文本框（图标和文本）

> ID：11822335
> 
> 赞同：0
> 
> 时间：2012-08-06T03:45:00.507
> 
> 标签：javascript, textbox

目前，我需要用 javascript 实现一个 html，如

![](../Images/5d5888c04ea563235848bccda49ff654.png)

当我们在这个文本框中输入文本时，它会显示一个自动完成列表。然后我们选择其中之一。我们将显示用户的图标和名称。我尝试了很多方法，但不能。

那么有人有什么想法吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:49:43.313

尝试

[jQuery 令牌输入插件](http://loopj.com/jquery-tokeninput/)

[Git Hub 上的 jQuery 令牌输入插件](https://github.com/loopj/jquery-tokeninput)

# primefaces - primefaces 3.2 - 无法自动聚焦下一个字段

> ID：11822339
> 
> 赞同：0
> 
> 时间：2012-08-06T03:46:25.597
> 
> 标签：primefaces

遇到一个奇怪的问题，不知道是不是bug。基本上，如果当前通过 ajax 更新下一个，焦点将跳过下一个。

要复制问题，您可以使用以下 bean：

```
public class TestBean implements Serializable {
   private BigDecimal a;
   private BigDecimal b;
   private BigDecimal c;
   //
   public TestBean() {
   }
   public BigDecimal getA() {
      return a;
   }
   public void setA(BigDecimal a) {
      this.a = a;
   }
   public BigDecimal getB() {
      return b;
   }
   public void setB(BigDecimal b) {
      this.b = b;
   }
   public BigDecimal getC() {
      return c;
   }
   public void setC(BigDecimal c) {
      this.c = c;
      this.calculate();
   }
   public void calculate() {
      if (a != null && b != null)
      c = a.multiply(b);
   }
} 
```

和下面的xhtml

```
 <p:inputText id="a" value="#{testBean.a}" style="text-align:right">
    <p:ajax event="blur" listener="#{testBean.calculate}" update="c d"/>
 </p:inputText>
 <p:inputText id="b" value="#{testBean.b}" style="text-align:right">
    <p:ajax event="blur" listener="#{testBean.calculate}" update="c d"/>
 </p:inputText>
 <p:inputText id="c" value="#{testBean.c}" style="text-align:right">
 </p:inputText>
 <p:inputText id="d" value="#{testBean.c}"/> 
```

1.  首先，我将单击字段 id="a"，id="a" 将获得焦点，我将键入一些值。这里没问题。
2.  然后我将按 Tab 键将光标移动到下一个字段 id = "b"，然后键入一些值。这里没问题。
3.  然后我将再次按 Tab 键，期望光标移动下一个字段 id = "c"。但它不会发生。只有字段 id="c" 的值被更新，焦点在某些地方丢失。当焦点丢失时，如果我再次按 Tab 键，焦点将移动到 id = "a" （或第一个字段）。
4.  即使我不使用 tab 键而是使用鼠标单击，如果我现在在字段 id = "b" 并单击 id="c"，焦点也会丢失。
5.  如果我从字段 id="b" 更新中删除“c”，使其成为 update="d"，那么焦点将停留在字段 id="c" 上，但问题是，它不会随“c”的计算值。

总之，我相信我可以说，如果当前字段运行 ajax 事件以通过 update="nextfield" 更新下一个字段，那么，下一个字段无法通过 tab 键或下一次鼠标单击来聚焦。第二次鼠标单击会将焦点带到下一个字段，但这很乏味。但是，我可以在下一个字段之后更新所有字段，并且仍然可以将焦点正确地放在下一个字段上。

这是它应该的方式吗？在这种情况下，如何真正将焦点转移到下一个领域？

（PrimeFaces 3.2）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:50:57.697

发生这种`update`情况时，HTML 会为`c`和更新`d`，因此光标无法聚焦在这些元素上。不确定您是否想使用一些发布事件 JavaScript 来设置焦点或只是接受此行为。

# javascript - Chrome中的javascript getElementById错误

> ID：11822340
> 
> 赞同：0
> 
> 时间：2012-08-06T03:46:39.247
> 
> 标签：javascript, google-chrome, getelementbyid

我的代码在 Firefox 中运行良好，但在 Chrome 中出现错误。它只是抓取一个元素并设置不透明度，所以我不确定我哪里出错了。

```
 var bot = document.getElementById ("bot");
  var top = document.getElementById ("top");
  top.style.opacity = 0.0; 
```

我收到第三行代码的错误“Uncaught TypeError: Cannot set property 'opacity' of undefined”，我不确定问题是什么。我已经检查以确保元素的 id 是“top”，并且它是唯一具有该 id 的元素。

这是相关的html代码

```
<div class = "banner" id = "bot">
  <div class = "bannerTop" id = "top">
  </div>
</div> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:53:32.393

将全局变量的名称更改为其他名称，`top`它可以在 Chrome 中使用：

[http://jsfiddle.net/jfriend00/y2QQT/](http://jsfiddle.net/jfriend00/y2QQT/)

这很可能是因为[`window.top`](https://developer.mozilla.org/en-US/docs/DOM/window.top)我们是一个已经存在的只读变量。

您还可以将代码放入本地函数中，这样您的 var`top`就不是全局变量，它也应该可以工作，如下所示：http: [//jsfiddle.net/jfriend00/62uYa/](http://jsfiddle.net/jfriend00/62uYa/)。

# javascript - Google Gauge（数据图表可视化）未加载到 ajax 调用的页面中

> ID：11822343
> 
> 赞同：0
> 
> 时间：2012-08-06T03:47:24.340
> 
> 标签：javascript, ajax

我在将 Google Gauge 图表可视化集成到我的网站时遇到了一些问题。他们给出的示例代码是：

```
<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script type='text/javascript'>
  google.load('visualization', '1', {packages:['gauge']});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Label', 'Value'],
      ['Memory', 80],
      ['CPU', 55],
      ['Network', 68]
    ]);

    var options = {
      width: 400, height: 120,
      redFrom: 90, redTo: 100,
      yellowFrom:75, yellowTo: 90,
      minorTicks: 5
    };

    var chart = new google.visualization.Gauge(document.getElementById('chart_div'));
    chart.draw(data, options); 
```

就其本身而言，当 ID 为 chart_div 的 div 位于正文中时，此代码可以正常工作。但是，我网站上的每个页面都由 ajax 使用 loadandsetactive 调用，并加载到“静态”标题下的内容 div 中。当相同的代码输入任何这些页面的头部时，它无法加载。没有错误、没有空白图表或脚本甚至尝试加载的任何其他迹象。页面如何加载到内容 div 的示例如下：

```
 <li class="menuItem" id="mypage">
    <a href="#" onclick="loadAndSetActive('mypage.html', '#content', '#mypage');" >
    <img src="myimage.png" width="100%" height="auto"/>My Page</a></li> 
```

然后将页面加载到标题下的上述内容 div 中。该网站几乎完全完成，但我似乎无法让这个仪表工作。任何帮助将不胜感激。

编辑：澄清一下，一旦用户登录，ajax 调用会自动加载我试图在 div 中绘制图表的仪表板。mypage 是一个完整的 html 文件，带有它自己的标签等。不幸的是，我的 PHP 和 HTML/CSS 比我的 ajax 和 jquery 好得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:54:56.200

而不是使用 setOnLoadCallback 尝试在 google.load 本身内部调用它，下面是代码片段：

```
google.load('visualization', '1', {
  packages:['gauge'],
  callback: drawChart
}); 
```

# android - 更改背景时为 RelativeLayout 设置动画

> ID：11822347
> 
> 赞同：0
> 
> 时间：2012-08-06T03:47:50.457
> 
> 标签：android, animation, layout

有没有一种方法可以为相对布局的背景图像变化设置动画？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T09:58:36.193

我找到了解决方法,,:)

```
<ImageView
        android:id="@+id/giftAppBgImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/giftApp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/giftApp"
        android:layout_below="@+id/TopborderBGImage"
        android:clickable="true"
        android:scaleType="fitXY"
        android:src="@drawable/cell_bg" />

    <RelativeLayout
        android:id="@+id/giftApp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/TopborderBGImage"
        android:background="@null"
        android:clickable="false"
        android:focusable="false"
        android:focusableInTouchMode="false" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="20dp"
            android:src="@drawable/gift_icon" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toRightOf="@+id/imageView1"
            android:text="Gift this app"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="@color/titleMiddleColor"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/moreShaderCell1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/textView1"
            android:layout_below="@+id/textView1"
            android:text="Continuous reward for you, InshaAllah!"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="@color/titleMiddleColor" />
    </RelativeLayout> 
```

setOnClickListener

```
findViewById(R.id.giftAppBgImage).setOnClickListener(this);

@Override
    public void onClick(final View v) {
        // TODO AK-generated method stub
        showLog("catch onClick event!" + v.getClass().getName());
        if (v instanceof ImageView) {
            ((ImageView) v).setImageResource(R.drawable.cell_bg_hover);
            Animation anim = AnimationUtils.loadAnimation(getActivity(), R.anim.more_animation);
            anim.setAnimationListener(new AnimationListener() {

                @Override
                public void onAnimationStart(Animation arg0) {
                    // TODO AK-generated method stub

                }

                @Override
                public void onAnimationRepeat(Animation arg0) {
                    // TODO AK-generated method stub

                }

                @Override
                public void onAnimationEnd(Animation arg0) {
                    // TODO AK-generated method stub
                    ((ImageView) v).setImageResource(R.drawable.cell_bg);
                }
            });
            v.startAnimation(anim);

        }
    }

<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" 
    android:interpolator="@android:anim/accelerate_interpolator">
    <alpha android:fromAlpha="1.0" android:toAlpha="0.0" android:fillAfter="true"
        android:duration="500"/>

</set> 
```

# c# - 在linq循环中获取先前的值？

> ID：11822348
> 
> 赞同：3
> 
> 时间：2012-08-06T03:48:05.230
> 
> 标签：c#, .net, linq, c#-4.0

我正在尝试将下面的代码转换为速记 linq，但不确定是否可能。有没有更优雅的方法可以使用 Linq 做到这一点？复杂之处在于它是一个嵌套循环，用于拆分 AllowedRoles 并检查每个是否为 IsUserInRole。

```
 bool allowed = RoleManager.IsUserUnrestricted(userId);
    if (!allowed)
    {
        foreach (var item in element.AllowedRoles.Split(','))
        {
            if (roleManager.IsUserInRole(userId, item.Trim()))
            {
                allowed = true;
                break;
            }
        }
    }

    if (allowed)
    {
        AddWidget(element.Name);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T03:54:34.140

尝试这个：

```
if (RoleManager.IsUserUnrestricted(userId)
||  element.AllowedRoles.Split(',')
           .Any(item => roleManager.IsUserInRole(userId, item.Trim()))) {
    ...
} 
```

这个想法是使用 LINQ 的`Any`函数来查找第一个匹配项而无需循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T03:55:22.283

像这样的东西？

```
if(RoleManager.IsUserUnrestricted(userId) || element.AllowedRoles.Split(',').Any(r=> roleManager.IsUserInRole(userId,r.Trim()))
{
        AddWidget(element.Name);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T03:56:13.063

你可以使用这样的东西：

```
element.AllowedRoles.Split(',').Any(r => roleManager.IsUserInRole(userId, r.Trim())) 
```

顺便说一句，我没有看到嵌套循环，您发布的代码中只有一个循环。你有元素的集合吗？另外，为什么您的问题的标题是“在 linq 循环中获取先前的值？” 我认为在任何地方都不需要这样做。

# java - 如何在同一个java代码中定义两个超类？

> ID：11822350
> 
> 赞同：0
> 
> 时间：2012-08-06T03:48:26.400
> 
> 标签：java, android, class, sms

我的项目用于接收短信并显示在列表中。以下代码行发生错误

```
setListAdapter(new ArrayAdapter<String>(this, R.layout.main,str)); 
```

由于 ListActivity 未在下面的代码中定义。但是，接收 SMS 的方法需要 BroadcastReceiver。

```
public class SmsReceiver extends BroadcastReceiver{ 
```

那么，问题是如何在一个 java 代码中定义两个超类？完整的java代码如下：

```
 package net.eg.app;

    import android.content.BroadcastReceiver;
    import android.content.Context;
    import android.content.Intent;
    import android.app.ListActivity;
    import android.telephony.SmsMessage;

    import android.os.Bundle;
    import android.view.View;
    import android.widget.AdapterView;
    import android.widget.AdapterView.OnItemClickListener;
    import android.widget.ArrayAdapter;
    import android.widget.ListView;
    import android.widget.TextView;
    import android.widget.Toast;

    public class SmsReceiver extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) 
    {
        //---get the SMS message passed in---
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;
        String str = "";     
        if (bundle != null)
        {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++){
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
                str += "SMS from " + msgs[i].getOriginatingAddress();                     
                str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";        
            }

            //---display in list---
            setListAdapter(new ArrayAdapter<String>(this, R.layout.main,str));

            ListView listView = getListView();
            listView.setTextFilterEnabled(true);

            //---method is call when listitem is clicked---
            listView.setOnItemClickListener(new OnItemClickListener() {
                //described method
            });
        }                         
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T04:04:21.027

如果“定义两个超类”是指扩展多个类，那么简单的答案是**NO**。Java 不支持多重继承。你应该重新考虑你的整个方法。

但是您可以执行以下操作：

```
public class YourClass extends Class1 {

    private final Class2 class2Impl = new Class2() {
    // Class2 "view" of this class, this inner class
    // has access to all fields/methods of YourClass
    };

    public Class2 asClass2() { return class2Impl; }

    } 
```

如果您真的需要，您还可以找到更多关于多重继承和“解决方法”的信息。只需在[Google](http://www.google.com)上搜索。

希望有帮助。如果这根本没有帮助，那么我很抱歉误解了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T04:41:16.813

您可以像 0gravity 所说的那样实现它；

```
public class SMSActivity extends ListActivity {
private SMSReceived mSmsReceiver;

//activity private variable to be manipulated by the sms receiver
private mSmsCount;

public SMSActivity(){
    mSmsReceiver = new SMSReceived();
}

private class SMSReceived extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        //lets manipulate the SMSActivity's private member variable
        mSmsCount++;
    }
} 
```

}

您还面临一个非常普遍的问题，即 ListActivity 非常不灵活。另一种解决方案是从不使用 ListActivity。

只需使用普通活动，在布局中嵌入 ListView，并在私有内部类中实现 ListAdapter。ListActivity 在布局上过于死板，几乎没有节省任何代码，不值得麻烦，当你不得不重构这种方法时，它会为你节省无数次，而且它真的没有太多额外的代码并且更具可读性。

# xml - XSLT：在 XML 中包含 Javascript

> ID：11822351
> 
> 赞同：0
> 
> 时间：2012-08-06T03:48:37.320
> 
> 标签：xml, xslt, xhtml, xslt-1.0

我有一个 XML(XHTML) 文件，我正在使用 XSLT 将其转换为另一个 XML 文件。我能够成功转换所有内容，但我需要在输出文件中包含一个我无法包含的 Javascript。谁能告诉我如何使用 XSLT 在输出文件中包含 javascript。

**我的输入文件：**

```
<?xml version="1.0" encoding="utf-8"?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-type" content="text/html;  charset=utf-8" />
    </head>  
    <body>
     <div class="TF" id="id8">
      <div class="iDev">
        <div class="q">
              T <input type="radio" name="o0" id="t0" onclick="getFeedback()"/> 
            </div>
      </div>
     </div>
    </body>
    </html> 
```

**期望的输出**

```
<?xml version="1.0" encoding="utf-8"?>
        <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
        <meta http-equiv="Content-type" content="text/html;  charset=utf-8" />
        </head>  
        <body>
         <div class="QT" id="id10">
         <script type="text/javascript">
         <!-- //<![CDATA[
            var numQuestions = 4;
            var rawScore = 0;
            var actualScore = 0;
           function getAnswer()
           {
          }
            function calulate()
           {
          }
          //]]> -->
         </script>
          <div class="iDev">
            <div class="q">
              T <input type="radio" name="o0" id="t0" onclick="getFeedback()"/> 
            </div>
          </div>
         </div>
        </body>
       </html> 
```

**XSLT 部分：**

```
<xsl:template match="xhtml:div[@id='id8']/@*">
  <xsl:attribute name="class">QT</xsl:attribute>
   <xsl:attribute name="id">id10</xsl:attribute>
   <script type="text/javascript">
   <![CDATA[
            var numQuestions = 4;
            var rawScore = 0;
            var actualScore = 0;
           function getAnswer()
           {
          }
            function calulate()
           {
          }
          ]]>
          </script>
</xsl:template> 
```

我已经创建了身份模板并根据所需的输出更改了所需的属性值，但我仍然不知道如何在`<div class="TF" id="id8">`此标记之后包含 javascript。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:53:00.377

忘记注释，只需将 JavaScript 代码放在 CDATA 部分。如今，很少有浏览器存在裸脚本位于`<script>`节点中的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T07:09:11.763

请尝试以下 xsl：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
  <xsl:output method="xml" indent="yes"/>
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="div[@id='id8']">
    <xsl:element name="div">
      <xsl:attribute name="class">QT</xsl:attribute>
      <xsl:attribute name="id">id10</xsl:attribute>
    </xsl:element>
    <script type="text/javascript">
      <![CDATA[         
       var numQuestions = 4;             
       var rawScore = 0;             
       var actualScore = 0;            
       function getAnswer()            
       {           
       }             
       function calulate()            
       {           
       }           
       ]]>
    </script>
  </xsl:template>
</xsl:stylesheet> 
```

**已编辑**

输入xml文件是这样的：

```
 <?xml version="1.0" encoding="utf-8"?>
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;  charset=utf-8" />
  </head>
  <body>
    <div id="id8">
    </div>
      <div class="iDev">
        <div class="q">
          T <input type="radio" name="o0" id="t0" onclick="getFeedback()"/>
        </div>
      </div>
  </body>
</html> 
```

输出xml是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<html>
<head>
<meta http-equiv="Content-type" content="text/html;  charset=utf-8" />
</head>
<body>
<div class="QT" id="id10" /><script type="text/javascript">

       var numQuestions = 4;             
       var rawScore = 0;             
       var actualScore = 0;            
       function getAnswer()            
       {           
       }             
       function calulate()            
       {           
       }           

    </script>
  <div class="iDev">
    <div class="q">
      T <input type="radio" name="o0" id="t0" onclick="getFeedback()" />
    </div>
  </div>
</body>
</html> 
```

我希望这能帮到您...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T00:22:42.987

根据此处给出的建议，我尝试了以下方法，并且效果很好。如果其他人遇到同样的问题，那么试试这个 -

```
<xsl:stylesheet version="1.0"
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
   xmlns:xhtml="http://www.w3.org/1999/xhtml"
   xmlns="http://www.w3.org/1999/xhtml"
   exclude-result-prefixes="xhtml">
<xsl:output method="html" indent="yes" encoding="UTF-8"/>
<xsl:strip-space elements="*" />
   <xsl:template match="@*|node()">
     <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
     </xsl:copy>
   </xsl:template>

    <xsl:template match="xhtml:div[@id='id8']" xmlns="http://www.w3.org/1999/xhtml">
    <div id="id10" class="QT">
        <xsl:apply-templates select="
          (@*[local-name()!='id']
             [local-name()!='class'])
          | node()"/>
      </div>
        <script type="text/javascript">
          <![CDATA[         
           var numQuestions = 4;             
           var rawScore = 0;             
           var actualScore = 0;            
           function getAnswer()            
           {           
           }             
           function calulate()            
           {           
           }           
           ]]>
        </script>
    </xsl:template>
<xsl:stylesheet> 
```

# php - 加密数据库，使系统管理员无权访问

> ID：11822352
> 
> 赞同：-1
> 
> 时间：2012-08-06T03:48:42.063
> 
> 标签：php

我正在寻找使用 PHP 开发用于医疗保健目的的应用程序。我想加密数据，这样除了应用程序的实际用户之外，没有人可以访问数据。甚至系统管理员也不能访问。有人对执行此操作的过程有想法吗？

我做了一些研究，这似乎是可能的，一个用户需要访问他/她的数据。但是，我想强调多个用户需要访问一组数据这一事实。不只是一个用户。

我意识到这可以通过用户之间的第三个通用密码来完成，它可以充当盐......但这似乎不太实用:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:55:11.780

要加密数据，请在浏览器中使用 openssl rsa。js中有一些实现可用。据我所知，该模块并非在每个浏览器中都运行。

*   将私钥存储在本地数据库（html）中
*   在浏览器中加密/解密数据
*   用js构建输入表单
*   然后将加密数据保存在服务器上

但在那种情况下，即使是 php appl。无法访问数据:(

# android - 如何使 org-mobile 在 android 中工作？

> ID：11822353
> 
> 赞同：8
> 
> 时间：2012-08-06T03:48:58.397
> 
> 标签：android, org-mode

我想在我的 Android 手机中查看和编辑我的 org 文件，我将文件与 Ubuntu 同步。我添加了这样的代码`.emacs`

```
(setq org-mobile-directory "~/Documents") 
```

我还将*Org Mobile Directory*设置为`~/Documents`Org Mobile Group。但我无法将任何组织文件推送到我的手机。当我在 Emacs 中打开一个 org 文件时`C-c-x RET p`，Emacs 会显示此消息。

```
Please set 'org-direcory' to the directory where your org files live 
```

我不知道为什么我在 Emacs 上面做了这样的设置后仍然给我这个消息。

我在手机中所能做的就是简单地捕捉一个新的笔记，我输入一些东西，它们可以与我的电脑在`~/Ubuntu One/mobileorg.org`. 但我无法读取我加载到手机中的内容。

我阅读了网络：[同步](https://github.com/matburt/mobileorg-android/wiki/FAQ#wiki-Why_do_I_need_to_use_orgmobilepush_before_synchronizing)，我发现我在我的目录中找不到这三个文件：*checksum.dat、index.org 和议程.org。*

我需要什么才能查看手机中的组织文件并将组织文件推送到手机中？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-06T05:21:23.690

`.org`您将要导出到 org-mobile的文件存储在哪里？例如，我的存储`~/labor`和导出文件`~/labor/tasks.org`，并且还使用[OwnCloud](http://owncloud.org) WebDAV 与 MobileOrg 同步，所以我设置了：

```
(setq org-directory "~/labor")
(setq org-mobile-directory "~/dl/owncloud/mobileorg")
(setq org-agenda-files '("~/labor/tasks.org"))
(setq org-mobile-inbox-for-pull "~/labor/from-mobile.org") 
```

正如[Pushing to MobileOrg](https://orgmode.org/manual/Pushing-to-the-mobile-application.html)所说，推送阶段仅列出`org-agenda-files`or`org-mobile-files`中列出的文件，并将它们`org-mobile-directory`保留与`org-directory`. 正如[Pulling from MobileOrg](https://orgmode.org/manual/Pulling-from-the-mobile-application.html)所说，`org-mobile-inbox-for-pull`是一个文件`org-directory`，其中捕获的笔记是从手机中提取的，您需要在任何需要的地方手动添加。

建立：

1.  `.org`将您想要在手机上的文件列表放入`org-agenda-files`或`org-mobile-files`变量中；
2.  设置`org-directory`和`org-mobile-directory`- 你已经做到了；
3.  在手机上使用 Ubuntu One 目录设置 MobileOrg；
4.  设置`org-mobile-inbox-for-pull`为某个文件`org-directory`

您通常的工作流程将如下所示：

1.  在 Emacs 中执行`org-mobile-push`( )；`C-c C-x RET p`
2.  同步手机；
3.  在 MobileOrg 中做一些事情；
4.  同步手机；
5.  在 Emacs 中执行`org-mobile-pull`( )；`C-c C-x RET g`

# java - 是否可以从网页获取 jsp 页面的整个源代码，包括其中标签中的 java 代码？

> ID：11822355
> 
> 赞同：0
> 
> 时间：2012-08-06T03:49:27.967
> 
> 标签：java, security, jsp

我想知道是否有一种或多种方法可以使用任何工具或任何库来获取 JSP 页面的整个源代码，这意味着标签中的 HTML 代码和 JAVA 代码。我知道以编程方式获取 HTML 代码是可能的。但我不确定是否也可以获得 JAVA 代码。任何帮助将不胜感激。我说的是应用程序安全性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:52:59.520

除非您可以访问 jsp，否则这是不可能的。JSP/Java 代码在发送到浏览器之前会被翻译成 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-12T21:30:21.657

我知道这是很久以前的事了，但我想指出的是，JRun 上有一个[非常有据可查](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2001-1511)的容器漏洞，可以让您查看完整的 JSP 源代码。

[http://server/page.js%2570](http://server/page.js%2570)

其中 %25 是 URL 编码的“%”，70 是 p 的十六进制值。

# java - 如何捕捉超时异常

> ID：11822357
> 
> 赞同：-1
> 
> 时间：2012-08-06T03:49:33.693
> 
> 标签：java, multithreading

代码 ：

```
Class Manager {
    Future  fu  = pool.invokeAll(workers, SEARCH_TIMEOUT, TimeUnit.SECONDS); 
    // calling the invoke call 
    search search= fu.get();    
   // callable 
}

public class Search implements Callable<Search> {
    Search call() {
        // multiple workers will execute Code So don't want to catch timed out exception in here 
        // api value will be changing based on corresponding reference 
        api.search_api();
    }
}

class api()
{
    search_api(){
        // How to catch a timed out exception in here 
        // catch(TimedoutException){}    did not work in here 
    }
} 
```

有没有办法可以在方法下的 Class api 中捕获 TimedOut 异常`search_api()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:57:51.107

您可以像以下代码一样捕获[TimeoutException ：](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/TimeoutException.html)

```
try {
        Future fu = pool.invokeAll(workers, SEARCH_TIMEOUT,
                TimeUnit.SECONDS);
        // calling the invoke call
        search search = fu.get();
    } catch (TimeoutException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T04:41:07.617

您也可以通过以下方式进行

```
try{

.

.

.

.

catch (RuntimeException e) {
        // TODO: handle exception
} 
```

# php - php中相对时间函数的问题

> ID：11822362
> 
> 赞同：1
> 
> 时间：2012-08-06T03:50:26.167
> 
> 标签：php

我在 php 中使用了许多相对时间的函数，但结果不同......帮帮我

我的职能：

```
<?php 
function pretty_relative_time($time) { 
  if ($time !== intval($time)) { $time = strtotime($time); } 
  $d = time() - $time; 
  if ($time < strtotime(date('Y-m-d 00:00:00')) - 60*60*24*3) { 
    $format = 'F j'; 
    if (date('Y') !== date('Y', $time)) { 
      $format .= ", Y"; 
    } 
       return date($format, $time); 
} 
if ($d >= 60*60*24) { 
  $day = 'Yesterday'; 
  if (date('l', time() - 60*60*24) !== date('l', $time)) { $day = date('l', $time); } 
  return $day . " at " . date('g:ia', $time); 
} 
if ($d >= 60*60*2) { return intval($d / (60*60)) . " hours ago"; } 
if ($d >= 60*60)   { return "about an hour ago"; } 
if ($d >= 60*2)    { return intval($d / 60) . " minutes ago"; } 
if ($d >= 60)      { return "about a minute ago"; } 
if ($d >= 2)       { return intval($d) . " seconds ago"; } 
else    {return "Just Now"; }

}
function plural($num) {
if ($num != 1)
    return "s";
 }

   function getRelativeTime($date) {
$diff = time() - strtotime($date);
if ($diff<60)
    return $diff . " second" . plural($diff) . " ago";
$diff = round($diff/60);
if ($diff<60)
    return $diff . " minute" . plural($diff) . " ago";
$diff = round($diff/60);
if ($diff<24)
    return $diff . " hour" . plural($diff) . " ago";
$diff = round($diff/24);
if ($diff<7)
    return $diff . " day" . plural($diff) . " ago";
$diff = round($diff/7);
if ($diff<4)
    return $diff . " week" . plural($diff) . " ago";
return "on " . date("F j, Y", strtotime($date));
 }

 echo pretty_relative_time('2012-08-06 8:04:15') ;echo "<br/>";
 echo getRelativeTime('2012-08-06 8:04:15');
 ?> 
```

输出 ：

Just Now // 对于第一个函数

-15747 秒前 // 第二个函数

db 中的任何设置？.....我使用 DATETIME 作为日期...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T04:15:14.500

您还没有明确说明您期望什么输出，但从您后来的评论来看，它应该是“1 小时前”？在这种情况下，我怀疑您遇到了时区问题——很可能是可怕的“夏令时”。尝试`date('Y-m-d H:i:s')`在 PHP 中回显，看看它是否具有您期望的值。

差异可能在于 php.ini 中设置的时区，或网络服务器本身的系统时钟，与数据库的时区设置或该服务器上的系统时钟不匹配。

# actionscript-3 - Adobe ADT ANT Build - 无法使用 [嵌入] 标签

> ID：11822363
> 
> 赞同：0
> 
> 时间：2012-08-06T03:50:39.917
> 
> 标签：actionscript-3, ant, air, adobe, adt

我正在尝试使用 ANT 使用 Adob​​e SDK 工具编译和打包 iOS IPA 文件。我需要使用 ANT，因为构建需要大量 RAM，并且 Flash Builder 在我编译时会遇到 Java 堆空间问题（即使我已经增加了 ini 文件中的最大 ram）。

这就是我的 ANT 构建的核心：

```
 <!-- Build the SWF and save it in the publish directory --> 
<target name="3\. Compile SWF" depends="2\. Build New Directories"> 
    <mxmlc 
        file="${MAIN_CLASS}" 
        output="${OUTPUT_SWF}" 
        debug="${DEBUG_FLAG}" 
        failonerror="true">         
        <load-config filename="${MOBI_CONFIG_FILE}"/>
        <define name="MOBI_PROJECT::IS_iOS_BUILD" value="${IS_iOS_BUILD}" />
        <define name="MOBI_PROJECT::DEBUG" value="${DEBUG_FLAG}" />
        <source-path path-element="${MOBI_DIR}/src"/>

        <library-path file="${FLEX_HOME}/frameworks/locale/en_US" append="true"/>
        <library-path dir="${MOBI_LIB_RELEASE_DIR}" includes="*.swc" append="true"/>

        <compiler.library-path dir="${FLEX_HOME}/frameworks" append="true">
            <include name="libs/*" />
        </compiler.library-path>

        <compiler.external-library-path dir="${FLEX_HOME}/frameworks/libs/air">
            <include name="**/*.swc" />
        </compiler.external-library-path>
        <compiler.external-library-path dir="${FLEX_HOME}/frameworks/libs">
            <include name="**/*.swc" />
        </compiler.external-library-path>           
        <compiler.external-library-path dir="${FLEX_HOME}/frameworks/libs/mx">
            <include name="**/*.swc" />
        </compiler.external-library-path>
    </mxmlc>
</target>

<!-- Package the application to an ipa file & save it in the publish directory --> 
<target name="4\. Package Application" depends="3\. Compile SWF"> 
    <java jar="${ADT}" fork="true" failonerror="true"> 
        <arg value="-package"/>
        <arg value="-target"/>
        <arg value="ipa-test"/>

        <arg value="-provisioning-profile"/>
        <arg value="${iOS_PROVISIONING}"/>

        <arg value="-storetype"/>
        <arg value="pkcs12"/>

        <arg value="-keystore"/>
        <arg value="${iOS_KEYSTORE}"/>

        <arg value="-storepass"/>
        <arg value="${iOS_PASS}"/>

        <arg value="${IPA_FILE}"/>
        <arg value="${APP_DESCRIPTOR}"/>
        <arg value="${OUTPUT_SWF}"/>
    </java> 
</target> 
```

我正在使用带有 Air 3.4 beta SDK 的 Flex 4.6 SDK，并使用 SDK 中的 airmobile-config.xml 作为我的配置文件。

但是当我运行它时，我收到以下错误：

```
4\. Package Application:
 [java] Exception in thread "main" java.lang.Error: Unable to find named traits: mx.core::SoundAsset
 [java]     at adobe.abc.Domain.resolveTypeName(Domain.java:232)
 [java]     at adobe.abc.Domain.resolveTypeName(Domain.java:149)
 [java]     at adobe.abc.GlobalOptimizer$InputAbc.resolveTypeName(GlobalOptimizer.java:272)
 [java]     at adobe.abc.GlobalOptimizer$InputAbc.readInstance(GlobalOptimizer.java:1000)
 [java]     at adobe.abc.GlobalOptimizer$InputAbc.readAbc(GlobalOptimizer.java:390)
 [java]     at adobe.abc.GlobalOptimizer$InputAbc.readAbc(GlobalOptimizer.java:278)
 [java]     at adobe.abc.LLVMEmitter.generateBitcode(LLVMEmitter.java:320)
 [java]     at com.adobe.air.ipa.AOTCompiler.convertAbcToLlvmBitcodeImpl(AOTCompiler.java:516)
 [java]     at com.adobe.air.ipa.BitcodeGenerator.main(BitcodeGenerator.java:80)
 [java] Compilation failed while executing : ADT 
```

如果我删除了我所有的 [Embed] 音频标签，那么错误仍然存​​在，但它抱怨“mx.core::ByteArrayAsset”。如果我删除项目中的每个 [Embed] 标记，则它可以编译。

我试图通过将这一行放在我的代码中来强制嵌入 SoundAsset 类：

```
import mx.core.SoundAsset;
...
new SoundAsset(); 
```

我什至进入了 Flex SDK 并复制了 SoundAsset 和 ByteArrayAsset 类并将它们放入我的项目中，但是这些东西都没有帮助。

谁能告诉我如何通过 ANT 编译 IPA 文件，同时仍保留我的 [Embed] 标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:54:51.043

我已经解决了问题！

我*认为*问题在于我链接到图书馆的方式。我最终删除了所有我手工制作的 ANT 设置，而是从我的 Flash Builder 项目中导出设置，然后只使用这些设置。

这篇文章的全部细节在这里，它救了我的命： [http ://helpx.adobe.com/x-productkb/multi/compilation-results-flex-builder-flex.html](http://helpx.adobe.com/x-productkb/multi/compilation-results-flex-builder-flex.html)

# performance - 为什么这种简化会使我的功能变慢？

> ID：11822365
> 
> 赞同：3
> 
> 时间：2012-08-06T03:51:04.987
> 
> 标签：performance, algorithm, common-lisp, fibonacci

以下函数通过尾递归和平方计算斐波那契数列：

```
(defun fib1 (n &optional (a 1) (b 0) (p 0) (q 1))
  (cond ((zerop n) b)
    ((evenp n) 
     (fib1 (/ n 2) 
          a 
          b 
          (+ (* p p) (* q q))
          (+ (* q q) (* 2 p q))))
    (t 
     (fib1 (1- n)
          (+ (* b q) (* a (+ p q)))
          (+ (* b p) (* a q))
          p
          q)))) 
```

基本上它将每个奇数输入减少为偶数，并将每个偶数输入减少一半。例如，

```
F(21)
    = F(21 1 0 0 1) 
    = F(20 1 1 0 1) 
    = F(10 1 1 1 1) 
    = F(5 1 1 2 3)
    = F(4 8 5 2 3) 
    = F(2 8 5 13 21) 
    = F(1 8 5 610 987) 
    = F(0 17711 10946 610 987)
    = 10946 
```

当我看到这个时，我认为将偶数和奇数情况结合起来可能会更好（因为奇数减一 = 偶数），所以我写了

```
(defun fib2 (n &optional (a 1) (b 0) (p 0) (q 1))
    (if (zerop n) b
     (fib2 (ash n -1) 
          (if (evenp n) a (+ (* b q) (* a (+ p q))))
          (if (evenp n) b (+ (* b p) (* a q)))
          (+ (* p p) (* q q))
          (+ (* q q) (* 2 p q))))) 
```

并希望这会让它更快，因为上面的方程现在变成了

```
F(21)
    = F(21 1 0 0 1)
    = F(10 1 1 1 1) 
    = F(5 1 1 2 3)
    = F(2 8 5 13 21) 
    = F(1 8 5 610 987) 
    = F(0 17711 10946 1346269 2178309)
    = 10946 
```

但是，当我通过以下代码检查 Fib(1000000) 所需的时间时，结果却要慢得多（在例如 Clozure CL、CLisp 和 Lispworks 中花费大约 50% 的时间）（忽略 progn，我只是不希望我的屏幕充满数字。）

```
(time (progn (fib1 1000000)()))
(time (progn (fib2 1000000)())) 
```

我只能看到 fib2 可能比 fib1 做得更多，那为什么它慢得多？

编辑：我认为 nm 做对了，我编辑了第二组公式。例如，在上面的 F(21) 示例中，fib2 实际上计算了 p 和 q 中的 F(31) 和 F(32)，这从未使用过。所以在 F(1000000) 中，fib2 计算 F(1048575) 和 F(1048576)。

懒惰的评价摇滚，这是一个很好的观点。我猜在 Common Lisp 中只有一些像“and”和“or”这样的宏被懒惰地评估？

以下修改后的 fib2（定义为 n>0）实际上运行得更快：

```
(defun fib2 (n &optional (a 1) (b 0) (p 0) (q 1))
    (if (= n 1) (+ (* b p) (* a q))
     (fib2 (ash n -1) 
          (if (evenp n) a (+ (* b q) (* a (+ p q))))
          (if (evenp n) b (+ (* b p) (* a q)))
          (+ (* p p) (* q q))
          (+ (* q q) (* 2 p q))))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T15:37:08.650

插入中间结果的打印。注意`p`计算`q`接近尾声。

您会注意到在最后一步`fib2`计算出更大的值`p`。`q`这两个值解释了所有的性能差异。

具有讽刺意味的是，这些昂贵的价值没有被使用。这就是为什么 Haskell 不会遇到这个性能问题：未实际计算未使用的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:19:15.527

如果不出意外， fib2 有更多条件（在计算参数时）。这很可能会改变代码流的完成方式。条件意味着跳转，意味着管道停顿。

`(disassemble #'fib1)`查看生成的代码可能会很有启发性（尝试`(disassemble #'fib2)`看看是否有任何明显的差异）。更改优化设置也可能是值得的，除非您要求对速度进行大量优化，否则通常会有一些优化没有完成。

# java - 用java运行纸质扫描仪软件

> ID：11822370
> 
> 赞同：2
> 
> 时间：2012-08-06T03:52:07.123
> 
> 标签：java, swing, netbeans, applet, image-scanner

我想知道是否有任何方法可以使用 java 调出扫描仪软件。基本上我希望能够让用户单击“扫描文档”按钮，然后用户PC上安装的任何扫描仪都会出现询问扫描选项等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T04:12:15.890

你可以看看这个问题[What libraries do I need to use a paper scanner in java?](https://stackoverflow.com/questions/11732857/what-libraries-do-i-need-to-use-a-paper-scanner-in-java)

但基本上，根据您的目标平台，您可以尝试

[JTwain](http://asprise.com/product/jtwain/)和/或[JSane](http://asprise.com/product/jsane/)

或尝试[莫雷纳](http://www.gnome.sk/Twain/jtp.html)

我过去使用过 Morena，发现它非常易于使用，但我正在等待 WIA 实施完成

# android - 无法访问 Windows 上的写入文件

> ID：11822379
> 
> 赞同：0
> 
> 时间：2012-08-06T03:53:34.193
> 
> 标签：android, sd-card, galaxy, filewriter

我写了一个日志文件到我的 sd（三星 Galaxy Nexus 的内部存储）。实际上，该文件在 Windows 中是不可见的。如何让用户访问它们？

```
 this.state = Environment.getExternalStorageState(); 
```

返回“已安装”

这是我的代码：

```
/**
 * Creates a new instance of Logger
 * 
 * */
public Logger() {
    String path = Environment.getExternalStorageDirectory()
            .getAbsolutePath();
    this.file = new File(path, "log.txt");
}

/**
 * Writes results to log file
 * 
 * **/
public void log(boolean isConnected, int signalStrength) {

    try {
        this.buf = new BufferedWriter(new FileWriter(this.file, true));
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {

        Calendar time = Calendar.getInstance();
        String result = time.getTime().toString() + " "
                + String.valueOf(isConnected) + " "
                + String.valueOf(signalStrength);

        this.buf.write(result);

        this.buf.flush();
        this.buf.close();

    } catch (IOException e) { // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

它不会写任何东西（即使我没有收到任何异常）。清单包含：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

编辑：

```
File path = Environment.getExternalStorageDirectory()
                .getAbsoluteFile(); 
```

没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T04:07:36.767

该文件在那里，但尚未被 MediaScanner 拾取。您可以通过打开 shell 来验证，如下所示：

```
adb shell ls -l /mnt/sdcard/clown.txt 
```

您需要等待它被拾取、重新启动，或者（最好）在完成文件写入后调用[MediaScannerConnection.scanFile() 。](http://developer.android.com/reference/android/media/MediaScannerConnection.html#scanFile%28java.lang.String,%20java.lang.String%29)

# c++ - 内联方法不能用作共享库的符号

> ID：11822382
> 
> 赞同：1
> 
> 时间：2012-08-06T03:53:49.767
> 
> 标签：c++, reference, linker, inline, undefined

如果我有一个将被编译为共享对象的类。该类在 .h 文件中声明并在 .cpp 文件中实现。

这个类包含几个**内联方法**。

如果我编写了一些与此共享库链接并包含 .h 文件的程序，则在链接它时会出现*未定义的引用*错误。

那是因为没有为内联方法导出符号吗？

我是否正确理解这一点？

**更新：**下面的一些示例代码

一些lib.h

```
#ifndef __ABC_LIB_H
#define __ABC_LIB_H
#include <iostream>
class ABC {
    ABC();
    ~ABC();
    inline void not_callable_outside_library();
    void callable_outside_library();
};
#endif 
```

一些lib.cpp

```
#include "somelib.h"
ABC::ABC() {}
ABC::~ABC() {}
void ABC::not_callable_outside_library(){ std::cout<<"not_callable_outside_library"<<std::endl; }
void ABC::callable_outside_library(){ std::cout<<"callable_outside_library"<<std::endl; } 
```

程序.cpp

```
#include "somelib.h"
int main() {
    ABC x;
    x.not_callable_outside_library();
    return 0;
}; 
```

将 somelib.cpp 编译为共享库（ .so 对象）并将其链接到 program.cpp ，然后您将获得名为**program**的二进制文件。

现在你应该在链接时得到一个**未定义的引用。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T04:55:52.270

内联函数必须在头文件中定义。将您拥有的内容与以下内容进行对比：

一些lib.h：

```
#ifndef ABC_LIB_H
#define ABC_LIB_H

#include <iostream>
class ABC {
    ABC();
    ~ABC();
    void not_callable_outside_library();
    void callable_outside_library();
};

inline void ABC::not_callable_outside_library() {
    std::cout << "not_callable_outside_library\n";
}

#endif 
```

一些lib.cpp：

```
#include "somelib.h"

ABC::ABC() { }
ABC::~ABC() { }
void ABC::callable_outside_library() {
    std::cout << "callable_outside_library\n";
} 
```

程序.cpp：

```
#include "somelib.h"

int main() {
    ABC x;
    x.not_callable_outside_library();
} 
```

# ruby-on-rails-3.2 - 未定义的方法“保存”# 我是 Rails 编程的新手，我正在尝试对对象进行基本保存。我的控制器中的代码如下： def create @subject = Subject.new @subject.resource_id = params[:subject][:resource_id] @su 问问题 问问题 2012-08-06T03:54:31.427 3913 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我是 Rails 编程的新手，我正在尝试对对象进行基本保存。我的控制器中的代码如下： def create @subject = Subject.new @subject.resource_id = params[:subject][:resource_id] @subject.student_id = params[:subject][:student_id] @subject.baseid = params[:subject][:baseid] @subject = params[:subject] respond_to do |format| # line 50 if @subject.save # line 51 format.html { redirect_to @subject, :notice => 'Subject was successfully created.' } format.json { render :json => @subject, :status => :created, :location => @subject } else format.html { render :action => "new" } format.json { render :json => @subject.errors, :status => :unprocessable_entity } end end end 我的视图代码如下所示： <%= form_for(@subject) do |f| %> <% if @subject.errors.any? %>

## <%= pluralize(@subject.errors.count, "error") %> prohibited this subject from being saved:

*   <%= msg %>

<% end %><%= f.label :Subject %>
<%= f.text_field :name %><%= f.label :baseid %>
<%= f.number_field :baseid %><%= f.label :Resource %>
<%= select(:subject, :resource_id, Resource.all.collect { |r| [ r.title, r.id ] }, { :prompt => true }) %><%= f.label :Student %>
<%= select(:subject, :student_id, Student.all.collect { |s| [s.name, s.id ] }, { :include_blank => true }) %><%= f.label :Graded? %>
<%= f.check_box :graded %><%= f.label :Student_scored %>
<%= f.check_box :studentupdate %><%= f.label :Monday %>
<%= f.check_box :AssignOnMonday %><%= f.label :Tuesday %>
<%= f.check_box :AssignOnTuesday %><%= f.label :Wednesday %>
<%= f.check_box :AssignOnWednesday %><%= f.label :Thursday %>
<%= f.check_box :AssignOnThursday %><%= f.label :Friday %>
<%= f.check_box :AssignOnFriday %><%= f.submit %><% end %> 当我尝试保存时，“如果@subject.save”行出现错误，指出“保存”是一个未定义的方法。我保存任何其他对象都没有问题。它必须是我的控制器和我的视图之间的交互，但是我想不通。 生成的 HTML 如下所示： {"utf8"=>"✓", "authenticity_token"=>"6BNo+WhSXreJekQvRo10DSp46LBNPkxskBREZr41q+Y=", "subject"=>{"name"=>"ttesting", "baseid"=>"11", "resource_id"=>"1", "student_id"=>"1", "graded"=>"1", "studentupdate"=>"0", "AssignOnMonday"=>"1", "AssignOnTuesday"=>"1", "AssignOnWednesday"=>"1", "AssignOnThursday"=>"0", "AssignOnFriday"=>"0"}, "commit"=>"Create Subject"} 和跟踪转储： app/controllers/subjects_controller.rb:51:in `block in create' actionpack (3.2.2) lib/action_controller/metal/mime_responds.rb:278:in `call' actionpack (3.2.2) lib/action_controller/metal/mime_responds.rb:278:in `retrieve_collector_from_mimes' actionpack (3.2.2) lib/action_controller/metal/mime_responds.rb:194:in `respond_to' app/controllers/subjects_controller.rb:50:in `create' actionpack (3.2.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action' actionpack (3.2.2) lib/abstract_controller/base.rb:167:in `process_action' actionpack (3.2.2) lib/action_controller/metal/rendering.rb:10:in `process_action' actionpack (3.2.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action' activesupport (3.2.2) lib/active_support/callbacks.rb:414:in `_run__4186951750656382860__process_action__4279552811083519369__callbacks' activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback' activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks' activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks' actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action' actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action' actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action' activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument' activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument' activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument' actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action' actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action' activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action' actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process' actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process' actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch' actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch' actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action' actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call' actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch' actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call' journey (1.0.3) lib/journey/router.rb:68:in `block in call' journey (1.0.3) lib/journey/router.rb:56:in `each' journey (1.0.3) lib/journey/router.rb:56:in `call' actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call' actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call' rack (1.4.1) lib/rack/etag.rb:23:in `call' rack (1.4.1) lib/rack/conditionalget.rb:35:in `call' actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call' actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call' actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call' rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context' rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call' actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call' activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call' activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call' actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call' activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__665871749096871788__call__3768009419737595332__callbacks' activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback' activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks' activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks' actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call' actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call' actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call' actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call' actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call' railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app' railties (3.2.2) lib/rails/rack/logger.rb:16:in `call' actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call' rack (1.4.1) lib/rack/methodoverride.rb:21:in `call' rack (1.4.1) lib/rack/runtime.rb:17:in `call' activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call' rack (1.4.1) lib/rack/lock.rb:15:in `call' actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call' railties (3.2.2) lib/rails/engine.rb:479:in `call' railties (3.2.2) lib/rails/application.rb:220:in `call' rack (1.4.1) lib/rack/content_length.rb:14:in `call' railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call' rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service' /Users/Lon/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service' /Users/Lon/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run' /Users/Lon/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 我将不胜感激任何建议。 谢谢， 朗 这一行： @subject = params[:subject] 导致你的错误。您正在覆盖@subject。它不再是一个主题，它变成了一个哈希。因此，您不能在其上调用 save 将其替换为 @subject.attributes = params[:subject] 还可以在这里查看如何根据每个请求或用户授权批量分配：RailsCast Dynamic Mass Assignment ruby-on-rails-3.2 4 1 回答 1 This answer is useful 2 这一行： @subject = params[:subject] 导致你的错误。您正在覆盖@subject。它不再是一个主题，它变成了一个哈希。因此，您不能在其上调用 save 将其替换为 @subject.attributes = params[:subject] 还可以在这里查看如何根据每个请求或用户授权批量分配：RailsCast Dynamic Mass Assignment 于 2012-08-06T04:19:37.190 回答 Related 1 android - Android：Google Cloud Storage API 中的 SQLite 存储 1 entity-framework - 在异步场景中处理非关键字段上的 EF 中的“重复”行 1 javascript - JSON 未正确解码 3 python - 如何在 Python 中实现 Backus-Naur 形式 2 c++ - 如何在 C++ 中用 stl 编写数组 1 php - 在函数中调用 PDO 查询 1 ruby-on-rails - 如何在 schema.rb 中跟踪多个数据库 1 python - 在python中读取包含特殊字符的逗号分隔文本文件 1 authentication - 将 PrimeFaces 与 JSF 一起使用时 Shiro 重定向到错误的位置 2 c# - 无法将“System.Int16”类型的对象转换为“System.String”类型 - AsEnumerable().ToDictionary Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11822385
> 
> 赞同：2
> 
> 时间：
> 
> 标签：ruby-on-rails-3.2

我是 Rails 编程的新手，我正在尝试对对象进行基本保存。我的控制器中的代码如下：

```
 def create 
       @subject = Subject.new
       @subject.resource_id = params[:subject][:resource_id]
       @subject.student_id = params[:subject][:student_id]
       @subject.baseid = params[:subject][:baseid]
       @subject = params[:subject]

       respond_to do |format|  # line 50
         if @subject.save      # line 51
            format.html { redirect_to @subject, :notice => 'Subject was successfully created.' }
            format.json { render :json => @subject, :status => :created, :location => @subject }
         else
            format.html { render :action => "new" }
            format.json { render :json => @subject.errors, :status => :unprocessable_entity }
         end
       end
    end 
```

我的视图代码如下所示：

```
 <%= form_for(@subject) do |f| %>
      <% if @subject.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@subject.errors.count, "error") %> prohibited this subject from being saved:</h2>

          <ul>
          <% @subject.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
          </ul>
        </div>
      <% end %>

      <div class="field">
        <%= f.label :Subject %><br />
        <%= f.text_field :name %>
      </div>
      <div class="field">
        <%= f.label :baseid %><br />
        <%= f.number_field :baseid %>
      </div>
      <div class="field">
        <%= f.label :Resource %><br />
        <%= select(:subject, :resource_id, Resource.all.collect { |r| [ r.title, r.id ] }, { :prompt => true }) %>
      </div>
      <div class="field">
        <%= f.label :Student %><br />
        <%= select(:subject, :student_id, Student.all.collect { |s| [s.name, s.id ] }, { :include_blank => true }) %>
      </div>
      <div class="field">
        <%= f.label :Graded? %><br />
        <%= f.check_box :graded %>
      </div>
      <div class="field">
        <%= f.label :Student_scored %><br />
        <%= f.check_box :studentupdate %>
      </div>
      <div class="field">
        <%= f.label  :Monday %><br />
        <%= f.check_box :AssignOnMonday %>
      </div>
      <div class="field">
        <%= f.label :Tuesday %><br />
        <%= f.check_box :AssignOnTuesday %>
      </div>
      <div class="field">
        <%= f.label :Wednesday %><br />
        <%= f.check_box :AssignOnWednesday %>
      </div>
      <div class="field">
        <%= f.label :Thursday %><br />
        <%= f.check_box :AssignOnThursday %>
      </div>
      <div class="field">
        <%= f.label :Friday %><br />
        <%= f.check_box :AssignOnFriday %>
      </div>
      <div class="actions">
        <%= f.submit %>
      </div>
    <% end %> 
```

当我尝试保存时，“如果@subject.save”行出现错误，指出“保存”是一个未定义的方法。我保存任何其他对象都没有问题。它必须是我的控制器和我的视图之间的交互，但是我想不通。

生成的 HTML 如下所示：

```
{"utf8"=>"✓",
 "authenticity_token"=>"6BNo+WhSXreJekQvRo10DSp46LBNPkxskBREZr41q+Y=",
 "subject"=>{"name"=>"ttesting",
 "baseid"=>"11",
 "resource_id"=>"1",
 "student_id"=>"1",
 "graded"=>"1",
 "studentupdate"=>"0",
 "AssignOnMonday"=>"1",
 "AssignOnTuesday"=>"1",
 "AssignOnWednesday"=>"1",
 "AssignOnThursday"=>"0",
 "AssignOnFriday"=>"0"},
 "commit"=>"Create Subject"} 
```

和跟踪转储：

```
app/controllers/subjects_controller.rb:51:in `block in create'
actionpack (3.2.2) lib/action_controller/metal/mime_responds.rb:278:in `call'
actionpack (3.2.2) lib/action_controller/metal/mime_responds.rb:278:in `retrieve_collector_from_mimes'
actionpack (3.2.2) lib/action_controller/metal/mime_responds.rb:194:in `respond_to'
app/controllers/subjects_controller.rb:50:in `create'
actionpack (3.2.2) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.2) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.2) lib/active_support/callbacks.rb:414:in `_run__4186951750656382860__process_action__4279552811083519369__callbacks'
activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
journey (1.0.3) lib/journey/router.rb:68:in `block in call'
journey (1.0.3) lib/journey/router.rb:56:in `each'
journey (1.0.3) lib/journey/router.rb:56:in `call'
actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:35:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__665871749096871788__call__3768009419737595332__callbacks'
activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
railties (3.2.2) lib/rails/engine.rb:479:in `call'
railties (3.2.2) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/Users/Lon/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/Lon/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/Lon/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

我将不胜感激任何建议。

谢谢，

朗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T04:19:37.190

这一行：

```
 @subject = params[:subject] 
```

导致你的错误。您正在覆盖@subject。它不再是一个主题，它变成了一个哈希。因此，您不能在其上调用 save

将其替换为

```
@subject.attributes = params[:subject] 
```

还可以在这里查看如何根据每个请求或用户授权批量分配：[RailsCast Dynamic Mass Assignment](http://railscasts.com/episodes/237-dynamic-attr-accessible?view=asciicast)

# iphone - 谷歌地图有多少缩放级别

> ID：11822387
> 
> 赞同：0
> 
> 时间：2012-08-06T03:54:41.130
> 
> 标签：iphone, objective-c, xcode4.2

据我所知，`MKMapview`有无限数量的缩放级别。您几乎可以在任何距离放大和缩小。

我在 Android 中工作的朋友说它`MKMapview`有 10 个缩放级别。

哪一个是对的？

这是[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T04:01:58.440

两者都是对的。虽然 Google 地图对 使用的图像图块具有固定数量的缩放级别`MKMapView`，但`MKMapView`会根据需要在它们之间选择正确的缩放级别/插值。

此外，使用 Google 地图这一事实`MKMapView`是一个实现细节，将在下一个 iOS 版本中发生变化。在 iOS 6 中，地图将由矢量图像构建，并且确实会有无限数量的缩放级别。

# apache - 将特定子域请求重定向到主服务器

> ID：11822388
> 
> 赞同：1
> 
> 时间：2012-08-06T03:54:42.933
> 
> 标签：apache, .htaccess, mod-rewrite, requirejs

我希望我的移动网络应用程序使用与我的网络应用程序相同的资源（模型、集合等），但我得到了 404。我正在使用 RequireJS（加载这些文件），以及 Backbone 和 jQuery Mobile。

我的应用程序结构如下：

```
/
  /js
    /models
    /collections
  /mobile
    /js 
```

我的子域`m.mysite.com`指向`/mobile`. 我希望所有请求`m.mysite.com/js/models`都重定向到`mysite.com/js/models`，以及类似的`collections`和其他请求。

我想出了以下代码，但它不工作，我仍然得到 404：

```
# Redirect all calls to '/models' or '/collections' to regular domain
RewriteRule local\.m\.mysite\.co/js/(models|collections|helpers|objects)/(.*?)$ mysite.co/js/$1/$2 

[L,QSA,R=301] 
```

**注意：**我在本地服务器前面加上`local.`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T04:04:44.517

您无法匹配 a 中的主机名`RewriteRule`，您需要使用 a`RewriteCond`并匹配**%{HTTP_HOST}**：

```
RewriteCond %{HTTP_HOST} ^local\.m\.mysite\.com$ [NC]
RewriteRule ^js/(models|collections|helpers|objects)/(.*?)$ http://mysite.co/js/$1/$2 [L,QSA,R=301] 
```

# c - Delphi 上的 C dll 头文件

> ID：11822398
> 
> 赞同：0
> 
> 时间：2012-08-06T03:55:40.813
> 
> 标签：c, delphi, dll

我想从“x.dll”加载一个函数，我有这个函数的定义（.h文件）：

```
uint32 BioAPI_ModuleAttach(
    const BioAPI_UUID *ModuleGuid,
    const BioAPI_VERSION *Version,
    const BioAPI_MEMORY_FUNCS *MemoryFuncs,
    uint32 DeviceID,
    uint32 Reserved1,
    uint32 Reserved2,
    uint32 Reserved3,
    BioAPI_FUNC_NAME_ADDR *FunctionTable,
    uint32 NumFunctionTable,
    const void *Reserved4,
    BioAPI_HANDLE_PTR NewModuleHandle);

typedef uint32 BioAPI_HANDLE, *BioAPI_HANDLE_PTR; 
```

但是，我只传递最后一个参数和我想传递的其他参数`0`（null）......我该如何实现？有什么方法可以自动使用 de .lib？

我试过了，但我以错误的方式实施.. :\

```
function BioAPI_ModuleAttach(
           ModuleGuid: array of Byte; 
           Version: HWND; 
           MemoryFuncs: HWND; 
           DeviceID: UInt32; 
           Reserved1: UInt32; 
           Reserved2: UInt32; 
           Reserved3: UInt32; 
           FunctionTable: HWND; 
           NumFunctionTable: UInt32; 
           Reserved4: Pointer; 
           NewModuleHandle: PINT) : UInt32; cdecl; external 'PvFw.dll'; 
```

谢谢，关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T07:04:03.687

我认为这可以工作：

```
function BioAPI_ModuleAttach(
  ModuleGuid: PByte; // pass a pointer to the first array element
  Version: PByte;    // PByte probably is wrong here, look up the type!
  MemoryFuncs: PByte; // Also probably wrong, what is BioAPI_MEMORY_FUNCS?
  DeviceID: UInt32; 
  Reserved1: UInt32; 
  Reserved2: UInt32; 
  Reserved3: UInt32; 
  FunctionTable: PBYTE; // pass a pointer to a BioAPI_FUNC_NAME_ADDR 
  NumFunctionTable: UInt32; // that's probably the length of the above
  Reserved4: Pointer; 
  NewModuleHandle: PUINT32) : UInt32; cdecl; external 'PvFw.dll'; 
```

如果所有参数都可以为零或 NULL，那么这样调用它应该可以工作：

```
var
  DeviceId: UInt32; // LongWord
  Handle: UInt32; // LongWord;
begin
  DeviceId := <something>
  Handle := 0;
  Res := BioAPI_ModuleAttach(nil, nil, nil, DeviceId, 0, 0, 0, nil, 0, nil, @Handle); 
```

当然，这假设很多，因为您没有提供有关许多指针参数的任何信息。我已将它们声明为 PByte，但这可能是错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T23:48:09.593

查看来源，我会这样转换：

```
const
  BioAPI_MAX_STR_LEN = 255;

type
  BioAPI_RETURN = UInt32;

  BioAPI_VERSION_PTR = ^BioAPI_VERSION;
  BioAPI_VERSION = record
    Major: UInt32;
    Minor: UInt32;
  end;

  BioAPI_MALLOC = function(
    Size: UInt32;
    AllocRef: Pointer;
    FileName: PAnsiChar;
    Line: UInt32; 
  ): Pointer stdcall;

  // etc...

  BioAPI_MEMORY_FUNCS_PTR = ^BioAPI_MEMORY_FUNCS;
  BioAPI_MEMORY_FUNCS = record
    Malloc_func: BioAPI_MALLOC;
    Free_func: BioAPI_FREE;
    Realloc_func: BioAPI_REALLOC;
    Calloc_func: BioAPI_CALLOC;
    AllocRef: Pointer;
  end;

  BioAPI_FUNC_NAME_ADDR_PTR = ^BioAPI_FUNC_NAME_ADDR;
  BioAPI_FUNC_NAME_ADDR = record
    Name: array[0..BioAPI_MAX_STR_LEN - 1] of AnsiChar;
    Address: BioAPI_PROC_ADDR;
  end;

  // etc... I'll leave the rest for you. ;-)

function BioAPI_ModuleAttach(
  ModuleGuid: PGUID;
  Version: BioAPI_VERSION_PTR;
  MemoryFuncs: BioAPI_MEMORY_FUNCS_PTR;
  DeviceID,
  Reserved1,
  Reserved2,
  Reserved3: UInt32;
  FunctionTable: BioAPI_FUNC_NAME_ADDR_PTR;
  NumFunctionTable: UInt32;
  Reserved4: Pointer;
  var NewModuleHandle: HMODULE): BioAPI_RETURN; stdcall; 
```

请注意，在 Win32 中，`BioAPI`#defined as`__stdcall`是`cdecl`绝对错误的。没有任何迹象表明必须打包记录。我会让它们保持自然对齐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T11:26:19.583

```
const
  BioAPI_MAX_STR_LEN = 255;
  BioAPI_OK = 0;
  BioAPI_INVALID_HANDLE = 0;

type
  BioAPI_UUID = packed array[0..15] of Byte; // or TGUID
  BioAPI_UUID_PTR = ^BioAPI_UUID;

  BioAPI_DEVICE_ID = UInt32;

  BioAPI_VERSION = record
        Major: UInt32;
        Minor: UInt32;
  end;
  BioAPI_VERSION_PTR = ^BioAPI_VERSION;

    BioAPI_MALLOC = function(Size: UInt32; Allocref: Pointer): Pointer; cdecl;
  BioAPI_FREE = procedure(Memblock: Pointer; Allocref: Pointer); cdecl;
    BioAPI_REALLOC = function(Memblock: Pointer; Size: UInt32; Allocref: Pointer): Pointer; cdecl;
    BioAPI_CALLOC = function(Num: UInt32; Size: UInt32; Allocref: Pointer): Pointer; cdecl;

  BioAPI_MEMORY_FUNCS = record
        Malloc_func: BioAPI_MALLOC;
    Free_func: BioAPI_FREE;
        Realloc_func: BioAPI_REALLOC;
        Calloc_func: BioAPI_CALLOC;
        AllocRef: Pointer;
  end;
  BioAPI_MEMORY_FUNCS_PTR = ^BioAPI_MEMORY_FUNCS;

  BioAPI_PROC_ADDR = function: UInt32; stdcall;

  BioAPI_FUNC_NAME_ = record
        Name: packed array[0..BioAPI_MAX_STR_LEN-1] of AnsiChar;
        Address: BioAPI_PROC_ADDR;
  end;
  BioAPI_FUNC_NAME_ADDR = array[0..0] of BioAPI_FUNC_NAME_;
  BioAPI_FUNC_NAME_ADDR_PTR = ^BioAPI_FUNC_NAME_ADDR;

  BioAPI_HANDLE = UInt32;
  BioAPI_HANDLE_PTR = ^BioAPI_HANDLE;

function BioAPI_ModuleAttach(
    ModuleGuid: BioAPI_UUID_PTR;
    Version: BioAPI_VERSION_PTR;
    MemoryFuncs: BioAPI_MEMORY_FUNCS_PTR;
    DeviceID: BioAPI_DEVICE_ID;
    Reserved1: UInt32;
    Reserved2: UInt32;
    Reserved3: UInt32;
    FunctionTable: BioAPI_FUNC_NAME_ADDR_PTR;
    NumFunctionTable: UInt32;
    Reserved4: Pointer;
    var NewModuleHandle: BioAPI_HANDLE): UInt32; cdecl; external 'PvFw.dll';

procedure Test;
var
  NewModuleHandle: BioAPI_HANDLE;
begin
  if BioAPI_ModuleAttach(nil, nil, nil, 0, 0, 0, 0, nil, 0, nil, NewModuleHandle) = BioAPI_OK then
  begin
    if NewModuleHandle <> BioAPI_INVALID_HANDLE then
    begin
      // Success
    end;
  end;
end; 
```

如果**cdecl**不是正确的约定，则替换为**stdcall**

# objective-c - cocos2d - 如何在 3d 中定位 CCSprite？

> ID：11822399
> 
> 赞同：2
> 
> 时间：2012-08-06T03:55:46.833
> 
> 标签：objective-c, opengl, cocos2d-iphone, ccsprite

我有一个圆盘精灵，它总是围绕它的中心旋转，像轮子一样旋转。我想在 3d 空间中重新定位它并保持它的旋转。我试过弄乱网格属性、skewX/Y、相机，我能找到的一切，但我不知道如何通过旋转产生这种效果。

[![例子](../Images/fd7c22d6a7cbe5816a05a01990630d49.png)](https://i.stack.imgur.com/Tcejp.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T21:24:54.117

几条路线：

*   找出数学以获得旋转值的正确偏斜值。（我不知道，抱歉，尽管您可能可以从选项 2 对其进行逆向工程）

*   您可以子类化`CCSprite`，覆盖`CCNode`的`- (CGAffineTransform)nodeToParentTransform`方法，并且必须首先应用倾斜，然后旋转，以获得您想要的效果。这使您不必以相当笨拙的精灵子类为代价来计算正确的偏斜计算。

您可以从中`CCNode.h`了解其当前的操作顺序：

```
 /* Order in transformations with grid disabled
 -# The node will be translated (position)
 -# The node will be rotated (rotation)
 -# The node will be skewed (skewX, skewY)
 -# The node will be scaled (scale, scaleX, scaleY)
 -# The node will be moved according to the camera values (camera)
 ... etc. */ 
```

这是该方法的一个破解版本，首先是倾斜：（缺少原始方法中的优化`CCNode.m`）

```
- (CGAffineTransform)nodeToParentTransform
{
    if ( isTransformDirty_ ) {
        // Translate values
        float x = position_.x;
        float y = position_.y;

        if ( ignoreAnchorPointForPosition_ ) {
            x += anchorPointInPoints_.x;
            y += anchorPointInPoints_.y;
        }

        transform_ = CGAffineTransformMake(1.0f, tanf(CC_DEGREES_TO_RADIANS(skewY_)),
                                           tanf(CC_DEGREES_TO_RADIANS(skewX_)), 1.0f,
                                           x, y );
        // Rotation values
        float c = 1, s = 0;
        if( rotation_ ) {
            float radians = -CC_DEGREES_TO_RADIANS(rotation_);
            c = cosf(radians);
            s = sinf(radians);
        }

        CGAffineTransform rotMatrix = CGAffineTransformMake( c * scaleX_,  s * scaleX_,
                                           -s * scaleY_, c * scaleY_,
                                          0.0f, 0.0f );
        transform_ = CGAffineTransformConcat(rotMatrix, transform_);

        // adjust anchor point
        if( ! CGPointEqualToPoint(anchorPointInPoints_, CGPointZero) )
            transform_ = CGAffineTransformTranslate(transform_, -anchorPointInPoints_.x, -anchorPointInPoints_.y);

        isTransformDirty_ = NO;
    }
    return transform_;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T05:35:38.367

HachiEthan 的回答很好，它允许您在保持旋转的同时使用 skewX/skewY 设置视角。但是，我认为使用相机设置视角更容易。在这种情况下，您可以通过将旋转精灵包装在父节点中来实现效果。

例如：

```
CCNode *node3D;
CCSprite *sprite;

node3D = [CCNode node];
sprite = [CCSprite spriteWithFile:@"HugeDisc_Red.png"];

//[[node3D camera] setCenterX:15 centerY:45 centerZ:40]; // You can use the camera
[node3D setSkewX:25]; // Skew also works if you prefer it
[node3D setRotation:145]; // Skew + rotation looks pretty convincing
[node3D setPosition:ccp(middleX+105, middleY-110)];

[node3D setIgnoreAnchorPointForPosition:NO];
[node3D setAnchorPoint:ccp(0.5f,0.5f)];

[sprite setPosition:ccp(node3D.contentSize.width/2, node3D.contentSize.height/2)];
[sprite runAction:rotate];

[node3D addChild:sprite]; 
```

最终，它归结为偏好问题。你想为此制作一个自定义精灵对象吗？你更喜欢相机，还是倾斜？根据您的需要，其中之一应该适合您的需要。

# eclipse - Maven 不会自动下载依赖

> ID：11822400
> 
> 赞同：0
> 
> 时间：2012-08-06T03:55:54.233
> 
> 标签：eclipse, maven, m2eclipse

我是Maven的初学者。我从 Bitbucket 中提取了一个 java maven 项目。编译项目时 Eclipse 说“8/6/12 1:39:05 PM EST: Missing artifact com.tinkerpop.blueprints:blueprints-core:jar:1.0:compile”：

Maven控制台：

```
8/6/12 1:39:03 PM EST: Missing artifact com.tinkerpop.blueprints:blueprints-core:jar:1.0:compile
8/6/12 1:39:05 PM EST: Missing artifact com.tinkerpop.blueprints:blueprints-core:jar:1.0:compile 
```

但是当我检查 pom.xml 文件时，它已经存在于依赖列表中，只有 Type 和 Scope 字段为空。看到错误，我尝试自己添加此依赖项。它显示如下： ![在此处输入图像描述](../Images/d6b253beae0f6481ff73bf23ac4b1103.png) #1 问题是，为什么对于 1.0 版本，blueprints-core 只有一个 .pom 文件而不是一个 .jar 文件？这是否意味着在远程存储库中他们不再提供 1.0 版本？（我发现项目回复中的代码是这个蓝图框架的 1.0 版本而不是 2.0 版本）

#2 问题是，在什么情况下 Maven 不会自动下载添加的依赖项的 jar 文件？

这是原始的 pom.xml 文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <parent>
        <groupId>edu.qut.cs</groupId>
        <artifactId>qut-recommender</artifactId>
        <version>1.0-SNAPSHOT</version>
        <relativePath>../qut-recommender/pom.xml</relativePath>
    </parent>
    <modelVersion>4.0.0</modelVersion>
    <artifactId>rcmd-common</artifactId>
    <packaging>jar</packaging>
    <name>QUT Recommender Common Library and Utilty</name>

    <dependencies>
        <dependency>
            <groupId>com.google.guava</groupId>
            <artifactId>guava</artifactId>
            <version>11.0.1</version>
        </dependency>
        <dependency>
            <groupId>org.mongodb</groupId>
            <artifactId>mongo-java-driver</artifactId>
            <version>2.7.2</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.mahout</groupId>
            <artifactId>mahout-ext</artifactId>
            <version>1.0-SNAPSHOT</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>jgrapht</groupId>
            <artifactId>jgrapht</artifactId>
            <version>0.7.3</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>com.tinkerpop.blueprints</groupId>
            <artifactId>blueprints-core</artifactId>
            <version>1.0</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>   
    </dependencies>

</project> 
```

存在 1.0 版本的 POM 和 Jar 文件。下图是“C:\Users\n8275441.m2\repository\com\tinkerpop\blueprints”文件夹下的目录和文件。顺便说一句，我从 Bitbucket 存储库中提取了这个项目。那些 1.0 版本的文件有可能与 Bitbuckdet 中的项目一起出现吗？ ![在此处输入图像描述](../Images/e263b5e31641154fb6e4f27a538a88da.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T08:12:01.987

如果您想知道 Maven Central 提供什么，[mvnrepository.com](http://mvnrepository.com/)是您的朋友。

在这种情况下，没有 1.0 版本： http: [//mvnrepository.com/artifact/com.tinkerpop.blueprints/blueprints-core](http://mvnrepository.com/artifact/com.tinkerpop.blueprints/blueprints-core)

这就引出了一个有趣的问题，为什么 m2e 会为它报告一个 POM 文件。如果 POM 文件确实存在，我建议查看您的硬盘。你可以在（或不）找到它`C:\Users\n8275441\.m2\repository\com\tinkerpop\blueprints\1.0\blueprints-core\`

至于问题#2：Maven（以及m2e），只会尝试下载一个版本（即`SNAPSHOT`版本中没有的东西）一次。如果下载失败，Maven 会注意到这一点并且永远不会再试一次，因为它假定上游存储库（例如 Maven Central）注意 Maven 规则（所以如果一个 repo 没有东西，它明天就没有了） .

对于快照，Maven 将尝试每天下载一次，以便在保持最新状态和不浪费时间等待下载之间取得良好的平衡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T07:28:00.257

根据您的信息并在检查 maven Central 后，问题取决于您选择的版本。Maven Central 仅包含[1.2、2.0.0 和 2.1.0 版本，但不包含 1.0 版本](http://search.maven.org/#search%7Cgav%7C1%7Cg%3a%22com.tinkerpop.blueprints%22%20AND%20a%3a%22blueprints-core%22)。此外，如果在您的 pom 中给出了没有范围的依赖项：

```
<dependency>
  <groupId>com.tinkerpop.blueprints</groupId>
  <artifactId>blueprints-core</artifactId>
  <version>1.0</version>
</dependency> 
```

这意味着默认范围是“编译”（在约定优于配置的意义上）。我只是建议将版本更改为 2.0.0 或 2.1.0 应该可以解决问题。如果您检查编译此类项目，我建议在命令行上而不是在 Eclipse 中进行第一次尝试。

# java - 如何将大字符串转换为十六进制然后转换为字节？

> ID：11822402
> 
> 赞同：3
> 
> 时间：2012-08-06T03:56:27.270
> 
> 标签：java, hash, hex, byte, sha1

我每天都使用手机并处理 MEID 号码。因此，与其在线搜索 MEID（长度为 14 的十六进制数）到伪 ESN（长度为 8 的十六进制数）计算器，我想我可以制作自己的程序。从 MEID 获取 pESN 的方法在理论上相当简单。例如，给定 MEID 0xA0000000002329，要制作 pESN，需要将 SHA-1 应用于 MEID。A0000000002329 上的 SHA-1 给出 e3be267a2cd5c861f3c7ea4224df829a3551f1ab。取此结果的最后 6 个十六进制数字，并将其附加到 0x80 - 结果是 0x8051F1AB。

现在这是我到目前为止的代码：

```
public void sha1() throws NoSuchAlgorithmException {

    String hexMEID = "A0000000002329";

    MessageDigest mDigest = MessageDigest.getInstance("SHA1");      

    byte[] result = mDigest.digest(hexMEID.getBytes());
    StringBuilder sb = new StringBuilder();

    for (int i = 0; i < result.length; i++) {
        sb.append(Integer.toString((result[i] & 0xff) + 0x100, 16).substring(1));
    }

    System.out.println(sb.toString());
} 
```

问题在于，使用这种方法，A0000000002329 上的 SHA-1 会给出 a89b611b421f57705bd013297ce3fc835f706ab0 而不是 e3be267a2cd5c861f3c7ea4224df829a3551f1ab。我在这里做错了什么？

有人给了我一个提示，*“诀窍是将 SHA-1 应用于代表 MEID 的数字，而不是代表 MEID 的字符串。您需要逐字节处理它，因此您必须给它两个十六进制数字一次（因为两个十六进制数字组成一个字节）并确保它们被解释为数字而不是 ASCII 字符”*。如果这是真的，那么我如何将我的字符串更改为十六进制，然后再更改为字节，以便 SHA1 可以给我正确的结果？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T04:24:04.363

如果没有库，您可以按照此处的示例进行操作：

[在 Java 中，如何将十六进制字符串转换为字节 []？](https://stackoverflow.com/questions/8890174/in-java-how-do-you-convert-a-hex-string-to-a-byte?rq=1)

```
 byte[] b = new BigInteger(s,16).toByteArray(); 
```

一个也提供此功能的库（我敢肯定有很多）是 POJava：

```
<dependency>
    <groupId>org.pojava</groupId>
    <artifactId>pojava</artifactId>
    <version>2.8.1</version>
</dependency>

 byte[] hexMEIDBytes=EncodingTool.hexDecode(hexMEID); 
```

[编辑] ==============

根据您的后续问题，这是一个更完整的示例：

```
 byte[] hexMEIDBytes = EncodingTool.hexDecode(hexMEID);
    byte[] hash = HashingTool.hash(hexMEIDBytes, HashingAlgorithm.SHA);
    String pESN="0x80" + EncodingTool.hexEncode(hash).substring(34).toUpperCase();
    // a hexMEID value of "A0000000002329" results in a pESN value of "0x8051F1AB" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T04:40:10.183

**对于字符串到十六进制：**

```
public String StrToHex(String arg) {

    return String.format("%040x", new BigInteger(arg.getBytes(//Your Charset//)));
} 
```

**对于十六进制到字节：**

下面的代码不适用于“0”。

```
public byte[] hexStrToByteArray(String s) {
    int leng = s.length();
    byte[] data = new byte[leng / 2];
    for (int i = 0; i < leng; i += 2) {
        data[i / 2] = (byte) ((Character.digit(s.charAt(i), 16) << 4)
                             + Character.digit(s.charAt(i+1), 16));
    }
    return data;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T04:38:42.220

您可以使用以下两种方法

```
 public static synchronized String bytesToHex(byte [] buf){
        StringBuffer strbuf = new StringBuffer(buf.length * 2);
        int i;
        for (i = 0; i < buf.length; i++) {
            if (((int) buf[i] & 0xff) < 0x10){
                strbuf.append("0");
            }
            strbuf.append(Long.toString((int) buf[i] & 0xff, 16));
        }
        return strbuf.toString();
    }

    public synchronized static byte[] hexToBytes(String hexString) {
         byte[] b = new BigInteger(hexString,16).toByteArray();     
         return b;
    } 
```

# sugarcrm - 需要在 SugarCRM 中的对话框中添加自定义 JavaScript

> ID：11822404
> 
> 赞同：0
> 
> 时间：2012-08-06T03:56:41.677
> 
> 标签：sugarcrm

我需要一些有关 SugarCRM 6.5 CE 自定义模块的帮助。这就是我想要的。在联系页面上有一个活动部分。下拉列表有一个选项“撰写电子邮件”。我创建了一些添加新选项的文件。我希望此选项打开相同的撰写电子邮件，然后在发送电子邮件后我想执行一些附加功能。这是我的问题，我已成功添加新选项并使其升级安全并添加 after_save 挂钩来执行附加功能。我遇到的问题是我不知道如何区分常规撰写电子邮件和新的撰写电子邮件选项。

我认为最简单的方法可能是在电子邮件对话框中添加一些新的 javascript，并向服务器发送一个附加参数，表明可以做其他事情。我不知道如何将这个额外的 javascript 合并到撰写电子邮件对话框中。看起来撰写电子邮件对话框的构建方式与其他视图不同。我想我知道如何修改一些核心文件，但我想让它升级安全，所以我不想触及核心。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:22:59.797

我推荐的方法是扩展用于电子邮件撰写的类。您需要在新目录中的文件中添加一个新入口点（查看 SugarCRM 论坛的详细步骤）。这个文件应该扩展基本的电子邮件类，您唯一需要做的就是覆盖保存或发送电子邮件的默认方法（假设这是需要附加功能的地方）。

一旦你有了扩展，你只需修改 URI 以指向这个新的入口点，其他一切都应该相同。

希望这可以帮助！

# javascript - IE 9 中的重复 cookie

> ID：11822407
> 
> 赞同：0
> 
> 时间：2012-08-06T03:56:59.177
> 
> 标签：javascript, internet-explorer, http, cookies

我正在使用（客户端）cookie（在javascript中）来存储用户选择的键/值对，从一个会话到下一个会话以及从一个页面到另一个页面。似乎 Chrome、Safari 和 Firefox 理解一个键只能有一个值，但 IE 采取不同的看法。例如：我有一个功能（“viewMode”），它可以采用以下四个用户可选值之一：-2、-1、0 或 1。当我设置 cookie 时，我给它的到期日期是今天 + 100 天.

```
function setCookie(c_name, value, expireDays) {
    expireDays *= 1;
    var expireDate = new Date();
    expireDate.setDate(expireDate.getDate() + expireDays);
    var c_value = escape(value) + ((expireDays == null) ? "" : "; expires=" + expireDate.toUTCString());
    document.cookie = c_name + "=" + c_value; 
} 
```

默认值为 0。当用户选择值时，比如 1，生成调用

```
setCookie("viewMode", 1, 100); 
```

IE 存储了这两个值，但其他人理解密钥已被覆盖的概念。这是下一次加载的 HTTP GET 的 cookie 组件：

```
Cookie: dispText=FileName; viewMode=0; MultiTrack=0; showClouds=0; smokeTrailLength=256; IGCAltSource=0; HideTracks=0; ColorSpeed=1; showCompass=0; viewMode=1; chosenDirectoryPath=C%3A%5CAlan%5CSTarTraXdata%5CTestTracks; IGCAltSource=1; showCockpitInstruments=0; showJavaOPenPopup=0; dispText=None; smokeTrailLength=-1; PHPSESSID=d96b0827725b1e6e313dcdfddfaed0a0 
```

如您所见，cookie“viewMode”出现了两次，一次为 viewMode=0，一次为 viewMode = 1。所以... cookie 真的是一个键/值对，而 IE 出错了，还是什么？我看过一些帖子暗示 cookie 是键/值/日期三元组，但这似乎在其他地方不受支持，我在 W3C 文档中找不到规范。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T00:58:57.213

这不是答案，但我的问题已通过解决方法解决！我什至试图通过删除 viewMode cookie

```
document.cookie="viewMode =; expires=15/02/2003 00:00:00"; 
```

没有任何成功。

一气之下，我**删除了所有的 IE cookie**，现在一切正常！

似乎“viewMode=1”cookie 是某种怪物（“Cookie Monster”明白了哈哈），它对被更改或删除没有反应。现在我的页面正在按预期愉快地更新 viewMode cookie。

所以我有一个解决方法，但我仍然很想知道到底发生了什么。

# sql - cakephp写SQL语句

> ID：11822416
> 
> 赞同：1
> 
> 时间：2012-08-06T03:58:02.910
> 
> 标签：sql, cakephp

我在使用 cakephp 和编写 sql 查询时遇到问题，我已经写出了 sql 代码，但不确定如何在 cake 中对其进行编码。

```
`users`          - id, name, address
`accounts`       - id, companyname, abn
`accounts_users` - id, account_id, user_id
`templates`      - id, name, description, account_id
`fields`         - id, name, description, template_id 
```

*   用户 habtm 帐户
*   账户 habtm 用户
*   帐户有许多模板
*   模板属于帐户
*   模板有很多字段
*   字段属于模板

**我试图在字段控制器中获取我的 find 语句，添加 template_id 字段就是这样做**

```
select t.id
from  template.t, account_users.au, user.u
where t.account_id=au.account_id AND
au.user_id=users.id; 
```

这是到目前为止我在控制器字段中的代码：

```
function add() {
    $this->Session->setFlash("Please create your required fields.");
    $templates = $this->Template->find('list', array(
        'fields' => array('id'),
        'conditions' => array('id'=> $this->Auth->user('id'))));
    $this->set('templates','$templates');

    if($this->request->is('post')) {
        $this->Field->create(); 

        if ($this->Field->save($this->request->data)) {     
            if ($this->request->data['submit'] == "type_1") { 
                $this->Session->setFlash('The field has been saved');  
                $this->redirect(array(
                    'controller' => 'fields',
                    'action' => 'add'));
            } 
            if ($this->request->data['submit'] == "type_2") {
                $this->Session->setFlash('The template has been saved'); 
                $this->redirect( array('controller' => 'templates','action' => 'index'));
            }
        } else {
            $this->Session->setFlash('The field could not be saved. Please, try again.'); 
        }
    }
} 
```

它当前正在打印的 sql 语句是

```
SELECT `Template`.`id` FROM `pra`.`templates` AS `Template` WHERE `id` = 14 
```

`id`指的是`users`表ID

**错误是我试图在添加表单中获取 template_id。查找函数没有获取模板 ID，而是获取用户 ID**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:06:49.447

我认为您的字段名称有问题。它们是否符合代码/名称约定？请张贴模型的表格布局。

如果 template_id 是您应该使用的表模板的主键：

```
public $primaryKey = 'template_id'; 
```

在您的模板模型中。 [http://book.cakephp.org/2.0/en/models/model-attributes.html#primarykey](http://book.cakephp.org/2.0/en/models/model-attributes.html#primarykey)

和offcourse你得到你的要求。查询应该更像：

```
$templates = $this->Template->find('list', array(
    'fields' => array('Template.template_id'),
    'conditions' => array('User.id'=> $this->Auth->user('id')))); 
```

但是，如果没有您确切的表格布局，这很难说。

# python - 尝试安装 Django 时出现语法错误

> ID：11822417
> 
> 赞同：2
> 
> 时间：2012-08-06T03:58:14.357
> 
> 标签：python, django, installation

我是 Python 的新手，一直在尝试在我的服务器上安装 Django 框架。对于这个问题，我似乎无法在网上任何地方找到答案，甚至找不到正确方向的提示。

我在 LiquidWeb 上有一个 VPS，我正在尝试在该服务器上安装。我一直在关注 Django 安装指南：[https ://docs.djangoproject.com/en/1.4/topics/install/#installing-official-release](https://docs.djangoproject.com/en/1.4/topics/install/#installing-official-release)

我正在尝试安装稳定版本，而不是开发版本，并尝试手动安装和通过 PIP 安装 - 两者都给我同样的错误，如下所列：

root@host [/]# sudo pip install Django

下载/解压 Django

下载 Django-1.4.1.tar.gz (7.7Mb)：下载了 7.7Mb

为包 Django 运行 setup.py egg_info

```
Traceback (most recent call last):

  File "<string>", line 14, in ?

  File "/build/Django/setup.py", line 69, in ?

    version = __import__('django').get_version()

  File "django/__init__.py", line 15

    parts = 2 if version[2] == 0 else 3

               ^
SyntaxError: invalid syntax 
```

* * *

命令 python setup.py egg_info 在 /build/Django 中失败，错误代码 1 在 /root/.pip/pip.log 中存储完整日志

我正在使用 Python 2.4.3 并尝试安装 Django 1.4.1。

任何帮助将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T04:03:30.637

等等，你使用的是 Python 2.4？！[Django 1.4 放弃了对 2.4 的支持](https://docs.djangoproject.com/en/1.4/releases/1.4/)。你必须升级 Python 才能让它工作。如果要升级，不妨使用最新的 Python 2 版本 (2.7)。

错误的确切原因是安装脚本使用了三元条件运算符（`true_expr if cond else false_expr`），我认为它是在 Python 2.5 中引入的。虽然您可以通过编辑脚本来解决它，但类似的事情可能会遍布 Django 代码库，因此您必须向后移植整个框架。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-16T08:55:44.577

让我猜猜~

也许错误与您的 Django 或 python 版本无关。

如果你得到了正确的版本。这仍然会发生。

该问题可能是由您的 mod_wsgi 引起的。

运行这个：

```
ldd /usr/lib/httpd/modules/mod_wsgi.so 
```

如果返回此 'libpython2.4.so.1.0 => /usr/lib/libpython2.4.so.1.0 (0x00b32000)'

```
linux-gate.so.1 =>  (0x00da0000)
        libpython2.4.so.1.0 => /usr/lib/libpython2.4.so.1.0 (0x00b32000)
        libpthread.so.0 => /lib/libpthread.so.0 (0x00d7b000)
        libdl.so.2 => /lib/libdl.so.2 (0x007cf000)
        libutil.so.1 => /lib/libutil.so.1 (0x00f6f000)
        libm.so.6 => /lib/libm.so.6 (0x0086e000)
        libc.so.6 => /lib/libc.so.6 (0x00150000)
        /lib/ld-linux.so.2 (0x00133000) 
```

您需要使用参数“--with-python=/usr/local/bin/python2.7”重新编译您的 mod_wsgi.so

# java - 使用来自 JavaScript 的参数运行 .jar 文件

> ID：11822418
> 
> 赞同：4
> 
> 时间：2012-08-06T03:58:19.743
> 
> 标签：java, javascript

> **可能重复：**
> [在 java 程序中执行另一个 jar](https://stackoverflow.com/questions/1320476/execute-another-jar-in-a-java-program)

我有一个可执行的 jar 文件，它接受两个参数：一个输入文件和一个输出文件：

```
java -jar inputFile.txt outputFile.txt 
```

我怎样才能从 JavaScript 中准确地调用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T05:29:39.427

答案取决于上下文。

*   如果您的 javascript 在 Web 浏览器沙箱中运行，那么答案是您无法运行 JAR 文件。沙盒旨在阻止您做这种事情。

*   如果您的 javascript 在 node.js 下运行，那么这个 SO Q&A 提供了运行命令问题的解决方案： [如何在 javascript 中运行系统命令？](https://stackoverflow.com/questions/5321884/how-do-i-run-the-system-commands-in-javascript). 这可用于运行`java`带有适当参数的命令。

*   如果您的 javascript 是在带有 Java 插件的浏览器中运行的受信任代码，那么您*可以*调用以适当的方式`java.lang.System.exec(...)`传递适当的`java`命令行。您*还*可以创建一个类加载器，读取 JAR 文件的清单，提取入口点类，加载它，然后调用“main”方法。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-08-06T04:15:03.300

```
java -jar executable.jar inputFile.txt outputFile.txt 
```

有关更多详细信息，请参阅[java 命令概要](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html#synopsis)：

**概要**

*   java [选项]类[参数...]
*   **java [选项] -jar file.jar [参数...]**
*   javaw [选项]类[参数...]
*   javaw [选项] -jar file.jar [参数...]

# c - 为什么 fork() 的返回值在 C 中有 2 个 pid 值？

> ID：11822423
> 
> 赞同：0
> 
> 时间：2012-08-06T03:59:25.423
> 
> 标签：c, process, fork

> **可能重复：**
> [fork() 怎么可能返回两个值？](https://stackoverflow.com/questions/4207656/how-is-it-possible-for-fork-to-return-two-values)

我是 C 新手，我对`fork()`函数的返回值结构感到困惑。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main(){
  pid_t childPid;
  childPid = fork();
  printf("%d\n",childPid);
  return EXIT_SUCCESS;
} 
```

输出是：

```
28501
0 
```

由于`pid_`t 是一种`int`类型，那么 t 如何`childPid`具有 2 个值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T04:02:35.443

您实际上看到了可执行文件的两个副本的输出。当您调用 时`fork()`，该进程会克隆自身，从而提供两个进程。父进程获取子进程的PID作为返回值，子进程获取0作为返回值。

诀窍是，克隆*共享*STDIN、STDOUT 和 STDERR。当父进程到达 printf 时，它会像子进程一样打印它的值，因此您会看到两个 PID，两个进程共享相同的 STDOUT——在您的程序中没有明显的方法可以区分它们。

尝试将其重写为：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main(){
  pid_t childPid;
  childPid = fork();
  if(childPid != 0)
      printf("I'm the parent and my child PID is %d\n",childPid);
  else
      printf("\tI'm the child, so I received  %d\n",childPid);

  return EXIT_SUCCESS;
} 
```

你会更清楚地看到这一点。

为了获得额外的功劳，请查看`wait()`系统调用，并使用它使父级在子级之后终止。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-06T04:02:37.237

成功后`fork`，您有两个进程，父进程（forker）和子进程。新创建的进程子进程的返回值为`0`. 这是孩子的信号。

因此，您看到父进程打印子进程的实际 pid，子进程正在打印`0`。这按预期工作，除非我在你的问题中遗漏了什么？

# android - 在 Android 上实现 JKalman

> ID：11822424
> 
> 赞同：8
> 
> 时间：2012-08-06T03:59:31.857
> 
> 标签：android, accelerometer, sensors, android-sensors, kalman-filter

有很多关于从加速度计数据、其他传感器数据中去除噪声、计算时空状态以及在 Android 和其他设备中使用卡尔曼滤波器的问题。

显然，最简单的方法是在 Android 上为稳定的移动设备（例如汽车）实施 JKalman 过滤器。

但是看JKalman代码包中的示例实现，并没有说太多，实际上和其他的Kalman实现有很大的不同。

他们像这样实例化一个 Kalman 类：

```
JKalman kalman = new JKalman(4, 2); 
```

根据定义在哪里

```
public JKalman(int dynam_params, int measure_params) throws Exception {
    this(dynam_params, measure_params, 0);
} 
```

`dynam_params`是*“测量向量维数”*，`measure_params`是*“状态向量维数”*。

Android中读取的传感器数据应该如何映射到这些？

下面是来自加速度计的数据，每 500 毫秒采样一次。在其他听众中，有来自陀螺仪和指南针的数据。我应该如何将这些数据转换为卡尔曼的输入？

```
 @Override
    public void onSensorChanged(SensorEvent event) {
        actualTime = System.currentTimeMillis();
        if(actualTime - lastUpdateAcc < 500)
            return;
        else{
            lastUpdateAcc = actualTime;
            //update myPosition
            TextView tv = (TextView)findViewById(R.id.textView3);
            tv.setText(String.format("X: %8.4f -- Y: %8.4f -- Z: %8.4f",
                    event.values[0], event.values[1], event.values[2]));
            //draw on the screen

            //draw new path, if one exists
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-25T12:35:06.057

这就是我使用 2 个变量（GPS：LAT，LON）的方式：

```
import jkalman.JKalman;
import jama.Matrix;

public class KalmanFilter {
    private int variables;
    private JKalman kalman;
    private Matrix s; // state [x, y, dx, dy, dxy]
    private Matrix c; // corrected state [x, y, dx, dy, dxy]
    private Matrix m; // measurement [x]

    /*
     * Inicializa el filtro kalman con 2 variables
     */
    public void initialize2() throws Exception{
        double dx, dy;

        if(variables != 0){
             throw new RuntimeException();
        }
        variables = 2;
        kalman = new JKalman(4, 2);

        // constant velocity
        dx = 0.2;
        dy = 0.2;

        s = new Matrix(4, 1); // state [x, y, dx, dy, dxy]        
        c = new Matrix(4, 1); // corrected state [x, y, dx, dy, dxy]                

        m = new Matrix(2, 1); // measurement [x]
        m.set(0, 0, 0);
        m.set(1, 0, 0);

        // transitions for x, y, dx, dy
        double[][] tr = { {1, 0, dx, 0}, 
                          {0, 1, 0, dy}, 
                          {0, 0, 1, 0}, 
                          {0, 0, 0, 1} };
        kalman.setTransition_matrix(new Matrix(tr));

        // 1s somewhere?
        kalman.setError_cov_post(kalman.getError_cov_post().identity());

    }

    /*
     * Aplica Filtro a variables
     */
    public void push(double x,double y) throws Exception{
         m.set(0, 0, x);
         m.set(1, 0, y);

         c = kalman.Correct(m);
         s = kalman.Predict();
    }

    /*
     * obtiene arreglo con datos filtrados.
     */
    public double[] getKalmanPoint2() throws Exception{
        double[] point = new double[2];
        point[0] = c.get(0,0);
        point[1] = c.get(1,0);
        return point;
    }

    /*
     * obtiene arreglo con prediccion de punto.
     */
    public double[] getPredict2() throws Exception{
        double[] point = new double[2];
        point[0] = s.get(0,0);
        point[1] = s.get(1,0);
        return point;
    }

    /*
     * obtiene cantidad de variables del objeto
     */
    public int getNVariables() throws Exception{
        return this.variables;
    }

} 
```

但我不知道如何设置第一个点，我总是从 (0,0) 开始并取 50 个样本到达该点，循环不是很优雅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T23:25:08.250

看来您需要 3D JKalman 过滤器。你可以试试这个：

```
JKalman kalman = new JKalman(6, 3);

Matrix s = new Matrix(6, 1); // state [x, y, z, dx, dy, dz]        
Matrix c = new Matrix(6, 1); // corrected state
Matrix m = new Matrix(3, 1); // measurement [x, y, z]

// the initial values follow (sorry for programming in stackoverflow):
m.set(0, 0, x);
m.set(1, 0, y);
m.set(2, 0, z);

// transitions for x, y, z, dx, dy, dz (velocity transitions)
double[][] tr = { {1, 0, 0, 1, 0, 0}, 
                  {0, 1, 0, 0, 1, 0}, 
                  {0, 0, 1, 0, 0, 1}, 
                  {0, 0, 0, 1, 0, 0}, 
                  {0, 0, 0, 0, 1, 0}, 
                  {0, 0, 0, 0, 0, 1} };
kalman.setTransition_matrix(new Matrix(tr)); 
```

请按照 KalmanTest.java 中的示例检查是否有错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:31:51.457

您不能仅仅因为陀螺仪噪音太大[而制作通用的位置跟踪应用程序。](https://stackoverflow.com/a/7835988/341970)（是的，陀螺仪而不是加速度计。）

至于室内定位，另见上述链接。

# javascript - RaphaelJS 中用于图论图的标记节点

> ID：11822427
> 
> 赞同：2
> 
> 时间：2012-08-06T04:00:35.553
> 
> 标签：javascript, graph, raphael, graph-theory

我正在尝试 RaphaelJS 来绘制图论风格的图表。例如：

![在此处输入图像描述](../Images/f1da80e6e03e4ecc8cd95e7e2a99c725.png)

虽然在 RaphaelJS 中创建圆/节点很容易，但我还没有弄清楚如何将每个节点与标签相关联（并且在每个节点内都有标签）。

这对 RaphaelJS 可行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T22:58:05.040

我会编写一些代码来使用默认样式管理一系列此类节点，并允许根据需要进行覆盖。

```
// "Constructor" -- accepts a Raphael paper to use as background object and default values for node radius, node style, and label style.
function NodeManager( paper, node_radius, node_style, label_style )
{
    this.paper = paper;
    this.nodes = {};
    this.node_radius = node_radius || 24;
    this.node_style = node_style || { fill: 'white', stroke: 'black', 'stroke-width': 3 };
    this.label_style = label_style || { fill: 'black', stroke: 'none', 'font-family': 'Arial,Helvetica,sans-serif', 'font-size': 32, 'font-weight': 600 };
}

// Add a node to the paper.  
// Code is an arbitrary or symbolic name; 
// x and y are the coordinates the node is centered on; 
// label is the node's textual content (no clipping is performed, so be careful!); 
// node_radius, node_style, and label_style are optional, and can be used to override the appearance of this node.
NodeManager.prototype.addNode = function addNode( code, x, y, label, node_radius, node_style, label_style )
{
    var node = this.paper.circle( x, y, node_radius || this.node_radius ).attr( node_style || this.node_style );
    var label_object = this.paper.text( x, y, label ).attr( label_style || this.label_style );
    this.nodes[code] =
        {
            x: x,
            y: y,
            r: node_radius || this.node_radius,
            node: node,
            label: label_object
        };
}

// Connect the nodes corresponding to the two given codes.  connection_style can be used to override the appearance of the connective link, but the default node_style will be used if it isn't specified.
NodeManager.prototype.connectNodes = function connectNodes( code1, code2, connection_style )
{  
    var angle = Math.atan2(this.nodes[code2].y - this.nodes[code1].y, this.nodes[code2].x - this.nodes[code1].x );      //  this will be the angle from point to point
    var inverse_angle = angle + Math.PI;

    ox1 = this.nodes[code1].x + Math.cos( angle ) * this.nodes[code1].r;
    oy1 = this.nodes[code1].y + Math.sin( angle ) * this.nodes[code1].r;

    ox2 = this.nodes[code2].x + Math.cos( inverse_angle ) * this.nodes[code2].r;
    oy2 = this.nodes[code2].y + Math.sin( inverse_angle ) * this.nodes[code2].r;

    var pathstr = "M" + ox1 + "," + oy1 + " L" + ox2 + "," + oy2;

    var path = this.paper.path( pathstr ).attr( connection_style || this.node_style );
} 
```

看看[这个小提琴](http://jsfiddle.net/kevindivdbyzero/L4A2F/)看看结果的一个小例子。

# pdf - 与逻辑 PDF 相比，标记 PDF 在回流中有什么好处

> ID：11822428
> 
> 赞同：2
> 
> 时间：2012-08-06T04:00:39.713
> 
> 标签：pdf, tags, reflow

我正在制作 PDF 查看器并尝试进行重排。我阅读了 PDF 参考 1.7

[http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/pdf/pdfs/pdf_reference_1-7.pdf](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/pdf/pdfs/pdf_reference_1-7.pdf)

当我阅读“逻辑结构”（10.6）部分时，我认为制作回流PDF就足够了。因为我可以提取每个章节、每个标题、每个带有布局的段落，我可以将它们放在 xml 中以通过 javascript 回流呈现为 web 显示。

然后我阅读了“Tagged PDF”（10.7）部分，它说它支持回流，与“逻辑结构”相比，我不知道这里有什么不同的好处。谁能解释我？

非常感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:35:41.497

它们都是相关的，逻辑结构是文档级别的树，其中每个节点可能（或可能不）具有对页面中标记内容（标签）的引用。标记内容或标签将真正告诉您页面的哪一部分是段落、图形或其他内容。逻辑结构树只是文档的结构，但仅使用它您将无法处理每个页面的内容。

# c# - 反序列化和 XML 的问题

> ID：11822429
> 
> 赞同：0
> 
> 时间：2012-08-06T04:00:58.327
> 
> 标签：c#, xml, visual-studio-2010, deserialization, xml-deserialization

我正在使用 Visual Studio 2010(c#)，但我的 XML 反序列化代码存在一些问题。我无法让它正确读取我的 XML。

我的 XML 内容如下：

```
<?xml version="1.0" encoding="utf-8"?>
<command_strings version="1">
  <commands>
    <command cmd_id="1" state_id="1" label="On" cmd_type="fixed" cmd_string="1%0D" />
    <command cmd_id="1" state_id="3" label="Off" cmd_type="fixed" cmd_string="0%0d" />
  </commands>
</command_strings> 
```

我的代码如下所示：

```
[Serializable()]
public class Command
{
    [System.Xml.Serialization.XmlAttribute("cmd_id")]
    public int cmd_id { get; set; }

    [System.Xml.Serialization.XmlAttribute("state_id")]
    public int state_id { get; set; }

    [System.Xml.Serialization.XmlAttribute("label")]
    public string label { get; set; }

    [System.Xml.Serialization.XmlAttribute("cmd_type")]
    public string cmd_type { get; set; }

    [System.Xml.Serialization.XmlAttribute("cmd_string")]
    public string cmd_string { get; set; }
}

[Serializable()]
[System.Xml.Serialization.XmlRoot("commands")]
public class CommandCollection
{
    [XmlArray("commands")]
    [XmlArrayItem("command", typeof(Command))]
    public Command[] Command { get; set; }
}

public void XMLStrings(string myXML)
{
    CommandCollection commandscollection = null;
    XmlSerializer dserial = new XmlSerializer(typeof(CommandCollection));

    StreamReader streamReader = new StreamReader(@"C:\123.xml");
    commandscollection = (CommandCollection)dserial.Deserialize(streamReader);
    streamReader.Close();
} 
```

知道我可能缺少什么吗？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T04:31:36.410

类`CommandCollection`应该用属性标记`[System.Xml.Serialization.XmlRoot("command_strings")]`。您还应该为它添加一个属性`version`并用属性标记它`XmlAttribute`。

# iphone - 在子类中添加更多 CTParagraphStyleSetting

> ID：11822436
> 
> 赞同：0
> 
> 时间：2012-08-06T04:02:25.660
> 
> 标签：iphone, ios, cocoa-touch, core-graphics, core-text

我有一个应用程序，我使用`CoreText`库来格式化一些文本。我使用以下设置样式设置：

```
- (void) setAttributes
{
    CTTextAlignment alignment = self.alignment;
    CGFloat spacing = self.spacing;

    CTParagraphStyleSetting paragraphSettings[] =  
    {
        {kCTParagraphStyleSpecifierAlignment, sizeof(CTTextAlignment), &alignment}, 
        {kCTParagraphStyleSpecifierLineSpacing, sizeof(CGFloat), &spacing},
    };

    CTParagraphStyleRef paragraphStyle = CTParagraphStyleCreate(paragraphSettings, 2);
    [self.text addAttribute:(NSString*)kCTParagraphStyleAttributeName value:(id)paragraphStyle range:NSMakeRange(0, [self.text.mutableString length])];
} 
```

然后我有一个子类，它有一些不同的功能，需要添加更多的段落样式设置：

```
- (void) setAttributes
{
    [super setAttributes];
    CGFloat firstLineHeadIndent = 11, headIndent = 11, tailIndent = -11, paragraphSpacing = 0, paragraphSpacingBefore = 0;

    CTParagraphStyleSetting paragraphSettings2[] =  
    {
        {kCTParagraphStyleSpecifierFirstLineHeadIndent, sizeof(CGFloat), &firstLineHeadIndent},
        {kCTParagraphStyleSpecifierHeadIndent, sizeof(CGFloat), &headIndent},
        {kCTParagraphStyleSpecifierTailIndent, sizeof(CGFloat), &tailIndent},
        {kCTParagraphStyleSpecifierParagraphSpacing, sizeof(CGFloat), &paragraphSpacing},
        {kCTParagraphStyleSpecifierParagraphSpacingBefore, sizeof(CGFloat), &paragraphSpacingBefore}
    };

    CTParagraphStyleRef paragraphStyle2 = CTParagraphStyleCreate(paragraphSettings2, 5);
    [self.text addAttribute:(NSString*)kCTParagraphStyleAttributeName value:(id)paragraphStyle2 range:NSMakeRange(0, [self.text.mutableString length])];
} 
```

问题在于它不起作用，因为第二组`CTParagraphStyleSetting's`覆盖了第一组。这样做的正确方法是什么，我尝试了很多事情，`paragraphStyles`单独进行，并将属性单独添加到`attributedString`，但无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:32:18.220

当您调用 super 时，您已经将段落样式设置设置为属性。再次获取相同的属性，用这些设置构造一个新的段落样式，根据需要用新值覆盖一些设置，最后将这个新的段落样式设置为一个属性。

# c++ - 无法解析外部符号

> ID：11822440
> 
> 赞同：0
> 
> 时间：2012-08-06T04:03:00.350
> 
> 标签：c++, dll, unresolved-external

我在编译我的 DLL 项目时得到了这个：

> 错误 1 ​​错误 LNK2019：未解析的外部符号“public: unsigned char * __thiscall CDetour::GetThisPtr(void)”(?GetThisPtr@CDetour@@QAEPAEXZ) 在函数“void __stdcall zCharacter_OnDamagedHook(struct ZObject *,struct D3DXVECTOR3,int,int ,float,float,int)" (?zCharacter_OnDamagedHook@@YGXPAUZObject@@UD3DXVECTOR3@@HHMMH@Z) C:\Users\Andrés\Documents\Visual Studio 2010\Projects\2k7_A-H\2k7_A-H\AntiLead.obj 2k7_A -H

我使用“zCharacter_OnDamagedHook”的地方在这里：

```
void __stdcall zCharacter_OnDamagedHook(ZObject* pAttacker, D3DXVECTOR3 srcPos, int damageType, int weaponType, float fDamage, float fPiercingRatio, int nMeleeType) {
    zCharacter_OnDamagedDetour.Ret(true);
    std::string channelName = ZGameClient::GetInstance()->CurrentChannel;
    ZCharacter* victim = (ZCharacter*)zCharacter_OnDamagedDetour.GetThisPtr();
    ZCharacter* attacker = (ZCharacter*)pAttacker;
    ZCharacter* me = (ZCharacter*)ZGame::GetInstance()->pMyCharacter;
    if ((channelName.find("[No-Lead]") == std::string::npos) && (channelName.find("[No-Lead]") == std::string::npos)) {
        ZCharacterManager* charm = ZCharacterManager::GetInstance();
        if (((attacker == me) && (victim != me)) && (damageType != 5) && (damageType != 1) && (damageType != 2)) {
            zCharacter_OnDamagedDetour.Ret(false);
            MUID uidVictim;
            for (unsigned int i = 0; i < muidList.size(); ++i) {
                if (charm->Find(muidList[i]) == victim) {
                    uidVictim = muidList[i];
                    break;
                }
            }
            MCommand* pCmd = MCommand::Create(0xD3D9);
            pCmd->AddParameter(new MCommandParameterInt(uidVictim.lowId));
            pCmd->AddParameter(new MCommandParameterFloat(srcPos.x));
            pCmd->AddParameter(new MCommandParameterFloat(srcPos.y));
            pCmd->AddParameter(new MCommandParameterFloat(srcPos.z));
            pCmd->AddParameter(new MCommandParameterInt(damageType));
            pCmd->AddParameter(new MCommandParameterInt(weaponType));
            pCmd->AddParameter(new MCommandParameterFloat(fDamage));
            pCmd->AddParameter(new MCommandParameterFloat(fPiercingRatio));
            pCmd->AddParameter(new MCommandParameterInt(nMeleeType));
            MCommand::Post(pCmd);
        } 
```

我真的不知道我做错了什么，而且我以前也没有遇到过这个错误，所以我希望有人能帮助我，提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T04:06:23.753

您的`CDetour`类已声明成员函数`GetThisPtr`，但您的源 (.cpp) 文件均未提供定义。

由于您没有显示任何代码，因此无法进一步评论。

# ibm-midrange - 是什么杀死了我的 MQ 通道？

> ID：11822442
> 
> 赞同：1
> 
> 时间：2012-08-06T04:03:07.423
> 
> 标签：ibm-midrange, ibm-mq

我们有一个进程在我们关闭 iSeries 服务器时定期运行。它执行以下（特定于 iSeries，但您可以知道 MQSC 命令是什么）命令：

```
RCDMQMIMG  OBJ(*ALL) OBJTYPE(*ALL) DSPJRNDTA(*YES)
ENDMQMCSVR MQMNAME(IA001.QUEUE.MANAGER)
ENDMQM     MQMNAME(IA001.QUEUE.MANAGER)
DLYJOB     DLY(120)                    
ENDMQMLSR  MQMNAME(IA001.QUEUE.MANAGER) 
```

通常这运行没有问题，但在最后一次，六个频道中有五个立即正常结束，而第六个频道在大约 75 秒后异常结束。

从通道作业的日志来看，这两条消息是连续的（即没有中间问题）：

```
23/07/12  08:26:44.033529  LIBMQMCS_R   QMQM        *STMT    QCMD        QSYS        01C8
From module . . . . . . . . :   AMQXEIMX_R                                                  
From procedure  . . . . . . :   xcsSendMessage                                              
Statement . . . . . . . . . :   38                                                          
Message . . . . :   Channel 'IA001.TO.ISPRO' is starting.                                   
Cause . . . . . :   Channel 'IA001.TO.ISPRO' is starting.  Recovery  . . . :                
None.  Technical Description . . . . . . . . :   None.                                    

04/08/12  21:11:28.872098  QWTPITP2     QSYS        061A     *EXT                    *N  
Message . . . . :   Job ended abnormally.                                                   
Cause . . . . . :   A SIGKILL signal was received for the job. The action for               
the signal was to terminate the job. 
```

请注意，ENDMQM 不使用 *WAIT 来等待队列管理器结束（默认 *CNTRLD 正在运行），但我认为在这种情况下不会有帮助，因为我找不到任何证据表明任何其他进程本可以叫停诉讼程序。通道作业的强制结束发生在手动插入代码的 120 秒延迟内（我知道，我们应该使用 *WAIT，但这段代码很旧）。

我认为在队列管理器结束时假设通道正在处理消息也许是合理的 - 否则为什么会在下一个操作之前经过 75 秒？似乎 *CNTRLD 选项有一个隐含的超时，尽管我在文档中的任何地方都看不到这个讨论。要么是那个，要么是其他的干预。但是什么？

ENDSBS *ALL 确实紧随其后，但我已经证明那是在频道死后几分钟。

这为以后创建的有趣场景是，当队列管理器重新启动时，发出一个错误，说明通道已经在运行，但通道作业的显示与正常情况完全一样，在日志中显示“通道启动”，确实是运行良好。

任何关于可能涉及什么外力或是否有超时的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:41:03.050

这有几个可能的原因。该通道似乎是一个出站通道，并且当 QMgr 关闭时它可能处于阻塞网络调用中。或者，它可以在批处理的中间并在另一边等待响应。如果对方暂停或连接中断，则通道可能会在等待响应时出现挂起。

如果侦听器仍在运行，入站通道通常很难停止。如果对方有消息要发送并启用触发，它将立即尝试重新启动通道。该请求命中启动进程的侦听器。由于 QMgr 正在关闭，通道无法完成它`CONNECT`，但在短时间内有一个通道进程正在运行。

无论是入站还是出站，QMgr 最终都会杀死不会自行关闭的进程。这应该不是问题，因为通道将协商有序重启，尽管它确实会在日志中留下一些错误。

调整所有这些因素包括 TCP Keepalive、、、`HBINT`通道`DISCINT`重试参数和采用 MCA 参数。

# ruby-on-rails - 是什么导致 Ruby on Rails 中的字符串出现此未定义的方法错误？

> ID：11822447
> 
> 赞同：1
> 
> 时间：2012-08-06T04:04:06.417
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, string

在[这个 Ruby on Rails 助手](https://github.com/mwilliams/d2s3)中，有以下方法：

```
# Convert an 8-bit or 16-bit string to an array of big-endian words
# In 8-bit function, characters >255 have their hi-byte silently ignored.
def str2binb(str)
    bin = []
    mask = (1 << $chrsz) - 1
    #for(var i = 0; i < str.length * $chrsz; i += $chrsz)
    i = 0
    while(i < str.length * $chrsz)
        bin[i>>5] ||= 0
        p 'i'
        p i
        p '$chrsz'
        p $chrsz
        p 'str[i / $chrsz]'
        p str[i / $chrsz]
        p 'mask'
        p mask
        bin[i>>5] |= (str[i / $chrsz] & mask) << (32 - $chrsz - i%32)
        i += $chrsz
    end
    return bin
end 
```

运行时，出现此错误就`bin[i>>5] |= (str[i / $chrsz] & mask) << (32 - $chrsz - i%32)`行了：

```
ActionView::Template::Error (undefined method `&' for "J":String) 
```

我不明白`&`在这种情况下如何使用。如何解决此错误？我正在使用 Rails 3.2.0 和 Ruby 1.9.2。

这是日志记录输出：

```
"i"
0
"$chrsz"
8
"str[i / $chrsz]"
"J"
"mask"
255 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T04:16:00.497

我的猜测是该脚本在 Ruby 1.8 上运行，但在 Ruby 1.9 中失败，因为 Ruby1.9`b`在访问时输出，`"bla"[0]`而不是像过去在 Ruby1.8 中那样输出 char 的 ASCII 值。

您应该可以通过以下方式替换有问题的行：

```
bin[i>>5] |= (str.getbyte(i / $chrsz) & mask) << (32 - $chrsz - i%32) 
```

或`ord`改用：

```
bin[i>>5] |= (str[(i / $chrsz)].ord & mask) << (32 - $chrsz - i%32) 
```

# optimization - 关于lucene searcher优化器~

> ID：11822448
> 
> 赞同：0
> 
> 时间：2012-08-06T04:04:09.060
> 
> 标签：optimization, lucene

我使用lucene3.6版本设计了一个Searcher。但是搜索我的索引太慢了。我想知道如何优化我的searcher程序。谢谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:02:19.087

[http://wiki.apache.org/lucene-java/ImproveSearchingSpeed](http://wiki.apache.org/lucene-java/ImproveSearchingSpeed)

# php - SQL 从搜索中返回某些数据

> ID：11822452
> 
> 赞同：0
> 
> 时间：2012-08-06T04:04:53.300
> 
> 标签：php, mysql

我正在尝试为 garrysmod 创建一个自动汇款系统。我有一个类似这样的表格：（对不起表格，HTML 不合作。

```
STEAMID                Name          wallet
STEAM 0 0 123456       ImNotLoved    $123456
STEAM 0 1 123456       ImAmLoved     $543214 
```

我有一个搜索框，您可以在其中输入您的信息`steamID`，我希望它搜索输入的 STEAM ID 并返回您当前的资金。因此，例如，如果我输入我的 Steam ID，它将在下一页返回 ImNotLoved，您目前在您的帐户中有 123456 美元。我掌握了所有的显示知识，我只需要一种从 MySQL 获取信息的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T04:23:39.310

html:

```
<form method="post" action="blah.php" enctype="multipart/form-data">
     Enter Steam Id: <input type="text" name="id">
     <input type="submit">
<form> 
```

废话.php：

```
$id=$_POST['id'];
$bal=mysql_query("select wallet from tablename where STEAMID = ".$id);
$balance=mysql_fetch_row($bal);
$name=mysql_query("select Name from tablename where STEAMID = ".$id);
$nam=mysql_fetch_row($name);
echo "Welcome ".$nam['Name']."! You currently have ".$balance['wallet']." in your account"; 
```

# android - 带有删除按钮的微调器使项目被禁用

> ID：11822459
> 
> 赞同：0
> 
> 时间：2012-08-06T04:06:33.850
> 
> 标签：android, spinner, android-spinner

我的活动中有一个微调器。当用户单击下拉按钮时，我需要显示文本和删除按钮。

所以我写了自定义数组适配器，它渲染正确。但是我只能单击删除按钮，然后单击事件上的删除按钮。正如预期的那样，但是当我单击文本时我无法再选择该项目。除删除按钮单击外，所有行均被禁用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:51:05.360

```
//CUSTOM SPINNER ADAPTER
public class CardListAdapter extends ArrayAdapter<Card> {
private Context appContext = null;
private ArrayList<Card> items = null;

public CardListAdapter(Context context, int textViewResourceId,
        ArrayList<Card> items) {
    super(context, textViewResourceId, items);
    this.appContext = context;
    this.items = items;
}

@Override
public View getDropDownView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    return getCustomView(position, convertView, parent);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    View v = convertView;
    if (v == null) {
        LayoutInflater vi = (LayoutInflater) appContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.card_simple_list, null);
    }

    final Card o = items.get(position);
    if (o != null) {

        TextView name = (TextView) v.findViewById(R.id.card_Name);

        if (name != null) {
            name.setText(o.getName());
        }
    }
    return v;

}

public View getCustomView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
    if (v == null) {
        LayoutInflater vi = (LayoutInflater) appContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.card_list, null);
    }

    final Card o = items.get(position);
    if (o != null) {

        TextView name = (TextView) v.findViewById(R.id.card_Name);

        ImageButton btnDelete = (ImageButton) v
                .findViewById(R.id.card_Delete);

        btnDelete.setOnClickListener(new OnClickListener() {

            public void onClick(View view) {
                items.remove(o);
                notifyDataSetChanged();
            }
        });

        if (name != null) {
            name.setText(o.getName());
        }
    }
    return v;
}

} // end custom adapter} 
```

# ruby - 在 ruby 中创建任意深度的嵌套循环

> ID：11822464
> 
> 赞同：3
> 
> 时间：2012-08-06T04:07:53.957
> 
> 标签：ruby

我想编写一个 ruby​​ 程序，它可以在任意数量的维度上跨越空间。

在 3 个维度上，我正在做的事情如下所示：

```
x_range = (-1..1)
y_range = (-1..1)
z_range = (-1..1)

step_size = 0.01

x_range.step(step_size) do |x|
  y_range.step(step_size) do |y|
    z_range.step(step_size) do |z|

      # do something with the point x,y,z

    end  
  end
end 
```

我想对`n`尺寸做同样的事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:02:42.120

这是我首先想到的：

```
def enumerate(nDimens, bottom, top, step_size)
  bottom = (bottom / step_size).to_i
  top    = (top    / step_size).to_i

  range = (bottom..top).to_a.map{ |x| x * step_size }
  return range.repeated_permutation(nDimens)
end

stepper = enumerate(4, -1, 1, 0.1)

loop do
  puts "#{stepper.next()}"
end 
```

这会产生：

```
[-1.0, -1.0, -1.0, -1.0]
[-1.0, -1.0, -1.0, -0.9]
[-1.0, -1.0, -1.0, -0.8]
# Lots more...
[1.0, 1.0, 1.0, 0.8]
[1.0, 1.0, 1.0, 0.9]
[1.0, 1.0, 1.0, 1.0] 
```

这假设所有尺寸都具有相同的范围，但如果由于某种原因不成立，则很容易调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T05:55:06.333

递归可以轻松完美地解决此类问题。下面的代码适合**任意数量的维度**，以及**各种长度的范围**。

```
def traversal(ranges, step_size, conjunction = [], &blk)
  ranges[0].step(step_size) do |x|
    conjunction.push(x)
    if ranges.size > 1
      traversal(ranges[1..-1], step_size, conjunction, &blk)
    else
      blk.call(conjunction) if block_given?
      conjunction.pop
    end
  end
  conjunction.pop
end 
```

运行：（尺寸 = 4，长度 = 3、3、4、2）

```
x = (1..3)
y = (4..6)
z = (7..10)
w = (100..101)
test_data = [x, y, z, w]
step_size = 1

traversal(test_data, step_size) do |x|
  puts "Point: #{x.join('-')}"
end 
```

输出：（共72点，即3 * 3 * 4 * 2）

```
Point: 1-4-7-100
Point: 1-4-7-101
Point: 1-4-8-100
Point: 1-4-8-101
Point: 1-4-9-100
Point: 1-4-9-101
Point: 1-4-10-100
Point: 1-4-10-101
Point: 1-5-7-100
Point: 1-5-7-101
Point: 1-5-8-100
Point: 1-5-8-101
Point: 1-5-9-100
Point: 1-5-9-101
Point: 1-5-10-100
Point: 1-5-10-101
Point: 1-6-7-100
Point: 1-6-7-101
Point: 1-6-8-100
Point: 1-6-8-101
Point: 1-6-9-100
Point: 1-6-9-101
Point: 1-6-10-100
Point: 1-6-10-101
Point: 2-4-7-100
Point: 2-4-7-101
Point: 2-4-8-100
Point: 2-4-8-101
Point: 2-4-9-100
Point: 2-4-9-101
Point: 2-4-10-100
Point: 2-4-10-101
Point: 2-5-7-100
Point: 2-5-7-101
Point: 2-5-8-100
Point: 2-5-8-101
Point: 2-5-9-100
Point: 2-5-9-101
Point: 2-5-10-100
Point: 2-5-10-101
Point: 2-6-7-100
Point: 2-6-7-101
Point: 2-6-8-100
Point: 2-6-8-101
Point: 2-6-9-100
Point: 2-6-9-101
Point: 2-6-10-100
Point: 2-6-10-101
Point: 3-4-7-100
Point: 3-4-7-101
Point: 3-4-8-100
Point: 3-4-8-101
Point: 3-4-9-100
Point: 3-4-9-101
Point: 3-4-10-100
Point: 3-4-10-101
Point: 3-5-7-100
Point: 3-5-7-101
Point: 3-5-8-100
Point: 3-5-8-101
Point: 3-5-9-100
Point: 3-5-9-101
Point: 3-5-10-100
Point: 3-5-10-101
Point: 3-6-7-100
Point: 3-6-7-101
Point: 3-6-8-100
Point: 3-6-8-101
Point: 3-6-9-100
Point: 3-6-9-101
Point: 3-6-10-100
Point: 3-6-10-101 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T04:26:33.933

如果范围不是太大，您可以执行以下操作：

```
n = 5 # 5 dimentions
x = (-1..1).to_a
x.product(*[x]*(n-1)).each {|i| p i} 
```

结果：

```
[-1, -1, -1, -1, -1]
[-1, -1, -1, -1, 0]
[-1, -1, -1, -1, 1]
[-1, -1, -1, 0, -1]
[-1, -1, -1, 0, 0]
[-1, -1, -1, 0, 1]
[-1, -1, -1, 1, -1]
[-1, -1, -1, 1, 0]
[-1, -1, -1, 1, 1]
[-1, -1, 0, -1, -1]
[-1, -1, 0, -1, 0]
# skipped 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T09:47:43.893

这就是你可以做的......这是一个示例迭代器。

```
#next(l[dim] array of lower ranges ,h[dim] = upper ranges, step[dim], dim = dimensions -1, curr[dim] = current state in dim dimensions )
def nextx(l ,h, step, dim, curr)
    x = dim
    update= false
    while (update==false)
        if curr[x] == h[x]
            if x > 0
                x = x-1
            else
                exit
            end

        else
            curr[x]= curr[x]+step[x]
            while (x < dim)
                x = x+1
                curr[x] = l[x]  
            end
            update = true
        end
    end
    return curr
end

l = [0,0,0]
h = [3,3,3]
step = [1,1,1]
currx = [0,0,2]

i = 0
while i < 70
    currx = nextx(l, h, step, 2, currx)
    puts currx.inspect
    i=i+1
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-06T23:02:18.567

这通常在探索搜索空间的算法中遇到。循环从一维`do`范围创建产品空间。

首先将尽可能多的范围打包到一个数组中，例如

```
search_space_1Ds = [x_range.step(step_size).to_a, y_range.step(step_size).to_a, z_range.step(step_size).to_a] 
```

那么以下将适用于任意数量的维度。

```
search_space = search_spaces_1Ds.shift.product(*search_space_1Ds)
search_space.map do |vec|
  # calculate something with vec
end 
```

这个实现不仅简洁，而且非常清楚你的算法在做什么；通过创建为一维搜索空间的乘积空间的搜索空间进行枚举。

# sql - 本月 SQL 查询转换

> ID：11822467
> 
> 赞同：-2
> 
> 时间：2012-08-06T04:08:25.423
> 
> 标签：sql, sql-server

下面的查询以小写的月份返回日期，我需要大写的月份，任何帮助将不胜感激。当前为 2012 年 8 月 8 日，我需要 2012 年 8 月 8 日。

```
Select 
    RTrim(Right(MTRL.MTRL_NBR, 9)) As MTRL_NBR, 
    RTrim(PROD_ORDR.PROD_ORDR_NBR) As ORDER_NBR, 
    RTrim(PROD_ORDR.BTCH_NBR) As BATCH_NBR, 
    RTrim(PROD_ORDR.RVSN_LVL) As REV_LVL, 
    Convert(VARCHAR(11),PROD_ORDR.ACT_RLSE_DT,106) As RELEASE_DATE 
From 
    MPM.DBO.PROD_ORDR 
Inner Join MPM.DBO.MTRL 
    On PROD_ORDR.MTRL_OID = MTRL.OID 
Where PROD_ORDR.PROD_ORDR_NBR = 000104007817 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T04:14:10.553

```
Select  
    RTrim(Right(MTRL.MTRL_NBR, 9)) As MTRL_NBR,  
    RTrim(PROD_ORDR.PROD_ORDR_NBR) As ORDER_NBR,  
    RTrim(PROD_ORDR.BTCH_NBR) As BATCH_NBR,  
    RTrim(PROD_ORDR.RVSN_LVL) As REV_LVL,  
    UPPER(Convert(VARCHAR(11),PROD_ORDR.ACT_RLSE_DT,106)) As RELEASE_DATE  
From  
    MPM.DBO.PROD_ORDR  
Inner Join MPM.DBO.MTRL  
    On PROD_ORDR.MTRL_OID = MTRL.OID  
Where PROD_ORDR.PROD_ORDR_NBR = 000104007817 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T04:16:12.787

如果您使用 sql server，则可以使用 Upper() 函数

```
Select RTrim(Right(MTRL.MTRL_NBR, 9)) As MTRL_NBR, 
        RTrim(PROD_ORDR.PROD_ORDR_NBR) As ORDER_NBR, 
        RTrim(PROD_ORDR.BTCH_NBR) As BATCH_NBR, RTrim(PROD_ORDR.RVSN_LVL) As REV_LVL, 
        Upper(Convert(VARCHAR(11),PROD_ORDR.ACT_RLSE_DT,106)) As RELEASE_DATE From MPM.DBO.PROD_ORDR Inner Join MPM.DBO.MTRL On PROD_ORDR.MTRL_OID = MTRL.OID Where PROD_ORDR.PROD_ORDR_NBR = 000104007817 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T04:39:07.577

使用`UPPER`功能为您完成。

```
SELECT  RTrim(Right(MTRL.MTRL_NBR, 9)) As MTRL_NBR,  
        RTrim(PROD_ORDR.PROD_ORDR_NBR) As ORDER_NBR,  
        RTrim(PROD_ORDR.BTCH_NBR) As BATCH_NBR,  
        RTrim(PROD_ORDR.RVSN_LVL) As REV_LVL,  
        UPPER(Convert(VARCHAR(11),PROD_ORDR.ACT_RLSE_DT,106)) As RELEASE_DATE  
FROM    MPM.DBO.PROD_ORDR  
           INNER JOIN MPM.DBO.MTRL  
              ON PROD_ORDR.MTRL_OID = MTRL.OID  
WHERE   PROD_ORDR.PROD_ORDR_NBR = 000104007817 
```

# iphone - 加载 ABPersonViewController 后如何以编程方式调用 ABPersonViewController 编辑视图

> ID：11822468
> 
> 赞同：0
> 
> 时间：2012-08-06T04:08:51.400
> 
> 标签：iphone, objective-c, ios

这个问题已经被问过了，但仍然没有回答。（[这里](https://stackoverflow.com/questions/10315280/directly-open-abpersonviewcontroller-in-edit-mode-directly-in-iphone)）

我制作了一个`UIViewController`看起来像`ABPersonViewController`视图的视图，并添加了一些按钮。

我在右侧导航栏上也有一个编辑按钮，它已经具有调用的功能`ABPersonViewController`，我知道可以以编程方式加载它的编辑视图，但我找不到正确的代码。（Viber 这样做）

任何帮助，将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T06:29:27.510

如果编辑按钮只是标准

```
self.editButtonItem 
```

那么这意味着你可能有一个 UITableView 并且在 viewWillAppear 方法中你可以调用

```
[self setEditing:YES]; 
```

但是，如果代码具有 Edit 方法，则只需从 viewWillAppear 调用该方法。

# actionscript-3 - 如何在八哥框架中检测所有补间完成

> ID：11822469
> 
> 赞同：0
> 
> 时间：2012-08-06T04:08:57.467
> 
> 标签：actionscript-3, flash, starling-framework

我正在使用 starling-framework 开发游戏。我的问题是当我将一组元素添加到`juggler`.

目前我的计划是

```
while(some_condition){ //allocate a set of tween
     var tween=createTween(tweenCount++);
     tween.onComplete=function(){
         tweenCount--;
     }
}
function checkComplete(){
     if(tweenCount==0)
        doStuff();
     else
        setTimeout(checkComplete,1000);
} 
```

还有更好的解决方案吗？谢谢你的时间！

## 更新

写一个简单的类来解决这个问题，似乎更好

```
public class TweenMonitor 
{

    public function TweenMonitor() 
    {
        throw new Error('static class');
    }

    private static var refDict:Dictionary = new Dictionary();

    public static function monit(tweens:Vector.<Tween>,onAllFinish:Function,id:String='$default$'):void 
    {
        for (var i:int = 0; i < tweens.length; i++) 
        {
            var tween:Tween = tweens[i];
            if (tween == null)
                continue;
            if (refDict[id] == null) {
                refDict[id] = 1;
            }else
                refDict[id]++;
            tween.addEventListener(Event.REMOVE_FROM_JUGGLER,function (e:Event):void 
            {
                refDict[id]--;
                if (refDict[id] == 0)
                    onAllFinish && onAllFinish();
            });
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T04:55:36.870

您只需要Tween 类（Starling 框架）的[onComplete 属性](http://doc.starling-framework.org/core/starling/animation/Tween.html#onComplete)

这是一个示例：

```
function addTween() { 

   var tween:Tween = new Tween(object, 2.0, Transitions.EASE_IN_OUT);
   tween.animate("x", object.x + 50);
   tween.animate("rotation", deg2rad(45));
   tween.fadeTo(0);   
   tween.onComplete = tween_complete;
   Starling.juggler.add(tween); 
}

function tween_complete() {

   // Handle Tween Complete Action Here   
} 
```

* * *

**编辑**

如果有多个补间，您可能可以通过附加一个计时器类而不是 settimeout 来做得更好：

```
while(some_condition){ //allocate a set of tween
     var tween=createTween(tweenCount++);
     tween.onComplete = function() { tweenCount--; }
}

var timer : Timer = new Timer(1000);
timer.addEventListener(TimerEvent.TIMER,update);
timer.start();    

function update(e) {

     if(tweenCount > 0) return;

     timer.stop();
     timer = null;

     doStuff();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:41:40.717

我会这样做：

```
OnComplete = tweenDone;

...

function tweenDone() {
    TweenCount--;
    If(TweenCount == 0) doStuff();
} 
```

写在手机上，所以我不得不走很多捷径，如果您需要更多信息，请发表评论！

# c# - 从服务器端记录 _trackPageView

> ID：11822471
> 
> 赞同：0
> 
> 时间：2012-08-06T04:09:09.247
> 
> 标签：c#, javascript, asp.net, google-analytics

我对从我的 C# 代码触发 _trackPageView 有一个非常具体的要求，因为我要触发的事件是基于我的数据库值的。如果数据库返回我，AI 希望将其跟踪到不同的页面，如果返回 BI，则希望它有所不同。

我可以从服务器端记录 _trackPageView 吗？否则我将不得不进行许多黑客攻击以发出 Ajax 请求并获取该数据库值，然后调用 Google Analytics javascript 代码。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T04:19:17.797

Ajax 似乎是最简单的方法，但谷歌分析提供 API，因此您可以从服务器端调用它

[https://developers.google.com/analytics/devguides/](https://developers.google.com/analytics/devguides/)

# c# - 在 Windows Phone 7 中控制屏幕亮度

> ID：11822474
> 
> 赞同：1
> 
> 时间：2012-08-06T04:11:17.793
> 
> 标签：c#, silverlight, windows-phone-7, screen-brightness

是否可以使用 c# 来更改屏幕亮度？我知道有些应用程序可以控制它，所以如果没有直接的方法，那么有人知道解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:02:43.090

不幸的是，您没有那种级别的硬件控制，但如果您只需要使屏幕变暗，您只需要按比例缩小每个像素的 RGB 值。

根据您正在使用的内容，有多种方法，但如果您有黑色背景，您只需调整前层的不透明度，这将有效地使内容变暗。

# amazon-ec2 - 如何使用 AWS 安全组仅将某些 EC2 实例列入白名单？

> ID：11822475
> 
> 赞同：12
> 
> 时间：2012-08-06T04:11:17.420
> 
> 标签：amazon-ec2

我对 AWS 安全组的理解是，它本质上是一个白名单。

除非明确允许，否则一切都会被阻止。

假设我有一些带有自动缩放功能的 EC2 实例。

在自动缩放的背景下，我不一定知道那些未来的 IP 将是什么。

假设我有一组用于 mysql 或 mongodb 等数据库的 EC2 实例。

我只想让我的应用程序服务器能够访问我的数据库服务器。

有没有办法为 EC2 实例创建标签并根据安全组允许任何具有特定标签的 EC2 实例？

这在现实世界中通常是如何完成的？

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T04:22:40.310

看起来您可以将安全组用作分类器，并将安全组“id”用于“源”字段。

例如：

假设您有一个属于“网络”安全组的网络服务器集群 (sg-12345)

假设您有一个属于“db”安全组的数据库服务器集群 (sg-23456)

您可以让“db”安全组允许端口 3306 到 sg-12345，只要在“web”安全组中启动新实例，它们就可以访问端口 3306 上的“db”

# iphone - 块中的弱引用和保留周期

> ID：11822476
> 
> 赞同：5
> 
> 时间：2012-08-06T04:11:46.230
> 
> 标签：iphone, objective-c, ios

[在这个问题](https://stackoverflow.com/questions/11603284/weak-references-inside-a-block)中，我询问了以下代码和保留周期：

```
__weak Cell *weakSelf = self;
NSBlockOperation *op = [NSBlockOperation blockOperationWithBlock:^{
        UIImage *image = /* render some image */
        [[NSOperationQueue mainQueue] addOperationWithBlock:^{
            [weakSelf setImageViewImage:image];
        }];
    }];
    [self.renderQueue addOperation:op]; 
```

所有答案都表明这里没有必要使用弱引用，因为此代码不会导致保留周期。但是，在尝试更多代码时，以下确实会导致保留周期（如果我不使用弱引用，则不会释放当前视图控制器）

```
 //__weak ViewController *weakSelf = self;
    MBItem *close = [[MBItem alloc] initWithBlock:^{
        [self dismissModalWithDefaultAnimation:NO];
    }];
    NSMutableArray *items = [[NSMutableArray alloc] initWithObjects:close, nil];
    [self.childObject setItems:items]; 
```

为什么第二个会导致保留周期而不是第一个？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-06T06:15:09.737

**如果您不使用，`__weak`**您的旧代码会创建此保留周期：

*   `(NSBlockOperation *)op`保留外部块
*   外部块保留`self`（如果您不使用`__weak`）
*   `self`保留`(NSOperationQueue *)renderQueue`
*   `(NSOperationQueue *)renderQueue`保留`(NSBlockOperation *)op`

除非其中一个链接断开，否则该循环中的任何对象都不能被释放。但是您向我们展示的代码**确实**打破了保留周期。当`op`完成执行时，`renderQueue`释放它，打破保留周期。

我怀疑您的新代码会创建此保留周期：

*   `(MBItem *)close`保留块
*   块保留`self`
*   `self`保留`childObject`
*   `childObject`保留`(NSMutableArray *)items`
*   `(NSMutableArray *)items`保留`(MBItem *)close`

如果没有任何事情破坏这些链接之一，则循环中的任何对象都不能被释放。您没有向我们展示任何破坏保留周期的代码。如果没有事件明确打破它（例如通过清除 out `childObject.items`），那么您需要使用`__weak`来打破保留周期。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-06T05:15:20.210

我无法告诉您第二个示例中保留循环的原因，因为我不知道`MBItem`，但是块有两种不同的使用模式。

如果您希望您的块在任何情况下都能执行，那么您可以`self`在块中使用：

```
[startSomeOperationWithCompletionBlock:^{
    [self doSomeThing];
}]; 
```

该块保留对 的引用`self`，因此`self`在执行块之前不会释放它。但是在块执行之后，这个引用（和保留周期）就消失了。

如果您可能希望在块执行**之前**`self`释放它，或者如果块可能根本不会被调用，那么您必须使用弱引用并检查块内的值：

 **```
__weak MyClass *weakSelf = self;
[startSomeOperationWithCompletionBlock:^{
    MyClass *strongSelf = weakSelf;
    if (strongSelf) {
        [strongSelf doSomeThing];
    }
}]; 
```

在这种情况下，该块不会保留`self`，因此`self`可以释放。在这种情况下，`weakSelf`设置为`nil`自动。因此，如果该块最终执行，您必须先检查是否`weakSelf`仍然有效。（或者你可以直接使用它，因为发送消息`nil`是无操作的。）

在块内分配强引用`strongSelf`可防止`self`在块执行时被释放。**

# java - 从 JPanel 中删除 JPanel

> ID：11822479
> 
> 赞同：0
> 
> 时间：2012-08-06T04:12:20.290
> 
> 标签：java, swing, user-interface, fsm

我有一个包含一堆状态的游戏的状态管理器。现在在我的一种状态（“菜单”）中，我在一个 JPanel 中有两个 JButton（JPanel 被添加到显示所有内容的主 JPanel）。当我单击 JButton“播放”时，我从堆栈中删除了菜单状态。然而，JButtons 留在屏幕上（即使当我 peek() 我看到菜单已从堆栈中删除）。

我不想从状态中删除按钮，因为我希望能够返回菜单并再次看到我的按钮。如何删除按钮以及状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T04:15:00.253

您是否考虑过使用[CardLayout](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/EventObject.html)？

> CardLayout 对象是容器的布局管理器。它将容器中的每个组件都视为一张卡片。一次只能看到一张卡片，并且容器充当一叠卡片。添加到 CardLayout 对象的第一个组件是容器首次显示时的可见组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T04:50:01.647

假设每个状态对应一个`JComponent`，您可以使用该`.setVisible(false);`方法在状态被移除时隐藏项目。

在这种情况下，当您初始化主组件时，您需要确保所有组件都已添加 - 然后当您添加/删除状态时，您可以切换可见性。

# asp.net-mvc - mvc3 中的小数错误 - 该值对字段无效

> ID：11822480
> 
> 赞同：31
> 
> 时间：2012-08-06T04:12:54.097
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, decimal, model-binding

我正在关注 [ASP.NET MVC 3 入门][1]。而且我无法使用 Price = 9.99 或 9,99 的值添加/编辑。它说：“价值'9.99'对价格无效。” 和“价格字段必须是数字。”

如何解决这个问题？

**模型：**

```
 public class Movie
{
    public int ID { get; set; }
    public string Title { get; set; }
    public DateTime ReleaseDate { get; set; }
    public string Genre { get; set; }
    public decimal Price { get; set; }
}

public class MovieDbContext : DbContext
{
    public DbSet<Movie> Movies { get; set; }
} 
```

**控制器：**

```
public class MovieController : Controller
{
    private MovieDbContext db = new MovieDbContext();

    //
    // GET: /Movie/

    public ViewResult Index()
    {
        var movie = from m in db.Movies
                     where m.ReleaseDate > new DateTime(1984, 6, 1)
                     select m;

        return View(movie.ToList()); 
    }

    //
    // GET: /Movie/Details/5

    public ViewResult Details(int id)
    {
        Movie movie = db.Movies.Find(id);
        return View(movie);
    }

    //
    // GET: /Movie/Create

    public ActionResult Create()
    {
        return View();
    } 

    //
    // POST: /Movie/Create

    [HttpPost]
    public ActionResult Create(Movie movie)
    {
        if (ModelState.IsValid)
        {
            db.Movies.Add(movie);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }

        return View(movie);
    }

    //
    // GET: /Movie/Edit/5

    public ActionResult Edit(int id)
    {
        Movie movie = db.Movies.Find(id);
        return View(movie);
    }

    //
    // POST: /Movie/Edit/5

    [HttpPost]
    public ActionResult Edit(Movie movie)
    {
        if (ModelState.IsValid)
        {
            db.Entry(movie).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(movie);
    }

    //
    // GET: /Movie/Delete/5

    public ActionResult Delete(int id)
    {
        Movie movie = db.Movies.Find(id);
        return View(movie);
    }

    //
    // POST: /Movie/Delete/5

    [HttpPost, ActionName("Delete")]
    public ActionResult DeleteConfirmed(int id)
    {            
        Movie movie = db.Movies.Find(id);
        db.Movies.Remove(movie);
        db.SaveChanges();
        return RedirectToAction("Index");
    }

    protected override void Dispose(bool disposing)
    {
        db.Dispose();
        base.Dispose(disposing);
    }
}
} 
```

**看法：**

```
 @model MvcMovies.Models.Movie

@{
ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript">       </script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Movie</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Title)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Title)
        @Html.ValidationMessageFor(model => model.Title)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.ReleaseDate)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.ReleaseDate)
        @Html.ValidationMessageFor(model => model.ReleaseDate)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Genre)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Genre)
        @Html.ValidationMessageFor(model => model.Genre)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Price)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Price)
        @Html.ValidationMessageFor(model => model.Price)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
}

<div>
@Html.ActionLink("Back to List", "Index")
</div>
public DbSet<Movie> Movies { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-10-12T21:35:03.743

2年后，我再次偶然发现了这一点。我以为 ASP.NET MVC 5 已经解决了这个问题，但看起来情况并非如此。所以这里是如何解决这个问题......

创建一个`DecimalModelBinder`如下所示的类并将其添加到项目的根目录中，例如：

```
using System;
using System.Globalization;
using System.Web.Mvc;

namespace YourNamespace
{   
    public class DecimalModelBinder : IModelBinder
    {
        public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            ValueProviderResult valueResult = bindingContext.ValueProvider
                .GetValue(bindingContext.ModelName);

            ModelState modelState = new ModelState { Value = valueResult };

            object actualValue = null;

            if(valueResult.AttemptedValue != string.Empty)
            {
                try
                {
                    actualValue = Convert.ToDecimal(valueResult.AttemptedValue, CultureInfo.CurrentCulture);
                }
                catch(FormatException e)
                {
                    modelState.Errors.Add(e);
                }
            }

            bindingContext.ModelState.Add(bindingContext.ModelName, modelState);

            return actualValue;
        }
    }
} 
```

在里面这样`Global.asax.cs,`使用它`Application_Start()`：

```
ModelBinders.Binders.Add(typeof(decimal?), new DecimalModelBinder()); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-06T09:13:24.010

您是 MS 没有预见到的非英语客户之一。您将需要付出一些额外的努力来运行您的版本。我遇到了类似的问题，拒绝将“9,99”和“9.99”作为有效数字。似乎一旦服务器端验证失败，一旦客户端验证失败，导致没有数字被接受。

所以你必须使验证一致。

就像评论中建议的那样，看看 [http://msdn.microsoft.com/en-us/library/gg674880(VS.98).aspx](http://msdn.microsoft.com/en-us/library/gg674880(VS.98).aspx) 和 [http://haacked.com/archive/2010/05/10 /globalizing-mvc-validation.aspx](http://haacked.com/archive/2010/05/10/globalizing-mvc-validation.aspx) 和 [MVC 3 jQuery Validation/globalizing of number/decimal field](https://stackoverflow.com/questions/5199835/mvc-3-jquery-validation-globalizing-of-number-decimal-field) 或者 - 你应该理解德语（或者只看代码示例） [http://www.andreas-reiff.de/2012/06 /probleme-mit-mvcmovies-beispiel-validierung-des-preises-mit-dezimalstellen-schlagt-fehl/](http://www.andreas-reiff.de/2012/06/probleme-mit-mvcmovies-beispiel-validierung-des-preises-mit-dezimalstellen-schlagt-fehl/)

顺便说一句，音乐和电影示例教程都存在同样的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-02-03T13:12:18.437

我在荷兰的 PC 上为英语受众开发 Web 应用程序时遇到了这个问题。

double 类型的模型属性生成此服务器端验证错误：

> 值“1.5”对 无效。

*在断点处，我在即时窗口*中看到了这些值：

```
?System.Threading.Thread.CurrentThread.CurrentUICulture 
```

> {zh-CN}

```
?System.Threading.Thread.CurrentThread.CurrentCulture 
```

> {nl-NL}

作为一种解决方案（或者可能是一种变通方法），您可以在 web.config 文件中指定全球化设置。

```
<configuration>
  <system.web>
    <globalization culture="en" uiCulture="en" /> 
```

当然，这意味着您强制用户输入英文格式的数字，但在我的情况下，这很好。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-07-11T21:33:36.370

2019年，这个问题还没有解决。使用 ASP Core 2.1，我的 UI 是法语的（小数分隔符 = ','），而且只要我有十进制数，我就无法进行验证。

我找到了一种解决方法，但并不理想：我创建了一个基于法语的 CultureInfo，但我将小数分隔符更改为与 Invariant Culture 中的相同：'.'。

这成功了，我的十进制数字现在显示为美国风格（但我可以接受）并且验证有效。

```
 // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.
    public void Configure(IApplicationBuilder app, IHostingEnvironment env)
    {
        app.UseHttpsRedirection();
        app.UseStaticFiles();
        app.UseCookiePolicy();

        app.UseMvc(routes =>
        {
            routes.MapRoute(
                name: "default",
                template: "{controller=Home}/{action=Index}/{id?}");
        });

        //Culture specific problems
        var cultureInfo = new CultureInfo("fr-FR");
        cultureInfo.NumberFormat.NumberDecimalSeparator = ".";
        System.Threading.Thread.CurrentThread.CurrentUICulture = cultureInfo;

    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-19T12:27:42.907

我对 Leniel Macaferi 的代码做了一些修改，因此您可以将其用于任何类型：

```
public class RequestModelBinder<TBinding> : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        ValueProviderResult valueResult = bindingContext.ValueProvider
            .GetValue(bindingContext.ModelName);

        ModelState modelState = new ModelState { Value = valueResult };

        object actualValue = null;

        if (valueResult.AttemptedValue != string.Empty)
        {
            try
            {
                // values really should be invariant
                actualValue = Convert.ChangeType(valueResult.AttemptedValue, typeof(TBinding), CultureInfo.CurrentCulture);
            }
            catch (FormatException e)
            {
                modelState.Errors.Add(e);
            }
        }

        bindingContext.ModelState.Add(bindingContext.ModelName, modelState);

        return actualValue;
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-03T18:01:38.600

我试过**@Leniel Macaferi**，但它对我不起作用。

ModelState.IsValid 不接受格式为 7.000,00 的数字

当我从以下位置更改属性类型时，问题就开始了：

```
[Column("PRICE")]
public decimal Price { get; set; } 
```

至

```
[Column("PRICE")]
public decimal? Price { get; set; } 
```

我还尝试在 web.config 中包含我忘记的全球化

```
<globalization culture="pt-BR" uiCulture="pt-BR" enableClientBasedCulture="true" /> 
```

唯一有效的解决方法是将属性更改回仅十进制：

```
[Column("PRICE")]
public decimal Price { get; set; } 
```

并且还将表列更改为不接受空值

希望它可以帮助某人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-10T10:03:19.233

我通过禁用 jquery 的价格解决了这个问题，并且只在服务器端验证该输入。我在这里找到了答案： [ASP .NET MVC Disable Client Side Validation at Per-Field Level](https://stackoverflow.com/questions/5630424/asp-net-mvc-disable-client-side-validation-at-per-field-level)

```
<div class="col-md-10">
                @{ Html.EnableClientValidation(false); }
                @Html.EditorFor(model => model.DecimalValue, new { htmlAttributes = new { @class = "form-control" } })
                @{ Html.EnableClientValidation(true); }
                @Html.ValidationMessageFor(model => model.DecimalValue, "", new { @class = "text-danger" })
            </div> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-23T20:23:51.550

你可以加：

```
protected void Application_BeginRequest()
{
    var currentCulture = (CultureInfo)CultureInfo.CurrentCulture.Clone();
    currentCulture.NumberFormat.NumberDecimalSeparator = ".";
    currentCulture.NumberFormat.NumberGroupSeparator = " ";
    currentCulture.NumberFormat.CurrencyDecimalSeparator = ".";

    Thread.CurrentThread.CurrentCulture = currentCulture;
    //Thread.CurrentThread.CurrentUICulture = currentCulture;
} 
```

到`Global.asax`（在 MVC 5.1 上测试）。它可以在不改变 UICulture 的情况下为我工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-20T10:27:36.470

这是[Leniel Maccaferri](https://stackoverflow.com/a/19339424/3762855)解决方案的扩展，它避免了与用户代理以与服务器不同的文化格式发送十进制值相关的问题。它的限制绑定到千位分隔符解析，当它是值中唯一的分隔符时，可能会引发错误的绑定。

```
/// <summary>
/// custom decimal model binder
/// </summary>
/// <author>https://stackoverflow.com/users/114029/leniel-maccaferri</author>
/// <see cref="https://stackoverflow.com/a/19339424/3762855"/>
/// <remarks>Integrated with a fix for the decimal separator issue.
/// <para>This issue maybe depends from browsers interpretation of decimal values posted-back to the server when they receive response without any http content-language specific indication.</para>
/// <para>Important! decimal values caming from UI must not be formatted with thousands separator.</para>
/// </remarks>
public class DecimalModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        ValueProviderResult valueResult = bindingContext.ValueProvider
            .GetValue(bindingContext.ModelName);

        ModelState modelState = new ModelState { Value = valueResult };

        object actualValue = null;

        if (valueResult.AttemptedValue != string.Empty)
        {
            try
            {
                var culture = Thread.CurrentThread.CurrentCulture;

                //This is needed to convert in the right manner decimal values coming from UI, as seems they always represent the decimal separator as a period("."). 
                //Maybe depends from browsers interpretation of decimal values posted-back to the server when they receive response without any http content-language specific indication.
                if (culture.NumberFormat.NumberDecimalSeparator == "," && valueResult.AttemptedValue.LastIndexOf(".") > 0)
                {
                    culture = new CultureInfo("en"); 
                }
                else if (Thread.CurrentThread.CurrentCulture.NumberFormat.NumberDecimalSeparator == "." && valueResult.AttemptedValue.LastIndexOf(",") > 0)
                {
                    culture = new CultureInfo("it");
                }

                actualValue = Convert.ToDecimal(valueResult.AttemptedValue, culture);

            }
            catch (FormatException e)
            {
                modelState.Errors.Add(e);
            }
        }

        bindingContext.ModelState.Add(bindingContext.ModelName, modelState);

        return actualValue;
    }
} 
```

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2014-02-21T07:54:20.640

只需评论此脚本的链接：

```
<%--<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>--%> 
```

# jquery - 如何在图片库中缩放具有平滑过渡的图像？

> ID：11822483
> 
> 赞同：2
> 
> 时间：2012-08-06T04:13:54.750
> 
> 标签：jquery, css

我想创建一个与此类似的缩放效果的图片[库](http://lookbook.nu/user/34805-Frida-J)。当鼠标悬停在图像上时，它将显示带有一些附加标记的图像的较大版本。

**标记：**

```
<div class="gallery">
    <div class="gallery-item">
        <img src="image.png" width="150" alt="" />
        <div class="gallery-item-full">
            <img src="image.png" width="250" alt="" />
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit</p>
        </div>
    </div>
    .
    .
    .
</div> 
```

**CSS：**

```
.gallery {
    margin: 100px auto;
    width: 600px;
}

.gallery-item {
    float: left;
    position: relative;
    margin: 0 25px;
    width: 150px;
}

.gallery-item-full {
    z-index: 999;
    position: absolute;
    background: #fff;
    border: #ccc 1px solid;
    padding: 5px;
    top: -50px;
    left: -50px;
    opacity: 0;
}

.gallery-item:hover .gallery-item-full {
    opacity: 1;
} 
```

这行得通，但我想要像[以前的画廊](http://lookbook.nu/user/34805-Frida-J)一样平滑过渡。我愿意使用 Javascript/jQuery。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T04:18:38.777

试试这个： http: [//jsfiddle.net/FPKAP/12/](http://jsfiddle.net/FPKAP/12/)（有点不同，但我最近为某人制作）

希望能满足你的需要`:)`

链接：[使用 Jquery 鼠标悬停时放大图像？](https://stackoverflow.com/questions/11769212/enlarging-images-when-mouseover-using-jquery/11769235#11769235)

**代码**

```
$('#zoomimg').mouseenter(function() {
    $(this).css("cursor","pointer");
    $(this).animate({width: "50%", height: "50%"}, 'slow');
});

$('#zoomimg').mouseleave(function() {   
    $(this).animate({width: "28%"}, 'slow');
}); 
```

**代码**

```
$('#zoomimg').hover(function() {
    $(this).css("cursor", "pointer").animate({
        width: "50%",
        height: "50%"
    }, 'slow');

}, function() {
    $(this).animate({
        width: "28%"
    }, 'slow');

});​ 
```

# google-earth-plugin - Google Earth API 中是否有任何内置函数来计算显示整个地理对象所需的最小相机范围？

> ID：11822484
> 
> 赞同：1
> 
> 时间：2012-08-06T04:13:59.197
> 
> 标签：google-earth-plugin

例如，我有一条 3 点的线：
lat / lon 56,1
/ 46,1
56,2 / 46,2
56,3 / 46,3

如果我做：

```
var lookAt = ge.createLookAt('');
lookAt.setLatitude(56.2);
lookAt.setLongitude(46.2);
lookAt.setRange(5000.0); 
```

我肯定会看到所有线路，但距离太远
如果我这样做：

```
lookAt.setRange(10.0); 
```

我只会看到中线点，所以...有没有办法计算出看到整条线所需的最少范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:04:26.800

尝试使用 GEarthExtensions 库脚本。特别是 - computeBounds()

你可以在这里看到一个例子

[http://earth-api-utility-library.googlecode.com/svn/trunk/extensions/examples/bounds-view.html](http://earth-api-utility-library.googlecode.com/svn/trunk/extensions/examples/bounds-view.html)

# jquery - 使用jquery在手风琴内切换按钮

> ID：11822485
> 
> 赞同：0
> 
> 时间：2012-08-06T04:14:06.940
> 
> 标签：jquery, html, jquery-ui, toggle, accordion

我想在手风琴内创建一个切换按钮。这就是我想要做的。

Javascript

```
$j("div a").live('click', function() {
$j("#toggleButton").click(function () {
      $j("#test p").slideToggle("slow");
    });
}); 
```

HTML是：

```
 <div id="accordion">
    <h3><a href="#">Number 1</a></h3><div><h4> Error1:</h4><p> some contents here </p><div id="content1"><input type="button" value="Hide" id="toggleButton" style="float:right;"><div id="test"> <p>jhfsnv jv jsdhv jsdvb </p></div></div></div>
    <h3><a href="#">Number 2</a></h3><div><h4> Error2:</h4><p> some contents here </p><div id="content1"><input type="button" value="Hide" id="toggleButton" style="float:right;"><div id="test"> <p>jsa shsbc sjhv sf </p></div></div></div>
  </div> 
```

这是我想做的事情：

当我打开手风琴时，我应该看到文本“这里有一些内容”和“隐藏”按钮。当我点击隐藏按钮时，内容即“jhfsnv jv jsdhv jsdvb”应该打开。

我想在手风琴的所有选项上保留“隐藏”按钮。所以不同的手风琴选项会有隐藏按钮，但内容不同。（有没有一种简单的方法来保持所有隐藏按钮的 id 和它们包含的文本相同（尽管单击隐藏按钮时的内容不同））但是所有这些不同的内容都在不同的手风琴选项中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T04:26:23.213

请试试这个**工作演示** [http://jsfiddle.net/stXP6/](http://jsfiddle.net/stXP6/) **或** [http://jsfiddle.net/z8Jns/](http://jsfiddle.net/z8Jns/)

哦，你的 HTML 是无效的，我现在使用 class 对其进行了一些纠正。即`id`定义元素的身份，因此它应该是唯一的。

希望能满足你的需要`:)`

**代码**

```
$(".test").hide();
$(".toggleButton").click(function() {
    $(this).next(".test").slideToggle("slow");
});​ 
```

**HTML**

```
<h3><a href="#">Number 1</a></h3><div><h4> Error1:</h4><p> some contents here </p><div id="content1"><input type="button" value="Hide" class="toggleButton" style="float:right;"><div class="test"> <p>jhfsnv jv jsdhv jsdvb </p></div></div></div>
<h3><a href="#">Number 2</a></h3><div><h4> Error2:</h4><p> some contents here </p><div id="content1"><input type="button" value="Hide" class="toggleButton" style="float:right;"><div class="test"> <p>jsa shsbc sjhv sf </p></div></div></div>
Here​​ 
```

# asp.net-mvc-3 - asp.net mvc ajax 疯狂

> ID：11822487
> 
> 赞同：0
> 
> 时间：2012-08-06T04:14:16.780
> 
> 标签：asp.net-mvc-3

从页面 Index.cshtml，我有一个非常简单的 ajax 调用

控制器 1 和控制器 2 具有相同的操作：

```
public ActionResult abc(string name)
    {
        return new JsonResult()
        {
            Data = new
            {
                success = true,
                JsonRequestBehavior = JsonRequestBehavior.AllowGet
            }
        };
    } 
```

$(文档).ready(函数($){

```
 $.ajax({

        url: '@Url.Action("abc", "controller1")',
        type: 'POST',
        data: { name: 'John' },
        dataType: 'json',
        success: function (result) {
            if (result.success) {
                alert("ok");
            }
            else {
                alert(result.error);
            }
        }

    });
}); 
```

> > 不行

但是使用完全相同的语法，只需更改控制器，它就可以工作！！！。

abc 动作是一样的。

```
$.ajax({

        url: '@Url.Action("abc","controller2")',
        type: 'POST',
        data: { name: 'John' },
        dataType: 'json',
        success: function (result) {
            if (result.success) {
                alert("ok");
            }
            else {
                alert(result.error);
            }
        }

    }); 
```

它让我发疯，不知道发生了什么。在一个新项目中，我尝试了相同的代码，它运行良好，但不适用于我目前的工作。

# zend-framework - Zend 错误下的 Doctrine 2: Class Entities\X has no association named Entities\Y

> ID：11822489
> 
> 赞同：1
> 
> 时间：2012-08-06T04:14:38.370
> 
> 标签：zend-framework, doctrine, mapping, one-to-one

我有一个相当奇怪的问题。我在 Zend Framework 1.11 下使用 Doctrine 2。我有一个名为“Sessions”的数据库，它是针对学生的培训课程。每个会话都有一个关联的注释，称为 SOAPE 注释。编辑：我现在包括两个有问题的实体。

会议：

```
use Doctrine\ORM\Mapping as ORM;

/**
 * @Entity(repositoryClass="Repositories\Sessions")
 * @Table(name="Sessions")
 */

 class Sessions
{
   /**
    * @var integer Id
    *
    * @Id @Column(type="integer")
    * @GeneratedValue(strategy="AUTO")
    */
    protected $id;

    /**
     * @var integer $schId
     *
     * @Column(name="schId", type="integer", nullable=false)
     */
    protected $schId;

    /**
     * @var integer $stdId
     *
     * @Column(name="stdId", type="integer", nullable=false)
     */
    protected $stdId;

    /**
     * @var integer $trainerPsnId
     *
     * @Column(name="trainerPsnId", type="integer", nullable=false)
     */
    protected $trainerPsnId;

    /**
     * @var boolean $isLegacy
     *
     * @Column(name="isLegacy", type="boolean", nullable=false)
     */
    protected $isLegacy;

    /**
     * @var float $charge
     *
     * @Column(name="charge", type="float", nullable=false)
     */
    protected $charge;

    /**
     * @var float $trainerPay
     *
     * @Column(name="trainerPay", type="float", nullable=false)
     */
    protected $trainerPay;

    /**
     * @var integer $modeId
     *
     * @Column(name="modeId", type="integer", nullable=false)
     */
    protected $modeId;

    /**
     * @var text $notes
     *
     * @Column(name="notes", type="text", nullable=true)
     */
    protected $notes;

    /**
     * @var string $twitterNote
     *
     * @Column(name="twitterNote", type="string", length=20, nullable=true)
     */
    protected $twitterNote;

    // ASSOCIATIONS
    /**
     * @OneToOne(targetEntity="Schedule", inversedBy="session")
     * @JoinColumn(name="schId", referencedColumnName="id")
     */
    protected $schedule;

    /**
     * @OneToOne(targetEntity="SnSoapeNotes", mappedBy="session")
     * @JoinColumn(name="id", referencedColumnName="snId")
     */
    protected $soapeNote;

    /**
     * @ManyToOne(targetEntity="Students")
     * @JoinColumn(name="stdId", referencedColumnName="id")
     */
    protected $student;

    /**
     * @ManyToOne(targetEntity="Personnel", inversedBy="sessions")
     * @JoinColumn(name="trainerPsnId", referencedColumnName="id")
     */
    protected $trainer;

    // Getters and Setters
    public function getId()
    {
        return $this->id;
    }

    public function getSchId()
    {
        return $this->schId;
    }

    public function setSchId($schId)
    {
        $this->schId = $schId;
    }

    public function getStdId()
    {
        return $this->stdId;
    }

    public function setStdId($stdId)
    {
        $this->stdId = $stdId;
    }

    public function getTrainerPsnId()
    {
        return $this->trainerPsnId;
    }

    public function setTrainerPsnId($trainerPsnId)
    {
        $this->stdId = $trainerPsnId;
    }

    public function getIsLegacy()
    {
        return $this->isLegacy;
    }

    public function setIsLegacy($isLegacy)
    {
        $this->isLegacy = $isLegacy;
    }

    public function getCharge()
    {
        return $this->charge;
    }

    public function setCharge($charge)
    {
        $this->charge = $charge;
    }

    public function getTrainerPay()
    {
        return $this->trainerPay;
    }

    public function setTrainerPay($trainerPay)
    {
        $this->trainerPay = $trainerPay;
    }

    public function getModeId()
    {
        return $this->modeId;
    }

    public function setModeId($modeId)
    {
        $this->modeId = $modeId;
    }

    public function getNotes()
    {
        return $this->notes;
    }

    public function setNotes($notes)
    {
        $this->notes = $notes;
    }

    public function getTwitterNote()
    {
        return $this->twitterNote;
    }

    public function setTwitterNote($twitterNote)
    {
        $this->twitterNote = $twitterNote;
    }

    // Foreign Data

    public function getSchedule()
    {
        return $this->schedule;
    }

    public function getStudent()
    {
        return $this->student;
    }
    public function getTrainer()
    {
        return $this->trainer;
    }

    public function getSoapeNote()
    {
        return $this->soapeNote;
    }
} 
```

SnSoape注意事项：

```
namespace Entities;

use Doctrine\Mapping as ORM;

/**
 * SnSoapeNotes
 *
 * @Table(name="SnSoapeNotes")
 * @Entity(repositoryClass="Repositories\SnSoapeNotes")
 */
class SnSoapeNotes
{

    /**
    * @var integer Id
    *
    * @Id @Column(type="integer")
    * @GeneratedValue(strategy="AUTO")
    */
    protected $id;

    /**
     * @var integer $mental
     *
     * @Column(name="mental", type="integer", nullable=false)
     */
    private $mental;

    /**
     * @var integer $physical
     *
     * @Column(name="physical", type="integer", nullable=false)
     */
    private $physical;

    /**
     * @var text $subjective
     *
     * @Column(name="subjective", type="text", nullable=false)
     */
    private $subjective;

    /**
     * @var text $objective
     *
     * @Column(name="objective", type="text", nullable=false)
     */
    private $objective;

    /**
     * @var text $plan
     *
     * @Column(name="plan", type="text", nullable=false)
     */
    private $plan;

    /**
     * @var text $action
     *
     * @Column(name="action", type="text", nullable=false)
     */
    private $action;

    /**
     * @var text $education
     *
     * @Column(name="education", type="text", nullable=false)
     */
    private $education;

    /**
     * @var text $warning
     *
     * @Column(name="warning", type="text", nullable=true)
     */
private $warning;

/**
 * @var text $incident
 *
 * @Column(name="incident", type="text", nullable=true)
 */
private $incident;

/**
 * @var text $technical
 *
 * @Column(name="technical", type="text", nullable=true)
 */
private $technical;

// ASSOCIATIONS
/**
 * @Var Sessions $sessions
 * 
 * @Column(name="snId", type="integer", nullable=false)
 * @OneToOne(targetEntity="Sessions", inversedBy="soapeNote")
 * @JoinColumn(name="snId", referencedColumnName="id")
 */
protected $sessions;

// Getters and Setters
public function getSnId()
{
    return $this->snId;
}

public function setSnId($snId)
{
    $this->snId = $snId;
}

public function getMental()
{
    return $this->mental;
}

public function setMental($mental)
{
    $this->mental = $mental;
}

public function getPhysical()
{
    return $this->physical;
}

public function setPhysical($physical)
{
    $this->physical = $physical;
}

public function getSubjective()
{
    return $this->subjective;
}

public function setSubjective($subjective)
{
    $this->subjective = $subjective;
}

public function getObjective()
{
    return $this->objective;
}

public function setObjective($objective)
{
    $this->objective = $objective;
}

public function getPlan()
{
    return $this->plan;
}

public function setPlan($plan)
{
    $this->plan = $plan;
}

public function getAction()
{
    return $this->action;
}

public function setAction($action)
{
    $this->action = $action;
}

public function getEducation()
{
    return $this->education;
}

public function setEducation($education)
{
    $this->education = $education;
}

public function getWarning()
{
    return $this->warning;
}

public function setWarning($warning)
{
    $this->warning = $warning;
}

public function getIncident()
{
    return $this->incident;
}

public function setIncident($incident)
{
    $this->incident = $incident;
}

public function getTechnical()
{
    return $this->technical;
}

public function setTechnical($technical)
{
    $this->technical = $technical;
}

public function getSession()
{
    return $this->session;

}

// A quick way to make sure the soape note has been completed.
// Note that objective is left out here because it can be
// filled out beforehand
public function getIsComplete()
{
    return !empty($this->subjective)
        && !empty($this->action)
        && !empty($this->plan)
        && !empty($this->education);
} 
```

}

当调用 $em->getRepository('Entities\Sessions')->findOneBy('id') 时，一切正常——我得到了会话及其随附的 SOAPE 注释。其他关联表的数据同上。

但现在我正在尝试编写一个自定义存储库来获取本次会议之前的笔记。功能如下：

```
<?php

namespace Repositories;

use Doctrine\ORM\EntityRepository;
use Doctrine\ORM\Query\ResultSetMapping;
use Doctrine\DBAL\Types\Type;

/**
 * Sessions
 */
class Sessions extends EntityRepository
{
    public function getPastSoapeNotes($params) {
        $studentId = $params['studentId'];
        $latestSession = $params['snDatetime'] ?: date('Y-m-d H:i');

        $qb = $this->_em->createQueryBuilder();

        $qb->select('n.subjective, n.objective, n.plan, n.action, n.education')
        ->from('Entities\Sessions', 'sn')
        ->innerJoin('sn.Entities\SnSoapeNotes', 'n');
        return $qb->getQuery()->getResult();
    }
} 
```

当我调用它时，我收到以下错误：

```
[Semantical Error] line 0, col 126 near 'n': Error: Class Entities\Sessions has no association named Entities\SnSoapeNotes 
```

我还尝试在每种可能的组合中使用“mappedBy”和“inersedBy”注释，但无济于事；教义似乎找不到关联。我完全不知道发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:17:54.983

我弄清楚我做错了什么。在连接语句中，我使用了 'sn.Entities\SnSoapeNotes' 而我应该只使用 'soapeNote'，它是 Sessions 类中的**属性**，而不是表名本身。

# c# - 如何使用此数据结构构建树

> ID：11822495
> 
> 赞同：-1
> 
> 时间：2012-08-06T04:15:06.393
> 
> 标签：c#, recursion, tree

我有这个树结构，一个节点可能有多个节点。

```
public class Node
{
    public Node()
    {
        ChildLocations = new HashSet<Node>();
    }

    public int Id { get; set; }
    public string Name { get; set; }
    public virtual int? ParentLocationId { get; set; }
    public virtual ICollection<Node> ChildLocations { get; set; }
} 
```

现在，我想在`parent-child`这个结构中添加一个值列表。喜欢：

```
{1,A} -> {2,B}
{1,A} -> {3,C}
{1,A} -> {4,D}
{3,C} -> {5,E}
{3,C} -> {6,F} 
```

构造一棵树如下所示：

```
 1A
        / |  \
    2B    3C   4D
         / \ 
       5E   6F 
```

最后，它返回`root`引用。

我已经提出了这个解决方案。但我对递归部分没有信心。这对吗？

```
public class Tree
{
    Node root;

    public Node Root
    {
        get { return root; }
    }

    public void Add(int parentId, string parentName, int childId, string childName)
    {
        if (root == null)
        {
            root = new Node { Id = parentId, Name = parentName };
            root.ChildLocations.Add(new Node { Id = childId, Name = childName });
        }
        else
        {
            Add(root, parentId, parentName, childId, childName);
        }
    }

    private void Add(Node node, int parentId, string parentName, int childId, string childName)
    {
        if (node == null)
        {
            return;
        }
        if (node.Id == parentId)
        {
            node.ChildLocations.Add(new Node { Id = childId, Name = childName });
            return;
        }
        foreach (var n in node.ChildLocations)
        {
            Add(n, parentId, parentName, childId, childName);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T04:42:48.167

根据我对您的问题的评论，这可以构建您需要的树：

```
public Node BuildTree()
{
    var _1A = new Node() { Id = 1, Name = "A", };
    var _2B = new Node() { Id = 2, Name = "B", };
    var _3C = new Node() { Id = 3, Name = "C", };
    var _4D = new Node() { Id = 4, Name = "D", };
    var _5E = new Node() { Id = 5, Name = "E", };
    var _6F = new Node() { Id = 6, Name = "F", };
    _1A.ChildLocations.Add(_2B);
    _1A.ChildLocations.Add(_3C);
    _1A.ChildLocations.Add(_4D);
    _3C.ChildLocations.Add(_5E);
    _3C.ChildLocations.Add(_6F);
    return _1A;
} 
```

但这不是很通用的。你能详细说明你的需求吗？

# javascript - 动态调用下拉列表以在 html 中选择日期

> ID：11822497
> 
> 赞同：0
> 
> 时间：2012-08-06T04:15:20.100
> 
> 标签：javascript

```
 <select  value="dt" name="previousYear">
  <option value="2007">2007</option>
  <option value="2008">2008</option>
  <option value="2009">2009</option>
  <option value="2010">2010</option>
  <option selected="selected" value="2011">2011</option>
  <option value="2012">2012</option>
  <option value="2012">2013</option>
  <option value="2012">2014</option>
</select>
<select  value="dt" name="currentYear">
  <option value="2007">2007</option>
  <option value="2008">2008</option>
  <option value="2009">2009</option>
  <option value="2010">2010</option>
  <option selected="selected" value="2011">2011</option>
  <option value="2012">2012</option>
  <option value="2012">2013</option>
  <option value="2012">2014</option>
</select>
<select  value="dt" name="nextYear">
  <option value="2007">2007</option>
  <option value="2008">2008</option>
  <option value="2009">2009</option>
  <option value="2010">2010</option>
  <option selected="selected" value="2011">2011</option>
  <option value="2012">2012</option>
  <option value="2012">2013</option>
  <option value="2012">2014</option>
</select> 
```

我有 3 个下拉列表，如前一年、当年和明年我如何选择当前年份作为当前年份，如果当前年份是 2012 年，那么当页面加载时它会自动选择 2012 年，任何人都可以告诉我用于动态选择的 Javascript 代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T04:24:02.160

您的标记似乎不正确。我猜你正在寻找这样的东西：

```
<script type="text/javascript">
function setYear()
{
 var d = new Date();
 var x = document.getElementById("currentYear");//for select box id="currentYear"
 x.value=d.getFullYear();
}
</script> 
```

像这样称呼它：

```
<body onload="setYear()">
<!-- your markup -->
</body> 
```

在页面加载时调用上述函数为选择框设置当前年份。我建议您[学习 Javascript](http://www.w3schools.com/jsref/default.asp)以便更好地理解它作为一个基本示例。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T04:28:07.817

你应该使用一些东西作为

```
var d = new Date();

var cur = document.getElementById('currentYear');
var prev = document.getElementById('previousYear');
var next = document.getElementById('nextYear');
var optionC, optionP, optionN;

for (var i = d.getFullYear() - 5; i <= d.getFullYear() + 5; i++) {
    optionC = document.createElement("option");
    optionC.setAttribute("value", i);
    optionC.innerHTML = i;
    cur.appendChild(optionC);
}

for (var i = d.getFullYear() - 10; i < d.getFullYear(); i++) {
    optionP = document.createElement("option");
    optionP.setAttribute("value", i);
    optionP.innerHTML = i;
    prev.appendChild(optionP);
}

for (var i = d.getFullYear() + 1; i <= d.getFullYear() + 10; i++) {
    optionN = document.createElement("option");
    optionN.setAttribute("value", i);
    optionN.innerHTML = i;
    next.appendChild(optionN);
}

cur.value = d.getFullYear();
prev.value = d.getFullYear() - 1;
next.value = d.getFullYear() + 1;​ 
```

只需添加类似的javascript函数

```
function setYear(obj)
{
    var prev = document.getElementById('previousYear');
    var next = document.getElementById('nextYear');   

    prev.value = Number(obj.value) - 1;
    next.value = Number(obj.value) + 1;
} 
```

[更新的演示](http://jsfiddle.net/cyDrs/2/)

# c# - 重定向第二个表单当时第一个表单在 C# 桌面应用程序中最小化

> ID：11822499
> 
> 赞同：0
> 
> 时间：2012-08-06T04:15:51.713
> 
> 标签：c#, c#-3.0, c#-2.0

我在 C# 桌面应用程序中有两个表单，表单 1 和表单 2。表单 1 用于将数据插入数据库。表单 2 用于将数据显示到网格视图中。表单 2 包含两个按钮编辑和删除。

现在我的问题是，当我单击编辑按钮时，我想在 form1 上重定向并编辑项目，它会完成，但是当我在 form1 上重定向时，form1 会自动最小化。

所以我一直打开或最大化form1。

请给我一些建议，我如何解决最小化问题？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T04:18:51.167

当您希望它们被隐藏、显示或带到 z 顺序的前面时，只需调用 Form.Hide()、Form.Show() 和 Form.BringToFront()。

# android - 更改系统文件权限

> ID：11822500
> 
> 赞同：3
> 
> 时间：2012-08-06T04:15:55.267
> 
> 标签：android, permissions

我真的尝试了一切：

*   [NetHack 文件助手](https://nethack-android.googlecode.com/svn-history/r430/trunk/slashem-0.0.7E7F3/sys/android/NetHackApp/src/com/slashemff/NetHackFileHelpers.java)
*   [如何在 Java 中以编程方式获取文件权限模式](https://stackoverflow.com/questions/11408154/how-to-get-file-permission-mode-programmatically-in-java)
*   [在应用程序中更改文件权限](https://stackoverflow.com/questions/8412384/change-file-permission-in-application)
*   [在 android 应用程序中挂载 R/W 系统以编辑只读文件](https://stackoverflow.com/questions/7129144/mount-r-w-system-in-android-application-to-edit-read-only-files)

现在，假设我以 root 身份重新挂载，因此`RW`对文件系统具有权限（Android 版本 2.3.7）：

```
Process process = Runtime.getRuntime().exec("su");
        DataOutputStream os = new DataOutputStream(process.getOutputStream());
        os.writeBytes("chmod -c 0777 /system/etc/customization/settings/com/android/browser/custom_settings.xml\n");
        os.writeBytes("exit\n");
        os.flush();
        process.waitFor(); 
```

或者：

```
Process process = Runtime.getRuntime().exec("su -c \"/system/etc/customization/settings/com/android/browser/custom_settings.xml\""); 
```

或者：

```
Class<?> fileUtils = Class.forName("android.os.FileUtils");
            Method setPermissions =
                fileUtils.getMethod("setPermissions", String.class, int.class, int.class, int.class);
            int a = (Integer) setPermissions.invoke(null, "/system/etc/customization/settings/com/android/browser/custom_settings.xml", 0777, -1, -1); 
```

行为是相同的：没有任何反应。而如果我`chmod`来自 adb shell 工作正常。如何从我的代码中更改该文件的权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:33:28.150

这是我的解决方案：

```
 Process sh = Runtime.getRuntime().exec("su", null, new File("/system/bin/"));
        OutputStream os = sh.getOutputStream();

        os.write(("chmod 777 <filepath>").getBytes("ASCII"));
        os.flush();
        os.close();
        sh.waitFor(); 
```

# delphi - 为什么当 TIdHTTPProxyServer 尝试将请求转发到大多数代理服务器时返回 403？

> ID：11822503
> 
> 赞同：3
> 
> 时间：2012-08-06T04:16:10.070
> 
> 标签：delphi, proxy, c++builder, indy

这个问题是从我之前提出的问题延伸而来[的。](https://stackoverflow.com/questions/11606238/how-do-i-forward-request-to-another-proxy-server-using-tidhttpproxyserver-proxy)

目前我可以让我的代理服务器使用 TIdHTTPProxyServer 将请求转发到另一个也使用 TIdHTTPProxyServer 的代理服务器。但是当我试图让它从网络上的免费代理服务器列表中将请求转发到其他代理服务器时。大多数可以通过 IE 代理设置使用的服务器都会向我的代理服务器返回 403 错误消息。事实上，我已经尝试了大约 20 个有效的代理服务器，但只有两个可以接受来自我的代理服务器的请求。我不知道为什么会这样。

下面是我在 TIdHTTPProxyServer 的 HTTPBeforeCommand 中使用的代码。

```
 TIdIOHandlerStack* tempIO = new TIdIOHandlerStack(AContext->OutboundClient);

    TIdConnectThroughHttpProxy* tempProxy = new TIdConnectThroughHttpProxy(AContext->OutboundClient);
    tempProxy->Enabled = true;
    tempProxy->Host = ProxyServerAddress;
    tempProxy->Port = ProxyServerPort ;
    tempIO->TransparentProxy  =  tempProxy;
    AContext->OutboundClient->IOHandler =  tempIO; 
```

在使用wireshark监控TIdHTTPProxyServer的行为后，我发现TIdHTTPProxyServer总是先向其他代理服务器发送CONNECT请求，然后才是真正的请求（浏览器不这样做）。然后收到大多数代理服务器的 403 响应。但仍然不知道如何使它工作。

* * *

更新于 2012/08/07

你好，我对那些HTTP的东西不是很熟悉，所以我只是把我在wireshark中看到的记录在这里。似乎 IE 对请求使用`GET/POST`命令，对请求`HTTP`使用命令。并且大多数代理服务器在它们不是 HTTPS 请求时会阻止连接命令（例如，CONNECT www.google.com.tw:80 HTTP/1.0）。这就是为什么总是不起作用。 `CONNECT``HTTPS``TIdConnectThroughHttpProxy`

下面是我的解决方法，我在 IdHTTPProxyServer.pas 中做了一些更改。希望它对遇到相同问题的其他人有用。

对于 CONNECT 命令，仍然使用`TIdConnectThroughHttpProxy`

之内`TIdHTTPProxyServer.CommandCONNECT`

```
if UseProxy = True then
begin
     tempIO := TIdIOHandlerStack.Create(LContext.FOutboundClient);
     tempProxy := TIdConnectThroughHttpProxy.Create(LContext.FOutboundClient);
     tempProxy.Enabled := True;
       tempProxy.Host := UseProxyAddr;
       tempProxy.Port := UseProxyPort ;
       tempIO.TransparentProxy  :=  tempProxy;
       LContext.FOutboundClient.IOHandler :=  tempIO;
end; 
```

对于`GET/POST`命令，我应该直接将 GET www.google.com.tw:80 HTTP/1.0 发送到其他代理服务器，而不是首先发送 CONNECT www.google.com.tw:80 HTTP/1.0。

之内`TIdHTTPProxyServer.CommandPassThrough`

```
 if UseProxy = True then
  begin
     TIdTCPClient(LContext.FOutboundClient).Host := UseProxyAddr;
     TIdTCPClient(LContext.FOutboundClient).Port := UseProxyPort;
  end else
  begin
     TIdTCPClient(LContext.FOutboundClient).Host := LURI.Host;
     TIdTCPClient(LContext.FOutboundClient).Port := IndyStrToInt(LURI.Port, 80);
  end; 
```

同样在里面`TIdHTTPProxyServer.CommandPassThrough`，我应该让标题`Proxy-Connection = close`

```
LContext.Connection.IOHandler.Capture(LContext.Headers, '', False);      
LContext.Headers.Values['Proxy-Connection'] := 'close'; 
```

终于在`TIdHTTPProxyServer.TransferData`

```
if AContext.TransferSource = tsClient then 
begin

  if UseProxy = True then
  begin
     ADest.IOHandler.WriteLn(AContext.Command + ' ' + AContext.Target + ' HTTP/1.0'); 
  end else
  begin
      ADest.IOHandler.WriteLn(AContext.Command + ' ' + AContext.Document + ' HTTP/1.0'); 
  end;
end; 
```

这是我第一次实现delphi，希望有更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:07:21.723

我相信你不应该使用针孔 - [http://www.indyproject.org/docsite/html/TIdConnectThroughHttpProxy.html](http://www.indyproject.org/docsite/html/TIdConnectThroughHttpProxy.html)

CONNECT 命令不是 WWW 的工作方式。没有浏览器使用它。这就是非 WWW 程序试图突破防火墙并打开对 WWW 以外的所有 Internet 区域的直接访问的方式。

不要使用“透明代理”类。使用常规 HTTP 代理，例如[如何使用 Indy 10 和 OpenSSL 通过 HTTPS 下载文件？](https://stackoverflow.com/questions/2244255)

顺便说一句，没有像你这样的事件处理程序名称“HTTPBeforeCommand” [http://www.indyproject.org/docsite/html/!!MEMBEROVERVIEW_TIdHTTPProxyServer.html](http://www.indyproject.org/docsite/html/!!MEMBEROVERVIEW_TIdHTTPProxyServer.html)

# visual-studio-2010 - 尝试打开 C# 交互窗口时出错

> ID：11822506
> 
> 赞同：0
> 
> 时间：2012-08-06T04:16:48.287
> 
> 标签：visual-studio-2010, roslyn

我刚刚安装了 Roslyn CTP，但是当我尝试打开 C# 交互窗口时，我收到了一个弹出错误消息：

> 找不到与约束匹配的有效导出 '((exportDefinition.ContractName == "Microsoft.VisualStudio.Repl.IInteractiveWindowProvider") AndAlso (exportDefinition.Metadata.ContainsKey("ExportTypeIdentity") AndAlso "Microsoft.VisualStudio.Repl.IInteractiveWindowProvider"。 Equals(exportDefinition.Metadata.get_Item("ExportTypeIdentity"))))'，无效的导出可能已被拒绝。

我正在使用 Visual Studio 2010。我重新安装了 Roslyn CTP，它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T01:37:20.253

通过安装第一个修复`Roslyn Oct 2011 CTP`。

# android - 在 Galaxy Tab 中自动连接到调试模式

> ID：11822507
> 
> 赞同：0
> 
> 时间：2012-08-06T04:17:07.530
> 
> 标签：android, eclipse, debugging, testing

先生，

当我更改一些代码并通过按 run 或 Ctrl + F11 测试我的应用程序时，它总是显示应用程序正在调试的 opo up 消息。如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T05:03:40.717

因为 CTRL+f11 用于调试应用程序。要运行应用程序，请右键单击项目并单击“运行方式”，然后单击“运行配置”。然后浏览项目并按“目标”选项卡并选择“始终提示选择设备”。按“应用”，然后按“运行”。

现在，每当您运行它时，它都会要求您选择要在哪个设备上运行应用程序的设备。然后选择你的星系标签。

希望有帮助！！

# c++ - 尝试使用函数 C++ 创建一个骰子游戏

> ID：11822511
> 
> 赞同：0
> 
> 时间：2012-08-06T04:18:50.373
> 
> 标签：c++

我试图让一个函数确定结果

一种。如果数字加起来等于 5、7 或 12，则玩家获胜，并且该函数应返回此指示（使用某个整数表示获胜）。湾。如果数字加起来等于 2、4 或 11，则玩家输了，函数应该返回一个指示（再次使用整数）。C。如果数字加起来是其他任何数字，那么游戏就是平局，函数应该这样说（通过整数）。

问题，我需要为赢家、输家和平局设置不同的函数吗？

以及如何将整数返回给 main 以让 main 知道如果我们有赢家输家平局。

只是学习编程任何帮助将不胜感激

```
 //function
 int outcome(int, int)
    {
    int die1;
    int die2;
    int winner;
    int loser;
    int draw;

      if (die1&&die2==5||7||12)

      return 99;

      if (die1&&die2==2||4||11)

      return loser;

      else
      return draw;
      }

    // func to get a random number
    int rollDice()
    {
    int roll;

    roll = (rand()%6)+1;

    return roll;
    } 
```

主要功能

```
#include <iostream> 
#include <cstdlib> 
#include <fstream> 

using namespace std; 

int main() 
{ 
double die1=0; 
double die2=0;
int winner=0; //counter for winners   
int loser=0; //counter for losers
int draw=0; //counter for draw 

//func to determine the outcome 
int outcome(int, int); 

//func for random numbers 
int rollDice(); 

int outcome(int, int) 
if (return==99) 
    cout <<"winner"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T04:46:22.597

您的代码有几个语法错误。如果我想做一个函数来添加两个整数，我会做这样的事情：

```
int add(int a, int b) //VARIABLES MUST CARRY A NAME!
{
    return a+b;
} 
```

如果要使用条件，请执行以下操作：

```
if(a==5 && b==6 || a==6 && b==7) //Just as an example 
```

你的固定条件是这样的：

```
if (die1+die2==5 || die1+die2==7 || die1+die2==12) 
```

此外，研究变量范围。假设我有以下内容：

```
int main()
{
    int myVar = 1;
}

int anotherFunction()
{
    println("%d", myVar); //This will cause an error, because myVar doesn't exist here, it only exists in main()
} 
```

这些是我在您的代码中看到的最明显的错误。

# magento-1.6 - 在自定义模块前端控制器中以编程方式向产品添加自定义选项？

> ID：11822515
> 
> 赞同：0
> 
> 时间：2012-08-06T04:19:18.093
> 
> 标签：magento-1.6, magento

我正在尝试按照此链接以编程方式从前端添加产品：

[Magento：以编程方式添加新产品](https://stackoverflow.com/questions/6735506/magento-adding-new-products-programmatically)

但我想扩展它以添加自定义选项。我添加了以下代码

```
$options = array();
        $options[$sku] = array(
        'title' => 'Option Title',
        'type' => 'radio',
        'is_require' => 1,
        'sort_order' => 0,
        'values' => array()
        );
        $options[$addvp['product']['sku']]['values'][] = array(
        'title' => 'Option Value 1',
        'price' => 0.00,
        'price_type' => 'fixed',
        'sku' => '',
        'sort_order' => '1'
        );
        $options[$sku]['values'][] = array(
        'title' => 'Option Value 2',
        'price' => 89.00,
        'price_type' => 'fixed',
        'sku' => '',
        'sort_order' => '1'
        );

    foreach($options as $sku => $option) {
        $id = Mage::getModel('catalog/product')->getIdBySku($sku);
        $product = Mage::getModel('catalog/product')->load($id);

        if(!$product->getOptionsReadonly()) {
        $product->setProductOptions(array($option));
        $product->setCanSaveCustomOptions(true);
        //$product->save();
        }
    } 
```

但它会打印此错误，而不是向产品添加自定义选项。

```
SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`vendor`.`catalog_product_entity`, CONSTRAINT `FK_CAT_PRD_ENTT_ATTR_SET_ID_EAV_ATTR_SET_ATTR_SET_ID` FOREIGN KEY (`attribute_set_id`) REFERENCES `eav_attribute_set` (`attribute_set_id`) ON DEL) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:21:58.020

[http://www.fontis.com.au/blog/magento/add-product-custom-options](http://www.fontis.com.au/blog/magento/add-product-custom-options)

**笔记：**

上面的链接做了我想做的事。但是要记住一件事，您必须将自定义选项添加到已经存在/保存的产品中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T09:41:39.667

我有一个类似的问题。事实证明，自动生成的 SKU 不知何故无效或未正确保存在我为测试而创建的新产品上。该产品并非无效，因为它确实在第一次运行时正确保存，但是当我通过 CMS 重新访问该产品并尝试单击“保存并继续”时，它突然提示我输入 SKU。当我重新输入自动生成的 sku 时，它起作用了！

所以简短的回答是：通过该 SKU 编号检查您的产品是否存在。如果是，请重新检查 SKU 是否已正确保存。

# c++ - 当字符串和 int 指针一起用作函数参数时，C++ 程序崩溃

> ID：11822520
> 
> 赞同：1
> 
> 时间：2012-08-06T04:20:21.410
> 
> 标签：c++

我对 Ubuntu 上的 glibc 有一个非常奇怪的问题。

示例程序 test.cpp：

```
#include <iostream>
#include <stdio.h>
#include <stdlib.h>

using namespace std;

bool abc(string unitstr,int *data)
{        

}

int main(int argc,char *argv[])
{

  int *dd3 = new int(8); 
  dd3[0]=1;dd3[1]=2;dd3[2]=3;dd3[3]=4;
  dd3[4]=5;dd3[5]=6;dd3[6]=7;dd3[7]=8;
  abc("sss",dd3);

  return 1;
} 
```

编译并运行：

```
g++ test.cpp
a.out 
```

结果：

```
a.out: malloc.c:2451: sYSMALLOc: Assertion `(old_top == (((mbinptr) (((char *) &((av)->bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) (old_size) >= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) & ~((2 * (sizeof(size_t))) - 1))) && ((old_top)->size & 0x1) && ((unsigned long)old_end & pagemask) == 0)' failed.
Abort (core dumped) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T04:23:40.417

有了这条线：

```
int *dd3 = new int(8); 
```

您正在分配和初始化一个*标量*，而不是一个数组：一个单一的，用*value*`int`初始化。 *`8`*

 *你需要：

```
int *dd3 = new int[8]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-06T04:23:48.587

```
int *dd3 = new int(8); 
```

该语句只为单个整数分配空间（然后用数字 8 对其进行初始化）。然后，您继续使用这个指针，就像一个更大的数组一样，导致未定义的行为，可能（实际上，似乎）稍后会表现出来。

在这里使用`new`似乎没有必要（如果没有别的，也是异常不安全的）。只需使用 a`vector`并完成它（如果您希望能够在函数内调整块的大小，只需传递向量而不是指针）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-06T04:24:00.570

此行分配一个**并将** `int`其初始化为 value `8`：

```
int *dd3 = new int(8); 
```

如果你想要一个 8 的数组，`ints`请改为：

```
int *dd3 = new int[8]; 
```

完成后不要忘记正确返回内存：

```
delete [] dd3; 
```*

# database - 复杂的 SQL 连接

> ID：11822522
> 
> 赞同：2
> 
> 时间：2012-08-06T04:21:27.960
> 
> 标签：database, sql-server-2008, tsql, join

我对 SQL 联接相当陌生，但这里有一个棘手的问题。我试图自己解决这个问题，也进行了搜索，但没有成功。

我有两个主 SQL 表

**客户档案**

```
ClientID || ClientName 
```

**客户交易**

```
CorpID || DivID || DeptID 
```

我需要按如下方式显示我的输出：

```
`CorpID` `CorpIDClientName` `DivID` `DivIDName` `DeptID` `DeptIDName`  

CustTransaction.CorpID join on CustProfile.ClientID to get `CorpIDClientName`  
CustTransaction.DivID join on CustProfile.ClientID to get `DivIDName`  
CustTransaction.DeptID join on CustProfile.ClientID to get `DeptIDName` 
```

我希望有人可以提供加入查询。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T04:36:33.227

试试这个：

```
SELECT  a.CorpID,
        b.ClientName AS CorpIDClientName,
        a.DivID,
        c.ClientName AS DivIDName,
        a.DeptID,
        d.ClientName AS DeptIDName
FROM    CustTransaction a
            INNER JOIN CustProfile b
                on a.CorpID = b.ClientID
            INNER JOIN CustProfile c
                on a.DivID = c.ClientID
            INNER JOIN CustProfile d
                on a.DeptID = d.ClientID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T04:32:36.990

我理解正确吗？您将公司、部门和部门都存储在 CustProfile 表中。

因此，您只加入 2 个不同的表，但您需要将这 2 个表分别加入 3 次才能获得每种不同类型的客户（Corp 或 Div 或 Dept）

如果是这种情况，您需要做的是为您包含多次的表添加别名，这样您就可以像加入 3 个单独的表一样加入它，一个用于军团，一个用于部门，一个用于部门。

我不确定 MSSQL 中的语法是否相同，但对于大多数 SQL 数据库，您的连接查询看起来像这样：

```
SELECT corps.ClientID CorpID, corps.ClientName CorpIDClientName,
       divs.ClientID DivID, divs.ClientName DivIDName,
       depts.ClientID DeptID, depts.ClientName DeptIDName
FROM CustProfile corps, CustProfile divs, CustProfile depts, CustTransaction t
WHERE t.CorpID = corps.ClientID 
  AND t.DivID = divs.ClientID
  AND t.DeptID = depts.ClientID 
```

我认为，这应该或多或少地做你想要的......

# android - 忘记密码被发送到 android 中的注册邮箱

> ID：11822524
> 
> 赞同：2
> 
> 时间：2012-08-06T04:21:41.553
> 
> 标签：android, web-services, soap, sendmail

我已经开发了一个登录表单（用户名、密码和提交按钮），通过我的 android 应用程序中的soap webservices 使用MySQL 连接。在这里我忘记密码意味着我无法访问我的帐户，那么如何访问我的帐户。因此，当我忘记密码时，意味着单击忘记密码文本视图，然后进入忘记密码活动。在这里，当我输入我的电子邮件 ID 时，意味着我的密码是从 mysql 数据库中检索到的并将其发送到我的电子邮件 ID。

我该怎么办，请指导我。这是我的网络服务代码：

```
 public class Login {
 public String authentication(String userName,String password){

  String retrievedUserName = "";
 String retrievedPassword = "";
 String status = "";
 try{

 Class.forName("com.mysql.jdbc.Driver");
 Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/pro","root","");
 PreparedStatement statement =  con.prepareStatement("SELECT * FROM customers WHERE login = '"+userName+"'");
 ResultSet result = statement.executeQuery();

 while(result.next()){
 retrievedUserName = result.getString("login");
 retrievedPassword = result.getString("password");
 }

 if(retrievedUserName.equals(userName)&&retrievedPassword.equals(password)){
  status = "Success!";

 }

  else{
  status = "Login fail!!!";
   }

   }
   catch(Exception e){
    e.printStackTrace();
    }
    return status;

    }

   } 
```

这是我的忘记密码 webservice 代码是：

```
 public class ForgetPassword {
    public String authentication(String Email){
    String retrievedEmail = "";
    String status = "";
    try{

    Class.forName("com.mysql.jdbc.Driver");
    Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/pro","root","");
    PreparedStatement statement =  con.prepareStatement("SELECT password FROM customers WHERE email = '"+Email+"'");
   ResultSet result = statement.executeQuery();

   while(result.next()){

retrievedEmail = retrievedEmail + result.getString("password");
     retrievedEmail = result.getString("email");
    }

     if(retrievedEmail.equals(Email)){
       status = "Your password has been sent to your email address";
       }

    else{
     status = "No such user exist";
       }
       }
      catch(Exception e){
       e.printStackTrace();
       }
     return retrievedEmail;
       }
       } 
```

dis 是我忘记密码的安卓代码：

```
 public class ForgetPassword extends Activity {
      private final String NAMESPACE = "http://ws.userlogin.com";
      private final String URL = "http://192.168.1.168:8085/Login/services/ForgetPassword?wsdl";
      private final String SOAP_ACTION = "http://ws.userlogin.com/authentication";
      private final String METHOD_NAME = "authentication";
      /** Called when the activity is first created. */
      @Override
      public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.forget_password);
      Button submit = (Button) findViewById(R.id.submit);
      submit.setOnClickListener(new View.OnClickListener() {

       public void onClick(View arg0) {
       loginAction();

        }
          });
           }

         private void loginAction(){
         SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
         boolean isUserValidated = true;
         EditText Email = (EditText) findViewById(R.id.email);
         String email = Email.getText().toString();

         PropertyInfo unameProp =new PropertyInfo();
         unameProp.setName("Email");//Define the variable name in the web service method
         unameProp.setValue(email);//set value for userName variable
         unameProp.setType(String.class);//Define the type of the variable
         request.addProperty(unameProp);//Pass properties to the variable

                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                envelope.setOutputSoapObject(request);
                HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

               try{
               androidHttpTransport.call(SOAP_ACTION, envelope);
           SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
           String status = response.toString();
           TextView result = (TextView) findViewById(R.id.tv_status);
           result.setText(response.toString());
           if(status.equals("Success!"))
           {

               //   ADD  to save  and  read next time
                   String strUserName = Email.getText().toString().trim();

                   if (null == strUserName || strUserName.length() == 0)
                               {
                       //  showToast("Enter Your Name");
                     Email.setError( "Email is required!" );
         isUserValidated = false;
                   }
             }
           if(isUserValidated)
           {

                          Intent intent = new Intent(ForgetPassword.this,AndroidLoginExampleActivity.class);

                            startActivity(intent);

           }

                                  else
                                     {
                                      Intent i = new Intent(getApplicationContext(), ForgetPassword.class);
                                        startActivity(i);
                                     }
                                    }

    catch(Exception e){

           }
        }

        } 
```

请帮助我，如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:08:09.483

从 Java 发送邮件的标准方法是使用[JavaMail API](http://java.sun.com/developer/onlineTraining/JavaMail/contents.html)。该链接中的示例代码应该可以用于发送简单的消息，例如密码提醒。

# java - 如何为 JTable 列添加 JXDatepicker

> ID：11822526
> 
> 赞同：4
> 
> 时间：2012-08-06T04:22:20.160
> 
> 标签：java, swing, datepicker, jtable, swingx

我正在使用 JTable。我有一个日期列，当我单击一个单元格时，我需要在其中显示一个 JXDatePicker，以便我可以从中选择一个日期。

有人可以告诉我如何做到这一点吗？

谢谢！等待答案..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T04:44:10.197

您可能应该使用`DatePickerCellEditor`，这是一个`CellEditor`使用`JXDatePicker`as 编辑器组件。例如：

```
TableColumn dateColumn = table.getColumnModel().getColumn(columnIndex);
dateColumn.setCellEditor(new DatePickerCellEditor()); 
```

这是一个演示表：

```
import java.util.Date;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.table.TableColumn;

import org.jdesktop.swingx.table.DatePickerCellEditor;

public class DateColumnDemo {

    private static void createAndShowGUI() {
        JFrame frame = new JFrame("DateColumnDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JTable table = new JTable(new Object[][] { { "1", new Date() } },
                new Object[] { "Id", "Time" });

        TableColumn dateColumn = table.getColumnModel().getColumn(1);
        dateColumn.setCellEditor(new DatePickerCellEditor());

        JScrollPane scrollPane = new JScrollPane(table); 

        frame.add(scrollPane);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T09:13:38.570

正如我在对 Max 正确答案的评论中已经提到的：

默认情况下， JXTable（与普通 JTable 相同）*会*格式化日期值，使用`DateFormat.getInstance()`. 如果格式似乎不起作用，这通常是 tableModel 的不完整实现：​​仅当 columnClass 返回该特定类型时才使用特定类型的默认渲染器

```
// in your TableModel, implement getColumnClass
@Override
public Class<?> getColumnClass(int columnIndex) {
    if (columnIndex == myDateColumnIndex) {
        return Date.class;
    }
    ...
} 
```

要安装具有自定义格式的日期渲染器，请根据需要使用 FormatStringValue 实例化 DefaultTableRenderer 并告诉表使用它（每列，适用于任何 columnClass 或每表，适用于返回 Date 类的列）

```
StringValue sv = new FormatStringValue(new SimpleDateForma("dd-MMMM-yyyy"));
TableCellRenderer r = new DefaultTableRenderer(sv);
// either per-column
table.getColumn(dateColumnIndex).setCellRenderer(r);
// or per-table
table.setDefaultRenderer(Date.class, r); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-06T04:43:20.677

您可以为`Date`该类提供一个默认的表格单元格编辑器（假设该列正在使用`Date`）

查看[setDefaultEditor](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#setDefaultEditor%28java.lang.Class,%20javax.swing.table.TableCellEditor%29)了解详情。

这往往有点笨拙，因此您可以使用[JTable.getColumnModel().getColumn(int).setCellEditor(editor)](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableColumn.html#setCellEditor%28javax.swing.table.TableCellEditor%29)来指定要用于给定[TableColumn的编辑器](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableColumn.html)

查看[如何使用表格（使用其他编辑器）](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editor)了解更多详情

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-01T00:49:52.297

您可以通过将“表编辑器”添加到表中来将 DatePicker 添加到 JTable（或 JXTable）。表编辑器是任何实现“javax.swing.table.TableCellEditor”接口的类。您可以使用[如上所述](https://stackoverflow.com/a/11822659/3142960)的 JXDatePicker 组件或使用此处所示的[LGoodDatePicker库来执行此操作。](https://github.com/LGoodDatePicker/LGoodDatePicker)（这是同一问题的替代解决方案。）

公平披露：我是 LGoodDatePicker 的主要开发者。

LGoodDatePicker 库包括三个**TableEditor**类。这些类允许程序员将 DatePicker、TimePicker 或 DateTimePicker 添加到 Swing JTable（或 SwingX JXTable）的单元格。

选择器类也可以添加到普通的摆动面板或其他摆动容器中。

以下是如何将 DateTimePicker 添加到 JTable 的示例：

```
// Create a table.
JTable table = new JTable(new DemoTableModel());

// Add the DateTimeTableEditor as the default editor and renderer for
// the LocalDateTime data type.
table.setDefaultEditor(LocalDateTime.class, new DateTimeTableEditor());
table.setDefaultRenderer(LocalDateTime.class, new DateTimeTableEditor());

// Explicitly set the default editor and renderer for column index 0.
TableColumn column = table.getColumnModel().getColumn(0);
column.setCellEditor(table.getDefaultEditor(LocalDateTime.class));
column.setCellRenderer(table.getDefaultRenderer(LocalDateTime.class)); 
```

[这是关于如何使用表编辑器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)的 Oracle 教程。

我在下面粘贴了表格编辑器演示、选择器组件和完整演示的屏幕截图。请注意，LGoodDatePicker 库包含一个用于表格编辑器的单独演示。它位于此文件夹下的[存储库](https://github.com/LGoodDatePicker/LGoodDatePicker)中：“LGoodDatePicker/Project/src/main/java/com/github/lgooddatepicker/demo/TableEditorsDemo.java”。

该库可以从项目[Release Page](https://github.com/LGoodDatePicker/LGoodDatePicker/releases)安装到您的 Java 项目中。

项目主页位于 Github 上：
[https](https://github.com/LGoodDatePicker/LGoodDatePicker) ://github.com/LGoodDatePicker/LGoodDatePicker 。

. [![表格编辑器演示屏幕截图](../Images/889a9ffabf7b55ff23371e3626190cc4.png)](https://i.stack.imgur.com/fz1p5.png)

[![日期和时间选择器屏幕截图](../Images/f9ba38e6777e3cb6d03bac173edbded2.png)](https://i.stack.imgur.com/ghDdI.png)

[![完整演示截图](../Images/e79d9be1c6b4716178702b1a0c7906ac.png)](https://i.stack.imgur.com/JMcEq.png)

# imap - 通过 IMAP 重新导入 EML 文件

> ID：11822534
> 
> 赞同：1
> 
> 时间：2012-08-06T04:23:52.857
> 
> 标签：imap, eml

我有一堆使用“归档邮件”导出/归档的 .eml 文件。现在我需要在 IMAP 服务器上完全恢复一些文件。是否有一些简单的工具可以获取包含多封电子邮件的 .eml/mail 文件并将其还原到 IMAP 服务器上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:04:49.040

您可以为此使用 Mail.dll [.NET IMAP 库](http://www.limilabs.com/mail)：

```
using (Imap imap = new Imap())
{
    imap.Connect("server"); // or ConnectSSL
    imap.Login("user", "password");

    string eml = File.ReadAllText("email.eml");    
    imap.UploadMessage("INBOX", eml);

    imap.Close();
} 
```

如果您需要在上传之前实现一些自定义逻辑，Mail.dll 也可以解析 .eml 文件：

```
IMail email = new MailBuilder().CreateFromEml(eml); 
```

但请注意，这是我帮助开发的商业产品。

# android - 如何从串口设备获取原始数据到安卓平板电脑

> ID：11822539
> 
> 赞同：2
> 
> 时间：2012-08-06T04:24:20.423
> 
> 标签：android

我有一个 android 平板电脑，我需要从任何设备（支持 rs 232）读取原始数据到我的 android 平板电脑中，并将其显示在我的应用程序内的富文本框中。我的 android 设备应该充当主机。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T06:30:37.570

```
http://blog.350nice.com/wp/ 
```

设法在 Arduino 中运行 ADK，并使用 USB Host Shield 控制伺服或 LED

我发布了一些你可以参考的好链接..我个人觉得很有趣..

[http://code.google.com/p/android-serialport-api/wiki/android_to_rs232_guideline](http://code.google.com/p/android-serialport-api/wiki/android_to_rs232_guideline)

[http://sven.killig.de/android/N1/2.2/usb_host/](http://sven.killig.de/android/N1/2.2/usb_host/)

[http://www.engadget.com/2011/05/10/google-announces-android-open-accessory-standard-arduino-based/](http://www.engadget.com/2011/05/10/google-announces-android-open-accessory-standard-arduino-based/)

[http://www.arduino.cc/](http://www.arduino.cc/)

[http://blog.makezine.com/2011/06/19/adventures-in-android-adk-development-hardware/](http://blog.makezine.com/2011/06/19/adventures-in-android-adk-development-hardware/)

您需要获得“FlexSerial”电缆。让 Tab 以正确的方式与 RS232 电缆通信可能会很棘手。柔性串行电缆当然是一个开始，但您正在寻找的功能可能非常特定于您要控制的设备，因此找到合适的 Android 应用程序并不容易。只是出于好奇，它是什么设备？

# facebook-graph-api - 交朋友 facebook 移动 fb.ui 你好世界

> ID：11822540
> 
> 赞同：0
> 
> 时间：2012-08-06T04:24:21.947
> 
> 标签：facebook-graph-api, mobile, fb.ui

我正在开发一个 facebook 移动网络应用程序。有以下功能。

```
function getUserFriends() {
    FB.api('/me/friends&fields=name,picture', function(response) {
        console.log('Got friends: ', response);

        if (!response.error) {
            var markup = '';

            var friends = response.data;

            for (var i=0; i < friends.length && i < 25; i++) {
                var friend = friends[i];

                markup += '<img src="' + friend.picture + '"> ' + friend.name + '<br>' + friend.id + '<br>';
            }

            document.getElementById('user-friends').innerHTML = markup;
        }
    });
} 
```

当它返回时，图片丢失了。控制台日志返回：

```
[06:02:12.503] GET http://m.mochirestaurant.com/fb/%5Bobject%20Object%5D [HTTP/1.1 404 Not Found 77ms] 
```

虽然它应该返回如下内容：

```
http://profile.ak.fbcdn.net/hprofile-ak-ash2/276211_285403872_5043326_q.jpg 
```

我想我在我的 Facebook 应用程序中错误配置了一些东西，但不知道它是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:08:21.980

> [06:02:12.503] GET http;//m.mochirestaurant.com/fb/%5Bobject%20Object%5D [HTTP/1.1 404 Not Found 77ms]

您可以看到它不是一个真正的值，而是`[object]`在其中显示（使用括号 URL 编码）——这是当您尝试将对象带入字符串上下文时浏览器返回的内容。（并且因为这不是一个以 http://... 开头的完整 URL，您的浏览器会将其视为相对地址并尝试从*您的*域中请求它。）

所以很明显`friend.picture`，此时代码中的不是字符串值，而是一个对象。

（到目前为止，调试和发现错误部分。）

这源于[2012 年 10 月 3 日](https://developers.facebook.com/roadmap/)关于用户/图片连接的重大更改，

> **/picture 连接将在指定回调时返回字典**
> 
> 当访问对象的 /picture 连接并指定回调属性时，我们将开始返回包含字段 url、height、width 和 is_silhouette 的字典。目前我们只是将图片 URL 作为字符串返回。

因此，您必须`friend.picture.url`在代码中使用来获取包含用户图片 URL 的实际字符串属性。

# android - Android 应用程序 http post 请求得到 libcore.io.ErrnoException: socket failed: EACCES (Permission denied)

> ID：11822545
> 
> 赞同：3
> 
> 时间：2012-08-06T04:25:19.500
> 
> 标签：android, http, permissions

我在我的 android 应用程序中遇到了 http post 请求的问题：

```
libcore.io.ErrnoException: socket failed: EACCES (Permission denied) 
```

我的应用程序在大多数 Android 设备上运行良好，除了一部 android 手机，我的应用程序无法通过该手机上的 http 连接到互联网。但其他应用程序可以在该安卓手机上运行良好，例如浏览器。

我发现有一些关于的问题`EACCES (Permission denied)`，我在我的应用程序中检查了`<uses-permission android:name="android.permission.INTERNET" />`权限，没有问题。

这是堆栈跟踪：

```
java.net.SocketException: socket failed: EACCES (Permission denied)
at libcore.io.IoBridge.socket(IoBridge.java:573)
at java.net.PlainSocketImpl.create(PlainSocketImpl.java:201)
at java.net.Socket.checkOpenAndCreate(Socket.java:693)
at java.net.Socket.connect(Socket.java:837)
at libcore.net.http.HttpConnection.<init>(HttpConnection.java:77)
at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
at libcore.net.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:188)
at cn.com.fetion.android.common.ability.HttpProxy.openDataOutputStream(HttpProxy.java:252)
at cn.com.fetion.javacore.v11.network.HttpConnectionThread.doSendMessage(HttpConnectionThread.java:188)
at cn.com.fetion.javacore.v11.network.HttpConnectionThread.doSendMessage(HttpConnectionThread.java:262)
at cn.com.fetion.javacore.v11.network.HttpConnectionThread.doSendMessage(HttpConnectionThread.java:262)
at cn.com.fetion.javacore.v11.network.HttpConnectionThread.doSendMessage(HttpConnectionThread.java:262)
at cn.com.fetion.javacore.v11.network.ConnectionThread.executeConnectionRequest(ConnectionThread.java:185)
at cn.com.fetion.javacore.v11.network.ConnectionThread.run(ConnectionThread.java:137)
at cn.com.fetion.javacore.v11.network.HttpConnectionThread.run(HttpConnectionThread.java:1)
Caused by: libcore.io.ErrnoException: socket failed: EACCES (Permission denied)
at libcore.io.Posix.socket(Native Method)
at libcore.io.BlockGuardOs.socket(BlockGuardOs.java:181)
at libcore.io.IoBridge.socket(IoBridge.java:558) 
```

# c - c - 存储输入并添加两个指针的分段错误

> ID：11822546
> 
> 赞同：2
> 
> 时间：2012-08-06T04:25:22.367
> 
> 标签：c, pointers, segmentation-fault

执行此操作时出现分段错误，但编译器没有显示任何错误。如果我问的是非常基本的问题，请原谅我，因为我长期以来一直不擅长用 C 进行编码。

这是我的代码：

```
#include<stdio.h>
#include<stdlib.h>

struct link_list {
    int x;
    int y;
    struct link_list *next;
    struct link_list *prev;
};

int inp_sum (int *x, int *y){
        printf("Enter x:");
        scanf("%d",&x);
        printf("Enter y:");
        scanf("%d",&y);
    printf("%d+%d",x,y);
    int z;
    z=*x+*y;
    return z;
}

void main(){
    struct link_list *first_node;
    first_node=malloc(sizeof(struct link_list));
    first_node->next=0;
    first_node->prev=0;

    struct link_list *cur;
    cur = malloc(sizeof(struct link_list));
    while(inp_sum(&cur->x,&cur->y)<100){
        cur->next=malloc(sizeof(struct link_list));
        cur=cur->next;
        cur->next=0;
        cur->prev=0;
    }

    print_llist(first_node);
}

print_llist(struct link_list *root){
    struct link_list *current;
    current=malloc(sizeof(struct link_list));
    current = root;
    while ( current != NULL ) {
        printf( "%d\n", current->x );
        current = current->next;
    }
} 
```

我想要做的是创建一个链接列表节点并在输入总和小于100时扩展链接列表，因为我想将x，y（节点成员）的指针发送到一个函数，该函数在获取后返回它们的总和输入并将输入存储给他们。

但我认为我在传递指针或添加指针时做错了。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T04:31:05.403

`x`并且`y`已经是指针，所以：

```
 printf("Enter x:");
    scanf("%d",&x);
    //         ^ address of int *
    printf("Enter y:");
    scanf("%d",&y); 
```

        // ^ int 的地址 *

应该：

```
 printf("Enter x:");
    scanf("%d",x);
    //         ^ address of int
    printf("Enter y:");
    scanf("%d",y);
    //         ^ address of int 
```

在您编写的代码中，您读入了 int 指针，例如覆盖 int 的地址，然后取消引用它（另外），这会导致分段错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T04:59:21.900

您可能需要更正一些错误。

** scanf 部分在这里制造了一些麻烦。他们应该像

```
scanf("%d",x);
scanf("%d",y); 
```

** 你`first_node`应该连接到某事。我假设它是一个假头。所以在引入你的`cur`节点之后，你应该有`first_node->next = cur`

** 这个链表中的每个节点都没有连接到任何东西。你应该在你的主要功能中有这些：

```
while(inp_sum(&cur->x,&cur->y)<100){
    cur->next=malloc(sizeof(struct link_list));
    struct link_list *temp = cur;
    cur=cur->next;
    cur->next=0;
    cur->prev=temp;
} 
```

# image - bmp和jpg的文件结构有什么区别？

> ID：11822548
> 
> 赞同：2
> 
> 时间：2012-08-06T04:25:51.420
> 
> 标签：image

我正在做一个微控制器项目，我需要考虑我应该买什么相机。我想知道这些格式之间的文件结构差异是什么。

***以下是我编造的，但这是我想要获得的信息。***

> bmp 文件中第 5 个字节的数据是文件头，第 6 个字节是 RGB 的第一个 R 值。每三个字节是图像像素的完整信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T04:50:51.737

查看[BMP 的 Microsoft 参考](http://support.microsoft.com/kb/q81498)（尽管有变体）和[JPEG 的 W3C 规范](http://www.w3.org/Graphics/JPEG/jfif3.pdf)；列举差异留给读者:)

# google-drive-api - Google Drive 应用程序 - 数据库支持？

> ID：11822550
> 
> 赞同：1
> 
> 时间：2012-08-06T04:26:18.347
> 
> 标签：google-drive-api

可以创建什么样的数据库来处理谷歌驱动器中的数据？

我想创建一个谷歌驱动器应用程序，我必须保存一些数据（文本）以供将来操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:42:13.670

我不太明白你的问题。您可以将任何文件保存到 Google Drive。所以，如果你想备份像 SQLite3 这样的基于文件的数据库，你可以。

# java - HashMap 中的链接

> ID：11822552
> 
> 赞同：0
> 
> 时间：2012-08-06T04:26:24.510
> 
> 标签：java, hashmap, chaining, hash-collision

代码：

```
public static void main(String[] args) {
    Map<String,String> map= new HashMap<String,String>();
    map.put("a", "s");
    map.put("a", "v");

    System.out.println(map.get("a"));

} 
```

现在，根据我的理解，由于两种情况下的键值`put`相同，即`a`必然会发生冲突，因此会发生链接。[如果我错了，请纠正我]。

现在，如果我想检索映射到键值的所有值的列表，`a`我该如何获取它？

现在只有我的`println`版画`v`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T04:28:27.667

*这与冲突*或*链接*无关：您正在用`a`新值替换旧值。

地图保留唯一的键。*当两个不同的*键碰巧基于特定的哈希函数获得相同的哈希值时，哈希数据结构中将发生冲突/链接。或者在 java 中，您可以显式创建一个返回相同值的对象[`hashCode()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)。

如果您想为一个键映射多个值，那么您需要使用不同的数据结构/类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T04:28:57.573

请参阅 java 文档`put`

将指定值与此映射中的指定键关联（可选操作）。**如果映射先前包含键的映射，则旧值将替换为指定值。**（当且仅当 m.containsKey(k) 返回 true 时，映射 m 被称为包含键 k 的映射。）

当两个**不同**的键出现相同的`hashcode`而不是两个**相同**的键时，就会发生冲突。

```
class StringKey {
String text;

public StringKey() {
    text = "";
}

public StringKey(String text) {
    this.text = text;
}

public String getText() {
    return text;
}

public void setText(String text) {
    this.text = text;
}

@Override
public int hashCode() {
    if (text != null) {
        text.substring(0, 1).hashCode();
    }
    return 0;
}

@Override
public boolean equals(Object o) {
    if (o instanceof StringKey) {
        return ((StringKey) o).getText().equals(this.getText());
    }
    return false;
}

public static void main(String[] args) {
    Map<StringKey, String> map = new HashMap<StringKey, String>();
    StringKey key1 = new StringKey("a");
    StringKey key2 = new StringKey("b");

    map.put(key1, "s");
    map.put(key2, "v");

    System.out.println(map.get(key1));
    System.out.println(key1.hashCode() + " " + key2.hashCode() + " " + key1.equals(key2));
}
} 
```

输出是

```
s
0 0 false 
```

现在这将导致`collision`; 但是您不能从映射键和值的输出中解释这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T04:33:19.030

就像其他人已经建议的那样，对于您的情况，没有碰撞之类的东西。

这仅仅是因为 Hashmap 只接受一个唯一的键。

但是，如果您希望密钥不是唯一的，您可以有其他选择，例如[Google Guava Multimap](http://tomjefferys.blogspot.sg/2011/09/multimaps-google-guava.html)或[Apache Multimap](http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/MultiMap.html)

使用 Google 库的示例：

```
public class MutliMapTest {
public static void main(String... args) {
Multimap<String, String> myMultimap = ArrayListMultimap.create();

// Adding some key/value
myMultimap.put("Fruits", "Bannana");
myMultimap.put("Fruits", "Apple");
myMultimap.put("Fruits", "Pear");
myMultimap.put("Vegetables", "Carrot");

// Getting the size
int size = myMultimap.size();
System.out.println(size);  // 4

// Getting values
Collection<string> fruits = myMultimap.get("Fruits");
System.out.println(fruits); // [Bannana, Apple, Pear]

Collection<string> vegetables = myMultimap.get("Vegetables");
System.out.println(vegetables); // [Carrot]

// Iterating over entire Mutlimap
for(String value : myMultimap.values()) {
 System.out.println(value);
}

// Removing a single value
myMultimap.remove("Fruits","Pear");
System.out.println(myMultimap.get("Fruits")); // [Bannana, Pear]

// Remove all values for a key
myMultimap.removeAll("Fruits");
System.out.println(myMultimap.get("Fruits")); // [] (Empty Collection!)
}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T04:28:36.373

第二个[`put()`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)简单地覆盖了第一个`put()`写的内容。没有链接。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-06T04:28:38.537

Second`put`替换 first ，因此在[Hashmap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)`put`中只有一个键为“a”的值。

所以你的地图只包含

```
map.put("a", "v"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-06T04:30:14.157

> 现在，根据我的理解，由于两个 put 案例中的键值是相同的，即 a，因此必然会发生冲突，因此会发生链接。[如果我错了，请纠正我]。

你错了。这不是[地图](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)的工作方式。考虑使用 Google 的 Guava 库中的[MultiMap](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)。

你总是可以自己动手：

```
Map<String, ArrayList<String>>(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-06T04:33:52.560

您必须`HashMap`按照以下方式进行

```
public static void main(String[] args) {
    HashMap<String, ArrayList<String>> map = new HashMap<String, ArrayList<String>>();
    if ( map.get("a") == null ){
        map.put("a", new ArrayList<String>());
    }

    ArrayList<String> innerList = map.get("a");
    innerList.add("s");
    innerList.add("v");

    map.put("a",innerList);

    System.out.println(map.get("a"));
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-06T04:54:18.023

HashMaps 中使用的散列算法一开始就非常模糊。在内部，HashMap 只不过是一个带有索引的数组。这里的索引通常称为“hashValue”。由于 hashValue 是数组中元素的索引，它必须小于 HashMap 本身的大小。HashMap 的哈希算法将键的哈希码转换为 hashValue。这是 Map 存储条目（键值对）的地方。

当一个元素被放入一个 Map 时，它会从元素键的 hashcode 中生成 hashValue，并将 Entry 存储到该索引处的数组中，也就是 hashValue。现在，散列算法只能在一定程度上有效，即我们永远不能保证为两个不同的键生成的 hashValue 总是不同的。在两种情况下可能相同：1）密钥相同（如您的情况） 2）密钥不同，但为两个密钥生成的 hashValue 相同。

我们根本无法在数组中的 hashValue 位置替换 Entry 的值，因为这将违反第二个条件，这是非常有效的。这就是 equals() 出现的地方。现在，HashMap 检查新键与该索引条目中存在的键是否相等。如果两个键相同，则表示替换，否则为冲突，HashMap 使用适当的冲突技术。

现在，如果您想要为特定键放置的所有值的列表，请考虑使用复合映射 `HashMap<String, List<String>>`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-06T05:12:42.323

您尝试放入的两个键`HashMap`具有相同的`HashCode`. 因此，第一个值被覆盖，您最终将在`HashMap`.

您可以通过覆盖他们的`hashCode()`方法将两个相似的对象放在同一个 HashMap 中。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-10-12T15:16:15.237

关于使用 HashMap 时实际发生链接的时间的进一步说明：

HashMap 的 Java 实现将**覆盖**键或将对象**链接**到它，具体取决于以下内容：

1.  您将对象*foo*作为键，哈希码 X 放入地图
2.  您将另一个具有相同哈希码 X 的对象*栏（作为键..）放入地图中*
3.  由于哈希值相同，因此算法需要将对象*bar*放在已存储*foo*的同一索引上。然后它会查询*foo的**equals*方法，以确定是否应该将*bar***链接**到*foo*（即*foo.next()*将变为*bar*）或用 bar**覆盖**foo：

     *******3.1.如果equals返回true，则*foo* & *bar*要么是同一个对象，要么它们在语义上是相同的，并且将发生覆盖而不是链接。

    3.2\. 如果 equals 返回 false，则*foo*和*bar*被视为两个不同的实体，并且将发生链接。如果您随后打印您的 HashMap，您将看到*foo*和*bar*。*******

# ruby - 公共初始化向量？

> ID：11822557
> 
> 赞同：2
> 
> 时间：2012-08-06T04:26:54.557
> 
> 标签：ruby, cryptography

我在 Ruby 中使用 OpenSSL 密码在客户端和服务器之间发送文本，显然使用 IV 是个好主意，但是对于服务器端的解密，我需要生成客户端的 IV边。我的问题是我会在通过网络发送 IV 时遇到问题吗？我不知道关于密码学的第一件事，所以我不知道 IV 是否可以用来解密消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T07:21:52.073

IV 确保即使您要使用相同的密钥加密两个相同的明文，它们也会产生不同的密文（因为每次加密都应该使用一个新的、随机生成的 IV）。

IV 不能在没有密钥的情况下用于解密消息，并且不需要安全传输，因此可以与加密消息一起通过网络安全地发送。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T07:28:56.950

IV 是公共信息，通过网络发送它是完全可以的。但是，您应该对每一次加密都使用加密安全随机数，尤其是在您使用 CBC 模式时。在这种情况下使用某种可预测的 IV 会使您的加密容易受到某些类型的攻击。

如果您对密码学和使用完全陌生，`Cipher`请查看[文档](http://ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/Cipher.html)，我们在其中添加了一些信息，可以帮助您入门。它说明了一些最佳实践，其中包括正确处理 IV。

# c# - XmlDocument 被称为过时的

> ID：11822559
> 
> 赞同：-2
> 
> 时间：2012-08-06T04:27:12.200
> 
> 标签：c#, xmldocument, visual-c#-express-2010

Visual c# 2010 Express 说 XmlDocument 已过时，这个类会在以下版本的 c# 中删除吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T04:33:12.567

[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument%28v=vs.100%29.aspx)没有被标记为过时，事实上[.Net 框架 4.5 也支持](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument%28v=vs.110%29.aspx)它。可能是您在[XmlDataDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldatadocument.aspx)上收到警告，该警告标记为已过时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T05:47:18.293

我在 Visual Studion 2010 Ultimate 中使用 .Net Framework 4.0，此处未将其标记为已过时。就像哈比卜回答说的[`XmlDataDocument`](http://msdn.microsoft.com/en-us/library/system.xml.xmldatadocument.aspx)那样，你可能正在看。

此外，将一个类标记为过时并不意味着它会立即从环境中删除。它只是意味着有一个替代品，我们应该使用那个替代品，因为过时的类将从未来的版本中删除。如果您继续使用它，您将不得不为将来的环境更改代码。

# ruby - 将 Sinatra 应用程序部署到 heroku 时出现 Bundle 和 Gem 错误

> ID：11822560
> 
> 赞同：1
> 
> 时间：2012-08-06T04:27:28.760
> 
> 标签：ruby, deployment, heroku, sinatra

更新

我做了以下事情，这是我仍在日志中的调用堆栈：

```
2012-08-06T12:30:57+00:00 heroku[slugc]: Slug compilation finished
2012-08-06T12:30:58+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e $RACK_ENV -p 56970`
2012-08-06T12:30:59+00:00 app[web.1]: bash: bundle: command not found
2012-08-06T12:31:00+00:00 heroku[web.1]: Process exited with status 127
2012-08-06T12:31:00+00:00 heroku[web.1]: State changed from starting to crashed
2012-08-06T12:31:08+00:00 heroku[router]: Error H10 (App crashed) -> GET arcane-garden-1058.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-08-06T12:31:08+00:00 heroku[router]: Error H10 (App crashed) -> GET arcane-garden-1058.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes=
2012-08-06T12:31:09+00:00 heroku[router]: Error H10 (App crashed) -> GET arcane-garden-1058.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-08-06T12:31:10+00:00 heroku[router]: Error H10 (App crashed) -> GET arcane-garden-1058.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes= 
```

我的 Procfile 文件现在看起来像这样：

```
root: = ::File.dirname(__FILE__)
require: ::File.join( root, 'app' )
web: bundle exec thin start -R config.ru -e $RACK_ENV -p $PORT
run: WPL.new 
```

Gemfile 看起来像这样：

```
source :rubygems
gem 'thin'
gem 'sinatra'
gem 'shotgun'
gem 'sinatra'
gem 'mongo'
gem 'json' 
```

我的 app.rb 现在看起来像这样： require 'shotgun' require 'sinatra' require 'mongo' require 'json/pure'

```
class WPL < Sinatra::Application 
  db = Mongo::Connection.new.db('docs')

  get '/' do
    File.read(File.join('public', 'index.html'))
  end
end 
```

config.ru 看起来像这样：

```
require './app'
run WPL.new 
```

* * *

所以我正在尝试部署我的应用程序，但遇到了几个问题。在本地一切正常。我将应用程序推送到heroku，一切似乎都很好，但是当我检查日志时，它说它找不到命令'bundle'。

这就是我的 Procfile 的样子。

```
web: bundle exec ruby app.rb -p $PORT 
```

我尝试删除`bundle exec`并`ruby app.rb -p $POST`在此过程中走得更远，但出现更多错误。

我得到的下一组错误都与 gem 相关。它根本找不到任何需要的宝石。这就是我的 app.rb 的样子。

```
require 'shotgun'
require 'sinatra'
require 'mongo'
require 'json/pure'

db = Mongo::Connection.new.db('docs')

get '/' do
  File.read(File.join('public', 'index.html'))
end 
```

我的 Gemfile 看起来像这样。

```
source :rubygems
gem 'sinatra'
gem 'shotgun'
gem 'sinatra'
gem 'mongo'
gem 'json' 
```

我的 config.ru 看起来像这样。

```
require './app'
run Sinatra::Application 
```

运行`heroku run console`也会导致这个错误`bundle: command not found`

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T03:10:27.740

不知道发生了什么，但我刚刚在 heroku 上删除了我的应用程序并创建了一个新应用程序。然后它起作用了。我想当我最初创建应用程序时，heroku 认为该应用程序是一个节点应用程序，因为我缺少我的 Procfile。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:42:04.267

您的 Procfile 没有使用您的 config.ru。

对于 Sinatra 应用程序，我会使用如下所示的 Procfile：

```
web: bundle exec thin start -R config.ru -e $RACK_ENV -p $PORT 
```

[这个](https://stackoverflow.com/questions/8340943/deploying-sinatra-app-with-config-ru-on-heroku-cedar-stack)类似的问题也可能会有所帮助。

# session - 会话总是存储以前的值

> ID：11822568
> 
> 赞同：0
> 
> 时间：2012-08-06T04:28:48.207
> 
> 标签：session

我正在开发一个电子邮件发送表单。它有一个验证码安全图像。每当我刷新图像以加载新的验证码时，它总是存储上一个会话值。它从不存储正确的。

但在我的本地主机中它工作正常。非常感谢。

```
class CaptchaSecurityImages {

    var $font = 'monofont.ttf';

    function generateCode($characters) {
        /* list all possible characters, similar looking characters and vowels have been removed */
        $possible = '23456789bcdfghjkmnpqrstvwxyz';
        $code = '';
        $i = 0;
        while ($i < $characters) { 
            $code .= substr($possible, mt_rand(0, strlen($possible)-1), 1);
            $i++;
        }

        $_SESSION['securitycode'] = $code;

        return $code;
    }

    function CaptchaSecurityImages($width='120',$height='40',$characters='6') {
        $code = $this->generateCode($characters);
        /* font size will be 75% of the image height */
        $_SESSION['securitycode'] = $code;      
        $font_size = $height * 0.75;
        $image = @imagecreate($width, $height) or die('Cannot initialize new GD image stream');
        /* set the colours */
        $background_color = imagecolorallocate($image, 255, 255, 255);
        $text_color = imagecolorallocate($image, 20, 40, 100);
        $noise_color = imagecolorallocate($image, 100, 120, 180);
        /* generate random dots in background */
        for( $i=0; $i<($width*$height)/3; $i++ ) {
            imagefilledellipse($image, mt_rand(0,$width), mt_rand(0,$height), 1, 1, $noise_color);
        }
        /* generate random lines in background */
        for( $i=0; $i<($width*$height)/150; $i++ ) {
            imageline($image, mt_rand(0,$width), mt_rand(0,$height), mt_rand(0,$width), mt_rand(0,$height), $noise_color);
        }
        /* create textbox and add text */
        $textbox = imagettfbbox($font_size, 0, $this->font, $code) or die('Error in imagettfbbox function');
        $x = ($width - $textbox[4])/2;
        $y = ($height - $textbox[5])/2;
        imagettftext($image, $font_size, 0, $x, $y, $text_color, $this->font , $code) or die('Error in imagettftext function');
        /* output captcha image to browser */
        header('Content-Type: image/jpeg');
        imagejpeg($image);
        imagedestroy($image);

    }

} 
```

这是我用来生成验证码的类。

# authentication - 在 Ubuntu linux 上将用户添加到 Mongodb 时出错

> ID：11822573
> 
> 赞同：-1
> 
> 时间：2012-08-06T04:29:44.213
> 
> 标签：authentication, mongodb

我正在尝试将管理员用户添加到在 AWS 上的 Ubuntu Linux 上运行的 Mongodb -
从 mongo shell 工作，我首先“使用管理员”，然后当我运行 db.addUser("admin', "password) 命令失败时说“磁盘空间不足时无法获取写锁",

我检查了磁盘空间，还有 1GB 剩余 - 有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:02:39.467

我使用 EC2 实例已经有几年了，我使用与 MongoDB 没有任何共同之处的软件发现了类似的错误，所以我打赌这是与 EC2 磁盘卷管理相关的问题，而不是 MongoDB 问题。

在我看来，它应该是以下错误之一：

*   您已使用无法修改 Mongo 数据目录的用户启动 MongoDB。您确定您已经使用对数据目录具有写入权限的用户启动了 MongoDB 吗？

*   MongoDB 数据目录指向一个完整的磁盘卷（在使用 apt、yum 或 Amazon EC2 实例上的任何包管理器安装软件时，这很常见）。检查您的 MongoDB 数据目录配置并在命令行上使用“df -h”来查看您有多少可用磁盘空间。

# java - 附加到 Excel 工作表的服务器日志记录

> ID：11822581
> 
> 赞同：2
> 
> 时间：2012-08-06T04:31:28.410
> 
> 标签：java, excel, logging, log4j, appender

我需要登录到服务器中的 excel 表，就像普通的 log4j appender 一样，除了 excel 表（这是在 java 中）。

我目前没有找到有关此的适当信息。是否有任何提供附加程序或可以使用的库？还想知道附加到 excel 文件而不是普通的文本文件日志、性能、可能的错误等是否有任何影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T05:09:06.173

直接登录到 Excel 工作表似乎不是一个好主意。您将两个职责“记录”和“分析日志”混合到一个代码中。

您可能希望将数据导入电子表格以进行特定分析。在这种情况下，您可能还需要特定的格式（关于哪些数据进入哪个表）。考虑编写一个特定的解析器，然后将数据导入到 Excel 工作表中——使用像 apache-poi 这样的 api，这将是直截了当的。

如果您真的想要特殊的日志记录，请从[使用 log4j 记录到数据库](https://stackoverflow.com/questions/1364322/log-to-a-database-using-log4j)开始，其中解释了数据库日志记录，然后将其制作为 excel。

只要文件系统允许，日志记录是无限的。Excel（取决于其版本）对可以存储的记录数有限制。（bemace 评论中的其他问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T05:22:13.213

我认为直接回答您的问题可以是：“您可以创建自己的 log4j appender”（这就是[您](http://www.javaworld.com/javaworld/jw-12-2004/jw-1220-toolbox.html?page=1)可以做到的方式）。从技术上讲，log4j 带有大量的 appender，你总是可以创建一个新的。

这个 appender 可能会使用 Apache POI ([链接](http://poi.apache.org/))，它提供了一个用于创建和格式化 excel 电子表格的 Java API。

这一切都很好，并且在技术上会起作用，但在这样做之前我会三思而后行。毕竟使用 Excel 记录日志听起来很尴尬 :)

如果您仍然拥有 Excel 电子表格，我可以提出一个折衷方案。使用“文件附加器”创建 CSV 文件（逗号分隔值）。excel 将很容易读取这样的文件，并且足以进行初始处理。您甚至不需要编写附加程序，只需确保正确配置布局即可。

或者，我可以向您指出一些有助于日志处理的工具：

[阿帕奇电锯](http://logging.apache.org/chainsaw/)

[莉莉丝](http://lilith.huxhorn.de/)

[这里](http://code.google.com/p/log4j-viewer/wiki/Alternative_Log4j_viewers)有一个不错的日志查看器列表，我相信您可以通过 Google 搜索更多信息。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T18:43:56.373

使用 log4j 和 patternlayout 记录 CSV 格式。然后使用 Chainsaw 分析日志 - Chainsaw 的最新开发人员快照改进了配置 UI 并具有大量新功能，使这变得简单：

[http://people.apache.org/~sdeboy](http://people.apache.org/~sdeboy)

# android - 解析 JSON 时出错

> ID：11822583
> 
> 赞同：0
> 
> 时间：2012-08-06T04:31:33.417
> 
> 标签：android, json

我是 Android 开发的新手。我正在将 JSON 数据从 Android 发送到我的 PHP 服务器。但我收到一个错误：

```
Error parsing data org.json.JSONException: Value `<br` of type java.lang.String cannot be converted to JSONObject". 
```

这是我的 PHP 代码：

```
<?php

$con = mysql_connect("localhost","custome234r","reswtdf123");
if (!$con)
    die('Could not connect: ' . mysql_error());
mysql_select_db("customer_dd_test", $con);

$jsonFeedbackResult = $_REQUEST['results'];

$flagToOpenTicket = false;            

$arrResult = json_decode(stripslashes_deep($jsonFeedbackResult));

$feedbackname = $arrResult[0]['feedbackname'];
$email = $arrResult[0]['email'];

unset($arrResult[0]);
$finalArray = array_values($arrResult);
foreach($finalArray as $key => $arrQuestionWithAnswer)
{
    if($arrQuestionWithAnswer['answer'] == 'bad' || $arrQuestionWithAnswer['answer'] == 'worst')
    {
        $flagToOpenTicket = true;
        break;
    }
}

if($flagToOpenTicket)
{
    $insertQuery = 'INSERT INTO dev_ticket(email, feedbackname) VALUES'; 
    $insertQuery .= '("'.$email.'", "'.$feedbackname.'"),';
    $executeQuery = trim($insertQuery,',');
    mysql_query($executeQuery);

}
mysql_close($con);
print(json_encode(array('response'=>$feedbackname)));

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T04:34:42.803

听起来您嵌入了一些 HTML，可能是 PHP 错误/警告字符串。来自服务器的响应必须**仅**包含 json 数据。其他任何内容都将成为字符串的一部分并导致解析错误。

获取您在 android 中点击的确切 url，然后查看它在浏览器中显示的内容。

# css - 为 chrome 和 safari 划分 css

> ID：11822584
> 
> 赞同：0
> 
> 时间：2012-08-06T04:31:34.090
> 
> 标签：css, google-chrome, safari

有没有办法为 chrome 和 safari 定义不同的样式集？通常有一个 webkit 属性适用于它们，但我需要将它们分开，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T04:38:12.300

你有没有尝试过这样的事情：[http ://rafael.adm.br/css_browser_selector/](http://rafael.adm.br/css_browser_selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T04:37:42.027

您可以使用 JavaScript JQuery 函数来获取客户端浏览器类型并为元素定义特定的 CSS。！

# c++ - 在 unix/win32 上有效地计算日期/时间戳以进行日志记录

> ID：11822588
> 
> 赞同：5
> 
> 时间：2012-08-06T04:31:58.500
> 
> 标签：c++, winapi, unix, logging, timestamp

我的情况是，在对我们的系统进行分析和分析后，得出的结论是，系统的日志记录组件是占用总运行时间约 17% 的众多瓶颈之一 - 记录了很多事情.

其中，记录器消耗的大约 5% 的时间与生成以下格式的 ascii 日期/时间戳有关：YYYYMMDD HHMMSS.fff - 我们大约每秒记录约 700k 行。（大约 700K x (localtime and gettimeofday) 每秒调用）

我想知道 SOers 有什么技术可以有效地生成时间戳。

跨平台解决方案将受到欢迎。

注 1：我们研究了 Boost.datetime - 它很棒，但是对于我们的需求来说有点太慢了，std::chrono 是一个完美的解决方案，但是不幸的是我们必须支持 pre c++11 编译器。

注意 2：我们已经实现了一个简单的优化，它每 24 小时只计算一个日期部分 (yyyymmdd)，因此每行只有 1 个 gettimeofday 调用 - 但没有多大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T04:41:59.913

如果您可以选择使用 C++11，您应该查看[std::chrono](http://en.cppreference.com/w/cpp/chrono/duration)。

如果做不到这一点，优化将取决于您需要的分辨率。我会问您是否绝对需要日志记录时间戳，或者带有序列信息的偶尔时间戳是否有用？

例子：

```
<timestamp1> <seq_num_0> ...
<timestamp1> <seq_num_1> ...
....
<timestamp1> <seq_num_n-1> ...
<timestamp2> <seq_num_0> ... 
```

在我看来，你有两个问题：

1.  与其他系统同步时间戳
2.  在单个系统上获取准确的时间戳

我会使用基于计时器的系统每毫秒更新**两次**时间戳，并在更新之间重新使用它。然后，我会确保运行您的代码的系统的时钟与原子钟同步。您生成两次时间戳以尝试补偿底层操作系统计时器机制的脆弱性。

我不认为你能得到比这更好的了。

编辑：实际上，你可以。确保仅在时间戳字符串更改时对其进行格式化。你也不需要序列号，如果你能保证条目按照它们进入的顺序被记录。鉴于这两个假设，你的日志记录问题现在减少到你可以连接和写出两个字符串的速度。

更新 2：如果 BOOST 不适合并且您不能使用 C++11，则归结为：

1.  使用计时器每毫秒设置和格式化两次时间戳 - 您可以通过操作系统级别的 API 执行此操作。
2.  确保事件按照它们进入的顺序记录。

假设 I/O 不是您的瓶颈，那么您的问题就是快速字符串连接之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:44:18.183

我会延迟任何和所有格式，直到实际需要：

```
struct log_entry {
    struct timeval timestamp;
    unsigned int code;
    union {
        struct param1 p1;
        struct param2 p2;
    };
}; 
```

这些`paramN`结构以当时的任何形式包含适合事件的数据，但作为副本（因此可以单独分析日志数据）。

根据您的要求，您可以将此数据保存在环形缓冲区中，并不断覆盖旧数据，或者在达到一定百分比时将其转储到磁盘。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-06T06:20:21.500

**编辑：**现在有多个反对者。请发表评论，以便我可以正确解决问题。谢谢！

您可以重新组织您的代码，以便您的记录器从缓冲区读取日期时间戳字符串，该缓冲区由其他线程每秒更新 N 次（取决于您所需的分辨率）。每秒 4 次：

```
struct current_time_stamp {
    char timestr_[4][16];
    unsigned index_;
    unsigned subsecond_;
    const char *get () const { return timestr_[index_%4]; }
    void update () {
        // ... update string in timestr_[(index_+1)%4] ...
        // ... if (index_ + 1)%4 is zero, recompute subsecond_
        ATOMIC_INCREMENT(index_);
        // ... also need a memory barrier for timestr_ update
    }
}; 
```

每个日志的亚秒级分辨率将从高性能计数器读取。DeadMG 建议`QueryPerformanceTimer`在 Windows 上，在 Linux（和 POSIX）上有`clock_gettime`. 但是，如果这些实现的开销对您来说仍然很高，您可以使用内联汇编直接查询处理器上的时间戳计数器（参见`rdtsc`x86）。亚秒级值与结构中记录的值相加，以获得正确的偏移量。

如果您可以摆脱以二进制格式记录时间戳，那将摆脱格式问题。

# algorithm - 计算反转次数（从概念上讲？）

> ID：11822589
> 
> 赞同：2
> 
> 时间：2012-08-06T04:32:33.493
> 
> 标签：algorithm

总而言之，我试图了解我们如何准确地计算两个数组之间的反转次数。

例如，假设我们有以下两个数组：

A = [1, 2, 3, 4, 5, 6] B = [6, 3, 5, 4, 2, 1]

我将如何从概念上计算反转次数？也就是说，只看这两个数组，而忽略所涉及的编码。

另外，我知道在两个数组之间绘制线段的约定，但我试图在这里获得更深入的理解。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T09:34:20.823

我不确定两个数组的多次反转是什么意思。

**对于一个数组：** 反转是一对 (a,b)，其中 a 在顺序上位于 b 之前，但 a > b。因此，从概念上讲，您可以尝试 B 的每一对。让我们从 6 开始，有 5 个反转：(6,3), (6,5), (6,4), (6,2), (6,1 ）。接下来是 3，只有 2 个：(3,2), (3,1)。以此类推，这里的结果是 13。

然而，这个算法非常幼稚并且运行 O(n^2)。更好的解决方案是基于归并排序算法，它在 O(n log n) 中运行。你可以[在这里查看](https://stackoverflow.com/a/6424847/1432471)。我认为这仅适用于已排序的第一个数组。

**对于两个数组：**当涉及到 2 个数组时（再次从概念上讲），只需在 A 数组上方键入 B 数组并绘制连接相同元素的线。交叉的数量应该是反转的数量。这正是上面链接的基于合并排序的算法的工作原理。看看下面的图片：

![反转次数](../Images/5fa01b1c710ceb6cd3fe47948893bee3.png)

结果还是13，所以这个方法确实有效。

# javascript - 如何使用js在两个aspx页面之间进行通信？

> ID：11822591
> 
> 赞同：1
> 
> 时间：2012-08-06T04:32:39.707
> 
> 标签：javascript, asp.net, .net, modalpopupextender

我有两个 aspx 页面，即 one.aspx 和 two.aspx，我有一个名为 link.js 的 javascript 文件

现在我需要使用 javascript 文件作为中间文件在这两个 aspx 页面之间进行通信。

在 one.aspx 文件中，我有一个 ModalPopupExtender，其面板的内容位于 two.aspx 中，即在“one.aspx”中：

```
<html>
<head>    
<script type="text/javascript" src="link.js"></script>

<script type="type="text/javascript">
   function test(){
     var str=callPopup();
     document.getElementById('pnlPopUp').innerHtml = str;
   }
</script>
</head>
<body>
<ajaxToolkit:ModalPopupExtender ID="popup1" runat="server" TargetControlID="btnOK" CancelControlID="btnCancel" PopupControlID="pnlPopUp"></ajaxToolkit:ModalPopupExtender>

<asp:Panel ID="pnlPopUp" runat="server"></asp:Panel>

  </body> 
</html> 
```

在“两个.aspx”中：

```
<html>
  <head>
    <script type="text/javascript" src="link.js"></script>
   </head>
  <body>
<asp:Panel ID="pPanel1" runat="server">
    <table>
        <tr>
            <td>
                <p>test</p>
            </td>
            <td>
                <asp:Button ID="BtnTest" runat="server" Text="Click" OnClientClick="javascript:alert('hello world..!'); return false;" />
            </td>
        </tr>
    </table>
</asp:Panel> </body> </html> 
```

在 link.js 中：

```
function callPopup() {
    var s = document.getElementById('pPanel1').innerHtml;
    return s;
} 
```

我可以从 one.aspx 调用 callPopup() 但无法从 two.aspx 页面获取内容。请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T05:31:09.490

我会给你两种方法来实现这一点。

1.  使用 SignalR 向多个客户端广播。[在https://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR)阅读更多内容

2.  （更底层。SignalR 通常会为您处理所有这些）

尝试使用 Ajax 调用功能服务器端：[http](http://www.w3schools.com/ajax/default.asp) ://www.w3schools.com/ajax/default.asp 。然后，您可以将称为服务器端的函数写入某个输出源；一些例子：文件、会话、cookie。

然后让另一个网页通过 Ajax 不断地从相同的输出（文件、会话或 cookie）源中读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T18:03:28.183

你确定你的架构是正确的吗？您需要 two.aspx 真的有充分的理由吗 - one.aspx 不能全部完成吗？

过去使用过 AjaxToolkit，我很难想出在现代 Web 开发中使用它的充分理由。你看过[http://knockoutjs.com/](http://knockoutjs.com/)或[Backbone](http://backbonejs.org/)吗？他们真的很值得一看。

*我知道这本身*并不能回答你的问题，我只是想把你从痛苦的世界中拯救出来。

# android - 在android中更新ProgressBar

> ID：11822595
> 
> 赞同：1
> 
> 时间：2012-08-06T04:32:56.583
> 
> 标签：android, progress-bar, touch-event, ontouchlistener

```
Image.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                Trace(array);
                .....
                int  print_prog;
                int total_pixels = mPixels_printedpixelcomparison.capacity();
                **print_prog** = (printedpixel/total_pixels)*100;
                printProgress.setProgress(**print_prog**);
                ......
           }

  private Bitmap Trace(int[] imageArray)
  {
    .....
    printedpixel +=100;
    .....   

 } 
```

> 在上面的代码中**print_prog**始终为零，并且我的进度条也没有变化（它只是空白）导致零的原因......有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T04:36:22.230

这里的问题是`int`分裂。在 Java 中，`int`除法会截断余数，以便它可以返回`int`.

```
(printedpixel/total_pixels)*100; 
```

`printedpixel/total_pixels`因此，将始终返回 0。0*100 永远是 0。

您可以使用`double`'s 或`float`'s 来解决此问题。

```
double  print_prog;
double total_pixels = (double) mPixels_printedpixelcomparison.capacity();
**print_prog** = (printedpixel/total_pixels)*100;
printProgress.setProgress(**print_prog**); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T04:52:25.607

@nicholas.hauschild 的答案是正确的，但是更简单、更快的解决方案是替换

```
(printedpixel/total_pixels)*100; 
```

和

```
(printedpixel*100/total_pixels); 
```

# oracle - 如何比较 oracle 日期和 lotusscript 日期？

> ID：11822599
> 
> 赞同：0
> 
> 时间：2012-08-06T04:33:22.267
> 
> 标签：oracle, date, lotusscript

在 oracle 表中有一列包含当前行的最后修改日期。如何在 Lotusscript 中格式化日期以使其与 oracle 日期类型相当？我试过 CStr 和 TO_CHAR 但这只是比较字符，而不是实际日期。如果可能的话，我想在 lotusscript 中创建一个不需要格式化但可以与 oracle 日期进行比较的日期。LAST_MODIFIED > lastdate 之类的东西（这个 oracle 日期大于 lotusscript 日期）。我无法控制 oracle 表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:18:00.480

使用 to_date 函数创建 Oracle 日期。

to_date(,'格式')

将您的日期格式化为字符串，例如：06-05-2012，这将返回一个 Oracle 日期：

在 plsql 中看起来像：

```
my_string := '06-08-2012';
my_date := to_date(my_string,'DD-MM-YYYY'); 
```

当然，您可以直接在 SQL 中执行此操作。

```
where LAST_MODIFIED > to_date(<your_date_string_to_compare>,<your_date_format>) 
```

# php - PHP-Mysql 数据库 Windows 安装程序

> ID：11822600
> 
> 赞同：0
> 
> 时间：2012-08-06T04:33:24.757
> 
> 标签：php, mysql, windows-installer

我在工作的本地计算机上设计了一个简单的数据库。但是我需要将它安装在工作中的其他一些计算机上。这是一个供我的同事私人使用的个人数据库。我想知道是否有任何方法可以将组件（PHP5、Mysql 数据库和 Apache 网络服务器）通过 .exe 或任何 Windows 可安装文件完全安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T05:14:11.260

如果您想在 IIS 上使用 PHP 框架，Microsoft WPI（Web 平台安装程序）是最佳选择。在 WPI 上有很多应用程序池，分为数据库、IIS 工具、.NET、开发工具、CMS 等类别。所有安装都是无人值守的。

[http://www.microsoft.com/web/downloads/platform.aspx](http://www.microsoft.com/web/downloads/platform.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T05:05:05.523

WAMP 或 XAMPP 是安装 Apache、PHP 和 MYSQL 服务器的可执行文件，因此只需将数据库导出为 sql 文件，安装 WAMP 或 XAMPP 并将文件导入每台机器上的 phpMyAdmin。

我不知道这对你来说是否是最好的解决方案，我认为最好的解决方案是让所有用户看到同一个数据库，所以你必须阅读更多关于制作共享服务器的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T05:07:21.237

您确定要在每台机器上安装整个设置吗？因为通常数据库和服务器端应用程序代码驻留在一个中央服务器上，而其他客户端可以访问它。

无论如何，如果您想在每台机器上进行设置，那么有两种方法：

1.  所有这些组件都可以作为 zip 文件安装 - 这意味着您可以直接从该文件夹中提取和运行，而无需任何安装。您可以以这种方式设置您的环境和数据，包括应用程序（PHP、数据库和 Web 服务器），相应地更改它们的配置文件，以便它们指向正确的位置/路径，并在各自的位置创建数据文件（用于数据库、Web 应用程序等）文件夹。然后简单地压缩所有内容并分享。目标用户可以简单地提取它并在提取时运行所有内容。您可能需要手动更改目标计算机上的 Windows 设置，例如防火墙等。

2.  第二种方法是保留每个组件（apache、php、数据库）的安装程序，并且还有一个自定义安装程序，它将设置您自己的自定义设置，例如创建数据库、配置 php 和 apache 等。然后创建一个主安装程序并运行上述安装程序之一一个。

希望这可以帮助。

# encryption - 要编码的 RSA 最大块大小是多少？

> ID：11822607
> 
> 赞同：7
> 
> 时间：2012-08-06T04:35:33.990
> 
> 标签：encryption, rsa

我可以在一个周期内加密的 RSA 最大块大小是多少？

4096 位密钥大小的 RSA 算法的最大速度是多少？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-06T05:53:15.543

根据 Lenstra[在此站点上](http://www.keylength.com)可用的更新公式，4096 位 RSA 密钥的安全级别与至少 248 位长的加密散列相匹配，例如 SHA-256。

如果您使用 RSA OAEP（并且您应该），那么您最多可以加密的数据量`modulus size - 2 - 2*hash size`是 446 字节。

使用 RSA PKCS#1 v1.5，您最多可以加密`modulus size - 11`字节，但 RSA PKCS#1 v1.5 提供的安全性较低（不能证明是安全的，随机填充字节的最小数量应扩展到至少 16 个字节） .

如果您需要加密更多数据，则不应简单地将其拆分并在每个块上多次使用 RSA。那是一个安全漏洞。您必须采取不同的方法，更准确地说：

1.  选择一个随机的 128 位对称密钥。
2.  使用经过身份验证的操作模式来加密您的数据（例如 AES-128 GCM）。
3.  使用 RSA OAEP 加密对称密钥。

RSA 加密（与解密不同）非常快，但时间实际上取决于库和您使用的平台。有关一些参考，请参阅[cryptopp 库的网站](http://www.cryptopp.com/benchmarks.html)。

# c# - RouteData.Values["Language"].ToString() 生成空异常

> ID：11822608
> 
> 赞同：0
> 
> 时间：2012-08-06T04:35:57.257
> 
> 标签：c#, asp.net, url-routing

我在我的多语言项目中实现了 URL 路由，我的链接看起来像这样

1> 使用 URL 路由[http://www.example.com/Default.aspx?page=1&Language=en-US](http://www.example.com/Default.aspx?page=1&Language=en-US) 2> 使用 URL 路由[http://www.example.com/1/en-US](http://www.example.com/1/en-US)

3> 和第 3 个场景可以是[http://www.example.com/Default.aspx](http://www.example.com/Default.aspx)或[http://www.example.com](http://www.example.com)

我可以检查查询字符串是否为空或 RouteData 值为空

但在 3 种情况下，我必须检测浏览器默认语言并根据它们重定向它们。

如果我把我的代码写成

```
if (!string.IsNullOrEmpty(Request["Language"]))
  {
   lang = Request["Language"].ToString();
  }
if (!string.IsNullOrEmpty(HttpContext.Current.Request.RequestContext.RouteData.Values["Language"].ToString()))
 {
    lang = HttpContext.Current.Request.RequestContext.RouteData.Values["Language"].ToString();
 } 
```

如果 Route Data 为空，它会生成以下错误`Object reference not set to an instance of an object`

我怎样才能让这个语句在没有 try catch 块的情况下处理空异常

```
HttpContext.Current.Request.RequestContext.RouteData.Values["Language"].ToString(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T04:45:03.877

您可以使用`RouteValueDictionary.ContainsKey`而不是`string.IsNullOrEmpty()`.

目前发生的事情是您`string.IsNullOrEmpty()`需要一个字符串，因此，您自然会调用`.ToString()`RouteData。但是，您正在调用`.ToString()`一个 null 对象，这会导致您的错误。我会像这样重写它：

```
if (HttpContext.Current.Request.RequestContext.RouteData.Values.ContainsKey("Language")) {
    // .. process it here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T04:44:08.290

如果`.Values["Language"]`正在生产`null`，您可以像这样检查它：

```
if(HttpContext.Current.Request.RequestContext.RouteData != null)
{
    var value = HttpContext.Current.Request.RequestContext.RouteData.Values["Language"];
    lang = value == null ? null : value.ToString();
} 
```

# android - 调用需要 API 级别 5（当前最小值为 3）：android.app.Service#startForeground

> ID：11822613
> 
> 赞同：3
> 
> 时间：2012-08-06T04:36:41.243
> 
> 标签：android, sdk

我正在尝试在 Eclipse 中运行 android 源代码。此应用程序的 targetSdkVerison 是 5 。我对 android 完全陌生，并安装了最新的 api（Android 4.1）。在代码的某些部分中，我遇到了错误，例如

```
 public void hideNotification(Service context)
    {
        context.setForeground(false);// error: The method setForeground(boolean) is undefined for the type Service
        getNotificationManager(context).cancel(NOTIF_PLAYING);
    }

    public void showNotification(Service context, long songId)
    {
        context.startForeground(NOTIF_PLAYING, newNotification(context, songId));//error :Call requires API level 5 (current min is 3): android.app.Service#startForeground
    } 
```

我猜这些是因为不同版本的 sdk 之间不兼容。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T04:44:20.760

首先，`setForeground(...)`已被弃用，不再可用。有关更多详细信息，请参阅[此博客](http://android-developers.blogspot.com/2010/02/service-api-changes-starting-with.html)。

您收到此错误是因为清单中定义的最低 SDK 级别为 3。[`startForeground(...)`](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29)需要 API 5+。

现在，为了解决这个问题，你不能支持低于 API 5 的任何东西；根据[Dashboards](http://developer.android.com/about/dashboards/index.html)的数据，99.3% 的用户已经迁移到 API 5+。为此，请将您设置`minSdkVersion`为`5`，并删除您对 的调用`setForeground(...)`。（这将解决两个错误消息。）

*注意*：`setForeground(...)`已从**SDK 中删除**，并且永远不应再使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T04:44:04.503

`Service.setForeground(boolean)`是自 API 级别 5 以来不存在的方法。它已替换为[`startForeground(int, Notification)`](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29).

文档（来自链接）建议了一种方法，您可以使用该方法来支持旧设备，同时仍以 5 或更高版本的 API 为目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T04:44:26.110

从 Android 2.0 开始，由于滥用 Android 1.5 中的应用程序，此方法已被弃用。查看以下博客，了解自那时以来发生了什么变化。

> [http://android-developers.blogspot.ca/2010/02/service-api-changes-starting-with.html](http://android-developers.blogspot.ca/2010/02/service-api-changes-starting-with.html)

另请访问此页面以参考新方法（和一个小示例）。

> [http://developer.android.com/reference/android/app/Service.html#startForeground(int, android.app.Notification)](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29)

# meteor - 如何在订阅 onReady（以前称为 onComplete）时获取最新的收藏

> ID：11822614
> 
> 赞同：1
> 
> 时间：2012-08-06T04:36:47.427
> 
> 标签：meteor, publish-subscribe

我在[Meteor.subscribe](http://docs.meteor.com/#meteor_subscribe)`onReady`上的回调遇到了问题。当它被调用时，正如文档所述：订阅已被标记为完成。但是，它正在修改的集合可能无法处理上次订阅之间的差异。

通过修改 Todos 示例可以看到一个快速演示：

`$ meteor create --example todos`

编辑`client/todos.js`，见第 34 行。将自动订阅块替换为：

```
Meteor.autosubscribe(function () {
  var list_id = Session.get('list_id');
  var onReady = function (done) {
    var list, todos = Todos.find();
    if (todos) {
      list = todos.map(function (todo) {
        return todo.text;
      });
      if (done) {
        console.log("subscription onReady called again 100ms later:", list);
      } else {
        console.log("subscription onReady called:", list);
        setTimeout(function () {
          onReady(true);
        }, 100);
      }
    }
  };
  if (list_id)
    Meteor.subscribe('todos', list_id, onReady);
}); 
```

启动示例，然后在观察控制台的同时从一个待办事项列表单击到另一个（见左上角）。您会注意到，当`onReady`被调用时，该集合包含来自前一个 Todo List 的文档与新选择的 Todo List 连接。

这并不是一个真正的错误，因为`onReady`从来没有暗示它会在*集合*是最新的时被触发，但只有在*订阅*完成时才会触发。

有什么建议可以解决这个问题吗？订阅后收藏更新后，有没有办法立即通知？我想知道我是否应该依赖`.observe`......但依赖客户端？那是可用的客户端吗？我明天可以试试这个……但我很想听听解决方案

仅供参考：我的用例围绕[typeahead Bootstrap JS 插件](http://twitter.github.com/bootstrap/javascript.html#typeahead)展开。我正在向服务器发送带有搜索查询的订阅。服务器发布搜索结果，一旦客户端收到此数据（希望 onReady 将是正确的选择......），我将继续填充/更新 typeahead 源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T23:19:34.617

我在这里问了一个类似的问题：[有什么方法可以知道流星订阅何时“有效”？](https://stackoverflow.com/questions/10794555/is-there-any-way-to-know-when-an-meteor-subscription-is-valid)

简而言之，您对正在发生的事情是正确的；答案只是在`Todos`使用时适当地过滤集合：

```
Template.foo.todos = function() { 
  return Todos.find({list_id: Session.get('list_id')});
} 
```

# java - 从 Wikia 提取的 XML 文件中解析信息并将其显示在 Android ListView 中

> ID：11822616
> 
> 赞同：0
> 
> 时间：2012-08-06T04:37:06.643
> 
> 标签：java, android, listview, android-activity, mediawiki

您好，我从事这个项目已经有一段时间了，目前非常卡住，我还是 Android 新手，并且一直在开发我的第一个应用程序，该应用程序从我使用 MediaWiki API 创建的 XML 文件中提取信息。每次我尝试在我的应用程序上选择“播放器”选项卡时，它都会强制关闭，我不知道为什么。这是我的玩家活动和 Wikiparser 活动的代码：

```
package com.lvlup.kikurself.scotttest;

import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.text.Html;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.AdapterView.OnItemClickListener;

import java.io.IOException;
import org.xml.sax.SAXException;

//import com.lvlup.kikurself.scotttest.WikiParser.Cm;

public class scottPlayers extends ListActivity {
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);

WikiParser p = new WikiParser();
ArrayList<String> titles = new ArrayList<String>();

try {
    p.parseInto(new URL("http://scottlandminecraft.wikia.com/api.php?action=query&list=categorymembers&cmtitle=Category:Players&cmlimit=500&format=xml"), titles);

} catch (MalformedURLException e) {
} catch (IOException e) {
} catch (SAXException e) {}

    //String[] values = new String[50]; 
    //values = res;

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, titles);

    setListAdapter(adapter);

    final ListView playersList = getListView();

    playersList.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v, int position, long thisID)
    {
         Object o = (playersList.getItemAtPosition(position));
         String playerName_temp = (o.toString());

         Intent newIntent = new Intent(v.getContext(), playerDisp.class);
         newIntent.putExtra("tempN", playerName_temp);
         startActivity(newIntent);

    }
    });

    //get your data back again with: String fName = getIntent().getExtras().getInt("fname");

}} 
```

接下来是 WikiParser 函数的代码：

```
package com.lvlup.kikurself.scotttest;

import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.List;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;

import android.sax.*;
import android.text.TextUtils;
import android.util.Xml;
import android.util.Xml.Encoding;

public class WikiParser {
private static class CmListener implements StartElementListener {
    final List<String> mTitles;
    CmListener(List<String> titles) {
        mTitles = titles;
    }
    @Override
    public void start(Attributes attributes) {
        String title = attributes.getValue("", "title");
        if (!TextUtils.isEmpty(title)) {
            mTitles.add(title);
        }
    }
}
public void parseInto(URL url, List<String> titles) throws IOException, SAXException {
    HttpURLConnection con = (HttpURLConnection) url.openConnection();
    try {
        parseInto(new BufferedInputStream(con.getInputStream()), titles);
    } finally {
        con.disconnect();
    }
}
public void parseInto(InputStream docStream, List<String> titles) throws IOException, SAXException {
    RootElement api = new RootElement("api");
    Element query = api.requireChild("query");
    Element categoryMembers = query.requireChild("categorymembers");
    Element cm = categoryMembers.requireChild("cm");
    cm.setStartElementListener(new CmListener(titles));
    Xml.parse(docStream, Encoding.UTF_8, api.getContentHandler());
}
} 
```

就是这样......我在这里学习我的错误，所以任何人都可以告诉我我的代码以及我可以做些什么来改进，如果有人知道出了什么问题，提前谢谢你。

编辑：也包括 LogCat，谢谢。

```
 08-06 04:33:58.837: D/dalvikvm(539): GC_FOR_ALLOC freed 62K, 3% free 9883K/10179K, paused 64ms
08-06 04:33:58.917: I/dalvikvm-heap(539): Grow heap (frag case) to 13.641MB for 4096016-byte allocation
08-06 04:33:59.037: D/dalvikvm(539): GC_CONCURRENT freed <1K, 3% free 13882K/14215K, paused 12ms+17ms
08-06 04:33:59.748: D/gralloc_goldfish(539): Emulator without GPU emulation detected.
08-06 04:34:05.977: D/AndroidRuntime(539): Shutting down VM
08-06 04:34:05.987: W/dalvikvm(539): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
08-06 04:34:06.067: E/AndroidRuntime(539): FATAL EXCEPTION: main
08-06 04:34:06.067: E/AndroidRuntime(539): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.lvlup.kikurself.scotttest/com.lvlup.kikurself.scotttest.scottPlayers}: android.os.NetworkOnMainThreadException
08-06 04:34:06.067: E/AndroidRuntime(539):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
08-06 04:34:06.067: E/AndroidRuntime(539):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
08-06 04:34:06.067: E/AndroidRuntime(539):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
08-06 04:34:06.067: E/AndroidRuntime(539):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
08-06 04:34:06.067: E/AndroidRuntime(539):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-06 04:34:06.067: E/AndroidRuntime(539):  at android.os.Looper.loop(Looper.java:137)
08-06 04:34:06.067: E/AndroidRuntime(539):  at android.app.ActivityThread.main(ActivityThread.java:4340)
08-06 04:34:06.067: E/AndroidRuntime(539):  at java.lang.reflect.Method.invokeNative(Native Method)
08-06 04:34:06.067: E/AndroidRuntime(539):  at java.lang.reflect.Method.invoke(Method.java:511)
08-06 04:34:06.067: E/AndroidRuntime(539):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-06 04:34:06.067: E/AndroidRuntime(539):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-06 04:34:06.067: E/AndroidRuntime(539):  at dalvik.system.NativeStart.main(Native Method)
08-06 04:34:06.067: E/AndroidRuntime(539): Caused by: android.os.NetworkOnMainThreadException
08-06 04:34:06.067: E/AndroidRuntime(539):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1084)
08-06 04:34:06.067: E/AndroidRuntime(539):  at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
08-06 04:34:06.067: E/AndroidRuntime(539):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
08-06 04:34:06.067: E/AndroidRuntime(539):  at java.net.InetAddress.getAllByName(InetAddress.java:220)
08-06 04:34:06.067: E/AndroidRuntime(539):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
08-06 04:34:06.067: E/AndroidRuntime(539):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
08-06 04:34:06.067: E/AndroidRuntime(539):  at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
08-06 04:34:06.067: E/AndroidRuntime(539):  at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
08-06 04:34:06.067: E/AndroidRuntime(539):  at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
08-06 04:34:06.067: E/AndroidRuntime(539):  at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
08-06 04:34:06.067: E/AndroidRuntime(539):  at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
08-06 04:34:06.067: E/AndroidRuntime(539):  at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
08-06 04:34:06.067: E/AndroidRuntime(539):  at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
08-06 04:34:06.067: E/AndroidRuntime(539):  at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
08-06 04:34:06.067: E/AndroidRuntime(539):  at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
08-06 04:34:06.067: E/AndroidRuntime(539):  at com.lvlup.kikurself.scotttest.WikiParser.parseInto(WikiParser.java:35)
08-06 04:34:06.067: E/AndroidRuntime(539):  at com.lvlup.kikurself.scotttest.scottPlayers.onCreate(scottPlayers.java:29)
08-06 04:34:06.067: E/AndroidRuntime(539):  at android.app.Activity.performCreate(Activity.java:4465)
08-06 04:34:06.067: E/AndroidRuntime(539):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-06 04:34:06.067: E/AndroidRuntime(539):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
08-06 04:34:06.067: E/AndroidRuntime(539):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T04:45:06.073

## NetworkOnMainThreadException

当应用程序尝试在其主线程上执行网络操作时引发的异常。

这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。请参阅文档[设计响应性。](http://developer.android.com/guide/practices/design/responsiveness.html)

另请参阅[严格模式。](http://developer.android.com/reference/android/os/StrictMode.html)

查看 Stackoverflow 上的现有答案 -

1.  [NetworkOnMainThreadException](https://stackoverflow.com/a/9415736/940096)

2.  [android.os.NetworkOnMainThreadException](https://stackoverflow.com/a/8612418/940096)

有关更多详细信息，您可以到[这里](http://www.google.com/search?q=android.os.NetworkOnMainThreadException&ie=utf-8&oe=utf-8&aq=t)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T04:56:48.563

1.  始终建议**让 UI 在 UI 线程上工作，而 Non-UI 在 Non-UI 线程上工作**，但这变成了**了一种法则。**

2.  android 中的应用程序**从专用 UI​​ 线程开始**，因此当您创建另一个线程来处理网络、fileIO 等长进程工作时，**您将放弃专用 UI​​ 线程。**

3.  要同步 UI 线程和 Non-UI 线程，请使用**Thread 与 Handler 或 AsyncTask**，这是 android 中专门引入的，可以轻松实现 UI 和 Non-UI 线程之间的同步，也称为**Painless Threading** ....

# java - newInstance() 的实例化异常

> ID：11822621
> 
> 赞同：25
> 
> 时间：2012-08-06T04:37:51.537
> 
> 标签：java, reflection

`className`当is`"java.awt.Rectangle"`等时，以下工作正常`"java.lang.String"`。但它失败了 for `"java.lang.Integer"`，`"java.lang.Double"`给`java.lang.InstantiationException`for `classDefinition.newInstance()`。

```
Class classs = Class.forName(className);
Object object = classs.newInstance(); 
```

这是 Wrapper 类还是其他问题？

**编辑：做到这一点的方法 - 学分应该去 Jigar。**

```
Class       integerDefinition   = Class.forName("java.lang.Integer");
Constructor intArgsConstructor  = integerDefinition.getConstructor(new Class[] {int.class});
Object[]    intArgs             = new Object[] { new Integer(12) };
Object      object              = intArgsConstructor.newInstance(intArgs); 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-06T04:39:12.843

因为[`Integer`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html)没有无参数（默认）构造函数，`class.newInstance()`将在内部调用默认构造函数

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-06T04:41:18.467

[Class.newInstance()](http://docs.oracle.com/javase/tutorial/reflect/member/ctorInstance.html)只能调用零参数构造函数，而[Integer](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html)没有零参数构造函数。

# html - 我可以仅使用 HTML5 和 JavaScript 在移动设备上捕获相机输入吗？

> ID：11822625
> 
> 赞同：0
> 
> 时间：2012-08-06T04:38:39.980
> 
> 标签：html

以下是我要构建的应用程序的一些要求。您能否让我知道这是否可以使用 html/jscript 而不是本机应用程序（ios、Android、windows）来完成？由于我不是经验丰富的 Web 开发人员，因此欢迎任何其他使构建更容易的库建议。

• 针对移动设备
• 需要访问设备的摄像头
• 能够将对象（例如矩形）添加到“画布”并拖放它。
• 能够在拖动操作期间了解对象相对于画布的坐标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T04:44:21.903

是的，一点没错！您可以直接在 HTML5 中捕获相机，而无需使用库：[http ://dev.w3.org/2009/dap/camera/](http://dev.w3.org/2009/dap/camera/)

此外，HTML5 具有在画布上拖放项目的能力，并且可以知道对象的坐标以及鼠标。jQuery 也可以满足这个要求，但它并不是唯一能够做到这一点的 JavaScript 库（尽管它可以说是最受欢迎的，在我看来这是有充分理由的）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-06T04:52:49.770

那么你最好在这里问编程问题！仍然检查答案。这将有助于我猜。

*   针对移动设备 - **html5 和 js 都可以。**
*   需要访问设备的摄像头 -**手机间隙 js 就可以了。**
*   添加对象的能力... - **html5 和 js 可以**。
*   在拖动操作过程中知道的能力... - **html5,js（你的知识适用），电话间隙库也有一点支持检查。**

好吧，您的问题是关于`development of mobile apps`使用`HTML5`and `Javascript`。所以一些好的库已经存在，比如`phone gap`. 转到链接并使用您的 HTML5 和 Javascript 知识来满足您的需求。

就您的要求而言，它们可以使用 phone gap js 库来完成。它很容易处理，只需在此处使用最新版本[phonegap](http://phonegap.com/)尝试一下，该链接在其文档中回答了您真正想要的内容。

# c# - 使用自己的 xml 解析器和 system.xml 命名空间之间的性能差异有多大

> ID：11822627
> 
> 赞同：1
> 
> 时间：2012-08-06T04:38:45.543
> 
> 标签：c#, xml, optimization, xml-parsing, game-engine

我正在尝试为我的游戏编写一个 xml 解析器，因为使用`system.xml`命名空间时最终构建的大小增加了 1+ mb。解析器类是一个单例，可以在游戏中随时访问。虽然我要处理的数据量不多，但我仍然担心性能（因为是游戏，我不能牺牲任何性能）。

有什么方法可以有效地处理解析。顺便说一句，我正在使用 c#，如果有一个名为的标签`<tag>`，我只是将字符串分解为搜索`<tag>`and的部分`</tag>`。这将递归地继续，直到整个字符串被完全分解。结果将保存在我创建的锯齿状列表类中。

有什么办法，我可以改进我的方法，还是应该只使用 System.XML 命名空间。

另请注意：xml 数据来自服务器而不是本地文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T05:59:38.983

一些注释（这应该是评论，但太长了）：

1.  我无法重现您的问题。使用控制台应用程序，我添加了对 的引用`System.Xml`，创建了一个`XmlDocument`，使用它并编译了它，但没有看到任何有意义的大小增加。
2.  `System.Xml`是 .Net 基类库的一部分。通常，您可以指望它在每台运行 .Net 的机器上（例如，根据 msdn，[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)在 XNA 中可用，但在可移植类库中不可用）。
3.  如果它是您的框架的一部分，请确保您没有在引用上设置[Copy Local](http://msdn.microsoft.com/en-us/library/t1zz5y8c.aspx) = True。默认值为 false，但如果为 true，它会将 900 KB 的 DLL 复制到您的目标文件夹。
4.  没有人能回答哪个更快 - 答案非常相关 - 与哪种类型的 XML（小？大？）？在什么类型的机器上？您的用户将使用这些 XML 进行哪些操作？只有您可以通过分析您的代码来回答这些问题。
5.  即使您发现 XmlDocument 很慢或太大，.Net 也有无数的[XML 解析器](http://nuget.org/packages?q=parse%20xml)- 也许其中一个对您有好处。（即使 .Net 有`XDocument`，但它也需要`System.Xml.dll`，所以没有收获）
6.  **通常**，多个字符串操作很慢。如果您描述的方法是不断搜索和拆分字符串，那*听起来很*慢 - 我怀疑您需要多次扫描字符串才能解析 XML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T05:24:20.147

我不会那样做。我是说。已经有可靠的工具。不要重新发明轮子。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T06:15:52.570

您当然可以编写一个更快的 XML 解析器，尤其是在您的功能较少的情况下。如果它做得更少并且不够健壮，那么它应该更快。不过，我会提醒您不要这样做，因为一旦您的应用程序的一部分声称“支持 XML”但只是部分这样做，那么如果您的 XML 生产者决定开始添加您的解析器不支持的东西，它可能会在未来中断但任何普通的 XML 解析器都会。

我以前遇到过这个，从另一个方向。我们需要扩充我们发送到嵌入式设备的数据，并决定添加一些我们以后可以读取的属性。当我们发现该设备无法读取我们的数据时，我们感到很惊讶。事实证明，解析器完全是国产的，几乎不能被认为是真正的 XML 解析器，因为它要求标签位于不同的行上，并且在添加属性时会中断。

如果您使用自己的解析器（可能不如现有的 .NET 解析器那么健壮），请务必小心，您可以准确地传达您支持和不支持的内容。

# html - 如何根据浏览器加载css？

> ID：11822640
> 
> 赞同：2
> 
> 时间：2012-08-06T04:41:07.533
> 
> 标签：html, css

我为我的项目设计了一个网页，当我查看 Internet Explorer 时，它在 Firefox 和 chrome 中看起来很好，图像位置和表格位置一切都没有正确对齐。即使我尝试导入 reset.css 文件（eric 的最新版本）。这会导致所有页面的对齐表不正确。

基于用户代理加载css好吗？

```
 if ie:
      <link ....</link>
   else:
      <link>...</link> 
```

它应该怎么做？

另外，如何调整所有分辨率屏幕都可以采用的布局？

当我在 12-15 英寸分辨率的屏幕上做时，我的页面看起来很好。一些更宽的屏幕看起来不太好。

应该怎么处理呢？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T04:44:16.547

```
<!--[if IE 8]>
        <link rel="stylesheet" href="css/ie8.css"/>

<![endif]--> 
```

[即样式表](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)

您可以使用媒体查询调整布局，无论您可以选择什么分辨率

就像是

```
@media all and (min-width:500px) { … }
@media (min-width:500px) { … } 
```

[媒体查询](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T04:42:43.100

您可以`conditional comment`用于 IE 浏览器。像这样写：

```
<!--[if IE 8]>
  <link rel="stylesheet" href="ie8.css"/>
Special instructions for IE 8 here
<![endif]--> 
```

阅读更多信息[http://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T05:33:28.180

## 通过使用[**CSS 条件注释**](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)，您可以定位您的浏览器。

*通过在页面中添加以下行，您`<HTML>`可以定义特定于浏览器的样式表或 java 脚本文件。*

**对于 IE 浏览器**

```
<!--[if IE]>
    <link rel="stylesheet" type="text/css" href="css/ie.css" />
<![endif]--> 
```

**对于非 IE 浏览器**

```
<!--[if !IE]><!-->
    <link rel="stylesheet" type="text/css" href="css/non-ie.css" />
<!--<![endif]--> 
```

## 通过使用[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)，您可以通过定位所需的屏幕分辨率来创建响应式网站的布局。

```
@media screen and (max-width: 699px) and (min-width: 320px) {
   div { background: blue; width: 100px; height: 100px; }
}

@media screen and (max-width: 1024px) and (min-width: 700px) {
   div { background: green; width: 300px; height: 100px;  }
}

@media screen and (max-width: 1280px) and (min-width: 1025px) {
   div { background: red; width: 600px; height: 100px;  }
}​ 
```

[**示例小提琴**](http://fiddle.jshell.net/h8Nyg/1/show/)

您可以详细了解[**如何使用媒体查询**](http://css-tricks.com/css-media-queries/)

# c# - 将自定义数据/值向下传递到事件系统

> ID：11822644
> 
> 赞同：3
> 
> 时间：2012-08-06T04:41:34.643
> 
> 标签：c#, .net

我有两个类，Input 和“EventSystem”。EventSystem 是处理“内部应用程序事件”的内部（非系统相关）类。Input 是一个依赖类（依赖于系统）并处理键/按钮事件并将它们映射到键事件和“EventSystem”。我将向您展示我目前是如何传递数据的，它在内部看起来很干净，但在外部看起来很脏。有谁知道传递自定义值的更好方法（或更简单的方法）？

事件系统：

```
// Raisable Events
public enum EventType { Action, Cancel };

// Base for custom arguments
public class EventArguments
    {
        public double time;

        public EventArguments(double _time)
        {
            time = _time;
        }
    }

// Event Delegate (invoked on raise)
public delegate void Event(EventArguments eventArgs);

// full class
static class EventSystem
{
    private static Dictionary<EventType, Event> eventMapping = new Dictionary<EventType, Event>();

    public static void HookEvent(EventType eventType, Event _event)
    {
        if (eventMapping.ContainsKey(eventType))
        {
            eventMapping[eventType] += _event;
        }
        else
        {
            eventMapping.Add(eventType, _event);
        }
    }

    public static void RaiseEvent(EventType eventType, EventArguments args)
    {
        if (eventMapping.ContainsKey(eventType))
        {
            eventMapping[eventType].Invoke(args);
        }
        else
        {
            // do nothing
        }
    }
} 
```

我的输入参数只是继承 EventArguments。

```
// Inherits EventArguments (double time) and adds it's own, "bool pressed"
class KeyInputArguments : EventArguments
{
    public bool pressed;

    public KeyInputArguments(double time, bool _pressed) :
        base(time)
    {
        pressed = _pressed;
    }
} 
```

当一个键被按下时，它会触发键（输入）事件，然后它会检查该键是否映射到内部事件并引发它。一个单独的类 (Config) 处理映射/绑定键到事件的所有配置。

```
// Raise on press
EventSystem.RaiseEvent(eventType, new KeyInputArguments(time, true));
// [...]
// Raise on release
EventSystem.RaiseEvent(eventType, new KeyInputArguments(time, false)); 
```

最后，为了触发事件，我们必须注册事件的键（这是“**外部**”代码）

```
// Hook our "Enter" function into the Action event
EventSystem.HookEvent(EventType.Action, Enter);

// [...]

public void Enter(EventArguments eventArg)
{
    if (((KeyInputArguments)eventArg).pressed == false)
    {
        Error.Break();
    }
} 
```

在我看到 ' **(((** ' 之前，一切都很好。这是我对 C# 和 OOP 编程的一般知识有限的一个丑陋结果。

我无法更改 Enter 方法参数，因为事件委托明确需要 EventArguments。（即使 KeyInputArguments 继承了它？）。我也不明白为什么要将 eventArg 转换为 KeyInputArguments 需要这么多。

最后，我也试过这个（虽然我不太喜欢它）

```
KeyInputArguments keyInputArguments = (KeyInputArguments)eventArg;
            if (keyInputArguments.pressed == false) 
```

我需要自定义数据的原因是我计划接收来自多种输入形式的输入，例如游戏手柄。这意味着我可以将系统相关数据（游戏手柄设备信息）处理成独立的参数。这将系统相关数据限制为我的 Input 类，同时在内部独立地利用我的事件系统。 **我正在做的事情有更好的方法吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:47:18.847

将此代码放在您的项目中的某处：

```
public static class SomeClassName
{
    public static T CastTo<T>(this object source)
    {
        return (T)source;
    }
} 
```

这使您可以编写

```
if(!eventArg.CastTo<KeyInputArguments>().pressed)
    Error.Break(); 
```

我真的很喜欢这个，因为它保留了从左到右的顺序。这在编写 linq 时特别好。

回答您的问题“即使 KeyInputArguments 继承了它？”。这里的问题是您定义了一个使用基类的通用方法，它不知道继承的类。您需要在该方法上使用泛型来解决该问题，例如将事件类型作为泛型参数传递

```
public static void HookEvent<TEventType>(....) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T17:38:01.523

我最终混合了 MikeKulls 的回答“HookEvent”和朋友的一些建议，并想出了这个：

```
// Event types to raise.
enum EventType { Action, Cancel };

// Base abstract class to use in the generic type field
abstract class BaseEvent
{
    public double time;

    protected BaseEvent(double _time)
    {
        time = _time;
    }
}

// Event delegate, T is a sub of BaseEvent that contains the data we need to send
delegate void EventDelegate<T>(T eventClass) where T : BaseEvent;

// Event class
static class EventSystem
{
    // EventClass is the storage of all the generic types and their mapping to an event delegate.
    private static class EventClass<T> where T : BaseEvent
    {
        public static Dictionary<EventType, EventDelegate<T>> eventMapping = new Dictionary<EventType, EventDelegate<T>>();
    }

    /// <summary>
    /// Hooks an event to a delegate for use with EventSystem.RaiseEvent
    /// </summary>
    /// <typeparam name="T">Sub-class of BaseEvent that your delegate will be receiving</typeparam>
    /// <param name="eventType">Type of event to hook to</param>
    /// <param name="_event">The callback</param>
    public static void HookEvent<T>(EventType eventType, EventDelegate<T> _event) where T : BaseEvent
    {
        if (EventClass<T>.eventMapping.ContainsKey(eventType))
        {
            EventClass<T>.eventMapping[eventType] += _event;
        }
        else
        {
            EventClass<T>.eventMapping.Add(eventType, _event);
        }
    }

    /// <summary>
    /// Raises an event and calls any callbacks that have been hooked via HookEvent
    /// </summary>
    /// <typeparam name="T">The sub-class of BaseEvent you are sending</typeparam>
    /// <param name="eventType">Type of event you are raising</param>
    /// <param name="args">A subclass of BaseEvent containing the information to pass on</param>
    public static void RaiseEvent<T>(EventType eventType, T args) where T : BaseEvent
    {
        if (EventClass<T>.eventMapping.ContainsKey(eventType))
        {
            EventClass<T>.eventMapping[eventType].Invoke(args);
        }
        else
        {
            // do nothing
        }
    }
} 
```

我像这样设置输入：

```
class KeyEvent : BaseEvent
    {
        public bool pressed;

        public KeyEvent(double _time, bool _pressed)
            : base(_time)
        {
            pressed = _pressed;
        }
    }
// [...]
// Key down
EventSystem.RaiseEvent<KeyEvent>(eventType, new KeyEvent(time, true));
// Key up
EventSystem.RaiseEvent<KeyEvent>(eventType, new KeyEvent(time, false)); 
```

我像这样设置处理程序/委托：

```
EventSystem.HookEvent<KeyEvent>(EventType.Action, Enter);
// [...]
public void Enter(KeyEvent keyEvent)
{
    if (keyEvent.pressed == false)
    {
        Error.Break();
    }
} 
```

# php - 文件上传中的严格标准错误

> ID：11822645
> 
> 赞同：2
> 
> 时间：2012-08-06T04:41:39.357
> 
> 标签：php

我写了一个 PHP 脚本来上传文件。但是当我按下提交按钮时，它会给出一条错误消息：

```
Strict Standards: Only variables should be passed by reference in H:\xampp\htdocs\phpTest\upload_file.php on line 4. 
```

第 4 行是 $extension = end(explode(".", $_FILES["file"]["name"]));

上传文件.php：

```
<?php

$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Error: " . $_FILES["file"]["error"] . "<br />";
    }
  else
    {

$target_Path = "images/";
$target_Path = $target_Path.basename( $_FILES['file']['name'] );
move_uploaded_file( $_FILES['file']['tmp_name'], $target_Path );

  echo "Upload: " . $_FILES["file"]["name"] . "<br />";
  echo "Type: " . $_FILES["file"]["type"] . "<br />";
  echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
  echo "Stored in: " . $_FILES["file"]["tmp_name"];
  echo $target_Path;
  }
  }
  else
  {
  echo "Invalid file";
  }
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T04:47:45.350

您正在尝试对`end()`仅存在于该函数调用上下文中的数组进行操作。一旦该行代码完成，该数组将不复存在。试试这个：

```
$bits = explode(".", $_FILES["file"]["name"])
$extension = end($bits); 
```

话虽如此，这是提取文件扩展名的一种糟糕方法，而且非常不安全。$_FILES 数组中提供的文件名是远程客户端给出的文件名。伪造该文件名并非易事，允许用户上传“nastyvirus.exe”但发送“cutekittens.jpg”作为文件名。

永远不要相信用户端数据，尤其是文件上传。[通过fileinfo](http://php.net/fileinfo)使用服务器端 MIME 类型确定

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T04:47:02.003

根据手册，[http://www.php.net/end](http://www.php.net/end)

这个数组是通过引用传递的，因为它被函数修改了。这意味着您必须将一个实变量传递给它，而不是一个返回数组的函数，因为只有实际变量可以通过引用传递。

因此，您应该将爆炸结果分配给一个变量，然后在该变量上使用 end()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T05:47:44.523

如果仅仅因为 end 函数而出现问题，那么您可以执行以下操作来获取文件的扩展名：

```
$path_parts = pathinfo($fullPath);
$extension = strtolower($path_parts["extension"]); 
```

# assembly - 是否可以始终使用“mov eax, 0x1”代替“mov rax, 0x1”？

> ID：11822646
> 
> 赞同：6
> 
> 时间：2012-08-06T04:41:40.713
> 
> 标签：assembly, nasm, x86-64, zero-extension

组装此代码时`nasm`：

```
BITS 64
mov eax, 0x1
mov rax, 0x1 
```

我得到这个输出：

```
b8 01 00 00 00 b8 01 00 00 00 
```

这是`mov eax, 0x1`重复两次的操作码。

这是否意味着**总是**`mov rax, 0x1`可以被替换，或者只是在这种情况下？**`mov eax, 0x1`**

 **如果这是正确的，那么使用它会比：

```
xor rax, rax
inc rax 
```

因为组装后变成 6 个字节，而`mov eax, 0x1`只有 5 个字节？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T06:44:35.927

总是。大多数（如果不是全部）32 位 MOV 和 ALU 操作会清除目标寄存器操作数的第 32 位到第 63 位。有关详细信息，请参阅 CPU 手册。**

# java - 索引来自 Matlab 背景的 Java 数组

> ID：11822647
> 
> 赞同：0
> 
> 时间：2012-08-06T04:41:42.757
> 
> 标签：java, arrays, matlab

您好 StackExchange 社区，我是 Java 的菜鸟，想要索引数组 MATLAB 样式的元素。例如，在 MATLAB 中，如果我想读取数组的最后 10 个元素，我可以键入：

```
someArray = someOtherArray(end-10:end); 
```

在Java中，我只能考虑使用for循环，这似乎很不方便。Java中是否有执行此操作的数组方法？我应该编写自己的类和方法吗？为什么或者为什么不？谢谢，凯尔

PS 我实际上是在尝试创建一个处理草图，但似乎 Java 数组使用规则已被继承。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T04:45:35.967

```
Arrays.copyOfRange(array, start, end) may help. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T04:47:35.797

你可以复制你的数组

```
someArray = Arrays.copyOfRange(someOtherArray,end-10, end); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T04:45:28.570

查看 ArrayUtils.subarray() 方法

文档：[http ://commons.apache.org/lang/api-2.5/org/apache/commons/lang/ArrayUtils.html](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/ArrayUtils.html)

# c# - C# 中的等效 PHP sha1，原始二进制格式，长度为 20

> ID：11822653
> 
> 赞同：2
> 
> 时间：2012-08-06T04:43:10.290
> 
> 标签：c#, php, sha1

> **可能重复：**
> [C# SHA-1 与 PHP SHA-1……不同的结果？](https://stackoverflow.com/questions/790232/c-sharp-sha-1-vs-php-sha-1-different-results)

我试图找出`sha1(string,true);`C# 中的 PHP 等效方法。我尝试了很多搜索并尝试编写一些代码，但找不到任何解决方案。谁能告诉我如何获得`sha1`长度为 20 的行二进制格式，例如 PHP 函数：[PHP 手册中的 SHA1](http://php.net/manual/en/function.sha1.php)？

在 PHP 中：

```
sha1($sampletext, true); 
```

在 C# 中：

```
string sampletext= "text";
SHA1 hash = SHA1CryptoServiceProvider.Create();
byte[] plainTextBytes = Encoding.ASCII.GetBytes(dataString);
byte[] hashBytes = hash.ComputeHash(plainTextBytes); 
```

两者都返回不同的输出。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:38:37.830

[这个 IDEOne 测试](http://ideone.com/L83lJ)似乎产生了与在 C# 中对哈希使用 UTF-8 编码相同的输出：

```
string sampletext = "text";
System.Security.Cryptography.SHA1 hash = System.Security.Cryptography.SHA1CryptoServiceProvider.Create();
byte[] plainTextBytes = Encoding.UTF8.GetBytes(sampletext);
byte[] hashBytes = hash.ComputeHash(plainTextBytes);

foreach (byte b in hashBytes) {
    Console.Write(string.Format("{0:x2}", b));
} 
```

这将是特定于平台的，具体取决于 PHP 处理它的方式。它甚至可能是某些文档中的 ASCII。这一切都与字符编码有关。

# git - 克隆网站的 Git 工作流程

> ID：11822654
> 
> 赞同：0
> 
> 时间：2012-08-06T04:43:18.960
> 
> 标签：git

我一直在网站上工作 -`Project B`几天以来。现在，客户希望我创建一个`Project B`被调用的克隆`Project C`。

但是，它不是一个完整的克隆。设计、配色方案以及网站的某些部分都有明显的变化。

如何通过在 git 上花费尽可能少的时间来有效地管理这两个项目？

这是我对工作流程的想法：

设置：

1.  我创建了一个名为的父项目`Project A`并将其复制`Project B`到`Project A`.
2.  我删除了特定于的东西`Project B`并`git init`在`Project A`.
3.  我`Project A`进入`Project C`并开始处理特定于`Project C`.

我如何有效地管理这一切？是否有更好的技术来使用 git 管理此类项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:01:29.950

## 基于分支

为什么不为此使用分支，您可以获得项目特定的所有内容，而不是`git init`一个新的存储库`git commit`。然后`git checkout -b ProjectB`获取所有项目特定的文件，然后`git commit`你就可以了`git checkout -b ProjectC master`。此序列将创建 2 个基于*master*的分支，称为*ProjectB*和*ProjectC*。

```
 [com2]<-ProjectB
      /
[com1]<-master
      \
       [com3]<-ProjectC 
```

我非常喜欢上面的那个，但你建议的工作流程也很好。基于存储库的工作流程将使所有数据保持独立，如果您有不同的客户端，这将更加有用。好吧，无论哪种方式，我都会使用分支方法。

# php - 为什么电子邮件没有到达目的地（CodeIgniter）

> ID：11822669
> 
> 赞同：0
> 
> 时间：2012-08-06T04:45:27.290
> 
> 标签：php, codeigniter, email

所以代码：

```
 $this->load->library('email');

        $this->email->from('mysite@mysite.com', 'mysite');
        $this->email->to($email); 

        $this->email->subject('Email Test');
        $this->email->message('Testing the email class.');  

        $this->email->send(); 
```

我不明白为什么我发送电子邮件时没有错误，但是当我检查我的邮箱时，没有电子邮件，所以看起来电子邮件没有到达他的目的地，我正在使用 CodeIgniter，也许我需要添加一些其他设置来解决这个问题？请帮忙！！

ps：我也用过原生的mail()函数，反正email不来，我是在gmail里查的

```
Your message has been successfully sent using the following protocol: mail
From: "mysite" 
Return-Path: 
Reply-To: "mysite@mysite.kg" 
X-Sender: mysite@mysite.kg
X-Mailer: CodeIgniter
X-Priority: 3 (Normal)
Message-ID: <501f4f33580d5@mysite.kg>
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 8bit
=?utf-8?Q?Email_Test?=
Testing the email class. 
```

有什么不对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T04:50:29.403

您是在 localhost 服务器上还是在生产服务器上使用它？如果您使用自己安装的 Apache、PHP 和 MySQL（例如手动安装、WAMP、XAMPP、MAMP 等），那么您的 localhost 机器上可能没有安装邮件服务器来发送邮件。

尝试以下操作：

```
mail('you@youremail.com', 'My Subject', 'Test message...'); 
```

如果这不起作用，那么很可能您的服务器上没有安装邮件服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:24:04.693

奇怪的！可能您应该在 config 文件夹中创建一个文件 email.php。

在文件中添加以下代码

```
$config['protocol'] = 'sendmail';
$config['mailtype'] = 'html';
$config['mailpath'] = '/usr/sbin/sendmail'; 
```

在您发送电子邮件的控制器中，在设置 to 和 from 标头之前添加一行。

```
$this->load->library('email'); 
```

以确保已加载新设置。

# php - 我如何在 symfony 表单 builForm 函数中传递额外的变量

> ID：11822675
> 
> 赞同：1
> 
> 时间：2012-08-06T04:46:36.630
> 
> 标签：php, forms, symfony

这是我的代码

```
public function buildForm(FormBuilder $builder, array $options , $task )
    {
        $builder
            ->add('genTasks','text',array('label'=>$task->getName()))

        ;
    } 
```

有什么方法可以访问 buildForm 中的 $task 变量

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T06:20:41.390

一种解决方案：

```
public function buildForm(FormBuilder $builder, array $options)
{
    $task = $options['task'];

    // If you want...
    if(is_null($task)) throw new \LogicException('Task option is required.');

    $builder
        ->add('genTasks', 'text', array('label' => $task->getName()))
    ;
}

public function getDefaultOptions(array $options)
{
    return $options + array('task' => null);
} 
```

并在创建表单时将任务对象作为选项传递。

# mercurial - 在提示中更改文件后，在 mercurial 中创建一个分支？

> ID：11822676
> 
> 赞同：1
> 
> 时间：2012-08-06T04:46:54.283
> 
> 标签：mercurial, branch

我开始在一个 mercurial 存储库中进行一些更改，但没有提交它们。

在更改了 15 个文件后，我意识到这些更改可能是一个分支。

在这种情况下，哪种方法是创建分支的最佳方式？如果我只是创建一个新分支并移动到它，我可以提交我的文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:45:42.200

如果您已修改但未提交更改，您只需执行以下操作：

```
hg branch branch_name_you_want 
```

该`hg branch`命令所做的只是说明**下一次**提交应该在哪个分支上。你还没有承诺，所以公正`hg branch`，你很好。

例如，如果您这样做：

```
... changes ...
hg branch misspelled
hg branch correctly_spelled
hg commit 
```

您将有一个名为的分支`correctly_spelled`，并且没有任何记录`misspelled`。

# grails - 蜡染与圣杯给予萨克斯冲突

> ID：11822681
> 
> 赞同：4
> 
> 时间：2012-08-06T04:47:30.727
> 
> 标签：grails, sax, batik

我正在尝试使用带有 grails 的 batik 在服务器上将一些 SVG 内容渲染为 PNG。

当我将依赖项添加到 BuildConfig 然后告诉 IntelliJ 加载更改时，我在 IntelliJ 中收到以下错误：

```
/Library/Java/JavaVirtualMachines/1.6.0_33-b03-424.jdk/Contents/Home/bin/java -Dgrails.home=/Applications/Dev/grails-2.1.0 -Dbase.dir=/Users/greg/Documents/development/git/liftyourgame-grails/webapp -Dtools.jar=/Library/Java/JavaVirtualMachines/1.6.0_33-b03-424.jdk/Contents/Home/lib/tools.jar -Dgroovy.starter.conf=/Applications/Dev/grails-2.1.0/conf/groovy-starter.conf -Xmx512M -XX:MaxPermSize=192m -javaagent:/Applications/IntelliJ IDEA 11.app/plugins/Grails/lib/grails_rt.jar -Dprint.grails.settings=true -Dfile.encoding=UTF-8 -classpath /Applications/Dev/grails-2.1.0/lib/org.codehaus.groovy/groovy-all/jars/groovy-all-1.8.6.jar:/Applications/Dev/grails-2.1.0/dist/grails-bootstrap-2.1.0.jar org.codehaus.groovy.grails.cli.support.GrailsStarter --main org.codehaus.groovy.grails.cli.GrailsScriptRunner --conf /Applications/Dev/grails-2.1.0/conf/groovy-starter.conf help

| Loading Grails 2.1.0
| Configuring classpath
| Error Error executing script Help: loader constraint violation: when resolving overridden method "org.apache.tools.ant.helper.ProjectHelper2$RootHandler.setDocumentLocator(Lorg/xml/sax/Locator;)V" the class loader (instance of org/codehaus/groovy/grails/cli/support/GrailsRootLoader) of the current class, org/apache/tools/ant/helper/ProjectHelper2$RootHandler, and its superclass loader (instance of <bootloader>), have different Class objects for the type org/xml/sax/Locator used in the signature (Use --stacktrace to see the full trace)

IDEA hook: Grails not found!
| Error java.lang.NullPointerException
| Error     at org.jetbrains.groovy.grails.rt.Agent$2.run(Agent.java:88)
| Error     at java.lang.Thread.run(Thread.java:680) 
```

Grails clean 给出了类似的结果。

BuildConfig.groovy 包含以下内容：

```
grails.project.dependency.resolution = {
    // inherit Grails' default dependencies
    inherits("global") {
        excludes 'slf4j-log4j12', 'xml-apis', 'xalan', 'xml-apis-ext', 'commons-logging', 'commons-io'
    }
    log "warn" // log level of Ivy resolver, either 'error', 'warn', 'info', 'debug' or 'verbose'
    checksums true // Whether to verify checksums on resolve

    repositories {
        inherits true // Whether to inherit repository definitions from plugins
        grailsPlugins()
        grailsHome()
        grailsCentral()
        mavenCentral()
    }
    dependencies {
        compile "org.jadira.usertype:usertype.jodatime:1.9"
        compile "org.imgscalr:imgscalr-lib:4.0"
        compile("org.apache.xmlgraphics:batik-svg-dom:1.7")
            {
                excludes 'batik-xml', 'batik-dom', 'commons-javaflow',
                        'avalon-framework-api', 'avalon-framwork-impl',
                        'batik-css', 'batik-gvt', 'batik-script',
                        'slf4j-log4j12', 'xml-apis', 'xml-apis-ext', 'log4j', 'xercesImpl', 'xalan',
                        'antlr', 'commons-beanutils', 'commons-collections', 'commons-logging', 'xmlParserAPIs',
                        'ant', 'mondrian', 'groovy-all', 'saaj-api', 'servlet-api', 'spring-core', 'bsh',
                        'spring-beans', 'jaxen', 'persistence-api', 'jdtcore', 'bcmail-jdk16', 'bcprov-jdk16',
                        'bctsp-jdk16', 'bcmail-jdk14', 'bcprov-jdk14', 'bctsp-jdk14', 'xmlbeans'
            }

} 
```

batik-svg-dom 的 pom 包括其他一些 batik jar 以及 xml-apis 和 xml-apis-ext。我的研究表明，xml 依赖项在 grails 下可能会导致问题，并且由于在 jdk 1.4 之后不需要它们，因此它们已被排除在外。

我还尝试使用 IntelliJs 工具追踪其他 org.xml.sax.Locator 实例，但找到的唯一实例位于：/Applications/Dev/grails-2.1.0/lib/org.apache.ant/ant-launcher /jars/ant-launcher-1.8.2.jar!/org/apache/tools/ant/launch/Locator.class

我也尝试过 grails refresh-dependencies 并尝试删除 .grails 文件夹，但我总是得到相同的结果。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T15:47:55.737

问题似乎是 Batik 包含的 xml-apis 版本与现在包含在 JDK 中的版本冲突。（[http://grails.1312388.n4.nabble.com/Problems-integrating-batik-with-grails-project-td4632728.html](http://grails.1312388.n4.nabble.com/Problems-integrating-batik-with-grails-project-td4632728.html)）所以，就像您已经完成的那样，排除“xml-apis”是一个问题。但是，由于很多 Batik 的 jar 对 xml-apis 具有传递依赖，因此很难让 Grails 排除它。以下是最终对我有用的方法：

```
compile("org.apache.xmlgraphics:fop:0.94",
            "org.apache.xmlgraphics:batik-transcoder:1.7",
            "org.apache.xmlgraphics:batik-codec:1.7",
            "org.apache.xmlgraphics:batik-awt-util:1.7",
            "org.apache.xmlgraphics:batik-bridge:1.7",
            "org.apache.xmlgraphics:batik-dom:1.7",
            "org.apache.xmlgraphics:batik-gvt:1.7",
            "org.apache.xmlgraphics:batik-svg-dom:1.7",
            "org.apache.xmlgraphics:batik-svggen:1.7",
            "org.apache.xmlgraphics:batik-util:1.7",
            "org.apache.xmlgraphics:batik-xml:1.7",
            "org.apache.xmlgraphics:batik-anim:1.7",
            "org.apache.xmlgraphics:batik-css:1.7",
            "org.apache.xmlgraphics:batik-ext:1.7",
            "org.apache.xmlgraphics:batik-js:1.7",
            "org.apache.xmlgraphics:batik-parser:1.7",
            "org.apache.xmlgraphics:batik-script:1.7",
            "org.apache.xmlgraphics:xmlgraphics-commons:1.2",
            "commons-logging:commons-logging:1.0.4",
            "org.apache.avalon.framework:avalon-framework-api:4.3.1",
            "org.apache.avalon.framework:avalon-framework-impl:4.3.1",
            "xalan:xalan:2.6.0",
            "xml-apis:xml-apis-ext:1.3.04"
    ){
        transitive = false
    } 
```

这基本上是我想要包含的蜡染罐的白名单。由于传递 = false，传递依赖被忽略。

但是，我实际上仍然无法让 Batik 工作 - 似乎存在一个次要问题，即 org.apache.batik.dom.svg.SVGOMDocument 丢失，即使包含该类的所需 jar 已部署在我的战争中。

你找到另一个可行的解决方案了吗？

# cocoa - 如何在代码中实现核心动画层属性

> ID：11822684
> 
> 赞同：-1
> 
> 时间：2012-08-06T04:48:44.017
> 
> 标签：cocoa, core-animation, xib, nib

我在 xib 文件中设置了`Core Animation Layer`of `NSButton`，如下所示： ![在此处输入图像描述](../Images/0ec3fda03aecb42c5ba8155af8fa7ac5.png)

我想知道如何在代码中设置它。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:55:28.183

看一下 setWantsLayer 的描述。它解释了要做什么。

您要么想调用 setWantsLayer:TRUE，要么先调用 setLayer，然后调用 setWantsLayer:TRUE，具体取决于您要对图层执行的操作。

# c - {aStructName} 之前的 c 预期表达式

> ID：11822685
> 
> 赞同：0
> 
> 时间：2012-08-06T04:48:44.787
> 
> 标签：c, syntax

```
#include<stdio.h>
#define STORAGESIZE 5
#define MAX_NAME_LEN 2

typedef struct{
      char name[MAX_NAME_LEN];
      char feild1;
      char feild2;
  } strt;
  static strt storage[5];

main(){
 unsigned char *stp=(unsigned char*)&strt;
 unsigned char*stp_end=(unsigned char*)(&strt+STORAGESIZE);
 int i;

 for(i=0;stp!=stp_end;stp++,i++)
   printf("byte%d: %x\n",i,*stp);

} 
```

我试图确认声明为静态的所有结构都将初始化为 0，除了它的填充部分。尝试编译上述内容时出现错误：statictable.c：

```
In function 'main':
statictable.c:13:38: error: expected expression before 'strt'
statictable.c:14:42: error: expected expression before 'strt' 
```

将强制转换的指针分配给另一个指针可能有什么问题。尽管我知道这可能是初步的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T04:50:55.137

在行中：

```
unsigned char *stp=(unsigned char*)&strt; 
```

您给出指向`strt`which 是类型而不是变量的指针。我就像`&int`（也无效:)），你应该这样做：

```
unsigned char *stp=(unsigned char*)storage; 
```

下一行也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T04:51:15.107

在这两行中：

```
unsigned char *stp=(unsigned char*)&strt;
unsigned char*stp_end=(unsigned char*)(&strt+STORAGESIZE); 
```

您正在尝试获取*类型*的地址: `strt`。你想要你的`strt`数组的地址：`storage`。

# android - 在 Android 4 中屏蔽精灵

> ID：11822687
> 
> 赞同：0
> 
> 时间：2012-08-06T04:49:01.800
> 
> 标签：android, colors, mask

这个问题之前被问过几次，但我还没有看到一个很好的答案。

几年前，我在 DirectX (c++) 和 Java (awt, swing) 中做一些 2D 游戏编程。在那些日子里，在所有可用于遮罩和实现透明度的位图上具有特定的遮罩颜色是一种基本的方法。那时您通常使用 GIF 或 JPG。

现在我正在学习 Android，我找不到一个很好的解决方案来做同样的事情。我发现的代码不起作用，例如：[Masking color android](https://stackoverflow.com/questions/10163445/masking-color-android)

现在，以这种方式屏蔽在 Android 中真的不可能吗？对我以前的经验来说，这种技术是基本的。你应该使用支持透明度的PNG吗？

谢谢， 马蒂亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:10:33.967

您也许可以使用 PorterDuff 来实现您正在寻找的东西。关于 SO 有几个问题与您的问题类似：[用透明度替换位图中的特定颜色](https://stackoverflow.com/questions/8264181/replace-specific-color-in-bitmap-with-transparency)和[使用 PorterDuff 模式擦除位图部分](https://stackoverflow.com/questions/3467334/erase-bitmap-parts-using-porterduff-mode)，这应该为您提供一个起点。

# php - 谷歌路线 API：JSON

> ID：11822688
> 
> 赞同：1
> 
> 时间：2012-08-06T04:49:02.993
> 
> 标签：php, api, directions

我在我的网络应用程序中使用 Google 路线 API，有什么方法可以缩短 Google 提供的路线描述吗？

我的意思是，例如，

```
Take the 2nd right.
Take the 2nd left toward ... 
```

我可以缩短它吗？它太长了。

我可以这样做吗：

```
2nd right>2nd left> 
```

有没有办法修改结果？我使用 PHP 开发 Web 应用程序，使用 JSON 格式显示 API 结果。编辑：API 结果正确显示。但我想删除某些常用词，例如“Take”、“The”、“at”等 API 结果显示我的部分代码：`if ($data->status === 'OK') { $route = $data->routes[0]; foreach ($route->legs as $leg) { foreach ($leg->steps as $step) { echo $step->html_instructions . "<br>\n";`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:07:53.677

这对我有用，希望它也对你有用......

```
<?php
$test1 = 'Take the 2nd right.';
$test2 = 'Take the 2nd left toward the exit, then...';
$reg_find = '/Take the (.*?) (right|left).*/';
$reg_replace = '$1 $2';
$results = array(
    preg_replace($reg_find, $reg_replace, $test1),
    preg_replace($reg_find, $reg_replace, $test2)
);
echo implode('>', $results);
?> 
```

**编辑：**

为了更灵活的解决方案，我创建了这个：

```
<?php
$test1 = 'Take the 2nd right.';
$test2 = 'Take the 2nd left toward the exit, then ...';
$remove = '/( ?)(take|then|at|toward|the|exit|\.|,)( ?)/i';
$results = array(
    preg_replace($remove, '', $test1),
    preg_replace($remove, '', $test2)
);
echo implode('>', $results);
?> 
```

# vba - vb6 中的硬件启用/禁用

> ID：11822699
> 
> 赞同：1
> 
> 时间：2012-08-06T04:51:00.520
> 
> 标签：vba, vb6, vbscript

我需要找到一种方法来启用和禁用 cd 驱动程序，就像您可以在设备管理器中右键单击该项目一样。我在看WMI。如果有人有任何想法，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T04:54:58.730

您可以在 Windows 中使用 DevCon 来禁用特定设备。

[http://msdn.microsoft.com/en-us/library/windows/hardware/ff544746(v=vs.85).aspx#ddk_example_31_disable_devices_by_device_instance_id_tools](http://msdn.microsoft.com/en-us/library/windows/hardware/ff544746(v=vs.85).aspx#ddk_example_31_disable_devices_by_device_instance_id_tools)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T07:55:05.073

使用 sc 命令。它提供驱动程序和服务。在列表中，它默认为仅服务，但可以被告知做驱动程序。它加载/卸载驱动程序或设置它的加载方式。

```
sc query type= driver 
```

卸载

```
sc stop cdrom 
```

从开始设置

```
sc config cdrom start= disabled 
```

设置为作为引导驱动程序启动

```
sc config cdrom start= boot 
```

# excel - Excel VBA：虚拟排序工作表？

> ID：11822700
> 
> 赞同：0
> 
> 时间：2012-08-06T04:51:12.550
> 
> 标签：excel, vba

我有一个工作表，其中包含一堆没有特定顺序的行。为了加快我的宏，我想按“名称”（B 列）的字母顺序对条目进行排序。然而，我的老板不希望这张单子真正排序——天知道为什么，但他是老板。

基本上我想做的是对范围进行排序，运行我的宏，然后将其返回到原始顺序。但是因为原来的顺序没有“顺序”，我不能简单地使用不同的排序方法。

我知道快速排序算法，我总是可以将范围拆分为一个范围数组，每行一个条目，然后对该数组进行排序。但我想知道是否有更有效的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T04:59:11.783

您可以在工作表中添加另一列（永久或临时），其中包含一个排序索引号（在工作表中按顺序排列的数字）。一旦你完成了你需要做的事情，对这个额外的列进行排序将使数据恢复原样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T05:34:37.503

除了我的评论，这里有一个例子，它可以让你的原始工作表保持不变。

```
Sub Sample()
    Dim ws As Worksheet

    Set ws = Sheets("Sheet1").Copy(Before:=Sheets(1))

    With ws
        .Columns("B:B").Sort key1:=.Range("B1"), order1:=xlAscending

        '
        '~~> Do your stuff
        '
    End With

    '~~> Delete sheet once you are done.       
    Application.DisplayAlerts = False
    ws.Delete
    Application.DisplayAlerts = True

    Set ws = Nothing
End Sub 
```

# c# - 即时替换 wpf 图像源

> ID：11822705
> 
> 赞同：0
> 
> 时间：2012-08-06T04:52:32.903
> 
> 标签：c#, wpf

我在 xaml 中使用图像，如下所示，

```
<Image x:Name="JustMyImage" Width="635" Height="120" Canvas.Left="-19" Canvas.Top="-19" Source="../images/UnCategorized/Anywhere.png"/> 
```

如果我想动态更改图像源，我需要执行以下代码

```
 BitmapImage bi = new BitmapImage();
            bi.BeginInit();
            bi.UriSource = new Uri(".\images\panel.PNG", UriKind.Relative);
            bi.EndInit();

            this.JustMyImage.Source = bi; 
```

是否有直接的“一条线”方法来替换图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T05:01:41.663

你可以这样做：

```
 JustMyImage.Source = new BitmapImage(new Uri(".\images\panel.PNG")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T07:04:32.647

您可以在资源中创建一个 BitmapImage 标记并引用它（我认为 StaticResource 会起作用，否则使用 DynamicResource）。

从您的“JustMyImage”中引用此 BitmapImage。当您更新 BitmapImage 的 URI 时，“JustMyImage”应反映此更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-01T08:33:38.637

我使用转换器来解决这个问题：

```
public class KepPathKonverter : IValueConverter
{
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        BitmapImage o;
        try
        {
            o = new BitmapImage(new Uri($"{Main.baseDir}\\{value}"));
        }
        catch (Exception ex)
        {
            o = new BitmapImage();
        }
        return o;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture) => throw new NotImplementedException();
} 
```

# c++ - 在 C++ 中跨多个文件使用多个命名空间中的类

> ID：11822710
> 
> 赞同：1
> 
> 时间：2012-08-06T04:53:46.647
> 
> 标签：c++, avr-gcc

我在使用`avr-g++`（AVR 微控制器的 C++ 编译器）编译以下代码时遇到问题。

```
#ifndef SPI_H_
#define SPI_H_

#include "../LIBcpp.hpp"
namespace uC
{
    namespace SPI
    {
        class Device
        {
        private:
            SPI* m_SPI;
            uC::IO::Pin* m_CSPin;
            ChipSelectPolarity m_CSPolarity;

        public:
            Device(SPI& _SPI, uC::IO::Pin& _CSPin, ChipSelectPolarity _CSPolarity);

            void Select();
            void DeSelect();

            void WriteByte(uint8_t _Data);
            uint8_t WriteReadByte(uint8_t _Data);

            void WriteBytes(uint8_t _Data[], uint8_t _DataLength);
            void WriteReadBytes(uint8_t _Data[], uint8_t _ReadBuffer[], uint8_t _DataLength);
        };
    }
}

#endif /* SPI_H_ */ 
```

请注意，我在这个文件中定义了几个枚举和类，这些枚举和类在这个类中使用但没有被包含在内，以防止代码太长。

我收到错误

```
'IO' in namespace 'uC' does not name a type
'uC::IO' has not been declared
 expected ',' or '...' before '&' token 
```

在我的项目中，我有几个代表`modules`我正在处理的项目的特定文件。这些文件位于名为`Modules`. 头文件`LIBcpp.hpp`在上面的目录中。它包括`Modules`子目录中的所有头文件。

类`Pin`在命名空间内定义，命名空间`IO`在命名空间内`uC`。此类定义在名为 的头文件中`IO.hpp`，该文件包含在`LIBcpp.hpp`.

我试过的：

`IO.hpp`在头文件中包含`SPI.hpp`头文件——导致同样的错误

我不知道如何解决这个错误。如果需要更多代码或信息来解决这个问题，我会提供。

谢谢！

这是`IO.hpp`，根据要求：

```
#ifndef IO_H_
#define IO_H_

#include "../LIBcpp.hpp"

namespace uC
{
    namespace IO
    {
        class Port
        {
                //Contents removed
        };

        class Pin
        {
                //Contents removed
        };
    }
}

#endif /* IO_H_ */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:36:02.500

> 类“Pin”在命名空间“IO”中定义，该命名空间在命名空间“uC”中。此类在名为“IO.hpp”的头文件中定义，该文件包含在“LIBcpp.hpp”中。

但`IO.hpp`包括`LIBcpp.hpp`. 你有圆形夹杂物——这非常糟糕。您必须更改标题结构，以免出现循环包含。

# java - 将节点转换为给出 ClassCastException 的元素

> ID：11822719
> 
> 赞同：5
> 
> 时间：2012-08-06T04:55:59.347
> 
> 标签：java, android, nodes, xmlnodelist

这里 n2 是我的 NodeList，我只想查看我的根元素的第一个子节点

```
public void ClickMe(View view){

    Node rootElement=n2.item(0);
    NodeList child=rootElement.getChildNodes();

    Node first=child.item(0);
    //ClassCastException error is coming whenever i am casting first to Element.

    Element nm=(Element)first;

    Option q= getOption(nm,first);
    Log.i(TAG,"the name is was talking about is : "+ q.getName());
} 
```

这就是 logcat 说的

```
07-31 20:32:38.376: E/AndroidRuntime(2950): Caused by: java.lang.ClassCastException: org.apache.harmony.xml.dom.TextImpl cannot be cast to org.w3c.dom.Element 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T05:02:50.710

试试这样......

```
NodeList LOP = odoc.getElementsByTagName("Your_XML_Top_Element");

                Node FPN =LOP.item(0);
                try{
                if(FPN.getNodeType() == Node.ELEMENT_NODE)
                    {

                    Element token = (Element)FPN;

                    NodeList oNameList1 = token.getElementsByTagName("Your_XML_Sub_Node");
                    Element firstNameElement = (Element)oNameList1.item(0);
                    NodeList textNList1 = firstNameElement.getChildNodes();

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T05:02:15.337

如果节点是元素，那么只转换它。进行如下检查。

```
if (first.getNodeType() == Node.ELEMENT_NODE) { Element nm=(Element)first;} 
```

# iphone - 什么是表格视图IOS中的页脚

> ID：11822720
> 
> 赞同：0
> 
> 时间：2012-08-06T04:56:01.660
> 
> 标签：iphone, objective-c, ios, xcode

什么是页脚。我们什么时候使用它。我有一个示例代码，他们在其中使用了 method `viewForFooterInSection`。它会做什么......有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T05:03:52.680

它用作节末尾的视图，放置在节中的单元格之后，下一节的标题视图之前。 [这是相应的文档链接](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/tableview_iphone/TableViewStyles/TableViewCharacteristics.html#//apple_ref/doc/uid/TP40007451-CH3-SW4)和该页面的照片：

![在此处输入图像描述](../Images/6227a8a4c7af94edd91af9369a9a65f9.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-06T05:01:35.790

A`UITableView`可以被认为由三个主要元素组成，一个“列表” - 包含部分和单元格、页眉和页脚。

列表区域可以包含 1 到多个部分，并且在分组表视图中，您可能还具有部分的页眉和页脚。假设您在谈论表格页脚而不是节页脚，以下是我的回答：

表格的页脚就是它在锡上所说的内容......您可能希望使用它来显示有关表格视图数据的一些附加信息。

检查 App Store，Apple 在表格视图的底部（在某些区域）显示有关登录商店的用户的一些信息。

我有时会将此页脚视图用作显示 的区域`UIActivityIndicatorView`，并为任何 API 相关数据启动一种“获取更多”功能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-06T05:04:01.510

[UITableViewDelegate 协议](https://stackoverflow.com/questions/1595342/text-in-header-footer-of-table-section-iphone)允许您返回节的页眉和页脚的视图。只需实现此方法并返回一个 UILabel 填充您要显示的文本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-06T05:07:01.503

`viewForFooterInSection`您可以添加自定义标签或其他对象以显示在页脚部分。 从下面的两个链接你就可以理解了。

[在 UITableView 中更新节页脚标题而不重新加载](https://stackoverflow.com/questions/5929675/update-section-footer-title-in-uitableview-without-reloading)

[将基本页脚设置为 UITableView](https://stackoverflow.com/questions/5111748/setting-a-basic-footer-to-a-uitableview)

# cocoa - 如何停止动画但使其完成当前动画

> ID：11822722
> 
> 赞同：2
> 
> 时间：2012-08-06T04:56:06.240
> 
> 标签：cocoa, core-animation

我制作动画并让它永远运行。现在我想在点击一个按钮后停止它。然后动画将按钮的图像从 0 度旋转到 360 度。我想停止动画，但让动画完成当前循环。例如，如果按钮旋转了 200 度，并且我单击了停止按钮，我希望动画仍然运行到 360 度然后停止。动画代码如下：

```
CABasicAnimation *anim2 = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
anim2.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
anim2.fromValue = [NSNumber numberWithFloat:0];
anim2.toValue = [NSNumber numberWithFloat:-((360*M_PI)/180)];
anim2.repeatCount = HUGE_VALF;
anim2.duration = 10;
[self.imgBtn.layer addAnimation:anim2 forKey:@"transform"]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:41:01.880

虽然您可以使用 来从图层中获取动画，但`animationForKey:`您不能以这种方式修改动画。正如文档所解释的那样：

> **讨论**
> 
> 尝试修改返回对象的任何属性将导致未定义的行为。

# 你必须做的

您必须删除无限动画并添加另一个动画来制作最终动画。

1.  使用表示层来确定图层的当前旋转。
2.  移除无限动画
3.  从您从表示层获得的值添加一个新动画到结束状态。

## 如何从表示层获取值。

在动画期间，您的模型不会改变（使用核心动画时）。相反，您在屏幕上看到的是图层表示层。然后，您可以从表示层读取当前值，就像它是任何其他层一样。在您的情况下，您可以使用`[myLayer valueForKey:@"transform.rotation"];`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T21:02:59.957

或者，您可以使用完成方法在无限循环中再次触发动画创建单个动画。

在提交重复之前让完成例程检查标志。

如果标志为假，则不再触发动画。

然后让您的按钮操作只需将重复标志设置为 false。当前动画将运行完成，然后不再重复。

# jquery-selectors - jquery on show 和 on hide 不使用类选择器

> ID：11822726
> 
> 赞同：1
> 
> 时间：2012-08-06T04:57:37.490
> 
> 标签：jquery-selectors, jquery

我正在尝试在文本区域中输入某些角色，并使用引导程序在弹出块中突出显示它。

预期的行为是必须突出显示所选角色，当我将 id 选择器用于 jquery 时，代码有效，但相同的代码不适用于类选择器

```
<textarea name="options" id="options" cols="30" rows="10">admin user</textarea>

<a class="btn" data-toggle="modal" href="#myModal">Launch Modal</a>
<div class="modal hide fade" id="myModal" class="myModal">
    <div class="modal-header">
        <a class="close" data-dismiss="modal">×</a>
        <h3>Modal header</h3>
    </div>
    <div class="modal-body">
        <div>
            <ul>
                <li class="mlist">admin</li>
                <li class="mlist">user</li>
                <li class="mlist">guest</li>
                <li class="mlist">blank</li>
            </ul>
        </div>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn btn-primary" data-dismiss="modal">Close</a>
    </div>
</div>

<script type="text/javascript">

    $(document).ready(function (){
        console.log('Inside onready');
        $('.myModal').on('show', function () {
            console.log('Inside show');
            var option = $('#options').val();
            var options = option.split(" ");
            console.log('Selected roles: ' + options);

            for (var index = 0; index < options.length; index++) {
                highlight(options[index]);
            };
        });
        $('.myModal').on('hide', function () {
            console.log('Inside onhide');
            $('.mlist').removeClass('btn-primary');
        });
    });

    function highlight(parOptions) {
        $('.mlist:contains("' + parOptions +'")').addClass('btn-primary');
    }

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T05:02:43.110

我想这与你的 div 有两个类标签有关。

```
<div class="modal hide fade" id="myModal" class="myModal"> 
```

改成

```
<div class="modal hide fade myModal" id="myModal"> 
```

# php - 如果当前 url Magento，则回显类“活动”

> ID：11822728
> 
> 赞同：0
> 
> 时间：2012-08-06T04:57:53.783
> 
> 标签：php, css, magento

我的 Magento 模板文件中有几个链接。如果用户当前正在查看作为链接之一的页面，我希望该链接显示 CSS 类“活动”。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T05:24:59.677

创建一个包含所有链接（或页面）的数组

```
$urls = array('home.php', 'about.php', 'contact.php'); 
```

然后将当前 url 与数组中的 url 进行比较：

```
<li><a href="about.php" <?php if(in_array($current_url, $urls))
 { echo 'class="active"'; } ?>>About Us</a></li>; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T05:05:12.693

```
$routeName   =  Mage::app()->getRequest()->getRouteName();
$identifier  =  Mage::getSingleton('cms/page')->getIdentifier(); 
```

上面的变量`$routeName`可以用来检查当前页面是否是CMS页面。另一个变量`$identifier`将输出页面标识符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T06:26:37.390

Magento 为每个页面单独分配类 获得活动状态的最简单方法是为每个链接分配一个类，然后为特定的正文类和链接类编写一个 CSS 角色。

```
 body.page-a a.class-a {
    color:red}
     body.page-b a.class-b {
    color:red}

    <body class="page-b">
    <a class="class-a">page a</a>
    <a class="class-b">page b</a>
</body> 
```

# ruby-on-rails - Ruby on Rails 中没有路由匹配

> ID：11822733
> 
> 赞同：1
> 
> 时间：2012-08-06T04:58:39.777
> 
> 标签：ruby-on-rails, ruby-on-rails-3, login, devise, change-password

在我的 ruby​​ on rails 项目中，我使用 devise 作为身份验证插件。现在我已将更改密码功能添加到项目中，提交表单时出现错误`No route matches "/users/update_password"`

这是我的更新密码代码

```
 def update_password
    @user = User.find(current_user.id)
    if @user.update_attributes(params[:user])
      # Sign in the user by passing validation in case his password changed
      sign_in @user, :bypass => true
      redirect_to root_path
    else
      render "edit"
    end
  end 
```

这是我的路线详情

```
resources :users, :only => [] do
        collection do
            get 'current'
            get 'edit'
            post 'update_password'
        end
    end 
```

这是我的编辑表格

```
<div id="loginForm">
    <div id="loginHeader"><h3>Change Password</h3></div>
    <div id="loginContent">
        <%= form_for(@user, :url => { :action => "update_password" }) do |f| %>
            <p><%= f.password_field :current_password, :class => "login_txt", :placeholder => "We need your current password to confirm your changes", :autocomplete => "off" %></p>
            <p><%= f.password_field :password, :class => "login_txt", :placeholder => "New password", :autocomplete => "off"  %></p>
            <p><%= f.password_field :password_confirmation, :class => "login_txt", :placeholder => "Confirm password", :autocomplete => "off" %></p>
            <p>
                <input id="user_submit" name="commit" type="submit" value="Update Password" class="login_btn" /> 
            </p>
        <% end %>
    </div>
</div> 
```

谁能帮我解决这个问题

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:21:35.390

在您`routes.rb`定义`update_password`为集合 ( `/users/update_password`) 上的 POST 操作，但在您的表单中，当您传递`@user`到时，您将其隐式定义为 PUT 操作`form_for`，因为`@user`已经存在。

我没有对此进行测试，但我相信将集合上的路由从 POST 更改为 PUT 应该可以解决此问题：

```
resources :users, :only => [] do
  collection do
    get 'current'
    get 'edit'
    put 'update_password'
  end
end 
```

另请参阅：[Rails 3.0.10、客户路线、post 和 form_for 标签](https://stackoverflow.com/questions/8303752/rails-3-0-10-customer-routes-post-and-form-for-tag)

# eclipse - 是否可以使用 Eclipse 和 SVN 进行多个错误修复？

> ID：11822734
> 
> 赞同：2
> 
> 时间：2012-08-06T04:58:51.737
> 
> 标签：eclipse, svn, clearcase

使用 Clearcase，我可以创建多个视图并同时处理 3-4 个缺陷。是否可以在没有多个 svn checkouts 实例和多个 Eclipse IDE 实例的情况下以类似的方式工作？这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T05:03:56.210

您将需要多个 svn 工作区，就像您需要多个 ClearCase 快照视图一样。
（由于动态视图的特殊性质，只有多个*动态*视图允许您避免磁盘上的多个副本）

而且您将需要多个 Eclipse 工作区，因为无论您使用什么源代码控制工具，您都不能在一个 Eclipse 工作区中两次导入同一个项目。

# codeigniter - 无法从codeigniter的linux服务器中的控制器加载模型

> ID：11822738
> 
> 赞同：1
> 
> 时间：2012-08-06T04:59:14.823
> 
> 标签：codeigniter

我开发了一个小型会计应用程序，它在 Windows 机器的 xampp 中运行良好，并且在我的开发服务器（基于 linux）中运行良好。

但是，当我将整个应用程序迁移到客户端 linux 服务器时，出现以下错误：

解析错误：语法错误，第 1 行 /home/orcilia/public_html/cfm/application/models/sm_main.php 中的意外 T_STRING

我检查了好几次，但没有发现错误...

但是，我认为在客户端服务器中从控制器加载模型的情况下存在一些问题..

请帮助我解决这个问题..我花了很多时间但无法摆脱这个错误......

谢谢，

* * *

塔尼戈什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:30:10.720

如果您`<?`用作开始标签（在文件的开头检查），请将其更改为 `<?php`. 服务器可能不允许使用速记样式。

# android - Android 浏览器源代码 - 编译问题

> ID：11822745
> 
> 赞同：0
> 
> 时间：2012-08-06T05:00:19.423
> 
> 标签：android, android-source, android-browser

我将android浏览器源代码导入eclipse。但是，由于许多错误，我无法构建代码。

我参考了这个链接并尝试了教程中的步骤。

[如何为Android 4.0.3编译浏览器源代码](https://stackoverflow.com/questions/10447622/how-to-compile-browser-source-code-for-android-4-0-3)

但是，我面临一些问题。我创建了 classes.dex.dex2.jar 文件。但是在 jar 文件中，我浏览了空的 com/android/internal 文件夹。我尝试了很多次，但遇到了同样的问题。我正在使用 Windows 7 操作系统。

请帮助我解决问题。

提前致谢。

**错误原因 - 无法在应用程序中导入内部和隐藏 API。**

***修复构建问题的步骤。***

1.  从以下链接下载了 android-10-internals 文件夹。 [https://github.com/inazaruk/android-sdk/tree/master/platforms](https://github.com/inazaruk/android-sdk/tree/master/platforms)

2.  解压缩文件夹并将文件夹复制到 android-sdk-platforms 文件夹。

3.  启动 Eclipse。单击新建项目并输入项目名称，然后单击下一步。**在 android sdk 列表中，我没有看到我新添加的平台。**

4.  封闭的日食。复制 android.jar 和构建属性文件并粘贴到 android-sdk-platforms-android 10 文件夹中。

5.  浏览到 eclipse - plugins 文件夹并将 adt jar 文件复制到不同的位置。将其重命名为 zip 文件。解压缩文件并将 com/android/internal 更改为 com/android/internax 并压缩文件并重新创建 jar 文件。

6.  替换了jar文件。打开了日食。

**7\. 仍然在 android-jar 中，我发现禁止规则没有被删除。所有导入错误仍未解决。**

如果我遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:01:55.977

可能是sdk的问题。因此，导入包显示错误。参考这个链接：

单击此处[如何在 android Os 4.0 中构建默认浏览器应用程序](https://stackoverflow.com/questions/8894613/how-to-build-the-default-browser-application-in-android-os-4-0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T06:23:53.090

朋友们，

我需要修改后的 android-adt.jar 文件的工作版本。只有这样才能解决我的问题。如果有人以前尝试过并且工作过，请分享。

谢谢。

# android - Emulator-5554 已断开连接！取消“活动启动”！尝试使用 cmd 命令解决，但仍然无法正常工作

> ID：11822747
> 
> 赞同：3
> 
> 时间：2012-08-06T05:01:00.133
> 
> 标签：android, android-emulator

我收到此错误，我试图解决它，但仍然无法正常工作。我尝试了“adb kill-server”和 adb start-server 以及 emulator -avd emulator_name -wipe-data。

我附上了cmd的屏幕截图。

我只想运行我的应用程序，但是在“等待 HOME ('android.process.acore') 启动之后。” 我收到 emulator-5554 disconnected 错误，我在网上搜索并从以下链接尝试了命令

[HelloAndroid]emulator-5554 断开连接！取消“com.example.helloandroid.HelloAndroid 活动启动”！](https://stackoverflow.com/questions/2160454/helloandroidemulator-5554-disconnected-cancelling-com-example-helloandroid-he)

我试图重置 adb 但出现以下错误：

```
[2012-08-06 10:12:38 - DeviceMonitor] Adb connection Error:An existing connection was forcibly closed by the remote host

[2012-08-06 10:12:39 - DeviceMonitor] Connection attempts: 1 
```

现在，我尝试了以下擦除用户数据的解决方案，但我不想要它。我的应用程序需要相互交互，使用以下解决方案是不可能的，因为现在，我需要在运行每个应用程序之前擦除数据..:(

```
Select & Right Click on Android Project
Run Configurations
Go to tab Target 
Enable option Wipe User Data on Emulator launch parameters
Run Application 
```

![在此处输入图像描述](../Images/2ff174b8836e6074831648e9011edbd5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T05:38:07.863

如果你使用`Eclipse`只是去`Windows`- `Show View`- `Device`。有小三角`Show menu`。按 并选择`reset adb`。稍等片刻，然后再次运行您的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T18:15:20.493

我所做的是转到 Android 虚拟管理器 (AVD) 并编辑内存选项：比如将 Ram 从 15 调整到 30，将 VM 堆从 16 调整到 32。从那时起，“模拟器：5554 断开连接！取消……”从来没有吓到我直到我关闭它。不过，它对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T04:51:59.957

我按照以下步骤解决了它，

*   运行模拟器
*   保留模拟器，（无论出现相同的错误）
*   确保出现模拟器的主屏幕
*   转到窗口 -> 显示透视图 -> DDMS -> 在设备面板中 -> 在角落下拉菜单上
*   重置亚行

我希望它有帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-11T12:43:46.203

修复它，`adb kill-server`然后`adb start-server`

# c# - 如何更改 C# winforms 中未使用空间选项卡的背景颜色？

> ID：11822748
> 
> 赞同：6
> 
> 时间：2012-08-06T05:01:05.383
> 
> 标签：c#, winforms, tabs, tabcontrol

前任

```
 |Tab1|Tab2|Tab3| {    }
  |                     |
  |                     |
  |                     |
  |                     |
  |_____________________| 
```

我可以更改 .. 的`backcolor`and `forecolor`，`Tab`但我想更改 { } 的颜色 --> 空白空间是否可以这样做。..它显示默认的winforms颜色..帮助我在dis..

```
 private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void tabControl1_DrawItem(object sender, System.Windows.Forms.DrawItemEventArgs e)
    {
        Font fntTab;
        Brush bshBack;
        Brush bshFore;

        if ( e.Index == this.tabControl1.SelectedIndex)
        {
            fntTab = new Font(e.Font, FontStyle.Bold);
            bshBack = new System.Drawing.Drawing2D.LinearGradientBrush(e.Bounds, SystemColors.Control, SystemColors.Control, System.Drawing.Drawing2D.LinearGradientMode.BackwardDiagonal);
            bshFore = Brushes.Black;
            //bshBack = new System.Drawing.Drawing2D.LinearGradientBrush(e.Bounds, Color.LightSkyBlue , Color.LightGreen, System.Drawing.Drawing2D.LinearGradientMode.BackwardDiagonal);
            //bshFore = Brushes.Blue;
        }
        else
        {
            fntTab = e.Font;
            bshBack = new SolidBrush(Color.Red);
            bshFore = new SolidBrush(Color.Aqua);

            //bshBack = new SolidBrush(Color.White);
            //bshFore = new SolidBrush(Color.Black);
        }

        string tabName  = this.tabControl1.TabPages[e.Index].Text;
        StringFormat sftTab = new StringFormat();
        e.Graphics.FillRectangle(bshBack, e.Bounds);
        Rectangle  recTab = e.Bounds;
        recTab = new Rectangle( recTab.X,  recTab.Y + 4,  recTab.Width,  recTab.Height - 4);
        e.Graphics.DrawString(tabName, fntTab, bshFore, recTab, sftTab);

    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T19:24:38.787

尝试将以下代码添加到 DrawItem 事件处理程序。不要忘记将 DrawMode 设置为“OwnerdrawFixed”。

您可能需要稍微调整一下以覆盖一些未绘制的边距。

```
私人无效tabControl1_DrawItem（对象发送者，System.Windows.Forms.DrawItemEventArgs e）
{
      SolidBrush fillbrush=新的SolidBrush(Color.Red);

 `//draw rectangle behind the tabs
  Rectangle lasttabrect = tabControl1.GetTabRect(tabControl1.TabPages.Count - 1);
  Rectangle background = new Rectangle();
  background.Location = new Point(lasttabrect.Right, 0);

  //pad the rectangle to cover the 1 pixel line between the top of the tabpage and the start of the tabs
  background.Size = new Size(tabControl1.Right - background.Left, lasttabrect.Height+1);
  e.Graphics.FillRectangle(fillBrush, background);
}` 

'这个答案比之前的答案要好得多。但是 tabCtrl 没有定义。它必须是 tabControl1 控件。

            回答 #2

赞同：6

时间：2012-08-06T06:56:59.557

我认为给该空间一个颜色的唯一方法是覆盖`OnPaintBackground`窗口的方法，所以只需将其粘贴到您的表单（窗口）上

您还必须将外观属性更改为“正常”

```
private void Form1_Load(object sender, EventArgs e)
{

}

protected override void OnPaintBackground(PaintEventArgs e)
{
    base.OnPaintBackground(e);
    Rectangle lasttabrect = tabControl1.GetTabRect(tabControl1.TabPages.Count - 1);
    RectangleF emptyspacerect = new RectangleF(
            lasttabrect.X + lasttabrect.Width + tabControl1.Left,
            tabControl1.Top + lasttabrect.Y, 
            tabControl1.Width - (lasttabrect.X + lasttabrect.Width), 
            lasttabrect.Height);

    Brush b = Brushes.BlueViolet; // the color you want
    e.Graphics.FillRectangle(b, emptyspacerect );
} 
```

对我来说它工作得很好

![在此处输入图像描述](../Images/e828c4a3145d4693e262d3cddaf494e8.png)

            回答 #3

赞同：2

时间：2012-08-06T07:57:18.367

您还可以像以前一样创建自定义选项卡控件

```
public class mytab : TabControl
{
    public mytab()
        : base()
    {
        this.DrawMode = TabDrawMode.OwnerDrawFixed;
        this.DrawItem += new DrawItemEventHandler(tabControl1_DrawItem);
    }

    private void tabControl1_DrawItem(object sender, System.Windows.Forms.DrawItemEventArgs e)
    {
        Font fntTab;
        Brush bshBack;
        Brush bshFore;

        if (e.Index == this.SelectedIndex)
        {
            fntTab = new Font(e.Font, FontStyle.Bold);
            bshBack = new System.Drawing.Drawing2D.LinearGradientBrush(e.Bounds, SystemColors.Control, SystemColors.Control, System.Drawing.Drawing2D.LinearGradientMode.BackwardDiagonal);
            bshFore = Brushes.Black;
            //bshBack = new System.Drawing.Drawing2D.LinearGradientBrush(e.Bounds, Color.LightSkyBlue , Color.LightGreen, System.Drawing.Drawing2D.LinearGradientMode.BackwardDiagonal);
            //bshFore = Brushes.Blue;
        }
        else
        {
            fntTab = e.Font;
            bshBack = new SolidBrush(Color.Red);
            bshFore = new SolidBrush(Color.Aqua);

            //bshBack = new SolidBrush(Color.White);
            //bshFore = new SolidBrush(Color.Black);
        }

        string tabName = this.TabPages[e.Index].Text;
        StringFormat sftTab = new StringFormat();
        e.Graphics.FillRectangle(bshBack, e.Bounds);
        Rectangle recTab = e.Bounds;
        recTab = new Rectangle(recTab.X, recTab.Y + 4, recTab.Width, recTab.Height - 4);
        e.Graphics.DrawString(tabName, fntTab, bshFore, recTab, sftTab);

        Rectangle r = this.GetTabRect(this.TabPages.Count - 1);

        RectangleF tf =
            new RectangleF(r.X + r.Width,
            r.Y-5, this.Width - (r.X + r.Width)+5, r.Height+5);
        Brush b = Brushes.BlueViolet;

        e.Graphics.FillRectangle(b, tf);
    }

} 
```

```

# playframework - 在 Play 中创建 WAR 文件！2.0项目？

> ID：11822749
> 
> 赞同：0
> 
> 时间：2012-08-06T05:01:09.330
> 
> 标签：playframework

> **可能重复：**
> [如何在 play2 中将项目打包到战争中？](https://stackoverflow.com/questions/9337581/how-to-package-the-project-to-war-in-play2)

如何从 Play 创建 WAR 文件！2.0项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T06:06:30.657

在当前版本的 Play 2.0 中，这在核心中是不可能的。Core 应该在 2.1 中添加此功能。

但是，现在有一个插件可以做到这一点 - [https://github.com/dlecan/play2-war-plugin/](https://github.com/dlecan/play2-war-plugin/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T18:23:25.743

现在没有计划，因为 NIO 在 servlet 容器中是不可能的（暂时）

# dll - 识别 DLL 的来源

> ID：11822768
> 
> 赞同：5
> 
> 时间：2012-08-06T05:03:32.760
> 
> 标签：dll, compiler-construction

如何确定用于创建 DLL 的编译器？

我有一个 DLL - 是否有可能找出 DLL 是如何创建的（.NET/C++/Labview 等）。我没有 DLL 文件的来源。我也尝试使用反编译器进行检查，但它没有提供任何有关如何创建 DLL 的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T05:15:47.637

有许多工具可用于执行此类分析。在[这里](http://sumtips.com/2012/05/detect-identify-exe-compiler-packer.html)查看一些流行选项的摘要（即 PEiD、Exeinfo PE 和 Language 2000）。

# git - ！没有 demo_app 这样的应用

> ID：11822770
> 
> 赞同：1
> 
> 时间：2012-08-06T05:03:36.063
> 
> 标签：git, heroku

我是 github/heroku 的新手，我现在正在做一个 Rails 教程。当我尝试提交申请时，我收到一条错误消息！没有 demo_app 这样的应用程序。但是，当我这样做时

```
git remote -v 
```

我得到：

```
heroku git@heroku.com:demo_app.git (fetch)
heroku git@heroku.com:demo_app.git (push)
origin git@heroku.com:schan93/demo_app.git (fetch)
origin git@heroku.com:schan93/demo_app.git (fetch) 
```

但是当我这样做时

```
git push heroku master 
```

我收到一条错误消息

```
! No such app as demo_app. 
```

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T06:05:28.590

请原谅这是一个不正确的假设，但我猜你在 heroku 上没有名为 demo_app 的应用程序。

如果是这种情况，您应该使用[heroku gem](http://rubygems.org/gems/heroku)创建一个应用程序，如下所示。

```
heroku apps:create 
```

您可以像这样传递一个可选名称。

```
heroku apps:create my_app 
```

这应该会吐出一个 git url，然后您可以将其添加到 git 并且您应该能够推送到。

# apache - 替换 URL 查询字符串中的“/”以避免 htaccess 中的 404

> ID：11822773
> 
> 赞同：3
> 
> 时间：2012-08-06T05:03:48.887
> 
> 标签：apache, .htaccess, url-rewriting

我有一个有两个参数的 url，我已经用这个在 htaccess 文件中重写了它们

`RewriteRule ^subscriber/([^/.]+)/([^/.]+)/?$ subscriber/index.php?id=$1&name=$2 [NC,L]`

在某些情况下，该名称包含一个“/”，浏览器将其视为另一个参数，并给我一个 404 页面。有没有办法使用 htaccess 文件将“/”替换为其他内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T05:25:47.630

尝试将其放入文档根目录的 htaccess 文件中：

```
RewriteEngine On

RewriteCond %{QUERY_STRING} ^(.*)name=([^&]*)/(.*)$
RewriteRule ^ %{REQUEST_URI}?%1name=%2-%3 [L]

# Change your existing rule a bit to account for the slash (plus a possible trailing slash):
RewriteRule ^subscriber/([^/.]+)/(.+?)/?$ /subscriber/index.php?id=$1&name=$2 [NC,L] 
```

这将使 URI 中的第一个“文件夹”在**subscriber/**之后，`id`参数，以及除尾斜杠之外的所有内容都成为*参数*`name`。然后第一组规则反复清除`name`参数，替换`/`为`-`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T05:07:44.943

设置名称变量时可以使用 urlencode() 函数

```
$name = 'Michael/';
$name = urlencode($name);
// will return you Michael%08 or something like this 
```

因此，对于[这个问题](https://stackoverflow.com/questions/3055043/using-htaccess-to-replace-backslash-in-url-with-forward-slash)，.htaccess 的解决方案可能是：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} (.*)\\(.*)
RewriteRule .* %1/%2 [R=301] 
```

# iphone - 地址簿问题添加超过 500 个联系人时

> ID：11822777
> 
> 赞同：1
> 
> 时间：2012-08-06T05:04:22.090
> 
> 标签：iphone, ios, addressbook

我正在开发一个 iphone 应用程序，该应用程序在用户有很多联系人的情况下崩溃。下面是一个导致崩溃的函数调用，但仅当用户有大约。超过 500 个联系人。下面是一个函数调用。在此先感谢。

```
- (IBAction)addToAddressBook{

NSString *importString = [[NSString alloc] init];
importString = importTextView.text;
if (importString==nil) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Could not Find Text" 
                                                    message:@"Try Pasting the Text Again" 
                                                   delegate:nil 
                                          cancelButtonTitle:@"Cancel"
                                          otherButtonTitles:nil];
    [alert show];
    [alert release];
}
statusLabel.text = @"Importing Lines";
NSArray *importLines = [importString componentsSeparatedByString:@"\n"];
[importString release];
ABAddressBookRef addressBook = ABAddressBookCreate();
CFRetain(addressBook);

ABRecordRef person;
CFErrorRef error = NULL;

ABMutableMultiValueRef multiPhone;
ABMutableMultiValueRef multiURL = ABMultiValueCreateMutable(kABMultiStringPropertyType);
ABMutableMultiValueRef multiEmail = ABMultiValueCreateMutable(kABMultiStringPropertyType);
ABMutableMultiValueRef multiAddress = ABMultiValueCreateMutable(kABMultiDictionaryPropertyType);
ABMutableMultiValueRef multiDate = ABMultiValueCreateMutable(kABMultiStringPropertyType);

NSMutableDictionary *addressDictionary;
statusLabel.text = @"Counting Records";
int totalRecords = 0;
for( int j = 0; j < 5; j++){
    NSString *line = [importLines objectAtIndex:j];
    if ([line rangeOfString: @"Contacts:"].location!=NSNotFound) {
        NSString *totalContactsLabel = [[line componentsSeparatedByString:@" Contacts: "] objectAtIndex:1];
        totalRecords = [totalContactsLabel intValue];
    }
}

int recordNumber = 0;
statusLabel.text = [NSString stringWithFormat:@"%i/%i", recordNumber, totalRecords];
for (NSString *line in importLines)
{
 if (![line isEqualToString:@""])
{

        NSMutableString *mutableLine = [NSMutableString stringWithString: line];

        if ([line hasPrefix:@"---"]) {
            //NSLog(@"starting new person");
            person = ABPersonCreate();
            multiPhone = ABMultiValueCreateMutable(kABMultiStringPropertyType); //clear multiphone for each new person
            multiURL = ABMultiValueCreateMutable(kABMultiStringPropertyType); 
            multiEmail = ABMultiValueCreateMutable(kABMultiStringPropertyType); 
            multiDate = ABMultiValueCreateMutable(kABMultiStringPropertyType);
            multiAddress = ABMultiValueCreateMutable(kABMultiDictionaryPropertyType); 

        } else if ([line hasPrefix:@"First Name: "]) {
            [mutableLine deleteCharactersInRange: [mutableLine rangeOfString: @"First Name: "]];
            line = (NSString *)mutableLine;
            ABRecordSetValue(person, kABPersonFirstNameProperty, line, &error);

        } else if ([line hasPrefix:@"Middle Name: "]) {
            [mutableLine deleteCharactersInRange: [mutableLine rangeOfString: @"Middle Name: "]];
            line = (NSString *)mutableLine;
            ABRecordSetValue(person, kABPersonMiddleNameProperty, line, &error);

        } else if ([line hasPrefix:@"Last Name: "]) {
            [mutableLine deleteCharactersInRange: [mutableLine rangeOfString: @"Last Name: "]];
            line = (NSString *)mutableLine;
            ABRecordSetValue(person, kABPersonLastNameProperty, line, &error);

        } else if ([line rangeOfString: @"Phone:"].location!=NSNotFound) {
            NSString *phoneLabel = [[line componentsSeparatedByString:@" Phone: "] objectAtIndex:0];
            NSString *phoneContent = [[line componentsSeparatedByString:@" Phone: "] objectAtIndex:1];
            if ([phoneLabel isEqualToString:@"Mobile"]) {
                ABMultiValueAddValueAndLabel(multiPhone, phoneContent, kABPersonPhoneMobileLabel, NULL);
                ABRecordSetValue(person, kABPersonPhoneProperty, multiPhone, &error);
            } else if ([phoneLabel isEqualToString:@"Home"]) {
                ABMultiValueAddValueAndLabel(multiPhone, phoneContent, kABHomeLabel, NULL);
                ABRecordSetValue(person, kABPersonPhoneProperty, multiPhone, &error);
            } else if ([phoneLabel isEqualToString:@"Work"]) {
                ABMultiValueAddValueAndLabel(multiPhone, phoneContent, kABWorkLabel, NULL);
                ABRecordSetValue(person, kABPersonPhoneProperty, multiPhone, &error);
            } else if ([phoneLabel isEqualToString:@"iPhone"]) {
                ABMultiValueAddValueAndLabel(multiPhone, phoneContent, kABPersonPhoneIPhoneLabel, NULL);
                ABRecordSetValue(person, kABPersonPhoneProperty, multiPhone, &error);
            } else {
                ABMultiValueAddValueAndLabel(multiPhone, phoneContent, (CFStringRef)phoneLabel, NULL);
                ABRecordSetValue(person, kABPersonPhoneProperty, multiPhone, &error);
            }
        }else if ([line rangeOfString: @"Email:"].location!=NSNotFound) {
            NSString *emailLabel = [[line componentsSeparatedByString:@" Email: "] objectAtIndex:0];
            NSString *emailContent = [[line componentsSeparatedByString:@" Email: "] objectAtIndex:1];
            if ([emailLabel isEqualToString:@"Main"]) {
                ABMultiValueAddValueAndLabel(multiEmail, emailContent, (CFStringRef)@"Main", NULL);
                ABRecordSetValue(person, kABPersonEmailProperty, multiEmail, &error);
            }else if ([emailLabel isEqualToString:@"Work"]) {
                ABMultiValueAddValueAndLabel(multiEmail, emailContent, kABWorkLabel, NULL);
                ABRecordSetValue(person, kABPersonEmailProperty, multiEmail, &error);
            } else {
                ABMultiValueAddValueAndLabel(multiEmail, emailContent, (CFStringRef)emailLabel, NULL);
                ABRecordSetValue(person, kABPersonEmailProperty, multiEmail, &error);
            }
        }

        if ([line hasPrefix:@"- -"]) {
            //ABRecordSetValue(person, kABPersonEmailProperty, multiEmail, &error);

            NSString *updateText;
            NSString *firstName = (NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);
            NSString *lastName = (NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty);

            if (![self personAlreadyExists:firstName withName:lastName]){
                ABAddressBookAddRecord(addressBook, person, &error);
                ABAddressBookSave(addressBook, &error);
                recordNumber++;

                if (firstName==nil) {
                    updateText = [NSString stringWithFormat:@"%@ added.", lastName];
                } else if (lastName==nil) {
                    updateText = [NSString stringWithFormat:@"%@ added.", firstName];
                } else {
                    updateText = [NSString stringWithFormat:@"%@ %@ added.", firstName, lastName];
                }

                //NSLog(updateText);
            } else {
                if (firstName==nil) {
                    updateText = [NSString stringWithFormat:@"%@ skipped.", lastName];
                } else if (lastName==nil) {
                    updateText = [NSString stringWithFormat:@"%@ skipped.", firstName];
                } else {
                    updateText = [NSString stringWithFormat:@"%@ %@ skipped.", firstName, lastName];
                }
                //NSLog(updateText);
            }

            updateLabel.text = [updateLabel.text stringByAppendingFormat:@"%@\n", updateText];

            statusLabel.text = @"";

            NSLog(@"%i/%i Imported", recordNumber, totalRecords);

        }

        if (error != NULL) {                    
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Could not create contact" delegate:nil cancelButtonTitle:@"Cancel" otherButtonTitles:nil];
            [alert show];
            [alert release];
        }
    }
}
//[importLines release];

[activity stopAnimating];
activity.hidden = TRUE;

UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Add To Contacts" message:[NSString stringWithFormat:@"Contacts successfully restored!", ABRecordCopyValue(person, kABPersonFirstNameProperty)] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
[alert show];
[alert release];
 } 
```

# asp.net - 从表链接下载 ASP.NET VB 文件

> ID：11822779
> 
> 赞同：0
> 
> 时间：2012-08-06T05:04:35.003
> 
> 标签：asp.net, download

我的 VB ASP.NET 应用程序中有一个来自数据库的填充表，如下所示：

```
<dl class="row">
    <dd style="width:20%; background:none;">
        <%# Eval("name")%>
    </dd>
    <dd style="width:20%;">
        <%# Eval("description")%>
    </dd>
    <dd style="width:30%;">
        <a href="<%# Eval("templateLink")%>"><%# Eval("templateId")%></a>
    </dd>
</dl> 
```

现在，我已将模板的链接保存在其中，`templateLink`并使用`Guid`它的名称，即`templateId`. 现在，当我单击该链接时，我希望能够保存文件，但现在它没有这样做。我什至无法访问服务器上的文件（在开发环境中我可以访问但仍然无法下载）。

这是我正在使用的路径。

```
<configuration>
    <appSettings>
        <add key="UploadLocation" value="C:\inetpub\wwwroot\MyProject\Intranet\Resources\"/>
    </appSettings>
<configuration> 
```

这是上传代码：

```
Dim TempEx As String = System.IO.Path.GetExtension(fuTemp.FileName)
Dim TempPath As String = ConfigurationManager.AppSettings("UploadLocation")
Dim TempName As String = report.TempID.ToString + TempEx

fuTemp.PostedFile.SaveAs(TempPath + TempName)

report.TemplateLink = TempPath + TempName 
```

如您所见，我正在保存 TemplateLink 的路径，稍后我将使用它来`a href`为表创建路径。我尝试使用我在网上找到的几种解决方案，但无法充分利用它。

如果可能的话，请向我澄清这个问题:(

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T05:21:25.477

您需要存储`UploadLocation`为相对路径：

`<add key="UploadLocation" value="/Intranet/Resources/"/>`

在您的上传代码中，用于`Server.MapPath(ConfigurationManager.AppSettings("UploadLocation")`获取文件系统路径。

然后绑定`TempPath + TempName`应该为您提供正确的 HTTP 链接而不是文件系统路径。

# iphone - 将 iPhone 控制应用程序链接到主要 iPad 应用程序

> ID：11822781
> 
> 赞同：0
> 
> 时间：2012-08-06T05:05:01.797
> 
> 标签：iphone, ipad, ipod-touch

有谁知道这样做的最佳方法是什么？我的 CS 研究教授。建议蓝牙可能是最好的方法。

我正在为 iPad 开发一个音乐应用程序，并想在 iPhone/iPod touch 上制作一个单独的应用程序，作为主应用程序的遥控器。只需向几个 IBAction 发送一些按钮/滑块/等消息。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T07:56:48.950

这是正确的做法。

有关所有必要信息，请参阅[CoreBluetooth 框架参考](http://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/_index.html#//apple_ref/doc/uid/TP40011295)。
还有[示例代码](http://developer.apple.com/library/ios/#samplecode/TemperatureSensor/Introduction/Intro.html#//apple_ref/doc/uid/DTS40012194)。

# django - Django自定义登录使用自己的模型

> ID：11822782
> 
> 赞同：5
> 
> 时间：2012-08-06T05:05:01.823
> 
> 标签：django, django-models

我将 Django1.4 与 PostgreSQL 一起使用。我正在开发一个应用程序，其中我有两个模型，即学生、公司。

```
class students(models.Model):

    first_name = models.CharField(**option)
    last_name = models.CharField(**option)
    username = models.EmailField(max_length=100, unique=True)
    password = models.CharField(_('password'), max_length=128)
    # Some other attributes for Student models

class company(models.Model):
    compnay_name = models.CharField(**option)
    username = models.EmailField(max_length=100, unique=True)
    password = models.CharField(_('password'), max_length=128)
    #Some other attributes for company models 
```

### 我的要求：

1.  学生和公司可以创建新的个人资料（提供注册表单）
2.  为学生/公司创建新的个人资料，用户名即电子邮件 ID 应该是唯一的。即学生和公司模型中不应存在电子邮件 ID。（任务已完成）
3.  为学生和公司登录创建了 2 个登录表单。

### 问题：

1.  由于我没有使用或扩展用户模型，我不能使用 django 内置的登录和身份验证方法。

2.  如何编写自定义身份验证方法，该方法应检查学生/公司用户名和密码中的用户凭据。（学生和公司有两种不同的登录表格）

请帮我。

感谢您阅读我的查询。

### 后端.py

```
class LoginBackend:
    def authenticate(self, username=None, password=None, model=None):
        if model == "Student":
            lookup_model = Student
        elif model == "Employer":
            lookup_model = Employer
        try:
            user = lookup_model.objects.get(email=username)
         except Exception, e:
            return None
    return user 
```

## 视图.py

```
def check_auth(request):
    user_object = Student.objects.get(email__iexact = unicode(email))
    if check_password(password, user_object.password):
        print authenticate(username = email, password = password, model = "Student")
        login(request, user_object) 
```

## 设置.py

AUTHENTICATION_BACKENDS = ("proj.app.backends.LoginBackend",)

## 错误

**/xxx/login/ 处的 AttributeError**

**“学生”对象没有属性“后端”**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T06:04:06.273

编写自定义身份验证后端。读这个：

*   [编写身份验证后端](https://docs.djangoproject.com/en/dev/topics/auth/#writing-an-authentication-backend)
*   [在自定义后端处理授权](https://docs.djangoproject.com/en/dev/topics/auth/#handling-authorization-in-custom-backends)
*   [settings.AUTHENTICATION_BACKENDS](https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-AUTHENTICATION_BACKENDS)

[更新]

通过编写和注册自定义身份验证后端，您只需使用标准的 Django 身份验证模式。查看您的示例代码，我的印象是您对它的理解不同。

由于电子邮件是您的唯一密钥，我建议使用电子邮件作为登录密钥，首先检查学生的登录名/密码，如果失败，检查公司。

```
from django.contrib.auth.models import User
class JayapalsBackend(object):
    def authenticate(self, username=None, password=None):
         try:
             o = Student.objects.get(email=username, password=password)
         except Student.DoesNotExist:
             try:
                 o = Company.objects.get(email=username, password=password)
             except Company.DoesNotExist:
                 return None
         return User.objects.get(email=o.email)
    def get_user(self, user_id):
        try:
            return User.objects.get(pk=user_id)
        except User.DoesNotExist:
            return None 
```

然后只需使用标准的 Django 装饰器：

```
@login_required
def some_private_view(request):
    ... 
```

# asp.net - 在 ASP.NET 中使用长时间运行的数据处理功能是否安全

> ID：11822789
> 
> 赞同：0
> 
> 时间：2012-08-06T05:05:36.050
> 
> 标签：asp.net

我有一个功能需要大约 2-3 分钟来完成它需要的所有处理

它只需要每天进行一次计算。处理在 Global.asax.cs 的 Application_Start 内启动的后台线程内完成。

我担心应用程序会在运行时终止该方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:07:56.307

您正在执行该过程`Application_Start`，您是否每天都重新启动您的应用程序？更好的方法是为任务创建一个单独的可执行文件，并使用 Windows Scheduler 在您的服务器上安排它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T05:24:57.417

对于上述场景，您可以使用`windows service`或`console application`在您希望它运行时安排它。

但是在这种情况下，从不建议在应用程序开始时这样做。

# python - 如何在 Python 中安排和设置单元测试

> ID：11822790
> 
> 赞同：2
> 
> 时间：2012-08-06T05:05:50.623
> 
> 标签：python, unit-testing

我正在使用 Python 开发一个项目，使用 Git 进行版本控制，我决定是时候添加几个单元测试了。但是，我不确定解决此问题的最佳方法。

我有两个主要问题：我应该使用哪个框架以及我应该如何安排我的测试？首先，我计划使用 unittest，因为它内置于 Python，但如果有令人信服的理由更喜欢其他东西，我愿意接受建议。第二个问题更棘手，因为我的代码已经有些杂乱无章，有很多子模块和相关导入。我不确定在哪里安装测试代码。另外，如果可能的话，我更愿意将测试代码与其他所有代码分开。最后，我希望测试易于运行，最好使用单个命令行命令和最少的路径设置。

大型 Python 项目如何处理测试？我知道通常有一个自动化系统来对所有新签入运行测试。他们是如何做到的呢？建立测试系统的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:44:46.627

测试框架的选择主要是关于个人喜好，有一些普遍的：

*   unittest——它是 java 的 junit 框架的克隆，所以它的语法不那么 python-fendly
*   unittest2 — 一个特色单元测试
*   pytest — 全面复杂的框架，但是它的源代码有点吓人，所以如果你有任何问题有时很难找到解决方案
*   鼻子——它从 pytest 发展而来，但更简单，也许你用鼻子是个好主意

例如，通常的目录结构是：

```
- project
| - module_name
  | - submodule.py
| - tests
  | requirements.txt
  | test_submodule.py
| - requirements.txt 
```

最佳实践之一是使用 virtualenv：

```
 $ virtualenv env  # create virtualenv
 $ env/bin/activate  # activate virtualenv
 $ pip install -r requirements.txt  # install project requirements
 $ pip install -r tests/requirements.txt  # install testing requirements
 $ py.test  # if you use pytest 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T06:09:51.420

Python`unittest`很好，但可能很难将单元测试添加到大型项目中。原因是单元测试与最小块的功能测试有关。

单元测试意味着使用许多相互分离的小测试。除了代码的测试部分之外，它们应该独立于任何东西。

当单元测试被添加到现有代码中时，通常只添加它来测试被证明会导致错误的孤立案例。添加的单元测试应使用未更正的功能编写以揭示错误。然后应该修复错误，以便单元测试通过。这是第一个极端——只对失败的代码添加单元测试。这是必须的。您应该始终为失败的代码添加单元测试，并且应该在修复错误之前执行此操作。

Now, it is a question how to add unit tests to the large project that did not use them. The quantity of code of unit tests may be comparable with the size of the project itself. This way the other extreme could be to add unit test to everything. However, this is too much work, and you usually have to *reverse engineer* your own code to find the building blocks to be tested.

I suggest to find the most important parts of the code and add unit tests to them.

# objective-c - 使用 layer.shadow 时的 Objective-C 性能优化

> ID：11822793
> 
> 赞同：0
> 
> 时间：2012-08-06T05:06:36.830
> 
> 标签：objective-c, ios, performance, optimization

我正在使用`UITableView`. 对于每一行，我使用**QuartzCore layer.shadow**创建带有阴影的矩形单元格 自定义类中的

示例代码：`UITableViewCell`

```
-(void)drawRect:(CGRect)rect 
{
    UIView *bgView = [[UIView alloc] initWithFrame:self.bounds];
    bgView.backgroundColor = [UIColor whiteColor];

    bgView.layer.shadowColor = [UIColor blackColor].CGColor;
    bgView.layer.shadowOffset = CGSizeMake(0, 1);
    bgView.layer.shadowOpacity = 0.2;
    bgView.layer.shadowRadius = 1;

    self.backgroundView = bgView;
    [bgView release];
} 
```

当我测试应用程序 scroll`UITableView`时，滚动性能很差！如果我去除阴影，性能很好！

**我需要你的建议**。为了获得最佳性能，我可以进行哪些优化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:50:45.267

你的问题不是Objective-C，而是影子！从 iOS 3.2 开始，您可以`CGPathRef`为阴影定义一个，您应该构建一个仅包含视图轮廓的阴影，以减少渲染时间并提高性能。您还可以让阴影光栅化以避免一直重绘它（将图层的`shouldRasterize`属性设置为`YES`。根据您想要对图层执行的操作，这可能不是最好的选择。它也是一种内存/性能权衡，记住这一点！）。

创建所需阴影路径的最简单方法应该是通过`UIBezierPath`具有许多有用的类方法来构建各种形成`CGPathRef`对象的类，但是根据您的视图的形状，您可能不得不退回来构建自己的路径手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:11:01.713

你如何实现`UITableView`委托？您是否创建了`UITableViewCell`using 重用，例如：

```
 -[UITableView dequeueReusableCellWithIdentifier:] 
```

请检查一下。

# iphone - MyObject 对象是否可能；包含垃圾？

> ID：11822795
> 
> 赞同：1
> 
> 时间：2012-08-06T05:06:58.070
> 
> 标签：iphone, objective-c, ios

有一种情况，如果不将局部变量显式初始化`CGFloat`为 0，则会导致变量持有垃圾：

```
-(void)foo
{
   CGFloat aFloat;
   NSLog(@"float:%f", aFloat);
   aFloat = 70;
}

[self foo];
[self foo]; 
```

输出：

```
float:0
float:70 
```

所以它确实应该两次都打印 0，但由于我没有明确地将浮点数初始化为 0，所以它第二次包含垃圾。我的问题是，这也适用于对象吗？这两个选项之间的局部变量是否有区别：

```
1\. NSObject *object;
2\. NSObject *object = nil; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T05:12:00.057

如果指针是 ivar，则指针最初为 nil。（如果你在类的@interface 部分声明了它，它就是一个ivar。）如果指针是一个局部变量（你在一个方法中声明它），它将包含垃圾。最好的做法是总是立即分配一些东西。

**更新：**正如 omz 在评论中指出的那样，如果您使用的是 ARC，那么如果它们是局部变量，您的指针也会被取消。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T07:29:39.030

> 它第二次包含垃圾

实际上它不包含垃圾。它包含与之前写入内存中该位置的相同值。碰巧堆栈没有机会被任何新值覆盖，所以当您`foo`第二次调用时，`aFloat`变量被映射到同一位置。

对于更具体的描述，我强烈推荐有史以来[最好的答案之一](https://stackoverflow.com/a/6445794/558816)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T05:49:55.580

是的，同样适用；对象指针是一个变量，就像浮点数一样：

测试.m：

```
#include <Foundation/Foundation.h>

@interface Foo : NSObject
{
    NSString *ivarString;
}

- (void)foo;
- (void)test;

@end

@implementation Foo

- (void)foo
{
    NSString *stackString;
    NSLog(@"stackString='%@', ivarString='%@'", stackString, ivarString);
    stackString = @"Hello";
    ivarString = @"World";
}

- (void)test
{
    [self foo];
    [self foo];
}

@end

int main(int argc, const char **argv)
{
    @autoreleasepool
    {
        Foo *foo = [[[Foo alloc] init] autorelease];
        [foo test];
    }
    return 0;
} 
```

输出：

```
2012-08-06 06:52:36.123 test[15293:403] stackString='(null)', ivarString='(null)'
2012-08-06 06:52:36.126 test[15293:403] stackString='Hello', ivarString='World' 
```

请注意，此测试项目使用 MRR，而不是 ARC。

# c# - 如果启用了弹出窗口阻止程序，则在浏览器窗口顶部显示弹出窗口

> ID：11822801
> 
> 赞同：1
> 
> 时间：2012-08-06T05:07:20.707
> 
> 标签：c#

我需要在网页顶部生成一个弹出窗口的代码，显示消息“您的弹出窗口阻止程序已启用。请禁用它以继续”，以防弹出窗口阻止程序已启用。否则它应该转到下一页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T05:14:13.183

您可以使用以下代码

```
var wPopup = 'newPopup'; 
var popUp = window.open('page url', wPopup, 'width=800, height=600, left=24, top=24, scrollbars, resizable');
if (popUp == null || typeof(popUp)=='undefined') {   
  alert('Your pop up blocker has been enabled. Please disable it to continue'); 
} 
else {   
  popUp.focus();
} 
```

stackoverflow 中已经存在一个问题，这将有助于 [在 Chrome 中检测被阻止的弹出窗口](https://stackoverflow.com/questions/668286/detect-blocked-popup-in-chrome)

# ruby-on-rails - Aptana ruby 代码辅助功能不适用于 erb 文件

> ID：11822803
> 
> 赞同：1
> 
> 时间：2012-08-06T05:07:22.137
> 
> 标签：ruby-on-rails, aptana3

我在 OSX 10.8 上使用 Aptana 3.2.1.201207261642

F3 打开声明/转到定义适用于 .rb 文件，但不适用于 .erb 文件。我得到了弹出菜单，但这些操作没有做任何事情。

此外，代码完成（ctrl+空格）不建议我的本地项目类。如何配置 Aptana 来索引我的项目类？

FWIW，这些功能在 PHP 项目上运行良好。

# sql - SQL 查询在 SQL Server 中有效，在 Excel 中失败 (Microsoft Query)

> ID：11822809
> 
> 赞同：3
> 
> 时间：2012-08-06T05:08:00.230
> 
> 标签：sql, sql-server, excel, excel-2010

我有以下查询按预期工作：

```
SELECT
        SERVICE_HISTORY.ServiceMode, SERVICE_HISTORY.CreatedDate,
        SERVICE_HISTORY.CreatedBy, SERVICE_HISTORY.Branch,
        SERVICE_HISTORY.Comments
FROM
        DEBA_US.dbo.SERVICE_HISTORY
JOIN 
        (SELECT MAX(SERVICE_HISTORY.CreatedDate) AS maxDate, CUSTOMER.AccNo
         FROM DEBA_US.dbo.CUSTOMER
         INNER JOIN (DEBA_US.dbo.SERVICE_HISTORY
                     INNER JOIN DEBA_US.dbo.CAR ON SERVICE_HISTORY.ROW_PK = CAR.ROW_PK) ON CUSTOMER.ROW_PK = CAR.ROW_PK
         WHERE
             CUSTOMER.AccNo LIKE 'CUS-1234'
             AND CAR.DateSubmitted IS NULL
         GROUP BY
             CUSTOMER.AccNo) AS testQuery ON testQuery.maxDate = SERVICE_HISTORY.CreatedDate 
```

查询是为我提供给定客户的最新（最大）服务历史日期。

当我在 SQL Server 中执行查询时，它工作得非常好，但是当我将相同的查询放入 EXCEL 2010 (Microsoft Query) 时，它给了我错误：

> 没有为“testQuery”的第 1 列指定
> 列名无效的列名“maxDate”
> 无法准备语句

我无法修复查询以传递错误。有人可以告诉我为什么 Excel 不能处理上述查询吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T07:35:40.673

您需要将 testQuery 和 maxDate 放在单引号内

```
SELECT
    SERVICE_HISTORY.ServiceMode, SERVICE_HISTORY.CreatedDate,
    SERVICE_HISTORY.CreatedBy, SERVICE_HISTORY.Branch,
    SERVICE_HISTORY.Comments
FROM
    DEBA_US.dbo.SERVICE_HISTORY
JOIN 
    (SELECT MAX(SERVICE_HISTORY.CreatedDate) AS 'maxDate', CUSTOMER.AccNo
     FROM DEBA_US.dbo.CUSTOMER
     INNER JOIN (DEBA_US.dbo.SERVICE_HISTORY
                 INNER JOIN DEBA_US.dbo.CAR ON SERVICE_HISTORY.ROW_PK = CAR.ROW_PK) ON     CUSTOMER.ROW_PK = CAR.ROW_PK
     WHERE
         CUSTOMER.AccNo LIKE 'CUS-1234'
         AND CAR.DateSubmitted IS NULL
     GROUP BY
         CUSTOMER.AccNo) AS 'testQuery' ON testQuery.maxDate =  SERVICE_HISTORY.CreatedDate 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-02T09:55:19.010

您唯一需要做的就是在 maxDate 周围添加方括号，如下所示：

```
SELECT
        SERVICE_HISTORY.ServiceMode, SERVICE_HISTORY.CreatedDate,
        SERVICE_HISTORY.CreatedBy, SERVICE_HISTORY.Branch,
        SERVICE_HISTORY.Comments
FROM
        DEBA_US.dbo.SERVICE_HISTORY
JOIN 
        (SELECT MAX(SERVICE_HISTORY.CreatedDate) AS [maxDate], CUSTOMER.AccNo
         FROM DEBA_US.dbo.CUSTOMER
         INNER JOIN (DEBA_US.dbo.SERVICE_HISTORY
                     INNER JOIN DEBA_US.dbo.CAR ON SERVICE_HISTORY.ROW_PK = CAR.ROW_PK) ON CUSTOMER.ROW_PK = CAR.ROW_PK
         WHERE
             CUSTOMER.AccNo LIKE 'CUS-1234'
             AND CAR.DateSubmitted IS NULL
         GROUP BY
             CUSTOMER.AccNo) AS testQuery ON testQuery.maxDate = SERVICE_HISTORY.CreatedDate 
```

# objective-c - 如何在计时器循环时覆盖相同的标签

> ID：11822810
> 
> 赞同：0
> 
> 时间：2012-08-06T05:08:16.963
> 
> 标签：objective-c, xcode, nstimer

我需要使用计时器循环并希望显示输出，但条件是应该只有一个标签并使用它来拆分单词随机隐藏它们，使用下划线作为隐藏标签，现在循环通过计时器我需要在同一个地方显示数据库中的单词 **例如：** **在计时器的第一个循环中：**

**MA_A_S
提示：计时器第二个循环中的人类：A_NIM_L_S
提示：TIGER 等。**

带有下划线的“单词”没有被覆盖......它来自**MA_A_S A_NIM_L_S**

**我的创建功能是：**

```
- (void)createbutton:(NSInteger)j {

     p = 30;

    x = x+p ;
    if(x>250) {
        x=35;
        y=y+70;
    }

    pLblMyLable1 = [[UILabel alloc] initWithFrame:CGRectMake(x, y, 45, 45)];

    [pLblMyLable1 setTag:j+1];  
     iTag = [pLblMyLable1 tag];

    if (i == n|| i == r || i == s) {

        pLblMyLable1.hidden = YES;
            pLblUnderScore =[[UILabel alloc] initWithFrame:CGRectMake(x, y, 45, 45)];
            pLblUnderScore.backgroundColor = [UIColor clearColor];
            pLblUnderScore.text = @"_";
            pLblUnderScore.font = [UIFont fontWithName:@"Arial" size: 10.0];
            [pLblUnderScore setTag:2];  
            [self.view addSubview:pLblUnderScore];  

    } else {

        pLblMyLable1.hidden = NO;
    }

    pLblMyLable1.backgroundColor = [UIColor clearColor];
    pLblMyLable1.text = pStr;
    pLblMyLable1.font = [UIFont fontWithName:@"Arial" size: 10.0];
    [self.view addSubview:pLblMyLable1];    
    [pLblMyLable1 release];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:27:41.703

根据您的要求格式化您的字符串。使用 NSString 覆盖相同标签的文本。

要在同一字符串中添加字符串，请使用 stringByAppendingFormat。如何检查这个：

```
NSString *str @"MA_MA_"
YourLabel.text = str 
```

现在

```
[str stringByAppendingFormat:@"ANI__L....."];
YourLabel.text = str; 
```

您的标签将显示 MA_MA_ANI__L .....

# blackberry - 如何在黑莓java编程中获取进出网络流量的记录

> ID：11822811
> 
> 赞同：0
> 
> 时间：2012-08-06T05:08:21.947
> 
> 标签：blackberry, java-me, network-programming

我想制作应用程序来控制黑莓java编程中的网络流量。示例：我想知道我的黑莓设备今天进出多少流量无线电，例如：

-今天的交通广播：1,29MB

-今天的交通广播：81.83kB

要得到那个号码，我该怎么办？任何人都可以给我做这种事情的源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:12:01.817

[RadioInfo.getNumberOfPacketsSent](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/system/RadioInfo.html#getNumberOfPacketsSent%28%29)

[RadioInfo.getNumberOfPacketsReceived](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/system/RadioInfo.html#getNumberOfPacketsReceived%28%29)

但是 AFAIK，这些方法返回自 BB 通电以来发送/接收的字节数，因此不确定您是否可以获得给定日期的字节数。

希望能帮助到你。

# c - 在 Windows 中获取文件大小并设置查找指针

> ID：11822815
> 
> 赞同：0
> 
> 时间：2012-08-06T05:09:16.900
> 
> 标签：c, windows, file, file-io

我正在尝试使用以下方法获取此大小的文件：

```
size_t  fsize = 0;
fseek(fin, 0L, SEEK_END);
fsize = ftell(fin);
fseek(fin, 0L, SEEK_SET); 
```

有问题的文件有点超过 2GiB，并且 ftell 返回一些巨大的数字。

我的应用程序还要求在每次读取后将查找指针设置回多个字节。我用了以下。

```
i = fread(inbuf, 1,readSize, fin);
fseek(fin, -16, SEEK_CUR); 
```

每次读取后，我检查是否`i`等于 16，如果我在最后一次读取后到达文件末尾，通常会发生这种情况。但是，这也不起作用，并且将零值分配给`i`，表明查找指针没有向后移动。

我应该注意到我的程序在 Linux 中运行良好，并且已经过不同读取和文件大小的测试。该代码几乎与 Linux 版本的代码相同。不同之处在于我无法`stdint`在 Windows 中使用 C99 中的库。除此之外，代码完全相同。Linux 版本使用完全相同的测试文件和读取大小可以正常工作。

最后，我要提一下这是一个CUDA程序（运行时版本4.2），使用VS2010，在Win7上。这是一个 64 位程序。

**编辑**

这个文件是用 'b' 标志打开的。这是代码：

```
if(!(fin = fopen(argv[1], "rb")))
{
    printf("The input file: %s could not be opened\n", argv[1]); 
    err = -5; goto exit;
}

if(!(fout = fopen(argv[2], "wb")))
{
    printf("The output file: %s could not be opened\n", argv[1]); 
    err = -6; goto exit;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T08:48:20.537

fstat() 可用于获取文件的大小。这比读取文件来计算大小要好。[msdn 文档中的 fstat](http://msdn.microsoft.com/en-us/library/aa246905%28v=vs.60%29.aspx)

编辑：我不太确定 fstat 在 Windows 上的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:36:54.867

以二进制文件（使用 ）打开文件`O_BINARY`可能会有所帮助。否则，您可能会遇到 libne 中断和 EOF 字符的问题。

# ruby-on-rails - Rails 3 多个外键

> ID：11822818
> 
> 赞同：1
> 
> 时间：2012-08-06T05:10:22.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3, scope

我正在编写一个具有用户模型的应用程序，该模型中的用户可以是两种不同的用户类型。

用户.rb

```
class User < ActiveRecord::Base
  has_many        :transactions
  has_many        :transaction_details, :through => :transactions
  has_many        :renters, :class_name => "Transactions"
end 
```

事务.rb

```
class Transaction < ActiveRecord::Base
  has_many        :transaction_details
  belongs_to      :user
  belongs_to      :renter, :class_name => "User"
end 
```

transaction_detail.rb

```
class TransactionDetail < ActiveRecord::Base
  belongs_to :transaction
  belongs_to :inventory

  scope :all_open, where("transaction_details.checked_in_at is null")
  scope :all_closed, where("transaction_details.checked_in_at is not null")
end 
```

基本上，用户可能是租客，也可能是签出物品的人。完成交易后，我可以致电：

```
@transaction.renter.first_name  # receive the first name of the renter from the renter table
@transaction.user.first_name     # receive the first name of user who performed the transaction 
```

这是完美的，正如我所料。对于我的生活，我无法弄清楚如何在通过用户调用时使范围工作：

```
# trying to perform the scrope "all_open", limted to the current user record, but I cant get it to use the 
# renter_id column instead of the user_id column
u.transaction_details.all_open 
```

这是否可以通过第二个 forien_key 而不是 user_id 进行 scrope 查找？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:07:21.173

简短的回答 - 是的。这是很有可能的。

您需要提及反向关联定义中使用的外键。

在 users.rb 中：

```
has_many :rents, :class_name => "Transactions", :foreign_key => "renter_id" 
```

这将允许您编写：

```
User.find(5).rents # array of transactions where user was renter 
```

如果您想直接调用 transaction_details，那么您需要再次在 user.rb 中指定另一个关联：

```
has_many :rent_transaction_details, :through => :rents, :source => "TranactionDetail" 
```

这将允许您致电：

```
User.find(5).rent_transaction_details.all_open 
```

# architecture - Sencha Touch 2 应用架构建议需要

> ID：11822819
> 
> 赞同：0
> 
> 时间：2012-08-06T05:10:29.817
> 
> 标签：architecture, sencha-touch, extjs

我希望在 Sencha Touch 2 中创建一个 Web 应用程序，用于在研讨会活动中对用户进行简短的客户满意度调查。

我想知道社区中是否有任何人愿意建议这个解决方案的最佳整体方法是什么

项目要求：

*   带有联系字段、一些下拉框和提交按钮的简单表单。(Ext.form.panel)

*   将表单数据转换为 CSV 或 XML 格式，以便稍后上传到客户数据库 将 CSV 文件提交到 Dropbox 或 Google Drive 帐户作为临时存储

*   能够离线使用应用程序并将调查数据存储在手机上，直到存在数据连接

该应用程序有时可能需要在离线模式下收集大约 300 个调查，然后才能连接到互联网。

这可以使用 Sencha Touch 2 构建吗？解决这个项目的最佳方法是什么？（使用 SQLite、Ext.Ux.Exporter，可能是服务器端脚本等？）

我知道在这些论坛上这是一个相当大的问题，但是对于构建这个解决方案的任何建议都将非常感激。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:53:33.990

在 Sencha Touch 2 中构建表单（通过 Ajax 请求获取和/或将数据发送到服务器）很容易。您可以在 Web 或 sencha doc [http://docs.sencha.com/touch中找到很多示例/2-0/#!/example/forms](http://docs.sencha.com/touch/2-0/#!/example/forms)

Sencha Touch 也可以处理离线模式：[http ://www.sencha.com/learn/taking-sencha-touch-apps-offline/](http://www.sencha.com/learn/taking-sencha-touch-apps-offline/)

您还应该搜索“本地存储”和“清单”关键字。另请查看本地应用示例的纸牌演示 (touchsolitaire)

我真的不明白为什么有人会在他的手机/平板电脑上存储 300 个调查？无论如何，我相信调查一定不是一个大对象。我没有看到任何 pb 节省 300 本地化。

您可以为您的客户端/服务器和 JSON 消息使用 REST 架构。您的服务器可以使用任何语言（带有 servlet 的 Java、用于 javascript 服务器的 NodeJS 等......）。这个话题太广泛了，无法详细讨论。数据库选择相同。

您或许可以将本地数据保存到手机保管箱中的 CSV 文件中。为此，您可能需要使用 Phonegap (cordova) 来访问手机的文件系统（我不是该主题的专家，所以我可能错了）。CSV 可以被 excel 读取。在手机上写一个excel文件我觉得很复杂。服务器端存在一些库来编写开放的办公文档。也许你应该寻找那个。

希望它有所帮助++

# android - PreferenceActivity 和自定义标题栏。

> ID：11822821
> 
> 赞同：0
> 
> 时间：2012-08-06T05:10:54.443
> 
> 标签：android

> **可能重复：**
> [在 PreferenceAcivity 中设置自定义标题栏](https://stackoverflow.com/questions/4921825/set-custom-title-bar-in-preferenceacivity)

是否可以为 preferancActivity 添加自定义标题栏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T05:36:20.937

```
public class Preferences extends PreferenceActivity {  
protected TextView title;
   @Override
   protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);        
    setContentView(R.layout.main_tab);
    title = (TextView) findViewById(R.id.titleTvLeft);

    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.title_bar);

    this.title.setText("Value");

  }
} 
```

///////在title_bar.xml中///////

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout01"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    fill_parent="" >

    <TextView
        android:id="@+id/titleTvLeft"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingTop="3dp"
        android:textColor="#FFFFFF"
        android:textStyle="bold" >
    </TextView>

</RelativeLayout> 
```

# android - Android onKeyDown（）在按下后退按钮时不执行

> ID：11822832
> 
> 赞同：6
> 
> 时间：2012-08-06T05:14:22.163
> 
> 标签：android, android-keypad

嗨，在谷歌上搜索后，我来这里寻求帮助。当用户按下设备的后退按钮时，我使用以下方法返回。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {

        Log.i("===BACK BUTTON PRESSED===", "BACK BUTTON");

        return true;
    } else {
        Log.i("===ELSE BACK BUTTON PRESSED===", "ELSE BACK BUTTON");

        return super.onKeyDown(keyCode, event);
    }
} 
```

但是 logcat 不显示任何日志消息。

```
W/KeyCharacterMap(517): No keyboard for id 0 
```

`W/KeyCharacterMap(517): Using default keymap: /system/usr/keychars/qwerty.kcm.bin` 请帮我找到这个。

**编辑问题：**

这是我的整个班级。

```
public class Dreams_Reminder_detail_screen extends Activity {   

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        moveTaskToBack(true);
        GroupDreams.group.back();
        return true;
    }
    return super.onKeyDown(keyCode, event);
}
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.dreams_reminder_details_screen);        
} 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T05:22:07.497

您可以覆盖[onBackPressed()](http://developer.android.com/reference/android/app/Activity.html#onBackPressed%28%29)函数并在那里实现您的逻辑。

请参考这篇android博文[“返回和其他硬键：三个故事”](http://android-developers.blogspot.in/2009/12/back-and-other-hard-keys-three-stories.html)以获得更多理解。

您可以覆盖 GroupDreams 中的 onKeyDown 函数，这可能会起作用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T05:40:02.963

试试这个链接：[覆盖后退按钮以充当主页按钮](https://stackoverflow.com/questions/2000102/android-override-back-button-to-act-like-home-button)

```
 @Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        moveTaskToBack(true);
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T05:17:44.810

您可以通过这种方式跟踪后退按钮事件：-

```
@Override
public void onBackPressed() {
    super.onBackPressed();

     //Do the Logics Here 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T05:25:35.087

试试下面的代码，它会帮助你

```
@Override
    public boolean dispatchKeyEvent(KeyEvent event) {
        if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) 
        {
             }
         } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-03T10:29:14.217

```
 @Override
public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
        // do something on back.
        return true;
    }

    return super.onKeyDown(keyCode, event);
}
//How to intercept the BACK key in an Activity is also one of the common questions we see //developers ask, so as of 2.0 we have a new little API to make this more simple and easier //to discover and get right:

@Override
public void onBackPressed() {
// do something on back.
return;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T05:32:55.557

您在 else{} 中编写了超级方法，这是错误的。像这样编辑您的代码

```
 @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {

            Log.i("===BACK BUTTON PRESSED===", "BACK BUTTON");

            return true;
        } else {
            Log.i("===ELSE BACK BUTTON PRESSED===", "ELSE BACK BUTTON");

        }
return super.onKeyDown(keyCode, event);

} 
```

# vim - 检查文件是否包含某些内容

> ID：11822833
> 
> 赞同：5
> 
> 时间：2012-08-06T05:14:28.350
> 
> 标签：vim

感谢先前的回答，我可以使用以下方法测试文件是否存在

```
if !empty(glob("filename"))
  ...
endif 
```

我现在想检查文件是否`filename`包含 text `text`。

如果可能的话，我只想使用本机 vimscript 来执行此操作，而不是调用系统的 grep 等命令。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T05:24:24.607

```
if filereadable("filename") && match(readfile("filename"),"text")
   ...
endif 
```

有关`:help function-list`vimscript 函数的高级概述，请参阅 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-02T15:10:00.593

我用：

```
if match(readfile(expand("%:p")),"pattern")!=-1
   # content
endif 
```

检查文件是否包含 vimscript 中的模式

# openlayers - 打开层：显示geojson文件中属性的标签

> ID：11822836
> 
> 赞同：0
> 
> 时间：2012-08-06T05:14:36.893
> 
> 标签：openlayers

我是打开图层地图的新手。我正在尝试通过从 geojson 文件中读取标签来在标记上显示标签。

这是我的 geojson 文件的格式：

```
{
    "type": "FeatureCollection",
    "features": [
        {"type":"Feature","properties":{"label":"1"}, "geometry":{"type":"Point", "coordinates":[-81, 42]}},
    ]
} 
```

我尝试使用属性替换来显示标签。这是代码：

```
var vector_style = new OpenLayers.Style({
        'fillColor': '#669933',
        'fillOpacity': .8,
        'strokeColor': '#aaee77',
        'strokeWidth': 3,
        'pointRadius': 8,
        'label': '${label}'
    }); 
```

但是，除了标签之外的所有其他属性都会显示。你能告诉我如何显示geojson文件中的标签吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:07:08.200

您可以尝试这种方法：

```
var vector_template = {
        fillColor: '#669933',
        fillOpacity: .8,
        strokeColor: '#aaee77',
        strokeWidth: 3,
        pointRadius: 8,
        label: '${label}'
    }

var vector_style = new OpenLayers.Style(vector_template); 
```

这个对我有用。否则尝试将*标签*更改为其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T08:56:35.943

我们会尽力的：

```
'label': '${label}' 
```

# html - 以 1024 像素宽度制作的网页仅在 1024 像素屏幕上显示水平滚动条

> ID：11822838
> 
> 赞同：0
> 
> 时间：2012-08-06T05:14:45.177
> 
> 标签：html

网页按宽度制作，但仅在屏幕`1024px`中具有水平滚动条。`1024`请帮助我使用`jQuery`插件或任何其他想法解决此问题，而不会减少整个站点的宽度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T05:17:40.737

贝克。考虑到垂直滚动条和边框，屏幕的实际宽度`1024px`约为**`960px`**（最大）。`980px`

**更新：**可能的解决方案是将所有站点包装在块中并设置`CSS`属性`overflow-x: hidden;`。水平方向溢出的所有内容都将被忽略，而`Y`垂直方向将是正常行为。

# php - HTML ( PHP ) 框架问题 - 直接阻止用户访问页面

> ID：11822840
> 
> 赞同：2
> 
> 时间：2012-08-06T05:15:00.463
> 
> 标签：php, html, frame, block

这是我来自 frame.php 的代码

```
<FRAMESET rows="20, 200" FRAMEBORDER=NO FRAMESPACING=0 BORDER=0>
<FRAME src="menu1.html">
<FRAME src="test1.php">
</FRAMESET> 
```

我想知道是否有办法阻止人们直接访问“test1.php”？

我希望人们留在 frame.php 上，如果人们试图直接转到“test1.php”，它会给你错误。有没有这样的方法或代码？

在进入这个“frame.php”页面之前，我的用户需要登录。

我是一个新手，我正在尝试从用户身份验证和配置页面转移东西，但不要认为任何东西对我有用。

我在“menu1.html”中包含用户身份验证和配置页面。此部分显示类似“欢迎用户名 | 注销 | 其余菜单”的内容。当人们登录时，他们可以访问“frame.php包括test1.php”

我找到了这个，但不确定如何使用它。我在“继续”区域中输入了什么代码？另外，我应该把“ logoff.php ”放在后面吗？

```
if ($_SERVER['HTTP_REFERER'] == 'http://mysite.com/downloadlist.php') {
//proceed
} else {
//kick user out
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:26:18.507

在 test1.php 中使用以下 javascript 片段来确定 test1.php 是否从 iframe 加载：

```
if (window.location != window.parent.location) {
    // test1.php is within iframe
} else {
    // test1.php is accessed directly
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T05:26:21.373

1.你不使用框架集。Frameset 已被弃用和注定的标签。使用 iframe 代替，imo。在这个当前页面中，您可以只使用 INCLUDE php 函数来最小化 http 请求。

2.来自url的请求和来自frame的请求是同一个GET请求。因此，您无法在服务器上了解该请求的来源：框架或其他地方。但是你可以使用js。我不建议你这样做，但它的工作原理是这样的：

```
<body onLoad="fromFrame">
    // test1.php code here
</body>
<script type="text/javascript">
function fromFrame() {
    if (window.top === window.self)
       document.location.href = "errorRedirectUrl";
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T05:28:39.813

1.  您可能想在使用框架之前阅读[*此内容*](https://stackoverflow.com/questions/4263509/why-are-frames-deprecated-in-html)
2.  防止直接访问您的 php 脚本的最佳方法是将其放在一个文件夹中，并防止在 .htaccess 文件中访问该文件夹。然后使用`include`它来访问它（从另一个“可以”供用户访问的页面）。

# android - android, 构造函数 MediaController() 未定义

> ID：11822843
> 
> 赞同：0
> 
> 时间：2012-08-06T05:15:36.213
> 
> 标签：android, instantiation

我有一个 android 应用程序，可以很好地处理片段，

我需要显示片段中的视频，但为了做到这一点，我需要实例化媒体控制器，

但我得到：

```
The constructor MediaController() is undefined 
```

这是我的代码：

```
package com.orchard.elasto.custom;

import com.egoclean.elasto.R;

import android.content.Context;
import android.content.res.Resources;
import android.net.Uri;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.util.TypedValue;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.MediaController;
import android.widget.TextView;
import android.widget.VideoView;

//public class VideoView {

public class VideoViewBox extends Fragment{

    // public MediaController mc;

    private MediaController mediaController = new MediaController(this); 

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        //return inflater.inflate(R.layout.video_view, container,false);

        View view = inflater.inflate(R.layout.video_view, container,false);

           VideoView mVideo = (VideoView) view.findViewById(R.id.video_viewer);;

        mediaController.setAnchorView(mVideo);

      //Set video link (mp4 format )
//        Uri video = Uri.parse("android.resource://com.egoclean.elasto/raw/shoulder");

        Uri video = Uri.parse("android.resource://" + getClass().getPackage().getName() + "/" + R.raw.video1);

        mVideo.setMediaController(mediaController);
        mVideo.setVideoURI(video);
        mVideo.start();

        return view;

    }

} 
```

那么，如何实例化我的媒体控制器？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T05:22:13.610

可能是这样的，

```
MediaController mediaController = new MediaController(getActivity().getApplicationContext()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-08T06:47:39.813

只是

```
MediaController mediaController = new MediaController(getActivity()); 
```

为我工作。

# ios - 创建配置文件？

> ID：11822844
> 
> 赞同：0
> 
> 时间：2012-08-06T05:15:38.760
> 
> 标签：ios, provisioning

我想为开发和测试目的创建供应证书。

我登录 Apple 网站并访问[https://developer.apple.com/ios](https://developer.apple.com/ios)

但是我在创建证书期间犯了一个错误，我撤销了分发配置文件......现在我担心如果我撤销分发配置文件，那么如果在此期间任何人从应用商店下载我的应用程序，那么应用商店上的分发二进制文件将不起作用？如果我撤销了分销证书，我该如何退回？

如果无法返回真实证书，那么解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T05:22:27.177

不用担心，如果您撤销分发证书或配置文件，这仅意味着您无法为 Ad-Hoc 或 App Store 创建新的二进制文件，直到您创建一个新的。没有问题，不要惊慌。

哦，你不能“回去”，一旦它消失了——它已经消失了，只需创建一个新的。

# iphone - 如何在像快门一样从上到下加载时为 UIView 设置动画？

> ID：11822846
> 
> 赞同：1
> 
> 时间：2012-08-06T05:15:46.597
> 
> 标签：iphone, objective-c

我正在尝试开发一个 iphone 应用程序。我知道如何在推入导航堆栈时从左向右滑动视图。但我的要求是在推入导航堆栈时从上到下为视图设置动画。那么该怎么做呢？

我正在搜索谷歌，但没有找到任何令人满意的结果。如果有人知道...请告诉我该怎么做。

```
info = [[InfoView alloc] initWithNibName:@"InfoView" bundle:nil];   
[self.navigationController pushViewController:info animated:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:52:21.753

您可以在将视图控制器推送到导航堆栈时尝试这样的操作：

```
 SecondViewController *VC2 = [[SecondViewController alloc]init];
       VC2.nameSupplied = self.nameField.text;
       CGPoint mycenter = VC2.view.center;
       CGPoint navCenter = self.navigationController.navigationBar.center;
       VC2.view.center = CGPointMake(mycenter.x , mycenter.y - VC2.view.frame.size.height);
       self.navigationController.navigationBar.center = CGPointMake(navCenter.x, navCenter.y - self.navigationController.navigationBar.frame.size.height);
      [self.navigationController pushViewController:VC2 animated:NO];
      [UIView animateWithDuration:0.5
                            delay:0
                          options: UIViewAnimationCurveEaseOut
                       animations:^{
                                  VC2.view.center = mycenter;
                                  self.navigationController.navigationBar.center = navCenter;
                 } 
                 completion:^(BOOL finished){
                     NSLog(@"Animation Done!");
                 }]; 
```

但是，如果您只想在同一个视图控制器中显示另一个视图（从上到下移动），您可以像这样使用***UIView***的 transform 属性：

```
self.secondView.transform = CGAffineTransformMakeTranslation(0, secondView.frame.size.height); 
```

# google-app-engine - 如何从数据存储中获取最新和相邻的记录？

> ID：11822852
> 
> 赞同：1
> 
> 时间：2012-08-06T05:17:05.953
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

我有电影数据存储，那里的每条记录都有自己的 id 作为键名，如下所示：

```
12345
32453
12154
78873
34543 
```

我想允许用户一一浏览电影。首先，应该显示最新的电影（数据库有`added`日期和时间字段）。如何从数据存储中获取它？ **更新。**我可以这样做：

```
movies = Movies.query()
movies.order(-Movies.added)
for movie in movies.fetch(1):
    self.response.out.write(movie.key.id()) 
```

但我不喜欢它——为了得到钥匙，我要求整张唱片。

其次，如果显示了其他电影（例如，12154），用户应该能够转到上一部电影（id 32453）和下一部电影（id 78873）。当然，如果放映了上一部电影，就没有下一部电影了；如果播放第一部电影，则不会有上一部电影。那么，问题是如何获取下一部电影和上一部电影的关键名称？ **更新**。如果当前显示的电影是 12154，那么我应该`example.com/movie/32453`为上一部电影和`example.com/movie/78873`下一部电影生成链接。

**更新**。我尝试过如下方法：

```
next_movie = Movies.query(Movies.added < movie.added)
next_movie = next_movie.order(-Movies.added)
next_movie = next_movie.get()
if next_movie:
    next_url = next_movie.key.id()
else:
    next_url = ''

prev_movie = Movies.query(Movies.added > movie.added)
prev_movie = prev_movie.order(-Movies.added)
prev_movie = prev_movie.get()
if prev_movie:
    prev_url = prev_movie.key.id()
else:
    prev_url = '' 
```

但是效果不好……`next_url`似乎还可以，但`prev_url`总是一样。这是我的测试数据库内容（`-Movies.added`顺序）：

```
id      added
503035: 2012-08-05 19:49:51.259000
475537: 2012-08-05 19:49:51.238000
677539: 2012-08-05 19:49:51.218000
566355: 2012-08-05 19:49:51.197000
557850: 2012-08-05 19:49:51.176000
670146: 2012-08-05 19:49:51.155000
581030: 2012-08-05 19:49:51.135000
464561: 2012-08-05 19:49:51.114000
507817: 2012-08-05 19:49:51.092000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T06:26:06.387

首先，您需要电影实体上的一个属性来表示“迟到”，例如电影插入数据库时​​提交的日期。

然后你应该在这个字段上使用降序查询。

要跳到下一个/上一个，您应该使用[Query Cursors](https://developers.google.com/appengine/docs/python/ndb/queries#cursors)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T17:33:37.920

以下代码运行良好：

```
next_movie = Movies.query(Movies.added < movie.added)
next_movie = next_movie.order(-Movies.added)
next_movie = next_movie.get(keys_only = True)
if next_movie:
    next_url = next_movie.id()
else:
    next_url = ''

prev_movie = Movies.query(Movies.added > movie.added)
prev_movie = prev_movie.order(Movies.added)
prev_movie = prev_movie.get(keys_only = True)
if prev_movie:
    prev_url = prev_movie.id()
else:
    prev_url = ''
return next_url, prev_url 
```

# iphone - 自定义 UIButton 图像按钮类型

> ID：11822857
> 
> 赞同：3
> 
> 时间：2012-08-06T05:18:14.957
> 
> 标签：iphone, objective-c, ipad, uikit

如果即使按钮类型是圆角矩形也可以设置按钮的图像，那么按钮类型开始的目的是什么？我通常使用自定义按钮类型，但这实际上有什么不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:25:21.393

您可以`UIButtonType`用来制作标准类型的按钮：详细信息披露、信息等。在这些情况下，您根本不需要设置图像 - 系统会自动为您设置。

当您选择圆角矩形并设置图像时，图像将被剪切到圆角矩形的边框；当您选择自定义样式时，不会有剪裁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T05:45:54.580

是的，这肯定会有所作为。例如，如果您有两个按钮，一个是 RoundRect，另一个是第二个 Custom。

尝试在两个按钮上设置背景颜色。你会看到不同之处。自定义按钮已正确占据背景颜色，圆形矩形几乎没有问题。

即使使用背景图像，您也可以同时检查两者。自定义按钮在设置图像方面没有问题，因为它具有透明背景，而圆形矩形的角会出现问题。

`UIButtonType`肯定有这个区别。

我希望这就是你要找的。

# api - 什么是流 API

> ID：11822860
> 
> 赞同：8
> 
> 时间：2012-08-06T05:18:23.357
> 
> 标签：api

基本上，我想从高级和技术角度理解什么是流式 API，有各种各样的数据可用，但我找不到对流式 API 的满意解释，以及它与一般 API 有何不同（REST如果适用）

PS：我不是在问多媒体流。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T05:26:01.737

有点模糊的问题。我猜流媒体通常意味着以下之一（或组合）

*   下载数据以立即使用，而不是整个文件进行存储，可能支持交付部分数据（较低质量，仅相关部分等），有时甚至在生产者和消费者之间根本没有任何存储
*   一个持久连接，在新数据可用时继续提供新数据，而不是让客户端轮询

一个很好的例子（对于第一个模式）是流式 XML 解析器（例如 SAX）。它们允许您处理太大而无法放入内存的 XML 数据（DOM 解析器喜欢这样做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-15T20:15:44.307

我只是在这里找到另一个好的答案： [https ://www.quora.com/What-is-meant-by-streaming-API](https://www.quora.com/What-is-meant-by-streaming-API)

流式 API 与普通 REST API 的不同之处在于它尽可能长时间地保持 HTTP 连接打开（即“持久连接”）。它在数据可用时将数据推送到客户端，并且客户端无需轮询对服务器的请求以获取更新的数据。当服务器产生连续的数据流（比如今天的社交媒体渠道）时，这种保持持久连接的方法显着降低了网络延迟。这些 API 主要用于读取/订阅数据。

# button - Ext.Button 'overCls' 在 IE 中不起作用

> ID：11822867
> 
> 赞同：0
> 
> 时间：2012-08-06T05:18:47.660
> 
> 标签：button, extjs, extjs4

ExtJS4：

当我将鼠标悬停在 Ext.Button 上时，我希望它具有我的颜色。我为此写了以下内容：

```
Ext.onReady(function(){
    Ext.create('Ext.Button', {
        renderTo: Ext.getBody(),
        text: "Submit",
        overCls: 'x-button-pressed'
    });
}); 
```

其中“x-button-pressed”定义为：

```
.x-button-pressed{
    background: red;
} 
```

这在 Mozilla 10 但 IE 7 中运行良好。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:20:47.290

在 IE 的 EXT-all.css 样式中，您可以隐藏它们。请检查以下几行

```
/*
.x-nlg .x-btn-default-small-mc {
    background-image:none;
    background-color:transparent
}

.x-nbr .x-btn-default-small {
    padding:0!important;
    border-width:0!important;
    -webkit-border-radius:0;
    -moz-border-radius:0;
    -ms-border-radius:0;
    -o-border-radius:0;
    border-radius:0;
    background-color:transparent;
    background-position:1100303px 1000303px
}

.x-nbr .x-btn-default-small-tl,.x-nbr .x-btn-default-small-bl,.x-nbr .x-btn-default-small-tr,.x-nbr .x-btn-default-small-br,.x-nbr .x-btn-default-small-tc,.x-nbr .x-btn-default-small-bc,.x-nbr .x-btn-default-small-ml,.x-nbr .x-btn-default-small-mr {
    zoom:1;
    background-image:url('../../resources/themes/images/eg_theme/btn/btn-default-small-corners.gif')
}

.x-nbr .x-btn-default-small-ml,.x-nbr .x-btn-default-small-mr {
    zoom:1;
    background-image:url('../../resources/themes/images/eg_theme/btn/btn-default-small-sides.gif');
    background-position:0 0
}

.x-nbr .x-btn-default-small-mc {
    padding:0
}
*/ 
```

如果您使用的是 ext js 4.1.1 v

# codeigniter - 这是在 Codeigniter 中为我的应用程序分离管理员和公共的好方法吗？

> ID：11822871
> 
> 赞同：0
> 
> 时间：2012-08-06T05:19:10.727
> 
> 标签：codeigniter

我正在创建一个带有静态页面和管理员可编辑新闻和内容的网站。我想将管理员视图和公共视图分开。这是分离视图的好方法还是您可以建议更好的方法。我想要基本相同的视图，但只有管理员会有一个基于表单的文本区域来更改主题的内容。

MY_Controller.php：

```
class MY_Controller extends CI_Controller {

  protected $data = array();

  function __construct() {
    parent::__construct();
  }
    class Admin_Controller extends MY_Controller {

    function __construct()
    {
        parent::__construct();
        // Check login, load back end dependencies
    }
    function render_page($view) {
    if( ! $this->input->is_ajax_request() )
    {
      $this->load->view('templates/header', $this->data);
    }
    $this->load->view($view, $this->data);

    if( ! $this->input->is_ajax_request() )
    {
     $this->load->view('templates/menu');
     $this->load->view('templates/footer', $this->data);
    }
  }  
}
class Public_Controller extends MY_Controller {

    function __construct()
    {
        parent::__construct();
        // Check login, load back end dependencies
    }

   function render_page($view) {
    if( ! $this->input->is_ajax_request() )
    {
      $this->load->view('templates/header', $this->data);
    }
    $this->load->view($view, $this->data);

    if( ! $this->input->is_ajax_request() )
    {
     $this->load->view('templates/menu');
     $this->load->view('templates/footer', $this->data);
    }
  }  
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T06:08:13.073

如果管理视图在页面中是通用的，您可以将其作为视图加载到页面上的适当位置，例如。

```
if($is_admin){
$this->load->view('admin_toolbar');
}else{
$this->load->view('generic_toolbar');
} 
```

或者，如果管理视图在页面之间不常见，您可以在发送到页面的数据中包含一个标志。

（在控制器中）

```
$this->data['is_admin'] = true; 
```

（在视图中）

```
if($is_admin):
//output admin related html here.
endif 
```

# mysql - 使用表别名的 SQL 查询

> ID：11822876
> 
> 赞同：2
> 
> 时间：2012-08-06T05:20:40.343
> 
> 标签：mysql, sql, database

我在我的数据库中创建了一个名为 city 的表。该表有 2 列，分别称为“名称”和“国家”。我创建了一个查询，该查询返回来自不同国家/地区的城市组合，如下所示：

```
SELECT c1.name, c1.country, c2.name, c2.country 
FROM city c1, city c2
WHERE c1.country != c2.country 
```

此查询有效，但城市对重复，即。我得到结果：

```
 Berlin Germany London England 
London England Berlin Germany 
```

这意味着在我的结果集中重复了城市对柏林/汉堡。有没有解决的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T05:22:39.597

```
SELECT c1.name, c1.country, c2.name, c2.country 
FROM city c1, city c2
WHERE c1.country < c2.country 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T05:30:05.090

您可以使用`LEFT JOIN`see [Visual Explanation Of Joins](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)来做到这一点，试试这个：

```
SELECT c1.name, c1.country, c2.name, c2.country 
FROM city c1
     LEFT JOIN city c2
         ON c1.country = c2.country 
            AND c1.name = c2.name
WHERE c1.country IS NULL OR 
      c2.country IS NULL; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-06T05:30:55.963

一个好的数据库永远不会在一个表中包含两条或更多条相同的记录。所以我的建议是两张制作 2 张桌子：

```
cities: ID, country_ID, Name
countries: ID, Name 
```

并且选择应该是：

```
SELECT c.Name, co.Name
FROM cities c
INNER JOIN countries co
    ON co.ID=c.country_ID 
```

# python - 类方法上的python线程计时器

> ID：11822879
> 
> 赞同：5
> 
> 时间：2012-08-06T05:21:25.040
> 
> 标签：python, multithreading, timer

我有一个代码块，用于每 30 秒运行一段代码

```
def hello():
    print "hello, world"
    t = threading.Timer(30.0, hello)
    t.start() 
```

下面是一个类的方法，我真的想每 30 秒运行一次，但我遇到了问题。

```
def continousUpdate(self, contractId):    
    print 'hello, world new'
    t = threading.Timer(30.0, self.continousUpdate, [self, contractId],{} )
    t.start() 
```

当我运行它时，我收到以下错误

```
pydev debugger: starting
hello, world new
Exception in thread Thread-4:
Traceback (most recent call last):
  File "C:\Python27\lib\threading.py", line 552, in __bootstrap_inner
   self.run()
  File "C:\Python27\lib\threading.py", line 756, in run
   self.function(*self.args, **self.kwargs)
TypeError: continousUpdate() takes exactly 2 arguments (3 given) 
```

我也试过

```
def continousUpdate(self, contractId):    
    print 'hello, world new'
    t = threading.Timer(30.0, self.continousUpdate(contractId))
    t.start() 
```

它以某种方式表现得好像它忽略了线程，并给出了递归限制错误

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-06T05:24:16.963

尝试这个：

```
t = threading.Timer(30.0, self.continousUpdate, [contractId],{} ) 
```

当您阅读`self.continuousUpdate`时，该方法已经绑定到该对象，即使您还没有调用它。你不需要`self`再次通过。

第二个版本“忽略线程”的原因是您在调用的参数中调用该方法`Timer`，因此它在 Timer 启动之前运行（并尝试再次调用自身）。这就是为什么线程函数让你分别传递函数及其参数（所以它可以在准备好时调用函数本身）。

顺便说一句，您拼写了“连续”错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-24T11:00:42.247

只需删除`self`参数。这是一个完整的工作解决方案：

```
import threading
class DataCollect():
    def __init__(self):
        pass

    def hello(self):
        print("hello, world")
        t = threading.Timer(5.0, self.hello)
        t.start()

dataCollect = DataCollect() 
dataCollect.hello() 
```

# iphone - iPhone 文件系统

> ID：11822881
> 
> 赞同：0
> 
> 时间：2012-08-06T05:21:27.233
> 
> 标签：iphone, sqlite

MyProjectName.app 应该在 iPhone App 结构目录中为只读，但在项目中我必须加入 Test.sqlite 并编译它，然后我在 MyProjectName.app 中看到 Test.sqlite。

我将项目发布到物理机器并插入了一些数据而没有问题。这是正确的方法吗？

当我在 iphone 模拟器上添加 Test.sqlite 和数据时，Test.sqlite 似乎没有任何数据。我试图将 Test.sqlite 复制到 Documents。然后当我再次这样做时，数据显示在 Documents 的 Test.sqlite 中。我需要将 Test.sqlite 复制到文档中吗？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T05:36:33.340

检查Test.sqlite文件是只读还是读/写。将其更改为读/写。如果项目有任何锁定，请取消选中它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T05:54:08.897

在运行时修改的资源应该是 Documents 目录的一部分。iPhone 应用程序创建一个已签名的沙盒环境。如果您尝试修改任何捆绑资源，它将不允许。它适用于模拟器，但不适用于设备。

因此，任何修改的资源都应该从 bundle 复制到文档目录。

此外，当升级可用时，捆绑包将替换为新版本。但是文档目录不会改变。它保持不变。如果您想通过升级进行任何更改，您可以相应地修改数据。

希望能帮助到你。

# jdbc - 应用程序脚本：远程数据库密码安全

> ID：11822897
> 
> 赞同：2
> 
> 时间：2012-08-06T05:22:46.070
> 
> 标签：jdbc, google-apps-script

我使用 jdbc 服务连接到远程 sqlserver 数据库。我的应用程序脚本有我的密码和用户 ID。是否存在安全风险。我问是因为 javascript 可以检查；应用脚本对用户开放吗？

将安全信息导入应用程序的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T09:44:12.333

当浏览器呈现时，即使是硬编码的值也不会显示在 javascript 中。那是因为您编写的所有代码都在服务器端运行（客户端处理程序除外）。但是，如果您与其他用户共享脚本或电子表格，则该代码对其他用户可见。

您可以将您的用户名和密码存储在一个电子表格中，在运行时只有您可以访问和读取该电子表格。但是，请确保脚本在您的 ID 下运行（即仅作为 Web 应用程序发布）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:38:44.277

使用[UserProperties](https://developers.google.com/apps-script/class_userproperties)服务。它的值只对您可用，如果您决定让应用程序成为多用户，您甚至可以指导用户将他们唯一的 sql 用户名/密码存储在他们自己的 UserProperties 中。

# ios - While(1) 循环在 IOS 的后台不工作

> ID：11822899
> 
> 赞同：-2
> 
> 时间：2012-08-06T05:23:06.637
> 
> 标签：ios

我试图在后台运行一些服务，所以我通过`while(1)`在后台委托中使用循环一段时间来在后台控制。在模拟器上它工作正常，但在将其传输到我的 iPad 时，应用程序在进入后台后崩溃。

`while(1)`循环在设备上不起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T05:57:31.347

> 在模拟器上它工作正常，但在将其传输到 Ipad 设备时，应用程序在进入后台后崩溃。

如果我正确解释了您正在编写的内容，我认为您的应用程序在 iOS 设备上被杀死只是因为除了少数备用情况外，当应用程序“在后台”时，您不允许在您的应用程序中运行线程"（即，在用户通过单击主页按钮“退出”它之后）。

所以，如果我在阅读正在发生的事情时是正确的，要么您的应用程序属于特定的应用程序类别（见下文），要么您唯一能做的就是“注册”一个后台线程以在有限的时间内运行应用程序进入后台后。

[后台执行和多任务处理](http://developer.apple.com/library/ios/DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20)的摘录

> 大多数应用程序在进入后台后不久就会进入暂停状态。只有向用户提供重要服务的应用程序才能继续运行任意时间。
> 
> 鼓励您尽可能避免在后台执行并让您的应用程序暂停。如果您发现需要执行后台任务，以下是一些合适的指导原则：
> 
> 您需要至少实现几种特定用户服务中的一种。
> 
> 您需要执行一个有限长度的任务。

您可能对“实现长时间运行的后台任务”特别感兴趣：

> 对于需要更多执行时间来实现的任务，您必须请求特定权限才能在后台运行它们而不会被挂起。在 iOS 中，只允许特定类型的应用程序在后台运行：
> 
> 在后台向用户播放有声内容的应用程序，例如音乐播放器应用程序
> 
> 让用户随时了解其位置的应用程序，例如导航应用程序
> 
> 支持互联网协议语音 (VoIP) 的应用程序
> 
> 需要下载和处理新内容的报亭应用
> 
> 从外部配件接收定期更新的应用程序

# java - Java中类型擦除的例外是什么？

> ID：11822904
> 
> 赞同：3
> 
> 时间：2012-08-06T05:23:41.873
> 
> 标签：java, generics, reflection, type-erasure

我在网上的一些地方看到它提到，在某些情况下，可以使用反射 API 来获取有关泛型数据类型的信息，我认为这些信息会通过类型擦除而丢失。

我正在寻找类型擦除不完整的情况的完整列表，即仍然可以通过反射访问某些内容。可以获取泛型类型的示例和相关反射代码的良好列表将非常好。

**更新** [http://tutorials.jenkov.com/java-reflection/generics.html](http://tutorials.jenkov.com/java-reflection/generics.html)正是我正在寻找的例子。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T05:35:31.890

我认为它归结为：

*   没有对象实例存储任何类型信息。

*   然而，这些类保留了它们所有的泛型签名（否则在编译时你不能进行任何泛型类型检查）

因此，使用反射，您可以读取给定类的泛型类型信息。

例子：

```
 class MyList extends ArrayList<MyObject>{}

 List<MyObject> x = new MyList(); 
```

反射会告诉你这是一个 MyObject 的 List（因为这个信息被编译到了 MyList 类中）。

但

```
List<MyObject> x = new ArrayList<MyObject>(); 
```

反射不会告诉您任何有用的信息（因为 ArrayList*类*对 MyObject 一无所知）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T05:35:58.867

一般的想法是，如果您创建一个命名或匿名类，该类是泛型类型的子类，类型参数具有特定类型，那么该子类不是泛型且不受类型擦除的影响。假设您可以获取`Class`子类的对象，您可以对该对象使用反射来找出参数类型是什么。

仔细想想，这并不是擦除规则的真正“例外”。相反，它通过明确具体化来安排所讨论的类不是通用的。

# c# - silverlight业务模板如何登录应用程序？

> ID：11822907
> 
> 赞同：0
> 
> 时间：2012-08-06T05:24:07.773
> 
> 标签：c#, silverlight, authentication, mvvm

当用户尝试登录`Silverligh Business application`.

在我的数据库中，我有两个名为`Students`and的表`Teachers`，并且我有一个名为 UsersView 的视图，在其中我在这两个表之间进行联合（并且此视图或查询与属性 Id 一样）。

我需要在我的 silverlight 业务应用程序中使用此视图来验证用户是否存在。我看到很多项目都在使用 WFC RIA 服务，实际上我想直接调用我的数据库，但我真的很困惑。

有人可以告诉我是否需要通过 AuthenticationBase 登录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T05:32:13.120

Silverlight 不能直接调用数据库，因为它是客户端应用程序。它必须通过中间 WCF 服务，或者您可以使用 WCF RIA 服务来获得一些开箱即用的功能。一个silverlight 业务应用程序模板应该带有两个项目，一个生成客户端.xap 的silverlight 项目和一个Web 项目。如果您转到 silverlight 应用程序的属性，它应该会显示指向 Web 项目的 RIA 服务链接。如果你运行它，它应该（如果我没记错的话）使用 sql express 实例创建一个临时数据库来登录和验证用户。所以，长话短说。是的，您必须使用 AuthenticationBase 登录。登录只能发生在服务器上。因此，您必须等待 silverlight 应用程序与服务器通信，针对 db 进行验证，然后通过 RIA 提交响应。希望有帮助。

# java - 具有复杂参数的单元测试

> ID：11822912
> 
> 赞同：5
> 
> 时间：2012-08-06T05:24:36.760
> 
> 标签：java, unit-testing, mocking, easymock

可以说我有一个方法：

```
someMethod(X anObject) 
```

其中 X 是一种极其复杂的对象。我的意思是，它不是一个可以轻易即时实例化的东西。我需要以某种方式对 someMethod 进行单元测试，但我不能这么简单地创建一个 X 对象作为参数放入。

所以我首先想尝试模拟对象，但我遇到的问题是 someMethod 函数调用了 anObject 的许多方法，这意味着被模拟的这个 X 对象有大量需要调用的函数，因此需要模拟预期。更糟糕的是，这些被调用的 X 对象方法返回更多的 X 对象，这意味着我必须模拟对象，期待模拟方法调用，返回更多的模拟对象。

关于这种情况，我有几个问题，因为我是单元测试概念的新手：

1.  除了冗长的单元测试方法之外，我发现我的单元测试不仅要测试方法是否有效，还要指定实现（因为我基本上指定了在方法本身中调用的大部分代码与模拟预期）。这是一个问题吗（主要是单元测试本身的概念）？
2.  有什么办法可以解决这个问题，即使只是让我的单元测试方法不那么冗长且更易于维护？
3.  我考虑从其他地方获取一个序列化的 X 对象，保存它，然后每当我调用我的单元测试方法时，我都会反序列化我的 X 对象并将其作为参数运行。这只是我想到的一些随机想法；真的有人这样做吗？

如果有人想知道我到底在做什么，我将使用[IDebugContextListener](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/debug/ui/contexts/class-use/IDebugContextListener.html)接口在 java 调试器的给定步骤中获取有关堆栈帧上数据的调试信息。我所说的“X”是[这里](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/debug/core/model/package-summary.html)接口定义的对象，包括IValue、IVariable、IStackframe等对象。所有这些变量都是 Java 调试器在运行时提供给我的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T05:39:16.760

您遇到这种困难的事实是设计问题的征兆。当某些东西难以测试时，重构直到它不难测试。

如果一个对象需要调用另一个对象的方法太多，那么封装就很差，职责也很差。据推测，没有遵循单一职责原则。如果代码调用返回对象的方法，并且必须依次调用这些方法，那么就没有遵循得墨忒耳法则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:42:44.780

您的痛苦来自于您的方法不符合单一职责原则的事实。你的方法用 X 做了很多事情——而且 X 听起来也太复杂了。这使得测试变得非常困难——即使是模拟。

将您的方法分解为可管理的块，每个块只做一件事。

# c - 需要解释内存地址在这个 C 程序中是如何工作的

> ID：11822913
> 
> 赞同：0
> 
> 时间：2012-08-06T05:24:44.433
> 
> 标签：c, memory

我有一个非常简单的 C 程序（出于我自己的好奇心），我正在研究哪些内存地址用于分配局部变量。我的程序是：

```
#include <stdio.h>

int main()
{
  char buffer_1[8], buffer_2[8], buffer_3[8];
  printf("address of buffer_1 %p\n", buffer_1);
  printf("address of buffer_2 %p\n", buffer_2);
  printf("address of buffer_3 %p\n", buffer_3);
  return 0;
} 
```

输出如下：

```
address of buffer_1 0x7fff5fbfec30
address of buffer_2 0x7fff5fbfec20
address of buffer_3 0x7fff5fbfec10 
```

我的问题是：为什么地址似乎越来越小？这有什么逻辑吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T05:27:16.790

允许编译器对您的自动变量执行任何操作。在这种情况下，它看起来就像是将它们连续放在堆栈上。在当今使用的最流行的系统上，堆栈向下增长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T05:36:58.977

大多数编译器在一个步骤中为局部变量分配堆栈内存，在函数的一开始。内存被分配为单个连续块。在这些情况下，编译器显然可以自由地为该块内的局部变量使用任何内存布局。如果可以将它们放在那里，以便地址按声明顺序增加。或减少。或者随机排列。这是一个实现细节。它背后没有太多逻辑。

在您的情况下，编译器很可能试图“假装”数组的内存是按顺序和独立地在堆栈中分配的（即使情况并非如此）。如果在您的平台堆栈上向下增长（就像在许多平台上一样），那么预计稍后声明的对象将具有较小的地址。

但同样，函数不会单独分配本地对象。最重要的是，该语言不保证本地对象地址之间的任何关系。因此，没有真正的理由更喜欢一种订购方式而不是另一种订购方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T06:24:39.540

C 程序的输出依赖于平台和编译器。不可能只有一个完美的答案，因为地址安排因以下因素而异：系统是小端还是大端。您正在编译什么样的操作系统。您正在为哪种内存架构进行编译。您使用的是哪种编译器（编译器也可能有错误）无论您是在 64 位还是 32 位平台上。还有更多。

但最重要的是处理器架构的类型。:)

以下是每个处理器的堆栈增长策略列表：

```
x86,PDP11    Downwards
System z     In a linked list fashion, downwards, mostly.
ARM          Select-able and can grow in either up or downward.
Mostek6502   Downwards (but only 256 bytes).
SPARC        In a circular fashion with a sliding window, a limited depth stack. 
RCA1802A     Subject to SCRT(Standard Call and Return Technique) implementation. 
```

但是，通常，您的编译器在编译时应该将这些地址映射到生成的二进制文件中。然后在运行时，二进制文件可能占用（或可能假装占用）一组连续的内存地址。在您的情况下，您的 C 源代码打印的地址表明堆栈正在向下增长。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T07:21:23.150

基本上编译器有责任为所有变量分配内存。数组在堆栈上获取地址。但这与您获得的o / p无关。基本上事情是编译器当时发现连续空间（或内存块）是空的，因此它将它分配给您的程序。

# asp.net-mvc - 家庭控制器中的方法过载和asp.net mvc中的路由问题

> ID：11822929
> 
> 赞同：1
> 
> 时间：2012-08-06T05:26:37.087
> 
> 标签：asp.net-mvc

我有家庭控制器。我的家庭控制器有两种索引方法，一种无参数，一种有参数。它像是

```
 public ActionResult Index()
    {
        ViewData["Message"] = "Welcome to ASP.NET MVC!";
        return View("index");
    }

    public ActionResult Index(int a)
    {
        ViewData["Message"] = "Welcome to ASP.NET MVC! and Your Age is " + a;
        return View();
    } 
```

我在 global.asax 中只定义了两个路由条目，例如

```
 routes.MapRoute(
                "Default1", // Route name
                "{Home}/{ID}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            );

            routes.MapRoute(
                "Default", // Route name
                "{controller}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            ); 
```

我希望当我输入像**http://localhost:7221**或**http://localhost:7221/home**这样的 url 时，应该触发没有家庭控制器参数的 index() 方法并且

当我键入**http://localhost:7221/home/77**时，应该触发带有家庭控制器参数的 index(int a) 方法。但我收到错误，为什么我输入了我指定的两种 url。错误消息是控制器类型“HomeController”上的操作“索引”的当前请求在以下操作方法之间不明确： System.Web.Mvc.ActionResult Index() on type BeginnerMVC.Controllers.HomeController System.Web.Mvc.ActionResult BeginnerMVC.Controllers.HomeController 类型上的索引（Int32）

我无法捕捉到错误。我的路由代码有什么问题。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T05:54:43.177

您不能将方法重载与 MVC 中的操作一起使用。如果你详细说明你想要达到的目标，你会得到关于如何做到这一点的建议。

# zend-framework - 如何使用 Zend Framework 测试带有错误 500 的错误页面

> ID：11822930
> 
> 赞同：0
> 
> 时间：2012-08-06T05:26:44.403
> 
> 标签：zend-framework, error-handling, doctrine-orm

我正在做一个项目，客户要求我用堆栈跟踪等精美地显示错误 500。所以，我检查了错误控制器并在相应的视图/脚本中制作了一个漂亮的花哨错误页面

问题是，我该如何测试它？在处理该项目时，我清除了每一页上的错误，我无法再次生成它。另外，我正在使用学说，我记得“回显”实体管理器数组，但是我无法追踪位置。

我将如何自定义生成错误 500，“保持真实”？

PS：我尝试了 htaccess 的东西并相信我，它会抛出 apache 错误而不是 zend 500。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T05:46:29.177

这很愚蠢，但终于找到了。

我所需要的只是在我使用 querybuilder 的任何页面上拼错一个 dql 表名。

# sql - Teradata 中的 Fetch_status

> ID：11822931
> 
> 赞同：1
> 
> 时间：2012-08-06T05:26:52.703
> 
> 标签：sql, sql-server, stored-procedures, teradata

@@ 我在 Teradata 中使用游标，我需要一些与 fetch_status 相关的帮助

下面是 SQL Server FETCH_STATUS 值

返回值 说明 0 FETCH 语句成功。-1 FETCH 语句失败或该行超出了结果集。-2 获取的行丢失。

你能告诉我 Teradata 中 FETCH_STATUS 的等效值吗

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:28:40.833

`FETCH`当您使用和遍历游标时，当您超出结果集中的记录时`SQLCODE`，`SQLSTATE`将相应地设置。

*   `SQLCODE`设置为 7362
*   `SQLSTATE`设置为“02000”</li>

系统将在内部处理此错误，允许您以类似的方式编写循环逻辑：

```
OPEN myCursor;

WHILE (SQLCODE = 0)
  FETCH myCursor INTO Field1, Field2;
END WHILE;

CLOSE myCursor; 
```

# cakephp - CakePHP：在单个下拉列表中显示多个字段

> ID：11822942
> 
> 赞同：3
> 
> 时间：2012-08-06T05:29:12.717
> 
> 标签：cakephp, drop-down-menu, foreign-keys

```
$this->loadModel('Product');
$this->set('products',$this->Product->find('list',array('product'=>array('products.name' => 'products.price'))));
$this->set(compact('products')); 
```

我正在努力做到这一点，这样我就可以在我正在使用的功能中同时显示产品名称和价格。So when the drop down is selected, instead of just being "productname" it would be like "productname - $price".

我很确定这是所有需要查看的代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T05:44:40.643

只需在您的 : 中添加以下行`Product Model`：

```
public $virtualFields = array('name_price' => 'concat(Product.name, "-", Product.price)'); 
```

并尝试以下代码来获取：

```
$this->loadModel('Product');
$this->set('products',$this->Product->find('list',array('fields'=>array('Product.name_price' => 'Product.price'))));
$this->set(compact('products')); 
```

# c# - 在 C# 中使用 .js 文件

> ID：11822952
> 
> 赞同：0
> 
> 时间：2012-08-06T05:31:17.553
> 
> 标签：c#, javascript, datepicker

对于这样一个基本问题，我很抱歉，但我不习惯 JavaScript。

我有一个 JavaScript (DatePicker.js)。我想在 emp_master.aspx 上添加一个可以调用 .js 函数的文本框。

但是如何在 C# 中使用 .js ，即在哪里调用 .js 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T05:58:51.383

通常的做法是在母版页上包含 js 和 css 文件（扩展名为 .master 的文件）。

最简单的例子

```
<html>
  <head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <title>Тег LINK</title>  
   <link rel="stylesheet" type="text/css" href="styles.css">
   <script type="text/javascript" src="DatePicker.js"></script>
  </head> 
  <body>
    <p>...</p>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T05:50:13.010

google 会给你更多答案[https://www.google.co.in/#hl=en&sclient=psy-ab&q=calling%20.js%20from%20.aspx&oq=calling%20js%20from%20as&gs_l=hp。 11.3.0I10I30J0I30L3.13487.24791.1.27452.26.17.4.5.7.4.5.7.1.1.221.2423.0J16J1.17.0.0.0.0 ... 1c.nodexe7ib＆pbx＆pbx = 1＆bav = 1＆bav = 1＆bav = 1＆bav = on.2＆_2， 1024&bih=598&pf=p&pdl=300](https://www.google.co.in/#hl=en&sclient=psy-ab&q=calling%20.js%20from%20.aspx&oq=calling%20js%20from%20as&gs_l=hp.11.3.0i10i30j0i30l3.13487.24791.1.27452.26.17.4.5.7.1.221.2423.0j16j1.17.0...0.0...1c.NodExE7iB2M&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=e714c12403361d92&biw=1024&bih=598&pf=p&pdl=300)

# ios - 如何使用两种颜色在 iOS 中为源和目标添加注释引脚？

> ID：11822953
> 
> 赞同：2
> 
> 时间：2012-08-06T05:31:23.060
> 
> 标签：ios, google-maps, mapkit

我正在开发一个小项目，它将显示源和距离跟踪路线，我已经完成了，现在我无法为源和目标添加两个不同颜色的注释引脚，假设我使用红色作为源和绿色的目的地。对于正在学习和工作的每个人来说，这可能是巨大的帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:34:42.843

您可以使用图像作为您的引脚，也可以使用 - 的子类，`MKAnnotationView`只需`MKPinAnnotationView`更改`pinColor`属性，可以在此处找到它的文档：

[http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKPinAnnotationView_Class/Reference/Reference.html#//apple_ref/occ/cl/MKPinAnnotationView](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKPinAnnotationView_Class/Reference/Reference.html#//apple_ref/occ/cl/MKPinAnnotationView)

# asp.net - 调整从字节创建的图像大小

> ID：11822955
> 
> 赞同：0
> 
> 时间：2012-08-06T05:31:35.463
> 
> 标签：asp.net, dotnetnuke, image-resizing

我的网站上有多个图像。但是图像是从存储在数据库中的字节生成的。我从再见生成图像并将其显示在我的网站上。但是每张图像的图像尺寸非常大（70 公斤）。这使我的网站变慢。

有什么方法可以调整这些图像的大小（12 公斤）。如果有人有解决方案，请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:43:12.017

您可以创建一个可以创建和返回图像的自定义处理程序。与该处理程序一起应该设置可变性设置等以及图像重新调整大小以获得性能改进。

这是一个例子：[http ://webimageresizer.codeplex.com/](http://webimageresizer.codeplex.com/)

// 返回到 /bla.jpg 的图像映射，调整大小为 100 像素的宽度，保留相对于高度的纵横比 [http://webimageresizer.codeplex.com/ImageHandler.ashx?src=/bla.jpg&width=100](http://webimageresizer.codeplex.com/ImageHandler.ashx?src=/bla.jpg&width=100)

如果您需要更多帮助，请告诉我。

# javascript - Javascript：如何有效/正确地取消 jsonify

> ID：11822957
> 
> 赞同：0
> 
> 时间：2012-08-06T05:31:51.127
> 
> 标签：javascript, json, html, parsing

老实说，我不太确定从哪里开始这个问题。我将描述这种情况：我正在为 HTML5 游戏制作关卡编辑器。关卡编辑器已经可以使用了——现在我想保存/加载用这个编辑器创建的关卡。

由于这一切都是在 Javascript 中完成的（关卡编辑器和游戏），我正在考虑让保存简单地将关卡转换为 JSON 并加载，嗯......取消 jsonify 它。

问题是 - 关卡包含几种类型的对象（几种不同类型的实体，几种类型的动画对象等......）现在，每次我想向游戏中添加一个对象时，我都必须编写一个 unjsonify 方法专门针对该对象，然后修改关卡对象的 unjsonify 方法，以便它可以处理 unjsonifying 新定义的对象类型。

我不能简单地使用 JSON.parse，因为它只返回一个与原始对象具有相同键和值的对象，但它实际上并不是该类/原型的对象。那么，我的问题是，是否有一种正确的方法来做到这一点，而无需每次我想向游戏中添加新类型的对象时都必须不断修改代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:37:59.980

我会在每个对象上创建序列化/反序列化方法，以将它们的状态放入 JSON 对象并从中恢复。复合对象将递归地序列化/反序列化它们的子对象。举个例子：

```
function Player {
  this.weapon = new Weapon();
}

Player.prototype.serialise = function () {
  return {'type': 'Player', weapon: this.weapon.serialise()};
}

Player.deserialise = function(json_object) {
  var player = new Player();
  player.weapon = Weapon.deserialise(json.weapon);
  return player;
} 
```

显然，在实际代码中，您将进行检查以确保您获得了您期望的对象类型。数组和简单的散列对象可以在序列化/反序列化期间简单地复制，尽管它们的子对象通常需要递归。

# jquery - 使用jquery在密码字段中进行密码屏蔽

> ID：11822963
> 
> 赞同：3
> 
> 时间：2012-08-06T05:32:34.947
> 
> 标签：jquery, passwords, masking

如何在 Android 手机中进行密码屏蔽，例如当我们输入一个键时，它会显示一个键几秒钟并将其更改为“*”。我尝试了密码屏蔽中提到的插件，[因为在使用 js 的手机中](https://stackoverflow.com/questions/7304823/password-masking-as-in-mobiles-using-js)它不是最佳的。并且 jsfiddle [http://jsfiddle.net/medopal/X37Wz/](http://jsfiddle.net/medopal/X37Wz/)无法处理退格和删除。您能否建议任何其他方法来做到这一点？只使用jquery而不使用插件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T07:58:55.187

在这里，我已经为上述查询完成了完整的解决方案箱。请检查演示链接，如下所示：

**演示：** [http ://codebins.com/bin/4ldqp8u](http://codebins.com/bin/4ldqp8u)

**HTML：**

```
<div id="panel">
  <input type="text" id="txtpwd" name="txtpwd" size="15"/>
  <input type="text" id="txthidden" name="txthidden" size="15"/>
  <div>
    KeyCode Pressed: 
    <span id="keycode">
    </span>
  </div>
</div> 
```

**查询：**

```
$(function() {
    //Extends JQuery Methods to get current cursor postion in input text.
    //GET CURSOR POSITION
    jQuery.fn.getCursorPosition = function() {
        if (this.lengh == 0) return -1;
        return $(this).getSelectionStart();
    }

    jQuery.fn.getSelectionStart = function() {
        if (this.lengh == 0) return -1;
        input = this[0];

        var pos = input.value.length;

        if (input.createTextRange) {
            var r = document.selection.createRange().duplicate();
            r.moveEnd('character', input.value.length);
            if (r.text == '') pos = input.value.length;
            pos = input.value.lastIndexOf(r.text);
        } else if (typeof(input.selectionStart) != "undefined") pos = input.selectionStart;

        return pos;
    }

    //Bind Key Press event with password field    
    $("#txtpwd").keypress(function(e) {
        setTimeout(function() {
            maskPassword(e)
        }, 500);
    });

});

function generateStars(n) {
    var stars = '';
    for (var i = 0; i < n; i++) {
        stars += '*';
    }
    return stars;
}

function maskPassword(e) {

    var text = $('#txthidden').val().trim();
    var stars = $('#txthidden').val().trim().length;
    var unicode = e.keyCode ? e.keyCode : e.charCode;
    $("#keycode").html(unicode);

    //Get Current Cursor Position on Password Textbox
    var curPos = $("#txtpwd").getCursorPosition();
    var PwdLength = $("#txtpwd").val().trim().length;

    if (unicode != 9 && unicode != 13 && unicode != 37 && unicode != 40 && unicode != 37 && unicode != 39) {
        //If NOT <Back Space> OR <DEL> Then...
        if (unicode != 8 && unicode != 46) {
            text = text + String.fromCharCode(unicode);
            stars += 1;
        }
        //If Press <Back Space> Or <DEL> Then...
        else if ((unicode == 8 || unicode == 46) && stars != PwdLength) {
            stars -= 1;
            text = text.replace(text.charAt(curPos), "");
        }
        //Set New String on both input fields
        $('#txthidden').val(text);
        $('#txtpwd').val(generateStars(stars));
    }

} 
```

**演示：** [http ://codebins.com/bin/4ldqp8u](http://codebins.com/bin/4ldqp8u)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-12T11:52:14.510

基于上面 codebins.com 代码的 keyur，这个很棒的小答案在这里[https://stackoverflow.com/a/4843500/1056285](https://stackoverflow.com/a/4843500/1056285)和[https://stackoverflow.com/a/1431109/1056285](https://stackoverflow.com/a/1431109/1056285)（用于使退格键实际删除没有错误）我调整了解决方案以考虑退格！

```
$(function() {
    //Extends JQuery Methods to get current cursor postion in input text.
    //GET CURSOR POSITION
    jQuery.fn.getCursorPosition = function() {
        if (this.lengh == 0) return -1;
        return $(this).getSelectionStart();
    }

    jQuery.fn.getSelectionStart = function() {
        if (this.lengh == 0) return -1;
        input = this[0];

        var pos = input.value.length;

        if (input.createTextRange) {
            var r = document.selection.createRange().duplicate();
            r.moveEnd('character', input.value.length);
            if (r.text == '') pos = input.value.length;
            pos = input.value.lastIndexOf(r.text);
        } else if (typeof(input.selectionStart) != "undefined") pos = input.selectionStart;

        return pos;
    }

    //Bind Key Press event with password field    
    $("#txtpwd").keypress(function(e) {
        setTimeout(function() {
            maskPassword(e)
        }, 500);
    });

    $("#txtpwd").keydown(function(e) {
        if (e.keyCode == 8) {
            setTimeout(function() {
                maskPassword(e)
            }, 1);
        }
    });

});

function generateStars(n) {
    var stars = '';
    for (var i = 0; i < n; i++) {
        stars += '*';
    }
    return stars;
}

function maskPassword(e) {

    var text = $('#txthidden').val();
    var stars = $('#txthidden').val().length;
    var unicode = e.keyCode ? e.keyCode : e.charCode;
    $("#keycode").html(unicode);

    //Get Current Cursor Position on Password Textbox
    var curPos = $("#txtpwd").getCursorPosition();
    var PwdLength = $("#txtpwd").val().length;

    if (unicode != 9 && unicode != 13 && unicode != 37 && unicode != 40 && unicode != 37 && unicode != 39) {
        //If NOT <Back Space> OR <DEL> Then...
        if (unicode != 8 && unicode != 46) {
            text = text + String.fromCharCode(unicode);
            stars += 1;
        }
        //If Press <Back Space> Or <DEL> Then...
        else if ((unicode == 8 || unicode == 46) && stars != PwdLength) {
            stars -= 1;
            text = text.substr(0, curPos) + text.substr(curPos + 1);
        }
        //Set New String on both input fields
        $('#txthidden').val(text);
        $('#txtpwd').val(generateStars(stars));
    }

} 
```

你可以看看下面： [http ://codebins.com/bin/4ldqp8u/38](http://codebins.com/bin/4ldqp8u/38)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T06:35:14.547

IE 10 具有该功能。可能有人可以撕掉它吗？:|

![Windows 8 上的 IE 10](../Images/2baf27c24024eed204a17fabe299e14f.png)

[另外，我在此](http://jsbin.com/igufof/3/)基础上编写了一个简单的代码片段，可以帮助您开始编写自己的代码。

编辑：在这里查看代码：

```
<form action="#" onclick="return false;">
<input type="text" id="pv" name="passval" value="password" /><br>
<input type="password" id="p" name="pass" value="passwordsd" /><br>
<button id="b">Show</button>
</form>
<script>
$("#b").mousedown(function(){
  $("#pv").val($("#p").val());
}).mouseup(function(){
  $("#pv").val("");
});
</script> 
```

# mapping - 当它在普通腻子中工作时，如何在安全 crt 中映射 pageup/pagedown？

> ID：11822966
> 
> 赞同：1
> 
> 时间：2012-08-06T05:32:50.050
> 
> 标签：mapping

我正在使用securecrt，并且由于pageup/down键不起作用，所以我遇到了问题。如何映射它们以使它们的行为与腻子一样？

我参考了一些网站并尝试了以下方法，但没有用。

PageUp – \033[5~ PageDown – \033[6~

请帮帮我。

谢谢，斯里坎特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-20T08:04:29.153

它认为映射确实有效。问题出在您正在使用的程序中。对我来说，less 没有听向上/向下翻页，但 nano 工作正常。我认为你必须在目标机器本身上添加一些映射。查看此链接（我尚未对此进行测试）： [https ://unix.stackexchange.com/questions/3614/why-dont-page-u-down-home-end-work-in-less-on-solaris-来自 ubuntu 的过度 ssh](https://unix.stackexchange.com/questions/3614/why-dont-page-u-down-home-end-work-in-less-on-solaris-over-ssh-from-ubuntu)

# css - 将锚标记显示为全宽作为 HTML 中的按钮？

> ID：11822969
> 
> 赞同：18
> 
> 时间：2012-08-06T05:32:58.867
> 
> 标签：css, html, anchor

这是我页面侧边菜单的小代码

```
<div style="display: block;" id="overlay" class="overlay">
    <div id="sideMenuGroups">
    <div id="sideMenuGroupHeader" class="mSideMenuSeparator">GROUPS</div>
      <div id="sideMenuGroupContent" class="mSideMenuContent">
           <div id="teacherGroup">As Teacher
             <a onclick="groupFeeds();" href="#">Data Mining</a>
             <a onclick="groupFeeds();" href="#">Data Structures</a>
             <a onclick="groupFeeds();" href="#">C Language</a>
              //**display anchor tag to full width of overlay**
             <a onclick="groupFeeds();" href="#">Introduction to IT</a>
           </div>
          </div>  
    </div>
    </div><!--overlay ends here--> 
```

所用样式的 CSS 是

* *mSideMenuConten* *t 没有定义样式

**mSideMenuContent a** - 告诉每个锚标记如何可见，我尝试过 **display:table-cell**属性，但它对我无效

**覆盖**告诉侧菜单将如何

```
.mSideMenuContent
{

}
.mSideMenuContent a
{
    display: table-cell;
    height: 37px;
    color: #c4ccda;
    padding: 3px 0 3px 8px;
    font-size: small;

}
.mSideMenuContent a:hover
{
  background:#262c3a;
  color: #c4ccda;
}   
.mSideMenuSeparator
{
    background: #434b5c;
    border-top: 1px solid #242a37;
    border-bottom: 1px solid #242a37;
    font-family:Helvetica, sans-serif;
    font-size:x-small;
    color: #7a8292;
    height:17px;
    padding-top:4px;
    padding-left: 10px;
    text-shadow: 0 1px 0 rgba(0, 0, 0, .6)
}
    .overlay {
    z-index: 1000;
    position: absolute; 
    top: 0;
    bottom: 0;
    left: 0;
    width: 50%;
    height: 100%;
    background:#31394a;;
    color: #c4ccda;
    display: none;
} 
```

我想将锚标签显示为侧边菜单的全宽，我该怎么做？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-07T18:33:41.363

用这个：

```
display:inline-block;
width: 100%; 
```

通过说内联块，您可以自己定义元素的宽度。默认情况下，内联元素不能这样做。

# google-chrome-extension - 如何自动将 Chrome 扩展发布到网上商店？

> ID：11822975
> 
> 赞同：18
> 
> 时间：2012-08-06T05:34:43.413
> 
> 标签：google-chrome-extension, chrome-web-store

从 Google Chrome 21.x 开始，将不再支持私人更新站点。这迫使我们将扩展程序移至 Google 网上商店。以前，我们使用了一个自动脚本来创建 .crx 文件，对其进行签名，然后上传到更新站点。

有没有办法将脚本上传扩展至谷歌网上商店？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-04T20:05:50.250

[自 2014 年 3 月以来](http://blog.chromium.org/2014/03/new-monetization-and-publishing-options_11.html)，有一个 API 可以做到这一点。文档[在这里](https://developer.chrome.com/webstore/using_webstore_api)。

我从来没有使用过它，所以我不能提供一个完整的例子。

但是，从文档来看，基本流程将是一个经过身份验证的[请求，其中包含一个更新的包](https://developer.chrome.com/webstore/using_webstore_api#uploadexisitng)，然后是一个经过身份验证[的发布请求](https://developer.chrome.com/webstore/using_webstore_api#publishpublic)：

```
> curl \
-H "Authorization: Bearer $TOKEN"  \
-H "x-goog-api-version: 2" \
-X PUT \
-T $FILE_NAME \
-v \
https://www.googleapis.com/upload/chromewebstore/v1.1/items/$APP_ID

> curl \
-H "Authorization: Bearer $TOKEN"  \
-H "x-goog-api-version: 2" \
-H "Content-Length: 0" \
-X POST \
-v \
https://www.googleapis.com/chromewebstore/v1.1/items/$APP_ID/publish 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-06T04:50:55.533

这是我的 grunt 插件[https://github.com/c301/grunt-webstore-upload](https://github.com/c301/grunt-webstore-upload)。

但是您仍然必须第一次上传您的扩展程序，才能获得扩展程序 ID。

它只解决了上传问题，您需要先编译 ZIP 文件。你可以使用这个 grunt 插件[https://github.com/oncletom/grunt-crx](https://github.com/oncletom/grunt-crx)（我没有测试它）。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-01-06T13:14:55.693

实际上，由于安全问题，您不能这样做。但是您可以自动将您的扩展程序构建为 zip 文件，然后您只需将该 zip 文件上传到 Google Web Store。就这样！

# javascript - 网格状的多响应图像

> ID：11822978
> 
> 赞同：2
> 
> 时间：2012-08-06T05:35:10.123
> 
> 标签：javascript, html, css

我目前正在整理一个展示网站，在主要内容区域中，需要有许多图像/项目，以一个盒子状的顺序排列，彼此相邻并重叠......

[http://jsfiddle.net/bdv3t/](http://jsfiddle.net/bdv3t/)

我将如何制作它，以便当浏览器窗口被引入并变小时，这些图像/项目中的每一个都会逐渐缩小并与它所在的容器成比例（因此在大屏幕上大约有 8从左到右的图像/项目，这与在较小的屏幕上相同，只是每个图像的尺寸更小）？

我已经研究过使用诸如[this](http://responsive-slides.viljamis.com/ "通过@viljamis")和[this](http://filamentgroup.com/examples/responsive-images/)之类的响应式图像，但没有运气，因为它只使一个图像全宽。如果可以的话，我想避免使用表格，并且更喜欢 CSS-HTML 方法而不是 JS，但如果一切都失败了，那么 JS 方法就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T05:55:56.093

在您的页面中包含 jQuery，例如：

```
<script src="jquery-latest.js"></script> 
```

为所有拼图添加一个类，例如：

```
<li><img class="pieces" src="http://dummyimage.com/200x200/000/fff" alt="1" width="200" height="200"/></li>
<li><img class="pieces" src="http://dummyimage.com/200x200/000/fff" alt="1" width="200" height="200"/></li>
// etc. 
```

包括类似这样的 JavaScript（这将使您的拼图块变成窗口大小的 1/5）：

```
$(document).ready(function() {
    $(window).on("resize", function() {
        $(".pieces").width($(window).width() / 5).height($(window).height() / 5);
    });
}); 
```

我用你的 Fiddle 测试了这个，效果很好。要在您的 Fiddle 中包含 jQuery，请在左侧选择它作为框架（例如，jQuery 1.7.2）。然后将类名添加到 JavaScript 框中的片段和脚本中。测试直到你得到你想要的确切行为。

**编辑**：如果您想最小化像素失真，请使用多种不同的图像尺寸并在调整大小之前将图像源重置为最接近的可用尺寸。例如，假设您的图块有 400x400、300x300、200x200、100x100 和 50x50 的图像尺寸。JavaScript 将更改为：

```
$(document).ready(function() {
    updatePieceSize = function() {
        var side, imgSize, src;

        side = Math.min($(window).width(), $(window).height()) / 5;

        if (side >= 350) {
            imgSize = "400x400";
        } else if (side >= 250) {
            imgSize = "300x300";
        } else if (side >= 150) {
            imgSize = "200x200";
        } else if (side >= 75) {
            imgSize = "100x100";
        } else {
            imgSize = "50x50";
        }
        src = "http://dummyimage.com/" + imgSize + "/000/fff";

        $(".pieces").attr("src", src).width(side).height(side);        
    };

    $(window).on("resize", updatePieceSize);
    updatePieceSize();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:03:56.227

[编辑过的小提琴只是检查一下，如果你想要别的东西然后回复。](http://jsfiddle.net/bdv3t/3/)

> @media 查询解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T02:15:43.513

显然，这可以重做，但是类似于...

[http://jsfiddle.net/LAWNQ/](http://jsfiddle.net/LAWNQ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-05T15:43:44.067

如果您对图像的多个来源感兴趣，以便它们可以更愉快地放大，您可能想尝试其中一种：

*   Scott Jehl 流行的[图片](https://github.com/scottjehl/picturefill)填充 polyfill ，它可以“自动”交换图像
*   我的[Jquery.Pikshur 插件](https://github.com/geekytime/jquery.pikshur)，如果你喜欢这种东西，它会给你更细粒度的控制

# bash - OS X GNU-Screen Breaking 着色

> ID：11822991
> 
> 赞同：1
> 
> 时间：2012-08-06T05:36:57.673
> 
> 标签：bash, shell, colors, terminal, gnu-screen

我`.bash_profile`在我的 Mac OS X 上定义了如下着色：

```
# ls color alias
alias ls='ls -G'

# Colours
export CLICOLOR=1
export LSCOLORS=GxFxCxDxBxegedabagaced
BLACK="\[\033[0;30m\]"
DARK_GRAY="\[\033[1;30m\]"
LIGHT_GRAY="\[\033[0;37m\]"
WHITE="\[\033[0;37m\]"
RED="\[\033[0;31m\]"
RED_BOLD="\[\033[1;31m\]"
YELLOW="\[\033[0;33m\]"
YELLOW_BOLD="\[\033[1;33m\]"
GREEN="\[\033[0;32m\]"
GREEN_BOLD="\[\033[1;32m\]"
BLUE="\[\033[0;34m\]"
BLUE_BOLD="\[\033[1;34m\]"
CYAN="\[\033[0;36m\]"
CYAN_BOLD="\[\033[1;36m\]"
PURPLE="\[\033[0;35m\]"
PURPLE_BOLD="\[\033[1;35m\]"
BROWN="\[\033[0;33m\]"

# Terminal colours
export CLICOLOR=1
export XTERM=xterm-color
export LSCOLORS=BxFxCxDxGxegedabagacad 
```

我还注意到，当我使用 GNU-Screen（总是如此）时，颜色非常不同。红色变成黄色，橙色变成黄色，引号之间的任何东西都从紫色变成绿色。这似乎发生在 Emacs 中，主要是因为 Emacs 显示各种不同的颜色。

我还有一个 ps1 提示符，它还显示了我`git`在目录中的当前分支。这不会改变它的颜色。

我的第一个问题是，这些颜色在哪里定义？GNU-Screen 为什么以及如何改变颜色？为我的终端着色的最佳方法是什么？

我的第二个问题是，当我将我`.bash_profile`的 Mac OS X 复制到我通过 SSH 连接的 CentOS 服务器时，颜色不一样。Mac 是否使用与 CentOS 不同的颜色代码？如果是这样，我怎样才能标准化我的两种颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:26:08.170

您的本机终端仿真和屏幕认为它可能在支持的颜色数量上不一致。

*   `TERM`启动前后的值是`screen`多少？

*   两种情况的输出是`tput colors`什么？

为服务器和 Max OS 终端报告这些。

* * *

感谢您报告。服务器假定支持的颜色多于 OSX 终端物理支持的颜色。

尝试用 否决 CentOS 上的 TERM `TERM=xterm-color`，或从 linux 上的 rc 文件/配置文件中删除任何 TERM 设置，并让操作系统从 ssh 中获取正确的值。

# html - 在另一个不同的应用程序中调用一个应用程序的 Struts 动作

> ID：11822997
> 
> 赞同：0
> 
> 时间：2012-08-06T05:37:18.197
> 
> 标签：html, struts2, action

我有一个基于 struts 的 application1（纯 java 中），它使用 .vm 进行页面设计，如仪表板（图表、图形等）。现在我有另一个 application2 (php)，我想在 application2 中调用 application1 的仪表板页面。application1 还要求提供登录凭据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:15:36.503

您始终可以使用 URL 从您的 PHP 代码中调用 Struts2 操作，并且任何附加参数只能作为查询字符串传递。

例如，如果你想调用一个动作，即你的 struts2 应用程序的“my-action”，你需要点击类似的 URL

```
www.yourapplication.com/my-action 
```

您只需要在 struts.xml 文件中进行操作配置，即可将请求发送到受尊重的操作。任何附加参数都可以作为查询字符串传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:19:37.030

我对你的申请没有完全的了解。但据我了解，您是在 PHP 中调用 java。您已经登录 PHP，但是在点击 java 应用程序时，它并没有在寻找您的登录凭据，而是再次要求登录。

根据我的想法，在调用 java 时，您必须将登录凭据传递给 java，否则它无法理解。因为应用不同。在调用 java 时你可以做什么，在代码内部你有一个登录详细信息，比如用户名和密码，都保存在 html 隐藏字段中，因为你在 java 中处理了哪些参数。基于 java 中的隐藏字段参数名称，它将自动获取登录凭据....

**HTML**：

```
<input name="username" value="anitha"> 
```

**Struts2.action**：

```
//setters/getters

private String username; 
```