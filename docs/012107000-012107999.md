# StackOverflow 问答 12107000-12107999

# c3p0 - c3p0 连接池线程是否安全..？

> ID：12107001
> 
> 赞同：0
> 
> 时间：2012-08-24T09:50:00.247
> 
> 标签：c3p0

嗨，这个钱德拉谢卡，

当我一次发布多个请求（100）时，它会创建 c3p0 实例。

# 前任：：

```
 [AbstractPoolBackedDataSource] Initializing c3p0 pool...
 com.mchange.v2.c3p0.PoolBackedDataSource@3b9421d5 [ connectionPoolDataSource -> com.mchange.v2.c3p0.WrapperConnectionPoolDataSource@8f5cd4d1 [ acquireIncrement -> 5, acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> true, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, debugUnreturnedConnectionStackTraces -> true, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> 1hge2v08pob8zy1nl2rit|1474b36, idleConnectionTestPeriod -> 3600, initialPoolSize -> 10, maxAdministrativeTaskTime -> 600, maxConnectionAge -> 0, maxIdleTime -> 18000, maxIdleTimeExcessConnections -> 0, maxPoolSize -> 50, maxStatements -> 0, maxStatementsPerConnection -> 0, minPoolSize -> 10, nestedDataSource -> com.mchange.v2.c3p0.DriverManagerDataSource@3a7ecbf6 [ description -> null, driverClass -> null, factoryClassLocation -> null, identityToken -> 1hge2v08pob8zy1nl2rit|87f988, jdbcUrl -> jdbc:mysql://localhost:3306/tiscover, properties -> {user=******, password=******} ], preferredTestQuery -> null, propertyCycle -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> false, unreturnedConnectionTimeout -> 600, usesTraditionalReflectiveProxies -> false; userOverrides: {} ], dataSourceName -> null, factoryClassLocation -> null, identityToken -> 1hge2v08pob8zy1nl2rit|6c2668, numHelperThreads -> 10 ]
13:24:16,003 INFO  [AbstractPoolBackedDataSource]
 Initializing c3p0 pool... com.mchange.v2.c3p0.PoolBackedDataSource@38d1c65b [ connectionPoolDataSource -> com.mchange.v2.c3p0.WrapperConnectionPoolDataSource@efa9b134 [ acquireIncrement -> 5, acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> true, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, debugUnreturnedConnectionStackTraces -> true, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> 1hge2v08pob8zy1nl2rit|d46725, idleConnectionTestPeriod -> 3600, initialPoolSize -> 10, maxAdministrativeTaskTime -> 600, maxConnectionAge -> 0, maxIdleTime -> 18000, maxIdleTimeExcessConnections -> 0, maxPoolSize -> 50, maxStatements -> 0, maxStatementsPerConnection -> 0, minPoolSize -> 10, nestedDataSource -> com.mchange.v2.c3p0.DriverManagerDataSource@f3230993 [ description -> null, driverClass -> null, factoryClassLocation -> null, identityToken -> 1hge2v08pob8zy1nl2rit|b31fb1, jdbcUrl -> jdbc:mysql://localhost:3306/tiscover, properties -> {user=******, password=******} ], preferredTestQuery -> null, propertyCycle -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> false, unreturnedConnectionTimeout -> 600, usesTraditionalReflectiveProxies -> false; userOverrides: {} ], dataSourceName -> null, factoryClassLocation -> null, identityToken -> 1hge2v08pob8zy1nl2rit|9861d7, numHelperThreads -> 10 ]
13:24:16,004 INFO  [AbstractPoolBackedDataSource] 
Initializing c3p0 pool... com.mchange.v2.c3p0.PoolBackedDataSource@3b6dc297 [ connectionPoolDataSource -> com.mchange.v2.c3p0.WrapperConnectionPoolDataSource@433920d4 [ acquireIncrement -> 5, acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> true, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, debugUnreturnedConnectionStackTraces -> true, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> 1hge2v08pob8zy1nl2rit|3561b9, idleConnectionTestPeriod -> 3600, initialPoolSize -> 10, maxAdministrativeTaskTime -> 600, maxConnectionAge -> 0, maxIdleTime -> 18000, maxIdleTimeExcessConnections -> 0, maxPoolSize -> 50, maxStatements -> 0, maxStatementsPerConnection -> 0, minPoolSize -> 10, nestedDataSource -> com.mchange.v2.c3p0.DriverManagerDataSource@4084843c [ description -> null, driverClass -> null, factoryClassLocation -> null, identityToken -> 1hge2v08pob8zy1nl2rit|3f9de3, jdbcUrl -> jdbc:mysql://localhost:3306/tiscover, properties -> {user=******, password=******} ], preferredTestQuery -> null, propertyCycle -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> false, unreturnedConnectionTimeout -> 600, usesTraditionalReflectiveProxies -> false; userOverrides: {} ], dataSourceName -> null, factoryClassLocation -> null, identityToken -> 1hge2v08pob8zy1nl2rit|6dfb07, numHelperThreads -> 10 ]
13:24:16,004 INFO  [AbstractPoolBackedDataSource] 
Initializing c3p0 pool... com.mchange.v2.c3p0.PoolBackedDataSource@3bcf7210 [ connectionPoolDataSource -> com.mchange.v2.c3p0.WrapperConnectionPoolDataSource@896b85d4 [ acquireIncrement -> 5, acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> true, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, debugUnreturnedConnectionStackTraces -> true, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> 1hge2v08pob8zy1nl2rit|16e47cb, idleConnectionTestPeriod -> 3600, initialPoolSize -> 10, maxAdministrativeTaskTime -> 600, maxConnectionAge -> 0, maxIdleTime -> 18000, maxIdleTimeExcessConnections -> 0, maxPoolSize -> 50, maxStatements -> 0, maxStatementsPerConnection -> 0, minPoolSize -> 10, nestedDataSource -> com.mchange.v2.c3p0.DriverManagerDataSource@f06dd726 [ description -> null, driverClass -> null, factoryClassLocation -> null, identityToken -> 1hge2v08pob8zy1nl2rit|bd7db5, jdbcUrl -> jdbc:mysql://localhost:3306/tiscover, properties -> {user=******, password=******} ], preferredTestQuery -> null, propertyCycle -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> false, unreturnedConnectionTimeout -> 600, usesTraditionalReflectiveProxies -> false; userOverrides: {} ], dataSourceName -> null, factoryClassLocation -> null, identityToken -> 1hge2v08pob8zy1nl2rit|1e616dc, numHelperThreads -> 10 ]
13:24:16,006 INFO  [AbstractPoolBackedDataSource] 
```

....等 100 次。

这背后的含义是什么，是否创建了 100 个连接池实例..？c3p0 连接池不是线程安全的吗？如果是这样，我们将如何处理..？

请任何人帮助我。

提前致谢， ChandraShekhar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:57:30.713

首先，连接一次只能在与数据库交互时运行。如果您跨多个线程共享连接，则行为将是随机的。理想情况下，当您想与数据库交互时，您只需从池中获得一个连接，例如运行一些 INSERT/UPDATE/DELETE 语句并获取更新计数或运行 SELECT 语句并读取结果集，然后关闭所有资源（即.ResultSets、语句和连接）。

如果连接来自连接池，则对此类连接的 close() 调用由池处理以将连接返回池。

您打印的语句是来自池程序的关于创建的连接池的信息。

# maven - 如何使用 Jetty 在一个端口中运行不同的 Web 项目

> ID：12107013
> 
> 赞同：2
> 
> 时间：2012-08-24T09:50:33.173
> 
> 标签：maven, jetty

我有一个关于 Maven 的问题。使用 Maven+Jetty 非常容易。如果有人知道如何使用 Jetty 在一个端口中运行不同的 Web 项目？我需要使用Jetty，实现可以同时支持热代码和调试项目的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T03:16:48.823

假设结构是

主要的

l_ main-a

l_主-b

而main-a是主模块。main-b是用来模拟静态资源服务的。你可以在jetty中运行两个web应用。

可以在main-a中部署jetty，main-a完成后，再上传main-b

Xml 代码：

```
<plugin>    
<groupId>org.mortbay.jetty</groupId>    
<artifactId>maven-jetty-plugin</artifactId>    
<configuration>    
    <webApp>${basedir}/target/main-a</webApp>    
    <scanIntervalSeconds>10</scanIntervalSeconds>    
    <contextPath>/main-a</contextPath>    
    <contextHandlers>    
        <contextHandler implementation="org.mortbay.jetty.webapp.WebAppContext">    
            <war>${project.parent.basedir}/main-b/target/main-b.war</war>    
            <contextPath>/main-b</contextPath>    
        </contextHandler>    
    </contextHandlers>    
</configuration> 
```

然后在main-b生成war包后，执行mvn jetty:run in main-a.然后你可以同时运行main-a和main-b和jetty。

# python - 在 django 模板上使用 keys()

> ID：12107021
> 
> 赞同：1
> 
> 时间：2012-08-24T09:50:53.743
> 
> 标签：python, django, django-templates

这是一个使用 dict.keys() 的快速问题

我在 py 文件 Ex 中返回一个字典：

```
response['dict'] = {'a': [1,2,4], 'b': [5,6,7]} 
```

在 html 中，我尝试使用键循环

```
{% if dict %}
  {% for list in dict.keys() %}
    list
  {% endfor %}
{endif} 
```

这是抛出一个错误。

> TemplateSyntaxError：无法解析剩余部分：来自 'dict.keys() 的'keys()'

在这里需要帮助。如何在 Django 中使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T09:55:17.093

```
{% if dict %}
  {% for key, value in dict.items %}
    list
  {% endfor %}
{endif} 
```

**编辑：**

`{% if dict %}`不需要 - 如果给定上下文的变量是空的（或者如果它是空字典），它会默默地传递：

```
 {% for key, value in dict.items %}
    list
  {% endfor %} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-24T09:55:22.940

这可能是因为`dict`是 Python 中的保留关键字。尝试

```
{% if d %}
  {% for key in d.keys() %}
    list
  {% endfor %}
{endif} 
```

或者干脆

```
{% if d %}
  {% for key in d %}
    list
  {% endfor %}
{endif} 
```

默认情况下，python 中字典上的迭代器是键上的，因此您不必指定您想要键而不是`.items()`or `.values()`。

# android - AlarmManager 在设置间隔时间并在其他活动中取消时不起作用

> ID：12107024
> 
> 赞同：1
> 
> 时间：2012-08-24T09:51:03.473
> 
> 标签：android

我使用警报管理器每 30 秒调用一次 Web 服务。我在登录应用程序时注册它。但它每 3 秒被调用一次。此外，在其他活动中，我正在取消它，但它也没有被取消。

注册码：

```
Intent intent = new Intent(this, MyBroadcastReceiver.class); 
intent.putExtra("usrid", getIntent().getStringExtra("usrid")); 
PendingIntent pendingIntent =PendingIntent.getBroadcast(this.getApplicationContext(), 234324243, intent, 0); 
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE); alarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime()+2000, 30*1000, pendingIntent); 
Toast.makeText(this, "Alarm set in 10 seconds", Toast.LENGTH_LONG).show(); 
```

为了取消它，代码是：

```
Intent intent = new Intent(this, MyBroadcastReceiver.class);
intent.putExtra("usrid", getIntent().getStringExtra("usrid"));
PendingIntent pendingIntent = PendingIntent.getBroadcast(this.getApplicationContext(), 234324243, intent,0);
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
alarmManager.cancel(pendingIntent); 
```

问题是什么。请帮忙。提前谢谢。

# php - 用php建立链接？

> ID：12107027
> 
> 赞同：-2
> 
> 时间：2012-08-24T09:51:12.563
> 
> 标签：php, date, for-loop

我想要这种链接

```
<li><a href="arhiva?year=2009">Kamp 2009/10</a></li>
<li><a href="arhiva?year=2007">Kamp 2007/08</a></li> 
```

但是明年我想自动添加新的链接

```
<li><a href="arhiva?year=2011">Kamp 2011/12</a></li> 
```

如何使用 PHP 循环来做到这一点`for`，我有变量`$today = date("Y");`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:19:25.103

干得好 ：

```
<?php

    $currentYear = date("Y"); // same as your $today variable

    for ($i = 2007; $i < $currentYear; $i++) {
        $nextYear = date("y",mktime(0, 0, 0, date("m"),   date("d"),   $i+1));
        echo "<li><a href=\"arhiva?year=$i\">Kamp $i/$nextYear</a></li>";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:57:34.310

我错过了什么吗？

```
<?php
    for ($i = 2007; $i <= $today; $i++) {
        echo "<li><a href=\"arhiva?year=$i\">Kamp $i/08</a></li>";
    }
?> 
```

# android - 如何添加一个开关到android操作栏？

> ID：12107031
> 
> 赞同：55
> 
> 时间：2012-08-24T09:51:29.430
> 
> 标签：android, android-layout

我想添加一个类似于 jellybean 原生外观的按钮开关。（视图顶部的蓝色/灰色开关） ![在此处输入图像描述](../Images/d9d6bcac40a4b361a9976b22d274e282.png)

文档显示了如何在那里创建菜单或添加图标，但没有说明如何添加自定义元素。例如。一个开关。 [http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-08-11T14:04:34.167

为交换机创建布局`switch_layout.xml`。菜单的自定义布局应始终为`RelativeLayout`

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <Switch
        android:id="@+id/switchForActionBar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="" />

</RelativeLayout> 
```

然后，在您`mainmenu.xml`添加项目如下

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/myswitch"
        android:title=""
        android:showAsAction="always"
        android:actionLayout="@layout/switch_layout"
    />   
</menu> 
```

`mainmenu.xml`在你的活动中，像往常一样充气

```
getMenuInflater().inflate(R.menu.mainmenu, menu);
return true; 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-12-05T20:11:53.840

终于找到了我的问题：对于那些使用新 AppCompat 的人，你应该使用`android.support.v7.widget.SwitchCompat`而不是`Switch`在 switch 布局上......否则，它不会显示在`ActionBar`（假设你也在使用 AppCompat ActionBar）上，好吧， actionLayout 属性不起作用，必须在代码中设置。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/switchView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">

    <android.support.v7.widget.SwitchCompat
        android:id="@+id/switchForActionBar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="" />

</RelativeLayout> 
```

然后在代码中设置布局：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.menu_main, menu);
    MenuItem item = menu.findItem(R.id.on_off_switch);
    item.setActionView(R.layout.on_off_switch);
    return true;
} 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2015-01-04T16:06:34.873

如果小部件未出现在操作栏中，则可能是因为您将 appCompat 用于操作栏。要解决此在 menu.xml 中的“showAsAction”和“actionLayout”前面切换“android:”到**“app:”的问题**

将项目添加到 xml，使用 app: 代替 android:

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
            <item
                android:id="@+id/myswitch"
                android:title=""
                app:showAsAction="always"
                app:actionLayout="@layout/switch_layout"
            />   
        </menu> 
```

制作用于“app:actionLayout”
switch_layout的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >
    <Switch
        android:id="@+id/switchAB"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        />
</RelativeLayout> 
```

像往常一样膨胀 ActionBarActivity 中的菜单

```
 getMenuInflater().inflate(R.menu.mainmenu, menu);
    return true; 
```

如果没有出现，这应该会使开关出现在您的操作栏中。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2018-09-17T12:54:18.570

对于那些想要添加的人，

## 选中将侦听器更改为同一交换机

科特林

```
override fun onCreateOptionsMenu(menu: Menu?): Boolean {
    menuInflater.inflate(R.menu.menu_main, menu)
    val item = menu!!.findItem(R.id.my_switch_item)
    item.setActionView(R.layout.switch_layout)

    val mySwitch = item.actionView.findViewById(R.id.switch_id)
    mySwitch.setOnCheckedChangeListener(object : CompoundButton.OnCheckedChangeListener{
        override fun onCheckedChanged(p0: CompoundButton?, isChecked: Boolean) {
            // do what you want with isChecked
        }
    })

    return true
} 
```

爪哇

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu_main, menu);
    MenuItem item = menu.findItem(R.id.my_switch_item);
    item.setActionView(R.layout.switch_layout);

    Switch mySwitch = item.getActionView().findViewById(R.id.switch_id);
    mySwitch.setOnCheckedChangeListener(new OnCheckedChangeListener() {
         @Override
         public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                  // do something based on isChecked
         }
    });
    return true;
} 
```

> PS您可以更改对 Switch 或 SwitchCompat 的引用

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-12-05T19:13:40.557

Ezequiel 提供的解决方案非常棒且有效。这是另一种方法：

定义您的自定义布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" >
    <Switch
        android:id="@+id/actionbar_switch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="" />
</RelativeLayout> 
```

以编程方式膨胀它：

```
ActionBar actionBar = getSupportActionBar();
actionBar.setCustomView(R.layout.actionbar_top);
actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_HOME | ActionBar.DISPLAY_SHOW_CUSTOM);
...
Switch button = (Switch) findViewById(R.id.actionbar_switch); 
```

# amazon - Amazon Elastic Beanstalk Apache 访问日志的位置

> ID：12107034
> 
> 赞同：1
> 
> 时间：2012-08-24T09:51:46.373
> 
> 标签：amazon, amazon-elastic-beanstalk, access-log

我正在四处寻找访问日志的位置，试图在运行 PHP5 而不是 JAVA 的 beanstalk 中的 EC2 实例上找到访问日志的位置。

我查看了 /var/log/httpd 并且那里的 access_log 是空的。

此外，AWS 控制面板日志不显示访问日志。

有谁知道我在哪里可以获得这些访问日志？

# google-app-engine - 我的 appengine 应用程序现在无法分享到 Twitter。新的 Twitter API 限制？

> ID：12107036
> 
> 赞同：0
> 
> 时间：2012-08-24T09:51:47.167
> 
> 标签：google-app-engine, twitter

我有一个使用 AppEngine/python 作为后端的移动应用程序。用户可以在 Twitter 和 Facebook 上登录并分享他们的内容。

从昨天开始的问题是用户无法登录或分享 twitter。（facebook 没问题）我怀疑这可能与新的 Twitter API 限制有关，我昨晚一直在寻找答案，但找不到，试图看看其他人是否有这个问题。

日志中的错误信息是：...

> ApplicationError：2 Traceback（最近一次调用最后一次）：
> 
> 文件“/base/python_runtime/python_lib/versions/1/google/appengine/ext/webapp/_webapp25.py”，第 712 行，**调用** handler.post(*groups) 文件“/base/data/home/apps/weddarapp /4.361251603797223739/push.py”，第 83 行，在 self.get() 后
> 
> 文件“/base/data/home/apps/weddarapp/4.361251603797223739/push.py”，第 78 行，在 get 方法 = urlfetch.POST）
> 
> 文件“/base/data/home/apps/weddarapp/4.361251603797223739/oauth.py”，第 204 行，在 make_request protected, method, headers).get_result()
> 
> 文件“/base/python_runtime/python_lib/versions/1/google/appengine/api/apiproxy_stub_map.py”，第 604 行，在 get_result 返回 self.__get_result_hook(self)
> 
> _get_fetch_result 中的文件“/base/python_runtime/python_lib/versions/1/google/appengine/api/urlfetch.py​​”，第 369 行引发 DownloadError(str(err))
> 
> 下载错误：应用程序错误：2

...

我知道它是 oAuth，但我们这边没有任何改变，所以它一定来自 twitter。我不认为这是巧合。找不到我们的 oAuth.py 文件的更新版本。

谢谢

# c - 多进程操作系统中的垃圾值

> ID：12107042
> 
> 赞同：0
> 
> 时间：2012-08-24T09:52:08.687
> 
> 标签：c, linux, memory-management, kernel

自操作系统会话开始以来，分配的内存是否保存垃圾值？在我们将其命名为程序运行时会话中的垃圾值之前，它是否具有某种意义？如果是，那为什么？

我需要一些关于 linux 内核编程、设备驱动程序编程的学习材料的建议，并且还想了解计算机设备的实际工作原理。我陷入了诸如“垃圾价值”之类的情况，并且觉得我还必须学习其他东西才能更好地理解编程语言。我正在自学，遇到很多令人困惑的情况。任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T10:25:15.500

“垃圾价值”是一个俚语，意思是“我不知道那里有什么价值，或者为什么，因此我不会使用这个价值”。它是“无用的废话”意义上的“垃圾”，有时它也是“别人的剩菜”意义上的“垃圾”。

形式上，C 中未初始化的内存采用“不确定值”。这可能是由 C 实现写在那里的一些特殊值，或者它可能是同一内存的早期用户“遗留”的东西。因此，例如：

*   C 运行时的调试版本可能会用一个引人注目的值填充新分配的内存，因此，如果您在调试器中看到它时您期望自己存储的数据，您可以合理地得出结论，要么忘记初始化它，要么你找错地方了。
*   “正确”操作系统的内核将在第一次分配给进程时覆盖内存，以避免一个进程看到“属于”另一个进程的数据，并且出于安全原因，这些数据不应跨越进程边界泄漏。通常它会用一些已知的值覆盖它，比如 0。
*   如果您`malloc`记忆，在其中写一些东西，然后再写`free`一些`malloc`记忆，您可能会再次获得相同的记忆，其先前的内容基本上完好无损。但从形式上讲，您新分配的缓冲区仍然是“未初始化的”，即使它恰好与您释放它时的内容相同，因为形式上它是一个全新的字符数组，恰好与旧的具有相同的地址。

在 C 中不使用“不确定值”的一个原因是标准允许它成为“陷阱表示”。当您将某些类型的某些不可能的值加载到寄存器中时，有些机器会注意到，并且您会遇到硬件故障。因此，如果内存先前用于，例如 an `int`，但随后该值被读取为 a `float`，那么谁能说剩余的位模式是否代表所谓的“信号 NaN”，这会停止程序？如果您将值作为指针读取并且它与类型不对齐，也会发生同样的情况。甚至整数类型也允许具有“奇偶校验位”，这意味着读取垃圾值`int`可能具有未定义的行为。在实践中，我认为任何实现实际上都没有陷阱表示`int`，并且我怀疑如果您只是读取指针值，任何人都会检查未对齐的指针——尽管如果您取消引用它，它们可能会检查。但如果不谨慎，C 程序员就一事无成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T09:58:39.317

> **什么是垃圾价值？**

当您在内存位置遇到值并且无法确定这些值应该是什么时，那么这些值对您来说就是垃圾值。即：值为***Indeterminate***。
最常见的是，当您使用变量但未对其进行初始化时，该变量具有 Indeterminate 值并被称为具有垃圾值。请注意，使用 Uninitialized 变量会导致***Undefined Behavior***，这意味着该程序不是有效的 C/C++ 程序，它可能会显示（字面上）任何行为。

> **为什么特定值存在于该位置？**

今天的大多数操作系统都使用***[虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)***的概念。用户程序看到的内存地址是虚拟内存地址而不是物理地址。虚拟内存的实现将虚拟地址空间划分为页面，即连续的虚拟内存地址块。一旦使用完毕，这些页面通常至少有 4 KB。这些页面没有明确擦除其内容，它们仅被标记为可重用，因此如果未正确初始化，它们仍包含旧内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T09:58:39.630

在典型的操作系统上，您的用户空间应用程序只能看到一定范围的*虚拟内存*。由内核将此虚拟内存映射到实际的物理内存。

当一个进程请求一块（虚拟）内存时，它最初会保留其中的任何内容——它可能是进程的另一部分之前使用的重用内存，也可能是完全不同的内存进程一直在使用......或者它可能根本没有被触摸过并且处于您打开机器电源时的任何状态。

通常没有人会代表您用零（或任何其他同样任意的值）擦除内存页面，因为没有意义。完全取决于你的应用程序以任何你喜欢的方式使用内存，如果你还是要写它，那么你不在乎它之前有什么。

*因此，在 C 中，在未定义行为*的痛苦下，根本不允许在写入变量之前读取它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T10:01:31.670

如果您声明一个变量而不将其初始化为特定值，则它可能包含一个先前由另一个程序分配的值，该程序已释放该内存，或者它可能只是计算机启动时的随机值（ iirc，PC 过去在启动时将所有 RAM 初始化为 0，因为早期版本的 DOS 需要它，但新计算机不再这样做）。例如，您不能假设该值为零。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T10:05:25.473

**垃圾值**，例如在 C 中，通常指的是如果您只是保留内存但从不初始化它，它将保存随机值，因为它还没有初始化（C 不会自动为您这样做；它会只是开销，而 C 旨在尽可能少地开销）。内存中的随机值是以前存在的任何东西的剩余物。

这些先前的值保留在那里，因为通常将内存设置为零 - 或任何其他值 - 没有太多用处 - 稍后将再次被覆盖。因为对于一般情况，读取未初始化的内存没有用（除非您想利用可能的安全问题 - 请参阅内存实际归零的特殊情况：[内核归零内存？](https://stackoverflow.com/questions/6004816/kernel-zeroes-memory)）。

# android - 如何修改ListView的点击样式

> ID：12107045
> 
> 赞同：0
> 
> 时间：2012-08-24T09:52:19.217
> 
> 标签：android, listview

我使用下面的代码来修改 ListView 项目单击的样式。
list_four_corner_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item 
        android:state_pressed="true" 
        android:drawable="@drawable/list_four_corner_selected" 
    />
    <item
        android:drawable="@drawable/list_four_corner_unselect" 
    />
</selector> 
```

list_four_corner_unselect.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient android:startColor="#FFFFFF"
        android:endColor="#FFFFFF"
        android:angle="270"/>
    <corners android:bottomLeftRadius="10dip"
        android:bottomRightRadius="10dip"
        android:topRightRadius="10dip"
        android:topLeftRadius="10dip" />
    <stroke
        android:width="1dp"
        android:color="#dddddd"
        android:dashWidth="10dp"
        android:dashGap="0dp" />
</shape> 
```

list_four_corner_selected.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient android:startColor="#B7D5F9"
        android:endColor="#B7D5F9"
        android:angle="270"/>
    <corners android:bottomLeftRadius="10dip"
        android:bottomRightRadius="10dip"
        android:topLeftRadius="10dip"
        android:topRightRadius="10dip" />
</shape> 
```

BaseAdapter 中的代码如下：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewTag viewTag;
    if(convertView == null) {
        convertView = myInflater.inflate(R.layout.row_item, null);
        viewTag = new ViewTag((TextView)convertView.findViewById(R.id.row_title));
        convertView.setTag(viewTag);
    }
    else {
        viewTag = (ViewTag)convertView.getTag();
    }
    convertView.setBackgroundResource(R.drawable.list_four_corner_selector);
} 
```

但是当我单击项目时，项目的四个角将显示默认颜色。
我想让默认隐藏。
我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T09:55:07.647

尝试[`android:listSelector`](http://developer.android.com/reference/android/widget/AbsListView.html#attr_android%3alistSelector)在`ListView`.

# iphone - 杀掉应用后弹出本地通知

> ID：12107046
> 
> 赞同：1
> 
> 时间：2012-08-24T09:52:23.237
> 
> 标签：iphone, ios, uilocalnotification

我已经在我的应用程序中实现了本地通知，我在以下场景中遇到了问题：

场景：应用程序启动，位置通知将在当前日期一周后显示在登录屏幕中，我已使用凭据登录，登录后双击设备的主页按钮（底部中心物理键）以调出最近使用的应用程序栏然后点击并按住应用程序图标以便能够杀死应用程序。杀死应用程序后，通知弹出窗口无需等待一周时间即可呈现

下面是代码：

```
- (void)applicationWillTerminate:(UIApplication *)application
{
    if (iPhoneClientConfig::getInstance()->getReminder() == RS_NONE) {
        [[UIApplication sharedApplication] cancelAllLocalNotifications];
    }
    else {
        int daysToAdd;
        NSString *alertText;
        UILocalNotification *localNotification = [[UILocalNotification alloc] init];
        [[UIApplication sharedApplication] cancelAllLocalNotifications];
        if (iPhoneClientConfig::getInstance()->getReminder() == RS_MONTH) {
            daysToAdd = 60*60*24*30;
            alertText = [Localization getLanguage:@"reminder_message_month"];
            localNotification.repeatInterval =  NSMonthCalendarUnit;
            [self generateAlertNotifications:daysToAdd withtext:alertText ];
        } else if (iPhoneClientConfig::getInstance()->getReminder() == RS_DAY) {
            daysToAdd = 60*60*24;
            alertText = [Localization getLanguage:@"reminder_message_day"];
            localNotification.repeatInterval =  NSDayCalendarUnit;
        } else if (iPhoneClientConfig::getInstance()->getReminder() == RS_HOUR) {
            daysToAdd = 60*60;
            alertText = [Localization getLanguage:@"reminder_message_hour"];
            localNotification.repeatInterval =  NSHourCalendarUnit;
        } else {
            if (iPhoneClientConfig::getInstance()->getReminder() != RS_WEEK) {
                LOG.error("%s: Unexpetected reminder repeat interval in configuration, fall back to week",__FUNCTION__);
            }
            daysToAdd = 60*60*24*7;
            alertText = [Localization getLanguage:@"reminder_message_week"];
            localNotification.repeatInterval =  NSWeekCalendarUnit;
            [self generateAlertNotifications:daysToAdd withtext:alertText];
        }

        NSDate *today = [NSDate date];
        NSDate *newDate = [today addTimeInterval:daysToAdd];
         NSLog(@"newDate:%@",newDate);
        // Set up the fire time
        localNotification.fireDate = newDate;
        localNotification.timeZone = [NSTimeZone defaultTimeZone];

        // Notification details and Set the action button
        localNotification.alertBody = alertText;
        localNotification.alertAction = [Localization getLanguage:@"local_notif_alert"];
        localNotification.soundName = UILocalNotificationDefaultSoundName;
        //Schedule LocalNotification
        [[UIApplication sharedApplication] scheduleLocalNotification:localNotification];
        NSLog(@"local_notif_alert:%@",localNotification);
        [localNotification release];
    }
} 
```

我在控制台中有开火日期和本地通知，如下所示：

```
Date:2012-09-01 10:49:08 +0000

local_notif_alert:<UIConcreteLocalNotification: 0xd006d20>{fire date = Saturday, September 1, 2012 4:19:08 PM India Standard Time, time zone = Asia/Kolkata (IST) offset 19800, repeat interval = NSWeekCalendarUnit, repeat count = UILocalNotificationInfiniteRepeatCount, next fire date = Saturday, September 1, 2012 4:19:08 PM India Standard Time} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T09:56:59.270

当然。一旦安排好它们，本地通知就有了自己的生命。
这是你必须做的：打电话

```
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

例如在`applicationWillTerminate:`.

至于过早出现的意外通知：`NSLog`通知详细信息并确保您的日程安排正确。

# java - 如何制作 BufferedReader 的副本？

> ID：12107049
> 
> 赞同：16
> 
> 时间：2012-08-24T09:52:38.833
> 
> 标签：java, io, bufferedreader

我正在使用`BufferedReader`构造函数制作现有`BufferedReader`.

```
BufferedReader buffReader = new BufferedReader(originalBuffReader); 
```

新`buffReader`的工作正常，但是当我这样做时，`originalBuffReader.readLine()`它给了我`null`. 有没有其他方法可以在`bufferReader`不影响我原来`BufferedReader`的 .

仅供参考：我将 bufferReader 作为我的方法的输入；而且我无权访问源代码。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-24T09:55:06.717

> ***任何其他方式我都可以制作一个新的 bufferReader 而不会影响我原来的 BufferReader***

没有直接的方法可以通过创建两个`BufferedReader`s 来解决它。（两个读取器将使用来自同一源的数据。）您必须在源上添加另一层缓冲，以便每个读取器可以独立读取流。

这可以通过结合[`TeeInputStream`](https://commons.apache.org/proper/commons-io/javadocs/api-release/index.html?org/apache/commons/io/input/TeeInputStream.html)Apache Commons 和 a来实现[`PipedInputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/PipedInputStream.html)，[`PipedOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/PipedOutputStream.html)如下所示：

```
import java.io.*;
import org.apache.commons.io.input.TeeInputStream;
class Test {
    public static void main(String[] args) throws IOException {

        // Create the source input stream.
        InputStream is = new FileInputStream("filename.txt");

        // Create a piped input stream for one of the readers.
        PipedInputStream in = new PipedInputStream();

        // Create a tee-splitter for the other reader.
        TeeInputStream tee = new TeeInputStream(is, new PipedOutputStream(in));

        // Create the two buffered readers.
        BufferedReader br1 = new BufferedReader(new InputStreamReader(tee));
        BufferedReader br2 = new BufferedReader(new InputStreamReader(in));

        // Do some interleaved reads from them.
        System.out.println("One line from br1:");
        System.out.println(br1.readLine());
        System.out.println();

        System.out.println("Two lines from br2:");
        System.out.println(br2.readLine());
        System.out.println(br2.readLine());
        System.out.println();

        System.out.println("One line from br1:");
        System.out.println(br1.readLine());
        System.out.println();
    }
} 
```

**输出：**

```
One line from br1:
Line1: Lorem ipsum dolor sit amet,      <-- reading from start

Two lines from br2:
Line1: Lorem ipsum dolor sit amet,      <-- reading from start
Line2: consectetur adipisicing elit,

One line from br1:
Line2: consectetur adipisicing elit,    <-- resumes on line 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-18T17:46:28.310

下面是一种考虑从原始 BufferedReader 中创建新 BufferedReader 的方法。

本质上，我们将原始缓冲读取器的内容转储到一个字符串中，然后重新创建一个新的 BufferedReader 对象。为了能够第二次重新读取原始的 BufferedReader，您可以对其进行标记，然后在阅读后，您可以将其重置。

要记住的一件事是您可能希望受到 DDOS 攻击的保护，其中可能会进入一个非常大的缓冲读取器，并且您可能希望避免永远读取并填满内存，您基本上可以在某个点后打破 for 循环或者满足某个条件时。

```
final String originalBufferedReaderDump;
originalBufferedReaderDump.mark(Integer.MAX_VALUE);
for (String line; (line = originalBufferedReader.readLine()) != null; originalBufferedReaderDump+= line);
originalBufferedReader.reset();
final BufferedReader copiedBufferedReader  = new BufferedReader(new InputStreamReader(new ByteArrayInputStream(originalBufferedReaderDump.getBytes()))); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T09:56:43.193

`BufferedReader`在构造函数中为 new传递实例`BufferedReader`不会复制原始 BufferedReader！

你在那里做的是链接两个阅读器，换句话说，你正在缓冲已经缓冲的阅读器实例。当你打电话`readLine()`时，`buffReader`它会打电话`readLine()`。`originalBuffReader`

在此处查看有关流 [链接的更多详细信息：流的链接](http://www.java-tips.org/java-se-tips/java.io/chaining-of-streams.html)

# jquery - 删除当前元素 jquery 手风琴

> ID：12107051
> 
> 赞同：0
> 
> 时间：2012-08-24T09:52:46.370
> 
> 标签：jquery, accordion, element

我有“dinamic”手风琴。单击“addBtn”创建新元素。每个元素都有删除当前元素的“删除”按钮。

**HTML**

```
<div id="accordion">

                        <div id="aE">
                            <div id="aT" class="aT_val"> 
                                <h3></h3>
                            </div>

                            <div id="aC" class="aC_val">
                                <p></p>
                            </div>

                            <div id="deleteBtn" class="deleteBtn"><img src="images/del.png"></div>

                        </div>

                    </div> 
```

**JS**

```
$('#addBtn').click(function() {
        count++;

        $('#accordion').append('<div id="aE' + count + '"><div id="aT' + count + '" class="aT_val"><h3></h3></div><div id="aC' + count + '" class="aC_val"><p></p></div><div id="deleteBtn' + count + '" class="deleteBtn"><img src="images/delete-button.png"></div></div>'); });

$('#deleteBtn' + count).click(function() {
        $('#aE' + count).remove();
    }); 
```

但是“deleteBtn”不会删除元素“aE”。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:56:51.143

`'#aE' + count`正在单击时进行评估，而不是在创建函数时进行评估，因此它将是最后使用的值，`count`而不是创建按钮时的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:02:20.733

#deleteBtn 的 onclick 回调正在与父范围的不同上下文中进行评估。

```
$('#deleteBtn' + count).click(function() {
    // this will always return a fixed number
    $('#aE' + count).remove();
}); 
```

尝试这个

```
$('#deleteBtn' + count).click(function() {
    // this will return a correct id
    var cnt =  this.id.replace('deleteBtn', '');
    $('#aE' + cnt ).remove();
}); 
```

# php - 调整微型 MCE 的大小

> ID：12107052
> 
> 赞同：0
> 
> 时间：2012-08-24T09:52:47.100
> 
> 标签：php, javascript, css, tinymce

我正在使用富文本编辑器创建自定义内容管理系统。我正在使用微型 MCE，但我的内容 div 中的文本区域无法容纳。我有一个`<div></div>` 680px的。我希望 Tiny MCE 适合`<div></div>`。然而它一直在溢出。如何设置 textarea 以适应 680px 的宽度？谢谢。我的代码示例如下

```
<?php
require 'janta_class.php';
$jantaObj = new janta_class();
if (!isset($_GET['pgid']) || empty($_GET['pgid'])) {
    $page_id = 1;
} else {
    $page_id = $_GET['pgid'];
}
if (isset($page_id) && !empty($page_id)) {
    $allowedTags = '<p><strong><em><u><h1><h2><h3><h4><h5><h6><img>';
    $allowedTags.='<li><ol><ul><span><div><br><ins><del>';

    //you might want to escape some literals here
    $page_data = $jantaObj->get_page($page_id);
    $page_content = $page_data['page_content'];
    $page_title = $page_data['page_title'];

    $page_content = strip_tags(stripslashes($page_content), $allowedTags);
}
?>

<!-- TinyMCE -->
<script type="text/javascript" src="./editor/jscripts/tiny_mce/tiny_mce.js"></script>
<script language="javascript" type="text/javascript">
    tinyMCE.init({
        theme : "advanced",
        mode: "exact",
        elements : "rteditor",
        plugins : "autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist,autosave,visualblocks",

        // Theme options
        theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
        theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
        theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
        theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak,restoredraft,visualblocks",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true,

        // Example content CSS (should be your site CSS)
        content_css : "css/content.css",

        // Drop lists for link/image/media/template dialogs
        template_external_list_url : "lists/template_list.js",
        external_link_list_url : "lists/link_list.js",
        external_image_list_url : "lists/image_list.js",
        media_external_list_url : "lists/media_list.js",

        // Style formats
        style_formats : [
            {title : 'Bold text', inline : 'b'},
            {title : 'Red text', inline : 'span', styles : {color : '#ff0000'}},
            {title : 'Red header', block : 'h1', styles : {color : '#ff0000'}},
            {title : 'Example 1', inline : 'span', classes : 'example1'},
            {title : 'Example 2', inline : 'span', classes : 'example2'},
            {title : 'Table styles'},
            {title : 'Table row 1', selector : 'tr', classes : 'tablerow1'}
        ],

        // Replace values for the template plugin
        template_replace_values : {
            username : "Some User",
            staffid : "991234"
        },  
        height:"350px",
        width:"600px"
    });

</script>

<?php //echo $sHeader;   ?>
<form method="post" action="">
    <textarea id="rteditor" name="rteditor" rows="15" cols="80"><?php echo $page_content; ?></textarea>
    <br />
    <input type="submit" name="save" value="Submit" />
    <input type="reset" name="reset" value="Reset" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:57:25.643

解决方案是在tinymce initfunction 中设置宽度。请注意，您将整数放在那里并且不要使用“px”：

```
 width:"680" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T16:42:46.137

不要将宽度与双引号或单引号一起使用。

我有解决办法。

把它像：

```
width: 300, 
```

它应该适合你。我已经用我的代码对其进行了测试。

# python - 在 MatplotlibWidget 中包含 Pandas 图

> ID：12107053
> 
> 赞同：2
> 
> 时间：2012-08-24T09:52:54.097
> 
> 标签：python, matplotlib, pyqt4, pandas

我有一个看起来像这样的熊猫图：

```
ts = pd.Series(randn(1000), index=date_range('1/1/2000', periods=1000))
ts = ts.cumsum()
ts.plot() 
```

我想在我用 Qt Designer 设计的 GUI 中展示它。当我使用 Python(x,y) 时，有一个 MatplotlibWidget，我将它放在我的 Gui 上。但是，我不确定如何让这个小部件显示我之前创建的图，或者这是否可能......？我能够使小部件显示基本图，例如：

```
x = np.linspace(-10, 10)
self.widget.axes.plot(x, x**2)
self.widget.draw() 
```

有什么方法可以让小部件显示我的熊猫图，还是我必须创建一个新类？我该怎么办？当我使用 Qt Designer 时，我可以将这个新的绘图类添加为小部件吗？如何？

谢谢你的帮助！

# extjs - 如何从 Ext JS Grid 的列标题中删除选择器

> ID：12107056
> 
> 赞同：14
> 
> 时间：2012-08-24T09:53:13.717
> 
> 标签：extjs, grid, styles

我想从网格的列标题中删除选择器（具有排序和列选择选项）。我正在使用 Ext JS 4.1.1

![在此处输入图像描述](../Images/b6625fba241f3f9438de399318bc065a.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-24T10:22:45.810

在 Ext3 中，这将通过`menuDisabled: true`在列定义中指定来完成。不过，不确定 Ext4。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-25T17:21:19.783

多年来，这种情况已经发生了变化。

在 4.2.2（2014 年 5 月当前）中，可以为每一列设置一个属性：

```
menuDisabled:true

sortable:false // menu shows but no sort options

hideable:false // menu shows but column name not shown in columns menu

menuDisabled:true // no menu 
```

这些是针对单个列的。对于整个网格标题，另请参阅[http://docs.sencha.com/extjs/4.2.2/#!/api/Ext.grid.header.Container-cfg-enableColumnHide](http://docs.sencha.com/extjs/4.2.2/#!/api/Ext.grid.header.Container-cfg-enableColumnHide)

# java - 如何使用 Java 套接字从远程服务器读取响应

> ID：12107060
> 
> 赞同：0
> 
> 时间：2012-08-24T09:53:40.783
> 
> 标签：java, sockets

我正在创建的 Java 程序的一部分需要与远程机器上的服务通信。那台远程机器正在 Windows 平台上运行服务（我相信是用 Delphi 编写的）。

我需要连接到那台机器，发送命令字符串并接收（字符串）响应。

如果我使用 Linux CLI telnet 会话进行连接，我会得到预期的响应：

```
[dafoot@bigfoot ~]$ telnet [host IP] [host port]
Trying [host IP]...
Connected to [host IP].
Escape character is '^]'.
Welcome to MidWare server
ping
200 OK
ProcessDownload 4
200 OK 
```

在上面的“ping”和“ProcessDownload 4”行是我在终端中输入的，其他行是来自远程系统的响应。

我在我的 Java 类中创建了一个 Main 来调用适当的方法来尝试和测试它（我省略了不相关的东西）：

```
public class DownloadService {
    Socket _socket = null; // socket representing connecton to remote machine
    PrintWriter _send = null; // write to this to send data to remote server
    BufferedReader _receive = null; // response from remote server will end up here

    public DownloadServiceImpl() {
        this.init();
    }

    public void init() {
        int remoteSocketNumber = 1234;
        try {
            _socket = new Socket("1.2.3.4", remoteSocketNumber);
        } catch (IOException e) {
            e.printStackTrace();
        }
        if(_socket !=null) {
            try {
                _send = new PrintWriter(_socket.getOutputStream(), true);
                _receive = new BufferedReader(new InputStreamReader(_socket.getInputStream()));
            } catch (IOException e) {
                e.printStackTrace();
            }
        }       
    }
    public boolean reprocessDownload(int downloadId) {
        String response = null;
        this.sendCommandToProcessingEngine("Logon", null);
        this.sendCommandToProcessingEngine("ping", null);
        this.sendCommandToProcessingEngine("ProcessDownload",     Integer.toString(downloadId));
        try {
            _socket.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return false;
    }
    private String sendCommandToProcessingEngine(String command, String param) {
        String response = null;
        if(!_socket.isConnected()) {
            this.init();
        }
        System.out.println("send '"+command+"("+param+")'");
        _send.write(command+" "+param);
        try {
            response = _receive.readLine();
            System.out.println(command+"("+param+"):"+response);
            return response;
        } catch (IOException e2) {
            e2.printStackTrace();
        }
        return response;
    }
    public static void main(String[] args) {
        DownloadServiceImpl service = new DownloadServiceImpl();
        service.reprocessDownload(0);
    }

} 
```

正如您将在代码中看到的，有几个 sys.out 指示程序何时尝试发送/接收数据。

生成的输出：

```
send 'Logon(null)'
Logon(null):Welcome to MidWare server
send 'ping(null)' 
```

因此，Java 可以连接到服务器以获取“欢迎使用 Midware”消息，但是当我尝试发送命令（'ping'）时，我没有得到响应。

所以问题是：-Java看起来对吗？- 问题可能与字符编码（Java -> windows）有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:59:31.907

您需要刷新输出流：

```
_send.write(command+" "+param+"\n"); // Don't forget new line here!
_send.flush(); 
```

或者，因为您创建了一个 auto-flushing `PrintWriter`：

```
_send.println(command+" "+param); 
```

后者的缺点是行尾可以是`\n`或`\r\n`，具体取决于运行 Java VM 的系统。所以我更喜欢第一个解决方案。

# c# - 在 c# 中使用 android 对此 webservice getdata 代码的 httpmultipart 请求

> ID：12107061
> 
> 赞同：0
> 
> 时间：2012-08-24T09:53:44.137
> 
> 标签：c#, android, web-services, httpclient, multipartentity

嗨，我有一个带有以下代码的 web 服务 IIS：

```
 // Implements multipart/form-data POST in C# http://www.ietf.org/rfc/rfc2388.txt
// http://www.briangrinstead.com/blog/multipart-form-post-in-c
public static class FormUpload
{
    private static readonly Encoding encoding = Encoding.UTF8;
    public static HttpWebResponse MultipartFormDataPost(string postUrl, string userAgent, Dictionary<string, object> postParameters)
    {
        string formDataBoundary = String.Format("----------{0:N}", Guid.NewGuid());
        string contentType = "multipart/form-data; boundary=" + formDataBoundary;

        byte[] formData = GetMultipartFormData(postParameters, formDataBoundary);

        return PostForm(postUrl, userAgent, contentType, formData);
    }
    private static HttpWebResponse PostForm(string postUrl, string userAgent, string contentType, byte[] formData)
    {
        HttpWebRequest request = WebRequest.Create(postUrl) as HttpWebRequest;

        if (request == null)
        {
            throw new NullReferenceException("request is not a http request");
        }

        // Set up the request properties.
        request.Method = "POST";
        request.ContentType = contentType;
        request.UserAgent = userAgent;
        request.CookieContainer = new CookieContainer();
        request.ContentLength = formData.Length;

        // You could add authentication here as well if needed:
        // request.PreAuthenticate = true;
        // request.AuthenticationLevel = System.Net.Security.AuthenticationLevel.MutualAuthRequested;
        // request.Headers.Add("Authorization", "Basic " + Convert.ToBase64String(System.Text.Encoding.Default.GetBytes("username" + ":" + "password")));

        // Send the form data to the request.
        using (Stream requestStream = request.GetRequestStream())
        {
            requestStream.Write(formData, 0, formData.Length);
            requestStream.Close();
        }

        return request.GetResponse() as HttpWebResponse;
    }

    private static byte[] GetMultipartFormData(Dictionary<string, object> postParameters, string boundary)
    {
        Stream formDataStream = new System.IO.MemoryStream();
        bool needsCLRF = false;

        foreach (var param in postParameters)
        {
            // Thanks to feedback from commenters, add a CRLF to allow multiple parameters to be added.
            // Skip it on the first parameter, add it to subsequent parameters.
            if (needsCLRF)
                formDataStream.Write(encoding.GetBytes("\r\n"), 0, encoding.GetByteCount("\r\n"));

            needsCLRF = true;

            if (param.Value is FileParameter)
            {
                FileParameter fileToUpload = (FileParameter)param.Value;

                // Add just the first part of this param, since we will write the file data directly to the Stream
                string header = string.Format("--{0}\r\nContent-Disposition: form-data; name=\"{1}\"; filename=\"{2}\";\r\nContent-Type: {3}\r\n\r\n",
                    boundary,
                    param.Key,
                    fileToUpload.FileName ?? param.Key,
                    fileToUpload.ContentType ?? "application/octet-stream");

                formDataStream.Write(encoding.GetBytes(header), 0, encoding.GetByteCount(header));

                // Write the file data directly to the Stream, rather than serializing it to a string.
                formDataStream.Write(fileToUpload.File, 0, fileToUpload.File.Length);
            }
            else
            {
                string postData = string.Format("--{0}\r\nContent-Disposition: form-data; name=\"{1}\"\r\n\r\n{2}",
                    boundary,
                    param.Key,
                    param.Value);
                formDataStream.Write(encoding.GetBytes(postData), 0, encoding.GetByteCount(postData));
            }
        }

        // Add the end of the request.  Start with a newline
        string footer = "\r\n--" + boundary + "--\r\n";
        formDataStream.Write(encoding.GetBytes(footer), 0, encoding.GetByteCount(footer));

        // Dump the Stream into a byte[]
        formDataStream.Position = 0;
        byte[] formData = new byte[formDataStream.Length];
        formDataStream.Read(formData, 0, formData.Length);
        formDataStream.Close();

        return formData;
    }

    public class FileParameter
    {
        public byte[] File { get; set; }
        public string FileName { get; set; }
        public string ContentType { get; set; }
        public FileParameter(byte[] file) : this(file, null) { }
        public FileParameter(byte[] file, string filename) : this(file, filename, null) { }
        public FileParameter(byte[] file, string filename, string contenttype)
        {
            File = file;
            FileName = filename;
            ContentType = contenttype;
        }
    }
} 
```

从这里获取：[来自 C# 客户端的多部分表单](https://stackoverflow.com/questions/219827/multipart-forms-from-c-sharp-client)

但是现在，在 mi android 应用程序中，我有这个：

```
HttpParams httpParameters = new BasicHttpParams();
            int timeoutConnection = 300000;
            HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
            int timeoutSocket = 300000;
            HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
            HttpClient httpClient = new DefaultHttpClient(httpParameters);
            HttpPost postRequest = new HttpPost("http://172.21.1.87:9999/Service1.svc");
            ByteArrayBody bab = new ByteArrayBody(ficheroAEnviar, "prueba.jpg");
            MultipartEntity reqEntity = new MultipartEntity();            
            postRequest.addHeader("Content-Type", " multipart/form-data");
            reqEntity.addPart("Dictionary", new FileBody(new File(fileUri.toString(), "application/zip")));
            reqEntity.addPart("boundary", new StringBody("envio"));
            postRequest.setEntity(reqEntity);
            HttpResponse response = httpClient.execute(postRequest);
            BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
            String sResponse;
            StringBuilder s = new StringBuilder();
            postRequest.getAllHeaders();

            while ((sResponse = reader.readLine()) != null) {
                s = s.append(sResponse);
            }
            System.out.println("Response: " + s);
        }
        catch (Exception e) {
            // handle exception here
            Log.e(e.getClass().getName(), e.getMessage());
        }
    } 
```

但它返回错误请求 400 错误。我可以使用 c# 代码通过 android 上传多方文件还是需要对某些代码进行任何更改？

有人有一个例子 en c# 和 android 来做这个吗？用于上传大约 10 或 15 MB 的视频。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:08:37.330

不要使用多部分实体，而是使用在这里定义边界很容易尝试

```
HttpURLConnection connection = null;
 DataOutputStream outputStream = null;
DataInputStream inputStream = null;

   String pathToOurFile = "/data/file_to_send.mp3";
    String urlServer = "http://192.168.1.1/handle_upload.php";
  String lineEnd = "\r\n";
String twoHyphens = "--";
String boundary =  "*****";

int bytesRead, bytesAvailable, bufferSize;
byte[] buffer;
int maxBufferSize = 1*1024*1024;

try
{
FileInputStream fileInputStream = new FileInputStream(new File(pathToOurFile) );

URL url = new URL(urlServer);
connection = (HttpURLConnection) url.openConnection();

 // Allow Inputs & Outputs
connection.setDoInput(true);
connection.setDoOutput(true);
connection.setUseCaches(false);

 // Enable POST method
connection.setRequestMethod("POST");

  connection.setRequestProperty("Connection", "Keep-Alive");
  connection.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

 outputStream = new DataOutputStream( connection.getOutputStream() );
outputStream.writeBytes(twoHyphens + boundary + lineEnd);
   outputStream.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\""+pathToOurFile       +"\"" + lineEnd);
outputStream.writeBytes(lineEnd);

 bytesAvailable = fileInputStream.available();
   bufferSize = Math.min(bytesAvailable, maxBufferSize);
buffer = new byte[bufferSize];

// Read file
bytesRead = fileInputStream.read(buffer, 0, bufferSize);

while (bytesRead > 0)
 {
outputStream.write(buffer, 0, bufferSize);
bytesAvailable = fileInputStream.available();
bufferSize = Math.min(bytesAvailable, maxBufferSize);
bytesRead = fileInputStream.read(buffer, 0, bufferSize);
}

outputStream.writeBytes(lineEnd);
outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

// Responses from the server (code and message)
serverResponseCode = connection.getResponseCode();
serverResponseMessage = connection.getResponseMessage();

fileInputStream.close();
outputStream.flush();
outputStream.close();
}
catch (Exception ex)
{
//Exception handling
} 
```

礼貌拉菲尔

# android - Gson 将 JSON 转换为包含对象 HastMap 的对象？

> ID：12107066
> 
> 赞同：0
> 
> 时间：2012-08-24T09:53:58.500
> 
> 标签：android, json, gson

我有一个我不知道的问题，任何人都可以帮助我：例如我们有一个 json：

```
 {
      "status":"0",
      "result": {
        "object1": {
          "name":"name1",
          "age":"21"
        },
        "object2": {
          "event":"new year",
          "date":"date"
        },
        "object1_1": {
          "name":"name2",
          "age":"22"
        },
        "object2_1": {
          "event":"birthday",
          "date":"date"
        }
      }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:14:02.730

您可以尝试使用杰克逊 json 转换为对象。 [http://jackson.codehaus.org/](http://jackson.codehaus.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:57:08.213

如果您想将此 json 反序列化为包含 Map 的对象（并且该地图包含文字值和其他地图）。假设你有一个类似于：

```
class MyBean {
    int status;
    Map<String, Object> result;
}

MyBean myBean = new Gson().fromJson(jsonString, MyBean.class); 
```

它应该无需修改即可工作。请注意，如果状态的类型不是数字，我不确定 Gson 是否像在 json 字符串中那样进行转换，值被引用，同样的事情适用于您的“年龄”属性。

您还可以查看 Genson 库[http://code.google.com/p/genson/](http://code.google.com/p/genson/)它具有大多数 Gson 功能，其他库没有提供的其他功能并且具有更好的性能。查看 wiki [http://code.google.com/p/genson/wiki/GettingStarted](http://code.google.com/p/genson/wiki/GettingStarted)。

**编辑**

名称真的像 object1_1、object2_1 等吗？在查看结构时，我想 object1 与 object2 一起使用很长。如果您使用 gson，您可以编写自定义 TypeAdapter [http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/TypeAdapter.html](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/TypeAdapter.html)。

所以你可以创建一个类似的根对象

```
 class Response {
     int status;
     List<MyObject> result;
 }

 class MyObject {
     String name;
     int age;
     String event;
     String date;
 } 
```

在您的 TypeAdapter 的 read 方法中，您应该根据键（object1 与 object2，object1_1 与 object2_1...）组合 MyObject 的实例或采取类似的方法。如果您想了解有关如何执行此操作的更多详细信息，也可以在 Gson google group 上提问。

# java - 没有打印日期：为什么会这样？

> ID：12107070
> 
> 赞同：1
> 
> 时间：2012-08-24T09:54:10.363
> 
> 标签：java, javascript, jsp

在javascript函数*jsp*中，我试图打印日期。但它没有被打印出来。为什么会这样？*日期应在h1*标签中的文本之前打印。但问题是没有打印日期！为什么会这样？

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP - 1</title>
    <script>
        function jsp() {
        <%= new java.util.GregorianCalendar().getTime().toString() %>
        }
    </script>
</head>

<body>
    <h1>
        Was I printed first ? Or is it the date... ..
    </h1>

    <script type="text/javascript"> 
        setTimeout(jsp,2000);
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T09:55:35.027

```
<script>
    function jsp() {
        document.write('<%= new java.util.GregorianCalendar().getTime().toString() %>');
        // or any other JS function you may want to use
    }
</script> 
```

您正在混合服务器端和客户端。

使用您的原始功能，您的浏览器将看到（例如）

```
<script>
    function jsp() {
        2012-08-24 11:57:00
    }
</script> 
```

但这不是 JS 有效的（如您所见）。

为了回答您隐藏的问题，日期将最后打印，因为它位于 h1 之后（以 DOM 方式）。

# oop - 使用构造函数依赖注入时为依赖项提供后备/默认值？

> ID：12107075
> 
> 赞同：3
> 
> 时间：2012-08-24T09:54:16.263
> 
> 标签：oop, dependency-injection

使用依赖注入时这很糟糕：

```
public function __construct($service = null)
{
    if(null === $service){
        $service = MyNewDefaultService()
    }
    $this->service = $service;
} 
```

即具有服务的默认后备类类型的概念

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T09:59:29.217

这种模式会起作用（事实上，（反）模式有一个[名字](https://stackoverflow.com/q/6733667/314291)- [Bastard](https://stackoverflow.com/questions/7099406/what-is-the-real-difference-between-bastard-injection-and-poor-mans-injectio) [Injection](https://stackoverflow.com/q/6733667/314291)），但是这种方法存在一些问题：

1.  通过在您的消费者类中构建一个新的`MyNewDefaultService()`依赖关系，除了抽象之外，您还耦合到一个具体的服务类。在编译语言中，这也意味着您的消费代码现在需要对包含具体依赖类的 jar / library / dll / assembly 进行硬“引用”，而如果您省略直接构造，您可以只在接口上耦合. 在脚本语言中，您需要确保具体的依赖关系在运行时是可解析的。

2.  依赖关系的生命周期管理`MyNewDefaultService`现在被硬编码为与消费类的生命周期相同。由 IoC 容器注入和管理的对象的生命周期可以为您提供比这更大的灵活性（例如注入共享对象等）。

3.  测试现在更加复杂，因为您无法模拟“默认”路径（即 when `$service == null`），因此您需要混合单元测试（对于注入路径，具有模拟依赖项）和集成测试（对于默认路径）来证明你的代码的正确性。

4.  如果您的依赖项本身还有其他依赖项，这些依赖项也使用构造函数注入，那么默认构造路径很快就会变得笨拙，并导致更多的耦合，因为您现在需要完成所有艰苦的工作来解决您的 IoC 容器为您完成的依赖项，例如

```
if(null === $service){
    $service = MyNewDefaultService(RepoFactory.Create(LoggerFactory.Create()), ...)
} 
```

**TL;DR**虽然当您从耦合层次结构迁移到由 IoC 容器管理的松散耦合的依赖注入层次结构时，这种方法在过渡阶段可能很有用，但[依赖倒置原则](https://en.wikipedia.org/wiki/Dependency_inversion_principle)的真正好处只有在构造函数只有一条路径，即通过抽象耦合到所有依赖项，而不是任何具体实现。

# php - MySQL 查询顺序按“最完整的字段”

> ID：12107081
> 
> 赞同：1
> 
> 时间：2012-08-24T09:54:50.613
> 
> 标签：php, mysql

我有一张桌子，有 45 列，但其中只有几列尚未完成。该表会不断更新和添加等。在我的自动完成功能中，我想选择按完成最多的字段排序的这些记录（希望您理解）？

一种解决方案是创建另一个字段（“排名”字段）并创建一个 php 函数来选择 * 记录并为每条记录提供排名。

...但我想知道是否有一种更简单的方法可以只用一个 ORDER BY 来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T10:03:20.553

据我所知，MySQL 没有计算一行中非 NULL 字段数量的功能。

所以我能想到的唯一方法是使用显式条件：

```
SELECT * FROM mytable
    ORDER BY (IF( column1 IS NULL, 0, 1)
             +IF( column2 IS NULL, 0, 1)
             ...
             +IF( column45 IS NULL, 0, 1)) DESC; 
```

...它像罪恶一样丑陋，但应该可以解决问题。

您还可以设计一个触发器来增加一个额外的列“fields_filled”。触发器会让你付出代价`UPDATE`，45个IF会伤害你`SELECT`；您必须对更方便的模型进行建模。

请注意，索引所有字段以加快速度`SELECT`将在更新时花费您（并且 45 个不同的索引可能花费与 select 上的表扫描一样多，并不是说索引字段是 a `VARCHAR`）。运行一些测试，但我相信 45-IF 解决方案可能是整体上最好的。

**更新**： *如果*您可以修改表结构以对其进行某种程度的规范化，则可以将字段放在`my_values`表中。然后你会有一个“头表”（可能只有一个唯一的 ID）和一个“数据表”。空字段根本不存在，然后您可以使用 a 按填充字段的数量排序，用`RIGHT JOIN`计算填充字段`COUNT()`。这也将大大加快`UPDATE`操作，并允许您有效地使用索引。

**示例（从表设置到两个规范化表设置）**：

假设我们有一组`Customer`记录。我们将有一小部分“强制性”数据，例如 ID、用户名、密码、电子邮件等；那么我们可能会有更大的“可选”数据子集，例如昵称、头像、出生日期等。作为第一步，让我们假设所有这些数据都是`varchar`（乍一看，与每列可能有自己的数据类型的单表解决方案相比，这看起来像是一个限制）。

所以我们有一张桌子，

```
ID   username    ....
1    jdoe        etc.
2    jqaverage   etc.
3    jkilroy     etc. 
```

然后我们有可选数据表。在这里，John Doe 填写了所有字段，Joe Q.平均只有两个，而 Kilroy 一个都没有（即使他*在*这里）。

```
userid  var   val
1       name  John
1       born  Stratford-upon-Avon
1       when  11-07-1974
2       name  Joe Quentin
2       when  09-04-1962 
```

为了在 MySQL 中重现“单表”输出，我们必须创建一个`VIEW`包含很多`LEFT JOIN`s 的非常复杂的表。如果我们有一个基于的索引，这个视图仍然会非常快`(userid, var)`（如果我们使用数字常量或 SET 而不是 varchar 的数据类型会更好`var`：

```
CREATE OR REPLACE VIEW usertable AS SELECT users.*,
    names.val AS name // (1)
FROM users
    LEFT JOIN userdata AS names ON ( users.id = names.id AND names.var = 'name') // (2)
; 
```

我们逻辑模型中的每个字段，例如“name”，都将包含在可选数据表中的元组（id、'name'、value）中。

并且它将`<FIELDNAME>s.val AS <FIELDNAME>`在上述查询的第 (1) 部分中生成一行表格，引用`LEFT JOIN userdata AS <FIELDNAME>s ON ( users.id = <FIELDNAME>s.id AND <FIELDNAME>s.var = '<FIELDNAME>')`第 (2) 部分中的表格行。因此，我们可以通过将上述查询的第一个文本行与动态 Section 1、文本“FROM users”和动态构建的 Section 2 连接来动态构建查询。

一旦我们这样做了，视图上的 SELECT 就与以前完全相同了——但现在它们通过 JOIN 从两个规范化表中获取数据。

```
EXPLAIN SELECT * FROM usertable; 
```

会告诉我们，在此设置中添加列不会明显减慢操作，即，此解决方案可以很好地扩展。

必须修改 INSERT（我们只插入强制数据，并且只在第一个表中）和 UPDATE：我们要么更新强制数据表，要么更新可选数据表的单行。但是如果目标行不存在，那么它必须被插入。

所以我们必须更换

```
UPDATE usertable SET name = 'John Doe', born = 'New York' WHERE id = 1; 
```

在这种情况下，带有“upsert”

```
INSERT INTO userdata VALUES
        ( 1, 'name', 'John Doe' ),
        ( 1, 'born', 'New York' )
    ON DUPLICATE KEY UPDATE val = VALUES(val); 
```

（我们需要一个`UNIQUE INDEX on userdata(id, var)`for`ON DUPLICATE KEY`才能工作）。

根据行大小和磁盘问题，此更改可能会产生可观的性能提升。

请注意，如果不执行此修改，现有查询将不会产生错误 -**它们将静默失败**。

这里例如我们修改两个用户的名字；一个确实有记录的名字，另一个有 NULL。第一个被修改，第二个没有。

```
mysql> SELECT * FROM usertable;
+------+-----------+-------------+------+------+
| id   | username  | name        | born | age  |
+------+-----------+-------------+------+------+
|    1 | jdoe      | John Doe    | NULL | NULL |
|    2 | jqaverage | NULL        | NULL | NULL |
|    3 | jtkilroy  | NULL        | NULL | NULL |
+------+-----------+-------------+------+------+
3 rows in set (0.00 sec)
mysql> UPDATE usertable SET name = 'John Doe II' WHERE username = 'jdoe';
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0
mysql> UPDATE usertable SET name = 'James T. Kilroy' WHERE username = 'jtkilroy';
Query OK, 0 rows affected (0.00 sec)
Rows matched: 0  Changed: 0  Warnings: 0
mysql> select * from usertable;
+------+-----------+-------------+------+------+
| id   | username  | name        | born | age  |
+------+-----------+-------------+------+------+
|    1 | jdoe      | John Doe II | NULL | NULL |
|    2 | jqaverage | NULL        | NULL | NULL |
|    3 | jtkilroy  | NULL        | NULL | NULL |
+------+-----------+-------------+------+------+
3 rows in set (0.00 sec) 
```

要知道每一行的排名，对于那些确实有排名的用户，我们只需检索每个 id 的 userdata 行数：

```
SELECT id, COUNT(*) AS rank FROM userdata GROUP BY id 
```

现在以“填充状态”顺序提取行，我们这样做：

```
SELECT usertable.* FROM usertable
    LEFT JOIN ( SELECT id, COUNT(*) AS rank FROM userdata GROUP BY id ) AS ranking
ON (usertable.id = ranking.id)
ORDER BY rank DESC, id; 
```

这`LEFT JOIN`确保了无等级的个人也被检索，并且额外的排序`id`确保了具有相同等级的人总是以相同的顺序出现。

# ios - 处理iOS平台降级和App名称重用

> ID：12107083
> 
> 赞同：1
> 
> 时间：2012-08-24T09:55:00.553
> 
> 标签：ios, app-store, universal, downgrade

我一直无法找到这个问题的相关答案。如果您知道这是一个重复的问题，请重定向。

**背景**：

我在 App Store 上有一个 1.0 版的应用程序。它基本上是一个 WebApp 的包装器，我正在开发的更新的 2.0 版本是 iPhone 的原生实现。

现在应用程序的当前版本 1.0 是通用的。因此，尝试提交我们完成的 2.0-native iPhone 应用程序被 AppStore 拒绝，因为它被视为不再支持 iPad 的降级。

未来的路线图还包括 iPad 版本的未来版本，这需要考虑在内。我相信这个 iPad 应用程序是通用的有充分的理由。**我们需要**以某种方式保留**当前的 ​​AppName**。

现在我需要关于如何最好地处理这种情况的建议。这些是我考虑的步骤：

*   在新的 appName 下发布 v2.0，即“MyApp 2”
*   从销售中删除 v1.0 应用程序，但将其保留在 iTunesConnect 中以保存名称
*   更改 v1.0 的 WebAppContent 以通知本机应用程序的当前用户群（2.0）
*   当我们准备发布通用应用程序时，我们更新当前的 1.0 而不是 2.0 以收回原始名称

**问题：**

*   有没有更好的办法？
*   如果我们从销售中删除 v1.0 并以“MyApp 2”的名称发布 v2.0，当 v1.0 属于商店时，有没有办法将后来的名称改回“MyApp”？
*   如果我们考虑从 iTunesConnect 中完全删除 v1.0，作为同一家公司，我们能否在该名称再次公开可用时收回该名称（或者我们是否被该名称列入黑名单）？
*   您可以在 AppStore 和设备主屏幕上为 App 设置不同的显示名称（这是如何完成的）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T22:45:19.593

警告：如果您在 iTunes Connect 中删除应用程序，该应用程序的名称将不再可供同一个开发者帐户再次使用。

捆绑显示名称独立于应用商店名称。许多应用程序已缩短或缩写 Bundle 显示名称以适应图标下方，以及更长的应用程序商店名称。

# jquery - JQuery UI Selectable - 如何自定义其行为

> ID：12107084
> 
> 赞同：4
> 
> 时间：2012-08-24T09:55:04.770
> 
> 标签：jquery, jquery-ui

我想确保以下非常原始的行为可供选择：

1.  完全禁用套索选择，只切换任何触摸（点击）
2.  准确执行按下 Ctrl 时所做的操作——例如取消选择选中项并选择未选中项，并让用户免于按住 Ctrl 键。

我正在尝试构建一个篮子——当它打开时，它的内容会显示出来，并且一些项目会突出显示。然后用户选择更多或取消选择其他，提交表单。就这样。

我与 Selectable 斗争了很长一段时间，它是一个非常聪明的脚本，但我似乎无法达到这个基本要求。当显示表单时，用户需要按住 Ctrl 键，否则已经选择的项目会丢失。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-06T11:13:57.317

根本不使用 selectable 更容易：

```
$('ul > li').click(function() {
  $(this).toggleClass('ui-state-highlight');
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T10:17:39.820

前几天我回答了类似的问题，我认为可以解决您问题的第 1 部分 -[如何使用鼠标单击选择多个项目？](https://stackoverflow.com/questions/12020169/how-to-select-multiple-items-using-mouse-click/12022189#12022189). 这允许左键单击或套索选择/取消选择，而无需`Ctrl`键。

但是，查看[**演示**](http://jsfiddle.net/ALmkj/1/)，我为该问题创建，通过添加

```
tolerance: 'fit' 
```

对于可选择的，它似乎通过套索禁用选择，我认为这可以解决您问题的第 2 部分。

最后，如果您使用 jQueryUI 主题，您还需要覆盖套索样式。相关的主题规则是：

```
.ui-selectable-helper { position: absolute; z-index: 100; border:1px dotted black; } 
```

和类似的东西

```
.ui-selectable-helper { display:none } 
```

应该这样做。

[**更新的演示**](http://jsfiddle.net/ALmkj/2/)

# php - Kohana 成功/错误消息方法

> ID：12107089
> 
> 赞同：1
> 
> 时间：2012-08-24T09:55:18.777
> 
> 标签：php, kohana

对于使用 MVC 框架（特别是 Kohana）处理重定向和显示错误/成功消息的最佳方法，我感到有些困惑。

我有一个扩展基本控制器的控制器用户。

我正在尝试使用`action_remove()`基本控制器中的功能，然后重定向回他们所在的页面并显示一条消息`'User has been removed....'`

我不想在`GET`参数中传递错误消息。有这样做的标准方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:29:05.727

您应该尝试使用闪存会话数据。当您想要显示错误和消息时，它非常有用。在第一次访问闪存数据被删除，所以它只能被访问一次。

[http://docs.kohanaphp.com/libraries/session#flash_session_data](http://docs.kohanaphp.com/libraries/session#flash_session_data)

这里也有一些相关的帖子，这[是在 kohana v3 中显示“闪信”的最佳方式？](https://stackoverflow.com/questions/4665423/which-is-the-best-way-to-display-flash-messages-in-kohana-v3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:02:59.063

您可以在 kohana 3.x 中使用消息模块。它用于显示消息。

请从这里下载这个模块并解压。然后将其粘贴到模块文件夹中。

[https://github.com/GoldCoastMedia/kohana-flash](https://github.com/GoldCoastMedia/kohana-flash)

然后在 applications/bootstrap.php 中启用它，如下所示。

```
'message'      => MODPATH.'message', 
```

有 5 种类型的消息可用。成功、错误、警告、信息、通知。您可以为每条消息指定样式。但是您需要以与消息类型相同的名称编写类。

```
 Message::error('pls login to access');
//to assign message type.its error message.

echo Message::display();
//to display it 
```

就是这样。但请记住，您需要以成功、错误、警告、信息、通知的名称创建类以应用样式。

要检查视图文件中的条件，您可以使用它。

```
$sucessful_message=Message::display();

if($sucessful_message) { ?>
    <div id="messagedisplay" class="padding_150">
         <div class="notice_message">
            <?php echo $sucessful_message; ?>
         </div>
    </div>
<?php } ?> 
```

# php - HP 打印截断文档上的 lpr

> ID：12107094
> 
> 赞同：0
> 
> 时间：2012-08-24T09:55:36.913
> 
> 标签：php, pdf, lpr

我是新来的，首先很抱歉我的英语不好。这是我的问题：我使用 FPDF 生成了一个 PDF 文档（生成的文档是正确的，我检查了两次）并使用 lpr 命令将其发送到网络打印机：

```
.....
$pdf->Output('stampe/lipari.pdf', 'F');

//specify the pdf I want to print
$file = 'stampe/lipari.pdf';

//Change PrinterName to the name of the printer you set up in CUPS
$cmd = "lpr -Plipari -o landscape -o fit-to-page ";
//append any files you'd like to print to the end of the command
$cmd .= $file.' 2> output';
exec($cmd); 
```

该命令没有返回错误并且文档被打印但总是被截断 5 厘米。我尝试了几种方法，例如指定边距的打印，但没有影响结果。唯一可见的结果是当我打印镜像文档时：镜像但在另一侧被截断 5 厘米。

感谢重播

编辑：我发现我的客户只会在 9 月返回，因为我只能“在现场”托盘，我现在无法测试任何解决方案。无论如何，我很感激一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T04:04:36.370

如果省略`-o fit-to-page`参数会发生什么？你也可以用纯`lp`语法试试吗？

尝试将命令更改为`lp -d lipari -o landscape`并检查结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T15:50:44.200

因为我刚刚找到解决方案时项目暂停了。

实际上问题不在 lp/lpr 命令中。问题是打印机驱动程序。我们重新安装 HPLIP 并设置正确的驱动程序……就是这样。

无论如何，感谢您的回答。

# mysql - Mysql 查询以发现当前的默认数据库排序规则（通过命令行客户端）

> ID：12107096
> 
> 赞同：9
> 
> 时间：2012-08-24T09:55:41.270
> 
> 标签：mysql, database, phpmyadmin, collation

我不知道要运行哪个查询才能查看 mysql 数据库的当前排序规则集。

我知道我可以运行这样的查询来更改它：

```
ALTER DATABASE db_name
[[DEFAULT] CHARACTER SET charset_name]
[[DEFAULT] COLLATE collation_name] 
```

但我不想在不知道当前值的情况下这样做。

我认为这实际上是可能的，因为在 phpmyadmin 中，您可以在数据库的操作选项卡中看到当前值，但我需要通过命令行客户端进行操作，在谷歌搜索后我没有找到答案。

可能我会打开 phpmyadmin 代码来发现它.. 在这样做之前，有人知道哪个是正确的查询吗？

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-24T10:11:03.780

自己想出来的，看着phpmyadmin代码。

根据 mysql 版本，要运行的查询是这样的：

```
SELECT DEFAULT_COLLATION_NAME FROM data_dictionary.SCHEMAS WHERE SCHEMA_NAME = 'nameOfMyDb' LIMIT 1; 
```

或者

```
SELECT DEFAULT_COLLATION_NAME FROM information_schema.SCHEMATA WHERE SCHEMA_NAME = 'nameOfMyDb' LIMIT 1; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-24T09:58:18.273

```
show variables like "%collat%" 
```

# c# - XML文档排序

> ID：12107097
> 
> 赞同：2
> 
> 时间：2012-08-24T09:55:46.197
> 
> 标签：c#, xmldocument

我已经想出了如何在正确的结构中将节点附加到我的 rss 文档中。我现在需要按 pubDate 顺序对其进行排序，然后输出到屏幕。查看在线示例，我发现了很多 XDocument 和 Linq 的东西，但 XmlDocument 没有。挠头是要废弃我拥有的代码并根据此处的建议在 XDocument 中解决它，还是继续使用 XMLDocument 并找出一种排序方法。

使用 XMLDocument，我的代码可以完全按照我的意愿工作，只需要在我的提要将其吐出到屏幕时按 pubDate 顺序对其进行排序。所以我想我会暂时坚持这个。我找到了这篇文章[http://support.microsoft.com/kb/555060](http://support.microsoft.com/kb/555060)和某人在 Stack Overflow 中发布的 xslt，但我不知道如何从我的代码中调用“XmlHelperFunctions”。XSLT 是我拥有的最简单的选择，还是有更简单的方法？

这是我的代码：

```
 XmlDocument xmlDoc = new XmlDocument();

    xmlDoc.LoadXml(rssFeed.ToString());

    XmlNodeList nl = xmlDoc.SelectNodes("/rss/channel/item");

    foreach (XmlNode xn in nl)
    {
        string title = xn["title"].InnerText;
        string link = xn["link"].InnerText;
        string desc = xn["description"].InnerText;
        string auth = xn["author"].InnerText;
        string pdate = xn["pubDate"].InnerText;

        XmlElement itemnode = xmlDoc.CreateElement("item");

        itemnode.InnerXml = "<title></title><link></link><description></description><author></author><pubDate></pubDate>";
        itemnode["title"].InnerText = title;
        itemnode["link"].InnerText = link;
        itemnode["description"].InnerText = desc;
        itemnode["author"].InnerText = auth;
        itemnode["pubDate"].InnerText = pdate;

        xmlDoc.DocumentElement.SelectNodes("/rss/channel")[0].AppendChild(itemnode);
    }

    // Output to screen
    xmlDoc.Save(Response.Output); 
```

我的 RSS 提要

```
<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0">
<channel>
<title>My RSS Feed</title>
<link>http://www.mylink.aspx</link>
<description>
</description>
<item>
  <title>Top marks</title>
  <link>http://www.mymarks.aspx</link>
  <description>
  &lt;p&gt;description field here&lt;/p&gt;
  </description>
  <author>Viv</author>
  <pubDate>Thu, 16 Aug 2012 12:10:54 GMT</pubDate>
</item>
<item>
  <title>Costa Coffee</title>
  <link>http://www.Costa.aspx</link>
  <description>
  &lt;p&gt;Costa Coffee have special offers.&lt;/p&gt;
  </description>
  <author>Mike</author>
  <pubDate>Thu, 23 Aug 2012 15:55:53 GMT</pubDate>
</item>
<item>
  <title>Celebrate success</title>
  <link>http://www.Celebrate.aspx</link>
  <description>
  &lt;p&gt;Lets all celebrate &lt;/p&gt;
  </description>
  <author>Viv</author>
  <pubDate>Thu, 22 Aug 2012 09:10:21 GMT</pubDate>
</item>
</channel>
</rss> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T10:33:13.480

您可以使用[Linq to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)快速轻松地完成此操作。

如果使用 XElement.Parse(...) 解析 XML，则可以使用 OrderBy 或 OrderByDescending 函数并很容易地更改内容。这是一个简化的示例：

```
XElement element = XElement.Parse(@"
<rss>
<channel>
<item title='something' pubDate='22/11/2012'/>
<item title='something2' pubDate='24/03/2012'/>
<item title='something3' pubDate='10/02/2010'/>
<item title='something4' pubDate='22/01/2011'/>
</channel>
</rss>");

var elements = element.Element("channel")
                .Elements("item")
                .OrderBy<XElement, DateTime>(e => DateTime.ParseExact(e.Attribute("pubDate").Value, "dd/MM/yyyy", null))
                .Select(e => new XElement("item",
                    new XElement("title", e.Attribute("title").Value),
                    new XElement("pubDate", e.Attribute("pubDate").Value))); // Do transform here.

            element.Element("channel").ReplaceAll(elements);

            Console.Write(element.ToString()); 
```

XML 不会与您的 XML 相同，但希望它能让您了解可以做什么。您可以将 XElement 和 XAttribute 对象指定为新 XML 的内容，这将输出以下内容：

```
<rss>
  <channel>
    <item>
      <title>something3</title>
      <pubDate>10/02/2010</pubDate>
    </item>
    <item>
      <title>something4</title>
      <pubDate>22/01/2011</pubDate>
    </item>
    <item>
      <title>something2</title>
      <pubDate>24/03/2012</pubDate>
    </item>
    <item>
      <title>something</title>
      <pubDate>22/11/2012</pubDate>
    </item>
  </channel>
</rss> 
```

我希望这很有用。

# asp.net-mvc-3 - 如何将视图从控制器返回到 iFrame

> ID：12107099
> 
> 赞同：0
> 
> 时间：2012-08-24T09:56:07.490
> 
> 标签：asp.net-mvc-3, iframe

我是 MVC 3 的新手，遇到过以下场景：

**首先让我解释一下我是如何设置我的应用程序的：**

所有到服务器的回发都使用 jquery ajax，它从控制器返回一个视图，该视图附加或前置或替换目标 div。

**场景：**

我已经到了想上传图片的地步，但不幸的是，由于发布了 jquery ajax，我无法在 C# 中获取 html 的值`Request.Files`。我知道有插件可以帮助解决这个问题，但我想自己做，所以我创建了一个`<iframe>`，然后我使用一些 javascript 并将表单发布到 iframe（旧的经典做事方式）：

```
function UploadImg(SACTION) {
        alert(SACTION);
        validatorform.action = SACTION;
        validatorform.target = "fraImage";
        validatorform.method = "POST";
        validatorform.submit();
    } 
```

`SACTION`参数看起来像这样`@Url.Action("UploadFile", "Response")`。这一切都很好，因为它击中了控制器操作方法，然后我可以保存图像：

```
[HttpPost]
        public ActionResult UploadFile(string ArticleID)
        {
            ViewBag.PreviewImage = cFileUploads.UploadFile(ArticleID, Request.Files[0]); 

            return View("ImagePreview");
        } 
```

我现在想将视图返回到 iframe（只是预览图像，然后做一些其他的事情，但这不是重点）

预览图像的视图：

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
<form action="">
<img alt="" src="@ViewBag.PreviewImage" />
</form>
</body>
</html> 
```

**问题：**

不幸的是，当我在 C# 中返回视图（ImagePreview.cshtml）时，整个页面都被刷新了，我想要的只是刷新 iFrame。我应该如何从控制器返回视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:39:53.883

解决了这个问题，我有一些 javascript 正在替换 iframe 所在的 div 的内容......（拍在我的额头上）。现在一切正常:)

将这个问题留在这里以防万一..

# android-ndk - 在本机代码中使用 SDK 信号量

> ID：12107103
> 
> 赞同：1
> 
> 时间：2012-08-24T09:56:22.750
> 
> 标签：android-ndk

我们有一个大型的 c++ 代码库，我正在将其移植到 Android 上。我们有先见之明地抽象出各种平台相关的特性（线程、文件访问等），因此这个过程涉及在 NDK 中逐步实现适合 Android 的代码功能

在我意识到信号量（在我们的核心代码中使用）似乎没有在 NDK 中实现之前，我进展得相当顺利。

我想知道在这种（可能还有其他）情况下是否有可能在 SDK 中实现所需的功能（如果存在），例如“Java”信号量并通过本机的 JNI 接口将其传递给本机代码通过适当的回调对其进行操作的代码。

出于同步目的，这可能是不可取的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-20T13:33:24.597

有一个坏消息，伙计们。信号量未在 pthread [google 源的 android 版本上实现](https://android.googlesource.com/platform/external/pthreads/+/master/sem_open.c)

对我来说，flock(2) 是一个答案。但是，如果您试图从不同的用户锁定相同的文件，则存在潜在的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:33:59.837

使用传递给本机代码的基于 Java 的实现可能最糟糕的后果是信号量操作将*非常*慢，因为它们必须跨越 JNI 边界。

有什么理由不能使用 POSIX 信号量吗？`semaphore.h`从 NDK 的标头中查看。

# php - 多维数组中的 $_SESSIONS

> ID：12107104
> 
> 赞同：0
> 
> 时间：2012-08-24T09:56:24.577
> 
> 标签：php, session

我有以下功能可以从 Sessions 中获取信息，所以

```
public function get($_GET)
{
    return $_SESSION['user']['info'][$_GET];
} 
```

当我尝试获取一些数据时，会发生一些奇怪的事情

```
$this->get('id')
Output: i
Exception: Vlad 
```

和 $_SESSION['user']['info']['id']; 它完美无缺

```
Output: Vlad 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T09:58:30.330

`$_GET`是 super-global 的保留名称`$_GET`。如果您尝试以任何其他身份使用它，您可能会得到意想不到的结果。将其更改为常规`$get`或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:58:21.697

您可能希望将`$_GET`用作数组，例如：

```
$_SESSION['user']['info'][$_GET['someField']]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T09:59:21.030

`$_GET`是超级全局变量，不要使用它。

```
public function get($id) {
  if (isset($_SESSION['user']['info'][$id])){
    return $_SESSION['user']['info'][$id];
  }
  return null;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T09:59:32.753

更改要传递给函数的参数的名称。替换`$_GET`为任何其他变量

# asp.net - 在打开 exe 时停止处理 ASP.Net Web 表单

> ID：12107108
> 
> 赞同：0
> 
> 时间：2012-08-24T09:56:32.937
> 
> 标签：asp.net, .net, executable

在我的 ASP.net 应用程序中，我必须单击按钮打开一个 EXE。当 EXE 打开时，不应允许用户在 web 表单上执行任何操作，即 exe 的行为应类似于模式弹出窗口。我正在使用当前代码从 EXE 打开并返回值。

```
 Dim p As Process

    p = Process.Start("D:\VS2010Projects\SignatureCaptureWindows\bin\Debug\SignatureCaptureWindows.exe")

    p.WaitForExit()

    If (Not p.ExitCode.Equals(0)) Then
        Response.Write("Image Successfully saved in Database with ID = " + p.ExitCode.ToString())
        DisplaySavedImage(p.ExitCode)
    End If 
```

Exe 可以正常打开并返回正确的值。但是，当 exe 打开时，用户可以在 Web 表单上执行操作...

处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:08:13.907

不可能按照你赢得它的方式去做。从用户发送提交或尝试打开页面的那一刻起，在您运行此 exe 的代码上，然后用户正在等待结果 - 在这个时候你不能让用户不做任何其他事情 - 你可以不锁定浏览器，用户可以关闭它，重新加载它，再次打开同一页面等。

您可以做的是使用锁定此进程`Mutex`，如果一切就绪，则不允许再次运行它。

msdn 上的互斥锁示例：http: [//msdn.microsoft.com/en-us/library/system.threading.mutex.aspx](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)

# ruby-on-rails-3 - 授权规范不适用于放置请求

> ID：12107110
> 
> 赞同：0
> 
> 时间：2012-08-24T09:56:46.383
> 
> 标签：ruby-on-rails-3, rspec, capybara, factory-bot

我在 Michael Hartls Ruby On Rails 教程的第 9 章。在我的**authentication_pages_specs.rb**中，“提交更新操作”导致规范崩溃，并出现错误**“未定义的局部变量或方法 `user' for # (NameError)”**

```
require 'spec_helper'

describe "Authentication" do
  subject { page }

  describe "authorization" do

    describe "for non signed-in users" do
      let(:user) { FactoryGirl.create(:user) }

      describe "in the users controller" do
        describe "visiting the edit page" do
          before { visit edit_user_path(user)}
          it { should have_selector('title', text: 'Sign in')}
        end

        describe "submitting to the update action" do
          describe { put user_path(user)}  #Error on this line
          specify { response.should redirect_to(signin_path) }
        end
      end
    end

  end

end 
```

是什么导致规范崩溃？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:53:42.677

在阻止放置部分之前放入可以解决问题

# javafx-2 - 如何从另一个控制器修改标签（查找+更新）？

> ID：12107123
> 
> 赞同：0
> 
> 时间：2012-08-24T09:57:29.223
> 
> 标签：javafx-2

我创建了一个 tabPane。在每个选项卡下，我都包含 () 一个 fxml 来显示实际的会话用户，代码如下：

home-tab.fxml 有这一行：

```
<fx:include fx:id="topTab" source="../top-tab.fxml"/> 
```

顶部tab.fxml：

```
<AnchorPane maxHeight="20.0"  prefWidth="600.0" xmlns:fx="http://javafx.com/fxml" fx:controller="wuendo.client.TopTabController">
   <children>
      <HBox id="hbox_top" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">
         <Label id="label_session" prefHeight="20.0" text="SESSION : " />
         <Label fx:id="sessionLabel" prefHeight="20.0" text="" />  
      </HBox>
   </children>
</AnchorPane> 
```

TopTabController.java：

```
@FXML public Label sessionLabel; 
```

HomeTabController.java：

```
@FXML private TopTabController topTabController;

@Override
public void initialize(URL url, ResourceBundle rb) {

  URL location = getClass().getResource("../top-tab.fxml");
  FXMLLoader fxmlLoader = new FXMLLoader(location);
  AnchorPane root = null;
  try {
     root = (AnchorPane) fxmlLoader.load();
  }  catch (IOException ex) {
     Logger.getLogger(HomeTabController.class.getName()).log(Level.SEVERE, null, ex);
  }
  topTabController = (TopTabController) fxmlLoader.getController();

  Label txt = (Label) root.lookup("#sessionLabel");
  txt.setText("blabla");

  System.out.println("sessionLabel= " + topTabController.sessionLabel.getText());
} 
```

当我执行此操作时，控制台打印“blabla”，但程序中未修改标签（gui）

我必须做什么才能看到更新的值？

谢谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:47:52.783

在`FXMLLoader`加载 home-tab.fxml 时已经创建了 TopTabController。它是场景中的渲染。但是，您正在创建/加载另一个未添加到任何场景的 TopTabController 实例。您正在更改第二个标签中的文本。正确的方法是修改已经加载的第一个实例而不是加载另一个：

```
@Override
public void initialize(URL url, ResourceBundle rb) {
    topTabController.sessionLabel.setText("Real blabla");
    System.out.println("sessionLabel= " + topTabController.sessionLabel.getText());
} 
```

旁注，您在评论中提供的链接很有用。

# haskell - 在函数返回类型中模拟存在量化

> ID：12107124
> 
> 赞同：7
> 
> 时间：2012-08-24T09:57:31.757
> 
> 标签：haskell, return-type, existential-type, gadt

有时我遇到需要返回存在量化类型的值。当我使用幻像类型（例如表示平衡树的深度）时，这种情况最常发生。AFAIK GHC 没有任何`exists`量词。它只允许[存在量化的数据类型](https://en.wikibooks.org/wiki/Haskell/Existentially_quantified_types)（直接或使用 GADT）。

举个例子，我想有这样的功能：

```
-- return something that can be shown
somethingPrintable :: Int -> (exists a . (Show a) => a)
-- return a type-safe vector of an unknown length
fromList :: [a] -> (exists n . Vec a n) 
```

到目前为止，我有 2 个可能的解决方案作为答案添加，我很高兴知道是否有人知道更好或不同的东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T09:57:31.757

标准解决方案是创建一个存在量化的数据类型。结果会是这样的

```
{-# LANGUAGE ExistentialQuantification #-}

data Exists1 = forall a . (Show a) => Exists1 a
instance Show Exists1 where
    showsPrec _ (Exists1 x) = shows x

somethingPrintable1 :: Int -> Exists1
somethingPrintable1 x = Exists1 x 
```

现在，可以自由使用`show (somethingPrintable 42)`。`Exists1`不能`newtype`，我想这是因为有必要`show`在隐藏的上下文字典中传递特定的实现。

对于类型安全的向量，可以按照相同的方式创建`fromList1`实现：

```
{-# LANGUAGE GADTs #-}

data Zero
data Succ n

data Vec a n where
    Nil  ::                 Vec a Zero   
    Cons :: a -> Vec a n -> Vec a (Succ n)

data Exists1 f where
    Exists1 :: f a -> Exists1 f

fromList1 :: [a] -> Exists1 (Vec a)
fromList1 [] = Exists1 Nil
fromList1 (x:xs) = case fromList1 xs of
                    Exists1 r -> Exists1 $ Cons x r 
```

这很好用，但我看到的主要缺点是额外的构造函数。每次调用都会`fromList1`导致构造函数的应用程序立即解构。和以前一样，`newtype`对于 是不可能的`Exists1`，但我猜如果没有任何类型类约束，编译器可以允许它。

* * *

我创建了另一个基于 rank-N 延续的解决方案。它不需要额外的构造函数，但我不确定额外的功能应用程序是否不会增加类似的开销。在第一种情况下，解决方案是：

```
{-# LANGUAGE Rank2Types #-}

somethingPrintable2 :: Int -> ((forall a . (Show a) => a -> r) -> r)
somethingPrintable2 x = \c -> c x 
```

现在人们会用它`somethingPrintable 42 show`来得到结果。

并且，对于`Vec`数据类型：

```
{-# LANGUAGE RankNTypes, GADTs #-}

fromList2 :: [a] -> ((forall n . Vec a n -> r) -> r)
fromList2 [] c      = c Nil
fromList2 (x:xs) c  = fromList2 xs (c . Cons x)

-- Or wrapped as a newtype
-- (this is where we need RankN instead of just Rank2):
newtype Exists3 f r = Exists3 { unexists3 :: ((forall a . f a -> r) -> r) }

fromList3 :: [a] -> Exists3 (Vec a) r
fromList3 []     = Exists3 (\c -> c Nil)
fromList3 (x:xs) = Exists3 (\c -> unexists3 (fromList3 xs) (c . Cons x)) 
```

使用一些辅助函数可以使其更具可读性：

```
-- | A helper function for creating existential values.
exists3 :: f x -> Exists3 f r
exists3 x = Exists3 (\c -> c x)
{-# INLINE exists3 #-}

-- | A helper function to mimic function application.
(?$) :: (forall a . f a -> r) -> Exists3 f r -> r
(?$) f x = unexists3 x f
{-# INLINE (?$) #-}

fromList3 :: [a] -> Exists3 (Vec a) r
fromList3 []     = exists3 Nil
fromList3 (x:xs) = (exists3 . Cons x) ?$ fromList3 xs 
```

我在这里看到的主要缺点是：

1.  附加功能应用程序可能产生的开销（我不知道编译器可以优化多少）。
2.  可读性较差的代码（至少对于不习惯延续的人来说）。

# ruby-on-rails - Rails 说查询错误的地方

> ID：12107134
> 
> 赞同：0
> 
> 时间：2012-08-24T09:57:51.253
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 Rails 3.2.6 构建一个 Web 应用程序，当我尝试执行此查询时，它会在查询的前半部分之后出现逗号。

```
Checkin.where ("user_id = ? AND event_id = ?", current_user.id, params[:event_id]) 
```

上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:00:38.693

去除`where`和 开口之间的空间`(`。

```
Checkin.where("user_id = ? AND event_id = ?", current_user.id, params[:event_id]) 
```

# android - 根据手机自动更换UI

> ID：12107136
> 
> 赞同：1
> 
> 时间：2012-08-24T09:57:59.707
> 
> 标签：android, user-interface, phone-call

我正在为 android 设计一个恶作剧应用程序，我想在其中显示好像有人打电话，然后当用户接听电话时，它应该播放录制的文件。除了我目前面临的 1 个问题之外，我已经完成了大部分事情。

1) 众所周知，每部手机的用户界面在接到电话时都会有所不同，所以我想确保在运行应用程序时它应该使用手机的默认用户界面，以确保它看起来像一个真正的来电称呼。

我正在上传一张图片，以便您对我的查询有更好的了解。因此，我们可以看到每部手机的 UI 都不同，我如何确保当我的应用程序拨打假电话时，它使用在接到真实来电时显示的相同 UI。

对此问题的任何帮助将不胜感激。 ![在此处输入图像描述](../Images/7b60d81edc6705af7fce387307bf44fb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:29:03.397

您要做的是启动 Android Dialer 应用程序，然后在播放音频文件时更改功能/让它不执行任何操作。

虽然您可以启用扬声器并播放音频，但您无法在没有实时通话的情况下使拨号器保持活动状态。无效的号码会失败，而实际通话会花钱。

您想要做的实际上很难实现，您唯一可以尝试做的就是创建自己的具有不同主题的虚假拨号器活动（根据主要品牌），检测设备制造商，然后显示相关的。

# asp.net - ASP.NET DataPager Next/Previous 按钮客户端 onlick 事件

> ID：12107137
> 
> 赞同：0
> 
> 时间：2012-08-24T09:57:59.723
> 
> 标签：asp.net, onclick, datapager

如何将客户端 (javascript) onclick 事件添加到 DataPager 中的 Next/Previous 链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T21:28:19.520

上面的答案（由 Sheery 提供）非常适用于自定义寻呼机元素。但是，当使用 ListView 或 DataGrid 的常用数字或 Next/Previous 分页器样式时，您几乎没有多少控制权。通过使用客户端 jQuery/javascript 选择器，您可以不显眼地将客户端处理程序附加到寻呼机元素。对于这个例子，我正在跟踪是否有任何表单字段值发生了变化，如果发生了变化，那么在允许寻呼机执行其回发到服务器的默认行为之前，我们正在与用户确认他们有未保存的更改。

```
$(function () {

      var _formChanged = false;

      // grabs all pager links in last row of table named dgQuestions
      // and attachs a click eventhandler via jQuery library
      $("#dgQuestions tr:last a").click(function(e) {              
            if (!_formChanged)
                return true;

            var ok = confirm('You have UNSAVED changes. Continue?');
            if (ok) {               
                return true;
            }
            else {
                //Prevent the submit event and remain on the screen
                e.preventDefault();
                return false;
            }
        });

        // delegates change event handling to the form to indicate if ANY
        // form field value changed for testing prior to paging
        $("#form1").change(function(e) {
            _formChanged = true;
        });

    });
}); 
```

或者

也可以利用窗口的 beforeunload 事件来捕捉任何导航离开的动作，以测试未保存的更改。此代码不包括实际单击“保存”按钮。

```
$(window).on('beforeunload', function (e) {
    if (e.originalEvent.explicitOriginalTarget.id != "btnSave") {
        if (_formChanged)
            return 'You have UNSAVED changes. Continue?';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:33:24.220

您可以在数据寻呼机中添加一个新按钮并处理它的点击事件。

```
<asp:ListView runat="server" ID="ListView1" 
    DataSourceID="SqlDataSource1">
    <LayoutTemplate>
        <table runat="server" id=" table1">
          <tr runat="server" id="itemPlaceholder">
          </tr>
        </table>
        <!-- This is the pager. Define all necessary markup here. -->
        <asp:DataPager runat="server" ID="DataPager" PageSize="5">
            <Fields>
                <asp:TemplatePagerField>              
                    <PagerTemplate>
                        <asp:Button ID="btn_Submit" runat="server" Text="Button" onclientclick="eventHandler(this)" />
                    </PagerTemplate>
                </asp:TemplatePagerField>
            </Fields>
        </asp:DataPager>
    </LayoutTemplate>
</asp:ListView> 
```

# php - 如何生成wsdl

> ID：12107139
> 
> 赞同：1
> 
> 时间：2012-08-24T09:58:02.490
> 
> 标签：php, soap, wsdl

我第一次在 SOAP 上工作。经过各种教程后，我已经能够创建一个提供两个功能的小而简单的肥皂服务器。[尽管我已经能够创建 SOAP 服务并使用客户端对其进行测试，但即使在阅读了http://www.w3schools.com/wsdl/wsdl_binding.asp](http://www.w3schools.com/wsdl/wsdl_binding.asp)上的教程之后，我也无法理解 WSDL 。

那么我怎样才能使这个 SOAP “wsdl 肥皂”？有没有办法在 PHP 中自动生成它？只要我知道要写什么，我不介意手动写下来。我在哪里放什么代码使它成为“wsdl”？

```
function geolocate(double $lat, double $lng)
{
    $contents = file_get_contents('http://api.geonames.org/findNearby?lat='.$lat.'&lng='.$lng.'&username=imranomar');
    return $contents;
}

function describe(long $geonameid)
{
    return file_get_contents('http://ws.geonames.org/get?geonameId='.$geonameid.'&style=full');
}

$server = new SoapServer(null, array('uri' => "urn://localhost/firstmobile?wsdl"));
$server->addFunction('geolocate');
$server->addFunction('describe');
$server->handle(); 
```

**注意：我不能使用任何框架**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:07:26.253

我建议你使用[Zend_Soap_Server](http://framework.zend.com/manual/en/zend.soap.server.html)，因为它简化了 PHP 中的 web 服务开发。

可以使用[Zend AutoDiscovery自动生成 SOAP WSDL](http://framework.zend.com/manual/1.11/en/zend.soap.autodiscovery.html)

# sql - 如何根据oracle中的给定记录获取更新记录？

> ID：12107142
> 
> 赞同：1
> 
> 时间：2012-08-24T09:58:08.893
> 
> 标签：sql, oracle, date, sql-update

我想根据给定的日期值从数据库中获取记录。我使用 Timestamp 作为列类型。我使用查询作为

```
SELECT * 
FROM table1
WHERE LAST_UPDT_S = to_date('23-AUG-12') 
```

得到空表。表中存在记录。

请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:02:04.617

试试这个，

```
SELECT * 
FROM table1 
WHERE LAST_UPDT_S = to_date('23-AUG-12', 'DD-MON-YY') 
```

**[请参阅：TO_DATE 手册](http://www.techonthenet.com/oracle/functions/to_date.php)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:14:30.140

可能是您的表格包含带有时间部分的日期，因此请尝试使用：

```
SELECT * 
FROM table1
WHERE Trunc(LAST_UPDT_S) = to_date('23-AUG-12') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T03:22:03.477

通常最好使用时间范围 - 如果存在索引，这会打开使用索引的可能性：

```
SELECT * 
FROM table1
WHERE LAST_UPDT_S >= DATE '2012-08-23'
  AND LAST_UPDT_S < DATE '2012-08-24' 
```

（另外，最好不要在没有指定日期格式的情况下使用 TO_DATE，否则它将使用当前会话的 NLS 设置。）

# java - 通过 Notes-UpdateSite 数据库将 jar 部署到 Domino 服务器以 NoClassDefFoundException 结尾

> ID：12107143
> 
> 赞同：0
> 
> 时间：2012-08-24T09:58:11.533
> 
> 标签：java, osgi, lotus-notes, xpages, lotus-domino

我们有几个要部署到 8.5.3 Domino 服务器的 .jar 文件。

控制台命令“ `tell http osgi diag <bundle name>`”有效，并向我显示捆绑包在那里。但是，当我启动一个具有来自 jar 的导入语句的 Notes Java 代理时，多米诺控制台会为这些类打印*NoClassDefFoundError*错误。

来自最初称为 saxon9he.jar 的 .jar 的示例：

```
[1834:0036-1E84] 24.08.2012 11:21:14   HTTP JVM: Exception in thread "AgentThread:JavaAgent"
[1834:0037-1E84] 24.08.2012 11:21:14   HTTP JVM: java.lang.NoClassDefFoundError:net.sf.saxon.Version
[1834:0039-1E84] 24.08.2012 11:21:14   HTTP JVM: at JavaAgent.NotesMain(Unknown Source)
[1834:003B-1E84] 24.08.2012 11:21:14   HTTP JVM: at lotus.domino.AgentBase.runNotes(Unknown Source)
[1834:003D-1E84] 24.08.2012 11:21:14   HTTP JVM: at lotus.domino.NotesThread.run(Unknown Source)
[1834:003F-1E84] 24.08.2012 11:21:14   HTTP JVM: Caused by:
[1834:0040-1E84] 24.08.2012 11:21:14   HTTP JVM: java.lang.ClassNotFoundException: net.sf.saxon.Version
[1834:0042-1E84] 24.08.2012 11:21:14   HTTP JVM: at lotus.domino.AgentLoader.loadClass(Unknown Source)
[1834:0044-1E84] 24.08.2012 11:21:14   HTTP JVM: at java.lang.ClassLoader.loadClass(ClassLoader.java:619)
[1834:0046-1E84] 24.08.2012 11:21:14   HTTP JVM: ... 3 more 
```

其中一些 .jar 文件是我们自己完全编写的，而另一些是由开源项目贡献的。这些罐子。在“WebContent”的 Domino Designer 中的 Java 视图中创建的几个 Java 代理、XPage 和类中仅通过导入指令使用文件。我们在各种设计元素中使用这些包，并且有大约 100 个 domino 服务器必须获取这些文件和补丁，这就是为什么我们不想将它们放入每个它们的本地文件系统中。

到目前为止，这就是我为获得罐子所做的工作。文件到我的多米诺服务器：

我已经进口了这些罐子。将我的 Eclipse 4.2 客户端中的文件放入一个新的“现有 Jar 中的插件项目”并配置导入和导出包。（我什至尝试从这些 jar.Files 制作 Bnd-Projects 以获得适当的 OSGI-ready Manifest-files，遗憾的是它并没有做得更好）之后我创建了一个包含插件的功能项目。最后，我将该功能导入到我的 Eclipse 中的一个新的 Update-Site 项目并构建它。

我在从模板“StdEclipseUpdateSite”（版本 8.5.3 (04.03.2011) 创建的数据库中选择了这个 site.xml。在 Notes.ini 中通过我的 8.5.3 Domino 服务器 x64 上的“OSGI_HTTP_DYNAMIC_BUNDLES”参数引用了这个数据库出于测试目的在我的 Windows 7 x64 上本地运行。

我已经在这个问题上工作了几天，阅读了有关 osgi 的信息，并在谷歌上搜索了很多关于类似问题的信息，但我自己无法完成这项工作。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:09:40.683

OSGI Bundles 对 Classic Agent 不可见，我建议您使用 DOTS 插件服务来完成这些任务。 [http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=OSGI%20Tasklet%20Service%20for%20IBM%20Lotus%20Domino](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=OSGI%20Tasklet%20Service%20for%20IBM%20Lotus%20Domino)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-14T21:18:48.940

我知道这是一个老问题 - 我只是偶然发现它寻找一些部署问题:-)

简而言之：代理 JVM 和 XPages JVM 并不相同。因此，“旧”代理（以及相关的 Web 服务）将看不到通过更新站点部署到 OSGi 的任何内容。

您可以使用的唯一选项是将 jar 文件复制到服务器程序库中的 jvm/lib/ext。这样可行。您甚至不应该考虑将 jar 文件添加到代理（或 Java 脚本库），因为在使用之前分离 jar 文件的机制中存在内存泄漏。

所以这样考虑。向“新 Java 世界”的转变不会涉及旧技术（主要是代理）。您将不得不寻找在 Domino 中调度任务的新机制。我个人认为 DOTS/Tasklets 将成为前进的方向——但仍然需要“将其包裹”的解决方案——并使设置任务变得容易。

/约翰

# java - 使用 Java 组合 nn 个标签以形成名词短语

> ID：12107147
> 
> 赞同：2
> 
> 时间：2012-08-24T09:58:24.107
> 
> 标签：java, nlp, stanford-nlp

如何使用 Java 将所有 nn 个标签组合成一个短语标签

```
nsubj(martyrdom-4, Today-1)
cop(martyrdom-4, is-2)
det(martyrdom-4, the-3)
root(ROOT-0, martyrdom-4)
nn(Mukherjee-7, Dr-6)
prep_of(martyrdom-4, Mukherjee-7)
det(founder-9, the-8)
dep(tribute-17, founder-9)

prep_of(founder-9, Jan-11)
nn(body-15, Sangh-12)
nn(body-15, BJP-13)
nn(body-15, parent-14)
dep(tribute-17, body-15)
poss(tribute-17, My-16)
dep(martyrdom-4, tribute-17)
prep_to(tribute-17, him-19) 
```

我想得到一个名词短语：

```
prep_of(founder-9,Jan-11)
nn(body-15, Sangh-12)
nn(body-15, BJP-13)
nn(body-15, parent-14) 
```

输出应该是----------> jan sangh BJP parent

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T23:51:49.060

I believe this is the dependency chain output from Stanford Parser. If yes, then you should already have the noun phrases (NP nodes) in the parsed tree of the sentence. You can extract the lowest level NP nodes from the parse tree to get the required noun phrases. For example, for the sentence "*Today is the martyrdom of Dr. Mukherjee, founder of Jan Sangh BJP.*", the parse tree would be:

```
(ROOT
  (S
    (NP (NNP Today))
    (VP (VBZ is)
      (NP
        (NP (DT the) (NN martyrdom))
        (PP (IN of)
          (NP
            (NP (NNP Dr.) (NNP Mukherjee))
            (, ,)
            (NP
              (NP (NN founder))
              (PP (IN of)
                (NP (NNP Jan) (NNP Sangh) (NNP BJP))))))))
    (. .))) 
```

In this tree, the lowest level NPs containing proper nouns (NNPs) will give you most (all of them not being the named entities that you need) of the noun phrases that you need. In this case the output will be:

```
(NP (NNP Today))
(NP (NNP Dr.) (NNP Mukherjee))
(NP (NNP Jan) (NNP Sangh) (NNP BJP)) 
```

# ruby-on-rails - Ruby on Rails，使用内容类型创建 CMS

> ID：12107148
> 
> 赞同：0
> 
> 时间：2012-08-24T09:58:29.113
> 
> 标签：ruby-on-rails, model-view-controller, content-management-system, content-type, rails-models

我现在正在学习 RoR，并提出了创建一个非常简单的内容管理系统的想法。我想允许用户通过添加字段来创建内容结构，然后应用程序将创建页面以添加新项目并列出给定类型的所有项目。我在 Drupal 中看到过类似的东西，用户可以定义自己的内容类型。

我想知道怎么做：

1.使用关系数据库：我是否应该将内容类型存储为（例如）“id => type_of_field”的序列化哈希，并在从用户那里获取后执行 SQL 在控制器中创建数据库模式？有没有更好的方法来实现这一目标？它会导致未来的数据库迁移出现问题吗？

2.如何创建视图、控制器和路由？是否应该只有一个控制器自己处理内容类型的路由，而不使用 routes.rb 并从部分动态创建视图？有没有更优雅的方法来做到这一点？感谢所有线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:05:56.953

也许您可以修复基本简单 CMS 的布局。像 left_side_bar,can_left_side_bar,right_side_bar,top_nav,sub_nav,footer,header,body DB 字段并检查显示内容。所以基本上减少页面并映射到 db 字段，

查看各种可用的 CMS 并了解他们的架构，这将帮助您从架构方面理解。

CMS 列表 [https://www.ruby-toolbox.com/categories/content_management_systems](https://www.ruby-toolbox.com/categories/content_management_systems)

# iphone - 由于从设备收到无效响应，如何修复 iTunes 无法连接到 iphone？

> ID：12107150
> 
> 赞同：2
> 
> 时间：2012-08-24T09:58:30.290
> 
> 标签：iphone, itunes, jailbreak, iphone-4

我有使用苦艾酒越狱的设备，两天前我删除了越狱。现在我无法将我的 iPhone 4 连接到 iTunes。它说“ `iTunes could not connect to the iPhone because an invalid response was received from the device`”。
我已经在另一个系统上尝试过，还更换了电缆。问题就是这样。有人请帮帮我吗？现在我无法同步它.. :(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T23:07:08.203

尝试重置您的网络设置

设置 -> 常规 -> 重置 -> 重置网络设置

并尝试删除您的 mac/pc 锁定文件夹的内容。这是链接，请按照“重置锁定文件夹”中的步骤操作。

[http://support.apple.com/kb/ts2529](http://support.apple.com/kb/ts2529)

这个对我有用。

# c++ - 如何使进程 B 仅在进程 A 处于活动状态时运行

> ID：12107151
> 
> 赞同：2
> 
> 时间：2012-08-24T09:58:33.583
> 
> 标签：c++, windows, waitforsingleobject

我有一个启动另一个进程 B 的进程 A。
当前进程 B 在退出之前等待进程“A”发出的信号（WaitForSingleObject），一旦设置了信号，进程 B 就会退出。但是，当进程 A 意外终止或崩溃时，我最终会发现进程 B 仍在运行。除非进程 A 崩溃，否则如何让 B 无限期地等待信号？换句话说.. 进程 B 应该只在进程 A 运行之前保持活动状态。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:04:44.157

`WaitForSingleObject`在进程 A 的进程句柄上；它会在 A 死亡时发出信号。

另一种方法是将 B 附加到 A 作为调试器。然后你会在进程退出时收到一个事件，并且可以完美同步退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:01:12.533

启动时`B`，将 A 的 pid 传递给它。在其中`B`，启动一个新线程，该线程主动检查该 pid 是否对应于 running `A`。当这不再成立时，退出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T10:30:46.433

您还可以让 tcp 套接字在两个进程之间发送心跳消息，甚至可以将其扩展到 A 和 B 在不同机器上的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T01:55:43.960

最简单的方法是使用[互斥体](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684266%28v=vs.85%29.aspx)而不是事件。如果进程 A 退出，则认为互斥锁被放弃，进程 B 对互斥锁的等待将得到满足。

或者，您可以给 B 一个处理 A 的句柄，让它等待事件和处理 A 的句柄。如果使用这种方法，B 获取 A 句柄的最佳方法是继承；在进程 A 中使用 DuplicateHandle（bInheritHandle 设置为 TRUE）将 GetCurrentProcess 返回的伪句柄转换为真实句柄。在命令行或环境变量中将句柄的值传递给进程 B。

# php - 防止下载图片的php代码

> ID：12107155
> 
> 赞同：1
> 
> 时间：2012-08-24T09:58:41.220
> 
> 标签：php

在我的网站上，我们正在做图像保护部分。我可以保护我网站中的图像不被其他人下载吗？那是我想保护我的图像不被其他人下载。是否可以使用 php 代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:00:30.197

你不能用 PHP 保护你的图像，因为 PHP 是服务器端的。可以使用 JS，因为它是客户端，但有人可以轻松地在浏览器中禁用 JS 并保存图像。无法完全保护您正在显示的图像。如果它可以通过 Internet 获得，任何人都可以下载它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:00:41.047

如果站点访问者可以看到您的图像，他们将能够保存或复制它们。例如，他们可以进行屏幕转储并从剪贴板保存图像。

您可以为其添加水印。

您可以在图像上或图像附近写一些版权字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T10:17:13.730

如果您使用这些用户显示的图像，则无法保护。但如果您不使用，则可以使用 .htaccess 文件进行保护。

# networking - 在网络驱动器上同时使用 LocalDB

> ID：12107158
> 
> 赞同：0
> 
> 时间：2012-08-24T09:59:08.060
> 
> 标签：networking, drive, localdb

我的配置如下：

带有 Z: 的服务器映射到 d:\something

带有 Z 的客户端：映射到位于 Z 的 \\server\ 一个 LocalDB MDF（和整个应用程序）：

单独一台计算机都可以，但不能同时工作。我收到一个异常说 System.Data.SqlClient.SqlException 0x80131904 无法打开登录请求的数据库 z:\xxx\xxx.mdf。登录失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:56:31.493

这是无法做到的。SQL 要求附加到数据库的物理文件应该由引擎以独占方式打开。

通过安装支持远程连接的 SQLEXPRESS 解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-06T14:45:14.487

这是可以做到的。但这并不容易（使用 SQL 2016 localdb 做到这一点）。

1.  在本地创建数据库。数据库将在 C:\Users\ 中创建，例如 `c:\Users\eric\database.mdf`
2.  关闭 SSMS（或断开与对象资源管理器的连接）
3.  从命令提示符： `MSSQLLocalDB stop`
4.  将 database.mdf 和 database_log.ldf 移动到网络驱动器（例如 s:\sql\database.mdf）。
5.  创建从原始位置到新位置的符号链接。从命令提示符： `mklink c:\Users\eric\database.mdf s:\sql\database.mdf mklink c:\Users\eric\database_log.ldf s:\sql\database_log.ldf`

6.  `MSSQLLocalDB start`

# php - php spl_autoload 不适用于语法错误的命名空间

> ID：12107161
> 
> 赞同：0
> 
> 时间：2012-08-24T09:59:10.440
> 
> 标签：php, namespaces, syntax-error

我从 [http://www.php.net/manual/ru/function.spl-autoload.php#92767得到这个例子](http://www.php.net/manual/ru/function.spl-autoload.php#92767)

但这会导致错误 *致命错误：spl_autoload() [function.spl-autoload]: Class space could not be loaded in C:\my_projects\site.local\www\index.php on line 18*

**/index.php**

```
// Your custom class dir
define('CLASS_DIR', 'oop/classes');

// Add your class dir to include path
set_include_path(get_include_path().PATH_SEPARATOR.CLASS_DIR);

// You can use this trick to make autoloader look for commonly used "My.class.php" type filenames
spl_autoload_extensions('.class.php');

// Use default autoload implementation
spl_autoload_register();

new space/my; 
```

**/oop/classes/space/my.class.php**

```
namespace space;
class my{
  public function __construct{
    var_dump('space class was here!');
  }
} 
```

我知道 PSR-0，但就我而言，我需要了解内置函数的工作原理

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T10:06:12.837

```
new space/my; 
```

应该

```
new space\my; 
```

注意：你错过`()`了`__construct``my.class.php`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T10:49:05.953

以下代码行可能是语法错误，因为您没有使用您可能想到的语言语法：

```
new space/my; 
```

让我们把这里的东西分开：

*   `new`-[`new`关键字](http://php.net/manual/language.oop5.basic.php)，我们用它来实例化一个新对象。
*   `space`- 类的名称，这里是字符串`"space"`。
*   `/`-[除法运算符](http://php.net/manual/en/language.operators.arithmetic.php)。
*   `my`- (undefined?) 常量，如果未定义`my`将导致字符串。`"my"`

正因为如此（这就是语言），PHP 自然会尝试实例化该类`space`，然后尝试将其与 string 分开`"my"`。例子：

```
$object = new space;
define('my', 0);
$result = $object / my; 
```

由于您使用自动加载和类`space`不存在，您会看到致命错误。

严格来说，语法错误不是在 PHP 中，而是使用了错误的语法（这里：`/`而不是`\`使用正确的符号来分隔命名空间）。

希望这会有所帮助。注意 PHP 的类型很松散，因此可以实例化的现有类可能[会产生除以零警告](http://codepad.org/5Yd16ku6)。

*调试`spl_autoload_register`：*由于这是一个内部函数，当使用时没有自动加载回调函数，您可以使用以下扩展它以进行调试：

```
spl_autoload_register(funcion($class) {
    echo 'Autoloading class: ', var_dump($class), "\n";
    return spl_autoload($class);
}); 
```

此外，您可能想要*添加*您的扩展而不是覆盖现有的：

```
($current = spl_autoload_extensions()) && $current .= ',';
spl_autoload_extensions($current . '.class.php');
# .inc,.php,.class.php 
```

# java - 在 Swing 中指定 Canvas 的位置

> ID：12107163
> 
> 赞同：5
> 
> 时间：2012-08-24T09:59:16.303
> 
> 标签：java, swing, user-interface, jframe, jpanel

我正在学习 Swing GUI 设计。我还没有完全解决的一件事是如何将添加添加`Canvas`到容器中的特定位置。

更具体地说：我创建了一个`Canvas`使用`Paint`方法的类。此类的对象被添加到面板中。我不太明白的是，它是如何以及在何处添加到面板的。在 Tkinter`Canvas`中是一个仅包含图像的小部件，但在 Swing 中，没有类似的小部件（可能不是最好的词）添加到仅包含 Canvas 对象而没有其他内容的 Frame 中。

对不起，如果它太模糊，我正在添加一个独立的代码。请忽略文本字段和标签。

```
import java.awt.BorderLayout;
import java.awt.Canvas;
import java.awt.Color;
import java.awt.Container;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JSeparator;
import javax.swing.JTextField;

//frame class
class frame_class2 extends JFrame implements ActionListener{
  //declare buttons
  JButton draw_button = new JButton("Draw");
  JButton quit_button= new JButton("Quit");
  JButton info_button = new JButton("Info");
  //declare labels
  JLabel x_loc = new JLabel("X:");
  JLabel y_loc = new JLabel("Y:");
  JLabel w_label= new JLabel("Width:");
  JLabel h_label = new JLabel("Height:");
  //Layout
  FlowLayout layout_frame1 = new FlowLayout();
  //Text boxes
  JTextField x_loc_box = new JTextField("0");
  JTextField y_loc_box = new JTextField("0");
  JTextField w_loc_box = new JTextField("100");
  JTextField h_loc_box = new JTextField("100");
  //Info 
  JOptionPane info1 = new JOptionPane();
  //Canvas
  //Canvas area1 = new Canvas();
  //Containers
  JPanel panel1 = new JPanel();
  JPanel panel2= new JPanel();
  //Container container3 = new Container();
  Container con = getContentPane();

  public frame_class2(){    
    //panel1 = getContentPane();
    //add(area1);
    //add labels to the first panel
    panel1.setLayout(layout_frame1);
    panel2.setLayout(layout_frame1);
    panel1.add(x_loc);
    panel1.add(x_loc_box);
    panel1.add(y_loc);
    panel1.add(y_loc_box);
    panel1.add(w_label);
    panel1.add(w_loc_box);
    panel1.add(h_label);
    panel1.add(h_loc_box);
    //add buttons to the second panel
    draw_button.addActionListener(this);
    quit_button.addActionListener(this);
    info_button.addActionListener(this);
    panel2.add(draw_button);
    panel2.add(quit_button);
    panel2.add(info_button);

    con.add(panel1, BorderLayout.NORTH);
    //con.add(new JSeparator(), BorderLayout.CENTER);

    con.add(panel2, BorderLayout.SOUTH);
    setDefaultCloseOperation(super.EXIT_ON_CLOSE);
    setTitle("Graphics Toolbox v2");
     //Set up the content pane.
      //this.getContentPane();
    pack();
    //setSize(500, 500);
    setLocationRelativeTo(null);
    //setBackground(Color.BLUE);
    setVisible(true);
  }

  @Override
  public void actionPerformed(ActionEvent e) {
    // TODO Auto-generated method stub
    if (e.getSource()==info_button){
        info1.showMessageDialog(this, "hahahahahaha"); 
    }
    else if (e.getSource()==quit_button){
        System.exit(0);
    }
    else if (e.getSource()==draw_button){

        graphics_class2 input1 = new graphics_class2();
        con.add(input1);        
        //info1.showMessageDialog(this, "Not yet!");

    }

  }

}

//graphics class
class graphics_class2 extends Canvas{

  public graphics_class2(){
    //frame_class1 inst1 = new frame_class1();
    //Canvas img1 = inst1.area1;
    setSize(50,50);
    //setBackground(Color.BLUE);
  }

  public void paint(Graphics g){
    super.paint(g); 
    g.setColor(Color.GREEN);
    g.fillArc(0, 0, 50, 50, 50, 50);

  }

}

public class main_code {

    public static void main(String args[]){
    frame_class2 inst1 = new frame_class2();
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T10:41:43.833

“Swing 程序应该覆盖`paintComponent()`而不是覆盖`paint()`。”—<a href="http://java.sun.com/products/jfc/tsc/articles/painting/index.html#callbacks" rel="nofollow noreferrer">*绘画在 AWT 和 Swing：绘制方法*中。`JPanel`或者`JComponent`是常见的选择，如此处所建议[的](https://stackoverflow.com/a/3538279/230513)。您可以使用合适的布局控制[布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)。

附录：*这有什么关系`Canvas`？*

该类`java.awt.Canvas`是一个 AWT 组件；而是使用 Swing 组件`javax.swing.JPanel`。这是您的程序的一个变体，它仅选择随机颜色，但它可能会让您了解如何处理其他属性。[这里](https://stackoverflow.com/a/11944233/230513)有一个相关的例子。

![图片](../Images/1ee8dfa0ace615a07c4824724d135802.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class MainCode {

    public static void main(String args[]) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                MainView fc = new MainView();
            }
        });
    }

    private static class MainView implements ActionListener {

        private JFrame f = new JFrame();
        private JButton colorButton = new JButton("Color");
        private JButton quitButton = new JButton("Quit");
        private JButton infoButton = new JButton("Info");
        private JLabel x_loc = new JLabel("X:");
        private JLabel y_loc = new JLabel("Y:");
        private JLabel w_label = new JLabel("Width:");
        private JLabel h_label = new JLabel("Height:");
        private JTextField x_loc_box = new JTextField("0");
        private JTextField y_loc_box = new JTextField("0");
        private JTextField w_loc_box = new JTextField("100");
        private JTextField h_loc_box = new JTextField("100");
        private JOptionPane info1 = new JOptionPane();
        private JPanel panel1 = new JPanel();
        private JPanel panel2 = new JPanel();
        private GraphicsClass graphicsClass = new GraphicsClass();

        public MainView() {
            panel1.add(x_loc);
            panel1.add(x_loc_box);
            panel1.add(y_loc);
            panel1.add(y_loc_box);
            panel1.add(w_label);
            panel1.add(w_loc_box);
            panel1.add(h_label);
            panel1.add(h_loc_box);
            colorButton.addActionListener(this);
            quitButton.addActionListener(this);
            infoButton.addActionListener(this);
            panel2.add(colorButton);
            panel2.add(quitButton);
            panel2.add(infoButton);
            f.add(panel1, BorderLayout.NORTH);
            f.add(graphicsClass, BorderLayout.CENTER);
            f.add(panel2, BorderLayout.SOUTH);
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            f.setTitle("Graphics Toolbox v2");
            f.pack();
            f.setLocationRelativeTo(null);
            f.setVisible(true);
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            if (e.getSource() == infoButton) {
                JOptionPane.showMessageDialog(f, "hahahahahaha");
            } else if (e.getSource() == quitButton) {
                System.exit(0);
            } else if (e.getSource() == colorButton) {
                graphicsClass.randomColor();
                graphicsClass.repaint();
            }
        }
    }

    private static class GraphicsClass extends JPanel {

        private static final int SIZE = 128;
        private static final Random r = new Random();
        private Color color = Color.green;

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(SIZE, SIZE);
        }

        public void randomColor() {
            this.color = new Color(r.nextInt());
        }

        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.setColor(color);
            int w = getWidth();
            int h = getHeight();
            g.fillArc(0, h / 4, w, h, 45, 90);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:10:13.123

将画布附加到此面板的末尾。组件已添加到已显示的容器中，`validate`必须在该容器上调用才能显示新组件。

# python - 模块脚本的过时路径

> ID：12107164
> 
> 赞同：0
> 
> 时间：2012-08-24T09:59:19.540
> 
> 标签：python, import, arcgis

我有一个在 ArcGIS 中运行的 python 脚本，它显然试图从过时的位置导入一个模块。我收到一条错误消息，包括回溯信息：

```
File "x://outdated_path/SDMmodlue.py", line 25, in appendSDMValues ....etc 
```

但是，模块脚本`SDMmodule.py`不再位于该位置，我没有找到它试图从那里找到它的原因。模块脚本`SDMmodule.py`现在与主脚本位于同一目录中；一个完全不同的位置。可能是 Python 问题，还是 ArcGIS 的问题？

# java - java - 如何在java中的jtable中的特定行中添加复选框？

> ID：12107173
> 
> 赞同：2
> 
> 时间：2012-08-24T09:59:37.473
> 
> 标签：java, swing, jtable, jcheckbox

我有一个`JTable`5 行 8 列。我只想在最后一行添加复选框。因此，我尝试了[如何将复选框添加到 JTABLE swing](https://stackoverflow.com/questions/7391877/how-to-add-checkboxes-to-jtable-swing) h 中的示例。在该示例中，我看到仅为列添加复选框...但是如何在所有单元格的最后一行添加复选框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:05:27.423

JTable 有两种感兴趣的方法：`getCellRenderer(int, int)`和`getCellEditor(int, int)`. 通过覆盖两者，您可以根据正在渲染/编辑的行和列提供特定的渲染器/编辑器组件。不过，您可能需要一个有创意的 TableModel - swing JTable 并非旨在根据行处理不同类型的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T10:35:05.153

*   [JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)（以及类似的 GUI、MsExcell、数据库）基于列方向

*   [在提到的示例中为](https://stackoverflow.com/a/7392163/714968)[XxxTableModel](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)严格定义了[ColumnClass](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)，删除这些代码行

*   可以`ColumnClass`为具体单元格（最后一行中的每个单元格）创建和定义，但需要在 XxxTableModel 中正确定义

*   也许最简单的方法是使用[Render](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)，

*   您的问题不是具体的详细答案，当然也许还有其他选择

# android - 使用jsp将android连接到mysql

> ID：12107180
> 
> 赞同：2
> 
> 时间：2012-08-24T10:00:06.687
> 
> 标签：android, jsp, android-emulator

我正在尝试使用 jsp 与 mysql 连接 下面是文件 android 和 jsp 的代码，请看一下它既不工作也不给我任何错误会有什么问题？

安卓代码：

```
 package com.example.prj;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {
Button submit;
TextView tv;
EditText et1,et2;
String user,pass;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    submit=(Button)findViewById(R.id.button1);
    tv=(TextView)findViewById(R.id.textView1);
    et1=(EditText)findViewById(R.id.editText1);
    et2=(EditText)findViewById(R.id.editText2);
    //user=et1.getText().toString();
    //pass=et2.getText().toString();

    submit.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            try{
                ArrayList<BasicNameValuePair> namevaluepair=new ArrayList<BasicNameValuePair>();
                namevaluepair.add(new BasicNameValuePair("user", user=et1.getText().toString()));
                namevaluepair.add(new BasicNameValuePair("pass", pass=et2.getText().toString()));
                HttpClient client=new DefaultHttpClient();
                HttpPost post=new HttpPost("http://10.0.2.2:8080/login.jsp");
                post.setEntity(new UrlEncodedFormEntity(namevaluepair));
                HttpResponse response=client.execute(post);
                HttpEntity entity=response.getEntity();
                InputStream in=entity.getContent();
                try{
                    BufferedReader bf=new BufferedReader(new InputStreamReader(in));
                    StringBuilder sb=new StringBuilder();
                    String line=null;
                    while((line=bf.readLine())!=null){

                        sb.append(line);

                    }
                    String result=sb.toString();
                    if(result.equalsIgnoreCase("vinod")){
                        Intent i=new Intent(MainActivity.this,loggedin.class);

                        i.putExtra("key",user);
                        startActivity(i);
                    }else{
                        tv.setText("invalid");
                    }

                }catch(Exception e){
                    e.printStackTrace();
                }
            }catch(Exception e){
                Log.e("log_tag", "Error in http"+e.toString());
            }
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

JSP代码：

```
<%@page import="java.io.*"%>
<%@page import="java.sql.*"%>
<%!
String username;
String password; 
Statement stmt=null;
ResultSet rs=null;
Connection con=null;
%>
<%
String driver="com.example.mysql.Driver";
Class.forName(driver).newInstance();

try{
 String url="jdbc:mysql://localhost/log";
  con = DriverManager.getConnection(url,"root","");
 stmt=con.createStatement();

}catch(Exception e){
e.printStackTrace(); 

}
if(!con.isClosed()){
username=request.getParameter("user");
password=request.getParameter("pass");
rs=stmt.executeQuery("select * from login");
while(rs.next()){
if(rs.getString("user")==username && rs.getString("pass")==password){
 out.println("vinod");
 System.out.println("vinod kakad");
}else{

 out.println("vinod");
 System.out.println("vinod kakad else part");
}
}
  else{
  out.println("lost");
  System.out.println("vinod kakad else lost part");
  } 

  }

 %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:32:40.347

我正在使用以下代码从 Tomcat 服务器上的 JSP 页面连接到我的 MySQL 数据库

```
<%! String db;
    String user;
    String pw;
%>
<%
        Class.forName("com.mysql.jdbc.Driver");
        Connection conn = DriverManager.getConnection("jdbc:mysql:///"+db, user, pw);
        Statement stmt = conn.createStatement();
        String sql = ""; //Your SQL here
        ResultSet rs = stmt.executeQuery(sql);
        while (rs.next()) {
    %><hr>
    <%= rs.getString("<columnName")%>
    <p>
        <%
            }
        //Cleanup, just to be nice :)
        rs.close();
        stmt.close();
        conn.close();
        %> 
```

这个jsp代码连接到我的数据库，但我还不知道如何将它传递给Android

# android - 图库图片背景

> ID：12107181
> 
> 赞同：0
> 
> 时间：2012-08-24T10:00:08.987
> 
> 标签：android, drawable, android-gallery

我在android画廊中设置了一个背景图片：

```
ga.setBackgroundDrawable(R.drawable.myimage); 
```

这是工作。
如何在 android 图库中设置背景图像的位置？

**详细**信息：
我在背景图像上有一个半透明的图像画廊。
所以我需要将图库中的图像放在背景图像的中心。
不是全宽图像。

如果不可能，我如何在图库中选择的图像上设置图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:48:11.047

您可以设置背景图像，因为您知道图库中使用的选定图像`gallery.getSelectedItemPosition()`

使用这个位置，您应该能够从您提供给画廊适配器的图像列表中获取图像

例如，如果它是一个可绘制列表：

```
 imageView.setImageDrawable(listDrawables.get(gallery.getSelectedItemPosition())); 
```

至于居中部分，您应该设置

```
 <ImageView
      ...
      android:scaleType="centerInside"
      ... /> 
```

# c# - 如何让用户使用文件上传控件从任何位置选择图像以保存到数据库中

> ID：12107185
> 
> 赞同：1
> 
> 时间：2012-08-24T10:00:34.550
> 
> 标签：c#, asp.net, sql, visual-studio-2010, file-upload

我希望用户从此位置选择任何文件（C:\Users\Ramakrishnan\Desktop\New folder\001.jpg），但是我不知道该怎么做。为了开始学习，我在这个位置只硬编码了一个文件名，即 001.jpg。我使用文件上传控件

```
if (FileUpload1.HasFile)
{
  FileStream FS = new FileStream(@"C:\Users\Ramakrishnan\Desktop\New folder\001.jpg", FileMode.Open, FileAccess.Read);
  byte[] img = new byte[FS.Length];
} 
```

如果可能的话，我想让用户更改整个位置。我的意思是，他应该从任何地方加载图像，而不是上面的硬编码位置。请问怎么办:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:11:47.163

这应该可以解决问题：

```
string[] files;
files = Directory.GetFiles("C:\Users\Ramakrishnan\Desktop\New folder", "*.jpg");
string file = "";
int count = files.Count();

if (count > 0) {
   if (FileUpload1.HasFile)
   {
      file = files[0];
      FileStream FS = new FileStream(file, FileMode.Open, FileAccess.Read);
      byte[] img = new byte[FS.Length];
   }
}

if (count > 1) {
   if (FileUpload2.HasFile)
   {
      file = files[1];
      FileStream FS = new FileStream(file, FileMode.Open, FileAccess.Read);
      byte[] img = new byte[FS.Length];
   }
} 
```

不要忘记添加：

```
using System.IO; 
```

# c# - 存储库/UoW - 使用还是不使用？

> ID：12107190
> 
> 赞同：1
> 
> 时间：2012-08-24T10:00:46.750
> 
> 标签：c#, entity-framework, ninject, code-first

我知道这已经做过一百万次了，但我仍然有两种想法：

1.  EF - UoW / 存储库 - 服务 - Web 或
2.  EF - 服务 - 网络

似乎 UoW / Repository 层是多余的，因为您可以模拟 DbContext 等。这将使实现变得简单，并且使服务更接近 EF 似乎更加通用。

有人对此有什么好的建议吗？

不过，我对此有一个问题是我将使用 Ninject 进行连接。在 web 端，如果我想将 DbContext 注入到需要引用 EF 的服务中。这似乎是错误的。

```
kernel.Bind<FunkySoftwareContext>().ToSelf().InRequestScope(); 
```

有没有办法抵消这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:10:59.323

取决于您是否想要正确的抽象。

服务层不应公开数据库实体。它应该公开正确的业务/领域模型。它们可能看起来也可能不完全像 db 实体。

恕我直言，这就是存储库模式的好处。它采用业务模型表示并将其转换为数据库/orm 可以使用的东西（反之亦然）。

但是，如果您已经确定从 Entity 框架加载的对象是您的域/业务模型的完美表示，那么请继续跳过存储库。

我在这里写了一篇博客文章：http: [//blog.gauffin.org/2012/06/protect-your-data/](http://blog.gauffin.org/2012/06/protect-your-data/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T07:33:02.777

（这将是一个评论，但它变得太大了！）如果你有 2 个问题，你应该问 2 个问题。如果这是一个 Ninject 问题，我会回答它，但标题表明不是。

在 ninject 方面，请参阅[我应该在哪里使用 Ninject 2+ 进行注射（以及如何安排我的模块？）](https://stackoverflow.com/questions/1475575/where-should-i-do-dependency-injection-with-ninject-2)（包括链接到副本的链接）。

总结是单个组合根管理绑定过程是正确的，因此最终您将最终拥有*一些东西*（请参阅@jgauffin 答案），`InRequestScope`并且在 CR 中可以说是正确的地方。

其他方法（阅读所有 UOW MVC Repository InRequestScope Qs & As）归结为将业务层服务类注入到 Controller 类中

1.  `IDisposable`如果它下面的某个乌龟正在使用 DBContext，则一直向下实施可能是管理它的更好方法。
2.  （更理想地）让控制器以显式方式显式提交任何 UOW（并处理故障）（这并不完全排除使用过滤器等进行的*一些*包罗万象的处理）。我绝对不是说控制器应该直接与 DBContext 对话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T07:49:30.180

> 似乎 UoW / Repository 层是多余的，因为您可以模拟 DbContext 等。这将使实现变得简单，并且使服务更接近 EF 似乎更加通用

即使您自己现在也意识到 Repository 模式过度使用，EF 本身使用 DbContext 实现 UoW 并使用 DbSet 实现 Repository。因此，无需将 UoW/Repository 添加到您的架构中。

如果您需要更多关于[这里](https://stackoverflow.com/questions/5625746/generic-repository-with-ef-4-1-what-is-the-point)和[这里](https://stackoverflow.com/questions/5488313/organizationally-where-should-i-put-common-queries-when-using-entity-framework)的建议。甚至来自 Ayende 的建议：[这里](http://ayende.com/blog/153700/ask-ayende-aggregates-and-repositories)和[这里](http://ayende.com/blog/3955/repository-is-the-new-singleton)

# asp.net-mvc - 从 Asp.net MVC2 迁移到 MVC4

> ID：12107191
> 
> 赞同：14
> 
> 时间：2012-08-24T10:00:50.573
> 
> 标签：asp.net-mvc

我想将 MVC2 网站转换为 MVC4。我知道有一些工具可以帮助从 MV2 转换到 MVC3，但我找不到从 MVC2 转换到 MVC4 所需的任何工具或步骤。请指点我一些文章/博客，它可以为我提供更多信息来帮助这个过程。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-13T05:40:53.370

看起来现在有一个[解决方案发布到一个类似的问题](https://stackoverflow.com/a/14799353/39532)，表明存在两个可以[从 MVC 2 迁移到 MVC 3 ，然后从 MVC 3 到 MVC 4](http://www.dotnetexpertguide.com/2013/02/aspnet-mvc-auto-upgrade-mvc-3-to-mvc-4-application.html)的包。

根据我最近进行相同升级的经验，这是您需要的：

1.  确保您已将解决方案从 VS2008 升级到 VS2010
2.  [ASP.NET MVC 3 Application Upgrader](http://aspnet.codeplex.com/releases/view/59008) - 用于升级 MVC2 -> MVC3 的独立包
3.  [UpgradeMvc3ToMvc4](https://nuget.org/packages/UpgradeMvc3ToMvc4) - 用于从 MVC3 升级的 nuget 包 -> MVC4

最近使用了这两种方法，我可以保证它们对我来说效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T19:09:33.547

不幸的是，没有从 MVC 2 到 MVC 4 的直接路径。需要完成到 MVC 3 的中间步骤。

[MVC 2 到 MVC 3](http://www.asp.net/whitepapers/mvc3-release-notes#upgrading) 然后 [MVC 3 到 MVC 4](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T00:30:32.200

就个人而言，我发现转换通常会出现小故障和问题。我更喜欢直接走，创建一个新的 MVC 项目，然后将所有控制器、视图、内容等移动到新项目中。确保添加您可能正在使用的任何包（但我怀疑您在 MVC2 应用程序中使用 NuGet），并配置项目设置以匹配原始设置。

对于中型项目，您可以在大约 5 分钟内完成此操作，在大型项目中可能需要 10-15 分钟，而转换项目可能需要很长时间才能解决各种问题。

这没有考虑到 MVC2 和 3 之间的任何重大变化，但幸运的是，这些变化非常小，大多数人从来没有。任何项目升级实用程序都会遇到同样的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T10:04:26.427

中有一个专门用于此的部分[`release notes`](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)。

# php - injquery展开折叠+php

> ID：12107192
> 
> 赞同：0
> 
> 时间：2012-08-24T10:00:51.500
> 
> 标签：php, javascript, jquery-ui, jquery

您好我正在执行 mysql 查询并得到以下结果

```
Array
(
    [0] => 131.208.0.0
    [1] => 141.128.0.0
    [2] => 141.129.0.0
    [3] => 155.182.0.0
    [4] => 155.183.0.0
 ) 
```

使用 jquery expand 我需要打印如下所示如果我单击 + 它应该展开并显示以下值。我在 UI +131、+141 和 +151 中显示唯一值。我需要将这些值传递给 php 并在单击时获得结果。

```
 -131.0.0.0
  -131.208.0.0
-141.0.0.0
  -141.1298.0.0
  -141.129.0.0
+155.182.0.0 
```

我的代码

```
$(document).ready(function(){
    //hide the all of the element with class msg_body
    $(".msg_body").hide();
    //toggle the componenet with class msg_body
    $(".msg_head").click(function(){
        $(this).next(".msg_body").slideToggle(600);

<div class="msg_body">
        <?php 
            $octets = $this->Ip;
            foreach($octets as $octet){
                //echo "+".$octet."<br />";
            }

            // Here display unique octet value.
            $octetets = $this->octent1;
            foreach($octetets as $octet){
                echo "+".$octet."<br />";
            }

        ?>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:30:04.470

您的代码确实可以进行一些细微的更改... [请参阅演示](http://jsfiddle.net/jcThh/1/)。

# mysql - 如何优化这个怪物查询

> ID：12107195
> 
> 赞同：-1
> 
> 时间：2012-08-24T10:01:02.940
> 
> 标签：mysql, database

我一直在努力处理以下查询（以及其他一些类似的查询），我觉得我错过了一些东西，或者我使用了错误类型的数据库或其他东西。

该查询用于获取过去 10 年在英国与特定城镇每年的新电影总数和停止放映（关闭）的电影总数。多年来，这些查询也针对许多城镇和县运行。

其他查询做类似的事情，有时`UNION ALL`在查询的末尾添加 a 以获取打开或关闭的记录年份。

还有一些查询是针对月度数据和季度数据而不是年度数据运行的，还有一些查询只是比较特定季度（例如第三季度）或月份（例如三月）的历史开盘/关盘。

这是将 2012 年英国与伦敦进行比较的查询：

```
SELECT inc.opening_year as year, inc.number_of_films as opens,
    diss.number_of_films as closures, inc.uk_films as uk_opens,
    diss.uk_films as uk_closures
FROM
(SELECT film_db.opening_year, uk.number_of_films as uk_films,
        COUNT(film_db.id_film_db) as number_of_films
    FROM film_db
    JOIN postcodes ON id_postcodes = opening_postcode_id
    JOIN towns ON id_towns = town_id AND town = 'London'
    JOIN (SELECT opening_year, COUNT(film_db.id_film_db) as number_of_films
            FROM film_db
            WHERE opening_year <= 2012 AND opening_year >= (2012 - 10)
            GROUP BY opening_year
        ) uk ON uk.opening_year = film_db.opening_year
    WHERE film_db.opening_year <= 2012 AND film_db.opening_year >= (2012 - 10)
    GROUP BY film_db.opening_year
    ORDER BY film_db.opening_year DESC
) inc
JOIN
(SELECT film_db.closing_year, uk.number_of_films as uk_films,
        COUNT(film_db.id_film_db) as number_of_films
    FROM film_db
    JOIN postcodes ON id_postcodes = postcode_id
    JOIN towns ON id_towns = town_id AND town = 'London'
    JOIN (SELECT closing_year, COUNT(film_db.id_film_db) as number_of_films
            FROM film_db
            WHERE film_db.closing_year <= 2012 AND film_db.closing_year >= (2012 - 10)
            GROUP BY film_db.closing_year
        ) uk ON uk.closing_year = film_db.closing_year
    WHERE film_db.closing_year <= 2012 AND film_db.closing_year >= (2012 - 10)
    GROUP BY film_db.closing_year
    ORDER BY film_db.closing_year DESC
) diss ON diss.closing_year = inc.opening_year 
```

数据库`SHOW CREATE TABLE`输出如下：

**电影数据库：**

```
CREATE TABLE `film_db` (
  `id_film_db` int(11) NOT NULL AUTO_INCREMENT,
  `film_name` varchar(255) DEFAULT NULL,
  `category` varchar(100) DEFAULT NULL,
  `status` varchar(50) DEFAULT NULL,
  `opening_date` date DEFAULT NULL,
  `opening_year` int(4) DEFAULT NULL,
  `opening_month` int(2) DEFAULT NULL,
  `opening_quarter` int(1) DEFAULT NULL,
  `closing_date` date DEFAULT NULL,
  `closing_year` int(4) DEFAULT NULL,
  `closing_month` int(2) DEFAULT NULL,
  `closing_quarter` int(1) DEFAULT NULL,
  `datetime` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `postcode_id` int(4) NOT NULL DEFAULT '0',
  `opening_postcode_id` int(4) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id_film_db`),
  KEY `opening_date` (`opening_date`),
  KEY `status` (`status`),
  KEY `postcode_id` (`postcode_id`),
  KEY `type` (`category`),
  KEY `opening_year` (`opening_year`),
  KEY `opening_month` (`opening_month`,`opening_year`) USING BTREE,
  KEY `opening_quarter` (`opening_quarter`,`opening_year`) USING BTREE,
  KEY `closing_year` (`closing_year`),
  KEY `closing_month` (`closing_year`,`closing_month`),
  KEY `closing_quarter` (`closing_year`,`closing_quarter`),
  KEY `closing_date` (`closing_date`),
  KEY `opening_closing_date` (`opening_date`,`closing_date`),
  KEY `opening_postcode` (`opening_postcode_id`),
  FULLTEXT KEY `film_name` (`film_name`)
) ENGINE=MyISAM AUTO_INCREMENT=10649173 DEFAULT CHARSET=utf8 
```

**邮编：**

```
CREATE TABLE `postcodes` (
  `id_postcodes` int(4) NOT NULL AUTO_INCREMENT,
  `postcode` varchar(9) NOT NULL,
  `town_id` int(4) NOT NULL,
  `lat` float NOT NULL,
  `lng` float NOT NULL,
  PRIMARY KEY (`id_postcodes`),
  UNIQUE KEY `postcode` (`postcode`) USING BTREE,
  KEY `town` (`town_id`)
) ENGINE=MyISAM AUTO_INCREMENT=5705 DEFAULT CHARSET=latin1 
```

**城市：**

```
CREATE TABLE `towns` (
  `id_towns` int(4) NOT NULL AUTO_INCREMENT,
  `town` varchar(150) NOT NULL,
  `county_id` int(3) NOT NULL,
  PRIMARY KEY (`id_towns`),
  KEY `county` (`county_id`)
) ENGINE=MyISAM AUTO_INCREMENT=1606 DEFAULT CHARSET=latin1 
```

这是`EXPLAIN EXTENDED`输出：

```
1   PRIMARY <derived2>      ALL                                                                                                                     11      100 
1   PRIMARY <derived4>      ALL                                                                                                                     11      100     Using where; Using join buffer
4   DERIVED <derived5>      ALL                                                                                                                     11      100     Using where; Using temporary; Using filesort
4   DERIVED film_db         ref     postcode_id,closing_year,closing_month,closing_quarter  closing_year    5   uk.closing_year                     2       100     Using where
4   DERIVED postcodes       eq_ref  PRIMARY,town                                            PRIMARY         4   film_db.postcode_id                 1       100 
4   DERIVED towns           eq_ref  PRIMARY                                                 PRIMARY         4   postcodes.town_id                   1       100     Using where
5   DERIVED film_db         ALL     closing_year,closing_month,closing_quarter                                                                      9895680 47.66   Using where; Using temporary; Using filesort
2   DERIVED <derived3>      ALL                                                                                                                     11      100     Using where; Using temporary; Using filesort
2   DERIVED film_db         ref     opening_year,opening_postcode                           opening_year    5   uk.opening_year                     3       100     Using where
2   DERIVED postcodes       eq_ref  PRIMARY,town                                            PRIMARY         4   film_db.opening_postcode_id         1       100 
2   DERIVED towns           eq_ref  PRIMARY                                                 PRIMARY         4   postcodes.town_id                   1       100     Using where
3   DERIVED film_db         ALL     opening_year                                                                                                    9895680 54.53   Using where; Using temporary; Using filesort 
```

如您所见，MySQL 认为对`film_db`表进行过滤不会产生任何性能差异，因此它不使用任何键。

**所以：**

我可以改进此查询以更好地使用索引吗？

我可以改进索引以使查询运行得更快吗？

是否应该使用另一种数据库类型（不是 MySQL）来代替这种查询，我最感兴趣的是计算具有复杂条件和连接的条目数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:35:21.690

这是我要尝试的第一件事：

```
CREATE TABLE opens 
SELECT opening_year, COUNT(film_db.id_film_db) as number_of_films
FROM film_db
WHERE opening_year <= 2012 AND opening_year >= (2012 - 10)
GROUP BY opening_year

CREATE TABLE closures 
SELECT closing_year, COUNT(film_db.id_film_db) as number_of_films
FROM film_db
WHERE film_db.closing_year <= 2012 AND film_db.closing_year >= (2012 - 10)
GROUP BY film_db.closing_year 
```

我将使用这两个表而不是您现在使用的子选择。

> 其他查询做类似的事情，有时在查询的末尾添加一个 UNION ALL 来获取开店或关店的记录年份。还有一些查询是针对月度数据和季度数据而不是年度数据运行的，还有一些查询只是比较特定季度（例如第三季度）或月份（例如三月）的历史开盘/关盘。

我认为您更频繁地运行这些选择，然后打开/关闭表的内容会改变。因此，每次运行此类查询时都不必重新构建这些表。

* * *

> 我可以改进此查询以更好地使用索引吗？我可以改进索引以使查询运行得更快吗？是否应该使用另一种数据库类型（不是 MySQL）来代替这种查询，我最感兴趣的是计算具有复杂条件和连接的条目数？

当然还有许多其他可能的改进。当然应该有一种方法让 MySQL 使用索引。您应该注意，数据库引擎不能组合单独的索引，也就是说，在这种情况下，index on`opening_postcode_id`和 index on`opening_year`不能组合。我不知道为什么它们都不使用，但我可以肯定地说像这两个这样的索引会改进这个查询

```
KEY `opening_year_postcode` (`opening_year`, `opening_postcode_id`)
KEY `closing_year_postcode` (`closing_year`, `postcode_id`) 
```

看到这个答案[https://stackoverflow.com/a/6295744/176569](https://stackoverflow.com/a/6295744/176569)

* * *

这些年来我了解到，这种性能调优是一个渐进的过程。您将不得不尝试更多技巧，评估性能增益，最后您将只应用一两个技巧。

在这一点上，我不会考虑为其他数据库供应商放弃 MySQL。您的性能问题的原因可能不是 MySQL。

# javascript - 为新对象添加函数，将对象添加到数组中。难以理解“this”关键字

> ID：12107196
> 
> 赞同：0
> 
> 时间：2012-08-24T10:01:05.627
> 
> 标签：javascript

> **可能重复：**
> [JavaScript“this”关键字](https://stackoverflow.com/questions/3127429/javascript-this-keyword)

我编写了一个名为 add 的函数，其参数为 firstName、lastName 和 email、telephone。在这个新函数中，目的是创建一个新的联系人对象，如 bob 和 mary。

我的问题是关于`this`关键字的上下文和使用。`this`允许我将新创建的对象的属性值设置为传入的适当的添加函数参数。如果`this`允许我在代码中执行此操作的目的是什么？这个词是什么？是否启用允许通过函数参数传递任何字符串以便可以创建多个对象的功能？

我`this`最近使用该关键字使我能够在多个对象上使用相同的函数，而不必为每个对象编写单独的函数。例如，可以为所有对象设置年龄属性的函数，而不是每个对象单独的年龄更改函数。

其次，我想检查一下我对将数据插入到联系人数组中适当位置的方式的理解是否正确。最后，请问这里this关键字的上下文是什么？

```
contacts[contacts.length] = this; 
```

这与以下内容相同：

```
contacts[2] = this; 
```

如果我没有以最简洁的方式表达我的问题，我深表歉意。请在下面找到我的代码。对于这种编码情况的关键字的任何答案或解释`this`将不胜感激。

```
var bob = {
    firstName: "Bob",
    lastName: "Jones",
    phoneNumber: "(650) 777 - 7777",
    email: "bob.jones@example.com"
};

var mary = {
    firstName: "Mary",
    lastName: "Johnson",  
    phoneNumber: "(650) 888 - 8888",
    email: "mary.johnson@example.com"
};

var contacts = [bob, mary];

    function add(firstName, lastName, email, telephone){
    this.firstName = firstName; 
    this.lastName = lastName;
    this.email = email;
    this.telephone = telephone;
    contacts[contacts.length] = this
    }

    var response1 = prompt("First Name?");
    var response2 = prompt("Last Name?");
    var response3 = prompt("Email?");
    var response4 = prompt("Telephone No.?");
    add(response1, response2, response3, response4); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:05:56.183

`this`在您的 add 函数中实际上是指全局窗口对象，因此您将其添加到数组而不是新联系人。

您需要在该函数中创建一个新对象并将其添加到数组中：

```
function add(firstName, lastName, email, telephone){
    var newContact = {
        firstName: firstName,
        lastName: lastName,
        email: email,
        telephone: telephone
    }
    contacts[contacts.length] = newContact;
} 
```

这是一个很好的参考`this`- [http://bonsaiden.github.com/JavaScript-Garden/#function.this](http://bonsaiden.github.com/JavaScript-Garden/#function.this)

如果你真的想使用，你可以通过使用or调用函数来`this`指定所指的内容：`this``call``apply`

```
add.call({}, response1, response2, response3, response4); // pass new object as this
add.apply({}, [response1, response2, response3, response4]); // pass new object as this 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:12:50.513

`this`关键字有时具有实际用途：

*   对于`SOMETHING.add(response1, response2, response3, response4)`，`this`将是`SOMETHING`。

*   对于`SOMETHING = new add(response1, response2, response3, response4)`,`this`将是新创建的对象`SOMETHING`。

但是，当您将 add() 作为函数而不是方法调用时，`this`是全局（窗口）对象。因此，您只是创建了四个全局变量（firstName、lastName、email 和 phone），以后每次向数组添加条目时都会覆盖这些变量。请注意，如果您的代码是在最近的 JavaScript 解释器的可选“ES5 严格模式”下执行的，那么 add() 函数的第一行将[导致运行时错误](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode#.22Securing.22_JavaScript)。

（如果您想阅读更多内容，请参阅[“this”关键字如何工作？](https://stackoverflow.com/questions/3127429/javascript-this-keyword)。）

在你的情况下，我会避免`this`而是显式地创建一个新对象。

```
function add(firstName, lastName, email, telephone){
    var obj = {
        firstName: firstName,
        lastName: lastName,
        email: email,
        telephone: telephone
    };
    contacts[contacts.length] = obj;
} 
```

关于`contacts[contacts.length] = obj;`，另一种方法是使用`contacts.push(obj);`. 但是，您拥有它的方式非常好，事实上，性能可能会稍好一些。只需选择您喜欢的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T10:07:44.937

`this`都是关于范围和上下文的。它指的是使用它的更广泛的上下文。

这是一个例子：

```
function MyObject(one,two) {
this.one = one;
this.two = two;
}

Myobject.prototype.SayNumbers() {
alert(this.one + this.two);
}

var myobj = new MyObject("Foo","Bar");
myobj.Saynumbers(); 
```

在上面示例的上下文中，`this`“属于”它在其中使用的函数——“myobj”对象。这允许它访问对象的属性并警告它们。

如果您`this`在全局范围内使用关键字（即不在函数/对象内），它将引用窗口对象。

`this`也可以通过引用传递——这对事件处理程序很有用。对于 onclick 事件，您可以传递`this`给事件处理函数并使用单击的对象执行操作。

尝试试验并做一些研究 - 这个网站有一些很好的例子：[http ://www.quirksmode.org/js/this.html](http://www.quirksmode.org/js/this.html)

# javascript - YouTube（注入）视频结束回调

> ID：12107202
> 
> 赞同：16
> 
> 时间：2012-08-24T10:01:35.130
> 
> 标签：javascript, jquery, callback, youtube, youtube-api

我将 YouTube iframe 注入准备好的文档中的 div 并将其绑定到单击：

```
jQuery(document).ready(function($) {
    jQuery('.video-thumb').click(function(){
        ...
        $('#player').html('<iframe width="761" height="421" src="http://www.youtube.com/embed/' + $(this).attr('videoid') + '?rel=0&wmode=transparent" frameborder="0" allowfullscreen></iframe>');
        ...
    }
 } 
```

我想在视频结束时进行回调。我已阅读有关[onYouTubePlayerAPIReady](https://stackoverflow.com/questions/7853904/how-to-detect-when-a-youtube-video-finishes-playing)的信息，但必须将其放在文档之外。

我试图通过这个结构外部文件准备加载视频播放器：

```
var player;
function onYouTubePlayerAPIReady() {
    player = new YT.Player('player', {
      height: '421',
      width: '761',
      videoId: '',
      playerVars: { autoplay: 1, autohide: 1, showinfo: 0 },
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange
      }
    });
} 
```

但我遇到了一些问题：

*   showinfo:0 没用，最后还是有其他视频缩略图
*   我不知道如何更改视频 ID（并重新启动视频？）
*   比第一种方法更多的脚本错误（注入 iframe）

我更喜欢使用第一种方法，但是如何创建视频结束回调？谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-06T03:26:27.580

以下代码的工作示例也在[jsfiddle.net](http://jsfiddle.net/vPELX/2/)上。

一些注意事项：

*   使用[iframe_api](https://developers.google.com/youtube/iframe_api_reference)，而不是[javascript_api](https://developers.google.com/youtube/js_api_reference)
*   YT.Player 构造函数是最小的，因为您自己构建 iframe。
*   “playerVars”作为 iframe URL 参数包含在内。
*   设置了参数“enablejsapi=1”。

### 示例标记

```
<script src="http://www.youtube.com/iframe_api"></script>

<a style="display: block;" class="video-thumb" id="HuGbuEv_3AU" href="#">
    Megadeth: Back In The Day
</a>  
<a style="display: block;" class="video-thumb" id="jac80JB04NQ" href="#">
    Judas Priest: Metal Gods
</a> 
<a style="display: block;" class="video-thumb" id="_r0n9Dv6XnY" href="#">
    Baltimora: Tarzan Boy
</a>   

<div id="container"></div>
<div id="log">--Logging enabled--</div> 
```

### JavaScript

```
function log(msg) {
    jQuery('#log').prepend(msg + '<br/>');
}

function onPlayerStateChange(event) {
    switch(event.data) {
        case YT.PlayerState.ENDED:
            log('Video has ended.');
            break;
        case YT.PlayerState.PLAYING:
            log('Video is playing.');
            break;
        case YT.PlayerState.PAUSED:
            log('Video is paused.');
            break;
        case YT.PlayerState.BUFFERING:
            log('Video is buffering.');
            break;
        case YT.PlayerState.CUED:
            log('Video is cued.');
            break;
        default:
            log('Unrecognized state.');
            break;
    }
}

jQuery(document).ready(function($) {
    $('.video-thumb').click(function() {

        var vidId = $(this).attr('id');
        $('#container').html('<iframe id="player_'+vidId+
            '" width="420" height="315" src="http://www.youtube.com/embed/'+
            vidId+'?enablejsapi=1&autoplay=1&autohide=1&showinfo=0" '+
            'frameborder="0" allowfullscreen></iframe>');

        new YT.Player('player_'+vidId, {
            events: {
                'onStateChange': onPlayerStateChange
            }
        });
    });
}); 
```

# c - 通过套接字发送 RSA 公钥

> ID：12107204
> 
> 赞同：0
> 
> 时间：2012-08-24T10:01:43.283
> 
> 标签：c, unix, openssl, rsa

我在客户端/服务器应用程序上使用 openssl 库，我需要与客户端共享公钥。这是数据包的结构：

```
typedef struct pack {
    char op[10];
    char message[1024];
    int id;
}packet; 
```

这就是提取公钥并将其放入消息字段的方法：

```
packet *send_pack
RSA *rsa,
const unsigned char *my_public_key;

my_public_key = malloc(1024);
send_pack = (packet*) malloc(sizeof (packet));
rsa = RSA_new();
rsa = RSA_generate_key(1024, 17, NULL, NULL);
i2d_RSAPublicKey(rsa, &my_public_key);
printf("my public key: %X\n", (unsigned int)my_public_key);
strcpy(send_pack->message, my_public_key);
printf("field message of send pack %X", (unsigned int)send_pack->message );

... 
```

但是两个 printf 打印两个相似的值，但不一样（例如第一个 printf 返回 A0B9092 和第二个 A0B944 ）。怎么了 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:05:22.107

有多个问题：

*   您正在打印指针地址而不是内容
*   您复制密钥错误，因为`strcpy`需要以 0 结尾的字符串

对于第一个问题，您应该注意`i2d_RSAPublicKey`返回您忽略的长度。所以你应该打印：

```
int len = i2d_RSAPublicKey(...);
for (i = 0; i < len; i++)
    printf("%02x", my_public_key[i]); 
```

对于第二部分，请`memcpy`改用：

```
memcpy(send_pack->message, my_public_key, len); 
```

# django - 上传前在 Django 中验证文件名

> ID：12107208
> 
> 赞同：3
> 
> 时间：2012-08-24T10:01:55.003
> 
> 标签：django

我需要防止上传文件名称中出现任何非 ASCII 字符，因为使用数据的应用程序无法处理它们。我想显示一个简单的验证错误。

通常我`clean_<filefieldname>`在我的 ModelForm 上的方法中执行此操作。它可以工作，但问题是在文件上传后调用它（这是有道理的，因为我可能想检查文件数据等）。

但是，在这种情况下，我不需要实际的文件数据，只需要名称，并且希望在上传任何内容之前对其进行验证。我在哪里可以做到这一点（除了修改我的所有管理模板来进行客户端 JS 检查）？

**编辑：**

按照 Ghopper21 的回答，我编写了这个上传处理程序（并将其添加到 settings.py 列表的开头）：

```
class CheckFilenameUploadHandler(FileUploadHandler):

   def receive_data_chunk(self, raw_data, start):
      return raw_data, start

   def file_complete(self, file_size):
      return None

   def new_file(self, field_name, file_name, content_type, content_length, charset):
      try:
         validate_string(file_name)
      except ValidationError:
         raise StopFutureHandlers 
```

如果名称不正确，validate_string 会引发 ValidationError。但是，无论文件名是否有效，这都会给我一个 POST 请求超时。除了 django 页面上的 UploadHandler 文档之外，我找不到任何更详细的示例。

如果我提出 StopUpload 而不是 StopFutureHandlers，对于正确的文件，我会得到相同的行为，但实际上不会上传无效文件 - 但是我被重定向到模型的列表视图而不是看到验证错误，即使实现了 clean 方法我说“保存并继续编辑”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:00:57.983

据我所知，最好的方法是使用[自定义上传处理程序](https://docs.djangoproject.com/en/dev/topics/http/file-uploads/#upload-handlers)，如果文件名无效，则跳过文件数据的实际上传。然后，您仍然会使用该`clean_<filefieldname>`方法来引发验证错误。

必须在两个地方检查文件名有点烦人。但是无论如何您都不能在表单中完成所有操作，因为 Django 会在您访问`HttpRequest`对象`POST`或`FILE`属性时立即上传文件数据，这是您在创建绑定表单时传入的内容。

# android - 在 Android 应用内计费中获取订阅数据

> ID：12107213
> 
> 赞同：4
> 
> 时间：2012-08-24T10:02:15.723
> 
> 标签：android, in-app-billing

我正在将 Google 应用内计费（尤其是订阅）集成到我们的应用程序中。

现在我只是不知道如何从 IMarketBillingService (Google Play) 获取以下数据到我的应用程序：

*   价格信息

*   订阅到期日期（当前支付期间的）

*   用户取消正在进行的订阅时的通知

以下代码解析获取购买信息产生的 JSON 对象，但其中没有价格字段。然而，谷歌 IAP 文档说有价格！？

```
JSONObject jElement = jTransactionsArray.getJSONObject(i);
int response = jElement.getInt("purchaseState");
PurchaseState purchaseState = PurchaseState.valueOf(response);
String productId = jElement.getString("productId");
String packageName = jElement.getString("packageName");
long purchaseTime = jElement.getLong("purchaseTime");
String orderId = jElement.optString("orderId", "");
String purchase_token = jElement.optString("purchaseToken", "");
String notifyId = null;
if (jElement.has("notificationId")) {
  notifyId = jElement.getString("notificationId");
}
String developerPayload = jElement.optString("developerPayload", null); 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T23:59:12.263

> *   价格信息

Google Play 的结算服务不提供定价信息。如果您真的需要它，您可以通过记录您的商品价格并猜测用户的货币来自己提供该信息。

> *   订阅到期日期（当前支付期间的）

阅读[订阅 API 指南](http://developer.android.com/guide/google/play/billing/billing_subscriptions.html)中的*检查订阅有效性*。有一个[基于 HTTP 的 API](http://developer.android.com/guide/google/play/billing/billing_subscriptions.html#play-dev-api)来轮询 Google Play 以了解订阅的当前购买状态。

> *   用户取消正在进行的订阅时的通知

没有提供。从[订阅 API 指南](http://developer.android.com/guide/google/play/billing/billing_subscriptions.html)：

> 如果用户取消订阅，Google Play 会认为订阅在当前计费周期结束之前有效。用户在该周期的剩余时间内继续享受内容，并且不会获得退款。

# java - 如何在 Netbeans 中隐藏 jButton 事件方法

> ID：12107217
> 
> 赞同：0
> 
> 时间：2012-08-24T10:02:19.670
> 
> 标签：java, swing, events, netbeans, jframe

我正在使用 Java 使用 NetBeans 进行编程，以创建基于 JFrame 的 GUI 界面。在 JFrame 中，我有一个 jButton，并且我为这个按钮创建了一个事件，该事件是 mouseClicked。

但是现在我想删除这个事件（并删除它的相应方法）并且找不到这样做的方法。

你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:06:35.427

对于[JButton](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)，您可以：

*   [JButtons#etEnabled](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setEnabled%28boolean%29)

*   [JButton#setVisible](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setVisible%28boolean%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:18:47.137

如果要在运行时取消注册鼠标侦听器，可以使用从 Component 类继承的 JButton 的[removeMouseListener方法。](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#removeMouseListener%28java.awt.event.MouseListener%29)[如果您已将鼠标移动](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#removeMouseMotionListener%28java.awt.event.MouseMotionListener%29)侦听器和[鼠标滚轮侦听](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#removeMouseWheelListener%28java.awt.event.MouseWheelListener%29)器添加到按钮，您可能还需要删除它们。

如果您正在谈论在 NetBeans 中查找相关代码并删除该代码，请按照以下步骤操作：

1.  打开表单的*设计视图*。
2.  单击按钮，您要从中删除侦听器。
3.  在“*属性*”视图中，转到“*事件*”选项卡。
4.  删除鼠标事件。（即*mouseClicked、mouseMoved、mousePressed、......*）

# javascript - 为什么浏览器为电子邮件验证正则表达式显示不同的反斜杠。如何防止这种情况？

> ID：12107219
> 
> 赞同：2
> 
> 时间：2012-08-24T10:02:26.387
> 
> 标签：javascript, jquery, regex, unicode, utf-8

我在 js 文件中使用了这种模式：

```
var emailPattern = /^[^\W_](\.{0,1}[^<>(){\}[\]\\.,;:%\s@\"]+)*@([a-zA-Z0-9-]{1,}\.)+[a-zA-Z]{2,6}$/; 
```

加载页面时，我在查看源代码中得到了这个，

```
var emailPattern = /^[^＼W_](＼.{0,1}[^<>(){＼}[＼]＼＼.,;:%＼s@＼"]+)*@([a-zA-Z0-9-]{1,}＼.)+[a-zA-Z]{2,6}$/; 
```

（此页面是日语特定页面，但 js 是简单的英文）。

无论如何要防止\（正常的反斜杠）变成这个＼（unicode `&#65340;`：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:46:49.440

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:06:06.363

想想你的编辑器和浏览器政策：

*   第一行：Consolas 10
*   第二行：MS Mincho 10

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T10:10:59.290

将您的代码字符串复制到记事本，然后从那里将其复制回您的代码。这将破坏您的 unicode 字符并将反斜杠转换为真正的反斜杠。

# asp.net-mvc-3 - 如何修改饼图、高图的工具提示？

> ID：12107221
> 
> 赞同：0
> 
> 时间：2012-08-24T10:02:27.220
> 
> 标签：asp.net-mvc-3, highcharts, pie-chart

> **可能重复：**
> [如何更改饼图高图的 X 和 Y 轴名称？](https://stackoverflow.com/questions/12105829/how-to-change-the-x-and-y-axis-names-of-pie-chart-high-chart)

大家好，我有一个饼图，其中每个切片显示一个工具提示默认值，如下所示

```
[Hr Resources:x=Hr Resources,y=12] 
```

我想将此工具提示修改为

```
 [Project Name:Hr Resources,Logged Bugs:12] 
```

我想要上面显示的工具提示....

这是我将数据绑定到饼图的方式

```
 <script type="text/javascript">
  $(function () {
      $.getJSON('<%= Url.Action("GetData","JqueryCharts") %>', {}, function (data) {
          var json = data;              
          var jsondata = [];              
          for (var i in json) {
             // var serie = new Array(json[i].Projects, json[i].Bugs);
              jsondata.push([json[i].Projects, json[i].Bugs]);
          }              
      var chart = new Highcharts.Chart({
          chart: {
              renderTo: 'container',
              type: 'pie',
               plotBackgroundColor: null,
               plotBorderWidth: null,
               plotShadow: false
          },
           title: {
               text: 'Resource Reports of BugTracker'
           },              
          plotOptions: {
              pie: {
                  showInLegend: true,
                  animation: false,
                  allowPointSelect: true,
                  cursor: 'pointer'
              }
          },
          legend: {
              enabled: true
          },
          series: [{
              type: 'pie',
              name: 'Resource Reports',
              data: jsondata
          }]
      });
      });
  });
    </script> 
```

# sql-server-2008 - 过度设计的数据库设计

> ID：12107223
> 
> 赞同：3
> 
> 时间：2012-08-24T10:02:48.907
> 
> 标签：sql-server-2008, database-design, relational-database, database-schema

我正在创建一个销售应用程序，并对产品和销售进行初步设计，这要归功于这里人们的帮助：)

然而，我不确定我是否可能过度设计或可以稍微简化我的设计。

以下是我的产品订单架构。

一些业务规则：

1.  客户可以订购一份或多份合同
2.  一份合同可以包含一个或多个产品
3.  一个产品可以由一个或多个经销商提供
4.  一个产品可以由一个或多个网络提供
5.  经销商可以销售来自一个或多个网络的产品
6.  产品价格可能因经销商而异

![在此处输入图像描述](../Images/8ab3607261341b0726f4717174847b8f.png)

我的问题：

1.  我的设计是否过度设计？使用链接表和创建产品的 3 个版本似乎非常复杂

    *   一种网络产品
    *   分销商产品
    *   产品

    我正在尝试执行数据库中的业务规则，例如，如果分销商不销售网络 a，那么来自网络 a 的产品不应该可用。仅将产品分配给分销商是不够的，例如来自网络 a 的所有产品，然后只是查询以查看分销商 1 销售网络 a 但没有来自 b 的产品这是一个硬性规则，我想阻止人们选择他们不应该选择的产品'吨？

2.  假设我无法调整架构是我的 2 个链接表 NetworkPRoduct 和 DistributorNetwork 最好留下用于分销商产品的复合主键，或者我可以使用诸如 networkprodutid 之类的代理键如何逃脱？这仍然会导致分销商仅销售某些网络这一事实吗？

谢谢

抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:12:48.167

当复杂性成本超出满足您的业务规则所需的程度时，设计就会过度设计。没有人能比你更好地做出这个决定。我个人认为虽然它设计不足。

您可能会遇到的问题是，在合同签订时可能不知道从哪个经销商处购买产品。在我看来（我可能误解了这一点）您的架构假设您知道这一点。因此，您可能需要额外的产品表和分销商的真实价格矩阵。

如果您当前的设计对您来说过于复杂，我应该向您展示[我们](http://ledgersmb.org)如何对此进行建模以及我们打算如何对其进行建模。

# r - 在R中使用barplot（）具有相同颜色的列

> ID：12107229
> 
> 赞同：1
> 
> 时间：2012-08-24T10:03:25.617
> 
> 标签：r, colors, plot

我的条形图中的颜色有一些问题。我有一个 4x4 矩阵“allmat”：

```
 A             B           C         D
L   0.10260     0.0215700   3.017e-01   0.06917

F   0.09840     0.0206900   2.009e-01   0.11450

M   0.14100     0.0065630   3.252e-01   0.35050

G   0.02121     0.0006811   5.454e-06   0.13810 
```

要在一张图中绘制列，我使用：

```
mp<-barplot(allmat,beside=T,axisnames=F,col=c("red","black","green","blue"))
mtext(1,at=mp,text=c("L","F","M","G"),line=0,cex=0.5)
mtext(1,at=colMeans(mp),text=c("A","B","C","D"),line=2) 
```

我得到的是每一行都有相同的颜色，但我希望列的颜色相同。我怎么做？

最好的，

欧根

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T11:37:41.483

您实际上可以为每个条单独分配颜色。

```
mp<-barplot(allmat,beside=T,axisnames=F,
            col=c(rep("red",4),rep("black",4),rep("green",4),rep("blue",4))) 
```

# php - 使用 XTIFY 通过 PHP 发送富文本消息

> ID：12107230
> 
> 赞同：0
> 
> 时间：2012-08-24T10:03:25.997
> 
> 标签：php, xtify

你们中有人知道如何使用 php 发送富文本 xtify 消息吗？我正在使用 xtify 的 GCM API，如果我发送正常消息，它工作正常。但是如何发送富文本消息？

我正在尝试从[http://developer.xtify.com/display/APIs/Push+API+2.0](http://developer.xtify.com/display/APIs/Push+API+2.0)获取一些信息，但是对于发送富文本没有太多帮助，或者我可能忽略了最明显的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:48:51.890

我找到了解决方案。在 JSON 数据包中，我需要传递一个带有消息和主题的丰富对象，如链接中给出的示例。

# delphi - OnMouseWheel 未使用 Lazarus 中的 THTMLPort 组件触发

> ID：12107231
> 
> 赞同：3
> 
> 时间：2012-08-24T10:03:32.960
> 
> 标签：delphi, pascal, lazarus

我正在使用带有[THTMLPort](http://wiki.freepascal.org/THtmlPort)的 Lazarus在我的程序中呈现一些 html 代码。HTMLViewer`OnMouseEvent`窗口不会在鼠标滚动时触发。我在一个名为[THTMLViewer](http://code.google.com/p/thtmlviewer/)的 Delphi 类似但不相同的项目中发现了这样的问题。在该项目的[此页面](http://code.google.com/p/thtmlviewer/issues/detail?id=174#c4)上，开发人员发布了 htmlviewer.pas 单元代码中的更改，以使`OnMouseWheel`事件能够触发。我试图对 THTMLPort 的相应 htmlviewer.pas 单元中的代码进行这些更改，但它不起作用。（作为旁注，我已经尝试在我的程序中简单地使用 THTMLViewer，但由于它仍在开发中以供在 Lazarus 中使用，所以它不会工作）。这是单元中唯一提到鼠标滚轮的代码，尤其是。事件`OnMouseWheel`：

```
{$ifdef ver120_plus}
property OnMouseWheel;
{$endif}

...

{----------------ThtmlViewer.HTMLMouseWheel}
{$ifdef ver120_plus}
procedure ThtmlViewer.HTMLMouseWheel(Sender: TObject; Shift: TShiftState;
  WheelDelta: Integer; MousePos: TPoint);
var
  Lines: integer;
begin
Lines := Mouse.WheelScrollLines;
if Lines > 0 then
  if WheelDelta > 0 then
    VScrollBarPosition := VScrollBarPosition - (Lines * 16)
  else
    VScrollBarPosition := VScrollBarPosition + (Lines * 16)
else VScrollBarPosition := VScrollBarPosition - WheelDelta div 2;
end;

function ThtmlViewer.DoMouseWheel(Shift: TShiftState; WheelDelta: Integer;
                                         MousePos: TPoint): Boolean;
begin
result:= inherited DoMouseWheel(shift, wheelDelta, mousePos);
if not result and not (htNoWheelMouse in htOptions) then
  begin
  HTMLMouseWheel(Self, Shift, WheelDelta, MousePos);
  Result := True;
  end;
end;
{$endif} 
```

那么，任何人都可以帮助 THTMLPort`OnMouseWheel`事件正常工作吗？我对 Lazarus 有点陌生，所以我还不能完美地找到自己的出路。谢谢你的帮助。

# android - Drawable 比 Bitmap 占用更少的内存吗？

> ID：12107232
> 
> 赞同：3
> 
> 时间：2012-08-24T10:03:34.493
> 
> 标签：android, memory, bitmap, drawable

我是 Android 的菜鸟，也是这里的新手。

我只知道 Bitmap 逐像素存储图像并且不做任何 compress 。

Drawable 和 Bitmap 一样吗？
还是
对于同一个图片文件，Drawable 比 Bitmap 占用更少的内存？</p>

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T10:07:12.137

位图是一个`Drawable`. A`Drawable`不一定是位图。就像所有的拇指都是手指，但并非所有的手指都是拇指。

[API 规定](http://developer.android.com/reference/android/graphics/drawable/Drawable.html)：

> 虽然通常对应用程序不可见，但 Drawable 可能采用多种形式：
> 
> *   **Bitmap**：最简单的 Drawable，PNG 或 JPEG 图像。
> *   **九个补丁**：PNG 格式的扩展允许它指定有关如何拉伸它并在其中放置东西的信息。
> *   **Shape**：包含简单的绘图命令而不是原始位图，在某些情况下可以更好地调整大小。
> *   **Layers**：一个复合drawable，它在彼此之上绘制多个底层drawable。
> *   **状态**：一个复合可绘制对象，它根据其状态选择一组可绘制对象中的一个。
> *   **Levels**：一个复合可绘制对象，它根据其级别选择一组可绘制对象中的一个。
> *   **Scale**：具有单个子drawable的复合drawable，其整体大小根据当前级别进行修改。

# c# - 如何在asp.net中动态创建.aspx页面

> ID：12107234
> 
> 赞同：1
> 
> 时间：2012-08-24T10:03:37.267
> 
> 标签：c#, asp.net, html

我在网站上有一个名为 First.aspx 的页面，在他的页面中，我有一个简单的 asp.net 按钮。

我想要的是，在该按钮的单击事件上，呈现一个可以在新窗口或选项卡中打开的新动态“页面”。

我怎样才能做到这一点？

新页面不在网站中，这个页面创建需要在运行时创建，并且需要是动态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:13:24.893

我建议**不要**。因为您正在使用服务器端语言。您无需实际创建页面。您可以通过在您的网站上实现路由，根据输入的 URL 动态显示页面内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:15:46.133

```
protected void Button1_Click(object sender, EventArgs e)
    {

        File.Copy(Server.MapPath("") + "\\abc.aspx", (Server.MapPath("") + "\\" + TextBox1.Text + ".aspx"));
        File.Copy(Server.MapPath("") + "\\abc.aspx.cs", (Server.MapPath("") + "\\" + TextBox1.Text + ".aspx.cs"));

        //.aspx Page

        StreamReader sr = new StreamReader(Server.MapPath("") + "\\" + TextBox1.Text + ".aspx");
        string fileContent = sr.ReadToEnd();
        sr.Close();
        using (StreamWriter Sw = new StreamWriter(Server.MapPath("") + "\\" + TextBox1.Text + ".aspx"))
        {
            fileContent = fileContent.Replace("abc",  TextBox1.Text);
            Sw.WriteLine(fileContent);
            Sw.Flush();
            Sw.Close();
        }

        //.aspx.cs Page

        StreamReader sr1 = new StreamReader(Server.MapPath("") + "\\" + TextBox1.Text + ".aspx.cs");
        string fileContent1 = sr1.ReadToEnd();
        sr1.Close();
        using (StreamWriter Sw1 = new StreamWriter(Server.MapPath("") + "\\" + TextBox1.Text + ".aspx.cs"))
        {
            fileContent1 = fileContent1.Replace("abc", TextBox1.Text);
            Sw1.WriteLine(fileContent1);
            Sw1.Flush();
            Sw1.Close();
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T10:11:07.413

当您可以通过将信息存储在数据库中并具有从数据库读取并根据 URL 等其他信息填充页面的通用页面“模板”时，不确定为什么要创建物理页面。 .

无论如何，这是您的问题的解决方案，虽然有点旧...[在 aspnet 中动态创建 aspx 页面](http://www.codedigest.com/articles/aspnet/170_creating_aspx_page_dynamically_in_aspnet.aspx)

# python - 通过索引在矩阵中赋值

> ID：12107235
> 
> 赞同：1
> 
> 时间：2012-08-24T10:03:38.517
> 
> 标签：python, arrays, r, numpy, rpy2

来自 RI 用于通过使用以下索引为矩阵分配一个简单的值：

```
> mat <- matrix(NA,2,3)
> mat
     [,1] [,2] [,3]
[1,]   NA   NA   NA
[2,]   NA   NA   NA
> mat[1,2] <- 12
> mat
     [,1] [,2] [,3]
[1,]   NA   12   NA
[2,]   NA   NA   NA
> 
```

现在我必须在 Python 中运行一些脚本，并且还想在 2D 矩阵中收集值。矩阵应该有列名和行名，我也想通过索引访问它们。到目前为止，我想到了两种方法：

*   使用 RPy 并按照我在 R 中习惯的方式进行操作，尽管我还不知道索引命令如何与 RPy 一起工作。

像：

```
import rpy2.robjects as robjects

names = ['A','B','C']
dimnames = robjects.r['list'](names,names) 
mat = robjects.r['matrix'](NA, nrow = len(names), ncol=len(names), dimnames = dimnames)

# and here how to index and assign e.g. the value 12 to the cell mat["A","B"]?? 
```

*   或者使用 Python 本机 NumPy 数组，这可能是一个更清洁的解决方案。目前我只是不知道如何使用名称列表创建矩阵/数组以及如何使用索引分配值。

有什么建议么？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T10:32:09.723

我认为 pandas 的[DataFrame 数据类型](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe)可能适合您。

```
import pandas
matrix = pandas.DataFrame(index=['a','b','c'], columns=['one','two']) 
```

返回

```
 one  two
a  NaN  NaN
b  NaN  NaN
c  NaN  NaN 
```

您可以更改条目：`matrix['one']['a']=1`，以及其他熟悉的 numpy 操作（如[上述链接](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe)中所述）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:33:01.520

您可以使用字典将行/列名称映射到索引。

```
names = ['A', 'B', 'C']
idx = range(0, len(names))
d = dict((key, value) for (key, value) in zip(names, idx)) 
```

然后用它来访问矩阵中的元素，

```
mat[d['A'], d['B']] = 12 
```

据我从`rpy2`的文档中可以看出，这应该可行；如果不是，也许下面的语法更合适：

```
mat.rx(d('A'), d('B')) 
```

# java - 如何在确定的表格单元格中更改背景颜色

> ID：12107240
> 
> 赞同：2
> 
> 时间：2012-08-24T10:04:00.390
> 
> 标签：java, swing, jtable, tablecellrenderer

我有 CustomTableCellRender

```

public class CustomCellRenderer extends JLabel implements TableCellRenderer {

    private TableCellRenderer defaultCellRenderer;

    public CustomCellRenderer(TableCellRenderer defaultCellRenderer) {
        this.defaultCellRenderer = defaultCellRenderer;
    }

    public Component getTableCellRendererComponent(JTable table, Object ovalue, boolean isSelected, boolean hasFocus, int row, int column) {
        String val = (String) ovalue;
        Component c = defaultCellRenderer.getTableCellRendererComponent(table, ovalue, isSelected, hasFocus, row, column);
        if (c != null) {
            if (val.equals("0h")) {
                c.setForeground(Color.RED);
            } else {
                c.setForeground(table.getForeground());
            }
            return c;
        } else return null;
    }
}

```

...

```

            TableCellRenderer renderer = new CustomCellRenderer(sumTable.getDefaultRenderer(columnModel.getColumn(i).getClass()));
            columnModel.getColumn(i).setCellRenderer(renderer);

```

它工作正常，我需要更改单元格背景颜色它设置颜色不在某些单元格和所有列中，所有单元格。

```
 ...
            if (val.equals("0h")) {
                c.setBackground(Color.GRAY);
            } else {
                c.setForeground(table.getForeground());
            }
... 
```

我需要做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:45:07.937

原因（通常）是 DefaultTableCellRenderer 臭名昭著的颜色记忆，如[最近的回答中所述](https://stackoverflow.com/a/9617446/203657)

在您的特定上下文中的问题是您使用相同的渲染器实例作为委托*和*其他地方的默认渲染器。最简单的解决方案是使用 2 个不同的实例（毕竟，您知道默认安装了哪种类型的渲染器）。

自定义着色（或单元格的其他视觉装饰）的最简单解决方案是使用[SwingX](http://swingx.java.net)及其对渲染组件的一致配置支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T10:13:31.630

在你的 else 语句中，你需要将你的背景设置回一些东西。例如：
`c.setBackground(Color.WHITE);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T10:13:42.553

> 我需要做什么？

```
public Component getTableCellRendererComponent(
    JTable table, Object ovalue, boolean isSelected, 
    boolean hasFocus, int row, int column) { 
```

*   有两个参数`int row`并在[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)矩阵`int column`中使用这两个坐标，

*   必须接受并且不要伪造所有（？？？）`Arrays in Java`开始于`zero`

*   `(0, 0)`是`first column`在`first row`

编辑

[一种方式](https://stackoverflow.com/questions/6410839/highlights-substring-in-the-tablecells-which-is-using-for-jtable-filetering)

```
import java.awt.*;
import java.util.Vector;
import java.util.regex.Pattern;
import javax.swing.*;
import javax.swing.table.*;

public class HiglightNumberValueInTableCell {

    private String testS;
    private JFrame frame = new JFrame("frameTitle");
    private JScrollPane tblS = new JScrollPane();
    private JTable tbl;
    private Vector<String> rOrH;
    private long t1 = 0L;
    private long t2 = 0L;

    public HiglightNumberValueInTableCell() {
        t1 = System.currentTimeMillis();
        int regLenght = 25000;
        int chars = 0;
        AlphaChars aChars = new AlphaChars();
        testS = aChars.getNext(regLenght);
        rOrH = new Vector<String>();
        Vector<Vector<String>> rowD = new Vector<Vector<String>>();
        for (int e = 0; e < regLenght;) {
            chars++;
            //if (chars > 50) { //one char in table cell
            if (chars > 20) {
                chars = 1;
                rowD.add(rOrH);
                rOrH = new Vector<String>();
            }
            //String str = (testS.substring(e, (e + 1))).toString();//one char in table cell
            String str = (testS.substring(e, (e + 5))).toString();
            if (str != null) {
                rOrH.add(str);
            } else {
                rOrH.add("");
            }
            //e++;//one char in table cell
            e += 5;
        }
        rOrH = new Vector<String>();
        //for (int i = 0; i < 50; i++) {//one char in table cell
        for (int i = 0; i < 20; i++) {
            rOrH.add(String.valueOf(i + 1));
        }
        tbl = new JTable(rowD, rOrH);
        tblS = new JScrollPane(tbl, ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED,
                ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        tblS.setPreferredSize(new Dimension(1000, 403));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(tblS, BorderLayout.CENTER);
        frame.setLocation(50, 50);
        frame.pack();
        addColumnRenderes();
    }

    private void addColumnRenderes() {
        for (int i = 0; i < tbl.getColumnCount(); i++) {
            RowColorRenderer rowRenderer = new RowColorRenderer(i);
            TableColumn column = tbl.getColumnModel().getColumn(i);
            column.setCellRenderer(rowRenderer);
        }
        Runnable doRun = new Runnable() {

            @Override
            public void run() {
                showFrame();
            }
        };
        SwingUtilities.invokeLater(doRun);
    }

    private void showFrame() {
        Runnable doRun = new Runnable() {

            @Override
            public void run() {
                frame.setVisible(true);
                t2 = System.currentTimeMillis();
                System.out.println("miliSec:" + (t2 - t1)); //aver. 45 miliSec.
            }
        };
        SwingUtilities.invokeLater(doRun);
    }

    private class RowColorRenderer extends DefaultTableCellRenderer {

        private static final long serialVersionUID = 1L;
        private int colNo = 0;

        RowColorRenderer(int col) {
            colNo = col;
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value,
                boolean isSelected, boolean hasFocus, int row, int column) {
            Component comp = super.getTableCellRendererComponent(table, value,
                    isSelected, hasFocus, row, column);
            JComponent jc = (JComponent) comp;
            if (!isSelected) {
                if (table.getValueAt(row, colNo) != null) {
                    String str = table.getValueAt(row, colNo).toString();
                    if (!str.isEmpty()) {
                        if (Pattern.compile("\\d").matcher(str).find()) {
                            if (((Pattern.compile("[02468]").matcher(str).find()))
                                    && (!(Pattern.compile("[13579]").matcher(str).find()))) {
                                setForeground(Color.magenta);
                                setBackground(Color.orange);
                            } else if ((!(Pattern.compile("[02468]").matcher(str).find()))
                                    && ((Pattern.compile("[13579]").matcher(str).find()))) {
                                setForeground(Color.blue);
                                setBackground(Color.yellow);
                            } else if (((Pattern.compile("[02468]").matcher(str).find()))
                                    && ((Pattern.compile("[13579]").matcher(str).find()))) {
                                setForeground(Color.red);
                                setBackground(Color.cyan);
                            }
                            setFont(new Font("Serif", Font.BOLD, 12));
                            setHorizontalAlignment(CENTER);
                        } else {
                            setBackground(table.getBackground());
                            setForeground(table.getForeground());
                            setFont(new Font("Serif", Font.PLAIN, 8));
                            setHorizontalAlignment(CENTER);
                        }
                    }
                }
            }
            return this;
        }
    }

    private class AlphaChars {

        public static final int MIN_LENGTH = 2000;
        private java.util.Random rand = new java.util.Random();
        private char[] AlphaChars = {
            'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q',
            'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',
            'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q',
            'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',
            '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '+', '-', '*', '/', '<', '>', '&',
            '#', '@', '{', '}', '?', ':', '_', '"', '!', ')', '('};

        public String getNext() {
            StringBuilder strbuf = new StringBuilder();
            for (int i = 0; i < MIN_LENGTH; i++) {
                strbuf.append(getAlphaChars()[getRand().nextInt(getAlphaChars().length)]);
            }
            return strbuf.toString();
        }

        public String getNext(int reqLenght) {
            StringBuilder strbuf = new StringBuilder();
            for (int i = 0; i < reqLenght; i++) {
                strbuf.append(getAlphaChars()[getRand().nextInt(getAlphaChars().length)]);
            }
            return strbuf.toString();
        }

        public java.util.Random getRand() {
            return rand;
        }

        public void setRand(java.util.Random aRand) {
            rand = aRand;
        }

        public char[] getAlphaChars() {
            return AlphaChars;
        }

        public void setAlphaChars(char[] aAlphaChars) {
            AlphaChars = aAlphaChars;
        }
    }

    public static void main(String args[]) {
        HiglightNumberValueInTableCell hnvit = new HiglightNumberValueInTableCell();
    }
} 
```

# java - 如何对具有字符串的hasmap进行排序

> ID：12107241
> 
> 赞同：0
> 
> 时间：2012-08-24T10:04:01.777
> 
> 标签：java, hashmap

我有一个哈希图，它具有以下内容

`{20/02/2012=20/02/2012, 16/02/2012=16/02/2012}`但这是作为字符串（键和值）存在的。

请帮助我如何根据月份和日期对它们进行排序，

```
ex : 16/02/2012=16/02/2012,20/02/2012=20/02/2012 
```

我可以接受任何建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:05:00.840

您需要实现自定义比较器并将它们存储在*TreeMap*中。

例如（使用 joda-time）：

```
 class MyComparator implements Comparator<String> {
      @Override
      public int compare(String value1, String value2) {
          LocalDate date1 = LocalDate.parse(value1, DateTimeFormat.forPattern("dd/MM/yyyy"));
          LocalDate date2 = LocalDate.parse(value2, DateTimeFormat.forPattern("dd/MM/yyyy"));
          return date1.compareTo(date2);
      }
 }

 TreeMap<String, String> treeMap = new TreeMap<String,String>();
 treeMap.put("20/02/2012", "20/02/2012");
 treeMap.put("16/02/2012","16/02/2012");
 System.out.println(treeMap); 
```

但是你绝对应该在你的地图中存储日期而不是字符串，如果你不能改变它，使用上面的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:05:31.393

如果可能，将您的日期存储为 yyyy/MM/dd（例如 2012/02/16）并使用[SortedSet](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T10:05:43.283

1.  首先不要将日期存储为字符串，将它们存储为日期。
2.  然后，您可以使用[TreeMap](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)自动为您排序日期（键）。
3.  如果您的所有键都等于相应的值，您还可以使用[TreeSet](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T10:12:16.320

正如大家所说，使用`Date`有序集合中的对象将使这更容易。使用从您的字符串转换为日期

```
new SimpleDateFormat("dd/MM/yyyy").parse(input); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T10:26:57.943

我只是补充一点，HashMaps 不保留顺序，HashMaps 使用键的哈希码将条目放入数组中，因此您无法将其与任何类型的排序算法一起使用，您应该使用它的位置TreeMap 或任何其他 Sortable Map 实现

# php - 在函数 A 和函数 B 之间传递变量

> ID：12107242
> 
> 赞同：0
> 
> 时间：2012-08-24T10:04:03.290
> 
> 标签：php, function, variables, arguments

我在两个函数之间传输变量时遇到问题。我想传递变量作为参数，但我不知道该怎么做。例如：

```
function a() {
   $a = 5;
   $b = 6;
   $c = $a + $b;
}

function b() {
   echo $c;
} 
```

我需要将变量`$c`从第一个函数`a()`移动到第二个函数`b()`作为参数。是否可以？语法是什么？非常感谢每一个答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T10:05:16.940

```
function a() {
   $a = 5;
   $b = 6;
   $c = $a + $b;
   return $c;
}

function b($c) {
   echo $c;
}

//get result from function a()
$varFromFunctionA = a();

//pass it to function b()
b($varFromFunctionA); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T10:20:45.570

```
class ab {
    var $c;
    function a() {
     $a = 5;
      $b = 6;
      $this->c = $a + $b;
    }
   function b() {
   echo $this->c;
 }
} 
```

# javascript - javascript / UI EXTJS vs HTML 5 vs其他框架的最佳框架

> ID：12107246
> 
> 赞同：1
> 
> 时间：2012-08-24T10:04:16.303
> 
> 标签：javascript, html, extjs, javascript-framework

我们有一个基于 flex 框架的应用程序，它具有非常华丽的外观和感觉功能，由于 flash 的先决条件，用户希望有一个替代框架，它不依赖于客户端机器。

该应用程序是在 ExtJS 3.3 上全新构建的，它还具有华丽的外观和感觉功能，但很快我们就遇到了有关性能和自定义 ExtJS 应用程序行为的问题。

现在我们真的无法继续使用现有的 ExtJS 应用程序，或者在纯 html、dhtml、HTML5 等上从头开始构建应用程序，我们可以在其中以我们的方式自定义组件以提高性能。

请分享关于以下方面的最佳框架

1.性能 2.定制灵活性 3.维护

Edit1# 在进行了大量研究之后，遇到了从事各种 JavaScript 框架工作的人，并在实际场景中工作，其中差异实际上出现了，下面是我的研究

```
ExtJS

1\.  ExtJS (The latest version) is a MVC based framework based on Yahoo YUI, it supports the     concepts of MVC in JavaScript and is a well tiered framework with good extendibility and support.
2\.  ExtJS has good documentation and active forums.
3\.  It comes in both paid and free version , offers paid support also.
4\.  ExtJS 4.x has got a major revamp from design perspective and improved in terms of performance 
5\.  To be comfortable in Extjs , if is required to have a good knowledge of JavaScript 
6\.  If you have to use a good MVC framework in enterprise application use ExtJS 
7\.  There is greater learning curve in case of ExtJS

jQuery

1\.  jQuery provides a good library with css based selectors promoted by Microsoft
2\.  jQuery also has good documentation and forum support
3\.  jQuery is open source ,you can make your own plugins and contribute
4\.  jQuery is quite lighter and fast in terms of performance .It does not follow the MVC framework , the code sometimes appears cluttered when really complex.
5\.  jQuery is easy to understand as it is based on css selectors , follows the rules like css (quite similar)
6\.  For common tasks in JavaScript it is the most suitable framework, well suitable for ASAP projects.
7\.  The learning curve is not that big, it is quiet easy to grasp, even in case of novice developers. 
```

请随时添加详细信息，如果我错过了什么谢谢 Abhi

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T10:46:13.783

我认为使用[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)它有很好的文档和内置的 JS 库 - 您还可以在使用它的同时使用其他 js 库并根据需要进行自定义

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T10:59:15.263

没有什么比纯 Javascript 更好的了。但是，有一些好的框架可以帮助您编写好的、可管理的代码。

Dojo - [http://dojotoolkit.org/](http://dojotoolkit.org/)它似乎是一个用于构建大型应用程序的健壮框架。有所有花哨的东西来帮助你管理你的代码库和一个 UI 框架。

Requirejs - 只是将代码分成可重用模块并根据需要加载它们的好方法。帮助管理您的代码。

Backbone.js - 一个很好的库来管理你的 javascript 数据。客户端 MVC 风格的框架。能够与您的服务器同步。非常可扩展。

Underscore.js - 一个很好的库来操作 javascript 数据。拥有所有花哨的功能。

Jquery - 一个很好的 dom 操作库，带有一个很好的 ajax 库和其他一些漂亮的东西。具有许多插件和简单插件系统的出色且流行的库。

Jquery UI - 与 Jquery 配合得很好，有很多小部件。

现在这真的取决于你有什么样的客户。如果您需要 IE6 支持，请使用 Dojo UI 库或 Jquery UI。如果您只需要支持 chrome & firefox & 最新版本的 IE，通常最好编写自己的小部件（选项卡、弹出窗口等实际上都是非常简单的小部件，只需 20 行代码即可实现）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-19T15:32:19.987

您可以查看[dhtmlx](http://dhtmlx.com)库（开源免费）。它提供了一组可定制的 UI 小部件，可以相当快地处理大量数据（由于动态加载、智能渲染和其他增强性能的技术）。

（免责声明：我在 dhtmlx 工作）

# maven - SONAR 中的 SCM-Activity-Plugin 和 Taglist

> ID：12107249
> 
> 赞同：1
> 
> 时间：2012-08-24T10:04:24.063
> 
> 标签：maven, sonarqube, taglist

我目前正在尝试为我们的 java maven 项目设置一个小的 CI 环境。我正在使用 Eclipse。詹金斯和声纳。到目前为止，大多数部分似乎都可以工作，除了声纳中的 scm-activity-plugin 和 taglist 插件。我安装了插件，重新启动了声纳，插件显示在配置下。但是我在源视图中没有看到任何用户信息...我在Sonar中的project->settings->SCM Activity下指定了scm subversion连接（url/password/user），但仍然没有运气。我是否需要在 maven pom 中指定 scm 连接（我需要将它放在多模块设置中的哪个位置）？Taglist 插件也一样吗？已安装，在 checkstyle 注释段中配置，但没有结果可见？！

那么问题来了，POM 中必须设置哪些信息？到目前为止，我没有在 pom 中指定 scm 或 sonar 并通过 jenkins 触发声纳集成......这里的最佳做法是什么？我是否需要在 pom 中指定声纳、scm、jenkins、artifactory 之类的东西？

谢谢，英戈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:16:16.697

对于 SCM Activity 插件，因为您使用 Maven，您需要在 pom.xml 中指定 SCM Url，如下所示：

```
 <scm>
    <url>scm:svn:svn://255.255.255.255/path/to/your/project</url>
  </scm> 
```

有关 url 格式的更多详细信息，请参见：[http](http://maven.apache.org/scm/scm-url-format.html) : //maven.apache.org/scm/scm-url-format.html Taglist 插件不需要在 pom.xml 中进行任何配置，但您需要创建规则来定义标签你想打猎。见[http://docs.codehaus.org/display/SONAR/Taglist+Plugin](http://docs.codehaus.org/display/SONAR/Taglist+Plugin)

# grails - groovy 显示列表 每个标签

> ID：12107255
> 
> 赞同：2
> 
> 时间：2012-08-24T10:04:54.750
> 
> 标签：grails, groovy, gsp

需要以表格形式显示列表。

```
var dispList = [["a","b","c"],["d","e","f"]] 
```

尝试使用嵌套`<g:each>`标签，但没有成功。有什么建议么 ？

格式-

```
<table>
  <tr>
   <td>a</td>
   <td>b</td>
   <td>c</td>
 <tr>
 <tr>
   <td>c</td>
   <td>d</td>
   <td>e</td>
 <tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T10:34:49.367

嵌套`<g:each>`循环确实有效，但我通常发现我必须使用`var`属性而不是依赖默认的“it”变量名。如果您`dispList`在 GSP 模型中调用了一个变量，那么您可以这样做

```
<table>
  <g:each in="${dispList}" var="row">
    <tr>
      <g:each in="${row}" var="val">
        <td>${val}</td>
      </g:each>
    </tr>
  </g:each>
</table> 
```

# autotools - 让 WAF 构建 autotools 目标

> ID：12107260
> 
> 赞同：1
> 
> 时间：2012-08-24T10:05:10.010
> 
> 标签：autotools, waf

我们正在尝试逐步从自动工具转移到 WAF。我们的大多数子项目都是自动工具，我们真的不想一次将它们转换为 WAF。

在混合 WAF 和 autotools 时，您有什么提示或要记住的事情吗？

我正在考虑在每个 autotools 子项目中创建一个简单的 wscript，它基本上只会执行 shell 命令“./configure”、“make”、“make install”。我在 WAF 示例目录中找不到任何更好的解决方案。所以我想知道你们是否有更好的主意？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:18:30.140

我已经用我的构建驱动的旧部分做了类似的事情。我写了一个简单的 waf 工具，调用 ./configure && make && make install。

为了让它变得像 waflike，有一两件事要做：

*   正确设置任务的输入以仅在发生更改时重建子目录。
*   使用参数调用配置以在 waf 构建目录中构建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:10:35.363

存在称为 autowaf 的东西，但除此之外，我不知道任何文档（而且它也有 2 年历史）：

[http://lv2plug.in/trac/browser/trunk/autowaf.py?rev=2](http://lv2plug.in/trac/browser/trunk/autowaf.py?rev=2)

# asp.net-mvc-3 - 为什么 ValidationSummary(true) 显示属性错误的空摘要？

> ID：12107263
> 
> 赞同：35
> 
> 时间：2012-08-24T10:05:20.853
> 
> 标签：asp.net-mvc-3

我在使用`ValidationSummary(true)`显示模型级别错误时遇到了一个小问题。如果 ModelState 不包含模型错误（即`ModelState.AddModelError("", "Error Description")`）但包含属性错误（使用数据注释添加），它会显示没有错误信息的验证摘要（当您查看源代码时）。因此，我的 CSS 显示一个空的红色框，如下所示：

![在此处输入图像描述](../Images/b094e0ddb80413e575b307baa2a4cf53.png)

如果没有属性错误，则不会显示验证摘要。如果有`ValidationSummary(true)`模型错误，我希望它只显示验证错误。我误解了什么？

我有一个基本项目如下：

**控制器：**

```
public class HomeController : Controller
{
    public ViewResult Index()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Index(IndexViewModel model)
    {
        return View();
    }
} 
```

**模型：**

```
public class IndexViewModel
{
    [Required]
    public string Name { get; set; }
} 
```

**看法：**

```
@model IndexViewModel

@Html.ValidationSummary(true)

@using(@Html.BeginForm())
{
    @Html.TextBoxFor(m => m.Name)
    <input type="submit" value="submit" />
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-09-29T00:26:06.217

```
@if (ViewContext.ViewData.ModelState.Where(x => x.Key == "").Any())
{
    @Html.ValidationSummary(true, null, new { @class = "ui-state-error" })
} 
```

这会检查是否存在任何模型范围的错误，并且仅在有错误时才呈现摘要。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-08-24T14:25:38.603

我认为`ValidationSummary`辅助方法有问题。您可以轻松地创建一个自定义帮助方法来包装内置的`ValidationSummary`.

```
public static MvcHtmlString CustomValidationSummary(this HtmlHelper htmlHelper, bool excludePropertyErrors)
{
  var htmlString = htmlHelper.ValidationSummary(excludePropertyErrors);

  if (htmlString != null)
  {
    XElement xEl = XElement.Parse(htmlString.ToHtmlString());

    var lis = xEl.Element("ul").Elements("li");

    if (lis.Count() == 1 && lis.First().Value == "")
      return null;
  }

  return htmlString;
} 
```

那么在你看来，

```
@Html.CustomValidationSummary(true) 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-06-25T13:59:33.997

也检查[这个](https://stackoverflow.com/questions/4166997/html-validationsummaryfalse-message-is-always-showing-even-on-page-load)问题。

**您可以使用CSS**隐藏摘要：

```
.validation-summary-valid { display:none; } 
```

此外，您可以将验证摘要放在`Html.BeginForm()`.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-11T17:23:38.110

另一种方法是检查是否有任何 li 元素，如果不只是隐藏验证摘要错误

```
<script type="text/javascript">
     $(document).ready(function () {
          if ($(".validation-summary-errors li:visible").length === 0) {
               $(".validation-summary-errors").hide();
          }
     });
</script> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-12T17:48:31.787

我知道已经找到了一种解决方法，但我遇到了类似的问题，但解决方案更简单。

您的验证摘要是使用 css 类“ **validation-summary-valid** ”还是“ **validation-summary-errors** ”呈现的？第一个类在验证摘要为空时应用，第二个在填充时应用。

我注意到如果验证摘要不包含错误，则会呈现占位符 div，因此如果任何字段验证失败，客户端验证可以显示它。

在默认的 MVC 样式表“Site.css”中，他们只是禁止使用“显示：无”显示空验证摘要；例如**.validation-summary-valid { 显示：无；}**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-04T12:13:46.647

Bootstrap 类修复的另一个变体是：

```
public static class ValidationSummaryExtensions
{
    public static MvcHtmlString CleanValidationSummary(this HtmlHelper htmlHelper, bool excludePropertyErrors, string message = null)
    {
        if(htmlHelper == null) throw new ArgumentNullException("htmlHelper");

        MvcHtmlString validationSummary = null;
        if (htmlHelper.ViewData.ModelState.ContainsKey(string.Empty))
        {
            var htmlAttributes = new { @class = "alert alert-danger" };
            validationSummary = htmlHelper.ValidationSummary(excludePropertyErrors, message, htmlAttributes);
        }

        return validationSummary;
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-11T19:02:39.927

我遇到了这个空的验证摘要问题。我只是设置`excludePropertyErrors`为 false - 它会将错误添加到验证摘要中。

```
@Html.ValidationSummary(false) 
```

我意识到这不一定是这里要问的 - 尽管这确实解决了空验证摘要问题 - 如果您遇到此问题，这是一个选项。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-01-10T13:54:19.030

@if (ViewContext.ViewData.ModelState.Count > 0)

{

//你的内容

}

会像魅力一样工作。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-04-04T15:40:36.187

ValidationSummary 接受可选的消息参数。如果你设置了这个参数，那么这个盒子看起来就不会那么傻了。

```
@Html.ValidationSummary(true, "Sorry, that didn't work. Please check the details submitted and try again.") 
```

[![在此处输入图像描述](../Images/fc79790e0635a0ecfaecc2e4a64c1c80.png)](https://i.stack.imgur.com/MaDpe.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-10T14:55:59.557

我知道这个话题很老了，但即使在 MVC 5 中这种行为仍然存在。这绝对不是我们大多数人所期望的行为。当我们想要一个“非属性”的 ModelState 错误时，我们这样做：

```
ModelState.AddModelError(string.Empty, ex.Message); 
```

因为我们只想在空键存在时显示摘要，所以这个 HtmlHelper 可以做到这一点并且比接受的答案 IMO 更干净：

```
public static MvcHtmlString CustomValidationSummary(this HtmlHelper htmlHelper,
    bool excludePropertyErrors, string message = null)
{
    // Don't render summary if there are no empty keys when excluding property errors
    if (excludePropertyErrors && !htmlHelper.ViewData.ModelState.ContainsKey(string.Empty))
        return null;

    // Use default
    return htmlHelper.ValidationSummary(excludePropertyErrors, message);
} 
```

排除属性错误时，您可能不需要可用于客户端验证的摘要 DIV，因此根本不呈现它就可以了。我希望这对你们中的一些人有所帮助。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2015-06-19T13:25:19.160

这是验证脚本执行此操作。

更改以下 web.config

```
<add key="ClientValidationEnabled" value="false" /> 
```

应该是**假的**

# c# - 设置线程池的代码完成后，线程池是否会重置最大线程数？我应该手动执行此操作吗？

> ID：12107270
> 
> 赞同：4
> 
> 时间：2012-08-24T10:05:35.663
> 
> 标签：c#, multithreading, c#-3.0, threadpool

我已经编写了一些（c# 3.5）批处理代码，可以选择覆盖线程池 maxthreads。它使用了一些非线程安全的相当重的资源，需要为每个活动线程维护一个“资源池”并使用一个项目。消费应用程序可以设置批处理器将使用多少线程的限制，这反过来又调用`ThreadPool.SetMaxThreads()`. 我这样做是为了测试手动设置限制是否比保留默认设置具有更好的性能。

我的问题是，每次使用批处理代码后，我是否应该将 maxthreads 重置回应用程序的先前值？它会在一天中间歇性地被调用，可能会被调用数千次。MaxThreads 限制会一直持续到应用程序重新启动/设置为不同的值，还是会自动重置？

虽然这在我的测试工具中并不是一个真正的问题，但我想知道我是否应该更新代码以在批处理完成后处理其他资源以在生产环境中使用时“重置”线程池。仅将其覆盖是否有任何影响？

最后，在一个 .net 应用程序中设置线程池是为盒子上的所有应用程序设置它，还是只为该单个应用程序的上下文设置它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T10:51:37.990

TL;DR：不要使用`SetMaxThreads`.

此设置是针对每个进程的：其他进程不受影响，但您的整个应用程序会受影响！这被称为“**局部问题的全局解决方案**”，被认为是一件坏事。

您只希望应用程序的某些部分受此设置影响，但您正在影响整个应用程序。

例如，如果您将 max-threads 设置为较低的值以限制并发性，您将耗尽整个应用程序的其余部分，包括 ASP.NET 请求线程等。

出于这个原因，我总是更喜欢在本地解决这些问题。许多 TPL 原语（PLINQ、Parallel.*）允许您设置最大并行度。对于简单的任务，您可以使用具有固定线程数的自定义任务调度程序（ParallelExtras 中提供代码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:23:29.870

如果您降低级别，线程池将杀死线程，这将（GoodThing™）减少内存使用（所有这些线程的堆栈），并且（BadThing™）意味着当您再次提升级别时必须再次创建它们. 如果同时有大量使用线程池的任务（BadThing™），它也可能使池过于慷慨，尽管很可能有足够多的任务阻塞，池的整体使用实际上更好（GoodThing™ ）。不过，有可能它在那个时期的使用量太低而无法产生影响（嗯，IrrelevantThing™）。

总而言之，我可能只是将池设置为在应用程序启动时的繁忙时段所需的最高值，然后不理会它。如果在应用程序的其余运行期间存在性能问题，则在其他期间降低级别值得尝试，但除非在这些期间内存或线程使用是一个问题，否则我不会，因为这些线程将被使用毕竟在未来再次。只设置一次关卡更简单，而且更简单总是更好，除非你能解释为什么不设置（“尽可能简单，但不简单”）。

编辑：

我将以上内容作为对该问题的直接回答而写，但其他建议根本不触及最大线程的答案确实很划算。如果您**真的非常**需要大量线程，请自己创建它们（或者不要池化，或者自己处理池化，这取决于启动时间的重要性）。但在此之前，请考虑替代方案，因为它在很多时候也不是最好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T10:40:31.853

首先，正如 msdn 所说：

“更改线程池中的最大线程数时要小心。虽然您的代码可能会受益，但更改可能会对您使用的代码库产生不利影响。

将线程池大小设置得太大会导致性能问题。如果同时执行的线程太多，任务切换开销就会成为一个重要因素。”

使用托管解决方案，线程可以由 IIS 控制（可能限制甚至防止被更改），具体取决于哪个版本的 IIS，这可以应用于盒子上的所有应用程序，或者如果它们的继承设置被更改，则应用于单个应用程序。

PS 有关更多信息，请参阅此类似帖子，并查看线程池节流链接以获得有趣的阅读[点击我！](https://stackoverflow.com/questions/11466533/are-threadpool-settings-global-or-only-for-work-items)

# 3d - 3D刚体匹配算法

> ID：12107271
> 
> 赞同：2
> 
> 时间：2012-08-24T10:05:36.020
> 
> 标签：3d, sum, distance, lines, minimize

如下图所示，我有许多 3D 线条。它们由 3 组不同的线组成，每组中的线的共同特性是它们靠近同一个点。但是，在这个问题中，我们不知道哪条线属于哪个组。给出的只是所有线两端的 3D 坐标 (x,y,z)。

![](../Images/b1b8ca06608a4e287864ab48770bf7ac.png)

我的工作是找到一种算法来匹配/拟合/注册一个三角形（一个刚体）到这些线，使得三角形的 3 个顶点与其对应的线之间的距离之和最小化。

总之，给定一组 (x1,y1,z1,x2,y2,z2) （它们是一条线的 2 个端点的坐标），我需要找到一个三角形的 3 个顶点的位置以适合那些线（给定 3 个顶点之间的相对距离）。

# scala - 使用 Either 链接方法调用

> ID：12107272
> 
> 赞同：8
> 
> 时间：2012-08-24T10:05:41.293
> 
> 标签：scala, functional-programming, monads, either

我想知道是否可以创建某种“方法调用链”，所有方法都返回相同的 Either[Error,Result]。

我想做的是：依次调用所有方法，当方法返回一个Left（错误）时，停止方法调用并返回调用链中找到的第一个Left。

我尝试了一些东西，包括折叠、地图、投影......但我是 Scala 新手，没有找到任何优雅的解决方案。

我尝试过这样的事情：

```
def createUserAndMandatoryCategories(user: User) : Either[Error,User] = {
    User.create(user).right.map {
      Logger.info("User created")
      Category.create( Category.buildRootCategory(user) ).right.map {
        Logger.info("Root category created")
        Category.create( Category.buildInboxCategory(user) ).right.map {
          Logger.info("Inbox category created")
          Category.create( Category.buildPeopleCategory(user) ).right.map {
            Logger.info("People category created")
            Category.create( Category.buildTrashCategory(user) ).right.map {
              Logger.info("Trash category created")
              Logger.info("All categories successfully created created")
              Right(user)
            }
          }
        }
      }
    }
  } 
```

但它不起作用。无论如何，我真的不喜欢它需要的缩进。此外，我想将错误转换为描述问题的新字符串（我想我应该使用折叠？）

我正在寻找这样写的东西：

```
val result : Either[String,CallResult] = call1.something("error 1 description")
.call2.something("error 2 description")
.call3.something("error 3 description")
.call4.something("error 4 description") 
```

有可能用 Scala 做这样的事情吗？也许同时使用 Either 和 Option？

一个限制也是，如果第一次调用失败，则不应进行其他调用。我不想要一个我调用所有东西然后加入其中一个的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T10:35:17.040

有更好、更实用的方法来做到这一点（主要涉及 Scalaz 的验证和遍历/序列），但您的代码大致相当于：

```
def createUserAndMandatoryCategories(user: User) : Either[Error,User] = for {
  _ <- User.create(user).right.map(Logger.info("User created")).right
  _ <- Category.create( Category.buildRootCategory(user) ).right.map(Logger.info("Root category created")).right
  _ <- Category.create( Category.buildInboxCategory(user) ).right.map(Logger.info("Inbox category created")).right
} yield user 
```

这至少摆脱了所有的嵌套。由于 Scala`Either`默认不偏右，因此您必须手动指定很多次，这会稍微降低可读性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T12:20:27.603

您已经在使用的[RightProjection](http://www.scala-lang.org/api/current/index.html#scala.Either$$RightProjection)`flatMap`允许您使用它的方法来做您需要的事情。

（按照惯例，计算结果存储在 中，计算`Right`失败的错误值存储在 中`Left`。但没有其他原因，您可以对 . 做同样的事情`LeftProjection`。）

实际上，我们在这里所拥有的是`RightProjection`形成一个单子。您可以`x`使用 将值转换为投影`Right(x).right`。如果你有一个投影，你可以通过调用来`p`应用一个可能失败的计算`f`。这样，您可以链接几个这样的方法。`p``p.flatMap(f)`

这可以通过`for`理解进一步简化。举一个完整的例子：

```
object EitherTest extends App {
  // we define some methods that can either fail 
  // and return a String description of the error,
  // or return a value

  def sqrt(x: Double): Either[String,Double] =
    if (x >= 0) Right(math.sqrt(x));
    else Left("Negative value " + x + " cannot be square-rooted.");

  // or you could have, if you want to avoid typing .right inside `for` later
  def sqrt0(x: Double): Either.RightProjection[String,Double] =
    ( if (x >= 0) Right(math.sqrt(x));
      else Left("Negative value " + x + " cannot be square-rooted.")
    ).right;

  def asin(x: Double): Either[String,Double] =
    if (x > 1) Left("Too high for asin")
    else if (x < -1) Left("Too low for asin")
    else Right(math.asin(x));

  // Now we try to chain some computations.
  // In particular, we'll be computing sqrt(asin(x)).
  // If one of them fails, the rest will be skipped
  // and the error of the failing one will be returned
  // as Left.

  { // try some computations
    for(i <- -5 to 5) {
      val input: Double = i / 4.0;
      val d: Either[String,Double] = Right(input);
      val result: Either[String,Double] =
        for(v <- d.right;
            r1 <- asin(v).right;
            r2 <- sqrt(r1).right
            // or you could use:
            // r2 <- sqrt0(r1)
        ) yield r2;
      println(input + "\t->\t" + result);
    }
  }
} 
```

输出是：

```
-1.25       ->      Left(Too low for asin)
-1.0        ->      Left(Negative value -1.5707963267948966 cannot be square-rooted.)
-0.75       ->      Left(Negative value -0.848062078981481 cannot be square-rooted.)
-0.5        ->      Left(Negative value -0.5235987755982989 cannot be square-rooted.)
-0.25       ->      Left(Negative value -0.25268025514207865 cannot be square-rooted.)
0.0         ->      Right(0.0)
0.25        ->      Right(0.5026731096270007)
0.5         ->      Right(0.7236012545582677)
0.75        ->      Right(0.9209028607738609)
1.0         ->      Right(1.2533141373155001)
1.25        ->      Left(Too high for asin) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T11:11:02.127

Debilski 在发挥作用方面有“答案”，但我会用一些帮助代码进一步精简它：

```
// trait PackageBase (applicable package objects extend)
/*
 * not used in this example but can use below implicit to do something like:
 * for { x <- eitherResult as json }
 */
class RightBiasedEither[A,B](e: Either[A,B]) {
  def as[A1](f: A => A1) = e match {
    case Left(l)    => Left(f(l)).right
    case Right(r) => Right(r).right
  }
}
@inline implicit final def either2Projection[L,R](e: Either[L,R]) = new RightBiasedEither(e)

class Catching[T](f: => T) extends grizzled.slf4j.Logging {
  def either(msg: String) = { // add your own logging here
    try { Right(f).right }
    catch { case e: Exception => error( e.getMessage ); Left(msg).right }
  }
}
def catching[T](f: => T) = new Catching(f)

// in your query wrapper equivalent
protected def either[T](result: => T, msg: String)(implicit ss: Session) = {
  catching(result) either(msg)
}

// and then your DAO create methods will do something like:
def create(foo: Foo)(implicit ss: Session) {
  either[Int]( Foos.insert(foo), i18n("not created") )
}

// with the above code you can then strip things down to:
def createUserAndMandatoryCategories(user: User) : Either[Error,User] = {
  db.handle withSession { implicit ss: Session =>
    ss.withTransaction { 
      val result = for {
        _ <- User.create(user)
        _ <- Category.create( Category.buildRootCategory(user) )
        _ <- Category.create( Category.buildInboxCategory(user) )
      } yield user
      result fold ( e => { ss.rollback; Left(e) }, u => Right(u) )
    }
  }
} 
```

在我看来，没有必要记录成功的创建事件（只有失败），因为整个事务在失败时回滚，但是 YMMV，可以根据需要添加日志记录。

# iphone - 与iphone照片应用程序相同的虹膜动画

> ID：12107273
> 
> 赞同：0
> 
> 时间：2012-08-24T10:05:41.597
> 
> 标签：iphone, objective-c, xcode, animation

我想拥有与 iphone 原始照片应用程序完全相同的虹膜动画。

现在我用这个：

```
CATransition *animation = [CATransition animation];
    animation.delegate = self;
    animation.duration = 1.5;
    animation.timingFunction = [CAMediaTimingFunction
                                functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    animation.type = @"cameraIris";
    [self.navigationController.view.layer addAnimation:animation forKey:nil]; 
```

它正在工作，但它不是完全相同的动画。虹膜的视图应该来自底部，然后虹膜应该打开。使用我的代码，我只有出现在中心并打开的虹膜。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:47:16.087

你应该在你的内容视图上添加一个额外的视图，然后

```
[extraView.layer addAnimation:animation forKey:nil]; 
```

在动画完成块中，调用

```
[extraView removeFromSuperView]; 
```

# php - Web 应用程序的 Ruby 前端和 PHP 后端？

> ID：12107274
> 
> 赞同：0
> 
> 时间：2012-08-24T10:05:41.913
> 
> 标签：php, ruby-on-rails

我正在设计一个网络应用程序。

我想知道设计一个 ruby​​ 前端是否可行，它存储和检索数据以显示给用户。

然后开发一个 php 后端，它监听数据库的更改，并根据更改的内容执行一些操作并更新数据库。

对这种类型的实现的任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:08:19.837

Ruby 足以处理前端和后端，如果不需要，为什么要混合 2 种语言，

在 Rails 中有回调，如果表字段发生变化，你可以做你想做的事。

# c# - 如何从数据字典中查询给定 id 的数据表

> ID：12107280
> 
> 赞同：1
> 
> 时间：2012-08-24T10:06:11.447
> 
> 标签：c#, data-dictionary

嗨，我在读取字典中给出了 id 的数据表时遇到了问题。请任何人帮助我。下面是我的代码。我有一个字典 datasourceData 我正在存储数据表。我需要为给定的 id 检索存储在字典中的数据表。

```
public Dictionary<Guid, DataTable> dataSourceData { get; set; }

public DataModel()
        {
            dataSourceData = new Dictionary<Guid, DataTable>();
            logger = new BasicFileLogger.Logger();
        }

public DataTable GetDataSourceDescriptionById(Guid piId)
        {
            if (piId == null || piId == Guid.Empty)
                throw new InvalidOperationException("No such datasourcedescriptionId");
            try
            {
                return dataSourceData.Values.Where(db => db.Equals(piId));
            }
            catch (Exception ex)
            {
                logger.WriteException(ex);
                throw new InvalidOperationException(ex.Message);
            }
        } 
```

请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:07:58.827

你想改变这条线

```
return dataSourceData.Values.Where(db => db.Equals(piId)); 
```

到

```
return dataSourceData[piId]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:08:46.967

您可以使用密钥简单地访问它：

```
if(dataSourceData.ContainsKey(yourGUID))
    DataTable dt = dataSourceData[yourGUID]; 
```

您要访问`yourGUID`的对象在哪里，您可以检查您的字典是否包含密钥，因此您的方法可以是：`GUID``GUID`

```
public DataTable GetDataSourceDescriptionById(Guid piId)
        {
            Dictionary<Guid, DataTable> dataSourceData = new Dictionary<Guid, DataTable>();
            if (dataSourceData.ContainsKey(piId))
            {
                return dataSourceData[piId];
            }
            else
            {
                InvalidOperationException ex = new InvalidOperationException("No such datasourcedescriptionId"));
                logger.WriteException(ex);
                throw ex;
            }
        } 
```

# c# - Dundas / Microsoft 绘制堆叠面积图多个系列，混合正负

> ID：12107290
> 
> 赞同：1
> 
> 时间：2012-08-24T10:06:43.663
> 
> 标签：c#, asp.net, .net, charts, dundas

我想创建一个包含多个系列的堆叠面积图，但是我们希望所有正值都以正向堆叠（X 轴上方），所有负值都以负向堆叠（X 轴下方）。

堆叠区域系列似乎没有产生预期的效果。这有点难以解释，但如果有 4 个系列和系列 1、2 有一个正数据点，这些数据点会远离 x 轴向上堆叠。如果系列 3 有一个负数据点，则系列将从 1 和 2 的累积峰值向下向 x 轴渲染，最后 4 系列将从 1、2 和 3 系列的累积进行渲染。

我正在使用（旧版）Dundas 图表，这是 Microsoft 购买 IP 并在 .NET 中创建 Microsoft Charting Visualization 之前的版本。相反，可能会向我们切换，所以如果这些想法也涉及这个，那就太好了。

任何人都可以提出一些想法或方法来使用这两种技术实现这一目标。

我们是否使用了错误类型的图表？

谢谢，

菲利普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T22:02:29.937

Dundas 数据可视化在这里有一个他们称之为“瀑布图”的演示：http: [//support.dundas.com/Dashboard3.Samples_Chart_WaterfallChart.ashx](http://support.dundas.com/Dashboard3.Samples_Chart_WaterfallChart.ashx)

据我所知，你需要“升级”到微软购买 IP 之后。也许您可以查看演示脚本并使用您所拥有的解决方法？直到微软买了它们，我才登上 Dundas 火车，所以我不知道。

我希望这有帮助。

# image - r中带有条形图或马赛克图的热图

> ID：12107292
> 
> 赞同：0
> 
> 时间：2012-08-24T10:06:45.893
> 
> 标签：image, r, matrix, histogram

我有一个矩阵，显示了 2 个不同地点的物种之间的性状相似性，即

```
relationship<-matrix(1:6,ncol=2)
colnames(relationship)<-c("Sp1","Sp2")
rownames(relationship)<-c("Sp3","Sp4","Sp5")

     Sp1 Sp2
Sp3   1   4
Sp4   2   5
Sp5   3   6 
```

我还有一个矩阵显示它们在每个站点的丰度

```
abundance<-matrix(1:5,ncol=1)
rownames(abundance)<-c("Sp1","Sp2","Sp3","Sp4","Sp5")
colnames(abundance)<-"abundance"

       abundance
 Sp1         1
 Sp2         2
 Sp3         3
 Sp4         4
 Sp5         5 
```

我想创建一个带有沿轴的条形图的热图，如下所示：

![在此处输入图像描述](../Images/2bb1c0adc7490befd709fe99d7b1aaaa.png)

更新原始问题

或者（如 BenBarnes 所建议）我想创建一个马赛克图，使用丰度来控制瓷砖的大小和矩阵来指示颜色的“强度”。对于上面的马赛克图示例，非常粗略地看起来像这样：

![在此处输入图像描述](../Images/b2e599e9a46824e165527caf4e628455.png)

另外我想知道您对哪种方法最清楚地显示物种之间的关系以及它们的丰度之间的关系的看法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:00:58.713

使用`graphics` 包函数（条形图、图像等）你可以做这样的事情。

```
bp1 <- barplot(t(abundance[3:5, ]), width = 0.2, space = 0.7, plot = FALSE)
bp2 <- barplot(t(abundance[1:2, ]), horiz = TRUE, width = 0.05, space = 1, plot = FALSE)

par(fig = c(0, 0.8, 0, 0.8), new = TRUE)
par(xaxt = "n", yaxt = "n")
image(relationship)
par(fig = c(0, 0.8, 0.55, 1), new = TRUE)
barplot(t(abundance[3:5, ]), width = 0.2, space = 0.7)
text(bp1, abundance[3:5,] - 0.5, c("Sp3", "Sp4", "Sp5"))
par(fig = c(0.65, 1, 0, 0.8), new = TRUE)   
barplot(t(abundance[1:2, ]), horiz = TRUE, width = 0.05, space = 1)
text(abundance[1:2,] - 0.5, bp2, c("Sp1", "Sp2")) 
```

![在此处输入图像描述](../Images/180f96d08115aed4bf79f69d77cb6282.png)

# java - java中使用opensaml解密xbox saml令牌的问题

> ID：12107302
> 
> 赞同：2
> 
> 时间：2012-08-24T10:07:39.010
> 
> 标签：java, saml, xbox, unmarshalling, opensaml

我正在尝试使用 opensaml 解密 java 中的 xbox saml2 令牌。以下是我尝试遵循的步骤 1\. 将 saml2 令牌 xml 转换为 saml2 对象 2\. 验证签名 3\. 解密对象

我在解组 saml2 xml 期间遇到异常。代码无法找到解组器。

令牌示例 saml2 xml。

```
 <xenc:EncryptedData Type="http://www.w3.org/2001/04/xmlenc#Element" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
<xenc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes256-cbc" /> 
<KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
<e:EncryptedKey xmlns:e="http://www.w3.org/2001/04/xmlenc#">
<e:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-oaep-mgf1p">
<DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" /> 
</e:EncryptionMethod>
<KeyInfo>
<o:SecurityTokenReference xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
<X509Data>
<X509IssuerSerial>
<X509IssuerName>CN=LVISPXBOX01.istreamplanet.isp</X509IssuerName> 
<X509SerialNumber>26119146566321683660382502106101553957</X509SerialNumber> 
</X509IssuerSerial>
</X509Data>
</o:SecurityTokenReference>
</KeyInfo>
<e:CipherData>
<e:CipherValue></e:CipherValue> 
</e:CipherData>
</e:EncryptedKey>
</KeyInfo>
<xenc:CipherData>
<xenc:CipherValue>token value</xenc:CipherValue> 
</xenc:CipherData>
</xenc:EncryptedData> 
```

用于解组的代码

```
private String decryptSAML(String filePath){

        try {

            DefaultBootstrap.bootstrap();
            InputStream in = getClass().getResourceAsStream(filePath);
         // Get parser pool manager
            BasicParserPool ppMgr = new BasicParserPool();
            ppMgr.setNamespaceAware(true);
            Document inCommonMDDoc = ppMgr.parse(in);
            Element metadataRoot = inCommonMDDoc.getDocumentElement();

            System.out.println("First element of InCommon data was not expected EntitiesDescriptor"+metadataRoot.toString());

         // Get apropriate unmarshaller
         UnmarshallerFactory unmarshallerFactory = Configuration.getUnmarshallerFactory();
         Unmarshaller unmarshaller = unmarshallerFactory.getUnmarshaller(metadataRoot);
         System.out.println("unmarshaller" +unmarshaller);
         EncryptedAssertion encryptedAssertion = (EncryptedAssertion)unmarshaller.unmarshall(metadataRoot);

           List<EncryptedKey> encList=encryptedAssertion.getEncryptedKeys();

    System.out.println("encList "+encList.isEmpty());
     System.out.println("encList "+encList.size());
    for(EncryptedKey encryptedKey:encList){
        System.out.println(encryptedKey);
    }
        } catch (XMLParserException xe) {
            System.err.println("Unable to parse XML file: " + xe);
        } catch (UnmarshallingException ue) {
            System.err.println("Unable to unmarshall XML: " + ue);
        }

        return null;

    } 
```

我无法从中提取任何加密密钥。我究竟做错了什么

unmarshallerFactory 无法找到编组器。它返回为空。

如果有人可以帮助我，我将不胜感激。这方面的文档似乎很少。

# php - Symfony：允许多种 mime 类型

> ID：12107303
> 
> 赞同：1
> 
> 时间：2012-08-24T10:07:41.460
> 
> 标签：php, symfony1, symfony-1.4, symfony-forms

我正在尝试允许在我的文件上传中包含多种 mime 类型。我试过这样的事情：

```
$this->validatorSchema['filename'] = new sfValidatorFile(array(
  'required'        => false, 
  'path'            => sfConfig::get('sf_upload_dir'),
  'mime_categories' => array(
    'application' => array(
      'application/pdf'
    ),
    'web_images'  => array(
      'image/jpeg',
      'image/pjpeg',
      'image/png',
      'image/x-png',
      'image/gif',
    )
  ),
  'mime_types' => array('application', 'web_images')
)); 
```

我不想让所有类型的 mime 类型都包含在我的上传中，我也不想将类别/类型合并到一个数组中。有没有人遇到过这种情况或知道为什么会这样？

从`sfValidatorFile.class.php`

```
$mimeTypes = is_array($this->getOption('mime_types')) ? $this->getOption('mime_types') : $this->getMimeTypesFromCategory($this->getOption('mime_types')); 
```

它似乎正在接受数组，并且似乎我做得对。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T18:56:28.020

sfValidatorFile 文档说：

`mime_types: Allowed mime types array or category (available categories: web_images)`

（sfValidatorFile.php，第 27 行）。它允许 mime 类型数组或（一个）类别（不是类别数组）。这就是您的代码不起作用的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:00:13.000

~~你在错误的地方混合了很多东西。把事情简单化。您可以为所需的`mime_types`每个 mime_types 提供一个参数。~~

例如，在这里我接受所有类型的图像或 pdf：

```
$mime_types = array(
    'image/jpeg',
    'image/pjpeg',
    'image/png',
    'image/x-png',
    'image/gif',
    'application/pdf',
);

$this->validatorSchema['filename'] = new sfValidatorFile(array(
    'mime_types' => $mime_types
), array(
    'invalid'    => 'Invalid file.',
    'required'   => 'Select a file to upload.',
    'mime_types' => 'The file type is incorrect.'
)); 
```

 ~~**编辑：**

好吧，我知道你想要什么。你的代码几乎是正确的，但是关于`mime_types`检查是如何完成的，如果你给出一个数组，这意味着它是一个 mime_types 数组，而不是一个类别数组。如果您不提供数组，则表示它是一个 mime 类别。

这听起来像是 symfony 中的一个错误，但是你应该给出一个合并数组，然后将它传递给 mime_types 选项。~~

# ruby-on-rails-3 - Rails 3.1 - 识别不在连接中的记录？

> ID：12107304
> 
> 赞同：0
> 
> 时间：2012-08-24T10:07:44.100
> 
> 标签：ruby-on-rails-3, activerecord

我对架构进行了更改并引入了新的多对多关系。大多数记录都已被修改，但我想找出任何被“孤立”的记录。

理想情况下，我希望在我的一个控制器中将其编写为一种方法并呈现在视图中，因为我认为这将是一个有用的管理工具以供将来使用（即使未来的记录应该没问题）。

如果表 A 是产品，表 B 是供应商，C 是连接表，我应该如何处理？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:44:58.153

我没有亲自尝试过，但像下面这样的东西可能会起作用。不确定是否坦率：P

获取是否有任何孤儿产品

```
products  = Product.find(:all, :include => :suppliers)
#for each products
# show the Product unless product.suppliers.any? 
```

以同样的方式

```
suppliers  = Supplier.find(:all, :include=>:products)
#for each suppliers
# show the Supplier unless supplier.products.any? 
```

你可以试试这个，我回家后确认解决方案:)

# android - Android Inside Adapter getView 没有被调用？

> ID：12107306
> 
> 赞同：0
> 
> 时间：2012-08-24T10:07:44.943
> 
> 标签：android, listview, adapter

获取列表大小为 46。我得到了 constrator 中的所有值。getView 没有调用，

我的代码如下，

```
 public class Atom_1_Adapter extends BaseAdapter {

                private Activity activity;
                    List<MsgStandard> msgList1=new ArrayList<MsgStandard>();
                private LayoutInflater inflater=null;
                ImageLoader imageLoader;    
                int size=0;
                String tag="Atom_1_Adapter";

            public Atom_1_Adapter(Activity activity, List<MsgStandard> msgList1) {
                    this.activity = activity;
  this.msgList1 = msgList1
                    size=this.msgList1.size();
                    inflater = (LayoutInflater)this.activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    imageLoader=new ImageLoader(activity);
                }

        @Override
            public int getCount() {
                return size;
            }

            @Override
            public Object getItem(int position) {
                return position;
            }

            @Override
            public long getItemId(int position) {
                return position;
            }

        class ViewHolder{
                ImageView image1,image2;
        }
            @Override
            public View getView(final int position, View convertView, ViewGroup parent) {
                System.out.println("enter get view--->>>>>>");
                View vi=convertView;
                ViewHolder holder=new ViewHolder();
                try{
                    vi=inflater.inflate(R.layout.homepagelist_1_adapter,null);

        //here my layout declaration

        vi.setTag(holder);

        //here set value for TextView,ImageView... etc

        return vi;

        }catch{}
        }
        } 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:10:49.263

试试这个。

更改您的构造函数代码。

```
public Atom_1_Adapter(Activity activity, List<MsgStandard> msgList1) 
{
   this.activity = activity;
   this.msgList1 = msgList1
   size=this.msgList1.size();
   inflater = (LayoutInflater)this.activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
   imageLoader=new ImageLoader(activity);
} 
```

**注意：** this.msgList1.size() 被视为您在适配器类中声明的类变量。因此，如果您想查找传入函数的 List 的大小，则需要在构造函数中删除**msgList1.size** () 的前面。并分配`this.msgList1 = msgList1;`。**看我的代码**

```
public View getView(int position, View convertView, ViewGroup parent) 
{
    ViewHolder holder;

    if (convertView == null) 
    {
        convertView = mInflater.inflate(R.layout.menu_row, null);
        holder = new ViewHolder();

        holder.textViewMenuName = (TextView)convertView.findViewById(R.id.textViewMenuName);
        convertView.setTag(holder);
    }
    else 
    {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.textViewMenuName.setText("Test");
            return convertView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:26:17.250

在你的课堂上，你有这个领域：

```
List<MsgStandard> msgList1=new ArrayList<MsgStandard>(); 
```

现在，你的构造函数也接受一个 type 的参数，`List`同名：`msgList1`

问题是您在构造函数中调用以下行

```
size=this.msgList1.size(); 
```

关键字`this`引用当前对象，因此它将引用您的`msgList1`成员字段，而不是构造函数参数。

由于`msgList1`成员字段还没有任何值，所以`size()`会返回 0。因此`getCount()`调用该方法时，它返回 0，并且 Adapter 认为数组中没有元素。

所以，要修复它，在你的构造函数中你应该去掉**这个**关键字，并引用构造函数参数：

```
size=msgList1.size(); 
```

此外，您应该在构造函数中再添加一行，并将构造函数中的列表分配给您的类成员：

```
this.msgList1 = msgList1; 
```

# specflow - Specflow StepArgumentTransformation：移动到单独的文件

> ID：12107308
> 
> 赞同：1
> 
> 时间：2012-08-24T10:07:48.167
> 
> 标签：specflow

我正在尝试将 my`StepArgumentTransformations`放入“实用程序文件”中，以便多个 StepDefinitions 可以使用它们。不幸的是，看起来它们需要在使用它们的同一个 StepDefinition 类中。

有没有办法让specflow在整个项目中搜索它们？（就像它对步骤绑定所做的那样）我不想将转换复制到我想使用它们的每个 StepDefinition 类中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T10:10:43.567

我找到了解决方案。

我忘记将 [Binding] 属性放在我将 StepArgumentTransformation 移动到的“实用程序类”上。

# asp.net - ASP.Net 应用程序分为不同的层

> ID：12107310
> 
> 赞同：1
> 
> 时间：2012-08-24T10:08:01.813
> 
> 标签：asp.net, security, architecture, n-tier-architecture

我正在处理一种无法让我深信服的架构方法，但我想不出一个好的替代方案。基本上，我们公司几乎总是受到攻击......我的意思是不断尝试对我们的公共网站进行网络钓鱼、欺骗、暴力破解等攻击。已决定在 3 层配置上部署 Web 应用程序（我的意思是层，而不是他们经常混淆的层），让表示层位于机器上，位于暴露于 Internet 的子网中，其余部分应用程序位于内部子网上，应用程序服务器基本上公开演示服务器或其他内部系统所需的一切，并且显然是数据库服务器。

现在，表示和业务逻辑之间的分离在开发和性能方面都非常重要：使用专用的 DLL 执行数据访问显然比调用远程服务执行相同的操作要快。

另一方面，这被视为提高安全性的最实用的方法：在这种部署模型中，表示层可能会被黑客攻破，但仍然无法访问数据库，这就是重要部分。

表示层和业务层之间的通信是通过 WCF 服务进行的，公开经过身份验证的 SOAP 方法。

而且做法是让BL层中的所有业务逻辑，让表现层相当“愚蠢”：所以BL层不仅仅是一个安全的DAL层，而是包含了所有的逻辑。

这是可以接受的方法吗？有一些更聪明的方法可以处理我们缺少的这种情况吗？您是否愿意将 BL 保留在演示层，而仅将 DAL 放在中间层？出于什么原因？我对我们的解决方案感到非常不确定，所以我正在寻求任何建议。

# regex - 正则表达式查询

> ID：12107313
> 
> 赞同：1
> 
> 时间：2012-08-24T10:08:08.197
> 
> 标签：regex, c#-4.0

string x= "搜索结果：1,312,224 个中的 1 - 20 个符合您的搜索条件"。

需要验证它是否包含“搜索结果：(X) 的 1 - 20 个用于您的搜索条件”并且 (x) 可以是任何数字

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T10:12:52.013

这是代码

```
var r = new Regex(@"Search Results: 1 - 20 of [0-9,]+ for your search criteria");
if (r.IsMatch(x)) {
  // yes, match, do your stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T10:12:42.897

你想要这样的东西吗？

```
Regex rgx = new Regex(@"Search Results: 1 - 20 of ([\d,]+) for your search criteria"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T10:19:50.267

`Search Results: 1 - 20 of ([0-9]+,)+[0-9]+ for your search criteria`

# java - Spring LocaleResolver 链接

> ID：12107317
> 
> 赞同：7
> 
> 时间：2012-08-24T10:08:19.803
> 
> 标签：java, spring, spring-mvc, localization, internationalization

是否可以链接语言环境解析器？

我想从以下位置获取语言环境值：

1.  如果使用我接受的语言映射会话

2.  cookie 如果映射到我接受的语言

3.  如果两者都不包含语言环境信息，请从接受语言中提取它并与我接受的语言环境进行最佳匹配。

你会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:05:42.970

我认为您需要编写自己的[LocaleResolver](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/servlet/LocaleResolver.html)来包装 Spring 的语言环境解析器列表。您一个接一个地调用它们，直到 a`Locale`得到解决。如果列表没有生成`Locale`，则在`LocaleResolver`.

以下是一些您可能会觉得有用的链接：

[http://code.lds.org/maven-sites/stack/modules/web-spring/3.0.8-SNAPSHOT/apidocs/org/lds/stack/web/spring/i18n/ChainedLocaleResolver.html](http://code.lds.org/maven-sites/stack/modules/web-spring/3.0.8-SNAPSHOT/apidocs/org/lds/stack/web/spring/i18n/ChainedLocaleResolver.html)

[https://mvnrepository.com/artifact/org.lds.stack.web/stack-web-spring/3.0.8](https://mvnrepository.com/artifact/org.lds.stack.web/stack-web-spring/3.0.8)

或者，如果您更喜欢两个链接的视图：

```
package org.lds.stack.web.spring.i18n;

import java.util.ArrayList;
import java.util.List;
import java.util.Locale;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.web.servlet.LocaleResolver;
import org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver;
import org.springframework.web.servlet.i18n.FixedLocaleResolver;

/**
 * This locale resolver provides the ability to define a list of resolvers from which to determine
 * the locale.  This allows us to give preference to certain locale resolution schemes by putting
 * them earlier in the list.  
 * <p/>
 * 
 * The order of resolvers from which to find the given locale (or set a specified locale) could be
 * defined in the spring context file with something like:
 * 
 * <pre>
 * &lt;bean id=&quot;localeResolver&quot; class=&quot;org.lds.stack.web.spring.i18n.ChainedLocaleResolver&quot;&gt;
 *      &lt;property name=&quot;localeResolvers&quot;&gt;
 *          &lt;list&gt;
 *              &lt;bean class=&quot;org.lds.stack.web.spring.i18n.UrlLocaleResolver&quot; /&gt;
 *              &lt;bean class=&quot;org.lds.stack.web.spring.i18n.NoDefaultSessionLocaleResolver&quot; /&gt;
 *              &lt;bean class=&quot;org.lds.stack.web.spring.i18n.NoDefaultCookieLocaleResolver&quot;&gt;
 *                  &lt;property name=&quot;cookieMaxAge&quot; value=&quot;31536000&quot;/&gt;
 *              &lt;/bean&gt;
 *              &lt;bean class=&quot;org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver&quot; /&gt;
 *              &lt;bean class=&quot;org.springframework.web.servlet.i18n.FixedLocaleResolver&quot; /&gt;
 *          &lt;/list&gt;
 *      &lt;/property&gt;
 *  &lt;/bean&gt;
 * </pre>
 * 
 * This allows you to remove, or re-order the locale resolution schemes to meet your needs.
 * Also note that the id of localeResolver is significant.  The Spring Framework knows to use this
 * resolver as the LocaleResolver by virtue of the id being "localeResolver".
 * <p/>
 * 
 * NOTE: If the default resolver order, shown above, will work for your application, then you can 
 * skip this verbose definition by utilizing the stack-web namespace handler, providing any exposed 
 * attribute values for minor customizations.  The namespace handler is defined as follows:
 * 
 * <pre>
 * &lt;stack-web:locale-resolver /&gt;
 * </pre>
 * 
 * Additionally, in order to change the locale based on a url parameter, you can configure a
 * LocaleChangeInterceptor, which will call the set method of all of the locales in the chained
 * resolver, so that they can be found when resolveLocale(...) is called on them.  
 * <p/>
 * 
 * The interceptor configuration might look as follows:
 * <pre>
 *  &lt;mvc:interceptors&gt;
 *      &lt;bean id=&quot;localeChangeInterceptor&quot; class=&quot;org.springframework.web.servlet.i18n.LocaleChangeInterceptor&quot; /&gt;
 *  &lt;/mvc:interceptors&gt;
 * </pre>
 */
public class ChainedLocaleResolver implements LocaleResolver {

    private List<LocaleResolver> localeResolvers;

    public ChainedLocaleResolver() {
        //if anything other than this default order or set is desired, the list of resolvers
        //to be chained should be set up in the bean definition as shown above
        localeResolvers = new ArrayList<LocaleResolver>();
        //TODO: Is the Url resolver necessary if we have an interceptor that changes the locale from the url?
        localeResolvers.add(new UrlLocaleResolver());
        localeResolvers.add(new NoDefaultSessionLocaleResolver());
        NoDefaultCookieLocaleResolver cookieLocaleResolver = new NoDefaultCookieLocaleResolver();
        cookieLocaleResolver.setCookieMaxAge(31536000);
        localeResolvers.add(cookieLocaleResolver);
        //TODO: may need to create a NoDefault, but that seems difficult as the implementation is provided
        //by the javax.servlet, ..., Also, maybe we could just remove the fixedLocaleResolver, as this one
        //gets the default, and then if people did not use this one, they could add the fixed one back in.
        localeResolvers.add(new AcceptHeaderLocaleResolver());
        localeResolvers.add(new FixedLocaleResolver());
    }

    @Override
    public Locale resolveLocale(HttpServletRequest request) {
        Locale locale = null;
        for (LocaleResolver resolver : getLocaleResolvers()) {
            locale = resolver.resolveLocale(request);
            if (locale != null) {
                return locale;
            }
        }
        return locale;
    }

    @Override
    public void setLocale(HttpServletRequest request, HttpServletResponse response, Locale locale) {
        for (LocaleResolver resolver : getLocaleResolvers()) {
            try {
                resolver.setLocale(request, response, locale);
            } catch (UnsupportedOperationException uoe) {}
        }
    }

    public List<LocaleResolver> getLocaleResolvers() {
        return localeResolvers;
    }
    public void setLocaleResolvers(List<LocaleResolver> localeResolvers) {
        this.localeResolvers = localeResolvers;
    }
} 
```

# javascript - 如何仅在 mongoDB 和流星中获取不同的值？

> ID：12107319
> 
> 赞同：7
> 
> 时间：2012-08-24T10:08:22.993
> 
> 标签：javascript, mongodb, chat, meteor

所以可以说我的聊天数据库充满了这些数据：

```
{_id: "39e92f36-5d0f-44b7-8948-89be9b85bd08", fromPerson: "John Smith", toPerson: "Bob Smith", message: "Hey Buddy"}
{_id: "39e92f36-5d0f-44b7-8948-89be9b85bd08", fromPerson: "John Smith", toPerson: "Joe Smith", message: "Hi how you doing"}
{_id: "39e92f36-5d0f-44b7-8948-89be9b85bd08", fromPerson: "Tom Smith", toPerson: "Bob Smith", message: "Hello Again!"}
{_id: "39e92f36-5d0f-44b7-8948-89be9b85bd08", fromPerson: "Bob Smith", toPerson: "John Smith", message: "Hello Again!"} 
```

我想通过查询这个 mongoDB 返回一组唯一的结果。我该怎么做呢？

例如在 SQL+php 中：

`Select fromPerson Distinct from chatsDB;`

我现在的想法是使用来自和去往人员的列表来呈现模板，以获取用户与之交谈过的人的“chatUserList”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T10:25:13.933

MongoDB 有一个[distinct()](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Distinct)命令，在这种情况下，它完全符合您的要求。

为所有聊天查找不同发件人的示例：

```
> db.chatsDB.distinct('fromPerson');
[ "John Smith", "Tom Smith", "Bob Smith" ] 
```

使用查询过滤器查找向“John Smith”发送消息的唯一人员的示例：

```
> db.chatsDB.distinct('fromPerson', { toPerson: 'John Smith'});
[ "Bob Smith" ] 
```

如果这将成为您的应用程序的常见查询类型，您应该添加适当的索引 .. 例如， on`fromPerson`或`(fromPerson, toPerson)`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T10:11:13.873

看看[这个页面](http://www.mongodb.org/display/DOCS/Aggregation)上的 mongodb 文档。它描述了如何创建不同的查询。

# java - IllegalArgumentException - Tomcat 启动

> ID：12107320
> 
> 赞同：0
> 
> 时间：2012-08-24T10:08:25.443
> 
> 标签：java, eclipse, tomcat, illegalargumentexception

一切运行良好，但我在 Eclipse 的包资源管理器中单击了我的项目并导出了 war 文件，然后我的 tomcat7 服务器停止工作。我有例外：

```
2012-08-24 11:55:19 org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/lib/jvm/java-6-openjdk-i386/jre/lib/i386/server:/usr/lib/jvm/java-6-openjdk-i386/jre/lib/i386:/usr/lib/jvm/java-6-openjdk-i386/jre/../lib/i386:/usr/lib/jvm/java-6-openjdk-i386/jre/lib/i386/client:/usr/lib/jvm/java-6-openjdk-i386/jre/lib/i386::/usr/java/packages/lib/i386:/usr/lib/i386-linux-gnu/jni:/lib/i386-linux-gnu:/usr/lib/i386-linux-gnu:/usr/lib/jni:/lib:/usr/lib
2012-08-24 11:55:19 org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:Applish' did not find a matching property.
2012-08-24 11:55:20 org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
2012-08-24 11:55:20 org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
2012-08-24 11:55:20 org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1531 ms
2012-08-24 11:55:20 org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
2012-08-24 11:55:20 org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.12
java.lang.IllegalArgumentException: avalon-framework-api,xml-apis,junit,classworlds,log4j,servletapi-Extension-Name
    at java.util.jar.Attributes$Name.<init>(Attributes.java:464)
    at java.util.jar.Attributes.getValue(Attributes.java:116)
    at org.apache.catalina.util.ManifestResource.getRequiredExtensions(ManifestResource.java:187)
    at org.apache.catalina.util.ManifestResource.processManifest(ManifestResource.java:156)
    at org.apache.catalina.util.ManifestResource.<init>(ManifestResource.java:52)
    at org.apache.catalina.util.ExtensionValidator.validateApplication(ExtensionValidator.java:197)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5015)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:620)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:303)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:431) 
```

谁能弄清楚发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:37:33.023

这通常意味着您的 webapp 中包含的一个 jar 包含无效的清单条目（它包含逗号分隔的扩展列表而不是空格分隔的列表）。我无法从堆栈跟踪中分辨出哪个 jar 导致了这种情况。有人报告说，类似的问题是由`jaxen-1.1-beta-11.jar`.

# vb.net - 在 MVC 3 中的页面构建期间丢失隐藏字段

> ID：12107324
> 
> 赞同：0
> 
> 时间：2012-08-24T10:08:41.610
> 
> 标签：vb.net, asp.net-mvc-3, hidden-field

我有一个页面，它基本上是一个三阶段向导。我创建了一个类来保存页面上的所有字段并隐藏三个 DIV 中的两个，使它们依次可见。我使用一个名为“wiz”的变量来跟踪我所处的阶段。

> 申请旅行通行证第 2 阶段，共 3 阶段

但是，即使标签显示来自控制器的正确值..

```
'
' POST: /Apply
<HttpPost()>
Function Apply(ByVal mdl As ApplyViewData, ByVal postbutton As Integer) As ActionResult
..
mdl.wiz = 2
..
Return View(mdl)
End Function 
```

.. 下面的隐藏字段具有不同的值！我看不出是什么原因造成的。

```
<h2>Apply for travel pass stage 2 of 3</h2>

<form action="/Pass/Apply" method="post">

<input id="wiz" name="wiz" type="hidden" value="1" />
<input id="client_address" name="client_address" type="hidden" value="" />
<input id="client_name" name="client_name" type="hidden" value="" /> 
```

查看 View 源代码是没有意义的。

```
<h2>Apply for travel pass stage @Model.wiz of 3</h2>

@Code
    Html.BeginForm()
End Code

@Html.Hidden("wiz", Model.wiz)
@Html.Hidden("client_address", Model.client_address)
@Html.Hidden("client_name", Model.client_name)

@Html.ValidationSummary() 
```

为什么 wiz 变量显示为 2 但隐藏为 1？我难住了。

这是使用的类。

```
Public Class ApplyViewData
    Private m_client_id As Long
    Private m_apply_date As Date
    Private m_pass_type As Long
    Private m_client_search As String
    Private m_search_archived As Boolean
    Private m_client_name As String
    Private m_client_address As String
    Private m_proof_of_age As Long
    Private m_proof_of_address As Long
    Private m_photocard As Long
    Private m_ethnicity_id As Long
    Private m_new_pass As Boolean
    Private m_wiz As Integer

Public Property client_id() As Long
    Set(value As Long)
        m_client_id = value
    End Set
    Get
        Return m_client_id
    End Get
End Property
Public Property apply_date() As Date
    Set(value As Date)
        m_apply_date = value
    End Set
    Get
        Return m_apply_date
    End Get
End Property
Public Property pass_type() As Long
    Set(value As Long)
        m_pass_type = value
    End Set
    Get
        Return m_pass_type
    End Get
End Property
Public Property client_search() As String
    Set(value As String)
        m_client_search = value
    End Set
    Get
        Return m_client_search
    End Get
End Property
Public Property search_archived() As Boolean
    Set(value As Boolean)
        m_search_archived = value
    End Set
    Get
        Return m_search_archived
    End Get
End Property
Public Property client_name() As String
    Set(value As String)
        m_client_name = value
    End Set
    Get
        Return m_client_name
    End Get
End Property
Public Property client_address() As String
    Set(value As String)
        m_client_address = value
    End Set
    Get
        Return m_client_address
    End Get
End Property
Public Property proof_of_age() As Long
    Set(value As Long)
        m_proof_of_age = value
    End Set
    Get
        Return m_proof_of_age
    End Get
End Property
Public Property proof_of_address() As Long
    Set(value As Long)
        m_proof_of_address = value
    End Set
    Get
        Return m_proof_of_address
    End Get
End Property
Public Property photocard() As Long
    Set(value As Long)
        m_photocard = value
    End Set
    Get
        Return m_photocard
    End Get
End Property
Public Property ethnicity_id() As Long
    Set(value As Long)
        m_ethnicity_id = value
    End Set
    Get
        Return m_ethnicity_id
    End Get
End Property
Public Property new_pass() As Boolean
    Set(value As Boolean)
        m_new_pass = value
    End Set
    Get
        Return m_new_pass
    End Get
End Property
Public Property wiz() As Integer
    Set(value As Integer)
        m_wiz = value
    End Set
    Get
        Return m_wiz
    End Get
End Property

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:41:56.293

您遇到与[此问题中的另一个人相同的问题](https://stackoverflow.com/questions/13958390/value-using-html-extension-is-different-than-what-it-is-supposed-to-be-if-two-mo/13958559#13958559)。查看接受的答案和评论，因为它们与您的问题相关。

在您的情况下，您可能只需要从`ModelState`key中删除值`wiz`。

# java - 从 JBoss AS7 到远程 JBoss AS4 的 JMS 消息

> ID：12107328
> 
> 赞同：2
> 
> 时间：2012-08-24T10:08:57.923
> 
> 标签：java, jboss, jms

我尝试从位于 JBoss 4 服务器上的远程队列上的 JBoss 7 客户端通过 JMS 发送 TextMessage。

当服务器收到消息时，抛出异常：

```
2012-08-24 12:06:26,988 ERROR [ServerThread] Worker thread initialization failure
java.io.IOException: Can not read data for version 0\.  Supported versions: 1,2,22
    at org.jboss.remoting.transport.socket.ServerThread.versionedRead(ServerThread.java:712)
    at org.jboss.remoting.transport.socket.ServerThread.processInvocation(ServerThread.java:572)
    at org.jboss.remoting.transport.socket.ServerThread.dorun(ServerThread.java:409)
    at org.jboss.remoting.transport.socket.ServerThread.run(ServerThread.java:176) 
```

所以我在 jvm 参数中添加了 -Djboss.remoting.pre_2_0_compatible=true 但现在我得到了另一个例外：

```
java.lang.IllegalArgumentException: Invalid packet type: 17
    at org.jboss.jms.wireformat.PacketSupport.createPacket(PacketSupport.java:379)
    at org.jboss.jms.wireformat.JMSWireFormat.read(JMSWireFormat.java:290)
    at        org.jboss.remoting.transport.socket.ServerThread.versionedRead(ServerThread.java:704)
    at   org.jboss.remoting.transport.socket.ServerThread.processInvocation(ServerThread.java:572)
    at org.jboss.remoting.transport.socket.ServerThread.dorun(ServerThread.java:409)
    at org.jboss.remoting.transport.socket.ServerThread.run(ServerThread.java:176) 
```

谁能帮助我如何通过 JMS 从 JBoss 7 向 JBoss 4 服务器发送消息？

# java - 如何在 NetBeans 中使用相对路径加载文件

> ID：12107334
> 
> 赞同：3
> 
> 时间：2012-08-24T10:09:18.227
> 
> 标签：java, netbeans, properties, netbeans-7, fileinputstream

```
import java.io.*;
import java.util.Properties;

public class NewClass {
    public static void main(String args[]) throws IOException  {
        Properties p = new Properties();
        p.load(new FileInputStream("DBDriverInfo.properties"));
        String url=p.getProperty("url");
        String user=p.getProperty("username");
        String pass=p.getProperty("password");
        System.out.println(url+"\n"+user+"\n"+pass);
    }
} 
```

尽管文件`DBDriverInfo.properties`文件位于同一目录中，但会引发以下异常。

```
Exception in thread "main" java.io.FileNotFoundException: DBDriverInfo.properties (The system cannot find the file specified)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:138)
    at java.io.FileInputStream.<init>(FileInputStream.java:97)
    at NewClass.main(NewClass.java:7) 
```

`javac`在命令行界面中使用编译时，相对路径可以正常工作。但是在 NetBeans 中引发了异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T10:20:46.053

在 Netbeans 中，您需要将该文件放在项目文件夹中，而不是放在 src/package 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:17:52.087

您应该指定文件的完整路径或将文件放入项目目录。项目目录是运行项目时的当前目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T10:55:52.333

确保您的 DBDriverInfo.properties 在 CLASSPATH 上。根据您的代码，将您的属性文件放置到 netbeans 的默认包中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T11:42:38.727

File 类的默认目录是您开始执行主类的目录。对于这些 IDE，默认目录将是您的项目主目录。

为了更好地了解您的默认目录，请从您的 IDE 中执行这两行代码。然后把你的文件放在那里。

```
File f = new File("DBDriverInfo.properties");
System.out.println(f.getAbsolutePath()); 
```

# css - 将 div 内的图标和文本垂直居中

> ID：12107336
> 
> 赞同：0
> 
> 时间：2012-08-24T10:09:28.643
> 
> 标签：css

我想用这个 css 代码将图像及其标题居中在一个 div 中

```
.box {border:2px solid #0094ff;}
.title {background-color:pink;color:white;height:10px; line-height:3px; padding:10px;}
.content {color:#333;padding:10px;}
.box {
    -moz-border-radius-topright:5px;
    -moz-border-radius-topleft:5px;
    -webkit-border-top-right-radius:5px;
    -webkit-border-top-left-radius:5px;
}

.titleIkon{
margin-right:2%;
display:table-cell;
vertical-align:middle;
} 
```

通过这个小提琴[http://jsfiddle.net/7kx4r/](http://jsfiddle.net/7kx4r/)的外观，我可以看出图标或文本也不是居中的。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T10:23:50.440

删除不必要的 CSS 并使用以下 CSS：

```
.title {background-color:pink;color:white; padding:10px; }
.titleIkon{
    margin-right:2%;
    display:inline;
} 
```

## [演示](http://jsfiddle.net/akhurshid/QX44R/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:15:01.760

你需要`.title`上课`display: table-cell;`

```
.title{
  margin-right:2%;
  display:table-cell;
  vertical-align:middle;
} 
```

[**小提琴**](http://jsfiddle.net/7kx4r/16/)

注意：Table-cell 在旧 IE 浏览器中不起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T10:14:53.697

`text-align`与您`div`的上课`title`一起使用

```
text-align: center; 
```

检查这个小提琴[http://jsfiddle.net/7kx4r/4/](http://jsfiddle.net/7kx4r/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T10:17:35.513

像这样的东西？ [http://jsfiddle.net/7kx4r/8/](http://jsfiddle.net/7kx4r/8/)

只需添加`width:XXXpx; margin:0 auto;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T10:18:39.300

试试这个 CSS：

```
.box {border:2px solid #0094ff;}
.title {background-color:pink;color:white;height:10px; line-height:3px; padding:10px;}
.content {color:#333;padding:10px;}
.box {
    position:relative;
    -moz-border-radius-topright:5px;
    -moz-border-radius-topleft:5px;
    -webkit-border-top-right-radius:5px;
    -webkit-border-top-left-radius:5px;
}

.titleIkon{
    position:absolute;
    top:50%;
    margin-top: -8px;
} 
```

这里发生了什么： position:relative 为 .box 的孩子创建了一个新的偏移上下文。

position:absolute 告诉 .titleIkon 使用相对于 .box 的偏移参数（左、右、上、下）

top:50% 告诉 .titleIkon 它应该将其顶部边缘位置视为父级高度的 50%。

margin-top: -8px 告诉浏览器将图像向上移动一半高度（16px / 2 = 8px）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-24T10:21:06.450

只需定义`display:table-cell;` `vertical-align:middle;`您的**.title**类。

[它的工作 IE8 到 IE 10](http://caniuse.com/#search=table-cell)

见 dmeo - [http://jsfiddle.net/7kx4r/10/](http://jsfiddle.net/7kx4r/10/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-24T10:43:12.303

希望你想要这个。

`text-align: center`如果您只希望粉色线位于中心，请给出。[http://jsfiddle.net/7kx4r/17/](http://jsfiddle.net/7kx4r/17/)

# c++ - 检测存储在 Mat 图像 opencv 中的对象

> ID：12107338
> 
> 赞同：0
> 
> 时间：2012-08-24T10:09:32.363
> 
> 标签：c++, opencv, detection, rectangles

我正在尝试使用 opencv 和 Visual Studio Ultimate 使用 C++ 检测对象。我遇到了关于 cv::Mat 的问题，我找不到任何使用这种变量进行对象检测的示例，而只能使用 IplImage。我尝试使用 IplImage 代码并将其转换为 Mat，但它不起作用。但我不想使用 IplImage，我的第一部分代码在 Mat 中，我想继续使用它。

我实际上要做的是在对其进行阈值处理后检测从凸轮存储的图像中最大的矩形。

我已经完成了阈值部分，没关系，它可以工作，我可以让我的对象（白色）在黑色背景中移动。

有人可以帮我跟踪部分吗？我在网上看到了一些 blob 过滤解决方案，但它们对我来说太难了！如果你能想出一个简单的，那就更好了。

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:08:48.610

cv::Mat 封装了较低级别的 IplImage 和其他格式。关于检测，有一个您会发现有用的示例：[squares](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/c/squares.c?rev=1429)。我用谷歌搜索了它，还发现[了](https://stackoverflow.com/questions/8667818/opencv-c-obj-c-detecting-a-sheet-of-paper-square-detection)另一个问题，它是最近的，你可能会感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:44:19.417

cv::Mat 是 opencv 中的新图像类。我认为大多数算法仍然使用 IplImage。出于这个原因，我曾多次问过以下问题：

[openCV 将 IplImage 与 cv::Mat 混合](https://stackoverflow.com/questions/11156019/opencv-mixing-iplimage-with-cvmat)

为了识别对象，我会说观看 opencv 的 cvMatchTemplate 函数。还有垫版本 cv::matchTemplate。还有其他对象识别方法，但它们实现起来有点困难；）

我不知道我是否正确理解了您的其他问题，但我认为您想识别图像中的矩形。也许看这个教程：

[http://docs.opencv.org/trunk/doc/tutorials/imgproc/imgtrans/hough_circle/hough_circle.html](http://docs.opencv.org/trunk/doc/tutorials/imgproc/imgtrans/hough_circle/hough_circle.html)

我不知道矩形的任何标准算法也许你需要自己编码

# c# - 需要尽可能快地获取发布的数据

> ID：12107342
> 
> 赞同：0
> 
> 时间：2012-08-24T10:09:58.900
> 
> 标签：c#

我创建了一个网页来接收来自第三方的一些数据我的代码如下

```
 static StreamReader sr;
    string data = string.Empty;
    protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            if (Request.QueryString["Name"] != null)
            {
                data = Request.QueryString["Name"].ToString();
                ProcessData(data);
            }
            else if (Page.Request.InputStream.Length > 0)
            {
                sr = new StreamReader(Page.Request.InputStream);
                data = Server.UrlDecode(sr.ReadToEnd());
                sr.Close();
                ProcessData(data);
            }
        }
        catch (Exception ex)
        {
            Logger(ex.ToString() + " StackTrace: " + Convert.ToString(ex.StackTrace));
        }
    } 
```

我需要在 1000 毫秒内获取发布的数据和响应。但有时超过 3 秒，有时不到 1 秒。请问有什么机会。我怎样才能减少这个时间。请有人帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:34:26.747

我们在谈论多少数据？这会有很大的不同。

低于一定数量，您读取单个字符串的方法性能更高，但是，超过几千字节，您通常会通过重写 ProcessData 获得更好的性能，以便它有一个需要 a`TextReader`并传递`sr`给它的重载- 它可以自己处理 url-unescaping，也可以使用您传递`sr`给的直通阅读器进行处理，并且在读取时执行 url-unescaping。

门槛在哪里，很难说。在决定选择哪一个时，我会平衡数据大小与采用这种方法的难度。对于任何可以轻松适应的东西（任何在一次传递中进行解释、写入另一个流、存储在数据库中、传递到一个`XmlReader`将非常容易的情况）我会为超过 2- 4kiB 甚至更少（这个`XmlReader`例子很简单，即使是微小的数据我也很可能这样做）。当事情变得更加困难时，我会抵制它，直到我们谈论几百 kiB 或者我**真的很**关心性能。

可以推迟任何处理吗？如果是这样，您可以将该工作传递给另一个线程，并更快地发送响应。

# java - 如何恢复字符串的元素

> ID：12107344
> 
> 赞同：0
> 
> 时间：2012-08-24T10:10:00.727
> 
> 标签：java, string

我有一个形式的字符串：

```
str = "word1_word2_word3_word4_word5" 
```

我想在`"_"`分隔符的帮助下在一个单独的变量中检索每个关键字。

例子：`str = "hello_how_are_you_?"`

```
for str1=hello, str2=how, str3=are, str4=you and str4=? 
```

感谢您的帮助，并为我的学校英语感到抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T10:13:31.103

尝试：

```
String str = "hello_how_are_you_?";
String item[]=str.split("_") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T10:13:50.743

```
String str = "hello_how_are_you_?"
String[] words = str.split("_"); 
```

输出：

```
words[0]; // hello
words[1]; // how
words[2]; // are
words[3]; // you
words[4]; // ? 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T10:14:47.253

只需使用 split 即可。

```
 /* String to split. */
  String str = "one-two-three";
  String[] temp;

  /* delimiter */
  String delimiter = "-";
  /* given string will be split by the argument delimiter provided. */
  temp = str.split(delimiter);
  /* print substrings */
  for(int i =0; i < temp.length ; i++)
    System.out.println(temp[i]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T10:16:19.767

```
String phrase = "hello_how_are_you_?";
String[] tokens = phrase.split("_");

for( String str: tokens)
     System.out.println(str); 
```

此代码将在屏幕上打印：

```
hello
how
are
you
? 
```

**无论如何，如果您正在尝试制作 Paraclete 东西，那么应该有更好的方法来做到这一点，然后将数据保存在这样的字符串中。**

这是一个教程，以防您需要更复杂的东西，然后用单个字符分割：http: [//pages.cs.wisc.edu/~hasti/cs302/examples/Parsing/parseString.html](http://pages.cs.wisc.edu/~hasti/cs302/examples/Parsing/parseString.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T10:16:42.170

```
 String str="hello_how_are_you_?";
    String[] strSplit=str.split("_"); 
```

# html - 理解

> ID：12107346
> 
> 赞同：7
> 
> 时间：2012-08-24T10:10:09.440
> 
> 标签：html, file-upload, preloader

我正在努力思考并在网站中使用选定的图像。

假设我有一个简单的网站，让用户可以使用以下方法从他们的系统中选择图像：

```
<input type="file" id="userImage"> 
```

然后在 JavaScript 中我可以这样做来获取文件：

```
var userImage = document.getElementById('#userImage').files[0]; 
```

**问题：**

1) 我现在可以使用 userImage 吗？比如画在画布上，还是需要先上传到网站服务器？

2）如果我使用图片，网站每次使用时都必须上传它，还是留在内存中？

3) 我如何知道图像何时可以使用？（出于同样的原因，所有图像都应在开始时预加载，然后在画布上绘制）

非常感谢你的帮助 ：）

**跟进**

感谢您的回答。所以看起来它在 html5 中是可能的，但还没有被普遍支持。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-24T10:29:35.067

在 HTML4 中这是不可能的，但在 HTML5 中，您应该能够使用[W3 File API](http://www.w3.org/TR/FileAPI/)访问本地文件。但是，我不确定不同浏览器何时（以及如何）支持它。在我的本地 firefox 14.0.1 中，以下代码有效并生成所选文件的二进制数据：

```
var reader = new FileReader()
reader.readAsDataURL(document.getElementById('userImage').files[0])
alert(reader.result) 
```

以下页面将本地图像绘制到画布上：

```
<html>
  <body>
    <script type="text/javascript">
      function doIt() {
        var reader = new FileReader();
        reader.onload = (function(e) {
            var img = new Image();
            img.src = e.target.result;
            var c = document.getElementById("canvas");
            var ctx = c.getContext("2d");
            ctx.drawImage(img,10,10);
          }
        );
        reader.readAsDataURL(document.getElementById('userImage').files[0]);
      }
    </script>

    <input type="file" id="userImage" />
    <button onclick="doIt()">Render Image</button><br/>
    <canvas id="canvas" style="border: 1px solid black; height: 400px; width: 400px;"/>
  </body>
</html> 
```

也许你应该考虑阅读[2](http://www.html5rocks.com/en/tutorials/file/dndfiles/)。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-24T10:15:19.743

1）您无法打开或修改图像，因为客户端脚本在浏览器沙箱中执行。如果脚本可以访问文件系统或用户文件，这将是一个安全问题

2）不，浏览器将文件自己逐块发送到远程服务器

3) 见第 1 项 :)

# flash - as2 将函数动态添加到 onEnterFrame 函数

> ID：12107365
> 
> 赞同：1
> 
> 时间：2012-08-24T10:11:24.760
> 
> 标签：flash, actionscript-2

我现在正在开发一个功能，可以创建几乎任何我能想象到的图形或特殊效果（假设我有一两个基本的movieClip），但我遇到了一个问题。我需要能够根据传递给 GraphicEffect 函数行为对象的参数向效果movieClip 添加函数。有没有一种有效的方法可以在现有的 onEnterFrame 函数中添加新的函数，如旋转、增长、收缩等，而不需要在其中放置 if 语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:18:41.403

是的，有办法。

我不确定你是如何设置你的行为对象的，但假设它类似于 {A:spin,B:grow,C:fade} 你可以为你的效果动画剪辑实现一个附加功能（我只是调用它'fx'）通过使用以下代码样式：

```
 fx.TempA=fx.onEnterFrame;
   function NewA(){fx.TempA();behaviors.A(fx);};
   fx.onEnterFrame=function(){NewA();};   
   fx.TempB=fx.onEnterFrame;
   function NewB(){fx.TempB();behaviors.B(fx);};
   fx.onEnterFrame=function(){NewB();};   
   fx.TempC=fx.onEnterFrame;
   function NewC(){fx.TempC();behaviors.C(fx);};
   fx.onEnterFrame=function(){NewC();}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:52:46.950

不一样的方式

```
mcFX.enterFrameFunctions = [];

mcFX.onEnterFrame = function(){
    for(var i in this.enterFrameFunctions) this.enterFrameFunctions[i]();
}

function a():Void {
    trace("a called");
}

function b():Void {
    trace("b called");
}

function c():Void {
    trace("c called");
}

mcFX.enterFrameFunctions.push(a, b); 
```

# xml - 序言错误中不允许 XMLParse() 抛出内容

> ID：12107368
> 
> 赞同：2
> 
> 时间：2012-08-24T10:11:45.000
> 
> 标签：xml, coldfusion, xml-parsing

`XMLParse()`正如标题所说，我目前遇到问题，它不断抛出此错误

```
An error occured while Parsing an XML document.
Content is not allowed in prolog. 
```

我的代码目前非常基本，我只是想让它转储 XML 值。

```
<cfset XMLPOST = GetHTTPRequestData().content>
<cfset xmlDOM = XMLParse(XMLPOST)>
<cfdump var="#xmlDOM#"> 
```

我试过[Ben Nadels](http://www.bennadel.com/blog/1206-Content-Is-Not-Allowed-In-Prolog-ColdFusion-XML-And-The-Byte-Order-Mark-BOM-.htm)方法来确定它是否是 BOM，他的转储给了我这个输出

```
[x] - 120
[m] - 109
[l] - 108
[=] - 61
[%] - 37
[3] - 51 
```

在我看来，这个角色没有问题。

XML 正在发布到我们的服务器，所以我想知道它是否会导致问题？正在发布的 XML 采用这种格式

```
xml=%3Cjob%3E%0D%0A++++%3Cjobref%3EExample+jobref%3C%2Fjobref%3E%0D%0A++++%3Cjobtitle%3EExample+jobtitle%3C%2Fjobtitle%3E%0D%0A++++%3Cdescription%3EExample+description%3C%2Fdescription%3E%0D%0A%3Cjob%3E%0D%0A++++++++++++ 
```

我有一种感觉，这是导致错误的原因吗？当我在我的文档上手动指定这个 XML 作为其原始形式的变量时

```
<job>
    <jobref>Example jobref</jobref>
    <jobtitle>Example jobtitle</jobtitle>
    <description>Example description</description>
<job> 
```

并解析该变量，它可以很好地转储。

我假设我需要做的是在尝试解析之前将 XML Post 格式更改为不同的格式？我曾尝试使用`ToString()`但无济于事。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:31:09.273

而不是使用请求的原始内容，您应该使用 ColdFusion 的 FORM-Scope 它将为您处理 URLdecode 等并将正文拆分为单独的变量：

代替：

```
<cfset XMLPOST = GetHTTPRequestData().content>
<cfset xmlDOM = XMLParse(XMLPOST)>
<cfdump var="#xmlDOM#"> 
```

和：

```
<cfset XMLPOST = FORM.xml>
<cfdump var="#XMLParse(XMLPOST)#"> 
```

也许您还想检查它是否是使用[`isXML()`](https://cfdocs.org/isxml)-function 发布的有效 XML。

# android - 如何在 Android 视图之间添加 GLSurfaceView？

> ID：12107369
> 
> 赞同：6
> 
> 时间：2012-08-24T10:11:45.940
> 
> 标签：android, android-layout, glsurfaceview

我正在开发 Android -Sandwich 类型的特殊 UI，即 GLSurfaceView 上的一个小型 GalleryView（带有透明区域），位于背景视图（LinearLayout+一些小部件）之上。这就是我想设置它的方式：

```
<User> 
```

顶视图
---画廊视图
|
---GLSurfaceView(带透明区域)
|
---LinearLayout(with widgets)
BOTTOM View

在常规模式下，GLSurfaceView 在透明区域有黑色背景，所以我看不到底层，但是当我使用 setZOrderOnTop(true); 我可以看到底层，但顶层（画廊）也位于 Glsurface 视图的后面。我怎样才能像在模式中那样完成所需的视图？

XML 代码虚拟示例（使用 AnalogClock 而不是 GalleryView）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#920000"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/LinearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|right" >

        <AnalogClock
            android:id="@+id/analogClock2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <com.test.CustomGlView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/gl_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <AnalogClock
        android:id="@+id/Gallery_dummyview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-06T17:35:04.857

你不能这样做。

GLSurfaceView 的 Surface 位于与基于 View 的 UI 不同的合成层上。它可以在视图之上或之下，但它不能夹在视图元素之间。

您可以改用 TextureView (API 14+)。它有一个要渲染的 Surface，但由应用程序合成到 View 层，因此布局就像任何其他 View 一样工作。您需要为 GLES 提供自己的 EGL 设置和线程管理，而不是依赖 GLSurfaceView 中的内容，但您可以在[Grafika](https://github.com/google/grafika)中找到示例。

# c++ - 覆盖 C++ 类中的一种方法

> ID：12107371
> 
> 赞同：1
> 
> 时间：2012-08-24T10:11:46.807
> 
> 标签：c++

如果我有这门课：

```
class FooBar {
    public:
        FooBar(int qux);
        void bar();

        void foo1();
        void foo2();
        //...
        void foo99();
} 
```

如何覆盖 中的`bar`方法`FooBar`，同时仍然能够使用所有其他`foo`方法而无需再次定义它们？

**编辑：**

我想这样使用：

```
FooBar2 baz(1); // call the constructor of FooBar, FooBar(1)
baz.foo1(); //call method foo1 of original FooBar
baz.bar(); // call method bar of FooBar2 
```

我**不想**编辑 FooBar 的标题或实现。

是否也可以让构造函数调用原来的构造函数`FooBar`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:14:00.743

你 make `bar` `virtual`，因为覆盖只适用于`virtual`方法。

然后你扩展`FooBar`并提供一个新的实现`bar`。

```
class FooBar {
    public:
        virtual void bar();

        void foo1();
        void foo2();
        //...
        void foo99();
};

class FooBarDerived : FooBar
{
    public:
        void bar();
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T10:16:03.957

遗产。

```
class FooBar
{
public:
    virtual void bar() { ... default implementation ... }
    void foo1();
    void foo99();
}

class FooBarVariation : public FooBar
{
public:
    virtual void bar() { ... different implementation ... }
} 
```

`FooBarVariation`将像 a 一样`FooBar`，但具有不同的实现`bar()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T10:14:02.397

您需要的是***Function Hiding***而不是***覆盖***。
仅当`virtual`涉及关键字时才适用覆盖。

只需在派生类中重新定义要重载的方法，就可以了。

```
class YourClass: public FooBar 
{
    public:
       void bar(){}
}; 
```

类`YourClass`对象可以访问 的所有方法，`FooBar`因为这些是`public`方法，并且您的类从它公开派生，而`YourClass::bar()` ***隐藏*** `FooBar::bar()`.

**编辑：**
您编辑的问题清楚地表明，***功能隐藏***确实是您所需要的。
这是实现您的要求的功能隐藏的**[在线演示。](http://ideone.com/w18Gj)**

> **是否也可以让构造函数调用原来的构造函数`FooBar`？**

您可以使用***成员初始化列表***通过派生类构造函数调用适当的基类构造函数。

**好读：**
[构造函数中这个奇怪的冒号成员（“：”）语法是什么？](https://stackoverflow.com/questions/1711990/what-is-this-weird-colon-member-syntax-in-the-constructor/8523361#8523361)

# jakarta-ee - 如何在 ServiceMix 上部署 JSF 2.0 .WAR

> ID：12107372
> 
> 赞同：1
> 
> 时间：2012-08-24T10:11:53.380
> 
> 标签：jakarta-ee, jsf-2, osgi, war, apache-servicemix

我需要转换我的 JSF 2.0 项目，以便它可以部署在 ServiceMix 上。应该在 MANIFEST.MF 中导入什么以及在部署之前应该将什么安装到 ServiceMix？

起初我的网络服务找不到 javax.faces.webapp.FacesServlet 类。在我将它添加到 MANIFEST.MF 中的 Import 后，ServiceMix 无法运行已安装的捆绑包并出现错误：

```
org.osgi.framework.BundleException: Unresolved constraint in bundle avita [157]: Unable to resolve 157.0: missing requirement [157.0] package; (package=javax.faces.webapp.FacesServlet) 
```

如何安装 package:`javax.faces.webapp.FacesServlet`以及 JSF 2.0 工作所需的任何其他包？在我的 Web 服务中，我还使用了 EclipseLink (JPA 2.0)、MySQL JDBC 连接器和 Hibernate。它在 GlassFish v3 上运行良好。

请告诉我我应该如何进行。我搜索了很多，找不到解决方案。

* * *

**更新**：我已将我的测试 facelet 部署到 servicemix，但存在更多问题。在服务组合中，我发布了以下命令来加载所需的库：

```
install mvn:org.apache.myfaces.core/myfaces-api/1.2.9<br>
install mvn:org.apache.myfaces.core/myfaces-impl/1.2.9<br>
install mvn:commons-beanutils/commons-beanutils/1.8.3<br>
install mvn:commons-collections/commons-collections/3.2.1<br>
install mvn:commons-codec/commons-codec/1.4<br>
install mvn:org.apache.commons/com.springsource.org.apache.commons.digester/1.8.0<br>
install mvn:org.apache.commons/com.springsource.org.apache.commons.discovery/0.4.0<br> 
```

现在我可以查看简单的 facelets。我无法通过实体加载任何具有持久性的页面。我有以下错误：

```
2012-08-27 11:39:11,180 | WARN  | mix-4.4.2/deploy | /avitaTest                       | ?                                   ? | 108 - org.eclipse.jetty.util - 7.4.5.v20110725 | unavailable
java.lang.IllegalStateException: No Factories configured for this Application. This happens if the faces-initialization does not work at all - make sure that you properly include all configuration settings necessary for a basic faces application and that all the necessary libs are included. Also check the logging output of your web application and your container for any exceptions!
If you did that and find nothing, the mistake might be due to the fact that you use some special web-containers which do not support registering context-listeners via TLD files and a context listener is not setup in your web.xml.
A typical config looks like this;
<listener>
  <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
</listener>

    at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:106)[157:org.apache.myfaces.core.api:1.2.9]
    at javax.faces.webapp.FacesServlet.init(FacesServlet.java:137)[157:org.apache.myfaces.core.api:1.2.9]
    at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:436)[97:org.eclipse.jetty.servlet:7.4.5.v20110725]
    at org.eclipse.jetty.servlet.ServletHolder.doStart(ServletHolder.java:260)[97:org.eclipse.jetty.servlet:7.4.5.v20110725]
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:58)[108:org.eclipse.jetty.util:7.4.5.v20110725]
    at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:765)[97:org.eclipse.jetty.servlet:7.4.5.v20110725]
    at org.eclipse.jetty.servlet.ServletHandler.updateMappings(ServletHandler.java:1215)[97:org.eclipse.jetty.servlet:7.4.5.v20110725]
    at org.eclipse.jetty.servlet.ServletHandler.setServletMappings(ServletHandler.java:1273)[97:org.eclipse.jetty.servlet:7.4.5.v20110725]
    at org.eclipse.jetty.servlet.ServletHandler.addServletMapping(ServletHandler.java:873)[97:org.eclipse.jetty.servlet:7.4.5.v20110725]
    at org.ops4j.pax.web.service.jetty.internal.JettyServerImpl$1.call(JettyServerImpl.java:158)[111:org.ops4j.pax.web.pax-web-jetty:1.0.7]
    at org.ops4j.pax.web.service.jetty.internal.JettyServerImpl$1.call(JettyServerImpl.java:154)[111:org.ops4j.pax.web.pax-web-jetty:1.0.7]
    at org.ops4j.pax.swissbox.core.ContextClassLoaderUtils.doWithClassLoader(ContextClassLoaderUtils.java:60)[111:org.ops4j.pax.web.pax-web-jetty:1.0.7]
    at org.ops4j.pax.web.service.jetty.internal.JettyServerImpl.addServlet(JettyServerImpl.java:153)[111:org.ops4j.pax.web.pax-web-jetty:1.0.7]
    at org.ops4j.pax.web.service.jetty.internal.ServerControllerImpl$Started.addServlet(ServerControllerImpl.java:266)[111:org.ops4j.pax.web.pax-web-jetty:1.0.7]
    at org.ops4j.pax.web.service.jetty.internal.ServerControllerImpl.addServlet(ServerControllerImpl.java:107)[111:org.ops4j.pax.web.pax-web-jetty:1.0.7]
    at org.ops4j.pax.web.service.internal.HttpServiceStarted.registerServlet(HttpServiceStarted.java:248)[113:org.ops4j.pax.web.pax-web-runtime:1.0.7]
    at org.ops4j.pax.web.service.internal.HttpServiceStarted.registerServlet(HttpServiceStarted.java:219)[113:org.ops4j.pax.web.pax-web-runtime:1.0.7]
    at org.ops4j.pax.web.service.internal.HttpServiceProxy.registerServlet(HttpServiceProxy.java:100)[113:org.ops4j.pax.web.pax-web-runtime:1.0.7]
    at org.ops4j.pax.web.extender.war.internal.RegisterWebAppVisitorWC.visit(RegisterWebAppVisitorWC.java:206)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.web.extender.war.internal.model.WebApp.accept(WebApp.java:583)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.web.extender.war.internal.WebAppPublisher$HttpServiceListener.register(WebAppPublisher.java:170)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.web.extender.war.internal.WebAppPublisher$HttpServiceListener.serviceChanged(WebAppPublisher.java:155)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.web.extender.war.internal.WebAppPublisher$HttpServiceListener.serviceChanged(WebAppPublisher.java:119)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.tracker.ReplaceableService.setService(ReplaceableService.java:114)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.tracker.ReplaceableService.access$100(ReplaceableService.java:28)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.tracker.ReplaceableService$CollectionListener.serviceAdded(ReplaceableService.java:183)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.tracker.ServiceCollection$Tracker.addingService(ServiceCollection.java:181)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:896)[karaf.jar:2.2.4]
    at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:261)[karaf.jar:2.2.4]
    at org.osgi.util.tracker.AbstractTracked.trackInitial(AbstractTracked.java:184)[karaf.jar:2.2.4]
    at org.osgi.util.tracker.ServiceTracker.open(ServiceTracker.java:339)[karaf.jar:2.2.4]
    at org.osgi.util.tracker.ServiceTracker.open(ServiceTracker.java:273)[karaf.jar:2.2.4]
    at org.ops4j.pax.swissbox.tracker.ServiceCollection.onStart(ServiceCollection.java:139)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.lifecycle.AbstractLifecycle$Stopped.start(AbstractLifecycle.java:121)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.lifecycle.AbstractLifecycle.start(AbstractLifecycle.java:49)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.tracker.ReplaceableService.onStart(ReplaceableService.java:146)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.lifecycle.AbstractLifecycle$Stopped.start(AbstractLifecycle.java:121)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.lifecycle.AbstractLifecycle.start(AbstractLifecycle.java:49)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.web.extender.war.internal.WebAppPublisher.publish(WebAppPublisher.java:81)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.web.extender.war.internal.WebXmlObserver.doPublish(WebXmlObserver.java:304)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.web.extender.war.internal.WebXmlObserver.addingEntries(WebXmlObserver.java:153)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.extender.BundleWatcher.register(BundleWatcher.java:186)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.extender.BundleWatcher.access$000(BundleWatcher.java:45)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.extender.BundleWatcher$1.bundleChanged(BundleWatcher.java:127)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.apache.felix.framework.util.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:807)[org.apache.felix.framework-3.0.9.jar:]
    at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:729)[org.apache.felix.framework-3.0.9.jar:]
    at org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:610)[org.apache.felix.framework-3.0.9.jar:]
    at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:3761)[org.apache.felix.framework-3.0.9.jar:]
    at org.apache.felix.framework.Felix.startBundle(Felix.java:1787)[org.apache.felix.framework-3.0.9.jar:]
    at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:918)[org.apache.felix.framework-3.0.9.jar:]
    at org.apache.felix.fileinstall.internal.DirectoryWatcher.process(DirectoryWatcher.java:1175)[7:org.apache.felix.fileinstall:3.1.10]
    at org.apache.felix.fileinstall.internal.DirectoryWatcher.process(DirectoryWatcher.java:1153)[7:org.apache.felix.fileinstall:3.1.10]
    at org.apache.felix.fileinstall.internal.DirectoryWatcher.processAllBundles(DirectoryWatcher.java:1146)[7:org.apache.felix.fileinstall:3.1.10]
    at org.apache.felix.fileinstall.internal.DirectoryWatcher.process(DirectoryWatcher.java:456)[7:org.apache.felix.fileinstall:3.1.10]
    at org.apache.felix.fileinstall.internal.DirectoryWatcher.run(DirectoryWatcher.java:263)[7:org.apache.felix.fileinstall:3.1.10] 
```

关于如何解决这个问题的任何想法？我已经添加了：

```
<listener>
  <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
</listener> 
```

，`web.xml`但它并没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:41:34.040

用作 HttpService 的底层 Pax-Web 确实很难让类加载器与所有这些 JSF 东西一起理顺......所以实际上在 Pax-Web 上存在很多关于 JSF 的问题，简单的 JSF 应用程序确实可以工作，但是在某些情况下，JSF 不起作用。Pax-Web 团队正在努力解决这些问题。查看提供的 Pax-Web[示例](https://github.com/ops4j/org.ops4j.pax.web/tree/master/samples/war-jsf)可能会提示您如何解决问题。

# c++ - 在 SDL 窗口中隐藏标题栏和框架

> ID：12107374
> 
> 赞同：2
> 
> 时间：2012-08-24T10:11:57.813
> 
> 标签：c++, graphics, sdl

我正在修改[这里](http://eris.liralab.it/iCub/main/dox/html/iCub__Sim_8cpp_source.html)的源。为了禁用 SDL 窗口上的标题栏和框架，我在源代码中的 SDL_setvideomode 函数中嵌入了 SDL_NOFRAME 标志

```
SDL_SetVideoMode(h,w,32,SDL_OPENGL | SDL_RESIZABLE | SDL_NOFRAME); 
```

再次编译，但我仍然可以看到标题栏和框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:50:19.033

我相信 SDL_RESIZABLE 需要存在框架才能使窗口可调整大小，因此您提供了相互冲突的参数，请尝试使用不可调整大小的窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-06T17:57:56.217

来自维基

SDL_NOFRAME

**如果可能**，SDL_NOFRAME 会导致 SDL 创建一个没有标题栏或框架装饰的窗口。

# jquery - jQuery 发出 SOAP 请求

> ID：12107376
> 
> 赞同：0
> 
> 时间：2012-08-24T10:12:09.540
> 
> 标签：jquery, web-services, soap

我正在尝试使用 Javascript 发出 SOAP 请求，但它似乎不起作用。请在下面找到已使用的代码。

```
URL="http://footballpool.dataaccess.eu/data/info.wso";
xmlStr="<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><AllDefenders xmlns="http://footballpool.dataaccess.eu">   <sCountryName>string</sCountryName></AllDefenders></soap:Body></soap:Envelope>";

jQuery.ajax({
         type: "POST",
         url: URL,
         dataType: "xml",
         processData: false,
         data: xmlStr,
         beforeSend: function(req) {
            req.setRequestHeader("Method", "POST");
            req.setRequestHeader("Content-Type", "text/xml" + "; charset=\"" + "UTF-8" + "\"");
         }
    }); 
```

回复：

```
Object
OPTIONS http://footballpool.dataaccess.eu/data/info.wso 400 (Bad Request)
jquery.js:4 XMLHttpRequest cannot load http://footballpool.dataaccess.eu/data/info.wso. Origin http://www.know7.com is not allowed by Access-Control-Allow-Origin. 
```

我正在尝试从[http://footballpool.dataaccess.eu/data/info.wso?op=AllDefenders获得响应](http://footballpool.dataaccess.eu/data/info.wso?op=AllDefenders)

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:24:08.990

你不能像那样从其他域调用一个 url，否则我们都会陷入非常糟糕的手中！你总是需要一个代理来处理你正在做的事情，无论是**PHP**、**.NET**等，你都会调用那个端点并接收调用并绕过你的 javascript 调用。

您收到跨域错误：

> Access-Control-Allow-Origin 不允许来源[http://www.know7.com 。](http://www.know7.com)

它会告诉你一切...

如果您拥有此域，则可以通过创建[`cross-domain.xml`](http://www.adobe.com/devnet/articles/crossdomain_policy_file_spec.html)文件来打开它，并添加一个允许跨域调用的 Html 标头。

* * *

他们为您提供了一种获取 JSON 的方法，但他们没有将其发送到一个函数中，因此您总是会收到错误消息：

[http://jsbin.com/ivobun/1/edit](http://jsbin.com/ivobun/1/edit)

因此，除了代理之外，您无能为力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:24:53.590

除了`Endy`'s answer，您可能还想查看 Mozilla DevNet 上关于跨域资源访问的这篇文章，以及相关检查服务器响应的 HTTP 标头。具体来说，标头的内容`Access-Control-Allow-Origin`将告诉您服务器管理员允许访问指定资源的域。

[https://developer.mozilla.org/en-US/docs/HTTP_access_control](https://developer.mozilla.org/en-US/docs/HTTP_access_control)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T10:17:44.500

好像您正在尝试跨域执行请求。这是不允许的，只有 JSONP 是允许的。

# vb.net - 数据网格单元格验证和自动排序 - VB.NET

> ID：12107379
> 
> 赞同：0
> 
> 时间：2012-08-24T10:12:11.510
> 
> 标签：vb.net, sorting, datagrid, cell

我有个问题...

我需要一个验证单元格（ID）的VB代码-（我使用了事件CellValidating），

此值在 datagrid 中必须是唯一的...如果此单元格的值是唯一的，则按 ID 列对 datagrid 中的行进行排序。

例如，数据网格是：

```
ID          Name                
1           First
3           third 
```

如果我输入 ID 值 3，然后弹出 Messagebox.Show ("Error")...

但是，如果我在列 ID 中输入值 2，那么数据网格必须自动排序

这对排序有好处-> DataGridViewColumnSortMode.Automatic 吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:42:36.907

应该能够使用一个简单的 If Then 语句来完成这项工作。这个大纲应该让你朝着正确的方向前进。

```
If datagrid.ID = "your input" Then
msgbox("This ID already exhists")
ElseIf
'code to add to datagrid
'code to re-sort grid
EndIF 
```

# filemaker - 如何在 filemaker pro 12 中明智地过滤数据类别？

> ID：12107380
> 
> 赞同：0
> 
> 时间：2012-08-24T10:12:14.607
> 
> 标签：filemaker

我正在使用 filemaker pro 12。我制作了 3 个表类别、产品和产品目录。具有两个字段的类别表 - (1)cat_id (2) 类别

具有字段的产品表 - 1- pr_id 2- 类别（下拉列表）3- pr_name 4- 价格

具有字段的产品目录 - 1- 类别（下拉列表） 2- 产品（下拉列表） 3- 价格

我使用值列表填充下拉字段。我想在产品目录上，当有人选择任何类别时，下一个下拉列表仅显示该类别产品。我还将表从 cat_id 关联到产品的 product_category 类别。产品代码到产品表的产品。有没有身体解决方案..??? 提前致谢...............

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:22:36.690

在您的值列表定义中，尝试“仅显示相关记录”选项。

# html - yahoo/gmail 中的 HTML 电子邮件显示问题

> ID：12107383
> 
> 赞同：0
> 
> 时间：2012-08-24T10:12:32.453
> 
> 标签：html, html-email, monitor

我今天需要发送给我的客户的电子邮件邮件程序有真正的问题。它在 Yahoo 中无法正确显示。身体似乎消失在左右边缘。

请找到测试结果的附加链接。

[http://hybridcom.createsend.com/screens/r/A7AD7F4FFF5E836B](http://hybridcom.createsend.com/screens/r/A7AD7F4FFF5E836B)

并链接到实时电子邮件 -

[http://www.garyrevell.co.uk/Eblasts/Mercy%20Schools/index.html](http://www.garyrevell.co.uk/Eblasts/Mercy%20Schools/index.html)

jsFiddle - [http://jsfiddle.net/9Dvg5/embedded/result/](http://jsfiddle.net/9Dvg5/embedded/result/)

任何帮助将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:39:50.347

使用 jsFiddle 链接作为演示发送。

就像用可编辑的代码演示实际的网站一样。

[**这是你的演示**](http://jsfiddle.net/9Dvg5/embedded/result/)

# ssl - 在 JMX 上实现 SSL

> ID：12107385
> 
> 赞同：0
> 
> 时间：2012-08-24T10:12:39.517
> 
> 标签：ssl, jmx

我是 jmx 和 ssl 的新手。现在我正在尝试用 ssl 实现 jmx。

[我已经创建了链接http://www.techbrainwave.com/?p=953](http://www.techbrainwave.com/?p=953)中指定的密钥库和信任库。

并在 Eclipse 中实现了一个简单的 java 应用程序，如 [https://blogs.oracle.com/jmxetc/entry/jmx_connecting_through_firewalls_using](https://blogs.oracle.com/jmxetc/entry/jmx_connecting_through_firewalls_using)。我像这样配置了 kestore 和 truststore 文件，

```
System.setProperty("javax.net.ssl.keyStore", "C:\\Users\\Administrator\\Desktop\\Certificates\\keystore.jks");

System.setProperty("javax.net.ssl.keyStorePassword", "123456"); 
```

现在我必须用 jboss 运行应用程序。所以我编辑了属性-services.xml。用这样的标签设置相同的属性，

```
<attribute name="Properties">
         javax.net.ssl.trustStore = C:\\Users\\Administrator\\Desktop\\certificates\\truststore.jks 
     </attribute> 
```

它现在正在工作。我怀疑这是用 jboss 实现 jmx 和 SSL 的正确方法吗？还是我有任何其他方式来实现它？如果我错了，请告诉我。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:50:38.910

这是正确的方法，您可以[查看此](http://publib.boulder.ibm.com/infocenter/wxsinfo/v7r0/index.jsp?topic=/com.ibm.websphere.extremescale.admin.doc/cxsjmxsec.html)链接以获取更多详细信息，如果您需要在 jboss 中运行您的应用程序，您可以在 wrapper conf 中指定属性

# testing - 使用 boost.test 的复杂检查方法

> ID：12107393
> 
> 赞同：1
> 
> 时间：2012-08-24T10:12:56.400
> 
> 标签：testing, boost

我想测试一个字符串类的不同构造函数。因此我给自己写了一个测试方法来检查几个标准的东西：

```
void checkStringStandards(String& s, size_t length, const char* text){
    BOOST_CHECK_EQUAL(s.length(), length);
    ...
} 
```

然后我添加了一个测试方法

```
BOOST_AUTO_TEST_CASE(String_construct){
    String s1;
    checkStringStandards(s1, 0, "");

    String s2("normal char");
    checkStringStandards(s2, 11, "normal char");
} 
```

问题是，当它失败时，我只能从 checkStringStandards 中获取行和文件信息！我无法通过输出知道是第一次调用还是第二次调用导致了这种情况。

对此有什么常见的解决方法？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-08T20:10:47.357

这个问题的解决方案是编写一个自定义谓词来执行检查并`BOOST_REQUIRE(custom_predicate(args))`在不同的测试用例中使用。自定义谓词可以采用您想要的任何参数并返回[`boost::test_tools::predicate_result`](http://user.xmission.com/~legalize/boost.test/libs/test/doc/html/test/reference/test_classes/predicate_result.html)，这是一种与 Boost.Test 中的断言宏兼容的类型，您可以在失败期间在其中构建详细的诊断消息。

要使用您的示例：

```
using namespace boost::test_tools;
predicate_result checkStringStandards(String& s, size_t length, const char* text) {
    predicate_result result{true};
    if (s.length() != length) {
        result = false;
        result.message() << "\nString " << s
            << " differs in length; expected: "
            << length << ", actual: " << s.length();
    }
    ...
    return result;
}

BOOST_AUTO_TEST_CASE(String_construct){
    String s1;
    BOOST_REQUIRE(checkStringStandards(s1, 0, ""));

    String s2("normal char");
    BOOST_REQUIRE(checkStringStandards(s2, 11, "normal char"));
} 
```

`\n`消息开头的奇怪之处在于，当打印诊断时，带有“字符串...长度不同”的文本将在它自己的行上发出。如果谓词失败，它会将其失败冒泡到`BOOST_REQUIRE`这将触发测试失败并在调用行`BOOST_REQUIRE`而不是在您的自定义谓词中报告失败。

还有另一种更糟糕的替代方案，它也可以通过将您的自定义断言作为巨大的 megamacros 来实现相同的结果，但我发现这太可怕了，我什至不打算展示如何做到这一点的示例 :)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:11:05.850

没有通用的解决方法。这些 BOOST_CHECK_... 宏的存在是为了避免行号丢失的函数调用（除非明确地作为参数传递）。

您可以通过循环遍历测试用例中的参数集来解决这个问题。

# php - PHP 和正则表达式

> ID：12107394
> 
> 赞同：0
> 
> 时间：2012-08-24T10:13:10.283
> 
> 标签：php, regex

我目前有一个问题。

我正在尝试使用正则表达式格式化文本块，我将解释到目前为止我所得到的，然后我将继续解释我的问题。

我有一个文本文件，带有一些叙述性文本。

```
VOLUME I

CHAPTER I

Lorem Ipsum is simply dummy text of the printing and typesetting industry. 
Lorem Ipsum has been the industry's standard dummy text ever since the 1500s,
when an unknown printer took a galley of type and scrambled it to make a type 

It was popularised in the 1960s with the release of Letraset sheets containing 
Lorem Ipsum passages, and more recently with desktop publishing software like 
Aldus PageMaker including versions of Lorem Ipsum.

VOLUME II

CHAPTER II

Lorem Ipsum is simply dummy text of the printing and typesetting industry. 
It has survived not only five centuries, but also the leap into electronic 
typesetting, remaining essentially unchanged. 

It was popularised in the 1960s with the release of Letraset sheets 
containing Lorem Ipsum passages, and more recently with desktop 
publishing software like Aldus PageMaker including versions of Lorem Ipsum.

...
... 
```

它有多个**VOLUMES**和**CHAPTERS**，需要通过 PHP 进行格式化，使其看起来像在文本文件中一样，并具有适当的间距。

首先，我调用这个格式化函数来处理一些空白和清理。

```
<?php    
function formatting($AStr)
{
    return preg_split('/[\r\n]{2,}/', trim($AStr));        
}    
?> 
```

然后，我调用该文件并继续尝试格式化。

```
<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
<body>

<h1>Jane Austen</h1>

<h2>Emma</h2>

<?php

require_once 'format.inc.php';

$p = file_get_contents('emma.txt');

$p = formatting($p);

/*
foreach ($p as $l) {
    $l = trim($l);
    preg_replace('/(VOLUME +[IVX]+)/', "jjj", $l);
    $volumePattern = '/(VOLUME +[IVX]+)/';
    $chaperPattern = '/(CHAPTER +[IVX]+)/';
    $l = str_replace("\r\n", ' ', $l);

    if (preg_match('/(VOLUME +[IVX]+)/', $l, $m)) {
        echo '<h3>' . $m[1] . '</h3>';
    }
    if (preg_match('/(CHAPTER +[IVX]+)/', $l, $m)) {
        echo '<h3>' . $m[1] . '</h3>';
    }
    preg_replace('/(VOLUME +[IVX]+)/', "jjj", $l);
    echo $l . "\n";
}*/

foreach ($p as $l) {
    //$l = trim($l);
    //$l = str_replace("[\r\n]", '\n', $l);
    if (preg_match('/[\.\w]/', $l, $m)) {
        echo "\n";
    }
    if (preg_match('/(VOLUME +[IVX]+)/', $l, $m)) {
        echo '<h3>' . $m[1] . '</h3>';
    }
    $l = preg_replace('/(VOLUME +[IVX]+)/', '', $l);
    if (preg_match('/(CHAPTER +[IVX]+)/', $l, $m)) {
        echo '<h3>' . $m[1] . '</h3>';
    }
    $l = preg_replace('/(CHAPTER +[IVX]+)/', '', $l);
    echo $l . "\n";
}

?>

</body>
</html> 
```

问题是，我无法打印每个段落之间的空格（换行符）。我试过了，但我做不到。我尝试使用这条线：

```
if (preg_match('/[\.\w]/', $l, $m)) {
            echo "\n";
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T10:22:42.970

这可能被过度简化了，但你不能这样做吗？

```
<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
<body>

<h1>AUTHOR NAME</h1>

<h2>TITLE</h2>

<?php

  $p = file_get_contents('emma.txt');
  echo preg_replace('/^\s*((?:VOLUME|CHAPTER)\s+[IVX]+)\s*$/im', '<h3>$1</h3>', $p); 

?>

</body>
</html> 
```

**编辑**

要将正文段落也包含在`<p></p>`（假设段落中没有新行）中，请尝试以下操作：

```
<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
<body>

<h1>AUTHOR NAME</h1>

<h2>TITLE</h2>

<?php

  $p = file_get_contents('emma.txt');
  echo preg_replace_callback('/^\s*(?:(?P<header>(?:VOLUME|CHAPTER)\s+[IVX]+)|(?P<body>.+))\s*$/im', function($matches) {
    if (!empty($matches['body'])) {
      return '<p>'.htmlspecialchars($matches['body']).'</p>';
    } else {
      return '<h3>'.htmlspecialchars($matches['header']).'</h3>';
    }
  }, $p);

?>

</body>
</html> 
```

[看到它工作](http://codepad.viper-7.com/DjQArS)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:27:30.113

你有不同的错误，首先在“格式化”函数中，正则表达式必须是：

```
function formatting($AStr)
{
    return preg_split('/[\r\n]{2,}/', trim($AStr));        
} 
```

在您必须知道 preg_replace 没有通过引用传递的变量之后，因此您必须通过函数的返回替换您的行：

```
foreach ($p as $l) {
    $l = trim($l);
    preg_replace('#VOLUME\s+[A-z]+#Ui', "jjj", $l);
    $l = str_replace("\r\n", ' ', $l);
    if (preg_match('/(VOLUME +[IVX]+)/', $l, $m)) {
        echo '<h3>' . $m[1] . '</h3>';
    }
    $l = preg_replace('/(VOLUME +[IVX]+)/', '', $l);
    if (preg_match('/(CHAPTER +[IVX]+)/', $l, $m)) {
        echo '<h3>' . $m[1] . '</h3>';
    }
    $l = preg_replace('/(CHAPTER +[IVX]+)/', '', $l);
    echo $l . "\n";
} 
```

# php - 在浏览器关闭时清除 PHP 会话

> ID：12107395
> 
> 赞同：1
> 
> 时间：2012-08-24T10:13:17.097
> 
> 标签：php

嘿伙计们，谁能帮我解决问题。我只是检查浏览器关闭事件，如果用户关闭浏览器或关闭同一站点的所有选项卡，则销毁 php 会话。

我使用了一些脚本，但它们在页面刷新时破坏了会话（F5 或 CTRL+R 或浏览器刷新按钮）。

我只需要检查浏览器关闭按钮或 ALT+F4 ..

简而言之，当用户完全关闭浏览器或关闭所有选项卡时，使用 AJAX 调用 php 函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T10:13:53.630

一旦用户关闭他/她的浏览器，会话应该被自动丢弃。除非有某种“记住我”功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:16:48.670

无法保证您的服务器可以知道用户已经关闭了他们的浏览器 - 不要试图实现这一点。

当用户关闭浏览器时，会话将自动丢失，因为浏览器不会保留用于将自身与生成的 PHP 会话相关联的 cookie。但同样，这也不一定能保证。你可能需要问一个不同的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T10:32:40.537

PHP Session 工作是这样的：

它为每个实例存储一个静态变量类型的数组，并通过将哈希值存储为称为**PHPSESSID**的 Cookie 来标识会话变量。

Cookie 的生命周期是在浏览器打开时，在浏览器关闭时 Cookie 被丢弃。

某些浏览器可以永久存储该 Cookie，但 Session 在服务器端有一个超时。

您可以在 Browser Close 上运行函数的情况是不可能的，因为 Browser Kill 的所有 Running JavaScript's on Exit。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T10:15:18.263

关闭浏览器时会话会自动销毁，您要做什么？

# java - 监控 EclipseLink JPA 进度

> ID：12107407
> 
> 赞同：3
> 
> 时间：2012-08-24T10:13:56.847
> 
> 标签：java, logging, jpa, eclipselink, monitoring

我回到了我的第一个 EclipseLink JPA 项目，并注意到一些关于性能的问题。情况如下：

该应用程序使用本地 Apache Derby DB 运行。在创建 EntityManager 期间，控制台会记录一些信息和警告，这需要几秒钟，但到目前为止还不错。但是，如果我将整个代码打包到一个可执行的 jar 中并在 Eclipse 之外运行，整个过程会花费更多时间。

现在虽然首先找到这个问题的原因是明智的，但我至少想添加一个 ProgressBar 以便粗略跟踪进度。

我查看了 EclipseLink wiki，发现它已经具有 PerformanceMonitor 和一些日志记录实用程序。我现在陷入了将 1 和 1 放在一起的看似简单的任务。

如何将我的 ProgressBar 与 EclipseLink 连接起来？或者另一种方法：我如何首先记录 EclipseLink 的正在进行的活动？

任何帮助深表感谢。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:53:13.147

以下是为具有 EclipseLink JPA 的 SE 项目（非应用程序服务器）生成日志文件的步骤：

1.  打开文件“persistence.xml”并分配以下属性：

    属性名称="eclipselink.logging.logger" 值="JavaLogger"

    属性名称="eclipselink.logging.level" 值="FINEST"

2.  鉴于 Eclipselink JavaLogger 实际上是 java.util.logging 的，请参考您的 JDK 文件夹以找到要修改如下的文件 logging.properties：

> handlers= java.util.logging.FileHandler, java.util.logging.ConsoleHandler
> 
> # 默认全局日志级别。
> 
> .level=最好的
> 
> # 默认文件输出在用户的主目录中
> 
> # java.util.logging.FileHandler.pattern = %h/java%u.log
> 
> # 但我更喜欢硬连线如下：
> 
> java.util.logging.FileHandler.pattern = C\:/SamLogFile.log
> 
> java.util.logging.FileHandler.level = 更精细
> 
> java.util.logging.FileHandler.formatter = java.util.logging.SimpleFormatter
> 
> # 我个人不关心标准输出日志，所以我把它关掉了。
> 
> java.util.logging.ConsoleHandler.level = 关闭
> 
> java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter
> 
> java.util.logging.SimpleFormatter.format=%4$s: %5$s [%1$tc]%n

现在你可以通过导入在你的类中放置一些日志：

```
import java.util.logging.Level;

import java.util.logging.Logger; 
```

并调用：

```
public void yourMethod() { 

Logger.getLogger( YourClassName.class.getName() ).log( Level.INFO, "I am logging well......!" ); } 
```

现在你已经设置好了。运行/测试您的项目并享受阅读您的日志！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T02:36:28.277

您还可以通过将 2 个文件 slf4j-api-1.7.1.jar 和文件 slf4j-jdk14-1.7.1.jar 添加到您的类路径来将您的日志记录代码纳入最佳实践。这 2 个文件将从[http://www.slf4j.org/download.html下载](http://www.slf4j.org/download.html)

将导入添加到您的课程中：

```
import org.slf4j.Logger;

import org.slf4j.LoggerFactory; 
```

然后将这一行添加到您的方法中：

```
LoggerFactory.getLogger(Mysafeperson.class.getName()).info("I am logging using the slf4j api"); 
```

这种做法是使您的代码使用 slf4j api 而不是 java.util.logging (JUL) api。因此，您的代码与 JUL 分离，并准备好将任何日志框架绑定为 slf4j 实现（选择是 logback - log4j - 或[参考此链接。](http://www.slf4j.org/manual.html#binding)）

我在这里推广的想法是基于[http://www.slf4j.org/legacy.html](http://www.slf4j.org/legacy.html)中的文档。所以：

*   文件： slf4j-api-1.7.1 是您的新 api 外观。
*   文件：slf4j-jdk14-1.7.1 与现有的日志记录实现即 java.util.logging (JUL) 和调用 slf4j api 的应用程序代码建立了一座桥梁。

### 仍然有两个提示：

1.  请注意，JUL 中可用的定义级别是：

    *   严重（最高值）
    *   警告
    *   信息
    *   配置
    *   美好的
    *   更精细
    *   最好（最低值）

    因此不要使用 slf4j api 的级别（错误 - 跟踪 - 调试），它们不会触发任何日志记录级别。INFO 和 WARN 都可以使用

2.  至于 EclipseLink，请注意您仍然依赖于使用 JUL 配置文件 logging.properties

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T05:11:55.117

您应该通过在 persistence.xml 文件中的持久单元的属性中添加它来启用 eclipselink 日志记录：

```
<property name="eclipselink.logging.level" value="DEBUG"/> 
```

启用最详细的日志记录，如果还不够，甚至可以使用“ALL”而不是“DEBUG”。但是在生产时将其删除，否则该生产线本身会使其变慢。

可能使 Eclipse 链接变慢的两个常见因素是：

不需要时将其放入persistence.xml中：

```
<property name="eclipselink.ddl-generation" value="create-tables"/> 
```

并且没有这个（如果您在 persistence.xml 文件中声明 de 类。如果您不这样做，请将其设置为 false ！！）：

```
<exclude-unlisted-classes>true</exclude-unlisted-classes> 
```

至于进度条，我会说这会非常困难，而且不精确，因为即使 eclipselink 也不知道它将在开始时处理的全部课程数量，所以我认为这不值得付出努力，但很好如果你能找到一种方法来做这件事，那就好运了。

# spring - 使用 HibernateDaoSupport 时处理异常

> ID：12107414
> 
> 赞同：1
> 
> 时间：2012-08-24T10:14:16.633
> 
> 标签：spring, hibernate, exception-handling

我在我的应用程序中使用 Spring Hibernate 集成，并且 DAO 类正在扩展`HibernateDaoSupport`。
假设我使用代码保存了一些对象， `getHibernateTemplate().save(object);` 因为 Spring Hibernate 集成不要求编写 try-catch 块，但假设在保存该对象时是否发生任何异常。那么最好的处理方法是什么？我的意思是我应该在服务层中捕获它并将其包装在一些用户定义的异常中。如果我想记录 DAO 中的哪个方法引发异常，是否需要在 DAO 层方法本身中编写 try-catch？

在对异常处理一无所知之前，我从未使用过 HibernateDaoSupport 或 Hibernate Template。请向我提供您的宝贵意见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:36:14.827

Spring使用背后的想法`RuntimeException`是通常有不同类型的异常：

*   您要从中恢复的异常（例如，如果您尝试插入的记录已经存在，则为 DuplicateKeyException；如果由于用户输入而违反了 DB 约束，则为更一般[的](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/dao/DuplicateKeyException.html)DataIntegrityViolationException [）](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/dao/DataIntegrityViolationException.html)
*   无法恢复的异常（数据库已关闭）

对于第一种情况，您可以很好地处理异常（或者通过自定义业务异常，以便视图层可以重定向到输入页面并提供有意义的消息）

对于第二种情况，让异常冒泡并由通用异常处理程序处理会更容易，然后向用户显示通用错误页面。对于这种情况，将异常包装在自定义异常中是没有意义的，因为您将无法恢复。炸毁的数据库往往是致命的。

所以我会做什么：

```
try {
   getHibernateTemplate().save(object);
} catch (DataIntegrityViolationException dive) {
   throw new BusinessValidationException(dive, "You've got the data wrong");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:45:37.310

Spring 异常层次结构有[据可查。](http://static.springsource.org/spring/docs/3.0.x/reference/dao.html)

通常如果遇到数据访问异常，你也无能为力，因为在工作系统中，这可能是由于数据库服务器磁盘空间不足，或者网络连接问题等造成的。此类异常通常需要记录和调查尽快地。

有一些可恢复的错误，它们可以用 spring 异常层次结构处理，但恕我直言，在开发阶段应该避免大多数错误，所以你的 web 服务器应该在它进入数据库之前验证尽可能多的东西。

如果要设置异常日志记录，请参阅类似问题：

*   [Spring MVC 中的异常处理程序](https://stackoverflow.com/questions/6742324/exception-handler-in-spring-mvc)
*   [Spring MVC 最佳实践处理控制器中不可恢复的异常](https://stackoverflow.com/questions/2538031/spring-mvc-best-practice-handling-unrecoverable-exceptions-in-controller)

# javascript - 如何在剑道菜单中检索 id 值

> ID：12107416
> 
> 赞同：4
> 
> 时间：2012-08-24T10:14:21.513
> 
> 标签：javascript, asp.net-mvc, kendo-ui

我在我的项目中使用剑道菜单。我想在单击所选项目时检索 id 值。我使用了 onSelect 事件，并且能够检索选定的项目文本。如何检索 id 值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T05:02:00.827

您可以使用 HTML5 数据属性来完成此操作。

**HTML**

```
<div id="example" class="k-content">
    <ul id="menu">
        <li>
            First Item
            <ul>
                <li data-id="12345">Sub Item 1 with ID</li>
                <li>Sub Item 2</li>
                <li>Sub Item 3</li>
                <li>Sub Item 4</li>
            </ul>
        </li>
        <li>
            Second Item
            <ul>
                <li>Sub Item 1</li>
                <li>Sub Item 2</li>
                <li>Sub Item 3</li>
                <li>Sub Item 4</li>
            </ul>
        </li>
        <li>
            Third Item
            <ul>
                <li>Sub Item 1</li>
                <li>Sub Item 2</li>
                <li>Sub Item 3</li>
                <li>Sub Item 4</li>
            </ul>
        </li>
        <li>
            Fourth Item
            <ul>
                <li>Sub Item 1</li>
                <li>Sub Item 2</li>
                <li>Sub Item 3</li>
                <li>Sub Item 4</li>
            </ul>
        </li>
        <li>
            Fifth Item
            <ul>
                <li>Sub Item 1</li>
                <li>Sub Item 2</li>
                <li>Sub Item 3</li>
                <li>Sub Item 4</li>
            </ul>
        </li>
    </ul>
</div> 
```

**和 Javascript：**

```
 <script>
            $(document).ready(function() {

                function onSelect(e) {
                    var id = $(e.item).attr('data-id');
                }

                $("#menu").kendoMenu({
                    select: onSelect               
                });
            });
        </script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T13:31:21.720

您可以在初始化它的 UL/LI 结构中设置一个 ID（检查 Robotsushi 的答案）。但是，如果你想动态初始化菜单，你可以使用这样的东西 - [http://jsfiddle.net/MMRCf/8/](http://jsfiddle.net/MMRCf/8/)

# c# - 接口 C# 中的可选空格

> ID：12107417
> 
> 赞同：1
> 
> 时间：2012-08-24T10:14:27.800
> 
> 标签：c#, plugins, interface

你好，我做了一个插件界面，看起来像这样

```
 public  interface IPluginInterface :IEquatable<IPluginInterface>
{
    string Maker { get; }
    string Version { get; }  
    void Do();
    void Do_two();
} 
```

我已经尝试过，但还没有找到任何方法来使字符串 Maker 和 Version 可选，我想我必须设置一个布尔 Equals，但不知道如何。谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T10:16:00.933

如果您在接口中声明它们，则*必须*实现它们。

您不能在接口上声明可选成员。

有几个选项供您选择：

*   将界面分成两部分。只实现你需要的。
*   实现一个抽象类，其中“可选”成员为空且非抽象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:16:48.033

您不能将任何接口方法标记为可选 - 要么实现整个接口，要么根本不实现它！

您可以考虑将此接口拆分为两个不同的接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T10:17:28.617

将界面拆分成几个：

```
public interface IPluginInterface : IEquatable<IPluginInterface>
{
    string Maker { get; }
    string Version { get; }  
}

public interface IPluginWithOptionA : IPluginInterface
{
    void Do();
}

public interface IPluginWithOptionB : IPluginInterface
{
    void Do_two();
} 
```

您可以实现一个或多个接口

```
public class MyPlugin : IPluginWithOptionA, IPluginWithOptionB
{
    public bool Equals(IPluginInterface other)
    {
        throw new NotImplementedException();
    }

    public string Maker
    {
        get { throw new NotImplementedException(); }
    }

    public string Version
    {
        get { throw new NotImplementedException(); }
    }

    public void Do_two()
    {
        throw new NotImplementedException();
    }

    public void Do()
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T10:17:15.397

如果您希望此方法可选，则接口是错误的方法。但是您可以将它们放入抽象基类中。

# gcc - ld 找不到 -l

> ID：12107422
> 
> 赞同：18
> 
> 时间：2012-08-24T10:14:37.237
> 
> 标签：gcc, ubuntu, linker, shared-libraries, ld

我在 ubuntu 12.04 上安装 pyipopt 时遇到问题。在链接期间，我收到错误：

```
/usr/bin/ld: 找不到 -lcoinhsl

```

即使我知道这个库已经安装并且 .so 和 .la 文件在`/home/mostafa/MyBuilds/CoinIpopt/build/lib/`

有人对此有解决方案吗？

下面是运行 setup.py build 的完整返回：

```
root@ubuntu:~/MyBuilds/pyipopt# sudo python setup.py build
运行构建
运行 build_ext
构建“pyipopt”扩展
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/lib/python2.7/dist-packages/numpy/core/include -I/home/ mostafa/MyBuilds/CoinIpopt/build/include/coin/ -I/usr/include/python2.7 -c src/callback.c -o build/temp.linux-x86_64-2.7/src/callback.o
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/lib/python2.7/dist-packages/numpy/core/include -I/home/ mostafa/MyBuilds/CoinIpopt/build/include/coin/ -I/usr/include/python2.7 -c src/pyipopt.c -o build/temp.linux-x86_64-2.7/src/pyipopt.o
src/pyipopt.c：在函数“set_intermediate_callback”中：
src/pyipopt.c:452:15：警告：变量“myowndata”设置但未使用[-Wunused-but-set-variable]
gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relrobuild/temp.linux-x86_64-2.7/src/callback.o build/temp.linux -x86_64-2.7/src/pyipopt.o -L/home/mostafa/MyBuilds/CoinIpopt/build/lib/ -lipopt -lblas -lcoinhsl -lcoinmetis -llapack -ldl -lm -o build/lib.linux-x86_64-2.7 /pyipopt.so -Wl,--rpath -Wl,/home/mostafa/MyBuilds/CoinIpopt/build/lib/
/usr/bin/ld: 找不到 -lcoinhsl
collect2: ld 返回 1 个退出状态
错误：命令“gcc”失败，退出状态为 1

```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T01:31:26.750

> **[-Ldir](http://gcc.gnu.org/onlinedocs/gcc/Directory-Options.html#Directory-Options)**
> 将目录 dir 添加到要搜索的目录列表中 -l。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T12:34:03.103

您可以在您的标准库目录之一中安装您的 coinhsl 库并在安装 ppyipopt 之前运行“ldconfig”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-31T13:41:52.767

我在另一个库中遇到了类似的问题，它没有找到它的原因是我没有为该库运行 make install （在运行 ./configure 和 make 之后）。make install 可能需要 root 权限（在这种情况下使用：sudo make install）。运行 make install 后，您应该将 so 文件放在正确的文件夹中，即在 /usr/local/lib 中，而不是在您提到的文件夹中。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-08-24T14:05:20.917

您可以将 coinhsl lib 的路径添加到`LD_LIBRARY_PATH`变量中。可能会有所帮助。

```
export LD_LIBRARY_PATH=/xx/yy/zz:$LD_LIBRARY_PATH 
```

其中`/xx/yy/zz`代表`coinhsl`lib 的路径。

# c++ - libxml2 获取验证错误

> ID：12107423
> 
> 赞同：2
> 
> 时间：2012-08-24T10:14:37.240
> 
> 标签：c++, libxml2

我正在使用 libxml2 针对 xsd 模式验证 xml 文件。使用 xmlSchemaSetParserErrors 函数，错误输出到标准错误。我需要获取这些验证错误，将它们存储在内存中并显示给用户。如何重定向这些错误？你能给我一些例子吗？谢谢，安德里亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:43:45.483

或者更简洁：

```
void err(void *ctx, const char *msg, ...)
{
    va_list args;
    va_start(args, msg);
    char *val = va_arg(args,char*);
    va_end(args);
} 
```

val 现在包含验证错误

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T11:41:29.580

此示例使用解析器模块的验证回调机制。预期的回调签名`xmlSchemaSetParserErrors`似乎是相同的。

```
#include <iostream>
#include <cstdarg>
#include <cstdio>
#include <vector>
#include <string>
#include <iterator>
#include <libxml/parser.h>
#include <libxml/tree.h>

struct ParserContext
{
    ParserContext() : context(xmlNewParserCtxt()) {}
    ~ParserContext() { xmlFreeParserCtxt(context); }
    xmlParserCtxtPtr context;
private:
    ParserContext(ParserContext&);
    void operator=(ParserContext&);
};

struct ErrorHandler
{
    std::vector<std::string> errors;

    void RegisterErrorHandling(xmlValidCtxt& validationContext)
    {
        // Change this to register for schema errors...
        validationContext.userData = this;
        validationContext.error = &ErrorHandler::Handle;
    }

private:
    static void Handle(void *handler, const char *format, ...)
    {
        va_list arguments;
        va_start(arguments, format);
        std::string message = MakeMessage(format, arguments);
        va_end(arguments);

        ErrorHandler* errorHandler = static_cast<ErrorHandler*>(handler);
        errorHandler->errors.push_back(message);
    }

    static std::string MakeMessage(const char* format, va_list arguments)
    {
        const size_t bufferSize = 200;
        std::vector<char> buffer(bufferSize, 0);

        size_t charactersWritten = 
            vsnprintf(&buffer.front(), bufferSize, format, arguments);
        if (charactersWritten == -1)
            buffer.back() = 0;  // Message truncated!
        return std::string(&buffer.front());
    }
};

struct XmlDocument
{
    static XmlDocument FromFile(const char* fileName)
    {
        ParserContext parser;
        ErrorHandler errorHandler;
        errorHandler.RegisterErrorHandling(parser.context->vctxt);
        XmlDocument document(xmlCtxtReadFile(
            parser.context, fileName, NULL, XML_PARSE_DTDVALID));
        document.errors = move(errorHandler.errors);
        return document;
    }

    XmlDocument(XmlDocument&& other) : 
        xmlPointer(other.xmlPointer),
        errors(move(other.errors))
    {
        other.xmlPointer = nullptr;
    }

    ~XmlDocument() 
    { 
        xmlFreeDoc(xmlPointer); 
    }

    xmlDocPtr xmlPointer;
    std::vector<std::string> errors;

private:
    XmlDocument(xmlDocPtr pointer) : xmlPointer(pointer) {}
    XmlDocument(XmlDocument&);
    void operator=(XmlDocument&);
};

void DisplayErrorsToUser(
    const XmlDocument& document, 
    std::ostream& displayStream = std::cout)
{
    using namespace std;
    copy(begin(document.errors), end(document.errors),
        ostream_iterator<string>(displayStream, "\n"));
}

int main()
{
    auto xml = XmlDocument::FromFile("test.xml");
    DisplayErrorsToUser(xml);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T13:37:34.740

正如 API 文档中所说，[xmlSchemaSetParserErrors()](http://xmlsoft.org/html/libxml-xmlschemas.html#xmlSchemaSetParserErrors) `Set the callback functions used to handle errors for a validation context.`

您需要针对定义的签名编写两个回调函数：

*   [xmlSchemaValidityErrorFunc](http://xmlsoft.org/html/libxml-xmlschemas.html#xmlSchemaValidityErrorFunc)错误
*   [xmlSchemaValidityWarningFunc](http://xmlsoft.org/html/libxml-xmlschemas.html#xmlSchemaValidityWarningFunc)警告

一个例子可能是：

```
void err(void *ctx, const char *msg, ...)
{
  char buf[1024];
  va_list args;

  va_start(args, msg);
  int len = vsnprintf_s(buf, sizeof(buf), sizeof(buf)/sizeof(buf[0]), msg, args);
  va_end(args);

  if(len==0) // Can't create schema validity error!
  else       // Do something to store `buf`, 
             // you may need to use void *ctx to achieve this

  return;
} 
```

然后打电话

`xmlSchemaSetValidErrors(valid_ctxt_ptr, (xmlSchemaValidityErrorFunc) err, (xmlSchemaValidityWarningFunc) warn, ctx);`

打电话之前

```
xmlSchemaValidateDoc() 
```

# javascript - 浏览器选项卡之间的通信

> ID：12107424
> 
> 赞同：7
> 
> 时间：2012-08-24T10:14:37.743
> 
> 标签：javascript, html, tabs, communication, postmessage

我有一个 HTML 页面（文件*main.html ）使用带有**window.open("newtab.html")*方法的 JavaScript 在同一域中打开一个新选项卡。

在新选项卡中，用户通过单击按钮来结束他们的活动。此时，我想向打开器窗口发送一条消息。我尝试使用 postMessage，但从新选项卡中我无法引用开瓶器。

从新标签中，我想要类似的东西，但我已经“ko”了

```
var w = window.opener;
if (w) {
    w.postMessage("hi", "http://10.150.10.43");
} else {
    alert("ko");
} 
```

将消息从辅助选项卡/窗口发送到主要选项卡/窗口（在同一域中）的最佳方式是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-16T19:24:40.713

这很奇怪。打开一个新窗口`window.open("newtab.html")`应该让新打开的窗口能够通过`window.opener`.

无论如何，在同一域上的两个窗口之间进行通信还有其他几个选项。我认为以下两个是最容易实现的：

1.  使用**localStorage**。如果您在新标签窗口中将某个键下的某些数据存储到 localStorage 中，则打开器窗口将获得一个存储事件。如果您使用处理程序捕获事件，则可以从新选项卡窗口中写入的 localStorage 中读取数据。请注意，仅当两个页面都在同一个域中并且实际上有两个窗口存在问题时才会触发事件（事件不会在写入数据的同一个窗口中触发）。有关如何执行此操作的更多信息 - 参见例如：[http ://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

2.  使用**共享的 Web 工作者**。Web Worker 是一个 JS 脚本，在单独的线程上在后台执行。共享网络工作者是一种特殊类型的网络工作者，它允许任意数量的父文档与单个工作者进行通信。因此，您可以使用工作程序在打开器窗口和新选项卡窗口之间中继消息。与工作人员通信的 API 与 postMessage API 非常相似。有关如何执行此操作的更多信息 - 参见例如：[http](http://www.sitepoint.com/javascript-shared-web-workers-html5/) ://www.sitepoint.com/javascript-shared-web-workers-html5/ 。

# ruby-on-rails - Rails、用户帐户和案例

> ID：12107425
> 
> 赞同：0
> 
> 时间：2012-08-24T10:14:42.673
> 
> 标签：ruby-on-rails, case

我在 Rails 3.0.5 中的用户模型有一个奇怪的问题。

当用户注册时，案例由模型查看：“Nicolas”与“nicolas”不同。当用户登录时，模型不查看案例：“Nicolas”和“nicolas”是相同的。

在我的模型中：

```
validates_uniqueness_of :username

def self.authenticate(username, password)
    user = find_by_username(username)
    return user if user && user.status == 1 && user.password_hash == BCrypt::Engine.hash_secret(password, user.password_salt) 
    return nil
end 
```

所以“find_by_usename”将返回为“Nicolas”或“nicolas”找到的第一个用户......

任何的想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:18:37.863

默认情况下，在 MySQL 中，where 不区分大小写。

因此，如果您想进行区分大小写的搜索，请尝试以下操作：

```
Model.where('my_string LIKE BINARY ?', "This is a Test String") 
```

在您的情况下，这将是：

```
user = User.where('username LIKE BINARY ?', username).first 
```

# java - 在运行时改变方法的行为？

> ID：12107427
> 
> 赞同：0
> 
> 时间：2012-08-24T10:14:47.187
> 
> 标签：java, reflection

我有以下代码。

**一级**

```
package com.test;

public class CustomizeHere
{    
private CustomizeMe customizeMe = new CustomizeMe();    
public void setDescription()
{
    customizeMe.setText("How about calling some method before me?");
}    
} 
```

**二等**

```
package com.test;

public final class CustomizeMe
{
private String text = null;    
public String getText()
{
    return text;
}

public void setText(String text)
{
    this.text = text;
}    
} 
```

**三等**

```
package com.test;

public class ReflectCustomizer
{    
/**
 * @param args
 */
public static void main(String[] args)
{
    CustomizeHere customizeHere = new CustomizeHere();
    // Requirement here is when customizeMe.setText() before method invocation we want to add some additional behaviour at run time like we should come to
    // know setText() is invoked.
    customizeHere.setDescription();        
}    
} 
```

我想知道在上述情况下我是否可以知道正在调用该`setText()`方法？`CustomizeMe`而且我不能从customizeMe更改代码，但是我在运行时使用反射有customizeMe的实例。

我无法更改`CustomizeMe`和`CustomizeHere`类中的代码。另外，由于`java.lang.Reflect.Method`类不允许附加任何侦听器，因此我会知道它正在被调用，所以还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:21:49.297

如果您的要求是在调用其他一些方法之前在对象上设置一些参数，您可以让构造函数接受这些参数，或者如果您要创建的各种配置选项之间存在相互依赖关系，则遵循 Builder 模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:18:26.147

一种高级方法是定义一个面向 setText 方法的 Aspect，其中包含您要编写的附加逻辑。这将针对该方面所针对的类的任何实例上的该方法的所有调用运行。

不过，方面旨在解决跨领域问题。

# php - Wordpress 单页主题 - 如何从菜单中获取页面的 id

> ID：12107433
> 
> 赞同：0
> 
> 时间：2012-08-24T10:15:03.100
> 
> 标签：php, wordpress

我有一个问题，我有一个单页 wordpress 主题，我想在其中实现 WP 菜单。我创建了一个自定义walker，这样我就可以创建#post-slug 或#page-slug 之类的链接，而不是将用户重定向到另一个页面，但是当我需要从主页上的菜单中显示帖子时，问题就出现了。

显然我不能在一个查询中同时显示页面和帖子，所以唯一的解决方案是创建两个查询，但是，我怎样才能获得在外观>菜单中添加的帖子或页面的 ID？我只需要页面或帖子，而不需要自定义链接或类别/等。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:17:03.620

试试这个

```
<?php the_ID(); 
```

参考：[http ://codex.wordpress.org/Template_Tags/the_ID](http://codex.wordpress.org/Template_Tags/the_ID)

此函数显示帖子的 ID，返回 ID 使用[`get_the_ID()`](http://codex.wordpress.org/Function_Reference/get_the_ID)。

**编辑** 我很确定你需要这个`wp_get_nav_menu_items( $menu, $args );`功能。

参考：[http ://codex.wordpress.org/Function_Reference/wp_get_nav_menu_items](http://codex.wordpress.org/Function_Reference/wp_get_nav_menu_items)

# mysql - MySQL 连接被特定 IP 地址拒绝

> ID：12107436
> 
> 赞同：0
> 
> 时间：2012-08-24T10:15:19.173
> 
> 标签：mysql

我有一个远程服务器，比如 1.2.3.4，我在其中运行代码来连接到另一个（第三个）远程服务器上的 MySQL。现在，这段代码在我的本地机器上运行得很好（它连接到远程服务器上的 Mysql），并且这段代码也可以从另外两个不同的 IP 地址运行得很好。

但只有从 1.2.3.4 服务器尝试连接到 MySQL 时才会出现此错误：

> OperationalError: (2003, "Can't connect to MySQL server on '45.105.149.250' (110)")

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:18:52.857

尝试`telnet`到服务器端口 3306 看看是否通过。

这将告诉您是 MySQL 有问题还是其他问题。

# c# - 如何在c#中为字符串添加单引号？

> ID：12107437
> 
> 赞同：3
> 
> 时间：2012-08-24T10:15:20.780
> 
> 标签：c#, javascript, asp.net

我正在向单个字符串添加多个值，所有值都应该采用这种格式`'',''`，但我却得到`"'',''"`了。

如何删除这些双引号？这是我正在使用的代码：

```
string one = "\'"+ names[0, 0] +"\'"+","+"\'" + names[1, 0]+"\'";
string[] splitted = one.Split('\'');
string ones = "'" + splitted[1] + "'" +","+ "'" + splitted[3] + "'"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T10:17:38.377

您不必转义单引号，`"\'"`而是可以简单地使用`"'"`，因此您的代码应该是：

```
string one = "'" + names[0, 0] + "'" + "," + "'" + names[1, 0] + "'";
string[] splitted = one.Split('\'');
string ones = "'" + splitted[1] + "'" + "," + "'" + splitted[3] + "'"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T10:45:43.760

在字符串中封装转义序列和特殊字符的最佳方法是使用 webatim 字符。

例如

```
String escSeq = "C:\\MyDocuments\\Movie"; 
```

也可以存储为：

```
string escSeq = @"C:\MyDocumens\Movie"; 
```

@ 字符必须放在字符串开始之前和 "" 字符之外。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-24T10:17:37.573

不确定我是否完全理解，但有两种方法。

输出： `".","."`

```
var s1 = @"""."","".""";
var s2 = "\".\",\".\""; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T10:29:04.870

我刚刚使用您的代码..它工作得很好..

调试器将显示：`"'val1','val2'"`

实际价值 ：`'val1','val2'`

从调试器点你会看到`"'val1','val2'"`，但实际上它发生在每个`string`值上。但实际上，当您在页面中打印值时，您会看到实际值`'val1','val2'`

编辑：

要将这些值发送到 javascript，您只需将这些值设置在`Hidden fields`其中，然后使用`document.getElementById('hidden_field')`.

# android - onListViewItemClick View 参数引用多个列表项

> ID：12107440
> 
> 赞同：0
> 
> 时间：2012-08-24T10:15:30.623
> 
> 标签：android, listview

在 onListItemClick 我想改变点击的项目背景，这是我的代码：

```
public void onListItemClick(ListView parent, View v, int position, long id){

    if (position != previous_position){
        v.setBackgroundResource(R.drawable.category_clicked_item_bg);
        if (previous_category != null)
            previous_category.setBackgroundResource(R.drawable.category_item_bg);
        previous_category = v;
        previous_position = position;
    }
} 
```

previous_category 和 previous_position 是受保护的变量。

问题是，在项目单击列表中的多个项目被突出显示（更具体地说是 1 或 2）。在列表中有 20 行，如果我点击中间的一行，只有一个会突出显示，如果我点击开头或结尾的任何一行，另一侧的另一行会以间隔 13 行突出显示（这可能是为什么按中间行不要'不要突出第二个）。

我需要列表仅突出显示单击的一行，有什么问题？

**附加代码**

如果这有帮助，这里还有 ListView 适配器类：

```
package domehotel.guestbook.page.category;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;
import domehotel.guestbook.R;

public class CategoryAdapter extends ArrayAdapter<CategoryItem>{

Context context; 
int layoutResourceId;    
CategoryItem data[] = null;

public CategoryAdapter(Context context, int layoutResourceId, CategoryItem[] data) {
    super(context, layoutResourceId, data);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.data = data;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    CategoryHolder holder = null;

    if(row == null)
    {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new CategoryHolder();
        holder.category_name = (TextView)row.findViewById(R.id.category_name);

        row.setTag(holder);
    }
    else
    {
        holder = (CategoryHolder)row.getTag();
    }

    CategoryItem category = data[position];
    holder.category_name.setText(category.category_name);

    return row;
}

static class CategoryHolder
{
    TextView category_name;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:14:55.420

由于 ListView 行视图对象每个都被重复用于多行，因此保留有关行视图中哪一行处于活动状态的信息并不是一个好主意，最好将此信息保留在适配器中（在我的情况下为 CategoryAdapter）。CategoryItem 类型的数据数组保存以下类的对象：

```
public class CategoryItem {

    public String category_name;
    public Boolean is_active = false;

    public CategoryItem(){
        super();
    }

    public CategoryItem(String category_name){
        super();
        this.category_name = category_name.toUpperCase();
    }
} 
```

适配器在 onView 方法中重绘视图项时，检查当前行是否处于活动状态：

```
if (category.is_active)
    row.setBackgroundResource(activeBgDrawable);
else
    row.setBackgroundResource(inactiveBgDrawable); 
```

因此，当我单击一个项目时，我将 CategoryItem is_active 属性设置为 true，而之前单击的 is_active 属性设置为 false：

```
if (position != previous_position){
    CategoryAdapter adapter = (CategoryAdapter)parent.getAdapter();
    CategoryItem current_item = adapter.getItem(position);
    current_item.is_active = true;
    if (previous_position != -1){
        CategoryItem previous_item = adapter.getItem(previous_position);
                    previous_item.is_active = false;
        }
    previous_position = position;
    adapter.notifyDataSetChanged();
} 
```

为什么设置视图对象背景不起作用？如果我的 ListView 包含的 ListView 项目比 ListView 可以显示的要多，则列表将变为可滚动的，例如，如果我向下滚动 ListView，那么当上面的项目滑出可见部分时，该行的 ListView 项目 View 对象将被重用于将出现在底部的下一行。因此，如果上面一行是我会更改其 View 对象背景的那一行，那么当它消失时，底行将用上面的 View 对象及其背景重绘，这就是为什么我有时有两个彩色行的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:46:39.260

实际上，您正在重用视图。getView 将名为 convertView 的视图作为第二个参数。ListView 使用旧的 View 项目（如果有的话）调用此方法，该项目已实例化（膨胀）但目前不显示。你的冰毒。onListItemClick 现在设置这些视图之一的背景，但此视图稍后将被重用于另一行，而不重置它的背景。

一个可能的解决方案：

1.  点击监听器应该只为某处点击位置存储背景颜色或点击标志，然后要求有问题的视图（行）重新渲染（它也可以保存状态，然后直接设置背景）。

2.  getView(..) 方法应*始终*根据为其位置保存的颜色/状态设置视图的背景颜色。为未标记为已单击的位置设置正常背景，或为单击侦听器标记为已单击的位置设置另一个背景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T10:46:42.860

在 OnItemClick 中尝试以下代码

```
public void onListItemClick(ListView parent, View v, int position, long id){

if (position != previous_position){
    v.setBackgroundResource(R.drawable.category_clicked_item_bg);   
    Object view = parent.getTag();
    if(view!=null){
       // typecasting the Object to View
       ((View)view).setBackgroundResource(R.drawable.category_item_bg);
    }
    previous_position = position;
    parent.setTag(v);
}
} 
```

我希望这能解决你的问题。

# iphone - iPhone：在应用更新时更改签名

> ID：12107441
> 
> 赞同：0
> 
> 时间：2012-08-24T10:15:53.690
> 
> 标签：iphone, ios, app-store, signature

我需要回答以下问题：

我想分两个阶段开发 iOS 应用程序。

1) 该应用程序不需要定义的应用程序 ID，因此我使用通用开发人员签名对其进行签名

2）我需要添加到我的应用程序推送通知，因此我需要定义一个特定的应用程序 ID，并且我必须使用特定的应用程序签名对更新的二进制文件进行签名。

问题（可能很幼稚）：

已经安装的旧版本会发生什么？尽管签名不同，他们会正常更新吗？

老实说，我是这么认为的，因为我认为 bundle id 是有区别的，并且定义了 bundle id（在第 2 阶段将与 app id 相同），即使使用不同的签名进行签名，所有应用程序也会更新。

你能证实这一点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T19:10:03.880

当您在 iTunes Connect 中创建应用程序时 - 您将获得一个唯一的 Apple ID。这在应用商店是独一无二的。

您还可以使用 Bundle ID 创建它。捆绑包 ID 是 iOS 的唯一标识符。

将 Bundle ID 与应用关联后，您将无法更改它，但您可以使用开发人员通配符 ID 构建您的应用，然后再为应用商店使用另一个捆绑 ID。

阅读：[https ://developer.apple.com/ios/manage/bundles/howto.action](https://developer.apple.com/ios/manage/bundles/howto.action)

# c# - 存储为数组的三角形。每个级别的高度和长度？

> ID：12107442
> 
> 赞同：0
> 
> 时间：2012-08-24T10:15:55.907
> 
> 标签：c#, arrays, algorithm, data-structures

假设我们有一个三角形，每个节点都有 K 个孩子。

K = 2 的示例是：

```
 1
 2 3
4 5 6 
```

K = 3 的示例是：

```
 1
  2 3 4
5 6 7 8 9 
```

K = 4 的示例是：

```
 1
     2 3 4 5
  5 6 7 8 9 1 2 
```

等等

1.  我想将这些三角形存储在一个数组中。给定元素总数 T 和每个节点 K 的子节点数，我希望检索三角形的总高度（假设它们是完整的三角形）

2.  我也在寻找数组中每个元素对每个孩子的偏移量。我知道对于上面 K = 2 的示例，数组是 [1, 2, 3, 4, 5, 6] ，其中每个级别 L 的偏移量是 L * (L + 1) / 2 （因为级别 1 有 1元素，2级有2个，3级有3个......）

编辑：这个例子是正确的。每个节点都可以访问 K 个子节点。对于 K = 3 1 可以访问 2 3 和 4。2 可以访问 5 6 和 7。3 可以访问 6 7 和 8。

这些是三角形，而不是图形或树。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:57:20.870

既然您已经阐明了您的要求...

对于 K=2，有

```
1
1+1
1+1+1
... 
```

每个级别中的元素，这是系列`1,2,3,....` 如果`n`是级别编号，那么每个级别都有`n`元素。请注意，这也可以写成`1+1(n-1)`

对于 K=3 有

```
1
1+2
1+2+2
... 
```

每个级别的元素，这是系列`1,3,5,...`；每个级别都有`1+2(n-1)`元素。

对于 K=4，有

```
1
1+3
1+3+3
... 
```

每个级别的元素，这是系列`1,4,7,...`。每个级别都有`1+3(n-1)`元素。

在每个三角形的每一层都有`1+(K-1)(n-1)`元素。我希望你能从这里继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:37:12.570

`T`高度三角形的元素总数`h`将是：

T = ∑<em>1...h (1 + (K-1)(n-1))
T = h + (K-1) * ∑<em>1...h (n-1)
T = h + (K-1) * ∑<em>0..h-1 (n)
T = h + (K-1) * ((h-1)² + h-1) / 2
T = h + (K-1) * (h² + 1 - 2h + h-1) / 2
T = h + (K-1) * (h² - h) / 2

### 计算高度

因此，要获得高度`h`，请插入 的值`K`并求解方程。`K`这是一个等于 3的简单案例的示例。

T = h + (K-1) * (h² - h) / 2
T = h + (3-1) * (h² - h) / 2
T = h + (h² - h)
T = h²
h = √T

### 计算偏移量

至于偏移量，您使用我们用来计算元素总数但设置`h`为 height-1 的相同方程。这是一个在 a`K`为 4 的三角形中获取第 3 行偏移量的示例。

*偏移量*(h) = h-1 + (K-1) * ((h-1)² - (h-1)) / 2
*偏移量*(3) = 3-1 + (4-1) * ((3- 1)² - (3-1)) / 2
*偏移量*(3) = 2 + 3 * (4 - 2) / 2
*偏移量*(3) = 5

# android - onCreate 的正确代码，在 libgdx 中恢复活动交互的正确代码？

> ID：12107443
> 
> 赞同：2
> 
> 时间：2012-08-24T10:15:59.937
> 
> 标签：android, libgdx

例如，我们有 2 个活动：Main - libgdx 和 Aux - Android 正常活动。

在 Main 中，我们有一个前往 Aux 的按钮（阅读并遵循[此](http://code.google.com/p/libgdx-users/wiki/IntegratingAndroidNativeUiElements3TierProjectSetup)说明），在 Aux 中还有一个返回 Main 的按钮。

我的 startActivity 代码：

```
@Override
public void startActivity(Class<?> C) {
    Intent intent = new Intent(appContext, C);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    appContext.startActivity(intent);
} 
```

当我们从 Main 转到 Aux 时，没关系，但是当我们返回时，它只是显示一个空白的 WHITE 屏幕（它仍然与播放器交互但不显示任何内容）:((.

你能帮我一个正确的方法来解决这个问题吗？

P/S：目前我将 onCreate 和 onResume 等...留空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T03:29:28.643

您的问题是 OpenGLES 上下文丢失。

到今天为止，libgdx v0.9.9[纹理](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/Texture.html)被管理，这意味着它们将在上下文丢失的情况下自动重新加载。如果您像这样创建它们：

```
texture = new Texture(...); 
```

如果没有，那么您必须手动重新加载它们。

# ios - 如何制作没有圆角的 UIProgressView 标准矩形？

> ID：12107444
> 
> 赞同：3
> 
> 时间：2012-08-24T10:15:59.340
> 
> 标签：ios, uiprogressview

UIProgressView 默认有`rounded corners`.

**我怎样才能摆脱那些`rounded corners`？**我希望有一个`standard rectangle view`.

我试过了`progressView.layer.cornerRadius = 0;`，但没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:28:29.140

您必须继承`UIProgressView`和覆盖`drawRect`.

**编辑 2016 年 8 月 31 日：**

[这是一个教程](http://goto11.net/skinning-a-uiprogressview-with-drawrect-and-images/) ;-)

来吧：这个是 2012 年的，问题已关闭，iOS 有一些更新，SDK 和 ProgressView API 也有，我们（希望）现在使用 swift ......是的：链接已损坏。所以，请随意对这个投反对票，但问问自己，一个完整的链接是否真的能解决你的问题。

# symfony - 当 session.storage.filesystem 设置为 storage_id 时 Symfony2 登录失败

> ID：12107451
> 
> 赞同：3
> 
> 时间：2012-08-24T10:16:31.280
> 
> 标签：symfony, phpunit

我正在尝试使用 PHPUnit 进行一些功能测试，但它要求我为 config.yml 中的 storage_id 选项添加 session.storage.filesystem。
由于某种原因，这会导致登录过程失败。我在 test.log 中收到以下错误：
身份验证请求失败：您的会话已超时，或者您已禁用 cookie。
之后我再次被重定向到登录页面。我确定我启用了 cookie，并且应用程序可以在不设置该选项的情况下工作（使用本机会话存储）。
谁能告诉我这个问题是否有解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:00:19.790

尝试更改缓存文件夹的文件权限。如果它们设置不正确，将会发生以下情况：

*   您开发东西并通过您的网络浏览器对其进行测试=>您的 apache（或其他服务器）将创建缓存，并且将是唯一对其拥有权限的人
*   您从命令行启动 phpunit 测试（不同的 unix 用户）=> 当前的 unix 用户没有对您的缓存文件夹的写入权限，并且无法存储会话。

立即修复以验证是否属于这种情况：

```
chmod -R 777 app/cache/
phpunit -c app/ 
```

如果确实如此，请检查如何正确设置权限：[http ://symfony.com/doc/current/book/installation.html#configuration-and-setup](http://symfony.com/doc/current/book/installation.html#configuration-and-setup)

# java - 具有多个需要信任的库的 Java 小程序对用户来说花费的时间太长

> ID：12107453
> 
> 赞同：0
> 
> 时间：2012-08-24T10:16:33.127
> 
> 标签：java, applet, libraries, signed

我正在制作一个使用一些 3rd 方库的 Java Applet。特别是来自 Netbeans 的 MySQL 连接器和 AbsoluteLayout。

现在，当我自签名并从浏览器窗口启动它时，我必须单击接受 3 次才能启动它，这对于使用它的人来说可能有点太多了。

有没有一种方法可以让所有库都受到信任，接受或不签署在沙盒环境之外不做任何事情的 AbsoluteLayout 广告。

# mysql - 如何保护 vb.net 2008 中的连接字符串？

> ID：12107455
> 
> 赞同：0
> 
> 时间：2012-08-24T10:16:35.483
> 
> 标签：mysql, sql, database, vb.net

我正在开发一个连接到数据库的应用程序，我的前端使用 Visual Studio 2008（Visual Basic），后端使用 mysql。创建连接字符串时，vb.net 会提示我一个警告，说我正在创建的连接字符串包含敏感数据，在连接字符串中包含该数据太冒险了......我可以忽略它的警告我的应用程序可以正常工作，但我担心我的数据的安全性，有人可以帮助我吗？...

我已经在互联网上阅读了一些关于保护连接字符串的内容，但我似乎无法掌握实现它的想法，并且不确定它是否真的是我正在寻找的解决方案......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:24:28.723

以下示例显示如何为名为 SampleApplication 的应用程序加密 Web.config 文件的 connectionStrings 部分：

```
aspnet_regiis -pe "connectionStrings" -app "/SampleApplication" 
```

对于非 IIS 应用，使用受保护的配置

[http://msdn.microsoft.com/en-us/library/89211k9b%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/89211k9b%28v=vs.80%29.aspx)

# windows - PowerShell 3 的文件扩展名

> ID：12107462
> 
> 赞同：128
> 
> 时间：2012-08-24T10:16:58.737
> 
> 标签：windows, shell, powershell, windows-8

我们所有人可能都知道`.bat`批处理文件。

但是**PowerShell 3**脚本的文件扩展名是什么？

我找到`.ps1`了一些其他的结局，但它们只适用于版本 1。

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-08-24T11:41:13.323

所有版本的 PowerShell 文件都是 .ps1（或 .psm1、.psd1 等）。

# jquery-mobile - 不是另一个 Sencha Touch 2 与 JQMobile 1.2.0 性能比较线程

> ID：12107466
> 
> 赞同：0
> 
> 时间：2012-08-24T10:17:23.543
> 
> 标签：jquery-mobile, sencha-touch-2

我知道这已经被问了一百万次，但我似乎找不到与新的 Sencha Touch 2 和当前发布和优化的 JQMobile 1.2.0 或 1.1.1 的良好比较。

我主要担心的是我已经使用了这两种方法，但只使用了旧的非优化版本的 JQMobile，所以我的问题是。

与 Sencha Touch 2 相比，刚刚发布的新 JQuery Mobile 在将其打包到原生移动应用程序方面的改进有多大？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:47:58.547

我还没有制作 Sencha 应用程序（尽管演示看起来很时髦），但我刚刚完成了一个 jQuery Mobile 应用程序，我在完成前不久升级到了 1.1.1。性能改进很小。简而言之，如果您正在制作一个复杂的应用程序，jQuery Mobile 的性能根本就不是很好。对于简单的东西，它很棒，但如果你正在构建更大尺寸和更复杂的东西，你真的应该寻找其他地方。如果您确实使用 JQM，请务必四处搜索有关如何保持性能的提示，但请注意，即使您全部遵循它们，您最终也可能会感到失望。在旁注中，当涉及到诸如固定标题和其他视觉元素之类的东西时，JQM 仍然存在各种令人讨厌的错误……除了最简单的用例之外，它真的不值得（还）使用。

# java - Spring MVC RequestMapping ParamRequest 集合/数组

> ID：12107469
> 
> 赞同：1
> 
> 时间：2012-08-24T10:17:32.287
> 
> 标签：java, spring, servlets, spring-mvc, request

我有一个 @Controller 和一个接受集合的 @RequestMapping 函数。

想象一下：

```
requestHandler(Collection<Long> param){
   ...
} 
```

此映射仅在我发送请求时匹配，例如：

```
http://www.domain.com/mapping/funct?param=1&param=2&param=3 
```

当我发送逗号分隔值时，我也想匹配它：

```
 http://www.domain.com/mapping/funct?param=1,2,3 
```

有没有办法不使用 .split ？我希望它被自动解析为一个集合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:24:23.693

您必须编写一个自定义[`Converter`](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html#core-convert-Converter-API)并将[其注册到您的 Spring MVC 上下文中](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html#format-configuring-FormattingConversionService)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:36:41.943

在这种情况下，最好访问所有查询参数并根据您的需要进行解析

您应该可以通过 request.getQueryString() 访问请求查询字符串。

除了 getQueryString 之外，还可以从 request.getParameterMap() 作为 Map 检索查询参数。

# facebook - 是否可以查看 Facebook 主页的评论？

> ID：12107472
> 
> 赞同：1
> 
> 时间：2012-08-24T10:17:37.583
> 
> 标签：facebook, comments

如果有人能告诉我如何查看 Facebook 页面在其他页面上发表的评论，那就太好了。当我转到特定页面时，我可以看到他们在自己的页面上发表的所有评论，但我更感兴趣的是看到他们在其他页面上发表的喜欢/评论——如果可能的话！

谢谢。

# xml - 如何应用多个模板定义，其中每个定义都更改相同的 XML 结构

> ID：12107482
> 
> 赞同：6
> 
> 时间：2012-08-24T10:17:59.190
> 
> 标签：xml, xslt

在这个代码示例中，我有两个挑战，一个是在 B 节点之后和节点 C、D 和 E 之前设置 B1 节点，第二个挑战是将第二个 KEY 节点添加到 /ROOT/E/OTHER/DEAL/KEYS 结构。

此 XML 示例：

```
 <ROOT>
          <A>some A text</A>
          <B>some B text</B>
          <C>some C text</C>
          <D>some D text</D>
          <E>
            <OTHER>
              <DEAL>
                <KEYS>
                  <KEY>
                    <KeyIdentifierType>KeyIdentifierTypeA</KeyIdentifierType>
                    <KeyValue>123456|1</KeyValue>
                  </KEY>
                </KEYS>
              </DEAL>
            </OTHER>
          </E>
        </ROOT> 
```

改造后：

```
 <xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <xsl:strip-space elements="*"/>
        <xsl:output method="xml" indent="yes"/>

        <xsl:template match="@*|node()">
            <xsl:copy>
                <xsl:apply-templates  select="@*|node()"/>
            </xsl:copy>
        </xsl:template>

        <!-- Identifiers are added by the system. Need to pass parms from the calling program -->
        <xsl:template match="ROOT" name="add-B1">
            <xsl:variable name="elements-after" select="C|D|E"/>
            <xsl:copy>
                <xsl:copy-of select="* except $elements-after"/>
                <B1>some B1 text</B1>
                <xsl:copy-of select="$elements-after"/>
            </xsl:copy>
        </xsl:template>

        <!-- KEY is added by the system. Need to pass parms from the calling program -->
        <xsl:template match="ROOT/E/OTHER/DEAL/KEYS" name="add-KEYS">
            <xsl:param name="KeyIdentifierTypeB">654321|1</xsl:param>
            <xsl:copy>
                <xsl:copy-of select="*"/>
                <KEY>
                    <KeyIdentifierType>KeyIdentifierTypeB</KeyIdentifierType>
                    <KeyValue>
                        <xsl:value-of select="$KeyIdentifierTypeB"/>
                    </KeyValue>
                </KEY>
            </xsl:copy>
        </xsl:template>
    </xsl:stylesheet> 
```

变得：

```
 <?xml version="1.0" encoding="UTF-8"?>
        <ROOT>
            <A>some A text</A>
            <B>some B text</B>
            <B1 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">some B1 text</B1>
            <C>some C text</C>
            <D>some D text</D>
            <E>
                <OTHER>
                    <DEAL>
                        <KEYS>
                            <KEY>
                                <KeyIdentifierType>KeyIdentifierTypeA</KeyIdentifierType>
                                <KeyValue>123456|1</KeyValue>
                            </KEY>
                        </KEYS>
                    </DEAL>
                </OTHER>
            </E>
        </ROOT> 
```

为什么第二个模板定义被完全忽略了？

第一个代码学院已解决 B1 节点设置在 B 节点之后和节点 C、D 和 E 之前，或者换句话说 B1 节点已设置并且必须在其后放置的节点是：C、D 和 E。
第二个模板match="ROOT/E/OTHER/DEAL/KEYS" 应该满足第二个挑战部分：将第二个 KEY 节点添加到 /ROOT/E/OTHER/DEAL/KEYS 结构，已被完全忽略。除了这个事实，如果你在 ROOT 节点上注释第一个模板匹配，第二个模板 match="ROOT/E/OTHER/DEAL/KEYS" 将正常工作，它实际上会添加额外的密钥，但我没有不知道为什么第一个模板匹配总是覆盖第二个。我尝试 xsl:template match="ROOT/E/OTHER/DEAL/KEYS... 和 xsl:for-each select=... 和 xsl:call-template name="add-KEYS"

我实际上理解，应用模板匹配具有最高优先级的更高结构的节点模板。更改 XSLT 文件中的模板位置不会有任何影响，它不会按照确切的行顺序读取它，而是会通过匹配优先级来处理它。每个匹配模板的“apply-templates”都会对 XML 结构进行更改，隐含地它会为我们生成“for-each”，但我不知道如何“建议”第二个模板结构已更改，以及为什么我应该这样做，因为第二个模板匹配正在寻找不同的 XPath 位置，顺便说一句，从第一个模板中从未触及过。我应该在我的情况下应用模板排序吗？......以及如何做到这一点的最佳实践是什么？

预期结果：

```
 <?xml version="1.0" encoding="UTF-8"?>
        <ROOT>
            <A>some A text</A>
            <B>some B text</B>
            <B1>some B1 text</B1>
            <C>some C text</C>
            <D>some D text</D>
            <E>
                <OTHER>
                    <DEAL>
                        <KEYS>
                            <KEY>
                                <KeyIdentifierType>KeyIdentifierTypeA</KeyIdentifierType>
                                <KeyValue>123456|1</KeyValue>
                            </KEY>
                            <KEY>
                                <KeyIdentifierType>KeyIdentifierTypeB</KeyIdentifierType>
                                <KeyValue>654321|1</KeyValue>
                            </KEY>
                        </KEYS>
                    </DEAL>
                </OTHER>
            </E>
        </ROOT> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:27:02.183

> 应该满足第二个挑战部分的第二个模板`match="ROOT/E/OTHER/DEAL/KEYS"`：将第二个 KEY 节点添加到 `/ROOT/E/OTHER/DEAL/KEYS`结构中，已被完全忽略。

问题是在模板匹配`ROOT`中没有任何`xsl:apply-templates`. `xsl:apply-templates`模板仅在指令的结果中被选择执行。在您的代码中没有任何`xsl:apply-templates`，因此 XSLT 处理器不再应用模板并完成执行。

如果换成`xsl:copy-of`.`xsl:apply-templates`

**以下是如何做到这一点**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/*">
  <xsl:copy>
    <xsl:apply-templates select="@*|B/preceding-sibling::node()"/>
    <xsl:apply-templates select="B"/>
    <B1>some B1 text</B1>
    <xsl:apply-templates select="B/following-sibling::node()"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="KEY">
  <xsl:copy>
   <xsl:apply-templates select="@*|node()"/>
   <KEY>
    <KeyIdentifierType>KeyIdentifierTypeB</KeyIdentifierType>
    <KeyValue>
     <xsl:value-of select="'654321|1'"/>
    </KeyValue>
   </KEY>
   </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<ROOT>
    <A>some A text</A>
    <B>some B text</B>
    <C>some C text</C>
    <D>some D text</D>
    <E>
        <OTHER>
            <DEAL>
                <KEYS>
                    <KEY>
                        <KeyIdentifierType>KeyIdentifierTypeA</KeyIdentifierType>
                        <KeyValue>123456|1</KeyValue>
                    </KEY>
                </KEYS>
            </DEAL>
        </OTHER>
    </E>
</ROOT> 
```

**产生了想要的正确结果**：

```
<ROOT>
   <A>some A text</A>
   <B>some B text</B>
   <B1>some B1 text</B1>
   <C>some C text</C>
   <D>some D text</D>
   <E>
      <OTHER>
         <DEAL>
            <KEYS>
               <KEY>
                  <KeyIdentifierType>KeyIdentifierTypeA</KeyIdentifierType>
                  <KeyValue>123456|1</KeyValue>
                  <KEY>
                     <KeyIdentifierType>KeyIdentifierTypeB</KeyIdentifierType>
                     <KeyValue>654321|1</KeyValue>
                  </KEY>
               </KEY>
            </KEYS>
         </DEAL>
      </OTHER>
   </E>
</ROOT> 
```

# ios - 使用 imageView 自定义导航栏时存在差距

> ID：12107485
> 
> 赞同：0
> 
> 时间：2012-08-24T10:18:07.817
> 
> 标签：ios, uiimageview, uinavigationbar, customization

我使用以下代码使用 UIView 自定义导航栏。但是为什么导航栏的左侧大小有一个缺口呢？附言。渐变图像是 test.png。

提前致谢！

![在此处输入图像描述](../Images/9d9e988387e6bd6189967a7faf0d4cf3.png)

```
- (void)viewDidLoad
{
[super viewDidLoad];

// show image
UIImage *image = [UIImage imageNamed: @"test.png"];
UIImageView *imageView = [[UIImageView alloc] initWithImage: image];
[imageView setContentMode:UIViewContentModeScaleToFill];
imageView.frame = CGRectMake(0, 0, 320, 44);

// label
UILabel *tmpTitleLabel = [[UILabel alloc] initWithFrame:CGRectMake(110, 0, 100, 44)];
tmpTitleLabel.text = @"title";
tmpTitleLabel.textAlignment = UITextAlignmentCenter;
tmpTitleLabel.backgroundColor = [UIColor clearColor];
tmpTitleLabel.textColor = [UIColor whiteColor];

CGRect applicationFrame = CGRectMake(0, 0, 320, 44);
UIView * newView = [[UIView alloc] initWithFrame:applicationFrame];
[newView addSubview:imageView];
[newView addSubview:tmpTitleLabel];
self.navigationItem.titleView = newView;
} 
```

**编辑 1**

这是我的测试代码和屏幕截图

![在此处输入图像描述](../Images/160b52597a30210931696741ba1f88e4.png)

```
- (void)viewDidLoad
{    

[super viewDidLoad];

UIView * viewGreen = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
UIView * viewRed = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];

[viewGreen setBackgroundColor:[UIColor greenColor]];
[viewRed setBackgroundColor:[UIColor redColor]];
self.navigationItem.titleView = viewRed;

[self.view addSubview:viewGreen];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:58:47.493

您的代码工作正常。只需检查图像和透明度。

最后添加该行并再次检查

```
[self.view addSubview:newView]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T08:15:06.050

问题通过以下代码解决

```
[self.navigationBar insertSubview:imageView atIndex:1]; 
```

# jquery - Internet Explorer 8 不会使用 .attr() 更改图像 src

> ID：12107487
> 
> 赞同：2
> 
> 时间：2012-08-24T10:18:11.140
> 
> 标签：jquery, internet-explorer-8, src, scrolltop

我已经设置了一个页面，当用户使用鼠标或触控板滚动时，该页面将浏览一系列图像。我正在使用 jQuery 来测量与页面顶部的距离 - scrollTop() - 然后更改 DOM 中特定 id 的图像源。

这在 Firefox、Chrome、Safari、Opera、IE9 以及 iPad、iPhone 等上都可以完美运行。但是，它在 IE8 中不起作用。

这是 HTML：

```
<div id="flipping-container">
    <img id="flipping-id" class="flippingTarget" src="imageOne.png" alt="imageone" />
</div> 
```

这是JS：

```
$(document).scroll(function() {
    var toTop = $(document).scrollTop();
    if (toTop <= 340) {
            $('.flippingTarget').attr('src','imageOne.png');
    }
    else if ((toTop <= 392) && (toTop > 341)){
            $('.flippingTarget').attr('src','imageTwo.png');
    }
    else if ((toTop <= 445) && (toTop >= 393)){
            $('.flippingTarget').attr('src','imageThree.png');
    }

// AND SO ON
// ENDING WITH...

    else {
            $('.flipping-target').attr('src','image1.png');
    };
}); 
```

"flipping-container" 的 div ID 被赋予一个 CSS 值 position:fixed; 所以它总是可见的。

我已经浏览了 StackOverflow 的帖子，但还没有找到可行的解决方案。scrollTop() 值被读取得非常好，因为我在按钮上有点击事件，这些按钮会将页面平滑地滚动到一个 div 和/或从顶部开始的多个像素。IE8 对此很好，所以这不是 html/body/document/window scrollTop() 问题。

我已经切换了 .addClass() 的 .attr() 值，看看它是否会被拾取。但它不在 IE8 中。所以它可能与 src 属性本身没有直接关系。我已经仔细检查了我的类名和目标，它们都很好（其他浏览器也证明了它们的性能）。

有什么线索吗？任何帮助将非常感激。

# ruby-on-rails - Ruby on Rails 模型重用

> ID：12107488
> 
> 赞同：0
> 
> 时间：2012-08-24T10:18:14.157
> 
> 标签：ruby-on-rails, database-design, orm, model, relationship

我对 RoR 很陌生。

简而言之：客人应该能够为他所住的物业留下**评论**；财产归房东所有。主人应该能够为客人留下评论（客人住在主人的财产中）。我认为为此使用两个单独的模型（例如 ReviewToHost、ReviewToGuest）并不明智 - 所以如果 @property.reviews 和 @user.reviews 与单个 Review 模型一起使用会很好。有解决方案吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:21:02.263

这个[Railscast](http://railscasts.com/episodes/154-polymorphic-association-revised)应该准确地告诉你你需要什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:21:04.860

把review设为多态，可以看[http://railscasts.com/episodes/154-polymorphic-association](http://railscasts.com/episodes/154-polymorphic-association)

# c++ - 带有模板参数的函数的编译问题

> ID：12107494
> 
> 赞同：2
> 
> 时间：2012-08-24T10:18:34.970
> 
> 标签：c++, templates

大家好，我有一个编译错误，我似乎无法通过。

这就是我所做的：我声明了一个类 2 的对象，并将它的函数称为“function2”。反过来，这个函数声明了一个 class1 的对象并调用它的函数“function1”。现在，这段代码此时出现编译错误（“function1”无法正确调用）：

错误：“）”标记之前的预期主表达式

但是，如果我取消注释无用的“function1”，那么代码就会编译。我觉得这很混乱，因为这*不是*被调用的函数，根本不应该影响。

```
#include <iostream>
using namespace std;

template<int parameter1>
class class1 {
    public:

    template < int parameter2 > void function1() {
        cout << "We do useful things here" << endl;
    }
};

template < int parameter3 >
class class2 {
    public:

    //template < char a, char b > bool function1() {
    //    cout << "Useless definition (?)" << endl;
    //}

    void function2() {
        class1 < parameter3 > an_instance_of_class1;
        an_instance_of_class1.function1 < 999 > ();
    }
};

int main(int argc, char** argv) {
    class2 < 99 > an_instance_of_class2;
    an_instance_of_class2.function2();
} 
```

有谁知道我错过了什么？提前致谢。

编译器版本：

```
$ g++ --version
g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T10:24:55.373

您需要使用`.template`：

```
an_instance_of_class1.template function1 < 999 > (); 
```

[在此处](https://stackoverflow.com/a/613132/1469808)查看接受的答案以获取更多详细信息。

# php - 如何在自定义查询 wordpress 上有上一个和下一个链接？

> ID：12107501
> 
> 赞同：0
> 
> 时间：2012-08-24T10:18:47.873
> 
> 标签：php, wordpress

我有一个用于我的页面的自定义模板，在我得到的那个自定义模板中，`the_content()`我使用了一个自定义查询。我希望只能获得我的 6 个帖子，然后能够转到 prev 和 next 以查看其余帖子。

这是我的一些代码：

```
<?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>
        <article id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
            <div class="entry-content">

                <div id="the_content">                          
                    <?php the_content(); ?>
                </div>
                <?php 

                $args = array('numberposts'=> 6,
                                'post_type'=>'project'
                                ); 
                $posts = get_posts( $args );

                    if($posts){

                        foreach( $posts as $post ) :    setup_postdata($post);

                           //do stuff 

                             wp_reset_postdata();
                    endforeach;
                 endwhile;
               </div>
            </article> 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:22:28.360

尝试这个

```
<?php posts_nav_link(); 
```

参考：[http ://codex.wordpress.org/Next_and_Previous_Links](http://codex.wordpress.org/Next_and_Previous_Links)

# spring-mvc - 为自定义对象字段向 Spring 3 DataBinder 添加错误消息

> ID：12107503
> 
> 赞同：26
> 
> 时间：2012-08-24T10:18:52.980
> 
> 标签：spring-mvc, bean-validation

我正在尝试手动将单个电子邮件错误消息添加到我的模型中，但视图中没有显示任何内容。
我认为这可能是我创建 ObjectError 或将其附加到 BindingResult 的方式。
我在 catch 中添加了错误。

这是当我将电子邮件字段留空并启动 JSR-303 注释时 result.errors 的内容（错误显示在视图中）：

```
[Field error in object 'user' on field 'email': rejected value []; codes [NotEmpty.user.email,NotEmpty.email,NotEmpty.java.lang.String,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.email,email]; arguments []; default message [email]]; default message [may not be empty]] 
```

这是我手动添加 ErrorObject 后 result.errors 的内容（电子邮件错误未显示在视图中）：

```
[Error in object 'email': codes []; arguments []; default message [An account already exists for this email.]] 
```

控制器：

```
@RequestMapping(value = "/registration", method = RequestMethod.POST)
    public ModelAndView post(@Valid User user, BindingResult result)
    {

        if (result.hasErrors())
        {
            ModelAndView modelAndView = new ModelAndView(
                    Consts.MODEL_RESISTER_PAGE);
            modelAndView.addObject("user", user);
            return modelAndView;
        }
        else
        {
            try
            {
                userService.addUser(user);

                ModelAndView modelAndView = new ModelAndView(
                        Consts.MODEL_CARD_REPORTS_HOME_PAGE);
                modelAndView.addObject("userRegisteredSuccess", Boolean.TRUE);

                return modelAndView;
            }
            catch (DataIntegrityViolationException ex)
            {
                ObjectError error = new ObjectError("email","An account already exists for this email.");

                result.addError(error);

                ModelAndView modelAndView = new ModelAndView(
                        Consts.MODEL_RESISTER_PAGE);

                modelAndView.addAllObjects(result.getModel());
                modelAndView.addObject("user", user);

                return modelAndView;
            }
        }
    } 
```

我的模型：

```
@Entity
public class User implements Serializable
{
    /**
     * 
     */
    private static final long serialVersionUID = -5232533507244034448L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @NotEmpty
    @Size(min=2, max=15)
    private String firstname;

    @NotEmpty
    @Size(min=2, max=15)
    private String surname;

    @NotEmpty
    @Email
    private String email;

    @NotEmpty
    @Size(min=6, max=10)
    private String password;

    public Long getId()
    {
        return id;
    }

    public void setId(Long id)
    {
        this.id = id;
    }

    public String getFirstname()
    {
        return firstname;
    }

    public void setFirstname(String firstname)
    {
        this.firstname = firstname;
    }

    public String getSurname()
    {
        return surname;
    }

    public void setSurname(String surname)
    {
        this.surname = surname;
    }

    public String getEmail()
    {
        return email;
    }

    public void setEmail(String email)
    {
        this.email = email;
    }

    public String getPassword()
    {
        return password;
    }

    public void setPassword(String password)
    {
        this.password = password;
    }
} 
```

文件`add.html`

```
<form id="registrationForm" action="#" th:action="@{/registration}" th:object="${user}" method="post" class="clearfix">
    <legend>Registration</legend>

    <div class="control-group input" th:class="${#fields.hasErrors('firstname')}? 'control-group input error'">
      <input type="text" th:field="*{firstname}" placeholder="Firstname" />
      <span class="help-block" th:if="${#fields.hasErrors('firstname')}" th:errors="*{firstname}"></span>
    </div>

    <div class="control-group input" th:class="${#fields.hasErrors('surname')}? 'control-group input error'">
      <input type="text" th:field="*{surname}" placeholder="Surname" />
      <span class="help-block" th:if="${#fields.hasErrors('surname')}" th:errors="*{surname}"></span>
    </div>

    <div class="control-group input" th:class="${#fields.hasErrors('email')}? 'control-group input error'">
      <input type="text" th:field="*{email}" placeholder="Email" />
      <span class="help-block" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></span>
    </div>

    <div class="control-group input" th:class="${#fields.hasErrors('password')}? 'control-group input error'">
        <input type="password" th:field="*{password}" placeholder="Password" />
        <span class="help-block" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></span>
    </div>

    <div class="clearfix">
      <input type="submit" class="btn btn-success btn-large" value="Register" />
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-08-24T11:57:25.973

我通常打电话`result.rejectValue("property", "error.object");`给`BindingResult`. 如果要添加全局对象错误，可以使用`result.reject("error.object");`.

因此，在您的代码中，而不是：

```
ObjectError error = new ObjectError("email","An account already exists for this email.");
result.addError(error); 
```

尝试：

```
result.rejectValue("email", "error.user", "An account already exists for this email."); 
```

检查参考[here](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/validation/Errors.html#rejectValue%28java.lang.String,%20java.lang.String,%20java.lang.String%29)。

希望这可以帮助。

# html - AngularJS 标签属性

> ID：12107504
> 
> 赞同：57
> 
> 时间：2012-08-24T10:18:57.950
> 
> 标签：html, angularjs

我正在学习 AngularJS 并看到它添加了一些自己的属性，这些属性既不是以数据开头，也不是标准的 html 标签属性，如下所示：

```
<html ng-app> 
```

或这个：

```
<body ng-controller="PhoneListCtrl"> 
```

这些 ng-* 属性是从哪里来的，这是一个有效的 HTML 吗？我在哪里可以阅读更多关于此的信息？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-24T10:49:35.813

严格来说，这些额外的属性没有在 HTML 规范中定义，因此不是有效的 HTML。你可以说 AngularJS 提供并解析 HTML 规范的超集。

但是，从 v1.0.0rc1 开始，您可以使用 data-* 属性，例如`<html data-ng-app>`，我相信它是有效的 HTML5。[来源](https://stackoverflow.com/questions/9746916/can-i-use-another-prefix-instead-of-ng-with-angularjs?rq=1)。

[AngularJS 编译器](http://docs.angularjs.org/guide/compiler)有一个指南，其中包含有关该过程的更多信息。简而言之; AngularJS 编译器读取您的 HTML 页面，使用这些属性来指导它在加载后通过 javascript 和 HTML DOM 编辑和更新您的页面。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-10T00:39:49.943

来自文档：[http ://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

```
<!doctype html>
<html data-ng-app>
  <head>
    <script src="http://code.angularjs.org/1.0.7/angular.min.js"></script>
    <script src="script.js"></script>
  </head>
  <body>
    <div data-ng-controller="Ctrl1">
      These are all valid directive declarations:<br/>
      <input ng-model='name'> <hr/>
      <span ng:bind="name"></span> <br/>
      <span ng_bind="name"></span> <br/>
      <span ng-bind="name"></span> <br/>          
      <span x-ng-bind="name"></span> <br/>
      <span data-ng-bind="name"></span> <br/>
    </div>
  </body>
</html> 
```

我最喜欢这个`data-*whatever*`声明，因为它符合 HTML5。

因此，对于我的任何 Angular 声明（例如`ng-controller`、`ng-app`等`ng-repeat`）或自定义指令，我总是会在它们前面加上`data-`.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-24T10:55:56.907

> 这些 ng-* 属性从何而来

来自主[ng 模块](http://docs.angularjs.org/api/ng)。[源代码](http://code.angularjs.org/1.0.1/angular-1.0.1.js)。

> 那是一个有效的 HTML 吗？

不可以。但是属性样式指令可以以 x- 或 data- 为前缀，以使其符合 HTML 验证器。请参阅[指令文档](http://docs.angularjs.org/guide/directive)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-09-30T01:33:54.380

另一种选择是忽略未定义的属性名称。如果您使用的是 Eclipse，则可以通过转到 project 来设置它`properties>>validation>>html syntax>>attributes>>ignore undefined attribute names`。

# ide - 如何将 PHPStorm 实时模板变量定义为另一个变量的小写值？

> ID：12107505
> 
> 赞同：13
> 
> 时间：2012-08-24T10:19:05.733
> 
> 标签：ide, phpstorm

我想制作一个这样的模板，`something $NAME$ other $LOWNAME$`这样当我使用它时，我会被带到 $NAME$ 输入列表，并且 $LOWNAME$ 会自动填充我输入的 $NAME$ 的非大写值。例如，我将“Client”打印到 $NAME$，$LOWNAME$ 的值为“client”。这可能吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-24T11:00:11.673

如果通过“取消大写”您的意思是**仅将第一个字母小写**，则为“是”，否则为“否”（因为没有将所有字符小写的功能）。

1.  模板：`something $NAME$ other $LOWNAME$`
2.  点击“编辑变量”按钮
3.  在“LOWNAME”变量的“表达式”列中输入：`decapitalize(NAME)`并勾选/选中“如果定义则跳过”框

现在当模板展开时，如果你输入“CapitalShip”作为`$NAME$`变量， `$LOWNAME$`会自动变成“capitalShip”

[http://www.jetbrains.com/phpstorm/webhelp/edit-template-variables-dialog.html](http://www.jetbrains.com/phpstorm/webhelp/edit-template-variables-dialog.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-28T00:27:43.977

要在 PHPStorm 中使用文件模板（不带表达式）执行此操作，您可以结合使用 Java 函数和[Apache Velocity 模板语言](http://velocity.apache.org/engine/devel/user-guide.html#Velocity_Template_Language_VTL:_An_Introduction)：

```
#set( $name = ${NAME} )
<?php

class ${NAME} extends Model{
  protected \$table = '$name.toLowerCase()';
} 
```

# bash - 如何为bash上的随机数据生成日期范围

> ID：12107506
> 
> 赞同：8
> 
> 时间：2012-08-24T10:19:05.967
> 
> 标签：bash, date, datetime

我需要在一年中的所有日子里生成字符串

前任：

```
MIN_DATE=01.01.2012

MAX_DATE=31.12.2012

for date in {1...366..1}
 do
 echo ...
done 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-24T10:25:15.903

```
for d in {0..365}; do date -d "2012-01-01 + $d days" +'%d.%m.%Y'; done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T12:43:22.767

不是纯 bash 解决方案，但我的[dateutils](http://hroptatyr.github.com/dateutils)可以提供帮助：

```
dseq 01.01.2012 31.12.2012 -f %d.%m.%Y -i %d.%m.%Y
=>
  01.01.2012
  02.01.2012
  ...
  31.12.2012 
```

输出格式可以用 配置，`-f`输入格式可以用`-i`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T12:47:37.650

使用 ISO 8601 日期格式（年-月-日），您可以按字典顺序比较日期。它比我想要的有点混乱，因为`bash`没有字符串的“<=”运算符。

```
year=2011
d="$year-01-01"
last="$(($year+1))-01-01"
while [[ $d < $last ]]; do
    echo $d
    d=$(date +%F --date "$d + 1 day")
done 
```

# jquery - Textarea自动增长在Chrome中不起作用

> ID：12107507
> 
> 赞同：0
> 
> 时间：2012-08-24T10:19:09.737
> 
> 标签：jquery, textarea, autogrow

我正在尝试的是在您输入文本或在其中粘贴一些文本时使 Textarea 自动增长。它适用于 IE7、IE8 和 IE9、Firefox。但是，在 OPERA、CHROME 和 SAFARI 中，即使我单击功能键/附加键（如 Shift、Ctrl、向下箭头、向上箭头、向左箭头、向右箭头、Home、End、Delete 等），它也会自动增长。

**查询代码：**

```
<script type="text/javascript">
function txtareaAutoGrow(txtar, clkBtn){
    // txtareaAutoGrow() start here
$("#"+txtar).height(18);

    $("#"+txtar).keyup(function(){
        if ($("#"+txtar).height() <= 18){
            $(this).height(18);
            }
        else {
            $(this).height($("#"+txtar).prop("scrollHeight"));
            $("#"+txtar).bind('paste', function() {
                setTimeout(function() {
                $("#"+txtar).height($("#"+txtar).prop("scrollHeight"));
            }, 100);            
    });
            }
        });

    $("#"+clkBtn).click(function(){
        if ($("#"+txtar).height() <= 18){
                $("#"+txtar).height($("#"+txtar).prop("scrollHeight"));
            }
            else {
                    $("#"+txtar).height(18);
                }
        });
    // txtareaAutoGrow() end here
};
</script> 
```

**HTML 代码：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Auto Resize TEXTAREA</title>
<style type="text/css">
textarea {
        overflow:hidden;
        resize: none;}
</style>

<script type="text/javascript" src="jquery-latest.js"></script>
<script type="text/javascript" src="autoresizeTextarea.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    txtareaAutoGrow("txtar1", "btnXpand1");
    txtareaAutoGrow("txtar2", "btnXpand2");
});
</script>
</head>

<body>
<p>
    <textarea cols="100" id="txtar1"></textarea>
    <input type="button" id="btnXpand1" value="Expand/Collapse" />
    <p>&nbsp;</p>
    <textarea cols="100" id="txtar2"></textarea>
    <input type="button" id="btnXpand2" value="Expand/Collapse" />
</p>
<p>
    <!--<input type="button" id="Heght" value="Height" />
    <input type="button" id="scrlHeight" value="Scroll Height" />
    <input type="button" id="btnXpand" value="Expand/Collapse" />-->
</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:56:08.460

不知道为什么它会在某些浏览器中工作，但据我所知，您将高度设置为 18，然后您正在检查它是否为 18 或以下，如果是，您正在设置它到18。由于设置了高度并且没有可见溢出，所以高度永远不会超过18，所以它不能工作。

如果您检查它是否小于 18 似乎对我来说工作正常？此外，仅缓存您在任何地方都使用的选择器可能不是一个坏主意：

```
function txtareaAutoGrow(txtar, clkBtn) {
    var txtA = $("#" + txtar);

    txtA.height(18).keyup(function() {
        if (txtA.height() < 18) {
            $(this).height(18);
        }
        else {
            $(this).height(txtA.prop("scrollHeight"));
            txtA.bind('paste', function() {
                setTimeout(function() {
                    txtA.height(txtA.prop("scrollHeight"));
                }, 100);
            });
        }
    });

    $("#" + clkBtn).click(function() {
        if (txtA.height() < 18) {
            txtA.height(txtA.prop("scrollHeight"));
        }
        else {
            txtA.height(18);
        }
    });
};

$(document).ready(function() {
    txtareaAutoGrow("txtar1", "btnXpand1");
    txtareaAutoGrow("txtar2", "btnXpand2");
});​ 
```

[**小提琴**](http://jsfiddle.net/SekM9/)

# vba - 无法在计划任务中使用 vba 关闭 Excel 应用程序

> ID：12107508
> 
> 赞同：1
> 
> 时间：2012-08-24T10:19:09.890
> 
> 标签：vba, excel, scheduled-tasks

我在 vba 中编写了一个代码，它适用于不同的`Workbooks`和`Worksheets`. 此代码必须在计划任务中执行。但是由于一个未知的原因，我遇到了问题：

当我手动执行它时，它可以正常工作并且excel会自行关闭。但是对于我的计划任务，Excel 会关闭所有内容`Workbooks`，`Worksheets`但仍保持打开状态。这里有我的代码：

```
 Set xlApp = GetObject(, "excel.application")
    Set wkbMe = xlApp.ActiveWorkbook
    test = False

    xlApp.DisplayAlerts = False
    xlApp.AskToUpdateLinks = False

    'Open files
    xlApp.Workbooks.Open Filename:=MarketDataPath & WbRiskedge, ReadOnly:=True
    xlApp.Workbooks.Open Filename:=MarketDataPath & WbMarketData, ReadOnly:=True
    Set WorksheetIncoming = xlApp.Workbooks(WbMarketData).Worksheets(wsIncoming)
    Set WorksheetMarketdata = xlApp.Workbooks(WbMarketData).Worksheets(WsMarketData)

    xlApp.Workbooks.Open Filename:=GTPath & WbGoodTime, ReadOnly:=True
    Cells.Copy
    WorksheetIncoming.Activate
    Range("A1").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                            :=False, Transpose:=False
    Workbooks(WbGoodTime).Close
    WorksheetMarketdata.Calculate
    Worksheets(wsMarketDataForWebsite).Calculate
    Worksheets(wsMarketDataForWebsite).Activate

    If test = False Then
        Application.Run "MarketEnv.xlsm!subCreateCSV"
    End If
    Workbooks(WbMarketData).Close , False
    Workbooks(WbRiskedge).Close , False
    xlApp.DisplayAlerts = True
    xlApp.AskToUpdateLinks = True
    ThisWorkbook.Save
    ThisWorkbook.Saved = True
    xlApp.Quit
    End Sub 
```

我尝试了在网上找到的不同解决方案，但没有任何效果。即使我只做：

```
 Set xlApp = GetObject(, "excel.application")
 xlApp.Quit
 End Sub 
```

我的 Excel 保持打开状态。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T15:32:51.770

好的，这似乎很啰嗦......但是这里有。

您看到的问题是因为在给定时间一台机器上可能有多个 Excel 应用程序实例。

当您手动运行文件时，您可能会使用默认行为，即当您直接打开工作簿时，它会在您已加载的 Excel 应用程序中打开。

这意味着当您使用：

```
Set xlApp = GetObject(, "excel.application") 
```

它实际上是返回当前的`Excel.Application`. 但是，当您通过计划任务加载它时，它会生成一个新`Excel.Application`的以处理您的任务。当它调用我引用的代码时，它最终引用了`Excel.Application`您已经打开的代码（可能）。

由于您计划的工作簿在不同的实例中`Excel.Application`运行，因此当您运行它时，`xlApp.Quit`它只会退出其他 Excel，而不是实际运行代码的那个。

如果您还想关闭您的自动 Excel，您需要添加`Application.Quit`到您的子程序的末尾。是的，我的意思是同时使用`xlApp.Quit`AND `Application.Quit`。

现在从技术上讲，当您加载新的 Excel 应用程序时，您可以打开多个 Excel 应用程序。如果要关闭 Excel 的所有实例，我知道的最简单的方法是通过 vbscript 调用这样的程序来终止所有这些实例，该程序会终止所有名为 excel.exe 的进程。注意我没有在 Win 7 上测试这个：

```
Dim objWMIService, objProcess, colProcess
Dim strComputer, strProcessKill, strFilePath
strComputer = "."
strProcessKill = "'excel.exe'" 

Set objWMIService = GetObject("winmgmts:" _
& "{impersonationLevel=impersonate}!\\" _
& strComputer & "\root\cimv2")

Set colProcess = objWMIService.ExecQuery _
("Select * from Win32_Process Where Name = " & strProcessKill)
For Each objProcess In colProcess
        objProcess.Terminate
Next
WScript.Quit 
```

编辑：我只是想补充一点，您可以通过执行以下操作手动复制计划任务的行为：

1.  已打开 Excel。
2.  浏览开始菜单并打开 Excel。
3.  在新的 Excel 实例中，打开您的工作簿。

或者

1.  已打开 Excel。
2.  运行以下`Excel.exe [path of workbook in quotes]`

编辑 2：由于您的要求，我编写了这个简短的 vbscript 文件，它将关闭所有打开的 Excel 应用程序，而不会破坏自动恢复。如果您还想避免任何“您要保存...”警报，请取消注释注释部分。

```
On Error Resume Next
Dim xlApp
Set xlApp = GetObject(, "Excel.Application")
Do While Err.Number <> 429
    'For each wb in xlApp.Workbooks
    '    wb.saved = true
    'next
    xlApp.Quit
    Set xlApp = Nothing
    Set xlApp = GetObject(, "Excel.Application")
Loop
Wscript.quit 
```

要运行它，只需在 Excel VBA 末尾包含以下内容。

```
Shell "wscript.exe [path of .vbs file]" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T14:01:45.137

我可以看到您使用 excel 应用程序打开了多个工作簿实例。您需要关闭所有工作簿实例才能获得普通的 excel 应用程序，然后退出它。

试试这个：（伪代码）

```
dim xlApp as Excel.Application
dim wBook as Excel.Workbook
dim wSheet as Excel.Worksheet

Set xlApp = new Excel.Application
Set wBook = xlApp.Workbooks.Add(wb_Path)
Set wSheet = wBook.Sheets(1)

wSheet.Range("A1").Value = "Hello this is a test from vbcode"
wbook.close saveChanges:= true
xlApp.quit 
```

上面的代码将打开您的工作簿。在您的工作表上写一条自定义消息保存更改并关闭。并且 xlapp 也将被终止/销毁。

# sqlite - 使用 RubyMine 将我的 ruby 程序连接到 SQLite 数据库

> ID：12107509
> 
> 赞同：0
> 
> 时间：2012-08-24T10:19:11.663
> 
> 标签：sqlite, rubymine

我正在编写一个 Ruby 程序来管理在大学开设的课程、与这些课程相关的模块以及在课程和模块上注册的学生。我正在使用 RubyMine 编写程序，现在我想将到目前为止我编写的内容连接到 SQLite 数据库，以检查它是否按预期工作。但我不太确定如何在 RubyMine 中执行此操作。

我打开了数据库工具窗口，它显示“未配置数据源”，并在窗口顶部显示两条“正在加载”消息。

如果我右键单击窗口，我会得到一些选项，其中一个是“添加数据源”，我可以从中添加“数据库数据源”或“DDL 数据源”。

我以前只写过一个 Ruby 程序（大约 10 个月到一年前），然后我使用命令行编写它，还使用命令行创建和编辑 SQLite 数据库。如何设置 SQLite 数据库以与我的 RubyMine 程序一起运行？

此外，SQLite 和 SQLite 3 之间是否存在巨大差异？有理由使用其中一个吗？人们会推荐我使用哪一个？

***编辑 24/08/2012 13:50***

我尝试从 RubyMine 的“工具”菜单中选择“运行 rake tast”选项，然后它要求我输入任务名称或其部分，我尝试输入“db:migrate”，但它说“找不到匹配项”。

知道我应该做什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:58:25.957

请[参考文档](http://www.jetbrains.com/ruby/webhelp/accessing-data-sources-via-the-database-console.html)，RubyMine 通过 JDBC 驱动连接数据库。您很可能想使用[SQLite 3 version](http://www.sqlite.org/version3.html)，因为它是目前的当前版本。[查看此视频](http://www.youtube.com/watch?v=P3C0iO1yqhk)以了解数据源功能的概述。

要将程序连接到不需要 JDBC 驱动程序的数据库，可以使用`sqlite3-ruby`gem 完成。

您还可以考虑一些 ORM，例如 Rails [ActiveRecord](http://guides.rubyonrails.org/active_record_querying.html)或[DataMapper](http://datamapper.org/)或[Sequel](http://sequel.rubyforge.org/)。

# c - 以下 C 程序的输出是什么？

> ID：12107510
> 
> 赞同：1
> 
> 时间：2012-08-24T10:19:14.173
> 
> 标签：c, pointers

我不知道编译器在做什么`++*p;`

谁能形象地解释一下这段代码的内存内部发生了什么？

```
int main()
{
    int arr[]={1,2,3,4};
    int *p;
    p=arr;
    ++*p;
    printf("%d",*p);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:25:49.563

答案应该是2

原因是 ++*p 实际上是将数组中的第一个成员增加 1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T10:31:20.093

您正在通过创建另一个指向该元素的 int 指针来递增该数组中的第一个`p`元素。线

```
 ++*p 
```

递增 p 指向的对象的值 - 在这种情况下，它是数组中的第一个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T10:25:52.450

让我们采取这一行：

```
++*p 
```

这将首先取消引用 p 指针，因此访问 arr[0]，然后递增它。

如果你现在打印 arr[0]，它将是 2。

然后打印 *p 与打印 arr[0] 相同，它等于 2。

尝试用 41 替换第一个元素，您的代码将打印 42。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T10:25:57.773

当你有一个指针`int *p`时， then`p`表示“内存地址`p`指向并且`*p`表示“内存地址的内容`p`指向”。`++`表示预增量，这意味着将值增加 1。由于一元运算符的关联性，例如`*`和`++`（前缀运算符）是从右到左的，并且比从右到左遍历时`*`更接近，在之前操作。因此表示“递增指向的值”，而不是“递增然后获取值”。更清楚写，但它的意思是一样的。`p``++``*``++``++*p``p``p``++(*p)`

要理解的是“增加指针”之间的区别，这意味着指向另一个值（例如`++p`）和“增加指针指向的值”（例如`++*p`）。

你可以解决这个问题，但这就是你理解它所需的所有信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T12:13:14.250

组成实际的内存地址并使用“ma”作为内存地址

在从 1000 开始的内存地址处，我们有 4 个连续的 4 字节 (sizeof(int) = 4) 插槽。每个槽包含数组初始值设定项中给定的整数值：

```
 arr
  ma1000 ... ma1015
  _____________________
  |   1|   2|   3|   4|   
  _____________________ 
```

arr 给出了 4 个 int 插槽的起始地址以及有多少个。p 保存一个整数的地址，并引用内存中位于位置 2000 的一个 8 字节插槽（假设我们在一个*64 位系统*上，其中指针为 8 个字节 - 64 个地址位/每字节 8 位）。语句之后p = arr, p 保存地址 1000

```
 p                     *p or arr[0]
  ma2000 .. ma2007      ma1000 .. ma1003
  __________            ________
  |    1000|            |    1 |
  __________            ________ 
```

*p 给出 p 指向的内存地址的值。p 保存内存地址 1000，内存地址 1000 包含 1，因此 *p 结果为 1。

++*p 表示要增加 p “指向”的 int 的值。p 保存内存地址 1000，它保存值 1。地址 1000 处的值然后从 1 变为 2

```
 arr
 ma1000 ... ma1015
 _____________________
 |   2|   2|   3|   4|   
 _____________________ 
```

printf 然后在 p“指向”的地址打印 int 值，即 2。

```
 p                     *p or arr[0]

  ma2000 .. ma2007       ma1000 .. ma1003
  ___________           ___________
  |     1000|           |        2|
  ___________           ___________ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-24T11:13:03.730

这是理解指针的一个非常基本的概念。

```
p = arr ; 
```

上面的代码将使指针“ p ”指向“ arr ”所指向的内容。“ arr ” 本身指向第一个元素。

```
*arr = *(arr + 0) = arr[0] = 1
*(arr + 1) = arr[1] = 2
*(arr + 2) = arr[2] = 3 
```

等等......所以现在当你这样做时`++(*arr) that means ++(1) = 2`

作为`p = arr`，您可以进行剩余的替换和数学运算。

# jsf - JSF 中的错误不清楚

> ID：12107511
> 
> 赞同：-2
> 
> 时间：2012-08-24T10:19:15.010
> 
> 标签：jsf

我正在使用来自[http://balusc.blogspot.com](http://balusc.blogspot.com)的 Tomahawk 进行演示文件上传。没关系，但在我的代码触发错误的一部分中，上次的这段代码运行正常。这是日志文件：

> StandardWrapperValve[FacesServlet]：PWC1406：Servlet FacesServlet 的 Servlet.service() 抛出异常 com.sun.el.parser.ParseException：遇到“。” 在第 2 行第 37 列。期待：`<IDENTIFIER>`... 在 com.sun.el.parser.ELParser.jj_consume_token(ELParser.java:2191) 在 com.sun.el.parser 的 com.sun.el.parser.ELParser.generateParseException(ELParser.java:2309)。 ELParser.DotSuffix(ELParser.java:1094) 在 com.sun.el.parser.ELParser.ValueSuffix(ELParser.java:1071) 在 com.sun.el.parser.ELParser.Value(ELParser.java:1016) 在 com .sun.el.parser.ELParser.Unary(ELParser.java:986) 在 com.sun.el.parser.ELParser.Multiplication(ELParser.java:750) 在 com.sun.el.parser.ELParser.Math(ELParser .java:670) 在 com.sun.el.parser.ELParser.Compare(ELParser.java:482) 在 com.sun.el.parser.ELParser.Equality(ELParser.java:376) 在 com.sun.el。 parser.ELParser.And(ELParser.java:320) 在 com.sun.el.parser.ELParser.Or(ELParser.java:264) 在 com.sun.el.parser.ELParser.Choice(ELParser.java:222)在 com.sun.el.parser 的 com.sun.el.parser.ELParser.Expression(ELParser.java:214)。ELParser.DeferredExpression(ELParser.java:152) 在 com.sun.el.parser.ELParser.CompositeExpression(ELParser.java:80) 在 com.sun.el.lang.ExpressionBuilder.createNodeInternal(ExpressionBuilder.java:177) 在 com .sun.el.lang.ExpressionBuilder.build(ExpressionBuilder.java:229) 在 com.sun.el.lang.ExpressionBuilder.createValueExpression(ExpressionBuilder.java:273) 在 com.sun.el.E​​xpressionFactoryImpl.createValueExpression(ExpressionFactoryImpl.java :98) 在 com.sun.jsftemplating.layout.descriptors.handler.Handler.getInputValue(Handler.java:197) 在 com.sun.com.sun.jsftemplating.component.ComponentUtil.resolveValue(ComponentUtil.java:608) jsftemplating.layout.descriptors.handler.HandlerContextImpl.getInputValue(HandlerContextImpl.java:142) 在 com.sun.jsftemplating.handlers.UtilHandlers.write(UtilHandlers.java:160) 在 sun.reflect.GeneratedMethodAccessor148。在 com.sun.jsftemplating.layout.descriptors.handler 的 java.lang.reflect.Method.invoke(Method.java:601) 的 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 的调用（未知来源）。 com.sun.jsftemplating.layout.descriptors.LayoutElementBase.dispatchHandlers 的 Handler.invoke(Handler.java:442)(LayoutElementBase.java:420) com.sun.jsftemplating.layout.descriptors.LayoutElementBase.dispatchHandlers(LayoutElementBase.java:第394章com.sun.webui.jsf.util 中的 javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875) 中的 .renderer.TemplateRenderer.encodeEnd(TemplateRenderer.java:139)。RenderingUtilities.renderComponent(RenderingUtilities.java:99) at com.sun.webui.jsf.renderkit.html.TableColumnRenderer.encodeChildren(TableColumnRenderer.java:188) at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)在 com.sun.webui.jsf.util.RenderingUtilities.renderComponent(RenderingUtilities.java:91) 在 com.sun.webui.jsf.renderkit.html.TableRowGroupRenderer.encodeChildren(TableRowGroupRenderer.java:199) 在 javax.faces.component .UIComponentBase.encodeChildren(UIComponentBase.java:845) at com.sun.webui.jsf.util.RenderingUtilities.renderComponent(RenderingUtilities.java:91) at com.sun.webui.jsf.renderkit.html.TableRenderer.encodeChildren(TableRenderer .java:168) 在 javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) 在 com.sun.jsftemplating.layout.descriptors.LayoutElementBase。com.sun.jsftemplating.layout.descriptors.LayoutElementBase.encodeChild 的 encodeChild(LayoutElementBase.java:551)(LayoutElementBase.java:555) com.sun.jsftemplating.layout.descriptors.LayoutElementBase.encodeChild(LayoutElementBase.java:555)在 com.sun.jsftemplating.layout.descriptors.LayoutElementBase.encodeChild(LayoutElementBase.java:555) 在 com.sun.jsftemplating.layout.descriptors.LayoutElementBase.encodeChild(LayoutElementBase.java:555) 在 com.sun.jsftemplating.layout .descriptors.LayoutComponent.encode(LayoutComponent.java:243) at com.sun.jsftemplating.layout.descriptors.LayoutElementBase.encode(LayoutElementBase.java:348) at com.sun.jsftemplating.layout.descriptors.LayoutDefinition.encode(LayoutDefinition .java:246) 在 com.sun.faces.lifecycle 的 com.sun.jsftemplating.layout.LayoutViewHandler.renderView(LayoutViewHandler.java:683)。RenderResponsePhase.execute(RenderResponsePhase.java:121) at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) at javax .faces.webapp.FacesServlet.service(FacesServlet.java:594) 在 org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java :343）在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217) 在 com.sun.webui.jsf.util.UploadFilter.doFilter(UploadFilter.java:233) 在 org.apache.catalina。 core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217) 在 org.apache.catalina.core.StandardWrapperValve。在 org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175) 在 org.apache 调用(StandardWrapperValve.java:279) .catalina.core.StandardPipeline.invoke(StandardPipeline.java:595) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161) 在 org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java :331) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231) at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317) at com。 sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195) 在 com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849) 在 com.sun.grizzly.http.ProcessorTask。 doProcess(ProcessorTask.java:第746章） (DefaultProtocolChain.java:137) 在 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104) 在 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90) 在 com.sun.grizzly.http。 HttpProtocolChain.execute(HttpProtocolChain.java:79) 在 com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54) 在 com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) 在 com.sun.grizzly .ContextTask.run(ContextTask.java:71) 在 com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) 在 com.sun.grizzly.util.AbstractThreadPool$Worker。在 java.lang.Thread.run(Thread.java:722) 处运行(AbstractThreadPool.java:513)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-24T10:27:20.343

确认您已在“WEB-INF/lib”中包含库“el-api-2.2.jar”和“el-impl-2.2.jar”。

问候，

# visual-studio-2010 - 以编程方式为 Sharepoint 项目确定 VS2010 中的项目类型 ( ProjectTypeGuids )

> ID：12107513
> 
> 赞同：2
> 
> 时间：2012-08-24T10:19:18.970
> 
> 标签：visual-studio-2010, sharepoint-2010, add-in, envdte, vs-extensibility

我使用 VS2010 和 Sharepoint 2010 项目。我有一个 VS 2010 插件，我需要以编程方式检测类型项目。

我编辑了我的 csproj（用于 Sharepoint 项目），我看到了这个 ProjectTypeGuids：

```
{BB1F664B-9266-4fd6-B973-E1E44974B511};{14822709-B5A1-4724-98CA-57A101D1B079};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC} 
```

任何已知项目类型指南的**完整**列表，包括 Sharepoint 项目？

如何在 C# 中以编程方式为我的 EnvDTE.Project 获取 ProjectTypeGuids？

参考：

已知项目类型指南列表
[http://www.mztools.com/articles/2008/mz2008017.aspx](http://www.mztools.com/articles/2008/mz2008017.aspx)

Visual Studio项目文件中ProjectTypeGuids标签的意义是什么
[http://social.msdn.microsoft.com/Forums/en/vsx/thread/d9d05cdc-96a1-4044-95d8-a4f8885a660a](http://social.msdn.microsoft.com/Forums/en/vsx/thread/d9d05cdc-96a1-4044-95d8-a4f8885a660a)

[Visual Studio项目文件中ProjectTypeGuids标签的意义是什么](https://stackoverflow.com/questions/2911565/what-is-the-significance-of-projecttypeguids-tag-in-the-visual-studio-project-fi)

[http://www.mztools.com/articles/2007/MZ2007016.aspx](http://www.mztools.com/articles/2007/MZ2007016.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:22:07.353

**卡洛斯·J·昆特罗：**

看：

HOWTO：从加载项获取 Visual Studio 项目的项目风格（子类型）

[http://www.mztools.com/Articles/2007/MZ2007016.aspx](http://www.mztools.com/Articles/2007/MZ2007016.aspx)

没有完整列表，因为每个人都可以创建新的项目类型，这就是使用 GUID 的原因。

您可以创建 SharePoint 2010 项目并获取指南，这就是我获得该列表的方式。

**马蒂亚斯·赫伯：**

如果您可以获得 IVsSolution 实例，则可以拥有构成您的项目的所有 GUID：

```
 public bool IsTypedProject(IVsSolution solution, EnvDTE.Project project)
        {
            IVsHierarchy hierarchy;
            solution.GetProjectOfUniqueName(project.UniqueName, out hierarchy);
            IVsAggregatableProjectCorrected AP;
            AP = hierarchy as IVsAggregatableProjectCorrected;
            string projTypeGuids = string.Empty;
            if (AP != null)
            {
                AP.GetAggregateProjectTypeGuids(out projTypeGuids);
                if (projTypeGuids.ToUpper().Contains("YOUR_GUID".ToUpper()))
                {
                    return true;
                }
            }

            return false;
        } 
```

也许您可以请求这样的服务：

```
(IVsSolution)ServiceProvider.GetService(typeof(SVsSolution)) 
```

**参考资料：**
[http ://social.msdn.microsoft.com/Forums/da-DK/vsx/thread/bf18037e-479a-4ca8-ae64-81ee39652d73](http://social.msdn.microsoft.com/Forums/da-DK/vsx/thread/bf18037e-479a-4ca8-ae64-81ee39652d73)

# java - 将两个单独的 Set 转换为二维数组

> ID：12107523
> 
> 赞同：0
> 
> 时间：2012-08-24T10:20:07.230
> 
> 标签：java, swing, collections, jtable, set

我有两组字符串，每组都采用以下格式：

```
Set1(Names)  Set2(Sizes)

Pics         450 KB
Videos       50 MB
Music        32 MB 
```

这两个 Set 是 LinkedHashSets，所以顺序是有保证的。集合也保证大小相同。

我需要以上述格式在 JTable 中显示这两个集合。自然，最简单的方法是创建一个二维数组，但我对每个数组的顺序感到困惑。

最好的方法是什么？理想情况下，它不需要遍历集合，但通常，集合的大小小于 10。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T22:04:20.517

您不需要创建 2D 数组 - 请参阅[DefaultTableModel.addColumn](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/DefaultTableModel.html#addColumn%28java.lang.Object,%20java.lang.Object%5B%5D%29)。所以你可以使用：

```
JTable table = new JTable();
DefaultTableModel model = (DefaultTableModel)table.getModel();
model.addColumn("Names", s1.toArray(new String[0]));
model.addColumn("Sizes", s2.toArray(new String[0])); 
```

抱歉，如果语法稍有偏差 - 现在不在 IDE 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:40:13.343

```
Set<String> namesSet = ...;
Set<String> sizesSet = ...;
String[] names = namesSet.toArray(new String[namesSet.size()]);
String[] sizes = sizesSet.toArray(new String[sizesSet.size()]);
String[][] namesAndSizes = {names, sizes}; 
```

# eclipse - 访问 Eclipse 可部署插件中的资源

> ID：12107524
> 
> 赞同：2
> 
> 时间：2012-08-24T10:20:11.787
> 
> 标签：eclipse, plugins, resources

我正在开发一个 Eclipse 插件。在我的插件中，我有以下代码：

```
Bundle bundle = Platform.getBundle("org.eclipse.acceleo.EcoreDiff2EDelta");
URL fileURL = bundle.getEntry("src/metamodel/EcoreDiff.ecore");
String uri = null;
try {
        uri = FileLocator.resolve(fileURL).getFile();
    } catch (IOException e1) {
        e1.printStackTrace();
    }

    Resource resource = resourceSet.getResource(URI.createURI(uri), true); 
```

此代码访问位于我的插件中的 src/metamodel 文件夹中的资源 (EcoreDiff.ecore)。当我通过右键单击项目文件夹-> 运行方式-> eclipse 应用程序运行插件时，一切正常。但是，如果我将插件导出为“可部署插件和片段”，我会得到下面的堆栈跟踪，这基本上意味着它找不到 EcoreDiff.ecore 文件。这两天我一直在尝试解决这个问题，我不明白这是怎么回事......

```
java.lang.reflect.InvocationTargetException
at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:421)
at org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:507)
at org.eclipse.ui.internal.progress.ProgressMonitorJobsDialog.run(ProgressMonitorJobsDialog.java:275)
at org.eclipse.ui.internal.progress.ProgressManager$3.run(ProgressManager.java:960)
at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
at org.eclipse.ui.internal.progress.ProgressManager.busyCursorWhile(ProgressManager.java:995)
at org.eclipse.ui.internal.progress.ProgressManager.busyCursorWhile(ProgressManager.java:970)
at org.eclipse.ui.internal.progress.ProgressManager.run(ProgressManager.java:1166)
at org.eclipse.acceleo.EcoreDiff2EDelta.ui.popupMenus.AcceleoGenerateEcoreDiff2EDeltaAction.run(AcceleoGenerateEcoreDiff2EDeltaAction.java:91)
at org.eclipse.ui.actions.ActionDelegate.runWithEvent(ActionDelegate.java:70)
at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:241)
at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Caused by: java.lang.NullPointerException
at org.eclipse.core.internal.runtime.Activator.getURLConverter(Activator.java:321)
at org.eclipse.core.runtime.FileLocator.resolve(FileLocator.java:227)
at org.eclipse.acceleo.EcoreDiff2EDelta.main.Generate.registerPackages(Generate.java:359)
at org.eclipse.acceleo.engine.service.AbstractAcceleoGenerator.initialize(AbstractAcceleoGenerator.java:422)
at org.eclipse.acceleo.EcoreDiff2EDelta.main.Generate.<init>(Generate.java:97)
at org.eclipse.acceleo.EcoreDiff2EDelta.ui.common.GenerateAll.doGenerate(GenerateAll.java:90)
at org.eclipse.acceleo.EcoreDiff2EDelta.ui.popupMenus.AcceleoGenerateEcoreDiff2EDeltaAction$1.run(AcceleoGenerateEcoreDiff2EDeltaAction.java:76)
at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Root exception:
java.lang.NullPointerException
at org.eclipse.core.internal.runtime.Activator.getURLConverter(Activator.java:321)
at org.eclipse.core.runtime.FileLocator.resolve(FileLocator.java:227)
at org.eclipse.acceleo.EcoreDiff2EDelta.main.Generate.registerPackages(Generate.java:359)
at org.eclipse.acceleo.engine.service.AbstractAcceleoGenerator.initialize(AbstractAcceleoGenerator.java:422)
at org.eclipse.acceleo.EcoreDiff2EDelta.main.Generate.<init>(Generate.java:97)
at org.eclipse.acceleo.EcoreDiff2EDelta.ui.common.GenerateAll.doGenerate(GenerateAll.java:90)
at org.eclipse.acceleo.EcoreDiff2EDelta.ui.popupMenus.AcceleoGenerateEcoreDiff2EDeltaAction$1.run(AcceleoGenerateEcoreDiff2EDeltaAction.java:76)
at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T20:15:26.240

在您部署的插件中，“元模型”应该是 jar 根目录中的一个文件夹，如果它在您的 build.properties 中指定的话。如果你在罐子里看，它在那里吗？

然后尝试：

```
URL url = bundle.getEntry("metamodel/EcoreDiff.ecore");
URL fileURL = org.eclipse.core.runtime.FileLocator.toFileURL(URL); 
```

# lucene - Lucene 搜索的复杂性

> ID：12107527
> 
> 赞同：12
> 
> 时间：2012-08-24T10:20:37.183
> 
> 标签：lucene, complexity-theory

如果我编写和使用 Lucene 执行搜索的算法，我该如何说明它的计算复杂性？我知道 Lucene 使用 tf*idf 评分，但我不知道它是如何实现的。我发现 tf*idf 具有以下复杂性：

```
O(|D|+|T|) 
```

其中 D 是文档集，T 是所有术语的集。

但是，我需要有人可以检查这是否正确并解释我为什么。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-31T10:19:09.957

Lucene 基本上使用`Vector Space Model`带有方案的（VSM）`tf-idf`。因此，在标准设置中，我们有：

*   一个文档集合，每个文档都表示为一个向量
*   文本查询也表示为向量

我们确定`K`查询中向量空间得分最高的集合文档`q`。通常，我们按照分数降序查找这 K 个 top 文档；例如，许多搜索引擎使用 K = 10 来检索和排序十个最佳结果的第一页。

计算向量空间分数的基本算法是：

```
float Scores[N] = 0
Initialize Length[N]
for each query term t
do calculate w(t,q) and fetch postings list for t (stored in the index)
    for each pair d,tf(t,d) in postings list
    do Scores[d] += wf(t,d) X w(t,q)  (dot product)
Read the array Length[d]
for each d
do Scored[d] = Scores[d] / Length[d]
return Top K components of Scores[] 
```

在哪里

*   数组`Length`保存每个文档的长度（归一化因子）`N` ，而数组`Scores`保存每个文档的分数。
*   `tf`是文档中某个词的词频。
*   `w(t,q)`是给定术语的已提交查询的权重。请注意，查询被视为 a`bag of words`并且可以考虑权重向量（就好像它是另一个文档一样）。
*   `wf(d,q)`是查询和文档的对数项权重

如此处所述：[向量点积的复杂度，](https://stackoverflow.com/questions/3744094/time-and-space-complexity-of-vector-dot-product-computation)向量点积为`O(n)`。这里的维度是我们词汇表中术语的数量：`|T|`，其中`T`是术语集。

因此，该算法的时间复杂度为：

```
O(|Q|· |D| · |T|) = O(|D| · |T|) 
```

我们认为 |Q| 固定，其中`Q`是查询中的单词集（平均大小很小，平均一个查询有 2 到 3 个词）并且`D`是所有文档的集合。

但是，对于搜索，这些集合是有界的，并且索引不会经常增长。因此，结果是，使用 VSM 的搜索速度非常快（当搜索量很大时`T`，`D`搜索速度真的很慢，必须找到一种替代方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-15T13:21:10.177

> `D`是所有文档的集合

在（老实说，旁边）VSM 之前，调用布尔检索。因此，我们可以说`d`只匹配文档（几乎。好的。在最好的情况下）。由于`Scores`优先级队列（至少在 doc-at-time-scheme 中）是在堆上构建的，因此将每个队列`d`放入 take 中`log(K)`。因此我们可以将其估计为`O(d·log(K))`，这里我省略了，`T`因为预计查询很短。（否则，你就有麻烦了）。

[http://www.savar.se/media/1181/space_optimizations_for_total_ranking.pdf](http://www.savar.se/media/1181/space_optimizations_for_total_ranking.pdf)

# android - ActionBarSherlock 在 android 2.x 下不显示所有 menuItem

> ID：12107528
> 
> 赞同：0
> 
> 时间：2012-08-24T10:20:43.190
> 
> 标签：android, menu, android-actionbar, actionbarsherlock, menuitem

我对 ActionBarSherlock 有一些问题

在android 4上没关系： ![在android 4上没问题](../Images/8233ebb983f97af54c9ad51747718898.png)

但是在安卓 2.3 上 ![在此处输入图像描述](../Images/19fa0f916ff10fcda2efeaf9ffded237.png)

缺少一个选项！！！并且没有显示子菜单来显示此选项。

这就是我创建菜单的方式：

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {

    menu.add("Controls")
        .setIcon(R.drawable.ic_launcher)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
    menu.add("Theme")
    .setIcon(R.drawable.ic_launcher)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
    menu.add("Advanced")
    .setIcon(R.drawable.ic_launcher)
    .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
    menu.add("Profils")
    .setIcon(R.drawable.ic_launcher)
    .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
    menu.add("Save")
    .setIcon(R.drawable.ic_launcher)
    .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

    return true;
} 
```

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T15:56:46.867

在带有硬件菜单按钮的设备上，您需要按下硬件菜单按钮才能查看溢出选项。软菜单按钮仅在没有硬件按钮的设备上可用。

# node.js - 需要在 node.js 中进行测试

> ID：12107531
> 
> 赞同：0
> 
> 时间：2012-08-24T10:20:46.077
> 
> 标签：node.js, testing

我对 javascript 测试很陌生，在我工作的地方，我们为我们的项目使用 node.js。

我完成了我们的一个项目，但我只使用了手动测试。我需要发展我的测试技能，但我不知道如何提高它。

我需要任何测试工具来运行我的 node.js 项目，你能告诉我如何改进和学习新的测试技能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:36:15.913

看看[Mocha 测试框架](http://visionmedia.github.com/mocha/)。我认为这是目前测试 node.js 应用程序的最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:25:51.607

如果您使用 Node 开发 Web 应用程序，您可以使用其中一种无头浏览器来测试用户交互（以及 ajax） ，例如[PhantomJS](http://phantomjs.org/)和[Zombie](http://zombie.labnotes.org/)。

[在Node Toolbox](http://toolbox.no.de/categories/Testing)中环顾四周，您会发现许多用于创建测试的框架和实用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T19:48:39.767

这是对 Node.js 的一些不同单元测试工具的一个很好的概述：

[在 Node.Js 中编写测试的 3 个快速提示（经过一些漫谈）](http://niallohiggins.com/2012/03/28/3-quick-tips-for-writing-tests-in-nodejs/)

# php - 在 PHP 中使用 REST 服务的移动应用程序 Web 服务

> ID：12107533
> 
> 赞同：0
> 
> 时间：2012-08-24T10:21:03.917
> 
> 标签：php, web-services, rest, restful-architecture

我必须在 Rest Service 中为移动应用程序（iPhone 和 Android）创建一个 web 服务。此应用程序基于一个电子出版物。我尝试了一些基于 SLIM 的 REST 服务。我可以将数据添加到数据库中，也可以从数据库中检索数据。

我使用以下链接开发 REST 服务

```
http://phpmaster.com/writing-a-restful-web-service-with-slim/ 
```

我可以通过 html 中的表单添加新数据，但我想使用 url 添加数据。但我不能。这是我使用的代码

```
<form action="http://localhost/samples/Restfull/samp5/index.php/custom" method="POST">
 <input type="hidden" name="_METHOD" value="POST">
 Name: <input type="text" name="Customer_Name"><br>
 Mobile: <input type="text" name="Customer_Mobile"><br>
 Email: <input type="text" name="Customer_Email"><br>
 Address: <textarea name="Customer_Address"></textarea>
 <br>
 <input type="submit" value="Submit">
</form> 
```

当我尝试通过此表单时，操作已成功完成。但我想把它作为网络服务。我尝试通过 url 添加数据但失败，同时使用连接查询删除或获取数据也不起作用。

我使用以下函数从 Db 检索数据

```
$app->get("/custom/:id", function ($id) use ($app, $db) {
    $app->response()->header("Content-Type", "application/json");
    $custom = $db->Registration()->where("Registration_Id", $id);
    if ($data = $custom->fetch()) {
        echo json_encode(array(
            "custom_Name" => $data["Customer_Name"],
            "custom_Mobile" => $data["Customer_Mobile"],
            "custom_Email" => $data["Customer_Email"],
            "custom_Address" => $data["Customer_Address"]
            ));
    }
    else{
        echo json_encode(array(
            "status" => false,
            "message" => " $id does not exist"
            ));
    }
}); 
```

这也很有效。

是否有任何其他方式或好的样品可用。不仅在 Slim 中。我需要集成 REST 服务。请就此提出建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:44:16.683

好的，我认为这是您需要开始的地方:)

如果您要使用 url 来设置数据，那么您必须使用 HTTP get 方法。如果您使用 java 开发 RESTful 服务，我建议您使用[Jersey](http://jersey.java.net/)（JAX-RS (JSR 311) Reference Implementation for building RESTful Web services。）

在您的项目服务中，您可以使用 HTTP get 方法定义方法

```
@Stateless
@Path("/basepath")
@javax.ws.rs.Produces("application/json")
@javax.ws.rs.Consume("application/json")
public class RestService {

    @Path("/{index}")
    public String M(@PathParam("index") String index){
      //you can use index value here

    }

} 
```

因此，在 URL 中的“basepath/”之后，您可以使用该值。

如果您想开始使用 RESTful 服务，使用 Netbeans 非常容易。以下是一些可能对您有所帮助的链接。

[netbeans.org/kb/docs/websvc/rest.html](http://netbeans.org/kb/docs/websvc/rest.html)
[netbeans.org/kb/docs/websvc/intro-ws.html](http://netbeans.org/kb/docs/websvc/intro-ws.html)

# python - pyqt4：如何查看 QWebPage？

> ID：12107536
> 
> 赞同：1
> 
> 时间：2012-08-24T10:21:09.290
> 
> 标签：python, qt, qt4, pyqt, pyqt4

我是 QT 的新手，发现了一些代码可以满足我的需求（一些网页浏览的东西），它使用 QWebPage 来获取页面，但它不会让窗口看到它。我尝试使用来自俄罗斯维基的示例（它有效）：

```
import sys

from PyQt4.QtGui import *
application = QApplication(sys.argv)

widget = QWidget()

widget.resize(320, 240)
widget.setWindowTitle("Hello, World!")  
widget.show()

sys.exit(application.exec_()) 
```

而这点：QWebPage继承QObject，QObject继承QWidget

但对于

```
browser = QWebPage()
browser.show() 
```

我明白了`AttributeError: 'QWebPage' object has no attribute 'show'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:25:50.343

> QObject 继承 QWidget

不，它没有 -`QWidget`继承`QObject`，而不是相反。`QWebPage`只是一个数据对象。您需要一个[QWebView](http://pyqt.sourceforge.net/Docs/PyQt4/qwebview.html)继承`QWidget`并且是用于显示 QWebPages 的小部件：

```
browser = QWebView()
browser.show() 
```

# parsing - 在编写基于 LR(0) 算法的解析器的上下文中，魔术步骤和 tau 步骤是什么？

> ID：12107537
> 
> 赞同：2
> 
> 时间：2012-08-24T10:21:13.980
> 
> 标签：parsing, compiler-construction, lr

我必须执行的任务指定：

> 首先定义在魔术或 tau 步骤的帮助下执行减班阶段的非确定性机器

但是，我在 Compilers:Principles, Techniques & Tools (Aho et. al) 或在互联网上搜索时找不到任何关于什么是魔法或 tau 步骤的参考。

请有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T05:01:01.780

我认为它们只是意味着您应该假设实际的 shift-reduce 步骤是一个黑匣子，并定义它周围的所有内容。根据谷歌的说法，Tau 是一种黑魔法。

# c# - 如何检查 Youtube 视频何时在 c# 中播放完毕？

> ID：12107538
> 
> 赞同：2
> 
> 时间：2012-08-24T10:21:22.903
> 
> 标签：c#, javascript, youtube, youtube-api

我将 Shockwave Player 嵌入到 C# .NET 应用程序中。当前播放的视频播放完毕后，是否可以从 Youtube 播放器触发事件​​？Youtube API 没有给我任何类似的东西，嵌入到应用程序中的 Shockwave Player 也是如此。被触发的唯一事件是在 Javascript 中，但我找不到将它们转发到应用程序本身的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:29:17.883

正如 Jeff Posnick 和 Tom Roggero 所提到的，您需要在 javascript 中执行此操作，但没有什么可以阻止您让 javascript 在该事件上将信息 ping 回您的服务器。

您要查找的事件是 onStageChange，当状态变为 0（结束）时，播放已到达视频结尾。在您的 javascript 事件处理程序中，您可以向服务器发出 ajax 请求。

这是一个使用 Youtube Player API 的简洁页面：[https](https://developers.google.com/youtube/youtube_player_demo) ://developers.google.com/youtube/youtube_player_demo和 API 参考：[https ://developers.google.com/youtube/js_api_reference#Playback_status](https://developers.google.com/youtube/js_api_reference#Playback_status)

# google-api - Google Api：无法使用“updated-min”获取更新的配置文件

> ID：12107539
> 
> 赞同：0
> 
> 时间：2012-08-24T10:21:30.990
> 
> 标签：google-api, google-contacts-api

我尝试使用“updated-min”查询参数获取我域中用户的更新用户配置文件，但我仍然获得了域中所有用户的列表，我使用了以下 URL：

[https://www.google.com/m8/feeds/profiles/domain/DomainName/full?updated-min=2012-08-24T00:00:00&access_token=](https://www.google.com/m8/feeds/profiles/domain/DomainName/full?updated-min=2012-08-24T00:00:00&access_token=) "+access_token+"&v=3.0"

如果我遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:47:11.777

我相信 updated-min 参数不适用于配置文件数据 api。它仅适用于联系人 API。[https://developers.google.com/google-apps/contacts/v3/#retrieving_contacts_using_query_parameters](https://developers.google.com/google-apps/contacts/v3/#retrieving_contacts_using_query_parameters)

如果您查看文档，您会看到 Contact APi 支持它。但它在文档中的任何地方都没有提到对 Profile 数据 api 的支持。

# java - 如何动态更改 JXTreeTable 中特定单元格的颜色

> ID：12107545
> 
> 赞同：1
> 
> 时间：2012-08-24T10:21:53.017
> 
> 标签：java, swing, renderer, swingx, jxtreetable

我现在`JXTreeTable`用于制作树表结构，我想动态更改特定单元格的颜色。如何更改单元格的颜色？

我发现这段代码可以改变颜色，但这不起作用。

这是代码：

```
leftTree.setDefaultRenderer(Object.class, new DefaultTableCellRenderer() {

     public Component getTableCellRendererComponent(JTable table, Object value,
          boolean isSelected, boolean hasFocus, int row, int column) {
     Component c = super.getTableCellRendererComponent(table, value, 
          isSelected, hasFocus, row, column);          
      if(Integer.parseInt(rowvalue[0])==row && column==0) {
         c.setBackground(Color.red);
      }
        return c;
      }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:55:26.867

使用荧光笔。

```
addHighlighter(new ColorHighlighter()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:55:09.760

如果单元格包含带有颜色名称的文本，则可以修改该值。

```
import java.awt.Color;
import java.awt.Component;

import javax.swing.DefaultCellEditor;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.DefaultTableCellRenderer;

public class MainClass extends JFrame {
  ColorName colors[] = { new ColorName("Red"), new ColorName("Green"), new ColorName("Blue"),
      new ColorName("Black"), new ColorName("White") };

  public MainClass() {
    super("Table With DefaultCellEditor Example");
    setSize(500, 300);
    setDefaultCloseOperation(EXIT_ON_CLOSE);

    JTable table = new JTable(new AbstractTableModel() {
      ColorName data[] = { colors[0], colors[1], colors[2], colors[3], colors[4], colors[0],
          colors[1], colors[2], colors[3], colors[4] };

      public int getColumnCount() {
        return 3;
      }

      public int getRowCount() {
        return 10;
      }

      public Object getValueAt(int r, int c) {
        switch (c) {
        case 0:
          return (r + 1) + ".";
        case 1:
          return "Some pithy quote #" + r;
        case 2:
          return data[r];
        }
        return "Bad Column";
      }

      public Class getColumnClass(int c) {
        if (c == 2)
          return ColorName.class;
        return String.class;
      }

      public boolean isCellEditable(int r, int c) {
        return c == 2;
      }

      public void setValueAt(Object value, int r, int c) {
        data[r] = (ColorName) value;
      }
    });

    table.setDefaultEditor(ColorName.class, new DefaultCellEditor(new JComboBox(colors)));
    table.setDefaultRenderer(ColorName.class, new TableCellRenderer());
    table.setRowHeight(20);
    getContentPane().add(new JScrollPane(table));
  }

  public static void main(String args[]) {
    MainClass ex = new MainClass();
    ex.setVisible(true);
  }

  public class ColorName {
    String cname;

    public ColorName(String name) {
      cname = name;
    }

    public String toString() {
      return cname;
    }
  }

  public class TableCellRenderer extends DefaultTableCellRenderer {

    public Component getTableCellRendererComponent(
       JTable table, Object value, 
       boolean isSelected, boolean hasFocus, 
       int row, int col)  
    {
       // get the DefaultCellRenderer to give you the basic component
       Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, col);
       // apply your rules
       if (value.toString().equals("Red"))
          c.setBackground(Color.RED);
       else  
          c.setBackground(Color.GRAY);
       return c;
    }
 }
} 
```

# c++ - 如何访问具有 2 个以上元素的 std::map 中的特定元素？

> ID：12107547
> 
> 赞同：-2
> 
> 时间：2012-08-24T10:21:59.050
> 
> 标签：c++, stdmap

我正在尝试从具有两个以上元素的 std::map 中访问特定元素。这是一个例子：

```
std::map <int, CString, CString, CString> map;

//Initialise

map[0] = _T("stuff1"), _T("stuff2"), _T("stuff3");

//now if I just want to access stuff3 is it this:

CString str = map[0][2];

//or something more like this?

CString str = map[0]. ??? 
```

任何帮助都会非常感谢。

编辑：谢谢抱歉，第一次使用地图，我想知道为什么我找不到关于 std::map 的任何信息，里面有更多元素。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T10:27:49.863

你试过编译这个吗？它不应该。您只能为每个元素创建一个只有 1 个键和 1 个值的映射。

但是值可以是复合的，所以你可以写

```
struct ValueType {
 CString v1;
 CString v2;
 CString v3;
}
std::map <int, ValueType> map; 
```

并访问元素，如`map[somekey].v3;`

要在这样的地图中插入一个值，您必须编写

```
ValueType strings = {"1","2","3"};
map.insert(999, strings); 
```

或者您可以创建一个辅助函数（即`void addToMap(std::map <int, ValueType> &map, CSting const& v1, CString const& v2, CString const& v3)`），它会以更方便的方式填充您的地图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T10:27:55.490

`std::map <int, CString, CString, CString> map;`是非法的。

使用 a`std::multimap`或 a `std::map<int,std::vector<CString> >`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T10:27:48.583

我相信这是您正在寻找的

```
std::map <int, std::list<CString> > myMap; 
```

然后您将访问`myMap[0]`，然后访问返回的每个元素`std::list<CString>`

# indexing - Cassandra 二级索引 get_indexed_slices 超时

> ID：12107549
> 
> 赞同：1
> 
> 时间：2012-08-24T10:22:06.753
> 
> 标签：indexing, cassandra

我正在使用带有 2 个二级索引的 Cassandra 0.8，用于“DeviceID”和“DayOfYear”等列。我有这两个索引，以便在某个日期范围内检索设备的数据。每当我获得日期过滤器时，我都会将其转换为 DayOfYear 并使用 .net Thrift API 使用索引切片进行搜索。目前我也无法升级数据库。

我的问题是我通常没有任何问题使用 get_indexed_slices 查询当前日期（使用当前日期）检索行。但是，每当我查询一年中的昨天（这是索引列之一）时，我第一次进行查询时就会超时。大多数情况下，它会在我第二次查询时返回，而在第三次查询时返回 100%。

这两个列都在列族中创建为双数据类型，我通常每分钟获得 1 条记录。我在集群中有 3 个节点，并且 nodetool 报告表明节点已启动并正在运行，尽管来自 nodetool 的负载分布报告看起来像这样。

 ``Starting NodeTool Address DC Rack Status State Load Owns
xxx.xx.xxx.xx datacenter1 rack1 Up Normal 7.59 GB 51.39%
xxx.xx.xxx.xx datacenter1 rack1 Up Normal 394.24 MB 3.81%
xxx.xx.xxx.xx datacenter1 rack1 Up Normal 4.42 GB 44.80%` 我在 YAML 中的配置如下。

`hinted_handoff_enabled: true
max_hint_window_in_ms: 3600000 # one hour
hinted_handoff_throttle_delay_in_ms: 50
partitioner: org.apache.cassandra.dht.RandomPartitioner
commitlog_sync: periodic
commitlog_sync_period_in_ms: 120000
flush_largest_memtables_at: 0.75
reduce_cache_sizes_at: 0.85
reduce_cache_capacity_to: 0.6
concurrent_reads: 32
concurrent_writes: 24
sliced_buffer_size_in_kb: 64
rpc_keepalive: true
rpc_server_type: sync
thrift_framed_transport_size_in_mb: 15
thrift_max_message_length_in_mb: 16
incremental_backups: true
snapshot_before_compaction: false
column_index_size_in_kb: 64
in_memory_compaction_limit_in_mb: 64
multithreaded_compaction: false
compaction_throughput_mb_per_sec: 16
compaction_preheat_key_cache: true
rpc_timeout_in_ms: 50000
index_interval: 128`

有什么我可能会丢失的吗？配置有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:17:34.227

将您的数据复制到另一个列族中，其中键是您的搜索数据。行切片更快

就我个人而言，我从来没有在生产环境中使用二级索引。或者我遇到了超时问题，或者二级索引检索数据的速度低于插入的数据量。我认为这与不按顺序读取数据和 HD 寻道时间有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:42:41.220

如果你来自关系模型，playOrm 也一样快，你可以在 noSQL 存储上建立关系，但你只需要对非常大的表进行分区。如果你这样做了，你就可以使用“可扩展的 JQL”来做你的事情

@NoSqlQuery(name="findJoinOnNullPartition", query="PARTITIONS t(:partId) select t FROM TABLE as t INNER JOIN t.security as s where s.securityType = :type and t.numShares = :shares")

IT 还具有基本 ORM 的 @ManyToOne、@OneToMany 等注释，尽管在 noSQL 中有些东西的工作方式不同，但很多都是相似的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-02T10:46:19.963

我终于以不同的方式解决了我的问题。事实上，我意识到问题出在我的数据模型上。

问题的出现是因为我们来自 RDBMS 背景。我稍微重构了数据模型，现在，我得到了更快的响应。`

# sql - 根据条件使用 Join

> ID：12107550
> 
> 赞同：2
> 
> 时间：2012-08-24T10:22:06.710
> 
> 标签：sql, join

谁能解释一下我们如何根据条件使用加入。假设我正在根据一个条件过滤数据，现在我担心的是，如果一个特定的 BIT 类型参数值为 1，那么数据集包括另一个连接，否则返回与之前相同。这是三个表 A、B、C 现在我想制作一个具有 @bool 位参数的 proc

```
if @bool=0
then  
select A.* from A 
inner join B on B.id=A.id
and if @bool=1 
then 
select A.* from A
INNER JOIN B on B.id=A.id
inner join C on C.id=A.id 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:31:27.337

你所拥有的东西（肯定是在 MS SQL Server 中的 SPROC 中）与次要的 mods 一起工作。

```
if @bool=0 then  
   select A.* from A 
   inner join B on B.id=A.id
else if @bool=1 then -- Or just else if @boll is limited to [0,1]
   select A.* from A
   INNER JOIN B on B.id=A.id
   inner join C on C.id=A.id 
```

但是，需要注意的是，SQL 参数嗅探将缓存它下行的第一个路径的计划，这对于通过代码的其他路径不一定是最佳的。

此外，如果您确实对您的 proc 采用这种“多重替代查询”方法，通常最好确保返回的列名和类型在所有情况下都是相同的（您的查询很好，因为它是 A.*）。

**编辑** 假设您使用的是 SQL Server，另一种方法是使用动态 sql：

```
DECLARE @sql NVARCHAR(MAX)
SET @sql = N'select A.* from A 
             inner join B on B.id=A.id'

IF @bool = 1
    SET @sql = @sql + N' inner join C on C.id=A.id'

sp_executesql @sql 
```

如果您需要添加过滤器等，请查看这篇文章：[动态/以编程方式将 WHERE 子句添加到 SQL](https://stackoverflow.com/questions/11329823/add-where-clauses-to-sql-dynamically-programmatically)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:07:33.963

尝试以下查询

```
SELECT A.*
FROM A
INNER JOIN B on B.id=A.id
INNER JOIN C on C.id=A.id and @bool=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T10:25:17.647

您使用联合执行此操作：

```
SELECT A.* 
FROM A 
    INNER JOIN B on B.id=A.id 
WHERE bool = 0

UNION ALL

SELECT A.* 
FROM A 
    INNER JOIN B on B.id=A.id 
    INNER JOIN C on C.id=A.id 
WHERE bool = 1 
```

我假设它`bool`存储在 table`A`或`B`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T10:30:48.390

```
select A.* from A
inner join B on B.id = A.id
left outer join C on C.id = A.id and @bool = 1
where (@bool = 1 and C.id is not null) or @bool = 0 
```

可以说， “激活”左外连接，并通过在子句`@bool = 1`中应用它实际上将其转换为内连接。`WHERE`如果`@bool = 0`则左外连接不会从 C 中返回任何内容并移除`WHERE`限制。

# android - 具有非特定时间间隔的 AlarmManager

> ID：12107554
> 
> 赞同：1
> 
> 时间：2012-08-24T10:22:19.290
> 
> 标签：android, alarmmanager

谁能告诉我如何开发一个`AlarmManager`以非指定时间间隔自我报告的方法？

例如，第一个闹钟是凌晨 12:00，第二个闹钟是凌晨 1:00，第三个闹钟是凌晨 3:00，第四个闹钟是早上 8:00，第五个闹钟是第二天，第六个闹钟是两天后会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:47:26.700

Here is the solution that I have got. `alarmtTime` is a `String` array with time in Unix time stamp.

```
for(int i =0; i < alarmtTime.length; i++) {
    Intent myIntent = new Intent(MeetMeInvitation.this, MyAlarmService.class);
    pendingIntent = PendingIntent.getService(MeetMeInvitation.this, i, myIntent, 0);
    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(System.currentTimeMillis());
    calendar.add(Calendar.SECOND, 10);
    alarmManager.set(AlarmManager.RTC_WAKEUP, Long.parseLong(alarmtTime[i]),
                     pendingIntent);
} 
```

# iphone - iPad 的 GPUImage 框架 (GPUImageStillCamera) 实现

> ID：12107562
> 
> 赞同：0
> 
> 时间：2012-08-24T10:22:47.417
> 
> 标签：iphone, ios, image-processing, opengl-es, gpuimage

我使用了 GPUImage 框架，而在 iPad 中运行 SimplePhotoFilter 的示例代码[（](https://github.com/BradLarson/GPUImage/tree/master/examples/SimplePhotoFilter)我使用了 GPUImageSketchFilter）时，过滤后的图像上会出现一些点，如下所示：

![在此处输入图像描述](../Images/a656f8ed09cf57aa8b4bcb531d65b6c3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T20:40:25.610

这是由于 iOS 5.x 纹理缓存中的一个已知错误，我不久前提交了一个错误报告。通常，它仅在使用带有 AVCaptureStillImageOutput 的 AVCaptureSessionPresetPhoto 预设以外的其他内容时才会发生，但似乎在某些条件下该预设也会发生这种情况。

鉴于 NDA，我不能说这是否已在 iOS 6.0 中得到修复，但请尝试使用测试版运行它并亲自查看。

作为 iOS 5.x 的解决方法，您可以编辑`+supportsFastTextureUpload`GPUImageOpenGLESContext 中的方法以始终返回 NO。这将禁用框架中的纹理缓存支持，但可能会导致图像处理速度变慢并在拍照时消耗更多内存。

# eclipse - eclips source not found 远程调试

> ID：12107564
> 
> 赞同：0
> 
> 时间：2012-08-24T10:22:56.463
> 
> 标签：eclipse, debugging

我想调试远程 java 应用程序，但没有找到源代码以单击源代码？我是否将源附加到 eac lib？我正在使用`maven`adn spring mvc。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:06:45.410

同意，另一种选择是在调试开始后强制使用源：

查看Debug>（在main中）>Edit Source Lookup Path>Add>选择源

最后用“Up”为其分配高优先级

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:33:58.400

选择调试相关的项目：

调试配置>（选择您的远程Java应用程序）>连接>项目>按钮“浏览”>选择具有源代码的项目>应用>调试

问候，

# c# - 使用 .NET 提取 PDF 文档中标记为编辑的文本

> ID：12107565
> 
> 赞同：0
> 
> 时间：2012-08-24T10:22:58.380
> 
> 标签：c#, pdf, acrobat, redaction

我正在开发 PDF acrobat 附加产品，其中一项要求是提取给定 PDF 文档中标记为编辑的文本。

假设您知道什么是“编辑”（如果您不了解，请阅读此内容[http://acrobatusers.com/tutorials/redacting-pdf-files-survey-tools](http://acrobatusers.com/tutorials/redacting-pdf-files-survey-tools)），请建议我如何发现在任何 PDF 中已被“标记”为编辑的文本，然后提取确切的文本。

如果您认为可以引导我找到正确的答案，请询问更多详细信息。我曾尝试使用 iTextSharp 和 Aspose.PDF 库，但没有取得多大成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:59:47.893

当您使用 Acrobat 将文本标记为密文时，它会创建密文注释。密文注释的 /Subtype 键设置为 /Redact。编辑区域由注释字典中的 /QuadPoints 键定义。我不知道 iTextSharp 或 Aspose 是否支持编辑注释。使用 iTextSharp，您可以使用 COS API 检索原始 PDF 对象并检查您需要的对象。

# jboss - WAR 文件未部署在 Jboss 5.0 服务器中

> ID：12107572
> 
> 赞同：0
> 
> 时间：2012-08-24T10:23:54.453
> 
> 标签：jboss, war

我开发了一个使用 struts2+springs3+hibernate3 集成的 Web 项目。我成功地构建它并在 Tomcat 服务器上运行它。但是当我尝试在 Jboss 5.0 服务器中部署相同的 WAR 时，它抛出了以下错误：

```
2012-08-24 15:38:38,461 ERROR [STDERR] (main) SLF4J: slf4j-api 1.6.x (or later) is incompatible with this binding.
2012-08-24 15:38:38,477 ERROR [STDERR] (main) SLF4J: Your binding is version 1.5.5 or earlier.
2012-08-24 15:38:38,477 ERROR [STDERR] (main) SLF4J: Upgrade your binding to version 1.6.x. or 2.0.x
2012-08-24 15:38:38,555 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/ServiceCatalog-ICC]] (main) Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/resources/hibernateSessionFactory.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: org.slf4j.impl.StaticLoggerBinder.getSingleton()Lorg/slf4j/impl/StaticLoggerBinder;
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1403)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:513)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:450)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:287)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:189)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:545)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:871)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:423)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3887)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4370)
    at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeployInternal(TomcatDeployment.java:352)
    at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy(TomcatDeployment.java:140)
    at org.jboss.web.deployers.AbstractWarDeployment.start(AbstractWarDeployment.java:459)
    at org.jboss.web.deployers.WebModule.startModule(WebModule.java:118)
    at org.jboss.web.deployers.WebModule.start(WebModule.java:96)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
    at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java:206)
    at $Proxy35.start(Unknown Source)
    at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:42)
    at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:37)
    at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62)
    at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71)
    at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51)
    at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
    at org.jboss.system.microcontainer.ServiceControllerContext.install(ServiceControllerContext.java:286)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1598)
    at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1062)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
    at org.jboss.system.ServiceController.doChange(ServiceController.java:672)
    at org.jboss.system.ServiceController.start(ServiceController.java:444)
    at org.jboss.system.deployers.ServiceDeployer.start(ServiceDeployer.java:146)
    at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:104)
    at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:45)
    at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.internalDeploy(AbstractSimpleRealDeployer.java:62)
    at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:50)
    at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:169)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1285)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1003)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1024)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:944)
    at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1598)
    at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1062)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:627)
    at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:541)
    at org.jboss.system.server.profileservice.ProfileServiceBootstrap.loadProfile(ProfileServiceBootstrap.java:265)
    at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java:143)
    at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:409)
    at org.jboss.Main.boot(Main.java:209)
    at org.jboss.Main$1.run(Main.java:544)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NoSuchMethodError: org.slf4j.impl.StaticLoggerBinder.getSingleton()Lorg/slf4j/impl/StaticLoggerBinder;
    at org.slf4j.LoggerFactory.bind(LoggerFactory.java:121)
    at org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:111)
    at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:268)
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:241)
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:254)
    at org.hibernate.cfg.Configuration.<clinit>(Configuration.java:197)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:126)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:104)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newConfiguration(LocalSessionFactoryBean.java:813)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:549)
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1460)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1400)
    ... 70 more
2012-08-24 15:38:38,571 ERROR [org.apache.catalina.core.StandardContext] (main) Error listenerStart
2012-08-24 15:38:38,571 ERROR [org.apache.catalina.core.StandardContext] (main) Context [/ServiceCatalog-ICC] startup failed due to previous errors 
```

根据一些专家的建议，我尝试从项目的 WAR 中删除 slf4j-api-1.6.1.jar jar 文件并重新部署它。但这一次它显示了以下问题：

```
2012-08-24 15:45:28,852 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/ServiceCatalog-ICC]] (main) Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/resources/hibernateSessionFactory.xml]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: java.lang.NoSuchMethodException: org.hibernate.validator.ClassValidator.<init>(java.lang.Class, java.util.ResourceBundle, org.hibernate.validator.MessageInterpolator, java.util.Map, org.hibernate.annotations.common.reflection.ReflectionManager)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1403)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:513)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:450)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:287)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:189)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:545)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:871)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:423)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3887)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4370)
    at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeployInternal(TomcatDeployment.java:352)
    at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy(TomcatDeployment.java:140)
    at org.jboss.web.deployers.AbstractWarDeployment.start(AbstractWarDeployment.java:459)
    at org.jboss.web.deployers.WebModule.startModule(WebModule.java:118)
    at org.jboss.web.deployers.WebModule.start(WebModule.java:96)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
    at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java:206)
    at $Proxy35.start(Unknown Source)
    at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:42)
    at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:37)
    at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62)
    at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71)
    at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51)
    at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
    at org.jboss.system.microcontainer.ServiceControllerContext.install(ServiceControllerContext.java:286)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1598)
    at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1062)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
    at org.jboss.system.ServiceController.doChange(ServiceController.java:672)
    at org.jboss.system.ServiceController.start(ServiceController.java:444)
    at org.jboss.system.deployers.ServiceDeployer.start(ServiceDeployer.java:146)
    at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:104)
    at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:45)
    at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.internalDeploy(AbstractSimpleRealDeployer.java:62)
    at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:50)
    at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:169)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1285)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1003)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1024)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:944)
    at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1598)
    at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1062)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:627)
    at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:541)
    at org.jboss.system.server.profileservice.ProfileServiceBootstrap.loadProfile(ProfileServiceBootstrap.java:265)
    at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java:143)
    at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:409)
    at org.jboss.Main.boot(Main.java:209)
    at org.jboss.Main$1.run(Main.java:544)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.hibernate.AnnotationException: java.lang.NoSuchMethodException: org.hibernate.validator.ClassValidator.<init>(java.lang.Class, java.util.ResourceBundle, org.hibernate.validator.MessageInterpolator, java.util.Map, org.hibernate.annotations.common.reflection.ReflectionManager)
    at org.hibernate.cfg.Configuration.applyHibernateValidatorLegacyConstraintsOnDDL(Configuration.java:1681)
    at org.hibernate.cfg.Configuration.applyConstraintsToDDL(Configuration.java:1653)
    at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1445)
    at org.hibernate.cfg.Configuration.buildMappings(Configuration.java:1375)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:717)
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1460)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1400)
    ... 70 more
Caused by: java.lang.NoSuchMethodException: org.hibernate.validator.ClassValidator.<init>(java.lang.Class, java.util.ResourceBundle, org.hibernate.validator.MessageInterpolator, java.util.Map, org.hibernate.annotations.common.reflection.ReflectionManager)
    at java.lang.Class.getConstructor0(Class.java:2721)
    at java.lang.Class.getDeclaredConstructor(Class.java:2002)
    at org.hibernate.cfg.Configuration.applyHibernateValidatorLegacyConstraintsOnDDL(Configuration.java:1669)
    ... 77 more
2012-08-24 15:45:28,993 ERROR [org.apache.catalina.core.StandardContext] (main) Error listenerStart
2012-08-24 15:45:28,993 ERROR [org.apache.catalina.core.StandardContext] (main) Context [/ServiceCatalog-ICC] startup failed due to previous errors 
```

我无法确定问题出在我使用过的一组 jar 中还是在我正在使用的 Jboss 服务器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:05:46.020

3第一行不建议删除jar，而是更新它的版本

# sql - SQL where 字段如 ■

> ID：12107574
> 
> 赞同：2
> 
> 时间：2012-08-24T10:24:05.327
> 
> 标签：sql, xml

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:28:18.850

```
WHERE [value] like N'%■%'? 
```

Query it as unicode

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:38:05.560

Some time unicode does not work, so you can follow the below steps

1.  Copy the field value and paste it Notepad
2.  Copy that special character
3.  Paste between the Like statement.

I am sure it will works. Please confirm.

# java - 为什么我们不能应用 JLS 中包含的保证？

> ID：12107582
> 
> 赞同：1
> 
> 时间：2012-08-24T10:24:37.883
> 
> 标签：java, memory-model

我从[*邮件列表*](http://www.cs.umd.edu/%7Epugh/java/memoryModel/)中收到一封邮件，其中说如果对 volatile vars 的操作包含数据竞争，那么保证（“当且仅当所有顺序一致的执行都没有数据竞争时，程序才能正确同步。”在[*JLS*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)中）不能应用。

为方便起见，我只是将部分[*原始内容*](http://www.cs.umd.edu/%7Epugh/java/memoryModel/archive/2477.html)放在这里：

> 我有一个使用 volatile 变量的程序，我试图使用“当且仅当所有顺序一致的执行都没有数据竞争时，程序才能正确同步”来推断它。JLS3 中的保证。
> 
> JLS3 似乎包含一个故障，使我无法证明我的程序没有数据竞争。具体来说，考虑对 volatile 变量 V 的读取 R 和在同步顺序中 R 之后的 V 的写入 W。JLS3 似乎认为 R 和 W 是冲突的访问。此外，从 R 到 W 没有发生之前的边缘（这是正确的）。因此，JLS3 似乎也认为 R 和 W 构成了数据竞赛。最后，因此我似乎无法应用上述保证。

所以这是我的问题：如果对 volatile vars 的操作包含数据竞争，为什么我们不能应用 JLS 中包含的保证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:29:53.663

顺序一致的执行包含在写入 volatile 之前读取 volatile

=>

执行包含数据竞争

=>

程序未“正确同步”

=>

JLS 不提供适用于正确同步程序的保证。

# java - 泛型中的通配符类型

> ID：12107584
> 
> 赞同：1
> 
> 时间：2012-08-24T10:24:54.910
> 
> 标签：java, generics

> **可能重复：**
> [在通配符类型 ArrayList 中添加元素](https://stackoverflow.com/questions/12082780/adding-an-element-inside-a-wildcard-type-arraylist)

我不明白为什么编译器认为这段代码是错误的：

```
Pair<Manager> managerBuddies = new Pair<Manager>(ceo, cfo);
Pair<? extends Employee> wildcardBuddies = managerBuddies; // OK
wildcardBuddies.setFirst(lowlyEmployee); // compile-time error 
```

有的方法`Pair<? extends Employee>`有：

```
? extends Employee getFirst()
void setFirst(? extends Employee) 
```

目前尚不清楚为什么我们不能设置值，因为`Employee`是`? extends Employee`. Java教程试图解释它，但我仍然有我的问题。有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T10:28:31.050

对于编译器来说，这`? extends Employee`意味着 Employee 的一个特定子类型，并且编译器无法检测是哪个子类型。所以它不能让你插入任何员工。

有关更多信息，请参阅此问题： [什么是 PECS（生产者扩展消费者超级）？](https://stackoverflow.com/questions/2723397/java-generics-what-is-pecs)
或阅读Angelika Langer的[泛型常见问题解答。](http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T10:32:17.857

不要读`<? extends Employee>`作“任何扩展 Employee 的类型”，而是读作“扩展 Employee 的特定但未知的类型”。

wildcardBuddies 仍然是一对经理，只是现在实际类型现在未知。我们知道我们可以让员工离开，但我们不能设置任何东西，因为我们不知道应该设置 Managers 还是 LowlyEmployees。`Pair<? extends Employee>`有效地变为只读。

# sql-server - 将用户批量导入 SQL Azure

> ID：12107588
> 
> 赞同：2
> 
> 时间：2012-08-24T10:25:05.900
> 
> 标签：sql-server, tsql, powershell, azure

我正在寻找一种在 SQL Azure 中创建登录名和关联用户的简单方法。

问题是，使用 Azure，首先需要在主数据库中创建一个登录名。基于该登录，我需要在特定数据库中创建一个用户（`DATABASE1`）

之后需要分配角色：

```
CREATE LOGIN login1 WITH password='<ProvidePassword>';
CREATE USER login1User FROM LOGIN login1;
EXEC sp_addrolemember 'dbmanager', 'login1User';
EXEC sp_addrolemember 'somerole'; 
```

问题是，由于不能使用`USE`命令切换数据库，这似乎成为一项相当乏味的任务。更重要的是，因为每个数据库的帐户数量可以从十个到几百个不等，所以数据库和用户一直在添加。

所以我需要一个可以轻松重用的解决方案。

我想要某种类型的脚本（powershell？），它将读取一个文件（包含用户名、密码和数据库名），然后创建适当的登录名、用户和权限......

锦上添花将是某种工作，它会定期检查某个文件夹中是否存在（新）文件，如果有，请阅读这些文件并在需要时创建新帐户。

我必须承认我确实有 TSQL 知识、基本编程知识，但根本没有 Powershell 经验。你会建议我怎么做？PowerShell是要走的路吗？或者还有其他我可以使用的机制吗？

问候，亨利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:12:37.400

如此处所述[，](http://msdn.microsoft.com/en-us/library/windowsazure/ff394115.aspx)您肯定可以使用桌面计算机上的 Powershell 连接到 SQL 数据库，以与连接到其他 SQL Server 类似的方式管理 SQL 数据库帐户。PowerShell 脚本可以在本地计算机上运行，​​并使用系统管理对象或数据层应用程序框架对象连接到 SQL 数据库。

朝着这个方向迈出的第一步是让你的 Powershell 命令连接到 SQL 数据库，你可以使用[这篇文章](http://social.technet.microsoft.com/wiki/contents/articles/3804.how-to-manage-windows-azure-sql-database-servers-using-windows-powershell-en-us.aspx)到达这里。

之后，您只需要使用 Powershell 脚本来创建用户登录和快速搜索，我发现[这篇文章](http://sqlblog.com/blogs/allen_white/archive/2011/06/03/use-powershell-to-add-a-login-to-a-database-role-in-all-databases.aspx)和[这篇](http://social.msdn.microsoft.com/Forums/en-US/sqlgetstarted/thread/8fbefc94-894c-4b88-b93d-ac360d70a230)很有希望的文章包括更多功能以及您的目标。您可能需要调整脚本以使其与 SQL 数据库一起使用。

最后，您可以搜索互联网以从文件（或 XML 更好）中读取数据，并将用户信息提供给您的 SQL 数据库脚本。如果您在步骤之间有任何问题，请打开特定问题，您将得到帮助。

# visual-studio-2010 - 如何解决或删除此 Visual Studio 资源警告？

> ID：12107592
> 
> 赞同：15
> 
> 时间：2012-08-24T10:25:11.970
> 
> 标签：visual-studio-2010

任何人都可以在这里帮助我们 - 我们已经有几个月的这个错误并且有很多刺来删除它，但我们仍然没有弄清楚它为什么在那里或如何删除它。如何解决或删除此警告？

> 警告 351 自定义工具“GlobalResourceProxyGenerator”与文件“App_GlobalResources\GridLocalization.bg-BG.resx”相关联，但在项目中未找到自定义工具的输出。您可以尝试通过右键单击解决方案资源管理器中的文件并选择运行自定义工具来重新运行自定义工具。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-24T12:46:15.783

在查看了csproj文件并在小组中讨论后，我们得出了以下答案：

当资源被添加到项目中时，它们是使用向导添加的。该向导还添加了设计器文件，因此对于每个资源文件还有一个 .designer 文件。

这被视为语言特定资源不需要的东西，并且设计器文件已被删除。

但是，csproj 文件维护了自定义工具参考。

为这些资源文件中的每一个删除此引用（对“GlobalResourceProxyGenerator”）消除了该问题。

问题是当手动删除设计器文件时，Visual Studio 2010 不会自动删除此工具引用，从而创建此警告。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-08-17T15:56:04.420

在我的情况下，这是由`<LastGenOutput>`csproj 文件中的一个条目引起的，该条目引用了一个不存在的文件。删除该行消除了警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-14T11:17:10.607

在 Visual Studio 2017 中，我遇到了与以下错误相同的问题

```
Warning A custom tool 'ResXFileCodeGenerator' is associated with file <snip name>, but the output of the custom tool was not found in the project. 
```

删除 `<Generator>ResXFileCodeGenerator</Generator>`资源文件声明中对的引用，修复了该问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-12T23:55:18.207

在 VS 2019 中，我还修复了错误：

警告 自定义工具“ResXFileCodeGenerator”与 file 关联，但在项目中未找到自定义工具的输出。

通过删除在项目的“.csproj”文件中找到的对 ResXFileCodeGenerator 的引用！

# css - 背景应该只适用于第一个孩子李，而不是其他ul李

> ID：12107607
> 
> 赞同：3
> 
> 时间：2012-08-24T10:25:52.937
> 
> 标签：css

我只需要具有灰色背景颜色的第一个“li”元素。但是我的背景颜色灰色正在应用的每个“ul li”的第一个“li”。背景颜色应仅适用于第一个 li（我的示例）。

[http://jsfiddle.net/fX9Gy/](http://jsfiddle.net/fX9Gy/)

任何人都可以请解决问题。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T10:51:18.853

给你的父母**上课**`UL`。像这样写：

**HTML**

```
<ul class="parent">
    <li>one</li>
    <li>one
        <ul>
            <li>two</li>
            <li>two</li>
            <li>two</li>
        </ul>    
    </li>
    <li>one</li>
</ul> 
```

**CSS**

```
.parent > li:first-child{background-color:#ccc} 
```

检查更多[http://jsfiddle.net/fX9Gy/27/](http://jsfiddle.net/fX9Gy/27/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T10:32:04.777

在你的CSS末尾添加这个：

```
ul li ul li:first-child{background-color:transparent} 
```

或者给元素一个id：

```
<li id="first">one</li>

#first {background-color:#ccc} 
```

****编辑****

你可以试试这个CSS：

```
ul li{color:red}
ul li > ul li{color:blue}
li {background-color:#ccc} 
ul ul li {background-color:transparent}
li + li {background-color:transparent} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T10:34:21.970

要么使选择器更具体：

```
ul li ul li:first-child{background-color:transparent} 
```

或者向 UL 添加一个类并选择那里的第一个孩子：

```
ul.nested li:first-child{background-color: #fff;}

... <li>one
        <ul class="nested">
            <li>two</li>
... 
```

[http://jsfiddle.net/Kyle_Sevenoaks/fX9Gy/15/](http://jsfiddle.net/Kyle_Sevenoaks/fX9Gy/15/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T10:40:42.650

嗨，请查看更新的 css 我希望这会奏效

```
ul li{color:red}

ul li > ul li{color:blue}

ul li:first-child{background-color:#ccc}
ul li ul li:first-child {background:none;} 
```

[http://jsfiddle.net/fX9Gy/23/](http://jsfiddle.net/fX9Gy/23/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T10:52:11.190

你可以试试这个。

```
li {color:gray}
ul ul li {color:red}
li + li {color:red} 
```

这也适用于浏览器到 ie 7

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-24T11:09:15.490

如果您不想添加 class 或 id 的东西，那么您必须使用 jquery。但是您需要为 ul 添加类名。

但是如果没有 jquery，使用 CSS 你需要在 li 中为 ul 添加一行，

```
ul li ul li:first-child{ background-color:white; } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-24T10:33:42.423

更新了小提琴。向父级添加了一个类`ul`

[http://jsfiddle.net/fX9Gy/26/](http://jsfiddle.net/fX9Gy/26/)

# android - android从没有mapView的谷歌地图生成位图

> ID：12107608
> 
> 赞同：0
> 
> 时间：2012-08-24T10:25:55.020
> 
> 标签：android, bitmap, maps, android-mapview

我想使用谷歌地图生成位图文件，而不通过 mapView 传递数据，例如后台线程（下载图块以写入位图）

有人有想法吗？

一个例子是：输入坐标并单击按钮后，在 SD 卡中生成 .png，其中包含 COMPLETE 加载的图块。

有什么建议吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T10:31:28.813

此方法返回带有地图图像的 url

```
public static String getMapUrl(Double lat, Double lon, int width, int height) {
    final String coordPair = lat + "," + lon;
    return "http://maps.googleapis.com/maps/api/staticmap?"
            + "&zoom=16"
            + "&size=" + width + "x" + height
            + "&maptype=roadmap&sensor=true"
            + "&center=" + coordPair
            + "&markers=color:black|" + coordPair;
} 
```

您可以下载或在 ImageView 上显示

# java - 如何在谷歌应用引擎上运行maven项目

> ID：12107612
> 
> 赞同：5
> 
> 时间：2012-08-24T10:26:15.787
> 
> 标签：java, google-app-engine

我遵循本教程： http: [//software.danielwatrous.com/wordpress-plugin-licensing-wicket-on-google-app-engine/](http://software.danielwatrous.com/wordpress-plugin-licensing-wicket-on-google-app-engine/)。我将谷歌应用引擎库添加到这个项目，然后我想检查谷歌应用引擎。但是当我做这个日食有这个问题：

```
The App Engine SDK '/home/hudi/program/git/tournamenSystem/tournament-system/
tournament-system-web/src/main/webapp/WEB-INF/lib/appengine-api-1.0-sdk-1.7.1.jar'
on the project's build path is not valid (SDK location '/home/hudi/program/git/
tournamenSystem/tournament-system/tournament-system-web/src/main/webapp/WEB-INF/
lib/appengine-api-1.0-sdk-1.7.1.jar' is not a directory) 
```

我不明白。Jar 不是目录，为什么它想要某个目录？当我想使用快速修复时，我可以使用另一个 SDK。我尝试使用旧版本 1.6 ......但仍然是同样的问题。我该如何解决？请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T18:54:23.963

可能的解决方案是，您应该通过 Eclipse 中的应用引擎设置添加 appengine，并确保 appengine 设置添加的 sdk 出现在提到的之前（即 /home/hudi/program/git/tournamenSystem/tournament-system/tournament-system -web/src/main/webapp/WEB-INF/lib/appengine-api-1.0-sdk-1.7.1.jar) 在您的构建路径中。这样，您的应用程序将引用来自谷歌插件的 appengine sdk，而不是给出错误的路径。

我有同样的问题，我从 maven 依赖项中包含的 sdk jar 收到错误。希望它会有所帮助。

![古尔应用引擎设置](../Images/288716d378cf231e22aad28b10bc0462.png)

![构建路径顺序](../Images/8c52701474d1b5160f9a9caf68093a5b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T16:41:57.623

你可能想看看[Maven GAE 插件](https://github.com/maven-gae-plugin/maven-gae-plugin) 这个插件的目标是运行、调试、部署等你的 GAE 应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T19:38:56.580

在装有 Ubuntu 12.04 和 Eclipse Juno SR1 的计算机上，我只需将所有 maven 依赖项移动到 Java 构建路径列表的按钮。

对于打开的 Java 构建路径窗口，右键单击项目 - 首选项 - Java 构建路径 - 订购和导出 - 选择带有 M2_REPO（或其他东西）的所有行，然后按“底部”按钮 - 刷新项目。这需要帮助。

谢谢！

# iphone - animateWithDuration 期间的当前旋转值

> ID：12107614
> 
> 赞同：2
> 
> 时间：2012-08-24T10:26:25.603
> 
> 标签：iphone, uiviewanimation

我正在使用 animateWithDuration 让我的 UIVIew 之一无休止地旋转。现在，我需要在特定时间获取 UIView 旋转的当前值。我尝试使用以下功能：

```
-(float)getCurrentRotation{
CGAffineTransform transform = ((UIImageView*)[self.subviews objectAtIndex:0]).transform;
return (atan2(transform.b, transform.a));
} 
```

但它总是返回与我在初始调用 animateWithDuration 时指定的值相同的值 (M_PI/2)：

```
[UIView animateWithDuration:4 delay:0 options:( UIViewAnimationOptionRepeat|UIViewAnimationOptionCurveLinear) animations:^{
    CGAffineTransform transform = CGAffineTransformMakeRotation(M_PI/2);
    ((UIImageView*)[self.subviews objectAtIndex:0]).transform = transform;
}
                 completion:^(BOOL finished){
                 }]; 
```

有没有办法获得当前的旋转值？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:16:48.413

当使用基于 CoreAnimation 的动画时，您的视图属性（边界、变换...）实际上永远不会改变。动画时屏幕上显示的图层属性发生了哪些变化（请参阅[此文档页面](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/CoreAnimationArchitecture.html)），可使用`view.layer.presentationLayer`.

因此，以下行将在您请求时为您提供实际的转换：

```
CGAffineTransform transform = CATransform3DGetAffineTransform([(CALayer*)[[[self.subviews objectAtIndex:0] layer] presentationLayer] transform]); 
```

您必须链接并包含`QuartzCore`定义 的框架，`CALayer`才能使其正常工作。

```
#import <QuartzCore/QuartzCore.h> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:59:52.970

我不确定是否可以在屏幕上显示“旋转值”时观看它。但我想说不是，因为您的视图对象确实立即具有*新*的属性值，并且动画发生在您无法到达的对象的框架深处的某个地方。

为了实现您的目标，我会将轮换分成单个步骤，其粒度足以满足您的需求。然后只需计算步骤并使当前步骤可用。可能看起来有点像这样（未经测试，只是一个涂鸦）：

```
//step and rotator declared as class members
//rotator is the one which is referred to as ((UIImageView*)[self.subviews objectAtIndex:0]) in the original question 
-(CGFloat)currentRotation

{
  return step*(M_PI/16);
}

-(void)turnturnturn
{
  [UIView animateWithDuration:0.2 
                   animations:^
                   {
                     rotator.transform = CGAffineTransformConcat(CGAffineTransformMakeRotation(M_PI/16), rotator.transform);
                     step++;
                   } 
                   completion:^(BOOL finished) 
                   {
                     if(step == 32)
                     {
                        step = 0;
                        rotator.transform = CGAffineTransformIdentity;
                     }
                     [self turnturnturn];
                   }];
} 
```

# jfreechart - 条形 JFree 图表 y 轴

> ID：12107615
> 
> 赞同：1
> 
> 时间：2012-08-24T10:26:35.193
> 
> 标签：jfreechart

我想使用 jfree 图表显示条形图。我能够在 y 轴上显示字符串数据，例如在 y 轴上显示 A 0、B 100，但条形显示很长。条形显示的格式不正确。如何在我的数据集中将 y 值编码为整数，而我仍然必须以该格式显示上面显示的字符串数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:06:31.467

每个`SymbolAxis`数字值都需要 a，因此您需要提供 101 个值（0 - 100）而不是代码中的 11

尝试更换

```
SymbolAxis rangeAxis=new SymbolAxis("", new String[] {"Poor    0", "10","20", "30", "40", "Avg.     50","60","70","80","90","Best   100"});
plot.setRangeAxis(rangeAxis); 
```

和

```
//Provide a new Symbol Axis
String[] grade =  new String[101];
for (int i = 0 ; i < grade.length ; i ++){
    grade[i] = Integer.toString(i);
}
grade[0] = "Poor    0";
grade[100] = "Best   100";
grade[50] = "Avg.   50";
SymbolAxis rangeAxis = new SymbolAxis("", grade);
rangeAxis.setTickUnit(new NumberTickUnit(10));
rangeAxis.setAutoRange(false);
rangeAxis.setRange(0, 100);
plot.setRangeAxis(rangeAxis); 
```

用于 `SymbolAxis#setTickUnit()`控制刻度线之间的间隔，您将获得一条图表线

![在此处输入图像描述](../Images/ffc5ed0c150cce6f0774d53e0667ddec.png)

# ios - 通过简单的 URL Sheme 问题在 Native Facebook IOS App 中打开 Facebook 页面

> ID：12107627
> 
> 赞同：9
> 
> 时间：2012-08-24T10:27:28.583
> 
> 标签：ios, facebook, url

那里！

我想使用 URL Scheme 在本机 IOS Facebook 应用程序中打开我的 Facebook 页面（不是个人资料）。

我正在测试这个功能 - 在这个例子中**fb://profile**

它工作正常。

但是，当我试图打开我的 Facebook 页面时 - 来自**fb://page/141720395863506**

它只是将我重定向到 Facebook 应用程序并没有任何反应，只需打开应用程序并加载新闻提要。

请帮我。我找不到官方 facebook 开发人员指南的任何文档。并且有一些问题：Facebook IOS App Url Sheme 是否仍然支持此功能。在这种情况下我可能做错了吗？

最好的祝福！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-21T04:38:59.490

我相信我找到了一个解决方案......它目前在 facebook ios 5.0.1 for iPhone 下工作......还没有在 iPad 上尝试过。

网址是 fb://profile/132753734806

现在重要的部分是那个数字。这与我的一位客户查尔斯·斯科特有关。但是，这不是他们的 FBID 或页面 ID .. 他们的页面 ID 是 10150348920319807

所以你会认为它应该是 fb://profile/10150348920319807 但这给了我一个错误。

这是您获得正确代码的方法.. 单击您页面的任何照片.. 这是我的客户的示例[https://www.facebook.com/photo.php?fbid=10150348920319807&set=a.10150348920314807.356942.132753734806&type=1&theater](https://www.facebook.com/photo.php?fbid=10150348920319807&set=a.10150348920314807.356942.132753734806&type=1&theater)

如果您注意到该 URL 中 fbid= 之后的 FBID 不起作用。您想要的数字就在 &type=1theater 之前，但在最后一个时期之后。132753734806 是在 fb://profile/ 之后打卡的正确代码

我希望这是有道理的......我对代码或编码知之甚少，但这让我非常困扰，我知道有办法。

现在，我很想回答/工作的两个问题.. 1\. 如果这可以在 android 手机上工作 2\. 为这个 url 创建一个工作 qr 码，以便人们可以使用 ios 设备扫描并自动打开它

祝你好运，我希望这对每个人都有帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-09T09:25:28.377

亚历山德罗的上述回答是正确的，但这对我来说并没有真正起作用。所以这是正确的方法。我有一个 URL [https://www.facebook.com/pageName](https://www.facebook.com/pageName) 现在，转到： http: **[//findmyfacebookid.com](http://findmyfacebookid.com)** 粘贴你的 URL，获取 Facebook id，然后将 url 设为 @"fb://profile/pageID"

它对我有用！

注意：检查设备中是否安装了本机应用程序，否则通过默认浏览器打开它。

```
 if (![[UIApplication sharedApplication] openURL: [NSURL URLWithString:@"fb://profile/pageId"]]) 
{            
   NSURL *url = [NSURL URLWithString:@"https://www.facebook.com/pageName"];
   [[UIApplication sharedApplication] openURL:url];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-07T21:02:09.120

**斯威夫特 3.0** / iOS10：

```
let fbUrl: NSURL = NSURL(string: "fb://profile/55555555555555")!
let fbWebUrl: NSURL = NSURL(string: "https://facebook.com/yourFacebookPageName")!

if (UIApplication.shared.canOpenURL(fbUrl as URL)) {
    if #available(iOS 10.0, *) {
        UIApplication.shared.open(fbUrl as URL, options: [:], completionHandler: nil)
    } else {
        // Fallback on earlier versions
        UIApplication.shared.openURL(fbUrl as URL)
    }
} else {
    if #available(iOS 10.0, *) {
        UIApplication.shared.open(fbWebUrl as URL, options: [:], completionHandler: nil)
    } else {
        // Fallback on earlier versions
        UIApplication.shared.openURL(fbWebUrl as URL)
    }
} 
```

“55555555555555”应替换为您可以从[http://findmyfbid.com](http://findmyfbid.com)获得的数字 Facebook ID ，“yourFacebookPageName”应替换为页面的用户名。

不要忘记在应用程序的 Info.plist（在 LSApplicationQueriesSchemes 下）中启用 fb url 方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-28T12:54:58.703

我认为这描述了为应用程序发现此类链接的程序化/正式 wat：[https ://developers.facebook.com/docs/applinks](https://developers.facebook.com/docs/applinks)

# python - 如何在传输编码中读取块的大小：块？

> ID：12107635
> 
> 赞同：1
> 
> 时间：2012-08-24T10:28:00.917
> 
> 标签：python, http, sockets, http-headers

我正在使用 Python 中的套接字（以学习它们），并且正在学习 HTTP 协议是如何工作的。我做得很好，直到我知道有一个叫做`Transfer-Encoding: chunked`. 我对它进行了谷歌搜索，并找到了这篇[维基百科文章](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)。它说每个块的大小是在块本身之前指定的。但它没有说明我应该从套接字读取多少字节才能正确获取它。此外，它并没有说我是否应该关心字节顺序。谁能提供这方面的详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:35:06.123

不要想太多，因为 HTTP 中的大多数内容只是纯文本。您只需要从套接字读取直到遇到 CRLF 序列，然后提取块大小（可能以分号终止）并将其解释为十六进制数。

一旦你有了这条线，这应该可以提取块大小：

```
chunk_size = int(line.strip().split(';')[0], 16) 
```

# command-line - 支持 REST 操作符的命令行 FTP 客户端下载文件的一部分

> ID：12107637
> 
> 赞同：0
> 
> 时间：2012-08-24T10:28:08.140
> 
> 标签：command-line, ftp

我将编写一个脚本，从 FTP 服务器下载文件尾部，例如文件的最后 10KB。我尝试了很多 FTP 客户端，但没有一个适合执行此任务。Windows 内置的 FTP 命令行实用程序不支持 rest 命令。CoreFTP 需要管理权限才能运行，WinSCP 仅支持恢复传输，FileZilla 根本没有命令行实用程序。我无法下载整个文件，因为它太大了。FTP 协议肯定支持它，因为它有 REST 命令，可以恢复传输文件。任何想法如何完成这项任务？谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:36:39.103

你正在寻找`curl -C offset ftp://blah/foo/bar.xyz`

# php - PHP DateTime - 为“下周三”之类的事情设置一个起点

> ID：12107638
> 
> 赞同：0
> 
> 时间：2012-08-24T10:28:08.263
> 
> 标签：php, datetime

我正在使用以下方法来计算时间安排中的下一次时间。

```
public static function getNextUtcTimestampFromSchedule($schedule, $timezone)
{
    $timestamps = array();
    foreach ($schedule as $day => $times){
        $dt = new \DateTime('next '.self::getDayString($day), new \DateTimeZone($timezone));
        foreach ($times as $time){
            list($hour, $min) = explode(':', $time);
            $dt->setTime($hour, $min);
            $timestamps[] = $dt->getTimestamp();
        }
    }
    sort($timestamps);
    return $timestamps[0];
} 
```

`$schedule`是一个数组，像这样：

```
$schedule = array(
    0 => array('11:00', '17:00'), 
    1 => array('10:00', '18:00'),
    2 => array('09:00', '18:00'), 
    3 => array('11:00', '17:00'),
    4 => array('11:00', '16:00'),
    5 => array('15:00', '16:00'),
    6 => array('11:00', '12:00'),
); 
```

`getDayString`例如，简单地将 0 转换为“星期日”。

为了编写单元测试，我需要欺骗时间`now()`，或者将其传递给方法并使用它。

问题是，我如何将它与 DateTime 一起使用？

即`DateTime('next wednesday')`需要被告知“现在”是什么时间，以便以可预测的方式找出“下周三”，以便对其进行单元测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:31:23.140

__construct 函数有一个[可选参数](http://www.php.net/manual/en/datetime.construct.php)：

```
public __construct ([ string $time = "now" [, DateTimeZone $timezone = NULL ]] ) 
```

一个例子：

```
<?php
try {
    $date = new DateTime('2000-01-01');
} catch (Exception $e) {
    echo $e->getMessage();
    exit(1);
}

echo $date->format('Y-m-d');
?> 
```

编辑：您可以使用[strtotime](http://au2.php.net/manual/en/function.strtotime.php)生成时间戳，然后使用[date](http://php.net/manual/en/function.date.php)生成要传递给新对象的字符串：

```
$date = new DateTime(date("Y-m-d", strtotime("next wednesday"))); 
```

# magento - 如何调试结帐订阅 Magento 扩展？

> ID：12107639
> 
> 赞同：0
> 
> 时间：2012-08-24T10:28:12.343
> 
> 标签：magento

我已经安装了 magento Checkoutsubscribe 扩展，它为用户提供了在单页结帐过程中订阅时事通讯的选项。

安装很好，显示为已安装，但它没有做任何事情。

我不确定如何进行调试。

任何人都可以就如何最好地开始测试扩展过程中的每个阶段提供任何指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T13:26:45.907

问题在于与 magento 1.7 不兼容。最后开发人员制作了一个错误修复版本，抱歉没有更多基于代码的答案，但认为仍然值得分享解决方案。

# c - 如何使用 SoX C 库混合音频文件

> ID：12107646
> 
> 赞同：1
> 
> 时间：2012-08-24T10:28:33.670
> 
> 标签：c, audio, sox, mixing

使用 SoX 从命令行使用“sox -m ...”混合音频文件很简单，但我试图用 C 库找到完全相同的东西，但我无法在任何地方找到如何做到这一点。甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:37:43.507

嗯，这是可能的，但图书馆不会帮助你。

查看`sox.c`代码，您可以注意到实际的混合代码在一个`static`函数中：

```
for (ws = 0; ws < olen; ++ws) { /* wide samples */
  if (combine_method == sox_mix || combine_method == sox_mix_power) {
    for (s = 0; s < effp->in_signal.channels; ++s, ++p) { /* sum samples */
      *p = 0;
      for (i = 0; i < input_count; ++i)
        if (ws < z->ilen[i] && s < files[i]->ft->signal.channels) {
          /* Cast to double prevents integer overflow */
          double sample = *p + (double)z->ibuf[i][ws * files[i]->ft->signal.channels + s];
          *p = SOX_ROUND_CLIP_COUNT(sample, mixing_clips);
        }
    }
/* [...] */ 
```

所以，如果你真的想用sox，你可以用它来做文件输入/输出，但是混音需要你自己做。

# javascript - Is it possible to display OSM data with another WMS layer of a different projection?

> ID：12107651
> 
> 赞同：2
> 
> 时间：2012-08-24T10:29:06.337
> 
> 标签：javascript, openlayers, openstreetmap, mapserver

I have an issue where I have a large amount of data stored in EPSG:27700 (OSGB) that needs to be mapped. I have already developed a mapper to do this using OpenLayers and for a base layer, OpenSpace from the UK Ordinance Survey (http://www.ordnancesurvey.co.uk/oswebsite/web-services/os-openspace/api/index.html). However this baselayer is projected in 27700, so I've not had an issue up until this point as all the projections (from mapserver and the base layer) were the same.

There is now a requirement to zoom further into the layers than the free Ordinance Survey allows (even with a loss of quality). I've found its possible to use OpenLayers to zoom further into layers where they are tile based such as OSM. The issue I am having is trying to get OpenLayers to display OSM data AND my layer in projection EPSG:27700\.

Is this even possible?

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:07:07.303

OpenLayers cannot reproject image layers. The reason for this is that OpenLayers uses CSS to overlay your image layer and CSS is not rich enough to fulfill complex geometric operations needed for a spatial transformation.

As a solution you need to reproject your data from EPSG:27700 to your base layer projection (EPSG:900913 if you use OpenStreetMap) in your WMS server. You can do this on the fly with [MapServer](http://docs.openlayers.org/library/spherical_mercator.html#mapserver) or GeoServer.

Another solution is to use WFS for your overlay layer: Then OpenLayers can reproject the position of each vector feature in your overlay. Have a look at the [WFS reproejction example](http://openlayers.org/dev/examples/wfs-reprojection.html).

Finally, there is an experimental solution for raster transformation using HTML5 Canvas and a JavaScript version of GDAL:

[http://dev.openlayers.org/sandbox/camptocamp/canvas/openlayers/examples/raster-reprojection.html](http://dev.openlayers.org/sandbox/camptocamp/canvas/openlayers/examples/raster-reprojection.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:49:58.133

OSM data are usually served in EPSG:900913 as tiles so there is no possibility to transform tiles to other projection (you can try but quality will fall down as tines have small resolution). What you can do is download all OSM data and run your own tileservice in EPSG you like.

But first of all, check out all properities of map object in openLayers documentation. You can set zoom levels of map. If you do not, map object by default take zoom levels from first loaded layer and probably it is your problem as UK OS layers probably work with few zoom level.

# httprequest - 在 JBoss 关闭时停止 HTTP 请求

> ID：12107653
> 
> 赞同：1
> 
> 时间：2012-08-24T10:29:23.033
> 
> 标签：httprequest, jboss5.x, shutdown

使用 JBoss 5.1.0 GA。

我有一个包含大约 100 个 EJB 的应用程序，关闭过程有时会很长。我注意到即使在我触发关闭过程之后，该应用程序仍然可以处理来自仍然登录到 Web 应用程序的用户的 HTTP 请求。

我的问题是：一旦我截获服务器关闭通知，是否有任何机制可以停止 HTTP 请求？在发出 server-shut-down 命令后，我不允许用户发出任何 HTTP 请求。

谢谢

# winforms - 视频中的目标检测和跟踪

> ID：12107656
> 
> 赞同：0
> 
> 时间：2012-08-24T10:29:36.393
> 
> 标签：winforms, video

我正在捕捉视频流。我有一组图像值，我想知道这些值是否出现在捕获的流中。任何人都可以建议我实现这一目标？我正在使用 C# 开发一个 Windows 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:35:01.800

我确信只使用 C# 是不可能得出解决方案的。您必须使用一些图像处理算法。

至于编码这些算法将是一项巨大的活动，您可以使用互联网上提供的图像处理库。可能是 open cv（.net 的 emgu cv）或 Aforge.Net 可能会帮助你。如果您正在构建任何专业软件，我建议您查看相应产品的许可证。

# eclipse - 打开时出现 Flash builder 错误

> ID：12107665
> 
> 赞同：1
> 
> 时间：2012-08-24T10:30:20.410
> 
> 标签：eclipse, flash, error-handling, flash-builder

我对 Flash builder 4.6 有一个严重的问题

当我打开它时，屏幕上会出现一条显示错误消息，并给我一些日志文件以查看。问题是我不知道如何处理日志以及如何修复它：s

以下是日志：

[日志文件](http://studiogizmo.be/logs/logs.zip)

如果您有任何想法，提示或其他任何内容。我会给你我所有的尊重！

提前谢谢你

西蒙

# opencv - 使用计算单应性将 2D 点从标记投影到图像

> ID：12107666
> 
> 赞同：6
> 
> 时间：2012-08-24T10:30:22.803
> 
> 标签：opencv, homography, reprojection-error

我有一个平面标记，我在其中运行了**SIFT**算法来提取特征。然后我运行一个检测器在场景中找到这个标记并再次提取特征。我匹配点并使用 OpenCV 从匹配对中提取**单应性**`findHomography()`。

现在我想用计算的单应性投影在标记中检测到的 2D 点，以将位置与从场景中测量的 3D 点进行比较并计算重**投影误差**。我对像素坐标、厘米、校准矩阵感到困惑，我不知道我应该先进行哪些转换。

有人知道这方面的链接或可以解释该方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T10:50:46.727

如果您调用单应矩阵 H，则相机矩阵 K（需要转换为像素）将是这样的，具体取决于您的分辨率。

```
Mat K= Mat::zeros(3,3,CV_32FC1);
K.at<float>(0,0)=500.0f;        
K.at<float>(0,2)=320.0f;      // width/2    
K.at<float>(1,1)=500.0f;    
K.at<float>(1,2)=240.0f;      // height/2 
K.at<float>(2,2)=1.0f; 
```

如果您的标记点是 2D 的矢量点：

```
vector<Point2f> marker_point; //containing coordinates in centimeters 
```

那么投影将是这样的，结果是像素坐标中的 3D 点。

```
Mat point(3,1,CV_32FC1);        
point.at<float>(0) = marker_point.x;
point.at<float>(1) = marker_point.y;
point.at<float>(2) = 1.0f;
point = H* point;
point = point/point.at<float>(2);       //Normalize
point = K* point;                   //to pixels 
```

# c++ - 从标头中的函数生成静态数组值

> ID：12107668
> 
> 赞同：1
> 
> 时间：2012-08-24T10:30:38.200
> 
> 标签：c++, arrays, header

在 C# 中，我可以使用函数生成静态数组：

```
private static readonly ushort[] circleIndices = GenerateCircleIndices();

....

    private static ushort[] GenerateCircleIndices()
    {
        ushort[] indices = new ushort[MAXRINGSEGMENTS * 2];
        int j = 0;

        for (ushort i = 0; i < MAXRINGSEGMENTS; ++i)
        {
            indices[j++] = i;
            indices[j++] = (ushort)(i + 1);
        }

        return indices;
    } 
```

使用 C++ 我相信以下是生成静态数组的正确方法：

**。H**

```
static const int BOXINDICES[24]; 
```

**.cpp（构造函数）**

```
static const int BOXINDICES[24] =
{ 
    0, 1, 1, 2, 
    2, 3, 3, 0, 
    4, 5, 5, 6, 
    6, 7, 7, 4, 
    0, 4, 1, 5, 
    2, 6, 3, 7 
}; 
```

如何对 circleIndices 执行相同操作但使用函数生成值？

**。H**

```
static const int CIRCLEINDICES[]; 
```

**.cpp（构造函数）**

```
static const int CIRCLEINDICES[] = GenerateCircleIndices();  // This will not work 
```

我是否必须使用 0 值初始化数组元素然后调用该函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:42:55.313

这取决于您是否希望在运行时或编译时评估函数。在 C# 中，它将在运行时发生，但 C++ 为您提供了在编译时执行此操作的选项。

如果您想在运行时执行此操作，可以使用静态初始化类：

```
struct S
{
    int X[N];

    S() { for (int i = 0; i < N; i++) X[i] = ...; }
};

S g_s; 
```

这里在进入 main 之前调用构造函数来设置你的数组。

如果您想在编译时执行此操作，则可以以 C# 中不可能的各种方式使用模板或宏。如果您在编译时执行此操作，则数组的数据将由编译器计算，并由加载程序从应用程序映像的静态区域直接填充到进程地址空间中的 memcpy。这是一个例子：

```
#include <iostream>
#include <array>
using namespace std;

constexpr int N = 10;
constexpr int f(int x) { return x % 2 ? (x/2)+1 : (x/2); }

typedef array<int, N> A;

template<int... i> constexpr A fs() { return A{{ f(i)... }}; }

template<int...> struct S;

template<int... i> struct S<0,i...>
{ static constexpr A gs() { return fs<0,i...>(); } };

template<int i, int... j> struct S<i,j...>
{ static constexpr A gs() { return S<i-1,i,j...>::gs(); } };

constexpr auto X = S<N-1>::gs();

int main()
{
        cout << X[3] << endl;
} 
```

参见：[C++11：数组的编译时间计算](https://stackoverflow.com/questions/12108390/c11-compile-time-calculation-of-array)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:44:23.783

```
#include <array>        // std::array
#include <utility>      // std::begin, std::end
#include <stddef.h>     // ptrdiff_t
using namespace std;

typedef ptrdiff_t Size;

template< class Collection >
Size countOf( Collection const& c )
{
    return end( c ) - begin( c );
}

typedef array<int, 24> CircleIndices;

CircleIndices generateCircleIndices()
{
    CircleIndices   result;
    for( int i = 0;  i < countOf( result );  ++i )
    {
        result[i] = i;
    }
    return result;
}

CircleIndices const circleIndices = generateCircleIndices();

#include <iostream>
int main()
{
    for( int i = 0;  i < countOf( circleIndices );  ++i )
    {
        wcout << circleIndices[i] << ' ';
    }
    wcout << endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T10:45:30.493

在 C++ 中，函数不能返回数组，因此不能用于初始化数组。您有两个选项可以使用：

```
static const int* CIRCLEINDICES = GenerateCircleIndices(); 
```

或者

```
static int CIRCLEINDICES[some_size];
GenerateCircleIndices(CIRCLEINDICES); 
```

# javascript - 在 JavaScript 中隐藏“div”标签

> ID：12107671
> 
> 赞同：3
> 
> 时间：2012-08-24T10:30:48.140
> 
> 标签：javascript, html, dreamweaver

我有 JavaScript 代码，当它被点击时隐藏标签：

```
document.getElementById("div").style.visibility="hidden"; 
```

虽然当我这样做的时候，即使div标签被隐藏了，div标签所在的地方还是有一个空间。如何使用 JavaScript 折叠整个 div 标签？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T10:31:54.653

利用：

```
document.getElementById("div").style.display = 'none'; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-24T10:31:57.167

你应该使用：

```
document.getElementById("div").style.display = "none"; 
```

* * *

只是提到`getElementById()`将寻找`div`id 的`div`，我建议您将其更改为更明显的内容，例如：

```
<div id="container"><!--Content--></div> 
```

那么你的 JavaScript 可能是：

```
document.getElementById("container").style.display = "none"; 
```

检查[here](http://webdesign.about.com/od/css/f/blfaqhidden.htm)`display:none`以查看和之间的区别`visibility:hidden`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T10:32:54.000

尝试这个 ..

```
 document.getelementById("div_id").style.display = 'none'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T10:35:41.343

```
document.getElementById("yourdivID").style.display = 'none'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T10:42:52.737

利用

```
document.getElementById("divID").style.display = "none"; 
```

或者

```
document.getElementsByTagName("div").style.display = "none"; 
```

**注意：只选择具有属性`document.getElementById()`的元素。`id`**

# oracle - 在选择列表中的 Select 语句中排序

> ID：12107672
> 
> 赞同：0
> 
> 时间：2012-08-24T10:30:57.553
> 
> 标签：oracle, select, sql-order-by

当我们在 Select List 中使用 Select Query 时，我们可以使用 Order By 子句吗？

我想写这样的查询：-

```
select col1
     , col2
     , (select colX from table2 where table2.col1=table1.col1 and rownum<2 order by colY desc) 
     , (select colXX from table3 where table3.col1=table1.col1 and rownum<2 order by colYY desc)
from table1; 
```

我不能加入这个表。它只是我想要的例子。

好的。事情就是这样。我有以下用 SQL Server 编写的代码。我想把它转换成甲骨文。

```
SELECT
BANK_ADDRESS1= (SELECT top 1 OWNER_ADDRESS1 
            FROM OWNER_ADDRESS OA, BANK_ACCOUNT
            WHERE PAYMENT.BANK_ACCOUNT_ID = BANK_ACCOUNT.BANK_ACCOUNT_ID
                    and BANK_ACCOUNT.BANK_ID = OA.OWNER_ID
                    order by Isnull (OA.primary_addr , 'N') desc),
PAYEE_ADD1 = (  SELECT top 1 OWNER_ADDRESS1 
                FROM OWNER_ADDRESS OA 
                WHERE OA.OWNER_ID = PAYEE_OWNER.OWNER_ID 
                order by Isnull (OA.primary_addr , 'N') desc ),
FROM    PAYMENT 
            inner JOIN PAYEE ON PAYMENT.PAYMENT_ID = PAYEE.PAYMENT_ID
            inner join OWNER PAYEE_OWNER on PAYEE_OWNER.OWNER_ID = PAYEE.PAYEE_NAME_ID 
```

希望这会清楚我真正想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:52:40.783

你想要这样的东西：

```
select col1,
       col2,
       (select colX
          from (select col1, colX from table2 order by colY desc) table2
         where table2.col1 = table1.col1
           and rownum < 2),
       (select colXX
          from (select col1, colXX from table3 order by colYY desc) table3
         where table3.col1 = table1.col1
           and rownum < 2)
  from table1; 
```

或这个：

```
select col1,
       col2,
       (select max(colX) keep(dense_rank last order by colY)
          from table2
         where table2.col1 = table1.col1),
       (select max(colXX) keep(dense_rank last order by colYY)
          from table2
         where table2.col1 = table1.col1)
  from table1; 
```

这个子选择

```
(select colX from table2 where table2.col1=table1.col1 and rownum<2 order by colY desc) 
```

即使它起作用也不会返回您期望的结果，因为 rownum 是在 order by 之前计算的。您将从满足条件 table2.col1 = table1.col1 的那些中获得随机行。

尝试

```
select (SELECT max(OWNER_ADDRESS1) keep(dense_rank last order by nvl(oa.primary_addr, 'N'))
          FROM OWNER_ADDRESS OA, BANK_ACCOUNT
         WHERE PAYMENT.BANK_ACCOUNT_ID = BANK_ACCOUNT.BANK_ACCOUNT_ID
           and BANK_ACCOUNT.BANK_ID = OA.OWNER_ID) bank_address1,
       (SELECT max(OWNER_ADDRESS1) keep(dense_rank last order by nvl(oa.primary_addr, 'N'))
          FROM OWNER_ADDRESS OA
         WHERE OA.OWNER_ID = PAYEE_OWNER.OWNER_ID) payee_add1
  from PAYMENT
 inner JOIN PAYEE
    ON PAYMENT.PAYMENT_ID = PAYEE.PAYMENT_ID
 inner join OWNER PAYEE_OWNER
    on PAYEE_OWNER.OWNER_ID = PAYEE.PAYEE_NAME_ID 
```

（我可能会犯一些语法错误，无法检查）。

# machine-learning - weka SMO分类器中如何实现Multiclass分类？

> ID：12107673
> 
> 赞同：0
> 
> 时间：2012-08-24T10:31:06.463
> 
> 标签：machine-learning, weka, smo

我正在使用 weka 进行分类。在 weka 中，我使用 SMO 对文档进行分类。在某些情况下，SMO 返回错误的类别。

例如，以 2 类计算机和 Cricket 为例。首先我为这 2 个类别训练并创建了模型。然后我将测试一个文档，其中内容与这两个类别以 50:50 的比例相关。SMO 仅返回第一类计算机。如果 50:50 的比例意味着我需要返回这两个类别。

如何在 SMO 分类器中实现多类分类[？](http://en.wikipedia.org/wiki/Multiclass_classification)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:18:34.173

通常，分类器会给出一个结果。据我了解您的问题，您需要[distributionForInstance](http://weka.sourceforge.net/doc/weka/classifiers/functions/SMO.html#distributionForInstance%28weka.core.Instance%29)。这种方法会给你上课的概率。在您的示例中，您应该得到 1/2 和 1/2 的概率。

你提到

> 是的，只有我得到错误的概率。对于计算机课，我得到 0.63 和板球 0.36。但是两个类别的内容和字数相同

您的解释的问题是您希望类别概率仅来自内容和单词数量。例如对于朴素贝叶斯来说是这样，但对于其他分类器来说通常不是这样。如果您尝试使用朴素贝叶斯进行相同的分类，您可能会看到预期的概率。

您的类概率是根据 SVM 中的支持向量给出的。这意味着根据支持向量，您的 0.63 概率类更有可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T20:38:32.880

我知道人们可能会使用不同的术语，但对于您的问题，最普遍接受的术语是“多标签分类”（https://en.wikipedia.org/wiki/Multi-label_classification）。

我认为提到多类分类的维基百科文章写错了，或者是来自不同领域的术语使用了类似的方法。

多类分类**通常**意味着将数据点**仅**分类为许多（> 2）类中的一个，而不是多标签分类，这意味着将数据点分类为**超过 1**个可能的类。

您可以查看[Meka](http://meka.sourceforge.net/) - Weka 的扩展，实现了一些多标签分类器。我知道你想使用 weka，但如果没有，你可以试试[multilabel libsvm。](http://www.csie.ntu.edu.tw/~cjlin/libsvmtools/multilabel/.)

# android - 如何在android中更改条形图的背景颜色？

> ID：12107676
> 
> 赞同：0
> 
> 时间：2012-08-24T10:31:17.597
> 
> 标签：android, background, charts

谁能告诉我如何更改在 android 中使用 achartengine 创建的条形图的背景颜色？

请参考下图。

![在此处输入图像描述](../Images/41ada6527ff82fed9c2f5a86a42f1c86.png)

*请访问我的来源以供参考*

**BarActivity.java**

```
 public class BarActivity extends Activity 
{
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    Intent intent = createIntent();
    startActivity(intent);
}

  public Intent createIntent() 

  {

String[] titles = new String[] { "Order's profit of the year", " " };
List<double[]> values = new ArrayList<double[]>();
values.add(new double[] { 29, 83, 47, 33 });
values.add(new double[] {});

int[] colors = new int[] { Color.BLUE, Color.BLACK};

XYMultipleSeriesRenderer renderer = buildBarRenderer(colors);
renderer.setOrientation(Orientation.HORIZONTAL);

setChartSettings(renderer, "Profit for the year 2012", " ", " ", 0,100, 0,100, Color.GRAY, Color.LTGRAY);

renderer.setXLabels(1);
renderer.setYLabels(10);

renderer.addXTextLabel(10.75, "ord1");
renderer.addXTextLabel(20.75, "ord2");
renderer.addXTextLabel(30.75, "ord3");
renderer.addXTextLabel(40.75, "ord4");

int length = renderer.getSeriesRendererCount();
for (int i = 0; i < length; i++) 
{
  SimpleSeriesRenderer seriesRenderer = renderer.getSeriesRendererAt(i);
  seriesRenderer.setDisplayChartValues(true);
  }

return ChartFactory.getBarChartIntent(this, buildBarDataset(titles, values), renderer,Type.DEFAULT);
}

    protected XYMultipleSeriesRenderer buildBarRenderer(int[] colors) 
    {

// creates a SeriesRenderer and initializes it with useful default values as well as colors

    XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();

    renderer.setAxisTitleTextSize(16);

    renderer.setChartTitleTextSize(20);

    renderer.setLabelsTextSize(10);

    renderer.setLegendTextSize(10);

    int length = colors.length;

    for (int i = 0; i < length; i++) 
    {
      SimpleSeriesRenderer r = new SimpleSeriesRenderer();
      r.setColor(colors[i]);
      renderer.addSeriesRenderer(r);
    }
    return renderer;
  }

    protected void setChartSettings(XYMultipleSeriesRenderer renderer, String title, String xTitle,
String yTitle, double xMin, double xMax, double yMin, double yMax, int axesColor,int labelsColor) 
{

  // sets lots of default values for this renderer

   renderer.setChartTitle(title);

   renderer.setXTitle(xTitle);
   renderer.setYTitle(yTitle);

   renderer.setXAxisMin(xMin);
   renderer.setXAxisMax(xMax);

   renderer.setYAxisMin(yMin);
   renderer.setYAxisMax(yMax);

   renderer.setAxesColor(axesColor);
   renderer.setLabelsColor(labelsColor);
}

protected XYMultipleSeriesDataset buildBarDataset(String[] titles, List<double[]> values) 
{

    // adds the axis titles and values into the dataset

    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    int length = titles.length;

    for (int i = 0; i < length; i++) 
    {
      CategorySeries series = new CategorySeries(titles[i]);
      double[] v = values.get(i);
      int seriesLength = v.length;
      for (int k = 0; k < seriesLength; k++) 
      {
        series.add(v[k]);
      }

      dataset.addSeries(series.toXYSeries());
     }
    return dataset;
    }
} 
```

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T10:34:48.363

尝试

```
renderer.setApplyBackgroundColor(true);
renderer.setBackgroundColor(Color.WHITE); 
```

# c# - Java 到 C# - 从 jar 服务器向 C# 客户端发送/读取字节

> ID：12107681
> 
> 赞同：1
> 
> 时间：2012-08-24T10:31:38.600
> 
> 标签：c#, java, winforms, ascii, extended-ascii

我正在编写一个 Windows 应用程序。从 jar 文件发送/接收字节时遇到问题。

jar 文件向我发送一个 2 字节 [即。！©]

我可以正确读取第一个字节，因为它在字符代码 0-127 内。但是对于第 2 个字节：扩展的 ASCII 表示来自 jar 文件的“©”，它以 .</p> 的形式进入 C# 应用程序

同样，当我将“©”发送到 jar 文件时，jar 将其读取为

请指导我如何解决这个问题。

我正在使用此代码从 jar 中读取字节：

```
while (m_socClient.Available > 0)
{
    byte[] buffer = new byte[2048];
    int iRx = m_socClient.Receive(buffer);
    char[] chars = new char[iRx];
    System.Text.Decoder d = System.Text.Encoding.UTF8.GetDecoder();
    int charLen = d.GetChars(buffer, 0, iRx, chars, 0);
    System.String szData = new System.String(chars);
    byte[] q1 = Encoding.GetEncoding("Windows-1252").GetBytes(szData.Substring(0, 1));
    byte[] r1 = Encoding.GetEncoding("Windows-1252").GetBytes(szData.Substring(1, 1));
    int qu = Convert.ToInt32(q1[0].ToString());
    int re = Convert.ToInt32(r1[0].ToString());   
} 
```

我正在使用此代码将字节发送到 jar：

```
var q = Encoding.GetEncoding("Windows-1252").GetString(new byte[] { quotient });
var r = Encoding.GetEncoding("Windows-1252").GetString(new byte[] { remainder });
Object objData_h = q.ToString() + r.ToString();
byte[] byData_h = System.Text.Encoding.ASCII.GetBytes(objData_h.ToString());
m_socClient.Send(byData_h); // send the data to jar file. 
```

请帮助我好吗？如何在 C# 和 java 中获得相同的字符代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:01:58.837

我认为您在编码方面遇到问题。尝试这样做：

```
var q = new char[] { '!', '\u00a9'}; // u00a9 is copyright symbol in unicode.
byte[] b = System.Text.Encoding.ASCII.GetBytes(q); 
```

检查字节数组，您会看到它包含两个字节，21（即！）和 3f，其中第二个不是您想要的。版权标志需要多个字节，但 ascii 是单字节。

使用

```
byte[] b = System.Text.Encoding.UTF8.GetBytes(q); 
```

为这两个字符提供三个字节。

# c# - 使用 SQL 中的 SELECT 时将单撇号转义到 C# 中的数组中，然后 UPDATE

> ID：12107685
> 
> 赞同：0
> 
> 时间：2012-08-24T10:31:55.200
> 
> 标签：c#, .net, sql, tsql

在我的 C# 代码中，我将表的所有 id 读入字符串数组`ids[i]`，然后更新表 WHERE user_id = id[i] 中的不同列。

当正在读取的 id（也传递回`UPDATE`）包含撇号时会出现问题 - '

```
 while (rdr.Read()
       {
          ids[i] = rdr.GetValue(0).ToString().Trim();
          ids[i].Replace("'", "''");
          .... 
```

我也尝试过`ids[i].Replace("'", "\'");`
，`ids[i].Replace("'", "-");`但我确信这会抛弃我的 WHERE，因为它会查找 user_id "O-Test" 而不是 "O'Test"。

我的 UPDATE SQL 是这样的：

```
 UPDATE [User]
 SET first_name = '{1}'
 WHERE [user_id] = '{2}' 
```

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T10:33:29.193

您需要将其分配回`ids[i]`

```
ids[i] = ids[i].Replace("'", "''"); 
```

`ids[i].Replace("'", "''");`这只会在内存中创建一个字符串并将其丢弃，您需要将其分配回`ids[i]`您的 while 循环中。

所以你的代码应该是：

```
while (rdr.Read()
       {
          ids[i] = rdr.GetValue(0).ToString().Trim();
          ids[i] = ids[i].Replace("'", "''");
          .... 
```

# php - 用什么？time() 函数还是 $_SERVER['REQUEST_TIME'] ？哪个更好？

> ID：12107688
> 
> 赞同：14
> 
> 时间：2012-08-24T10:32:01.440
> 
> 标签：php, performance, time, reliability

这两个时间函数中哪一个更好？

我的网站上有一个表单，每微秒或更短时间就有数千个用户提交，因此我的服务器上同时有数千个请求。

所以我想使用在执行时不使用任何睡眠的那个。此外，独特性`$_SERVER['REQUEST_TIME']`如何`time()`？两者每微秒都会改变吗？

每次我提交表单时，$_SERVER['REQUEST_TIME'] 会改变吗？就像，time() 函数会在每个时间差时发生变化。

我需要为用户提供一个唯一的 url 以进行验证，在其中附加从两者中的任何一个生成的唯一结果？另外，使用 microtime() 会使 PHP 休眠吗？不是吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-24T10:35:44.033

这取决于。

`$_SERVER['REQUEST_TIME']`对应于请求开始的时间，Web 服务器提供此数据。

`time()`实际上运行系统调用以检查调用此行的时间。

您需要更具体地说明您想要做什么，以便我们为您提供完整的答案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T10:36:46.180

`time()`每秒变化一次。 `microtime()`（可选，使用`(true)`）更频繁。

`$_SERVER['REQUEST_TIME']`在 PHP 进程启动时设置，但它只是一个简单的变量查找，因此速度更快。大多数情况下，您不需要微秒分辨率，特别是如果该过程无论如何只运行几分之一秒来生成网页。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-18T15:58:06.200

来自 php.net：

> $_SERVER['REQUEST_TIME_FLOAT'];
> 请求开始的时间戳，精度为微秒。

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php) （但请注意，请参阅 Alister 关于使用 REQUEST_TIME 的说明）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-24T10:35:12.220

`$_SERVER['REQUEST_TIME']`是会话开始的时间，它与使用完全不同，`time()`或者`microtime()`因为它对于该运行是恒定的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-24T10:36:18.210

您应该考虑基于[microtime()的毫秒数](http://uk.php.net/manual/en/function.microtime.php)

```
$milliseconds = round(microtime(true) * 1000); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-24T10:34:12.253

您应该使用 time() 或 microtime() 或 uniqid() 如果这需要是唯一的用于验证目的。

问题是，为什么你需要时间变得独一无二？

编辑：因为你编辑了你的问题。

$_SERVER['REQUEST_TIME'] 将为您提供请求开始的时间戳。它会根据用户发出请求的时间而改变。

# c# - 使用多个端口的套接字客户端/服务器

> ID：12107693
> 
> 赞同：-1
> 
> 时间：2012-08-24T10:32:15.060
> 
> 标签：c#, sockets, networking, tcp, tcplistener

起初我是网络编程的新手。假设我们有正在侦听端口 5001 的服务器应用程序，那么当客户端应用程序与服务器建立连接时，是否可以为该客户端打开一个专用端口并使用该端口并保持 5001 仅用于接受客户端连接请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:35:07.947

您可以继续使用侦听器套接字接受新的套接字。不需要做任何特别的事情。

# c# - 通过数据集数据源绑定数据网格：图像列不显示图像但 system.byte []

> ID：12107694
> 
> 赞同：0
> 
> 时间：2012-08-24T10:32:17.180
> 
> 标签：c#, asp.net, sql, visual-studio-2010, gridview

我已将一个网格视图拖放到设计器中，并将数据源配置为新的 SQLDataSource，我在其中选择了一个 Image 表。其中，有 3 列（Id、Name、Image 作为图像数据类型）。但是，一旦我配置并运行该应用程序，它就不会显示图像列。请帮帮我，我想将 SQL DB 中的图像显示到数据网格第 3 列...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:39:24.770

@Divine：如果您发布代码，它将更有帮助。

几个建议。

1.  不要使用自动生成的数据网格列，因为数据网格默认不支持图像模板列。

2.  您应该搜索以创建 DataGrid 模板列。这将帮助您显示图像或帮助您自定义数据并以某种格式呈现。

这篇文章可能会对你有所帮助。：http: [//msdn.microsoft.com/en-us/library/aa479316.aspx](http://msdn.microsoft.com/en-us/library/aa479316.aspx)

# flash - as2 全旋转时制导导弹错误

> ID：12107697
> 
> 赞同：2
> 
> 时间：2012-08-24T10:32:36.920
> 
> 标签：flash, actionscript-2

在我目前的项目中，我有一些寻的代码（不是导弹独有的），当导弹指向正上方时，我在计算中遇到了一些错误，它开始变得异常并且经常转向错误的方向。大多数情况下它可以工作，但在完全旋转后它似乎会中断。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:36:40.507

听起来您的旋转变为负数或大于 360。这可能会导致某些计算出现问题，例如，如果您正在检查旋转是否大于或小于 180，则完整的旋转将使它总是大于 180。

尝试将这样的内容添加到您的代码中：

```
R=Self._rotation;
if(R<0){R+=360;}
if(R>360){R=R%360;} 
```

# php - Smarty和jquery移动碰撞

> ID：12107701
> 
> 赞同：0
> 
> 时间：2012-08-24T10:32:40.207
> 
> 标签：php, jquery, jquery-mobile, smarty

我刚刚遇到了一个问题：模板中的 smarty sintaxis 在 {} 之间，并且其中一个 jquery 移动组件将 {} 用于其 onw 目的，所以我从 smarty 收到错误。这个问题有解决方案吗？

```
<input name="mydate" id="mydate" type="date" data-role="datebox" data-options='{"mode": "calbox"}'> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T10:36:48.970

使用[`{literal}`](http://www.smarty.net/docsv2/en/language.function.literal)标签：

```
<input ... data-options='{literal}{"mode": "calbox"}{/literal}'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:52:25.720

如果您使用 smarty 3，只需在 {} 之间留空格：

```
<input name="mydate" id="mydate" type="date" data-role="datebox" data-options='{ "mode": "calbox" }'> 
```

请参阅“(Javascript) Auto-Escapement”下的[http://www.smarty.net/v3_overview](http://www.smarty.net/v3_overview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T15:56:04.833

您也可以使用`{rdelim}`and`{ldelim}`作为替代。如果您想混合使用 js 和 smarty，我发现它特别有用。它们将被 smarty 替换为花括号，您仍然可以在它们之间使用 smarty 代码，而使用`{literal}`. 您的示例将如下所示：

```
<input name="mydate" id="mydate" type="date" data-role="datebox" data-options='{ldelim}"mode": "calbox"{rdelim}'> 
```

# ios - iOS Core Data - 获取一个实体对象是否会自动从关系实体中获取所有对象？

> ID：12107704
> 
> 赞同：0
> 
> 时间：2012-08-24T10:32:52.767
> 
> 标签：ios, performance, core-data, nsfetchrequest

我有实体**City**。

我还有其他实体：**BankBranches**、**NotaryBranches**等。这些实体与**City实体是****多对一的**关系。此外，**城市**实体与这些实体具有**一对多的**关系。

 ******那么，如果我只获取 City 实体的城市名称，是否也会获取这些实体对象？我警告获取性能，因为有时我只想获取城市名称，而不是触及所有其他相关对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:33:36.147

不，Core Data 使用一种称为“故障”的机制来减少使用的内存量。有关于它如何工作的描述：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFaultingUniquing.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFaultingUniquing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:47:13.573

如果您只搜索城市名称，我建议您使用 NSFetchRequest 实例的 setPropertiesToFetch: 方法来提高获取效率。您将分配一个代表名称的 NSPropertyDescription。以下是它的工作原理：

```
NSFetchRequest *fetchRequest=[[NSFetchRequest alloc] init];
NSEntityDescription *entity=[NSEntityDescription entityForName:@"YourEntity" inManagedObjectContext:context];
[fetchRequest setEntity:entity];
[fetchRequest setResultType:NSDictionaryResultType];
NSDictionary *properties=[entity propertiesByName];
[fetchRequest setPropertiesToFetch:[NSArray arrayWithObject:[properties valueForKey:@"yourPropertyName"]]]; 
```

使用此获取请求，您将获得每个获取的对象的字典，并且您获得的唯一属性是您获取的那个。此方法的唯一缺点是您将无法在完全持久跟踪模式下使用 NSFetchedResultsController。基本上，你不会使用这个从 NSFetchedResultsController 获得跟踪模式。******

# java - 了解使用 muscg 生成的音频指纹文件

> ID：12107709
> 
> 赞同：4
> 
> 时间：2012-08-24T10:33:04.017
> 
> 标签：java, audio, audio-fingerprinting

我一直在使用 musicg API 来生成音频文件的指纹信息。信息正在保存在文件中，但内容似乎已编码。该文件是否有任何特定的解码器，因为我不确定其编码的确切格式。

我需要解码文件以将其与音乐网络应用程序中有关音频文件的元数据信息进行比较。

# windows - 在 Windows 批处理中使用动态变量

> ID：12107712
> 
> 赞同：1
> 
> 时间：2012-08-24T10:33:15.297
> 
> 标签：windows, variables, dynamic, batch-file

我有以下批处理文件：

```
set var1=LongOption1
set var2=Longoption2
set var3=LongOption3

if "%1" == "" (set activeVar=%var1%) else (

set activeVar=%1

) 
```

我的目标是实现一个动态变量，所以我想用一个参数启动我的批处理文件。如果我没有将参数传递给我的批处理文件，它会将我的 activeVar 设置为 var1。但实际上我想传递一个作为活动变量的变量。为了更清楚：

我想有机会通过控制台上的一个参数告诉我的批处理文件，它应该在以后的语句中进行进一步处理。所以我可以这样称呼我的批次：

```
cmd --> ..../batch.bat var2 
```

所以我将字符串传递`var2`给我的批次。现在，因为第一个参数不为空，批处理应该跳转到 else 路径并将 my 设置`activeVar`为`var2`. （我不想设置`activeVar`为`"var2"`，我希望它是`"LongOption2"`）有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:28:40.437

您可以在此处使用延迟扩展或`call`.

```
set var1=LongOption1
set var2=Longoption2
set var3=LongOption3
setlocal EnableDelayedExpansion

if "%1" == "" (
  set activeVar=%var1%
) else (
  set activeVar=!%1!
) 
```

或使用`CALL`

```
set var1=LongOption1
set var2=Longoption2
set var3=LongOption3

if "%1" == "" (
  set activeVar=%var1%
) else (
  CALL set activeVar=%%%1%%
) 
```

# amazon-ec2 - EC2 实例重启 - 实例 ID 不存在

> ID：12107715
> 
> 赞同：2
> 
> 时间：2012-08-24T10:33:25.230
> 
> 标签：amazon-ec2, boto

我正在尝试重新启动远程实例：

```
ec2 = boto.connect_ec2(aws_access_key_id = key_id, aws_secret_access_key = access_key)
ec2.reboot_instances([instanceId]) 
```

并得到了错误`The instance ID 'i-xxxxx' does not exist`

看起来我应该连接到区域 - 如果实例 ID 是唯一的输入参数，我如何获得这个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-21T01:39:50.193

凭据相关信息，例如访问密钥、秘密访问密钥和区域，应在您的代码之外配置。这是为了确保便携性。

boto3 查找凭据的机制是搜索可能位置的列表，并在找到凭据后立即停止。Boto3 搜索凭据的顺序是：

1.  在`boto.client()`方法中将凭据作为参数传递
2.  创建 Session 对象时将凭据作为参数传递
3.  环境变量
4.  共享凭证文件 ( `~/.aws/credentials`)
5.  AWS 配置文件 ( `~/.aws/config`)
6.  担任角色提供者
7.  Boto2 配置文件（`/etc/boto.cfg`和`~/.boto`）
8.  配置了 IAM 角色的 Amazon EC2 实例上的实例元数据服务。

如果脚本本身在 EC2 实例中运行，则最佳做法是依赖将承担 IAM 角色的实例元数据。

假设您从本地计算机调用脚本，最简单的方法是`~/.aws/credentials`通过运行`$ aws configure`并指定那里的区域来进行修改。

阅读更多：[http ://boto3.readthedocs.io/en/latest/guide/configuration.html](http://boto3.readthedocs.io/en/latest/guide/configuration.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:10:44.463

您的实例是否处于运行状态？尝试使用此命令：-

```
reservations = ec2_conn.get_all_instances(filters={'instance-id' : 'i-xxxxxxxx'})
new_instance = reservations[0].instances[0] 
```

# cocos2d-iphone - Sprite Body 无法完美跳跃

> ID：12107719
> 
> 赞同：0
> 
> 时间：2012-08-24T10:33:44.243
> 
> 标签：cocos2d-iphone, box2d-iphone

在我的演示游戏中，我的精灵身体不能顺利跳跃。当我按下跳跃按钮时身体跳跃但不能完美。

我给你看代码。

```
-(void)jump:(b2Body*)ballBody
{
    if (jumpSprte.active==YES) 
    {
        b2Vec2 force=b2Vec2(0,200);
       // ballBody->ApplyLinearImpulse(force, ballBody->GetWorldCenter());
        ballBody->SetLinearVelocity(force); 
    }

} 
```

代码是真实的，但不能完美地跳出来，所以任何人都知道而不是告诉我。提前致谢

# ios - ios中的动态水平滚动条

> ID：12107720
> 
> 赞同：1
> 
> 时间：2012-08-24T10:33:46.357
> 
> 标签：ios, cocoa-touch, scrollbar

我有两个水平滚动条，上滚动条的内容是静态的，而下滚动条的内容是动态的，并且取决于上滚动条中项目的选择。
现在选择不是通过单击进行的正常选择，当该特定项目位于滚动条上方的该指针下方时会发生选择。由于上部滚动条的内容是静态选择不是问题，因为我可以识别哪个项目在那个下方借助偏移量的指针，我可以借助滚动视图委托方法`scrollViewDidEndDecelerating`&获得`scrollViewDidEndDragging`。
问题是下部滚动条的内容是动态的，这就是为什么我无法识别指针下的项目，有没有办法识别当前在下部滚动条的指针下的项目，因为进一步的处理取决于选择第二个滚动条中的项目。如果有人知道如何做到这一点，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:47:22.533

当您说“动态”时，我不太确定您的意思。第二个下部滚动条的内容经常变化。因此，当您填充该滚动视图时，您应该使用可变容器来跟踪位置。

例如，为每个水平项目创建一个 NSRange（即位置为 0，长度为 100，位置为 100，长度为 50），将其转换为 NSValue，并将此 NSValue 作为键和您的“对象”存储在该位置在可变字典中。当您需要知道指针下的内容（即 x=160）时，将该值添加到较低的 scrollView contentOffset（即 200）并获得 260 作为有问题的偏移量，然后遍历您的字典寻找包含范围 260 的项目。

# facebook - Facebook 喜欢按钮和帖子到墙上不显示标题、描述、图像

> ID：12107727
> 
> 赞同：1
> 
> 时间：2012-08-24T10:34:23.603
> 
> 标签：facebook, iframe, facebook-like, facebook-opengraph

我在我的网站上创建了一个新页面，[http://www.example.com/123456](http://www.example.com/123456)（因为它对于 1-2 天的旧页面来说不是问题）。

我已正确设置元标记：

```
<meta property="fb:page_id" content="123456789" />
<meta property="og:description" content="Description here ..." />
<meta property="og:image" content="http://example.com/images/123456.jpg" />
<meta property="og:site_name" content="Example" />
<meta property="og:title" content="Title of page" />
<meta property="og:type" content="blog" />
<meta property="og:url" content="http://www.example.com/123456" /> 
```

当点击like按钮时，不显示标题、描述和图像，它只显示页面的url。

当我访问调试器工具[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)并输入我的页面 url 时，它会获得正确的对象属性、原始开放图形文档信息和 URL。一个警告应该修复的打开图形警告 - 无关属性：这种类型的对象不允许名为“fb:page_id”的属性。

但是当我再次访问该页面（http://www.example.com/123456）时，点击了 facebook like 按钮，可以看到磁贴、描述、图像和 url。（fb:page_id 警告无效）

问题：

1.  这是否意味着facebook本身不会缓存数据，您每次都需要强制它？
2.  如果是，这对旧页面是如何工作的（页面已在 1-2 天前创建并受到某些人的喜欢）。
3.  facebook中是否有任何方法，类似于我们在robots.txt中用于站点地图的谷歌索引

    站点地图：[http ://www.example.com/googlenews.xml](http://www.example.com/googlenews.xml)

仅供参考-我可以看到 facebookexternalhit/1.0 和 facebookexternalhit/1.1 正在访问我的网站，这意味着 facebook 正在获取数据。我正在创建的新页面不受 htaccess 或 IP 限制的密码保护。

# python - 如何在 Python 中生成带前缀的随机数

> ID：12107731
> 
> 赞同：-4
> 
> 时间：2012-08-24T10:34:29.880
> 
> 标签：python, random, numbers

我需要在前缀中生成所有可能的数字：

```
import random
prefix = "05"
print prefix + #all Possible Numbers Here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:39:56.900

你的意思是你如何生成一个随机数并在它前面加上一个给定的字符串？以您的代码为例，您可以这样做：

```
import random

prefix = '05'    
print prefix + str(random.randrange(1, 100) 
```

这将选择 1 到 100 之间的随机整数，因此您可以进行相应调整。对于随机非整数，将其替换为`random.random()`.

# c# - sqlazure 无法登录

> ID：12107732
> 
> 赞同：0
> 
> 时间：2012-08-24T10:34:38.033
> 
> 标签：c#, azure, azure-sql-database

[ScriptObject_TypeDoesNotExist] 参数：XMLHttpRequest 调试资源字符串不可用。通常，关键和论据提供了足够的信息来诊断问题。请参阅[http://go.microsoft.com/fwlink/?linkid=106663&Version=8.1.10411.0&File=System.Windows.Browser.dll&Key=ScriptObject_TypeDoesNotExist](http://go.microsoft.com/fwlink/?linkid=106663&Version=8.1.10411.0&File=System.Windows.Browser.dll&Key=ScriptObject_TypeDoesNotExist) 参数名称：typeName

当我尝试登录 SQL azure 时出现此错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T22:19:06.817

此错误消息根本与 SQL 数据库无关，而是显示您的运行时存在一些问题。

根据错误消息，我猜你试图从 SL 应用程序或类似的东西连接 SQL 数据库。基于此错误，它可能特定于 SL 运行时，您可能没有合适的运行时开始。有最新的运行时间来克服这个错误。

# ruby-on-rails - 流氓 Ruby 进程消耗所有 CPU。Phusion Passenger 提供的 Ruby on Rails

> ID：12107735
> 
> 赞同：3
> 
> 时间：2012-08-24T10:34:44.103
> 
> 标签：ruby-on-rails, ruby, gdb, passenger

在 Apache 上，Passenger 服务的 RoR 应用程序存在问题。该应用程序在启动或 Apache 重新启动时很好，但经过一段时间后，我们开始看到正在消耗所有可用 CPU 的 ruby​​ 进程。

有时这些过程会以乘客状态显示，有时则不会。它们总是出现在最前面，占用了所有的 CPU。这些逐渐建立起来并且永远不会被Passenger杀死。

我尝试了以下诊断：

## 追踪：

每次我对它们运行 strace 时，它​​们都没有输出。如果我从乘客状态将 strace 附加到一个健康的 ruby​​ 进程，那么我可以看到正在记录的有关该进程正在做什么的信息。这是流氓进程的输出：

```
strace -f -p 8648
Process 8648 attached with 2 threads - interrupt to quit
[pid  8650] select(6, [5], NULL, NULL, NULL

I'll then go into top and the thread is sigging at 88%. When I o back to strace.. there is nothing. Just the following output:
strace -c -p 8648
Process 8648 attached - interrupt to quit
^CProcess 8648 detached 
```

## 数据库：

我对这些流氓进程之一运行了以下命令：

```
sudo gdb
attach 12345     <--- replace "12345" with the actual PID 
```

线程应用所有 bt

然后我得到了这个 github gist 中描述的输出：[https ://gist.github.com/3448635](https://gist.github.com/3448635)

## ruby_gdb：

我使用了在 github 上的 pusewicz/ruby-gdb 下找到的 ruby​​_gbd 宏，然后运行：

```
sudo gdb /path/to/ruby PID 
```

在 gdb 中：我尝试运行以下命令：

```
session-ruby
redirect_stdout # redirects gdb output to /tmp/ruby-debug.PID   
eval "caller"   # dumps backtrace 
```

但是，当我尝试将进程输出重定向到 std_out 时，它似乎杀死了进程，因为之后我无法运行 eval 'caller'。

/tmp/ruby-debug.12840 中没有输出（该文件不存在）但是我确实在 Apache error_log 中找到了这个。此条目指的是我尝试调试的进程（PID = 12840）......但是我不确定这个错误是指进程正在做什么还是我尝试重定向 std_out 时遇到的问题

可以在此处的要点中找到实际的堆栈跟踪：[https ://gist.github.com/3448744](https://gist.github.com/3448744)

## SIGABRT

我也试过用 SIGABRT 信号杀死线程。不幸的是，日志中没有显示任何内容。

## 应用版本：

Phusion 乘客 3.0.11，红帽 linux Ruby 1.9.3-p125 Rails 3.1.3

我真的很感激这方面的任何帮助。我翻遍了邮件列表和论坛，试图找到这个问题的答案，但还没有成功。谢谢，伊恩

# java - 如何确定我的网站是通过什么 IP 地址访问的？

> ID：12107739
> 
> 赞同：8
> 
> 时间：2012-08-24T10:35:03.437
> 
> 标签：java, jsp, url, jakarta-ee, servlets

我有一个 Web 应用程序，为此我想捕获正在访问我的网站的客户端的 IP 地址，以便我可以知道哪个区域最常访问该应用程序。我`Java EE`在我的应用程序中使用。

如果我们谈论标头以及何时`request`从最终用户发送，可能会有一些解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-24T10:51:21.687

使用接口[ServletRequest中的方法](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html)[getRemoteAddr()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getRemoteAddr())或接口[HttpServletRequest](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)中的方法[getHeaders()](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getHeaders(java.lang.String))：

```
HttpServletRequest httpRequest = (HttpServletRequest) request;
String userIpAddress = httpRequest.getHeader("X-Forwarded-For"); 
```

使用方法[getRemoteAddr](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getRemoteAddr())有一个注意事项：

当然你可以使用这个方法，一般情况下你会得到客户端的IP。但是，如果用户在代理后面，则该方法是无用的。在这种情况下，您将获得代理服务器的 IP 地址，而不是客户端。但代理可能会在特殊`HTTP`标头中包含请求客户端 IP。所以要检索真实客户端IP调用方法`getHeader("X-Forwarded-For")`。

**JSP 中的一个示例用法：**

使用[JSTL](http://www.oracle.com/technetwork/java/index-jsp-135995.html)在会话中使用 IP 地址的设置值：

```
<c:set var="userIp" value="${requestScope.header('x-forwarded-for')}" scope="session" /> 
```

然后在方便的地方从会话中获取这个值。

在 JSP 中，您可以使用`<c:out value="${sessionScope.userIp}" />`或在 servlet 中作为`session.getAttribute('userIp');`

请阅读[文档](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getRemoteAddr())：

> *java.lang.String getRemoteAddr()*返回发送请求的客户端或**最后一个代理**的 Internet 协议 (IP) 地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:24:56.893

除了上述答案（安德烈和斯蒂芬）之外，还使用了一些`analytics`工具。它会让您更全面地了解进入您网站的流量。一个这样的例子是[谷歌分析](http://www.google.com/analytics/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:21:19.050

请求对象作为 Java 参数传递给从 JSP 生成的 servlet 方法。参数的名称是...等等`request`...。

因此，您应该能够在嵌入在 JSP 中的 scriptlet 中引用它；例如

```
 <%
         InetAddress addr = request.getRemoteAddr();
         // blah blah blah
    %> 
```

您是否应该在 JSP 中做这种事情是有争议的。*JSP 应该只*用于格式化输出，这被普遍接受为“最佳实践” 。webapp 的业务逻辑应该在控制器 servlet 中，然后最终转发到 JSP servlet 以生成 HTML（或其他）。

如果您打算将业务逻辑放入 JSP 中，则 scriptlet 往往难以维护……但如果您*只是*要显示 IP 地址，则不必担心。（从工程角度来看，首选的方法是使用标签和 JSP 表达式语言。）

最后，不能保证返回的 IP 地址`getRemoteAddr()`是实际的客户端 IP 地址。它可能是代理的地址，甚至是完全虚构的。

# c# - 远程实例中的 COM+ 调用方法未知名称错误

> ID：12107747
> 
> 赞同：2
> 
> 时间：2012-08-24T10:35:17.527
> 
> 标签：c#, .net, com, remoting

我有一个 COM dll，我通过互操作引用在我的 .net 项目中使用它。现在我需要将此 COM 组件移动到另一台远程机器并在那里创建实例。（类似于进程外的机器外，可能这是远程处理，我不知道 :-)）

我所做的是在服务器机器中创建了一个新的 COM+ 应用程序。在此应用程序中添加了此组件。这就是它在服务器上的 COM+ 接口中的列出方式。 ![在此处输入图像描述](../Images/97cf513b59ac702dc80e11c5a0b17a12.png)

将此应用程序导出为代理安装程序并安装在我的客户端计算机上。使用以下代码访问此

```
Type type;
type = Type.GetTypeFromProgID("DllName.COMName", "serverName", false);
var COMObject = Activator.CreateInstance(type);
var returnValue = COMObject.GetType().InvokeMember("Method_1",   BindingFlags.Public |  BindingFlags.InvokeMethod, null, COMObject, new object[1] { "1" }); 
```

但是在调用 Method_1 时出现 UNKNOWN NAME (0x80020006) 错误？有没有人遇到过类似的问题，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T12:47:27.600

我要做的是：

1) 在 C# 中创建一个等效接口，如下所示：

```
[Guid("<the interface IID goes here>")]
public interface ISomeInterfaceName
{
   int Method1(...);
   int Method2(...);
   int Method3(...);
   ...
} 
```

2）然后这个，而不是你最初的后期绑定代码：

```
Type type = Type.GetTypeFromProgID("DllName.COMName", "serverName", false);
var COMObject = Activator.CreateInstance(type);
var if = (ISomeInterfaceName)COMObject;
if.Method1(...); 
```

注意：IID 必须是来自接口的 IID，不要与 CLSID 混淆。方法的布局应与 COM 完全对应（方法顺序很重要，如何定义参数和返回类型也很重要）

如果你有很多这样的类和接口，你也可以从 COM 组件中[导入 TLB 。](http://msdn.microsoft.com/en-us/library/tt0cf3sx%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:48:03.413

调用该方法时不需要使用 GetType()。`COMObject.InvokeMember()`应该足够了。

此外，尝试从 ClassID 获取类型 - 使用`.GetTypeFromCLSID()`- 而不是 ProgID。

另外而不是`BindingFlags.Public`使用`BindingFlags.Default`. 这将指定所有类型成员都可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:07:17.467

如果您在客户端计算机中正确安装和配置了应用程序代理，您应该能够像创建任何其他对象实例一样实例化您的 COM+。

试试这个：

```
IMyExpectedInterface o = new MyCOMServicedComponent();
o.SomeMethod(); 
```

如果运行不正常，请告诉我您在实例化它时得到的异常结果。

# zend-framework - 如何使用多词搜索进行查询自动完成/建议？

> ID：12107755
> 
> 赞同：2
> 
> 时间：2012-08-24T10:35:49.360
> 
> 标签：zend-framework, search, autocomplete, lucene

我正在使用 zend 框架处理一个网站。我需要在我的网站中使用 zend lucene。我们有一个选项供用户搜索类别、项目等。

我们正在使用带有自动完成选项的 zend lucene。假设我有“iphone 3s”、“iphone 4s”、“iphone 5s”等项目。如果用户键入“iph”，我会得到搜索结果“iphone 3s”、“iphone 4s”、“iphone 5s”。目前，我在单字搜索方面得到了很好的结果。

对于不同的搜索，我使用了不同查询构造 API 的组合。

对于我正在使用的单个单词搜索`Zend_Search_Lucene_Search_Query_Wildcard`，我得到了完美匹配的模式结果。对于我使用的多词搜索`Zend_Search_Lucene_Search_Query_MultiTerm()`，但我只在精确文本搜索的情况下获得结果。有人请帮我集成这个功能吗？

通过使用单个术语我得到了很好的结果`Zend_Search_Lucene_Search_Query_Wildcard`，我需要同样的完美来进行多术语搜索。因为`Zend_Search_Lucene_Search_Query_MultiTerm()`仅在精确搜索文本的情况下返回良好的结果，所以我不能使用自动完成选项。

我的搜索代码如下：

```
$searchfield = $searchtype."_name";//Like category_name
$searchfieldid = $searchtype."_id";//Like category_name
$res_table = "t_".$searchtype;  
$index = Zend_Search_Lucene::open(Zend_Registry::get('_datapath'));

/* Here we used different API for creating query for diffrent pattern
    1) Words < 3 chars(it wont work in wild cart
    2) Single word (pattern matching--wildcard)
    3) More than one word serach
*/
$res = explode(' ',$searchkey);
if(strlen($searchkey) <3) /*if key >=3 then only wildcard search works*/
{
    $term = new Zend_Search_Lucene_Index_Term($searchkey, $searchfield);
    $query = new Zend_Search_Lucene_Search_Query_Term($term);
}
else if(sizeof($res)==1) /*write condition for single word -->check sub str count*/
{   
    $searchkey1 = $searchkey."*";//car*
    $pattern = new Zend_Search_Lucene_Index_Term($searchkey1, $searchfield);
    $query = new Zend_Search_Lucene_Search_Query_Wildcard($pattern);
}
else
{ /*if more than one word comes use different query rather than wildcard query search*/
    $query = new Zend_Search_Lucene_Search_Query_MultiTerm();
    foreach($res as $key => $val)
    {
        /*  TRUE is used to define required term.
            FALSE is used to define prohibited term.
            NULL is used to define a term that is neither required nor prohibited.
            (here we  used last term as null and others are true*/
        if($key == (sizeof($res)-1))
            $signs = null;/*Last item is not a mandatory, so use null*/
        else
            $signs = true;
        $query->addTerm(new Zend_Search_Lucene_Index_Term($val,$searchfield), $signs);
    }
}   
$hits = $index->find($query); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T10:19:24.193

经过长时间的搜索，我得到了解决方案。对于使用自动完成等应用程序，我们可以使用通配符查询和布尔查询。如果搜索文本包含单个单词，则它始终适用于通配符查询[提供的搜索文本包含至少 3 个字符] 但是如果我的搜索词具有 < 3 个字符的通配符查询 api 将不起作用。所以我在第 65 行修改了 \library\Zend\Search\Lucene\Search\Query\Wildcard.php 上的代码。 private static $_minPrefixLength = 1;[最初是 3 现在我更改了限制]。

同样对于多词搜索，我使用空格分割单词并为每个单词创建独立的通配符查询，并使用布尔（和）查询 api 我从通配符 api 加入查询。这个对我有用。我的代码如下：[我的谦虚请求，如果我的代码对任何人有用，请投票给我]

```
 $index = Zend_Search_Lucene::open(Zend_Registry::get('_datapath'));

            $res                 =  explode(' ',$searchkey);            
            $query = new Zend_Search_Lucene_Search_Query_Boolean();
            foreach($res as $key    => $val)
            {
                if(strlen($val)>0)//for wildcard queries atleast 1 items required
                {
                    $searchkey1         = $val."*";//car*
                    $pattern            = new Zend_Search_Lucene_Index_Term($searchkey1, $searchfield);
                    $userQuery          = new Zend_Search_Lucene_Search_Query_Wildcard($pattern);
                    $signs              = true;                     
                    $query->addSubquery($userQuery, $signs /* required */);
                }           

            }

        $hits       = $index->find($query); 
```

# ruby-on-rails - 独角兽 RuntimeError 因为 dalli

> ID：12107756
> 
> 赞同：0
> 
> 时间：2012-08-24T10:35:56.740
> 
> 标签：ruby-on-rails, memcached, dalli

Unicorn 处于循环状态并显示以下错误：

独角兽错误

> 错误 -- : 找不到 dalli_store 的缓存存储适配器（无法加载此类文件 -- active_support/cache/dalli_store）（RuntimeError）

生产.rb

```
config.cache_store = :dalli_store, "127.0.0.1:11211", { :namespace => "my-app", :expires_in => 3600 } 
```

宝石文件

```
gem 'dalli', '~>2.1.0', :git => "git://github.com/mperham/dalli.git" 
```

我在 Rails 控制台中测试过，dalli 似乎没有问题。

```
Loading production environment (Rails 3.2.8)
irb(main):001:0> Rails.cache.write("hello", "world")
=> true
irb(main):002:0> Rails.cache.read("hello")
=> "world"

irb(main):002:0> Rails.cache
=> #<ActiveSupport::Cache::DalliStore:0xabaefc8 @options={:namespace=>"my-app", :expires_in=>3600, :compress=>nil}, @raise_errors=false, @data=#<Dalli::Client:0xabaef00 @servers=["127.0.0.1:11211"], @options={:namespace=>"my-app", :expires_in=>3600, :compress=>nil}, @ring=#<Dalli::Ring:0xa2db0e0 @servers=[#<Dalli::Server:0xa2db158 @hostname="127.0.0.1", @port=11211, @weight=1, @fail_count=0, @down_at=nil, @last_down_at=nil, @options={:down_retry_delay=>1, :socket_timeout=>0.5, :socket_max_failures=>2, :socket_failure_delay=>0.01, :value_max_bytes=>1048576, :username=>nil, :password=>nil, :keepalive=>true, :namespace=>"my-app", :expires_in=>3600, :compress=>nil}, @sock=#<Dalli::Server::KSocket:fd 8>, @msg=nil, @pid=27069, @inprogress=false, @lock=#<Monitor:0xa2db0a4 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0xa2db07c>>, @version="1.4.2", @error=nil>], @continuum=nil, @failover=true>>> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:43:54.157

如果有人遇到类似的问题：我已经删除了捆绑程序下载的 Gemfile.lock 和 dalli gemspec 文件（在 /path/to/app/shared/bundler/gems/ruby/1.8/specifications/dalli.gemspec 之类的地方），运行'捆绑安装'，它有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T18:29:24.277

我有同样的问题，在我的情况下，它是由**“rvm”引起的**

（我的设置是 Phushion-Passenger、Rails3、Memcached）

我修复了它：

```
rvm all do gem install uuidtools 
```

,

```
rvm all do gem install dalli 
```

,

```
rvm all do gem install kgio 
```

,

```
rvm all do gem bundle install 
```

现在我的 memcached 统计数据显示：

```
# nc 127.0.0.1 11211

stats

STAT pid 23112
STAT uptime 53446
STAT time 1367778065
STAT version 1.4.5
STAT pointer_size 64
STAT rusage_user 0.692043
STAT rusage_system 0.000000
STAT curr_connections 7
STAT total_connections 11
STAT connection_structures 8
STAT cmd_get 19
STAT cmd_set 10
STAT cmd_flush 0
STAT get_hits 5
STAT get_misses 14
STAT delete_misses 0
STAT delete_hits 0
STAT incr_misses 0
STAT incr_hits 0
STAT decr_misses 0
STAT decr_hits 0
STAT cas_misses 0
STAT cas_hits 0
STAT cas_badval 0
STAT auth_cmds 0
STAT auth_errors 0
STAT bytes_read 2326
STAT bytes_written 8910
STAT limit_maxbytes 67108864
STAT accepting_conns 1
STAT listen_disabled_num 0
STAT threads 4
STAT conn_yields 0
STAT bytes 1377
STAT curr_items 10
STAT total_items 10
STAT evictions 0
STAT reclaimed 0
END 
```

希望这可以帮助

# php - PHP CLI 停止工作

> ID：12107757
> 
> 赞同：2
> 
> 时间：2012-08-24T10:36:13.853
> 
> 标签：php

在我专用的 CentOS linux 服务器上，我的 PHP CLI 已停止工作。我有一个需要 CLI 的开发人员编写的脚本，这些脚本一直工作到昨天。同时发生的另一个怪事是 /usr/local/bin/ 到 php 的符号链接丢失了。我重新创建了它，但它仍然无法正常工作。

我的开发人员说它不起作用，因为当我们从命令行运行这个脚本时；

```
<?php
echo 'php_sapi_name()='. php_sapi_name() .'<br />';
if(php_sapi_name() == 'cli' && empty($_SERVER['REMOTE_ADDR'])) {
echo "ENVIRONMENT IS CLI";
} ELSE {
echo "ENVIRONMENT IS NOT CLI";
}
//echo phpinfo(); 
```

然后从命令行返回的是

```
php_sapi_name()=cgi-fcgi<br />ENVIRONMENT IS NOT CLI 
```

运行 php -v 给我以下输出

```
PHP 5.3.8 (cgi-fcgi) (built: Feb  2 2012 14:48:13)
Copyright (c) 1997-2011 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2011 Zend Technologies
with Zend Guard Loader v3.3, Copyright (c) 1998-2010, by Zend Technologies 
```

最终改变了我们的脚本来解决这个问题，但它是如何改变的仍然很奇怪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:03:42.700

尝试这个：

```
<?php
class CliCheck
{
    /**
     * Advanced PHP-CLI mode check.
     *
     * @return boolean    Returns true if PHP is running from the CLI or else false.
     *
     * @access public
     * @static
     */
    public static function isCli()
    {
        // If STDIN was not defined and PHP is running as CGI module
        // we can test for the environment variable TERM. This
        // should be a right way how to test the circumstance under
        // what mode PHP is running.
        if(!defined('STDIN') && self::isCgi()) {
            // STDIN was not defined, but if the environment variable TERM
            // is set, it is save to say that PHP is running from CLI.
            if(getenv('TERM')) {
                return true;
            }
            // Now return false, because TERM was not set.
            return false;
        }
        return defined('STDIN');
    }   

    /**
     * Simple PHP-CGI mode check.
     *
     * (DSO = Dynamic Shared Object)
     *
     * @link http://httpd.apache.org/docs/current/dso.html DSO
     * @link http://www.php.net/manual/en/function.php-sapi-name.php PHP_SAPI
     *
     * @return boolean    Returns true if PHP is running as CGI module or else false.
     *
     * @access public
     * @static
     */
    public static function isCgi()
    {
        if (substr(PHP_SAPI, 0, 3) == 'cgi') {
            return true;
        } else {
            return false;
        }
        return false;
    }
}
print "PHP is running ".((CliCheck::isCgi()) ? "as CGI modul " : ((!CliCheck::isCli()) ? "as DSO modul " : ""));
print ((CliCheck::isCli()) ? "from the CLI." : ".");
print "\n";
?> 
```

来源：[http ://www.php.net/manual/fr/features.commandline.php#105043](http://www.php.net/manual/fr/features.commandline.php#105043)

# database - MVC3：如何改进多用户系统的数据查询

> ID：12107759
> 
> 赞同：0
> 
> 时间：2012-08-24T10:36:13.517
> 
> 标签：database, asp.net-mvc-3

我正在为多用户 web 应用程序编码，每个用户将创建和管理“类别”和“产品”列表。因此，当我需要为任何用户获取“类别”或“产品”列表时，我必须检查：

```
IEnumerable<Categories> results = from x in db.Categories
                                         where String.Compare(x.UserName, User.Identity.Name, true) == 0 
                                         select x;
        return View(results.ToList()); 
```

和

```
IEnumerable<Categories> results = from x in db.Categories
                                      where String.Compare(x.UserName, User.Identity.Name, true) == 0
                                      select x;
        ViewBag.CatLists = results.ToList(); 
```

等等，...这是一种非常糟糕的编码风格。我想改进这个，但我不知道该怎么做。
谢谢你的任何想法！

# database-design - 在可扩展数据库中实现树结构的好方法？

> ID：12107760
> 
> 赞同：0
> 
> 时间：2012-08-24T10:36:15.263
> 
> 标签：database-design, tree, nosql

我需要一个数据库引擎。我认为它非常接近于一个简单的文件系统。我需要执行以下操作：

*   列出“文件夹”中的项目
*   扩展数据库以在多台机器上实现可靠性和速度
*   添加/删除“文件夹”和“对象”
*   也许符号链接以避免重复

每个“对象”将是一组数据（键：值），最大大小为 kB（猜测）。

我查看了 couchbase 和[http://www.infoq.com/articles/graph-nosql-neo4j](http://www.infoq.com/articles/graph-nosql-neo4j)，但它们似乎不符合我的需求。Couchbase 不支持第一个要求，而且 Neo4j 似乎太先进了。（为什么要实现一个永远不会使用的功能？）

我不需要对数据的任何权限或安全性。只是冗余和速度。读取次数将多于写入次数。

实现这一点的最佳方法是什么？磁盘上的文件夹是最好的方法吗？如何让它跨越许多具有冗余的服务器？

编辑：
最初的问题：
我们有大量的对象，最多有 50 个标签。平均猜测 10 个标签。客户端将向服务器发送标签列表。服务器应返回包含用户发送的所有（或几乎所有）标签的所有对象的列表。

到目前为止我的方法：
1\. 以某种出现的顺序（最先使用）获取所有可能标签的列表。让我们称之为`taglist`.
2\. 从客户端排序列表`taglist`。
3\. 使用以下算法：

```
algorithm( startFolder ) {
 for each object in startFolder {
      stack.push (object);
 }
 for each folder in startFolder where (folder.name is in listSentByClient) {
      algorithm( folder );
 }
} 
```

4.`stack`现在包含所有包含客户端发送的所有标签的对象。5\. 将堆栈返回给客户端

添加新对象时：
1\. 按标签排序`taglist`。调用此方法`sortedlist`
2\. 输入或创建文件夹，其中名称 == `sortedlist` 3 中的第一个标签。删除`sortedlist`
4 中的第一个标签。重复步骤 2 和 3，直到没有留下任何标签
5.在当前位置创建对象

如果这种方法是错误的，或者您知道更好的方法 - 请告诉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:25:05.997

您可以在 Couchbase 2.0 中执行此操作（不是 1.8.x，没有一些非常有趣的键控结构，我实际上可以这样做但并不明显），因为 2.0 与 Elastic Search 集成，但它处于预测试阶段。也可以通过视图和查询来做到这一点。

在 Neo4J 中，您可以通过使每个标签和对象成为一个节点并在它们之间创建关系（对象和标签之间的单一双向关系）来做到这一点。这是一个相当简单的查询，可以获取距离标签节点 1 级深的所有对象节点。尽管它更复杂一些，但您也可以根据与对象具有的一组标记节点的关系数进行查询。

# iphone - 着色 NSString Xcode 的一部分

> ID：12107763
> 
> 赞同：0
> 
> 时间：2012-08-24T10:36:22.037
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在实现一个 iOS 应用程序，并将两个字符串连接起来并插入到一个标签中。我想给第一个字符串与第二个字符串不同的颜色。

这是我的字符串，它们被连接起来......

> NSString *dateVale=[日期 objectAtIndex:indexPath.row];
> NSString *addressValue=[地址 objectAtIndex:indexPath.row];

```
TextLabel.text = [NSString stringWithFormat:@"%@ \n%@",dateVale,addressValue]; 
```

那么如何给第一个字符串一个蓝色呢？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T10:48:58.543

要走的路是使用 NSAttributedStrings。NSAttributedString 对象表示具有相关属性集的字符串。从 iOS6 UIKit 开始，在 UILabel 和其他组件中添加了对 NSAttributedStrings 的支持。

对于以前的 iOS 版本，您可以使用支持 NSAttributedStrings 的第三方组件，例如：[OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)、[TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel/blob/master/TTTAttributedLabel.h)或[Nimbus Attributed Label](http://docs.nimbuskit.info/group___nimbus_attributed_label.html)。这些组件是使用 CoreText 实现的，CoreText 是 iOS 中用于文本呈现的低级框架。我建议您使用这些组件之一，而不是尝试使用 CoreText。

如果您需要更复杂的样式或行为，您也可以使用 UIWebView，但它是一种更重量级的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:32:58.170

在低于 6.0 的 iOS 中，除非您使用第三方类，否则不支持您的请求。就我个人而言，我尽量避免使用第三方类，因为在未来的 iOS 更新中，其中一些第三方类不再获得 Apple 的批准。但是我在您的输出中注意到您将每个文本放在单独的行上（来自`\n`）：

```
TextLabel.text = [NSString stringWithFormat:@"%@ \n%@",dateVale,addressValue]; 
```

由于您将每个都放在一行中，并且如果您想避免使用第三方类，则可以简单地使用两个`UILabel`s 并为每个 s 提供所需的格式，在这种情况下，您将执行以下操作：

```
TextLabel01.text = [NSString stringWithFormat:@"%@", dateVale];
TextLabel02.text = [NSString stringWithFormat:@"%@", addressValue]; 
```

顺便说一句，即使它们在同一行，您仍然可以使用 2 个单独`UILabel`的 s，并且您可以`frame`通过使用 计算文本宽度来动态地使用每个标签`sizeWithFont`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T10:39:39.633

使用 NSAttributed 字符串。条件是你必须为[属性标签使用第三方类，即 TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel/blob/master/TTTAttributedLabel.h)

**编辑**

TTTAttributedLabel 兼容 ios 5.1 及更高版本。

注意 ios6 的 UILabel 支持 NSAttributedString 不需要使用第三方类标签。

# backbone.js - Backbone - 显示一个模型而不是循环遍历一个集合 - 用 CoffeeScript 编写

> ID：12107765
> 
> 赞同：1
> 
> 时间：2012-08-24T10:36:30.693
> 
> 标签：backbone.js, coffeescript, underscore.js

我是 Backbone 的新手 + CoffeeScript 的新手。我有一个从 URL 检索数据（属性）的集合。在我的 homeView 中，我将此数据附加到模板并循环遍历它：

```
<ul>
     <% _.each(data, function (row) { %>
          <li><%= row.get('name') %></li>
     <% }); %>
</ul> 
```

这工作正常。

但是，当我想查看单个行（属性）时，我仍然使用相同的集合并更改模型（id）中的属性，以更改集合中调用的 URL 并仅检索一条数据（一个属性）。

我编码的方式是，在我的个人属性视图中，它仍然循环通过集合（即使只有一行），并将其附加到主视图

```
class ShowPropertyView extends Backbone.View
    constructor: ->
        super

    initialize: ->
        @Property = new PropertyCollection #New collection
        @Property.PropertiesModel.set({theID: @options.theID}) #Change URL and get one property with a specific ID

    template: _.template($('#showProperty').html())
    #propertyInfoTemplate: _.template($('#propertyInfoTemplate').html())

    render: ->
        #$(@.el).html(@template) #load main template
        @loadResults() #load individual property

    loadResults: ->
        @Property.fetch({
            success: (data) =>
                         $('#propertyInfo').append(@propertyInfoTemplate({data: data.models, _:_})) #Load data into another template & append template to main template
            error: ->
                alert('Unable to load information')
        }) 
```

当前模板（接收数据并附加到主模板）看起来像这样（类似于我的 homeView 模板）：

```
<div>
     <% _.each(data, function (row) { %>
          <div>
               <h3><%= row.get('name') %></h3>
          </div>
     <% }); %>
</div> 
```

**我需要实现的是能够将信息传递到一个视图中，并且不需要下划线中的循环语句，而不必将其附加到主视图（因为它只是一个单独的数据）。**

所以我只有一个看起来像这样的视图：

```
<div>
     <h3><%= row.get('name') %></h3>
</div> 
```

我不，我需要更改 ShowPropertyView 中的某些内容，我只是不确定是什么？任何帮助将非常感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:22:37.843

我认为解决您的问题的最佳方法是将描述的功能分成两个视图。我真的建议使用backbone.js 约定通过传递给它们的构造函数模型实例或集合实例来实现简单的视图，[就像在文档](http://backbonejs.org/#View-constructor)中一样。

此解决方案的代码如下所示。一个模型的第一个视图

```
class OnePropertyView extends Backbone.View

  template: _.template($('#oneProperty').html())

  render: ->
    @model.fetch
      success: =>
        $('#propertyInfo').append(@template({model: @model})) 
```

和模板：

```
<div>
    <h3><%= model.get('name') %></h3>
</div> 
```

集合视图的代码：

```
class CollectionPropertyView extends Backbone.View

  template: _.template($('#collectionProperty').html())

  render: ->
    @collection.fetch
      success: =>
        $('#propertyInfo').append(@template({collection: @collection})) 
```

以及收集处理的模板：

```
<ul>
    <% collection.forEach(function (model) { %>
        <li><%= model.get('name') %></li>
    <% }); %>
</ul> 
```

上面的代码你可以像这样使用它，例如在你的[路由器](http://backbonejs.org/#Router)中：

```
model = new PropertyModel(id: modelId) # modelId retrived from URL
view = new OnePropertyView(model: model)
view.render() 
```

和收集

```
collection = new PropertyCollection();
view = new CollectionPropertyView(collection: collection)
view.render() 
```

有时当集合视图有点复杂时，例如每行都有一些操作，最好实现一个嵌套视图（表示行）。这种方法更简单，更易读，因为对于每一行，您都可以使用[事件映射](http://backbonejs.org/#View-delegateEvents)。

# android - 如何将字符串发送到android中的网站

> ID：12107766
> 
> 赞同：0
> 
> 时间：2012-08-24T10:36:30.803
> 
> 标签：android, android-intent, android-activity, web

这是我的场景：我想创建一个 android 应用程序，它允许我在输入公交代码后搜索公交信息。巴士信息检索自本网站： http: [//www.stm.info/English/a-somm.htm](http://www.stm.info/English/a-somm.htm)

我打算用 TextView 和 Button 创建一个活动。此 TextView 允许用户插入总线代码。当用户点击按钮时，总线代码被发送到上述网站。之后，有关此总线的信息将显示在新活动中。此外，通过本网站的搜索功能从网站检索信息。

我不知道哪种技术，哪种方法适合我想要的。任何人都可以帮助我，拜托。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:45:30.930

**你的问题可以分为两个不同的问题**，第一个是如何进行搜索并得到结果，这个很容易。您需要使用以下 URL 向以下网站发送 GET 请求，注意您应该将最后一个参数更改为您的总线代码：

```
http://www2.stm.info/horaires/frmResult.aspx?Langue=En&Arret=BusCodeHere 
```

您需要做的第二件事是从服务器获取响应（这显然是 HTML 代码）并将其解析为 Array/table/SQL，最后将其显示为您的 GUI

谷歌：用java解析html

如果网站有 API，这个任务会容易得多。只需向 api 询问搜索结果，并通过 JSON/XML 解析器类轻松解析它

# android - 如何从为android中的flash编写的xml文件中解析数据？

> ID：12107774
> 
> 赞同：0
> 
> 时间：2012-08-24T10:36:51.053
> 
> 标签：android, xml-parsing

我为我的在线网站制作了一些 Flash 文件（.xml）。现在我希望这些 xml 文件中的数据用于我的 android 应用程序。我怎样才能做到这一点。xml 文件的格式非常好，整洁且编写正确。这是该 xml 文件的一小段代码，在所有其他文件中也几乎相同。thnx 提前。

```
<slide id="2" template="listeningStayMultiText">
    <images>
        <image direction="Right" xCord="100" yCord="170"><![CDATA[images/common/1x1.gif]]></image>
    </images>
    <sentences>
        <sentence index="1"  fontColor="0x000000"  width="600" height="70" size="18" xPos="50" yPos="20" bgColor="0xDBEFDF" borderColor="0x006600" align="left"><![CDATA[<br/>  Let’s look at how we make negative sentences in the simple present tense -]]></sentence>
        <sentence index="2"  fontColor="0xffffff"  width="300" height="60" size="18" xPos="50" yPos="100" bgColor="0x006600" borderColor="0x000000" align="center"><![CDATA[<br/>POSITIVE SENTENCE]]></sentence>
        <sentence index="3"  fontColor="0xffffff"  width="300" height="60" size="18" xPos="350" yPos="100" bgColor="0x006600" borderColor="0x000000" align="center"><![CDATA[<br/>NEGATIVE SENTENCE]]></sentence>
        <sentence index="4"  fontColor="0x000000"  width="300" height="120" size="18" xPos="50" yPos="160" bgColor="0xDBEFDF" borderColor="0x000000" align="center"><![CDATA[<br/>I play football]]></sentence>
        <sentence index="5"  fontColor="0x000000"  width="300" height="120" size="18" xPos="350" yPos="160" bgColor="0xDBEFDF" borderColor="0x000000" align="center"><![CDATA[<br/>I <b>do not</b> play football<br/>OR<br/>I <b>don't</b> play football]]></sentence>
        <sentence index="6"  fontColor="0x000000"  width="600" height="90" size="18" xPos="50" yPos="300" bgColor="0xDBEFDF" borderColor="0x000000" align="center"><![CDATA[<br/>We use '<b>do not</b>' or '<b>don’t</b>' with ‘&lt;b>I</b>’ to make negative sentences in the simple present tense.]]></sentence>
    </sentences>
    <audio><![CDATA[images/common/silence.mp3]]></audio>        
    <bgImage><![CDATA[images/bg.jpg]]></bgImage>
</slide> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:57:07.370

看看[简单的框架](http://simple.sourceforge.net/)

它在您的数据模型中使用注释，并且非常容易实现。在你的情况下，它看起来像

```
@Root
public class Slide {
    @Attribute
    public int id;
    @Attribute
    public String template;
    @ElementList
    public List<Images> image;
    @ElementList
    public List<Sentence> sentences;

} 
```

ETC...

# objective-c - 持续无法识别的选择器错误 [故事板]

> ID：12107775
> 
> 赞同：1
> 
> 时间：2012-08-24T10:37:01.283
> 
> 标签：objective-c, ios, ipad, runtime-error

我已经设置了一百万零一个带有按钮和功能的视图。但由于某种原因，我无法让这个工作 - 我现在已经重新制作了 3 次......我不知道为什么它不工作......

从我得到的错误中，我了解到它与情节提要（[这个问题](https://stackoverflow.com/questions/412083/interfacebuilder-uiviewcontroller-subclass-not-recognized-as-subclass)，[这个问题](https://stackoverflow.com/questions/2015419/iphone-unrecognized-selector-sent-to-instance)......）有关，因为在错误中它说：`[UIViewController click_newsletter:]`不是`[LinkedinActionViewController click_newsletter:]`。

问题是，我删除了旧的 viewController 并制作了一个新的，但没有任何改变？

## 故事板类链接

![在此处输入图像描述](../Images/58a8851a01d3ff6105f497fb026dac80.png)

在故事板中 - 类名是相同的。

## 类声明

```
@interface LinkedinActionViewController : UINavigationController <UIWebViewDelegate>{
    UIButton *our_page;
    UIButton *newsletter;
}

@property (nonatomic, retain) IBOutlet UIButton *our_page;
@property (nonatomic, retain) IBOutlet UIButton *newsletter;

- (IBAction)click_our_page:(id)sender;
- (IBAction)click_newsletter:(id)sender;

@end 
```

## 打开视图

```
 UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPad" bundle:nil];
        LinkedinActionViewController *action_view = (LinkedinActionViewController*)[[storyboard instantiateViewControllerWithIdentifier:@"LinkedinActionViewController"] retain];
        [self.navigationController pushViewController:action_view animated:YES]; 
```

## 错误！！！

![在此处输入图像描述](../Images/3858ca108990e453fee93c9d30614c96.png)

> *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UIViewController click_newsletter:]：无法识别的选择器发送到实例 0x6d205a0”

一天多来，我已经为此苦苦挣扎了-任何帮助都是有益的！:D 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T23:15:46.430

好的，刚让朋友看看这个，我们发现了问题。

如果你去`linkedinActionViewController.m`文件。

单击右窗格中的文件检查器按钮。

![文件检查器选项卡](../Images/564346f725beed54c9ab4fc47e3fa6b1.png)

然后**确保选中复选框！@!!!!**

![在此处输入图像描述](../Images/b9655d0c54d126432ede81317e6700a0.png)

愿 XCode 缓慢而痛苦地死去！

# jasper-reports - Jasper Reports Server - 填写报告时出错

> ID：12107777
> 
> 赞同：1
> 
> 时间：2012-08-24T10:37:11.860
> 
> 标签：jasper-reports, jasperserver

我的解决方法是：

*   *Windows 7的*
*   *贾斯珀报告服务器 4.7.0*

我已经在我的工作站上安装了捆绑版本，并选择安装*iReport*包。安装将无法继续使用*Win 7**`c:\program files\<JasperReport>`*的默认路径已知问题。中安装成功。**`c:\<JasperReport>`**

 *我为我的*as400数据配置了**DSN 数据源*，并且还使用***了 dbVisualizer***，它使用*JDBC 到 ODBC 桥接*此数据源。我在 JR 中使用了相同的数据源，并且测试连接成功。*当我在iReport*中构建报告时，我可以很好地预览我的数据。然后，我选择将报告添加到 Repository Nav，逐步完成向导。当我使用 Web 浏览器查看*JasperReport Server*中的报告时，出现以下错误：

 ***```
 The Server has encountered an error. Please excuse the inconvenience.  
ERROR Message  com.jaspersoft.jasperserver.api.JSException: Error filling report.
Followed with some Error Traces. 
```

我还尝试手动将数据源添加到*JRS*存储库，测试连接 <passed> 然后在*iReport*中，使用 Repository 数据源添加报告但同样的错误。****

# c# - jQuery没有注册更改功能

> ID：12107779
> 
> 赞同：0
> 
> 时间：2012-08-24T10:37:33.527
> 
> 标签：c#, jquery, asp.net-mvc, razor

我正在使用 Visual Studio 2010 / C# 4.0 / MVC 3 / Razor / jQuery 1.5.1 / Google Chrome 21.0.1180.83 m / Windows 7 Enterprise

这是我的确切代码，其中注释掉了非显着的东西（我认为是非显着的）。

基本上我正在创建一个`<input />`元素，并且如果用户更改其值，我会尝试将更改事件绑定到它，但该事件似乎没有绑定。当我查看 Google Chrome (Ctrl + Shift + J) 中的元素时，我在“事件侦听器”下看不到任何内容。

```
<script type="text/javascript" src="/scripts/jquery-1.5.1.js"></script>

<script type="text/javascript">

$(function () {
// ...

    $('#StoredProcedureName').change(function () {
        // ...

        var parameters = $('#parameters');  // <table id="parameters"></table>

        $.getJSON('@Url.Action(/* */)', {
            // ...
        }, function (data) {
            parameters.empty();
            // ...
            $.each(data, function (k, v) {
                // ...
                parameters.
                    append($('<tr />').
                        // ... Other <td /> elements
                        append($('<td />').
                            append($('<input />').
                                // ...
                                change(function () {
                                    alert("here2"); // This alert isn't happening.
                                }).
                                addClass('testClass'). // This class is showing up though.
                                // ...
                            )
                        )
                    );
            });

            // ...
        });
    });

    // ...
});

</script> 
```

当我制作一个测试 MVC 网站并执行此操作时，它似乎可以工作。这太令人费解了。

```
<!DOCTYPE html>

<html>
<head>
    <title></title>

    <script type="text/javascript" src="../../Scripts/jquery-1.5.1.js"></script>

    <script type="text/javascript">
        $(function () {
            $("#a").append(
                $("<input />").change(function () {
                    alert("here1");
                }).attr('value', 'text')
            );
            $("#b").change(function () {
                alert("here2");
            });
        });
    </script>
</head>
<body>
    <div id="a">
    </div>
    <input id="b" />
</body>
</html> 
```

谁能告诉我为什么我的第一个警报没有被执行，尽管`<input />`元素出现了，并且有正确的类？

**编辑：**

正在创建表以及输入元素：

![Chrome 检查器的屏幕截图](../Images/17d4fcc9bed317211c5a8cc74183b1b0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:53:53.867

你能在没有表格元素的情况下试试吗？

我只是想知道你是如何做到这一点的：

```
append($('<tr />') 
```

我希望这是一个封闭的表格行，同样与

```
append($('<td />') 
```

看看这个表格构建的例子

[在jQuery中添加表格行](https://stackoverflow.com/questions/171027/add-table-row-in-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:28:04.403

我个人会尝试向输入字段添加一个类并使用 jqueries Live() 函数而不是普通绑定。
您可以将 onclick 绑定到具有类 foo 的所有输入。 如果您不喜欢直播，请
[在此处了解有关 Live 的信息，您可以尝试不立即执行 .change 绑定，而是像在工作示例中那样在其 id 上调用一个额外的 jquery 选择器吗？](http://api.jquery.com/live/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:36:23.547

随意编辑这个解释。但基本上在我的代码中，我对表格元素进行了如下排序：

```
var options = parameters.children();
options.sort(function (a, b) {
    if (a.text > b.text) return 1;
    else if (a.text < b.text) return -1;
    else return 0
});
parameters.empty().append(options); 
```

删除这个（我不知道为什么我有它）起到了作用。

# c - 如何在 C 中定义静态结构并访问其成员？

> ID：12107780
> 
> 赞同：1
> 
> 时间：2012-08-24T10:37:34.670
> 
> 标签：c, static, struct, typedef

我在 C 中定义了一个静态结构，如下所示：

```
typedef static struct {
    int a;
    int b;
} Hello; 
```

我需要在使用之前启动结构吗？如何访问其中的变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T10:41:29.533

您需要先定义结构，然后在静态变量中实例化它

```
typedef struct {
  int a;
  int b;
} Hello;

static Hello hello; 
```

然后您可以像这样访问您的数据：

```
hello.a = 42; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T10:43:32.967

您可以定义一个结构并同时创建一个实例：

```
static struct Hello {
  int a,b;
} hi;

struct Hello *test() { return &hi; } 
```

但是据我所知，没有办法将它与 a 结合起来`typedef`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T11:04:04.373

存储类 ( `static`) 不是类型定义的一部分。

事实上，[C 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf)明确禁止将（另一个）存储类放入`typedef`声明中（第 6.7.1 节）：

> *存储类说明符*：**typedef** **extern** **静态** **自动** **寄存器**
> 
> ...至多，一个存储类说明符可以在声明的声明说明符中给出。

您只能制作结构类型的实际对象`static`（正如其他人所指出的那样）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-04T12:22:00.813

如果您只想要一个结构实例，您可以使用：

```
static struct
{
    int a;
    int b;
} foo; 
```

然后，直接访问它：`foo.a = 42;`

# jquery-ui - 调整两个或三个 div 的大小后，那个 div 重叠了吗？

> ID：12107783
> 
> 赞同：2
> 
> 时间：2012-08-24T10:37:52.877
> 
> 标签：jquery-ui, jquery-ui-resizable

我正在尝试做可拖动和可调整大小的 jquery ui api。但是当我调整顶部 div 的大小时，下一个 div 会出现在顶部。请在此处查看示例代码

[http://jsfiddle.net/wExtX/190/](http://jsfiddle.net/wExtX/190/) 等待回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T05:46:05.340

这是因为当我们尝试重新调整顶部 div 的大小时，jQuery 将 div 的位置“position:relative”更改为“position:absolute”

# html - 将 html/xml 代码与提升片段分开的好方法是什么？

> ID：12107787
> 
> 赞同：1
> 
> 时间：2012-08-24T10:38:06.503
> 
> 标签：html, xml, scala, lift, code-snippets

Lift 是一个有趣的 Web 框架。但是，对于新手来说，从片段代码中获取 html/xml 代码确实很困难。有推荐的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T22:50:31.170

如果您使用 CSS 选择器转换（请参阅[http://simply.liftweb.net/index-7.10.html#toc-Section-7.10](http://simply.liftweb.net/index-7.10.html#toc-Section-7.10)）而不是 Helpers.bind() 东西，您会发现很少或没有标记在你的 Scala 代码中。

谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T12:03:04.697

只是

*   尽量保持片段 html 的数量尽可能小。例如，如果您的代码片段中有一些您不需要的静态代码，您可以将其移动到 html 文件中。

和

*   尽量保持它的风格独立，这样前端设计师可以通过编辑 html/css/js 文件来完成他的工作。

# objective-c - 即使 UITableView 配置为可编辑，我也无法编辑它

> ID：12107788
> 
> 赞同：1
> 
> 时间：2012-08-24T10:38:08.913
> 
> 标签：objective-c, ios

我在 iPad xib 文件中有一个 UITableView。

委托方法：

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
} 
```

被正确调用。

但是当我触摸一行时，或者我在它上面滑动以删除它时，什么都没有发生。在 xib 文件中，表的“用户交互已启用”已打开。

谢谢

更新：我已将此添加到委托，但仍然没有：

```
-(UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return UITableViewCellEditingStyleDelete;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:42:40.633

此方法告诉表**是否****可以**编辑。要进入编辑模式，请调用`[setEditing:YES animated:animated]`。

如果您设置了 a `editButtonItem`，它会在按下时为您完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:51:00.500

您是否实施了这些方法：

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath*)indexPath {   
return UITableViewCellEditingStyleDelete;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath{
} 
```

# c# - 为什么我总是在文本框中输入相同的文件名？

> ID：12107789
> 
> 赞同：0
> 
> 时间：2012-08-24T10:38:09.220
> 
> 标签：c#

我首先搜索文件名。一旦找到它，我就会寻找其他文件。第一个文件是一个 .xls 文件，就像我在正确目录中的签名一样。然后我得到这个目录中的所有 xml 文件。

我在行上放了一个断点：

```
BeginInvoke(new Action(() => textBox1.AppendText(pResult[i-1].FullName+Environment.NewLine))); 
```

我看到 4 个 xml 文件：

*   丹尼.xml
*   adi.xml
*   yaron.xml
*   贝壳.xml

但是，如果我让程序在没有任何断点的情况下运行，那么我只会在 List 中看到第 3 个文件 4 次：

*   yaron.xml
*   yaron.xml
*   yaron.xml
*   yaron.xml

有人可以指出为什么会发生这种情况吗？

```
public void Search(string strExtension,
                            DirectoryInfo di,
                            List<FileSystemInfo> pResult)
        {
            try
            {

                foreach (FileInfo fi in di.GetFiles())
                {
                    if (InvokeRequired)
                    {
                        BeginInvoke(new Action(() => label2.Text = fi.Name));
                    }
                    if (fi.Name == "MessageLog.xsl")
                    {
                        foreach (FileInfo fii in di.GetFiles())
                        {
                        if (fii.Extension == strExtension)
                            pResult.Add(fii);
                        }
                        if (InvokeRequired)
                        {
                            BeginInvoke(new Action(() => textBox1.AppendText("Number Of History Files Found: ===> " + pResult.Count.ToString() + Environment.NewLine)));
                        }
                        for (int i = 0; i < pResult.Count; i++)
                        {
                            if (InvokeRequired)
                            {
                                BeginInvoke(new Action(() => textBox1.AppendText(pResult[i-1].FullName+Environment.NewLine)));
                            }

                        }
                    }
                }

                foreach (DirectoryInfo diChild in di.GetDirectories())
                    Search(strExtension, diChild, pResult);
            }
            catch (Exception e)
            {
            }
        }

        private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            Search(".xml", dirinf, fsi);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:46:14.213

你得到这种行为的原因是：

```
BeginInvoke(new Action(() => textBox1.AppendText(pResult[i-1].FullName+Environment.NewLine))); 
```

您的操作指向内存位置`pResult[i-1]`，它不会复制值，而是保存`pResult`带有索引的位置`i`。在`i`循环执行之后指向计数。假设`pResult[i-1]`指向一个内存位置`x012`，那么您的操作语句正在持有：

`textBox1.AppendText(from location x012)`

现在当你退出循环时，它还没有执行，它只是被定义为从那个特定的内存位置附加文本。这就是为什么当您执行该操作时，您将获得所有操作的最后一个值。

您可能会看到 Jon Skeet 的类似脑筋急转弯：[http ://www.yoda.arachsys.com/csharp/teasers.html](http://www.yoda.arachsys.com/csharp/teasers.html)

# python - Python 快速排序 - 列表理解与递归（分区例程）

> ID：12107790
> 
> 赞同：7
> 
> 时间：2012-08-24T10:38:13.267
> 
> 标签：python, sorting, optimization, quicksort, tail-recursion

我看了三个美丽的快速排序的谈话，并在玩快速排序。我在 python 中的实现与 c 非常相似（选择枢轴，围绕它进行分区并在越来越大的分区上递归）。我认为这不是*pythonic*。

所以这是在 python 中使用列表推导的实现。

```
def qsort(list):
    if list == []: 
        return []
    pivot = list[0]
    l = qsort([x for x in list[1:] if x < pivot])
    u = qsort([x for x in list[1:] if x >= pivot])
    return l + [pivot] + u 
```

让我们将递归方法称为 qsortR。现在我注意到对于 large(r) 列表，qsortR 的运行速度比 qsort 慢得多。实际上“最大递归深度超过 cmp”即使对于递归方法的 1000 个元素也是如此。我在 sys.setrecursionlimit 中重置。

一些数字：

```
list-compr 1000 elems 0.491770029068
recursion 1000 elems 2.24620914459
list-compr 2000 elems 0.992327928543
recursion 2000 elems 7.72630095482 
```

所有代码都[在这里](https://gist.github.com/3448918)。

我有一些问题：

*   为什么列表理解这么快？
*   python中递归限制的一些启示。我首先将它设置为100000，在什么情况下我应该小心？
    *   （“优化尾递归”究竟是什么意思，它是如何完成的？）
*   尝试对占用笔记本电脑内存的 1000000 个元素进行排序（使用递归方法）。如果要对这么多元素进行排序，该怎么办？可以进行哪些优化？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T10:58:59.023

1.  *为什么列表理解这么快？*

    `for`因为列表理解意味着 C 循环比使用 Python块的慢速一般方式要快得多。

2.  *python中递归限制的一些启示。我首先将它设置为100000，在什么情况下我应该小心？*

    以防内存不足。

3.  *尝试对占用笔记本电脑内存的 1000000 个元素进行排序（使用递归方法）。如果要对这么多元素进行排序，该怎么办？可以进行哪些优化？*

    Python 的递归会产生这样的开销，因为每个函数调用都会在每次调用时分配大量堆栈内存空间。

    一般来说，迭代就是答案（在统计上 99% 的用例中会提供更好的性能）。

    谈到内存结构，如果你有简单的数据结构，比如字符、整数、浮点数：使用内置的，`array.array`它比`list`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:10:24.560

您是否尝试过编写 的非递归实现`partition`？我怀疑性能差异纯粹是`partition`实现。您正在为实现中的每个元素进行递归。

**更新**

这是一个快速实现。它仍然不是超级快甚至效率不高，但它比你原来的递归要好得多。

```
>>> def partition(data):
...  pivot = data[0]
...  less, equal, greater = [], [], []
...  for elm in data:
...   if elm < pivot:
...    less.append(elm)
...   elif elm > pivot:
...    greater.append(elm)
...   else:
...    equal.append(elm)
...  return less, equal, greater
...
>>> def qsort2(data):
...  if data:
...   less, equal, greater = partition(data)
...   return qsort2(less) + equal + qsort2(greater)
...  return data
... 
```

我也认为“传统”版本中生成的临时列表数量较多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-13T13:40:33.903

当内存变得非常大时，尝试将列表理解与就地算法进行比较。下面的代码在对 100K 整数进行排序时获得了接近执行时间，但在对 1M 整数进行排序时，您可能会陷入列表理解解决方案中。我使用 4Gb 机器进行了测试。完整代码：[http ://snipt.org/Aaaje2](http://snipt.org/Aaaje2)

```
class QSort:
def __init__(self, lst):
    self.lst = lst

def sorted(self):
    self.qsort_swap(0, len(self.lst))
    return self.lst

def qsort_swap(self, begin, end):
    if (end - begin) > 1:
       pivot = self.lst[begin]
       l = begin + 1
       r = end
       while l < r:
           if self.lst[l] <= pivot:
               l += 1
           else:
               r -= 1
               self.lst[l], self.lst[r] = self.lst[r], self.lst[l]

       l -= 1
       self.lst[begin], self.lst[l] = self.lst[l], self.lst[begin]    
       # print begin, end, self.lst
       self.qsort_swap(begin, l)
       self.qsort_swap(r, end) 
```

# java - 令人困惑的复选框问题

> ID：12107791
> 
> 赞同：1
> 
> 时间：2012-08-24T10:38:18.310
> 
> 标签：java, checkbox

我有几个复选框和 2 个计数器...`counter1`计算使用以下代码检查了多少个复选框

```
if (isChecked) {
    counter++;
} else {
    counter--;
} 
```

这就像一个魅力，但现在我想要`counter2`跟踪属于“绿色”组的选中复选框......例如，复选框 1、2、4 和 7 属于“绿色”组，复选框 3、5， 6、8没有。

```
if (chk1.isChecked() || chk2.isChecked() || chk4.isChecked() || chk7.isChecked()) {
    counter2++;
} 
```

我尝试使用另一个`if else`来查看检查了多少“绿色”组但是当我使用

```
System.out.println(counter2); 
```

然后我总是得到`counter1`. 为什么会这样？是因为`counter1`检查所有复选框和否决`counter2`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:01:38.123

```
int counter2 = 0; // reset counter    
for (Checkbox chk : allCheckboxes)  
    {   
       if (chk.isChecked() && isGreen(chk)) {
           counter2++;
       }  
    }   
    //... 
```

实用的方法

```
private boolean isGreen(Checkbox chk)  
{  
 // return true is checkbox is green  
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T11:22:20.953

如上文评论中所述，您检查一次是否选中了任何框。如果 counter2 始终显示与 counter1 相同的值，则可能是简单的拼写错误或其他原因造成的。没有看到你的代码就不可能说。但是一个变量不能仅仅*推翻*另一个变量。

你在使用`Swing`和`JCheckBox`吗？如果是这样，您可以添加一个`ItemListener`，如果您还没有的话。然后，您可以动态更新计数器以反映复选框的当前状态。该`itemStateChanged`方法的代码可能如下所示：

```
public void itemStateChanged(ItemEvent arg0) {
    if (arg0.getStateChange() == ItemEvent.DESELECTED) { 
        counter--;
    } else {
        counter++;
    } 
    // update label or something
} 
```

`ItemListener`您可以为您的*绿色组*使用不同的组，该组另外设置`counter2`。
这使您免于所有迭代检查。

# math - 如何计算opengl中一个点周围的圆（纹素）

> ID：12107795
> 
> 赞同：0
> 
> 时间：2012-08-24T10:38:45.607
> 
> 标签：math, opengl, opengl-es

我在片段着色器中围绕一个点计算一个圆圈。问题是纹理中发生变化的部分不是一个圆圈，它是一个椭圆形。形式实际上取决于纹理的形式。如果纹理是一个完美的正方形，我会得到一个完美的圆形，但当它是一个矩形时，我会得到一个椭圆形。这是当前的片段着色器：

```
varying highp vec2 textureCoordinate;
uniform sampler2D inputImageTexture;

uniform highp vec2 center;
uniform highp float radius;
uniform highp float scale;

void main()
{
   highp vec2 textureCoordinateToUse = textureCoordinate;
   highp float dist = distance(center, textureCoordinate);
   textureCoordinateToUse -= center;
   if (dist < radius)
   {
     highp float percent = 1.0 - ((radius - dist) / radius) * scale;
     percent = percent * percent;

     textureCoordinateToUse = textureCoordinateToUse * percent;
     textureCoordinateToUse += center;

     gl_FragColor = texture2D(inputImageTexture, textureCoordinateToUse );
   }

   textureCoordinateToUse += center;
   gl_FragColor = texture2D(inputImageTexture,textureCoordinate);   
} 
```

更新着色器代码：

```
highp float aspectRatio = 854.0 / 480.0;
     //highp vec2 textureCoordinateToUse = textureCoordinate;
     highp vec2 textureCoordinateToUse = vec2(textureCoordinate.x, (textureCoordinate.y *    aspectRatio + 0.5 - 0.5 * aspectRatio));
   highp float dist = distance(center, textureCoordinateToUse);
   textureCoordinateToUse -= center;
   if (dist < radius)
   {
     highp float percent = 1.0 - ((radius - dist) / radius) * scale;
     percent = percent * percent;

     textureCoordinateToUse = textureCoordinateToUse * percent;
     textureCoordinateToUse += center;

     gl_FragColor = texture2D(inputImageTexture, textureCoordinateToUse );
     return;
   }

   textureCoordinateToUse += center;
   gl_FragColor = texture2D(inputImageTexture,textureCoordinate); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:53:38.430

我看到您正在尝试使用我的凸出失真片段着色器。虽然您实际上没有问过问题，但我想我可能知道您在这里想要什么。

如果您为矩形输入纹理提供标准化 0.0 - 1.0 范围内的纹理坐标，则上述将在椭圆区域而不是圆形区域上运行。那是因为上述计算是在纹理坐标空间中工作的，而不是在图像坐标空间中。

要纠正此问题，您可以执行以下两项操作之一。首先，您可以提供说明图像纵横比的纹理坐标（其中一个不能最大为 1.0）。

其次，您可以执行我在[此答案](https://stackoverflow.com/questions/10926617/spherical-filter-in-android/11387757#11387757)中所做的操作，并将图像的纵横比作为统一输入，并使用它来校正图像的矩形性质。如果您为`aspectRatio`着色器提供了一个统一的图像宽度和高度之间的比率，您可以将着色器正文中的第一行替换为

```
 highp vec2 textureCoordinateToUse = vec2(textureCoordinate.x, (textureCoordinate.y * aspectRatio + 0.5 - 0.5 * aspectRatio)); 
```

它会在一个圆形区域内运行。

# android - Android 编译错误，例如“适配器无法解析为类型”

> ID：12107801
> 
> 赞同：0
> 
> 时间：2012-08-24T10:39:09.163
> 
> 标签：android, variables, adapter, declaration

这是我的主要活动代码。以下是我的主要活动代码，它显示了四个错误：

1.  适配器无法解析为类型
2.  令牌“）”上的语法错误，{ 应在此令牌之后
3.  令牌“适配器”上的语法错误，此令牌后应为 VariableDeclaratorId。

源代码：

```
public class HospitalParseActivity extends ListActivity {
//url where request is made
private static String url="url";

//JSON node names
private static final String TAG_NETFOX="transfer";
private static final String TAG_DATE="date";
private static final String TAG_CWEB="c_web";
private static final String TAG_CBANK="c_bank";
private static final String TAG_CCASH="c_cash";
private static final String TAG_SWEB="s_web";
private static final String TAG_SBANK="s_bank";
private static final String TAG_SCASH="s_cash";

//creation of JSONArray
JSONArray netfoxlimited=null;

private List<? extends Map<String, ?>> contactList;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

 // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String,         String>>();

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting Array of Contacts
        netfoxlimited = json.getJSONArray(TAG_NETFOX);

        // looping through All Contacts
        for(int i = 0; i < netfoxlimited.length(); i++){
            JSONObject c = netfoxlimited.getJSONObject(i);

            // Storing each json item in variable
            String date = c.getString(TAG_DATE);
            String c_web = c.getString(TAG_CWEB);
            String c_bank = c.getString(TAG_CBANK);
            String c_cash = c.getString(TAG_CCASH);
            String s_web = c.getString(TAG_SWEB);
            String s_bank = c.getString(TAG_SBANK);
            String s_cash = c.getString(TAG_SCASH);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_DATE, date);
            map.put(TAG_CWEB, c_web);
            map.put(TAG_CBANK, c_bank);
            map.put(TAG_CCASH, c_cash);
            map.put(TAG_SWEB, s_web);
            map.put(TAG_SBANK, s_bank);
            map.put(TAG_SCASH, s_cash);

            // adding HashList to ArrayList
            contactList.add(map);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }
}

/**
 * Updating parsed JSON data into ListView
 * */
ListAdapter adapter = new SimpleAdapter(this, contactList,
        R.layout.list_item,
        new String[] { TAG_DATE, TAG_CWEB, TAG_CBANK,TAG_CCASH, TAG_CWEB,TAG_CBANK, TAG_CCASH }, new int[] {
                R.id.date, R.id.cweb, R.id.cbank,R.id.sweb,R.id.sbank,R.id.scash });

setListAdapter(adapter);

// selecting single ListView item
ListView lv = getListView();

// Launching new screen on Selecting Single ListItem
lv.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {
        // getting values from selected ListItem
        String dt = ((TextView) view.findViewById(R.id.date)).getText().toString();
        String web = ((TextView) view.findViewById(R.id.cweb)).getText().toString();
        String bank = ((TextView) view.findViewById(R.id.cbank)).getText().toString();
        String cash = ((TextView) view.findViewById(R.id.ccash)).getText().toString();
        String web1 = ((TextView) view.findViewById(R.id.sweb)).getText().toString();
        String bank1 = ((TextView) view.findViewById(R.id.sbank)).getText().toString();
        String cash1 = ((TextView) view.findViewById(R.id.scash)).getText().toString();

        // Starting new intent
        Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
        in.putExtra(TAG_DATE, dt);
        in.putExtra(TAG_CWEB, web);
        in.putExtra(TAG_CBANK, bank);
        in.putExtra(TAG_CCASH, cash);
        in.putExtra(TAG_SWEB, web1);
        in.putExtra(TAG_SBANK, bank1);
        in.putExtra(TAG_SCASH, cash1);
        startActivity(in);
    }
});
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:44:14.043

您是否在 onCreate 函数之外编写代码？似乎 onCreate 函数在 catch 块之后的“}”处结束。您可能只想删除它

# android - 将用户从移动网站重定向到专用的移动应用程序

> ID：12107804
> 
> 赞同：0
> 
> 时间：2012-08-24T10:39:21.560
> 
> 标签：android, iphone, objective-c, mobile, uiwebview

我想让用户选择在网站的联系页面上查看更详细的地图版本。是否可以在移动网站上通过链接将用户重定向到他们智能手机上的专用地图应用程序？

此外，如果他们愿意，是否可以将手机上的所有/许多应用程序（例如 gmail、字典等）通过合并移动网络和移动应用程序来为用户提供更好的体验？我是否需要使用本地语言（如 java 和 Objective-c）来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:44:11.670

> 是否可以在移动网站上通过链接将用户重定向到他们智能手机上的专用地图应用程序？

为此，您的移动网站必须在您的智能手机上打开一个应用程序，因为问题被标记为 Android，您的网站必须抛出您的基于 Android 的智能手机可以理解的专用 Intent，并且 Intent 应该注册为它的广播接收器。

但据我所知，网站可以有html/x-html格式，可以调用android的email/call应用。我不确定 x-html 页面如何将意图重定向到 android 系统。

# ios - 独立检测特定层的触摸

> ID：12107806
> 
> 赞同：0
> 
> 时间：2012-08-24T10:39:35.390
> 
> 标签：ios, cocos2d-iphone

我有一个主层。并且有 9 个子层添加。例如，一个主层板并添加了 9 层方格。

我想检测特定位置的触摸。

但它只检测到第一个。请帮我解决。

```
Here is a some code.
//
//  Board.m
//  Tic Tac Toe
//
//  Created by Waqas Naseem on 8/23/12.
//  Copyright 2012 __MyCompanyName__. All rights reserved.
//

    #import "Board.h"

    @implementation Board

    @synthesize squares;

    - (id)init
    {

        self = [super initWithColor:ccc4(255, 255, 255, 255) width:300 height:300];
        if (self) {
            // Initialization code here.
            index=0;

            for (int i=0; i<9; i++) {

                [self addSquare];
            }

        }

        return self;
    }

    -(void)addSquare
    {

        Square *square=[[Square node] retain];        
        [square setPosition:ccp((index%3)*100, (index/3)*100)];
        //[square setPosition:ccp(100, 0)];
        [self addChild:square];
        index++;
    }
    -(BOOL)isTouchEnabled
    {
        return YES;
    }
    -(void)setIsTouchEnabled:(BOOL)isTouchEnabled
    {

    }

    -(void)squaretouched
    {
        NSLog(@"Square touched");
    }
    @end

    @implementation Square

    @synthesize state;

    -(id)init
    {
        self=[super initWithColor:ccc4(255, 255, 255, 255) width:100 height:100];

        if(self)
        {
            isTouchEnabled_=YES;
            //[self setRotation:30];

            CCSprite *square=[CCSprite spriteWithFile:@"square.png"];

            xImg=[CCSprite spriteWithFile:@"myCross.png"];

            oImg=[CCSprite spriteWithFile:@"myO.png"];

            [square setPosition:ccp(50, 50)];

            [xImg setPosition:ccp(50, 50)];

            [oImg setPosition:ccp(50, 50)];

            [xImg setVisible:NO];

            [self addChild:square];

            [self addChild:xImg];
            [self addChild:oImg];

            [self setOpacity:255];

        }
        return self;
    }

    -(BOOL)handleTouch:(CGPoint)location
    {
        NSLog(@"Me touched ");
        return YES;
    }

    @end

    And this is the TouchLayerColor class

    //
    //  TouchAbleColorLayer.m
    //  Tic Tac Toe
    //
    //  Created by Waqas Naseem on 8/24/12.
    //  Copyright 2012 __MyCompanyName__. All rights reserved.
    //

    #import "TouchAbleColorLayer.h"

    @implementation TouchAbleColorLayer

    - (id)init
    {
        self = [super init];
        if (self) {
            // Initialization code here.
        }

        return self;
    }
    -(CGRect) rect
    {
        float h=[self contentSize].height;
        float w=[self contentSize].width;

        //convert to origional locaiton

        CGPoint pos=[self convertToWorldSpace:CGPointZero];

        //CGPoint pos=[self convertToNodeSpace:CGPointZero];

        //CGPoint pos=ccp(50, 100);

        float x=pos.x;
        float y=pos.y;

        return  CGRectMake(x, y, w, h);
    }
    -(BOOL)handleTouch:(CGPoint)location
    {
        // dont hanle touch here
        return NO;
    }

    -(void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
    {
        NSLog(@"Coming in Touch");
        if(!self.visible || !self.isTouchEnabled)
        {
            NSLog(@"Coming in Touch if");
            return ;
        }
        UITouch *touch=[touches anyObject];
        CGPoint location=[touch locationInView:[touch view]];

        //convert the touch location from uikit to OpenGL Coordinates

        location=[[CCDirector sharedDirector] convertToGL:location];

        // did touch Happen in our rectangle ?

        if(CGRectContainsPoint([self rect], location))
        {
            [self handleTouch:location];
        }

    } 

    @end 
```

当我单击任何 9 个正方形的正方形触摸方法时，会立即调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:56:01.893

我不确定我有没有收到你的问题。无论如何，您可能会检测到层中的触摸，并且在触摸处理程序中，遍历子列表并将触摸位置传递给每个子。当然，您的子类都应使用调用的方法（即检测到的触摸）实现一个通用接口。这很像一个责任链模式[http://it.wikipedia.org/wiki/Chain-of-responsibility_pattern](http://it.wikipedia.org/wiki/Chain-of-responsibility_pattern)

# java - 在 Eclipse 中生成项目时出错

> ID：12107807
> 
> 赞同：0
> 
> 时间：2012-08-24T10:39:37.370
> 
> 标签：java, android, eclipse, xamarin.android

我安装了 eclipse 和 SDK 大约一个星期……但即使我打开一个新的 Hello World 项目并且我想运行那个 eclipse 也会显示这个错误：

```
Error generating final archive: Failed to create key: Cannot run program "C:\Program Files\Java\jre7\bin\keytool.exe": CreateProcess error=2, The system cannot find the file specified
JAVA_HOME is set to: C:\Program Files\Java\jre7
Update it if necessary, or manually execute the following command:
"C:\Program Files\Java\jre7\bin\keytool.exe" -genkey -alias AndroidDebugKey -keyalg RSA -dname "CN=Android Debug,O=Android,C=US" -validity 10950 -keypass android -keystore C:\Users\BEHZAD\.android\debug.keystore -storepass android 
```

我在 Mono for Android 中也遇到了一些问题。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T10:45:47.657

安装**JDK**并将环境变量中的**JAVA_HOME 设置为安装****JDK**的路径。目前它指向**JRE**。

从这里下载[JDK 。](http://java-development-kit-jdk.en.softonic.com/)

# python - django 从视图重定向到 iframe 的父级

> ID：12107808
> 
> 赞同：2
> 
> 时间：2012-08-24T10:39:38.490
> 
> 标签：python, django, iframe

我有一个通过 iframe 呈现的网页。在 iframe 中成功提交表单后，我给出了，

```
 return HttpResponseRedirect("www.google.com") 
```

但是目标页面也在 iframe 中加载。如何指定要从 django 视图重新加载的父级？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T12:00:02.697

只需返回一些 html：

`redirect_template.html`：

```
<html>
    <head>
        <script>
            window.top.location.href = '{{ redirect_url }}';
        </script>
    </head>
    <body></body>
</html> 
```

代替：

```
return HttpResponseRedirect("www.google.com") 
```

利用：

```
return TemplateResponse(request, 'redirect_template.html', {'redirect_url':'www.google.com'} 
```

# database - 选择数据库表中的第 n 列

> ID：12107815
> 
> 赞同：1
> 
> 时间：2012-08-24T10:39:52.143
> 
> 标签：database, sql-server-2008

我说的是 SQL Server 2008。我有三`nvarchar`列的表。我想在第 N 行选择第一列，从第 M 行选择第二列，从第 K 行选择第三列，其中 M，N，K 彼此不相等。

如何编写这样的查询？也可以选择随机行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T10:49:20.290

您可以使用带有`ROW_NUMBER()`函数的 CTE 来实现此目的：

```
;WITH CTE AS
(
   SELECT 
      Column1, Column2, Column3,
      (your list of additional columns - if needed),
      RN = ROW_NUMBER() OVER (ORDER BY InsertionDate)
)
SELECT 
    FirstValue = (SELECT Column1 FROM CTE WHERE RN = N),
    SecondValue = (SELECT Column2 FROM CTE WHERE RN = M),
    ThirdValue = (SELECT Column3 FROM CTE WHERE RN = K) 
```

您需要`N, M, K`在此查询中将 替换为实际的整数值 - 或定义 SQL 变量来保存这三个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:57:07.127

```
declare @i1 int;
declare @i2 int;
declare @i3 int;
SET @i1=2;
SET @i2=4;
SET @i3=1;

;with t1 as
(
select *,row_number() over(order by (select 0)) as rn  from t
)
 select max(CASE rn WHEN @i1 then N1 else '' end),
        max(CASE rn WHEN @i2 then N2 else '' end),
        max(CASE rn WHEN @i3 then N3 else '' end)
        from t1 where rn in (@i1,@i2,@i3); 
```

# asp.net-mvc-3 - MVC Autofac ExtensibleActionInvoker 使用接口参数阻止我

> ID：12107823
> 
> 赞同：1
> 
> 时间：2012-08-24T10:40:49.197
> 
> 标签：asp.net-mvc-3, autofac, model-binding, actionmethod

在使用参数接口时，我遇到了 Autofac ExtensibleActionInvoker 与 MVC ModelBinder 交互的问题。背景如下：

我正在构建一个 MVC 应用程序，我正在使用 Autofac MVC3 的 ExtensibleActionInvoker 将我的服务作为参数注入到我的操作中，例如

```
 public ActionResult Test( IMyService service)
    {
        //A new instance of service is created by Autofac ExtensibleActionInvoker 
        return View();
    } 
```

这非常有效，并且设计非常简洁（有关此方法的更多信息，请参阅[Alex Meyer-Gleaves 帖子）。](http://alexmg.com/post/2010/05/16/Introducing-Action-Injection-with-Autofac-ASPNET-MVC-Integration.aspx)我想使用这种方法，因为我正在生成代码生成器来创建操作、视图、服务和 DTO，而按操作服务方法使这更容易。

但是，我还想为从 HttpPost 操作接收输入的操作分类中的参数使用接口。这是因为我使用 DI 在每一层之外创建类。如果我将 DefaultModelBinder 更改为使用 DI 创建类（请参阅 Steve Sanderson 关于 MVC3 的书的第 595 页，了解如何执行此操作），这可以正常工作，例如

```
 [HttpPost]
    public ActionResult Test(ITestClass dataComingFromView)
    {
        //model binder creates the class via DI and then binds it to the data from the post
        return View();
    } 
```

但是在上面的简单示例中，我与启用的 ExtensibleActionInvoker 发生冲突，即

1.  在没有启用 ExtensibleActionInvoker 的情况下，上面的方法可以正常工作，即扩展的 DefaultModelBinder 使用 DI 创建 TestClass 类，并且 modelbinder 将来自视图的输入绑定到类中的字段。
2.  启用 ExtensibleActionInvoker 后它不起作用，即我得到一个没有绑定的空 TestClass 类。我假设 ExtensibleActionInvoker 优先于模型绑定器，并且只创建一个空的 TestClass 类。
3.  （为了完整起见，我应该说，如果我只是“开箱即用”地使用 MVC，即没有新的 DefaultModelBinder 并且没有启用 ExtensibleActionInvoker，那么它说你不能使用接口作为 Action 方法参数。）

对于比我有更好 Autofac 知识的人，我的问题是：我可以更改 Autofac ExtensibleActionInvoker 以选择它绑定的内容吗？我所有注入的服务类都以 IService 开头，因此我可以对其进行过滤。我知道您可以在其他地方的 Autofac 中执行此操作，但无法使用 ExtensibleActionInvoker 执行此操作，但也许我错过了。

任何帮助，将不胜感激。

Jon Smith - 选择性分析

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:28:11.273

您是正确的，问题是由`ExtensibleActionInvoker`课程引起的。如果您查看[它的源代码，则](https://code.google.com/p/autofac/source/browse/src/Source/Autofac.Integration.Web.Mvc3/ExtensibleActionInvoker.cs?spec=svn94f70ab10f4d65991c600e2e80171ce4847589e6&r=94f70ab10f4d65991c600e2e80171ce4847589e6)有一个方法称为`GetParameterValue()`. 见下文：

```
 protected override object GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor)
    {
        if (_injectActionMethodParameters)
            return _context.ResolveOptional(parameterDescriptor.ParameterType) ?? base.GetParameterValue(controllerContext, parameterDescriptor);

        return base.GetParameterValue(controllerContext, parameterDescriptor);
    } 
```

此方法覆盖最终使用 MVC 框架的模型绑定器基础结构的方法。这意味着，ActionInvoker 首先尝试使用 AutoFac 解析参数，如果失败，则回退到默认功能。根据您获得的结果，您的 AutoFac 配置似乎必须设置为提供`ITestClass`.

为了向 AutoFac 注册自定义 ModelBinder，您有几个选项。您可以使用 a 来装饰视图模型，[`ModelBinderTypeAttribute`](http://code.google.com/p/autofac/source/browse/src/Source/Autofac.Integration.Mvc/ModelBinderTypeAttribute.cs)也可以在配置中使用[`RegistrationExtensions`](http://code.google.com/p/autofac/source/browse/src/Source/Autofac.Integration.Mvc/RegistrationExtensions.cs).

我发现的一篇文章似乎[为类似问题提供了一个简单的解决方案](http://blog.willrayner.com/post/6197768456/mvc3-modelbinders-with-autofac)（见最后），但我没有亲自测试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:04:05.700

现在解决了这个问题，我找到了一个简单的答案。我的问题是因为我没有真正理解 MVC 模型绑定是如何工作的。

如果您查看我的原始问题，我创建了一个 DefaultModelBinder 以允许我使用接口作为我的模型参数（请参阅顶部的原始问题）。这是在我包括 Autofac 的 ExtensibleActionInvoker 来绑定我的 IService 类型之后添加的。问题在于两种 DI 方法发生冲突。

答案是 DefaultModelBinder 足以绑定我的数据类和服务定义，所以我不需要 Autofac 的 ExtensibleActionInvoker。为了完整起见，我已经包含了 DefaultModelBinder 代码，以防它对其他人有用。

```
public class DiModelBinder : DefaultModelBinder
{
    protected override object CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType)
    {
        return modelType.IsInterface
                   ? DependencyResolver.Current.GetService(modelType)
                   : base.CreateModel(controllerContext, bindingContext, modelType);
    }
} 
```

请注意，如果模型类型是接口，我只调用 DependencyResolver，因为我不在层之间传递抽象类。任何替代方法是始终调用 DependencyResolver，然后在 DI 未解析类型时调用 base.CreateModel。我没有这样做，因为调用 DependencyResolver 有点贵，所以我只在知道我需要它时才调用它。

# javascript - jquery 和 asp.net 中的全球化。如何？

> ID：12107824
> 
> 赞同：1
> 
> 时间：2012-08-24T10:40:50.653
> 
> 标签：javascript, jquery, asp.net, localization, globalization

是否有用于 ASP.NET Web 应用程序全球化的 jquery 插件？我只找到了“来自 Microsoft 的 Jquery Globalization” [Jquery Globalization](http://weblogs.asp.net/scottgu/archive/2010/06/10/jquery-globalization-plugin-from-microsoft.aspx)，但它似乎是一个已死的项目。对？

那么，唯一的解决方案是使用“Asp.net Ajax Control Toolkit”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:48:44.433

可以说它已经“进化”了，现在有了一个新名字——全球化。它应该适用于任何 JS 库或环境，并且不再依赖于 jquery。

新闻链接：[http](http://damianedwards.wordpress.com/2011/07/08/the-jquery-globalization-plugin-becomes-globalize/)
://damianedwards.wordpress.com/2011/07/08/the-jquery-globalization-plugin-becomes-globalize/ GitHub：[https ://github.com/jquery/globalize](https://github.com/jquery/globalize)

我自己没有使用这个库的经验，但我想你可以很容易地自己弄清楚:)

# javascript - 用于一些 sencha/enyo 风格功能的骨干兼容 UI/组件库

> ID：12107825
> 
> 赞同：5
> 
> 时间：2012-08-24T10:40:53.547
> 
> 标签：javascript, css, mobile, backbone.js, sencha-touch

首先让我说我已经阅读了很多关于骨干/jQuery mobile 组合的使用以及骨干/Sencha 比较的问题和博客文章，实际上我在这个领域已经有一段时间了，但仍然没有找到正是我要找的。

我对 Sencha 非常熟悉，过去曾将它用于包装（phonegap 等）应用程序，我真的很喜欢它。但是，对于 Web 项目的较小代码库和对浏览器兼容性的更多控制以及各种其他原因，它不太适合某些任务。

当我开始尝试从头开始设计移动（也包括台式机和平板电脑）骨干网络应用程序时，我发现我错过了三个关键的事情

*   一般的移动“初始化”，填充屏幕等（虽然这是最容易复制的）
*   选项卡式，iOS 风格，导航（当然我可以自己滚动，但看起来很傻）
*   滚动 - 滚动一段内容，尤其是轮播以及轮播如何链接到选项卡式界面

我并不在乎在整个应用程序中模仿每个设备的本机操作系统风格，实际上我更愿意（同时遵循一些合理的约定）让它们看起来有点不同。

Ember 有[火焰](https://github.com/flamejs/flame.js)，我以前用过，这就是我正在寻找的东西。

我知道我可以建立一个 jQuery mobile、自定义脚本、jQ 插件/iSroll、CSS 库、主干 UI 等工具包，并且喜欢编译我自己的“堆栈”的想法，但由于某种原因它感觉不对.

所以，把它带回到一个更实际的问题上。我想我正在寻找一个没有专门链接到库的理想项目——理论上如果需要的话，它可以在静态编码页面上独立运行（即使现在对我来说不是这样） ）。或者也许是来自其他经历过类似旅程的人的一些话，最终可能会出现在我之前提到的各种库中，以及为什么他们认为这是最好的解决方案。

我不想做任何太疯狂的事情，说一些有点像[古老的 sencha oreilly 示例](http://dev.sencha.com/deploy/touch/examples/production/oreilly/)但使用一些轮播的东西，我将使用响应式 CSS 和一些 JS 的混合来涵盖多种设备和浏览器。

我自己也会继续看这个，如果我发现任何有趣的事情，我会回来报告

干杯

**编辑**

在研究这个时，我意识到它只是我真正想要的 Sencha 的轮播和滚动。我注意到 Cubiq 有一个很好的幻灯片组件，它可以非常整齐地处理轮播，并且占用空间很小。我找到了一个关于将其与原始 iscroll 一起用于垂直滚动的 stackoverflow 答案。请参阅下面的答案以成功将两者结合 [使用如何将 iScroll4 与 SwipeView 一起使用？](https://stackoverflow.com/questions/9400260/how-to-use-iscroll4-with-swipeview/12217037#12217037)

这需要一些调整才能在桌面上正常工作。我也想从标签式 UI 控制它。无论如何，我还没有回答我自己的问题，但鉴于这有几个赞成票，我会发表一些我的想法。

**快速编辑**

您可以将选项卡的事件附加到幻灯片[https://dl.dropbox.com/u/81328343/scroll/1.html](https://dl.dropbox.com/u/81328343/scroll/1.html)但目前，它只为下一个/上一个动画而不是直接页面（选项卡）访问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-25T14:40:27.143

[Webix](http://webix.com)

非常大的组件库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:56:07.010

我已经使用带有 Backbone 的 Twitter Boostrap ......

[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

# android - 在布局中更改文本大小的简单方法

> ID：12107826
> 
> 赞同：1
> 
> 时间：2012-08-24T10:40:53.540
> 
> 标签：android, android-layout

我有带RelativeLayout 标题栏的RelativeLayout：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:gravity="center_horizontal"
android:orientation="vertical" >

<RelativeLayout android:id="@+id/titleBar"
    style="@style/TitleBar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true">

<TextView
    android:id="@+id/caption"
    style="@style/WindowCaption"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:text="caption"/>

<Button
    android:id="@+id/buttonSave"
    style="@style/ButtonBar"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"
    android:layout_marginRight="5dp"
    android:onClick="save"
    android:text="Save" />

</RelativeLayout>
...
</RelativeLayout> 
```

![在此处输入图像描述](../Images/e129325127c7f134045bf4c652398154.png)

在小屏幕上，按钮位于文本之上：

![在此处输入图像描述](../Images/0e58b60f3c922dc86213da25a5699226.png)

我想调整文本或按钮的大小以使它们都正确可见。我希望文本位于中心。

**我可以仅使用样式和布局工具以某种方式做到这一点吗？**

还是唯一的方法是以编程方式更改文本大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:45:00.703

```
 <RelativeLayout
    android:id="@+id/te1"
    android:layout_width="fill_parent"
    android:layout_height="45dp" >

 <TextView
    android:id="@+id/TextViewCount"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/ButtonCount"
    android:layout_alignParentLeft="true"
    android:layout_toLeftOf="@+id/ButtonCount"
    android:text="Countfdddgd "
    android:textSize="40dip" />

    <Button
        android:id="@+id/button1"
        style="@style/ButtonText"
        android:layout_alignParentRight="true"
        android:layout_marginTop="2dp"
        android:background="@drawable/greenbutton"   
        android:height="45dp"
        android:text="Accounts"
        android:width="100dp" />

</RelativeLayout> 
```

# asp.net-mvc - MVC 本地化的 htmlAttributes

> ID：12107827
> 
> 赞同：0
> 
> 时间：2012-08-24T10:41:01.190
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我需要在我的复选框中添加一个 htmlAttribute。所以我在我看来是这样的：

> @Html.CheckBoxFor(model => model.IsVisibleFirstLastName, new { @class = "privacyCheck toolTip", @title = "@Resources.fld_CountryVisibleChk_lbl" })

`Resources.fld_CountryVisibleChk_lbl`我的资源文件 (resx) 条目在哪里。

但这不起作用。我只得到确切的字符串 `@Resources.fld_CountryVisibleChk_lbl`（在浏览器中查看源代码时）而不是实际值（即依赖于语言的字符串）。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:44:38.167

删除引号：

```
@title = @Resources.fld_CountryVisibleChk_lbl 
```

如果您通过 javascript 访问它，则只需要引号，例如

```
<script>
    var countryVisible = "@Resources.fld_CountryVisibleChk_lbl";
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:44:47.320

试着去掉周围的语音标记，`"@Resources.fld_CountryVisibleChk_lbl"`这样就可以`@title = @Resources.fld_CountryVisibleChk_lbl })`了

# facebook-graph-api - 有没有办法为外部 JS 和 CSS 设置 Exipre 标头？

> ID：12107829
> 
> 赞同：1
> 
> 时间：2012-08-24T10:41:17.200
> 
> 标签：facebook-graph-api, caching, http-headers, twitter, google-api

我在我的网站上运行了 Page Speed Insight，并且由于 Facebook、Twitter、Google 和 LinkedIn 对 JS 的多次调用，利用浏览器缓存不断出现。Firebug 还向我展示了这些资源正在增加我的加载时间。我已经按照[此处](https://stackoverflow.com/questions/2676744/set-http-caching-expiration-recommended-by-google-pagespeed)所述设置了 Expire 标头，但仍然没有更改。

在优化加载时间和缓存来自 Google、Facebook 或 Twitter 的外部资源方面有什么可以做的吗？

[这](https://developers.google.com/speed/pagespeed/insights#url=adfix.ro&mobile=false&rule=LeverageBrowserCaching)是我的页面速度报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:44:27.073

回答标题问题：不，没有办法为外部资源操作 HTTP 标头，只要您不想通过自己的代理服务器将它们全部循环。

# ruby - rake - 运行 shell 命令返回错误

> ID：12107831
> 
> 赞同：0
> 
> 时间：2012-08-24T10:41:19.587
> 
> 标签：ruby, rake

我正在尝试在 Rake 中运行以下 shell 命令：

```
sh "d='jps -l | grep jar | cut -d ' ' -f 1'; if [ -z \"$d\" ]; then :; else kill  \"$d\"; fi;" 
```

但是我得到：

```
sh:  -f 1: not found 
```

如果我在 linux shell 中运行它，它工作正常。

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:44:03.667

我之前解释错了你的问题。这就是你想要的。

```
d='jps -l | grep jar | cut -d " " -f 1; if [ -z "$d" ]; then :; else kill "$d"; fi;'
system(d) 
```

**或者**

如果你想要命令的输出（我猜你在这种情况下不需要）

```
output = `jps -l | grep jar | cut -d " " -f 1; if [ -z "$d" ]; then :; else kill "$d"; fi;` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:45:07.817

您需要转义单引号并引用整个字符串：

```
d='jps -l | grep jar | cut -d \' \' -f 1; if [ -z "$d" ]; then :; else kill  "$d"; fi;' 
```

# ios - iPhone：需要最简单的方式来处理 iOS 导航

> ID：12107833
> 
> 赞同：0
> 
> 时间：2012-08-24T10:41:27.540
> 
> 标签：ios, uinavigationcontroller, storyboard, uinavigationbar, uibarbuttonitem

在我意识到导航按钮是必需的之前，我有一个相当大的应用程序，其中所有视图控制器都由故事板 segues 连接。我现在无法删除所有场景并重新开始，也无法扩展 segue 方法，因为它被过度使用了。

我正在寻找一种小巧、优雅的解决方案，它可以让我的所有视图控制器都有向后导航。查看我的场景层次结构：

*   第 1 页---> 第 2 页
*   第 1 页---> 第 3 页 ---> 第 4 页
*   第 3 页---> 第 5 页等等。

所以我应该能够从第 5 页倒退到第 1 页。到目前为止，我有大约 12 个屏幕。

我应该怎么办？我可以安全地搞砸故事板吗？或者我应该将代码片段添加到我的 viewDidLoads 等等来处理这些东西？

我的问题是，当我搜索解决方案时，我发现太多的方法包括导航控制器、uinavigationbar、UIBarButtonItem 等等。对于它们中的每一个，我发现它可能对我的需要来说太多了，我需要一个更小的东西，可能只是工作。

到目前为止，我可能只需要后退按钮，但只需很少的努力 - 因为我在截止日期前非常紧张:-(

感谢快速帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:59:53.140

我从苹果文档中找到了答案——基本上我需要一种处理事情的方法（而不是直接的代码），这里是：

*   在 appdelegate didFinishLaunchingWithOptions 方法中初始化 navcontroller，将根视图控制器设置为应用程序的第一个视图控制器
*   设置 appdelegate 窗口的 rootviewcontroller = navcontroller
*   每次“前进”导航 - 将 pushViewController 与目标视图控制器一起使用
*   无需处理向后导航 - 默认情况下，navcontroller 会处理它。

上面还将在每个视图控制器顶部添加额外的导航栏（应用程序委托的根视图控制器除外）。

# java - 如何为以下场景编写正则表达式模式

> ID：12107836
> 
> 赞同：0
> 
> 时间：2012-08-24T10:41:28.977
> 
> 标签：java, regex

任何人都可以给我一些正则表达式模式，这些模式将从一些示例字符串中提取版本号（1.5），例如

```
 "jdk1.5","jdk-v1.5","jdk-V1.5","jdk V1.5","jdkv1.5","jdk version1.5","1.5.6","v1.5","V1.5","version 1.5","Version 1.5","14.5.4","1.5.4","14.5.4""jdj14.5" 
```

我想将正则表达式模式存储在字符串数组中，并将使用上述字符串检查这些模式。如果与任何存储的模式匹配，则输出应该是版本号 1.5。我只想从上面的字符串中提取版本号（1.5）。

有效的字符串格式："jdk1.5","jdk-v1.5","jdk-V1.5","jdk V1.3","jdkv1.4","jdk version1.5","1.5.6 ","v1.5","V1.5","1.5 版","1.5 版","14.5.4","1.5.4","14.5.4""jdj14.5","14.52\. 3.42"

无效的字符串格式："jdk1..2","jdk.1.2.",".1.2."

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:45:46.057

尝试：

```
^(jdk[- ]?)?([vV](ersion)? ?)?\d\.\d(\.\d)?$ 
```

如果设置标志`[vV]`，则可以省略。`v``CASE_INSENSITIVE`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:56:31.620

试试这个正则表达式：

`(?<=([\w\s]))(\d)\.(\d)(.\d)?`

这将匹配您所有的有效格式，并且不匹配任何无效格式。

看到它在这里工作：[http ://regexr.com?31ubc](http://regexr.com?31ubc)

如果有人可以帮助我使其变得更好，以及如何使其匹配，我将不胜感激`1.5.6`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T11:10:28.917

## 要求

如果您可以将您想要的内容表述为：

1.  默认情况下，格式`1.5`或`1.5.6`或`1.5.6.7`或`1.5.6.7.8`等格式的任何内容都是有效的版本号（数字可以是一个或多个数字，如`12.60.70`）。
2.  只有在格式中，版本号`1.5`才可以后跟一个点 ( ) 。`.``1.5.6`
3.  版本号`1.5`之前从不带点 ( `.`)，例如`.1.5`.

## 解决方案

然后，我可以建议你这个正则表达式：

```
(?!\.)(\d+(\.\d+)+)(?![\d\.]) 
```

查看[**实际情况**](http://regexr.com?31ut3)，包括所有正样本并排除您提供的所有负样本。

## 如何使用

**第一个捕获组**将是您的版本号。示例代码：

```
Pattern pattern    = Pattern.compile("(?!\\.)(\\d+(\\.\\d+)+)(?![\\d\\.])");
Matcher matcher    = pattern.matcher(inputStr);
boolean matchFound = matcher.find();

if (matchFound)
{
    String version = matcher.group(1);
    System.out.println("Version number: " + version);
}
else
{
    System.out.println("No match for the input!");
} 
```

**注意：**这仅适用于 Java 7+，因为旧版本不支持前瞻。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T06:15:16.003

`(?<![\d.])(\d+[.])+(\d+)(?![\d.])`

检查这个...

它将匹配表单的字符串

`number.number.number.number`

后面没有或前面没有点

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T11:18:59.403

对于像 1.5.6 这样的字符串，您可以使用： `[0-9](.[0-9])+` [http ://regexr.com?31ubo](http://regexr.com?31ubo)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T06:48:03.797

使用正则表达式：

```
(^([jJ][dD][kK])([\s]*[vV]*\d+.\d+(.\d+)*))$ 
```

这会让你的一天:)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-24T10:46:02.280

如果您想捕获两个以上的数字，例如“1.5.6”或“1.5.0”，您可以使用

`[0-9](.[0-9])+`

或者，如果您只想要前两位数字 `[0-9].[0-9]`，但这不适用于像 1.5.0.0 这样的字符串，它将捕获 1.5 和 0.0。

# sql - 多对多关系中的 SQL 过滤器

> ID：12107842
> 
> 赞同：1
> 
> 时间：2012-08-24T10:41:47.050
> 
> 标签：sql, many-to-many, relational-database

我有基本的多对多关系集与表`categories`、`locations`槽`categories_locations`表。例子：

类别表

```
| ID | Name       |
| 1  | Category 1 |
| 2  | Category 2 |
| 3  | Category 3 | 
```

位置表

```
| ID | Name       |
| 1  | Location 1 |
| 2  | Location 2 |
| 3  | Location 3 | 
```

类别_位置表

```
| category_id | location_id |
| 1           | 1           |
| 2           | 2           |
| 2           | 3           |
| 3           | 1           |
| 3           | 3           | 
```

如何获取属于第 2 类同时也属于第 3 类的所有位置？在上面的示例中，这只会导致位置 3！

使用 OR 过滤很简单。只是一个普通的左连接，其中 category_id IN（匹配的类别）。但是，当我只想获得那些属于 category1 并且同时也属于 category2 的关系（等等）时，如何过滤呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T10:46:47.317

```
select 
    Location_ID 
from CategoryLocations
where Category_ID in (2,3)
group by Location_ID
having COUNT(distinct Category_ID) = 2  -- this 2 is the number of items in the IN list above 
```

# objective-c - setter 和 getter 点符号目标 c 左右

> ID：12107844
> 
> 赞同：0
> 
> 时间：2012-08-24T10:41:55.620
> 
> 标签：objective-c, setter, getter

我坚持使用 setter 和 getter 的点表示法

```
self.display = display.text 
```

左边叫setter，右边叫getter？

请为我链接一些参考资料。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:46:41.830

是的。通常所有带有点符号的东西都会调用 getter 方法，*除非*它位于等号的左侧。

```
self.view = somethingElse.view; 
```

是相同的

```
[self setView:[somethingElse view]]; 
```

这是[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:51:58.247

在 Objective-C 2.0 之前，这样的属性：

```
@property (nonatomic, retain) NSString * text 
```

... 改为声明为 2 种方法，如下所示：

```
- (NSString *) text
{
   return _text;  // _text declared as an instance variable
}

- (void) setText: (NSString *) text
{
   [text retain];
   [_text release];
   _text = text;
} 
```

第一个是getter（它*获取*ivar），第二个是setter（它*设置*ivar）

因此，删除您的作业“扩展”为的点符号是：

```
[self setDisplay: [display text]]; 
```

# iphone - 在IOS中交换图像

> ID：12107845
> 
> 赞同：2
> 
> 时间：2012-08-24T10:41:58.830
> 
> 标签：iphone, ios

我必须在一个屏幕上交换四个图像。图像只能在左/右/上/下方向交换，不能对角交换。例如，第 1 张图像可以与其右侧和下方的图像交换，第 2 幅图像只能与其左侧和下方的图像交换，以此类推。任何人都可以请帮助我如何做到这一点。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:32:48.543

添加滑动手势识别器。当用户滑动时确定哪个方向并处理图像交换。

[编辑] - 想象一个正方形分成四个相等的部分。左上部分的索引为 0，右上部分的索引为 1，左下部分的索引为 2，最后右下部分的索引为 3。下面的代码检查当前索引，并从中确定图像是否可以进行交换，如果没有，它什么也不做。

这段代码来自我的脑海，所以可能存在语法错误，但逻辑是合理的（我希望 :D ）。

```
- (void) viewDidLoad {
// turn on user interaction on the image view as its off by default.
[self.imageView setUserInteractionEnabled:TRUE];

UISwipeGestureRecognizer *recognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipe:)];
[recognizer setDirection:(UISwipeGestureRecognizerDirectionRight | UISwipeGestureRecognizerDirectionDown | UISwipeGestureRecognizerDirectionLeft | UISwipeGestureRecognizerDirectionUp)];
[self.imageView addGestureRecognizer:recognizer];

self.currentImageIndex = 0;
self.images = [NSArray arrayWithObjects:[UIImage imageNamed:@"top-left"],[UIImage imageNamed:@"top-right"],[UIImage imageNamed:@"bottom-left"],[UIImage imageNamed:@"top-right"],nil];

}

-(void)handleSwipeFrom:(UISwipeGestureRecognizer *)recognizer {

if (recognizer.direction == UISwipeGestureRecognizerDirectionRight) {

if (self.currentImageIndex == 0 || self.currentImageIndex == 2) self.currentImageIndex++; // change to image to the right
else return; // do nothing

}
else if (recognizer.direction == UISwipeGestureRecognizerDirectionLeft) {

if (self.currentImageIndex == 1 || self.currentImageIndex == 3) self.currentImageIndex--; // change to the image to the left
else return; // do nothing

}
else if (recognizer.direction == UISwipeGestureRecognizerDirectionUp) {

if (self.currentImageIndex == 2 || self.currentImageIndex == 3) self.currentImageIndex -= 2; // change to the above image 
else return; // do nothing

}
else if (recognizer.direction == UISwipeGestureRecognizerDirectionDown) {

if (self.currentImageIndex == 0 || self.currentImageIndex == 1) self.currentImageIndex += 2; // change to the above image 
else return; // do nothing

}
[UIView animationWithDuration:0.5 animations:^{
    [self.imageView setAlpha:0];
} completion^(BOOL finished){
    if (finished) {
         [UIView animationWithDuration:0.5 animations:^{
             [self.imageView setImage[self.images objectAtIndex:self.currentImageIndex]];
             [self.imageView setAlpha:1];
         }];
    }
}];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:54:15.993

要添加拖放功能，假设这就是您的意思，您需要查看[UIPanGestureRecognizer](http://www.google.com/url?sa=t&rct=j&q=uipangesturerecognizer%20class%20reference&source=web&cd=1&ved=0CDMQFjAA&url=http%3A%2F%2Fdeveloper.apple.com%2Flibrary%2Fios%2Fdocumentation%2Fuikit%2Freference%2FUIPanGestureRecognizer_Class%2FReference%2FReference.html&ei=6Fw3UN3nJJGO9ASzr4CQBg&usg=AFQjCNHxg0rarekmj02GP3au0hipPRU-ig&sig2=iQEBPzoed64LvUV8nWgHkA)

# internet-explorer-8 - IE 8：使用 -ms-filter 修复背景大小

> ID：12107846
> 
> 赞同：0
> 
> 时间：2012-08-24T10:42:05.673
> 
> 标签：internet-explorer-8, css

我在 Stackoverflow 上发现了同样的问题，并发布了修复：[https ://stackoverflow.com/a/9169401/1107123](https://stackoverflow.com/a/9169401/1107123)

我可以让它工作，但是一旦我将它与 PHP 一起使用它就不会。

有任何想法吗？

我也看了这个：[https](https://stackoverflow.com/a/10147089/1107123) ://stackoverflow.com/a/10147089/1107123 但我不知道如何实现它。文档非常模糊：/

这不起作用：（在 PHP 内部）

```
echo "<div style="filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='img.gif',sizingMethod='scale'); -ms-filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='img.gif',sizingMethod="scale');'></div>"; 
```

这工作得很好：（HTML）

```
<div style="filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='img.gif',sizingMethod='scale'); -ms-filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="img.gif",sizingMethod="scale");"></div> 
```

原始代码：

```
echo        "<div class='sponsorImage' style='background-image:url($row[piclink]);'></div>"; 
```

我该如何使用 -ms-filter 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:51:15.990

这与 PHP/RubyRails 或其他无关 - 与浏览器的 css 兼容性无关 - 试试这个[http://pastebin.com/RZ0krHj0](http://pastebin.com/RZ0krHj0)，

# ruby-on-rails - 黄瓜功能显示错误“无路线匹配”

> ID：12107848
> 
> 赞同：0
> 
> 时间：2012-08-24T10:42:20.327
> 
> 标签：ruby-on-rails, ruby, cucumber

我有一个这样的功能文件

```
Feature: search for movies by director

As a movie buff
So that I can find movies with my favorite director
I want to include and serach on director information in movies I enter

Background: movies in database

Given the following movies exist:
| title        | rating | director     | release_date |
| Star Wars    | PG     | George Lucas |   1977-05-25 |
| Blade Runner | PG     | Ridley Scott |   1982-06-25 |
| Alien        | R      |              |   1979-05-25 |
| THX-1138     | R      | George Lucas |   1971-03-11 |

Scenario: add director to existing movie
When I go to the edit page for "Alien"
And  I fill in "Director" with "Ridley Scott"
And  I press "Update Movie Info"
Then the director of "Alien" should be "Ridley Scott" 
```

现在我有一个像这样的步骤定义，它通过给定以下电影存在：案例。

```
Given /the following movies exist/ do |movies_table|
  movies_table.hashes.each do |movie|
  Movie.create!(movie)
end 
```

结尾

但是当黄瓜运行步骤时，当我进入“Alien”的编辑页面时，它会抛出这个错误

> 没有路线匹配 {:action=>"edit", :controller=>"movies"}
> (ActionController::RoutingError) ./features/support/paths.rb:20:in `path_to'

我的 paths.rb 在 path_to 中有这个案例

```
when /^the edit page for (.*)/
  m = Movie.find_by_title($1)
  edit_movie_path(m) 
```

我检查了 m 是否为零，但在后台我将四部电影添加到数据库中。我还检查了**“耙路线”**，但所有路线都存在。

请帮助我理解，我对铁轨和黄瓜很陌生。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:50:52.433

`(.*)` 周围缺少双引号

```
when /^the edit page for (.*)/ 
```

应该

```
when /^the edit page for "(.*)"/ 
```

**说明：** 假设您的**websteps.rb**包含

```
When /^(?:|I )go to (.+)$/ do |page_name|
  visit path_to(page_name)
end 
```

这意味着首先它将通过调用`path_to('the edit page for "Alien"')`. 因此，您提交`path_to`函数的案例应该只提取名称`Alien`。由于缺少双引号，因此`$1`is contains`"Alien"`而不是 only `Alien`。实际上是在`find_by_title`寻找像下面这样的电影

```
m = Movie.find_by_title('"Alien"') # Doesn't exist for sure ;) 
```

# esb - Fuse ESB 可以接收来自 TIBCO 集合点的消息吗？

> ID：12107850
> 
> 赞同：0
> 
> 时间：2012-08-24T10:42:28.037
> 
> 标签：esb, fuseesb

我想知道 Fuse ESB 可以从 TIBCO 集合通道读取消息的不同方法。

问候， 阿伦·拉科蒂亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:21:05.803

Fuse ESB 支持使用 JMS（它的 Java 消息传递规范）进行消息传递。TIBCO 也支持 JMS，因此您可以将 Fuse ESB 与 Tibco 集成（使用 JMS）。

# iphone - 如何在 iphone 中滚动一个简单的 UIView（不是 uitableview）？

> ID：12107854
> 
> 赞同：0
> 
> 时间：2012-08-24T10:42:33.317
> 
> 标签：iphone, objective-c

我在我的 uiviewcontroller 中添加了一些 uitextview。但是与 textViews 的数量相比，一些 textViews 没有被看到，因为视图很小。所以我想滚动它，这样我也可以看到其他 textViews。还有一件事——当我想在下面的 textView 中输入一些东西时，它会因为 iphone 键盘而隐藏。如果有人知道，请给我解决方案。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:48:06.250

在 self.view 中添加 UIScrollView。现在将所有子视图添加到 UIScrollView。

提供 UIScrollView 的 contentSize 的宽度和高度。

```
if heigth > 460 it will scroll vertically

if weight > 320 it will scroll horizontally 
```

如果任何条件不匹配，那么您将无法滚动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:18:21.403

您必须实现 UIScrollView。这是 iPhone 开发（一般来说只是 Apple 开发）的基础课程，在继续学习更高级的主题之前应该掌握它。这是该类的文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T10:48:18.040

您只需使用 UIScrollView。而不是在主视图中添加所有子视图（在您的情况下为多个 UITextView），只需在视图中添加一个 srollView，然后在该 scrollView.UIView 中添加所有子视图没有属性滚动。并且不要忘记更改滚动视图的 contentSize 属性。

# php - php函数没有得到包含

> ID：12107856
> 
> 赞同：-1
> 
> 时间：2012-08-24T10:42:47.343
> 
> 标签：php, function

我在 index.php 中有这个

```
require('include\inc\config.inc'); 
```

当我创建一个需要来自 config.inc 的变量的函数时，当我运行时，它说该变量丢失了，我需要重新声明 config.inc，否则该函数将永远无法工作。有办法解决吗？现在我有这个

```
function test(){
require('include\inc\config.inc');
echo $tmp;    
} 
```

代替

```
 require('include\inc\config.inc');
   function test(){    
    echo $tmp;    
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:44:24.147

您应该阅读有关[变量范围](http://php.net/manual/en/language.variables.scope.php)的信息。该`$tmp`变量是全局的，并且在任何函数中都不可见，除非用`global`

```
require('include\inc\config.inc');
function test(){    
global $tmp;
echo $tmp;    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:53:25.293

如前所述，您的变量超出了 test() 函数的范围，使用全局变量不被认为是好的做法。您需要将变量 $tmp 传递给函数 test() ，如下所示：-

```
function test($tmp)
{
    echo $tmp;
} 
```

然后像这样调用函数：-

```
require_once 'include/inc/configure.inc'
test($tmp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T10:48:14.207

我不精通 PHP，但你不能写：

```
require('include\inc\config.inc');
function test() use ($tmp) {
  echo $tmp;
} 
```

# android - 如何在 Android 中更改 ListView onClick 中项目的样式？

> ID：12107858
> 
> 赞同：2
> 
> 时间：2012-08-24T10:42:53.233
> 
> 标签：android, android-layout

我为带有自定义视图的列表视图创建了一个自定义适配器。

现在我想在按下按钮时更改列表视图项目的背景（项目自定义视图中布局的 bg 颜色）。

甚至可能吗？是否可以一次更改所有列表视图项目，或者我必须一一更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:19:24.567

除了遍历所有子项之外，您还可以在活页夹中更改颜色并强制 ListView 重新绑定项目（通过适配器中的数据更改方法）。这样，您就不会进入 ListView 的视图层次结构，这通常被认为是非常糟糕的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:06:08.210

如果您使用“customview”膨胀了“listitems”，那么只需在自定义适配器中绑定 customview 的元素（例如：按钮）并为它们设置 onclick 侦听器。

你可以参考这个：[在listview的每一行中保留元素的状态](https://stackoverflow.com/questions/10269463/preserve-state-of-elements-inside-listviews-each-row)

在我的自定义适配器中，我绑定了自定义视图的 1 个 TextView 和 2 个按钮，然后在点击侦听器上实现。

我希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:02:25.410

尝试这样的事情

```
ListView mView;
...
int c = mView.getChildCount()
for(int i = 0; i < c; i++){
   View v = mView.getChildAt(i);
   v.setBackgroundColor(color);
} 
```

据我所知，没有办法为所有子视图设置颜色。如果可以的话，背景中的所有视图仍然会迭代。

# android - 一次又一次强制关闭

> ID：12107865
> 
> 赞同：-4
> 
> 时间：2012-08-24T10:43:42.560
> 
> 标签：android

代码：

```
package com.guess.guessthefone;

import android.media.MediaPlayer;

import android.os.Bundle;

import android.app.Activity;

import android.content.Intent;

import android.view.Menu;

public class MainActivity extends Activity {

MediaPlayer logoMusic;

    @Override

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.splash);

        MediaPlayer logoMusic = MediaPlayer.create(MainActivity.this, R.raw.splash_sound);
        logoMusic.start();

        Thread logoTimer = new Thread(){

            public void run(){

                try{
                    sleep(2000);
                Intent MenuIntent =  new Intent("com.guess.guessthefone.SPLASH");
                    startActivity(MenuIntent);

                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                finally{

                    finish();

                }
            }

        };
        logoTimer.start();
    }

    @Override

    public boolean onCreateOptionsMenu(Menu menu) {

        getMenuInflater().inflate(R.menu.activity_main, menu);

        return true;
    }

} 
```

我的 LogCat 输出是：

```
08-24 16:40:33.558: D/dalvikvm(322): GC_EXTERNAL_ALLOC freed 48K, 53% free 2551K/5379K, external 1625K/2137K, paused 74ms

08-24 16:40:36.048: W/dalvikvm(322): threadid=9: thread exiting with uncaught exception (group=0x40015560)

08-24 16:40:36.057: E/AndroidRuntime(322): FATAL EXCEPTION: Thread-10

08-24 16:40:36.057: E/AndroidRuntime(322): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.guess.guessthefone.Menu }

08-24 16:40:36.057: E/AndroidRuntime(322):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1409)

08-24 16:40:36.057: E/AndroidRuntime(322):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)

08-24 16:40:36.057: E/AndroidRuntime(322):  at android.app.Activity.startActivityForResult(Activity.java:2827)

08-24 16:40:36.057: E/AndroidRuntime(322):  at android.app.Activity.startActivity(Activity.java:2933)

08-24 16:40:36.057: E/AndroidRuntime(322):  at com.guess.guessthefone.MainActivity$2.run(MainActivity.java:29) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:02:34.303

此外，播放器应在播放视频之前做好准备。你应该接触preparedlistener

```
final MediaPlayer logoMusic = MediaPlayer.create(MainActivity.this, R.raw.splash_sound);
//set your dataSource here
logoMusic .setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer mp) {
    logoMusic.start();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:50:03.520

改变这个。

```
 Intent MenuIntent =  new Intent(MainActivity.this,SPLASH.class);
  startActivity(MenuIntent); 
```

并在 android 清单文件中声明了您的**SPLASH Activity。**

```
<activity
        android:name=".SPLASH"/> 
```

# ios - 两个 GPS 位置之间的距离，并跟踪它们之间的路线

> ID：12107866
> 
> 赞同：1
> 
> 时间：2012-08-24T10:43:43.020
> 
> 标签：ios, gps

我试图找到两个 GPS 位置之间的距离，我得到了使用 MKReverseGeocoder 的方法......现在，我如何追踪这两个位置之间的路径.. 建议将不胜感激.. 在此先感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:45:48.093

对于从两个位置的距离，只需使用波纹管来获取距离

```
CLLocationDistance distance = [yourCurrentLocation distanceFromLocation:yourDestinationLocation]; 
```

这里 yourCurrentLocation 和 yourDestinationLocation 是 CLLocation 变量，它返回从接收器位置到指定位置的距离（以米为单位）。

我希望这对你有帮助.. :)

# javascript - 无法使用画布方法 putImageData

> ID：12107867
> 
> 赞同：1
> 
> 时间：2012-08-24T10:43:47.787
> 
> 标签：javascript, html5-canvas

我有以下代码：

```
var img = new Image();
canvas = document.getElementById("c");
ctx = canvas.getContext('2d')
canvas2 = document.getElementById("c2");
ctx2 = canvas2.getContext('2d')
img.onload = function () {
    canvas.width = img.width;
    canvas.height = img.height;
ctx.drawImage(img,0,0);
};
img.src = 'mwq.gif';
var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
ctx2.putImageData(imageData, 0, 0); 
```

我在第一个画布元素上获取图像，当我在控制台中签入时，有 imageData，具有宽度、长度和像素数组，但不知何故我无法在另一个画布元素上获取该图像。我不认为有错别字，我多次重写相同的代码，最后我将它剥离到没有像素操作的最小版本，但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:47:07.680

Your code isn't called in the `onload` callback, it's executed before the image is loaded so there is nothing to put.

You could change it to

```
var img = new Image();
canvas = document.getElementById("c");
ctx = canvas.getContext('2d')
canvas2 = document.getElementById("c2");
ctx2 = canvas2.getContext('2d')
img.onload = function () {
    canvas.width = img.width;
    canvas.height = img.height;
    ctx.drawImage(img,0,0);
    var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
    ctx2.putImageData(imageData, 0, 0);
};
img.src = 'mwq.gif'; 
```

# c++ - c ++如何重铸而不会失去价值

> ID：12107880
> 
> 赞同：1
> 
> 时间：2012-08-24T10:44:34.370
> 
> 标签：c++

任何人都可以帮助我铸造？我有2节课；其中之一是可**移动**对象和其他**PlantMO**。可移动对象是我的基类，而 PlantMO 是从它派生的。首先，我将 PlantMO 投射到可移动对象上，以将所有可移动对象保持在同一区域。之后，当我使用其中一个时，我对其进行了重铸，但其（PlantMO）成员的价值丢失了。

 **我的问题是；我怎样才能在不失去成员的情况下重铸它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:49:18.923

在没有看到您的代码的情况下，我无法准确地向您展示您需要做什么，但您需要使用指针或引用，例如（注意我没有尝试编译此代码，它只是一个抽象示例）。

```
class A {
}

class B : A {
}

main () {
 B& refB = new B();
 SomeFunction(refB);
}

void SomeFunction(A& aRefToA) {
 // Call functions of A.
} 
```**

# ruby - 如何修复mac上的rails文件上传？

> ID：12107883
> 
> 赞同：0
> 
> 时间：2012-08-24T10:44:39.793
> 
> 标签：ruby, ruby-on-rails-3, macos, forms, file-upload

在 Mac 下上传文件时遇到问题。在 windows 开发环境下没问题，在 ubuntu prod 下没问题，但是当我尝试上传和解析文件时，在 Mac os 10.6.8 下抛出这个：

ProductsController#import_adjust 中的 Errno::ENOENT

没有这样的文件或目录 - /var/folders/v8/v8lBbdWcGJmntpbJRzGcfU+++TI/-Tmp-/RackMultipart20120824-71301-1aqop0s

这是一个表格：

```
<%= form_for :upload, :html => {:multipart => true}, :url => {action: "upload"} do |f| %>
  <%= f.file_field :my_file %>
  <%= f.submit "Upload" %>
<% end %> 
```

这是一个代码：

```
def import_adjust
    case params[:commit]
      when "Adjust"
        @col_default = params[:col_data]
        #abort @col_default.to_yaml
        #update csv reader with form data, restore filters  from params
      when "Complete"
        #all ok, read the whole file
        #abort params.to_yaml
        self.import_complete
        return
      else
        @col_default = nil
    end
    #read first part of the file
    @tmp = session[:import_file]
    @csv = []
    source = CSV.open @tmp, {col_sep: ";"}

    5.times do
      line = source.readline
      if line.size>0
        @line_size = line.size
        @csv.push line
      end
    end

    #generate a selection array
    #selection = select_tag 'col_data[]', options_for_select([['name','name'], ['brand','brand'], ['delivery_time','delivery_time'], ['price','price']])
    #@csv = [selection * line_size] + @csv
  end 
```

# libcurl - libcurl.lib - 我在哪里可以得到它

> ID：12107885
> 
> 赞同：3
> 
> 时间：2012-08-24T10:44:50.340
> 
> 标签：libcurl

libcurl 是我将尝试使用的，用于从使用 Visual Studio 6 编译的 Windows XP 上运行的 C 程序向 JMS 队列发布消息。

有了这个我需要链接 libcurl.lib - 但我从哪里得到这个？

我将许多 lib 链接到我的程序（wsock32.lib、kernel32.lib 等），所以一旦我能掌握它，我就看不到问题了。

我已经下载了所有 Win32-Generic 二进制文件等（http://curl.haxx.se/download.html），但它们都不包含我需要的 lib/headers。

那里的任何人都知道我从哪里得到它们。

谢谢你的帮助。

*   现在在 64 位机器上运行的问题 - 请参阅我的“答案”帖子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:12:19.547

我使用了您提供的链接（[直接链接](http://curl.haxx.se/download/libcurl-7.19.3-win32-ssl-msvc.zip)）。我现在将 libcurl_imp.lib 链接到我的 dll，它编译得很好。我的应用程序可以调用我的新库例程，这些例程可以很好地调用 curl 方法并且可以很好地工作 -**但只能在 64 位机器上？**- 如果我尝试在 32 位 XP 机器上运行相同的 dll/二进制应用程序，它会立即转储。事实上，我所有的应用程序都中止了——它们没有引用我的新库例程，它们只是使用 dll。似乎只是因为我在我的 dll 中构建了 cURL 调用，它立即中止了生成的进程——我只是明白了——</p>

> [1](http://curl.haxx.se/download/libcurl-7.19.3-win32-ssl-msvc.zip) + 完成（134）
> 
> 5656 中止测试应用程序

我在 main 之后立即有一个 printf 语句，但在命令行上没有输出。

然后我从 dll 中删除了我所有的新库函数，除了一个之外，我所做的只是——</p>

`CURLcode res = curl_global_init(CURL_GLOBAL_DEFAULT);`

这一行导致我的所有应用程序在构建到我的 dll 时在 32 位上失败——将其注释掉，它们都可以工作。

如前所述，相同的 dll/二进制文件在我的 64 位机器上运行良好。64 位机器上的 curllib.dll 与我的 32 位机器上的相同。

对于信息，我的构建机器是 32 位的，我们有 32 位和 64 位的生产机器。

你发给我的链接实际上只有 64 位吗？

# android - 如何以编程方式在android中获取电话铃声类型名称而不是获取铃声ID

> ID：12107886
> 
> 赞同：3
> 
> 时间：2012-08-24T10:44:53.590
> 
> 标签：android, ringtone

如何以编程方式在android中获取电话铃声类型名称。我只能获取铃声id（`://media/internal/audio/media/53`）。如何获取铃声`name(panic)`而不是`id(53)`。请帮助我。

我使用以下代码来获取铃声名称：

```
Uri mUri = data.getParcelableExtra(RingtoneManager.EXTRA_RINGTONE_PICKED_URI); 
Cursor mCursor = query(mUri, null, null,null, null); 
mCursor.moveToFirst(); 
String ringtoneName= Cursor.getString(mCursor.getColumnIndex("title")); 
Toast.makeText(getApplicationContext(), "Ringtone"+ringtoneName+"", Toast.LENGTH_SHORT).show(); 
```

但它显示空指针异常

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T08:40:17.107

**我使用以下代码得到了解决方案：**

**在 onActivityResult 里面：**

```
Uri uri = data.getParcelableExtra(RingtoneManager.EXTRA_RINGTONE_PICKED_URI);
Ringtone r=RingtoneManager.getRingtone(this, uri); 
String ringToneName=r.getTitle(this));
Toast.makeText(getApplicationContext(), "Ringtone Name : +ringtonename+"",Toast.LENGTH_SHORT).show(); 
```

但它会在模拟器中显示异常，因为模拟器中没有铃声所以在手机中执行这个

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T11:10:20.473

沿着这些思路尝试一些东西。标题应该给你媒体的标题

```
Uri mUri = Uri.parse("content://media/internal/audio/media/53"); 

Cursor mCursor = query(mUri, null, null,null, null);
mCursor.movetoFirst();
//use below ringtoneName to get the title of the ringtone
String ringtoneName= mCursor.getString(mCursor.getColumnIndex("title")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-16T10:29:53.850

快速方法：

```
Uri uri = data.getParcelableExtra(RingtoneManager.EXTRA_RINGTONE_PICKED_URI);
String songTitle = RingtoneManager.getRingtone(this, uri).getTitle(this); 
```

# php - PHPUnit - 组织测试文件夹和自动加载

> ID：12107890
> 
> 赞同：1
> 
> 时间：2012-08-24T10:45:08.247
> 
> 标签：php, unit-testing, phpunit

我是单元测试的新手，所以如果这是一个愚蠢的问题，请多多包涵。

首先，我的测试文件夹应该模仿我的应用程序文件夹吗？

例如：

```
Application
--Autoloader.php
--Library
----VendorA.php

Tests
--Library
----VendorATest.php 
```

其次，我发现自己正在编写大型 inlcude 语句以将相关文件包含到我的测试类中。有一个更好的方法吗？

```
<?php

require_once 'PHPUnit/Autoload.php';
require_once(dirname(dirname(dirname(__DIR__))).'/Application/Library/VendorATest.php');

class Tests_Application_Library_VendorATest extends PHPUnit_Framework_TestCase
{} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:42:14.317

这是组织测试的标准方法，效果很好。

至于自动加载，使用自动加载器！:) PHPUnit 在启动时加载一个引导文件（`bootstrap.php`默认情况下）。不再需要加载 PHPUnit 的文件，因为它有自己的自动加载器，它从启动脚本初始化。由于您似乎有一个自动加载器，请在该引导文件中设置它并将其指向您正在测试的类。

# c# - 使用在弹出窗口中打开的注册表单 (WebUserControl) 时更新网格

> ID：12107893
> 
> 赞同：0
> 
> 时间：2012-08-24T10:45:24.537
> 
> 标签：c#, asp.net, webusercontrol

我在页面上有一个网格视图，并且我有 webusercontrol，其中包含注册，并且此用户控件在弹出窗口中打开，当我单击完成提交注册时，这将在数据库中添加新条目。但我的网格仍然显示 previos 记录，直到我刷新页面。那么如何在单击用户控件的提交按钮时重新绑定网格？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:56:43.197

您需要在弹出窗口关闭时刷新父页面。

这个链接会有所帮助。[关闭子弹出和刷新父页面](https://stackoverflow.com/questions/5139657/closing-child-pop-up-and-refreshing-parent-page)

或者您可以查看下面的 javascript 代码。

```
function refreshParent() {

  window.opener.location.href = window.opener.location.href;
  if (window.opener.progressWindow)     
  {
    window.opener.progressWindow.close()
  }
  window.close();

} 
```

# c# - C# 删除 HTML 字符串中的空格

> ID：12107897
> 
> 赞同：-5
> 
> 时间：2012-08-24T10:45:30.430
> 
> 标签：c#, string

是否可以在 C# 中删除以下 HTML 字符串中的所有空格：

```
"
<html>

<body>

</body>

</html>
" 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T10:55:58.320

在处理 HTML 或任何标记时，通常最好通过真正理解该标记规则的解析器来运行它。

第一个好处是它可以告诉您您的初始输入数据是否是垃圾。

如果解析器足够聪明，它甚至可以自动纠正格式错误的标记，或者以宽松的规则接受它。

然后，您可以修改解析的内容....并让解析器写出更改...这样您可以确保遵循标记规则并且您有正确的输出。

对于一些简单的 HTML 标记场景或格式如此糟糕的标记，解析器会立即停止处理，然后是的，您可以恢复破解输入字符串……使用字符串替换等……这一切都取决于您的需要您采取哪种方法。

以下是一些可以帮助您的工具：

## HTML 整洁

您可以使用 HTML Tidy 并指定一些关于如何整理 HTML 的选项/规则（例如删除多余的空格）。

它是一个 WIN32 DLL……但有 C# Wrappers。

*   [http://tidy.sourceforge.net](http://tidy.sourceforge.net)

*   [http://robertbeal.com/37/sanitising-html](http://robertbeal.com/37/sanitising-html)

*   [C# 版本的 HTML Tidy？](https://stackoverflow.com/questions/4002346/c-sharp-version-of-html-tidy)

*   [http://geekswithblogs.net/mnf/archive/2011/06/08/implementations-of-html-tidylib-for-.net.aspx](http://geekswithblogs.net/mnf/archive/2011/06/08/implementations-of-html-tidylib-for-.net.aspx)

## HtmlAgilityPack

如果您需要更好地理解结构并可能自己进行整理/重组，您可以使用 HtmlAgilityPack 来解析 HTML。

*   [http://html-agility-pack.net](http://html-agility-pack.net)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T10:52:12.800

```
myString = myString.Replace(System.Environment.NewLine, ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T10:48:16.927

您可以使用正则表达式来匹配替换的空格字符：

```
s = RegEx.Replace(s, @"\s+", String.Empty); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-01-14T15:33:43.680

我使用了这个解决方案（我认为它运作良好。另见测试代码）：

1.  添加一个扩展方法来修剪 HTML 字符串：

```
public static string RemoveSuperfluousWhitespaces(this string input)
{
    if (input.Length < 3) return input;
    var resultString = new StringBuilder(); // Using StringBuilder is much faster than using regular expressions here!
    var inputChars = input.ToCharArray();
    var index1 = 0;
    var index2 = 1;
    var index3 = 2;
    // Remove superfluous white spaces from the html stream by the following replacements:
    //  '<no whitespace>' '>' '<whitespace>' ==> '<no whitespace>' '>'
    //  '<whitespace>' '<' '<no whitespace>' ==> '<' '<no whitespace>'
    while (index3 < inputChars.Length)
    {
        var char1 = inputChars[index1];
        var char2 = inputChars[index2];
        var char3 = inputChars[index3];
        if (!Char.IsWhiteSpace(char1) && char2 == '>' && Char.IsWhiteSpace(char3))
        {
            // drop whitespace character in char3
            index3++;
        }
        else if (Char.IsWhiteSpace(char1) && char2 == '<' && !Char.IsWhiteSpace(char3))
        {
            // drop whitespace character in char1
            index1 = index2;
            index2 = index3;
            index3++;
        }
        else
        {
            resultString.Append(char1);
            index1 = index2;
            index2 = index3;
            index3++;
        }
    }

    // (index3 >= inputChars.Length)
    resultString.Append(inputChars[index1]);
    resultString.Append(inputChars[index2]);
    var str = resultString.ToString();
    return str;
}

// 2) add test code:

[Test]
public void TestRemoveSuperfluousWhitespaces()
{
    var html1 = "<td class=\"keycolumn\"><p class=\"mandatory\">Some recipe parameter name</p></td>";
    var html2 = $"<td class=\"keycolumn\">{Environment.NewLine}<p class=\"mandatory\">Some recipe parameter name</p>{Environment.NewLine}</td>";
    var html3 = $"<td class=\"keycolumn\">{Environment.NewLine} <p class=\"mandatory\">Some recipe parameter name</p> {Environment.NewLine}</td>";
    var html4 = " <td class=\"keycolumn\"><p class=\"mandatory\">Some recipe parameter name</p></td>";
    var html5 = "<td class=\"keycolumn\"><p class=\"mandatory\">Some recipe parameter name</p></td> ";
    var compactedHtml1 = html1.RemoveSuperfluousWhitespaces();
    compactedHtml1.Should().BeEquivalentTo(html1);
    var compactedHtml2 = html2.RemoveSuperfluousWhitespaces();
    compactedHtml2.Should().BeEquivalentTo(html1);
    var compactedHtml3 = html3.RemoveSuperfluousWhitespaces();
    compactedHtml3.Should().BeEquivalentTo(html1);
    var compactedHtml4 = html4.RemoveSuperfluousWhitespaces();
    compactedHtml4.Should().BeEquivalentTo(html1);
    var compactedHtml5 = html5.RemoveSuperfluousWhitespaces();
    compactedHtml5.Should().BeEquivalentTo(html1);
} 
```

# silverlight-5.0 - Silverlight 5 中的断点不起作用

> ID：12107899
> 
> 赞同：1
> 
> 时间：2012-08-24T10:45:36.070
> 
> 标签：silverlight-5.0

```
 **SILVERLIGHT** 
```

断点功能在 silverlight 5 中不起作用。请告诉我问题是什么以及如何解决问题。

```
 **XAML DESIGN**

     <UserControl x:Class="SilverlightApplication1.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot" Background="White">

        <!--<Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>

        </Grid.ColumnDefinitions>
        <Border Width="200" Height="200" Grid.Column="0" BorderBrush="Red" BorderThickness="2" Background="Azure" MouseLeftButtonDown="Border_MouseLeftButtonDown"/>
        <ListBox x:Name="lstClickReport" Grid.Column="1" Margin="10" Width="300" Height="200"/>-->
        <TextBlock x:Name="txtBlock" HorizontalAlignment="Center" Text="{Binding Message}"/>
    </Grid>
</UserControl>

    Please do the needful. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:23:44.833

查看“输出”窗口，查看模块是否已构建。有时，您可能不小心在 ConfigurationManager 中将其关闭。

此外，Internet Explorer 缓存还负责保留 DLL 的旧副本，尤其是在使用程序集库缓存运行时。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-24T22:22:27.967

如[本文](http://msdn.microsoft.com/en-us/library/gg181270%28v=VS.95%29.aspx)所述，XAML 是一种标记语言，Visual Studio 中的一些典型调试策略不可用。

例如，无法在 XAML 文件中设置断点。本主题介绍了 XAML 在调试上下文中如何在 Silverlight 体系结构中工作，并提供了一些用于在设计和开发阶段消除 Silverlight XAML 中的问题的策略。这就是为什么不能在 XAML 中设置断点的原因。

[编辑 2012 年 8 月 28 日]

我不知道 XAML 调试已添加到 SL5 中，所以在@jv42 建议 XAML 调试在 SL5 中工作之后，我决定快速尝试一下。我发现 XAML 只允许在任何 XAML 元素中将断点设置为绑定语法，这意味着该属性必须绑定到它才能启用调试。

BP 不会击中：

```
<Grid x:Name="LayoutRoot" Background="Red">
  <TextBlock Text="Hello World"/>
</Grid> 
```

英国石油公司将打击：

```
<Grid x:Name="LayoutRoot" Background="Red">
 <TextBlock Text="{Binding ****}"/>
</Grid> 
```

正确配置 Binding 后，您可以看到 BP 命中并且 BindingState 在 Local 中填充。

在上述情况下，我认为 BP 没有命中，因为在 {Binding Message} 中，消息部分没有正确配置。最好了解“消息”背后的代码以及如何设置此属性。除非绑定设置正确，否则 BP 不会命中 XAML。

# android - Android getIntent() 返回第一个意图

> ID：12107906
> 
> 赞同：10
> 
> 时间：2012-08-24T10:45:51.600
> 
> 标签：android, android-intent, notifications, android-activity

我开发了一个应用程序来下载视频文件并将其存储在 SD 卡中。在此过程中，我还将下载的进度和状态更新为状态栏通知，使用`NotificationManager`.

我的班级称为`DownloadTask.java`扩展了`AsyncTask`. `onProgressUpdate()`所以在这里我使用我为此目的使用的方法更新进度`NotificationManager`。一切都像一个魅力，除了下载完成后我想点击通知打开特定的视频文件。所以这就是我所做的：

```
mNotificationManager = (NotificationManager) mContext.getSystemService(Context.NOTIFICATION_SERVICE);

int icon = android.R.drawable.stat_sys_download_done;
long when = System.currentTimeMillis();

mNotification = new Notification(icon, "", when);
mContentTitle_complete = mContext.getString(R.string.download_complete);
notificationIntent = new Intent(mContext,OpenDownloadedVideo.class);
notificationIntent.putExtra("fileName", file);
mContentIntent = PendingIntent.getActivity(mContext, 0, notificationIntent, 0);
mNotification.setLatestEventInfo(mContext, file, mContentTitle_complete, mContentIntent);
mNotification.flags = Notification.FLAG_AUTO_CANCEL;
mNotificationManager.notify(NOTIFICATION_ID, mNotification); 
```

请注意，`fileName`and`NOTIFICATION_ID`在我的情况下是唯一的。

通过以下`Activity` `OpenDownloadedVideo.java`方式打开文件：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    try {  
        fileName = getIntent().getExtras().getString("fileName");
        Intent i = new Intent(Intent.ACTION_VIEW);
        File videoFileToPlay = new File(Environment.getExternalStorageDirectory()+"/MyFolder"+"/"+fileName);
        i.setDataAndType(Uri.fromFile(videoFileToPlay), "video/*");
        startActivity(i);
        finish();
    } catch(Exception e) {
        //
    }
} 
```

因此，当我第一次下载视频并单击通知时，将打开相应的视频文件。但是，下次我下载另一个视频时，单击通知，下载的第一个文件将再次打开。

这是因为`getIntent`inside`OpenDownloadedVideo`返回第一个`Intent`创建的而不是最新的。我该如何纠正？

另外，请注意，当我下载多个视频时会出现问题场景，例如，如果我下载了五个不同的视频文件并且状态栏中有五个通知。每次单击通知时都会打开相同的文件。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-10-30T12:23:00.280

```
/**
 * Override super.onNewIntent() so that calls to getIntent() will return the
 * latest intent that was used to start this Activity rather than the first
 * intent.
 */
@Override
public void onNewIntent(Intent intent){
    super.onNewIntent(intent); // Propagate.
    setIntent(intent); // Passing the new intent to setIntent() means this new intent will be the one returned whenever getIntent() is called.
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-22T00:32:01.107

实际上，您只需要使用 PendingIntent.FLAG_UPDATE_CURRENT 创建 PendingIntent **，**如下所示：

```
mContentIntent = PendingIntent.getActivity(mContext, 0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-24T11:31:11.877

来自[Android Activity.onNewIntent() 文档](http://developer.android.com/reference/android/app/Activity.html#onNewIntent%28android.content.Intent%29)

> 请注意，getIntent() 仍然返回原始 Intent。您可以使用 setIntent(Intent) 将其更新为这个新的 Intent。

所以当你得到新的 Intent 时，你需要将它显式设置为 Activity Intent。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-29T09:08:11.083

@Alex 和 @Codinguser，感谢您的回复。非常感激。但是，我找到了一个对我有用的不同答案。`PendingIntent`在为传递创建`Intent`一个唯一值时。就我而言，我正在这样做：

```
mContentIntent = PendingIntent.getActivity(mContext, 0, notificationIntent, 0); 
```

但现在我正在使用`NOTIFICATION_ID`它，因为它是独一无二的。我已将上述调用更改为：

```
mContentIntent = PendingIntent.getActivity(mContext, NOTIFICATION_ID,
                                           notificationIntent, 0); 
```

就是这样，它有效。

[我在待处理意图的多个实例中](https://stackoverflow.com/questions/3730258/mulitple-instances-of-pending-intent)找到了一些关于它的信息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T10:58:13.147

如果您将`OpenDownloadedVideo`活动设为 SINGLE_TOP 并覆盖`onNewIntent`怎么办？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-11T17:42:28.080

在您打算启动的活动中。添加（覆盖）以下函数：

```
@Override
protected void onNewIntent(final Intent intent) {
        super.onNewIntent(intent);
        this.setIntent(intent);
} 
```

# mongodb - 特定字段作为 mongodb 的结果

> ID：12107907
> 
> 赞同：2
> 
> 时间：2012-08-24T10:45:56.413
> 
> 标签：mongodb, mongodb-java

我是 mongodb 的新手。我需要知道如何从集合中的文档中单独检索特定字段。

例如：

```
db.things.findOne({name:"mongo"}); 
```

结果：

```
{"_id" : "497dab624ee47b3a675d2d9c" , "name" : "mongo" , "type" : "database"} 
```

但结果我只需要类型字段。如何在查找查询中指定它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T10:52:11.480

```
db.things.findOne({name:"mongo"}, {type : 1}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:52:36.827

尝试

```
db.things.findOne({name:"mongo"}, {type:1}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-16T04:03:20.137

```
db.things.find({name:"mongo"}, {type:true, "_id":false}). 
```

`_id`如果您不将其标记为 false，则默认情况下会出现。

# servlets - 使用struts 1.1方法的最佳下载文件

> ID：12107909
> 
> 赞同：1
> 
> 时间：2012-08-24T10:46:11.927
> 
> 标签：servlets, download, struts

对于基于 struts 和 jsp 技术构建的 Web 应用程序，我正在寻找一个很好的示例来解释如何从服务器端下载文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:33:53.373

我设法用这几行代码做到了：只需将其添加到您的操作中：

```
OutputStream out = response.getOutputStream();
        response.setContentType("application/rtf");
        FileInputStream in = new FileInputStream("your_file_path");
        byte[] buffer = new byte[4096];
        int length;
        while ((length = in.read(buffer)) > 0){
            out.write(buffer, 0, length);
        }
        in.close();
        out.flush(); 
```

# combobox - Hide SmartGwt ComboboxItem if it has only one value to be selected

> ID：12107920
> 
> 赞同：1
> 
> 时间：2012-08-24T10:46:53.793
> 
> 标签：combobox, smartgwt

I am working with SmartGwt.

Is it possible to hide the combobox dropdown button if it has only one Item?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:12:25.310

使用 like 属性`setShowPickerIcon(false)`，如果我们使用这个属性，SelectPicker Icon 意味着下拉按钮将不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:25:58.560

向它添加一个更改侦听器，如果它只有一个元素，请调用`setVisible(false)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T16:08:51.880

恕我直言，这是不可能的，但你可以用没有下拉按钮的 TextItem 动态替换它。通过调用 setVisible(false/true) 或从表单中删除/添加它。

# visual-studio-2010 - VS 2010 template with package restore enabled

> ID：12107921
> 
> 赞同：2
> 
> 时间：2012-08-24T10:47:02.413
> 
> 标签：visual-studio-2010, templates, nuget

I want to create a project template that will have "Enable NuGet package restore" already enabled. But if I export a template with this option ticked, then when I try to create a new project (the first project in a new solution) based on this template I get the message that "..\Solution.nuget\nuget.targets" does not exist. Is it possible to install the necessary files automatically?

I can add the project to an existing solution, if the option is enabled.

# javascript - JQuery Promise .notify 需要关闭...

> ID：12107924
> 
> 赞同：1
> 
> 时间：2012-08-24T10:47:16.053
> 
> 标签：javascript, jquery, closures, jquery-deferred

我认为我在关闭/范围界定方面存在问题。当我观察我的进度时，`MyObject`我总是得到最终的价值`i`。

**例子**

```
var a = new MyObject();
a.progress(function(msg){console.log(msg)}); // always prints 1000/1000 
```

**可观察对象**

```
 function MyObject()
    {
       var this.dfd = $.Deferred();
      return this.dfd.promise();
    } 

    MyObject.prototype.aProcess = function()
        {
            var self = this;
            for (var i = 0; i < 1000; i++)
            {
                (function(i)
                {

                   self.notify("Updating " + (i+1) + "/" + 1000); 
                   // Bunch of Processes

                })(i);
            }
        }

    MyObject.prototype.notify = function(message)
    {
        console.log(message) // works fine
        this.dfd.notify(message);   
    } 
```

[演示](http://jsfiddle.net/ashanova/Xe47R/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:54:30.107

您在返回延迟之前正在做`.process`，所以当您附加进度侦听器时，通知已经运行。

试试这个：

[http://jsfiddle.net/Xe47R/2/](http://jsfiddle.net/Xe47R/2/)

```
function MyObject() {
    this.dfd = $.Deferred();
    //Don't explicitly return an object, otherwise the class is useless.
};
MyObject.prototype.process = function() {
    //The closure was useless here
    for (var i = 0; i < 1000; i++) {
        this.notify("Updating " + (i + 1) + "/" + 1000);
    }
};
MyObject.prototype.notify = function(message) {
    //Remove console.log from here to avoid confusion
    this.dfd.notify(message);
}
var a = new MyObject();
a.dfd.promise().progress(function(msg) {
    console.log(msg)
}); // always prints 1000/1000
a.process();​ 
```

# java - 在 GUI (netbeans) 中使用主类方法

> ID：12107925
> 
> 赞同：0
> 
> 时间：2012-08-24T10:47:18.107
> 
> 标签：java, methods, non-static

我想将我的主类中的一个方法调用到我的 GUI 中。（文本区域）

我在单独类中的方法如下所示：

```
public void DisplayHS() {
  highscore temp;
  for(int i = 0; i<(count-1);i ++) {
    for (int j =(i +1); j<count; j ++) {
      if (HA[i].getScore() > HA[j].getScore()) {
        temp = HA[i];
        HA[i] = HA[j];
        HA[j] = temp;
      }
    }
  }
  for (int i = 0; i<9; i ++) {
    System.out.println((i+1) +"." + HA[i]);
  }
} 
```

如何将该方法调用到我的 GUI 文本区域中？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:13:08.163

由于您的方法不带参数，因此该集合看起来像是您的类中的一个字段。我建议您在 GUI 类中提供对主类的引用，并从主类字段或通过对主类对象的方法本地引用调用该方法。

您可以在构造函数中或通过 mutator 方法提供引用。

你说

> 将该方法调用到我的 GUI 文本区域中？

你是什​​么意思？您是否希望在此处显示文本，只需在终端中打印文本（假设您没有更改打印流）或在文本区域中有内容时调用该方法？

我们是在谈论 JSP 还是桌面应用程序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:54:59.893

您从 GUI 类调用它的事实没有什么区别：

*   该方法是静态的，您可以使用`NameOfTheContainingClass.displayHS();`
*   或者不是（似乎是你的情况），你需要一个包含类的实例：`NameOfTheContainingClass instance = new NameOfTheContainingClass(); instance.displayHS();`

ps：Java 中的方法名称以小写字母开头

# c# - 在 winforms 设计器中禁用属性设置

> ID：12107927
> 
> 赞同：3
> 
> 时间：2012-08-24T10:47:42.740
> 
> 标签：c#, winforms, visual-studio-2008, designer

我在我的项目中使用了[另一个 TabControl](http://www.codeproject.com/Articles/12538/Y-et-A-nother-TabControl-A-Custom-Tab-Control-With) - 它是自定义的、开源的 TabControl，支持设计器。在解决了它的一些问题之后，我偶然发现了一个我不知道如何解决的问题。

当我运行我的应用程序时，YATabControl 会选择我在设计器中选择的相同选项卡 - 这不是我想要的（我宁愿从第一个选项卡开始），并且在应用程序运行时我无法在选项卡中移动，因为它尝试在每次更改选项卡时保存属性“SelectedIndex”。

它是在设计师〜onclick上设置的，使用：

```
RaiseComponentChanging( TypeDescriptor.GetProperties( Control )[ "SelectedIndex" ] );  
RaiseComponentChanged( TypeDescriptor.GetProperties( Control )[ "SelectedIndex" ], oi, i );(old index, index). 
```

我在想 - 有没有办法禁止设计师设置属性的运行时值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T12:38:51.983

我查看了源代码（没有下载），但看起来你必须告诉`SelectedIndex`属性不要序列化自身：

```
[DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
public virtual int SelectedIndex {
  get {
    return yaSelectedIndex;
  }
  set {...}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T12:40:04.347

`[Browseable(false)]`是要走的路:)

# xmpp - 节点形成但无法在 pubsub xmpp 中发布

> ID：12107928
> 
> 赞同：0
> 
> 时间：2012-08-24T10:47:46.140
> 
> 标签：xmpp, ejabberd, libstrophe

我正在使用 libstrophe C 库创建 xmpp clint。我能够成功创建节点（打开节点）并发送其他用户的订阅请求，这些请求被添加。现在，当我尝试使用以下节发布时，

```
<iq type='set'
    from='hamlet@pratik.com/blogbot'
    to='pubsub.pratik.com'
    id='publish1'>
  <pubsub xmlns='http://jabber.org/protocol/pubsub'>
    <publish node='pratik'>
      <item id='123456'>
        <entry xmlns='http://www.w3.org/2005/Atom'>
          <title>Soliloquy</title>
          <summary>
To be, or not to be
          </summary>
        </entry>
      </item>
    </publish>
  </pubsub> 
```

我明白了，

```
<error code="501" type="cancel"><feature-not-implemented xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/></error> 
```

有什么建议么？我正在使用 ejabberd 作为服务器

# r - 使用 R 软件读入包含 \n 的数据

> ID：12107931
> 
> 赞同：0
> 
> 时间：2012-08-24T10:48:01.710
> 
> 标签：r, statistics

假设我有一个字符串

```
"1|2|3|4|5|6 
7|8|9" 
```

注意 6 之后出现的 '\n'

```
scan(text="1|2|3|4|5|6 
7|8|9", sep="|",what="") 
```

会回报你：

```
Read 9 items
[1] "1"  "2"  "3"  "4"  "5"  "6 " "7"  "8"  "9" 
```

我怎样才能得到 8 个项目，其中第 6 个项目应该是`6 \n7`而不是两个单独的项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T11:06:29.040

这个怎么样：

```
strsplit(paste(scan(text="1|2|3|4|5|6
+ 7|8|9", sep="\n", what="character"), collapse="\n"), "\\|") 
```

# csrf - 使用 django-registration 时出现 csrf 错误

> ID：12107939
> 
> 赞同：0
> 
> 时间：2012-08-24T10:48:19.127
> 
> 标签：csrf, django-registration

我正在使用 django-registration 来激活用户帐户。

在我`registration_form.html`有

```
{% extends "base.html" %}
{% block title %} Register {% endblock %}
{% load i18n %}
{% block menu %}

<li class="home-page"><a href="/utriga"><span></span></a></li>
<li><a href="/utriga/about">About Us</a></li>
<li><a href="/utriga/downloads">Downloads</a></li>
<li><a href="/utriga/blog">Blog</a></li>
<li class="current " ><a href="/utriga/post">Advertise</a></li>
<li><a href="/utriga/contact">Contact Us</a></li>

{% endblock %}

{% block content %}
<form method="post" action=".">

    {{ form.as_p }}

    <input type="submit" value="{% trans 'Submit' %}" />
</form>
{% endblock %} 
```

问题是它工作了一段时间然后停止了，给出了错误页面。

```
Forbidden (403)
CSRF verification failed. Request aborted.
Help
Reason given for failure:
     CSRF token missing or incorrect. 
```

我不明白为什么它之前工作并停止，即使我什么也没改变。是`load i18n`，有问题吗？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:51:47.670

您在表单中缺少 csrf 令牌。

将 {% csrf_token %} 放在表单中，看看它是否有效。

# c# - C++ 中的单例服务类

> ID：12107943
> 
> 赞同：0
> 
> 时间：2012-08-24T10:48:33.230
> 
> 标签：c#, c++, dependency-injection, prism, mef

来自 .NET/C# 背景并且对 PRISM 有深入的了解，我真的很喜欢在`CompositionContainer`需要时只获取一个类的这个实例的想法。

由于通过`ServiceLocator`this 实例也可以全局访问，这几乎可以概括为单例模式。

现在，我当前的项目是 c++，我正在决定如何管理程序的插件（外部 dll 加载和类似的东西）。

在 C# 中，我将创建一个 PluginService，将其导出为共享并通过该实例引导所有内容（成员基本上只相当于一个列表，包含插件和一堆方法）。在 c++ 中，显然我没有 a`CompositionContainer`或 a `ServiceLocator`。

我可能会实现这个的基本版本，但无论我想象什么都涉及使用单例或全局变量。不过，对此的普遍担忧似乎是：永远不要做全球性的事情，更不要做单身人士。

我是什么做的？（我也感兴趣的是：微软在这里给我们提供了一个关于如何编码的坏例子，或者这是一个单例是正确选择的实际案例？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T11:19:04.900

在全局变量和单例是“好”还是“坏”方面，C# 和 C++ 之间确实没有区别。

您概述的解决方案在 C# 和 C++ 中同样糟糕（或良好）。

你似乎发现的只是不同的人有不同的看法。一些 C# 开发人员喜欢使用单例来完成类似的事情。一些 C++ 程序员也有同样的感觉。

一些 C++ 程序员认为单例是一个糟糕的主意，而且……一些 C# 程序员也有同样的感觉。:)

微软给出*了许多*关于如何编码的坏例子。永远不要仅仅因为它在盒子上写着微软就接受他们的示例代码作为“良好实践”。重要的是代码，而不是其背后的名称。

现在，我对单身人士的主要不满*并不是*他们的全球方面。

像大多数人一样，我通常不喜欢和不信任全局变量，但我不会说*永远不*应该使用它们。在某些情况下，使某些东西可以全局访问会更方便。它们并不常见（我认为大多数人*仍然*过度使用全局变量），但它们存在。

但是单例的*真正*问题是它们对您的代码施加了不必要且通常有害的约束：它们阻止您创建对象的多个实例，就好像您在编写类时知道如何更好地使用它实际*用户*会。

当您编写一个类时，例如，`PluginService`正如您在评论中提到的那样，您当然对您*计划*如何使用它有所了解。你可能认为“它的一个实例应该是全局可访问的（这是有争议的，因为许多类不应该*访问*插件服务，但我们假设我们现在*确实*希望它是全局的）。你可能认为“我不能想象一下为什么我想要两个实例”。

但问题是当你采取这个假设并积极*阻止*创建两个实例时。

如果从现在开始的两个月后，您发现需要创建两个 PluginServices 怎么办？如果您在编写类时采用了简单的方法，并且没有在其中构建不必要的约束，那么您*现在**也*可以采用简单的方法，只需创建两个实例即可。

 *但是，如果您采取了编写额外代码以*防止*创建多个实例的困难路径，那么您现在必须*再次*采取困难路径：现在您必须返回并*更改*您的类。

除非你有理由，否则不要在你的代码中设置限制：如果它使你的工作更容易，那就继续做吧。如果它可以防止对课程的有害滥用，那就去做吧。

但在单例的情况下，这两者都没有：您为自己创造额外的工作，以防止可能完全合法的使用。

您可能有兴趣阅读我为回答单身问题而写的[这篇博文。](http://jalf.dk/singleton/)

但要回答如何处理您的具体情况的具体问题，我会推荐以下两种方法之一：

*   “纯粹”的方法是创建一个`ServiceLocator`非*全球*性的。将其传递给需要查找服务的人。根据我的经验，您可能会发现这比听起来要容易得多。您往往会发现在许多不同的地方实际上并不需要它，因为您认为它会是。它给你一个动力去解耦代码，最小化依赖，确保只有那些真正*需要*ServiceLocator 的人才能访问它。这很健康。
*   或者有一种务实的方法：创建`ServiceLocator`. 任何需要它的人都可以使用它，而且毫无疑问如何找到它——毕竟它是全球性的。但不要让它成为单例。让创建其他实例成为可能。如果您永远不需要创建另一个实例，那么就不要这样做。但这让大门敞开，因此如果您*最终*需要另一个实例，您可以创建它。

在许多情况下，您最终需要一个您*认为*只需要一个实例的类的多个实例。围绕某些硬件的配置/设置对象、记录器或包装器都是人们经常所说的“这显然应该是一个单例，拥有多个实例是没有意义的”，并且在每种情况下，它们都是错误的. 在很多情况下，您需要此类类的多个实例。

但最普遍适用的场景很简单：测试。

您要确保您的 ServiceLocator*正常工作*。所以你想测试它。

如果是单例，那真的很难做到。一个好的测试应该在原始、隔离的环境中运行，不受之前测试的影响。但是一个单例在应用程序的持续时间内存在，所以如果你有多个 ServiceLocator 测试，它们都会在同一个“脏”实例上运行，所以每个测试都可能影响下一个测试看到的状态。

相反，每个测试都应该创建一个新的、干净的 ServiceLocator，这样它们就可以准确地控制它所处的状态。为此，您需要能够*创建*该类的实例。

所以不要让它成为单例。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:44:21.023

在合适的情况下，单身人士绝对没有错。我对此表示怀疑`CompositionContainer`（但我不确定我是否理解它实际上应该做什么），但 `ServiceLocator`在任何设计良好的应用程序中通常都是单例的。拥有两个或更多`ServiceLocator` 将导致程序无法正常运行（因为服务将在其中一个中注册，而您将在另一个中查找它）；以编程方式执行这一点是积极的，至少如果您喜欢健壮的编程。另外，在C++中，单例习语用来控制初始化的顺序；除非你做 `ServiceLocator`一个单例，否则你不能在任何具有静态生命周期的对象的构造函数中使用它。

While there is a small group of very vocal anti-singleton fanatics, within the larger C++ community, you'll find that the consensus favors singletons, in certain very restricted cases. They're easily abused (but then, so are templates, dynamic allocation and polymorphism), but they do solve one particular problem very nicely, and it would be silly to forgo them for some arbitrary dogmatic reason when they're the best solution for the problem.*

# asp.net-mvc-3 - ASP.net MVC 和 Entity Framework 站点共享数据库

> ID：12107944
> 
> 赞同：0
> 
> 时间：2012-08-24T10:48:34.707
> 
> 标签：asp.net-mvc-3, entity-framework

我最近开始玩弄 ASP.net MVC3 和实体框架。我遵循教程（首先是代码、模型和数据库），我喜欢很多自动发生的事情。

但是（总是一个但是......），在我看来，整个“系统”是为一个完全控制自己托管整个事情的人构建的。我试图了解它在我的爱好项目和自学中对我有何用处，但到目前为止我失败了。

我得到的是这样的：我有一个非常普通的网络酒店，我在那里拥有几个域名。但我只有 1 个 MS SQL 数据库。似乎我首先使用代码、模型或数据库的每一种方式，我的站点/项目/测试都在该数据库中相互竞争 - 删除了彼此的表。

在网络酒店上，我必须使用 NuGet 的包，以便在模型更改时只创建表 - 不允许删除数据库。但是一个站点项目中不存在的表正在被删除，并且出现了冲突。

我是否遗漏了什么，或者他们真的没有为像我这样的人构建框架？

如果我有一个专门用于我想工作的每个站点的 MS SQL 数据库，它当然可以工作，但由于这是一项额外的服务，它会变得非常昂贵。而且我的项目在这个桥上非常小，所以让它们共享一个数据库在性能方面没有问题。

谁能给我建议，说我错过了什么或指出我正确的方向？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:53:45.397

听起来您正在使用代码优先的 EF。尝试使用数据库优先的变体并从数据库中生成模型，而不是相反。

# ruby - 这个 Ruby 类的设计真的很糟糕吗？

> ID：12107947
> 
> 赞同：0
> 
> 时间：2012-08-24T10:48:54.090
> 
> 标签：ruby, oop

我对 OOP 很陌生，我担心我写的这个类设计得很糟糕。它似乎违反了 OOP 的几个原则：

1.  它不包含自己的数据，但依赖于 yaml 文件获取值。
2.  它的方法需要按特定顺序调用
3.  它有很多实例变量和方法

但是，它确实有效。它很健壮，但每次添加页面元素时，我都需要修改源代码以添加新的 getter 方法

它是自动化测试套件中使用的 html 文档的模型。我一直在想一些方法可以放在子类中，但我担心我会有太多的类。

你怎么看？

```
class BrandFlightsPage < FlightSearchPage

  attr_reader :route, :date, :itinerary_type, :no_of_pax,
              :no_results_error_container, :submit_button_element

  def initialize(browser, page, brand)
    super(browser, page)

    #Get reference to config file
    config_file = File.join(File.dirname(__FILE__), '..', 'config', 'site_config.yml')

    #Store hash of config values in local variable
    config = YAML.load_file config_file

    @brand = brand        #brand is specified by the customer in the features file

    #Define instance variables from the hash keys
    config.each do |k,v|
      instance_variable_set("@#{k}",v)
    end

  end

  def visit
    @browser.goto(@start_url)
  end

  def set_origin(origin)
    self.text_field(@route[:attribute] => @route[:origin]).set origin
  end

  def set_destination(destination)
    self.text_field(@route[:attribute] => @route[:destination]).set destination
  end

  def set_departure_date(outbound)
    self.text_field(@route[:attribute]  => @date[:outgoing_date]).set outbound
  end

  def set_journey_type(type)
    if type == "return"
      self.radio(@route[:attribute]  => @itinerary_type[:single]).set
    else
      self.radio(@route[:attribute]  => @itinerary_type[:return]).set
    end
  end

  def set_return_date(inbound)
    self.text_field(@route[:attribute]  => @date[:incoming_date]).set inbound
  end

  def set_number_of_adults(adults)
     self.select_list(@route[:attribute]  => @no_of_pax[:adults]).select adults
  end

  def set_no_of_children(children)
    self.select_list(@route[:attribute]  => @no_of_pax[:children]).select children
  end

  def set_no_of_seniors(seniors)
    self.select_list(@route[:attribute]  => @no_of_adults[:seniors]).select seniors
  end

  def no_flights_found_message
    @browser.div(@no_results_error_container[:attribute] => @no_results_error_container[:error_element]).text
    raise UserErrorNotDisplayed, "Expected user error message not displayed" unless divFlightResultErrTitle.exists?
  end

  def submit_search
    self.link(@submit_button_element[:attribute] => @submit_button_element[:button_element]).click
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:58:29.247

如果这个类被设计成一个门面，那么它不是（太）糟糕的设计。它提供了一种连贯统一的方式来执行依赖于各种不相关行为持有者的相关操作。

关注点分离似乎很差，因为这个类本质上耦合了所有各种实现细节，这可能会变得有些难以维护。

最后，需要以特定顺序调用的事实方法可能暗示您正在尝试对状态机进行建模这一事实 - 在这种情况下，它可能应该分解为多个类（每个“状态”一个）。我不认为你会达到“太多方法”或“太多类”的点，事实是你需要每个类提供的特性是连贯的和有意义的。在哪里划线取决于您和您的特定实现的域要求。

# php - 停止数据库读取阻止 web ui 渲染

> ID：12107950
> 
> 赞同：5
> 
> 时间：2012-08-24T10:49:11.967
> 
> 标签：php, mysql, ajax, web-services, web

我正在构建一个 PHP Web 服务。

在我编写太多代码之前，我可以看到一个迫在眉睫的问题，并希望得到一些关于如何解决它的意见。

我有 14 个站点，每个站点都包含一个 mysql 数据库实例，该实例由另一个自定义 perl 脚本更新。

为了将这些数据整合到单个 Web 前端，我正在尝试编写一个执行以下操作的 php 网页。

在首页，Web 服务器连接到所有 14 个数据库服务器并拉回它需要的信息，然后将其呈现在页面上。目前，由于所有数据都保存在我的本地计算机上，因此这可以完美运行，但在生产中，这些数据将分布在 14 个独立的数据库中。

所以我的问题是，从 UI 绘画中抽象数据库读取的最佳方法是什么。理想情况下，我希望呈现完整的网页，并带有一个加载栏，指示用户何时可以期望显示数据。

这是可以通过 AJAX 实现的，还是我应该转向另一个方向。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:03:36.677

我会做这样的事情：

*   创建一个可以从 AJAX 调用的小型 php 代理，因为您无法使用 AJAX 连接到其他网站
*   显示元素为空的整页布局
*   DOM 准备好 AJAX 后立即开始显示元素
*   一旦你开始从函数加载数据，每个元素都会有一个加载栏

例如：

```
 ___________________________________
| data_1 | data_2 | data_3 | data_4 |
 ‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾ 
```

start 函数`loadData1()`将 data1_id 替换为加载条并开始 AJAX 调用

```
 ___________________________________
| ...... | data_2 | data_3 | data_4 |
 ‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾ 
```

其他元素也一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:02:39.447

Ajax 是您最好的选择 - 加载您的基本页面，然后从该页面向您的服务器发起 Ajax 请求以收集数据。出于安全原因，我认为您无法向其他服务器创建 ajax 请求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T11:29:53.477

为什么不将内容缓存在本地（这样用户就不必等待），然后通过 ajax 检索实时内容？

# ruby-on-rails - 状态机转换轨道

> ID：12107951
> 
> 赞同：0
> 
> 时间：2012-08-24T10:49:16.360
> 
> 标签：ruby-on-rails, ruby, state, state-machine

我有如下状态转换：

```
 [A,B] => C
  [B,C] => A 
```

我正在使用 before_transition、after_transition 方法如下：

```
 before_transition :to => C do
  end 
```

但是现在我遇到了使用上述方法的情况，如下所示

```
 before_transition :from=> A, :to => C do
  end 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:42:55.303

大概是这样

```
before_transition :A => :B, :do => :action
... ... ...
def action
    #do your stuffs here.
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:04:00.307

也许你可以使用

```
before_transition :to => 'canceled', :from => 'new_order', :do => [:cancel_account_movement]

def cancel_account_movement
   #blablabla
end 
```

# java - ellipsize 禁用初始文本

> ID：12107954
> 
> 赞同：0
> 
> 时间：2012-08-24T10:49:20.557
> 
> 标签：java, android, android-widget

我在使用`singleLine=true`和`ellipsize=start`使用按钮时有一个奇怪的行为。

首先，我的按钮声明：

```
<Button
    android:id="@+id/enterDeparture"
    android:layout_width="175dp"
    android:layout_height="30dp"
    android:layout_marginLeft="10dp"
    android:background="@drawable/field_button"
    android:text="@string/research_enterDeparture"
    android:textColor="@drawable/field_button_textcolor"
    android:paddingLeft="3dp"
    android:paddingRight="3dp"
    android:ellipsize="start"
    android:singleLine="true" /> 
```

使用此声明，按钮内不会显示任何文本。但是如果我写`Log.d(TAG, "the text is : " + findViewById(R.id.enterDeparture));`，LogCat 会给我正确的值......

我试图以编程方式设置文本，无论是在方法`onCreateView()`中还是在`onResume()`方法中：相同的行为。但是，如果我稍后再设置文本，如果我在屏幕上放置一个 AlertDialog，内容会立即返回......

最后，如果我删除两行`android:ellipsize="start"`和`android:singleLine="true"`，一切正常：我的文本第一次显示。

**编辑**

我试图删除该`singleLine=true`行：实际显示了初始内容，但椭圆大小的行为不再起作用......

所以我尝试了`maxLines=1`：显示初始内容，但不再显示“...”（内容只是被截断）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:57:32.447

尝试更改高度值：

```
android:layout_height="wrap_content" 
```

您可能会将文本省略为 ... 并且因为按钮填充它可能被隐藏。

你也想试试这个：

```
Log.d(TAG, "the text is : " + ((Button)findViewById(R.id.enterDeparture)).getText()) 
```

# windows-phone-7 - 如何获取授权码到我的 wp 应用程序以进行谷歌身份验证？

> ID：12107955
> 
> 赞同：1
> 
> 时间：2012-08-24T10:49:20.510
> 
> 标签：windows-phone-7, c#-4.0, oauth, oauth-2.0, google-authentication

在我的 WP7.5 应用程序中，我已将用户重定向到谷歌网页，该网页被要求授予应用程序访问其帐户的权限，用户单击是，但它重定向到有代码的页面，并且用户应该将其复制/粘贴到我的应用程序中。

响应是请复制此代码，切换到您的应用程序并将其粘贴到那里：4/3oHAHtqSk1CqA3S8HlEsuQRaE08e.4nCBpXhR-R8WgrKXntQAax02U4CwcgI - Auth code

我想，当用户按确定时，使用该代码返回我的应用程序，有什么办法吗？

——谢赫阿卜杜拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:18:43.923

如果您使用的是浏览器控件，这里有一篇很棒的 CodeProject 文章，介绍了如何操作：

[Windows Phone 上的 Google OAuth2](http://www.codeproject.com/Articles/321291/Google-OAuth2-on-Windows-Phone)

# ios - UITabBar 中的 UITableViewController

> ID：12107959
> 
> 赞同：1
> 
> 时间：2012-08-24T10:49:36.430
> 
> 标签：ios, xcode, uinavigationcontroller, uitableview

我正在尝试围绕我的 UITableView 控制器创建一个 UITabBarController。我正在使用这段代码。但问题是，当使用它时，导航栏会消失。我该如何解决这个问题？

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
StyledTableViewController *viewController1 = [[StyledTableViewController alloc] initWithNibName:@"StyledTableViewController" bundle:nil];

self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = @[viewController1];
self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible];
return YES; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:01:41.433

需要将 UINavigationController 添加到导航栏加上它维护您的视图层次结构

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
StyledTableViewController *viewController1 = [[StyledTableViewController alloc] initWithNibName:@"StyledTableViewController" bundle:nil];
 UINavigationController *navController = [[UINavigationController alloc]initWithRootViewController:viewController1];

self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = @[navController];
self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible];
return YES; 
```

# c# - 仅提取压缩文件（没有文件夹）

> ID：12107966
> 
> 赞同：1
> 
> 时间：2012-08-24T10:50:26.800
> 
> 标签：c#, sharpziplib

使用 SharpZip 库，我可以轻松地从 zip 存档中提取文件：

```
FastZip fz = new FastZip();
string path = "C:/bla.zip";
fz.ExtractZip(bla,"C:/Unzips/",".*"); 
```

但是，这会将未压缩的文件夹放在输出目录中。假设我想要的 bla.zip 中有一个 foo.txt 文件。有没有一种简单的方法来提取它并将其放在输出目录中（没有文件夹）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T10:56:36.220

`FastZip`似乎没有提供更改文件夹的方法，但“[手动”的做法支持这一点](http://wiki.sharpdevelop.net/SharpZipLib-Zip-Samples.ashx#Unpack_a_Zip_with_full_control_over_the_operation_3)。

如果你看看他们的例子：

```
public void ExtractZipFile(string archiveFilenameIn, string outFolder) {
    ZipFile zf = null;
    try {
        FileStream fs = File.OpenRead(archiveFilenameIn);
        zf = new ZipFile(fs);

        foreach (ZipEntry zipEntry in zf) {
            if (!zipEntry.IsFile) continue; // Ignore directories

            String entryFileName = zipEntry.Name;
            // to remove the folder from the entry:
            // entryFileName = Path.GetFileName(entryFileName);

            byte[] buffer = new byte[4096];     // 4K is optimum
            Stream zipStream = zf.GetInputStream(zipEntry);

            // Manipulate the output filename here as desired.
            String fullZipToPath = Path.Combine(outFolder, entryFileName);
            string directoryName = Path.GetDirectoryName(fullZipToPath);
            if (directoryName.Length > 0)
                Directory.CreateDirectory(directoryName);

            using (FileStream streamWriter = File.Create(fullZipToPath)) {
                StreamUtils.Copy(zipStream, streamWriter, buffer);
            }
        }
    } finally {
        if (zf != null) {
            zf.IsStreamOwner = true;stream
            zf.Close();
        }
    }
} 
```

正如他们所指出的，而不是写：

```
String entryFileName = zipEntry.Name; 
```

你可以写：

```
String entryFileName = Path.GetFileName(entryFileName) 
```

删除文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:01:16.220

假设您知道这是 zip 中唯一的文件（不是文件夹）：

```
using(ZipFile zip = new ZipFile(zipStm))
{
  foreach(ZipEntry ze in zip)
    if(ze.IsFile)//must be our foo.txt
    {
      using(var fs = new FileStream(@"C:/Unzips/foo.txt", FileMode.OpenOrCreate, FileAccess.Write))
        zip.GetInputStream(ze).CopyTo(fs);
      break;
    }  
} 
```

如果您需要处理其他可能性，或者例如获取 zip 条目的名称，则复杂性会相应增加。

# c# - DropDownListFor空值，引用使用

> ID：12107972
> 
> 赞同：0
> 
> 时间：2012-08-24T10:51:07.347
> 
> 标签：c#, asp.net-mvc, razor

所以我看了很多 StackOverflow 并找到了一个很好的解决我的问题的方法。

[MVC3 DropDownListFor - 一个简单的例子？](https://stackoverflow.com/questions/7142961/mvc3-dropdownlistfor-a-simple-example)，这应该为我做。但是，它返回了一个空值......不知何故，我不知道如何解决这个问题，因此将不胜感激。

**模型 AccountModel.cs**

```
...
public string Address { get; set; }
public string City { get; set; }

public class StateList
{
    public int StateID { get; set; }
    public string Value { get; set; }
}

public IEnumerable<StateList> StateListOptions = new List<StateList>
{
    //new StateList { StateID = -1, Value = "Select State" },
    new StateList { StateID = 0, Value = "NY" },
    new StateList { StateID = 1, Value = "PO" }
};

public string State { get; set; }

public string Zip { get; set; }
... 
```

**注册.cshtml**

```
@Html.DropDownListFor(m => m.State, new SelectList(Model.StateListOptions, "StateID", "Value", Model.StateListOptions.First().StateID)) 
```

我想也许我`StateID = -1`出于某种原因让它输出了一个空值......但它没有，你可以看到它在这里被注释掉了。我做错什么了？！

**采取行动**

```
public ActionResult Register()
{
    ViewData["PasswordLength"] = MembershipService.MinPasswordLength;

    return View();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:08:57.067

创建模型/视图模型的对象并将其发送到视图。

```
public ActionResult Register()
{    
    AccountModel vm=new AccountModel();

    //Not sure Why you use ViewData here.Better make it as a property
    // of your AccountModel class and pass it.
    ViewData["PasswordLength"] = MembershipService.MinPasswordLength;

    return View(vm);
} 
```

现在你的视图应该被强输入到这个模型

所以在你`Register.cshtml`看来，

```
@model AccountModel
@using(Html.BeginForm())
{
   //Other form elements also
   @Html.DropDownListFor(m => m.State, new SelectList(Model.StateListOptions, 
                                                "StateID", "Value")"Select")
   <input type="submit" />

} 
```

要在 POST 中获取选定状态，您可以检查`State`属性值。

```
[HttpPost]
public ActionResult Register(AccountModel model)
{
   if(ModelState.IsValid)
   {
      // Check for Model.State property value here for selected state   
      // Save and Redirect (PRG Pattern)
   }
   return View(model);
} 
```

# android - 在 Android 中注销 LinkedIn 会话

> ID：12107973
> 
> 赞同：4
> 
> 时间：2012-08-24T10:51:09.277
> 
> 标签：android, session, linkedin, logout, linkedin-api

我已在我的 Android 应用程序中成功集成了 LinkedIn 登录功能。但我未能实现注销功能。

谁能帮我找到合适的解决方案？我试图清除所有应用程序数据 - 但仍然没有成功。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-06-05T07:10:00.533

LinkedIn 应用程序使用“单点登录”，因此一旦您登录该应用程序，您就无法在您自己的应用程序中从 LinkedIn 注销，除非您在 LinkedIn 应用程序中明确注销。但是，我们可以`accesstoken` `null`使用以下代码行清除会话，这将清除会话：

```
LISessionManager.getInstance(getApplicationContext()).clearSession(); 
```

# html - j2me中的html文本提取

> ID：12107974
> 
> 赞同：1
> 
> 时间：2012-08-24T10:51:10.783
> 
> 标签：html, java-me, lwuit

我想在 j2me 中从网页中提取文本，我使用了字符串操作，但我没有得到结果，我的代码是否正确？

**来自网页的字符串：**

```
<td align="left" valign="middle"  class="celebrity-details-description-txt" > 

<p style="text-align: justify;">

 Hero Gopichand's new movie under the direction of Chandrasekhar Yeleti is progressing at brisk pace in Ladakh. Recently, the unit has shot an extensive action scene on Gopichand, Taapsee and others under Buzkashi sport backdrop. alt="Buzkashi sport, gopichand buzkashi, gopichand new movie, buzkashi afghanisthan sport

</p> 

<p style="text-align: justify;">&nbsp;</p> <p style="text-align: justify;">&nbsp;</p>

</td> 
```

这是我的代码：

```
int tdIndex = readUrl.indexOf("<td align=\"left\" valign=\"middle\" class=\"celebrity-details-description-txt\">");
tdIndex = readUrl.indexOf(">", tdIndex);
int endtdIndex = readUrl.indexOf("</td>", tdIndex);
String content = readUrl.substring(tdIndex + 1, endtdIndex); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:47:12.393

看起来在`readUrl`String 之间`middle`和之间有一个额外`class`的空间`td`。我的建议是改变

```
int tdIndex = readUrl.indexOf("&lt;td align=\"left\" valign=\"middle\" class=\"celebrity-details-description-txt\">"); 
```

只是

```
int tdIndex = readUrl.indexOf("class=\"celebrity-details-description-txt\""); 
```

# apache - 雷鸟无法登录到 apache james

> ID：12107975
> 
> 赞同：2
> 
> 时间：2012-08-24T10:51:11.287
> 
> 标签：apache, email, login, mail-server, james

据我所知，[Apache James](http://james.apache.org/server/3/quick-start.html)运行正常：

```
root@dur:~/apache-james-3.0-beta4.derby# 
root@dur:~/apache-james-3.0-beta4.derby# bin/james-cli.sh -h localhost listdomainslocalhost
127.0.1.1
127.0.0.1
127.0.1.1

listdomains command executed sucessfully in 262 ms.

root@dur:~/apache-james-3.0-beta4.derby# 
root@dur:~/apache-james-3.0-beta4.derby# bin/james-cli.sh -h localhost listusersa@localhost
b@localhost
thufir@localhost

listusers command executed sucessfully in 277 ms.

root@dur:~/apache-james-3.0-beta4.derby# 
root@dur:~/apache-james-3.0-beta4.derby# telnet localhost 143 -l thufir@localhost
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
* OK JAMES IMAP4rev1 Server  Server dur.bounceme.net is ready.
login
* BYE Unknown command.
Connection closed by foreign host.
root@dur:~/apache-james-3.0-beta4.derby# 
```

所以，我正在尝试使用tomcat登录：

![在此处输入图像描述](../Images/2b091e6ebd32472f6c8fc07bd87da5b6.png)

当然，那失败了。以下是帐户的设置方式：

![在此处输入图像描述](../Images/4138e3a7c33fe11e2d9931ac885d7adf.png)

服务器名称是否应该以 imap 和 smtp 开头？为什么雷鸟登录不了？（是的，我使用了正确的密码。）

如果使用 Java 进行故障排除会更好，我可以这样做，但从 Thunderbird 开始似乎是谨慎的。

James 将登录尝试显示为：

```
root@dur:~/apache-james-3.0-beta4.derby# 
root@dur:~/apache-james-3.0-beta4.derby# tail log/james-server.log 
INFO  03:38:56,180 | james.imapserver | ID=10307467 Connection closed for 127.0.0.1
INFO  03:39:42,277 | james.imapserver | ID=18745390 Connection established from 127.0.0.1
INFO  03:40:16,779 | james.imapserver | ID=18745390 Too many authentication failures. Closing connection.
INFO  03:40:16,801 | james.imapserver | ID=18745390 Connection closed for 127.0.0.1
INFO  03:40:16,854 | james.imapserver | ID=18407750 Connection established from 127.0.0.1
INFO  03:40:20,028 | james.imapserver | ID=18407750 Connection closed for 127.0.0.1
INFO  03:42:04,682 | james.imapserver | ID=295845 Connection established from 127.0.0.1
INFO  03:42:14,286 | james.imapserver | ID=295845 Connection closed for 127.0.0.1
INFO  03:48:17,081 | james.imapserver | ID=9571677 Connection established from 127.0.0.1
INFO  03:48:17,143 | james.imapserver | ID=9571677 Connection closed for 127.0.0.1
root@dur:~/apache-james-3.0-beta4.derby# 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T09:39:10.223

您的服务器名称应保持原样，不带任何前缀。最好把真实的服务器名称放在那里。在你的情况下“dur.bounceme.net”。

或者您可以使用“hosts”文件并为您的服务器分配一个别名（即，您可以添加 smtp 和 imap，或者如果您愿意，可以只将邮件前缀添加到服务器的别名）。对于 linux 机器，您可以在 /etc/hosts 中找到它并添加例如：

```
127.0.0.1     imap.localhost
127.0.0.1     smtp.localhost 
```

或者：

```
<server's IP>     <server alias> 
```

这样，如果您愿意，您可以为同一台机器设置两个额外的别名，但这不是必需的。

# ios - viewController 的 dealloc 在调用 navigationController popViewControllerAnimated 时不会被调用

> ID：12107983
> 
> 赞同：3
> 
> 时间：2012-08-24T10:51:48.877
> 
> 标签：ios, memory-leaks, dealloc, navigationcontroller, popviewcontrolleranimated

我有一个 MyViewController，它基于 UIViewController，我像下面的代码一样使用它：

`MyViewController *nextViewController = [[MyViewController alloc] init]; [self.navigationController pushViewController:nextViewController animated:YES]; [nextViewController release];`

在 MyViewController 中，带有用户事件，具有以下代码：

`[self.navigationController popViewControllerAnimated:YES];`

现在，我发现，MyViewController 的 dealloc 没有被调用，但是，当我将 App 切换到后台时，例如，通过 home 按钮，dealloc 方法已经被调用了！这是个大问题！会有很多 MyViewController 不会被释放，当用户转到一个 MyViewController 时，一次又一次地返回，只是，只有当应用程序转到后台时，才能释放大量内存。

所以，谁能帮我解决这个问题，谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T11:36:00.913

显而易见的原因是某些东西保留了您的 viewController。您将不得不仔细查看您的代码。您是否在课堂上使用委托做任何事情，因为他们有时会保留委托。NSURLConnection 将保留你的类，NSTimer 也是如此。您可以在班级中分散代码并记录班级的保留计数，并尝试找出在哪里。在您到目前为止显示的代码中，保留应该只是 1，因为该类仅由导航控制器保留。

此外，在您弹出视图之前，获取对它的引用，在没有动画的情况下弹出它，然后向它发送一些消息，让它报告保留计数（这将是您编写的一些新方法）。这个新方法还可以记录其他事情，比如它是否有任何计时器在运行、NSURLConnections 等。

# debugging - 有没有办法进入在 mac 上运行的 opencl 内核代码

> ID：12107984
> 
> 赞同：0
> 
> 时间：2012-08-24T10:51:51.623
> 
> 标签：debugging, opencl

有没有办法进入在 CPU 设备 (MAC) 上运行的 OpenCL 内核代码？我可以使用 printfs，但我想进入内核代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:14:22.970

我相信不会。[OpenCL for OSX文档](http://developer.apple.com/library/mac/#documentation/Performance/Conceptual/OpenCL_MacProgGuide/)（和[PDF](https://developer.apple.com/library/mac/documentation/Performance/Conceptual/OpenCL_MacProgGuide/OpenCL_MacProgGuide.pdf)）的“调试”部分未提及该功能。

# python - Python：字典元素

> ID：12107985
> 
> 赞同：0
> 
> 时间：2012-08-24T10:51:55.890
> 
> 标签：python

```
def big(dict, n):
    line = []

    for k in dict:
       if k > n:
            line.append(k)
            return line 
```

我必须找到dict中大于n的所有元素。

但是，我的代码只返回字典中大于 n 的最大数。

我需要做什么才能使其正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T10:55:49.747

选项卡`return line`太远了，所以它在找到大于的*第一个* **键时返回***（注意：字典不是按您编写的方式排序的）*，而不是在返回之前遍历所有键。尝试：`n`

 *```
def big(dic, n):
    line = []
    for k in dic:
        if k > n:
            line.append(k)
    return line 
```

实际上，您可能更喜欢它使用列表推导（并且该函数仅变成一行）。

```
def big(dic, n):
    return [k for k in dic if k>n] 
```

.

字典由键值对组成，`{key: value}`当我们迭代字典时，我们正在迭代它的键。这解释了使用变量`k`来迭代**键**。那是，

```
[k for k in dic] = [key1, key2, ...] 
```

因此，如果您想在字典中找到**最大值，您可以使用：**

```
 return [dic[k] for k in dic if dic[k]>n] 
```

*注意：我已将变量名称更改为`dic`因为（正如@AndrewJaffe 提到的）`dict`是一个内置对象，在这里重命名它可能会导致意外的事情发生，并且通常被认为是不好的做法。例如，如果您想检查`type(dic)==dict`*.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:24:52.167

```
def big(dic, n):
    line = []
    for k in dic:
       if  dic[k]> n:      #compare value instead of key      
            line.append(k) #use k if you're appending key else dic[k] for val
            return line 
```

**输出**：

```
>>> print big({'a':10,'b':15, 'c':12},11)
['c'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T11:24:59.773

天真地遍历字典会给你一个*键*序列。不是*价值观*。

所以要做你想做的事，你需要[itervalues](http://docs.python.org/library/stdtypes.html#dict.itervalues)：

```
for k in d.itervalues():    ### call it "d" rather than "dict"
   if k>n:
      line.append(k) 
```

或者，正如其他人所指出的，使用列表推导。

另外，不要使用`dict`名称，因为它会影响内置函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T10:55:34.110

将 return 语句向后移动两个制表符，否则它将返回大于 n 的第一个值。*

# javascript - 在 Javascript 中输入键事件作为 Tab 键

> ID：12107994
> 
> 赞同：0
> 
> 时间：2012-08-24T10:52:36.537
> 
> 标签：javascript, asp.net-mvc

我想了解将输入键操作作为选项卡索引。

```
if (event.keyCode == 13) 
{
    invocation.target.isPressEnterKey = "TRUE";
    event.keyCode = 9;
} 
```

到达最后一个标签索引时，此代码不起作用。

当到达最后一个标签索引时，不能移动到第一个标签索引。

但是 Tab 键是正确的。现在的问题是 Enter Key 事件。

# jquery - 一篇文章里面的jquery

> ID：12107997
> 
> 赞同：0
> 
> 时间：2012-08-24T10:52:43.353
> 
> 标签：jquery, joomla, joomla2.5

我在 Joomla 中创建了一个 Web 应用程序，并在单击菜单项后显示一篇博客文章。你知道我在哪里可以插入以下代码行让 jquery 工作

```
$document = &JFactory::getDocument();
$document->addScript(JPATH_SITE.’/media/system/js/jquery.js’ );
$document->addScriptDeclaration ( ‘jQuery.noConflict();’ ); 
```

这篇文章不是用模块“创建”的，所以我没有 default.php 文件供我插入行。你知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:01:22.260

还没有尝试在文章中嵌入 jQuery，但是下载[Direct PHP](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-content/4470)，它允许您在文章中编写 PHP 代码，然后只需添加您的代码。不要忘记使用 php 标签。

如果这不起作用，您可以随时将代码添加到模板的 index.php 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T07:12:32.067

只需将其放在模板 index.php 的头部

`JHtml::_('jquery.framework');`

这将在无冲突模式下加载 jquery 1.8.1（左右），其余的也可以去那里......

# .net - Tibco EMS 客户端如何获得许可？

> ID：12107999
> 
> 赞同：2
> 
> 时间：2012-08-24T10:53:10.763
> 
> 标签：.net, client, libraries, tibco, tibco-ems

开发与 TIBCO EMS 连接的应用程序（我使用的是 .NET，但对于其他平台应该相同）时我需要安装什么？我有 TIBCO EMS 安装包，但它安装了整个服务器。它如何与连接到 EMS 的客户端应用程序一起工作？我是否必须在每台机器上安装 TIBCO EMS 服务器才能获取客户端库，或者是否允许将库从真实服务器复制到客户端？

例如，在开发与 IBM WebSphere MQ 的连接时，我只需要安装可以连接到许可 MQ 服务器的 WebSphere MQ 客户端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T18:36:08.163

TIBCO EMS 没有开发人员安装或客户端库安装。您将需要使用作为 TIBCO EMS 下载的一部分提供的安装程序。从纯粹的技术角度来看，可以从服务器复制所需的文件，但是不太可能支持此操作，您需要检查这样做不会违反您的许可。

在许可方面，TIBCO 为生产、非生产和开发人员使用提供永久许可。您应该联系您的 TIBCO 客户代表以获取定价。如果您需要帮助，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T02:47:10.650

当您想连接到 ems 服务器时，您只需要。在您的项目中引用 ems dll。多年来，我们一直在这样做。我们还使用与 wcf 一起使用的 tems dll。这有助于 bw/java/salesforce 通过展平 wsdl 来使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-28T15:25:22.080

我的理解是，您可以获得 TIBCO.EMS.dll 的副本并根据需要在应用程序中使用它，而无需考虑许可。原因是该程序集仅在您有可以连接的 EMS 实例时才有用。EMS 服务器本身通常由核心授权。因此，您最终仍将增加 E​​MS 的负载，并且必须为此付费。

要注意的另一件事是，如果您出于开发目的运行 EMS 的本地实例，则通常必须获得许可。Brian 的经验是，你可以在 QA/Dev 中做你想做的事，而不必担心许可问题，这与我们被告知的不符。但是，我相信 TIBCO 确实提供了一些自助式许可证，而且他们很可能只是签订了不同的协议，因此在他的环境中是允许的。

免责声明 - 您的 TIBCO 客户代表将是获得明确答案的最佳来源。