# StackOverflow 问答 11379000-11379999

# php - 将 MD5 散列密码显示为带星号的文本

> ID：11379000
> 
> 赞同：0
> 
> 时间：2012-07-07T22:04:27.180
> 
> 标签：php

我想`echo`记录用户的详细信息，这对于纯文本来说很好，但我在数据库中有 md5 散列密码。我想用星号显示密码，所以唯一的变量是密码的长度。因此，如果某人的密码是`cat`，它会显示：密码：`***` 如果是其他人的，`hippopotamus`它会显示：密码：`************` 但是密码加密这似乎很困难。尽管 eBay 和 Facebook 等网站确实有此功能，但它们必须对用户密码进行加密。

任何人都可以阐明这个问题。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T22:05:16.480

是不可能的。没有办法知道用于生成 md5 哈希的输入数据的长度。

> 像 ebay 和 facebook 这样的网站确实有这个，他们必须加密用户密码

如果他们这样做（我希望他们不要这样做，因为它会将密码数据泄露给公众，从而更容易破解），那么他们将不得不存储输入字符串的长度以及散列密码。

您看到的可能是浏览器自动为您填写密码字段。星号是（浏览器）使用的标准掩码字符，以降低“偷窥”攻击的有效性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:08:58.213

您可以在最初对密码进行散列/加盐时将密码的长度存储在数据库中。 **但是**散列/加盐的重点是防止数据库被盗时密码被泄露。如果数据库被盗，知道密码的长度是一个很好的安全妥协。

# php - ion auth 注册后不会重定向

> ID：11379002
> 
> 赞同：1
> 
> 时间：2012-07-07T22:04:38.200
> 
> 标签：php, codeigniter, authentication, redirect, ion-auth

我正在使用 ion auth 进行 CI 身份验证。注册后自动登录出现问题。我的注册没有问题，所有数据都已插入，我可以使用我的登录表单登录。但是在用户注册后它不会重定向到主页。

下面是我的代码。任何人都可以看看吗？

```
if ( $this->form_validation->run() == TRUE )
        {   
            //if form validation not false, password var
            $username = $this->input->post('email');
            $password = $this->input->post('password');
            $email = $this->input->post('email');
            $additional_data = array(
                                        'first_name' => $this->input->post('first_name'),
                                        'last_name' => $this->input->post('last_name'),
                                    );
        }

        if ($this->form_validation->run() == TRUE && $this->ion_auth->register($username, $password, $email, $additional_data))
        { 
            //check to see if we are creating the user
            //redirect them back to the home page
            $this->session->set_flashdata('msg', "User Created");
            redirect("auth/home", 'refresh');
        }
        else
        {
            $this->session->set_flashdata('msg', validation_errors('<div>','</div>'));
            redirect('auth/index','refresh');
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T22:47:24.537

这是因为用户已“注册”但未“登录”。您需要在注册之后但在重定向之前手动登录它们。

```
 if ($this->form_validation->run() == TRUE && $this->ion_auth->register($username, $password, $email, $additional_data))
         {              
              //check to see if we are creating the user             
              //redirect them back to the home page            
               $this->session->set_flashdata('msg', "User Created");   
              // ***DO MANUAL LOGIN HERE WITH ION_AUTH***
              redirect("auth/home", 'refresh');     
          } 
```

# css - 灯箱类型脚本是否与视网膜屏幕冗余？

> ID：11379003
> 
> 赞同：0
> 
> 时间：2012-07-07T22:04:58.543
> 
> 标签：css, lightbox, pixel, retina-display

显示在灯箱脚本（例如漂亮照片、灯箱、厚箱等）中的图像是否受到高像素比设备的影响？

例如，如果我在灯箱中有一个 800 像素宽的图像，它会以 800 CSS 像素还是 800 实际像素显示？进一步探究，在浏览器中显示的原始图像是否以同样的方式受到影响？

如果用灯箱显示的图像受到视网膜屏幕的影响，解决办法是什么？只需链接到更大的图像？（假设脚本自动调整图像大小以适合视口）

也许有人需要开发一个新的 jQuery 插件。:)

# objective-c - 没有 init 的 Objective C 构造函数

> ID：11379006
> 
> 赞同：0
> 
> 时间：2012-07-07T22:05:21.707
> 
> 标签：objective-c, ios, initialization

当我创建自定义类时，我希望能够在构建类的实例后跳过代码的 alloc init 部分。类似于它的完成方式：

```
NSString * ex = [NSString stringWithFormat...]; 
```

基本上我已经用自定义初始化方法设置了类来设置我的基本变量。然而，当我在前端并实际制作这些小动物时，我不得不说：

```
[[Monster alloc] initWithAttack:50 andDefense:45]; 
```

我宁愿说

```
[Monster monsterWithAttack:50 andDefense:45]; 
```

我知道摆脱 alloc 部分是一件简单的愚蠢的事情，但它使代码更具可读性，所以我更喜欢这样做。我最初尝试只是改变我的方法

```
-(id)initWithAttack:(int) a andDefense:(int) d 
```

至

```
-(id)monsterWithAttack:(int) a andDefense:(int) d 
```

然后将我的更改`self = [super init]`为，`self = [[super alloc] init];`但这显然不起作用！有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T22:08:40.520

你必须制作一个*类*方法

```
+(id)monsterWithAttack:(int) a andDefense:(int) d 
```

您在其中创建、初始化和返回一个实例（并且不要忘记您的内存管理）：

```
+(id)monsterWithAttack:(int) a andDefense:(int) d {
    // Drop the autorelease IF you're using ARC 
    return [[[Monster alloc] initWithAttack:a andDefense:d] autorelease];
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-07T22:12:08.417

你想要的是一个方便的构造函数。它是一个类方法，它返回一个可用的类实例并同时为其分配内存。

```
-(id)initWithAttack:(int)a andDefense:(int)d;
+(id)monsterWithAttack:(int)a andDefense:(int)d;

+(id)monsterWithAttack:(int)a andDefense:(int)d {
        //-autorelease under MRC
        return [[[self class] alloc] initWithAttack:a andDefense:d];
 }
 -(id)initWithAttack:(int)a andDefense:(int)d {
        self = [super init];
        if (self){
             //custom initialization
        }
        return self;
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-07T22:14:04.353

您应该在怪物类的标题中使用类工厂方法。

```
+(id)monsterWithAttack:(int) attackValue andDefense:(int) defenseValue 
```

在怪物类的实现中

```
+(id)monsterWithAttack:(int) attackValue andDefense:(int) defenseValue {
    return [[[[self class] alloc] initWithAttack:attackValue andDefense:defenseValue] autorelease];
} 
```

的使用`[self class]`保证了子类化期间的正确调度。如果您使用 ARC，则可以避免该`autorelease`方法

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-07T22:11:27.663

这种类型的类方法使用`autorelease`.

例如，你可能会说：

```
+ (id)
monsterWithAttack:(int)  a
defense:(int)            d
{
    return [[Monster alloc] initWithAttack:a defense:d]
            autorelease];
} 
```

# php - 为什么我的 PHP 总是收到 500 错误？

> ID：11379016
> 
> 赞同：1
> 
> 时间：2012-07-07T22:07:18.807
> 
> 标签：php, mysql

我正在尝试创建一个帐户注册页面，当我添加一个系统来检查数据库并确保没有多行具有相同的用户名时，我收到 500 错误。

这是有效的代码：

```
<?php

if(isset ($_POST['submit']))
{
    include( 'connection.php' );

    $username = $_POST['username'];
    $password = $_POST['password'];
    $email = $_POST['email'];

    if(empty($username) || empty($email) || empty($password))
    {
        echo 'Please check the required fields.';
    }
    elseif(!filter_var($email,FILTER_VALIDATE_EMAIL))
    {
        echo 'Please enter a correct email address.';
    }
    else
    {
        $password = md5($password);
        $sql = mysql_query("INSERT INTO users (email,username,password) VALUES ('$email','$username','$password')") or die(mysql_error());

        if($sql)
        {
            echo 'Successfully submitted.';
        }
    }   
}
?> 
```

这是给我一个 500 错误的代码：

```
<?php
error_reporting(E_ALL)

if(isset ($_POST['submit'])) {
    include( 'connection.php' );

    $username = $_POST['username'];
    $password = $_POST['password'];
    $email = $_POST['email'];

    $fetch = mysql_query("SELECT * FROM users WHERE username = '$email'") or die(mysql_error();
    $num_rows = mysql_num_rows($fetch);

    if(empty($username) || empty($email) || empty($password)) {
        echo 'Please check the required fields.';
    }
    elseif(!filter_var($email,FILTER_VALIDATE_EMAIL)) {
        echo 'Please enter a correct email address.';
    }

    elseif($num_rows >= 1);
    {
        echo 'This username is taken.';

    else    
    }
        $password = md5($password);
        $sql = mysql_query("INSERT INTO users (email,username,password) VALUES ('$email','$username','$password')") or die(mysql_error());

        if($sql)
        {
            echo 'Successfully submitted.';
        }
    }   
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T22:09:29.943

也许添加一个分号：

```
error_reporting(E_ALL); 
```

编辑：

你也错过了`)`一个`die(mysql_error();`

`;`从_`elseif($num_rows >= 1);`

然后将你的`else`块修复为`} else {`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:10:59.453

您在第一条语句中漏掉了一个分号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T22:12:01.313

你有

```
else } 
```

在你的代码中。那是语法错误。您正在寻找

```
}
else { 
```

反而。

# hibernate - 使用 Jersey 的 JAX-RS 的休眠资源类中的多对一连接表

> ID：11379017
> 
> 赞同：9
> 
> 时间：2012-07-07T22:07:19.480
> 
> 标签：hibernate, rest, jersey, hql

我正在使用 Jersey 实现一个 RESTful Web 服务。我使用休眠与数据库（mySQL）进行通信。我的休眠资源类包括：

```
@Entity
public class Activity {

    @Id
    @GeneratedValue
    private long id;

@ManyToOne
    @JoinTable(name="category_activity",
    joinColumns={@JoinColumn(name="activities_id")},
    inverseJoinColumns={@JoinColumn(name="Category_id")})
    private Category category;
} 
```

和类别类：

```
@Entity
public class Category {

    @Id
    @GeneratedValue
    private long id;

    @OneToMany
    @Fetch(FetchMode.JOIN)
    @JoinTable(name = "category_activity",
    joinColumns = { @JoinColumn(name = "Category_id") }, 
    inverseJoinColumns = { @JoinColumn(name = "activities_id") })
    @JsonIgnore
    private Collection<Activity> activities;
} 
```

我使用此查询来获取活动：

```
session.createQuery("from Activity a join a.category cs where cs.id= :categoryId order by a.key").setLong("categoryId", categoryId).list(); 
```

JSON 格式的结果不正确，例如：

```
[[{"id":26,"key":"other","name":"Other","cost":100.0,"category":{"id":10,"name":"General","description":""}},{"id":10,"name":"General","description":""}]] 
```

如您所见，类别被打印了 2 次，并且我们在它周围有一个额外的 []。当我在 Category 类中使​​用另一种一对多关系机制时，例如：

```
@OneToMany(targetEntity = Activity.class, mappedBy = "category", fetch = FetchType.LAZY, cascade = CascadeType.ALL)
@JsonIgnore
private Collection<Project> activities; 
```

在 Activity 类中：

```
@ManyToOne(optional = false)
    private Category category; 
```

这个查询：

```
session.createQuery("from Activity as a where a.category.id= :categoryId order by a.key").setLong("categoryId", categoryId).list(); 
```

一切正常。但我必须使用连接表，因为我不打算更改数据库。

正确的结果应该如下所示：

```
[{"id":26,"key":"other","name":"Other","cost":100.0,"category":{"id":10,"name":"General","description":""}}] 
```

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-07T22:24:02.910

在多方面定义连接表，但不要在一侧再次定义它。这会创建两个映射到同一个表的单向关联，而不是一个双向关联。

双向关联总是有一个所有者端（您可以在其中指定要使用的连接列或连接表，以及一个反向端，它使用 mappedBy 属性表示它是另一端的反向：

```
public class Activity {

    @ManyToOne // owner side: it doesn't have mappedBy, and can decide how the association is mapped: with a join table
    @JoinTable(name="category_activity",
               joinColumns={@JoinColumn(name="activities_id")},
               inverseJoinColumns={@JoinColumn(name="Category_id")})
    private Category category;
}

public class Category {
    @OneToMany(mappedBy = "category") // inverse side: it has a mappedBy attribute, and can't decide how the association is mapped, since the other side already decided it.
    @Fetch(FetchMode.JOIN)
    @JsonIgnore
    private Collection<Activity> activities;
} 
```

编辑：

此外，您的查询应该只选择活动，而不是查询加入的所有实体，方法是添加一个 select 子句：

```
select a from Activity as a where a.category.id= :categoryId order by a.key 
```

# java - 在android中使用共享首选项存储用户名

> ID：11379019
> 
> 赞同：0
> 
> 时间：2012-07-07T22:07:44.480
> 
> 标签：java, android, nullpointerexception, sharedpreferences

我正在尝试将用户名保存在共享首选项中。我使用网络服务从数据库中获取用户名和密码，它运行良好。问题在于将用户名保存在共享首选项中。我已经给出了下面的代码。我已经评论了问题出现的地方。我得到以下异常：

```
 java.lang.NullPointerException 
```

我找不到什么问题。请帮忙。

///登录类////

```
public class Login extends Activity{

private static final String SOAP_ACTION = "http://tempuri.org/checkLogin";
private static final String OPERATION_NAME = "checkLogin";
private static final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";
private static final String SOAP_ADDRESS = "http://10.0.2.2:54714/WebSite1/Service.asmx";

Button sqllogin;
EditText sqlusername, sqlpassword;
TextView tvData1;
CheckBox cb;

 @Override
    protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    sqlusername = (EditText) findViewById(R.id.etuname1);
    sqlpassword = (EditText) findViewById(R.id.etpass);
    tvData1 = (TextView)findViewById(R.id.textView1); 
    sqllogin = (Button) findViewById(R.id.bLogin);

    sqllogin.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            switch (v.getId()){
            case R.id.bLogin:
            String username = sqlusername.getText().toString();
            String password = sqlpassword.getText().toString();
            SoapObject Request = new SoapObject(WSDL_TARGET_NAMESPACE,OPERATION_NAME);
            Request.addProperty("uname", String.valueOf(username));
            Request.addProperty("pwd", String.valueOf(password));

                    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
                    envelope.dotNet = true;
                    envelope.setOutputSoapObject(Request);
                    HttpTransportSE httpTransport = new HttpTransportSE(SOAP_ADDRESS);

                   try  {                    
                    httpTransport.call(SOAP_ACTION, envelope);                       
                    SoapObject result = (SoapObject) envelope.bodyIn;
                    int response =  Integer.parseInt(result.getProperty(0).toString());
                    if(response == 2)//Response is 2 when username and password valid
                        {
                        tvData1.setText("You have logged in successfully"); 
                        savePrefs("CHECKBOX",cb.isChecked()); //This line and the following 3 lines is where the problem is.
                        if (cb.isChecked())
                        {
                            savePrefs("NAME",sqlusername.getText().toString());
                        }
                        Intent openhomepage = new Intent("com.android.disasterAlertApp.HOME");
                        startActivity(openhomepage);
                        }
                    else
                        {
                        tvData1.setText("Invalid Username or password"); 
                        }
                    }  catch (Exception exception)   {
                                  tvData1.setText(exception.toString());                    
                    }
            break;

        }

        }
    });
}

     private void savePrefs(String key, boolean value){
     SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this); 
     Editor edit = sp.edit();
     edit.putBoolean(key, value);
     edit.commit();
 }

 private void savePrefs(String key,String value){
     SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this); 
     Editor edit = sp.edit();
     edit.putString(key, value);
     edit.commit(); 
 } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T22:19:13.833

我没有看到您在哪里将 cb （复选框）附加到视图？

你得到一个空指针，因为 cb 什么都不是。您还没有找到它的视图，它只是一个成员，仅此而已。而且由于这也是您获取空指针的地方，因此几乎可以肯定这是出了什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T22:21:20.083

CheckBox cb 未设置！利用`cb = (CheckBox) findViewById(R.id.somewhat);`

# sql-server - 代理键是在 DW 还是 Stage 中创建？

> ID：11379021
> 
> 赞同：1
> 
> 时间：2012-07-07T22:07:47.587
> 
> 标签：sql-server, data-warehouse, business-intelligence

代理键，例如维度客户的 customerKey，是否应该在阶段过程中创建，然后所有数据都应该加载到 dimCustomer 中，或者当您将数据加载到 dimCustomer 表时，是否应该在 dimCustomer 中自动创建 customerkey？

你的反思和经历是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:27:22.357

在加载过程中，通常是自动递增的。

# android - 在 Eclipse 中更新到 Android SDK 20 后出现的问题

> ID：11379032
> 
> 赞同：0
> 
> 时间：2012-07-07T22:09:20.537
> 
> 标签：android, eclipse, eclipse-plugin

我首先通过访问`Help->Check For Updates`并安装它建议的所有东西来更新我的 Eclipse 中的工具。然后通过访问`Window->Android SDK Manager`并更新包括我的 SDK 版本在内的多个内容。

完成更新后，我所有的 Android 项目都有一个漂亮的红色框，里面有一个 x。我探索了这些项目，并注意到项目内部没有任何错误，只是项目本身有错误图标。我在网上搜索，发现其他人也有类似的问题。所以我想我找到了[解决方案](https://stackoverflow.com/questions/4954316/your-project-contains-errors-please-fix-it-before-running-it)。唉，在清理和构建项目之后，我的项目中的多个 java 文件旁边出现了额外的错误图标。Eclipse 在尝试导入自动生成的 R 文件时无法找到它们，并且所有导入都被选为红色。

我尝试删除 .android 目录的全部内容（从特定的几个文件开始，然后是全部内容），但这并没有带来预期的结果。

所以我删除了新生成的文件并恢复了所有旧文件。

当我再次清理和构建项目时，所有错误都会消失，但直到我再次尝试运行项目然后出现相同的错误：

> 您的项目包含错误，请在运行前修复它。

我还发现了一个相关的[问题](https://stackoverflow.com/questions/3896301/r-java-disappears-after-project-clean)。它声称我的 xml 文件一定有问题。自从更新工具后，我没有修改任何 xml 文件，所以我不知道是什么导致它们出现错误。

关于发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T22:16:02.383

我发现 eclipse 现在正在拾取它以前没有拾取的错误，因为它们更新了 lint，您可能必须检查所有文件并查看是否因此出现错误，如果它不起作用尝试从构建中删除 Android 并重新附加它，清理项目，构建项目，确保活动使用正确的 R 文件并检查 lint 所说的内容，我认为它就像一个带有勾号的小方块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:11:25.460

我遇到了完全相同的问题，通过在我的代码中删除 R 的任何导入然后清理项目来解决

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T22:24:15.657

最奇怪的事情刚刚发生。即使在我再次删除 .android 文件夹中的所有文件之前我已经这样做了 2 次，但退出了我的 Eclipse 并再次打开它。所有的错误都消失了，我的大部分项目都可以正常工作。我在这个问题上花了很多时间，我不知道它是如何解决的，但我很高兴它再次工作。

# c++ - xcode和c++正则表达式？

> ID：11379036
> 
> 赞同：1
> 
> 时间：2012-07-07T22:09:49.910
> 
> 标签：c++, regex, xcode, macos, ide

我使用 Java 作为我的解析器开发了一种脚本语言，但现在我试图通过在 Xcode 中使用 c++ 重新创建它来改进它。我真的需要 REGEX 才能使其工作，但我不确定如何将 REGEX 与 C++ 一起使用。

最新版本的 Xcode（Mac IDE）是否内置了 C++ REGEX 库？如果是这样，它是什么以及如何使用它？如果没有，我怎样才能得到一个并让 Xcode 识别它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T01:00:10.490

libc++（在 Xcode 4.3 中可用，并将成为下一版本 IIRC 中的首选标准库版本）支持 C++11 <regex> 标头。

# c# - 在按钮中显示内容和背景

> ID：11379037
> 
> 赞同：0
> 
> 时间：2012-07-07T22:09:55.823
> 
> 标签：c#, wpf

我需要在一个按钮中显示一个文本和一个图像（我的意思是一个在顶部，另一个在按钮的底部，所以两者都可以很好地看到）所以我将图像作为背景，将文本作为内容按钮，但它把两者放在同一个空间，所以它们看起来很混合，我怎样才能分离内容和背景？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T22:16:14.900

A`Button`可以容纳任何内容。`StackPanel`在这种情况下，在 Button 中创建一个并添加内容：

```
<Button>
  <StackPanel>
    <TextBlock />
    <Image />
  </StackPanel>
</Button> 
```

# knockout.js - Knockout JS 自定义表格编辑器

> ID：11379041
> 
> 赞同：0
> 
> 时间：2012-07-07T22:10:16.727
> 
> 标签：knockout.js

我有一个有 3 列的表。最后一列有一个按钮，上面写着编辑。单击按钮后，左侧的 2 个单元格将获得一个文本框，其中文本为单元格内容，按钮变为更新按钮。我对文本进行了更改，然后单击更新按钮。文本框中的文本将分配给表格单元格，并且按钮更改为编辑按钮。

让它与 jQuery 一起工作非常简单。但我想将文本绑定到一个淘汰赛 js 对象。我用一些数据预先填充表格，我将使用编辑按钮编辑文本。但是如何更新淘汰赛 js 对象呢？

我在网上查看了文档和其他示例，但没有找到类似的东西。所有网格示例都有一个文本框。就我而言，我也想更改 HTML 标签。

你能给我一个解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:37:20.850

看看这篇文章：[http](http://www.knockmeout.net/2011/03/guard-your-model-accept-or-cancel-edits.html) ://www.knockmeout.net/2011/03/guard-your-model-accept-or-cancel-edits.html 和这个jsFiddle：http: [//jsfiddle.net/rniemeyer/ X9rRa/](http://jsfiddle.net/rniemeyer/X9rRa/)

它显示了为每一行创建两个模板，其中一个是只读的，一个用于编辑。正在使用的模板是动态绑定的。该帖子还显示了您如何能够接受/取消对项目的更新。

# css - jQuery 和 OpenLayers 匹配主题

> ID：11379043
> 
> 赞同：0
> 
> 时间：2012-07-07T22:10:39.567
> 
> 标签：css, jquery-ui, themes, openlayers

# 背景

在同一网页上使用 jQuery 小部件和 OpenLayers 小部件。

# 问题

jQuery 有[Theme Roller](http://jqueryui.com/themeroller/)而 OpenLayers 有它的[默认主题](http://dev.openlayers.org/releases/OpenLayers-2.12/theme/)。这导致：

![](../Images/89d830312efcda2b8ed90bdd4ca9cdb6.png)

工具包控件有不同的颜色。这可以通过自定义[OpenLayers](http://dev.openlayers.org/releases/OpenLayers-2.11/doc/customization)或[jQuery](http://docs.jquery.com/UI/Theming/ThemeSwitcher)以匹配另一个来解决，但如果可能的话，我宁愿不重新发明轮子。例如：

*   [http://dev.openlayers.org/sandbox/itranga/openlayers/theme/css/jquery/](http://dev.openlayers.org/sandbox/itranga/openlayers/theme/css/jquery/)
*   [http://trac.osgeo.org/openlayers/ticket/1800](http://trac.osgeo.org/openlayers/ticket/1800)
*   [https://github.com/developmentseed/openlayers_themes](https://github.com/developmentseed/openlayers_themes)

# 问题

在哪里可以找到与其配色方案一致的**OpenLayers 2.12**和**jQuery UI 1.8.18 （免费提供）主题？**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T01:05:25.693

```
/**
 * Colour customizations for jQuery and OpenLayers widgets.
 */
.ui-dialog-titlebar, div.olControlZoom a {
  background: #0065bd !important;
} 
```

您可以使用 FireDebug（或等效）来检查 UI 元素。从那里，使用 CSS 更改 UI 元素的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:48:57.853

1.  跳过向 Map 对象添加常用/默认控件
2.  创建样式为 zIndex ~ 4000 的**DIV**层，使其高于任何地图对象 + 绝对位置，以固定在屏幕上
3.  在该层上创建控制 jQuery 按钮
4.  捕捉这些按钮的点击事件并通过其 Map 对象适当地控制地图

看例子，有 jQueryMobile 例子，它使用 jQueryMobile 按钮，因此是相同的任务。

# google-chrome-extension - Chrome 扩展程序中的 AdSense

> ID：11379047
> 
> 赞同：9
> 
> 时间：2012-07-07T22:11:27.153
> 
> 标签：google-chrome-extension, adsense

谷歌最近向开发者发送了一封邮件，称他们“正在更新我们的广告政策，以允许扩展程序通过广告获利”。起初我认为这意味着我现在可以在 Chrome 扩展程序中使用 AdSense，因为你知道......谷歌、广告......它们是相关的。

但是，今天仔细研究了一下，发现 AdSense 政策和以前一样：

> 目前，我们不允许通过软件应用程序分发 Google 广告或 AdSense 搜索框，包括但不限于工具栏、浏览器扩展程序和桌面应用程序。为了遵守 AdSense 计划政策，请注意 Google AdSense 代码只能在基于网页的页面上实施。

那么，这是否意味着 Google 鼓励开发人员通过*Google* AdSense以外的广告网络从他们的*Google Chrome 扩展中获利？*

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:52:20.270

令人惊讶，是的，但正确。来自[Google Chrome 网上应用店计划政策](https://developers.google.com/chrome/web-store/program_policies)：

> 目前，AdSense 不得用于在 Chrome 扩展程序或打包应用程序中投放广告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T16:58:34.370

打包应用程序中的 AdSense 正在开发中。请参阅此处的讨论：[https ://groups.google.com/a/chromium.org/forum/?hl=en&fromgroups#!topic/chromium-apps/_47r_YKRdjA](https://groups.google.com/a/chromium.org/forum/?hl=en&fromgroups#!topic/chromium-apps/_47r_YKRdjA)

同时，为这个问题加注星标：[https ://code.google.com/p/chromium/issues/detail?id=132602](https://code.google.com/p/chromium/issues/detail?id=132602)*

# python - 带有 Python 请求的 RESTFUL POST 到 Glassfish 服务器

> ID：11379050
> 
> 赞同：1
> 
> 时间：2012-07-07T22:11:40.203
> 
> 标签：python, rest, glassfish

我在尝试将 Python REST POST 发布到在 Glassfish 上运行的 Web 服务时遇到了困难。我已经验证 POST 使用 CURL 可以正常工作，但使用 Python 没有运气。

**这是可以正常工作的 CURL 请求。**

```
curl -X POST -H "Content-Type: application/json" -d '{"id":1,"lastname":"smith"}' 
  http://192.168.0.20:8080/field1/resources/com.field1entity.field1 
```

**这是发出 POST 请求的 Python 代码**

```
import urllib
import httplib2

def call():
http = httplib2.Http()

url = 'http://192.168.0.20:8080/field1/resources/com.field1entity.field1'

params = urllib.urlencode({"id":11111,"lastname":"oojamalip"})

response, content = http.request(url, 'POST', params, headers={'Content-type':'application/json'})
print "lets stop here to have a looksy at the variables"                               
print content

if __name__ == '__main__':

namesPage = call()
print namesPage 
```

**控制台输出，**

> 意外字符（'l'（代码 108））：在 [来源：org.apache.catalina.connector.CoyoteInputStream @18f494d；行：1，列：2]

希望有人能对这个问题有所了解。

谢谢尼克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T23:01:37.830

您正在对婴儿车进行 url 编码，然后告诉服务器它是 json 编码的

```
import json

params = json.dumps({"id":11111,"lastname":"oojamalip"})
# then
response, content = http.request(url, 'POST', body=params, headers={'Content-type':'application/json'}) 
```

# css - 将导航栏居中并防止当前项目不同的@font-face 覆盖#navigation 容器边框

> ID：11379056
> 
> 赞同：1
> 
> 时间：2012-07-07T22:13:26.210
> 
> 标签：css, wordpress, navbar

这是一个由两部分组成的问题......我目前正在尝试让导航栏在我客户的疯狂参数中正常工作。

在 style.css 中：

```
.fl{float: left;}

/* 2.2 Navigation */
#navigation {
  position: relative;
  clear: both; margin-bottom: 3em; display: none;
  font:14px/14px sans-serif;
  border: 1px solid #d9d9d9;
  background: #ffffff;
  background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#f5f5f5));
  background: -webkit-linear-gradient(#ffffff, #f5f5f5);
  background: -moz-linear-gradient(center top, #ffffff 0%, #f5f5f5 100%);
  background: -moz-gradient(center top, #ffffff 0%, #f5f5f5 100%);
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.03);
  -webkit-box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.03);
  -moz-box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.03);
  border-radius: 5px;
 -moz-border-radius: 5px;
  -webkit-border-radius: 5px;
}
#navigation ul.rss { float: none; position: absolute; top: 10px; right: 9px; }
#navigation ul.rss li { display: block; margin: 0 0 10px 0; padding: 0; font-size: 1em; }
#navigation ul.rss li a { color: #555555; text-decoration: none; padding: 0; display: inline-block; position: relative; }
#navigation ul.rss li a:hover { color: #222; } 
ul.nav li a { padding: .5em 1em; display: block; color: #666; }
ul.nav li a:hover  { color: #222; }
ul.nav li.current_page_item a,
ul.nav li.current_page_parent a,
ul.nav li.current-menu-ancestor a,
ul.nav li.current-cat a,
ul.nav li.current-menu-item a { background: #ffffff; color: #3088ff; }
ul.nav li ul li a  { background: none!important; color: #666!important; }
ul.nav ul li.current_page_item a,
ul.nav ul li.current_page_parent a,
ul.nav ul li.current-menu-ancestor a,
ul.nav ul li.current-cat a,
ul.nav ul li.current-menu-item a  { color: #3088ff!important; }
#header .nav-toggle  { text-align: center; display: block; margin: 2.5em 0 0; padding: 0.4em 1em; font-size: 1em; background: #999; border-radius: 3px; }
#header .nav-toggle a  { color: #fff; }
#header .nav-toggle a:hover  { color: #ccc; text-decoration: none; }
#top select { margin: 1.618em 0 0; width:100%; }
#top #top-nav { display: none; } 
```

在 layout.css 中

```
 #navigation { display: block !important; }
    #navigation ul li:first-child, #navigation ul li:first-child a  { border-radius: 5px 0 0 5px; -moz-border-radius: 5px 0 0 5px; -webkit-border-radius: 5px 0 0 5px; }
    #navigation ul ul li:first-child, #navigation ul ul li:first-child a  { border-radius: 0; -moz-border-radius: 0; -webkit-border-radius: 0; }
    #navigation ul.nav > li { border-right: 1px solid #e6e6e6; }
    #navigation ul.nav > li a:hover { background: #f6f6f6; }
    #navigation ul.nav > li:hover { background: #f6f6f6; }
    #navigation ul.nav ul { background: #f6f6f6; border: 1px solid #e6e6e6; left: -1px; }
    #navigation ul.nav ul ul { top: -1px; left: 100%; }
    #top .nav li.parent > a { position: relative; padding-right: 2em; }
    #top .nav li.parent > a:after { content: ""; display: block; border: .3em solid #ccc; border-color: #ccc transparent transparent transparent; position: absolute; top: 48%; right: .8751em; }
    #navigation .nav li ul li.parent a { padding-right: 0; }
    #navigation .nav li ul li.parent a:after { border-color: transparent transparent transparent #ccc; right: 0; top: 46%; }
    #navigation .nav li.parent > a { position: relative; padding-right: 2em; }
    #navigation .nav li.parent > a:after { content: ""; display: block; border: 0.3em solid #ccc; border-color: #ccc transparent transparent transparent; position: absolute; top: 48%; right: .8751em; }
    #navigation .nav li ul li.parent a { padding-right: 0; }
    #navigation .nav li ul li.parent a:after { border-color: transparent transparent transparent #ccc; right: 0.8751em; top: 46%; }
    #header h3.nav-toggle { display: none; } 
```

在 custom.css 中：

```
#navigation { width: 70%; margin: -70px auto 70px auto; }
#navigation ul.nav li.current_page_item a, #navigation ul.nav li.current_page_parent a, #navigation ul.nav li.current-menu-ancestor a, #navigation ul.nav li.current-cat a, #navigation ul.nav li.current-menu-item a { font-family: "LaPorteniadelaBocaRegular",serif; text-transform: capitalize; font-size: 16px; margin: -3px 0; }
#navigation ul.nav li.current_page_item a, #navigation ul.nav li.current_page_parent a, #navigation ul.nav li.current-menu-ancestor a, #navigation ul.nav li.current-cat a, #navigation ul.nav li.current-menu-item a { font-family: "LaPorteniadelaBocaRegular",serif; text-transform: capitalize; font-size: 16px; margin: -3px 0; } 
```

页面本身的一部分（由 WooTheme 的 Canvas 主题添加）：

```
ul.nav li a, #navigation ul.rss a { font:bold 14px/1em 'Josefin Sans', arial, sans-serif;color:#FFFFFF; }
#navigation ul.nav > li a:hover, #navigation ul.nav > li:hover, #navigation ul.nav li ul {background-color:#70c8c6!important}
#navigation ul.nav li ul  { border: 1px solid #FFFFFF; }
#navigation ul.nav > li  { border-right: 0px solid #dbdbdb; }#navigation ul.nav > li > ul  { left: 0; }
#navigation ul.nav li.current_page_item a, #navigation ul.nav li.current_page_parent a, #navigation ul.nav li.current-menu-ancestor a, #navigation ul.nav li.current-cat a, #navigation ul.nav li.current-menu-item a { background-color:transparent; }
#navigation ul.nav li.current_page_item a, #navigation ul.nav li.current_page_parent a, #navigation ul.nav li.current-menu-ancestor a, #navigation ul.nav li.current-cat a, #navigation ul.nav li.current-menu-item a { color:#ffffff; }
#navigation ul li:first-child, #navigation ul li:first-child a { border-radius:0px 0 0 0px; -moz-border-radius:0px 0 0 0px; -webkit-border-radius:0px 0 0 0px; }
#navigation {background:transparent;border-top:1px solid #FFFFFF;border-bottom:1px solid #FFFFFF;border-left:0px solid #dbdbdb;border-right:0px solid #dbdbdb;border-radius:0px; -moz-border-radius:0px; -webkit-border-radius:0px;} 
```

而且，HTML 本身：

```
<div id="navigation" class="col-full">
                <ul id="main-nav" class="nav fl"><li id="menu-item-17" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17"><a href="/weddings-events/">Weddings &#038; Events</a></li>
<li id="menu-item-41" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-24 current_page_item menu-item-41"><a href="/services/">Services</a></li>
<li id="menu-item-40" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-40"><a href="/about/">About</a></li>
<li id="menu-item-39" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-39"><a href="/praise/">Praise</a></li>
<li id="menu-item-38" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38"><a href="/press/">Press</a></li>
<li id="menu-item-37" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-37"><a href="/contact/">Contact</a></li>
<li id="menu-item-36" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-36"><a href="/blog/">Blog</a></li>
</ul>   
    </div> 
```

好的，我想我有所有的代码。基本上，我想要的是在#navigation 上有一个顶部和底部边框，然后让导航项本身自动居中，最后允许活动项（因为它是一种不同的字体，需要一个小的边距调整，以便它与其他导航项目“对齐”），当：悬停时，不会覆盖顶部/底部边框。

没有悬停效果，看起来“很好” - [http://content.screencast.com/users/WolfSnap/folders/Snagit/media/051b5d52-a234-4714-90e9-cd772db5b6dc/2012-07-07_15-09-37.png](http://content.screencast.com/users/WolfSnap/folders/Snagit/media/051b5d52-a234-4714-90e9-cd772db5b6dc/2012-07-07_15-09-37.png)

使用悬停效果，边框消失！- [http://content.screencast.com/users/WolfSnap/folders/Snagit/media/7b921116-f7fa-4e4f-b5c1-10fe865c409b/2012-07-07_15-10-57.png](http://content.screencast.com/users/WolfSnap/folders/Snagit/media/7b921116-f7fa-4e4f-b5c1-10fe865c409b/2012-07-07_15-10-57.png)

# magento - Magento 记录优惠券代码上使用的金额

> ID：11379060
> 
> 赞同：0
> 
> 时间：2012-07-07T22:13:52.237
> 
> 标签：magento

我很清楚找出优惠券代码的使用次数（销售规则/优惠券模型）。但是，我想知道如何拦截优惠券的使用并将其总计记录在表格中。

我试图通过覆盖 Mage_Checkout_OnepageController 的 successAction() 方法来做到这一点，但是如果我尝试使用

```
$couponCode = (string) Mage::getSingleton('checkout/cart')->getQuote()->getCouponCode(); 
```

$couponCode 原来是一个空白字符串。看起来，在调用 successAction 时，checkout/cart 单例已经被清空了。**我怎样才能拦截“下订单”按钮并仍然能够获得客户使用的优惠券代码？**

非常感谢所有帮助，我总是接受答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T08:50:03.913

在输入对象`successAction`的`_quote`属性时`checkout/cart`已经无效。

但是，您仍然可以通过以下方式在输入时获取您的数据`successAction`：

```
$oOrder = Mage::getModel('sales/order')
    ->load($this->getOnePage()->getCheckout()->getLastOrderId());

var_dump(
    $oOrder->getCouponCode(),
    $oOrder->getDiscountAmount(),
    $oOrder->getGrandTotal()
); 
```

但我建议改为为该`checkout_onepage_controller_success_action`事件创建一个观察者。这样，您根本不必覆盖任何内容。通常在 Magento 升级方面无需维护。

这种观察者的代码看起来像这样：

```
/**
 * checkout_onepage_controller_success_action event observer 
 *
 * @param object $oObserver
 * @return null
 */

public function checkoutOnepageControllerSuccessAction($oObserver)
{
    $aOrderId = $oObserver->getOrderIds();
    foreach ($aOrder as $iOrderId) {
        $oOrder = Mage::getModel('sales/order')->load($iOrderId);
        var_dump(
            $oOrder->getCouponCode(),
            $oOrder->getDiscountAmount(),
            $oOrder->getGrandTotal()
        );
    }
} 
```

# algorithm - 使用什么数据结构来处理任意大的整数？

> ID：11379072
> 
> 赞同：4
> 
> 时间：2012-07-07T22:14:47.130
> 
> 标签：algorithm, data-structures, big-o, largenumber

> **可能重复：**
> [我应该使用什么数据结构来创建自己的“BigInteger”类？](https://stackoverflow.com/questions/2224092/what-data-structure-should-i-use-to-create-my-own-biginteger-class)

出于纯粹的兴趣，我正在尝试设计一种可以容纳*任意大*整数的类型。我想支持四种基本操作`[+, -, *, /]`并优化这些操作的速度。

我在考虑某种双向链表和一个位标志来指示正值或负值。但我不太确定如何添加，例如，添加到大量不同尺寸。我是否应该走到两个数字的最后一个元素，然后返回（使用*第二个*反向指针指向前一个元素）。

```
123456789 //一个大数
+       123 //另一个不同大小的大数

```

**如果我可以拥有任意大的内存，那么这个任务的最佳数据结构是什么？**

对于算术运算的最坏情况复杂性，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T22:22:16.813

在这种情况下，通常人们会选择一个数组/向量，也许是 little-endian（最低有效字优先）。如果您实现就地操作，在增长数组时使用一个常数因子，那么重新分配的摊销复杂度仍然是 O(1)。

所有操作都应该在 O(n) 运行时间内可行，其中 n 是输入的大小。**编辑**：不，当然，乘法和除法需要更多，[这个答案](https://stackoverflow.com/a/794853/946850)说它至少是 O(N log N)。

只是出于好奇：为什么要重新实现轮子？[在这里](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/math/BigInteger.java)找到一个 Java 实现。C# 也有一个 .NET 4.0。虽然自己实现它可能是一个很好的练习（我记得自己做过一次），但如果您只需要该功能，那么它已经存在于许多计算环境中。

# php - 在我的网站上获得论坛/查询支持

> ID：11379078
> 
> 赞同：-1
> 
> 时间：2012-07-07T22:16:09.957
> 
> 标签：php, forum

我想在我的网站上有一个类似论坛的东西。我不想要任何复杂的东西，只是用户必须能够发布问题并且管理员（即我）可以回答它们..（如果它有树就好了喜欢结构，但即使没有它也可以）..所有用户都可以随时阅读论坛上的问题（很明显）..我不想放 phpbb3 或任何这样的现成工具..我只想简单一点（一些像[这样](http://www.codechef.com/JULY12/problems/LEBOBBLE)滚动到底部）..如何完成这件事..如果可能在php中请告诉..否则告诉其他选项..请帮帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T22:48:24.093

您可能可以在 WordPress 中执行类似的操作。（您的本地网络服务器需要运行 MySQL 和 PHP 才能实现此目的。）在最简单的级别上，您可以设置一个页面并允许用户对其发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:20:34.000

一个非常简单的方法就是拥有一个带有文本输入、文本区域和提交按钮的基本表单。然后让该人输入他们的姓名、问题并提交。确保使用 js 和/或 php 验证表单。然后使用名称和问题更新只有您可以访问的[受密码保护的页面。](https://stackoverflow.com/questions/286938/what-is-the-best-way-to-password-protect-folder-page-using-php-without-a-db-or-u)然后使用该页面的任何 cms（或者如果您有耐心，可以使用静态 html），您可以使用表单上方的新问题和答案更新首页。

不过，最好的方法是你可以调整某种“现成的”系统......

# javascript - 网站看起来在加载时放大

> ID：11379084
> 
> 赞同：3
> 
> 时间：2012-07-07T22:17:06.833
> 
> 标签：javascript, html, css

我正在为我的网球俱乐部建立一个网站：http: [//users.aber.ac.uk/dwd/aut/](http://users.aber.ac.uk/dwd/aut/)

谁能告诉我为什么它看起来放大并向右推？单击查看源代码以查看 HTML/CSS/Javascript，因为它在评论线程中发布了很多内容。

如果你缩小一次，这就是网站应该的样子。

有什么想法吗？担

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T22:20:46.353

您已将内容设置为高于平均宽度，并将其绝对定位在距页面左侧一定距离的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T22:22:32.693

它看起来不平衡，因为它没有正确居中对齐（如果您使用 Ctrl+- 快捷方式，它会变得更加明显）

如果您从中删除`position: absolute;`，`#wrapper`则显示正确居中（在 Chrome 中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T22:24:53.923

从正文 CSS 中删除字体大小，然后从您的#wrapper div中删除`position: absolute`和。`left: 12em`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T22:34:01.653

其他人指出了为什么会发生这种情况。不过，这里还有一些要点：

*   要真正使容器居中，`auto`请在边距 X/Y 轴上使用 的值。您目前正在执行此操作，但由于您还指定了绝对定位这一事实而受到破坏，因此请删除后者

*   顺便说一句，您当前的居中尝试可能会在您的屏幕上起作用，但在不同的分辨率下它不会，因为您实际上只是将页面向右碰撞任意数量的像素

*   虽然目标分辨率是每个网站设计师必须自己决定的，但标准是使页面在 1024 * 768 中工作。您的页面容器目前的宽度为 1024 像素，两侧还添加了 32 像素的填充。要么减少你的宽度，要么利用 CSS 属性`box-sizing`，这意味着任何指定的填充都会占用你元素的宽度，而不是添加到它

# html - 在带有白色bg图像的div上制作一个具有透明背景的CSS三角形？

> ID：11379085
> 
> 赞同：5
> 
> 时间：2012-07-07T22:17:18.227
> 
> 标签：html, css, css-shapes

好的，我正在尝试复制您在页面底部看到的效果，使用返回顶部按钮： http: [//www.ppp-templates.de/tilability/](http://www.ppp-templates.de/tilability/) - 在我们留下的内容区域之后连接的。

基本上他为此使用了背景图像，我想用 CSS 复制它并保持相同的效果。

我知道如何使用带边框的 CSS 创建三角形，但在我的情况下，我想使用透明的 bg 图像而不是颜色，所以我不能使用边框

我删除了背景图像并在整个 div 上使用了#FFF，所以它现在都是白色的......我创建了一个新的 div，在其中我添加了返回顶部按钮并添加了 background: transparent ，所以它是透明的，但是怎么做我通过 CSS 创建三角形？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-07T22:33:22.060

小提琴：

[http://jsfiddle.net/JaMH9/2/](http://jsfiddle.net/JaMH9/2/)

的HTML：

```
<div class="bar">
    <span class="home">^<br>Home, sweet home!</span>
</div>​ 
```

CSS：

```
.bar {
    position: relative;
    width: 90%;
    height: 30px;
    margin: 0 auto;
}

.home {
    position: absolute;
    top: 0px;
    left: 60%;
    width: 20%;
    text-align: center;
}

.bar:before, .bar:after {
    content:'';
    position: absolute;
    top: 0;
    height: 0;
    border-top: 30px solid white;
  -webkit-box-sizing: border-box;
     -moz-box-sizing: border-box;
      -ms-box-sizing: border-box;
          box-sizing: border-box;
}

.bar:before {
    left: 0;
    width: 70%;
    border-right: 30px solid transparent;
}

.bar:after {
    right:0;
    width: 30%;
    border-left: 30px solid transparent;
}
​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T20:22:23.063

Here's one way to make a triangle with fairly minimal markup and css:

HTML:

```
<div class="triangle"></div> 
```

CSS:

```
.triangle {
    width: 0; 
    height: 0; 
    border-left: 35px solid transparent;
    border-right: 35px solid transparent;
    border-bottom: 35px solid gray;
} 
```

[http://jsbin.com/iribib/21](http://jsbin.com/iribib/21)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-07T22:43:26.190

给你，[http://jsfiddle.net/pkUx7/1/](http://jsfiddle.net/pkUx7/1/)

**HTML**

```
<body>
    <div id = "footer"></div>
    <div id = "bottom-line-left"></div>
    <div id = "triangle"></div>
    <div id = "bottom-line-right"></div>
</body> 
```

**CSS**

```
body {
    background-color: purple;
}   

div {
    margin:0;
    padding:0;
    background-color: violet;
}

#footer {
    height: 100px;
}

#bottom-line-left, #bottom-line-right {
    display: inline-block;
    height: 20px;
}

#bottom-line-left {
    width: 61%;
}

#bottom-line-right {
    float: right;
    width: 37%;
}

#triangle {
    margin-left:-6px;
    margin-right: -4px;
    padding:0;
    display: inline-block;
    width: 0;
    height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-bottom: 20px solid purple;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-07T22:44:30.287

我只是把它放在一起，可能有更好的方法来实现这种效果。

HTML

```
<div class="div1">Lorem Ipsum</div>
<div class="div2"></div>
<div class="div3"></div>
<div class="div4"></div> 
```

CSS

```
body {
    background-color: gray;
    border: 20px solid gray;
}
.div1 {
    background-color: white;
    border: 20px solid white;
}
.div2 {
    float: right;
    border-top: 20px solid white;
    border-right: 20px solid white;
    border-left: 20px solid transparent;
}
.div3 {
    float: right;
    margin: 10px -20px;
    border-bottom: 20px solid white;
    border-right: 20px solid transparent;
    border-left: 20px solid transparent;
}
.div4 {
    border-top: 20px solid white;
    border-right: 20px solid transparent;
    margin-right: 40px;
} 
```

[在这里](http://jsfiddle.net/sdNTF/)看到它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-24T14:49:09.333

您可以使用矢量[路径](http://www.w3.org/Graphics/SVG/IG/resources/svgprimer.html#path)。例如，带有绿色边框的透明三角形：

```
<svg height="151" width="150">
    <path d="m0 150 h150 l -75 -150 z" fill="transparent" stroke="green" />
</svg> 
```

[在这里](http://jsfiddle.net/P62C7/)看到它。

# android - pthread 更新一个公共变量

> ID：11379087
> 
> 赞同：0
> 
> 时间：2012-07-07T22:17:30.350
> 
> 标签：android

在我的问题中，我使用 pthread_create() 创建了一个 pthread，比如 myThread。

它们都共享一个公共变量“done”，用于主线程告诉 myThread 停止从套接字读取。

在我的 pthread 中，我有一个循环：

```
// done is a common variable
while (!done && socket->read(&buffer) == OK) {
    // do something....
} 
```

有时，我想告诉 myThread 停止从套接字读取，所以我这样做：

```
done = true;
  void *test;
    pthread_join(myThread, &test); 
```

这会导致比赛条件吗？即 myThread 会不会看到我的主线程在读取调用阻塞之前更新“完成”的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T22:42:16.910

在一个线程中写入变量并在另一个线程中读取它需要同步（例如互斥锁）以避免竞争条件。

如果这是一个真正的套接字而不是一个奇怪的对象，请考虑调用`shutdown()`以断开连接并唤醒阻塞的线程，同时保持文件描述符有效，请参阅[Wake up thread blocked on accept() call](https://stackoverflow.com/questions/2486335/wake-up-thread-blocked-on-accept-call/2489066#2489066)。一旦读取失败，myThread 将锁定互斥体并检查 done 变量。

其他方法包括调用`poll()`套接字和用于传递关闭消息的管道。

# c - 在 C 中使用 getc() 函数的未知逻辑错误

> ID：11379088
> 
> 赞同：0
> 
> 时间：2012-07-07T22:17:39.867
> 
> 标签：c, file-io, getc

我正在尝试使用 getc() 函数将一个文件的内容复制到另一个文件中。但是我犯了一个未知的逻辑错误，因为以下程序的输出是一堆垃圾。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main()
{
    FILE *f; 
    FILE *write;
    f = fopen("nums.csv","r");
    write = fopen("numsWrite.dat","w");

    char tempChar;

    int i;
    for(i = 0; (tempChar = getc(f)) != EOF; i++)
    {
        tempChar = getc(f);
        fprintf(write,"%c",tempChar);
    }
    fprintf(write,"\n");

    fclose(f);
    fclose(write);

    return 0;
} 
```

nums.csv 的内容是：

```
1256,2548,35151,15,56,38 
```

程序返回：

```
2624,55,55,8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T22:31:38.967

您的代码有几个问题。

`int main()`应该是`int main(void)`；这是一个小问题，几乎可以肯定不会伤害任何东西，但后者更正确。

您不检查`fopen()`调用是否成功。

你`i`用来计算你读到的字符，但你从来没有用它的价值做任何事情。

该`getc()`函数返回 type 的结果`int`，因此您*绝对*应该创建`tempChar`一个`int`. 这样做的原因是它可以返回有效的字符值（将适合对象`char`）*或*`EOF`通常为`-1`. 通过将结果存储`getc()`在`char`对象中，您将永远看不到`EOF`（如果 plain`char`是无符号的），或者您将无法区分`EOF`有效的输入字符。

在对 Razvan 的回答发表评论时，您说您将测试更改为`tempChar != EOF`. 除了我上面解释的问题外，循环的第一次迭代`tempChar`还没有初始化，比较的结果是不可预测的。

编写输入循环的常规方法`getc()`是：

```
int c;
while ((c = getc(f)) != EOF) {
    /* do something with c */
} 
```

就风格而言，`write`不是一个很好的名字`FILE*`。一方面，有一个同名的函数（由 POSIX 定义，而不是由 C 定义，但它仍然可能令人困惑）。您可能会调用`FILE*`对象`in`而`out`不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:19:59.293

您调用 getc 两次：一次在 for 条件中，一次在 for 正文中。删除这一行： tempChar = getc(f); 然后再试一次。

# php - writeImage() 时出现页面错误

> ID：11379091
> 
> 赞同：1
> 
> 时间：2012-07-07T22:18:42.197
> 
> 标签：php, imagemagick, imagick

我有脚本可以用[Imagick](http://php.net/manual/en/class.imagick.php)调整我的照片大小，然后保存。这是制作缩略图的代码`thiumbnailImage();`

```
<?php
  header('Content-type: image/jpeg');
  $image = new Imagick('test.jpg');
  $image->thumbnailImage(600, 0);
  echo $image;
?> 
```

示例->[调整大小示例只是 thumbnailImage();](http://dugg.cz/test.php) .

这行得通。但是当我想用`writeImage();`.

```
<?php
  header('Content-type: image/jpeg');
  $image = new Imagick('test.jpg');
  $image->readImage('test.jpg');
  $image->thumbnailImage(600, 0);
  $image->writeImage('test_resized.jpg');
?> 
```

它显示服务器错误。示例 ->[使用 writeImage() 调整大小的示例；](http://dugg.cz/test2.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T22:26:55.217

看来您可能没有对该目录的写入权限。将权限（CHMOD）设置为 777。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T22:31:29.720

问题解决了。我没有权限 writeImage();

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T22:21:56.493

要调试错误，请尝试以下代码：

```
<?php
  error_reporting(E_ALL);
  ini_set('display_errors', 1);
  // header('Content-type: image/jpeg');  // note this is commented
  $image = new Imagick('test.jpg');
  $image->readImage('test.jpg');
  $image->thumbnailImage(600, 0);
  $image->writeImage('test_resized.jpg');
?> 
```

注释掉`header`调用的原因是浏览器不会尝试将页面显示为图像并阻止您查看源代码或查看错误消息。

# jquery - 测试是否没有选中单选按钮

> ID：11379098
> 
> 赞同：0
> 
> 时间：2012-07-07T22:19:31.890
> 
> 标签：jquery

我想检查是否使用 jquery 检查了一个框。如果未选择任何选项，我的目标是防止表单隐藏。

```
$("#submit").click(function(){  
var opt = $('input[name=value]:checked').attr('value');
if(opt!='undefined'){
$.ajax({
type: "POST",
url: url,
data: 'option='+opt,
cache: false,
success: function(html)
{   
 alert(opt);

}
     });
}       
return false;
}); 
```

html

```
<form id="form" method="post" action="">
<input type="radio" name="value" value="1" />1<br>
<input type="radio" name="value" value="2" />2<br>
<input type="radio" name="value" value="3" />3<br>
<input type="radio" name="value" value="4" />3<br>
<input id="submit" type="submit" value="submit"/>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T22:22:49.697

我建议`$('input[name=value]:checked').length`在做任何其他事情之前先检查一下。) 如果没有检查任何元素，它将等于 0。换句话说，替换

```
var opt = $('input[name=value]:checked').attr('value'); 
```

...和

```
var $checkedElement = $('input[name=value]:checked');
if (! $checkedElement.length) {
   // no option was selected, return false or alert
} 
var opt = $checkedElement.val(); 
```

但是，您的原始代码非常接近，只有一个错误：您应该比较`opt`( `undefined`a *variable* )，而不是`'undefined'`(a string)。

```
if (opt != undefined) { ... do the thing .. } 
```

将`opt != 'undefined'`实际上总是评估为`false`，因为您的 HTML 中没有单选按钮具有价值`'undefined'`。`false`再次考虑和之间的区别`'false'`- 后者实际上是一个真值（尽管不等于`true`）；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T22:25:00.710

```
$("checkbox").is(":checked"); 
```

这返回真或假。是否检查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T22:26:54.907

**演示** [http://jsfiddle.net/ZKC2z/](http://jsfiddle.net/ZKC2z/)

好读：[http ://api.jquery.com/checked-selector/](http://api.jquery.com/checked-selector/)

还有一个`:not`选择器

`.is(":checked")`将为您解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T22:30:36.747

如果没有检查使用`.is()`

```
if ( ! $("input").is(':checked') ) 
```

只是`!`在之前添加，或使用`.not()`

```
if ( ! $("input").not(':checked') ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T22:43:23.170

希望这会有所帮助...

```
$("#submit").click(function(){  
var opt = $('input[name=value]:checked').attr('value');
if(opt){
 alert(opt + "- ok, posting!");
 return true;
} else {
 alert('pick something first');
 return false;
}
}); 
```

# java - Java HashSet 是否作用于字符串引用或值？

> ID：11379103
> 
> 赞同：0
> 
> 时间：2012-07-07T22:20:04.883
> 
> 标签：java, string, reference, hashset

我有以下。

```
HashSet<String> set1 = new HashSet<String>();
HashSet<String> set2 = new HashSet<String>();
String strB1 = "B";
String strB2 = "B";

set1.add( "A" );
set1.add( strB1 );
set2.add( strB2 );

set1.removeAll( set2 ); 
```

set1 最终会只包含“A”，还是也包含“B”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T22:41:19.930

[`HashSet`](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)使用对象*相等*( [`Object.equals`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29))，而不是*标识*（“引用相等”）。

此外，`HashSet`用于`Object.hashCode`散列函数。

不幸的是，要“知道”这一点，需要稍微“阅读”文档并了解哈希是如何实现的。从文档中`HashSet.contains`：

> 如果此集合包含指定的元素，则返回 true。更正式地说，当且仅当此集合包含满足 (o==null ? e==null : **o.equals(e)** ) 的元素 e 时才返回 true。

更一般的[`Set`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)文档说：

> 不包含重复元素的集合。更正式地说，集合不包含**e1.equals(e2)**的元素对 e1 和 e2 ，并且最多包含一个空元素。正如它的名字所暗示的，这个接口模拟了数学集合抽象。

除了*极少数*例外，例如[`IdentityHashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/IdentityHashMap.html)，Java 中的数据结构在*相等性*而不是*身份*上工作。

因此，为了回答这个问题，HashSet 对“字符串值”起作用。

（由于字符串实习，此示例可能特别具有误导性，但这不会改变上述内容，因为身份意味着相等，即使反之亦然。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:25:35.743

Java 中的字符串被特殊处理。出于优化目的，任何字符串文字都会被缓存和重用。因此 strB1 和 strB2 将持有相同的引用，因此结果 set1 应该只在代码执行后包含“A”。

至少根据 Java 文档和 SCJP 培训书籍。

但是正如评论中发布的那样，尝试它比在这里发布要快......

# ruby - 对 gems/plugins 以及如何向 Rails 项目添加功能感到困惑

> ID：11379105
> 
> 赞同：1
> 
> 时间：2012-07-07T22:20:14.863
> 
> 标签：ruby, ruby-on-rails-3, rubygems, ruby-on-rails-plugins

因此，我希望对 Rails 项目（https://github.com/fatfreecrm/fat_free_crm）进行一些更改。

到目前为止，添加的功能来自为其编写的插件。但似乎插件正在贬值宝石。那么插件是否应该被重新编写为宝石。我想要的只是为该应用程序添加特定功能（如供应商插件）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T02:29:45.523

插件和 Gem 具有相同的功能。Gems 更擅长处理依赖关系。它们也更容易共享和部署。您可以查看此问题以 [获取有关 gems/plugins 的更多信息](https://stackoverflow.com/questions/4252319/whats-the-difference-between-gem-and-plugin)

如果您正在寻找有关如何构建 gem 的资源，您可以查看[此 railscast](http://railscasts.com/episodes/245-new-gem-with-bundler)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:47:06.697

从插件更改为 Gems 只需要一点点返工。

有什么具体的你想要改变的吗？

# macos - NSTableView – 在编辑结束后选择点击的行，点击不同的行

> ID：11379106
> 
> 赞同：4
> 
> 时间：2012-07-07T22:20:22.117
> 
> 标签：macos, cocoa, nstableview

我有一个`NSTableView`没有绑定的填充。

在 datasource 方法`tableView:objectValueForTableColumn:row:`中，我重新排序我的数据并告诉表视图在将编辑提交到模型后重新加载，以便在编辑后恢复正确的排序顺序。

但是，如果用户通过单击不同的行来结束编辑，并且由于刚刚结束的编辑而导致排序顺序发生了变化，则可能会发生用户打算选择的行在他单击后刚刚移动的情况。因此，不是该行，而是选择了现在位于该位置的另一行。

我尝试了这些方法的各种组合`NSTableViewDelegate`，但找不到调整选择的解决方案，即当编辑结束后重新排序时，刚刚移开的行被选中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:14:47.900

我会用这个：

我建议`sort`您在 NSTableView 委托中使用您的数据，`setObjectValue:`而不是`objectValueForTableColumn:`

并更改 NSTableView 委托中的选择`selectionIndexesForProposedSelection:`

此解决方案管理单个选择，如果您希望它管理单个和多个选择，我会更改我的答案。如果用户双击，它不起作用，因为它将选择更改为第二次单击。

你需要这些变量：

```
int originalRowIndex;
NSUInteger newRowIndex; 
```

我初始化这个变量：`originalRowIndex = -1;`

```
- (void)tableView:(NSTableView *)aTable setObjectValue:(id)anObject forTableColumn:(NSTableColumn *)aColumn row:(int)rowIndex {
    id objectAtRow = [myMutableArray objectAtIndex:rowIndex];
    NSString *columnKey = [aColumn identifier];
    [objectAtRow setValue:anObject forKey:columnKey];

    originalRowIndex = rowIndex; // get the original index
    [myMutableArray sortUsingDescriptors:[aTable sortDescriptors]]; // re-sort the mutable array
    newRowIndex = [myMutableArray indexOfObjectIdenticalTo:objectAtRow]; // get the new index
    if (newRowIndex == originalRowIndex) originalRowIndex = -1; // same position
}
// not called on empty selection
- (NSIndexSet *)tableView:(NSTableView *)tableView selectionIndexesForProposedSelection:(NSIndexSet *)proposedSelectionIndexes {
    int oIndex = originalRowIndex;
    originalRowIndex = -1;
    if (oIndex > -1 && [proposedSelectionIndexes count] > 1) { // if oIndex = -1 or multi selection , do nothing
        int i = [proposedSelectionIndexes firstIndex]; 
        if (oIndex < newRowIndex) { 
            if (i > oIndex && i <= newRowIndex) return [NSIndexSet indexSetWithIndex:(i - 1)];//shift the row index
        } else {
            if (i < oIndex && i >= newRowIndex) return [NSIndexSet indexSetWithIndex:(i + 1)];//shift the row index
        } //else doesn't change the selection, this index is out of range (originalIndex...newIndex)
    }
    return proposedSelectionIndexes;// doesn't change the selection
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T22:33:47.070

我总是以艰难的方式做到这一点：在执行需要恢复选择的操作之前，我会记住当前的选择——不是通过行索引，而是通过我可以在数据中找到的东西。通常我有一个字典数组，所以我只记得字典指针。

在 tableview 上完成了我需要做的任何事情之后，我只是再次浏览数据，寻找我的对象以找到新的索引......

# iphone - 在 iPhone 应用程序中为 Facebook 业务页面显示 Facebook 新闻提要

> ID：11379113
> 
> 赞同：1
> 
> 时间：2012-07-07T22:21:32.097
> 
> 标签：iphone, facebook-graph-api, native, feed, access-token

背景：

有一个公开的 Facebook 业务页面，我可以在我的网络浏览器中查看整个页面和 Facebook 新闻提要，而无需实际登录我的 Facebook 帐户。所以没有会话或身份验证信息可以在我的浏览器中显示此网页。

我想要的是：

现在，我想在我的原生 iPhone 应用程序中将这个 Facebook 业务页面的 Facebook 新闻提要显示为滚动 UITableView。我该怎么做呢？

问题：

当我访问 Graph API 资源管理器 ( [https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer) ) 时，我可以看到与 Facebook 业务页面（即百事可乐）相关的相册和照片，但如果我尝试访问新闻提要，就像这样...... [https://graph.facebook.com/Pepsi/feed](https://graph.facebook.com/Pepsi/feed) ...它返回一个错误，指出“请求此资源需要访问令牌。”

我的问题：

如果 Pepsi Facebook 新闻源无需从网络浏览器登录到我的 Facebook 帐户即可公开查看，那么如何在没有访问令牌的本地 iPhone 应用程序中显示 Pepsi Facebook 新闻源？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T02:54:59.267

引入令牌过期后，我遇到了同样的问题。但随后出现了 RSS 提要的想法。

访问[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

将获取字段中的 ID 替换为您的页面名称。因此获取字段链接应如下所示：

```
https://graph.facebook.com/Pepsi 
```

提交它，作为回报，您将在下面的显示中获得一堆 json。您将需要 id 的第一个信息。这是百事可乐页面的 56381779049。

现在将 id 放在下面的链接中以获取您想要的提要。

```
https://www.facebook.com/feeds/page.php?id={Id we just got}&format={json|rss20} 
```

所以我们的 json feed 的 Pepsi 页面看起来像：

```
http://www.facebook.com/feeds/page.php?id=56381779049&format=json 
```

现在你只需要在任何地方解析和查看。

您可以对带有链接的 twitter 提要进行类似操作：

[http://api.twitter.com/1/statuses/user_timeline.json?screen_name=anontech&include_rts=0](http://api.twitter.com/1/statuses/user_timeline.json?screen_name=anontech&include_rts=0)

转发的rts。

**更新：**从设备获取数据时遇到一些问题。经过这个小改动后，它在 android 和 iOS 上都能完美运行。解决方法：将接受标头更改为`*/*`或 application/json，因为 facebook 将响应标头作为 application/json 发送。

> 标头：'接受：应用程序/json'；

详细信息来自：[cURL 和 Facebook 问题](https://stackoverflow.com/questions/10755695/curl-and-facebook-problems)

# java - 你在子类中调用 super.finalize() 吗？

> ID：11379115
> 
> 赞同：7
> 
> 时间：2012-07-07T22:21:54.877
> 
> 标签：java, inheritance, garbage-collection

我读到（某处），`finalize()`当子类被垃圾收集时，不能保证调用父类，这是否意味着大多数开发人员`finalize()`在子类中重写并调用`super.finalize()`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-07T22:31:28.750

不会为超类自动调用 Finalize。因此，如果您覆盖 finalize，确保清理超类的正确方法是

```
protected void finalize() {
    try {
       // do subclass cleanup
    }
    finally {
       super.finalize();
    }
} 
```

请参阅此参考文章[http://www.ibm.com/developerworks/java/library/j-jtp06294/index.html](http://www.ibm.com/developerworks/java/library/j-jtp06294/index.html)

值得注意的是，终结器不是非常可预测的，您无法控制它们是否/何时运行。在 finalize 方法中不应该做任何关键的事情。一般来说，最好只对你的类进行显式清理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T22:33:23.093

最好避免依赖 finalize 来清理任何非 Java 资源（不保证 finalize 调用）。如果可能，请使用 try with resources（如果使用 JDK7）或 try finally 子句在可能的其他选项中清理资源。如果要使用 finalize，可以将 super.finalize 放在 try finally 块中。明智的做法是不要依赖 finalize 来清理资源。

```
// don't make it public!  
protected void finalize() throws Throwable
{  
   try  
   {  
     // custom finalization here  
   }  
   finally  
   {  
     super.finalize();  
   }  
} 
```

如果这个想法是清理资源，那么检查幻影引用是明智的——如果一个对象既不是强/弱/软可访问的，又是最终确定的，并且至少有一个幻像引用（即对象已完成但尚未回收）。

# python - 如何使用 wxPython 结束旋转事件

> ID：11379119
> 
> 赞同：0
> 
> 时间：2012-07-07T22:22:18.450
> 
> 标签：python, events, wxpython, spinner, wxwidgets

我的窗口上有一个 SpinCtrl，并且只想在鼠标向上或箭头键向上（旋转结束）时处理旋转事件。因为没有这样的事件，所以我想使用鼠标事件。但是，如果我绑定`EVT_LEFT_DOWN`and `EVT_LEFT_UP`，`EVT_SPIN`则不再发送并且控件不执行任何操作。

如何使用 SpinCtrl 感知旋转事件的结束？是否可以调用默认事件处理程序`EVT_LEFT_DOWN`和其他事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:47:44.490

谁有兴趣：我有一个解决方案：

```
class SpinEndEventManager(object):
    def __init__(self):
        self._controls = []
        self._event_handlers = []
        self._has_spinned = False

    def add(self, control, event_handler):
        self._controls.append(control)
        self._event_handlers.append(event_handler)
        control.Bind(wx.EVT_SPINCTRL, self._on_event)
        control.Bind(wx.EVT_LEFT_UP, self._on_event)
        control.Bind(wx.EVT_KEY_DOWN, self._on_event)
        control.Bind(wx.EVT_KEY_UP, self._on_event)

    def _on_event(self, event):
        is_spin_end_event = False
        event_type = event.GetEventType()
        control = event.GetEventObject()
        if event_type == wx.wxEVT_COMMAND_SPINCTRL_UPDATED:
            self._has_spinned = True
        elif event_type == wx.wxEVT_LEFT_UP:
            if self._has_spinned:
                is_spin_end_event = True
            event.Skip()
        elif event_type == wx.wxEVT_KEY_DOWN:
            key = event.GetKeyCode()
            old_value = control.GetValue()
            if key == wx.WXK_UP:
                value = old_value + 1
            elif key == wx.WXK_DOWN:
                value = old_value - 1
            control.SetValue(value)
            value = control.GetValue()
            if value != old_value:
                self._has_spinned = True
            if key == wx.WXK_DOWN:
                value_string_length = len(str(value))
                control.SetSelection(value_length, value_string_length)
        elif event_type == wx.wxEVT_KEY_UP:
            if self._has_spinned:
                is_spin_end_event = True
        if is_spin_end_event:
            self._has_spinned = False
            index = self._controls.index(control)
            self._event_handlers[index](event) 
```

# git - 将 git 子目录变成 git 存储库？

> ID：11379123
> 
> 赞同：2
> 
> 时间：2012-07-07T22:22:34.783
> 
> 标签：git, heroku

我有一个存储库，其中包含每个组件的目录，例如 Android 与 iPhone 与 webapp 等。我想将 webapp 推送到 Heroku，但我不想修改我的目录结构。

本质上，我想做的只是将我的树的一部分推到 Heroku。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:29:33.990

因此，组织应用程序的理想方式是通过 git 子模块（参见：[https](https://devcenter.heroku.com/articles/git) ://devcenter.heroku.com/articles/git ）。这样，您可以将主应用程序的结构如下：

```
proj
├── android
└── iphone 
```

每个地方`android`都有`iphone`自己的 Git 存储库，并且只是 git 子模块。

如果你想很好地介绍 Git 子模块，你应该看看这个： http: [//git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

# mysql - 从 x 表中选择所有不在 y 表的 column_foo 中的 ID

> ID：11379125
> 
> 赞同：0
> 
> 时间：2012-07-07T22:22:38.590
> 
> 标签：mysql, sql

如何从 table_x 中选择 column_foo 中表 y 的任何行中都不存在的所有 ID？

我正在努力使用单个 SQL 查询来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T22:26:59.547

```
SELECT id FROM x
  WHERE NOT EXISTS (SELECT * FROM y WHERE foo = id) 
```

或者

```
SELECT id FROM x
  WHERE id NOT IN (SELECT foo FROM y) 
```

或者，如果`y.foo`不是可为空的列，您甚至可以执行以下操作：

```
SELECT x.id FROM x
  LEFT JOIN y ON x.id = y.foo
  WHERE y.foo IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T22:26:12.767

也许您可以执行以下操作：

```
SELECT id FROM table_x WHERE id NOT IN (SELECT column_foo FROM table_y); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T22:26:05.243

您将使用 LEFT JOIN。更多解释和例子在这里。

[视觉连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T07:34:59.067

如果可以的话，最好避免子查询。An`INNER JOIN`将仅返回满足连接条件的行。

```
SELECT DISTINCT
    x.id
FROM
    table_x x
    INNER JOIN table_y y ON (x.id = y.id_column_in_y) 
```

# iphone - 我是否必须注册下载我的应用程序的每个设备令牌？

> ID：11379130
> 
> 赞同：3
> 
> 时间：2012-07-07T22:23:05.220
> 
> 标签：iphone, ios, push-notification

我正在使用苹果通知服务，所以在这个功能中我必须注册下载我的应用程序的每个设备令牌，或者换句话说，当我想发送通知时，我必须发送它的地址。

```
-(void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error{

NSString *str = [NSString stringWithFormat:@"Error: %@",[error localizedDescription]];
NSLog(@"%@",str);} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T16:27:05.577

如果您不想使用 Urban Airship 等服务。您将创建一个数据库（可能是 MySQL），然后使用 PHP 等语言创建一个文件，该文件允许您发布设备令牌，然后将其放入数据库中。

在 PHP 中，这看起来像

```
<?php
$connection = mysql_connect("localhost","username","password");
if (!$connection){
  die('Error: ' . mysql_error());
}

mysql_select_db("my_database", $connection);

mysql_query("INSERT INTO tokens (token)
VALUES ('$_POST[token]')");

mysql_close($connection);
?> 
```

在 iOS 端，您将使用以下代码：

```
-(void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken {
    NSString *urlString;
    NSURL *url;
    NSMutableURLRequest *request;
    NSString *postString;

    urlString = @"http://yoururl.com/apns/registerDevice";
    url = [NSURL URLWithString:urlString];
    request = [NSMutableURLRequest requestWithURL:url];
    postString = [NSString stringWithFormat:@"token=%@", [[NSString alloc] initWithData:deviceToken encoding:NSUTF8StringEncoding];];
    [request setHTTPMethod:@"POST"];
    [request setValue:[NSString stringWithFormat:@"%d", [postString length]] forHTTPHeaderField:@"Content-length"];
    [request setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]];

    (void)[[NSURLConnection alloc] initWithRequest:request delegate:self];
    //Casting this to void makes the warning of unused expression go away.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T22:31:27.217

是的，你应该得到每个设备令牌，但是如果你想保持简单，我强烈建议你使用 Urban Airship 来推送通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:00:05.767

可能有点晚了，但要小心，**永远不要**放

```
$_POST['ivar'] 
```

在 SQL 查询字符串中，这是联系 SQL 注入的更好方法！请使用准备查询

# configuration - 我应该在 Heroku 上的哪里存储敏感文件？

> ID：11379136
> 
> 赞同：11
> 
> 时间：2012-07-07T22:23:47.693
> 
> 标签：configuration, heroku, certificate, environment-variables

这个问题可能有一个我没有想到的明显答案。我知道像安全凭证这样的敏感数据最好通过 Heroku 的 CLI 和`heroku config:add`. 但是敏感*文件*，比如证书呢？具体来说，我想知道我应该如何处理我的[Apple 推送通知](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)(APN) 证书。

我正在尝试自己实现这一点，因为[对这个问题的沉默](https://stackoverflow.com/q/11377909/105570)让我相信那里没有很多很好的选择（而且[Urban Airship](http://urbanairship.com/)看起来太贵了）。通过查看[APN on Rails](https://github.com/PRX/apn_on_rails)，我发现它们实际上将证书存储在数据库中。那有意义吗？或者将证书的内容实际存储在环境变量中是否有意义（不确定这是否可能）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-20T10:43:15.840

您可以在环境变量中设置整个证书。

请参阅此答案： [Heroku 中的多行配置变量](https://stackoverflow.com/questions/6942600/multi-line-config-variables-in-heroku)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T01:56:03.777

您可能会考虑将证书存储在 S3 中，每个进程可以在启动时下载该证书并将其存储在内存（或 memcached/redis）中以供后续访问。

如果您真的有这种感觉，您可以考虑创建自己的[buildpack](https://devcenter.heroku.com/categories/buildpacks)，它会在 slug 编译时下载证书并使其在 slug 文件系统上可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-22T07:11:46.640

对我来说，最好的解决方案是加密证书中的私钥并将用于解密的密码存储在 Herokus 环境变量中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-04-18T23:57:28.130

我建议创建一个包含证书的单独存储库，只有您的内部开发人员可以访问该存储库。

要在本地执行此操作：

> git clone myproject myprojectwithcerts
> 
> cd myprojectwithcerts
> 
> git 添加 heroku 用户名@herokuapp.com/myproject

然后你可以将你的证书添加到“myprojectwithcerts”中，提交它们，然后推送到 Heroku。

> git push heroku 大师

当 myproject 发生变化时

> git pull 起源大师

只要只有您的开发人员核心圈子可以访问 Heroku 进行推/拉，只有他们可以访问您的敏感文件。

# uiview - 将多个 UITapGestureRecognizers 添加到单个视图（Cocos2d）

> ID：11379138
> 
> 赞同：11
> 
> 时间：2012-07-07T22:24:05.560
> 
> 标签：uiview, cocos2d-iphone, uitapgesturerecognizer

我在 onEnter 方法中添加以下代码。

```
doubleTapRecognizer_ = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleDoubleTap:)];
    doubleTapRecognizer_.numberOfTapsRequired = 2;
    doubleTapRecognizer_.cancelsTouchesInView = NO;
    [[[CCDirector sharedDirector] view] addGestureRecognizer:doubleTapRecognizer_]; 
```

我有这个类的多个实例，但唯一一个调用它的选择器是添加的最后一个实例。UIView[类参考](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/gestureRecognizers)让我相信可以将多个 UIGestureRecognizer 添加到单个视图中。属性“gestureRecognizers”返回一个 NSArray。

事实上，我已经有一个 UIPanGestureRecognizer 使用另一个类的相同视图。所以我至少有两个 UIGestureRecognizers 可以同时工作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-08T11:58:11.813

您可以将多个手势识别器添加到同一个视图。您不能（轻松）做的是将相同手势识别器类型（平移、滑动、双击等）的多个实例添加到同一视图中。

为什么？

因为一旦第一个手势识别器识别出手势（在这种情况下双击），它就会取消所有触摸事件。因此，其余的手势识别器永远不会完成识别，也永远不会触发它们的事件。

您不需要多个相同类型的手势识别器。在您的情况下，一旦您收到双击事件，您就可以向正确的对象发出信号，表明它已被双击。例如，使用识别器的位置和其他属性来查找被双击的精灵，然后让它做它需要做的任何事情。

出于这个原因，让手势被场景层次结构中的更高级别节点（即 UI 层）识别是很好的设计，然后将事件传递给适当的节点，或者干脆忽略它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-03-06T08:41:23.400

为了在同一个视图中添加多个手势`UIGestureRecognizer`，您需要设置`delegate`添加到视图中的手势识别器的属性，并在委托中实现以下方法：

```
func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldRecognizeSimultaneouslyWith otherGestureRecognizer: UIGestureRecognizer) -> Bool {
    return true
} 
```

通过上述方式，您可以将多个手势识别器添加到同一个视图中，无论手势识别器是否属于同一类型。

例如，您可以将两个添加`UITapGestureRecognizer`到同一个视图中，并且将调用两个点击手势识别器的回调。最后添加的回调将首先被调用。

希望这可以帮助。

# php - PHP SPL，值得使用还是原始数组函数更好？

> ID：11379140
> 
> 赞同：23
> 
> 时间：2012-07-07T22:24:31.717
> 
> 标签：php, spl

我正在检查标准 PHP 库 (SPL)。以前只用过数组，现在才发现PHP有这么多标准类。但是说明书上并没有说推荐使用与否。例如，他们明确建议使用`foreach`构造来迭代数组，因为它更快。那么这个图书馆呢？如果我需要在对象中存储一些数据，我应该针对我的情况使用一些具体的 SPL 类还是使用标准数组更好？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-08T05:22:29.700

你的问题有很多。您应该使用 SPL 数据结构吗？这取决于。

PHP 数组可以用作映射、链表或数组。您实际上很少需要同时充当所有这些事物的单一数据类型*，*因此 SPL 数据类型的重点本质并没有那么限制。事实上，大多数“局外人”（和一些“局内人”）会认为 PHP 的数组是一种讽刺。

PHP 数组的主要缺点是它使用大量内存。即使你只想要一个固定的、顺序的、索引的数组，你也会有将事物链接在一起和存储键的开销。尽管如此，如果您主要是附加数据并对其进行迭代，PHP 的数组通常比对象类型快得多，这可能是因为函数调用会减慢速度。

通常，我看不到很多人使用 SPL 数据结构。大多数情况下，我认为，因为在 PHP 和 Web 应用程序的上下文中，它们通常不太适用。您通常处理小型数组，其中内置运算符和数组函数的便利性超过了 SPL 类型的任何优势。

那说：

*   如果您发现自己处于使用数组作为链表的情况（在中间插入/删除），请尝试使用 SPL 双链表之一。

*   如果您发现自己使用大型索引数组，请尝试使用`SPLFixedArray`. 它们肯定会消耗更少的内存。

*   如果您需要以对象为键的映射，请使用 a `SplObjectStorage`（因为 PHP 数组不适用于对象键）。

*   如果您想在数组中保持数据有序，请尝试其中一个堆。

Benchmark the native array vs the SPL object and use whichever one has the memory + speed + simplicity tradeoff that suits you.

# google-app-engine - Google 的 UserService 是如何发挥它的魔力的？

> ID：11379142
> 
> 赞同：0
> 
> 时间：2012-07-07T22:24:37.060
> 
> 标签：google-app-engine, openid

我有一个托管在 apppot 上的应用程序，并且身份验证设置为联合登录。我的应用程序使用 Google 的 UserService 来检查用户是否已登录，并在必要时将他们重定向到登录页面，用户可以在其中选择他们的 OpenId 提供程序，然后登录。一切正常。

在用户选择 Google 作为其 OpenId 提供者的情况下，如果他们随后打开一个新选项卡并转到 gmail（例如），则 gmail 知道他们是谁 - 无需登录/身份验证。

在用户选择雅虎作为他们的 OpenId 提供者的情况下，如果他们随后在浏览器中打开一个新选项卡并转到 MyYahoo - 雅虎知道他们是谁 - 不需要登录/身份验证。

我对这种行为很好 - 我只是不知道如何登录我的应用程序让雅虎知道用户已经过身份验证。我不认为它是 ACSID cookie，因为我删除了它并且一切仍然有效。

这可能很简单，非常感谢您花时间启发我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:17:15.647

这不是 App Engine 正在做的事情 - 它是 OpenID 的一部分。当您选择 OpenID 提供商时，您会被发送到该提供商，该提供商会登录以对您进行身份验证，然后再将您发送回应用程序。在此过程中，OpenID 提供者也会让您使用它们（例如，Yahoo 或 GMail）登录。

# iphone - 在我的 iPhone 上使用 PhotoPickerPlus 时相机立即崩溃

> ID：11379144
> 
> 赞同：0
> 
> 时间：2012-07-07T22:24:45.357
> 
> 标签：iphone, ios, camera

我正在使用 PhotoPickerPlus 从相机中获取照片，当使用从库中获取照片时一切正常，但是当从相机中获取照片时，当相机屏幕打开时它会崩溃。

这是我用来启动此调用的代码：

```
-(void)pickPhotoAction{

PhotoPickerPlus *temp = [[PhotoPickerPlus alloc] init];
[temp setDelegate:self];
[temp setModalPresentationStyle:UIModalPresentationCurrentContext];

switch ([[NSUserDefaults standardUserDefaults] integerForKey:kSourceChosen]) {
    case SourceTypeCamera:
        [temp setSourceType:PhotoPickerPlusSourceTypeCamera]; // Open Camera
        break;
    case SourceTypeLibrary:
        [temp setSourceType:PhotoPickerPlusSourceTypeLibrary]; // Open select from sources directly
        break;

    default:
        break;
}

[self presentViewController:temp animated:YES completion:^(void){
    [temp release]; //[temp release];
}];

} 
```

当 kSourceChosen 只是我保存以了解用户按下了哪个按钮并稍后在流程中返回该按钮时。

我必须说，在某些时候它已经奏效了，但我不记得改变任何与此相关的东西......

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T23:44:04.823

当相机和照片选择器打开时，它会产生巨大的内存命中。如果您的代码以前可以工作，现在它是零星的，只是为了好玩，请尝试关闭一堆应用程序，然后重新启动手机，看看它是否保持运行.. 如果是这样，那么您可以确认它是一个内存相关问题..并进一步调查，放置一些断点

```
- (void)didReceiveMemoryWarning { 
```

}

..如果确实是内存相关问题，请在打开相机之前尝试释放内存

不确定这是否会引导您走上正确的道路，但这是值得尝试的。

# iphone - iOS 5，ARC：UIAlertView 在 @catch 块中不起作用

> ID：11379150
> 
> 赞同：1
> 
> 时间：2012-07-07T22:25:41.937
> 
> 标签：iphone, ios, cocoa-touch, uialertview

```
-(IBAction)showCountryInfo:(id)sender
{
@try 
{
    CountryProperties *countryProperties=[self.storyboard instantiateViewControllerWithIdentifier:@"Culture"];
    countryProperties.countryID=self.countryID;
    countryProperties.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    [self.navigationController presentModalViewController:countryProperties animated:YES];
}
@catch (NSException *exception) 
{
    UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"Sorry" message:@"Module under revision" delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil];
    [alert show];
} 
} 
```

我确实希望这段代码只显示一个 alertView，在用户按下“关闭”按钮后，alertView 应该消失。就这样。无论如何，警报视图不起作用。如果确实发生了异常，则会显示警报视图，但是当我按下关闭按钮时，什么也没有发生并且程序仍然冻结。

是否因为我在 @catch 块内使用我的 alertView 或类似的东西而发生了邪恶？

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T23:55:25.080

@try 内部到底是什么引发了异常？Objective-C 中的异常处理通常不赞成错误处理。[Objective-C 编程语言文档](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocExceptionHandling.html)说：

> 在 Objective-C 中，异常是资源密集型的。您不应该将异常用于一般的流控制，或者仅仅表示错误。相反，您应该使用方法或函数的返回值来指示发生了错误，并在错误对象中提供有关问题的信息。

[异常编程主题](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/Exceptions/Exceptions.html#//apple_ref/doc/uid/10000012i)指南也有类似的观点：

> **重要**您应该保留使用异常来进行编程或意外的运行时错误，例如越界集合访问、尝试改变不可变对象、发送无效消息以及失去与窗口服务器的连接。您通常在创建应用程序时而不是在运行时处理这些类型的异常错误。

[错误处理编程指南](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ErrorHandlingCocoa/ErrorHandling/ErrorHandling.html#//apple_ref/doc/uid/TP40001806)也很好读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T00:19:24.523

很多绘图的事情必须在主线程上发生。如果您将警报视图代码移动到它自己的方法中，您可能会找到答案，并在您的 @catch 中调用：

```
[self performSelectorOnMainThread:@selector(myAlertMethod) withObject:nil waitUntilDone:NO]; 
```

...其中 myAlertMethod 是将警报代码移至的方法。

# android - 从另一个活动返回时，Android 片段小部件为空

> ID：11379153
> 
> 赞同：2
> 
> 时间：2012-07-07T22:26:00.457
> 
> 标签：android, android-viewpager, fragment, lifecycle

**更新**
我认为它与屏幕方向有关。事实上，当我在不改变设备方向的情况下播放不同的动作时，它不会导致任何问题，小部件被正确评估。一旦我改变方向，所有小部件在返回原始活动时都会变为空。

**原始帖子**

我在 Fragments 或 FragmentPagerAdapter 的生命周期中遇到问题，我不太清楚是什么导致了我的问题。

请注意，我是 Fragments 的新手，我一定误解或忘记了一些东西，但我无法在现有帖子上找到任何答案。另外，请注意，我使用的是兼容性包以及两个库 ActionBarSherlock 和 ViewPageIndicator。

无论如何，这是我的情况：
- 我有一个 SherlockFragmentActivity A，其目标是显示一个包含两个片段的 ViewPager，两个片段都继承 SherlockFragment。到目前为止，一切正常，与两个片段关联的视图都是正确的，我可以对小部件做任何我想做的事情。
- 在 ActionBar 中，用户可以单击显示 SherlockActivity B 的项目，这样他就可以输入并验证某些数据或取消输入。活动 B 以 startActivityForResult() 开始，因为我期待活动 A 中的结果。

这个想法是如果用户输入并验证活动 B 显示的表单，则在活动 A 的 onActivityResult() 中刷新 ViewPager 中的两个片段的内容。

但是，当我尝试在 onActivityResult() 中更新片段的视图时，如果用户已经验证了表单，那么两个片段中的所有小部件现在都为空。当 Fragments 首次出现时它们不是空的，但现在它们是空的，我还没有想出任何方法来获取它们的初始值。我试图玩活动生命周期，但没有成功。

这是我的代码中最重要的部分：

**适配器**

```
public class TabGameSetPagerAdapter extends FragmentPagerAdapter {

private final List<Fragment> fragments;

public TabGameSetPagerAdapter(FragmentManager fm, List<Fragment> fragments) {
    super(fm);
    this.fragments = fragments;
}

@Override
public Fragment getItem(int position) {
    return this.fragments.get(position);
}

@Override
public int getCount() {
    return this.fragments.size();
}

@Override
public CharSequence getPageTitle(int position) {
    switch(position) {
        case 0:
            return App.getApplication().getString(R.string.lblGamesTitle);
        case 1:
            return App.getApplication().getString(R.string.lblSynthesisTitle);
        default:
            return "Unknown[" + position + "]";
    }
} 
```

**寻呼机的活动**

```
public class TabGameSetActivity extends SherlockFragmentActivity implements IRefreshableGameSetContainer {

private ViewPager mPager;

private PagerAdapter mPagerAdapter;

private GameSetGamesFragment gameSetGamesFragment = GameSetGamesFragment.newInstance();

private GameSetSynthesisFragment gameSetSynthesisFragment = GameSetSynthesisFragment.newInstance();

@Override
protected void onCreate(Bundle savedInstanceState) {
    try {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.simple_titles);

        // initialize the pager
        this.initialisePaging();

    }
    catch (Exception e) {
        AuditHelper.handleActivityException(this, e);
    }
}

private void initialisePaging() {
    this.gameSetGamesFragment = GameSetGamesFragment.newInstance();
    this.gameSetSynthesisFragment = GameSetSynthesisFragment.newInstance();

    List<Fragment> fragments = newArrayList();
    fragments.add(this.gameSetGamesFragment);
    fragments.add(this.gameSetSynthesisFragment);

    this.mPagerAdapter = new TabGameSetPagerAdapter(super.getSupportFragmentManager(), fragments);
    this.mPager = (ViewPager) super.findViewById(R.id.pager);
    this.mPager.setAdapter(this.mPagerAdapter);
    this.mPager.setCurrentItem(this.startPage-1);

    TitlePageIndicator indicator = (TitlePageIndicator)findViewById(R.id.indicator);
    indicator.setViewPager(mPager);
    indicator.setFooterIndicatorStyle(IndicatorStyle.Triangle);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    try {
        if (requestCode == RequestCodes.ADD_GAME) {
            if (resultCode == ResultCodes.AddGame_Ok) {
                this.refresh();
            }
        }
    }
    catch (Exception e) {
        e.printStackTrace();
    }
}

@Override
public void refresh() {
    this.gameSetGamesFragment.refresh();
    this.gameSetSynthesisFragment.refresh();
} 
```

}

尤其是 onActivityResult() 处理对两个片段上的 refresh() 方法的调用。

**碎片之一**

```
public class GameSetGamesFragment extends SherlockFragment implements IRefreshableGameSetContainer {

private View mViewTabGameSet;

private LinearLayout playersLayout;

private LinearLayout gamesLayout;

private ScoresRow playerScoresRow;

private PlayersRow playersRow;  

public static GameSetGamesFragment newInstance() {
    return new GameSetGamesFragment();
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    this.mViewTabGameSet = inflater.inflate(R.layout.tablegameset, null);

    this.playersLayout = (LinearLayout)this.mViewTabGameSet.findViewById(R.id.playersLayout);
    this.gamesLayout = (LinearLayout)this.mViewTabGameSet.findViewById(R.id.gamesLayout);

    this.playerScoresRow = new ScoresRow(this.getActivity(), App.getBizService().getPlayers());
    this.playersRow = new PlayersRow(this.getActivity(), App.getBizService().getPlayers());

    this.playersLayout.addView(this.playersRow);
    this.playersLayout.addView(this.playerScoresRow);

    this.progressDialog = new ProgressDialog(this.getActivity());

    this.refreshGameRows();

    return this.mViewTabGameSet;
}

protected void refreshGameRows() {
    this.gamesLayout.removeAllViews();

    for (View rowToDisplay : rowsToDisplay) {
        this.gamesLayout.addView(rowToDisplay);
    }

    ...
}

@Override
public void refresh() {
    this.refreshGameRows();
} 
```

}

我没有把我所有的代码都放在这里，但最重要的部分已经存在。如您所见，fragment 的 onCreateView() 方法调用 refreshGameRows()，fragment 的 refresh() 方法也是如此。所以这两种方法在 UI 渲染方面基本相同。

但是，当在 TabGameSetActivity 类的 onActivityResult() 中调用方法 refresh() 时，所有片段小部件都为空：gamesLayout、mViewTabGameSet ... 我不明白，因为之前调用了 onCreateView() 并正确评估了所有对象。

现在，抛出异常，因此不更新 ui。我需要更改设备的方向，以便重新创建第一个活动及其所有子片段。但是我无法将它发送给我的最终用户：/

因此，任何帮助将不胜感激。

提前致谢。

# php - 如何打开和关闭正确答案按钮？

> ID：11379161
> 
> 赞同：0
> 
> 时间：2012-07-07T22:27:08.587
> 
> 标签：php, javascript, jquery

我在下面有一个功能，如果用户单击“添加”按钮，它会触发以下功能：

```
function addwindow(gridValues) { 

    if($(plusbutton_clicked).attr('id')=='mainPlusbutton') { 

        $('#btn'+gridValues).trigger('click');

        } 

    $.modal.close(); 
    return false;
} 
```

下面是能够显示答案按钮 AZ、“True”或“False”以及“Yes”或“No”的代码：

html代码：

```
<?php
    $a = range("A","Z");
?>

<table id="answerSection">
    <tr>

<?php
    $i = 1;
    foreach($a as $key => $val){
        if($i%7 == 1) echo"<tr><td>";
        echo"<input type=\"button\" onclick=\"btnclick(this);\" value=\"$val\" id=\"answer".$val."\" name=\"answer".$val."Name\" class=\"answerBtns answers answerBtnsOff\">";      
        if($i%7 == 0) echo"</td></tr>";
        $i++;
    }
?>
    </tr>
    <tr>
<td>
<input class="answerBtns answers" name="answerTrueName"  id="answerTrue"    type="button"   value="True"    onclick="btnclick(this);"/>
<input class="answerBtns answers" name="answerFalseName" id="answerFalse"   type="button"   value="False"   onclick="btnclick(this);"/>
<input class="answerBtns answers" name="answerYesName"   id="answerYes"     type="button"   value="Yes"     onclick="btnclick(this);"/>
<input class="answerBtns answers" name="answerNoName"    id="answerNo"      type="button"   value="No"      onclick="btnclick(this);"/>
</td>
</tr>
</table> 
```

Javascript代码：

```
function getButtons()
{
    var i;
    if (initClick == 0) {
        for (i = 65; i <= 90; i++) { // iterate over character codes for A to Z
            $("#answer" + String.fromCharCode(i)).removeClass("answerBtnsOn").addClass("answerBtnsOff");

        }

        initClick = 1;
    }
    // code above makes sure all buttons start off with class answerBtnsOff, (so all button are white).
} 
```

下面是它打开和关闭答案按钮的代码：

```
function btnclick(btn)
{
    var context = $(btn).parents('#optionAndAnswer');

    if ($(btn).hasClass("answerBtnsOn")) {
        $(btn).removeClass("answerBtnsOn").addClass("answerBtnsOff");
        return false;
    }

    if ($(btn).hasClass("answerBtnsOff")) {
        $(btn).removeClass("answerBtnsOff").addClass("answerBtnsOn");
        return false;
    }
} 
```

现在我有一个称为“答案”的表格列，该列下的每一行都包含答案和它自己的“添加”按钮。我的问题是，如果让我们说其中一行包含答案`A B D F`并且用户通过单击“添加”按钮添加此行，那么我希望打开答案按钮`A B D and F`并关闭其他答案按钮. 另一个例子是，如果答案是`True`，那么我希望打开`True`答案按钮并关闭其他答案按钮。

那么我需要输入什么，`function addwindow(gridValues)`以便在单击“添加”按钮时，它会打开并关闭正确答案按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T23:00:02.003

以这种方式在点击时传递 id 它适用于我使用 selenium 进行调试：

```
$('input').click(function() {
    var id = $(this).attr('id');
    btnclick(id);
} 
```

我刚刚在 html 标记上删除了 onclick 行为。

希望它有效。

# c# - “字符串”不包含/的定义

> ID：11379166
> 
> 赞同：1
> 
> 时间：2012-07-07T22:29:04.067
> 
> 标签：c#

**错误**：“字符串”不包含“SelectedPath”的定义，并且找不到接受“字符串”类型的第一个参数的扩展方法“SelectedPath”

**代码**：

```
 private static string fbd = String.Empty;
    public void button2_Click(object sender, EventArgs e)
    {
        FolderBrowserDialog fbd = new FolderBrowserDialog();
        fbd.Description = "Select a Folder to save the images.";
        if (fbd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            textBox1.Text = fbd.SelectedPath;
    }

public void button3_Click(object sender, EventArgs e)
    {

        List<string> address = new List<string>();
        Random r = new Random();
        address.Add("http://d24w6bsrhbeh9d.cloudfront.net/photo/4600000_460s.jpg");
        address.Add("http://d24w6bsrhbeh9d.cloudfront.net/photo/4600001_460s.jpg");
        address.Add("http://d24w6bsrhbeh9d.cloudfront.net/photo/4600002_460s.jpg");
        address.Add("http://d24w6bsrhbeh9d.cloudfront.net/photo/4600003_460s.jpg");
        //MessageBox.Show(address[r.Next(0, 4)]);

        if (comboBox1.Text == "10")
        {
            string filename = fbd.SelectedPath;
            MessageBox.Show(fbd);

            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(new Uri(address[r.Next(0, 4)]));
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();

            if ((response.StatusCode == HttpStatusCode.OK ||
                response.StatusCode == HttpStatusCode.Moved ||
                response.StatusCode == HttpStatusCode.Redirect) &&
                response.ContentType.StartsWith("image", StringComparison.OrdinalIgnoreCase))
            {

                using (Stream inputStream = response.GetResponseStream())
                using (Stream outputStream = File.OpenWrite(filename))
                {
                    byte[] buffer = new byte[4096];
                    int bytesRead;
                    do
                    {
                        bytesRead = inputStream.Read(buffer, 0, buffer.Length);
                        outputStream.Write(buffer, 0, bytesRead);
                    } while (bytesRead != 0);
                    using (WebClient client = new WebClient())
                    {
                        client.DownloadFile(address[r.Next(0, 25)], filename);
                    }

                }
            }
        }

    } 
```

**解释**：对于 button3_Click 我试图让它调用您设置的保存位置来保存图像。我浏览了整个网络，但没有找到解决此问题的方法：/

当我手动输入保存位置时，我也会收到错误消息。拒绝访问路径“H:\images”。没有文件夹不是只读的。无论我在哪里设置保存位置，它都会给我同样的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T22:31:28.470

fdb 是一个字符串。您已经声明了一个名为 fdb 的字符串类型的类范围字段，它没有属性 SelectedPath

在 yout button2_click 方法中，您有一个可能要访问的文件对话框，因此您需要在类范围内声明它。

```
private FolderBrowserDialog _fbDlg;
private static string fbd = String.Empty; // Do you really need this?
    public void button2_Click(object sender, EventArgs e)
    {
        _fbDlg = new FolderBrowserDialog();
        _fbDlg.Description = "Select a Folder to save the images.";
        if (_fbDlg.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            textBox1.Text = _fbDlg.SelectedPath;
    }

public void button3_Click(object sender, EventArgs e)
    {

        List<string> address = new List<string>();
        Random r = new Random();
        address.Add("http://d24w6bsrhbeh9d.cloudfront.net/photo/4600000_460s.jpg");
        address.Add("http://d24w6bsrhbeh9d.cloudfront.net/photo/4600001_460s.jpg");
        address.Add("http://d24w6bsrhbeh9d.cloudfront.net/photo/4600002_460s.jpg");
        address.Add("http://d24w6bsrhbeh9d.cloudfront.net/photo/4600003_460s.jpg");
        //MessageBox.Show(address[r.Next(0, 4)]);

        if (comboBox1.Text == "10")
        {
            string filename = _fbDlg.SelectedPath; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-07T22:32:56.500

问题是您已经声明了两个具有相同名称的变量 - `fbd`：

```
private static string fbd = String.Empty;

FolderBrowserDialog fbd = new FolderBrowserDialog(); 
```

重命名其中之一以避免混淆。然后我认为您将能够找出解决问题的正确方法。

# c - Xcode 的 SVD 库

> ID：11379167
> 
> 赞同：1
> 
> 时间：2012-07-07T22:29:20.847
> 
> 标签：c, svd

我四处寻找要在 Xcode 的 C 代码中使用的 SVD 库。我找到**了 svdcmp.c**（来自计算中的数值食谱），但它非常非常慢。我找到了其他 SVD 库，例如**SVDLIBC**和**CLAPACK**。但它们必须由终端编译。有没有办法在 Xcode 中编译它们？或者可能有另一个图书馆在场？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:46:37.150

在 xcode 中，您可以将加速/加速.h 框架包含/添加到您的项目中。比您可以访问可用的 c 版本 CLAPACK。gdesvd_ 是您正在寻找的功能。

# sql - 使用不同的求和和减法函数的 Sql 查询

> ID：11379171
> 
> 赞同：0
> 
> 时间：2012-07-07T22:30:47.140
> 
> 标签：sql

我需要您帮助我从一个表中提取一个查询以进行金融交易及其行如下： Accountnumber ：例如（4568643） Transactionamount ：例如（1000 美元） Kindoftransaction（借方或贷方）交易文件（并且这个号码持有链接到此交易的文件号）

我需要你的帮助来提取每个（交易文件）的净余额的查询，在总和（Transactionamount）从（Kindoftransaction）持有“贷方”并从所有（Transactionamount）持有“借方”的总和中减去它，其中（Accountnumber）是（ 4568643)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T22:57:57.887

这有帮助吗？- 请注意，如果您可以发布您的表格定义，它会有所帮助

```
DECLARE @transactions TABLE
(
    [AccountNumber] INT NOT NULL,
    [TransactionAmount] DECIMAL(18, 10) NOT NULL,
    [KindOfTransaction] CHAR(1) NOT NULL, -- this could be better served as a boolean / bit field
    [TransactionFile] INT NOT NULL
)

-- dummy data
INSERT INTO @transactions VALUES(4568643, 100, 'C', 123)
INSERT INTO @transactions VALUES(4568643, 150, 'C', 124)
INSERT INTO @transactions VALUES(4568643, 50, 'D', 125)
INSERT INTO @transactions VALUES(2345623, 100, 'C', 126)
INSERT INTO @transactions VALUES(2345623, 79, 'C', 127)

    -- here's the actual query to return your data using a common table expression
;WITH cteAccountSummary (AccountNumber, TotalCredits, TotalDebits) AS (
    SELECT  [AccountNumber], 
            SUM(
                CASE [KindOfTransaction]
                    WHEN 'C' THEN [TransactionAmount]
                    ELSE 0
                END
            ),
            SUM(
                CASE [KindOfTransaction]
                    WHEN 'D' THEN [TransactionAmount]
                    ELSE 0
                END
            )
    FROM @transactions
    GROUP BY [AccountNumber]
)
SELECT [AccountNumber], TotalCredits - TotalDebits AS 'NetFinancialPosition'
FROM cteAccountSummary 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:59:39.040

```
select transactionfile, sum(case when kindoftransaction = 'debit' then -1 else 1 end * transactionamount)
from financial
where accountnumber = 4568643
group by transactionfile 
```

# wordpress - 主页链接的特定类

> ID：11379175
> 
> 赞同：0
> 
> 时间：2012-07-07T22:31:15.460
> 
> 标签：wordpress

我只想知道如何将特定的类添加到 wordpress 中的“主页”链接。

实际上所有的 li 都有类似 class="page_item page-item-XXXXX" 的东西，其中 XXXXX 是一个数字，但“home”链接没有类。

我可以解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T22:58:56.700

在您的添加以下代码`functions.php`

```
add_filter('nav_menu_css_class' , 'add_extra_class' , 10 , 2);
function add_extra_class($classes, $item){
    if($item->title == 'Home'){ // In this case your Home page's title should be 'Home'
        $classes[] = 'my_home_class';
    }
    return $classes;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:59:06.623

您可以使用 functions.php 中的以下内容将自定义类添加到菜单项

```
add_filter('nav_menu_css_class', 'fkp_special_nav_class', 10, 2);
function fkp_special_nav_class($classes, $item)
{
  if($item->title == 'Home or what ever'){
    $classes[] = 'myCusomClass';
  }
  return $classes;
} 
```

# jquery - Jquery - 替换变量

> ID：11379176
> 
> 赞同：0
> 
> 时间：2012-07-07T22:31:16.977
> 
> 标签：jquery

我正在寻找创建一个 jQuery 脚本，当且仅当它在某个 div 内时才会替换 html 变量。不过，我希望它为每个 PostID 执行此操作。

每个变量都是唯一的，具体取决于帖子 ID。

例子：

```
<div class="[PostID]">
<div class="special">
<div class="container">
(Variable 1 has been replaced by variable 2 here due to the Special class)
[Variable 2]
</div>
</div>
</div> 
```

我创建了一个快速脚本，但我遇到的问题是，当第一个变量 2 被替换时，这也是用于替换以下特殊类的变量。他们没有使用自己的变量。

对不起，如果这令人困惑。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T22:53:12.257

您可以迭代容器，一次用一个替换变量，如下所示：

```
$('.special').each(function(){
  $(this).find('.container').html().replace(/V1/g,'V2');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:46:06.337

对于全局替换，您可以使用以下正则表达式方法：

```
string.replace(/\[variable1\]/g,'[variable2]'); 
```

# html - 浮动左跳内容向下 - 流体布局

> ID：11379179
> 
> 赞同：2
> 
> 时间：2012-07-07T22:31:28.437
> 
> 标签：html, css, css-float

我在其他 StockOverflow 帖子上做了功课，但找不到我的答案。基本上我有两个内容1）一个项目编号和2）一个标题。在javascript中，我将项目编号div的宽度设置为窗口宽度的八分之一（这很好用）。然后我试图将我的标题放在它的右边，左边距为 15%。看起来不错，除非我减小窗口宽度 - 标题跳到我的 projectContainer 之外......我的 projectContainerHeadline 的宽度是 100% - 我已经尝试修复这个 - 比如 900px - 当我缩小我的窗口没关系 - 但是当我将窗口大小增加得更大时，当标题超过 900px 标记时它会再次跳出。我认为必须有一些我缺少的东西才能使用这些浮动进行流体宽度的现场工作...... 也溢出：隐藏对这种情况没有帮助......本质上，我想让我的标题 div 向左浮动，而不会跳出它的块/容器。我需要它向左浮动，以便它的 margin-left 会随着左侧容器的宽度变化而动态更新。

我的html代码可以在这里找到：

```
 <div class="projectContainer">
      <div class="projectContainerHeadline">
           <div class="projectNum">01</div>
              <div class="projectHeadlineText">
                 <h2>Test Headline</h2>
                 <h3>Test sub-headline</h3>
              </div>
           </div>
     </div>
 </div> 
```

我的CSS可以在这里找到：

```
.projectContainer{width: 100%; float: left;}
.projectContainerHeadline{height: 130px; float: left; width: 100%; background-color: pink;}
.projectNum{font-family: Helvetica,Arial,sans-serif; font-size: 105px; text-align: right; border-top: 11px solid #d9a870; min-width: 100px; float: left;}
.projectHeadlineText{float: left; margin-left: 15%;}
.projectHeadlineText h2{background-color: blue; margin: 20px 0px 0px 0px;}
.projectHeadlineText h3{background-color: red; margin: 3px 0px 0px 0px;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T15:04:30.387

[这](http://jsfiddle.net/Eric/hamHe/)是做你想做的吗？

我所做的只是改变：

```
.projectHeadlineText{float: left; margin-left: 15%;} 
```

至

```
.projectHeadlineText{overflow: hidden; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T13:52:37.527

这对我有用，希望对你也有用.....

```
.projectHeadlineText{display:inline-block; margin-left: 15%;} 
```

# javascript-events - 选择选项时显示文本框

> ID：11379184
> 
> 赞同：0
> 
> 时间：2012-07-07T22:31:52.030
> 
> 标签：javascript-events

我使用单选按钮来显示带有三个选项的下拉列表。当用户选择空白选项时，我需要显示一个文本框。如果有人有任何建议可以引导我朝着正确的方向前进，我将不胜感激。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>test</title>
<style type="text/css" media="screen">
.hide{
display:none;
}
</style>
</head>
<body>
<form name="frm1" method="POST" action="">
<p>Select type of exception:<br />
<div id="tabs">
<div id="nav">
Waiver:<input type="radio" name="tab" value="pickfrom" class="div5" />

</div>

<div id="div5" class="tab"><br />
<label>Reason for Waiver</label>
<select name="selWaiver" id="waivers" onchange="if(this.selected index==blank){this.form['box'].style.visibility='visible'}else{this.form['box'].style.visibility='hidden'};">

<option value="reason">Reason</option>
<option value="newReason">New Reason</option>
<option value="blank">Blank</option>
</select>

</div>

</div>
<script type="text/javascript" charset="utf-8">
(function(){
var tabs =document.getElementById('tabs');
var nav = tabs.getElementsByTagName('input');
/*
* Hide all tabs
*/
function hideTabs(){
var tab = tabs.getElementsByTagName('div');
for(var i=0;i<=nav.length;i++){
if(tab[i].className == 'tab'){
tab[i].className = tab[i].className + ' hide';
} }
}
/*
* Show the clicked tab
*/
function showTab(tab){
document.getElementById(tab).className = 'tab'
}
hideTabs(); /* hide tabs on load */
/*
* Add click events
*/
for(var i=0;i<nav.length;i++){
nav[i].onclick = function(){
hideTabs();
showTab(this.className);
}
}
})();
</script>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T22:37:49.487

```
 <select name="selWaiver" id="waivers" onchange='if ($(this).val()=="") {
$("#box").show(); }else{
$("#box").hide();}'> 
```

我推荐使用 JQuery，因为它会为你省去很多跨浏览器的兼容性问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:38:15.277

你在这个项目中使用 jQuery。使用 jQuery 库执行 DOM 操作要容易得多。我会为此使用 jQuery toggle() 方法（更多信息在[http://api.jquery.com/css](http://api.jquery.com/css)）。您可以在空白选项的单击事件上执行以下操作：

```
$('.hide').toggle(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T22:56:02.117

Javascript 版本（未经测试）：

```
 <select name="selWaiver" id="waivers" onchange='check(this);'>   
    <script>
    function check(sel)
    {
    var value=frm1.selWaiver.options[frm1.selWaiver.options.selectedIndex].value;
    //alert(value) to see if it works
    var box=document.getElementById("box");
    if (value=="")
       box.style.display="block";
    else 
       box.style.display="none";
    }
    </script> 
```

# php - 用于 php 的 html 文本提取

> ID：11379186
> 
> 赞同：3
> 
> 时间：2012-07-07T22:32:20.737
> 
> 标签：php, text-extraction, boilerplate, boilerpipe

有一堆 HTML 文本提取工具。主要用于 Java 或 Python。我最常遇到的是锅炉管。这里和那里有一些 API，有些似乎工作得很好。有谁知道PHP中有什么可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T22:35:06.987

你可以试试phpQuery：

[http://code.google.com/p/phpquery/](http://code.google.com/p/phpquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:35:15.947

[DomDocument](http://php.net/domdocument)是 PHP 中可用的一个类，如果您有 libxml 支持，可以解析 HTML 文档并让您遍历它们或发出[XPath](http://en.wikipedia.org/wiki/XPath)查询以查找 DOM 树中的特定节点。这是理想的方法。

或者，如果文本足够简单且统一，您可以使用[preg_match()使用](http://php.net/preg_match)[正则表达式](http://www.php.net/manual/en/book.pcre.php)从数据中提取文本。

# queue - Python-多线程时间敏感任务

> ID：11379187
> 
> 赞同：3
> 
> 时间：2012-07-07T22:32:23.827
> 
> 标签：queue, python-2.7, python-multithreading

```
from random import randrange
from time import sleep
#import thread
from threading import Thread
from Queue import Queue
'''The idea is that there is a Seeker method that would search a location
for task, I have no idea how many task there will be, could be 1 could be 100.
Each task needs to be put into a thread, does its thing and finishes. I have
stripped down a lot of what this is really suppose to do just to focus on the
correct queuing and threading aspect of the program. The locking was just
me experimenting with locking'''
class Runner(Thread):
    current_queue_size = 0
    def __init__(self, queue):
        self.queue = queue
        data = queue.get()
        self.ID = data[0]
        self.timer = data[1]
        #self.lock = data[2]
        Runner.current_queue_size += 1
        Thread.__init__(self)

    def run(self):
        #self.lock.acquire()
        print "running {ID}, will run for: {t} seconds.".format(ID = self.ID,
                                                                t = self.timer)
        print "Queue size: {s}".format(s = Runner.current_queue_size)
        sleep(self.timer)        
        Runner.current_queue_size -= 1
        print "{ID} done, terminating, ran for {t}".format(ID = self.ID,
                                                                t = self.timer)
        print "Queue size: {s}".format(s = Runner.current_queue_size)
        #self.lock.release()
        sleep(1)
        self.queue.task_done()

def seeker():
    '''Gathers data that would need to enter its own thread.
    For now it just uses a count and random numbers to assign
    both a task ID and a time for each task'''
    queue = Queue()
    queue_item = {}
    count = 1
    #lock = thread.allocate_lock()
    while (count <= 40):
        random_number = randrange(1,350)
        queue_item[count] = random_number
        print "{count} dict ID {key}: value {val}".format(count = count, key = random_number,
                                                          val = random_number)
        count += 1

    for n in queue_item:
        #queue.put((n,queue_item[n],lock))
        queue.put((n,queue_item[n])) 
        '''I assume it is OK to put a tulip in and pull it out later'''
        worker = Runner(queue)
        worker.setDaemon(True)
        worker.start()
    worker.join() 
    '''Which one of these is necessary and why? The queue object
    joining or the thread object'''

    #queue.join()    

if __name__ == '__main__':
    seeker() 
```

我已将大部分问题放在代码本身中，但要回顾一下要点（Python2.7）：

*   我想确保以后不会为自己造成大量内存泄漏。
*   我注意到，当我在我的 linuxbox 上的 putty 或 VNC 中以 40 的计数运行它时，我并不总是得到所有的输出，但是当我在 Windows 上使用 IDLE 和 Aptana 时，我做到了。
*   是的，我知道队列的目的是错开你的线程，这样你就不会淹没系统的内存，但手头的任务是时间敏感的，所以无论有多少或多少，只要检测到它们就需要立即处理有; 我发现当我有队列时，我可以清楚地指示任务何时完成，而不是让垃圾收集器猜测。
*   我仍然不知道为什么我能够在线程或队列对象上使用 .join() 。
*   提示，技巧，一般帮助。
*   谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T22:37:11.910

如果我对您的理解正确，您需要一个线程来监视某些内容以查看是否有需要完成的任务。如果找到一个任务，您希望它与搜索器和其他当前正在运行的任务并行运行。

如果是这种情况，那么我认为您可能会做错事。看看 GIL 在 Python 中是如何工作的。我认为您在这里可能真正想要的是多处理。

从 pydocs 看一下这个：

CPython 实现细节：在 CPython 中，由于全局解释器锁，只有一个线程可以一次执行 Python 代码（即使某些面向性能的库可能会克服这个限制）。如果您希望您的应用程序更好地利用多核机器的计算资源，建议您使用多处理。但是，如果您想同时运行多个 I/O 密集型任务，线程仍然是一个合适的模型。

# sql-server - 如何将驱动程序添加到 CayenneModeler 识别的列表中？

> ID：11379191
> 
> 赞同：1
> 
> 时间：2012-07-07T22:32:55.760
> 
> 标签：sql-server, apache-cayenne

我是 Apache Cayenne 的新手，我正在尝试我的第一个项目。我正在尝试使用 CayenneModeler 的**Tools > Reengineer Database Schema**功能对 SQL Server 数据库进行逆向工程。

我试图创建一个新的“保存的数据源”。我从其适配器列表中选择了“org.apache.cayenne.dba.sqlserver.SQLServerAdapter”，CayenneModeler 自动填写了 JDBC Driver 字段并添加了一个示例 DB URL。我修改了数据库 URL，提供了用户名/密码，单击“继续”，然后我收到以下错误：

> 驱动程序加载错误：com.microsoft.sqlserver.jdbc.SQLServerDriver

我认为这意味着 CayenneModeler 默认情况下确实有一个用于 sqlserver 的驱动程序（？）但我看不到将 CayenneModeler 指向任何其他驱动程序的方法......

任何 Cayenne 专家都知道我可能做错了什么吗？假设这是问题所在，有没有办法为 CayenneModeler 提供所需的驱动程序？或者如果缺少驱动程序不是问题，有谁知道是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T23:18:38.313

添加其他驱动程序的位置位于**工具 > 首**选项 > 类路径 ( Windows) 或**CayenneModeler > 首选项... > 类路径**(OSX) 下。

# jquery - jqm中嵌套span的目标内容

> ID：11379199
> 
> 赞同：0
> 
> 时间：2012-07-07T22:34:04.090
> 
> 标签：jquery, html

我很难将 JQM 在选择组上方注入的嵌套跨度作为目标。

在下面的代码中，我缺乏工具/代码/知识来定位第二个选择块“多少？”中的跨度。

由于 JQM 正在生成跨度信息，因此我无法添加类或 ID 来帮助我。

我曾希望这`$('#wsize').prevAll('span.ui-btn-text:first').html()`会成功，但我错了。 `$('#wsize').prev('.ui-btn-inner span').html()`也没有成功。

方向感激地欢迎。

```
fieldset class="..." data-role="controlgroup" data-type="horizontal">
<div class="ui-select"><div class="...">
<span class="ui-btn-inner ui-corner-left"><span class="ui-btn-text">Plug trays</span>
<span class="ui-icon ui-icon-arrow-d ui-icon-shadow">&nbsp;</span></span>
<select name="pot" id="pot">
<option id="potnot" value="not" selected="selected">Container type</option>
<option value="aza">Azalea pots</option>
...
</select></div></div>

<div class="ui-select"><div ...>
<span class="ui-btn-inner">
    <span class="ui-btn-text">Which size?</span>
    <span class="ui-icon ui-icon-arrow-d ui-icon-shadow">&nbsp;</span>
</span>
<select name="size" id="size">
<option id="wsize">Which size?</option>
...
</select>
</div></div>

<div class="ui-select"><div ...>
<span class="ui-btn-inner ui-corner-right ui-controlgroup-last">
   <span class="ui-btn-text">How many?</span>
   <span class="ui-icon ui-icon-arrow-d ui-icon-shadow">&nbsp;</span>
</span>
<select name="quantity" id="quantity">
   <option id="howmany">How many?</option>
   ... 
</select></div></div>
</fieldset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T23:02:42.970

我不确定您在寻找什么跨度值，但请在此处查看演示：

[http://jsfiddle.net/7hSSR/](http://jsfiddle.net/7hSSR/)或[http://jsfiddle.net/7hSSR/1/](http://jsfiddle.net/7hSSR/1/)

希望这有助于事业`:)`

**代码**

```
alert($('#wsize').parents('div').next('div').find('.ui-btn-text').html()); 
```

# android - 服务未通过 AsyncTask 启动

> ID：11379206
> 
> 赞同：0
> 
> 时间：2012-07-07T22:35:42.713
> 
> 标签：android, service, android-asynctask

我有一个在 AsyncTask 完成后启动的服务。但是，当我去管理模拟器上正在运行的应用程序时，它不存在。这是我的 UI 线程代码：

```
public void onClick(View v) {
    // TODO Auto-generated method stub
    if (v.getId() == R.id.button1) {
        if (rBoot.isChecked()) {
            registerReceiver(new BootReceiver(), filter);
        }

        if (cb.isChecked())
            sent.putInt("progress", -10);
        else
            sent.putInt("progress", sb.getProgress());

        prog.show();
        new ProgressUpdate().execute(0);

    }

    if (v.getId() == R.id.button2) {
        stopService(i);
    }
} 
```

和异步任务：

```
private class ProgressUpdate extends AsyncTask<Integer, String, String> {

    @Override
    protected String doInBackground(Integer... params) {
        // TODO Auto-generated method stub

        for (int i = 0; i <= 100; i++) {
            try {
                Thread.sleep((long) 31.4);
                progress = i;
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            if (progress == 100) {
                prog.dismiss();
            }
        }

        return "done";
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        startService(new Intent(Activity.this, Service.class)
                .putExtra("bun", sent));
    }
} 
```

对话框显示然后关闭，但服务永远不会启动。

# c# - 如何在 Panel 移动窗体窗口中进行鼠标拖动？

> ID：11379209
> 
> 赞同：10
> 
> 时间：2012-07-07T22:36:10.987
> 
> 标签：c#, winforms

我有我想要启用的 System.Windows.Forms.Panel，这样如果用户单击并拖动鼠标，就会将窗口拖动到周围。

我可以这样做吗？我必须实现多个事件吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-10-21T09:53:13.403

最适合我的解决方案是使用非托管代码，与 HatSoft 发布的答案不同，它可以为您提供平滑的窗口移动。

> 3 个小步骤在 Panel 移动中拖动窗口

```
using System.Runtime.InteropServices; 
```

在你的类中添加这六行

```
public const int WM_NCLBUTTONDOWN = 0xA1;
public const int HT_CAPTION = 0x2;

[DllImportAttribute("user32.dll")]
public static extern int SendMessage(IntPtr hWnd, int Msg, int wParam, int lParam);
[DllImportAttribute("user32.dll")]
public static extern bool ReleaseCapture(); 
```

并且 Panel 上的 MouseMove 事件应如下所示

```
private void panel1_MouseMove(object sender, MouseEventArgs e)
{
   if (e.Button == MouseButtons.Left)
   {
      ReleaseCapture();
      SendMessage(Handle, WM_NCLBUTTONDOWN, HT_CAPTION, 0);
   }
} 
```

发布的有点晚了 :) ，谁知道我们将来可能会再次需要它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-07T23:34:59.943

您可以通过使用面板的 MouseMove 事件来实现

示例应该是这样的（抱歉没有测试过）

```
private void panel1_MouseMove(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left)
    {
        this.Location = new Point(Cursor.Position.X + e.X , Cursor.Position.Y + e.Y);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T23:31:14.257

您可能想看看我在这里粘贴的这个组件：

[http://pastebin.com/5ufJmuay](http://pastebin.com/5ufJmuay)

它是一个组件，您可以将其放在表单上，​​然后通过在其中拖动来拖动表单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-27T00:32:08.340

当前设置为面板。VS C# Just Messing About 似乎对我有用，在按下左键时将应用程序的左上角设置为鼠标位置。

```
 public form1()
    {
        InitializeComponent();
        this.panel2.MouseMove += new MouseEventHandler(panel2_MouseMove);
    }

    public const int WM_NCLBUTTONDOWN = 0xA1;
    public const int HT_CAPTION = 0x2;

    [DllImportAttribute("user32.dll")]
    public static extern int SendMessage(IntPtr hWnd, int Msg, int wParam, int lParam);

    private void panel2_MouseMove(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
        {

            Point loc1 = MousePosition;
            this.Location = loc1;
        }
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-05-05T20:46:07.060

Bravo 的代码工作得非常好，但是直到我在我想要移动的面板的面板的->属性->事件部分中明确启用 MouseMove 事件之前，我无法让它工作。

# javascript - 使用 Closure Compiler 编写更好的面向对象的 JavaScript 完整示例代码

> ID：11379210
> 
> 赞同：1
> 
> 时间：2012-07-07T22:36:18.913
> 
> 标签：javascript, optimization, compiler-construction, closures

我喜欢 Hedger Wang 在他的帖子“使用闭包编译器编码更好的面向对象的 JavaScript”中提出的想法[http://calendar.perfplanet.com/2010/coding-better-object-oriented-javascript-with-closure-compiler/](http://calendar.perfplanet.com/2010/coding-better-object-oriented-javascript-with-closure-compiler/)，但他的示例并没有涵盖所有内容，并且有些示例似乎使用了与其他示例不同的样式。我一直在网上搜索特定问题的解决方案，并找到了一些解决方案，但每个解决方案似乎都与难题的其他部分不兼容。

任何人都可以提供一个完整的工作示例，同时涵盖以下所有内容：

*   使用带有高级优化的 Google 闭包编译器
*   使用注解，包括@type、@constructor、@enum...
*   使用外部库的 externs 文件（例如 jQuery）
*   导出用户定义的库“类”及其所有“公共函数”（并包括此类的 externs 文件）
*   在自己的文件中有另一个“类”，它使用该库而无需重新编译该库
*   避免现在和未来的命名冲突（命名空间？）
*   尽可能避免全局变量（每个文件 1 个对我来说似乎是一个合理的目标。全局名称可以出现多次 - 我不介意每个文件进行一次搜索和替换，但我不想做多个这样的操作）
*   包括用于编译整个内容的命令行
*   没有错误或警告
*   继承，接口，......的例子会很好，但我现在可以没有这些

好的，我知道这有点像一个列表，这就是为什么我无法让所有东西协同工作，但在我看来，这似乎是大中型项目的基本要求。我会继续用头撞墙一段时间，但如果有人已经做过这样的项目，我将永远感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T22:40:07.727

看看这些视频。

[http://www.youtube.com/watch?v=M3uWx-fhjUc](http://www.youtube.com/watch?v=M3uWx-fhjUc)

[http://www.youtube.com/watch?v=OJ-vTq4lp10](http://www.youtube.com/watch?v=OJ-vTq4lp10)

都是关于 google Closure 的。

你也可以看看这本书。它摇摆不定

[http://shop.oreilly.com/product/0636920001416.do](http://shop.oreilly.com/product/0636920001416.do)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-06T12:21:47.840

我的 Closure Compiler + KnockoutJS 样板覆盖了你的大部分项目符号。[检查出来](https://github.com/batilc1/gcc-knockout)。

# python - matplotlib 中的随机矢量图

> ID：11379214
> 
> 赞同：2
> 
> 时间：2012-07-07T22:37:38.967
> 
> 标签：python, matplotlib

我有一个随机向量场，即向量不是坐标的函数，而是一些随机值。我有一个 4 列文件中的数据，其中前两列指定向量原点的 x 和 y 坐标，接下来的两列在该点具有向量的 x 和 y 分量。如何使用 matplotlib 为此类数据制作矢量图。`quiver`可能不起作用，因为矢量不是坐标的函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T03:55:02.793

Quiver 完全满足您的需求。没有必要将事物放在常规网格上。

```
import matplotlib.pyplot as plt
import numpy as np

x, y, u, v = np.random.random((4,10))
plt.quiver(x, y, u, v)
plt.show() 
```

![在此处输入图像描述](../Images/e8ca257e9d51390cec81384b16c5c52b.png)

还是我只是误解了你的问题？

# php - PHP在上传前显示选择的图像

> ID：11379219
> 
> 赞同：8
> 
> 时间：2012-07-07T22:38:08.497
> 
> 标签：php, jquery, codeigniter, file-upload

我正在使用 Codeigniter 的上传库为用户头像上传图片。我还在使用[Jcrop](http://deepliquid.com/content/Jcrop_Manual.html#Introduction)，它允许用户选择要裁剪的区域。

[![在此处输入图像描述](../Images/a82f7c4a0cdfffdc5bdbd45f050fe016.png)](https://i.stack.imgur.com/xBEBI.jpg)
[（来源：[webresourcesource.com](http://www.webresourcesource.com/wp-content/uploads/2012/04/jcrop.jpg)）]

我将所选区域的所有坐标保存在文本输入中，我将在 php 中使用这些坐标进行裁剪。

是否可以在上传之前显示选择的图像？

上传表格：

```
<?php echo form_open_multipart('upload/do_upload');?>

<input type="file" name="userfile" size="20" />

<input type="submit" value="upload" />

</form> 
```

如果可能的话，我会尽量避免使用繁重的 js 或上传 2 次。选择文件时，我注意到它显示了它的名称：

![在此处输入图像描述](../Images/dd729419f0762d526c079096ebd8fc23.png)

有没有办法使用该功能来检索图像路径（上传者计算机中图像的路径）？理论上，我将能够在图像标签中使用它并在没有 js 的情况下显示图像。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T03:37:25.297

To be clear, you are not uploading the file twice in your current solution, right? You should only be uploading once, storing it in a temporary location, displaying it on the crop page, and then sending the crop parameters back on the second action.

Traditionally, there has been no way to access the contents of a file or the value of the file upload form. There would be a security risk letting a web page know the structure of your file system. (Are you on Windows, on an admin account, ...?) Eons ago you could do this, but we got wise.

[The File API introduced in HTML5](https://developer.mozilla.org/en/Using_files_from_web_applications/) makes it possible to access files without revealing this information, and there are some cool options available to your client-side application, the key ones being the `files` property of a file input and `URL.createObjectURL`.

当您更改表单时，输入中文件的内部表示会使用`fileInput.files`which 是一个`FileList`对象来公开。API 存在于其中您可以读取字节但您想将其设置为图像源的位置。

由于文件不是 URL，`URL.createObjectURL`因此围绕文件创建一个虚拟 URL，该 URL 只能由您的页面和同源 iframe 使用。将图像设置为此，然后加载，撤销 URL 并启动您的 jQuery 裁剪插件：

```
input.addEventListener('change', function () {
    preview.src = URL.createObjectURL(this.files[0]);
});

preview.addEventListener('load', function () {
    URL.revokeObjectURL(this.src);

    alert('jQuery code here. Src: ' + this.src + ', W: ' + this.width + ', H: ' + this.height);
}); 
```

至少在 Chrome 和 Firefox 中试用[这个 jsFiddle 。](http://jsfiddle.net/bnickel/yP7Bb/)这显然不是适用于所有浏览器的解决方案，但对于支持它的浏览器来说，它是增强它的好方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T22:48:33.107

您可以使用 css (http://www.seifi.org/css/creating-thumbnails-using-the-css-clip-property.html) 来完成它，但是与 jcrop 集成将非常困难。 .

我建议让用户等到它被上传。这就是 facebook 和大多数其他允许裁剪的网站所做的。

在任何情况下，它都不会加快上传过程，因此没有太多理由这样做。

您无法获得完整的文件路径。这将是一个安全问题：[http ://forums.asp.net/t/1077850.aspx/1](http://forums.asp.net/t/1077850.aspx/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T23:10:45.587

好吧，您可以使用其他带有预览的裁剪器库，就像 defusion 一样。

[http://www.defusion.org.uk/code/javascript-image-cropper-ui-using-prototype-scriptaculous/](http://www.defusion.org.uk/code/javascript-image-cropper-ui-using-prototype-scriptaculous/)

# ruby-on-rails - 保护联系表格电子邮件免遭滥用/垃圾邮件的选项？

> ID：11379222
> 
> 赞同：0
> 
> 时间：2012-07-07T22:38:28.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3, spam-prevention

我将为公众提供一种向我网站上列出的公司发送电子邮件的方式（通过他们页面上的联系我们表格）但是，我想采取措施防止滥用（最好不是验证码）。

以下是我提出的一些选择——是否有更多更好的方法来处理它？（我正在使用 Ruby on Rails 3）

*   创建一个记录 IP 地址的表，然后对已经在一个小时内发送 X 封电子邮件的 IP 设置临时禁令（比如 15 分钟）。这应该能够处理来自单个 IP 的人员和机器人垃圾邮件。垃圾邮件发送者切换 IP 是否常见？（我会删除超过一周的 IP，因此该表在任何时候都应该相当小）。

*   使用蜜罐 - 隐藏表单域。这仅对机器人有帮助。

*   以上两个一起使用

*   使用验证码。不太热衷于此，因为人们通常不喜欢它（而且它不是 API 的好选择）。

还有更多我没有想到的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T22:49:01.233

与 IP 地址相关联的联系表单提交超时是一个好主意（始终使用 REMOTE_ADDR 服务器环境变量，您不能信任其他任何内容。还要为 IPv6 地址做好准备）。

蜜罐不会解决任何问题，只会给您的网站带来更多流量。

验证码很有用 - 但您不必使用排版/OCR 验证码（如 ReCAPTCHA）。简单生成的数学表达式也可以正常工作。我认为您确实需要验证码，因为联系表格是自动机器人的目标。

但是最好的垃圾邮件保护是在收件人的一端。如果做不到这一点，请使用您自己的 SMTP 服务器，该服务器拥有自己的基于内容的垃圾邮件过滤器。

# php - 在网站中隐藏表格 ID

> ID：11379226
> 
> 赞同：0
> 
> 时间：2012-07-07T22:39:20.213
> 
> 标签：php

我正在构建一个包含大量 jquery / ajax 的 php 网站。基本上，该站点是一个简单的博客，我在首页显示最后 10 个数据库条目及其相应的标题。然后，用户可以单击标题（将其重新路由到 site.com/blog?cid=76），然后查看完整的博客条目。

基本上，显示与数据库中的 blog_id 对应的 76 是否存在任何数据库安全风险？我应该让事情变得更安全吗？如果是这样，我将如何去做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T22:43:11.563

不存在安全问题。

这类似于告诉我们这篇文章有什么 id：

stackoverflow.com/questions/ **11379226** /hiding-table-ids-in-a-website

它所做的只是告诉用户它是哪个帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T22:45:57.003

您实现它的方式强制您传递博客条目的 id：无论是在 POST 还是在 GET 请求中。如果应用程序足够安全，则传递 id 应该没有问题。你唯一能做的就是让 id 在 GET 请求中传递得更隐蔽一点：

例如：site.com/blogs/disp/76

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T22:47:23.387

是的，有风险。您需要了解和理解 SQL 注入。PHP 提供了几种方法，您可以使用它们来帮助防止此类攻击。

该站点对 SQL 注入和防止它的方法提供了很好的解释：

[http://rosstanner.co.uk/2012/01/php-mysql-preventing-mysql-injection/](http://rosstanner.co.uk/2012/01/php-mysql-preventing-mysql-injection/)

# c++ - 在 C/C++ 中将 libavcodec 与 linux 一起使用时出错

> ID：11379229
> 
> 赞同：0
> 
> 时间：2012-07-07T22:39:44.563
> 
> 标签：c++, libavcodec, libavformat, libav

问题： AVFormatContext::nb_streams 价值太小。我的 C++ 代码（错误处理、包含等省略以减少列表）：

```
void printA(AVFormatContext* _a)
{
std::cout << "duration    " << (unsigned long)_a->duration << "\n";
std::cout << "streams     " << _a->nb_streams << "\n";
std::cout << "format name " << _a->iformat->name << "\n";
std::cout << "bit_rate    " << _a->bit_rate << "\n";
std::cout << "long name   " << _a->iformat->long_name << "\n";
}

int main(int argc, char **argv)
{

if ( argc < 2 )
{
    std::cout << "Usage: " << argv[0] << " <file>\n";
    return 1;
}

    av_register_all();

AVFormatContext *pFormatCtx = avformat_alloc_context();

avformat_open_input (&pFormatCtx, argv[1], NULL, NULL);
avformat_find_stream_info(pFormatCtx, NULL);

printA( pFormatCtx );
return 0;
} 
```

跑步：

```
xx@xx /tmp/avlib $ ./avlibtest /ar/video/Nauka.Sna.2006.HDRip.AVC.mkv 
[matroska,webm @ 0x804c040] max_analyze_duration reached
[matroska,webm @ 0x804c040] Estimating duration from bitrate, this may be inaccurate
duration    134741408
streams     134531840     <---- !!! :-O
format name matroska,webm
bit_rate    0
long name   Matroska/WebM file format 
```

但是“avplay”程序运行良好。

# java - 无法修复“R 无法解析为变量”

> ID：11379230
> 
> 赞同：1
> 
> 时间：2012-07-07T22:39:45.347
> 
> 标签：java, android, r.java-file

我无法修复：

> “R 无法解析为变量”

我已经尝试过清理、构建、删除并确保丢失了任何“java.R”导入或其他任何东西，但我似乎仍然无法压制这个虫子！

对 id 或布局的任何引用都不起作用，它只会反馈错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T23:52:19.497

您的资源文件夹中的任何文件中是否有大写字母？不允许使用大写字母。

这把我挂了一次......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:55:34.010

尝试以下操作：

*   确保所有 XML 文件（菜单、布局等）都没有任何错误。那些阻止了 R frompm 的流派
*   从eclipse中删除项目并再次导入
*   查找 Android 元数据文件（我认为这些文件位于 .android 文件夹中）并删除这些文件

hth..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T17:11:57.690

尝试以下步骤来解决问题，它对我有用：

1.  清理项目，然后重新构建它。关闭项目，然后再次打开它。
2.  关闭项目，然后再次打开它。
3.  转到项目属性 > Java 构建路径 > 勾选 Android 版本复选框
4.  确保 XML 文件中没有错误，因为 xml 文件中的错误会阻止创建 R.jave 文件。
5.  尝试下载最新版本的 android SDK（如果有）。

# java - 使用中位数算法 O(n) 在未排序数组（包含重复项）中查找第 n 个最大数时出错

> ID：11379232
> 
> 赞同：0
> 
> 时间：2012-07-07T22:39:54.003
> 
> 标签：java

如果一个数组包含 1,7,7,3,6 并且如果用户询问第二大元素是什么，则输出应该是 7（而不是 6），因为重复值被视为不同。
这是我的代码。
我正在使用确定性搜索来找到合适的 pivot 。
它的复杂度是 O(n)。
我被我的代码生成的错误困住了。
请帮帮我。

```
import java.util.Random;
import java.util.Scanner;

public class deven  {

    public static void main(String args[]){
        Scanner in=new Scanner(System.in);
        int len=in.nextInt();
        int n=in.nextInt();
        int array[]=new int[len];
        for (int i = 0; i < len; i++) {
            array[i]=in.nextInt();
        }

        System.out.println(select(array,len,n));

    }

    static int below[];
    static int above[];
    static int pivot;
    static int i;
    static int j;
    static int x;
    static int y;
    static int index;
    static Random rand=new Random();
    static int select(int array[],int len,int n){

        if(len==1)
            return array[0];
        pivot=pivot(array, len);

        below=new int[len];
        above=new int[len];
        //System.out.println("Block");
        x=0;
        y=0;
        int temp=0;
        for(i=0;i<len;i++){
            if(array[i]>pivot){
                below[x++]=array[i];
            }
            else if(array[i]<pivot){
                above[y++]=array[i];
            }
            else {
                if(temp!=0){
                below[x++]=array[i];
            }
                temp=1;
        }
        }

        i = x;
           j = len - y;
        if(n<i) return select(below,x,n);
        else if(n>=j) return(select(above,y,n-j));
        else  return(pivot);

    }

    static int pivot(int array[],int len){
        if(len==1){
            return array[0];
        }
        int numOfGroups=len/5;
        if(len%5!=0){
            numOfGroups++;
        }

        int setOfMedians[]=new int[numOfGroups];
        for (int i = 0 ; i < numOfGroups ; i++)
        {
            int[] subset;
            if(array.length % 5 > 0)
            {
                if (i == numOfGroups - 1)
                {
                    subset = new int[array.length % 5];
                }
                else
                {
                    subset = new int[5];
                }
            }
            else
            {
                subset = new int[5];
            }
            for (int j = 0; j < subset.length ; j++)
            {
                subset[j] = array[5*i+j];
            }
            setOfMedians[i] = median(subset);
        }

        int goodpivot=select(setOfMedians, numOfGroups,numOfGroups/2 );
        return goodpivot;

    }
    static int median(int[] array)
    {
        if (array.length == 1)
        {
            return array[0];
        }
        int smallerCount = 0;
        for (int i = 0 ; i < array.length ; i++)
        {
            for (int j = 0 ; j < array.length ; j++)
            {
                if (array[i] < array[j])
                {
                    smallerCount++;
                }
            }
            if (smallerCount == (array.length - 1)/2)
            {
                return array[i];
            }
            smallerCount = 0;
        }
        return -1; 
    }

} 
```

**输入**
6
3
1 2 3 1 2 3
**输出**

```
Exception in thread "main" java.lang.StackOverflowError  
    at deven.pivot(deven.java:99)  
    at deven.select(deven.java:34)  
    at deven.pivot(deven.java:102)  
    at deven.select(deven.java:34)  
    at deven.select(deven.java:59)  
    at deven.select(deven.java:59)  
    at deven.select(deven.java:59) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T12:55:24.057

问题是你的中位数方法。它不应该返回 -1。在中值方法的最后一行，而不是

```
return -1; 
```

将其更改为

```
return array[rand.nextInt(array.length)]; 
```

请注意，此修复只是尝试修复您遇到的错误。从中位数方法不返回中位数的意义上说，这不是一个好的解决方法。我认为应该重构应用程序。修复的想法实际上是在pivot方法中。一个好的支点是中位数。但是，如果您无法有效地找到中位数，那么枢轴可以是数组中的随机选择。

### 更新：

让我们修复中位数方法：

```
static int median(int[] array) {
    if (array.length == 0) {
        throw new IllegalArgumentException("array cannot be empty.");
    }

    int mid = array.length / 2;
    for (int candidate : array) {
        int lower = 0;
        int higher = 0;
        for (int value : array) {
            if (value < candidate) {
                lower++;
            }
            else if (value > candidate) {
                higher++;
            }
        }
        if (lower <= mid && higher <= mid) {
            return candidate;
        }
    }
    throw new IllegalStateException();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T14:52:52.503

如果您在更小的计数之外还维护了一个 equalsCount，那么当您的候选值也是重复值时，您应该能够检测到它是否是中位数。

（解释）

当您的中值方法意外失败时，您似乎故意将 -1 作为无效值返回。抛出某种异常会更合适，但你真正想要的是它永远不会达到那个点。

当中位数重复时，您的算法将失败。例如，在集合 { 1, 2, 2, 2, 3 } 中，2 是明显的中位数，但从来没有一个点恰好有 2 个值“小于”任何正在验证的值。

如果您同时计算较小和相等的值，那么如果您当前的测试通过，或者较小的计数小于中点且较小的 + 相等计数大于中点，则您可以知道您的候选人是中位数。

# asp.net-mvc - 使用实体框架存储用户特定数据

> ID：11379234
> 
> 赞同：1
> 
> 时间：2012-07-07T22:40:43.257
> 
> 标签：asp.net-mvc, entity-framework

我已经阅读了几篇关于 .Net Entity Framework 的文章，这些文章并没有让我想尝试一下。但现在我已经开始了一个小测试。

我建立了一个 MVC 3 网站，为我的家人处理经济交易，只是为了好玩。所以我设置了会员提供程序并让登录功能正常工作。通常，我在列中使用 Membership Guid 来向特定用户标识每一行。

我在我的项目中设置了这个类：

```
namespace mEconomy.Models
{
    public class Transaction
    {
        public Guid UserID { get; set; }
        public int TransactionID { get; set; }
        public DateTime Date { get; set; }
        public string Text { get; set; }
        public string Category { get; set; }
        public decimal Amount { get; set; }
    }

    public class TransactionDBContext : DbContext
    {

        public DbSet<Transaction> Transactions { get; set; }
    }
} 
```

工作正常，但我得到了所有用户的信息。如果用户 A 登录并创建一些事务，则用户 B 可以创建一个帐户并查看它们。这里的最佳做法是什么？如何保持用户数据分离？

我什至尝试将 UserID 设置为私有，如下所示：

```
private Guid UserID = (Guid)Membership.GetUser().ProviderUserKey; 
```

但这根本不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T23:02:16.417

在您的控制器中，使用 linq 查询或 fluent api 仅检索所需的条目：

```
TransactionDBContext db = new TransactionDBContext();
Guid userID = (Guid)Membership.GetUser().ProviderUserKey; 
```

查询生成器：

```
var transactions = db.Transactions.Where(t => t.UserId == userID); 
```

或 Linq：

```
var transactions = from transaction in db.Transactions
                   where transaction.UserId == userID
                   select transaction; 
```

**编辑：**

您是否希望始终获得由 userId 过滤的数据，而不必在每个地方都执行 where 子句？

在这种情况下，您最好的选择是在模型中创建一个方法来为您检索这些数据：

```
// In your model code
public IQueryable<Transaction> FromCurrentUser()
{
    Guid userID = (Guid)Membership.GetUser().ProviderUserKey;
    return db.Transactions.Where(t => t.UserId == userID);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T23:01:06.770

在您的“交易”列表页面中，只需通过 UserId 限制交易。

```
public ActionResult List() {
 using (var db = new TransactionDBContext()) {
  var results = db.Transactions.Where(x => x.UserID == (Guid)Membership.GetUser().ProviderUserKey).ToList();
  return View(results);
 }
} 
```

# javascript - 使用backbone.js 的命名约定（在rails 上）

> ID：11379239
> 
> 赞同：1
> 
> 时间：2012-07-07T22:42:11.523
> 
> 标签：javascript, ruby-on-rails-3, backbone.js

这不是特定于骨干的，但这是我问自己这个问题的方式。我正在使用backbone-rails gem 将主干集成到我的rails 应用程序中。内置的生成器会生成像这样的对象名称 : `Appname.Routers.PostsRouter`,`Appname.Views.Posts.EditView`等。

我想知道：是否真的有必要在对象名称的末尾添加`Router`或添加`View`，因为它们是命名空间的？我不怎么做 JS，对于骨干也一样，所以我不确定通常的约定，但从我的立场来看，这对我来说似乎是多余的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:28:32.183

你说的对。这只是宝石作者选择命名它们的方式。

# batch-file - 在批处理文件中显示 .txt 的内容？

> ID：11379242
> 
> 赞同：6
> 
> 时间：2012-07-07T22:42:51.787
> 
> 标签：batch-file

我现在正在处理一个批处理文件，我已经完成了我需要的一切，但我被困在了一个点上。我使用的一个程序会吐出一个日志文件，然后我让它把这个文件放在 C:drive 的一个文件夹中。我想要做的是让它读取这个 .txt 并将其作为回声吐回批处理文件中。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-07T22:53:23.980

你可以把它放在你的批处理文件中：

```
type C:\folder\test.txt 
```

这将回显 test.txt 的内容。

# android - Cocos2D 示例中的 NoClassDefFoundError

> ID：11379246
> 
> 赞同：4
> 
> 时间：2012-07-07T22:43:33.087
> 
> 标签：android, noclassdeffounderror, cocos2d-android

我在 [这个问题](https://stackoverflow.com/questions/10210302/android-game-development-with-cocos2d-lib)上遇到了同样的问题，但解决方案对我不起作用。我已将我的 JAR 包含在构建路径中。我在做什么错？
我正在使用[相同的示例](http://dan.clarke.name/2011/04/how-to-make-a-simple-android-game-with-cocos2d/)。

这是崩溃日志：

```
07-08 04:04:33.440: E/AndroidRuntime(751): FATAL EXCEPTION: main
07-08 04:04:33.440: E/AndroidRuntime(751): java.lang.NoClassDefFoundError: org.cocos2d.opengl.CCGLSurfaceView
07-08 04:04:33.440: E/AndroidRuntime(751):  at a.b.Cocos2DGameActivity.onCreate(Cocos2DGameActivity.java:22)
07-08 04:04:33.440: E/AndroidRuntime(751):  at android.app.Activity.performCreate(Activity.java:4465)
07-08 04:04:33.440: E/AndroidRuntime(751):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-08 04:04:33.440: E/AndroidRuntime(751):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
07-08 04:04:33.440: E/AndroidRuntime(751):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-08 04:04:33.440: E/AndroidRuntime(751):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
07-08 04:04:33.440: E/AndroidRuntime(751):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
07-08 04:04:33.440: E/AndroidRuntime(751):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-08 04:04:33.440: E/AndroidRuntime(751):  at android.os.Looper.loop(Looper.java:137)
07-08 04:04:33.440: E/AndroidRuntime(751):  at android.app.ActivityThread.main(ActivityThread.java:4424)
07-08 04:04:33.440: E/AndroidRuntime(751):  at java.lang.reflect.Method.invokeNative(Native Method)
07-08 04:04:33.440: E/AndroidRuntime(751):  at java.lang.reflect.Method.invoke(Method.java:511)
07-08 04:04:33.440: E/AndroidRuntime(751):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-08 04:04:33.440: E/AndroidRuntime(751):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-08 04:04:33.440: E/AndroidRuntime(751):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T19:53:53.530

我建议您将库更改为 cocos2d-x，因为 cocos2d for android 将不再更新。

Cocos2d-x 在 C++ 中工作，并使用 JNI（Java 原生接口）来工作。这是您开始使用它所需的所有信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:51:48.103

我遇到同样的问题。我将源代码复制到 src 而不是包含 jar。并且必须将项目的jre版本改为1.6

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T07:03:27.543

我猜问题出在 JAR 文件中。幸运的是该项目是开源的，所以我添加了源文件，它停止给我错误。该教程中有一个可用的源代码，它也使用源文件，而不是 JAR。

# objective-c - 需要一个非常简单的导航控制器，在标签栏控制器内有一个表格视图

> ID：11379247
> 
> 赞同：0
> 
> 时间：2012-07-07T22:43:34.757
> 
> 标签：objective-c, ios, uitableview, uinavigationcontroller

我有一个带有标签栏控制器（2 个标签）的应用程序。在一个选项卡视图控制器中，一个按钮会导致一个警报窗口。我想要警报窗口的一个按钮来调用包含可能答案的表格视图。我希望该表视图有一个`done`按钮和一个`title`. 我认为这意味着必须使用导航控制器。但是我在导航控制器上能找到的大多数东西都假设了一个更复杂的情况。这是警报窗口逻辑的一部分：

```
-(void) alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex

{ 
    if (buttonIndex == 2) {
        AnswersViewController *aVC = [[AnswersViewController alloc] init];
        [self presentViewController:aVC
                           animated:YES
                         completion:NULL];    
    }
} 
```

`AnswersViewController`看起来像这样：

```
@interface AnswersViewController : UITableViewController
@end

@implementation AnswersViewController

- (id) init
{
    self = [super initWithStyle:UITableViewStylePlain];
    return self;
}

- (id) initWithStyle:(UITableViewStyle)style
{
    return [self init];   

}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [[self view] setBackgroundColor:[UIColor redColor]];

}

@end 
```

此代码全部按预期工作（出现空红色`UITableView`）。

我猜有两个问题： 1\. 是否有一个简单的修改可以给我一个`done`按钮和`title`我的表格视图？2\. 如果我必须使用导航控制器（可能），我如何制作一个带有`done`按钮的简单导航控制器`title`并将表格视图嵌入其中？哦，我想以编程方式执行此操作。而且我认为我更喜欢`done`按钮并`title`位于导航栏中，不需要工具栏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T23:07:57.187

* * *

要获得所需的内容，您确实需要使用 UINavigationController。这将提供 UINavigationBar，您可以在其中显示标题和按钮。

要使用 UINavigationController 实现这一点，您需要像这样进行平滑处理（假设您使用的是 ARC，因此您无需担心内存管理）：

```
-(void) alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex

{ 
    if (buttonIndex == 2) {
        AnswersViewController *aVC = [[AnswersViewController alloc] init];

        //Make our done button
        //Target is this same class, tapping the button will call dismissAnswersViewController:
        aVC.navigationItem.leftBarButtonItem =  [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(dismissAnswersViewController:)];

       //Set the title of the view controller
       aVC.title = @"Answers";

        UINavigationController *aNavigationController = [[UINavigationController alloc] initWithRootViewController:aVC];
        [self presentViewController:aNavigationController
                       animated:YES
                     completion:NULL];
    }
} 
```

然后，您还将`- (void)dismissAnswersViewController:(id)sender`在与 UIAlertView 委托方法相同的类中实现（基于我在这里的实现）。

希望这可以帮助！

# ruby-on-rails - 表生成器 rails gem 仅显示 5 个日期

> ID：11379254
> 
> 赞同：1
> 
> 时间：2012-07-07T22:45:32.083
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我在我的 Rails 应用程序中使用 table builder gem，它工作正常，但每月只显示 5 个事件。任何线索为什么？

[https://github.com/watu/table_builder](https://github.com/watu/table_builder)

```
<div id="calendar">
  <h3 id="month">
    <%= link_to "<", :month => (@date.beginning_of_month-1).strftime("%Y-%m") %>
    <%=h @date.strftime("%B %Y") %>
    <%= link_to ">", :month => (@date.end_of_month+1).strftime("%Y-%m") %>
  </h3>
  <%= calendar_for @occasions, :year => @date.year, :month => @date.month do |calendar| %>
    <%= calendar.head('sun','mon', 'tue', 'wed', 'thu', 'fri', 'sat') %>
    <%= calendar.day(:day_method => :dateg) do |date, occasions| %>
      <%= date.day %>
      <% occasions.each do |occasion| %>
        <%= h(occasion.pname) %><%= '\'s' %>&nbsp;<%= h(occasion.name) %>
      <% end %>
    <% end %>
  <% end %>
</div> 
```

# javascript - 自动更新开店/关店正在显示

> ID：11379265
> 
> 赞同：0
> 
> 时间：2012-07-07T22:48:21.177
> 
> 标签：javascript, html, css

这个网站的新手。我已经搜索和搜索并不断被引用回上一篇文章 -[如何确定在营业时间/工作日显示的图像？](https://stackoverflow.com/questions/5887201/can-someone-help-me-adjust-this-script-to-determine-the-image-that-is-displayed)

上一张海报试图完成我想做的事情。我尝试了 jsfiddle 中显示的代码，但我认为某处缺少某些东西（在 css 中？）。实际上，在jsfiddle中，结果窗口中同时显示“store is”和“store is closed”。无论我做什么，我似乎都无法让它工作。

如果他们实际上是正确的，有人可以告诉我我需要做什么/我需要把这些放在哪里吗？如果商店根据当地时间开放或关闭，我只想显示一个小图像。

任何有耐心的人的任何想法都将不胜感激。如果有人知道的话，我什至会在这一点上选择一个可配置的小部件。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T23:31:36.613

小提琴很好用。。

只是***打开***的图像不再可用..

检查[这个小提琴](http://jsfiddle.net/gaby/AcFhg/49/)（*可用的不同照片..*）和一个额外的css规则，默认情况下将打开/关闭的div设置为隐藏..（*所以你看不到闪烁的..*）

# algorithm - 最佳大 O 时间效率是否始终与递归解决方案的最佳空间效率相同？

> ID：11379267
> 
> 赞同：0
> 
> 时间：2012-07-07T22:48:32.960
> 
> 标签：algorithm, recursion, big-o, performance

如果递归解决方案最终连续调用自身约 N 次，然后再返回一个级别，则空间效率最多为 O(N)，因为 N 次调用中的每一个都占用了一定数量的堆栈空间。

这是否也意味着时间效率充其量也是 O(N)，因为递归函数内部的代码类似于运行 ~N 次的内部循环代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T22:53:42.257

除了@Ben 的回答之外，还有“[尾递归](http://en.wikipedia.org/wiki/Tail_call)”的情况，其中当前堆栈帧被删除并替换为被调用者的堆栈帧，但仅当调用者的最后一个动作是返回被调用者的结果时。当以完全函数式语言实现时，这可能导致 O(n) 时间函数具有 O(1) 空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T23:06:46.123

不，但你的观察有一些道理——基本上，如果你知道任何算法（递归或其他算法，因为我们不区分两者；并且没有任何东西可以真正区分它们，这更多是风格问题) 对于给定的问题至少具有空间复杂度`f(n)`，它也必须至少具有时间复杂度`f(n)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T22:51:14.463

不，因为递归算法的每一步都可能比 O(1) 花费更长的时间。如果每一步都取 O(n)，那么总时间复杂度是 O(n^2)。

# api - 通过 mailchimp inlineCss API curl html 文件

> ID：11379273
> 
> 赞同：0
> 
> 时间：2012-07-07T22:50:40.723
> 
> 标签：api, curl, command-line-interface, html-email, mailchimp

我正在使用 MailChimps inline-css 表单：[http](http://beaker.mailchimp.com/inline-css) ://beaker.mailchimp.com/inline-css 。它在准备用于作为电子邮件发送的 html 文件方面做得很好。

我有一个 api 密钥。我不希望只为一个 API 调用运行他们的 PHP 应用程序。如果可以使用 curl 访问他们的 inlineCss API？如果是这样，语法是什么？

这是文档页面：[http ://apidocs.mailchimp.com/api/1.2/inlinecss.func.php](http://apidocs.mailchimp.com/api/1.2/inlinecss.func.php)

另请参阅此要点的第 2096 行：[https ://gist.github.com/740362](https://gist.github.com/740362)

我的钥匙看起来像：f1b46???????????????????f2d5-us2

这是我想要实现的目标的开始：

```
curl post -d @input.html apiKey=xxxxxxxx "http://us1.api.mailchimp.com/1.2/" 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:41:57.957

这就是我为寻找类似解决方案的任何人所做的。欢迎评论，其他选项：

import os import re import urllib import mechanize import xml.sax.saxutils as saxutils from xml.sax.saxutils import unescape

```
try:  
  issueRoot = os.environ['newslettersroot'] + os.environ['currYear'] + '/' + os.environ['issueRoot'] + '/'
except KeyError: 
   print "Please run init.bat"
   sys.exit(1)

srcEmailFilename = 'email.html'
dstEmailFilename = 'email_inline_css.html'

# retrieve <body> section only
html = open(issueRoot + srcEmailFilename, 'rb').read()
html = re.findall("(?si)<body.*?</body>", html)[0]

# use mailchimp inlineCss site to inject class rules into html tags
response = mechanize.urlopen("http://beaker.mailchimp.com/inline-css")
# retrieve form
form = mechanize.ParseResponse(response, backwards_compat=False)[0]

form["html"] = html
# form["strip"] = "checked"

# submit form and retrieve result
html = mechanize.urlopen(form.click()).read()

match = re.search('<textarea name="text" cols="100" rows="12">(.*?)</textarea>', html, re.DOTALL | re.IGNORECASE | re.MULTILINE)

if not match:
    print html
    exit("Expected to find output from mailchimp.")

# clean up output
html = match.group(1)
html = saxutils.unescape(html)
html = urllib.unquote_plus(html)
html = unescape(html, {"&apos;": "'", "&quot;": '"'})
html = html.replace('&amp;', '&').replace('%2F', '/').replace('%3A', ':')

# @sed -r 's/ class="[a-zA-Z0-9-]+"//g' %newslettersroot%%currYear%\%issueRoot%\email_inlinedcss.html > %newslettersroot%%currYear%\%issueRoot%\email_removedstyle.html

#replace class tags
html = re.sub(r'(?sim)\s*class="[a-zA-Z0-9-]+"', "", html)

fh = open(issueRoot + dstEmailFilename, 'wb')
fh.write(html)
fh.close() 
```

# image - Matlab中的imagesc（）不显示等轴

> ID：11379277
> 
> 赞同：3
> 
> 时间：2012-07-07T22:51:16.117
> 
> 标签：image, matlab, plot, scale, axis

我使用以下代码行来绘制图像：

```
for t=1:subplotCol
    subplot(subplotRow,subplotCol,t)
    imagesc([1 100],[1 100],c(:,:,nStep*t));
    colorbar
    xlabel('X-axis')
    ylabel('Y-axis')
    title(['Concentration profile at t_{',num2str(nStep*t),'}'])

    subplot(subplotRow,subplotCol,subplotCol+t)
    hold on;
    plot(distance,gamma(:,1,t),'-ob');
    plot(distance,gamma(:,2,t),'-or');
    plot(distance,gamma(:,3,t),'-og');
    xlabel('h');ylabel('\gamma (h)');
    legend(['\Theta = ',num2str(theta(1))],...
        ['\Theta = ',num2str(theta(2))],['\Theta = ',num2str(theta(3))]);
end 
```

我得到以下带有图像的子图：

![在此处输入图像描述](../Images/17b5ea12de4fcea3fc7dc0890d174021.png)

正如您所看到的，第一行中的图像现在在 X 轴和 Y 轴（Y 轴比 X 轴长）上等比例缩放，即使第一行上每个图像的图像矩阵大小为 100x100。

有人可以帮助如何使第一行中的图像看起来像正方形而不是我目前得到的矩形。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T23:23:19.973

使用`dataAspectRatio`轴的属性，并将其设置为`[1 1 1]`

```
%# create a test image
imagesc(1:10,1:10,rand(10)) 
```

![在此处输入图像描述](../Images/0d6dbdeda1ea16e181c08d4a2efbd616.png)

```
%# you should use the handle returned by subplot
%# instead of gca
set(gca,'dataAspectRatio',[1 1 1]) 
```

![在此处输入图像描述](../Images/dbef2f6fb8815065832f8be15e49c891.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T13:07:32.850

另一种方法是使用命令`axis equal`

关于不同物体的大小，可以设置图中各轴的准确位置，例如第一个使用： `subplot(2,2,1); set(gca,'Position',[0.05 0.05 0.4 0.4])`

# c++ - c++ http tcp 服务器到服务器连接

> ID：11379279
> 
> 赞同：1
> 
> 时间：2012-07-07T22:51:42.377
> 
> 标签：c++, network-programming

我正在尝试将服务器/客户端模型转换为服务器/服务器模型，以便让我的 2 台运行该程序的计算机通过 url 或其他类似 IP 地址的方式找到彼此。我想知道这是否可能2台服务器通过url连接。还是ip是唯一的方法？示例将不胜感激，因为这是我编写 C++ 的第二天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T23:15:48.783

对于 HTTP，服务器只与客户端对话。所以，我不确定服务器到服务器是什么意思。

URL 可用于访问 HTTP 服务器，但在实际建立网络连接之前，需要将主机名解析为 IP 地址。您应该能够找到将为您完成这些细节的库，但手动建立与 HTTP 服务器的套接字连接并不难。

有些配置有多个服务器，充当单个服务器。这些有时被称为网络农场或 HTTP 集群。通常，集群前面有某种负载均衡器。许多 HTTP 负载均衡器支持服务器关联功能，以确保将客户端发送到集群中的同一台服务器以进行后续操作。

在集群配置中，服务器可能需要同步共享状态，例如文件系统数据或配置数据。这通常由 HTTP 服务器进程本身外部的某种机制处理。HTTP 服务器进程可能需要配合同步，但这可以像重启进程一样简单。

HTTP 服务器配置的另一种模式称为反向代理配置。一组 HTTP 代理服务器位于单个 HTTP 服务器的前面。代理服务器被认为是廉价且可消耗的实体，可以从 HTTP 服务器本身卸载工作，提供可扩展的方式来增加 HTTP 服务器容量。

有许多开源 HTTP 服务器和代理项目可作为实现它们的示例。如果您尝试构建自己的自定义服务器应用程序，可以查看[Boost asio](http://www.boost.org/doc/libs/1_39_0/doc/html/boost_asio/example/http/client/sync_client.cpp)中的 HTTP 示例。

# android - 减少按钮内的文本填充

> ID：11379285
> 
> 赞同：7
> 
> 时间：2012-07-07T22:53:19.190
> 
> 标签：android, button, text, padding

是否可以稍微减少普通 Android Button 内的文本填充，以减少按钮的宽度？

当然，整个文本应该仍然可见。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-04-29T09:41:37.373

按钮上已经设置了`android:minHeight`和`android:minWidth`属性。制作它们`0dp`或`1dp`使背景适合文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T23:14:18.993

“普通”Android 按钮因主题而异，但您可能希望为继承自您选择的按钮的按钮定义[自定义样式。](http://developer.android.com/guide/topics/ui/themes.html)

# genetic-algorithm - 遗传算法——与无性遗传算法相比，有性遗传算法有什么好处？

> ID：11379287
> 
> 赞同：9
> 
> 时间：2012-07-07T22:53:38.373
> 
> 标签：genetic-algorithm, evolutionary-algorithm, genetic-programming

直觉上我认为如果我想找到“最好”的参数集，我可以简单地从许多孩子的子集中挑选表现最好的一个人，让那个人产生 100 个与他相似的孩子，挑选表现最好的人并重复。专门挑选最好的 2 和杂交品种的目的是什么？就此而言，为什么不选择 3、4 或 10 个父母（“狂欢衍生”受精卵）来创造每一代孩子呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T23:34:21.207

“来自许多孩子的一个子集”——这些孩子是如何产生的，是什么机制使他们彼此不同？“产生 100 个与自己相似的孩子”——如果不完全像自己，那么是什么机制使他们相似，但又不完全相同？

有性生殖是回答这些问题的一种机制。通过有性繁殖，你创造了新的组合，由适合个体的基因组成。仅仅使用随机突变作为创造多样性和新组合的机制就是它所说的 - 随机 - 黑暗中的一枪。有性繁殖利用成功个体的基因创造了新的组合，这不仅仅是随机的。

质疑哪个更好，有性与无性是一个很好的问题，关于有性与无性这个话题的文章很多，但并非都支持有性。有成功的无性机制，尽管我不确定您在问题中提出的替代方案是否在其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T00:37:27.777

可以这样想：你表现最好的人可能在 10 个领域中的 3 个方面优于平均水平。他（他的无性繁殖的孩子）的小变化可能会在这 3 个方面具有优势区域：可能是 4 个，也可能是 2 个，具体取决于突变。但是表现最好的男人和表现最好的女孩在 10 个方面可能有 5 个方面更好（他在 3 个方面优于平均水平，她在 3 个方面优于平均水平，也许他们有 1 个重叠的地方），所以如果他们有很多孩子，其中一个*可能*在 5 个方面优于平均水平（也许其中一个可能不会继承任何优势——比如休息时间）。如果那个 5 区优势的孩子与另一个 5 区优势的孩子交配，那么虽然重叠优势的机会更多，但仍有很大的机会（在我们的“10 基因”世界中）孩子将拥有更有利的基因）。

它是复杂环境中几个特征的*重组*，这才是遗传算法的核心。这并不直观，因为我们通常不认为一次转动控制面板上的每个旋钮是优化的好方法，但是如果您有很多参数并且它们非常独立，则可以。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T14:26:34.197

你拥有的父母越少，你就越有可能在很长一段时间内陷入局部最优——可能是一个不太好的局部最优。只有一个父母，剩下的唯一搜索机制是个体突变。

您拥有的父母越多，您就越不可能捕捉到最初导致他们被选中进行繁殖的原始父母的任何事情。细节将取决于你的 n 元交叉是如何工作的，但直观地说，你拥有的父母越多，你从任何一个特定父母那里获得的遗传物质就越少，孩子继承的可能性就越小（因此改进）他们父母的任何有益的多染色体特征。

这与模式定理有关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T15:06:44.040

从技术上讲，您可以在您的人群中拥有源自狂欢的受精卵，但没有数学证据（至少据我所知）证明它们改善了多样性或您的算法发现的最终结果。此外，狂欢运营商（用你的术语）比简单的双亲类型更复杂，不容易被学生理解。因此，它们没有被宣传（并不意味着它们不被允许）。

实际上，您可以在 GA 中混合使用单亲和双亲。正如一个答案已经指出的那样，单父元素等效于本地搜索，从技术上讲，您将实现模因算法，这通常是对简单 GA 的改进。

# python - 无和空字符串的 CSV 阅读器行为

> ID：11379300
> 
> 赞同：29
> 
> 时间：2012-07-07T22:55:47.070
> 
> 标签：python, csv, string, nonetype

在使用 Python 的模块在 Python 数据结构和 csv 表示之间来回切换时，我想区分`None`空字符串 () 和空字符串 ( )。`''``csv`

我的问题是当我运行时：

```
import csv, cStringIO

data = [['NULL/None value',None],
        ['empty string','']]

f = cStringIO.StringIO()
csv.writer(f).writerows(data)

f = cStringIO.StringIO(f.getvalue())
data2 = [e for e in csv.reader(f)]

print "input : ", data
print "output: ", data2 
```

我得到以下输出：

```
input :  [['NULL/None value', None], ['empty string', '']]
output:  [['NULL/None value', ''], ['empty string', '']] 
```

当然，我可以使用以下内容来区分`data`和空字符串：`data2``None`

```
data = [d if d!=None else 'None' for d in data]
data2 = [d if d!='None' else None for d in data2] 
```

但这会部分破坏我对`csv`模块的兴趣（用 C 实现的快速反序列化/序列化，特别是在处理大型列表时）。

是否有一个`csv.Dialect`或参数可以让他们在这个用例中区分和`csv.writer`？`csv.reader``''``None`

如果没有，是否有兴趣实施补丁`csv.writer`以启用这种来回？（可能是一个`Dialect.None_translate_to`默认`''`为确保向后兼容性的参数。）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-08T01:52:00.643

`csv`您可以通过创建自己的单例`None`类/值版本来至少部分回避模块的功能：

```
from __future__ import print_function
import csv

class NONE(object):
    ''' None-like class. '''
    def __repr__(self): # Method csv.writer class uses to write values.
        return 'NONE'   # Unique string value to represent None.
    def __len__(self):  # Method called to determine length and truthiness.
        return 0

NONE = NONE()  # Singleton instance of the class.

if __name__ == '__main__':

    try:
        from cStringIO import StringIO  # Python 2.
    except ModuleNotFoundError:
        from io import StringIO  # Python 3.

    data = [['None value', None], ['NONE value', NONE], ['empty string', '']]
    f = StringIO()
    csv.writer(f).writerows(data)

    f = StringIO(f.getvalue())
    print(" input:", data)
    print("output:", [e for e in csv.reader(f)]) 
```

结果：

```
 input: [['None value', None], ['NONE value', NONE],   ['empty string', '']]
output: [['None value', ''],   ['NONE value', 'NONE'], ['empty string', '']] 
```

使用`NONE`代替`None`将保留足够的信息，以便您能够区分它和任何实际的空字符串数据值。

### 更好的选择……</h3>

您可以使用相同的方法来实现一对相对轻量级的`csv.reader`“`csv.writer`代理”类——这是必要的，因为你实际上不能子类化用 C 编写的内置`csv`类——而不会引入大量开销（因为大多数处理仍将由底层内置执行）。这将使发生的事情完全透明，因为它全部封装在代理中。

```
from __future__ import print_function
import csv

class csvProxyBase(object): _NONE = '<None>'  # Unique value representing None.

class csvWriter(csvProxyBase):
    def __init__(self, csvfile, *args, **kwrags):
        self.writer = csv.writer(csvfile, *args, **kwrags)
    def writerow(self, row):
        self.writer.writerow([self._NONE if val is None else val for val in row])
    def writerows(self, rows):
        list(map(self.writerow, rows))

class csvReader(csvProxyBase):
    def __init__(self, csvfile, *args, **kwrags):
        self.reader = csv.reader(csvfile, *args, **kwrags)
    def __iter__(self):
        return self
    def __next__(self):
        return [None if val == self._NONE else val for val in next(self.reader)]
    next = __next__  # Python2.x compatibility.

if __name__ == '__main__':

    try:
        from cStringIO import StringIO  # Python 2.
    except ModuleNotFoundError:
        from io import StringIO  # Python 3.

    data = [['None value', None], ['empty string', '']]
    f = StringIO()
    csvWriter(f).writerows(data)

    f = StringIO(f.getvalue())
    print("input : ", data)
    print("ouput : ", [e for e in csvReader(f)]) 
```

结果：

```
 input: [['None value', None], ['empty string', '']]
output: [['None value', None], ['empty string', '']] 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-07T23:41:21.877

[该文档](http://docs.python.org/library/csv.html#csv.writer)表明您想要的东西是不可能的：

> 为了尽可能轻松地与实现 DB API 的模块进行交互，值 None 被写为空字符串。

这在`writer`该类的文档中，表明它适用于所有方言，并且是 csv 模块的固有限制。

我会支持改变这一点（以及 csv 模块的各种其他限制），但可能是人们希望将这类工作卸载到不同的库中，并保持 CSV 模块简单（或至少一样简单照原样）。

如果您需要更强大的文件读取功能，您可能希望查看 numpy、scipy 和 pandas 中的 CSV 读取功能，我记得它们有更多选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T23:19:45.707

我认为仅仅用方言不可能做你想做的事，但你可以编写自己的 csv.reader/write 子类。另一方面，我仍然认为这对于这个用例来说是多余的。即使您想捕获的不仅仅是`None`，您可能只是想要`str()`：

```
>>> data = [['NULL/None value',None],['empty string','']]
>>> i = cStringIO.StringIO()
>>> csv.writer(i).writerows(map(str,row) for row in data)
>>> print i.getvalue()
NULL/None value,None
empty string, 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T23:29:11.157

由于您可以控制序列化数据的使用者和创建者，因此请考虑使用支持这种区别的格式。

例子：

```
>>> import json
>>> json.dumps(['foo', '', None, 666])
'["foo", "", null, 666]'
>>> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T04:23:06.107

正如其他人指出的那样，您不能通过`csv.Dialect`or 参数来真正做到这一点`csv.writer`和/或`csv.reader`. 但是，正如我在一条评论中所说，您可以通过*有效地*继承后两者来实现它（您显然不能真正做到，因为它们是内置的）。“子类”在写入时所做的只是截取`None`值并将它们更改为唯一的字符串，并在读回它们时反转过程。这是一个完整的示例：

```
import csv, cStringIO
NULL = '<NULL>'  # something unlikely to ever appear as a regular value in your csv files

class MyCsvWriter(object):
    def __init__(self, *args, **kwrds):
        self.csv_writer = csv.writer(*args, **kwrds)

    def __getattr__(self, name):
        return getattr(self.csv_writer, name)

    def writerow(self, row):
        self.csv_writer.writerow([item if item is not None else NULL
                                      for item in row])
    def writerows(self, rows):
        for row in rows:
            self.writerow(row)

class MyCsvReader(object):
    def __init__(self, *args, **kwrds):
        self.csv_reader = csv.reader(*args, **kwrds)

    def __getattr__(self, name):
        return getattr(self.csv_reader, name)

    def __iter__(self):
        rows = iter(self.csv_reader)
        for row in rows:
            yield [item if item != NULL else None for item in row]

data = [['NULL/None value', None],
        ['empty string', '']]

f = cStringIO.StringIO()
MyCsvWriter(f).writerows(data)  # instead of csv.writer(f).writerows(data)

f = cStringIO.StringIO(f.getvalue())
data2 = [e for e in MyCsvReader(f)]  # instead of [e for e in csv.reader(f)]

print "input : ", data
print "ouput : ", data2 
```

输出：

```
input :  [['NULL/None value', None], ['empty string', '']]
ouput :  [['NULL/None value', None], ['empty string', '']] 
```

这有点冗长，可能会稍微减慢 csv 文件的读取和写入速度（因为它们是用 C/C++ 编写的），但这可能没什么区别，因为该过程可能是低级 I/O 绑定的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-25T08:20:30.333

我也遇到了这个问题并找到了这个[https://bugs.python.org/issue23041](https://bugs.python.org/issue23041)。

问题的解决方案：

> *   子类 csv.DictWriter，使用字典作为元素类型，并让其 writerow 方法执行特定于应用程序的工作。
> *   定义一个 writerow() 函数，它执行类似的操作（本质上是包装 csv.writerow()）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-14T14:27:01.170

如上所述，这是`csv`模块的限制。一种解决方案是使用简单的字典理解重写循环内的行，如下所示：

```
reader = csv.DictReader(csvfile)
for row in reader:
    # Interpret empty values as None (instead of '')
    row = {k: v if v else None for k, v in row.items()}
    : 
```

# html - 动态定位缩放的 html 图像

> ID：11379301
> 
> 赞同：1
> 
> 时间：2012-07-07T22:56:01.277
> 
> 标签：html, css, positioning, scale, offset

在 html 页面上放置了一张地图作为背景图像。还有一个透明图像表示源自地图上某个点的声波，即波的中心。当波浪图像以其全尺寸放置在地图顶部时，波浪图像的中心位于正确的位置（指向地图上所需的中心点），使用`#waveImage {position:absolute;bottom:0;right:0}`css 规则。

问题是我需要基于任意算法动态缩放波浪图像，永远不会大于其原始大小。显然，当图像较小时，由于初始 css 定位，中心点从原始中心偏移，朝向右侧和底部，所以我必须移动波浪图像，使波浪中心仍然指向相同地图上的位置。我需要的是从右侧和底部计算正确偏移量的算法。

一些可能有进一步帮助的信息：波浪图像大小为 673 像素 x 655 像素，波浪的中心不在图像的中心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T07:45:28.910

[http://jsfiddle.net/k7uGu/6/](http://jsfiddle.net/k7uGu/6/)

HTML：

```
<div class="map">
    <div class="signal-wrap">
        <img class="signal" src="signal.png">
    </div>
</div>​ 
```

CSS

```
.map {
    background: url(map.png) no-repeat;
    position: relative;
    width:  770px;
    height: 688px;
}

.signal-wrap {
    position: absolute;

    /* find/set the center position on the map,
       using the right bottom corner for positioning
       to avoid "surprise" scrollbars appearing
    */
    right:  28%;
    bottom: 33%;

    /* change these to resize signal.
       you can always use a square shape (width=height),
       even if the image inside is not square
    */
    width:  10%;
    height: 10%;
}

.signal {
    display: block;
    position: absolute;

    /* image width will be equal to parent square's size
       height must not be set to keep original image shape
    */
    width: 100%;

    /* position of the center of the signal
       relative to the parent square
    */
    right:  -23%;
    bottom: -20%;
} 
```

# php - 将电子邮件验证正则表达式传递给 Zend_Validate_Regex 时出现“使用模式时出现内部错误”

> ID：11379303
> 
> 赞同：0
> 
> 时间：2012-07-07T22:56:57.333
> 
> 标签：php, regex, zend-framework, zend-form, email-validation

我正在 Zend Forms 中构建一个表单，并在尝试添加电子邮件验证正则表达式时收到以下错误：

> 使用模式时出现内部错误

代码是：

```
$email->setLabel('Email:')
      ->setRequired()
      ->addValidator(new Zend_Validate_Regex('/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$/i'))
      ->addValidator(new Zend_Validate_StringLength(array(3, 255)))
      ->addFilter(new Zend_Filter_StripTags())
      ->addFilter(new Zend_Filter_StringTrim()); 
```

这个正则表达式应该验证正确的电子邮件地址，并且它可以在其他地方工作（例如在 JS 中）。

我试图删除`i`选项并替换`\`为，`\\`但都不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T23:36:04.237

缺少右括号（大概在final之后`?`）

# c# - 当智能感知相同的扩展方法两次但在不同类型上定义时会发生什么？

> ID：11379304
> 
> 赞同：0
> 
> 时间：2012-07-07T22:57:06.767
> 
> 标签：c#, visual-studio, extension-methods, intellisense

使用 EF 时，`ObjectContext`我看到两个不同的扩展方法具有相同的签名作为连续选择。对我来说，根据我选择的一个魔术导致其中一个或另一个被跟注，这对我来说没有意义，那么实际上发生了什么？

![在此处输入图像描述](../Images/b672ac7e4d0b466bd4f6d3c8936ca7dd.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T23:22:04.123

我假设这`Campaigns`是一个实例`DbSet<Campaign>`？`DbSet`inherits `DbQuery`，它实现`IOrderedQueryable`，其[定义](http://msdn.microsoft.com/en-us/library/bb340178.aspx)是：

```
public interface IOrderedQueryable<out T> : IQueryable<T>, 
    IEnumerable<T>, IOrderedQueryable, IQueryable, IEnumerable 
```

如您所见，`IQueryable<T>`和`IEnumerable<T>`都已实现，但 的定义`IQueryable`表明它扩展了`IEnumerable`：

`public interface IQueryable : IEnumerable`

所以基本上，扩展方法是为 实现的`IEnumerable`，但它也可以从`IQueryable`它扩展原始接口中获得。Intellisense 选择了这两个选项，因为您最终可能会隐式或显式地将类型转换为`IEnumerable`.

实际运行的方法取决于调用它的类型。例如，在您的方法`Campaigns`实例上`DbSet<Campaign>`，它将（如果您使用 MS SQL）转换为`SELECT TOP 1...`查询，但如果您在 上调用它`Campaigns.ToList()`，即`IEnumerable`，它将返回零索引处的项目。每种类型的扩展方法的实现都不同。

希望这是有道理的:)

# java - CQRS 和 EventSourcing 的框架建议

> ID：11379307
> 
> 赞同：17
> 
> 时间：2012-07-07T22:57:35.500
> 
> 标签：java, domain-driven-design, cqrs, event-sourcing, axon

[除了Axon 框架](http://www.axonframework.org)之外，还有其他用于 CQRS 和事件溯源的 Java 框架吗？我专门找

1.  基于Java的框架。
2.  必须支持事件溯源。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T23:03:55.980

我刚刚找到[了 JDON](http://en.jdon.com/)，这是一个基于 DDD 名气的 Eric Evans 和 Martin Fowler 的工作的事件溯源框架。

看起来很有趣。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T10:39:03.403

你可以试试[Qi4j](http://qi4j.org)。

SDK 为域事件提供了一个 EventStore，并提供了一种将它们轻松公开为 Atom 提要的方法。

请注意，在撰写本文时 Qi4j 2.0 尚未发布，因此您现在必须使用每周构建。

此外，文档也没有准备好，但是[单元测试代码](https://github.com/Qi4j/qi4j-sdk/tree/develop/libraries/eventsourcing/src/test/java/org/qi4j/library/eventsourcing/domain)应该可以帮助您入门。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-12T14:45:11.323

我一直在使用名为[Eventstore2](https://github.com/ks-no/eventstore2)的 Java 事件存储。

在这个 Event Store 的基础上，我创建了一个原型，它为您提供了一个名为[maven-archetype-eventsourcing的初始 Java Web 应用程序](https://github.com/bouvet-openlab/maven-archetype-eventsourcing)

您可以阅读我的博客 -[使用 Maven 从一行开始进行基于事件的 Web 应用程序开发！](http://blogg.bouvet.no/2014/07/08/get-your-event-sourced-web-application-development-started-with-one-line-using-maven/).

# jquery - colorbox 边框图像不会加载

> ID：11379309
> 
> 赞同：0
> 
> 时间：2012-07-07T22:58:06.460
> 
> 标签：jquery, colorbox

我正在使用 jquery 和 colorbox

这是我的脚本标签：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<script src="js/libs/jquery.colorbox-min.js"></script> 
```

也使用`colorbox.css`样式表。

我的问题是，当我在浏览器中测试我的网站时，示例附带的颜色框边框图像没有加载。colorbox 的所有功能都可以正常工作；但是我从颜色框示例复制到我的图像文件夹中的图像将不会加载。当我在 Chrome 中查看控制台时，我收到以下消息：

```
Failed to load resource: website/css/images/border1.png

Failed to load resource: website/css/images/border2.png 
```

但我所有的其他图像仍然显示得很好。

为什么会这样？？

难道我做错了什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T01:37:21.757

可能是您在不让 ColorBox 插件知道的情况下重新定位了图像。或者您实际上并未将图像移动到 ColorBox 期望的位置。

仔细检查插件的 CSS 文件。默认情况下，ColorBox 期望它需要的图像（不是您的图像）位于文件夹 images 中，该文件夹是存储 CSS 文件的目录的子目录。

# python - 尝试遍历 JSON 对象

> ID：11379312
> 
> 赞同：1
> 
> 时间：2012-07-07T22:58:23.247
> 
> 标签：python, json, iteration

我正在尝试使用 simplejson 迭代 JSON 对象。

```
def main(arg1):
    response = urllib2.urlopen("http://search.twitter.com/search.json?q=" + arg1) #+ "&rpp=100&page=15")
    twitsearch = simplejson.load(response)
    twitsearch = twitsearch['results']
    twitsearch = twitsearch['text']
    print twitsearch 
```

我正在传递要在 Twitter 中搜索的值列表，例如“I'm”、“Think”等。

问题是有多个文本字段，每个 Tweet 一个。我想遍历整个 JSON 对象，取出“文本”字段。

我该怎么做？我正在阅读文档，但无法确切看到它在哪里谈论这个。

编辑：它似乎存储为 JSON 对象列表。

尝试这样做：

```
for x in twitsearch:
         x['text'] 
```

我如何将 x['text'] 存储在列表中？附加？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T23:07:10.107

注意

```
twitsearch['results'] 
```

是一个 Python 列表。您可以遍历该列表，将`text`每个对象的组件存储在您*自己的*列表中。在这里使用列表理解将是一件好事。

```
text_list = [x['text'] for x in twitsearch['results']] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:06:47.673

简单的。弄清楚了。

```
tweets = []

for x in twitsearch:
    tweets.append(x['text']) 
```

# php - PHP/CSS - 在一个块中显示数据

> ID：11379313
> 
> 赞同：1
> 
> 时间：2012-07-07T22:58:24.377
> 
> 标签：php, css

我有一个关于 MySQL 数据输出的问题。

基本上我每行有 3 个数据要显示在我的网络中。

我希望我的输出看起来像这样..

```
-------------
| 1 | 2 | 3 |
----+---+----
| 4 | 5 | 6 |
----+---+----
| 7 | 8 | 9 |
----+---+---- 
```

数字 1-9 代表我的输出，它保存我数据库中的数据，我希望输出以这种格式显示..

-图片 -标题 -描述

很抱歉发了这么长的帖子，希望大家能帮帮我。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T23:02:44.063

我会用这个插件来做 css：

[http://960.gs/](http://960.gs/)

它是最常用的，除非您需要比插件提供的更多功能，否则您实际上不需要为它编写自己的代码。

Alertnatively，如果你想编写自己的代码，你可以使用这样的东西：

[http://ajaxian.com/archives/display-table](http://ajaxian.com/archives/display-table)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:08:42.013

那是表格数据，你仍然使用它。

因此，如果它是您希望使用的表，您的问题是如何按顺序排列？

你只需要控制。

```
$i=0;
$count=mysql_num_rows($query);
while ($row = mysql_fetch_assoc($query)) {
    if($i % 3 === 0) {
        if ($i > 0)
             echo "</tr>";
        if ($i < $count - 1)
             echo'<tr>';
    }

    echo '<td style="width: 30%;">'.$i.'</td>';
    $i++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T23:09:05.363

使用 a`<table>`显示表格数据。

[http://codepad.org/cbLxVe06](http://codepad.org/cbLxVe06)

# jquery - 如何在下面的示例中触发事件

> ID：11379317
> 
> 赞同：0
> 
> 时间：2012-07-07T22:59:03.513
> 
> 标签：jquery

我在下面有一行代码，当单击网格按钮时成功触发。这是下面的：

```
$('#btn'+gridValues).trigger('click'); 
```

触发器适用于以下代码：

```
 <table id="optionAndAnswer" class="optionAndAnswer">
    <tr>
          <th colspan="2">
            Option and Answer
        </th>
    </tr>
    <tr class="option">
    <td>1\. Option Type:</td>
    <td>
    <div class="box">
        <input type="text" name="gridValues" class="gridTxt maxRow" id="mainGridTxt" readonly="readonly" />
        <span href="#" class="showGrid" id="showGridId">[Open Grid]</span>
    </div>

    <?php
        $num = range("3","26");
    ?>

          <table class="optionTypeTbl">
            <tr>

                <?php
                $i = 1;
                foreach($num as $key => $val){
   if($i%7 == 1) echo"<tr><td>";
   echo"<input type=\"button\" value=\"$val\" id=\"btn".$val."\" name=\"btn".$val."Name\" class=\"gridBtns gridBtnsOff\">";        
                    if($i%7 == 0) echo"</td></tr>";
                    $i++;
                }
                ?>

                    </tr> 
                    </table>
    </td>
    </tr>
    </table> 
```

触发代码的作用是假设用户单击网格按钮 (btn) 4，然后它将显示 4 个答案按钮 A、B、C、D。另一个例子是如果用户点击网格按钮 7，它将显示 7 个答案按钮 A、B、C、D、E、F、G。

但是我在下面有另一段代码，它就像您在上面的代码中看到的模板或选项控件的副本。

```
 function insertQuestion(form) {    

        var context = $('#optionAndAnswer');

            var $tbody = $('#qandatbl > tbody'); 
            var $tr = $("<tr class='optionAndAnswer' align='center'>");
            var $options = $("<div class='option'>Option Type:<br/></div>");
            var $questionType = '';

            $('.gridTxt', context).each( function() {

            var $this = $(this);
            var $optionsText = $("<input type='text' class='gridTxtRow maxRow' readonly='readonly' />")
            .attr('name',$this.attr('name')+"[]")
            .attr('value',$this.val())
            .appendTo( $options )
            .after("<span href='#' class='showGrid'>[Open Grid]</span>");

            $questionType = $this.val();

            });

            $td.append($options);
            $tbody.append($tr); 

        } 
```

我的问题是，如果在第一个代码中触发器是`$('#btn'+gridValues).trigger('click');`，那么触发器代码应该是什么，第二个代码才能从第二个代码中选择网格按钮？

更新：

我在[这里](http://helios.hud.ac.uk/u0867587/Mobile_app/Text16.php)为这个应用程序创建了一个 url 。请按照步骤使用该应用程序，然后您可以看到发生了什么：

*   第一步：当你打开应用程序时，你会在页面上看到一个绿色的加号按钮，点击它会显示一个模态窗口。
*   第2步：在模态窗口有一个搜索栏，输入“AAA”并提交搜索，你会看到一堆行出现。
*   第 3 步：在第一行中，您会在“选项类型”AD 下看到，单击该行中的“添加”按钮，模式窗口将关闭，您会在右侧的灰色文本框中看到“选项类型”文本框等于 4 并显示答案按钮 A、B、C 和 D，这是因为您记得该行的选项 tpye 是“AD”。

现在这工作正常，但它只适用于顶部选项和答案控制，请按照以下步骤操作：

*   第 4 步：单击“添加问题”按钮，它会在下方添加一行，其中包含选项的详细信息和顶部的答案控件。
*   第5步：在您刚刚添加的行中，您会在左侧看到一个绿色加号按钮，单击此按钮并在搜索框中执行相同的搜索“AAA”。
*   第 6 步：这次通过单击“添加”按钮选择最后一行，该行的“选项类型”为“AG”，因此应显示“答案”按钮 A、B、C、D、E、F 和G，但它没有这样做，它仍然显示“A，B，C，D”。这就是为什么我想知道当用户在添加的行之一中添加选项类型时触发单击功能的用途，因此它会更改答案按钮以匹配选项类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:37:36.480

如果您想触发对`<span>`an`<input type="text" class="gridTxtRow maxRow">`后面的值为 的a 的点击`VAL`，您可以执行以下操作：

```
$('input.gridTxtRow[value="VAL"] + span').trigger('click'); 
```

选择器`A + B`选择任何`B`元素的下一个[兄弟](https://developer.mozilla.org/en/CSS/Getting_Started/Selectors#Information%3a_Selectors_based_on_relationships)`A`元素。

* * *

**更新：**在使它起作用之前，您需要解决一些问题：

1.  元素 ID 应该是唯一的，即整个页面中只有一个具有特定 ID 的元素。当您`input.gridBtns`为新选项生成 时，它具有 ID（`btn3`、`btn4`等）作为第一个选项的按钮。浏览器会让你这样做，但使用这些 ID 的 JavaScript 将变得不可预测。

2.  `input.gridBtns`for a new 选项仅在用户单击时生成`[Open Grid]`。如果用户在单击 之前单击绿色加号按钮`[Open Grid]`，则没有可调用`.trigger()`的按钮。我建议您在添加新选项时也添加这些按钮。

在这些修复之后，如果您更改此行：

```
$(plusbutton_clicked).closest('tr').find('input.gridTxtRow').val(gridValues); 
```

对此：

```
$(plusbutton_clicked).closest('tr')
    .find('input.gridTxtRow').val(gridValues).end()
    .find('input.gridBtns[value="' + gridValues + '"]').trigger('click'); 
```

它应该做你正在寻找的东西。

* * *

**更新#2：**对不起，我以为你`[Open Grid]`在移动之后添加了新按钮`<table class="optionTypeTbl">`。

而不是以前的`$(plusbutton_clicked)...`代码，试试这个：

```
$(plusbutton_clicked).closest('tr')
    .find('input.gridTxtRow').val(gridValues)
        .parent().append($('.optionTypeTbl'));

$('#btn' + gridValues).trigger('click'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:56:19.770

要将事件侦听器添加到页面上动态添加的元素，您可以使用 $(element).live("event", callback);

这可能不是您想要做的，但我会做以下事情：

我在模板中的按钮（[VALUE] 由 php for 循环添加）：

```
<a href="#" class="btn" rel="[VALUE]">[VALUE] options</a> 
```

我的听众：

```
$(".btn").live("click", function(){
    var numberOfAnswers = $(this).attr('rel');

    // Code to show answers taken from the rel tag on the <a>

    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:52:08.213

jQuery [on](http://api.jquery.com/on/)可用于处理容器中的事件。
你可以通过一个属性来标记你的按钮，
例如选择器的role="gridBtn"
和数据
检查这个[jsfiddle的rel](http://jsfiddle.net/2Mc75/)

# multithreading - 尝试识别设计模式

> ID：11379324
> 
> 赞同：1
> 
> 时间：2012-07-07T23:00:14.873
> 
> 标签：multithreading, design-patterns

我目前正在处理一段继承的代码，它使用了一种非常有趣的设计模式。

代码被分成许多对象。我不确定术语对象是否适用，因为它是 C 代码，但它是最好的类比。每个对象都有特定于对象的数据、一个线程和一个消息队列。所有对象主要通过将预定义的消息放置到彼此的队列中来进行通信。主要思想似乎是每个对象的数据只能由一个线程访问。在做了一些研究之后，我发现一些工业自动化应用程序是这样编写的（即 ProfiNET 堆栈和一些 EIP 实现）。

你知道这种模式是否有名字，或者它是否在文献中的某个地方被描述过？Schidt、Stal 等人的“面向模式的软件架构”一书没有提到它。

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T23:13:13.043

这听起来有点与[Actor 模型](http://en.wikipedia.org/wiki/Actor_model)有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:06:03.280

可能是我，但除了生产者消费者和您所描述的相互排斥之外，还有其他模式吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T23:11:03.260

查看[通信顺序流程 (CSP)](http://en.wikipedia.org/wiki/Communicating_sequential_processes#Informal_description)

> CSP 允许根据独立运行的组件进程来描述系统，并且仅通过消息传递通信相互交互

它实际上是[Go 语言](http://golang.org/)用于[goroutine 之间通信](http://golang.org/doc/go_faq.html#csp)（并发）的核心设计概念之一。

# python - 如何在 Vpython 中添加纹理？

> ID：11379325
> 
> 赞同：2
> 
> 时间：2012-07-07T23:00:30.717
> 
> 标签：python, vpython

**我想知道如何在我的 Vpython 脚本中将纹理放在我的盒子上？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T23:44:47.613

```
from visual import *

box(pos=(-1,-1,-2), length=2, height=2, width=4, material=materials.wood) 
```

![在此处输入图像描述](../Images/3383ab4ca59c82f61fdfed0248b8edfc.png)

有关详细信息，请参阅[http://vpython.org/contents/docs/visual/materials.html](http://vpython.org/contents/docs/visual/materials.html)

**编辑：**在上面的链接中，查找标题为“从照片制作纹理”的部分

**Edit2：**不确定是什么导致了您的错误；这对我有用：

```
from visual import *
import Image

im = Image.open('flower.jpg')  # size must be power of 2, ie 128 x 128
tex = materials.texture(data=im, mapping='rectangular')

box(material=tex) 
```

![在此处输入图像描述](../Images/dac0c4717b8cef346006f3b8427acd00.png)

**Edit3：**我弄清楚是什么导致了您的错误：

```
box(material=materials.loadTGA(filename)) 
```

失败；

```
tex = materials.texture(data=loadTGA(filename), mapping='rectangular')
box(material=tex) 
```

工作正常。

# css - CSS 左右拆分页脚

> ID：11379327
> 
> 赞同：0
> 
> 时间：2012-07-07T23:00:46.467
> 
> 标签：css

我知道通常如何做一个简单的向左浮动和向右浮动页脚以使我可以轻松获得信息的区域。但基本上我使用了 HTML5 样板，我相信当我尝试拆分页脚时，由于应用了以前的样式，它不起作用。现在我不是 CSS 专家，所以我可以做一些帮助，告诉我如何将这个基本功能放入我的页脚。其拆分 2cols，左对齐和右对齐。

下面的 HTML 和 CSS。提前谢谢各位！

```
<!doctype html>

<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->

<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->

<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->

<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<head id="Head1"><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><title>

    Upper Control Limit

</title><meta name="description" /><meta name="author" /><meta name="viewport" content="width=device-width" /><link rel="stylesheet" href="css/style.css" />

    <script src="js/libs/modernizr-2.5.3-respond-1.1.0.min.js"></script>

</head>

<body>

<!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site 

        in all its glory.</p><![endif]-->

    <div id="header-container">

        <header class="wrapper clearfix">

            <h1 id="title">Upper Control Limit</h1>

            <nav>

                <ul>

                    <li><a href="default.aspx">Home</a></li>

                    <li><a href="contact.aspx">Contact</a></li>

                </ul>

            </nav>

        </header>

    </div>

    <div id="main-container">

            <form method="post" action="results.aspx?rows=1&amp;cols=1" id="Form1">

<div class="aspNetHidden">

<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMjEwNDQyMTMxMw9kFgJmD2QWAgIDD2QWBgIFDw8WBB4IQ3NzQ2xhc3MFB0NvbEhlYWQeBF8hU0ICAmRkAgYPDxYEHwAFB1Jvd0hlYWQfAQICZGQCBw8PFgQfAAUJZ3JpZEJveGVzHwECAmRkZFJMwj+M1MRZQlpIMrfmxl1wwizJXzxaXt3WPYuj38Ui" />

</div>

<div class="aspNetHidden">

    <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEdAAU3pTMHOdDohz552i1I2Sebj31ljtDmerW1aPkEMZ51g8/Ho+MRtff8p07c9TjAQNmPZdj/gKuoitSwpD5a3CzSRHT3M0ARnCVeHCgDPQCHReQQJ8C8qTnXt96uJnOGYcQYMDuNwHVzarHWwfsDZ3nC" />

</div>

            <div id="main" class="clearfix"><input type="submit" name="ctl00$btnCalc" value="Calculate" id="btnCalc" class="btn" /><input name="ctl00$txtrow_0_col_1" type="text" value="Col 1" id="txtrow_0_col_1" class="ColHead" /><input name="ctl00$txtrow_1_col_0" type="text" value="Series 1" id="txtrow_1_col_0" class="RowHead" /><input name="ctl00$txtrow_1_col_1" type="text" id="txtrow_1_col_1" class="gridBoxes" /></div></form>

    </div> <!-- #main-container -->

    <div id="footer-container">

        <footer class="wrapper">

            <h3 class="left">Copyright 2012 Data Exchange LTD</h3>

            <h3 class="right">img here</h3>

        </footer>

    </div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script>    window.jQuery || document.write('<script src="js/libs/jquery-1.7.2.min.js"><\/script>')</script>

<script src="js/script.js"></script>

<script>

    var _gaq = [['_setAccount', 'UA-17073042-4'], ['_trackPageview']];

    (function (d, t) {

        var g = d.createElement(t), s = d.getElementsByTagName(t)[0];

        g.src = ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';

        s.parentNode.insertBefore(g, s)

    } (document, 'script'));

</script>

</body>

</html> 
```

CSS：

```
/* =============================================================================
   HTML5 Boilerplate CSS: h5bp.com/css
   ========================================================================== */

article, aside, details, figcaption, figure, footer, header, hgroup, nav, section { display: block; }
audio, canvas, video { display: inline-block; *display: inline; *zoom: 1; }
audio:not([controls]) { display: none; }
[hidden] { display: none; }

html { font-size: 100%; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }
html, button, input, select, textarea { font-family: sans-serif; color: #222; }
body { margin: 0; font-size: 1em; line-height: 1.4; }

::-moz-selection { background: #fe57a1; color: #fff; text-shadow: none; }
::selection { background: #fe57a1; color: #fff; text-shadow: none; }

a { color: #00e; }
a:visited { color: #551a8b; }
a:hover { color: #06e; }
a:focus { outline: thin dotted; }
a:hover, a:active { outline: 0; }

abbr[title] { border-bottom: 1px dotted; }
b, strong { font-weight: bold; }
blockquote { margin: 1em 40px; }
dfn { font-style: italic; }
hr { display: block; height: 1px; border: 0; border-top: 1px solid #ccc; margin: 1em 0; padding: 0; }
ins { background: #ff9; color: #000; text-decoration: none; }
mark { background: #ff0; color: #000; font-style: italic; font-weight: bold; }
pre, code, kbd, samp { font-family: monospace, serif; _font-family: 'courier new', monospace; font-size: 1em; }
pre { white-space: pre; white-space: pre-wrap; word-wrap: break-word; }
q { quotes: none; }
q:before, q:after { content: ""; content: none; }
small { font-size: 85%; }

sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }
sup { top: -0.5em; }
sub { bottom: -0.25em; }

ul, ol { margin: 1em 0; padding: 0 0 0 40px; }
dd { margin: 0 0 0 40px; }
nav ul, nav ol { list-style: none; list-style-image: none; margin: 0; padding: 0; }

img { border: 0; -ms-interpolation-mode: bicubic; vertical-align: middle; }

svg:not(:root) { overflow: hidden; }

figure { margin: 0; }

form { margin: 0; }
fieldset { border: 0; margin: 0; padding: 0; }
label { cursor: pointer; }
legend { border: 0; *margin-left: -7px; padding: 0; white-space: normal; }
button, input, select, textarea { font-size: 100%; margin: 0; vertical-align: baseline; *vertical-align: middle; }
button, input { line-height: normal; }
button, input[type="button"], input[type="reset"], input[type="submit"] { cursor: pointer; -webkit-appearance: button; *overflow: visible; }
button[disabled], input[disabled] { cursor: default; }
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; padding: 0; *width: 13px; *height: 13px; }
input[type="search"] { -webkit-appearance: textfield; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box; }
input[type="search"]::-webkit-search-decoration, input[type="search"]::-webkit-search-cancel-button { -webkit-appearance: none; }
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }
textarea { overflow: auto; vertical-align: top; resize: vertical; }
input:valid, textarea:valid {  }
input:invalid, textarea:invalid { background-color: #f0dddd; }

table { border-collapse: collapse; border-spacing: 0; }
td { vertical-align: top; }

.chromeframe { margin: 0.2em 0; background: #ccc; color: black; padding: 0.2em 0; }

/* ===== Initializr Styles =====================================================
   Author: Jonathan Verrecchia - verekia.com/initializr/responsive-template
   ========================================================================== */

body{ font:16px/26px Helvetica, Helvetica Neue, Arial; }

.wrapper{
    width:90%;
    margin:0 5%;
}

/* ===================
    ALL: Blue Theme 
   =================== */

#header-container{ border-bottom: 20px solid #22558b; }
#footer-container{ border-top:    20px solid #22558b; }
#main aside      { border-top:    20px solid #22558b; }

#header-container,
#footer-container,
#main aside{
    background:#2c6cb1;
}

#title{ color:white; }

::-moz-selection { background: #2c6cb1; color: #fff; text-shadow: none; }
::selection      { background: #2c6cb1; color: #fff; text-shadow: none; }

/* ==============
    MOBILE: Menu
   ============== */

nav a{
    display:block;
    margin-bottom:10px;
    padding:15px 0;

    background:#22558b;
    color:white;

    text-align:center;
    text-decoration:none;
    font-weight:bold;
}

nav a:hover, nav a:visited{
    color:white;
}

nav a:hover{
    text-decoration:underline;
}

/* ==============
    MOBILE: Main
   ============== */

#main{
    padding:30px 0;
}

#main article h1{
    font-size:2em;
}

#main aside{
    color:white;
    padding:0px 5% 10px;
}

#footer-container footer{
    color:white;
    padding:20px 0;
    clear:both;
    }

/* ===============
    ALL: IE Fixes
   =============== */

.ie7 #title{ padding-top:20px; }

/* ===== Primary Styles ========================================================
   Author: Christopher Leah of Happy Webs LTD - 07/2012
   ========================================================================== */
 .btn{clear:left;float:left; width:79px; margin-left:5px; margin-bottom:2px;}
.ColHead{float:left; width:50px; margin-left:5px; background-color:#22558B;color:#ffffff;margin-bottom:2px;}
.RowHead{clear:left;float:left; width:75px; margin-left:5px;background-color:#2C6CB1;color:#ffffff;margin-bottom:2px;}
.gridBoxes{float:left; width:50px; margin-left:5px; margin-bottom:2px;}
.graph{margin-top:10px;float:left;}
h3.left { float: left; }
h3.right { float: right;}

/* =============================================================================
   Media Queries
   ========================================================================== */

@media only screen and (min-width: 480px) {

/* ====================
    INTERMEDIATE: Menu
   ==================== */

    nav a{
        float:left;
        width:27%;
        margin:0 1.7%;
        padding:25px 2%;
        margin-bottom:0;
    }

    nav li:first-child a{ margin-left:0;  }
    nav li:last-child  a{ margin-right:0; }

/* ========================
    INTERMEDIATE: IE Fixes
   ======================== */

    nav ul li{
        display:inline;
    }   
    .oldie nav a{
        margin:0 0.7%;      
    }
}

@media only screen and (min-width: 768px) {

/* ====================
    WIDE: CSS3 Effects
   ==================== */

    #header-container,
    #main aside{
        -webkit-box-shadow:0 5px 10px #aaa;
           -moz-box-shadow:0 5px 10px #aaa;
                box-shadow:0 5px 10px #aaa;
    }

/* ============
    WIDE: Menu
   ============ */

    #title{
        float:left;
    }

    nav{
        float:right;
        width:38%;
    }

/* ============
    WIDE: Main
   ============ */

    #main article{
        float:left;
        width:57%;
    }

    #main aside{
        float:right;
        width:28%;
    }
}

@media only screen and (min-width: 1140px) {

/* ===============
    Maximal Width
   =============== */

    .wrapper{
        width:1026px; /* 1140px - 10% for margins */
        margin:0 auto;
    }
}

/* =============================================================================
   Non-Semantic Helper Classes
   ========================================================================== */

.ir { display: block; border: 0; text-indent: -999em; overflow: hidden; background-color: transparent; background-repeat: no-repeat; text-align: left; direction: ltr; *line-height: 0; }
.ir br { display: none; }
.hidden { display: none !important; visibility: hidden; }
.visuallyhidden { border: 0; clip: rect(0 0 0 0); height: 1px; margin: -1px; overflow: hidden; padding: 0; position: absolute; width: 1px; }
.visuallyhidden.focusable:active, .visuallyhidden.focusable:focus { clip: auto; height: auto; margin: 0; overflow: visible; position: static; width: auto; }
.invisible { visibility: hidden; }
.clearfix:before, .clearfix:after { content: ""; display: table; }
.clearfix:after { clear: both; }
.clearfix { *zoom: 1; }

/* =============================================================================
   Print Styles
   ========================================================================== */

@media print {
  * { background: transparent !important; color: black !important; box-shadow:none !important; text-shadow: none !important; filter:none !important; -ms-filter: none !important; } /* Black prints faster: h5bp.com/s */
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }  /* Don't show links for images, or javascript/internal links */
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; } /* h5bp.com/t */
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3 { orphans: 3; widows: 3; }
  h2, h3 { page-break-after: avoid; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T00:20:51.493

Brains911 所说的会有所帮助，但我也建议在其中包含一个[clearfix](http://www.webtoolkit.info/css-clearfix.html)`<footer class="wrapper">`。

所以你的代码看起来像这样：

```
<footer class="wrapper clearfix">
...
</footer> 
```

让我知道这是否没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T23:09:44.127

`h3.left { float: left; }` `h3.right { float: right;}`看起来他们应该做这份工作。您可以尝试添加`width:50%`到它们中的每一个。

您可以使用 firebug 来关闭影响 h3 元素的其他样式，看看这是否确实是问题所在？

# python - Google App Engine 上传失败

> ID：11379328
> 
> 赞同：3
> 
> 时间：2012-07-07T23:00:56.397
> 
> 标签：python, google-app-engine

尝试上传简单的 hello world 应用程序，我收到以下错误：

```
Traceback (most recent call last):
  File "./appcfg.py", line 133, in <module>
    run_file(__file__, globals())
  File "./appcfg.py", line 129, in run_file
    execfile(script_path, globals_)
  File "/home/mike/Documents/coder/Go/google_appengine/google/appengine/tools/appcfg.py", line 4083, in <module>
    main(sys.argv)
  File "/home/mike/Documents/coder/Go/google_appengine/google/appengine/tools/appcfg.py", line 4074, in main
    result = AppCfgApp(argv).Run()
  File "/home/mike/Documents/coder/Go/google_appengine/google/appengine/tools/appcfg.py", line 2544, in Run
    self.action(self)
  File "/home/mike/Documents/coder/Go/google_appengine/google/appengine/tools/appcfg.py", line 3830, in __call__
    return method()
  File "/home/mike/Documents/coder/Go/google_appengine/google/appengine/tools/appcfg.py", line 2991, in Update
    self.UpdateVersion(rpcserver, self.basepath, appyaml)
  File "/home/mike/Documents/coder/Go/google_appengine/google/appengine/tools/appcfg.py", line 2974, in UpdateVersion
    lambda path: self.opener(os.path.join(basepath, path), 'rb'))
  File "/home/mike/Documents/coder/Go/google_appengine/google/appengine/tools/appcfg.py", line 2131, in DoUpload
    resource_limits = GetResourceLimits(self.rpcserver, self.config)
  File "/home/mike/Documents/coder/Go/google_appengine/google/appengine/tools/appcfg.py", line 355, in GetResourceLimits
    resource_limits.update(GetRemoteResourceLimits(rpcserver, config))
  File "/home/mike/Documents/coder/Go/google_appengine/google/appengine/tools/appcfg.py", line 326, in GetRemoteResourceLimits
    version=config.version)
  File "/home/mike/Documents/coder/Go/google_appengine/google/appengine/tools/appengine_rpc.py", line 379, in Send
    self._Authenticate()
  File "/home/mike/Documents/coder/Go/google_appengine/google/appengine/tools/appengine_rpc.py", line 437, in _Authenticate
    super(HttpRpcServer, self)._Authenticate()
  File "/home/mike/Documents/coder/Go/google_appengine/google/appengine/tools/appengine_rpc.py", line 281, in _Authenticate
    auth_token = self._GetAuthToken(credentials[0], credentials[1])
  File "/home/mike/Documents/coder/Go/google_appengine/google/appengine/tools/appengine_rpc.py", line 233, in _GetAuthToken
    e.headers, response_dict)
  File "/home/mike/Documents/coder/Go/google_appengine/google/appengine/tools/appengine_rpc.py", line 94, in __init__
    self.reason = args["Error"] 
```

AttributeError：无法设置属性

电子邮件和密码正确。该应用程序在我的本地机器上完美运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T10:24:02.813

好的，最后我找到了解决方案 - 一个非常简单的解决方案：似乎 google appp 引擎对常规帐户密码不满意，它需要可以在此处设置的应用程序特定的密码：http: [//support.google。 com/accounts/bin/static.py?hl=en&page=guide.cs&guide=1056283&answer=185833&rd=3](http://support.google.com/accounts/bin/static.py?hl=en&page=guide.cs&guide=1056283&answer=185833&rd=3)

# android - MalformedURLException：找不到协议。Android 上的 RSS 提要

> ID：11379330
> 
> 赞同：0
> 
> 时间：2012-07-07T23:01:24.547
> 
> 标签：android

我正在使用代码来解析来自此链接的 RSS [IBM - Working with XML on Android](http://www.ibm.com/developerworks/opensource/library/x-android/index.html) ...我对 URL 没有什么问题。如果我使用此网址：

`static String feedUrl = "http://clarin.feedsportal.com/c/33088/f/577681/index.rss";`

它工作正常，但如果我使用这个 URL：

`static String feedUrl = "http://www.myworkingdomain.com/api/?m=getFeed&secID=163&lat=0&lng=0&rd=0&d=1";`

它给了我：

`07-07 19:41:30.134: E/AndroidNews(5454): java.lang.RuntimeException: java.net.MalformedURLException: Protocol not found:`

我已经尝试过其他答案的提示......但他们都没有帮助我......还有其他解决方案吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T23:07:43.650

看到您的 feedUrl，我假设您想要使用参数执行 HTTP GET 请求。在我开始使用 StringBuilder 和 HttpClient 之前，我也遇到了很多麻烦。

这是一些代码，没有异常捕获：

```
 SAXParserFactory mySAXParserFactory = SAXParserFactory
                    .newInstance();
            SAXParser mySAXParser = mySAXParserFactory.newSAXParser();
            XMLReader myXMLReader = mySAXParser.getXMLReader();
            RSSHandler myRSSHandler = new RSSHandler();
            myXMLReader.setContentHandler(myRSSHandler);

            HttpClient httpClient = new DefaultHttpClient();

            StringBuilder uriBuilder = new StringBuilder(
                    "http://myworkingdomain.com/api/");
            uriBuilder.append("?m=getFeed");
            uriBuilder.append("&secID=163");

            [...]

            HttpGet request = new HttpGet(uriBuilder.toString());
            HttpResponse response = httpClient.execute(request);

            int status = response.getStatusLine().getStatusCode();

            // we assume that the response body contains the error message
            if (status != HttpStatus.SC_OK) {
                ByteArrayOutputStream ostream = new ByteArrayOutputStream();
                response.getEntity().writeTo(ostream);
                Log.e("HTTP CLIENT", ostream.toString());
            }

            InputStream content = response.getEntity().getContent();

            // Process feed

            InputSource myInputSource = new InputSource(content);
            myInputSource.setEncoding("UTF-8");
            myXMLReader.parse(myInputSource);
            myRssFeed = myRSSHandler.getFeed();
            content.close(); 
```

希望这可以帮助！

# android - Android 提示对话框

> ID：11379338
> 
> 赞同：1
> 
> 时间：2012-07-07T23:03:22.597
> 
> 标签：android, popup, hints

我想在用户第一次使用该应用程序时向他展示一系列弹出窗口。弹出窗口将包含帮助消息（例如，单击此处执行操作，滑动查看...）。单击弹出窗口后，它将被关闭，并显示下一个。

有没有什么捷径可以做到这一点？

任何想法（或最佳实践）如何做到这一点将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T23:14:18.137

Android 确实提供了像[AlterDialog.Builder](http://developer.android.com/reference/android/app/AlertDialog.Builder.html)这样的对话框助手，通常这对于大多数对话框来说已经足够了。

但请注意，Android 不支持同步对话调用。相反，每个对话框仅*在*您的代码执行后才显示。这样做的原因是，否则 UI 线程将被阻塞。因此，为了实现一系列对话框或任何其他需要暂停代码执行直到对话框关闭的工作流，需要解决这个问题。

我通过使用命令模式在单击某个对话框按钮后执行代码来实现这一点。但这可能不适用于每个用例，因此您可能不得不想出一些古怪的东西:-(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:12:29.150

使用[SharedPreference](http://developer.android.com/guide/topics/data/data-storage.html#pref)作为标志，在活动运行时检查该标志。如果在第一次运行时未设置，请使用[DialogFragment](http://developer.android.com/guide/topics/ui/dialogs.html)显示弹出窗口。在他们看到所有弹出窗口后，设置标志以在以后的运行中隐藏它们。

# mysql - 从单个结果返回 SET 作为多行

> ID：11379341
> 
> 赞同：0
> 
> 时间：2012-07-07T23:04:20.363
> 
> 标签：mysql

我有一个 MySQL 5.5 表，其中有一列包含 SET 数据类型。SET 列的每个条目都有 0 到 4 个值。我想编写一个 SELECT 语句，它将为 SET 中的每个值返回一个单独的行。这可以用一个语句来实现吗？

在此先感谢，彼得

**编辑**

编辑包括一个例子：

表结构非常基本：

*   INT(6) 无符号主键 (id)
*   VARCHAR(20) 唯一索引（材料）
*   SET（'固体'，'液体'，'气体'，'等离子'）（状态）

在上面的示例中，您可以想象有一个填充了各种材料（材料）的表，并且每个材料的 SET 列包括该材料可以存在的所有状态（状态）。我希望看到语句返回单独的行对于材质具有的每个 SET 值，复制 id 和材质名称。

希望这有助于澄清事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T00:43:55.903

如果有 20 种可能的状态，但一种材料最多只能有 4 种：

试试这个解决方案：

```
SELECT 
    a.material, 
    a.states
FROM
(
    SELECT material, SUBSTRING_INDEX(states,',',1) AS states
    FROM settbl

    UNION

    SELECT material, SUBSTRING_INDEX(SUBSTRING_INDEX(states,',',-3),',',1) AS states
    FROM settbl

    UNION

    SELECT material, SUBSTRING_INDEX(SUBSTRING_INDEX(states,',',-2),',',1) AS states
    FROM settbl

    UNION

    SELECT material, SUBSTRING_INDEX(states,',',-1) AS states
    FROM settbl
) a
ORDER BY
    a.material 
```

[SQL-Fiddle 演示](http://sqlfiddle.com/#!2/27211/2/0)

# jquery - 切换到 jQuery noconflict，如何修复代码？

> ID：11379344
> 
> 赞同：2
> 
> 时间：2012-07-07T23:05:03.140
> 
> 标签：jquery

我只是将我的 wordpress 主题加载 jQuery 的方式从手动加载 google 的版本转换为对 wordpress 附带的版本进行排队。wordpress 附带的版本中包含“noconflict()”，因此 $ 快捷方式不再适用于我的所有 jQuery，而是我需要在它的位置使用“jQuery”。

我有很多 .js 脚本和很多页面上的 jquery 设置初始化，现在它们都不起作用，因为它都使用简写 $。

我的问题是，假设我需要使用 wordpress 附带的 noconflict 版本，修复我的速记代码的最佳方法是什么？

我应该在每个脚本的顶部添加这样的一行吗？

```
jQuery(document).ready(function($) { 
```

还是我应该“在文件中查找”所有 $ 并用 jQuery 替换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T23:08:21.923

**Wordpress 推荐：** 好好阅读[http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_wrappers](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_wrappers)

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

**代码**

```
(function($) {
    // $() will work as an alias for jQuery() inside of this function
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T23:08:13.793

`jQuery`您可以将要在沙箱（函数）内使用的对象和任何其他 API 的对象传递给立即执行的匿名函数：

```
(function($, window, undefined) {

}(jQuery, window)); 
```

这通过锁定 的实现以及对您的代码至关重要的任何其他 API 来减轻*代码*冲突的可能性。`jQuery``undefined`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T23:07:01.833

您可以使用立即执行的函数来创建一个名为的变量，该变量`$`设置为`jQuery`. 这可以模拟您在切换到之前的行为`noconflict`：

```
(function(){ 

    var $ = jQuery;

    //now use $ as you always have

})(); 
```

或者

```
(function($){ 

    //now use $ as you always have

})(jQuery); 
```

# c - P99 和 C99 与 C11

> ID：11379346
> 
> 赞同：6
> 
> 时间：2012-07-07T23:06:03.410
> 
> 标签：c, c99, c11, p99

也许我误解了[P99](http://p99.gforge.inria.fr/)库的使用，但它比 C11 提供了什么优势（主要关注多线程），如果它不仅仅是一个模拟器的话。

速度？效率？

还是只是向后兼容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T00:03:27.147

与 C11 相比，它提供的主要优势在于它可以与 C99 编译器一起使用。C11 支持还不存在。它还提供了许多 C11 中没有的功能。

# php - 获取文本中的字符串

> ID：11379351
> 
> 赞同：0
> 
> 时间：2012-07-07T23:07:15.837
> 
> 标签：php, preg-match

我似乎无法确切地弄清楚如何从更大的块中获取我需要的特定部分文本。在解析电子邮件时，我需要能够在常规文本块中获取 a : 和 a ( 之间的字符串。下面是一个示例。我对 preg_match 有所了解，我认为这就是答案，但似乎无法让它工作。任何帮助将不胜感激，因为搜索这里和谷歌没有出现任何结果。

对于 GC3J26P：Wise Lake II（传统）

我只需要 : 和开头括号之间的文本。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T23:11:33.493

既然您说您已经尝试过但没有成功，请尝试以下操作：

```
$str = "For GC3J26P: Wise Lake II (Traditional)";
preg_match('/(?<=:).*(?=\()/', $str, $str);
if ($str) echo $str[0]; 
```

如果您不熟悉 REGEX 的阴暗但美丽的世界，请允许我解释一下这里发生了什么。

这都是关于模式的。我们的模式定义了在我们匹配的内容中什么是可接受的，什么是不可接受的——即捕获。

不仅如此，它甚至还说明了我们的比赛之前和进行的内容。这些分别称为后瞻断言和前瞻断言。这些断言是我们匹配点的锚点——它们对捕获的匹配本身没有贡献。

所以我们的模式翻译为：

1）在冒号后开始匹配（但不要在匹配中包含冒号）

2）然后允许*并捕获*任何字符（除了换行符和某些其他空格字符），零次或多次

3）匹配（但不包括）一个左括号

我们的模式就是所谓的贪婪模式。在我们的例子中，这意味着，如果您希望匹配的子字符串包含冒号或括号，这将没有问题，也不会破坏。只要有一个有效的匹配，从一些冒号开始，一直到一些左括号，一切都很好。（注意：如果需要，可以修改贪婪行为）。

REGEX 远不止于此，您要么爱它，要么恨它。如果您有兴趣，我建议您阅读它。入手后非常满足。

就这样，该睡觉了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:36:10.510

就是这样：我使用了“命名子模式”（将其命名为“名称”，但几乎可以称为任何东西）......

```
$str="For GC3J26P: Wise Lake II (Traditional)";
preg_match('/:(?P<name>[\S\s]+)\(/', $str, $matches);
echo $matches["name"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T23:25:07.397

你可以试试这个：

```
$string = 'For GC3J26P: Wise Lake II (Traditional)'; 

preg_match('/\:(.*?)\(/', $string, $matches); 

echo $matches[0]; // : Wise Lake II (
echo $matches[1]; // Wise Lake II 
```

# database - 关于评论的magento数据库结构帮助

> ID：11379352
> 
> 赞同：0
> 
> 时间：2012-07-07T23:07:33.310
> 
> 标签：database, magento, database-design

我正在构建一个将评论导入magento的脚本，我查看了表结构，我找到了这些表

```
review
review_detail
review_entity
review_entity_summary
review_status
review_store 
```

我了解所有表格的目的和结构，但我无法理解下表

```
review_entity_summary 
```

任何人都可以解释这个表的目的吗？在插入新评论时我是否需要更新这个表，如果是，那么我需要使用哪些值来更新这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:58:10.680

据我所知，该`review_entity_summary`表包含有关每种产品的一些汇总信息。该表的主要目的是轻松访问产品列表页面上的超龄评级和评论计数。

插入新评论后，您应该更新此表。
我认为你应该`$review->aggregate();`在插入后运行''。

# wpf - WPF .NET 4 DataGrid 列性能

> ID：11379357
> 
> 赞同：3
> 
> 时间：2012-07-07T23:08:00.033
> 
> 标签：wpf, performance, datagrid

我正在使用 .NET 4 WPF DataGrid 并注意到在使用大量列时垂直滚动性能不佳。这是我为测试它所做的：

1.  启用虚拟化（VirtualizingStackPanel.IsVirtualizing="True" VirtualizingStackPanel.VirtualizationMode="Recycling"）
2.  将 DataGrid 嵌入到简单的 Grid 布局中，此窗口中没有其他控件
3.  这些列没有自定义格式，没有图像 - 只是简单的文本
4.  我正在一台非常好的计算机上运行。win7（64 位）在四核 3.2gz 上，带有 8gb ram 和 radeon 7800 系列卡
5.  使用 Perforator 进行的测试不会显示任何不好的东西，例如软件渲染等

以下是一些结果：

*   100 行 x 5 列：平滑滚动
*   100,000 行 x 5 列：平滑滚动
*   100 行 x 75 列：滚动性能非常差
*   100,000 行 x 75 列：完全冷冻

当我有大量列（~75 - 100）时，我能做些什么来提高垂直滚动性能？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T00:39:08.493

您缺少两个非常重要的属性：

*   [EnableColumnVirtualization](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.enablecolumnvirtualization.aspx) - 默认值为 false
*   [EnableRowVirtualization](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.enablerowvirtualization.aspx) - 默认值为 true

启用它们，看看是否有区别。它应该有帮助。

我有大约 20 列左右，大约 2,500 行，我没有看到性能问题，但 75 列肯定看起来很多。您可能想研究在标题中添加右键单击启用/禁用列（类似于 excel）。

# javascript - 如何在 JavaScript 中对具有多个字段值的对象数组进行排序

> ID：11379361
> 
> 赞同：11
> 
> 时间：2012-07-07T23:08:20.487
> 
> 标签：javascript, sorting

我找到了一种很好的方法，可以根据以下定义的属性对对象数组进行排序：

[在 JavaScript 中按字符串属性值对对象数组进行排序](https://stackoverflow.com/questions/1129216/sorting-objects-in-an-array-by-a-field-value-in-javascript)

使用该功能非常适合单个排序（在所有浏览器上），甚至是另一个排序中的排序，除了使用谷歌浏览器！这是 Ege Özcan 用于对象数组的出色排序例程

```
function dynamicSort(property) { 
    return function (a,b) {
        return (a[property] < b[property]) ? -1 : (a[property] > b[property]) ? 1 : 0;
    }
} 
```

使用一个名为“Data”的数组（当然，我的数组有更多的对象对）......

```
var Data = [{Category: "Business", Value: "ABC"},{Category:"Personal", Value:"XYZ"}]; 
```

通过这样做，我可以获得正确的排序，其中订单被列为每个类别中的所有值......

```
Data.sort(dynamicSort("Value"));
Data.sort(dynamicSort("Category")); 
```

通过首先按 排序`Value`，然后按排序`Category`，我的数组将所有值按排序顺序排列，所有基于业务的值首先列出，然后是所有基于个人的值。完美的！除了在 Chrome 中，数据按类别正确排序，但每个类别中值的顺序似乎相当随机。

有没有人知道在 Chrome 中也可以使用的排序中进行排序的更好方法？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-08T00:32:46.527

我创建了该 dynamicSort 函数的多参数版本：

```
function dynamicSort(property) { 
    return function (obj1,obj2) {
        return obj1[property] > obj2[property] ? 1
            : obj1[property] < obj2[property] ? -1 : 0;
    }
}

function dynamicSortMultiple() {
    /*
     * save the arguments object as it will be overwritten
     * note that arguments object is an array-like object
     * consisting of the names of the properties to sort by
     */
    var props = arguments;
    return function (obj1, obj2) {
        var i = 0, result = 0, numberOfProperties = props.length;
        /* try getting a different result from 0 (equal)
         * as long as we have extra properties to compare
         */
        while(result === 0 && i < numberOfProperties) {
            result = dynamicSort(props[i])(obj1, obj2);
            i++;
        }
        return result;
    }
} 
```

我创建了一个数组，如下所示：

```
var arr = [
    {a:"a",b:"a",c:"a"},
    {a:"b",b:"a",c:"b"},
    {a:"b",b:"a",c:"a"},
    {a:"b",b:"a",c:"b"},
    {a:"b",b:"b",c:"a"},
    {a:"b",b:"b",c:"b"},
    {a:"b",b:"b",c:"a"},
    {a:"b",b:"b",c:"b"},
    {a:"b",b:"b",c:"a"},
    {a:"b",b:"b",c:"b"},
    {a:"b",b:"b",c:"a"},
    {a:"c",b:"b",c:"b"},
    {a:"c",b:"c",c:"a"}
]; 
```

当我这样做时它起作用了，

```
arr.sort(dynamicSortMultiple("c","b","a")); 
```

这是一个工作示例：http: [//jsfiddle.net/ZXedp/](http://jsfiddle.net/ZXedp/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-12-19T01:03:26.747

执行 Javascript 多标准排序（或多参数排序）的最简单方法是使用`.sort`，将多个参数连接在一起，然后比较两个字符串。

例如：

```
data.sort(function (a, b) {

  var aConcat = a["property1"] + a["property2"];
  var bConcat = b["property1"] + b["property2"];

  if (aConcat > bConcat) {
    return 1;
  } else if (aConcat < bConcat) {
    return -1;
  } else {
    return 0;
  }

}); 
```

我在这里包含了一个 JsFiddle 脚本：http: [//jsfiddle.net/oahxg4u3/6/](http://jsfiddle.net/oahxg4u3/6/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-04T16:47:01.683

您可能还想看看 thenBy.js：[https ://github.com/Teun/thenBy.js](https://github.com/Teun/thenBy.js)

它允许您使用标准的 Array.sort，但使用 firstBy().thenBy().thenBy() 样式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-12T14:18:32.737

我现在这篇文章已经很老了，无论如何我今天找到了它并引用了**Ege Özcan**，我改进了他为任何感兴趣的人实现 DESC-ASC SQL-Like 功能的出色解决方案（[http://jsfiddle.net/ZXedp/65/](http://jsfiddle.net/ZXedp/65/)）：

```
function dynamicSortMultiple() {
    var props=[];
    /*Let's separate property name from ascendant or descendant keyword*/
    for(var i=0; i < arguments.length; i++){
        var splittedArg=arguments[i].split(/ +/);
        props[props.length]=[splittedArg[0], (splittedArg[1] ? splittedArg[1].toUpperCase() : "ASC")];
    }
    return function (obj1, obj2) {
        var i = 0, result = 0, numberOfProperties = props.length ;
        /*Cycle on values until find a difference!*/
        while(result === 0 && i < numberOfProperties) {
            result = dynamicSort(props[i][0], props[i][1])(obj1, obj2);
            i++;
        }
        return result;
    }
}

/*Base function returning -1,1,0 for custom sorting*/
function dynamicSort(property, isAscDesc) { 
    return function (obj1,obj2) {
        if(isAscDesc==="DESC"){
            return ((obj1[property] > obj2[property]) ? (-1) : ((obj1[property] < obj2[property]) ? (1) : (0)));
        }
        /*else, if isAscDesc==="ASC"*/
        return ((obj1[property] > obj2[property]) ? (1) : ((obj1[property] < obj2[property]) ? (-1) : (0)));
    }
} 
```

通过这样的方式调用函数：

```
arr.sort(dynamicSortMultiple("c DESC","b Asc","a")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-17T19:35:51.390

这是我的解决方案。它比 lodash 的**_.sortBy()**多列排序函数快大约两倍（参见[http://jsperf.com/multi-column-sort](http://jsperf.com/multi-column-sort)。我生成排序函数的文本，然后在标准**.sort()**中使用它。它也适用于 Chrome 和 Firefox。

```
function multiColumnSort(arr,sf) {
    var s = '';
    sf.forEach(function(f,idx) {
        s += 'if(arguments[0].'+f+'>arguments[1].'+f+')return 1;';
        s += 'else if(arguments[0].'+f+'==arguments[1].'+f+')';
        s += (idx < sf.length-1)? '{' : 'return 0';
    });
    s += Array(sf.length).join('}')+';return -1';
    return arr.sort(new Function(s));
}; 
```

# java - 查找主要需要很长时间 JAVA

> ID：11379370
> 
> 赞同：0
> 
> 时间：2012-07-07T23:09:41.350
> 
> 标签：java, loops

我不知道我是否正确使用了此代码-> main。它非常慢。是DDS算法。它是 DSA 的实现：[http ://en.wikipedia.org/wiki/Digital_Signature_Algorithm](http://en.wikipedia.org/wiki/Digital_Signature_Algorithm)

这个循环需要很多时间

```
do {
            pTemp = new BigInteger(l, primeCenterie, rand);
            pTemp2 = pTemp.subtract(BigInteger.ONE);
            pTemp = pTemp.subtract(pTemp2.remainder(q));
            System.out.println("1 " + i++);
        } while (!pTemp.isProbablePrime(primeCenterie)
                || pTemp.bitLength() != l); 
```

我添加了一些 printlns，甚至它们都很慢。

```
 import java.math.BigInteger;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.Random;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Key {
    int primeCenterie = 20;
    BigInteger q;
    BigInteger p;
    BigInteger g;
    BigInteger y;
    BigInteger x;
    BigInteger k;
    Random rand = new Random();

    Key() {
    }

    public void generateKey() {
        q = new BigInteger(160, primeCenterie, rand);
        p = generateP(q, 512);
        g = generateG(p, q);
        do {
            x = new BigInteger(q.bitCount(), rand);
        } while (x.compareTo(BigInteger.ZERO) != 1 && x.compareTo(q) != -1);
        y = g.modPow(x, p);
    }

    private BigInteger generateP(BigInteger q, int l) {
        if (l % 64 != 0) {
            throw new IllegalArgumentException("L value is wrong");
        }
        BigInteger pTemp;
        BigInteger pTemp2;
        int i = 0;
        do {
            pTemp = new BigInteger(l, primeCenterie, rand);
            pTemp2 = pTemp.subtract(BigInteger.ONE);
            pTemp = pTemp.subtract(pTemp2.remainder(q));
            System.out.println("1 " + i++);
        } while (!pTemp.isProbablePrime(primeCenterie)
                || pTemp.bitLength() != l);
        return pTemp;
    }

    private BigInteger generateG(BigInteger p, BigInteger q) {
        BigInteger aux = p.subtract(BigInteger.ONE);
        BigInteger pow = aux.divide(q);
        BigInteger gTemp;
        int i = 0;
        do {
            gTemp = new BigInteger(aux.bitLength(), rand);
            System.out.println("2 " + i++);
        } while (gTemp.compareTo(aux) != -1
                && gTemp.compareTo(BigInteger.ONE) != 1);
        return gTemp.modPow(pow, p);
    }

    public BigInteger generateK(BigInteger q) {
        BigInteger tempK;
        int i = 0;
        do {
            tempK = new BigInteger(q.bitLength(), rand);
            System.out.println("3 " + i++);
        } while (tempK.compareTo(q) != -1
                && tempK.compareTo(BigInteger.ZERO) != 1);
        return tempK;
    }

    public BigInteger generateR() {
        k = generateK(q);
        BigInteger r = g.modPow(k, p).mod(q);
        return r;
    }

    public BigInteger generateS(BigInteger r, byte[] data) {
        MessageDigest md;
        BigInteger s = BigInteger.ONE;
        try {
            md = MessageDigest.getInstance("SHA-1");
            md.update(data);
            BigInteger hash = new BigInteger(md.digest());
            s = (k.modInverse(q).multiply(hash.add(x.multiply(r)))).mod(q);
        } catch (NoSuchAlgorithmException ex) {
            Logger.getLogger(DSA.class.getName()).log(Level.SEVERE, null, ex);
        }
        return s;
    }

    boolean verify(byte[] data, BigInteger r, BigInteger s) {
        if (r.compareTo(BigInteger.ZERO) <= 0 || r.compareTo(q) >= 0) {
            return false;
        }
        if (s.compareTo(BigInteger.ZERO) <= 0 || s.compareTo(q) >= 0) {
            return false;
        }
        MessageDigest md;
        BigInteger v = BigInteger.ZERO;
        try {
            md = MessageDigest.getInstance("SHA-1");
            md.update(data);
            BigInteger hash = new BigInteger(md.digest());
            BigInteger w = s.modInverse(q);
            BigInteger u1 = hash.multiply(w).mod(q);
            BigInteger u2 = r.multiply(w).mod(q);
            v = ((g.modPow(u1, p).multiply(y.modPow(u2, p))).mod(p)).mod(q);
        } catch (NoSuchAlgorithmException ex) {
            Logger.getLogger(DSA.class.getName()).log(Level.SEVERE, null, ex);
        }
        return v.compareTo(r) == 0;
    }

    public static void main(String[] args) {
        Key key = new Key();
        key.generateKey();
        byte[] data = "a".getBytes();
        BigInteger r = key.generateR();
        BigInteger s = key.generateS(r, data);
        System.out.println(key.verify(data,r,s)); 
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T00:11:41.697

探查器在这里最好，但我认为你的问题是 isProbablePrime。你通过了 20，这基本上意味着你想要一个 .9999999 的确定性。尝试较小的参数或使用其他方法进行素性测试...

```
isProbablePrime

public boolean isProbablePrime(int certainty)

    Returns true if this BigInteger is probably prime, false if it's definitely composite. If certainty is <= 0, true is returned.

    Parameters:
        certainty - a measure of the uncertainty that the caller is willing to tolerate: if the call returns true the probability that this BigInteger is prime exceeds (1 - 1/2certainty). The execution time of this method is proportional to the value of this parameter. 
    Returns:
        true if this BigInteger is probably prime, false if it's definitely composite. 
```

# java - ScheduledExecutorService 只循环一次

> ID：11379374
> 
> 赞同：3
> 
> 时间：2012-07-07T23:10:04.277
> 
> 标签：java, multithreading

我正在尝试实现每秒循环的 ScheduledExecutorService 线程，但到目前为止它只循环一次。

我的问题是如何设置它以使其定期循环而不是一次迭代？

另外，如何将连接池传递到线程中，以便每次迭代都可以查询数据库？任何帮助深表感谢。

```
public static void main(String[] args) throws InterruptedException {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    AdminManager frame = new AdminManager();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }

            }
        });

        BoneCP connectionPool = null;
        Connection connection = null;

        try {
            // load the database driver (make sure this is in your classpath!)
            Class.forName("com.mysql.jdbc.Driver");
        } catch (Exception e) {
            e.printStackTrace();
            return;
        }

        try {
            // setup the connection pool
            BoneCPConfig config = new BoneCPConfig();
            config.setJdbcUrl("jdbc:mysql://192.0.0.1:3306/database"); // jdbc url specific to your database, eg jdbc:mysql://127.0.0.1/yourdb
            config.setUsername("root"); 
            config.setPassword("");
            connectionPool = new BoneCP(config); // setup the connection pool

            connection = connectionPool.getConnection(); // fetch a connection

            if (connection != null){
                System.out.println("Connection successful!");
            }

        } catch (SQLException e) {
            e.printStackTrace();
        } finally {
            if (connection != null) {
                try {
                    connection.close();
                } catch (SQLException e) {
                    e.printStackTrace();
                }
            }
        }

        ScheduledExecutorService exec = Executors.newSingleThreadScheduledExecutor();
        exec.schedule(new Runnable(){
            @Override
            public void run(){
                System.out.println("Working ... ");

            }
        }, 1, TimeUnit.SECONDS);

        //connectionPool.shutdown(); // shutdown connection pool.
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T23:22:16.953

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html)

有一个 scheduleAtFixedRate 方法。要将某些东西传递给匿名类，需要将其声明为 final。它需要在同一范围内。

此外，您现在拥有的代码正在关闭连接，如果您打算将其传递给另一个线程，则需要保持打开状态。

!编辑一些示例代码

```
public class Whatever {
    public static void main(String[] args) throws Exception {
        // ... do your frame thing

        loadDataBaseDriver();
        BoneCP connectionPool = createConnectionPool();

        try {
            final Connection connection = connectionPool.getConnection();
            ScheduledExecutorService exec = Executors.newSingleThreadScheduledExecutor();

            exec.scheduleAtFixedRate(new Runnable(){
                @Override
                public void run(){
                    System.out.println("Working ... ");

                    // use connection
                }
            }, 0, 1, TimeUnit.SECONDS);
        } catch (SQLException e) {
          // do whatever
        }
    }

    public static BoneCP createConnectionPool() throws SQLException {
        BoneCPConfig config = new BoneCPConfig();
        config.setJdbcUrl("jdbc:mysql://192.0.0.1:3306/database"); // jdbc url specific to your database, eg jdbc:mysql://127.0.0.1/yourdb
        config.setUsername("root"); 
        config.setPassword("");
        connectionPool = new BoneCP(config);
        return connectionPool;
    }

    public static void loadDataBaseDriver() {
        try {
            // load the database driver (make sure this is in your classpath!)
            Class.forName("com.mysql.jdbc.Driver");
        } catch (Exception e) {
            e.printStackTrace();
            return;
        }
    }

} 
```

我不知道您正在调用的方法的签名，因此错误可能是错误的

# c++ - 用 C++ 鼠标单击

> ID：11379375
> 
> 赞同：0
> 
> 时间：2012-07-07T23:10:14.097
> 
> 标签：c++, windows-7, click, mouse, mouseevent

无论如何在我的应用程序之外使用 C++ 强制单击鼠标？例如，如果鼠标在某个坐标上，它会被强制点击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T23:34:14.580

这应该没问题：

[http://www.cplusplus.com/forum/lounge/17053/](http://www.cplusplus.com/forum/lounge/17053/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T23:37:49.130

试试这个：

```
HWND h = (hwnd of window)
WORD mouseX = 10;// x coord of mouse
WORD mouseY = 10;// y coord of mouse
PostMessage(hWnd,WM_LBUTTONDOWN,0,MAKELPARAM(mouseX,mouseY)); 
```

取自[本站](http://www.dreamincode.net/forums/topic/200043-simulate-mouse-click-to-non-foreground-window-using-sendmessage/)。

# function - 在文件名上保存变量

> ID：11379376
> 
> 赞同：0
> 
> 时间：2012-07-07T23:10:21.653
> 
> 标签：function

我有以下用于跟踪用户页面访问和 ips 的功能：

```
function log_good_ip($user, $ip, $web, $browser) {
        $file = 'logs/ip_good.txt'; 
```

我希望每个用户都有自己的文本文件，他们的电子邮件在文件名上，例如登录的用户是 abc123，这将保存为 ip_good.abc123.txt。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T23:13:28.127

尝试：

```
$file = 'logs/ip_good.'.$user.'.txt'; 
```

# php - (PHP) 评估简单的逻辑表达式

> ID：11379377
> 
> 赞同：0
> 
> 时间：2012-07-07T23:10:33.020
> 
> 标签：php

我有以下形式的表达式（EBNF）：

```
<expression> ::= ["("]<base>[")"][{<modifier>"("<expression>")"}]
<base>       ::= <logical>[{<modifier><logical>}]
<logical>    ::= "1" | "0"
<modifier>   ::= "&" | "|" 
```

这种格式的字符串示例如下：

```
(1|(1&0))|(1&(1|0)) 
```

或者，我可以用后缀表示法得到这个：

```
110&|110|&| 
```

在 PHP 中有没有一种简单的方法来评估这个？（即这个特定示例的结果应该是`1`）。`eval`由于安全问题，我想避免使用功能。

如果没有简单的方法在没有`eval`函数的 PHP 中实现这一点，那么编写自定义解析器的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T00:55:33.207

我知道已经有一个正确的答案，但是这里有一个用于 EBNF 的 PHP[解析器](http://karmin.ch/ebnf/index#ebnfphp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T00:16:03.183

最简单的方法是使用 eval。为了解决安全问题，您可以设置一个白名单： $whitelist = array('(',')','1','0','%','|');

编写解析器的最佳方法是获取解析器生成器，如“loco”或“lime”或“php-peg”。您只需定义语法并开始解析它，使用 RegexpParser 或 StringParser（或两者）。 [http://qntm.org/loco](http://qntm.org/loco) - [http://qntm.org/files/loco/Loco.php](http://qntm.org/files/loco/Loco.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T23:15:32.163

如果没有 eval 函数，这在 PHP 中是不容易实现的。

您将不得不使用 preg_match 或类似的东西来评估您的代码，然后将其转换。

# javascript - 实例变量变得未定义 - CoffeeScript

> ID：11379378
> 
> 赞同：5
> 
> 时间：2012-07-07T23:10:38.300
> 
> 标签：javascript, coffeescript

```
class Game

  foo: null

  play: ->

    @foo = 2
    @animate()

  animate: ->

    requestAnimationFrame( @animate, 1000 )
    console.log('foo = ', @foo)

$ ->
  game = null

  init = ->

    game = new Game()
    game.play()

  init() 
```

Game 中的 animate 方法中的日志产生：

富 = 2

foo = 未定义

所以 foo 在第一次调用动画时是 2，然后是 undefined。有人可以解释为什么以及如何解决这个问题。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-07T23:21:41.747

当您调用时`setInterval`，上下文丢失，第二次`@`丢失`window`。您需要 fat-arrow 方法来保留适当的`this`：

```
animate: => 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-08T01:50:48.567

你可以定义`animate`如下：

```
animate: ->
  callback = (=> @animate())
  requestAnimationFrame(callback, 1000 )
  console.log('foo = ', @foo) 
```

这里的技术是获取绑定方法。`@animate`本身是*unbound*，但`(=> @animate())`它是它的绑定版本。

如果您使用 UnderscoreJS，您可以获得类似的结果，如下所示：

```
animate: ->
  callback = _.bind(@animate, @)
  requestAnimationFrame(callback, 1000 )
  console.log('foo = ', @foo) 
```

如果您使用的是更高版本的 JavaScript，您可以执行以下操作：

```
animate: ->
  callback = @animate.bind(@)
  requestAnimationFrame(callback, 1000 )
  console.log('foo = ', @foo) 
```

# python - Python 导入错误

> ID：11379382
> 
> 赞同：1
> 
> 时间：2012-07-07T23:11:25.927
> 
> 标签：python, qr-code

我已经在 Ubuntu 12.04 x86_64 上安装了 pyqrcode => [PyQRCode 。](http://pyqrcode.sourceforge.net/)通过运行 make && sudo make install。

在成功的 make/make 安装结束时，最后一行是：

> 安装 /usr/local/lib/python2.7/dist-packages/qrcode-0.2.1-py2.7-linux-x86_64.egg

但是当我尝试导入 qrcode 时，我收到此错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "qrcode/__init__.py", line 6, in <module>
    from qrcode import _qrcode
ImportError: cannot import name _qrcode 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T23:19:47.050

`sudo pip install qrcode`对我来说工作得很好。

我的猜测是，编译后，您从源目录启动了 Python，因此它在本地`qrcode`目录中查找——即`pyqrcode-0.2.1/qrcode`，而不是在通常的 Python 路径中。尝试从另一个目录运行它。再具体一点：

```
~/sys/pyqrcode-0.2.1$ python
Python 2.7.3 (default, Apr 20 2012, 22:44:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import qrcode
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "qrcode/__init__.py", line 6, in <module>
    from qrcode import _qrcode
ImportError: cannot import name _qrcode
>>> 
~/sys/pyqrcode-0.2.1$ cd ~
~$ python
Python 2.7.3 (default, Apr 20 2012, 22:44:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import qrcode
>>> qrcode
<module 'qrcode' from '/usr/local/lib/python2.7/dist-packages/qrcode/__init__.pyc'> 
```

# javascript - 在 .js 中引用 html

> ID：11379383
> 
> 赞同：0
> 
> 时间：2012-07-07T23:11:28.453
> 
> 标签：javascript, html

简单的问题。

我是 javascript 和 html 的新手。

我有一个文件 index.html，例如：

```
<html>
<head>
<link rel=StyleSheet href="beauty.css" type="text/css">
<script src="myjs.js"></script>

</head>
<body>
<p id="foo"></p>
</body>
</html> 
```

这是我的 js 文件：

```
var d=new Date();
var month = d.getMonth()+1;
var data = d.getDate() + "/" + month + "/" + d.getFullYear();
function showdata(){
    return data;
}

document.getElementById("foo").innerHTML=showdata(); 
```

我知道我需要引用 html，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T23:15:11.617

你可能想要

```
window.onload = function() {
   var d=new Date();
   var month = d.getMonth()+1;
   var data = d.getDate() + "/" + month + "/" + d.getFullYear();
   function showdata(){
       return data;
   }

   document.getElementById("foo").innerHTML=showdata();
} 
```

您可能还想`type="text/javascript"`在`<script>`标签中指定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:14:21.290

尝试将脚本标签移动到页面底部。就在结束`</body>`标签之前。像这样的东西：

```
<html>
    <head>
    <link rel=StyleSheet href="beauty.css" type="text/css">

    </head>
    <body>
        <p id="foo"></p>
        <script src="myjs.js"></script>
    </body>
</html> 
```

问题是您的 javascript 代码是在段落元素成为页面的一部分之前执行的。

# java - 有没有办法在android中同时设置高度和包装内容？

> ID：11379389
> 
> 赞同：6
> 
> 时间：2012-07-07T23:13:10.750
> 
> 标签：java, android, button, height

我有一个按钮，我希望它的最小高度为 50dp，但如果文本太长，我也希望它变大并换行，这可能吗？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-07T23:16:28.577

是的，有一个[minHeight xml 属性。](http://developer.android.com/reference/android/view/View.html#attr_android%3aminHeight)

```
android:minHeight="50dp" 
```

# sencha-touch-2 - 当 TabPanel 元素上的侦听器更改时，如何更改标题栏文本？

> ID：11379394
> 
> 赞同：0
> 
> 时间：2012-07-07T23:13:57.423
> 
> 标签：sencha-touch-2

更改或点击 TabPanel 的图标时，我需要更改标题栏文本。我创造了

**酒吧.js**

```
Ext.define('myapp.view.Myclass', {
   extend: 'Ext.Titlebar',

   config: {
      title: '',
   }
}) 
```

**视口.js**

```
Ext.define('myapp.view.Viewport' , {
extend: 'Ext.TabPanel',

config: {
      tabBarPosition: 'bottom',
      items: [
         {
            xtype: 'myicon1'
         },
         {
            xtype: 'myicon2'
         },
      ]
    }
}) 
```

和**MyIcon1.js**

```
Ext.define('myapp.view.MyIcon1', {
extend: 'Ext.Panel',
xtype: 'myicon1',

   config: {
     ...
   }
}) 
```

因此，当我在标题栏上动态点击图标的更改标题时。谢谢我需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:26:09.323

Just listen to the `activeitemchange` events on the tabpanel :

```
activeitemchange: function( container, value, oldValue, eOpts ){
  ...
} 
```

Within this function, just get the name of the new tab from the `value` parameter and set the title to your titlebar.

Hope this helps

# maven-3 - 有没有一种简单的方法可以将 maven 1 转换为 maven 3

> ID：11379395
> 
> 赞同：1
> 
> 时间：2012-07-07T23:14:06.097
> 
> 标签：maven-3, eclipse-juno

我使用的是 Eclipse Juno 4.2，而 maven Embedded 是 3.0.4。我不是 maven 专家，并尝试通过 Stackoverflow 帮助来解决问题。我猜自 maven 1 以来我一直在使用 maven 和 eclipse，现在必须将其转换为 maven 3 才能使其工作。我已经使用 maven-one-plugin 来尝试转换。我运行了“mvn one:converter”并收到此错误...

```
[WARNING] Could not transfer metadata org.apache.maven.plugins/maven-metadata.xml from/to      Central (http://repo1.maven.org/): No connector available to access repository Central  (http://repo1.maven.org/) of type  using the available factories  WagonRepositoryConnectorFactory
[WARNING] Could not transfer metadata org.codehaus.mojo/maven-metadata.xml from/to Central (http://repo1.maven.org/): No connector available to access repository Central (http://repo1.maven.org/) of type  using the available factories WagonRepositoryConnectorFactory
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.917s
[INFO] Finished at: Sat Jul 07 18:51:30 EDT 2012
[INFO] Final Memory: 5M/81M
[INFO] ------------------------------------------------------------------------
[ERROR] No plugin found for prefix 'one' in the current project and in the plugin groups [org.apache.maven.plugins, org.codehaus.mojo] available from the repositories [local (/Users/Dev/.m2/repository), Central (http://repo1.maven.org/), ibiblio.org (http://mirrors.ibiblio.org/pub/mirrors/maven2)] -> [Help 1]
[ERROR] 
```

我认为主要问题是导致这一切的警告的“没有可用的连接器”部分。我尝试在 Eclipse Juno 上使用 mvn:install 进行构建，并且收到类似“无可用连接器”的错误，如下所示...

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.10:test (default-test) on project Belfast: Unable to generate classpath: org.apache.maven.artifact.resolver.ArtifactResolutionException: Unable to get dependency information for org.apache.maven.surefire:surefire-junit3:jar:2.10: Failed to retrieve POM for org.apache.maven.surefire:surefire-junit3:jar:2.10: Could not transfer artifact org.apache.maven.surefire:surefire-junit3:pom:2.10 from/to Central (http://repo1.maven.org/): No connector available to access repository Central (http://repo1.maven.org/) of type  using the available factories AsyncRepositoryConnectorFactory, WagonRepositoryConnectorFactory
[ERROR] org.apache.maven.surefire:surefire-junit3:jar:2.10 
```

我到底错过了什么？Maven 3 是否需要一些我在 POM 上没有的连接器？我的POM如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>MYProj</groupId>
    <artifactId>MYProj</artifactId>
<packaging>war</packaging>
<version>1.0.1</version>
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>versions-maven-plugin</artifactId>
            <version>1.3.1</version>
            <configuration>
                <includesList>com.mysite</includesList>
                <generateBackupPoms>false</generateBackupPoms>
                <allowSnapshots>true</allowSnapshots>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.bluestemsoftware.open.maven.plugin</groupId>
            <artifactId>release-plugin</artifactId>
            <version>1.0.0.2</version>
            <configuration></configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.2</version>
            <configuration>
                <warSourceExcludes> **/.svn/** </warSourceExcludes>
            </configuration>
        </plugin>
    </plugins>
    <resources>
        <resource>
            <directory>src/main/java</directory>
            <excludes>
                <exclude>**/*.java</exclude>
            </excludes>
        </resource>
    </resources>
</build>
<repositories>
    <repository>
        <id>maven2</id>
        <url>http://repo1.maven.org/maven2</url>
    </repository>
</repositories>
<pluginRepositories>
</pluginRepositories>
<dependencies>
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts-core</artifactId>
        <version>1.3.10</version>
    </dependency>
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts-tiles</artifactId>
        <version>1.3.10</version>
    </dependency>
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts-taglib</artifactId>
        <version>1.3.10</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.9</version>
    </dependency>
    <dependency>
        <groupId>commons-fileupload</groupId>
        <artifactId>commons-fileupload</artifactId>
        <version>1.2.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-io</artifactId>
        <version>1.3.2</version>
    </dependency>
    <dependency>
        <groupId>com.amazonaws</groupId>
        <artifactId>aws-java-sdk</artifactId>
        <version>[1.3.3,)</version>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.13</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate</artifactId>
        <version>3.2.7.ga</version>
        <type>jar</type>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-c3p0</artifactId>
        <version>3.3.2.GA</version>
    </dependency>
    <dependency>
        <groupId>org.imgscalr</groupId>
        <artifactId>imgscalr-lib</artifactId>
        <version>4.2</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>com.mortennobel</groupId>
        <artifactId>java-image-scaling</artifactId>
        <version>0.8.5</version>
    </dependency>
    <dependency>
        <groupId>com.drewnoakes</groupId>
        <artifactId>metadata-extractor</artifactId>
        <version>2.4.0-beta-1</version>
    </dependency>
    <dependency>
        <groupId>com.sun.mail</groupId>
        <artifactId>javax.mail</artifactId>
        <version>1.4.4</version>
    </dependency>
    <dependency>
        <groupId>commons-httpclient</groupId>
        <artifactId>commons-httpclient</artifactId>
        <version>3.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpclient</artifactId>
        <version>4.2-beta1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpcore</artifactId>
        <version>4.2-beta1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpmime</artifactId>
        <version>4.2-beta1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tika</groupId>
        <artifactId>tika-core</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-core-asl</artifactId>
        <version>1.9.4</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.9.4</version>
    </dependency>
</dependencies> 
```

任何帮助表示赞赏。

# javascript - 通过 Javascript 访问 Twitter

> ID：11379398
> 
> 赞同：3
> 
> 时间：2012-07-07T23:14:12.880
> 
> 标签：javascript, ajax, twitter

我正在构建一个通过以下方式使用 twitter 的网络应用程序：

1) 用户可以使用 Twitter 登录（即用户对应用程序进行身份验证和授权） - 我得到以下内容：“oauth_token_secret=[OAUTH_TOKEN_SECRET_HERE]&oauth_token=[OAUTH_TOKEN_HERE]”，我将其存储到服务器。

2）现在我想只使用javascript（使用jQuery）在客户端访问用户数据。那我该怎么办？？？我尝试了几种方法，但我一直错过一些东西，所以我的问题是应该如何拨打电话？示例中需要哪些参数：

```
$.getJSON('https://api.twitter.com/1/statuses/home_timeline.json?include_entities=true&[WHAT PARAMETERS SHOLD BE ADDED HERE???]&callback=?', function(data) {
    console.log(data);
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T23:31:22.697

您可以使用`count`amd`max_id`查询参数，但不需要它们。

~~我也不认为你需要或想要这个`callback=?`部分。~~

关键是：您需要使用这些 OAUTH 项来生成 Authorization 标头，您必须将其添加到出站请求中。标头的结构在[Twitter 的开发人员文档](https://dev.twitter.com/docs/auth/oauth/faq)中进行了描述。

要查看消息的外观，请访问：[https ://apigee.com/console/twitter](https://apigee.com/console/twitter)

这是一个有效请求的示例：

```
GET /1/statuses/home_timeline.json HTTP/1.1
Authorization: XXXXXXXXX
Host: api.twitter.com
User-Agent: Mozilla/5.0 (.....) 
```

...其中 XXXXXX 是 Authorization 标头，根据 Twitter 规定的 oauth 1.0a 规则生成。

它看起来像这样：（插入换行符以提高可读性；此标头应在实际请求中全部位于一行）

```
OAuth oauth_consumer_key="RR0sePOBbQ8bYdC8r41mg",
  oauth_signature_method="HMAC-SHA1",
  oauth_timestamp="1341705465",
  oauth_nonce="34350",
  oauth_version="1.0",
  oauth_token="5915213-haTzPfWcr6Ci2gdnD8797AfgRs8AICDK8KIStFtx",
  oauth_signature="1hxDP104ZXGMlcblQ05h6vWoJg%3D" 
```

您可能希望利用 Javascript OAuth 库来构造该标头并发送请求。

尝试[搜索 jsOAuth 和 Twitter](https://www.google.com/search?q=jsoauth%20twitter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:38:06.997

很抱歉没有给出 1 行答案，但很乐意提供帮助..

通常，在使用 javascript 获取数据时，由于沙盒/“同源”限制，您将无法访问许多数据源。

但是，站点可以批准此功能，但通常会采用特定方式让您访问数据（通常通过先登录并接收会话）

许多人已经围绕这些方法编写了包装器（尤其是对于像 twitter 这样流行的东西）

看看 jsOath [https://github.com/bytespider/jsOAuth/downloads](https://github.com/bytespider/jsOAuth/downloads)

# java - 无法重新初始化匿名类成员

> ID：11379404
> 
> 赞同：1
> 
> 时间：2012-07-07T23:14:38.707
> 
> 标签：java, anonymous-class

我正在重新初始化本地类的成员变量，并且出现编译错误。这里有什么问题？为什么这不会编译？谢谢！

这不会编译

```
public class TestSomething {

public void someMethod(){
    class LocalClassInner{
        int i=100; // Error on this line.Syntax error on token ";", , expected

        i=200;
    }       
}

} 
```

这编译得很好

```
public class TestSomething {

public void someMethod(){
    class LocalClassInner{
        int i=100;
        //i=200;
    }       
}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T23:16:43.190

这不是真正的本地阶级问题。您不能将赋值语句放在任何类的“顶级”。

赋值语句需要放在方法、构造函数、静态初始化器或实例初始化器中。

当你写

```
int i = 100; 
```

您实际上是在声明内部类的一个*字段*（如您所知）。您可以重新分配此字段，前提是您在构造函数、方法等中这样做了。

**附录**

以下使用实例初始化器，只是为了好玩：

```
public void someMethod() {
    class LocalClassInner {
        int i = 100;
        {i=200;}
    }           
} 
```

它编译得很好，见[http://ideone.com/qjnv3](http://ideone.com/qjnv3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:22:20.160

第二个任务错了。您不能将常规代码放在方法、构造函数或初始化程序之外。这与匿名类无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T23:22:25.087

如果你想改变 i 的分配，它需要进入一个方法。

像这样：

```
public class TestSomething {

public void someMethod(){
    class LocalClassInner{
        int i=100;
        private void setI()
        {
            i=200;
        }
    }       
}} 
```

# mongodb - MongoDB - 查询多对多关系如何工作？

> ID：11379405
> 
> 赞同：4
> 
> 时间：2012-07-07T23:14:56.033
> 
> 标签：mongodb, nosql

我正在阅读[MongoDB in Action](http://www.manning.com/banker/)一书。我有一个关于`Chapter 4: Document-oriented data`.

关于`Page 58`，本书给出了一个多对多关系的例子。它提供`Product`文件和`Category`文件。

## 产品

![产品_1](../Images/29011e3cfff85daffa0e9b29fb13d457.png)

![产品_2](../Images/3ebacf99a1909bcc1defd055dc63d297.png)

## 类别

![类别_1](../Images/62d80e325bff18cd92d2a973ebfe7964.png) ![类别_2](../Images/761ef99a0b4a4261e425f85ab6a3beff.png)

* * *

## 我的问题

**我理解这里的多对多关联。**基本上，`Product`可以有一个带有`Category`_id数组的键等。所以我不想问这样的问题[MongoDB Many-to-Many Association](https://stackoverflow.com/questions/2336700/mongodb-many-to-many-association)

我的问题是关于`Page 61`，书中给出了两个关于查询多对多关系的示例查询。这是两个查询：

![两个查询](../Images/7273d8d6cdb6369da2cac66c47aef2ac.png)

1.  是什么`=>`意思？我认为`=>`只存在于 Ruby 驱动程序使用中。

2.  `category`里面是什么`category['_id']`？是收藏吗？

3.  `product`里面是什么`product['category_ids']`？

4.  `Gardening Tools category`如上所述，第一个查询与第一个查询有何关系？

这本书没有详细解释这两个查询。

有人可以解释更多关于查询多对多的信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T23:31:46.750

看起来作者使用的是驱动程序语言而不是本机 MongoDB javascript mongo 客户端。这也是有道理的，因为书中的描述说作者同时维护 C 和 Ruby Mongo 驱动程序。

1.  是的，这`=>`是一种语言驱动程序特定的符号。不是javascript。似乎就像在说：`db.products.find({_id: aCategoryId})`。它实际上是一个[Ruby 哈希表示法](http://ruby-doc.org/core-1.9.3/Hash.html)。

2.  该`category`示例中的 看起来仅代表您已经检索到的类别文档。在这种情况下，它将是园艺类别的文档。它只是说“查找此类别 id 在产品 category_ids 数组中的所有产品

3.  与上一个问题类似。`product`是您已经检索到的文档。查询是说“在此产品类别 ID 数组中查找其 id 为的任何类别文档。

4.  `category`如果您使用以下内容检索它，则将是园艺类别：`var category = db.category.findOne({slug: "gardening-tools"})`

# knockout.js - 动态 HTML 和 knockout.js 从 Ajax 请求重新绑定 HTML

> ID：11379406
> 
> 赞同：0
> 
> 时间：2012-07-07T23:15:01.447
> 
> 标签：knockout.js

我有一个问题，当 knockout.js 从 ajax 调用设置一个可观察数组时，我的动态 html 被重新填充。发生这种情况时会重新加载动态 HTML，导致其中的 init 函数执行两次并重新绑定其他所有内容。为什么我的 html observable 会重新绑定动态 HTML？我会使用 Fiddle，但我有很多代码。

**阿贾克斯回调**

```
app.viewModel.members.bracket.parts(response.Parts);

ko.applyBindings(app.viewModel.members, app.viewModel.members.container().find('> div:first').get(0)); 
```

**容器**

```
<div id="container" class="clearfix" data-bind="html: members.html, container: {}">
</div>

<script type="text/javascript">
  app.viewModel.members = {
        container: ko.observable($('#container')),
        html: ko.observable(''),
        bracket: {
              parts: ko.observableArray([])
        }
    };
</script> 
```

**动态 HTML**

```
<div data-bind="with: members.bracket">
    <div>   
        <div id="bracket-wrapper">
            <div data-bind="template: { name: partTemplate, foreach: parts }"></div>
        </div>
    </div>
</div>

<script type="text/html" id="part-template-1">
    <div class="bracket-part" data-bind="bracketGameInit: { left: $data.left, top: $data.top, height: $data.height, width: $data.width }, css: { 'reverse-bracket' : $data.reverse }"></div>
</script>

 app.members.bracket.init({
        pools: @Html.Raw(Model.DivisionPools.ToJSON()),
        teams: @Html.Raw(Model.DivisionTeams.ToJSON()),
        parts: @Html.Raw(Model.Parts.ToJSON())
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:09:42.273

这是由我收到的[Observable Array Performance](http://www.knockmeout.net/2012/04/knockoutjs-performance-gotcha.html)提示引起的。我将它更新回更新可观察数组的旧方式。

```
function populateGameNumbers(gameNumbers) {
        viewModel.gameNumbers([]);

        var numbers = [];
        for (var i = 0; i < gameNumbers; i++) {
            numbers.push(i + 1);
        }
        viewModel.gameNumbers(numbers);
        //viewModel.gameNumbers.push.apply(viewModel.gameNumbers, numbers );
    } 
```

# jquery - 使用 History.js 时如何检测单击的后退/前进按钮？

> ID：11379411
> 
> 赞同：8
> 
> 时间：2012-07-07T23:16:21.450
> 
> 标签：jquery, history.js

我在我的代码中使用带有 jQ​​uery 的 History.js ( [click )。](https://github.com/balupton/history.js)

通过 ajax 加载新内容时，我使用：

```
History.pushState({my:stateobject},"newtitle","supernewurl"); 
```

这似乎有效，因为 URL 已在浏览器中更新。

但是，只要按下后退或前进按钮，我就无法连接我的代码。为此使用哪种方法/事件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T19:53:00.360

您需要将事件处理程序绑定到`statechange`事件，如下所示：

```
$(window).bind('statechange',function(){
// Do something, inspect History.getState() to decide what
}) 
```

History.js 附带了一个完整的 javascript 片段，可用于完全“ajaxify”一个站点：[https ://github.com/browserstate/ajaxify](https://github.com/browserstate/ajaxify)

看看那里以获得更多灵感。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-07T23:24:04.457

您不会捕获*返回单击事件*，因为没有。

您要做的是使用, ,方法确保`history`对象处于正确状态。`window.history.pushState``window.history.popState``window.history.replaceState`

[https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-08T16:47:15.587

我能够使用“onPopState”事件来触发我的自定义 AJAX 代码。

```
window.onpopstate = function(event) {
  $(fellowModal).foundation('reveal', 'close');
}; 
```

我尝试了其他几件事，这对我有用。

# c - 使用字符串文字处理 char * init 时崩溃，但不是使用 malloc

> ID：11379412
> 
> 赞同：3
> 
> 时间：2012-07-07T23:16:24.160
> 
> 标签：c, string, memory, runtime, string-literals

我今天正在读一本关于 C 的书，它提到以下内容是正确的；我很好奇为什么要制作这个程序来验证；然后最终将其发布在这里，以便比我聪明的人可以教我为什么这两种情况在运行时不同。

问题的细节与*运行时*如何处理 (char *) 之间的差异有关，具体取决于它是否指向作为文字创建的字符串与使用 malloc 和手动填充创建的字符串。

**为什么内存分配的内存这样更受保护？**另外，答案是否解释了“总线错误”的含义？

这是我编写的一个程序，它询问用户是否要崩溃，以说明程序编译良好；并强调**在我的脑海中，两个选项中的代码在概念上是相同的**；但这就是我在这里的原因，以了解他们为什么不在这里。

```
// demonstrate the difference between initializing a (char *) 
// with a literal, vs malloc
// and the mutability of the contents thereafter
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
int main() {
    char cause_crash;
    char *myString;

    printf("Cause crash? "); 
    scanf("%c", &cause_crash);

    if(cause_crash == 'y') {
        myString = "ab";
        printf("%s\n", myString); // ab
        *myString = 'x'; // CRASH!
        printf("%s\n", myString);   
    } else {
        myString = malloc(3 * sizeof(char));
        myString[0] = 'a';
        myString[1] = 'b';
        myString[2] = '\0';
        printf("%s\n", myString); // ab
        *myString = 'x';
        printf("%s\n", myString); // xb     
    }
    return 0;
} 
```

# 编辑：结论

下面有几个很好的答案，但我想在这里简洁地总结一下我所理解的。

基本答案似乎是这样的：

> 当编译器看到将“字符串文字”分配给 (char *) 变量时，指针将指向静态内存（可能实际上是二进制文件的一部分，但通常由比您的低级系统强制执行为*只读*）换句话说，内存可能不是在程序的那个部分*动态分配*的，而是指针被简单地设置为指向一个静态内存区域，该区域包含您的文字内容。

关于这个决议，我想指出几点：

**1.**优化可能是一个可能的动机：使用我的编译器，使用相同字符串字面量初始化的两个不同 (char *) 变量实际上指向相同的地址：

```
char *myString = "hello";
char *mySecond = "hello"; // the pointers are identical! This is a cool optimization. 
```

**2**有趣的是，如果变量实际上是一个字符数组（而不是 (char *)），则 (#1) 不正确。**这对我来说很有趣，因为**我的印象是（编译后）数组与指向字符的指针相同。

```
char myArString[] = "hello";
char myArSecond[] = "hello"; // the pointers are NOT the same 
```

**3**总结几个答案暗示的内容：`char *myString = "Hello, World!"` **不**分配新内存，它只是将myString设置为指向已经存在的内存；也许在二进制文件中，也许在特殊的只读内存块中......等等。

**4**我通过测试发现`char myString[] = "Hello, World!"` **确实**分配了新的内存；我想......我所知道的是，以这种方式创建的字符串*是可变的。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T23:18:22.150

你真的应该声明`myString`为`const char*`. 文字存储在只读内存中，无法修改。`char[]`如果您需要修改它，请使用 a 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T23:20:07.610

什么

```
myString = "ab"; 
```

所做的是将**位于只读内存中的常量字符串文字**的地址分配给char 指针`myString`。

如果你现在写这个内存，你会崩溃。

OTOH，当然，您可以愉快地在`malloc()`ed 内存上书写，这样就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T23:25:41.517

当您将变量设置为字符串文字时，您将其设置为存储在汇编程序的只读数据部分中的值。这些数据项是恒定的，尝试以不同方式使用它们很可能会崩溃。

当你`malloc`用来获取内存时，你会得到一个指向读/写堆内存的指针，你可以做任何事情。

这是由几个原因造成的。一方面，实际类型`"Hello, world"`是`char[13]`，或指向 13 个字符的常量指针。您不能为常量字符赋值。但是当你做你所做的事情时，那就是抛弃了 constness。这意味着编译器不会阻止您更改内存，但 C 标准调用是未定义的行为。未定义的行为可以是任何东西，但通常是崩溃。

如果要将文字值分配给`char*`内存，请执行以下操作：

```
char* data = malloc (42);
memcpy(data, "Hi!", 4); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T23:22:32.390

C 标准指定文字字符串是*静态*的，并且尝试修改它们会导致未定义的行为。换句话说，它们应该被认为是*只读的*。

您分配的内存`malloc`属于您，您可以以任何您喜欢的方式对其进行修改。

实际差异可能取决于实现，但通常每种类型的字符串都位于两种不同类型/区域的内存中：

*   使用 获取数据的情况下的堆`malloc`，以及
*   在字符串文字的情况下（只读）数据部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T23:34:12.553

如果你这样写：

```
&mystring = &"ab"; 
```

这对你意味着什么？

你认为你可以以某种方式修改“ab”吗？&“ab”在哪里？

ANS: &"ab" 在只读存储器中。当编译器看到 QUOTE 时，它会将该字符串放入不可变内存中。为什么？如果运行时不必进行边界检查和检查段错误等，可能会以某种方式更快。在真正不应该改变的字符串数据上。

# java - netbeans 宁静的网络服务

> ID：11379418
> 
> 赞同：1
> 
> 时间：2012-07-07T23:17:44.100
> 
> 标签：java, web-services, netbeans

我一直在尝试使用 netbeans 中的 jersey 来使用 Restful Web 服务。我创建了一个 Web 服务并将其注册为 Netbeans Web 服务，我能够将 n drop 拖放到我的客户端代码中（一切正常），但问题是自动生成的代码不包括使用对象的方式

> RestResponse.getDataAsObject(...)

代替

> RestResponse.getDataAsString(...)

与生成的 Facebook 代码相比，其中包含用于使用的 Facebook 库

> RestResponse.getDataAsObject(...)

# c++ - 如何在win32 windows中创建嵌入式文本输入框

> ID：11379421
> 
> 赞同：2
> 
> 时间：2012-07-07T23:18:17.160
> 
> 标签：c++, c, winapi, dialog, textinput

我想在我的主窗口中创建一个嵌入的小框，它可以接受文本输入并包含按钮。当我说嵌入式时，我的意思是我希望它无缝集成到我的主窗口中，而没有它自己的关闭按钮。我无休止地搜索谷歌，并没有找到不涉及mfc或.net的答案。如何在原始 win32 应用程序中执行此操作。请将您的代码添加到我的骨架中，如下所示。谢谢！

```
#include <windows.h>

LRESULT CALLBACK WndProc (HWND, UINT, WPARAM, LPARAM) ;

int WINAPI WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance,
                    PSTR szCmdLine, int iCmdShow)
{
     static TCHAR szAppName[] = TEXT ("App") ;
     HWND         hwnd ;
     MSG          msg ;
     WNDCLASS     wndclass ;

     wndclass.style         = CS_HREDRAW | CS_VREDRAW ;
     wndclass.lpfnWndProc   = WndProc ;
     wndclass.cbClsExtra    = 0 ;
     wndclass.cbWndExtra    = 0 ;
     wndclass.hInstance     = hInstance ;
     wndclass.hIcon         = LoadIcon (NULL, IDI_APPLICATION) ;
     wndclass.hCursor       = LoadCursor (NULL, IDC_ARROW) ;
     wndclass.hbrBackground = (HBRUSH) GetStockObject (WHITE_BRUSH) ;
     wndclass.lpszMenuName  = NULL ;
     wndclass.lpszClassName = szAppName ;

     if (!RegisterClass (&wndclass))
     {
          MessageBox (NULL, TEXT ("This program requires Windows NT!"),
                      szAppName, MB_ICONERROR) ;
          return 0 ;
     }

     hwnd = CreateWindow (szAppName,                  // window class name
                          TEXT ("App"), // window caption
                          WS_OVERLAPPEDWINDOW,        // window style
                          CW_USEDEFAULT,              // initial x position
                          CW_USEDEFAULT,              // initial y position
                          CW_USEDEFAULT,              // initial x size
                          CW_USEDEFAULT,              // initial y size
                          NULL,                       // parent window handle
                          NULL,                       // window menu handle
                          hInstance,                  // program instance handle
                          NULL) ;                     // creation parameters

     ShowWindow (hwnd, iCmdShow) ;
     UpdateWindow (hwnd) ;

     while (GetMessage (&msg, NULL, 0, 0))
     {
          TranslateMessage (&msg) ;
          DispatchMessage (&msg) ;
     }
     return msg.wParam ;
}

LRESULT CALLBACK WndProc (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{
     HDC         hdc ;
     PAINTSTRUCT ps ;
     RECT        rect ;

     switch (message)
     {
     case WM_CREATE:

          return 0 ;

     case WM_PAINT:
          hdc = BeginPaint (hwnd, &ps) ;

          EndPaint (hwnd, &ps) ;
          return 0 ;

     case WM_DESTROY:
          PostQuitMessage (0) ;
          return 0 ;
     }
     return DefWindowProc (hwnd, message, wParam, lParam) ;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T03:30:42.193

您的问题不是很清楚，但是您在 Win32 中动态创建文本框和按钮的方式是使用该`CreateWindow`功能。Win32 为控件注册了特殊类，您可以使用它们作为第一个参数传递给`CreateWindow`.

要创建一个文本框，调用是 -

```
CreateWindow("EDIT", 0, WS_BORDER|WS_CHILD|WS_VISIBLE, 56, 10, 50, 18, g_hWnd, 0, hInst, 0); 
```

创建一个按钮 -

```
CreateWindow("BUTTON", 0, WS_CHILD|WS_VISIBLE, 70, 70, 80, 25, g_hWnd, 0, hInst, 0); 
```

您必须指定`WS_CHILD`和`WS_VISIBLE`样式，还必须提供主窗口的句柄作为其父窗口。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T12:08:32.260

你想收到什么消息？

例如，按下按钮时会发送 WM_COMMAND 消息。按如下方式处理这些消息：

```
LRESULT CALLBACK WndProc (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    HDC         hdc ;
    PAINTSTRUCT ps;
    RECT        rect ;

    switch (message)
        {
        case WM_CREATE:
            return 0 ;

        case WM_COMMAND:
            {
            switch(LOWORD(wParam))
                {
                case IDC_BUTTON:
                    /*
                    IDC_BUTTON is id given to button
                    This id is specified while creating window. If you are using
                    CreateWindow then it will be as follows:

                    CreateWindow("BUTTON", 0, WS_CHILD|WS_VISIBLE, 70, 70, 80, 25, g_hWnd, (HMENU)IDC_BUTTON, hInst, 0);

                    and in resource.rc file or in the beginning of code. Do "#define IDC_BUTTON                  3456"
                    3456 is just a reference you can give any other no as well. Prefer using bigger number so that they can not conflict with existing ones.
                    */

                    //do whatever you want to do here when button is pressed
                    break
                }
            }
            break;

        case WM_PAINT:
            hdc = BeginPaint (hwnd, &ps) ;

            EndPaint (hwnd, &ps) ;
            return 0 ;

        case WM_DESTROY:
            PostQuitMessage (0) ;
            return 0 ;
        }

    return DefWindowProc (hwnd, message, wParam, lParam) ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-25T03:20:09.643

我认为[Edit Control](https://docs.microsoft.com/en-us/windows/win32/controls/edit-controls)可能会满足您的需求。该链接指向 Microsoft 有关编辑控件的文档。

`An edit control is a rectangular control window typically used in a dialog box to permit the user to enter and edit text by typing on the keyboard.`

# post - HDI：确定字符串是如何编码的？

> ID：11379425
> 
> 赞同：0
> 
> 时间：2012-07-07T23:18:43.143
> 
> 标签：post, passwords, base64, md5, sha

在检查代理服务器的审核日志时，我看到大量登录 POST，其中包含有关用户名或密码的信息，这些信息看起来像是经过 Base64 编码的。这显然来自某种恶意软件活动，因为流量显示任何成功登录都会导致论坛垃圾邮件，但这不是问题的重点。

看看这些真实的例子（减去用户名，以保护无辜者）：

> 2012-07-07 15:04:49,741 POST 数据（bitstudyclub.org）：用户名=匿名&**密码=kc1ahpXXE** &remember=yes&submit=Login&action=do_login&url=
> 
> 2012-07-07 15:06:52,081 POST 数据 (www.vampirediaries.org): username=ANONYMIZED& **password=KDbcZ75fg** &remember=yes&submit=Login&action=do_login&url=
> 
> 2012-07-07 15:08:37,983 POST 数据 (www.missionmountain.com): XID=52ee69654fddd13d2a0323c95eaca5c7b736bdd8&ACT=9&FROM=forum&mbase=http: %2F%2Fwww.missionmountain.com%2Findex.php%2Fforums%& id= 2Fmember2%2Frda 1&RET=http:%2F%2Fwww.missionmountain.com%2Findex.php%2Fforums%2F&site_id=1& username=ANONYMIZED&auto_login=1&password= **yn2b4ne9VC** &sub mit=登录
> 
> 2012-07-07 15:19:47,476 POST 数据 (www.diecutdesigner.com): username=ANONYMIZED&password= **8zcs13hzYH** &remember=yes&submit=Login&action=do_login&url=
> 
> 2012-07-07 15:20:36,729 POST 数据 (classjuice.com): username=ANONYMIZED&password= **8zcs13hzYH** &remember=yes&submit=Login&action=do_login&url=
> 
> 2012-07-07 15:20:43,866 POST 数据 (wodrpg.com): username=ANONYMIZED&password= **8zcs13hzYH** &remember=yes&submit=Login&action=do_login&url=

在一遍又一遍地看到这种事情之后，我的问题变成了如何弄清楚看起来像 Base64 的“密码”字符串的编码？如果这些字符串是实际的（MD5/SHA1-looking）哈希，似乎可以通过检查彩虹表来尝试恢复明文，但无论如何我都看不到“我有一个随机的非十六进制字符串”到“这就是我知道 (x) 是派生该随机字符串的哈希值的方式。”

如何将 POST 条目（如上）中的“密码”字符串识别为给定的编码，然后将它们转换回实际的密码哈希？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T10:25:45.797

它们可能不是哈希。它们是随机字符串。

如果它们是 Base64 编码的，它们将具有不同的长度（可以被 4 整除）。

那么这些可能是尝试登录垃圾邮件发送者之前创建的帐户（或相信他们之前创建的）？

*HTTP 表单通常以明文*形式提交密码，这就是您应该使用 https 的原因。

# ruby-on-rails - heroku 生产错误但不是本地错误

> ID：11379430
> 
> 赞同：0
> 
> 时间：2012-07-07T23:19:48.337
> 
> 标签：ruby-on-rails, heroku

出于某种原因，我在使用 heroku 上的相同代码时遇到了生产问题。会有对此的解释吗？这是heroku日志：

```
Completed 500 Internal Server Error in 183ms
2012-07-07T23:15:41+00:00 app[web.1]: 
2012-07-07T23:15:41+00:00 app[web.1]: ActionView::Template::Error (gmaps4rails.css isn't precompiled):
2012-0
7-07T23:15:41+00:00 app[web.1]:     8:     = javascript_include_tag "application"
2012-07-07T23:15:41+00:00 app[web.1]:     9:     = csrf_meta_tags
2012-07-07T23:15:41+00:00 app[web.1]:     10:     = render 'layouts/shim'
2012-07-07T23:15:41+00:00 app[web.1]:     11:     = stylesheet_link_tag "gmaps4rails"
2012-07-07T23:15:41+00:00 app[web.1]:     12: 
2012-07-07T23:15:41+00:00 app[web.1]:     13:     %meta{ :name => "viewport", :content => "width=device-width, initial-scale=1.0"}
2012-07-07T23:15:41+00:00 app[web.1]:     14:   %body
2012-07-07T23:15:41+00:00 app[web.1]:   app/views/layouts/application.html.haml:11:in `_app_views_layouts_application_html_haml__610548992894307187_47414440' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:43:21.723

尝试将此添加到 config/production.rb

```
config.assets.precompile += %w( gmaps4rails.css ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T02:45:19.717

您的 gmaps4rails css 不存在，请确保您在本地预编译并将其提交到 repo 或删除所有将强制 heroku 为您编译样式表的公共/css 文件。

# php - 如果标题存在，Wordpress 显示 the_title()

> ID：11379431
> 
> 赞同：2
> 
> 时间：2012-07-07T23:19:57.370
> 
> 标签：php, wordpress, title

我想要的是以下内容：如果帖子有标题，我想显示它

在[wordpress.org 法典](http://codex.wordpress.org/Function_Reference/the_title)中，您可以看到以下示例：

```
<?php the_title( $before, $after, $echo ); ?> 
```

这个例子：

```
<?php the_title('<h3>', '</h3>'); ?> 
```

我想做的是在href中添加一个带有the_permalink的超链接

```
<?php the_title('<h3><a href=" the_permalink(); ">', '</a></h3>'); ?> 
```

然而，这不起作用。

换句话说：我怎么写**the_permalink();** 在显示的代码中？

我也尝试过：

```
<?php the_title('<h3><a href="' . the_permalink() . '">', '</a></h3>'); ?> 
```

这导致：

mysite.com/?p=1

我的标题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T23:21:46.807

```
<?php $permalink = get_permalink(); the_title('<h3><a href="' . $permalink . '">', '</a></h3>'); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:49:51.823

循环内部`the_title()`将回显标题。你可以这样写

```
<h3><a href="<?php the_permalink(' ') ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a></h3> 
```

# c++ - C++ 禁止可变大小数组

> ID：11379433
> 
> 赞同：19
> 
> 时间：2012-07-07T23:20:10.497
> 
> 标签：c++

我正在使用其他人编写的一些现有代码，但我无法编译它（这里的 C 经验有限，但我正在努力学习！）。

**实用程序.cc**

```
#include "utilities.h"
FILE *open_file(char *filename, const char*extension, const char *access)
{
  char string[MAX_STR_LEN];
  FILE *strm = NULL;

  if(filename[0]=='\0')
   {
      printf("\n INPUT FILENAME (%s) > ",access);
      fgets(string,MAX_STR_LEN,stdin);
      sscanf(string,"%s",filename);
      printf(" FILE %s opened \n", filename);
   }
   int len=strlen(filename);

   if( len + strlen(extension) >= MAX_STR_LEN)
   {
      printf("\n ERROR: String Length  of %s.%s Exceeds Maximum",
              filename, extension);
      return(NULL);
   } 

   // char *filename1 = new(char[len+strlen(extension)+1]);

   const int filenameLength = len+strlen(extension)+1;
   char *filename1 = new(char[filenameLength]);

   strcpy(filename1,filename); // temp filename for appending extension

   /* check if file name has .extension    */
   /* if it does not, add .extension to it */
   int i=len-1;
   while(i > 0 && filename[i--] != '.');
   //   printf("\n Comparing %s to %s", extension, filename+i+1);
   if(strcmp(extension, filename+i+1)  )
      strcat(filename1,extension);
   if( (strm = fopen(filename1, access) ) == NULL )
   {
      printf("\n ERROR OPENING FILE %s (mode %s)", filename1,access);
   }
   delete(filename1);
   return(strm);
} 
```

这是错误。

```
Compiling utilities.cc ...
src/utilities.cc: In function ‘FILE* open_file(char*, const char*, const char*)’:
src/utilities.cc:251: error: ISO C++ forbids variable-size array
gmake: *** [/home/landon/geant4/work/tmp/Linux-g++/exampleN01/utilities.o] Error 1 
```

第 251 行的错误是指

```
char *filename1 = new(char[filenameLength]); 
```

如果您需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-07T23:22:01.940

错误是正确的。C++ 中禁止使用 VLA（可变大小数组）。这是一个 VLA：

```
char filename1char[filenameLength]; 
```

你的意思可能是这样的：

```
char *filename1 = new char[filenameLength]; 
```

这不是 VLA，而是`char`在堆上分配的 s 数组。请注意，您应该使用 operator 删除此指针`delete[]`：

```
delete[] filename1; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-07T23:21:53.890

试试这个

```
 char *filename1 = new char[filenameLength]; 
```

你不能像这样在堆栈上创建一个数组作为局部可变长度数组

```
 char filename1[filenamelength]; 
```

除非`filenamelength`被声明为`const`.

此外，当您为数组分配内存时，您应该使用释放内存

```
 delete [] filename1; 
```

否则你会有内存泄漏。`return`此外，在您的价值观周围有括号也不是必需的；

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-17T11:29:23.853

它们是被禁止的，但一种解决方法是使用堆栈分配器，例如：

[http://howardhinnant.github.io/stack_alloc.html](http://howardhinnant.github.io/stack_alloc.html)

您可以将堆栈分配器与 a `::std::vector`（或其他容器，或直接）一起使用，并且您已经拥有了一个`VLA`.

# ajax - Primefaces p：带有ajax的自动完成设置值仅一次

> ID：11379452
> 
> 赞同：0
> 
> 时间：2012-07-07T23:23:26.410
> 
> 标签：ajax, jsf-2, autocomplete, primefaces

当我第一次在 p:autocomplete 中选择值时，它会触发 set 方法。但是当我再次尝试选择值时，什么也没有发生（根据调试它甚至不会触发 setter）

在浏览器网络监视器中，我看到在选择时将以下字符串添加到返回的 xml

```
<extension ln="primefaces"type="args">{"validationFailed":true}</extension> 
```

但我在那里没有使用任何验证

primefaces 版本是 3.3.1

我的面孔代码：

```
<p:autoComplete value="#{cityManager.kladrCity}"
                            completeMethod="#{cityManager.searchKladr}" var="p"
                            itemLabel="#{p.fullName}" itemValue="#{p}"
                            converter="#{kladrCityConverter}" id="kladrCity"
                            forceSelection="true">

                            <p:ajax event="itemSelect"
                                listener="#{cityManager.handleKladrSelect}" update="name zipCode" immediate="true"/>
                        </p:autoComplete> 
```

转换器代码：

```
@Named("kladrCityConverter")
public class KladrCityConverter implements Converter {
@Inject
private KladrService kladrService;

@Override
public Object getAsObject(FacesContext arg0, UIComponent arg1, String key) {
    if(key == null || key.trim().equals("")){
        return null;
    }

    KladrCity obj = kladrService.findById(key);

    return obj;
}

@Override
public String getAsString(FacesContext arg0, UIComponent arg1, Object obj) {
    if(obj == null){
        return "";
    }
    KladrCity kladrCity = (KladrCity) obj;
    return kladrCity.getCode();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:52:55.957

改变

```
@Named("kladrCityConverter") 
```

至

```
@FacesConverter("locationConverter") 
```

# c# - Xslt 看不到程序集参考

> ID：11379453
> 
> 赞同：2
> 
> 时间：2012-07-07T23:23:58.687
> 
> 标签：c#, xslt, reference, .net-assembly

在我的 xslt 中，我有一段 C# 代码：

```
public string CleanForTableTags(string pContent){

        string input = String.Concat("<root>", pContent, "</root>");

    System.Xml.Linq.XDocument doc = System.Xml.Linq.XDocument.Parse(input, System.Xml.Linq.LoadOptions.PreserveWhitespace);

    var valueWithinTags = doc.Root.Element("table").ToString();
    string[] values = Regex.Matches(valueWithinTags, @"<.*?>")
        .Cast<Match>()
        .Select(o => o.Groups[0].Value)
        .ToArray();

    System.Guid d = System.Guid.NewGuid();
    string s = pContent.Replace(valueWithinTags, d.ToString());

    return s;
} 
```

如您所见，我使用： System.Xml.Linq

在我的 webconfig 中，我得到了：

```
 <compilation debug="true">
        <assemblies>
            <add assembly="WindowsBase, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add assembly="System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
            <add assembly="System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Drawing.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
            <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Data.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/></assemblies>
    </compilation> 
```

我仍然得到：

命名空间“System.Xml”中不存在类型或命名空间名称“Linq”（您是否缺少程序集引用？）

我究竟做错了什么？

我正在使用 VS 2008。所有到 Dll 的路径都是正确的，如果我使用类中的相同代码段，它可以正常工作，但是一旦在 xslt 内部使用它，我就会出错

**下一个问题：**

现在它失败了

```
string[] values = Regex.Matches(valueWithinTags, @"<.*?>")
            .Cast<Match>()
            .Select(o => o.Groups[0].Value)
            .ToArray();

'System.Text.RegularExpressions.MatchCollection' does not contain a definition for 'Cast' and no extension method 'Cast' accepting a first argument of type 'System.Text.RegularExpressions.MatchCollection' could be found (are you missing a using directive or an assembly reference?) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T23:39:34.040

“xslt 内部”到底是什么意思？

XSLT 只是一个带有转换的 xml 文件。或者您是否使用`msxsl`命名空间来包含一段使用 C# 的脚本？

在这种情况下，您可能需要在转换文件中包含`<msxsl:assembly name="System.Xml.Linq" />` 和使用 。`<msxsl:using namespace="System.Xml.Linq" />`

以下是如何在转换中包含一段脚本的示例：[http ://docs.composite.net/FAQ/Developer?q=How+to+run+CSharp+function+in+XSLT%3F](http://docs.composite.net/FAQ/Developer?q=How+to+run+CSharp+function+in+XSLT%3F)

关于第二部分， about `Cast<>`，这是一种扩展方法，`System.Linq.Enumerable`因此将`System.Linq`命名空间添加为“使用”就足够了（还要确保`System.Core`也作为程序集包含在内）。

# android - 用语音命令唤醒电话？

> ID：11379455
> 
> 赞同：0
> 
> 时间：2012-07-07T23:24:05.680
> 
> 标签：android, voice-recognition, wakeup

有什么方法可以通过说出特定的语音命令来唤醒处于待机状态的android？我发现了这篇文章，[语音识别侦听器在 Galaxy SII 中不起作用，](https://stackoverflow.com/questions/11238396/speech-recognition-listener-doesnt-work-in-galaxy-sii) 但我想这个会消耗很多电池。

我将非常感谢对此的任何想法或建议。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T23:40:21.430

如果可以，CPU 将无法进入深度睡眠，因为麦克风必须在监听/录音，并且必须进行一些处理以查看是否已说出特定命令。

这将要求 CPU 以（至少）它的最低频率持续滴答作响，无论您编写代码的程度如何，都会耗尽电池电量。

所以不，恐怕没有电池高效的解决方案（除非，不知何故，你设法*在*Android 下实现这一点，例如在硬件或更低级别的东西中）。

# postgresql - Postgres 更新

> ID：11379459
> 
> 赞同：3
> 
> 时间：2012-07-07T23:24:55.340
> 
> 标签：postgresql

设置 guest_user=admin 后，我已被锁定在仙人掌之外 :( 所以我正在尝试恢复我的访问权限

```
cacti=# select * from settings;
           name            | value
-------------------------------------------
 auth_method               | 1
 guest_user                | admin 
```

当我尝试运行查询时：

```
UPDATE settings SET guest_user = 'No User' WHERE guest_user = 'admin'; 
```

我得到错误：

```
cacti=# UPDATE settings SET guest_user = 'No User' WHERE guest_user = 'admin';
ERROR:  column "guest_user" does not exist
LINE 1: UPDATE settings SET guest_user = 'No User' WHERE guest_user ... 
```

数据库是 postgres，我是新手。（这是我第一次使用它:-)）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T20:50:03.470

Try

```
UPDATE settings SET value = 'No User' WHERE name = 'guest_user'; 
```

because the column names are name and value

# javascript - jQuery 打印预览

> ID：11379461
> 
> 赞同：2
> 
> 时间：2012-07-07T23:25:18.800
> 
> 标签：javascript, jquery, printing, addthis, print-preview

我正在尝试将[jQuery Print Preview 插件](https://github.com/etimbo/jquery-print-preview-plugin)添加到我的网站中，但我使用 AddThis 打印选项。我不确定是否可以使用 AddThis 添加打印预览插件。有办法吗？

这是我的代码：

**JS：**

```
var $j = jQuery.noConflict();
   $j(document).ready(function() {
    $j('a.print-preview').printPreview();
}); 
```

**添加此代码：**

```
<!-- AddThis Peekaboo Toolbox : BEGIN -->
<div class="addthis_toolbox addthis_peekaboo_style 
 addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul>
<li><a class="addthis_button_facebook"></a></li>
<li><a class="addthis_button_twitter"></a></li>
<li><a class="addthis_button_google_plusone_share"></a></li>
<li><a class="addthis_button_email"></a></li>
<li><a class="addthis_button_print print-preview"></a></li>
</ul>
</div>
<!-- AddThis Peekaboo Toolbox : END -->
<script type="text/javascript" src="https://s7.addthis.com/js/
   300/addthis_widget.js"></script> 
```

当我单击打印时，它会在 Firefox（或我正在使用的任何浏览器）中弹出标准打印对话框。

我有一种感觉，AddThis JS 正在使用类似的东西`JavaScript:window.print();`来触发打印对话框，从而绕过了 jQuery 打印预览插件。是否有一种简单的方法可以更改 AddThis 行为以触发打印预览？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T17:11:13.777

我能够通过删除类并添加我自己的类来更改 AddThis 打印按钮的行为。这是代码：

**原AddThis代码：**

```
<!-- AddThis Peekaboo Toolbox : BEGIN -->
<div class="addthis_toolbox addthis_peekaboo_style 
  addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul>
<li><a class="addthis_button_facebook"></a></li>
<li><a class="addthis_button_twitter"></a></li>
<li><a class="addthis_button_google_plusone_share"></a></li>
<li><a class="addthis_button_email"></a></li>
<li><a class="addthis_button_print"></a></li>
</ul>
</div>
<!-- AddThis Peekaboo Toolbox : END -->
<script type="text/javascript" src="https://s7.addthis.com/js/300/
  addthis_widget.js"></script> 
```

**AddThis 代码显示在页面上：**

```
<div class="addthis_toolbox addthis_peekaboo_style 
   addthis_default_style addthis_label_style addthis_32x32_style">
<!-- Omited code not relevant to print function. --> 
<ul style="display: none;"> <!-- Changes to Display Block on Hover --> 
<!-- Omited code not relevant to print function. --> 
 <li>
  <a class="addthis_button_print at300b" title="Print" href="#">
  <span class=" at300bs at15nc at15t_print"></span>
      Print
   </a>
 </li>
</ul> 
```

**编辑代码以更改打印功能并调用打印预览插件：**

```
<div class="addthis_toolbox addthis_peekaboo_style 
   addthis_default_style addthis_label_style addthis_32x32_style">
<!-- Omited code not relevant to print function. --> 
<ul style="display: none;"> <!-- Changes to Display Block on Hover --> 
<!-- Omited code not relevant to print function. --> 
 <li>
  <a class="print-preview at-print">
   <span class="at-print-span"></span>
       Print
   </a>
 </li>
</ul> 
```

**正确显示打印的 CSS：**

```
.at-print {
  padding: 0 2px;
  float: left;
  padding: 10px 20px !important;
  text-decoration: none;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.at-print-span {
  background-position: 0 -576px !important;
  background: url("//s7.addthis.com/static/r07/widget006_32x32_top.png") 
              no-repeat scroll left center transparent;
  display: block;
  height: 32px !important;
  line-height: 32px !important;
  overflow: hidden;
  width: 32px !important;
 float: left;
} 
```

我不确定是否需要所有 CSS，但它确实有效。

***重要的提示：***

这就是更改打印按钮功能的方式，以便我可以调用 jQuery 打印预览功能。但是，将 AddThis 脚本和 Print Preview Plugin 一起使用时会引发错误。必须修改打印预览。

这是必须在第 44 行附近执行的操作，您将看到以下代码：

```
// The frame lives
        for (var i=0; i < window.frames.length; i++) {
            if (window.frames[i].name == "print-frame") {
                var print_frame_ref = window.frames[i].document;
                break;
            }
        } 
```

将上面的代码替换为：

```
print_frame_ref = print_frame[0].contentWindow.document; 
```

问题解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:31:03.620

有两种选择。一种是添加带有打印图标的自定义服务，然后使用它而不是打印 API。

[http://support.addthis.com/customer/portal/articles/381245-custom-services](http://support.addthis.com/customer/portal/articles/381245-custom-services)

addthis 中还内置了一个[printfriendly API：](http://www.printfriendly.com/)

[http://www.addthis.com/services/list](http://www.addthis.com/services/list)

# c++ - 为什么 Xbox 控制器没有响应？

> ID：11379466
> 
> 赞同：1
> 
> 时间：2012-07-07T23:26:51.487
> 
> 标签：c++, xbox360

我正在按照[CodeProject](http://www.codeproject.com/Articles/26949/Xbox-360-Controller-Input-in-C-with-XInput)的教程进行输入，并认为我会自己做一些。所以我尝试生成以下代码，但是当我按下方向键或其他按钮时，没有任何反应。但是当我按下开始和返回按钮时，它会注册。提前致谢。

`CXBOXController`班级

```
#ifndef _XBOX_CONTROLLER_H_
#define _XBOX_CONTROLLER_H_

// No MFC
#define WIN32_LEAN_AND_MEAN

// We need the Windows Header and the XInput Header
#include <windows.h>
#include <XInput.h>

// Now, the XInput Library
// NOTE: COMMENT THIS OUT IF YOU ARE NOT USING
// A COMPILER THAT SUPPORTS THIS METHOD OF LINKING LIBRARIES
#pragma comment(lib, "XInput.lib")

// XBOX Controller Class Definition
class CXBOXController
{
private:
XINPUT_STATE _controllerState;
int _controllerNum;
public:
CXBOXController(int playerNumber);
XINPUT_STATE GetState();
bool IsConnected();
void Vibrate(int leftVal = 0, int rightVal = 0);
};

#endif

CXBOXController::CXBOXController(int playerNumber)
{
// Set the Controller Number
_controllerNum = playerNumber - 1;
}

XINPUT_STATE CXBOXController::GetState()
{
// Zeroise the state
ZeroMemory(&_controllerState, sizeof(XINPUT_STATE));

// Get the state
XInputGetState(_controllerNum, &_controllerState);

return _controllerState;
}

bool CXBOXController::IsConnected()
{
// Zeroise the state
ZeroMemory(&_controllerState, sizeof(XINPUT_STATE));

// Get the state
DWORD Result = XInputGetState(_controllerNum, &_controllerState);

if(Result == ERROR_SUCCESS)
{
    return true;
}
else
{
    return false;
}
}

void CXBOXController::Vibrate(int leftVal, int rightVal)
{
// Create a Vibraton State
XINPUT_VIBRATION Vibration;

// Zeroise the Vibration
ZeroMemory(&Vibration, sizeof(XINPUT_VIBRATION));

// Set the Vibration Values
Vibration.wLeftMotorSpeed = leftVal;
Vibration.wRightMotorSpeed = rightVal;

// Vibrate the controller
XInputSetState(_controllerNum, &Vibration);
} 
```

代码

```
 Player1 = new CXBOXController(1);

                if(Player1->GetState().Gamepad.wButtons & XINPUT_GAMEPAD_DPAD_UP)
                {
                    std::cout << "Up";
                }

                if(Player1->GetState().Gamepad.wButtons & XINPUT_GAMEPAD_DPAD_DOWN)
                {
                    std::cout << "Down";
                }

                if(Player1->GetState().Gamepad.wButtons & XINPUT_GAMEPAD_DPAD_RIGHT)
                                    {
                    std::cout << "Right";
                }

                if(Player1->GetState().Gamepad.wButtons & XINPUT_GAMEPAD_DPAD_LEFT)
                {
                    std::cout << "Left";
                }

                if(Player1->GetState().Gamepad.wButtons & XINPUT_GAMEPAD_B)
                {
                    std::cout << "Right-Click";
                }

                if(Player1->GetState().Gamepad.wButtons & XINPUT_GAMEPAD_A)
                {
                    std::cout << "Click";
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T10:43:36.643

我在我的游戏引擎中使用以下代码；区分上升键和下降键的技巧是测量游戏手柄前后的状态：

```
void Nitro::GamePadState::GetState(u32 playerIndex)
{
    XINPUT_STATE xinputState;

    DWORD result = XInputGetState(playerIndex, &xinputState);

    if (result == ERROR_SUCCESS)
    {
        Triggers.Left = xinputState.Gamepad.bLeftTrigger;
        Triggers.Right = xinputState.Gamepad.bRightTrigger;
        ThumbSticks.Left = short2 (xinputState.Gamepad.sThumbLX, xinputState.Gamepad.sThumbLY);
        ThumbSticks.Right = short2 (xinputState.Gamepad.sThumbRX, xinputState.Gamepad.sThumbRY);
        mButtonStates.Update(xinputState.Gamepad.wButtons);
    }
}

class NitroAPI ButtonState
{
private:
    u32 mButtonStates;      // Current buttons' state
    u32 mPrevButtonStates;  // Previous buttons' state
    u32 mButtonDowns;       // 1 = button pressed this frame
    u32 mButtonUps;         // 1 = button released this frame

public:
    ButtonState();
    void Update(u32 newState);

    bool IsButtonDown(Buttons button) const;
    bool IsButtonFalling(Buttons button) const;
    bool IsButtonUp(Buttons button) const;
    bool IsButtonRising(Buttons button) const;
}; 
```

重要的方法是 Update 和 IsButton*。I XOR 前一个和当前按钮状态以区分发生了什么变化：

```
void Nitro::ButtonState::Update(u32 newState)
{
    mPrevButtonStates = mButtonStates;
    mButtonStates = newState;

    u32 buttonChanges = mButtonStates ^ mPrevButtonStates;
    mButtonDowns = buttonChanges & mButtonStates;
    mButtonUps = buttonChanges & (~mButtonStates);
} 
```

然后简单的比较一下，看看哪个按钮变了：

```
bool Nitro::ButtonState::IsButtonFalling(Buttons button) const
{
    return ((mButtonStates & button) != 0) && ((mPrevButtonStates & button) == 0);
}

bool Nitro::ButtonState::IsButtonRising(Buttons button) const
{
    return ((mButtonStates & button) == 0) && ((mPrevButtonStates & button) != 0);
}

bool Nitro::ButtonState::IsButtonDown(Buttons button) const
{
    return ((mButtonStates & button) != 0);
}

bool Nitro::ButtonState::IsButtonUp(Buttons button) const
{
    return ((mButtonStates & button) == 0);
} 
```

在您的情况下，您可以通过将代码放在 while 循环中来缓解问题，或者使用类似于我发布的内容来跟踪瞬态：

```
while (true)
{
    DWORD Result = XInputGetState(_controllerNum, &_controllerState);
    if (result == ERROR_SUCCESS)
    {
        if(_controllerState.Gamepad.wButtons & XINPUT_GAMEPAD_DPAD_UP)
        // ...
    }
} 
```

# java - 这个 BST 节点删除算法是如何工作的？

> ID：11379467
> 
> 赞同：2
> 
> 时间：2012-07-07T23:27:11.140
> 
> 标签：java, algorithm, binary-search-tree

我正在尝试遵循[Granville Barnett 的“数据结构和算法”](http://dotnetslackers.com/projects/Data-Structures-And-Algorithms/)中的 BST 算法，但我不理解它在下面描述的节点删除算法。

第 3.3 节（第 22 页）

> 从 BST 中删除节点相当简单，需要考虑四种情况：
> 
> 1.  要删除的值是叶节点；或者
> 2.  要删除的值有一个右子树，但没有左子树；或者
> 3.  要删除的值有一个左子树，但没有右子树；或者
> 4.  要删除的值同时具有左子树和右子树，在这种情况下，我们提升左子树中的最大值。

图 3.2（第 22 页）

```
 23
   /  \
  14   31
 /
7
 \
  9 
```

*   案例 #1 指向节点 9。
*   案例 #2 指向节点 7。
*   案例 #3 指向节点 14。
*   案例 #4 指向节点 23。

我将上面 #4 的文本解释为，当我们删除 23 时，我们将 14 提升为 root 并使 31 成为其右孩子：

```
 14
 /  \
7   31
 \
  9 
```

...但是案例＃4的书中算法（从第23页开始）让我感到困惑（我在这里用Java重写了它）：

```
1 boolean remove(T value) {
2   // ...
3
4   // case #4
5   Node largestValueNode = nodeToRemove.left;
6   while (largestValueNode.right != null) {
7       // find the largest value in the left subtree of nodeToRemove
8       largestValueNode = largestValueNode.right;
9   }
10  
11  // delete the right child of largestValueNode's parent
12  findParent(largestValueNode.value).right = null;
13  nodeToRemove.value = largestValueNode.value;
14  
15  count--;
16  return true; // successful
17} 
```

如果我按照算法，`largestValueNode`是节点 14，所以它的父节点是节点 23。**为什么该算法会使父节点的右孩子无效？**

**为什么第 13 行将`largestValueNode`' 值复制到要删除的节点中？**

我预计第 11-13 行是：

```
11  if (largestValueNode != null)
12      largestValueNode.right = nodeToRemove.right;
13  nodeToRemove.right = null; 
```

**编辑：**

这本书的算法确实有一个错误。修复如下：

```
1 boolean remove(T value) {
2   // ...
3
4   // case #4
5   Node largestValueNode = nodeToRemove.left;
6   while (largestValueNode.right != null) {
7       // find the largest value in the left subtree of nodeToRemove
8       largestValueNode = largestValueNode.right;
9   }
10  
11  Node p = findParent(largestValueNode.value);
12  if (p != null) {
13      if (nodeToRemove == p)
14          nodeToRemove.left = largestValueNode.left;
15      else
16          p.right = largestValueNode.left;
17  }
18  nodeToRemove.value = largestValueNode.value;
19  
20  count--;
21  return true; // successful
22} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T00:01:58.440

如果你这样做

```
11  if (largestValueNode != null)
12      largestValueNode.right = nodeToRemove.right;
13  nodeToRemove.right = null; 
```

你没有考虑`14`可能有一个正确的孩子的情况。例如：

```
 23
    / \
   14  31
  / \
 7   15
  \
   9 
```

删除时您的解决方案`23`应该是

```
 15
    / \
   14  31
  / 
 7  
  \
   9 
```

因此，您将`15`' 的原始父级的右子级设置`14`为空。这就是第一个代码正在做的事情。

编辑：解决您的评论

使用您的解决方案，您将获得

```
 23
    / 
   14  
  / \
 7   15
  \   \
   9   31 
```

另外，原代码也是错误的；尝试这样的事情：

```
if(nodeToRemove == findParent(largestValueNode.value))
   nodeToRemove.left = largestValueNode.left
else
   findParent(largestValueNode.value).right = largestValueNode.left
nodeToRemove.value = largestValueNode.value 
```

还要回答“为什么第 13 行将最大值节点的值复制到要删除的节点中？”

我们正在删除`largestValueNode`，在此之前我们将它的值存储在`nodeToRemove`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T00:10:09.053

对于这个特定的例子，这本书的算法似乎是错误的（假设你已经完美地翻译成 Java :)）。它正在做你提到的事情，但它适合这种情况：

其中 nodeToRemove = 23 并且在您的 BST 14 中有一个右孩子 15。本书的算法将在这里用 15 替换 23 并将 14 的右孩子设置为空。在这种情况下，您的算法将失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T21:58:13.677

很高兴知道原始代码是错误的——我只花了几个小时在上面，一直在想我错过了什么。如果通过了根元素，则存在 NPE 问题，并且无论如何都不会考虑根元素的删除。

这是我的 Java 实现，可能会使用一些优化 - 欢迎提出建议。`O (n log n)`最坏的情况下。下面进行测试。

```
public boolean remove(final T value0) {
    BinarySearchTreeNode<T> target = findNode(value0);

        // Node DNE
        if (target == null) {
            return false;
        }

        // Both children populated, no need for parent
        if (target.right != null && target.left != null) {
            BinarySearchTreeNode<T> max = maxChild(target.left);
            findParent(max.value).right = null;
            target.value = max.value;
        }
        // Root element targeted, parent DNE
        else if (target == root) {
            if (target.right == null && target.left == null) {
                root = null;
            }
            else if (target.right == null) {
                root = target.left;
            }
        else {
            root = target.right;
        }
    }
    // Non-root, single-child node - find if L or R child, update parent reference.
    else {
        BinarySearchTreeNode<T> parent = findParent(value0);

        if (target.right == null && target.left != null) {
            if (target.value.compareTo(parent.value) < 0) {
                parent.left = target.left;
            }
            else {
                parent.right = target.left;
            }
        }
        else if (target.right != null && target.left == null) {
            if (target.value.compareTo(parent.value) < 0) {
                parent.left = target.right;
            }
            else {
                parent.right = target.right;
            }
        }
    }       

    return true;
} 
```

* * *

单元测试（显然都通过了）：

```
package BinarySearchTreeTests;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertNull;
import static org.junit.Assert.assertTrue;

import org.junit.Before;
import org.junit.Test;

public class Remove {
    BinarySearchTree<Integer> tree;

@Before
public void setUp() {
    tree = new BinarySearchTree<Integer>();
}

@Test
public void fromEmptyTree() {
    assertFalse(tree.remove(8));
}

@Test
public void fromTreeWithOnlyRootNode() {
    tree.add(10);
    assertTrue(tree.remove(10));
    assertNull(tree.root);
}

@Test
public void nonexistentElement() {
    tree.add(10);
    assertFalse(tree.remove(8));
}

/**
 *     N
 * 10--|
 *     |  6
 *     5--|
 *        3
 */
@Test
public void nodeWithNoRightChildren() {
    tree.add(10);
    tree.add(5);
    tree.add(6);
    tree.add(3);
    tree.remove(10);
    assertEquals(tree.root.value, Integer.valueOf(5));
    assertEquals(tree.root.left.value, Integer.valueOf(3));
    assertEquals(tree.root.right.value, Integer.valueOf(6));
}

/**
 *         17
 *     15--|
 *     |   13
 * 10--|
 *     N
 */
@Test
public void nodeWithNoLeftChildren() {
    tree.add(10);
    tree.add(15);
    tree.add(17);
    tree.add(13);
    tree.remove(10);
    assertEquals(tree.root.value, Integer.valueOf(15));
    assertEquals(tree.root.left.value, Integer.valueOf(13));
    assertEquals(tree.root.right.value, Integer.valueOf(17));
}

/**
 *           19
 *        17-|
 *        |  16
 *     15-|
 *     |  |  14
 *     |  13-|
 *     |     12
 * 10--|
 *     N
 */       
@Test
public void nodeWithLeftAndRightChildren() {
    tree.add(10);
    tree.add(15);
    tree.add(17);
    tree.add(13);
    tree.add(19);
    tree.add(16);
    tree.add(14);
    tree.add(12);

    tree.remove(15);
    assertEquals(tree.root.right.value, Integer.valueOf(14));
    assertNull(tree.root.right.left.right);
}

/**
 *           18
 *        15-|
 *        |  [ALWAYS EMPTY]
 *     15-|
 *     |  |  13
 *     |  12-|
 *     |     11
 * 10--|
 *     N
 * 
@Test
public void removeDuplicate() {
    Above diagram shows duplicate cases are already tested implicitly.
    fail();
} */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T00:17:34.720

仔细看一下这条线：

```
largestValueNode.right = nodeToRemove.right; 
```

请注意这条线如何导致`14`看起来像这样（忽略孙子）：

```
 14
 /  \
7   31 
```

但这正是我们想要的！由于`14`now has作为其右孩子，因此成为 的右`31`孩子不再正确，因此为了清理，将 的右孩子设置为 NULL。`31``15``15`

# c++ - SDL_ttf 奇怪的崩溃问题 SDL_OpenGL

> ID：11379468
> 
> 赞同：1
> 
> 时间：2012-07-07T23:27:25.323
> 
> 标签：c++, opengl, segmentation-fault, sdl, sdl-ttf

在我的游戏中，当“时间”处于活动状态时，它总是会在 5 个“小时”后崩溃。当它运行时，它工作正常，直到它开始显示不正确的时间（原因未知），并且由于分段错误，它会在 5“小时”后崩溃。这很奇怪，因为以前没有这样的事情，而且它应该一遍又一遍地做同样的事情。这是我的代码。试着告诉我是否有一个地方会随着时间的推移发生内存泄漏。顺便说一句，“time_tick()”发生在每个“while”循环中。

```
struct global_struct
{
    int seconds;
    int minutes;
    int hours;
    TTF_Font * font;
    SDL_Color font_color;
    SDL_Color bk_color;
};
global_struct global;

void GL_RENDER_TTF(const char * Text, TTF_Font * Font, SDL_Color Textcolor, SDL_Color bk_color, int x, int y, float depth)
{
SDL_Surface * surface;
int w;
int h;

if(!(Font == NULL))
{
    surface = TTF_RenderUTF8_Shaded(Font,Text,Textcolor,bk_color);
    if(!(surface == NULL))
    {
        w = surface->w;
        h = surface->h;
        GLuint texture;
        GLenum texture_format;
        GLint nOfColors;
        surface = SDL_DisplayFormatAlpha(surface);

        nOfColors = surface->format->BytesPerPixel;
        if (nOfColors == 4)
        {
            if (surface->format->Rmask == 0x000000ff)
                texture_format = GL_RGBA;
            else
                texture_format = GL_BGRA;
        }
        else if (nOfColors == 3)
        {
            if (surface->format->Rmask == 0x000000ff)
                texture_format = GL_RGB;
            else
                texture_format = GL_BGR;
        }

        glGenTextures( 1, &texture );

        glBindTexture( GL_TEXTURE_2D, texture );

        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);

        glTexImage2D( GL_TEXTURE_2D, 0, nOfColors, surface->w, surface->h, 0, texture_format, GL_UNSIGNED_BYTE, surface->pixels );

        glBindTexture(GL_TEXTURE_2D, texture);

        glBegin(GL_QUADS);

            glTexCoord2f(0.0f,0.0f); glVertex3f(x,y,depth);
            glTexCoord2f(1.0f,0.0f); glVertex3f(x+w,y,depth);
            glTexCoord2f(1.0f,1.0f); glVertex3f(x+w,y+h,depth);
            glTexCoord2f(0.0f,1.0f); glVertex3f(x,y+h,depth);

        glEnd();
    };
};
};

void time_tick(float depth1)
{
global.seconds = global.seconds + 1;
if(global.seconds > 59)
{
    global.seconds = 0;
    global.minutes = global.minutes + 1;
};
if(global.minutes > 59)
{
    global.minutes = 0;
    global.hours = global.hours + 1;
};
if(global.hours > 23)
{
    global.hours = 0;
};
string time;
string shours;
string sminutes;
string sseconds;
stringstream ssseconds;
stringstream ssminutes;
stringstream sshours;
ssseconds << global.seconds;
ssminutes << global.minutes;
sshours << global.hours;
if(global.hours < 10)
{
    shours = "0"+sshours.str();
}
else
{
    shours = sshours.str();
};
if(global.minutes < 10)
{
    sminutes = "0"+ssminutes.str();
}
else
{
    sminutes = ssminutes.str();
};
if(global.seconds < 10)
{
    sseconds = "0"+ssseconds.str();
}
else
{
    sseconds = ssseconds.str();
};
time = "time: "+shours+"h "+sminutes+"m "+sseconds+"s";
GL_RENDER_TTF(time.c_str(),global.font,global.font_color,global.bk_color,0,0,depth1);
SDL_Delay(10);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T23:37:08.117

每次您调用`RENDER_TTF`时，您都在创建一个新纹理，而前一个纹理仍然存在。如果可以使用恒定的纹理大小，请使用`glTexSubImage2D`替换纹理内容。否则`glDeleteTextures`，在创建新纹理之前使用释放唯一纹理。

您还可以通过`glTexImage2D`重新调用绑定旧纹理对象来重用纹理 ID（即 no `glGenTextures`，但最近版本的 OpenGL 不鼓励这样做，并且`glTexStorage`完全不允许这样做）。

# ssis - 填充日期维度

> ID：11379470
> 
> 赞同：0
> 
> 时间：2012-07-07T23:27:53.027
> 
> 标签：ssis

我是 ssis 的新手。我想从数据库中提取订单日期并将其存储在维度“日期”中

我找到了填充日期暗淡的链接但是，该过程是在不考虑源数据库中的任何字段的情况下完成的

我在互联网上找不到如何使用 ssis 任务填充日期维度。如果是，它与填充其他暗淡（例如客户）是否相同，您如何选择日期“01-02-12”然后存储为

*   年
*   学期
*   月
*   星期
*   天

我希望我的问题很清楚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T03:56:33.620

通常，日期维度是共享维度，例如可以由事实表中的任何日期字段使用。因此，这将自行定义，独立于任何特定日期字段，因为您希望在其中包含时间范围内的所有日期，而不仅仅是特定业务流程的日期。至于在此过程中使用 SSIS，您有很多选择。您可以拥有一个数据库视图，其中包含定义维度属性的逻辑，您可以使用带有 SSIS 表达式的派生列，或者您可以执行脚本任务。可能最简单的解决方案是派生列。您可以在此处找到派生列组件中可用的日期时间函数列表：http: [//msdn.microsoft.com/en-us/library/ms141671.aspx](http://msdn.microsoft.com/en-us/library/ms141671.aspx)

# c# - 错误“包含类特征的模板必须以类特征结尾”

> ID：11379471
> 
> 赞同：17
> 
> 时间：2012-07-07T23:28:41.637
> 
> 标签：c#, .net, visual-studio-2010, compiler-errors, t4

我在 Visual Studio 2010 下开发 C# T4 预处理模板时，出现以下编译错误：

> 包含类特征的模板必须以类特征结尾

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-30T11:19:15.647

该错误是由最后一个**#>之后的不可见空格引起的**

同样重要的是要记住，不可见的空格可能会导致其他难以理解的编译错误。

如果您想查看更大的图片，只需查看以下链接：

*   [一个很好的例子](http://hadsy.net/2011/05/17/CompilingTransformationInvalidTokenThisInClassStructOrInterfaceMemberDeclaration.aspx)
*   [一个很好的解释](https://stackoverflow.com/a/5733739/378115)，作者：[Ryan Pugh](https://stackoverflow.com/users/717538/ryan-pugh)

既然您知道在处理文本模板时不可见的空间是多么有害，我的建议是：**让它们可见**。如果您不知道如何操作，请参阅[Jeef Widmer 的博客](http://weblogs.asp.net/jeffwids/archive/2009/11/11/how-to-show-white-space-in-visual-studio.aspx)

# ruby-on-rails - 推荐 Rails gem 供用户访问？

> ID：11379476
> 
> 赞同：0
> 
> 时间：2012-07-07T23:30:23.807
> 
> 标签：ruby-on-rails, ruby, rubygems, hipaa

寻找用于“记录用户访问”以符合 HIPAA（和其他）合规性的 gem。我想这意味着跟踪登录、注销以及用户在两者之间所做的一切。

有没有推荐的宝石来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T23:32:48.753

默认情况下，设计跟踪登录和 IP。至于记录用户所做的“一切”。您将不得不根据自己的想法编写其中的一些代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T21:38:39.623

Rails 已经进行了日志记录，因此最好的解决方案是将以下内容添加到现有日志中：

1.  登录
2.  注销
3.  当前登录到现有日志条目的用户。Rails 已经记录了控制器的动作和参数。

虽然日志不是最容易分析的数据，但没有关于它的要求，所以没关系。

# php - 上传的文件不会从表（PHP，MySQL）打开（不正确的目录）

> ID：11379478
> 
> 赞同：0
> 
> 时间：2012-07-07T23:30:59.700
> 
> 标签：php, mysql, file-upload, hyperlink

对不起，如果这是愚蠢的，但只是在寻找一些真正的帮助。正在为此苦苦挣扎。

我有一个 HTML 脚本，它上传一个名为的文件`minegem.html`，当提交调用时，`minegem.php`该脚本将表单中的数据上传到表中，将文件上传到目录，并为用户提供一个表来查看所述数据。这一切都很好。

```
<?php

//define variables to be used
$db_host = 'localhost';
$db_user = 'root';
$db_pwd = '';

$database = 'minetech';
$table = 'minegem';
$directory = 'uploads/minegem/';

//This gets all the other information from the form
$name=$_POST['docname'];
$version=$_POST['docver'];
$date=$_POST['docdate'];
$type=$_POST['doctype'];
$author=$_POST['docauth'];

//target directory is assigned
$target = $directory;
$target = $target . basename( $_FILES['uploaded']['name']) ; 

//if everything is ok upload the file
if(move_uploaded_file($_FILES['uploaded']['tmp_name'], $target)) 
{
echo "The file ". basename( $_FILES['uploaded']['name']). " has been uploaded";
} 
else {
echo "Sorry, there was a problem uploading your file.";
}

//connect to sql
$con = mysql_connect("$db_host","$db_user","$db_pwd");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

//connect to database
mysql_select_db("$database", $con);

//insert data from form to database
$sql="INSERT INTO $table (DocName, DocVer, DocDate, DocType, DocAuth, DocLoc)
VALUES
('$name','$version','$date','$type','$author','$target')";

//confirm data entry
if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo " and new record added. How cool is that.";

//the following script displays the data for test purposes

//this script will show table data
//retrieve tables values
$result = mysql_query("SELECT * FROM {$table}");
if (!$result) {
    die("Query to show fields from table failed");
}

//build table and define headings
echo "<table border='1'>
<tr>
<th>Name</th>
<th>Version</th>
<th>Upload Date</th>
<th>Type</th>
<th>Uploader</th>
<th>Location</th>
</tr>";

// printing table rows
while($row = mysql_fetch_array($result))
    {
    echo "<tr>";
echo "<td>" . $row['DocName'] . "</td>";
echo "<td>" . $row['DocVer'] . "</td>";
echo "<td>" . $row['DocDate'] . "</td>";
echo "<td>" . $row['DocType'] . "</td>";
echo "<td>" . $row['DocAuth'] . "</td>";
echo "<td>" . $row['DocLoc'] . "</td>";
echo "</tr>";
}
echo "</table>";

mysql_free_result($result);

//close connecition to database
mysql_close($con)
?>` 
```

这两个文件都位于，`C:/wamp/www/`所以当我通过网络浏览器运行它们时，它显示为`localhost/minegem.php`

我有一个最终脚本，它将是我实际运行以向最终用户显示结果的脚本。

```
<?php

//define variables to be used
$db_host = 'localhost';
$db_user = 'root';
$db_pwd = '';

$database = 'minetech';
$table = 'minegem';
$type = 'Guideline';

//connect to sql
$con = mysql_connect("$db_host","$db_user","$db_pwd");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

//connect to database
mysql_select_db("$database", $con);

//this script will show table data
//retrieve tables values
$result = mysql_query("SELECT * FROM $table
WHERE DocType='Guideline'");
if (!$result) {
    die("Query to show fields from table failed");
}

//build table and define headings
echo "<table border='1'>
<tr>
<th>Document Name</th>
<th>Version</th>
</tr>";

// printing table rows
while($row = mysql_fetch_array($result))
{
$docname=$row['DocName'];
$docver=$row['DocVer'];
$doctype=$row['DocType'];
$docloc=$row['DocLoc'];

echo "<tr>";
echo '<td><a href='.urlencode($docloc).'>'.$docname.'</a></td>';
echo "<td>$docver</td>";
echo "</tr>";

}
echo "</table>";

mysql_free_result($result);

//close connecition to database
mysql_close($con)

?> 
```

我的第一个表格将文件位置显示为`uploads/minegem/test document.pdf` 第二个表格显示为链接显示在地址栏中`http://localhost/uploads%2Fminegem%2Ftest+document.pdf` 并且在页面上说 `The requested URL /uploads/minegem/test+document.pdf was not found on this server.`

我认为这是一个愚蠢的文件结构问题，但它至关重要。我最终会将它放在服务器上，以便能够存储完整的文件补丁并记住作为链接会很棒。我希望有人可以通过设置正确的文件结构来帮助我指出正确的方向。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T23:39:46.057

将文件名作为 test document.pdf 是否至关重要？您不妨在 PHP 中重命名文件：

```
<?php
//your upload script here

$filename = $_POST['filename']; //change this to the variable which stores filename
$new_filename = str_replace(' ', '_', $filename);
rename('c:/wamp/uploads/minegem/'.$filename,   
       'c:/wamp/uploads/minegem/'.$new_filename); 

?> 
```

然后尝试再次访问它。当您在浏览器上访问它们时，文件名中的空格确实很麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:59:53.653

请改用 rawurlencode。这会将空格替换为 %20 而不是加号。

+ 用于传输数据，%20 用于显示供点击的 URL。尽管您始终可以使用 %20 进行数据传输，但如果浏览器不正确地支持它，您有时只能使用 +。所以坚持使用 rawurlencode。

此外，仅在插入数据库之前对基本名称部分进行 rawurlencode。这使得路径没有被 urlencoded。我不认为这会破坏您的代码，但它更整洁。

* * *

回答 Q) 如何仅对基本名称进行 rawurlencode。

A）只需将基本名称存储在数据库中。您知道路径 ($directory)，因此您可以使用 move_uploaded_file(..., $directory . $target); 然后在输出文件位置时，使用 href="http://localhost/'.$directory.rawurlencode($target) .'"

* * *

但是还有一些其他的“问题”也很重要。

1.  当您将文本输出到屏幕进行显示时，请确保在其上使用 httpspecialchars()。

    [a href="http://localhost/'.$directory.rawurlencode($target).'"]'.$directory.httpspecialchars($target).'[/a] // 用尖括号替换方括号 -不能在此处输入尖括号。

2.  至少保存到数据库时，使用“mysql_real_escape_string”以使其安全地进入数据库。但是是否**强烈**建议使用 PDO 或 mysqli（mysql 功能正在贬值，因为 PDO 和 mysqli 在设计上都更安全）

# node.js - 如何处理 node.js / express 中的相对路径？

> ID：11379482
> 
> 赞同：6
> 
> 时间：2012-07-07T23:31:22.837
> 
> 标签：node.js, express, lighttpd

我在 node.js 和 express 中编写了一个网站。现在我将 lighttpd 配置为使用带有子目录的 node.js 服务器：

```
$HTTP["url"] =~ "^/app/" {
  proxy.server  = ( "" => ( (
                              "host" => "127.0.0.1",
                              "port" => 3000
                            ) )
                  )
} 
```

当我打开时，`http://localhost/app/`我收到错误 404，因为我写了这样的东西：

```
app.get('/', function (req, res){
  res.render('index');
}); 
```

有没有更好的方法来修改这些行，例如：

```
var relPath = '/app';

app.get(relPath + '/', function (req, res){
  res.render('index');
}); 
```

?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T00:23:42.397

正如瑞安评论的那样，解决方案是：

```
app.use('/app', app.router); 
```

如果您使用例如 express.static 或 express.favicon 您还必须告诉 app.use 路径：

```
app.use('/app', express.favicon(__dirname + '/public/images/favicon.ico'));
app.use('/app', express.static(__dirname + '/public')); 
```

请记住在您在 html 中设置的每个内部链接之前写“/app”。

# html - 网络爬虫应该接收查询吗？

> ID：11379486
> 
> 赞同：0
> 
> 时间：2012-07-07T23:32:06.127
> 
> 标签：html, web-crawler

最近几天我编写了一个网络爬虫。我剩下的唯一问题是，“标准”网络爬虫是否会抓取像这样的链接查询： [https](https://www.google.se/?q=stackoverflow) ://www.google.se/?q=stackoverflow 还是会跳过查询并像这样提取它们： [https ://www.google.se](https://www.google.se)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T23:37:06.143

如果使用 GET 请求访问该链接，那么是的，Web 浏览器应该抓取它。

仍然有很多网站使用查询字符串来识别正在请求的内容，例如在博客/article.php?article_id=754 中。如果网络浏览器不遵循这些链接，那么网络上的很多内容都不会被索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T22:47:22.160

在您的特定示例中，许多提供搜索的网站使用 /robots.txt 禁止搜索引擎结果页面。

您确实需要使用 cgi args 爬取页面，但强大的爬虫程序必须了解无关或有害的 cgi args。

使用 urchin cgi args（utm_campaign 等）进行爬网仅意味着您将看到重复的内容。

将会话 cgi arg 添加到每次提取的站点不仅具有重复的内容，而且如果您出现陈旧的 cgi arg，一些特别聪明的站点也会出错！这使它们几乎无法爬行。

一些网站有带有 cgi 参数的链接，访问起来很危险。例如，可公开编辑的数据库中的“删除”按钮。

谷歌网站管理员工具有办法告诉谷歌你的网站应该忽略哪些 cgi 参数，但这对其他搜索引擎没有帮助。我不知道有人为此问题开发 robots.txt 扩展名。

在过去的 4 年中，blekko 增加了一个可怕的 args 正则表达式，我们将其从 URL 中删除。这是一个很长的清单！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T23:42:21.843

如果您指的是抓取某种网络资源索引：

答案很长，但简而言之，我的观点是：如果你有这个“页面/资源”：[https](https://www.google.se/?q=stackoverflow) ://www.google.se/?q= stackoverflow 被许多其他页面指向（即它有一个很大的-link degree）然后不将其集成到您的索引中可能意味着您错过了 webgraph 中一个非常重要的节点。另一方面，想象一下网络上有多少 google.com/q="query" 这种类型的链接。可能是一个巨大的数字，所以这对于您的爬虫/索引器系统来说肯定是一个巨大的开销。

# javascript - 不懂 JavaScript 原型

> ID：11379489
> 
> 赞同：0
> 
> 时间：2012-07-07T23:32:50.647
> 
> 标签：javascript, prototype

我正在阅读 JavaScript Good Parts。有一个例子：

```
if (typeof Object.create !== 'function') {
    Object.create = function(o) {
        var F = function(){};
        F.prototype = o;
        return new F();
    }
} 
```

有人可以向我解释这是什么意思吗？首先，Object 已经有一个具有此名称的方法，因为当我运行它时：

```
console.log(typeof Object.create); 
```

输出是“功能”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T02:12:59.713

要回答您的“开始...”，您可能仍然会遇到 Javascript 环境，其中

```
console.log(typeof Object.create); 
```

将报告

```
undefined 
```

或类似的（假设您甚至有一个带有可用日志功能的控制台对象。）该外部`if (typeof Object.create !== 'function')`包装器的原因是仅在您的 JS 环境尚未这样做的情况下定义它。有许多旧浏览器和其他环境可能有一天会运行您的代码，而这些环境可能没有`Object.create`定义。

现在至于这个实际函数是如何工作的，它基于 JS 如何处理对象。对象只是命名属性的集合，或者更恰当地说是字符串名称和属性值之间的关联。但许多人也有一个特殊的属性，那就是他们的`prototype`. 这只是一个指向另一个对象的指针。该对象也可以有自己的`prototype`对象，依此类推。`prototype`但是，最终，当这些对象之一为空时，原型链就会消失。这些原型对象也是命名属性的集合，当 Javascript 引擎在你的对象中搜索命名属性时，如果它没有直接在你的对象上找到它，它会检查你的对象的原型是否可能包含它，如果不是，如果该对象的原型可能包含它，依此类推，直到链消失。

这些原型对象的意义在于它们可以共享。几个对象，甚至几百万个对象，可以共享一个原型。这与基于类的继承方案的工作方式大不相同，但通常可以用于类似的目的。您可以定义一个函数的单个副本，并且从公共构造函数创建的所有对象都将使用该副本。在创建此类技术之前`Object.create`，这是在 Javascript 中进行面向对象编程的唯一真正方法。

Crockford 的代码正在使用旧技术来模拟新技术应该做的部分工作。 `Object.create`定义了一些通过旧机制无法真正实现的行为，但最基本的行为只是简单地创建一个原型为指定对象的新对象。这正是使用旧技术所`F.prototype = o; return new F();`完成的。因此，这段代码几乎是将新行为填充到旧环境中的标准方法。有关这方面的另一个示例，请参阅[MDN 创建页面](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create/)

# arrays - 在 Cython 中索引静态数组

> ID：11379493
> 
> 赞同：0
> 
> 时间：2012-07-07T23:33:43.573
> 
> 标签：arrays, static, cython

我在试图移植到 Cython 的 c++ 文件中定义了一个静态双精度数组。

我遵循了[Can I create a static C array with Cython 的建议？](https://stackoverflow.com/questions/8320951/can-i-create-a-static-c-array-with-cython)使用硬编码的系数数组，因为如果有任何方法可以避免它，我不想索引一个列表（非常性能敏感的代码段，所以速度非常重要）。否则我可以只使用一个列表或类似的东西。代码很简单，但是太慢了。

我的数组代码实现（在 .PXD 文件中）看起来像

```
cdef double *a_radial = [25932.1070099 , 0.914825434095 , -177.588568125 , -0.237052788124 , -172347.610527 , -12.0687599808 , -0.0128861161041 , -151.202604262 , -0.999674457769 , 0.0161435039267 , 0.825533456725] 
```

当我像 a_radial[0] 那样引用数组的元素（在纯 python 模式 .py 文件中）时，我遇到了崩溃并且没有产生异常。这是一个错误吗？还是我在做一些愚蠢的事情？

谢谢，伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:35:56.627

它介于两者之间。它不受支持，Cython 人知道它。

[http://trac.cython.org/cython_trac/ticket/113](http://trac.cython.org/cython_trac/ticket/113)

我尝试了两种不同的方法：

```
cdef get_list():
    cdef double *a_radial = [25932.1070099 , 0.914825434095 , -177.588568125 , -0.237052788124 , -172347.610527 , -12.0687599808 , -0.0128861161041 , -151.202604262 , -0.999674457769 , 0.0161435039267 , 0.825533456725]
    return a_radial 
```

和

```
def get_list():
    cdef double *a_radial = [25932.1070099 , 0.914825434095 , -177.588568125 , -0.237052788124 , -172347.610527 , -12.0687599808 , -0.0128861161041 , -151.202604262 , -0.999674457769 , 0.0161435039267 , 0.825533456725]
    return a_radial 
```

两次都无法正确编译。它似乎真的不受支持。

我能够强制 Cython 允许我创建一个静态数组，但只能在方法调用内部。这让我觉得他们知道在这些情况下（堆栈）将数组放在哪里，但在模块级别，它会放在哪里？堆？分配它的机制是什么？此外，如果您想以纯 python 模式访问数组，则需要将其转换为 python 可以理解的内容，并且它不理解 C 数组。您只能返回 Python 对象或 Cython 可以自动转换为 Python 对象的东西。

如果性能是一个问题，那么将其保留在 C 模式代码中应该不是问题。如果你需要让它进入 python 模式，那么在一个地方声明一个静态数组和一个 python 列表有什么问题。它们可以分开，以便于更新。

```
cdef class Fun:
    a_radial = [25932.1070099 , 0.914825434095 , -177.588568125 , -0.237052788124 , -172347.610527 , -12.0687599808 , -0.0128861161041 , -151.202604262 , -0.999674457769 , 0.0161435039267 , 0.825533456725]
    def do_calcs(self):
        cdef double *a_radial = [25932.1070099 , 0.914825434095 , -177.588568125 , -0.237052788124 , -172347.610527 , -12.0687599808 , -0.0128861161041 , -151.202604262 , -0.999674457769 , 0.0161435039267 , 0.825533456725]
        print a_radial[0] 
```

你不能把所有对性能敏感的东西都包装到一个 python 方法调用中吗？我还能够在单个函数中找到静态数组：

```
def do_calcs():
    cdef double *a_radial = [25932.1070099 , 0.914825434095 , -177.588568125 , -0.237052788124 , -172347.610527 , -12.0687599808 , -0.0128861161041 , -151.202604262 , -0.999674457769 , 0.0161435039267 , 0.825533456725]
    print a_radial[0] 
```

为什么需要在函数调用之外分配静态数组？

# python - 删除列表中不包含正则表达式字符串的所有项目

> ID：11379496
> 
> 赞同：1
> 
> 时间：2012-07-07T23:34:09.937
> 
> 标签：python, regex, list, iteration

是否可以删除列表中不包含正则表达式字符串的所有项目？

我在考虑可能只返回一个正则表达式字符串，如果没有，则将列表项设为空，然后再次遍历列表以删除所有空条目，但这似乎效率低下。

有什么想法吗？

例如，假设我有：

```
["cat", "dog", "monkey", "Fred", "sad"] 
```

我写了一个只选择悲伤的正则表达式。我希望（最好）删除所有其他人。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-07T23:36:21.337

最简单的方法是使用列表推导构造一个新列表：

```
regex = re.compile(...)
new_list = [s for s in old_list if regex.match(s)] 
```

或者，使用`filter()`：

```
new_list = filter(regex.match, old_list) 
```

# php - 尝试从 URL 中提取 id 字段时返回错误

> ID：11379501
> 
> 赞同：0
> 
> 时间：2012-07-07T23:34:37.947
> 
> 标签：php, get

警告我不是 php 程序员。

在尝试帮助客户恢复旧站点时，我继承了一个 php 日记脚本。该脚本未按预期运行。似乎问题在于没有从[http://example.com/diary.php?id=51等链接中提取 $id 的方式](http://example.com/diary.php?id=51)

这是应该处理此问题的脚本：

```
<?php
// instert automatic date structure for 2004 or 2005
include 'admin24/config.inc.php';
if (isset($_GET['id'])){ 
$query = "SELECT * FROM `diary` WHERE id=$id";
$result = mysql_query($query)
    or die ("problem resolving information....contact php_admin");     
$row = mysql_fetch_array($result);
extract($row);
$date = date("j F Y", (strtotime($date)));
?> 
```

如果我用一个整数代替`$id`这样的：

```
$query = "SELECT * FROM `diary` WHERE id=51"; 
```

没有问题，从数据库中检索查询就好了。

谁能告诉我为什么这不起作用？事实上，它总是返回：

> “问题解决信息....联系 php_admin”

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T23:46:48.550

我猜[register_globals](http://www.php.net/manual/en/security.globals.php)已经关闭（推荐），所以`$id`需要初始化。尝试这个：

```
<?php
// instert automatic date structure for 2004 or 2005
include 'admin24/config.inc.php';
if (isset($_GET['id'])){
  $id = (int) $_GET['id']; // the cast to 'int' is necessary to prevent sql injections!
  $query = "SELECT * FROM `diary` WHERE id=$id";
  $result = mysql_query($query)
    or die ("problem resolving information....contact php_admin");     
  $row = mysql_fetch_array($result);
  extract($row);
  $date = date("j F Y", (strtotime($date)));
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:52:58.750

您的 SQL 查询是针对变量`$id`的，但您要查找的值在`$_GET['id']`. jexact 的解决方案通过分配来解决此问题，`$id`同时通过将其转换为 int 来保护您的应用免受 SQL 注入。

# regex - Java：如何用常规破折号和引号替换棘手/花哨的破折号和引号

> ID：11379502
> 
> 赞同：0
> 
> 时间：2012-07-07T23:34:43.030
> 
> 标签：regex, unicode, utf-8, replace, ascii

> **可能重复：**
> [用 ASCII 近似值替换 unicode 标点符号](https://stackoverflow.com/questions/4808967/replacing-unicode-punctuation-with-ascii-approximations)

我想我完全可以责怪微软，但我的数据库中存储了一些字符串，它们有这些破折号和引号，它们不是普通的破折号和引号。我认为他们试图变得聪明或其他什么...

它在页面上显示得很好，但我需要将它作为 ASCII 发送到不同的程序。

我看过这个问题[Convert Unicode to ASCII without changed the string length (in Java)](https://stackoverflow.com/questions/2096667/convert-unicode-to-ascii-without-changing-the-string-length-in-java)，特别是@Denis Tulskiy 的回答，但它把花哨的破折号变成了问号，而不是普通的破折号。如何修改它以处理这几个字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T23:46:37.660

只需将这些花哨的字符替换为您认为更合适且具有 ASCII 表示的字符即可。最后调用`String.getBytes("ASCII")`以获得所需的编码。

# r - OpenBUGS 无法在 WinBUGS 中收敛的模型上收敛。精度极限？

> ID：11379503
> 
> 赞同：6
> 
> 时间：2012-07-07T23:34:51.700
> 
> 标签：r, statistics, bayesian, winbugs14, winbugs

正如这篇文章的标题所说，当我尝试使用`BRugsFit`(with `coda=T`) 从 R 运行在 WinBUGS 中正常工作的代码和数据时，我收到以下错误：

```
Error in glm.fit(x = structure(c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,  : 
  NA/NaN/Inf in foreign function call (arg 1)
In addition: Warning messages:
1: glm.fit: algorithm did not converge 
2: glm.fit: algorithm did not converge 
3: glm.fit: algorithm did not converge 
4: glm.fit: algorithm did not converge 
5: step size truncated due to divergence 
```

当我`tail()`在 coda 对象上做时，我一遍又一遍地得到相同的数字。另一方面，当我运行 WinBUGS、保存结尾并将其加载到 R 中时，我得到了一些我预期的随机变化，并且没有关于收敛的警告。

这是我的模型（它使用“一个技巧”来找到 Logistic-Makeham 分布参数的后验）。

```
model {
    for(i in 1:n){
            ones[i]<-1;
            # here I pre-calculate two quantities that occur several times 
            # in the PDF, to save a little processing time
            expbx[i] <- exp(b*x[i]); expbx1[i]<- 1/(1+sd*(expbx[i]-1));
            # below is the actual PDF
            p[i]<-(c+a*expbx[i]*expbx1[i])*exp(-c*x[i])*pow(expbx1[i],1/s);
            # the ones trick
            ones[i]~dbern(p[i]);
    }
b~dunif(0,1); d~dexp(1); c~dexp(1); s.raw~dflat();
    # a (lambda) parametrized this way because it comes out more accurate
    # s forced to be > 0
    a<-b*d; s<-abs(s.raw);
    # NOT a standard deviation, just s times d, to save processing time
    sd<-s*d;
    # I save all the parameters I'm interested in to one vector, for convenient
    # viewing of them all in the same window.
    out[1]<-a; out[2]<-b; out[3]<-c; out[4]<-s; out[5]<-d;
} 
```

这是我的数据的典型示例：

```
 list(n= 148 ,x=c( 1246,1175,1048,1169,1043,802,543,719,1296,817,1122,542,839,443,1536,700,834,232,596,1096,1118,957,974,1031,1149,1044,1108,
519,677,569,952,1243,970,1736,1262,1026,979,1543,1029,761,533,540,511,1150,1589,1169,1029,1248,1572,638,731,525,968,1467,1596,1077,712,1603,1
203,991,37,1775,893,993,913,1487,1186,1381,977,1247,857,786,615,733,1206,1059,1508,569,1205,754,886,1099,843,599,780,1294,1603,1242,883,1320,
507,1097,1193,218,1362,1181,1118,453,1291,972,787,1061,1097,1100,1117,1174,596,1305,1071,940,919,999,1209,1043,1161,1016,1025,750,423,732,
1389,907,1184,1275,944,1209,1073,1098,1348,976,817,557,211,961,880,1039,1287,736,1400,1757,1355,977,198,689,853,1251,767,768 )) 
```

...和典型的初始化（我使用 4 个链，细化 20，burnin 2000、20000 次迭代）

```
list( d=0.001738,b=0.0009672,c=0.002451,s.raw=0.001511 )
list( d=0.006217,b=0.005596,c=0.00777,s.raw=0.007019 )
list( d=1.504E-05,b=4.825E-06,c=2.172E-07,s.raw=6.104E-05 )
list( d=0.3011,b=0.03552,c=0.1274,s.raw=0.2549 ) 
```

OpenBUGS 是否只是简单地舍入到比 WinBUGS 更少的有效数字，如果是这样，也许我可以更改一个设置以使其停止这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:16:06.227

我对此的初步回答似乎是...

*   将`format`参数`bugsInits()`和`bugsData()`命令设置为`fg`.
*   对先验分布进行参数化，使得如果参数非常小（在对数刻度上的负两位数），则对倒数（或其他一些适当的变换）进行采样。
*   只需使用较大的细化间隔（在我的情况下为 80）和大量迭代。OpenBUGS 目前不支持过度松弛，仅此而已。
*   如果某些变量是分类变量，请勿尝试将它们包含在与连续变量相同的摘要中。

对于建议关闭过度放松的响应者：问题是我无法打开它*，*没有它，迭代需要永远。但这似乎是目前唯一的选择。我希望 WinBUGS 手册更具体地说明谨慎使用此功能的含义。哦，好吧，我想我最终需要阅读他们引用的论文。但是，由于这在 OpenBUGS 中甚至不可用，所以目前还没有实际意义。

我会暂时保留我的问题，以防有人有比我能想出的更好或更详细的答案。

# windows - 更改（可能最大化）窗口的最大尺寸？

> ID：11379505
> 
> 赞同：1
> 
> 时间：2012-07-07T23:35:39.607
> 
> 标签：windows, winapi, visual-c++, window

有没有办法改变*可能最大化*窗口的最大尺寸，**而不**改变窗口的最大化状态？（我指的是[`MINMAXINFO.ptMaxSize`和`MINMAXINFO.ptMaxTrackSize`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632605.aspx)这里。）

或者，换句话说：我如何告诉系统发送我的窗口 a`WM_GETMINMAX`并在必要时刷新它的状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T00:23:52.350

我实际上认为我找到了解决方案：

```
SetWindowPos(
    hWnd, NULL, rect.left, rect.top, rect.width, rect.height,
    SWP_NOACTIVATE | SWP_NOOWNERZORDER | SWP_NOZORDER); 
```

# c# - 在字符串中查找模式

> ID：11379507
> 
> 赞同：0
> 
> 时间：2012-07-07T23:36:04.407
> 
> 标签：c#, regex, asp.net-mvc-3, webforms

在任何给定字符串中查找模式“[Number1, Number2]”，并获取 Number1 和 Number2 的整数（32 位）值：

示例输入：“Foo Bar [45,66] Bash”

示例结果：Number1 = 45 Number2 = 66

我的 deitel 书中有这个例子，但我似乎无法获得 Regex Exp。语法正确。谁能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T23:49:23.413

这应该适用于您的确切情况`[number,number]`：

```
var match = Regex.Match(input, @"\[(\d+),(\d+)\]");

var first = match.Groups[1].Value;
var second = match.Groups[2].Value;

var result = string.Format("Number1={0} Number2={1}", first, second); 
```

测试[了 myregextester.com](http://myregextester.com/index.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T02:41:25.510

正则表达式......它们现在非常有用。然而，在标准出台之前，程序员并没有在 StackOverflow 上寻求社区支持的奢侈。事实上......许多程序员在过去尝试执行简单的字符串搜索时遇到了“堆栈溢出”。

如果你想在一个字符串中找到一个字符串并且你没有能力使用正则表达式，你必须以一种非常具体的方式在字符串中搜索表达式。字符串是一个以空字符结尾的字符数组。该构造是用字符串类实现的，但在底层它是一个字符数组，最终位置为空值。

假设您有以下字符串：

```
string arrayOfCharactersToSearch = "This is the null terminated array of characters to search."; 
```

现在假设您想在该字符串中搜索“array”。您必须检查字符串中字符的“块”。但是你不能通过一次移动一个字符然后寻找“数组”来做到这一点，因为它效率低下。您也不能通过查看与“数组”长度相同的块来做到这一点，因为它可能会丢失字符组合。

解决方案是按搜索条件的长度推进每个“块”，在本例中为“数组”，除以二加一：

```
 *chunk = ( string length / 2 ) + 1* 
```

幸运的是，我们现在有了正则表达式，所有的 BS 都在后台为我们完成了，但理解它是如何工作的仍然很重要......对吗？

# android - Android - 更改通知图标

> ID：11379518
> 
> 赞同：2
> 
> 时间：2012-07-07T23:37:41.597
> 
> 标签：android

我想知道它是否可能具有与启动器或应用程序图标不同的通知栏图标。我想为我的推送通知显示另一个图标。这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T23:44:30.820

对于 API < 11，`Notification`构造函数允许[指定图标](http://developer.android.com/reference/android/app/Notification.html#Notification%28int,%20java.lang.CharSequence,%20long%29)。对于 API > 10，[Notifcation.Builder](http://developer.android.com/reference/android/app/Notification.Builder.html)`setSmallIcon`的和`setLargeIcon`方法允许做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-21T05:02:12.893

```
 Notification n  = new Notification.Builder(this)
                    .setContentTitle("New mail from " + "test@gmail.com")
                    .setContentText("Subject")
                    .setSmallIcon(R.drawable.icon)
                    .setContentIntent(pIntent)
                    .setAutoCancel(true)
                    .addAction(R.drawable.icon, "Call", pIntent)
                    .addAction(R.drawable.icon, "More", pIntent)
                    .addAction(R.drawable.icon, "And more", pIntent).build();

    NotificationManager notificationManager =
        (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

    notificationManager.notify(0, n); 
```

在上面的代码中`setSmallIcon`，`setSmallIcon`用于更改通知图标

# ruby - 设置变量并在 Ruby 中的同一语句中修改它

> ID：11379522
> 
> 赞同：0
> 
> 时间：2012-07-07T23:38:06.060
> 
> 标签：ruby, variables

我遇到很多情况，我正在使用方法修改变量并将其设置为修改后的值，例如..

```
value = "string"
value.modify #=> "new string"
value #=> "string"
value = value.modify
value #=> "new string" 
```

我注意到许多 Ruby 方法都有一个`value.modify!`变体可以做到这一点。

Ruby 中是否有用于 do 的简写`value = value.modify`？另外，如果我要制作自己的`modify!`方法，我将如何实施它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T23:42:17.560

这实际上取决于类的实现方式。这些 bang 方法在 Symbols 或 Fixnums 等不可变对象上实际上是不可能的。对于像 Arrays 这样的 Enumerables，有一种`replace()`方法可以让您编写任何 bang-method，如下所示：

```
def bang()
  replace(this.non_bang)
end 
```

如果您查看许多 bang 方法的来源，您会发现通常 bang 方法包含代码的核心，而非 bang 方法只是简单地在对象上调用`dup()`or`clone()`然后调用 bang 版本的方法，如下所示：

```
def non_bang(*args)
  clone.bang(*args)
end 
```

# flash - 从 flash builder http 服务中检索数据

> ID：11379524
> 
> 赞同：0
> 
> 时间：2012-07-07T23:38:17.430
> 
> 标签：flash, apache-flex, flash-builder

我对 flex 和 flash builder 非常陌生。我想要做的是连接到 http 数据服务并从中检索数据。

我找到的所有教程都经历了设置数据服务并获取响应并将其放入网格的过程。

小麦我不理解（它可能真的很简单。）是如何获取响应而不是将其放入数据网格中，只需将结果存储在变量中以备后用。

如果有人可以帮助我解决这个问题，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T03:34:52.300

首先为您创建一个变量来存储结果：

```
public var results : ArrayCollection; 
```

然后在您的结果处理程序中，只需存储值：

```
protected function resultHandler(event:ResultEvent):void{
  results = new ArrayCollection(event.result as Array);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T06:46:01.323

Flextras 的回答略有不同：

```
public var results : ArrayCollection; 
```

然后在您的结果处理程序中，只需存储值：

```
protected function resultHandler(event:ResultEvent):void{
    if(event.result is Array) 
        results = new ArrayCollection(event.result as Array);
    else if(event.result is IList)
        results = new ArrayCollection(event.result.source);
    else 
        results = new ArrayCollection([event.result]);
} 
```

现在通常`event.result`不需要对类型进行检查，因为大多数 Web 服务的返回类型都是一致的。`resultHandler`因此，您需要做的就是调试应用程序并在函数入口处插入断点。然后观察`event.result`并记下它的类型，并根据它保留相应的代码行。

PS:`IList`是由`ArrayCollection`, `ArrayList`, 和许多其他类实现的接口，所以如果结果是这些类之一，那么您需要保留该行。

# objective-c - Objective-C: performSelector: vs. forwardInvocation:

> ID：11379525
> 
> 赞同：3
> 
> 时间：2012-07-07T23:38:28.790
> 
> 标签：objective-c, ios, ios5, ios5.1

对objective-c来说很新，但我遇到了似乎很常见的情况：我希望ClassA要求ClassB在只有ClassB知道的对象上执行一个方法（并且还使用ClassA未知的方法）。

我找到了两种方法：**performSelector:**和**forwardInvocation:** - 但我想了解更多并巩固我对每种方法的理解。我在苹果开发者文档中找到了这个注释：

> *aSelector 参数 [in performSelector:] 应该标识一个不带参数的方法。对于返回对象以外的任何东西的方法，请使用 NSInvocation。*

..这是否意味着以*- (id)methodName*开头的方法将使用**performSelector:**，而说*- (int)nonObjectMethodName*将使用**forwardInvocation:**？

还有返回*(void)*的方法呢？或返回非 id 对象的方法，例如*(NSString)*？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T23:44:26.180

No.`-forwardInvocation:`用作消息转发机制的一部分。不要担心消息转发，因为它实际上只被代理对象使用，而且很有可能你永远不需要使用它并且知道你正在使用它。

`-performSelector:`假定消息的返回类型是`id`或兼容的，因此如果它用于发送返回类型不同的消息（例如比`long long`32 位系统上的指针更宽，或通过不同的寄存器/地址返回），则不安全例如 a`float`或 large `struct`。）

如果你想间接发送这样的消息，你可以*创建*一个类的实例`NSInvocation`然后发送它`-invoke`。然后将返回值存储在调用对象中，并可以通过它进行访问。`-forwardInvocation:`在这种情况下，您永远不会使用。

一般来说，如果您发现自己在使用`-performSelector:`，您可能正在处理反模式。在这种情况下，您正在尝试发送一条`ClassA`不正式知道的消息。另一种解决方案是公开这些私有方法。

* * *

如果您同时拥有`ClassA`and `ClassB`，您可以为它创建一个“私有”标头，`ClassB`其中包括您要使用的私有方法。如果其他人（例如 Apple）拥有`ClassB`，则您正在处理未记录的 API，可能需要寻找另一种方法，因为 Apple 将拒绝使用此类 API 的应用程序。

要创建私有头文件，请进入 Xcode 并创建一个新的头文件。将其命名为“ClassB+Internal.h”或“ClassB+PrivateMethodsForMeOnly.h”。将其视为您项目的私有 - 除非他们与`ClassB`. 在这个新标题中，添加以下内容：

```
#import "ClassB.h" // so we get the original class definition

@interface ClassB (PrivateMethodsForMeOnly)
- (double)someMethod;
- (const struct low_level_c_type_t)otherMethod:(int)i;
// etc. etc. etc.
@end 
```

在`ClassA.m`（*除非* `ClassA.h`您想向使用这些方法的每个人公开这些方法`ClassA`！）在您的包含部分中添加以下行：

```
#import "ClassB+PrivateMethodsForMeOnly.h" 
```

`ClassA`此后将可以访问新类别中的这些方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:57:07.907

好的，这是几个问题。

首先，忘记“forwardInvocation”——这几乎是一种您只需要制作代理对象的方法。

调用是用 [NSInvocation invocationWithMethodSignature...] 创建的，然后填充选择器、参数和目标对象，最终你只是“调用”它。这就是您可以发送（甚至存储）任何方法调用的方式。

performselector 存在多种变体，其中一些接受参数，在延迟后调用它，或者在另一个线程上运行该方法。这是一个更“直接”的调用——NSInvocation 是一个对象，你可以像任何其他对象一样保留它，直到你需要它，而“performselector”几乎立即运行该方法。

至于返回值，我通常坚持文档所说的；如果它告诉我该方法应该返回一个 id 我返回一个对象（任何对象指针都可以，所以 NSString* 很好。返回 nil 也可以，这几乎涵盖了“void”的情况），而不是 void 而不是 int。

另外，请记住，调用 performselector 并不常见。在大多数情况下，您只需将调用硬编码为“[MyObject SomeMethod:SomeParameter];”。调用 performSelector 样式的方法是针对特殊情况的——GUI 对象上的目标/动作内容就是这样一种情况，其中要调用的选择器存储在对象中，因此显然不能硬编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T09:36:17.053

的目的`-forwardInvocation:`是让一个对象尝试发送一条它无法识别其他对象的消息，而不是放弃。一个 NSInvocation 不仅包含选择器，还包含消息的所有参数。`NSProxy`使用它，但如果我没记错的话，我们在分布式对象之前就有它。这是为“这个类无法处理的一切”实现委托的一种方法。

您应该阅读[Objective-C 文档中关于消息转发的部分。](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtForwarding.html#//apple_ref/doc/uid/TP40008048-CH105-SW1)

# css - 在 div 中居中 div

> ID：11379527
> 
> 赞同：0
> 
> 时间：2012-07-07T23:38:42.783
> 
> 标签：css, html

我已经搜索了很长时间来寻找这个问题的答案！

我正在为我正在制作的新网站使用 12 列布局。我在 1 行上有 4 个 div：

```
<div class="colContainer">
        <div class="row">
            <div class="threecolImg">
                <p>Row 1: three</p>
            </div>
            <div class="threecolImg">
                <p>Row 1: three</p>
            </div>
            <div class="threecolImg">
                <p>Row 1: three</p>
            </div>
            <div class="threecolImg last">
                <p>Row 1: three</p>
            </div>
        </div>
    </div> 
```

我的CSS如下：

```
.colContainer {
padding-left: 20px;
padding-right: 20px;
}

.row {
width: 100%;
max-width: 1140px;
min-width: 755px;
margin: 0 auto;
overflow: hidden;
}

.threecolImg {
float: left;
min-height: 1px;
width: 22.05%;
} 
```

就目前而言，div都彼此相邻（这很好！）但不居中（这很糟糕！）

有人可以帮我把它们放在中心吗？！

非常感谢，

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T23:41:14.007

将所有threecolImg div 替换为threecol div。他们将居中。

```
<div class="colContainer">
    <div class="row">
        <div class="threecol">
            <p>Row 1: three</p>
        </div>
        <div class="threecol">
            <p>Row 1: three</p>
        </div>
        <div class="threecol">
            <p>Row 1: three</p>
        </div>
        <div class="threecol last">
            <p>Row 1: three</p>
        </div>
    </div>
</div> 
```

也从你的 CSS 中删除：

```
.threecolImg {
  float: left;
  min-height: 1px;
  width: 22.05%;
} 
```

如果你想在threecol div中设置图像样式，更喜欢那个选择器：

```
.threecol img {

} 
```

# asp.net-mvc-3 - 级联下拉mvc3、razor、实体框架4.1

> ID：11379532
> 
> 赞同：0
> 
> 时间：2012-07-07T23:39:18.400
> 
> 标签：asp.net-mvc-3, entity-framework, razor, drop-down-menu

有没有一种简单的方法可以在 mvc3 中创建级联下拉菜单？？？

我现在所做的是两个下拉列表，一个用于学生，另一个用于考试。

我想要实现的是，如果我在第一个下拉列表中选择 X 学生，则另一个下拉列表必须只显示该特定学生的考试。

在数据库中，student (idstudent, name, lastname...)和exams (idexam, name, date,grade)之间有一个中间表，这个表就是studentexam (id studentexam, id student, id Exam, Grade)..

现在我只知道如何在他们各自的下拉列表中显示所有学生和所有课程 XD！（好吧，我什至不知道该怎么做，mvc3 会自动完成）

当我说简单的方法时，我的意思是非常简单.. 我搜索了很多，并且有一些使用 jquery 或 ajax 的东西，现在对我的大脑来说太多了 XD ！我在 Visual Studio、mvc3、剃须刀、实体框架等方面是全新的。所以如果你添加到 ajax 和 jquery 的东西，我会立即开始崩溃。

所以我正在寻找的答案是“将此代码（很好解释）添加到控制器，并将此代码添加到视图中哈哈）

谢谢！

# java - 我无法让 JScrollPanes 实际显示滚动条

> ID：11379533
> 
> 赞同：3
> 
> 时间：2012-07-07T23:39:24.187
> 
> 标签：java, swing, jscrollpane, jscrollbar

我在互联网上发现了一些示例，这些示例涉及获取图像或文本框以显示滚动条，但它们都涉及一个基本上在滚动窗格中显示其全部内容的程序。我需要让它做的是在某个地方粘贴一个 JPanel，将一堆文本、图标等堆积到该面板中，直到它对于我所拥有的空间来说太大了，然后滚动浏览它。

我可能还需要能够对该面板进行空布局，因为我可能迟早必须在其中手动定位东西。

因此，我尝试编写一个非常简单的程序，将三个彩色块放在一个足够容纳两个的空间中，并显示一个滚动条，让您向下滚动以查看第三个。它不添加滚动条。

导入有点混乱和冗余，因为这是从几个不同的文件拼凑在一起的，但它们不会产生任何错误。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

import java.awt.BorderLayout;
import java.awt.GridLayout;

import javax.swing.ButtonGroup;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JScrollPane;

public class ScrollDemo extends JFrame {

  JScrollPane scrollpane;

  public ScrollDemo() {
    super("JScrollPane Demonstration");
    setSize(800, 600);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    init();
    setVisible(true);
  }

  public void init() {
    setLayout(null);
    JPanel innerPanel = new JPanel();
    JPanel outerPanel = new JPanel();
    getContentPane().setBounds(0,0,800,600);
    outerPanel.setBounds(400,0,400,400);
    innerPanel.setBounds(0,0,600,600);
    innerPanel.setLayout(null);

    JPanel greenPanel = new JPanel();
    JPanel yellowPanel = new JPanel();
    JPanel bluePanel = new JPanel();

    greenPanel.setBounds(0,0,200,200);
    yellowPanel.setBounds(0,200,200,200);
    bluePanel.setBounds(0,400,200,200);
    greenPanel.setBackground(Color.GREEN);
    yellowPanel.setBackground(Color.YELLOW);
    bluePanel.setBackground(Color.BLUE);

    innerPanel.add(greenPanel);
    innerPanel.add(yellowPanel);
    innerPanel.add(bluePanel);
    JScrollPane scrollPane = new JScrollPane();
    scrollPane.setViewportView(innerPanel);
    scrollPane.setBounds(200,0,200,400);
    add(scrollPane);

  }

  public static void main(String args[]) {
    new ScrollDemo();
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T00:21:15.663

最好您应该使用布局管理器来发挥自己的优势，并让这些管理器为您完成计算组件大小和布局的繁重工作。例如：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridLayout;

import javax.swing.*;

public class ScrollDemo2 extends JPanel {
   public static final Color[] COLORS = {Color.green, Color.red, Color.blue};
   private static final Dimension PANEL_SIZE = new Dimension(300, 300);
   public ScrollDemo2() {
      JPanel innerPanel = new JPanel(new GridLayout(0, 1));
      for (int i = 0; i < COLORS.length; i++) {
         JPanel colorPanel = new JPanel();
         colorPanel.setPreferredSize(PANEL_SIZE);
         colorPanel.setBackground(COLORS[i]);
         innerPanel.add(colorPanel);
      }
      JScrollPane scrollPane = new JScrollPane(innerPanel);
      scrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
      scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
      scrollPane.getViewport().setPreferredSize(PANEL_SIZE);

      int eb = 10;
      setBorder(BorderFactory.createEmptyBorder(eb, eb, eb, eb));
      setLayout(new BorderLayout());
      add(scrollPane, BorderLayout.CENTER);
   }

   private static void createAndShowGui() {
      ScrollDemo2 mainPanel = new ScrollDemo2();

      JFrame frame = new JFrame("ScrollDemo2");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-08T07:47:48.783

在 Swing 中，子项的大小和定位是 LayoutManager 的专有工作。选择一个支持您的要求的方案，作为最后的手段，实施一个高度专业化的方案。孩子们通过报告尺寸提示进行协作，因此实现任何自定义组件以在 getXXSize 方法中返回合理的值。

当你有一种无法抗拒的手动干预冲动时，至少让经理尽可能地去做。在您的上下文中，这可能是接管定位，但让经理处理尺寸，特别是计算父级的尺寸提示。这是使用[Rob 的 DragLayout](http://tips4java.wordpress.com/2011/10/23/drag-layout/)的代码片段：

```
DragLayout layout = new DragLayout();
JComponent field = new JPanel(layout);
JComponent player = new JLabel("I'm moving around");
field.add(player);
player.setLocation(200, 200);
frame.add(new JScrollPane(field));
frame.pack();
frame.setVisible(true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T23:46:51.573

数字。当我发布时，我意识到出了什么问题。

因为 innerPanel 有一个空布局，它需要明确声明其首选大小。

```
 innerPanel.setPreferredSize(new Dimension(200,600)); 
```

修复它。

# mysql - 如何在Mysql二进制中制作“In”运算符？

> ID：11379536
> 
> 赞同：1
> 
> 时间：2012-07-07T23:39:37.090
> 
> 标签：mysql, sql, binary, match

假设我有如下声明

```
select * from table where column in (select other_column from other_table) 
```

但我希望这仅在“二进制”列等于 other_column 时匹配。有点像“binary like”，但对于“in”运算符。

我希望这个问题很清楚。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T23:42:00.360

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T00:13:57.407

# c - 函数内部的C块？

> ID：11379543
> 
> 赞同：2
> 
> 时间：2012-07-07T23:40:25.263
> 
> 标签：c, function, scope

我在 C 函数的定义中（在动态窗口管理器的源代码中）发现了一个块的奇怪用法。

它是函数定义中的一个块。[该文件的第 944 行](https://github.com/sr/dwm/blob/master/dwm.c#L944)有一个示例。这是关于什么的？

```
void
grabbuttons(Client *c, Bool focused) {
  updatenumlockmask();
  {
    unsigned int i, j;
    unsigned int modifiers[] = { 0, LockMask, numlockmask, numlockmask|LockMask };
    //some more code
  }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-07T23:44:18.893

很简单：一个块。它引入了一个新的有限作用域：在内部声明的变量不能在外部使用，因此它可以用来限制一组变量的作用域。

但通常它只是用于组织代码以提高可读性，也许是为了建议或提醒一些额外的细节（或者只是为了从你的编辑器中强制额外的缩进级别），例如：

```
lockDatabase();
{
    // this code is all within the database lock:

}
unlockDatabase(); 
```

此外，较旧的 C 标准仅将变量声明限制在块的*开头*。在该限制下，您的选择是在函数或其他（阻塞）控制结构的开头声明**所有变量，或者仅出于声明其他变量的目的而引入新的裸块。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T05:09:37.013

Usage of C blocks is to separate out a logic from the rest of the code. Following are some scenarios when this is useful:

1.  A function which shall not be called more than once. It is better to write that piece of code within the block.
2.  In C language, variables can be declared only in the beginning of a function. So, any piece of code which needs more variables and does not want a separate functionality from the rest of the code of the function can be put in the code block

# ruby - 在非常可变的延迟上与 NTP 同步时间

> ID：11379545
> 
> 赞同：1
> 
> 时间：2012-07-07T23:40:49.857
> 
> 标签：ruby, time, synchronization, ntp

我想尽可能准确地使用 NTP 同步时间，但我有一个大问题：时间服务器的网络延迟非常多变（范围从 80 毫秒到 900 毫秒）。

考虑延迟的最佳方法是什么？

```
sock = UDPSocket.new
sock.connect("pool.ntp.org", "ntp")

timeStart = Time.new.to_f

sock.print ntp_msg
sock.flush
#maybe I should put here timeStart?
sock.recvfrom

timeEnd = Time.new.to_f

latency=timeEnd-timeStart
timeDifference = ntp_recv_time-timeStart
realDifference = timeDifference-latency # maybe should divide latency or what? 
```

那是我现在使用的部分 ruby​​ 代码，理论上`realDifference`应该总是相等的，但是由于延迟，它每次都不同......

另外，如果我进行几次测试并取平均值，它会更精确吗？任何建议，欢迎提出建议:)

# php - 如何防止 echo 将空字符附加到输出字符串？

> ID：11379546
> 
> 赞同：0
> 
> 时间：2012-07-07T23:40:50.987
> 
> 标签：php, echo

我正在使用 echo 将字符串发送回 javascript 函数，但是发送的字符串的长度比 js 函数读取的长度小 1。当我查看萤火虫控制台中的第一个字符时，值为“”。

```
echo "Success"; 
```

我对失败的 ajax 调用返回的数据进行比较：

```
if (data == "Success") 
```

如果我应用 jQuery $.trim 函数，它会成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T23:41:40.307

您的 PHP 文件末尾可能有一个空格。确保文件不以结尾`?>`（如果是则删除）。这总是会导致输出中出现额外的空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:46:17.390

我认为这`echo()`不是打印空字符，而是打印返回。改为使用`print()`。

为了避免整个问题，我要么使用更多的 RESTful HTTP 状态代码来表示成功和失败（在这种情况下，jQuery 甚至具有特定的 onFailure 和 onSuccess 回调），要么使用 JSON 来编码您返回的值。你可以让 PHP 做`echo json_encode(array('status' => 'success'));`，然后在 jQuery 做`if(data['status'] == 'success')`。如果您决定稍后返回实际数据，这将使您的代码更具前瞻性。如果您稍后执行，请确保正确设置您的内容类型或告诉 jQuery 期待 JSON。

# php - 如何在wordpress中获取下一个/上一个帖子的href和标题

> ID：11379549
> 
> 赞同：10
> 
> 时间：2012-07-07T23:41:18.733
> 
> 标签：php, wordpress

这是关于单个帖子的视图。我正在尝试像这样设置上一篇和下一篇博文的链接：

```
<a class="prevpost" href="linktoprevpost" title="prev post's title">&nbsp;</a>
<a class="nextpost" href="linktonextpost" title="next post's title">&nbsp;</a> 
```

其中两个链接都通过使用 display: block 和指定的宽度和高度来获取图像作为背景。链接帖子的标题应该可以通过 a-tag 的标题属性访问，以便用户可以通过悬停来查看它们。
我还想限制当前类别的链接帖子。所以我需要想办法得到

1.  带有上一篇/下一篇文章的 href 的 a-tag
2.  与当前查看的属于同一类别
3.  由于背景图像而没有内部文本
4.  标题属性中的上一个/下一个帖子名称
5.  使用自定义 CSS 类

类别匹配只需第一级，因为我将页面分为 3 个主要类别。我正在使用

```
$a = get_the_category(get_the_ID());
$cat = $a[0]->name; 
```

用于获取第一个类别的名称并将其设置为 header.php 中的附加主体类。也许我可以重复使用它？

我还发现像这样使用 previous_post_link() 和 next_post_link()

```
next_post_link('%link', '', TRUE); 
```

给我没有内容的同一类别的帖子，所以 1 & 2 & 3 将被解决。但似乎，要获得 4 和 5，我还需要另一种方法。

使用 Wordpress 3.4.1 版。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-03T00:54:48.643

不需要函数和过滤器，您只需使用and`get_adjacent_post`代替，注意用于获取上一篇和下一篇文章，您可以在[此处](http://codex.wordpress.org/Function_Reference/get_adjacent_post)阅读有关它 的内容要获取上一篇文章及其标题属性，请使用此`next_post_link``prev_post_link``get_adjacent_post`

```
$prev_post = get_adjacent_post(false, '', true);
if(!empty($prev_post)) {
echo '<a href="' . get_permalink($prev_post->ID) . '" title="' . $prev_post->post_title . '">' . $prev_post->post_title . '</a>'; } 
```

要获取下一篇文章及其标题属性，请使用此

```
$next_post = get_adjacent_post(false, '', false);
if(!empty($next_post)) {
echo '<a href="' . get_permalink($next_post->ID) . '" title="' . $next_post->post_title . '">' . $next_post->post_title . '</a>'; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T12:16:25.493

知道了。

现在这是我的代码：

```
$p = get_adjacent_post(1, '', 1);
if(!empty($p)) echo '<a class="prevpost" href="'.$p->guid.'" title="'.$p->post_title.'">&nbsp</a>';
$n = get_adjacent_post(1, '', 0);
if(!empty($n)) echo '<a class="nextpost" href="'.$n->guid.'" title="'.$n->post_title.'">&nbsp</a>'; 
```

该函数返回上一篇/下一篇文章的对象，我可以使用它来生成我的链接。第一个参数用于限制同一只猫的帖子。
昨天我在wordpress codex中搜索了几次，但没有遇到这个功能，现在偶然发现它。

如果有人有更好/更简单/更快的方法，请发布以获得可接受的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-18T14:57:59.580

第 1 步：您只需在下面的 function.php 中添加此函数

```
// its to ssolve single page next and previous liinks
# get_adjacent_post( $in_same_cat = false, $excluded_categories = '', $previous = true )
function echo_next_previous_post_link($fmg_name="link" ,$selector="next")
{  

if ($selector=="next") {
    $next_post_obj  = get_adjacent_post( '', '', false );
    $next_post_ID   = isset( $next_post_obj->ID ) ? $next_post_obj->ID : '';
    $next_post_link     = get_permalink( $next_post_ID );
    $next_post_title = get_the_title($next_post_ID);
    if ($fmg_name=="link") {
        echo $next_post_link ;
    }
    else {
        echo $next_post_title ;
    }
}
else {
    $previous_post_obj  = get_adjacent_post( '', '', true );
    $previous_post_ID   = isset( $previous_post_obj->ID ) ? $previous_post_obj->ID : '';
    $previous_post_link     = get_permalink( $previous_post_ID );
    $previous_post_title = get_the_title($previous_post_ID);
    if ($fmg_name=="link") {
        echo $previous_post_link ;
    }
    else {
        echo $previous_post_title ;
    }
}

} 
```

第 2 步：现在您可以在您想要的任何页面上打印帖子 url 和标题

```
<a href="<?php echo_next_previous_post_link("link","next"); ?>"><?php echo_next_previous_post_link("title","next"); ?></a>                            

<a href="<?php echo_next_previous_post_link("link","previous"); ?>"><?php echo_next_previous_post_link("title","previous"); ?></a> 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-07-07T23:54:26.420

```
<?
echo '<a href="'.get_permalink( get_the_ID()-1 ).'" title="'.get_the_title( get_the_ID()-1 ).'">Previous</a>'; 
echo '<a href="'.get_permalink( get_the_ID()+1 ).'" title="'.get_the_title( get_the_ID()-1 ).'">Next</a>';

?> 
```

# hadoop - hadoop classCastException

> ID：11379556
> 
> 赞同：0
> 
> 时间：2012-07-07T23:42:14.043
> 
> 标签：hadoop, classcastexception

我使用 hadoop 0.18.3 遇到以下错误

java.lang.ClassCastException：org.apache.hadoop.io.Text 无法转换为 org.apache.hadoop.io.DoubleWritable

我将我的映射器定义为：

```
public class HadoopMapper extends MapReduceBase implements Mapper<Text,DoubleWritable,Text,DoubleWritable> {
// The Karmasphere Studio Workflow Log displays logging from Apache Commons Logging, for example:
// private static final Log LOG = LogFactory.getLog("HadoopMapper");

@Override
public void map(Text key, DoubleWritable value, OutputCollector<Text, DoubleWritable> output, Reporter reporter)
        throws IOException {
//        throw new UnsupportedOperationException("Not supported yet.");
    Random generator = new Random();
     int i;

     final int iter = 100000;

     for (i =0; i < iter; i++)
     {
     double x = generator.nextDouble();
     double y = generator.nextDouble();

     double z;

     z = x*x + y*y;

     if (z <= 1){
         output.collect(new Text("VALUE"), new DoubleWritable(1));
     }else{
         output.collect(new Text ("VALUE"), new DoubleWritable(0));
     }
     }

  }
} 
```

和减速机类

```
public class HadoopReducer extends MapReduceBase implements    Reducer<Text,DoubleWritable,Text,DoubleWritable> {
// The Karmasphere Studio Workflow Log displays logging from Apache Commons Logging, for example:
// private static final Log LOG = LogFactory.getLog("HadoopReducer");

@Override
public void reduce(Text key, Iterator<DoubleWritable> value, OutputCollector<Text, DoubleWritable> output, Reporter reporter)
        throws IOException {
    // TODO code reducer logic here
//        throw new UnsupportedOperationException("Not supported yet.");

    double pi = 0;
     double inside = 0;
     double outside = 0;

     while (value.hasNext())
     {
     if (value.next().get() == (long)1)
     inside++;
     else
     outside++; 
     }

     pi = (4*inside)/(inside + outside);

     output.collect(new Text ("pi"), new DoubleWritable(pi));
    }
} 
```

我将jobconf设置为：

```
 public static void initJobConf(JobConf conf) {
// Generating code using Karmasphere Protocol for Hadoop 0.18
// CG_GLOBAL

// CG_INPUT_HIDDEN
    conf.setInputFormat(KeyValueTextInputFormat.class);
// CG_MAPPER_HIDDEN
conf.setMapperClass(HadoopMapper.class);

// CG_MAPPER

// CG_PARTITIONER_HIDDEN
conf.setPartitionerClass(org.apache.hadoop.mapred.lib.HashPartitioner.class);

// CG_PARTITIONER

 // CG_COMPARATOR_HIDDEN
conf.setOutputKeyComparatorClass(org.apache.hadoop.io.Text.Comparator.class);

// CG_COMPARATOR

// CG_COMBINER_HIDDEN

// CG_REDUCER_HIDDEN
conf.setReducerClass(HadoopReducer.class);

// CG_REDUCER
   conf.setNumReduceTasks(1);

   // CG_OUTPUT_HIDDEN
    conf.setOutputKeyClass(Text.class);
     conf.setOutputValueClass(DoubleWritable.class);
    // CG_OUTPUT

     // Others
    } 
```

我在 conf.setInputFormat(KeyValueTextInputFormat.class) 中找不到与 KeyValueTextInputFormat.class 匹配的 Inputformat，那么如何处理呢？我可以子类化吗？你能帮我举个例子吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T23:51:14.227

KeyValueTextInputFormat 期望输入一个文本键和一个由 SEPARATOR_CHARACTER 分隔的文本值（默认选项卡）。您正在尝试将其转换为默认情况下不可能的 DoubleWritable。

因此，将您的映射器修改为： Mapper< Text,Text,Text,DoubleWritable >

以及相应的 map 方法，然后自己将文本转换为 double 。

# javascript - Do browsers with accessibility support CSS or JavaScript?

> ID：11379571
> 
> 赞同：6
> 
> 时间：2012-07-07T23:44:33.527
> 
> 标签：javascript, css, browser, accessibility, blind

I'm currently working on a honeypot solution to prevent spam in my site that consists in adding a few fields with random names and hiding them with CSS by adding `style="display : none;"` in the HTML element. When submitted, if any of these fields is not empty -as it should- it means that a spambot just submitted the form. That or a malicious user. Either way, the post is rejected.

Now, this would work perfectly but I'm assuming that all users have browsers that support CSS.

Deleting via JavaScript every field that has the CSS `display` attribute equal to `none` could prevent browsers with no CSS support from displaying the supposedly hidden fields.

So, this would work fine for browsers that support:

*   both CSS and JavaScript
*   only CSS
*   only JavaScript

My question is, then, do browsers for the blind or any other accessibility-targeted browser support CSS and JavaScript, only CSS, only JavaScript or *none*?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T06:17:29.930

> do browsers for the blind or any other accessibility-targeted browser

There are no browsers these days that are geared toward people with disabilities. There used to be a few projects that were, but the major assistive technology (AT) manufacturers got their act together and got their software working first with IE, then onto Firefox. You are taking a chance using Chrome or Opera with AT, the support is hit or miss.

> support CSS and JavaScript, only CSS, only JavaScript or none?

It really comes down to what JS, CSS, and AT combination is being used. In general AT is fine with CSS. There is four areas that can cause issues: color/contrast, `display:table`, `display: none` and `visibility:hidden`. Since the first two aren't part of the question, we'll skip them. JAWS only announces content that has `display:none` or `visibility:hidden` on a `<span>`. I will leave out commenting too much about JS, but WebAIM has an article providing [an overview of JS and accessibility](http://webaim.org/techniques/javascript/).

> consists in adding a few fields with random names and hiding them with CSS by adding `style="display : none;"` in the HTML element.

I am assuming you are correctly adding `<label>`s to all your form elements. Please add them to the honey pot fields just in case they are read. I'd add "ignore this field" to the `<label>` as well.

Reading:

[Screen Readers and display: none](http://juicystudio.com/article/screen-readers-display-none.php/)

[JAWS, Window-Eyes and display:none: Return to 2007](http://www.accessibleculture.org/articles/2011/08/jaws-window-eyes-and-display-none/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T00:06:20.537

Modern screenreaders usually work by "hooking" a text-to-speech interface onto a normal web browser (e.g, Internet Explorer). As such, they support all the CSS and Javascript that the browser would ordinarily support. `display:none` is perfectly kosher.

As far as other browsers go: Basic CSS rules like `display: none` have been supported by every major web browser since Netscape 4.something. If someone's using a browser which does not support CSS at all, they will have much bigger problems to deal with than your registration form.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T00:35:44.730

Well I use Lynx when I'm feeling disappointed with the world sometimes, and it doesn't support CSS. What I do in cases like this is write a default value into the hidden field like: `Please DON'T fill anything into this field`

That takes care of any person that can't see but stupid bots still overwrite it. Then I check in my code if the value is any different than *exactly* `Please DON'T fill anything into this field` and profit!

*BTW* This hidden field method won't stop a determined attacker anyways, so it's a moot point to discuss what happens if an attacker checks out the source of the page. We just want the mass bots to be stopped - and bots that can recognize text like this (each dev uses their own words to communicate the message) are far off from falling into the hands of script kiddies, even if they do exist. Well the last part is a guess.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-08T00:30:11.743

If you are doing it because of *malicious users* is it useless way - my opinion. I am not those bad guy, but it cost one click to me to disable CSS style. Easy plugin in modern browser. Good for web development and maybe for other things. Its like re-inventing of wheel to work with random hidden input names in fixed form. Catch 1 working combination (reading source code F4) and you can use it as many times as you want.

Why not simply extra name visible input and store its name in session and compare it after submit?

Or put there one `<input type="hidden"` with extra code (hash or anything else) what can be recognized just by your app.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T17:58:53.747

Adding to others' answers, I'll say that assistive software like JAWS support even dynamical changes of the display property (say, showing/hiding a div by pressing a button).

# ruby - RSpec + Sinatra + Capybara (+ webkit) 用于 js textarea 测试

> ID：11379577
> 
> 赞同：0
> 
> 时间：2012-07-07T23:45:21.387
> 
> 标签：ruby, rspec, sinatra, capybara, capybara-webkit

我正在尝试测试一个 sinatra (1.3.2) 应用程序，其字段使用数据绑定通过[Knockout.js](http://knockoutjs.com/)更新以在客户端连接，我需要对此运行一些测试。但是我似乎无法让它工作。我已经使用 Capybara 配置了 RSpec（使用 webkit 作为 js 驱动程序）并且由于某种原因，当我在相关字段上使用 find_field('lead[temporary_notes).text 进行测试时（从 Knockout 获取它的值），我得到一个空字符串..任何想法为什么会这样或如何正确测试？

谢谢！

——杰克

这是规范（它访问更高描述块中的前块中的页面）：

```
describe "submitting with empty field (home phone)" do
    before do
      fill_in "Home Phone", with: ""
      fill_in "lead[temporary_notes]", with: x_lead.temporary_notes
      fill_in "Appointment Time", with: "07/07/12 9:43 am"
      click_button "Post Lead"
    end
    it { should have_selector('div.alert', text: "missing required fields")}
    it { find_field('First Name').value.should == x_lead.fname }
    it { find_field('Last Name').value.should == x_lead.lname }
    it { find_field('Address').value.should == x_lead.address1 }
    it { find_field('City').value.should == x_lead.city }
    it { find_field('Zip').value.should == x_lead.zip }
    it { find_field('Home Phone').value.should == "" }
    it { find_field('Cell Phone').value.should == x_lead.phone3 }
    it { find_field('Spouse Phone').value.should == x_lead.phone4 }
    it { find_field('Email Address').value.should == x_lead.email }
    it { find_field('lead[temporary_notes]').text.should == x_lead.temporary_notes }
  end 
```

这是页面（erb）：

```
 <div id="lead-form" class="row">
    <form accept-charset="UTF-8" action="/leads" class="new_lead" id="new_lead" method="post" name="new_lead">
        <div style="margin:0;padding:0;display:inline">
            <input name="utf8" type="hidden" value="✓">
            <div id="lead-personal" class="span3">
                <label class="switch-spousename no_selection required_field" for="lead_fname"><span id="first_name_switch">First Name</span></label><input id="lead_fname" name="lead[fname]" size="30" type="text" value="<%= @lead.fname %>">
                 <label class="switch-lastname no_selection required_field" for="lead_lname"><span id="last_name_switch">Last Name</span></label> <input id="lead_lname" name="lead[lname]" size="30" type="text" value="<%= @lead.lname %>">
                 <label class="switch-spousename no_selection" for="lead_spouse"><span id="spouse_name_switch">Spouse Name</span></label><input id="lead_spouse" name="lead[spouse]" size="30" type="text" value="<%= @lead.spouse %>">
                 <label for="lead[email]">Email Address</label><input type="text" name="lead[email]" value="<%= @lead.email %>" id="lead[email]">
            </div>

            <div id="lead-phone" class="span3">
                <label for="lead_phone1" class="required_field">Home Phone</label><input id="lead_phone1" name="lead[phone1]" size="30" type="text" value="<%= @lead.phone1 %>">
                <label for="lead_phone2">Cell Phone</label><input id="lead_phone2" name="lead[phone2]" size="30" type="text" value="<%= @lead.phone2 %>"> 
                <label for="lead_phone4">Spouse Phone</label> <input id="lead_phone4" name="lead[phone4]" size="30" type="text" value="<%= @lead.phone4 %>">
            </div>
            <div id="lead-address" class="span4">
                <label for="lead_address1" class="required_field">Address</label> <input id="lead_address1" name="lead[address1]" size="30" value="<%= @lead.address1 %>"type="text"> 
                <label for="lead_city" class="required_field">City</label> <input id="lead_city" name="lead[city]" size="30" type="text" value="<%= @lead.city %>"> 
                <label for="lead_state" class="required_field">State</label> <input id="lead_state" name="lead[state]" size="30" type="text" value="<%= @lead.state %>"> 
                <label for="lead_zip" class="required_field">Zip</label> <input id="lead_zip" name="lead[zip]" size="30" type="text" value="<%= @lead.zip %>">

                <div class="control-group">
                    <label class="control-label" class="required_field" for="lead_lead_home_ownership">Homeowner Status:</label>
                    <div id="lead-homeowner-status" class="controls">
                        <label class="radio inline" for="lead_lead_home_ownership">Own</label> <input checked="checked" class="radio inline" id="lead_lead_home_ownership_own" name="lead[lead_home_ownership]" type="radio" value="Own"> <label class="radio inline" for="lead_lead_home_ownership">Rent</label> <input class="radio inline" id="lead_lead_home_ownership_rent" name="lead[lead_home_ownership]" type="radio" value="Rent"> <label class="radio inline" for="lead_lead_home_ownership">Lease</label> <input class="radio inline" id="lead_lead_home_ownership_lease" name="lead[lead_home_ownership]" type="radio" value="Lease"> <label class="radio inline" for="lead_lead_home_ownership">Other</label> <input class="radio inline" id="lead_lead_home_ownership_other" name="lead[lead_home_ownership]" type="radio" value="Other" >
                    </div>
                </div>
            </div>
            <div id="lead-comments" class="span3">

                <label for="lead[temporary_notes]">Notes</label> 
                <textarea cols="30" name="lead[temporary_notes]" data-bind="value: leadTelemarketerNotes" rows="3" value="<%= @lead.temporary_notes %>" id="lead_temporary_notes"/>
</textarea>
            </div>
            <div id="lead-appointment" class="span3">
                <label for="lead_contact_time" class="required_field">Appointment Time</label> <input id="lead_contact_time" name="lead[contact_time]" size="30" type="text" value="<%= @lead.contact_time %>">

            </div>

            <input type="hidden" name="lead[lead_callcenter_notes]" data-bind="value: leadCallcenterNotes" />
            <input type="hidden" name="lead[lead_callcenter_rep]" data-bind="value: leadTelemarketerName" />

            <input class="btn btn-success" id="lead-submit" name="commit" type="submit" value="Post Lead">
        </div>
    </form>
</div>
    <script type="text/javascript" charset="utf-8">
    var ko_form = new LeadViewModel("<%= @lead.lead_callcenter_rep %>", "<%= @lead.temporary_notes %>", <%= @lead.has_alarm %>);
    ko.applyBindings(ko_form);
  var tooltipDelay = ({ show: 550, hide: 75 });
  $('#first_name_switch').tooltip({title: "Click: Switch with Spouse name", delay: tooltipDelay});
  $('#last_name_switch').tooltip({title: "Click: Switch with First name", delay: tooltipDelay});
  $('#spouse_name_switch').tooltip({title: "Click: Switch with First name", delay: tooltipDelay});
</script> 
```

运行规范时我得到了这个：

```
Failure/Error: it { find_field('lead[temporary_notes]').text.should == x_lead.temporary_notes}
   expected: "Some notes"
        got: "" (using ==) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:59:39.703

您可能需要明确声明测试需要 JavaScript 驱动程序。你可以试试：

```
describe "test description", :js => true do
  ...
end 
```

# javascript - XP、Vista 和 Windows 7 上 IE 7,8 和 9 的常见配置的 JavaScript 计时器分辨率是多少？

> ID：11379579
> 
> 赞同：0
> 
> 时间：2012-07-07T23:46:12.467
> 
> 标签：javascript, performance, internet-explorer

我正在研究各种 IE/Windows 组合的 JavaScript 计时器分辨率。在我的 IE9/Vista 机器上，我得到了 17 毫秒的计时器分辨率（通过运行[这个测试](http://jsfiddle.net/rgrove/rQtUU/embedded/result/)）。我无法访问这些其他组合。（我不知道这是否应该是一个社区 wiki 问题，但无论如何都是这样）

```
 XP       Vista      Win7
           --        --         --
IE7        ?          ?         ?
IE8        ?          ?         ?
IE9        ?          ?         ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T00:56:29.850

在任何操作系统上都没有针对标准计时调用的准确计时器分辨率（这包括 Javascript——尽管我确实注意到评论和您链接的测试平均运行时间约为 4 毫秒，这表明一些复杂性超出了我提供的答案）。

通常，任何编程语言的标准计时函数的计时器调用都与操作系统的低分辨率计时器的底层分辨率相关联，不能保证在精确的毫秒数后递增，但在所有常见的情况下*大约*为 15 毫秒操作系统（包括所有版本的 Linux，以及 Windows 和 OSX）。

这意味着操作系统将间歇性地检查任何正在运行的程序发出的任何计时请求的时间是否已到*（**假设*调用了低分辨率计时函数），而不管这些脚本使用的编程语言是什么/程序已编写。如果是，则系统为所讨论的目标程序的下一个时间片安排相应的回调函数。

 *平均而言，低分辨率计时器大约每 15 毫秒递增一次 - 但这是一个平均值；它随定时器的任何单独增量而变化，通常高端可达 25 毫秒，低端可达约 8 毫秒。这就是低分辨率系统计时器的本质——它对整个系统（和单个程序）的性能影响非常小，但它的精度仅为~15 ms。换句话说，*精度*为 1 毫秒（这就是为什么标准计时函数，例如 Javascript 计时函数，具有毫秒精度的原因），但*精度*仅为约 15 毫秒，给或取。精度和准确度是不同的。

低分辨率计时器以这种方式运行的原因正是我提到的原因——因此计时功能对系统的影响很小。存在更高分辨率的计时功能，但更加密集，需要许多 CPU 周期来测试和更新计时器。最高精度的定时器需要额外的物理硬件组件以及硬件中断，有时需要任务关键程序的独占高优先级访问。

底线是 Javascript 计时函数并不准确。平均而言，它们会在目标时间的大约 15 毫秒内触发，有时更少，有时更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:59:09.277

经过进一步研究，我发现在 Window 7 之前，IE javascript 计时器只是调用了 windows 系统计时器，它是每秒 64 个滴答声 - 或 15.6 毫秒间隔。在 Windows 7 中，实际上有两个计时器设置。插入时适用的 4 毫秒计时器，以及拔出时适用的旧 15.6 毫秒计时器。这是一种省电措施，实际上可以从高级电源配置设置界面进行配置-因此您可以在所有情况下将您的个人机器切换为15.6ms或4ms，或者如果您想反常-在高功耗时插上电源时，您已拔出电源且功耗低。*

# php - PHP - “神奇的变量值” - 酷还是傻？

> ID：11379582
> 
> 赞同：0
> 
> 时间：2012-07-07T23:46:35.803
> 
> 标签：php, dependency-injection

我对使用依赖注入设计代码框架有一些疑问：

[FLOW3](http://flow3.typo3.org/)或[Doctrine](http://www.doctrine-project.org/)使用注释将类实例注入对象属性。这是通过代码反射完成的......性能是baaaaad：D

您如何看待这种方法？

```
class Test extends Injector {
    protected $abc = '@Inject:/namespace/classname';
} 
```

Injector 只是遍历类属性并查找字符串是否以给定类的开头`@Inject`并创建对象。

它很酷还是很烂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T23:54:26.137

如果您没有使用带有 Doctrine 注释的缓存（这比您的解决方案更优雅，这将非常难以调试 [这实际上是它的唯一问题，除了您需要带有 '@Inject 的字符串的情况' 在其中] 如果出现问题），那么你做错了。在生产环境中，如果您正确设置缓存（[请参阅文档](http://docs.doctrine-project.org/projects/doctrine-common/en/latest/reference/annotations.html)），您将不会遇到任何问题 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T00:00:01.690

好吧..使用反射很慢。这是无可争辩的。但是有一个可行的解决方法：使用 APC 缓存每个类实例的依赖项。

也就是说，您必须了解，您所说的不是依赖注入（这是设计模式），而是依赖注入容器（DIC）。

DIC 通常是框架（或其中的一部分），它们试图自动化在代码中使用依赖项的过程。这通常是服务定位器（“全局注册表”的一个漂亮名称）anitpattern，具有不同程度的危害。

所以......我的建议是这样的：

*   如果您别无选择使用 DIC 的代码库 - 使用缓存。广泛地。
*   如果您不限于特定的第 3 部分库/框架 - 使用手动依赖注入

# python - 简单的旋转 Python 记录器 (RotatingFileHandler)

> ID：11379585
> 
> 赞同：0
> 
> 时间：2012-07-07T23:46:40.513
> 
> 标签：python, logging

我正在尝试编写一个简单的记录器，但我抛出了一个异常。我想要一些关于为什么抛出这个异常的建议，但也会感谢一些设计建议（请记住，我想保持这个简单）。

代码：

```
import logging
import logging.handlers

class Logger:

    @staticmethod
    def log_to_file(logText):

        logFile = logging.handlers.RotatingFileHandler('/var/log/sosms/sosmsd.log', 'a', 1000, 5)
        formatter = logging.Formatter()
        logFile.setFormatter(formatter)

        logFile.emit(logText)

        return 
```

输出：

```
kyle@boxmunch:/var/log/sosms$ /etc/rc.local
Traceback (most recent call last):
  File "/usr/lib/python2.7/logging/handlers.py", line 77, in emit
     if self.shouldRollover(record):
   File "/usr/lib/python2.7/logging/handlers.py", line 156, in shouldRollover
    msg = "%s\n" % self.format(record)
  File "/usr/lib/python2.7/logging/__init__.py", line 719, in format
    return fmt.format(record)
  File "/usr/lib/python2.7/logging/__init__.py", line 464, in format
    record.message = record.getMessage()
AttributeError: 'str' object has no attribute 'getMessage'
Traceback (most recent call last):
  File "/git/sosms/sosmsd/Main.py", line 10, in <module>
    Logger.Logger.log_to_file('SOSMSD starting..')
  File "/git/sosms/sosmsd/Logger.py", line 14, in log_to_file
    logFile.emit(logText)
  File "/usr/lib/python2.7/logging/handlers.py", line 83, in emit
    self.handleError(record)
  File "/usr/lib/python2.7/logging/__init__.py", line 799, in handleError
    record.filename, record.lineno))
AttributeError: 'str' object has no attribute 'filename' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T23:49:35.627

因为处理程序`.emit()`需要*记录*，而不是字符串。

[http://docs.python.org/library/logging.handlers.html](http://docs.python.org/library/logging.handlers.html)

您可能不想创建自己的记录器类，只需使用`Logging.getLogger(__name__)`（或类似）检索一个并调用适当的方法（`.error(logText)`例如）。
编辑：而且您绝对不想每次记录某些内容时都创建一个新的处理程序，通常应该为每个应用程序创建一次。对于简单的情况，您可以简单地使用`logging.basicConfig()`.

请参阅[http://docs.python.org/library/logging.html](http://docs.python.org/library/logging.html)

# xamarin.ios - 为什么我的 Monotouch 应用程序不能在 Instruments 中进行符号化？

> ID：11379589
> 
> 赞同：0
> 
> 时间：2012-07-07T23:46:51.773
> 
> 标签：xamarin.ios, profiling, instruments

我为 Debug/iPhone 编译了我的应用程序，打开了用于 CPU 时间分析的仪器，将其连接到我的 iPad，选择我的应用程序 (MainApp) 作为目标，记录了一个仪器会话，然后停止了它。

没有一个函数名是符号化的。它们都看起来像这样（0x133de3、0x2a1be7 等）。

我去了 Instruments->File->Re-Symbolicate Document...，然后我选择了我的应用程序并选择了 Locate。我将它指向我认为由 monotouch 在此路径生成的正确符号文件：Desktop/iPadApp/MainApp/bin/iPhone/Debug/MainApp.app.dSYM

但是，当我单击打开时，它显示“无法使用选定的符号 - 重新符号化需要 MainApp.app.dSYM 和 MainApp 具有匹配的 UUID。”

我不确定这意味着什么或如何解决问题。我在 Snow Leopard 上运行 XCode 4.2、MonoDevelop 3.0.3.2 和 Monotouch 5.2.12。

任何帮助将非常感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T21:53:04.993

这个答案是由米格尔提供的......

假设您的应用程序名为“Foo”，您可以检查二进制文件的 UUID 以确保它们彼此对应，如下所示：

```
$ dwarfdump --uuid Foo.app/Foo
UID: A5B46B4C-F5A1-3CDD-82B0-02CB7222F8CC (armv7) Foo.app/Foo
$ dwarfdump --uuid Foo.app.dSYM
UID: A5B46B4C-F5A1-3CDD-82B0-02CB7222F8CC (armv7) Foo.app.dSYM/Contents/Resources/DWARF/Foo 
```

如果它们不匹配，则意味着您没有最新的构建，并且其中一个文件已过时。

# jquery - jQuery问题并从文本框中获取价值

> ID：11379591
> 
> 赞同：1
> 
> 时间：2012-07-07T23:47:07.393
> 
> 标签：jquery

我是 jQuery 新手，有以下问题...

我有一个像这样的输入框：`<input class="textbox" id="query" type="text" name="querybox" />`. 在 jQuery 中，我正在尝试做`$('#query').val()`，但它无法获得价值。后来我意识到它甚至没有得到文本框！虽然我在这里关注文档： [http ://api.jquery.com/?s=input](http://api.jquery.com/?s=input)

有什么我做错了吗？

我有输入框`body > wrapper(div) > content(div)`。

**编辑**

我从这里删除了所有与我的代码无关的部分：

```
<!DOCTYPE html>
<html>
<head>
    <title>Test</title>

    <script type="text/javascript">
        var a1 = $("#query").val();
        alert('hi');
    </script>

    <link rel="stylesheet" media="screen" href="/static/stylesheets/main.css">
    <link rel="stylesheet" media="screen" href="/static/stylesheets/uni_login.css">
    <link rel="stylesheet" media="screen" href="/static/stylesheets/navigation.css">
    <script type="text/javascript" src="/static/javascripts/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="/static/javascripts/jquery.autocomplete-min.js"></script>
</head>
<body>
<div id="wrapper">
    <div id="content">
        <input class="textbox" id="query" type="text" name="querybox" />
    </div>
</div>
</body>
</html> 
```

当我带走时`var a1 = $("#query").val();`，我看到了警报。这告诉我我正在运行的 jquery 有问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T02:42:21.080

尝试在文档中使用您的 javascript。您还需要在您自己的 jquery 脚本之前加载 jquery 库。

```
 $(function(){
    var a1 = $("#query").val();
    alert(a1);
 }) 
```

HTML

```
 <div id="wrapper">
   <div id="content">
    <input class="textbox" id="query" type="text" name="querybox" value="hello world"/>
   </div>
 </div> 
```

我还冒昧地将某些内容实际放入 value 属性中并将其显示在警报中。

[简单的jQuery示例](http://jsfiddle.net/XXP47/)

# objective-c - 使用 NSRegularExpression 将每个匹配项替换为方法的结果

> ID：11379593
> 
> 赞同：2
> 
> 时间：2012-07-07T23:47:22.840
> 
> 标签：objective-c, regex, nsregularexpression

我想用`enumerateMatchInString`调用我的方法来查找每个缩写词`ConvertAbbreviation:(NSString *)abbr;`来隐藏该缩写词并返回完整的字符串。

有人可以帮我弄这个吗？当我尝试下面的代码时出现异常。如果这是错误的，请给我一个如何修改块内原始文本的示例。

```
- (NSString *) convertAllAbbreviationsToFullWords:(NSString *) textBlock {

NSRegularExpression *matchAnyPotentialAbv  = [NSRegularExpression regularExpressionWithPattern:@"[a-zA-Z\\.]+\\.\\s" options:0 error:nil];

[matchAnyPotentialAbv 
     enumerateMatchesInString:textBlock
     options:0
     range:NSMakeRange(0, [textBlock length])
     usingBlock:^(NSTextCheckingResult *match, NSMatchingFlags flags, BOOL *stop) {

        /* on each match, I would like to call convert(match) and
           replace the result with the existing match in my textBlock */ 

        if (++count >= 200) *stop = YES;
     }
     ];
    return textBlock;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-08T02:16:27.800

您应该尝试向后搜索，否则一旦您第一次修改文本，您的文本范围就不再有效。

因此，像这样枚举所有匹配项（您可以使用此技巧向后退）：

```
NSArray *results = [matchAnyPotentialAbv matchesInString:textBlock options:kNilOptions range:NSMakeRange(0, textBlock.length)];

for(NSTextCheckingResult *result in [results reverseObjectEnumerator])
{
    //Replace
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-09T22:10:51.260

使用 NSRegularExpression 的`-replacementStringForResult:inString:offset:template:]`API 可能提供了一种更简洁的方法来做到这一点，并且对我来说效果很好。有关使用指南，请参阅：

> [如何使用 NSRegularExpression 的 replacementStringForResult:inString:offset:template:](https://stackoverflow.com/questions/6222115/how-do-you-use-nsregularexpressions-replacementstringforresultinstringoffset)

# mysql - MySQL 选择优化

> ID：11379596
> 
> 赞同：2
> 
> 时间：2012-07-07T23:47:50.843
> 
> 标签：mysql, optimization, select, tokudb

我有几个查询可以使用一些优化，因为它们需要相当长的时间，所以在阅读了这个站点上的许多帖子后，我开始修改我的架构并添加/更改索引以适当地加快查询速度。在大多数情况下，我都取得了巨大的成功，但是在这种特殊情况下，我被卡住了，我不确定自己做错了什么。

我有一张表，里面有大约 350 万行。

```
select count(*) from post;
+----------+
| count(*) |
+----------+
|  3652904 |
+----------+ 
```

并创建如下：

```
Create Table: CREATE TABLE `post` (
  `id` varchar(255) NOT NULL DEFAULT '',
  `page_id` bigint(20) NOT NULL DEFAULT '0',
  `post_id` bigint(20) NOT NULL DEFAULT '0',
  `type` varchar(45) CHARACTER SET latin1 NOT NULL,
  ...
  `created_time` timestamp NULL DEFAULT NULL,
  `updated_time` timestamp NULL DEFAULT NULL,
  `timestamp` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`page_id`,`post_id`),
  KEY `created_time` (`created_time`),
  KEY `target_id` (`target_id`),
  KEY `id` (`id`) USING BTREE
) ENGINE=TokuDB DEFAULT CHARSET=utf8
/*!50100 PARTITION BY HASH (page_id)
PARTITIONS 10 */ 
```

另一个表的行数很少，创建如下：

```
select count(*) from privacy;
+----------+
| count(*) |
+----------+
|    19093 |
+----------+

Create Table: CREATE TABLE `privacy` (
  `id` varchar(255) CHARACTER SET latin1 NOT NULL,
  `page_id` bigint(20) DEFAULT '0',
  `description` text CHARACTER SET latin1,
  `value` varchar(255) CHARACTER SET latin1 DEFAULT NULL,
  `allow` varchar(255) CHARACTER SET latin1 DEFAULT NULL,
  `deny` varchar(255) CHARACTER SET latin1 DEFAULT NULL,
  `json` text CHARACTER SET latin1,
  `timestamp` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `page_id` (`page_id`)
) ENGINE=TokuDB DEFAULT CHARSET=utf8 
```

我要优化的选择如下：

```
explain partitions 
SELECT   
  post.id,  post.type,  privacy.description  
FROM   
  post 
LEFT JOIN privacy ON privacy.id = post.id  
WHERE post.page_id = 12854644836;
+----+-------------+---------+------------+------+---------------+---------+---------+-------+-------+-------+
| id | select_type | table   | partitions | type | possible_keys | key     | key_len | ref   | rows  | Extra |
+----+-------------+---------+------------+------+---------------+---------+---------+-------+-------+-------+
|  1 | SIMPLE      | post    | p6         | ref  | PRIMARY       | PRIMARY | 8       | const | 34685 |       |
|  1 | SIMPLE      | privacy | NULL       | ALL  | NULL          | NULL    | NULL    | NULL  | 19093 |       |
+----+-------------+---------+------------+------+---------------+---------+---------+-------+-------+-------+ 
```

不幸的是，这个选择需要几分钟，我不知道为什么。我注意到解释没有选择主键，我想知道这是否是由于两个表之间的字符集不同。即便如此，从解释来看也不应该涉及那么多行，但执行起来仍然需要那么长时间。

```
16754 rows in set (5 min 33.68 sec) 
```

仅从表格中进行选择就非常快。

```
select * from post where page_id = 12854644836;
16754 rows in set (0.22 sec) 
```

和

```
select * from privacy where page_id = 12854644836;
234 rows in set (0.01 sec) 
```

这个网站上的一些 MySQL 大师能否为我指明正确的方向？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T00:08:00.140

这是因为该`id`列在privacy 表中定义为latin1，在posts 表中定义为utf8。

MySQL 必须对连接的 id 列进行字符集转换，因此它不能使用索引。更改字符集，它将解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:50:59.027

MySQL 不能在单个查询中为同一个表引用使用多个索引。您将需要在帖子表上构建一个复合索引，`(id,page_id)`因为需要在两列中搜索此查询（第一列用于连接，第二列用于过滤条件）。

# html - 未评估某些 HTML 实体代码

> ID：11379599
> 
> 赞同：0
> 
> 时间：2012-07-07T23:48:35.757
> 
> 标签：html, django, unicode, character-encoding

我有一个从数据库传递信息的视图：

```
def serve_article(request, id):
    served_article = Article.objects.get(pk=id)

    # Strips out new line and tab characters
    article_snippet = served_article.full_text.replace('\n','').replace('\t','')

    # Gets first 300 word characters
    article_snippet = re.match(r'(.{,300})\W', article_snippet).group(1)

    return render(request, 'article.html', {'served_article':served_article,
                                            'article_snippet':article_snippet}) 
```

`article_snippet`, 渲染时的 unicode 字符串，包含许多 HTML 实体代码（例如：`&#8217;`映射到 ' 并`&copy;`在渲染时映射到 ©）

但是，`{{ article_snippet }}`在模板中不会评估这些符号，将它们留空，就好像它们被包裹在`<code>`标签中一样（它们不是）。

我`<meta charset="utf-8">`在顶部，页面上的其他符号评估良好，很明显这些符号正在以某种方式被转义。为什么会发生这种行为，如何禁用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T23:55:55.527

要禁用单个变量的自动转义，请使用`safe`过滤器：

```
This will be escaped: {{ data }}
This will not be escaped: {{ data|safe }} 
```

[https://docs.djangoproject.com/en/dev/topics/templates/](https://docs.djangoproject.com/en/dev/topics/templates/)

确保您的变量不包含用户提供的危险 HTML（`<script>`标签等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T00:01:14.277

Riateche 建议使用安全过滤器，它会在 90% 的时间为您服务，其他时候（需要将 HTML 格式化为消息 - 使用 django 消息传递框架）您需要能够手动完成。

手动使字符串安全：[https ://docs.djangoproject.com/en/1.4/ref/utils/#django.utils.safestring.mark_safe](https://docs.djangoproject.com/en/1.4/ref/utils/#django.utils.safestring.mark_safe)

```
from django.utils.safestring import mark_safe

def serve_article(request, id):
    served_article = Article.objects.get(pk=id)

    # Strips out new line and tab characters
    article_snippet = served_article.full_text.replace('\n','').replace('\t','')

    # Gets first 300 word characters
    article_snippet = re.match(r'(.{,300})\W', article_snippet).group(1)

    # MARK THIS VALUE AS SAFE IN YOUR VIEW
    article_snippet = mark_safe(article_snippet)

    return render(request, 'article.html', {'served_article':served_article,
                                        'article_snippet':article_snippet}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-30T06:50:47.927

我在 Django V1.9 中发现，如果您将安全模板标签堆叠在其他模板标签之后，它就不起作用，因此请确保安全位于上下文变量之后！

**.py 代码**

```
context['variable'] = "&trade;" 
```

**HTML**

*以下作品*

```
{{ variable|safe|capfirst|linebreaksbr }} -> displays: TM 
```

*以下不起作用*

```
{{ variable|capfirst|linebreaksbr|safe }} -> displays: &trade; 
```

# ios - 如何在 Xcode 4.3 iOS 中更改文件扩展名？

> ID：11379602
> 
> 赞同：0
> 
> 时间：2012-07-07T23:49:19.420
> 
> 标签：ios, file, xcode4.3, file-extension

我的想法：在没有 wifi 或蓝牙的情况下同步音乐。这是一种使用相机连接套件在没有越狱的情况下将文件复制到 ipad 和从 ipad 复制文件的方法！首先我得到我想要的文件，然后我将它们压缩成一个 zip 文件。然后我想重命名扩展名JPG，以便iPad可以识别该文件。然后我将它复制到我的 SD 卡，然后使用相机连接套件将它连接到我的 iPad。

我希望我的应用程序复制整个 jpg 形式的 dcim，以便我可以将文件扩展名更改回 zip，然后将其解压缩以检索我的文件。

但到目前为止，我只找到了一种将文件/jpg 复制到我的应用程序中的方法，但现在我需要将文件扩展名更改回 zip，然后将其导出到另一个应用程序以进行解压以检索我的文件。

Ps：我只需要弄清楚如何在应用程序中更改文件扩展名并导出它！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T23:56:48.813

更改文件扩展名很容易，因为 iOS 不支持文件重命名。只需复制文件并将其写入包含 zip 扩展名的路径：

```
//get the documents directory
NSFileManager *fileManager = [NSFileManager defaultManager];
NSError *error;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

//append the name of the file in jpg form
NSString *jpgPath = [documentsDirectory stringByAppendingPathComponent:@"myFile.jpg"];

//check if the file exists (completely unnecessary).
if ([fileManager fileExistsAtPath:jpgPath]) {
    //get new resource path with different extension
    NSString *resourcePath = [documentsDirectory stringByAppendingPathComponent:@"myFile.zip"];
    //copy it over
    [fileManager copyItemAtPath:jpgPath toPath:resourcePath error:&error];
} 
```

# scala - 如何在播放框架表单中定义默认值可选字段？

> ID：11379604
> 
> 赞同：6
> 
> 时间：2012-07-07T23:49:29.267
> 
> 标签：scala, playframework, playframework-2.0

我正在使用 scala 2.0.2 播放框架实现一个 web api。我想提取并验证一些获取参数。为此，我使用了一个允许我定义可选字段的播放“表单”。

问题：对于那些可选字段，如果不传递参数，我需要定义一个默认值。该代码旨在正确解析这三个用例：

*   /test?top=abc（错误，abc 不是整数）
*   /test?top=123（有效，top 为 123）
*   /test（有效，top 为 42（默认值））

我想出了以下代码：

```
def test = Action {
  implicit request =>

  case class CData(top:Int)

  val p = Form(
    mapping(
      "top" -> optional(number)
    )((top) => CData($top.getOrElse(42))) ((cdata:CData) => Some(Some(cdata.top)))
  ).bindFromRequest()

  Ok("all done.")
} 
```

代码有效，但绝对不优雅。有很多样板只是为了为缺少的请求参数设置默认值。

任何人都可以提出一个更清洁、更简洁的解决方案吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T09:30:26.200

在玩 2.1

```
val p = 形式（
    映射（
      “顶部”-> 默认（数字，42）
    )(CData.apply)(CData.unapply)
  ).bindFromRequest()

```

会做你想做的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-08T10:41:34.940

这是验证查询字符串参数的路由器作业。只需在`routes`文件中定义您的参数：

```
GET /test controllers.Application.test(top: Int ?= 42) 
```

并`top`作为参数添加到您的控制器方法中：

```
def test(top: Int) = Action {
  // Use top here
  val data = CData(top)
} 
```

然后，Play 为您完成所有验证工作。`?=`请注意如何使用语法指定默认值。

您应该仅将表单用于 POST 请求。

**更新：**

如果你想手动检查参数，那么你可以定义辅助方法：

```
def getQueryParam(key: String, default: String)(implicit request: RequestHeader) =
  request.queryString.get(key).flatMap(_.headOption).getOrElse(default) 
```

并在您的控制器方法中使用它：

```
def test = Action { implicit request =>
  val top = getQueryParam("top", "42")
  ... 
```

但是这样做会丢失类型检查。当然，您可以为每种类型定义帮助器，例如`getIntParam`，`getStringParam`等等，但 Play 已经包含安全路由器实现，旨在解决此类问题。我建议您使用路由机制而不是手动检查。

# scala - 玩框架+SLICK（Scalaquery）教程

> ID：11379608
> 
> 赞同：16
> 
> 时间：2012-07-07T23:50:09.310
> 
> 标签：scala, playframework-2.0, scalaquery

有人知道将 Play 框架与 SLICK（ScalaQuery）一起使用的好教程或示例项目（github）吗？我正在努力让他们一起工作。

我收到此错误：

```
[info] play - Application started (Dev)
[error] application - 

! @6b13oi41c - Internal server error, for request [GET /listBooks] ->

play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[NoClassDefFoundError: Could not initialize class scala.slick.ast.opt.Relational$]]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:134) [play_2.9.1-2.0.2.jar:2.0.2]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115) [play_2.9.1-2.0.2.jar:2.0.2]
    at akka.actor.Actor$class.apply(Actor.scala:318) [akka-actor-2.0.2.jar:2.0.2]
    at play.core.ActionInvoker.apply(Invoker.scala:113) [play_2.9.1-2.0.2.jar:2.0.2]
    at akka.actor.ActorCell.invoke(ActorCell.scala:626) [akka-actor-2.0.2.jar:2.0.2]
    at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197) [akka-actor-2.0.2.jar:2.0.2]
Caused by: java.lang.NoClassDefFoundError: Could not initialize class scala.slick.ast.opt.Relational$
    at scala.slick.driver.BasicProfile$class.processAST(BasicProfile.scala:18) ~[slick_2.10.0-M4-0.10.0-M2.jar:0.10.0-M2]
    at scala.slick.driver.PostgresDriver$.processAST(PostgresDriver.scala:69) ~[slick_2.10.0-M4-0.10.0-M2.jar:0.10.0-M2]
    at scala.slick.driver.BasicProfile$class.createQueryBuilder(BasicProfile.scala:22) ~[slick_2.10.0-M4-0.10.0-M2.jar:0.10.0-M2]
    at scala.slick.driver.PostgresDriver$.createQueryBuilder(PostgresDriver.scala:69) ~[slick_2.10.0-M4-0.10.0-M2.jar:0.10.0-M2]
    at scala.slick.driver.BasicProfile$class.buildSelectStatement(BasicProfile.scala:23) ~[slick_2.10.0-M4-0.10.0-M2.jar:0.10.0-M2]
    at scala.slick.driver.PostgresDriver$.buildSelectStatement(PostgresDriver.scala:69) ~[slick_2.10.0-M4-0.10.0-M2.jar:0.10.0-M2]
[error] application - 
```

这是我的书模型：

```
package models

import play.api.db._
import play.api.Play.current

import scala.slick.driver.PostgresDriver.simple._
import scala.slick.ql.{MappedTypeMapper}
import scala.slick.session.{Session, Database}

case class Book(name: String, filename: String)

object Book extends Table[(Long, String, String)]("book") {

  lazy val database = Database.forDataSource(DB.getDataSource())
  def id = column[Long]("id", O PrimaryKey, O AutoInc)
  def name = column[String]("name", O NotNull)
  def filename = column[String]("filename", O NotNull)
  def * = id ~ name ~ filename

  def findAll() : Seq[Book] = database.withSession { implicit db:Session =>
    (for(t <- this) yield t.name ~ t.filename).list.map(attrs => Book(attrs._1, attrs._2))
  }

  def create(book: Book): Unit = database.withSession { implicit db:Session =>
    this.name ~ this.filename insert(book.name, book.filename)
  }

} 
```

编辑：
这是我的 Build.scala

```
import sbt._
import Keys._
import PlayProject._

object ApplicationBuild extends Build {

    val appName         = "PlayWithScala"
    val appVersion      = "1.0-SNAPSHOT"

    val appDependencies = Seq(
      // Add your project dependencies here,
      "postgresql" % "postgresql" % "9.1-902.jdbc4",
      "com.typesafe" % "slick_2.10.0-M4" % "0.10.0-M2"
    )

    val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
      // Add your own project settings here      
    )

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T16:10:15.930

**编辑** 现在 Play2.1 已经进入了它的 RC 进程，我们可以使用 Slick。这是因为 Play2.1 在海底使用 Scala2.10（也包括 RC），而且 Slick 将成为 Typesafe 堆栈中的默认数据库访问库。

回想一下，Slick 现在可以访问 RDBMS，并且很快也会针对 MongoDB。它使用光滑的 (^^) 内部 DSL 来查询后端。该 DSL 由宏管理，这就是需要 Scala 2.10 的原因。

但是，请注意，宏系统处于实验状态（即使 Scala2.10 即将发布）。我还不知道在不久的将来 Slick lib 上这种状态的潜在警告。

要享受这个 RC，去那里[Play2.1RC1](http://download.playframework.org/releases/play-2.1-RC1.zip)，并浏览文档......那里有很多变化，比如 Json API fi

* * *

嗯。不确定 slick 是否会像 Play 一样简单开箱即用。

因为 PLay 2.0 实际上是基于 Scala 2.9.x 构建的，而 slick 需要 2.10（用于宏）。

因此，起初您声明的部门（`slick_2.10.0-M4`即我使用的是 Scala 2.10.0-M4）与将使用的 scala 版本之间存在不匹配。

顺便说一句，根据[这个示例站点](https://github.com/slick/slick-examples)（对于 Slick），您的 SBT 部门似乎没问题。但是问题可能会出现，驱动程序将需要其他部门（可能是 AST）并让 SBT 使用您正在使用的当前 scala 版本发现正确的版本（这是通过在“articfact name”中声明没有 scala 版本的依赖关系来完成的）= > 这种情况下，将找不到 AST，因为它在 2.10 之前不存在。

可以尝试的是为整个项目定义另一个版本的scala......

我的2c

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-19T01:40:27.327

使用 Play 2.1 和最新的 Slick 版本 (1.0.1-RC1)，您可以使用：

```
val appDependencies = Seq(
  "com.typesafe.slick" %% "slick" % "1.0.1-RC1",
  ...
} 
```

# html - 将 RGBA 颜色转换为 HTML 颜色代码

> ID：11379611
> 
> 赞同：7
> 
> 时间：2012-07-07T23:50:53.337
> 
> 标签：html, css, colors, rgba

我的应用程序中有一个颜色选择器，用户可以使用它来选择应用程序输出的某些对象的颜色。颜色选择器正在输出以 RGBA 格式选择的颜色。但是，我需要 HTML 颜色代码。我需要能够在不提前知道颜色的情况下将 RGBA 转换为 HTML 并稍后将其用作字符串。我该怎么做呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-07T23:54:17.853

[CSS3](http://www.w3schools.com/css3/css3_intro.asp)原生支持 RGBA ：

```
div {
   background: rgba(200, 54, 54, 0.5); 
} 
```

Firefox、Safari、Chrome、IE9 和 Opera 浏览器都支持 RGBA。较旧的 IE 不支持它。

幸运的是，您可以为支持它的浏览器指定 RGBA 颜色，并为不支持它的浏览器指定替代颜色。检查此[链接](http://24ways.org/2009/working-with-rgba-colour)以获取出色的操作方法。

这是两个选项：-**来自链接**-

**1\. 回退到纯色：**当不透明度不可用时，允许浏览器回退到使用纯色。这

```
h1 {
     color: rgb(127, 127, 127); 
     color: rgba(0, 0, 0, 0.5); //for modern browsers only
} 
```

**2\. 回退到 PNG：**如果您在背景颜色上使用透明度（尽管不在边框或文本上），则可以回退到使用带有 alpha 通道的 PNG 来获得相同的效果。这不如使用 CSS 灵活，因为您需要为所需的每个透明度级别创建一个新的 PNG，但它可能是一个有用的解决方案。

```
h1 {
     background: transparent url(imageName.png);
     background: rgba(0, 0, 0, 0.5) none; //for modern browsers only
} 
```

我想说的是你不需要 HTML 颜色代码，你只需要添加 css 属性`rgba`- 使用 javascript 或 jquery - 在你选择颜色之后，我认为你已经完成了。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T21:50:07.717

如果您正在寻找从 rgb(a) 到 JavaScript 中的十六进制的实际转换（您的问题文本确实要求）：

```
red = green = blue = 255;
hex = '#' + 
    ("0" + (red).toString(16)).slice(-2) + 
    ("0" + (green).toString(16)).slice(-2) +
    ("0" + (blue).toString(16)).slice(-2); 
```

当然没有 alpha 等效项，但您可以设置不透明度（和/或`-opacity`旧浏览器支持的浏览器特定值）。

# objective-c - 你可以为 UITableView Cell Inserts 做自定义动画吗？

> ID：11379614
> 
> 赞同：29
> 
> 时间：2012-07-07T23:51:34.647
> 
> 标签：objective-c, cocoa-touch, uitableview, nsfetchedresultscontroller

我有一个由 NSFetchedResultsController 填充的 UITableView。

在表格的初始加载中，我希望对单元格进行动画处理，但我想做更多的自定义动画而不是

```
[tableView insertRowsAtIndexPaths:withRowAnimation:]; 
```

允许。具体来说，我想放慢动画的速度，并让它们以特定的方式从侧面飞入。我无法通过 UITableViewRowAnimation 常量来实现这一点。有没有办法使用核心动画来做我想要的，或者我需要在这个特定的实例中坚持使用 UIKit 动画？

谢谢你的帮助！

乔尔

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-06T12:25:39.897

**最新解决方案 (2017-12-12)**

添加**Swift 4.0**版本的 animate 方法。然后应该以与以下解决方案相同的方式实现它：

```
func animate() {
    for cell in self.tableView.visibleCells {
        cell.frame = CGRect(x: self.tableView.frame.size.width, y: cell.frame.origin.y, width: cell.frame.size.width, height: cell.frame.size.height)
        UIView.animate(withDuration: 1.0) {
            cell.frame = CGRect(x: 0, y: cell.frame.origin.y, width: cell.frame.size.width, height: cell.frame.size.height)
        }
    }
} 
```

**更新的解决方案 (2015-09-05)**

添加 Swift 2.0 版本的 animate 方法。然后应该以与以下解决方案相同的方式实现它：

```
func animate() {
    for cell in self.tableView.visibleCells {
        cell.frame = CGRectMake(320, cell.frame.origin.y, cell.frame.size.width, cell.frame.size.height)
        UIView.animateWithDuration(1.0) {
            cell.frame = CGRectMake(0, cell.frame.origin.y, cell.frame.size.width, cell.frame.size.height)
        }
    }
} 
```

**新解决方案 (2014-09-28)**

我对解决方案进行了一些修改，以使实现更容易并使其与 iOS8 一起使用。您需要做的就是`animate`在 TableViewController 中添加此方法，并在您希望它动画时调用它（例如，在您的 reload 方法中，但您可以随时调用它）：

```
- (void)animate
{
    [[self.tableView visibleCells] enumerateObjectsUsingBlock:^(UITableViewCell *cell, NSUInteger idx, BOOL *stop) {
        [cell setFrame:CGRectMake(320, cell.frame.origin.y, cell.frame.size.width, cell.frame.size.height)];
        [UIView animateWithDuration:1 animations:^{
            [cell setFrame:CGRectMake(0, cell.frame.origin.y, cell.frame.size.width, cell.frame.size.height)];
        }];
    }];
} 
```

再次，改变你喜欢的动画。此特定代码将以较慢的速度从右侧为单元格设置动画。

**旧解决方案 (2013-06-06)**

您可以通过实现自己的 UITableView 并覆盖 insertRowsAtIndexPaths 方法来做到这一点。这是一个示例，说明从右侧推动单元格的位置，非常缓慢（1 秒动画）：

```
- (void)insertRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation
{
    for (NSIndexPath *indexPath in indexPaths)
    {
        UITableViewCell *cell = [self cellForRowAtIndexPath:indexPath];
        [cell setFrame:CGRectMake(320, cell.frame.origin.y, cell.frame.size.width, cell.frame.size.height)];

        [UIView beginAnimations:NULL context:nil];
        [UIView setAnimationDuration:1];
        [cell setFrame:CGRectMake(0, cell.frame.origin.y, cell.frame.size.width, cell.frame.size.height)];
        [UIView commitAnimations];
    }
} 
```

您可以自己玩动画。表格视图不会自动调用此方法，因此您必须在表格视图委托中覆盖 reloadData 方法并自己调用此方法。

**评论**

reloadData 方法应如下所示：

```
- (void)reloadData
{
    [super reloadData];
    NSMutableArray *indexPaths = [[NSMutableArray alloc] init];
    for (int i = 0; i < [_data count]; i++)
        [indexPaths addObject:[NSIndexPath indexPathForRow:i inSection:0]];
    [self insertRowsAtIndexPaths:indexPaths withRowAnimation:0];
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-04T13:46:41.483

materik 的[回答](https://stackoverflow.com/a/14182059/1226304)对我来说不适用于 iOS 7.1 SDK，打电话后我得到了 nil`[self cellForRowAtIndexPath:indexPath];`

这是我在子类中的代码`UITableView`：

```
- (void)insertRowsAtIndexPaths:(NSArray *)indexPaths
              withRowAnimation:(UITableViewRowAnimation)animation
{
    [super insertRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationNone];
    [self endUpdates]; // Populates UITableView with data
    [self beginUpdates];
    for (NSIndexPath *indexPath in indexPaths) {
        __block UITableViewCell *cell = [super cellForRowAtIndexPath:indexPath];
        if (cell) { // If indexPath isn't visible we'll get nil here
            // Custom animation
            CGRect frame = cell.frame;
            frame.origin.x = cell.frame.size.width;
            cell.frame = frame;
            frame.origin.x = 0;
            void (^animationsBlock)() = ^{
                cell.frame = frame;
            };
            if ([[UIView class] respondsToSelector:
                 @selector(animateWithDuration:delay:usingSpringWithDamping:
                           initialSpringVelocity:options:animations:completion:)]) {
                [UIView animateWithDuration:0.3
                                      delay:0
                     usingSpringWithDamping:0.5
                      initialSpringVelocity:0
                                    options:0
                                 animations:animationsBlock
                                 completion:NULL];
            } else {
                [UIView animateWithDuration:0.3
                                      delay:0
                                    options:UIViewAnimationOptionCurveEaseIn
                                 animations:animationsBlock
                                 completion:NULL];
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-26T18:48:20.820

用这个：

```
-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath{
         [cell setFrame:CGRectMake(320, cell.frame.origin.y, cell.frame.size.width, cell.frame.size.height)];
            [UIView animateWithDuration:2 animations:^{
                [cell setFrame:CGRectMake(100, cell.frame.origin.y, cell.frame.size.width, cell.frame.size.height)];

            }];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-11T13:38:47.517

**Swift 3.0**版 Mattias Eriksson 的回答

```
func animate() {
    for cell in tblView.visibleCells {
        cell.frame = CGRect(x:320, y:cell.frame.origin.y, width:cell.frame.size.width, height:cell.frame.size.height)
            UIView.animate(withDuration: 1.0) {
                cell.frame = CGRect(x:0, y:cell.frame.origin.y, width:cell.frame.size.width, height:cell.frame.size.height)
            }
    }
} 
```

# database - Datagridview 将更改保存到数据库 vb.net

> ID：11379615
> 
> 赞同：3
> 
> 时间：2012-07-07T23:51:39.450
> 
> 标签：database, vb.net, datagridview, save

您好，我有一个数据库，我在 vb.net 应用程序中加载到 Datagridview。它加载正常，但是当我尝试保存日期时它不起作用。这是代码

```
 Private myConString As String
Private con As OleDbConnection = New OleDbConnection
Private Dadapter As OleDbDataAdapter
Private DSet As DataSet
Private DSet2 As DataSet
Private ConCMD As OleDb.OleDbCommand

Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    myConString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=e:\Database31.accdb"
    con.ConnectionString = myConString
    con.Open()
    Dadapter = New OleDbDataAdapter("select * from Table1", con)
    DSet = New DataSet
    Dadapter.Fill(DSet, "Table1")
    DataGridView1.DataSource = DSet.Tables("Table1")
    con.Close()
End Sub

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    con.Open()
    Dadapter.Update(DSet, "Table1")
    DSet.AcceptChanges()
    con.Close()
End Sub 
```

当传递带有新行的 DataRow 集合时，更新需要有效的 InsertCommand。我应该做些什么？

accessdatabase 3 colmuns 和 ID 是主键 ID Field1 Field2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T23:56:49.273

所以你必须[`InsertCommand`](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbdataadapter.insertcommand%28v=vs.100%29.aspx)为你定义一个`DataAdapter`

旁注：该行`DSet.AcceptChanges()`是多余的，因为前一行`Dadapter.Update`将`AcceptChanges`隐式调用。

您应该使用`using-statement`任何实现`IDisposable`，如连接。`Dispose`即使在发生异常的情况下，也会隐式调用（关闭连接）。

所以替换：

```
con.Open()
Dadapter.Update(DSet, "Table1")
DSet.AcceptChanges()
con.Close() 
```

和

```
Using con =  New OleDbConnection(myConString)
    con .Open()
    Dadapter.Update(DSet, "Table1")
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T22:12:57.927

您需要从数据网格中读回数据集

```
con.Open()
DSet = DataGridView1.DataSource  '<<<<<<<<<<<<<<<<<<<<<<<
Dadapter.Update(DSet, "Table1")
DSet.AcceptChanges()
con.Close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-24T17:28:49.847

我的 4 种数据库类型的 VB.NET 代码（将信息从 DataGridView 更新到数据库）

```
Private Sub sqldb_savedata()
    Dim connectionString As String = "Server='" & sql_server & "';Database='" & sql_database & "';User Id='" & sql_user & "';Password='" & sql_pass & "'"
    Dim sqlCon = New SqlConnection(connectionString)
    If (sqlCon.State = ConnectionState.Closed) Then sqlCon.Open()
    Dim SQLAdapter = New SqlDataAdapter("SELECT * FROM clinics", sqlCon)
    Dim SQLDataSet As New DataSet
    Dim myTable = DataGridViewClinic.DataSource
    Dim cmdbuilder As New SqlCommandBuilder(SQLAdapter)
    SQLAdapter.Update(myTable, "clinics")
    MsgBox("Updated!", MsgBoxStyle.OkOnly, "")
End Sub

Private Sub mysqldb_savedata()
    Dim connectionString As String = "Server='" & mysql_server & "';Database='" & mysql_database & "';User Id='" & mysql_user & "';Password='" & mysql_pass & "'"
    Dim sqlCon = New MySqlConnection(connectionString)
    If (sqlCon.State = ConnectionState.Closed) Then sqlCon.Open()
    Dim SQLAdapter = New MySqlDataAdapter("SELECT * FROM clinics", sqlCon)
    Dim SQLDataSet As New DataSet
    Dim myTable = DataGridViewClinic.DataSource
    Dim cmdbuilder As New MySqlCommandBuilder(SQLAdapter)
    SQLAdapter.Update(myTable, "clinics")
    MsgBox("Updated!", MsgBoxStyle.OkOnly, "")
End Sub

Private Sub firebirddb_savedata()
    Dim connectionString As String = "Database='" & firebird_server & "';User=SYSDBA;Password=masterkey;Dialect=3;ServerType=1"
    Dim sqlCon = New FirebirdSql.Data.FirebirdClient.FbConnection(connectionString)
    If (sqlCon.State = ConnectionState.Closed) Then sqlCon.Open()
    Dim SQLAdapter = New FirebirdSql.Data.FirebirdClient.FbDataAdapter("SELECT * FROM clinics", sqlCon)
    Dim SQLDataSet As New DataSet
    Dim myTable = DataGridViewClinic.DataSource
    Dim cmdbuilder As New FirebirdClient.FbCommandBuilder(SQLAdapter)
    SQLAdapter.Update(myTable, "clinics")
    MsgBox("Updated!", MsgBoxStyle.OkOnly, "")
End Sub

 Private Sub localdb_savedata()
    DBconn = New SqlCeConnection("Data Source=Data Source=|DataDirectory|\Database.sdf")
    If (DBconn.State = ConnectionState.Closed) Then DBconn.Open()
    Dim SQLAdapter = New SqlCeDataAdapter("SELECT * FROM clinics", DBconn)
    Dim SQLDataSet As New DataSet
    Dim myTable = DataGridViewClinic.DataSource
    Dim cmdbuilder As New SqlCeCommandBuilder(SQLAdapter)
    SQLAdapter.Update(myTable, "clinics")
    MsgBox("Updated!", MsgBoxStyle.OkOnly, "")
End Sub 
```

# html - 对元描述标签的正确语法感到好奇

> ID：11379618
> 
> 赞同：1
> 
> 时间：2012-07-07T23:52:30.293
> 
> 标签：html, syntax, meta-tags

昨天我正在阅读一篇关于正确使用元标记及其适当语法的文章。文章在这里：[http ://searchenginewatch.com/article/2067564/How-To-Use-HTML-Meta-Tags](http://searchenginewatch.com/article/2067564/How-To-Use-HTML-Meta-Tags)

这似乎很彻底。让我感到有趣的一件事是作者的断言：

“不要在描述中使用全引号 (“”)。它可能会切断你的描述。使用单引号来避免这个问题。"

这有意义吗？如果我没看错的话，人们会这样写标签：

```
<meta name="description" content='Awesome Description Here'> 
```

与文章中显示的方式相反：

```
<meta name="description" content="Awesome Description Here"> 
```

我觉得这很令人困惑，并希望得到一些澄清，以便学习正确的语法。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T23:57:20.793

您误解了意图。作者是说不要在使用全引号的 html 属性中使用全引号。像这样

```
(Bad)
<meta name="description" content="Awesome "Description" Here"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T10:15:54.740

这种说法是完全错误的。双引号（或“全引号”）可以在属性值中使用而不会出现问题或预防措施，正常情况下，使用“弯”引号 - 并且页面专门引用它们：“”。像这样的属性规范`content="Following foolish “SEO” instructions"`就可以了。

作者可能打算警告不要使用 Ascii（“直”，垂直）引号。该警告与`meta`标签没有任何特定的关系；它只是一般 HTML 语法的一部分，用作属性值分隔符的字符不能在标记中的属性值中出现。

因此`content="Following foolish "SEO" instructions"`会导致语法错误（可由验证器检测到）。但结论是错误的：如果您想在属性中使用 Ascii 引号，出于某种奇怪的原因，您可以这样做，例如写作`content='Following foolish "SEO" instructions'`，或者，`content="Following foolish &quot;SEO&quot; instructions"`.

# php - PHP页面上的500错误

> ID：11379630
> 
> 赞同：-3
> 
> 时间：2012-07-07T23:56:47.117
> 
> 标签：php, mysql

> **可能重复：**
> [为什么我的 PHP 总是出现 500 错误？](https://stackoverflow.com/questions/11379016/why-do-i-keep-getting-a-500-error-with-my-php)

我正在创建一个允许用户登录网站的页面。我不断收到 500 错误。这是给我一个错误的代码：

```
<?php

if(isset($_POST['submit']))
{
    $username = $_POST['username'];
    $password = $_POST['password'];

    include( 'connection.php' );

    if(empty($username) || empty($password))
    {
        $error = 'Please enter your username and password'
    }
    else
    {
        $password = md5($password);
        $sql = mysql_query("SELECT * FROM users WHERE username = $username AND password = $password LIMIT 1") or die(mysql_error)();
        $num_rows = mysql_num_rows($sql);

        if($num_rows == 1)
        {
            $fetch = mysql_fetch_array($sql);
            extract ($fetch);
            echo $username;
        }
        else
        {
            echo 'There was an error while logging in'
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T00:08:55.223

在**开发过程**中，您可以在 php.ini 中设置：

*   error_reporting = E_ALL | E_STRICT
*   display_errors = 开
*   display_startup_errors = 开

那么在大多数情况下，您将看到错误描述而不是空白页。

如果你仍然得到空白页，那么：

*   log_errors = 开启
*   error_log = php_errors.log

并且 php_errors.log 有可能会有一些描述。

IHMO 最好的主意是使用[xdebug](http://xdebug.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T23:57:34.107

`ifset()`不是函数。你正在寻找`isset()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T00:15:13.890

```
$sql = mysql_query("SELECT * FROM users WHERE username = $username AND password = $password LIMIT 1") or die(mysql_error()); 
```

# android - Android 小部件：imageView onClick 监听器

> ID：11379639
> 
> 赞同：2
> 
> 时间：2012-07-07T23:57:51.127
> 
> 标签：android, widget, imageview, onclicklistener

我正在为 android 构建一个小部件，但我不知道如何为 ImageView 创建一个 onClick 侦听器。小部件的主要布局组件是 RemoteViews，我在里面有 ImageView。我知道我可以使用 PendingIntent 将 onClick 侦听器注册到 RemoteView，但是如何将侦听器注册到 ImageView？另外，更重要的是，我需要知道点击的坐标。那可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T01:10:07.840

我不知道如何获取坐标，但这是触发意图的点击事件

在 Widget 类的 OnUpdate 方法中使用它......

```
RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);
Intent intent = new Intent(context, ClassName.class);
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
views.setOnClickPendingIntent(R.id.ImageView, pendingIntent); 
```

# javascript - 存在哪些 ECMAScript 5“使用严格”字符串成本？

> ID：11379640
> 
> 赞同：13
> 
> 时间：2012-07-07T23:57:51.877
> 
> 标签：javascript, performance, ecmascript-5

[almond.js](https://github.com/jrburke/almond/blob/master/almond.js)第 6 行中的“使用严格”字符串成本是什么意思 ？

谷歌没有返回关于作者似乎暗示的问题的信息。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-08T01:31:10.310

答案[显然是](https://github.com/jrburke/almond/commit/c9657f26d25a956683aee0a69d60052bd7fc7a89#L1R6)：

> 在源中传递“use strict”字符串是额外的字节，这是一个小型库。所以，只是一种减少文件大小的方法。

这是一个非常愚蠢的“成本”。压缩前是 13 个字节——这无关紧要。

# c++ - 将类型作为函数 C++ 的参数

> ID：11379642
> 
> 赞同：1
> 
> 时间：2012-07-07T23:57:58.617
> 
> 标签：c++, types, dictionary, mono, arguments

我有以下代码在 C++ 中实现了一个简单的 Hash/Dict

**哈希.h**

```
using namespace std;

#include <string>
#include <vector>

class Hash
{
  private:
    vector<const char*> key_vector;
    vector<const char*> value_vector;
  public:
    void set_attribute(const char*, const char*);
    string get_attribute(const char*);
}; 
```

**哈希.cpp**

```
using namespace std;

#include "Hash.h"

void Hash::set_attribute(const char* key, const char* value)
{
    key_vector.push_back(key);
    value_vector.push_back(value);
}

string Hash::get_attribute(const char* key)
{
    for (int i = 0; i < key_vector.size(); i++)
    {
        if (key_vector[i] == key)
        {
            return value_vector[i];
        }
    }
} 
```

目前，它可以作为键/值的唯一类型是 a `const char*`，但我想扩展它以便它可以采用任何类型（显然每个哈希只有一种类型）。我正在考虑通过定义一个将类型作为参数的构造函数来做到这一点，但我根本不知道在这种情况下如何做到这一点。我将如何做到这一点，我将如何实现它，以便将 set_attribute 定义为采用该类型？

**编译器：单声道**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T00:03:19.190

您需要使用[模板](http://www.cplusplus.com/doc/tutorial/templates/)来执行此操作。[这](http://www.daniweb.com/software-development/cpp/threads/71199/hash-table-template-implementation-help)是一个例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T00:06:21.503

```
#ifndef HASH_INCLUDED_H
#define HASH_INCLUDED_H

#include <string>
#include <vector>

template <typename T>
class Hash
{
  private:
    std::vector<const T*> key_vector;
    std::vector<const T*> value_vector;
  public:
    void set_attribute(const T*, const T*)
    {
        /* you need to add definition in your header file for templates */
    }
    T* get_attribute(const T*)
    {
        /* you need to add definition in your header file for templates */
    }
};

#endif 
```

请注意，我已将其删除`using namespace std;`，因为它完全删除了拥有命名空间的全部意义，尤其是在头文件中。

编辑：另外，你有什么理由不使用 std::vector 的迭代器来循环它的项目？

# c++ - 处理双打时模运算符的使用

> ID：11379645
> 
> 赞同：1
> 
> 时间：2012-07-07T23:59:35.900
> 
> 标签：c++, c, modulo

我必须找到 (1+sqrt(3))^n 的值，其中 n < 10^9。由于这个数字可能非常大，我们必须打印 ans%1000000007。我为此编写了以下函数。

```
double power(double x, int y)
{
    double temp;
    if( y == 0)
       return 1;
    temp = power(x, y/2);
    if (y%2 == 0)
       return temp*temp;
    else
    {
       if(y > 0)
           return x*temp*temp;
       else
           return (temp*temp)/x;
    }
} 
```

现在，我无法理解如何处理模数条件。有人可以帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T00:19:25.097

你不能那样做。您可以使用`fmod`，但由于`sqrt(3)`无法准确表示，因此您会得到大指数的虚假值。

我相当有信心您实际上需要整数结果`(1 + sqrt(3))^n + (1 - sqrt(3))^n`（参看。[这个问题](https://stackoverflow.com/questions/11301992/i-want-to-generate-the-nth-term-of-the-sequence-1-3-8-22-60-164-in-order1-or)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T01:37:17.350

这种方法是不可行的。如[this question](https://stackoverflow.com/questions/11356141/calculating-large-powers-of-a-double-with-modulus-1000-000-007)所示，您需要比 double 类型提供的精度更高的数亿十进制数字。您实际尝试解决的问题将[在此处](https://stackoverflow.com/questions/11301992/i-want-to-generate-the-nth-term-of-the-sequence-1-3-8-22-60-164-in-order1-or)讨论。你们两个在同一个班吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T08:26:17.587

模需要整数类型，您可以将联合用于与整数联合的双精度类型以使用模（如果这是 C）

# html - 删除一个 div 内 20px 的底部边框，有什么可用的技巧吗？

> ID：11379649
> 
> 赞同：0
> 
> 时间：2012-07-08T00:00:44.833
> 
> 标签：html, css, border

我几乎在网站的页脚处有一个“返回顶部”箭头，并且该 div 有一个底部边框。到目前为止一切都很好，我唯一的问题是我想删除我用 CSS 做的那个三角形周围的任何边框，没有边框底部，因为它看起来很难看..

网址是：[http ://teothemes.com/wp/](http://teothemes.com/wp/)

我尝试更改内部 div 的边框底部，但它没有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T01:49:54.210

只要您要求“破解”，那么可以：只需在 HTML 中添加另一个 div`:before`和`:after`伪元素。将border-bottom 移到这些元素上，并赋予它们看起来正确的宽度。

当然，这需要一个没有语义值的额外 HTML 元素——尽管将所有这三个内容 div 包装在另一个中是有意义的，您可以向其中添加属性。

[嵌套或多个伪元素](http://www.w3.org/TR/css3-content/#pseudo-elements)，如果它们被支持，将是一个更好的方法。

不幸的是，仅仅为 :before 和 :after 样式添加一个底部边框是行不通的（它们仍然会延伸太远），因为 CSS 边框的呈现方式——看到这会使边框更厚并且颜色不同. [这个问题](https://stackoverflow.com/questions/7073484/how-does-this-css-triangle-shape-work)的答案也说明了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T00:51:40.600

我不确定我是否完全理解这个问题，因为它对我来说看起来相当简单。

如果您要省略 div 的`border-bottom: 1px solid #c6c5c5`样式`#backtotop`，这将解决问题 - 不是吗？

另一种方法是更改​​箭头元素，使其成为一个完整的图像，而不是你正在做的`::before`and元素。`::after`但是你需要匹配图案背景。

我没有看到另一种方式，尤其是可以在多个浏览器中使用的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T00:57:24.930

看来您的箭头是`<a>`具有 CSS 背景的标签。

> 到目前为止一切都很好，我唯一的问题是我想删除我用 CSS 做的那个三角形周围的任何边框，没有边框底部，因为它看起来很难看..

在 Chrome 中检查后，没有应用边框底部。事实上，它是一个绝对定位的元素，所以边框不能作为间距提供者。只需`top`稍微调整一下您的属性（可能是 6px 或 9px），您的定位就应该完美了。

# c++ - 使用 openCV 从 Amazon S3 读取图像

> ID：11379652
> 
> 赞同：0
> 
> 时间：2012-07-08T00:01:15.600
> 
> 标签：c++, web-services, image-processing, opencv, amazon-s3

我知道有多个 C++ 库可以使用 cURL 从 Amazon S3 访问数据。使用它们，我可以将图像下载到本地机器，将其读入 OpenCV，然后删除原始文件。

但是，我想知道是否可以直接从 S3 将图像直接读取到 OpenCV 中，例如 Mat 对象。

有人能帮我完成这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:14:51.037

使用[cv::imdecode](http://opencv.willowgarage.com/documentation/cpp/reading_and_writing_images_and_video.html#cv-imdecode "简历::imdecode")，它将带有一些图像数据（png、jpeg 等）的缓冲区从内存加载到矩阵中。

```
// Suppose that a std::vector<char> contains the data loaded by Curl.
std::vector<char> data;
// The template<typename T> explicit cv::Mat::Mat(const std::vector<T>& vec)
// constructor gives this vector a cv::Mat header.
cv::Mat data_mat(data);
// Now use cv::imdecode to decode the image to a BGR matrix.
cv::Mat image(cv::imdecode(data_mat)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T22:49:29.197

所以，这就是我必须做的，就 Poco 方面而言。

`std::auto_ptr<std::istream> pStr(URIStreamOpener::defaultOpener().open(uri));` `StreamCopier::copyToString(*pStr.get(), str);`

这会将图像从提供的 URI 获取到字符串中`str`，而无需任何中间存储。其余的就像 Kristoff 解释的那样。

# c++ - C++ 编译错误：在 '(' 标记之前应为 ',' 或 '...'

> ID：11379654
> 
> 赞同：-1
> 
> 时间：2012-07-08T00:01:22.263
> 
> 标签：c++, compiler-errors, syntax-error

**非常具体的 C++ 编译语法错误，我无法找到解决方案：**我对 C++ 相当陌生，并且阅读了作为参数传递的函数。编译错误对我来说没有意义，因为我一遍又一遍地阅读了代码。请帮忙。

**编辑**：我删除了 waitpid(pid_t,int,int) 并坚持使用 system() 命令。感谢大家的帮助。

```
#include <stdlib.h>
#include <sys/types.h>
#include <unistd.h>
#include <sys/wait.h>

int main(){
/* puts apt-get purge text into ~$ purge_e_output */
    system("sudo apt-get purge enlightenment > purge_e_output.txt");
    system("echo **Pid of apt-get**");
    system("pidof apt-get");
    try{
        pid_t waitpid(pid_t getpid("apt-get"), int *statusPtr, int WUNTRACED);
    } catch(...){}
    system("echo **REMOVING ENGLIGHTENMENT**"); 
    system("sudo apt-get purge enlightenment");
    system("pidof apt-get");
    try{
        pid_t waitpid(pid_t getpid("apt-get"), int *statusPtr, int WUNTRACED);
    } catch(...){}

/* puts apt-get autoremove text into ~$ autoremove_e_output */
    system("sudo apt-get autoremove > autoremove_e_output.txt");
    system("echo **Pid of apt-get**");
    system("pidof apt-get");
    try{
        pid_t waitpid(pid_t getpid("apt-get"), int *statusPtr, int WUNTRACED);
    } catch(...){}

    system("echo **REMOVING E DATA**"); 
    system("sudo apt-get autoremove");
    system("echo **Pid of apt-get**");
    system("pidof apt-get");
    try{
        pid_t waitpid(pid_t getpid("apt-get"), int *statusPtr, int WUNTRACED);
    } catch(...){}

/* puts apt-get autoclean text into ~$ autoclean_e_output */
    system("sudo apt-get autoclean > autoclean_e_output.txt");
    system("echo **Pid of apt-get**");
    system("pidof apt-get");
    try{
        pid_t waitpid(pid_t getpid("apt-get"), int *statusPtr, int WUNTRACED);
    } catch(...){}
    system("echo **CLEANING**");    
    system("sudo apt-get autoclean");
    system("echo **Pid of apt-get**");
    system("pidof apt-get");
    try{
        pid_t waitpid(pid_t getpid("apt-get"), int *statusPtr, int WUNTRACED);
    } catch(...){}

/* reinstall englightenment */
    system("echo **REINSTALLING**");    
    system("sudo apt-get install enlightenment");
    system("echo **Pid of apt-get**");
    system("pidof apt-get");
    try{
        pid_t waitpid(pid_t getpid("apt-get"), int *statusPtr, int WUNTRACED);
    } catch(...){}

/* logs */
    system("echo && echo Logs for wtf just happened:");
    system("echo && echo ~$ purge_e_output.txt && echo ~$ autoremove_e_output.txt && echo ~$ autoclean_e_output.txt");

} 
```

**编译错误：**

```
~$ g++ JIC.cpp -o JIC

JIC.cpp: In function ‘int main()’:
JIC.cpp:12: error: expected ‘,’ or ‘...’ before ‘(’ token
JIC.cpp:18: error: expected ‘,’ or ‘...’ before ‘(’ token
JIC.cpp:26: error: expected ‘,’ or ‘...’ before ‘(’ token
JIC.cpp:34: error: expected ‘,’ or ‘...’ before ‘(’ token
JIC.cpp:42: error: expected ‘,’ or ‘...’ before ‘(’ token
JIC.cpp:49: error: expected ‘,’ or ‘...’ before ‘(’ token
JIC.cpp:58: error: expected ‘,’ or ‘...’ before ‘(’ token 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T00:06:54.703

这在那个地方没有意义：

```
pid_t waitpid(pid_t getpid("apt-get"), int *statusPtr, int WUNTRACED); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T00:06:49.453

你不能做这个

```
 pid_t waitpid(pid_t getpid("apt-get"), int *statusPtr, int WUNTRACED); 
```

相反，您需要实际创建要传递给此函数的变量的实例。例如

```
 pid_t pid = getpid();
    int status = // set to some value that you choose 
```

然后你可以像这样调用你的函数

```
 pid_t pid2 = waitpid(pid, &status, WUNTRACED); 
```

now`pid2`是函数返回的值`waitpid`。我强烈建议您多阅读一些书籍 - 无论是书籍还是教程 - 因为您的问题表明您还没有很好地掌握这门语言。我的意思是完全没有冒犯的意思——只是想帮忙。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T00:20:28.433

线

```
pid_t waitpid(pid_t getpid("apt-get"), int *statusPtr, int WUNTRACED); 
```

对我和 C++ 编译器来说，看起来都像是一个函数声明。看起来您正试图声明一个名为的函数`waitpid`，其返回类型为`pid_t`，它接受三个参数 a `pid_t`、 an`int*`和 an `int`。但是，参数的名称不能是`getpid("apt-get")`，因此除了这是文件中函数声明的错误位置之外，您不能将其解释为函数声明，因为它试图将函数调用用作范围。

相反，如果您尝试将此行解释为对名为`waitpid`（已定义）的函数的函数调用，`getpid("apt-get")`则作为参数是有意义的，因为这意味着您要将`getpid`函数的结果作为第一个参数传递给`waitpid`函数。但是，该行的其余部分对于函数调用来说是不正确的语法，因为不应内联指定函数调用的参数类型 - 您应该传递已经定义为变量或函数的参数。对函数的语法正确调用`waitpid`可能如下所示：

```
int* statusPtr = ...;
int WUNTRACED = ...;
pid_t myPid = waitpid(getpid("apt-get"), &statusPtr, WUNTRACED); 
```

以下定义可能出现在其他地方：

```
pid_t waitpid(pid_t pid, int *statusPtr, int WUNTRACED) {
    ...
} 
```

# java - html 菜单覆盖 Java 小程序

> ID：11379655
> 
> 赞同：1
> 
> 时间：2012-07-08T00:01:34.603
> 
> 标签：java, iframe, applet

我需要打开一个 html/javascript 导航菜单并覆盖一个 java 小程序。我尝试了无数来自网络的技巧，但似乎都无法与 3 种主要浏览器一起使用：IE、Firefox 和 Safari。这是我到目前为止所做的：我在一个 html 页面中有一个小程序，在 body 标记中有这个：

```
<applet code="arcClientJava.class" height="100%" width="100%"></applet> 
```

我在另一个 html 页面中有导航菜单的代码，它通过 iFrame 调用小程序：

```
<iframe src="applet.html" style="position:absolute; z-index:0;height:500;width:100%"></iframe> 
```

菜单仍然隐藏在 java 小程序下方。请帮忙！

# macos - 为 Iphone HTML5 设置 Apache 的问题

> ID：11379656
> 
> 赞同：0
> 
> 时间：2012-07-08T00:01:43.317
> 
> 标签：macos, apache

我一直在尝试遵循“Beginning Iphone and Ipad Web Apps, Scripting with HTML5, CSS, and javascript”一书，但显然我在正确设置 apache 时遇到了问题。我正在尝试使用 Mac OSX 10.6.8 来做到这一点。也许我只是不明白它应该如何工作，但这是我到目前为止所做的：

添加到主机文件：

```
127.0.0.1 www.app.local
127.0.0.1 www.myapp.local 
```

在 httpd.conf 中：

取消评论：

```
LoadModule php5_module        libexec/apache2/libphp5.so
LoadModule fastcgi_module     libexec/apache2/mod_fastcgi.so 
```

添加：

```
NameVirtualHost *:80

<VirtualHost *:80>
    DocumentRoot /Users/Danger/Server/www
    ServerName www.myapp.local
</VirtualHost> 
```

在我重新启动 apache 之前，当我在浏览器中访问 www.app.local 时，我看到“它可以工作！” 重新启动后，我得到“禁止

您无权访问此服务器上的 /。”

到底是怎么回事？这本书说我应该看到一个空白页，然后在添加 index.php 后包含：

```
<?php 
    phpinfo();
?> 
```

我应该看到一个包含服务器信息的表格，但我仍然看到 Forbidden...

如何解决此问题以获得所需的结果？

# java - 为什么不鼓励使用 sun.misc？

> ID：11379660
> 
> 赞同：3
> 
> 时间：2012-07-08T00:02:32.007
> 
> 标签：java, package, base64

我一直在使用`BASE64Encoder`and `BASE64Decoder`in `sun.misc`; 我正在使用 Eclipse 并且不得不转向警告，因为默认情况下访问仅限于它。

这些课程完美无缺，但在我的工作中，我阅读了很多根本不应该使用的地方，`sun.misc`但没有人说明适当的理由。

我应该远离`sun.misc`，为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T00:05:52.227

没有承诺继续支持这些类；在任何版本中，它们可能会在没有警告的情况下从 JDK 中删除。

此外，并非所有 JDK 都有这些类，因此您的代码可能无法在所有平台上运行，这与 java 的“编译一次，随处运行”理念背道而驰。

# jquery - 获取部分类名并使用正则表达式和 jQuery 定义变量

> ID：11379661
> 
> 赞同：0
> 
> 时间：2012-07-08T00:02:42.623
> 
> 标签：jquery, regex

[http://jsfiddle.net/cYmxB/](http://jsfiddle.net/cYmxB/)

```
$('.change').click(function() {
    $('.link').each(function(e) {
        var color = this.className.match(/color-\w+/gi);
        alert(color);
    });
});​ 
```

我基本上希望这样来提醒使用`\w+`而不是整个字符串找到的正则表达式。我怎样才能做到这一点？

此外，如何在`color-`不删除此实例之后删除正则表达式的情况下删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T00:21:21.437

对颜色使用捕获组：

```
$('.change').click(function() {
    $('.link').each(function(e) {
        var pattern = /color-(\w+)/gi;
        var match = pattern.exec(this.className);
        var color = match[1];
        alert(color);
    });
});​ 
```

[http://jsfiddle.net/cYmxB/1/](http://jsfiddle.net/cYmxB/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T00:31:23.987

您可以使用 javascript 正则表达式循环遍历将返回数组中的组的匹配项。您还可以使用`replace`带有组反向引用的函数来删除颜色-

```
$('.change').click(function() {
    $('.link').each(function(e) {
        // find regex matching groups
        var regex = /color-(\w+)/gi;
        var match;
        while (match = regex.exec(this.className)) {
            alert(match[1]);
        }
        // remove color-
        this.className = this.className.replace(/color-(\w+)/gi, "$1");
    });
}); 
```

[http://jsfiddle.net/cYmxB/2/](http://jsfiddle.net/cYmxB/2/)

# ruby - 本地 Heroku/Ruby/Facebook 开发问题

> ID：11379666
> 
> 赞同：0
> 
> 时间：2012-07-08T00:04:22.710
> 
> 标签：ruby, facebook, heroku, sinatra, koala

更新：请参阅底部的解决方案。

我是 Ruby 和 Heroku 开发的新手。我在 Facebook 上部署了一个带有 Heroku/Ruby 托管的应用程序。Heroku 部署的默认 Ruby/FB 应用程序在 Heroku 上运行时运行良好。但是，当我克隆我的 heroku 应用程序以在本地运行时，我开始遇到问题。

第一个问题是通过添加`require "rubygems"`到我的 app.rb 的顶部来解决的，然后通过添加`set :protection, :except => :frame_options`到 app.rb 来解决 Facebook iFrame 问题。

现在我的问题是，在这些行运行之后，当还没有 access_token 时，@app 为零。

```
@graph  = Koala::Facebook::API.new(session[:access_token])

# Get public details of current application
@app  =  @graph.get_object(ENV["FACEBOOK_APP_ID"]) 
```

这会导致模板渲染因以下错误而中断：

```
NoMethodError - undefined method `[]' for false:FalseClass:
/Users/todd-chapman/Documents/vivid-winter-3317/views/index.erb:7:in `evaluate_source' 
```

我究竟做错了什么？我是否错过了设置本地开发的步骤？

附加信息：这可能与在我的 Facebook 应用程序中启用沙盒模式有关，以便我可以在没有 SSL 的情况下进行本地开发。

谢谢！

解决方案：

我没有足够的代表在提出问题的 8 小时内回答我自己的问题，所以这是我找到的解决方案。

由于我的 Facebook 应用程序处于沙盒模式以支持非 SSL 开发，因此调用`@graph.get_object(ENV["FACEBOOK_APP_ID"])`将不起作用，因为沙盒模式应用程序只能由 Facebook 应用程序管理员访问。因此返回 nil 结果。

长期解决方案是设置 SSL 反向代理，这样我就可以在我的 Facebook 应用程序关闭沙盒模式时进行本地开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T14:02:59.603

解决方案：

由于我的 Facebook 应用程序处于沙盒模式以支持非 SSL 开发，因此对 @graph.get_object(ENV["FACEBOOK_APP_ID"]) 的调用将不起作用，因为沙盒模式应用程序只能由 Facebook 应用程序管理员访问。因此返回 nil 结果。

长期解决方案是设置 SSL 反向代理，这样我就可以在我的 Facebook 应用程序关闭沙盒模式时进行本地开发。这里有一篇很好的文章：http: [//www.subelsky.com/2012/01/my-twelve-factor-app-development.html](http://www.subelsky.com/2012/01/my-twelve-factor-app-development.html)

# jquery - Jquery 不会在 mouseenter 上更改 div 中的文本

> ID：11379667
> 
> 赞同：0
> 
> 时间：2012-07-08T00:04:29.833
> 
> 标签：jquery, html

`<div>`当您将鼠标悬停在不同的位置时，我试图让文本出现在`<li>`一个不同的位置上，`<div>`由于某种原因它不起作用。它应该`data-name`从 the 中获取`<li>`并将其传递给`.pagename_h1`using `html()`...这里的代码：

**项目清单**
`<li id="navIcon" data-name="News"><a class='inline' href="#inline_content"><img src="images/christian.jpg" class="hoverImages"></a></li>`

**项目清单**
`<script>$('.navIcon').hover( function () { $('.pagename_h1').html($(this).attr('data-name')); }); </script>`

**数据名称应以文本形式显示的 div**
`<section class="round"> <div class="pagename_h1"> </div> </section>`

我是否正确使用 CSS 选择器`.pagename_h1`？我应该使用悬停以外的东西吗？不是`.html()`替换文本的正确功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T00:07:01.233

您的 navIcon 是一个 ID 而不是一个类。

将其更改为`$('#navIcon').hover()`

阅读有关[jQuery 选择器](http://api.jquery.com/category/selectors/)的更多信息，特别是[Class Selector](http://api.jquery.com/class-selector/)和[ID Selector](http://api.jquery.com/id-selector/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T00:09:37.017

当您将该 navIcon 设置为 id 时，您正在尝试使用 class = navIcon 检索元素。请尝试以下选择器：

```
$('#navIcon') 
```

# linux - 如何在 Linux 上获取中断向量号？

> ID：11379668
> 
> 赞同：2
> 
> 时间：2012-07-08T00:04:59.857
> 
> 标签：linux, assembly, linux-kernel, x86, hardware

当我运行“cat /proc/interrupts”时，我可以得到以下信息：

```
 CPU0       CPU1
  0:        253       1878   IO-APIC-edge      timer
  1:          3          0   IO-APIC-edge      i8042
  7:          1          0   IO-APIC-edge      parport0
  8:          0          1   IO-APIC-edge      rtc0
  9:          0          0   IO-APIC-fasteoi   acpi
 12:          1          3   IO-APIC-edge      i8042
 16:     681584         60   IO-APIC-fasteoi   uhci_hcd:usb3, nvidia
 17:          0          0   IO-APIC-fasteoi   uhci_hcd:usb4, uhci_hcd:usb7
 18:          0          0   IO-APIC-fasteoi   uhci_hcd:usb8
 22:          2          1   IO-APIC-fasteoi   ehci_hcd:usb1, uhci_hcd:usb5
 23:         17         17   IO-APIC-fasteoi   ehci_hcd:usb2, uhci_hcd:usb6
 44:     146232     472747   PCI-MSI-edge      ahci
 45:        118        115   PCI-MSI-edge      snd_hda_intel
 46:   10038650        842   PCI-MSI-edge      eth1
NMI:      44479      43798   Non-maskable interrupts
LOC:   19025635   29426776   Local timer interrupts
SPU:          0          0   Spurious interrupts
PMI:      44479      43798   Performance monitoring interrupts
IWI:          0          0   IRQ work interrupts
RES: 3442001789 3442627214   Rescheduling interrupts
CAL:       1406       1438   Function call interrupts
TLB:     781318     792403   TLB shootdowns
TRM:          0          0   Thermal event interrupts
THR:          0          0   Threshold APIC interrupts
MCE:          0          0   Machine check exceptions
MCP:       2063       2063   Machine check polls
ERR:          0
MIS:          0 
```

如何获取“NMI”“LOC”“SPU”“PMI”等的中断号

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T04:49:01.060

在 x86`NMIs`上总是在中断向量 2 上。这个数字是硬编码的，就像常见的异常（除以 0、页面错误等）一样。您可以在 Intel/AMD 的 CPU 文档中找到它。

如果`APIC`启用（如问题中提出的转储中的情况），则可以从 APIC 的`SVR`寄存器中获得虚假中断的中断向量号。同样，请参阅相同的 CPU 文档。

如果`APIC`未启用，而是`PIC`正在使用，则寄生中断将作为`IRQ7`（请参阅`8259A`PIC 芯片规范）提供。以 IRQ7 为中断向量的`BIOS`方式对 PIC 进行编程`0Fh`，但 Windows 和 Linux 更改此映射以避免为 IRQ 和 CPU 异常共享相同的中断向量。似乎无法从 PIC 查询此映射，但它是通过将初始化控制字 2 ( `ICW2`) 发送到 PIC 来建立的。以下是相关的 Linux 代码[`init_8259A()`](http://lxr.free-electrons.com/source/arch/x86/kernel/i8259.c#L299)：

```
 /* ICW2: 8259A-1 IR0-7 mapped to 0x30-0x37 on x86-64,
       to 0x20-0x27 on i386 */
    outb_pic(IRQ0_VECTOR, PIC_MASTER_IMR); 
```

那应该回答虚假中断向量部分。

至于`LOC`和`PMI`，我认为这些是本地 APIC 的中断，您可以从 APIC 中找到它们的中断向量，就像上面的伪中断一样。

# java - 将数组列表添加到首选项

> ID：11379669
> 
> 赞同：0
> 
> 时间：2012-07-08T00:05:09.243
> 
> 标签：java, android

我正在尝试将数组列表添加到我的应用程序的首选项中...

起初列表应该是空的，但随后用户可以添加项目，这些项目将保存到首选项中......

然后用户下次启动应用程序时，他会看到他之前创建的列表......

预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:17:15.007

[SharedPreferences.Editor.putStringSet（字符串键，设置值）](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#putStringSet%28java.lang.String,%20java.util.Set%3Cjava.lang.String%3E%29)

# android - Eclipse Juno 和 android maven 插件

> ID：11379670
> 
> 赞同：3
> 
> 时间：2012-07-08T00:05:20.400
> 
> 标签：android, eclipse, maven

让我的一些 android 项目在 eclipse 4.2 上运行我很痛苦，它们在 Indigo 中运行良好，但在 Juno 中运行良好。

我正在使用 android maven 插件，它们也可以从控制台运行良好，使用

```
mvn android:run 
```

但是将项目导入 Juno 后，出现以下错误

```
An internal error occurred during: "Importing Maven projects".
com/android/io/StreamException 
```

和

```
WARNING: unable to write jarlist cache file /path-to-project-bin/jarlist.cache 
```

然后在尝试运行项目时，我在控制台中收到以下错误

```
R.java was modified manually! Reverting to generated version! 
```

并且应用程序在启动时崩溃。

有人看到 Juno 有类似的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T15:31:30.550

[这是m2e-android 连接器](http://rgladwell.github.com/m2e-android)的一个已知问题，由正在处理的 ADT 版本 20.0.0 的更新引起：

[https://github.com/rgladwell/m2e-android/issues/89](https://github.com/rgladwell/m2e-android/issues/89)

* * *

**更新**：今天发布的新 0.4.2 版本修复了这个问题，请运行 Eclipse 更新（帮助 -> 检查更新），如果这能解决您的问题，请告诉我。

# jquery - 谷歌地图 api v3 不显示折线

> ID：11379671
> 
> 赞同：1
> 
> 时间：2012-07-08T00:05:29.570
> 
> 标签：jquery, google-maps-api-3, google-polyline

我正在使用谷歌地图 v3。我使用来自 json 文件的信息创建了一些标记。我正在尝试在我的地图上放置一些路线，但这不起作用，我不知道为什么不这样做。

这是我的 jQuery 代码：

```
var positions = [];
var map;

$(function () {
    map = initializeMap();
    loadMarkers();
    var flightPath = new google.maps.Polyline({
        path: positions,
        strokeColor: "#FF0000",
        strokeOpacity: 1.0,
        strokeWeight: 2
    });

    flightPath.setMap(map);
});

function initializeMap() {
    var myOptions = {
        center: new google.maps.LatLng(41.376809, -37.441406),
        zoom: 3,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
            myOptions);

    return map;

};

function loadMarkers() {
    var latlng;
    var marker;
    var image = 'img/praline.png';
    $.getJSON('json/markers.json', function (data) {
        $(data).each(function (index, value) {
            latlng = new google.maps.LatLng(value.x, value.y);
            marker = new google.maps.Marker({
                position: latlng,
                map: map,
                title: value.title,
                icon: image
            });
            positions[value.id - 1] = latlng;

        });

    });

} 
```

这里是我的 json 文件：

```
[
    {
        "class":"marker",
        "id":1,
        "x":"47.175303",
        "y":"7.064539",
        "title":"Camille Bloch",
        "date":"21/10/2010",
        "details":"<h1>Camille Bloch</h1><h4>Courtelary, CH</h4><img src='img/camille_bloch.gif' alt='Camille Bloch' width='100px'>"
    },
    {
        "class":"marker",
        "id":2,
        "x":"51.903421",
        "y":"4.483248",
        "title":"Haven Rotterdam",
        "date":"22/10/2010",
        "details":"<h1>Haven Rotterdam</h1><h4>Rotterdam, NL</h4><img src='img/camille_bloch.gif' alt='Camille Bloch' width='100px'>"
    }
] 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T00:22:56.200

由于 AJAX 是异步的，因此您需要将折线放在 getJSON 回调中（在实际创建 LatLngs 之后），如下所示，或者一些变体。否则代码只是为折线设置一个空的位置数组。

```
$.getJSON('json/markers.json', function(data) {
    function(data) {

        $(data).each(function(index, value) {
            alert(value.x);
            latlng = new google.maps.LatLng(value.x, value.y);
            marker = new google.maps.Marker({
                position: latlng,
                map: map,
                title: value.title,
                icon: image
            });
            positions[value.id - 1] = latlng;

        });

        var flightPath = new google.maps.Polyline({
            path: positions,
            strokeColor: "#FF0000",
            strokeOpacity: 1.0,
            strokeWeight: 2
        });

        flightPath.setMap(map);

    });​
} 
```

# credentials - 从网站登录网站

> ID：11379675
> 
> 赞同：0
> 
> 时间：2012-07-08T00:05:45.413
> 
> 标签：credentials

我有一个 webapp 可以保存网站 B 的凭据（用户和通行证）。是否可以单击 A 中的链接并让我在新的浏览器窗口中登录到站点 B？

例如：假设 A 有我的 pinterest 用户并通过。如果我单击 A 中显示“登录 pinterest”的链接，是否可以打开一个新窗口并让我像登录一样开始浏览 pinterest？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T00:09:06.207

如果相关站点为您提供某种接口（如 OAuth）来执行此操作，则这是可能的。您不能只在其他网站的常规登录表单中为用户提交数据。（假设他们有一些 CSRF 保护，他们应该这样做。）

# c++ - 使用 lua_newthread 在 C++ 中相当于 Lua coroutine.create

> ID：11379676
> 
> 赞同：3
> 
> 时间：2012-07-08T00:05:49.967
> 
> 标签：c++, lua

我有一个回调系统，它可以将 lua 函数添​​加到 C++ 处理程序，例如在 lua 中我可以做

```
myCObject:AddCallback(luaFunc) 
```

对于协程，我也有相同的

```
myCObject:AddCallback(coroutine.create(luaFunc)) 
```

然后我可以使用

```
lua_State * pThread = lua_tothread(L, -1);
lua_resume(pThread, 0,0); 
```

在 C++ 中

启动/恢复 lua 函数。

现在，我不想要求脚本编写者编写 coroutine.create(luaFunc) - 我只想自动将 lua func“转换”为协程。当 AddCallback 被调用时，我在堆栈上有 luaFunc - 然后我该如何继续？（使用 coroutine.create 我已经在堆栈上有一个线程）

编辑：我正在寻找使用 C API 的解决方案，例如 lua_newthread

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-08T17:48:13.400

这个想法很简单。首先，您创建一个新线程。

```
lua_State *pThread = lua_newthread(L); 
```

此函数还将该线程推送到`L`. 下一步是将你的线程函数放到`pThread`. 鉴于此时堆栈上有一个 Lua 函数，下一步就是将该函数转移到`pThread`堆栈中。

有一个专门用于在线程之间传输值的函数：[`lua_xmove`](http://www.lua.org/manual/5.2/manual.html#lua_xmove). 但是，它只传输堆栈的顶部元素。因此，您需要将 Lua 函数从它位于`L`' 堆栈的位置复制到 ' 堆栈的顶部`L`。然后`lua_xmove`它到新的堆栈。

```
lua_pushvalue(L, #); //Where # is the index in the stack where the function is.
                     //Remember that lua_newthread pushed a value on the stack, so compensate for that.
lua_xmove(L, pThread, 1); //Moves the function to the top of the new stack. 
```

请记住，`lua_xmove` *移动*值，将其从`L`. 所以`lua_pushvalue`推送值，然后`lua_xmove`弹出它。所以堆栈的顶部再次由`lua_State`表示`pThread`。

之后，将您需要发送的所有参数推送到函数（显然为零），然后恢复它。

```
lua_resume(pThread, 0, 0); 
```

总代码：

```
lua_State *pThread = lua_newthread(L);
lua_pushvalue(L, #); //Where # is the index in the stack where the function is.
                     //Remember that lua_newthread pushed a value on the stack, so compensate for that.
lua_xmove(L, pThread, 1); //Moves the function to the top of the new stack.
lua_resume(pThread, 0, 0); 
```

* * *

Lua 线程（无论是在 Lua 中创建还是在 C API 中创建的）是一个 Lua 值，就像一个表、用户数据、字符串等。因此，它受到垃圾回收的影响。当 Lua 检测到没有更多对该值的引用时，它将被收集。

记住：`lua_newthread`将线程推入原始堆栈。您可以将其复制到注册表、全局环境或您打算永久驻留该线程的任何位置。简单地保留一个指向`lua_State`它生成的指针*并不能*确保线程保持活动状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T00:17:29.853

`lua`好久没做太多东西了，所以有点生疏了。但是，我认为你想要做的是：

*   提取`luaFunc`
*   然后推`coroutine.create`功能
*   然后推`luaFunc`回
*   并用于`lua_pcall`将您的线程放在堆栈上。

根据您的评论，您想使用`lua_newthread`. 我没有任何经验，但我确实找到[了这个答案](https://stackoverflow.com/questions/7206411/lua-co-routines)，其中包含一个正在使用它的示例程序。

# android - ANDROID 首选项列表首选项动态更改值

> ID：11379677
> 
> 赞同：1
> 
> 时间：2012-07-08T00:05:52.073
> 
> 标签：android, preferences, listpreference

我正在尝试根据是否选中复选框来更改列表首选项的条目值...

```
 SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(this);{
    if(sharedPrefs.getBoolean("french", false))
    {

        Preference newsPref = (Preference) findPreference("news_feed");
        newsPref.setDefaultValue("@array/newsfeedfr");

    }
    else
    {
        Preference newsPref = (Preference) findPreference("news_feed");
        newsPref.setEntryValues("@array/newsfeed");

    }

    } 
```

我在 .setEntryValue 上遇到错误：

```
The method setEntryValues(String) is undefined for the type Preference 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T00:13:13.943

您遇到的一个问题是如何引用数组值。`@array/newsfeed`用于 XML 文件，而不是 Java！

您可能想要使用`getResources().getStringArray(R.array.newsfeed)`或类似的。[来源](http://developer.android.com/guide/topics/resources/string-resource.html)。

另一个问题是`setEntryValues()`未定义为`Preferences`，您需要初始化为 a `ListPreference`。

# linux - 重定向对重启命令的影响

> ID：11379679
> 
> 赞同：0
> 
> 时间：2012-07-08T00:06:15.740
> 
> 标签：linux, redirect, reboot, busybox, openwrt

我在基于 mips 的系统（特别是路由器上的 openwrt）上运行 linux。

当我运行重新启动（由busybox 提供），即`reboot`它自己运行时，系统重新启动，但某些服务（网络服务器、dhcp/dns、dsl 的东西）没有启动。

但是，当我通过 Web 界面重新启动时，所有服务都正常启动。我查看了代码，发现 Web 界面运行`reboot > /dev/null 2>&1`。运行此命令还会重新启动并正确启动服务。

我的问题是如何将 stdout 和 stderr 重定向到 /dev/null 影响下次启动时服务的启动？

另外，我想知道，重启是否包含特定于架构的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T00:09:28.153

不，重定向 stdout/stderr 一定不能影响引导过程（无论如何，它会保存在哪里？）。一定是有别的原因造成的。

“shutdown -r now”有效吗？

# actionscript-3 - 基于地图的游戏通过 hitTestPoint 进行 AS3 碰撞检测

> ID：11379683
> 
> 赞同：1
> 
> 时间：2012-07-08T00:06:43.787
> 
> 标签：actionscript-3, flash

我正在尝试为具有地图中不可行走的角色、敌人和物体的游戏找出执行 hitTestPoint 的最佳方法。

我创建了一个有效的版本，可以在这里看到：http: [//www.hosted101.net/hit/mapHitTest.html](http://www.hosted101.net/hit/mapHitTest.html)（箭头键移动，你是正方形）。

使用之前建议的方法，我创建了地图上所有对象的第二个版本，增加了一半的播放器大小，并从播放器的 centerX 和 centerY 运行 hitTestPoint。

这很棒，而且效果很好。

但是，我觉得这不是最佳的，创建所有这些额外的“边界框”可能是不必要的，即使用户看不到它们。

所以，我创建了第二个版本。这次没有边界框： http: [//www.hosted101.net/hit/mapHitTestNew.html](http://www.hosted101.net/hit/mapHitTestNew.html)（箭头键移动）。

由于它仍然从玩家的 centerX 和 centerY 运行，如果你接近一个物体但在 centerX/Y 以下，你将能够穿过它。

我的问题是这样的：在这样的游戏中，要在这样的游戏中 hitTest 对象与玩家/敌人/任何东西，最好的方法是什么？（对于这个简单的项目有一个固定的例子会很棒）

它真的是使用额外的边界框创建地图图层的副本，还是可以以更干净的方式完成？

我的代码在下面，用于 mapHitTestNew。

谢谢。

```
var moveL:Boolean = new Boolean
var moveR:Boolean = new Boolean
var moveU:Boolean = new Boolean
var moveD:Boolean = new Boolean
var moveSpeed:int = 2

stage.addEventListener(KeyboardEvent.KEY_DOWN, updateKeysDown)
stage.addEventListener(KeyboardEvent.KEY_UP, updateKeysUp)

function updateKeysDown(e:KeyboardEvent){
var _keyCode = e.keyCode
switch (_keyCode){
    case 37:
    moveL = true;
    break;

    case 38:
    moveU = true;
    break;

    case 39:
    moveR = true;
    break;

    case 40:
    moveD = true;
    break;
}
collisionCheck()
}

function updateKeysUp(e:KeyboardEvent){
var _keyCode = e.keyCode
switch (_keyCode){
    case 37:
    moveL = false;
    break;

    case 38:
    moveU = false;
    break;

    case 39:
    moveR = false;
    break;

    case 40:
    moveD = false;
    break;
}   
}

/**
***
*** Hit Test
***
***
**/

function collisionCheck():void{
var _MC:MovieClip = new MovieClip;
_MC.x = player.x
_MC.y = player.y
_MC.mouseEnabled = false

var centerX:Number = _MC.x + (player.width/2)
var centerY:Number = _MC.y + (player.height/2)

if(moveL){
    trace("Stage 1 Move")
    centerX -= moveSpeed
    if(map.hitTestPoint((centerX-player.width/2), centerY, true)){
        trace("Stage 1 HIT TEST!")
        moveL = false
    }
}
if(moveR){
    trace("Stage 2 Move")
    centerX += moveSpeed
    if(map.hitTestPoint((centerX+player.width/2), centerY, true)){
        trace("Stage 2 HIT TEST!")
        moveR = false
    }
}
if(moveU){
    trace("Stage 3 Move")
    centerY -= moveSpeed
    if(map.hitTestPoint(centerX, (centerY-player.height/2), true)){
        trace("Stage 3 HIT TEST!")
        moveU = false
    }
}
if(moveD){
    trace("Stage 4 Move")
    centerY += moveSpeed
    if(map.hitTestPoint(centerX, (centerY+player.height/2), true)){
        trace("Stage 4 HIT TEST!")
        moveD = false
    }
}
refreshMovement()
}

function refreshMovement():void{
if(moveL){
    player.x -= moveSpeed
}
if(moveR){
    player.x += moveSpeed
}
if(moveU){
    player.y -= moveSpeed
}
if(moveD){
    player.y += moveSpeed
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T08:54:17.180

听起来你正在做一种俯视图（考虑到你的盒子在 X 和 Y 方向移动）。我会有一个包含 0 和 1 的二维数组（真/假）。当您的角色四处移动时，查看您的角色命中框以查找它所占据的图块，通常为 1 到 4 个图块。

如果在这些位置中的任何一个有 TRUE，那么他正在击中某些东西。这样，您只需要活动对象上的命中框（它们移动等）

我还将查看这篇文章，并实施似乎最适合您的解决方案：

[http://higherorderfun.com/blog/2012/05/20/the-guide-to-implementing-2d-platformers/](http://higherorderfun.com/blog/2012/05/20/the-guide-to-implementing-2d-platformers/)

# ruby-on-rails - 在 Vim 的状态栏中显示 Rails 测试的状态？

> ID：11379691
> 
> 赞同：3
> 
> 时间：2012-07-08T00:08:33.423
> 
> 标签：ruby-on-rails, vim

是否有任何已知的 Vim 插件可以通过分别显示绿色或红色条来显示 Rails 测试是通过还是失败。我个人觉得 Growl 通知很让人分心，正在寻找替代方案，但找不到任何东西。[与此类似的东西是我的目标。](http://vimeo.com/8569257).

**编辑：我在 OSX 10.6 上使用 MacVim**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:18:43.837

这是我的`$VIMFILES/ftplugin/python/tests.vim`文件中的内容：

```
function! RunAllTests(args)
    silent ! echo -e "\033[1;36mRunning all unit tests\033[0m"
    if filereadable(getcwd() . "/runtests.py")
        set makeprg=./runtests.py\ --with-machineout
    elseif filereadable(getcwd() . "/manage.py") && filereadable(getcwd() . "/settings.py")
        set makeprg=./manage.py\ test\ --with-machineout\ --verbosity=0
    else
        set makeprg=nosetests\ --with-machineout
    endif
    exec "make! " . a:args
endfunction

function! JumpToError()
    if getqflist() != []
        for error in getqflist()
            if error['valid']
                break
            endif
        endfor
        let error_message = substitute(error['text'], '^ *', '', 'g')
        silent cc!
        if error['bufnr'] != 0
            exec ":sbuffer " . error['bufnr']
        endif
        call RedBar()
        echo error_message
    else
        call GreenBar()
        echo "All tests passed"
    endif
endfunction

function! RedBar()
    hi RedBar ctermfg=white ctermbg=red guibg=red
    echohl RedBar
    echon repeat(" ",&columns - 1)
    echohl None
endfunction

function! GreenBar()
    hi GreenBar ctermfg=white ctermbg=green guibg=green
    echohl GreenBar
    echon repeat(" ",&columns - 1)
    echohl None
endfunction

let maplocalleader=","
nmap <LocalLeader>a :call RunAllTests("--machine-out")<cr>:redraw<cr>:call JumpToError()<cr>
nmap <LocalLeader>A :call RunAllTests("")<cr> 
```

我最初基于 Gary 的 .vimrc，然后移动了一些东西并重新编码了显示条的方法。

我确信它可以很容易地适应 ruby​​ 以及它用于测试运行的任何东西（我不是 ruby​​ 人）。这目前使用[nosetests](http://nose.readthedocs.org/en/latest/index.html)来运行python 测试。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T10:33:24.967

你试过`Autotest::Screen`吗？

我不是红宝石人，但诀窍并没有那么复杂。您需要做的就是检测特定项目目录下的文件更改，运行您的测试，然后将测试结果带回屏幕的状态栏。

# jquery - 将 jquery 与 browserify 一起使用

> ID：11379692
> 
> 赞同：7
> 
> 时间：2012-07-08T00:08:41.777
> 
> 标签：jquery, node.js, browserify

我正在尝试通过模块 jquery-browserify 将 jQuery 与 browserify 一起使用。我在我的 client.js 脚本中需要该模块：

```
 var $ = require('jquery-browserify'); 
```

当我运行我的节点服务器时，在我运行 browserify 之后，我收到“未定义窗口”错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-11-09T09:27:19.720

jQuery 现在与 CommonJS 兼容，从 2.1.0 版本开始

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-19T06:26:02.760

Browserify 可以使用转换处理 CommonJS 模块以及 AMD 模块，`deamdify`因此现在应该不需要使用 shim。

需要明确的是，我只注意到 JQuery 2.0.0 中的 AMD 支持

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T15:06:30.480

jQuery 不兼容 CommonJS，即它不会通过`module.exports = $`until导出自己`2.1.0`。

因此，您需要通过[browserify-shim](https://github.com/thlorenz/browserify-shim)对其进行填充。

`browserify-shim`将**动态填充任何版本的 jquery 或任何其他非 CommonJS 库**，如 Zepto。自述文件中包含有关如何设置的详细信息。

作为替代方案，您也可以使用[jquery-browserify](https://github.com/jmars/jquery-browserify)，但是您将被绑定到该模块使 CommonJS 兼容的 jQuery 版本。

# .net - 使用泛型创建有意义的参数名称

> ID：11379694
> 
> 赞同：5
> 
> 时间：2012-07-08T00:08:57.330
> 
> 标签：.net, generics

我希望有一些聪明的方法来做到这一点。我有一个通用的基础服务，它有几个方法......所以目前这个基类中有一些方法，比如 Create(T obj)。我希望编译器创建一个更直观的参数名称（基于某些规则），以便在创建基本服务的具体实例时如下所示：

```
public class ProductService : BaseService<Product> 
```

我希望它将 ProductService 方法编译为此（例如）：

```
public Product Create(Product product) 
```

代替

```
public Product Create(Product obj) 
```

我知道这听起来很小，但前几天一位实习生问我，我不能百分百地告诉他这是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T00:48:48.603

据我所知，没有办法自动实现这一点。但是，如果你真的想这样做，你可以在 中创建方法`virtual`，`BaseService`并在每个子类中覆盖它：

```
public override Product Create(Product product) {
    return base.Create(product);
} 
```

# matlab - Matlab中的surf（）只显示两种颜色而不是多种颜色

> ID：11379696
> 
> 赞同：0
> 
> 时间：2012-07-08T00:09:06.627
> 
> 标签：matlab, colors, plot, surf, variations

我正在使用以下代码行进行绘图：

```
nthTheta=1;
gammaSurf=reshape(gamma(:,nthTheta,:),size(gamma,1),size(gamma,3));
figure
[spatial_lag,temporal_lag]=meshgrid(distance,4:4:12);
surf(gammaSurf,spatial_lag',temporal_lag')
colorbar
xlabel('Spatial Lag','Fontweight','Bold')
ylabel('Temporal Lag','Fontweight','Bold')
zlabel('\gamma (h,t)','Fontweight','Bold')
title('Spatiotemporal Empirical Variogram','Fontweight','Bold') 
```

该`gammaSurf`矩阵具有以下值，表明其值正在变化：

![在此处输入图像描述](../Images/ca375a907fef908d7337d1e2e1caadc8.png)

我得到以下图，只有两种颜色，而不是多种颜色：

![在此处输入图像描述](../Images/5f3be33fc04b7e7002421282dd6e6acd.png)

我做错了什么，因为我没有得到我期望的具有多种颜色变化的情节吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T02:19:07.097

设置要插值的[阴影：](http://www.mathworks.com/help/techdoc/ref/shading.html)

```
shading(gca,'interp'); 
```

应该做的伎俩。

实际上，看起来您的论点`surf`顺序错误。如果您希望 z 轴应用于 gammasurf 值，则需要是第三个参数。

```
surf(spatial_lag',temporal_lag',gammasurf); 
```

最后一个建议：如果您确实是`gammasurf`想成为 x 值，但您希望那些定义颜色，请将其用作第四个参数 ( `C`)：

```
surf(gammasurf,spatial_lag',temporal_lag',gammasurf); 
```

现在表面将像图像中一样定向，但颜色随 x 值而不是 z 值变化。

# html - 弹出窗口中的 HTML/CSS Div 标签对齐问题

> ID：11379701
> 
> 赞同：0
> 
> 时间：2012-07-08T00:09:45.783
> 
> 标签：html, css

我一直在为 div 对齐而苦苦挣扎。我有一个弹出窗口，其中有 4 个内联块 div。现在当它们都没有内容时，对齐似乎很好。但是，只要我在其中一个 div 中添加一些输入按钮标签，那个特定的 div 就会失去对齐。

这是[jsfiddle中的 HTML/CSS](http://jsfiddle.net/L3LN7/2/)

关于 CSS 有什么问题的任何建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T00:38:07.677

给 .selectDiv "vertical-align:top;" 和 .vBtnBar "margin:10px;"

# ruby-on-rails - Rails 3嵌套路由形成问题

> ID：11379703
> 
> 赞同：0
> 
> 时间：2012-07-08T00:10:20.037
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我一直在浏览所有其他问题和答案，但无济于事。

我的表格是这样开始的：

```
<% @new_article = company.news.new %>
<%= form_for(@new_article, {:url => [company, @new_article]}) do |news_form| %> 
```

错误是这样的：

```
Routing Error

No route matches {:action=>"show", :controller=>"news", :company_id=>nil, :id=>2} 
```

耙路线是这样说的：

```
 company_news_index GET    /companies/:company_id/news(.:format)                                        
                                         {:action=>"index", :controller=>"news"} 
                              POST   /companies/:company_id/news(.:format)                                        
                                         {:action=>"create", :controller=>"news"}
             new_company_news GET    /companies/:company_id/news/new(.:format)                                    
                                         {:action=>"new", :controller=>"news"}
            edit_company_news GET    /companies/:company_id/news/:id/edit(.:format)                               
                                         {:action=>"edit", :controller=>"news"}
                 company_news GET    /companies/:company_id/news/:id(.:format)                                    
                                         {:action=>"show", :controller=>"news"}
                              PUT    /companies/:company_id/news/:id(.:format)                                    
                                         {:action=>"update", :controller=>"news"}
                              DELETE /companies/:company_id/news/:id(.:format) 
```

问题是，它在我网站的一个区域运行得很好。显然它没有正确设置 company_id，但是当我手动设置它时，它似乎没有解决任何问题。我觉得我已经尝试了每一种解决方案——但考虑到它在网站的其他地方也能工作，我很困惑为什么它不能在一个地方工作。（公司已定义 - 在这种情况下它的 id 为 2）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T02:53:27.167

尝试使用

```
company.news.build 
```

而不是新的。之后，您不需要做任何特别的事情：

```
<% @new_article = company.news.build %>
<%= form_for([company, @new_article]) do |news_form| %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T15:03:57.940

即使公司已定义，并通过实例变量传递给部分 - 并且对于页面中的其他内容似乎很好（正常运行）。当我做类似的事情时：

```
<% @c = Company.find_by_id(company.id) %>
<% @new_article = @c.news.build %>
<%= form_for([@c, @new_article]) do |news_form| %> 
```

它工作正常。很奇怪。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-08T01:34:33.930

你需要一个 company.id <%= form_for(@new_article, {:url => [company.id, @new_article]}) 做 |news_form| %>

# php - 使用 javascript 和 AJAX 进行数据库过滤

> ID：11379706
> 
> 赞同：0
> 
> 时间：2012-07-08T00:11:41.710
> 
> 标签：php, javascript, jquery, sql, ajax

我一直在阅读和观看很多关于 javascript、jquery 和 AJAX 的教程，但我似乎无法理解如何像 unlim500 中的这些人那样制作“过滤器”。

他们的脚本允许您只需单击一个品牌，然后表格就会被过滤和刷新（无需重新加载页面）。

此页面上的实时示例，单击**Все марки**： [http ://www.unlim500.ru/results/](http://www.unlim500.ru/results/)

![在此处输入图像描述](../Images/880494f7d11b4934148606ed78722bde.png)

谁能引导我走向正确的方向？

我怎样才能制作这样的过滤器？

**索引.php =**

```
<a id="bugatti_link" href="#" database_id="Bugatti">Bugatti</a>

<script>
$("#bugatti_link").click(load_ajax);

function load_ajax(e) {
    var link = $(e.target); 
    var vehicle_database_id = link.attr("database_id");
    var ajax_params = {"brand": vehicle_database_id};
    $.getJSON("query2.php", ajax_params, success_handler)
}

function success_handler(data) {
    //data variable contains whatever data the server returned from the database.
    //Do some manipulation of the html document here. No page refresh will happen.
}
</script> 
```

**查询2.php =**

```
<?php
$host = "xx";
$user = "xx";
$db   = "xx";
$pass = "xx";

$pdo = new PDO("mysql:host=" . $host . ";dbname=" . $db, $user, $pass);

$rows = array();
if(isset($_GET['brand'])) {
    $stmt = $pdo->prepare("SELECT brand FROM cars WHERE brand = ? ");
    $stmt->execute(array($_GET['brand']));
    $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);
}
echo json_encode($rows);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T00:29:34.967

您链接的实际页面使用锚点来创建指向某些 javascript 的链接。我过去这样做的方法（和 imo 更简单的方法）是创建一个没有 href 指向同一页面的链接（以避免重新加载），并将点击事件附加到链接上，这将触发您的 ajax 调用。

例如 - HTML - 要点击的链接

```
<a id="bugatti_link" href="#" database_id="2">Bugatti</a> 
```

然后在jQuery中

```
$("#bugatti_link").click(load_ajax);

function load_ajax(e) {
    var link = $(e.target);
    var vehicle_database_id = link.attr("database_id");
    var ajax_params = {"id": vehicle_database_id};
    $.getJSON("the/url/to/the/database/view", ajax_params, success_handler)
}

function success_handler(data) {
    //data variable contains whatever data the server returned from the database.
    //Do some manipulation of the html document here. No page refresh will happen.
} 
```

在服务器上，您将收到一个 GET 请求，`the/url/to/the/database/view`该请求将有一个名为“id”的参数，其值为“2”，因此您可以在第 2 行获取车辆并从该车辆返回您想要的任何数据。

希望这可以让您深入了解如何将常规链接转换为 ajax 加载器，该加载器可用于更新页面而无需重新加载。

关于这类事情的一些有用的链接：

*   [jQuery ajax 调用](http://api.jquery.com/jQuery.ajax/)

*   并且对于这种用法更有用，[jQuery getJSON](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T00:54:28.677

您可以使用 jquery 插件来实现排序功能。其中之一是[tablesorter 插件](http://tablesorter.com/docs/)

您所要做的就是下载 jquery 和 tablesorter.js，然后将它们包含在您的页面中。下面的代码假定您在拥有正在运行的文件的同一文件夹中拥有 jquery 和 tablesorter：

```
<script type="text/javascript" src="jquery.js"></script> 
<script type="text/javascript" src="tablesorter.js"></script> 
```

将 id 添加到您的表中：

```
<table id="myTable"> 
```

然后在文档加载时使用 tablesorter：

```
<script>
$(function(){
 $("#myTable").tablesorter(); 
});
</script> 
```

# php - 使用 SELECT * FROM col WHERE

> ID：11379714
> 
> 赞同：1
> 
> 时间：2012-07-08T00:15:12.310
> 
> 标签：php, mysql

我为关键字设置了一个数据库表。列是 -

> 关键字ID | 关键字1 | 关键字2 | 关键字3 | 关键字4 | 问题ID

我想通过网站为用户提供查找问题并进行编辑的功能。我认为目前最好的方法是让用户通过输入关键字来搜索问题。当我使用

```
SELECT * FROM keywords WHERE keyword1="first_search_word" 
```

它有效，但是当我尝试相同但

```
WHERE keyword2="first_search_word" 
```

它不返回任何东西，即使它们存在。我也尝试使用`OR`(or `||`) 但也找不到任何相关信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T00:23:22.430

与关键字 1 相关的关键字 ID 是什么？

无论如何，这不是解决您的问题的正确方法。听起来您想要每个问题都可以与多个标签相关联的标签，对吗？这称为多对多关系，需要超过 1 个表。你会需要：

*   带有 2 列 tagId 和 tag 的标签表
*   一个至少有 2 列的问题表，questionId 和 question
*   带有 2 列 tagId 和 questionId 的 tags_questions 连接表。

要查找具有特定标签的问题，首先在标签表中查找 tagId。然后做一个`SELECT questionId from tags_questions where tagId = $tagId`. 要根据关键字而不是特定标签进行查找，您可以这样做`SELECT questionId FROM tags_questions WHERE tagId IN (SELECT tagId FROM tags WHERE tag LIKE "%{$keyword}%")`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T00:28:56.353

> 当我使用
> 
> `SELECT * FROM keywords WHERE keyword1="first_search_word"`
> 
> 它有效，但是当我尝试相同但
> 
> `WHERE keyword2="first_search_word"`
> 
> 它不返回任何

但你也说

> 列是keywordID、keyword1、ky2、ky3、ky4、questionID

因此，您实际上并没有一个名为的列`keyword2`，因此没有匹配项也就不足为奇了。当然，除非您在问题中输入错误的某些值 - 如果是这种情况，您应该重写您的问题

# language-agnostic - 基于角色的访问控制系统中是否存在组？

> ID：11379716
> 
> 赞同：1
> 
> 时间：2012-07-08T00:15:37.570
> 
> 标签：language-agnostic, rbac

我了解在基于角色的访问控制系统 (RBAC) 中，组织内的角色由角色表示。然后，每个角色都包含不同的任务（访问权限）以在应用程序中执行操作。然后根据其工作职责为组织中的每个用户分配一个或多个角色。

我不明白的是 RBAC 中是否存在组。我目前正在设计一个可以为用户分配一个或多个角色的系统。然后可以将用户分为 1 个或多个组（例如，程序员、12 楼的人、穿着金属 T 恤的人、国际象棋俱乐部的成员等），但这些组不包含任何角色或访问权限。

RBAC 中是否存在组？如果是这样，组是否应该包含由组成员继承的权限和角色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T06:18:25.267

好吧，我不能过多地谈论理论方面，但我可以说，至少对于我知道的 RBAC 实现，这个抽象的“组”可以使用角色之间的继承来实现。意思是，您可以拥有角色 prj_A_developers（可以说可以“提交”文件，更改任务管理系统中的问题等），prj_A_testing（可以说，可以将问题更改为某些状态（QA 通过/拒绝/重新打开） /等），等等...）。现在您可以拥有 prj_A_admin，它是 prj_A_testing 和 prj_A_developers 的父角色。用户分配的此角色将继承此角色的所有子元素 - 无论是其他角色、直接“任务”等。

继承有点相反，因为您习惯于面向对象编程的“继承”概念，但我认为它仍然很清楚。

我认为使用这种继承可以实现这个“组”概念。

# hadoop - 输入拆分大小是恒定的还是取决于逻辑记录？

> ID：11379718
> 
> 赞同：1
> 
> 时间：2012-07-08T00:15:46.733
> 
> 标签：hadoop, mapreduce, hdfs

Hadoop权威指南 说：

```
When you have Minimum split size 1, Maximum split size Long.MAX_VALUE, Block 
size 64MB then the Split size is 64MB. 
```

TextInputFormat 的逻辑记录是行。由于每行长度不同，我们如何才能将大小精确分割为 64MB？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T00:24:52.337

HDFS 块是字节序列。他们不知道线条或任何其他结构。所以你可能有一个只由一个块组成的分割（当然大小为 64MB），在一行的中间结束（即不包括整个最后一行）。当您使用 TextInputFormat 读取它时，它也会注意从下一个块中读取一些字节，以便您也获得整个最后一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T06:21:12.033

始终遵循 2 条规则：

1.  确定您是否在记录中间
2.  可以覆盖该记录并读取下一条完整记录

记录的前半部分作为上一个 InputSplit 的最后一条记录

# jquery - 以数组形式获取输入值

> ID：11379719
> 
> 赞同：0
> 
> 时间：2012-07-08T00:15:54.827
> 
> 标签：jquery, html, serialization

我正在制作一个网站，我需要将多个值提交到一个 php 文件。因为我可以使用 $('input') 选择输入并使用 ajax 调用提交，所以我没有制作表单元素。

我有一个函数，我想在其中提取所有输入值并将结果作为数组

我尝试调用`$('input').serialize();`并将结果设置为，`$values`但它没有返回一个数组，并且我的一些值丢失了（比如选择标签中的值）

从不属于任何表单元素的所有输入字段中获取数组的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T00:22:56.827

首先，您的`select`标签被遗漏的原因是因为您需要使用以下选择器：

```
$('input, select') 
```

其次`.serializeArray()`用作

```
$('input, select').serializeArray(); 
```

第三，您需要为元素提供`name`属性。见[http://jsfiddle.net/pratik136/YV4Xe/](http://jsfiddle.net/pratik136/YV4Xe/)

编辑：通常选择输入字段的更好方法是使用[`:input`](http://api.jquery.com/input-selector/)@elclanrs 建议的选择器

```
$(':input').serializeArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T00:34:50.727

您使用的选择器`inputs`不是有效的 HTML 标记。您必须手动列出您希望序列化的每种输入类型。

```
$('input, select, textarea').serialize(); 
```

# c# - 难以结合使用基本构造函数和非静态字段

> ID：11379720
> 
> 赞同：2
> 
> 时间：2012-07-08T00:15:59.933
> 
> 标签：c#, constructor

我被这个问题解决了太多次，所以我决定分享一下，看看你们的想法，让我们看看下面的（愚蠢的）例子：

```
public delegate void ToRun();
class Runner {
    ToRun tr;
    public Runner(ToRun f) {
        tr=f;
    }
    public void run() {
        tr();
    }
}
class CountingRunner : Runner {
    ToRun tr;
    int i;
    public CountingRunner(ToRun f) : base(f+=inc) {
        i=0;
    }
    private static void inc() {
        i++; //COMPILATION ERROR - i is not (and logically cannot be) static!
    }
} 
```

好吧，我想问的是：

**Q1**：为什么 base() 参数必须是静态的？

**Q2**：如果像我的例子一样，我们想将非静态字段或方法与对基本构造函数的调用结合起来怎么办？什么是最 OOP 的方式来做到这一点？

**注意**：尽量不要提供像“只是不要使用基础 c'tor”这样的创可贴解决方案，因为可能会有更复杂的情况使用基础是不可避免的，所以我正在为此寻找一个合理的精心设计的解决方案。

谢谢！

**更新**：我的例子太容易破解，所以我觉得我学得还不够，所以让我们试着再举一个（仍然很愚蠢）的例子：

```
public delegate int HashFunc<E>(E e);
public interface HashTable<E> {
    void insert(E e);
    bool isMember(E e);
} 
class HashArray<E> : HashTable<E> where E : IComparable<E> {
    private E[] a;
    private bool[] taken;
    public readonly int n;
    public int size {
        get { return n; }
    }
    HashFunc<E> hash;
    public HashArray(int m , HashFunc<E> hash ) {
        n=2*m;
        a=new E[n];
        taken=new bool[n];
        for (int i=0 ; i<n ; i++) taken[i]=false;
        this.hash=hash;
    }
    public void insert(E e) {
        int index=hash(e),i;
        for (i=index ; i<n && taken[i]!=false ; ++i) ;
        if (i>=n)
            for (i=0 ; i<index && taken[i]!=false ; ++i) ;
        if (i>=index) return;
        taken[i]=true;
        a[i]=e;
    }
    public bool isMember(E e) {
        int i=hash(e);
        for ( ; i<n && taken[i]!=false && a[i].CompareTo(e)!=0 ; ++i );
        if (i>=n || taken[i]==false) return false;
        return true;
    }
}
class HashArrayInt : HashArray<int> {
    public HashArrayInt(int n) : base (n,HashFunc) {
    }
    public static int HashFunc(int i) {
        return (i%n);// n is a non static field, every hash table has its own size!
    }
} 
```

在这个例子中，我们为哈希函数未知的哈希表提供了一些奇怪的实现，以及具有预定义哈希函数的整数哈希表的特殊类，请注意，这里我们需要再次组合哈希表 n 的非静态大小和基础c'tor...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T00:27:25.037

> Q1：为什么 base() 参数必须是静态的？

它们必须是静态的，因为在构造函数调用时尚未定义实例（该定义“正在进行中”）。

> Q2：如果像我的例子一样，我们想将非静态字段或方法与对基本构造函数的调用结合起来怎么办？什么是最 OOP 的方式来做到这一点？

OOP 方式只是简单的方法覆盖。

```
class Runner
{
    ToRun tr;
    public Runner(ToRun f) 
    {
        tr=f;
    }

    public virtual void Run()
    {
        tr();
    }
}

class CountingRunner : Runner {
    int i;
    public CountingRunner(ToRun f) : base(f) {
        i=0;
    }
    public override void Run() {
        i++; 
        base.Run();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T00:29:31.227

关于**Q1**和**Q2**，并不是参数必须是静态的，而是参数必须在调用时可以访问。

并且基构造函数在本地构造函数之前被调用，这就是为什么你不能使用`this`成员作为参数，以及为什么你不应该调用虚拟调用。

不完全确定最终目标是什么，但它确实类似于[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T00:35:08.863

这就是你想要的：

```
class Runner {
    protected event Action _toRun;

    public Runner() {
    }
    public void Run() {
        var r = _toRun;
        if (r != null)
           _toRun();
    }

}

class CountingRunner : Runner {

    int i;
    public CountingRunner(Action f) : base() {
        _toRun += f;
    }
    public void inc() {
        i++;
    }
} 
```

**编辑**

对于您使用哈希表的特定示例，此问题已通过语言设计解决。只需对哈希表的元素调用 GetHashCode() 即可确定它们的哈希码。您不需要实现来传递散列函数。

要回答您更一般的问题“我应该如何将操作实例数据的函数发送到基类”，您应该在 lambda 表达式中捕获您的实例变量并将其发送到基类，或者考虑一个设计，其中基类不需要访问其派生类的实例函数。我会选择后者:)

一种这样的设计是让函数在基类中进行纯虚拟调用。这将需要派生类来实现虚拟调用才能被实例化。所以在这里你将`abstract int GetHashCode(E item)`在基类中有一个函数，并在你的子类中覆盖它。同样，在这种特定情况下，语言使用`GetHashCode()`为所有类型定义的虚函数为您执行此操作。

这是一个非抽象示例（派生类*不需要*覆盖散列函数）。

```
class HashArray<E> : HashTable<E> where E : IComparable<E> {
    private E[] a;
    private bool[] taken;
    public readonly int n;
    public int size {
        get { return n; }
    }

    public HashArray(int m) {
        n=2*m;
        a=new E[n];
        taken=new bool[n];
        for (int i=0 ; i<n ; i++) taken[i]=false;

    }
    public void insert(E e) {
        int index= GetSpecialHashCode(e)%n;
        int i;
        for (i=index ; i<n && taken[i]!=false ; ++i) ;
        if (i>=n)
            for (i=0 ; i<index && taken[i]!=false ; ++i) ;
        if (i>=index) return;
        taken[i]=true;
        a[i]=e;
    }
    public bool isMember(E e) {
        int i= GetSpecialHashCode(e)%n;
        for ( ; i<n && taken[i]!=false && a[i].CompareTo(e)!=0 ; ++i );
        if (i>=n || taken[i]==false) return false;
        return true;
    }

    protected virtual int GetSpecialHashCode(E item) {
        return item.GetHashCode();
    }
} 
```

所以你得到一个默认的哈希码生成函数，但也欢迎派生类提供自己的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-08T01:15:18.643

对于您的最后一个示例，我认为这可能有效：

```
class HashArrayInt : HashArray<int> {
    public HashArrayInt(int n) : base (n,i => HashFunc(i,n)) {
    }
    private static int HashFunc(int i, int n) {
        return (i%n);// n is a non static field, every hash table has its own size!
    }
} 
```

如果没有，您可以这样做：

```
class HashFuncProvider {
    private int n;
    public HashFuncProvider(int n){
         this.n = n;
    }

    public int HashFunc(int i) {
        return (i%n);
    }
}

class HashArrayInt : HashArray<int> {
    public HashArrayInt(int n) : base (n, new HashFuncProvider(n).HashFunc) {
    }
} 
```

# android - 简化我的 ListView（使用 Intent、setOnItemClick 等）

> ID：11379723
> 
> 赞同：0
> 
> 时间：2012-07-08T00:16:07.760
> 
> 标签：android, listview, android-intent, onitemclicklistener

我用 ListView 编写了一个活动。现在我想知道，是否可以简化我的代码（使其更短）。

一个例子在代码块下

```
package de.bodprod.dkr;

import java.util.ArrayList;
import java.util.HashMap;

import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.AdapterView.OnItemClickListener;

public class MediMenue extends ListActivity {
    ArrayList<HashMap<String, Object>> medi_menue_items;
    LayoutInflater inflater;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.medi_menue);
        ListView antidotListView = (ListView) findViewById(android.R.id.list);
        inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);        

        medi_menue_items = new ArrayList<HashMap<String,Object>>();

        HashMap<String , Object> item = new HashMap<String, Object>();
        item.put("title", "Antidots");
        item.put("desc", "Toxine und die Gegenmittel");
        item.put("class_open", "MediAntidotList");
        medi_menue_items.add(item);

        item = new HashMap<String, Object>();
        item.put("title", "Notfallmedikamente");
        item.put("desc", "Dosierungen, Gegenanzeigen u.v.m.");
        item.put("class_open", "MediNotmediList");
        medi_menue_items.add(item);

        ListView lv;
        lv = (ListView) findViewById(android.R.id.list); 
        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                Intent in = new Intent();
                String class_open = ((TextView) view.findViewById(R.id.class_open)).getText().toString();
                if(class_open.equals("MediAntidotList")){
                    in = new Intent(getApplicationContext(), MediAntidotList.class);
                }else if(class_open.equals("MediNotmediList")){
                    in = new Intent(getApplicationContext(), MediNotmediList.class);
                }
                startActivity(in);

            }
        });     

        final CustomAdapter adapter = new CustomAdapter(this, R.layout.medi_menue, medi_menue_items);
        antidotListView.setAdapter(adapter);            

    }
    private class CustomAdapter extends ArrayAdapter<HashMap<String, Object>>{
        public CustomAdapter(Context context, int textViewResourceId, ArrayList<HashMap<String, Object>> Strings) {
            super(context, textViewResourceId, Strings);
        }
        private class ViewHolder{
            TextView class_open, title, desc;
        }
        ViewHolder viewHolder;

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            if(convertView==null){        
                convertView=inflater.inflate(R.layout.medi_menue_item, null);
                viewHolder=new ViewHolder();
                viewHolder.class_open=(TextView) convertView.findViewById(R.id.class_open);
                viewHolder.title=(TextView) convertView.findViewById(R.id.medi_menue_name);
                viewHolder.desc=(TextView) convertView.findViewById(R.id.medi_menue_desc);
                convertView.setTag(viewHolder);
            }else{
                viewHolder=(ViewHolder) convertView.getTag();
            }
            viewHolder.class_open.setText(medi_menue_items.get(position).get("class_open").toString());
            viewHolder.title.setText(medi_menue_items.get(position).get("title").toString());
            viewHolder.desc.setText(medi_menue_items.get(position).get("desc").toString());
            return convertView;
        }
    }   
} 
```

例如：在 OnItemClickListener 中，我从列表项中获取 id，然后将其与 if 和 else 一起使用。但是 id 与活动中的名称相同，是否可以说新的 Intent，它应该打开名称在 String class_open 中的类？像这样的东西：

```
 String class_open = ((TextView) view.findViewById(R.id.class_open)).getText().toString();
        Intent in = new Intent(getApplicationContext(), <class_open>.class);
        startActivity(in); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T01:36:26.547

因为我自己没有尝试过，所以我会在这里进行很长时间的拍摄。但是我看到您有一个未显示的 ViewHolder 类。如果您真的想更改您的 onItemClick 代码，您可以在每个 ViewHolder 中存储一个意图，该意图在您的 getView(...) 中设置。通过这种方式，您可以在 onItemClick 中获取 viewholder 标记，并从该标记中获取意图并启动它。

例子：

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id)
 {
    // Get the intent that u stored in this viewholder
    ViewHolder clicked = (ViewHolder)view.getTag();
    Intent toStart = clicked.getIntent();
    startActivity(toStart);          
 } 
```

而且您不需要设置 onItemClick 侦听器，因为您是从 ListActivity 扩展的，只需覆盖它即可。

要实现所有这些，您需要在适配器中的 getView() 中进行一些更改。我相信你能弄清楚是什么！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T00:50:22.410

首先，由于您使用的是 ListActivity，因此您不需要在列表本身上调用 setOnListItemClick 处理程序，只需从 ListActivity 覆盖此方法：

```
protected void onListItemClick(ListView l, View v, int position, long id); 
```

所以你可以有这个：

```
protected void onListItemClick(ListView l, View v, int position, long id) {
    Intent in = new Intent();
    String class_open = ((TextView)v.findViewById(R.id.class_open)).getText().toString();
    if(class_open.equals("MediAntidotList")){
                in = new Intent(getApplicationContext(), MediAntidotList.class);
            }else if(class_open.equals("MediNotmediList")){
                in = new Intent(getApplicationContext(), MediNotmediList.class);
            }
    startActivity(in);

} 
```

然后回答您的其他问题，您可以尝试 Java 反射来获取一个类：

```
String class_open = ((TextView)view.findViewById(R.id.class_open)).getText().toString();
Class c = Class.forName("com.yourpackagename." + class_open );
Intent in = new Intent(getApplicationContext(), c); 
```

# objective-c - 使用 Grand Central Dispatch 设置变量不可检索

> ID：11379726
> 
> 赞同：0
> 
> 时间：2012-07-08T00:16:38.537
> 
> 标签：objective-c, ios, cocoa

我正在尝试使用大中央调度设置和 NSURL，但是在您尝试在大中央调度块之外访问它之前，该变量似乎已设置并可访问。

```
-(void)viewDidLoad {

[super viewDidLoad];

dispatch_queue_t backgroundQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(backgroundQueue,^{

    self.ubiquitousURL = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];

   NSLog(@"ubiq inside: %@", self.ubiquitousURL);

    if (self.ubiquitousURL) {

        self.iCloudDocURL = [NSURL URLWithString:[NSString stringWithFormat:@"%@Documents", self.ubiquitousURL]];
        self.iCloudDocString = [self.iCloudDocURL absoluteString];

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(loadFiles) name: UIApplicationDidBecomeActiveNotification object:nil];

    } else {

        /* change to the main queue if you want to do something with the UI. For example: */
        dispatch_async(dispatch_get_main_queue(),^{

            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Please enable iCloud" message:nil delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

            [alert show];

        });

    }

});

NSLog(@"ubiq outside: %@", self.ubiquitousURL);

} 
```

第一个`NSLog`以`ubiq inside`返回正确的 URL 开头，而`ubiq outside`返回 NULL。我正在使用 ARC，因此无需提及内存或类似内容……这是 GCD 问题。

你知道为什么`self.ubiquitousURL`在 GCD 块之外无法访问吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T00:30:21.803

您正在进行异步调用。所以`NSLog(@"ubiq outside: %@", self.ubiquitousURL);`无论你在 backgroundQueue 中的代码是否完成，这条线都会被执行。

您将首先看到外部日志，然后是内部日志。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T00:38:08.560

`dispatch_async`意思是“稍后运行”。因此，块内的代码不会立即运行；`NSLog`它在“外部”调用已经运行之后的某个时间运行。例如，如果您要`sleep(5)`在调用之前放置`NSLog`，您可能会看到该值。（不过，您不应该在实际代码中真正这样做；它基本上会使应用程序冻结五秒钟。）

如果您想在设置该属性后在主队列上运行更多代码，请执行以下操作：

```
dispatch_async(backgroundQueue,^{
    self.ubiquitousURL = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];

    NSLog(@"ubiq inside: %@", self.ubiquitousURL);

    if (self.ubiquitousURL) {
        self.iCloudDocURL = [NSURL URLWithString:[NSString stringWithFormat:@"%@Documents", self.ubiquitousURL]];
        self.iCloudDocString = [self.iCloudDocURL absoluteString];

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(loadFiles) name: UIApplicationDidBecomeActiveNotification object:nil];

        // ************** NEW HOTNESS HERE **************
        dispatch_async(dispatch_get_main_queue(),^{
            NSLog(@"ubiq outside: %@", self.ubiquitousURL);
        });
    } else {
        /* change to the main queue if you want to do something with the UI. For example: */
        dispatch_async(dispatch_get_main_queue(),^{
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Please enable iCloud" message:nil delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show];
        });
    }
}); 
```

`NSLog`如果您在检索 iCloud URL 后想要执行此操作，请将该行替换为执行实际工作的方法调用。

# forms - 如何为 Symfony2 上的单选按钮实现事件侦听器？

> ID：11379731
> 
> 赞同：0
> 
> 时间：2012-07-08T00:19:03.643
> 
> 标签：forms, events, symfony, radio-button

这是我的表格

```
public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('nombreBD','text', array( 'required' => true, 'label' => 'Nombre Base de Datos: '))
            ->add('Servidor', 'choice', array(
                            'choices'   => array('1' => 'Si', '0' => 'No'),
                            'required'  => true,
                            'multiple'  => false,
                            'expanded'  => true,
                            'label' => 'Servidor Existente?'
                  ))
            ->add('ServidorBD','entity',
                  array ('class' => 'MonseWebBundle:ServidoresBD',
                        'multiple' => true, 
                        'required' => true, 
                        'label' => 'Servidor de Base de Datos: ',
                         'query_builder' => function(EntityRepository $er) {
                         return $er->createQueryBuilder('u')
                         ->orderBy('u.url', 'ASC');
                                                                           },
                         ))
            ;
    } 
```

我想要做的是，如果用户在单选按钮中选择“否”，则不应显示“ServidorBD”实体，而应显示另一个表单（动态加载或将用户重定向到另一个 url）添加一个新的。由于我是 Symfony2 的新手，所以我不太明白如何将事件监听器附加到“单选按钮”，也不明白如何在发生这种情况时显示另一位表单而不是“ServidorBD”。

请帮忙！TT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T10:27:23.170

您要做的是根据您将绑定在表单上的数据动态构建表单。

在 Symfony 2.0.x 或 2.1.x 中，表单组件在绑定数据后无法更改表单结构。这将在 Symfony 2.2 中完成。

看到这个问题：[https ://github.com/symfony/symfony/issues/3767](https://github.com/symfony/symfony/issues/3767)

因此，目前，您不能使用表单事件侦听器来归档此用例。

# git - 在 git 中指定合并父级

> ID：11379738
> 
> 赞同：2
> 
> 时间：2012-07-08T00:20:33.217
> 
> 标签：git, merge

我已经合并了我的两个分支（使用 Eclipse 合并工具）。

当我提交时，提交只有一个分支作为父级（原始工作区 HEAD）。我稍后会深入研究为什么会发生这种情况，但我现在需要正确提交（合并涉及很多工作）。

我如何修改提交以包含对另一个分支的引用？文件内容现在都很好，我只想让提交有两个父母。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T00:40:52.363

首先，如果您已经提交，请运行`git reset --soft HEAD^`以撤消它。

**方法一**

在（通常）中创建`MERGE_HEAD`文件，其中包含要合并的分支的尖端（您可以使用它来获取它）（以及一个空行，只是为了模仿行为）。并像往常一样提交。`GIT_DIR``/.git``SHA-1``git show-ref``git merge`

**方法二**

此外，如果您愿意，您可以在不弄乱 git 内部结构的情况下做到这一点：

*   将工作目录（无`.git`目录）的副本保存在某处
*   做`git reset --hard`
*   做`git merge branch_to_merge_with --no-commit`
*   从工作目录中删除所有内容（目录除外`.git`）
*   从保存的副本中恢复工作目录内容
*   添加更改并提交

PS如果您使用了`git merge --squash`选项或`MERGE_HEAD`文件以某种方式丢失，则可能会发生这种情况。

# jquery-ui - .ajax() 即使在 POST 模式下也会将“数据”键值附加到 URL

> ID：11379746
> 
> 赞同：1
> 
> 时间：2012-07-08T00:22:11.700
> 
> 标签：jquery-ui, jquery

这是我的 .ajax() 调用代码：

```
 $.ajax({
      type: "POST",
      url: "http://ws.geonames.org/searchJSON",
      dataType: "jsonp",
      data: {
        featureClass: "P",
        style: "full",
        maxRows: 12,
        name_startsWith: request.term
      } 
```

除了`type:"POST"`如上使用外，我还尝试`$.ajaxSetup({type: "post"});`在此代码块上方使用。

在这两种情况下，`data`键中的值都被附加到 URL 中。**我想要一个没有参数的干净 URL。**这段代码实际上是自动完成字段的一部分，它被包装到一个匿名函数中，并`source`像主要的 jQueryUI 示例一样给定一个键。

*注意*实际的 URL 无关紧要，我不知道 geonames 是否支持 POST 请求，但稍后会更改，这只是一个示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T00:45:27.510

只需像这样添加您的参数：

```
url: "http://ws.geonames.org/searchJSON/" + param, 
```

如果你想强制 POST，你可以试试[jQuery.post()](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T01:11:15.917

无法使用 JSONP 数据类型发出 POST 请求。

JSONP 通过创建`<script>`从不同域执行 Javascript 的标签来工作，无法使用`<script>`标签发送 POST 请求。

如果您指定`dataType: "jsonp"`and `type: "POST"`，则“jsonp”优先并作为“GET”请求发送（“POST”被忽略）。

# javascript - 从数组中随机引用？

> ID：11379750
> 
> 赞同：0
> 
> 时间：2012-07-08T00:22:32.830
> 
> 标签：javascript, arrays, random

> **可能重复：**
> [随机化数组中的元素？](https://stackoverflow.com/questions/813935/randomizing-elements-in-an-array)

我在网上找到了这个“Quote Rotator”脚本，它可以正常工作，但我想随机化显示引号的顺序，而不是在列表中循环。任何帮助，将不胜感激。

```
var myquotes = new Array(
    'Quote #1',
    'Quote #2',
    'Quote #3' // Leave the last quote without a comma at the end
    );

function rotatequote()
{
    thequote = myquotes.shift(); //Pull the top one
    myquotes.push(thequote); //And add it back to the end

    document.getElementById('quotetext').innerHTML = thequote;
    t=setTimeout("rotatequote()",10000);
}

// Start the first rotation.
rotatequote(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T00:27:29.210

将 rotateQuote 更改为：

```
function rotatequote()
{
    var thequote = myquotes[( Math.floor ( Math.random() * myquotes.length ) )];
    document.getElementById('quotetext').innerHTML = thequote;
    var t=setTimeout("rotatequote()",10000);
} 
```

# java - Android Activity 不保存首选项？

> ID：11379753
> 
> 赞同：1
> 
> 时间：2012-07-08T00:23:20.973
> 
> 标签：java, android, sharedpreferences

我的 android 应用程序中有一个设置活动，目的是在项目选择时保存首选项。我的问题是，我的设置没有保存。每次进行用户选择时都会调用以下方法：

```
public void savePreferences()
{
    defaultVolumeUnit = MySingleton.getInstance().getDefaultVolumeUnit();
    defaultPressureUnit = MySingleton.getInstance().getDefaultPressureUnit();
    defaultTempUnit = MySingleton.getInstance().getDefaultTempUnit();

    settings = getSharedPreferences(SettingsTAG, 0);
    Editor editor = settings.edit();

    editor.putInt("selectVolume", defaultVolumeUnit);
    editor.putInt("selectPressure", defaultPressureUnit);
    editor.putInt("selectTemperature", defaultTempUnit);

    editor.commit();
} 
```

我还在我的 MAIN 活动中使用以下代码，其中所有设置在启动时都会恢复：

```
public void restoreValues()
{
    settings = getSharedPreferences(SettingsTAG, 0);

    int SelectedVolume = settings.getInt("selectVolume", 0);
    int SelectedPressure = settings.getInt("selectPressure", 0);
    int SelectedTemperature = settings.getInt("selectTemperature", 0);

    // Necessary assignments here...
} 
```

我在整个应用程序中使用全局变量，这些变量会被保存，但设置不会。我很肯定 savePreferences() 和 restoreValues() 方法都会被调用，但无论用户选择什么都不会被保存。

换句话说，没有任何东西被保存/恢复。我不知道我做错了什么，但这个问题一直让我发疯。这曾经对我有用，但我正在进行设置 UI 改造，相同的代码突然不起作用......

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T00:30:20.927

认为你应该在你的***活动***中这样做：

```
private SharedPreferences prefSettings;

public void restoreValues()
{
    prefSettings = PreferenceManager.getDefaultSharedPreferences(this);

    int SelectedVolume = prefSettings.getInt("selectVolume", 0);
    int SelectedPressure = prefSettings.getInt("selectPressure", 0);
    int SelectedTemperature = prefSettings.getInt("selectTemperature", 0);

    // Necessary assignments here...
} 
```

在我注意到的您的方法中，您的参数实际上看起来并不正确……您为什么使用`SettingsTAG`,`0`作为`getSharedPreference`方法的参数？你的活动***在扩展*** `PreferenceActivity`吗？您应该使用上下文。

```
public void savePreferences()
{
    defaultVolumeUnit = MySingleton.getInstance().getDefaultVolumeUnit();
    defaultPressureUnit = MySingleton.getInstance().getDefaultPressureUnit();
    defaultTempUnit = MySingleton.getInstance().getDefaultTempUnit();

    //settings = getSharedPreferences(SettingsTAG, 0);
    settings = PreferenceManager.getDefaultSharedPreferences(context); // Notice CONTEXT!
    Editor editor = settings.edit();

    editor.putInt("selectVolume", defaultVolumeUnit);
    editor.putInt("selectPressure", defaultPressureUnit);
    editor.putInt("selectTemperature", defaultTempUnit);

    editor.commit();
} 
```

***编辑：*** 如果你想调试它，最好这样做：

```
public class PreferencesActivity extends PreferenceActivity implements OnSharedPreferenceChangeListener{
    private static final String TAG = "PreferencesActivity";

///.... code....

@Override
public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key){
    Log.d(TAG, "onSharedPreferenceChanged() - key = " + key);
    // Yup! The key within the shared preferences was changed... inspect 'em via Log!
} 
```

原因：您正在“聆听”更改，以确认您确实在保存首选项。完成调试后，请务必取出`Log`调用，使其不会出现在 logcat 中。

# java - 带有继承的 Java 序列化

> ID：11379759
> 
> 赞同：0
> 
> 时间：2012-07-08T00:25:49.123
> 
> 标签：java, inheritance, serialization

问题：A类实现Serializable B类扩展A实现Serializable

现在我仅使用 B 类作为运行时类型进行序列化。所以我有一个清单：

```
List<A> lst = new ArrayList<A>();
lst.add(new B());
...
objectOutputStream.writeObject(lst.get(i)); //this write compiler-type A, runtime-type B 
```

如果我现在反序列化它，我会得到 java.io.OptionalDataException 错误。无论如何，我想知道我的对象如何成为正确的运行时类型。反序列化：

```
A a = (A) objectInputStream.readObject(); 
```

如果它在序列化时是一个运行时类型，这会导致 B 类的运行时类型，还是我必须覆盖 A 的每个子类的默认序列化？

希望我没有错过任何明显的事情。

提前致谢 ： ）

编辑：

感谢所有的答案，他们真的帮助我理解了我自己的错误。

抛出异常是因为我（如回答）使用了 in.read(arr); 这导致未完全读取数据，因此它无法正确反序列化对象（当然不是） - 在将其更改为 readFully 后，它按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T02:59:27.880

根据给定的信息，我无法确定您为什么会收到 OptionalDataException。A 是可序列化的，因此 B 将是可序列化的，因为 B 扩展了 A。假设 list.get(i) 是对象 B，那么 objectOutputStream.writeObject(list.get(i)) 会将对象 B 写入流。当你读回它时，它会返回对象 B。

擦除类型的参数无关紧要，因为 ObjectOutputStream.writeObject 方法接受 Object 作为参数。

您是否为 A 类或 B 类定义了私有方法 writeObject 和 readObject？如果您定义了这些方法，请确保它们以正确的顺序读取和写入对象和原始数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T14:00:03.627

好的..试试这个......

**1.**首先**serializable是一个marker/tag接口**，表示这个类的对象是允许序列化的，**当一个Super类可序列化时，它的Sub类会自动序列化**...所以不需要B将 A 扩展为可序列化。

**2.**现在当你说使用**readObject() 读回对象时，它将是 Object 形式，这就是你需要将它转换为它的类型的原因。**

例如：

`GamePlayer gp1 = (GamePlayer) os.readObject(); //os is ObjectInputStream instance`

# iphone - 视图出现在导航栏下方 20 像素处

> ID：11379761
> 
> 赞同：0
> 
> 时间：2012-07-08T00:26:24.223
> 
> 标签：iphone, ios

当我在 AppDelegate 中以编程方式创建一个 UINavigationController 时，作为根有一个嵌入式 UITabBarController，例如两个由标准 UIViewControllers 组成的简单选项卡，UIViewControllers 的视图似乎从导航栏向下移动了 20 个像素，即有一个导航栏底部和视图顶部之间有 20 像素的间隙。

该代码是一个简单的空应用程序，在 AppDelegate didFinishLaunchingWithOptions 函数中只有以下代码：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

UIViewController* vc1 = [[UIViewController alloc] init];
vc1.view.backgroundColor = [UIColor blueColor];

UIViewController* vc2 = [[UIViewController alloc] init];
vc2.view.backgroundColor = [UIColor redColor];

UITabBarController* tabBarController = [[UITabBarController alloc] init];
[tabBarController setViewControllers:[NSArray arrayWithObjects:vc1, vc2, nil]
    animated:YES];

UINavigationController* navigationController = [[UINavigationController alloc]
    initWithRootViewController:tabBarController];

self.window.rootViewController = navigationController;
[self.window makeKeyAndVisible];
return YES; 
```

问题似乎与状态栏的高度有关，但是我不明白我做错了什么。但是，该问题并未出现在模拟器中，并且似乎仅在设备上运行时出现。此外，当您选择第二个选项卡时，视图似乎会移回其正常位置（与导航栏没有 20 像素的偏移）。

有没有人遇到过类似的问题和/或我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T04:41:13.200

作为一般建议，尝试（不惜一切代价）避免将 tabBarController 推入 NavBarController，Apple 不建议这样做。“正确”的方法是为每个 ViewController 创建一个 NavBarController，然后将 NavController 设置为 TabController 的项目，例如，根据您的代码：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

UIViewController* vc1 = [[UIViewController alloc] init];
vc1.view.backgroundColor = [UIColor blueColor];
UINavigationController *vc1Nav = [[UINavigationController alloc]
initWithRootViewController:vc1];

UIViewController* vc2 = [[UIViewController alloc] init];
vc2.view.backgroundColor = [UIColor redColor];
UINavigationController *vc2Nav = [[UINavigationController alloc]
initWithRootViewController:vc2];

UITabBarController* tabBarController = [[UITabBarController alloc] init];
[tabBarController setViewControllers:[NSArray arrayWithObjects:vc1Nav, vc2Nav, nil]
animated:YES];

self.window.rootViewController = tabBarController;
[self.window makeKeyAndVisible];
return YES; 
```

无论如何，如果您想查看它，[这里是 Apple 相关文档。](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/CombiningViewControllers.html#//apple_ref/doc/uid/TP40011313-CH6-SW1)

# ruby-on-rails - 带有视图测试和嵌套资源的 Rspec 和 Rails

> ID：11379762
> 
> 赞同：5
> 
> 时间：2012-07-08T00:26:57.493
> 
> 标签：ruby-on-rails, rspec, views, factory-bot, nested-resources

我正在开发一个 Yahoo Answers 类的应用程序来提高我的 Rails 技能。到目前为止，我已经设置了两个模型“问题”和“答案”，它们是这样嵌套的：

```
 resources :questions do
    resources :answers
  end 
```

我已经对控制器、模型和问题的视图进行了测试，但是我在答案视图和嵌套路由方面遇到了一些问题。我正在使用 Rspec 和工厂女孩。

我有以下测试：

```
describe "answers/new.html.erb" do
  before(:each) do
    @question = Factory(:valid_question)
    @answer = Factory(:valid_answer)
    assign(:question, @question)
    assign(:answer, stub_model(Answer,
      :text => "MyString",
      :question_id => 1
    ).as_new_record)
  end

  it "renders new answer form" do
    render
    assert_select "form", :action => question_answers_path(@question), :method => "post" do
      assert_select "textarea#answer_text", :name => "answer[text]"
      assert_select "input#answer_question_id", :name => "answer[question_id]"
    end
  end
end 
```

每当我运行测试时，我都会收到以下消息：

```
 3) answers/new.html.erb renders new answer form
     Failure/Error: render
     ActionView::Template::Error:
       No route matches {:controller=>"answers"}
     # ./app/views/answers/new.html.erb:6:in `_app_views_answers_new_html_erb__3175854877830910784_6513500'
     # ./spec/views/answers/new.html.erb_spec.rb:16:in `block (2 levels) in <top (required)>' 
```

我尝试了很多事情，比如做

```
render new_question_answer_path(@question) 
```

但我明白了：

```
 3) answers/new.html.erb renders new answer form
     Failure/Error: render new_question_answer_path(@question.id)#, :format=>:html
     ActionView::MissingTemplate:
       Missing partial /questions/1/answers/new with {:handlers=>[:erb, :builder, :coffee], :formats=>[:html, :text, :js, :css, :ics, :csv, :xml, :rss, :atom, :yaml, :multipart_form, :
url_encoded_form, :json], :locale=>[:en, :en]}. Searched in:
         * "/home/juan/rails_projects/answers/app/views"
     # ./spec/views/answers/new.html.erb_spec.rb:16:in `block (2 levels) in <top (required)>' 
```

你能帮我解决这个问题吗？我现在有点不知所措。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T15:00:56.910

我认为错误在你看来。可以加吗？

另外，这里有一些关于使用 RSpec 的建议：

*   你可以把两者都`@question`放在`@answer`一个 let 块中。这是目前的首选方式。查看文档，使用起来相当简单。
*   你应该实际使用`FactoryGirl.create`，而不是`Factory()`。`create`如果包含`Factory::Syntax::Methods`在 RSpec 配置中，则可以将其缩短为。
*   将测试替身与真实模型混合通常不是一个好主意。您应该将视图与模型隔离开来，或者将它们一直集成在一起 - 或者替换`stub_model`with`Answer.build`或使用存根 for `@question`and `@answer`。FactoryGirl`Factory.build_stubbed`基本上`stub_model`适用于视图规格。
*   查看规格已失宠。我建议在 RSpec 邮件列表中搜索有关人们选择避免​​使用它们的详细信息。我的看法是它们相当脆弱（更改代码时很容易破坏），因为它们依赖于模型和助手。要么他们强迫你做很多存根，集成模型，要么编写一个简单的演示者。话虽如此，它们有它们的用途，但它们很少见。更好的选择是在集成中测试这种交互，使用黄瓜、牛排或仅使用 rspec 和水豚。
*   您的断言是您通常不想在视图规范中测试的示例。您断言存在一些标记，包括表单字段，这本身并不是一个好的测试，因为它告诉您表单在那里，但不是它正在工作。您将获得更好的集成覆盖率。此外，它也不会那么脆弱 - 例如，如果您重命名模型或字段，则无需更改视图规范。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T02:22:00.437

我遇到了这个问题。如果您仔细查看堆栈跟踪，您会发现您的视图被正确调用，但是第 6 行有一个错误。

在我的情况下，这是由调用其中一个 rails 路径帮助引起的，例如`answers_path(@question)`，但它被传递为零。

解决方法是添加`assign`对该实例变量的调用。如果改为使用局部变量，则可以`:locals`在调用时通过哈希传入`render`。

# java - 将 MouseListener 添加到 Zest 图表

> ID：11379765
> 
> 赞同：1
> 
> 时间：2012-07-08T00:27:42.943
> 
> 标签：java, eclipse, eclipse-plugin, zest

我目前正在为 Eclipse 开发一个使用 Zest 显示树的插件。

我尝试向`MouseListener`显示节点的图形添加自定义，因为我想添加双击功能，但这会覆盖允许拖动节点的自然存在的功能。

我尝试添加基于 Draw2D 的拖动功能，但它不起作用。这是我尝试过的代码：

```
private Point location;

public void mousePressed(MouseEvent me) {
    location = me.getLocation();
    me.consume();
}

public void mouseReleased(MouseEvent me) {
    location = null;
    me.consume();
}

public void mouseDragged(MouseEvent me) {
    if (location == null) {
        return;
    }
    Point moved= me.getLocation();
    if (moved == null) {
        return;
    }

    Dimension offset= moved.getDifference(location);
    if (offset.width == 0 && offset.height == 0) {
        return;
    }
    location= moved;

    UpdateManager uMgr= figure.getUpdateManager();
    LayoutManager lMgr= figure.getLayoutManager();
    Rectangle bounds= figure.getBounds();
    uMgr.addDirtyRegion(figure.getParent(), bounds);
    bounds= bounds.getCopy().translate(offset.width, offset.height);
    lMgr.setConstraint(figure, bounds);
    figure.translate(offset.width, offset.height);
    uMgr.addDirtyRegion(figure.getParent(), bounds);
    me.consume();
} 
```

任何人都可以为我的代码提供修复或解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T17:46:54.137

在 Debug Visualization 项目中，我们添加了一个双击侦听器，同时保留了拖动支持。

我们的代码位于[http://code.google.com/a/eclipselabs.org/p/debugvisualisation/source/browse/hu.cubussapiens.debugvisualisation/src/hu/cubussapiens/debugvisualisation/views/DebugVisualisationView.java](http://code.google.com/a/eclipselabs.org/p/debugvisualisation/source/browse/hu.cubussapiens.debugvisualisation/src/hu/cubussapiens/debugvisualisation/views/DebugVisualisationView.java)的第 159 行：

```
 // double click on nodes
  graphViewer.getGraphControl().addMouseListener(new MouseAdapter() {

          @Override
          public void mouseDoubleClick(MouseEvent e) {
                 toggleOpen.run();
          }
  }); 
```

您可以从 MouseEvent 读取选定的节点（如果我没记错的话），或者您可以检查当前的选择（这是我们在项目中采用的方法）。

# c++ - 'operator=' 和 sockaddr 成员的问题

> ID：11379768
> 
> 赞同：0
> 
> 时间：2012-07-08T00:28:19.513
> 
> 标签：c++, sockets, operator-keyword, hostent

我遇到以下代码的问题：

```
#include <netdb.h>
#include "socket.h"

#define INVALID_SOCKET -1
#define SOCKET_ERROR   -1

int SenderAddrSize = sizeof(sockaddr);
sockaddr CSocket::SenderAddr;
bool CSocket::tcpconnect(char *address, int port, int mode)
{
    sockaddr_in addr;
    hostent hostEntry;
    if((sockid = socket(AF_INET,SOCK_STREAM, 0)) == SOCKET_ERROR)
        return false;
    if((hostEntry = gethostbyname(address)) == NULL)
    {
        closesocket(sockid);
        return false;
    }
    addr.sin_family = AF_INET;
    addr.sin_addr = *((LPIN_ADDR)*hostEntry->h_addr_list);
    addr.sin_port = htons((u_short)port);
    if(mode ==2)setsync(1);
    if(connect(sockid, (LPSOCKADDR)&addr, sizeof(sockaddr)) == SOCKET_ERROR)
    {
        if(WSAGetLastError() != WSAEWOULDBLOCK)
        {
            closesocket(sockid);
            return false;
        }
    }
    if(mode ==1)setsync(1);
    return true;
} 
```

我得到以下输出：

```
/home/nick/.projects/39dll-4-linux/socket.cpp||In member function ‘bool CSocket::tcpconnect(char*, int, int)’:|
/home/nick/.projects/39dll-4-linux/socket.cpp|15|error: no match for ‘operator=’ in ‘hostEntry = gethostbyname(((const char*)address))’|
/home/nick/.projects/39dll-4-linux/socket.cpp|15|note: candidate is:|
/usr/include/netdb.h|101|note: hostent& hostent::operator=(const hostent&)|
/usr/include/netdb.h|101|note:   no known conversion for argument 1 from ‘hostent*’ to ‘const hostent&’|
/home/nick/.projects/39dll-4-linux/socket.cpp|17|error: ‘closesocket’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|21|error: ‘LPIN_ADDR’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|21|error: base operand of ‘->’ has non-pointer type ‘hostent’|
/home/nick/.projects/39dll-4-linux/socket.cpp|24|error: ‘LPSOCKADDR’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|26|error: ‘WSAGetLastError’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|26|error: ‘WSAEWOULDBLOCK’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|28|error: ‘closesocket’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp||In member function ‘bool CSocket::tcplisten(int, int, int)’:|
/home/nick/.projects/39dll-4-linux/socket.cpp|40|error: ‘struct sockaddr’ has no member named ‘sin_family’|
/home/nick/.projects/39dll-4-linux/socket.cpp|41|error: ‘struct sockaddr’ has no member named ‘sin_addr’|
/home/nick/.projects/39dll-4-linux/socket.cpp|42|error: ‘struct sockaddr’ has no member named ‘sin_port’|
/home/nick/.projects/39dll-4-linux/socket.cpp|44|error: ‘LPSOCKADDR’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|46|error: ‘closesocket’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|51|error: ‘closesocket’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|57|error: expected constructor, destructor, or type conversion before ‘(’ token|
/home/nick/.projects/39dll-4-linux/socket.cpp||In destructor ‘CSocket::~CSocket()’:|
/home/nick/.projects/39dll-4-linux/socket.cpp|75|error: ‘closesocket’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp||In member function ‘CSocket* CSocket::tcpaccept(int)’:|
/home/nick/.projects/39dll-4-linux/socket.cpp|80|error: ‘SOCKET’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|80|error: expected ‘;’ before ‘sock2’|
/home/nick/.projects/39dll-4-linux/socket.cpp|81|error: ‘sock2’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|81|error: ‘SOCKADDR’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|81|error: expected primary-expression before ‘)’ token|
/home/nick/.projects/39dll-4-linux/socket.cpp||In member function ‘char* CSocket::tcpip()’:|
/home/nick/.projects/39dll-4-linux/socket.cpp|93|error: ‘SOCKADDR’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|93|error: expected primary-expression before ‘)’ token|
/home/nick/.projects/39dll-4-linux/socket.cpp|94|error: ‘struct sockaddr’ has no member named ‘sin_addr’|
/home/nick/.projects/39dll-4-linux/socket.cpp|94|error: ‘inet_ntoa’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp||In member function ‘void CSocket::setnagle(bool)’:|
/home/nick/.projects/39dll-4-linux/socket.cpp|100|error: ‘TCP_NODELAY’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp||In member function ‘bool CSocket::tcpconnected()’:|
/home/nick/.projects/39dll-4-linux/socket.cpp|108|error: ‘WSAGetLastError’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|108|error: ‘WSAEWOULDBLOCK’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp||In member function ‘int CSocket::setsync(int)’:|
/home/nick/.projects/39dll-4-linux/socket.cpp|116|error: ‘FIONBIO’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|116|error: ‘ioctlsocket’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp||In member function ‘bool CSocket::udpconnect(int, int)’:|
/home/nick/.projects/39dll-4-linux/socket.cpp|121|error: ‘SOCKADDR_IN’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|121|error: expected ‘;’ before ‘addr’|
/home/nick/.projects/39dll-4-linux/socket.cpp|124|error: ‘addr’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|128|error: ‘SOCKADDR’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|128|error: expected primary-expression before ‘)’ token|
/home/nick/.projects/39dll-4-linux/socket.cpp|130|error: ‘closesocket’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp||In member function ‘int CSocket::sendmessage(char*, int, CBuffer*)’:|
/home/nick/.projects/39dll-4-linux/socket.cpp|142|error: ‘SOCKADDR_IN’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|142|error: expected ‘;’ before ‘addr’|
/home/nick/.projects/39dll-4-linux/socket.cpp|145|error: ‘min’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|145|note: suggested alternative:|
/usr/include/c++/4.6/bits/stl_algobase.h|233|note:   ‘std::min’|
/home/nick/.projects/39dll-4-linux/socket.cpp|146|error: ‘addr’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|148|error: ‘inet_addr’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|149|error: ‘SOCKADDR’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp|149|error: expected primary-expression before ‘)’ token|
/home/nick/.projects/39dll-4-linux/socket.cpp|168|error: ‘WSAGetLastError’ was not declared in this scope|
/home/nick/.projects/39dll-4-linux/socket.cpp||In member function ‘int CSocket::receivemessage(int, CBuffer*)’:|
/home/nick/.projects/39dll-4-linux/socket.cpp|198|error: ‘SOCKADDR’ was not declared in this scope|
||More errors follow but not being shown.|
||Edit the max errors limit in compiler options...|
||=== Build finished: 50 errors, 0 warnings ===| 
```

在这一点上，我完全迷失了。我已经广泛使用谷歌并自己解决了其他几个问题，但我被困在这个问题上。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T00:32:36.530

您的变量`hostEntry`是类型`hostent`，但该函数`gethostbyname`只返回一个*指向*结构的指针。你的变量应该有一个指针类型，`hostent*`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T00:47:54.260

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-02-19T19:19:18.777

WSA, for Windows Socket API, can't be used on linux. So your WSA macros and WSAGetLastError() can't work

# android - 如何加载 ImageView 并聚焦图片的某个部分（通过一些 x 和 y 坐标？）

> ID：11379769
> 
> 赞同：0
> 
> 时间：2012-07-08T00:28:23.757
> 
> 标签：android, focus, imageview, zooming

我正在开发一个应用程序，该应用程序提供地图上位置的详细信息。我想让用户能够单击位置名称（在详细信息页面上），然后让应用程序加载大地图并将焦点设置到地图上的位置（最好放大到特定区域的位置）。

我搜索了高低，但没有找到加载 ImageView 并聚焦特定 x,y 坐标的方法。

任何帮助都会很棒谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T06:07:41.060

让 xMap 和 yMap 成为您要关注的点的坐标。宽度和高度分别是屏幕的。

现在你想让这个点与屏幕的中心重合。

您可以做的是裁剪大 jpg 的部分以获得与屏幕尺寸匹配的较小尺寸位图，焦点位于中心。

裁剪位图的代码：

```
Bitmap focusPoint = Bitmap.createBitmap(largeMapBitmap, xMap-width/2,yMap-height/2,width, height); 
```

然后您可以将此位图设置为您的图像视图

# drupal - 如何更改 Drupal 中的页面代码？

> ID：11379774
> 
> 赞同：0
> 
> 时间：2012-07-08T00:29:01.383
> 
> 标签：drupal, drupal-7

我需要更改页面 site_name.com/user/sites（例如添加按钮）。我在哪里可以找到它的代码？我试图在 site_name.com/admin/modules 中搜索，但它们太多了。

编辑：对不起，问题已关闭。经过一天的挣扎，我放弃了。Drupal 不适合我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T07:01:30.563

/user 模板位于用户模块中。您可以在那里找到 4 个用户模板。
要知道要覆盖哪一个，您可以使用[Devel Themer](http://drupal.org/project/devel_themer)模块。
它在页面底部为您提供了一个复选框，启用后它会显示特定区域的候选预处理函数和模板文件。
（如模块页面所述，只需要启用模块，因为它会弄乱某些页面的布局。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T00:48:05.733

您可以考虑为该页面创建一个模板文件。尝试使用`page--admin--modules.tpl.php`.

看看这个：[http ://drupal.org/node/1089656](http://drupal.org/node/1089656)

# memory-management - 映射具有特定地址的页面

> ID：11379776
> 
> 赞同：0
> 
> 时间：2012-07-08T00:29:31.143
> 
> 标签：memory-management, virtual-address-space, windows64, virtualalloc

我正在尝试使用 VirtualAlloc 映射虚拟内存页面，但它是 8TB Windows 7 64 位允许范围之外的特定地址，我在 Windows Internals 中读过这个地址范围用于“页表自映射结构”，无论如何，有什么办法可以用 0x7ffffffff000 地址映射内存页吗？

# knockout.js - jquery multiselect - 绑定到淘汰赛问题

> ID：11379778
> 
> 赞同：0
> 
> 时间：2012-07-08T00:29:34.720
> 
> 标签：knockout.js, multi-select, custom-binding

我在使用带有 Knockout的[Eric Hynds 出色的多选小部件时遇到问题。](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)

我的代码在[这里](http://jsfiddle.net/3Uqwn/)。

我正在使用[本文](http://darkroastjava.wordpress.com/2011/11/17/using-eric-hynds-multiselect-with-knockout/)中的自定义绑定。

如果您更改第一个框中的选项，多选将恢复为默认类型而不是使用插件 - 我猜我需要修改绑定，但我对 Knockout 还很陌生，并且很快就摆脱了我的这里的深度。

任何人都可以提出任何建议 - 任何关于如何编写自定义绑定的文章都可能对如果有人有任何参考资料以外的任何参考资料当然有用。

好的：我离得近一点：看[这里](http://jsfiddle.net/3Uqwn/2/)

现在唯一的问题是，每当您更改第一个框中的选择时，您都会丢失第二个中仍然相关的任何项目 - 还有一些奇怪的行为，例如，如果您：

1.  选择“所有链接健康”
2.  单击多选并检查第一项
3.  选择“所有手表”
4.  再次选择“所有链接健康”

然后你突然检查了所有 5 个项目！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:35:12.393

在我的情况下，我发现淘汰赛 2.1.0 默认情况下没有将“值”属性填充到标记，因此在您检查一项后将选择底层控件中的所有选项，因为所有值都等于空。您需要在绑定中定义“optionsValue”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T18:19:38.333

我终于设法做到了，尽管我不相信我有最好的方法。

我根本无法在多个选择中使用“with：ReportTemplate”来管理它，其中 ReportTemplate 是第一个框中的选定项目。

我用[这种](http://jsfiddle.net/Quu4f/38/)方法更接近了 - 但是如果你在第一个组合中选择“所有链接健康”，然后在底部的多选控件中，选中详细信息旁边的框，然后切换回“所有手表” - 底部多选仍然显示 5 列可用，而顶部多选正确显示 3 个可用列。

最后，我采用了具有订阅功能的方法来更新选择列表可用的选项：Fiddle [here](http://jsfiddle.net/BW637/1/)。这感觉有点笨拙，但这是我发现的唯一可以按要求工作的方法。

如果有人可以解释为什么其他方法不起作用，我会很感兴趣。

# qt - QTextEdit：如何保存使用 QTextCursor 插入的图像？

> ID：11379783
> 
> 赞同：2
> 
> 时间：2012-07-08T00:30:31.317
> 
> 标签：qt, qt4

我用 QTextCursor 在 QTextEdit 中插入了几张图像，现在我应该如何保存这整个东西？

我的第一个想法是遍历 QTextCursor 的所有位置，但是我没有找到合适的接口来使用。

使用示例代码：

```
QTextCursor cursor = ui->textEdit->textCursor();
cursor.insertImage(QImage ("/secure/Common/Pictures/icons/gimp.svg"));
ui->textEdit->setTextCursor(cursor);

QTextDocument *document = ui->textEdit->document();
QStringList images;
QTextBlock b = document->begin();
while (b.isValid()) {
    for (QTextBlock::iterator i = b.begin(); !i.atEnd(); ++i) {
        QTextCharFormat format = i.fragment().charFormat();
        bool isImage = format.isImageFormat();
        if (isImage)
        {
            images << format.toImageFormat().name();
            qDebug() << document->resource(QTextDocument::ImageResource,
                                           QUrl(format.toImageFormat().name())).toByteArray().size();
        }
    }
    b = b.next();
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T09:27:19.117

**快速而肮脏的解决方案**

只需调用`document->toHtml()`并解析`img`标签。

**清洁溶液**

遍历`QTextFragment`文本中的所有内容：

```
QStringList images;
QTextBlock b = document->begin();
while (b.isValid()) {
    for (QTextBlock::iterator i = b.begin(); !i.atEnd(); ++i) {
        QTextCharFormat format = i.fragment().charFormat();
        bool isImage = format.isImageFormat()
        if (isImage)
            images << format.toImageFormat().name();
    }
    b = b.next();
} 
```

警告：我没有对此进行测试，它甚至可能无法编译。

# c# - 如何使用动态列旋转普通 sql 查询

> ID：11379784
> 
> 赞同：2
> 
> 时间：2012-07-08T00:30:48.120
> 
> 标签：c#, sql-server, linq, pivot

我有一个 Sql 查询，它返回如下内容：

```
Rating as at    Rating type    Rating
--------------------------------------
6/7/2012        Type1          A
6/7/2012        Type2          A+
6/7/2012        Type3          B
8/7/2012        Type1          C
8/7/2012        Type2          C+
8/7/2012        Type3          B
8/7/2012        Type4          A 
```

如您所见，评级类型是动态的，我想将其显示在一个数据透视表中，但我真的不知道如何实现这一点。我想要的最终结果如下所示：

```
Rating as at    Type1   Type2   Type3   Type4
6/7/2012        A       A+       B
8/7/2012        C       C       C+       A 
```

我想知道如何使用 sql 来实现这一点。或者最好我将如何使用 LINQ C#？

帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T00:56:28.650

```
select "Rating as at", 
max(case when Rating_Type = 'Type1' then Rating else 0 end) as Type1,
max(case when Rating_Type = 'Type2' then Rating else 0 end) as Type2,
max(case when Rating_Type = 'Type3' then Rating else 0 end) as Type3,
max(case when Rating_Type = 'Type4' then Rating else 0 end) as Type4,
from Table
group by "Rating as at" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T11:25:47.743

**根据下面 OP 的评论更新答案 - 此更新现在将结果转换为字母等级**

下面结合使用 SQL Server 的 Pivot 运算符 ( [MSDN](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx) ) 和 EXEC 语句 ( [MSDN](http://msdn.microsoft.com/en-us/library/ms188332.aspx) )。

T-SQL 解决方案将处理完全动态的列。

```
--Create a temp table to hold values
CREATE TABLE #MyTable (
[Rating as at] DATE,
[Rating type] Nvarchar(30),
Rating FLOAT )

INSERT INTO #MyTable ([Rating as at],[Rating type],Rating) VALUES ('6/7/2012','Type1', 1)
INSERT INTO #MyTable ([Rating as at],[Rating type],Rating) VALUES ('6/7/2012','Type2', 3)
INSERT INTO #MyTable ([Rating as at],[Rating type],Rating) VALUES ('6/7/2012','Type3', 5)
INSERT INTO #MyTable ([Rating as at],[Rating type],Rating) VALUES ('8/7/2012','Type1', 5)
INSERT INTO #MyTable ([Rating as at],[Rating type],Rating) VALUES ('8/7/2012','Type2', 2)
INSERT INTO #MyTable ([Rating as at],[Rating type],Rating) VALUES ('8/7/2012','Type3', 4)
INSERT INTO #MyTable ([Rating as at],[Rating type],Rating) VALUES ('8/7/2012','Type4', 1)
SELECT DISTINCT [Rating type] INTO #MyTableDistinct FROM #MyTable

--Create a string of dynamic fields
DECLARE @MyVar1 nvarchar(max),@MyVar2 nvarchar(max)
SELECT @MyVar1 = COALESCE(@MyVar1,'') + '[' + [Rating type] + ']' + ', '  FROM #MyTableDistinct 
SELECT @MyVar1 = LEFT(@MyVar1, LEN(@MyVar1) - 1)

--Create a string of dynamic CASE statements to be used to convert pivoted results to letter grades
--Update the CASE steatement to handle different grade types
SELECT @MyVar2 = COALESCE(@MyVar2,'') + 'CASE WHEN [' + [Rating type] + '] IS NULL THEN ''N/A'' WHEN [' + [Rating type] + '] > 4 THEN ''A'' WHEN [' + [Rating type] + '] > 3 THEN ''B'' WHEN [' + [Rating type] + '] > 2 THEN ''C'' ELSE ''F'' END AS [' + [Rating type] + '], '  FROM #MyTableDistinct 
SELECT @MyVar2 = LEFT(@MyVar2, LEN(@MyVar2) - 1)

--Build a SQL string to be later execute
--This is where all of the PIVOT magic happens
DECLARE @MySQLStatement nvarchar(max)
SET @MySQLStatement = 'SELECT [Rating as at],' + @MyVar1 +  ' INTO #MyPivotTable FROM 
    (SELECT [Rating as at],[Rating type],Rating from #MyTable) AS p1
    PIVOT (
        avg(Rating) FOR [Rating type] IN (' + @MyVar1 + ') 
    ) as p2;SELECT [Rating as at], ' + @MyVar2 + ' FROM #MyPivotTable;DROP TABLE #MyPivotTable;'

--Execute the SQL string
EXEC(@MySQLStatement)

DROP TABLE #MyTableDistinct
DROP TABLE #MyTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T01:20:02.897

获取数据并使用 linq 进行转换可能是最简单的。您永远无法真正获得具有 Type1、Type2 等属性的对象，因为您需要在运行时执行此操作，但您可以获得值的数组。您首先需要获取所有评级类型的列表，然后再进行第二个查询来透视数据。像这样的东西：

```
public class SomeClass
{
    public DateTime RatingDate;
    public string RatingType;
    public int Rating;
}

var data = new SomeClass[]
{
    new SomeClass() { RatingDate = DateTime.Parse("6/7/2012"), RatingType = "Type1", Rating = 1 },
    new SomeClass() { RatingDate = DateTime.Parse("6/7/2012"), RatingType = "Type2", Rating = 3 },
    new SomeClass() { RatingDate = DateTime.Parse("6/7/2012"), RatingType = "Type3", Rating = 5 },
    new SomeClass() { RatingDate = DateTime.Parse("8/7/2012"), RatingType = "Type1", Rating = 5 },
    new SomeClass() { RatingDate = DateTime.Parse("8/7/2012"), RatingType = "Type2", Rating = 2 },
    new SomeClass() { RatingDate = DateTime.Parse("8/7/2012"), RatingType = "Type3", Rating = 4 },
    new SomeClass() { RatingDate = DateTime.Parse("8/7/2012"), RatingType = "Type4", Rating = 1 }
};

var ratingTypes = data.Select(i => i.RatingType)
    .Distinct().OrderBy(i => i).ToArray();

var results = data.GroupBy(i => i.RatingDate)
    .Select(g => new { RatingDate = g.Key, Ratings = ratingTypes.GroupJoin(g, o => o, i => i.RatingType, (o, i) => i.Select(x => x.Rating).Sum()).ToArray() })
    .ToArray(); 
```

如果您愿意，可以将组加入拆分为一个单独的函数，使其更具可读性：

```
Func<IEnumerable<SomeClass>, int[]> func
    = group => ratingTypes.GroupJoin(group, o => o, i => i.RatingType, (o, i) => i.Select(x => x.Rating).Sum()).ToArray();

var results = data.GroupBy(i => i.RatingDate)
    .Select(g => new { RatingDate = g.Key, Ratings = func(g) })
    .ToArray(); 
```

# android - Android facebook图表发布多个用户相同的消息

> ID：11379785
> 
> 赞同：0
> 
> 时间：2012-07-08T00:31:07.403
> 
> 标签：android, facebook, facebook-opengraph

我在 Andorid 中使用 facebook 打开图形提要对话框在朋友墙上发帖。我使用上面的代码在朋友墙上发布。

有没有办法在同一个对话框中（同时）将此消息发布给多个用户？

```
 params.putString("to", friendID); 

         params.putString("name",name);             
         params.putString("description",description);
         params.putString("picture", picture);
         params.putString("link", link);
         params.putString("caption", caption);

Utility.mFacebook.dialog(this, "feed", params, new PostOnFriendWallRequestListener()); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T06:16:33.303

您可以使用“发送至”对话框

[http://developers.facebook.com/docs/reference/dialogs/send/](http://developers.facebook.com/docs/reference/dialogs/send/)

您可以在其中指定一个用户，`TO`然后您的用户将能够包含更多用户或组以将有效负载发送到。

笔记，

> 要将消息发送到的用户 ID 或用户名。对话框出现后，用户可以指定要向其发送消息的其他用户、Facebook 群组和电子邮件地址。将内容发送到 Facebook 群组会将其发布到群组的墙上。

# sublimetext - ST2：如何重新绑定查看功能列表的键？

> ID：11379787
> 
> 赞同：0
> 
> 时间：2012-07-08T00:31:17.840
> 
> 标签：sublimetext

我已经从 emacs 切换到 Sublime Text 2。为了快速移动文件，我安装了 emacs 键绑定。

现在我想大致了解文件中的代码。谷歌搜索，我可以看到有一个功能可以做到这一点，通常可以通过点击“Ctrl+r”来访问。

此键现在绑定到 emacs 样式的搜索功能。

再次搜索，我可以看到我可以通过编辑一个名为 .sublime-keymap 的文件来创建一个新的键绑定。

我在我的系统中找不到这个文件。

我应该在哪里找到这个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T00:36:40.003

该应用程序的首选项菜单为您提供了打开设置和键盘映射的链接。

物理上，它位于平台特定的 Sublime 包位置 -> 包 -> 用户

# mysql - MySQL 查询帮助，多表

> ID：11379792
> 
> 赞同：0
> 
> 时间：2012-07-08T00:33:20.270
> 
> 标签：mysql

我有一个应用程序，它有一个表，其中存储了此查询的所有数据：

选择项目，姓名，地址，城市，州，邮编，纬度，经度，过期时间，照片，(((acos(sin((".$submission->latitude."*pi()/180)) * sin(( `latitude`*pi()/180))+cos((".$submission->latitude."*pi()/180)) * cos(( `latitude`*pi()/180)) * cos(((".$submission -> 经度。”- `longitude`)*pi()/180))))*180/pi())*60*1.1515*1.609344) 作为距离具有`Offers` 距离 < 150 和到期 > '$daytime - 6'按距离排序;

基本上，查询会找到选定的信息，执行计算以找到与 $submission->latitude/longitude 的距离并按这些距离排序。

由于一些外包开发工作，现在选择数据分布在 3 个表中：表业务：business_id、name、address、city、state、zip

表位置：business_id、location_id、纬度、经度

表提供：business_id、item、expiration、photo

我有很多时间获取查询以在拆分表结构上产生相同的结果。我已经尝试在 business_id 变体上加入 JOIN，但似乎抱怨未知列和/或每个派生表都必须有自己的别名。

我绝不是一个好的 MySQL 查询构建器，因此我要求在正确的方向上推动我如何处理这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T00:56:41.550

您必须简单地加入您的查询

```
$t1 = business table
$t2 = location tabe
$t3 = offers table

SELECT $t1.*,
       $t2.location_id,($t2.latitude .. compute ),($t2.longitude ... compute),
       $t3.item, $t3.expiration, $t3.photo
FROM $t1
JOIN $t2 on $t1.business_id = $t2.business_id
JOIN $t3 on $t3.business_id = $t1.business_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-25T04:11:12.413

这段代码应该可以做到。

```
Select b.name, b.address, b.city, b.state, b.zip, c.location_id,     c.latitude, c.longitude, d.item, d.expiration, d.photo
FROM business b LEFT JOIN location c
ON b.business_id = c.business_id
LEFT JOIN offers d
ON b.business_id = d,business_id; 
```

# javascript - jQuery点击事件PreventDefault

> ID：11379794
> 
> 赞同：7
> 
> 时间：2012-07-08T00:34:17.977
> 
> 标签：javascript

如果我有`a`标签：

```
<a id="delete-event" href="/delete/1234">Delete</a> 
```

还有一些提示确认删除的javascript：

```
 $("#delete-event").click(function(e) {
    e.preventDefault();

    bootbox.confirm("Are you sure you wish to delete this?", function(confirmed) {
        if(confirmed) {
            return true;
        }
    }); 
}); 
```

我认为这样做`e.preventDefault()`会阻止`a href`射击，但事实并非如此。当我单击 a 标签时，它只是转到 url，而不执行 javascript。我怎样才能使这项工作？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-08T00:44:14.537

此代码有效：

您不能只是做`return true`并期望链接在您完成后触发`e.preventDefault()`。我不得不`bootbox.confirm()`用 JS 确认替换你的，但它仍然可以工作。

```
$("#delete-event").click(function(e) {
    e.preventDefault();
    var a = confirm("yes?");
    if(a) window.location = $('#delete-event').attr('href');
});​ 
```

[**演示**](http://jsfiddle.net/kvSPM/1/)

尝试用我上面提供的代码块替换您的代码块。如果可行，请`bootbox`重新输入您的确认信息，然后重试。这会告诉你错误在哪里。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-08T01:27:48.453

最好只在需要时才阻止它。例如，如果用户从确认框中选择了“取消”，则阻止默认设置。

```
$("#delete-event").click(function(e) {
    if (!confirm('Are you sure you wish to delete this?')) {
        e.preventDefault();
    } 
});​ 
```

演示：http: [//jsfiddle.net/SCDX/](http://jsfiddle.net/SCCDX/)

通常，当您需要确认时，这是完成它的最佳方式，并且在提交表单之前进行确认更有用。

当您要求确认时，我不确定 bootbox 是否会复制浏览器的行为。所以在这种情况下它可能不起作用。如果是这种情况，更好的方法是在某处设置标志。

```
$("#delete-event").click(function(e) {
    if (!$(this).data('confirmed')) {
       e.preventDefault()
    } else {
       bootbox.confirm("Are you sure you wish to delete this?", function(confirmed) {
          if(confirmed) {
              $(this).data('confirmed', 1).click();           
          }
       });        
    }
});​

// Disclaimer: This code is untested. clicking on the link may cause data loss. lol 
```

不知何故，我不喜欢 window.location 方法，因为它可能导致附加到此元素的任何其他事件失败。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-14T18:35:46.743

我也遇到了这个问题。

您可以使用 window.location 使浏览器访问新页面，但当前页面不会记录在浏览器历史记录中（至少使用谷歌浏览器）。

因此，我同意 SMathew 的观点，即应该触发新事件。但是由于某些安全原因，jQuery 触发的锚点上的点击事件不会使浏览器访问新页面。最后我发现以下代码有效。

```
$("a.confirm").on('click', function(e) {
    if (!$(this).data('confirmed')) {
        e.preventDefault();
        var a = this;
        bootbox.confirm("Are you sure?", "No", "Yes", function(result) {
            if(result) {
                $(a).data('confirmed', 1);
                if (document.createEvent) {
                    var evObj = document.createEvent('MouseEvents');
                    evObj.initEvent('click', true, true);
                    a.dispatchEvent(evObj);
                }
                else if (document.createEventObject) {
                    a.fireEvent('onclick');
                }
            }
        });
    }
}); 
```

我只是在谷歌浏览器中测试了上面的代码，我从[https://getsatisfaction.com/issuu/topics/opening_the_issuu_smartlook_viewer_with_my_flash_website?utm_content=topic_link&utm_medium=email&utm_source=reply_notification找到了火灾事件代码](https://getsatisfaction.com/issuu/topics/opening_the_issuu_smartlook_viewer_with_my_flash_website?utm_content=topic_link&utm_medium=email&utm_source=reply_notification)

更多的

我发现这篇文章[https://stackoverflow.com/a/18132076/1194307](https://stackoverflow.com/a/18132076/1194307)，可以使用[jQuery.simulate来解决这个问题。](https://github.com/eduardolundgren/jquery-simulate/blob/master/jquery.simulate.js)我的最终代码如下所示：

```
$("[data-toggle=confirm]").on('click', function(e) {
    var a = $(this);
    if (!a.data('confirmed')) {
        e.preventDefault();

        var question = a.data('question');
        if (!question) question = 'Are you sure?';

        var yes = a.data('yes');
        if (!yes) yes = 'Yes';

        var no = a.data('no');
        if (!no) no = 'No';

        bootbox.confirm(question, no, yes, function(result) {
            if(result) {
                a.data('confirmed', 1).simulate('click');
            }
        });
    }
}); 
```

它适用于锚点和表单按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T00:36:04.720

你需要`return false;`锚标签。

看到[这个 jsFiddle](http://jsfiddle.net/brundage/7erUK/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-21T07:57:49.997

试试这个代码：

```
$(".SelectedPassengers").each(function () {
            debugger;

        if ($(this).text() == "") {
            debugger;
            var id = this.id.split('-');
            alert("Please Select Passenger " + id[1]);
            var h = "" + this.id;
          // $(this).preventDefault();
           //$('#' + h).focus();
           //this.preventDefault();
           stopEvent = "enter";
        }

    });
    if (stopEvent != "") {
        stopEvent = "";
        event.preventDefault();
        return false;
    } 
```

# html - HTML5 电子邮件输入类型 电子邮件不接受任何内容

> ID：11379795
> 
> 赞同：0
> 
> 时间：2012-07-08T00:34:21.127
> 
> 标签：html, xhtml, email-validation

我有 2 个不同的 xhtml 页面。第一个与第二个具有相似的内容，但是当我提交页面时，第二个代码中的电子邮件输入除了任何值外都没有，并说“请匹配请求的格式”。这里可能是什么问题？

第一个.xhtml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type" />
    <meta name="viewport" content="width=320; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />
    <link rel="stylesheet" href="css/info_page.css" type="text/css" media="all" />
    <script type="text/javascript">
function validateForm()
{
var x=document.forms["res_sign_up"]["password1"].value;
var y=document.forms["res_sign_up"]["password2"].value;
if ( x != y )
  {
  alert("Sifreleriniz ayni olmalidir.");
  return false;
  }
}
    </script>
    <title></title>
  </head>
  <body> 
    <script type="text/JavaScript" src="css/custom.js"></script>
    <form name="res_sign_up" action="cgi-bin/res_edit_profile.py" onsubmit="return validateForm()"
      method="POST">
      <div id="baslik"> <img src="css/images/profil_duzenle_baslik.png" id="img1" />
        <a href="http://twitter.com/me" class="img2" title="T"></a> </div>
      <br />
      E-mail adresi:
      <p><input type="email" class="text1" name="email" required="required" /></p>
      <p>Şifre:</p>
      <p><input type="password" class="text1" name="password1" required="required" /></p>
      <p>Şifre (tekrar):</p>
      <p><input type="password" class="text1" name="password2" required="required" /></p>
      <p>Restoran Adı:</p>
      <p><input type="text" class="text1" name="isim" required="required" /></p>
      <p>Telefon No:</p>
      <p><input type="tel" class="text1" name="telno" maxlength="10" required="required" /></p>
      <p>İl:</p>
      <p><input type="text" class="text1" name="il" required="required" /></p>
      <p>İlçe:</p>
      <p><input type="text" class="text1" name="ilce" required="required" /></p>
      <p>Semt:</p>
      <p><input type="text" class="text1" name="semt" required="required" /></p>
      <p>Tam Adres:</p>
      <p><input type="text" class="text1" name="tamadres" required="required" /></p>
      <p>Restoran Türü:</p>
      <p>
        <select name="tur" required="required" class="list">
          <option value="cafe">Cafe</option>
          <option value="cinmutfak">Çin Mutfağı</option>
          <option value="deniz">Deniz Ürünler</option>
          <option value="dunya">Dünya Mutfağı</option>
          <option value="ev">Ev Yemekleri</option>
          <option value="fastfood">Fast Food</option>
          <option value="gurme">Gurme</option>
          <option value="italyan">İtalyan Mutfağı</option>
          <option value="japon">Japon Mutfağı</option>
          <option value="kebapturk">Kebap ve Türk Mutfağı</option>
          <option value="kofte">Köfte</option>
          <option value="pasta">Pasta ve Tatlı</option>
          <option value="pide">Pide</option>
          <option value="pizza">Pizza</option>
        </select>
      </p>
      <p>Çalışma Saatleri:</p>
      <p>Pazartesi: <input type="text" class="text1" name="saatler1" value="09:00-22.30"
          required="required" /></p>
      <p> Salı:          <input type="text" class="text1" name="saatler2" value="09:00-22.30"
          required="required" /></p>
      <p> Çarşamba:<input type="text" class="text1" name="saatler3" value="09:00-22.30"
          required="required" /></p>
      <p> Perşembe: <input type="text" class="text1" name="saatler4" value="09:00-22.30"
          required="required" /></p>
      <p> Cuma:       <input type="text" class="text1" name="saatler5" value="09:00-22.30" /></p>
      <p> Cumartesi:<input type="text" class="text1" name="saatler6" value="11:00-22.00"
          required="required" /></p>
      <p> Pazar:       <input type="text" class="text1" name="saatler7" value="-"
          required="required" /></p>
      <p>Rezervasyon Durumu:</p>
      <p>
        <select name="rezervasyon" required="required" class="list">
          <option value="hici">Hafta içi yapılabilir.</option>
          <option value="hsonu">Hafta sonu yapılabilir.</option>
          <option value="htum">Hafta içi ve hafta sonu yapılabilir.</option>
          <option value="yapma">Yapılamaz</option>
        </select>
      </p>
      <p>Ödeme Seçenekleri:</p>
      <input type="checkbox" class="styled" name="payment" value="Nakit" />Nakit<br />
      <input type="checkbox" class="styled" name="payment" value="Kredi Karti" />Kredi
      Kartı<br />
      <input type="checkbox" class="styled" name="payment" value="SmarTicket" />SmarTicket<br />
      <input type="checkbox" class="styled" name="payment" value="Ticket Yemek Ceki" />Ticket
      Yemek Çeki<br />
      <input type="checkbox" class="styled" name="payment" value="PassCard" />PassCard<br />
      <input type="checkbox" class="styled" name="payment" value="Sodexho Yemek Ceki" />Sodexho
      Yemek Çeki<br />
      <input type="checkbox" class="styled" name="payment" value="Multinet" />Multinet<br />
      <input type="checkbox" class="styled" name="payment" value="SetCard" />SetCard<br />
      <input type="checkbox" class="styled" name="payment" value="Winwin Yemek Ceki" />Winwin
      Yemek Çeki
      <p><a href="history.go%28-1%29;return%20true;" class="back" title="T"></a><input
          type="image" class="onay1" formmethod="post" name="myclicker" value="" /></p>
    </form>
  </body>
</html> 
```

second.xhtml（不提交任何值）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <title>login_page</title>
    <meta name="viewport" content="width=320; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />
    <link rel="stylesheet" href="css/login_page.css" type="text/css" media="all" />
  </head>
  <body>
    <script type="text/JavaScript" src="css/custom.js"></script>
    <form name="res_sign_up" action="cgi-bin/login_check.py"
      method="POST"><img src="css/images/hosgeldiniz.png" /> <img src="css/images/logo.png" />
      <input type="email" pattern="E-mail Adresi" class="login1" name="email" required="required" />
      <input type="password" class="login1" name="password" required="required" />
      <img class="login4" alt="remember" src="css/images/beni_hatirla.png" /> <input
        type="checkbox" class="styled" name="remember" /> <a href="http://twitter.com/me"
        class="login3" title="T"></a> <input type="image" class="login5" formmethod="post"
        name="myclicker" value="" /> <a href="http://twitter.com/me" class="login6"
        title="T"></a> </form>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T07:44:06.870

在您的第二种形式中，您有以下内容：

```
<input type="email" pattern="E-mail Adresi" class="login1" name="email" required="required" /> 
```

您已添加 ，`pattern="E-mail Adresi"`这意味着输入必须与该正则表达式匹配。并且没有有效的电子邮件地址与正则表达式“E-mail Adresi”匹配。我怀疑您想使用`placeholder="E-mail Adresi"`.

# c++ - 在 C++ 中返回一个对象

> ID：11379797
> 
> 赞同：10
> 
> 时间：2012-07-08T00:34:27.510
> 
> 标签：c++, c++11

我从主要是 C 和 Java 的背景中学习 C++，我很好奇在 C++ 中返回对象而不必复制对象的最佳方法是什么。据我了解，C++11 引入了右值引用 (&&) 来从临时变量中移动数据（与复制相反）。例子：

```
std::string getStr(){
   return "Hello";
}

std::string &&hello = getStr(); 
```

我能想到的另一种方法是使用共享指针。

```
std::tr1::shared_ptr<std::string> getStr(){

    std::tr1::shared_ptr<std::string> hello(new std::string("Hello"));
    return hello;

}

auto hello = getStr(); 
```

我在想也许右值参考更好，但在我使用它之前我想先征求第二意见。哪个更好？

如果不使用构造函数设置类中的字段，是否也建议它们是右值引用？例子：

```
class StringHolder{

   public:
     std::string &&str;
};

StringHolder sh;
sh.str = getStr(); 
```

非常感谢你们！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-08T00:50:29.023

这个问题可能会作为重复而关闭。这是一个经常被问到的问题。不过我还是想回答一下。

在 C++11 中，当你是一个对象的客户端时`std::string`，你应该按值传递它，而不用太担心效率：

```
std::string getStr(){
   return "Hello";
}

std::string hello = getStr(); 
```

在这个级别，您不需要关心右值引用。只要知道可以**非常**有效地`std::string`从右值（例如从 的返回`getStr()`）中“复制”。此“复制”实际上称为“移动”，并且会自动启用，因为您正在从右值（匿名临时）复制。

 **不要试图通过恢复引用计数来优化复制。*只有在需要共享所有权语义*时才使用引用计数。这种说法并不*总是*正确的。但是对于学习基础知识来说，它已经足够接近了，这是一个很好的经验法则。

当您设计需要按值传递的类时，您需要开始担心右值引用：

```
class Widget
{
    // pointer to heap data
public:
    // ...
}; 
```

对于右值引用和移动语义的简要介绍，[N2027](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n2027.html)是一个不错的教程。N2027 太长，无法在这里粘贴，但足够短，便于阅读。 `std::string`遵循 N2027 中规定的基础知识，使您能够无罪地传递它。您可以在您的`Widget`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T02:18:26.637

默认情况下，您应该简单地按值传递。如果一个函数不需要修改或复制参数，那么它可以被 接受`const&`，否则只需按值接受参数。按值返回对象并让它移动语义或 RVO 以避免复制。

* * *

C++ 使用并鼓励“按值”传递对象。移动语义是一项功能，它允许代码执行此操作，同时制作的副本比引入它们之前更少。通常代码不需要直接使用右值引用类型来获得移动语义的好处。这是因为临时对象是右值，重载决议将自动选择采用右值引用的方法。

例如：

```
std::string getStr(){
   return "Hello";
}

std::string hello = getStr(); 
```

此代码使用移动语义。`return "Hello"`临时构造一个字符串，因此用于初始化返回值对象的构造函数将是移动构造函数（尽管实际上返回值优化几乎肯定会避免这种移动）。那么返回的值`getStr()`是临时的，所以选择的构造函数`string hello`又是move构造函数。

我认为你也可以这样做`std::string &&hello = getStr();`，但这可能没有必要，因为`hello`已经被移动构造了。

> 我能想到的另一种方法是使用共享指针

我不认为智能指针通常是一个好主意，除非你真的需要它们提供的特定所有权语义。使用简单的“按值”传递是一个很好的默认值，移动语义通常允许您使用它而无需额外复制。

> 如果不使用构造函数设置类中的字段，是否也建议它们是右值引用？

不，成员引用通常不是一个好主意。它们使事情变得更加复杂，甚至不允许您按照示例所示使用它们。如果您的示例代码被允许，那么`sh.str = getStr();`将是未定义的行为，因为您试图分配给一个不存在的对象。就像`std::string *str; *str = getStr();`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T00:47:25.900

通常，您可以通过返回对成员变量的 const 引用来避免复制。例如：

```
class Circle {
    Point center;
    float radius;
public:
    const Point & getCenter() const { return center; };
}; 
```

这相当于`return &center`在执行中，实际上很可能会被内联，从而导致调用者直接（只读）访问成员。

在您构造一个临时返回的情况下，编译器可能会省略额外的副本作为优化，您不需要特殊的语法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-08T00:42:00.420

右值引用会快得多，因为它们是一种内在的语言特性，而不是引用计数类。在这里使用智能指针或共享指针不会带来任何好处，并且会大大降低清晰度。但是，右值引用是为此类事物*设计的语言的一部分。*使用右值引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-08T00:48:23.340

如果你想在这种情况下使用智能指针，也许 unique_ptr 是一个更好的选择。**

# android - Android，相对布局高度超出屏幕

> ID：11379800
> 
> 赞同：0
> 
> 时间：2012-07-08T00:35:29.413
> 
> 标签：android

相对布局高度，当高度大于屏幕时如何捕获？my_rl.getheight() 不起作用，返回的大小是屏幕的高度，而不是我的相对布局。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T00:46:52.837

尝试`View.getMeasuredHeight()`改用。[解释](http://developer.android.com/reference/android/view/View.html#SizePaddingMargins)。

# java - 将字符串 XML 解析为 Java 对象时的 OutOfMemory

> ID：11379805
> 
> 赞同：0
> 
> 时间：2012-07-08T00:36:27.787
> 
> 标签：java, parsing, jaxb, netty, xstream

问题 - 解析 XML 字符串时，我的程序中的内存利用率一直在增长。

我有一个在 TCP 端口上实时传输的 XML 流。
我使用 Netty 提取 xml 数据，然后使用 XStream 将 XML 字符串反序列化/解组为 Java 对象树。

当我使用 netbeans 配置文件监控内存消耗时，我看到 HEAP 随着时间的推移而增长，最后 JVM 抛出 OutOfMemory 异常。我跟踪了调用堆栈，并附上了我正在运行的一个测试的屏幕截图。

当我将 XML 字符串反序列化/解组为 Java 对象时，似乎正在发生内存消耗。

我在 XStream 中尝试了不同的解析器来进行解析——XPP3、KXML、STAX。我什至尝试过 JAXB 而不是 XStream 来解组。无论我使用什么解析器，问题仍然存在。

到目前为止，我已经尝试了所有这些不同的解析器，但我有同样的问题。

```
 xstream1 = new XStream(new KXml2Driver());
  xstream2 = new XStream(new StaxDriver());
  xstream3 = new XStream(new JDomDriver());
  xstream4 = new XStream(new Xpp3Driver()); 
```

就像我提到的那样，我什至尝试使用 JAXB 来解组而不是 XStream ......仍然是同样的问题。

如果您查看附加的图像，它的这个 Arrays.copyOfRange 调用就在显示的 char[] 正下方......无论它是哪个解析器，这个调用总是显示在跟踪的顶部。

我完全不知道如何解决或解决这个问题

请注意 - 我不是从文件中读取 XML。我得到一个包含小 XML 块的实时数据流。我提取每个块以将其转换为 Java 对象以进行进一步处理

谢谢 ![使用 Netbeans Profiler 从内存消耗数据中提取的分配堆栈跟踪](../Images/f7277cb55a5ddd4ffa00160efe1e246a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T01:03:20.770

好吧，根据您向我们展示的证据，最简单的解释是您的 JVM 堆太小。尝试按照该命令的[手册条目](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)中的说明添加“-Xmx”选项。`java`

如果这不起作用，那么您需要更深入地了解您的应用程序正在做什么：

*   这些“小”XML 块的大小是否有上限？你能得到一个比你允许的更大的块吗？

*   您的应用程序的处理是否将每个块中的内容保存在一个长期存在的内存数据结构中？你可以为该数据结构的大小设置一个上限吗？也许通过扔东西？（或者通过使用“弱引用”以便 GC 将它们丢弃？）

*   您的应用程序是否泄漏内存？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T06:21:53.310

上面的答案是可靠的。我只想补充一点，内存中的对象图可能很昂贵。如果我理解您的描述，您有一个包含许多小 XML 块的 XML 流？SAX 解析以及管道方法可能是您的答案。当 SAX 解析器找到每个工作块时，它会将其传递给下游进程，而无需将所有对象拉入内存。

# r - 列出 CRAN 上的所有功能

> ID：11379807
> 
> 赞同：7
> 
> 时间：2012-07-08T00:36:42.687
> 
> 标签：r, cran

假设我正在尝试运行一个来历不明的脚本，并且其中一个功能来自脚本未加载的包（疏忽，可能是由`.Rprofile`编写它的人加载的）。我怎样才能找到这个函数驻留在哪个包中？

在CRAN 上编译了[一些信息](http://cran.R-project.org/web/packages/packages.rds)，不需要用户在本地下载/安装所有 R 包；但是据我所知，它只能访问DESCRIPTION文件。RSiteSearch 及其网络等价物似乎可以访问所有 CRAN 软件包的在线数据库，其中可能会提供所有功能的列表。有什么方法可以访问这些信息吗？

谢谢。

编辑：我知道`sos::findFn`，`utils::RSiteSearch`并且[search.r-project](http://search.r-project.org/)；我想要的是获得这些工具使用的原始数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T00:54:09.493

您可以使用该`sos`软件包，例如：

```
library(sos)
findFn("adply") 
```

输出是一个 html，包括指向在线文档包的链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-18T17:11:52.517

`collidr`包会给你这个

```
library(collidr)
collidr::CRAN_packages_and_functions() 
```

它将从 CRAN 返回一个包列表及其功能，即

```
 #          package_names                function_names
# 1                   A3                    A3-package
# 2                   A3                            a3
# 3                   A3                       a3.base
# 4                   A3                a3.gen.default
# 5                   A3                         a3.lm
# 6                   A3                         a3.r2
# 7                   A3                       housing
# 8                   A3            multifunctionality
# 9                   A3                       plot.A3
# 10                  A3               plotPredictions
#    ...             ...                           ...
# 294181            ZVCV                          getX
# 294182            ZVCV              helper_functions
# 294183            ZVCV                           VDP
# 294184            ZVCV                          zvcv
# 294185            ZVCV                  ZVCV_package
# 294186             zyp                   confint.zyp
# 294187             zyp                           zyp
# 294188             zyp                       zyp.sen
# 294189             zyp                 zyp.trend.csv
# 294190             zyp              zyp.trend.vector 
```

# java - 无法在 Eclipse 中重构重命名

> ID：11379808
> 
> 赞同：21
> 
> 时间：2012-07-08T00:37:07.467
> 
> 标签：java, eclipse, refactoring, rename

如果我对某些东西进行重构重命名，它会尝试做一会儿，然后将其恢复为之前的名称。不显示任何错误或任何表明有问题的迹象。

* * *

我刚刚重新启动了 Eclipse，现在情况更糟了。之前，至少选择*Refactor > Rename*会将名称“装箱”并假装它允许您进行重构。现在，重新启动后，选择*Refactor > Rename*什么都不做。

Win7 64 位
Eclipse Indigo build 20110615-0604

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T22:24:12.647

尝试从 Eclipse 中删除项目（不要删除磁盘上的项目内容），然后重新加载它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-17T17:03:20.900

我想在这里为其他一些答案添加一些信息。

[Archenoth 的回答](https://stackoverflow.com/a/24249846/411282)指出，您可以通过在重命名操作上运行 Preview 获得更多信息。我花了一段时间才弄清楚如何进行预览：再次键入重命名键以获取对话框。有时预览没有给出错误信息（没有 ppoup 的快速重命名也没有），但在对话框中单击“确定”确实说明了更多信息。

[MutantXenu](https://stackoverflow.com/a/16874437/411282)通过进入工作区中的文件在日志中找到信息，但您也可以通过转到错误日志视图（来自 Cmd-3）在 Eclipse 中获取这些信息

当我遇到这个问题时，错误日志将我指向这个失败的断言：“搜索方法声明没有找到原始元素”，这导致了一些未解决的错误。（我正在运行开普勒，但问题显然难以复制，而且我没有看到它已解决的证据。请参阅[此处](https://bugs.eclipse.org/bugs/show_bug.cgi?id=338871)和[此处](https://bugs.eclipse.org/bugs/show_bug.cgi?id=148014)。）

您可以通过选择方法并使用 Cmd-G（或 Ctrl-G：搜索 > 声明 > 工作区）来查看您是否遇到此特定错误。Eclipse 无法找到您尝试重命名的方法，并且搜索结果为空。

我的案例表明错误可能与不同类中的同名方法有关。当使用一种方法出现问题时，它不会影响大多数其他方法。

刷新、Project->Clean 和重新启动 Eclipse 对我没有帮助。 [凯文的回答](https://stackoverflow.com/a/12867927/411282)对我有用：“尝试从 Eclipse 中删除项目（不要删除磁盘上的项目内容），然后重新加载它。”

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-02T12:10:15.903

虽然在极少数情况下直接在编辑器中重命名方法不起作用，然后 IDE 在按下返回键后恢复原始方法名称 - 一种“不可知模式”:-)，但当我通过 Refactoring -> **Change Methode Signature**执行相同操作时，在右上角我更改了方法名称，然后我收到一条完整详细的错误消息：“执行重构时发生意外异常...原因：匿名 #1 in .... in lambda #1 ...在……工作副本……不存在。”

这表明，当要重命名**的方法在 lambda 或匿名类的上下文中使用时**，重命名方法会触发此失败。

要检查，注释掉 lambda 或匿名类中的出现，然后重构/重命名可以像我的情况一样按预期工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-01T15:45:46.380

我在使用 Eclipse Helios 时遇到了这个问题。我查看了工作区的 .metadata 目录并打开了 .log 文件。它有很长的与该错误相关的引用链，但其中的相关部分是：

> java.lang.NoClassDefFoundError: org/eclipse/jdt/core/IMethod

和

> java.lang.reflect.InvocationTargetException at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:421) at org.eclipse.jface.window.ApplicationWindow$1.run(ApplicationWindow.java:759) at org.eclipse .swt.custom.BusyIndi​​cator.showWhile(BusyIndi​​cator.java:70) 在 org.eclipse.jface.window.ApplicationWindow.run(ApplicationWindow.java:756) 在 org.eclipse.ui.internal.WorkbenchWindow.run(WorkbenchWindow.java :2606) 在 org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper.perform(RefactoringExecutionHelper.java:191) 在 org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper.perform(RefactoringExecutionHelper.java:151) 在org.eclipse.jdt.internal.ui.refactoring.reorg.RenameLinkedMode 中的 org.eclipse.jdt.ui.refactoring.RenameSupport.perform(RenameSupport.java:197)。doRename(RenameLinkedMode.java:361) at org.eclipse.jdt.internal.ui.refactoring.reorg.RenameLinkedMode$EditorSynchronizer.left(RenameLinkedMode.java:119) at org.eclipse.jface.text.link.LinkedModeModel.exit( LinkedModeModel.java:341) 在 org.eclipse.jface.text.link.LinkedModeUI$4.run(LinkedModeUI.java:1194) 在 org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35) 在 org. eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:134) 在 org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4041) 在 org.eclipse.swt.widgets.Display.readAndDispatch(Display.爪哇：3660）341) 在 org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35) 在 org.eclipse.swt 的 org.eclipse.jface.text.link.LinkedModeUI$4.run(LinkedModeUI.java:1194)。 widgets.Synchronizer.runAsyncMessages(Synchronizer.java:134) 在 org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4041) 在 org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3660)341) 在 org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35) 在 org.eclipse.swt 的 org.eclipse.jface.text.link.LinkedModeUI$4.run(LinkedModeUI.java:1194)。 widgets.Synchronizer.runAsyncMessages(Synchronizer.java:134) 在 org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4041) 在 org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3660)

我去了**Help** > **Install New Software** > **What is already installed**，然后选择与 org.eclipse.swt 相关的所有内容并单击**Uninstall**。重新启动 Eclipse 后，问题消失了，我能够再次正常重构/重命名。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-14T21:22:42.010

如果您的项目中有任何错误，重构将不起作用。

修复错误，或者只是注释掉被检测为错误的部分以运行重构。

这对我有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-01T19:48:55.893

我也一直在为这个问题苦苦挣扎。当我查看 Eclipse 的错误日志视图时，我注意到每次尝试重命名变量或方法时，都会遇到这种异常：

```
java.lang.reflect.InvocationTargetException at 
org.eclipse.jface.operation.ModalContext.run(ModalContext.java:421) at 
org.eclipse.jface.window.ApplicationWindow$1.run(ApplicationWindow.java:759) at
org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70) at 
org.eclipse.jface.window.ApplicationWindow.run(ApplicationWindow.java:756) at
org.eclipse.ui.internal.WorkbenchWindow.run(WorkbenchWindow.java:2606) at 
org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper.perform(RefactoringExecutionHelper.java:191) at
org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper.perform(RefactoringExecutionHelper.java:151) at
org.eclipse.jdt.ui.refactoring.RenameSupport.perform(RenameSupport.java:197) at
org.eclipse.jdt.internal.ui.refactoring.reorg.RenameLinkedMode.doRename(RenameLinkedMode.java:361) at
org.eclipse.jdt.internal.ui.refactoring.reorg.RenameLinkedMode$EditorSynchronizer.left(RenameLinkedMode.java:119) at 
org.eclipse.jface.text.link.LinkedModeModel.exit(LinkedModeModel.java:341) at 
org.eclipse.jface.text.link.LinkedModeUI$4.run(LinkedModeUI.java:1194) at
org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35) at
org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:134) at 
org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4041) at 
org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3660) 
```

我注意到这一切都是从 SWT 库开始的。尝试更新 SWT，但由于某些原因，我什至无法找到已安装的 SWT。所以我只是通过帮助安装了**SWT Tools** 3.106.0.v20170503-0851 -> 安装新软件，很高兴地解决了这个问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-14T15:14:56.620

尝试以下（对我有用）：

1.  删除项目
2.  新建一个同名的java项目

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-04T01:07:46.923

使用 4.4 (Luna)，我在大型重构后遇到了跨项目重构问题 - 删除 /.metadata/.plugins/org.eclipse.jdt.core 文件夹为我解决了这个问题

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-18T21:12:30.553

当我尝试重命名变量和方法名称时，我看到了与 OP 完全相同的问题。重新启动 Eclipse 后，Refactor->Rename 功能正常工作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-06-16T18:24:30.643

如果某些不太明显的事情导致重构失败，您可以通过尝试预览重构而不是尝试执行重构来查找问题。

正如 Dicky Moore 所提到的，您不能在项目中出现错误进行重构......但这些并不总是 Eclipse 标记的代码错误或构建路径问题。所以有时它看起来好像没有任何错误，但它仍然会失败。如上所述，“预览”将在错误对话框中显示这些问题，即使它们从未出现在其他地方。

从那里，您可以配置您的项目以修复错误（一个常见的问题是重构尝试解释它不应该考虑的输出文件夹，这可以通过在`Build Path > Source`设置中排除文件夹来修复。）或卸载有问题的插件.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-11-15T06:00:13.253

一个对我有用的快速解决方法：

*   将静态修饰符添加到您的方法签名中（通过对所有引用进行即时编译“强制”编译错误）
*   重构方法名称（错误仍然存​​在）
*   删除静态修饰符（使用更改的方法签名重新编译，错误消失......）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-05-26T12:05:07.027

有同样的问题：

*   左键单击java类中的属性名称
*   右键点击
*   重构
*   改名
*   重命名
*   按回车
*   绿色进度条出现在页脚菜单上，但从未完成
*   要恢复，我必须杀死 eclipse（您可以尝试退出，但在保存工作台状态时它会挂起）

我在 Windows 上运行它：

*   版本：Kepler Service Release 2
*   版本号：20140224-0627

我通过以下方式“修复”了该行为：

*   对文件进行小改动
*   保存文件
*   重试了重构，它工作正常（尽管等待重构完成大约 5 秒有一个不舒服的延迟）

项目中没有错误，挂起时日志中没有任何明显的内容，从工作区删除/重新导入项目也不起作用（并在重新导入之前删除 .classpath .project 和 .settings ）。

# c# - 在 XNA 中创建曲线

> ID：11379812
> 
> 赞同：2
> 
> 时间：2012-07-08T00:37:47.480
> 
> 标签：c#, xna

为了练习，我想在 XNA 中创建一个类似“Achtung, die Kurve”（http://www.achtungdiekurve.net）的游戏，基本上是 Tron 和 Snake 的混合体。为此，我想知道如何绘制曲线，考虑到线/曲线继续增长，我需要某种碰撞检测。您对如何应对这一挑战有任何建议和/或代码示例链接吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T01:59:01.273

XNA Curve Creator 向您展示了如何使用 Curve 类： [http ://creators.xna.com/en-US/utilities/curveeditor](http://creators.xna.com/en-US/utilities/curveeditor)

有关曲线类的更多信息：http: [//msdn.microsoft.com/en-us/library/microsoft.xna.framework.curve.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.curve.aspx)

这里是关于如何让相机跟随曲线的演示，所以我相信它可以根据您的需要进行调整：http: [//msdn.microsoft.com/en-us/library/bb203908 (XNAGameStudio.10 ).aspx](http://msdn.microsoft.com/en-us/library/bb203908(XNAGameStudio.10).aspx)

它还取决于您在跟踪对象时是要使用基于粒子的方法还是基于条带的方法。这两种方法都有几个示例，[这个较旧的一个](http://www.paradeofrain.com/2007/10/continuous-2d-ribbons-in-xna/)用于条带方法，[这个示例](http://www.catalinzima.com/samples/game-features-replicator/world-of-goo-cursor/)用于基于粒子的方法。

使用[GraphicsDevice.DrawUserPrimitives()](http://msdn.microsoft.com/en-us/library/bb196411.aspx)。从精灵的先前位置生成顶点列表，或者如果精灵移动过于锯齿，则使用上面链接的 Curve 类。

参考：[http](http://forums.create.msdn.com/forums/p/60257/370769.aspx)
://forums.create.msdn.com/forums/p/60257/370769.aspx 参考：[如何使用 XNA 画线？](https://stackoverflow.com/questions/270138/how-do-i-draw-lines-using-xna)

# qt - 网格模式中的 QListView：自动拉伸行/列上的固定项目

> ID：11379816
> 
> 赞同：2
> 
> 时间：2012-07-08T00:38:19.063
> 
> 标签：qt, qt4

我想制作一个简单的网格`QListView`，例如 3x3，但是中的`gridSize()`选项`QListView`不能这样工作，它是所有子小部件的宽度/高度`QListView`，我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T00:47:37.700

```
class Widget(QtGui.QWidget):
    def __init__(self):
        super(Widget, self).__init__()
        self.resize(600,400)
        layout = QtGui.QVBoxLayout(self)
        self.list = QtGui.QListWidget()
        self.list.addItems(['item_%d' % i for i in xrange(9)])
        self.list.setViewMode(self.list.IconMode)
        self.list.setResizeMode(self.list.Adjust)
        self.list.installEventFilter(self)
        layout.addWidget(self.list)

    def eventFilter(self, obj, event):
        if obj is self.list and event.type() == event.Resize:
            gridsize = self.list.size()/3
            # remove from width to account for the scrollbar
            gridsize.setWidth(gridsize.width()-15)
            self.list.setGridSize(gridsize)

        return super(Widget, self).eventFilter(obj, event) 
```

虽然我认为 gridSize 是整个列表，但它实际上是每个单元格。这里的关键是将调整大小模式设置为调整，以便它始终重新评估项目大小，并且每次列表小部件调整大小时都要不断调整 gridSize。在我的示例中，我使用了事件过滤器，但您也可以将列表子类化并重新实现 resizeEvent。

列表的大小除以 3，然后为滚动条删除一些填充。结果是项目以 3 倍宽度布置，并随着视图不断调整大小。

# php - PHP：在div中包含php文件时重复请求

> ID：11379818
> 
> 赞同：0
> 
> 时间：2012-07-08T00:38:41.280
> 
> 标签：php, html, include, request

**当单击菜单项以在名为#layouts**的 div 中加载 php 文件时，我遇到了一个大问题，因为每次单击都会重复请求，如下图所示：

![重复请求萤火虫](../Images/8919f055820a14f7f4153cad75789f42.png)

我用这个：

**仪表板.php**

```
<nav id="navigation">
    <ul>
    <li><a href="#">Catálogo de... >></a>
        <ul>
        <li><a href="#s1">Perfiles</a></li>
        <li><a href="#s2">Clientes</a></li>
        <li><a href="#s3">Usuarios</a></li>
        <li><a href="#s4">Marcas,Productos,SubProductos</a></li>
        </ul>
    <div class="clear"></div>
    </li>
    <li><a href="#s5">Captura de Póliza</a></li>
    <li><a href="#s6">Levantamiento de Servicio</a></li>
    </ul>
</nav>
<div id="layouts">
    <h1>Seleccione una opción del menú</h2>
</div> 
```

**函数.js**

```
$('#navigation li a').click(function() {
    $('#loading').show();
    page = $(this).attr('href');
    if (page == "#s1") {$('#layouts').load("./catperfiles.php");}
        else if (page == "#s2") {$('#layouts').load("./catclientes.php");}
            else if (page == "#s3") {$('#layouts').load("./catusuarios.php");}
                else if (page == "#s4") {$('#layouts').load("./catorganizacion.php");}
                    else if (page == "#s5") {$('#layouts').load("./poliza.php");}
                        else if (page == "#s6") {$('#layouts').load("./servicio.php");}

/*$.ajax({
    type: "GET",
    url: "./"+layout+".php",
    success: function(html) {
        $('#layouts').html(html);
        $('#loading').hide();
   }
});*/

}); 
```

**服务端.php**

```
<?php include 'config.php' ?>
<h1>Levantamiento del servicio</h1>
<h3>Elija una opción:</h3>
<input id="clientexist" name="typeclient" value="ce" type="radio" />
<label for="clientexist">Cliente existente</label>

<input id="clientnew" name="typeclient" value="cn" type="radio"/>
<label for="clientnew">Cliente nuevo</label>

<div id="areaTypeClient"></div> 
```

**配置文件**

```
<meta charset="utf-8">
<link rel="stylesheet" href="css/style.css" type="text/css"/>
<script src="js/jquery-1.7.min.js" type="text/javascript"></script>
<script src="js/functions.js" type="text/javascript"></script> 
```

奇怪的是，在页眉中没有这一行的php页面中

```
<?php include 'config.php' ?> 
```

这不是重复请求。

如果您对这种类型的导航有更好的想法，包括 div 中的 php 文件，我想分享。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T00:50:21.880

看起来您的 ajax 调用会在每个请求中输出您的 javascript，而每次请求都会附加一个新的附加点击处理程序，从而以指数方式增加每次点击的请求数。可能在 config.php 文件的某处引用了您的 javascript 代码或文件。

解决方案：不要在每个 ajax 调用中包含相同的 javascript 代码。或者，这将确保只处理一个点击处理程序：

```
$('#navigation li a').unbind('click').click(function() {
    $('#loading').show();
    page = $(this).attr('href');
    if (page == "#s1") {$('#layouts').load("./catperfiles.php");}
        else if (page == "#s2") {$('#layouts').load("./catclientes.php");}
            else if (page == "#s3") {$('#layouts').load("./catusuarios.php");}
                else if (page == "#s4") {$('#layouts').load("./catorganizacion.php");}
                    else if (page == "#s5") {$('#layouts').load("./poliza.php");}
                        else if (page == "#s6") {$('#layouts').load("./servicio.php");}

}); 
```

# jquery - 具有多个表单的全局自定义 jQuery-validator 方法问题

> ID：11379822
> 
> 赞同：0
> 
> 时间：2012-07-08T00:39:36.863
> 
> 标签：jquery, jquery-validate, portal

我在一个 HTML 页面上有多个表单。对于相同的方法名称，每个表单都有不同的验证逻辑。但是，jQuery-validator 只允许全局添加方法，例如下面的方法 'equal'：

```
$.validator.methods.equal = function(value, element, param) {
    // form1 logic
    return value == param;
}; 
```

我尝试了 jQuery.noConflict() 但这并没有阻止 form2 覆盖 form1 的方法。

需要的原因是，我正在开发具有多个 portlet 的门户应用程序。每个 portlet 都像独立的 web 应用程序（但没有 HTML、HEAD、BODY 标记，只是 HTML 的片段）。每个 portlet 不知道彼此。它们一起形成一个单一的 HTML 页面，门户将组合所有 portlet HTML 片段并添加常见的 HTML、HEAD、BODY 标记。

我需要一种方法来允许 jQuery 的多个实例或 jQuery-validator 的多个实例，或者非全局声明自定义验证器方法的方法。

帮助赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T01:06:46.507

这是一个丑陋的 hack，但您可以将 portlet 放在 iframe 中。每个 iframe 都单独运行 javascript。你可以有多个 jquery 的“实例”。

但是，iFrame 会导致各种其他问题，因此这是最后的解决方案。

# java - 对 PHP 页面的 HTTP 请求，尝试登录

> ID：11379827
> 
> 赞同：0
> 
> 时间：2012-07-08T00:42:24.493
> 
> 标签：java, php, http, session, web-applications

我想开发一个java应用程序在网页上进行一些处理，但是这个页面需要先登录。所以，我检查了登录页面的 HTML 页面，现在有了用户名和密码字段的名称，方法“post”并准备发出 post 请求。但是，表单中的操作 =“” 所以，我不知道我必须请求的 URL 是什么。

有没有解决办法，能不能得到登录后的页面？！是否也可以使用该页面内的链接来导航和获取更多页面？如果这个网站正在建立一个会话来处理登录或未登录的使用，我可以假装有那个会话并像这个网站一样行事吗？？？

很抱歉这个长问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T00:44:47.593

如果表单目标为空，则表示表单提交到同一页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T00:46:20.267

表单的`method="post" action="yourScriptToHandleTheLogin.php"`一部分告诉浏览器将验证用户凭据的脚本的名称。这是您在数据库中进行检查并更新会话详细信息以授予他们访问权限的地方。它可以是同一个文件，或者您可以有一个不同的文件，在它们被验证后将它们重定向回来。

# css - 如何并排获取div

> ID：11379832
> 
> 赞同：3
> 
> 时间：2012-07-08T00:44:40.113
> 
> 标签：css, layout, html

我有基于集合中的 N 个节点生成子 div 的代码，可能是一个或多个节点，因此生成的 html 如下所示：

```
<div class='parent_div'>
<div class ='child_div'></div>
<div class ='child_div'></div>
</div>

<div class='parent_div'>
<div class ='child_div'></div>
<div class ='child_div'></div>
<div class ='child_div'></div>
</div> 
```

让所有子节点并排的 CSS 会是什么样子？

这是 jsFiddler 中更强大的示例，它更接近实际情况。我无法让它在 Firefox 或 IE 中运行：

[http://jsfiddle.net/scarleton/GqjtC/10/](http://jsfiddle.net/scarleton/GqjtC/10/)

我在这里寻求帮助的部分内容是如何最好地使列间距正确。我应该使用百分比还是实际像素？我不知道，我对任何一个都持开放态度，只是需要一些建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T01:04:03.920

您可以使用`float:left`或`display:inline-block`

漂浮

```
.child_div{
   float: left;
}
.parent_div{
    clear:both;
} 
```

[小提琴](http://jsfiddle.net/f3BtH/1/)

内联块

```
.child_div{
   display: inline-block;
   vertical-align: top;
} 
```

[小提琴](http://jsfiddle.net/f3BtH/)

笔记

*   空格占用空间（块级元素的开头或结尾除外），使用浮动来克服这一点，或删除空格
*   浮动元素的尺寸不会影响父元素，除非有兄弟清除浮动
*   边框和填充额外宽度使用[box-sizing](https://developer.mozilla.org/En/CSS/Box-sizing) : border-box 来克服这个

内联块 - [http://jsfiddle.net/GqjtC/8/](http://jsfiddle.net/GqjtC/8/)

浮动 - [http://jsfiddle.net/GqjtC/9/](http://jsfiddle.net/GqjtC/9/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T00:47:35.080

尝试：

```
.child_div {
    float: left
} 
```

我在想的几点：

*   我会考虑制作一个更具上下文的选择器，而不是仅仅将 child_div 向左浮动，例如：

    ```
    .parent_div > div {
        float: left;
    } 
    ```

    这基本上说`div`作为直接子级的 s`.parent_div`将被浮动。

*   浮动有缺点：如果所有子容器都是浮动的，则父容器不会保留子容器的高度。因此，如果`.parent_div`应该是围绕孩子的边框框，您可能需要额外的 CSS 或标记。

*   `display: inline-block`有缺点：您可能会遇到跨浏览器兼容性问题。

如果列数是动态的，那么设置宽度可能会很棘手。不确定这是否适用于您，但我建议您查看网格系统，例如[960.gs](http://www.960.gs)。祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T01:00:08.297

如果你想让它们*都*排成一行，你就必须知道每一个的宽度。如果您只是希望它们像通常的文本一样连续循环，则有几种不同的解决方案。

## 选项1

您可以将它们视为 a 中的列表项，`ul`并将其用于您的 css：

```
.parent_div .child_div {
  ...
  display: inline;
} 
```

## 选项 2

您可以将每个浮动`div`到左侧或右侧，具体取决于您希望它们来自哪一侧：

```
.parent_div .child_div .from_right {
  ...
  float: right;
}

.parent_div .child_div .from_left {
  ...
  float: left;
} 
```

## 选项 3

就像我上面说的，你需要知道每个的宽度`div`才能让它们都出现在屏幕上的一行中。如果你不知道会有多少元素，你可以考虑制作一个`table`（*喘气！*）来保存它们而不是使用`divs`，如下所示：

```
<table class="data">
  <tr>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</table> 
```

只要确保一切都在同一个`tr`。否则，行将换行。这样做的好处是您可以循环创建脚本以使一定数量的灵活元素连续显示，甚至无需触摸您的 css。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-08T00:56:50.303

[Razvan](https://stackoverflow.com/users/961487/razvan)和Tuanderful[所说](https://stackoverflow.com/users/280909/tuanderful)的，但您还需要在某处设置宽度 - 无论是，还是`.parent_div`两者。`.parent_div``.child_div`

祝你好运！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-08T00:47:44.777

添加到 child-div 中：

```
.child_div{
   ...
   float: left;
   ...
 } 
```

# android - 如何让您的移动 AIR 应用程序一直在后台运行？

> ID：11379834
> 
> 赞同：2
> 
> 时间：2012-07-08T00:44:57.110
> 
> 标签：android, ios, actionscript-3, mobile, air

我在 AIR for mobile 中创建了一个闹钟类型的应用程序。为了让它工作，我认为它需要一直运行。

基本上，我需要检查它是否是某个时间（检查存储的值 - 该值可能在本地 AIR SQLLite 数据库、在线、本地存储（AIR cookie）中。当满足这些条件时，例如计时器完成，我需要它启动应用程序。

***我将如何让我的应用程序一直运行，或者是否有更好或替代的方式来做我想做的事情？有无头模式吗？***假设我是初学者移动开发人员和初学者 AIR 开发人员。

注意：当我说启动应用程序时，我的意思是应用程序以全屏方式启动，而不是通知徽章或消息。虽然，如果第一个选项不可行，是否可以显示原生警报类型消息，当单击“确定”或任何原生方式时，会打开应用程序？

**更新**
似乎在 Android 中有一种方法可以将您的应用程序作为服务运行。当通知或消息来自 Google Cloud Messaging 时，它会运行服务类，并且任何侦听的处理程序都会处理消息。我认为，如果需要，您可以启动该应用程序。注意：我不确定是否需要 GCM，因为它将是客户端。意图可能是我想要做的。:P

它仍然很粗略，但据我所知，我正在添加更多细节。

我还不确定这与 AIR 应用程序有何关系。我认为可能通过本机扩展。

GCM 入门 - [http://developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)
GCM 概述 - [https://support.google.com/googleplay/android-developer/support/bin/answer.py? hl=zh-CN&answer=2663268](https://support.google.com/googleplay/android-developer/support/bin/answer.py?hl=en&answer=2663268)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T07:38:54.783

AFIK，在 Android 上，应用程序在默认情况下最小化时在后台运行（真正的多任务处理）。Adobe AIR 在最小化时默认自动将帧速率降低到 4fps。降低的 fps 可能会影响闹钟的计时器事件延迟，因此如果您依赖客户端触发警报，我建议您使用基于 enter_frame 的计时器代理。注意：如果您希望服务器触发警报和/或最大化应用程序，您也可以在应用程序最小化时查询您的服务器。

在 iOS 中，情况就不同了，因为默认情况下应用程序不会在最小化时运行。唯一的例外是当您的应用使用其中一种`UIBackgroundModes`（在应用清单中设置）时。自从 4S 出现以来，App Store 对允许任何具有 UI 后台模式的应用程序都变得非常严格（bc of battery-gate）。例如，如果您尝试使用 提交`UIBackgroundModes=audio`，您的闹钟应用程序将被关闭，因为音频不连续（只有在闹钟响起时才会听到！）。因此，对于 iOS，您必须使用本地通知或推送通知。

本地通知由客户端设置，具有特定的延迟，就在最小化应用程序之前（在应用程序停用时是这样做的好地方）。不幸的是，到目前为止，对于 AIR-iOS 的本地通知 ANE (http://juankpro.com/wordpress/2012/06/17/using-the-local-notification-ane-on-ios)，您不能通过客户端设置闹钟音效，但您可以每分钟重复一次默认的本地通知声音，从闹钟响起开始。

希望这个对你有帮助。

# hadoop - Point in Polygon Hadoop 实现

> ID：11379837
> 
> 赞同：1
> 
> 时间：2012-07-08T00:46:38.677
> 
> 标签：hadoop, geometry, geospatial, computational-geometry, apache-pig

我有一个带有一些（经纬度）坐标的大日志文件，以及一个带有多边形集合的数据库。多边形数据集现在适合内存，但将来可能不适合。

我想加入这两个数据集，以便知道对于每个日志坐标，它包含在哪些多边形中。

你知道使用 Hadoop（或 Pig，如果有帮助的话）解决这个问题的好方法是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T03:43:49.730

对于到达此处的搜索结果，以下一项或多项将很有用：

[Hadoop 的 GIS 工具](https://github.com/Esri/gis-tools-for-hadoop)

[空间Hadoop](http://spatialhadoop.cs.umn.edu/)

[HadoopGIS](http://confluence.cci.emory.edu:8090/display/HadoopGIS/Home)

（披露：我是 Hadoop GIS 工具的开发人员之一，受雇于 Esri。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T00:55:31.357

乍一看，我建议这样做：

拥有一张使用 MultipleInputs 的地图（数据库多边形和日志文件的拆分）。对于日志文件拆分中的每个点，它会检​​查该点是否属于多边形，如果属于，则输出对 (point,polygon)。

reducer 聚合这些信息并输出：（点，它所属的多边形集）。

该解决方案不假定多边形的孔集适合主存储器。

如果您确定确实如此，我认为在开始作业之前查询数据库并将查询结果作为文件放在 DistributedCache 中会更有效。

# wordpress - WordPress子域正在建设中

> ID：11379850
> 
> 赞同：0
> 
> 时间：2012-07-08T00:48:48.150
> 
> 标签：wordpress, subdomain

我正在运行`WordPress 3.3.2`模式。`multisite``sub-domain`

我想添加一个新的`sub-domain`，但让它“离线”，直到我完成它的工作。是否有捷径可寻？

我知道如果它是一个站点，我可以`if`在头文件中添加一个，并且该站点将只对我在线，但在这种情况下，我的所有站点都使用该主题，使其成为相同的头文件，从而制定此解决方案无效的。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T08:45:00.120

您可以检查主题中的当前博客 ID，例如：

```
<?php if (get_current_blog_id() == 1): ?>
  <?php //do stuff ?>
  <?php return ?>
<?php endif ?> 
```

# c# - windows窗体奇怪的函数调用跳转

> ID：11379853
> 
> 赞同：0
> 
> 时间：2012-07-08T00:48:57.200
> 
> 标签：c#, .net, winforms, visual-studio-2010

我正在制作一个 Windows 窗体应用程序，它涉及 C# 中的多个窗体。
我用 ShowDialog() 调用主表单中的第二个表单。

然后我尝试用自定义对象填充组合框（在第二个表单上）。自定义类有一个将 DataTable 转换为 ArrayList 的方法。但是，每当我尝试向 ArrayList 添加项目时，都会引发 SplitPanel 绘制事件的事件处理程序。此外，该面板放置在主窗体上。

这是代码：

这是我显示第二种形式的地方：

```
frmInsertSurovina insertSurovina = new frmInsertSurovina(0);
        insertSurovina.ShowDialog(); 
```

这是我填充组合框的地方：

```
private void frmInsertSurovina_Load(object sender, EventArgs e)
    {
        if (mode == 0) button1.Text = "Внеси";
        else button1.Text = "Зачувај";

        DB data=new DB();
        DataTable devizi = data.GetDevizi();
        DeviziCollection collDevizi = new DeviziCollection();
        collDevizi.LoadCollection(devizi);
        cmbDeviza.DataSource = collDevizi.Collection;
        cmbDeviza.DisplayMember = "Text";
        cmbDeviza.ValueMember = "Value";

        //some other code here
    } 
```

这是自定义类：

```
public class DeviziCollection
{
    public ArrayList Collection { get; set; }
    public DeviziCollection()
    {
    }
    public void LoadCollection(DataTable table)
    {
        foreach (DataRow row in table.Rows)
        {
            Deviza item = new Deviza();
            item.Text = row["Naziv"].ToString();
            item.Value = row["ID"].ToString();
            Collection.Add(item);
        }
    }

} 
```

现在，在最后一行`Collection.Add(Item);`执行`frmInsertSurovina_Load`beaks 和程序跳转到未定义的地方。（我之前提到过绘制事件引发，但我从代码中删除了它，它不再引发。当我调试时，程序只是继续运行，加载事件处理程序未完成。有趣的是Paint 事件处理程序的代码就在我调用第二种形式的代码块之后）。

这可能是一个错误吗？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T01:18:39.880

毕竟是个例外。我刚刚添加

```
Collection=new ArrayList(); 
```

在 LoadCollection() 方法中。

# asp.net - Telerik 控件显示不正确 --no css

> ID：11379854
> 
> 赞同：2
> 
> 时间：2012-07-08T00:49:20.913
> 
> 标签：asp.net, telerik

我有一个简单的网页设置进行测试。当我在调试模式下运行网站时，控件显示正确。但是，当我将网站移至我的服务器时，控件显示不正确。

例如，DatePicker 函数只有一个显示“打开日历弹出窗口”的链接，而不是像这里的小日历图标（http://demos.telerik.com/aspnet-ajax/calendar/examples/datepicker/custompopup/defaultcs .aspx)

而且 RadComboBox 也只有`select`下拉箭头而不是下拉箭头。

没有 aspx.cs 可以向你们展示，但是这里是我的 aspx。我很确定我错过了一些东西。

这是aspx

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="testingpage.aspx.cs" Inherits="testingpage" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
<telerik:RadScriptManager ID="RadScriptManager1" runat="server">
</telerik:RadScriptManager>
<div>
    <telerik:RadDatePicker ID="RadDatePicker1" runat="server">
    </telerik:RadDatePicker>
    <telerik:RadComboBox ID="RadComboBox1" runat="server">
    </telerik:RadComboBox>
</div>
</form>
</body>
</html> 
```

我确实移动了包含所有 dll 的 bin 文件夹。我在集成模式下运行 .net4.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:20:18.687

这可能与 Telerik 控件生成的 AXD 有关 - 图像弹出窗口是 AXD 路径，并且没有在服务器上正确处理。

查看页面上的源代码并尝试直接浏览到您可以找到的任何 AXD (Telerik AXD)。

如果您的服务器和本地计算机有单独的 web.config 文件，请比较它们是否有任何差异，尤其是在 httpHandlers 周围。

确保在您的 IIS 配置中处理 AXD

确保您已将 Telerik DLL 安装/部署到您的服务器。你是通过安装程序在本地安装的吗？您也希望在服务器上执行此操作。您的 GAC 是否包含任何 Telerik.*.dll 文件？他们也应该被部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T05:13:18.797

几个建议：

a) 首先，如果你部署这个应用程序并在你自己的机器上的IIS下以“发布”模式运行它，它是否可以正常工作？（即不在 Visual Studio 下运行）

b) 如果 (a) 在本地机器上工作，其他 ASP.NET 应用程序是否在服务器上工作？如果没有，很可能 ASP.NET 没有安装在服务器上。在“程序和功能”下的“打开和关闭 Windows 功能”下勾选此项

c) 如果 (a) 在本地机器上运行而其他应用程序在服务器上运行，那么 Telerik DLL 文件可能没有正确发布到 BIN 文件夹。

附言。使用 Firebug (Firefox) 或 F12 开发人员工具 (IE)，这可能会帮助您识别问题。

# html - 我的第二帧去哪儿了？

> ID：11379856
> 
> 赞同：0
> 
> 时间：2012-07-08T00:49:25.557
> 
> 标签：html

当我在 Firefox 中查看此页面时，在第一个 IFRAME 之后没有任何内容被呈现。Firebug 甚至不承认它们的存在。在 IE 中，我看到两个 IFRAME，但只有“1”td，而不是 2 和 3。

```
<html>
<head>
<title>Frame Test</title>
</head>
<body>
<table>
<tr>
<td>1</td>
<td><iframe src="frame1.html"></td>
<td>2</td>
<td><iframe src="frame2.html"></td>
<td>3</td>
</tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T00:51:57.247

iframe 必须格式正确（标签必须关闭）。每次`<iframe>`添加一个之后`</iframe>`，您的问题就会得到解决。看到[这个jsfiddle](http://jsfiddle.net/3A2um/)

# design-patterns - 异步图片上传模式

> ID：11379857
> 
> 赞同：3
> 
> 时间：2012-07-08T00:49:26.937
> 
> 标签：design-patterns, amazon-s3, flask, image-uploading

**上下文**：我正在构建一个网站，用户在其中上传图像作为列出项目过程的一部分。我想在上传表单中向他们展示图像的预览，因为它既美观又有助于用户上传和描述他们的项目。

**问题：** 为了显示图像的预览，我需要将它上传到我的服务器，因为浏览器的沙盒（我无法将图像数据导入 JS，除非通过提交文件输入表单）。但是，我们使用基于用户输入数据的标识符存储图像，以保持它们的组织性（在我们的例子中，我们清理名称并将其用作文件名，在 /useruploads/user_id 文件夹中）。

虽然我可以更改文件的命名方案以消除用户输入的依赖性（即 sha1 文件），但上传到 s3 并调整图像大小是一项昂贵的操作，我不想不必要地占用资源。如果我在没有调整大小和生成缩略图的情况下上传图像，那么在提交包含项目信息的表单后，应用程序将不得不从 S3 流式传输数据，调整大小并生成缩略图，然后重新上传图像，这似乎有些迂回。

我觉得这是一个很常见的问题，我想知道在这方面是否有人对如何处理图像上传有任何模式或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T20:24:24.673

使用 FileReader API，您实际上可以从磁盘读取二进制 blob，然后在提交表单之前纯粹在客户端使用该图像！

见[http://www.onlywebpro.com/2012/01/24/create-thumbnail-preview-of-images-using-html5-api/](http://www.onlywebpro.com/2012/01/24/create-thumbnail-preview-of-images-using-html5-api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:41:41.797

大多数服务都会有一个专门的位置来在您上传时自动存储缩略图。在我的服务中，我也将原始图像存储在 s3 上，并将映射到其缩略图的相应虚拟路径存储在缩略图的用户元数据中。

因此，从 UI 的角度来看，我们最初只显示缩略图，相对而言下载成本更低。一旦用户点击图像，就会从该图像的元数据中接收到原始图像位置。有了这个，我们只有在用户请求时才能得到原始图像。

当请求原始图像并在容器中呈现时，可以在下载时调整图像大小。

# security - Grails 如何记录安全插件活动

> ID：11379863
> 
> 赞同：6
> 
> 时间：2012-07-08T00:50:41.240
> 
> 标签：security, grails, logging, plugins

我们在 Grails 应用程序中配置了 Spring Security，但看起来我们没有完全正确配置。它正在拦截每一个单独的加载，并且每个页面加载都需要很长时间。

如何记录所有安全插件活动？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T23:07:15.270

也许使用`log4j`：

```
info 'org.springframework.security' 
```

或这个新插件： http: [//grails.org/plugin/spring-security-eventlog](http://grails.org/plugin/spring-security-eventlog)

# javascript - 使用 Rails 助手和嵌入式 ruby 时使用 JQuery 生成 html 图像

> ID：11379864
> 
> 赞同：0
> 
> 时间：2012-07-08T00:50:53.527
> 
> 标签：javascript, jquery, ruby-on-rails-3

我以前在 javascript 中执行以下操作：

```
 $('<img>')
        .attr('class', 'logo')
        .attr('src', '/images/logos/all/logo_one_beta.png')
        .appendTo('#container'); 
```

现在我正在移植到 rails，我一直在 html 中使用嵌入式 ruby​​ 和 image_tag rails helper，例如

```
 <%= image_tag "logos/all/logo_one_beta.png", :class => "logo" %> 
```

logo_one_beta.png 位于 app/assets/images/logos/all/ html 中的嵌入式 ruby​​ 工作正常，但我想像以前一样使用 jquery appendTo 方法通过 javascript 将它添加到 html 中。

我尝试了以下方法，但它不起作用：

```
 $('<%= image_tag "logos/all/logo_one_beta.png", :class => "logo" %>').appendTo('#container'); 
```

我也试过

```
 $("#container").append('<%= image_tag "logos/all/logo_one_beta.png", :class => "logo" %>') 
```

我没有收到任何错误，图像根本不显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T01:47:58.520

那个代码在哪里？在 .js 文件上？还是在 .js.erb 视图中？你不能在一个简单的 js 文件中使用 ruby​​ 代码

使用您喜欢的浏览器的调试器来查看那里发生了什么

我认为无论如何您都不需要将其移植到rails

# javascript - 如何关闭字母按钮？

> ID：11379865
> 
> 赞同：2
> 
> 时间：2012-07-08T00:51:04.467
> 
> 标签：javascript, jquery

在下面的代码中有一堆字母按钮：

```
<?php
    $a = range("A","Z");
?>

<table id="answerSection">
    <tr>

<?php
    $i = 1;
    foreach($a as $key => $val){
        if($i%7 == 1) echo"<tr><td>";
        echo"<input type=\"button\" onclick=\"btnclick(this);\" value=\"$val\" id=\"answer".$val."\" name=\"answer".$val."Name\" class=\"answerBtns answers answerBtnsOff\">";      
        if($i%7 == 0) echo"</td></tr>";
        $i++;
    }
?>
    </tr>
</table> 
```

现在下面的代码能够打开一个回答按钮：

```
$('#answer'+btn).addClass("answerBtnsOn"); 
```

但我想要做的是能够打开一些答案按钮并关闭其他答案按钮。

例如，如果答案是 A，那么我希望打开上面的代码行所做的按钮“A”，但我希望关闭所有其他字母按钮。如何关闭其他字母按钮？

这里的代码将关闭字母按钮`addClass("answerBtnsOff");`，

更新：

我也有一个小问题。如果“答案”是 A，则打开字母按钮“A”，这很好，但如果答案是“B D”，那么它应该打开字母按钮“B”和“D”，但它没有t 打开任何按钮。有人知道这是为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T01:32:40.110

一般模式是将所有按钮重置为关闭状态，然后仅启用所需的按钮。

```
// reset all answer buttons to the off state
// remove any on/off classes
$("#answerSection").find("button").removeClass("answerBtnsOff").removeClass("answerBtnsOn");

// set all buttons to off
$("#answerSection").find("button").addClass("answerBtnsOff");

// now turn on only the buttons that are valid
$("#answerA").removeClass("answerBtnsOff").addClass("answerBtnsOn");
$("#answerB").removeClass("answerBtnsOff").addClass("answerBtnsOn"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T12:16:19.340

关于您的更新，如果我对您的理解正确，则您有一串以空格分隔的答案。如果是这种情况，这段代码应该处理它：

```
var answers = btn.split(" ");
var answer_selector = '#answer'+answers.join(",#answer");
$(".answerBtns").removeClass("answerBtnsOn"); 
$(answer_selector).addClass("answerBtnsOn"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T01:02:44.293

嗯，这可能太简单了，但是您可以先将它们全部关闭，然后再将选定的那些重新打开吗？

**编辑：**

尝试这个：

```
$(".answers").addClass("answerBtnsOff");
$('#answer'+btn).addClass("answerBtnsOn"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T01:05:02.407

尝试以下选择器组合：

```
$('#answer'+btn1+', #answer'+btn2).addClass("answerBtnsOn").removeClass("answerBtnsOff");
$('[id^="answer"]').not('#answer'+btn1+', #answer'+btn2).addClass("answerBtnsOff").removeClass("answerBtnsOff"); 
```

# android - 调用 FragmentTransaction.Commit() 时出现异常

> ID：11379866
> 
> 赞同：0
> 
> 时间：2012-07-08T00:51:07.863
> 
> 标签：android, android-layout, android-fragments

我正在尝试做一些应该简单的事情，我的主要布局是这样的

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainContainer"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <fragment
        android:name="io.raindance.kalimat.grid.GridFragment"
        android:id="@+id/gridControlInMainView" 
        android:layout_width="match_parent"
        android:layout_height="match_parent" />        

</LinearLayout> 
```

主要活动中没有 Java 代码；现在 GridFragment 的代码和布局是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gridFragmentMainContainer"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    >

</LinearLayout> 
```

Java 代码：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    // Load the layout of the rack tile
    View view = inflater.inflate(R.layout.grid_fragment, null, false);

    // Get the root linear layout to add the rows to it
        LinearLayout root = (LinearLayout) view.findViewById(R.id.gridFragmentMainContainer);

        // Build the rows of the grid
            int rowsId = 21;
        for (int i = 0; i < 15; i++) {
            // Create the linear layout that represents a row in the grid
            LinearLayout row = new LinearLayout(this.getActivity());
            row.setId(rowsId++);
            row.setOrientation(LinearLayout.HORIZONTAL);

            row.setLayoutParams(new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, 10, 1.0f));

            // Build the cells of the grid
            for (int j = 0; j < 15; j++) {
                // Create the cell fragment
                CellFragment cellFragment = new CellFragment();
            // Add the cell fragment to the row fragment
                            this.getFragmentManager().beginTransaction().add(row.getId(), cellFragment).commit();
}
        // Add the row to the root element
        root.addView(row);
    }

    return view;
} 
```

CellFragment 布局如下所述，没有 Java 代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/lll1"
    android:layout_weight="1"
    android:layout_width="0dp"
    android:layout_height="match_parent">

</LinearLayout> 
```

当我运行应用程序时，由于 commit() 调用而出现异常，导致当我删除 commit() 调用时未引发异常，并且无论如何这些行已成功创建并添加到层次结构中。

我得到以下异常 07-08 03:36:27.414: E/AndroidRuntime(835): java.lang.RuntimeException: Unable to start activity ComponentInfo{io.raindance.kalimat/io.raindance.kalimat.test.KalimatActivity}： java.lang.IllegalArgumentException：没有为片段 CellFragment {4103c790 #1 id=0x7f050005} 找到 id 0x7f050005 的视图

我一直在寻找这个问题的原因和解决方案 2 天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T08:26:10.277

`Activity`需要创建（并保存其状态）才能执行 a ，`FragmentTransaction`否则您将收到异常。请尝试执行您的交易`onActivityCreated`。

# javascript - 如何使用 JavaScript 更改样式参数？

> ID：11379867
> 
> 赞同：2
> 
> 时间：2012-07-08T00:51:11.110
> 
> 标签：javascript

一些样式参数可以很容易地更改，例如：

```
document.getElementById(element).style.height = height + "px"; 
```

但是如何更改那些以 开头的参数`-`，例如`-o-transform-origin`？

```
document.getElementById(element).style.-o-transform-origin = "top left"; // error! 
```

请建议，如何使用纯老式 JavaScript（没有 jQuery，没有 Dojo，...）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T00:55:58.557

使用括号表示法：

```
document.getElementById(element).style['-o-transform-origin'] = "top left" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T00:57:23.250

以下链接将提供一些启示：

[http://www.javascriptkit.com/javatutors/setcss3properties.shtml](http://www.javascriptkit.com/javatutors/setcss3properties.shtml)

另外，我将包含链接中的一些代码，以防链接失效！

```
function getsupportedprop(proparray) {
    var root = document.documentElement //reference root element of document
    for (var i = 0; i < proparray.length; i++) { //loop through possible properties
        if (typeof root.style[proparray[i]] == "string") { //if the property value is a string (versus undefined)
            return proparray[i] //return that string
        }
    }
}

//SAMPLE USAGE
var boxshadowprop = getsupportedprop(['boxShadow', 'MozBoxShadow', 'WebkitBoxShadow']) //get appropriate CSS3 box-shadow property
document.getElementById("mydiv").style[boxshadowprop] = "5px 5px 1px #818181" //set CSS shadow for "mydiv"​​​​ 
```

# php - 如何将 jQuery 智能添加到 webmatrix 2 beta php 文件？

> ID：11379868
> 
> 赞同：0
> 
> 时间：2012-07-08T00:51:21.893
> 
> 标签：php, jquery, webmatrix

我想使用 WebMatrix 2.0 beta 创建一个 php 站点。我想添加一些 jQuery 函数，但使用它的智能（我听说那是可能的）。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T01:23:03.277

请看这个：[http ://webmatrix.uservoice.com/forums/128313-webmatrix-suggestions/suggestions/2308591-support-javascript-intellisense-through-vsdoc-file](http://webmatrix.uservoice.com/forums/128313-webmatrix-suggestions/suggestions/2308591-support-javascript-intellisense-through-vsdoc-file) **或** [http://forums.asp.net/t/ 1729245.aspx/1](http://forums.asp.net/t/1729245.aspx/1)

**vsdoc**文件是您正在寻找的魔法：

有了 JavaScript 的 Intellisense，如果能够通过对其他 vsdoc 文件的引用来扩展它，那就太好了。

在这里阅读非常好：[如何从 WebMatrix 2 Beta 中的 vsdoc 文件引用中获取 JavaScript Intellisense？](https://stackoverflow.com/questions/7742313/how-do-i-get-javascript-intellisense-from-vsdoc-file-references-in-webmatrix-2-b),

希望这会有所帮助，并为您提供足够的信息`:)`

```
/// <reference path="jquery-1.6.4-vsdoc.js" /> 
```

# android - Windows 7 无法识别我的平板电脑进行 Android 开发

> ID：11379873
> 
> 赞同：0
> 
> 时间：2012-07-08T00:52:36.110
> 
> 标签：android, windows-7, device-driver

我最近从中国进口了一台平板电脑（其他地方哈哈），司机不认识它。我已经尝试为它安装谷歌驱动程序，但 Windows 7 仍然没有安装任何驱动程序。平板电脑规格如下：

*   品牌：美盈
*   API：4.0.3
*   内核版本：3.0.8+
*   内部版本号：rk29sdk mid-eng 4.0.3 ILM47K eng.root.20120209.162346 测试密钥
*   型号：MID

如果您需要任何其他信息，请询问。

**编辑：**由于这款平板电脑没有驱动程序，所以在不生根的情况下调试平板电脑的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T01:32:32.950

通常你不会从较小的公司找到任何平板电脑驱动程序，或者它们根本不起作用。我建议您使用内置在 Android ICS+ 中的无线调试。您可以在设置中简单地打开它正在开发中。只需运行“adb connect [您的 IP 地址通过 lokal WIFI]”就可以了 :)

编辑：我曾经遇到过同样的问题。我只是没有找到任何驱动程序。希望你会更幸运。但是由于您可以通过 wifi 使用 adb 这应该不是问题

Edit2：我发现 Android 中没有内置 adb over wifi。我刚刚有一个支持这个的自定义 ROM。您需要 root 访问权限才能通过 wifi 使用它。

# javascript - SQLite：从 Phonegap/Cordova 中的（文本）日期字段中选择日期和时间

> ID：11379874
> 
> 赞同：0
> 
> 时间：2012-07-08T00:53:36.697
> 
> 标签：javascript, sqlite, cordova

我正在创建一个 Phonegap/Cordova 应用程序并查询 SQLLite 中的日期。

在我的一张表中，我有一个日期字段，我已将其设置为数据类型“TEXT”，并以以下格式存储我的日期`2012-07-21 12:30:00.0000`

我可以在 SELECT 语句中使用任何函数来允许我只选择日期或时间，还是我需要提取整个值并通过 JavaScript 提取日期或时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T01:07:41.363

我解决了这个问题（就像老板一样）。

```
SELECT date(date) as date, time(date) as time FROM ...... 
```

简单的

# c - 使用 C 和 Windows 从混音器录制声音

> ID：11379878
> 
> 赞同：3
> 
> 时间：2012-07-08T00:54:34.233
> 
> 标签：c, windows, audio, record

我想录制电脑上播放的声音（不仅仅是麦克风！），就像 Audacity 一样。为此，我似乎需要录制音频混音器（音频映射器）的声音。

我想知道如何在 Windows 上使用**语言 C来做到这一点。**

谢谢！祝你今天过得愉快！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T01:13:08.280

看看**[PortAudio](http://www.portaudio.com/)** - 这里是[教程](http://portaudio.com/docs/v19-doxydocs/tutorial_start.html)和[Api 文档](http://portaudio.com/docs/v19-doxydocs/)。它也被[大胆](http://portaudio.com/apps.html)使用！

一些特点：

*   跨平台
*   开源
*   简单的
*   C 和 C++

Win Api 可能提供您需要的东西，请查看[Waveform Audio Reference](http://msdn.microsoft.com/en-us/library/ms925320.aspx)。

# c - 数组调试 C?

> ID：11379885
> 
> 赞同：0
> 
> 时间：2012-07-08T00:56:33.043
> 
> 标签：c, arrays

K&R C Programming 第 2 版中的一项作业说我必须编写一个程序来打印其输入中单词长度的直方图。我相信我知道该怎么做，但是在我刚刚了解的数组上运行测试程序时，无论我输入什么，我得到的都是“8”。这是到目前为止的程序：

```
#include <stdio.h>

/* write a program to print a histogram
of the lengths of words in its input */
main()
{
      int wl[11];
      int cc, c;

      while ((c=getchar()) != EOF);
      {
            if (c != ' ')
               ++cc;
            if (c == ' ' && cc == '1')
            {
               ++wl[0];
               c = 0;
            }
       putchar(wl[0]);
      }
} 
```

这可能只是因为我是编程的初学者，但老实说，我看不出我在哪里出错了。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T00:58:41.947

首先初始化变量：

```
int wl[11] = {0};
int cc = 0; 
```

默认情况下，内存包含 C 中的垃圾。

编辑：*超越显而易见*

*   比较`cc == '1'`并没有达到您的预期。应该是`cc == 1`
*   我猜`++wl[0]`应该是这样`++wl[cc]`。这假定最大字长为 11。
*   `c = 0`应该重置`cc`-`c`是当前字符，`cc`是当前字长
*   `putchar`需要一个字符而不是一个`int`，所以你也需要解决这个问题

不过好的开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T01:06:46.757

你在这里有很多问题。

```
main() 
```

尽管当时省略返回类型是相当普遍的，但现在已经不复存在了。你可能想把它写成：

```
int main() 
```

反而。

```
{
      int wl[11]; 
```

正如@D.Shawley 已经指出的那样，这将包含垃圾。

```
 int cc, c; 
```

他忘记指出的是，这些也会。这对 来说无关紧要`c`，但对`cc`.

```
 while ((c=getchar()) != EOF);
      {
            if (c != ' ')
               ++cc; 
```

在这里，您正在递增`cc`，但您从未先将其设置为已知值，因此您不知道它是从什么开始的，或者（因此）您的递增将产生什么结果。

```
 if (c == ' ' && cc == '1') 
```

我猜你并不是真的想要`'1'`这里——你可能只是想要`1`。也就是说，您不想`cc`与 digit进行比较`'1'`，而是与值 1 进行比较。

```
 {
               ++wl[0];
               c = 0; 
```

虽然它是无害的，但归零`c`在这里并没有太大的作用——也许你想归零`cc`？我不确定你真正想要做什么。猜测一下，您可能也不想增加`wl[0]`。

```
 }
       putchar(wl[0]); 
```

你可能也不想`putchar`在这里——你可能想写成`wl[0]`一个 int 或者（产生一个直方图）用它作为像 '*' 这样的东西的计数来打印出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T01:48:53.203

我会在这里使用 argc 和 argv （在你的 C 书中查找）。这样做的好处是它为您提供了单词的数量，并且您不必自己处理输入（让操作系统和您的标准库处理它）。您可以 malloc 大小数组（直方图存储桶），但您也可以做出“合理”的假设，以获得大多数英语单词（希望您不是德语 :-)）。

```
#include <string.h>
#include <stdio.h>

// assume longest word is "Supercalifragilisticexpialidocious"    
#define MAX_WORD_LENGTH    (35)

int main(int argc, char* argv[])
{
  size_t sizes[MAX_WORD_LENGTH] = {0};

  for (int i=0; i<argc; ++i)
  {
    size_t len = strlen(argv[i]);

    if (len < MAX_WORD_LENGTH)
    {
      ++sizes[len]; // increment bucket
    }
    else
    {
      ++sizes[0]; // too long, put in default bucket
    }
  }

  // print the buckets
  for (int i=1; i<MAX_WORD_LENGTH; ++i)
  {
    printf("%d ", sizes[i]); 
  }

  // print the default bucket
  printf("%d", sizes[0]);
} 
```

# native - 原生跨平台语言+环境

> ID：11379890
> 
> 赞同：0
> 
> 时间：2012-07-08T00:58:40.210
> 
> 标签：native, native-code

我想知道那里有哪些*本机*跨平台语言+环境。

这类似于其他人提出的其他一些问题，但是只有三个要求：

*   跨平台
*   生成标准二进制文件（.exe、elf 等）。
*   <25MB 最小可分发

二进制文件不必是本机的，因为它们可以编译为程序集。它们只需要自托管（不需要外部 VM 或解释器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T01:44:39.573

eForth 是 8MB。完整的 IDE（命令行）并移植到几乎任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T00:58:40.943

Lazarus 是一个免费的跨平台和开源 IDE，它为 Pascal 和 Object Pascal 开发人员提供了类似 Delphi 的开发体验。这意味着 IDE 包含一个完整的 GUI 构建器，并且以 GUI 开发为中心。

它是创建 Free Pascal 编译器的项目的一部分，该编译器支持多种 Pascal 方言，包括 Delphi。还有一个标准库，其中包含您所期望的许多基础知识。

[Lazarus 和 Free Pascal 网站](http://lazarus.freepascal.org/)

# ms-access - 在执行报表打开事件之前访问报表运行查询

> ID：11379893
> 
> 赞同：2
> 
> 时间：2012-07-08T00:58:52.503
> 
> 标签：ms-access, vba, ms-access-2003

我有一个名为 AdmQuery 的查询、一个名为 Admform 的表单和一个名为 AdmReport 的报告。在 Admreport 的 Open_Event 中，我调用了 AdmForm 将开始日期和结束日期输入到两个未绑定的框，并使用它来执行查询并在报告中显示其结果。

这可行，但问题是当我运行报表时，报表上的查询和打开事件一起运行，因为表单本身与报表一起打开（最初没有数据）。因此我必须关闭报告，在表格上输入日期，然后通过表格上的另一个按钮预览报告，一切都很好。

有什么方法可以延迟访问报告仅在执行 Report_Open_Event 之后运行基础查询？

我使用访问 2003。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T04:26:43.503

以对话模式打开`AdmForm`以强制程序`AdmReport`在`Report_Open`用户输入日期值时等待`Admform`。

My`AdmForm`包含一个名为 的命令按钮`cmdOK`，它的单击事件以隐藏模式重新打开表单，从而允许`AdmReport`的`Report_Open`过程继续。尽管`AdmForm`现在已隐藏，但其文本框及其包含的值将可用于`AdmQuery`（的记录源`AdmReport`）。

这是命令按钮的单击事件的代码。

```
Private Sub cmdOK_Click()
    DoCmd.OpenForm Me.Name, acNormal, , , , acHidden
End Sub 
```

这是我的`AdmReport`. 我使用 Access 2007 对其进行了测试，但相信它也应该适用于 Access 2003。

```
Option Compare Database
Option Explicit

Const mcstrForm As String = "AdmForm"

Private Sub Report_Close()
    DoCmd.Close acForm, mcstrForm
End Sub

Private Sub Report_Open(Cancel As Integer)
    DoCmd.OpenForm mcstrForm, acNormal, , , , acDialog
End Sub 
```

请注意，我包含了一个`Report_Close()`用于`AdmReport`. 目的只是关闭（现在隐藏）`AdmForm`。

# ruby-on-rails-3 - 在 Ruby on Rails 3 中检查亚马逊 S3 的文件夹大小

> ID：11379895
> 
> 赞同：3
> 
> 时间：2012-07-08T00:59:53.023
> 
> 标签：ruby-on-rails-3, amazon-s3, paperclip

我正在使用回形针将文件发送到 S3，我想知道每个用户占用了多少空间。

对于每个用户，我都有一个文件夹 user/:id/files/。

我可以在我的数据库中注册每个文件在保存时需要多少空间，但我更喜欢直接在 S3 上检查它，有一个简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T10:42:04.207

我不确定这算不算容易，请注意我是从文档中执行此操作的，但是...

Paperclip 使用 aws-sdk，所以如果你像这样直接使用它：

```
size = 0

AWS::S3::Bucket.objects.each do |object| #object should be an S3Object
  if object.metadata(name) =~ /user//:id//files/
    size += object.content_length #in bytes
  end
end 
```

您应该以每个用户使用的总字节数结束。我唯一不确定的是`name`对象/文件的元数据格式。根据[这篇文章](https://stackoverflow.com/questions/4932892/amazon-s3-folders-problem)，名称应该具有`/user/:id/files/`格式，但我不确定其他项目（例如`user`）是如何融入其中的。

当您深入研究时，您可能会对此有所改进，但我认为总体思路就在那里。

我从这些链接中得到了这个：

[AWSRubySDK](http://docs.amazonwebservices.com/AWSRubySDK/latest/frames.html)

[桶](http://docs.amazonwebservices.com/AWSRubySDK/latest/AWS/S3/Bucket.html)

[桶对象](http://docs.amazonwebservices.com/AWSRubySDK/latest/AWS/S3/Bucket.html#objects-instance_method)

[S3对象](http://docs.amazonwebservices.com/AWSRubySDK/latest/AWS/S3/S3Object.html)

[S3Object.元数据](http://docs.amazonwebservices.com/AWSRubySDK/latest/AWS/S3/S3Object.html#metadata-instance_method)

[S3Object.元数据（名称）](http://docs.amazonwebservices.com/AWSRubySDK/latest/AWS/S3/ObjectMetadata.html)

[S3Object.content_length](http://docs.amazonwebservices.com/AWSRubySDK/latest/AWS/S3/S3Object.html#content_length-instance_method)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-22T23:49:05.217

在@ScottJShea 的回答之上，您可以使用`with_prefix(prefix)`-method：

```
size = 0
AWS::S3::Bucket.objects.with_prefix('/user//:id//files/').each do |s3_object|
  size += s3_object.content_length
end 
```

或者：

```
AWS::S3::Bucket.objects.with_prefix('/user//:id//files/').inject(0) { 
  |sum, s3_object| sum + s3_object.content_length 
} 
```

还：

如果你正在遍历可能被删除的对象，你会看到一个异常，你可以像这样拯救它：

```
AWS::S3::Bucket.objects.with_prefix('/user//:id//files/').inject(0) { 
  |sum, s3_object| sum + (s3_object.content_length rescue 0)
} 
```

# javascript - 为什么jquery悬停，滑动功能在下拉菜单上闪烁？

> ID：11379900
> 
> 赞同：-1
> 
> 时间：2012-07-08T01:01:00.583
> 
> 标签：javascript, jquery, css, html-lists, drop-down-menu

我的子菜单，下拉菜单，从第二个孩子悬停到另一个孩子的第一个孩子时闪烁

*   . 要看到这一点，请将鼠标悬停在“项目”上，然后是“uhoh”，然后将鼠标悬停在“项目仪表板”上，然后从那里悬停在“bam”上。它闪烁，我只是不明白为什么............当你以特殊方式悬停时，我显然需要它停止闪烁，这样人们就不会破坏它。

    [小提琴](http://jsfiddle.net/chBVz/8/)

    我在想它类似于调用一个孩子 ul 来展示，然后那个 ul 的孩子在另一部分展示，隐藏和展示以某种方式发生碰撞？不过不确定。我一直在寻找一种方法来处理整个事情，但我仍在学习 jquery。

    [测试地点](http://imengine.gofreeserve.com/fileshare/fileshare2/index2.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T01:42:11.510

好吧，当您添加代码不透明度时，这就是使其“闪烁”的原因，也许您可​​以删除这部分？

```
.animate({opacity:0.50}).delay (500) 
```

另请注意，“呃哦”和 Bam 不在您发送的小提琴上。

# php - 插入包含保留字的文本？

> ID：11379901
> 
> 赞同：1
> 
> 时间：2012-07-08T01:01:38.950
> 
> 标签：php, mysql

我正在尝试使用包含保留字的字符串更新列。

```
$val1 = "Boat's Devices"; // inserts fine
$val2 = "Boat's Float"; // fails 
```

错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在“Float”附近使用的正确语法

```
mysql_query("UPDATE phrases SET head_title = '$val1', title = '$val2' WHERE p_id = '$p_id'") or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T01:03:39.940

您必须转义插入 MySQL 数据库的所有字符串。使用 mysql_real_escape_string 或等效项来执行此操作。这应该可以解决您的问题。如果没有，请发布您的 SQL 查询，以便我们查看。

# javascript - SDK 2：设置对话框示例

> ID：11379902
> 
> 赞同：0
> 
> 时间：2012-07-08T01:01:42.867
> 
> 标签：javascript, extjs, rally

您是否发布了一个 SDK 2 应用程序的示例，该应用程序将一个条目添加到其“齿轮”菜单并允许用户通过对话窗口将设置保存到首选项对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:14:53.633

我最终使用 ExtJS CookieProvider 来保存我的应用程序的状态。通过使用 cookie，设置是针对每个用户的，我也针对每个项目进行设置。我在 App 类中的代码如下所示：

```
...
sessionKey: function() {
  return (this.getContext().get('appID') || 'MyAppName') + ':' + this.getContext().getProject()._ref;
},

session: function() {
  if (!this.state)
    this.state = Ext.state.Manager.get(this.sessionKey()) || {};

  return this.state;
},

saveSession: function(newState) {
  var session = this.session();
  Ext.apply(session, newState);
  Ext.state.Manager.set(this.sessionKey(), session);
},

launch: function() {
   Ext.state.Manager.setProvider(Ext.create('Ext.state.CookieProvider'));
   ... 
```

要使用它，只需调用 this.session() 来获取状态，然后调用 saveSession() 来合并状态。效果很好！

它甚至可以在开发模式下工作。请注意，Chrome（和其他浏览器？）不会在 file:// 模式下保存 cookie，除非您[告诉它](http://wolfslittlestore.be/2012/08/cookies-on-local-files-in-chrome/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T23:27:56.307

简短的回答是，目前这是不可能的。

我们正在尝试找出允许用户从自定义应用程序内部与设置进行交互的最佳方式。由于每个应用程序都在 IFrame 内进行沙盒处理，因此任何应用程序代码都无法与齿轮菜单交互（因为它位于框架之外）。

未来，我们正在寻找使自定义应用程序和拉力赛应用程序以统一方式与设置交互的方法。

如果您正在寻找存储设置，您可以查看[App](https://rally1.rallydev.com/apps/2.0p2/doc/#!/api/Rally.app.App)对象的文档。在 SDK 的 2.0p2 版本中，我们添加了一些功能来帮助您管理应用程序的设置。现在，所有自定义应用程序都必须提供自己的界面来访问设置。

# php - 使用 MAMP 在 Mac OSX 上构建/安装 XDebug

> ID：11379903
> 
> 赞同：9
> 
> 时间：2012-07-08T01:02:04.583
> 
> 标签：php, osx-lion, mamp, xdebug

我在使用 MAMP 在 Mac OSX 上构建/安装 XDebug 时遇到问题。

到目前为止，我在网上进行了广泛的搜索，目前我被 XDebug“安装向导”的一部分困住了，它告诉我在我下载的源代码上“运行：phpize”。

当我运行时，`phpize`我收到以下消息：

```
new-host-2:xdebug-2.2.0 Dima$ phpize
grep: /usr/include/php/main/php.h: No such file or directory
grep: /usr/include/php/Zend/zend_modules.h: No such file or directory
grep: /usr/include/php/Zend/zend_extensions.h: No such file or directory
Configuring for:
PHP Api Version:        
Zend Module Api No:     
Zend Extension Api No:  
Cannot find autoconf. Please check your autoconf installation and the
$PHP_AUTOCONF environment variable. Then, rerun this script. 
```

如果我这样做，`which phpize`我会得到：

```
new-host-2:xdebug-2.2.0 Dima$ which phpize
/usr/bin/phpize 
```

这不是我想使用的版本，我想使用`phpize`我假设的 MAMP 安装版本，因为我想在 PHP 的 MAMP 版本上安装 XDebug。这令人费解，因为我已将 MAMP 特定的 PHP bin 路径添加到我的 .bash_profile 到`$PATH`变量中。

如果我跑步，`echo $PATH`我会得到：

```
new-host-2:xdebug-2.2.0 Dima$ echo $PATH
/opt/local/bin:/opt/local/sbin:/Applications/MAMP/bin/php/php5.4.3/bin:/Users/Dima/.rvm/gems/ruby-1.9.2-p290/bin:/Users/Dima/.rvm/gems/ruby-1.9.2-p290@global/bin:/Users/Dima/.rvm/rubies/ruby-1.9.2-p290/bin:/Users/Dima/.rvm/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin 
```

MAMP 特定的 PHP 路径显示在“/usr/bin”之前。我尝试的下一件事是运行特定于 MAMP`phpize`的手动提供整个路径，如下所示：

```
new-host-2:xdebug-2.2.0 Dima$ /Applications/MAMP/bin/php/php5.4.3/bin/phpize 
-bash: /Applications/MAMP/bin/php/php5.4.3/bin/phpize: Permission denied 
```

现在我在 Finder 中检查了这些文件的权限，它表明我拥有读取和写入此文件夹中文件的完全权限。我有点失落。任何帮助将不胜感激。如果有助于诊断此问题，我可以发布任何其他信息。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-29T21:14:27.330

遇到同样的问题，但找到了更好的解决方案

xDebug 已经在 MAMP 中。

检查你的 php.ini

```
/Applications/MAMP/conf/php5.x/php.ini 
```

一路往下走。你会看见

```
[xdebug]
;zend_extension="/Applications/MAMP/bin/php5.X/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so" 
```

把它改成

```
[xdebug]
zend_extension="/Applications/MAMP/bin/php5.X/lib/php/extensions/no-debug-non-zts-20060613/xdebug.so"
xdebug.remote_enable=1
xdebug.remote_host=localhost
xdebug.remote_port=9000
xdebug.remote_handler=dbgp 
```

重新启动服务器...完成！

见：[https ://web.archive.org/web/20151107210347/http://danpolant.com/want-to-run-xdebug-mamp-is-the-easyest-way/](https://web.archive.org/web/20151107210347/http://danpolant.com/want-to-run-xdebug-mamp-is-the-easiest-way/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-04T12:25:28.600

我尝试了上述方法，但我并没有为我工作，所以我用谷歌搜索了更多，这就是诀窍。

1.  从 SourceForge下载并解压[MAMP 组件](http://sourceforge.net/projects/mamp/files/mamp/2.0.2/MAMP_components_2.0.2.zip/download)

2.  记下在 phpize 过程中未找到的路径，对我来说是：

    ```
    /Applications/MAMP/bin/php/php5.2.17/include/php/main/php.h

    /Applications/MAMP/bin/php/php5.2.17/include/php/Zend/zend_modules.h

    /Applications/MAMP/bin/php/php5.2.17/include/php/Zend/zend_extensions.h 
    ```

3.  在您的 MAMP php 目录中创建所需的路径，再次对我来说是

    ```
    /include/php/ 
    ```

4.  确保目录的正确权限

5.  找到您的目标 PHP 版本（在我的例子中是 5.2.17）的组件并将它们复制到您在步骤 3 中创建的路径中。

6.  [从Xdebug 站点](http://xdebug.org/docs/faq#custom-phpize)运行使用正确版本 phpize 的说明

我希望这对其他人有帮助，因为我花了很长时间才解决这个问题！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-08T03:53:52.440

经过更多的研究和反复试验，我在做了以下事情后设法安装了它：

1.  在终端中，我运行了`chmod u+x /Applications/MAMP/bin/php/php5.4.3/bin/*`打开 phpize 的执行权限以及该路径中的所有其他内容
2.  按照[本文](http://www.mac-test.net/the-command-line-c-compilers-in-os-x-lion/)安装命令行工具
3.  按照[本文](http://www.mattvsworld.com/blog/2010/02/install-the-latest-autoconf-and-automake-on-mac-os-10-6/)安装最新的autoconf及相关工具
4.  之后，按照[XDebug 向导](http://www.xdebug.org/wizard.php)提供的步骤顺利工作

不过，这是一个令人头疼的问题。希望这个答案能在未来为别人节省一点时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-29T08:04:53.917

在 C:\MAMP\conf\php xxx\ 目录中很容易打开每个相关的 php.ini，然后将这些行放入 php.ini

```
 [xdebug]

xdebug.default_enable=1

xdebug.remote_enable=1
xdebug.remote_handler=dbgp
xdebug.remote_host=localhost
xdebug.remote_port=9000
xdebug.remote_autostart=1

zend_extension="C:\MAMP\bin\php\php5.5.0\ext\php_xdebug.dll" 
```

# android - 没有获取位置更新

> ID：11379904
> 
> 赞同：1
> 
> 时间：2012-07-08T01:02:06.107
> 
> 标签：android, android-location

在我的地图应用程序中，我似乎没有获得位置更新，我上了车并开始四处行驶，但我的位置标记在地图上从未改变，甚至给了我一个`null lat and long`

```
locationManager = (LocationManager) this.getSystemService(LOCATION_SERVICE);

    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_COARSE);

    String provider = locationManager.getBestProvider(criteria, true);
    if(provider == null){
        provider = LocationManager.NETWORK_PROVIDER;
    }
locationManager.requestLocationUpdates(provider, 60000, 5, this); 
```

我的 onLocationChanged 监听器

```
@Override
public void onLocationChanged(Location location) {
    Logging logger = new Logging();
    logger.append("V", className, "onLocationChanged(Fine)", "Accuracy: " + location.getAccuracy());

    try {
        userLat = Double.toString(location.getLatitude());
        userLong = Double.toString(location.getLongitude());

        int mLat = (int) (location.getLatitude() * 1000000);
        int mLng = (int) (location.getLongitude() * 1000000);

        userLocation = new GeoPoint(mLat, mLng);

        if (!initialFix && mapSettingShowLoc) {
            showUserLocation(userLocation);
            initialFix = true;
        }

        if (mapSettingShowLoc) {
            showUserLocation(userLocation);
        }

    } catch (Exception e) {
        logger.append("E", className, "onLocationChanged", "Exception: " + e);
    }
} 
```

在我`onResume`注册再次收听，因为我可以从地图开始一个新的活动

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 2000, 1, this); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:21:24.587

我想通了，这是因为我的供应商不匹配

# python - 如何更改 matplotlib 图中刻度的字体大小？

> ID：11379910
> 
> 赞同：14
> 
> 时间：2012-07-08T01:03:47.360
> 
> 标签：python, matplotlib

在使用 Matplotlib 绘图时，我发现了如何更改标签的字体大小。但是，如何更改刻度中数字的大小？

为清楚起见，假设您将 x^2 从 (x0,y0) = 0,0 绘制到 (x1,y1) = (20,20)。下面 x 轴上的比例可能类似于

> 0 1 2 ... 20。

我想更改 x 轴这种比例的字体大小。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-08T01:35:42.153

Matplotlib 将这些称为 xtick 标签。它们可以通过多种不同的方式进行更改，作为参数传入，或者迭代和编辑（如此处发布的解决方案[Matplotlib 使刻度标签字体大小更小](https://stackoverflow.com/questions/6390393/matplotlib-make-tick-labels-font-size-smaller)）。

我继续发布了一个更简洁的解决方案，因为前者效率很低。

```
from matplotlib import pyplot
import math

def setLabelExample():
    fig = pyplot.figure() 
    x = [i for i in range(200)]
    y = [xi**2 for xi in x]

    ax = fig.add_subplot(1,1,1)
    ax.plot(x, y) 
    ax.tick_params(axis='x', labelsize=30)
    fig.suptitle('Matplotlib xticklabels Example')
    pyplot.show()

if __name__ == '__main__':
    setLabelExample() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-03T11:29:44.717

## 简单来说，可以使用下面的命令来设置刻度的范围，改变刻度的大小

将 matplotlib.pyplot 导入为 plt

## 设置 x 轴和 y 轴的刻度范围

plt.set_yticks(范围(0,24,2))

plt.set_xticks(范围(0,24,2))

## 更改 x 轴和 y 轴的刻度大小

plt.yticks(字体大小=12,)

plt.xticks(字体大小=12,)

# php - 如何从 $_FILES 中删除空间？

> ID：11379911
> 
> 赞同：0
> 
> 时间：2012-07-08T01:03:49.153
> 
> 标签：php

我有这个图像预上传代码：

```
 $tf = $directory . $_FILES['Filedata']['name'][0]; 
```

我会删除参数 ['name'] 中的所有空格。我可以嵌入此代码吗？我用 tim () 试过了，但我做不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T09:13:15.627

这可能会有所帮助：

```
$tf = $directory . $_FILES['Filedata']['name'][0];
$tf = preg_replace('/\s+/','',$tf); 
```

# windows-phone-7 - 无法修改自定义模板的按钮内容

> ID：11379913
> 
> 赞同：0
> 
> 时间：2012-07-08T01:04:04.317
> 
> 标签：windows-phone-7, templates, expression-blend

我确信这是一个非常简单的解决方案，但我似乎无法弄清楚。一般来说，我是 WP7 编程和 Expression Blend 修改的新手。

我在 Expression Blend 中创建了一个自定义按钮（模板），我在 Windows Phone 7 应用程序的多个位置使用它。我已经删除了自定义按钮的内容，但之后我无法再修改按钮的内容。

例如，如果我在同一页面上有多个相同类型的按钮（基于模板），我无法弄清楚以后如何修改内容。

下面是在 App.xaml 中处理按钮的方式：

```
<Application.Resources>
    <ControlTemplate x:Key="Main1StopButtons" TargetType="Button">
        <Border BorderThickness="3" CornerRadius="25">
            <Border.BorderBrush>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FF181616" Offset="0.01"/>
                    <GradientStop Color="#FF494444" Offset="0.684"/>
                </LinearGradientBrush>
            </Border.BorderBrush>
            <Border.Background>
                <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
                    <GradientStop Color="#FF0A0909" Offset="0.797"/>
                    <GradientStop Color="#FF272727" Offset="0.003"/>
                </LinearGradientBrush>
            </Border.Background>
            <TextBlock TextWrapping="Wrap" Text=""/>
        </Border>
    </ControlTemplate>
</Application.Resources> 
```

如果我修改 TextBlock 的“文本”（改为“按钮”），那么使用模板的所有按钮都具有“按钮”的文本。

感谢您的耐心等待 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:44:49.993

用于`TemplateBinding`此。它说要从控件中获取属性并将其放到模板中：

```
<TextBlock TextWrapping="Wrap" Text="{TemplateBinding Content}"/> 
```

或者对于更复杂的事情：

```
<ContentControl Content="{TemplateBinding Content}" /> 
```

# iphone - 我无法构建一些 xcode 项目

> ID：11379915
> 
> 赞同：0
> 
> 时间：2012-07-08T01:05:17.920
> 
> 标签：iphone, xcode

我从这里下载了一些开源程序 [https://github.com/indisolv/Barcode-Reader](https://github.com/indisoluble/Barcode-Reader)

我试图建造它，但我做不到

错误消息是“没有指定名称或路径的 SDK '/Developer_Xcode3/SKDs/IceTouch-1.1/iphonesimulator.sdk”

我不明白它的含义，也不知道如何处理。

你能告诉我一个解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T07:39:48.813

在“组和文件”中选择项目的根级别。它是蓝色的。然后按命令-I 以获取其信息。

从信息窗口顶部的分段控制器中选择“构建”。在该面板的第一部分，您将看到 Base SDK 作为前几行选项之一。选择您在其中找到的最新版本的 SDK，然后关闭窗口以保存您的选项。

构建并运行项目，它应该可以工作。

# android - 向 Theme.Black.NoTitleBar Android 添加操作栏

> ID：11379916
> 
> 赞同：4
> 
> 时间：2012-07-08T01:05:18.410
> 
> 标签：android, android-layout, android-actionbar, android-theme

我正在尝试以编程方式添加操作栏，如[开发文档](http://developer.android.com/guide/topics/ui/actionbar.html)中所示，但我遇到了一个错误。我的 minSdk 设置为 11，我的应用程序有一个布局和一个活动，活动中唯一的代码是：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.inbox);
    ActionBar actionBar = getActionBar();
    actionBar.show();

} 
```

如果我取出最后两行，那么我的应用程序就会运行。我知道全息主题会自动包含操作栏，但我不喜欢这些`editText`视图。关于为什么会发生这种情况的任何想法。我应该以`HoloTheme`不同的方式使用和主题化视图吗？

同样，我在 Eclipse 中没有收到任何错误。我的程序崩溃了，因为我可以从 logcat 中破译为空指针异常。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-08T01:17:47.983

从您链接到的文档中：

> 如果您有一个自定义活动主题，您想在其中删除操作栏，请将`android:windowActionBar`style 属性设置为`false`。但是，如果您使用主题删除操作栏，则窗口将根本不允许操作栏，因此您以后无法添加它 - 调用`getActionBar()`将返回`null`。

由于您使用的是没有操作栏的主题，`getACtionBar()`因此正在返回`null`，然后您尝试调用`show()`它`null`，导致抛出异常。

这样就解释了您遇到的错误。至于该怎么做，[ActionBar 的文档](http://developer.android.com/reference/android/app/ActionBar.html)说：

> 从 Android 3.0（API 级别 11）开始，当 Activity 使用系统的 Holo 主题（或其后代主题之一）时，操作栏会出现在 Activity 窗口的顶部，这是默认设置。您可以通过调用或在具有属性`requestFeature(FEATURE_ACTION_BAR)`的自定义主题中声明它来添加操作栏。`windowActionBar`

这为您提供了两个简单的选项，可以在不使用 Holo 主题的情况下拥有 ActionBar。在您的情况下，这可能是最简单的：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().requestFeature(Window.FEATURE_ACTION_BAR); // Add this line
    setContentView(R.layout.inbox);
    ActionBar actionBar = getActionBar();
    actionBar.show();
} 
```

**更新：**您还应该切换到`Theme.Black`没有`NoTitleBar`部件，因为这会阻止 ActionBar 工作。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-26T22:59:01.450

我遇到了同样的问题。我最终想出了一个合理的解决方案。我有一个最小 api 版本 8，目标 api 为 11。我也不喜欢全息样式，所以我覆盖了如下样式：

首先，您必须创建一个“res/values-v11”文件夹。您可能已经有一个“values”文件夹，只需在同一级别创建一个“values-v11”（无论您的目标 API 级别是什么......远离使用“values-v11”）。

创建后，您将在每个文件夹中创建一个包含您的主题的 XML 文档。原始值文件夹将用于低于 android 3.0 (< api 11) 的任何内容。你的主题看起来像这样。

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="Theme.Black.OptionalActionBar" parent="@android:style/Theme.Black.NoTitleBar">
        <item name="android:windowNoTitle">True</item>
        <item name="android:windowActionBar">False</item>
    </style>

    <style name="OptionalVisibility">
        <item name="android:visibility">visible</item>
    </style>

</resources> 
```

请注意，我没有使用**Holo**主题，而是使用**Theme.Black.NoTitleBar**主题作为父主题。从那里，我设置选项以隐藏低于 api 11 的窗口标题和操作栏。

然后，我在“values-v11”文件夹中创建了第二个主题文档，并将其设置如下：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="Theme.Black.OptionalActionBar" parent="@android:style/Theme.Black.NoTitleBar">
        <item name="android:windowNoTitle">false</item>
        <item name="android:windowActionBar">true</item>
        <item name="android:actionBarStyle">@android:style/Widget.Holo.ActionBar</item>
    </style>

    <style name="OptionalVisibility">
        <item name="android:visibility">invisible</item>
        <item name="android:height">1dp</item>
    </style>

</resources> 
```

在上述主题中，它**启用**了操作栏并将其设置为**Holo**主题，但保留了所有其他元素。所以操作栏看起来像“holo”-ish，但其他一切都保持在较低版本中的样子（而且我没有得到 Holo 附带的丑陋文本条目）。

然后在清单中，如果我想显示操作栏，我只需将该活动的主题设置为`android:theme="@style/Theme.Black.OptionalActionBar"`

我之所以这样做，是因为我依靠现已弃用的硬件菜单按钮在布局上失败了。使用上面的主题，如果需要，我可以设置操作栏，如果是旧设备，我可以将其保留为菜单。然后，我所要做的就是在我的菜单创建方法上设置一个属性以无缝支持 2.0 到 4.0。

无论如何，看看这是否能让你到达你需要的地方。

在我看来，它比其他方法容易得多，因为**您不必记住请求操作栏或在代码中执行任何操作**。您只需将您的主题设置为您的活动......然后就可以开始了。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-08T01:40:10.153

达山说什么……有点

更进一步，我会检查 ActionBarSherlock，结合支持库，您可以将操作栏添加到几乎任何 2.x+ 版本的 android

要获得全屏/无标题栏，您可以从 ABS 主题之一创建自己的主题，类似于

```
<style name="Theme.MY.Sherlock.Fullscreen" parent="Theme.Sherlock.Light.DarkActionBar">
        <item name="android:windowFullscreen">true</item>;
 </style> 
```

在您的 onCreate 中应用该主题然后让操作栏显示是相同的（除了您将使用 ABS 支持前缀）所以基本上

```
setTheme(R.style.Theme_MY_Sherlock_Fullscreen);
setContentView(R.layout.mylayout);
getSupportActionBar.Show(); 
```

我假设您可以对标准操作栏（使用全息主题作为基础）执行相同的操作，因为 ABS 几乎是重复的功能（而且大部分源代码，ABS 主要是一个包装器类）它甚至可以检测到然后在 14 及更高版本上使用本机实现（11 及中间有一些缺失的功能/修复）

你可以在这里看看[ABS](http://actionbarsherlock.com/)看起来他刚刚将它更新为 JB

-- 在 values 下的资源文件夹中创建一个主题.xml 文件（/res/values/themes.xml）

然后把它放在那里并尝试上面的方法，但当然在 setTheme( 将名称替换为 Theme_My_Holo_FullScreen 并且不要使用 getSupportActionbar(). 前缀，我从不打扰使用本机实现，但它应该工作相同。

```
<?xml version="1.0" encoding="utf-8"?>

<resources>

    <style name="Theme.My.Holo.Fullscreen" parent="Theme.Holo">
        <item name="android:windowFullscreen">true</item>;
    </style>

</resources> 
```

# php - 坚持使用 Doctrine Extensions + Zend 2 和 YAML 绑定

> ID：11379918
> 
> 赞同：2
> 
> 时间：2012-07-08T01:05:38.740
> 
> 标签：php, doctrine-orm, zend-framework2, yaml

我无法理解让 Gedmo 学说扩展工作的示例。我并不完全理解所有各种配置位，但这是我认为相关部分的内容：

```
$cache = new \Doctrine\Common\Cache\ArrayCache;
$yamlDriver = new Doctrine\ORM\Mapping\Driver\YamlDriver(array(APPLICATION_PATH . $options['mappingDir']));
$config->setMetadataCacheImpl($cache);
$config->setQueryCacheImpl($cache);
$config->setMetadataDriverImpl($yamlDriver);
$em = \Doctrine\ORM\EntityManager::create($options['connection'], $config); 
```

这是我目前的设置，它正在工作。YamlDriver 指向我的 Yaml 配置文件；我的实体在`APPLICATION_PATH . '/entities/'`. 我不知道如何将我的实体放入命名空间，这可能是问题的一部分——我刚刚添加`APPLICATION_PATH . '/entities/'`到我的包含路径中。

我认为我需要做的是以下（这取自教义扩展演示）：

```
$cache = new Doctrine\Common\Cache\ArrayCache;
// standard annotation reader
$annotationReader = new Doctrine\Common\Annotations\AnnotationReader;
$cachedAnnotationReader = new Doctrine\Common\Annotations\CachedReader(
    $annotationReader, // use reader
    $cache // and a cache driver
);
// create a driver chain for metadata reading
$driverChain = new Doctrine\ORM\Mapping\Driver\DriverChain();
// load superclass metadata mapping only, into driver chain
// also registers Gedmo annotations.NOTE: you can personalize it
Gedmo\DoctrineExtensions::registerAbstractMappingIntoDriverChainORM(
    $driverChain, // our metadata driver chain, to hook into
    $cachedAnnotationReader // our cached annotation reader
);

// Replaced their entity annotations with my Yaml driver
$yamlDriver = new Doctrine\ORM\Mapping\Driver\YamlDriver(array(APPLICATION_PATH . $options['mappingDir']));

// register annotation driver for our application Entity namespace
$driverChain->addDriver($yamlDriver , 'Entity'); 
```

然后添加`$driverChain`as with `setMetadataDriverImpl()`。

但是，这是行不通的——可能是因为您不能在没有名称空间中的实体指向特定驱动程序的情况下使用 driverChain？

然后我需要让事件管理器工作：

```
$evm = new Doctrine\Common\EventManager();

$sortableListener = new Gedmo\Sortable\SortableListener;
$sortableListener->setAnnotationReader($cachedAnnotationReader);
$evm->addEventSubscriber($sortableListener); 
```

但这不起作用——当我将 $evm 传递给我的实体管理器时，我收到一个错误：

> 致命错误：在第 157 行调用 D:\Jeremy\htdocs\umr\library\Gedmo\Mapping\ExtensionMetadataFactory.php 中未定义的方法 Doctrine\ORM\Mapping\Driver\YamlDriver::getLocator()

如果有人能对此有所了解，我将不胜感激！我怀疑只有在使用 中提到的类时才需要使用链接元数据驱动程序的第一部分，`registerAbstractMappingIntoDriverChainORM()`但我不是——所以如果我需要做的就是让事件管理器运行，那就太好了——我改天再处理另一部分。

# node.js - NPM，无论我做什么，都找不到'graceful-fs'

> ID：11379919
> 
> 赞同：32
> 
> 时间：2012-07-08T01:06:16.010
> 
> 标签：node.js, express, npm

这是我尝试为 node.js 安装 express 时得到的

```
npm install express

module.js:340
    throw err;
          ^
Error: Cannot find module 'graceful-fs'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/usr/share/npm/lib/utils/ini.js:32:10)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17) 
```

我什至尝试了其他人，但仍然遇到同样的错误。我做了一些挖掘，我确实在我的服务器上找到了“gracefui-fs”。

我在亚马逊 ec2 服务器上运行 ubuntu 12.04 LTS。节点安装没有错误，npm 仍然没有工作。我还使用卸载并重新安装了 npm

```
apt-get 
```

以及从源头。在安装过程中，我也没有收到任何错误。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-03T00:22:33.847

有同样的问题。不要`npm`从`aptitude`或下载`apt-get`。

**而是尝试：**

```
git clone --depth=1 git://github.com/npm/cli.git
cd cli/scripts
chmod +x install.sh
sudo ./install.sh 
```

在这里看到：[NPM 无法安装 appjs。错误：找不到模块 'graceful-fs'](https://stackoverflow.com/questions/10776405/npm-cant-install-appjs-error-cannot-find-module-graceful-fs)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-24T08:55:35.763

我有同样的问题。

```
sudo npm install 
```

为我解决了。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-08-26T22:24:48.637

我也在使用 Ubuntu 12.04，并且遇到了同样的问题（尽管我不认为这特别是 Ubuntu 的错）。

```
grimbo@grimbo-ubuntu-12:~/git/SyntaxHighlighter$ npm

module.js:340
    throw err;
          ^
Error: Cannot find module 'graceful-fs'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/usr/share/npm/lib/utils/ini.js:32:10)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17) 
```

所以我试图找出 npm 从哪里运行：

```
grimbo@grimbo-ubuntu-12:~/git/SyntaxHighlighter$ sudo find / -name npm
/etc/bash_completion.d/npm
/usr/bin/npm
/usr/local/bin/npm
/usr/local/n/versions/0.8.7/bin/npm
/usr/local/n/versions/0.8.7/lib/node_modules/npm
/usr/local/n/versions/0.8.7/lib/node_modules/npm/bin/npm
/usr/share/lintian/overrides/npm
/usr/share/doc/npm
/usr/share/npm
/usr/share/doc-base/npm
/usr/lib/nodejs/npm
/var/lib/doc-base/documents/npm 
```

作为参考，这些是几个链接：

```
/usr/bin/npm -> ../share/npm/bin/npm-cli.js*
/usr/local/n/versions/0.8.7/bin/npm -> ../lib/node_modules/npm/bin/npm-cli.js* 
```

确认正在使用的是“/usr/bin/npm”：

```
grimbo@grimbo-ubuntu-12:~/git/SyntaxHighlighter$ which npm
/usr/bin/npm 
```

因此，我尝试专门调用最新的，这似乎可以解决问题：

```
grimbo@grimbo-ubuntu-12:~/git/SyntaxHighlighter$ /usr/local/n/versions/0.8.7/bin/npm install
npm WARN package.json SyntaxHighlighter@3.0.83 No README.md file found!
npm http GET https://registry.npmjs.org/uglify-js
npm http GET https://registry.npmjs.org/less
npm http GET https://registry.npmjs.org/jake
npm http GET https://registry.npmjs.org/minimatch
npm http 200 https://registry.npmjs.org/uglify-js
npm http GET https://registry.npmjs.org/uglify-js/-/uglify-js-1.3.3.tgz
npm http 200 https://registry.npmjs.org/less
npm http GET https://registry.npmjs.org/less/-/less-1.3.0.tgz
npm http 200 https://registry.npmjs.org/minimatch
npm http GET https://registry.npmjs.org/minimatch/-/minimatch-0.2.6.tgz
npm http 200 https://registry.npmjs.org/less/-/less-1.3.0.tgz
npm http 200 https://registry.npmjs.org/uglify-js/-/uglify-js-1.3.3.tgz
npm http 200 https://registry.npmjs.org/minimatch/-/minimatch-0.2.6.tgz
npm http 200 https://registry.npmjs.org/jake
npm http GET https://registry.npmjs.org/jake/-/jake-0.3.14.tgz
npm http 200 https://registry.npmjs.org/jake/-/jake-0.3.14.tgz
npm http GET https://registry.npmjs.org/lru-cache
npm http GET https://registry.npmjs.org/utilities
npm http GET https://registry.npmjs.org/minimatch
npm http 304 https://registry.npmjs.org/minimatch
npm http GET https://registry.npmjs.org/minimatch/-/minimatch-0.0.5.tgz
npm http 200 https://registry.npmjs.org/utilities
npm http GET https://registry.npmjs.org/utilities/-/utilities-0.0.11.tgz
npm http 200 https://registry.npmjs.org/lru-cache
npm http GET https://registry.npmjs.org/lru-cache/-/lru-cache-2.0.1.tgz
npm http 200 https://registry.npmjs.org/minimatch/-/minimatch-0.0.5.tgz
npm http 200 https://registry.npmjs.org/utilities/-/utilities-0.0.11.tgz
npm http 200 https://registry.npmjs.org/lru-cache/-/lru-cache-2.0.1.tgz
npm http GET https://registry.npmjs.org/lru-cache
npm http 304 https://registry.npmjs.org/lru-cache
npm http GET https://registry.npmjs.org/lru-cache/-/lru-cache-1.0.6.tgz
npm http 200 https://registry.npmjs.org/lru-cache/-/lru-cache-1.0.6.tgz
npm WARN prefer global jake@0.3.14 should be installed with -g
uglify-js@1.3.3 node_modules/uglify-js

less@1.3.0 node_modules/less

minimatch@0.2.6 node_modules/minimatch
+-- lru-cache@2.0.1

jake@0.3.14 node_modules/jake
+-- utilities@0.0.11
+-- minimatch@0.0.5 (lru-cache@1.0.6) 
```

最终，看起来可能是因为我过去安装了其他版本的 node 和 npm，所以它变得很困惑。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-03-15T04:29:45.517

所以在安装 node_js 和 npm 之后，我遇到了同样的问题

```
my-app# apt-get install mlocate || yum install mlocate
...
my-app$ locate graceful-fs
/usr/lib/nodejs/graceful-fs
... some other junk we don't care about ...
my-app$ export NODE_PATH=/usr/lib/nodejs
my-app$ npm update
... it works ... 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-12-17T00:02:47.977

只为我的两分钱。我安装

```
sudo npm install -g graceful-fs 
```

这在全球范围内安装了 graceful-fs，它解决了我的问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-18T19:53:32.240

在安装 phonegap 时在 Ubuntu 上遇到了类似的问题，用

```
sudo npm install graceful-fs 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-09T22:59:09.960

默认情况下，Node 在你的项目中查找模块 `../CollinsProject/node_modules`。

尝试将 graceful-fs 移动到此文件夹，它应该可以工作。

如果要安装要全局使用的模块（跨其他项目），则将 graceful-fs 文件夹移动到`/usr/local/lib/node_modules`.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-01-20T04:39:10.033

我使用 Windows；类似的应该适用于 Mac 和 Linux

科尔多瓦中的 npm 错误，科尔多瓦使用私有 npm

转到 C:\Users\sssca_000\AppData\Roaming\npm\node_modules\cordova\node_modules 将 npm 重命名为 npm_XXX

转到 C:\Users\sssca_000\AppData\Roaming\npm\node_modules 这是真正的 npm 所在的位置 将 npm 目录从这里复制到 C:\Users\sssca_000\AppData\Roaming\npm\node_modules\cordova\node_modules

对我来说效果很好！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-10-26T18:55:25.650

我有 Mint Node.js 8.x 版本，但已通过`n`命令升级到 11.x。问题是`n`/`npm`只替换目录中的二进制或链接`/usr/local/bin`，而不是`/usr/bin`目录中的。所以你应该`/usr/bin/node-gyp`用`/usr/local/bin/node-gyp`内容替换：

`sudo cp -f -s /usr/local/bin/node-gyp /usr/bin/node-gyp`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-12T17:42:17.917

我遇到了同样的问题，在网上搜索后，唯一对我有用的是重新安装 nodejs、nodejs-dev 和 npm。我按照这个网站的指示： [https ://github.com/joyent/node/wiki/installing-node.js-via-package-manager](https://github.com/joyent/node/wiki/installing-node.js-via-package-manager)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-07-23T16:31:23.190

如果您安装在自定义目录中，Windows 上也会发生同样的情况。您必须在默认路径下卸载并重新安装。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-11-21T11:05:52.577

当谈到 linux 时，我是一个自认的布偶，但我摸索到了一个解决方案。我正在运行 ubuntu 12.04 并且遇到了同样的问题。试过这个，它对我有用，也许比我更好的人可以解释为什么甚至可能对你有用：

```
sudo npm install socket.io 
```

我之前从 git 安装了 npm 和 node 并且似乎都在工作，直到我尝试安装 less 并得到与 OP 相同的错误。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-11-06T16:22:27.133

在我的 CENTOS 7 案例中，我不得不删除旧版本的 lib 文件。

```
rm -rf /usr/lib/node_modules/* 
```

之后就`yum reinstall nodejs`解决了！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-04-20T19:37:43.200

安装最后一个稳定版本的节点后，我在 Windows 10 上的解决方案

*   删除主目录 nodejs/node_modules 中的当前 npm 目录
*   [将 npm https://github.com/npm/npm.git](https://github.com/npm/npm.git)的最后一个构建克隆到 nodejs/node_modules 目录中

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-05-31T06:43:17.790

我以这种方式解决了 linux ubuntu 上的问题：

**1.我通过命令删除了nvm：sudo apt-get remove nvm**

然后：

```
git clone https://github.com/creationix/nvm.git ~/nvm
//For start node you have to run this command every time if you do not add in .profile etc
. ~/nvm/nvm.sh
// Now Install latest stable version of NodeJS
nvm install v5.7.1
// Check installed nodejs version
nvm ls
//You can set which nodejs version you want to use
nvm use v5.7 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-02-02T10:31:24.663

我这样做了，它终于奏效了，必须通过 npm 安装而不是 apt

```
sudo apt-get purge --auto-remove node-gyp
npm install -g node-gyp 
```

# netbeans - 找不到 SeleniumTestCase (phpunit)

> ID：11379920
> 
> 赞同：1
> 
> 时间：2012-07-08T01:06:17.667
> 
> 标签：netbeans, phpunit, wamp

我正在尝试设置 PHPUnit 测试。每次我运行测试时都会收到此错误：警告：require_once(PHPUnit/Extensions/SeleniumTestCase.php) 该文件不存在。尝试重新安装 pear、PHPUnit 和 PHP，没有成功，我得到了同样的错误。据我了解，SeleniumTestCase.php 确实需要位于 PHPUnit/Extensions/ 文件夹中。理想情况下，我想在 NetBeans 中设置所有需要的测试，这里有一些我发现的好信息：http: [//dan-bower.net/installing-phpunit-selenium-with-wamp/](http://dan-bower.net/installing-phpunit-selenium-with-wamp/) http://www.yiiframework.com/ wiki/83/netbeans-ide-and-yii-projects/ 不幸的是，这些信息并没有帮助我解决问题。仅供参考，我正在使用 Wamp 服务器、Yii 框架和 NetBeans 是我的编辑器。如果您有类似的问题并找到了解决方案，请分享解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:08:46.813

这对我有用，而且看起来更简单：

1.  按照此处的说明安装 selenium 插件：http: [//netbeans.org/kb/docs/php/phpunit.html#selenium](http://netbeans.org/kb/docs/php/phpunit.html#selenium)（在页面底部，“在 Selenium 框架上运行测试”标题）。
2.  转到 php.ini（在 wamp\bin\php\php5.3.xx 中，而不是 wamp 面板中可访问的 php.ini）并取消注释 ;extension=php_curl.dll 行。
3.  在您的命令行中： pear install phpunit/PHPUnit_Selenium 如此处所述[http://www.phpunit.de/manual/3.6/en/selenium.html](http://www.phpunit.de/manual/3.6/en/selenium.html)。

这使我可以在 netbeans 网站上的上述教程中运行测试。我希望它有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T08:06:40.597

[从https://github.com/sebastianbergmann/phpunit-selenium/blob/master/PHPUnit/Extensions/SeleniumTestCase.php](https://github.com/sebastianbergmann/phpunit-selenium/blob/master/PHPUnit/Extensions/SeleniumTestCase.php)获取 SeleniumTestCase.php并将其添加到 PHPUnit/Extensions 目录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-02T11:50:58.297

安装 PHPUnit 并运行 $phpunit unit/DbTest.php 后出现此错误

为我解决错误的是从梨通道安装 Selenium。在这里试试这个：pear install pear.phpunit.de/PHPUnit_Selenium。

然后重新运行 PHPUnit 测试用例。

# ruby-on-rails - rspec - 如何检查方法是否存在？

> ID：11379921
> 
> 赞同：5
> 
> 时间：2012-07-08T01:06:18.180
> 
> 标签：ruby-on-rails, ruby

我的模型有

```
def self.empty_building
  // stuff
end 
```

我怎样才能为这个现有的 rspec？，尝试过：

```
describe "empty_building" do
  subject { Building.new }
  it { should respond_to :empty_building }
end

but getting :

Failure/Error: it { should respond_to :empty_building }  
expected #<Building id: nil, district_id: nil, name: nil, 
direct: nil, created_at: nil, updated_at: nil> to respond to :empty_building 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T01:12:57.027

你有一个类方法

```
self.empty_building 
```

在你的模型中......但你的主题是建筑的一个实例。

所以要么，它应该是

```
def empty_building 
```

或者应该是：

```
describe "empty_building" do
  it { Building.should respond_to :empty_building }
end 
```

# c - 使用 sleep() 时 timer_getoverrun() 的行为不符合预期

> ID：11379925
> 
> 赞同：2
> 
> 时间：2012-07-08T01:06:50.663
> 
> 标签：c, linux, signals

这是一个在子例程旁边使用 POSIX 每进程计时器的`sleep()`程序。计时器到期时发送的信号已设置为`SIGUSR1`而不是`SIGALRM`，因为`SIGALRM`可能由 内部使用`sleep()`，但它似乎仍然不起作用。

我已经使用命令行`timer-overruns -d 1 -n 10000000`（1 个 cs 间隔）运行了程序，所以理论上，我们应该期望在调用`sigwaitinfo()`. 但是，`timer_getoverrun()`返回 0。

我还尝试了一个使用耗时`for`循环来引入延迟的版本。**在这种情况下，会**记录溢出。

有谁知道为什么会这样？我正在运行 3.4 Linux 内核。

# 程序源

```
/*
 * timer-overruns.c
 */

#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>
#include <signal.h>
#include <time.h>

// Signal to be used for timer expirations
#define TIMER_SIGNAL SIGUSR1

int main(int argc, char **argv) {
    int opt;
    int d = 0;
    int r = 0; // Repeat indefinitely
    struct itimerspec its;
    its.it_interval.tv_sec = 0;
    its.it_interval.tv_nsec = 0;

    // Parse arguments
    while ((opt = getopt(argc, argv, "d:r:s:n:")) != -1) {
        switch (opt) {
        case 'd': // Delay before calling sigwaitinfo()
            d = atoi(optarg);
            break;
        case 'r': // Number of times to call sigwaitinfo()
            r = atoi(optarg);
            break;
        case 's': // Timer interval (seconds)
            its.it_interval.tv_sec = its.it_value.tv_sec = atoi(optarg);
            break;
        case 'n': // Timer interval (nanoseconds)
            its.it_interval.tv_nsec = its.it_value.tv_nsec = atoi(optarg);
            break;
        default: /* '?' */
            fprintf(stderr,
                    "Usage: %s [-d signal_accept_delay] [-r repetitions] [-s interval_seconds] [-n interval_nanoseconds]\n",
                    argv[0]);
            exit(EXIT_FAILURE);
        }
    }

    // Check sanity of command line arguments
    short e = 0;

    if (d < 0) {
        fprintf(stderr, "Delay (-d) cannot be negative!\n");
        e++;
    }
    if (r < 0) {
        fprintf(stderr, "Number of repetitions (-r) cannot be negative!\n");
        e++;
    }
    if (its.it_interval.tv_sec < 0) {
        fprintf(stderr, "Interval seconds value (-s) cannot be negative!\n");
        e++;
    }
    if (its.it_interval.tv_nsec < 0) {
        fprintf(stderr, "Interval nanoseconds value (-n) cannot be negative!\n");
        e++;
    }
    if (its.it_interval.tv_nsec > 999999999) {
        fprintf(stderr, "Interval nanoseconds value (-n) must be < 1 second.\n");
        e++;
    }

    if (e > 0)
        exit(EXIT_FAILURE);

    // Set default values if not specified
    if (its.it_interval.tv_sec == 0 && its.it_interval.tv_nsec == 0) {
        its.it_interval.tv_sec = its.it_value.tv_sec = 1;
        its.it_value.tv_nsec = 0;
    }

    printf("Running with timer delay %d.%09d seconds\n",
            (int) its.it_interval.tv_sec, (int) its.it_interval.tv_nsec);

    // Will be waiting for signals synchronously, so block the one in use.  
    sigset_t sigset;

    sigemptyset(&sigset);
    sigaddset(&sigset, TIMER_SIGNAL);
    sigprocmask(SIG_BLOCK, &sigset, NULL );

    // Create and arm the timer
    struct sigevent sev;
    timer_t timer;

    sev.sigev_notify = SIGEV_SIGNAL;
    sev.sigev_signo = TIMER_SIGNAL;
    sev.sigev_value.sival_ptr = timer;

    timer_create(CLOCK_REALTIME, &sev, &timer);
    timer_settime(timer, TIMER_ABSTIME, &its, NULL );

    // Signal handling loop
    int overruns;
    siginfo_t si;

    // Make the loop infinite if r = 0
    if (r == 0)
        r = -1;

    while (r != 0) {
        // Sleeping should cause overruns
        if (d > 0)
            sleep(d);

        sigwaitinfo(&sigset, &si);

        // Check that the signal is from the timer
        if (si.si_code != SI_TIMER)
            continue;

        overruns = timer_getoverrun(timer);
        if (overruns > 0) {
            printf("Timer overrun occurred for %d expirations.\n", overruns);
        }

        // Decrement r if not repeating indefinitely
        if (r > 0)
            r--;
    }

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:02:01.357

`its.it_value.tv_sec`当仅设置纳秒时，您无法设置，即`-n 10000000`没有设置`-s 0`。正确初始化`its.it_value`，或使用`-s 0`参数，你的代码应该可以工作——在某种程度上。

由于`sigemptyset(&sigset); sigaddset(&sigset, TIMER_SIGNAL); sigprocmask(SIG_BLOCK, &sigset, NULL);`我不认为存在竞态条件，`sigwaitinfo()`应该可靠地获得挂起的信号。查看[sigwaitinfo()](http://www.kernel.org/doc/man-pages/online/pages/man2/sigwaitinfo.2.html)手册页了解详情；它确实在注释部分描述了这个非常相同的用例。

似乎[timer_getoverrun()](http://www.kernel.org/doc/man-pages/online/pages/man2/timer_getoverrun.2.html)在计时器触发后第一次返回的值是假的，至少在 x86-64 上的 3.5.0 内核上是假的。换句话说，在循环之前添加这个，

```
 printf("Overruns: %d\n",
           timer_getoverrun(timer));
    sigwaitinfo(&sigset, &si);
    printf("Overruns: %d (%d)\n",
           timer_getoverrun(timer), si.si_overrun);
    sigwaitinfo(&sigset, &si);
    printf("Overruns: %d (%d)\n",
           timer_getoverrun(timer), si.si_overrun); 
```

将输出零，一个看似随机的溢出计数，然后是预期的溢出计数。（计时器和 siginfo 溢出计数都匹配。）我怀疑[kernel/posix-timers.c](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=kernel/posix-timers.c;hb=HEAD)有问题，但我可能错了..问题似乎是第一个计时器事件将使用随机值以前的溢出计数。我想我会进一步调查。

如果您能告诉我您是否在内核上看到相同的内容，我将不胜感激。（还请说明确切的版本和架构。我在 amd64 (x86-64) 上运行 Ubuntu linux-image-3.5.0-3-generic，版本 3.5.0-3.3。

# vba - 从数组生成 VBA 十六进制值

> ID：11379926
> 
> 赞同：1
> 
> 时间：2012-07-08T01:06:52.933
> 
> 标签：vba, excel

我的 excel 表中有一些清单框（比如 AF 即复选框的标题），基于启用检查列表，我必须生成十六进制值......下面的代码是否会做到这一点。

```
Private Sub CommandButton1_Click()

Dim SegArray(15) As Integer

 For i = 0 To 13

     If CheckBox(i).Value = True Then
         SegArray(i) = 1
     Else
         SegArray(i) = 0
     End If

 Next i

 hex_value = Hex(SegArray())

 MsgBox "0x" & hex_value

End Sub 
```

我有一个错误：

> 编译错误：未定义子或函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T02:16:05.833

您的功能存在许多问题

*   的`CheckBox`不是数组。它们不能被引用为`ChecklBox(i)`
*   放置的第一个复选框将被命名为`CheckBox1`not`CheckBox0`
*   该`Hex`函数转换十进制数，而不是数组或二进制数

继承人您的功能已重新设计以解决这些问题

```
Private Sub CommandButton1_Click()
    Const num_of_checkboxes = 14

    Dim SegArray() As Long
    Dim i As Long
    Dim dec_value As Long
    Dim hex_value As String

    ReDim SegArray(1 To num_of_checkboxes)
    dec_value = 0

    For i = 1 To num_of_checkboxes
        If Me.OLEObjects("CheckBox" & i).Object.Value Then
            dec_value = dec_value + 2 ^ (i - 1)
        End If
    Next i
    hex_value = Hex(dec_value)
    MsgBox "0x" & hex_value
End Sub 
```

假设 CheckBox1 是最低有效位

# unicode - 是否有诸如智能引号和总是中断的破折号之类的字符的类别或名称？

> ID：11379928
> 
> 赞同：6
> 
> 时间：2012-07-08T01:06:58.817
> 
> 标签：unicode, utf-8, ascii, smart-quotes

许多人可能经历过将某些文本从 Word 复制到网站表单或其他内容中，所有引号 (')、双引号 (") 和破折号 (-) 都会出现乱码。我相信这些引号被称为“智能引号”或“ Typographer's Quotes”，但我不知道破折号的名称。有没有包含这些字符的类别？还有更多吗？

此类别的显着特征： 可通过普通 qwerty 键盘访问，并且很容易在视觉上误认为其 ASCII 等效项。

这个问题似乎在处理同样的问题：[如何在字符串中转换 Word 智能引号和破折号？](https://stackoverflow.com/questions/175785/how-do-i-convert-word-smart-quotes-and-em-dashes-in-a-string?rq=1) 另外，也许它们被称为“破折号”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T04:16:41.987

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-18T02:00:52.973

# javascript - 我想让 HTML 链接打开一个 js 手风琴

> ID：11379929
> 
> 赞同：0
> 
> 时间：2012-07-08T01:07:05.560
> 
> 标签：javascript, html

我希望顶帽中的 HTML 链接将主要内容区域中的 js 手风琴打开到正确的位置。例如，我希望“关于”链接打开“啁啾...”部分。

[http://imip.rvadv.com/index2.html](http://imip.rvadv.com/index2.html)

我对js不太了解，所以请仔细解释。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T01:21:42.453

设置和 id 到“关于我”链接，如下所示：

```
<a href="#aboutme" id="aboutme"> 
```

您还应该向打开“chirp”部分的链接元素添加一个 id：

```
<a href="#" id="chirp">Chirp. Would you like to know about me?<h2>Read the official birdwatcher's guide.</h2></a> 
```

然后利用[jQuery.click() 事件](http://api.jquery.com/click/)。正如 jQuery 的文档中所解释的那样：

> “描述：将事件处理程序绑定到“单击”JavaScript 事件，或在元素上触发该事件。

例子 ：

```
$("#other").click(function() {
  $("#target").click();
}); 
```

应用于您的页面：

```
$("#aboutme").click(function() {
  $("#chirp").click();
}); 
```

不要忘记用“脚本”标签包装 JS 代码：

```
<script>
$("#aboutme").click(function() {
  $("#chirp").click();
});
</script> 
```

# javascript - 如何使用 javascript 进行音频交互？

> ID：11379933
> 
> 赞同：0
> 
> 时间：2012-07-08T01:07:37.450
> 
> 标签：javascript, audio

我想构建一个 Web 应用程序，当用户单击某些按钮时播放某些音符。我检查了其他涉及大量音频交互的应用程序，其中很多应用程序（例如[Google 为 Moog 78 岁生日所做的涂鸦](http://www.google.com/doodles/robert-moogs-78th-birthday)）都使用 Flash 等技术。

我不想使用 Flash，因为 Flash 可能无法在所有移动设备上使用。如何在没有 Flash 的情况下允许使用 javascript 进行音频交互？

# php - 在 html p 标签中回显字符串变量

> ID：11379935
> 
> 赞同：0
> 
> 时间：2012-07-08T01:08:04.767
> 
> 标签：php, html

我正在尝试回显一个随机字符串变量，但我的回显语句格式不正确。

```
$strings = array('string 1', 'string 2', 'string 3');
echo "<p id = 'id_name'>$strings[array_rand($strings)]</p>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T01:11:03.487

您可以通过多种方式执行此操作：

**1.格式解析函数** [文档](http://us3.php.net/printf)

```
printf("<p id = 'id_name'>%s</p>", $strings[array_rand($strings)]); 
```

**2\. 连接：** [文档](http://us2.php.net/manual/en/language.operators.string.php)

```
echo "<p id = 'id_name'>" . $strings[array_rand($strings)] . "</p>"; 
```

**3\. 花括号：** [文档](http://us2.php.net/manual/en/language.types.string.php#language.types.string.parsing.complex)

```
echo "<p id = 'id_name'>{$strings[array_rand($strings)]}</p>"; 
```

**4\. 中间“简单”变量：** [documentaion](http://us2.php.net/manual/en/language.types.string.php#language.types.string.parsing)

```
$randString = $strings[array_rand($strings)];
echo "<p id = 'id_name'>$randString</p>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T01:10:17.150

```
$strings = array('string 1', 'string 2', 'string 3');
echo '<p id="id_name">'.$strings[array_rand($strings)].'</p>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T01:10:28.727

您需要在变量周围加上大括号：

```
$strings = array('string 1', 'string 2', 'string 3');
echo "<p id = 'id_name'>{$strings[array_rand($strings)]}</p>"; 
```

请参阅[codepad 上的示例](http://codepad.org/kOj7TLE8)。

# opengl-es - 为 OpenGL ES 2.0 中的数组索引提供整数？

> ID：11379936
> 
> 赞同：7
> 
> 时间：2012-07-08T01:08:53.517
> 
> 标签：opengl-es, glsl

我正在为 iPhone 开发一个 OpenGL 应用程序。在我的顶点着色器中，我需要一种方法来一次更改大量（但不是全部）顶点的颜色，因此我选择了颜色索引。这将允许我让 VBO 保持静态，并修改单个统一变量，而不是遍历每个顶点并修改每个帧之间的颜色信息。

我的计划是创建一个带有颜色数组的制服，在属性中添加一个包含索引的整数。这是我的顶点着色器：

```
uniform mat4 u_mvp_matrix;
uniform vec4 u_color_array[];

attribute vec4 a_position;
attribute int a_colorIndex;

varying lowp vec4 v_color;

void main()
{
    v_color = u_color_array[a_colorIndex];

    gl_Position = u_mvp_matrix * a_position;
} 
```

这会引发错误：

> int 不能是顶点着色器中的 in

我做了一些研究。iPhone 最迟支持 OpenGL ES 2.0，这意味着它最迟支持 GLSL 1.2，显然整数仅在 GLSL 1.3 及更高版本中支持。我尝试将 a_colorIndex 更改为浮点数。我没想到它会起作用，它没有。

如何为每个顶点指定颜色索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T02:47:23.933

将属性指定为浮点数。您可以使用浮点数作为数组的索引。

# c++ - OpenCV中七个胡不变矩函数的含义

> ID：11379947
> 
> 赞同：18
> 
> 时间：2012-07-08T01:11:00.077
> 
> 标签：c++, image-processing, opencv, computer-vision

我理解七胡不变矩是针对物体的平移、旋转和尺度变化，以便独立识别物体这些因素。

这就是为什么我使用 OpenCV 中的“矩”函数来提取中心矩，然后我使用函数 HuMoments 来获取以下二值化图像的七个不变矩：

![在此处输入图像描述](../Images/a76849a41114472aeb797058eccbf017.png)

我的第一个问题是关于使用 OpenCV 中的“时刻”功能。第二个参数是“binaryImage”，我设置为true，因为它是二进制图像，可以吗？

我的第二个疑问是关于函数“HuMoments”的输出：七个 hu 不变矩。我不明白这个数据。哪些数据与旋转有关，哪些数据与平移有关，哪些数据与规模变化有关？

非常感谢！，干杯！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-08T08:02:09.843

**第一个问题：**

这样做是可以的，因为您在图像中有单个对象。如果有更多对象，并且想为每个对象找到时刻，请使用轮廓。访问： http: [//opencvpython.blogspot.in/2012/06/contours-3-extraction.html](http://opencvpython.blogspot.in/2012/06/contours-3-extraction.html)

**第二个问题：**

（看到你的问题我也在想）

HuMoments 是胡明奎先生在 1962 年发表的论文《[通过 Moment Invariants 进行视觉模式识别](http://www.sci.utah.edu/~gerig/CS7960-S2010/handouts/Hu.pdf)》中提出的。

在那篇论文中，他解释了它们（当然，在高数学内容的帮助下）。如果需要，您可以检查它。

**他说：**

> 定理：中心矩在平移下是不变量。

当您使用 moment() 函数找到矩时，它会返回三种类型的矩，`spatial moments (Mji), Central Moments (MUji) and Central Normalized Moments ( NUji)`. 查看文档了解[片刻（）](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=moments#moments)

在第 4-C 节的末尾，胡指出，在七个关系中（[请访问此处查看它们](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=moments#humoments)），前六个对于平移、大小和旋转是不变的，而`seventh one is skew invariant, which helps to distinguish mirror images.`

我搜索了很多关于 Hu Moments 价值观的含义。但是所有的论文都说同样的对话：`" Seven Hu Moments are calculated from Central Moments which are invariant to size, position and orientation ".`他们没有说明个人价值观的含义。

而Gary Bradsky先生的OpenCV经典著作《Learning OpenCV》给出了一些见解，告诉我们要进一步探索。[（参见第 254 页）](http://books.google.co.in/books?id=seAgiOfu2EIC&lpg=PA255&ots=hSH1cieHOg&dq=simple%20explanation%20of%20humoments&pg=PA254#v=onepage&q=simple%20explanation%20of%20humoments&f=false)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-24T19:41:45.273

回答你的第二个问题：

我认为不变的时刻没有任何意义。无论它如何移动、旋转或缩放，它们都可以保证对于给定的形状是恒定的。

你听起来像你想知道的那种含义：

> 哪些数据与旋转有关，哪些数据与平移有关，哪些数据与规模变化有关？

不太有意义，因为根据定义，它们都与旋转、平移和缩放无关。但是，一旦对于其他属性，可以很容易地提出类似的问题，例如：

> 什么数据是相关的角数、圆度或宽高比？

在这里，我认为很明显，这些时刻与人们希望与之相关的任何任意属性都没有关系，所以答案再次是没有意义。

那么，我们将何去何从？有了这个：如果我们想比较两个对象来判断它们的“形状”是否相似（“形状”是指我们不关心旋转、平移和缩放变化），我们可以计算 hu 不变矩并比较它们。如果这些值“大致”相等，那么您可以说形状“大致”相同。然后人们会希望这些时刻在不同的形状之间有很大的不同——它们是否会是一个有趣的问题，也许其他人可以回答。

例如，假设我们计算正方形的一些矩（为简单起见，仅显示三个，范围为 0 到 1）：

```
(0.5, 0.5, 0.5) 
```

然后我们希望一个圆圈给出类似的东西：

```
(0.5, 1, 0.5) 
```

还有一个椭圆：

```
(0.5, 1, 0.7) 
```

这可以让您比较这些形状。如果计算未知形状的矩并得到：

```
(0.51, 0.98, 0.47) 
```

它可能（希望）是一个圆圈。然而，如果一颗星给了你：

```
(0.2, 0.6, 0.9) 
```

和一个新月也给了同样的东西，那不会那么有用。虽然有 7 个时刻，但至少有一些时刻有很大的潜力会因我们可能认为的形状的重要特征而发生显着变化。

希望这可以帮助。

# google-maps-api-3 - Google Geocoding API 区域偏差和城市偏差

> ID：11379950
> 
> 赞同：1
> 
> 时间：2012-07-08T01:11:54.183
> 
> 标签：google-maps-api-3

我正在尝试从地址获取坐标。但是有6个地址相同的地方。如何设置城市偏见以在我的城市中找到位置？我的请求：`http://maps.googleapis.com/maps/api/geocode/json?address=ul.+Stawki+2&sensor=false&region=pl`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T01:18:14.730

您可以将城市添加到搜索字符串中：

```
http://maps.googleapis.com/maps/api/geocode/json?  
   address=Warsaw,ul.%20Stawki%202&sensor=false&region=pl 
```

# javascript - `style` 属性在元素上为 `null`

> ID：11379951
> 
> 赞同：1
> 
> 时间：2012-07-08T01:12:17.757
> 
> 标签：javascript

我有这个代码：

```
function displayMenu (newGal, newSub) {
    curGal = newGal;
    curSub = newSub;
    if (curGal == null) {
        curGal = "main";
    };
    arrayL = curGal.length;
    if (curImg == null) {
        curImg = 0;
    };
    if (curSub == null) {
        curSub = 0;
    };
    prevImg = curImg - 1;
    if (prevImg == null || prevImg < 0) {
        prevImg = arrayL;
    };
    nextImg = curImg + 1;
    document.getElementById('img1').style.display = "none";
}; 
```

不管它给了我什么，`style`财产是`null`. 这段代码从以前的样子被大量拆除；这是一个`for`循环的一部分，该循环应该用于选择带有of -的 s ，然后我将其分解并尝试手动定位每个`i`-使用单独的行，它只是不断中断。是的，- div 在 HTML 中。原始循环如下所示：`"img" + i``div``id``img0``9``img0``9``img0``9``for`

```
for (i = 0; i < array.L; i++) {
    var tempButton = "img" + i;
    document.getElementById(tempButton).style.display = "none";
}; 
```

**为什么是`style`财产`null`，我该如何解决？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-08T01:20:18.483

```
window.onload = displayMenu('main', 0); 
```

这是你的问题。改用这个：

```
window.onload = function() {displayMenu('main', 0);} 
```

* * *

在您的代码中，`displayMenu`被调用，然后将该调用的*返回值*分配给`window.onload`. 这失败了，因为您是在添加元素`window.onload`之前分配的。`imgX`

在解决方案中，您改为分配一个函数文字`window.onload`，在调用时将运行`displayMenu`. 它现在可以工作了，因为元素已被放置在页面上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T01:19:16.643

在您的 jsFiddle 中，您`displayMenu()`定义了两次函数，这会破坏它。

# c++ - TrackMenuPopup : 弹出菜单不断消失

> ID：11379953
> 
> 赞同：0
> 
> 时间：2012-07-08T01:14:02.480
> 
> 标签：c++, c, winapi, contextmenu, popupmenu

我创建了一个弹出菜单，当用户使用[TrackPopupMenu](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648002%28v=vs.85%29.aspx)单击任务栏图标时将显示该菜单。代码工作正常，直到我在菜单外单击以取消选择项。然后，每当我左/右键单击图标时，菜单就会弹出并在我看到它之前立即消失（看起来 TrackPopupMenu 立即返回 0）。MDSN 告诉了`PostMessage(hDlg, WM_NULL, 0, 0);`在TrackPopupMenu 之后添加的方法来修复，但它不起作用。

这是我的代码：

```
case WM_LBUTTONUP :
case WM_RBUTTONUP :
            POINT p;
            GetCursorPos(&p);
            HMENU hPopupMenu = CreatePopupMenu();
            AppendMenu(hPopupMenu, MF_ENABLED, ID_ADDMUSIC,    L"Add music"   );
            AppendMenu(hPopupMenu, MF_ENABLED, ID_REMOVEMUSIC, L"Remove music");
            SetForegroundWindow(msgInfo->hwnd);
            result = TrackPopupMenu(hPopupMenu, TPM_BOTTOMALIGN | TPM_RIGHTALIGN | TPM_NONOTIFY |
                                                TPM_RETURNCMD | TPM_RIGHTBUTTON | TPM_VERNEGANIMATION,
                                                p.x, p.y, 0, msgInfo->hwnd, NULL);
            PostMessageW(msgInfo->hwnd, WM_NULL, 0, 0);
            DestroyMenu(hPopupMenu); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T03:22:48.923

`WM_LBUTTONUP`我相信您的检查`WM_LBUTTONDOWN`并不是正确的方法。在创建任务栏图标时，我们指定一个回调消息。必须检查此消息，并在该消息中检查`LPARAM`for`WM_LBUTTONUP`和`WM_LBUTTONDOWN`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T03:35:32.833

这是托盘中您的应用程序的图标吗？

托盘图标针对不同的事物发送 WM_SHELLNOTIFY 消息，wParm 为 0，您可以测试 WM_RBUTTONDOWN | lParam 中的 WM_RBUTTONUP。

在启动时创建一次菜单，并在关闭托盘应用程序时删除。

# ios - 使用 glDrawArrays，iOS 损坏 OpenGL 纹理

> ID：11379954
> 
> 赞同：1
> 
> 时间：2012-07-08T01:14:06.977
> 
> 标签：ios, opengl-es, cocos2d-iphone, textures

我正在为 iOS 开发一款游戏，我在使用 glDrawArrays 的纹理方面遇到了一些问题（使用 cocos2D v1.0.1，带有 OpenGL ES 1.1）。我首先创建了一个定义山顶和底部的 CGPoints 数组，以及一个纹理坐标数组：

```
hillVertices[nHillVertices] = CGPointMake((topLeftVertexX)*CC_CONTENT_SCALE_FACTOR(), topLeftVertexY*CC_CONTENT_SCALE_FACTOR());
hillTexCoords[nHillVertices] = CGPointMake((topLeftVertexX)/textureSize.width, 0.0);
nHillVerticies++;
hillVertices[nHillVertices] = CGPointMake((bottomLeftVertexX)*CC_CONTENT_SCALE_FACTOR(), bottomLeftVertexY*CC_CONTENT_SCALE_FACTOR());
hillTexCoords[nHillVertices] = CGPointMake(topLeftVertexX)/textureSize.width, 1.0);
nHillVerticies++; 
```

然后使用...绘制

```
glBindTexture(GL_TEXTURE_2D, groundSprite.texture.name);
glVertexPointer(2, GL_FLOAT, 0, hillVertices);
glTexCoordPointer(2, GL_FLOAT, 0, hillTexCoords);
glDrawArrays(GL_TRIANGLE_STRIP, 0, (nHillVertices-1)); 
```

在游戏开始时（当“topLeftVertexX”值较小时），山丘看起来不错…… ![x 偏移量较小的山丘](../Images/017760ce214524dc92060561b70eef5f.png)

但随着游戏的继续，x 偏移值（topLeftVertexX）增加，事情开始变得更糟...... ![中间 x 偏移](../Images/56c45cb85a11b7692b9ef7c5378f4d2f.png)

接近尾声，它变得糟糕...... ![x 偏移量大](../Images/c3398cd467df281b069214097fc4840a.png)

我认为问题是在游戏开始时，“topLeftVertexX”的值很小，所以结果

```
(topLeftVertexX)/textureSize.width 
```

在

```
hillTexCoords[nHillVertices] = CGPointMake((topLeftVertexX)/textureSize.width, 0.0); 
```

是小。然而，随着游戏的继续和 x 值的增加，我认为该值变得足够大，足以导致某种腐败。textureSize 为 512x512，“topLeftVertexX”在游戏开始时从 0 开始，一直上升到大约 200,000。

我尝试增加三角形的数量（包括添加额外的条带），但这无济于事。我也尝试使用@jpsarda 的[CCSpriteBiCurve 类](http://jpsarda.tumblr.com/post/6171831450/tiny-wings-hills-with-cocos2d)，得到了相同的结果。我也尝试使用 glHints（例如 GL_LINE_SMOOTH_HINT 和 GL_NICEST），但我没有找到任何有用的东西。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T01:28:50.507

它没有被破坏，随着数字的增加，你只是失去了浮点精度。

随着您的数字越来越大，每个连续点之间的增量也越来越大。

在 IEEE754 中，1.f 和下一个更大的数字之间的差是 0.0000001

在 200,000 处，下一个更大的数字是 200,000.02。（由[IEEE754 转换器](http://www.h-schmidt.net/FloatConverter/IEEE754.html)提供）。我什至不是 100% 肯定 GLSL 使用哪种 FP 精度（快速参考卡表明它可能是片段着色器中的 14 位尾数？）。所以实际上情况可能更糟。

如果你只是在看一个大数字的小窗口，那么错误将继续增长。我怀疑随着精度的下降，你的纹理开始看起来越来越“块状”。

我唯一能想到的就是设计你的代码，这样数字就不必永远无限增长。有没有更聪明的方法可以将数字包裹起来，这样它就不必变得这么大了？

# ios - 用于身份验证的 Twitter ios (for < ios5) 库

> ID：11379956
> 
> 赞同：1
> 
> 时间：2012-07-08T01:14:31.073
> 
> 标签：ios, twitter

用于身份验证的 ios 平台（适用于版本 < iOS 5）的最佳 Twitter 库是什么。

我有一个允许用户“使用 twitter 连接”的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T01:53:49.777

[MGTwitterEngine](https://github.com/mattgemmell/MGTwitterEngine)是 iOS 5 之前最知名和最常用的引擎，但还有其他引擎。Github 报告了[274 个 repos](https://github.com/search?q=twitter&repo=&langOverride=&start_value=1&type=Everything&language=Objective-C)，其中 twitter 搜索与 Objective-C 交叉，所以如果`MGTwitterEngine`不是你的cup-o-tea，还有很多其他资源可供你使用。

# python - Eclipse 和 Pydev：所有文件的全局“运行配置”

> ID：11379957
> 
> 赞同：5
> 
> 时间：2012-07-08T01:14:35.543
> 
> 标签：python, eclipse, pydev

我刚开始为一个小项目尝试 Pydev 和 Eclipse。

我的问题是，每当我在项目的入口点文件上单击“运行”时，它运行良好。

但是，每当我在不同的文件（不是入口点）上时，它都会要求我为该文件创建一个新的运行配置，而我只是希望它从入口点开始。

这样做的方法是什么，因为我已经在属性中搞砸了一段时间无济于事。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T01:18:38.693

如果您只有一个“主要”入口点，您可以将 Eclipse 设置为始终运行最后启动的配置。

[http://eclipseone.wordpress.com/2010/01/15/always-rundebug-the-last-launched-class-instead-of-the-selected-one-in-eclipse/](http://eclipseone.wordpress.com/2010/01/15/always-rundebug-the-last-launched-class-instead-of-the-selected-one-in-eclipse/)

# c# - 在 MVC3 Razor 创建视图中动态添加表单元素

> ID：11379958
> 
> 赞同：3
> 
> 时间：2012-07-08T01:15:04.120
> 
> 标签：c#, asp.net-mvc-3

我想创建一个带有一组文本框的表单，每次用户单击添加按钮时，这些文本框将被重新创建与用户单击添加按钮的次数一样多。这是我想要做的事情的图片。![在此处输入图像描述](../Images/ceac556bcd7ea2ea77794e92c557b459.png)

## 控制器：

```
 //
    // GET: /Client/MyMove/Create

    public ActionResult Create()
    {
        return View();
    }

    //
    // POST: /Client/MyMove/Create

    [HttpPost]
    public ActionResult Create(Move move)
    {
        var viewModel = new CreateMoveViewModel();
        MembershipUser currentUser = Membership.GetUser();
        Guid currentUserId = (Guid)currentUser.ProviderUserKey;
        if (ModelState.IsValid)
        {                
            move.UserId = currentUserId;
            db.Moves.Add(move);
            move.AddMoveItem(2);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(move);
    } 
```

## 创建.cshtml

```
@model MovinMyStuff.WebUI.Areas.Client.Models.CreateMoveViewModel
@using Telerik.Web.Mvc.UI
@{
    ViewBag.Title = "Create";
}

<h1>Post a Move</h1>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript">    </script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <div class="form-item-group last">
        <div class="form-item half">
            <div class="editor-label">
                Start Date
            </div>
Editorfor for Model1...
    <div>
        @Html.Partial("_MoveItem")
    </div>
</fieldset>
<div class="submit-button-wrapper">
    <input class="button" type="submit" value="Post" />
</div>
}

<div>
    @Html.ActionLink("Go Back", "Index", null, new { @class = "link-text" })
</div> 
```

## 视图模型

```
namespace MovinMyStuff.WebUI.Areas.Client.Models
{
public class CreateMoveViewModel
{
    public CreateMoveViewModel()
    {
        Moves = new Move();
        MoveItems = new MoveItem();
    }
    public Move Moves { get; set; }
    public MoveItem MoveItems { get; set; }
}
} 
```

## 局部视图

```
@model MovinMyStuff.Domain.Entities.MoveItem

    <div class="editor-label">
        Choose Area of Your Home
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.MoveItemArea)
        @Html.ValidationMessageFor(model => model.MoveItemArea)
    </div>

    <div class="editor-label">
        Choose Your Item 
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.MoveItemType)
        @Html.ValidationMessageFor(model => model.MoveItemType)
    </div>

    <div class="editor-label">
        Quantity
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Quantity)
        @Html.ValidationMessageFor(model => model.Quantity)
    </div>
Other Properties of model...

    <div class="editor-label">
        @Html.HiddenFor(model => model.MoveId)
    </div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T06:31:24.277

我非常强烈地邀请您阅读[以下文章](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)。它包含一个如何实现您正在寻找的示例。它涵盖了您在开始实现此功能时使用默认模型绑定器将遇到的挑战。为了克服集合索引的这些挑战，作者使用了自定义`Html.BeginCollectionItem`助手。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T01:24:54.180

好吧，我将尝试使用您需要的模型创建一个局部视图，关键是每次单击带有 ajax 的按钮时添加从局部视图生成的 html，例如：

你的模型

```
 public class example
 { 
     public int Length { get; set;}
     public int Width  { get; set;}
     public int Height {get; set;}
 } 
```

你的行动

```
public ActionResult Example()
{
     return View();
} 
```

你的局部视图

```
@model FooExample.Model.Example    

@{
     Layout = null;
 }

<div>
     @Html.EditorFor(model => model.Length)  
</div>
<div>
     @Html.EditorFor(model => model.Width)  
</div>
<div>
     @Html.EditorFor(model => model.Height)  
</div> 
```

您的主要观点

```
<input type="button" id="btnAddRows" />

<table id="addViews">
     <tr>
        <td>
        </td> 
     </tr>
<table> 
```

现在这是脚本

```
$(document).ready(function(){
   $("#btnAddRows").click(function(){

       $.ajax({
            url: 'your path to the action',
            data : 'if you need to pass parameters',
            datatype: 'html',
            success: function(data){
               $("#addViews").append("<tr/><td>"+data+"</td><tr>");
           }  
       })

   });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T01:43:46.383

这是我过去如何实现类似情况的解释： [https ://stackoverflow.com/a/10583792/1373170](https://stackoverflow.com/a/10583792/1373170)

它更复杂，因为它还需要支持编辑和删除。主要思想是有一个隐藏的模板（用一个创建`EditorTemplate`），用于创建新的行，以及一些 JavaScript 来自动命名所有新项目，以一种由 MVC 的默认绑定器自动解释的方式，并转换为适当的Action 中的 ViewModel 列表。

# jquery - 为什么我的水平滚动网站会丢失导航栏？

> ID：11379961
> 
> 赞同：0
> 
> 时间：2012-07-08T01:15:19.793
> 
> 标签：jquery, html, css, horizontal-scrolling

这是网站：http: [//100.365fragments.com/](http://100.365fragments.com/)

这是导航部分的html：

```
 <div class="content_nav">stranger &#35; 
            <a href="#stranger1" class="panel">1</a> | 
            <a href="#stranger2" class="panel">2</a> | 
            <a href="#stranger3" class="panel">3</a> | 
            <a href="#stranger4" class="panel">4</a> | 
            <a href="#stranger5" class="panel">5</a> |
            <a href="#stranger6" class="panel">6</a> | 
            <a href="#stranger7" class="panel">7</a> | 
            <a href="#stranger8" class="panel">8</a> | 
            <a href="#stranger9" class="panel">9</a> |
            <a href="#stranger10" class="panel">10</a> |
            <a href="#stranger11" class="panel">11</a> | 
            <a href="#stranger12" class="panel">12</a> | 
            <a href="#stranger13" class="panel">13</a> | 
            <a href="#stranger14" class="panel">14</a> |
            <a href="#stranger15" class="panel">15</a> |
            <a href="#stranger16" class="panel">16</a> | 
            <a href="#stranger17" class="panel">17</a> | 
            <a href="#stranger18" class="panel">18</a> | 
            <a href="#stranger19" class="panel">19</a> |
            <a href="#stranger20" class="panel">20</a> |
            <a href="#stranger21" class="panel">21</a> | 
            <a href="#stranger22" class="panel">22</a> | 
            <a href="#stranger23" class="panel">23</a> | 
            <a href="#stranger24" class="panel">24</a> |
            <a href="#stranger25" class="panel">25</a> |
            <a href="#stranger26" class="panel">26</a> | 
            <a href="#stranger27" class="panel">27</a> | 
            <a href="#stranger28" class="panel">28</a> | 
            <a href="#stranger29" class="panel">29</a> |
            <a href="#stranger30" class="panel">30</a> |
            <a href="#stranger31" class="panel">31</a> | 
            <a href="#stranger32" class="panel">32</a> | 
            <a href="#stranger33" class="panel">33</a> | 
            <a href="#stranger34" class="panel">34</a> |
            <a href="#stranger35" class="panel">35</a> |
            <a href="#stranger36" class="panel">36</a> | 
            <a href="#stranger37" class="panel">37</a> | 
            <a href="#stranger38" class="panel">38</a> | 
            <a href="#stranger39" class="panel">39</a> |
            <a href="#stranger40" class="panel">40</a> |
            <a href="#stranger41" class="panel">41</a> | 
            <a href="#stranger42" class="panel">42</a> | 
            <a href="#stranger43" class="panel">43</a> | 
            <a href="#stranger44" class="panel">44</a> |
            <a href="#stranger45" class="panel">45</a> |
            <a href="#stranger46" class="panel">46</a> | 
            <a href="#stranger47" class="panel">47</a> | 
            <a href="#stranger48" class="panel">48</a> | 
            <a href="#stranger49" class="panel">49</a> |
            <a href="#stranger50" class="panel">50</a> |
            <a href="#stranger51" class="panel">51</a> | 
            <a href="#stranger52" class="panel">52</a> | 
            <a href="#stranger53" class="panel">53</a> | 
            <a href="#stranger54" class="panel">54</a> |
            <a href="#stranger55" class="panel">55</a> |
            <a href="#stranger56" class="panel">56</a> | 
            <a href="#stranger57" class="panel">57</a> | 
            <a href="#stranger58" class="panel">58</a> | 
            <a href="#stranger59" class="panel">59</a> |
            <a href="#stranger60" class="panel">60</a> |
            <a href="#stranger61" class="panel">61</a> | 
            <a href="#stranger62" class="panel">62</a> | 
            <a href="#stranger63" class="panel">63</a> | 
            <a href="#stranger64" class="panel">64</a> |
            <a href="#stranger65" class="panel">65</a> |
            <a href="#stranger66" class="panel">66</a> | 
            <a href="#stranger67" class="panel">67</a> | 
            <a href="#stranger68" class="panel">68</a> | 
            <a href="#stranger69" class="panel">69</a> |
            <a href="#stranger70" class="panel">70</a> |
            <a href="#stranger71" class="panel">71</a> | 
            <a href="#stranger72" class="panel">72</a> | 
            <a href="#stranger73" class="panel">73</a> | 
            <a href="#stranger74" class="panel">74</a> |
            <a href="#stranger75" class="panel">75</a> |
            <a href="#stranger76" class="panel">76</a> | 
            <a href="#stranger77" class="panel">77</a> | 
            <a href="#stranger78" class="panel">78</a> | 
            <a href="#stranger79" class="panel">79</a> |
            <a href="#stranger80" class="panel">80</a> |
            <a href="#stranger81" class="panel">81</a> | 
            <a href="#stranger82" class="panel">82</a> | 
            <a href="#stranger83" class="panel">83</a> | 
            <a href="#stranger84" class="panel">84</a> |
            <a href="#stranger85" class="panel">85</a> |
            <a href="#stranger86" class="panel">86</a> | 
            <a href="#stranger87" class="panel">87</a> | 
            <a href="#stranger88" class="panel">88</a> | 
            <a href="#stranger89" class="panel">89</a> |                
            <a href="#stranger90" class="panel">90</a> |
            <a href="#stranger91" class="panel">91</a> | 
            <a href="#stranger92" class="panel">92</a> | 
            <a href="#stranger93" class="panel">93</a> | 
            <a href="#stranger94" class="panel">94</a> |
            <a href="#stranger95" class="panel">95</a> |
            <a href="#stranger96" class="panel">96</a> | 
            <a href="#stranger97" class="panel">97</a> | 
            <a href="#stranger98" class="panel">98</a> | 
            <a href="#stranger99" class="panel">99</a> |
            <a href="#stranger100" class="panel">100</a> 

        </div> 
```

这是CSS：

```
 body {
height:100%;
width:100%;
margin:0;padding:0;
overflow:hidden;
    }

    #wrapper {
width:100%;
height:100%;
position:absolute;
top:0;left:0;
background-color:#ccc;
overflow:hidden;
    }

#mask {
    width:10000%;
    height:100%;
    background-color:#eee;
}

.stranger {
    width:1%;
    height:100%;
    float:left;
    background-color:#ddd;
}

.content {
    width:800px;
    height:200px;
    top:20%;
    margin:0 auto;
    background-color:#aaa;
    position:relative;
}

.content {
    width:800px;
    height:200px;
    top:8%;
    margin:0 auto;
    background-color:#aaa;
    position:relative;
}

    #nav_content {
           width: 800px;
           height: 100px;
           top:60%;
           margin-left: auto;
           margin-right:auto;
           display:block;
           text-align:center;
    background-color:#aaa;

    }

    content_nav {
          width: 800px;
          height: 100px;
    margin-left: auto;
           margin-right:auto;
           display:block;
           text-align:center;
    background-color:#aaa;
    }

.selected {
    background:#fff;
    font-weight:700;
}

.clear {
    clear:both;
}

.selected {
    background:#fff;
    font-weight:700;
}

.clear {
    clear:both;
}

    </style> 
```

当您查看第二个链接时，它会滚动到右侧框，但是，导航会离开屏幕。我不太确定我做错了什么。欢迎就此提出建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T01:19:49.863

是`.content_nav { position:fixed; }`你要找的吗？使用该设置（并根据您的要求进行调整），您只需要一个始终可见的菜单。

此外，您的 CSS 在之前缺少一个句点，`content_nav`因此添加一个（因为它是一个类）并且这些样式应该可以工作。

# php - json 编码 php 和 google 图表

> ID：11379962
> 
> 赞同：0
> 
> 时间：2012-07-08T01:15:40.957
> 
> 标签：php, json, google-visualization

```
$data = '{ 
    "cols": [   {"id":"","label":"ID","pattern":"","type":"string"}, 
            {"id":"","label":"Instant Background","pattern":"","type":"number"}, 
            {"id":"","label":"Red","pattern":"","type":"number"}, 
            {"id":"","label":"Green","pattern":"","type":"number"}, 
            {"id":"","label":"Blue","pattern":"","type":"number"} 
        ],

    "rows": [
    {"c":[{"v":"827075"},{"v":3992},{"v":3989},{"v":3994},{"v":3993}]},
    {"c":[{"v":"827070"},{"v":3974},{"v":3987},{"v":3985},{"v":3985}]},
    {"c":[{"v":"827070"},{"v":3974},{"v":3987},{"v":3985},{"v":3985}]},
    {"c":[{"v":"827070"},{"v":3974},{"v":3987},{"v":3985},{"v":3985}]},
    {"c":[{"v":"827070"},{"v":3974},{"v":3987},{"v":3985},{"v":3985}]}
    ]
    }'; echo $data; 
```

好的，当以这种格式在谷歌地图上使用时，数据与回声一起工作，所以那里没有问题。

```
function drawChart(jsonData) {
      jsonData = $.ajax({
      url: "http://www.mailboxmbe.com/jsongraph.php",
      dataType:"json",
      async: false
      }).responseText; 
```

PHP 从 SQl 语句中获取数据并按如下方式构造数据：

```
$JSONObject1 = '{"c":[{"v":"'.$row["id"].'"},{"v":'.$row["sinstantBackground"].'},{"v":'.$row["sRed"].'},{"v":'.$row["sGreen"].'},{"v":'.$row["sBlue"].'}]},'.$JSONObject1; 
```

每一行都有以下 **id,sinstantBackground,sRed,sGreen.sBlue。**

在图形页面上，**jsonData**保存从通过 SQL 查询调用的 echo $data 传递给它的 json 字符串。

我想做的是研究如何将**jsonData**中的 json 脚本转换为一种格式，我可以在其中找出最大的 ID 是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T01:52:30.313

不确定是否理解这个问题，但创建一个 DataTable 就足够了：

```
var data = new google.visualization.DataTable(jsonData); 
```

然后看看[这里](https://developers.google.com/chart/interactive/docs/reference#DataTable)的不同访问器方法。

# c# - linq-to-sql 在某个日期获取价值状态

> ID：11379963
> 
> 赞同：0
> 
> 时间：2012-07-08T01:15:52.060
> 
> 标签：c#, linq-to-sql

我有一个如下所示的 db 表：State 是一个范围从 1 到 6 的数字，我正在存储状态更改的日期。

```
|  State |     Date   |
|    3   |  5/19/2012 |
|    1   |  6/12/2012 |
|    4   |  7/2/2012  | 
```

我正在写一个`.Where`条款，但我被卡住了。基本上，我正在查询某个日期的数据，而我想要的对象模型的属性之一是该特定日期的状态。如果我写：

```
 from s in MyDC.StateTable
   where s.Date == SomeDate.Date
   select s.State 
```

那么当然它不会返回我需要的东西。例如，如果我要查询 2012 年 6 月 22 日，那么它应该返回 1，因为那是该日期的状态；它在 2012 年 6 月 12 日设置为 1。这个where子句怎么写？

感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T01:18:17.797

这是你想要的？

```
var date = ??;

var state = from s in MyDC.StateTable
where x.SomeDate.Date ==  date
select s.State; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T01:24:04.790

也许是这样的：

```
// var date = DateTime.Now.Subtract(TimeSpan.FromMonths(1));
var state = MyDC.StateTable.Where(xx => date >= xx.Date)
                           .OrderBy(xx => xx.Date)
                           .First()
                           .State; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T01:24:20.493

我认为这会奏效。不确定语法是否完全正确，但很接近。

```
var state = MyDC.StateTable
   .Where(row => row.Date <= SomeDate)
   .OrderByDescending(row.Date)
   .First()
   .Select(row => row.State) 
```

# java - Swing 应用程序错误：java.lang.classnotfoundexception com.mysql.jdbc.driver

> ID：11379965
> 
> 赞同：1
> 
> 时间：2012-07-08T01:16:08.817
> 
> 标签：java, swing

我的 Swing 应用程序有这个问题：“java.lang.classnotfoundexception com.mysql.jdbc.driver with swing”。当我创建连接时，我添加了 mysql 连接器 lib 文件并进行了测试。它是成功的。现在我已连接，我可以看到数据库中的每个表。问题是当我想创建一个简单的选择查询时。

```
public class DatabaseManager {
    public static Connection getMySqlConnection() throws Exception {
        String driver = "com.mysql.jdbc.Driver";
        String url = "jdbc:mysql://localhost/Sample";
        String username = "root";
        String password = "123";
        Class.forName(driver);
        Connection conn = DriverManager.getConnection(url, username, password);
        return conn;
      }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T01:33:17.390

运行时，您的类路径中没有驱动程序类。将 MySQL JAR 添加到您的运行时类路径。

你的代码有很多问题。没有理由只为 MySQL 硬编码。以这种方式以纯文本形式保存所有信息是一种糟糕的形式。您可以将其移出到属性文件中。您将需要比这更多的方法（例如关闭连接等）

# ruby-on-rails - friendly_id，从历史记录中删除 slug

> ID：11379973
> 
> 赞同：3
> 
> 时间：2012-07-08T01:18:48.143
> 
> 标签：ruby-on-rails, activerecord, friendly-id

我正在`friendly_id`将该`history`模块用于一个名为的模型`page`，并希望能够从`friendly_id_slugs`表中删除 slug，以便它们不再重定向并可以再次使用。

我想出了几个可能的解决方案，但不确定如何进行：

1.  创建一个新的模型和控制器，`friendly_id_table`并像对待任何其他模型一样做事
2.  添加一个`destroy_slug`动作来`pages_controller.rb`查找蛞蝓并销毁它 - 但是，我不确定如何加载蛞蝓，也许`FriendlyId::Slug.find()`
3.  在命名空间中创建一个控制器`FriendlyId`- 不知道怎么做

任何人都可以提出建议作为最好的方法或如何完成＃2或＃3？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T15:18:30.517

我目前正在这样实现：

```
# slug_controller.rb
class SlugsController < ApplicationController
  def destroy
    @slug = FriendlyId::Slug.find(params[:id])
    @slug.destroy
    redirect_to :back, :notice => "The URL <strong>/#{@slug.slug}</strong> has been removed"
  end
end

# routes.rb
resources :slugs, :only => :destroy

# in a view
<%= link_to 'Delete slug', slug_path(slug.id), :method => :delete %> 
```

# scala - 将伴随对象应用于别名类型

> ID：11379975
> 
> 赞同：3
> 
> 时间：2012-07-08T01:19:16.770
> 
> 标签：scala, companion-object

我想让我的 Scala 代码更具可读性，所以我为所有参数化类型添加了自定义类型。

所以我有包装对象，为简单起见，

```
type IntSeq = Seq[Int] 
```

但是，现在我不能`apply`对伴生对象做简单的事情。来自 REPL：

```
scala> IntSeq(1, 2, 3)
<console>:8: error: not found: value IntSeq
              IntSeq(1, 2, 3)
              ^ 
```

该怎么办？

*（只是为了确保：我的实际别名对象比 更复杂`Seq[Int]`）*

编辑：有一个类似的问题 - [Scala 类型别名，包括伴随对象 [beginner]](https://stackoverflow.com/questions/3920573/scala-type-alias-including-companion-object-beginner-question?rq=1)

关于那个问题，有两个回复，他们都没有工作。

一种是使用 apply 定义我的自定义对象，但我不确定在我的情况下如何做到这一点，而且它有点冗长。

另一个 - 写入`val IntSeq = Seq`会产生错误

> 警告：先前定义的特征 Seq 不是值 IntSeq 的伴侣。必须一起定义同伴；您可能希望为此使用 :paste 模式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T01:36:43.540

第二个错误只是因为 REPL 的运行方式。在 REPL 中，必须使用`:paste`模式一起定义同伴；但是，在包对象中，这不是问题。

所以，另一种方法——写作`val IntSeq = Seq`——实际上会奏效。

# objective-c - 使用 OBJC 在 Mac 上录制音频

> ID：11379978
> 
> 赞同：-4
> 
> 时间：2012-07-08T01:19:57.697
> 
> 标签：objective-c, core-audio, audio-recording, qtkit

正如标题所说，我只想在 Mac 上用 Objective-C 录制音频，而不是 iPhone，我只需要一个简单的例子，我已经用核心音频和 QTKit 搜索过，但例子比什么复杂得多我需要，请保持简单。. . 实际上，如果您能告诉我所需的框架、类和方法，那就很好了，请简单！如果您包含播放录制声音的代码，那就太好了。

提前致谢！

PD：我很抱歉，但我需要坚持简单，但有时人们不明白；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:52:18.437

在查看了 Core Audio 文档后，我相信您会同意 Core Audio 本质上是复杂的，因此要求一个*简单*的示例对您没有任何好处。但是，如果您正在为 OS X 10.7 或更高版本进行开发，那么您很幸运。AVAudioRecorder（属于 AVFoundation 框架）使用起来非常简单。这是一个链接：[AVAudioRecorder](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAudioRecorder_ClassReference/Reference/Reference.html)

# java - 如何删除 O(1) 中单链表的最后一个元素？

> ID：11379979
> 
> 赞同：1
> 
> 时间：2012-07-08T01:19:59.847
> 
> 标签：java, linked-list

假设我有一个带有哨兵的单链表。要在 O(1) 时间内删除最后一个元素，我需要维护最后 2 个元素的句柄。但是维护最后两个元素的句柄会使添加操作复杂化。

有没有办法在 O(1) 中删除带有哨兵的单链表的最后一个元素，而无需维护最后两个元素的句柄？我将非常感谢 java 中的任何示例代码。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T01:23:58.677

以正常方式实现的单链表将是一个`O(N)`操作。

保留最后一个元素的句柄并不复杂，单链表实现通常会这样做，以便您可以在`O(1)`. 但是，面对“删除最后一个”操作，保持到最后一个元素的链接`O(1)`是不可能的。

想想看。假设我有某个地方可以保存指向最后一个节点和倒数第二个节点的指针。当我删除最后一个节点时，我需要：

1.  `next`将第二个到最后一个节点中的指针更新为空，
2.  更新`last`指针以指向倒数第二个节点。
3.  更新`secondToLast`指针以指向它之前的节点。

但是我如何在不从头开始遍历列表的情况下完成最后一步......这是一个`O(N)`操作？

现在我想你可以对你的链表进行编码，以便删除最后一个元素是`O(1)` *你第一次这样做*，并且`O(N)`在随后的时间......直到你在最后添加一个新元素。但除非你有一个不寻常的用例，否则这种“优化”是不值得的。

* * *

你可能最好使用`java.util.LinkedList`它使用双向链表，并且有一个`removeLast()`方法是`O(1)`.`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T01:23:05.613

不，从末尾删除仅适用于双向链表。您需要反向指针将新的 NULL 终止符放在前一个链接上。我建议将列表进行双重链接以满足您的要求。

你在做自己的容器吗？为什么不使用双向链接的 java.util.LinkedList？

# objective-c - 无法使用 nib 和 IBOutlet 实现 UILabel

> ID：11379984
> 
> 赞同：0
> 
> 时间：2012-07-08T01:21:23.707
> 
> 标签：objective-c, uilabel, iboutlet

我有一个 UILabel，它是用笔尖制作的。

在我添加的代码中（在适当的地方）

```
IBOutlet UILabel *question;

@property (nonatomic, retain) IBOutlet UILabel *question;

@synthesize question; 
```

在笔尖中，我已将标签连接到文件的所有者。

但是，类似的东西`question.text = @"test"`不会产生任何结果。此外，一个 NSLog 告诉我 (question == nil) 是 TRUE

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T01:52:35.787

可能有更多问题导致此问题。我会列出一些，你可以得到帮助

正如你所说，你正在使用你自己的方法来构建你的类

*   QuizController *quizController = [[QuizController alloc] initWithNibName:@"QuizController" bundle:nil data:data.quizQuestions]

再次检查您的`initWithNibName`方法。你所要做的

```
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]; 
```

*   再次检查你的 nib 文件，class of`File's Owner`是`QuizController`开启的`Identity Inspector`
*   以及您使用的方法`question.text = @"test"`。尝试在`viewDidLoad`方法上分配文本，而不是在构造函数上。

让我知道结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T01:29:23.587

因为 UILabel 是作为属性实现的，所以试试 self.question.text = @"test"

# ios - 滑动删除嵌入在 UIScrollView 中的 UITableView

> ID：11379989
> 
> 赞同：4
> 
> 时间：2012-07-08T01:22:43.227
> 
> 标签：ios, uitableview, ios5, ios4, uiscrollview

我遇到了与[UIScrollview 相同的问题 enable delete row by swipe](https://stackoverflow.com/questions/8929432/uiscrollview-enable-delete-row-by-swipe)
这是一个 tableView 和另一个视图作为 scrollView 的子视图工作，我无法启用“滑动删除”，直到我将 scrollView 的**scrollEnable**属性设置为**不**，但它带来了另一个问题：我无法在 tableView 和另一个视图之间滑动除了设置**scrollEnable**属性以启用“滑动删除”
之外，还有其他方法吗？ 如果没有，我应该什么时候设置，什么时候应该设置“滑动删除”和“在视图之间滑动”都可以正常工作？ **`self.scrollEnable = NO``self.scrollEnable = YES`**

 **谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T12:13:10.503

我已经成功使用

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer 
```

在包含 tableview 的 UIScrollView 子类中，以使驻留在 tableview 中的 UISwipeGestureRecognizer 能够触发而不是被“主”滚动视图的手势识别器吞噬。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-18T19:18:28.707

您需要使用`UIScrollView`. 它应该适用于水平滚动视图中的表格视图：

```
@interface MyCoolScrollView : UIScrollView

@end

@implementation MyCoolScrollView

// Allows inner UITableView swipe-to-delete gesture
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRequireFailureOfGestureRecognizer:(nonnull UIGestureRecognizer *)otherGestureRecognizer
{
    return [otherGestureRecognizer.view.superview isKindOfClass:[UITableView class]];
}

@end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-08T11:22:51.847

如果，我没记错的话，滚动视图消耗了触摸，并且表格的编辑没有发生，因为表格没有得到触摸。这可以通过继承 UIScrollView 来解决，以便将触摸也发送给下一个响应者。所以这只是覆盖touchesBegan、move 和end 的问题。今天晚些时候将使用我现在在路上所需的代码更新答案。干杯!

编辑：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self.nextResponder touchesBegan:touches withEvent:event];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    if(!self.dragging)
    {
        [self.nextResponder touchesMoved:touches withEvent:event];
    }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self.nextResponder touchesEnded:touches withEvent:event];
} 
```

只需创建一个继承自`UIScrollView`并在实现中删除此代码的类。这将使 scrollView 不会吞下触摸，而是将它们传递下去。显然，在创建您的 scrollView 时使用您刚刚创建的类而不是`UIScrollView`. 抱歉耽搁了。希望这可以帮助。

干杯!

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-05T16:54:22.130

@THOR 的回答没问题，但如果你`UITableView`在 a 中`UIScrollView`，你可能也有另一个`UIView`。当您向上滚动 时`tableview`，您不小心滑到了“其他视图”。

这将防止滑动，并允许您滑动删除。

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
if (gestureRecognizer.state != 0) {
        return YES;
} else {
    return NO;
} 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-03T03:27:53.053

我知道这个线程很旧，但这里是 swift 4 版本，为我在 iOS 11 中工作（你可以继承 UIScrollView）：

```
func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldRequireFailureOf otherGestureRecognizer: UIGestureRecognizer) -> Bool {
    if (otherGestureRecognizer.view != nil && otherGestureRecognizer.view!.superview != nil) {
        return otherGestureRecognizer.view!.superview!.isKind(of: UITableView.self)
    }

    return false
}

func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldRecognizeSimultaneouslyWith otherGestureRecognizer: UIGestureRecognizer) -> Bool {
    if (gestureRecognizer.state != .possible) {
        return true
    }

    return false
} 
```**

# apache2 - 将非 WWW 重定向到 www

> ID：11379994
> 
> 赞同：1
> 
> 时间：2012-07-08T01:24:18.417
> 
> 标签：apache2

我的服务器上有大约 10 个域

```
site1.com
site2.com
site3.com 
```

我想重定向`non-www`到`www`

从`site1.com`到`www.site1.com`

从`site2.com`到`www.site2.com`

我应该为每个站点添加 htaccess 吗？

我可以在 apache 配置中做空这个工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T01:29:32.453

每个域的 Apache 配置中的以下条目都可以解决问题。请注意，您应该进行`301`（永久）重定向，以确保搜索引擎了解您的`www`地址是规范地址。

```
<VirtualHost *:80>
ServerName example.com
ServerAlias *.example.com

Redirect 301 / http://www.example.com
</VirtualHost> 
```

# html - 第一个单词后换行

> ID：11379999
> 
> 赞同：2
> 
> 时间：2012-07-08T01:25:16.540
> 
> 标签：html, css

如何在第一个单词之后为按钮链接在 css 或 html 中换行。所以例子：

我们的故事 <- 没有换行符

我们的
故事 <- 换行

这在一个链接中，该链接与我的 css 文件中的一个类相关联，使其具有漂亮的按钮外观。一排有5个按钮，都需要这个。我曾尝试使用填充和 a`<br/>`但根本不起作用。

```
<a href="story.php" class="button_nav"/>Our Story</a> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T01:31:31.717

用于[`<br>`](https://developer.mozilla.org/en/HTML/Element/br)添加换行符（[示例](http://jsfiddle.net/RXdw4/)）：

```
<a href="story.php" class="button_nav">Our<br>Story</a> 
```

另一种建议的解决方案是将第一个单词包装在 a 中`<span>`并使用 CSS 设置样式（[示例](http://jsfiddle.net/RXdw4/2/)）：

```
<a href="story.php" class="button_nav"><span>Our</span> Story</a> 
```

```
a.button_nav {
    display:inline-block;
    text-align:center;
}
span {
    display:block;
} 
```