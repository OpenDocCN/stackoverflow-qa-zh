# StackOverflow 问答 10531000-10531999

# c - 浮点除法 - 避免结果小于“精确”值的偏差

> ID：10531003
> 
> 赞同：8
> 
> 时间：2012-05-10T09:20:22.930
> 
> 标签：c, floating-point, floating-accuracy, ieee-754

我目前正在收紧浮点数字以估计值。（这是：[`p(k,t)`](http://www.math.dartmouth.edu/~carlp/PDF/paper88.pdf)对于那些感兴趣的人。）本质上，实用程序永远不会*低估*这个值：可能的素数生成的安全性取决于数值稳健的实现。虽然输出结果与公布的值一致，但我使用该`DBL_EPSILON`值来确保特别是除法产生的结果永远不会小于真实值：

考虑：`double x, y; /* assigned some values... */`

评估：`r = x / y;`经常发生，但这些（有限精度）结果可能会从真实结果中截断有效数字 - 可能是无限精度的理性扩展。我目前尝试通过对分子施加偏差来缓解这种情况，即

```
r = ((1.0 + DBL_EPSILON) * x) / y; 
```

如果您对这个主题有所了解，`p(k,t)`通常比大多数估计要小得多 - 但它根本不足以解决这个“观察”的问题。我当然可以说：

```
(((1.0 + DBL_EPSILON) * x) / y) >= (x / y) 
```

当然，我需要确保“有偏差”的结果大于或等于“精确”值。虽然我确信它与操纵或缩放`DBL_EPSILON`有关，但我显然希望“有偏差”的结果超过“精确”结果的最小值——这在**IEEE-754**算术假设下是可以证明的。

是的，我查看了 Goldberg 的论文，并寻找了一个可靠的解决方案。**请不要建议操纵舍入模式。**理想情况下，我正在寻求对浮点定理非常了解的人的回答，或者知道一个很好的例子。

**编辑：**澄清`(((1.0 + DBL_EPSILON) * x) / y)`或表格`(((1.0 + c) * x) / y)`不是先决条件。这只是我使用的一种“可能足够好”的方法，但没有为它提供坚实的基础。我*可以*说分子和分母不会是特殊值：NaN、Infs 等，分母也不会是零。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T14:47:59.377

第一：我知道您不想设置舍入模式，但确实应该说，就精度而言，正如其他人所指出的那样，设置舍入模式将产生尽可能好的答案。具体来说，假设`x`和`y`都是肯定的（似乎是这种情况，但在您的问题中没有明确说明），以下是具有预期效果的标准 C 代码片段[1]：

```
#include <math.h>
#pragma STDC FENV_ACCESS on

int OldRoundingMode = fegetround();
fesetround(FE_UPWARD);
r = x/y;
fesetround(OldRoundingMode); 
```

现在，除此之外，有正当的理由不想更改舍入模式（某些平台不支持舍入到正无穷大，在某些平台上更改舍入模式会引入大的序列化停顿等），并且你不应该这样做的愿望不应该如此随便地置之不理。那么，尊重您的问题，我们还能做些什么呢？

如果您的平台支持融合乘加，那么您可以使用一个非常优雅的解决方案：

```
#include <math.h>
r = x/y;
if (fma(r,y,-x) < 0) r = nextafter(r, INFINITY); 
```

在支持硬件 fma 的平台上，这是非常有效的。即使 fma( ) 是在软件中实现的，它也是可以接受的。这种方法的优点是它将提供与更改舍入模式相同的结果；也就是说，可能的最紧密的界限。

如果您平台的 C 库是古老的并且不提供`fma`，仍然有希望。您声称的陈述是正确的（至少假设没有异常值-我需要更多地考虑异常值会发生什么）；`(1.0+DBL_EPSILON)*x/y`real 总是大于或等于无限精确的 x/y。它有时会比具有此属性的最小值大 1 ulp，但这是一个非常小的并且可能可以接受的余量。这些说法的证明非常繁琐，可能不适合 StackOverflow，但我将简要介绍一下：

1.  忽略非规范化，将我们限制在 [1.0, 2.0) 中的 x, y 就足够了。
2.  (1.0 + eps)*x >= x + eps > x。要看到这一点，请观察：

    ```
    (1.0 + eps)*x = x + x*eps >= x + eps > x. 
    ```

3.  令 P 为数学上精确的 x/y。我们有：

    ```
    (1.0 + eps)*x/y >= (x + eps)/y = x/y + eps/y = P + eps/y 
    ```

    现在，y 以 2 为界，所以这给了我们：

    ```
    (1.0 + eps)*x/y > P + eps/2 
    ```

    这足以保证结果四舍五入到值 >= P。这也向我们展示了更严格的界限。在许多情况下，我们可以使用`nextafter(x,INFINITY)/y`更严格的界限来获得所需的效果。（`nextafter(x,INFINITY)`总是 x + ulp，而`(1.0 + eps)*x`一半的时间是 x + 2ulp。如果你想避免调用`nextafter`库函数，你可以使用`(x + (0.75*DBL_EPSILON)*x)`而不是得到相同的结果，在正正常值的工作假设下）。

* * *

1.  为了真正学究式地正确，这将变得更加复杂。没有人真正写出这样的代码，但它应该是这样的：

    ```
    #include <math.h>
    #pragma STDC FENV_ACCESS on

    #if defined FE_UPWARD
        int OldRoundingMode = fegetround();
        if (OldRoundingMode < 0) goto Error;
        if (fesetround(FE_UPWARD)) goto Error;
        r = x/y;
        if (fesetround(OldRoundingMode)) goto TrulyHosed;
        return r;
    TrulyHosed:
        // we established the desired rounding mode and did our computation,
        // but now we can't set it back to the original mode.  I have no idea
        // how you handle this gracefully.
    Error:
    #else
        // we can't establish the desired rounding mode, so fall back on
        // something else. 
    ```

# objective-c - UITableView - 在选择行之后播放 Youtube 视频

> ID：10531004
> 
> 赞同：0
> 
> 时间：2012-05-10T09:20:23.400
> 
> 标签：objective-c, uitableview, youtube

有谁知道如何使 UITableView 像使用 Youtube 应用程序一样完成？我的意思是，在单元格中有缩略图和一些文本。这部分我已经完成了。但仍然无法实现如何触发视频。我知道如何从网络视图中触发它，但这是不同的情况。任何帮助将不胜感激。

编辑：我的观察是单元格的行为类似于原生 YT 应用程序中的 UIWebViews。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:56:05.133

你用过`UITableViewCell`单元格模板吗？

有[MPMoviePlayerController](http://developer.apple.com/library/ios/#documentation/MediaPlayer/Reference/MPMoviePlayerController_Class/Reference/Reference.html)

**概述：**

> 电影播放器​​（MPMoviePlayerController 类型）管理从文件或网络流中播放电影。播放发生在电影播放器​​拥有的视图中，并以全屏或内联方式进行。您可以将电影播放器​​的视图合并到您的应用程序拥有的视图层次结构中，或使用 MPMoviePlayerViewController 对象为您管理演示文稿

您还可以通过使用 Video 在[Apple 的多媒体编程指南](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/MultimediaPG/UsingVideo/UsingVideo.html#//apple_ref/doc/uid/TP40009767-CH3-SW1)中查看详细信息。

# objective-c - AMSerialPort：在一个项目中使用两个端口

> ID：10531006
> 
> 赞同：1
> 
> 时间：2012-05-10T09:20:25.800
> 
> 标签：objective-c, macos, serial-port

我正在编写一个小应用程序，用于`osx`通过串行连接向`Arduino`接口监听和发送命令。这很好用`AMSerialPort`。

但是现在我需要将一些数据转发到第二个`Arduino`，所以我需要第二个串行连接。

这个框架有可能吗？我几乎到处搜索如何打开第二个端口并通过代表获得通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:52:46.097

关于 AMSerialPort，我无法真正回答这个问题。虽然我过去经常使用 AMSerialPort，但已经有一段时间了，我从未尝试过打开两个端口。然而，我刚刚发布了我自己的 Objective-C 串口库，它绝对支持同时打开多个端口。它被称为 ORSSerialPort，你可以在这里获得它：[https](https://github.com/armadsen/ORSSerialPort) ://github.com/armadsen/ORSSerialPort 。

用 ORSerialPort 打开两个串口没有什么技巧。使用 ORSSerialPortManager 的`availablePorts`属性来获取系统上所有可用的端口。在`serialPort:didReceiveData:`委托方法中，您可以检查哪个端口接收到数据。像这样的东西：

```
NSArray *availablePorts = [[ORSSerialPortManager sharedSerialPortManager] availablePorts];

// The next two lines are simplified by assuming availablePorts has two ports 
// and you don't care which is which. Real code will be more sophisticated
self.port1 = [availablePorts objectAtIndex:0]; 
self.port2 = [availablePorts objectAtIndex:1];

self.port1.delegate = self;
self.port2.delegate = self;

[self.port1 open];
[self.port2 open];

- (void)serialPort:(ORSSerialPort *)port didReceiveData:(NSData *)data
{
    if (port == self.port1) {
        // Data is from port1
    } else if (port == self.port2) {
        // Data is from port2
    }
} 
```

# hadoop - 在 Hadoop MapReduce 中为二进制文件创建自定义 InputFormat 和 RecordReader

> ID：10531007
> 
> 赞同：2
> 
> 时间：2012-05-10T09:20:27.613
> 
> 标签：hadoop, mapreduce, binaryfiles, input-split

我正在编写一个 M/R 作业，它处理以二进制格式编写的大型时间序列数据文件，看起来像这样（为了便于阅读，这里的新行，实际数据是连续的，显然）：

```
TIMESTAMP_1---------------------TIMESTAMP_1
TIMESTAMP_2**********TIMESTAMP_2 
TIMESTAMP_3%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%TIMESTAMP_3
.. etc 
```

其中 timestamp 只是一个 8 字节的结构，可以通过前 2 个字节来识别。如上所示，实际数据在重复值时间戳之间有界，并且包含一个或多个预定义结构。我想编写一个自定义 InputFormat，它将向映射器发出键/值对：

```
< TIMESTAMP_1, --------------------- >
< TIMESTAMP_2, ********** >
< TIMESTAMP_3, %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% > 
```

从逻辑上讲，我想跟踪当前的`TIMESTAMP`，并汇总所有数据，直到`TIMESTAMP`再次检测到该数据，然后将我的`<TIMESTAMP, DATA>`对作为记录发送出去。我的问题是在内部拆分之间同步`RecordReader`，所以如果某个读者收到以下拆分

```
# a split occurs inside my data
reader X: TIMESTAMP_1--------------
reader Y: -------TIMESTAMP_1 TIMESTAMP_2****..

# or inside the timestamp
or even: @@@@@@@TIMES
         TAMP_1-------------- .. 
```

解决这个问题的好方法是什么？我是否有一种简单的方法来访问文件偏移量，以便我`CustomRecordReader`可以在拆分之间同步而不会丢失数据？我觉得我在如何处理拆分方面存在一些概念上的空白，因此对这些问题的解释可能会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:39:19.180

一般来说，创建支持拆分的输入格式并不简单，因为您应该能够找出从拆分边界移动到哪里以获得一致的记录。XmlInputFormat 是这样做的格式的一个很好的例子。
我建议首先考虑您是否确实需要可拆分的输入？您可以将输入格式定义为不可拆分，并且不会出现所有这些问题。
如果您的文件通常不会比块大小大很多 - 您不会丢失任何内容。如果他们这样做 - 您将失去部分数据局部性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T11:43:40.847

您可以子类化 的具体子类`FileInputFormat`，例如 ，`SeqenceFileAsBinaryInputFormat`并覆盖`isSplitable()`方法以返回`false`：

```
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.mapred.SequenceFileAsBinaryInputFormat;

public class NonSplitableBinaryFile extends SequenceFileAsBinaryInputFormat{

  @Override
  protected boolean isSplitable(FileSystem fs, Path file) {
      return false;
  }

  @Override
  public RecordReader getRecordReader(InputSplit split, JobConf job,
  Reporter reporter) throws IOException {
    //return your customized record reader here
  }
} 
```

# c++ - std::vector 元素中的常量引用

> ID：10531010
> 
> 赞同：13
> 
> 时间：2012-05-10T09:20:31.483
> 
> 标签：c++, stl, reference, vector, constants

它只是我的编译器还是禁止在 std::vector 元素中使用 cons 引用。考虑以下结构：

```
struct Y
{
  const int & x;

  Y(const int & p_x):
        x(p_x)
  {
  }
}; 
```

现在，当我尝试将此类对象推到向量上时：

```
std::vector<Y> yv;
int x = 5;
Y y(x);
yv.push_back(y); 
```

我得到编译器错误：“错误：非静态引用成员 `const int&Y::x'，不能使用默认赋值运算符”。复制 ctor 还不够吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-10T09:25:03.440

`vector`元素必须是可分配的。从C++ 标准的第*23.2.4 节类模板向量：*

> ...存储的对象应满足Assignable的要求。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-10T09:26:52.370

你可能想检查

```
std::reference_wrapper 
```

可用于 C++11

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-10T09:22:56.957

不，因为您不能分配给 const 引用，并且 STL 容器利用分配来移动项目。

您最好使用`shared_ptr`（`boost::`或`std::`取决于您的环境）或原始指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T09:23:20.970

赋值运算符是必要的，因为`vector`默认会提前在额外的插槽中构造元素。

后来，它不是重新分配，而是使用赋值运算符将这些默认实例分配给您推入向量中的任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T09:23:58.573

一般禁止在任何容器中使用引用。您可以通过以下事实来证明这一点，例如，向量分配正手数据，并且引用只能分配一次（在初始化期间）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-06T20:51:59.053

我终于用了

```
 std::vector< const Type* > 
```

不是最好看的，但它做同样的工作。

# actionscript-3 - 如何将actionscript变量值分配给flex中的spark组件

> ID：10531014
> 
> 赞同：0
> 
> 时间：2012-05-10T09:20:42.363
> 
> 标签：actionscript-3, flex4

我在动作脚本中有一个变量。如何使用变量值设置标签文本？我有以下代码：

```
public function setObjVal(obj1:InvPrintRRTObj):void
{
    obj = obj1;
    var date:String = obj.receive_Date;
    var yy:String = date.substring(0,3);
    var mm:String = date.substring(5,6);
    var dd:String = date.substring(8,9);
} 
```

我想将 yy 值分配给 spark 标签。请帮忙。mxml 代码在这里

s:标签宽度="35" 高度="25" textDecoration="none" verticalAlign="middle" text="{yy}"

抱歉，我无法格式化此 mxml 代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:52:34.317

因此，问题在于标签无法访问 yy 变量，因为它是在 setObjVal 方法中定义的。有两种方法可以解决此问题：

1.  使 yy 变量成为全局变量，即在方法之外定义它，以便标签组件可以访问它

2.  向标签添加一个 id（例如“myLabel”）并在 setObjMethod 中添加一行来更新标签的文本，如下所示：

    myLabel.text = yy; //在这种情况下，标签应该可以被方法访问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:52:58.927

实现此目的的另一种方法是通过 id 访问标签。

```
<s:Label 
  id="myLabel"
  width="35" 
  height="25" 
  textDecoration="none" 
  verticalAlign="middle" /> 
```

然后在你的功能

```
public function setObjVal(obj1:InvPrintRRTObj):void
{
    ...
    myLabel.text = yy;
} 
```

# java - Android (Eclipse) 中的 Spy / Watch 变量

> ID：10531015
> 
> 赞同：2
> 
> 时间：2012-05-10T09:20:56.117
> 
> 标签：java, android, eclipse, variables

我是使用 Eclipse 进行 Android 开发的新手。我在问一个非常基本的问题：是否可以在调试会话期间观察/监视变量的内容？（有点像在 Visual Studio 中）

我知道这是一个相当蹩脚的问题，但我自己无法弄清楚。

提前致谢，

加利恩

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T11:06:28.687

首先选择**Debug**透视图为：

![在此处输入图像描述](../Images/66475dbe20c11afdee58ccea9b9c516a.png)

然后在你想要的地方设置**断点：**

![在此处输入图像描述](../Images/bc6add546581ec13343137baff7b6146.png)

之后通过**Debug As->Debug Configurations...**创建一个 Debug 配置，然后 Debug as **Android Application**如下所示： ![在此处输入图像描述](../Images/73cb7769d7e09ce83714183c71f3b954.png)

**然后在 Debug 透视图中，您可以通过按F8**来跟踪/观察所需变量的值： ![在此处输入图像描述](../Images/97549558d18c4d98bbd468f9faaf6133.png) 就是这样，您还可以通过**Expressions**视图评估表达式。如果未启用，请从以下位置选择它： **Window->Show View->Other->Debug->Expressions**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:25:07.700

您可以使用调试透视图中的“表达式”选项卡。您还可以在遇到断点时观察变量 - 检查此链接：[http ://www.ibm.com/developerworks/library/os-ecbug/](http://www.ibm.com/developerworks/library/os-ecbug/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:26:42.430

是的，您可以在调试时查看变量。

要设置观察点，请在“调试”透视图的“大纲”视图中选择一个变量。右键单击变量，然后按“切换观察点”。

更多信息[在这里](http://help.eclipse.org/galileo/topic/org.eclipse.jdt.doc.user/reference/views/variables/ref-variables_view.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T09:36:37.837

打开调试透视图后，单击窗口->显示视图->表达式。之后，您可以手动输入变量名称。您可以在代码中选择一个变量然后右键单击，将出现一个名为“watch”的链接。你会明白的！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-10T11:46:36.023

最简单的方法是在调试时将鼠标悬停在变量名上，它会显示整个对象。我在 Eclipse 开普勒最新版本上工作。

![在此处输入图像描述](../Images/157800e800a187c676b79c5bdeeda6d4.png)

# json - ValueProvider 在 ASP.NET MVC 3 中维护值请求/响应

> ID：10531021
> 
> 赞同：0
> 
> 时间：2012-05-10T09:21:23.370
> 
> 标签：json, asp.net-mvc-3

我有一个接受对象的 ASP.NET MVC 3 控制器操作，如下所示：

```
 //// model.ReferenceNumber equals "-1"
    public ActionResult EditApplication(EditApplicationViewModel model)
    {
        if (!ModelState.IsValid)
        {
                  ...
        }

        // Existing Applicant
        model.ReferenceNumber = "";
        var msg = this.RenderPartialViewToString("_ExistingApplication", model);
    } 
```

当收到请求时，“model.ReferenceNumber”等于“-1”。即使将模型上的属性设置为空字符串“”，“RenderPartialViewToString”的结果仍然会在“输入”HTML 字段的“值”属性中显示“-1”的值。

知道为什么会这样吗？

这是用于渲染局部视图的代码： http: [//craftycodeblog.com/2010/05/15/asp-net-mvc-render-partial-view-to-string/](http://craftycodeblog.com/2010/05/15/asp-net-mvc-render-partial-view-to-string/)

```
public static string RenderPartialViewToString(this Controller controller, string viewName, object model)
{
    if (string.IsNullOrEmpty(viewName))
        viewName = controller.ControllerContext.RouteData.GetRequiredString("action");

    controller.ViewData.Model = model;

    using (var sw = new StringWriter())
    {
        var viewResult = ViewEngines.Engines.FindPartialView(controller.ControllerContext, viewName);
        var viewContext = new ViewContext(controller.ControllerContext, viewResult.View, controller.ViewData, controller.TempData, sw);
        viewResult.View.Render(viewContext, sw);

        return sw.GetStringBuilder().ToString();
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:33:47.980

当您在控制器 qc​​tion 中修改某些模型属性的值时，请确保也将其从模型状态中删除：

```
ModelState.Remove("ReferenceNumber");
model.ReferenceNumber = "new value";
var msg = this.RenderPartialViewToString("_ExistingApplication", model); 
```

# c# - 无法从“字符串”转换为“System.Web.UI.WebControls.TreeNode”

> ID：10531022
> 
> 赞同：0
> 
> 时间：2012-05-10T09:21:37.317
> 
> 标签：c#, .net, sharepoint, tree, treeview

不知道为什么会变得如此愚蠢或更像是感觉更少的错误，通常我们将字符串添加到treeNode，然后为什么不在这段代码中，

```
groupNode.ChildNodes.Add(UserPair.Value); 
```

（为什么不 ？）

```
 protected override void CreateChildControls()
    {
        base.CreateChildControls();

        try
        {
            int Index = 0;
            TreeView tree = new TreeView();
            TreeNode groupNode; 
            Dictionary<int, string> GroupList = new Dictionary<int, string>();
            Dictionary<int, string> UserList = new Dictionary<int, string>();
            List<string> IndividualUserList = new List<string>();

            foreach (SPUser user in SPContext.Current.Web.Users)
            {
                string groupName = FormatUserLogin(user.Name);

                if (groupName != "" && groupName != "System Account")
                    IndividualUserList.Add(groupName);
                else if (user.IsDomainGroup && !string.IsNullOrEmpty(groupName) && 
                    Directory.DoesGroupExist(groupName))
                {
                    Index++;
                    GroupList.Add(Index, groupName);
                    List<ADUser> adUsers = Directory.GetUsersFromGroup(groupName);

                    foreach (ADUser member in adUsers)
                    {
                        if (member != null && !string.IsNullOrEmpty(member.DisplayName))
                            UserList.Add(Index, member.DisplayName);
                    }
                }
            }

            IndividualUserList.Sort();

            foreach (string Item in IndividualUserList)
            {
                groupNode = new TreeNode(Item);
            }

            foreach (KeyValuePair<int, string> GroupPair in GroupList)
            {
                groupNode = new TreeNode(GroupPair.Value);
                foreach (KeyValuePair<int, string> UserPair in UserList)
                {
                    if (UserPair.Key == GroupPair.Key)
                        groupNode.ChildNodes.Add(UserPair.Value);
                }
            }

            tree.Nodes.Add(groupNode);

            this.Controls.Add(tree);
        }
        catch (Exception)
        {
            //loggingit
        }
    } 
```

我认为treeNodes可以为它们添加字符串值，如果我的代码中有任何逻辑错误或错误，请告诉我。

干杯

**回答**

```
if (UserPair.Key == GroupPair.Key)
                    {
                        TreeNode userNode = new TreeNode(UserPair.Value);
                        groupNode.ChildNodes.Add(userNode);
                    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T09:29:48.670

`groupNode.ChildNodes`是一个[TreeNodeCollection](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treenode.childnodes.aspx)。您只能将类型的对象添加`TreeNode`到集合中。更改此行：

```
groupNode.ChildNodes.Add(UserPair.Value); 
```

到：

```
groupNode.ChildNodes.Add(new TreeNode(UserPair.Value)); 
```

# javascript - 使用javascript获取数组中的最大字符串值

> ID：10531025
> 
> 赞同：1
> 
> 时间：2012-05-10T09:21:47.663
> 
> 标签：javascript, arrays, string, max

我有一个包含以下格式的字符串的数组：

```
1-a1,1-a2,1-a3,1-a4,2-b1,2-b2,2-b3,2-b4,3-c1,3-c2,3-c3,4-d1,4-d2 
```

其中`a`, `b`, `c`, 和`d`是数字。

现在，我怎样才能得到这个数组中的最大值、`a`最大值`b`、最大值`c`、最大值？`d`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:34:02.130

我对正则表达式了解不多，但试试这个：

```
var numbers = [0, 0, 0, 0]; //a = 0, b = 1, c = 2, d = 3

string.replace(/(\d)-(\d+)(,|$)/g, function($0, $1, $2) { numbers[parseInt($1) - 1] = Math.max(parseInt($2), numbers[parseInt($1) - 1]); }); 
```

编辑：我不知道它是一个数组，结果应该是什么...... 所以这是我对您的问题的解决方案：

```
var numbers = [0, 0, 0, 0], i, j;

for(i=0,j=array.length;i<j;++i) {
    array[i] = array[i].split('-');

    numbers[parseInt(array[i][0]) - 1] = Math.max(numbers[parseInt(array[i][0]) - 1], parseInt(array[i][1]));
} 
```

JSfiddle：http: [//jsfiddle.net/UQWLe/1/](http://jsfiddle.net/UQWLe/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:52:44.260

因此，假设您的数组按您显示的顺序排列，并且“1-a1”表示“组 1，编号，索引 1”（并且“1-a4”表示“组 1，编号，“索引 4”和“2-b1 ” 表示“第 2 组，编号，索引 1”等等）；并假设所有部分都可能不止一个数字（如“11-8812”又名“第 11 组，一个像 88 的数字和一个像 12 的索引” ); 你可以有类似的东西：

```
var array = ["1-81","1-102","1-93","1-24","2-881","2-122","2-13","2-984","3-2121","3-12","3-93","4-41","4-22"]
var max = {};

var group = "", count = 0;

for (var i = 0; i < array.length; i++) {
    var parts = array[i].split("-");

    if (group !== parts[0]) {
        group = parts[0];
        count = 0;
    }

    count++;

    var number = +parts[1].replace(new RegExp(count + "$"), "");

    max[group] = Math.max(max[group] || 0, number)
}

console.log(max) 
```

您也可以使用数组代替对象`max`。*如果最后一个数字总是*一个字符，则整个过程可以简化。

# django - 带有 select_related 的 Django get_object_or_404 导致形成复选框小部件的奇怪行为：Django 1.4 错误？

> ID：10531029
> 
> 赞同：2
> 
> 时间：2012-05-10T09:22:00.153
> 
> 标签：django, django-forms, django-1.4

我带来了一个非常奇怪的 Django 1.4 行为，这对我来说听起来像是一个错误。如果有人经历过，我到处寻找，但没有找到任何东西。

我担心的是**使用 ModelForm 创建 Django 表单**，模型包含布尔字段。

Let`Post`和`Topic`两个模型应该看起来像：

```
class Topic(models.Model):
    my_bool = models.BooleanField(default=False)

class Post(models.Model):
    topic = models.ForeignKey(Topic, related_name='posts') 
```

现在，我将尝试使用 TopicForm 生成一个表单，该类在其他地方定义：

```
post = Post.objects.get(pk=id_post)
f = TopicForm(instance=post.topic)
print f 
```

它工作正常：如果在 DB`my_bool`中为 False，*则不*选中该复选框。如果`my_bool`为 True，则选中该复选框。这是结果：

```
<p><label for="id_my_bool">my_bool:</label> <input type="checkbox" name="my_bool" id="id_my_bool" /></p> 
```

## 问题 ！

好的，问题来了：如果我`get_object_or_404`用来获取我的`Post`对象，那么`my_bool`字段**将始终被检查**！看这个 ：

```
post = get_object_or_404(Post.objects.select_related('topic'), pk=id_post)
f = TopicForm(instance=post.topic)
print f 
```

输出（奇怪）：

```
<p><label for="id_my_bool">my_bool:</label> <input checked="checked" type="checkbox" name="my_bool" value="0" id="id_my_bool" /></p> 
```

注意：我尝试了其他几种方法来获取`Post`对象，它们**都可以正常工作**：

*   `post = Post.objects.filter(pk=id_post)[0]`
*   `post = get_object_or_404(Post, pk=id_post)`
*   `post = Post.objects.get(pk=id_post)`

唯一使它成为错误的是：

```
post = get_object_or_404(Post.objects.select_related('topic'), pk=id_post) 
```

## 注释

*   使用 Django 1.3，它没有任何问题：只有 Django 1.4 使它成为错误。
*   我发现了一些似乎相关的 Django 1.4 错误，例如：
    *   [https://code.djangoproject.com/ticket/17747](https://code.djangoproject.com/ticket/17747)
    *   [https://code.djangoproject.com/ticket/17114](https://code.djangoproject.com/ticket/17114)
    *   [http://groups.google.com/group/django-developers/browse_thread/thread/7d895b2f5fc9ef4b](http://groups.google.com/group/django-developers/browse_thread/thread/7d895b2f5fc9ef4b)
*   我不使用 MySQL GIS 后端，但是`django.db.backends.mysql`.

你有什么想法吗？

非常感谢您提前！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:30:59.617

在我的应用程序中有相同的错误并找到已[打开的票证](https://code.djangoproject.com/ticket/15040)。似乎主要问题是成对的**select_related 和 MySQL**：MySQL为布尔值返回整数，但 Django 在使用 select_related 时无法将它们与相应的模型相关联；因此，**CheckboxInput**获取值 0 而不是 False 并将其视为复选框列表中的值。

你可以：

1.  使用票证中的补丁；
2.  或避免使用**select_related**；
3.  或修补**CheckboxInput**小部件：

    ```
    class SingleCheckboxInput(forms.CheckboxInput):
        def render(self, name, value, attrs=None):
            if value in (0, 1):
                value = bool(value)
            return super(SingleCheckboxInput, self).render(name, value, attrs)

    class TopicForm(django.forms.ModelForm):
        class Meta:
            model = Topic
            widgets = {'my_bool': SingleCheckboxInput} 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T03:00:45.780

我看到了一个类似的错误，如果我取消选中所有框，则 POST 数据为空！如果我只取消一个，POST 数据就会到达。不要调用 get_object_or_404()，而是检查您的入站 request.POST 数据。

# eclipse - 如何在 Tomcat (Eclipse Galileo) 中配置 WebApp？

> ID：10531046
> 
> 赞同：0
> 
> 时间：2012-05-10T09:23:22.850
> 
> 标签：eclipse, jakarta-ee, tomcat, eclipse-wtp

我重新安装了我的 Eclipse，安装了所有插件，所以我的 Tomcat 配置也丢失了。Maven 项目导入顺利，但现在我无法启动 Tomcat 服务器。它没有找到 WebApp configuration.xml 和 lf4j.xml 文件...我在哪里可以告诉服务器这些文件在哪里？此文件位于单独的目录中。

非常感谢你！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:00:08.093

Tomcat 启动配置 -> VM 参数 -> -Dwebapp.home="C:\path-to-webapp-config\condifuration.xml"

# android - 安卓中的PJSip

> ID：10531048
> 
> 赞同：7
> 
> 时间：2012-05-10T09:23:54.773
> 
> 标签：android, pjsip

我正在尝试使用诸如项目之类的`Sip client`为 android构建一个。不过，其实我对. 有没有人有关于 pjsip 的教程或类似的东西来使用 PJsip lib 在 android 中构建一个？欢迎任何建议！`pjsip`[`CSipSimple`](http://code.google.com/p/csipsimple/)`pjsip``Sip softphone`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:45:28.537

您不必使用第三方库在 Android 中构建 SIP 客户端功能。Android 包含一个成熟的[SIP API](http://developer.android.com/reference/android/net/sip/package-summary.html)。您可以查看[SIP 演示](http://developer.android.com/resources/samples/SipDemo/index.html)以了解如何将 SIP API 用于步话机类型的实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-12-28T20:22:55.567

## 我不会推荐 Android 默认 sip 堆栈来构建软件电话。我犯了同样的错误并且有很多问题。我在使用 android 默认 sip 堆栈时遇到的一些缺点

1.  它不支持 Dtmf 音

2.  *   它不支持视频通话
3.  - 它支持相当有限的安卓版本，它不会支持旧版本的安卓，特别是那些廉价平板电脑上可用的非标准安卓版本。

所以在浪费了大约一个月之后，我再次使用 pjsip 开发了整个应用程序。它不像 android sip stack 那样简单，但值得它的功能

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-16T18:52:16.067

接受的答案并不完全准确。Android SIP API 中缺少许多理想的功能，您可能希望通过 3rd-party 库来实现这些功能。

关于前面提到的 pjsip，我已经花费了大量时间来试验 pjsip 的 Android 构建，而真正让可靠的即时注册按照记录工作的唯一方法是构建 OpenSSL 1.0.2a 库并通过它在配置时。然后在 Java 中，您需要尝试（但失败）启用 TLS 通信，就像您看到它们对 UDP 和 TCP 所做的那样。这就是我的意思：

```
 /* Create transports. */
  try { transports.add( ep.transportCreate(pjsip_transport_type_e.PJSIP_TRANSPORT_TLS, transportConfig) ); }
  catch (Throwable t2) { SipManager.log().e(t2); }

  try { transports.add( ep.transportCreate(pjsip_transport_type_e.PJSIP_TRANSPORT_UDP, transportConfig) ); }
  catch (Throwable t) { SipManager.log().e(t); }

  try { transports.add( ep.transportCreate(pjsip_transport_type_e.PJSIP_TRANSPORT_TCP, transportConfig) ); }
  catch (Throwable t) { SipManager.log().e(t); } 
```

替换`SipManager.log()`您自己的应用程序的调用。

我不完全确定为什么，但这对我来说是必要的。否则，注册过程是半不确定的，即在几次失败后它会工作，或者失败 5 分钟然后突然成功等等。第一次注册后似乎会感到困惑。

这是我的配置方式：

```
TARGET_ABI=arm64-v8a ./configure-android --use-ndk-cflags --with-ssl=`pwd`/../3rd-party/openssl-1.0.2a 
```

那是在遵循[正确的 Android 说明](https://trac.pjsip.org/repos/wiki/Getting-Started/Android)之后，将 OpenSSL 压缩包解压到 pjsip 上方的文件夹`../3rd-party/`中并首先在那里构建。[我在上一篇文章](https://stackoverflow.com/questions/37045742/60-120fps-preview-data-on-an-android-device/37215183#37215183)中详细描述了该过程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-22T08:05:43.623

我不会使用 Android 内置 Sipstack Api 作为第一选择。它缺乏很多基本的调用功能，并且不支持很多 Android 设备。我宁愿建议将 PJSip 用于生产。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-07-13T05:30:48.090

如果您只想开发 sip 客户端，那么您可以使用 android 的 sip API，但如上面的答案所述，它会限制您的应用程序功能。但是，如果您想在您的应用程序中开发聊天或呼叫功能，那么您可以使用 pjsip，它提供了许多丰富的功能。至于为android构建pjsip，你可以从[here(android)](https://trac.pjsip.org/repos/wiki/Getting-Started/Android)学习，对于ios，你可以从[here(ios)](https://trac.pjsip.org/repos/wiki/Getting-Started/iPhone)学习。基本上，pjsip 为您提供了许多具有丰富功能的 API，您可以根据您的要求使用它们，例如 pjlib、pjsip、PJ 媒体、pjsua 等。pjsua（或用于 android 的 pjsua2）是更高级别的 API，可帮助您以最小的复杂性提取最大的输出.你可以直接[在这里看到。](https://camo.githubusercontent.com/1537216238d1de04428bdcda2ea6ff6f05cc63e6/687474703a2f2f7777772e706a7369702e6f72672f646f63732f6c61746573742f706a7369702f646f63732f68746d6c2f706a7369702d617263682e6a7067)[你可以从这里](http://www.pjsip.org/docs/latest/pjsip/docs/html/group__PJSUA__LIB.htm)了解 pjsua 。他们还提供了一个演示应用程序[(pjsua CLI)](https://trac.pjsip.org/repos/wiki/PJSUA-CLI) , [Pjsua CLI](http://www.pjsip.org/pjsua.htm)及其源代码将帮助您了解使用 pjsip 构建具有聊天和呼叫功能的应用程序的基本结构。

[对于 Android，您可以在github](https://github.com/VoiSmart/pjsip-android)上查看演示应用程序。

# android - 在 Android NDK 中将标准输出重定向到 logcat

> ID：10531050
> 
> 赞同：38
> 
> 时间：2012-05-10T09:24:06.717
> 
> 标签：android, android-ndk

我无法让我的 Nexus S（运行 Android 4.0）将本机标准输出消息重定向到 logcat。我读过我需要这样做：

```
$ adb shell stop
$ adb shell setprop log.redirect-stdio true
$ adb shell start 
```

但是，这似乎不起作用。（不过，它确实破坏了 JUnit，如此[处](https://stackoverflow.com/questions/3462850/trying-to-run-trivial-android-junit-tests-getting-test-run-failed-no-test-re)所述，因此并非没有效果。）

作为参考，这是我的代码：

```
package com.mayastudios;

import android.util.Log;

public class JniTester {

  public static void test() {
    Log.e("---------", "Start of test");
    System.err.println("This message comes from Java.");    
    void printCMessage();
    Log.e("---------", "End of test");
  }

  private static native int printCMessage();

  static {
    System.loadLibrary("jni_test");
  }
} 
```

JNI .c 文件：

```
JNIEXPORT void JNICALL
Java_com_mayastudios_JniTester_printCMessage(JNIEnv *env, jclass cls) {
  setvbuf(stdout, NULL, _IONBF, 0);
  printf("This message comes from C (JNI).\n");
  fflush(stdout);

  //setvbuf(stderr, NULL, _IONBF, 0);
  //fprintf(stderr, "This message comes from C (JNI).\n");
  //fflush(stderr);
} 
```

和 Android.mk：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE    := jni_test
LOCAL_SRC_FILES := test_jni.c
include $(BUILD_SHARED_LIBRARY) 
```

我只是通过调用来编译它`ndk-build`。本机方法被正确调用，但我没有从中得到任何日志输出（即使是详细的）。我确实从 Java 获得了日志输出（“此消息来自 Java。”）。

任何提示我可能做错了什么？

PS：我已经建立了一个小的 Mercurial 存储库来演示这个问题：[https ://bitbucket.org/skrysmanski/android-ndk-log-output/](https://bitbucket.org/skrysmanski/android-ndk-log-output/)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-04-12T00:42:50.670

`setprop log.redirect-stdio true`仅重定向由 java 代码生成的输出，*而不是本机代码*。[developer.android.com 上](http://developer.android.com/tools/debugging/debugging-log.html#viewingStd)以下列方式描述了这一事实：

> 默认情况下，Android 系统将 stdout 和 stderr（System.out 和 System.err）输出发送到 /dev/null。在运行 Dalvik VM 的进程中，您可以让系统将输出的副本写入日志文件。

要从本机代码中获取输出，我真的很喜欢[这个解决方案](https://codelab.wordpress.com/2014/11/03/how-to-use-standard-output-streams-for-logging-in-android-apps/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-09-21T19:43:11.190

从之前的答案中，这对我来说并不明显。即使在有根设备上，您也需要运行：

```
adb root
adb shell stop
adb shell setprop log.redirect-stdio true
adb shell start 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-02-20T09:53:56.493

您还应该能够包装您的日志记录代码以检测它是否是 Android，如果是，则使用 Android 的日志记录。这可能对每个人都实用，也可能不实用。

包括日志记录头文件：

`#include <android/log.h>`

使用内置的日志记录功能：

`__android_log_print(ANDROID_LOG_INFO, "foo", "Error: %s", foobar);`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-06-19T19:56:06.700

stdout/stderr`/dev/null`在 Android 应用程序中被重定向到。setprop 解决方法是针对将 stdout/stderr 复制到日志的有根设备的黑客攻击。请参阅[Android 原生代码调试](https://stackoverflow.com/questions/17188987/android-native-code-debugging/17199704#17199704)。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-03-10T10:09:18.180

这是我用来将 stdout 和 stderr 输出到 android 日志的代码

```
#include <android/log.h>
#include <pthread.h>
#include <unistd.h>

static int pfd[2];
static pthread_t loggingThread;
static const char *LOG_TAG = "YOU APP LOG TAG";

static void *loggingFunction(void*) {
    ssize_t readSize;
    char buf[128];

    while((readSize = read(pfd[0], buf, sizeof buf - 1)) > 0) {
        if(buf[readSize - 1] == '\n') {
            --readSize;
        }

        buf[readSize] = 0;  // add null-terminator

        __android_log_write(ANDROID_LOG_DEBUG, LOG_TAG, buf); // Set any log level you want
    }

    return 0;
}

static int runLoggingThread() { // run this function to redirect your output to android log
    setvbuf(stdout, 0, _IOLBF, 0); // make stdout line-buffered
    setvbuf(stderr, 0, _IONBF, 0); // make stderr unbuffered

    /* create the pipe and redirect stdout and stderr */
    pipe(pfd);
    dup2(pfd[1], 1);
    dup2(pfd[1], 2);

    /* spawn the logging thread */
    if(pthread_create(&loggingThread, 0, loggingFunction, 0) == -1) {
        return -1;
    }

    pthread_detach(loggingThread);

    return 0;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-10T18:16:04.017

尝试`fflush(stdout);`在您的 printf 之后放置。或者使用`fprintf(stderr, "This message comes from C (JNI).\n")`;

默认情况下标准输出是缓冲的。标准错误 - 不是。而且您使用的是 System.err，而不是 Java 中的 System.out。

您也可以使用以下方法禁用标准输出缓冲：`setvbuf(stdout, NULL, _IONBF, 0);`只需确保在第一次 printf 调用之前调用它。

# c# - 在页面中渲染 PDF 并获取表单字段

> ID：10531051
> 
> 赞同：1
> 
> 时间：2012-05-10T09:24:14.573
> 
> 标签：c#, asp.net, pdf

我想在我的 webform 页面中呈现 pdf，并且该 pdf 具有多个表单字段，因此用户将从页面本身填写这些字段，并且还希望在单击按钮时将这些字段值返回到我的 webform 帖子中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:33:00.400

试试[iTextSharp](http://sourceforge.net/projects/itextsharp/)，它具有填写表格的功能。

```
 PdfReader reader = new PdfReader(@"c:\existing.pdf");

    FileStream out = new FileStream(@"C:\newForm.pdf", FileMode.Create, FileAccess.Write);

    PdfStamper stamp = new PdfStamper(reader, out);           

    TextField field = new TextField(stamp.Writer, new iTextSharp.text.Rectangle(40, 500, 360, 530), "some_text");

   // add the field here, the second param is the page number  you want it on         
    stamp.AddAnnotation(field.GetTextField(), 1);

    stamp.FormFlattening = true; // lock fields and prevent further edits.

    stamp.Close(); 
```

访问此站点以获取教程[Pdf Form 填充 c#](http://www.4guysfromrolla.com/articles/030211-1.aspx)

# git - Git post-receive 钩子无法正常工作

> ID：10531052
> 
> 赞同：1
> 
> 时间：2012-05-10T09:24:17.363
> 
> 标签：git, githooks, git-post-receive

我有一个带有 git 存储库的服务器。每次我推送到该服务器时，我都想为该存储库重新生成我的 gitstats 文档。

在该机器中，如果我执行以下命令，它将正确刷新 gitstats 文档：

```
gitstats /home/<username>/<proyect-name>/htdocs/ /home/<username>/gitstats 
```

这是我在该服务器存储库中的接收后挂钩：

```
#!/bin/sh
gitstats /home/<username>/<proyect-name>/htdocs/ /home/<username>/gitstats 
```

因此，当我向该机器进行推送时，它会尝试执行该命令，但无法正常工作，推送后的输出消息包含以下错误消息：

```
remote: fatal: Not a git repository: '.' 
```

如果我从钩子中删除该命令，我不会收到任何错误消息。

我不明白为什么该命令在直接在服务器上执行时可以正常工作，而在推送后执行时却不行。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:59:39.590

问题是`GIT_WORK_TREE`和/或`GIT_DIR`在该钩子中执行 gitstat 时可能没有正确设置。

`gitstat`尝试在命令之前设置它们：

```
GIT_DIR=/home/<username>/<proyect-name>/.git
GIT_WORK_TREE=/home/<username>/<proyect-name>
gitstats ... 
```

为什么这些变量不能正确设置？
参见例如“ [Calling ' `git pull`' from a `git post-update`hook](https://stackoverflow.com/questions/3542854/calling-git-pull-from-a-git-post-update-hook/3542926#3542926) ”

> 最终我们找到了我们的 linux 大师，他注意到 git 用户运行的环境在 hook 中是完全不同的。

在这种情况下，`<username>`当钩子被执行时，你不会是你想的那样......

# php - 从 textarea 保存到 mysql 到 php 的文本在 div 内溢出

> ID：10531053
> 
> 赞同：-1
> 
> 时间：2012-05-10T09:24:19.157
> 
> 标签：php, mysql, css, html, textarea

我的博客项目有一个问题，我有一个用户可以输入的文本区域并将其传递给我的 mysql 表，问题是我`<li>`尝试过 wordwrap() 上的文本溢出，但其他文本仍然溢出我不知道如何“格式化”它，以便它自动格式化以适合我的 div 或我这样做的方式是错误的 oO？，显然是 php 上的新手 :P ..

谢谢...

```
<?php 
session_start();
function __autoload($className)
    {
        require $className . '.php';

    }
    $emptyMsg ='';
    $conn=new connection();
    $conn->conn('localhost','****','');

if(!isset($_SESSION['username']))
{
    die('Log In 1st!<a href="loginpage.php">Log In</a>');
}

$query = "SELECT blog_content FROM tbl_blog";
$queryResult=mysql_query($query) or die();

?>

<html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title></title>
<style type="text/css">
p
{
}
#nav
{

}
ul li
{
    list-style:none;
}
#blog_wrap
{
    clear:both;
    width:800px;
    height:600px;
    margin:0 auto;
    background-color:blue;
}

.content 
{   
    width:700px;
    clear:both;
    float:left;
    height:auto;
    background-color:gray;  
    color:lightgreen;
    text-align:left;
    margin:10px 0 0 50px;
}
.content ul li
{
    color:red;
    background-color:green;
    overflow:visible;
    }

.content2
{   
    width:700px;
    clear:both;
    float:left;
    height:auto;
    background-color:yellow;
    color:lightgreen;
    margin:10px 0 0 50px;
}
</style>
</head>
<body>
    <div id="nav" >
    <ul >
    <li>Welcome!!!<?php echo $_SESSION['username']; ?></li>
    <li><a href="">Edit Account</a></li>
    <li><a href="createBlog.php">Create Blog</a></li>
    <li>Home</li>
    <li>Sign Out</li>
    </ul>
    </div>
<div id="blog_wrap">

<?php
$count=0;
    while($rows=mysql_fetch_array($queryResult))
    {   
        if($count % 2 ==0) 
            {   
                echo '<div class="content">';
                echo '<ul>';
                echo '<li>' . $rows['blog_content'] . '</li>';
                echo '</ul>';
                echo '</div>';
            }
            else
            {   
                echo '<div class="content2">';
                echo '<ul>';
                echo '<li>' . $rows['blog_content'] . '</li>';
                echo '</ul>';
                echo '</div>';
            }
            $count++;
    }

?>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:29:46.703

您需要更改您的 CSS 类 .content。它应该是：

```
.content {   
  width:700px;
  clear:both;
  float:left;
  height:auto;
  background-color:gray;  
  color:lightgreen;
  text-align:left;
  margin:10px 0 0 50px;
  overflow: hidden
} 
```

将“overflow:hidden”添加到固定宽度的容器可以防止内容流出。

# c# - 选择按下按钮时更改矩形背景

> ID：10531056
> 
> 赞同：0
> 
> 时间：2012-05-10T09:24:23.660
> 
> 标签：c#, wpf, xaml, styles

基本上，这是一个存在于矩形和几个文本块之外的按钮。矩形`Fill`代表我的按钮的背景。按下按钮时如何更改此设置？

***按下按钮后，背景也必须保持该颜色。***这基本上可以直观地向用户显示哪些按钮被按下，哪些按钮被按下。

**我的风格的一部分：**

```
<Style x:Key="ButtonStyleReg" TargetType="{x:Type myClasses:RegButton}">
<Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="{x:Type Button}">
            <Grid x:Name="regButton">
                <Rectangle Name="rectangleBtn" Fill="#FF89959A" Height="Auto" RadiusY="15" RadiusX="15" Stroke="White" Width="Auto"/>                                             
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsFocused" Value="True"/>
                <Trigger Property="IsDefaulted" Value="True"/>
                <Trigger Property="IsPressed" Value="True" >
                    <Setter TargetName="rectangleBtn" Property="Fill" Value="Blue" />
                </Trigger>
                <Trigger Property="IsEnabled" Value="False"/>
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </Setter.Value>
</Setter>
<Setter Property="FontSize" Value="10.667"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:28:57.607

您必须解决正确的元素，尝试为矩形命名并通过名称引用将 setter 指向它：

```
<Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Grid x:Name="regButton">
                    <Rectangle Fill="#FF89959A"
                               x:Name="rect"
                               Height="Auto"
                               RadiusY="15"
                               RadiusX="15"
                               Stroke="White"
                               Width="Auto" />
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsFocused"
                             Value="True" />
                    <Trigger Property="IsDefaulted"
                             Value="True" />
                    <Trigger Property="IsPressed"
                             Value="True">
                        <Setter Property="Background"
                                TargetName="rect"
                                Value="Blue" />
                        <!--??-->
                    </Trigger>
                    <Trigger Property="IsEnabled"
                             Value="False" />
                </ControlTemplate.Triggers>
            </ControlTemplate> 
```

# html - HTML5 里面 和标题

> ID：10531057
> 
> 赞同：6
> 
> 时间：2012-05-10T09:24:25.220
> 
> 标签：html, structure, semantics, article

我正在尝试制作语义 HTML5 代码，但不确定它是否正确。Visualy 我有一篇文章/帖子分为 3 列：

**图片**（200 像素）| **H1+ 总结 + 更多链接**(350px) | **带有 2 个标题 H2 的附加部分** （150 像素）

在 CSS 中，我会**浮动：左图**、*.post-summary、.post-aside*。

这是Ver.1：

```
<article>
        <figure>
        <a href="#"><img src="images/temp/entry_01.jpg" alt=""></a>
        <figcaption>Title for Case Study</figcaption>
        </figure>

        <div class="post-summary">          
            <section>
                <h1>MAIN Article Title</h1>
                <p>Lorem ipsum...</p>
                <a href="#">read more</a>
            </section>              
        </div>

        <div class="post-aside">
            <section>
                <h2>The Charges:</h2>
                <p>Lorem ipsum...</p>
            </section>

            <section>
                <h2>The Verdict:</h2>
                <p>Lorem ipsum...</p>
            </section>
        </div>
</article> 
```

版本。2

```
<article>
        <figure>
        <a href="#"><img src="images/temp/entry_01.jpg" alt=""></a>
        <figcaption>Title for Case Study</figcaption>
        </figure>

        <section class="post-summary">
            <h1>MAIN Article Title</h1>
            <p>Lorem ipsum...</p>
            <a href="#">read more</a>
        </section>                          

        <section class="post-aside">
            <h2>The Charges:</h2>
            <p>Lorem ipsum text ...</p>

            <h2>The Verdict:</h2>
            <p>Lorem ipsum text...</p>
        </section>

</article> 
```

哪一个是对的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T09:40:53.553

取决于你想要什么。。

> div — 我们都知道和喜爱的“通用流容器”。它是一个没有额外语义含义的块级元素。
> 
> section — “通用文档或应用程序部分”。一个部分通常有一个标题（标题），也可能有一个页脚。它是一大块相关内容，例如一篇长文章的一个小节，页面的主要部分（例如主页上的新闻部分），或者 webapp 选项卡式界面中的一个页面。

[http://boblet.tumblr.com/post/130610820/html5-structure1](http://boblet.tumblr.com/post/130610820/html5-structure1) [文章链接](http://boblet.tumblr.com/post/130610820/html5-structure1)

我会以这种方式使用它（***你的 v2***）：

```
<div> <!-- Main article div -->
    <article> <!-- First article -->
        <section><!-- Header, about the author... --></section> 
        <section><!-- related info .. --></section> 
        <section><!-- conclusion --></section> 
    </article>

    <article>
        <section></section>
        <section></section>
        <section></section>
    </article>
</div> 
```

* * *

## 回答 #2

> 赞同：-20
> 
> 时间：2012-05-10T13:41:26.927

这是不对的......他们两个，答案也是......不要使用 DIV ！使用部分代替！

# git - 其他人可以提交我的 Git 存储库吗？

> ID：10531058
> 
> 赞同：0
> 
> 时间：2012-05-10T09:24:31.213
> 
> 标签：git, version-control

我创建了一些免费的 Git 存储库，用于在线共享我的项目。但是，我在本地使用该代码，所以其他人会弄乱它吗？

我已经在他们的网站上在线创建了存储库，然后我将它们克隆到我的笔记本电脑上，然后我将所有相关项目的文件复制粘贴到那里。在那之后，我`git add .`'ed，`git commit -a`'ed和`git push`'ed。

当我说我计划在本地使用该代码时，我的意思是我计划从笔记本电脑的 repo 目录中导入 Python 模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:27:42.820

如果他们有权`write`访问存储库，则可以`commit`对其进行编码。然后，您可以`pull`在其他人已提交的更改中。由于`git`您经常在分支中工作，如果您是所有者或管理员，您可以选择将代码提交与`master`分支合并，或者，如果您认为它没有用，则完全关闭提交。

此外，并非所有人`git`都可以看到或访问所有存储库。这取决于您配置它的方式。

这是一篇很好的[介绍性文章](https://wincent.com/wiki/Git_repository_access_control)，解释了 git 中的访问控制。

# php - iCal 事件上的 PHP Foreach

> ID：10531069
> 
> 赞同：0
> 
> 时间：2012-05-10T09:25:11.053
> 
> 标签：php, loops, foreach, calendar, icalendar

任何人都可以看到我的代码有什么问题吗？

我正在尝试为 $_POST 中的每个事件创建一个日历事件。应该有一个日历可供下载，其中包含多个事件。

到目前为止，它将生成一个日历文件以供下载，其中仅包含列表中的最后一个事件。它覆盖了旧的。

提前感谢您的帮助。

```
 //Set the headers
 header("Content-Type: text/Calendar");
 header("Content-Disposition: inline; filename=calendar.ics");

 //Loop through $_POST to get all entries

 foreach ($_POST['listItem'] as $value){

$dave = trim($value);

echo "BEGIN:VCALENDAR\n";
echo "VERSION:2.0\n";
echo "PRODID:www.testMeiCalendar.net\n";
echo "METHOD:REQUEST\n"; // requied by Outlook
echo "BEGIN:VEVENT\n";
echo "DTSTART:".$dave."T230000\n";
echo "DTEND:".$dave."T010000\n";
echo "SUMMARY:This is beautiful\n";
echo "LOCATION:Downtown\n";
echo "DESCRIPTION:Let's get together for New Years Eve\n";
echo "UID:ABCD1234\n";
echo "SEQUENCE:0\n";
echo "DTSTAMP:20101125T112600\n";
echo "END:VEVENT\n";
echo "END:VCALENDAR\n";

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:44:22.653

在不知道发送到您的脚本的 $_POST 的结构的情况下，我会说 listItem 中只有一个值，这就是为什么它不会为所有内容提供输出的原因。您是否对其进行了调试以判断它是仅输出单个值还是实际输出所有内容并覆盖？

__

[如何](https://stackoverflow.com/questions/353379/how-to-get-multiple-parameters-with-same-name-from-a-url-in-php)从 Benlumley的 PHP 中的 URL 获取具有相同名称的多个参数的答案建议将 [] 附加到 GET 请求的变量名称的末尾。

> IE：
> 
> > someurl.php?name[]=aaa&name[]=bbb
> 
> 会给你一个 $_GET 看起来像：
> 
> > 数组（0=>'aaa'，1=>'bbb'）

***编辑：我认为答案可能很简单：***

```
foreach($_POST['listItem'] as $key => $value) 
```

# javascript - 为 Android 调整大小或方向更改事件后获取正确的窗口宽度

> ID：10531072
> 
> 赞同：4
> 
> 时间：2012-05-10T09:25:20.837
> 
> 标签：javascript, jquery, android

我将函数绑定到 resize 和orientationchange 事件。在这个函数中，我试图读取窗口。Iphone 总是给我正确的尺寸，但 Android 设备（2.2、2.3 和 4.0）似乎在实际更改 windowssize 之前触发了该事件。所以我总是得到最后一个窗口大小而不是最新的。有没有办法（没有超时）来获得正确的窗口大小？

我尝试了以下属性/功能： $(window).innerWidth(true) $(window).outerWidth(true) screen.width $(window).width()

他们都没有给出正确的宽度。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:15:23.307

幸运的是 window.orientation 在 onorientationchange 事件触发时已经更新。因此，作为一种解决方法，我打开它：

```
switch(window.orientation) {
    case 90:
    case -90: // portrait;
        h = Math.max(window.innerWidth, window.innerHeight);
        w = Math.min(window.innerWidth, window.innerHeight);
        break;
    default: // landscape
        h = Math.min(window.innerWidth, window.innerHeight);
        w = Math.max(window.innerWidth, window.innerHeight);
        break;
} 
```

不理想，但它有效。

# android - 是否有任何工具可以将 html5 游戏编译为原生移动设备

> ID：10531073
> 
> 赞同：2
> 
> 时间：2012-05-10T09:25:30.777
> 
> 标签：android, ios, html, compiler-construction

我们有一个 html5 游戏，在旧手机中存在一些性能问题，所以我想知道是否有任何工具即使在 alpha 中也可以解决这个问题。

我不是在谈论将应用程序与 PhoneGap 或类似应用程序捆绑在一起，而且我看起来不像是 Impactjs，而是一个采用通用 html5 应用程序并以某种方式将其编译为本机的工具。

任何帮助将不胜感激。

编辑：使问题更广泛，并且由于目前显然没有这样的工具，有没有人知道在哪里可以查看有关如何创建这样的工具的更多信息？

目标平台必须包括：iOS、Android、Windows phone 和 Bada。所有其他人都会很高兴：p。

我认为性能损失来自 html5 提供的自由，如果使用浏览器并删除这个特定 html5 应用程序不需要的所有功能，然后将所有内容嵌入在一起，那又如何呢？这会更简单吗？是否可以使用任何应用程序创建一个自动工具来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:44:01.397

看看 appcelerator [http://www.appcelerator.com/platform](http://www.appcelerator.com/platform)

# java - 通过 ObjectInputStream 和瞬态字段进行序列化

> ID：10531076
> 
> 赞同：2
> 
> 时间：2012-05-10T09:25:38.603
> 
> 标签：java, serialization, transient, objectinputstream

这个问题是关于 ObjectInputStream 以及它如何构建声明为瞬态的字段。考虑一个简单的 ObjectInputStream 用例

```
FileInputStream fis = new FileInputStream("t.tmp");
ObjectInputStream ois = new ObjectInputStream(fis);
SomeClass sc = (SomeClass) ois.readObject(); 
```

SomeClass 在哪里

```
class SomeClass {
   int x;
   transient OtherClass y;
}

class OtherClass {
   int z;
} 
```

ois.readObject 之后 sc.y 的值是多少？

我要求澄清我在[docs.oracle.com](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectInputStream.html)上读到的内容

“反序列化过程会忽略声明为瞬态或静态的字段。对其他对象的引用会导致根据需要从流中读取这些对象。”

瞬态字段被忽略是什么意思？如果它们是瞬态的，如何从流中读取它们（即未序列化 - 我如何理解它......）

马蒂亚斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T09:26:59.607

> ois.readObject 之后 sc.y 的值是多少？

`Someclass.y`将是“默认值”。在这种情况下，因为它是一个对象，所以它将是`null`.

> 瞬态字段被忽略是什么意思？

它们没有被序列化——它们被跳过了。来自[Java 对象序列化规范](http://docs.oracle.com/javase/7/docs/platform/serialization/spec/serial-arch.html#4539)：

> Serializable 类必须执行以下操作：
> 
> *   实现 java.io.Serializable 接口
> *   识别应该可序列化的字段（使用`serialPersistentFields`成员显式声明它们可序列化或**使用`transient`关键字表示不可序列化字段**。）

... 和 ...

> 最简单的技术是将包含敏感数据的字段标记为`private transient`. **瞬态字段不是持久性的，不会被任何持久性机制保存。标记该字段将防止状态出现在流中并在反序列化期间恢复**。由于（私有字段）的写入和读取不能在类之外被取代，因此类的瞬态字段是安全的。

还有你的下一个问题：

> 如果它们是瞬态的，如何从流中读取它们

它们不在流中 - 所以，实际上，它们没有被读取。如上所述，最终作为该类型的“默认值”（`null`对于对象，`0`/`false`对于原语）。

> “反序列化过程会忽略声明为瞬态或静态的字段。”

对于最常见的情况，*序列化*过程会忽略它们 - 因此，它们不在流中，也不会被反序列化。但是，如果您在序列化对象之后更改了类，以便曾经被序列化的字段现在被标记为瞬态，则反序列化过程将在流中找到该值时忽略该值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:01:18.967

> ois.readObject 之后 sc.y 的值是多少？

其默认值：零、false 或 null。

> 瞬态字段被忽略是什么意思？

这意味着它们被忽略了。他们不参与序列化或反序列化过程。

> 如果它们是瞬态的（即未序列化），如何从流中读取它们

他们不是。它们不在要读取的流中。

# ruby-on-rails-3 - 从 rails 3.2.3 中的“lib”重新加载代码

> ID：10531077
> 
> 赞同：2
> 
> 时间：2012-05-10T09:25:40.493
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2

我正在开发新组件，不想每次都在重新加载环境上浪费时间。

我发现很少有相关问题，但没有一种解决方案适合我。那么当源更改时自动从 lib 文件夹重新加载代码的技术是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:16:40.950

请在 config/application.rb 中添加以下行。

```
config.autoload_paths += %W(#{config.root}/lib) 
```

# sql - 在 SQL Server 2000 中使用 datetime 作为列别名

> ID：10531084
> 
> 赞同：2
> 
> 时间：2012-05-10T09:26:10.340
> 
> 标签：sql, sql-server-2000

希望这对某人来说是一个快速的！我一直在寻找这个问题的真正答案。我在 SQL Server 2000 中有一个存储过程。我有一个`@DayToCheck`日期时间变量。

```
@DayToCheck datetime 
```

我需要将它用于我指望的专栏。但是它不起作用。我曾尝试转换为 varchar，但它也不喜欢那样。这是我需要使用的两个计数列。

```
sum(case when startdate=@DayToCheck then 1 else 0 end) as CONVERT(varchar, @DayToCheck, 103),
sum(case when startdate=DATEADD(day,-7,@DayToCheck) then 1 else 0 end) as DATEADD(day,-7,@DayToCheck) 
```

所以上面应该有两列，它们的别名应该是日期（第一列）和第二列的日期-7天。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:31:47.327

你必须使用动态sql。所以也许是这样的：

```
DECLARE @DayToCheck datetime
SET @DayToCheck=GETDATE()

DECLARE @query NVARCHAR(4000)
SET @query=
N'SELECT
    sum(case when startdate=@DayToCheck then 1 else 0 end) as '+
    CONVERT(varchar, @DayToCheck, 103)+',
    sum(case when startdate=DATEADD(day,-7,@DayToCheck) then 1 else 0 end) as '+
    CONVERT(varchar, @DayToCheck, 103)+'
FROM
    table1'

EXECUTE(@query) 
```

# ipad - 没有 Objective-C 的 iPad 上的套接字 (TCP/UDP)

> ID：10531087
> 
> 赞同：0
> 
> 时间：2012-05-10T09:26:21.980
> 
> 标签：ipad, sockets, wifi, real-time, arduino

有没有办法在**不使用 Objective-C**的情况下利用 iPad/iPhone 的套接字功能？有什么方法可以使用[ActionScript](http://en.wikipedia.org/wiki/ActionScript) 3 或一些超 HTML5 框架来公开此功能？

在 Arduino 论坛上，我试图找出我的硬件限制，[这里](http://arduino.cc/forum/index.php/topic,102852.0.html)和[这里](http://arduino.cc/forum/index.php/topic,104487.0.html)（我发现使用 Objective-C 是可能的，即使有 bonjour 发现）。

![这就是我想要实现的](../Images/072e44fbe8a33bd80372d6a0152b3e0a.png)

（使用 webSockets，或使用 UDP。不一定是 Haxe。）

我正在研究使用 webSockets 的可能性，如果可能的话，这应该是最简单的。但是，我想考虑所有选项。所以我知道 Arduino 可以说[原始的 UDP](http://arduino.cc/forum/index.php/topic,99362.msg768205.html#msg768205)。而且我知道有一个用于 Objective-C 的 CocoaAsyncSocket 库。只是，我不想在 Objective-C 中做原型......

（因此，这将是 Stack Overflow 上关于我想与[iDevice](http://en.wikipedia.org/wiki/IDevice)交谈的支持 Wi-Fi 的 Arduino 的第 n 篇文章。由于 Apple 的非原型友好型 MFi 程序，蓝牙不是一个选项.)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T08:15:30.850

您可以使用 C POSIX 套接字 API（如果您了解 C，这可能是最简单的）。或者您可以使用 HTML5/Javascript 和 Haxe 或 socket.io。

# iphone - UIImagePickerController 奇怪的效果

> ID：10531089
> 
> 赞同：0
> 
> 时间：2012-05-10T09:26:22.933
> 
> 标签：iphone, objective-c, ios, uiimagepickercontroller

应用程序结构：uitabbar 控制器中的 4 个视图控制器。

情况：视图控制器之一实际上是带有添加和编辑按钮的 uitableview 控制器。添加新对象会推送另一个视图，该视图具有文本字段和选择或拍照的选项。选择图像就可以正常工作。

问题：如果不是选择图像，而是按下使用按钮使用相机，那么就会出现问题。图像被返回并且相机（uiimagepickercontroller）被关闭，这也很好。但是文本字段现在是空的（第一个奇怪的事情）！再次输入一些值并保存将返回到 uitablview。现在有 2 行具有相同的值，这是第二个奇怪的事情。

问题：uiimagepicker 控制器如何删除所有文本字段值？为什么在使用库中的图像时它不会发生？

它如何复制 ui 表视图中的数据条目？

信息：我正在使用 ARC。当 viewDidUnload/WillDisappear 时，我没有将文本字段设置为 nil。

代码：

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
[picker dismissModalViewControllerAnimated:YES];
self.image.image=[info objectForKey:UIImagePickerControllerEditedImage];
NSLog(@"did load the image %@", self.image.image);

}

-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo
{
[picker dismissModalViewControllerAnimated:YES];
self.image.image=image;

 }

 -(void) imagePickerControllerDidCancel:(UIImagePickerController *)picker
 {
[picker dismissModalViewControllerAnimated:YES];

 }

- (IBAction)takePic:(id)sender {
[self.name resignFirstResponder];
[self.info resignFirstResponder];
[self.lastname resignFirstResponder];

    UIActionSheet *sheet=nil;
    if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
        sheet=[[UIActionSheet alloc]initWithTitle:nil delegate:self cancelButtonTitle:nil destructiveButtonTitle:@"Cancel"  otherButtonTitles:@"Choose Photo",@"Take Photo", nil];
    else
        sheet=[[UIActionSheet alloc]initWithTitle:nil delegate:self cancelButtonTitle:nil destructiveButtonTitle:@"Cancel"  otherButtonTitles:@"Choose Photo", nil];
    [sheet showInView:self.parentViewController.tabBarController.view];

  }

-(void) actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
  {

if (buttonIndex==0) return;

UIImagePickerController *takepic=[[UIImagePickerController alloc] init];
takepic.delegate=self;
takepic.allowsEditing=YES;

if (buttonIndex==1) {

    if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeSavedPhotosAlbum]) {
        takepic.sourceType=UIImagePickerControllerSourceTypeSavedPhotosAlbum;

    }
}
if(buttonIndex==2) {
    if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
        takepic.sourceType=UIImagePickerControllerSourceTypeCamera;
        NSLog(@"entered camerea mode");

    }
}
[self presentModalViewController:takepic animated:YES];  
} 
```

> 编辑：通过在 viewDidLoad 上放置断点，我发现了一些“有趣”的东西。如果 uiimage 选择器源是照片库。按下使用按钮返回视图控制器后不会再次触发 viewDidLoad。但如果 uiimagepicker 控制器源是相机，它将触发 viewDidLoad。这似乎是问题的根源。如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:08:41.087

您的应用收到内存警告。您应该将输入数据存储在 中`viewDidUnload`并再次将其设置为 textFields `viewDidLoad`。

# sql - 从 3 列获取 DISTINCT 值

> ID：10531091
> 
> 赞同：1
> 
> 时间：2012-05-10T09:26:41.480
> 
> 标签：sql, distinct

我有 1 个包含 3 列的单表，例如 col1、col2、col3

价值观：

```
col1 with values (in individual 3 rows) as a, b, c
col2 with values (in individual 3 rows) as b, c, d
col3 with values (in individual 3 rows) as c, d, e 
```

目标：

要按字母顺序在 html 下拉框中填充不同的列表（即我想要 a、b、c、d、e）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:30:28.280

伪代码：

```
Select col1 from table
UNION
Select col2 from table
UNION
Select col3 from table 
```

# iphone - CFStreamCreatePairWithSocketToHost

> ID：10531092
> 
> 赞同：1
> 
> 时间：2012-05-10T09:26:42.167
> 
> 标签：iphone, xcode

我是 iPhone 编程的新手，我正在研究套接字编程，我想知道是否有任何方法可以测试 CFStreamCreatePairWithSocketToHost() 方法是否有效。我更熟悉 C 套接字编程，其中使用的所有方法都返回一个 int 值进行测试，但这是无效的，并且从我读过的内容中没有任何合适的 NSError 。

# jms - JMS 生产者-消费者-观察者 (PCO)

> ID：10531095
> 
> 赞同：0
> 
> 时间：2012-05-10T09:26:48.187
> 
> 标签：jms, producer-consumer

在 JMS 中有队列和主题。据我了解，到目前为止，队列最适合用于生产者/消费者场景，其中主题可用于发布/订阅。然而，在我的场景中，我需要一种方法来结合这两种方法并创建一个生产者-消费者-观察者架构。

特别是我有生产者写入一些队列和工作者，它们从这些队列中读取并处理这些队列中的消息，然后将其写入不同的队列（或主题）。每当工作人员完成一项工作时，我的 GUI 应该会收到通知并更新其当前系统状态的表示。由于工人和 GUI 是不同的进程，我不能应用简单的观察者模式或直接通知 GUI。

使用队列和/或主题的组合来实现这一点的最佳方法是什么？GUI 应该总是被通知，但它不应该从队列中消耗任何东西？

我想直接用 JMS 解决这个问题，而不是使用任何额外的技术，如 RMI 来实现观察者部分。

举一个更具体的例子：

1.  我有一个`PACKAGEQUEUE`由机器 ( `PackageProducer`)生产的包 ( ) 队列
2.  我有一个工人从`PACKAGEQUEUE`添加地址中获取一个包，然后将其写入`MAILQUEUE`( `AddressWorker`)
3.  另一个工人处理`MAILQUEUE`并通过邮件 ( ) 发送包裹`MailWorker`。
4.  在第 2 步之后，当一条消息写入 时`MAILQUEUE`，我想通知 GUI 并更新包的状态。当然 GUI 不应该使用 中的消息`MAILQUEUE`，只有`MailWorker`必须使用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:12:31.470

您可以将队列和主题组合用于您的解决方案。

您的 GUI 应用程序可以订阅一个主题，例如`MAILQUEUE_NOTIFICATION`. 每次（即在第 2 步）`PackageProducer`向 写入消息时`MAILQUEUE`，都应将该消息的副本发布到`MAILQUEUE_NOTIFICATION`主题。由于 GUI 应用程序已订阅该主题，它将获得包含有关包状态信息的发布。GUI 可以使用该出版物的内容进行更新。

高温高压

# html - chrome 不同于 Internet Explorer

> ID：10531098
> 
> 赞同：0
> 
> 时间：2012-05-10T09:26:54.550
> 
> 标签：html, internet-explorer, google-chrome

我寻找了一个类似的问题，但没有解决方案。

我有一个网页，中间有一张桌子和一部 Youtube 电影：[http ://www.zofim.org.il/magazin_item.asp?item_id=531438084004](http://www.zofim.org.il/magazin_item.asp?item_id=531438084004)

它在 Chrome 中看起来不错，但在 Internet Explorer 中，电影太低而且位置不正确。

这是代码：

```
<table background="http://www.zofim.org.il/pics/magazin/Page-1 (1).jpg" width="650" height="700" border="0" align="center" cellpadding="1" cellspacing="1">
<tbody>
    <tr>
        <td>
        <table border="0" width="600">
            <tbody>
                <tr>
                    <td colspan="4"><span style="font-size: 8; ">&nbsp;                         </span>
                    <p><span style="font-size: 8; ">&nbsp;</span></p>
                    <p><span style="font-size: 8; ">&nbsp;</span></p>
                    <p><span style="font-size: 8; ">&nbsp;</span></p>
                    <p><br />
                    &nbsp;</p>
                    <p><span style="font-size: 8; ">&nbsp;</span></p>
                    <p><span style="font-size: 8; ">&nbsp;</span></p>
                    <p><span style="font-size: 8; "><br />
                    <br />
                    <br type="_moz" />
                    </span></p>
                    <p>&nbsp;</p>
                    </td>
                </tr>
                <tr>
                    <td height="440" width="23%" rowspan="2">
                    <table border="0" width="100%" height="430">
                        <tbody>
                            <tr>
                                <td height="131">&nbsp;</td>
                            </tr>
                            <tr>
                                <td height="63"><a href="http://zofim.org.il/magazin_item.asp?item_id=531477450625&amp;troop_id=285610000">                                     <img border="0" src="http://www.zofim.org.il/pics/magazin/1(158).gif" width="134" height="76" alt="" /></a></td>
                            </tr>
                            <tr>
                                <td>&nbsp;</td>
                            </tr>
                        </tbody>
                    </table>
                    </td>
                    <td height="142" width="12%">
                    <p style="margin-top: 0; margin-bottom: 0">&nbsp;</p>
                    <p>&nbsp;</p>
                    <p>&nbsp;&nbsp;</p>
                    </td>
                    <td height="142" width="35%">
                    <p style="margin-top: 10px; margin-bottom: 0px; text-align: center; "><iframe width="250" height="150" src="http://www.youtube.com/embed/wnBGKeXF8X0?rel=0&amp;controls=0&amp;autoplay=1" frameborder="0" allowfullscreen="" name="I1" scrolling="no" marginheight="2"></iframe></p>
                    </td>
                    <td height="142" width="31%">&nbsp;
                    <p>&nbsp;</p>
                    <p>&nbsp;</p>
                    </td>
                </tr>
                <tr>
                    <td height="285" colspan="3">
                    <table border="0" width="100%" height="292">
                        <tbody>
                            <tr>
                                <td width="135">
                                <table border="0" width="100%" height="280">
                                    <tbody>
                                        <tr>
                                            <td height="78"><a href="http://zofim.org.il/magazin_item.asp?item_id=531516818704&amp;troop_id=285610000">                                     <img border="0" src="http://www.zofim.org.il/pics/magazin/1(158).gif" width="134" height="99" alt="" /></a></td>
                                        </tr>
                                        <tr>
                                            <td>&nbsp;</td>
                                        </tr>
                                        <tr>
                                            <td>&nbsp;</td>
                                        </tr>
                                    </tbody>
                                </table>
                                </td>
                                <td>
                                <table border="0" width="104%" height="278">
                                    <tbody>
                                        <tr>
                                            <td height="78"><a href="http://zofim.org.il/magazin_item.asp?item_id=531556188241&amp;troop_id=285610000">                                     <img border="0" src="http://www.zofim.org.il/pics/magazin/1(158).gif" width="175" height="99" alt="" /></a></td>
                                        </tr>
                                        <tr>
                                            <td>&nbsp;</td>
                                        </tr>
                                        <tr>
                                            <td>&nbsp;</td>
                                        </tr>
                                    </tbody>
                                </table>
                                </td>
                                <td width="153">
                                <table border="0" width="100%" height="281">
                                    <tbody>
                                        <tr>
                                            <td height="78"><a href="http://zofim.org.il/magazin_item.asp?item_id=531595559236&amp;troop_id=285610000">                                     <img border="0" src="http://www.zofim.org.il/pics/magazin/1(158).gif" width="152" height="99" alt="" /></a></td>
                                        </tr>
                                        <tr>
                                            <td>&nbsp;</td>
                                        </tr>
                                        <tr>
                                            <td>&nbsp;</td>
                                        </tr>
                                    </tbody>
                                </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    </td>
                </tr>
            </tbody>
        </table>
        </td>
    </tr>
</tbody> 
```

谢谢！

多尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:56:38.877

通过您提供的标记的外观，您正在使用表格来布局您的网站。这被认为是不好的做法。您应该考虑改为使用最佳实践（div 等）并使用 CSS 来设置布局样式，而不是使用内联样式。完成此操作后，您可以使用[prefixr.com](http://prefixr.com)创建跨浏览器友好的 CSS。

# javascript - 完成拖动div时找到左上角的位置

> ID：10531099
> 
> 赞同：0
> 
> 时间：2012-05-10T09:26:55.143
> 
> 标签：javascript, jquery

我有 div 容器和内部的几个 div 类演示

```
<div id='container' style='width:500px;height:500px;'>
<div class='demo' style='width:100px;height:100px;'></div>
<div class='demo' style='width:100px;height:100px;'></div>
<div class='demo' style='width:100px;height:100px;'></div>

</div> 
```

并在 jquery 中准备就绪

```
$(function(){
$('.demo').draggable()
.resizable({
stop:function(event,ui){}
alert(ui.size.width+' '+ui.size.height);
})

}); 
```

当我用 class='demo' insider parent div id="container" 完成拖动 div 时，如何获取左上角的位置（相对于父 div id=container）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:31:52.253

你需要使用[`stop`](http://jqueryui.com/demos/draggable/#event-stop)和[`position`](http://api.jquery.com/position/)方法

```
$(function(){
    $('.demo').draggable({
        stop: function(event, ui) {
            alert('Left:' + $(this).position().left + ' Top:' + $(this).position().left);
        }
    }).resizable({
        stop:function(event,ui){}
    })
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:30:20.493

您可以使用 .position();

> 获取匹配元素集中第一个元素相对于偏移父元素的当前坐标。

更多信息在这里：[http ://api.jquery.com/position/](http://api.jquery.com/position/)

希望有帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T09:33:03.317

```
var top = $('#container').css('top')

and 

var left = $('#container').css('left') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T09:42:08.737

```
$(function(){
$('.demo').draggable()
.resizable({
stop:function(event,ui){}
alert($(this).css("top")+' '+$(this).css("left"));
})

}); 
```

可能是正确的

# jquery - 关闭颜色框内的父颜色框

> ID：10531107
> 
> 赞同：0
> 
> 时间：2012-05-10T09:27:22.897
> 
> 标签：jquery, colorbox

我在 Colobox 中有一个带有一些按钮的颜色框，我想在单击按钮时从子颜色框关闭父颜色框，如何实现？

任何意见，将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:34:00.147

您可以尝试使用

```
parent.$.fn.colorbox.close(); 
```

# gwt - 打包 GWT 模块 jar

> ID：10531109
> 
> 赞同：1
> 
> 时间：2012-05-10T09:27:24.207
> 
> 标签：gwt

我用这个输出 jar 结构（使用 mvn package 命令）创建了一个 GWT 可加载模块（maven）：

```
mygwtlibrary
->src/main/java
-->org.mygwtlib
---->public
------>flash.swf
-->org.mygwtlib.client
---->MyClientCode.class 
```

但是，当我运行使用此库的应用程序时，错误显示：`Error 404`用于获取`flash.swf`文件。

这是场景：

*   我已经正确设置了项目，包括`<inherits>`在 gwt.xml 文件中
*   当我只是将整个库项目包含到另一个 GWT 应用程序项目中然后运行时，它工作正常。也就是说，公用文件夹中的文件也会被加载。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:50:56.197

问题是您正试图`flash.swf`通过 HTTP 获取文件。这是（充其量）不好的做法。更好的方法（绝不是唯一的选择）是将其作为存在于您的代码中的资源。做这样的事情的一种方法是使用 Spring 的[`ClassPathResource`](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/core/io/ClassPathResource.html)（或者不太理想的，`FileSystemResource`）。

# apache-flex - Flex：图形之间的间隙

> ID：10531113
> 
> 赞同：1
> 
> 时间：2012-05-10T09:27:28.530
> 
> 标签：apache-flex, graphic, gaps-in-visuals

我有一个包含 2 个图形的组，我将组的垂直布局中的间隙设置为 0，但 2 个图形之间仍然存在 1 个像素的间隙。知道如何摆脱这个吗？

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <s:Group>
        <s:layout>
            <s:VerticalLayout gap="0"/>
        </s:layout>
        <s:Graphic height="100">
            <s:Path data="M 50 0 L 50 100 Z" height="100">
                <s:stroke>
                    <s:SolidColorStroke color="#333333"/>
                </s:stroke>
            </s:Path>
        </s:Graphic>
        <s:Graphic height="1">
            <s:Path data="M 0 0 L 100 0 Z" height="1">
                <s:stroke>
                    <s:SolidColorStroke color="#333333"/>
                </s:stroke>
            </s:Path>
        </s:Graphic>
    </s:Group>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:41:35.613

对您的问题的简单回答是，差距似乎来自您为第一个图形提供的明确高度。只需将其删除，差距就会消失。

（IMO）更好的答案是这段代码对于创建简单的图形似乎有点复杂。

*   没有理由将每一行包装在一个`Graphics`类中。不过，您可以扩展 Graphic 以创建一个独立的、可重用的图形类。
*   有一个`Line`画直线的类。比使用容易得多`Path`

如果您绝对需要`VerticalLayout`，您可以像这样重写该代码：

```
<s:Group>
    <s:layout>
        <s:VerticalLayout gap="0" horizontalAlign="center" />
    </s:layout>
    <s:Line height="100">
        <s:stroke>
            <s:SolidColorStroke color="#333333" />
        </s:stroke>
    </s:Line>
    <s:Line width="100">
        <s:stroke>
            <s:SolidColorStroke color="#333333" />
        </s:stroke>
    </s:Line>
</s:Group> 
```

但如果由于某种原因你真的不需要它，它甚至可以简化为：

```
<s:Group>
    <s:Line height="100" horizontalCenter="0">
        <s:stroke>
            <s:SolidColorStroke color="#333333" />
        </s:stroke>
    </s:Line>
    <s:Line width="100" bottom="0">
        <s:stroke>
            <s:SolidColorStroke color="#333333" />
        </s:stroke>
    </s:Line>
</s:Group> 
```

# emacs - 在 AUCTeX 中插入加星标的环境或命令

> ID：10531115
> 
> 赞同：3
> 
> 时间：2012-05-10T09:27:34.957
> 
> 标签：emacs, auctex

今天的问题很简单——我希望答案同样简单。

在 TextMate 中，我习惯了将当前环境或命令更改为其加星标版本的键盘快捷键。Emacs/AUCTeX 中有类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:44:11.083

正如[Kilian Foth](https://stackoverflow.com/a/10531256/789593)所指出的，您可以编写一个函数来以这种方式修改环境：

```
(defun LaTeX-star-environment ()
  "Convert the current environment to its starred version."
  (interactive)
  ;; Add a star to the current environment.
  (LaTeX-modify-environment (concat (LaTeX-current-environment) "*"))) 
```

如果您重复该命令，此函数将继续`*`在当前环境中添加星号 ( )。

如果您希望一个函数在当前环境尚未加星标时为当前环境加星标，如果已加星标则取消星标，您可以使用以下函数：

```
(defun LaTeX-star-environment-dwim ()
  "Convert between the starred and the not starred version of the current environment."
  (interactive)
  ;; If the current environment is starred.
  (if (string-match "\*$" (LaTeX-current-environment))
      ;; Remove the star from the current environment.
      (LaTeX-modify-environment (substring (LaTeX-current-environment) 0 -1))
    ;; Else add a star to the current environment.
    (LaTeX-modify-environment (concat (LaTeX-current-environment) "*")))) 
```

您可以通过将其包含在 .emacs 中并分别执行`M-x` `LaTeX-star-environment`or`LaTeX-star-environment-dwim`或将函数绑定到键来使用任一函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:36:24.520

`LaTeX-current-environment`显然不是，但是使用and编写一个小函数来做到这一点很容易`LaTeX-modify-environment`。（我现在没有 emacs，抱歉。）

# objective-c - 为什么用我的 performSelector 警告

> ID：10531119
> 
> 赞同：1
> 
> 时间：2012-05-10T09:27:48.953
> 
> 标签：objective-c, memory-management, automatic-ref-counting, performselector

下面是一个简单的 PerformSelector，它向 obj 发送消息以执行循环方法。一切正常，但我收到以下黄色警告。

> PerformSelector 可能会导致泄漏，因为它的选择器是未知的。

```
#import "MyClass.h"
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{
    @autoreleasepool {
        MyClass *obj = [[MyClass alloc]init];

        SEL mySel = @selector(looping);
        [obj performSelector:mySel];
    }
    return 0;
} 
```

这个警告没有意义，因为 performSelector 必须知道 mySel 因为循环方法确实被调用 - 有什么想法吗？

* * *

**更新**

**我的类.h**

```
#import <Foundation/Foundation.h>

@interface MyClass : NSObject

-(void)looping;

@end 
```

**我的班级.m**

```
#import "MyClass.h"

@implementation MyClass

-(void)looping{

    NSLog(@"Hey, i'm looping");

}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:32:01.647

**更新——真正的答案**

这是 ARC 特有的：

[performSelector 可能会导致泄漏，因为它的选择器是未知的](https://stackoverflow.com/questions/7017281/performselector-may-cause-a-leak-because-its-selector-is-unknown)

简而言之，ARC 使用基于命名约定和绑定到选择器的任何附加属性的信息。当按名称访问选择器并通过`performSelector:`一系列方法执行它时，该信息会丢失，编译器会警告您必须对引用计数做出一些假设，因为该信息已被剥离。

简而言之，您发布的特定程序是安全的*，但*我们鼓励您使用对 ARC 友好的替代方案。

**以前的回应**

选择器的声明不需要对当前翻译可见才能调用它。

允许编译器假定参数的默认类型和类和实例方法的返回类型（`id`是默认值）。

有几个编译器警告可以警告您这些阴暗的行为。

您可能忘记在 中声明选择器`looping`，`@interface`或者您可能省略了冒号，如果它有参数：`looping:`将是它的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:33:57.203

这个警告是因为你没有告诉编译器选择器所在的位置，将文件导入到它所在的位置或将选择器添加到头文件应该在的位置

# asp.net-mvc - ASP.NET MVC 页面不通过 3G 或某些代理服务器提供服务

> ID：10531120
> 
> 赞同：8
> 
> 时间：2012-05-10T09:27:50.403
> 
> 标签：asp.net-mvc, proxy, httpwebrequest, 3g

我们刚刚推出了一个新的基于 ASP.NET MVC 的 web 应用程序，它可以在所有桌面连接和所有移动设备（如 iPhone 等）上正常工作。但是，当通过 3G 连接查看某些页面时（通过 3G加密狗在笔记本电脑上，或直接在移动设备上），提供一个空白的白色页面，没有任何类型的内容。看起来好像我们返回了一个空请求。

在某些代理网络上，我们遇到了类似的问题，他们说我们的请求太大。这是有道理的，因为它只影响某些页面，我假设移动网络提供商在他们身边运行各种代理服务器。

但是，我无法找到任何关于什么会构成太大请求的信息。我已经分析了其中一个页面，以下是一些我认为可能相关的统计数据：

> **HTML 内容大小：** 33.04KB 压缩，50.65KB 未压缩
> **所有样式表的总大小（4 个文件）：** 32.39KB 压缩，181.65KB 未压缩
> **所有外部 JS 的总大小（24 个文件）：** 227.82KB 压缩，851.46KB 未压缩

对我来说，内容的压缩大小并不过分，但也许我错了。任何人都可以建议我可以做些什么来解决这个问题，因为我很难找到任何明确的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:28:48.483

就 MVC 而言，3G 网络与 Wifi 没有什么不同。但是，移动设备可以缓存的文件大小是有限制的。在这种情况下，每次回发都会从服务器请求这些文件。

由于某些页面确实有效，因此我认为将问题隔离到特定的故障点而不是在野外搜索是个好主意。

您可以在 Firefox 或 Chrome 开发人员工具中使用 3G 加密狗和 firebug 轻松调试问题

*   首先确保没有导致问题的 Java Script 错误
*   确认 Javascript/css/html 文件确实已交付给客户端。（客户端上的萤火虫）。在服务器上检查 IIS 日志或 MS 网络监视器或创建一个 http 代理，您可以在其中监视流量。尝试任何你觉得舒服的。
*   仅针对 css/java script/html 就有近 30 个请求，如果有图像，请求数可能会更高。在 3G 上完成所有这些请求可能需要很长时间。尝试捆绑 Java Script 文件并减少请求计数。浏览器对它们可以同时发出的请求数量有限制，这增加了所有时间（我相信 Firefox 可以同时发出大约 10 个请求）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T16:14:28.110

我们确实解决了这个问题，它取决于响应标头中 Set-Cookie 项的大小和数量。我们发现我们有一个错误，即标题中有近 100 个 Set-Cookie 项。解决此错误并减小值的大小修复了该问题

# python - Python导入钩子：导入错误的引用中没有文件名

> ID：10531124
> 
> 赞同：1
> 
> 时间：2012-05-10T09:28:17.607
> 
> 标签：python, import, trackback, import-hooks

我根据[PEP 302](http://www.python.org/dev/peps/pep-0302/)编写了一个导入钩子，除了一个烦人的细节外，它似乎工作正常。当出现导入错误时，比如说尝试导入不存在的模块的代码，我会得到一个引用，如下所示：

```
File "<string>", line 10, in helloEnv 
```

第 10 行是对不存在的导入的调用所在的位置，但没有文件名，只有`<string>`.
我的导入钩子看起来很像[PEP 302](http://www.python.org/dev/peps/pep-0302/)中的最小钩子。在创建模块时，我总是将正确的字符串值设置为`__file__`，甚至检查是否`new_module()`将正确的值设置为`__name__`. 此外，模块的 和 都`str()`返回`repr()`一些信息。

trackback 中的这些无名文件使调试导入错误变得困难。引用从哪里获取文件名？为什么它看不到模块的名称？

* * *

编辑 - 再想一想，可能是因为模块代码是使用`exec()`. 是否可以提供`exec()`文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:39:35.893

好的，这很简单。代替

```
exec(code, mod.__dict__) 
```

写：

```
exec(compile(code, fullname, "exec"), mod.__dict__) 
```

# linux - 删除 xinetd 导致 plesk 删除

> ID：10531126
> 
> 赞同：3
> 
> 时间：2012-05-10T09:28:31.397
> 
> 标签：linux, ubuntu, command-line, plesk

我安装了一个 VNC 服务器并阅读了我必须安装 xinetd 的地方。过了一会儿，我决定删除 VNC-server，所以我也删除了 xinetd。xinetd 似乎删除了一些与 plesk 相关的文件，如果不是整个 plesk 包的话。

现在邮件没有进来，当然 plesk 不工作。有什么想法可以解决这个问题吗？

也许一些重要的日志：

```
The following packages were automatically installed and are no longer required:
 libdevel-symdump-perl psa-awstats-configurator libtokyocabinet8 xsltproc bind9 sharutils log4cpp-plesk libdigest-sha1-perl libnet-ip-perl libnet-dns-perl psa-pear libfile-copy-recursive-perl php5-xsl postfix re2c bind9utils libnet-xwhois-perl update-inetd unzip pp-sitebuilder-default-templates awstats postfix-pcre php5-sqlite libsqlite0 tk php5-gd gcc-4.4 libapache2-reload-perl psa-spf2 psa-php5-configurator spamc psa-courier-imap php5-curl libt1-5 psa-mail-driver-common gcc xfonts-base psa-ftputil libbsd-resource-perl libapache2-mod-python libmyodbc libvncserver0 php5-ioncube-loader psa-locale-base-en-us liberror-perl libapache2-mod-perl2 webalizer tcl libgd2-xpm tcl8.4 php5-imap libsocket6-perl zip libc6-dev tk8.4 libdb4.7 bsd-mailx psa-logrotate libsasl2-modules-sqlite3 php5-mysql libnetaddr-ip-perl linux-libc-dev manpages-dev libmail-spf-perl php5-cli sqlite3 libc-dev-bin pp-sitebuilder-skins binutils sw-libmilter sw-libsqlite3-0 libsys-hostname-long-perl libdigest-hmac-perl python-libxml2 spamassassin sw-doctrine libio-socket-inet6-perl
Use 'apt-get autoremove' to remove them.
The following packages will be REMOVED:
  plesk-core plesk-l10n plesk-mail-pc-driver pp-sitebuilder psa psa-backup-manager psa-horde psa-imp psa-ingo psa-kronolith psa-libxml-proxy psa-mimp psa-mnemo psa-passwd psa-proftpd
  psa-spamassassin psa-turba psa-updates psa-vhost xinetd
0 upgraded, 0 newly installed, 20 to remove and 16 not upgraded.
After this operation, 464MB disk space will be freed.
Do you want to continue [Y/n]? y
(Reading database ... 69919 files and directories currently installed.)
Removing psa-mnemo ...
Removing psa-turba ...
Removing psa-passwd ...
Removing psa-ingo ...
Removing psa-mimp ...
Removing psa-kronolith ...
Removing psa-imp ...
No valid mailman bindir detected
Removing psa-horde ...
Removing psa-updates ...
Removing psa ...
Removing plesk-l10n ...
dpkg: warning: while removing plesk-l10n, directory '/opt/psa/admin/common/resources/languages/ja-JP/components/forms' not empty so not removed.
dpkg: warning: while removing plesk-l10n, directory '/opt/psa/admin/common/resources/languages/ja-JP/components' not empty so not removed.
dpkg: warning: while removing plesk-l10n, directory '/opt/psa/admin/common/resources/languages/ja-JP' not empty so not removed.
dpkg: warning: while removing plesk-l10n, directory '/opt/psa/admin/smb/application/resources/languages/ja-JP/controllers/web' not empty so not removed.
dpkg: warning: while removing plesk-l10n, directory '/opt/psa/admin/smb/application/resources/languages/ja-JP/controllers/redirect' not empty so not removed.
dpkg: warning: while removing plesk-l10n, directory '/opt/psa/admin/smb/application/resources/languages/ja-JP/controllers/email-address' not empty so not removed.
dpkg: warning: while removing plesk-l10n, directory '/opt/psa/admin/smb/application/resources/languages/ja-JP/controllers' not empty so not removed.
dpkg: warning: while removing plesk-l10n, directory '/opt/psa/admin/smb/application/resources/languages/ja-JP' not empty so not removed.
dpkg: warning: while removing plesk-l10n, directory '/opt/psa/admin/panel/application/resources/languages/ja-JP/controllers/domain' not empty so not removed.
dpkg: warning: while removing plesk-l10n, directory '/opt/psa/admin/panel/application/resources/languages/ja-JP/controllers/server' not empty so not removed.
dpkg: warning: while removing plesk-l10n, directory '/opt/psa/admin/panel/application/resources/languages/ja-JP/controllers/update' not empty so not removed.
dpkg: warning: while removing plesk-l10n, directory '/opt/psa/admin/panel/application/resources/languages/ja-JP/controllers' not empty so not removed.
dpkg: warning: while removing plesk-l10n, directory '/opt/psa/admin/panel/application/resources/languages/ja-JP/components/forms/service-plan' not empty so not removed.
dpkg: warning: while removing plesk-l10n, directory '/opt/psa/admin/panel/application/resources/languages/ja-JP/components/forms' not empty so not removed.
dpkg: warning: while removing plesk-l10n, directory '/opt/psa/admin/panel/application/resources/languages/ja-JP/components' not empty so not removed.
dpkg: warning: while removing plesk-l10n, directory '/opt/psa/admin/panel/application/resources/languages/ja-JP' not empty so not removed.
Removing psa-spamassassin ...
Delete spamassassin preferences from .qmail files for mailnames
Removing `diversion of /etc/init.d/spamassassin to /usr/share/spamassassin/spamassassin.init.real by psa-spamassassin'
Removing psa-backup-manager ...
Removing psa-libxml-proxy ...
Removing plesk-core ...
Stopping psa...                                                       done
Removing plesk-mail-pc-driver ...
Removing psa-proftpd ...
Removing xinetd ...
 * Stopping internet superserver xinetd
   ...done.
Note: all inetd services have been terminated.
 * Stopping internet superserver xinetd
   ...done.
Processing triggers for man-db ...
Processing triggers for ureadahead ... 
```

是否应该重新安装 Plesk？我会丢失数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:40:55.260

不，您不需要重新安装系统。只需重新安装除 xinetd 之外的软件包。

`sudo apt-get install plesk-core plesk-l10n plesk-mail-pc-driver pp-sitebuilder psa psa-backup-manager psa-horde psa-imp psa-ingo psa-kronolith psa-libxml-proxy psa-mimp psa-mnemo psa-passwd psa-proftpd psa-spamassassin psa-turba psa-updates psa-vhost`

那会做他的伎俩。

# c# - 解析/反序列化 MTOM/XOP 数据 .NET

> ID：10531128
> 
> 赞同：8
> 
> 时间：2012-05-10T09:28:33.533
> 
> 标签：c#, xml, wcf, deserialization, mtom

如何解析/反序列化使用 WCF 从 Web 服务获得的[MTOM](http://en.wikipedia.org/wiki/Message_Transmission_Optimization_Mechanism) / [XOP](http://en.wikipedia.org/wiki/XML-binary_Optimized_Packaging)响应？我在磁盘上有响应。我已复制以下回复：

```
Date: Wed, 02 May 2012 09:38:57 GMT
Server: Microsoft-IIS/6.0
P3P:CP="BUS CUR CONo FIN IVDo ONL OUR PHY SAMo TELo"
X-Powered-By: ASP.NET
X-AspNet-Version: 4.0.30319
X-WindowsLive-Hydra: H: BLU165-ds6 V: 16.3.133.328 D: 2012-03-29T02:31:31
X-Response-Time: 78.1245
X-TransactionID: d491414e-46fd-47b2-82ce-e9cea9f564aa;BLU165-ds6;16.3.133.328;2012-05-02 09:38:57 UTC;78.1245 ms
Set-Cookie: HMDST=dGVhcG90ZG9tZYtZm3GzLm1r3f+/q8+gdzrAPYmy9kJ+SmDZuFmVgk3E983xNyeoTZkkdIr6t8y3P4V+vPzmytdaqqFwtI8vBuc=; domain=.mail.services.live.com; path=/
Cache-Control: no-cache
Pragma: no-cache
Expires: -1
Content-Type: application/xop+xml
Content-Length: 6386

MIME-Version: 1.0
Content-Type: Multipart/Related;boundary=DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM;
    type="application/xop+xml";
    start="<DeltaSyncMTOMFetchResponse@mail.services.live.com>";

--DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM
content-transfer-encoding: binary
content-type: application/xop+xml; charset=utf-8; type="application/xop+xml"
content-id: <DeltaSyncMTOMFetchResponse@mail.services.live.com>

<ItemOperations xmlns:xop="http://www.w3.org/2004/08/xop/include" xmlns:B="HMMAIL:" xmlns:D="HMSYNC:" xmlns="ItemOperations:"><Status>1</Status><Responses><Fetch><ServerId>E631966A-9439-11E1-8E7B-00215AD9A7B8</ServerId><Status>1</Status><Message><xop:Include href="cid:1.634715231374437235@example.org" /></Message></Fetch></Responses></ItemOperations>
--DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM
content-transfer-encoding: binary
content-type: application/octet-stream
content-id: <1.634715231374437235@example.org>

....Binary Content
--DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM-- 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T23:27:13.393

您可以使用 WCF 类反序列化响应，如下所示。但在我们继续之前，这个 MTOM 是无效的 - 标头的参数`boundary`格式错误`Content-Type`。因为它包含“？” 字符，它需要被引用（查看[MIME RFC](http://www.ietf.org/rfc/rfc2045.txt)，第 5.1 节，定义`token`）。

现在，要反序列化它，您需要使用 MTOM 阅读器打开文档 - 并且`XmlDictionaryReader.CreateMtomReader`会准确地为您提供。创建该阅读器后，您可以将其传递给`DataContractSerializer`以反序列化对象。下面的代码显示了如何做到这一点。

```
 public class StackOverflow_10531128
    {
        const string MTOM = @"MIME-Version: 1.0
Content-Type: Multipart/Related;boundary=DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM;
    type=""application/xop+xml"";
    start=""<DeltaSyncMTOMFetchResponse@mail.services.live.com>"";

--DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM
content-transfer-encoding: binary
Content-Type: application/xop+xml; charset=utf-8; type=""application/xop+xml""
content-id: <DeltaSyncMTOMFetchResponse@mail.services.live.com>

<ItemOperations xmlns:xop=""http://www.w3.org/2004/08/xop/include"" xmlns:B=""HMMAIL:"" xmlns:D=""HMSYNC:"" xmlns=""ItemOperations:"">
    <Status>1</Status>
    <Responses>
        <Fetch>
            <ServerId>E631966A-9439-11E1-8E7B-00215AD9A7B8</ServerId>
            <Status>1</Status>
            <Message><xop:Include href=""cid:1.634715231374437235@example.org"" /></Message>
        </Fetch>
    </Responses>
</ItemOperations>
--DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM
content-transfer-encoding: binary
Content-Type: application/octet-stream
content-id: <1.634715231374437235@example.org>

this is a binary content; it could be anything but for simplicity I'm using text
--DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM--";

        [DataContract(Name = "ItemOperations", Namespace = "ItemOperations:")]
        public class ItemOperations
        {
            [DataMember(Order = 1)]
            public int Status { get; set; }
            [DataMember(Order = 2)]
            public Responses Responses { get; set; }
        }

        [CollectionDataContract(Name = "Responses", Namespace = "ItemOperations:", ItemName = "Fetch")]
        public class Responses : List<Fetch>
        {
        }

        [DataContract(Name = "Fetch", Namespace = "ItemOperations:")]
        public class Fetch
        {
            [DataMember(Order = 1)]
            public Guid ServerId { get; set; }
            [DataMember(Order = 2)]
            public int Status { get; set; }
            [DataMember(Order = 3)]
            public byte[] Message { get; set; }
        }

        public static void Test()
        {
            MemoryStream ms;
            ItemOperations obj;
            DataContractSerializer dcs = new DataContractSerializer(typeof(ItemOperations));

            string fixedMtom = MTOM.Replace(
                "Multipart/Related;boundary=DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM;",
                "Multipart/Related;boundary=\"DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM\";");
            ms = new MemoryStream(Encoding.UTF8.GetBytes(fixedMtom));
            XmlDictionaryReader reader = XmlDictionaryReader.CreateMtomReader(ms, Encoding.UTF8, XmlDictionaryReaderQuotas.Max);
            obj = (ItemOperations)dcs.ReadObject(reader);
            Console.WriteLine(obj.Status);
            Console.WriteLine(obj.Responses.Count);
            foreach (var resp in obj.Responses)
            {
                Console.WriteLine("  {0}", resp.ServerId);
                Console.WriteLine("  {0}", resp.Status);
                Console.WriteLine("  {0}", string.Join(" ", resp.Message.Select(b => string.Format("{0:X2}", (int)b))));
            }
        }
    } 
```

# php - FOS 用户捆绑认证

> ID：10531129
> 
> 赞同：4
> 
> 时间：2012-05-10T09:28:37.013
> 
> 标签：php, authentication, symfony, fosuserbundle

[FOS User Bundle](https://github.com/FriendsOfSymfony/FOSUserBundle/)如何通过此服务容器对用户进行身份验证？

```
$this->container->get('security.context')->getToken()->getUser(); 
```

我想操纵身份验证过程。我应该在哪里查看捆绑包？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T09:45:37.383

实际上 FOSUserBundle 不进行身份验证。它实际上提供了一个 db 用户提供程序。身份验证部分由 Symfony2 的内部`form_login`身份验证提供程序完成。如果您想创建自定义身份验证提供程序，请检查[此](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)说明书条目。

# dynatree - Dynatree dnd IE8 - 当文件夹展开时，拖动的项目消失并且拖动停止

> ID：10531138
> 
> 赞同：1
> 
> 时间：2012-05-10T09:29:07.140
> 
> 标签：dynatree, jquery-dynatree

当拖动的项目悬停在折叠的节点上时 - 节点展开但项目消失并且拖动停止。这仅在 IE8 中发生，并且可以在 dynatree 示例浏览器中看到[http://wwwendt.de/tech/dynatree/doc/samples.html](http://wwwendt.de/tech/dynatree/doc/samples.html) - Drag'n'drop 2\. 如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T10:08:16.933

这是一个已知问题，请参见此处：

[http://code.google.com/p/dynatree/issues/detail?id=367](http://code.google.com/p/dynatree/issues/detail?id=367)

# javascript - 如何通过插件扩展 javascript 库？

> ID：10531139
> 
> 赞同：1
> 
> 时间：2012-05-10T09:29:13.690
> 
> 标签：javascript, plugins, callback, extend

假设我想开发一个库，该库将保持非常小的核心并且可以通过插件进行扩展。

所以我基本上想出了以下规模的东西：

```
(function(window){
     window.SomeLibrary =(function(){
          var api = { 
              init: function(){
                  console.log('hi');
                  privateFunction();
                },
              plugin: function(callback) {
                  callback.call();
                }
            };
          var privateFunction = function() {
            console.log('im a private method');
            };
        return api;
        }());
    })(window);

SomeLibrary.init();
SomeLibrary.plugin(function(){
    console.log('im a plugin');
    privateFunction(); //fails;    
}); 
```

如何使插件回调执行 SomeLibrary 私有和公共方法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:39:00.273

你可以在一个对象中收集你的私有函数并将这个对象传递给扩展插件。

```
Lib.extend('pluginName',function(privates){
    //I have access to privateJob via privates.privateJob();
}); 
```

然后在库中：

```
var privateCollection = {                 //your private collecting object
    privateJob : function(){...}          //a private function
}

extend : function(pluginName,callback){ //an extend function that receives callback
    callback(privateCollection);          //execute callback with private collection
} 
```

但是访问内部函数是个坏主意。这会破坏你图书馆的内部结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:49:11.030

你不能。这就是为什么它们是**私有**的。无法从范围外访问它们。

如果您公开了对这些方法的一些引用，则需要将这些函数视为属性或`SomeLibrary`，这意味着它们不再是私有的。

或者您可以使用[闭包](http://www.webreference.com/programming/javascript/rg36/index.html)来实现类似的结果。但我也不认为它是**私人**的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:30:05.067

`privateFunction`不在回调范围内。通过使用闭包，您可以使该函数可用于插件，而无需在 中提供它`api`，但该函数不会是**私有**的。

例如：

```
(function(window){
 window.SomeLibrary =(function(){
         var privateFunction = function() {
            console.log('im a private method');
        };
         var init = function(){
              console.log('hi');
              privateFunction();
            };
          var plugin = function(){ 
              var pluginScope={
                  privateFunction :privateFunction,
              };
              return function(callback) {
                  callback(pluginScope);
               }
          }();
          var api = { 
              init: init,
              plugin: plugin
          };
    return api;
    }());
})(window);

SomeLibrary.init();
SomeLibrary.plugin(function(scope){
    console.log('im a plugin ');
    scope.privateFunction();;    
});​ 
```

您可以在[http://jsfiddle.net/uXppZ/2/对其进行测试](http://jsfiddle.net/uXppZ/2/)

# linux - Setuid 到 Perl 脚本

> ID：10531142
> 
> 赞同：2
> 
> 时间：2012-05-10T09:29:21.523
> 
> 标签：linux, perl

我正在使用 Perl 脚本从 mqueue 文件夹中删除用于 sendmail 的数据。

当我`setuid`到那个 Perl 脚本并尝试从用户运行它时，它会抛出以下消息：

```
Insecure dependency in chdir while running setuid at /file/find 
```

如何解决它并以 root 权限成功运行脚本？

```
!/usr/bin/perl

use strict;

my $qtool = "/usr/local/bin/qtool.pl";
my $mqueue_directory = "/var/spool/mqueue";
my $messages_removed = 0;

use File::Find;
# Recursively find all files and directories in $mqueue_directory
find(\&wanted, $mqueue_directory);

sub wanted {
   # Is this a qf* file?
   if ( /^qf(\w{14})/ ) {
      my $qf_file = $_;
      my $queue_id = $1;
      my $deferred = 0;
      my $from_postmaster = 0;
      my $delivery_failure = 0;
      my $double_bounce = 0;
      open (QF_FILE, $_);
      while(<QF_FILE>) {
         $deferred = 1 if ( /^MDeferred/ );
         $from_postmaster = 1 if ( /^S<>$/ );
         $delivery_failure = 1 if \
            ( /^H\?\?Subject: DELIVERY FAILURE: (User|Recipient)/ );
         if ( $deferred && $from_postmaster && $delivery_failure ) {
            $double_bounce = 1;
            last;
         }
      }
      close (QF_FILE);
      if ($double_bounce) {
         print "Removing $queue_id...\n";
         system "$qtool", "-d", $qf_file;
         $messages_removed++;
      }
   }
}

print "\n$messages_removed total \"double bounce\" message(s) removed from ";
print "mail queue.\n"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T09:35:20.130

“不安全的依赖”是`Taint`一回事： http: [//perldoc.perl.org/perlsec.html](http://perldoc.perl.org/perlsec.html)。

由于您已运行脚本 setuid，因此正在强制执行污点。您需要指定 `untaint`File::Find 的 %option 键：

[http://metacpan.org/pod/File::查找](http://metacpan.org/pod/File%3a%3aFind)

```
my %options = (
    wanted => \&wanted,
    untaint => 1
);

find(\%options, $mqueue_directory); 
```

您还应该查看`untaint_pattern`POD 中的 File::Find。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-10T11:33:11.060

您应该构建一个程序包装器。在几乎任何 unix 系统上，脚本永远无法通过 SetUID 位获得 root 权限。你可以在这里找到一些有用的例子[http://www.tuxation.com/setuid-on-shell-scripts.html](http://www.tuxation.com/setuid-on-shell-scripts.html)

# cmis - CMIS 查询语言；查询名称 cmis:document

> ID：10531173
> 
> 赞同：0
> 
> 时间：2012-05-10T09:31:34.207
> 
> 标签：cmis

我对 CMIS 查询语言有一些问题。我想获取所有具有某些属性的文件（表不重要）。所以我写了从 cmis:document 中选择 my_property。

不幸的是，我得到了答案：0 个文件。但是当我将查询更改为从 my_table 中选择 my_property 时。我得到不同的答案。

你能告诉我为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:48:42.097

原因是规范没有提供它。以下是规范中关于“关系视图投影”（[来源](http://docs.oasis-open.org/cmis/CMIS/v1.0/errata-01/os/cmis-spec-v1.0-errata-01-os-complete.html#_Toc243905421)）的说明：

> 在每个虚拟表中，为对象类型定义中定义的每个属性以及在对象类型的任何祖先类型上定义但未在对象类型定义中定义的所有属性都隐式定义了一个虚拟列。

因此，可以查询给定的对象类型以获取祖先类型的属性，但规范没有规定查询对象类型以获取后代类型的属性，这是您正在尝试做的。

杰夫

# mysql - 如何在 MySqL 中将表 db 复制到 db

> ID：10531180
> 
> 赞同：0
> 
> 时间：2012-05-10T09:31:49.807
> 
> 标签：mysql, copy

```
$server_net=mysql_connect("xxx.xxx.170.54","net_db","dbpass") or die("SQL server error..!");
@mysql_select_db("net_db",$server_net) or die("database error..");
#------------------------------------------------------------------
$server_local=mysql_connect("localhost","","") or die("SQL server error.!");
@mysql_select_db("local_db") or die("Database error..");

mysql_query("DROP TABLE IF EXISTS net_db.komisyon",$server_net);
mysql_query("CREATE TABLE net_db.komisyon SELECT * FROM local_db.komisyon"); 
```

如何将表从本地复制到网络？我想像本地表一样在服务器上创建表。当我运行这个查询给出错误（未知数据库）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:42:24.557

您正在将`CREATE TABLE`命令发送到您的网络服务器，但它与数据库没有任何连接`local_db`。

您必须以某种方式从本地数据库中导出数据（可能最好使用[`mysqldump`](http://dev.mysql.com/doc/en/mysqldump.html)，尽管您也可以将其加载到 PHP 中，然后再加载到`INSERT`网络数据库中），或者查看 MySQL[复制](http://dev.mysql.com/doc/en/replication.html)或[集群](http://dev.mysql.com/doc/en/mysql-cluster.html)以保持数据库同步。

# wordpress - 使用 JQuery 在 WordPress 默认评论内容表单中添加跨度标签

> ID：10531186
> 
> 赞同：0
> 
> 时间：2012-05-10T09:32:12.290
> 
> 标签：wordpress

幸运的一天，;-)，今天，我很难**使用 jquery 在 wordpress 默认评论内容表单中添加 span 标签**。现在，我使用 jquery 在 wordpress 评论内容表单 (textarea) 中添加了我的 span 标签。它不起作用并且没有显示它，但是，**当我用萤火虫检查时，它可以在萤火虫中看到！**

```
<textarea aria-required="true" rows="8" cols="45" name="comment" id="comment"><span>Custom Span</span></textarea> 
```

我明白了，如果我只使用jquery添加文本，它可以工作和显示，然后，如果我编辑wordpress的核心代码，它可以让它工作，但是，我不想接触核心代码！那么，无论如何插入跨度标签（无论标签）放入wordpress默认评论内容形式（textarea）

# asp.net - 如何动态添加 UserControl 并转换为接口实现

> ID：10531190
> 
> 赞同：1
> 
> 时间：2012-05-10T09:32:40.027
> 
> 标签：asp.net, c#-4.0, interface, user-controls, casting

我有这个代码：

```
Control ctrl = Page.LoadControl("~/UserControls/ReportControl.ascx");
IReport rpt = (IReport)ctrl;
rpt.LoadData();
Panel.Controls.Add(ctrl); 
```

到目前为止，一切都按预期工作。现在我需要`Button`点击回发事件来获取加载的控件并转换到界面以使用方法，并尝试了这个：

```
if (Panel.Controls.Count > 0) {
   Control ctrl = Panel.Controls[0] as Control;
   IReport rpt = ctrl as IReport;
   string result = rpt.AMethodToInvoke();
} 
```

这个演员不能发生，我从面板得到的控制是`LiteralContol`.

有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:42:13.587

您的面板中有其他控件吗？

也许给你的控制一个 ID 所以

```
Control ctrl = Page.LoadControl("~/UserControls/ReportControl.ascx");
ctrl.ID = "UniqueID";
IReport rpt = (IReport)ctrl;
rpt.LoadData();
Panel.Controls.Add(ctrl); 
```

然后面板上的用户 FindControl

```
Control ctrl = Panel.FindControl("UniqueID"); 
```

此外，当您动态添加控件时，您需要确保在回发时重新添加它们，否则当您运行 FindControl() 时，它将返回 null。

# php - 如何在 xpath 1.0 中获得一个节点的最大深度

> ID：10531191
> 
> 赞同：1
> 
> 时间：2012-05-10T09:32:40.570
> 
> 标签：php, xpath

我需要以最简单的方式检索一个节点的最大深度（PHP 5，XPATH 1.0）

**XML 示例：**

```
<node>
    <node id="nodeBase">
        <node>
            <node />
        </node>
        <node>
            <node>
                <node />
            </node>
        </node>
    </node>
</node> 
```

1.  我得到节点**nodeBase**
2.  执行 XPATH 查询以从**nodeBase获取最大深度**
3.  结果必须是 3

是否有可能在不使用 PHP 编写复杂算法的情况下做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:43:12.033

> 1.我得到节点nodeBase
> 
> 2.执行 XPATH 查询以从 nodeBase 获取最大深度
> 
> 3.结果必须是 3 是否有可能在不使用 PHP 编写复杂算法的情况下做到这一点？

**与使用 XPath 2.0 不同，在 XPath 1.0 中使用单个 XPath 表达式不可能产生想要的结果**。

最简单的解决方案将涉及来自宿主语言（在本例中为 PHP）的一些计算。

1.  您可以获得作为指定元素后代的所有叶元素。

2.  对于它们中的每一个进行评估`count(ancestor::*)`，然后在 PHP 中找到其中的最大值。

3.  最后，从这样找到的最大绝对深度中减去指定元素的深度，该深度再次`count(ancestor::*)` 从该元素评估。

**选择所有叶元素的 XPath 表达式（上面 1\. 中需要）是**：

```
//node[@id='nodeBase']//*[not(*)] 
```

**该算法的 XSLT 1.0 实现**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:variable name="vBase" select="//*[@id='nodeBase']"/>

     <xsl:for-each select="$vBase//*">
      <xsl:sort select="count(ancestor::*)" data-type="text" order="descending"/>

      <xsl:if test="position() = 1">
       <xsl:value-of select="count(ancestor::*) - count($vBase/ancestor::*)"/>
      </xsl:if>
     </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<node>
    <node id="nodeBase">
        <node>
            <node />
        </node>
        <node>
            <node>
                <node />
            </node>
        </node>
    </node>
</node> 
```

**产生了想要的正确结果**：

```
3 
```

从这里您可以了解如何在 PHP 中实现该算法。

**为了完整起见，这里有一个 XPath 2.0 表达式产生相同的结果**：

```
 max((//*[@id='nodeBase'])[1]//*[not(*)]/count(ancestor::*))
-
 (//*[@id='nodeBase'])[1]/count(ancestor::*) 
```

# sql - 如何将查询结果存储在变量中并使用经典 ASP 显示它

> ID：10531193
> 
> 赞同：0
> 
> 时间：2012-05-10T09:32:44.300
> 
> 标签：sql, asp-classic, vbscript, sql-server-2000

我正在使用 SQL Server 2000 和经典 ASP 来使用表格（即 HTML 格式）显示结果。我正在尝试获取 SQL 表中存在的列记录的值的总和。为此，我尝试了这个。

```
Balance Leave =<%
                        sql= "select SUM('no_of_leave_taken') from emp_leave_details where emp_no='"&request.QueryString("id")&"'"  
                        rs.open sql,con,1,2
                        response.Write(con.execute sql)
                        rs.close
                        %> 
```

浏览器中显示的错误是

> sum 或 average 聚合运算不能将 varchar 数据类型作为参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:46:37.023

这看起来像一个 SQL 错误 - 如果您在 SQL Server 企业管理器中运行该查询会发生什么？是`emp_details.no_of_leave_taken`数字字段吗？

我要补充的另一件事——**请不要使用未验证的查询字符串值**——阅读[这个 ASP 友好的 SQL 注入攻击](http://www.4guysfromrolla.com/webtech/061902-1.shtml)解释，以了解原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T03:36:07.007

我尝试了这个，我自己想出来了`<% sql= "select SUM(no_of_leave_taken) as total from emp_leave_details where emp_name='"&request.QueryString("name")&"'" rs.open sql,con,1,2 response.Write(31- rs("total")) %>`。这对我来说是新事物……我很困惑，因为上面查询中的表达式“total”对我有用，并且使用`rs("total")`感谢@在记录集中虚拟地调用为一个新的列字段glenatron 为您提供帮助

# reference - Fluent Nhibernate Not In Case 声明

> ID：10531194
> 
> 赞同：1
> 
> 时间：2012-05-10T09:32:56.187
> 
> 标签：reference, fluent-nhibernate, notin

我正在尝试在 FN 中编写“not in”语句，但真的不知道最好的方法是什么。这是一些sql语句：

```
 select * from T1
 where T1\. id not  in
 (
     select distinct T2.fkeyID from T2
 ) 
```

我应该使用一对多的引用创建映射并使用属性检查吗？还是有其他方法，例如以某种方式编写 QueryOver 来解决问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:20:41.537

```
var subquery = QueryOver.Of<T2>()
    .Select(Projections.Distinct(Projections.Property("referencedT1.id")))

var results = session.QueryOver<T1>()
    .WithSubquery.WhereProperty(t1 => t1.Id).NotIn(subquery)
    .List(); 
```

# javascript - 访问 JSON 解析对象（使用跟踪但不是没有...）

> ID：10531202
> 
> 赞同：0
> 
> 时间：2012-05-10T09:33:07.233
> 
> 标签：javascript, json, data-access

解析 JSON 文件后，我遇到了一个奇怪的问题。我访问数据并且只有在正确的位置使用“跟踪”时才能使用它！当我评论跟踪行时，我得到“未定义”......这是我的代码执行顺序的问题还是传递字符串参数的问题？

提前感谢您寻找解决方案，这个问题非常令人沮丧！

这是我的代码：

//index.js

```
var language={};

var resourceManager = {};

$(document).ready(function(){
loading();
});

function loading() {

$.ajaxSetup({'beforeSend': function(xhr){
if (xhr.overrideMimeType)
    xhr.overrideMimeType("text/plain");
    }
});

$.getJSON("json/lang_french.json", function(data) {
      language = data;
});

setTitle();
}

function setTitle()
{

 var title = resourceManager.getString("welcome");
 var query = document.getElementById('title');
 query.textContent = title;
}

resourceManager.getString = function(str)
{

    //alert(str);//if I uncomment this line, the whole code works...
    return language[str];//when the "alert" is commented, return undefined !!!
}; 
```

这是 JSON 文件：lang_french.json

```
{
"welcome" : "Bienvenue",
"goodbye" : "Au revoir"
} 
```

和 HTML 文件 index.html

```
<!DOCTYPE html>
<html>
<head>
 <style>img{ height: 100px; float: left; }</style>
 <script src="http://code.jquery.com/jquery-latest.js"></script>
 <script src="index.js"></script>
</head>
<body>
 <div id="title">
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:41:34.730

我不是 100%，但我猜正在发生的事情是异步 $.getJSON 调用在它到达“返回语言 [str]”（又名竞争条件）时尚未完成。发出“警报”必须给它足够的时间来完成呼叫。

尝试将“setTitle”放入 $.getJSON 的回调中，例如：

```
$.getJSON("json/lang_french.json", function(data) {
      language = data;
      setTitle();
}); 
```

这意味着它将等待调用，直到实际设置语言，而不是成为空对象 {}。

# c# - c# - 如何提取 FAT 磁盘映像？

> ID：10531203
> 
> 赞同：8
> 
> 时间：2012-05-10T09:33:12.223
> 
> 标签：c#, fat, diskimage

我实际上正在尝试使用 DiskUtils 提取胖磁盘映像，但我没有得到正确的文件名......

我得到 "\TURNER~3\TOPPER~1.P~1" 代替 "\TURNEROVER\TOPPERSHEATH.PPTX"

```
FatFileSystem FatImg = new FatFileSystem(MS); //MS = Fat Image MemoryStream
foreach(DiscDirectoryInfo Di in FatImg.Root.GetDirectories())
{
    foreach(DiscFileInfo Fi in Di.GetFiles())
    {
        Stream St = Fi.OpenRead(); // Correct Stream
        string FName = Fi.Name; //Wrong Name
    }
} 
```

这是因为 DiscUtils 不支持 LFN [长文件名]...

所以我正在寻找一个完美的库来提取这些文件，然后我尝试自己制作一个......

有什么方法可以在没有文件名错误的情况下提取它[也许是通过 DiscUtils]...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T08:02:19.370

以下是您可以添加`DiscUtils`到支持`FAT LFN`s 的一些修改：

首先，对文件进行这些更改`Fat\Directory.cs`，如下所示（您需要添加`_lfns`变量、`GetLfnChunk`函数，并修改现有`LoadEntries`函数以添加以下标记的行`//+++`）：

```
internal Dictionary<string, string> _lfns = new Dictionary<string, string>(StringComparer.OrdinalIgnoreCase);

private static string GetLfnChunk(byte[] buffer)
{
    // see http://home.teleport.com/~brainy/lfn.htm
    // NOTE: we assume ordinals are ok here.
    char[] chars = new char[13];
    chars[0] = (char)(256 * buffer[2] + buffer[1]);
    chars[1] = (char)(256 * buffer[4] + buffer[3]);
    chars[2] = (char)(256 * buffer[6] + buffer[5]);
    chars[3] = (char)(256 * buffer[8] + buffer[7]);
    chars[4] = (char)(256 * buffer[10] + buffer[9]);

    chars[5] = (char)(256 * buffer[15] + buffer[14]);
    chars[6] = (char)(256 * buffer[17] + buffer[16]);
    chars[7] = (char)(256 * buffer[19] + buffer[18]);
    chars[8] = (char)(256 * buffer[21] + buffer[20]);
    chars[9] = (char)(256 * buffer[23] + buffer[22]);
    chars[10] = (char)(256 * buffer[25] + buffer[24]);

    chars[11] = (char)(256 * buffer[29] + buffer[28]);
    chars[12] = (char)(256 * buffer[31] + buffer[30]);
    string chunk = new string(chars);
    int zero = chunk.IndexOf('\0');
    return zero >= 0 ? chunk.Substring(0, zero) : chunk;
}

private void LoadEntries()
{
    _entries = new Dictionary<long, DirectoryEntry>();
    _freeEntries = new List<long>();

    _selfEntryLocation = -1;
    _parentEntryLocation = -1;

    string lfn = null;  //+++
    while (_dirStream.Position < _dirStream.Length)
    {
        long streamPos = _dirStream.Position;
        DirectoryEntry entry = new DirectoryEntry(_fileSystem.FatOptions, _dirStream);

        if (entry.Attributes == (FatAttributes.ReadOnly | FatAttributes.Hidden | FatAttributes.System | FatAttributes.VolumeId))
        {
            // Long File Name entry
            _dirStream.Position = streamPos;  //+++
            lfn = GetLfnChunk(Utilities.ReadFully(_dirStream, 32)) + lfn;  //+++
        }
        else if (entry.Name.IsDeleted())
        {
            // E5 = Free Entry
            _freeEntries.Add(streamPos);
            lfn = null; //+++
        }
        else if (entry.Name == FileName.SelfEntryName)
        {
            _selfEntry = entry;
            _selfEntryLocation = streamPos;
            lfn = null; //+++
        }
        else if (entry.Name == FileName.ParentEntryName)
        {
            _parentEntry = entry;
            _parentEntryLocation = streamPos;
            lfn = null; //+++
        }
        else if (entry.Name == FileName.Null)
        {
            // Free Entry, no more entries available
            _endOfEntries = streamPos;
            lfn = null; //+++
            break;
        }
        else
        {
            if (lfn != null) //+++
            { //+++
                _lfns.Add(entry.Name.GetDisplayName(_fileSystem.FatOptions.FileNameEncoding), lfn); //+++
            } //+++
            _entries.Add(streamPos, entry);
            lfn = null; //+++
        }
    }
} 
```

其次，将这两个公共函数添加到`Fat\FatFileSystem.cs`文件中。它们将成为查询 LFN 的新 API：

```
/// <summary>
/// Gets the long name of a given file.
/// </summary>
/// <param name="shortFullPath">The short full path to the file. Input path segments must be short names.</param>
/// <returns>The corresponding long file name.</returns>
public string GetLongFileName(string shortFullPath)
{
    if (shortFullPath == null)
        throw new ArgumentNullException("shortFullPath");

    string dirPath = Path.GetDirectoryName(shortFullPath);
    string fileName = Path.GetFileName(shortFullPath);
    Directory dir = GetDirectory(dirPath);
    if (dir == null)
        return fileName;

    string lfn;
    if (dir._lfns.TryGetValue(Path.GetFileName(shortFullPath), out lfn))
        return lfn;

    return fileName;
}

/// <summary>
/// Gets the long path to a given file.
/// </summary>
/// <param name="shortFullPath">The short full path to the file. Input path segments must be short names.</param>
/// <returns>The corresponding long file path to the file or null if not found.</returns>
public string GetLongFilePath(string shortFullPath)
{
    if (shortFullPath == null)
        throw new ArgumentNullException("shortFullPath");

    string path = null;
    string current = null;
    foreach (string segment in shortFullPath.Split(Path.DirectorySeparatorChar))
    {
        if (current == null)
        {
            current = segment;
            path = GetLongFileName(current);
        }
        else
        {
            current = Path.Combine(current, segment);
            path = Path.Combine(path, GetLongFileName(current));
        }
    }
    return path;
} 
```

就是这样。现在，您将能够像这样递归地转储整个 FAT 磁盘，例如：

```
static void Main(string[] args)
{
    using (FileStream fs = File.Open("fat.ima", FileMode.Open))
    {
        using (FatFileSystem floppy = new FatFileSystem(fs))
        {
            Dump(floppy.Root);
        }
    }
}

static void Dump(DiscDirectoryInfo di)
{
    foreach (DiscDirectoryInfo subdi in di.GetDirectories())
    {
        Dump(subdi);
    }
    foreach (DiscFileInfo fi in di.GetFiles())
    {
        Console.WriteLine(fi.FullName);
        // get LFN name
        Console.WriteLine(" " + ((FatFileSystem)di.FileSystem).GetLongFileName(fi.FullName));

        // get LFN-ed full path
        Console.WriteLine(" " + ((FatFileSystem)di.FileSystem).GetLongFilePath(fi.FullName));
    }
} 
```

使用风险自负！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T10:10:14.437

[7-Zip](http://www.7-zip.org)可以提取 FAT 图像。[http://sevenzipsharp.codeplex.com](http://sevenzipsharp.codeplex.com)上有一个 C# 包装器库，可以读取文件名并提取到流中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T13:48:11.063

DiscUtils 中似乎没有对 FAT 的长名称文件支持。 [看看这篇文章。](http://discutils.codeplex.com/discussions/353129)我相信你知道，因为看起来你问了这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-26T16:49:10.470

使用命令行的最佳方法是使用以下命令：

7z“x”+源+“-o”+路径+“*-r”

*   “x” = 提取；重现文件夹结构
*   源 = 磁盘映像的路径
*   " -o [path]" = 解压到的目的地
*   “ *” = 所有文件
*   “-r”=递归

在 C# 中，您可以使用我制作的这个方法（我将 7z.exe 复制到我的应用程序的 Debug 文件夹中）

```
public void ExtractDiskImage(string pathToDiskImage, string extractPath, bool WaitForFinish)
{
    ProcessStartInfo UnzipDiskImage = new ProcessStartInfo("7z.exe");
    StringBuilder str = new StringBuilder();
    str.Append("x ");
    str.Append(pathToDiskImage);
    str.Append(" -o");
    str.Append(extractPath);
    str.Append(" * -r");
    UnzipDiskImage.Arguments = str.ToString();
    UnzipDiskImage.WindowStyle = ProcessWindowStyle.Hidden;
    Process process = Process.Start(UnzipDiskImage);
    if(WaitForFinish == true)
    {
        process.WaitForExit(); //My app had to wait for the extract to finish
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T10:25:18.730

**带有 /X 开关的 DOS DIR 命令显示长名称和短名称。**

**否则，有一个实用程序可以保存 LFN：[DOSLFNBk.exe](http://www8.pair.com/dmurdoch/programs/doslfnbk.htm)，它有助于创建映射表。**

我不知道您正在寻找的答案，但没有先手动创建表，因此您可以在没有 DiskUtil 的情况下进行映射，我想不出一个实用程序或方法来实现您的目标 - 但正如您所提到的，这里有人可能知道另一种选择。

来自 DiskUtils 的 Kevin 确实提到，如果他包含对 LFN 的支持，他将侵犯 Mirosoft 专利，我也不建议您侵犯（绝对不是商业项目），但如果这只是个人的，或者您可以找到类似的库7-Zip 有许可证...

*您的屏幕截图显示 VNext.. 与 RTM 版本相同的错误？*

# objective-c - 我如何关闭 UIView

> ID：10531205
> 
> 赞同：0
> 
> 时间：2012-05-10T09:33:27.793
> 
> 标签：objective-c, ios, xcode, uitableview, uiview

我是 iOS 和 Objective-C 的新手。我有一个显示表格视图的应用程序，并在单击用户单击一行时打开一个新视图。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {  
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    DetailViewController *detailController = [[DetailViewController alloc] initWithNibName:@"DetailView" bundle:nil];
    [detailController changeSubjectText:[subject_data_Array objectAtIndex:indexPath.row]];

    //navigationController = [[UINavigationController alloc] initWithRootViewController:detailController];

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    [self.window addSubview:navigationController.view];
    [self.window makeKeyAndVisible];
} 
```

在我的详细视图中，我编写了代码：

```
-(IBAction)closeDetail:(id)sender {
    NSLog(@"closeDetail");
    [self.view removeFromSuperview];
} 
```

但它不起作用。任何人都可以帮忙吗？

* * *

谁能帮我？

我怎样才能关闭视图？

下载我的代码 --> [http://www.vasuta.com/ios/multiview2.zip](http://www.vasuta.com/ios/multiview2.zip)

打开构建并运行单击“公告板”DetailView中的一行它已打开单击关闭......

为什么 DetailView 不是全屏的，为什么不能关闭详细视图？

我打开错误或关闭错误

请帮帮我

didSelectRowAtIndexPath 您可以在“GadgetBulletinsTVContoller.m”中看到，关闭命令您可以在“DetailViewController.m”中看到

非常感谢你

附言。对不起我的英语技能:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:38:25.473

为什么要创建该窗口对象，为什么要尝试将子视图添加到其中？如果要添加子视图，则应将其添加到父视图、tableview 或 tableView 的父视图。

一个更好的主意是在堆栈上推送一个新的视图控制器，以显示您想要显示的信息。

这是一个教程，展示了如何在 tableview[教程链接](http://iosdeveloperzone.com/2011/05/18/tutorial-using-uitableview-adding-a-detail-view-in-xcode-4/)中选择单元格时推送新的视图控制器。

编辑：在 MultipleAppDelegate - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 应该如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[MultipleViewController alloc] initWithNibName:@"MultipleViewController" bundle:nil];
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
    navController.navigationBarHidden = YES;
    self.window.rootViewController = navController;

    [self.window makeKeyAndVisible];
    return YES;
} 
```

在 GadgetBulletinsTVContoller.h 中声明如下协议：

```
@protocol GadgetBulletinsTVControllerDelegate <NSObject>
@optional
- (void)showItemDetails:(id)selectedItem;

@end 
```

和一个委托属性：

```
@property (nonatomic, assign)id<GadgetBulletinsTVControllerDelegate>delegate; 
```

在 GadgetBulletinsTVContoller.m 中合成委托。- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 应该是这样的：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{   
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    if([delegate respondsToSelector:@selector(showItemDetails:)])
    {
        [delegate showItemDetails:[subject_data_Array objectAtIndex:indexPath.row]];
    }
} 
```

在 FirstViewController.m 中告诉控制器像这样实现 GadgetBulletinsTVControllerDelegate：

```
 @interface FirstViewController ()<GadgetBulletinsTVControllerDelegate>

in viewDidLoad method tell the gadgetBulletinsController that his delegate is the FirstViewController class, like this:

if (gadgetBulletinsContoller == nil) {
        gadgetBulletinsContoller = [[GadgetBulletinsTVContoller alloc] init];
        gadgetBulletinsContoller.delegate = self;
    } 
```

并实现 GadgetBulletinsTVControllerDelegate 的方法：

```
- (void)showItemDetails:(id)selectedItem
{
    if([delegate respondsToSelector:@selector(showDetailsScreenForItem:)])
    {
        [delegate showDetailsScreenForItem:selectedItem];
    }
} 
```

在 FirstViewController.h 中声明如下协议：

```
@protocol FirstViewControllerDelegate <NSObject>

- (void)showDetailsScreenForItem:(id)item;

@end 
```

并声明如下委托属性（不要忘记在 .m 文件中合成）：

```
@property (nonatomic, assign)IBOutlet id<FirstViewControllerDelegate>delegate; 
```

在 MultipleViewController.xib 中选择 FirstViewController 屏幕并在 outlets 中从委托拖动到 fileOwner 以将委托的值设置为 MultipleViewController（如果您愿意，可以在代码中执行此操作）。

在 MultipleViewController.m 中告诉 MultipleViewController 实现 FirstViewControllerDelegate 协议，如下所示：

```
@interface MultipleViewController ()<FirstViewControllerDelegate> 
```

并实现协议方法：

```
- (void)showDetailsScreenForItem:(id)item
{
    DetailViewController *detailController = [[DetailViewController alloc] initWithNibName:@"DetailView" bundle:nil];
    [detailController changeSubjectText:item];
    [self.navigationController pushViewController:detailController animated:YES];
} 
```

在 DetailViewController 中修改 closeDetail 方法，如下所示：

```
- (IBAction)closeDetail:(id)sender {
    NSLog(@"closeDetail");
    [self.navigationController popViewControllerAnimated:YES];
} 
```

瞧，您的 GadgetBulletinsTVController 项目详细信息被推送。您需要对要显示详细信息的其他控制器执行相同的步骤。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T10:15:49.120

而不是从窗口中删除视图，只需重新加载包含所有表视图的基本视图，使用`self.window.rootviewcontroller`

**编辑**

我通过创建 appDelegate 得到了解决方案你必须做的只是在下面描述

AppDelegate Here (MultipleAppDelegate) 的第一个 .h 和 .m 文件

在 .h 添加

```
@property (strong, nonatomic) id<UIApplicationDelegate>delegate; 
```

在 .m 中添加

```
@synthesize delegate; 
```

现在您想在哪里添加 detailView 只需按照说明在 .h 和 .m 文件中添加以下内容

在此处的 .h 文件中（GadgetBulletinsTVContoller）

```
#import "MultipleAppDelegate.h" 
```

并在接口一个这样的变量

```
MultipleAppDelegate *Mydelegate; 
```

在 .m 文件中`viewDidLoad`或`loadView`方法中

```
Mydelegate = [[UIApplication sharedApplication]delegate]; 
```

然后在加载 detailView 时执行此操作

```
navigationController = [[UINavigationController alloc] initWithRootViewController:detailController];
Mydelegate.window.rootViewController = navigationController;
[Mydelegate.window makeKeyAndVisible]; 
```

现在在 .h 文件中的 detailViewController 的 .h 和 .m 文件中

```
#import "MultipleAppDelegate.h" 
```

并在界面中

```
MultipleAppDelegate *appDelegate; 
```

在 .m 文件中`viewDidLoad`或`loadView`方法中

```
appDelegate = [[UIApplication sharedApplication]delegate]; 
```

并在关闭按钮上单击

```
//Not required
//[self.navigationController popViewControllerAnimated:NO];
appDelegate.viewController = [[MultipleViewController alloc] initWithNibName:@"MultipleViewController" bundle:nil];
appDelegate.window.rootViewController = appDelegate.viewController;
[appDelegate.window makeKeyAndVisible]; 
```

就是这样，它可以正常工作，唯一的问题是导航和显示 multipalViewController 需要 1 或 2 秒

享受编码 :) 快乐编码 :)

# php - 添加mysql值

> ID：10531210
> 
> 赞同：0
> 
> 时间：2012-05-10T09:33:43.873
> 
> 标签：php, mysql, math

我尝试做的只是添加mysql中的变量。

我认为这很简单，但事实并非如此，而且我也没有真正做到。

甚至可以从mysql添加值吗？

我敢肯定，它可能很简单，一如既往，任何指导都值得赞赏。

谢谢

```
$query = mysql_query("SELECT * FROM users WHERE ID ='$userid'");
$numrows = mysql_num_rows($query);

if($numrows ==1){
$row = mysql_fetch_assoc($query);
  $id = $row['uid'];
  $name = $row['name'];
  $angles = $row['angles'];
  $decimals = $row['decimals'];
  $multiplication = $row['multiplication'];
  $probability = $row['probability'];
      $sequences = $row['sequences'];
  $symmetry = $row['symmetry'];

 }
$sum = $sequences + $symmetry;
    print ("$sum"); 
```

解决了这个问题。查询应为 ....WHERE uid ='$userid'");！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:39:53.610

您还可以通过如下查询由数据库进行计算：

```
SELECT uid, name, angles, (sequences + symmetry) AS mysum FROM users WHERE ID ='$userid' 
```

# php - 如何将文件的属性设置为 0777？

> ID：10531212
> 
> 赞同：-4
> 
> 时间：2012-05-10T09:33:52.897
> 
> 标签：php

如何将文件的属性设置为通过 php create file 创建的 0777？

```
$myFile = "test.txt";
$fh = fopen($myFile, 'w') or die("can't open file");
$stringData = 'test';
fwrite($fh, $stringData);
fclose($fh); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T09:35:35.080

```
chmod("/somedir/somefile", 0777); 
```

根据： http: [//php.net/manual/fr/function.chmod.php](http://php.net/manual/fr/function.chmod.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T09:35:48.683

你不能。

[您有 2 种选择 - 在chmod()](http://nz.php.net/chmod)之后设置它或在之前使用[umask()](http://nz.php.net/umask)。在后一种情况下，您需要恢复它以不破坏其他代码，这依赖于原始 umask 值（如果有）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T09:35:42.130

您可以使用 chmod 保护您的文件。这是一个例子：

```
chmod($myFile, 0777); 
```

看看[`chmod`](http://de.php.net/manual/en/function.chmod.php)。

# javascript - 手动渲染动态生成的谷歌“加一”按钮

> ID：10531215
> 
> 赞同：9
> 
> 时间：2012-05-10T09:34:00.260
> 
> 标签：javascript, html, ajax, google-plus, google-plus-one

这是场景：

*   该网页没有 google+ 按钮。
*   用户单击一个按钮。
*   发送 AJAX 请求，它将一些文本和 google+ 按钮 ( `<g:plusone href="http://www.website.com"></g:plusone>`) 加载到`div`.
*   当我查看代码时，我可以看到它在那里，但它没有呈现。

我听说这可能有用： `gapi.plusone.go();`

但我不确定。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T14:51:57.293

你在正确的轨道上。`gapi.plusone.go()`是显式呈现 +1 按钮的一种方法。[这是来自官方文档](https://developers.google.com/+/plugins/+1button/#example-explicit-render)的代码片段，它说明了另一种使用`gapi.plusone.render()`.

```
<html>
  <head>
    <title>+1 Demo: Explicit render</title>
    <link rel="canonical" href="http://www.example.com" />
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js">
      {"parsetags": "explicit"}
    </script>
    <script type="text/javascript">
      function renderPlusone() {
        gapi.plusone.render("plusone-div");
      }
    </script>
  </head>
  <body>
    <a href="#" onClick="renderPlusone();">Render the +1 button</a>
    <div id="plusone-div"></div>
  </body>
</html> 
```

JavaScript API[在之前链接页面的其他地方](https://developers.google.com/+/plugins/+1button/#jsapi)有进一步的说明。

# javascript - 在jquery中完成图像滑块加载后如何重定向页面？

> ID：10531221
> 
> 赞同：1
> 
> 时间：2012-05-10T09:34:04.560
> 
> 标签：javascript, jquery, jquery-plugins

我有一个网站，在介绍 div 中有一个旋转横幅图像，在页面 div 中有主页的其余部分。我想做以下事情：

1.  在完成最后一张幻灯片并显示主页的其余部分后，我们如何隐藏包含当前旋转横幅图像的介绍 div。
2.  或者，如果用户单击跳过介绍文本，那么它也将显示主页。

当前站点： http: [//new.brandonplanning.com/home](http://new.brandonplanning.com/home)

我认为此代码需要修改

```
/*-------------Intro page slider starts-----------*/

var intervalID;

function slideSwitch() {
    var $active = $('#slideshow IMG.active');

    if ($active.length == 0) $active = $('#slideshow IMG:last');

    //var $next = $active.next().length ? $active.next()
    //    : $('#slideshow IMG:first');

    var $next;
    if ($active.next().length) {
        $next = $active.next().delay(3000);
    } else {
        clearInterval(intervalID);
        visibilityCheck();
        return;
    }

    $active.addClass('last-active');

    $next.css({ opacity: 0.0 })
        .addClass('active')
        .animate({ opacity: 1.0 }, 1000, function () {
            $active.removeClass('active last-active');
        });
}

$(function () {
    intervalID = setInterval("slideSwitch()", 6000);
});

/*-------------Intro page slider ends-----------*/

/*-------------Intro page skip starts-----------*/

$(window).load(function () {
    $(function () {
        visibilityCheck();
        $('#loader').remove();
    });

    $('.skip-intro').click(function () {
        visibilityCheck();
    });
});

function visibilityCheck() {
    $('.hidden').removeClass('hidden');

    if ($('#page').is(':hidden')) {
        $('#intro').addClass('hidden');
    } else {
        $('#page').addClass('hidden');
    }
}

/*-------------Intro page skip ends-----------*/ 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:39:36.040

> 1，我们如何在完成最后一张幻灯片后隐藏包含当前旋转横幅图像的intro div并显示主页的其余部分。

您需要检查最后一张图像是否有`.active`，然后`.delay()`在隐藏`#intro`和显示之前使用`#page`，例如：

```
if ($(.skip-intro li).last().hasClass('active')){
  $('#intro').delay(2000).addClass('.hidden').queue(function() {
    $('#page').removeClass('.hidden');
  });
} 
```

> 2，或者如果用户点击跳过介绍文本，那么它也会显示主页。

```
$('.skip-intro').click(function(){
  $('#intro').addClass('.hidden');
  $('#page').removeClass('.hidden');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:43:56.480

基本上你需要的是这样的：

## *[演示 jsBin](http://jsbin.com/uwujel/edit#javascript,html,live)*

```
$('#slider img:gt(0)').hide();

var T; // timeout
var c = 0;  // counter
var imgN = $('#slider img').length; // get the images Number

function toggler(){    // screens toggler function
  $('#intro').fadeTo(400,0).siblings('#page').fadeTo(400,1);
}

function a(){  // 'A'nimations
  if(c === imgN ){   // if the 'C'ounter reached the images in slider...
    toggler();       // toggle our screens
  }else{             // else ... do our animations.
    $('#slider img').siblings('img').stop().fadeTo(1000,0).eq(c++).stop().fadeTo(1000,1);
  }                                                        // ^^^^ here the counter 'ticks'
}

function aa(){ // 'A'uto 'A'dvance
   T=setTimeout(function(){
       a();
       aa();
   },2000);     // set here pause between slides
}
aa();

$('#skip').click(function(){  // if 'skip' is clicked...
  clearTimeout(T);                 // well...
  toggler();                       // run our screens 'toggler'
}); 
```

希望您能轻松地将其实现到您的页面中。

# android - 如何在弹出窗口显示时禁用取消

> ID：10531222
> 
> 赞同：0
> 
> 时间：2012-05-10T09:34:26.483
> 
> 标签：android, android-popupwindow

我创建了一个弹出窗口来显示菜单。我发现如果我按下键盘上的取消按钮，弹出窗口将关闭，并且*setFocusable()*只会禁用菜单等按钮，但取消按钮仍然有效。如果存在使popupwindow 对popupwindow 无效的方法，或者在按下取消按钮时自己定义操作？谢谢。

好吧，当我说取消按钮时，我的意思是返回按钮。感谢 sachy 和其他回复我的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:50:23.557

请详细说明您想要实现的目标。如果您只想禁用该按钮，您可以试试这个。

```
Button button = (Button)findViewById(R.id.button1);
button.setEnabled(false); 
```

或者你想覆盖取消按钮？然后检查一下：[后退按钮行为](http://www.androiduipatterns.com/2011/03/back-button-behavior.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:05:08.383

取消按钮是指后退按钮吗？如果是，那么您可以简单地覆盖`onKeyDown()`.

```
 @Override
  public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) {
        Log.d("back", "back button pressed");
    }
    return true; //to prevent this event from being propagated further.
} 
```

# css - 使用 css3pie 渐变时 ie7 和 ie9 中的滚动错误

> ID：10531224
> 
> 赞同：2
> 
> 时间：2012-05-10T09:34:29.027
> 
> 标签：css, internet-explorer-7, internet-explorer-9, scrollbar, css3pie

我为我的页面使用 css3pie 在 ie 浏览器中使用 css3 效果。

一切正常。但是现在我的页面上有一个带有水平滚动条的字段。

在 ie8 中一切正常。但是在ie7中我不能滚动拖动滚动条。我只能使用左右箭头。

在 ie9 中我无法滚动.. 我也无法拖动滚动条。但是如果我点击左右箭头，滚动元素会直接跳到左后方..

我使用 pie v1.0beta5

我在许多网站上都发现了这个问题，但没有适合我的解决方案..

我的页面周围有一个包装器，它有一个线性渐变背景.. 如果我删除它一切正常.. 但是使用渐变背景我无法在 ie7 和 ie9 中滚动..

有没有人有同样的问题，也许找到了解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:27:21.603

> 没关系，您似乎必须将 -pie-track-active:false 添加到所有使用 PIE 行为的祖先元素

# c# - 在 C# 中的列表列表中搜索

> ID：10531230
> 
> 赞同：0
> 
> 时间：2012-05-10T09:34:50.917
> 
> 标签：c#, list

我有一个`List<a>`包含列表 ( ) 的列表 ( `List<b>`)。b 类型列表中有一个字符串字段。我想通过搜索列表a找到列表b中匹配字符串的索引。我怎样才能做到这一点？

```
public class b
{
    string Word;
    bool Flag;
}

public class a
{
    List<b> BList = new List<b>();
    int Counter;
} 
```

我想在列表 b 中找到与字符串“Word”匹配的索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:41:47.023

此 Linq 表达式返回 BList 列表和正确找到的索引：

```
 var Result = AList.Select(p => new
        {
            BList = p.BList,
            indexes = p.BList.Select((q, i) => new
            {
                index = i,
                isMatch = q.Word == "Word"
            }
            )
            .Where(q => q.isMatch)
            .Select(q=>q.index)
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:43:53.670

那是你需要的吗？

```
var alist = GetListA();

var indexes = alist.Select((ix, a) => 
                           a.BList.SelectMany((jx, b) => 
                                              new {AIx = ix, BIx = jx, b.Word}))
                   .Where(x => x.Word == pattern)
                   .Select(x => new {x.AIx, x.BIx}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:48:07.393

我想这取决于你想要的输出 - 这会给你一个像这样的投影：

```
indexes[0] { A = A[0], Indexes = {1,5,6,7} }
indexes[1] { A = A[1], Indexes = {4,5,8} }
...

var indexes = listA
    .Select(a => new 
    { 
        A = a, 
        Indexes = a.BList
            .Select((b, idx) => b == wordToCheck ? idx : -1)
            .Where(i => i > -1)
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T09:50:11.700

这给了你所有符合你的“词”的对象：

```
from a in aList from b in a.bList where b.word.Equals("word") select b; 
```

# gis - Arcgis 解释了？

> ID：10531231
> 
> 赞同：2
> 
> 时间：2012-05-10T09:34:53.663
> 
> 标签：gis, arcgis

我想研究 ArcGis，但我无法理解它适合的地方。

我使用 Google Maps API 创建了一些带有制造商、叠加层、侦听器等的简单地图。

我最近开始研究 PostGIS，我完全理解，它通过额外的数据类型和用于绘制多边形和映射区域的函数来增强 Postgres。伟大的！

我不明白ArcGIS适合什么地方？

它有什么作用？你为什么要使用它。

我有大量的地址数据库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-12T21:31:04.490

归根结底，这取决于您是否更乐于拥有一个大型软件堆栈，其中所有东西都旨在协同工作，或者您是否更乐于做一些 SQL 和/或 Javascript 和 Python 编码（这些是开源 GIS 中的大玩家)，通常是自己拼凑而成。ESRI，ArcGIS 系列（包括桌面、服务器和基于 Web 的技术）的制造商本质上是 GIS 世界中的微软——大玩家，其产品旨在很好地相互配合，但有时有点在标准合规性或与第 3 方软件的交互方面滞后。

在开源方面，Postgis 本质上为 Postgres 提供了空间类型扩展以及许多空间功能，它实际上是各种包的混合体：提供许多空间谓词功能的 GEOS、进行坐标系转换的 Proj4j 和提供许多空间功能的 GDAL提供了很多胶水功能。最近 Postgis 添加了对栅格、3d 和拓扑函数以及长期存在的矢量函数的原生支持，这意味着可以通过将 SQL 函数链接在一起，直接在数据库级别执行极其复杂的 GIS 分析。

正如上面所建议的那样，QuantumGIS（通常称为 QGIS）为那些想要走这条路的人提供了 ArcGIS 桌面的大部分功能。Javascript 库，例如 OpenLayers 或 Leaflet（还有很多其他的）可用于可视化 Postgis 查询的结果。此外，还有诸如 Geoserver（基于 Java serlvet）之类的工具，它允许您以常见格式（如 WMS、WFS 和 WMTS）提供保存在 Postgres/Postgis 表或 ESRI shp 文件中的数据，充当客户端和服务器。

最终的决定往往既是政治性的，也是技术性的。例如，如果您为大型公用事业公司或地方政府工作，支持合同和行业规范可能会超过预算限制。如果您为一家小型初创公司工作，并且有人乐于在命令行工作，那么您可能会从开源堆栈中获得更好的性价比。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T11:17:15.827

我假设您询问的是 ESRI 的桌面 GIS 应用程序 ArcMap。该应用程序是一个极其强大的制图和分析工具，允许用户执行复杂的空间操作。ArcMap 还提供了一个图形用户界面，允许用户编辑支持模拟现实世界现象的复杂类型的几何。该应用程序还支持广泛用于遥感的栅格分析。

有关如何将 ArcGIS 与地址数据库结合使用的一些示例：

1.  您可以使用它将地址与人口普查数据进行比较，并更好地了解客户。
2.  生成具有统计意义的集群的热图。
3.  使用网络分析工具来识别最近的设施或以最有效的顺序将您路由到地址。
4.  查找您的数据属于哪些类型的特征（即市议会区、消防区、州等），并使用该信息更新您的数据。

这些只是您可以使用 ArcGIS 执行的一些操作。简而言之，该工具允许您在空间环境中查看和分析您的数据，而不是您现在似乎采用的关系方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-27T15:56:01.147

ESRI 的 ArcGIS 非常强大，并且通过他们的 ArcObjects API 拥有大量的自定义选项，以及通过他们称为插件的框架添加您自己的自定义工具和按钮命令的新方法。您甚至可以使用 Python 创建一个非常简单（代码方面）的工具，让用户单击一个按钮，例如，在地图上返回树线 50 英尺内的所有电线杆的选择。然后，他们可以将这组极点特征导出为表格数据报告，供修剪树木的工作人员访问每个极点，看看他们是否需要修剪植被。您还可以使用他们的 ArcGIS Runtime 构建一个完全自定义的工具，该工具从 USB 拇指驱动器运行，零安装，仅包含您创建的部分和片段，如地图、目录、以及一个自定义工具栏，其中仅包含该应用程序所需的特定按钮和工具。我见过一个用这种方式编写的燃气设施检查应用程序，它只有地图和三个按钮供他们在 iPad 或 Android 平板电脑上使用。ArcGIS 的选项几乎是无穷无尽的，并且它们会不断更新。

我的日常工作是定制 ArcGIS 以适应天然气、水和电力公司的需求，以匹配他们的业务工作流程。自 2004 年以来，我一直在使用 ArcGIS。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T21:48:09.123

如果您了解 google maps API 和 postGIS，那么您真的不需要 ArcGIS。下载 QGIS 并将其与 POSTGIS [http://www.qgis.org/](http://www.qgis.org/)一起使用 ARCGIS 只是不必要的，这就是为什么它对您没有意义（而且理所当然）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-22T22:17:30.447

简单回答：它允许您使用 MAPS 分析数据并将其存储在数据库中，其中所述数据在表面或 3D 空间中具有某种“位置”属性。

下面是一个简单的示例：“归还史密斯县内距离学校 1000 英尺以内的所有地块，并在地图上以红色显示。”

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-31T14:17:11.947

如果我必须用一句话来回答，那就是：如果您只想显示地图上某物的位置（以及一些基本数据），请使用 Google Maps API，但如果您想分析、查询和理解您的空间数据使用 ArcGIS。

ArcGIS 是一个平台，包含桌面、服务器、门户（空间 CMS），支持各种类型的地理数据库。ArcGIS for Desktop 用于强大的空间分析，它包括 700 多种不同的工具，支持强大的空间和 alpha 数值分析。当我们谈论空间分析时，我们可以谈论不同的空间叠加（简单的例子：狼和狐狸住在哪里），邻近分析（工厂到客户的距离；石油钻探周围的保护区（缓冲区））和空间统计（在空间（和时间）、映射集群（热点/冷点）以及由于数据库位于每个重要 GIS 的背景中，您可以使用 SQL 查询您的字母数字（和空间）数据以做出更好的决策。

制图也是 ArcGIS Desktop 软件的功能——我们的大脑可以更好地理解信息，当它们被可视化时，您也可以并且应该可视化通过分析获得的结果。请记住，地图只是地理数据库（或 shapefile）中数据的可视化。

ArcGIS Desktop 还用于数据输入 - 具有“抬头”编辑功能，例如用于创建带有属性的矢量的原始照片图像。

地理数据库管理也是 ArcGIS 的一部分，地理数据库从文件地理数据库到使用 SQL Server、Oracle、DB2 和其他 RDBMS 系统的企业级地理数据库不等。单用户文件地理数据库支持一个并发编辑器并且没有存储限制，而企业数据库提供多用户编辑、版本控制、归档和备份方案。个人地理数据库是使用 Microsoft Access 存储空间数据的单用户地理数据库。

ArcGIS for Server 提供不同格式的空间服务，其中包含空间数据（地图）以及字母数字信息（如果格式支持）。可以发布的 ArcGIS for Server 服务类型有：制图、WCS、WMS、要素访问、Schematics、移动数据访问、网络分析、KML、WFS……ArcGIS for Server 服务是使用 ArcMap 创作的，与 Server 一起提供服务（当然）以及它们的 URL 链接供从头开始编写代码的开发人员使用，或在 Portal for ArcGIS Web 应用程序模板中使用，如果需要，开发人员可以自定义这些模板，或者 Flex Esri 查看器的其他 Silverlight。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-24T15:08:56.087

我想说的是，如果您已经对 PostGIS 感到满意，那么您应该适合任何使用矢量的工作。如果您正在使用栅格数据，那么我认为这将是 ArcGIS 适合的地方。在 ArcGIS 中，您可以在栅格上运行不同类型的统计数据和过滤器，而我认为 PostGIS 不能，但我相信最终会被添加。

还有一件事，如果您需要自动化 PostGIS 工作，我建议您使用 Python 和 psycopg2 库。

# ios - iOS：在 NSFetchResultsController 执行获取时呈现一个旋转的轮子

> ID：10531233
> 
> 赞同：0
> 
> 时间：2012-05-10T09:35:14.733
> 
> 标签：ios, nsfetchedresultscontroller

我正在使用 a`NSFetchedResultsController`来填充`UITableView`. 提取需要一些时间，所以我想在提取过程中向用户展示一个纺车。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:40:32.283

您应该在主线程中启动微调器，并为辅助线程推送“繁重的工作”。工作完成后，停止旋转器。您可以通过以下方式实现：

```
 // Start the spinning here.
    [mySpinner startAnimating];
    // Declare the queue
    dispatch_queue_t workingQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    // it's not, so we will start a background process to calculate it and not block the UI
    dispatch_async(workingQueue, 
                   ^{
                      // Some heavy work here.

                       dispatch_async(dispatch_get_main_queue(), ^{ 
                          // stop the spinner here
                          [mySpinner stopAnimating];
                       });
                   }); 
```

在主线程中执行以下操作不会使您完成您想要的：

```
Start Spinner => Heavy work => Stop Spinner 
```

当繁重的工作开始时，它会阻塞你的 UI 线程，所以你实际上不会看到`UIActivityMonitor`动画。

最后，我建议您将[其](https://github.com/jdg/MBProgressHUD)用作微调器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:39:45.993

你有几种方法可以做到这一点：

如果`UIBarItem`您使用 UINavigationBar 并将 customView 设置为`UIActivityIndicator`在函数的开头并在结尾隐藏它，则有一个。

在视图中心创建一个“模态”视图`UIActivityIndicator`，并将此子视图添加到您的表格视图中，并在函数的末尾将其删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:40:30.527

正式地，您可以使用 UIActivityIndi​​catorView 来展示轮子，并以一些好的和精致的方式使用 MBHoods 从[这里](https://github.com/AalokParikh/MBProgressHUD)[下载](https://github.com/AalokParikh/MBProgressHUD)演示应用程序

# performance - opening directory through IndexReader or IndexSearcher?in lucene

> ID：10531239
> 
> 赞同：3
> 
> 时间：2012-05-10T09:35:30.177
> 
> 标签：performance, lucene

what is the difference between these two codes? based on performance oriented and documentation oriented

using directory directly in `IndexSearcher`

```
Analyzer anal = new StandardAnalyzer(Version.LUCENE_30);
QueryParser parser = new QueryParser(Version.LUCENE_30, "", anal);
Query query = parser.parse(queryStr);
Searcher searcher = new IndexSearcher(NIOFSDirectory.open(new File(indexDir))); 
```

using directory in `IndexReader` then opening searcher using that reader

```
Analyzer anal = new StandardAnalyzer(Version.LUCENE_30);
QueryParser parser = new QueryParser(Version.LUCENE_30, "", anal);
Query query = parser.parse(queryStr);
IndexReader ir = IndexReader.open(NIOFSDirectory.open(new File(indexDir)), false);
IndexSearcher searcherNew = new IndexSearcher(ir); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T12:36:31.943

IndexSearcher is a lightweight wrapper around an IndexReader. Even if you use the IndexSearcher constructor, [an IndexReader will be open under the hoods](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.lucene/lucene-core/3.5.0/org/apache/lucene/search/IndexSearcher.java#IndexSearcher.%3Cinit%3E%28org.apache.lucene.store.Directory%29), so you can expect the same performance from your two snippets.

Altough it can be convenient, it is a bad practice to open directly an IndexSearcher over a Directory. Besides, this constructor is deprecated since Lucene 3.5.

# windows-phone-7 - 基于地址的 Bing 地图图钉定位

> ID：10531249
> 
> 赞同：1
> 
> 时间：2012-05-10T09:35:55.357
> 
> 标签：windows-phone-7

如何根据地址 [可能包含城市、街道等] 为位置创建图钉。我不能使用密码，因为它不是各国的标准。请任何人指导我如何去做。

感谢 Murali NM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:06:08.967

您必须从 Bing 调用[基于 REST 的 Web 服务](http://msdn.microsoft.com/en-us/library/ff701714.aspx)，指示整个地址。此类服务将返回您将用于创建图钉的 GeoCoordinate（如果找到）。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:09:01.163

您只能根据纬度和经度（地理坐标）向地图添加内容。无法通过地址将内容添加到 bing 地图中。

您可以从 bing 或 google 调用服务以检索特定地址的地理坐标。

*   [谷歌 API](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)
*   [必应](http://msdn.microsoft.com/en-us/library/ff701714.aspx)

# java - XA 池中的 ClassCastException

> ID：10531250
> 
> 赞同：1
> 
> 时间：2012-05-10T09:36:04.063
> 
> 标签：java, jdbc, tomcat6, xa

我使用 Tomcat 6.0、mybatis 和 Oracle XAPool 开发应用程序。当我运行应用程序时，会生成以下堆栈跟踪。

```
2012-05-10 16:19:16,328 ERROR [jatis.avantrade.foundation.model.dao.DAOHelper] [t] -  datasource jndi : org.enhydra.jdbc.pool.StandardXAPoolDataSource
2012-05-10 16:19:16,328 ERROR [jatis.avantrade.foundation.model.dao.DAOHelper] [t] -   org.enhydra.jdbc.pool.StandardXAPoolDataSource cannot be cast to org.enhydra.jdbc.pool.StandardXAPoolDataSource
java.lang.ClassCastException: org.enhydra.jdbc.pool.StandardXAPoolDataSource cannot be cast to org.enhydra.jdbc.pool.StandardXAPoolDataSource
at jatis.avantrade.foundation.model.dao.DAOHelper.getSession(DAOHelper.java:73) 
```

下面是获取数据库会话时的 DAOHelper 代码。当我打印数据源时，它显示它的类型`StandardXAPoolDataSource`。奇怪的行为是堆栈跟踪显示`org.enhydra.jdbc.pool.StandardXAPoolDataSource`不能强制转换为`org.enhydra.jdbc.pool.StandardXAPoolDataSource`.

同一个类不能投射到自己身上吗？

```
protected SqlSession getSession() {SqlSession session = sessionLocal.get();
if (session == null) {
 ConfigurationManager configurationManager = ConfigurationManagerSupport   .getConfigurationManager(5000);
RootContextConfiguration contextConfiguration = (RootContextConfiguration) configurationManager
                .getContextConfiguration(RootContextConfiguration.CONTEXT);

        session = contextConfiguration.getMyBatisSession(MYBATIS_ID);
        log.error("data source : "
                + session.getConfiguration().getEnvironment()
                        .getDataSource());
        log.error("connection : " + session.getConnection());

        sessionLocal.set(session);
        log.error("factory : "
                + session.getConfiguration().getEnvironment()
                        .getTransactionFactory());

        String DATASOURCE_CONTEXT = "java:comp/env/jdbc/avantrade";

        Connection result = null;
        try {
            Context initialContext = new InitialContext();
            DataSource datasource = (DataSource) initialContext
                    .lookup(DATASOURCE_CONTEXT);
            log.error("datasource jndi : " + datasource);
            log.error("datasource jndi : " + datasource.getClass().getName());
            log.error("datasource jndi name : " + ((StandardXAPoolDataSource) datasource).getDataSourceName());
            log.error("datasource jndi connection : " + ((StandardXAPoolDataSource) datasource).getConnection());
            {
                result = datasource.getConnection();
                log.error("connection jndi : " + result);
                log.error("connection jndi : " + result.getClass().getName());

            }
        } catch (NamingException ex) {
            log.error(ex.getMessage(), ex);
        } catch (SQLException ex) {
            log.error(ex.getMessage(), ex);
        } catch (Exception ex) {
            log.error(ex.getMessage(), ex);
        }

    }

    return session;

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:02:09.577

> 同一个类不能投射到自己身上吗？

这通常是由两个不同的类加载器加载同一类的两个副本引起的。最常见的根本原因是应用服务器有一个副本，而您的应用程序有另一个。

检查 Tomcat 自己的`lib`目录和您的应用程序`lib`目录所保存的 JAR。你应该只有一份。

# java - 为什么 JSONObject 不对我的类进行编码？

> ID：10531252
> 
> 赞同：0
> 
> 时间：2012-05-10T09:36:08.420
> 
> 标签：java, json, encoding, json-simple

```
import org.json.simple.JSONArray;
import org.json.simple.JSONAware;
import org.json.simple.JSONObject;
import org.json.simple.JSONValue;

public class JsonTest implements JSONAware {
private final int x, y;

public JsonTest(int x, int y) {
    this.x = x;
    this.y = y;
}

@Override
public String toJSONString() {
    JSONArray arr = new JSONArray();
    arr.add(this.x);
    arr.add(this.y);
    return arr.toString();
}

public static void main(String[] args) {
    JsonTest jtest = new JsonTest(4, 5);
    String test1 = JSONValue.toJSONString(jtest);
    System.out.println(test1); //this works as expected
    JSONObject obj = new JSONObject();
    obj.put(jtest, "42");
    System.out.println(obj); //this doesn't
}
} 
```

给出作为输出：

> [4,5]
> 
> {"it.integrasistemi.scegliInPianta.etc.JsonTest@3cb89838":"42"}

代替：

> [4,5]
> 
> {[4,5]:"42"}

我错过了什么？

我的参考：[http ://code.google.com/p/json-simple/wiki/EncodingExamples#Example_6-1_-_Customize_JSON_outputs](http://code.google.com/p/json-simple/wiki/EncodingExamples#Example_6-1_-_Customize_JSON_outputs)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:39:00.663

那是因为`JSonTest`不覆盖该`toString()`方法。

将以下代码添加到`JSonTest`类中：

```
@Override
public String toString() {
    return toJSONString(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:41:02.620

因为只有 String 可以作为 JSON 对象的键。所以你的 jtest 对象被转换为一个字符串。

# php - 在foreach中使用引用（&）在输出数组中添加“&”？这是一个错误吗

> ID：10531253
> 
> 赞同：3
> 
> 时间：2012-05-10T09:36:20.557
> 
> 标签：php, multidimensional-array, foreach, pass-by-reference, array-splice

我正在使用 PHP 5.3.5，但我遇到了一个错误。我有一个数组

```
 $input = array( 
                0=>array(
                        'a'=>'one0',
                        'b'=>'two0',
                        'c'=>'three0',
                        'd'=>'four0',
                        'e'=>'five0'
                        ),
                1=>array(
                        'a'=>'one1',
                        'b'=>'two1',
                        'c'=>'three1',
                        'd'=>'four1',
                        'e'=>'five1'
                        )
            ); 
```

我使用foreach 中的 (value by reference)[`array_splice`](http://www.php.net/manual/en/function.array-splice.php)从每个数组中删除初始两个值`&`

```
foreach ($input as $bk => &$bv) {
         $op[]=array_splice($bv,0,2);        
} 
```

现在，当我看到`$input`then 它`&`在第二个数组之前添加了一个。

`var_dump($input);`显示了这个

```
array
  0 => 
    array
      'c' => string 'three0' (length=6)
      'd' => string 'four0' (length=5)
      'e' => string 'five0' (length=5)
  1 => & <====================================From where this `&` comes?
    array
      'c' => string 'three1' (length=6)
      'd' => string 'four1' (length=5)
      'e' => string 'five1' (length=5) 
```

来自哪里，它`&`是如何产生这样的数组的？它有效吗？

如果我在 foreach 中删除`&`，它不会给我想要的数组。难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:20:12.497

这很违反直觉，但实际上并不是一个错误。在循环中使用引用时，建议您在循环之后立即取消设置引用：

```
foreach ($input as $bk => &$bv) {
    $op[]=array_splice($bv,0,2);        
}
unset($bv); 
```

# java - Play framework 1.2.x @MinSize 自定义验证消息

> ID：10531259
> 
> 赞同：0
> 
> 时间：2012-05-10T09:36:51.277
> 
> 标签：java, validation, playframework

我知道我可以为 Play 模型层中的 @Required 注释做一个自定义验证消息，如下所示：

```
@Required(message = "customError.required")
public String name; 
```

但是我尝试对 @MinSize 注释做同样的事情......

```
@MinSize(8)(message = "customError.passwordSoShort")
public String password; 
```

...并收到此编译错误：

```
The file /app/models/User.java could not be compiled. Error raised is : Syntax error on token ")", ? expected
@MinSize(8)↓(message = "customError.passwordSoShort")
public String password; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:41:35.147

您的代码存在语法错误。

尝试：

```
@MinSize(value=8, message = "customError.passwordSoShort")
public String password; 
```

# web-services - 部署在 glassfish 中的 web 服务无法从 Internet 访问，只能在本地访问

> ID：10531261
> 
> 赞同：1
> 
> 时间：2012-05-10T09:36:57.900
> 
> 标签：web-services, glassfish

我在 glassfish 上部署了一个网络服务，我可以在服务器中（本地）访问它。但不能通过互联网调用该服务。服务器是亚马逊服务器。它也有一个弹性IP。请解释我如何配置它，以便我可以从互联网访问该服务。谢谢你。

# java - 基于 Java 的 GUI 自动化（不限于基于 Java 的 GUI，如 Swing）

> ID：10531262
> 
> 赞同：7
> 
> 时间：2012-05-10T09:37:00.567
> 
> 标签：java, testing, open-source, ui-automation, white-framework

是否有任何用 Java 编写的开源工具/框架可用于自动化所有 Windows 应用程序（不像 Abbot 或 FEST 自动化基于 Java 的 GUI 应用程序）。

我听说过类似于 .Net Languages 的[WHITE 。](http://white.codeplex.com/)是否有基于 Java 的替代方案或 Java 框架可以使用 WHITE 或 UIAutomation 框架（通过 JNI 或其他方式）？

似乎有许多基于 Java 的 Web 自动化和测试工具，如 Selenium、Sahi 等，但对于 GUI 自动化，我发现只有[jWinAuto](http://jwinauto.sourceforge.net/)是 AutoItX 的包装器。

Java 不能用于 GUI 自动化吗？除了 Java Robot API 之外还有其他东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:08:09.163

Java 本身并不支持跨平台原生 GUI 自动化（您需要在其中查找和理解原生组件）。我的意思是一种“编写一次，到处运行”的方式，超越了 Robot 的明显非常小的 API。

这样的项目可以用 Java 完成吗？我敢肯定，但是会涉及到很多 JNI 代码，以至于您会想知道 Java 带来了什么。

# python - 为什么list在python中包含超过n个元素？

> ID：10531264
> 
> 赞同：0
> 
> 时间：2012-05-10T09:37:12.953
> 
> 标签：python, list

我是 Python 新手。我想在列表中输入 10 个元素。下面的程序将 10 个元素附加到每个列表中。但是下面的程序在列表中打印 11 个对象，为什么？我从[http://www.learnpython.org/page/Basic%20Operators](http://www.learnpython.org/page/Basic%20Operators)链接获得了这个程序。我想知道`x = object()`，这是什么意思？

```
x = object()
y = object()
i = 0
# change this code
x_list = [x]
y_list = [y]
while(i < 10):
    x_list.append((10))
    y_list.append(11)
    i = i + 1
#x_list = [x]
#y_list = [y]
big_list = x_list + y_list

print "x_list contains %d objects" % len(x_list) # prints 11 objects, #Why?
print "y_list contains %d objects" % len(y_list) # prints 11 objects, #Why?
print "big_list contains %d objects" % len(big_list)
print x_list.count(10)
print y_list.count(11)
    print big_list.count(10)
# testing code
if x_list.count(x) == 10 and y_list.count(y) == 10:
    print "Almost there..."
if big_list.count(x) == 10 and big_list.count(y) == 10:
    print "Great!" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T09:40:42.913

`x_list = [x]`=> 1 个对象。 `while(i < 10): x_list.append((10))`=> 10 个对象（0 到 9）所以 11 是完全正常的。你应该设置`x_list = []`（空列表）没有这个第一个元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T09:56:12.290

learnpython.org[基本运算符页面](http://www.learnpython.org/page/Basic%20Operators)提供了一些在不同上下文（包括列表）中使用算术运算符的示例。基于快速阅读该页面中的教程，页面作者所追求的答案可能是：

```
x_list = [x] * 10
y_list = [y] * 10
big_list = x_list + y_list 
```

这将创建一个包含 10 x:s 的列表。

您正在使用循环来执行此操作，这是一种更灵活的方式。使用循环填充列表的更 Pythonic 方式是例如使用列表推导：

```
x_list = [x for i in xrange(10)] 
```

或使用`for`循环，那么您不必自己跟踪索引：

```
for i in xrange(10):
    x_list.append(x) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T11:25:40.423

> 下面的程序将 10 个元素附加到每个列表中。但是下面的程序在列表中打印 11 个对象，为什么？

因为在您开始追加之前，列表中有 1 个元素。该列表`[x]`包含 1 个元素，`x`。1 + 10 = 11。

> 我想知道x = object()，这是什么意思？

它的意思正是它所说的：“x 应该是调用结果的名称`object`”。`object`是一个类，所以调用它会创建一个实例。实例`object`正是它听起来的样子——只是一个对象，没有什么有趣的地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T09:41:43.140

`object()`只是生成类的一个新实例`object`。您首先将此元素插入到 中`x_list`，然后再添加 10 个元素

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T09:40:13.860

x_list 包含 X 加上 10 乘以 10 = 11...

y_list - 相同。

当您键入时，`x_list = [x]`这意味着列表被初始化为仅包含其中的列表`x`。

# php - MySQL 数据库：高性能随机查找

> ID：10531265
> 
> 赞同：0
> 
> 时间：2012-05-10T09:37:19.483
> 
> 标签：php, mysql, performance, scalability

我正在设计一个高性能可扩展数据库的后端，该数据库需要非常快速地选择某些类别中的随机行。概括地说，有一个巨大的行表，每行都有一个“类别”字段，然后可能有 1000 万行，其中存在多达 500 个不同的类别。

我在选择这些时提高性能的第一个想法是创建一个单独的查找表，仅按类别索引，以便伪代码类似于：

*   生成介于 0 和 lookup_table 中类别为“example”的行数之间的随机数

*   从查找表中选择行 WHERE category='example' LIMIT random_number,1

这将使用索引生成匹配行的行数，然后随机选择一个并将其取出。事实证明，在每个类别大约 20,000 行之后，挑选行需要 0.02 秒以上，这对于同时进行许多类似操作并不理想。

我的第二个想法和我现在可以运行的是一个单独的数据库或一组查找表，因为一旦我们扩展，数据库就可以进行分片了，每个类别都有一个表。然后随机查找将接近即时，因为它们可以在主键上以表计数中的随机数执行。

如果这里有类似经历的任何巫师对此有任何想法可以分享，或者如果我缺少一个可以提供帮助的功能，我将不胜感激。我研究了将表划分为 500 个奇怪的类别，但它似乎对这种情况没有多大用处。

谢谢！

**编辑**另一个很大程度上影响设计的考虑是每个项目可能有多个类别，并且需要能够被其中任何一个随机选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:52:43.263

与其使用 LIMIT，不如`rnd`在查找表中添加一个浮点类型的新列。在 (category, rnd) 上创建一个索引并用`UPDATE table SET rnd = RAND()`. 然后使用：

```
SET $rndValue = RAND();
SELECT id FROM lookup_table WHERE category = 'example' AND rnd < @rndValue ORDER BY `rnd` DESC LIMIT 1; 
```

有效地找到随机行。您可能希望将其置于循环中，因为如果 @rndValue 最终为 0，它将找不到任何行（或者如果该类别中没有对象）。

# mercurial - hg 通过 ssh 在本地 com 后面？

> ID：10531266
> 
> 赞同：0
> 
> 时间：2012-05-10T09:37:40.380
> 
> 标签：mercurial, ssh, repository, firewall

我在本地 com 上，无法从外部网络访问。但是，我可以通过 SSH 连接到远程服务器并通过 SFTP 进行传输。

我尝试按照以下说明从本地 repo 到远程进行 hg 克隆：[How to clone repository to a remote server/repository with Mercurial](https://stackoverflow.com/questions/2963040/how-to-clone-repository-to-a-remote-server-repository-with-mercurial)

它确实在远程服务器上创建了一个存储库，但是那里没有文件。
我试着在遥控器上做 hg pull 它说`abort: repository default not found!`

有什么方法可以让 hg 通过 SSH 与防火墙后面的 com 一起工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:32:40.967

您可以通过 ssh 访问的任何机器，您都可以克隆或从中提取和克隆或推送到。Mercurial 没有施加额外的限制，所以如果你能得到一个外壳，你就可以进行运输。

我的猜测是您刚刚搞砸了您的 URL 语法，但除非您提供输入和输出的*全文*，否则我们无能为力。一般来说，这就是您需要做的所有事情：

在可以访问但无法从外部访问的本地计算机上，并且当前工作目录设置为本地存储库的**父级。**

```
hg clone mylocalrepository ssh://you@remoteservername//absolute/path/on/remote/server 
```

这将获取您的本地存储库（此处命名为）并在您通常能够对其进行 ssh （并获得真正的 shell）`mylocalrepository`的服务器（此处命名为）上创建一个克隆。`remoteservername`请注意，有两次双**斜线**。这需要给出一个绝对路径——否则它是相对于你在该机器上的主目录的。

如果这对您不起作用，请*准确*提供您正在运行的命令和您得到的输出以及在该远程机器上获取外壳的示例。

# java - 我在从 DB SQLite 向 Spinner 中插入数据时遇到问题

> ID：10531269
> 
> 赞同：0
> 
> 时间：2012-05-10T09:37:52.330
> 
> 标签：java, android

我创建了一个 SQLite 数据库，我想在 Spinner 中插入一个列数据。我在下面写了这段代码，但它不起作用..有什么问题？

这是代码：

```
public class RemoveWorkflow2 extends Activity {

private EditText nameEditText;
private EditText classEditText;
//private EditText idEditText;
//private int mSpinnerWF;
Spinner spin;
WorkflowChoice wf = new WorkflowChoice();

MyDatabase mDB;

//MyDatabase mDB = wf.getDb();

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.remove_wf2);

    mDB = new MyDatabase(getApplicationContext()); 
    spin = (Spinner)findViewById(R.id.wf_spinner);

    fillSpinner(spin);

    Button btn = (Button)findViewById(R.id.button11);
    btn.setText("Rimuovi");
    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

        }
    });
    /*
    Spinner spin = (Spinner)findViewById(R.id.wf_spinner);
    Cursor cur = mDB.fetchWfs();
    startManagingCursor(cur);

    String[] from = new String[] { WfMetaData.WF_NAME_KEY };
    int[] to = new int[] { android.R.id.text1 };
    SimpleCursorAdapter spinAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, cur, from, to);
    spinAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spin.setAdapter(spinAdapter);

    spin.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
            Cursor c = (Cursor)parent.getItemAtPosition(pos);
            mSpinnerWF = c.getInt(c.getColumnIndexOrThrow(WfMetaData.WF_NAME_KEY));
        }
        @Override
            public void onNothingSelected(AdapterView<?> parent) {
        }
    });*/

}

private void fillSpinner(Spinner s){

    Cursor c = mDB.fetchWfs();
    startManagingCursor(c);

    // create an array to specify which fields we want to display
    String[] from = new String[]{WfMetaData.WF_NAME_KEY};
    // create an array of the display item we want to bind our data to
    int[] to = new int[]{android.R.id.text1};
    // create simple cursor adapter
    SimpleCursorAdapter adapter =
      new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, c, from, to );
    adapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );
    // get reference to our spinner
    s.setAdapter(adapter);
    } 
```

这是另一个 MyDatabase：

```
 public class MyDatabase {  

    SQLiteDatabase mDb;
    DbHelper mDbHelper;
    Context mContext;
    private static final String DEBUG_TAG = "WFListDatabase";
    private static final String DB_NAME="WFListdb";//nome del db
    private static final int DB_VERSION=1; //numero di versione del nostro db

    public MyDatabase(Context ctx){
        mContext = ctx;
        mDbHelper = new DbHelper(ctx, DB_NAME, null, DB_VERSION);   //quando istanziamo questa classe, istanziamo anche l'helper (vedi sotto)     
    }

   public void open(){  //il database su cui agiamo è leggibile/scrivibile
            mDb=mDbHelper.getWritableDatabase();

    }

    public void close(){ //chiudiamo il database su cui agiamo
            mDb.close();
    }

    public void insertWf(String name,String cls){ //metodo per inserire i dati
            ContentValues cv=new ContentValues();
            cv.put(WfMetaData.WF_NAME_KEY, name);
            cv.put(WfMetaData.WF_CLASS_KEY, cls);
            mDb.insert(WfMetaData.WF_TABLE, null, cv);
    }

    public Cursor fetchAllWfs(){ //metodo per fare la query di tutti i dati
        return mDb.query(WfMetaData.WF_TABLE, new String[]{WfMetaData.WF_NAME_KEY, WfMetaData.WF_CLASS_KEY},null,null,null,null,null);               
    }

    static class WfMetaData {  // i metadati della tabella, accessibili ovunque
    static final String WF_TABLE = "wfs";
    static final String ID = "_id";
    static final String WF_NAME_KEY = "name";
    static final String WF_CLASS_KEY = "class";
    }

    private static final String WF_TABLE_CREATE = "CREATE TABLE IF NOT EXISTS "  //codice sql di creazione della tabella
                    + WfMetaData.WF_TABLE + " (" 
                    + WfMetaData.ID+ " integer primary key autoincrement, "
                    + WfMetaData.WF_NAME_KEY + " text not null, "
                    + WfMetaData.WF_CLASS_KEY + " text not null);";

    public Cursor fetchWfs(){ //metodo per fare la query di tutti i dati
        return mDb.query(WfMetaData.WF_TABLE, null,null,null,null,null,null);               
}

    public void delete_byName(String n){
     mDb.delete(WfMetaData.WF_TABLE, WfMetaData.WF_NAME_KEY + "='" +n + "'", null);
     //mDb.delete(WfMetaData.WF_TABLE, WfMetaData.WF_NAME_KEY + "=?", new String[] { n });

    CharSequence text = "Il Workflow "+ n +" è stato rimosso con successo!";
    int duration = Toast.LENGTH_SHORT;

    Toast toast = Toast.makeText(mContext, text, duration);
    toast.show();
    }

    private class DbHelper extends SQLiteOpenHelper { //classe che ci aiuta nella creazione del db

        public DbHelper(Context context, String name, CursorFactory factory,int version) {
            super(context, name, factory, version);
        }

        @Override
        public void onCreate(SQLiteDatabase _db) { //solo quando il db viene creato, creiamo la tabella
            _db.execSQL(WF_TABLE_CREATE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase _db, int oldVersion, int newVersion) {
            Log.w(DEBUG_TAG, "Upgrading database. Existing contents will be lost. ["
                    + oldVersion + "]->[" + newVersion + "]");
            _db.execSQL("DROP TABLE IF EXISTS " + WF_TABLE_CREATE);
            onCreate(_db);
        }       

    }

    public boolean isEmpty(){
        boolean isEmpty = true;
        Cursor cursor = mDb.query(WfMetaData.WF_TABLE, new String[] { WfMetaData.WF_NAME_KEY }, null, null, null, null, null);
        if (cursor != null && cursor.getCount() > 0)
        {
           isEmpty = false;
        }
        return isEmpty;
    }
} 
```

这是xml文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView10"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Scegli il workflow da eliminare: "
        android:gravity="center" />

    <Spinner
        android:id="@+id/wf_spinner"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <Button
        android:id="@+id/button11"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:text="Button" />

</LinearLayout> 
```

还有带有 NullPointerException 的 Logcat ..

```
05-10 11:48:04.475: E/AndroidRuntime(24650):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1696)
05-10 11:48:04.475: E/AndroidRuntime(24650):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1721)
05-10 11:48:04.475: E/AndroidRuntime(24650):    at android.app.ActivityThread.access$1500(ActivityThread.java:124)
05-10 11:48:04.475: E/AndroidRuntime(24650):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:968)
05-10 11:48:04.475: E/AndroidRuntime(24650):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-10 11:48:04.475: E/AndroidRuntime(24650):    at android.os.Looper.loop(Looper.java:130)
05-10 11:48:04.475: E/AndroidRuntime(24650):    at android.app.ActivityThread.main(ActivityThread.java:3844)
05-10 11:48:04.475: E/AndroidRuntime(24650):    at java.lang.reflect.Method.invokeNative(Native Method)
05-10 11:48:04.475: E/AndroidRuntime(24650):    at java.lang.reflect.Method.invoke(Method.java:507)
05-10 11:48:04.475: E/AndroidRuntime(24650):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-10 11:48:04.475: E/AndroidRuntime(24650):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-10 11:48:04.475: E/AndroidRuntime(24650):    at dalvik.system.NativeStart.main(Native Method)
05-10 11:48:04.475: E/AndroidRuntime(24650): Caused by: java.lang.NullPointerException
05-10 11:48:04.475: E/AndroidRuntime(24650):    at com.tilab.wade.interactivity.android.client.RemoveWorkflow2.fillSpinner(RemoveWorkflow2.java:82)
05-10 11:48:04.475: E/AndroidRuntime(24650):    at com.tilab.wade.interactivity.android.client.RemoveWorkflow2.onCreate(RemoveWorkflow2.java:44)
05-10 11:48:04.475: E/AndroidRuntime(24650):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-10 11:48:04.475: E/AndroidRuntime(24650):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1660)
05-10 11:48:04.475: E/AndroidRuntime(24650):    ... 11 more
05-10 11:48:04.485: W/ActivityManager(1610):   Force finishing activity com.tilab.wade.interactivity.android.client/.RemoveWorkflow2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:58:32.750

```
MyDatabase mDB = new MyDatabase(getApplicationContext()); 
```

您实例化一个隐藏全局变量的局部变量，因此全局 mDB 为空。

`mDB = new MyDatabase(getApplicationContext());`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:59:08.467

您在 onCreate 中初始化了一个局部变量 mDb，并且可能在 fillSpinner 中使用了一个全局变量。纠正它并检查它是否有效

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-10T09:50:53.200

看来你没有打开数据库。

# silverlight - 如何仅为 Silverlight DataGrid 中的列标题显示上下文菜单？

> ID：10531270
> 
> 赞同：1
> 
> 时间：2012-05-10T09:37:52.877
> 
> 标签：silverlight, xaml, datagrid

在 Silverlight DataGrid 中，我想在用户右键单击其中一个列标题或列标题行中的其他位置时显示上下文菜单。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:40:12.453

这是一个将为您执行此操作的行为：

```
public class ColumnHeaderContextMenu : Behavior<DataGrid>
{
    public static readonly DependencyProperty ContextMenuProperty =
        DependencyProperty.Register("ContextMenu", typeof (ContextMenu), typeof (ColumnHeaderContextMenu), new PropertyMetadata(default(ContextMenu)));

    public ContextMenu ContextMenu
    {
        get { return (ContextMenu) GetValue(ContextMenuProperty); }
        set { SetValue(ContextMenuProperty, value); }
    }

    protected override void OnAttached()
    {
        base.OnAttached();

        AssociatedObject.Loaded += HandleLoaded;
        AssociatedObject.Unloaded += HandleUnloaded;
    }

    private void HandleUnloaded(object sender, RoutedEventArgs e)
    {
        if (ContextMenu != null)
        {
            ContextMenu.Owner = null;
        }
    }

    private void HandleLoaded(object sender, RoutedEventArgs e)
    {
        var columnHeadersPresenter = AssociatedObject.GetVisualDescendants().OfType<DataGridColumnHeadersPresenter>().FirstOrDefault();

        if (ContextMenu != null)
        {
            ContextMenu.Owner = columnHeadersPresenter;
        }
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();

        AssociatedObject.Loaded -= HandleLoaded;
        AssociatedObject.Unloaded -= HandleUnloaded;
    }
} 
```

像这样使用它：

```
<sdk:DataGrid>
 <i:Interaction.Behaviors>
    <Behaviors:ColumnHeaderContextMenu>
        <Behaviors:ColumnHeaderContextMenu.ContextMenu>
            <Controls:ContextMenu>
                <Controls:MenuItem Header="Choose Columns" Command="{Binding EditColumns}"/>
            </Controls:ContextMenu>
        </Behaviors:ColumnHeaderContextMenu.ContextMenu>
    </Behaviors:ColumnHeaderContextMenu>
 </i:Interaction.Behaviors>
</sdk:DataGrid> 
```

# eclipse - 将 Git 存储库保留在 Eclipse 工作区内部还是外部更好？

> ID：10531272
> 
> 赞同：45
> 
> 时间：2012-05-10T09:37:57.743
> 
> 标签：eclipse, git, egit

我是开始迁移到 Git 的典型 Eclipse/Subversion 用户。我研究了 git 的基本概念，并决定最初坚持每个存储库一个项目的方法，以保持简单。不过，在决定将每个项目的存储库放置在哪里时，我仍然遇到了麻烦。

我花了很多时间来查看[这个问题](https://stackoverflow.com/questions/7906045/git-eclipse-workflow)的答案，尽管我相信那个问题的作者假设你只能使用 Eclipse 来管理存储库，如果存储库位于 Eclipse 工作区中，当然，不对。

然而，这个问题最让我印象深刻的是，除了一个答案（包括接受的答案）之外，所有答案都建议将存储库保留在 Eclipse 工作区中，而只有一个答案指出[EGit 用户指南](http://wiki.eclipse.org/EGit/User_Guide#Considerations_for_Git_Repositories_to_be_used_in_Eclipse)建议完全相反.

然而，在实践中，Eclipse/EGit 实现了许多方法，其中一些似乎与 EGit 的建议相矛盾。

例如，如果您使用新建项目向导从 Git 创建一个新的 PHP 项目并且存储库是远程的，Eclipse/EGit 将愉快地在 Eclipse 工作区中创建一个项目文件夹并将存储库 (.git) 放在项目文件夹中。这是我真正想要的最终结果，因为它将所有内容都封装在 Eclipse 工作区中。

但是，如果您使用新建项目向导并选择本地的 Git 存储库，Eclipse/EGit 不会像克隆远程存储库那样克隆存储库。相反，它使用该存储库的工作副本作为项目位置，在该位置创建其 .project 和其他元数据，并在该工作副本中创建一个与您的项目同名的新（看似不必要的）文件夹（所以你结束例如， `~/git/blah/blah`)。如果您删除了多余的文件夹，您最终会得到与第一个示例相同的结构，唯一的区别是项目文件夹不是 Eclipse 工作区文件夹的子文件夹，它位于文件系统的其他位置（例如.`~/git/blah`）。这种方法似乎唯一的积极之处在于它遵守了 EGit 用户指南中的建议，但从技术角度来看，很难看出这与第一个示例有何不同。

鉴于这些令人费解的观察，我想知道人们在使用这些方法中的每一种都有什么样的体验，以及如果忽略 EGit 用户指南中的建议可能会遇到什么陷阱。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-10T10:36:20.977

您链接的用户指南中直接列出了这两种解决方案的含义。我可以告诉你那部分

> 这可能会导致性能问题

不幸的是非常真实。因此，如果您的工作区中有一个包含大量文件的 git 目录，许多 git 操作将从“计数对象...”对话框开始，该对话框会阻止您的 IDE，因为它会扫描工作区中的所有文件。对于我当前的 20000 个文件，这意味着每次提交、每次切换、... 等待 10 到 20 秒

在业余时间活动中，幸运的是我可以使用另一种选择（在工作区之外有 git 工作目录），一切都感觉更快捷，合并和切换很有趣。

因此，如果您进行大型项目，请考虑将工作空间外的 git 目录作为首选。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T10:30:44.477

我正在做与原始海报相同的迁移，并发现另一个线程对 Egit 建议表达了同样的疑问：[我应该将 git 存储库存储在 Home 还是 Eclipse Workspace？](https://stackoverflow.com/questions/7685246/should-i-store-git-repository-in-home-or-eclipse-workspace)

@JamesG所以这是你的布局？

```
~/projectA/workspace/.metadata
~/projectA/workspace/subproj1/.project
~/projectA/workspace/subproj2/.project
~/projectA/subproj1/.git
~/projectA/subproj1/file1
~/projectA/subproj2/.git
~/projectA/subproj1/file2 
```

# tomcat - uml图Tomcat和Axis2

> ID：10531273
> 
> 赞同：-3
> 
> 时间：2012-05-10T09:37:58.210
> 
> 标签：tomcat, uml, axis2, diagram

我不知道如何为客户端（android）和服务器创建一个部署图（我有一个`.aar`部署在`axis2`目录内的文件；和 axis2 部署在里面`Tomcat`）。他们`SOAP`用来交流。

这个我试过了，不知道好不好： ![在此处输入图像描述](../Images/b2df2141f034501d82d26ee8523c21ed.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:15:47.270

没关系。不要太着迷于 UML 图。它们应被视为松散的指导方针。归根结底，您希望人们能够理解，因此简洁的图表比满足 UML 的每一个细节要求的图表要好。

# php - 如何连接两个表以获取共同值

> ID：10531274
> 
> 赞同：0
> 
> 时间：2012-05-10T09:37:59.897
> 
> 标签：php, mysql, sql, join

我只是在学习PHP。我有两张桌子，一张是A桌，另一张是B桌。表 a 的字段是： `snum, sfirst, smiddle, slast`。和表 b 的字段是： `sr_no, st_id`。这里表 a 的**snum**和表 b 的**st_id**有共同的值，即学生的 id。我想加入两个表，根据这个id找出sfirst、smiddle、slast。我想在数据库中插入 id 并根据表 b 的 st_id 获取名称 sfirst、smiddle 和 slast。请指导我如何以最简单的方式解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:42:01.277

```
SELECT sfirst, smiddle, slast 
FROM tablea 
INNER JOIN tableb 
on tablea.snum = tableb.st_id 
WHERE tableb.st_id = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:42:56.577

看看这里的教程

[教程点Mysql](http://www.tutorialspoint.com/mysql/mysql-using-joins.htm)

请注意，上面的链接将您直接带到连接部分:)

PS：[Tizag](http://www.tizag.com/mysqlTutorial/)也有一些不错的教程值得一试；）

祝你今天过得愉快 ：）

# c# - 从电子邮件将照片分享到 Facebook

> ID：10531275
> 
> 赞同：2
> 
> 时间：2012-05-10T09:38:01.283
> 
> 标签：c#, facebook, email, share, photo

我的应用程序（C# winforms）构造了一封电子邮件并将其发送给客户。电子邮件附有一张照片。我想要做的是在电子邮件中添加一个 facebook 共享按钮，以便用户可以通过单击此共享按钮在 facebook 上共享附加的照片。

我已经设法构建了附有照片的电子邮件。我还设法在电子邮件中添加了一个 facebook 共享按钮，但我无法弄清楚如何通过单个 url 在 facebook 上上传和共享附加的照片。

我想出的网址（附加到分享按钮）非常接近我想要的：

href="http://www.facebook.com/sharer.php?u= 'img src="http://www.somesite.com/apicture.jpg" />

但这需要先将照片上传到 somesite.com，然后才能使用，这不是我想要的。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:43:35.087

如果你想分享一张图片，那么你必须有它的网址，你不能通过上传来分享。

您可以先将图像上传到 Facebook（例如），但您将无法通过电子邮件执行此操作，并且用户必须进行身份验证才能执行此操作，因此您将无法执行此操作从您发送邮件的位置（如果我理解正确的情况）。

您应该做的是将图像放在您发送邮件的服务器（或您可以使用的另一台服务器）上，然后将该 URL 与共享按钮一起使用。

您应该考虑的另一件事是共享按钮已被弃用并且不再受 facebook 支持，正如这里[所说](http://developers.facebook.com/docs/share/)：

> Share 按钮已被弃用，取而代之的是 Like 按钮，并且将不再受支持。请尽可能使用“赞”按钮为您的应用带来最大流量。

[在](http://developers.facebook.com/docs/reference/plugins/like/)这里：

> **旧的“分享”按钮怎么了？**
> 
> 当我们启动“赞”按钮时，我们弃用了“分享”按钮，因为“赞”按钮允许用户一键连接，并允许他们查看他们的哪些朋友已经连接，从而提高了点击率。

在您的特定情况下，使用like 按钮会出现问题，因为它需要无法附加到电子邮件的 facebook js sdk。

# javascript - Javascript 使用 datejs 解析 RFC3339 日期时间

> ID：10531276
> 
> 赞同：4
> 
> 时间：2012-05-10T09:38:11.540
> 
> 标签：javascript, datetime, date, datejs

我在使用来自 Google Calendar API 的日期格式的 datajs 时遇到问题。我相信的日期时间格式是 RFC3339，这是从日历 api 返回的示例日期时间

```
2012-01-05T08:45:00Z 
```

[这是来自这里](http://code.google.com/p/datejs/)的 datejs 文档

```
Date.parse('1985-04-12T23:20:50Z')          // RFC 3339 Formats 
```

但这只是返回 null。

我假设我的 datejs 工作正常

```
Date.today().next().friday() 
```

返回 2012 年 5 月 11 日星期五 00:00:00 GMT+0100 (BST)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T10:01:55.330

**已解决：根据此[错误报告](http://code.google.com/p/datejs/issues/detail?can=2&start=0&num=100&q=rfc&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary&groupby=&sort=&id=147)使用 Date.parseExact 或**此**[版本](http://datejs.googlecode.com/svn/trunk/build/date-en-US.js)**

 **[使用 date.js 的演示](http://jsfiddle.net/mplungjan/x2APB/)

[使用 date-en-US.js 进行演示](http://jsfiddle.net/mplungjan/X6dYe/)

* * *

使用我得到的第一个版本

```
null
http://datejs.googlecode.com/files/date.js
Line 13 
```

[当我从测试套件](http://www.datejs.com/test/date_and_time/index.html)中取出断言时：

```
// null
console.log('Date.parse("1985-04-12T23:20:50Z")',
  Date.parse('1985-04-12T23:20:50Z'));

// my previous answer works
console.log('Date.parse("1985-04-12T23:20:50Z".replace(...))',
     Date.parse('1985-04-12T23:20:50Z'
           .replace(/\-/g,'\/')
           .replace(/[T|Z]/g,' ')
     )
  );

// the test suite without the Z works
console.log('1985-04-12T23:20:50',
  new Date(1985,3,12,23,20,50).equals( Date.parse('1985-04-12T23:20:50')));

// but this one fails when not in the test suite    
try {
  console.log('1985-04-12T23:20:50Z',
    new Date(1985,3,12,23,20,50).equals( Date.parse('1985-04-12T23:20:50Z')));
}
catch(e) {
     console.log('1985-04-12T23:20:50Z',e.message);
} 
```

这是不使用 date.js 时针对此问题的[较旧答案](https://stackoverflow.com/questions/3566125/problem-with-date-formats-in-javascript-with-different-browsers)**

# point-in-polygon - 检查一个点是否在部分开放的多边形中

> ID：10531279
> 
> 赞同：4
> 
> 时间：2012-05-10T09:38:19.337
> 
> 标签：point-in-polygon

我想看看一个点是否在多边形中。当然，我用谷歌搜索并查看了这个问题是否早先得到了回答，然后找到了这个算法： http: [//www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html](http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html) 这工作正常，除非多边形部分打开. 例如： ![例子](../Images/bb706c23fe5effc984d5e6d24940be72.png)

AE 被检测到，但 B 多边形的开放部分也被认为是封闭的！如果你运行这个示例代码，你会明白我的意思：

```
#include <stdio.h>

int pnpoly(int nvert, float *vertx, float *verty, float testx, float testy)
{
  int i, j, c = 0;
  for (i = 0, j = nvert-1; i < nvert; j = i++) {
    if ( ((verty[i]>testy) != (verty[j]>testy)) &&
         (testx < (vertx[j]-vertx[i]) * (testy-verty[i]) / (verty[j]-verty[i]) + vertx[i]) )
       c = !c;
  }
  return c;
}

int main(int argc, char *argv[])
{
        // 1 closed [A]
        float x1[] = { 0, 1, 1, 0, 0 };
        float y1[] = { 0, 0, 1, 1, 0 };
        printf("1: %d (1 expected)\n", pnpoly(5, x1, y1, 0.8, 0.8));
        printf("1: %d (0 expected)\n", pnpoly(5, x1, y1, -0.8, -0.8));

        // 1 closed [B] with a partial open
        // please note that the vertex between [0,-1] and [0,0] is missing
        float x2[] = { 0, 1, 1, 0, 0, -1, -1, 0 };
        float y2[] = { 0, 0, 1, 1, 0,  0, -1, -1 };
        printf("2: %d (1 expected)\n", pnpoly(8, x2, y2, 0.8, 0.8));
        printf("2: %d (0 expected)\n", pnpoly(8, x2, y2, -0.8, -0.8)); // <- fails

        // 2 closed [C/D/E]
        float x3[] = { 0, 1, 1, 0, 0, -1, -1, 0, 0 };
        float y3[] = { 0, 0, 1, 1, 0,  0, -1, -1, 0 };
        printf("3: %d (1 expected)\n", pnpoly(9, x3, y3, 0.8, 0.8));
        printf("3: %d (1 expected)\n", pnpoly(9, x3, y3, -0.8, -0.8));

        return 0;
} 
```

x2/y2 多边形由一个连接到部分开放块的封闭块组成。pnpoly 函数仍然认为开放块“中”的点位于多边形中。

我现在的问题是：我该如何解决这个问题？还是我忽略了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-27T00:37:43.123

也许这是一个迟到的答复，但无论如何我想贡献。

您需要对多边形数组数据进行预处理，因为这种算法会将最后一个点连接到第一个点。正如您在该算法的描述中特别看到的那样，它处理多边形，并且由于开放区域不是多边形，因此该算法不能处理它。

我建议您使用以下想法对多边形进行一些预处理：

> “对于可以表示多边形的每一组点，只要找到重复的起点，就必须将其拆分为子多边形。找到它后，保存该多边形，并从该点开始创建一个新多边形，然后继续你的处理，直到你到达你的集合的末尾。因此，在你的处理中应该忽略每个不以起点结束的子多边形，因此不提交给算法。通过使用这种预处理方法，你只会将那些终点与起点相同的子多边形提交给算法。”

愿它对您有所帮助-如果您仍然需要它...

# security - 有条件地显示 Crystal Reports

> ID：10531282
> 
> 赞同：-1
> 
> 时间：2012-05-10T09:38:25.340
> 
> 标签：security, crystal-reports

我想有条件地显示水晶报告。这意味着如果数据库表的字段值 = 'true' 则仅显示报告，否则不显示报告。我想保护水晶报告文件免受未经许可的用户的侵害。如果我无法访问源代码，我该如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-02-10T04:03:53.217

如果应用程序级解决方案不可用，则尝试创建 SQL 表达式字段以从数据库表中获取布尔值。没有在每个部分中放置一个抑制公式，当数据库值为 false 时会抑制该部分。

出于礼貌，您可能希望添加一个包含文本元素“此报告未获得许可”或类似内容的部分，仅当数据库值为 true 时才被禁止。这样用户就不会认为空白页有误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:42:36.243

您将无法限制对 Crystal Report 的访问，除非托管它的应用程序支持这一点。如果您有权访问其源代码，那么您可以编写所需的安全性。

否则，您能做的最好的事情就是限制数据。但是，这可能使用许可证。

我建议您阅读应用程序文档中的细则，看看查看报告是否确实使用了 CR 许可证。

** 编辑 **

由于您可以访问源代码，因此只需根据数据库字段的值隐藏/显示生成报告的 UI 元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T02:57:52.040

这可能不是一个答案，但是我们会做类似的事情。我们有各种客户使用我们的报告应用程序（在 C# 中完成并使用 CR）。我们的大多数报告都可供所有客户使用，但有些客户有自己的报告，这些报告仅针对他们的要求，对任何其他客户都没有意义。

我们通过在 RPT 上设置一些属性来控制这一点。这就是我们所做的。

1) 右键单击​​ xyz.rpt 文件并转到高级选项卡 2) 将关键字属性设置为 Customer=123（这是我们数据库中客户的唯一编号。） 3) 对于通用报告，此属性不是设置并留空。4) 我们的数据库中有一个 Reports 表，其中有一列名为 Customer。这用于检查报告是通用的还是特定的。

我认为这不会有任何帮助，但我只是想分享。因为这是我们使用数据库值隐藏和显示报告的方法。

# c# - C# - 列表 - 删除所有元素，但不删除前四个

> ID：10531284
> 
> 赞同：16
> 
> 时间：2012-05-10T09:38:36.790
> 
> 标签：c#, list

我有一个元素列表，但是如果列表元素的数量大于 4，我想删除所有元素，但仅将前 4 个保留在列表中。

例子：

列表<> - 1、2、3、4、5、6、7、8

新列表应该是 - 1,2,3,4

我正在考虑使用 List.RemoveAll() 但不确定在括号中放什么

期待一些帮助....

史蒂文

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-10T09:40:06.010

为什么不使用[`List.RemoveRange`](http://msdn.microsoft.com/en-us/library/y33yd2b5)：

```
if (list.Count > 4)
{
    list.RemoveRange(4, list.Count - 4);
} 
```

（假设您*想*改变现有列表。如果您乐于创建一个新序列，我肯定会`list.Take(4)`按照 Adam 的建议使用，无论是否`ToList`调用。这些天我倾向于构建查询而不是改变现有集合。 )

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-10T09:40:20.583

或者，您可以创建一个包含旧项目的新列表：

```
var firstFour = myList.Take(4).ToList(); 
```

但是，这会创建一个*新*列表，因此**与**从原始列表中删除不同。

或者，如果您需要做的只是*迭代*它们，只需`Take`不在`ToList`a 内`foreach`：

```
foreach (var item in myList.Take(4)) 
```

然后，您将获得延迟执行，并且不会在创建列表上花费内存。

顺便说一句，使用 linq 和 linq 扩展，我发现代码更明确地声明了您的*意图*`list.Take(4)`：读起来比`list.RemoveRange(4, list.Count - 4);`一目了然容易得多。代码中的意图对于维护和团队工作非常重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T09:50:06.233

尝试这个

```
 List<string> lstTest = new List<string>();
            lstTest.Add("test1");
            lstTest.Add("test2");
            lstTest.Add("test3");
            lstTest.Add("test4");
            lstTest.Add("test5");
            lstTest.Add("test6");           

            lstTest.RemoveRange(4, lstTest.Count - 4);

            foreach (string item in lstTest)
            {
                Console.Write(item);
            }
            Console.ReadLine(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T09:46:44.943

使用[LINQ](http://msdn.microsoft.com/en-us/library/bb503062.aspx)。

```
myList = myList.Take(4).ToList() 
```

这将获取列表的前 4 项，并分配一个新列表来代替旧列表。

无需像其他答案那样检查长度，因为**“Take 枚举源并产生元素，直到产生计数元素或源不包含更多元素。”** 由[亚当霍尔兹沃斯提供](https://stackoverflow.com/users/358221/adam-houldsworth)

# java - Jaxb 不会捕获所有子节点

> ID：10531285
> 
> 赞同：2
> 
> 时间：2012-05-10T09:38:39.030
> 
> 标签：java, jaxb

我有一个看起来像这样的 xml 文档

```
<root>
<subElement>
    <a>an instance</a>
    <b>another instance</b>
    <problemElement>
      <option>1st instance</option>
      <option>2nd instance</option>
      <option>3rd instance</option>
    </problemElement>

</subElement>

<subElement>
    <a></a>
    <b></b>
    <problemElement>
      <option>instance</option>
    </problemElement>

</subElement>
</root> 
```

我的 jaxb 类看起来像这样；

```
@XmlRootElement(name = "root")
@XmlType(name = "Root")
public class Root{

  @XmlElement(name = "subElement", required = true)
  private final List<SubElement> subElementList = new ArrayList<SubElement>();

  public List<SubElement> getSubElementList() {
    return subElementList;
  }
}

@XmlType(name = "SubElement", propOrder = {"a", "b", "problemElement"})
public abstract class SubElement{

  @XmlElement(required = true)
  private String a;

  @XmlElement(required = true)
  private String b;

  @XmlElement(name = "problemElement", required = true)
  private List<ProblemElement> problemElement= new ArrayList<ProblemElement>();

  public String getA() {
    return a;
  }

  public String getB() {
    return b;
  }

  public List<ProblemElement> getProblemElement() {
    return problemElement;
  }
}

@XmlType(name = "ProblemElement" )
public class ProblemElement {

  @XmlElement(required = true)
  private String option;

  public String getOption() {
    return option;
  }
} 
```

除了problemElement，一切正常。该列表仅返回 xml 中的最后一个选项节点值，在本例中为“3rd instance”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:19:42.700

**简短的回答**

对于您的用例，我将利用属性`@XmlElementWrapper`上的注释`problemElement`：

```
@XmlElementWrapper(name="problemElement")
@XmlElement(name="option")
private List<ProblemElement> problemElement = new ArrayList<ProblemElement>(); 
```

我会在该`@XmlValue`物业上使用该`option`物业：

```
 @XmlValue
  private String option; 
```

* * *

**长答案**

下面是一个完全映射的示例。

**根**

```
package forum10531285;

import java.util.*;
import javax.xml.bind.annotation.*;

@XmlRootElement(name = "root")
@XmlType(name = "Root")
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

    @XmlElement(name = "subElement", required = true)
    private final List<SubElement> subElementList = new ArrayList<SubElement>();

} 
```

**子元素**

```
package forum10531285;

import java.util.*;
import javax.xml.bind.annotation.*;

@XmlType(name = "SubElement", propOrder = { "a", "b", "problemElement" })
@XmlAccessorType(XmlAccessType.FIELD)
public class SubElement {

    @XmlElement(required = true)
    private String a;

    @XmlElement(required = true)
    private String b;

    @XmlElementWrapper(name="problemElement")
    @XmlElement(name="option")
    private List<ProblemElement> problemElement = new ArrayList<ProblemElement>();

} 
```

**问题元素**

```
package forum10531285;

import javax.xml.bind.annotation.*;

@XmlType(name = "ProblemElement" )
@XmlAccessorType(XmlAccessType.FIELD)
public class ProblemElement {

  @XmlValue
  private String option;

} 
```

**演示**

```
package forum10531285;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum10531285/input.xml");
        Root root = (Root) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root>
    <subElement>
        <a>an instance</a>
        <b>another instance</b>
        <problemElement>
            <option>1st instance</option>
            <option>2nd instance</option>
            <option>3rd instance</option>
        </problemElement>
    </subElement>
    <subElement>
        <a></a>
        <b></b>
        <problemElement>
            <option>instance</option>
        </problemElement>
    </subElement>
</root> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T09:44:59.240

抱歉，但是...您的 ProblemElement 可能有无限数量的选项？如果是这种情况，那么您应该编写此代码而不是 ProblemElement 类：

```
public class ProblemElement {
    private List<String> options;

    public List<String> getOptions() {
        return options;
    }
    // other stuff here
} 
```

否则，您的 JAXBinding 将仅检索 XML 中的最后一个选项，在本例中为第三个。当然，您应该相应地重写您的绑定注释。

# java - java中的FileLock在同一进程内或不同进程之间或两者之间是否安全跨多个线程？

> ID：10531286
> 
> 赞同：9
> 
> 时间：2012-05-10T09:38:44.600
> 
> 标签：java, multithreading, file-locking

java中的FileLock在同一进程内或不同进程之间或两者之间是否安全跨多个线程？

[javadoc](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileLock.html)说：

> 文件锁代表整个 Java 虚拟机持有。它们不适用于控制同一虚拟机内的多个线程对文件的访问。
> 
> 文件锁对象可以安全地被多个并发线程使用。

我真的不明白：这是否意味着 FileLock 在同一个进程内的多个线程之间、多个不同进程之间或两者之间是安全的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:56:07.123

再向下：

> 此文件锁定 API 旨在直接映射到底层操作系统的本机锁定设施。因此，文件上的锁应该对所有有权访问该文件的程序可见，而不管这些程序是用什么语言编写的。

这强烈表明它的目的是在不同的进程之间使用。

这一行：

> 它们不适用于控制同一虚拟机内的多个线程对文件的访问。

如果您有一个具有多个线程的进程，建议您不要使用它。在这种情况下，您可以改用`synchronized`section 或`ReadWriteLock`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T09:46:07.330

它说当您将对象视为普通 Java 对象时，它们是线程安全的，但它们不会阻止其他线程打开同一个文件。也就是说，当您查看它们提供的服务时，它们并不安全。

# android - 如何在 Android 库中包含资源？

> ID：10531287
> 
> 赞同：0
> 
> 时间：2012-05-10T09:38:55.037
> 
> 标签：android

我有一个安卓项目。在其中我包含了一个 Android 库。该库包含一个引用资源的活动（也包含在库中）。

在我的宿主项目中，我扩展了库活动。代码编译，但是当我运行它时，我得到一个运行时异常，指出扩展项目找不到布局资源：

```
java.lang.NoClassDefFoundError: mylibrary.R$layout 
```

我的问题是，如何修复我的库以便包含引用的资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:54:36.680

我的项目实际上并不包括库，因为我的源代码管理已将 project.properties 文件设置为只读。Eclipse 默默地失败了。

现在修好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:56:03.100

确保在 gen 文件夹下的库项目中生成 R.java

在此处查看更多详细信息，
[http://developer.android.com/guide/developing/projects/index.html](http://developer.android.com/guide/developing/projects/index.html)
#Library Project

# asp.net-mvc - 使用实体框架在 MVC 中保存实体副本时，foreach 循环无法正常工作

> ID：10531290
> 
> 赞同：2
> 
> 时间：2012-05-10T09:39:02.213
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-4

我有 MVC3 项目，我在其中使用实体框架我有`player`该用户的实体应该能够复制。

要制作副本，`player`我的存储库中有以下内容：

```
public Player CreateTemplate(Player player)
    {
        var copy = new Player();

        copy.Birth_Date = player.birth_Date;
        copy.Comment = player.Comment;
        copy.Name = player.Name;
        copy.Agent = player.Agent;
        copy.AgentId = player.AgentId;
        foreach (SelectedTeams selectedTeams in player.SelectedTeams.ToList())
        {
            var copyselectedteams = new SelectedTeams();
            copyselectedteams = selectedTeams;
            copy.SelectedTeams.Add(copyselectedteams);
        }
        db.AddToPlayer(copy);
        db.SaveChanges();
        return copy;
    } 
```

对我来说，问题是，一旦我的 foreach 开始循环，我原来`player`的就输了`SelectedTeams` 。这个问题有什么解决方案吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:21:16.173

您是否有任何机会禁用延迟加载？您可以尝试像这样急切加载实体：

```
var firstPlayer = dbContext.Players.Include("SelectedTeams").FirstOrDefault<Player>(p => p.PlayerId == 1);
var copiedPlayer = repo.CreateTemplate(firstPlayer); 
```

此外，您不应将现有实体的引用复制到新实体。

```
copyselectedteams = selectedTeams; 
```

而是复制它的属性（当然除了关系键，否则你会得到例外）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:53:56.070

您正在覆盖对刚刚创建的新对象的引用：

```
var copyselectedteams = new SelectedTeams(); //overwritten...
copyselectedteams = selectedTeams; //...here 
```

# javascript - JQuery 和 HTML：如何使用 echo $_POST 将数据从一个表单获取到另一个表单

> ID：10531291
> 
> 赞同：0
> 
> 时间：2012-05-10T09:39:04.033
> 
> 标签：javascript, jquery, html

我使用 JQuery 和 HTML 创建应用程序。在第一个表格中，您被要求输入一个 ID，然后一旦选中，您将被要求添加更多信息。我遇到的问题是，在第二页中按下提交后，我想将所有信息一起保存，这包括在第一页中输入的 id。

我的表单是使用 HTML 创建的，功能是使用 JQuery 完成的。我正在尝试使用以下代码，但它不起作用

```
var id = echo $_POST['cardNumber']; 
```

我在其中一个 .js 页面中使用它。这是要求 ID 的第一页的 HTML

```
<form id="RegisterForm" method="post" data-ajax="false" id="registerCardForm" action="register.html"> 
        <input type="text" id="cardNumberRegField" type="tel"  name="cardNumber" class="required number register" minlength="16" maxlength="16"/> 
        <input name="Submit" type="submit" class="button" value="Register"/>
</form> 
```

谁能告诉我这里出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:40:52.000

如果你想将 php 值存储在 js 变量中，你应该这样做，不带引号 js 变量被设置`undefined`：

```
var id = "<?php echo $_POST['cardNumber']; ?>" 
```

# jquery - 仅在 ajax 成功时启动功能一次

> ID：10531292
> 
> 赞同：0
> 
> 时间：2012-05-10T09:39:04.623
> 
> 标签：jquery

我需要在页面加载后调用一个函数，但只有一次，页面元素由 Ajax 加载，所以`$(document).Ready()`不起作用。现在我正在使用`$(document).AjaxSuccess()`但它不合理，因为该函数被调用太频繁，但我只需要一次

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:42:59.897

您应该在Ajax 函数的[回调函数中调用该函数。](http://www.w3schools.com/jquery/jquery_callback.asp)

例如，如果您使用[jQuery Load](http://api.jquery.com/load/)，您应该这样做：

```
$(".element").load("/myUrl", function(){
   //add function call here..
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:04:30.137

您可以使用`.one()` [(Docu here)](http://api.jquery.com/one/)。就像名字说的那样，这只执行一次。

边注：

`.Ready()`不起作用，它被称为`.ready()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:50:50.180

```
$(document).ready(function(){
   $.ajax({
      ....
   });
}); 
```

这只会调用一次，因为 ajax 调用只会在第一次加载页面时进行。

# distance - 序列的距离测量；字符串编辑

> ID：10531293
> 
> 赞同：0
> 
> 时间：2012-05-10T09:39:05.833
> 
> 标签：distance, similarity, metric, eye-tracking

我想比较两个眼动追踪扫描路径。眼动追踪导致观察者看到的一系列标签，用于将图像划分为标记的图块（矩形区域）。我们还可以从眼动追踪中知道什么时候，眼睛注视瓷砖 N 多长时间。

只要不考虑注视的时间，Levenshtein 或字符串编辑距离就可以正常工作。例如，如果用户 1 看图块“AKPLA”，用户 2 看图块“ATPLB”，则字符串编辑距离将为 2，但用户 2 看“P”的时间可能比用户 2 长得多。

关于如何改进距离测量以测量时间差异的任何想法？（请注意，该算法不限于字符串，它同样适用于整数数组）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-25T12:40:56.830

眼动追踪扫描路径最初将是一个时间序列。将您的时间序列转换为仅包含人们查看的标签的字符串会导致丢失有关时间的信息。

因此，如果您想考虑时间，您必须使用原始时间序列或考虑时间来进行转换。

例如：你可以每十秒钟给出一个人平均看的地方。与“AATTTPLBB”相比，它可能是“AAAAKPLAA”。在这种情况下，您可以使用编辑距离，它会考虑到某人在哪里看了多长时间。

您也可以简单地处理眼动追踪的原始时间序列——正如我所假设的那样——它包含一个时间戳和一个位置。然后你可以使用动态时间扭曲来估计差异。

无论如何，这是一个非常广泛的问题，可能与您不再相关。如果您可以发布自己找到的答案，那就太好了。

# php - PHP以另一种方式获取表格数据？

> ID：10531297
> 
> 赞同：0
> 
> 时间：2012-05-10T09:39:32.283
> 
> 标签：php, ms-access, odbc

我的表中共有 42 条记录。问题是我的专栏之一，它指示休假类型，是 call `$empType`。在我那张表的列中，第 24 条记录`$empType`称为“病假”，但由于 while 循环，`$empType`只显示第 42 条记录，因此整个 if 语句不起作用。

我不希望它只显示第 24 条记录，因为我知道`odbc_fetch_row`它也能正常工作，但我希望它一直循环并捕获每一行的所有数据。

```
$conn=odbc_connect("employee","","") or die (odbc_errormsg());

$sql1="SELECT * FROM employee WHERE Status='Pending'";
$rs1=odbc_exec($conn,$sql1);
while (odbc_fetch_row($rs1))
{
$leaveID=odbc_result($rs1,"Leave ID");
$empID=odbc_result($rs1,"empID");
$empType=odbc_result($rs1,"TypeOfLeave");
}

if ($status == "Approved" && $empType == "Medical Leave")
{
my code
}

echo $empType; 
```

谁能帮我解决这个问题？我真的需要完成这件事。

我正在使用 Microsoft 访问数据库 ODBC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:01:25.697

```
<?php
$conn = odbc_connect("employee","","") or die (odbc_errormsg());

$sql1 = "SELECT * FROM employee WHERE Status='Pending'";
$rs1 = odbc_exec($conn,$sql1);

while(odbc_fetch_row($rs1)) {
    $leaveID=odbc_result($rs1,"Leave ID");
    $empID=odbc_result($rs1,"empID");
    $empType=odbc_result($rs1,"TypeOfLeave");
    $status = odbc_result($rs1,"Status"); // added this.

    // moved to the while loop.
    if( $empType === 'Medical Leave' && $status === 'Approved' ) {
        // your code.
    }
} 
```

此外，PHP 的 ODBC API 看起来很吓人，所有的 odbc_fetch_row、odbc_result 都在进行。也许为此使用 PDO 是个好主意？这样，代码将如下所示：

```
<?php
$dbh = new Pdo( 'odbc:MSSQLServer', 'username', 'password' );

$results = $dbh->query( 'SELECT * FROM employee', PDO::FETCH_ASSOC );

foreach( $results as $result ) {
    if( $result['TypeOfLeave'] === 'Medical Leave' && $result['Status'] === 'Approved' ) {
        // your code here.
    }
} 
```

我没有尝试将 PDO 与 ODBC 一起使用，所以我不熟悉错误，但据我所知；除了您正在使用的 API 之外，任何其他 API 都是一种改进。

**编辑**：如果您想稍后使用所有行（用于循环等），这是一个不错的选择：

```
<?php
$conn = odbc_connect("employee","","") or die (odbc_errormsg());

$sql1 = "SELECT * FROM employee WHERE Status='Pending'";
$rs1 = odbc_exec($conn,$sql1);

$rows = array( );

while(odbc_fetch_row($rs1)) {
    $rows[] = array(
        'leave ID' => odbc_result( $rs1, 'Leave ID' ),
        'empID' => odbc_result( $rs1, 'empID' ),
        'empType' => odbc_result( $rs1, 'empType' ),
        'status' => odbc_result( $rs1, 'Status' ),
    );
}

// $rows now contains *all* rows, which you can loop over later.

// some more code here.

foreach( $rows as $row ) {
    if( $row['status'] === 'Approved' && 'empType' === 'Medical Leave' ) {
        // your code here.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:47:47.257

正如乔恩指出的那样，你的 if 需要在 while 内，但你也从来没有定义 $status 所以无论它在哪里 if 都不会运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:54:40.050

您正在遍历其中的每一行数据，`while`但您有一个`if`语句包含一个 var 的条件，该条件在循环外 while 的每个循环中重新声明`while`...

你需要有`if`内部`while`：

```
$conn=odbc_connect("employee","","") or die (odbc_errormsg());

$sql1="SELECT * FROM employee WHERE Status='Pending'";
$rs1=odbc_exec($conn,$sql1);
while (odbc_fetch_row($rs1))
{
$leaveID=odbc_result($rs1,"Leave ID");
$empID=odbc_result($rs1,"empID");
$empType=odbc_result($rs1,"TypeOfLeave");

if ($status == "Approved" && $empType == "Medical Leave")
{
my code
}//end of if

}//end of while

echo $empType; 
```

# c++ - 树状结构中的内存前向预留

> ID：10531298
> 
> 赞同：3
> 
> 时间：2012-05-10T09:39:33.533
> 
> 标签：c++, memory-management, vector, tree

如何很好地保留树状结构的内存？假设这将由 STL 向量实现：

```
struct Leaf
{
    int val;
};

struct Branch
{
    std::vector<Leaf> leaves;
}; 
```

`Branch`现在，我可以为es的向量保留一些内存

```
std::vector<Branch> branches;
branches.reserve(10); 
```

但是如何同时保留内存`leaves`（例如在构建`Branch`对象期间）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:57:42.607

您可以考虑将整个树存储在一个数组中，可能是一个向量。假设你有一个结构`Node`：

```
struct Node
{
    int val;
    vector<size_t> children;
};

vector<Node> tree; 
```

然后`tree[0]`是树的根。每次您想在某个节点中添加新分支时，假设`tree[i]`您执行以下操作：

```
tree.resize(tree.size()+1);
tree[i].children.push_back(tree.size()-1);
// you can also set the value of the new node:
tree.back().val = 123; 
```

然后，您可以通过从任何节点（包括根节点）开始并查看其子节点来轻松遍历树。

下面是使用 DFS 遍历树的示例：

```
void dfs(size_t x)
{
    // you can do sth here, for example:
    printf("node: %d, number of children: %d\n", x, tree[x].children.size());

    // go deeper in the tree to the node's children:
    for (size_t i=0; i<tree[x].children.size(); ++i)
        dfs(tree[x].children[i]);
}

// starting DFS from the root:
dfs(0); 
```

这样您就可以为树保留内存：

```
tree.reserve(100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:46:58.363

`Leaf`在初始化整个树（或者可能作为树的一部分）之前，制作一些指向预初始化空的指针堆栈。之后，您可以`pop` `Leaf`从堆栈中将其附加到特定的（并用所需的值`Branch`填充s ......）。`Leaf`当然，那你应该改变：`std::vector<Leaf>`到`std::vector<Leaf*>`.

当 stack 为空时，创建另一组空`Leaf`s。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T09:47:46.377

`Branch`当您尝试为es保留它时，您到底保留了多少内存？它们中的每一个都包含一个`std::vector`，因此它的大小是可变的。

我的建议是实际构造一个用 (empty) `Branch`es 填充的向量，但同时为它们的 s*保留*空间`Leaf`，如下所示：

如果您为 Branch 类/结构编写内存保留构造函数：

```
struct Branch{
    std::vector <Leaf> leaves;
    Branch (int expectedL = 10){
        leaves.reserve(expectedL);
    }
}; 
```

那么你可以这样做：

```
std::vector<Branch> branches(10); 
```

或者

```
std::vector<Branch> branches(10, 42); 
```

不完全是您要问的，但也许有帮助。

# jquery - jQuery在点击时初始化？

> ID：10531309
> 
> 赞同：0
> 
> 时间：2012-05-10T09:40:10.423
> 
> 标签：jquery

我正在将[jScrollpane](http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html)用于[客户的](http://www.koodoocreative.co.uk/~stagesca)网站。我遇到的问题是“欢迎”选项卡上的滚动条初始化是否正常。“产品”选项卡 我还希望该选项卡具有与“欢迎”选项卡相同的滚动条。

我正在使用 Twitter Bootstrap 作为选项卡，并且没有加载任何与它们关联的 jQuery，这完全是默认设置。

我的**HTML**代码如下：

```
<div class="tab-content">
          <div id="home" class="tab-pane active scroll_tab">
            <?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>
            <h2>
              <?php the_title(); ?>
            </h2>
            <?php the_content(); ?>
            <?php endwhile; ?>
          </div>
          <div id="about" class="tab-pane">
            ABOUT CONTENT
          </div>
          <div id="services" class="tab-pane">
            <?php 
                $page_id = 11; 
                $page_data = get_page( $page_id ); 
                echo '<h2>'. $page_data->post_title .'</h2>';// echo the title
                echo apply_filters('the_content', $page_data->post_content); // echo the content and retain Wordpress filters such as paragraph tags. 
            ?>
          </div>
          <div id="case_studies" class="tab-pane">
            CASE STUDIES CONTENT
          </div>
          <div id="contact_us" class="tab-pane">
            CONTACT US CONTENT
          </div>
        </div> 
```

然后我在一个函数中初始化 document.ready() 上的 jScrollpane 插件。

jQuery 代码如下：

```
 $(document).ready(function()
   {    

/* Scrollbars */
$(function()
{
    $('.scroll_tab').jScrollPane();
    $('.tab-content > .tab-pane, .pill-content > .pill-pane').jScrollPane();
});
}); 
```

如何强制 jScrollPane(); 在每个选项卡上初始化？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:55:08.997

我有一个想法：在单击更改为另一个选项卡后尝试调用 $('.tab-content > .tab-pane.active').jScrollPane() 。我认为问题在于，虽然隐藏了其他（不是第一个）选项卡，但 jScrollPane 无法正确计算它们的高度。

# java - JInternal 框架上的嵌套 JSplitPane

> ID：10531311
> 
> 赞同：3
> 
> 时间：2012-05-10T09:40:11.143
> 
> 标签：java, swing, jinternalframe, jsplitpane

通过单击“Add Int Frame”按钮，我在 tabbedPane 上绘制 JInternalFrame，在这个水平分割的 JSplitPane 的右侧。

![在此处输入图像描述](../Images/d70a37aba92ad4808aca1163caf7422b.png)

在这个 InternalFrame 上，我可以通过单击“添加拆分窗格”按钮来添加嵌套的 JSplitPane。

嵌套的 JSplitPanes 仅在我移动 InternalFrame 时出现：如何在按下按钮时立即显示 JSplitPanes？

这是我的代码

```
public class MultiSplit extends javax.swing.JFrame {

JInternalFrame jif;
JSplitPane jsp1,jsp2,jsp3,jsp4,jsp5, jsp6;
JTextArea textArea1, textArea2, textArea3, textArea4, textArea5, textArea6;
int click = 0;

public MultiSplit() {
    initComponents();
    setLocationRelativeTo(null);
}

private void AddIntFramesMousePressed(java.awt.event.MouseEvent evt) {                                      
    click = 0;        
    jif = new JInternalFrame();
    jPanel1.add(jif);
    jif.setSize(750, 600);
    jif.setResizable(true);
    jif.setClosable(true);
    jif.setMaximizable(true);
    jif.setIconifiable(true);
    jif.setVisible(true);
}                   

private void AddPanesButtonMousePressed(java.awt.event.MouseEvent evt) {                                            
    click++;      
    if(click ==1){
    textArea1 = new JTextArea();
    textArea2 = new JTextArea();

    jsp1 = new JSplitPane(JSplitPane.VERTICAL_SPLIT, textArea1, textArea2);
    jsp1.setVisible(true);       
    jsp1.setResizeWeight(0.75);
    jsp1.setDividerSize(2);
    jif.add(jsp1);
    }        
    else if(click==2){
      textArea3 = new JTextArea();  
      jsp2 = new JSplitPane(JSplitPane.VERTICAL_SPLIT, jsp1, textArea3);
      jsp2.setVisible(true);
      jsp2.setResizeWeight(0.80);
      jsp2.setDividerSize(2);
      jif.add(jsp2);
    }        
    else if(click==3){
      textArea4 = new JTextArea();  
      jsp3 = new JSplitPane(JSplitPane.VERTICAL_SPLIT, jsp2, textArea4);
      jsp3.setVisible(true);
      jsp3.setResizeWeight(0.85);
      jsp3.setDividerSize(2);
      jif.add(jsp3);
    }
   }
    public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            new MultiSplit().setVisible(true);
        }
    });
  }
} 
```

![绘制的 JSplitPanes](../Images/8ccfe9470d103f8f122d91078707c165.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:50:34.340

[*如何使用内部框架*](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)：“通常，您将内部框架添加到桌面窗格。” 无论您`JInternalFrame`是否在 a 上`JDesktopPane`，您仍然需要`pack()`内部框架，就像封闭的`Window`.

# spring - 加载 Spring Beans 的练习

> ID：10531315
> 
> 赞同：0
> 
> 时间：2012-05-10T09:40:14.670
> 
> 标签：spring, javabeans, loading, applicationcontext

伙计们，

从 ApplicationContext 加载 spring bean 的推荐做法是什么？我们是否编写 ServletContextListener 以在服务器启动时加载它并在上下文中保存 bean 信息？

或者写一些静态方法来做：

```
ApplicationContext context = new ClassPathXmlApplicationContext("spring-beans.xml");
```

并且一直调用这个静态方法？

还是写一个public void方法一直调用？在这种情况下，Spring bean 是否每次都初始化？这看起来容器的工作量太大了。

请建议，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:45:14.607

使用提供的上下文加载器侦听器。按照建议在 web.xml 中配置它。您既不应该考虑太多，也不应该努力加载您的 bean。

# java - 如何将小程序中创建的图像保存到指定文件夹？

> ID：10531319
> 
> 赞同：0
> 
> 时间：2012-05-10T09:40:29.163
> 
> 标签：java, security, file-io, applet, next-generation-plugin

```
share1 = (BufferedImage) createImage(new MemoryImageSource(w*2,h,s1,0,w*2));
ImageIO.write(share1, "jpg", fileChooser.getSelectedFile()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:13:23.750

您应该使用证书签署您的小程序（可以使用 JDK 的密钥工具生成您自己的证书）。

使用此证书客户端签署您的小程序后，将提示加载小程序接受它。如果客户端接受 - 您可以将图像从小程序写入本地用户 PC。

否则受安全限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T15:56:35.173

除了对代码进行数字签名外，还有另一种适用于较新 JRE 的方法。最新的“下一代”/“插件”2 JRE 支持使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)启动嵌入式小程序。使用 JWS 部署小程序后，它可以使用 JNLP API 服务，其中包括允许沙盒小程序读取或写入本地文件系统的 API。

这是文件服务的一个[小演示](http://pscode.org/jws/api.html#fs)。那个演示。不是小程序。有关使用这些服务的**小程序**示例，请参阅[GIFanim 小程序](http://pscode.org/gifanim/#applet)。

# javascript - 动画变化的排名表

> ID：10531322
> 
> 赞同：16
> 
> 时间：2012-05-10T09:40:33.170
> 
> 标签：javascript, jquery, css, html, animation

我有一个每秒变化的排名表。我想平滑地为表格行设置动画（不一定每秒；也许每 5 秒）。

快速搜索发现了这个基于[动画表格排序的](http://www.mitya.co.uk/scripts/Table-sort---now-REGEXP-friendly-111)[jQuery 插件](http://www.scottlogic.co.uk/2011/01/animating-html-ranking-tables-with-javascript/)。就我的目的而言，它看起来有点像体育排名，而且代码已经过时且未维护。

是否有替代插件/库来动画变化的排名表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T09:45:34.777

关于您的同一主题，stackoverflow 上有一篇有趣的帖子： [Using jquery, how to I animate add a new list item to a list?](https://stackoverflow.com/questions/1851475/using-jquery-how-to-i-animate-adding-a-new-list-item-to-a-list)

当然它应该稍微改变一下，因为也许你想在列表中添加多个项目。

但是您可以做的是每 X 秒刷新一次，并为每个列表项以动画方式添加该项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T12:11:32.257

尝试使用此链接，其中包含不同类型排序算法的演示。

[http://www.sorting-algorithms.com/nearly-sorted-initial-order](http://www.sorting-algorithms.com/nearly-sorted-initial-order)

不过，这不是一个 jQuery 插件，但我认为它可以帮助你。

# regex - [0-9a-fA-F] 和 [0-9a-fAF] 一样吗？

> ID：10531323
> 
> 赞同：4
> 
> 时间：2012-05-10T09:40:37.797
> 
> 标签：regex, grep

这两个是等价的吗？`[0-9a-fA-F]`和`[0-9a-f-A-F]`

我一直在一些文本中使用 egrep 尝试这两个正则表达式，它们似乎是等价的。有没有他们不会返回相同结果的情况？

另外，在第二个表达式中，第二个是什么意思，`-`我为什么需要它？我对这些简单的例子有点困惑。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T09:43:46.567

第二个表达式也匹配破折号和十六进制

**编辑**，`egrep`这是你使用的第二个实际上是无效的：

```
# echo "12345678" | egrep '^[0-9a-f-A-F]+$'
egrep: Invalid range end 
```

第二个的正确表达式是以破折号结尾：

```
[0-9a-fA-F-] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-10T09:43:04.943

不，这两个正则表达式不相等。在第二个中添加字符'-'

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T09:44:19.780

`[0-9a-f-A-F]`= `[0-9a-fA-F]`+`-`

# maven - Maven 存储库 URL 列表

> ID：10531325
> 
> 赞同：1
> 
> 时间：2012-05-10T09:40:42.347
> 
> 标签：maven, nexus

我正在尝试从 ANT 迁移到 Maven，并在联系远程下载站点时遇到问题。它们被我们的服务器阻止，这会扫描页面以查找“不需要的单词”，然后阻止相关页面，我不确定为什么 POM 或 Jars 会有引用硬核色情的单词，但我们的服务器似乎确实认为他们会这样做！（顺便说一下，服务器在 ClearOS 上（如果你有兴趣的话）

到目前为止，我已经能够通过使用 nexus 来解决其中的一些问题（不确定我是否理解为什么会这样？）但是每次我在一个新的测试项目上重新运行 maven 时，我都会在不同的 URL 上得到一组不同的错误！

然后我必须通过电子邮件向我们的网络管理员发送请求以取消阻止该站点，以便我可以检索 POM 和罐子。至少可以说他对整个事情有点厌倦了！

我会考虑设置一个镜像，但对于个人使用，这似乎有点矫枉过正，也许我会设法拥有自己的“家庭服务器”，然后也许我会成为一个小的本地镜像。

因此，我想要一个主要 URL 列表，然后我可以将其提供给我的网络管理员，并要求他一次性解除对它们的阻止。但是，我似乎无法找到公共托管的 Maven 回购 URL 的“权威列表”。

我当前的解决方案是在家（在同一个项目上）运行相同的 maven 任务，然后将 POM 和 jar 复制到本地 M2 目录中。这工作正常，但只是有点加重，特别是因为我没有使用我认为特别不寻常的第三方库（主要是我使用来自 Apache、Eclipse 和其他一些开源项目的东西）。

我还找到了“nexus-maven-repository-index”文件（在 M2 目录下），但它真的很有帮助……它充满了奇怪的扩展字符和字形，所以我无法从中提取任何信息。

我真的在这里摸不着头脑，我很高兴继续将 ANT 用于我的个人小项目，但我已经到了他们都聚集在一个可怕的史前噩梦中的地步，它们都指向各种库，并且我不想将我的代码发布给我的同事（或公开），而无法在一个位置拥有我在一个位置使用过的所有库的单独列表，并且我的主要应用程序位于主源目录中。

我也在考虑 IVY，但我得到的印象是我最终会遇到同样的问题来获取 poms 和 java 库。

我正在寻找我的网络管理员可以允许流量到 Nexus 的任何解决方案（即我可以将 nexus 设置为仅在特定端口上工作，因此可以过滤所有通信以允许该端口上的传出通信是免费的 - 或者我可以运行nexus 作为特定用户，然后打开该用户以完全打开通信？

任何建议都将被热切接受。

提前致谢。

大卫。

ps，如果您需要任何进一步的信息，请询问。哦，对不起，很长的帖子

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T10:24:46.333

唯一真正已知的位置是[Maven Central](http://repo1.maven.org/maven2/)，所有其他位置也都有存储库，但没有完整的列表。此外，Eclipse 基金会已经开始创建他们自己的 Maven 存储库，但我不知道他们的存储库处于哪个状态以及哪些工件位于其中。另一点是您应该处理只允许 Nexus 访问互联网并关闭 Nexus 内的远程浏览的方式。另一方面，所有构建工具（如 Ivy、Gradle 等）都会遇到同样的问题，因为它们使用相同的想法和基础设施（Maven 存储库）。

# php - 使用ajax将数据传递给php脚本

> ID：10531331
> 
> 赞同：1
> 
> 时间：2012-05-10T09:40:55.200
> 
> 标签：php, javascript, ajax

我被困在这里。我一直在尝试上传一些照片，同时将相册的 ID（值在表单中的隐藏形式中）传递给处理上传的同一 php 脚本。但我不知道如何分别传递专辑 ID 这是代码。

**JS**

```
input.addEventListener("change", function (evt) {
        document.getElementById("response").innerHTML = "<img src='../assets/admin/images/loading.gif' />"
        var i = 0, len = this.files.length, img, reader, file;

    for ( ; i < len; i++ ) {
        file = this.files[i];

        if (!!file.type.match(/image.*/)) {
            if ( window.FileReader ) {
                reader = new FileReader();
                reader.onloadend = function (e) { 
                    showUploadedItem(e.target.result, file.fileName);
                };
                reader.readAsDataURL(file);
            }
            if (formdata) {
                formdata.append("images[]", file);
            }
        }   
    }

    if (formdata) {
        $.ajax({
            url: "../assets/admin/ajaxupload/upload.php",
            type: "POST",
            data: formdata,
            processData: false,
            contentType: false,
            success: function (res) {
                document.getElementById("response").innerHTML = res; 
            }
        });
    } 
```

**PHP**

```
//how do i retrieve the given album id value that was passed.

foreach ($_FILES["images"]["error"] as $key => $error) {
    if ($error == UPLOAD_ERR_OK) {
        $name = $_FILES["images"]["name"][$key];
        move_uploaded_file( $_FILES["images"]["tmp_name"][$key], "../../uploads/pics/" .$_FILES['images']['name'][$key]);

    }
}
echo "<p>Successfully Uploaded Images</p>"; 
```

请我尽快回复谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:58:21.777

（对不起，我没有太多时间解释但希望有所帮助）

在你的 ajax php 文件中

```
$errors = array();  // initialize empty error array
if (sizeof($errors) == 0) {
       ...
       if ($securimage->check($captcha) == false) {
            $errors['captcha_error'] = 'wrong code';
        }
 }
  if (sizeof($errors) == 0) {
        // no errors, send the form
        $return = array('error' => 0, 'message' => 'OK');
        die(json_encode($return));
    } else {
       $errmsg = '';
        foreach ($errors as $key => $error) {
            // set up error messages to display with each field
            $errmsg .= " - {$error}\n";
        }
        $return = array('error' => 1, 'message' => $errmsg);
        die(json_encode($return));
   } 
```

你的js

```
url: 'ajax.php',
        type: "POST",
        data: $('#formID').serialize(),
        success: function(msg) {
            try {
                //                    alert( "Data Saved: " + msg );
                json = jQuery.parseJSON(msg);
                //                      alert(json.error)
                if (json.error == 0) {
                } catch(e) {
                alert("Sorry, there was an error parsing the json");
            }
        },
        error: function(msg) {
            alert("Ajax request failed");
        } 
```

# python - Python xlrd 字符串与单元格的比较

> ID：10531332
> 
> 赞同：0
> 
> 时间：2012-05-10T09:40:58.587
> 
> 标签：python, excel, xlrd

我是 Python 和 xlrd 的新手，在执行（看似）简单的字符串比较时遇到了麻烦：

```
import xlrd

workbook = xlrd.open_workbook('/home/Y725271/Desktop/test_report.xls')
sheet = workbook.sheet_by_index(0)

# Iterate all of the column names and see if col apple exists
col_len = sheet.row_len(0)
for i in range(col_len):
    col = sheet.cell_value(0,i)
    if col.lower() == "apple"
        print "match"
    else
        print "mismatch" 
```

当我通过解释器运行代码时，出现以下错误：

```
 File "<stdin>", line 3
    if col.lower() == "apple"
                            ^
SyntaxError: invalid syntax 
```

我错过了什么或做错了什么？我在比较两个字符串，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:42:39.210

相信解释器并阅读[文档](http://docs.python.org/tutorial/controlflow.html#if-statements)

改变

```
if col.lower() == "apple" 
```

进入

```
if col.lower() == "apple": 
```

# java - 怎么这么快（背后的算法或逻辑）

> ID：10531336
> 
> 赞同：3
> 
> 时间：2012-05-10T09:41:12.067
> 
> 标签：java, oracle, oracle-sqldeveloper

我想知道 Oracle SQL Developer 如何如此快速地获得不同计数，如下图所示，有一个弹出窗口显示用于过滤数据的不同值列表。我有兴趣了解使用的方法或逻辑。![图片](../Images/c4caf20be9be2b89ad91219003fa4144.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:46:27.150

只是推测，它可以使用三种方法

*   如果列在唯一索引中，它可以使用索引为您提供唯一值。
*   否则，它可以搜索所有现有条目。如果数据在内存中，它应该每秒可以做大约一百万。
*   或者根据使用以前的方法或我没有想到的其他方法为您提供缓存的查询结果。

# jquery - 无法填充 jqPlot 条形图

> ID：10531345
> 
> 赞同：2
> 
> 时间：2012-05-10T09:41:45.337
> 
> 标签：jquery, asp.net-mvc, jqplot

目前我似乎无法在我的条形图中生成任何数据。我不确定问题出在我创建的 JSON 字符串还是 jQuery 代码上。

编辑：（一旦我将数组更改为单个值，生成的基本图形但仍然没有条形图）

JSON字符串：`[{"Name":"Poll Results","Serie":[[10],[14],[14],[19]]}]`

jQuery：

```
<script type="text/javascript">
//Enable JQuery IntelliSense for Visual Studio
///<reference path="jquery-1.3.2-vsdoc.js2 />

jQuery(document).ready(function () {
    urlDataJSON = '/Home/BarChartJSON';

    $.getJSON(urlDataJSON, "", function (data) {
        var dataLines = [];
        var dataLabels = "";
        $.each(data, function (entryindex, entry) {
            dataLines.push(entry['Serie']);
            dataLabels = dataLabels + entry['Name'];
        });

        Plot(dataLines, dataLabels);

        function Plot(dataLines, dataLabels) {

            options = {
                legend: { show: true },
                Title: 'Poll Results',                   
                seriesDefaults: {
                    renderer: $.jqplot.BarRenderer,
                    pointLabels: { show: true, location: 'e', edgeTolerance: -15 },
                    shadowAngle: 135,
                    renderOptions: {
                        barDirection: 'horizontal'
                    }
                },
                axes: {
                    yaxis: {
                        renderer: $.jqplot.CategoryAxisRenderer
                    }
                }
            }
        }
        var plot = $.jqplot('barChart', [dataLines], options);
    });
});

</script>

    <h2>barChart</h2>

<div id="barChart" style="height:600px;width:600px;"></div> 
```

![部分生成的图表](../Images/32779d225234b0dac81962f11f56e091.png) 屏幕截图显示了到目前为止生成的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:37:56.953

您的代码中有一些问题，例如，这不是必需的，选项应该是直接进入图表的 var。

`Plot(dataLines, dataLabels); function Plot(dataLines, dataLabels) {`

[查看我为您以前的数据所做的代码示例。](http://jsfiddle.net/cVPjF/7/)

它也适用于此`JSON`，它只会产生一个系列。

# c# - 如何用 &、<、> 符号解析 XElement？

> ID：10531347
> 
> 赞同：0
> 
> 时间：2012-05-10T09:41:55.357
> 
> 标签：c#, xml, xml-parsing, xelement

我有这样的xml

```
<root>
    <text>My test is 5 > 2 & 10 < 12</text>
</root> 
```

当我将其转换为 xElement

```
var xe = XElement.Parse(xml); 
```

我收到错误

如果 xml 内容 & 所以我得到这个错误 «An error occurred while parsing EntityName»

如果 xml 内容 > 所以我收到此错误 «名称不能以 '<' 字符开头，十六进制值 0x3C。»

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T09:43:19.957

> 我有这样的xml

不，那不是 XML。那是一些随机字符串。

您不能使用 XElement 解析无效的 XML。为了使用 XML 解析器，例如 XElement 或 XDocument，您首先需要有一个有效的 XML：

```
<root>
    <text>My test is 5 &gt; 2 &amp; 10 &lt; 12</text>
</root> 
```

因此，请继续通知该字符串的作者，他需要修复它才能获得可以解析的有效 XML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:43:34.650

那是因为那个 XML 是无效的，而生成它的人是有责任的。你应该和他们谈谈修复它，因为如果那是不可能的，你会*承受很大*的痛苦。

具体来说，字符`&`,`<`和`>`（以及属性中的`"`or `'`）应该是对应的[XML 实体](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML)：

```
<root>
    <text>My test is 5 &gt; 2 &amp; 10 &lt; 12</text>
</root> 
```

# ruby - Ruby - Rails - Savon 结构 SOAP XML 主体

> ID：10531349
> 
> 赞同：2
> 
> 时间：2012-05-10T09:42:00.533
> 
> 标签：ruby, ruby-on-rails-3, savon

在 Savon 如何根据元素数量创建标签数组`item_id`？这个还有什么办法吗？

```
item_id = "abc, def, xyz"
n = item_id.split(,).length

    #ItemList shall be of n times by creating ItemList for each
soap.body =  {
    'Body' => {
                'ItemList' => {  
    'ItemId' => "abc"
                }
                'ItemList' => {  
    'ItemId' => "def"
                }
                'ItemList' => {  
    'ItemId' => "xyz"
                }
          }
    } 
```

**编辑**：下面是实际预期 xml 的示例，每个 .xml`Body`应有多个`ItemList`值标签`ItemId`。`ItemId`长度可以是任何东西。

```
item_id = "abc, def, xyz" #split this and make xml for each item.

<Body>
<ItemList>
<ItemId>abc</ItemId> #abc
<TimeStamp>
    <Time>04:57:40</Time>
    <TimeZone>EST</TimeZone>
    <Date>2012-05-12</Date>
</TimeStamp>
<ContactInfo>
    <Phone>888-888-8880</Phone>
    <Email>somebody1@somewhere.com</Email>
    <Name>name1</Name>
</ContactInfo>
</ItemList>

<ItemList>
<ItemId>def</ItemId> #def
<TimeStamp>
    <Time>04:27:40</Time>
    <TimeZone>EST</TimeZone>
    <Date>2012-05-12</Date>
</TimeStamp>
<ContactInfo>
    <Phone>888-888-8881</Phone>
    <Email>somebody2@somewhere.com</Email>
    <Name>name2</Name>
</ContactInfo>
</ItemList>

<ItemList>
<ItemId>xyz</ItemId> #xyz
<TimeStamp>
    <Time>04:37:40</Time>
    <TimeZone>EST</TimeZone>
    <Date>2012-05-12</Date>
</TimeStamp>
<ContactInfo>
    <Phone>888-888-8882</Phone>
    <Email>somebody2@somewhere.com</Email>
    <Name>name3</Name>
</ContactInfo>
</ItemList>
</Body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:30:55.490

我会像这样使用构建器。然后在 Savon 中使用生成的 xml 字符串作为 xml.body。

```
require 'builder'

itemliste = [
  { 'ItemId' => 'abc',
    'TimeStamp' =>
         { 'Time' => '04:57:40', 
           'TimeZone' => 'EST', 
           'Date' => '2012-05-12'},
    'ContactInfo' =>
         { 'Phone' => '888-888-8880', 
           'Email' => 'somebody1@somewhere.com', 
           'Name' => 'John Doe' } },
  { 'ItemId' => 'def',
    'TimeStamp' =>
         { 'Time' => '04:27:40', 
           'TimeZone' => 'EST', 
           'Date' => '2012-05-12'},
    'ContactInfo' => 
         { 'Phone' => '888-888-8881', 
           'Email' => 'somebody2@somewhere.com', 
           'Name' => 'Jane Doe' } },
  { 'ItemId' => 'ghi',
    'TimeStamp' => 
         { 'Time' => '04:17:40', 
           'TimeZone' => 'EST', 
           'Date' => '2012-05-12'},
    'ContactInfo' => 
         { 'Phone' => '888-888-8882', 
           'Email' => 'somebody3@somewhere.com', 
           'Name' => 'Jane Three' } },
  { 'ItemId' => 'xyz',
    'TimeStamp' => 
         { 'Time' => '04:07:40', 
           'TimeZone' => 'EST', 
           'Date' => '2012-05-12'},
    'ContactInfo' => 
         { 'Phone' => '888-888-8883', 
           'Email' => 'somebody4@somewhere.com', 
           'Name' => 'Joe Sixpack' } }
]

item_id = "abc,def,xyz"
keys = item_id.split(',')
xml_body = ""
xml = Builder::XmlMarkup.new(:target => xml_body, :indent => 2)
xml.Body do
  itemliste.each do |item|
    if item_id.include? item['ItemId']
      xml.ItemList do
        xml.ItemId item['ItemId']
        xml.TimeStamp do
          xml.Time item['TimeStamp']['Time']
          xml.TimeZone item['TimeStamp']['TimeZone']
          xml.Date item['TimeStamp']['Date']
        end
        xml.ContactInfo do
          xml.Phone item['ContactInfo']['Phone']
          xml.Name item['ContactInfo']['Name']
          xml.Email item['ContactInfo']['Email']
        end
      end
    end
  end
end
puts xml_body 
```

# c# - 使用未分配的局部变量 groupNode

> ID：10531353
> 
> 赞同：0
> 
> 时间：2012-05-10T09:42:14.560
> 
> 标签：c#, .net, treeview, web-parts, nodes

不知道为什么我会在 Webpart 中为 treeView 收到此错误，老实说，这可能是一个逻辑错误，

```
tree.Nodes.Add(groupNode); 
```

为什么会这样说：S

```
 protected override void CreateChildControls()
    {
        base.CreateChildControls();

        try
        {
            int Index = 0;
            TreeView tree = new TreeView();
            TreeNode groupNode; 
            Dictionary<int, string> GroupList = new Dictionary<int, string>();
            Dictionary<int, string> UserList = new Dictionary<int, string>();
            List<string> IndividualUserList = new List<string>();

            foreach (SPUser user in SPContext.Current.Web.Users)
            {
                string groupName = FormatUserLogin(user.Name);

                if (groupName != "" && groupName != "System Account")
                    IndividualUserList.Add(groupName);
                else if (user.IsDomainGroup && !string.IsNullOrEmpty(groupName) && 
                    Directory.DoesGroupExist(groupName))
                {
                    Index++;
                    GroupList.Add(Index, groupName);
                    List<ADUser> adUsers = Directory.GetUsersFromGroup(groupName);

                    foreach (ADUser member in adUsers)
                    {
                        if (member != null && !string.IsNullOrEmpty(member.DisplayName))
                            UserList.Add(Index, member.DisplayName);
                    }
                }
            }

            IndividualUserList.Sort();

            foreach (string Item in IndividualUserList)
            {
                groupNode = new TreeNode(Item);
            }

            foreach (KeyValuePair<int, string> GroupPair in GroupList)
            {
                groupNode = new TreeNode(GroupPair.Value);
                foreach (KeyValuePair<int, string> UserPair in UserList)
                {
                    if (UserPair.Key == GroupPair.Key)
                    {
                        groupNode.ChildNodes.Add(new TreeNode(UserPair.Value));
                    }
                }
            }

            tree.Nodes.Add(groupNode);

            this.Controls.Add(tree);
        }
        catch (Exception)
        {
            //loggingit
        }
    } 
```

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:45:06.863

因为您在使用它之前没有明确初始化该变量：

考虑到这个可疑代码：

```
foreach (string Item in IndividualUserList)
{
    groupNode = new TreeNode(Item);
} 
```

目前尚不清楚为什么您需要在整个迭代过程中初始化*同一个实例，但是顺便说一下，没有任何保证**不*`IndividualUserList`为空，因此变量可以保持**未初始化**。

 ***为了解决这个问题，在函数的开头，写

```
TreeNode groupNode = null; 
```

或者

```
TreeNode groupNode = new TreeNode(); 
```

**编辑**

或者，正如弗拉德建议的那样，可以选择：

```
TreeNode groupNode = default(TreeNode); 
```

选择基于您的代码流逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:44:46.413

初始化`groupNode`应该有`null`帮助。

```
TreeNode groupNode = null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:45:31.190

如果您的循环不执行，`groupNode`则永远不会分配值 for。你可以做的是做这样的事情：`TreeNode? groupNode = null;`. 这将为变量提供一个初始值，并将删除错误/警告。但是，我建议进行以下更改：

```
if (groupNode != null)
{
     tree.Nodes.Add(groupNode);
     this.Controls.Add(tree);
} 
else
{
     //Do some logic because the variable is still null.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T09:47:20.343

当您仅在*if*或*for块中实例化**groupNode*时，您应该编写：

 **```
TreeNode groupNode = null; 
```

因为 C# 说它可能根本无法到达*if*或*for*块的那一行！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T09:49:12.413

仅当第二个或第三个 for 循环有要迭代的内容时，它才有价值。如果没有要迭代的内容，应该将什么添加到`Nodes`集合中？在这种情况下，编译器希望确保您的意思是`null`^((?))。*****

# visual-studio-2010 - SharePoint 2010 将网站字段导出到 XML 文件

> ID：10531354
> 
> 赞同：2
> 
> 时间：2012-05-10T09:42:18.593
> 
> 标签：visual-studio-2010, powershell, sharepoint-2010, stsadm

我刚刚开始使用 SharePoint 2010（您可能会说有点晚了！）我通过 GUI 创建了一个列表，就像我通常使用 SharePoint 2007 一样。然后我将使用 Gary la pointe stsadm 扩展来提取字段 XML并将它们放入视觉工作室中的功能中。

我想知道这仍然可以完成！我在 2010 stsadm 命令中找不到 gl-Exportsitecolumns 命令！

有没有powershell替代品？

任何帮助或指导将不胜感激。

干杯特鲁兹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:52:59.300

我不知道powershell中的这种替代方案。但是非常简单的解决方案可以是这段代码：

```
$w = Get-SPWeb http://localhost/subweb
$w.Fields | select SchemaXml # option 1: prints all xml to console
$w.Fields | select schemaxmlwithresourcetokens # option 2: the same, but with resource tokens
$w.Fields | %{ $_.schemaxml } | out-file c:\temp\fields.xml -encoding unicode #option 3: saves output to text file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:19:06.847

可以在此处找到 powershell 中的替代方法：Phil Childs[的 export-and-importcreate-site-content.html](http://get-spscripts.com/2011/02/export-and-importcreate-site-content.html)

```
$sourceWeb = Get-SPWeb http://portal
$xmlFilePath = "C:\Install\Script-SiteContentTypes.xml"

#Create Export File
New-Item $xmlFilePath -type file -force

#Export Content Types to XML file
Add-Content $xmlFilePath "<?xml version=`"1.0`" encoding=`"utf-8`"?>"
Add-Content $xmlFilePath "`n<ContentTypes>"
$sourceWeb.ContentTypes | ForEach-Object {
    if ($_.Group -eq "Custom Content Types") {
        Add-Content $xmlFilePath $_.SchemaXml
    }
}
Add-Content $xmlFilePath "</ContentTypes>"

$sourceWeb.Dispose() 
```

# objective-c - 以编程方式设置多值设置 (Settings.bundle) 的 Titles/Values 集合

> ID：10531357
> 
> 赞同：1
> 
> 时间：2012-05-10T09:42:25.763
> 
> 标签：objective-c, ios

是否可以在运行时在多值设置中定义选项集？这个想法是用网络服务提供的当前可用选项来填充选项集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:49:14.480

不可以。设置包是您的应用程序包的一部分，在安装应用程序后无法修改。当设置应用程序运行时，它直接访问您的应用程序的设置包，您的应用程序没有运行，因此您没有机会提供不同的信息。动态设置必须作为应用程序的一部分来实现。

# python - 如何永久添加 Python 导入路径？

> ID：10531359
> 
> 赞同：10
> 
> 时间：2012-05-10T09:42:29.613
> 
> 标签：python, linux, import

我知道我可以像这样向 Python 添加导入路径：

```
import sys

sys.path.append("/path/to/directory/") 
```

但是，当我重新启动 Python 时，它就消失了。如果我不得不一直这样做，我会觉得这很烦人，我想一劳永逸地做这件事并完成它。

又怎样？我在哪里可以找到那个文件？还是我需要编辑其他东西？我正在使用最新版本的 Ubuntu。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T09:45:53.710

来自**man python**

```
 ~/.pythonrc.py
          User-specific initialization file loaded by the user module; not used by default or by most applications.

ENVIRONMENT VARIABLES

   PYTHONPATH
          Augments the default search path for module files.  The format is the same as the shell's $PATH: one or more directory  pathnames
          separated by colons.  Non-existent directories are silently ignored.  The default search path is installation dependent, but gen-
          erally begins with ${prefix}/lib/python<version> (see PYTHONHOME above).  The default search path is always appended to  $PYTHON-
          PATH.   If  a script argument is given, the directory containing the script is inserted in the path in front of $PYTHONPATH.  The
          search path can be manipulated from within a Python program as the variable sys.path . 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T10:19:15.540

您也可以使用路径文件。

如果您想将名为 mymodule 的模块添加到导入路径，请将文件 mymodule.pth 添加到 3rd 方模块的标准目录，通常称为 dist-packages 或 site-packages。在 Ubuntu 上，你可能会在某个地方找到它

```
/usr/local/lib/python2.7/dist-packages 
```

文件 mymodule.pth 应该包含一行，即要添加到 python 导入路径的目录

```
<mymodule.pth>
/path/to/directory/containing/mymodule 
```

目录中的任何 python 模块或包现在都可以从解释器中导入。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T09:46:32.547

您可以设置一个名为`PYTHONPATH`包含您的目录的环境变量。

[在文档](http://docs.python.org/using/cmdline.html#envvar-PYTHONPATH)中阅读有关它的更多信息

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-10T09:46:26.863

从外壳执行以下操作：

```
echo -e "\nexport PYTHONPATH=\$PYTHONPATH:/path/to/directory" >> ~/.bashrc 
```

并重新启动它

# database - SqlException 错误代码

> ID：10531369
> 
> 赞同：2
> 
> 时间：2012-05-10T09:43:05.653
> 
> 标签：database, sqlexception, error-code

我有一个问题，这不是问题。我的数据库有一些限制，作为唯一名称（存储必须唯一名称的列）插入或更新时，数据库会验证我们是否没有覆盖某些名称，如果是，则返回可转换为 SqlException 的错误带代码 2627

我的问题是......如果存在一些表格或我可以咨询的东西来指示最终用户该怎么做？

在这种情况下..存在同名用户....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:47:58.143

我认为，您应该查看 SqlExceptions [Errors 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.errors.aspx)并查看[错误编号](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlerror.number.aspx)，它应该将您指向 master.dbo.sysmessages 表中的一条消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-11T10:25:49.430

这里报告了各种错误代码的含义：[https ://docs.microsoft.com/en-us/sql/relational-databases/errors-events/database-engine-events-and-errors?view=sql-server -ver15](https://docs.microsoft.com/en-us/sql/relational-databases/errors-events/database-engine-events-and-errors?view=sql-server-ver15)。确保在左侧选择正确的数据库版本。

# macos - MacOS：手动强制启动守护进程

> ID：10531370
> 
> 赞同：10
> 
> 时间：2012-05-10T09:43:06.837
> 
> 标签：macos, unix, daemon, launchd

我在 /Library/LaunchDaemon/ 中创建了一个 plist 文件

运行它的计算机无法重新启动（服务器），它正在运行 MacOS Tiger。我希望以下命令可以完成这项工作，但它指出它并不意味着直接运行：

```
launchd /Library/LaunchDaemon/parallel.plist 
```

如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T10:24:59.330

```
sudo launchctl load /Library/LaunchDaemons/parallel.plist 
```

应该导致守护程序自动运行。

请参阅 [http://www.aandcp.com/launchdaemons-and-mac-os-x-openvpn-as-an-example](http://www.aandcp.com/launchdaemons-and-mac-os-x-openvpn-as-an-example)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-12T21:03:34.910

我知道这篇文章已经有了答案，但因为这是一个不常见的话题，我想我也会参与进来。对我有用的命令是

sudo launchctl kickstart system/com.example.service

这个守护进程的 plist 需要在 /Library/LaunchDaemons 中。

# node.js - 在 NodeJS 中使用 Zlib 压缩文件

> ID：10531372
> 
> 赞同：2
> 
> 时间：2012-05-10T09:43:10.093
> 
> 标签：node.js, coffeescript, zlib, cakefile

我正在尝试为一个小型 javascript 库编写一个简单的 Cakefile 构建脚本。我想 gzip 一个源字符串并将结果写入文件。这是我到目前为止所拥有的：

```
zlib.deflate minifiedjavaScriptSource, (error, buffer) ->
    fs.writeFileSync(javascript_destination_gzipped_minified_path, buffer) 
```

`.gz`当我运行脚本时，它按预期生成了一个文件。但是，当我解压缩此文件时，我得到一个`.cpgz`文件。如果我尝试解压缩它，它只会再次生成原始文件。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T07:48:20.110

您想要`gzip`，但正在使用`deflate`。:)

试试`zlib.gzip ...`，效果很好：

```
% coffee
coffee> zlib = require('zlib'); 'ok'
'ok'
coffee> fs = require('fs'); 'ok'
'ok'
coffee> zlib.gzip('qweqweqweqwe', (_, buf) -> fs.writeFile('/tmp/test.gz', buf))
undefined

% zcat /tmp/test.gz
qweqweqweqwe 
```

# java - Jython，仅使用 Java 中的 Python 方法？

> ID：10531376
> 
> 赞同：14
> 
> 时间：2012-05-10T09:43:20.753
> 
> 标签：java, python, jython

在阅读和使用[本文](http://www.rexx.com/~dkuhlman/jython_course_03.html#example-the-jython-classes)时，假设我们有一个完整的对象定义，其中包含从 python 到 java 的类和映射（代理）对象。

是否可以只从 python 中的一段代码导入一个方法（不是在类内部定义，而是使用内部 python 类）而不将其包装在类定义中（不使用上述工厂范式）。

我想从java做一些事情`from myPyFile import myMethod`，然后直接从java使用myMethod（也许作为静态方法？）？但是如果这是可能的，我没有找到任何线索来说明如何做到这一点（文章中描述的接口内容可能仍然需要告诉 Java 如何使用 myMethod ？）

此致。

**编辑**：我现在正在处理***Jython 2.5.2***，所以它可能依赖于版本并且将来会更容易吗？

**编辑：**下面回复丹尼尔：

这是一个示例代码，用于重现我得到的错误，并从您的有用回复中获得一个工作示例！

*（好吧，在从yield* -ed Python/Jython 结果映射回 Java 对象时添加一点其他问题）

（@Joonas，对不起，我已经修改了我的代码，现在我无法回到我曾经遇到的错误）

```
import org.python.core.Py;
import org.python.core.PyList;
import org.python.core.PyTuple;
import org.python.core.PyObject;
import org.python.core.PyString;
import org.python.core.PySystemState;
import org.python.util.PythonInterpreter;

interface MyInterface {
    public PyList getSomething(String content, String glue, boolean bool);
}
class MyFactory {

    @SuppressWarnings("static-access")
    public MyFactory() {
        String cmd = "from mymodule import MyClass";
        PythonInterpreter interpreter = new PythonInterpreter(null, new PySystemState());

        PySystemState sys = Py.getSystemState();
        sys.path.append(new PyString("C:/jython2.5.2/Lib"));

        interpreter.exec(cmd);
        jyObjClass = interpreter.get("MyClass");
    }

    public MyInterface createMe() {
        PyObject myObj = jyObjClass.__call__();
        return (MyInterface)myObj.__tojava__(MyInterface.class);
    }

    private PyObject jyObjClass;
}

public class Main {

    public static void main(String[] args) {

    /*
// with only :
    PythonInterpreter interpreter = new PythonInterpreter();

     i get : 
Exception in thread "main" Traceback (most recent call last):
  File "<string>", line 1, in <module>
LookupError: no codec search functions registered: can't find encoding 'iso8859_1'

which is probably due to the : 
#!/usr/bin/env python
# -*- coding: latin-1 -*-

// yes i am from France, so my - sorry for that - bad english ;) and have to deal with non 127 ascii chars :)
     */

    PythonInterpreter interpreter = new PythonInterpreter(null, new PySystemState());

    PySystemState sys = Py.getSystemState();
    sys.path.append(new PyString("C:/jython2.5.2/Lib"));

    interpreter.exec("from mymodule import getSomething"); 
    PyObject tmpFunction = interpreter.get("getSomething"); 
    System.err.println(tmpFunction.getClass()); 
    MyInterface i = (MyInterface) tmpFunction.__tojava__(MyInterface.class); 
    System.err.println(i.getSomething("test", " - ", true));
    for (Object x : i.getSomething("test", " - ", true)) {
        System.out.println(x);
        // How can i get back an equivallent of the Python _"for (a, b) in getSomething:"_ 
        // with _"a"_ being PyUnicode or better String, and _"b"_ being boolean ?
    }

    // ^^ so adapting Daniel Teply solution works ! Thanks to him... 
    // BTW the part below did not work : but i may have missed or/and also mixed many things :/
    // i feel Jython damned hard to dive in :/ 
    // and really hope that the sample that i post and answers that i get will help others to swim!

    try {
        MyFactory factory = new MyFactory();
        MyInterface myobj = factory.createMe();

        PyList myResult = myobj.getSomething("test", " - ", true);
        System.out.println(myResult);
    }
    catch (Exception e) {
        System.out.println(e);
        // produce a : java.lang.ClassCastException: org.python.core.PySingleton cannot be cast to MyInterface
        // EDIT : see below last edit, this error may be due to my forgotten heritage from interface in the python code!
    }

    System.exit(-1);
    }
} 
```

Python部分：（mymodule.py）

```
#!/usr/bin/env python
# -*- coding: latin-1 -*-

class MyClass:
    def __init__(selfself):
        pass
    def getSomething(self, content, glue = '', bool = True):
        for x in range(5):
            yield (glue.join(map(str, (content, x, chr(97 + x))))), bool
        #return list()

def getSomething(content, glue = '', bool = True):
    print "test"
    myclass = MyClass()
    return list(myclass.getSomething(content, glue, bool))

def main():
    test()

if __name__ == "__main__":
    main() 
```

**编辑**：

对于内心的问题（内部评论）部分回答我自己：（
实际上我觉得我的答案和代码很丑，但它可以工作并且似乎可以取消*元组*我不知道是否有更好的 Jythonic 方式来做它，如果是这样，我真的很感兴趣:)）

```
for (Object x : i.getSomething("test", " - ", true)) {
    System.out.println(x);
    // How can i get back an equivallent of the Python _"for (a, b) in getSomething:"_ 
    // with _"a"_ being PyUnicode or better String, and _"b"_ being boolean ?

    // answering myself here :
    PyTuple mytuple = (PyTuple) x; // casting back x as PyTuple, can we have a java equivalent to _`(a, b) = x_ ? not sure...
    PyObject a = mytuple.__getitem__(0);
    PyObject b = mytuple.__getitem__(1);
    String aS = a.toString(); // mapping a unicode python string to java is as simple?
    boolean bB = b.toString().toLowerCase().equals("true");
    System.out.println(mytuple + "[" + aS + "][" + b + "][" + bB + "]"); 
```

**编辑：**

回答自己关于“产生一个：*”java.lang.ClassCastException：org.python.core.PySingleton 不能转换为 MyInterface”*的部分......我的大部分误解和错误是由于我忘记了从 Python 部分处理 Java！（参见我上面的代码，我没有更正这个事实，因为这不是我的主要问题，并且在实际形式中，它是关于这个主要问题的有效答案，非常感谢 Daniel 和帮助我理解的 Joonas）。因此对于工厂范式，不应**忘记**将适当的导入添加到其 Python 文件中：

```
from testjython.interfaces import MyInterface #// defining method inside a MyInterface.java

class MyClass(MyInterface):
    [...] 
```

我遇到的另一个困难是正确处理导入和包。顺便说一句，将此代码添加到上面的代码会产生*TypeError: can't convert to org.python.core.PyList*但这是另一个问题......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T15:35:12.877

You can use `PyObject.__call__(Object... args)` to invoke any callable Python object. You can get the PyFunction representing your function from the java side the same way you example is getting the python employee class.

Alternativeley, you can hide this behind a single method interface on the java side by calling `__tojava__(Interface.class)` on the function you retrieved from the Python interpreter. Detailed example (actually tested!): python file:

```
def tmp():
    return "some text" 
```

java:

```
public interface I{
    public String tmp();
}

public static void main(String[] args) {
    PythonInterpreter interpreter = new PythonInterpreter();
    interpreter.exec("from test import tmp");
    PyObject tmpFunction = interpreter.get("tmp");
    System.err.println(tmpFunction.getClass());
    I i = (I) x.__tojava__(I.class);
    System.err.println(i.tmp());

} 
```

output:

```
class org.python.core.PyFunction
some text 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T09:52:07.020

只导入一个方法是不可能的，因为在Java 中，方法（或函数）不是一等对象，也就是说，如果不首先引用某个类（或接口），就无法引用方法。甚至静态方法也包含在一个类中，您可以通过类对象引用它们。

但是，您可以非常接近 Jython 2.5.2 中引入的解决方案：Jython 函数直接作为单个抽象方法 Java 接口的实现工作（请参阅[http://www.zyasoft.com/pythoneering/2010/09/jython- 2.5.2-beta-2-is-released/](http://www.zyasoft.com/pythoneering/2010/09/jython-2.5.2-beta-2-is-released/)）。所以你可以在 Java 中定义一个接口——它必须包含一个方法定义：

```
interface MyInterface {
    int multiply(int x, int y);
} 
```

加上 Jython 中的类似内容：

```
myFunction = lambda x, y : x * y 
```

并将其用作`MyInterface`Java 中的 a 。您仍然必须使用某种工厂模式，如您链接到的文章中所述，将 Jython 函数获取到 Java，但是这样的工作（可能包含错误，但想法是）：

```
PyObject myFunction = interpreter.get("myFunction"); 
MyInterface myInterface = (MyInterface)myFunction.__tojava__(MyInterface.class);
int x = myInterface.multiply(2, 3); // Should return 6. 
```

# php - 搜索字符串并检查结果是否在 php 列表中

> ID：10531382
> 
> 赞同：0
> 
> 时间：2012-05-10T09:43:39.723
> 
> 标签：php

只是一个关于性能和可扩展性的简单问题。我需要从其用户代理字符串中识别出 Android 手机的确切型号，然后如果该型号在特定列表中，则调用一个页面。所以我使用“stristr”函数和一个简单的if条件，方式如下：

```
$ua = $_SERVER['HTTP_USER_AGENT'];
if ( stristr($ua, "Nexus S") || stristr($ua, "GT-I9003")  || stristr($ua, "GT-I9000") || stristr($ua, "SGH-T959D") || stristr($ua, "SGH-I897") || stristr($ua, "GT-I9088") || stristr($ua, "GT-I9100")  ) {
        $page = "android_specific.html";
        header('Location: ' . $page);
    } 
```

所以问题是：有没有更优雅，也许更好（更快）的方法来进行这种比较？我猜有一个数组和一个for循环？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:04:01.243

使用数组可能会使更新更简单

```
$ua = "User agent is Nexus S";
$agents = array("Nexus S","GT-I9003");
$page = "default.html";
foreach ($agents as $agent)
{
  if (stripos($ua,$agent)!==FALSE)
  {
    $page = "andriod.html";
    break;
  }
}
echo $page; 
```

# python - 现有扩展的 Django Admin 修改 (django_taggit)

> ID：10531384
> 
> 赞同：0
> 
> 时间：2012-05-10T09:43:47.930
> 
> 标签：python, django, admin, django-taggit

在一个 Django 项目中，我安装了 django_taggit 扩展。它与 Django 管理界面很好地集成在一起。我有两个问题：

## 问题一：`flatchoices`

我无法在可标记模型的列表视图中显示逗号分隔的标记列表。意义：

```
# models.py
class Topic(models.Model):
    name = models.CharField(max_length=100)
    tags = TaggableManager(blank=True)

# admin.py
class TopicAdmin(admin.ModelAdmin):
    list_display = ('name', 'tags')

admin.site.register(Topic, TopicAdmin) 
```

引发错误：

```
AttributeError: 'TaggableManager' object has no attribute 'flatchoices' 
```

问题：**如何在不更改扩展源的情况下添加我需要的功能，以便我仍然能够进行更新？**

## 问题 B：`prepopulated_fields`

如果我导航到“添加标签”管理视图，我可以（自然地）添加新标签。有两个必填字段：**name**和**slug**。

我希望通过 预先填充 slug `prepopulated_fields = {"slug": ("name",)}`，这样我就不必手动输入 slug。

问题：**如何添加`prepopulated_fields`属性？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:33:46.040

1.  明智地使用[官方文档](http://django-taggit.readthedocs.org/en/latest/admin.html)
2.  为标签创建自己的管理类（继承 taggit 的管理员），然后使用：

    ```
    admin.site.unregister(Tag)
    admin.site.register(Tag, YourTagClass) 
    ```

# tsql - SQL Server 2005。转换（nvarchar，my_datetime_column，126）。缺少毫秒

> ID：10531387
> 
> 赞同：1
> 
> 时间：2012-05-10T09:43:51.487
> 
> 标签：tsql, sql-server-2005

我有 SQL Server 2005 和一个有 2 列类型的表`datetime`。

我的查询是：

```
select 
    DocDate, 
    CONVERT(nvarchar, DocDate, 126), 
    _stamp, 
    CONVERT(nvarchar, _stamp, 126) 
from 
    dochead 
where 
    id = 4493130 
```

结果是：

```
DocDate                   (no column name)      _stamp                    (no column name)
2011-08-31 00:00:00.000   2011-08-31T00:00:00   2011-08-31 16:01:17.243   2011-08-31T16:01:17.243 
```

如您所见，第二列没有毫秒。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T10:31:13.413

根本没有毫秒部分，你可以`.000`手动添加：

```
select 
    DocDate, 
    left(CONVERT(nvarchar, DocDate, 126) + '.000', 23)
    _stamp, 
    left(CONVERT(nvarchar, _stamp, 126) + '.000', 23)
from 
    dochead 
where 
    id = 4493130 
```

现场示例：[http ://sqlfiddle.com/#!3/d41d8/955](http://sqlfiddle.com/#!3/d41d8/955)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T10:45:39.677

这是一个有效的 ISO 8601 日期时间表示，这就是你得到的所有[格式。`126`](http://msdn.microsoft.com/en-us/library/ms187928.aspx)讨厌引用[维基百科](http://en.wikipedia.org/wiki/ISO_8601)，但是：

> *   为了降低准确性，[5] 可以从任何日期和时间表示中删除任意数量的值，但顺序是从最不重要到最重要。例如，“2004-05”是一个有效的 ISO 8601 日期，表示 2004 年 5 月（第五个月）。这种格式永远不会表示 2004 年未指定月份的第 5 天，也不会表示从2004 年到 2005 年。
>     
>     
> *   如果特定应用需要，该标准支持将小数部分添加到表示中的最小时间值。

因此，秒的小数部分（例如毫秒）是这种格式的可选部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:50:17.737

尝试这个

```
select 
DocDate, 
CONVERT(nvarchar, DocDate, 126), _stamp, 
CONVERT(nvarchar, _stamp, 126) 
from  dochead where 
id = 4493130 
```

# jquery - 限制打开时在 HTML 下拉列表中显示的项目

> ID：10531388
> 
> 赞同：1
> 
> 时间：2012-05-10T09:43:52.687
> 
> 标签：jquery, html, html-select

我在下拉列表中有 10 个项目，当我打开下拉列表时只想显示前 5 个项目，其余项目应保持滚动状态。

我有以下代码来控制`JS`.

```
$(function(){
  $("#myList").click(function(){
    $(this).attr('size', '5');
  });
}); 
```

`HTML`在...中设置以下内容

```
<select size="5">
  <option value=""></option>
  ...
</select> 
```

将使下拉菜单始终默认显示 5 个项目，并且浏览器可能会以自己的方式处理此问题，因此我想通过`JS`.

这样做的**问题**是它打开了 5 个项目，但没有像正常下拉菜单那样自动关闭，直到页面刷新（显然）。请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:48:41.780

您可以更改列表以显示多个项目，然后仅在删除悬停时显示所选项目：

```
$(document).ready(function(){

$("#mylist").hover(function(){

$(this).attr('size', '5');
},function(){
 $(this).removeAttr("size");   
});

});​ 
```

[**-- 看演示 --**](http://jsfiddle.net/q2c9j/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T07:10:47.047

但是，接受的解决方案工作得很好，但仅适用于**1.9**之前的 jQuery 版本，因为此后该版本[`hover`已弃用](https://jquery.com/upgrade-guide/1.9/#quot-hover-quot-pseudo-event)。

但是，如果您不想切换到较新版本，则可以使用[jQuery migrate 插件](https://jquery.com/upgrade-guide/1.9/#jquery-migrate-plugin)使用 make`hover()`和其他不推荐使用的功能。

`jQuery`更高版本ie v1.9 +的替代解决方案

```
$(function(){
  $("#myList").on({
    mousedown: function(){
      $(this).attr('size', '5');
    },

    mouseleave: function(){
      $(this).removeAttr('size');
    }
  });
}); 
```

这是一个[**有效的演示**](http://jsbin.com/duworu/edit?html,js,output)。

# php - php中的MySql查询问题

> ID：10531390
> 
> 赞同：2
> 
> 时间：2012-05-10T09:43:55.403
> 
> 标签：php, mysql, sql

我有一个数据库表 category_path 它在父子关系中，它看起来像这样

```
-----------------------------
 id   |    parent_id
------------------------------
  1   |   NULL        
  2   |   1        
  3   |   2        
  4   |   1        
  5   |   3        
  6   |   2 
```

使用这个表我想创建一个新表，它会给我这样的输出。下表显示了每个 id 从父 0 到该 id 的距离，方法是遍历其父项。

```
----------------------------------
   #  |id     | parent_id | distance    
----------------------------------
   1  |  1    |   1       |   0  
   2  |  1    |   2       |   1  
   3  |  1    |   3       |   2  
   4  |  1    |   4       |   1  
   5  |  1    |   5       |   3  
   6  |  1    |   6       |   2
   7  |  2    |   2       |   0
   8  |  2    |   3       |   1
   9  |  2    |   5       |   2
   10 |  2    |   6       |   1
   11 |  3    |   3       |   0
   12 |  3    |   5       |   1
   13 |  4    |   4       |   0
   14 |  5    |   5       |   0
   15 |  6    |   6       |   0 
```

如何通过数据库查询或编码来获得这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:20:42.660

最后在这里度过整个晚上是您的解决方案：

```
function findValue($key,$src){

    return $src[$key];
}    

function inPatentList($val, $patent_list){

    return (in_array($val, $patent_list)) ? true : false;
}

function findFullTraverse($id, $src,&$str){
    if(0 != ($value = findValue($id, $src))){
        if($str==''){
            $str .= $value;
        }else{
            $str .= '_'.$value;
        }
        findFullTraverse($value,$src,$str);
    }
}
$id_parent = array(
    '1' => '0',
    '2' => '1',
    '3' => '2',
    '4' => '1',
    '5' => '3',
    '6' => '2',
);
$parent = array_values($id_parent);
$ids = array_keys($id_parent);

$depth = array();
$keys_for_value = array();
$id_parent = array_reverse($id_parent, true);
foreach($id_parent as $key => $val){

    $depth[] = $key.'_'.$key.'_0';
    if(inPatentList($key, $parent)){
        $keys_for_value = array_keys($id_parent, $key);
        $depth_found[$key] = $keys_for_value;
        foreach ($depth_found[$key] as $value){
            $str = '';
            findFullTraverse($value, $id_parent,$str);
            //echo $value.'=>'.$str.'<br/>';
            $traverse_array = explode('_', $str);
            for($i=0;$i<sizeof($traverse_array);$i++){
                $has_depth = $i + 1;
                $depth[]=$traverse_array[$i].'_'.$value.'_'.$has_depth;
            }
        }
    }
}

sort($depth);
echo '<pre>';
print_r($depth);
echo '<pre>'; 
```

希望这应该工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:28:10.917

使用图形引擎，它是为 [http://openquery.com/products/graph-engine设计的](http://openquery.com/products/graph-engine)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-10T09:57:19.810

```
SELECT `id`, `parent_id`, (`id` - `parent_id`) as `difference` 
  from `category_path`... 
```

# android - 将 res id 传递给 Android 适配器

> ID：10531396
> 
> 赞同：0
> 
> 时间：2012-05-10T09:44:20.843
> 
> 标签：android, adapter

如果我使用适配器（ArrayAdapter、SimpleAdapter、SimpleCursorAdapter），我总是需要传递将用于每个项目的布局的 res id。我需要在设计时了解所有内容，如果不是这样怎么办。我只知道在运行时我需要在一个布局上使用五个 TextView，并且我想动态地创建这样的布局并将其传递给适配器。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:54:56.473

确实可以以`View`编程方式创建层次结构。您可以参考创建[自定义组件](http://developer.android.com/guide/topics/ui/custom-components.html)来了解其中的一些方法。

# java - 将 servlet 类扩展为自定义类以获得更多自定义响应

> ID：10531398
> 
> 赞同：0
> 
> 时间：2012-05-10T09:44:30.910
> 
> 标签：java, jakarta-ee, inheritance, servlets

在我的项目中，为了插入、更新和删除我向 servlet 类请求的数据，然后它处理并取回响应。

这一切都是通过 jQuery ajax 发生的。

现在它只响应成功或失败，如下所示

```
PrintWriter out =   response.getWriter();
out.println("<custom message>"); 
```

现在我想让这条信息更有意义

默认情况下，我将接受 1 个参数调用`"format"`，如果格式是，`null`那么默认情况下，特定的 servlet 类将以`json`格式响应，否则只有 2 个选项将在那里`json`并且`xml`。

然后我需要设置`response.setContentType("application/json");`等。

所以我将制作一个 servlet 类如下

```
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class myservlet extends HttpServlet {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    public void doPost(HttpServletRequest req,HttpServletResponse resp) throws ServletException,java.io.IOException
    {
        String format   =   req.getParameter("format");

        if(format == null)
        {
            format  =   "json";
        }
        else
        {
            if(format.equals("json"))
            {
                resp.setContentType("application/json");
            }
            else if(format.equals("xml"))
            {
                resp.setContentType("application/rss+xml");
            }
            else
            {
                //error
            }
        }
    }

    public void doGet(HttpServletRequest req,HttpServletResponse resp) throws ServletException,java.io.IOException
    {
        String format   =   req.getParameter("format");

        if(format == null)
        {
            format  =   "json";
        }
        else
        {
            if(format.equals("json"))
            {
                resp.setContentType("application/json");
            }
            else if(format.equals("xml"))
            {
                resp.setContentType("application/rss+xml");
            }
            else
            {
                //error
            }
        }
    }

} 
```

上面的这个类扩展如下

导入 java.io.PrintWriter；

```
import javax.servlet.ServletException;

public class abc extends myservlet
{
    private static final long serialVersionUID = 1L;

    public void doPost(HttpServletRequest req,HttpServletResponse resp) throws ServletException,java.io.IOException
    {
        PrintWriter out     =   resp.getWriter();
            out.println("{/"id/": /"file/"}");
        //response must be converted to either json or to xml
    }
} 
```

有可能..??

我如何将响应转换为任一`xml`或`json`动态...？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:57:31.697

不要在 servlet 中执行此操作。这是创建过滤器来完成转换工作的好时机。

1.  过滤器使用[ServletResponseWrapper](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletResponseWrapper.html)并将其传递给 servlet
2.  Servlet 保存响应
3.  过滤器检查参数并委托给适当的转换器（json、xml） - 后处理。

# iphone - 如何在 tableview 中获取 youtube 嵌入视频并在处理“完成”按钮时遇到问题

> ID：10531401
> 
> 赞同：6
> 
> 时间：2012-05-10T09:44:39.343
> 
> 标签：iphone, objective-c, uiwebview, youtube

如何在 a 中获取 YouTube 视频`UITableViewCell`，以及如何处理播放视频的-`Done`按钮`UIWebView`？

我已将视频嵌入到视图中，但就像在图像上一样。我想要这张`Done`图片中的这个按钮：

![截屏](../Images/ffbbcace94ba114a93b74aa070913292.png)

我想在返回视图时打开另一个屏幕，而不是前一个视图。

```
-(void)viewDidLoad {
    [super viewDidLoad];
    videoURL = [[NSString alloc]init];
    videoURL =@"http://www.youtube.com/watch?v=aE2b75FFZPI";
    [self embedYouTube:videoURL frame:CGRectMake(10, 85, 300, 180)];
}

- (void)embedYouTube:(NSString*)url frame:(CGRect)frame {  
    NSString* embedHTML = @"\ <html><head>\ <style type=\"text/css\">\ body {\ background-color: transparent;\ color: red;\ }\ </style>\ </head><body style=\"margin:0\">\ <embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \ width=\"%0.0f\" height=\"%0.0f\"></embed>\ </body></html>";  
    NSString* html = [NSString stringWithFormat:embedHTML, url, frame.size.width, frame.size.height];  
    if (videoView == nil) {  
        videoView = [[UIWebView alloc] initWithFrame:frame];  
        [self.view addSubview:videoView];  
        NSLog(@"html%@",html);
    }  

    [videoView loadHTMLString:html baseURL:nil];  
} 
```

我需要一些帮助。我进行了搜索，但没有得到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:31:37.823

由于这一直没有得到答复，我想我可以提供一个建议。我相信最终结果与您正在寻找的结果相同，但到达那里的路径略有不同。

因此，据我了解，您希望 UITableView 控制器在您单击它们时显示播放的 YouTube 视频列表。这是我在我的一个应用程序中处理这种情况的方法。

1.  您需要在列表中获取所需视频的 RSS 提要。这很简单……如果是针对用户的，格式为**http://www.youtube.com/rss/user/{USERNAME}/videos.rss**
2.  因此，您需要从那里将 RSS 提要解析为具有标题、描述、缩略图和视频链接的对象列表。所有这些都在 RSS 中提供，我使用**NSXMLParser**来完成这项工作。
3.  一旦你有一个很好的值对象列表可以使用，你需要做的就是让表触发**MPMoviePlayerViewController**并将 URL 传递给它来播放电影。

**didSelectRowAtIndexPath 实现**

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    /** self.items is just a mutable array of video objects that is the underlying 
        datasource for the table.  The Video object is just a simple value object 
        I created myself */
    Video *video = [self.items objectAtIndex:[indexPath row]];

    MPMoviePlayerViewController *mp = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:video.video]];

    [self presentMoviePlayerViewControllerAnimated:mp];

    [mp release];
} 
```

这是我的 Video 类的界面的样子

```
@interface Video : NSManagedObject {

@property (nonatomic, retain) NSString * title;
@property (nonatomic, retain) NSString * link;
@property (nonatomic, retain) NSString * comments;
@property (nonatomic, retain) NSString * thumbnail;
@property (nonatomic, retain) NSString * pubDate;
@property (nonatomic, retain) NSString * video;
@property (nonatomic, retain) NSString * guid;
@property (nonatomic, retain) NSString * desc;

@end 
```

差不多就是这样，一个在 UITableViewController 中显示 YouTube 视频的好方法。我不会进入 XML 解析，那里有大量关于如何做到这一点的文档。我刚刚做了一个快速的谷歌搜索，这个博客实际上深入了解了我正在谈论的内容：

[http://useyourloaf.com/blog/2010/10/16/parsing-an-rss-feed-using-nsxmlparser.html](http://useyourloaf.com/blog/2010/10/16/parsing-an-rss-feed-using-nsxmlparser.html)

希望这能让你继续前进。我知道这并没有解决将标记放在 WebView 中的问题，但我认为您会发现这种方式更直观，并且由于没有太多响应......希望它能让您启动并运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T03:11:17.343

您要做的就是弄乱 UIWebView 使用的媒体播放器。这可以通过监视 uiviewanimation 通知然后通过一堆子视图来完成，但它会涉及使用私有方法，因此不建议特别推荐，因为私有媒体播放器的行为方式会随每个操作系统而变化。我建议使用 jerrylroberts 的答案并获得 YouTube 视频的直接链接。

# jquery - 如何使用 jQuery 和 AJAX 进行分页？

> ID：10531403
> 
> 赞同：1
> 
> 时间：2012-05-10T09:44:44.980
> 
> 标签：jquery, jsonp

我想对来自服务器的 JSON 结果进行分页。我正在使用 HTML5、jQuery 和 AJAX 调用来获取数据。我能够从服务器获取数据，如下所示...

示例：我使用 Ajax 调用（JSON 结果）从服务器收到 10 条记录，我想为每个页面显示 5 条记录。

```
{"name" : "GPR1"},{"name": "GPR2"},{"name" : "GPR3"},{"name" : "GPR4"},{"name" : "GPR5"},{"name" : "GPR10"},{"name" : "GPR9"},{"name" : "GPR8"},{"name" : "GPR7"},{"name" : "GPR6"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:51:46.163

您可以使用一些 Jquery 插件对获取的结果进行分页，即使 obviuos 是在 Google 上搜索“Jquery pagination plugin”。以下是上述搜索的结果： [http](http://www.jqueryrain.com/2012/04/best-ajax-jquery-pagination-plugin-tutorial-with-example-demo/) ://www.jqueryrain.com/2012/04/best-ajax-jquery-pagination-plugin-tutorial-with-example-demo/ 。自定义解决方案是：

*   将 JSON 数据保存在全局变量中（缓存在内存中）
*   放置您自己的分页控件（上一个和下一个按钮）
*   在分页按钮上绑定“点击”以触发分页
*   -> 分页是通过使用基本的javascript“切片”方法完成的，然后显示数据。

# jquery - 使用带有查询的 html 填充 div

> ID：10531406
> 
> 赞同：0
> 
> 时间：2012-05-10T09:44:50.967
> 
> 标签：jquery, html

> **可能重复：**
> [如何在 jquery 中获取 textarea 的值？](https://stackoverflow.com/questions/10507294/how-to-get-the-value-of-a-textarea-in-jquery)

我有以下 HTML：

```
<div id="textdescription"></div> 
```

以及以下 jQuery（var 从表单 textarea 获取值）：

```
var description = $('#inputDescription').html();
$('#textdescription').html(description); 
```

如何将值放入#description

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T09:46:27.977

[val()](http://api.jquery.com/val/) : val() 方法主要用于获取输入、选择和文本区域等表单元素的值。

[html()](http://api.jquery.com/html/)：获取匹配元素集中第一个元素的 HTML 内容。

[text()](http://api.jquery.com/text/)：获取匹配元素集中每个元素的组合文本内容，包括它们的后代。

```
 var description = $('#inputDescription').val();
     $('#textdescription').html(description); 
```

在此处查看演示[JsFiddle 演示](http://jsfiddle.net/tAXYg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:47:11.620

```
$("#description").val("something you want to put"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:47:37.550

你必须使用

```
$('#inputDescription').val(); 
```

用于输入（包括文本区域）元素而不是`.html()`

这是一个[jsfiddle示例](http://jsfiddle.net/joycse06/Gbt9L/)

# jquery - Jcarousel 外部控制问题

> ID：10531407
> 
> 赞同：1
> 
> 时间：2012-05-10T09:44:52.137
> 
> 标签：jquery, jcarousel

我正在使用 jcarousel 插件在同一页面中播放多个滑块，每个滑块都有外部控件，但是点击一个控件会为所有滑块设置动画，而不是所属控件！这里的代码：

```
<div id="mycarousel">
    <ul>
    <li>item</li>
    <li>item</li>
    </ul>
<div class="control">
  <a href="#" class="nav_active">1</a>
  <a href="#">2</a>
</div>  
 </div>          
<div id="mycarousel_2">
    <ul>
    <li>item</li>
    <li>item</li>
    </ul>
<div class="control">
  <a href="#" class="nav_active">1</a>
  <a href="#">2</a>
</div> 
```

JS

```
/**
 * We use the initCallback callback
* to assign functionality to the controls
*/
function mycarousel_initCallback(carousel) {
jQuery('.control a').bind('click', function() {
    carousel.scroll(jQuery.jcarousel.intval(jQuery(this).text()));
    $('.control a').removeClass('nav_active');
    $(this).addClass('nav_active');
    return false;
}); 
jQuery('.jcarousel-scroll select').bind('change', function() {
    carousel.options.scroll = jQuery.jcarousel.intval(this.options[this.selectedIndex].value);
    return false;
});
 };

  // Ride the carousel...
 jQuery(document).ready(function() {
jQuery("#mycarousel, #mycarousel_2").jcarousel({
    scroll: 1,
    animation: 1000,
    easing: 'easeOutQuart',
    vertical: true,
    initCallback: mycarousel_initCallback,
    // This tells jCarousel NOT to autobuild prev/next buttons
    buttonNextHTML: null,
    buttonPrevHTML: null
});
}); 
```

请帮忙，我需要让每个滑块都使用自己的控件单独运行！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:27:07.323

你可以使用它，它对我有用：

**HTML**

```
<div class="carousel_content">
    <ul class="mycarousel">
        <li>item1</li>
        <li>item2</li>
        <li>item3</li>
        <li>item4</li>
    </ul>
    <div class="controls">
        <a href="#" class="prev">Previous</a>
        <a href="#" class="next">Next</a>
    </div>  
</div>          

<div class="carousel_content">
    <ul class="mycarousel">
        <li>item1</li>
        <li>item2</li>
        <li>item3</li>
        <li>item4</li>
    </ul>
    <div class="controls">
        <a href="#" class="prev">Previous</a>
        <a href="#" class="next">Next</a>
    </div>  
</div> 
```

**脚本**

```
(function($){
    $('.mycarousel').jcarousel({
        scroll: 1,
        animation: 1000,
        easing: 'easeOutQuart',
        vertical: true,
        initCallback: mycarousel_initCallback,
        buttonNextHTML: null,
        buttonPrevHTML: null,
        itemLastOutCallback: {
            onAfterAnimation: disableCustomButtons
        },
        itemLastInCallback: {
            onAfterAnimation: disableCustomButtons
        }
    });

    function mycarousel_initCallback(carousel) {

        var elementPrev = carousel.container.next('.controls').children('.prev');
        var elementNext = carousel.container.next('.controls').children('.next');

        elementPrev.bind('click', function() {
            carousel.prev();
            return false;
        });

        elementNext.bind('click', function() {
            carousel.next();
            return false;
        });
    };

    function disableCustomButtons(carousel){

        var elementPrev = carousel.container.next('.controls').children('.prev');
        var elementNext = carousel.container.next('.controls').children('.next');

        if (carousel.first == 1) {
            elementPrev.addClass('inactive');
        } else {
            elementPrev.removeClass('inactive');
        }

        if (carousel.last == carousel.size()) {
            elementNext.addClass('inactive');
        } else {
            elementNext.removeClass('inactive');
        }

    };

})(jQuery); 
```

# pseudocode - 伪代码的返回语句中的尖括号是什么意思？

> ID：10531408
> 
> 赞同：0
> 
> 时间：2012-05-10T09:44:54.920
> 
> 标签：pseudocode

我的讲师在他的 n-Queens 问题的课程笔记中提供了一些伪代码。不幸的是，我很难理解它在 Java 中的实现。有问题的伪代码是：

```
Queens (currentBoard , currentRow, n) :
    if currentRow == n:
        if currentBoard is legal:
            return <currentBoard, 1>
        else:
            return <currentBoard, 0>
    else:
        for k = 1..n:
            newBoard = currentBoard + <currentRow+1, k>
            board [k], success[k] = Queens(newBoard, currentRow+1, n)
        kmax = index of max(success[k])
        return <board[kmax], success[kmax]> 
```

我理解其中的大部分内容，但我不确定我要对尖括号中的伪代码部分做什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T09:48:09.717

这里的尖括号只是说，返回了多个“对象”。

因此，例如，此代码

```
return <currentBoard, 1> 
```

一方面返回`currentBoard`对象，另一方面返回简单的`1`.

在这段代码中

```
board [k], success[k] = Queens(newBoard, currentRow+1, n) 
```

您可以看到两个对象都存储在不同的变量中，板进入`board[k]`，数字进入`success[k]`。

# c++ - 无法理解以下 C++ 代码行

> ID：10531410
> 
> 赞同：1
> 
> 时间：2012-05-10T09:45:02.390
> 
> 标签：c++, opencv

我是 C++ 新手，并尝试弄清楚这行代码的含义：

```
cur_rect = cv::Rect(cur_rect) & cv::Rect(0, 0, mat->cols, mat->rows); // here
if( cv::Rect(cur_rect) == cv::Rect() )  //here
{
.......
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T09:52:54.117

该`Rect & Rect`部分与两个矩形相交，并在两个输入重叠时返回一个非空矩形。

因此，您可以比较结果以`Rect()`查看是否存在交叉点。您的代码裁剪`cur_rect`为`(0, 0, mat->cols, mat->rows)`然后检查它是否为空。

资料来源：

[http://opencv.willowgarage.com/documentation/cpp/core_basic_structures.html?highlight=rect](http://opencv.willowgarage.com/documentation/cpp/core_basic_structures.html?highlight=rect)

[如何在 OpenCv 中轻松检测 2 个 ROI 是否相交？](https://stackoverflow.com/questions/8714101/how-can-one-easily-detect-whether-2-rois-intersects-in-opencv)

## 编辑

另一种实现，更简洁：

```
// crop cur_rect to rectangle with matrix 'mat' size:
cur_rect &= cv::Rect(0, 0, mat->cols, mat->rows);
if (cur_rect.area() == 0) {
    // result is empty
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:49:05.133

我假设`cv::Rect(...)`方法（或它们的家族）返回一个矩形对象。你不明白的那行，我假设是一个`==`比较矩形的重载运算符 ()。

但是我在这里做了很多假设，因为我没有`cv`类的代码。

至于`&`重载运算符 - 假设这是在做一个交集或联合。再一次没有代码很难说。

# mpi - 分布式物理模拟帮助/建议

> ID：10531413
> 
> 赞同：1
> 
> 时间：2012-05-10T09:45:09.907
> 
> 标签：mpi, physics, distributed-computing

我在分布式内存环境中工作。我的任务是通过将大型 3D 对象分成较小的块来模拟使用由弹簧捆绑的粒子，然后每一块都由另一台计算机模拟。我正在使用第 3 方物理引擎来实现模拟。我面临的问题是如何在物体被分割的四肢传递粒子信息。需要此信息来计算相互作用的粒子力。图像中的线条显示了切割的位置。因为 o 粒子的数量很大，所以通信开销也会很大。有没有一种传输此类信息的好方法，或者有没有一种方法可以传输另一个值来帮助我确定我需要的信息？任何帮助深表感谢。谢谢 ![例子](../Images/4784ab33fb9671fcfaa5992dd4731bbc.png)

PS：粒子信息是指计算要施加在本地机器中模拟的粒子上的合力的新位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:56:08.717

“大”意味着很多东西。在这里，传递数据的点数可能是“大”的，因为它远不止一个，但是如果您说晶格中有一百万个粒子，并且通过将其切割成正方形将其划分为 4 个处理器（例如），每个边界只传递 500 个粒子；与一相比大，与一百万相比非常小。

一个非常常用于此类分布式内存计算的库（这与分布式计算有所不同，分布式计算表明节点分散在互联网上；这种涉及紧密耦合元素的计算通常最好通过一系列实验室或集群中的附近计算机）是 MPI。这种通信模式很常见，被称为“光环交换”或“保护单元交换”或“鬼区交换”或某种组合；通过搜索这些术语，您应该能够找到很多此类事物的示例。（此站点上有一些关于该主题的问题，但它们通常集中在非常具体的实施问题上）。

# java - 使用 Java 传输海量数据

> ID：10531420
> 
> 赞同：0
> 
> 时间：2012-05-10T09:45:29.920
> 
> 标签：java, jakarta-ee, jdbc, database

我需要使用 Java 程序将大量数据（近 1000 万条记录）从一个数据库（oracle）传输到另一个数据库（postgres）。我通过创建与两个数据库的连接并从源数据库查询数据然后通过迭代结果集将数据插入目标数据库来完成相同的操作。但是传输数据需要大量时间。有什么方法可以快速完成转移过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:16:20.800

一种替代方法是将表中的所有数据导出到文本文件中，然后将该数据直接导入 postgres。我不记得 oracle 有什么导出功能，但最坏的情况是你总是可以使用这样的查询，将表的内容作为一组插入语句转储：

select '插入 mynewtable 值（' || old.a || ', ' || old.b || ...etc..|| '）;' 来自 myoldtable old;

我肯定在几个小时内处理了来自 Oracle 数据库（使用 Java）的 10MM 记录（每条记录之间有很多处理）。你希望什么样的表现，你现在得到什么？

当您插入 postgres 表时，您是否检查了很多索引或约束？也许您的代码有其他问题？如果您知道所有行都是有效的，也许您应该在进行插入时删除 postgres 数据库中的约束？

或者，如果您有一段时间没有，也许您需要清理数据库？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:33:07.710

如果仅限于单线程读取数据、写入数据，则没有很大的改进空间。

这种类型的性能受到几个不同因素的限制，您通过网络传输的数据量、网络速度、数据库索引和配置以及网络/主机中的其他一些因素。

至少，您应该使用更大的 fetchsize 设置读取连接。

```
ResultSet rs;
...
rs.setFetchSize(500); 
```

在插入方面，您还应该使用 CallableStatement 查看批处理

```
CallableStatement cs;
Connection conn;
conn.setAutoCommit(false);
... 
cs.addBatch();

if (rowCount % batchsize == 0) {
   int[] updateCounts = cs.executeBatch();

   conn.commit();
   batchCount = 0;

   for (int i = 0; i < updateCounts.length; i++) {
        if (updateCounts[i] < 1)
           bad.write(batchRec[i]);
   }
} 
```

您可以在 Oracle 中为插入性能执行其他操作，其中之一是使用命名管道设置批量加载，然后您的进程可以写入该命名管道。它们是非日志操作，因此速度非常快。我还没有从 Java 中完成命名管道的事情，所以需要研究一下，但这应该能让你继续前进。

你需要弄清楚你的瓶颈在哪里。我已经看到性能随着时间的推移而下降，因为查询是对某个表进行表扫描，并且检索后面行的数据比前面的行需要更长的时间。

与其他任何事情一样，您需要开始引入计时，以查看您的选择是否开始花费更多时间，或者读取性能是否相当稳定（如果后面的行获取时间比前面的行获取时间长，这是一个很好的表扫描指示）。

最后，如果您可以巧妙地分解查询，您可以使用多个工作线程来并行处理数据。

IE。代替

```
select a,b,c from source table 
```

你会把它分解成

```
select a,b,c from source table where a < 10;
select a,b,c from source_table where a >= 10 and a < 50;
select a,b,c from source_table where a >= 50; 
```

像其他任何事情一样，有一百种做事的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:51:46.700

这里的问题是编程语言使用游标来处理元组集，游标只能遍历它们，你不能进行批量加载或类似的事情，我认为每种编程语言都是如此，更快的解决方案是以某种方式将 Oracle 连接到 PostgreSQL ，我不知道该怎么做，但我认为应该是可能的。一切都有 Oracle 函数。

# css - css兼容宽度IE7

> ID：10531425
> 
> 赞同：3
> 
> 时间：2012-05-10T09:45:55.587
> 
> 标签：css, internet-explorer-7

嗨，我对 IE7 的 css 有一些问题

我想将一些文本并排宽度放在图像中。像这样：http: [//imageshack.us/photo/my-images/14/imgwx.png/](http://imageshack.us/photo/my-images/14/imgwx.png/)

问题是在 IE7 中，文本出现在图像下方。

我有以下 HTML 代码：

```
 <div id="imageArticle"><img="src/here.jpg"></div>
   <div id="contentArticle">TEXT HERE </div>

  #imageArticle {
        float: right;
        margin-bottom: 20px;
        margin-left: 20px;
        margin-top: 15px;
        position: relative;
    }
#contentArticle {
    color: #333333;
    font-size: 13px;
    line-height: 17px;
    margin-top: 90px;
    padding-bottom: 20px;
    position: relative;
    width: 750px;
} 
```

有什么建议吗？？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:54:48.937

将您的图片插入到#contentArticle 中，然后将其浮动到右侧

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T10:00:34.857

正如我所理解的那样，您应该这样做：

```
<html>
    <body>
    <div style="width:200px">
        <img class="myimage" src="test.jpg" width="90" height="90" style="float:right;"/>
        blabla bla blalbalba
        blabla bla blalbalba
        blabla bla blalbalba
        blabla bla blalbalba
        blabla bla blalbalba
        blabla bla blalbalba
        blabla bla blalbalba
    </div>
    </body>
</html> 
```

[文本和图像并排](http://login2win.blogspot.com/2010/07/html-css-text-and-image-side-by-side.html)

我已经在 IE7 上测试过，它运行良好。

# ruby-on-rails-3.1 - Flot 未显示 x 轴标签

> ID：10531428
> 
> 赞同：4
> 
> 时间：2012-05-10T09:46:02.853
> 
> 标签：ruby-on-rails-3.1, flot

我将数据绘制如下，但似乎无法显示轴标签：

```
!function ($) {
      var options = {
        xaxis: {
                    mode: "time",
                    min: start_time,
                    // max: (new Date()).getTime(),
                    tickSize: [4, "hour"],
                    tickLength: 0,
                    axisLabel: 'Day',
                    axisLabelUseCanvas: true,
                    axisLabelFontSizePixels: 12,
                    axisLabelFontFamily: 'Verdana, Arial, Helvetica, Tahoma, sans-serif',
                    axisLabelPadding: 3
        },
        yaxis: {
                    axisLabel: 'Amount',
                    axisLabelUseCanvas: true,
                    axisLabelFontSizePixels: 12,
                    axisLabelFontFamily: 'Verdana, Arial, Helvetica, Tahoma, sans-serif',
                    axisLabelPadding: 5
                },
      }
      $.plot($("#placeholder"), [open_emails],options);

    }(window.jQuery 
```

我已在我的视图中包含以下内容，并且正在加载它们

```
//= require jquery.flot
//= require jquery.flot.symbol.min
//= require jquery.flot.axislabels 
```

结果如下：

![在此处输入图像描述](../Images/abaa93b7150eb7f17f714196ecc1219d.png)

如何让标签显示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T09:19:15.623

Hiya**工作演示** [http://jsfiddle.net/wuALT/](http://jsfiddle.net/wuALT/)

所以你只需要添加这个：

```
<script type='text/javascript' src="https://raw.github.com/xuanluo/flot-axislabels/master/jquery.flot.axislabels.js"></script> 
```

其余代码将开始识别axisLabel。

阅读：~~[http](http://codenachos.com/view/axis-labels-in-flot)~~ **://codenachos.com/view/axis-labels-in-flot是**一个已知问题[http://code.google.com/p/flot/issues/detail?id=42](http://code.google.com/p/flot/issues/detail?id=42)

这将有助于现在看到`Day`并`Amount`出现在 X 和 Y 轴上。

![在此处输入图像描述](../Images/35bfcaae75a9e01305c1848159371582.png)

# blackberry - Blackberry BrowserField Base Url

> ID：10531432
> 
> 赞同：0
> 
> 时间：2012-05-10T09:46:19.583
> 
> 标签：blackberry, browserfield

我一直试图在浏览器字段中显示来自 SD 卡的一些 HTML 内容，并且每次浏览器字段都呈现基本 URL 而不是呈现 HTML 数据。我试图找到相同的原因，但找不到任何解决方案。我没有找到任何清楚解释何时调用该基本 URL 的文档。谁能解释为什么以及何时调用该基本 URL？任何帮助都非常感谢...

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:07:45.503

也许它会帮助你。这个答案解释了如何以两种方式显示来自 sdcard 的 html 内容

1）将数据读取为文本文件并将其添加到字符串并按以下方式显示该内容

```
StringBuffer sb1;                 

                FileConnection fconn = (FileConnection)Connector.open("filepath="file:///SDCard/BlackBerry/documents/HtmlFileName.txt", Connector.READ_WRITE);
                if (fconn.exists())
                {
                    InputStream input=fconn.openDataInputStream();
                    sb1=new StringBuffer();
                    int chars,i=0;
                    while((chars=input.read())!=-1)
                    {
                        sb1.append((char)chars);
                    }

               }

    String str=sb1.toString();

    VerticalFieldManager vfm = new VerticalFieldManager(VERTICAL_SCROLL|VERTICAL_SCROLL_MASK);
    BrowserFieldConfig browserFieldConfig = new BrowserFieldConfig();
    browserFieldConfig.setProperty(BrowserFieldConfig.NAVIGATION_MODE, BrowserFieldConfig.NAVIGATION_MODE_POINTER);
    browserFieldConfig.setProperty(BrowserFieldConfig.NAVIGATION_MODE, BrowserFieldConfig.NAVIGATION_MODE_CARET);
    browserFieldConfig.setProperty(BrowserFieldConfig.JAVASCRIPT_ENABLED,Boolean.TRUE);
    browserFieldConfig.setProperty(BrowserFieldConfig.NAVIGATION_MODE_POINTER.toString(),Boolean.TRUE);
    browserFieldConfig.setProperty(BrowserFieldConfig.ALLOW_CS_XHR,Boolean.TRUE);
    BrowserField browser_field=new BrowserField(browserFieldConfig);
    browser_field.displayContent(str,"");
        vfm.add(browser_field);
        add(vfm); 
```

2）您可以直接从浏览器字段调用该页面，如下所示

```
String url="file:///sdcard/index.html";//specify exact path if resource then local:///.if sd card file:///
    VerticalFieldManager manager=new VerticalFieldManager(VERTICAL_SCROLL|VERTICAL_SCROLLBAR|HORIZONTAL_SCROLL|HORIZONTAL_SCROLLBAR){
                protected void sublayout(int maxWidth, int maxHeight) {
                    super.sublayout(640,Display.getHeight());
                    setExtent(640,Display.getHeight());
                }
            };
            BrowserFieldConfig myBrowserFieldConfig = new BrowserFieldConfig();
                myBrowserFieldConfig.setProperty(BrowserFieldConfig.NAVIGATION_MODE,BrowserFieldConfig.NAVIGATION_MODE_POINTER);
                BrowserField browserField = new BrowserField(myBrowserFieldConfig);
                history=browserField.getHistory();
                browserField.requestContent(url);
                manager.add(browserField);
                browserField.requestContent(url);
                add(manager); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T15:08:20.007

我意识到这有点老了，但我遇到了同样的问题，想分享我是如何解决我的案子的。

事实证明，如果您尝试导航到 BrowserField 中的新页面，并且无法加载新页面或发生错误，则 BrowserField 将加载 Base URL。

这个问题在我身上发生了两次。在一个例子中，我的程序抛出了一个运行时异常，该异常被静默处理（偶然）。这会导致导航失败并加载基本 URL。在第二种情况下，我试图导航到的页面不存在（通过拼写错误或滥用文件名或位置）。

**需要说明的是，加载的是原始页面**的基本 URL，而不是加载失败的页面。

我希望这有帮助！

# java - 随机创建一个 BigDecimale

> ID：10531444
> 
> 赞同：0
> 
> 时间：2012-05-10T09:46:38.303
> 
> 标签：java, bigdecimal

> **可能重复：**
> [从给定范围生成随机 BigDecimal 值](https://stackoverflow.com/questions/5023421/generating-random-bigdecimal-value-from-given-range)

`BigDecimal`如何在 0 和 1 之间随机创建大量值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:48:47.710

看看[这个](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#BigDecimal%28double%29)JavaDoc。一旦你有一个数字值`a lot`，做一个简单的 for 循环并使用`Random`类来初始化随机双精度值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:53:35.070

试试这个代码

```
class BigDecRand {
 public static void main(String[] args) {
    String range = args[0];
    BigDecimal max = new BigDecimal(range + ".0");
    BigDecimal randFromDouble = new BigDecimal(Math.random());
    BigDecimal actualRandomDec = randFromDouble.divide(max,BigDecimal.ROUND_DOWN);

    BigInteger actualRandom = actualRandomDec.toBigInteger();
 } 
```

}

更多细节

*   [http://krum.rz.uni-mannheim.de/jas/doc/api/edu/jas/arith/BigDecimal.html](http://krum.rz.uni-mannheim.de/jas/doc/api/edu/jas/arith/BigDecimal.html)
*   [http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#BigDecimal%28double%29](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#BigDecimal%28double%29)

# javascript - 隐藏所有没有与所选元素匹配的类的元素

> ID：10531446
> 
> 赞同：0
> 
> 时间：2012-05-10T09:46:46.307
> 
> 标签：javascript, jquery, html, css

我有一个很酷的界面要构建。

有一个水平滚动的 div 包含图像的“平铺”，每个下方都有一个单选按钮。用户将滚动并决定图像，然后单击它。单选按钮检查，jQuery 在下面显示另一个水平滚动 div，“现在选择子类别”......然后用户可以通过选择另一个“平铺”来进一步细化选择。这样就完成了过程。

问题是如果它们没有与第一个选择匹配的类，我不确定如何隐藏第二层选择中的所有元素。听起来可能很混乱。这是一些简化的 HTML，我已将其发布在 jsfiddle 上以节省空间。[http://jsfiddle.net/RTGC3/](http://jsfiddle.net/RTGC3/)

因此，总而言之，您将从 HTML 中看到需要发生的事情。用户将看到类别，当他们单击一个类别时，与单击的父类别没有相同 id 的子类别将被隐藏。所有其他人都将保持可见，以便包含 div 来“显示”。

我希望我已经很好地解释了这个问题。感谢您提供的任何帮助。

麦克风。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:54:15.633

最简单的方法是将 id 为 1 的两个容器 div 命名为相同的东西，这样你就会有两个 class="cat_id_1"。

然后是这样的：

```
$('#cat-container div input').on('change', function() {
    var id = $(this).parent().attr('class');
    $('#des-container div.'+id).fadeToggle();
}); 
```

在 CSS 中你有 display:none; 在#des-container 中的所有 div 上（对于初学者）。这将在单选按钮更改时侦听它，第一次更改它将在 div 上调用 .fadeToggle() 并在您的第二行中使用匹配的类并显示它，第二次更改将再次隐藏它。

这是你想要的吗？

实际上，我假设您希望显示第二行中的所有项目，但是在选中单选框时，您想要隐藏除了与单选按钮的 id 匹配的项目之外的所有项目？然后你可以这样做：

```
 $('#des-container div'+id).addClass('show');
 $('#des-container div').not('div.show').fadeToggle(); 
```

所以基本上你给你决定显示的对象添加一个类，并隐藏没有那个类的所有东西。当然，要以另一种方式工作（如果您取消选中单选框），您需要添加一个 if 语句，看到已更改的单选按钮已更改为选中或未选中，如果未选中，您只需删除类“显示”从元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:06:56.000

试试这个代码：

```
$(document).ready(function() {
   $('input[type=radio][name="type"]').live('change', function() {
       var className = $(this).parent().attr("class");
       var clsID = className.split('_')[2];
       var subID = "in_cat_" + clsID;
       $("div[class*=in_cat]").hide();
       $("div." + subID).toggle("slow");
   });
}); 
```

这是 JSFiddle 链接：http: [//jsfiddle.net/RTGC3/3/](http://jsfiddle.net/RTGC3/3/)

# html - 是否可以在同一个 html 页面中多次使用“相对位置”？

> ID：10531447
> 
> 赞同：0
> 
> 时间：2012-05-10T09:46:47.147
> 
> 标签：html, css

我在我的母版页上使用“相对位置”和“绝对位置”。

我有一个使用上述母版页的页面，并且我试图在此页面中再次对其他 2 个元素使用“相对位置”和“绝对位置”，但此页面中的下方元素（“绝对位置”）是不是根据他上面的元素放置的（'position relative'），而是指母版页中元素的'position relative'。

希望不是太笨拙的解释..

是否可以在同一个 HTML 页面上多次使用“相对位置”？？？如果是这样，怎么办？？

谢谢，埃夫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:13:41.317

对于您的问题： **您不受要相对或绝对定位多少元素的限制。**

然而，定位是相当棘手的。您的元素放错位置肯定是由 CSS 中的错误定义引起的。

我将简要解释它的工作原理：

所有元素都有标准定位`static`。

但是，您可以定义`position:relative`任意数量的元素。现在，`top|left|right|bottom`您可以相对于它的原始位置移动元素。（原来的空间仍然被占用！）

`position:absolute`也可以在任意数量的元素上定义，但是它的工作方式不同：

该元素不占用其原始位置，而是相对于**第一个**非静态定位的祖先元素放置。（*我认为这是您提到的错误-您有一个兄弟姐妹，`position:relative`但是绝对定位的元素根据具有相对/静态位置的父元素进行定位*）

这些只是最基本的，有关更多洞察信息，[请阅读本文](http://kilianvalkhof.com/2008/css-xhtml/understanding-css-positioning-part-1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:05:06.997

在您添加相关代码/信息/演示之前，我无法回答为什么您的代码和布局存在问题，但是我可以向您保证，您可以在一页上拥有多个相对定位的元素，事实上 - 您可以应用和定位样式任意元素任意多次。

```
element { 
    position:relative; 
        }

element2 { 
    position:relative; 
        } 
```

您只是专门为元素定义规则，没有关于可以使用任何规则的次数的规则，因为规则彼此独立。

**参考**

您可能应该通读[此页面](http://webdesign.about.com/od/advancedcss/a/aa061307.htm)以了解元素定位的工作原理。

# java - 将xml解析为java对象

> ID：10531448
> 
> 赞同：1
> 
> 时间：2012-05-10T09:46:50.543
> 
> 标签：java, xml, spring, parsing

我想从 XMl 文件中选择一个特定的节点，然后将其解析为 java 对象

例如我的 sample.xml 文件如下

```
<?xml version="1.0" encoding="UTF-8"?>
 <S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
<S:Body>
    <ns2:GetStudyInfo xmlns:ns2="http://com.study/">
        <WSResult>
            <ResultCode>eMaven-0000</ResultCode>
            <ResultDesc>Ok</ResultDesc>
        </WSResult>
        <return>
            <StudyNumber>Q005</StudyNumber>
            <StudyTitle>Stomach</StudyTitle>
            <StudyPI></StudyPI>
            <eirbNumber></eirbNumber>
            <SponsorID></SponsorID>
            <SponsorName></SponsorName>
            <SponsorContact></SponsorContact>
            <OtherInfo></OtherInfo>
            <StudyDiv></StudyDiv>
            <StudyID>904</StudyID>
            <StudyStatus></StudyStatus>
            <RevBoard></RevBoard>
            <InitalAppDate>01-01-1900</InitalAppDate>
        </return>
        <return>
            <StudyNumber>Q004</StudyNumber>
            <StudyTitle>Brain Tumor</StudyTitle>
            <StudyPI></StudyPI>
            <eirbNumber></eirbNumber>
            <SponsorID></SponsorID>
            <SponsorName></SponsorName>
            <SponsorContact></SponsorContact>
            <OtherInfo></OtherInfo>
            <StudyDiv>Cardiology</StudyDiv>
            <StudyID>891</StudyID>
            <StudyStatus>Active/Enrolling</StudyStatus>
            <RevBoard></RevBoard>
            <InitalAppDate>01-01-1900</InitalAppDate>
        </return>

    </ns2:GetStudyInfo>
</S:Body> 
```

现在我的要求是获取“返回”节点，然后将其所有元素放入 java 对象中。

想使用 JAXB 注释基础工作。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:51:58.683

您可以使用例如 XSL 或 StaX API 过滤节点。然后使用 JAXB 解组对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:51:42.327

使用 SAX 并获取回报，对于 JAX-B，您可以从以下链接开始

[http://docs.oracle.com/cd/E12840_01/wls/docs103/webserv/data_types.html](http://docs.oracle.com/cd/E12840_01/wls/docs103/webserv/data_types.html)

# android - Android - 长时间后有时警报不会触发

> ID：10531451
> 
> 赞同：2
> 
> 时间：2012-05-10T09:47:01.247
> 
> 标签：android

几天来，我的应用程序遇到了一个大问题。如果我的英语不是那么地道，我很抱歉。我实现了一个 AlarmManager，让我的应用程序的用户可以选择在当前或第二天的任何时间启动某个服务。因此，例如，用户可能选择将我的服务时间设置为明天上午 08:00，然后启动服务。

警报管理器现在应该等待计算的时间从现在到选择的时间（我也手动计算了时间，它是正确的！）然后启动服务。我现在的问题是，有时警报管理器正在启动我的服务，而有时却没有。似乎如果它必须等待让我们说超过 4 小时，它就不再工作了，我的服务也没有被调用。我已经设置了所有必要的许可，否则它根本不起作用。你可以看看下面的alarmmanager的代码：

```
someIntent = new Intent();
someIntent.setAction("START_SERVICE");
AlarmManager alarams ;

alarmIntent = PendingIntent.getBroadcast(MainActivity.this, 0, someIntent, PendingIntent.FLAG_CANCEL_CURRENT);
alarams = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
alarams.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()+delay, alarmIntent); 
```

广播接收器是这样实现的（并且已注册！）：

```
alarmReceiver = new BroadcastReceiver() {

            @Override
            public void onReceive(Context context, Intent intent) {

                Intent myIntent = new Intent(MainActivity.this, MyService.class);
                startService(myIntent);
            }
        }; 
```

正如我告诉你的，如果它不工作，它会在启动服务之前停止。

编辑：我有一个想法。我在这个线程中读到了一些东西：[Android long running service with alarm manager and internal broadcast receiver](https://stackoverflow.com/questions/9138597/android-long-running-service-with-alarm-manager-and-inner-broadcast-receiver)

可能是，我的意图“someIntent”构造函数仅适用于清单文件中声明的广播接收器。所以在我的情况下，我可能应该使用`someIntent = new Intent("START_SERVICE")`而不是`someIntent = new Intent(); someIntent.setAction("START_SERVICE")`. 这种效应称为隧道效应——我会弄清楚的，如果它有效，我会在这里发布我的经验。感谢您在提到的线程上得到很好的解释！如果您有其他想法或和我一样的经历，请告诉我！鸸

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:04:28.040

如果设备关闭并启动，那么您将无法获得警报管理广播接收器。实施 OnBootReceiver 它将接收 OnBoot 完成，您可以在那里启动未触发的挂起警报。

# gwt - 如何在 GWT 中单击按钮下载文件？

> ID：10531454
> 
> 赞同：1
> 
> 时间：2012-05-10T09:47:02.063
> 
> 标签：gwt, download

我是初学者..为了试用，我使用了以下代码..我保存在位置的 txt 文件`D:\test.txt`

我应该用什么参数代替“？”

```
downloadButton.addClickHandler(new ClickHandler() {
    @Override
    public void onClick(ClickEvent event) 
{
        Window.open(?);    
 }
}); 
```

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T05:51:26.797

从 window.open() 你需要像下面的代码调用一个 servlet..

```
Window.open(GWT.getModuleBaseURL()
                + "ntPdfDownload?myParam=" + String.valueOf(document.getId()), "", ""); 
```

然后在 servlet 中获取 myParam 的值并下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:21:07.863

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T10:59:36.493

下载 .xls 文件 USIGN GWT、apache-poi 的完整示例

*   环境：GWT SDK 2.4
*   弹簧 3.0.2M
*   爪哇：1.7

需要 Jar 文件来创建 .xls 文件 :: poi-3.0.1-FINAL.jar

```
exportButton.addClickHandler(new ClickHandler() {
    @Override
    public void onClick(ClickEvent event) {
        String link = GWT.getModuleBaseURL() + "myfiledownload";
    }//onClick
});//addClickHandler 
```

现在在浏览器中，当用户点击按钮 exportButton 然后控件导航到 web.xml 并搜索以 /myfiledownload 结尾的 url-pattern

web.xml

```
<servlet>
    <servlet-name>fileDownload</servlet-name>
    <servlet-class>com.sbabamca.server.FileDownloadServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>fileDownload</servlet-name>
    <url-pattern>/app/myfiledownload</url-pattern>
</servlet-mapping> 
```

执行 web.xml 中的代码后，控件尝试执行名为 FileDownloadServlet 的 servlet

## 服务器端

**文件下载Servlet.java**

```
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.ServletException;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.hibernate.Query;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.metadata.ClassMetadata;
import com.fpix.hibernate.util.HibernateUtil;
import com.fpix.util.date.MyDate;
import java.io.IOException;
import java.util.ArrayList;

public class MyFileServlet extends HttpServlet {
SessionFactory sessionFactory;
Session session;
Transaction tx = null;

    @SuppressWarnings({ "unchecked", "deprecation" })
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

            resp.setContentType("application/vnd.ms-excel");
            resp.setHeader("Content-Disposition", "attachment; filename=users.xls");
            try {

                sessionFactory = HibernateUtil.getSessionFactory();
                if(!sessionFactory.getCurrentSession().isOpen())
                {
                    session = sessionFactory.openSession();
                }
                else
                {
                session = sessionFactory.getCurrentSession();
                }
                tx = session.beginTransaction();
                tx.begin();

                Query qry = session.createQuery("from com.fpix.dto.User u ");
                ArrayList<com.fpix.dto.User> u = (ArrayList<com.fpix.dto.User>)qry.list();

                Query qry1 = session.createQuery("from com.fpix.dto.Profile p ");
                ArrayList<com.fpix.dto.Profile> p = (ArrayList<com.fpix.dto.Profile>)qry1.list();

                /*
                 * code to get the column name of User and Profile Entity
                 */
                ClassMetadata cm = sessionFactory.getClassMetadata(com.fpix.dto.User.class);
                String userAttributes[] = cm.getPropertyNames();

                ClassMetadata cm1 = sessionFactory.getClassMetadata(com.fpix.dto.Profile.class);
                String profileAttributes[] = cm1.getPropertyNames();

                 HSSFWorkbook wb = new HSSFWorkbook();
                 HSSFSheet sheet = wb.createSheet("Excel Sheet");
                 HSSFRow rowhead = sheet.createRow((short) 0);

                 rowhead.createCell((short) 0).setCellValue("id");
                 /*
                  * code to create the columns names in .xls file
                  */
                 int j = 0;
                 for(int i=0;i<userAttributes.length;i++){
                     j = i;
                     if(!userAttributes[i].equalsIgnoreCase("profileData") )
                             rowhead.createCell((short) ++j).setCellValue(userAttributes[i]);
                    }//for

                 for(int i=0;i<profileAttributes.length;i++){
                     if(!profileAttributes[i].equalsIgnoreCase("userData"))
                        rowhead.createCell((short) ++j).setCellValue(profileAttributes[i]);
                 }//for

                 int index = 1;
                 for(int i=0;i<u.size();i++){
                         HSSFRow row = sheet.createRow((short) index);

                         row.createCell((short) 0).setCellValue(u.get(i).getId());
                         row.createCell((short) 1).setCellValue(u.get(i).getUser());
                         row.createCell((short) 2).setCellValue(u.get(i).getPassWord());
                         row.createCell((short) 3).setCellValue(u.get(i).getType());
                         row.createCell((short) 4).setCellValue(u.get(i).getRole());
                         row.createCell((short) 5).setCellValue(u.get(i).getProfile());
                         row.createCell((short) 6).setCellValue(u.get(i).getEmail());
                         row.createCell((short) 7).setCellValue(MyDate.timeStampToString(u.get(i).getDor()));
                         // set the Profile data to the excel sheet cells
                         row.createCell((short) 8).setCellValue(p.get(i).getRollNo());
                         row.createCell((short) 9).setCellValue(p.get(i).getFname());
                         row.createCell((short) 10).setCellValue(p.get(i).getLname());
                         row.createCell((short) 11).setCellValue(MyDate.timeStampToString(Long.parseLong(p.get(i).getDoj())));  
                         row.createCell((short) 12).setCellValue(MyDate.timeStampToString(Long.parseLong(p.get(i).getDob())));
                         row.createCell((short) 13).setCellValue(p.get(i).getBloodGroup());
                         row.createCell((short) 14).setCellValue(p.get(i).getPhoto());
                         row.createCell((short) 15).setCellValue(p.get(i).getPhone1());
                         row.createCell((short) 16).setCellValue(p.get(i).getPhone2());
                         row.createCell((short) 17).setCellValue(p.get(i).getAddress());
                         row.createCell((short) 18).setCellValue(p.get(i).getCity());
                         row.createCell((short) 19).setCellValue(p.get(i).getPin());
                         row.createCell((short) 20).setCellValue(p.get(i).getState());
                         row.createCell((short) 21).setCellValue(p.get(i).getCountry());
                         row.createCell((short) 22).setCellValue(p.get(i).getGrade());
                         row.createCell((short) 23).setCellValue(p.get(i).getGroups());
                         row.createCell((short) 24).setCellValue(p.get(i).getAssignCourse());

                         index++;
                 }//for

                 java.io.OutputStream out = resp.getOutputStream();
                 wb.write(out);
                 out.close();
                 System.out.println("Data is Exported to Excel file.");

            }//try
            catch (Exception e) {
             System.out.println(" Data cannot be imported :: getImport() :: ImportExportData "+e);
            }//catch

        }//doGet
}//class 
```

# c# - LINQ，使用映射过滤掉附件

> ID：10531458
> 
> 赞同：1
> 
> 时间：2012-05-10T09:47:08.193
> 
> 标签：c#, linq, list, filter, lambda

我有一个带有属性和值的映射列表

我有一个典型文件信息的附件列表。

我想做的是通过附件搜索并确保文件名包含 txt 或 xls 格式。

```
public class Mapping
{
public int Id { get; set; }
public string Property { get; set; }
public string Value { get; set; }
}

public class file
{
public byte[] data {get;set;}
public string filename{get;set;}
} 
```

我将在列表中得到结果

```
var mappings = new List<Mapping>(){
new Mapping{Property="Filter", Value="txt"},
new Mapping{Property="Filter", Value="xls"}

};

   var files = new List<file>();

var filterdFiles = files.Where(x=> mappings.All(m=>x.filename.contains(m.Value))) 
```

但我没有得到任何结果，所以我认为 Linq 是错误的，有高手经验的人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:49:56.687

尝试这个：

```
var filterdFiles = files
                   .Where(x=> 
                          mappings.Any(m=>x.filename.contains(m.Value))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:51:23.807

我认为这就是你想要的：

```
var filterdFiles = files.Where(x => mappings.Where(m => m.Property == "Filter")
                                            .Any(m => x.filename.Contains(m.Value))); 
```

# java - 在 JUnit 测试中捕获键盘输入

> ID：10531465
> 
> 赞同：0
> 
> 时间：2012-05-10T09:47:26.287
> 
> 标签：java, junit, console

我正在编写一个必须等​​待用户输入才能运行的 JUnit 测试；场景是这样的：

*   开始运行测试
*   等待一些**无法**自动化/模拟的外部操作完成；用户必须执行一些手动活动，然后通知测试继续
*   继续运行

我试着用

```
System.out.println( "Press enter to continue" );
BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
reader.readLine();
System.out.println( "Resuming..." ); 
```

但它不起作用，因为 System.in 在测试中似乎不接受来自键盘的输入。

我知道这不是一个典型的/正统的单元测试，但我想将它编码为一个，因为这样可以方便地使用 Maven 来测试各种案例。

我可以这样做吗，或者我应该将我的测试转移到一个正常的（即非Junit）程序？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:52:07.560

如果它需要用户输入，它就不是真正的单元测试——不要这样对待它。

把它做成一个简单的程序，很容易运行，然后在需要的时候进行测试。将其包含在您的构建中是没有意义的，因此它应该按不同的时间表运行 - 不是每次构建，而是更符合您的开发过程 - 每天，每个新功能等。

# javascript - Javascript 在数学运算之间附加字符串

> ID：10531470
> 
> 赞同：0
> 
> 时间：2012-05-10T09:47:38.097
> 
> 标签：javascript, string, math

```
items = 3;
$('#div').html(items + 1 + ' - ' + items + 3); 
```

试图`#div`显示`4 - 6`，但它反而显示`4 - 33`。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:49:08.987

至于为什么会这样：

首先解析器读取`items + 1`，非常好，花花公子，它是`4`

然后它与 连接`' - '`，所以现在你有`4 -`

然后它看到`+ items`，此时，你正在处理`String`，所以它与 3 连接（就像`items`3 一样），所以你有`4 - 3`

那么你有另一个与 的连接`3`，但左操作数是 a `string`，所以右操作数也被类型转换`String`为，所以你有`4 - 33`

要实现您想要的，您需要包含内部操作：

```
$('#div').html((items + 1) + ' - ' + (items + 3)); 
```

# java-me - 在 lwuit 列表中延迟加载图像

> ID：10531471
> 
> 赞同：0
> 
> 时间：2012-05-10T09:47:38.847
> 
> 标签：java-me, lwuit

我正在 J2ME 上使用 LWUIT 开发应用程序。我有一个列表，其中包含从网络上获取的图像以及一些文本。

我想知道如何延迟加载图像，以便在用户尝试与之交互时表单不会冻结？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:17:31.077

Eric Coolman 在LWUIT 的下一代[Codename One](http://gadgets.coolman.ca/lazy-loading-implementing-an-infinite-list-in-codename-one/)中几乎实现了这一点。他写的所有内容都可以应用于 LWUIT。

# c - 删除 .txt 文件中每一行末尾的 ^M。

> ID：10531472
> 
> 赞同：1
> 
> 时间：2012-05-10T09:47:41.390
> 
> 标签：c

我有以下

```
^XA^M
^SZ2^JMA^M
^MCY^PMN^M
^PW822~JSN^M
^JZY^M
^LH0,0^LRN^M
^XZ^M
^XA^M
^FO350,95^M
^BY4^BCB,220,N,N,N,A^FD12345^FS
^FT605,700^M
^A0B,40,40^M
^FB600,1,0,R,0^M
^FD12345^FS
^FT282,1160^M
^A0B,28,39^FDBilka Tilst afdelingen^FS
^FT320,1160^M
^A0B,28,39^FDAgerÃ¸vej 7^FS
^FT358,1160^M
^A0B,28,39^FDPort 39^FS
^FT396,1160^M
^A0B,28,39^FDTilst^FS
^FT434,1160^M
^A0B,28,39^FDFLD_COUNTY_FLD^FS^M
^FT472,1160^M
^A0B,28,39^FD8381^FS
^FT510,1160^M
^A0B,28,39^FDFLD_COUNTRY_FLD^FS^M
^FT548,1160^M
^A0B,28,39^FDFLD_ORDERTEL_FLD^FS^M
^FO660,100^M
^GB0,720,2^FS^M
^FO750,100^M
^GB0,720,2^FS^M
^FO660,820^M
^GB92,0,2^FS^M
^FO660,100^M
^GB92,0,2^FS^M
^FT680,810^M
^A0B,18,23^FDDELIVERY INSTRUCTIONS:^FS^M
^FT700,810^M
^A0B,18,25^FDFLD_SPECIALINST1_FLD^FS^M
^FT720,810^M
^A0B,18,25^FDFLD_SPECIALINST2_FLD^FS^M
^FT200,1160^M
^A0B,80,90^FB1160,2,0,L,0^FDFLD_SERVICETEXT_FLD^FS^M
^FT780,1160^M
^A0B,18,20^FDSender's address: ^FS^M 
```

我正在尝试删除每行末尾的 ^M，并在 C 中包含以下内容

```
GLOBAL BOOLEAN CARRIER_CONSIGNOR_SIM_ReplaceZPL(CARRIER_CONSIGNOR_SIM_ORDER_TYPE* Header)
{
  #define MAX_FILE_LEN 30

  char filename[MAX_FILE_LEN];
  snprintf(filename, MAX_FILE_LEN, "%s.zpl", Header->OrderNumber);

  FILE *file;
  FILE *write;
  char line  [256];
  char linec [256];

  file = fopen( filename, "r");
  write = fopen( filename, "r+");

  if( file != NULL )
  {
    while ( fgets ( line, sizeof line, file ) != NULL ) /* read a line */
    {
      strcpy(linec, line);
      fprintf (write , linec);
    }
    /* Close both files */
    fclose (write);
    fclose (file);
    printf("REPLACED LABEL in %s\n", filename);
    return ( TRUE );
  }

 return ( FALSE );
}/*CARRIER_CONSIGNOR_SIM_ReplaceZPL*/ 
```

我已尝试对“rb+”、“r+b 和 rb 执行以下操作以写入 = fopen，但这都不会删除 ^M。解决此问题的最佳方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:53:49.313

`\r`您可以通过在末尾删除 ay或字符来缩短字符串`\n`，例如更改：

```
 ...
  strcpy(linec, line);
  ... 
```

至：

```
 int len;
  ...
  strcpy(linec, line);
  len = strlen(linec);                   // get length of string
  while (len > 0)                        // while string not empty
  {                                      // if last char is \r or \n
      if (linec[len - 1] == '\r' || linec[len - 1] == '\n')
      {
          linec[len - 1] = '\0';         // delete it
          len--;
      }
      else                               // otherwise we found the last "real" character
          break;
  }
  ... 
```

请注意，当您打印字符串时，您需要添加换行符，例如使用

```
fprintf(write, "%s\n", linec); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:16:00.597

您看到的 ^M 是一种表示回车 (CR, 0x0d) 字符的方法。其后是换行符，它是大多数 Unix 工具的行结束符。该文本文件可能是由 Windows 程序编写的。

如果你以二进制模式打开文件，你应该能够删除所有值为 的字符`'\r'`，这就是回车的写法。

Paul R 的建议未能实现`'\n'`以下内容`'\r'`，所以我认为它不会起作用。

但是，您可以执行以下操作：

```
char *cr;

...

if((cr = strchr(line, '\r')) != NULL)
{
 *cr++ = '\n';
 if(*cr == '\n')
  *cr = '\0';
} 
```

在阅读该行之后。这也应该在文本模式下工作。

# jquery - Wordpress 响应式滑块

> ID：10531473
> 
> 赞同：0
> 
> 时间：2012-05-10T09:47:42.373
> 
> 标签：jquery, wordpress

我正在为我的网站使用以下滑块 (http://www.woothemes.com/flexslider/flexslider-demo/)，并将我的网站导入 Wordpress，但滑块根本没有显示。

在我的“page.php”中，我使用以下代码调用滑块脚本：

```
<script type="text/javascript">         
jQuery(window).load(function() {
jQuery('.flexslider').flexslider();
});
</script> 
```

如果我查看源代码，我可以看到 php 循环生成的所有 HTML 代码，但屏幕上除了页眉和页脚之外什么都没有。

任何想法为什么会发生这种情况？如果您需要更多信息，请告诉我。

谢谢 ：）

# android - TextView 执行后不追加

> ID：10531478
> 
> 赞同：0
> 
> 时间：2012-05-10T09:47:48.410
> 
> 标签：android, android-asynctask, progressdialog, textview

您可以看到我在 onPostExecute 中添加了 tvStatus (TextView)，然后删除了我的 progressDialog 框。当我调试我的代码时，我可以看到该值是在 tvStatus 中设置的，但它没有显示在屏幕上。

在调用 onPostExecute 函数后，我的 progressDialog 也停止旋转。有谁知道为什么以及如何解决？

这是在 onCreate 方法中设置的：

```
tvStatus = (TextView) this.findViewById(R.id.tvStatus); 
```

代码：

```
public class TcpTask extends AsyncTask<Void, Void, Integer> {

    @Override
    protected Integer doInBackground(Void... params) {
        try {
            //set up a Connection
            Socket s = new Socket("88.26.249.133", TCP_SERVER_PORT);
            InputStream inputstream = (s.getInputStream());
            DataInputStream in = new DataInputStream(inputstream);
            DataOutputStream out = new DataOutputStream(s.getOutputStream());
            s.setSoTimeout(20*1000);
            //prepare output message
            outBuffer[0] = 48;
            outBuffer[1] = 51;
            outBuffer[2] = 49;
            outBuffer[3] = 49;
            outBuffer[4] = 0;
            outBuffer[5] = 0;
            //send output message
            out.write(outBuffer);
            out.flush();
            //To check in logCat
            Log.i("TcpTask", "sent: " + outBuffer);
            //check # available data
            //and use it as byte length
            avail = in.available();
            byte[] inBuffer = new byte[avail];
            //accept server response
            while ((nob = in.read(inBuffer)) != -1) {
            }
            //close stream
            in.close();
            for (int i = 7; i < avail-7; i += 2) {
                lowByte = inBuffer[i];
                highByte = inBuffer[i+1];
                if (lowByte < 0) {
                    result = lowByte + 256 + (highByte * 256);
                } else {
                    result = lowByte + (highByte * 256);
                }
            }
            //close connection
            s.close();
            //To Check in logCat
            Log.i("TcpTask", "received: " + inBuffer);
            // if the host name could not be resolved into an IP address.   
        } catch (UnknownHostException e) {
            e.printStackTrace();
            Log.i("myStatus", "TcpClient: Host name could not be resolved");
            // if an error occurs while creating the socket.
        } catch (IOException e) {
            e.printStackTrace();
            Log.i("myStatus", "TcpClient: ERROR");
        } finally {
            Log.i("TcpTask", "TCPClient: Finished");
        }
        return result;
    }

    @Override
    protected void onPostExecute(Integer result) {
        tvStatus.append(Integer.toString(result) + System.getProperty("line.separator"));
        if (myStatus.this.progDialog != null) {
            myStatus.this.progDialog.dismiss();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:04:00.630

利用

```
tsStatus.setText(result+" "+ System.getProperty("line.separator"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:00:25.050

```
tvStatus.setText(tvStatus.getText().toString+(Integer.toString(result) + System.getProperty("line.separator"))); 
```

这就是您将 Text 值设置为 textView 的方式

# java - 带有 Hibernate 的 JPA 2 转义字符串

> ID：10531480
> 
> 赞同：0
> 
> 时间：2012-05-10T09:48:00.063
> 
> 标签：java, hibernate, jpa

我有一个有趣的情况，hibernate/jpa 似乎用 \\n 逃脱了 \n：

DB 中的字符串：Hello World\nDude
实体管理器进入我的 POJO 后的字符串：Hello World\\nDude

我可以摆脱这种逃避的功能吗？

唔..

确实发现了问题。。

如果您直接编辑表，My Editor (MySQL Workbench) 会自动转义 \n。因此转义是从 MySQL Workbench 和 Java 行为非常正确:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:43:04.580

确实发现了问题。。

如果您直接编辑表，My Editor (MySQL Workbench) 会自动转义 \n。因此转义是从 MySQL Workbench 和 Java 行为非常正确:)。

# php - 将参数传递给jQuery函数？

> ID：10531481
> 
> 赞同：4
> 
> 时间：2012-05-10T09:48:03.670
> 
> 标签：php, javascript, jquery

这看起来很简单，但我对 jQuery 的经验很少，我无法理解它。

假设我有一个动态生成的 HTML 表，并且在该表的每一行中都有一个链接：

```
<a id='edit'>Edit User</a> 
```

现在，链接应该以每个用户的 ID 作为参数调用一个函数。我可以这样做：

```
<a id='edit' onClick='editUser(<?php echo $row['id']; ?>)'>Edit User</a> 
```

但是我如何在 jQuery 中做到这一点？

我可以这样调用函数：

```
$('a#edit').click(function () {
      editUser()
      return false;
    }); 
```

但是如何将 ID 传递给这个函数呢？我知道我可以先将它粘贴到一个隐藏字段中，然后通过元素 id 从那里获取它，但肯定有更好的方法吗？

我意识到所有链接都会以这种方式具有相同的 id，所以我应该通过附加用户 id 来动态创建链接 id 吗？但是那我该如何调用 jQuery 呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T09:50:08.970

id 在整个 HTML 中必须是唯一的。所以你可以使用类选择器和 HTML5 data-* 属性：

```
<a class="edit" data-id="<?php echo $row['id']; ?>">Edit User</a> 
```

接着：

```
$('a.edit').click(function () {
    var id = $(this).data('id');
    // do something with the id
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T09:50:07.693

使用`data-*`属性传递参数。

```
<a class='edit' data-id='<?php echo $row['id']; ?>'>Edit User</a>

$('a.edit').click(function () {
   editUser($(this).data("id"));
   return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:08:02.410

正如 Curt 提到的`data-id`，如果您使用的是 HTML5，那么这是要走的路。如果您使用的是 HTML4，我会在链接的 ID 中传递这个：

`<a id='edit-321' class='edit'>Edit User</a>`

然后你可以这样做（并使用`event.preventDefault()`而不是`return false`！）：

```
$('a.edit').click(function (evt) {
   editUser($(this).attr("id").substring(5));
   evt.preventDefault();
}); 
```

# python - Python - 使用约束对列表进行洗牌

> ID：10531482
> 
> 赞同：1
> 
> 时间：2012-05-10T09:48:06.927
> 
> 标签：python, constraints, shuffle

我已经在一个脚本上工作了几个月，断断续续地处理文本文件中的列表。我是 Python 的初学者（我唯一有点理解的语言），过了一段时间，我设法想出了几行代码来满足我的需要。

我拥有的输入文件是一个选项卡式列表。它每行有 5 个单词，但我会将其设为数字​​，以便在示例中看起来更清晰：

```
01 02 03 04 05
06 07 08 09 10
11 12 13 14 15
16 17 18 19 20
21 22 23 24 25 
```

现在，经过 SO 用户的一些努力和大量工作，我已经设法对这些元素进行了洗牌，这样它们就不会与原来的“合作伙伴”出现在同一行。这是我正在使用的代码：

```
import csv,StringIO
import random
from random import shuffle

datalist = open('lista.txt', 'r')
leyendo = datalist.read()
separando = csv.reader(StringIO.StringIO(leyendo), delimiter = '\t')
macrolist = list(separando)

l = [group[:] for group in macrolist]
random.shuffle(l)
nicendone = []
prev_i = -1
while any(a for a in l):
    new_i = max(((i,a) for i,a in enumerate(l) if i != prev_i), key=lambda x: len(x[1]))[0]
    nicendone.append(l[new_i].pop(random.randint(0, len(l[new_i]) - 1)))
    prev_i = new_i

with open('randolista.txt', 'w') as newdoc:
    for i, m in enumerate(nicendone, 1):  
        newdoc.write(m + [', ', '\n'][i % 5 == 0])

datalist.close() 
```

这可以完成工作，但我真正需要的是更复杂一些。我需要使用以下限制对列表进行洗牌：

1.  第一列和第二列中的单词只能在它们自己的列中随机排列。
2.  新的随机列表不应有两个元素再次出现在同一行中。

我想得到的是如下内容：

```
01 17 25 19 13
16 22 13 03 20
etc 
```

因此，第一列和第二列中的项目仅在它们自己的列中打乱，并且没有两个项目在输出的同一行中，而在输入的同一行中。我意识到在一个 5 行示例中，最后一个约束不断被打破，但真正的输入文件有 100 行。

我真的不知道如何开始这样做。我的编程能力有限，但问题是我什至想不出一个伪代码。如何让 Python 识别前两列的元素，使其仅垂直打乱它们？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:40:51.820

可以通过用随机数对列进行转置来实现前两列的混洗，以使曾经在同一行上的两个值不会出现在同一行上。例如：您可以将第一列向下推 20 行，将第二列向下推 10 行，其中 20 和 10 是小于行数的随机整数。

将前两列随机化的示例代码：from random import sample

```
text = \
"""a b c d e
f g h i j
k l m n o
p q r s t"""

# Translate file to matrix (list of lists)
matrix = map(lambda x: x.split(" "), text.split("\n"))

# Determine height and height of matrix
height = len(matrix)
width = len(matrix[0])

# Choose two (unique) numbers for transposing the first two columns
transpose_list = sample(xrange(0, height), 2)

# Now build a new matrix, transposing only the first two
# columns.
new_matrix = []
for y in range(0, height):
    row = []
    for x in range(0, 2):
        transpose = (y + transpose_list[x]) % height
        row.append(matrix[transpose][x])

    for x in range(2, width):
        row.append(matrix[y][x])

    new_matrix.append(row)

# And create a list again
new_text = "\n".join(map(lambda x: " ".join(x), new_matrix))
print new_text 
```

这会导致类似：

```
a l c d e
f q h i j
k b m n o
p g r s t 
```

如果我理解你的帖子正确，你已经有一个算法来随机化表格的其余部分？

我希望这有任何帮助:-)。

伍特

# sql - 如何以 DML（SQL 脚本）从 SQL Server 2008.2010 导出数据？

> ID：10531484
> 
> 赞同：15
> 
> 时间：2012-05-10T09:48:09.317
> 
> 标签：sql, sql-server, sql-server-2008

是否有工具或特殊查询可以做到这一点。我不是数据库管理员。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-10T10:20:45.070

以下是从数据库生成脚本和数据的步骤。屏幕截图是使用的`SQL Server 2012 Management Studio`，但我相信*SQL Server 2008*的步骤也类似。

*   连接到您希望将数据库与数据一起写入其中的实例。
*   右键单击数据库并选择选项`Tasks --> Generate Scripts...`

![任务生成脚本](../Images/41dcd90235ce55788f5ba5b0ca78e6bf.png)

*   在*Generate and Publish Scripts*向导上，单击`Next`按钮。

![介绍](../Images/14fc59c415aeb23bfd3a265669e3996c.png)

*   在*选择对象*步骤中，我已选中默认选择`Script entire database and all database objects`。您还可以选择选项`Select specific database objects`并选择您选择的对象。

![选择对象](../Images/cab90bcfbba0ae9fc03f8514aba5d050.png)

*   在“*设置脚本选项*”步骤中，选择要保存脚本的路径。点击`Advanced`按钮。

![设置脚本选项](../Images/64934ba9d535a2cd6f9cdea80726b29b.png)

*   在“*高级脚本选项*”对话框中，向下滚动到选项`Types of data to script`。默认情况下，它设置为`Schema only`，这意味着它将仅生成创建对象语句。如果您想要对象创建脚本和数据，请选择选项**`Schema and data`**。在*Advanced Scripting Options*对话框中单击*OK* ，然后在*Set Scripting Options*步骤中单击*Next*

 ***![高级脚本选项](../Images/f2f06d20bdecbbe682d465c9fc2e4edf.png)

*   在*摘要*步骤中，它将显示您选择的所有选项。单击*下一步*。

![概括](../Images/9215da95428920930a2c3bb728a4254f.png)

*   在*Save or Publich Scripts*步骤中，如果一切顺利，您将看到每个对象都显示成功状态，并且脚本应保存到您在*Set Scripting Options*步骤中指定的位置。

![保存或发布脚本](../Images/a9f7bb97306e4879fa9ee72ae7e76a2c.png)

编写整个*AdventureWorks*数据库的脚本变成了一个巨大的`522 MB`脚本文件！

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:05:37.447

以什么格式？您是指 1 个表还是整个数据库？

如果您要从 1 个表导出到 excel 文件，那么您所要做的就是运行 sql 查询语句以显示所有记录，然后通过单击网格的最右上方的空间突出显示所有行并右键单击带有列标题的复制。

打开excel并粘贴。

应该很好去。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T15:11:39.623

您是否尝试过使用[SSMS 工具包](http://www.ssmstoolspack.com/Download)？它是 SSMS 的最佳插件之一。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T09:54:08.697

你的意思是生成数据脚本？如果是这样，那么只需右键单击数据库名称 - 生成脚本。在向导的高级选项中，您可以选择“要添加的数据脚本类型”。仅在此处选择数据，您可以获得数据脚本***

# wpf - 在分隔符位置带有分隔符开口的组合框

> ID：10531487
> 
> 赞同：1
> 
> 时间：2012-05-10T09:48:20.300
> 
> 标签：wpf, combobox, separator

我正在使用一个包含 2 个项目列表的组合框，由分隔符分隔。我这样构造它：

```
public static ObservableCollection<object> Merge<T, U>(IEnumerable<T> collection1, IEnumerable<U> collection2, bool includeSeparator = true)
{
    if (collection1 == null || collection2 == null)
    {
        throw new ArgumentNullException(collection1 == null ? "collection1" : "collection2");
    }

    List<object> tmp = new List<object>();

    tmp.AddRange(collection1.Cast<object>());

    if (includeSeparator)
    {
        tmp.Add(string.Empty);
    }

    tmp.AddRange(collection2.Cast<object>());

    var ret = new ObservableCollection<object>(tmp);
    return ret;
} 
```

在 xaml 中：

```
<ComboBox 
    ItemsSource="{Binding Path=AllValues}" 
    SelectedValue="{Binding Path=SelectedId, Mode=TwoWay, ValidatesOnDataErrors=True}" 
    SelectedValuePath="Id"
    ItemTemplate="{StaticResource CustomItemTemplate}">

    <ComboBox.ItemContainerStyle>
        <Style TargetType="{x:Type ComboBoxItem}" BasedOn="{StaticResource {x:Type ComboBoxItem}}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding}" Value="">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type ComboBoxItem}">
                                <Separator HorizontalAlignment="Stretch" IsEnabled="False"/>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </ComboBox.ItemContainerStyle>
</ComboBox> 
```

它按预期工作，我在列表中插入了一个分隔符。问题是，当`SelectedId`为 null 时，组合框会打开，并在顶部显示分隔符（即滚动条滚动到列表顶部有分隔符），如下图所示。

![在此处输入图像描述](../Images/0e7b44d297dc24c1bb5cf8e22abed4b8.png)

你知道有什么方法可以让列表在顶部打开吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T04:06:11.917

最简单的解决方案是将分隔项值更改为将返回非空但无效的 Id 选择的值，例如在匿名类型中使用 int.MinValue：

```
tmp.Add(new { Id = int.MinValue }); 
```

为此，您还需要将 DataTrigger 更改为：

```
<DataTrigger Binding="{Binding Id}" Value="{x:Static System:Int32.MinValue}"> 
```

# .net - 反射 GetExecutingAssembly 正在抛出 StackOverflow

> ID：10531488
> 
> 赞同：4
> 
> 时间：2012-05-10T09:48:28.300
> 
> 标签：.net, exception, reflection

我正在尝试使用反射来获取当前正在执行的程序集的路径，以用于注册某些类型。这是在静态/共享方法中调用的

```
Dim Path = System.Reflection.Assembly.GetExecutingAssembly.Location 
```

此行会引发 StackOverflow 异常，其中包含以下详细信息：

```
An unhandled exception of type 'System.StackOverflowException' occurred in mscorlib.dll
System.StackOverflowException
    Data:            unable to evaluate expression.
    HelpLink:        unable to evaluate expression.
    HResult:         unable to evaluate expression.
    InnerException:  unable to evaluate expression.
    Message:         unable to evaluate expression.
    Source:          unable to evaluate expression.
    StackTrace:      unable to evaluate expression.
    TargetSite:      unable to evaluate expression. 
```

正在主线程上进行调用。我正在使用 .Net 4.5/VS11 Beta

为了记录，`GetEntryAssembly`，`GetCallingAssembly`，等等......都做同样的事情。我以前从未见过（甚至读过）这种行为 - 有人有什么建议吗？

编辑：

操作系统：Win7 x64 Ultimate 这是一个 Winforms 应用程序

我有一个共享方法，它应该返回一个依赖解析器（包装在我自己的类中以抽象它）。

```
Private Shared _Resolver As IDependencyResolver
Public Shared Function QuickResolver() As IDependencyResolver
    If _Resolver Is Nothing Then
        Dim Container = New WindsorContainer
        ''Line below was breaking so I exploded it into multiple lines as shown above
        Dim CurrentPathFilter = New AssemblyFilter(IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly.Location))

        Container.Register(
            Component.For(Of Interfaces.ISomeInterface)().
            ImplementedBy(Of DAL.SomeType).LifestylePerThread)

        ''.... More registrations ....

        Dim Resolver As New WindsorDependencyResolver(Container)
        _Resolver = Resolver
    End If
    Return _Resolver
End Function 
```

它是单例的（我知道初始化应该重构为不同的方法 - 它在我的列表中）

它从 Winforms UI 线程中调用如下：

```
 Resolver = Common.DependencyResolverFactory.QuickResolver
    ScanRepository = Resolver.Resolve(Of IRepository(Of Scan))() 
```

该`GetExecutingAssembly`行抛出异常（这是异常中断的地方）我承认这很不寻常，所以我假设我的代码使其接近 SO 并且 GetExecutingAssembly 方法嵌套得足够深以至于溢出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:27:06.630

使用以下示例代码获取程序集目录。

```
System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location)) 
```

或者

```
Path.GetDirectoryName(typeof(Foo).Assembly.ManifestModule.FullyQualifiedName) 
```

# firefox - 下载的文件没有Firefox的名称和扩展名

> ID：10531496
> 
> 赞同：1
> 
> 时间：2012-05-10T09:48:48.003
> 
> 标签：firefox, download

我有一些用于文件下载的代码..除了Firefox之外，它工作正常..在Firefox上，它下载一个没有名称和扩展名的未知文件......我不明白我需要什么才能让它工作在Firefox上也是如此..希望有人可以向我指出一些事情..谢谢..

```
 Dim filePath As String = "\\server\downloads\" + "Myfile" + " " + loginID + ".xml"

     Dim targetFile As System.IO.FileInfo = New System.IO.FileInfo(filePath)

     If targetFile.Exists Then
         Dim objFileInfo As FileInfo

         Try

             objFileInfo = New FileInfo(filePath)
             Response.Clear()
             Response.Cache.SetCacheability(System.Web.HttpCacheability.Private)
             Response.AddHeader("Content-Disposition", "attachment; filename=" & objFileInfo.Name)
             Response.AddHeader("Content-Length", objFileInfo.Length.ToString())
             Response.ContentType = "application/octet-stream"
             Response.WriteFile(filePath)
             Response.End()

             'show data in the gridview                        

         Catch ex As Exception
             Throw ex
         End Try
     Else
          Messagebox("Sorry no such file exists")
     End If 
```

# c++ - Template in a Macros in C++?

> ID：10531497
> 
> 赞同：6
> 
> 时间：2012-05-10T09:48:57.367
> 
> 标签：c++, templates, macros

Is it possible to do so

```
# define abc<T1> __abc<T1, T2>

template<typename T2> void somefun() {
    ... 
    abc<int>(...);
    abc<double>(...);
    ...
} 
```

Just to not write it every time i call abc

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T09:51:37.407

In C++11 you can do:

```
template<typename T2> void somefun() {
    template <typename T>
    using abc = __abc<T, T2>;
} 
```

Without that you can use a macro but you'd need to do:

```
#define abc(T1) __abc<T1, T2>

//usage:

abc(Type) instance; 
```

but since that doesn't look very natural I'd avoid it personally.

If you want to avoid the macro pre-C++11 you can do something like:

```
template <typename T2>
struct type {
  template <typename T1>
  struct lookup {
    typedef __abc<T1,T2> type;
  };
};

template <typename T2> void somefun() {
  typedef type<T2> abc;
  typename abc::template lookup<int>::type();
} 
```

But in all honesty that's less readable than even the macro case

(Note: `__abc` is reserved)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T10:37:08.870

Yes, but you need to use round parentheses.

```
# define abc(T1) __abc<T1, T2>

template<typename T2> void somefun() {
    ... 
    abc(int)(...);
    abc(double)(...);
} 
```

Edit: My recommendation is not using macros for this kind of abbreviation at all. Use awoodlands solution or maybe a default template parameter. And thou shall not use reserved names.

# ios - 带有 dispatch_get_main_queue 的块内的 UIWebView 提供了另一个对象 (0X0000ecf0)

> ID：10531498
> 
> 赞同：1
> 
> 时间：2012-05-10T09:49:00.267
> 
> 标签：ios, ios5, uiwebview, objective-c-blocks

我有一个关于块中对象的问题。我有一个 UIWebView，我想在调用一个使用 Core Data 检索数据的对象后更新它。该方法有一个回调，我想在其中调用 UIWebView、webView。这不起作用，因为块内的对象与外面的对象不同。我试图通过执行 dispatch_get_main_queue() 来解决这个问题，但这没关系。

如何从块内更新 webView？

```
 //UIWebView object, webView, in an UIView on main thread
[webView stringByEvaluatingJavaScriptFromString:jsCommand];

[object getDataWithManagedObjectContext: managedObjectContext withCallback:^(NSDictionary *dict) {
         dispatch_async(dispatch_get_main_queue(), ^{
         NSString *functionCall = "call()";
         //I want this UIWebView object, webView, to be the same as in the main thread
         [webView stringByEvaluatingJavaScriptFromString:functionCall];
     });
 }
 ]; 
```

非常感谢您的帮助。丹尼尔

# web-services - 将 Perl 脚本包装成 web 服务

> ID：10531504
> 
> 赞同：1
> 
> 时间：2012-05-10T09:49:07.770
> 
> 标签：web-services, perl, firefox, firefox-addon-sdk

我有一个可以从命令行运行并将文件作为参数的 Perl 脚本。我希望能够从我的 JavaScript（在 Firefox 插件中）调用这个脚本。我正计划使用`XMLHttpRequest`. 但是将我的 Perl 脚本包装成 web 服务的最佳方式是什么？（有没有 Perl 到 SOAP 的转换器？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:57:53.853

> 但是将我的 Perl 脚本包装成 web 服务的最佳方式是什么？

1.  将代码的现有功能拆分为一个完成工作的模块和一个小包装脚本以添加命令行界面
2.  编写另一个显示 Web 界面的包装器。（可能使用[CGI::Application](https://metacpan.org/module/CGI%3a%3aApplication)（现在支持其他接口，因此您不限于 CGI）或[Web::Simple](https://metacpan.org/module/Web%3a%3aSimple)之类的东西）。

> （有没有 Perl 到 SOAP 的转换器？）

不要使用 SOAP。

SOAP 笨重、复杂，并且涵盖了许多对您来说不太可能成为问题的边缘情况。请改用轻量级 RESTful API。

# javascript - 如何将功能应用于某个容器？

> ID：10531510
> 
> 赞同：1
> 
> 时间：2012-05-10T09:49:29.173
> 
> 标签：javascript, jquery

我已经构建了一个小函数，它返回一个应用于某个元素的 jQuery 插件，如下例所示：

```
var initiate_shop = function(shop_navigation, options, callback) {

    var default_settings = {
        containerID     : "",
        first           : false,
        previous        : false,
        next            : false,
        last            : false,
        startPage       : 1,
        perPage         : 8,
        midRange        : 15,
        startRange      : 1,
        endRange        : 1,
        keyBrowse       : true,
        scrollBrowse    : false,
        pause           : 0,
        clickStop       : true,
        delay           : 50,
        direction       : "auto",
        animation       : "fadeInUp",
        fallback        : 400,
        minHeight       : true,
        callback        : function(pages, items){
            if(typeof callback == 'function') {
                callback.call(this);
            }
        }
    };

    var settings = $.extend(default_settings, options);

    return $(shop_navigation).jPages(settings);
}; 
```

我的问题是，我怎么能`initiate_shop`像这样使用该功能：

```
$("shop_navigation").initiate_shop( ... ); 
```

而不是像这样使用它：

```
initiate_shop(shop_navigation, ... ); 
```

另外，如何为回调函数定义参数，在我的情况下，我有两个对象作为回调函数的参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:51:57.157

看起来您正在尝试创建一个 jQuery 插件。使用您的函数扩展`$.fn`对象，您将能够使用`this`函数中的关键字访问您的容器。

```
$.fn.initiate_shop = function(options, callback) {
    ...
    return this.jPages(settings);
}; 
```

请注意，您的调用`$('shop_navigation')`不是有效的选择器，除非您正在寻找名为`shop_navigation`. 你打算写`$('#shop_navigation')`吗？

我问的原因是你也可以写

```
$('.shop_navigation').initiate_shop(options, callback); 
```

由您的插件来处理支持传入的多个元素`this`。

* * *

`.call`如果您想指定上下文（即`this`关键字）在您的回调函数中，您当前调用回调的方式非常有用。

考虑您的回调如下所示：

```
var callback = function(pages, items) {
   console.log(this);
   console.log(pages);
   console.log(items);
}; 
```

如果您不关心`this`回调函数中的关键字是什么，您可以简单地将函数调用为

```
callback(pages, items); 
```

如果要手动设置调用上下文，可以使用`.call`或`.apply`。您仍然可以将参数传递给函数：

```
// first argument defines calling context
// all others passed as arguments to function
callback.call(this, pages, items); 
```

或者

```
// first argument defines calling context
// second argument defines entire arguments collection
callback.apply(this, [pages, items]); 
```

在您的情况下，如果`callback`变量只是一个函数或未定义的，并且您没有添加任何额外的逻辑，就像现在一样，您只需：

```
var default_settings = {
    ...
    callback: callback
}; 
```

# grails - 会话超时后重定向（Grails、Spring Security Core、Tomcat）

> ID：10531512
> 
> 赞同：1
> 
> 时间：2012-05-10T09:49:32.870
> 
> 标签：grails, spring-security, tomcat7

我有一个在**Grails** (v1.3.7) 中开发的应用程序，我们使用**Spring Security Core** (v1.2.6) 插件进行身份验证。构建 .war 文件后，我已将*应用程序部署在标准的 tomcat 服务器*（v7.0.22）中。应用程序运行良好。

我知道我可以在构建应用程序之前或在 tomcat 服务器本身中配置 web.xml 中的会话超时期限。但是，我希望（另外）在会话超时时自动将任何页面重定向到登录页面。因为，如果 Session 超时并且用户单击任何链接或只是刷新当前页面，他们会得到一个 tomcat 错误。

任何人都可以提出一种轻松解决它的方法吗？**Tomcat**或**Spring Security Core**中是否有任何配置（如 expired-session-url）可以完成这项工作？

我在插件文档站点、插件博客站点中进行了搜索，但没有找到。[该站点](http://grails.1312388.n4.nabble.com/Spring-Security-ACEGI-session-duration-td1570970.html)建议我需要在代码中添加一个侦听器，我不想这样做，并希望使用这样的简单[配置](https://stackoverflow.com/questions/8979963/spring-security-session-timeout)。任何人都可以指导任何事情吗？

感谢期待

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:26:41.727

Http是无状态协议，会话只是存储在客户端cookie（+本地db）上的标记，您不能将其作为事件处理。'new client' 和 'session expired' 完全一样，只是表示您无法识别当前请求的浏览器。在大多数情况下，这也意味着用户未经过身份验证（至少对于原始 Spring Security Core）

对于您的情况，您已经有会话过期处理程序，这是您收到此 tomcat 错误的时候。只需处理此错误，并将用户重定向到登录页面。

顺便说一句，如果您有正确的 Spring Security 配置，它必须将所有非授权用户重定向到登录页面。如果您有经过身份验证的用户，但在标准的 tomcat 会话中仍然有一些用户数据，那么您的应用程序架构似乎有问题。至少有两种方法：避免您自己的用户会话，或者进行某种基于会话的 Spring Security 身份验证配置。

# java - 如何在java中识别对象类型

> ID：10531513
> 
> 赞同：44
> 
> 时间：2012-05-10T09:49:34.820
> 
> 标签：java, class, object

> **可能重复：**
> [如何确定对象的类（在 Java 中）？](https://stackoverflow.com/questions/541749/how-to-determine-an-objects-class-in-java)
> [Java判断一个对象是哪个类](https://stackoverflow.com/questions/8796151/java-determine-which-class-an-object-is)

我有以下示例不完整的方法来比较给定对象的对象类型

```
public void test(Object value) {

        if (value.getClass() == Integer) {
            System.out.println("This is an Integer");
        }else if(value.getClass() == String){
            System.out.println("This is a String");
        }else if(value.getClass() == Float){
            System.out.println("This is a Float");
        }

} 
```

该方法可以调用为：

```
test("Test");
test(12);
test(10.5f); 
```

此方法实际上不起作用，请帮助我使其起作用

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-05-10T09:51:49.110

你忘记了`.class`：

```
if (value.getClass() == Integer.class) {
    System.out.println("This is an Integer");
} 
else if (value.getClass() == String.class) {
    System.out.println("This is a String");
}
else if (value.getClass() == Float.class) {
    System.out.println("This is a Float");
} 
```

请注意，这种代码通常是糟糕的 OO 设计的标志。

另请注意，将对象的类与类进行比较和使用 instanceof 不是一回事。例如：

```
"foo".getClass() == Object.class 
```

是假的，而

```
"foo" instanceof Object 
```

是真的。

是否必须使用其中一种取决于您的要求。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-05-10T09:51:31.370

您可以将类标记相互比较，因此您可以使用`value.getClass() == Integer.class`. 但是，更简单、更规范的方法是使用`instanceof`：

```
 if (value instanceof Integer) {
        System.out.println("This is an Integer");
    } else if(value instanceof String) {
        System.out.println("This is a String");
    } else if(value instanceof Float) {
        System.out.println("This is a Float");
    } 
```

笔记：

*   两者之间的唯一区别是比较类标记只检测完全匹配，而`instanceof C`对子类的匹配也是`C`如此。但是，在这种情况下，列出的所有类都是`final`，因此它们没有子类。因此`instanceof`这里可能很好。
*   正如 JB Nizet 所说，这样的检查不是面向对象的设计。您可能能够以更面向对象的方式解决此问题，例如

    ```
    System.out.println("This is a(n) " + value.getClass().getSimpleName()); 
    ```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-10T09:51:58.363

你想要`instanceof`：

```
if (value instanceof Integer) 
```

即使对于子类也是如此，这通常是您想要的，而且它也是空安全的。如果你真的需要完全相同的课程，你可以这样做

```
if (value.getClass() == Integer.class) 
```

或者

```
if (Integer.class.equals(value.getClass()) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-10T09:51:58.253

利用`value instanceof YourClass`

# php - 使用php在动画gif上添加水印

> ID：10531514
> 
> 赞同：1
> 
> 时间：2012-05-10T09:49:39.000
> 
> 标签：php, imagemagick, gif, watermark, animated-gif

我需要一个向动画 gif 添加水印的函数。我如何使用 PHP 和 ImageMagick 做到这一点？

这是我的代码，但它不起作用。

```
function IMagickWatermark($sf, $sfDest, $sfLogo, $sGravity='southeast'){
        //$sCmd = "composite -compose bumpmap -gravity $sGravity $sfLogo \"$sf\" $sfDest";
        $sCmd = "convert \"$sf\" -coalesce -gravity south -draw 'image over 0,0 0,0 \"$sfLogo\"' \"$sfDest\"";
        exec($sCmd);
        return 1;
    }
$sf = $_SERVER['DOCUMENT_ROOT']."/test/source.gif";
$sfDest = $_SERVER['DOCUMENT_ROOT']."/test/dest.gif";
$sfLogo = $_SERVER['DOCUMENT_ROOT']."/test/logowithtext.gif";
IMagickWatermark($sf, $sfDest, $sfLogo, $sGravity='SouthEast'); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-10T11:32:45.273

试试这个：

```
$animation = ani.gif; 

$watermark = logo.png; 

$watermarked_animation = "morph.gif"; 

$cmd = " $animation -coalesce -gravity South ". 
" -geometry +0+0 null: $watermark -layers composite -layers optimize "; 

exec("convert $cmd $watermarked_animation "); 
```

![在此处输入图像描述](../Images/932ba79baefbbb9f3671bfac8749bf05.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:01:06.860

```
<?php
shell_exec('for i in sphere*.gif; do convert $i  -font Arial -pointsize 20 \
      -draw "gravity south \
             fill black  text 0,12 \'Copyright\' \
             fill white  text 1,11 \'Copyright\' " \
      wmark_$i; done');

shell_exec("convert   -delay 20   -loop 0   wmark_sphere*.gif   animatespheres.gif");
$f = fopen("animatespheres.gif", 'rb');
fpassthru($f);
fclose($f);
?> 
```

如果您需要调试，请删除 fopen、fpassthru、fclose 行并为 shell_execs 添加 echo。

# mysql - 从 Excel 导出到 MySQL

> ID：10531521
> 
> 赞同：2
> 
> 时间：2012-05-10T09:50:15.213
> 
> 标签：mysql, sql, excel

我有一个 Excel 文件，其中有 50 个问题，我想在 Java 小程序中包含一份问卷调查。此问卷的答案将存储在我创建的 MySQL 数据库中。

有什么方法可以从我的 Excel 文件中选择所有（或一部分）问题并将它们放入 MySQL 表中的字段（我选择）中？

我环顾四周并加载数据文件听起来像是一个可行的选项，但我想选择哪些问题以及将它们放在哪里。谁能指出我正确的方向？还是我应该简单地复制和粘贴？

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T09:57:30.603

将 Excel 数据保存为[CSV 格式](http://en.wikipedia.org/wiki/Comma-separated_values)，然后使用`LOAD DATA`命令将其导入 MySQL。

关于后者的信息可以在这里找到，例如：

*   [MySql 从 CSV 导入](https://stackoverflow.com/questions/6756726/mysql-importing-from-csv)
*   [http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T08:33:09.550

对我来说最简单的方法是使用 MS Access 打开 Excel 文件（您可以直接执行此操作：文件 -> 打开 ->...）并使用[ODBC](http://dev.mysql.com/downloads/connector/odbc/)将数据导出到 MySQL（右键单击表 -> 导出 -> ODBC 数据库。

顺便说一句，我用“MySQL for Excel”试验了一个[错误](http://bugs.mysql.com/bug.php?id=74942)，输出只有 999 行。理论上会在下一个1.3.4版本解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-27T19:32:34.423

这现在可能看起来有点老了，但会帮助任何其他寻找解决方案的人。

Excel 有官方的 MySQL 插件，用于在 Excel 中导出、导入、附加和编辑 MySQL 数据。

这是链接：[http ://dev.mysql.com/doc/refman/5.6/en/mysql-for-excel.html](http://dev.mysql.com/doc/refman/5.6/en/mysql-for-excel.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T09:55:07.020

查看 Excel 将数据保存为 CSV 文件，然后将其加载到 MySQL。尝试根据 MySQL 结构在 Excel 中格式化数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-20T20:50:00.867

```
# wanna be generic implementation of xls to mysql upsert in perl
# by this time you should have your mysql connection open ... 
use Spreadsheet::XLSX;
use Text::Iconv;

#
# -----------------------------------------------------------------------------
# runs the insert sql by passed data part 
# by convention is assumed that the first column is unique and update could 
# be performed on it ... should there be duplicates the update should fail
# -----------------------------------------------------------------------------
sub RunUpsertSql {

   my $self             = shift ; 
   my $table_name   = shift ; 
   my $refHeaders   = shift ; 
   my $refData      = shift ; 
   my $data_str         = '' ; 
   my @headers      = @$refHeaders ; 
   my @data             = @$refData ; 

   print ( "\@data : @data" ) ; 
   print ( "\@headers: @headers" ) ; 

   my $sql_str = " INSERT INTO $table_name " ; 
   $sql_str .= '(' ; 
   for ( $i=0; $i<scalar (@headers);$i++ ) {
      $sql_str .= " $headers[$i] " . ' , ' ; 

   } #eof for

   for (1..3) { chop ( $sql_str) } ; 
   $sql_str .= ')' ; 

   foreach my $cellValue ( @data ) {
      # replace the ' chars with \'
      $cellValue        =~ s|\'|\\\'|g ; 
      $data_str .= "'" . "$cellValue" . "' , " ; 
   }
   #eof foreach ' replacement

   # remove the " , " at the end 
   for (1..3) { chop ( $data_str ) } ; 

   $sql_str .=  " VALUES (" . "$data_str" . ')' ; 
   $sql_str .= ' ON DUPLICATE KEY UPDATE ' ; 

   for ( $i=0; $i<scalar(@headers);$i++ ) {
      $sql_str .= "$headers[$i]" . ' = ' . "'" . "$data[$i]" . "' , " ; 
   } #eof for

   for (1..3) { chop ( $sql_str) } ; 

   print ( "sql_str : $sql_str " ); 

   $sth = $dbh->prepare($sql_str ) ; 
   $sth->execute( );

}
#eof sub RunUpsertSql

#
# -----------------------------------------------------------------------------
# walk trough the Excel and build the data part of the insert sql
# -----------------------------------------------------------------------------
sub ParseExcel {

   my $self = shift ; 
   print (  " == START == " ) ; 
   # not sure if it could work without the next line
   # for utf8 strings - slavic , japanese etc. 
   my $converter = Text::Iconv -> new ("utf-8", "utf-8");

   # http://search.cpan.org/~dmow/Spreadsheet-XLSX-0.13-withoutworldwriteables/lib/Spreadsheet/XLSX.pm
   my $objExcelParser = Spreadsheet::XLSX -> new ("$FileInputExcel", $converter);

   # iterate the sheets
   foreach my $objSheet (@{$objExcelParser-> {Worksheet}}) {

      print("Sheet: " . $objSheet->{'Name'});

      my $rowCount = 0 ; 
      # iterate the rows 
      my @headerData                    = ();
      foreach my $row ($objSheet -> {'MinRow'} .. $objSheet -> {'MaxRow'}) {
         my @rowData                    = (); 
         $objSheet -> {'MaxCol'} ||= $objSheet -> {'MinCol'};

         # iterate the coloumns
         foreach my $col ($objSheet -> {'MinCol'} ..  $objSheet -> {'MaxCol'}) {
            my $cell = $objSheet -> {'Cells'} [$row] [$col];
            if ($cell) {
               #debug printf("( %s , %s ) => %s\n", $row, $col, $cell -> {'Val'});
               # the unformatted value
               #my $cellValue = $cell->{'Val'}  ; 
               # push the formatted value
               push ( @rowData , $cell->value() )       if $rowCount != 0 ; 
               push ( @headerData , $cell->value() )    if $rowCount == 0 ; 

            }  #eof if the cell is defined
         } 
         #eof foreach col
      # by convention the name of the xls sheet is the same as the table name
      $self->RunUpsertSql ( $objSheet->{'Name'} , \@headerData , \@rowData) 
         if $rowCount != 0 ; 

         $rowCount++ ; 
      }
      #eof foreach row

   } 
   #eof foreach $objSheet

   print (  " == STOP  == " ) ; 

} #eof sub ParseExcel 
```

# javascript - 在 JavaScript 中设置的隐藏字段值不保留在服务器端

> ID：10531523
> 
> 赞同：1
> 
> 时间：2012-05-10T09:50:20.657
> 
> 标签：javascript, asp.net, telerik, hidden-field

TI 在 aspx 中定义了一个隐藏文件：-

```
<asp:HiddenField runat ="server" ID="hfBrand" value = "False" /> 
```

组合框控件正在调用 JavaScript 函数函数：-

```
<telerik:RadComboBox ID="Brands" runat="server"  
                onclientselectedindexchanged="LoadProperties"
                AutoPostBack="True">
</telerik:RadComboBox> 
```

在该函数中，我试图将该隐藏字段值设置为“True”：-

```
function LoadProperties(sender, eventArgs)
{ 
var lblBrand = document.getElementById('<%= hfBrand.ClientID %>').value;
alert(lblBrand);
document.getElementById('<%= hfBrand.ClientID %>').value = "True";
var NewlblBrand = document.getElementById('<%= hfBrand.ClientID %>').value
alert(NewlblBrand)
} 
```

在服务器端（Brands.aspx.cs），我正在尝试获取隐藏字段值：-

```
if (hfBrand.Value == "True")
        brandIDSelected = "10";
else
        brandIDSelected = "20"; 
```

**问题：-** --> hfbrand.Value 仍然是“假”，即使我在 javascript 中将其设置为“真”。为什么会这样。请帮忙。

谢谢

# javascript - 需要通过代码写一个CSV文件，但是需要知道客户端的CSV分隔符是什么

> ID：10531525
> 
> 赞同：0
> 
> 时间：2012-05-10T09:50:23.447
> 
> 标签：javascript, csv, delimiter

在我的 web 应用程序中，我有要作为 CSV 文件提供给用户的数据。我使用逗号作为分隔符，但是当我打开它时，它会在 Excel 的一个字段中显示每一行的所有数据，这意味着我的计算机不使用逗号作为分隔符。但是，当我将分隔符更改为分号或制表符时，在其他电脑上可能效果不佳。所以问题是，我如何找出客户端的正确分隔符（在 javascript 中）并使用该分隔符生成 CSV 文件？

提前致谢！

# javascript - 正则表达式 .replace() 不起作用

> ID：10531527
> 
> 赞同：1
> 
> 时间：2012-05-10T09:50:29.653
> 
> 标签：javascript

```
RegEx = new RegExp(sourcevalue, "gi");

temp[i] = Selectors[i].cssText.replace(RegEx, targetvalue); 
```

在哪里`sourcevalue = rgb(255,0,0)`和`targetvalue = #FFFFFF`，但`sourcevalue`没有被 代替`targetvalue`，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T09:54:00.340

很可能是因为您没有正确地转义括号：

```
var sourcevalue = "rgb\\(255,0,0\\)"; 
```

括号用于分组/反向引用匹配。如果你想*从字面上*匹配它们，你必须用`\`. 由于`sourcevalue`是一个字符串并且`\`也是字符串中的转义字符，因此您必须转义反斜杠以创建文字。

否则，表达式将匹配`rgb255,0,0`但不匹配`rgb(255,0,0)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:54:27.397

因为 sourcevalue 是一个正确的 Javascript 正则表达式，但它没有按您预期的方式工作。正则表达式中有特殊字符，例如 () 括号。它们用于对正则表达式的各个部分进行分组。要将它们与它们的“字面”含义一起使用，您必须使用反斜杠来转义它们

```
var RegEx = /rgb\(255,0,0\)/gi; 
```

# django - 将 ModelChoiceField 替换为具有相同查询集的自动建议文本字段

> ID：10531528
> 
> 赞同：1
> 
> 时间：2012-05-10T09:50:29.940
> 
> 标签：django, autosuggest

我有一个`ModelChoiceField`django 形式：

```
customField  = forms.ModelChoiceField(queryset=MyModel.objects.filter(type="sometype")) 
```

但是这个查询集返回了数千行，有效地阻塞了管理界面中的 customField。相反，我需要一个自动建议文本字段，它将`like '%keystrokes%'`对上述查询集执行查询。我觉得这是一个更好的选择。我需要一个非常基本的自动建议，没有花哨的 CSS。在 django 中是否对此有任何隐含的支持？我浏览了 django autosuggest 插件，但它们非常复杂。

我可以将它与 django 的核心字段类型联系起来吗，例如：`models.ForeignKey('MyModel')`，类似地，`models.AutosuggestField('MyModel')`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:54:16.500

看到这个

*   django-autocomplete - ForeignKey 和 ManyToManyField 的 jquery AutoComplete - Google 项目托管 -> [http://code.google.com/p/django-autocomplete/](http://code.google.com/p/django-autocomplete/)

对于管理员，您可以自动完成

# ios - 对象在 NSMutableArray 中重复

> ID：10531529
> 
> 赞同：0
> 
> 时间：2012-05-10T09:50:31.210
> 
> 标签：ios, xcode, nsmutablearray, nsarray

我试图向`NSMutableArray`它添加一个对象似乎被重复了。

```
@interface TestObject : NSObject {
    double a_actual;
    double a_target;
}
@property(assign) double a_actual;
@property(assign) double a_target; 
```

创建一些指针：

```
NSMutableArray * myTestObjectArray;
TestObject * myTestObject; 
```

初始化它们：

```
myTestObjectArray = [[NSMutableArray alloc] init];
myTestObject = [[TestObject alloc] init]; 
```

我向对象添加值并将其添加到数组中：

```
[myTestObject setA_actual:234];
[myJointDataArray insertObject:myTestObject]; 
```

我为每个对象添加不同的值，但我不一定填写所有变量。当我打印出每个对象时，出于某种原因，我在所有对象中都复制了相同的（最后一个）值。

打印数组显示所有对象都是相同的：

```
 Array: (
     "<TestObject: 0x6b9b400>",
     "<TestObject: 0x6b9b400>",
     "<TestObject: 0x6b9b400>",
     "<TestObject: 0x6b9b400>",
     "<TestObject: 0x6b9b400>",
     "<TestObject: 0x6b9b400>" ) 
```

每次我想使用一个新对象时，我是否应该分配一个新的 TestObject 对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:58:29.420

> 每次我想使用一个新对象时，我是否应该分配一个新的 TestObject 对象？

是的。如果您不分配新对象，那么您只是一遍又一遍地使用同一个对象。看来您需要多个不同的对象，因此为每个对象分配一个新实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T10:06:08.777

为了让您更清楚它失败的原因，请考虑`insertObject:`将指向对象的指针作为参数。因此，当您将`insertObject:`消息发送到数组时，它将存储指向该对象的指针，而不是对象本身的副本。这就是为什么你必须分配/初始化它的一个新实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T09:58:23.070

您基本上是在添加相同的对象。如果您检查数组中每个对象的“a_actual”值，您会发现它是相同的。**您应该分配一个新的并添加它**。

# excel - IF - ELSE IF - ELSE Excel 中的结构

> ID：10531531
> 
> 赞同：26
> 
> 时间：2012-05-10T09:50:38.857
> 
> 标签：excel, excel-formula

**要求 ：**

如果单元格 A1 中的字符串包含“abc”作为字符串的一部分

然后分配值“绿色”

否则，如果单元格 A1 中的字符串包含“xyz”作为字符串的一部分

然后分配值“黄色”

别的

赋值“红色”

**我试过这个：**

`=IF(FIND("~",SUBSTITUTE(A1,"abc","~",1))<>"#VALUE!", "Green", IF(FIND("~",SUBSTITUTE(A1,"xyz","~",1))<>"#VALUE!", "Yellow", "Red"))`

如果第一个 IF 为 True 在其他情况下它会给出 #VALUE！作为输出。

想不通怎么回事。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-10T09:58:08.093

`FIND`返回时`#VALUE!`是错误，不是字符串，所以不能与 比较`FIND(...)`，`"#VALUE!"`需要检查是否`FIND`返回错误与`ISERROR`。也`FIND`可以处理多个字符。

因此，您的公式的简化和工作版本将是：

```
=IF(ISERROR(FIND("abc",A1))=FALSE, "Green", IF(ISERROR(FIND("xyz",A1))=FALSE, "Yellow", "Red")) 
```

或者，要删除双重否定：

```
=IF(ISERROR(FIND("abc",A1)), IF(ISERROR(FIND("xyz",A1)), "Red", "Yellow"),"Green") 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-01-09T11:21:05.927

```
=IF(CR<=10, "RED", if(CR<50, "YELLOW", if(CR<101, "GREEN"))) 
```

`CR = ColRow (Cell)`这是一个例子。在此示例中，当 Cell 中的值小于或等于 10 时，RED 字将出现在该单元格上。以同样的方式，如果第一个 if 为假，则其他 if 条件为真。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-01T22:34:08.230

假设 P7 是一个单元格，那么您可以使用以下 Syntex 来检查单元格的值，并根据以下嵌套 if 为另一个单元格分配适当的值：

```
=IF(P7=0,200,IF(P7=1,100,IF(P7=2,25,IF(P7=3,10,IF((P7=4),5,0))))) 
```

# android - 在 Android 中写入/地理标记 JPEG（EXIF 数据）

> ID：10531544
> 
> 赞同：12
> 
> 时间：2012-05-10T09:51:37.890
> 
> 标签：android, exif

我想做的事：
使用我自己的 PictureActivity* 拍照并添加 EXIF（地理标签）数据
*：实现`SurfaceHolder.Callback`和使用`Camera`

什么不工作：
添加 EXIF GPS 数据

我尝试过
的：使用`ExifInterface`and 手动设置`Camera.Parameters`（使用设置 GPS 元数据的特定方法和使用`params.set(String, Value)`）。

我正在使用 FlickrJ 将图片上传到 Flickr（是的，我已将 Flickr 设置为导入 GPS 数据——其他图片工作正常），但是这个工具也表示 EXIF 中没有 GPS 数据：[http://regex。信息/exif.cgi](http://regex.info/exif.cgi)

我错过了什么？

(Android 2.2, HTC Desire)

编辑：
- 相机设置为`Geotag photos: On`
- 我尝试使用硬编码的虚拟 GPS 位置

以下是手动设置参数的代码（在先删除 GPS 数据和未删除 GPS 数据的情况下都进行了尝试，并且还提到了`set(String, Value)`）：

```
@Override
public void surfaceCreated(SurfaceHolder holder) {
    mCamera = Camera.open();    

    Camera.Parameters p = mCamera.getParameters();
    p.setPreviewSize(p.getPreviewSize().width, p.getPreviewSize().height);
    Log.e("PictureActivity", "EXIF: "+AGlanceLocationListener.getLatitude());
    p.removeGpsData();
    p.setGpsLatitude( AGlanceLocationListener.getLatitude() );
    p.setGpsLongitude( AGlanceLocationListener.getLongitude() );
    p.setGpsAltitude( AGlanceLocationListener.getAltitude() );
    p.setGpsTimestamp( AGlanceLocationListener.getTime() );
    mCamera.setParameters(p);
} 
```

这是使用的代码`ExifInterface`：

```
//Save EXIF location data to JPEG
ExifInterface exif;
try {
    exif = new ExifInterface("/sdcard/DCIM/"+filename+".jpeg");
    exif.setAttribute(ExifInterface.TAG_GPS_LATITUDE,
        String.valueOf(AGlanceLocationListener.getLatitude()));

    exif.setAttribute(ExifInterface.TAG_GPS_LONGITUDE, 
        String.valueOf(AGlanceLocationListener.getLongitude()));

    exif.saveAttributes();

} catch (IOException e) {
    Log.e("PictureActivity", e.getLocalizedMessage());
} 
```

以下是将 JPEG 文件写入 SDCARD 的代码：

```
Camera.PictureCallback jpegCallback = new Camera.PictureCallback() {
    public void onPictureTaken(byte[] imageData, Camera c) 
    {
        //      Bitmap pic = BitmapFactory.decodeByteArray(imageData, 0, imageData.length);

        String day = String.valueOf(Calendar.getInstance().getTime().getDay());
        String hour = String.valueOf(Calendar.getInstance().getTime().getHours());
        String minute = String.valueOf(Calendar.getInstance().getTime().getMinutes());
        String second = String.valueOf(Calendar.getInstance().getTime().getSeconds());

        filename = "Billede"+day+hour+minute+second;

        try {
            FileOutputStream fos = new FileOutputStream(new File("/sdcard/DCIM/"+filename+".jpeg"));
            fos.write(imageData);
            fos.flush();
            fos.close();

        } catch (Exception e) {
            e.printStackTrace();
        }

        if(imageData != null){
            Intent mIntent = new Intent();
            setResult(0,mIntent);
            PictureActivity.this.showDialog(0);
        }
    }
}; 
```

还尝试从 a 写入图像`Bitmap`（没有工作），加上另一个问题在这里报告使用`FileOutputStream`工作

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-26T19:40:57.237

不幸的是，这只适用于半球的四分之一。格林威治以东和赤道以北。这就是我猜你必须住在那里的方式:)。您的“Math.floor”将使所有负值错误（例如 -105 变为 -106）。这是同样的事情，即使在美国也应该有效。

```
public void loc2Exif(String flNm, Location loc) {
  try {
    ExifInterface ef = new ExifInterface(flNm);
    ef.setAttribute(ExifInterface.TAG_GPS_LATITUDE, dec2DMS(loc.getLatitude()));
    ef.setAttribute(ExifInterface.TAG_GPS_LONGITUDE,dec2DMS(loc.getLongitude()));
    if (loc.getLatitude() > 0) 
      ef.setAttribute(ExifInterface.TAG_GPS_LATITUDE_REF, "N"); 
    else              
      ef.setAttribute(ExifInterface.TAG_GPS_LATITUDE_REF, "S");
    if (loc.getLongitude()>0) 
      ef.setAttribute(ExifInterface.TAG_GPS_LONGITUDE_REF, "E");    
     else             
       ef.setAttribute(ExifInterface.TAG_GPS_LONGITUDE_REF, "W");
    ef.saveAttributes();
  } catch (IOException e) {}         
}
//-----------------------------------------------------------------------------------
String dec2DMS(double coord) {  
  coord = coord > 0 ? coord : -coord;  // -105.9876543 -> 105.9876543
  String sOut = Integer.toString((int)coord) + "/1,";   // 105/1,
  coord = (coord % 1) * 60;         // .987654321 * 60 = 59.259258
  sOut = sOut + Integer.toString((int)coord) + "/1,";   // 105/1,59/1,
  coord = (coord % 1) * 60000;             // .259258 * 60000 = 15555
  sOut = sOut + Integer.toString((int)coord) + "/1000";   // 105/1,59/1,15555/1000
  return sOut;
} 
```

...一旦你让我开始，这就是相反的

```
public Location exif2Loc(String flNm) {
  String sLat = "", sLatR = "", sLon = "", sLonR = "";
  try {
    ExifInterface ef = new ExifInterface(flNm);
    sLat  = ef.getAttribute(ExifInterface.TAG_GPS_LATITUDE);
    sLon  = ef.getAttribute(ExifInterface.TAG_GPS_LONGITUDE);
    sLatR = ef.getAttribute(ExifInterface.TAG_GPS_LATITUDE_REF);
    sLonR = ef.getAttribute(ExifInterface.TAG_GPS_LONGITUDE_REF);
  } catch (IOException e) {return null;}

  double lat = dms2Dbl(sLat);
  if (lat > 180.0) return null; 
  double lon = dms2Dbl(sLon);
  if (lon > 180.0) return null; 

  lat = sLatR.contains("S") ? -lat : lat;
  lon = sLonR.contains("W") ? -lon : lon;

  Location loc = new Location("exif");
  loc.setLatitude(lat);
  loc.setLongitude(lon);
  return loc;
}
//-------------------------------------------------------------------------
double dms2Dbl(String sDMS){
  double dRV = 999.0;
  try {
    String[] DMSs = sDMS.split(",", 3);
    String s[] = DMSs[0].split("/", 2);
    dRV = (new Double(s[0])/new Double(s[1]));
    s = DMSs[1].split("/", 2);
    dRV += ((new Double(s[0])/new Double(s[1]))/60);
    s = DMSs[2].split("/", 2);
    dRV += ((new Double(s[0])/new Double(s[1]))/3600);
  } catch (Exception e) {}
  return dRV;
} 
```

……总有一天，我会开始写漂亮的代码。快乐的地理标记，肖恩

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-21T12:57:35.870

发现问题：

查看 SDCARD 中的原始图像显示：

1.  如果使用 EXIFInterface，图像包含 EXIF GPS 数据。然而，GPS 数据是错误的（见下文）——这可能是 Flickr 不会显示它的原因。

2.  使用通过相机参数设置 GPS 坐标的方法不会写入 EXIF GPS 数据（这是使用虚拟硬编码坐标，我没有测试过实际的 GPS 修复）。我还没有更多地研究为什么会这样。

EXIFInterface 的 Android API 有[这个文档](http://developer.android.com/reference/android/media/ExifInterface.html#TAG_GPS_LONGITUDE)：

> public static final String TAG_GPS_LONGITUDE
> 自：API 5 级
> 字符串。格式为“num1/denom1,num2/denom2,num3/denom3”。
> 常数值：“GPS经度”

我的原始代码的问题是我以十进制度数传递 GPS 坐标——通过对 Location 对象调用 getLatitude/getLogitude 获得的坐标是十进制度数。EXIFInterface 需要以度分秒为单位的坐标，然后写为有理数（这是 EXIF 规范的一部分）。更多关于 GPS 坐标格式和转换[的信息](http://en.wikipedia.org/wiki/Geographic_coordinate_conversion)。

[这](https://stackoverflow.com/questions/9736232/android-exifinterface-tag-gps-latitude-denom-values)是另一个问题/答案，解释了如何从十进制度转换为度分秒。

使用此代码，GPS 坐标在 EXIF 中正确写入，Flickr 导入数据没有问题：

```
ExifInterface exif;

double latitude = AGlanceLocationListener.getLatitude();
double longitude = AGlanceLocationListener.getLongitude();

try {
    exif = new ExifInterface("/sdcard/DCIM/"+filename+".jpeg");
    int num1Lat = (int)Math.floor(latitude);
    int num2Lat = (int)Math.floor((latitude - num1Lat) * 60);
    double num3Lat = (latitude - ((double)num1Lat+((double)num2Lat/60))) * 3600000;

    int num1Lon = (int)Math.floor(longitude);
    int num2Lon = (int)Math.floor((longitude - num1Lon) * 60);
    double num3Lon = (longitude - ((double)num1Lon+((double)num2Lon/60))) * 3600000;

    exif.setAttribute(ExifInterface.TAG_GPS_LATITUDE, num1Lat+"/1,"+num2Lat+"/1,"+num3Lat+"/1000");
    exif.setAttribute(ExifInterface.TAG_GPS_LONGITUDE, num1Lon+"/1,"+num2Lon+"/1,"+num3Lon+"/1000");

    if (latitude > 0) {
        exif.setAttribute(ExifInterface.TAG_GPS_LATITUDE_REF, "N"); 
    } else {
        exif.setAttribute(ExifInterface.TAG_GPS_LATITUDE_REF, "S");
    }

    if (longitude > 0) {
        exif.setAttribute(ExifInterface.TAG_GPS_LONGITUDE_REF, "E");    
    } else {
    exif.setAttribute(ExifInterface.TAG_GPS_LONGITUDE_REF, "W");
    }

    exif.saveAttributes();

} catch (IOException e) {
    Log.e("PictureActivity", e.getLocalizedMessage());
} 
```

注意：使用度分秒时，您还需要设置 GPS 参考属性（N、S、E、W）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-06T09:13:00.300

此解决方案将满足负和正 lat/lng 值：

```
static public boolean setGeoTag(File image, LatLng geoTag) {
    if (geoTag != null) {
        try {
            ExifInterface exif = new ExifInterface(
                    image.getAbsolutePath());

            double latitude = Math.abs(geoTag.latitude);
            double longitude = Math.abs(geoTag.longitude);

            int num1Lat = (int) Math.floor(latitude);
            int num2Lat = (int) Math.floor((latitude - num1Lat) * 60);
            double num3Lat = (latitude - ((double) num1Lat + ((double) num2Lat / 60))) * 3600000;

            int num1Lon = (int) Math.floor(longitude);
            int num2Lon = (int) Math.floor((longitude - num1Lon) * 60);
            double num3Lon = (longitude - ((double) num1Lon + ((double) num2Lon / 60))) * 3600000;

            String lat = num1Lat + "/1," + num2Lat + "/1," + num3Lat + "/1000";
            String lon = num1Lon + "/1," + num2Lon + "/1," + num3Lon + "/1000";

            if (geoTag.latitude > 0) {
                exif.setAttribute(ExifInterface.TAG_GPS_LATITUDE_REF, "N");
            } else {
                exif.setAttribute(ExifInterface.TAG_GPS_LATITUDE_REF, "S");
            }

            if (geoTag.longitude > 0) {
                exif.setAttribute(ExifInterface.TAG_GPS_LONGITUDE_REF, "E");
            } else {
                exif.setAttribute(ExifInterface.TAG_GPS_LONGITUDE_REF, "W");
            }

            exif.setAttribute(ExifInterface.TAG_GPS_LATITUDE, lat);
            exif.setAttribute(ExifInterface.TAG_GPS_LONGITUDE, lon);

            exif.saveAttributes();

        } catch (IOException e) {
            e.printStackTrace();
            return false;
        }
    } else {
        return false;
    }
    return true;
} 
```

# css - Twitter Bootstrap 删除跨度的边距

> ID：10531545
> 
> 赞同：25
> 
> 时间：2012-05-10T09:51:41.210
> 
> 标签：css, twitter-bootstrap

我正在使用 Twitter 引导程序。我已经连续使用了 span8 和 span 4。无论如何从行的第一个跨度中删除前导 margin-left:20px 而不需要手动覆盖它？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-10T10:49:17.480

您在您的`#mainContent`区域看到的 20px 边距是由于引导网格的设置，它使用 的容器`940px`，它应该被`.row`具有`margin-left:-20px`属性的容器删除。在您的设置中，您的内容区域也按照设计的方式工作，但是您的顶部`pageHeader`和`mainNav`部分没有正确插入到网格中，您只是`.row`顶部部分内的 div 没有包含在网格的正确容器中.

要解决此问题，您只需将所有元素`pageHeader`和`mainNav`元素插入`.span12`容器中，所有内容都应相应堆叠。

**固定标记**

```
<header class="row" id="pageHeader">
    <div class="span12">
        <div id="logo">Logo</div>
        <div id="userDetails">userDetails</div>
    </div>
</header>

<nav id="mainNav" class="row">
    <div class="span12">
        <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="dashboard.html">Dashboard</a></li>
            <li><a href="blog.html">Blog</a></li>
            <li><a href="idea_exchange.html">Idea Exchange</a></li>
        </ul>
    </div>
</nav> 
```

此外，快速提示，您可以将`mainNav`背景颜色切换到正确的网格容器，`.span12`只需像这样定位它：

```
nav#mainNav .span12 {
    background: url("../images/nav_bar_bg.png") repeat-x scroll 0 0 transparent;
    height: 45px;
    overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-29T01:11:45.237

您可以使用 !important 在您的 CSS 中添加一个类：

例子：

```
.no_margin{
margin:0px !important;
} 
```

并在需要时将该类添加到您的 html 中。

（对不起我的英语不好xD）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-20T13:24:39.980

也有较小的效用

[http://getkickstrap.com/extras/#single-view](http://getkickstrap.com/extras/#single-view)

称为flushspan

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-19T15:56:39.060

通过使用“row”或“row-fluid”类作为跨度类的父类

```
<div class="row">
    <div class="span3">
        <ul>
           <li><a href="home.html">Home</a></li>
           <li><a href="dashboard.html">Dashboard</a></li>
           <li><a href="blog.html">Blog</a></li>
           <li><a href="idea_exchange.html">Idea Exchange</a></li>
        </ul>
    </div>
</div> 
```

# java - 使用 xpath 获取 xml 文件的两个属性

> ID：10531562
> 
> 赞同：1
> 
> 时间：2012-05-10T09:52:12.433
> 
> 标签：java, xml, xpath, xlink

我有一个 xml 文件，它的标签如下：

```
<locator xlink:type="locator" xlink:href="https://www.google.co.in/" xlink:title="Google" xlink:show="replace" xlink:actuate="onRequest" xlink:role="website" rank="1"> </locator> 
```

xml 文件中有许多具有不同角色和等级的定位器标记。

我能够使用 `@*[local-name()='role'`.

现在我需要根据角色获取等级属性。有没有办法同时获取两个属性和值？

我是 Xpath 的新手。请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:03:23.643

好吧`//locator[@xlink:role = 'website']/@rank`（将前缀适当地绑定`xlink`到命名空间`http://www.w3.org/1999/xlink`）是选择 is的元素`rank`属性的示例。`locator``role``website`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:33:39.167

> 我能够使用 `@*[local-name()='role'`.
> 
> 现在我需要根据角色获取等级属性。有没有办法同时获取两个属性和值？

**使用**：

```
ExprStartYouDidntShow/@*[local-name()='role' or name()='rank'] 
```

**其中** `ExprStartYouDidntShow` **是选择应该选择其两个属性的元素的表达式**。

`role`或者，如果您仅在属性具有特定值时才需要获取这两个属性——比如说`"wantedValue"`，使用：

```
 ExprStartYouDidntShow/locator[@*[local-name() = 'role'] = 'website']
                         /@*[local-name()='role' or name()='rank'] 
```

# sql-server - SQL Server 2008 的备份应用程序日志在哪里？

> ID：10531563
> 
> 赞同：33
> 
> 时间：2012-05-10T09:52:13.633
> 
> 标签：sql-server, logging, backup

我需要检查为什么我们的一个系统中的数据库备份失败。

日志显示以下内容：

> BACKUP 未能完成命令 BACKUP LOG XXXXXX。检查备份应用程序日志以获取详细消息。

我进入了 Windows 事件日志，检查了应用程序日志，并猜测我在这些日志中发现了这个特定错误

> BACKUP 未能完成命令 BACKUP LOG XXXXXX。检查备份应用程序日志以获取详细消息。

默认情况下，实际的备份应用程序日志存储在哪里？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-10T09:58:36.477

打开 SSMS 并连接到数据库，转到管理 > 维护计划 > 选择您的备份计划。> 右键单击​​并查看历史记录。

或管理 > sql server 日志。

目录位置：`c:\Program Files\Microsoft SQL Server\MSSQL.xx\MSSQL\LOG`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-07-27T14:39:16.753

SQL 服务器本身捕获的唯一信息是您已经引用的信息：

> BACKUP 未能完成命令 XXXXXX。检查备份应用程序日志以获取详细消息。

这就是 SQL 错误日志（SSMS > 管理 > SQL Server 日志）和 MSSQLSERVER 的 Windows 应用程序错误日志中显示的全部内容。

当它说“检查备份应用程序日志”时，它意味着*检查实际执行备份的任何应用程序的日志（如果有的话）*：

*   如果备份作为 SQL 代理作业的一部分运行，请检查该作业的作业历史记录（而不是“SQL 代理日志”）。
*   如果备份作为 SSIS 包的一部分运行，请检查 SSIS 包日志，如果它被配置为创建一个。
*   如果备份作为 SQL 维护计划的一部分运行，请检查该维护计划的历史记录。
*   如果备份是通过第 3 方备份软件运行的，请检查该应用程序的日志。
*   如果在其他任何地方都找不到它，请检查 Windows 应用程序事件日志以查看其他应用程序是否在 MSSQLSERVER 记录“备份失败”的同时记录了其他内容。

如果您在其他任何地方都找不到它，则可能没有捕获更详细的错误。SSIS 包可能未配置为执行详细日志记录，或者有人在 GUI 中运行了手动备份，但在屏幕上忽略或修复了错误。您可能必须找出谁试图运行备份并询问他们失败的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-26T09:11:47.050

我遇到过同样的问题。使用 PS.Script 备份 DB。日志中的信息没有帮助。原因是我的 powershell 脚本**超时**。

“$server.ConnectionContext.StatementTimeout = 0”的设置没有帮助

$ret=Invoke-Sqlcmd -Query $SQLStatement -ServerInstance $ServerName -ErrorAction 'Stop' **-QueryTimeOut 600**

设置 QueryTimeOut 就可以了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T07:16:46.933

亲爱的，如果您没有完整备份，通常会发生此错误....由于某些原因，如果完整备份计划未完成，则会出现此错误

您可以做的是执行完整备份计划或等到完整备份作业成功完成，然后自动开始每小时备份一次

# visual-studio-2010 - 网站 DLL 访问被拒绝

> ID：10531564
> 
> 赞同：1
> 
> 时间：2012-05-10T09:52:14.620
> 
> 标签：visual-studio-2010, access-denied, activereports

我最近刚刚继承了一个网站，虽然构建中有错误（它`import Microsoft.VisualBasic`在几个地方丢失了，我已经修复了这些）

这个网站没有解决方案文件，所以我刚刚添加了自己的并导入了网站，

我现在发现的是，当我建立网站时，我得到了

```
Error   1   Could not load file or assembly 'ActiveReports.Chart, Version=6.2.3681.0, Culture=neutral, PublicKeyToken=cc4967777c49a3ff' or one of its dependencies. Access is denied. 
```

我知道这不是权限问题，因为我已经进入并编辑了权限以允许每个人访问该文件。

我正在使用 Windows 7 x64 机器，但是如果我查看它针对 x86 构建的 DLL，这是否会导致问题，或者可能是我已将文件从开发服务器复制到我的本地机器。

我试图用谷歌搜索它，大多数结果都显示为文件的权限。

你能给我的任何帮助都会很棒。

谢谢

**更新**
经过更多调查后，我在项目的 web.config 中发现了这一点， `<identity impersonate="true" password="yyy" userName="xxx" />` 并且 Bin 文件夹试图使用该用户进行连接。
因此作为用户的权限在我的机器上无效

我现在学到了一个很大的教训，总是验证你继承的网站的 Web.Config。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:58:00.373

愚蠢的我需要将 DLL 添加到 GAC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:58:52.920

您是否确定在您的项目中对这个 DLL 的引用是同一个版本而不是不同的版本？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:30:50.827

您只需将 ActiveReports.Chart 程序集添加到您的项目中，就可以开始了。如果您遇到任何问题，只需向我们发送电子邮件至 powersupport@grapecity.com

# c++ - 遗传算法中未排序的种群应该如何组织轮盘赌选择？

> ID：10531565
> 
> 赞同：5
> 
> 时间：2012-05-10T09:52:26.393
> 
> 标签：c++, genetic-algorithm, roulette-wheel-selection

我的问题与这个问题有关： [遗传算法中的轮盘赌选择。人口需要先排序？](https://stackoverflow.com/questions/734668/roulette-wheel-selection-in-genetic-algorithm-population-needs-to-be-sorted-fir) 如果我们不对总体进行排序，那么组织轮盘选择的方式是什么？当然，我们现在必须以线性方式搜索。对于这种情况，您是否有任何 C++ 或 Java 代码片段？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-10T10:18:04.560

种群根本不需要排序——轮盘赌选择的关键是给定个体被选择繁殖的概率与其适应度成正比。

假设您有一个未分类的人口，其适应度如下：

```
[12, 45, 76, 32, 54, 21] 
```

要执行轮盘赌选择，您只需选择 0 到 240 范围内的随机数（人口适应度的总和）。然后，从列表中的第一个元素开始，减去每个人的适应度，直到随机数小于或等于零。因此，在上述情况下，如果我们随机选择 112，我们会执行以下操作：

```
Step 1: 112 - 12 = 100\. This is > 0, so continue.
Step 2: 100 - 45 = 55\.  This is > 0, so continue.
Step 3: 55 - 76 = -21\.  This is <= 0, so stop. 
```

因此，我们选择个体#3 进行复制。请注意，这根本不需要对总体进行排序。

因此，在伪代码中，它归结为：

```
let s = sum of population fitness
let r = random number in range [0, s].
let i = 0.
while r > 0 do:
    r = r - fitness of individual #i
    increment i
select individual #i - 1 for reproduction. 
```

请注意，`- 1`最后一行中的 是为了抵消在`increment i`循环的最后一次迭代中完成的（因为即使我们找到了我们想要的个体，它也会增加）。

# c# - 类似于 Facebook 或 Stack Exchange 的用于网站的文本框

> ID：10531571
> 
> 赞同：3
> 
> 时间：2012-05-10T09:52:38.463
> 
> 标签：c#, javascript, jquery, html, ajax

我很确定你们都知道我指的是什么。它就像一个文本区域，让你输入内容，然后会出现一个向上滑动的小菜单（有点像智能感知的东西 - 显示它认为你要输入的不同单词），当你点击它时，或者按 Enter ，它会在 textarea 内创建一个带有该单词的小框。我需要找到其中一个（或自己制作），并且在将它们插入数据库之前，我还需要在 Javascript 中获取输入的这些单词和一些数据内容。我正在谈论的“textarea”东西，以防我让你完全迷失了，看起来像这样：

![在此处输入图像描述](../Images/74eb79d10f8f65ae5133430b1c936f42.png)

有谁知道是否有可用的库/插件等？任何帮助都感激不尽！

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T09:55:37.750

它的正确术语是 a `tag input`。谷歌为他们提供了很多结果。

这是我以前用过的一个：http: [//levycarneiro.com/projects/tag-it/example.html](http://levycarneiro.com/projects/tag-it/example.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T09:58:13.447

1.  [Facebook 风格的标签输入](http://www.emposha.com/javascript/fcbkcomplete.html)
2.  [自动完成示例](http://www.jqueryrain.com/2012/03/35-best-ajax-jquery-autocomplete-tutorial-plugin-with-examples/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T08:55:27.357

这不是文本区域或输入框，Contenteditable 允许您这样做。

```
<div contenteditable="true"><span class="tag">tag1</span></div> 
```

就像输入框一样，您可以在可竞争的 div 中编写。

# c# - 从 Inherited 接口调用 Method 时传递动态参数会引发 RuntimeBinderException

> ID：10531575
> 
> 赞同：7
> 
> 时间：2012-05-10T09:52:51.403
> 
> 标签：c#, c#-4.0, dynamic

在进行了一些重构后遇到了一个有趣的运行时问题，并被归结为以下情况。

将动态对象的属性传递给从父接口继承的接口上的方法时，运行时绑定程序无法找到该方法。

这里有一个测试来证明失败和成功（当直接在父接口类型上调用方法时）

```
using System.Dynamic;
using Microsoft.CSharp.RuntimeBinder;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace Test.Utility
{
    public interface IEcho
    {
        string EchoString(string input);
    }

    public interface IInheritEcho : IEcho
    { }

    public class EchoClass : IInheritEcho
    {
        public string EchoString(string input)
        {
            return input;
        }
    }

    [TestClass]
    public class RuntimeBinderTest
    {
        [TestMethod]
        public void RuntimeBinder_should_work_when_dynamic_parameters_are_passed_to_method_from_inherited_interface()
        {
            //Arrange
            dynamic dynObject = new ExpandoObject();
            dynObject.Foo = "Bar";
            IInheritEcho echomore = new EchoClass();

            string echo = null;
            string exceptionMessage = null;

            //Act
            try
            {
                echo = echomore.EchoString(dynObject.Foo);
            }
            catch (RuntimeBinderException e)
            {
                exceptionMessage = e.Message;
            }

            //Assert
            Assert.AreEqual(echo, dynObject.Foo, false, exceptionMessage);
        }

        [TestMethod]
        public void RuntimeBinder_should_work_when_dynamic_parameters_are_passed_to_method_from_noninherited_interface()
        {
            //Arrange
            dynamic dynObject = new ExpandoObject();
            dynObject.Foo = "Bar";
            IEcho echomore = new EchoClass();

            string echo = null;
            string exceptionMessage = null;

            //Act
            try
            {
                echo = echomore.EchoString(dynObject.Foo);
            }
            catch (RuntimeBinderException e)
            {
                exceptionMessage = e.Message;
            }

            //Assert
            Assert.AreEqual(echo, dynObject.Foo, false, exceptionMessage);
        }
    }
} 
```

测试 #1 失败：Assert.AreEqual 失败。预期：<(null)>。实际的：。“Test.Utility.IInheritEcho”不包含“EchoString”的定义

测试#2 成功。

我的问题是我关于第一次测试应该通过的假设是正确的，还是在框架中没有根本原因？

我知道我可以通过在传递参数时强制转换参数或在传递参数之前将它们分配给变量来解决这个问题。我只是好奇继承的接口导致 RuntimeBinder 失败的原因......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T11:03:58.297

您的情况是[Microsoft Connect上记录的错误](https://connect.microsoft.com/VisualStudio/feedback/details/597276/dynamic-runtime-fails-to-find-iset-t-contains-during-runtime)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T10:21:20.867

这是个好问题。

看起来它在编译时采用表达式的类型`IInheritEcho`，而不是在寻找动态调用的方法时深入搜索继承接口的成员。

理想情况下，表达式的 C# 运行时绑定器的`dynamic`行为方式应与 C# 编译器相同 - 因此它应该看到`IEcho`接口被继承`IInheritEcho`并且它应该工作。

我们可以通过在第一个测试中执行此操作来测试假设 - 即它是静态类型：

```
echo = ((dynamic)echomore).EchoString(dynObject.Foo); 
```

嘿 presto - 测试通过了。

所以问题不在于动态绑定器找不到方法 - 而是当动态调用其成员的实例是*静态类型时*化为接口时，不会咨询继承的接口。

在我看来，这种行为是不正确的。

请埃里克·利珀特……好点……

# jquery - ASP.Net 4.0 URL 路由阻止 javascript 运行

> ID：10531579
> 
> 赞同：1
> 
> 时间：2012-05-10T09:53:05.803
> 
> 标签：jquery, asp.net, css, webforms

我有文章详细信息页面，我在其中显示文章详细信息，例如文章图片、日期和文章文本。在文章的左侧我放了一条垂直的蓝线，它等于文章正文的高度，因为我不确定文章高度我使用 javascript 来获取文章文本容器的高度并分配相同的高度到宽度为 3 像素的垂直蓝色条 (div id='ArticleBlueSide')。

它工作正常，蓝线也出现在没有 URL 路由的情况下，但是当我添加 URL 路由时，蓝线没有出现。

下面是脚本块和我的 HTML div 包含。

我正在使用 c# 处理 ASP.Net 4.0 Web 表单。

如果有人可以帮助我解决这个设计问题，我将不胜感激。

```
$(document).ready(function () {
    var h = document.getElementById("ArticleTextArea").offsetHeight;
    h = h - 25;
    document.getElementById("ArticleBlueSide").style.height = h + "px";
});

<div id="ArticleContainer">
     <div id="ArticleBlueSide"></div>
     <div id="ArticleTextArea">
          <asp:Label ID="lblArticleDetails" CssClass="PageBodyText" runat="server"  meta:resourcekey="lblArticleDetailsResource1"></asp:Label>
     </div>
</div> 
```

页面插图示例 ![例子](../Images/5c276966ecd5786dba79c44bf4579493.png)

在实施 riffnl 建议的解决方案之后（这有其自身的问题，因为蓝线比文本长，我无法修复它，因为段落周围有填充。我的第一个解决方案运行良好，但在 URL 路由后它不起作用

![解决后的例子](../Images/ec7c7bf22c4a2654ea23a990023c2d75.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:54:25.943

@riffnl 的解决方案是要走的路 - 像这样解决您的填充问题：http: [//jsfiddle.net/Wf6tA/](http://jsfiddle.net/Wf6tA/)

请注意，您可以单击段落来标记或取消标记它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T15:27:16.073

我移动了以下脚本并将其放在解决了我的问题的 div 标签之后。如果我将此脚本保留在 div 标签之前，我不明白为什么它不起作用。

```
$(document).ready(function () {
    var h = document.getElementById("ArticleTextArea").offsetHeight;
    h = h - 25;
    document.getElementById("ArticleBlueSide").style.height = h + "px";
}); 
```

我感谢其他人的回复，但这是我想要脚本的行为。

# algorithm - 如何在连接组件标记算法 i Fortran 中存储等价

> ID：10531582
> 
> 赞同：0
> 
> 时间：2012-05-10T09:53:18.383
> 
> 标签：algorithm, fortran, fortran90

我必须实现连接组件标记算法 Fortran。我对如何扫描矩阵有一个清晰的想法，但是存储和恢复等价类呢？我想在许多其他编程语言中是一件容易的事，但我必须在 Fortran 中完成。我该怎么做？

**第一次编辑：**按照维基百科上关于[连接组件算法](http://en.wikipedia.org/wiki/Connected-component_labeling)的伪代码，我不知道如何在 Fortran 中做的是

`linked[label] = union(linked[label], L)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:48:42.670

这是答案的一些片段。看起来您需要实现一个表示一组标签的数据结构。您必须做出的第一个决定是决定如何为标签建模。我看到了 3 种明显的方法：

1.  使用整数。
2.  使用长度为 1（或 2 或任何你想要的）的字符变量。
3.  使用您希望它具有的任何组件定义一个类型。

第二个决定是如何实现一组标签。我看到了 3 种明显的方法：

1.  使用大小在编译时固定的标签数组（整数数组，字符数组（len = 2），类型数组（标签），没关系）。你必须相当确定你硬连线的尺寸总是足够大。这不是一个非常吸引人的方法；我可能不应该提到它。
2.  使用在运行时设置大小的标签数组。这意味着使用可分配数组。如果可能的话，您必须弄清楚如何在运行时将其设置为正确的大小。
3.  实现表示一组标签的类型。例如，这种类型可以将集合建模为链表。但这不是对集合建模的唯一方法，该类型可能会将标签集合建模为一个数组，并在需要时做一些花哨的步骤来重新调整数组的大小。当然，通过定义类型，您可以自由地更改集合的内部表示，而无需修改使用集合类型公开的功能的代码。

根据您所做的选择，实现联合函数以将新标签添加到现有标签集应该非常简单。

但请注意，还有许多其他方法可以解决此问题。例如，您可以从一组已定义的组件标签开始，然后从该组中删除不需要使用的标签。

由于您似乎是 Fortran 新手，因此这里列出了您需要熟悉以实现上述功能的语言特性。

1.  您的编译器实现了多少 Fortran 2003 标准。
2.  定义和使用派生类型。
3.  可分配数组，分配数组，移动分配。
4.  派生类型的数组。
5.  类型绑定的过程。
6.  指针和目标。

# node.js - 调试失败的 node-ffi 回调/分段错误

> ID：10531589
> 
> 赞同：5
> 
> 时间：2012-05-10T09:53:52.933
> 
> 标签：node.js, crash, vlc, v8, node-ffi

我正在尝试使用 node-ffi 从 node.js 中使用 libvlc，虽然它似乎对一般的基本媒体播放器功能非常有用，但当我尝试使用时，我的程序中不断出现崩溃、分段错误和一般冻结libvlc 的异步事件系统，并与 node 的 EventEmitter 集成。到目前为止，我使用的代码托管在[https://gist.github.com/2644721](https://gist.github.com/2644721)，但似乎不起作用。

GDB 产生了好坏参半的结果，但我收到的最后一次崩溃是：

```
Program received signal SIGSEGV, Segmentation fault.
0x000000000057cc86 in v8::Function::Call(v8::Handle<v8::Object>, int, v8::Handle<v8::Value>*) ()
(gdb) bt
#0  0x000000000057cc86 in v8::Function::Call(v8::Handle<v8::Object>, int, v8::Handle<v8::Value>*) ()
#1  0x00007ffff5997a41 in CallbackInfo::DispatchToV8(CallbackInfo*, void*, void**) ()
   from /home/adam/node_modules/node-ffi/compiled/0.6/linux/x64/ffi_bindings.node
#2  0x00007ffff5997adb in CallbackInfo::WatcherCallback(uv_async_s*, int) ()
   from /home/adam/node_modules/node-ffi/compiled/0.6/linux/x64/ffi_bindings.node
#3  0x00000000007be12f in ev_invoke_pending ()
#4  0x00000000007c2087 in ev_run ()
#5  0x00000000007b597f in uv_run ()
#6  0x000000000052a147 in node::Start(int, char**) ()
#7  0x00007ffff63ca76d in __libc_start_main ()
   from /lib/x86_64-linux-gnu/libc.so.6
#8  0x0000000000524fe5 in _start () 
```

很明显我在这里做错了——node-ffi 文档说，如果你做错了什么，很容易导致这种行为。我在想也许回调不是从同一个线程或范围运行的，但我不确定如何检查甚至修复它。任何帮助，将不胜感激...

```
Program received signal SIGSEGV, Segmentation fault.
IsGlobalObject (this=0x1)
    at /build/buildd/nodejs-0.6.17/deps/v8/src/objects-inl.h:796
796 in /build/buildd/nodejs-0.6.17/deps/v8/src/objects-inl.h
(gdb) bt
#0  IsGlobalObject (this=0x1)
    at /build/buildd/nodejs-0.6.17/deps/v8/src/objects-inl.h:796
#1  v8::internal::Invoke (construct=<optimised out>, func=..., receiver=..., 
    argc=2, args=0x7fffffffdeb0, has_pending_exception=0x7fffffffde1f)
    at /build/buildd/nodejs-0.6.17/deps/v8/src/execution.cc:101
#2  0x00000000005ae967 in v8::internal::Execution::Call (callable=..., 
    receiver=..., argc=2, args=0x7fffffffdeb0, 
    pending_exception=0x7fffffffde1f, convert_receiver=<optimised out>)
    at /build/buildd/nodejs-0.6.17/deps/v8/src/execution.cc:175
#3  0x000000000057cd31 in v8::Function::Call (this=0xc0aae0, recv=..., argc=2, 
    argv=0x7fffffffdeb0) at /build/buildd/nodejs-0.6.17/deps/v8/src/api.cc:3601
#4  0x00007ffff5997a41 in CallbackInfo::DispatchToV8(CallbackInfo*, void*, void**) ()
   from /home/adam/node_modules/node-ffi/compiled/0.6/linux/x64/ffi_bindings.node
#5  0x00007ffff5997adb in CallbackInfo::WatcherCallback(uv_async_s*, int) ()
   from /home/adam/node_modules/node-ffi/compiled/0.6/linux/x64/ffi_bindings.node
#6  0x00000000007be12f in ev_invoke_pending (loop=0xb9dea0)
    at src/unix/ev/ev.c:2149
#7  0x00000000007c2087 in ev_run (loop=0xb9dea0, flags=0)
    at src/unix/ev/ev.c:2525
#8  0x00000000007b597f in uv_run (loop=<optimised out>) at src/unix/core.c:194 
```

# ruby - 关于非贪婪正则表达式匹配的一些混淆

> ID：10531591
> 
> 赞同：1
> 
> 时间：2012-05-10T09:54:08.297
> 
> 标签：ruby, regex

我写了一段 ruby​​ 代码，如下所示

```
 #! /usr/bin/ruby
    s = "[[abc]]"  
    if(s =~ /\[(.+)*?\]/)
        puts $1
    end
    if(s =~ /\[(.+?)\]/)
        puts $1
    end 
```

它的输出是：

```
[abc
[abc 
```

然后我改变变量 s

```
 s = "[[abc]]]" 
```

其余部分保持不变，但现在结果是

```
[abc]
[abc 
```

为什么会发生这种情况？有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:36:32.833

我不确定这里是否有人能够解释这种行为。我检查了[Regexr](http://regexr.com?30te9)并且正则表达式的行为就像你所期望的那样。

但

```
\[(.+)*?\] 
```

只是一个糟糕的设计表达。应该`(.+)*`搭配什么？那是嵌套量词，它可以在许多变体中找到有效匹配。现在更糟糕的是，使外部量词变得懒惰，应该发生什么？

如果你想有贪婪匹配使用

```
\[(.+)\] 
```

如果你想有惰性匹配，使用

```
\[(.+?)\] 
```

**但是永远不要嵌套量词，这样他们就可以找到许多可能的解决方案，这会导致[灾难性的回溯](http://www.regular-expressions.info/catastrophic.html)，或者在此处查看[Jeff Atwood 关于编码恐怖的关于正则表达式性能的博客文章](http://www.codinghorror.com/blog/2006/01/regex-performance.html)**

# php - 如何使用 symfony 检查特定文件是否上传到数据库？

> ID：10531593
> 
> 赞同：0
> 
> 时间：2012-05-10T09:54:08.533
> 
> 标签：php, forms, symfony1, symfony-1.4

我正在创建一个工作门户网站，我想在求职者上传他的简历之前检查他何时申请工作，检查他是否在他的个人资料中上传了他的简历。当求职者在创建个人资料时上传简历时，简历状态将变为“1”否则为“0”。所以我想在我的 vacancyApply 操作中检查它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:03:17.427

在您的控制器中：

```
public function executeVacancyApply(sfWebRequest $request)
{
  if ($this->getUser()->getCVStatus()) // pretending cv_status is a boolean
  {
    // he does
  }
  else
  {
    // he doesn't
  }
} 
```

# sql - Broker Service 中的路由地址问题

> ID：10531594
> 
> 赞同：0
> 
> 时间：2012-05-10T09:54:10.390
> 
> 标签：sql, sql-server-2008, service-broker

当我在客户站点上配置代理服务时。我在路由地址方面遇到了一个令人困惑的问题。客户有一个 SQL 默认实例和一个命名实例，如下所示：ADDRESS = N'TCP://SQLInst/SQLNamed1:4882'

我试图命令 Shell 数据库来获取 IP 以解决这个问题，但只能获取我在链接下面使用的默认实例 IP。

那么这个问题的解决方法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:44:08.830

您应该使用的语法是：

N'TCP://SQLInst:4882'

您将其发送到服务器名称和 SQL Server 实例正在侦听的特定 TCP 端口，以便在连接中不使用该实例名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:56:57.800

如果您在按名称访问 SQL Server 实例时遇到问题，您需要在客户端上启用 SQLServer 浏览器启用

# c++ - QTreeView，QTableView，不同层次层的显示项

> ID：10531599
> 
> 赞同：2
> 
> 时间：2012-05-10T09:54:31.140
> 
> 标签：c++, model-view-controller, qt

我想在 QTableView 和 QTreeView 中使用一个自定义模型（继承自 QAbstractItemModel）来显示数据。

我的问题是，是否可以在 QTableView 中显示模型的所有元素（我的意思是所有元素，而不仅仅是来自一个层次结构的元素）？到目前为止，我只设法在 QTable 视图中显示一个层次结构级别的项目。

```
QTreeView:
-A
  -A1
  -A2
-B
  -B1
  -B2

QTableView // current behaviour
-A
-B

QTableView // desired behaviour
-A
-A1
-A2
-B
-B1
-B2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:16:47.613

我在这里要做的是使用代理模型在树模型到达 QTableView 之前将其展平。基本上，它是一个位于主模型前面的模型，如果情况需要，它会以不同的格式提供服务，但不会影响模型本身。[您可以在此处](http://doc.qt.io/qt-5/model-view-programming.html#proxy-models)阅读有关如何使用 Qt 执行此操作的信息。

![代理模型](../Images/80134c8c02fd6352da892466c5587c19.png)

# php - 卷曲 CURLOPT_RETURNTRANSFER 没有按预期工作？

> ID：10531603
> 
> 赞同：3
> 
> 时间：2012-05-10T09:54:44.757
> 
> 标签：php, curl

我正在尝试使用 Curl 加载页面。页面加载正确，就像我预期的那样。但问题是 Curl 将整个内容打印出来，而不是按照我的意愿将其保存到变量中。

代码如下所示：

```
//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch,CURLOPT_POST,count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch); 
```

除了初始化之外，这是 php 文件的全部内容。它不能比这简单得多，但它会打印出内容并且不会将其保存到变量 $result 中。

我试过：

```
curl_setopt($ch,CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch,CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch,CURLOPT_RETURNTRANSFER, 1); 
```

我也尝试了一堆其他地址，结果相同。我错过了什么？

也许我必须设置另一个 Curl 选项，或者我必须更改测试服务器的一些设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T03:32:40.810

就我而言，我是在*返回*而不是*回*显返回数据。当我回应返回值时，一切都很好。

编辑：这是使用 jQuery 的 AJAX 命令。

# objective-c - 为什么我的核心数据对象不使用在同一会话中创建的相关对象之间的获取请求显示？

> ID：10531605
> 
> 赞同：1
> 
> 时间：2012-05-10T09:54:47.593
> 
> 标签：objective-c, cocoa-touch, core-data, magicalrecord

这是一个非常奇怪的情况，我在过去几天一直在努力解决。

我有一个`Card`实体与实体上的多对多关系`Transaction`。我还使用 Magical Record 来删除围绕管理我的数据存储的样板代码。

我的问题按以下顺序发生：

1.  创建一个`Card`对象
2.  `Transaction`然后在另一个视图中创建一个对象
3.  当我检查交易计数时，`[card.transactions count]`我得到 1 作为大小
4.  *但是，如果我使用相同的上下文*执行获取请求，则事务不存在。我的谓词如下所示：

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"card == %@ && deleted == 0", card];

所以逻辑说我可能在保存事务后没有保存上下文，但奇怪的是，如果我退出应用程序然后重新运行它，事务就在那里。如果我创建卡、退出应用程序然后运行应用程序并添加交易，那么步骤 1-4 也可以完美运行。然后我的保存交易代码工作正常。

所以我的问题是，为什么我的对象没有在新创建的父对象上使用获取请求显示，其中“新创建”意味着它是在与子对象相同的会话中创建的。

我创建卡片的代码如下所示：

```
GYCard *card = [GYCard MR_createInContext:[NSManagedObjectContext MR_defaultContext]];
[[NSManagedObjectContext MR_defaultContext] MR_save]; 
```

然后当我保存交易时，我的代码如下所示：

```
NSManagedObjectContext *localContext = [NSManagedObjectContext MR_defaultContext];
NSNumber *transactionAmount = [self.numberFormatter numberFromString:self.transactionAmountLabel.text];
GYTransaction *transaction = [GYTransaction MR_createInContext:localContext];
transaction.amount = transactionAmount;
transaction.deleted = [NSNumber numberWithBool:NO];
transaction.card = self.card;
[localContext MR_save]; 
```

不工作的代码是这样的：

```
+ (int) countTransactions:(GYCard *) card {
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"card == %@ && deleted == 0", card];
    return [GYTransaction MR_countOfEntitiesWithPredicate:predicate inContext:[NSManagedObjectContext MR_defaultContext]];
} 
```

如果卡片是在同一会话中创建的，则 countTransactions 始终返回 0。但如果我退出应用程序并重新启动，它会 100% 工作。它还适用于在退出并重新启动应用程序后向卡添加任何新交易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:43:48.330

这似乎是一个神奇的记录问题。我正在使用 Magical Record 的**2.0 beta**分支，在恢复到标记版本后：**1.8.3**问题消失了。所以2.0似乎是罪魁祸首。然而，知道为什么 2.0 版会导致这个问题仍然很有趣。

我强烈建议任何使用 Magical Record 的人避免使用 2.0 分支，直到它完成测试版。

**更新：**经过进一步调查，Magical Record 的 2.0 测试版正在为 1 次保存生成 2 次保存通知，这导致我的应用无意中拥有 2 个版本的卡。这导致我正在记录的交易记录在第一张卡上，但第二张卡显然没有交易。然后我的获取请求是获取第二张卡并返回零交易。退出并重新启动应用程序然后使我的应用程序从数据存储加载正确的事务，从而按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:57:25.267

这可能与 上的`includesPendingChanges`属性有关`NSFetchRequest`。但是，默认情况下`YES`这意味着任何未保存的更改都应包含在任何查询中。

我不确定这些`MR_`方法在幕后做了什么，但[`setIncludesPendingChanges:`文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/NSFetchRequest.html#//apple_ref/occ/instm/NSFetchRequest/setIncludesPendingChanges%3a)指出：

> **特别注意事项**
> 
> 不支持 YES 值与结果类型 NSDictionaryResultType 一起使用，包括聚合结果的计算（例如 max 和 min）。对于字典，从 fetch 返回的数组反映了持久存储中的当前状态，并且不考虑上下文中的任何未决更改、插入或删除。

所以我会确保该`MR_countOfEntitiesWithPredicate`方法没有做任何时髦的事情。也许尝试在您的上下文中调用标准`- (NSUInteger)countForFetchRequest:(NSFetchRequest *)request error: (NSError **)error`方法并查看返回的内容。

# css - 是什么导致我的标题移动？

> ID：10531608
> 
> 赞同：1
> 
> 时间：2012-05-10T09:54:58.750
> 
> 标签：css, header, css-float, clearfix

我正在研究一个简单的布局，它需要一个页眉、页脚和主要内容。但是，有些事情让我有些烦恼。如果我在我的标题[http://www.reversl.net/before/](http://www.reversl.net/before/)下包含一个图像，那么一切都恰好位于我想要的位置。但是，如果我删除图像，我的标题会从页面顶部给自己留出一个边距，如下所示[http://www.reversl.net/after/](http://www.reversl.net/after/)我猜它与我的浮动标题有关，并且它的浮动内容没有被清除. 但是我已经包含了 clearfix hack，这似乎并没有改变事情。有任何想法吗？

```
<body>
<div class="header clearfix">
<div id="wrap">
    <div class="wrap-inner">
        <ul id="nav-dash">
            <li><a href="#"><img class="header-avatar" src="http://placehold.it/15x15" width="15px" height="15px" alt="" /> YOU &#9660;</a>
                <ul>
                    <li class="first"><a href="#">one</a></li>
                    <li><a href="#">two</a></li>
                    <li><a href="#">three</a></li>
                    <li><a href="#">four</a></li>
                </ul>
            </li>
        </ul><!--.nav-->
        <div id="logo"><a href="#">LOGO</a></div><!--#logo-->
    </div><!--.wrap-inner-->
</div><!--#wrap-->
</div><!--#header--> 
```

```
<div class="wrap-inner">
    <h1>Main Content Here...</h1>
</div><!--.wrap-inner--> 
```

```
<footer>
<div id="wrap">
    <div class="wrap-inner">
        <p>Footer Text Here....</p>
    </div><!--.wrap-inner-->
</div><!--#wrap-->
</footer>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:00:29.923

这是由于主要内容中的 H1 边距。

```
.wrap-inner h1 {margin-top:0} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:19:23.993

嗯，为什么要使用 id='wrap' 的多个项目？

我添加了

```
{
clear:both;
overflow:hidden;
} 
```

到您的主要内容容器（它也是一个“包装”），它似乎工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:02:44.103

请试试这个

```
body
    {
    margin:0;
    padding:0;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T09:59:01.983

Looks like you haven't set any base styles. For example:

```
H1 {
     font-size:2em;
     margin-top:1em;
     ......
 } 
```

# php - 使用另一个表的字段自定义搜索 sugarcrm

> ID：10531610
> 
> 赞同：3
> 
> 时间：2012-05-10T09:55:13.007
> 
> 标签：php, sugarcrm

我想在 sugarcrm 中进行特殊搜索：获取所有具有特殊类型事件的帐户（例如，有客户访问的帐户）是否可以在 sugarcrm 中？（我使用 6.2 CE）

此外，我想为组用户强制使用此特殊过滤器（特殊类型的用户只会看到有客户访问的帐户）

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:33:22.510

好吧，我在 sugarcrm 论坛上发现了一些有趣的帖子 + 这个网站上的 howto。

当您按照该说明进行操作时：

[http://developers.sugarcrm.com/wordpress/2011/04/19/howto-add-a-search-field-that-searches-another-module/](http://developers.sugarcrm.com/wordpress/2011/04/19/howto-add-a-search-field-that-searches-another-module/)

您可以使用数据库上的文本框进行搜索

当我想使用枚举字段（选择）时遇到问题，查询类似于 cstm.nature_c LIKE ''Op'%'）但它不起作用

之后我发现[http://forums.sugarcrm.com/f6/issues-cross-module-search-enum-fields-77778/](http://forums.sugarcrm.com/f6/issues-cross-module-search-enum-fields-77778/)和[http://forums.sugarcrm.com/f6/search-through-fields-related -modules-57125/#post265614](http://forums.sugarcrm.com/f6/search-through-fields-related-modules-57125/#post265614)这是解决方案

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-20T16:51:55.740

我自己也为此苦苦挣扎。我终于想出了一个我在这里详述的解决方案：[cross-module-search-implementation](https://suitecrm.com/forum/developer-help/3658-cross-module-search-implementation)

# tcp - 如何使用 Nmap 检索 TCP 和 UDP 端口？

> ID：10531618
> 
> 赞同：24
> 
> 时间：2012-05-10T09:56:09.343
> 
> 标签：tcp, udp, nmap, port-scanning

我需要以最快的方式使用 Nmap 在同一扫描中检索 TCP 和 UDP 端口。我会尝试更好地解释它。如果我使用最常用的命令：

```
nmap 192.168.1.1 
```

它只检索 TCP 端口，而且速度非常快。

如果我使用以下命令：

```
nmap -sU 192.168.1.1 
```

它只检索 UDP 端口，而且速度非常快（虽然不是那么快但仍然如此）。

我的问题：是否有两个命令的组合？我试过了：

```
nmap -sU -sS 192.168.1.1
nmap -sU -sT 192.168.1.1 
```

但是他们非常慢。

我正在使用 Nmap 5.51，有什么建议吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-10T10:54:59.660

如您所见，UDP 扫描很慢，因为打开/过滤的端口通常不响应，因此 nmap 必须超时然后重新传输，而关闭的端口将发送 ICMP 端口不可达错误，系统通常会限制速率。

您可以添加 -T 开关以提高扫描速度，但这可能会降低准确性并使其更易于检测。

-T<0-5>：设置时序模板（越高越快）

-PN 将关闭 ping 扫描元素

您还可以并行扫描更多主机，

或使用 -p 开关或 --top-ports 减少您正在扫描的端口数量，这将扫描 nmap-services 文件中的最高比率端口。

如果您正在扫描多个主机，则可以使用 --host-timeout 跳过慢速主机。

关于 TCP，-sS 应该比 -sT 快。

！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-10T11:11:16.157

你没有说你的扫描有多慢，但我认为你会从这个`--min-parallelism`选项中受益，它会调整未完成探测的最小数量。

我看到`-sT` `-sU`像这样的扫描时间（与裸扫描相比）减少了 70%。请注意，可能设置`--min-parallelism`得太高，以致主机（或网络）无法同时缓冲这么多查询。

```
[mpenning@Hotcoffee]$ sudo nmap --min-parallelism 100 -sT -sU localhost

Starting Nmap 5.00 ( http://nmap.org ) at 2012-05-10 01:07 CDT
Interesting ports on localhost (127.0.0.1):
Not shown: 1978 closed ports
PORT     STATE         SERVICE
22/tcp   open          ssh
25/tcp   open          smtp
49/tcp   open          tacacs
53/tcp   open          domain
80/tcp   open          http
111/tcp  open          rpcbind
631/tcp  open          ipp
2003/tcp open          finger
2004/tcp open          mailbox
3389/tcp open          ms-term-serv
5901/tcp open          vnc-1
5910/tcp open          unknown
6001/tcp open          X11:1
7002/tcp open          afs3-prserver
53/udp   open|filtered domain
69/udp   open|filtered tftp
111/udp  open|filtered rpcbind
123/udp  open|filtered ntp
161/udp  open|filtered snmp
631/udp  open|filtered ipp
1812/udp open|filtered radius
1813/udp open|filtered radacct

Nmap done: 1 IP address (1 host up) scanned in 1.54 seconds
[mpenning@Hotcoffee]$ 
```

# php - 如何在此回调中获取 json 消息

> ID：10531621
> 
> 赞同：0
> 
> 时间：2012-05-10T09:56:16.603
> 
> 标签：php, javascript, jquery, jeditable

我正在尝试对 jEditable 处理错误的方式进行一些更改。我有一个返回的 PHP 函数：

```
echo "{'error':'ok', 'error_msg':'There was a problem'}"; 
```

在我的 javascript 中：

```
"callback": function( sValue, y ) 
                      {
                        if (sValue == "ok")
                        {
                          alert ("ok");
                        }
                        else
                        {
                          alert ("error");
                        }}, 
```

现在，无论我尝试什么，我都会在屏幕上不断收到“错误”警报。显然问题出在这一行：

```
if (sValue == "ok") 
```

但我不确定它应该是什么？我查看了 StackOverflow 上的其他示例 - 但找不到一个回答我的问题的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:59:22.460

似乎您需要解析 JSON 并`error`从解析的对象中获取值：

```
"callback": function (data, y) {
    var errorData = $.parseJSON(data);
    if (errorData.error == "ok") {
        alert("ok");
    } else {
        alert("error");
    }
}, 
```

# php - 如何在 Zend Framework 1.11 中向我的输入中添加所需的错误消息？

> ID：10531622
> 
> 赞同：3
> 
> 时间：2012-05-10T09:56:17.920
> 
> 标签：php, zend-framework, zend-form, zend-form-element, zend-validate

我的表单/video.php 中有以下代码片段。但我不知道在哪里添加所需的验证消息。

```
$this->addElement('text','name', array(
        'label'=>'Name',
        'maxlength'=>20,
        'class'=>'name',
        'required'=>true,
        'filters'=>array('StringTrim'),
        'decorators'=>array(
            'ViewHelper',
            'Errors',
            array(array('control'=>'HtmlTag'), array('tag'=>'div', 'class'=>'fieldcontrol')),
            array('Label', array('tag'=>'div', 'class'=>'name')),
            array(array('row'=>'HtmlTag'), array('tag' => 'div', 'class'=>'row')),
        )
    )); 
```

而不是“值是必需的，不能为空”，我想将其设置为“请输入您的姓名”之类的其他内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T10:46:21.220

最后，我得到了这个工作：

```
$this->addElement('text', 'age', array(
            'label'=>'Age',
            'maxlength'=>2,
            'class'=>'age',
            'required'=>true,
            'filters'=>array('StringTrim'),
            'validators'=>array(
                array(
                    'validator'=>'NotEmpty',
                    'options'=>array(
                        'messages'=>'Please enter your age.'
                    ),
                    'breakChainOnFailure'=>true
                ),
                array(
                    'validator'=>'Int',
                    'options'=>array(
                        'messages'=>'Age must be a number.'
                    ),
                    'breakChainOnFailure'=>true
                ),
                array(
                    'validator'=>'between',
                    'options'=>array(
                        'min'=>8,
                        'max'=>10,
                        'messages'=>array(
                            Zend_Validate_Between::NOT_BETWEEN => 'This is for %min% to %max% years old.'
                        )
                    )
                ),

            ),
            'decorators'=>array(
                'ViewHelper',
                'Errors',
                array(array('control'=>'HtmlTag'), array('tag'=>'div', 'class'=>'fieldcontrol')),
                array('Label', array('tag'=>'div', 'class'=>'age')),
                array(array('row'=>'HtmlTag'), array('tag' => 'div', 'class'=>'row')),
            ),
        )); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:54:53.217

我可能会将`required`设置保留为默认值并改用`NotEmpty`验证器。

```
$this->addElement('text', 'age', array(
            'label'=>'Age',
            'maxlength'=>2,
            'class'=>'age',
            'filters'=>array('StringTrim'),
            'validators'=>array(
                array(
                    'validator'=>'Int',
                    'options'=>array(
                        'messages'=>'Age must be a number.'
                    )
                ),
                array(
                    'validator'=>'NotEmpty',
                    'options'=>array(
                        'messages'=>'Please enter your age.'
                    )
                ),
                array(
                    'validator'=>'between',
                    'options'=>array(
                        'min'=>8,
                        'max'=>10,
                        'messages'=>array(
                            Zend_Validate_Between::NOT_BETWEEN => 'Your age must be between %min% to %max%.'
                        )
                    )
                )
            ),
            'decorators'=>array(
                'ViewHelper',
                'Errors',
                array(array('control'=>'HtmlTag'), array('tag'=>'div', 'class'=>'fieldcontrol')),
                array('Label', array('tag'=>'div', 'class'=>'age')),
                array(array('row'=>'HtmlTag'), array('tag' => 'div', 'class'=>'row')),
            ),
        )); 
```

`NotEmpty()``isRequired()`本质上与但是是一个实际的验证器做同样的事情，其中`isRequired()`​​只是一个标志设置在`Zend_Form_Element`. 它也不应该弄乱你的消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:08:52.880

**已编辑**

这应该这样做：

```
...
$name = $this->getElement('name')->addErrorMessage('Please enter your name');
... 
```

# c++ - 如何以编程方式查找计算机的域

> ID：10531626
> 
> 赞同：0
> 
> 时间：2012-05-10T09:56:31.097
> 
> 标签：c++, linux, network-programming

目前大多数系统都附加到一个域左右。是否可以进行任何方法/系统调用来获取系统当前域（类似于 gethostname）。我主要是在寻找一些可移植的解决方案（win/Lin），但如果你能指导我如何在 Linux 中获取信息，那将非常有帮助。我正在尝试在 Linux 中的 C++ 程序中获取相同的内容，但还没有。

澄清一下，我知道我们可以轻松获取主机名。它是我正在寻找的“localhost@somedomain”的“somedomain”部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:12:34.513

有一个`getdomainname()`函数可以获取您计算机的 DNS 域名（不是工作组/Windows 域），例如：

```
#include <iostream>
#include <unistd.h>

int main() {
  char buffer[1024];
  getdomainname(buffer, sizeof(buffer));
  std::cout << buffer << std::endl;
} 
```

# objective-c - 扩展 NSManagedObject 的删除方法

> ID：10531628
> 
> 赞同：7
> 
> 时间：2012-05-10T09:56:54.817
> 
> 标签：objective-c, core-data, nsmanagedobject

我正在使用 CoreData 并且想知道是否可以以某种方式扩展我的 NSManagedObjects 以执行自定义操作（例如删除属于此实例的文件）。

在我的情况下，我有几个 CoreData 实体，每个实体可能有一个文件夹或文件路径存储在一个属性中。如果实体被删除，我希望该实体自行删除引用的文件。

这种行为与“级联”删除规则结合起来特别有用，因为删除实体会删除所有子实体及其文件。

如果没有这样的机制，我将为每个包含自定义删除方法的实体编写一个类别，包括可能有子实体的级联行为。

你会怎么做，我的问题有一个优雅的解决方案吗？以前有没有讨论过这个，我只是没有找到它？

非常感谢！

保罗

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-10T10:01:21.413

您可以在删除对象之前通过覆盖子类中的`prepareForDeletion`方法进行额外的清理`NSManagedObject`。

# regex - 在电子邮件地址中使用空格时，Regex.IsMatch 很慢

> ID：10531639
> 
> 赞同：0
> 
> 时间：2012-05-10T09:57:26.347
> 
> 标签：regex

我使用以下表达式来验证电子邮件地址（我在互联网上的某个地方找到了它，所以如果它完全错误，请不要怪我:-)）：

^((?:(?:(?:[a-zA-Z0-9_][.-+]?)*)[a-zA-Z0-9_][.-+]?)*)\@( (?:(?:(?:[a-zA-Z0-9][.-_]?){0,62})[a-zA-Z0-9])+).([a-zA- Z0-9]{2,6})$

它在大多数情况下都可以正常工作，但由于某种原因，在电子邮件地址的某处添加空格会使 IsMatch 方法非常慢。似乎计算时间随着电子邮件地址中空间的位置而增长。以下无效的电子邮件地址说明了问题。

test@aweb serversomewhereintheworld.com（慢）

test@awebserversomewhere intheworld.com（非常慢）

用于验证电子邮件地址的正则表达式有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:45:42.253

由于电子邮件地址中的空格无效，因此只需在进行完整验证之前单独检查空格，如果发现任何空格，请不要进行完整（慢速）验证。

此外，有关将正则表达式用于电子邮件地址有什么问题的完整讨论，请参阅以下问题：[使用正则表达式验证电子邮件地址](https://stackoverflow.com/questions/201323/how-to-use-a-regular-expression-to-validate-an-email-addresses)

# linq - 使用 linq 从 xml 中检索值

> ID：10531640
> 
> 赞同：0
> 
> 时间：2012-05-10T09:57:27.220
> 
> 标签：linq, linq-to-xml

我有这个 XML 数据

```
<Address Location="ABC">
   <Add Location="XYZ1" street="street1"  />
   <Add Location="VZC" street="street1" />
</Address> 
```

我想找出`<add> --> street` 哪个值是`street1`

我已经尝试如下，没有得到结果

```
var q = from res in xmlDoc.Descendants("Address")
        where res.Attribute("Location").Value == "ABC"
              && res.Element("Add").Attribute("Location").Value == "VZC"
        select new
               {
                  streetadd= res.Element("Add").Attribute("street").Value,
               }; 
```

请有人建议在这种情况下如何检查子元素的条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:21:03.020

尝试这个：

```
 var query = from res in xmlDoc.Descendants("Address")
                                where res.Attribute("Location").Value == "ABC"
                                from child in res.Elements("Add")
                                where child.Attribute("Location").Value == "VZC"
                                select new
                                {
                                    streetadd = child.Attribute("street").Value
                                }; 
```

# python - Python列表组合

> ID：10531645
> 
> 赞同：1
> 
> 时间：2012-05-10T09:57:44.550
> 
> 标签：python, itertools

我有一个清单：

```
nums = [1, 2, 3, 4] 
```

我想获得拆分列表的所有可能性`1 - 3`：

```
[
    ( 1, (2, 3, 4) ),
    ( 2, (1, 3, 4) ),
    ( 3, (1, 2, 4) ),
    ( 4, (1, 2 ,3) )
] 
```

现在我能找到的最好的是 use `itertools.combinations(num, 3)`，但它只会给出每个项目的第二部分，这意味着`[(1, 2, 3), (1, 2, 4), (1, 3, 4), (2, 3, 4)]`. 我可以使用其他方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T10:06:46.547

根据您要解决的问题的一般性，解决方案可能或多或少简单:)

```
In [1]: nums = [1, 2, 3, 4]

In [2]: [(x, tuple(y for y in nums if y != x)) for x in nums]
Out[2]: [(1, (2, 3, 4)), (2, (1, 3, 4)), (3, (1, 2, 4)), (4, (1, 2, 3))] 
```

如果列表中有重复值，请使用索引进行比较：

```
In [3]: [(x, tuple(y for j, y in enumerate(nums) if j != i)) for i, x in enumerate(nums)]
Out[3]: [(1, (2, 3, 4)), (2, (1, 3, 4)), (3, (1, 2, 4)), (4, (1, 2, 3))] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T09:58:59.197

你已经成功了一半。您可以使用 and 将结果与原始列表结合[`zip`](http://docs.python.org/library/functions.html#zip)起来[`reversed`](http://docs.python.org/library/functions.html#reversed)：

```
result = zip(num, reversed(itertools.combinations(num, 3))) 
```

但是如果你想使用第一部分只是某种索引，那就没有必要了。您可以使用列表中元素的位置作为索引（显然）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T10:12:59.273

这似乎是一个更简单的解决方案：

```
nums = [1, 2, 3, 4]
for n in range(len(nums)):
    print (nums[n], nums[:n] + nums[n+1:]) 
```

作为理解：

```
result = [(s, nums[:n] + nums[n+1:]) for n, s in enumerate(nums)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T10:05:53.287

这可以解决问题，但可能效率低下：

```
>>> t=set(nums) ; [ (t.difference(x).pop(),x) for x in list(itertools.combinations(t,3)) ]
[(4, (1, 2, 3)), (3, (1, 2, 4)), (2, (1, 3, 4)), (1, (2, 3, 4))] 
```

# javascript - 为什么 onChange 事件发生时不调用 clear() 函数？

> ID：10531649
> 
> 赞同：0
> 
> 时间：2012-05-10T09:58:03.990
> 
> 标签：javascript, validation

我正在完成一个关于 Javascript 表单验证的练习。在我的代码中，我有一个包含三列的表：表单名称、表单、验证消息。当表单验证期间发生错误时，该消息将显示在第三列中。当表单元素更改时 - 错误消息应该消失但它不会。似乎根本没有调用 clear() 函数。有人可以帮我吗 - 谢谢！

```
<html>
<head>
<title>Validation</title>
<script type="text/javascript">
    function clear()
    {
        for(var i in document.getElementsByName("error"))
        {
            document.getElementsByName("error")[i].innerHTML = "";
        }
    }

    function validate()
    {
        if(document.Form.Name.value.length < 1)
        {
            document.getElementsByName("error")[0].innerHTML = "Please enter your full name."
            return false;
        }

        if(document.Form.Address.value.length<3)
        {
            document.getElementsByName("error")[1].innerHTML = "Please enter full address."
            return false;
        }

        if(document.Form.Phone.value.length <6)
        {
            document.getElementsByName("error")[2].innerHTML = "Please enter a phone number."
            return false;
        }

        if(document.Form.Email.value.length <5 || "@".search(document.Form.Email.value)==-1)
        {
            document.getElementsByName("error")[3].innerHTML = "Please enter a valid e-mail address";
            return false;
        }

    }
</script>
</head>
<body>
<h1>Validation</h1>
<p>Enter the following information. When you press the Submit button, the data you entered will be validated.</p>
<form name="Form" onSubmit="return validate()">
<table>
<tr>
    <td>Name</td>
    <td><input type="text" name="Name" size="20" onchange="clear()" class="Form"></td>
    <td><div name="error"></div></td>
</tr>
<tr>
    <td>Address</td>
    <td><textarea rows="5" columns="20" class="Form" onchange="clear()" name="Address"></textarea></td>
    <td><div name="error"></div></td>
</tr>
<tr>
    <td>Phone</td>
    <td><input type="text" name="Phone" onchange="clear()" size="11" class="Form"></td>
    <td><div name="error"></div></td>
</tr>
<tr>
    <td>E-mail</td>
    <td><input type="text" name="Email" onchange="clear()" size="20" class="Form"></td>
    <td><div name="error"></div></td>
</tr>
</table>
<input type="submit" value="Submit" >
<input type="button" value="Clear" onClick="clear();">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:31:36.637

试试这个

```
 <html>
    <head>
<title>Validation</title>

</head>
<body>
<h1>Validation</h1>
<p>Enter the following information. When you press the Submit button, the data you entered will be validated.</p>
<form name="Form" onSubmit="return validate()">
<table>
<tr>
    <td>Name</td>
    <td><input type="text" name="Name" size="20" onkeypress="return clearErrors();" class="Form"></td>
    <td><div name="error"></div></td>
</tr>
<tr>
    <td>Address</td>
    <td><textarea rows="5" columns="20" class="Form" onkeypress="return clearErrors();" name="Address"></textarea></td>
    <td><div name="error"></div></td>
</tr>
<tr>
    <td>Phone</td>
    <td><input type="text" name="Phone" onkeypress="return clearErrors();" size="11" class="Form"></td>
    <td><div name="error"></div></td>
</tr>
<tr>
    <td>E-mail</td>
    <td><input type="text" name="Email" onkeypress="return clearErrors();" size="20" class="Form"></td>
    <td><div name="error"></div></td>
</tr>
</table>
<input type="submit" value="Submit" >
<input type="button" value="Clear" onClick="return clearErrors();">
</form>
<script type="text/javascript">
    function clearErrors()
        { 

            var arr = new Array(); 
            arr = document.getElementsByName('error'); 
            for (var i = 0; i < arr.length; i++) { 
                document.getElementsByName('error')[i].innerHTML = "";

            }      
        return true;
    }

    function validate()
    {
        if(document.Form.Name.value.length < 1)
        {
            document.getElementsByName("error")[0].innerHTML = "Please enter your full name."
            return false;
        }

        if(document.Form.Address.value.length<3)
        {
            document.getElementsByName("error")[1].innerHTML = "Please enter full address."
            return false;
        }

        if(document.Form.Phone.value.length <6)
        {
            document.getElementsByName("error")[2].innerHTML = "Please enter a phone number."
            return false;
        }

        if(document.Form.Email.value.length <5 || "@".search(document.Form.Email.value)==-1)
        {
            document.getElementsByName("error")[3].innerHTML = "Please enter a valid e-mail address";
            return false;
        }

    }
</script>
</body>
</html> 
```

# python - 以正确的方式编写十六进制（在python中）

> ID：10531652
> 
> 赞同：1
> 
> 时间：2012-05-10T09:58:09.613
> 
> 标签：python, hex

我有一个二进制文件要读取，我想以正确的十六进制形式显示结果。代码如下：

```
file=open('myfile.chn', 'rb')   
while 1:  

        b=fic.readline(1)
        print(b)
file.close() 
```

结果如下：

```
b'\xff'  
b'\xff'  
b'\x01'  
b'\x00'  
.  
. 
```

我可以做些什么来改变结果如下：

```
FF  
FF  
01  
00  
.  
. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T10:11:27.290

```
"%02X" % ord(b'\xff') 
```

将返回字符串`'FF'`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T10:20:16.360

满足您保持前导零的要求：

```
>>> import binascii
>>> binascii.hexlify(b'\x0f').decode().upper()
'0F' 
```

也适用于连续多个字节：

```
>>> binascii.hexlify(b'\xff\x01\x00\xaf').decode().upper()
'FF0100AF' 
```

# visual-studio-2010 - 如何在数据网格视图中搜索项目

> ID：10531658
> 
> 赞同：0
> 
> 时间：2012-05-10T09:58:28.933
> 
> 标签：visual-studio-2010

我在 datagridview 中搜索项目时遇到问题这是我的代码，但是每当我搜索数据库中已经存在的项目时，它都会告诉我找不到

```
If txtfirstname.Text = "" Then
    MsgBox("Please enter first name!")
Else
    Dim totalrow As Integer = DataGridView1.RowCount - 2
    Dim rowin As Integer
    Dim flag As Boolean = False
    Dim sear As String = CStr(txtfirstname.Text)

    For rowin = 0 To totalrow
        Dim id As String = DataGridView1.Item(0, rowin).Value

        If sear = id Then
            DataGridView1.ClearSelection()
            DataGridView1.Rows(rowin).Selected = True
            DataGridView1.CurrentCell = DataGridView1.Item(0, rowin)

            flag = True
            Exit Sub
        Else
            flag = False
        End If

    Next rowin

    If flag = False Then
        MessageBox.Show("Firstname " & txtfirstname.Text & " is not found in database.", "Search Information", MessageBoxButtons.OK, MessageBoxIcon.Information)
    End If

End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:40:17.340

通过设置

```
Dim totalrow As Integer = DataGridView1.RowCount - 2 
```

您总是缺少数据集中的最后一条记录。

尝试

```
Dim totalrow As Integer = DataGridView1.RowCount - 1 
```

`For`设置循环的上限值。

# performance - 当文件变大时，小文件读/写速度会变慢吗？

> ID：10531659
> 
> 赞同：0
> 
> 时间：2012-05-10T09:58:29.440
> 
> 标签：performance, io, filesystems, seek, ext4

我在使用 ext4 的 Ubuntu 12.04 上。我编写了一个 python 程序，它以某种随机访问模式进行小尺寸（主要是 512 字节）读写。我发现随着文件越来越大。执行相同数量的 I/O 需要越来越多的时间。关系是线性的。换句话说，我得到 O(n ² )，其中 n 是 I/O 的累积数量。

我想知道随着文件大小的增加，小 I/O 是否有内在的原因。

另一个观察结果：当我安装一个 ramdisk 并对 ramdisk 执行文件 I/O 时，我没有观察到这种性能下降。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:26:24.913

当您从 1024 字节的大文件中读取 512 字节时，整个文件都在缓存中。随着文件大小的增长，文件中的较小部分在缓存中，并且从磁盘读取数据的频率越来越高。即随着文件的增长，您会获得更多的缓存未命中。也许这就是你正在经历的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:00:36.057

根据您执行 IO 的方式，可能是您在保存之前尝试调用太多内存。

# iphone - 状态栏中的 iOS 4.3 透明 png 不透明

> ID：10531662
> 
> 赞同：0
> 
> 时间：2012-05-10T09:58:34.533
> 
> 标签：iphone, ios, ios4

我在获取我用来替换默认状态栏以在 iOS 4.3 中呈现为透明的 png 图像的透明位时遇到了一些困难。目前，他们正在变黑。

这是我用来绘制图像的代码：

```
@implementation UINavigationBar (BackgroundImage)
    - (void)drawRect:(CGRect)rect 
    {
        UIImage *image = nil;

        switch(self.tag)
        {
            case HeaderBG_Logo:
                image = [UIImage imageNamed: @"top_bar_logo.png"];
                break;
            case HeaderBG_Plain:
                image = [UIImage imageNamed: @"top_bar.png"];
                break;
        }

        if(image != nil)
        {
            [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
        }

    }
@end 
```

这是在 ios4.3 和 ios5 模拟器中运行的同一应用程序的并排比较（图像的底部边框有一个阴影）： ![截屏](../Images/4f62181623c73d39b82d0a2b2d1d5d9f.png)

顺便说一句，4.3 的背景图像似乎也不像 5.0 那样高。

我尝试将 设置`UINavigationBar`为不透明/将其背景颜色设置为`clearColor`. 这些都没有奏效。:(

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:47:46.617

我最终使用了[如何创建 UINavigationBar 投影](https://stackoverflow.com/questions/5940076/how-to-create-uinavigationbar-drop-shadow)中的解决方案来添加阴影`UINavigationBar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:14:37.713

只是一个提示，对于 iOS 5，您可以使用新`appreance`属性来设置背景图像：

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"top_bar.png"] forBarMetrics:UIBarMetricsDefault]; 
```

这将为`UINavigationBar`应用程序中的所有 s 设置图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:29:23.727

我不确定您是否关心状态栏或导航栏。根据您的问题，您似乎更关心导航，所以这里有一个示例代码，可以为我添加 iOS5 和 iOS4 的背景图像。它适用于透明png。

只需在 viewController 的 loadView 方法中添加：

```
#define kBackgroundImageTag 42

UINavigationBar *theNavigationBar = self.navigationController.navigationBar;
UIImage *myBackgroundImage = [UIImage imageNamed:@"myImage.png"];

if([theNavigationBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)]) //iOS5 stuff
{
     [theNavigationBar setBackgroundImage:myBackgroundImage forBarMetrics: UIBarMetricsDefault];

}
else if(![theNavigationBar viewWithTag:kBackgroundImageTag]) //iOS 4 stuff
{
     UIImageView *imageView = [[UIImageView alloc] initWithImage:myBackgroundImage];
     imageView.tag = kBackgroundImageTag;
     [theNavigationBar insertSubview:imageView atIndex:0];
} 
```

希望能帮助到你 ！

# java - JSON：用 java 和 org.json 解析（递归）

> ID：10531665
> 
> 赞同：0
> 
> 时间：2012-05-10T09:58:43.163
> 
> 标签：java, json, org.json

我正在使用该包`org.json`来解析 JSONArray（我将 json 字符串保存在数据库中）。但是，当同一个键可能关联一个字符串或 JSONObject 时，我没有成功解析它，具体取决于上下文。

例如，请参阅以下 JSON 代码...

```
[ { "cssClass" : "input_text",
    "required" : "undefined",
    "values" : "First Name"
  },
  { "cssClass" : "checkbox",
    "required" : "undefined",
    "title" : "What's on your pizza?",
    "values" : { "2" : { "baseline" : "undefined",
            "value" : "Extra Cheese"
          },
        "3" : { "baseline" : "undefined",
            "value" : "Pepperoni"
          }
      }
   }
] 
```

在上面的代码中，密钥`"values"`有两种可能性......

1.  有值的字符串`"First Name"`
2.  具有 value 的 JSONObject `{"2":{"value":"Extra Cheese","baseline":"undefined"},"3":{"value":"Pepperoni","baseline":"undefined"}}`。

当值可能是 2 种不同的数据类型时，我如何能够正确处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:50:26.710

您可能仍然需要检测它是 JSONObject 还是 String，以便您可以进一步处理它，但也许这里的某些东西可能会有所帮助......

你可以试试这样的...

```
String cssClass = myJson.getString("cssClass");
if (cssClass.equals("input_text")){
    // Read it as a String
    String values = myJson.getString("values");
}
else if (cssClass.equals("checkbox")){
    // Read it as a JSONObject
    JSONObject values = myJson.JSONObject("values");
    // further processing here
} 
```

或者也许是这样的......

```
String cssClass = myJson.getString("cssClass");
String values = myJson.getString("values");

if (cssClass.equals("input_text")){
    // do nothing - it's already a String
}
else if (cssClass.equals("checkbox")){
    // Parse the String into a JSONObject
    JSONObject valuesObject = new JSONObject(values);
    // further processing here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T03:59:21.430

在 js 或 java 中这样认为在同一作用域下创建重复变量是无效的，所以为了避免歧义，在将它们放入 json 数组之前，将它们放在具有不同变量名的单独 json 对象中。

# c - 无法远程写入 .spp 文件

ID：10531666

赞同：2

时间：2012-05-10T09:58:44.900

标签：c, linux, networking, network-programming

# iphone - iphone单元测试用例结果显示比测试用例更多的失败

> ID：10531671
> 
> 赞同：0
> 
> 时间：2012-05-10T09:59:05.833
> 
> 标签：iphone, objective-c, macos, unit-testing, sentestingkit

我正在尝试为 iPhone 应用程序编写一些单元测试用例。但结果有点奇怪。我了解结果，但想知道如何获得实际失败和通过的测试用例数。

```
Executed 24 tests, with 29 failures (0 unexpected) in 71.791 (71.819) seconds 
```

这只是没有意义。是的，我在一种情况下有多个断言。它不止一次失败，但不应该只失败一个案例。

```
STAssertNil(var,@"error not nil"); STFail(@"not implemented yet"); 
```

那里，这会说`Executed 1 Tests, with 2 Failures`

如何获得`Executed 1 Test Case, 1 Failed`或`Executed 24 Test Cases, 10 Failed, 14 Passed`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:34:14.927

Objective C 测试框架认为 1 测试是 SenTestCase 中的一种方法。虽然失败计算断言的数量。

如果您希望每个测试对应一个断言，则需要将每个断言放入它自己的测试方法中。

# java - 将_infix_expressions_to_postfix_expressions

> ID：10531672
> 
> 赞同：1
> 
> 时间：2012-05-10T09:59:06.223
> 
> 标签：java

我认为这段代码应该解决带有括号的输入的问题

```
1 * 2 + 3 * ( 5 + 2 ) - 3 
```

并输出不带括号的后缀表达式，但输出为

```
1.0 2.0 * 3.0 * + 5.0 2.0 + ( 3.0 - ) 
```

另一个例子：

```
9 - 5 * 8 + 19 - ( 8 + 10 ) 
```

将会：

```
9.0 5.0 8.0 * - 19.0 + - 8.0 10.0 + ( ) 
```

所以我想知道为什么这段代码不能处理这种情况。我希望以一种好的方式返回不带括号的字符串，而不删除表达式末尾的括号。

```
public static String Converting_infix_expressions_to_postfix_expressions(String infix) throws Exception{
    StringTokenizer st = new StringTokenizer(infix);
    int numOF_tokens = st.countTokens();
    String postfix = "" ;
    for (int i = 1; i <= numOF_tokens; i++) {
        String term = st.nextToken();
        try {  // if it is an Float there is no problem will happen
            float x =  Float.parseFloat(term);
            postfix += x +" " ;
        } catch (Exception e) {
            if(stack.isEmpty())
                stack.push(term);
            else if(term == "(")
                stack.push(term);
            else if(term == ")"){
                while(!stack.isEmpty() &&  (String)stack.peek() != "(")
                    postfix += stack.pop() +" ";
                stack.pop();
            }               
            else{
                int x = 0,y = 0;
                switch(term){
                case "+": x = 1; break;
                case "-": x = 1; break;
                case "*": x = 2; break;
                case "/": x = 2; break;
                }
                switch((String)stack.peek()){
                case "+": y = 1; break;
                case "-": y = 1; break;
                case "*": y = 2; break;
                case "/": y = 2; break;
                }
                if(x > y)
                    stack.push(term);
                else {
                    int x1 = x , y1 = y;
                    boolean puchedBefore = false;
                    while(x1 <= y1){ //when the operator in the peak of the stack is smaller than one read before from the infix excepression.
                        postfix += stack.pop() +" "; 
                        if(stack.isEmpty() || stack.peek() == "(" ){ // to put the term in it's right place if it samller than all the previos operators until the begining of this subset excepression "if it is between parentheses or not "
                            stack.push(term);
                            puchedBefore = true;
                            break;
                        }
                        else{
                            switch(term){
                            case "+": x1 = 1; break;
                            case "-": x1 = 1; break;
                            case "*": x1 = 2; break;
                            case "/": x1 = 2; break;
                            }
                            switch((String)stack.peek()){
                            case "+": y1 = 1; break;
                            case "-": y1 = 1; break;
                            case "*": y1 = 2; break;
                            case "/": y1 = 2; break;
                            }
                        }
                    }
                    if(!puchedBefore)
                        stack.push(term);
                }   
            }
        }
    }
    while (! stack.isEmpty ()) {
        postfix += stack.pop () + " ";
    }
    System.out.println ("The postfix expression is : " + postfix);
    return postfix;
} 
```

# android - DragEvent 上的 NoClassDefFoundError（拖放）

> ID：10531676
> 
> 赞同：1
> 
> 时间：2012-05-10T09:59:26.767
> 
> 标签：android

我试图为我的 Fragment 实现 DragListener，但应用程序崩溃并在此行上给我一个 NoClassDefFoundError：

```
findViewById(R.id.my_tab_fragment).setOnDragListener(new MyDragListener()); 
```

这是我的片段：

```
public class MainFragmentActivity extends FragmentActivity {

    @Override    
    protected void onCreate(Bundle bundle) {   

        WWHApplication.getInstance().getJsonDBInstance();
        WWHApplication.checkDB();

        super.onCreate(bundle);
        setContentView(R.layout.main_fragment_activity_drag);

        findViewById(R.id.my_tab_fragment).setOnDragListener(new MyDragListener());

            }

            class MyDragListener implements OnDragListener {
                //Drawable enterShape = getResources().getDrawable(
                    //  R.drawable.shape_droptarget);
                //Drawable normalShape = getResources().getDrawable(R.drawable.shape);

                @Override
                public boolean onDrag(View v, DragEvent event) {
                    switch (event.getAction()) {
                    case DragEvent.ACTION_DRAG_STARTED:
                        // Do nothing
                        break;
                    case DragEvent.ACTION_DRAG_ENTERED:
                        //v.setBackgroundDrawable(enterShape);
                        break;
                    case DragEvent.ACTION_DRAG_EXITED:
                        //v.setBackgroundDrawable(normalShape);
                        break;
                    case DragEvent.ACTION_DROP:
                        // Dropped, reassign View to ViewGroup
                        //View view = (View) event.getLocalState();
                        //ViewGroup owner = (ViewGroup) view.getParent();
                        //owner.removeView(view);
                        //LinearLayout container = (LinearLayout) v;
                        //container.addView(view);
                        //view.setVisibility(View.VISIBLE);
                        break;
                    case DragEvent.ACTION_DRAG_ENDED:
                        //v.setBackgroundDrawable(normalShape);
                    default:
                        break;
                    }
                    return true;
                }
            }
    } 
```

我需要做什么来修复错误？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T05:53:50.173

如果你在你的设备上运行它，你应该检查它的 API 级别。如果它运行的是 2.2.x（API 级别 8），则不能使用拖放，因为它需要 API 11

# java - 当生成的文件位于另一个文件系统上时，Java 无法移动（重命名）文件

> ID：10531682
> 
> 赞同：11
> 
> 时间：2012-05-10T09:59:46.047
> 
> 标签：java, linux, filesystems

我们在尝试将文件从一个目录移动到另一个目录时出错的程序。经过多次调试后，我通过编写一个小型实用程序来定位错误，该程序只是将文件从一个目录移动到另一个目录（下面的代码）。事实证明，虽然在本地文件系统上移动文件可以正常工作，但尝试将文件移动到另一个文件系统会失败。

为什么是这样？问题可能是特定于平台的——如果这很重要，我们正在 ext3 上运行 Linux。

第二个问题；`renameTo()`我应该一直在使用除类方法之外的其他东西`File`吗？似乎这仅适用于本地文件系统。

测试（以root身份运行）：

```
touch /tmp/test/afile

java FileMover /tmp/test/afile /root/
The file move was successful

touch /tmp/test/afile

java FileMover /tmp/test/afile /some_other_disk/
The file move was erroneous 
```

代码：

```
import java.io.File;

public class FileMover {
    public static void main(String arguments[] ) throws Exception {
        boolean success;
        File file = new File(arguments[0]);
        File destinationDir = new File(arguments[1]);
        File destinationFile = new File(destinationDir,file.getName() );
        success = file.renameTo(destinationFile);
        System.out.println("The file move was " + (success?"successful":"erroneous"));
    }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-10T10:01:48.600

## Java 7 及以上

使用[`Files.move(Path source, Path target, CopyOption... opts)`](https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#move(java.nio.file.Path,%20java.nio.file.Path,%20java.nio.file.CopyOption...)).

`ATOMIC_MOVE`请注意，在文件系统之间移动文件时不得提供该选项。

## Java 6 及以下

来自以下文档[`File.renameTo`](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/File.html#renameTo%28java.io.File%29)：

> [...]*重命名操作可能无法将文件从一个文件系统移动到另一个*[...]

显而易见的解决方法是通过打开一个新文件“手动”复制文件，将内容写入文件，然后删除旧文件。

你也可以试试[`FileUtils.moveFile`](http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/FileUtils.html)Apache Commons 的方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T10:02:25.183

[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#renameTo%28java.io.File%29)来救援：

> 此方法的行为的许多方面本质上是平台相关的：重命名操作可能无法将文件从一个文件系统移动到另一个文件系统，它可能不是原子的，并且如果具有目标抽象路径名的文件可能不会成功已经存在。应始终检查返回值以确保重命名操作成功。
> 
> 请注意，Files 类定义了 move 方法以独立于平台的方式移动或重命名文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T10:08:24.670

从文档：

> 重命名此抽象路径名表示的文件。
> 
> 此方法的行为的许多方面本质上是平台相关的：重命名操作可能无法将文件从一个文件系统移动到另一个文件系统，它可能不是原子的，并且如果具有目标抽象路径名的文件可能不会成功已经存在。应始终检查返回值以确保重命名操作成功。

如果你想在不同的文件系统之间移动文件，你可以使用 Apache 的[moveFile](http://commons.apache.org/io/api-1.4/org/apache/commons/io/FileUtils.html#moveFile%28java.io.File,%20java.io.File%29)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-10T10:27:32.460

你的 ider 是错误的，因为 /some_other_disk/ 是相对 url 但完全是 url，找不到我有示例的 url

java FileMover D:\Eclipse33_workspace_j2ee\test\src\a\a.txt D:\Eclipse33_workspace_j2ee\test\src 文件移动成功

java FileMover D:\Eclipse33_workspace_j2ee\test\src\a\a.txt\Eclipse33_workspace_j2ee\test\src

文件移动错误

结果是 url 错误

# actionscript-3 - AS2 / AS3 中是否有任何 3D 建模应用程序？

> ID：10531683
> 
> 赞同：1
> 
> 时间：2012-05-10T09:59:47.583
> 
> 标签：actionscript-3, 3d, actionscript-2, modeling

我在 Flash 中找不到任何可用于创建类似于[http://www.3dtin.com/的模型的在线应用程序](http://www.3dtin.com/)

我知道使用 3d 库 Papervision3D 可以做很多事情，但是仅 100% 构建应用程序似乎是压倒性的。

有一个工具来创建简单的形状（长方体、圆锥体、金字塔）就足够了。以及将其导出为 PNG 图像的选项。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:03:25.097

对于简单的对象，我使用 ERain 的 Swift 3D 取得了巨大的成功。

[http://www.erain.com/](http://www.erain.com/)

# java - log4j如何追加空行

> ID：10531684
> 
> 赞同：1
> 
> 时间：2012-05-10T09:59:52.913
> 
> 标签：java, log4j

> **可能重复：**
> [Log4J 将空行打印到日志文件](https://stackoverflow.com/questions/11843941/log4j-print-empty-line-to-logfile)

在java中，我可以`System.out.println()`用来打印一个空行。

现在我想知道如何在 log4j 中记录一个空行。

是否有任何命名的方法`logger.appendEmptyLine()`或任何方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:01:18.230

```
logger.debug("\n"); 
```

或者可能

```
logger.debug(""); 
```

# ruby-on-rails - 没有数据库的 Rails 3.2 生成器

> ID：10531686
> 
> 赞同：1
> 
> 时间：2012-05-10T10:00:26.657
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我正在尝试生成资源，并且已删除对 Active_record 的所有引用并删除了 databse.yml 文件。

rails 服务器启动正常，但是当我尝试生成模型时：

```
rails g resource contact 
```

我收到以下错误：

> 未为必需选项“--orm”提供值

有没有办法在生成资源时不指定数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:28:14.257

没有简单的方法，不。如果您查看资源生成器的[源代码](https://github.com/rails/rails/blob/master/railties/lib/rails/generators/resource_helpers.rb)，您将看到有关 orm 的这一部分：

```
 # Loads the ORM::Generators::ActiveModel class. This class is responsible
    # to tell scaffold entities how to generate an specific method for the
    # ORM. Check Rails::Generators::ActiveModel for more information.
    def orm_class
      @orm_class ||= begin
        # Raise an error if the class_option :orm was not defined.
        unless self.class.class_options[:orm]
          raise "You need to have :orm as class option to invoke orm_class and orm_instance"
        end

        begin
          "#{options[:orm].to_s.camelize}::Generators::ActiveModel".constantize
        rescue NameError
          Rails::Generators::ActiveModel
        end
      end
    end 
```

因此，它明确拒绝在没有 ORM 的情况下运行此命令的任何尝试，如果您确实指定了 ORM，它正在寻找`ORM::Generators::ActiveModel`. 在顶部的注释中，它指定了查找更多信息的位置[Rails::Generators::ActiveModel](https://github.com/rails/rails/blob/master/railties/lib/rails/generators/active_model.rb)。顶部的注释解释了如何扩展它以创建 ORM 规范。

默认情况下，唯一内置到 rails 的是[ActiveRecord 生成器](https://github.com/rails/rails/blob/master/activerecord/lib/rails/generators/active_record.rb)。

有一个名为[rails3-generators](https://github.com/indirect/rails3-generators)的 gem ，其中包含许多通用库的生成器，但您可以[看到](https://github.com/indirect/rails3-generators/blob/master/lib/rails3-generators.rb)，对于 ORM，它只为`data_mapper`、`mongo_mapper`、`mongoid`和`active_model`.

据我所知，“无数据库”没有预先构建的 ORM 生成器。如果需要，您可以自己编写一个，按照顶部的说明`Rails::Generators::ActiveModel`（并使用`rails3-generators`gem 源作为您需要它的参考）。

但如果这看起来太费力了，我建议只告诉它使用内置的 ActiveRecord 生成器生成，然后手动修改/删除它生成的与该 ORM 相关的任何内容。

# jqgrid - jqgrid +用空格对数字进行排序

> ID：10531691
> 
> 赞同：3
> 
> 时间：2012-05-10T10:00:55.643
> 
> 标签：jqgrid

我的 JQgrid 中有一个专栏，上面写着“大小”。返回类型是整数。我已经添加了：

```
{
  name:'sizeKloc',
  index:'sizeKloc', 
  width:60, 
  editable:false, 
  sorttype: 'int', 
  align:'right'
}, 
```

在某些情况下，值作为`null`.

我的列具有以下值 - 0、3、5、null（空白或空格）、1、null（空白或空格）、null（空白或空格）、2、3

但是当我尝试对 ASC 进行排序时，应该首先在空格之后进行实际的数字排序，这不会发生。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:19:43.480

如果您真的想保留`null`它并将其与 0 区分开来，您可以使用[自定义排序](https://stackoverflow.com/a/3329852/315935)而不是使用`sorttype: 'int'`. 用法很简单。您只需定义可用于排序的值的替换，而不是数据的原始值。

在您的情况下，例如

```
{name:'sizeKloc',index:'sizeKloc', width:60, editable:false, align:'right'
    sorttype: function (cellValue) {
        return cellValue === null ? -1000 : Number(cellValue);
    }}, 
```

或者

```
{name:'sizeKloc',index:'sizeKloc', width:60, editable:false, align:'right'
    sorttype: function (cellValue) {
        var num = parseInt(cellValue, 10);
        return isNaN(num) ? -1000 : num;
    }}, 
```

确切的代码更多地取决于您使用的数据的格式和类型。

# haskell - 将新闻提要小部件插入页面

> ID：10531693
> 
> 赞同：1
> 
> 时间：2012-05-10T10:01:06.860
> 
> 标签：haskell, yesod

我有一个页面，我想在其中嵌入一个新闻提要小部件（以便某个远程站点的提要显示在我的站点中）。

虽然那里有很多免费的新闻提要小部件（部分列表在这里：[http](http://allwebco-templates.com/support/S_script_newsfeed.htm) ://allwebco-templates.com/support/S_script_newsfeed.htm ），但它们都需要在 html 页面中插入复杂的代码，而所有参数都被硬编码到生成的代码中，看起来像这样：

```
insertedWidgetText = "<script id=\"scrnewsblock10795953\" type=\"text/javascript\">...script specific parameters go here...</script>"

let feedWidget = toWidgetBody [hamlet|#{preEscapedText insertedWidgetText}|] 
```

这与 Yesod 的方法不能很好地集成，因为它需要向 Hamlet 指定内容是 preEscapedText，这反过来又禁用了使用 Hamlet 的处理来动态更改小部件参数的能力（所以如果我希望小部件使用不同的来源，例如我需要静态更改引用的文本，不能使用哈姆雷特的变量替换）。

当然，我可以自己进行一些文本操作，为我正在使用的小部件量身定制，但这似乎不是“正确”的解决方案（特别是如果我想将嵌入文本放在某个外部文件中而不是在我的代码中间，如上例所示）。

上述问题能否有比我想的更好的解决方案？

Haskell/Yesod 中是否有可以用作插件的新闻提要小部件的实现？

注意：我是一个非常糟糕的 javascript 程序员，但也欢迎该方向的解决方案。

谢谢，

# php - 断点在带有 XDebug 的 Eclipse 中不起作用

> ID：10531696
> 
> 赞同：2
> 
> 时间：2012-05-10T10:01:14.913
> 
> 标签：php, netbeans, xdebug

在过去的几个小时里，我一直在尝试使用 Eclipse 中的 XDebug 进行调试，但没有成功。

我的 etc/php5/apache2/php.ini 文件中有以下内容

```
[XDebug]
xdebug.remote_enable=on
xdebug.remote_host="localhost"
xdebug.remote_port=9000
xdebug.remote_handler=dbgp
xdebug.remote_autostart=off
zend_extension = /usr/lib/php5/20090626+lfs/xdebug.so 
```

zend_extensions = /usr/lib...... 是由 XDebug 站点上的自定义安装说明提供给我的。我完全按照该页面上的设置说明进行操作 - [http://xdebug.org/wizard.php](http://xdebug.org/wizard.php)

但是从我读过的内容来看，键入命令 php -m 应该会显示 XDebug 两次，一次在 PHP 模块下，一次在 Zend 模块下。好吧，它对我来说都没有出现。所以似乎 XDebug 根本没有加载？

关于如何解决这个问题并让 XDebug 工作的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T10:03:53.670

您已经编辑`/etc/php5/apache2/php.ini`了用于**apache**的文件。您想要编辑`/etc/php5/cli/php.ini`命令行界面的选项。

如果你从一个网站传入 phpinfo()，那 PHP 当然是通过 Apache 运行的。然后向导将为您提供 Apache 设置的设置。如果您`php -i`从命令行传递了 phpinfo() 输出 ( )，它将为您提供 CLI 的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T00:19:52.617

类似的事情发生在我身上，我第一次在 Eclipse 中设置 xdebug 它工作得很好，但是下次我尝试它时，它并没有在断点处停止。经过大量研究后发现我运行了 2 个 Eclipse 实例（一个用于 Java，另一个用于 Php），这导致调试器出现某种问题。

在关闭两个实例并首先使用 php 工作区启动 Eclipse，然后使用 java 工作区启动 Eclipse 之后，xdebug 再次正常工作。我唯一的想法是，当我尝试使用调试端口时，它已经被使用了；或类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-28T17:45:57.217

另一个常见问题是您使用路由器通过 INTERNET，并且您必须在 PC 上转发 XDEBUG PORT（一般为 9000）才能使 XDEBUG 与 ECLIPSE 一起工作。但是您的路由器为您的 PC 提供了一个动态 IP，并且有一天您的手机在您的 PC 之前连接到路由器并获取您在路由器上配置的 IP 地址 IP FORWARDING ！从路由器获取静态 IP 的解决方案。这是一个解释：[http ://webologix.com/fr/blog/xdebug-eclipse-fonctionnement-aleatoire.html](https://webologix.com/fr/blog/xdebug-eclipse-fonctionnement-aleatoire.html)

# windows-xp - 我的程序是否需要在 Windows 防火墙中有例外？

> ID：10531703
> 
> 赞同：0
> 
> 时间：2012-05-10T10:01:50.167
> 
> 标签：windows-xp, windows-firewall

我的程序使用了一个`http`通过 Internet 建立连接的组件，但是当我在全新安装的 XP 上安装和运行我的程序时，它运行良好，在 Windows 防火墙中没有例外。为什么它不需要防火墙中的例外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:05:08.327

如果它只建立 http 连接，则允许浏览器访问 Internet。

一般来说，防火墙规则可以基于各种条件，其中之一是端口（http是端口80），另一个可能是协议（http是TCP）和程序本身。为了增强用户体验并允许任何浏览器在没有额外配置的情况下正常工作，将 TCP 连接到端口 80 配置为允许。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:22:46.753

Windows 防火墙仅保护您免受传入连接；自动允许所有传出和本地连接。这意味着它不像完整的软件防火墙那样安全，但它避免了每次 Firefox 自动更新时都会让您烦恼。

# css - 如何在wordpress中编辑div的内联css？

> ID：10531706
> 
> 赞同：0
> 
> 时间：2012-05-10T10:02:23.650
> 
> 标签：css, wordpress

我有这个 ：

```
<div class="imgarea product_image preload" style="opacity: 0; "> 
```

我想将 opacity:0 更改为 opacity:1

我试过这个：

```
$(document).ready(function() { 
$('.imgarea.product_image.preload"').removeAttr('style') 
}); 
```

我正在尝试删除样式，或将其更改为 opacity:1，因为图像不显示。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:10:21.520

如果我明白你的意思，你可以用 jquery 做到这一点

```
 $('.imgarea.product_image.preload').css('opacity', 1); 
```

编辑：我忘记了 imgarea 之前的点。你可以在这里测试它-> [http://jsfiddle.net/Vwevs/](http://jsfiddle.net/Vwevs/)

# hibernate - 从数据库查询列表时设置瞬态布尔属性？

> ID：10531709
> 
> 赞同：0
> 
> 时间：2012-05-10T10:02:26.040
> 
> 标签：hibernate, jakarta-ee, criteria-api

我有两张桌子：

1- 设备：2- 用户：有设备的外键，关系是多对一。

我有设备列表，如果设备未分配给用户，则可以将其删除，因此我获取所有设备，并检查设备是否已分配给用户，然后设置瞬态布尔属性如下：

```
List <Device> devices = systemSettingsDao.getAllDevices();
            for (Device device : devices)
                device.setDeletable(!systemSettingsDao
                        .isDeviceUsedByUser(device.getId())); 
```

我想知道是否有更优雅的方法来设置布尔属性与查询（条件是可取的）而不使这个 for 循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:09:39.257

以下是获取所有可删除设备的方法：

```
select distinct device from Device device where device.id not in (select u.device.id from User u) 
```

您应该能够轻松地使用 Criteria API 进行翻译。

# java - 如何从单独的包中调用方法：Android

> ID：10531711
> 
> 赞同：0
> 
> 时间：2012-05-10T10:02:40.493
> 
> 标签：java, android

我试图从文件 Duality.java 中获取一个方法，以便在单击按钮时在 Min.Java 中运行。以下是这两个文件以及我目前正在尝试做的事情，这是行不通的。在 Min.java 中单击按钮时，如何让方法 duality() 运行？

对偶性.java

```
package com.android.control;

import android.util.Log;
import com.map.AppName.R;

public class duality {

    public void duality(){
       Log.e("Did It Run","Yes it ran");
    }
} 
```

最小java

```
package com.android.control;

import android.view.View;
import android.widget.Button;
import android.widget.LinearLayout;

import com.map.AppName.R;

public class Min extends LinearLayout {

    Button but;
    private final int ELEMENT_HEIGHT = 60;
    private final int ELEMENT_WIDTH = 80;;
    private final int TEXT_SIZE = 30; 

    public Min( Context context, AttributeSet attributeSet ) {
        super(context, attributeSet);   

        this.setLayoutParams( new LinearLayout.LayoutParams( LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT ) );
        LayoutParams elementParams = new LinearLayout.LayoutParams( ELEMENT_WIDTH, ELEMENT_HEIGHT );

        createBut( context );

        addView( but, elementParams );
    }

private void createButton( Context context){
        but = new Button( context );
        but.setTextSize( TEXT_SIZE );
        but.setText( "Go" );

        but.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                 Duality duality = new duality();

            }
        });
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:05:58.787

您只是在构建该类的*一个实例*`duality`- 您没有`duality()`在其上调用该方法。

这可能是因为您希望该方法成为构造函数 - 但事实并非如此，因为您指定了`void`返回类型，所以它只是一个常规方法。

（顺便说一下，在 Java 中，给类名称以大写字符开头是常规的。如果你调用你的 class `Duality`，你可能不太可能混淆这两者；尽管意外的非构造函数的问题仍然存在.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:04:06.013

两者`Min`和`duality`都在`com.android.control`包中，因此它们应该能够在没有导入的情况下看到彼此。

建议类名大写。事实上，由于您的方法与类同名，它可能与构造函数名称冲突。我建议这样做：

```
public class Duality {

    public void duality(){
       Log.e("Did It Run","Yes it ran");
    }
} 
```

...

```
but.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
         Duality d = new Duality();
         d.duality();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:13:21.237

1.  确保类名和文件名在名称中使用相同的大小写组合。

2.  如果您想调用构造函数，请从以下位置删除 void：

    公共无效对偶（）

3.  如果它应该是 ba 函数而不是构造函数，请使用以下命令调用它：

    object_name.duality();

4.  你调用 createBut() 并给出了 createButton() 的代码。这是复制粘贴的错误吗？

# asp.net-mvc-3 - MVC3 WebGrid 将自定义类对象从模型显示到列中

> ID：10531713
> 
> 赞同：0
> 
> 时间：2012-05-10T10:02:53.987
> 
> 标签：asp.net-mvc-3, webgrid

我正在尝试在 WebGrid 中显示一个模型，该模型有一列带有自定义类。如果不使用“格式：”参数来自定义 WebGrid 中的列，我可以向我的自定义类添加一些内容（类似于默认 cast= 以在 WebGrid 中显示自定义文本而不是完整的类名？我尝试了隐式/将运算符显式转换为字符串或 HtmlString 没有成功...提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:12:15.917

> 如果不使用“格式：”参数来自定义 WebGrid 中的列，我可以向我的自定义类添加一些内容（类似于默认 cast= 以在 WebGrid 中显示自定义文本而不是完整的类名？

AFAIK 你应该`format:`在相应的列中使用自定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:10:24.750

我找到了，比我想象的要容易：覆盖 ToString()！！！

# jquery - jquery复选框组问题

> ID：10531715
> 
> 赞同：0
> 
> 时间：2012-05-10T10:03:01.447
> 
> 标签：jquery

我在不同的div中有几个相同的复选框组，像这样......

```
 <h3 class="con_act_list">Activity</h3>

                                <ul id="activity">                                  
                                    <li><input type="checkbox" id="con_act_1" name="con_act[]" class="con_act" value="fabricate"/> Fabricate roofs<li>
                                    <li><input type="checkbox" id="con_act_2" name="con_act[]" class="con_act" value="buy-In"/> Buy-in roofs<li>
                                    <li><input type="checkbox" name="con_act[]" class="con_act" value="install"/> Install roofs<li>
                                </ul> 
```

我正在使用 class="con_act" 来定位并将这些复选框设置为所有选中的或所有取消选中的但不是

我正在使用这个功能...

$(".con_act_list").click(function() {

```
 $(this).parent().find(".con_act").attr('checked', !$(".con_act").is(':checked'));
        }); 
```

这适用于一组（上图）但不适用于使用相同类选择器的其他组。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:27:00.203

只需使用

```
$(this).next() 
```

代替

```
$(this).parent() 
```

看看这个 JSFiddle 并告诉你是否想要这样：

[http://jsfiddle.net/cuAdP/](http://jsfiddle.net/cuAdP/)

# jboss - 使用自己的 lucene 版本为 jboss Gatein 创建自定义 portlet 应用程序

> ID：10531716
> 
> 赞同：0
> 
> 时间：2012-05-10T10:03:20.930
> 
> 标签：jboss, lucene, gatein

我正在尝试将一个 JSR-286 portlet 应用程序部署到 JBoss GateIn，该应用程序具有打包在 WEB-INF/lib 中的自己的 lucene 版本（3.1）。

出于某种原因，它在运行时给了我 GateIn 的 lucene (2.9.4) 类，因此产生了这个错误：

```
java.lang.NoSuchFieldError: LUCENE_31 
```

有谁知道如何配置 portlet 应用程序和 GateIn 以让它加载自己的 lucene 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:14:53.680

我可以通过创建 JBoss 模块并将依赖项添加到 war 文件的清单来修复错误。

# java - 2D寻峰算法JAVA，找到了一个例子，但不会编码

> ID：10531720
> 
> 赞同：3
> 
> 时间：2012-05-10T10:03:31.040
> 
> 标签：java, algorithm

我正在尝试重建这个算法：
[http](http://courses.csail.mit.edu/6.006/fall10/lectures/lec02.pdf)
://courses.csail.mit.edu/6.006/fall10/lectures/lec02.pdf （第14页“算法II”）
（用谷歌找到这个，不幸的是我不在麻省理工学院： ) 这不是家庭作业)

这是：

```
•Pick middle column (j=m/2)
•Find global maximum a=A[i,m/2]in that column
    (and quit if m=1)
•Compare a to b=A[i,m/2-1]and c=A[i,m/2+1]
•If b>a   then recurse on left columns
•Else, if c>a   then recurse on right columns
•Else a is a 2D peak! 
```

我所拥有的是：

**trimmed**是一个向量，它保存我的大小频率（blockSizeSmall-minBlockSize）。

所以它是一个具有`trimmed.size()`列和 (blockSizeSmall-minBlockSize) 行的二维矩阵。

为了简单起见，我将峰值保存在 2 个 int 向量`vector<int>` **peaksrow**和**peakscolumn**中。

那里有什么问题？
我不明白什么

```
"Find global maximum a=A[i,m/2]in that column (and quit if m=1)" 
```

应该导致。

```
 public void findPeaks() {
        for (int column = trimmed.size() / 2; column < trimmed.size();) {
            int globalmax = 0;
            for (int row = 0; row < (blockSizeSmall - minBlockSize); row++) {
                if (trimmed.elementAt(column).reducedFreqs[row] > globalmax) {
                    globalmax = row; 
                    //find globalmax in row
                }
            }
            if (globalmax == 0) {
                break; //<- ???
            } else {
                if (column - 1 >= 0 && column + 1 < trimmed.size()) {
                //stay in bounds
                    if (trimmed.elementAt(column - 1).reducedFreqs[globalmax] > globalmax) {
                        column--; 
                        //if element at left side is > globalmax, recurse on column--;

                    } else if (trimmed.elementAt(column + 1).reducedFreqs[globalmax] > globalmax) {
                        column++; 
                        //if element at right side is > globalmax, recurse on column++;

                    } else { 
                        //if globalmax is higher than right or left element i have a peak
                        peaksrown.add(globalmax);
                        peakscolumnn.add(column);
                        Log.e(TAG, "" + peaksrown.size());
                    }
                }else{
                //what to do when out of bounds ?? break ??
                //if i break here, how can i be sure the algorithm 
                //went to both sides(column=0 and column=max) ??
                //just tried with break here, still infinit loop
                }
            }
        }
    } 
```

它只是无限循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:12:09.197

您似乎不了解**递归**的概念，所以我建议您查一下。这是 C# 中的一种算法供参考，除了本文中的一个示例之外没有经过测试，但它应该可以工作。我忽略了“如果 m=1 则退出”部分，因为我认为这不是必需的。请注意函数 Peak() 如何从自身内部调用自身，但参数已更改。

```
 static void Peak(int[,] map, int left, int right)
    {
        // calculate middle column
        int column = (right + left) / 2;

        // get max row in column
        int arow = 0;
        for (int row = 0; row < map.GetLength(0); row++)
            if (map[row, column] > map[arow, column])
                arow = row;

        int a = map[arow, column];

        // get left value
        int b = 0;
        if (column - 1 >= left) b = map[arow, column - 1];
        // get right value
        int c = 0;
        if (column + 1 <= right) c = map[arow, column + 1];

        // if left is higher, recurse left
        if (b > a) Peak(map, left, column - 1);
        // else if right is higher, recurse right
        else if (c > a) Peak(map, column + 1, right);
        // else, peak
        else Console.WriteLine("Peak: " + arow + " " + column + " " + a);
    }

    static void Main(string[] args)
    {
        int[,] map = { {12, 8, 5},
                       {11, 3, 6 },
                       {10, 9, 2 },
                       { 8, 4, 1 } };
        Peak(map, 0, 2);
        Console.ReadLine();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:59:15.090

我认为这个算法有一个微妙的错误。右半部的局部最大值不一定是整个阵列中的局部最大值（例如，当右半部的局部最大值位于其左边界时）。因此，虽然右半部分（假设右更高）有*一个*局部最大值（整个数组的），但递归调用不一定会找到它。

# javascript - jQuery：从类中获取最大的数字

> ID：10531721
> 
> 赞同：1
> 
> 时间：2012-05-10T10:03:31.383
> 
> 标签：javascript, jquery, search

```
<div class="box1">
<div class="box9">
<div class="box4"> 
```

如何从以“box”开头的类中获得最大的数字？**在这种情况下，我必须得到 9 号。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T10:12:53.123

您需要遍历所有 div 元素并获取类名。然后你需要存储最大的值。我为你写一个简单的例子：

HTML：

```
<div class="box1"></div>
<div class="box9"></div>
<div class="box4"></div>​ 
```

jQuery：

```
var biggestNum = 0;
$('div[class^="box"]').each(function(){
    var currentNum = parseInt($(this).attr('class').replace('box', ''), 10);
    if(currentNum > biggestNum) {
        biggestNum = currentNum;
    }
})​;

alert(biggestNum); 
```

在[jsFiddle 上](http://jsfiddle.net/antyrat/McJGQ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:22:37.970

这是使用 jQuerys`map()`函数和的更短的实现`Math.max`：

```
var nums = $("div").map(function(i, e) {
    return parseInt($(e).attr("class").replace("box",""), 10);
}).get();
alert(Math.max.apply(this, nums)) 
```

[**示例小提琴**](http://jsfiddle.net/sAFej/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:19:07.677

嗨，另一个**演示** [http://jsfiddle.net/26GYN/1/](http://jsfiddle.net/26GYN/1/) **或** [http://jsfiddle.net/ktwDK/2/](http://jsfiddle.net/ktwDK/2/)

代表人数最多的班级；它用红色框突出显示。休息演示会说清楚:)

**jQuery代码**

```
var max=0
var maxClass="";
$("div[class^='box']").filter(function(){
    var result = /\d+(?:\.\d+)?/.exec($(this).attr("class").toString());
    if (max < result)
        max = result;

    maxClass = 'box'+max;

}).each(function() {

//dosomething!!          
});
$("div[class^="+maxClass+"]").css('border', '1px red solid');
​ 
```

**HTML**

```
<div class="box1">foobar</div>
<div class="box9">testsoo</div>
<div class="box4">hulkfoo</div>​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T10:37:11.230

```
<script>
var classes = new Array();
$('div[class*="box"]').each(
    function(index, value) {
        classes.push(parseInt($(value).attr('class').replace("box",""), 10))
    });

alert(classes.sort().pop());
</script> 
```

发生的事情是：a）创建空数组 b）选择所有具有类框的 div[something]

```
 $('div[class*="box"]') 
```

c) 从类名中获取数字并将其转换为整数

```
 $('div[class*="box"]') 
```

d) 把它放在数组中

```
classes.push(parseInt($(value).attr('class').replace("box",""), 10)) 
```

e) 排序数组并弹出最后一个元素（最大的一个）以获得最大值

```
classes.push(parseInt($(value).attr('class').replace("box",""), 10)) 
```

# mobile - 使用 asp.net 和 C# 进行移动设备检测

> ID：10531724
> 
> 赞同：0
> 
> 时间：2012-05-10T10:03:36.983
> 
> 标签：mobile, detection

我必须检测移动浏览器，如果检测为移动浏览器，那么我必须在网页上显示一些内容。

我正在使用`Request.Browser.IsMobileDevice`，但对于 iPhone 之类的手机它失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:08:00.413

我真的不知道这是否可以帮助你，但几个月前我使用 driveInfo 来检测 USB 设备

也许这可以检测你的 iPhone 尝试看看这里：http: [//msdn.microsoft.com/en-us/library/system.io.driveinfo.isready.aspx](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.isready.aspx)

对于该事件，您可以尝试以下操作：

```
static ManagementEventWatcher w = null;

private static void USBHandler(){ 

WqlEventQuery q; 
ManagementScope scope = new ManagementScope("root\\CIMV2"); 
scope.Options.EnablePrivileges = true; 
  q = new WqlEventQuery(); 
  q.EventClassName = "__InstanceCreationEvent"; 
  q.WithinInterval = new TimeSpan(0, 0, 3); 
  q.Condition = "TargetInstance ISA 'Win32_USBControllerdevice'"; 
  w = new ManagementEventWatcher(scope, q); 
  w.EventArrived += USBInserted; 
  w.Start(); 
}
private static void USBInserted(object sender, EventArgs e){

System.Windows.MessageBox.Show("USB inserted");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:13:03.200

看看[http://51degrees.mobi/](http://51degrees.mobi/)您可以将他们的 nuget 包下载到您的项目中，它可以很好地检测移动设备

# mysql - 在 WHERE 子句中使用连接列时，Mysql 未在 LEFT JOIN 中使用索引

> ID：10531725
> 
> 赞同：3
> 
> 时间：2012-05-10T10:03:45.907
> 
> 标签：mysql, join, where-clause, indexing

我已经在 mySQL 5.0.51a 中为这个问题困惑了很长一段时间：

当使用 LEFT JOIN 连接表 AND 使用 WHERE 子句中连接表的列时，mySQL 无法在 JOIN 中使用连接表的主索引，甚至 FORCE INDEX (PRIMARY) 失败。

*   如果 WHERE 子句中没有连接表的列，则一切正常。
*   如果删除了 GROUP BY，则还会使用索引。

然而我需要他们两个。

错误：（在我的特殊情况下最多 1000 秒的执行时间）

```
SELECT *
FROM tbl_contract co
LEFT JOIN tbl_customer cu ON cu.customer_id = co.customer_id
WHERE cu.marketing_allowed = 1 AND co.marketing_allowed = 1
GROUP BY cu.id
ORDER BY cu.name ASC 
```

工作，但没有解决我的问题：

```
SELECT *
FROM tbl_contract co
LEFT JOIN tbl_customer cu ON cu.customer_id = co.customer_id
GROUP BY co.id 
```

表结构（转录，因为真实的表更复杂）

```
tbl_contract: 
id: INT(11) PRIMARY
customer_id: INT(11)
marketing_allowed: TINYINT(1)

tbl_customer:
customer_id: INT(11) PRIMARY
marketing_allowed: TINYINT(1) 
```

mySQL EXPLAIN 在加入时注意到 PRIMARY 作为可能的键，但不使用它。

有一种解决方案：

```
SELECT (...)
HAVING cu.marketing_allowed = 1 
```

解决了这个问题，*但是*我们在其他上下文中使用查询，我们只能在整个语句中选择一列，但是 HAVING 需要在 SELECT-Statement 中选择marketing_allowed 列。

我还注意到，在所需的表上运行 ANALYZE TABLE 将使我本地系统上的 mySQL 5.5.8 做正确的事情，但我不能总是保证 ANALYZE 已经在语句之前运行。无论如何，这个解决方案在我们的生产服务器上的 mySQL 5.0.51a 下不起作用。:(

mySQL 中是否有我没有注意到的特殊规则？如果列出现在 WHERE 子句中，为什么不使用 LEFT JOIN 索引？为什么我不能强迫他们？

提前谢谢，

勒内

[编辑]

感谢一些回复，我可以使用 INNER JOIN 优化查询，但不幸的是，虽然看起来非常好，但当我发现使用 ORDER BY 子句时，mySQL 仍然拒绝使用索引：

```
SELECT *
FROM tbl_contract co
INNER JOIN tbl_customer cu ON cu.customer_id = co.customer_id AND cu.marketing_allowed = 1
WHERE cu.marketing_allowed = 1
ORDER BY cu.name ASC 
```

如果您不使用 ORDER BY，mySQL 将正确使用索引。我已经删除了 GROUP BY，因为它在示例中没有相关性。

[编辑2]

FORCING 索引也无济于事。所以，问题是：为什么 mySQL 不使用索引来加入，因为 ORDER BY 是在加入之后执行的，并通过 WHERE 子句减少结果集？这通常不应该影响加入...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:32:20.207

I'm not sure I understand what you are asking, but

```
SELECT *
FROM tbl_contract co
LEFT JOIN tbl_customer cu ON cu.customer_id = co.customer_id
WHERE cu.marketing_allowed = 1 AND co.marketing_allowed = 1 
```

will not do an outer join (because of `cu.marketing_allowed = 1`).

You probably meant to use:

```
SELECT *
FROM tbl_contract co
   LEFT JOIN tbl_customer cu 
        ON cu.customer_id = co.customer_id
       AND cu.marketing_allowed = 1 
WHERE co.marketing_allowed = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-24T13:09:19.050

我有同样的麻烦。MySQL 优化器在使用带条件的 JOIN 时不使用索引。我将我的 SQL 语句从 JOIN 更改为子查询：

```
SELECT
    t1.field1,
    t1.field2,
    ...
    (SELECT
        t2.field3
        FROM table2 t2
        WHERE t2.fieldX=t1.fieldX
    ) AS field3,
    (SELECT
        t2.field4
        FROM table2 t2
        WHERE t2.fieldX=t1.fieldX
    ) AS field4,
FROM table1 t1
WHERE t1.fieldZ='valueZ'
ORDER BY t1.sortedField 
```

这个请求要复杂得多，但由于使用了索引，它也快得多。

您也可以使用`STRAIGHT_JOIN`上述查询，但性能更好。这是 DB 与 table1 中的 100k 行和 table2 中的 20k 行的比较：

*   0.00s 使用上述查询
*   0.10s 使用`STRAIGHT_JOIN`
*   0.30 使用`JOIN`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:36:06.757

您是否在 JOIN 子句上尝试过多个条件？

```
SELECT *
FROM tbl_contract co
LEFT JOIN tbl_customer cu ON cu.customer_id = co.customer_id AND cu.marketing_allowed = 1
WHERE co.marketing_allowed = 1 
```

# jsf-2 - Ajax jsf 两个值

> ID：10531728
> 
> 赞同：0
> 
> 时间：2012-05-10T10:03:54.567
> 
> 标签：jsf-2

我正在做一个管理员从列表中选择电影的项目。然后电影的数据显示在**inputTexts**中，因此管理员可以更改它并`onblur`更新`ajax`数据库。
我创建了一个 bean，以便选择正确的数据并将它们显示在 inputTexts 中。
没关系。现在，我不知道如何允许`inputText`引用我有更新查询的第二个 bean..

**更新**
了 Select Bean。

```
package Beans;
import java.sql.*;
import java.util.ArrayList;
import java.util.List;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;

/**
 *
 * @author Vasilis
 */
@ManagedBean
@RequestScoped
public class Select {

Connection con;
Statement statement;
String query;
private List perInfoAll = new ArrayList();

public List getperInfoAll() {
    int i = 0;
    try {

        Class.forName("oracle.jdbc.driver.OracleDriver");

        con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE", "Bill", "1989");
        statement = con.createStatement();

        query = "SELECT NAME,SURNAME FROM AJAX";
        ResultSet resultset = statement.executeQuery(query);
        while (resultset.next()) {

            perInfoAll.add(i, new Select.perInfo(resultset.getString(1), resultset.getString(2)));
            i++;

        }

    } catch (Exception e) {
        System.out.println("Error Data : " + e.getMessage());
    }
    return perInfoAll;
}

public class perInfo {
    String NAME;
    String SURNAME;
    public perInfo(String NAME, String SURNAME) {
        this.NAME = NAME;
        this.SURNAME = SURNAME;
    }
    public String getNAME() {
        return NAME;
    }
    public String getSURNAME() {
        return SURNAME;
    }
} 
```

}

更新 Bean

```
package Beans;
import java.sql.*;
import javax.faces.bean.*;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;
/**
 *
 * @author Vasilis
 */
@ManagedBean
@RequestScoped

public class Update {

Statement statement;
Connection con;
String query1;
String query2;
ResultSet resultset1;
ResultSet resultset2;
String NewName;
String NewSurname;  

public void setNewSurname(String NewSurname) {
    this.NewSurname = NewSurname;
}

public void setNewName(String NewName) {
    this.NewName = NewName;
}

public String getNewSurname() {
    return NewSurname;
}

public String getNewName() {
    return NewName;
}

public void DatabaseConnection(String NewName) {

    try {
        Class.forName("oracle.jdbc.driver.OracleDriver");
    } catch (ClassNotFoundException error) {
        System.err.println("Error:Unable to load");
    }
    try {

        con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE", "BILL", "1989");
        statement = con.createStatement();
        query1 = "UPDATE AJAX SET NAME = ('" + NewName + "')";

        resultset1 = statement.executeQuery(query1);
        resultset1.next();

    } catch (SQLException error1) {
        System.err.println("Mistake");
    }

}

public String updateit() {
    DatabaseConnection(NewName);
    return "ok";
}

public void DatabaseConnection1(String NewSurname) {

    try {
        Class.forName("oracle.jdbc.driver.OracleDriver");
    } catch (ClassNotFoundException error) {
        System.err.println("Error:Unable to load");
    }
    try {

        con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE", "BILL", "1989");
        statement = con.createStatement();
        query2 = "UPDATE AJAX SET SURNAME = ('" + NewSurname + "')";

        resultset2 = statement.executeQuery(query2);
        resultset2.next();

    } catch (SQLException error1) {
        System.err.println("Mistake");
    }

}

public String updateit1() {
    DatabaseConnection1(NewSurname);
    return "ok";
} 
```

}

index.xhtml

```
<?xml version='1.0' encoding='UTF-8' ?>  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0      Transitional//EN"    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core">
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
    <link rel="stylesheet" type="text/css" href="my.css" />
</h:head>
<h:body>
    <h:form>
        <h:inputText value="#{update.newName}" required="true" > 
            <f:ajax event="blur" render="@this" listener="#{update.updateit}" />        
        </h:inputText>  
        <h:inputText value="#{update.newSurname}" required="true" > 
            <f:ajax event="blur" render="@this" listener="#{update.updateit1}" />        
        </h:inputText>  
    </h:form>
</h:body> 
```

所以我想在 index.xhtml 中从选择 bean 中获取值，当更新时，值将发送到更新 bean

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:17:54.907

你应该做这样的事情......

将*inputText*分配给bean 类中的变量名称为 -

```
private String myData; 
//getters and setters.

public void updateData(ActionEvent e)
{
    //put your query here to update to the database.
} 
```

并在您的网络文件中这样做 -

```
<h:inputText value="#{bean.myData}">
    <a4j:support event="onblur" actionListener="#{bean.updateData}"/>
</h:inputText> 
```

显示您的列表，并在*onblur*之后通过调用上述函数直接将此值更新到数据库。

希望它能消除你的疑问。

# android - android中RTC和RTC_WAKEUP的区别

> ID：10531734
> 
> 赞同：11
> 
> 时间：2012-05-10T10:04:11.410
> 
> 标签：android, android-intent, android-service, android-alarms

我是 android 新手，无论我的应用程序是否正在运行，我都必须每 30 分钟执行一次操作，所以我想了解如何使用服务和警报管理器执行这些操作，任何示例或运行都会有所帮助

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-10T10:14:04.277

如果您希望您的服务每 30 分钟执行一次操作，请使用 RTC_WAKEUP，因为 RTC_WAKEUP 将唤醒设备并传递待处理的意图。另一方面，RTC 只会在设备唤醒时传递意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:07:53.677

我认为您需要知道的一切都在[AlarmManager的文档中](http://developer.android.com/reference/android/app/AlarmManager.html)

试图让手机保持清醒可能会有很多陷阱，也可以在 github 上查看 Mark Murphy 的[cwac-wakeful](https://github.com/commonsguy/cwac-wakeful)

# php - PHP / MySQL价格矩阵表单验证

> ID：10531735
> 
> 赞同：0
> 
> 时间：2012-05-10T10:04:24.300
> 
> 标签：php, mysql, validation, mysqli

我确定解决方案相当简单，但是我的大脑今天似乎并没有处于正确的心态。我有一个 MySQL 表存储我的产品的定价矩阵。

```
ID     PRODUCT     MINIMUM     PRICE
1      1           2           15
2      1           4           12
3      1           6           10 
```

快速解释一下，对于 id 为 1 的产品，如果客户的购物篮中至少有 2 件商品，那么每件商品的价格将降至 15 英镑。如果用户随后将另外 2 件产品放入他们的购物篮中，则每件的价格将降至 12 英镑。

问题：我需要一种在每次添加新价格层时验证新价格层的方法。因此，如果有人想添加一个新层：

```
ID     PRODUCT     MINIMUM     PRICE
4      1           3           16 
```

这是不允许的，因为在这种情况下，如果用户选择购买三件而不是两件，每件商品的价格都会增加。因此，我需要确保输入的价格随着数据库中已有值的数量增加而减少。

```
$query = 'select id,minimum,price from `cat.tier_price` where product = %d order by minimum asc;';
$query = sprintf($query, (int)$identity);
if(!$return = $db->query($query)){
    echo 'MySQL error!';
}else{
    $quantity = $_POST['quantity'];
    $price = $_POST['quantity'];

    if($return->num_row){
        while($tier = $return->fetch_object){

        }
    }
} 
```

如果我说得不够清楚，请说。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:14:56.740

对于这种类型的数据验证，您可能应该使用在操作完成之前对无效数据引发错误（例如，通过调用不存在的过程）的[触发器；](http://dev.mysql.com/doc/en/triggers.html)因此，MySQL 将中止任何插入无效数据的尝试：

```
DELIMITER ;;

CREATE TRIGGER foo BEFORE INSERT ON tier_price FOR EACH ROW
  IF (
    SELECT COUNT(*)
    FROM   tier_price
    WHERE  product = NEW.product
       AND (
              (minimum > NEW.minimum AND price > NEW.price)
           OR (minimum < NEW.minimum AND price < NEW.price)
       )
  ) > 0 THEN
    CALL raise_error;
  END IF;;

DELIMITER ; 
```

如果记录中的记录`tier_price`也可能会更新，您可能也需要一个类似的触发器`BEFORE UPDATE`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:15:45.963

这可以通过一个简单的函数来完成：

```
function validateTier($productId, $minimum, $price) {
    // check if the new tier is not higher price for higher minimum
    $query = 'SELECT 1 AS exists FROM `cat.tier_price` WHERE `product` = {$productId} AND `minimum` < {$minimum} AND `price` > {$price} ORDER BY `minimum` DESC LIMIT 1';
    $res = mysql_query($query);
    $result = mysql_fetch_assoc($res);

    if(isset($result['exists']) && $result['exists']) {
        // check if the new tier is not lower price for lower minimum
        $query = 'SELECT 1 AS exists FROM `cat.tier_price` WHERE `product` = {$productId} AND `minimum` > {$minimum} AND `price` < {$price} ORDER BY `minimum` ASC LIMIT 1';
        $res2 = mysql_query($query);
        $result2 = mysql_fetch_assoc($res2);

        if(isset($result2['exists']) && $result2['exists']) return true;
    }

    return false;
} 
```

然后，每当应添加新层时调用此函数。该函数试图准确选择一条记录，其中最小值低于插入的记录，而价格高于插入的记录。如果此查询成功，它将返回 1（视为 true），这意味着可能会插入新的撕裂。否则将返回 FALSE，这意味着新层不正确。

但我认为这也应该有一个技巧（而且更简单）：

```
function validateTier($productId, $minimum, $price) {
    // check if the new tier is not higher price for higher minimum
    $query = 'SELECT 1 AS exists FROM `cat.tier_price` WHERE `product` = {$productId} AND ((`minimum` < {$minimum} AND `price` > {$price}) OR (`minimum` > {$minimum} AND `price` < {$price})) LIMIT 1';
    $res = mysql_query($query);
    $result = mysql_fetch_assoc($res);

    if(isset($result['exists']) && $result['exists']) return true;

    return false;
} 
```

请让我知道这是否也有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:46:06.807

我会以相反的方式做到这一点。它将处理给定 product_id 的 price_matrix 表中没有条目的情况。

```
 set @product_id := 1;
    set @minimum :=3;
    set @price :=16;

    select count(*) as count from price_matrix where product_id = @product_id and 
    (
        ( minimum > @minimum and price > @price )
        or 
        ( minimum < @minimum and price < @price ) 
    )

   If count > 0:
       This entry is not permitted
   else :
       Permitted 
```

# jquery - Jquery 删除值为 x 的输入

> ID：10531741
> 
> 赞同：5
> 
> 时间：2012-05-10T10:04:34.110
> 
> 标签：jquery, input

伙计们，我如何使用 jquery 删除具有特定值的输入？

我知道我应该使用`.remove()`，但我不知道如何找到特定的输入。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T10:07:17.697

```
$("input[value='"+value+"']").remove(); 
```

要删除的元素`value`在哪里。`value`:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T10:12:46.887

循环进入`<input>`字段然后匹配每个值，如果匹配，则将其删除：

```
$(document).ready(function() {
    $('input[type=text]').each(function() {
        if ($(this).val() === "foo") {
            $(this).remove();
        }
    });
});​ 
```

在这里演示[jsFiddle](http://jsfiddle.net/gkDtt/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T10:07:57.840

```
​$(function(){
    $("input[type='button']").click(function(){
        $("input[type='text']").each(function(){
           var $this = $(this);
            if ($this.val() == "x"){
               $this.remove();
            }                
        });
    });        
});​ 
```

[http://jsfiddle.net/rZczZ/](http://jsfiddle.net/rZczZ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T10:06:39.320

使用该`replaceWith()`功能。

[http://api.jquery.com/replaceWith/](http://api.jquery.com/replaceWith/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T10:08:28.210

我假设您的意思是输入框值？

在这种情况下为什么不...

```
<input id="textField" type="text" value="testValue" />

$("#textField").val(""); 
```

这将清除文本框的值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T10:14:46.743

您可以简单地使用此代码来删除特定的输入。

```
$(function(){
    $("input[type='button']").click(function(){
        $("input[value=x]").remove();
    });        
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-10T10:15:45.060

**从 DOM 中删除所有包含“hello”的输入。**

```
<!DOCTYPE html>
<html>
<head>

 <style>p { background:yellow; margin:6px 0; }</style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <p class="hello">Hello</p>
  how are 
  <p>you?</p>

  <button>Call remove(":contains('Hello')") on paragraphs</button>
<script>

    $("button").click(function () {
      $("input[type='text']").each(function(){
        if($(this).val().toLowerCase().indexOf('hello')!=-1)
            $(this).remove();
    })
    });

</script>

</body>
</html> 
```

# join - 带有 JOIN & ON & AND 的 Kohana 数据库查询生成器

> ID：10531742
> 
> 赞同：2
> 
> 时间：2012-05-10T10:04:35.843
> 
> 标签：join, kohana, kohana-3.2

我正在处理一个使用 COALESCE 为我当前项目检索本地化字符串的查询

sql 在用作原始查询时有效，但我似乎无法使用查询构建器以这种方式构建连接

```
LEFT JOIN text as text_se
ON (main_table.text = text_se.id)
AND (text_se.lang_code = 'SV') 
```

这段代码：

```
->join(array('text', 'text_se', 'LEFT')
    ->on('main_table.text', '=', 'text_se.id')
    ->on('text_se.lang_code', '=', 'SV') 
```

只会导致

```
LEFT JOIN text as text_se
ON (main_table.text = text_se.id AND text_se.lang_code = 'SV') 
```

哪个不一样......在JOIN语句之后有其他人使用AND并且可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T23:01:00.830

或者你可以这样做......

```
->join(array('text', 'text_se'), 'LEFT')
    ->on('main_table.text', '=', DB::Expr('text_se.id AND text_se.lang_code = "SV"')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:42:30.413

为什么不使用 where：

```
->join(array('text', 'text_se', 'LEFT')
->on('main_table.text', '=', 'text_se.id')
->where('text_se.lang_code', '=', 'SV') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-30T00:00:54.180

这似乎适用于 3.1.x：

```
->join(array('text', 'text_se', 'LEFT')
->on('main_table.text', '=', DB::expr('text_se.id'))
->on('text_se.lang_code', '=', DB::expr('SV')) 
```

# java - Maven项目中的javafx应用程序

> ID：10531750
> 
> 赞同：7
> 
> 时间：2012-05-10T10:05:11.283
> 
> 标签：java, maven-3, javafx-2

我有一个结构如下的项目：

主项目
-libary-1
-library-2
-i-need-javafx-app-here

所以，我需要在我的 Maven 项目中使用 JavaFX 2 应用程序，它应该使用 library-1 和 library-2 及其依赖项。我找不到 JavaFX 2 项目的任何 maven 原型，并且我可以找到有关如何通过 Maven 3 构建 JavaFX 应用程序的任何足够信息。我不需要任何网络部署，它只会部署桌面应用程序。

那么，任何人都可以帮助解决这个问题吗？

升级版：

`java.lang.NoClassDefFoundError: javafx/application/Application
...
Caused by: java.lang.ClassNotFoundException: javafx.application.Application`
当我尝试运行由**pgras**方式构建的应用程序时发生异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T11:06:50.227

所以我猜你已经使用Java 7，我不知道你需要什么，编译你只需要对javafx的依赖，所以在你的javafx应用程序的pom中：

```
<dependencies>
    <dependency>
        <groupId>com.oracle</groupId>
        <artifactId>javafx</artifactId>
        <version>2.0</version>
        <systemPath>${javafx.rt.jar}</systemPath>
        <scope>system</scope>
    </dependency>
</dependencies> 
```

并在您的 maven settings.xml 添加（并适应您的系统的路径）：

```
<profile>
  <id>javafx</id>
  <activation>
    <activeByDefault>true</activeByDefault>
  </activation>
  <properties>
    <javafx.rt.jar>C:\Program Files (x86)\Oracle\JavaFX 2.0 SDK\rt\lib\jfxrt.jar</javafx.rt.jar>
    <ant.javafx.jar>C:\Program Files (x86)\Oracle\JavaFX 2.0 SDK\tools\ant-javafx.jar</ant.javafx.jar>
  </properties>
</profile> 
```

编译和制作jar文件应该足够了......如果不告诉我，我会发布更多信息......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T04:04:14.603

非常感谢，这个链接很有帮助。所以，现在我的 pom 看起来像这样：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <groupId>info.kosmonaffft</groupId>
    <artifactId>javafx-maven-example</artifactId>
    <version>0.1</version>
    <packaging>jar</packaging>
    <name>javafx-maven-example</name>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.1</version>
                <executions>
                    <execution>
                        <id>copy-dependencies</id>
                        <phase>prepare-package</phase>
                        <goals>
                            <goal>copy-dependencies</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${project.build.directory}/lib</outputDirectory>
                            <excludeArtifactIds>junit,hamcrest-core</excludeArtifactIds>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-antrun-plugin</artifactId>
                <version>1.7</version>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <configuration>
                            <target>
                                <taskdef name="jfxjar" classname="com.sun.javafx.tools.ant.FXJar" classpathref="maven.plugin.classpath"/>
                                <jfxjar destfile="${project.build.directory}/${project.build.finalName}">
                                    <fileset dir="${project.build.directory}/classes"/>
                                    <application name="${project.name}" mainClass="info.kosmonaffft.jfxexample.App"/>
                                    <resources>
                                    </resources>
                                </jfxjar>
                            </target>
                        </configuration>
                        <goals>
                            <goal>run</goal>
                        </goals>
                    </execution>
                </executions>
                <dependencies>
                    <dependency>
                        <groupId>com.oracle.javafx</groupId>
                        <artifactId>ant-javafx</artifactId>
                        <version>2.0</version>
                        <scope>system</scope>
                        <systemPath>C:\Program Files\Oracle\JavaFX 2.1 SDK\tools\ant-javafx.jar</systemPath>
                    </dependency>
                </dependencies>
            </plugin>
        </plugins>
    </build>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>javafx</groupId>
            <artifactId>javafx-rt</artifactId>
            <version>2.1</version>
            <scope>system</scope>
            <systemPath>C:\Program Files\Oracle\JavaFX 2.1 SDK\rt\lib\jfxrt.jar</systemPath>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
</project> 
```

因此，现在可以从命令行“java -jar myapp.jar”运行应用程序，但我还没有测试它如何在依赖项下运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:18:47.633

我添加了另一个答案，因为它很长，它显示了我如何生成签名的 jar 和 JNLP webstart 文件。

因此，首先我创建了一个能够对 jar 进行签名的证书（您将被要求输入一些信息，我使用“superpass”作为密码，看看它在 pom 中的使用位置）：

```
cd src/main/java
mkdir jnlp
cd jnlp
keytool -genkey -alias signFiles -keystore keystore.jks 
```

然后我使用这个 pom.xml（它有一个父 pom，但它不包含任何与 javafx 相关的内容）：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
     xmlns="http://maven.apache.org/POM/4.0.0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<modelVersion>4.0.0</modelVersion>
<parent>
    <artifactId>testfx</artifactId>
    <groupId>ch.pgras</groupId>
    <version>1.0-SNAPSHOT</version>
</parent>
<groupId>ch.pgras</groupId>
<artifactId>hellofx</artifactId>
<version>1.0-SNAPSHOT</version>
<name>hellofx</name>
<url>http://maven.apache.org</url>
<dependencies>
    <dependency>
        <groupId>com.oracle</groupId>
        <artifactId>javafx</artifactId>
        <version>2.0</version>
        <systemPath>${javafx.rt.jar}</systemPath>
        <scope>system</scope>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <id>copy-dependencies</id>
                    <phase>package</phase>
                    <configuration>
                        <overWriteReleases>false</overWriteReleases>
                        <overWriteSnapshots>false</overWriteSnapshots>
                        <overWriteIfNewer>true</overWriteIfNewer>
                    </configuration>
                    <goals>
                        <goal>copy-dependencies</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-antrun-plugin</artifactId>
            <version>1.7</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <configuration>
                        <target>
                            <taskdef name="jfxdeploy" classname="com.sun.javafx.tools.ant.DeployFXTask"
                                     classpathref="maven.plugin.classpath"/>

                            <taskdef name="jfxsignjar" classname="com.sun.javafx.tools.ant.FXSignJarTask"
                                     classpathref="maven.plugin.classpath"/>

                            <jfxdeploy width="800" height="600" outdir="${project.build.directory}/deploy"
                                       outfile="${project.build.finalName}">
                                <info title="${project.name}"/>
                                <application name="${project.name}" mainclass="webmap.WebMap"/>
                                <resources>
                                    <fileset dir="${project.build.directory}" includes="*.jar"/>
                                    <fileset dir="${project.build.directory}/dependency"
                                             includes="*.jar"/>
                                </resources>
                                <platform javafx="2.0">
                                    <jvmarg value="-Xms64m"/>
                                    <jvmarg value="-Xmx256m"/>
                                </platform>
                            </jfxdeploy>
                            <jfxsignjar destdir="${project.build.directory}/deploy"
                                        keystore="${project.basedir}/src/main/java/jnlp/keystore.jks"
                                        storepass="superpass" alias="signFiles" keypass="superpass">
                                <fileset dir="${project.build.directory}/deploy" includes="*.jar"/>
                            </jfxsignjar>
                        </target>
                    </configuration>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
            </executions>
            <dependencies>
                <dependency>
                    <groupId>com.oracle.javafx</groupId>
                    <artifactId>ant-javafx</artifactId>
                    <version>2.0</version>
                    <systemPath>${ant.javafx.jar}</systemPath>
                    <scope>system</scope>
                </dependency>
            </dependencies>
        </plugin>

    </plugins>
</build> 
```

最后我运行 mvn install，结果将在 target/deploy...

祝你好运 ：）

# android - OpenGL ES 纹理不会出现在某些设备上

> ID：10531751
> 
> 赞同：1
> 
> 时间：2012-05-10T10:05:14.920
> 
> 标签：android, opengl-es

我有个问题。所以我只是把我的第一款游戏放到了 Google Play 上。这是一个简单的桥梁建设游戏。

我自己有三星 Galaxy S Plus 在 Android 2.3.6 上运行。该游戏在我的手机、索尼 Xperia Ray、HTC Gratia 和三星 Ace 上运行良好。

将我的游戏投放市场后，我收到的反馈很少，告诉我玩家只看到白框，这意味着纹理由于某种原因不起作用。这些手机是运行 4.0.4 的 LG Optimus Black 和三星 Galaxy S。所以 Android 4.0.4 是为三星 Galaxy S 定制的，因为他们没有发布官方版本。

该怎么办？我所有的图像都是 24 位 PNG 并且都是 2 的幂。

这是我加载它们的方式：

```
/** @return texture ID
*/
public int loadTexture(int resource)
{
    int[] temp = new int[1];
    gl.glGenTextures(1, temp, 0);

    Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(),
            resource);
    gl.glBindTexture(GL10.GL_TEXTURE_2D, temp[0]);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);
    GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);

    // recycle the bitmap
    bitmap.recycle();

    return temp[0];
} 
```

这是链接：[https ://play.google.com/store/apps/details?id=com.fizzicsgames.trainthemtocrosslite](https://play.google.com/store/apps/details?id=com.fizzicsgames.trainthemtocrosslite)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:34:29.830

哦，我太傻了。所以问题是由于将纹理放置在drawable文件夹而不是drawable-nodpi中引起的。纹理在 MDPI 设备和支持非 2 纹理的设备（如我的 Galaxy S Plus）上正常工作。即使纹理是 2 的幂，它们也会根据屏幕进行缩放。因此，如果您不想为每个分辨率创建副本，请始终将纹理放在 drawable-nodpi 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:46:45.683

你在使用任何着色器吗？

如果是这样，浮点精度可能会导致硬件依赖问题。例如：里面有 1.0 的浮动制服可能会给你 int() 上的 0；好像它有 0.99 而不是 1.0。

如果您正在使用它，请发布您的着色器代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T20:40:13.073

问题是`glGenTextures`。我的建议是不要使用它，而是实现你自己的跟踪纹理的系统。

如果您调试并检查输入的值`glGenTextures`，`temp[0]`您会在某些设备上看到它每次调用它都会给您一个很好的合理的 1、2、3。在其他设备上调试相同的代码，您可能会看到 1000056737、-31895888 等

编辑例如：

```
public class Texture{

    public static int texturecount = 0;

    public void loadTexture(Context context){

        int[] textures = new int[1];
        textures[0] = Texture.texturecount;
        Texture.texturecount.texturecount++;

        //...and bind it to our array
        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textures[0]);

        // etc

    }
} 
```

不是一个非常优雅的解决方案，也可能不是线程安全的，但它有效

# c++ - 缺少 MSVCR90D.dll

> ID：10531753
> 
> 赞同：1
> 
> 时间：2012-05-10T10:05:25.267
> 
> 标签：c++, sfml

[我正在编写一个使用SFML 1.6](http://www.sfml-dev.org/)的 C++ 程序（32 位）。发布版本可以毫无问题地编译和运行，而调试版本也可以毫无问题地编译但无法运行。[Dependency Walker](http://www.dependencywalker.com/)显示 SFML 的调试版本需要一个 MSVCR90D.dll 和一个 MSVCP90D.dll。在我的硬盘上找不到这两个文件。我自己没有编译 SFML（我已经下载了二进制文件）并且之前没有注意到它是用 Visual Studio 2008 编译的，而我使用的是 VS 2010 Express。所以我认为下载 VS 2008 可再发行组件可以解决问题，但事实并非如此。现在我不确定使用用旧编译器版本编译的库是否是一个好主意。

关于我做错了什么有什么建议吗？我需要安装哪个可再发行组件来获取那些丢失的 DLL？

PS：我用的是Win7 64

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:07:33.567

不，不幸的是，这些是 VS2008 调试运行时 DLL（末尾的“D”）。官方不允许您分发它们。

请注意，在编译器版本之间混合 C++ 是危险的。您的选择可能是

1.  获取源代码并使用 VS2010 自己重建它（这也将允许您对其进行调试，这对于理解/发现库的问题很有用）
2.  安装 VS2008 C++（无论是否表达）并使用它来代替。

我打算建议让构建器为您重新构建版本，但仍然存在 2008 与 2010 的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:11:02.193

对于您的主要问题，Rup 是对的。关于混合 VS2008/VS2010 运行时，可以这么说：

*   `libA.dll`ABI（链接时间）是否依赖于 VS2008 DLL 运行时；
*   `libB.dll`是 ABI 依赖于 VS2010 DLL 运行时。

以我的经验，在你的 VS 项目中使用发布版本是安全的**，**只要：`libA.dll``libB.dll`

*   您正确地链接`libA`和`libB`（在链接器输入中选择正确的`libA.lib`和`libB.lib`）；

*   使用`libA`, `libB` **headers**不会在运行时创建 ABI 不匹配，这取决于混合的 VS2008/VS2010 标头（例如 STL）。

例如：

```
// libA.h

#include <vector>  

class LibAClass
{
private:
    // This is unsafe, warning c4251: users of libA may allocate a different size
    // than expected for the vector. The code can perfectly compile but at runtime
    // it can cause problems (verified myself)
    std::vector _list;

    // The following is safe as long as users of libA are not required to
    // deal directly with *_listp
    std::vector *_listp;
}; 
```

# java - 将 servlet 连接到数据库 as400

> ID：10531755
> 
> 赞同：1
> 
> 时间：2012-05-10T10:05:33.113
> 
> 标签：java, database, jdbc, connection, driver

我正在尝试开发一个需要通过 java servlet 连接到远程数据库 as400 并将 JSON 对象返回给用户的 android 应用程序。

这是我的 DoGet 方法代码：

```
protected void doGet(HttpServletRequest request,HttpServletResponse response) throws       ServletException, IOException {
    response.setContentType("application/json");
    PrintWriter out = response.getWriter();
    out.println("{");

    Connection conn = null;
    try {
    Class.forName("com.ibm.as400.access.AS400JDBCDriver").newInstance();
        conn = DriverManager.getConnection( "jdbc:as400://ipaddress;database name=dbname", "username", "password");
        System.out.println("Connected to the database");
    } catch (Exception e) {
        System.out.println("error! 1");
        e.printStackTrace();
    }

    try {
        conn.close();
        System.out.println("Disconnected from database");
    } catch (Exception e) {
        System.out.println("error! 2");
        e.printStackTrace();
    }

} 
```

在我通过 eclipse 启动 servlet 后，它停在“Class.forName(....)”，它给了我以下错误：错误！1 java.sql.SQLException: 应用程序请求者无法建立连接。（连接超时：连接）

```
at com.ibm.as400.access.JDError.throwSQLException(JDError.java:565)
at com.ibm.as400.access.AS400JDBCConnection.setProperties(AS400JDBCConnection.java:3332)
at com.ibm.as400.access.AS400JDBCDriver.prepareConnection(AS400JDBCDriver.java:1393)
at com.ibm.as400.access.AS400JDBCDriver.initializeConnection(AS400JDBCDriver.java:1230)
at com.ibm.as400.access.AS400JDBCDriver.connect(AS400JDBCDriver.java:371)
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at it.liuc.webtest.Servlet1.doGet(Servlet1.java:31)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Unknown Source)
Caused by: java.net.ConnectException: Connection timed out: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
at java.net.PlainSocketImpl.connect(Unknown Source)
at java.net.SocksSocketImpl.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.ibm.as400.access.PortMapper.getSocketConnection(PortMapper.java:273)
at com.ibm.as400.access.PortMapper.getServerSocket(PortMapper.java:161)
at com.ibm.as400.access.AS400ImplRemote.signonConnect(AS400ImplRemote.java:2334)
at com.ibm.as400.access.AS400ImplRemote.signon(AS400ImplRemote.java:2250)
at com.ibm.as400.access.AS400.sendSignonRequest(AS400.java:3042)
at com.ibm.as400.access.AS400.promptSignon(AS400.java:2606)
at com.ibm.as400.access.AS400.signon(AS400.java:3921)
at com.ibm.as400.access.AS400.connectService(AS400.java:1175)
at com.ibm.as400.access.AS400JDBCConnection.setProperties(AS400JDBCConnection.java:3324)
... 20 more
java.lang.NullPointerException
at it.liuc.webtest.Servlet1.doGet(Servlet1.java:43)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Unknown Source) 
```

似乎它无法连接到服务器，但我确定用户名、密码和数据库名是正确的。我必须在 IP 地址之后插入一个端口吗？还有其他建议吗？

谢谢回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:18:18.757

`ConnectionTimedOut`堆栈跟踪中的

*   AS/400 未配置为回复 TCP 连接
*   中间某处有防火墙

从应用服务器机器上，尝试远程登录到数据库服务器中的 AS/400 端口，并查看它是否可以连接（即使它自动断开连接）或者它是否只是挂起。您可以使用 Wireshark 更详细地查看正在发生的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T10:10:33.767

> 它停在“Class.forName(....)”

这是不正确的。那条线被执行了；如果失败，您会看到一个`ClassNotFoundException`.

您正在尝试执行以下行，即建立连接的位置。这就是失败的原因。

检查您正在使用的 URL。我还要确保您正在运行的客户端计算机可以看到数据库服务器。您可以从客户端机器 ping 数据库服务器吗？您可以使用某种非 JDBC 客户端连接到数据库吗？您是否有权使用您获得的凭据访问该数据库？拥有该数据库的 DBA 是否知道您的应用程序正在尝试连接到它？

更新：为了确保我正确理解您，您是说您在运行 Java 客户端的机器上打开了一个命令 shell 并输入了“ping ip-address”，其中“ip-address”是与您在连接 URL 中输入的值相同。

如果我在我的机器上打开一个命令 shell 并 ping Google，它看起来像这样：

```
C:>ping www.google.com

Pinging www.l.google.com [74.125.130.147] with 32 bytes of data:

Reply from 74.125.130.147: bytes=32 time=29ms TTL=42
Reply from 74.125.130.147: bytes=32 time=27ms TTL=42
Reply from 74.125.130.147: bytes=32 time=29ms TTL=42
Reply from 74.125.130.147: bytes=32 time=28ms TTL=42

Ping statistics for 74.125.130.147:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 27ms, Maximum = 29ms, Average = 28ms

C:> 
```

如果你没有，你有你的答案：你的客户端机器看不到网络上的数据库服务器。

端口很重要，因为设置数据库的 DBA 可能没有使用默认端口。您需要与拥有数据库的人交谈并解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T05:19:21.887

您是否为该程序提供了适当的驱动程序库？首先，您下载数据库连接驱动程序并导入您的程序。并创建与远程数据库的连接并给出类路径和连接路径。然后在你的程序中，类路径和连接路径在你的程序中给出。运行你的程序。它将解决您的问题。

# sql - 列中的 Sql 值

> ID：10531757
> 
> 赞同：1
> 
> 时间：2012-05-10T10:05:40.347
> 
> 标签：sql

我有一个`tblIndex`包含以下值的表：

```
indID   indDesc  indNo
  1     Desc1     999
  2     Desc2     999
  3     Desc3     995
  4     Desc4     995
  5     Desc5     999 
```

我想将`SELECT`三排排成一排`where indNo=999`......如下所示：

```
indDesc  indDesc   indDesc   indNo
Desc1    Desc2     Desc5      999 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:17:04.983

我假设您实际上想要为所有记录获取单个值。如果您使用的是 SQL-Server，您可以像这样创建一个[标量值函数](http://msdn.microsoft.com/en-us/library/ms131043.aspx)：

```
CREATE FUNCTION [dbo].[getIndexDescriptionByNumber]
(
    @indNo int,
    @delimiter varchar(5)
)
RETURNS VARCHAR(8000)
AS
BEGIN
    DECLARE @indDesc VARCHAR(8000);
    SELECT  @indDesc = COALESCE(@indDesc + @delimiter, '') + table.indDesc
    FROM    table
    WHERE   table.indNo = @indNo
    ORDER BY indDesc ;

    return @indDesc  ;
END 
```

你可以这样称呼它：

```
SELECT dbo.getIndexDescriptionByNumber(999, ' ') AS indDesc; 
```

结果：

```
indDesc
Desc1 Desc2 Desc5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:10:14.907

如果您使用的是 SQL Server，请查找[PIVOT 表](http://blogs.msdn.com/b/spike/archive/2009/03/03/pivot-tables-in-sql-server-a-simple-sample.aspx)

# ruby-on-rails - 在 Ruby on Rails 中呈现验证错误

> ID：10531762
> 
> 赞同：11
> 
> 时间：2012-05-10T10:06:08.187
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-plugins

在模型中说*Task*，我有以下验证

```
 validates_presence_of :subject, :project, :user, :status 
```

如何使用其他控制器为这些验证呈现错误消息。

在我使用的 CustomController 内部，

```
Task.create(hash) 
```

在哈希中传递 nil 值会产生以下错误，

```
 ActiveRecord::RecordInvalid in CustomController#create

 Validation failed: Subject can't be blank 
```

控制器创建操作中的代码

```
@task = Task.create(hash)
if @task.valid?
   flash[:notice] = l(:notice_successful_update)
else
    flash[:error] = "<ul>" + @task.errors.full_messages.map{|o| "<li>" + o + "</li>" }.join("") + "</ul>"
end
redirect_to :back 
```

如何向用户呈现错误消息。

任务模型已经建立，它会呈现正确的消息。我想从插件中使用它的功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T10:16:00.563

这应该工作

```
<%= form_for(@task) do |f| %>
  <% if @task.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@task.errors.count, "error") %> prohibited this task from being saved:</h2>

      <ul>
      <% @task.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:11:40.523

如果您正在谈论在编辑页面上显示错误（即：在表单中），那么请考虑使用[simple_form](https://github.com/plataformatec/simple_form) gem。它会在没有一行代码的情况下为您显示错误。只需替换`form_for`为`simple_form_for`，魔法就会开始......

# sql - 数据网格显示成员路径

> ID：10531764
> 
> 赞同：0
> 
> 时间：2012-05-10T10:06:17.463
> 
> 标签：sql, wpf, datagrid, combobox

我有一个带有组合框列的数据网格，它工作正常，但是否有可能获得 2 个显示成员？我想在框中显示前名和姓氏，但我只得到其中一个......

```
<WpfToolkit:DataGrid AutoGenerateColumns="false" EnableRowVirtualization="True" Height="226" ItemsSource="{Binding Source={StaticResource DataSet}, Path=PlacementsEmployees}" HorizontalAlignment="Left" Margin="739,57,0,0" Name="mitGrid" VerticalAlignment="Top" Width="Auto" DataContext="{Binding}" RowDetailsVisibilityMode="VisibleWhenSelected" IsSynchronizedWithCurrentItem="True" IsReadOnly="True" FontFamily="Verdana" FontSize="11">
    <WpfToolkit:DataGrid.Columns>
        <WpfToolkit:DataGridComboBoxColumn x:Name="test" Header="Employees" ItemsSource="{Binding Source={StaticResource DataSet}, Path=Employees}" SelectedValuePath="ID" SelectedValueBinding="{Binding Path=PE_Employees}" DisplayMemberPath="E_Surname" -> maybe "E_Forename; E_Surname" ?? <- IsReadOnly="True" />
    </WpfToolkit:DataGrid.Columns>
</WpfToolkit:DataGrid> 
```

我只想使用一列的原因是，我只想要一个标题（在我的情况下：员工）你们看到我的问题了吗？也许数据模板有可能:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:40:03.423

`DisplayMemberPath``DataTemplate`property 允许您在仅显示绑定类的一个属性的情况下不创建自定义。如果您想要的不仅仅是显示一个属性，您应该创建自己的`DataTemplate`.

# magento - Magento - 从优惠券代码中获取规则

> ID：10531765
> 
> 赞同：11
> 
> 时间：2012-05-10T10:06:25.363
> 
> 标签：magento, magento-1.4, magento-1.5, magento-1.6

我必须检索与优惠券代码关联的规则，以便在报价中显示该规则的折扣百分比。最简单的方法是直接从报价金额计算，但我想直接检索规则，然后从中获取折扣百分比。

这是我尝试过的：

```
 $rule = Mage::getModel('salesrule/coupon');
 $rule->load($couponCode); 
```

通过这种方式，我仍然没有检索到规则属性。有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-10T10:28:42.853

要通过代码加载优惠券，`'code'`请作为第二个参数传递给`load()`. 然后您可以通过使用`rule_id`您的优惠券实例的值来获取正确的规则实例：

```
$oCoupon = Mage::getModel('salesrule/coupon')->load($couponCode, 'code');
$oRule = Mage::getModel('salesrule/rule')->load($oCoupon->getRuleId());
var_dump($oRule->getData()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-09T08:11:02.943

首先获取优惠券代码

```
$orderNumber = 100000105; //order number with coupon code

$order = Mage::getModel('sales/order')->loadByIncrementId($orderNumber);

$orderDetails = $order->getData();

$couponCode = $orderDetails['coupon_code']; 
```

然后使用 Jürgen Thelen 的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-31T05:15:30.043

可能此解决方案将帮助您通过优惠券代码获取优惠券代码金额。

$couponCode = '**您**的优惠券代码';

$oCoupon = Mage::getModel('salesrule/coupon')->load($couponCode, 'code');

$oRule = Mage::getModel('salesrule/rule')->load($oCoupon->getRuleId());

print_r($oRule->getData());exit();

# sql-server-2005 - OPENQUERY 字符串中的存储过程/SQL 变量

> ID：10531770
> 
> 赞同：2
> 
> 时间：2012-05-10T10:06:47.763
> 
> 标签：sql-server-2005, stored-procedures, openquery

我在存储过程中使用 OPENQUERY（从链接服务器获取数据）时遇到问题。我一直在阅读 SQL 变量，但似乎无法让它工作，所以也许我误解了 SQL 中的变量/字符串。它抛出错误“'+'附近的语法不正确”。而且我不确定我做错了什么。

编码：

```
ALTER PROCEDURE [dbo].[sp_getPerson]
@myName nvarchar(MAX)
AS
BEGIN
SET NOCOUNT ON;

SELECT     *
    FROM         OPENQUERY(MY_LINKED_SERVER, 'SELECT * FROM myTable
WHERE (myName= ''' + @myName + ''')
') AS derivedtbl_1

END 
```

从理论上讲，这应该可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:29:47.277

我将整个查询放入一个变量并执行该变量。

```
declare @myName nvarchar(MAX)
declare @sqltext varchar(max)

select  @myName = 'Some Name'

select @sqltext='
select * from openquery(MY_LINKED_SERVER,''select * from database.schema.table
where myName = '''+@myName +'''
)'

exec (@sqltext) 
```

如果您使用 LINKED_SERVER.DATABASE.SCHEMA.TABLE，您可能会遇到性能问题，具体取决于表大小等，因为此查询不使用索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:15:30.927

您所要做的就是通过脚本添加链接服务器

[http://msdn.microsoft.com/en-us/library/ms189811.aspx](http://msdn.microsoft.com/en-us/library/ms189811.aspx) sp_addlinkedsrvlogin

如果您的链接服务器是 TEST-SQL 并且数据库是 test01 并且表名是 testtb

和....

从另一台服务器查询它是这样的。

```
select * from [TEST-SQL].test01.dbo.testtb linktedTB where .... 
```

您还可以将表连接到链接服务器。

# linux - Linux 用户空间应用程序编译错误

> ID：10531772
> 
> 赞同：0
> 
> 时间：2012-05-10T10:07:02.737
> 
> 标签：linux, compiler-errors, makefile

我是 linux 内核/系统开发的新手。

下面是我用来编译我的应用程序的 Makefile

```
CROSS_COMPILE   ?=
KERNEL_DIR  ?= /usr/src/linux

CC      := $(CROSS_COMPILE)gcc
KERNEL_INCLUDE  := -I/usr/include
CFLAGS      := -W -Wall -g $(KERNEL_INCLUDE)
LDFLAGS     := -g

all: finder-drv

finder-drv: finder.o
    $(CC) $(LDFLAGS) -o $@ $^

clean:
    rm -f *.o
    rm -f finder 
```

我收到以下错误：

```
/usr/include/arm-linux-gnueabi/sys/ioctl.h:22:22: fatal error: features.h: No such file or directory 
```

我不知道为什么 features.h 丢失了。

我运行以下命令后出现此问题：

```
make headers_install INSTALL_HDR_PATH=/usr 
```

谁能告诉我如何解决问题并在用户空间应用程序中正确链接/使用内核头文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:37:56.000

问题解决了。

为用户空间应用程序导出内核头文件的正确命令如下

> 制作 headers_install INSTALL_HDR_PATH=/usr/include

我给了`/usr`而不是`/usr/include`

我通过使用以下命令`/usr/include`重新安装恢复了已删除的文件`libc-dev`

> apt-get install lib6-dev --reinstall

克里斯，感谢您的时间和帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T12:25:36.783

直接针对内核编译用户空间程序并不适用。

如果您正在编写用户空间程序，则针对导出的标头进行编译，并仅使用导出的功能，例如系统调用。您可能会通过 C 库提供的代理。

如果您正在编写内核模块，您应该使用内核构建系统而不是制作自己的 makefile。

# ios - 使用核心图在 iPad 上绘制数据

> ID：10531776
> 
> 赞同：0
> 
> 时间：2012-05-10T10:07:18.557
> 
> 标签：ios, core-data, csv, core-plot

我有大量数据要使用核心图在 iPad 上绘制。数据采用 CSV 文件格式。目前我正在解析数据并实时绘制它。问题是我正在尝试读取文件并将其存储在程序内部的数组中，同时绘制它。所以不存在数据不一致的情况。图表不断地打开和关闭。对于 60k 到 100k 行的文件大小，最好使用核心数据。因为数据以 8 秒左右的延迟实时传输。会不会有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T01:38:26.377

您不会获得 100k 数据点的实时性能，尤其是在 iOS 上。无论如何，该设备没有足够的像素来显示那么多不同的点。闪烁可能是由于绘制时间过长和事情不同步造成的。

您需要过滤数据或仅绘制一个子集，例如，仅前 500 个点。

# java - 使用 XJC 从多个 XSD 生成 Java 类

> ID：10531781
> 
> 赞同：6
> 
> 时间：2012-05-10T10:07:33.893
> 
> 标签：java, jaxb, xjc

我有两个 xsd 文件：

**base.xsd**：

```
<schema
  targetNamespace="http://www.myorg.com/base"
  elementFormDefault="qualified"
  attributeFormDefault="unqualified"
  xmlns="http://www.w3.org/2001/XMLSchema">
...
<complexType name="NrmClass">
    ...
</complexType>
...
</schema> 
```

**main.xsd**是我们想要使用 base.xsd 中的类型的模式

```
<schema
  targetNamespace="http://www.myorg.com/main"
  elementFormDefault="qualified"
  xmlns="http://www.w3.org/2001/XMLSchema"
  xmlns:xn="http://www.myorg.com/base">

<import namespace="http://www.myorg.com/base"/>
...
<element>
  <complexType>
    <complexContent>
      <extension base="xn:NrmClass">
...

      </extension>
    </complexContent>
  </complexType>
</element>
...
</schema> 
```

当我尝试编译两者时，我收到以下错误：

```
> xjc base.xsd main.xsd
parsing a schema...
[ERROR] src-resolve: Cannot resolve the name 'xn:NrmClass' to a(n) 'type definition' component.
  line 48 of file:/main.xsd 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T02:36:23.190

您想尝试为要导入的 XSD 指定文件，如下所示：

```
<xsd:import namespace="http://www.myorg.com/base" schemaLocation="base.xsd"/> 
```

无论如何，如果您将它们并排放置，这将很有效。这样您就可以在一次操作中编译它们。

如果您想单独运行 xjc（就像它们被构建为单独的模块一样），那么您可以使用情节文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T10:11:19.243

看看“剧集”： [http ://weblogs.java.net/blog/kohsuke/archive/2006/09/separate_compil.html](http://weblogs.java.net/blog/kohsuke/archive/2006/09/separate_compil.html)

# view - 在 vbnet 2010 中使用 tableadapter 更新 sql 视图

> ID：10531785
> 
> 赞同：1
> 
> 时间：2012-05-10T10:07:42.237
> 
> 标签：view, vb.net-2010, tableadapter

我有一个表格适配器，里面装满了一个简单的：SELECT * FROM [view]

我尝试更新表适配器或添加新行，但没有任何反应。我有很多表适配器，但都被一张表填满，所以更新不是问题。但是现在使用视图来获取数据我无法进行更新/插入。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:09:36.337

如果视图是在多个表上创建的或具有聚合函数或具有 order by 子句或 union 子句，则意味着该视图是不可更新的视图。它不支持在此视图上插入/删除/更新。

您在视图中的两个表之间有连接，因此它不是可更新的视图。仅当仅在单个表上创建视图时才可更新视图。

只要满足以下条件，就可以通过视图修改基础基表的数据：

任何修改，包括 UPDATE、INSERT 和 DELETE 语句，都必须仅引用一个基表中的列。视图中被修改的列必须直接引用表列中的基础数据。这些列不能以任何其他方式派生，例如通过以下方式：

*   聚合函数：AVG、COUNT、SUM、MIN、MAX、GROUPING、STDEV、STDEVP、VAR 和 VARP。
*   一个计算。无法从使用其他列的表达式计算该列。使用集合运算符 UNION、UNION ALL、CROSSJOIN、EXCEPT 和 INTERSECT 形成的列相当于计算并且也不可更新。

正在修改的列不受 GROUP BY、HAVING 或 DISTINCT 子句的影响。TOP 不与 WITH CHECK OPTION 子句一起在视图的 select_statement 中的任何地方使用。

前面的限制适用于视图的 FROM 子句中的任何子查询，就像它们适用于视图本身一样。通常，数据库引擎必须能够明确地跟踪从视图定义到一个基表的修改。有关详细信息，请参阅通过视图修改数据。

如果之前的限制阻止您直接通过视图修改数据，请考虑以下选项：

代替触发器

可以在视图上创建 INSTEAD OF 触发器以使视图可更新。执行 INSTEAD OF 触发器而不是定义触发器的数据修改语句。此触发器允许用户指定处理数据修改语句必须发生的一组操作。因此，如果针对特定数据修改语句（INSERT、UPDATE 或 DELETE）的视图存在 INSTEAD OF 触发器，则可以通过该语句更新相应的视图。

分区视图

如果视图是分区视图，则该视图是可更新的，但受到某些限制。需要时，数据库引擎将本地分区视图区分为所有参与表和视图位于同一 SQL Server 实例上的视图，而分布式分区视图区分为视图中至少有一个表的视图驻留在不同的或远程服务器上。

[有关详细信息，请参阅此 MSDN 链接](http://msdn.microsoft.com/en-us/library/ms187956%28v=SQL.90%29.aspx)

# dll - 仅带有 DLL 和声明的 SWIG JNI 接口

> ID：10531786
> 
> 赞同：2
> 
> 时间：2012-05-10T10:07:46.983
> 
> 标签：dll, header, java-native-interface, swig

我有我想通过 JNI 访问的本机函数声明，并且我有包含所有类声明的 DLL。

我没有完整的头文件及其依赖项，但我有包含所有信息的 DLL。

是否可以使用 SWIG 创建一个仅具有 DLL 和函数声明的 JNI 接口？

另请参阅：[SWIG CYGWIN DLL 链接](https://stackoverflow.com/questions/8772477/swig-cygwin-dll-linking/10514285#10514285)，这是一个非常相似的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:11:47.570

除非您[能从 DLL 中猜出足够的信息，](https://stackoverflow.com/questions/554551/call-function-in-c-dll-without-header)以便能够重建（可能是部分的）头文件，否则您不能这样做。

它需要包含有关您关心的函数（不必是全部）和您关心的类型（不必是全部，但您需要知道每个函数的名称）的信息。

有了它，您可以正常构建模块文件。您可以根据它是 C++ 还是 C 来猜测/推断其中的一些信息 - 如果是 C++，则损坏的名称将告诉您您需要了解的大部分输入信息，而不是返回类型。

* * *

作为一个例子，我编译：

```
class foo {};

foo *make_foo() { return new foo; }

void eat_foo(foo*) {}

void frobinate_two_foos(foo*,foo*) {} 
```

作为 DLL 使用：

```
i586-mingw32msvc-g++ -shared -Wall -Wextra original.cc -o test.dll
```

从中我可以通过执行以下操作查看 DLL 中的符号：

```
i586-mingw32msvc-nm test.dll|i586-mingw32msvc-c++filt
```

有趣的是：

```
6bec1286 T frobinate_two_foos(foo*, foo*)
6bec1280 Teat_foo(foo*)
6bec128c T make_foo()

```

所以我可以推断出包装这些的 SWIG 模块可能看起来像：

```
%module reversed

class foo; // Nothing more known

foo *make_foo();

void frobinate_two_foos(foo*,foo*); // Return type guessed

// ignored eat_foo, I don't know what that does at all! 
```

您仍然需要构建足够的标头以允许生成的包装器进行编译。

# python - Django - 在会话中存储对象是一个好习惯吗？

> ID：10531787
> 
> 赞同：13
> 
> 时间：2012-05-10T10:07:51.833
> 
> 标签：python, django, django-templates, pickle

```
class Book(models.Model):
  author = models.ForeignKey(User)
  name = models.CharField(max_length=100)

def view(request):
  book = Book.objects.get(pk=1)
  request.session['selected_book'] = book 
```

将对象存储在 Session 而不是它们的 id 是一种好习惯吗？
例如，它是否足够“可腌制”以在模板中使用？

```
<div>{{ request.session.book.author.name }}</div> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-10T11:03:04.440

这似乎是个坏主意。除此之外，如果您在会话中存储一个对象，那么如果/当数据库版本发生变化时，它不会改变。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-22T13:13:01.287

有例外：

```
if your object doesnt exist in db yet 
```

例如，如果您通过许多步骤/视图构建它（对象）。

# c# - 使用 NUnit 进行数据驱动测试

> ID：10531788
> 
> 赞同：1
> 
> 时间：2012-05-10T10:07:53.763
> 
> 标签：c#, automated-tests, nunit-2.5

需要有关数据驱动测试自动化的建议。

我正在使用 C# ann Nunits 为使用 MVC 开发的 Web 应用程序进行测试自动化。我们为此使用 Selenium Web 驱动程序。

作为数据驱动测试的一部分，对于输入测试数据，哪一个比较好，是 xml 文件还是 sql server db。

如果我们使用 db，最好有一些 ORM(NHibernate) 用于 db 连接。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T04:44:44.673

[带有 csv 的 nunit 中的数据驱动测试](http://timwise.blogspot.in/2011/05/data-driven-test-in-nunit-with-csv.html)

[NUnit 中的参数化测试](http://www.nunit.org/index.php?p=parameterizedTests&r=2.5)

如何使用

```
 [Test, TestCaseSource("GetTestData")]
    public void MyExample_Test(int data1, int data2, int expectedOutput)
    {
        var methodOutput = MethodUnderTest(data2, data1);
        Assert.AreEqual(expectedOutput, methodOutput, string.Format("Method failed for data1: {0}, data2: {1}", data1, data2));
    }

    private IEnumerable<int[]> GetTestData()
    {
         while (data.ReadNext()) // Use your custom logic based on Stream to get new data (basically Implement IEnumerator on data class)
          yield return new[] { data.Current };
    } 
```

其他测试框架
[MS Test](http://msdn.microsoft.com/en-us/library/ms182527.aspx)
[XUnit](http://blog.benhall.me.uk/2008/01/introduction-to-xunitnet-extensions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:00:50.200

看看哪个适合您的账单。

如果您有一个好的 ORM，并且您对它感到满意，请使用它。

如果您对 XML 更满意，那就去做吧。

当它成为一个问题时，考虑一下长时间的运行。您不是在使用 Selenium 编写单元测试，而是在编写集成 UI 测试。因此，它们通常在夜间运行，因此长时间运行很少成为问题。

就个人而言，在这里，我们使用 LINQ2SQL 并且对于我跳到 SQL 服务器数据库的任何数据，它工作正常 - 只要您的查询不傻，性能影响很小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T21:50:08.443

我的建议是将测试数据捆绑到单元测试夹具本身中。每个测试方法的设置都会为测试设置初始状态（数据）；并且拆解会清理它（如有必要）。

试图维护一个外部数据文件并使其与单元测试代码保持一致是自找麻烦。（YMMV - 这是我个人经验的建议。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T04:22:29.853

考虑使用 Mockobjects 来模拟数据，试试这些链接：

*   [Mocking_and_Isolation_in_Unit_Testing](http://www.typemock.com/Mocking_and_Isolation_in_Unit_Testing.php)
*   [单元测试数据库代码](http://www.javaranch.com/journal/2003/12/UnitTestingDatabaseCode.html)
*   [http://msdn.microsoft.com/en-us/magazine/cc163904.aspx](http://msdn.microsoft.com/en-us/magazine/cc163904.aspx)
*   [单元测试数据库驱动应用程序的最佳策略是什么？](https://stackoverflow.com/questions/145131/whats-the-best-strategy-for-unit-testing-database-driven-applications)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-30T18:26:06.610

考虑将测试数据存储在嵌入式 json 文件中，而不是 excel 或数据库中。

存储在 json 中会有以下好处。

1.  由于模式，测试代码没有障碍
2.  没有连接问题
3.  测试数据将作为您项目的一部分提供

[这](https://www.nuget.org/packages/WonderTools.JsonSectionReader/)为在嵌入式 json 文件中管理测试数据提供了很好的支持

# javascript - 网络上的最佳实践圆角图像

> ID：10531794
> 
> 赞同：1
> 
> 时间：2012-05-10T10:08:14.000
> 
> 标签：javascript, css, image

假设可以找到合适的解决方案（不需要跨浏览器等） -

在网络上圆角图像的最佳方法是 CSS/JS，

或者：使用有圆角的图像（通过上传代码或设计师的手工劳动）是更好的做法吗？

如果可用，如何舍入元素 - css 与圆角图像（例如精灵）？

**编辑**我知道 CSS 是可能的，但我认为它使浏览器工作比仅仅下载预编辑的图像更难（这将在服务器端花费更多的精力）。问题不是什么有效，而是什么更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:24:55.160

您可以简单地创建带有圆角的图像，但这当然会首先增加生成图像的时间和复杂性。

或者，您也可以只使用 CSS 来做一些事情。将图像设置为 div 的背景图像，然后使用 CSS 3 border-radius 属性对 div 的角进行圆角处理，以提供类似的效果。

例如

```
div {
    background-image: url(myimage.jpg);
    width: 375px;
    height: 500px;
    border: 2px solid #666;
    border-radius: 40px;
    -moz-border-radius: 40px;
    -webkit-border-radius: 40px;
    } 
```

这仅适用于支持 CSS 3 的浏览器，但您确实提到跨浏览器兼容性不是问题。只是一个想法:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-31T07:18:43.223

您可以按照此代码制作完美的图像。

```
.MyImage {
  height: 200px;
  width: 200px;
  border-radius: 100%;
}
```

首先我们使用 .MyImage 类定位图像（你可以设置任何你想要的），然后我们设置 height 和 width 属性相等（你可以设置任何你想要的，除非它相等），使它成为一个完美的正方形。然后将边界半径设置为 100%。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-10T10:35:05.503

所有支持圆角的浏览器现在也支持图像本身的圆角。就像 Stef 回答的那样，您过去必须使用背景图片，但这种方式要容易得多。

```
img {
    border-radius: 10px;
} 
```

或者

```
img {
    border-radius: 10px 5px 10px 2px;
} 
```

在 Safari、Firefox、Chrome 甚至 ie9 的最新版本中，边框半径现在可以在没有前缀的情况下完全正常工作。

我猜这取决于您想要的向后兼容程度。如果你使用背景图片的方法来兼容，你仍然会遗漏一大堆不支持边框半径的旧浏览器，即使有前缀，所以你真的不如把角落变成图像的一部分。

希望有帮助:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-01T11:06:25.847

对于跨浏览器，这只是一个额外的：

```
img {
    border-radius: 10px 10px 10px 10px;
    -o-border-radius: 10px 10px 10px 10px;
    -ms-border-radius: 10px 10px 10px 10px;
    -moz-border-radius: 10px 10px 10px 10px;
    -webkit-border-radius: 10px 10px 10px 10px;
} 
```

# c++ - 如何将 warpPerspective 用于 Mat 的单个坐标

> ID：10531798
> 
> 赞同：1
> 
> 时间：2012-05-10T10:08:38.507
> 
> 标签：c++, opencv

我使用以下方法成功找到了两张图像之间的单应矩阵：

```
Mat H = findHomography(mpts_2, mpts_1, RANSAC, 1, outlier_mask); 
```

现在，使用给定的 Mat HI 无法找到图像四个角点的变换。那么如何使用 warpPerspective() 获得这些点的转换？！？还是我必须使用 transform() 函数？

我需要对这些点进行转换以获得扭曲图像与原始图像的交集。提前感谢您的努力...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:36:13.190

我想你对[`perspectiveTransform(...)`](http://opencv.willowgarage.com/documentation/cpp/core_operations_on_arrays.html#perspectiveTransform). 它类似于`warpPerspective(...)`仅对向量进行操作，而不是对整个图像进行操作。

# jsf-2 - 如何在响应期间从支持 bean 传递/重定向/分派到 JSF 页面

> ID：10531799
> 
> 赞同：0
> 
> 时间：2012-05-10T10:08:40.643
> 
> 标签：jsf-2, primefaces

我有一个 Web 应用程序，它基本上在按下 commandButton 时处理用户的条目，然后接收事务的响应/结果消息，并且应该显示在另一个 JSF 页面中。

这是我想做的一个示例：我正在使用 JSF2 和 primefaces

*registration.xhtml* - 交易的起点

*RegistrationBean* - registration.xhtml 使用的支持 bean - 具有通过 registration.xhtml 上的 commanButton 调用的“创建”（也处理输入的数据并假设设置 ResultBean）方法，然后返回用于导航的字符串（到 result.xhtml）

*result.xhtml* - 交易的结果 UI

*ResultBean* - 保存 result.xhtml 所需的值

我一直在互联网上搜索样本，但似乎找不到。有没有办法做到这一点？如果没有，也许是一种解决方法？我是使用这个的初学者。任何帮助将不胜感激。提前致谢！请参阅下面的示例代码。

**注册.xhtml：**

```
<h:form style="position: absolute" id="basicPartyRegistration">
<h:panelGroup>
    <h:commandButton id="createButton1"  action="#{partyRegistration.create}" value="Create">
    </h:commandButton>
    <h:button outcome="welcome" value="Main Page" id="mainPageButton" />
</h:panelGroup>
<br />
<h:panelGroup>
    <p:panelGrid columns="2">
    <h:outputText value="Receiver:" />
    <h:inputText id="receiver"
        value="#{partyRegistration.partyRegistrationInfo.receiverGLN}"
        size="15" maxlength="13" />
    <h:outputText value="TransmittingData:" />
    <h:inputText id="transmittingDataPool"
        value="#{partyRegistration.partyRegistrationInfo.transmittingDataPool}"
        size="15" maxlength="13" />
    <h:outputText value="PartyData:" />
    <h:inputText id="partyData"
        value="#{partyRegistration.partyRegistrationInfo.partyDataPool}"
         size="15" maxlength="13" />
</p:panelGrid>

.....
..... 
```

**注册豆：**

```
@ManagedBean (name = "partyRegistration")
@viewScoped //Changed to @ConversationScoped
public class RegistrationBean implements Serializable{
    private String receiver
    private String transmittingData;
    private String partyDataPool;
    @ManagedProperty (value = "resultBean")
    private Result result;
    // more variables
    //public getters and setters

    public String create(){
       // do some processing
       // some magic way to set RESULT bean to be used in the next page
       return "result";
    }
} 
```

**结果.xhtml**

```
<h:form style="position: absolute" id="partyRegistrationResponse">
<h:panelGroup>
<h:button outcome="welcome" value="Main Page" id="mainPageButton" />
</h:panelGroup>
<br/>
<h:panelGroup>
<p:panelGrid columns="4">
    <h:outputText value="Last Date Changed: " />
    <p:inputText id="lastDateChg" value="#{partyResponse.lastChangedDateItem}"
        title="Last Date Changed" size="15" >
    </p:inputText>

</p:panelGrid>
<h4>Response Identification</h4>
.....
..... 
```

**结果豆：**

```
@ManagedBean (name = "partyResponse")
@ViewScoped //changed to @ConversationScoped
public Class ResultBean implements Serializable{
    private Date lastChangedDateItem;
    //more variables
    //getters and setters
} 
```

**面孔-config.xml**

```
<navigation-rule>
    <navigation-case>
        <from-outcome>result</from-outcome>
        <to-view-id>/result.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:53:32.407

尝试在 RegistrationBean 的 create() 方法中创建 ResultBean，并以编程方式将其置于限定范围内。ViewScope 可能不是正确的选择，因为您要离开注册视图。

为了在重定向中幸存，请将其放入 Flash 范围内。

```
FacesContext.getCurrentInstance().getExternalContext().getFlash().putNow("partyResponse", resultBean); 
```

您还应该查看会话范围，这对于存储属于一个用例的一系列页面的 bean 很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:00:09.140

如果您*只*需要简单的字符串，为什么不使用`FacesMessage`？

```
public String create(){
    FacesContext.getCurrentInstance()
       .addMessage(null, new FacesMessage("Add your message here"));
    return "result";
} 
```

并在您`result.xhtml`使用`<h:messages>`标签时：

```
<h4>Response Identification</h4>
<h:messages/> 
```

否则，如果您需要的不仅仅是结果消息，您应该真正考虑您的设计并将 ResultBean 放在更广泛的范围（对话或会话）中。

例如，使用包含当前结果的会话范围 bean：

```
@ManagedBean
@SessionScoped
public Class SessionBean
  private Result currentResult;
  // getter and setter
} 
```

并在您的注册 bean 中：

```
// inject the session scoped bean
@ManagedProperty(value="#{sessionBean}")
private SessionBean sessionBean;

public String create(){
  sessionBean.setCurrentResult(myResult);
  return "result";
} 
```

# css - CSS 类的 HTML 渲染问题

> ID：10531804
> 
> 赞同：0
> 
> 时间：2012-05-10T10:08:48.477
> 
> 标签：css, post

我正在使用 Internet Explorer-8（完整版本-8.0.76011.17514）。我正在使用以下样式类在我的 td 标记中获取所需的样式。

```
.dataDisplaySingleDataHeading {
    font-size:medium;
    color:White;
    background-color:Gray;
    font-style:italic;
    width:5px;
    height:5px
} 
```

**问题**

第一次加载 Page 时，它​​呈现得很好，文本被正确呈现。

当 Page 被回发时，文本左对齐到 css 类（dataDisplaySingleDataHeading）中指定的宽度。

我的想法是否正确，IE 第一次忽略了宽度，只在回发时接收？

谢谢

# mysql - Mysql CONCAT() 无法正常工作

> ID：10531805
> 
> 赞同：4
> 
> 时间：2012-05-10T10:08:49.930
> 
> 标签：mysql, sql

我对 CONCAT mysql 函数有疑问

Mysql 查询是

```
SELECT CONCAT(a_firstname,' ',a_lastname) as a_employeename FROM employee. 
```

如果任何字段为空，这将给出空值

```
+--------------------------+
| a_firstname | a_lastname |
----------------------------
| bh          | a          |
| a           | NULL       |
+--------------------------+ 
```

结果

```
+----------------+
| a_employeename |
------------------
| bh             |
| NULL           |
+----------------+ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T10:36:29.300

MySQL 将 NULL 视为“无数据”，因此任何东西都可能与 NULL 成为 NULL。所以为了避免这种情况，你必须输入 IFNULL(field,result)。

请参阅以下查询：

`SELECT CONCAT(IFNULL(a_firstname,''),' ',IFNULL(a_lastname,'')) as a_employeename FROM employee`

谢谢。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T10:10:30.113

让我们从谦逊的教训开始：`CONCAT` *工作*正常，但*你*没有正确使用它。请不要急于下结论。

`COALESCE`这里的问题是在连接`NULL`值时必须使用：

```
SELECT CONCAT(COALESCE(a_firstname, ''),' ', COALESCE(a_lastname, '')) 
```

这是因为任何涉及的操作`NULL`（例如`NULL`与字符串连接）也会导致`NULL`. 查看[NULL 值的问题](http://dev.mysql.com/doc/refman/5.5/en/problems-with-null.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T11:27:39.333

只使用`IFNULL`功能

试试这个代码

```
SELECT CONCAT(IFNULL(a_firstname,''),' ',IFNULL(a_lastname,'')) as a_employeename FROM employee. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T10:10:36.200

当您进行 CONCAT 并且其中一个字段为 NULL 时，结果始终为 NULL。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T10:53:30.487

如果你想连接 NULL 和 NOT NULL 字段，CONCAT_WS() 是最好的解决方案。示例：CONCAT_WS(',', FIELD1,FIELD2,FIELD3) 将返回 'FIELD1Value,FIELD2Value,FIELD3Value'。如果 FIELD2Value 为 NULL，则输出将为“FIELD1Value,FIELD3Value”。

# iphone - iPad App Store 喜欢使用 UIScrollview 和 UIPageControl 的“精选标签”？

> ID：10531809
> 
> 赞同：1
> 
> 时间：2012-05-10T10:08:58.917
> 
> 标签：iphone, objective-c, uiscrollview, ipad

我是 iOS 开发的新手，我正在开发一个与 iPad 中的 Featured 选项卡完全相似的应用程序。

例如 ：

纵向模式下的应用程序功能选项卡 [http://postimage.org/image/hpfg55zbh/](http://postimage.org/image/hpfg55zbh/)

在滚动视图中显示应用程序

在横向模式下

[http://postimage.org/image/dpwnbnr4n/](http://postimage.org/image/dpwnbnr4n/)

**OHK NOW：**我正在做的是，我正在创建图片中单元格显示大小的视图。假设我有 25 个应用程序，那么我将创建 25 个视图并在该视图上加载应用程序的图像和描述。当用户从纵向模式旋转到横向时，我正在重新创建视图因为我正在显示：

纵向模式：每页 5 行 X 2 列。横向模式：每页 3 行 X 3 列。

重新创建和发布视图确实不是一个好习惯。任何人都可以指导我或建议我这样做的任何其他技术吗？我必须滚动视图和页面控制，但我想摆脱这种重新创建方法。

**

> 通过编程做完整的开发，不使用任何NIB

** 寻找最佳答案 :) ... 请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:55:06.287

我会说，当您的视图加载时，您将进行初始创建，而当您旋转时，您只需通过编辑视图的框架来重新定位视图。由于您没有使用笔尖，我假设您已经具备相应定位视图的逻辑。

所以也许你有类似的东西：

```
//Assuming you have these members
UIView *yourContainer_;
NSArray *subViews_;

- (void)viewDidLoad
{
    if(UIUserInterfaceOrientationIsLandscape(self.interfaceOrientation))
    {
        //create your views and add to container
    }
    else
    ....
}

-(void)willRotateToInterfaceOrientation: (UIInterfaceOrientation)orientation duration:(NSTimeInterval)duration
{
     if(UIUserInterfaceOrientationIsLandscape(orientation)
     {
          yourContainer_.frame = CGRectMake(?,?,?,?); //whatever the new size needs to be
          //then loop through all of your sub views to reposition their frames individually within the new container to match the new size and layout
     }
     else
     {
          //the same thing for this orientation
     }

} 
```

# c++ - 如何停止/中断 boost::thread？

> ID：10531810
> 
> 赞同：10
> 
> 时间：2012-05-10T10:09:04.437
> 
> 标签：c++, multithreading, boost

我在一个函数中创建了一个线程，在另一个函数中，我想停止这个线程。我试过这样：

```
class Server
{
private:
     boost::thread* mPtrThread;
...

public:
     void createNewThread()
     {
        boost::thread t(...);
        mPtrThread = &t;
     }

     void stopThread()
     {
        mPtrThread->interrupt();
     }
} 
```

但这不起作用。我怎么能停止线程？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-10T10:27:55.583

如果你想使用 interrupt() 你应该定义[中断点](http://www.boost.org/doc/libs/1_49_0/doc/html/thread/thread_management.html#interruption_points)。线程一旦到达中断点之一，就会在调用interrupt()后被中断。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-10T10:22:42.663

首先，在本地*范围*`createNewThread()`内声明 a并将其指针分配给类成员。完成后，被销毁并且 mPtrThread 将持有一个非法指针。`boost::thread t`*`mPtrThread``createNewThread()``t`*

 *我宁愿使用类似的东西`mPtrThread = new boost::thread(...)`;

您可能还想阅读[这篇文章](https://www.quantnet.com/threads/c-multithreading-in-boost.10028/)以了解有关 Boost 中的多线程的更多信息。*

# uitableview - 动态更新 UIProgressView 的进度

> ID：10531811
> 
> 赞同：0
> 
> 时间：2012-05-10T10:09:09.027
> 
> 标签：uitableview, ios-4.2, uiprogressview

以下是更新我的进度视图的场景。我的问题是我的最后一个进度条只会更新.....

1.  触摸时视图控制器有按钮，开始从 ftp 服务器下载。立即触摸时导航到另一个视图控制器，其中 uitableview 显示正在进行的不同下载。

2.  我将 UIProgressView 动态放入 UITableViewCell 中。

3.  我正在以这种方式实现它....

    -- // cellForRowAtIndexPath // 将进度视图添加到单元格

    ```
    progressBar = [[UIProgressView alloc] initWithProgressViewStyle:UIProgressViewStyleBar];
    progressBar.hidden=NO;
    progressBar.tag=123+indexPath.row;
    progressBar.frame = CGRectMake(250,170,350,25);
    progressBar.progress=0.0f; 
    ```

4.  像这样在 cellForRowAtIndexPath 的末尾更新progressview的进度......

    ```
     [NSTimer scheduledTimerWithTimeInterval:0.001f target:self selector:@selector(refreshProgress) userInfo:nil repeats:YES]; 
    ```

5.  // 刷新进度的实现......

    ```
     -(void)refreshProgress
        {

    UITableViewCell *cell=(UITableViewCell *)[tempArray objectAtIndex:1];
    NSString * int_index=[tempArray objectAtIndex:0];
    FTPManager *objFTPMgr = [[FTPManager alloc] init];
    int index1=[int_index intValue];
    UIProgressView *prgView=(UIProgressView *)[cell viewWithTag:index1];
    prgView.progress = [objFTPMgr putProgress];
    [objFTPMgr release];
    [prgView reloadInputViews];
        } 
    ```

    如果有人有解决方案，请写信给这个线程

Thnx in advnce Paggy 123

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:16:24.830

我不知道你有多少progresviews，但是使用refresProgress方法，你只调用tempArray[1]的单元格的进度视图；

您必须继承 UITableViewCell，并在其中使用 refreshProgresbar 创建一个方法。然后，您可以遍历当前单元格并进行刷新。

# java - 强制先执行代码的特定部分

> ID：10531812
> 
> 赞同：0
> 
> 时间：2012-05-10T10:09:14.487
> 
> 标签：java, android, textview

我得到了这个代码：

```
public void make_square(View v) {
TextView txt_wait = (TextView) findViewById(R.id.square_txt);
txt_wait.setText("wait...");
try{
//rest of the code (scanning a bitmap for pixels) 
```

" `make_square`" 是一个 onClick 事件（在 XML 文件中）。当我单击要更改文本时（`txt_wait`）

然后在更改之后，他必须执行其余的代码。但不知何故，它会等待其余的代码，然后当该代码完成时，他会更改`txt_wait`

我也尝试过这样的事情（也没有工作）：

```
public void make_square(View v) {
    TextView txt_wait = (TextView) findViewById(R.id.square_txt);
    txt_wait.setText("wait...");
    make_square2(v);
}
public void make_square2(View v){
    try{
    //rest of the code (scanning a bitmap for pixels)
    }
} 
```

但是现在，它首先`make_square2`在更改文本之前执行。为什么或如何解决这个问题？它`txt_wait`首先改变，然后改变它，然后是其余的代码？

已经谢谢了， Bigflow

**编辑1：**

试过这个：

```
public void make_square(final View v) {

    TextView txt_wait = (TextView) findViewById(R.id.square_txt);
    txt_wait.setText("wait...");
        new Thread() {
            public void run() {
                make_square2(v);
            }
        }.start();

}

public void make_square2(View v){   
   try{
      //rest of the code
   }
} 
```

它给了我这个错误：

```
E/AndroidRuntime(17487): android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 
```

我也试过这个：

```
 public void make_square(View v) {
        TextView txt_wait = (TextView) findViewById(R.id.square_txt);
        txt_wait.setText("wait...");
        make_square2(v);    
}

public void make_square2(View v)
        new Thread() {
            public void run() {
//rest of the code
}
        }.start(); 
```

这也给出了完全相同的错误。

我不熟悉线程使用，也许我做了一些非常糟糕的事情。希望你能再次帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:14:34.577

我认为您可以为 make_square2 方法中的代码创建一个单独的线程。然后文本将被更改...并且其余代码将在 UI 线程以外的线程中运行..这似乎阻塞了 UI 线程。 .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:32:59.053

我使用 AsyncTask 来完成这项工作，不知何故线程方法对我不起作用。

我使用了本教程： [http ://www.android10.org/index.php/forums/43-view-layout-a-resource/908-tutorial-progressbar-running-in-asynctask](http://www.android10.org/index.php/forums/43-view-layout-a-resource/908-tutorial-progressbar-running-in-asynctask)

感谢 AdilSoomro 和 JayeshPate。

# javascript - 主干视图监听模型事件

> ID：10531813
> 
> 赞同：0
> 
> 时间：2012-05-10T10:09:15.780
> 
> 标签：javascript, ajax, backbone.js, backbone-events, model-view

我在主干视图模型通信方面遇到问题，视图应该监听来自模型的事件，所以功能 couponReader 应该从模型中获取数据并在某种确认后添加到购物车。任何帮助表示赞赏

```
define([
'jquery',
'underscore',
'backbone',
'text!templates/menu/menu.html',
'text!templates/menu/cartItem.html',
'collections/cart',
'views/menu/topBar',
'models/coupon',
'swipe'

], 
function ($, _, Backbone, menuTemplate, cartItemTemplate, Cart, TopBarView, Coupon)  {

var slider;
var sliderPosition = 0;
var top;

var menuView = Backbone.View.extend({
    el:$("body"),

    events:{
        "click #keno50":"addKeno50",

    },

    initialize:function () {

        this.couponReader();
    },

    render:function () {
        this.el.html(menuTemplate);
        // TODO - Memory leak here :O
        new TopBarView({ el: this.$('#topBar') }).render();
        this.slider = new Swipe(document.getElementById('slider'), {startSlide:sliderPosition});
        this.resizeScreen();
        return this;
    },

    couponReader:function () {
        var coupon = new Coupon({   //problem here
            name: Coupon.getCoupon().name,
            price: Coupon.getCoupon().price
        });
        Cart.add(coupon);
    },

    addKeno50:function () {
        var keno50 = {
            name:"Keno",
            price:50
        }
        Cart.add(keno50);
        sliderPosition = this.slider.getPos();
        this.render();
    }

});
return new menuView;
}); 
```

模型类：它循环监听服务器，每当加载数据时从服务器获取数据。

```
define(['jquery', 'underscore', 'backbone'],
function ($,_, Backbone) {
    var Coupon = Backbone.Model.extend({
        initialize:function () {
           this.getCoupon(); //console.log("funkar*?");
        },
   getCoupon : function() {
        var XHR = this.getRequest();
    XHR.done(function(data){
        var keno10 = {
            name: data.description,
            price: parseInt(data.price)}

        var price = parseInt(data.price);
        var name = data.description;
        var status = data.ok;
    })
    },

    getRequest:function() {
        var fn = arguments.callee;
        var XHR = $.ajax({
            url: '/nextdocument',
            type: 'GET',
            async: true,
            cache: false,
            timeout: 11000, //vänta på svar från servern om ingen inläsning
            success:function(data) {
                var name = data.description;
                var price = data.price;
                console.log("read--> " + name + price);
                setTimeout(fn, 1000);
                if (data.ok == "true") {
                    data["ok"] = data.ok;
                    $.ajax(
                        {
                            url: "/customerdone",
                            data: JSON.stringify(data),
                            processData: false,
                            type: 'POST',
                            contentType: 'application/json'
                        }
                    )
                }else{
                    //no document if no read in
                    console.log("error--> " + data.errorMessage)
                }
            }
        })
        return XHR;
    }

    });
    return Coupon;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T05:19:07.160

我看到你的例子有几个问题。

1.  menuView 没有绑定到任何 Coupon 事件，所以如果 Coupon 派发一个事件，menuView 不会知道它。

2.  您可以为您的模型指定一个 URL，并让 Backbone 使用 fetch() 获取数据，而不是添加您自己的 Ajax 调用来获取数据。

    ```
    initialize: function () {
      this.coupon = new Coupon();
      this.coupon.bind('change', this.couponCreated, this);
      this.coupon.fetch();
    },
    couponCreated: function () {
      Cart.add(this.coupon);
    } 
    ```

3.  看起来您正在进行 3 次 ajax 调用以获取相同的数据。例如，在 menuView.couponReader() 中，您执行 new Coupon() 和 Coupon.getCoupon() 两次。这些中的每一个都会按照您配置的方式创建一个新的 Ajax 调用。

在您的示例中很难推断出您要尝试做什么。看起来您正试图在创建 menuView 时获取新的优惠券并将其添加到购物车。如果是这种情况，请考虑查看我之前谈到的 URL/fetch() 方法。您不需要监听事件，因为您可以通过回调来处理它。事实上，您遇到的问题可能是异步问题，您在 Ajax 调用返回数据之前将优惠券添加到购物车。

```
 couponReader: function () {
      var self = this
        , coupon = new Coupon();
      coupon.fetch({success: function (model, response) {
        Cart.add(model);
      });
    } 
```

或者，您可以执行不带回调的 fetch() 并侦听“更改”事件，而不是像我之前在 #2 中提到的那样。

注意：这两个示例都依赖于使用 Backbone 使用模型的 url 属性同步数据的机制。

# objective-c - 在目标 c 中导入标头

> ID：10531817
> 
> 赞同：8
> 
> 时间：2012-05-10T10:09:44.657
> 
> 标签：objective-c, ios, forward-declaration, build-time

在 Objective-c 中，当我们按照约定将一个类的对象用于另一个类时，我们应该在 .h 文件中转发声明该类，即`@class classname;`. 并且应该在 .m 文件中导入头文件，即`#import "header.h"`. 但是如果我们在 .h 中导入头文件，那么我们不必在 .m 文件中再次导入它。那么这个约定背后的原因是什么？哪种方式有效？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-10T10:16:47.023

> 那么这个约定背后的原因是什么？

`@class MONClass;`您应该在可能的情况下支持前向声明`#import`（依赖关系并增加构建时间。

> 哪种方式有效？

转发声明。如果您正确执行此操作，您的构建、重建和索引编制将会*快得多。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T10:13:13.360

您是正确的，在 .h 中导入标头会更容易（在短期内）。不这样做并将其导入实现文件 (.m) 的原因是为了防止名称污染，当有人导入您的标头时，导入标头中的所有名称都可用。相反，通过导入您的标头，只有您的函数/类应该被导入，其余的在实现中

此外，如果您在 .h 中导入标头，这意味着当第 3 方标头更改时，导入标头的每个代码都必须重新编译，即使您的标头中没有显式更改。前向声明避免了这个问题，并且只强制重新编译那些实际使用 3rd-party 标头的实现 (.m) 文件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T11:13:51.210

尽管在 .m 中导入文件可以更轻松地使用几行代码，但一般认为导入可能会影响加载时间和响应时间，是的，它确实会影响并且不会。因为根据苹果的文档：-

> 如果您担心包含主头文件可能会导致您的程序膨胀，请不要担心。因为 Mac OS X 接口是使用框架实现的，所以这些接口的代码驻留在动态共享库中，而不是在您的可执行文件中。此外，只有您的程序使用的代码在运行时才会加载到内存中，因此您的内存占用空间同样很小。
> 
> 至于编译时包含大量的头文件，再一次，不用担心。Xcode 提供了一个预编译头工具来加快编译时间。通过一次编译所有框架头文件，除非您添加新框架，否则无需重新编译头文件。同时，您可以使用包含的框架中的任何接口，而几乎没有或没有性能损失。

因此响应和加载时间仅在第一次受到影响，但无论如何，前向引用应该有利于维护编码标准并避免开销，无论多么小:)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T10:17:05.247

`#import`是在编译器看到文件之前对文件进行操作的预处理器指令。每当您感到困惑时，在概念上将其视为复制和粘贴：当您看到 时`#import foo`，意味着文件 foo 的内容被插入到该点。（它比这更聪明一点，因为它还可以防止重复包含）。

因此`#import Foo.h`，如果该引用`Bar.h`中有声明，您将在其中。如果没有使用 Foo 的内容，但有，则导入进入. 仅在需要的地方保留声明。`Bar.h``Foo.h``Bar.h``Bar.m``Bar.m`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-10T10:11:47.277

这只是说编译器我们有一个名为 xx 的类，如果你使用 @class xx;

因为您现在不需要它的属性/方法。

在下一种情况下，您还需要属性和方法，因为您必须访问它们。如果您在 .h 文件中使用 @class xx 并且不导入 xx.h，这就是问题所在。然后声明 xx 的对象不会产生错误，但访问它的方法会产生警告，访问属性会产生错误

# java - Java无法调用使用eclipse WindowBuilder构建的简单JDialog

> ID：10531819
> 
> 赞同：6
> 
> 时间：2012-05-10T10:09:57.777
> 
> 标签：java, swing, jdialog

我正在尝试使用 windowBuilder 制作自定义 JDialog，但一开始我遇到了一些问题。所以他们在这里：

我使用 windowBuilder 创建了简单的 Jdialog。这是代码：

```
public class GroupFrame extends JDialog {

    private final JPanel contentPanel = new JPanel();

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        try {
            GroupFrame dialog = new GroupFrame();
            dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
            dialog.setVisible(true);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the dialog.
     */
    public GroupFrame() {
        setBounds(100, 100, 450, 300);
        getContentPane().setLayout(new BorderLayout());
        contentPanel.setLayout(new FlowLayout());
        contentPanel.setBorder(new EmptyBorder(5, 5, 5, 5));
        getContentPane().add(contentPanel, BorderLayout.CENTER);
        {
            JPanel buttonPane = new JPanel();
            buttonPane.setLayout(new FlowLayout(FlowLayout.RIGHT));
            getContentPane().add(buttonPane, BorderLayout.SOUTH);
            {
                JButton okButton = new JButton("OK");
                okButton.setActionCommand("OK");
                buttonPane.add(okButton);
                getRootPane().setDefaultButton(okButton);
            }
            {
                JButton cancelButton = new JButton("Cancel");
                cancelButton.setActionCommand("Cancel");
                buttonPane.add(cancelButton);
            }
        }
    }

} 
```

但是后来我想将**public static void main(String[] args)更改为****public void show()**之类的东西。

新的 show() 方法代码是：

```
public void show() {
        try {
            GroupFrame dialog = new GroupFrame();
            dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
            dialog.setVisible(true);
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

因此，当我尝试使用以下代码调用此更改的方法时：

```
GroupFrame groupFrame = new GroupFrame();
groupFrame.show(); 
```

我有 StackOverflowError （多么巧合！;D）：

```
Exception in thread "AWT-EventQueue-0" java.lang.StackOverflowError
    at sun.awt.Win32GraphicsConfig.getBounds(Native Method)
    at sun.awt.Win32GraphicsConfig.getBounds(Unknown Source)
    at java.awt.Window.init(Unknown Source)
    at java.awt.Window.<init>(Unknown Source)
    at java.awt.Window.<init>(Unknown Source)
    at java.awt.Dialog.<init>(Unknown Source)
    at java.awt.Dialog.<init>(Unknown Source)
    at javax.swing.JDialog.<init>(Unknown Source)
    at javax.swing.JDialog.<init>(Unknown Source)
    at javax.swing.JDialog.<init>(Unknown Source)
    at UILayer.GroupFrame.<init>(GroupFrame.java:32)
    at UILayer.GroupFrame.show(GroupFrame.java:21)
    at java.awt.Component.show(Unknown Source)
    at java.awt.Component.setVisible(Unknown Source)
    at java.awt.Window.setVisible(Unknown Source)
    at java.awt.Dialog.setVisible(Unknown Source)
    at UILayer.GroupFrame.show(GroupFrame.java:23)
    at java.awt.Component.show(Unknown Source)
    at java.awt.Component.setVisible(Unknown Source)
    at java.awt.Window.setVisible(Unknown Source)
    at java.awt.Dialog.setVisible(Unknown Source)
    at UILayer.GroupFrame.show(GroupFrame.java:23)
    (etc...) 
```

有人可以指出我做错了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T10:25:08.153

您构造一个 GroupFrame，然后调用 show() 方法，该方法构造另一个 GroupFrame。这已经是错误的了。但这更错误，因为您调用`setVisible(true)`which 内部调用了`show()`您无意中覆盖的方法。

show 方法应该命名为其他名称，并且应该是静态的：

```
public static GroupFrame createAndShow() {
    GroupFrame dialog = new GroupFrame();
    dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
    dialog.setVisible(true);
} 
```

因此，此方法将被称为：

```
GroupFrame.createAndShow(); 
```

请不要抓住异常。当你这样做时，不要吞下异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T10:14:24.743

> 但是后来我想将 public static void main(String[] args) 更改为 public void show() 之类的东西。

您不能这样做，具有确切签名的 main 方法是 Java 程序的起点（对于大多数情况但不是全部）。

您需要的是一个单独的`show`方法，它将使您的对话框可见

编辑：

注意到你的类 extends `JDialog`，这意味着如果你再次定义 show ，你在技术上覆盖了存在的方法`Dialog`，而且 show 已被弃用。

从文档：

> 已弃用。从 JDK 版本 1.5 开始，由 setVisible(boolean) 取代。
> 
> 使对话框可见。如果对话框和/或其所有者尚未显示，则两者都可显示。该对话框将在可见之前进行验证。如果对话框已经可见，这会将对话框带到前面。如果对话框是模态的并且尚不可见，则此调用将不会返回，直到通过调用 hide 或 dispose 隐藏对话框。允许从事件调度线程显示模式对话框，因为工具包将确保另一个事件泵运行，而调用此方法的事件泵被阻塞。

而是使用这个：

```
public static void showMyDialog(){
    try {
         GroupFrame dialog = new GroupFrame();
         dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
         dialog.setVisible(true);
    } catch (Exception e) {
         e.printStackTrace();
    }
} 
```

并在您的主要方法中调用`showMyDialog`.

但是，如果您希望它作为**Java 应用程序**运行，则您的类中必须存在 main 方法，如果其他类要调用您的 show 方法，那么您的类中不需要存在 main 方法。

# c# - 如何在 WPF C# 中获取椭圆的位置？

> ID：10531828
> 
> 赞同：2
> 
> 时间：2012-05-10T10:10:44.060
> 
> 标签：c#, wpf, wpf-controls, ellipse

我正在创建一个泡泡游戏，屏幕上有很多泡泡在移动，当我用鼠标点击它时我想弹出一个泡泡。

我可以轻松获得鼠标的位置，但我不知道如何获得椭圆的位置以检查与鼠标点的交点。

关于如何获得椭圆位置的任何想法？！

我使用 Canvas 作为我的容器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T10:36:04.910

```
Canvas.GetTop(myEllipse);
Canvas.GetLeft(myEllipse); 
```

[如何使用鼠标位置在画布上设置椭圆位置](https://stackoverflow.com/questions/5690698/get-mouse-position-on-canvas-but-not-on-window)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T10:15:38.370

为什么不在椭圆本身上处理 PreviewMouseDown（和或 PreviewMouseUp），而不是尝试根据位置找到单击的椭圆？

# c# - 如何在c#中重载后缀和前缀运算符

> ID：10531829
> 
> 赞同：5
> 
> 时间：2012-05-10T10:10:46.293
> 
> 标签：c#

我们如何在 C# 中实现后缀和前缀运算符的重载

```
void Main()
{
    MyClass myclass=new MyClass();
    myclass.x=5;
    Console.WriteLine((++myclass).x);
          Console.WriteLine((myclass++).x);
}

public class MyClass
{
    public int x;
    public static MyClass operator ++(MyClass m)
    {
        m.x=m.x+1;
        return m;
    }

} 
```

这可能是不必要的运算符重载，但已知 ++ 运算符可以重载。我们如何在这里实现不同的行为（i++，++i）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:22:35.370

据我所见，在 C# 中重载一元运算符 ++ 会重载运算符的后缀和前缀版本。

来源： [http ://devhawk.net/2003/07/09/operator-overloading-in-c/](http://devhawk.net/2003/07/09/operator-overloading-in-c/) [http://www.programmingvideotutorials.com/csharp/csharp-operator-overloading](http://www.programmingvideotutorials.com/csharp/csharp-operator-overloading)

# javascript - 如何在javascript中获取下划线和点之间的文本

> ID：10531830
> 
> 赞同：0
> 
> 时间：2012-05-10T10:10:46.857
> 
> 标签：javascript

如果我有如下字符串：

```
1603202_15.jpg 
```

我想提取 和 之间的`_`文本`.`。请注意，字符串中可以包含任意数量的下划线，但其中只有一个点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:15:07.460

简单的字符串操作（假设`_`扩展中没有）：

```
var result = str.substring(str.lastIndexOf('_') + 1, str.lastIndexOf('.')); 
```

这假设您想要获取`_`之前的最后一个字符串`.`（您也可以使用`str.indexOf('.')`btw。）。如果要获取第一个之间的字符串*，* `_`只需使用即可`str.indexOf('_')`。

**参考**：[`substring`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring)，[`lastIndexOf`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/lastIndexOf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:12:43.487

```
var res = '1603202_15.jpg'.match(/_(\d+)\./)​​​​​​​​​;
console.log(res[1]);​ 
```

[http://jsfiddle.net/zerkms/cpQR3/](http://jsfiddle.net/zerkms/cpQR3/)

PS：您需要在访问其第二个元素之前检查是否`res`不是`null`

PPS：如果可能有*任何东西*，而不仅仅是数字，那么使用

```
var res = '1603202_15.jpg'.match(/_([^._]+)\./)​​​​​​​​​;
console.log(res[1]);​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:14:24.033

```
var result = txt.match( /_([a-zA-Z0-9+)\./ )[ 1 ] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T10:18:56.770

```
var str = "123_456_789.jpg";
var value = str.substring(str.lastIndexOf("_") + 1 , str.indexOf(".")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T11:02:36.733

```
var input='1603202_15.jpg';
var regex=/\_.*\./;
var result=regex.exec(input); 
```

会给你_15。然后删除 _ 和 . 获取内部字符串。

# visual-studio-2010 - VS 2010 中的 Crystal Reports - 条形图缺少组标题

> ID：10531831
> 
> 赞同：0
> 
> 时间：2012-05-10T10:10:59.070
> 
> 标签：visual-studio-2010, crystal-reports, bar-chart

我正在尝试为一组行数越来越多的数据创建一个堆积条形图。无论我对图表的格式做了什么（自动缩放、无自动缩放、我可以在任何地方设置的任何字体大小），x 轴上的一些最重要的组标题根本不会显示，从而呈现图表很没用。
有什么我可以做的吗
a）强制图表分成几页（它的显示使'x'轴是垂直的 - 希望这是有道理的）所以它可以以合理的方式缩放数据标题，或者
b ）让它以较小的字体大小打印数据标题（它似乎忽略了我在图表专家中手动设置的任何内容，无论我是否启用了自动缩放），以便更多内容可以放在图表旁边并实际与酒吧

我已经和这个报告争论了很长一段时间，似乎无法用谷歌搜索任何提到水晶这个问题的东西，只有访问或 sql 报告。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:40:12.637

如果您正在谈论跳过 x 轴标签并且仅显示每秒一个，则有一个设置。

右键单击图表的轴区域并转到组 (X) 轴设置。

取消选中“跳过组标签”。

那应该修复它并显示每个分组。您可能需要将它们调整为 90 度的旋转和较小的字体，以使它们以可读的方式显示。

# c# - 有没有办法可以结合这两个 LINQ 语句？

> ID：10531835
> 
> 赞同：1
> 
> 时间：2012-05-10T10:11:17.247
> 
> 标签：c#, .net, linq

我有以下内容：

```
var data = _cityRepository.GetAll(
    u => u.PartitionKey == pk & 
    u.RowKey.CompareTo(lowerBound) >= 0 & 
    u.RowKey.CompareTo(upperBound) < 0);

details =
    from d in data
    select new City.Grid
    {
        PartitionKey = d.PartitionKey,
        RowKey = d.RowKey,
        ShortTitle = d.ShortTitle,
        Created = d.Created,
        Modified = d.Modified,
        ModifiedBy = d.ModifiedBy
    };

detailsList = details
    .OrderBy(item => item.Modified)
    .Select((t, index) => new City.Grid()
    {
        PartitionKey = t.PartitionKey,
        RowKey = t.RowKey,
        Row = index + 1,
        ShortTitle = t.ShortTitle,
        Created = t.Created,
        Modified = t.Modified,
        ModifiedBy = t.ModifiedBy
    })
    .ToList(); 
```

对我来说，问题是我不确定如何组合第二个，因为它使用了这个：

```
Select((t, index) => new City.Grid() 
```

有没有办法可以将这些语句合并为一个，或者如果不可能，我可以将最后两个合并吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:17:38.987

当然 - 这很丑陋，但这三个都有：

```
var query = _cityRepository.GetAll(
                               u => u.PartitionKey == pk & 
                               u.RowKey.CompareTo(lowerBound) >= 0 & 
                               u.RowKey.CompareTo(upperBound) < 0)
                .Select(d => new City.Grid
                        {
                            PartitionKey = d.PartitionKey,
                            RowKey = d.RowKey,
                            ShortTitle = d.ShortTitle,
                            Created = d.Created,
                            Modified = d.Modified,
                            ModifiedBy = d.ModifiedBy                          
                        }
                .OrderBy(item => item.Modified)
                .Select((t, index) => new City.Grid()
                {
                    PartitionKey = t.PartitionKey,
                    RowKey = t.RowKey,
                    Row = index + 1,
                    ShortTitle = t.ShortTitle,
                    Created = t.Created,
                    Modified = t.Modified,
                    ModifiedBy = t.ModifiedBy
                })
                .ToList(); 
```

`City.Grid`避免两次创建新对象会更明智：

```
var query = _cityRepository.GetAll(
                               u => u.PartitionKey == pk & 
                               u.RowKey.CompareTo(lowerBound) >= 0 & 
                               u.RowKey.CompareTo(upperBound) < 0)
                .OrderBy(item => item.Modified)
                .Select((t, index) => new City.Grid()
                {
                    PartitionKey = t.PartitionKey,
                    RowKey = t.RowKey,
                    Row = index + 1,
                    ShortTitle = t.ShortTitle,
                    Created = t.Created,
                    Modified = t.Modified,
                    ModifiedBy = t.ModifiedBy
                })
                .ToList(); 
```

# web - 我应该继续分叉，还是维护一组补丁和一个 Makefile

> ID：10531836
> 
> 赞同：1
> 
> 时间：2012-05-10T10:11:18.977
> 
> 标签：web, makefile, fork, patch, code-organization

我编写并维护了一个拥有大约 1K 活跃用户的中型网站。

我使用 Ubuntu、Python、Django、jQuery、Less、twitter-bootstrap 等技术以及它们带来的所有依赖项。我有半吨的外部组件，比如我从 Internet 下载的 JS 库，还有一些我在 GitHub 上 fork 的项目，因为我需要更改。我安装的一些 Python 项目是`pip`.

我还对在线下载的 JS 库进行了更改，现在所有内容都在我的存储库中。分叉的项目在我的存储库中作为 git 子模块提供。

经过 1.5 年的发展，我意识到这是一种糟糕的方法。升级任何组件都可能非常混乱。我很难跟踪版本，而且我害怕升级单个组件（无论是我用 pip 安装的 python 包，还是 javascript 库，或其他东西），因为这可能会导致回归上帝知道在哪里。

昨晚我开始想，与其分叉诸如没有明天之类的东西，我应该维护一组补丁，通过 Makefile 应用。

我会更好吗？你觉得呢？你有没有什么想法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T04:34:08.860

我最近在这方面有一些经验。我一直在修改我们实验室使用的文件集，以便将文件移植到他们使用的语言的更新版本，但与此同时，其他人一直在定制他们自己的文件版本以满足他们的需求。所以我需要的是一种在他们的定制版本之上修补我的更改的方法。

我这样做的方式不是使用 git 或 Make（我每天都使用这两种方法），而是使用 OS X 的可视化 FileMerge 实用程序。我假设我的自定义代码和他们的代码之间的所有差异最初都默认为他们的代码，然后我会遍历所有更改，如果有任何属于我的自定义代码，我会将它们修补到他们的代码中。

它是手动的，但 OS X 的可视化 FileMerge 实用程序使其相对快速且轻松。相对轻松，我的意思是我可以用右手完成整个合并，永远不会离开四个箭头键，也永远不会使用鼠标。老实说，我不确定这种修补是否可以自动化。在进行合并时，我必须做出决定，我不确定是否可以轻松地留给某种自动修补系统。

也就是说，我对 git 的合并算法成功合并的一些东西感到惊讶。

这是一个很好的问题。谢谢你的帖子。而且我知道这不是一个明确的答案，但这些是我目前对此事的看法，因为它们的价值。

# c# - 系统找不到dll

> ID：10531838
> 
> 赞同：0
> 
> 时间：2012-05-10T10:11:21.657
> 
> 标签：c#, .net

我有一个名为 test 的 dll，在 test.dll 中，我引用了另一个名为 process 的 dll。现在，当我尝试加载 test.dll 时，我收到错误“系统找不到 process.dll。请帮助

```
Assembly u = Assembly.LoadFile(@"C:\test\test.dll");

        Type t = u.GetType("Test.Process");
        MethodInfo m = t.GetMethod("ProcessFile");

        try
        {
            object[] myparam = new object[1];
            myparam[0] = @"C:\test\testFile.csv";

            result = (string)m.Invoke(null, myparam);

            Console.WriteLine(result);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message.ToString());
            Console.WriteLine(ex.InnerException.ToString());
            System.Threading.Thread.Sleep(100000);
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T10:13:27.087

使用[`LoadFrom`](http://msdn.microsoft.com/en-us/library/1009fa28)而不是[`LoadFile`](http://msdn.microsoft.com/en-us/library/b61s44e8.aspx). 从[文档](http://msdn.microsoft.com/en-us/library/b61s44e8.aspx)中引用：

> 使用 LoadFile 方法加载和检查具有相同标识但位于不同路径中的程序集。LoadFile 不会将文件加载到 LoadFrom 上下文中，也不会像 LoadFrom 方法那样使用加载路径解析依赖关系。LoadFile 在这种有限的场景中很有用，因为 LoadFrom 不能用于加载具有相同身份但不同路径的程序集；它只会加载第一个这样的程序集。

```
Assembly u = Assembly.LoadFrom(@"C:\test\test.dll");
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T10:13:16.040

我怀疑你想要[`LoadFrom`](http://msdn.microsoft.com/en-us/library/1009fa28.aspx)而不是`LoadFile`在这种情况下。不同之处在于额外路径 ( `c:\test`) 将被添加到“加载自”上下文中，然后将用于依赖关系，例如`process.dll`.

目前，它试图在`process.dll`不考虑的情况下解决`c:\test`。阅读链接的文档以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:17:49.397

获取 test.dll 文件信息：

```
 FileInfo fileInfo = new FileInfo("test.dll"); 
```

并使用 fullName 加载程序集：

```
Assembly assem = Assembly.LoadFile(fileInfo.FullName); 
```

我希望它有所帮助。

# vba - 删除项目后删除回车

> ID：10531839
> 
> 赞同：2
> 
> 时间：2012-05-10T10:11:26.903
> 
> 标签：vba, ms-word

我正在以编程方式从目录中删除项目，但回车没有被删除，所以我收到了一个带有空格的目录。我的代码有一个片段：

```
For i = cntContentsFields To bngAppendixArray(1) step-1
    selection.Fields(i).Delete
Next 
```

我正在研究 2007 字以下是完整的代码：

```
On Error GoTo ErrHndl

    Dim i                   As Integer
    Dim iStep               As Integer
    Dim ipos                As Integer
    Dim ipos_2              As Integer
    Dim cntTables           As Integer
    Dim myFontSize          As Integer
    Dim cntWords            As Integer
    Dim cntEnglishWords     As Integer
    Dim cntContentsFields   As Integer
    Dim cntContentsSeif     As Integer
    Dim lneFeedPos          As Integer
    Dim strContents         As String
    Dim bgnAppendixArray()  As Integer
    Dim arrIndex            As Integer

    With ActiveDocument
        If .Range.LanguageID = wdEnglishUS Then
            gDocLang = wdEnglishUS
        Else
            gDocLang = wdHebrew
        End If
    End With

    If ActiveDocument.TablesOfContents.Count >= 1 Then
        ActiveDocument.TablesOfContents(1).Range.Select
        ActiveDocument.TablesOfContents(1).Update
    Else
        Selection.EndKey Unit:=wdLine
        Selection.TypeParagraph
        Selection.Range.Style = ActiveDocument.Styles(wdStyleNormal)
        Selection.ParagraphFormat.Alignment = wdAlignParagraphCenter
        myFontSize = Selection.Font.SizeBi + 1

        If gDocLang = wdEnglishUS Then
            Selection.Font.Size = 14
            Selection.TypeText Text:="Index"
        Else
            Selection.TypeText Text:="???? ????????"
        End If

        Selection.HomeKey Unit:=wdLine, Extend:=wdExtend
        Selection.Font.SizeBi = Selection.Font.SizeBi + 2
        Selection.Font.Bold = True
        Selection.Font.BoldBi = True
        Selection.EndKey Unit:=wdLine
        Selection.TypeParagraph
        Selection.Range.Style = ActiveDocument.Styles(wdStyleNormal)
        Selection.TypeParagraph
           With ActiveDocument
            .TablesOfContents.Add Range:=Selection.Range, RightAlignPageNumbers:= _
                   True, UseHeadingStyles:=True, UpperHeadingLevel:=1, _
                    LowerHeadingLevel:=1, IncludePageNumbers:=True, AddedStyles:="", _
                    UseHyperlinks:=True, HidePageNumbersInWeb:=True, UseOutlineLevels:= _
                    False
            .TablesOfContents(1).TabLeader = wdTabLeaderSpaces
        End With
    End If

    For cntTables = 1 To ActiveDocument.TablesOfContents.Count
        ActiveDocument.TablesOfContents(cntTables).Range.Select
        Selection.Range.Style = ActiveDocument.Styles("TOC 1")

        If gDocLang = wdEnglishUS Then Selection.LtrPara
    Next

    ActiveDocument.TablesOfContents(1).Range.Select
    cntContentsFields = Selection.Fields.Count
    iStep = 2
    arrIndex = 0
    cntContentsSeif = 0
    strContents = Selection.Fields(1).Result
    lneFeedPos = InStr(1, Selection.Fields(1).Result, Chr(13))
    Do While lneFeedPos > 0
        cntContentsSeif = cntContentsSeif + 1
        strContents = Mid(strContents, lneFeedPos + 1)
        lneFeedPos = InStr(1, strContents, Chr(13))
    Loop

    If cntContentsSeif * 2 <> cntContentsFields - 1 Then GoTo DocumentfromW2000

    For i = 4 To cntContentsFields - 1 Step 2
        iStep = i
        ipos = InStr(1, Selection.Fields(iStep).Result, Chr(46))
        ipos_2 = InStr(1, Selection.Fields(iStep - 2).Result, Chr(46))

        If ipos <= 1 Then
            MsgBox CONTENT_ERR_MSG, vbInformation
            GoTo DocumentfromW2000
        Else
            If Not IsNumeric(Mid(Selection.Fields(iStep).Result, 1, ipos - 1)) Then
                MsgBox CONTENT_ERR_MSG, vbInformation
                GoTo DocumentfromW2000
            End If
        End If

        On Error GoTo DocumentfromW2000

        If CInt(Mid(Selection.Fields(iStep).Result, 1, ipos - 1)) < CInt(Mid(Selection.Fields(iStep - 2).Result, 1, ipos_2 - 1)) Then
            ReDim Preserve bgnAppendixArray(arrIndex)
            bgnAppendixArray(arrIndex) = iStep
            arrIndex = arrIndex + 1
        End If
    Next

     If arrIndex > 1 Then
        For i = cntContentsFields To bgnAppendixArray(1) Step -1
            Selection.Expand wdSentence
            Selection.Fields(i).Delete
        Next
    End If

    If arrIndex > 0 Then
        For i = bgnAppendixArray(0) - 1 To 2 Step -1
        Selection.Expand wdSentence
            Selection.Fields(i).Delete
        Next
    End If
    Exit Sub
DocumentfromW2000:
    Exit Sub
ErrHndl:
    MsgBox "ERROR: " + CStr(Err.Number) + " - " + Err.DESCRIPTION, vbCritical 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:20:35.287

尝试：

```
Selection.Expand wdSentence 
```

在你删除之前。

# objective-c - 如何将视频文件上传到网络服务器 iphone sdk

> ID：10531842
> 
> 赞同：1
> 
> 时间：2012-05-10T10:11:45.373
> 
> 标签：objective-c

我正在尝试使用`UIImagePickerController`. 请建议我如何做或为此提供样本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:17:15.317

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info

```
{

NSURL *urlvideo = [info objectForKey:UIImagePickerControllerMediaURL];

//urlvideo contains the URL of that video file that has to be uploaded. Then convert the url into NSString type because setFile method requires NSString as a parameter

NSString *urlString=[urlvideo path];

NSLog(@"urlString=%@",urlString);
NSString *str = [NSString stringWithFormat:@"path of server"];

NSURL *url = [NSURL URLWithString:[str stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];

[request setFile:urlString forKey:@"key foruploadingFile"];

[request setRequestMethod:@"POST"];

[request setDelegate:self];

[request startSynchronous];

NSLog(@"responseStatusCode %i",[request responseStatusCode]);

NSLog(@"responseStatusCode %@",[request responseString]);

} 
```

# wordpress - 在 WP_Query 结果中排除空的 meta_key 值

> ID：10531846
> 
> 赞同：5
> 
> 时间：2012-05-10T10:11:55.840
> 
> 标签：wordpress, custom-post-type

我正在使用 WP_Query 提取一些这样的自定义帖子：

```
$params = array(            
        'post_type' => 'portfolio',
        'post_status' => 'publish',
        'posts_per_page' => 10,
        'meta_key' => 'slideorder',
        'orderby' => 'meta_value',
        'order' => 'ASC'
        'ignore_sticky_posts' => 1,
    );
$slport_query = new WP_Query($params); 
```

我面临的问题是，即使“slideorder”（字符串）为空，它也会包含在结果中。我如何只检索“meta_value”中至少有一个字符的帖子？

我试图添加：

```
'meta_value' => '',
'meta_compare' => '!=', 
```

但这没有帮助。有任何想法吗？

谢谢，本

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-10T10:25:14.613

好的...这是解决方案。似乎即使显然是空的 meta_values 也有或返回一个空格。所以这有效：

```
$params = array(
    'post_type' => 'portfolio',
    'post_status' => 'publish',
    'posts_per_page' => 10,
    'meta_key' => 'slideorder',
    'meta_value' => ' ',
    'meta_compare' => '!=',
    'ignore_sticky_posts' => 1,
    'orderby' => 'meta_value',
    'order' => 'ASC'
);
$slport_query = new WP_Query($params); 
```

# android - 如何通过 SVN 共享 netbeans 项目

> ID：10531851
> 
> 赞同：0
> 
> 时间：2012-05-10T10:12:30.677
> 
> 标签：android, svn, ide, netbeans-7

我目前正在尝试掌握 SVN 以及如何处理其中的项目。我们有几个 IDE 和项目类型，所以，我只想选择一个：Sharing a Netbeans-project for Android，我想知道，是否有办法不愚蠢地提交所有内容，而只提交那些文件，被编码和/或真正需要的项目才能被识别和运行，以便“开放项目”可以在签出的工作副本中工作？

感谢任何指针！问候， 马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T16:35:52.117

这个问题与通过外部工具处理 SVN 有关，在我的例子中，我们使用版本。正如我特别要求 Netbeans 一样，有一种解决方法。Netbeans 提供了一个集成的、简单的 SCN 客户端，并且足够强大，它可以自行确定要共享哪些文件。因此，这显然不适用于其他 IDE，但至少对于这里有问题的 IDE，它确实有效。

# c - 图书馆创建：标准解决方案？

> ID：10531852
> 
> 赞同：0
> 
> 时间：2012-05-10T10:12:32.703
> 
> 标签：c, architecture, standards

我想知道是否有一种标准方法来解决我面临的这种问题：

我正在用 C 编写一个库。该库将提供不同类型的函数，例如用特定类型的数据填充数组或使用这些数据进行计算的函数。

该库应该有助于解决特定问题，因此人们可能期望一开始创建的数据将用于以后进行计算。

因此，有一些数据应该在问题解决过程中“共享”（例如数组的大小或对计算有用的一些其他参数）。
我想避免将这些数据作为每个函数的参数（即将数组的大小传递给每个函数）。

我的想法是：

*   创建一组只能从库函数访问的静态全局变量。

*   为这些变量创建一个 setter/getter，定义一个自定义`enum`类型，该类型将用于处理要设置/获取的确切变量（即`set(kScaleFactor, 10)`）。

然而，正如我之前所说，是否有一种“标准”（或常用）方法来解决这个问题？我的方法可以考虑吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T10:39:37.853

许多图书馆对问题的每个“实例”都使用“句柄”的概念。这样，您可以同时打开多个句柄，并且不会干扰彼此的执行，即使调用是穿插的。

示例：C 的标准输入输出有`FILE`句柄，libcURL 有`CURL`句柄。

使用它们时的程序流程通常是这样的[我正在使用一个虚构的库`foo`]：

1.  `FOO handle = foo_init (...);`- 你得到一个`handle`特定于你的问题的。`FOO`通常是指向不透明结构的指针，该结构包含特定于您要解决的问题的特定“实例”的*所有信息。*库提供的所有*其他*`FOO handle`函数都带有一个参数，因此他们知道他们正在处理的问题的实例。如果`init`失败，你会得到一个`NULL`.

2.  `errorcode = foo_set_option (handle, OPTION,...);`- 然后设置一些特殊选项，了解库在解决问题时的行为方式。这可能是可选的。在内部，这可能会更改指向的结构`handle`以设置选项。

3.  `errorcode = foo_execute (handle);`- 你执行一个解决方案。

4.  您可能想通过调用另一个库函数来“阅读”解决方案。再次，`handle`是一个参数。

5.  `foo_cleanup (handle);`- 完成后，让库清理它分配的任何内部数据结构，并释放它占用的任何其他资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T10:23:49.967

库设计的标准方法是设计一堆数据结构并在它们上实现操作。如果你的库在矩阵上工作，你定义

```
typedef struct {
    double *contents;
    size_t ncolumns, nrows;
} Matrix; 
```

然后你在这个类型上添加了一堆有用的函数（只显示了原型）：

```
Matrix *make_matrix(size_t, size_t);
Matrix *matrix_multiply(Matrix const *, Matrix const *); 
```

请参阅 Pike[关于 C 编程的注释](http://www.lysator.liu.se/c/pikestyle.html)，复杂性规则 5：*数据占主导地位*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T10:18:11.147

您可以模拟面向对象的方法。X11 库通过使用指向指针来做到这`typedefs`一点`void *`。然后具有将对象作为第一个参数的函数，然后将其转换为库内部数据结构并使用它。

我觉得使用`static`会非常有限。

*这只是我的看法*

# mercurial - 解决 Windows 中的 Mercurial Case-Folding Collision

> ID：10531853
> 
> 赞同：31
> 
> 时间：2012-05-10T10:12:34.823
> 
> 标签：mercurial

我在 StackOverflow 上看到了其他 Mercurial case-folding Answers - 他们说，如果您可以访问像 unix 这样的区分大小写的文件系统，那么请在那里查看并修复它。问题是，我无法访问 unix 机器，我是一名开发 Windows 应用程序的 Windows 开发人员。

我如何在没有 Unix 机器的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-10T11:29:49.580

正在处理的`filesystem`帮助主题将包含在 Mercurial 的下一版本中：

[https://www.mercurial-scm.org/pipermail/mercurial-devel/2012-April/039522.html](https://www.mercurial-scm.org/pipermail/mercurial-devel/2012-April/039522.html)

> **重命名冲突文件**
> 
> 在不区分大小写的文件系统上，更新到包含大小写冲突文件的修订版将中止，即使使用 `--check`or `--clean`。
> 
> 要修复此类修订，您应该为区分大小写的文件系统上的一个或两个冲突文件指定新名称，并提交它们以创建新的冲突安全修订。
> 
> .. 注意:: 如果您想（或需要）在不区分大小写的文件系统上浏览或修复此类修订，请参阅“手动更新”部分。
> 
> 如果 :hg:`merge`被中止，但 :hg:`update --check`对每个修订成功，则在要合并的修订之间发生冲突。
> 
> 在这种情况下，应重命名其中一个或两个中的文件以避免在合并之前发生冲突。
> 
> 使用最近的 Mercurial，您可以通过以下步骤安全地更改文件名的大小写，即使在不区分大小写的文件系统上：
> 
> ```
> $ hg rename a.txt tmp
> $ hg rename tmp A.TXT 
> ```
> 
> **手动更新**
> 
> 如果您想（或需要）通过在不区分大小写的文件系统上导致大小写冲突的修订来更新工作目录，例如重命名冲突文件或浏览此类修订中的内容，请参阅下面的 Wiki 页面：：
> 
> [https://www.mercurial-scm.org/wiki/ManualCheckout](https://www.mercurial-scm.org/wiki/ManualCheckout)
> 
> 对于非专业 Mercurial 用户，不建议这样做。

此处描述了另一种类似的手动方法：

[https://www.mercurial-scm.org/wiki/FixingCaseCollisions](https://www.mercurial-scm.org/wiki/FixingCaseCollisions)

不过，这也会深入到 Mercurial 内部，因此除非万不得已，否则您应该避免使用它。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-03T15:06:17.207

我们通过发出 HG 重命名命令解决了这个问题，而无需使用区分大小写的文件系统。假设您遇到了麻烦，因为“Foo.txt”需要被称为“foo.txt”：

```
hg rename Foo.txt Foo.txt.renamed
hg rename Foo.txt.renamed foo.txt 
```

当一个文件被删除然后在主存储库中重新创建时，我们遇到了这个问题，名称相同，但大小写不同。尽管已从主存储库中提取了变更集，但无法合并在这些更改之前创建的分支存储库。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T10:30:17.423

为了在 Windows 上解决案例折叠问题，我猜你在 repo 的不同分支或头部有不同的案例，合并时它会成为一个问题。我看不出（在 Windows 上）你实际上会如何在同一个版本中得到两个不同的情况，而无需通过 unix 框。

因此，如果它们处于不同的修订版中，那么您可以执行以下操作：

```
hg update <some rev>
hg remove -A -f "Some File" 
```

那么合并就会成功。-A 表示“之后”，-f 表示“强制”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-13T14:35:10.850

这是 Windows 中不使用*区分大小写的*文件系统的常见问题。如果要使用已`TortoiseHg Workbench`安装的文件执行此操作，请搜索文件并重命名：

右键单击/TortoiseHg/重命名文件

它会将文件重命名为您想要的正确区分大小写的名称。下一张照片显示了我是如何改变`XMLConverter`的`XmlConverter`

![在此处输入图像描述](../Images/1a0a804dd9482a549742ddc4a9f83876.png)

然后在 Workbench 中，您可以提交文件更改：

![在此处输入图像描述](../Images/a11324f873245db693c77b08bce7bf2e.png)

> 这是一周后更新的

提出的解决方案可能会给您以后从另一台 PC 更新整个存储库带来问题。因此，解决它的最终方法可能是进行 2 次提交：

1.  一种用于将具有不需要的名称的文件重命名为某个临时名称。例如：*XMLConverter2*
2.  另一个用于将临时文件重命名为新名称。例如：*XmlConverter*

所以它变成了这样：

![将临时文件重命名为新名称](../Images/8433bca137f4a60a0f30b86ec17739dd.png)

这实际上是它不再在 Windows 中产生冲突的方式。它看起来很丑，但很有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-12T14:38:02.023

如果您使用的是 Bitbucket.org，您可以浏览问题分支上的源代码，转到文件，通过编辑单击下拉菜单，重命名文件（或在我们的例子中重命名目录）提交这些更改并拉取。

感谢 Bitbucket 团队！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-27T14:14:22.807

我以更简单的方式解决了：

1.  项目清单
2.  剪切重命名的文件夹文件并将其粘贴到临时位置（即桌面）
3.  提交“ *R* ”更改
4.  再次粘贴文件夹
5.  提交“ *？* ”状态

真正导致问题的原因是尝试同时创建和删除在不区分大小写的系统中可能相同的文件/文件夹。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-16T19:05:59.327

我遇到了这个问题，但不能选择使用 *nix 系统。我能够按照[这些说明](https://www.mercurial-scm.org/wiki/FixingCaseCollisions)解决它。

* * *

在 Windows 上，目前（在 Mercurial 1.1 之前）可能会在存储库中引入大小写冲突，从而阻止您检出存储库。

修复此类存储库的一种方法是在区分大小写的 Unix 系统上检查它，删除有问题的文件，然后再次提交。

如果这不可能，您可以执行以下操作：

```
hg clone --noupdate repo repair
cd repair
hg debugsetparents <bad revision>
hg debugrebuildstate 
```

此时，Mercurial 会认为您已签出错误的修订版并且所有文件都丢失了（状态为“！”）。要修复 repo，我们只需要做：

```
hg remove --after <file causing the collision> 
```

现在 hg status 应该显示状态为“R”的麻烦文件和状态为“！”的所有其他文件。现在我们可以检查我们的修复：

```
hg commit --message "fix case collision" 
```

要取回我们所有的文件，我们只需再次签出：

```
hg update tip 
```

参考：[https ://www.mercurial-scm.org/pipermail/mercurial/2008-June/019921.html](https://www.mercurial-scm.org/pipermail/mercurial/2008-June/019921.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-11T09:27:23.747

我知道这是一个老问题，但这对我有用，我希望它对某人有用。在我的情况下，我有一个旧版仓库，其中有一个需要关闭的旧分支。

我曾经使用 Windows 10 的 Windows bash shell 来解决这个问题`lxrun /install`，然后在设置时我安装了 mercurial`sudo apt-get install mercurial`这将使您可以通过 mnt 文件夹访问您的文件系统，并且您可以从命令行使用 mercurial。

就我而言，我可以轻松地更新到有问题的分支并关闭它。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-05-07T15:59:38.897

正如 Laurens Holst 所说，重命名通过临时文件系统的文件夹/文件对我有用。

```
$ hg rename a.txt tmp
$ hg rename tmp A.TXT 
```

但是为了使它工作，并避免在合并过程中发生冲突文件错误，我必须在重命名后清除

# iphone - 检查一个单词是否在数据库中

> ID：10531854
> 
> 赞同：-1
> 
> 时间：2012-05-10T10:12:39.617
> 
> 标签：iphone, objective-c, ios, xcode

我正在制作这个文字游戏，当您提交一个单词时，我希望检查该单词是否在我的“数据库”中，例如，我设置了几个单词

```
word1: banana
word2: apple
word3: pineapple
word4: lemon 
```

现在我可以通过代码做到这一点：

```
If (submitword isequalto banana){
//submitword
}
else if (submitword isequalto apple){
//submitword
}

else{
//give warning
} 
```

问题是我得到了数千个单词，而“submitword”操作长达数百行，这会使我的代码变得很长。

有人知道更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:22:09.253

这取决于您使用的是哪种“数据库”。例如，如果您使用的是外部 API（就像许多当前的单词应用程序一样），它可以为您决定它是否正确。然后，您可以使用 MySQL 或任何其他类型的 SQL 服务器，并使用 SQL 提出一些智能问题。

我的想法是你需要先写下你想做什么，然后研究最好的方法，然后开始实现代码。设计第一原则！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:21:09.453

我建议您在游戏开始之前将数据库中的单词列表提取到容器对象（Say `NSDictionary`）中，然后检查该列表中是否存在单词

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:20:44.367

您可以编写一个函数来检查单词是否有效，然后在确定后提交。为此，您也许可以将您的单词存储在某个列表中，这会将功能简化为单个列表查找

# gcc - 使用 avr-gcc 编写汇编代码

> ID：10531858
> 
> 赞同：2
> 
> 时间：2012-05-10T10:12:58.743
> 
> 标签：gcc, embedded, arduino, avr, gnu-assembler

我最近买了一个 Arduino Uno，它基本上是一个 atMega328 avr 处理器，具有所有细节，例如 I/O 和与计算机的连接，为您处理。

我已经使用 Arduino IDE 和 avr-gcc 集合成功编写了代码。但是，我想为它编写纯汇编代码，但我遇到了死胡同，因为似乎几乎没有关于这方面的文档。也就是说，我想编写“纯”程序集，没有内联 c 程序集等。我想要这样做的说明，如果可能的话，一个示例程序（gcc-avr 的程序集输出没有那么有用，正在**难以理解**和所有）。
尤其是：

*   如何指示 avr-as 将该代码放入例如中断向量中？
*   有哪些指令可用？
*   .data 和 .bss 部分在哪里？

感谢您指出适当的示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:05:58.647

我能找到的最好的文档是[avr-gcc 汇编器教程](http://www.nongnu.org/avr-libc/user-manual/assembler.html)。这解释了：

*   可以使用 avr-libc 使用中断向量。为了在没有外部库的情况下执行此操作，可以参考源代码，正如 Brett Hale 建议的那样。

*   它提到了特定于 avr 的指令。

它还附带一个简单的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T10:38:58.917

我建议你看看[avr-libc](http://download.savannah.gnu.org/releases/avr-libc/avr-libc-1.8.0.tar.bz2)库。不要让名字误导你。其中大部分是高度优化的 AVR 汇编器，带有链接器脚本、低级硬件访问等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T00:33:12.923

[http://www.cs.nmsu.edu/~jcook/arduino/index.php](http://www.cs.nmsu.edu/~jcook/arduino/index.php)上的 Arduino Wiki 提供了一种方法来做到这一点。它需要修改和重建 Arduino IDE 以允许使用汇编代码（.s 文件）。

# android - 为什么 Record 没有从 android 的 sqlite 数据库中删除

> ID：10531860
> 
> 赞同：1
> 
> 时间：2012-05-10T10:13:00.223
> 
> 标签：android

**这是我的按钮代码，当我按下 del 按钮时，它显示数据没有被删除我认为我的代码是 100% 正确的，然后它正在发生 **

```
btndel.setOnClickListener(new View.OnClickListener() {

public void onClick(View v) {
    try 
    {       
        long num=Long.parseLong(regno.getText().toString());        
        dba.open();
        Boolean check = dba.deleterec(num);
        if (check == true) {
            Toast.makeText(getBaseContext(), "Record Deleted", Toast.LENGTH_LONG).show();
            xmlc.delete(num);
        } else {
            Toast.makeText(getBaseContext(), "Record Not Deleted"Toast.LENGTH_LONG).show();
        }
        dba.close();
    } catch (Exception e) {
    e.printStackTrace();
    }
}

}); 
```

**这是我的数据删除方法**

```
public boolean deleterec(long regno) throws Exception
{
    System.out.println("&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&NO for delting of Record"+regno);
    return db.delete(Database_table,KEY_RegNo+"="+regno,null)>0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:19:58.907

我认为您只是从数据库中删除该行...但您还应该刷新视图，以便您在数据库中所做的更改将显示效果...就像..如果您使用列表视图来显示...然后打电话

```
adapter.notifyDataSetChanged() 
```

这个方法之后

```
 xmlc.delete(num); 
```

这使得列表视图具有新数据...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:29:56.517

确保`KEY_RegNo`与您的列名相同。您还确定要删除的记录存在于数据库中吗？

# java - 泛型代码错误

> ID：10531861
> 
> 赞同：2
> 
> 时间：2012-05-10T10:13:05.793
> 
> 标签：java, generics

为什么下面的代码会给出编译时错误。

```
 Map<String,? extends Object> inputMap = 
                 new HashMap<String, ? extends Object>(); 
```

编译时错误。

> 无法实例化类型`HashMap<String,? extends Object>`

我想要一个以字符串为键并以任何对象为值的映射

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T10:15:29.320

这是因为您需要*指定*`HashMap`应该包含的值的类型。基本上，实例化类时不能使用通配符。

不过，这很好用：

```
Map<String, ? extends Object> inputMap = new HashMap<String, Object>(); 
```

但是，说`?`应该扩展`Object`有点多余，因为一切都扩展了对象（您当然可能有其他东西而不是`Object`真实代码）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T10:15:36.307

`?`并不意味着“采取任何对象”。它的意思是“取一个特定类型的对象，碰巧是未知的”，这在实际创建容器时没有意义。

试试这个：

```
 Map<String,Object> inputMap = new HashMap<String,Object>(); 
```

# css - 有什么方法可以检测浏览器中的 html 功能可用性

> ID：10531862
> 
> 赞同：1
> 
> 时间：2012-05-10T10:13:11.203
> 
> 标签：css, html, modernizr

如果浏览器上提供以下 html5 或 css 3 功能，是否有任何方法可以在 javascript 中检测。

例如，我有一个属性：占位符，

```
<input type="text" placeholder="type your email address" /> 
```

我设置了一个javascript函数，如果浏览器不支持占位符属性，它将设置一个手动占位符

* * *

如果我使用 Modernizr，会这样做：

```
if ( Modernizr.testProp('placeholder') )
// add attribute placeholder
else
// assign a keypress event as placefolder 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T11:03:37.640

在这样一个简单的情况下，您可以直接执行操作，而无需涉及 Modernizr：

```
<input type="text" placeholder="type your email address" 
  id="email">
<script>    
var email = document.getElementById('email');
if(!('placeholder' in email)) {
  email.value = email.getAttribute('placeholder');
  email.onfocus = function () { this.value = ''; };
}
</script> 
```

在这种方法中，`placeholder`属性出现在静态 HTML 标记中。不支持时没有害处；事实上，它甚至在不受支持时也很有用。

关键是，当`placeholder`支持时，元素节点存在具有该名称的属性。即使不支持，浏览器也会对其进行解析和存储，以便您可以获取它`getAttribute()`并将值分配给`value`属性，使其显示为初始内容。

代码在聚焦时清除该字段。这听起来比单击时清除它要好，因为用户在输入部分数据后可能出于多种原因单击该字段。

PS 为了可用性、可访问性和简单性，最好为每个输入字段使用可见标签，而不是使用占位符。所以这不是一个好的用例。但是同样的技术也可以用在一个非常简单的搜索表单中，站点通常作为站点导航系统的一部分。在那里，将表单压缩到非常小的尺寸，省略标签是有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T10:25:59.440

使用[Modernizr](http://modernizr.com/)满足您所有的特征检测需求

# html - 谷歌地图地点标记

> ID：10531873
> 
> 赞同：-1
> 
> 时间：2012-05-10T10:13:37.290
> 
> 标签：html, google-maps, google-api

这是我当前的代码：http: [//virtual.weltec.ac.nz/s13/Site/fireservice.html](http://virtual.weltec.ac.nz/s13/Site/fireservice.html)

此页面加载带有两个标记的嵌入式谷歌地图，并在按下按钮时跟踪它们之间的路线。

我的问题是：我正在编写一些代码，可以通过一个简单的函数重新定位标记。最好使用两个新地点的名称，或者如果没有，则使用坐标。

我可以帮忙吗？

谢谢

编辑

我创建了这个函数：

```
function setnewMarker(){
doStart(-41,174);
doEnd(-43,182); 
```

}

然而它不起作用。我可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:23:22.603

怎么样：

```
var newPosition = new google.maps.LatLng(1, 0); 
marker.setPosition(position); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:21:26.913

您可以删除以前`marker`的并在新位置创建一个新的。要[删除标记](https://developers.google.com/maps/documentation/javascript/overlays#RemovingOverlays)，您只需调用`marker.setMap(null);`，`marker`标记的名称在哪里。

# makefile - 具有远程 (AWS S3) 目标的 Makefile

> ID：10531878
> 
> 赞同：2
> 
> 时间：2012-05-10T10:14:09.583
> 
> 标签：makefile, amazon-s3, mapreduce

我想创建一个生成文件，其中目标和依赖项不是本地文件，而是存在于某个 AWS/S3 存储桶中。

考虑以下示例，该示例只需将“data_raw”文件复制到“obj1”然后“obj2”（您需要将“bucket”编辑到您拥有的某个存储桶并在运行之前创建一些“data_raw”文件）：

```
# local, works fine
bucket = /tmp/test/
cp = cp

# remote, does not work
bucket = s3://bucket/test/
cp = s3cmd cp

all : $(bucket)obj2

$(bucket)obj2 : $(bucket)obj1
    $(cp) $(bucket)obj1 $(bucket)obj2

$(bucket)obj1 :
    $(cp) $(bucket)raw_data $(bucket)obj1 
```

我得到的错误是：

```
makefile:9: *** target pattern contains no `%'.  Stop. 
```

这是为了：

```
all : $(bucket)obj2 
```

我怀疑 make 根本不理解远程 URI（“s3://xxx”）。

我能找到的所有示例/文档似乎都隐含地引用了目标和依赖项的本地文件。广泛的谷歌搜索只产生了一些关于为 s3 ( [http://code.google.com/p/awstasks/](http://code.google.com/p/awstasks/) ) 创建 ant 任务的看似未完成的想法。

这是在 Python 中运行多个复杂/错综复杂的 MapReduce 作业的上下文中。

我宁愿使用 GNU make，但肯定会考虑替代方案。

我总是可以为远程目标创建一些轻量级的本地镜像，但肯定有更好的方法吗？

提前致谢！

网卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:54:37.470

一种可行的解决方法是在本地安装 S3 存储桶。

在 Linux 上，可能可以使用fuse/ [s3fs 。](http://code.google.com/p/s3fs/)这可能也适用于 MacOS，但安装起来似乎很麻烦。我转而使用商业软件[传输](http://panic.com/transmit/)（单击“安装为磁盘”）。有了这个，上面的例子对我来说是有用的：

```
bucket = /Volumes/s3.amazonaws.com/bucket/test/
cp = cp 
```

在此示例中，我们使用“cp”，因为“s3cmd cp”拒绝本地 uri。在（我的）现实生活示例中，该命令将被一些需要实际 s3 输入/输出 uris 的 python map-reduce 脚本替换。

为了保持整洁，本地安装的文件（用于 Make 测试存在/最新性）可能应该有一个前缀变量（“/Volumes/s3.amazonaws.com/”）和一个前缀变量（ "s3://") 用于构建命令指向实际数据（数据将由 EC2 实例通过 mapreduce 处理，我们绝对不想在本地下载所有内容）。

请记住，S3 只是最终一致的。还要确保为了测试存在和最新性，整个文件不会在本地下载（在这种情况下应该使用一些虚拟文件）。

希望有帮助。

如果有人有更直接的方法（没有本地安装），我很感兴趣。

网卡

# iphone - 应用程序在不从 Xcode 运行时崩溃，但在从 Xcode 运行时工作正常

> ID：10531883
> 
> 赞同：5
> 
> 时间：2012-05-10T10:14:20.257
> 
> 标签：iphone, ios, xcode

我有这个奇怪的问题。当我从 Xcode（甚至在设备上）运行应用程序时，它运行良好，没有任何崩溃。但是当我在没有 Xcode 的设备上运行它时，当我从一个 viewController 导航回来时它会崩溃。我无法获得崩溃的原因，因为我无法使用日志。以前有人经历过吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-10-27T17:20:43.430

我最近在将 MKMapView 添加到情节提要后遇到了这种情况。当设备连接到 Xcode 时它运行完美，但在未连接到计算机的情况下运行时崩溃。

我犯的错误是没有检查嵌入式框架。应用程序试图在没有导入 MapKit 框架的情况下加载 MKMapView。

但是，诊断此问题的最佳方法是检查您正在使用的设备上的崩溃日志，您将更好地了解导致它的原因

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:22:54.293

> 我无法获得崩溃的原因，因为我无法使用日志。

打开 Xcode 管理器窗口，每个设备都有一个名为“设备日志”的部分。每次应用程序崩溃时都会生成崩溃日志。如果您查看控制台，您还将看到您使用`NSLog`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:20:08.787

查看发生了什么的解决方案可能是下载[此应用程序](http://itunes.apple.com/us/app/console/id317676250?mt=8)并查看日志/警告。或者只需打开管理器并查看设备的控制台。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-29T05:13:03.487

有时，当您的任何 UI 元素或任何其他实例被自动释放时，会发生“分段错误”。您可以让僵尸注意您的分配/解除分配。您还可以使用“Instruments”（“分配”模板）工具查看对象的分配/解除分配/保留/释放，它会在分配点为您提供回溯。
很有可能您的任何 UI 元素实例都没有被保留。
如果您也可以发布设备日志，那将会更有帮助。

# c - 用C写一个JPG图像文件

> ID：10531884
> 
> 赞同：3
> 
> 时间：2012-05-10T10:14:21.827
> 
> 标签：c, image, image-processing, jpeg, file-handling

我读取 JPEG 图像文件并将其位存储到文本文件中。现在我想使用文本文件中的这些位转换回有效的 JPEG 图像。我试过写一个二进制文件，但它没有检索到图像文件。

请引导我走向正确的方向。这几天我一直在努力解决这个问题，但到目前为止还没有运气。

这是我编写 JPG 文件的代码：

```
int length;
unsigned char *inData;  
char Buffer[9];
int c = 0, x;
/* file.txt has single bit per line. */
FILE *reader = fopen(file.txt, "r"); 
FILE *writer = fopen("output.JPG","wb");

fseek(reader, 0, SEEK_END);
length=ftell(reader);
fseek(reader, 0, SEEK_SET);

for(x=0; x < length; x++){
    fscanf(reader, "%d", &inData);
    if(c <= 8){       /*  reading 8-bits  */
        Buffer[c] = inData;
    } else {
        fwrite(&Buffer, sizeof(Buffer), 1, writer);
        c = 0;
    }
    c++;
}

fclose(reader);
fclose(writer); 
```

这是读取 input.JPG 并将其位写入 file.txt 的代码片段

```
 char *buffer;
int fileLen;
FILE *file = fopen("inputIM.JPG", "rb");

fseek(file, 0, SEEK_END);
fileLen=ftell(file);
fseek(file, 0, SEEK_SET);

buffer=(char *)malloc(fileLen+1);
fread(buffer, fileLen, 1, file);
fclose(file);
convertToBit(&buffer, fileLen);
free(buffer);
}

// convert buffer data to bits and write them to a text file   
convertToBit(void *buffer, int length)
{
int c=0;
int SIZE = length * 8;
unsigned char bits[SIZE + 1];
unsigned char mask = 1;
unsigned char byte ;
int i = 0;
FILE *bitWRT = fopen("file.txt", "w");

for (c=0;c<length;c++)
{
    byte = ((char *)&buffer)[c];

    for(i = 0; i < 8; i++){
        bits[i] = (byte >> i) & mask;
        fprintf(bitWRT, "%d\n", bits[i]);
    }
}
fclose(bitWRT);
} 
```

谢谢，

-山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:25:15.177

尝试如下重写（请注意，这是一个非常幼稚且未经测试的实现）：

```
FILE* pInput = fopen("file.txt", "r"); 
FILE* pOutput = fopen("output.JPG","wb");

unsigned char index = 0, byte = 0;
char line[32]; // Arbitrary, few characters should be enough
while (fgets(line, sizeof(line), pInput))
{
    if (line[0] == '1')
        byte = (unsigned char)(byte | (1 << index));

    if (++index == 8)
    {
        fwrite(&byte, 1, 1, pOutput);

        index = 0;
        byte = 0;
    }
}

fclose(pInput);
fclose(pOutput); 
```

假设：输入文件的每一**行**都是原始文件的一个**位**（这意味着，例如，如果原始文件是 1024 字节，那么文本文件中将有 1024 * 8 = 8192 行）。请注意，由于行终止符和（可能）不同的编码，文件的总长度会更大（至少加倍）。

**编辑** 要写你可以使用这样的东西：

```
void convertToBit(void* pBuffer, size_t length)
{
    FILE* pOutput = fopen("file.txt", "w");
    for (size_t i=0; i < length; ++i)
    {
        unsigned char byte = (unsigned char)pBuffer[i];
        for (int bitIndex=0; bitIndex < 8; ++bitIndex)
        {
            if ((byte & (1 << bitIndex)) != 0)
                fputs("1\n", pOutput);
            else
                fputs("0\n", pOutput);
        }
    }

    fclose(pOutput);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-13T01:39:44.037

必须考虑一件重要的事情，每个文件在开头都有一个页眉，最后有一个页脚。jpeg 标头是 FF D8，因此如果您只是写入文件，则可能会损坏此标头，并且文件将被损坏。

另一个重要的事情是，如果你想读取一个 imagem 文件，你有没有尝试过使用 fread()/fwrite 以二进制模式来做到这一点，而不是尝试使用最初设计用于读/写字符的函数来读取它的内容？（我不知道，也许我在这里说一些愚蠢的话，但我会试一试）

对不起，我的英语不好顺便说一句......

# api - 通过 Api 洞察

> ID：10531887
> 
> 赞同：0
> 
> 时间：2012-05-10T10:14:29.223
> 
> 标签：api, facebook-graph-api, facebook-fql, facebook-insights

我正在通过 API 使用洞察力指标。但是对于所有与帖子相关的指标，我没有任何结果：

```
https://graph.facebook.com/[page_id]/insights/post_stories
https://graph.facebook.com/[page_id]/insights/post_impressions
https://graph.facebook.com/[page_id]/insights/post_storytellers 
```

等等。我尝试使用 FQL 也没有任何结果。在 xls 中通过 Insight 面板提取这些数据时，我可以读取该值。但我希望他们通过 API。有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:52:07.050

I don't know if you have find an answer, but having done the same, I believe you must use the post id since each page post has each own stories created and impressions etc .

So , `https://graph.facebook.com/[page_post_id]/insights/post_stories` , would work.

# mdx - MDX 年初至今比较 订购

> ID：10531891
> 
> 赞同：1
> 
> 时间：2012-05-10T10:14:44.073
> 
> 标签：mdx

我对 MDX 很陌生，无法弄清楚如何订购以下 MDX 查询...

```
WITH 
MEMBER Measures.YTD2010 as 'Aggregate(YTD(Date.CurrentMember), Measures.Value)' 
MEMBER Measures.YTD2009 as 'Aggregate(YTD(ParallelPeriod(Date.Year, 1, Date.CurrentMember)), Measures.Value)' 

SELECT { 
[Measures].YTD2009, 
[Measures].YTD2010 
} ON COLUMNS, 

Order({ [Entity].[Name].Members }, [Measures].YTD2010, DESC) ON ROWS 
FROM [Carbon] 
WHERE [Date].[Year].[2010] 
```

如您所见，我想订购度量“YTD2010”

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T00:57:55.357

尝试将您的订单更改为以下内容：

```
Order({ [Entity].[Name].Members }, [Measures].YTD2010, BDESC) ON ROWS 
```

区别在于 BDESC 而不是 DESC。BDESC 告诉它打破层次结构。

# c# - 如何使用 C# 以编程方式清除 Adob e 阅读器历史记录

> ID：10531894
> 
> 赞同：1
> 
> 时间：2012-05-10T10:14:51.973
> 
> 标签：c#

我需要使用 C# 在我的 Windows 应用程序中从 Adob​​e 阅读器中清除最近打开的文档历史记录。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:17:38.247

清除此注册表配置单元

```
[-HKEY_CURRENT_USER\Software\Adobe\Acrobat Reader\10.0\AVGeneral\cRecentFiles]

var registrykeyHKLM = Registry.CurrentUser;
string keyPath = @"Software\Adobe\Acrobat Reader\10.0\AVGeneral\cRecentFiles";
registrykeyHKLM.DeleteValue(keyPath);
registrykeyHKLM.Close(); 
```

# c# - 启动进程时出现错误 C0000142

> ID：10531895
> 
> 赞同：4
> 
> 时间：2012-05-10T10:14:56.260
> 
> 标签：c#, windows, security, process

我正在尝试在不同的帐户下启动一个进程（设置 StartInfo.UserName/Password）。

这在交互式运行时有效，但在尝试从通过任务计划程序启动的进程运行时失败并出现错误 -1073741502（C0000142；“DLL 初始化失败”）。

我尝试切换到 WIN32 API 并使用 STARTUPINFO.lpDesktop="" 创建一个新的 WindowStation，但我得到了同样的错误。

**更新**：我刚刚发现了一个相关的问题，不幸的是它也缺少一个答案：[从 .NET 服务作为不同用户启动 .NET 应用程序时的权限问题？](https://stackoverflow.com/questions/2083299/permissions-problem-when-starting-net-app-from-net-service-as-a-different-user)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:26:56.877

[我能够从这里使用 CreateProcessAsUser 并从](http://www.codeproject.com/Articles/125810/A-complete-Impersonation-Demo-in-C-NET)[这里](https://stackoverflow.com/questions/362419/using-process-start-to-start-a-process-as-a-different-user-from-within-a-windo)添加 LoadUserProfile让它工作。

如果没有 LoadUserProfile，很多工具将无法工作并给您带来奇怪的错误，因为它们需要一个主目录（例如 svn.exe 和 mstest.exe）。

# python - 为什么相同的 SQLite 查询在只获取两倍的结果时会慢 30 倍？

> ID：10531898
> 
> 赞同：32
> 
> 时间：2012-05-10T10:15:00.237
> 
> 标签：python, performance, sqlite, fetchall

我一直在努力加快我正在使用的查询大约一个星期，并在这里问了几个关于它的问题（[如何在运行 sqlite 查询后加快获取结果的速度？](https://stackoverflow.com/questions/10412604/how-can-i-speed-up-fetching-the-results-after-running-an-sqlite-query)，[sqlite.fetchall()这么慢？](https://stackoverflow.com/questions/10336492/is-it-normal-that-sqlite-fetchall-is-so-slow)，[如何有效地使用 min() 和 max()？](https://stackoverflow.com/questions/10334031/how-to-use-min-and-max-in-an-efficient-way)）。

借助那里给出的答案的非常有用的帮助，我设法将时间缩短到 sqlite 查询花费`100.95`几秒钟并 fetchall 采取：`1485.43`。这仍然不够，所以在尝试了一些不同的索引后，我设法将`0.08`一个样本的查询时间缩短到几秒钟，并将 fetchall 时间缩短到`54.97`几秒钟。所以我想我终于设法加快了速度。

然后查询运行下一个样本，需要`0.58`几秒钟，而 fetchall 需要`3952.80`几秒钟。对于第三个示例，查询花费了`1.01`几秒钟并花费了`1970.67`几秒钟来获取所有数据。

第一个样本获取了 12951 行，第二个样本获取了 24972 行，第三个样本获取了 6470 行。我很好奇为什么第一个样本获取行的速度要快得多，而它的获取量只有第二个示例的一半。

* * *

代码（`spectrumFeature_inputValues`是 (1,)、(2,) 和 (3,)，来自使用的 3 个样本。）：

```
self.cursor.execute('begin')
self.cursor.execute("EXPLAIN QUERY PLAN "+
                    "SELECT precursor_id, feature_table_id "+
                    "FROM `MSMS_precursor` "+
                    "INNER JOIN `spectrum` ON spectrum.spectrum_id = MSMS_precursor.spectrum_spectrum_id "+
                    "INNER JOIN `feature` ON feature.msrun_msrun_id = spectrum.msrun_msrun_id "+
                    "WHERE spectrum.scan_start_time BETWEEN feature.rtMin AND feature.rtMax "+
                    "AND MSMS_precursor.ion_mz BETWEEN feature.mzMin AND feature.mzMax "+
                    "AND feature.msrun_msrun_id = ?", spectrumFeature_InputValues)
print 'EXPLAIN QUERY PLAN: '
print self.cursor.fetchall()
import time
time0 = time.time()
self.cursor.execute("SELECT precursor_id, feature_table_id "+
                    "FROM `MSMS_precursor` "+
                    "INNER JOIN `spectrum` ON spectrum.spectrum_id = MSMS_precursor.spectrum_spectrum_id "+
                    "INNER JOIN `feature` ON feature.msrun_msrun_id = spectrum.msrun_msrun_id "+
                    "WHERE spectrum.scan_start_time BETWEEN feature.rtMin AND feature.rtMax "+
                    "AND MSMS_precursor.ion_mz BETWEEN feature.mzMin AND feature.mzMax "+
                    "AND feature.msrun_msrun_id = ?", spectrumFeature_InputValues)
print 'query took:',time.time()-time0,'seconds'
time0 = time.time()
precursorFeatureIds = self.cursor.fetchall()
print 'it fetched:',len(precursorFeatureIds),'rows'
print 'fetchall took',time.time()-time0,'seconds'
time0 = time.time()
for precursorAndFeatureID in precursorFeatureIds:
    feature_has_MSMS_precursor_inputValues = (precursorAndFeatureID[0], precursorAndFeatureID[1])
    self.cursor.execute("INSERT INTO `feature_has_MSMS_precursor` VALUES(?,?)", feature_has_MSMS_precursor_inputValues)
print 'inserting took',time.time()-time0,'seconds'
self.connection.commit() 
```

结果：

```
EXPLAIN QUERY PLAN: 
[(0, 0, 2, u'SCAN TABLE feature (~100000 rows)'), (0, 1, 1, u'SEARCH TABLE spectrum USING INDEX fk_spectrum_scahn_start_time_1 (scan_start_time>? AND scan_start_time<?) (~3125 rows)'), (0, 2, 0, u'SEARCH TABLE MSMS_precursor USING INDEX fk_MSMS_precursor_spectrum_spectrum_id_1 (spectrum_spectrum_id=?) (~5 rows)')]
query took: 0.0754859447479 seconds
it fetched: 12951 rows
fetchall took 54.2855291367 seconds
inserting took 0.602859973907 seconds
It took 54.9704811573 seconds

EXPLAIN QUERY PLAN: 
[(0, 0, 2, u'SCAN TABLE feature (~100000 rows)'), (0, 1, 1, u'SEARCH TABLE spectrum USING INDEX fk_spectrum_scahn_start_time_1 (scan_start_time>? AND scan_start_time<?) (~3125 rows)'), (0, 2, 0, u'SEARCH TABLE MSMS_precursor USING INDEX fk_MSMS_precursor_spectrum_spectrum_id_1 (spectrum_spectrum_id=?) (~5 rows)')]
query took: 0.579694032669 seconds
it fetched: 24972 rows
fetchall took 3950.08093309 seconds
inserting took 2.11575508118 seconds
 It took 3952.80745602 seconds

EXPLAIN QUERY PLAN: 
[(0, 0, 2, u'SCAN TABLE feature (~100000 rows)'), (0, 1, 1, u'SEARCH TABLE spectrum USING INDEX fk_spectrum_scahn_start_time_1 (scan_start_time>? AND scan_start_time<?) (~3125 rows)'), (0, 2, 0, u'SEARCH TABLE MSMS_precursor USING INDEX fk_MSMS_precursor_spectrum_spectrum_id_1 (spectrum_spectrum_id=?) (~5 rows)')]
query took: 1.01185703278 seconds
it fetched: 6470 rows
fetchall took 1970.622962 seconds
inserting took 0.673867940903 seconds
It took 1972.31343699 seconds 
```

* * *

SQLite 创建语句：

```
-- -----------------------------------------------------
-- Table `feature`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `feature` (
  `feature_table_id` INT PRIMARY KEY NOT NULL ,
  `feature_id` VARCHAR(40) NOT NULL ,
  `intensity` DOUBLE NOT NULL ,
  `overallquality` DOUBLE NOT NULL ,
  `charge` INT NOT NULL ,
  `content` VARCHAR(45) NOT NULL ,
  `intensity_cutoff` DOUBLE NOT NULL,
  `mzMin` DOUBLE NULL ,
  `mzMax` DOUBLE NULL ,
  `rtMin` DOUBLE NULL ,
  `rtMax` DOUBLE NULL ,
  `msrun_msrun_id` INT NOT NULL ,
  CONSTRAINT `fk_feature_msrun1`
    FOREIGN KEY (`msrun_msrun_id` )
    REFERENCES `msrun` (`msrun_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE INDEX `fk_mzMin_feature` ON `feature` (`mzMin` ASC); 
  CREATE INDEX `fk_mzMax_feature` ON `feature` (`mzMax` ASC); 
  CREATE INDEX `fk_rtMin_feature` ON `feature` (`rtMin` ASC); 
  CREATE INDEX `fk_rtMax_feature` ON `feature` (`rtMax` ASC);

DROP TABLE IF EXISTS `spectrum`;
-- -----------------------------------------------------
-- Table `spectrum`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `spectrum` (
  `spectrum_id` INT PRIMARY KEY NOT NULL ,
  `spectrum_index` INT NOT NULL ,
  `ms_level` INT NOT NULL ,
  `base_peak_mz` DOUBLE NOT NULL ,
  `base_peak_intensity` DOUBLE NOT NULL ,
  `total_ion_current` DOUBLE NOT NULL ,
  `lowest_observes_mz` DOUBLE NOT NULL ,
  `highest_observed_mz` DOUBLE NOT NULL ,
  `scan_start_time` DOUBLE NOT NULL ,
  `ion_injection_time` DOUBLE,
  `binary_data_mz` BLOB NOT NULL,
  `binary_data_rt` BLOB NOT NULL,
  `msrun_msrun_id` INT NOT NULL ,
  CONSTRAINT `fk_spectrum_msrun1`
    FOREIGN KEY (`msrun_msrun_id` )
    REFERENCES `msrun` (`msrun_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

CREATE INDEX `fk_spectrum_spectrum_id_1` ON  `spectrum` (`spectrum_id` ASC);
CREATE INDEX `fk_spectrum_scahn_start_time_1` ON  `spectrum` (`scan_start_time` ASC);

DROP TABLE IF EXISTS `feature_has_MSMS_precursor`;
-- -----------------------------------------------------
-- Table `spectrum_has_feature`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `feature_has_MSMS_precursor` (
  `MSMS_precursor_precursor_id` INT NOT NULL ,
  `feature_feature_table_id` INT NOT NULL ,
  CONSTRAINT `fk_spectrum_has_feature_spectrum1`
    FOREIGN KEY (`MSMS_precursor_precursor_id` )
    REFERENCES `MSMS_precursor` (`precursor_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_spectrum_has_feature_feature1`
    FOREIGN KEY (`feature_feature_table_id` )
    REFERENCES `feature` (`feature_table_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  CREATE INDEX `fk_feature_has_MSMS_precursor_feature1` ON `feature_has_MSMS_precursor` (`feature_feature_table_id` ASC);
  CREATE INDEX `fk_feature_has_MSMS_precursor_precursor1` ON `feature_has_MSMS_precursor` (`MSMS_precursor_precursor_id` ASC); 
```

正如你所看到的，我已经从光谱和特征中的`mz`和`rt`值中创建了索引，因为我认为大部分时间都花在比较这些数字上。

那么为什么第一个样本比第二个和第三个样本快得多呢？查询时间与 fetchall 时间有何关系？最重要的是，有没有办法可以加快速度？

* * *

# 更新1：

与同事交谈后，可能是因为将一个点与二维维度（rtMin、rtMax、mzMin、mzMax）进行比较需要 n^2 时间。这*大致*对应于第二个 fetchall 花费的时间超过 60^2 秒（第一个 fetchall 花费的近似时间）并且它检索的行数略少于两倍。不过，这并不能回答我的任何问题。

* * *

# 更新 2：

我尝试按照评论中的建议使用 R*tree。我做了一个新表：

```
CREATE VIRTUAL TABLE convexhull_edges USING rtree(
   feature_feature_table_id,             
   rtMin, rtMax,      
   mzMin, mzMax,       
); 
```

并将我的查询更改为：

```
self.cursor.execute("SELECT precursor_id, feature_table_id "+
                    "FROM `MSMS_precursor` "+
                    "INNER JOIN `spectrum` ON spectrum.spectrum_id = MSMS_precursor.spectrum_spectrum_id "+
                    "INNER JOIN `feature` ON feature.msrun_msrun_id = spectrum.msrun_msrun_id "+
                    "INNER JOIN `convexhull_edges` ON convexhull_edges.feature_feature_table_id = feature.feature_table_id "
                    "WHERE spectrum.scan_start_time BETWEEN convexhull_edges.rtMin AND convexhull_edges.rtMax "+
                    "AND MSMS_precursor.ion_mz BETWEEN convexhull_edges.mzMin AND convexhull_edges.mzMax "+
                    "AND feature.msrun_msrun_id = ?", spectrumFeature_InputValues) 
```

这给出了以下结果：

```
EXPLAIN QUERY PLAN: 
[(0, 0, 3, u'SCAN TABLE convexhull_edges VIRTUAL TABLE INDEX 2: (~0 rows)'), (0, 1, 2, u'SEARCH TABLE feature USING INDEX sqlite_autoindex_feature_1 (feature_table_id=?) (~1 rows)'), (0, 2, 1, u'SEARCH TABLE spectrum USING INDEX fk_spectrum_scahn_start_time_1 (scan_start_time>? AND scan_start_time<?) (~3125 rows)'), (0, 3, 0, u'SEARCH TABLE MSMS_precursor USING INDEX fk_MSMS_precursor_spectrum_spectrum_id_1 (spectrum_spectrum_id=?) (~5 rows)')]
query took: 0.0572800636292 seconds
it fetched: 13140 rows
fetchall took 34.4445540905 seconds

EXPLAIN QUERY PLAN: 
[(0, 0, 3, u'SCAN TABLE convexhull_edges VIRTUAL TABLE INDEX 2: (~0 rows)'), (0, 1, 2, u'SEARCH TABLE feature USING INDEX sqlite_autoindex_feature_1 (feature_table_id=?) (~1 rows)'), (0, 2, 1, u'SEARCH TABLE spectrum USING INDEX fk_spectrum_scahn_start_time_1 (scan_start_time>? AND scan_start_time<?) (~3125 rows)'), (0, 3, 0, u'SEARCH TABLE MSMS_precursor USING INDEX fk_MSMS_precursor_spectrum_spectrum_id_1 (spectrum_spectrum_id=?) (~5 rows)')]
query took: 0.819370031357 seconds
it fetched: 25402 rows
fetchall took 3625.72873998 seconds

EXPLAIN QUERY PLAN: 
[(0, 0, 3, u'SCAN TABLE convexhull_edges VIRTUAL TABLE INDEX 2: (~0 rows)'), (0, 1, 2, u'SEARCH TABLE feature USING INDEX sqlite_autoindex_feature_1 (feature_table_id=?) (~1 rows)'), (0, 2, 1, u'SEARCH TABLE spectrum USING INDEX fk_spectrum_scahn_start_time_1 (scan_start_time>? AND scan_start_time<?) (~3125 rows)'), (0, 3, 0, u'SEARCH TABLE MSMS_precursor USING INDEX fk_MSMS_precursor_spectrum_spectrum_id_1 (spectrum_spectrum_id=?) (~5 rows)')]
query took: 0.878498077393 seconds
it fetched: 6761 rows
fetchall took 1419.34246588 seconds
inserting took 0.340960025787 seconds
It took 1420.56637716 seconds 
```

所以比我以前的方式快一点，但仍然不够快。接下来我要试试web_bod的解决方案。

* * *

# 更新 3

使用 web_bod 的解决方案，我得到了以下时间：

```
EXPLAIN QUERY PLAN: 
[(0, 0, 2, u'SCAN TABLE feature (~100000 rows)'), (0, 1, 1, u'SEARCH TABLE spectrum USING INDEX fk_spectrum_scahn_start_time_1 (scan_start_time>? AND scan_start_time<?) (~3125 rows)'), (0, 2, 0, u'SEARCH TABLE MSMS_precursor USING INDEX fk_MSMS_precursor_spectrum_spectrum_id_1 (spectrum_spectrum_id=?) (~5 rows)')]
query took: 0.0521960258484 seconds
it fetched: 13052 rows
fetchall took 90.5810132027 seconds

EXPLAIN QUERY PLAN: 
[(0, 0, 2, u'SCAN TABLE feature (~100000 rows)'), (0, 1, 1, u'SEARCH TABLE spectrum  USING INDEX fk_spectrum_scahn_start_time_1 (scan_start_time>? AND scan_start_time<?) (~3125 rows)'), (0, 2, 0, u'SEARCH TABLE MSMS_precursor USING INDEX fk_MSMS_precursor_spectrum_spectrum_id_1 (spectrum_spectrum_id=?) (~5 rows)')]
query took: 0.278959989548 seconds
it fetched: 25195 rows
fetchall took 4310.6012361 seconds 
```

遗憾的是，第三个由于重新启动而没有完成。所以这比我的第一个解决方案快一点，但比使用 R*Tree 慢

* * *

# 更新 4

处理一个速度非常慢的不同查询，我看到它正在进入不间断的睡眠（参见[这个问题](https://stackoverflow.com/questions/10854817/is-uninteruptable-sleep-the-cause-of-my-python-program-being-really-slow-and-if)）。所以我在运行这个查询时检查了 top，它在 R 和 D 状态之间切换，将 CPU 使用率从 100% 降低到 50%。这可能就是为什么它在提供所有解决方案的情况下运行如此缓慢的原因。

* * *

# 更新 5

我迁移到 MySQL，但我得到了相同的结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T10:49:42.390

执行时间与每个表中的行数成几何比例，而不是算术，例如

```
3 tables with 10 rows each => 1,000 comparision

3 tables with 10, 10 and 40 rows => 4,000 comparisons

3 tables with 20 rows each => 8,000 comparisons 
```

您可能会重新考虑查询以避免某些连接/游标 - 您何时需要答案？

你能做这样的事情吗：

```
SELECT precursor_id, feature_table_id 
FROM MSMS_precursor
INNER JOIN 

    (
        SELECT mzMin, mzMax, rtMin, rtMax, spectrum_id, feature_table_id, msrun_msrun_id

        FROM spectrum
        INNER JOIN 

           (select feature_table_id, mzMin, mzMax, rtMin, rtMax, msrun_msrun_id
            from feature
            where feature.msrun_msrun_id = 'value'
           ) subquery 

        ON subquery.msrun_msrun_id = spectrum.msrun_msrun_id
        WHERE 
            spectrum.scan_start_time BETWEEN subquery.rtMin AND subquery.rtMax 
    ) subquery

    ON subquery.spectrum_id = MSMS_precursor.spectrum_spectrum_id 

WHERE 
    MSMS_precursor.ion_mz BETWEEN subquery.mzMin AND subquery.mzMax 
```

使用子查询可以减少表之间的比较次数 - 您可以快速过滤掉不需要的特征，然后是不相关的光谱，然后再搜索合适的前体。

**我不使用 SQLLite - 但原则仍应适用。**

更新：修复了 SQL 中的错误

笔记：

您不必担心 AND，您只会得到：

*   feature.msrun_msrun_id = 'value' 的功能
*   这些特征的光谱以及在 subquery.rtMin AND subquery.rtMax 之间的spectrum.scan_start_time
*   这些光谱的前体，其中 MSMS_precursor.ion_mz BETWEEN subquery.mzMin AND subquery.mzMax

**5 月 18 日更新：**

是索引！！！您在搜索字段上有索引，但在参与连接的字段上没有索引 - 外键索引确实提高了性能：

```
CREATE INDEX `fk_msrun_msrun_id_feature` ON `feature` (`msrun_msrun_id` ASC); 
CREATE INDEX `fk_spectrum_spectrum_id_feature` ON `feature` (`msrun_msrun_id` ASC); 
CREATE INDEX `fk_spectrum_spectrum_id_MSMS_precursor` ON `MSMS_precursor` (`spectrum_spectrum_id` ASC); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T21:00:07.927

我建议您尝试使用[R*Tree 索引](http://www.sqlite.org/rtree.html)，它们专为高效范围查询而设计。

* * *

我实际上并没有过多地使用 R*Tree，只是阅读了文档，但我认为您可能使用不正确。您可能想尝试更改您的查询以使用

```
WHERE convexhull_edges.rtMin <= spectrum.scan_start_time AND convexhull_edges.rtMax >= spectrum.scan_start_time AND
convexhull_edges.mzMin <= MSMS_precursor.ion_mz AND convexhull_edges.mzMax >= MSMS_precursor.ion_mz 
```

这应该等同于您当前的查询，但我认为应该更快（您应该从 R*Tree 中选择一个范围，而不是将点与范围进行比较）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T08:45:37.460

考虑在查询中涉及的表上使用[覆盖索引](http://www.sqlite.org/queryplanner.html#covidx)。

您确实在`select`语句和相应的`inner join`and`where`子句中获取了有限数量的列。通过使用包含有序列的覆盖索引，您应该获得非常快速的查询，也就是说，您将删除有`scan table`利于[`search table`使用 a 的`covering index`](http://www.sqlite.org/eqp.html#section_1_1)。

尝试在您的表上使用这些索引：

```
CREATE INDEX `fk_covering_feature` ON `feature` (`msrun_msrun_id`,`mzMin`,`mzMax`,`rtMin`,`rtMax`,`feature_table_id`);
CREATE INDEX `fk_covering_spectrum` ON  `spectrum` (`msrun_msrun_id`,`scan_start_time`,`spectrum_id`);
CREATE INDEX `fk_covering_MSMS_precursor` ON  `MSMS_precursor` (`spectrum_spectrum_id`,`ion_mz`,`precursor_id`); 
```

在追求速度时，您还应该提示查询计划器了解 msrun_msrun_id 是一个常量，用于检查`feature`和`spectrum`表。通过将此附加测试放在查询末尾（并通过`spectrumFeature_InputValues`两次），在查询中添加常量测试：

```
"AND spectrum.msrun_msrun_id = ?" 
```

# ruby-on-rails - Twitter Bootstrap 使用块级标签和输入

> ID：10531900
> 
> 赞同：7
> 
> 时间：2012-05-10T10:15:08.910
> 
> 标签：ruby-on-rails, css, forms, label, twitter-bootstrap

我正在[为 Rails/SASS 使用 Twitter 引导程序，](https://github.com/thomas-mcdonald/bootstrap-sass)并注意到它将`display: block;`样式应用于我的`labels`,`label inputs`和`label textareas`.

我正在使用表单标签生成带有标签的复选框，但块样式将两者移动到不同的行：

```
 <%= f.check_box :remember_me %>
  <%= f.label :remember_me %> 
```

我的问题是两方面的。我应该这样做吗？如果是这样，我应该如何最好地覆盖 Twitter Bootstraps 默认值。`!important`如果可以避免的话，我宁愿在我的 CSS 中不要有很多标志。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-10T12:05:07.130

您可以通过引导方式进行操作并传入标签块

```
<%= f.label :remember_me, :class => "checkbox" do %>
  <%= f.check_box :remember_me %>remember me
<% end %> 
```

这样，如果您单击文本，复选框也会被选中。好看多了！

# php - PHP 5 邮件 - 发送邮件时没有错误

> ID：10531901
> 
> 赞同：0
> 
> 时间：2012-05-10T10:15:09.830
> 
> 标签：php, email, smtp

我（也许）对丹麦电子邮件域有过奇怪的经历。这一切都始于我想测试我的代码，以便它可以处理错误。

我有一个带有表单的主页，我的客户可以在其中提交他们的电子邮件。有时我的客户给我发邮件，邮件地址是 my.customer@gmail.dk *SIGH*

在 PHP mail() 中，我使用附加参数“-fbounce@my.domain.dk”，这样如果邮件无法投递，我应该会收到错误消息。

当我向域 my.customer@gmai.com 或 my.customer@gmailzzz.com 发送电子邮件时，我会收到 SMTP 550 错误。但是当我向 my.customer@gmail.dk 发送电子邮件时，我根本不会收到回复。

我试图查看域名 gmail.dk 是否在 www.dk-hostmaster.dk 上获取，但似乎不是。那么为什么我在向 gmail.dk 发送电子邮件时没有收到错误返回？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:27:32.787

[https://www.dk-hostmaster.dk/index.php?id=42&query=gmail.dk&submit=S%F8g](https://www.dk-hostmaster.dk/index.php?id=42&query=gmail.dk&submit=S%F8g)

它已经归谷歌公司所有。他们可能有一个包罗万象的设置，或者更有可能根本没有反弹？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:05:47.657

您实际上从哪里得到这些错误消息？您传递给 mail() 的附加参数只是传递给您正在使用的邮件服务器，因此结果将取决于您用于发送电子邮件的服务器。你用的是sendmail吗？

SMTP 是一种协议，它固有地预计交付可能需要一段时间。一些邮件服务器甚至任意拒绝第一次发送邮件的尝试，迫使发件人稍后再试一次，只是为了阻止懒惰的垃圾邮件发送者。

可能的情况是，当您的邮件服务器无法连接到“gmail.dk”时，它会假设只是暂时的连接问题，并打算在几个小时（甚至几天）后重试。可能是您尝试发送的其他一些地址回复了更具体的错误（例如，“该用户在我们的系统中不存在”），让您的服务器知道交付失败是永久性的。

# java - Java TLS 连接行为

> ID：10531903
> 
> 赞同：0
> 
> 时间：2012-05-10T10:15:12.890
> 
> 标签：java, wireshark, ssl

我使用带有自定义 KeyManager、TrustManager 和客户端身份验证的 java TLS 服务器。连接有效并且证书被交换，客户端（firefox）也说连接是加密的。我分析了与 wireshark 的连接，但我没有看到 tls 消息，wireshark 仅显示 tcp 段而不解码有效负载（例如 TLS 客户端 hello、服务器 hello 等）。我启用了调试日志，这是服务器的日志：

> ```
> trigger seeding of SecureRandom
> done seeding SecureRandom
> Allow unsafe renegotiation: false
> Allow legacy hello messages: true
> Is initial handshake: true
> Is secure renegotiation: false
> Thread-1, called closeSocket() 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:39:30.770

如果您使用的端口通常不用于 SSL/TLS，则必须告诉 Wireshark 将其显式解码为 SSL/TLS。

右键单击一个数据包并选择*Decode As...* -> *Transport* -> *SSL*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T21:33:17.690

如果您有私钥，您可以看到有效负载，只需转到工具-> 首选项-> ssl-> 编辑并在此处插入您的密钥。

# html - 响应式图像大小调整问题

> ID：10531905
> 
> 赞同：0
> 
> 时间：2012-05-10T10:15:25.187
> 
> 标签：html, css, responsive-design, css-animations

我正在尝试建立一个响应式网站，但是我正在努力调整我应用于我的网站的两个背景图像的大小。当我在移动设备上查看时，标题看起来被压扁了，我认为这已成为 AI 将固定高度应用于标题。我尝试使用属性 height:auto，但仍然没有乐趣。有人可以指出我做错了什么吗？

```
#header{
background: url(images/page_header_1024px.png) no-repeat;
background-size: 100% 100%;
max-width:1024px;
min-height: 100%;
margin: 0 auto;} 
```

[点击这里](http://thisiswired.com/responsive/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:36:11.027

像这样写：

```
 html, body{
     height:100%;
    }
#header{
 min-height:100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:33:20.033

您是否有理由不使用标准标签？然后浏览器将本机调整它的大小 - 尝试调整这个页面的大小（只是你在它自己的窗口中的图像）： [http ://thisiswired.com/responsive/css/images/page_header_1024px.png](http://thisiswired.com/responsive/css/images/page_header_1024px.png)

是你想要的效果吗？

# javascript - 源少 iframe 错误 firefox

> ID：10531909
> 
> 赞同：0
> 
> 时间：2012-05-10T10:15:36.443
> 
> 标签：javascript, jquery, firefox, iframe, widget

我正在使用无 src 的 iframe 来开发一个 javascript 小部件来保护我的 css 免受父页面的影响。

它在 chrome/safari 中完美运行。但是在 Firefox 中，我可以看到在几毫秒内添加了内容，然后 iframe 变为空。

如果我检查 html，我会看到空头和空体，但是如果我通过控制台检查 innerHtml，我可以看到它具有正确的内容......

对不起，我不能给你代码，因为很难提取相关部分：我可以告诉你我使用 jquery contents() 访问 iframe，然后找到 body 或 find head。

有什么想法吗？

我设法举了一个例子： http: [//jsbin.com/arenat/2/edit#javascript,html,live](http://jsbin.com/arenat/2/edit#javascript,html,live) 只需提取一些代码来显示问题：在 chrome no in firefox (10.0.1) 上工作。希望够了。

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:38:03.600

当您将框架添加到 DOM 时，它开始异步加载 about:blank。然后你修改 iframe 中的 DOM ...然后异步加载完成并替换你修改的文档。

我建议在 about:blank 完成加载后使用 iframe 上的 onload 处理程序进行操作，或者使用 document.open() 和 document.close() 强制取消异步加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:54:19.893

它正在使用超时：

[http://jsbin.com/arenat/9/edit](http://jsbin.com/arenat/9/edit)

# sql - 在sql中的单个列上恢复多个最大值

> ID：10531911
> 
> 赞同：0
> 
> 时间：2012-05-10T10:15:37.990
> 
> 标签：sql

我有一个包含客户帐户的电子表格，当我们获得一个新帐户时，它会使用参考帐号添加，即安德森电气将是 AND01 等。我正在尝试使用 sql 从每个字母变体中带回最高数字，例如如果 AND01 已经存在并且我们的最高公司价值是 AND34，那么它只会带回 AND34 而不是 1 到 34。

每个帐户都有公司名称的前 3 个字母，后跟下一个数字。

希望我已经很好地解释了这一点，以便有人理解:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:36:16.193

对于单个参考帐户：

```
select max(AcctNum)
from Accounts
where left(AcctNum, 3) = <reference account> 
```

如果你想要一次全部：

```
select left(AcctNum, 3) as ReferenceAcct, max(AcctNum)
from Accounts
group by left(AcctNum, 3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:23:26.210

不确定这是否是您要问的，但如果您需要找到作为字符串一部分的最大值，您可以使用子字符串来完成。因此，如果您需要从包含这些值的列中找到最高数字，您可以使用以下方法：

```
;WITH tmp AS(
    SELECT 'AND01' AS Tmp
    UNION ALL 
    SELECT 'AND34'
) SELECT MAX(SUBSTRING(tmp, 4, 2)) FROM tmp GROUP BY SUBSTRING(tmp, 0, 3) 
```

这是一个返回 34 的小测试查询，因为我按前 3 个字母分组，您可能希望按某个 ID 分组。

# android - Android - 印地语连词支持？

> ID：10531913
> 
> 赞同：13
> 
> 时间：2012-05-10T10:15:40.007
> 
> 标签：android, fonts, hindi

我知道 Android 设备仍然不支持复杂的印地语连词绘图，尽管我们将 textView 字体设置为常用的印地语字体（mangal.ttf 或 DroidHindi.ttf）。

前任之一：

第一二合一

प्र = प्र</p>

"प्र" 显示为...प् र { 常用连词列表 -[链接](http://en.wikibooks.org/wiki/Hindi/Consonant_combinations))

我想知道的是 - 虽然 android 设备（我使用的是 Galaxy-SII，os2.3）还不支持它，但有解决方法吗？

类似的问题（但还没有解决方法）：

1.  [Android：无法显示正确的印地语单词](https://stackoverflow.com/questions/10329510/android-unable-to-show-correct-hindi-words)
2.  [如何在 Android 平板电脑中显示 HIndi 文本](https://stackoverflow.com/questions/7789827/how-can-i-show-hindi-text-in-android-tablet)

对于问题 2：@Sahaja 确实提到 android 设备不支持印地语复杂连词绘图。那么这是否意味着在 android 添加对它的支持之前我们将无法在这方面做任何事情，或者我们可以有一个可行的解决方法吗？

我能想到的一种解决方法：

1.  将整个印地语数据库转换为自定义的非 unicode 格式并使用非 unicode 字体（如 kiran.ttf - [link](http://www.kiranfont.com/kf/)）来显示它。这听起来太费劲了，不确定这是否是一个可行的解决方案（尚未尝试过 - 保留为最后一个选项）或者其他方法也可以？

请让我知道，你的想法是一样的。

**（注意：这个问题与我使用的自定义印地语字体无关，或者是 ttf 还是 otf。）**

谢谢，
希布斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T01:54:23.910

我最近遇到了同样的问题，但不幸的是没有找到任何解决方案。我同意某些文本不会正确显示，即其中一些可能会出现错位的字符。如果您尝试在 3.0 或更高版本的设备上运行它（我不确定是否低于 3.0），那么您应该能够正确看到它。或者尝试选择4.0以上的更高版本的模拟器。![在此处输入图像描述](../Images/caf440e779c9f553aa0dd230894c6520.png)

# facebook - 使用 oAuth (facebook) 获取用户的完整位置信息

> ID：10531916
> 
> 赞同：1
> 
> 时间：2012-05-10T10:15:46.010
> 
> 标签：facebook, facebook-opengraph, country, city

当我使用 FB connect 时，我可以检索大量用户数据，其中之一是 place_id

并连接到 [https://graph.facebook.com/112108272140707](https://graph.facebook.com/112108272140707)

我得到了整个数据，甚至是经度，纬度......除了（几乎）最重要的部分......国家......我知道我可以对谷歌地图或其他任何东西提出另一个请求来获得国家，但我没有;不想...我确定我可以从 FB 得到它

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:51:29.487

不，Facebook 不会在我们的 API 调用中进行地理定位。我们喜欢可以组合的小型 API。

# php - 不使用闪光灯的幻灯片横幅

> ID：10531919
> 
> 赞同：0
> 
> 时间：2012-05-10T10:15:54.030
> 
> 标签：php, javascript, html, css, ajax

我想为我的网站制作一种重复的幻灯片横幅，但我需要一些关于如何做的帮助。我想要的最好的例子是在 play.com 网站上，他们有一个包含 5 张不同幻灯片的横幅，网站在 X 时间后在它们之间滚动，但用户也可以点击底部的编号按钮之一要跳过的横幅。

我正在考虑使用 HTML、CSS、JavaScript、AJAX 和 PHP 来做这件事。我已经设置了一个 Ajax 脚本，该脚本已经链接到一个 php 页面，该页面将在某个时候检查数据库以获取其内容。但我想使用列表 lu 和 li 输出所有内容。

那么有没有人知道任何教程或我可以用来在 play.com 上获得类似东西的东西？play.com 或多或少与我想要的完全匹配。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:19:26.960

您可以将 jQuery 与幻灯片插件结合使用。你不必自己做太多事情。可以在这里找到满足您需求的插件：http: [//slidesjs.com](http://slidesjs.com)

您还可以在 Google 上搜索“jquery 幻灯片”。这应该会返回很多带有插件的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:09:18.887

这是一个非常简单的循环遍历`<img>`放置在`<div class="slideshow">`包装器内的任意数量的元素，它只使用几行 jQuery 和 css ...

* * *

[http://jsfiddle.net/DaveAlger/eNxuJ/1/](http://jsfiddle.net/DaveAlger/eNxuJ/1/)

* * *

希望这对其他人有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:26:07.240

除非您有充分的理由，否则您无需自己创建滑块，已经有很多选项（并经过测试）。

我经常使用这两个：

[http://nivo.dev7studios.com/demos/](http://nivo.dev7studios.com/demos/)

[http://jquerytools.org/demos/scrollable/index.html](http://jquerytools.org/demos/scrollable/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T10:46:23.767

我使用[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)因为它有一个非常基本的淡入淡出，但如果需要还有很多不同的动画。

# python - Jython 动态导入或重新加载

> ID：10531920
> 
> 赞同：4
> 
> 时间：2012-05-10T10:15:56.873
> 
> 标签：python, jython

我必须在 Jython 中为 CCPS（使用 jython 作为脚本接口的程序）编写一些代码。但是，如果我在编辑器中更改子模块，Jython 不会更新它们，除非我重新启动程序（启动时间过长）。SO测试和调整相对较慢。

我用谷歌搜索并找到了一篇文章，指出应该导入或重新加载子模块。因此，基本大纲是：

```
def loader(module, part=None):
    if not module in sys.modules :
        if part == None:
            exec("import "+module)
        else:
            exec("from %s import %s" % (module, part))                
    else :
        exec("reload "+module) 
```

但是我有一个问题，模块是在本地加载的，这意味着我可以在`loader()`函数中访问模块，但不能在我的主代码中访问。

**两个问题：**

在 Jython 中使用子模块测试某些东西而不在每次子模块更改后重新启动 Jython 的正确方法是什么？有没有办法动态生成全局变量，以便我可以导入全局命名空间？

（例如`exec("global %(mod)s = %(mod)s" % ({'mod':module}))`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-28T18:51:02.887

如何仅卸载所有模块以便在下一次导入时重新加载它们：

```
import sys
sys.modules.clear() 
```

# facebook - 几乎相同的 URL（HTTP、HTTPS）的类似计数

> ID：10531924
> 
> 赞同：1
> 
> 时间：2012-05-10T10:16:13.077
> 
> 标签：facebook, http, https, facebook-like

我在我的应用程序的每个页面上都设置了类似按钮。但是 facebook 有两种查看页面的模式：不安全 (HTTP) 和安全 (HTTSP)，所以我应该如何在 fb 中执行代码 href：喜欢显示 http 和 https 上的同一页面应该被 facebook 计算为依赖 SAME 页面? 据了解 facebook 喜欢使用 URL 路径作为 uniq ID，所以在 fb:like 标签中我现在写[http://path](http://path)或[https://path](https://path)取决于用户在我的页面上使用的协议，所以正式这是两个不同的我想每个页面的页面和 Facebook 计数都会有所不同。如何计算 http 路径和 https 路径 summiraze 并在两个页面上显示相同的计数？或者可能是 Facebook 已经解决了这个问题，我应该为此担心？

类似的问题我的应用程序可以通过直接 url (mysite/path) 获得，所以我希望来自此类 url 的点赞也算作同一页面上的点赞，但从路径 apps.facebook.com/myapp/path 获取。我怎么能这样做？刚才我写了类似标签路径apps.facebook.com/myapp/path的href，即使它是通过直接URL访问的。从不同条目到应用程序获得大量喜欢是正确的决定吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:24:20.170

无论用户使用什么协议，只需输入页面的 http url。没有理由在 fb:like 按钮中使用 https，因为它无论如何都没有被加载。

另一件事是，在打开的图元标记中，在 url 参数 (og:url) 下始终放置 http 版本。

将fb画布页面的url放在“直接url”中的like按钮中没有问题，尽管我认为我会反过来做，在fb里面的画布页面中我会使用直接url点赞按钮。

# jquery - 带有 Jazzy UI 的 Java Web 框架

> ID：10531925
> 
> 赞同：0
> 
> 时间：2012-05-10T10:16:15.107
> 
> 标签：jquery, spring, html, spring-mvc

我正在为我的网络项目评估技术。该网站应该可以在所有现代 PC 浏览器和智能手机（Android、iOS、BB）上运行。要求是 UI 应该像 Flash、Silverlight 一样丰富，并且数据将在 Java REST 服务中公开。

选择哪个框架最好？

1.  GWT 与 HTML5，Spring
2.  HTML5、jQuery、Backbone.js
3.  JSP 与 HTML5, Spring
4.  HTML5、jQuery、Spring（这种组合可能吗？）

提前致谢。

编辑：删除文本“爵士乐”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T20:34:42.493

这些都不是太像闪光本身。

GWT 为您提供了一些精美的小部件，jQueryUI 也是如此。除了让一位优秀的设计师来做之外，没有简单的方法可以让网站看起来很漂亮。HTML5 和 CSS3 为您提供了许多工具，让您的网站看起来非常漂亮，看看 CSS3 过渡等，以了解我在说什么。

至于实际的框架，我会使用 Spring MVC 作为您的 REST 服务，使用 JSP 作为您的视图技术，其余的只是糖。

如果你想要一个纯 Ajax 驱动的单页网站，肯定使用backbone.js，使用它你可以避免大部分spring 的MVC 架构，并将你的视图层与你的服务层完全解耦，这非常好。

只是我的2c

# mysql - sql匹配有共同活动的用户

> ID：10531926
> 
> 赞同：0
> 
> 时间：2012-05-10T10:16:17.273
> 
> 标签：mysql, sql, matching

所以，我有一张包含用户和活动的表格

```
users
id | activities
1 | "-2-3-4-"
2 | "-3-4-"
3 | "-1-2-3-4-"

activities
id | title
1 | running
2 | walking 
3 | climbing
4 | singing 
```

我正在尝试让 id 为 3 的用户找到至少有两个相同活动的用户我试图做的是这个

```
SELECT u.id FROM users u 
WHERE ( SELECT COUNT(a.id) FROM activities a 
        WHERE a.id IN(TRIM( ',' FROM REPLACE( u.activities, '-', ',' ) )) 
AND a.id IN(1,2,3) ) >= 2 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:18:10.377

看在上帝的份上，制作一个包含 user_id 和 activity_id 的第三个表。

这无论如何都不是一个合适的解决方案。

您应该有一个在用户和活动之间建立连接的表，而不是将所有活动存储在用户表中的一行中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:05:51.337

您可以首先创建一个函数，该函数采用 user.activities 字符串并将字符串拆分为活动 int id，如下所示：

```
create FUNCTION dbo.SplitStringToIds (@acts nvarchar(MAX))
RETURNS @acivityids TABLE (Id int)

AS
BEGIN

DECLARE @stringToInsert nvarchar (max) 
set @stringToInsert=''
DECLARE @intToInsert int 
set @intToInsert=0
DECLARE @stidx int 
set @stidx=0
DECLARE @endidx int 
set @endidx=0

WHILE LEN(@acts) > 3
BEGIN
    set @stidx=CHARINDEX('-', @acts, 1)
    set @acts=substring(@acts,@stidx+1,len(@acts))
    set @endidx=CHARINDEX('-', @acts, 1)-1

    set @stringToInsert=substring(@acts,1,@endidx)
    set @intToInsert=cast(@stringToInsert as int)
    INSERT INTO @acivityids
    VALUES
    (
    @intToInsert
    )

    END

-- Return the result of the function
RETURN 
```

结束

然后你可以尝试这样的事情来让用户有 2 个或更多相同活动的用户 id=3

```
select u.id,count(u.id) as ActivitiesCounter from users as u
cross apply SplitStringToIds(u.activities) as v
where v.id in (select v.id from users as u
cross apply SplitStringToIds(u.activities) as v
where u.id=3)
group by u.id having count(u.id)>=2 
```

但我认为这种存储表之间关系的方式只会给你带来麻烦，如果可以的话，最好添加一个关系表。

# maven - 使用 jcodemodel 创建原型

> ID：10531929
> 
> 赞同：0
> 
> 时间：2012-05-10T10:16:22.100
> 
> 标签：maven, maven-2, maven-3, maven-plugin, maven-archetype

我正在尝试创建一个 maven 原型，我试图在其中自动生成 java 类中的代码。我遇到了 jcodemodel 来生成 java 类。任何人都请指导我做它，我需要在原型中在哪里使用 jcodemodel 以便在特定文件夹中生成一个具有用户给定名称的类文件？

原型在生成代码时从用户那里获取服务名称、工件 ID 等输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:33:54.337

Maven archetypes can use velocity templates to create code, one simple example beeing to create to correct package definitions. The [JBoss Wiki](https://community.jboss.org/wiki/MavenArchetypeCreationGuidelines) contains a simple example of a template containing conditional logic.

If you already have a generator using codemodel, the [generate goal of the archetype plugin](http://maven.apache.org/archetype/maven-archetype-plugin/generate-mojo.html) contains a `goals` parameter the execute additional plugins after creation. You could let the archetype create only the directory structure, wrap your generator into a maven plugin and then execute on the newly created project.

# java - AES ECB 模式需要填充，那我们怎么会有这个 AES/ECB/NOPADDING 呢？

> ID：10531932
> 
> 赞同：3
> 
> 时间：2012-05-10T10:16:32.857
> 
> 标签：java, encryption, cryptography, ecb

我们正在使用以下密码

AES/ECB/NOPADDING

但我有点困惑，因为像 ECB 这样的模式需要根据块大小来填充输入。但这里我们说 NOPADDING。它们看起来不矛盾。

我们是否可以拥有未填充为 ECB 模式输入的任意数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T10:28:18.843

ECB 加密的“原始”模式没有应用填充，例如 AES/ECB/NOPADDING，基本上是对 N 个数据块的加密功能的纯粹应用。它们对于需要实现默认情况下未提供的自定义模式的开发人员很有用。任何操作模式都是从原始加密函数构造的。

尽管如此，由于块密码只能对全长块进行操作，因此可能必须对最后一个块应用某种形式的填充。这留给开发人员，他们将实现为他们希望实现的模式指定/推荐的任何形式的填充。有很多可能性，这就是为什么我们有“NOPADDING”——让我们自己选择填充。

这些模式，XXX/ECB/NOPADDING，决不能直接使用。任何欧洲央行模式都不应该，真的。纯 ECB 加密非常不安全，例如它不会隐藏纯文本的统计属性（您可能知道“加密”图像仍然看起来很像原始图像[的示例）。](http://de.wikipedia.org/wiki/Electronic_Code_Book_Mode)最重要的是，如前所述，块密码只能对全长块进行操作。这需要应用自定义填充方案，这将添加另一个可能出错的层，而不是简单地依赖某些默认实现。

# c# - 在数据网格中突出显示具有特定颜色的行

> ID：10531935
> 
> 赞同：0
> 
> 时间：2012-05-10T10:16:39.973
> 
> 标签：c#, winforms, visual-studio, datagrid, datagridview

我有一个包含多行的数据网格。我的要求是每当我选择一行时，它都应该突出显示。我通过提供与选择颜色相同的背景颜色禁用了单元格选择，因此未选择用户感觉单元格。

但是如何在数据网格中选择一行并通过更改某些属性以某种颜色突出显示它。**我正在使用以下代码让用户觉得该单元格未被选中。**

```
dataGridViewCellStyle11.SelectionBackColor = System.Drawing.SystemColors.Window;
dataGridViewCellStyle11.BackColor = System.Drawing.SystemColors.Window; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:06:40.693

几个问题，您的用户是否需要能够选择单个单元格？由于您更改了单元格选择的颜色以使其看起来没有被选中，那么您如何决定何时突出显示整行？

听起来您想`SelectionMode`更改`DataGridView`. If you change it to `FullRowSelect`then you will highlight your entire row when any cell in the row is selected.

```
dataGridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect; 
```

# java - 如何编译将 .class 文件直接放入 JAR 的 Java 文件

> ID：10531936
> 
> 赞同：2
> 
> 时间：2012-05-10T10:16:45.180
> 
> 标签：java, jar, javac

首先参考：
[1st Link](http://dan.bodar.com/2012/02/28/crazy-fast-build-times-or-when-10-seconds-starts-to-make-you-nervous/)
[2nd link](http://www.jpountz.net/projects/Parallel-Ant)

第一篇文章[1st Link](http://dan.bodar.com/2012/02/28/crazy-fast-build-times-or-when-10-seconds-starts-to-make-you-nervous/) 提到了将 Java 文件直接编译成 JAR 文件并避免构建过程中的一个步骤。有人知道吗？

-瓦迪拉杰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-30T21:12:55.613

当你链接到我的博客文章时，我认为给你更新是公平的。

直接编译成 Jar 实际上相当简单。基本上你扩展

```
javax.tools.ForwardingJavaFileObject 
```

然后覆盖`openOutputStream`方法并将其定向到您的 Jar。由于 Java 编译器是高度并发的，但写入 jar 文件是高度连续的，我建议您缓冲到字节数组，然后有一个后台线程在字节数组到达时写入它们。

我正是这样做的，这是我的实验性构建工具 JCompilo [https://code.google.com/p/jcompilo/](https://code.google.com/p/jcompilo/) 这个工具完全没有文档记录，但速度很快。目前，它比任何其他 Java 构建工具快约 20-80%，比相同代码的 Scala 编译器快约 10 倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:08:26.967

当作者谈论扩展编译器本身时，他可能了解编译器的内置功能（这就是编译器的能力，也许通过调整代码得到一点鼓励）。

> 现在我正在研究*扩展 Java 6 编译器*以删除不需要的文件存在检查，并可能直接在编译器中对类文件进行 jaring。[强调我的]

[但是，该功能肯定不受官方支持（ javac 网页](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javac.html)上没有关于它的文档）。

充其量，该功能取决于编译器；可能需要修改编译器的源代码。

# c# - 在实体框架中使用什么类型

> ID：10531938
> 
> 赞同：0
> 
> 时间：2012-05-10T10:16:55.260
> 
> 标签：c#, asp.net-mvc, entity-framework, datetime

我使用 MS SQL Server 2008 R2 和实体框架。创建的时候需要写一篇文章，创建什么类型的数据库和模型？

我知道你想这么用 datetime2，但是我在数据库里有这种类型的数据。

我在模型“日期时间”中尝试了数据库类型“日期时间”

结束我有错误

> 将 datetime2 数据类型转换为 datetime 数据类型导致值超出范围。该语句已终止。

**anser：**我不初始化字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:29:37.267

请看看这篇文章[http://chyuck.com/Post/View/68](http://chyuck.com/Post/View/68)

所以有两种解决方案：

1.  在 edmx 文件中，将 ProviderManifestToken 值从 2008 更改为 2005。对于 CodeFirst，请查看[此问题](https://stackoverflow.com/questions/6815846/how-to-configure-providermanifesttoken-for-ef-codefirst-in-a-connection-string)。
2.  在您的数据库中使用 datetime2。可能这是一个更好的解决方案。

PS 它没有连接到 ASP.NET MVC。

# mysql - 用多列中的描述替换外键

> ID：10531940
> 
> 赞同：0
> 
> 时间：2012-05-10T10:16:57.023
> 
> 标签：mysql, sql

如果我有一个表 A ，有 20 列，

```
col1, col2, col3....etc 
```

每列引用另一个表的*外键值*，如下所示：

```
fkey1  - Description1 
fkey2  - Description2 
fkey3  - Description2 
```

有什么方法可以在不加入 20 列的每一列的情况下获得描述。
基本上有没有一种快速的简短方法来获取输出中的描述而无需使用`joins/case-when-then`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:21:20.390

您可以在子表上使用触发器...

插入后在您的表上创建触发器..

在此您可以从主表中选择描述，并可以使用此值更新您的子表....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:31:33.630

一些选项：

1.  创建一个执行这些连接的视图。
2.  不要使用参考表并将描述保存在主表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:26:41.443

如果您的问题是显式连接，则可以执行相关子查询：

```
select id1, (select description from id1table where t.id1 = idtable.id),
       ...
from id1table 
```

但是，在操作上，这只是连接的另一种语法。

# android - SQLite 中的重复条目

> ID：10531941
> 
> 赞同：1
> 
> 时间：2012-05-10T10:17:00.737
> 
> 标签：android, sql, sqlite, cordova

我正在从 Android 手机获取电话号码和联系人姓名并将其存储在 SQLite 数据库中。现在我的问题是，每当我刷新/重新加载应用程序时，SQL 条目（电话和联系人）都会一次又一次地插入，从而导致重复的条目。如何阻止这种情况，顺便说一下，我正在使用 Phonegap！

我正在使用这个简单的代码来填充数据库

```
tx.executeSql('CREATE TABLE IF NOT EXISTS details (id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT, phone TEXT)'); 
```

但这会导致重复输入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T10:23:44.303

停止这种情况就像定义两个字段的主键一样简单，如下所示：

```
CREATE TABLE contacts(
  name CHAR(10) NOT NULL,
  address INTEGER,
  phone INTEGER NOT NULL,
  song VARCHAR(255),
  PRIMARY KEY (name, phone)
) 
```

此密钥将确保数据库中的任何条目都没有相同的名称和电话。

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:51:39.980

它将解决重复输入问题：

```
sampleDB.execSQL("INSERT OR REPLACE INTO measure_table (measure) " + "VALUES ( '" + "Length" + "')"); 
```

# c# - 获取从局部视图发送的值

> ID：10531943
> 
> 赞同：1
> 
> 时间：2012-05-10T10:17:04.920
> 
> 标签：c#, .net, asp.net-mvc-3, partial-views

我有一个表单，里面有一个部分视图来呈现几个子控件。

主视图：

```
@model Test_mvc.Models.Entity.Question
@{
    ViewBag.Title = "Edit";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}
@using (Html.BeginForm())
{
    @*snip*@
    <fieldset>
        <legend>Profils</legend>
        @Html.Action("CheckboxList", "Profil", new { id_question = Model.id })
    </fieldset>
    <p>
        <input type="submit" value="Enregistrer" />
    </p>
} 
```

Profil 控制器（用于局部视图）：

```
 [ChildActionOnly]
    public ActionResult CheckboxList(int id_question)
    {
        var profils = db.Profil.Include("Profil_Question")
            .OrderBy(p => p.nom).ToList();
        ViewBag.id_question = id_question;
        return PartialView(profils);
    } 
```

Profil.CheckBoxList 视图：

```
@model List<Test_mvc.Models.Entity.Profil>
@foreach (var p in Model)
{
    <input type="checkbox" name="profil_@(p.id)"
        @if (p.Profil_Question.Where(pc => pc.id_question == ViewBag.id_question).Any())
        {
            @:checked="checked"
        } />
    @Html.Label("profil_" + p.id, p.nom)
    <br />
} 
```

（我不想使用@Html.CheckBox，因为我不喜欢在选中复选框时发送“true,false”）。

今天，如果我想获取已选中的复选框，我会这样做，但我认为这很糟糕：

问题控制器（用于主视图）：

```
 [HttpPost]
    public ActionResult Edit(Question question)
    {
        if (ModelState.IsValid)
        {
            db.Question.Attach(question);
            db.ObjectStateManager.ChangeObjectState(question, EntityState.Modified);
            db.SaveChanges();

            // this is what I want to change :
            foreach (string r in Request.Form)
            {
                if (r.StartsWith("profil_") && (Request.Form[r] == "true" || Request.Form[r] == "on")) {
                    var p_q = new Models.Entity.Profil_Question();
                    p_q.id_profil = int.Parse(r.Replace("profil_", ""));
                    p_q.id_question = question.id;
                    db.AddToProfil_Question(p_q);
                }
            }

            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(question);
    } 
```

您将如何替换最后一个代码部分中的“foreach”？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:46:30.317

我会尝试的第一件事是给我的所有复选框赋予相同的名称，并将@id 作为框的值：

```
@foreach (var p in Model) {     
     <input type="checkbox" name="profil_checkbox" value="@p.id" 
     @if (p.Profil_Question.Where(pc => pc.id_question == ViewBag.id_question).Any()) 
     {
         @:checked="checked"
     } />  
@Html.Label("profil_" + p.id, p.nom)     <br /> } 
```

然后，与其搜索，`profil_@id`我应该得到一组`profile_checkbox`更容易使用的结果。我不记得 MVC3 是如何处理这个的，所以我不能保证你会在回发中得到什么，但这应该很容易在调试期间检查。

# netbeans - 没有搜索 Netbeans 中的所有文件夹？

> ID：10531945
> 
> 赞同：0
> 
> 时间：2012-05-10T10:17:07.240
> 
> 标签：netbeans

有什么方法可以改变 CTRL-SHIFT-F 搜索的工作方式。我想强制它忽略搜索某些目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:33:46.377

在“文件”选项卡中选择一个文件夹 (ctrl+2)，然后按 ctrl+f 在文件夹和子文件夹中搜索。

# ruby - 处理可选方法参数的常用方法是什么？

> ID：10531946
> 
> 赞同：0
> 
> 时间：2012-05-10T10:17:15.167
> 
> 标签：ruby, parameter-passing

我有一种方法，我想在其中传递动态参数。该方法在循环中调用，有时`value2`可用，有时不可用。

处理可选方法参数的常用方法是什么？

```
my_method(:value1 => 1,
          :value2 => 2 if foo,  # this is not working
          :value3 => 3) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:45:43.527

我通常创建一个这样的哈希：

```
opts = {:value1 => 1, 
        :value3 => 3}
opts[:value2] = 2 if foo
my_method(opts) 
```

这种方法的好处是每个人都能抓住它，`if foo`因为它是一种特殊情况。否则很多程序员，像我一样，第一眼就会错过这个，并且对为什么没有设置 :value2 感到困惑。

有时你有默认设置，那么你可以使用这种方法：

```
default = {:value1 => 0,
           :value2 => 0,
           :value3 => 0}
opts = {:value1 => 1, 
        :value3 => 3}
my_method(default.merge(opts)) 
```

甚至更好：

```
DEFAULT_OPTS = {:value1 => 0,
                :value2 => 0,
                :value3 => 0}

def my_method(opts)
  opts = DEFAULT_OPTS.merge(opts)
  # ...
end

my_method(...) 
```

# jquery - JQuery在首页首次访问

> ID：10531947
> 
> 赞同：1
> 
> 时间：2012-05-10T10:17:17.897
> 
> 标签：jquery, modal-dialog, bpopup

我已经使用 bpopup 在我的主页上成功添加了全屏弹出窗口。

它工作得很好，但只有在按下按钮时才有效。我希望弹出窗口出现在主页上，并且只在用户第一次访问该网站时出现在主页上。

我的代码是：

```
<script>
   // Semicolon (;) to ensure closing of earlier scripting
    // Encapsulation
    // $ is assigned to jQuery
    ;(function($) {

         // DOM Ready
        $(function() {

            // Binding a click event
            // From jQuery v.1.7.0 use .on() instead of .bind()
            $('button').bind('click', function(e) {

                // Prevents the default action to be triggered. 
                e.preventDefault();

                // Triggering bPopup when click event is fired
                $('#announce').bPopup();

            });

        });

    })(jQuery);
</script> 
```

这很好用，但我如何向它添加与 cookie 相关的处理程序？

提前感谢您的帮助。它真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:22:06.430

Cookie 插件：[https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

```
$.cookie("test", 1);//setting a cookie
$.cookie("test", null);//deleting a cookie
$.cookie("test", 1, { expires : 10 });//setting cookie with time out 
```

当您加载页面时，将 cookie 的值检查为

```
var showDialog=$.cookie("test");
if(showDialog==1)
//showDialog 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:20:21.593

从[quirksmode](http://www.quirksmode.org/js/cookies.html)：

```
function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {
    createCookie(name,"",-1);
} 
```

你会想要这样的东西：

```
createCookie("visited", "true", 90); 
```

然后只需检查该 cookie 是否使用`readCookie()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:26:17.720

您可以使用此[Cookie 插件](https://github.com/carhartl/jquery-cookie)在代码中添加条件以检查 cookie 是否已存在。像这样

```
if($.cookie('first_visit') != '0'){
    //Show modal as Cookie is not set
    $('#announce').bPopup();
    // now set cookie 
    $.cookie('first_visit', '0'); 
} 
```

# php - 想要 .htaccess 显示 / 而不是 ？在 URL 中，我也能够获得像 $_GET["param1"] 这样的数据

> ID：10531948
> 
> 赞同：-1
> 
> 时间：2012-05-10T10:17:19.240
> 
> 标签：php, .htaccess

我的实际网址如下。 [http://localhost/waterpump/index.php?param1=4498¶m2=930¶m3=876¶m4=201¶m5=vis](http://localhost/waterpump/index.php?param1=4498&param2=930&param3=876&param4=201&param5=vis)

但我的客户想要以下格式。 [http://localhost/waterpump/param1/4498/param2/930/param3/876/param4/201/param5/vis](http://localhost/waterpump/param1/4498/param2/930/param3/876/param4/201/param5/vis)

而且我还可以使用 $_GET["param1"] 获取数据

我怎样才能通过 .htaccess 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:42:06.340

尝试[htaccess 技巧中的示例](http://corz.org/serv/tricks/htaccess2.php)

例如

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^blog/([0-9]+)-([a-z]+) http://corz.org/blog/index.php?archive=$1-$2 [NC] 
```

我不确定参数的数量是固定的还是可变的，但你基本上会做一个匹配的部分，你匹配用斜杠分隔的 url，然后你会将它“重写”为原始 url

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:42:19.760

如果您设置使用 $_GET 来获取参数并且总会有 1 到 5 个参数，那么您可以使用以下重写：

```
RewriteEngine On
RewriteRule ^waterpump/param1/(.*)/param2/(.*)/param3/(.*)/param4/(.*)/param5/(.*)/ /index.php?param1=$1&param2=$2&param3=$3&param4=$4&param5=$5 [nc]
RewriteRule ^waterpump/param1/(.*)/param2/(.*)/param3/(.*)/param4/(.*)/ /index.php?param1=$1&param2=$2&param3=$3&param4=$4 [nc]
RewriteRule ^waterpump/param1/(.*)/param2/(.*)/param3/(.*)/ /index.php?param1=$1&param2=$2&param3=$3
RewriteRule ^waterpump/param1/(.*)/param2/(.*)/ /index.php?param1=$1&param2=$2 [nc]
RewriteRule ^waterpump/param1/(.*)/ /index.php?param1=$1 [nc] 
```

**已编辑**

如果您已正确执行此操作，请执行 print_r($_GET); on /waterpump/param1/x/param2/y/param3/z/ 应该给你类似的东西：

```
array (
       'param1'=>x,
       'param2'=>y,
       'param3'=>z,
       ); 
```

有更简洁的方法可以减少重写，但对您的 PHP 进行一些更改。此外，上述方法仅适用于水泵。除了水泵还有别的吗？

# asp.net - 从 .NET Framework 3.5 升级到 4.0 后，我收到 HTTP 错误 400

> ID：10531949
> 
> 赞同：0
> 
> 时间：2012-05-10T10:17:31.640
> 
> 标签：asp.net, iis

我有一个 ASP.NET 网站，目前在 .NET Framewok 3.5 上运行。我尝试将其升级到 .NET Framework 4.0。升级成功，因为在构建过程中没有错误，默认页面，即我的登录页面，照常出现。但是登录到网站后，页面的 URL 中包含一些额外的字符，例如`http://localhost:123456/www/%2fwww%2f[Folder Name]%2f[MyPage.aspx]`浏览器上出现以下错误。

```
Server Error in '/www' Application.
--------------------------------------------------------------------------------
HTTP Error 400 - Bad Request. 
--------------------------------------------------------------------------------
Version Information: ASP.NET Development Server 10.0.0.0
-------------------------------------------------------------------------------- 
```

谁能告诉我可能是什么问题？

提前致谢。

# flash - Flash Player 在 NetStream.publish() 仅在 Mac 上挂起几秒钟

> ID：10531950
> 
> 赞同：1
> 
> 时间：2012-05-10T10:17:35.010
> 
> 标签：flash, apache-flex, live, netstream, netconnection

自过去两天以来，我遇到了一个非常奇怪的问题。我正在开发一个能够直播视频的 Flex 应用程序。在 Windows 上一切正常，但在 MacO 上，NetStream 在几秒钟（3 到 10 秒）后停止流式传输，但不会触发任何事件或错误。它只是简单地停止发布。我的视频 LoopBack 继续显示实时捕获，但远程播放器显示冻结的图像。由于发射器停止发布，远程播放器应用程序只需获取“NetStream.Buffer.Empty”。

奇怪的是服务器日志（Red5）上没有错误，我唯一得到的是一条警告消息

> WARN orserver.net.rtmp.RTMPConnection - 关闭 RTMPTConnection 从 127.0.0.1 : 57550 到 localhost (in: 68623 out 3429), id 1433242212, 由于太多不活动 (65000ms), 最后 ping 发送 5000ms 前

但是当我尝试关闭 Publisher 应用程序时，它会挂起 FlashPlayer，所以我必须在 Activity 监视器中终止该进程。

这个虫子两天后就让我发疯了。谁能帮我解决这个问题？

预先感谢您的帮助。

PS：我的 NetStream 和 NetConnetion 对象是公共类变量，所以它不应该是垃圾收集器。

# css - jQuery UI - 如何消除手风琴每个圆角的间隙

> ID：10531963
> 
> 赞同：0
> 
> 时间：2012-05-10T10:18:34.423
> 
> 标签：css, jquery-ui

我有使用 jQuery UI Accordion 创建的可折叠部分。当每个部分展开时，我将背景图像应用到其标题部分，如下所示：

[jQuery UI 手风琴演示](http://jsfiddle.net/AWDsL/)

如果您仔细查看章节标题，您会注意到每个圆角处都有一个间隙。显然，如果我删除以下 CSS（但我想使用图像），差距将会消失：

```
background: url("http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/redmond/images/ui-bg_glass_85_dfeffc_1x400.png") repeat-x scroll 50% 50% #DFEFFC; 
```

有没有办法使用图像但同时消除间隙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:22:56.800

是的，为具有背景的元素添加边框半径并将其与标题的半径相匹配。

IE

```
border-top-left-radius: 6px;
border-top-right-radius: 6px; 
```

如果你真的想进城

```
.ui-accordion .ui-accordion-header a {
  border-radius: 6px;
}

.ui-accordion .ui-accordion-header.ui-state-active a {
  border-top-left-radius: 6px;
  border-top-right-radius: 6px;
} 
```

# jquery - 内联花式框表单 - display:none 包装器阻止提交处理程序触发

> ID：10531968
> 
> 赞同：0
> 
> 时间：2012-05-10T10:18:55.743
> 
> 标签：jquery, forms, fancybox

我正在尝试使用内联路由让 fancybox 表单工作，但在触发提交处理程序时遇到问题。

即使我使用直接从精美盒子网站示例 5 关闭[http://fancybox.net/blog的表单示例，这也无法正常工作](http://fancybox.net/blog)

这是我的代码，它似乎`display:none`阻止了提交处理程序工作。我已经玩了好几个小时了，我很难过。

这是一些代码：

```
<script type="text/javascript" >
$(document).ready(function() {

    $("#tip5").fancybox({
        'scrolling'     : 'no',
        'titleShow'     : false,
        'onClosed'      : function() {
            $("#login_error").hide();
        }
    });

    $("#login_form").bind("submit", function() {

        alert("THIS ALERT IS NOT FIRING");

        return false;
    });

}); 

</script>
</head>
<body>

<div style="display:none">
    <form id="login_form" method="post" action="">
            <p id="login_error">Please, enter data</p>
        <p>
            <label for="login_name">Login: </label>
            <input type="text" id="login_name" name="login_name" size="30" />
        </p>
        <p>
            <label for="login_pass">Password: </label>
            <input type="password" id="login_pass" name="login_pass" size="30" />
        </p>
        <p>
            <input type="submit" value="Login" />
        </p>
        <p>
            <em>Leave empty so see resizing</em>
        </p>
    </form>
</div>

<a id="tip5" href="#login_form" title="Login">Try now</a> 
```

当 display:none 被删除时，警报会起作用。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:18:04.740

您可能使用版本号 2 的新 fancybox，尝试使用旧版本。某些功能已更改，每个示例`resize()`不再存在，`update()`现在是否调用

# nginx - 如何配置 nginx 自动重定向到主主机名？

> ID：10531975
> 
> 赞同：18
> 
> 时间：2012-05-10T10:19:29.317
> 
> 标签：nginx, http-redirect

每个 nginx 配置都可以适用于广泛的域，但我想将请求自动重定向到第一个域名（官方域名）。

```
server {
    server_name a.example.com b.example.com;
} 
```

我希望如果有人进入`b.example.com/some`，直接去`a.example.com/some`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-10T11:04:40.153

[这与http://wiki.nginx.org/Pitfalls#Server_Name](http://wiki.nginx.org/Pitfalls#Server_Name)的 GOOD 示例几乎相同。也就是说，您应该使用两台服务器：

```
server {
  server_name b.example.com;
  return 301 $scheme://a.example.com$request_uri;

  # For pre-0.8.42 installations:
  # rewrite ^ $scheme://a.example.com$request_uri? permanent;
}

server {
  server_name a.example.com;
  # Do stuff
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-11-03T21:33:00.150

要在单个服务器块中执行此操作，您可以使用 if 和[`$server_name`变量](http://nginx.org/en/docs/http/ngx_http_core_module.html#var_server_name)：

```
 server_name primary.tld secondary.tld;
    if ($host != $server_name) {
        rewrite ^ $scheme://$server_name permanent;
    } 
```

或者，保留任何查询参数：

```
 server_name primary.tld secondary.tld;
    if ($host != $server_name) {
        rewrite ^/(.*) $scheme://$server_name/$1 permanent;
    } 
```

这里，[`$server_name`](http://nginx.org/en/docs/http/ngx_http_core_module.html#var_server_name)指的是主服务器名称，它是`server_name`指令中的第一个名称，而[`$host`](http://nginx.org/en/docs/http/ngx_http_core_module.html#var_host)指的是 HTTP 请求中给出的主机名。

请注意，`if`nginx 配置中的语句并不总是符合您的预期，并且有些人不鼓励使用它。另请参阅[https://www.nginx.com/resources/wiki/start/topics/depth/ifisevil/](https://www.nginx.com/resources/wiki/start/topics/depth/ifisevil/)

这个答案的灵感来自[另一个](https://serverfault.com/a/446679)使用类似方法的问题的答案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-11-14T14:41:39.193

@kolbyjack 和 @Matthijs 的组合版本用一个`server`块回答。此配置将重定向所有`Host`标头与*example.com*不同的请求，并仅处理*example.com*请求。

```
server {
    server_name example.com a.example.com b.example.com;

    if ($host != $server_name) {
        return 301 $scheme://$server_name$request_uri;
    }

    # processing requests to $server_name (example.com) only
    ...
} 
```

# dojo - dojo中的网格过滤器

> ID：10531976
> 
> 赞同：0
> 
> 时间：2012-05-10T10:19:31.653
> 
> 标签：dojo, grid, dojox.grid.datagrid

任何人都可以帮助过滤dojo网格中的多个条件。我正在使用 grid.DataGrid 和 json 数据。data1 = {items: [ {"id":1,"media":"PRINT",pt:"黄色目录"}, {"id":2,"media":"DIGITAL",pt:"社交媒体" },{id":3,"media":"DIGITAL",pt:"黄线"} ],标识符:"id"};

```
a=1,b=2;
grid.filter({id:a,id:b}) 
```

上面的行只是显示带有 b 值的记录。我需要两个值的记录。谁能帮我这个。？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:26:42.260

所以你想要具有任何指定 id 的记录吗？

这取决于您使用的商店的功能。如果您将内存存储与 SimpleQueryEngine 一起使用，那么您可以指定一个正则表达式或一个带有测试函数的对象：

```
grid.filter({id: {
  test: function(x) {
    return x === 'a' || x === 'b';
  }
}}); 
```

如果您使用 JsonRest 存储，那么您可以选择如何在服务器端处理您的查询，这样您就可以传入一组有趣的值并在服务器上以您自己的方式处理它。（即`filter({id:[a,b]})`）

# javascript - 国际键盘常用字符的键码

> ID：10531977
> 
> 赞同：2
> 
> 时间：2012-05-10T10:19:36.993
> 
> 标签：javascript, keyboard

好的，从特殊符号中捕获键码会在不同布局的键盘上产生不同的结果。但是像 az 这样的“常见”字符呢？如果您有 QWERTY 键盘，您将`81`在键入`q`. 当你有一个 AZERTY 键盘时，`81`当你按下 时你会得到代码`a`，因为“应该”在哪里`a`？`q`还是映射的方式不同？

**编辑：**

我接受的答案可能是当您捕获密钥并希望确定“a”真的是“a”时的最佳解决方案，但正如我在下面的评论中解释的那样，我仍然很好奇密钥代码是如何“翻译的” ' 使用国际键盘时。也就是说：消息来源建议至少 az 应该是一致的，但我找不到对此的支持（或实际尝试过的人）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:52:51.767

如果你使用`keypress`事件而不是`keyup`或者`keydown`然后问题就消失了，因为在那种情况下你会得到字符代码而不是键代码。

例子：

```
document.onkeypress = function(e) {
    e = e || window.event;
    var charCode = (typeof e.which == "undefined") ? e.keyCode : e.which;
    alert( String.fromCharCode(charCode) );
}; 
```

这是关于 JavaScript 中密钥处理的权威资源：http: [//unixpapa.com/js/key.html](http://unixpapa.com/js/key.html)

# delphi - 有没有机会丢失 TcpServer.ReceiveLn 数据？

> ID：10531978
> 
> 赞同：0
> 
> 时间：2012-05-10T10:19:37.787
> 
> 标签：delphi, networking, client-server, delphi-7, tcpserver

我需要监控在远程计算机上执行的应用程序的活动，所以我选择使用简单的 SendLn / RecieveLn 方法，但我不确定它在非常大的本地网络中是否稳定（一台服务器将收到一个简单的来自大量计算机的文本）。

```
procedure Tform1.log(inp:string);
begin
  //
  richEditText.Lines.Insert(0,inp); 
end;

procedure TForm1.TcpServer1Accept(Sender: TObject;
  ClientSocket: TCustomIpClient);
  var buf:string;
begin
  //
  log('accept:'+ClientSocket.RemoteHost);
  log('accept:'+ClientSocket.Receiveln);
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:54:39.257

从来没有保证交付 - 网络问题看到了这一点。客户端知道服务器已收到通知的唯一方法是客户端是否收到来自服务器的响应。但是，在状态更新的情况下，只要在更新中发送完整的状态，您就可以设计系统，以便如果奇数消息丢失，则没有真正的问题，因为下一条消息最终会通过。除非你有永久性的网络问题，在这种情况下“sneakernet”是你唯一的选择;-)

# jquery - 在“页面加载”上加载随机图片

> ID：10531980
> 
> 赞同：0
> 
> 时间：2012-05-10T10:19:42.863
> 
> 标签：jquery

我正在尝试使用 JQuery 循环插件在页面加载时加载随机图片。

```
$(document).ready(function() {
    $('.slideshow').cycle({ 
        fx:     'fade', 
        random:  1 
    });
}); 
```

有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:10:27.430

加载随机图像不需要插件。要从一组中加载随机图像，您可以将所有图像放入某个容器中（或者您可以为它们添加任何您想要的类），然后随机选择一个来显示。

HTML：

```
<div id="slideshow">
  <img src="http://scienceblogs.com/startswithabang/upload/2012/04/why_should_there_be_dark_matte/AS17-148-22727_lrg-thumb-500x500-74032.jpeg" />
  <img src="http://weblogs.marylandweather.com/4526619322_1912218db8.jpg" />
  <img src="http://www.silverstar-academy.com/Blog/wp-content/uploads/2012/03/03-14-12N  00184967.jpg" />     
  <img src="http://cdn.the2012scenario.com/wp-content/uploads/2011/11/sunspot-500x500.jpg" />
</div> 
```

CSS：

```
 #slideshow {width:500px;height:500px;overflow:hidden}
 #slideshow img {display:none} 
```

JS/JQuery：

```
$(document).ready(function() {
  var rand = Math.floor(Math.random() * $('#slideshow img').length);
  $('#slideshow img').eq(rand).show();​
  // if you just want to use a class you could do this but is prob better to put them in a container
  // $('img.random').eq(rand).show();
  // var rand = Math.floor(Math.random() * $('img.random').length);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-11T20:24:16.003

在 jQuery 中，

```
var rand = Math.floor(Math.random() * $('#slideshow img').length);
$("#slideshow img:eq("+rand+")").show(); 
```

做`.eq(rand).show();`是行不通的。

# c# - 由于未知原因获得 Com 异常

> ID：10531983
> 
> 赞同：1
> 
> 时间：2012-05-10T10:19:44.230
> 
> 标签：c#, .net, active-directory, treeview

我正在尝试将 Adusers 列表添加到字典中，但由于某种原因，它适用于名为“a”的 1 个用户，但是对于第二个用户“abcdedf ancdef”，它给了我这个例外，

**_COMPlusExceptionCode = 0xe0434f4d**

```
 if (member != null && !string.IsNullOrEmpty(member.UserName))
                        {
                            string MemberName = member.UserName.ToString().Replace(".", " ");
                            UserList.Add(groupName, MemberName);
                        } 
```

这是我在调试时得到的，不知道去哪里找到解决方案，这是代码

```
 protected override void CreateChildControls()
    {
        base.CreateChildControls();

        try
        {
            TreeView tree = new TreeView();
            TreeNode groupNode = default(TreeNode);
            List<string> GroupList = new List<string>();
            Dictionary<string, string> UserList = new Dictionary<string, string>();
            List<string> IndividualUserList = new List<string>();

            foreach (SPUser user in SPContext.Current.Web.Users)
            {
                string groupName = FormatUserLogin(user.Name);

                if (!user.IsDomainGroup &&  groupName != "" && groupName != "System Account")
                    IndividualUserList.Add(groupName);

                else if (user.IsDomainGroup && !string.IsNullOrEmpty(groupName) && 
                    Directory.DoesGroupExist(groupName))
                {
                    GroupList.Add(groupName);
                    foreach (ADUser member in Directory.GetUsersFromGroup(groupName))
                    {
                        if (member != null && !string.IsNullOrEmpty(member.UserName))
                        {
                            string MemberName = member.UserName.ToString().Replace(".", " ");
                            UserList.Add(groupName, MemberName);
                        }
                    }
                }
            }

            IndividualUserList.Sort();

            foreach (string Item in IndividualUserList)
            {
                groupNode = new TreeNode(Item);
            }

            foreach (string GroupListItem in GroupList)
            {
                groupNode = new TreeNode(GroupListItem);
                foreach (KeyValuePair<string, string> UserPair in UserList)
                {
                    if (UserPair.Key == GroupListItem)
                    {
                        groupNode.ChildNodes.Add(new TreeNode(UserPair.Value));
                    }
                }
            }

            if (groupNode != null)
            {
                tree.Nodes.Add(groupNode);
                this.Controls.Add(tree);
            } 
            tree.Nodes.Add(groupNode);
        }
        catch (Exception)
        {
            //loggingit
        }
    } 
```

# image - 图像调整大小时出现 OutOfMemoryException

> ID：10531984
> 
> 赞同：2
> 
> 时间：2012-05-10T10:19:48.013
> 
> 标签：image, resize, out-of-memory

我们正在使用 .net dll (http://imageresizing.net/download) 在运行时调整图像大小。它完美地工作。但是，在一段时间（1-7 天之间）之后，系统开始在偶数查看器中引发异常：

异常信息：异常类型：OutOfMemoryException 异常信息：内存不足，无法继续执行程序。

在该异常之后，网站通常会停止工作，并抛出“System.OutOfMemoryException”错误。

如果我们“回收”运行网站的应用程序池，它会清除问题并且网站会立即恢复正常，而无需更改任何代码。

在 imagereiszing dll 之前，我们使用的是自定义代码，同样的问题也会发生。以下是代码。

```
 private Bitmap ConvertImage(Bitmap input, int width, int height, bool arc)
    {
        if (input.PixelFormat == PixelFormat.Format1bppIndexed ||
            input.PixelFormat == PixelFormat.Format4bppIndexed ||
            input.PixelFormat == PixelFormat.Format8bppIndexed)
        {

            Bitmap unpackedBitmap = new Bitmap(input.Width, input.Height);
            Graphics g = Graphics.FromImage(unpackedBitmap);
            g.Clear(Color.White);
            g.DrawImage(input, new Rectangle(0,0,input.Width, input.Height));
            g.Dispose();
            input = unpackedBitmap;
        }

        double aspectRatio = (double)input.Height / (double)input.Width;
        int actualHeight = CommonMethods.GetIntValue(Math.Round(aspectRatio * width, 0));

        Bitmap _imgOut;

        if (actualHeight > height)
        {
            ResizeImage resizeImage = new ResizeImage(width, actualHeight, InterpolationMethod.Bicubic);
            Bitmap _tempBitmap = resizeImage.Apply(input);

            Bitmap _croppedBitmap = new Bitmap(width, height);
            Graphics _crop = Graphics.FromImage(_croppedBitmap);
            _crop.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;
            _crop.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
            _crop.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighQuality;
            _crop.DrawImageUnscaledAndClipped(_tempBitmap, new Rectangle(0, 0, width, height));
            _crop.Dispose();

            _imgOut = _croppedBitmap;
        }
        else
        {
            ResizeImage resizeImage = new ResizeImage(width, height, InterpolationMethod.Bicubic);
            _imgOut = resizeImage.Apply(input);
        }

        // Draw the arc if it has been requested
        if (arc)
        {
            Graphics _arc = Graphics.FromImage(_imgOut);
            _arc.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;
            _arc.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
            _arc.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighQuality;
            _arc.DrawArc(new Pen(Color.White, 24), new Rectangle(-13, -13, 50, 50), 180, 90);
            _arc.Dispose();
        }

        // job done
        return _imgOut;
    } 
```

我们正在调整图像大小，例如：www.mysite.com/images/myimage.jpg?width=196&height=131

期待。法鲁克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T12:43:23.933

当您遇到 OutOfMemoryException（无论它发生在何处）时，它可能是由应用程序中任何地方的内存泄漏引起的。在使用 WinDbg 调试了几十个这样的实例后，我从未发现任何最终是由于[http://imageresizing.net](http://imageresizing.net)中的错误而导致的。

[也就是说，有一种简单的方法可以确定http://imageresizing.net](http://imageresizing.net)是否存在问题；在 IIS 中为您的图像和图像调整大小创建一个单独的应用程序池和子文件夹应用程序。除了图像缩放器之外，什么都没有安装在那里。下次遇到错误时，请登录服务器并[找出导致大量内存使用的 w3wp.exe 实例](https://stackoverflow.com/questions/1793940/determine-which-w3wp-exe-process-belongs-to-which-app-pool-in-windows-7-iis7-5)。

[如果它在 ImageResizer 应用程序池中，请从http://imageresizing.net/support](http://imageresizing.net/support)收集 20-50 美元的错误赏金。如果没有，您需要弄清楚您在主应用程序中泄漏的位置。

如果您在应用程序中的其他任何地方使用 System.Drawing，那是第一个查看的地方。[对照此陷阱列表检查您的代码](http://nathanaeljones.com/163/20-image-resizing-pitfalls/)。

如果您确定要在 using 或 finally 子句中处理每个 System.Drawing.* 实例，请阅读[这篇优秀的文章几次](http://blogs.iis.net/webtopics/archive/2009/05/22/troubleshooting-system-outofmemoryexceptions-in-asp-net.aspx)，以确保您没有在任何基础上失败，然后深入了解DebugDiag 和/或 WinDBG（见[文章底部](http://blogs.iis.net/webtopics/archive/2009/05/22/troubleshooting-system-outofmemoryexceptions-in-asp-net.aspx)）。

# java - 如何设置 XML Feed URL

> ID：10531986
> 
> 赞同：2
> 
> 时间：2012-05-10T10:20:02.900
> 
> 标签：java, xml, feed

我想在网站上发布一些数据，他们要求我向他们提供 XML 提要的 URL。

XML 提要的 URL 是什么？如何在 Java 中创建 XML 提要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:33:41.820

XML 提要是一种付费包含形式，其中通过 XML 向搜索引擎提供有关广告商网页的信息。XML 是一种数据交付语言，代表“可扩展标记语言”，允许用户定义自己的元素以共享结构化数据。XML 提要还允许搜索引擎收集有关网页的信息，而无需通过网页爬行来收集信息。参与 XML 提要的营销人员付费将他们的页面包含在基于 XML 格式文档的基于蜘蛛的搜索索引中，该文档代表每个广告商的网站

**XML 提要的工作原理**

RSS（Rich Site Summary 或 Realy Simple Syndication - 取决于您问谁！）提要是一个`XML feed`. RSS 是内容联合的标准。IT 具有强大的中继功能。它们根本没有什么特别之处，它只是某个 fromat 中的 xml。XML 它本身与 HTML 并没有太大的不同，只是您自己制作标签并且它非常严格——即所有内容都必须正确嵌套。

在 RSS 中，您从生成提要的站点的描述开始，然后打开一个包含项目、标题、作者和描述等的频道。这些链接到完整的文章。RSS 主要是基于新闻的，这就是包含日期位的原因。

一些示例 XML 提要是

[http://twitter.com/statuses/public_timeline.xml](http://twitter.com/statuses/public_timeline.xml) - 推特

本教程介绍了如何在 java 中创建提要

[http://www.techiepark.com/tutorials/how-to-create-rss-or-atom-feed-using-java/](http://www.techiepark.com/tutorials/how-to-create-rss-or-atom-feed-using-java/)

可能这会对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:28:57.250

我猜他们要的是你提供一个 RSS 提要。因此，您不会在网站上发布数据，但网站会使用您公开的 RSS URL 从您那里获取数据。

要使用 Java 编写 RSS 提要，您可以查看本[教程](http://www.vogella.com/articles/RSSFeed/article.html#write)

# asp.net - 在哪里使用抽象类和在哪里使用接口？

> ID：10531989
> 
> 赞同：0
> 
> 时间：2012-05-10T10:20:12.810
> 
> 标签：asp.net, oop

我是 asp.net 程序员。我已经阅读了抽象类和接口的文章，我也知道如何实现它。但是任何人都可以实际地解释我，即通过参考项目场景在哪里使用抽象类和在哪里使用接口？

我需要一个非常实用或真实世界的项目示例，以便我可以非常有效地在我的项目中实施它？

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:28:37.810

由于项目中的示例取决于领域，您必须首先了解该领域才能理解该示例，因此我将通过一个烹饪示例对其进行抽象。

假设我们希望能够用不同的酱汁烹制意大利面：我们希望在源代码中独立于酱汁来处理意大利面。第一种方法可能是使用 Cook 方法定义接口 IPasta：

```
public interface IPasta
{
    void Cook();
} 
```

然后我们的客户端代码可以独立于它的实现来烹饪意大利面：番茄酱，香蒜酱？你的名字，我们可以做饭：

```
...
IPasta pasta = GetPasta();
pasta.Cook();
... 
```

然而，更仔细地思考这个问题，我们发现煮意大利面的过程总是一样的，除了我们要准备酱汁的那一点。

这意味着我们有一个基本的意大利面算法，我们可以*独立于任何酱汁*来实现：烧开水，准备酱汁，将意大利面从锅中取出并与酱汁混合。

```
public abstract class Pasta
{
    public void Cook()
    {
        BoilWater();
        PrepareSauce();
        ...
    }

    protected abstract void PrepareSauce();

    private void BoilWater()
    {
        // Boil some water
    }
}

public class PastaWithPestoSauce
{
    protected override void PrepareSauce()
    {
        // Prepare pesto sauce
    }
} 
```

我们的客户会这样使用它：

```
...
Pasta pasta = GetPasta();
pasta.Cook();
... 
```

所以我们仍然有一个接口，不是 C# 意义上的，而是众所周知的公共行为的一般意义上的接口（抽象类的公共方法 Cook），但我们还设法节省了一些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:28:53.930

我不能直接给你一个实际的例子，但让我用小例子来解释两者之间的根本**区别：**

**抽象类**是类层次结构的一部分。这意味着它们用于继承。接口与继承无关。抽象类意味着您不能实例化它，并且所有成员（**字段**、**方法**和**构造函数**）都由子类继承。一个接口只能定义要实现的**方法。**

您应该使用一个抽象类，其中有一个有意义的层次结构：

A`vehicle`可以是 and 的抽象类`car`，`boat`如果您只想实例化实际的汽车和船只。车辆可以有一个 `maximumSpeed`字段，然后继承该字段。接口不能定义该字段。

当您只需要方法时，您**应该**使用接口。假设您正在编写一个与这些车辆**交互**（“驱动它们”）的程序，但不关心这些对象的**状态**，您可以`vehicle`使用方法定义一个接口，`drive()`以便该程序可以在不知道的情况下驱动所有船只和汽车他们到底是什么。

最后，一个类可以实现多个接口。另一个显示差异的示例，如果您可以在现实生活中描绘您的对象，请考虑如何与它进行交互。假设一个咖啡机，它有一个开/关按钮。“抽象咖啡机”并没有真正的意义。所有你需要知道的是有一个`setOn()`和`setOff()`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:44:03.610

当我必须定义对象的特性或能力时，我个人喜欢使用接口，而不管对象是什么。

在“现实生活”示例中，计算出有 2 个类，Person 和 Mones（我的昵称：D）和 1 个接口，IGuitarPlayer。因此，Mones 继承自 Person，如果 Mones 有弹吉他的能力，它就实现了 IGuitarPlayer 接口。

# javascript - 添加主题时不加载 Dojo 树

> ID：10531992
> 
> 赞同：0
> 
> 时间：2012-05-10T10:20:18.490
> 
> 标签：javascript, tree, themes, dojo

我按照[本教程](http://dojotoolkit.org/documentation/tutorials/1.7/store_driven_tree/)将 digit.tree 连接到 store.JsonRest 并且一切正常。在添加道场主题之前 树是用纯 html 显示的，动作完美，我可以逐个显示我的树分支。当我添加一个主题（在我的例子中是 claro）时，树被加载到内存中（我使用 dojo 插件进行 firebug 验证）但没有显示任何内容。控制台没有任何错误。

因此，如果有人有想法。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:25:00.080

所以，只是检查一下，通过“添加主题”，你的意思是链接到适当的 Claro CSS 文件并用 class="claro" 标记正文，然后你发现以前可见的树消失了？（如果你没有这样标记身体，那很可能是你的问题。）

如果是这种情况，请使用 Firebug 检查页面 DOM 中渲染元素的大小（我认为它们仍然存在）。如果它们已缩小到 0px x 0px 或同等大小，请尝试使用 Firebug 手动更改顶级元素的大小，看看有什么效果。

您可能需要覆盖某些节点或顶级树本身的大小，或确保 html+body 大于 0px（例如 100%）。

# node.js - Node.js 可以在服务器上启动脚本吗？

> ID：10531993
> 
> 赞同：3
> 
> 时间：2012-05-10T10:20:20.687
> 
> 标签：node.js

Node.js 可以在安装它的服务器上启动脚本吗？诸如 bash 脚本或 PHP 脚本之类的脚本，例如调整图片大小？

如果有，情况如何？你能给我指一个文档页面吗？

谢谢，
丹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T10:22:15.630

是的，有可能。下面进行演示：

1.  [http://www.dzone.com/snippets/execute-unix-command-nodejs](http://www.dzone.com/snippets/execute-unix-command-nodejs)
2.  [http://groups.google.com/group/nodejs/browse_thread/thread/e3d00bb0e48dd760?pli=1](http://groups.google.com/group/nodejs/browse_thread/thread/e3d00bb0e48dd760?pli=1)

您还可以执行诸如生成子进程和集群等任务。

执行 unix 命令：

```
var exec = require('child_process').exec;
child = exec("something", function (error, stdout, stderr) {
  sys.print('stdout: ' + stdout);
  sys.print('stderr: ' + stderr);
  if (error !== null) {
    console.log('exec error: ' + error);
  }
}); 
```

**有关更多信息，请参阅 Node.js 文档：** [http ://nodejs.org/api/child_process.html](http://nodejs.org/api/child_process.html)

# c# - 渴望获取组件中的模型

> ID：10531998
> 
> 赞同：0
> 
> 时间：2012-05-10T10:20:43.230
> 
> 标签：c#, nhibernate

# 根据

```
<class name="A" >
<id name="ID" type="AnsiString">
<column name="p_ID_vc" length="50"></column>
<generator class="assigned"/>
</id>
<component name="B">
<many-to-one name="C" lazy="true"/>
</component>
<class/> 
```

# 目标

*   在获取对象 A 的同时获取 C
*   在获取 A 列表的同时获取 C

# 问题

我尝试↓。但它不起作用。

```
Query.Fetch(A=>A.B).ThenFetch(B=>B.C).Where(……). 
```

# 帮助

*   任何人都知道如何解决它。我需要你的帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:04:11.730

获取组件不适用于 Linq 查询。看到这个问题：[https ://nhibernate.jira.com/browse/NH-2769](https://nhibernate.jira.com/browse/NH-2769)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:34:45.877

您可以使用 HQL 来实现这一点。您的查询应如下所示：

```
"select a from A a inner join fetch a.B b inner join fetch b.C c where ..." 
```

希望有帮助..

# c# - QueryOver where generator Nhibernate

> ID：10531999
> 
> 赞同：0
> 
> 时间：2012-05-10T10:20:43.477
> 
> 标签：c#, asp.net, nhibernate, queryover

您好，我有一些以编程方式生成 where 语句的方法，我如何将 where 生成转移到其他任何人都可以提供帮助的类方法？

```
 public static List<MME.Objects.TypedLists.InvoiceList> GetList(List<MMPFramework.SearchParameter> parameter)
    {
        MME.Objects.Invoice Invoice = null;
        MME.Objects.Contractor Contractor = null;
        MME.Objects.Contract Contract = null;
        MME.Objects.TypedLists.InvoiceList invoiceList= null; 
        var t = MME.DAL.NhSessionHelper.GetCurrentSession().QueryOver<MME.Objects.Invoice>(() => Invoice);

        foreach (var searchParameter in parameter)
        {
            if(searchParameter.Expression == "Like")
            {
                t.Where(Restrictions.Like(searchParameter.PropertyName, searchParameter.ObjectValueLo));
            }
            else if (searchParameter.Expression == "Eq")
            {
                t.Where(Restrictions.Eq(searchParameter.PropertyName, searchParameter.ObjectValueLo));
            }
            else if (searchParameter.Expression == "Between")
            {
                t.Where(Restrictions.Between(searchParameter.PropertyName, searchParameter.ObjectValueLo,searchParameter.ObjectValueHi));
            }
            else if(searchParameter.Expression == "Gt")
            {
                t.Where(Restrictions.Gt(searchParameter.PropertyName, searchParameter.ObjectValueLo));
            }
            else if (searchParameter.Expression == "Lt")
            {
                t.Where(Restrictions.Lt(searchParameter.PropertyName, searchParameter.ObjectValueLo));
            }
            else
            {
                //todo more
            }
            //t.Where(Restrictions.Eq(searchParameter.PropertyName, searchParameter.ObjectValue));

        }
        t.JoinQueryOver(() => Invoice.Contractor, () => Contractor, JoinType.LeftOuterJoin)

            .JoinQueryOver(() => Invoice.Contract, () => Contract, JoinType.LeftOuterJoin)
            .Select(Projections.Property(() => Invoice.Id).WithAlias(() => invoiceList.Id),
                    Projections.Property(() => Invoice.Number).WithAlias(() => invoiceList.InvoiceNumber),
                    Projections.Property(() => Contractor.Name).WithAlias(() => invoiceList.ContractorName),
                    Projections.Property(() => Contract.Number).WithAlias(() => invoiceList.ContractNumber)
            )
            .TransformUsing(Transformers.AliasToBean<MME.Objects.TypedLists.InvoiceList>());
        return t.List<MME.Objects.TypedLists.InvoiceList>().ToList();

    } 
```

我已经尝试过，但它似乎不起作用....希望有人在做某事并可以帮助我处理它。

```
 public class BaseList
{
    public object WhereGenerator(object ob)
    {
        QueryOver Ded = ob as QueryOver;
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:02:29.370

```
foreach (var restriction in BaseList.Createrestrictions(parameter))
{
    t.Where(restriction);
}

public class BaseList
{
    public IEnumerable<AbstractCriterion> Createrestrictions(List<MMPFramework.SearchParameter> parameter)
    {
        return parameter.Select(ToCritieria);
    }

    private AbstractCriterion ToCritieria(SearchParameter searchParameter)
    {
        if(searchParameter.Expression == "Like")
        {
            return Restrictions.Like(searchParameter.PropertyName, searchParameter.ObjectValueLo);
        }
        else ...
    }
} 
```