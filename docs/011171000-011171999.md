# StackOverflow 问答 11171000-11171999

# java - 在 Eclipse 插件中包含所有工作区类

> ID：11171002
> 
> 赞同：0
> 
> 时间：2012-06-23T16:06:38.627
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-pde

我正在尝试通过使用 XStream 将任意 Java 对象序列化为 XML 来将任意 Java 对象从工作区传输到我的插件。这工作正常（使用 SIMON），但是当试图在插件站点上恢复它们​​时，我得到一个 CannotResolveClassException（显然）。所以我想以某种方式在我的插件的构建路径中包含工作区类，以便使工作区类型在我的插件中可用，从而能够恢复对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:03:30.383

我已经设法通过使用`URLClassLoader`并遍历工作区中的所有项目（使用资源插件）并将所有子文件夹（递归）添加到这个类加载器来做到这一点。我知道这是某种蛮力，但它正在工作，我无法弄清楚如何确定构建目标文件夹（并非总是 /bin）。

# c# - 如何将文件移动到子目录？C＃

> ID：11171005
> 
> 赞同：1
> 
> 时间：2012-06-23T16:07:05.113
> 
> 标签：c#, .net

我想做一个执行此操作的 C# 应用程序：

1.  选择一个文件夹
2.  将该文件夹中的所有文件复制到该文件夹​​ +/results/

很简单，但不能让它工作。

这是我的代码：

```
string[] files = Directory.GetFiles(folderBrowserDialog1.SelectedPath);
        foreach (string file in files)
        {
            MessageBox.Show(Path.GetFullPath(file));
            //string path=Path.Combine(Path.GetFullPath(file), "results");
            //MessageBox.Show(path);
            string path2 = Path.GetDirectoryName(file);
            path2 = Path.Combine(Path.GetDirectoryName(file), @"results\");
            path2 = Path.Combine(path2, file);
            MessageBox.Show(path2);
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T16:13:11.653

首先，创建目标目录，如果不存在

```
string[] files = Directory.GetFiles(folderBrowserDialog1.SelectedPath);  
string destPath = Path.Combine(folderBrowserDialog1.SelectedPath, "results");
if(Directory.Exists(destPath) == false)
    Directory.CreateDirectory(destPath); 
```

然后在你的循环内

```
 foreach (string file in files)  
    {  
        string path2 = Path.Combine(destPath, Path.GetFileName(file));  
        File.Move(file, path2);
    } 
```

请注意[File.Move](http://msdn.microsoft.com/en-us/library/system.io.file.move)不能用于覆盖现有文件。
如果文件存在于目标目录中，您将收到 IOException。

如果您只想复制而不是移动，只需`File.Move`使用 更改语句即可`File.Copy(file, path2, true);`。此重载将毫无疑问地覆盖目标目录中的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T17:07:07.930

如果您尝试将文件（而不是复制它们）移动到新的子文件夹，那么...

```
DirectoryInfo d = new DirectoryInfo(folderBrowserDialog1.SelectedPath);
foreach (FileInfo f in d.GetFiles())
{
    string fold = Path.Combine(f.DirectoryName, @"results\");

    if (!Directory.Exists(fold))
        Directory.CreateDirectory(fold);

    File.Move(f.FullName, Path.Combine(fold, f.Name));
} 
```

这只是一个直接回答问题的示例，但您还应该处理异常等。例如，此示例假定用户将有权创建目录。此外，它假定目标目录中不存在同名的文件。您如何处理此类情况取决于您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T16:12:51.577

如果要重定位整个目录，可以使用`Directory.Move`来实现这一点。

```
string path1 = Path.GetDirectoryName(file);
string path2 = Path.Combine(Path.GetDirectoryName(file), @"results\");
Directory.Move(path1, path2); 
```

或者，如果您只想复制文件夹（不删除第一个目录），则需要手动进行。

```
string path1 = Path.GetDirectoryName(file);
string path2 = Path.Combine(Path.GetDirectoryName(file), @"results\");

foreach(var file in Directory.GetFiles(path1))
{
    File.Copy(file, Path.Combine(path2, file));
    // File.Move(file, Path.Combine(path2, file)); // use this to move instead of copy
} 
```

*我没有对此进行测试，因此可能需要进行一些修改*

# rest - RESTful URL 的好处

> ID：11171006
> 
> 赞同：6
> 
> 时间：2012-06-23T16:07:21.860
> 
> 标签：rest

有什么好处

```
 http://www.example.com/app/servlet/cat1/cat2/item 
```

网址

超过

```
 http://www.example.com/app/servlet?catid=12345 
```

网址

如果我们使用第一个 URL 会不会有任何问题，因为最初我们使用第一个 URL 并更改为第二个 URL。这是在网站上不断变化的大量内容的背景下。这里的类别可以是无限的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T14:57:35.963

对于 RESTful 应用程序，您不应该关心 URL 模板。“更好”的是应用程序更容易生成的那个。

关于索引和 SEO，很抱歉，但搜索引擎不太可能理解您的超媒体 API 以对其进行索引。

为了更好地理解 URL，请查看：

*   [那个 REST API 真的是 RPC 吗？罗伊菲尔丁似乎这么认为](https://stackoverflow.com/questions/1164154/is-that-rest-api-really-rpc-roy-fielding-seems-to-think-so)
*   [理查森成熟度模型](http://martinfowler.com/articles/richardsonMaturityModel.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T17:19:19.900

一个区别是第二个 URL 没有命名类别，因此客户端代码和实际上的人类用户需要首先查找一些类别名称到数字的映射页面，存储这些映射，一直使用它们，然后刷新列表遇到以前未知的类别等。给定第一个 URL，即使项目页面未提及它们，您也一定知道类别（但站点可能仍然需要某个类别的列表）。

另一个区别是第一种格式编码了两个级别的分类，而第二种隐藏了级别的数量。这可能会使事情变得更容易或更难，具体取决于您希望深度的可变性（现在或以后）以及是否有人不恰当地将代码耦合到 2 级深度（例如，通过使用正则表达式解析 URL，使用两个子组捕获类别）。当然，如果它们将自身耦合到 id->category-path 映射页面中列出的当前类别的深度，则可能存在相同的问题......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T17:24:39.310

就 SEO 而言，如果这是您希望搜索引擎索引的内容，[那么首先最好假设类别名称描述了](http://www.bing.com/search?q=seo%20url%20best%20practices&qs=n&form=QBRE&pq=seo%20url%20best%20practices&sc=1-21&sp=-1&sk=)它们下的内容。大多数引擎偏爱与搜索查询匹配的 URL。但是，如果类别名称可以更改，您可能需要在更改时维护[301 重定向](http://www.bing.com/search?q=301%20redirects%20seo&qs=n&form=QBRE&pq=301%20redirects%20seo&sc=8-17&sp=-1&sk=)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-23T18:32:22.070

第一种形式将更好地被搜索引擎索引，并且对缓存更友好。后者既是优势（您可以减少服务器上的负载）也是劣势（您不一定知道有人重新访问您的页面，并且页面更改可能不会立即传播给用户：必须小心一点为实现这一目标而采取的措施）。

第一种形式还需要（有点）更繁重的处理才能从 URL 中获取所需的项目。

如果您可以控制 URL 语法，我建议您这样做：

```
 http://www.example.com/app/servlet/cat1/cat2/item/12345 
```

或者更好的是，通过 URL 重写，

```
 http://www.example.com/cat1/cat2/item/12345 
```

其中 12345 是资源 ID。然后，当您访问数据时（无论如何您都会这样做），能够快速完成；您只需验证记录是否与 cat1、cat2 和 item 匹配。尝试使用页面缓存设置并确保发送 ETag（可能基于 ID？）和 Last-Modified 标头，以及检查 If-Modified-Since 和 If-None-Match 标头请求。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-24T12:27:34.143

我们在这里所拥有的不是“更好”索引的问题，而是相关性的问题。

因此，第一个 URL 会将您的页面标记为与主题更相关（假设页面/猫名称和主题之间的相关性）。

例如：假设我们都想为“Red Nike shoes”排名，假设（为简单起见）我们都在除 URL 之外的所有 SEO 因素上获得相同的“分数”。在第一种情况下，URL 可以是`http://www.example.com/app/servlet/shoes/nike/red-nice` 并且在第二种情况下`http://www.example.com/app/servlet?itemid=12345`。

只需查看两个字符串，您就可以直观地感觉到哪一个更相关……第一个告诉您“哎呀，是的，我很喜欢红色耐克鞋”，而第二个有点咕哝“红色耐克鞋？你是说项目代码 12345 吗？”

此外，在 URL 中包含部分 KW 将帮助您获得更多相关性，还可以帮助您赢得“长尾”目标而无需太多工作。（有时只在 URL 中有 KW 就足够了）

但问题更深。第二种类型的 URL 包括参数，这些参数可能（99.9% 会）导致重复内容问题。使用参数时，您必须处理以下问题：

*   不存在的 catid 会发生什么？
*   有参数验证吗？（它的证据有多充分？）

等等。

那么为什么选择第二个版本呢？因为有时您别无选择... :)

# c# - 如何使 WPF DataGrid 将更改保存回数据库？

> ID：11171010
> 
> 赞同：1
> 
> 时间：2012-06-23T16:08:17.360
> 
> 标签：c#, sql, wpf, datagrid, dataset

我四处搜索并找到了一些答案，但我认为我的情况有点不同。这是我的 XAML 标记：

```
<DataGrid Name="dataGrid1" 
          ItemsSource="{Binding Path=myPath}" 
          AutoGenerateColumns="True" /> 
```

这是 C# 代码：

```
 a = new SqlDataAdapter("SELECT * FROM Patients", c);
    d = new DataSet();
    a.Fill(d, "myPath");
    dataGrid1.DataContext = d; 
```

DataGrid 显示数据正常。如何将更改保存到数据库？我尝试过：

```
a.Update(d); 
```

但是有一个例外说：

> 更新找不到 TableMapping['Table'] 或 DataTable 'Table'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T09:55:44.313

好吧，我应该更加努力地搜索帖子，无论如何这是解决方案：

```
 SqlCommandBuilder builder = new SqlCommandBuilder(a);
    a.UpdateCommand = builder.GetUpdateCommand();
    a.Update(d); 
```

有关更多详细信息：http: [//msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update.aspx](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update.aspx)

# android - 带有意图的Android startActivity不起作用

> ID：11171012
> 
> 赞同：1
> 
> 时间：2012-06-23T16:08:39.850
> 
> 标签：android, android-layout, android-event

我有一个 countDownTimer ，它是我想要进入错误屏幕的时间 这是 countDownTimer 的代码

```
timer = new CountDownTimer(36000, 1000) {
            @Override
            public void onTick(long millisUntilFinished) {
                // TODOAuto-generated method stub
                remaingTimer.setText(millisUntilFinished + "");
            }

            @Override
            public void onFinish() {
                // TODO Auto-generated methodstub
                Intent goToMainTabs = new Intent(
                        "com.localizedbasedcompetition.FINISHTIME");
                startActivity(goToMainTabs);
            }
        }; 
```

我想去完成时间活动，这是完成时间活动的代码

```
public class FinishTime extends Activity implements OnClickListener{
    Button backToMain;
    TextView errorMessage;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.finishtime);
        initialize();
    }
    private void initialize() {
        // TODO Auto-generated method stub
        backToMain= (Button)findViewById(R.id.bFinishTimeBackToMain);
        errorMessage=(Button)findViewById(R.id.tvFinishTime);
        backToMain.setOnClickListener(this);
    }
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
        case R.id.bFinishTimeBackToMain:
            Intent goToMainTabs = new Intent(
                    "com.localizedbasedcompetition.MAINTABS");
            startActivity(goToMainTabs);
            break;

        default:
            break;
        }
    }

} 
```

这是完成时间活动的主要活动

```
<activity
            android:name=".FinishTime"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.localizedbasedcompetition.FINISHTIME" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity> 
```

我的问题是当 countDownTimer 完成计数时，我得到了一个异常，我做错了什么？

## 这是例外

```
06-23 14:16:14.352: E/AndroidRuntime(1001): FATAL EXCEPTION: main
06-23 14:16:14.352: E/AndroidRuntime(1001): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.localizedbasedcompetition/com.localizedbasedcompetition.FinishTime}: java.lang.ClassCastException: android.widget.TextView
06-23 14:16:14.352: E/AndroidRuntime(1001):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
06-23 14:16:14.352: E/AndroidRuntime(1001):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
06-23 14:16:14.352: E/AndroidRuntime(1001):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
06-23 14:16:14.352: E/AndroidRuntime(1001):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
06-23 14:16:14.352: E/AndroidRuntime(1001):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-23 14:16:14.352: E/AndroidRuntime(1001):     at android.os.Looper.loop(Looper.java:123)
06-23 14:16:14.352: E/AndroidRuntime(1001):     at android.app.ActivityThread.main(ActivityThread.java:4627)
06-23 14:16:14.352: E/AndroidRuntime(1001):     at java.lang.reflect.Method.invokeNative(Native Method)
06-23 14:16:14.352: E/AndroidRuntime(1001):     at java.lang.reflect.Method.invoke(Method.java:521)
06-23 14:16:14.352: E/AndroidRuntime(1001):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-23 14:16:14.352: E/AndroidRuntime(1001):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-23 14:16:14.352: E/AndroidRuntime(1001):     at dalvik.system.NativeStart.main(Native Method)
06-23 14:16:14.352: E/AndroidRuntime(1001): Caused by: java.lang.ClassCastException: android.widget.TextView
06-23 14:16:14.352: E/AndroidRuntime(1001):     at com.localizedbasedcompetition.FinishTime.initialize(FinishTime.java:24)
06-23 14:16:14.352: E/AndroidRuntime(1001):     at com.localizedbasedcompetition.FinishTime.onCreate(FinishTime.java:19)
06-23 14:16:14.352: E/AndroidRuntime(1001):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-23 14:16:14.352: E/AndroidRuntime(1001):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
06-23 14:16:14.352: E/AndroidRuntime(1001):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T16:18:11.427

您需要在 CountDownTimer 上调用 start()。否则它什么也做不了。

[http://developer.android.com/reference/android/os/CountDownTimer.html](http://developer.android.com/reference/android/os/CountDownTimer.html)

并且根据您的异常，您`TextView`在 XML 中将某些内容定义为 a ，而您不小心将其转换为其他内容（那是您的`Button`演员吗？）如果没有看到 xml 就无法分辨，但这就是异常。确保您在 Java 中正确引用了您在 XML 中定义的视图。

哦，正如 iNan 指出的那样，清理你的项目以防万一。Eclipse 有一种讨厌的方式，即不时不更新这样的东西。

# javascript - 将节点检查器与 Grunt 任务一起使用

> ID：11171013
> 
> 赞同：101
> 
> 时间：2012-06-23T16:08:45.893
> 
> 标签：javascript, debugging, node.js, node-inspector, gruntjs

有人使用带有[Grunt的](https://github.com/cowboy/grunt)[节点检查](https://github.com/dannycoates/node-inspector)器进行应用程序调试吗？如果没有，你能推荐一个基于 Grunt 的应用程序的调试工具吗？

我正在为服务器端应用程序使用[nodejs](http://nodejs.org/)，并且我让[Grunt](https://github.com/cowboy/grunt)使用单独的任务（这是因为用户可以单独执行任务）。

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-10-05T03:56:40.510

要在调试中运行 grunt，您需要将 grunt 脚本显式传递给节点：

```
node-debug $(which grunt) task 
```

并`debugger;`在您的任务中添加一条线。`node-inspector`然后将打开带有调试工具的浏览器。

### 编辑 2014 年 2 月 28 日

`node-inspector`添加了命令`node-debug`，该命令以某种状态启动节点`--debug`并将浏览器打开到`node-inspector`页面，当它到达第一`debugger`行或设置断点时停止。

### 编辑 2015 年 1 月 30 日

在 Windows 上，事情要复杂一些。有关说明，请参阅@e.gluhotorenko 的答案。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-11-18T18:12:08.753

### 视窗解决方案

跑

```
node --debug-brk c:\Users\username\AppData\Roaming\npm\node_modules\grunt-cli\bin\grunt taskname 
```

从目录中的 cmd 与您的`Gruntfile.js`. 不要忘记把`debugger;`线放在必要的地方。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-26T20:21:30.433

要调试，我们必须修改 bin 下的 grunt 文件。在我的机器上，grunt 是全局安装的，所以我去 /usr/local/lib/node_modules/grunt/bin 我打开文件并修改：

`#!/usr/bin/env node`

到

`#!/usr/bin/env node --debug-brk`

--debug-brk 将在运行的第一行 javascript 中断。

仅仅这样做是不够的，因为您将无法在节点检查器的下拉列表中找到您的 grunt task js 文件，因此您必须通过添加`debugger;`where来修改您有兴趣调试的文件你希望断点发生。现在你可以在第一次休息后点击继续，你会在你的`debugger;`线上休息

相当笨拙，但这是我迄今为止找到的唯一方法。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-09-27T15:27:06.107

我最近创建了 grunt-node-inspector 以轻松配置 node-inspector 与您的其余 grunt 工作流程，请查看：[https ://github.com/ChrisWren/grunt-node-inspector](https://github.com/ChrisWren/grunt-node-inspector)

这是 Gruntfile 的一部分，它说明了如何使用 grunt-node-inspector、grunt-concurrent 和 grunt-shell 调试 grunt 任务：[https://github.com/CabinJS/Cabin/blob/master/Gruntfile。 js#L44-L77](https://github.com/CabinJS/Cabin/blob/master/Gruntfile.js#L44-L77)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-14T06:52:19.753

我已经完成了运行我的应用程序并启动节点检查器的任务。它比当前的提议要好得多，您只需在 gruntfile 中添加此任务：

```
 grunt.registerTask('debug', 'My debug task.', function() {
        var done = this.async();
        grunt.util.spawn({
            cmd: 'node',
            args: ['--debug', 'app.js'],
            opts: {
                //cwd: current workin directory
            }
        },
        function (error, result, code) {
            if (error) {
                grunt.log.write (result);
                grunt.fail.fatal(error);
            }
            done();
        });
        grunt.log.writeln ('node started');
        grunt.util.spawn({
            cmd: 'node-inspector',
            args: ['&'],
            opts: {
                //cwd: current workin directory
            }
        },
        function (error, result, code) {
            if (error) {
                grunt.log.write (result);
                grunt.fail.fatal(error);
            }
            done();
        });
        grunt.log.writeln ('inspector started');
    }); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-03-22T18:46:26.160

这里有很好的答案。**2017年，现在你可以做到**

`node --inspect --debug-brk $(which grunt) taskName`

打印类似的东西。

`To start debugging, open the following URL in Chrome: chrome-devtools://devtools/bundled/inspector.html?experiments=true&v8only=true&ws=127.0.0.1:9229/232652c3-f63c-4b00-8de9-17dfad5db471`

在 chrome 中打开那个 URL，你就可以开始了！

我正在使用 Node 7.3.0，我在 Mac 上。您可能必须遵循其他帖子中的一些建议才能使其在 Windows 上运行。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-02-07T13:57:23.400

**2019 年更新**

*   如果您想在调试模式下启动 grunt 任务并在第一行中断：

    `node --inspect-brk $(which grunt) taskName`

*   如果要在特定端口以调试模式启动 grunt 任务：

    `node --inspect-brk=8080 $(which grunt) taskName`

*   如果要将 VSCODE 附加到运行 grunt 调试会话的节点进程，请在 vscode 中使用以下配置：

```
{
  // Use IntelliSense to learn about possible attributes.
  // Hover to view descriptions of existing attributes.
  // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
  "version": "0.2.0",
  "configurations": [

    {
      "type": "node",
      "request": "attach",
      "name": "Attach by port IP 5656",
      "port": 8080
    }
  ]
} 
```

# php - 向特定域发送 POST 请求？

> ID：11171014
> 
> 赞同：2
> 
> 时间：2012-06-23T16:08:47.967
> 
> 标签：php, javascript, jquery, ajax, cross-domain

所以，我对 Web 开发还很陌生，我遇到了一些麻烦。我希望能够发送一个 POST 请求（或者实际上，任何允许我这样做的方法），从 Firefox 扩展/书签到我控制的 PHP 页面。

我一直在阅读跨域资源共享，但我还没有设法让它工作，我可以使用一些指导。

似乎 jQuery ajax 请求可以使这成为可能，但我还不能让它工作，也许是因为我是新手。

我最近一直在阅读这方面的内容，但我一直无法在脑海中将它们融合在一起，因为似乎有很多正确的答案。

编辑：

所以我得到的 PHP 页面是这样设置的：

```
 header("Access-Control-Allow-Origin: *");
    header("Access-Control-Allow-Methods: POST");

addLink($_POST['username'], $_POST['password'], $_POST['URL']); 
```

该函数只是根据用户名/密码将 URL 添加到数据库中。那不是问题。

而且我已经让它与来自同一域的请求一起工作：

```
$(document).ready(function() {
   $("a").click(function() {
      $.post("sendLinkInfo.php", { username: "<username here>", 
       password: "<password here>", URL: window.location.href },

   });
 }); 
```

麻烦在于从任意的小书签/Firefox 扩展跨域进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:13:02.933

使用 jQuery 非常简单

```
$.ajax({
  type: "POST",
  url: "some.php",
  data: { name: "John", location: "Boston" },
  success: function(msg) {
      alert( "Data Saved: " + msg );
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T16:15:28.677

看看 jQuery 文档：

```
var menuId = $("ul.nav").first().attr("id");
var request = $.ajax({
  url: "script.php", //Modify this part
  type: "POST",
  data: {id : menuId},
  dataType: "html"
});

request.done(function(msg) {
  $("#log").html( msg );
});

request.fail(function(jqXHR, textStatus) {
  alert( "Request failed: " + textStatus );
}); 
```

这应该跨域工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T16:24:43.027

对于跨域问题，您可以使用如下：

```
$("a").click(function() {
    $.ajax({
        type: 'POST',
        url: 'sendLinkInfo.php',
        crossDomain: true,
        data: {
            username: "<username here>",
            password: "<password here>",
            URL: window.location.href
        },
        dataType: 'html',
        success: function(data) {
           console.log(data);
        },
        error: function() {
            alert('POST failed.');
        }
    });
}); 
```

# python - Python 和 Yum 发布 CentOS 5.4

> ID：11171015
> 
> 赞同：3
> 
> 时间：2012-06-23T16:09:07.977
> 
> 标签：python, centos, yum

我是 Linux/CentOS 的新手，使用它并没有什么乐趣。当我在服务器上运行它时，我正在使用 python 2.7 在我的 Mac 上本地开发一些东西，我遇到了一些问题，我把它归结为 Python 的过时版本（2.4.3）然后我更新了它，这不是很好主意。我从源代码构建它然后遇到问题，Yum 和其他模块消失了。

我没有回来使用 Python 2.4.3，但我仍然没有 Yum 回来。

> [root@issues ~]# yum 找不到平台独立库 找不到平台相关库 考虑将 $PYTHONHOME 设置为 [:]
> 
> “导入站点”失败；使用 -v 进行回溯 导入运行 yum 所需的 Python 模块之一时出现问题。导致此问题的错误是：
> 
> 没有名为 yum 的模块
> 
> 请安装提供此模块的软件包，或验证模块是否安装正确。
> 
> 上述模块可能与当前版本的 Python 不匹配，即：2.4.3 (#1, Jun 18 2012, 08:55:31) [GCC 4.1.2 20080704 (Red Hat 4.1.2-52 )]
> 
> 如果您无法自行解决此问题，请访问 yum 常见问题解答： [http ://wiki.linux.duke.edu/YumFaq](http://wiki.linux.duke.edu/YumFaq)

搜索大量论坛，每个人都说这是因为 Python 的版本不同，我不再是这种情况，我认为这与 Yum 映射到不同的目录有关。

我在其他地方找到了这个命令并运行了这个：

> [root@issues ~]# rpm -V python
> 
> 缺少 /usr/bin/python2
> 
> 缺少 /usr/bin/python2.4

有谁知道该怎么做或去哪里寻求帮助？我真的需要尽快解决这个问题！

谢谢

实际上只是补充一下，如果我运行 python，我会得到这个输出。

> [root@issues ~]# python
> 
> 找不到与平台无关的库
> 
> 找不到平台相关库
> 
> 考虑将 $PYTHONHOME 设置为 [:]
> 
> “导入站点”失败；使用 -v 进行回溯
> 
> Python 2.4.3（#1，2012 年 6 月 18 日，08:55:31）
> 
> [GCC 4.1.2 20080704 (Red Hat 4.1.2-52)] 在 linux2 上
> 
> 输入“帮助”、“版权”、“信用”或“许可”以获取更多信息。
> 
> > > >

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T16:24:22.400

是的，在 Linux 系统上，升级默认的 python 2.4.x 版本不是一个好主意，Linux 包管理和许多其他工具需要它才能正常运行。最好单独安装其他python版本并直接使用（如：/usr/bin/python2.7）

Python 可执行文件本身无法正常工作，因为它无法在启动期间加载默认模块“站点”。

python安装坏了。

由于您不能使用“Yum”或“RPM”来引导您的软件包，我建议您使用您的“OS”安装光盘或 ISO 映像直接安装 rpm/yum 软件包。它将python安装修复为依赖项。

我已经解决了这个问题，经过各种试验，这是我解决它的唯一方法。

[编辑：]

请参阅：[关于 PYTHONPATH 的 Python 2.x 多个版本问题](https://stackoverflow.com/questions/9552898/python-2-x-multiple-version-issues-regarding-pythonpath)

另外错误是它无法找到包目录。

```
Could not find platform independent libraries <prefix>
Could not find platform dependent libraries <exec_prefix>
Consider setting $PYTHONHOME to <prefix>[:<exec_prefix>] 
```

查看我拥有的路径。检查包的路径，你可以设置“ [PYTHONHOME](http://docs.python.org/using/cmdline.html#envvar-PYTHONHOME) ”。

```
# installing zipimport hook
import zipimport # builtin
# installed zipimport hook
# /usr/lib64/python2.4/site.pyc matches /usr/lib64/python2.4/site.py
import site # precompiled from /usr/lib64/python2.4/site.pyc
# /usr/lib64/python2.4/os.pyc matches /usr/lib64/python2.4/os.py
import os # precompiled from /usr/lib64/python2.4/os.pyc 
```

如果找不到类似的包位置，是否可以使用 RPM 直接重新安装 python2.4

```
rpm --force -hUv url_for_python_rpm 
```

# performance - Magento 数据流加载 CSV 文件的时间过长

> ID：11171020
> 
> 赞同：0
> 
> 时间：2012-06-23T16:09:46.203
> 
> 标签：performance, magento, profile, dataflow

我有一个包含要更新的库存数据的大型 CSV 文件（超过 35,000 行）。我创建了一个扩展 Mage_Catalog_Model_Convert_Adapter_Productimport 的方法来进行库存更新。然后我使用高级配置文件来进行调用该方法的更新。

当我手动运行配置文件时，它运行良好。问题是当我使用处理在 cronjob 中运行的配置文件的扩展时，系统加载和解析 CSV 文件需要很长时间。我将 cronjob 设置为每天早上 6:15 运行，但文件的第一行直到当天下午 1:20 才会处理，加载文件需要 7 个小时。

这使得进程以某种方式在中间停止，只有不到 1/3 的记录被处理。我一直很沮丧试图找出原因，试图解决问题，但没有运气。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T01:31:55.957

Varien_File_Csv 是解析 csv 文件的类。它占用了太多的内存。

记录使用的内存量和峰值内存使用量的功能，

```
public function log($msg, $level = null)
{
if (is_null($level)) $level = Zend_Log::INFO;

$units = array('b', 'Kb', 'Mb', 'Gb', 'Tb', 'Pb');
$m = memory_get_usage();
$mem = @round($m / pow(1024, ($i = floor(log($m, 1024)))), 2).' '.$units[$i];
$mp = memory_get_peak_usage();
$memp = @round($mp / pow(1024, ($ip = floor(log($mp, 1024)))), 2).' '.$units[$ip];

$msg = sprintf('(mem %4.2f %s, %4.2f %s) ', $mem, $units[$i], $memp, $units[$ip]).$msg;

Mage::log($msg, $level, 'my_log.log', 1);
} 
```

$MyClass->log('每记录一条消息，记忆就更接近天空');

您可以拆分 csv（使用相同的文件名）并多次调用该作业。您需要确保之前的呼叫不会与新的呼叫同时运行。

谢谢

# java - Java：使用带有箭头键的击键

> ID：11171021
> 
> 赞同：6
> 
> 时间：2012-06-23T16:09:59.833
> 
> 标签：java, swing, actionlistener, key-bindings, keystroke

我有一些代码需要修改。在代码中，原作者用于`KeyStroke.getKeyStroke`获取用户输入。例如，在此代码中，他使用`a`而不是左箭头。

我想改变这个，但我不知道怎么做。

这是原始代码：

```
registerKeyboardAction(
        new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                tick(RIGHT);
            }
        }, "right", KeyStroke.getKeyStroke('d'), WHEN_IN_FOCUSED_WINDOW
); 
```

我必须把它改成这样，但是运行时，它不起作用： `KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT);`

`KeyStroke.getKeyStroke("RIGHT");`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T07:37:51.800

按`DOWN` `ARROW KEY`, 启动程序，首先观察字符串。这里看看这个示例程序：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class KeyBindingExample
{
    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("Key Binding Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        DrawingPanel contentPane = new DrawingPanel();
        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
        contentPane.requestFocusInWindow();
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new KeyBindingExample().createAndDisplayGUI();
            }
        });
    }
}

class DrawingPanel extends JPanel
{
    private int x;
    private int y;
    private String[] commands = {
                                    "UP",
                                    "DOWN",
                                    "LEFT",
                                    "RIGHT"
                                };                      

    private ActionListener panelAction = new ActionListener()
    {   
        @Override
        public void actionPerformed(ActionEvent ae)
        {
            String command = (String) ae.getActionCommand();
            if (command.equals(commands[0]))
                y -= 1;             
            else if (command.equals(commands[1]))
                y += 1;
            else if (command.equals(commands[2]))
                x -= 1;
            else if (command.equals(commands[3]))
                x += 1;

            repaint();  
        }
    };

    public DrawingPanel()
    {
        x = 0;
        y = 0;

        for (int i = 0; i < commands.length; i++)       
            registerKeyboardAction(panelAction,
                            commands[i],
                            KeyStroke.getKeyStroke(commands[i]),
                            JComponent.WHEN_IN_FOCUSED_WINDOW);
    }

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(500, 300));
    }

    @Override
    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        String displayText = "X : " + x + " and Y : " + y;
        System.out.println(displayText);
        g.drawString(displayText, x, y);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-23T16:14:14.230

你应该能够使用`KeyStroke.getKeyStroke("DOWN");`, `"UP"`, `"LEFT"`, `"RIGHT"`, 来做你想做的事。

有关更多详细信息，请参阅[javadoc](http://docs.oracle.com/javase/7/docs/api/javax/swing/KeyStroke.html#getKeyStroke%28java.lang.String%29)。

# hadoop - Mahout Hive 集成

> ID：11171023
> 
> 赞同：2
> 
> 时间：2012-06-23T16:10:28.777
> 
> 标签：hadoop, hive, mahout

我想将基于 Hadoop 的 Mahout 推荐器与 Apache Hive 结合起来。这样我生成的推荐就直接存储在我的 Hive 表中。有没有人知道类似的教程。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T16:55:54.107

基于 Hadoop 的 Mahout 推荐器可以将结果直接存储在 HDFS 中。

Hive 还允许您在任何数据之上创建表模式，使用`CREATE EXTERNAL TABLE recommend_table`它还指定数据的位置 ( `LOCATION '/home/admin/userdata';`)。

这样，您可以确保当新数据写入该位置时 -`/home/admin/userdata`它已经可供 Hive 使用，并且可以通过现有`Table`架构进行查询：recommend_table。

前段时间我在博客上写过：[external-tables-in-hive-are-handy](http://pyfunc.blogspot.com/2012/03/external-tables-in-hive-are-handy.html)。此解决方案有助于任何类型的 map-reduce 程序输出，这些输出需要立即用于 Hive ad-hoc 查询。

# css - “动画方向”不起作用。为什么？

> ID：11171027
> 
> 赞同：1
> 
> 时间：2012-06-23T16:10:41.577
> 
> 标签：css, css-animations

这是小提琴：http: [//jsfiddle.net/joplomacedo/mnj8n/](http://jsfiddle.net/joplomacedo/mnj8n/)

```
@-webkit-keyframes half-flip {
    0% { -webkit-transform: rotateX(0deg); }
    100% { -webkit-transform: rotateX(90deg); }
}

.half-flip-out {
    -webkit-animation: half-flip 1s;
    -webkit-transform: rotateX(90deg);
}

.half-flip-in {
    -webkit-animation: half-flip 1s reverse;
    -webkit-transform: rotateX(0deg);
} 
```

我正在用 jQuery 切换类。出于某种原因，.half-flip-in 的作用与 .half-lip-out 完全相同。我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T19:10:00.040

问题不在于`animation-direction`。我稍后会解释更多，所以现在让我们深入研究它。

您的 CSS3 关键帧动画声明应如下所示：

```
@-webkit-keyframes half-flip {
    0% {
        -webkit-transform: rotateX(0deg);
    }

    100% {
        -webkit-transform: rotateX(90deg);
    }
}

@-webkit-keyframes half-flip02 {
    0% {
        -webkit-transform: rotateX(90deg);
    }

    100% {
        -webkit-transform: rotateX(0deg);
    }
}

.half-flip-out {
    -webkit-animation: half-flip 1s;
}

.half-flip-in {
    -webkit-animation: half-flip02 1s;
} 
```

正如您在上面看到的，有 2 个`@-webkit-keyframes`声明 - 每个都与另一个相反。另请注意，我从`-webkit-transform: rotateX(0deg);`and中删除`-webkit-transform: rotateX(90deg);`了`.half-flip-out`and `.half-flip-in`。原因很简单：***它已经在关键帧动画中定义为 0%，即第一帧，以及 100%，即最后一帧。***

接下来，你应该清理你的 jQuery。不必使用计数器来决定从 DIV 中添加或删除哪个类。此外，jQuery 中更短的代码等同于更快的执行速度。始终优化您的代码。

这就是你的 jQuery 的样子：

```
var folding_img_wrap = $('.folding_img_wrap'),
    toggle_count = 0;

$('.toggle').on('click', function() {
    if (toggle_count % 2 === 0) {
        folding_img_wrap.addClass('half-flip-out').removeClass('half-flip-in');
    } else {
        folding_img_wrap.removeClass('half-flip-out').addClass('half-flip-in');
    }
    toggle_count++;
}); 
```

这就是我推荐的方式：

```
var folding_img_wrap = $('.folding_img_wrap'),

$(".toggle").toggle(function(){
    folding_img_wrap.addClass('half-flip-in').removeClass('half-flip-out');
},function(){
    folding_img_wrap.removeClass('half-flip-out').addClass('half-flip-in');
}); 
```

[你可以在这里](http://jsfiddle.net/mnj8n/25/)查看我的解决方案。

记住还要`-moz-`为你的 CSS3 声明使用前缀，否则，这只适用于 Chrome 和 Safari。另请注意，`keyframes`IE9 或 Opera 不支持此功能。

# jquery - 为什么 jQuery UI 滑块不起作用？

> ID：11171031
> 
> 赞同：1
> 
> 时间：2012-06-23T16:11:19.567
> 
> 标签：jquery, asp.net-mvc

我忘了添加一些东西，或者为什么看不到滑块？

**html**

```
<div class="demo">
    <p>
        <label for="amount">
            Maximum price:</label>
        <input type="text" id="amount" style="border: 0; color: #f6931f; font-weight: bold;" value="@ViewData.Model" />
    </p>
    <div id="slider-range-min">
    </div>
</div>
<!-- End demo -->
<div class="demo-description">
    <p>
        Fix the minimum value of the range slider so that the user can only select a maximum.
        Set the <code>range</code> option to "min."</p>
</div>
<!-- End demo-description --> 
```

**风格**

```
#demo-frame > div.demo { 
    padding: 10px !important; 
}; 
```

**脚本**

```
$(function () {
    $("#slider-range-min").slider({
        range: "min",
        value: 37,
        min: 1,
        max: 700,
        slide: function (event, ui) {
            $("#amount").val("$" + ui.value);
        }
    });
    $("#amount").val("$" + $("#slider-range-min").slider("value"));
}); 
```

**完整的 HTML 源代码**

```
<!DOCTYPE html>
<html>
<head>
    <link href="/Content/Stylesheet/Site.css" rel="stylesheet" type="text/css" />

  <link rel="stylesheet" href="/Content/themes/base/jquery.ui.all.css" type="text/css" media="all" />
   <link rel="stylesheet" href="/Content/themes/base/jquery.ui.theme.css" type="text/css" media="all" />

    <script src="/Content/Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="/Content/Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>
    <script src="/Content/Scripts/jquery.validate.min.js" type="text/javascript"></script>
    <script src="/Content/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
    <script src="/Content/Scripts/jquery.bgiframe-2.1.2.js" type="text/javascript"></script>
    <script src="/Content/Scripts/jquery-ui-i18n.min.js" type="text/javascript"></script>

    <link href="favicon.ico" rel="icon" />

</head>
<body>

        <div class="editor-field">
            <div class="demo">
    <p>
        <label for="amount">
            Maximum price:</label>
        <input type="text" id="amount" style="border: 0; color: #f6931f; font-weight: bold;" value="50" />
    </p>
    <div id="slider-range-min">
    </div>
</div>
<!-- End demo -->
<div class="demo-description">
    <p>
        Fix the minimum value of the range slider so that the user can only select a maximum.
        Set the <code>range</code> option to "min."</p>
</div>
<!-- End demo-description -->

<style type="text/css">
    #demo-frame > div.demo { padding: 10px !important; };
    </style>
<script type="text/javascript">
    $(function () {
        $("#slider-range-min").slider({
            range: "min",
            value: 37,
            min: 1,
            max: 700,
            slide: function (event, ui) {
                $("#amount").val("$" + ui.value);
            }
        });
        $("#amount").val("$" + $("#slider-range-min").slider("value"));
    });
</script>

            <span class="field-validation-valid" data-valmsg-for="Discount" data-valmsg-replace="true"></span>
        </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T17:24:20.917

检查路径并删除css代码末尾的分号

```
#demo-frame > div.demo { 
padding: 10px !important; 
}
//instead of 

#demo-frame > div.demo { 
padding: 10px !important; 
}; 
```

我认为它会工作。

# django - 更新到 django 1.4 时出现 sqlite3 错误

> ID：11171033
> 
> 赞同：3
> 
> 时间：2012-06-23T16:11:32.870
> 
> 标签：django, sqlite, django-1.4

我创建了一个新的虚拟环境，以便可以将我的代码从 django1.3 更新到 django1.4。django1.3环境与我使用的sqlite版本和数据库没有问题。Django1.4 版本给了我一个错误：

```
DISTINCT ON fields is not supported by this database backend 
```

我没有找到有关可能导致此问题的新版本更改的任何信息。有谁知道为什么它在 1.3 而不是 1.4 中可以正常工作？

# design-patterns - 软件更新的设计模式

> ID：11171040
> 
> 赞同：10
> 
> 时间：2012-06-23T16:12:29.847
> 
> 标签：design-patterns, auto-update, updates

有人知道围绕软件更新的任何设计模式吗？具体来说，我想要一种将旧文件/设置转换为最新版本的模式。

我能想到的最好的解决方案是制定一套规则来说明如何从每个版本转换到下一个版本（例如 v1.0 到 v1.1，v1.1 到 v1.2，...）。然后要将文件/设置转换为最新版本，您将按顺序运行所有转换规则。

这并没有让我觉得这是一种非常优雅的做事方式——有更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T03:25:45.313

我在一个包含版本控制系统的系统中工作，以将数据库迁移到最新版本，它就是这样工作的。我们所做的唯一改进是，有时我们希望避免遍历所有版本，因为这是一个漫长的过程，因此如果您在 1.3 版本中并希望迁移到最新版本，则可以定义从任何版本到任何版本的迁移并且您有要从中迁移的脚本：

1.  1.3 至 1.4
2.  1.4 至 1.5
3.  1.5 至 1.6
4.  1.6 至 1.7
5.  1.7 至 1.8
6.  1.4 至 1.7

我会自动检测到它可以使用单个脚本来遍历 1.4 到 1.7 三个版本并使用 1、6 和 5。但只有在迁移时间很长的情况下才值得……

如果您不需要实际迁移数据，而只是以最新版本的格式使用它，您可以通过使用对象组合的[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)将“1.3”格式的对象转换为“1.8”来实现相同的目的" 格式在中间使用一串适配器。

回应评论：可悲的是，我们不得不手工完成 1.4 到 1.7。您需要一些非常聪明的东西才能从各个脚本中编写优化的更新脚本，而无需按顺序执行它们。

# actionscript-3 - 使用硬件加速时 AS3 SecurityPanel 不显示

> ID：11171041
> 
> 赞同：0
> 
> 时间：2012-06-23T16:12:33.933
> 
> 标签：actionscript-3, webcam

如果我发布没有硬件加速的 Windows 投影仪 (.exe)，一切正常，但如果我选择直接或 gpu 硬件加速，我根本不会显示安全面板。其他人有同样的问题，还是只有我一个？

基本上我想发布一个独立的网络摄像头游戏，但如果我尝试使用 getCamera()，用户将根本看不到安全问题，我也不会初始化摄像头。

有谁知道这个的解决方法？我很想在我的游戏中获得硬件加速。

```
import flash.system.Security;
import flash.system.SecurityPanel;
//import flash.media.Camera;

Security.showSettings(SecurityPanel.CAMERA);
//var camera:Camera=Camera.getCamera(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:13:21.440

我得到了这个工作，但我通过独立和“创建投影仪”菜单创建了一个投影仪，而不是通过 Flash IDE。我能够使用最新的闪光灯让面板显示出来。

编译器设置：-swf-version=16 -use-gpu=true

// 测试显示 stage3D + panel final public class Test extends Sprite {

```
 private var cam:Camera;
    private var video:Video = new Video();

    public function Test():void {

        var stage3D:Stage3D = stage.stage3Ds[0];
        stage3D.addEventListener(Event.CONTEXT3D_CREATE, handleContext);
        stage3D.requestContext3D();

        trace(cam.name);
    }

    /**
     *  @private
     */
    private function handleContext(e:Event):void {
        var stage3D:Stage3D     = stage.stage3Ds[0];
        var context:Context3D   = stage3D.context3D;
        context.configureBackBuffer(stage.stageWidth, stage.stageHeight, 0, true);
        context.clear(0,0,0,1);
        context.present();

        Security.showSettings(SecurityPanel.CAMERA);

        cam = Camera.getCamera();
        cam.setMode(640,360,30);
        video.attachCamera(cam);

        // change to upload via texture instead
        addChild(video);
    } 
```

以我的经验，如果不使用特定的 gpu api，硬件加速收益非常小。以我的经验，相机反而加速了，只有特定类型的视频解压。如果您不使用 Stage3D，您可能不会获得任何可见的收益。

# python - 如何使用正则表达式解析 HTML 中的数字？

> ID：11171045
> 
> 赞同：49
> 
> 时间：2012-06-23T16:13:02.567
> 
> 标签：python, regex

我想用 Python 编写一个简单的正则表达式，从 HTML 中提取一个数字。HTML 示例如下：

```
Your number is <b>123</b> 
```

现在，如何提取“123”，即字符串“Your number is”之后的第一个粗体文本的内容？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-06-23T16:18:38.393

```
import re
m = re.search("Your number is <b>(\d+)</b>",
      "xxx Your number is <b>123</b>  fdjsk")
if m:
    print m.groups()[0] 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-23T16:15:11.373

鉴于`s = "Your number is <b>123</b>"`当时：

```
 import re 
 m = re.search(r"\d+", s) 
```

会工作并给你

```
 m.group()
'123' 
```

正则表达式在您的字符串中查找 1 个或多个连续数字。

请注意，在这种特定情况下，我们*知道*会有一个数字序列，否则您必须测试 的返回值`re.search()`以确保它`m`包含有效的引用，否则`m.group()`会导致`AttributeError:`异常。

当然，如果您要处理大量 HTML，您需要认真研究一下[BeautifulSoup——](http://www.crummy.com/software/BeautifulSoup/)它的用途不止于此。BeautifulSoup 的整个想法是避免使用字符串操作或[正则表达式](http://docs.python.org/library/re.html)进行“手动”解析。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-23T16:20:55.943

```
import re
x = 'Your number is <b>123</b>'
re.search('(?<=Your number is )<b>(\d+)</b>',x).group(0) 
```

这将搜索 'Your number is' 字符串后面的数字

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-02-17T19:20:11.170

```
import re
print re.search(r'(\d+)', 'Your number is <b>123</b>').group(0) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-06-22T10:45:26.773

最简单的方法就是提取数字（数字）

```
re.search(r"\d+",text) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-07-07T11:55:00.543

```
val="Your number is <b>123</b>" 
```

### 选项1

```
m=re.search(r'(<.*?>)(\d+)(<.*?>)',val)

m.group(2) 
```

### 选项：2

```
re.sub(r'([\s\S]+)(<.*?>)(\d+)(<.*?>)',r'\3',val) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-06-14T12:24:46.763

```
import re
found = re.search("your number is <b>(\d+)</b>", "something.... Your number is <b>123</b> something...")

if found:
    print found.group()[0] 
```

这里 (\d+) 是分组，因为只有一个组`[0]`被使用。当有多个分组`[grouping index]`时应使用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-11-25T12:31:44.950

要提取为 python 列表，您可以使用`findall`

```
>>> import re
>>> string = 'Your number is <b>123</b>'
>>> pattern = '\d+'
>>> re.findall(pattern,string)
['123']
>>> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-03T21:03:20.283

您可以使用以下示例来解决您的问题：

```
import re

search = re.search(r"\d+",text).group(0) #returns the number that is matched in the text

print("Starting Index Of Digit", search.start())

print("Ending Index Of Digit:", search.end()) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-17T13:20:08.180

```
import re
x = 'Your number is <b>123</b>'
output = re.search('(?<=Your number is )<b>(\d+)</b>',x).group(1)
print(output) 
```

# objective-c - 对 NSString 中的每个单词调用一个方法

> ID：11171051
> 
> 赞同：5
> 
> 时间：2012-06-23T16:14:14.603
> 
> 标签：objective-c, string, cocoa, cocoa-touch, nsstring

我想遍历一个`NSString`并在每个具有特定标准的单词上调用一个自定义函数（例如，“有 2 个'L's”）。我想知道最好的方法是什么。我应该使用查找/替换模式吗？块？

```
-(NSString *)convert:(NSString *)wordToConvert{
    /// This I have already written
    Return finalWord;
}

-(NSString *) method:(NSString *) sentenceContainingWords{
    // match every word that meets the criteria (for example the 2Ls) and replace it with what convert: does. 
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-23T18:15:31.953

要枚举字符串中的单词，您应该使用`-[NSString enumerateSubstringsInRange:options:usingBlock:]`with`NSStringEnumerationByWords`和`NSStringEnumerationLocalized`。列出的所有其他方法都使用一种识别可能不适合区域设置或不符合系统定义的单词的方法。例如，由逗号分隔但不是空格的两个单词（例如“foo，bar”）不会被任何其他答案视为单独的单词，但它们在 Cocoa 文本视图中。

```
[aString enumerateSubstringsInRange:NSMakeRange(0, [aString length])
                            options:NSStringEnumerationByWords | NSStringEnumerationLocalized
                         usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop){
    if ([substring rangeOfString:@"ll" options:NSCaseInsensitiveSearch].location != NSNotFound)
        /* do whatever */;
}]; 
```

正如. `-enumerateSubstringsInRange:options:usingBlock:`_ *_ `enclosingRange`*因此，如果要替换匹配的单词，可以使用`[aString replaceCharactersInRange:substringRange withString:replacementString]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T16:48:47.783

我知道的循环数组的两种方法对你有用，如下所示：

```
NSArray *words = [sentence componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

for (NSString *word in words)
{
    NSString *transformedWord = [obj method:word];
} 
```

和

```
NSArray *words = [sentence componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

[words enumerateObjectsWithOptions:NSEnumerationConcurrent usingBlock:^(id word, NSUInteger idx, BOOL *stop){
    NSString *transformedWord = [obj method:word];
}]; 
```

另一种方法，`–makeObjectsPerformSelector:withObject:`，对你不起作用。它期望能够调用`[word method:obj]`与您期望的相反的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T16:33:49.820

如果您可以使用正则表达式编写条件，那么您可能会进行正则表达式匹配以获取这些单词，然后将它们传递给您的`convert:`方法。

`componentsSeparatedByString:`您还可以使用or将字符串拆分为单词数组`componentsSeparatedByCharactersInSet:`，然后检查数组中的单词并检测它们是否以某种方式符合您的标准。如果它们合适，则将它们传递给`convert:`.

希望这可以帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-23T16:34:46.713

我建议使用 while 循环来遍历这样的字符串。

```
NSRange spaceRange = [sentenceContainingWords rangeOfString:@" "];
NSRange previousRange = (NSRange){0,0};
do {
   NSString *wordString;
   wordString = [sentenceContainingWord substringWithRange:(NSRange){previousRange.location+1,(spaceRange.location-1)-(previousRange.location+1)}];
   //use the +1's to not include the spaces in the strings
   [self convert:wordString];
   previousRange = spaceRange;
   spaceRange = [sentenceContainingWords rangeOfString:@" "];
} while(spaceRange.location != NSNotFound); 
```

这段代码可能需要重写，因为它非常粗糙，但你应该明白这一点。

编辑：刚刚看到 Jacob Gorban 的帖子，你绝对应该这样做。

# javascript - Comet（服务器推送）是我正在寻找的答案吗？

> ID：11171060
> 
> 赞同：1
> 
> 时间：2012-06-23T16:16:03.297
> 
> 标签：javascript, ajax, performance, optimization, comet

我有一个 Web 应用程序，我试图通过减少它运行的数据库查询的数量来提高效率。我倾向于实施某种 Comet 风格的解决方案，但我在这个部门缺乏经验，这让我想知道是否存在更简单的解决方案。

为简洁起见，假设我有一个数据库，其中包含网络上的系统列表及其当前状态（无论它们是启动还是关闭）。用户可以登录 Web 应用程序并选择她有兴趣监控的系统。之后，她可以访问显示当前关闭的系统数量的监控页面。

到目前为止，计数是使用 Ajax 刷新的......客户端每分钟向服务器发送一个请求，服务器反过来对数据库运行查询以获取当前计数并将结果返回给客户端。我知道这效率低下；对于每个登录的客户端，每分钟都会对数据库运行另一个查询。O(n) = 不好！

我知道我可以使用某种类型的缓存，例如 memcached，但这仍然意味着每分钟对每个用户都有一个请求。更好，但我仍然觉得这不是最好的解决方案。

我设想的更像是这样的：

*   服务器每分钟运行一次查询，以获取当前关闭的所有系统的计数。
*   然后服务器将此数据推送给感兴趣的客户端。

这样，无论有多少用户登录并观看监控页面，服务器每分钟只运行一个查询。O(1) = 好！问题是，即使在我完成所有研究之后，我也无法完全弄清楚如何实现这一点。老实说，我并不完全理解我在寻找什么，因此很难研究解决方案。所以我希望更多开明的开发者能带领我走向正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:07:58.743

你可以用彗星做到这一点。但是您也可以只使用一个 JavaScript 计时器，每分钟左右轮询一次服务器。这取决于您希望获得反馈的速度。不必一直保持 TCP 连接打开。

此外，您了解服务器状态的方式与客户端获取此信息的方式无关。您不希望每次客户端请求时都更新服务器的状态。相反，您将在应用服务器上有一个计时器，它会轮询服务器状态，然后将其存储。客户端请求将从这个存储的状态而不是实际的实时状态中获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:11:28.620

这个问题的解决方案可以通过一个名为[Pusher](http://pusher.com/)的应用程序轻松解决，这是一个托管的发布/订阅 API。简而言之，Pusher 提供了两个库，一个用于客户端（订阅者），一个用于服务器（发布者）。

发布者可以是您服务器上的单个脚本（[有很多可用的语言](http://pusher.com/docs/server_libraries)）设置为以您希望的任何时间间隔运行。每次运行时，它都会连接到一个通道并发布它生成的任何数据。客户端是通过 Web 应用程序中的一些 JavaScript 创建的，每当用户导航到您的页面时，客户端都会订阅您的服务器脚本发布到的同一频道，并在数据可用时立即接收数据，然后可以操作不管你认为合适。

**服务器：**

```
#!/usr/bin/php
<?php
require('Pusher.php');

$dbh = new PDO("mysql:host=$db_host;dbname=$db_name", $db_user, $db_pass);
foreach($dbh->query('SELECT hostname FROM systems WHERE status = 0') as $row) {
    $systems[] = $row['hostname'];
}
$pusher = new Pusher($pusher_key, $pusher_secret, $pusher_app_id);
$pusher->trigger(
    'my-channel',
    'my-event',
    array('message' => implode('<br />', $systems))
); 
```

**客户端：**

```
<!DOCTYPE html>
<html>
  <head>
    <title>Pusher Test</title>
    <script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
    <script src="http://js.pusher.com/1.12/pusher.min.js" type="text/javascript"></script>
    <script type="text/javascript">
      var pusher = new Pusher(key);
      var channel = pusher.subscribe('my-channel');
      channel.bind('my-event', function(data) {
        $('#systems').html(data.message);
      });
    </script>
  </head>
  <body>
    <div id="systems"></div>
  </body
</html> 
```

因此，在这种情况下，无论有多少客户端访问该页面，都只会运行一个数据库查询，并且在每个时间间隔，所有订阅的客户端都将使用新数据进行更新。

还有一个用 Ruby 编写的 Pusher 协议的开源服务器实现，称为[Slanger](https://github.com/stevegraham/slanger)。

# c# - 防止文本在 AvalonEdit 中更新

> ID：11171062
> 
> 赞同：2
> 
> 时间：2012-06-23T16:16:25.587
> 
> 标签：c#, wpf, avalonedit

我知道如果您处理编辑器的 PreviewKeyDown 事件，然后将 KeyEventArgs 的 e.Handled 设置为 true，则可以完全禁用输入。

但是，我试图弄清楚如何在修改文本后防止文档文本更新。我想处理 Document.Changing 事件，如下所示：

```
textEditor.Document.Changing += Document_Changing; 
```

其中 textEditor 是我的 AvalonEdit 编辑器。我想在函数中检索正在修改的文本

```
private void Document_Changing(object sender, DocumentChangeEventArgs e) 
```

然后根据它做一些计算。但是，我不希望文本在处理之前在编辑器中更新。我正在 Document_Changing 中进行一些异步处理，并在它完成时触发另一个事件，然后我才希望它更新。我不想只禁用视觉更新，而是完全更新文档。

那么有没有办法禁用此更新，类似于在处理与键盘相关的事件时如何防止输入？

先感谢您

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T18:28:08.340

您可以使用该`textEditor.TextArea.TextEntering`事件来阻止用户键入。但是，该事件仅用于打字；其他操作（例如 Cut/Paste/Drag'n'Drop）目前不会导致任何编辑器事件（只有文档事件，但此时中止为时已晚）。

另一种选择是实现`IReadOnlySectionProvider`将文本标记为只读。这适用于文本输入和剪贴板操作，甚至在插入符号位于只读部分时禁用“粘贴”菜单命令。该类`TextSegmentReadOnlySectionProvider`为接口提供了一个有用的默认实现。

要将整个文档设为只读，只需设置`textEditor.IsReadOnly = true;`.

# php - CakePHP 2.0 禁用路由问题

> ID：11171063
> 
> 赞同：1
> 
> 时间：2012-06-23T16:16:25.413
> 
> 标签：php, cakephp, cakephp-2.0

我在 routes.php 中有自己的路由规则，为应该通过 URL 访问的所有页面定义，例如 mywebsite/blog/ 和 mywebsite/blog/category/category-name，即我的整个网站的结构由我的自定义路线。

现在，我有很多使用 requestAction 的元素，例如

```
 $websiteabstract = $this -> requestAction(array(
        'controller' => 'assets',
        'action' => 'displayHomeAbstract'
       )); 
```

这给了我一个错误错误：找不到控制器，可能是因为我没有为 /assets/displayHomeAbstract 定义路由。但是，当我明确声明控制器的名称和操作时，为什么我必须为此定义自定义路由？那不应该完全绕过路由吗？要么我根本不了解路由。还是我真的必须在我的 routes.php 中定义所有可能的路由（甚至是那些仅由 requestAction 使用的路由）？我的意思是，我不想让用户直接访问 mywebsite/assets/displayHomeAbstract，只能通过一个元素。

谢谢

编辑：这是我的 routes.php [http://pastebin.com/aAKBwNZJ](http://pastebin.com/aAKBwNZJ) 请看一下第 128 行，这正是我不想要的，因为 /assets/displayHomeAbstract 只能通过 requestAction 访问。

编辑：这是发出请求的元素：http: [//pastebin.com/0tK5dYJk](http://pastebin.com/0tK5dYJk)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T16:35:17.083

好的，在与 IRC 中的开发人员进行广泛讨论之后，我想我理解这一点足以向您解释：

在这种情况下，您必须为您的 requestAction 定义自定义路由**。**requestAction 正在模拟一个完整的请求。它分派一个请求，就好像每次都使用字符串 url 访问一样，即使提供的 url 是一个数组。这本书是指当您**除了**使用默认路由（routes.php 的最后一行）之外定义了自定义路由时，您可以使用数组 url 来与这些路由无关。但是，这些数组 url 依赖于 /lib/ 文件夹中的默认 routes.php，用于构造 url 字符串。如果您要使用自定义路由模式，则必须自己构建 url 字符串。

注意：以下评论来自此答案的早期版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T17:25:24.137

解决问题的关键是了解 Cake 路由的范围以及它是如何工作的。

在 CakePHP 中定义路由时，它不仅仅用于将 URL 映射到控制器。[路由器](https://github.com/cakephp/cakephp/blob/master/lib/Cake/Routing/Router.php)还使用它来生成链接地址，在您的情况下，将提供给[requestAction()](https://github.com/cakephp/cakephp/blob/master/lib/Cake/Core/Object.php#L46)的路径映射到控制器。在幕后，Cake 正在根据您的参数创建一个 URL 字符串，然后将其传递给路由器以找到正确的控制器。由于不存在这样的路线，因此它失败了。

作为一种解决方案，我实际上建议不要为该逻辑使用控制器。根据它的作用，组件或助手可能是一个更好的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T17:38:33.507

查看第 156 行。您注释掉了加载 CakePHP 的默认路由的行。

# clojure - Clojure（脚本）：用于同步推理异步操作的宏

> ID：11171066
> 
> 赞同：3
> 
> 时间：2012-06-23T16:16:45.447
> 
> 标签：clojure, clojurescript

## 语境

我正在使用 ClojureScript，所以 Ajax 对我的工作方式如下：

```
(make-ajax-call url data handler); 
```

处理程序看起来像：

```
(fn [response] .... ) 
```

现在，这意味着当我想说“获取新数据并更新左侧边栏”之类的话时，我的最终结果看起来像：

```
(make-ajax-call "/fetch-new-data" {} update-sidebar!) [1] 
```

现在，我宁愿把它写成：

```
(update-sidebar! (make-ajax-call "/fetch-new-data" {})) [2] 
```

但它不起作用，因为 make-ajax 调用立即返回。

## 问题

有没有办法通过单子或宏来完成这项工作？这样 [2] 会自动重写为 [1] 吗？我相信：

*   不会有性能惩罚，因为它被重写为 [1[
*   我可以更清楚地推理，因为我可以以同步步骤而不是异步事件来思考

    我怀疑我不是第一个遇到这个问题的人，所以如果这是一个众所周知的问题，那么“Google for Problem Foo”形式的答案是完全有效的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-18T10:45:05.270

自 2013 年 6 月 28 日发布 clojure core.async lib 以来，您或多或少都可以这样做：[https ://gist.github.com/juanantonioruz/7039755](https://gist.github.com/juanantonioruz/7039755)

这里粘贴的代码：

```
(ns fourclojure.stack
    (require [clojure.core.async :as async :refer :all]))

(defn update-sidebar! [new-data]
  (println "you have updated the sidebar with this data:" new-data))

(defn async-handler [the-channel data-recieved]
  (put! the-channel data-recieved)
  )

(defn make-ajax-call [url data-to-send]
  (let [the-channel (chan)]
    (go   
     (<! (timeout 2000)); wait 2 seconds to response
     (async-handler the-channel (str "return value with this url: " url)))
    the-channel
    )
  )

(update-sidebar! (<!! (make-ajax-call "/fetch-new-data" {}))) 
```

更多信息：
* [http://clojure.com/blog/2013/06/28/clojure-core-async-channels.html](http://clojure.com/blog/2013/06/28/clojure-core-async-channels.html)
* [https://github.com/clojure/core.async/blob/master/examples /walkthrough.clj](https://github.com/clojure/core.async/blob/master/examples/walkthrough.clj)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T06:41:04.720

我们在seesaw的[async 分支](https://github.com/daveray/seesaw/tree/feature/async)中对此有粗略的想法。特别参见[seesaw.async](https://github.com/daveray/seesaw/blob/feature/async/src/seesaw/async.clj)命名空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T18:24:32.370

宏会改变代码的外观，同时使 Ajax 调用保持异步。这是一个简单的模板宏。另一种方法是将调用 make-ajax-call 包装在一个等待结果的函数中。虽然其中任何一个都可以工作，但它们可能看起来有点尴尬和“不像 ajax”。这些好处是否值得额外的抽象层？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T18:24:37.803

使用线程宏怎么样？还不够好吗？

```
(->> update-sidebar! (make-ajax-call "/fetch-new-data" {})) 
```

# mysql - 在mysql中选择不同的记录

> ID：11171067
> 
> 赞同：1
> 
> 时间：2012-06-23T16:16:47.773
> 
> 标签：mysql, sql

我的桌子

```
ANONYMOUS
ONE   TWO
1      2
2      1
1      2
3      1 
```

现在我想选择一个和两个不同的集合。我选择的列表应该是

```
ANONYMOUS
    ONE   TWO
    1      2
    3      1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T16:23:50.733

你的问题不是很清楚，但我想你的意思是：

```
SELECT DISTINCT one, two
FROM yourtable AS T1
WHERE one <= two
OR NOT EXISTS
(
     SELECT *
     FROM yourtable AS T2
     WHERE T1.one = T2.two
     AND T1.two = T2.one
) 
```

它查找不存在`(one, two)`反向对的行。`(two, one)`如果两者都存在，它会选择这样的对`one < two`。它还选择值相等的行。

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/16106/1)

如果您更愿意使用 a`JOIN`而不是`NOT EXISTS`您可以这样做：

```
SELECT DISTINCT T1.one, T1.two
FROM yourtable AS T1
LEFT JOIN yourtable AS T2
ON T1.one = T2.two
AND T1.two = T2.one
WHERE T1.one <= T1.two
OR T2.one IS NULL 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/16106/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:43:04.390

```
SELECT DISTINCT a.*
FROM        `ANONYMOUS` a
LEFT JOIN   `ANONYMOUS` b ON (a.one=b.two and a.two=b.one)
WHERE       b.one is null or a.one<b.one
ORDER BY    1,2 
```

# jquery - 在表单中复制元素时出现问题 -> 相同名称

> ID：11171070
> 
> 赞同：1
> 
> 时间：2012-06-23T16:17:00.827
> 
> 标签：jquery

所以我得到了这个：

***HTML***

```
<table id="mytable">
<tr>
   <td>

   </td>
   <td>

   </td>
</tr>
<tr>
   <td>
      3\. Choose elements:
   </td>
   <td>
      <select name="antal_tidspunkter" id="antal_tidspunkter">
         <option value="1" SELECTED>1</option>
         <option value="2">2</option>
         <option value="3">3</option>
         <option value="4">4</option>
         <option value="5">5</option>
      </select>
   </td>
</tr>
    <tr class="highlightedRowStart">
   <td class="borderLeft">
      Time
   </td>
   <td class="borderRight">
      <select name="seats_timeclock[29]">
         <option value="08:00">08:00</option>
         <option value="08:30">08:30</option>
         <option value="09:00">09:00</option>
         <option value="09:30">09:30</option>
         <option value="10:00">10:00</option>
         <option value="10:30">10:30</option>
         <option value="11:00">11:00</option>
         <option value="11:30">11:30</option>
         <option value="12:00">12:00</option>
         <option value="12:30">12:30</option>
         <option value="13:00">13:00</option>
         <option value="13:30">13:30</option>
         <option value="14:00">14:00</option>
         <option value="14:30">14:30</option>
         <option value="15:00">15:00</option>
         <option value="15:30">15:30</option>
         <option value="16:00">16:00</option>
         <option value="16:30">16:30</option>
         <option value="17:00">17:00</option>
         <option value="17:30">17:30</option>
         <option value="18:00" SELECTED>18:00</option>
         <option value="18:30">18:30</option>
         <option value="19:00">19:00</option>
         <option value="19:30">19:30</option>
         <option value="20:00">20:00</option>
         <option value="20:30">20:30</option>
         <option value="21:00">21:00</option>
         <option value="21:30">21:30</option>
         <option value="22:00">22:00</option>
         <option value="22:30">22:30</option>
      </select>
   </td>
</tr>
<tr class="highlightedRowMiddle">
   <td class="borderLeft">
      2:
   </td>
   <td class="borderRight">
      <select name="seats_free_2tables[29]">
         <option value="0">0</option>
         <option value="1">1</option>
         <option value="2" SELECTED>2</option>
         <option value="3">3</option>
         <option value="4">4</option>
         <option value="5">5</option>
         <option value="6">6</option>
         <option value="7">7</option>
         <option value="8">8</option>
         <option value="9">9</option>
         <option value="10">10</option>
         <option value="11">11</option>
         <option value="12">12</option>
         <option value="13">13</option>
         <option value="14">14</option>
         <option value="15">15</option>
         <option value="16">16</option>
         <option value="17">17</option>
         <option value="18">18</option>
         <option value="19">19</option>
         <option value="20">20</option>
      </select>
   </td>
</tr>
<tr class="">
   <td class="borderLeft">
     4:
   </td>
   <td class="borderRight">
      <select name="seats_free_4tables[29]">
         <option value="0">0</option>
         <option value="1">1</option>
         <option value="2">2</option>
         <option value="3">3</option>
         <option value="4" SELECTED>4</option>
         <option value="5">5</option>
         <option value="6">6</option>
         <option value="7">7</option>
         <option value="8">8</option>
         <option value="9">9</option>
         <option value="10">10</option>
         <option value="11">11</option>
         <option value="12">12</option>
         <option value="13">13</option>
         <option value="14">14</option>
         <option value="15">15</option>
         <option value="16">16</option>
         <option value="17">17</option>
         <option value="18">18</option>
         <option value="19">19</option>
         <option value="20">20</option>
      </select>
   </td>
</tr>
<tr class="highlightedRowEnd">
   <td class="borderLeft">
      Converttable
   </td>
   <td class="borderRight">
      <select name="seats_converttables[29]">
         <option value="0">0</option>
         <option value="1">1</option>
         <option value="2" SELECTED>2</option>
         <option value="3">3</option>
         <option value="4">4</option>
         <option value="5">5</option>
         <option value="6">6</option>
         <option value="7">7</option>
         <option value="8">8</option>
         <option value="9">9</option>
         <option value="10">10</option>
         <option value="11">11</option>
         <option value="12">12</option>
         <option value="13">13</option>
         <option value="14">14</option>
         <option value="15">15</option>
         <option value="16">16</option>
         <option value="17">17</option>
         <option value="18">18</option>
         <option value="19">19</option>
         <option value="20">20</option>
      </select>
   </td>
</tr>
<tr class="spacer">
   <td></td>
</tr>
</table> 
```

***jQuery***

```
$(document).ready(function() {

    $("#antal_tidspunkter").bind("change", function() {
        $("#mytable tr:gt(6)").remove();
        for (var i = 1; i < this.value; i++) {
            $("#mytable tr:gt(1):lt(5)").clone().appendTo("#mytable");
        }
    });
}); 
```

**演示：http:** [//jsfiddle.net/bTWQg/](http://jsfiddle.net/bTWQg/)

像这样工作，当您更改选择器中的元素数量时，它会添加更多元素。

我的问题是，当它复制元素时，它会保留名称：`seats_timeclock[29]`所以稍后当我处理表单（**PHP**）时，我只收到一个元素的数据。

`[]`无论如何，`11111, 99999`每次元素被复制时都会在里面添加一个随机数吗？否则我无法获取填充在新元素上的数据..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:55:14.293

```
$(document).ready(function() {

    // function to generate random number
    // between 1111 to 9999

    function randNum() {
        return Math.floor(Math.random() * (9999 - 1111 + 1)) + 1111;
    }

    $("#antal_tidspunkter").bind("change", function() {
        $("#mytable tr:gt(6)").remove();
        for (var i = 1; i < this.value; i++) {
            $("#mytable tr:gt(1):lt(5)")
                .clone()
                .find('select[name^=seats_timeclock]')
                attr('name', function() { // changing the name
                    return 'seats_timeclock_[' + randNum() + ']';
                })
                .end() // go back to clone element
                .appendTo("#mytable");
        }
    });
}); 
```

**[演示](http://jsfiddle.net/bTWQg/7/)**

上面的代码将在不更改 HTML 和单个链语句的情况下工作。

### 根据你的演示

```
$(document).ready(function() {
    // function to generate random number
    function randNum() {
        return Math.floor(Math.random() * (9999 - 1111 + 1)) + 1111;
    }
    $("#antal_tidspunkter").bind("change", function() {
        $("#mytable tr:gt(6)").remove();
        for (var i = 1; i < this.value; i++) {
            var randnr = randNum();

            $("#mytable tr:gt(1):lt(5)")
                .clone()
                .find('select[name^=seats_timeclock]')
                .attr('name', function() { // changing the name
                    return 'seats_timeclock[' + randnr + ']';
                })
                .end() // need to put end to jump to clone
                .find('select[name^=seats_free_2tables]')
                .attr('name', function() { // changing the name
                    return 'seats_free_2tables[' + randnr + ']';
                })
                .end()  // need to put end to jump to clone
                .find('select[name^=seats_free_4tables]')
                .attr('name', function() { // changing the name
                    return 'seats_free_4tables[' + randnr + ']';
                })
                .end()  // need to put end to jump to clone
                .find('select[name^=seats_converttables]')
                .attr('name', function() { // changing the name
                    return 'seats_converttables[' + randnr + ']';
                })
                .end() // go back to clone element
                .appendTo("#mytable");
        }
    });
}); 
```

**[演示](http://jsfiddle.net/bTWQg/10/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T16:23:07.540

使用此代码：

```
$(document).ready(function(){

    $("#antal_tidspunkter").bind("change", function() {
        $("#mytable tr:gt(6)").remove();
        for (var i = 1; i < this.value; i++) {
            $("#mytable tr:gt(1):lt(5)").clone().children("select").attr("name", "seats_free_2tables[" + random() + "]").appendTo("#mytable");
        }
     });
});​ 
```

对于该`random()`功能，请使用以下代码：

```
function random()
{
    return Math.floor(Math.random()*10);
} 
```

* * *

## 更新：此代码完全有效：

```
function random()
{
    return Math.floor(Math.random()*10);
}
$(document).ready(function(){
    $("#antal_tidspunkter").bind("change", function() {
        $("#mytable tr:gt(6)").remove();
        for (var i = 1; i < this.value; i++) {
            var a = $("#mytable tr:gt(1):lt(5)").clone();
            a.find(".random").attr("name", "seats_free_2tables[" + random() + "]");
            a.appendTo("#mytable");
        }
    });
});​ 
```

看到这个[小提琴](http://jsfiddle.net/bTWQg/5/)。给所有人上一堂课`random`，你需要改变！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T16:24:19.970

您可以使用数组输入：

```
<select name="seats_timeclock[]"> 
```

这样，您可以在表单中添加任意数量的输入，它们将被浏览器正确打包和发送。

然后，在 PHP 中，您将拥有`$_POST['seats_timeclock'][0]`， `$_POST['seats_timeclock'][1]`依此类推。您可以轻松地遍历该数组。

```
foreach($_POST['seats_timeclock'] as $key => $seats_timeclock) {
    // the other array posts, will be serialized in the same way, 
    // so you can access the other fields having the same index
    $seats_free_2tables = $_POST['seats_free_2tables'][$key];
    $seats_free_4tables = $_POST['seats_free_4tables'][$key];
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T16:26:19.187

您可以在克隆元素后更改`name`属性：

```
 var clone = $("#mytable tr:gt(1):lt(5)").clone();
  var min = 1111;
  var max = 9999;
  var number = Math.round(Math.random() * (max-min)) + min ; 
  clone.find('select[name^=seats_timeclock]')
       .attr('name','seats_timeclock['+number+']');
  clone.appendTo("#mytable"); 
```

这是一个演示：http: [//jsfiddle.net/bTWQg/3/](http://jsfiddle.net/bTWQg/3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T16:27:11.463

```
$(document).ready(function(){
    var clonedObj;
    $("#antal_tidspunkter").bind("change", function() {
        $("#mytable tr:gt(6)").remove();
        for (var i = 1; i < this.value; i++) {
            clonedObj = $("#mytable tr:gt(1):lt(5)").clone();
            $(clonedObj).find('select[name="seats_timeclock[29]"]').attr('name', 'seats_timeclock[' + Math.floor((Math.random()*100000)+1) + ']');
            $(clonedObj).appendTo("#mytable");
        }
     });
});​ 
```

**编辑：**支持内部的可变数字`seats_timeclock`。利用 jQuery [filter()](http://api.jquery.com/filter/)函数和一个简单的正则表达式。

```
$(document).ready(function(){
    var clonedObj;
    $("#antal_tidspunkter").bind("change", function() {
        $("#mytable tr:gt(6)").remove();
        for (var i = 1; i < this.value; i++) {
            clonedObj = $("#mytable tr:gt(1):lt(5)").clone();
            $(clonedObj).find('select').filter(function(){
                if($(this).attr('name').match(/seats_timeclock/)){
                    return true;
                } else {
                    return false;
                }                   
            }).attr('name', 'seats_timeclock[' + Math.floor((Math.random()*100000)+1) + ']');
            $(clonedObj).appendTo("#mytable");
        }
     });
});​ 
```

# php - postgreSQL 到 googlecharts

> ID：11171071
> 
> 赞同：1
> 
> 时间：2012-06-23T16:17:24.963
> 
> 标签：php, postgresql, google-visualization

我使用 PHP 从 postgreSQL 中提取数据，我将使用它来构建 GoogleChart 数据表。GoogleCharts 接受数组数组（格式：[[data1, data2, data3],[data4, data5, data6]]。

为了正确格式化数组，我使用以下语法：

```
$GoogleChartString ="["; //opening bracket inserted
while ($row = pg_fetch_row($QueryResult)) 
{
$GoogleChartString = $GoogleChartString . "[" .implode(",", $row) . "],"; 
}
$GoogleChartString = substr($GoogleChartString,0,-1)."]"; 
```

现在，有些字段是字符串，有些是数字。GoogleCharts DataTables 期望字符串是单引号的。但是， pg_fetch_row 不会在字符串周围放置任何分隔符。我怎样才能以一种优雅而有效的方式生成 GoogleCharts 所期望的适当格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:18:03.883

一个好消息，一个坏消息。

坏消息：到目前为止，您确实编写了太多代码，实际上浪费了字符，并且您自己的代码可能挡住了您的路，因此您无法解决这个问题。

好消息：在 PHP 中构建一个数组，然后使用该[`json_encode`](http://php.net/json_encode)函数，您无需关心格式。是[杰森](http://json.org/)。

```
$googleChart = array();
while ($row = pg_fetch_row($QueryResult)) {
    $googleChart[] = $row;
}
$googleChartString = json_encode($googleChart); 
```

每当您处理一些 API 时，请查找规范（例如 Json）。然后查看 PHP 手册如何支持该规范。通常开箱即用，否则您也可以使用很多库。

***编辑：***

*   一些技术参考（是的，Json）：[https ://developers.google.com/chart/interactive/docs/datatables_dataviews](https://developers.google.com/chart/interactive/docs/datatables_dataviews)

代码片段（[演示](http://codepad.org/fuTNk4s2)）：

```
$data = array(array(data1, data2, data3),array(data4, data5, data6));

echo json_encode($data); 
```

输出：

```
[["data1","data2","data3"],["data4","data5","data6"]] 
```

# python - Feedparser.py 在根目录中，但仍然无法在开发服务器上运行

> ID：11171073
> 
> 赞同：0
> 
> 时间：2012-06-23T16:17:36.943
> 
> 标签：python, google-app-engine, feedparser

我的项目目录中有 feedparser.py，但我的代码在本地 google 开发服务器上无法用于 google 应用程序引擎。

我得到这个错误，

```
 File "/home/ahmad/GAE/livemetals/lv.py", line 34, in <module>
    d = feedparser.parse(url)
AttributeError: 'module' object has no attribute 'parse'
INFO     2012-06-23 16:13:25,891 dev_appserver.py:2891] "GET / HTTP/1.1" 500 - 
```

这是我正在使用的代码

```
url = "http://www.mysite.com"

d = feedparser.parse(url)
articles = {}
for row in d.entries:
    temp = [row['link'].encode('utf-8'),row['title'].encode('utf-8'),row['summary'].encode('utf-8')]
    articles.append(temp) 
```

我可以在非谷歌应用引擎 python 脚本上使用 feedparser。但是，当我复制“feedparser.py”时，即使我将它导入为以下内容，我仍然无法让它在我的项目中工作

```
import feedparser 
```

如何让 feedparser 在我的 GAE 项目中工作？谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:30:07.270

在我看来，GAE python 运行时正在寻找另一个`feedparser`模块。
你的项目中有另一个 `feedparser.py`脚本吗？
我会尝试打印`feedparser.__file__`以检查您的项目指向的模块的位置。

# c# - 如何将枚举作为参数传递，以便它可以用于执行强制转换？

> ID：11171074
> 
> 赞同：0
> 
> 时间：2012-06-23T16:17:57.770
> 
> 标签：c#, windows-phone-7.1

在下面的存根中，如何将 (MyEnum) 作为参数传入，以便可以将此过程与任何枚举一起使用？

```
public static Enum Proc(this Enum e)
{
Int32 i = (Int32)(MyEnum)e;
... 
```

这是我想出的可行的解决方案：

```
public static Enum Next(this Enum e, Type eT)
{
  Int32 i = (Int32)(Object)e;   
  return (Enum)Enum.Parse(eT, Enum.GetName(eT, Enum.GetName(eT, ++i) == null? i = 0 : i));  
} 
```

这个解决方案并不理想，因为我必须这样做才能获得下一个值：

```
MyEnum e = (MyEnum)e.Next(typeof(MyEnum)); 
```

我宁愿做

```
MyEnum e = e.Next(typeof(MyEnum)); 
```

甚至更好：

```
MyEnum e = e.Next(); 
```

任何能提供简单解决方案的人都能明白这一点。

此外，我上面编写的代码在 LinqPad 中运行良好，但只能在 WP7 中编译，然后在运行时抛出异常（InvalidProgramException）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:35:16.783

编辑：我更新了这个以返回列表中的下一个枚举，强类型，不管枚举值的编号可能是什么。我能够在 .NET 4 下编译和运行它，并且没有在 WP7 上尝试过，但我认为我没有使用 SL/WP7 中丢失/禁用的任何东西。

```
public static T Next<T>(this T e) where T : struct
{
    var t = typeof(T);
    if (!t.IsEnum) throw new ArgumentException("T must be an enumerated type");
    if (!Enum.IsDefined(t, e)) throw new ArgumentException();
    var intValue = (int)t.GetField(e.ToString()).GetValue(null);
    var enumValues = t.GetFields(BindingFlags.Public | BindingFlags.Static).Select(x => x.GetValue(null));
    var next = (T?)enumValues.Where(x => (int)x > intValue).Min();
    if (next.HasValue)
        return next.Value;
    else
        return (T)enumValues.Min();
} 
```

它可以简单地使用：

```
var nextE = e.Next(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T19:13:57.137

这是一个循环遍历 any 值的函数`enum`：

```
static public Enum Cycle(this Enum e)
{
    bool found = false;
    Enum first = null;
    foreach (Enum i in Enum.GetValues(e.GetType()))
    {
        if (first == null)
            first = i;
        if (found)
            return i;
        found = e.Equals(i);
    }
    if (found)
        return first;
    return null;
} 
```

对于没有 的 C# 版本`Enum.GetValues`，您必须使用这样的方法，该方法仅适用于值从 0 开始并以 1 递增的枚举：

```
static public Enum Cycle(this Enum e)
{
    var i = ((IConvertible)e).ToInt64(null) + 1;
    var eT = e.GetType();
    var next = Enum.GetName(eT, i);
    return (Enum)Enum.Parse(eT, next ?? Enum.GetName(eT, 0), false);
} 
```

像这样使用它：

```
var nextEnum = (MyEnum)curEnum.Cycle(); 
```

# mysql - 使用上传工具将数据从 MySQL 插入 Zoho Reports

> ID：11171081
> 
> 赞同：1
> 
> 时间：2012-06-23T16:19:21.843
> 
> 标签：mysql, zoho

我在使用 Zoho Reports 上传工具时遇到问题。我已经将它安装在我的服务器上，并且在终端中我想像这样运行 sh 脚本：

```
sh UploadFromDB.sh <username> <password> 
```

当我运行它时，我收到以下错误：

> UploadFromDB.sh：第 20 行：语法错误：文件意外结束（期待“then”）

我在这里做错了什么？

# android - PreferenceScreen 启动活动

> ID：11171085
> 
> 赞同：0
> 
> 时间：2012-06-23T16:20:04.273
> 
> 标签：android, android-layout, android-intent, sharedpreferences

我有一个想要从偏好屏幕加载的活动。我收到以下错误：

```
06-23 16:12:00.470: E/AndroidRuntime(3410): android.content.ActivityNotFoundException:    Unable to find explicit activity class {com.polygonattraction.app/com.polygonattraction.app.functions.GetImageActivity}; have you declared this activity in your AndroidManifest.xml? 
```

我的偏好屏幕代码：

```
 <PreferenceScreen 
        android:title="Get faces"
        android:summary="Get the faces.">

        <intent 
            android:targetClass="com.polygonattraction.app.functions.GetImageActivity"
            android:targetPackage="com.polygonattraction.app" 
         />
    </PreferenceScreen> 
```

我要加载的活动

```
public class GetImageActivity extends Activity 
{
public void onCreate()
{
    System.out.println("Started activity...");
            setContentView(R.layout.actilayout); //not done yet
} 
```

}

这也是我的清单：

```
<uses-sdk android:minSdkVersion="7" />

<application 
    android:icon="@drawable/icon"
    android:label="@string/app_name"
    >

    <service
        android:label="@string/app_name"
        android:name=".LiveService"        
        android:permission="android.permission.BIND_WALLPAPER"
        >

        <intent-filter android:priority="1">
            <action android:name="android.service.wallpaper.WallpaperService" />
        </intent-filter>

        <meta-data android:name="android.service.wallpaper" android:resource="@xml/wallpaper" />
    </service>

    <activity
        android:label="settings"
        android:name="com.polygonattraction.app.functions.Settings"
        android:exported="true">
    </activity>

</application> 
```

我不擅长这个 Android XML 的东西，我习惯于触发 2d 图形编程。为什么他们把事情弄得这么乱？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T16:29:34.497

在您的 AndroidManifest 文件中添加您的活动。

像这样：

```
<activity android:name=".GetImageActivity"  /> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T16:32:31.257

您已将活动声明为`com.polygonattraction.app.functions.Settings`它的实际名称似乎是`com.polygonattraction.app.functions.GetImageActivity`.

尝试在清单中使用以下内容：

```
<activity
    android:label="settings"
    android:name="com.polygonattraction.app.functions.GetImageActivity"
    android:exported="true">
</activity> 
```

代替

```
<activity
    android:label="settings"
    android:name="com.polygonattraction.app.functions.Settings"
    android:exported="true">
</activity> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T16:34:34.390

使 GetImageActivity 的条目也在清单中，就像设置一样

# xml - XSL for-each 来自不同的结构

> ID：11171090
> 
> 赞同：0
> 
> 时间：2012-06-23T16:20:33.433
> 
> 标签：xml, xslt, variables, foreach

我在实现这个 XSLT 时遇到了问题，我需要从以下 XML 创建一个 HTML 表：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<Overview>
<Header>
    <Column name="SysRepositoryLabel_Language" width="10%" align="center">Lingua</Column>
    <Column name="SysRepositoryLabel_Text" width="45%" align="left">Testo</Column>
    <Column name="SysRepositoryLabel_Usage" width="45%" align="left">Uso</Column>
</Header>
<Rows>
  <Row row="0">
    <Column name="SysRepositoryLabel_PKey">1</Column>
    <Column name="SysRepositoryLabel_Language">it</Column>
    <Column name="SysRepositoryLabel_Text">Accedi al Sistema</Column>
    <Column name="SysRepositoryLabel_Usage">AppMenuLabelLogIn</Column>
  </Row>
  <Row row="1">
    <Column name="SysRepositoryLabel_PKey">2</Column>
    <Column name="SysRepositoryLabel_Language">en</Column>
    <Column name="SysRepositoryLabel_Text">LogIn</Column>
    <Column name="SysRepositoryLabel_Usage">AppMenuLabelLogIn</Column>
  </Row>
  <Row row="2">
    <Column name="SysRepositoryLabel_PKey">3</Column>
    <Column name="SysRepositoryLabel_Language">it</Column>
    <Column name="SysRepositoryLabel_Text">Archivio</Column>
    <Column name="SysRepositoryLabel_Usage">AppMenuLabelMasterData</Column>
  </Row>
</Rows>
</Overview> 
```

**这是我想获得的表格：**

```
<table width="100%" cellpadding="0" cellspacing="0" border="0>
  <tr>
    <td width="10%" align="center" valign="center">Lingua</td>
    <td width="45%" align="left" valign="center">Testo</td>
    <td width="45%" align="left" valign="center">Uso</td>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr>
    <td width="10%" align="center" valign="center">it</td>
    <td width="45%" align="left" valign="center">Accedi al Sistema</td>
    <td width="45%" align="left" valign="center">AppMenuLabelLogIn</td>
  </tr>
  <tr>
    <td width="10%" align="center" valign="center">en</td>
    <td width="45%" align="left" valign="center">LogIn</td>
    <td width="45%" align="left" valign="center">AppMenuLabelLogIn</td>
  </tr>
  <tr>
    <td width="10%" align="center" valign="center">it</td>
    <td width="45%" align="left" valign="center">Archivio</td>
    <td width="45%" align="left" valign="center">AppMenuLabelMasterData</td>
  </tr>
</table> 
```

在节点 Header 中，我必须用这个新表的列数和一些属性来作为表的标题，作为文本的宽度和 aling。在节点行中，我有要放入表中的数据，行数应该多于表头之一，但只有表头中的当前值也应该导出到第二个表中。

非常感谢帕斯夸莱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:08:18.230

这是一个示例，假设您想要一个表，其中一个表由 Header/Column 元素填充，然后是由 Rows/Row 元素填充的 tbody。而且我使用模板，而不是每个：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:strip-space elements="*"/>
  <xsl:output method="html" indent="yes"/>

  <xsl:variable name="cols" select="/Overview/Header/Column"/>

  <xsl:template match="Overview">
    <table width="100%" cellpadding="0" cellspacing="0" border="0">
      <xsl:apply-templates select="$cols" mode="cols"/>
      <thead>
        <tr>
          <xsl:apply-templates select="$cols"/>
        </tr>
      </thead>
      <tbody>
        <xsl:apply-templates select="Rows/Row"/>
      </tbody>
    </table>
  </xsl:template>

  <xsl:template match="Header/Column" mode="cols">
    <col width="{@width}" align="{@align}" valign="center"/>
  </xsl:template>

  <xsl:template match="Header/Column">
    <th>
      <xsl:value-of select="."/>
    </th>
  </xsl:template>

  <xsl:template match="Row">
    <tr>
      <xsl:apply-templates select="Column[@name = $cols/@name]"/>
    </tr>
  </xsl:template>

  <xsl:template match="Row/Column">
    <td>
      <xsl:value-of select="."/>
    </td>
  </xsl:template>

</xsl:stylesheet> 
```

Saxon 6.5.5，在针对您发布的输入运行该样式表时，输出

```
<table width="100%" cellpadding="0" cellspacing="0" border="0">
   <col width="10%" align="center" valign="center">
   <col width="45%" align="left" valign="center">
   <col width="45%" align="left" valign="center">
   <thead>
      <tr>
         <th>Lingua</th>
         <th>Testo</th>
         <th>Uso</th>
      </tr>
   </thead>
   <tbody>
      <tr>
         <td>it</td>
         <td>Accedi al Sistema</td>
         <td>AppMenuLabelLogIn</td>
      </tr>
      <tr>
         <td>en</td>
         <td>LogIn</td>
         <td>AppMenuLabelLogIn</td>
      </tr>
      <tr>
         <td>it</td>
         <td>Archivio</td>
         <td>AppMenuLabelMasterData</td>
      </tr>
   </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T10:06:06.513

这是我今晚找到的解决方案；）

```
<xsl:variable name="Cols" select="Overview/Header/Column"/>

...

<xsl:for-each select="Column[@name = $Cols//@name]">
<td valign="center">
<xsl:variable name="CurrentCol" select="@name"/>
<xsl:for-each select="$Cols[@name = $CurrentCol]">
<xsl:attribute name="width"><xsl:value-of select="@width" /></xsl:attribute>
<xsl:attribute name="align"><xsl:value-of select="@align" /></xsl:attribute>
</xsl:for-each>
<xsl:value-of select="."/>
</td>
</xsl:for-each> 
```

我不会发布所有代码，因为现在我添加了很多功能，这些功能可能会让我们失去问题的焦点。但是使用此代码，我能够使用节点 HEADER 的相同列过滤节点 ROW 的列，同时维护标题节点的属性（宽度，对齐）......

# html - 选择下拉菜单项 [WEBBROWSER]

> ID：11171093
> 
> 赞同：-2
> 
> 时间：2012-06-23T16:20:54.583
> 
> 标签：html, visual-studio-2010, visual-c++

HTML 代码

```
<label class="hideContent" for="select_price_category">Select a price category</label>
<select id="price_category" style="margin-left:20px;" name="price_category">
<option price="1500" value="1">£300</option>
<option price="995" value="2">£200</option>
<option price="655" value="3">£300</option>
</select> 
```

你怎么做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T16:34:54.097

那应该在表单元素中。看看这个：[http ://www.w3schools.com/html/html_forms.asp](http://www.w3schools.com/html/html_forms.asp)

# c++ - 我的 ringupsale、showlast 和 cancel 功能有问题

> ID：11171095
> 
> 赞同：0
> 
> 时间：2012-06-23T16:21:13.630
> 
> 标签：c++, dynamic-arrays

该程序使用继承和动态数组

```
enum ItemType {BOOK, DVD, SOFTWARE, CREDIT};  

class Sale  
{  
public:  

Sale();  
void MakeSale(ItemType x, double amt);  
ItemType Item();  
double Price();  
double Tax();  
double Total();  
void Display();  

private:  

double price;  
double tax;  
double total;  
ItemType item;  

}  

//****************************SALE.CPP*******************************  

#include<iostream>  
#include<cmath>  
#include "sales.h"  
using namespace std;  

Sale::Sale()  
{  
    price = 0;  
    tax = 0;  
    total = 0;  
}  

// Credit are suppose to have no tax all other purchases have 

void Sale::MakeSale(ItemType x, double amt)  
{  
    item = x;  
    if(item == CREDIT)  
       total = amt;  
    else  
       total = (amt * tax);  
}  

ItemType Sale::Item()  
{  
    return item;  
}  

double Sale::Price()  
{  
    return price;  
}  

double Sale::Tax()  
{  
    return tax;  
}  

double Sale::Total()  
{  
    return total;  
}  

// display function 

void Sale::Display()  
{  
if(item = BOOK)  
    cout<<"BOOK"<<"    "<<'$'<<price<<"    ";  
    cout<<"Tax"<<"  "<<'$'<<tax<<"    "<<"Total:";  
    cout<<"  "<<'$'<<total<<endl;  
if(item = DVD)  
    cout<<"DVD"<<"    "<<'$'<<price<<"    ";  
    cout<<"Tax"<<"  "<<'$'<<tax<<"    "<<"Total:";  
    cout<<"  "<<'$'<<total<<endl;  
if(item = SOFTWARE)  
    cout<<"SOFTWARE"<<"    "<<'$'<<price<<"    ";  
    cout<<"Tax"<<"  "<<'$'<<tax<<"    "<<"Total:";  
    cout<<"  "<<'$'<<total<<endl;  
if(item = CREDIT)  
    cout<<"CREDIT" <<"    "<<'$'<<price<<"    ";  
    cout<<"Tax"<<"  "<<'$'<<tax<<"    "<<"Total:";  
    cout<<"  "<<'$'<<total<<endl;  
  }
//****************************Register.h*******************************  

#include<iostream>  
#include "sales.h"  
using namespace std;  

const int BLOCKSIZE = 5;  

class Register : Sales  
{  
public:  

Register(int id, double start_amount);  
~Register();  
int GetID();  
double GetAmount();  
void RingUpSale(enum ItemType Saletype, double amount);  
void ShowLast();  
void ShowAll();  
void Cancel();  
double SalesTax(int n);  

private:  

int Register_ID;  
int Current_ArraySize;  
int Number_of_Records;  
double Register_Amount  
Sale *Sales_Array;   
Sale *Temp_Array;  
void expandlist();  
void shrinklist();  
}
//******************************Register.cpp*********************************  

#include<iostream>  
#include "register.h"  
using namespace std;  

// *******************************************************************  
// * Initializing these values for a starting value  
// *******************************************************************  

int Current_ArraySize = 0;  
int Number_of_Records = 0;  

// ******************************************************************  
// *  
// * Function: Constructor for Register  
// * Parameters: ID number and starting amount  
// *  
// * Description: Initializes the ID number and the register amount  
// *   
// ******************************************************************  

Register::Register(int id, double amount)  
{  
    int * Sales_Array;  
    Sales_Array = new int[BLOCKSIZE];  
    int Register_ID = id;  
    double Register_amount = amount;  
} 

// ******************************************************************  
// *  
// * Function: Destructor for Register  
// * Parameters:  
// *  
// * Description: Deletes Sales Array  
// *  
// ******************************************************************  

Register::~Register()  
{
    delete[] Sales_Array;  
}

// ******************************************************************  
// *  
// * Function: GetID  
// * Parameters:  
// *  
// * Description: returns ID  
// *  
// ******************************************************************  

int Register::GetID()  
{  
    return Register_ID;  
}  

// ******************************************************************  
// *  
// * Function: GetAmount  
// * Parameters:  
// *  
// * Description: returns amount  
// *  
// ******************************************************************  

double Register::GetAmount()  
{  
    return Register_Amount;  
}  

// ******************************************************************  
// *  
// * Function: RingUpSale  
// * Parameters: enum ItemType amd amount  
// *   
// * Description: Takes in items sold and amount then adds them   
// *     to the previous list.  
// *   
// ****************************************************************** 
```

不知道为什么 ringupsale 不起作用！

```
void Register::RingUpSale(enum ItemType Saletype, double amount)  
{  
Current_ArraySize++;  

newSale_Array = new Sales_Array[Current_ArraySize];  

//copy all the old sale items into the new list.  

for (int i=0; i<Current_ArraySize; i++)  
{  
newSale_Array[i] = Sales_Array[i];    
}  

//add the new sale at the end of the new array  

newSale_Array[Current_ArraySize-1] = newSale;  

//set the sale array as the new array  

Sales_Array = newSale_Array;  

Number_of_Records++;  
}
// ******************************************************************  
// *   
// * Function: ShowAll  
// * Parameters:  
// *   
// * Description: Lists the contents of the register  
// *  
// ****************************************************************** 
```

我正在尝试显示 sales 数组的所有内容

```
void Register::ShowAll()  
{  
    int i;  
    cout << "the elements int the array are:" <<endl;  
//  for(i=0; i<Current_ArraySize; i++)
//  cout << Sales_Array(Sales_Array+i) << endl;  
}  

// ******************************************************************  
// *  
// * Function: ShowLast  
// * Parameters:  
// *  
// * Description: Show the last transaction  made  
// *  
// ****************************************************************** 
```

我只是想显示销售数组的最后内容

```
void Register::ShowLast()  
{  
    cout << "The last sale was:" << endl;  
//    cout << Sale[Current_ArraySize - 1] << endl;  
}  

// ******************************************************************  
// *  
// * Function: Salestax  
// * Parameters:  
// *  
// * Description: returns the amount of salestax  
// *  
// ******************************************************************  

double Register::SalesTax(int n)  
{
    double  RunTotal=0;  
    if (n<0)  
    {  
        cout<<"Invalid entry.";  
        return 0;  
    }  
    else if (n>Number_of_Records)  
    {  
        for(int i=0; i<=Number_of_Records; i++)  
        {
            RunTotal=RunTotal+Sales_Array[i].Tax();  
            return RunTotal;  
        }  
    }  
    else  
    {  
        for(int i=0; i<=n; i++)  
            {  
                    RunTotal=RunTotal+Sales_Array[i].Tax();  
                    return RunTotal;  
            }  
    }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:27:48.080

这是个问题：

```
Register::Register(int id, double amount)  
{  
    int * Sales_Array;  
    Sales_Array = new int[BLOCKSIZE];  
    int Register_ID = id;  
    double Register_amount = amount;  
} 
```

`Sales_Array`由于构造函数中的局部变量`Register`隐藏了成员变量`Register::Sales_Array`，意思`Register::Sales_Array`是未初始化的指针。`Register::Sales_Array`然后使用，导致未定义的行为，这将`Register::RingUpSale()`是不工作的原因。删除构造函数中的声明并改用初始化列表：

```
Register::Register(int id, double amount) :
    Current_ArraySize(0),
    Number_of_Records(0),
    Sales_Array(0),
    Register_ID(id),
    Register_Amount(amount)
{} 
```

请注意，这些行引入了两个与类无关的新变量：

```
int Current_ArraySize = 0;
int Number_of_Records = 0; 
```

还将这些添加到上面的初始化列表中。

最后，您违反了[三原则，](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)因为您动态分配了成员，但没有定义复制构造函数和赋值运算符，或者至少声明它们不可`private`复制`Register`。

因为这是 C++，所以使用 a[`std::vector<Sale>`](http://en.cppreference.com/w/cpp/container/vector)而不是显式管理动态内存。

# java - Java - 某些图像无法使用 ImageIO 加载

> ID：11171096
> 
> 赞同：2
> 
> 时间：2012-06-23T16:21:15.143
> 
> 标签：java, javax.imageio

我的 Java 项目的类文件夹中有大约 15 张图像。其中 12 个将正确加载。其中3个不会。文件没有损坏。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T20:05:04.133

图像类型通常是“容器格式”，这意味着它们可能在内部使用许多不同的编码来对图像进行编码。因此，`ImageIO`可能支持加载该文件类型的某些图像，但不支持加载其他图像。

> 文件没有损坏。

你怎么知道？通常，绘画和媒体程序会竭尽全力加载损坏的图像和其他媒体。如果他们能做到，通常不会出现文件损坏的对话框或警告（最终用户不关心图像何时显示在屏幕上）。

* * *

如果这些是应用程序资源，解决方案可能是在您最喜欢的绘图程序中打开它们，进行微不足道的更改，然后重新保存它们。更好的图像编辑器将编写有效的非损坏图像，并且可能还允许您指定使用的编码，或自动使用 Java 支持的通用编码。

# javascript - 对象 HTMLSelectElement 通过此关键字访问值

> ID：11171098
> 
> 赞同：2
> 
> 时间：2012-06-23T16:21:24.183
> 
> 标签：javascript

下面的代码不会打印值。

```
function go(x)
{
   alert(x.options.selectedIndex.value);
   //location=document.menu.student.options[document.menu.student.selectedIndex].value
} 
```

这是html代码

```
<select name="student" onChange="go(this)">
    <option selected> Student </option>
    <option value="http://www.cnet.com">Attendence</option>
    <option value="http://www.abc.com">Exams</option>
</select> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T16:27:22.477

`selectedIndex`是一个数字，它没有`value`属性。

如果您有一个`select`仅允许单选的元素（就像您的一样），获取其值的最简单方法是[`select`元素的`value`属性](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-59351919)：

```
function go(x) {
    alert(x.value);
} 
```

仔细检查它是否适用于您想要支持的浏览器，但 MaryAnne（请参阅评论）已经检查了所有当前的主要浏览器，并且我检查了 IE6、IE7 和 Firefox 3.6（例如，较旧的浏览器），它们都工作。由于它是在 DOM2 HTML 中指定的（上面的链接）...

但是 re `selectedIndex`，您可能的意思是：

```
function go(x) {
    alert(x.options[x.selectedIndex].value);
} 
```

我可能会更进一步，更具防御性：

```
function go(x) {
    var option = x.options[x.selectedIndex];
    if (option) {
        alert(option.value);
    }
} 
```

...或者

```
function go(x) {
    var option = x.options[x.selectedIndex];
    var value = option && option.value;
    alert(value); // Alerts "undefined" if nothing is selected
} 
```

...如果没有选择的选项（在这种情况下，`option`将是`undefined`），尽管使用您的*特定*标记和代码，我不知道在`change`没有选择任何内容的情况下会触发事件的用户代理。至少，我不这么认为——“我认为”是防守的原因。:-)

# xslt - 替代 Ant xslt 任务

> ID：11171102
> 
> 赞同：1
> 
> 时间：2012-06-23T16:22:22.990
> 
> 标签：xslt, ant, makefile

我要将 Ant 脚本转换为 Make 文件。我已经完成了很多转换部分。但是那个蚂蚁脚本有如下的小代码，

```
<xslt
  in=""
    out=""
    style="../profiling/profile.xsl">
  <param name="profile.arch" expression="${profile.arch}" if="profile.arch"/>
  <param name="profile.audience" expression="${profile.audience}" if="profile.audience"/>
</xslt> 
```

我应该如何在我的 Make 文件中的 ant 脚本的“xslt”、“in”、“out”、“style”和“param name”部分上方写入？任何人都可以给我一个示例制作文件代码吗？我尝试并搜索了很多次有关该转换的信息，但我找不到它。

谢谢..！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:30:32.263

Make 没有内置 XSLT 转换程序。在转换[xslt ant 任务](http://ant.apache.org/manual/Tasks/style.html)时，必须选择要替换的程序。

ANT内置了[Xalan](http://xml.apache.org/xalan-j/commandline.html)。需要首先安装 Java jar。[以下是从Maven Central](http://search.maven.org)下载它们的方法：

```
curl -O http://search.maven.org/remotecontent?filepath=xalan/xalan/2.7.1/xalan-2.7.1.jar
curl -O http://search.maven.org/remotecontent?filepath=xalan/serializer/2.7.1/serializer-2.7.1.jar 
```

运行以下 java 程序将执行所需的 XSLT 转换：

```
java -cp xalan-2.7.1.jar:serializer-2.7.1.jar org.apache.xalan.xslt.Process \
     -IN inputData.xml \
     -XSL ../profiling/profile.xsl \
     -OUT outputFile.html \
     -PARAM profile.arch ??? \
     -PARAM profile.audience ??? 
```

有关详细信息，请参阅[Xalan 文档](http://xml.apache.org/xalan-j/commandline.html)。

# android - 错误：试图重新查询一个已经关闭的游标

> ID：11171105
> 
> 赞同：4
> 
> 时间：2012-06-23T16:23:04.820
> 
> 标签：android, android-sqlite, android-cursor

我遇到了一个错误，但我似乎找不到解决方案。我的应用程序在 ICS 4.0.3 上运行，但在 Android 3.2 上返回错误。这是我`MainActivity.java`文件中的代码：

```
SQLiteDatabase db = databaseHelper.getReadableDatabase();
         Cursor cursor = db.query(DatabaseHelper.TABLE_NAME, new String[]{"_id","isim","icerik"}, null, null, null, null, null);
         startManagingCursor(cursor);
         tts=0;

         while(cursor.moveToNext()){
            if(tts==0)
             {            
            array_spinner=new String[cursor.getCount()+1];
            array_spinner[tts]= "FAVORİ";
             }
            array_spinner2[tts+1]= cursor.getString((cursor.getColumnIndex("isim")));
            array_spinner3[tts+1]= cursor.getString((cursor.getColumnIndex("icerik")));
             tts++;
            } 

         ss2 = (Spinner) findViewById(R.id.spinner2);
         ArrayAdapter<Object> adapter  = new ArrayAdapter<Object>(this,R.layout.row2, R.id.weekofday2, array_spinner2);
            ss2.setAdapter(adapter);
        } catch (Exception e) {} 
```

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T16:27:24.473

在某个地方，您正在关闭`Cursor`您正在传递的`startManagingCursor()`. `stopManagingCursor()`在关闭之前调用`Cursor`。

请注意，`startManagingCursor()`已弃用。当您的数据更改时，不要使用它，而是在后台运行另一个查询（例如`AsyncTask`，，`CursorLoader`）。

此外，您可能会考虑使用`CursorAdapter`, like `SimpleCursorAdapter`，而不是手动将所有数据转换为对象并使用`ArrayAdapter`.

另外，如果您要使用`ArrayAdapter`，请用更具体的类声明它（例如`ArrayAdapter<String>`，不是`ArrayAdapter<Object>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-24T05:49:08.120

放这个它可能对你有用：

```
 @Override
    protected void onRestart() {
        // TODO Auto-generated method stub
        super.onRestart();

        cursor.requery();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-23T11:18:43.947

此错误似乎是由于不正确使用不推荐使用的方法引起的

```
startManagingCursor() 
```

不能 100% 确定正确调用`stopManagingCursor()`会解决问题，因为它是非常偶然的。

我建议避免使用它并坚持使用 CursorLoader 和 LoaderManager。

# android - 如何在 Eclipse 中为 android 设置 java cv

> ID：11171111
> 
> 赞同：2
> 
> 时间：2012-06-23T16:23:33.677
> 
> 标签：android, opencv, javacv

有人可以告诉我应该如何在 eclipse 中设置 java cv 以使用 android 图像处理程序。安装 java cv 时我应该遵循哪些步骤。我需要知道 open cv 也可以在 eclipse 中使用。谢谢您的帮助..！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:34:22.000

OpenCV 在他们的官方教程中有一个关于这个的教程：

[在 Eclipse 中使用 Android 二进制包](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/android_binary_package.html#android-binary-package)

希望它有效。

# objective-c - 使用游戏中心发送和接收字符串

> ID：11171118
> 
> 赞同：1
> 
> 时间：2012-06-23T16:24:45.163
> 
> 标签：objective-c, ios, cocos2d-iphone, game-center, gamekit

我在通过游戏中心发送字符串时遇到问题。我可以发送所有内容，但无法发送`NSString`or `NSArray`。

我通过谷歌搜索并找到了很多信息，但没有找到任何对我有帮助的例子。

谁能告诉我如何发送和接收`NSString`游戏中心？

谢谢。乔治。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T17:41:16.403

```
NSString *yourString;
NSData *stringData = [yourString dataUsingEncoding:NSUTF8StringEncoding]; 
```

并像这样发送它，以便在接收方解压缩：

```
recievedString = [[NSString stringWithUTF8String:[recievedData bytes]] retain]; 
```

# javascript - 处理文本区域中的选项卡

> ID：11171119
> 
> 赞同：3
> 
> 时间：2012-06-23T16:24:52.917
> 
> 标签：javascript, jquery, html

单击选项卡时，我需要在文本区域中插入一个选项卡，而不是将焦点移动到下一个元素。

我做了一些研究，但没有发现实际使用制表符而不是一系列空格的解决方案。

我将如何做到这一点以及如何插入一个真正的制表符而不是 4 个空格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T16:27:28.623

**[jsFiddle 示例](http://jsfiddle.net/j08691/CWhhd/)**。

JavaScript：

```
function insertTab(o, e) {
    var kC = e.keyCode ? e.keyCode : e.charCode ? e.charCode : e.which;
    if (kC == 9 && !e.shiftKey && !e.ctrlKey && !e.altKey) {
        var oS = o.scrollTop;
        if (o.setSelectionRange) {
            var sS = o.selectionStart;
            var sE = o.selectionEnd;
            o.value = o.value.substring(0, sS) + "\t" + o.value.substr(sE);
            o.setSelectionRange(sS + 1, sS + 1);
            o.focus();
        }
        else if (o.createTextRange) {
            document.selection.createRange().text = "\t";
            e.returnValue = false;
        }
        o.scrollTop = oS;
        if (e.preventDefault) {
            e.preventDefault();
        }
        return false;
    }
    return true;
}​ 
```

[从这里](http://pallieter.org/Projects/insertTab/)毫无羞耻地撕开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T16:27:17.087

无论代码在哪里添加这四个空格，都将这四个空格替换为文字制表符或转义序列`\t`。

# c - 使用 gcc 编译器对函数进行隐式 int 和隐式声明

> ID：11171120
> 
> 赞同：4
> 
> 时间：2012-06-23T16:25:07.087
> 
> 标签：c, c99

我在 c99 标准中读到：

```
-remove implicit function declaration,

-remove implicit int. 
```

但是当我尝试使用 gcc 编译器在 c99 模式下使用 -pedantic 编译此代码时

```
main(void){
    f(3);
    return 0;
}

int f(int a){
    ....
} 
```

我预计会有 2 个错误，但我只收到 2 个警告：

```
-warning: return type defaults to ‘int’

-warning: implicit declaration of function ‘f’. 
```

它们不应该是c99中的错误吗？

[http://gcc.gnu.org/c99status.html](http://gcc.gnu.org/c99status.html) 在这两种情况下都写着“完成”。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T16:45:00.837

C 标准要求对包含违反语法规则或约束的任何翻译单元进行*诊断。*它不需要这样的诊断是致命的；编译器可以自由地继续处理源文件。生成的可执行文件的行为（如果有）是未定义的。该标准不区分警告和致命错误。

（唯一*需要*编译器拒绝源文件的是`#error`指令。）

结论：在编译 C 时，非常重视警告。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T16:46:19.540

两点：首先，它可能（通常确实）采用一组特定的标志来使编译器符合标准。

其次，该标准所要求的只是实现在发生错误的情况下发出“诊断”——但由实现来定义什么是或不是诊断。如果愿意，可以自由地说“警告”是一种诊断。当发出诊断时，它可能会退出编译，或者它可以编译代码。

底线：它所做的可能足以符合要求，无论其价值如何。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-23T16:29:51.250

我不相信编译器*需要*产生致命错误。`-Werror`如果您担心，请使用...

# c++ - 如何使用 QLineEdit 将 QString 添加到 QListView

> ID：11171123
> 
> 赞同：3
> 
> 时间：2012-06-23T16:26:12.023
> 
> 标签：c++, qt, listview, qt4

我想使用 QLineEdit 编写 QString，然后使用 QPushButton，我想将项目（字符串）添加到 listView

这是我得到的：

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
    {
    ui->setupUi(this);

    model = new QStringListModel(this);

    QStringList list;

    list << "Some Item";

    model->setStringList(list);

    ui->listView->setModel(model);
    ui->listView->setEditTriggers(QAbstractItemView::NoEditTriggers);
}

void MainWindow::on_pushButton_3_clicked()
{
    //add
    int row = model->rowCount();   // model = new QStringListModel
    model->insertRow(row);

    QModelIndex index = model->index(row);
    ui->listView->setCurrentIndex(index);
    ui->listView->edit(index);  // instead of edit, I'd like to ... add a QString
} 
```

问题是我不想编辑（这是我自己设法做的所有事情）。我现在想在 CurrentIndex 处添加一个项目，并将该项目作为`lineEdit`. 我如何访问该字段？是`lineEdit->text()`吗？以及如何将其添加到列表视图中？

我根本不知道如何将任何内容添加到列表中。我错误地找到了编辑，谷歌到目前为止还没有帮助。我希望 Stack Overflow 能够并且将会。

**编辑：**我决定试试这个，但这似乎不是最好的解决方案

```
void MainWindow::on_pushButton_3_clicked()
{
    //add

    QStringList list;
    list = model->stringList();
    list.append(ui->lineEdit->text());
    model->setStringList(list);
} 
```

但这似乎是一种奇怪的做事方式。由于某种原因，它似乎还包含一个换行符。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-23T17:34:17.467

这里已经有一个如何使用 QStringListModel 的示例：[https ://stackoverflow.com/a/5825113/496445](https://stackoverflow.com/a/5825113/496445)

```
model->insertRow(model->rowCount());
QModelIndex index = model->index(model->rowCount()-1)
model->setData(index, str); 
```

请注意，在这个建议的方法中，您不需要 QStringList，除非您出于其他原因已经拥有一个并希望使用它进行初始化。

当您使用 a`Q*View`而不是 Widget 时，您将直接处理模型而不是视图来处理数据。模型更改时将通知视图。在这种情况下，您可能会像这样访问您的 lineEdit：

```
QString str = ui->lineEdit->text(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-24T09:16:05.483

其他方式; 右键单击列表视图并选择“变身”->“QListWidget”

这时候就可以看到这个函数“lst-> *addItem* ("str");”

# sqlalchemy - dict–set proxy on self-referential many-to-many Sqlalchemy 关联

> ID：11171126
> 
> 赞同：0
> 
> 时间：2012-06-23T16:26:26.657
> 
> 标签：sqlalchemy

在我的模型中，我有`A`一个包含一组属性的基对象类。的每个对象都`A`可以`A`通过多对多关联对象连接到任何其他对象`Context`。这个`Context`类为每个连接持有一个密钥。

```
class A(Base):
    __tablename__ = "a"
    id = Column(Integer, primary_key=True)

    # other attributes
    value = Column(Integer)

    def __init__(self, value):
        self.value = value

class Context(Base):
    __tablename__ = "context"
    holder_id = Column(Integer, ForeignKey("a.id"), nullable=False, primary_key=True)
    attachment_id = Column(Integer, ForeignKey("a.id"), nullable=False, primary_key=True)
    key = Column(String, primary_key=True)

    holder = relationship(A,
        primaryjoin=lambda: Context.holder_id==A.id)

    attachment = relationship(A,
        primaryjoin=lambda: Context.attachment_id==A.id) 
```

因此，`Context`该类存储形式为“Holder object `a1`hold attachment `a2`with key `k1`”的 3 元组。

我现在想要一个智能代理集合，`A`将这种关系分组`Context.key`，以便我可以按如下方式使用它：

```
a1 = A(1)
a1.context["key_1"] = set([A(2)])
a1.context["key_2"] = set([A(3), A(4), A(5)])

a1.context["key_1"].add(A(10))

a100 = A(100)
a100.context = {
  "key_1": set([A(101)])
} 
```

我该如何定义`context`？

我知道在 SQLAlchemy 文档中有一个对 dict-set 代理进行建模的示例，但不知何故，我无法让它在自我引用的情况下工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T04:01:38.667

除非我有点空白（这是可能的......杜松子酒......）这不能直接在关系上使用关联代理来完成，因为 a1.context 需要是一个集合，其中每个元素都有一个唯一的键，那么集合可以是一个字典 - 但这里没有这样的集合，因为 a1 可以有许多具有相同键的 Context 对象。Assoc prox 将对象集合简化为每个成员对象上的属性集合的简单方法不适用于此。

因此，如果您真的想要这个，并且您的结构无法更改，只需执行关联代理所做的事情，只需以硬编码的方式，即构建代理集合！实际上是两个，我想。没什么大不了的，只需要转动曲柄......相当多，确保在这里为每个操作添加测试：

```
from sqlalchemy import *
from sqlalchemy.orm import *
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.ext.associationproxy import association_proxy
import itertools

Base= declarative_base()

class A(Base):
    __tablename__ = "a"
    id = Column(Integer, primary_key=True)

    # other attributes
    value = Column(Integer)

    def __init__(self, value):
        self.value = value

    @property
    def context(self):
        return HolderBySetDict(self)

    @context.setter
    def context(self, dict_):
        toremove = set([ctx for ctx in self.attached_by if ctx.key not in dict_])
        toadd = set([Context(key=k, holder=item) for k, v in dict_.items()
                            for item in itertools.chain(v)])
        self.attached_by.update(toadd)
        self.attached_by.difference_update(toremove)

class HolderBySetDict(object):
    def __init__(self, parent):
        self.parent = parent

    def __iter__(self):
        return iter(self.keys())

    def keys(self):
        return list(set(ctx.key for ctx in self.parent.attached_by))

    def __delitem__(self, key):
        toremove = set([ctx for ctx in self.parent.attached_by if ctx.key == key])
        self.parent.attached_by.difference_update(toremove)

    def __getitem__(self, key):
        return HolderBySet(self.parent, key)

    def __setitem__(self, key, value):
        current = set([ctx for ctx in self.parent.attached_by if ctx.key == key])
        toremove = set([ctx for ctx in current if ctx.holder not in value])
        toadd = set([Context(key=key,holder=v) for v in value if v not in current])
        self.parent.attached_by.update(toadd)
        self.parent.attached_by.difference_update(toremove)

    # exercises !  for the reader !
    #def __contains__(self, key):
    #def values(self):
    #def items(self):
    # ....

class HolderBySet(object):
    def __init__(self, parent, key):
        self.key = key
        self.parent = parent

    def __iter__(self):
        return iter([ctx.holder for ctx
                    in self.parent.attached_by if ctx.key == self.key])

    def update(self, items):
        curr = set([ctx.holder for ctx
                            in self.parent.attached_by if ctx.key==self.key])
        toadd = set(items).difference(curr)
        self.parent.attached_by.update(
                [Context(key=self.key, holder=item) for item in toadd])

    def remove(self, item):
        for ctx in self.parent.attached_by:
            if ctx.key == self.key and ctx.holder is item:
                self.parent.attached_by.remove(ctx)
                break
        else:
            raise ValueError("Value not present")

    def add(self, item):
        for ctx in self.parent.attached_by:
            if ctx.key == self.key and ctx.holder is item:
                break
        else:
            self.parent.attached_by.add(Context(key=self.key, holder=item))

    # more exercises !  for the reader !
    #def __contains__(self, key):
    #def union(self):
    #def intersection(self):
    #def difference(self):
    #def difference_update(self):
    # ....

class Context(Base):
    __tablename__ = "context"
    holder_id = Column(Integer, ForeignKey("a.id"), nullable=False, primary_key=True)
    attachment_id = Column(Integer, ForeignKey("a.id"), nullable=False, primary_key=True)
    key = Column(String, primary_key=True)

    holder = relationship(A,
        primaryjoin=lambda: Context.holder_id==A.id)

    attachment = relationship(A,
        primaryjoin=lambda: Context.attachment_id==A.id,
        backref=backref("attached_by", collection_class=set))

a1 = A(1)
a2 = A(2)
a3, a4, a5 = A(3), A(4), A(5)
a1.context["key_1"] = set([a2])
a1.context["key_2"] = set([a3, a4, a5])

assert set([ctx.holder for ctx in a1.attached_by if ctx.key == "key_1"]) == set([a2])
assert set([ctx.holder for ctx in a1.attached_by if ctx.key == "key_2"]) == set([a3, a4, a5])

a10 = A(10)
a1.context["key_1"].add(a10)
print set([ctx.holder for ctx in a1.attached_by if ctx.key == "key_1"])
assert set([ctx.holder for ctx in a1.attached_by if ctx.key == "key_1"]) == set([a2, a10])

a100 = A(100)
a101 = A(101)
a100.context = {
  "key_1": set([a101])
}
assert set([ctx.holder for ctx in a100.attached_by]) == set([a101]) 
```

# php - Mysql SELECT 不同

> ID：11171127
> 
> 赞同：2
> 
> 时间：2012-06-23T16:26:30.403
> 
> 标签：php, mysql, select

我有个问题。我的数据库表是这样的：

* * *

```
| ID  | Name             | Value |  param  |
|  1  | Michael          | 290   |    X    |
|  2  | John             | 300   |    X    |
|  3  | Michael          | 270   |    X    |
|  4  | John             | 280   |    X    |
|  5  | Michael          | 256   |    Y    |
|  6  | Michael          | 230   |    Y    |
 ¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨¨ 
```

所以，我想使用一个表单来选择具有不同参数但名称相同的最新行。例如，如果我搜索“Michael”，我想使用 PHP 显示参数 X 的最新值和参数 Y 的最新值（返回 2 行）。

```
Michael: Param Y: 230
Michael: Param X: 270 
```

如果我搜索“约翰”，我会得到：

```
John: Param X: 280. 
```

编码

```
 $sql = "SELECT * FROM thetable WHERE name = 'Michael' ORDER BY ID DESC";
    $result = mysql_query($sql); 
```

现在我只想让它只选择具有不同参数的最新行。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T16:49:03.770

列出的方法是否不适用于 n 变量“参数”。我认为类似的东西可能会起作用：

```
SELECT
t.*
FROM Table1 t
JOIN
(SELECT 
           max(id) AS maxid
   FROM Table1
   GROUP BY name,param) x
on x.maxid = t.id
WHERE name='Michael' 
```

见[http://sqlfiddle.com/#!2/64dc4/11](http://sqlfiddle.com/#!2/64dc4/11)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T16:34:04.370

使用联合
`SELECT * From table WHERE name='Michael' AND PARAM='X' ORDER BY ID DESC LIMIT 1
UNION
SELECT * From table WHERE name='Michael' AND PARAM='Y' ORDER BY ID DESC LIMIT 1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T16:30:01.420

如果您只想选择一行，请使用 LIMIT （希望我理解这个问题）

```
$sql = "SELECT * FROM thetable WHERE name = 'Michael' AND param = 'x' ORDER BY Value DESC LIMIT 1 
UNION 
SELECT * FROM thetable WHERE name = 'Michael' AND param = 'y' ORDER BY Value DESC LIMIT 1" 
```

# matlab - 格式化输出，以便用零将整数填充到两位数

> ID：11171133
> 
> 赞同：1
> 
> 时间：2012-06-23T16:27:18.360
> 
> 标签：matlab, matrix, number-formatting

当我在 MATLAB 中制作一个 1x10 矩阵时，例如`a=[1:10]`，它返回：

```
a =
     1     2     3     4     5     6     7     8     9    10 
```

即，它忽略从数字 1 到 9 的零位。我想要一个这样的矩阵：

```
a =
     01     02     03     04     05     06     07     08     09    10. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T22:00:36.430

试试这个：

```
>> a = 1:10
a =
     1     2     3     4     5     6     7     8     9    10

>> aa = cellstr(num2str(a(:),'%02d'))'
aa = 
    '01'    '02'    '03'    '04'    '05'    '06'    '07'    '08'    '09'    '10' 
```

请注意，它现在是一个字符串元胞数组：

```
>> whos a aa
  Name      Size            Bytes  Class     Attributes

  a         1x10               80  double              
  aa        1x10              640  cell 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T17:03:18.513

如果要以特定格式显示数字，可以`disp`为特定类型的数字重载该函数。在该函数中，您需要创建一个带有前导零的字符串。

如果要创建包含前导零数字的字符串，可以使用`sprintf`. 例如，如果你想拥有

```
year = 2012;
month = 6;
day = 1; 
```

您可以创建一个带有前导零的文件名，如下所示：

```
fileName = sprintf('%i%02i%02i.dat',year,month,day)
fileName =
    20120601.dat 
```

# exception - 升级到 2012 年 6 月 SDK 后的异常

> ID：11171138
> 
> 赞同：9
> 
> 时间：2012-06-23T16:27:29.470
> 
> 标签：exception, azure, trace

我有一个项目使用 2011 年 11 月的 SDK 启动并运行，最近升级到 2012 年 6 月的 SDK。当我第一次看到错误时，我尝试了明显的 - 删除引用并添加更高版本，但这没有帮助。不知何故，似乎仍在请求版本 1.0.0.0。我还尝试删除引用并重新添加旧版本，但没有运气。

这是它在我的代码中的显示方式。现在命中的第一个 Trace.WriteLine 报告以下异常：

> System.IO.FileLoadException 未被用户代码处理 Message=Could not load file or assembly 'Microsoft.WindowsAzure.Diagnostics, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）来源=mscorlib
> FileName=Microsoft.WindowsAzure.Diagnostics, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35 FusionLog==== 预绑定状态信息=== LOG: User = NT AUTHORITY\NETWORK SERVICE LOG: DisplayName = Microsoft.WindowsAzure .Diagnostics，版本=1.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35（完全指定） LOG：Appbase = file:///F:/SVNProjects/myproject/SitePagesWebRole/ LOG：Initial PrivatePath = F:\SVNProjects\myproject \SitePagesWebRole\bin 调用程序集：（未知）。=== LOG：此绑定在默认加载上下文中开始。LOG：使用应用程序配置文件：F:\SVNProjects\myproject\SitePagesWebRole\web.config LOG：使用主机配置文件：C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet.config LOG：使用机器配置文件来自 C:\Windows\Microsoft。NET\Framework64\v4.0.30319\config\machine.config。日志：策略后参考：Microsoft.WindowsAzure.Diagnostics，版本=1.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 日志：尝试下载新 URL 文件：///C:/Windows/Microsoft.NET/Framework64/v4 .0.30319/临时 ASP.NET 文件/root/b117acb8/f2404402/Microsoft.WindowsAzure.Diagnostics.DLL。日志：尝试下载新 URL 文件：///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/b117acb8/f2404402/Microsoft.WindowsAzure.Diagnostics/Microsoft.WindowsAzure.Diagnostics .DLL。日志：正在尝试下载新的 URL 文件：///F:/SVNProjects/myproject/SitePagesWebRole/bin/Microsoft.WindowsAzure.Diagnostics.DLL。警告：比较程序集名称导致不匹配：次要版本错误：未能完成程序集设置 (hr = 0x80131040)。探测终止。
> 
> StackTrace：在 System.RuntimeTypeHandle.GetTypeByName（字符串名称，布尔 throwOnError，布尔 ignoreCase，布尔仅反射，StackCrawlMarkHandle stackMark，布尔 loadTypeFromPartialName，ObjectHandleOnStack 类型）在 System.RuntimeTypeHandle.GetTypeByName（字符串名称，布尔 throwOnError，布尔 ignoreCase，布尔反射，StackCrawlMark& stackMark, Boolean loadTypeFromPartialName) 在 System.Diagnostics.TraceUtils.GetRuntimeObject(String className, Type baseType, String initializeData) 在 System.Diagnostics.TypedElement.BaseGetRuntimeObject() 在 System.Diagnostics.GetType(String typeName) 在 System.Diagnostics.ListenerElement。 System.Diagnostics.ListenerElementsCollection 中的 GetRuntimeObject()。System.Diagnostics.TraceInternal 中的 GetRuntimeObject()。get_Listeners() at System.Diagnostics.TraceInternal.WriteLine(String message) at myproject.GameAPI.Login(Int64 fbid, Int64[] friends) in F:\SVNProjects\myproject\GameLogic\GameAPI.cs:line 119
> 内部异常：

如何解决？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-23T20:16:45.140

检查 web.config / app.config 以了解您的所有角色。确保将任何对 Microsoft.WindowsAzure.Diagnostics 程序集的引用的版本号更改为版本**1.7.0.0**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T16:39:40.010

您的 web/worker 角色项目中的所有 azure 程序集引用都应指向 1.7.0.0 版本。您的 ccproj 文件应包含

```
<ProductVersion>1.7</ProductVersion> 
```

以确保 Azure 实例包含正确的基础程序集。

您还可以检查是否`Microsoft.WindowsAzure.Diagnostics`已复制到 output/azure 包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T19:02:50.727

以上对我不起作用（我在任何地方都说 1.7），相反，我浏览了每个项目，删除并重新添加了任何开头的引用：

```
Microsoft.WindowsAzure.* 
```

当您重新添加它们时，请确保它显示版本 1.7。

# windows-phone-7 - 用户同意停止播放音频

> ID：11171146
> 
> 赞同：0
> 
> 时间：2012-06-23T16:28:30.463
> 
> 标签：windows-phone-7, windows-phone-7.1, xna-4.0

Windows Phone 7.5 / Silverlight 应用程序

如果用户正在他们的手机上播放音乐/收音机并且他们尝试启动我的应用程序，我想给用户一个选项来停止当前播放的选项。

**工作正常：** 消息弹出显示正常。当我选择取消时，弹出窗口关闭，音乐继续播放，我的应用程序正常启动/工作。

**问题：** 如果我选择 Ok ie 停止手机上当前播放的音乐，音乐会停止，但同时我的应用程序也会退出。

有什么想法我在这里做错了吗？

这是我正在使用的代码。我在启动时调用此方法：

```
private void CheckAudio()
        {
            if (FMRadio.Instance.PowerMode == RadioPowerMode.On)
            {
                MessageBoxResult Choice;
                Choice = MessageBox.Show("For better user experience with this application it is recommended you stop other audio applications. Do you want to stop the radio?", "Radio is currently playing!", MessageBoxButton.OKCancel);
                if (Choice == MessageBoxResult.OK)
                {
                    FMRadio.Instance.PowerMode = RadioPowerMode.Off;
                }
            }
            if (MediaPlayer.State == MediaState.Playing)
            {
                MessageBoxResult Choice;
                Choice = MessageBox.Show("For better user experience with this application it is recommended you stop other audio/video applications. Do you want to stop the MediaPlayer?", "MediaPlayer is currently playing!", MessageBoxButton.OKCancel);
                if (Choice == MessageBoxResult.OK)
                {
                    MediaPlayer.Stop();
                }
            }
        } 
```

**更新：** 我在下面发布了我的解决方案。如果我做错了什么，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:12:31.283

我发现抛出了以下错误：

> 尚未调用 FrameworkDispatcher.Update。常规框架调度程序。更新调用对于 fire and forget 音效和框架事件正常运行是必需的。

所以我添加了这段代码，现在它工作正常。现在单击确定后，音乐播放器停止，我的应用程序启动正常。我从 App.xaml.cs 中的 InitializeComponent 调用 SetupTimer 方法

```
private GameTimer gameTimer; 

private void SetupTimer()
{

gameTimer = new GameTimer();
gameTimer.UpdateInterval = TimeSpan.FromMilliseconds(33);

// Call FrameworkDispatcher.Update to update the XNA Framework internals.
gameTimer.Update += new EventHandler<GameTimerEventArgs>(gameTimer_Update); //delegate { try { FrameworkDispatcher.Update(); } catch { } };

// Start the GameTimer running.
gameTimer.Start();

// Prime the pump or we'll get an exception.
FrameworkDispatcher.Update();

}

void gameTimer_Update(object sender, GameTimerEventArgs e)
{
try { FrameworkDispatcher.Update(); }
catch { }
} 
```

如果有人看到上述任何问题/问题，请告诉我。谢谢。

# java - 使用数组作为 hashmap 键

> ID：11171151
> 
> 赞同：-1
> 
> 时间：2012-06-23T16:29:26.230
> 
> 标签：java

我正在尝试使用数组作为 HashMap 中的键。数组的长度为 2，因此基本上充当 2 元组。实现自定义 2 元组类是最后的手段。问题是，如果它们具有不同的内存位置，我希望具有相同内容的数组映射到 HashMap 中的不同位置。我知道 Arrays.hashCode 和 Arrays.deepHashCode 中有 hashCode 函数，但是有什么方法可以将它们用于 HashMap。正如我已经说过的，我真的不想实现自己的元组类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T16:35:25.210

我*不会*推荐这种方法。

键必须是不可变的。除非您制作阵列，否则它将充满危险。

Java 是一种面向对象的语言。我认为在原语方面考虑太多是错误的。在对象中封装您需要的正确行为。

为什么创建自己的班级如此压抑？最后一招？我不明白为什么这是一个大问题。创建它，让它不可变，清楚地记录你的意图，然后继续前进。

更新：我不会让你已经有一个有缺陷的元组类的事实阻止你在这种情况下做正确的事情。你说你有“数百堂课”——我说多做一个正确的事不会让你失望。由于“实际”的积累，代码最终会陷入混乱，就像你即将做出的那样糟糕的决定。通过为这个狭窄的问题创建正确的解决方案来解决不添加问题的方法，并开始从那里找到更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T16:48:28.620

> 问题是，如果它们具有不同的内存位置，我希望具有相同内容的数组映射到 HashMap 中的不同位置。

如果*数组*有不同的内存位置，或者数组的*内容*有不同的内存位置？如果是前者，您可能可以使用 an[`IdentityHashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/IdentityHashMap.html)而不是 normal `HashMap`。但是，如果是后者，那么我强烈同意@duffymo 的回答：[成长一对](http://james-iry.blogspot.com/2010/05/anatomy-of-annoyance.html)；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T15:34:12.190

好的，我找到了解决方案。我没有使用数组，而是使用了 List。这是有效的，因为 List 通过内容而不是通过引用来确定相等性。

# php - 创建私人图像文件夹？

> ID：11171152
> 
> 赞同：1
> 
> 时间：2012-06-23T16:29:28.237
> 
> 标签：php, image, security

我有一个不断增长的网站，其中包含 4 种尺寸的大约 30k 图像，总共 120k。我目前的解决方案是将它们存储在数据库中，从我在堆栈 oveflow 上阅读的内容来看，这似乎是一个非常糟糕的主意。

我开始明白为什么了。我注意到性能急剧下降。认为显而易见的解决方案是将这些图像移动到文件夹设置中，我想使用用户 ID 作为目录名称，然后有一个公共和私有子目录。

结构如下所示：

```
/54869
    /public
        /size_1/img1.jpg
        /size_2/img1.jpg
        /size_3/img1.jpg
        /size_4/img1.jpg
    /private
        /size_1/img2.jpg
        /size_2/img2.jpg
        /size_3/img2.jpg
        /size_4/img2.jpg 
```

保护此私人文件夹并仅在文件所有者授予权限的情况下才向其他用户提供访问权限的最佳方法是什么？

我还想阻止用户简单地查看任何文件夹的内容，但我想我可以执行检查客户端来解决这个问题。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T16:37:13.077

您可以使该文件夹无法从 Web 访问（例如，将文件夹放在外面`htdocs`或添加 .htaccess 规则）。

创建一个 PHP 脚本来处理对私有图像的所有请求。该脚本必须执行以下操作：

*   检查用户是否已通过身份验证
*   检查用户是否有权查看请求的图像
*   打开图像并将其打印到浏览器（您需要设置正确的 http 标头以确保内容被视为图像）

然后，在您的 HTML 中，只需指向`/secret_image.php?id=3`或者您可能想要使用图像的路径`/secret_image.php?p=/54869/public/size_1/img1.jpg`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T16:35:00.107

你可以试试这个

```
imageViewer.php?imgID=XXX;     where XXX=hashFunction(salt.imgName) 
```

**并在imageViewer.php**中进行所有处理，例如用户是否有权限！

# java - Hibernate - 注释和公共注释之间的区别？

> ID：11171154
> 
> 赞同：20
> 
> 时间：2012-06-23T16:29:30.953
> 
> 标签：java, hibernate, orm, dao, hibernate-annotations

为了保持简短和甜蜜：

有hibernate-commons-annotations 4.1.0-Final和hibernate-annotations 3.5.6-Final。

我是一个小块，它们之间有什么区别，我需要它们吗？

试图“避免”JPA，我的意思是使用嵌入在 Hibernate 中的 JPA 2.0 标准。

谢谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-23T18:03:07.153

以前，hibernate-annotations 是从hibernate 核心发布和版本化的。但从 3.5 及更高版本开始，它包含在休眠核心中。出于某种原因，它仍然从 3.5.0 发布到 3.5.6，但您不再需要它了。

来到 hibernate-commons-annotations，它是一个实用项目，由基于注释的 hibernate 子项目使用。它被 hibernate-search 等其他 hibernate 项目使用，因此作为一个单独的项目维护，它是 hibernate-core v3.6.0 及更高版本的编译时依赖项。

[来源 1](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#setup-requirements) [来源 2](https://github.com/hibernate/hibernate-commons-annotations)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T18:19:00.827

Hibernate Commons Annotations 是“用于注释处理的实用程序项目”，例如[此处](https://hibernate.onjira.com/browse/HCANN)所述。它不包含 Hibernate 的普通用户应该使用的 API。

Hibernate 注解包含持久化映射注解和相关代码。如今，它已合并到 Hibernate 核心。

如果您真的想避免使用`javax.persistence`包或其子包中的类很容易做到的 JPA (1/2)。如果您想要相反，请尽可能使用`javax.persistence`并避免使用`org.hibernate`包装。

可以从[http://docs.jboss.org/hibernate/orm/4.1/quickstart/en-US/html_single/](http://docs.jboss.org/hibernate/orm/4.1/quickstart/en-US/html_single/)找到很好的 Hibernate 入门指南。它还告诉您始终需要哪些库以及哪些库是可选的。

[参考文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/)包含大量关于使用 JPA 而不是弃用的遗留 Hibernate 注释的建议。

# git - 创建远程 git 存储库并从本地推送

> ID：11171161
> 
> 赞同：0
> 
> 时间：2012-06-23T16:30:27.130
> 
> 标签：git

这些是我创建远程 git 存储库并将本地计算机中的数据推送到它的步骤：

```
# mkdir -p git/sports.git
# cd git/
# cd sports.git/
# git init --bare
Initialized empty Git repository in /home/tirengarfio/git/sports.git/
# exit
logout
Connection to 173.203.57.258 closed.
(master)]$ git remote add origin ssh://root@173.203.57.258/home/tirengarfio/git/sports.git
(master)]$ git push --all
root@173.203.57.258's password: 
Counting objects: 1271, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (1236/1236), done.
Writing objects: 100% (1271/1271), 1.11 MiB, done.
Total 1271 (delta 37), reused 0 (delta 0)
To ssh://root@173.203.57.258/home/tirengarfio/git/sports.git
 * [new branch]      master -> master 
```

我去的`/home/tirengarfio/git/sports.git/branches`时候是空的。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T17:24:54.347

希望这能回答您的问题...

## 我的文件在哪里？

Git 不会以纯格式存储文件。它压缩它们然后存储在树中（以及所谓的包文件中）。有一篇关于 gitready 的文章解释了目录结构。有关更多详细信息，您可以参考我在下面链接的联机帮助页。

*   [你的 .git 目录里面有什么](http://gitready.com/advanced/2009/03/23/whats-inside-your-git-directory.html)

有关内部格式的详细信息，请参阅 Pro Git 书的第 9 章。这是一个在线版本：

*   [Pro Git - Git 内部结构](http://git-scm.com/book/en/Git-Internals)

## 为什么分支目录是空的？

该`branches`目录似乎仅出于遗留目的而存在。记录在[`man 5 gitrepostory-layout`](http://schacon.github.com/git/gitrepository-layout.html)：

> `branches`
> 
> 存储用于指定 git fetch、git pull 和 git push 命令 URL 的速记的一种稍微不推荐使用的方法是将文件存储在分支 / 中，并为这些命令命名以代替存储库参数。

有关更多详细信息，请参阅：[.git/branches 文件夹用于什么？](https://stackoverflow.com/questions/10398225/what-is-the-git-branches-folder-used-for)

## 如何从目录中取出文件`.git`？

如果您只想访问您的文件，最简单的方法是克隆您的存储库。

```
$ git clone /home/tirengarfio/git/sports.git/ 
```

# android - Toast 和 onOnclick，toast k 不会显示

> ID：11171162
> 
> 赞同：3
> 
> 时间：2012-06-23T16:30:33.817
> 
> 标签：android, onclick, toast

有谁知道为什么这个程序不会显示吐司信息？

```
public class Main extends Activity implements OnClickListener{
/** Called when the activity is first created. */

  ImageButton x = (ImageButton) findViewById(R.id.imageButton1);
  ImageButton i = (ImageButton) findViewById(R.id.imageButton2);
  ImageButton question = (ImageButton) findViewById(R.id.imageButton3); 
```

我已经创建了一些 ImageButons 和其他元素并创建了 onClick 函数

```
public void onClick(View v) {
            if(v.getId() == R.id.button1) // this works 
            {
                Intent intent = new Intent(this, Second.class);
                intent.putExtra("thetext", et1.getText().toString());
                intent.putExtra("thesize", et2.getText().toString());
                startActivity(intent);
            }
            if(v.getId() == R.id.imageButton2) // this wont work 
            {
                Toast toastI = Toast.makeText(this, "Testing", 5000);
                toastI.setGravity(Gravity.CENTER, 0, 0);
                toastI.show();
            } 
```

当我单击 ImageButton i（在我运行程序后）时，吐司不会显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:40:01.900

希望你已经在 imagebuttons 上设置了 onclickListener ..

```
 i.setOnClickListener(this); 
```

尝试这个

```
Toast.makeText(getApplication(), "Testing", 5000).show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:00:18.650

尝试使用`switch`case 代替`if`并使用`Main.this`or`getApplicationContext()`代替`this`as：

```
public void onClick(View v) {

switch (v.getId()) {
    case R.id.button1:
    Intent intent = new Intent(Main, Second.class);
            intent.putExtra("thetext", et1.getText().toString());
            intent.putExtra("thesize", et2.getText().toString());
            startActivity(intent);
    break;
    case R.id.imageButton3:
        Toast toastI = Toast.makeText(Main.this, "Testing", 5000);
        toastI.setGravity(Gravity.CENTER, 0, 0);
        toastI.show();
    break;
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T17:28:23.707

我认为您的问题是将 5000 放在吐司的长度上。[LENGTH_LONG](http://developer.android.com/reference/android/widget/Toast.html#LENGTH_LONG)和[LENGTH_SHORT](http://developer.android.com/reference/android/widget/Toast.html#LENGTH_SHORT)的值为 1 和 0，因此它们用作标志。所以我不知道如果你放 5000（可能什么都没有）会发生什么。同样在java doc上，他们说你应该放or or other。所以使用其中一种。

> public static Toast makeText (Context context, CharSequence text, int duration) 自：API 级别 1 制作仅包含文本视图的标准 toast。
> 
> 参数 context 要使用的上下文。通常是您的 Application 或 Activity 对象。text 要显示的文本。可以是格式化文本。duration 显示消息的时间。LENGTH_SHORT 或 LENGTH_LONG

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T18:00:22.950

`static Toast makeText(Context context, int resId, int duration)`

问题是您将`5000`作为第三个参数传递给该方法。`int duration`不是将向用户显示*的*秒数（或毫秒） 。`Toast`该类`Toast`要求您仅传递两个可能的值（这是有道理的，因为否则开发人员将完全滥用 toast 消息的长度，并且 Android 市场上的应用程序在向用户显示消息的方式上将完全不一致）。这两个值是：

```
Toast.LENGTH_SHORT 
Constant Value: 0 (0x00000000) 
```

或者

```
Toast.LENGTH_LONG`
Constant Value: 1 (0x00000001) 
```

要解决此问题，请将方法调用更改为，

```
Toast.makeText(this, "Testing", Toast.LENGTH_LONG).show(); 
```

* * *

另外，请记住将您的设置`onClickListener`放在您`ImageButton`的 s 上（只是在黑暗中拍摄）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-20T19:27:54.430

首先实现 View.OnClickListener 接口并向每个图像按钮添加侦听器，如下所示：

x.setOnClickListener(this);

*   对于 toast 消息，代码 mjst 是这样的：

Toast.makeText(Main.this,"把你的信息放在这里",Toast.LENGTH_LONG).show();

# xcode - 以编程方式选择外发邮件

> ID：11171165
> 
> 赞同：0
> 
> 时间：2012-06-23T16:30:41.193
> 
> 标签：xcode, cocoa, email, scripting-bridge

这是我正在尝试做的事情：假设您在邮件中并创建一个新的空白邮件消息，然后在其中输入一些数据，例如正文副本等（在我的情况下，该消息是通过脚本桥创建的使用 safari 中的“此页面的邮件内容”......此过程的主要目的是我的应用程序。）

从我的应用程序中，我想选择该消息并将其分配给：

```
MailOutgoingMessage *myMessage; 
```

这样我就可以以编程方式添加收件人。我尝试了几种看起来合乎逻辑的方法，但到目前为止我还没有找到正确的组合，而且头文件对我来说似乎不是很清楚（我是脚本桥的新手。）

我最初的想法是尝试这个：

```
mailMessage = [[mail outgoingMessages] lastObject]; 
```

哪个应该抓取创建的最后一条传出消息。它似乎起作用，因为我能够将收件人添加到 mailMessage （尽管有几次当存在多条传出消息时我收到了意外的结果，例如将收件人添加到错误的消息中）但尝试记录主题行消息：

```
NSLog(@"Subject = %@",[mailMessage subject]); 
```

即使在邮件的主题字段中有一个清晰可见的主题，也总是返回 NULL。任何其他参数也会返回 NULL。

我正在收集它一定是我分配给上面的 mailMessage 的问题，因为我收到消息属性的 NULL （或收到意外结果）的唯一时间是如果我尝试将 mailMessage 指向现有的传出消息。如果我使用脚本桥创建邮件消息，那么我可以正确检索所有属性。

有没有人足够了解邮件脚本的层次结构，可以告诉我为什么使用上述 mailMessage 分配的参数得到 NULL？最简单的方法是获取我的消息，以便我可以添加收件人，然后调用：

```
[myMessage send]; 
```

方法？任何见解都会有所帮助。我已经花了一周的时间浏览 mail.h 头文件，并且对于此时还可以尝试什么感到不知所措。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:36:21.983

无法（发送、获取或设置**传出消息**的属性）用户或**Safari**已创建。

这是一个错误（自**Mac OS X 10.4**起停止工作），或一些隐私/安全考虑。

# objective-c - 如何将 iOS 元素组合在一起，以便它们可以作为单个元素进行操作

> ID：11171167
> 
> 赞同：1
> 
> 时间：2012-06-23T16:30:42.410
> 
> 标签：objective-c, ios, cocoa, core-animation

我的 iOS 应用程序中有 3 个 UI 元素，我想在制作动画时将它们视为一个实体。

上面有一个 UIImageView，上面有一个 UILabelView 和 UIActivityIndi​​catorView。有没有办法将这些东西组合在一起并为组设置动画，而不必独立地为每个组设置动画？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T16:35:18.843

是的，将它们放在一个容器中`UIView`（这将是他们的`superview`）并为其设置动画。

```
UIView* containerView = // alloc-init
[containerView addSubview:aSubview]; // repeat for the other views you have 
```

# iphone - 我应该索引 NSSortDescriptor 中使用的属性吗？

> ID：11171168
> 
> 赞同：0
> 
> 时间：2012-06-23T16:30:44.663
> 
> 标签：iphone, objective-c, ios, cocoa-touch, core-data

如果我正在执行核心数据获取请求，并应用排序描述符，例如：

```
NSSortDescriptor *sort= [[NSSortDescriptor alloc] initWithKey:@"createDate" ascending:NO]; 
```

该属性`createDate`应该是索引属性吗？为什么或者为什么不？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T10:38:54.980

数据库索引是有代价的。数据库必须使索引保持最新，这会减慢插入、删除和可能的更新速度。写性能。

但是索引加快了查询和按子句排序。读取性能。

这是两者之间的权衡。对你来说最重要的是什么？读写性能？

好吧，索引还有另一个副作用：内存使用。如果您只需要对某些条目进行一次排序，而没有索引，则必须在内存中对它们进行排序。这意味着将它们全部加载到内存中。至少您要排序的列，而不是全部。但还是。

与往常一样，仪器是决定什么是最好的最好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:46:42.157

[根据文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdPersistentStores.html#//apple_ref/doc/uid/TP40002875-SW3)，是的，如果您有 sql 支持的存储。谓词和排序描述符在数据库中编译和评估，您将获得索引优势。

请参阅“获取谓词和排序描述符”部分。

# c# - TcpClient 超时 ICMP 端口不可达

> ID：11171171
> 
> 赞同：0
> 
> 时间：2012-06-23T16:31:00.653
> 
> 标签：c#, timeout, tcpclient, icmp

我得到以下代码：

```
TcpClient client = new TcpClient("server", 5555); 
```

服务器立即发回一个 ICMP 端口不可达，但程序需要大约 30 秒才能超时并出现 10054 错误。

我关闭了防火墙，wireshark 也在捕获数据包，所以这不是 windows 配置问题。

如何让 TcpClient 识别端口无法访问的数据包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T01:24:24.773

打开的端口立即返回 ICMP 数据包，该数据包由 TcpClient 立即处理，但是对于关闭/阻塞的端口“端口不可达”响应，TcpClient 必须等待 30 秒超时。您可以通过进行异步调用来更改超时方法，如下所示：

```
TcpClient client = new TcpClient();
client.BeginConnect("server", 5555, new AsyncCallback(CallBack), client);

private void CallBack(IAsyncResult result)
{
 bool connected = false;
 using (TcpClient client = (TcpClient)result.AsyncState)
 {
    try
    {
        client.EndConnect(result);
        connected = client.Connected;
    }
    catch (SocketException)
    {
    }
 }
 if (connected)
 {
    this.Invoke((MethodInvoker)delegate
    {
        // Do Something
    });
 }
 else
 {
    this.Invoke((MethodInvoker)delegate
    {
        // Do Something
    });
 } 
} 
```

# sencha-touch - 如何过滤商店？

> ID：11171177
> 
> 赞同：0
> 
> 时间：2012-06-23T16:32:02.417
> 
> 标签：sencha-touch, extjs, sencha-touch-2

谁知道如何正确过滤商店？

我试图在嵌套列表的leafItemTap 的侦听器中这样做，但我的叶子项目现在没有点击。控制台中的按摩：“未捕获的类型错误：无法调用未定义的方法‘过滤器’”

这是嵌套列表，其中必须过滤 Store：

```
Ext.define('Application.view.SplitView', {
extend: 'Ext.Container',
xtype: 'splitview',    
config: {
    layout: 'card', 
    store: null
},

initialize: function() {        
    this.nestedList = Ext.create('Ext.NestedList', {
        title : 'Рецепты',
        detailCard: Ext.create('Application.view.MainDetail'),      
        store: this.getStore(),            
        listeners: {
            scope: this,
            leafitemtap: this.onLeafItemTap
        }
    });

    this.setItems([this.nestedList]);
},    
updateStore: function(newStore) {
    if (this.nestedList) {
        this.nestedList.setStore(newStore);
    }
},
onLeafItemTap: function(nestedList, list, index, node, record, e) {
    var psn = record.get('text');
    console.log(psn);
    var detailCard = nestedList.getDetailCard();
    var store = Ext.getStore('Application.store.DetailStore');        
    store.filter('title', 'Brownies');
    console.log(store);
} 
```

});

这是我要过滤的商店：

```
Ext.define('Application.store.DetailStore', {
extend: 'Ext.data.Store',

config: {
    model: 'Application.model.DetailModel',
    autoLoad :true,
    sorters: 'title',
    grouper : function(record) {
        return record.get('title')[0];
        },

   proxy: {
    type: 'ajax',
    url : '/data/data1.php',
   reader: {
   type: 'json',
  rootProperty:'recipes'}
         } 
} 
```

});

和商店的模型：

```
Ext.define('Application.model.DetailModel', {
extend: 'Ext.data.Model',
config: {
    fields: [       
    {name: 'title',  type: 'string'},
    {name: 'serves',  type: 'string'},
    {name: 'cooktime',  type: 'string'},
    {name: 'ingridients',  type: 'string'},
    {name: 'picture',  type: 'string'},
    {name: 'kitchen',  type: 'string'},
    {name: 'category',  type: 'string'},
    {name: 'instructions',  type: 'string'}         
]
},

fullName: function() {
    var d = this.data,
    names = [
        d.title         
            ];
    return names.join(" ");
} 
```

});

我是 Sencha 的新手，每条建议都会很有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T17:04:09.730

以下错误表示您正在调用该`filter`函数的对象未定义

> “未捕获的类型错误：无法调用未定义的方法‘过滤器’”

在您的情况下，商店未定义。

尝试通过以下方式获得它：

```
var store = Ext.getStore('DetailStore'); 
```

此外，您可以通过执行以下操作检查 StoreManager 中的商店：

```
console.log(Ext.data.StoreManager.all); 
```

希望这可以帮助

# java - 手机上的 Android 主机网站

> ID：11171178
> 
> 赞同：0
> 
> 时间：2012-06-23T16:32:08.627
> 
> 标签：java, android, http, google-chrome

我可以采取什么方法来解决我的问题，以便我的 Android 应用程序托管一个网站（在任何端口 > 1024 上）并且还具有允许/阻止传入客户端的方法。到目前为止，我已经尝试手动打开一个 ServerSocket 并注入 html 然后关闭套接字，但是它只能在大部分时间和谷歌浏览器上工作......有人有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:35:21.420

您可以使用一些像码头这样的小型 servlet 容器 - 纯 Java 和轻量级足以容纳手机。然后你可以注册你的 servlet 并部署完整的战争档案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:02:42.367

结帐[iJetty](http://code.google.com/p/i-jetty/)。他们基本上将功能齐全的 Jetty 实现移植到 Android。我之前将它用作 servlet 容器（向其部署 WAR 文件）和我编写的应用程序中的嵌入式服务器。让它在另一个应用程序中工作需要做一些事情，但绝对可以做到。您还可以访问源代码，以便根据需要进行修改。

# android - 解锁手机，然后打开关闭的应用程序可编程性

> ID：11171184
> 
> 赞同：0
> 
> 时间：2012-06-23T16:33:16.450
> 
> 标签：android, unlock

我正在 Eclipse 中使用 androids SDK 和 Java 制作警报应用程序。

我有一个在闹钟响起时调用的方法。即使应用程序关闭或手机被锁定，也会调用此方法。我希望这种方法可以解锁手机，即使它的密码受到保护（这可能吗？）。然后当手机被解锁时（如果可能的话，通过方法）（或者用户如果没有）我希望应用程序自动启动？

有什么可以做到这一点吗？

我确实有 android 方面的经验，但我不是专家，所以我非常感谢向我的初学者解释的所有内容。一些示例代码真的会对我有所帮助，我们将不胜感激。

谢谢，杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:08:10.947

当然，这个问题的答案取决于您希望定位的 android 版本，以下是一种未经测试的方式，如果从活动中调用（或在活动上调用），它应该适用于 API 级别 5（android 2.0）及更高版本：

```
getWindowManager().updateViewLayout(this.getCurrentFocus(), new WindowManager.LayoutParams(WindowManager.LayoutParams.TYPE_APPLICATION, WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED|WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON)); 
```

`SHOW_WHEN_LOCKED`此代码通过更新视图以使用和`KEEP_SCREEN_ON`标志，使活动的当前视图显示在锁定屏幕上。

# javascript - 使用jQuery直接通过DOM遍历访问javascript对象

> ID：11171185
> 
> 赞同：2
> 
> 时间：2012-06-23T16:33:16.853
> 
> 标签：javascript, jquery, dom, traversal

我正在开发一个简单的客户端界面，其中有一个 jQuery 对象，我想在单击超链接时直接访问该对象。简化代码：

```
<div class="controls">
    <div class="score">
        <a class="button" href="/add">Add points!</a>
    </div>
</div>

$(".controls").myControls();

$.fn.myControls = function() {
    return $.extend(this, $.myControls).initialize();
}

$.myControls = {
    initialize: function() {
        this.scoreElement = $("div.score", this);
        this.linkElement  = $("a", this.scoreElement);

        this.scoreElement.score = 0;

        var _this = this;
        this.linkElement.click(function() {
            _this.clickHandler(this);
        });
    },
    clickHandler: function(element) {
        var scoreElement = $(element).parent();
        scoreElement.score = 1;
    }
} 
```

说明：`.controls`元素具有`.score`兼作分数信息容器的元素 ( `this.scoreElement.score`)。当我单击`.score`元素内的链接时，我找到了父元素，它与 DOM 中的元素相同，`this.scoreElement`并尝试将其`score`属性设置为 1。显然，这不起作用，因为方法中的本地`scoreElement.score`属性`clickHandler`是“不明确的”。

***所以这是我的问题：**`this.scoreElement`有没有一种简单的方法可以通过使用 jQuery 遍历 DOM 来直接访问我的对象？*

当然，我可以检查是否`this.scoreElement == $(element).parent()`以某种方式访问`this.scoreElement`​​对象中的正确属性，但直接访问会更加优雅和健壮。这可能吗？我是不是走错路了？谢谢！

PS：忽略我`parent()`用来查找的事实`scoreElement`，我只是用它来说明我的问题。除非它是问题的一部分，否则在这种情况下不要忽略:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T17:42:13.613

虽然当然可以使用您自己的“控制对象”来存储相关数据，但我通常更喜欢依靠 jQuery 来做这件事——使用[.data()](http://api.jquery.com/jQuery.data/)方法，如下所示：

```
$(this.scoreElement).data('score', 0); // in initialize()
$(this).parent().data('score', 1); // in clickHandler() 
```

这种方法使我可以更轻松地扩展，因为我不必担心“重叠”问题，使用单个“控制”对象而不是对象对元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T17:19:19.257

我认为，如果您将 jQuery 的代理函数用于您的点击处理程序，那么您只需将 this.scoreElement 放入 clickHandler 中，您甚至不需要遍历 DOM。像这样：

```
$.myControls = {
    initialize: function() {
        this.scoreElement = $("div.score", this);
        this.linkElement  = $("a", this.scoreElement);

        this.scoreElement.score = 0;

        this.linkElement.click($.proxy(this.clickHandler, this));
    },
    clickHandler: function(event) {
        var element = event.target;
        this.scoreElement.score = 1;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T00:39:30.143

经过逐步简化（并且存储分数略有不同）后，我得到了下面的代码，其中`scoreElement`每个 div 发现一次`.controls`，然后将其保存在闭包中以使其可用于其相应的点击处理程序。您也可以使用`.closest()`- 请参阅注释掉的行。

```
$.fn.myControls = function() {
    return this.each(function() {
        var scoreElement = $("div.score", $(this));
        scoreElement.data('score', 0);
        $("a", scoreElement).on('click', function() {
            scoreElement.data('score', 1);//get scoreElement from closure formed by the outer "each" function.
            //$(this).closest(".score").data('score', 1);//alternative to the line above, not requiring closure.
        });
    });
}; 
```

在问题中调用：

```
$(".controls").myControls(); 
```

这是如此微不足道和单维的，它本身并不真正保证 jQuery 插件。除非插件有一些令人信服的理由（例如，重用或需要密切相关的方法），否则我将其表述如下：

```
$(".controls").each(function() {
    var scoreElement = $("div.score", $(this));
    scoreElement.data('score', 0);
    $("a", scoreElement).on('click', function() {
        scoreElement.data('score', 1);//get scoreElement from closure formed by the outer "each" function.
        //$(this).closest(".score").data('score', 1);//alternative to line above, not requiring closure.
    });
}); 
```

这与删除插件包装器并直接附加到相同的基本 jQuery 对象的代码相同。

如果你真的想要，你可以把整个事情写成三行，如下所示：

```
$(".controls").find("div.score").data('score', 0).find("a.button").on('click', function() {
    $(this).closest(".score").data('score', 1);
}); 
```

# sql - CFQUERYPARAM 在 ColdFusion 10 中不起作用

> ID：11171188
> 
> 赞同：1
> 
> 时间：2012-06-23T16:33:52.630
> 
> 标签：sql, sql-server-2008, coldfusion, coldfusion-10

我将三个整数传递给 CFC 中的函数，如下所示：

```
<cfscript>
Q = TOPBIKES.GetTopBikes(127, 10, 11);
writeDump(Q);
</cfscript> 
```

CFC 使用这些整数来运行如下查询：

```
<!--- GET TOP BIKES --->
<cffunction name="GetTopBikes">
    <cfargument name="FeatureID" required="true">
    <cfargument name="MinWins" required="true">
    <cfargument name="RecordsToReturn" required="true">
    <cfscript>
        LOCAL.FeatureID = ARGUMENTS.FeatureID;
        LOCAL.MinWins = ARGUMENTS.MinWins;
        LOCAL.RecordsToReturn = ARGUMENTS.RecordsToReturn;
    </cfscript>
    <!--- RUN QUERY --->        
    <cfquery name="Q">
        SELECT      TOP #LOCAL.RecordsToReturn#
                    B.BikeID, 
                    B.BikeName,
                    BS.PCTWins
        FROM        Bikes B
                    LEFT JOIN BikeScores BS
                        ON B.BikeID = BS.BikeID
        WHERE       BS.Wins > <cfqueryparam cfsqltype="cf_sql_integer" value="#LOCAL.MinWins#">
                    AND B.BikeID IN (   SELECT  BikeID
                                        FROM    Bikes_Features
                                        WHERE   FeatureID = <cfqueryparam cfsqltype="cf_sql_integer" value="#LOCAL.FeatureID#">
                                    )   
        ORDER BY    BS.PCTWins desc
    </cfquery>
    <cfreturn Q>
</cffunction> 
```

问题是我无法让 cfqueryparam 在 SQL 语句的 TOP 部分工作。

这些工作：

```
SELECT      TOP 11
SELECT      TOP #LOCAL.RecordsToReturn# 
```

这不起作用：

```
SELECT      TOP <cfqueryparam 
                  cfsqltype="cf_sql_integer" 
                  value="#LOCAL.RecordsToReturn#"> 
```

但是，我可以在查询中的其他任何地方使用。我知道它是一个整数，并且可以在其他地方使用，例如替换 FeatureID。

关于为什么 CFQUERYPARAM 不能在 TOP 中工作的任何线索？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T16:43:59.527

`SELECT TOP #val(LOCAL.RecordsToReturn)#`

SQL 语句的某些部分不能使用 cfqueryparam，例如 Top 或 From 后面的表名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T08:01:15.127

要记住的事情 - 以及您链接到的 Peter 的注释，Evik 没有明确说明这一点 - SQL 语句有两个部分：SQL“命令”和 SQL 命令使用的数据。只有数据可以参数化。如果您考虑一下，那是有道理的：SQL 命令本身不是“参数”。

可以在此处的 CF 上下文中进行类比。考虑这个陈述：

```
<cfset variables.foo = "bar"> 
```

可以使用传入的值“参数化”它：

```
<cfset variables.foo = URL.foo> 
```

（其中 URL.foo 在此示例中是一个参数）

但人们不能指望这样做：

```
<#URL.tag# variables.foo = "bar"> 
```

（这是一个非常人为的例子，但它证明了这一点）。

我认为就 a 中的 SQL`<cfquery>`而言，水域有些混乱，因为整个事情只是 CF 中的一个字符串，字符串的任何部分都可以用变量（列名、布尔运算符、整个子句， ETC）。因此，通过扩展，人们可能会认为任何变量都可以替换为`<cfqueryparam>`. 正如我们现在所知，情况并非如此，因为就 CF 而言，它只是一个字符串，但它被视为 DB 的*代码*，因此需要符合 DB 的编码语法。

这是否更清楚地说明了情况？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-08T12:45:52.510

MS SQL 的新语法（从 2005 年开始）：选择 top(10) ... 对于 10，您可以使用 cfqueryparam。

# javascript - 滚动 iframe 到选定的文本

> ID：11171191
> 
> 赞同：1
> 
> 时间：2012-06-23T16:34:11.490
> 
> 标签：javascript, rangy

我正在使用 rangy 选择 IFrame 选择中的文本，但有时我需要滚动 IFrame 才能查看此选择。**是否可以自动将 IFrame 滚动到选定的文本？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T17:16:27.863

您可以使用`scrollIntoView()`包含选择的锚节点的元素的方法，但这可能会滚动主文档以及 iframe，并且如果选择从几行开始进入文本节点，也可能是不精确的。

```
var sel = rangy.getSelection();
var anchorNode = sel.anchorNode;
if (anchorNode) {
    if (anchorNode.nodeType != 1) {
        anchorNode = anchorNode.parentNode;
    }
    anchorNode.scrollIntoView();
} 
```

更好的选择可能是使用选择范围的边界矩形，可通过[`getBoundingClientRect()`](https://developer.mozilla.org/en/DOM/range.getBoundingClientRect)大多数现代浏览器中的范围方法获得，并手动滚动 iframe 的文档。但是，这并不是普遍支持的，并且是相对于视口而不是文档而言的。这是一个相关的问题和答案：

[https://stackoverflow.com/a/6847328/96100](https://stackoverflow.com/a/6847328/96100)

# ruby-on-rails - 我应该在哪里创建在我的视图中使用的方法？

> ID：11171196
> 
> 赞同：0
> 
> 时间：2012-06-23T16:34:47.423
> 
> 标签：ruby-on-rails, ruby-on-rails-3

对不起新手的问题，但我经常想知道。我应该在哪里创建我想在我的视图中使用的方法？

我会说明的。我想在我的 user/views/show.html.erb 中调用一个方法，该方法将返回一个布尔值，并且我可以在***显示***页面上显示链接，也可以不显示。

好吧，我一直认为这个方法应该在模型 User.rb 中创建！但我实际上得到的是一个未定义的方法错误！

我会感谢您的帮助！

谢谢

**更新**

当我在**User Helper**中创建该方法时，它确实有效。但那是*好的*编程吗？这是*正确*的方法吗？还是有*更好*的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T17:20:39.743

现在我更喜欢使用演示者，类似于[此 Railscast 中显示的](http://railscasts.com/episodes/286-draper)内容。它使您的代码保持干净、可重用，并且比 Rails Helpers 更接近 OO，这让您更加理智。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:17:17.643

我认为如果它的显示相关代码，它可能应该进入特定的帮助程序，或者如果你希望它在所有视图中都可用，它应该进入“application_helper”。格式化和显示逻辑（就像你所拥有的）应该进入助手。

如果该方法要对您的数据进行更改，那么它可能应该进入模型。不确定您收到未定义的方法错误是什么，因为它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T01:32:07.130

其实伙计们，这很简单这里的新手没有使用对象调用它的用户方法：示例：@user.my_metho 我只是在调用 my_method

这就是问题所在。

但正如佩德罗提到的那样，德雷珀宝石真的对我没有多大作用......甚至无法让它正常工作......

# android - 如何在 Android 上创建基本访问身份验证？

> ID：11171200
> 
> 赞同：0
> 
> 时间：2012-06-23T16:35:14.537
> 
> 标签：android

[我已经以与此类](https://stackoverflow.com/questions/5850667/android-basic-authentication-2-2)似的方式在我的 android 应用程序中实现了基本授权，但我继续收到错误作为 html 页面：

```
HTTP Error 400\. The request hostname is invalid 
```

我多次检查我的网址，但没有发现任何问题。所以我的问题是这个错误的发生是否与我的网址形式无关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T05:15:07.563

请确认 URL“server.com/category/page”与使用 HTTP 时一样正确

![在此处输入图像描述](../Images/9293262bd535b090dcbded53f2f11a56.png)

但是没有http它正在工作

![在此处输入图像描述](../Images/48d02daca2e6b3cb65cc3cd4430e5ebc.png)

# iphone - 在 iPhone/iPad 上保存 HLS 流

> ID：11171206
> 
> 赞同：3
> 
> 时间：2012-06-23T16:35:21.573
> 
> 标签：iphone, objective-c, ipad, video, http-live-streaming

我有一个 iPhone/iPad 应用程序，它播放电视频道的 HTTP 直播流。我想添加一个记录功能，以像电视录像机一样在设备上保存直播。

我不知道这是否可能，但我认为我有两种方法来记录流。

1.  保存屏幕上显示的输出流，但我不知道该怎么做......

2.  打开 m3u8 播放列表并下载播放列表的片段，将其保存并使用下载的片段创建一个 m3u8 播放列表。但在这种情况下，我将下载 2 次视频，一次使用 MPMoviePlayer，一次下载片段。

任何人都已经做过类似的事情，或者知道怎么做？

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T07:07:13.050

您可以使用选项 2，并将您的下载代码设置为 http 代理。

您的代理将下载 m3u8 播放列表，并将 URL 重新写入地址 localhost。然后代理会根据 MPMoviePlayer 的请求从服务器下载。它只会将内容写入两个位置（存储和电影播放器​​）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:38:16.333

您应该使用选项 2。

假设您在 Documents 文件夹（Documents/downloads）中创建了一个“下载”文件夹

*   首先在您的应用程序中运行 HTTPServer（即 Mongoose）。
*   将 Mongoose 的根路径定义到您的下载文件夹。
*   将视频和 m3u8 文件下载到下载文件夹。如果要更改 m3u8，请使用 NSString 方法。

播放录制的视频时，请使用如下地址

```
http://localhost:8080/playlist.m3u8 
```

并且 MPMoviePlayer 应该可以毫无问题地播放录制的视频。

如果你想录制不同的视频，你可以在你的下载目录中实现目录系统。

# java - 需要帮助将命令行参数与 Java 中的字符串文字进行比较

> ID：11171209
> 
> 赞同：1
> 
> 时间：2012-06-23T16:35:37.347
> 
> 标签：java, comparison, command-line-arguments

我试过寻找这个问题的答案，但我不完全确定要搜索什么。基本上我想要的是让我的程序的用户能够输入（进入命令行）：

```
java galaxySim HELP 
```

并让我的程序告诉他们一些关于文件格式和东西的东西。否则，第一个参数是文件名。所以我必须这样做的代码是：

```
if (args[0] == "HELP") {
  System.out.printf("Help Stuff...");
}else{
  filename = args[0];
  System.out.printf("Filename found");
} 
```

它被封装在错误处理的东西中，我认为这些东西不会影响这一点，所以没有写。问题是这样的：无论我输入什么作为第一个参数，它总是转到 else 语句。

我已经尝试在参数之前和之后添加空格，但它从来没有帮助。我不认为我的 IF 语句有问题，就好像我写的一样

```
if(args[0] == args[0]){ 
```

然后它确实进入了正确的陈述。好像

```
args[0] == "Help" 
```

总是假的。可能存在某种编码问题吗？我正在使用win7，如果这有所作为。

它不是程序的重要组成部分，但是……如果它有效，那就太好了。有人知道这里有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T16:36:51.017

比较`String`s 使用`equals`

改变这个：

`if(args[0] == "HELP")`

至

`if(args[0].equals("HELP"))`

`==`比较引用相等，而不是值相等。您需要检查这些值，因此使用`equals()`.

这是进一步知识的[链接](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)。

您可能还想阅读[本文](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)`==`以了解和`equals()`方法之间的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T16:36:52.547

您需要将`String`实例与`equals()`而不是进行比较`==`。

所以使用`args[0].equals("Help")`

当您使用时，`==`您正在检查它们是否是完全相同的**对象**（即，您实际上是在检查内存中存储操作数的位置是否相同），而不是根据类的语义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T16:47:40.493

好吧，我们都知道字符串是对象，所以我们不能用`==`. 在面向对象的上下文中，我们使用`==`运算符来检查两个引用是否指向同一个对象。所以通过这个声明，

```
args[0] == "HELP" 
```

您告诉 JVM 引用 args[0] 和“HELP”字符串返回的引用是否指向同一个对象，他们不确定。因为用户输入的字符串和“帮助”字符串是完全不同的对象。

如果你想检查两个对象是字面上的（或有意义的相等）你有`equals()`方法。

所以最终，你应该写

```
args[0].equals("HELP") 
```

# ruby-on-rails - 向现有的 Rails 应用程序添加电子商务工具

> ID：11171221
> 
> 赞同：0
> 
> 时间：2012-06-23T16:36:59.650
> 
> 标签：ruby-on-rails, e-commerce, shopping-cart, spree, activemerchant

我有一个现有的 Rails 3.1 应用程序，其中包含带有价格、描述等的模型产品...

网站所有者现在正在考虑添加电子商务功能以与数据库中的现有产品一起使用。

什么是实现这一目标的有效方法？

是否建议将 Spree 添加到现有应用程序中？

还是使用 Activemerchant 之类的东西从头开始构建购物车更合适？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:26:48.080

一年前我在工作中遇到了同样的问题。选项有三个：

1.  使用*OAuth*链接像**Spree**这样的电子商务以共享您的 webapp 身份验证
**   包括来自其他开源解决方案的部分，如[ror_commerce](https://github.com/drhenner/ror_ecommerce)或Substruct*   从零开始搭建：没那么简单，还有很多关于支付、仓库管理等的问题*

 *我们选择 1\. 因为 Spree 它是一个完整的电子商务解决方案，拥有庞大的社区和大量的插件。我想建议观看 ror_ecommerce，因为它是一款优雅而简单的软件。*

# c# - WPF：从列表框中删除项目

> ID：11171231
> 
> 赞同：-3
> 
> 时间：2012-06-23T16:39:27.500
> 
> 标签：c#, wpf, listbox

> **可能重复：**
> [WPF 列表框：删除项目](https://stackoverflow.com/questions/4378099/wpf-listbox-item-removal)

我在这里面临一个非常奇怪的问题。我想要做的只是从 WPF 的列表框中删除项目，所以这里是代码：

```
 private void button9_Click(object sender, RoutedEventArgs e)
    {
        if (listBox7.SelectedItems.Count > 0)
        {
            foreach (string item in listBox7.SelectedItems)
            {
                listBox7.Items.Remove(item);
            }
        }
    } 
```

这根本不起作用，我总是收到错误消息 [在 foreach 循环中]：

```
Collection was modified; enumeration operation may not execute. 
```

这真的很烦人，因为我多年来一直在使用这种方法。顺便说一句，我对 WPF 很陌生，但我对 C# 有丰富的经验，所以这对我来说应该没问题。

编辑：嗯，当我输入“使用它多年”时，我发现我在谈论别的东西

无论如何，这里是修复：

```
 List<string> removals = new List<string>();

        foreach (string item in listBox7.SelectedItems)
        {
            removals.Add(item);
        }

        foreach (string s in removals)
        {
            listBox7.Items.Remove(s);
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T16:42:05.157

> 我多年来一直在使用这种方法

我怀疑，你永远不能修改你循环的集合`foreach`。循环遍历副本或使用`for`.

（`SelectedItems`是一个子集`Items`，如果你修改`Items`你修改`SelectedItems`）

# sharepoint - SharePoint 的 Web.config 文件

> ID：11171241
> 
> 赞同：0
> 
> 时间：2012-06-23T16:40:47.283
> 
> 标签：sharepoint, web-config

项目下的 web.config 文件与SharePoint 项目中* *C:\inetpub\wwwroot\wss\VirtualDirectories*下的文件有什么不同。*

是一样的吗？

假设我想使用一个程序集，我应该把它放在哪里？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:06:32.963

C:\inetpub\wwwroot\wss\VirtualDirectories 的 web.config 中的任何内容都连接到 SharePoint Web 和该 Web 单独。C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\TEMPLATE\LAYOUTS\（和 hive 文件夹）中的 web.config 连接到布局模板或运行共享点的服务。

如果要注册程序集，请将其放在 C:\inetpub\wwwroot\wss\VirtualDirectories 的 web.config 中

# ruby-on-rails - 如何测试使用 Capybara 打开 Twitter-Bootstrap 选项卡？

> ID：11171242
> 
> 赞同：1
> 
> 时间：2012-06-23T16:41:28.750
> 
> 标签：ruby-on-rails, tabs, twitter-bootstrap, capybara

我的页面上有 Twitter-Bootstrap 的选项卡窗格。如何使用 Capybara 进行测试，以获取“/pages/1#some_tab”之类的页面，“some_tab”选项卡窗格正在打开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:23:04.067

```
page.has_selector?('div', :text => 'something in my tab', :visible => true) 
```

关键是添加 visible => true 选项。

# c# - 如何在c#中检查鼠标左键按下时鼠标是否移动

> ID：11171243
> 
> 赞同：14
> 
> 时间：2012-06-23T16:41:40.983
> 
> 标签：c#, wpf, mouse

我需要找到一种方法来检查鼠标是否在 C# 中移动，而左键是按下的。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-23T16:43:13.640

这是一个示例（WPF）：

```
public MainWindow()
{
    InitializeComponent();
    this.MouseMove += new MouseEventHandler(MainWindow_MouseMove);
}

void MainWindow_MouseMove(object sender, MouseEventArgs e)
{
    if (e.LeftButton == MouseButtonState.Pressed)
    {
        //do something
    }
} 
```

# macos - 为什么 OS X 10.7.4 要我将我的应用程序移到回收站？

> ID：11171246
> 
> 赞同：8
> 
> 时间：2012-06-23T16:42:05.417
> 
> 标签：macos, osx-lion

我们有一个适用于 OS X 的应用程序，我们通过我们自己的网站分发它，它捆绑在首选项窗格中，并带有 3 个守护程序。从 10.7.4 开始，其中一个守护进程不再运行，OS X 表示：

> YZ 打不开。你应该把它移到废纸篓。

控制台对我不是很有帮助，但提供了以下错误消息：

```
23.06.12 18:22:15,284 com.apple.launchd.peruser.501: 
([0x0-0x176176].com.bananaglue.control.helper[1902]) 
Exited: Killed: 9 
```

在 OS X 10.8 上相同。我们没有改变任何东西，它以前运行时没有错误。

任何提示如何解决该问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T17:43:53.860

检查以下说明：

> 该应用程序的授权已被撤销。尽管此应用程序由已识别的开发人员签名，但此应用程序的证书已被吊销。它可能有问题。该应用程序无法打开。

Fuel Collective的[Krystof Vasa](http://help.fuelcollective.com/discussions/problems/2857-cannot-run-pochade)引用：

> Apple 出于某些（我不知道）原因在 10.7.4 中启用了 10.8 的 Gate Keeper 功能。Gate Keeper 应该让您阻止非 AppStore 或未签名的应用程序启动。**Gate Keeper**设置位于**System Preferences > Security & Privacy** - 确保设置为**Anywhere**。如果这也没有帮助，这里有一个指南如何禁用 Gate Keeper，无论如何都不应该在 10.7.4 中运行。

通过运行以下命令禁用 GateKeeper：

```
sudo spctl --master-disable 
```

也许您可以联系 Krystof Vasa 并询问他们是如何解决问题的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-21T15:56:39.120

解决此问题的“大锤”方法较少。我今天遇到了这个问题，它的发生是由于两件事的结合：在应用程序包上设置了隔离扩展属性，并且签名被破坏，因此键入：

```
codesign -vv <app bundle> 
```

结果是：

```
<app bundle>: code has no resources but signature indicates they must be present 
```

您可以通过在终端中键入 ls -la@ 来查看扩展属性。它会在文件中显示“com.apple.quarantine”。

您可以使用以下终端命令删除所有扩展文件属性，而不是禁用 Gatekeeper：

```
xattr -c <app bundle> 
```

我正在谷歌搜索，看看我是否能准确地弄清楚签名是如何被破坏的，以便我可以修复它（我是制造这个东西的公司的新开发人员）并遇到了这个问题。

Disabling Gatekeeper altogether is not something I'd recommend. When Gatekeeper warns you about something, you get additional information about it and its possible that it could save you from accidentally running something you don't want to run.

# css - 使用 CSS（无 JavaScript）IE 9 及更高版本在悬停时放大和移动图像

> ID：11171247
> 
> 赞同：0
> 
> 时间：2012-06-23T16:42:05.583
> 
> 标签：css, image, internet-explorer, resize, hover

正如标题所述，我想用 CSS 放大和移动几个图像到一个固定的位置。每个图像将放大到相同的宽度并移动到相同的位置。我知道这可以通过 javascript 和 CSS3 转换属性来实现。我想知道它是否可以仅使用 CSS 完成，并且仍然可以在 IE >= 9 中查看。这是我拥有的代码：

```
<div class="logos"><a href=""><img src="" alt="" title="" /></a></div>

.logos {height: 100px; width: 100px;} 
.logos a img{max-height: 100%;
}

.logos a img:hover{
    position: fixed;
    max-width: 440px;
    top: 250px; left: 10%;
} 
```

问题：原始图像和放大/移动的图像后面有灰色背景。此外，放大/移动的图像会闪烁。使用 .png 和 .jpg 图像进行测试时会出现问题。有没有更好的方法来使用 CSS 或者我需要使用 javascript？

我想坚持使用 CSS，因为我更喜欢使用我熟悉的东西，而不是复制和粘贴一段随机代码。这样，当我有新的需求或问题时，我就可以解决它……找出或至少理解给我的解决方案。:) 提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T17:21:21.243

它闪烁是因为当图像移动时它不再存在，因此不再悬停，您可以这样做：

```
 .logos a,.logos a img
 {
     max-height: 100%;
     display: block;
     width:100px;
     height:200px;
 }

 .logos a:hover img
 {
     border: solid 12px black;
     position: fixed;
     right: 10px; 
     top: 10px; 
     z-index:10;
 } 
```

# haml - 如何添加谷歌加一标签 带火腿

> ID：11171248
> 
> 赞同：0
> 
> 时间：2012-06-23T16:42:16.370
> 
> 标签：haml, google-plus-one

如何在 haml 中添加 Google +1 按钮？

结果应该类似于

```
<g:plusone annotation="inline"></g:plusone> 
```

然后，该标签将替换为带有 Google 提供的一段 javascript 的实际按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:06:16.047

我不熟悉 Google +1，但要生成这样的代码，`html`您可以使用以下`haml`代码：

```
%g:plusone{:annotation => "inline"} 
```

# css - jstree 图标未与元素文本对齐

> ID：11171249
> 
> 赞同：1
> 
> 时间：2012-06-23T16:42:50.187
> 
> 标签：css, alignment, jstree

我在 jstree 上的 CSS 中使用 margin-top 如下：

```
.jstree li a {
color:rgb(80,80,80);
font-size:130%;
vertical-align:middle;
margin-top:10px;
} 
```

但是，jstree 扩展图标（右向箭头）比元素对齐得更高，如下所示：[来自另一个问题](http://www.nicholaschase.com/jstree/test.html)

如何让图标与元素文本对齐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:48:14.433

尝试添加这种样式，

```
.jstree-default .jstree-no-dots .jstree-closed > ins {
  background-position:0 4px;
} 
```

# macos - Arduino 以太网不会在 Macbook Air 上使用 Arduino IDE 上传程序

> ID：11171251
> 
> 赞同：1
> 
> 时间：2012-06-23T16:43:05.720
> 
> 标签：macos, arduino

我正在尝试使用 Macbook Air 为 Arduino 开发。我购买了带有 POE 模块的 Arduino 以太网。唯一的输入是 RJ-45 和电源适配器。我正在使用 Apple USB 以太网适配器、Cat 5e 电缆和 9V 300Ma 电源适配器。当我启动 IDE 时，唯一显示的端口是“蓝牙”端口。Arduino 确实有能力，所以我知道这块板并不完全是 DOA。我看不到任何支持在 Macbook Air 上开发 Arduino 或 Arduino 以太网。我意识到我可以使用 Arduino Uno + Arduino Shield 来实现这一点，但我想使用 POE。

当我运行时：

```
 ls /dev/tty.* 
```

我只返回蓝牙端口。这是在 10.7.4 上。

有没有人有在 Macbook Air 上开发 Arduino 以太网和/或 Arduino 的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T18:07:09.290

您的开发板有一个串行编程接口。

```
The 6-pin serial programming header is compatible with the USB Serial adapter and also
with the FTDI USB cables or with Sparkfun and Adafruit FTDI-style basic USB-to-serial
breakout boards. 
```

例如，您需要[其中之一](http://www.sparkfun.com/products/718)来对其进行编程。

# ruby-on-rails - 仅使用 Rails 复数助手将强样式应用于数字

> ID：11171252
> 
> 赞同：2
> 
> 时间：2012-06-23T16:43:06.373
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我有这个：

```
<%= link_to biscuits_path do %>
<strong> <%= pluralize @biscuit.count, t('biscuits') %> </strong>
<%= end %> 
```

结果是一个链接，如：

```
<a href="/en/biscuits"> <strong> 2 Biscuits </strong></a> 
```

我想要一个仅在数字中具有强的链接，例如：

```
<a href="/en/biscuits"> <strong> 2 </strong> Biscuits </a> 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-23T17:41:31.770

从核心扩展中使用`String`复数更容易和更清晰：`ActiveSupport`

```
<%= link_to biscuits_path do %>
  <strong><%= @biscuit.size %></strong> <%= "biscuit".pluralize(@biscuit.size)%>
<% end %> 
```

此外，您不需要`<%= end %>`. `<% end %>`很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T17:10:37.770

您可以通过执行以下操作来获得相同的结果。

```
<%= link_to biscuits_path do %>
  <strong> <%= @biscuit.size %> </strong> <%= (@biscuit.size > 1) ? 'biscuit'.pluralize : 'biscuit' %>
<%= end %> 
```

另外，我注意到的另一件事是，您将“饼干”作为复数的第二个参数传递。我相信这应该是“饼干”。即，根据 Rails 文档，单词的单数术语作为第二个参数传递。

```
pluralize(count, singular, plural = nil) 
```

编辑：注意到一个错误。现在修好了！

# java - 为什么 Netty 需要线程池？

> ID：11171259
> 
> 赞同：2
> 
> 时间：2012-06-23T16:44:09.290
> 
> 标签：java, netty

来自 node.js 背景，我很困惑 Netty 不像 node.js 那样是单线程的。（[NioServerSocketChannelFactory](http://docs.jboss.org/netty/3.2/api/org/jboss/netty/channel/socket/nio/NioServerSocketChannelFactory.html)文档中说有boss线程和worker线程）

也许是因为与 node.js 不同，许多现有的 Java 库不是异步的。但即使是这样，为什么不让用户根据需要创建线程呢？它不是更自然，在概念上与异步事件驱动架构保持一致吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T08:06:48.173

我对node.js和javascript的了解比较有限，但是node.js不是受限于javascript不支持多线程吗？

在 Netty 中使用 boss 和 worker 线程是为了能够利用多个处理器内核而无需运行多个进程。JVM 非常重，因此限制所需实例的数量是有意义的。此外，我怀疑操作系统在线程之间切换比完整进程要快得多。

Boss 线程用于接受传入的连接，但连接的处理被移交给工作线程。我没有提到手，但我依稀记得 Grizzly 项目发布了一些性能结果，表明这比尝试接受传入连接并在同一个线程中处理这些连接更高效。

接受的连接以循环方式在工作线程上进行负载平衡。除非您明确地编写代码，否则工作线程不会相互交互。因此，工作线程模型与我对 node.js 的理解几乎相同。

Netty 通过提供允许应用程序通过独立于老板和工作线程的线程池定义线程模型的机制来处理非异步库。为了帮助解决这个问题，Netty 还提供了一些自定义线程池，它们知道给定连接正在使用的内存资源，并且还可以保证连接生成的事件的顺序。但是，没有必要使用这些机制。应用程序可以自由使用最适合的任何线程模型。

# c++ - C++ 中具有私有构造函数的子类

> ID：11171261
> 
> 赞同：0
> 
> 时间：2012-06-23T16:44:19.647
> 
> 标签：c++, constructor, private, private-constructor

我有一个简单的问题。子类可以在 C++ 中有一个私有构造函数（即用于单例实现）吗？

```
class MySubClass : public MySuperClass {
public:
   // etc.
private:
    MySubClass();
    static MySubClass* _instance;
}; 
```

这个例子对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T16:46:39.870

是的，这就是在 C++ 中实现单例的方式。该类通常还有一个`static`方法，您可以通过该方法返回一个实例。

# android - Android 从屏幕中间启动组件

> ID：11171263
> 
> 赞同：1
> 
> 时间：2012-06-23T16:44:32.177
> 
> 标签：android, android-layout

我有一个屏幕只包含两个组件 1-textView 2-button textView 从屏幕的左上角开始，但我希望它从屏幕中间而不是从顶部开始

我读到 Cravity 选项将使我的 textView 居中

这是代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tvFinishTime"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Time Is End"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/bFinishTimeBackToMain"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:11:02.460

只需添加`android:gravity="center"`您的父 LinearLayout。我试过了，它奏效了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T16:54:45.807

好吧`android:gravity="center"`，您可以使用 来完成，也可以使用 RelativeLayout 来完成。 ![在此处输入图像描述](../Images/4f790e9a4a0da3e1c9333dffc1b7f882.png)

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center"
 >

<TextView
    android:id="@+id/tvFinishTime"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="Time Is End"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<Button
    android:id="@+id/bFinishTimeBackToMain"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/tvFinishTime"
    android:layout_centerHorizontal="true"
    android:text="Button" />

</RelativeLayout> 
```

# jquery - ajax在WordPress中加载页面后如何触发jquery插件？

> ID：11171264
> 
> 赞同：2
> 
> 时间：2012-06-23T16:44:32.990
> 
> 标签：jquery, ajax, wordpress, plugins

谷歌搜索结果中的所有链接都是紫色的，几个小时以来我很沮丧，我决定请你们帮助我解决这个问题。

在我的 WordPress 主页上，一个循环会生成包含博客上所有帖子标题的列表。为了缩短网站加载时间，我决定使用 AJAX。您无需一次加载所有内容，而是单击某个帖子的标题以在下面显示其内容。简单地说，当您单击它时，会将帖子的 id（取自属性标签）发布到 ajax.php 文件（作为带有循环显示内容的 WordPress 模板...）。当内容被读出时，它会显示在前端。

问题是插件。因为它们在内容加载（DOM 更改）后不会重新触发。显然，我不想要将我安装的每个插件都添加到 AJAX 回调的解决方案，因为这不是应有的方式。我希望它自动化。WordPress 旨在简单易用（即使从开发人员的角度来看）。

我已经尝试过使用 live()、livequery() - 插件、listen() - 插件.. 并尝试将我的 ajax 脚本更改为更多的 WordPress 方式（使用 admin-ajax.php）并且每次结果都是相同的- 它不起作用。

通过插件我的意思是例如：语法荧光笔，社交分享按钮或图像的FancyBox / Lightbox......即使我将插件的功能添加到ajax循环以手动显示它仍然失败......

我怀疑我可能使用 live() 函数有点错误或什么......无论如何这是我的代码：

**前端循环（index.php）**

```
<?php while (have_posts()) : the_post(); ?>   
    <article>
        <div class="fake">
            <div class="header" rel="<?php the_ID(); ?>">
                <h1 class="title"><?php the_title(); ?></h1>
                <span class="tags">
                    <?php
                      $posttags = get_the_tags();
                      if ($posttags) {
                        foreach($posttags as $tag) {
                          echo $tag->name . ', '; 
                        }
                      }
                    ?>
                </span>
                <span class="post_no">#<?=$published?></span>
                <div class="arrow"></div>
            </div>
        </div>
        <div class="content"></div>
    </article>
   <?php endwhile; ?> 
```

**我使用的 AJAX 片段：**

```
$('.header').live('click',function() {
        var content = $(this).parent().parent().find('.content');
        var post_id = $(this).attr("rel"); 
        content.load("http://localhost/simpleecode/ajax/",{id:post_id}).delay(800).slideDown('slow');}); 
```

**AJAX 循环模板：**

```
<?php $post = get_post($_POST['id']); ?>
<?php if ($post) : ?>
<?php setup_postdata($post); ?>
<?php the_content(); ?>
<?php endif;?> 
```

我认为您可能也喜欢链接到开发网站以检查您自己的 DOM 和文件（我使用短链接，因为它是开发网站，无论如何我不希望它公开）：

[http://bit.ly/Oa6hWH](http://bit.ly/Oa6hWH)

希望您对如何执行此操作有所了解：S

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T16:57:37.237

使用 AJAX 请求的成功/完成回调来调用 DOM 新的 html 插件。

```
content.load("http://localhost/simpleecode/ajax/",{id:post_id}, function(){
     /* new html now exists*/
    $(this).find('.classThatNeedsPlugin').somePlugin();

}).delay(800).slideDown('slow'); 
```

**[jQuery API - load() 方法文档](http://api.jquery.com/load/)**

如果插件中有任何尺寸敏感代码，您可能需要更改此代码以在动画回调中调用插件

编辑：与其使用 delay() 来设置动画，不如在同一个成功回调中调用动画，然后 html 将准备就绪

```
content.load("http://localhost/simpleecode/ajax/",{id:post_id}, function(){
     /* new html now exists*/
    $(this).find('.classThatNeedsPlugin').somePlugin().slideDown('slow');      

}); 
```

**Edit2 替代方法：jQuery 延迟对象方法。**

您还可以使用 deferred 来设置您的 ajax 回调。

```
var jqXhr= content.load("http://localhost/simpleecode/ajax/",{id:post_id});
$.when( jqXhr).then( /* plugin function */); 
```

**或自定义事件**

```
/* on page load*/
$('#myTable').on('myCustomEventName', function(){
     $(this).doPlugins();
}).trigger('myCustomEventName');

/* ajax callback*/
content.load("http://localhost/simpleecode/ajax/",{id:post_id}, function(){
     $('#myTable').trigger('myCustomEventName')

}) 
```

# ruby - RubyMotion：UIWindow 背景颜色

> ID：11171265
> 
> 赞同：0
> 
> 时间：2012-06-23T16:44:55.497
> 
> 标签：ruby, rubymotion

我正在观看关于 RubyMotion 的介绍性截屏视频以开始使用[http://pragmaticstudio.com/screencasts/rubymotion](http://pragmaticstudio.com/screencasts/rubymotion)。在截屏视频中，作者使用 window.backgroundColor 来设置背景颜色。但是，当我查看此页面上的 UIWindow 类参考[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html#//apple_ref/doc/uid/ TP40006817](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html#//apple_ref/doc/uid/TP40006817)，我没有看到 backgroundColor 属性。这是从哪里来的？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T19:38:08.310

（这正是提问者所说的解决了他的问题——我只是想让这个问题离开未回答的页面）

提问者发布的解决方案是：

> 没关系，我只是想通了，既然 UIWindow 继承自 UIView，它也继承了 backgroundColor 属性。

# android - Java 数组中的继承：为什么这是类型不匹配？

> ID：11171267
> 
> 赞同：0
> 
> 时间：2012-06-23T16:45:17.403
> 
> 标签：android, arrays, inheritance, android-fragments

我有一个`BaseFragment`所谓的 LeaderboardFragment 扩展`Fragment`：

```
public class LeaderboardFragment extends Fragment 
```

当我在 中定义下一个时`FragmentActivity`，我得到类型不匹配：

```
Fragment[] fragments = new LeaderboardFragment[] {new Fragment1(),
    new Fragment2(), new Fragment3()}; 
```

而这些碎片，都在延伸`LeaderboardFragment`。这样的事情应该是可能的，因为他们只是继承了那个超类。

***编辑*** 这就是我的 FragmentActivity 的样子：

```
public class LeaderboardTabHost extends FragmentActivity {

ViewPager myViewPager;
Fragment[] fragments = new Fragment[] {new Fragment1(), new Fragment2(), new Fragment3()};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fragment_collection_object);

    MyPagerAdapter adapter = new MyPagerAdapter(getSupportFragmentManager());
    myViewPager = (ViewPager) findViewById(R.id.pager);
    myViewPager.setAdapter(adapter);
    myViewPager.setCurrentItem(1);
}

private class MyPagerAdapter extends FragmentPagerAdapter {

    public MyPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int index) {
        return fragments[index];
    }

    public int getCount() {
        return 3;
    }

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) {
        ((ViewPager) arg0).removeView((View) arg2);
    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        // TODO Auto-generated method stub
        return arg0 == ((View) arg1);
    }

    @Override
    public Parcelable saveState() {
        return null;
    }
}

public class Fragment1 extends LeaderboardFragment {

    public Fragment1() {
        super();
        setTag("time");
    }
}

public class Fragment2 extends LeaderboardFragment {

    public Fragment2() {
        super();
        setTag("distance");
    }
}

public class Fragment3 extends LeaderboardFragment {

    public Fragment3() {
        super();
        setTag("speed");
    }
} 
```

}

确切的错误是：

```
//Type mismatch: Cannot convert from LeaderboardTabhost.Fragment1 to Fragment 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:18:17.987

我已经解决了这个问题。

`android.app.Fragment`我在瞄准时不小心延长了`android.support.v4.app.Fragment`。

我修复了导入，错误消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T16:50:06.490

我认为这行不通。从理论上讲，如果您将片段定义为`Fragment[]`并使用 对其进行初始化`LeaderboardFragment[]`，那么将其他类型的片段添加到该数组`Fragment`中会发生什么？`LeaderboardFragment`

无论如何，我不明白为什么你不能使用这个：

```
Fragment[] fragments = new Fragment[] {new Fragment1(),
new Fragment2(), new Fragment3()}; 
```

最后，数组中的对象是扩展类的类的实例`Fragment`。

# ios - IOS 故事板 - 如何在故事板屏幕上放置视觉元素

> ID：11171268
> 
> 赞同：0
> 
> 时间：2012-06-23T16:45:51.617
> 
> 标签：ios, ios5, storyboard

![在此处输入图像描述](../Images/7996bbcc7d14c57013c2097661dc2029.png)我设置了一个带有一些屏幕的故事板。我能够将标题放在不同的屏幕上，但由于某种原因，我无法弄清楚如何在屏幕上放置按钮和文本字段。

如何导航到屏幕右侧的这些选项？

谢谢！ ![在此处输入图像描述](../Images/7996bbcc7d14c57013c2097661dc2029.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T16:48:28.887

确保您已放大到 100%。当您缩小时，您无法将控件添加到视图控制器。

编辑：由于您已放大，您是否在使用控件库（[在右侧面板视图的底部](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhone101/Articles/05_ConfiguringView.html)）？只需将按钮或字段从那里拖到您的视图上。

编辑 2：正如 Alladinian 所注意到的，您在控制列表中输入了搜索文本，这就是为什么不是所有内容都可见的原因。

# android - 需要 Android Compass 实施信息

> ID：11171275
> 
> 赞同：1
> 
> 时间：2012-06-23T16:47:10.227
> 
> 标签：android

我已经为罗盘实现了以下代码，但是当我将以下代码中的值（由 azimut 返回）与 iphone 罗盘应用程序进行比较时，似乎我在阅读时偏离了 90 度。我需要从其他任何地方获取值吗传感器..？？。此外，即使在应用低通滤波器后，似乎也有相当多的抖动。对此有什么建议..？？

```
public class CompassExample4Activity extends Activity implements SensorEventListener{

private SensorManager mSensorManager;
CompassView mCompassView;
Sensor accelerometer;
Sensor magnetometer;
float azimut;
float[] mGravity;
float[] mGeomagnetic;
static final float ALPHA = 0.2f;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mCompassView = new CompassView(this);
    setContentView(mCompassView);

    mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
    accelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
    magnetometer = mSensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);
}

@Override
public void onResume() {
    super.onResume();
    mSensorManager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_UI);
    mSensorManager.registerListener(this, magnetometer, SensorManager.SENSOR_DELAY_UI);
}

@Override
public void onPause() {
    super.onPause();
    mSensorManager.unregisterListener(this);
}

@Override
public void onAccuracyChanged(Sensor sensor, int accuracy) {
    // TODO Auto-generated method stub

}

@Override
public void onSensorChanged(SensorEvent event) {
    // TODO Auto-generated method stub
    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
          mGravity = lowPass(event.values, mGravity);
    if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD)
          mGeomagnetic = lowPass(event.values, mGeomagnetic);

    if (mGravity != null && mGeomagnetic != null) {
          float R[] = new float[9];
          float I[] = new float[9];
          boolean success = SensorManager.getRotationMatrix(R, I, mGravity, mGeomagnetic);
          // Correct if screen is in Landscape
          SensorManager.remapCoordinateSystem(R, SensorManager.AXIS_X,
                    SensorManager.AXIS_Z, R);

          if (success) {
            float orientation[] = new float[3];
            SensorManager.getOrientation(R, orientation);
            float azimut = orientation[0]; // orientation contains: azimut, pitch and roll
            mCompassView.updateDirection(azimut*360/(2*3.14159f));
            //mCompassView.updateDirection(azimuth);
          }
     }
}

protected float[] lowPass( float[] input, float[] output ) {
    if ( output == null ) return input;

    for ( int i=0; i<input.length; i++ ) {
        output[i] = output[i] + ALPHA * (input[i] - output[i]);
    }
    return output;
} 
```

}

# android - 在主屏幕小部件中显示数组

> ID：11171276
> 
> 赞同：1
> 
> 时间：2012-06-23T16:47:28.730
> 
> 标签：android, arrays, widget

我正在尝试在主屏幕上显示一些新闻，并且我有此代码。我想在距离数组 5 秒后显示每个新的。

```
public class PointlessWidget extends AppWidgetProvider{

static final String DATA_TITLE = "T";
static final String DATA_LINK  = "L";
static LinkedList<HashMap<String, String>> data1;
static String feedUrl;

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    // TODO Auto-generated method stub
    super.onUpdate(context, appWidgetManager, appWidgetIds);
    RemoteViews v = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
    feedUrl = "http://www.blabla.com";

            XMLParser parser = new XMLParser(feedUrl); 
                data1 = (LinkedList<HashMap<String, String>>)parser.parse();
                                Iterator<HashMap<String, String>> itr = data1.iterator();
                Object element;
                HashMap<String, String> entry;
                String Temp_URL=null,Temp_TITULO=null,Actual_URL,Actual_TITULO,Anterior_URL = null,Anterior_TITULO,Sigiente_URL,Sigiente_TITULO;

                while (itr.hasNext()) {
                    element = itr.next();
                    entry = (HashMap<String, String>) element;
                    mierda = entry.get("T");
                    try {
                        Thread.sleep(5000);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    v.setTextViewText(R.id.word_title, mierda);
                    AppWidgetManager manager = AppWidgetManager.getInstance(context);
                    manager.updateAppWidget(appWidgetIds, v);
                    Log.i("***Selected Tab", "Im currently in tab with index::" + mierda);

                } 
```

问题是我设法显示一两个元素然后它停止了，因为它说对象在等待（）之前没有被线程锁定。

我该如何实施？十分感谢

* * *

我实现了服务，但仍然抛出 ANR 错误。

```
 @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
        // To prevent any ANR timeouts, we perform the update in a service
        context.startService(new Intent(context, UpdateService.class));
    }

    public static class UpdateService extends Service {
        @Override
        public void onStart(Intent intent, int startId) {
            // Build the widget update for today
            RemoteViews v = new RemoteViews(this.getPackageName(), R.layout.widget_layout);
            feedUrl = "http://www.blabla.com";

                    XMLParser parser = new XMLParser(feedUrl); 
                        data1 = (LinkedList<HashMap<String, String>>)parser.parse();
                        int size = data1.size();
                        Iterator<HashMap<String, String>> itr = data1.iterator();
                        Object element;
                        HashMap<String, String> entry;
                        String Temp_URL=null,Temp_TITULO=null,Actual_URL,Actual_TITULO,Anterior_URL = null,Anterior_TITULO,Sigiente_URL,Sigiente_TITULO;

            while (itr.hasNext()) {
                element = itr.next();
                entry = (HashMap<String, String>) element;
                mierda = entry.get("T");

                try {
                    Thread.sleep(5000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                v.setTextViewText(R.id.word_title, mierda);
                ComponentName thisWidget = new ComponentName(this, PointlessWidget.class);
                AppWidgetManager manager = AppWidgetManager.getInstance(this);
                manager.updateAppWidget(thisWidget, v);
                Log.i("***Selected Tab", "Im currently in tab with index::" + mierda);

            }

    } 
```

我怎样才能解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T17:09:05.563

如果 Activity 被阻止超过 5 秒，Android 会抛出一个没有响应的 Activity[看到这个](http://developer.android.com/guide/practices/responsiveness.html)，这可能就是你不能响应的原因。为此使用不同的[线程](http://developer.android.com/reference/java/lang/Thread.html)和[Handler](http://developer.android.com/reference/android/os/Handler.html)或 asyncTask 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:09:58.893

使用服务来做网络的东西和解析。

请参阅[Android 文档](http://developer.android.com/guide/topics/appwidgets/index.html)或此[示例](http://code.google.com/p/wiktionary-android/source/browse/trunk/Wiktionary/src/com/example/android/wiktionary/WordWidget.java)。

**编辑：** 我认为在这种情况下使用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)并覆盖可能是个好主意`onHandleIntent()`

# perl - 使用 Statistics::TTest 在 Perl 中计算 p 值时发生奇怪的碰撞

> ID：11171277
> 
> 赞同：2
> 
> 时间：2012-06-23T16:47:33.397
> 
> 标签：perl, statistics

我有一个我无法弄清楚的神秘问题。

我[`Statistics::TTest`](https://metacpan.org/module/Statistics%3a%3aTTest)用来计算数千对数字分布的 p 值。

我正在使用这些 p 值来创建[火山图](http://en.wikipedia.org/wiki/Volcano_plot_%28statistics%29)，当我绘制 p 值时，我观察到一个奇怪的伪影，其中许多点都获得了相同的 p 值。

经过一番调查，我可以用下面代码中的四对数字重新创建这种现象。

当我在 Excel 中计算这些对的 p 值时，这些值都非常不同（相差几个数量级），但使用`Statistics::TTes`我得到的每对值*完全相同。*

p 值非常小（大约 1.6e-12）所以我想知道这是否不是某种精度问题，但我无法弄清楚。

如果您运行下面的代码，它将显示四个相同的 p 值（T 检验概率，`t_prob`），尽管真实的 p 值范围从`1.7e-19`到`2.8e-29`。

我尝试过使用类似的方法`Statistics::Distributions`，但我遇到了同样的问题，但我认为`Statistics::TTest`依赖于`Statistics::Distributions`这些计算。

我找不到执行此计算的任何其他模块。

我应该注意到，绝大多数（99%）的成对分布都得到了正确的 p 值。只有少数会在错误的值上产生这种奇怪的碰撞。

有没有人知道出了什么问题？

非常感谢帮助，谢谢！

这是代码：

```
#!/usr/bin/perl -w

use strict;
use Statistics::TTest;

my %datasets = ();

@{$datasets{a}[0]} = (0.722466024,0.925999419,1,1.049630768,1.056583528,1.10433666,1.13093087,1.150559677,1.220329955,1.316145742,1.333423734,1.63691458,1.691534165,0.713695815,0.815575429,0.918386234,0.925999419,0.941106311,0.948600847,0.970853654,0.98550043,0.98550043,1,1.028569152,1.042644337,1.10433666,1.117695043,1.269033146,1.286881148,1.298658316,1.575312331);
@{$datasets{a}[1]} = (-0.49410907,-0.358453971,-0.321928095,-0.286304185,-0.200912694,-0.200912694,-0.168122759,-0.120294234,-0.120294234,-0.104697379,-0.104697379,-0.074000581,-0.058893689,-0.577766999,-0.514573173,-0.514573173,-0.49410907,-0.358453971,-0.358453971,-0.304006187,-0.251538767,-0.184424571);

@{$datasets{b}[0]} = (-0.434402824,-0.286304185,-0.251538767,-0.058893689,-0.043943348,-0.043943348,0.084064265,0.163498732,0.23878686,0.23878686,0.310340121,0.839959587,0.879705766,-0.556393349,-0.268816758,-0.251538767,-0.152003093,-0.104697379,-0.089267338,-0.029146346,-0.029146346,0,0.070389328,0.084064265,0.097610797,0.124328135,0.137503524,0.189033824,0.189033824,0.214124805,0.214124805,0.214124805,0.321928095,0.333423734,0.367371066,0.40053793,0.411426246,0.443606651,0.516015147,0.669026766,0.713695815);
@{$datasets{b}[1]} = (0.782408565,0.799087306,0.82374936,0.887525271,0.925999419,0.933572638,0.956056652,0.97819563,0.98550043,1.021479727,1.084064265,1.097610797,1.13093087,1.150559677,1.15704371,1.176322773,1.182692298,1.22650853,1.286881148,1.292781749,1.310340121,1.459431619,1.485426827,1.521050737,1.59454855,1.695993813,1.713695815,1.726831217,0.40053793,0.411426246,0.59454855,0.925999419,0.941106311,0.948600847,0.98550043,1.028569152,1.070389328,1.117695043,1.124328135,1.220329955,1.316145742,1.744161096);

@{$datasets{c}[0]} = (-0.043943348,-0.029146346,-0.01449957,0.028569152,0.097610797,0.124328135,0.176322773,0.201633861,0.263034406,-0.862496476,-0.104697379,0.084064265,0.084064265,0.084064265,0.124328135,0.124328135,0.163498732,0.263034406,0.275007047,0.286881148,0.321928095,0.333423734);
@{$datasets{c}[1]} = (-2.64385619,-2.556393349,-2.473931188,-2.395928676,-2.395928676,-2.395928676,-2.321928095,-2.321928095,-2.321928095,-2.251538767,-2.251538767,-2.184424571,-2.120294234,-2,-0.535331733,-1.64385619,-1.556393349,-1.514573173,-1.514573173,-1.473931188,-1.434402824,-1.434402824,-1.395928676,-1.395928676,-1.395928676,-1.395928676,-1.358453971,-1.358453971,-1.358453971,-1.358453971,-1.358453971,-1.321928095,-1.286304185,-1.286304185,-1.286304185,-1.251538767,-1.217591435,-1.120294234,-1);

@{$datasets{d}[0]} = (0.933572638261024,0.948600847493356,0.948600847493356,0.970853654340483,0.978195629681652,1.111031312388740,1.150559676575380,1.416839741912830,0.731183241572200,0.790772037862000,0.815575428862573,0.855989697308481,0.871843648509318,0.895302621333307,0.933572638261024,0.941106310946431,0.948600847493356,0.956056652412403,0.970853654340483,0.992768430768924,1.000000000000000,1.063502942306160,1.226508529808680,1.269033146455240,1.298658315564520,1.704871964456350);
@{$datasets{d}[1]} = (-0.473931188332412,0.028569152196771,0.042644337408494,0.056583528366368,0.070389327891398,0.084064264788475,0.097610796626422,0.111031312388744,0.454175893185802,0.454175893185802,-0.514573172829758,-0.268816758427800,-0.168122758808327,-0.136061549576028,-0.043943347587597,0.014355292977070,0.111031312388744,0.124328135002202,0.137503523749935,0.176322772640463,0.238786859587116,0.250961573533219,0.344828496997441);

foreach my $dataset (sort keys %datasets) {

    my $ttest = new Statistics::TTest;
    $ttest->load_data(\@{$datasets{$dataset}[0]},\@{$datasets{$dataset}[1]});
    print "$dataset - t_prob:\t$ttest->{t_prob}\n\n";

} 
```

编辑：我还没有弄清楚 Statistics::TTest 或 Statistics::Distributions 发生了什么，但我找到了另一个可以正常工作的模块。万一其他人遇到这个问题，我会在这里发布。据我了解，一对分布上的单向方差分析相当于学生 T 检验。因此，我尝试使用 Statistics::ANOVA 并取得了成功。使用上述代码中 %datasets 的定义，以下循环将计算正确的 p 值（匹配 Excel 给出的值）：

```
foreach my $dataset (sort keys %datasets) {

    my $aov = Statistics::ANOVA->new();

    $aov->load( "$dataset\1", \@{$datasets{$dataset}[0]} );
    $aov->add( "$dataset\2", \@{$datasets{$dataset}[1]} );

    $str = $aov->anova(independent => 1, parametric => 1, ordinal => 0);

    print $str->{_stat}->{p_value} . "\n";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:41:09.620

如果您有一个 64 位平台，那么您可能会通过安装 64 位 perl 获得一些东西，但这个问题可能最好向模块的作者提出。

[`Statistics::TTest`](https://metacpan.org/module/Statistics%3a%3aTTest)[卷云芳](https://metacpan.org/author/YUNFANG)写的

[`Statistics::Distributions`](https://metacpan.org/module/Statistics%3a%3aDistributions)由[迈克尔·科斯帕奇撰写](https://metacpan.org/author/MIKEK)

# c# - 需要合并 Dll 并创建单个程序集

> ID：11171280
> 
> 赞同：1
> 
> 时间：2012-06-23T16:47:57.490
> 
> 标签：c#, .net, dll, ilmerge

我正在尝试部署一个 winforms 应用程序。目前我打算将 Dll 和可执行文件打包成一个大小约为 12MB 的单个 Exe（压缩）。这是标准程序吗？这种方法有一些缺点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T16:51:34.127

Microsoft 实际上为此提供了一个工具，称为[ILMerge](http://research.microsoft.com/en-us/people/mbarnett/ILMerge.aspx)。记住：

*   您将立即失去在应用程序中仅更新一个组件的能力——您需要重新打包新版本并将它们作为一个文件发布。

*   它不适用于 WPF，因此它可能会限制您从 winforms 的升级路径

*   .NET 4.5 有更好的方法（在上面的链接中记录）。

此外，有人为它创建了一个[GUI](http://ilmergegui.codeplex.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:00:08.150

您可以在此线程的末尾找到一些官方链接和一个很好的优缺点列表，其中提出类似问题的原始发帖人总结了反馈和他学到的东西：

[http://www.pcreview.co.uk/forums/single-multiple-assemblies-big-apps-and-code-reuse-t2659572.html](http://www.pcreview.co.uk/forums/single-multiple-assemblies-big-apps-and-code-reuse-t2659572.html)

简而言之，主要缺点是服务困难（仅部署某些功能的新版本），可能会减少启动时间（所有代码都预先加载）和更大的内存占用，即使可能不需要加载某些功能。我可以看到的潜在好处是部署更简单，按需加载程序集的开销可能更少，并且如果您想要实现的话，可能更好地混淆代码（使用工具）。

我假设你有一些理由想要这样做。FWIW，我个人认为这是一个坏主意。

# html - 选项卡的标题出现在垂直手风琴的右侧

> ID：11171296
> 
> 赞同：0
> 
> 时间：2012-06-23T16:49:57.280
> 
> 标签：html, image, css, jquery-ui-accordion

**这是怎么回事？**：手风琴工作正常，但选项卡显示在手风琴的右侧。

**jQuery**

```
$(document).ready(function(){
    $(".accordion .title").click(function(){
        $(this).next(".accordion .details").slideToggle(500)
    }).next().hide();
}); 
```

* * *

**CSS**： **[悬停盒](http://sonspring.com/journal/hoverbox-image-gallery)**

```
.hoverbox
{
    cursor: default;
    list-style: none;
} .hoverbox a {
    padding-top: 5px;
    cursor: default;
    text-decoration: none;
    color: black;
} .hoverbox a .preview {
    display: none;
} .hoverbox a:hover .preview {
    display: block;
    position: absolute;
    top: -33px;
    left: -45px;
    z-index: 1;
} .hoverbox img {
    vertical-align: top;
    height: 125px;
} .hoverbox li {
    display: inline;
    float: left;
    margin: 3px;
    padding: 5px;
    position: relative;
    text-align: right;
    text-decoration: none;
} .hoverbox .preview {
    border-color: #000;
    height: 300px;
} .gallery {
    width: 100%;
} 
```

* * *

**HTML**：一个图像的示例。

```
<div class="accordion">
    <div class="title"><h2></h2></div>
    <ul class="details">
    <div class="gallery">
    <ul class="hoverbox">
        <li>
        <a href="#">
            <img src="pictures/1.jpg" class="thumbnail"/>
            <img src="pictures/1.jpg" class="preview"/></br>
            Compass
        </a>
        </li>
    </ul>
    </div>
    </ul>
</div> 
```

首先，让我们从刚刚加载的手风琴开始。

![手风琴](../Images/22e3afef1476b28177f77b6cff843f95.png)

在我单击“玻璃窗”后，会发生这种情况。

![在此处输入图像描述](../Images/b2c8a3dc154568d94600bb7219496e6f.png)

**我做了什么**：在过去的四五天里，我花了很多时间重新定位`<div>`标签，确保我的代码是正确的并涉足 CSS（特别是确保文本没有奇怪地对齐或者有一些愚蠢的关于如何图像已显示）。不是很具体，我知道。对于这个不那么简洁的问题，我深表歉意。

* * *

# **更新**

我尝试使用 Dexter 的建议，但我仍然遇到文本对齐问题。

单击第 1 节后...

![在此处输入图像描述](../Images/fb8f64f62d6fe7b7c0ed8b5e7982b974.png)

还有第 2 节...

![在此处输入图像描述](../Images/cf388169f8e65da028621af085e75be7.png)

如前所述，每个部分都应该在另一个之下。**视频**部分与手风琴分开，主页**是**页面底部导航列表的一部分（用作页脚）。

我已经明白，对于与手风琴无关的所有其他内容，这可能是我的 CSS 的问题。由于我不知道出了什么问题，我将只上传整个 CSS（与手风琴 CSS 的长度大致相同）......当然，那是“好的”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T19:03:06.330

那么，这就是你想要达到的目标吗？

在这里看小提琴：http: [//jsfiddle.net/GRATx/](http://jsfiddle.net/GRATx/)

编辑：

小提琴中的代码[使用悬停框功能更新]：http: [//jsfiddle.net/GRATx/1/](http://jsfiddle.net/GRATx/1/)

# zend-framework - Zend 插件为每个访问者捕获推荐人

> ID：11171299
> 
> 赞同：0
> 
> 时间：2012-06-23T16:50:16.860
> 
> 标签：zend-framework, zend-view, zend-controller, zend-controller-plugin

为了为我们的网站构建一些简单的分析 - 我试图从用户登陆我们页面的位置捕获源，如果他最终注册 - 将源存储在数据库中。

由于这段代码必须在所有页面上 - 我想将它添加到 layout.phtml 这就是我到目前为止所拥有的（只是一个粗略的草稿）

```
$ref_cookie = $_COOKIE["xyzcom-referrer"];
if(!Zend_Auth::getInstance()->hasIdentity() && $ref_cookie==null) {
$ref=null;
$ref=$_GET['ref'];
if($ref==null || strlen($ref)==0)
    $ref= $_SERVER["HTTP_REFERER"];
//设置在cookie中，以防用户稍后返回并注册
setcookie("xyzcom-referrer",$ref);
}

```

它非常不言自明 - 如果用户未登录 - 我试图通过 ref 参数或通过 HTTP_REFERRER 获取引荐来源。我将其存储在 cookie 中的原因是用户可能今天访问该站点，但一周后注册。

因此，每次用户注册时，我都会查看是否设置了此 cookie - 如果设置了 - 我将获取该值并将其作为引用源插入到数据库中。

这是解决这个问题的最佳方法吗？或者我应该像控制器插件一样编写 - 如果是这样，我该怎么做。感谢您的提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T17:32:55.967

布局并不是真正适合这种逻辑的地方，所以是的，我建议将其移至控制器插件。这应该很简单，创建一个插件类，将其注册到前端控制器，然后在该类中创建一个`preDispatch`方法（如手册中所述）并将您的代码移至该方法。

您的代码也存在一些问题：

*   您假设将设置 HTTP_REFERER，但可能不会。

*   您正在设置一个仅会话 cookie（当用户关闭他/她的浏览器时将被删除），没有路径（这意味着如果它设置在您网站的子目录中，它将无法用于您的主页）。您需要提供第三个和第四个参数`setcookie()`来解决这些问题。

# javascript - JavaScript XML 解析

> ID：11171301
> 
> 赞同：0
> 
> 时间：2012-06-23T16:50:26.657
> 
> 标签：javascript, jquery, xml-parsing

xml

```
<publication_date media_type="print">
        <month>1</month>
        <year>2011</year>
</publication_date> 
```

我已使用此代码获取标题

```
var year = $xml.find('publication_date year').text(); 
```

但有时 xml 包含两种不同的类型，如下所示：

```
<publication_date media_type="print">
        <month>05</month>
        <day>22</day>
        <year>2012</year>
</publication_date>
<publication_date media_type="online">
        <month>04</month>
        <day>26</day>
        <year>2012</year>
</publication_date> 
```

我想选择女巫附带的年份`online` `media-type`，如果没有`online`选择`print`类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T16:51:51.600

这很简单，使用属性选择器：

```
$xml.find("publication_date[media_type=online] year").text() 
```

# php - 正则表达式保留/匹配以某个字符开头的任何单词

> ID：11171305
> 
> 赞同：0
> 
> 时间：2012-06-23T16:50:44.493
> 
> 标签：php, javascript, regex

我只想保留以 # 或 @ 开头的字符串

1.  foob​​ar @sushi - 芥末
2.  foob​​ar #sushi - 辣根

因此仅匹配**@susui**或删除它周围的文本。PHP 或 JavaScript。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T16:52:10.870

根据您定义“单词”的方式，您可能想要

```
(?<=\s|^)[@#]\S+ 
```

或者

```
(?<=\s|^)[@#]\w+ 
```

**解释：**

```
(?<=\s|^)  # Assert that the previous character is a space (or start of string)
[@#]       # Match @ or #
\S+        # Match one or more non-space characters
(or \w+)   # Match one or more alphanumeric characters. 
```

所以，在 PHP 中：

```
preg_match_all('/(?<=\s|^)[@#]\S+/', $subject, $result, PREG_PATTERN_ORDER); 
```

`$result`为您提供字符串中所有匹配项的数组`$subject`。在 JavaScript 中，这是行不通的，因为不支持lookbehinds（正则表达式开头的“断言...”部分）。

# javascript - 从 Jquery 移动 UI 获取 URL 参数

> ID：11171308
> 
> 赞同：1
> 
> 时间：2012-06-23T16:51:17.767
> 
> 标签：javascript, jquery-mobile, jquery-ui-dialog

我如何获取对话框的 URL（使用 jquery 移动 UI，它是一个带有元素的 .jsp 页面）。我将参数传递给对话框 xyz.com?id=123&url=dlfwlfjwejpfwjfef;

所以我想在我的对话框中得到这个我该怎么做有人可以帮忙吗？

# c# - 如何在 Visual Studio 2010 中恢复损坏的 .csproj 文件？

> ID：11171322
> 
> 赞同：10
> 
> 时间：2012-06-23T16:53:29.933
> 
> 标签：c#, visual-studio-2010

**我的 PC**
Windows 8 Preview Release
适用于 Windows Phone 的 Visual Studio 2010 Express

我的应用程序在
解决方案 A
项目 B中

**故事**
当我输入代码时屏幕冻结我
关闭电脑然后重新启动
当我在 VS2010 中加载 sln for wp
VS2010 说

> “解决方案 A（0 个项目）
> 项目 B（不可用）
> 项目文件无法加载

所以我尝试在VS2010中“编辑B.csproj”，它显示错误

> B.csproj：错误：无法读取项目文件“B.csproj”。
> B.csproj：无法加载项目文件。缺少根元素。

**帮助**
如何正确打开我的解决方案？:(

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-23T17:01:45.247

最简单的做法可能是创建一个新的项目文件。最简单的方法是：

1.  打开 Visual Studio 的新副本
2.  在与 相同类型**的不同位置**创建一个项目，`B`名称相同。
3.  关闭该 Visual Studio 副本
4.  将新创建`B.csproj`的文件复制到所有源文件所在的目录`B`，覆盖现有`B.csproj`文件（但要复制它，以防万一您需要它！）。
5.  加载 Visual Studio 并打开解决方案`A`。

您会注意到该项目不包含您期望的任何文件/引用，并且可能包含对`Class1.cs`Visual Studio 创建新项目文件时添加到新项目文件的“损坏”引用或任何其他文件。现在：

1.  确保在解决方案资源管理器中选择了项目 B，然后单击“显示所有文件”图标。它是一个包含 3 个相互重叠的文件的图片，位于刷新图标的左侧。
2.  您将能够看到项目的所有内容，但“灰显”。选择要添加回来的每个文件/文件夹，右键单击并选择“包含在项目中”。

假设您的项目没有什么太复杂的地方，您现在应该只需要重新添加任何引用，它应该可以编译和运行。通过使用[Beyond Compare](http://www.scootersoftware.com/)之类的工具来比较新项目文件和原始项目文件以查找您遗漏的内容，您可能可以解决任何其他问题。

# 最重要的是：开始使用源代码管理！

如果是这样，您将能够恢复项目文件的先前版本，而不必经历这些麻烦。您能想到的几乎所有源代码控制解决方案都可以在 PC 上运行，而无需专用服务器。最简单的设置之一是[VisualSVN Server](http://www.visualsvn.com/)，可免费用于个人*和*商业用途。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-23T11:09:00.067

只需删除 VS 文件夹中的 .user 文件即可。来源： http: [//msbiztalk.blogspot.in/2010/10/visual-studio-error-imported-project.html](http://msbiztalk.blogspot.in/2010/10/visual-studio-error-imported-project.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T17:01:34.593

如果您没有大量源文件，最快的方法可能是删除 .csproj 并创建一个新文件。然后手动添加所有源代码。如果您在同一位置创建项目文件，您可以在解决方案资源管理器中选中“显示所有文件”，然后右键单击源文件并选择“包含在项目中”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-14T20:54:07.470

只是补充@Rob所说的。您应该尝试将 Git 作为源代码控制。您可以进行本地提交，如果您需要远程服务器，可以使用 GitHub 和 BitBucket（免费的私有存储库）作为两个不错的选择。

看看这里： http: [//git-scm.com/book/en/Getting-Started](http://git-scm.com/book/en/Getting-Started)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-25T05:26:34.657

对我有用的是删除文件并粘贴同一文件的备份并在解决方案中重新加载项目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-26T06:27:36.907

这对我有用：-

我也将项目的副本保存在我的系统上的不同位置。我只是将保存的副本中的 project.csproj 文件替换到我的这个项目中。我打开我项目的文件.csproj，发现它是空的。所以我用同一个项目的保存副本替换了它。关闭视觉工作室并再次打开项目。现在我发现所有正在加载的文件。

希望这对其他人也有帮助。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-05-03T14:34:19.600

在 Visual Studio 中：

1.  右键单击项目并选择**Unload Project**；
2.  再次右键单击项目（现在显示为“不可用”）并选择**Edit MyProject.csproj**；
3.  修复红色下划线的错误；
4.  再次右键单击该项目并选择**Reload Project**。

# javascript - 我需要添加什么代码才能让这个 javascript 在文本末尾自动添加 3 个点？

> ID：11171323
> 
> 赞同：0
> 
> 时间：2012-06-23T16:53:41.293
> 
> 标签：javascript, jquery, twitter

使用此代码时：

```
<script>
$(document).ready(function ()
{
 $.getJSON("http://twitter.com/statuses/user_timeline/USERNAME.json?callback=?",     function(data) {
  if(data[0].text.length > 107)
     $(".show_tweet").html(data[0].text.substring(0,107));
  else
         $(".show_tweet").html(data[0].text);
 });
});

</script>

<div class='show_tweet'></div> 
```

我需要添加什么代码才能自动在文本末尾添加 3 个点“...”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T17:02:20.887

如果您想填充可用空间而不是实际限制特定`107`字符，您可以使用 CSS[在几乎所有浏览器](http://caniuse.com/#feat=text-overflow)中通过[`text-overflow: ellipsis`属性](http://www.w3.org/TR/css3-ui/#text-overflow0).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:02:01.690

```
$(document).ready(function ()
{
 $.getJSON("http://twitter.com/statuses/user_timeline/USERNAME.json?callback=?",     function(data) {
  if(data[0].text.length > 107)
     $(".show_tweet").html(data[0].text.substring(0,107)+'...');
  else
         $(".show_tweet").html(data[0].text);
 });
}); 
```

# haskell - 如何以向后兼容的方式为模块启用 Safe Haskell

> ID：11171325
> 
> 赞同：2
> 
> 时间：2012-06-23T16:54:18.840
> 
> 标签：haskell, backwards-compatibility, cabal

假设你有一个你知道是安全的模块。

您想使用`{-# LANGUAGE Safe #-}`模块本身或`Extensions: Safe`cabal 文件中的内容将其标记为 Safe Haskell。不幸的是，做这些中的任何一个都会破坏向后兼容性（即模块不会建立在 GHC < 7.2 上）。

如果整个库是安全的，您可以像这样将扩展指令包装在 cabal 文件中：

```
if impl(ghc >= 7.2)
  Extensions: Safe 
```

但这仅适用于整个图书馆。

如何以向后兼容的方式**将单个模块标记为 Safe Haskell？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T18:17:13.500

如果您不需要支持早于 6.12 的 GHC 版本（6.12.3 是我测试过的最古老的构造），您可以使用预处理器来完成，

```
{-# LANGUAGE CPP #-}
#if __GLASGOW_HASKELL__ >= 702
{-# LANGUAGE Safe #-}
#endif 
```

或者，您可以使用`.cabal`文件中的标志来选择要包含的源文件。

`{-# LANGUAGE #-}`¹ 对于ghc -6.12 ，必须`#if`在.`#if``#if`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T19:49:11.070

您可以编写模块的两个版本，并在编译时在它们之间进行选择。例如：

```
-- has-safe/Foo.hs
{-# LANGUAGE CPP #-}
foo = 3

-- no-safe/Foo.hs
{-# LANGUAGE CPP, Safe #-}
foo = 3

-- foo.cabal
if impl(ghc >= 7)
    hs-source-dirs: has-safe
else
    hs-source-dirs: no-safe 
```

`CPP`与基于 - 的方法相比，这种方法有优点和缺点。主要优点是您拥有阴谋集团支持的所有条件以供您选择。主要缺点是您现在有两个文件要保持同步。（但是，这应该特别容易自动化：类似于

```
echo {-# LANGUAGE Safe #-} > has-safe/Foo.hs
cat no-safe/Foo.hs >> has-safe/Foo.hs 
```

在每次编辑之后`no-safe/Foo.hs`应该可以解决问题，并且可以通过各种方式自动化。）

# facebook - 新闻源中缺少内容：https://graph.facebook.com/me/home？

> ID：11171329
> 
> 赞同：2
> 
> 时间：2012-06-23T16:55:30.437
> 
> 标签：facebook, facebook-graph-api, feed

如果我比较[https://graph.facebook.com/me/home?access_token=](https://graph.facebook.com/me/home?access_token=) ... 上的内容和我实际的 facebook 新闻提要，它们彼此不同，即一个具有另一个没有的内容有，反之亦然...？有没有办法在新闻提要中获得“全部”信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T21:48:16.370

如果你看这里：[https ://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

它说“新闻提要（这是一个过时的视图，不反映 facebook.com 上的新闻提要）：[https](https://graph.facebook.com/me/home?access_token=) ://graph.facebook.com/me/home?access_token= ...”

据我所知，没有办法使用 Facebook 当前的 API 获得准确的新闻提要。

# ruby-on-rails-3 - 为什么 rake 由于 libpq.5.dylib 而中止

> ID：11171330
> 
> 赞同：3
> 
> 时间：2012-06-23T16:55:41.360
> 
> 标签：ruby-on-rails-3, postgresql, libpq

我刚刚安装了**PostgreSQL**和用于在 Heroku 上运行 Rails 的**pg** gem。我在跑

```
$ rake -T 
```

但由于与“libpq.5.dylib”相关的原因而中止

```
rake aborted!
dlopen(/Library/Ruby/Gems/1.8/gems/pg-0.13.2/lib/pg_ext.bundle, 9): Library not loaded: libpq.5.dylib
Referenced from: /Library/Ruby/Gems/1.8/gems/pg-0.13.2/lib/pg_ext.bundle
Reason: image not found - /Library/Ruby/Gems/1.8/gems/pg-0.13.2/lib/pg_ext.bundle 
```

是什么赋予了？

如何加载 libpq.5.dylib 库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T20:17:39.113

我在 Mac 上。这是我为使其正常工作所做的工作。

```
cd /Library/Ruby/Gems/1.8/gems/pg-0.13.2/lib/
otool -L pg_ext.bundle

libpq.5.dylib (compatibility version 5.0.0, current version 5.4.0) 
```

请注意，libpq.5.dylib 不像 pg_ext.bundle 中的其他库那样使用绝对路径。系统找不到。您需要更改它查找 libpq.5.dylib 的位置。

```
install_name_tool -change libpq.5.dylib /Library/PostgreSQL/9.1/lib/libpq.5.dylib pg_ext.bundle 
```

注意：使用适用于您的系统的绝对路径。我使用了我的系统。

现在运行：

```
otool -L pg_ext.bundle 
```

注意 libpq.5.dylib 现在指向的内容：

```
/Library/PostgreSQL/9.1/lib/libpq.5.dylib (compatibility version 5.0.0, current version 5.4.0) 
```

pg gem 现在应该很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T20:56:26.267

从[这里](https://bitbucket.org/ged/ruby-pg/issue/32/installation-problems-on-mac-os-x-snow)的讨论看来，针对*32 位 Postgresql编译**64 位 Ruby*的 pg是问题的根源。所以解决它的唯一方法是安装 64 位 Postgresql 然后重新安装.*`pg`*

 *[这篇文章](https://bitbucket.org/ged/ruby-pg/issue/32/installation-problems-on-mac-os-x-snow#comment-194269)详细解释了这个问题。*

# javascript - jquery JSON 从查询字符串中删除分隔符

> ID：11171335
> 
> 赞同：1
> 
> 时间：2012-06-23T16:56:32.820
> 
> 标签：javascript, jquery, json

我正在尝试使用[Jquery UI Autocomplete来使用](http://jqueryui.com/demos/autocomplete/#remote-jsonp)[同义词 API](http://words.bighugelabs.com/api.php)检索任何单词的同义词。

我需要发出以下 json GET 请求来访问 API

```
http://words.bighugelabs.com/api/{version}/{api key}/{word}/{format} 
```

然而，Jquery 生成以下返回`404 Not Found`

```
http://words.bighugelabs.com/api/?v=2&key=mykey&word=some-word&format=json 
```

是否可以轻松去除分隔符？

**脚本**

```
$(function() {
        function log( message ) {
            $( "<div/>" ).text( message ).prependTo( "#log" );
            $( "#log" ).scrollTop( 0 );
        }

        $( "#thesaurus" ).autocomplete({
            source: function( request, response ) {
                $.ajax({
                    url: "http://words.bighugelabs.com/api/",
                    dataType: "json",
                    data: {
                        v: "2",
                        key: "mykey", //actually numbers
                        word: request.term,
                        format: "json"
                        //maxRows: 12,
                        //name_startsWith: request.term
                    },
                    success: function( data ) {
                        response( $.map( data.geonames, function( item ) {
                            return {
                                label: item.name + (item.noun ? ", " + item.noun : "") + ", " + item.syn,
                                value: item.name
                            }
                        }));
                    }
                });
            },
            minLength: 2,
            select: function( event, ui ) {
                log( ui.item ?
                    "Selected: " + ui.item.label :
                    "Nothing selected, input was " + this.value);
            },
            open: function() {
                $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
            },
            close: function() {
                $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
            }
        });
    }); 
```

**HTML**

```
 <input id="thesaurus" />

</div>

<div class="ui-widget" style="margin-top:2em; font-family:Arial">
    Result:
    <div id="log" style="height: 200px; width: 300px; overflow: auto;" class="ui-widget-content"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T17:03:28.790

函数的 data 参数的全部意义`$.ajax()`在于创建一个查询字符串（POST 和 GET 都使用查询字符串，它们只是作为请求有效负载的不同部分发送）。您只想使用简单的字符串连接来构建您的 URL。

```
$.ajax({
    url: "http://words.bighugelabs.com/api/2/mykey/" + request.term + "/json",
    dataType: "json",
    success: function( data ) {
        response( $.map( data.geonames, function( item ) {
            return {
                label: item.name + (item.noun ? ", " + item.noun : "") + ", " + item.syn,
                value: item.name
            }
        }));
    }
}); 
```

您有静态版本、api 密钥和格式参数，但如果它们是动态的，则 url 看起来像：

```
"http://words.bighugelabs.com/api/" + version + "/" + api_key + "/" + request.term + "/" + format 
```

为了让你的代码更简洁，你甚至可以做到：

```
"http://words.bighugelabs.com/api/" + [version,api_key,request.term,format].join("/") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T17:02:35.497

将数据移动到 url：

```
 $( "#thesaurus" ).autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "http://words.bighugelabs.com/api/2/" + "mykey/" + request.term + "/json",
                ....
            });
        }, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T17:06:43.083

你可以使用

```
url:"http://words.bighugelabs.com/api/"
           +"2/"+encodeURIComponent(mykey)+"/"
           +encodeURIComponent(request.term)+"/json"), 
```

并删除该`data`选项。

# android - 获取 javax.net.ssl.SSLException：Android 中不受信任的服务器证书

> ID：11171336
> 
> 赞同：0
> 
> 时间：2012-06-23T16:56:44.653
> 
> 标签：android, exception, https, ssl-certificate

我正在使用以下代码对 http 链接进行 SOAP 请求

```
private String SOAPServiceCall(String url, String envelopeString) {

    final DefaultHttpClient httpClient = new DefaultHttpClient();
    // request parameters
    HttpParams params = httpClient.getParams();
    HttpConnectionParams.setConnectionTimeout(params, 50000);
    HttpConnectionParams.setSoTimeout(params, 55000);
    // set parameter
    HttpProtocolParams.setUseExpectContinue(httpClient.getParams(), true);

    // POST the envelope
    HttpPost httppost = new HttpPost(url);
    // add headers
    // httppost.setHeader("soapaction", soapAction);
    httppost.setHeader("Content-Type", "text/xml; charset=utf-8");

    String responseString = "";
    try {

        HttpEntity entity = new StringEntity(envelopeString);
        httppost.setEntity(entity);

        // Response handler
        ResponseHandler<String> rh = new ResponseHandler<String>() {
            // invoked when client receives response
            public String handleResponse(HttpResponse response)
                    throws ClientProtocolException, IOException {

                // get response entity
                HttpEntity entity = response.getEntity();

                // read the response as byte array
                StringBuffer out = new StringBuffer();
                byte[] b = EntityUtils.toByteArray(entity);

                // write the response byte array to a string buffer
                out.append(new String(b, 0, b.length));
                return out.toString();
            }
        };

        responseString = httpClient.execute(httppost, rh);

    } catch (Exception e) {
        e.printStackTrace();
    }

    // close the connection
    httpClient.getConnectionManager().shutdown();

    return responseString;

} 
```

一切正常。但是现在我的客户端已经从http变成了https，所以我使用了以下代码：

```
private String SOAPServiceCall(String url, String envelopeString) {

    StringBuffer buffer = null;
    try {
        URL address=new URL(url);
        URLConnection connection=address.openConnection();
        HttpsURLConnection post=(HttpsURLConnection)connection;
        post.setDoInput(true);
        post.setDoOutput(true);
        post.setRequestMethod("POST");
        //post.setRequestProperty("SOAPAction", soapAction);
        post.setRequestProperty( "Content-type", "text/xml; charset=utf-8" );
        post.setRequestProperty( "Content-Length", String.valueOf(envelopeString.length()));
        post.setReadTimeout(4000);

        OutputStream outStream=post.getOutputStream();
        Writer out=new OutputStreamWriter(outStream);
        out.write(envelopeString);
        out.flush();
        out.close();

        InputStream inStream = post.getInputStream();
        BufferedInputStream in = new BufferedInputStream(inStream,4);
        buffer = new StringBuffer();
        // read 4 bytes a time
        byte[] buffArray=new byte[4];
        int c=0;
            while((c=in.read(buffArray))!=-1){
                for(int i=0;i<c;i++)
                    buffer.append((char)buffArray[i]);
            }

    return buffer.toString();
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (ProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    return null;
} 
```

我正在使用[此链接](http://mobileorchard.com/android-app-development-calling-web-services/)中的此代码。

现在我得到：

```
06-23 17:30:26.879: W/System.err(2168): javax.net.ssl.SSLException: Not trusted server certificate
06-23 17:30:26.889: W/System.err(2168):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:371)
06-23 17:30:26.889: W/System.err(2168):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.getSecureSocket(HttpConnection.java:168)
06-23 17:30:26.899: W/System.err(2168):     at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:399)
06-23 17:30:26.899: W/System.err(2168):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.sendRequest(HttpURLConnectionImpl.java:1325)
06-23 17:30:26.909: W/System.err(2168):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.doRequestInternal(HttpURLConnectionImpl.java:1656)
06-23 17:30:26.909: W/System.err(2168):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.doRequest(HttpURLConnectionImpl.java:1649)
06-23 17:30:26.909: W/System.err(2168):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:1248)
06-23 17:30:26.919: W/System.err(2168):     at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:263)
06-23 17:30:26.919: W/System.err(2168):     at org.apis.SOAPRequest.SOAPServiceCall(SOAPRequest.java:184)
06-23 17:30:26.929: W/System.err(2168):     at org.apis.SOAPRequest.retrieveSessionId(SOAPRequest.java:125)
06-23 17:30:26.929: W/System.err(2168):     at org.activity.LoginPage$FetchSessionIDTask.doInBackground(LoginPage.java:76)
06-23 17:30:26.929: W/System.err(2168):     at org.activity.LoginPage$FetchSessionIDTask.doInBackground(LoginPage.java:1)
06-23 17:30:26.929: W/System.err(2168):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
06-23 17:30:26.929: W/System.err(2168):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
06-23 17:30:26.929: W/System.err(2168):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
06-23 17:30:26.929: W/System.err(2168):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
06-23 17:30:26.929: W/System.err(2168):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
06-23 17:30:26.939: W/System.err(2168):     at java.lang.Thread.run(Thread.java:1102)
06-23 17:30:26.939: W/System.err(2168): Caused by: java.security.cert.CertificateException: java.security.cert.CertPathValidatorException: TrustAnchor for CertPath not found.
06-23 17:30:26.939: W/System.err(2168):     at org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.checkServerTrusted(TrustManagerImpl.java:168)
06-23 17:30:26.939: W/System.err(2168):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:366)
06-23 17:30:26.939: W/System.err(2168):     ... 17 more
06-23 17:30:26.939: W/System.err(2168): Caused by: java.security.cert.CertPathValidatorException: TrustAnchor for CertPath not found.
06-23 17:30:26.949: W/System.err(2168):     at org.bouncycastle.jce.provider.PKIXCertPathValidatorSpi.engineValidate(PKIXCertPathValidatorSpi.java:149)
06-23 17:30:26.949: W/System.err(2168):     at java.security.cert.CertPathValidator.validate(CertPathValidator.java:202)
06-23 17:30:26.949: W/System.err(2168):     at org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.checkServerTrusted(TrustManagerImpl.java:164)
06-23 17:30:26.949: W/System.err(2168):     ... 18 more 
```

所以我用谷歌搜索并找到了这些链接：

[链接 1](https://stackoverflow.com/questions/5491216/android-ssl-error-certificate-not-trusted-sometimes)
[链接 2](http://blog.antoine.li/2010/10/22/android-trusting-ssl-certificates/)
[链接 3](https://stackoverflow.com/questions/9131879/android-https-error-not-trusted-server-certificate)
[链接 4](https://stackoverflow.com/questions/10296647/android-exceptionnot-trusted-server-certificate-https-xml-request-with-serve)
[链接 5](https://stackoverflow.com/questions/2642777/trusting-all-certificates-using-httpclient-over-https)
[链接 6](https://stackoverflow.com/questions/5270645/not-a-trusted-server-certificate-anybody-take-on-this-please)
[链接 7](http://www.codeproject.com/Articles/186599/SSL-Verification-for-Android-Applications)（好一个.. 但不适合初学者）
[链接 8](https://stackoverflow.com/questions/2012497/accepting-a-certificate-for-https-on-android)
[链接 9](https://stackoverflow.com/questions/2642777/trusting-all-certificates-using-httpclient-over-https)
[链接 10](http://blog.crazybob.org/2010/02/android-trusting-ssl-certificates.html)

以及更多。

但我无法解决这个问题；我现在对此感到非常困惑，我不知道从哪里开始，哪种方法是正确的。

我没有尝试按键方法，因为它需要一些证书，我不知道它是什么。我从异常中发现它正在寻找一些受信任的证书

我应该从哪里开始，采取什么方法，该证书是什么，我将如何下载它等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T20:46:38.677

让我知道这是否适合你。在你的 SOAPServiceCall() 方法中添加这个，

```
trustAllHosts();
 HttpsURLConnection post = (HttpsURLConnection) url.openConnection();
 https.setHostnameVerifier(DO_NOT_VERIFY);

and add these methods,
// always verify the host - dont check for certificate
final static HostnameVerifier DO_NOT_VERIFY = new HostnameVerifier() {
        public boolean verify(String hostname, SSLSession session) {
                return true;
        }
};

/**
 * Trust every server - dont check for any certificate
 */
private static void trustAllHosts() {
        // Create a trust manager that does not validate certificate chains
        TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {
                public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                        return new java.security.cert.X509Certificate[] {};
                }

                public void checkClientTrusted(X509Certificate[] chain,
                                String authType) throws CertificateException {
                }

                public void checkServerTrusted(X509Certificate[] chain,
                                String authType) throws CertificateException {
                }
        } };

        // Install the all-trusting trust manager
        try {
                SSLContext sc = SSLContext.getInstance("TLS");
                sc.init(null, trustAllCerts, new java.security.SecureRandom());
                HttpsURLConnection
                                .setDefaultSSLSocketFactory(sc.getSocketFactory());
        } catch (Exception e) {
                e.printStackTrace();
        }
} 
```

参考：http://stackoverflow.com/questions/995514/https-connection-android#1000205

# c# - 文件夹文件结构中的asp.net c#中的图像库

> ID：11171337
> 
> 赞同：0
> 
> 时间：2012-06-23T16:56:45.377
> 
> 标签：c#, asp.net, image, image-gallery

各位程序员好。我正在开发一个有图片库的网站。例如，如果有一个事件并且与该事件有关，有十张照片，我希望用户能够在服务器中创建一个代表该事件的目录（相册），并将这十张图像与相册封面一起存储在该文件夹中。我实际上并没有将图像存储到数据库中，而只是将它们的路径。假设如果我有文件夹图像，我希望该用户可以创建一个成为图像子文件夹的相册并将图像上传到该文件夹​​中。此外，我希望能够检索其中的那些相册和照片。这是我第一次尝试它，所以我不太清楚如何进行。我只期望我需要执行的步骤来实现它。我将开发代码。Facebook画廊可以被认为是相册照片风格的例子。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T17:03:59.370

有两种方法可以做到这一点：使用或不使用数据库。

使用数据库，您可以将图像文件存储在数据库本身中（出于性能原因，通常不建议这样做），并将所有元数据（包括父专辑信息）存储在数据库中。如果您不想将图像存储在数据库中，则可以将它们存储在平面目录中（每个文件的文件名与其数据库记录的主键相同，因此不会发生冲突）。

如果没有数据库，那么每个文件系统目录都相当于一张专辑，尽管您可以存储的元数据是有限的（实际上只是文件名）。您可以尝试公开（并可能编辑）任何嵌入的 EXIF 数据，但您可能会遇到问题。

您在问题中提供的解决方案实际上提供了这两个选项的缺点：您正在使用数据库，但您也想在文件系统中按专辑对图像进行分组？这样做没有任何好处（而且它也使得无法将图像交叉引用到多个相册中）。

# html - 向下滚动时淡出的 Div 阴影

> ID：11171343
> 
> 赞同：1
> 
> 时间：2012-06-23T16:57:39.017
> 
> 标签：html, css, dropshadow

我正在寻找一种方法，让我的主要内容 div 有一个阴影，当您向下滚动页面时会逐渐消失。完美的例子是在[http://www.gamespot.com/](http://www.gamespot.com/)注意他们的主要内容有一个阴影，使它流行，然后慢慢消失，使网站看起来很平淡。这个效果是如何实现的？谢谢！

截屏： ![在此处输入图像描述](../Images/b8a3d49bb9478e896c975b81710c507e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:14:31.610

正如上面在评论中简要提到的，一种解决方案是使用渐变阴影，如下所示：

[http://jsfiddle.net/3eDpM/](http://jsfiddle.net/3eDpM/)

另一种解决方案（更静态的）是在背景中使用一个小图像，例如在 Photoshop 中生成的 2 像素 x 40 像素的渐变。然后，让该图像在所需 div 的背景中水平重复，同时将其定位在左上角。如：

```
width: 2px;
height: 40px;
background-position: left top;
background-image: url('../img/gradient.png');
background-repeat: repeat-x; 
```

# iphone - 来自 CCSPrite 中文件的奇怪 CGImage

> ID：11171344
> 
> 赞同：0
> 
> 时间：2012-06-23T16:57:58.777
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我正在尝试从磁盘上的图像创建 CCSprite。该文件绝对是有效的图像，我想在 CCLayer 上显示它。我正在使用此代码来显示图像：

```
 // from a CCLayerColor
    CGDataProviderRef imgDataProvider = CGDataProviderCreateWithFilename(@"/documents/pathto/file.jpg");
    CGImageRef image = CGImageCreateWithJPEGDataProvider(imgDataProvider, NULL, NO, kCGRenderingIntentDefault);
    self.sprite = [CCSprite spriteWithCGImage:image key:@"sprite_frame_01"];
    self.sprite.anchorPoint = ccp(0,0);
    [self setContentSize:CGSizeMake(100, 100)];
    [self addChild:self.sprite]; 
```

但是，当渲染场景时，我看到了这一点（CCSprite 是周围带有白色背景的数字）：

![越野车 CCSprite](../Images/da9e50f9355315707249367cd69f8c91.png)

无论使用什么图像，都会发生这种情况。还有什么我需要做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:09:17.107

问题是 cocos2d 会自动附加`-ipad`到图像文件名，因为它来自相机胶卷，所以它不存在。我使用 `[[CCFileUtils sharedFileUtils] setiPadSuffix:@""];`.

我的应用程序中没有任何特定的 iPad 或视网膜特定文件，但对于那些有的，abica 在[cocos2d 论坛](http://www.cocos2d-iphone.org/forum/topic/14253#post-81038)上写了一个很好的方法，它展示了如何在每个文件的基础上处理这个问题。

# facebook - 如何过滤facebook好友列表？

> ID：11171345
> 
> 赞同：0
> 
> 时间：2012-06-23T16:58:39.230
> 
> 标签：facebook, facebook-graph-api

我使用图形 api 并想获取我在 facebook 玩游戏的朋友的列表。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T20:52:06.600

这是不可能的，您能够发现的唯一应用程序/游戏连接是与您自己的应用程序/游戏（或您拥有的其他应用程序，基于您自己的数据）

在评论中给您的一些说明：

*请求对话框的“玩游戏的朋友”*部分描述了仅过滤正在使用**您的**应用程序的朋友的方法：

> 另一个有趣的过滤器是突出显示**与您的游戏**高度互动并且是当前用户的朋友的用户。

`games`connection of`user`并不是真正的用户玩游戏列表，而只是基于用户喜欢的数据：

> 用户添加到其个人资料的艺术和娱乐部分的游戏。

# java - 在java中使用mysql回滚事务

> ID：11171347
> 
> 赞同：2
> 
> 时间：2012-06-23T16:59:23.613
> 
> 标签：java, mysql, database, jdbc, rollback

我将数据插入三个表，即

```
Transaction
TransactionEntry
Payment 
```

首先我在**Transaction**中插入数据，然后获取**Transaction ID**，然后在**TransactionEntry**中插入数据，然后在**Payment中插入**

假设在前两个表中，数据插入成功。然后服务器崩溃。

我们如何回滚所有条目？我们可以通过编程方式控制它还是数据库具有默认功能来控制这种情况？

如何实现一致性和完整性？

在 java 中，哪个框架可以控制这种情况？

**MySQL** **Java EE**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T07:36:10.733

您需要在工作单元完成后禁用自动提交和提交（或在失败时回滚）。

这应该是这样的：

```
Connection con = ...; //set earlier
con.setAutoCommit(false);
...
try {
  //insert here
  ...
  con.commit();
} catch (Exception e) {
  con.rollback();
  // other exception handling
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T17:05:25.413

mysql以正常方式支持事务。开头打开事务，最后提交，如果中间发生了什么，则不会发布任何内容。

由于您使用的是 Java EE，因此您必须调查您的 java mysql 客户端是否建议内置语句。如果没有，请使用

```
SET AUTOCOMMIT=0;

... statements ...

COMMIT; 
```

# cassandra - 如何在 Cassandra 1.0.10 中执行 sstableloader 期间禁用将模式从实时集群迁移到加载程序？

> ID：11171349
> 
> 赞同：1
> 
> 时间：2012-06-23T16:59:51.067
> 
> 标签：cassandra

问题是 BulkLoader 在将数据加载到实时集群后开始迁移不存在的本地模式并抛出**java.lang.IllegalArgumentException: Unknown CF {ID}**

请参阅下面的系统日志输出：

```
DEBUG [main] 2012-06-23 18:40:50,743 StreamOutSession.java (line 204) Files are /tmp/data/Keyspace1/ColumnFamily1-hd-1-Data.db sections=1 progress=0/620 - 0%
DEBUG [Streaming:1] 2012-06-23 18:40:50,771 Throttle.java (line 65) Throttle(for=FileStreamTask(session=265847486776203, to=/192.168.0.102)) target throughput now 52428 bytes/ms.
DEBUG [Streaming:1] 2012-06-23 18:40:50,771 FileStreamTask.java (line 155) Bytes transferred 620/620
DEBUG [Streaming:1] 2012-06-23 18:40:50,779 FileStreamTask.java (line 106) Done streaming /tmp/data/Keyspace1/ColumnFamily1-hd-1-Data.db sections=1 progress=620/620 - 100%
DEBUG [Thread-4] 2012-06-23 18:40:50,915 Gossiper.java (line 216) Setting version 3 for /192.168.0.102
DEBUG [Thread-4] 2012-06-23 18:40:50,915 IncomingTcpConnection.java (line 104) set version for /192.168.0.102 to 3
DEBUG [MiscStage:1] 2012-06-23 18:40:50,915 StreamReplyVerbHandler.java (line 47) Received StreamReply StreamReply(sessionId=265847486776203, file='/tmp/data/Keyspace1/ColumnFamily1-hd-1-Data.db', action=FILE_FINISHED)
DEBUG [MiscStage:1] 2012-06-23 18:40:50,919 StreamReplyVerbHandler.java (line 47) Received StreamReply StreamReply(sessionId=265847486776203, file='', action=SESSION_FINISHED)
 INFO [MiscStage:1] 2012-06-23 18:40:50,919 MessagingService.java (line 483) Waiting for messaging service to quiesce
 INFO [ACCEPT-/192.168.0.101] 2012-06-23 18:40:50,919 MessagingService.java (line 639) MessagingService shutting down server thread.
DEBUG [MigrationStage:1] 2012-06-23 18:40:51,191 DefinitionsUpdateVerbHandler.java (line 70) Applying AddKeyspace from /192.168.0.102 
```

然后它加载列族元数据，最后

```
DEBUG [MigrationStage:1] 2012-06-23 18:40:51,615 MigrationManager.java (line 157) Gossiping my schema version bbad3230-a8c1-11e1-0000-56b6291774f9
DEBUG [MigrationStage:1] 2012-06-23 18:40:51,619 DefinitionsUpdateVerbHandler.java (line 70) Applying DropKeyspace from /192.168.0.102
DEBUG [GossipTasks:1] 2012-06-23 18:40:51,711 DebuggableThreadPoolExecutor.java (line 136) Task cancelled
java.util.concurrent.CancellationException
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:250)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.cassandra.concurrent.DebuggableThreadPoolExecutor.logExceptionsAfterExecute(DebuggableThreadPoolExecutor.java:128)
    at org.apache.cassandra.concurrent.DebuggableScheduledThreadPoolExecutor.afterExecute(DebuggableScheduledThreadPoolExecutor.java:47)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1118)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:636)
ERROR [MigrationStage:1] 2012-06-23 18:40:51,711 DebuggableThreadPoolExecutor.java (line 141) Error in ThreadPoolExecutor
java.lang.IllegalArgumentException: Unknown CF 1020
    at org.apache.cassandra.db.Table.getColumnFamilyStore(Table.java:167)
    at org.apache.cassandra.db.Table.getColumnFamilyStore(Table.java:160)
    at org.apache.cassandra.db.migration.DropKeyspace.applyModels(DropKeyspace.java:59)
    at org.apache.cassandra.db.migration.Migration.apply(Migration.java:156)
    at org.apache.cassandra.db.DefinitionsUpdateVerbHandler$1.runMayThrow(DefinitionsUpdateVerbHandler.java:73)
    at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:30)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:636)
DEBUG [MigrationStage:1] 2012-06-23 18:40:51,715 DefinitionsUpdateVerbHandler.java (line 70) Applying AddKeyspace from /192.168.0.102
DEBUG [MigrationStage:1] 2012-06-23 18:40:51,715 DefinitionsUpdateVerbHandler.java (line 80) Migration not applied Previous version mismatch. cannot apply. 
```

是否有可能以某种方式禁用此迁移？

# php - 将链接 url 替换为 # serverside

> ID：11171352
> 
> 赞同：0
> 
> 时间：2012-06-23T17:00:26.437
> 
> 标签：php

我希望用数字符号 (#) 替换某些 HTML 中的所有链接 url。

以下基本上是有效的，但是令我沮丧的是，它在修改后的 HTML 周围插入了`<!DOCTYPE>`、`<html>`和标记。`<body>`是否可以防止插入这些标签？有一个更好的方法吗？

谢谢

```
$html_with_urls = '<p>hello.  Here is a <a href="http://somesite.com">link</a>.  Goodby</p>';
libxml_use_internal_errors(true); //Temorarily disable errors resulting from improperly formed HTML
$doc = new DOMDocument();
$doc->loadHTML($html_with_urls);
$a = $doc->getElementsByTagName('a');
foreach ($a as $link) {
    if ($link->hasAttribute('href')) {
        $link->setAttribute('href', '#');
    }
}
$html_without_urls = $doc->saveHTML();
libxml_use_internal_errors(false);
echo($html_with_urls . '<br />' . $html_without_urls); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T17:29:13.160

在我看来，`DOMDocument`班级没有办法阻止它添加那些额外的东西。它返回一个完整且有效的 HTML。

对于您的特定情况，您可以自己从文档中删除这些内容： *[从代码中您可以判断它何时不起作用:)]*

```
$html_without_urls = str_replace(array('<html>', '</html>', '<body>', '</body>'), array('', '', '', ''), $html_without_urls);
$html_without_urls = preg_replace('/^<!DOCTYPE.+?>/i', '', $html_without_urls);
echo $html_without_urls; 
```

* * *

或者，如果您可以使用一些 3rd 方库，您可以使用[SmartDOMDocumet](http://beerpla.net/projects/smartdomdocument-a-smarter-php-domdocument-class/)。只需调用该函数`saveHTMLExact()`即可。

# mysql - 如果一对匹配，则更新单元格值

> ID：11171354
> 
> 赞同：1
> 
> 时间：2012-06-23T17:00:40.960
> 
> 标签：mysql, lua, duplicates, luasql, lua-5.2

我正在使用 luasql。我有两个这种类型的表：

## IPINFO

```
CREATE TABLE `ipstats` (
  `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `ip` VARCHAR(15) NOT NULL,
  `last_used` DATETIME NOT NULL DEFAULT '1981-09-30 00:00:00',
  PRIMARY KEY (`id`),
  UNIQUE INDEX `ip` (`ip`)
)
COLLATE='utf8_general_ci'
ENGINE=MyISAM
ROW_FORMAT=DEFAULT 
```

和另一个表 ipnstats：

```
CREATE TABLE `ipnstats` (
  `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `ipstats_id` INT(10) UNSIGNED NOT NULL,
  `nick` VARCHAR(32) NOT NULL,
  `used_times` INT(10) UNSIGNED NOT NULL,
  `last_used` DATETIME NOT NULL DEFAULT '1981-09-30 00:00:00',
  PRIMARY KEY (`id`),
  INDEX `ipstats_id` (`ipstats_id`),
  INDEX `nick` (`nick`)
)
COLLATE='utf8_general_ci'
ENGINE=MyISAM
ROW_FORMAT=DEFAULT 
```

现在，我在这里想要实现的是，在我的`ipnstats`表中， IFF 的值`used_times`将被更新**（当且仅当）**表中的索引（`nickname`和`ipstats_id`）都匹配。我的插入/更新命令是这样的：

```
INSERT INTO `ipstats_nicks` (`ipstats_id`, `nick`, `last_used`) 
  VALUES ( %d, '%s', '%s' ) 
  ON DUPLICATE KEY 
  UPDATE `last_used` = '%s', `used_times` = `used_times`+1 
```

然后我使用变量格式化这个字符串。但这并没有给我表格中所需的更新。它只是继续将数据插入表中。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:03:13.287

有两个问题：

1.  `ON DUPLICATE KEY UPDATE`仅适用于**UNIQUE**索引。您的索引不是唯一的。
2.  如果任何单个索引产生冲突，它将执行更新。没有办法告诉它只在两个索引有冲突时才执行更新。

也许您真正想要的是一个唯一的多列索引？

```
UNIQUE INDEX `ipstats_id_nick` (`ipstats_id`, `nick`) 
```

# matlab - 如何在 MATLAB 和 Visual C++ 窗口窗体之间进行通信？

> ID：11171358
> 
> 赞同：0
> 
> 时间：2012-06-23T17:01:14.147
> 
> 标签：matlab, visual-c++, c++-cli, matlab-deployment

首先，我是 Visual C++ 的新手。我有一个简单的窗体 Visual C++ 程序，它在窗体上显示圆圈。我有一个 MATLAB 程序，它将确定圆圈的位置，并且圆圈的数量应该在窗口形式上。我的问题是如何让他们互相交谈？

我可以使用dll吗？但是，是否可以将窗口形式制作为 dll？即使我有一个窗体 dll，我如何将数据从 MATLAB 发送到窗体？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:56:08.223

您可以使用[MATLAB Builder NE](http://www.mathworks.com/products/netbuilder/)将您的 MATLAB 程序编译成 .NET 程序集

# c# - WPF 中与 WinForm BindingNavigator 工具等效的工具

> ID：11171359
> 
> 赞同：0
> 
> 时间：2012-06-23T17:01:16.137
> 
> 标签：c#, wpf, winforms, visual-studio-2010

在 WinForm 中，我使用了工具箱外的 BindingNavigator。

我正在将应用程序移动到 WPF。工具箱或扩展 WPF 工具包中没有 BindingNavigator。

WPF 非常简单，有几个文本框显示来自数据中几个字段的信息，但我想要一种一次滚动浏览记录的方法。

BindingNavigator 的 WPF 替代方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T09:33:55.863

比开箱即用的 WinFrom BindingNavigator 更复杂，但可能更强大。

Christian Nagel 的博客有以下两篇文章：

1.  [WPF 的 BindingNavigator（第 1 部分 - 创建）](http://weblogs.thinktecture.com/cnagel/2010/08/bindingnavigator-for-wpf-part-1---creating.html)

2.  [WPF 的 BindingNavigator（第 2 部分——使用）](http://weblogs.thinktecture.com/cnagel/2010/08/bindingnavigator-for-wpf-part-2using.html)

# android - 从服务器下载当前位置

> ID：11171362
> 
> 赞同：0
> 
> 时间：2012-06-23T17:01:57.390
> 
> 标签：android, gps

我正在制作一个 GPS 应用程序。我当前的位置不断被上传到服务器。我需要从任何 android 设备从服务器检索最新位置。但是，服务器也包含以前的位置。

我可以将我的位置发送到服务器，但我在接收当前位置时遇到问题。

我按以下顺序进行

1.  获取我当前的位置。
2.  将我当前的位置发送到服务器。
3.  从任何 android 设备从服务器接收当前位置。

我陷入了第三部分。

# android - 以椭圆旋转图像

> ID：11171368
> 
> 赞同：0
> 
> 时间：2012-06-23T17:02:36.470
> 
> 标签：android, rotation

如何使用android动画类旋转椭圆中的一组图像。我使用了旋转动画类，但它是以圆形格式旋转图像。有任何方法可以实现椭圆中图像的旋转。

# javascript - window.history.pushState 到 localhost/MySite

> ID：11171373
> 
> 赞同：0
> 
> 时间：2012-06-23T17:03:24.593
> 
> 标签：javascript, html

我使用 pushState 更改为 URL 以在单击我网站中的图像时操纵浏览器地址栏。

在开发环境中工作时如何将其更改回主页。例如：我的地址栏有这个网址： 点击图片后的**http://localhost/MySite我将地址栏更改为：** **http://localhost/MySite/pic/123** 和 window.history.pushState。

问题是 - 在开发环境中，我无法使用

```
window.history.pushState(obj, title , '/'); 
```

因为斜杠 ('/') 将我带到**http://localhost/**。

我尝试了“../”，但它仍然不起作用，window.history.back() 也不起作用。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:00:55.283

使用 location.pathname 和正则表达式或其他东西来获取基本路径

```
var viewingImagePattern = /\/pic\/\d+$/;
var rootPath = location.pathname.replace(viewingImagePattern, "/");
window.history.pushState(obj, title , rootPath); 
```

# ios - 如何减少 iOS AVPlayer 启动延迟

> ID：11171374
> 
> 赞同：126
> 
> 时间：2012-06-23T17:03:28.560
> 
> 标签：ios, delay, avplayer

请注意，对于以下问题：所有资产在设备上都是本地的——没有发生网络流式传输。视频包含音轨。

我正在开发一个 iOS 应用程序，该应用程序需要以最小延迟播放视频文件才能启动相关视频剪辑。不幸的是，在我们真正需要启动它之前，我们不知道接下来是什么特定的视频剪辑。具体来说：当播放一个视频剪辑时，我们将知道下一组（大约）10 个视频剪辑是什么，但我们不知道具体是哪一个，直到“立即”播放下一个剪辑。

我查看实际开始延迟所做的是调用`addBoundaryTimeObserverForTimes`视频播放器，以一毫秒的时间段查看视频实际开始播放的时间，我将时间戳与第一个位置的差异指示要开始播放哪个资产的代码。

从到目前为止我所看到的情况来看，我发现使用`AVAsset`加载的组合，然后在它准备好后从中创建一个`AVPlayerItem`，然后在我调用播放之前等待`AVPlayerStatusReadyToPlay`，往往需要 1 到 3 秒来启动夹子。

从那以后，我转向了我认为大致相同的方式：打电话`[AVPlayerItem playerItemWithURL:]`和等待`AVPlayerItemStatusReadyToPlay`比赛。性能大致相同。

我观察到的一件事是第一个 AVPlayer 项目加载比其他项目慢。似乎一个想法是在尝试播放第一个视频之前使用短/空资产预飞行 AVPlayer 可能是一个很好的一般做法。[[第一次播放声音时 AVAudioPlayer 启动缓慢](https://stackoverflow.com/questions/900461/slow-start-for-avaudioplayer-the-first-time-a-sound-is-played])

我很想尽可能缩短视频的开始时间，并有一些可以尝试的想法，但希望任何可以提供帮助的人提供一些指导。

**更新：下面的想法 7 实现的切换时间约为 500 毫秒。这是一个改进，但如果能更快地实现这一点会很好。**

**想法1：使用N个AVPlayers（不起作用）**

使用〜10个`AVPPlayer`对象并开始和暂停所有〜10个剪辑，一旦我们知道我们真正需要哪个，切换到并取消暂停正确的`AVPlayer`，然后重新开始下一个周期。

我认为这行不通，因为我读过`AVPlayer's`iOS 中大约有 4 个活动的限制。有人在 StackOverflow 上询问这个问题，发现了 4 AVPlayer 限制：[fast-switching-between-videos-using-avfoundation](https://stackoverflow.com/questions/7406300/fast-switching-between-videos-using-avfoundation)

**想法 2：使用 AVQueuePlayer（不起作用）**

我不相信将 10 推`AVPlayerItems`入一个`AVQueuePlayer`会预先加载它们以实现无缝启动。 `AVQueuePlayer`是一个队列，我认为它实际上只会使队列中的下一个视频准备好立即播放。我不知道我们想要播放大约 10 个视频中的哪一个，直到该开始播放那个了。[ios-avplayer-视频预加载](https://stackoverflow.com/questions/8354210/ios-avplayer-video-preloading)

**想法 3：在后台加载、播放和保留`AVPlayerItems`（还不是 100% 确定——但看起来不太好）**

我正在研究在后台加载和播放每个视频剪辑的第一秒是否有任何好处（抑制视频和音频输出），并保持对每个的引用`AVPlayerItem`，以及当我们知道需要播放哪个项目时真实的，交换那个，并将背景 AVPlayer 与活动的交换。冲洗并重复。

理论上，最近播放`AVPlayer/AVPlayerItem`的 's 可能仍保留一些准备好的资源，这将使后续播放更快。到目前为止，我还没有看到这样做的好处，但我可能没有`AVPlayerLayer`正确设置背景。我怀疑这真的会改善我所看到的情况。

**想法 4：使用不同的文件格式——也许加载速度更快？**

我目前正在使用 .m4v 的 (video-MPEG4) H.264 格式。H.264 有很多不同的编解码器选项，因此某些选项可能比其他选项搜索得更快。我发现使用更高级的设置使文件更小会增加查找时间，但没有找到任何相反的选项。

**思路五：无损视频格式+AVQueuePlayer的组合**

如果有一种视频格式可以快速加载，但文件大小可能很疯狂，一个想法可能是预先准备每个视频剪辑的前 10 秒，使用一个臃肿但加载速度更快但又回来的版本加上以 H.264 编码的资产。使用 AVQueuePlayer，并以未压缩文件格式添加前 10 秒，然后使用 H.264 格式的文件，其准备/预加载时间长达 10 秒。所以我会得到两全其美的“最好的”：快速启动时间，但也受益于更紧凑的格式。

**想法 6：使用非标准的 AVPlayer / 自己编写 / 使用别人的**

鉴于我的需要，也许我不能使用 AVPlayer，但必须求助于 AVAssetReader，并在前几秒钟解码（可能将原始文件写入磁盘），并且在播放时，使用原始格式播放它快回来。对我来说似乎是一个巨大的项目，如果我以一种天真的方式去做，那就不清楚/不太可能做得更好。每个解码和未压缩的视频帧为 2.25 MB。天真地说——如果我们以大约 30 fps 的速度播放视频，我最终会得到大约 60 MB/s 的磁盘读取要求，这可能是不可能的/推动它。显然，我们必须进行某种程度的图像压缩（也许是通过 PVRTC 的原生 openGL/es 压缩格式）......但这有点疯狂。也许那里有一个我可以使用的图书馆？

**想法 7：将所有内容组合成一个电影资产，并 seekToTime**

一个可能比上述一些更容易的想法是将所有内容组合成一个电影，并使用 seekToTime。问题是我们会到处乱跳。基本上是随机访问电影。我认为这实际上可以正常工作：[avplayer-movie-playing-lag-in-ios5](https://stackoverflow.com/questions/7882621/avplayer-movie-playing-lag-in-ios5)

您认为哪种方法最好？到目前为止，我在减少延迟方面没有取得太大进展。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-04-30T19:37:05.480

对于 iOS 10.x 及更高版本，以减少我设置的 AVPlayer 启动延迟： `avplayer.automaticallyWaitsToMinimizeStalling = false;` 这似乎为我解决了这个问题。这可能会产生其他后果，但我还没有达到这些后果。

我的想法来自： [https ://stackoverflow.com/a/50598525/9620547](https://stackoverflow.com/a/50598525/9620547)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:17:42.433

一旦您创建了资产，它可能还没有准备好，它可能会计算电影的持续时间，请确保在文件中包含电影的所有元数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-10T21:04:47.967

您应该首先尝试选项＃7，看看您是否可以使其正常工作。我怀疑它实际上无法满足您的需求，因为搜索时间可能不够快，无法让您在剪辑之间无缝切换。如果您尝试这样做但失败了，那么我建议您执行选项 4/6 并查看我专门为此目的设计的 iOS 库，只需在 AVAnimator 上进行快速谷歌搜索以了解更多信息。我的库可以实现无缝循环并从一个剪辑切换到另一个剪辑，它非常快，因为必须事先将视频解码为文件。在您的情况下，所有 10 个视频剪辑都会在您开始之前被解码为文件，但是在它们之间切换会很快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T19:44:31.813

过去没有做过类似的事情，根据您的想法和经验，我会尝试 7 和 1 的组合：在 10 个后续视频的前几秒预加载一个 AVPlayer。然后，由于数据较少，跳过很可能会更快、更可靠。在播放所选片段时，您有足够的时间在后台为所选后续视频的其余部分准备 AVPlayer。开始完成后，切换到准备好的 AVPlayer。因此，总的来说，您在任何给定时间最多加载 2 个 AVPlayer。

当然不知道切换能不能流畅到不打扰播放。

（如果可以的话，会添加这个作为评论。）

最好的，彼得

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-20T13:31:15.453

如果我正确理解了您的问题，您似乎有一个连续的视频，您需要立即加载音轨。

如果是这种情况，我建议研究[BASS](http://un4seen.com)。BASS 是一个类似于 AVPlayer 的音频库，它让您（相对）轻松地访问 iOS 中 AudioUnits 框架的低级 API。对你来说意味着什么？这意味着通过一点点缓冲区操作（您甚至可能不需要它，取决于您想要的延迟有多小），您可以立即开始播放音乐。

然而，限制扩展到视频，正如我所说，它是一个**音频**库，因此任何视频操作仍然必须使用 AVPlayer 完成。但是，`-seekToTime:toleranfeBefore:toleranceAfter:`只要您预先设置所有必要的选项，您就应该能够在视频中实现快速搜索。

如果您要跨多个设备同步（您的应用程序可能会建议），只需发表评论，我很乐意编辑我的答案。

PS：BASS 乍一看可能会让人望而生畏，因为它是类似 C 的格式，但实际上它真的很容易使用。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-08-06T03:30:18.713

以下是 AVAsset 类提供的几个可能有帮助的属性和方法：

```
- (void)_pu_setCachedDuration:(id)arg1;
- (id)pu_cachedDuration; 
- (struct
 { 
   long long x1; 
   int x2;
   unsigned int x3; 
   long long x4; 
})pu_duration;
- (void)pu_loadDurationWithCompletionHandler:(id /* block */)arg1; 
```

# emacs - 无法绑定到 Meta 键？

> ID：11171378
> 
> 赞同：2
> 
> 时间：2012-06-23T17:03:44.513
> 
> 标签：emacs, elisp, emacs23

嗨，我最近在尝试将命令绑定到 Meta 键时遇到了一些奇怪的问题。这只是今天才开始发生，我真的很困惑。

在我的绑定列表中，我有诸如`(define-key map (kbd "M-f") 'forward-char)`Ctrl 和 Hyper 之类的定义，但由于某种原因，当我尝试使用 Meta 的组合进行绑定时，它就失败了。

例如，以下`(define-key map (kbd "C-M-f") 'forward-word)`显示一条错误消息。

`Warning (initialization): An error occurred while loading '/home/flood/.emacs.d/init.el': error: Key sequence C-M-f starts with non-prefix key To ensure normal operation, you should investigate and remove the cause of the error in your initialization file. Start Emacs with the '--debug-init' option to view a complete error backtrace.`

从 --debug-init 开始时，它不会显示任何有用的信息。有没有人有任何想法，这真的很令人沮丧！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T17:32:02.550

因此，在浪费了我一天的几个小时之后，我终于解决了这个问题。这似乎是 emacs 的一个错误，但目前我不打算做进一步的测试，也许以后。

我之前包含了一个命令，该命令使用的`C-[`组合导致它之后的任何命令都包含一个 Meta，要么被宣布为无效，`C-M`要么`H-M`被宣布为无效。我不得不四处移动命令，直到我发现错误会分别在之后或之前出现和消失。

如果有人正在研究 emacs 项目并希望对此进行研究，请尝试一下，如果您无法重现错误，我可能会转发一个对我来说有问题的示例。发布它的主要原因是为了帮助将来可能遇到同样挫折的其他人。

# sharepoint-2010 - Custom list template not showing up in Sharepoint Designer to create

> ID：11171380
> 
> 赞同：2
> 
> 时间：2012-06-23T17:04:03.267
> 
> 标签：sharepoint-2010, sharepoint-designer

I created a custom list on my main SP site and saved it as a custom list template.

When I go to a sub-site, using SP Designer, and click on "Lists and Libraries" and then go to the Ribbon to click "Sharepoint List" (In the "New" area), I expected to see my custom list but it was not there.

If I go to the sub-site through a browser and click on "Site Actions" > "More Options" to "Create" a list, the custom list shows up there. But that sort of defeats the point of using SPD to me.

And I'm thinking the answer that I should create a Site Template to import those custom lists in order to see them in designer is also counter intuitive.

Sorry if this is a real basic question (new to SP), but why won't my custom list show up as an option to create in SP Designer?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T03:29:40.353

Sorry Dude. SPD cannot show the existing custom lists in "new area". Hence you cannot see them on SPD Ribbon "Sharepoint List" (In the "New" area). SPD allows you to do lot of stuff which you cannot do using your SP site in the browser.

# matlab - 通过用不同的颜色来突出显示绘图的一部分

> ID：11171384
> 
> 赞同：1
> 
> 时间：2012-06-23T17:04:15.050
> 
> 标签：matlab, plot, highlight

给定一个图，例如下图所示的曲线，我想突出显示区间 150 <= x <= 200 中的曲线。我更喜欢简单地用红色而不是蓝色绘制这个区间。

有没有比将我的曲线分成 3 组/3 个连接曲线部分更好的方法来做到这一点？（3 个间隔，第一个为蓝色，第二个为红色，第三个为蓝色）。感谢您的任何提示！![曲线](../Images/18b672f0c0312feedcf5888369f8f147.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T21:51:06.197

一个简单的例子：

```
%# plot data
x = linspace(0,2*pi,75);
y = sin(x);
plot(x, y, 'b.')

%# higlight points of interest
idx = (4 <= x & x <= 6);
hold on, plot(x(idx), y(idx), 'r.')
hold off 
```

![截屏](../Images/fe0fdbe92c9ea10c8786187e64b8b48f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T19:28:30.297

正确的做法是为 n 个数据点提供一个 n*3 的颜色值矩阵。

```
C = zeros(size(x,2), 3);
C(x>=150 & x<=200,1) = 1; % red
C(x<150 | x>200,3) = 1; % blue
scatter(x, y, 25, C, 'd', 'filled'); 
```

# php - 如何从PHP中单词之间的字符串中删除空格

> ID：11171388
> 
> 赞同：0
> 
> 时间：2012-06-23T17:04:52.817
> 
> 标签：php, arrays, printing, echo

我想删除数组之间的空格，但我使用了不同的代码，如修剪，但它没有删除。我认为因为修剪是来自“”外部空间而不是单词本身之间。我正在使用 PHP。

这适用于 R，但类似：[如何从字符串中删除所有空格？](https://stackoverflow.com/questions/5992082/how-to-remove-all-whitespace-from-a-string-in-r)

我已将代码更改为：

```
<?php

function combinations($arr, $n)
{
    $res = array();

    foreach ($arr[$n] as $item)
    {
        if ($n==count($arr)-1)
            $res[]=$item;
        else
        {
            $combs = combinations($arr,$n+1);

            foreach ($combs as $comb)
            {
                $res[] = "$item $comb";
            }
        }
    }
    return $res;
}

$words = array(array(
'PY7AD022031',
'AD022031',
'CB5A09XQXU',
),array(
'HELLO', 
'3040',
'3022031',
'07W11',
'4170B',
'0682',
'35570401',
'103448',
), array(
'HELLO', 
'3040',
'3022031',
'07W11',
'4170B',
'0682',
'35570401',
'103448',
));

$combos = combinations($words,0);  

$comma_separated = implode("<br />", $combos);
print("<pre>".print_r($comma_separated,true)."</pre>");
//var_dump($combos);
?> 
```

它回响

```
PY7AD022031 HELLO HELLO
PY7AD022031 HELLO 3040
PY7AD022031 HELLO 3022031
PY7AD022031 HELLO 07W11
PY7AD022031 HELLO 4170B 
```

但我想要

```
PY7AD022031HELLOHELLO
PY7AD022031HELLO3040
PY7AD022031HELLO3022031
PY7AD022031HELLO07W11
PY7AD022031HELLO4170B 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T17:32:16.917

很简单，只要改变你的语法

```
$res[] = "$item $comb"; 
```

进入这个语法：

```
$res[] = "$item$comb"; 
```

删除 $res 中的空格。

你试过吗？

* * *

[http://nanamo3lyana.blogspot.com/](http://nanamo3lyana.blogspot.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:09:46.857

不要使用**print_r()**因为函数本身会添加空格，无论你在做什么......

只需遍历数组并打印所有元素。

```
foreach($words as $element) {

    if (is_array($element)) {
        foreach($element as $v) {
            echo trim($v);
        }
    }

    echo '<br />';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T17:17:56.987

我只使用 print_r 进行调试，试试这个

```
foreach($words as $element) 
{
    if(is_array($element))
    {
      echo implode($element) . "<br />";
    }
    else
    {
      echo $element . "<br />";
    }
} 
```

# java - 如何实现JDBC驱动和 源码的松耦合？

> ID：11171392
> 
> 赞同：0
> 
> 时间：2012-06-23T17:05:38.857
> 
> 标签：java, jdbc, loose-coupling

我不想让我的代码与一些 JDBC 驱动程序（例如 MySql）紧密耦合。我想制作通用代码，可以与许多数据库实现一起使用。而且我不太明白在使用 JDBC 时如何实现这个目标。

我认为要实现这一点，我只需要将驱动程序类名（和连接字符串）导出到`.properties`文件（例如`"com.mysql.jdbc.Driver"`），然后在代码中像这样使用它`Class.forName(PROPERTIES.getDriverName()).newInstance();`所以当我决定更改我的数据库时，我需要更改的只是 jdbc文件中的驱动程序名称`.properties`（例如 to `"COM.ibm.db2.jdbc.app.DB2Driver"`），连接字符串，并`.jar`在类路径中更改驱动程序的文件。

这样对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T17:30:39.510

松散耦合可以通过多种方式实现 -

A. 使用 Hibernate ，但这可能对您的需求过度杀伤并损害性能（如果您的应用程序主要执行写操作）

B. 使用 Spring-JDBC 或任何其他用作 JDBC 包装器的框架- 通常它们提供某种抽象

C。如果您的代码是 Java EE 代码，您可以使用 DataSources，并在您的 Java 应用程序服务器上配置它们 - 您将按名称查找数据源，并且您不会知道实现细节在

D 之后。您可以确保您在分层中构建应用程序 - 一个业务逻辑层，它使用一个数据访问层，它使用一些数据引擎（确保您的数据引擎类实现一个接口，以便您可以轻松更改实现）。

您的数据引擎类可以从配置（XML 文件的属性）中读取有关 jdbc 驱动程序的信息 - 例如，这基本上是 Hibernate 所做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T17:34:44.850

你答对了。外部化驱动程序类名称、数据库 URL、用户和密码，然后就可以了。无论如何，大多数“框架”都会这样做：Java EE 服务器允许在服务器中配置数据源，并使用 JNDI 访问它。Hibernate 在其配置文件中对此有条目，连接池通常使用 XML 或属性文件来保存它们的配置。

当然，如果您使用专有的 SQL 代码，您将无法如此轻松地从一个数据库切换到另一个，但这是另一个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T17:32:12.337

当然，这可能对你有用。不过，对于这个问题的未来读者，我会更完整一点：

但是您编写的许多查询可能是特定于数据库的，或者依赖于某些关键字才能有效。以一个常见的查询为例。您想列出数据库中的所有产品，但一次向用户显示 10 个：

MySQL：

```
select * from products LIMIT 0,10 
```

然后对于接下来的 10 行：

```
select * from products LIMIT 10,10 
```

等等

太棒了，因此用户可以将 MySQL 用于数据库。那么如果他们使用另一个免费且非常流行的数据库 postgres 怎么办？该查询不起作用：

```
SELECT * FROM product LIMIT 10 OFFSET 10 
```

所以你的代码不像你想象的那样可移植。

解决此问题的一种方法是为您计划执行的所有查询/访问创建自己的接口（接口查询，接口访问），然后根据数据库方言（MySQL，postgres）创建一个可以实例化的查询工厂等）并创建 MySQLQueryImpl 和 PostGresQueryImpl（均实现 Query 接口）。

不幸的是，您必须对某些数据库调用进行两次编码，或者将它们自己移到属性文件中。您还可以将查询因子设计为从属性文件中实例化（就像您最初想要的那样），并允许将来其他用户实现他们自己的查询，因此可扩展性就在那里，您不必自己做所有事情。

**或者...**

另一种选择，可能更优雅和防错（嗯......也许）是让别人为你做这件事。[Hibernate](http://www.hibernate.org/)是一个非常常用的工具，可以为您抽象出数据库读/写，并且可以根据需要配置为使用不同的数据库，只有它具有多年的经验和错误修复。这不是最容易学习的东西（对于复杂的查询和连接等），但对于基本模型和到数据库的映射，它将为您提供您想要的一切以及更多，包括非常轻松和懒惰地打开/关闭缓存的能力加载数据，这样您就不会引入数千条您不会使用的记录。创建和强化这样的系统需要很长时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T18:00:40.553

外部化连接字符串不会使您的应用程序能够处理不同的数据库。但这是你可以做的。

**使用数据源而不是连接**这使您能够使用 JNDI、连接池等多种不同的方式创建连接。

有关数据源的更多信息，直接来自 javax.sql.DataSource javadoc

> 用于连接到此 DataSource 对象所代表的物理数据源的工厂。作为 DriverManager 工具的替代方法，DataSource 对象是获取连接的首选方法。

**定义用于访问数据的**DAO 接口。**使您的应用程序代码依赖于接口。您可以为 DAO 接口提供特定于数据库的实现。当数据库发生变化时，为数据库创建新的实现。让 DAO 工厂根据数据库选择合适的 DAO 实例。**

 **Mybatis、Hibernate 等支持[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)范式的库会为您自动执行这些步骤。**

# android - 将数据库从服务器复制到 Android

> ID：11171396
> 
> 赞同：2
> 
> 时间：2012-06-23T17:06:58.303
> 
> 标签：android, database, copy

我的网站空间上有一个数据库。现在我想下载这个数据库并将其复制到我的 /databases 文件夹中。它复制了数据库的某些部分，但我无法访问它。使用“根资源管理器”显示“错误 - 打开数据库时发生错误。无法打开数据库文件”

```
private final static String DB_NAME = "werweisswasquiz";
private final static String DB_PATH = "data/data/my-package-name/databases/";

try {
        // Log.d(TAG, "downloading database");
        URL url = new URL("http://unnediger.bplaced.net/Files/mydbfile");
    URLConnection ucon = url.openConnection();
    InputStream is = ucon.getInputStream();
    BufferedInputStream bis = new BufferedInputStream(is);

    ByteArrayBuffer baf = new ByteArrayBuffer(1024);
    int current = 0;
    while ((current = bis.read()) != -1) {
        baf.append((byte) current);
    }

    /* Convert the Bytes read to a String. */
    OutputStream myOutput = new FileOutputStream(DB_PATH+DB_NAME);
    myOutput.write(baf.toByteArray());
    myOutput.flush();
    myOutput.close();
    bis.close();
    is.close();
} catch (Exception e) {
    Log.e("DOWNLOAD", "downloadDatabase Error: ", e);
    return false;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T17:38:09.970

所以我终于自己找到了解决方案。

服务器认为文件“mydbfile”是一个txt文件，所以我为sqlite数据库添加了扩展名“.db”。现在它完美地工作了。

# eclipse-plugin - 无法从 Eclipse 连接到 Sybase

> ID：11171399
> 
> 赞同：0
> 
> 时间：2012-06-23T17:07:11.267
> 
> 标签：eclipse-plugin, sybase

尝试从 Eclipse 连接到 Sybase 服务器时出现以下错误。下面是堆栈转储

```
java.lang.ClassNotFoundException: com.sybase.jdbc3.jdbc.SybDriver
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.net.FactoryURLClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.eclipse.datatools.connectivity.drivers.jdbc.JDBCConnection.createConnection(JDBCConnection.java:213)
    at org.eclipse.datatools.connectivity.DriverConnectionBase.internalCreateConnection(DriverConnectionBase.java:105)
    at org.eclipse.datatools.connectivity.DriverConnectionBase.open(DriverConnectionBase.java:54)
    at org.eclipse.datatools.connectivity.drivers.jdbc.JDBCConnection.open(JDBCConnection.java:73)
    at org.eclipse.datatools.enablement.sybase.ase.internal.connection.JDBCASEConnectionFactory.createConnection(JDBCASEConnectionFactory.java:32)
    at org.eclipse.datatools.connectivity.internal.ConnectionFactoryProvider.createConnection(ConnectionFactoryProvider.java:83)
    at org.eclipse.datatools.connectivity.internal.ConnectionProfile.createConnection(ConnectionProfile.java:359)
    at org.eclipse.datatools.connectivity.ui.PingJob.createTestConnection(PingJob.java:76)
    at org.eclipse.datatools.connectivity.ui.PingJob.run(PingJob.java:59)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:14:47.030

您需要安装 Sybase JDBC 驱动程序 (jconnect) 才能通过 Java 应用程序与 Sybase Central 进行通信。

请参见Sybase 网站上的[安装 jConnect for JDBC 。](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc32179.0707/html/jconnig/BABIEGCG.htm)

如果您对从 Sysbase 迁移到 oracle 感兴趣，可以查看我的[博客](http://fundapass.blogspot.in/2012/05/migration-from-sybase-9-to-oracle-10-g.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:24:17.950

我认为这意味着它找不到 jconn3 类。您的文件系统上是否已有 JConnect 或 JTDS 文件？我两者都使用 Sybase 15.x - 或多或少:)

就我而言，我遇到了这样的错误，发现我没有让驱动程序指向正确的路径。我将 jconn3.jar 文件的正确路径添加到编辑驱动程序定义上的驱动程序文件选项卡并连接。

# javascript - HTML 5 - 非常简单的动画

> ID：11171400
> 
> 赞同：0
> 
> 时间：2012-06-23T17:07:37.430
> 
> 标签：javascript, html, css, css-sprites

我需要了解如何在 HTML 5 或 CSS3 中创建简单的动画。

假设你有这个精灵（见图），你需要创建一个有 4 帧的动画。动画必须持续 1 秒。我不想要帧之间的平滑动画，我希望它在没有插值的情况下从一种状态跳到另一种状态。这些是球的 4 帧：

```
 X        Y      ROTATION       OPACITY (%)
First frame:     100      220        10            5
Second frame:    150      240        18            25
Third frame:     160      280        32            55
Fourth frame:    170      290        47            78 
```

在简历中，每 0.25 秒球必须采用这些关键帧之一。动画上没有循环。

你们能举例说明如何使用 CSS 或 HTML5/Javascript 来做到这一点吗？（产生较少 CPU 密集型方法的方法）。谢谢。

![在此处输入图像描述](../Images/d6dc176fd04096d44e3b3ff113df9804.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T17:14:26.327

这可以通过使用[`@keyframes`](https://developer.mozilla.org/en/CSS/@keyframes)、[`animation`](https://developer.mozilla.org/en/CSS/CSS_animations)和[`transform: rotate(angle) translate(x,y);`](https://developer.mozilla.org/en/CSS/transform#rotate)的纯 CSS3 来完成[`opacity`](https://developer.mozilla.org/en/CSS/opacity)。

这是一个示例（使用`-webkit-`供应商前缀，使用`-moz-`, `-o-`，`-ms-`以获得最佳兼容性）：[http://jsfiddle.net/QaPaK/](http://jsfiddle.net/QaPaK/) **该示例仅适用于 Chrome 和 Safari，因为我没有为紧凑示例添加其他前缀。**

HTML（例如动画`<img>`元素）：

```
<img src="http://i.stack.imgur.com/KLNOU.png" id="test">​ 
```

CSS：

```
/* Replace -webkit- with moz-, -o-, -ms- for cross-browser compatibility */
#test {
    -webkit-transform-origin: top left;
    -webkit-animation-name: foo;
    -webkit-animation-duration: 1s;
    -webkit-animation-iteration-count: 1;
}
@-webkit-keyframes foo {
    0%, 25% { /* State 1 */
        -webkit-transform: rotate(10deg) translate(100px, 200px);
        opacity: 0.05;
    }
    25%, 50% { /* State 2 */
        -webkit-transform: rotate(18deg) translate(150px, 240px);
        opacity: 0.25;
    }
    50%, 75% { /* State 3 */
        -webkit-transform: rotate(32deg) translate(160px, 280px);
        opacity: 0.55;
    }
    75%, 100% { /* State 4 */
        -webkit-transform: rotate(47deg) translate(170px, 290px);
        opacity: 0.78;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T17:34:38.370

嗯，有几种方法。这是我实际这样做的方式：

[http://jsfiddle.net/NcuZC/1/](http://jsfiddle.net/NcuZC/1/)

本质上，我正在使用：

```
var changeFrame = function(elem, i) {
    elem.removeClass().addClass('frame'+i);
};

$(function() {
    var ball = $('#ball'),
        i = 1,
        timer = window.setInterval(function() {
            changeFrame(ball, i);
            i++;  
            if (i > 4) {
                clearInterval(timer);
            }        
        }, 250);    
});​ 
```

然后在 CSS 中为每一帧创建一个类：

```
.frame1 {
    left: 100px;
    top: 220px;

    -webkit-transform: rotate(10deg);
    -moz-transform: rotate(10deg);
    -o-transform: rotate(10deg);
    /* In IE10 there is no prefix. */
    transform: rotate(10deg);

    filter: progid:DXImageTransform.Microsoft.Matrix(/* IE6–IE9 */
                     M11=0.984807753012208, M12=-0.17364817766693033, M21=0.17364817766693033, M22=0.984807753012208, sizingMethod='auto expand');

    opacity: 0.05;
    filter: alpha(opacity=5); /* IE8 down */
} 
```

尽管有一个关于它的流行网站，但我没有使用 CSS3 动画，因为我发现它们有时是 CPU 密集型的，而且由于您不需要补间，所以没有多大意义。

此外，通过使用 JS，我们可以让它在每个流行的浏览器中工作，从 IE6 到最新的 Webkits。

# asp.net - 如何在 ASP.NET 中禁用提交按钮并在提交时添加加载动画

> ID：11171401
> 
> 赞同：1
> 
> 时间：2012-06-23T17:07:47.357
> 
> 标签：asp.net

我需要知道如何防止用户多次提交表单并在 ASP.NET 中单击提交按钮后禁用它。禁用按钮后是否可以添加加载动画？我尝试了 OnClientClick 事件来禁用按钮，但取消了页面刚刚回发而没有任何更改的 OnClick 事件。有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T18:49:54.377

尝试这个：

```
protected void Page_Load(object sender, EventArgs e)
{            
    Page.ClientScript.RegisterOnSubmitStatement(GetType(), "ServerForm",
        "if(this.submitted) return false; this.submitted = true;");
    button.Attributes.Add("onclick", string.Format("this.value='wait...';
        this.disabled=true; {0}", ClientScript.GetPostBackEventReference
        (button, string.Empty)));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T18:36:32.893

您需要 _endRequest、_beginRequest 处理程序。在后面的代码中添加这个。

```
public object endRequestHandle { get; set; }

public object beginRequestHandle { get; set; } 
```

在您的 aspx 页面中，添加以下内容：

```
 Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(beginRequestHandle);
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequestHandle);
//Function gets called before Ajax request
            function beginRequestHandle(sender, Args) {
                $('#SubmitButton').attr("disabled", true);
                $('#LoadingImage').css("visibility","visible");
            }
    //Function gets called after Ajax request completes
            function endRequestHandle(sender, Args) {
              $('#SubmitButton').attr("enabled", true);
                $('#LoadingImage').css("visibility","invisible");
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T17:39:54.500

我过去使用的一个解决方案是创建 System.Web.UI.WebControls.Button 的新子类，该子类使用 Javascript 在单击后禁用自身。请注意，您必须小心不要覆盖 ASP.NET 客户端验证代码。

如果您想在点击后添加加载动画，您可以通过`validateAndDisableScript`以下调整添加客户端 javascript 以显示先前隐藏的动画图标。

```
//
// This is a Button-derived class that will disable itself when it is clicked,
// preventing multiple submits of forms where necessary.
//
public class OneShotButton : System.Web.UI.WebControls.Button
{
    //
    // Javascript that invokes client validation (if enabled), and disables
    // the containing HTML element.  This script doesn't do the postback, so
    // that code has to be appended during OnPreRender.
    //
    private const string validateAndDisableScript =
        @"if ( typeof(Page_ClientValidate) == 'function' )" +
        @"{" +
        @"  if ( !Page_ClientValidate() ) { return false; }" +
        @"}" +
        @"this.disabled = true;";   // postback code follows

    //
    // Override OnPreRender to set Javascript associated with the onclick
    // event for this button.  Most of the Javascript is prebuilt, but we
    // have to dynamically generate the postback code.
    //
    protected override void OnPreRender(System.EventArgs e)
    {
        string onClick = string.Format("{0}{1};",
            validateAndDisableScript,
            Page.ClientScript.GetPostBackEventReference(this, string.Empty) 
            );

        Attributes.Add("onclick", onClick);

        base.OnPreRender(e);
    }
} 
```

# android - ListView：删除一个项目

> ID：11171402
> 
> 赞同：-1
> 
> 时间：2012-06-23T17:07:50.527
> 
> 标签：android, listview

我已经创建[了一个类似的问题](https://stackoverflow.com/questions/11112953/android-remove-item-listview)，但我有一个问题：

```
String lv_arr[] = new String[key];
ArrayAdapter<String> adapterlist = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, lv_arr);

listView1.setTextFilterEnabled(true);
listView1.setAdapter(adapterlist);

adapterlist.notifyDataSetChanged();
adapterlist.remove(adapterlist.getItem(0));
adapterlist.notifyDataSetChanged(); 
```

使用下面的代码不会删除 ListView 中的项目。我寻找了几天的解决方案。

```
adapterlist.remove(String object); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:22:28.777

问题是您使用的数组不支持删除项目

`UnsupportedOperationException`在使用纯 Java 数组（例如，String[]）从适配器中删除项目时，您将收到。尝试使用实现 java.util.List 接口的东西（例如，ArrayList）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:15:16.590

尝试从您的集合中删除对象，然后调用`adapterlist.notifyDataSetChanged()`以重新加载集合。

```
lv_arr.removeAt(0);
adapterlist.notifyDataSetChanged(); 
```

# iphone - Objective c - 使用一个或多个 ViewController 在视图之间翻转？

> ID：11171404
> 
> 赞同：1
> 
> 时间：2012-06-23T17:08:36.903
> 
> 标签：iphone, objective-c, ios, uiview, uiviewcontroller

我正在构建一个位置应用程序，向用户展示他周围的一些地方。
我有一个`NearbyPlacesViewController`带有两个按钮“列表”和“地图”的段控件

如果用户按下“列表” - 我会向他显示一个表格视图，其中包含他周围的地点列表
如果用户按下“地图” - 视图会翻转，我会向用户显示一个地图视图，其中的位置作为图钉。

在“列表”中，我还使用 UISearchBar 和 UISearchDisplayController 来搜索 tableView
在“地图”中，我在 mapView 旁边还有一些其他子视图

目前我 在. `UITableView, MKMapView, UISearchBar`_
_`UITableViewDelegate, UITableViewDataSource, MKMapViewDelegate, UISearchDisplayDelegate`
`NearbyPlacesViewController`

当用户按下“地图”按钮时，我会隐藏与“列表”视图（tableView、搜索栏...）相关的所有视图，并取消隐藏与“地图”视图相关的所有视图（mapView、其他一些子视图...），然后我`UIView transitionWithView`用来在它们之间做翻转动画。

一切正常，但看起来有点乱，结果是一个很大的 NearbyPlacesViewController 有很多代码和委托方法。

使用单独的视图控制器会更好吗？
如果是这样，我该怎么做？如何创建 ListViewController 和 MapViewController 并将它们放在 NearbyViewController 中？
我如何在他们之间共享模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T04:12:37.653

只是为了让您了解视图控制器包含可能是什么样子（iOS 5），这是一种方法。它由四个类组成，容器视图控制器（其视图将具有用于在两个子视图控制器之间切换的分段控制）、两个随机子视图控制器和一个我们将存储数据的模型类（可以通过两个子视图控制器）。

首先，您使用分段控件创建一个容器视图控制器（我还添加了一个 UIView，它基本上定义了放置子视图控制器视图的框架，只是为了更容易弄清楚该视图的放置位置）：

```
//  ContainerViewController.h

#import <UIKit/UIKit.h>

@interface ContainerViewController : UIViewController

@property (weak, nonatomic) IBOutlet UISegmentedControl *segmentedControl;
@property (weak, nonatomic) IBOutlet UIView *childView;

- (IBAction)changeChild:(id)sender;

@end 
```

然后你实现它：

```
//  ContainerViewController.m

#import "ContainerViewController.h"
#import "FirstContainedViewController.h"
#import "SecondContainedViewController.h"
#import "MyModel.h"

@interface ContainerViewController ()
{
    FirstContainedViewController  *_controller0;
    SecondContainedViewController *_controller1;
    MyModel                       *_model;

    UIViewController __weak *_currentChildController; // let's keep track of the current 
}

@end

@implementation ContainerViewController

@synthesize segmentedControl = _segmentedControl;
@synthesize childView = _childView;

- (void)dealloc
{
    // let's release our child controllers

    _controller0 = nil;
    _controller1 = nil;

    // and release the model, too

    _model = nil;
}

// this is my own method to
// 1\. add the child view controller to the view controller hierarchy;
// 2\. do the appropriate notification (even though I don't use it, Apple says you should do this, so I will); and 
// 3\. set the frame size to the appropriate size

- (void)addChildToThisContainerViewController:(UIViewController *)childController
{
    [self addChildViewController:childController];
    [childController didMoveToParentViewController:self];
    childController.view.frame = CGRectMake(0.0, 
                                            0.0, 
                                            self.childView.frame.size.width, 
                                            self.childView.frame.size.height);
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // let's create our model, our data

    _model = [[MyModel alloc] init];

    // set the segmented index to point to the first one

    [self.segmentedControl setSelectedSegmentIndex:0];

    // let's create our two controllers and provide each a pointer to our model

    _controller0 = [[FirstContainedViewController  alloc] initWithNibName:@"FirstContainedView"  bundle:nil];
    _controller0.model = _model;

    _controller1 = [[SecondContainedViewController alloc] initWithNibName:@"SecondContainedView" bundle:nil];
    _controller1.model = _model;

    // let's add them to the view controller hierarchy

    [self addChildToThisContainerViewController:_controller0];
    [self addChildToThisContainerViewController:_controller1];

    // let's add the currently selected controller as the "current child controller" and add it to our current view

    _currentChildController = [self.childViewControllers objectAtIndex:self.segmentedControl.selectedSegmentIndex];
    [self.childView addSubview:_currentChildController.view];
}

- (void)viewDidUnload
{
    [self setChildView:nil];
    [self setSegmentedControl:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (IBAction)segmentedControlValueChanged:(UISegmentedControl *)sender 
{
    UIViewController *oldChildController = _currentChildController;
    UIViewController *newChildController = [self.childViewControllers objectAtIndex:sender.selectedSegmentIndex];
    UIViewAnimationOptions options;

    // let's change the animation based upon which segmented control you select ... you may change this as fits your desired UI

    if (sender.selectedSegmentIndex == 0)
        options = UIViewAnimationOptionTransitionFlipFromLeft;
    else 
        options = UIViewAnimationOptionTransitionFlipFromRight;

    [self transitionFromViewController:oldChildController 
                      toViewController:newChildController
                              duration:0.5 
                               options:options 
                            animations:nil 
                            completion:nil];

    _currentChildController = newChildController;
}

@end 
```

我的模型只有两个数据元素、一个对象数组和一个字符串，但显然你可以为所欲为。我将只显示标题（因为实现细节微不足道且无趣）：

```
//  MyModel.h

#import <Foundation/Foundation.h>

@interface MyModel : NSObject

@property (nonatomic, strong) NSMutableArray *listOfItems;
@property (nonatomic, strong) NSString *displayText;

- (MyModel *)init;

@end 
```

子视图控制器同样简单：

```
//  FirstContainedViewController.h

#import <UIKit/UIKit.h>

@class MyModel;

@interface FirstContainedViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>

@property (nonatomic, weak) MyModel *model;

@end 
```

实现可能看起来像（这是一个简单的示例，但显示了如何从共享模型中检索信息）：

```
//  FirstContainedViewController.m

#import "FirstContainedViewController.h"
#import "MyModel.h"

@implementation FirstContainedViewController

@synthesize model = _model;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - tableview data source delegate methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.model.listOfItems count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"fcvc";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (!cell)
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];

    cell.textLabel.text = [self.model.listOfItems objectAtIndex:indexPath.row];

    return cell;
}

@end 
```

希望这能让您了解如何为两个视图使用单独的视图控制器，如何在它们之间切换，使您的模型可供两者访问。这是一个相当简单的例子，但它很实用。我可能会建议一些优化，但希望这足以让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T17:29:16.547

我有几个选择：

1.  如果您使用 a `UISegmentedControl`，您的两个屏幕可以有两个`UIView`对象（您可以在界面构建器中创建它们或以编程方式构建它们），然后您可以在它们之间跳转时隐藏/显示或`addSubview`/ 。`removeFromSuperview`由于所有数据都将由您的单个视图控制器管理，因此这非常容易。但是，如果这两个子视图变得非常复杂，那么这个单一的视图控制器可能会变得非常复杂。但应该可以正常工作。

2.  如果您想要单独的视图控制器，您可能会追求 iOS 5 的视图控制器包含（参见UIViewController 参考中的[实现容器视图控制器](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)，或参见[WWDC 2011 session 102](https://developer.apple.com/videos/wwdc/2011/?id=102)），尽管这有点复杂。您可以将数据存储为容器视图控制器的属性，这些属性可以传递给子控制器或由子控制器引用。

3.  如果你不喜欢分段控制 UI，你可以只使用`UITabBarController`非常适合这种情况的那个（它实际上是前一个选项的排列，但是容器视图控制器，在这种情况下是标签栏控制器，已经为你写的）。两个视图中的每一个都有一个视图控制器，并将数据存储在`UITabBarController`自定义类、单例、一些持久存储（如用户默认值、核心数据、sqlite）等中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T17:15:20.313

在处理 segmentedControl 时，这就是我过去的做法。您也许可以创建一个单独的控制器类来处理所有内容的底层模型并清除其中的一些代码，但这实际上取决于您想要走多远。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T20:01:11.337

在我看来，最好的选择是拥有*三个*View Controller 并在它们之间创建 Modal Segue。（我假设您正在使用情节提要。）您的父视图控制器将有两个孩子（列表和地图）。

(1) 在您的故事板（具有 ParentViewController、ListViewController 和 MapViewController）中，创建从每个按钮到子 VC 的 Modal Segue。给他们标识符（showList 和 showMap 会很好用）并选择 Transition:Flip Horizo​​ntal。

**设置协议和委托：（**我会告诉你如何做，然后重复一遍。）

(2a) 在 ListViewController.h 上面添加@interface：

```
@class ListViewController;

@protocol ListViewControllerDelegate
    - (void)listViewControllerDidFinish:(ListViewController *)controller;
@end 
```

(2b) 将委托添加为属性：

```
@property (weak, nonatomic) id <ListViewControllerDelegate> delegate; 
```

(3a) 在 ListViewController.m 中合成：

```
@synthesize delegate; 
```

(3b) 并委托在IBAction按钮方法中进行翻转：

```
- (IBAction)flipBack:(id)sender
{
    [self.delegate ListViewControllerDidFinish:self];
} 
```

(4) 在 ParentViewController.h 中添加@interface 的最顶部`#import "ListViewController.h"`和末尾`<ListViewControllerDelegate>`

(5a) 在 ParentViewController.m 中添加符合协议的方法：

```
- (void)listViewControllerFinish:(ListViewController *)controller
{
    [self dismissModalViewControllerAnimated:YES];
} 
```

(5b) 然后在prepareForSegue中设置为delegate：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showList"]) {
        [[segue destinationViewController] setDelegate:self];
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-23T17:19:33.797

想想模型视图控制器。如果它们真的只是您要在它们之间切换的视图，那么使用一个 UIViewController 是合适的，这就是我通常对分段控件所做的事情，因为它通常归结为切换当前控制器的视图。控制器绝对应该处理分段控制的 IBAction。

代表和数据源应该在有意义时被提取到一个单独的类中，在您的情况下它确实如此。我会考虑为您正在使用的各种代表单独的类，这将显着清理它，同时也坚持接近 Apple 的设计原则。您可以将 UITableView 委托和数据源放在它们自己的类中，但除此之外，为每个不同的委托创建一个单独的类将大大清理它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-23T17:27:15.673

单独的视图控制器可能是一种更简洁的方法。我更喜欢他们。也意味着您可以使初始视图控制器成为其他视图控制器的父视图，并布置您拥有的各种视图，并在需要时将您的子视图控制器作为子视图添加到父视图中。还可以更轻松地添加一些自定义动画或在以后进行中继。

# mysql - 我可以将来自 2 个不同表的 2 个查询合并到一个数据数组中吗？

> ID：11171405
> 
> 赞同：2
> 
> 时间：2012-06-23T17:08:42.763
> 
> 标签：mysql, sql

我正在开发一个允许用户将文件组织到文件夹中的媒体库。我有一个文件表，用于跟踪它所属文件夹的父 ID。我还有一个文件夹表，它也允许父 id - 所以一个文件夹可以在另一个文件夹中。当我想显示一个列出父文件夹包含的文件和文件夹的视图时，问题就出现了。到目前为止，我已经采取了廉价的方式，刚刚对文件夹进行了 2 次单独的查询，然后是文件 - 然后一个接一个地列出。但是，既然列表已经变长了——我想对它们进行分页——所以我需要限制我的查询。如何结合 2 个查询来获得一个可以循环遍历的文件和文件夹数据数组？

例如，我可以这样做：

```
SELECT * 
FROM `files` LEFT JOIN `folders` ON `files`.`folder_id` = `folders`.`id` 
WHERE `folders`.`id` = 198 
```

这将为我提供该文件夹中所有文件的列表。

然后这个：

```
SELECT * FROM `folders` WHERE `parent` = 198 
```

这会给我一个所有子文件夹的列表。

有没有办法可以将两者结合起来给我一个循环的数据数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:12:42.567

尝试这样的事情：

```
SELECT id_file, name, 'file' as `type` 
FROM `files` 
LEFT JOIN `folders` ON `files`.`folder_id` = `folders`.`id` 
WHERE `folders`.`id` = 198

UNION

SELECT id_folder, name, 'folder' FROM `folders` WHERE `parent` = 198

LIMIT 0, 20 
```

# android - “位图大小超出 VM 预算”

> ID：11171415
> 
> 赞同：1
> 
> 时间：2012-06-23T17:10:18.363
> 
> 标签：android, bitmap, virtual-machine

偶尔我会收到错误消息“位图大小超出 VM 预算”。当我一个接一个地打开 20 个活动时会发生这种情况，其中每个活动都包含 500x300 PNG 图片。当我使用 android:background="@drawable/xxxxxxxx" 在我的 XML 布局中实现图片时，我没有遇到问题。

当我在我的 Java 代码中实现图片时，首先发生了错误。

```
<ImageView
android:id="@+id/ImVpic"
android:layout_width="wrap_content"
android:layout_height="wrap_content"/>

ImageView pic;
pic = (ImageView)findViewById(R.id.ImVpic);
pic.setImageResource(R.drawable.picture); 
```

我怎样才能摆脱这个错误？我的代码中缺少什么？我的意思是它确实有效，但有时它会抛出一个非常烦人的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T17:15:40.920

这是您在 SO 上看到的非常常见的问题。加载图像时似乎可用内存不足。确保您没有为图像保留长时间的引用，这允许 dalvik 从未使用的图像（或）对象中回收内存。

# java - 客户端-服务器对：临时端口

> ID：11171420
> 
> 赞同：0
> 
> 时间：2012-06-23T17:11:21.470
> 
> 标签：java, sockets, client-server, client-side

我正在用java编写一个客户端服务器对，我希望系统在运行时分配端口。在服务器端，这可以通过 API 轻松完成，但客户端如何知道服务器正在侦听哪个端口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T17:22:46.500

客户端不知道服务器正在侦听哪些端口，除非您将其指定给客户端
您可以考虑使用其他架构，例如 OGSI，或者您拥有所有客户端都知道的“服务存储库”的技术，因此他们可以查询它并获取有关可用服务及其端口的信息。
另一种选择是让系统管理员在您的 DNS 组织中为您的服务定义 SRV 记录，然后客户端代码可以调用 SRV 记录请求，并获取有关服务的信息，但这对于您的需求可能有点过分，需要涉及你的系统管理员
如果你对我提到的 DNS 选项感兴趣，你应该检查[oVirt](http://www.ovirt.org)开源的 DnsSrvLocator 类。
在 oVirt，我们使用它来检测 Ldap 服务器（安装 Active Directory 时，系统管理员应该为 LDAP 服务器配置条目，指示主机名和它侦听的端口，然后，使用此实用程序，您可以提供以下信息srv 记录（域和协议并获取可用服务器列表）
这是它的代码 -

```
/**
 *
 */
package org.ovirt.engine.core.dns;

import java.net.URI;
import java.net.URISyntaxException;
import java.util.Arrays;
import java.util.Hashtable;
import java.util.InputMismatchException;
import java.util.Random;
import java.util.Scanner;
import java.util.regex.Pattern;

import javax.naming.Context;
import javax.naming.NamingException;
import javax.naming.directory.Attribute;
import javax.naming.directory.Attributes;
import javax.naming.directory.DirContext;
import javax.naming.spi.NamingManager;

import org.ovirt.engine.core.utils.log.Log;
import org.ovirt.engine.core.utils.log.LogFactory;

/**
 * Utility class to query DNS SRV records, and return results according to the priority/weights algorithm as specified
 * in RFC 2782
 *
 */
public class DnsSRVLocator {

    private static final String DNS_QUERY_PREFIX = "dns:///";
    private static final String SRV_RECORD = "SRV";
    private static Pattern SPACE_PATTERN = Pattern.compile(" ");
    private static SrvRecord invalidRecord = new SrvRecord(false, false, 0, 0, 0, "");
    private int numberOfValidRecords = 0;
    private Random random = new Random(System.currentTimeMillis());

    public static final String TCP = "_tcp";
    public static final String UDP = "_udp";

    /**
     * Holds information on a retrieved SRV record
     *
     */
    public static class SrvRecord implements Comparable<SrvRecord> {
        private boolean valid;
        private int weight;
        private int priority;
        private int sum;
        private String address;
        private boolean used;

        public String toString() {
            StringBuilder sb = new StringBuilder();
            sb.append("valid: ").append(valid).append(" sum: ").append(sum).append("priority: ").append(priority)
                    .append(" weight: ").append(weight).append(" hostport: ").append(address);
            return sb.toString();
        }

        public SrvRecord(int priority, int weight, String hostPort) {
            this(true, false, 0, priority, weight, hostPort);
        }

        public SrvRecord(boolean valid, boolean used, int sum, int priority, int weight, String address) {
            this.valid = valid;
            this.used = used;
            this.sum = sum;
            this.priority = priority;
            this.weight = weight;
            this.address = address;
        }

        public boolean isValid() {
            return valid;
        }

        public void setValid(boolean isValid) {
            this.valid = isValid;
        }

        public int getWeight() {
            return weight;
        }

        public void setWeight(int weight) {
            this.weight = weight;
        }

        public int getPriority() {
            return priority;
        }

        public void setPriority(int priority) {
            this.priority = priority;
        }

        public int getSum() {
            return sum;
        }

        public void setSum(int sum) {
            this.sum = sum;
        }

        public String getAddress() {
            return address;
        }

        public void setAddress(String address) {
            this.address = address;
        }

        public boolean isUsed() {
            return used;
        }

        public void setUsed(boolean isUsed) {
            this.used = isUsed;
        }

        @Override
        public int compareTo(SrvRecord other) {

            // Sort in ascending order where invalid (non parsable) records are
            // last
            // Records with lower priority value come first
            // For a group of records with same priority, records with weight 0
            // come first
            if (valid && !other.valid) {
                return -1;
            }
            if (!valid && other.valid) {
                return 1;
            }
            if (priority < other.priority) {
                return -1;
            }
            if (priority > other.priority) {
                return 1;
            }
            if (weight == 0 && other.weight != 0) {
                return -1;
            }
            if (weight != 0) {
                return 1;
            }
            return 0;
        }
    }

    public static class DnsSRVResult {
        private int numOfValidAddresses;
        private String[] addresses;

        public DnsSRVResult(int numOfValidAddresses, String[] addresses) {
            this.numOfValidAddresses = numOfValidAddresses;
            this.addresses = addresses;
        }

        public int getNumOfValidAddresses() {
            return numOfValidAddresses;
        }

        public String[] getAddresses() {
            return addresses;
        }
    }

    public DnsSRVResult getService(String service, String protocol, String domain) throws Exception {
        StringBuilder dnsQuery = new StringBuilder();
        dnsQuery.append(service).append(".").append(protocol).append(".").append(domain);

        try {
            return getService(dnsQuery.toString());
        } catch (Exception ex) {
            log.errorFormat("Error: could not find DNS SRV record name: {0}.{1}.{2}.\nException message is: {3}\n" +
                    "Possible causes: missing DNS entries in the DNS server or DNS resolving" +
                    " issues from engine-core machine.\nPlease Ensure correct DNS entries exist in the DNS server" +
                    " and ensure the DNS server is reachable from the engine-core machine.",
                    service,
                    protocol,
                    domain,
                    ex.getMessage());
            throw ex;
        }
    }

    private DnsSRVResult getService(String dnsUrl) throws NamingException {
        Context ctx = NamingManager.getURLContext("dns", new Hashtable(0));

        if (!(ctx instanceof DirContext)) {
            return null; // cannot create a DNS context
        }

        StringBuilder fullDnsURL = new StringBuilder(DNS_QUERY_PREFIX);
        fullDnsURL.append(dnsUrl);
        Attributes attrs = ((DirContext) ctx).getAttributes(fullDnsURL.toString(), new String[] { SRV_RECORD });

        if (attrs == null) {
            return null;
        }

        Attribute attr = attrs.get(SRV_RECORD);
        if (attr == null) {
            return null;
        }

        int numOfRecords = attr.size();
        String[] records = new String[numOfRecords];
        for (int counter = 0; counter < numOfRecords; counter++) {
            records[counter] = (String) attr.get(counter);
        }

        return getSRVResult(records);
    }

    public DnsSRVResult getSRVResult(String[] recordsList) {
        int numOfRecords = recordsList.length;
        if (recordsList == null || numOfRecords == 0) {
            return null;
        }
        // Read records as retrieved from DNS
        SrvRecord[] records = new SrvRecord[numOfRecords];
        int counter = 0;
        for (String recordStr : recordsList) {
            SrvRecord srvRecord = parseSrvRecord(recordStr);
            records[counter++] = srvRecord;
        }
        // Sort the records
        Arrays.sort(records);
        int priority = -1;
        int lastPriorityIndex = -1;
        int priorityIndex = -1;
        int startPriorityIndex = -1;
        String[] addresses = new String[numOfRecords];
        // Total number of service addresses
        int numOfAddreses = -1;
        // Iterates over the records, and calculates for each
        // priority the index of the first SRV record that contains
        // the index of last SRVV record that contains the priority
        // For each group of records with same priorities, gets a list of services
        for (SrvRecord record : records) {
            if (!record.isValid()) {
                break;
            }
            lastPriorityIndex = priorityIndex;
            priorityIndex++;
            int currentPriority = record.getPriority();
            if (currentPriority != priority) {
                if (lastPriorityIndex != -1) {
                    // This means that this is the end of a group of records
                    // with same
                    // priority - get their service addresses
                    numOfAddreses = fillServiceAddress(records, startPriorityIndex, lastPriorityIndex, addresses,
                            numOfAddreses);

                }
                startPriorityIndex = priorityIndex;
                priority = currentPriority;

            }
            lastPriorityIndex = priorityIndex;
        }
        numOfAddreses = fillServiceAddress(records, startPriorityIndex, lastPriorityIndex, addresses, numOfAddreses);

        // numOfAddresses points to the last index of valid address in the
        // addresses array
        // Increase it by 1 in order to truely reflect the number of valid
        // addresses
        return new DnsSRVResult(numOfAddreses + 1, addresses);
    }

    private int fillServiceAddress(SrvRecord[] records,
            int startPriorityIndex,
            int lastPriorityIndex,
            String[] addresses,
            int numOfAddressess) {

        // Run the following algorithm for determining the order of service entries for a
        // group of SRV records with same
        // priority:
        // 1\. For each SRV record calculate its sum based on the sum of weights
        // of its weight and
        // the weight of all preceding SRV records
        // 2\. Select a random value between 0 and the sum (inclusive)
        // 3\. Iterate over the group until a record with sum that is greater or
        // above
        // to the generated random value is encountered
        // 4\. This will be the next select SRV record - make it not used for
        // next round of the algorithm
        int numOfRepetitions = (lastPriorityIndex - startPriorityIndex) + 1;
        int totalSum = 0;
        for (int counter = 0; counter < numOfRepetitions; counter++) {
            for (int index = startPriorityIndex; index <= lastPriorityIndex; index++) {
                if (!records[index].isUsed()) {
                    totalSum += records[index].getWeight();
                    records[index].setSum(totalSum);
                }
            }
            int randResult = random.nextInt(totalSum + 1);
            for (int index = startPriorityIndex; index <= lastPriorityIndex; index++) {
                boolean found = false;
                if (!found && !records[index].isUsed()) {
                    if (records[index].getSum() >= randResult) {
                        records[index].setUsed(true);
                        addresses[++numOfAddressess] = records[index].getAddress();
                        found = true;
                    }
                }
            }
        }
        return numOfAddressess;
    }

    private SrvRecord parseSrvRecord(String recordStr) {

        // SRV record looks like: PRIORITY WEIGHT PORT HOST
        Scanner s = new Scanner(recordStr).useDelimiter(SPACE_PATTERN);
        try {
            int priority = s.nextInt();
            int weight = s.nextInt();
            String port = s.next();
            String host = s.next();
            StringBuilder sb = new StringBuilder(host);
            sb.append(":").append(port);
            numberOfValidRecords++;
            return new SrvRecord(priority, weight, sb.toString());
        } catch (InputMismatchException ex) {
            log.errorFormat("the record {0} has invalid format", recordStr);

            // In case there is a parsing error, the invalid record constant is
            // returned
            return invalidRecord;
        }
    }

    public URI constructURI(String protocol, String address) throws URISyntaxException {
        String[] parts = address.split("\\.:");
        if (parts.length != 2) {
            throw new IllegalArgumentException("the address in SRV record should contain host and port");
        }

        StringBuilder uriSB = new StringBuilder(protocol);
        uriSB.append("://").append(parts[0]).append(":").append(parts[1]);
        return new URI(uriSB.toString());
    }

    private static Log log = LogFactory.getLog(DnsSRVLocator.class);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:28:21.723

一般来说，您需要使用其他一些目录或发现服务来让客户端知道服务器在哪个端口上。没有广泛可用的通用机制来询问服务器“服务器进程 X 正在侦听哪个端口”

如果您只是希望端口分配具有灵活性（例如，能够在不同的安装中使用不同的端口，或者让您的服务器的多个实例在不同的端口上运行），请考虑使用简单的环境变量或命令行覆盖以将端口提供给服务器。例如，

```
./start-server -p 4000
./start-server -p 4001 
```

当然，您仍然需要使客户端可配置以查找服务器，但至少您将具有可预测性（并且不会依赖于动态系统分配的端口）。

# stream - 如何从 http://ipaddress:port 流式传输 AAC 格式？

> ID：11171422
> 
> 赞同：1
> 
> 时间：2012-06-23T17:11:57.530
> 
> 标签：stream, jwplayer, aac, shoutcast

我正在寻找一个免费的 Flash 播放器（不是 Windows 媒体播放器）来从具有这种类型的链接的网站流式传输 AAC 音频：ipaddress:port, whith。我可以使用什么播放器？我尝试使用 JWplayer，但我无法设置它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T17:14:33.313

使用shoutcast播放器，如下面的jwplayer示例或这个：[http ://www.wavestreaming.com/player/free-shoutcast-flash-player](http://www.wavestreaming.com/player/free-shoutcast-flash-player)

基本上，您的源是一个直播流，因此您可以使用任何基于 Flash 的直播音频播放器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:55:30.960

我建议使用 ViaStreaming 服务，他们为客户提供免费的 aac+、aac、mp3 流 flash 播放器，无需任何转码器或额外的服务器，直接来自 SHOUTcast 服务器。

示例：[http ://s1.viastreaming.net/8100](http://s1.viastreaming.net/8100)

# java - 从java中的csv文件中提取字符串

> ID：11171423
> 
> 赞同：1
> 
> 时间：2012-06-23T17:11:57.870
> 
> 标签：java, regex

我有一个文本文件，其中包含一些用“，”分隔的字符串。字符串的形式为：“x:somestring:any string”。我只对提取“somestring”值感兴趣。我可以通过使用“”替换“x：”来提取“somestring：any string”：

```
Pattern p= Pattern.compile("x:", Pattern.CASE_INSENSITIVE);
Matcher m = p.matcher(""); 
```

但正如我之前所说，我只对“somestring”感兴趣。是否可以添加第二个模式以将“：任何字符串”替换为“”。我想再次重复相同的过程，但我想问一个更好的方法。有什么办法可以改善我的正则表达式？请注意，“somestring”和“any string”不是固定值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T18:46:31.100

使用拆分：

```
 for (String s : subjectString.split(",")) {
        s.split(":")[1];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T09:02:09.397

另一种简单的方法是：

```
"x:somestring:any string".replaceAll (".*:(.*):.*", "$1") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T18:41:44.993

如果您有一个`subjectString`包含 的字符串，`"x:somestring:any string"`则将提取以下内容`somestring`：

```
Pattern regex = Pattern.compile(
    "(?<=x:) # Assert position right after 'x:'\n" +
    "[^:]*   # Match any number of characters except colons", 
    Pattern.COMMENTS);
Matcher regexMatcher = regex.matcher(subjectString);
if (regexMatcher.find()) {
    ResultString = regexMatcher.group();
} 
```

# mysql - MySQL MATCH() AGAINST() 等效于 SQL Server

> ID：11171424
> 
> 赞同：4
> 
> 时间：2012-06-23T17:12:09.377
> 
> 标签：mysql, sql, sql-server, sql-server-2000

有没有办法可以将这个全文搜索查询从 MySQL 翻译成 SQL Server？

```
SELECT *, MATCH(title) AGAINST('My Title' IN BOOLEAN MODE) AS score FROM books
WHERE MATCH(title) AGAINST('My Title' IN BOOLEAN MODE) ORDER BY score DESC,
books.title ASC 
```

如果有帮助，我专门使用 SQL Server 2000。我没有使用更新版本的选项。:S

这是一个示例场景。

* * *

创建表：

```
--
-- Table structure for table `books`
--

CREATE TABLE IF NOT EXISTS `books` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `title` (`title`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 ;

--
-- Index the title column
--

ALTER TABLE `books` ADD INDEX ( `title` )

--
-- Dumping data for table `books`
--

INSERT INTO `books` (`id`, `title`) VALUES
(1, 'My Title'),
(2, 'My Title'),
(3, 'Not My Title'),
(4, 'Other Title'),
(5, 'Not Related'),
(6, 'Not Related Either'); 
```

执行查询：

```
SELECT *, MATCH(title) AGAINST('My Title' IN BOOLEAN MODE) AS score FROM books
WHERE MATCH(title) AGAINST('My Title' IN BOOLEAN MODE) ORDER BY score DESC,
books.title ASC 
```

这是返回的内容：

```
id  title           score
1   My Title        1
2   My Title        1
3   Not My Title    1
4   Other Title     1 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T17:46:23.393

这听起来绝对像是实现全文搜索的一个案例。[`CHARINDEX`](https://docs.microsoft.com/en-us/sql/t-sql/functions/charindex-transact-sql)听起来您所追求的算法比,[`PATINDEX`](https://docs.microsoft.com/en-us/sql/t-sql/functions/patindex-transact-sql)和提供的算法复杂得多[`LIKE`](https://docs.microsoft.com/en-us/sql/t-sql/language-elements/like-transact-sql)，它们是非常简单的开/关类型结果（字符串包含搜索的表达式或不包含）。

全文搜索的官方 Microsoft 文档[从此处开始](https://docs.microsoft.com/en-us/sql/relational-databases/search/full-text-search)。[这篇文章](https://docs.microsoft.com/en-us/sql/relational-databases/search/query-with-full-text-search)以及这篇 MSDN 文章[“提高全文索引的性能”](https://docs.microsoft.com/en-us/sql/relational-databases/search/improve-the-performance-of-full-text-indexes)以及[mssqltips.com 上的一些全文搜索技巧](http://www.mssqltips.com/sql-server-tip-category/32/full-text-search/?utm_source=AaronBertrand)也可能有用。

您可能最感兴趣的全文关键字是[`CONTAINS`](https://docs.microsoft.com/en-us/sql/t-sql/queries/contains-transact-sql)和[`CONTAINSTABLE`](https://docs.microsoft.com/en-us/sql/relational-databases/system-functions/containstable-transact-sql)。[此页面描述了 CONTAINSTABLE 如何应用排名等内容](https://docs.microsoft.com/en-us/previous-versions/sql/sql-server-2008-r2/ms142524(v=sql.105)?redirectedfrom=MSDN)。

# c# - 在 C# 中获得焦点文本框？

> ID：11171425
> 
> 赞同：0
> 
> 时间：2012-06-23T17:12:09.783
> 
> 标签：c#, visual-c#-express-2010

我有 25 个文本框。我有一个按钮，可以将信息粘贴到选定的文本框中（聚焦的那个）。这是我使用的代码：

```
 foreach (Control z in this.Controls)
        {
            if (z is TextBox)
            {  
                ((TextBox)(z)).Paste();          
            }
        } 
```

当我使用它时，所有的文本框都会被粘贴进去。我只需要集中的那个。我完全被难住了。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T17:14:11.980

这个怎么样？

```
 foreach (Control z in this.Controls)
        {
            if (z is TextBox && z.Focused)
            {  
                ((TextBox)(z)).Paste();          
            }
        } 
```

根据 MSDN Control.Focused 如果控件有焦点则为真，否则为假

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.focused.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.focused.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T17:16:38.340

您可以使用 LINQ 获取焦点文本框并粘贴。

```
TextBox focusedTextBox = this.Controls.OfType<TextBox>().FirstOrDefault(tb => tb.IsFocused);
if (focusedTextBox != null)
{
    focusedTextBox.Paste();
} 
```

对于 WPF/Silverlight，`IsFocused`应使用该属性。如果您使用的是 winforms，则应使用该`Focused`属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T17:16:53.490

您可以尝试测试控件集合的 Focused 属性

```
foreach (Control z in this.Controls) 
{ 
    if (z is TextBox && z.Focused) 
        ((TextBox)(z)).Paste();           
} 
```

但是，如果 TextBox 包含在不同的 GroupBox 或其他控件容器中，这可能会变得更加复杂。
在这种情况下，您需要一个递归函数

```
private void PasteInFocusedTextBox(ControlCollection ctrls)
{
    foreach (Control z in ctrls) 
    {
        if(z.Controls != null && z.Controls.Count > 1)
            PasteInFocusedTextBox(z.Controls);

        if (z is TextBox && z.Focused) 
           ((TextBox)(z)).Paste();           
    }
} 
```

编辑：重读你的问题我有疑问。如果单击按钮执行粘贴操作，则焦点将切换到该按钮，您不能再使用focused属性

在这种情况下，您需要在单击命令按钮之前将最后一个具有焦点的文本框保存在全局变量中

```
private TextBox _txtLastFocused = null

private void txtCommon_Leave(object sender, EventArgs e)
{
    _txtLastFocused = (TextBox)sender;
}

private void cmdPasteButton_Click(object sender, EventArgs e)
{
   if(_txtLastFocused != null) _txtLastFocused.Paste();
} 
```

# java - 如何使用 LWJGL 将图像保存在内存中？

> ID：11171427
> 
> 赞同：0
> 
> 时间：2012-06-23T17:12:26.107
> 
> 标签：java, image, opengl, textures, lwjgl

我一直在使用java常规图形设备，awt和swing的东西，用Graphics，Graphics2D等有一段时间，然后开始看LWJGL的一系列教程。我真的很喜欢并决定在那个系统中重做我的一个游戏；我想，既然我已经有了逻辑，那就很容易了。我刚刚遇到了一个概念问题。

在这个特定的例子中，我有一个类 Box 代表一个盒子，但我用图像绘制它，从而制作边框。我有 9 张图像，一张用于中心（那只是一张 1 像素宽的纯色图像），4 张用于侧面，4 张用于角落。我将所有这些图像放在一个 BufferedImage 数组中，它是静态的，因为所有盒子都是一样的。然后，每个盒子都有一个全局的BufferedImage，我在里面画了盒子，这个过程真的很慢，因为我必须在盒子的每个部分都画一个图像。然后，在真正的绘制方法（接收图形 g）中，我只是将 BufferedImage 绘制在正确的位置。由于盒子的大小在创建后并没有改变，我只需要在构造函数中“创建”一次盒子图像。

我不知道如何用 LWJGL 做到这一点，因为 gl_ 方法（​​glBegin()、glVertex2i()）总是会在屏幕上绘制，即使我从未指定过。那么如何绘制图像以及如何将其存储在内存中（也使用 BufferedImage），以及如何在需要时将其绘制在屏幕上？我发现 LWJGL 使用纹理，我将 BufferedImage 的第一个静态数组设为纹理的静态数组，然后正确保存其中的 9 个纹理中的每一个。这是正确的方法吗？全局BufferedImage呢，应该是全局Texture吗？在那种情况下，如何在纹理上“绘制”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:36:51.910

您正在寻找的技术通常称为“渲染到纹理”（RTT）。您创建一个 opengl 帧缓冲区，将纹理附加到它，绑定您的帧缓冲区，然后发出正常的绘制调用。绑定帧缓冲区后，绘图调用将直接绘制到您的纹理中。然后，您取消绑定帧缓冲区并将您的纹理用作普通纹理。

通过这些搜索词，我相信您可以在互联网上找到有关如何执行此操作的教程。

不过我很好奇，你的盒子看起来像什么，它不能用正常的纹理绘制？也许有一个更简单的方法来解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T17:41:31.973

看看这个[LWJGL 纹理教程](http://www.lwjgl.org/wiki/index.php?title=Slick-Util_Library_-_Part_1_-_Loading_Images_for_LWJGL)，来自他们的 wiki。在这个例子中，他们使用了[Slick-Util 库](http://slick.cokeandcode.com/)，这使得从图像创建纹理变得更加容易。

* * *

或者，您可以自己生成纹理：

```
BufferedImage bufferedImage = ...;
ByteBuffer textureBuffer = convertImageData(bufferedImage);

int texture = glGenTextures();
glBindTexture(GL_TEXTURE_2D, texture);

int pixelFormat;
if (bufferedImage.getColorModel().hasAlpha()) {
    pixelFormat = GL_RGBA;
} else {
    pixelFormat = GL_RGB;
}

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, 
        bufferedImage.getWidth(), bufferedImage.getHeight(), 0,
        pixelFormat, GL_UNSIGNED_BYTE, textureBuffer); 
```

Aaaaaand 看到[这个](https://stackoverflow.com/questions/5194325/how-do-i-load-an-image-for-use-as-an-opengl-texture-with-lwjgl)我之前写过的 convertImageData() 的答案。（在他的代码中有几行可以删除）

绘制纹理：参见[LWJGL Space Invaders](http://www.lwjgl.org/wiki/index.php?title=Examples:SpaceInvaders_Sprite)的第 97 行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T17:48:13.090

在 OpenGL 中，缩放非常便宜。你不需要预先生成任何东西。您可以将所有图像放在一个纹理中，并在将它们绘制到屏幕时使用纹理映射来正确放置和缩放它们。

如果您已经有使用 的解决方案`BufferedImage`，请保持这种方式。在 GPU 上生成此图像不会为您节省太多时间。使用 awt 生成图像，从中创建纹理并使用 LWJGL 将其绘制到屏幕上。

如果你真的想这样做，你可以使用`glCopyPixels`. 但我不会从那里开始学习 OpenGL。避免将图像传输到主内存（将其保存在纹理而不是 BufferedImage 中），在 CPU 和 GPU 之间发送数据可能非常慢。

# javascript - javascript替换字符串和url的字符之前

> ID：11171431
> 
> 赞同：0
> 
> 时间：2012-06-23T17:12:55.010
> 
> 标签：javascript, regex, url

我有以下网址，我想找到一个字符串并删除该字符串及其之前的任何内容。

细绳：`me.do?page=`

网址可以

```
http://demo.com/me.do?page=/facebook/link/home.php
http://demo.com/sub-folder/me.do?page=/facebook/link/home.php
http://**subdomain**.demo.com/sub-folder/demo/me.do?page=/facebook/link/home.php 
```

最终输出应该是

```
/facebook/link/home.php
/facebook/link/home.php
/facebook/link/home.php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T17:19:16.363

即使在这种情况下也不需要正则表达式：

```
var url = "http://demo.com/me.do?page=/facebook/link/home.php";
var result = url.split("/me.do?page=")[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T17:21:42.897

```
 var ur="http://demo.com/sub-folder/me.do?page=/facebook/link/home.php";
  var answer=ur.substring(ur.indexOf("me.do?page=")+11, ur.length); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T17:23:06.283

如果你真的觉得你需要一个正则表达式来回答这个问题，并记住字符串操作更快/更便宜，有：

```
var urls = ["http://demo.com/me.do?page=/facebook/link/home.php",
                    "http://demo.com/sub-folder/me.do?page=/facebook/link/home.php",
                    "http://**subdomain**.demo.com/sub-folder/demo/me.do?page=/facebook/link/home.php"],
    newUrls = [];

for (var i = 0, len = urls.length; i < len; i++) {
    var url = urls[i];
    newUrls.push(url.replace(/.+\/me\.do\?page\=/, ''));
}

console.log(newUrls);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/PtEtP/)。

# android - 将 post xml 发送到 REST

> ID：11171432
> 
> 赞同：0
> 
> 时间：2012-06-23T17:13:00.630
> 
> 标签：android, xml, rest

我正在开发一个 Android 应用程序，它使用 REST Web 服务将内容发送到服务器。

使用简单的参数（字符串，int，...）效果很好，但知道我想发送一些对象，我正在尝试通过 POST 请愿将对象的 XML 形式发送到服务器。但我收到了 415 代码（“不支持的媒体类型”），我不知道可能是什么。我知道 xml 没问题，因为使用 firefox 的 POSTER 插件，您可以将发布数据发送到 Web 服务并且它响应正常，但是通过 Android 我无法做到这一点。

这是我正在使用的代码：

```
ArrayList<NameValuePair>() params = new ArrayList<NameValuePair>();
params.add(new BasicNameValuePair("customer", "<customer>   <name>Bill Adama</name>     <address>lasdfasfasf</address></customer>");

HttpPost request = new HttpPost(url);  
request.setEntity(new UrlEncodedFormEntity(params, HTTP.UTF_8));

HttpClient client = new DefaultHttpClient(); 
HttpResponse httpResponse = client.execute(request); 
```

有什么提示吗？我真的不知道发生了什么事。也许我需要在标头 http 中指定任何内容，因为我发送了一个 xml？请记住：使用简单的数据可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T17:17:34.693

您需要将内容类型设置为

```
conn.setRequestProperty("content-type", "application/x-www-form-urlencoded"); 
```

有关更多详细信息，请参阅此[示例](https://stackoverflow.com/questions/2735839/posting-xml-request-in-java)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:24:39.960

尝试使用这种方式将 xml 发布到服务器`DefaultHttpClient()`

```
String strxml= "<customer><name>Bill Adama</name><address>lasdfasfasf</address></customer>";
InputStream is = stringToInputStream(strxml);  
HttpClient client = new DefaultHttpClient();  
HttpPost post = new HttpPost(PATH);  
InputStreamBody isb = new InputStreamBody(is, "customer.xml");  
MultipartEntity multipartEntity = new MultipartEntity();  
multipartEntity.addPart("file", isb);  
multipartEntity.addPart("desc", new StringBody("this is description."));  
post.setEntity(multipartEntity);  
HttpResponse response = client.execute(post);  
if (response.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {  
    is = response.getEntity().getContent();  
     String result = inStream2String(is);   
  }  

public InputStream stringToInputStream(String text) throws UnsupportedEncodingException {
    return new ByteArrayInputStream(text.getBytes("UTF-8"));
} 
```

# c# - 如何强制 iis 中的 asp.net 应用程序显示默认浏览器登录窗口以供输入？

> ID：11171433
> 
> 赞同：0
> 
> 时间：2012-06-23T17:13:14.427
> 
> 标签：c#, permissions, iis-7.5, asp.net-4.0, windows-server-2008-r2

我在我的 Windows Server 2008-R2 上安装了 php，在 iis 上一切正常。
我在 iis (php) 中创建了一个网站，并在上面放置了一个简单的脚本。
我去了该网站的权限并删除了除管理员之外的所有权限。
现在，当我在浏览器中打开该网站时，会出现一个登录窗口，我可以使用管理员用户信息登录。
但这种方式不适用于 iis 上的 asp.net 4.0 Web 应用程序，我无法删除网络服务权限。意味着通过删除我在浏览器中打开该网站时出现错误。
我想了解如何以两种方式显示 asp.net 应用程序的默认登录窗口：

1.  更改权限
2.  通过 c# 代码

非常感谢观看和关注

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:21:23.740

您不能从网站中删除网络服务权限，因为这是运行 asp.net 的身份。但这对远程登录网站应该没有任何影响。

使 IIS 身份验证与 asp.net 完美配合的解决方案取决于您使用的 IIS 身份验证类型...

[http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/9b619620-4f88-488b-8243-e6bc7caf61ad.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/9b619620-4f88-488b-8243-e6bc7caf61ad.mspx?mfr=true)

本文档详细介绍了如何使各种 IIS 身份验证方法与 asp.net 一起使用

[http://msdn.microsoft.com/en-us/library/ee817643.aspx](http://msdn.microsoft.com/en-us/library/ee817643.aspx)

一言以蔽之，以防万一...听起来您正在使用管理员登录来保护您的网站。IIS（或 asp.net）实现的许多身份验证形式不使用加密将用户名/密码发送到服务器，您可能会向全世界广播您的管理员凭据。您应该始终使用特定于网站的身份，并确保该身份在服务器上没有任何其他类型的权限。

# web-hosting - 确定网站的主机

> ID：11171434
> 
> 赞同：0
> 
> 时间：2012-06-23T17:13:25.810
> 
> 标签：web-hosting

我知道我可以通过运行找到“foobar.com”的注册商`whois foobar.com`。如何找出谁在托管网站？例如，什么会表明网站是否托管在某人的家用计算机上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T17:30:13.270

没有确定的，但您可以查找服务器 IP 地址[的 DNS 主机名。](http://network-tools.com)如果你得到类似 123-123-123-123.cox.net 的东西，那可能是一个家庭服务器。另一方面，如果你得到类似 corpweb-v101.prod.mesa1.secureserver.net 的东西，那么这就是 Godaddy。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T22:25:54.263

您还可以使用 whoishostingthis.com 等网站来确定主机。

# python - 在 python 中通过 DBus 获取 VPN 连接状态

> ID：11171436
> 
> 赞同：1
> 
> 时间：2012-06-23T17:13:30.267
> 
> 标签：python, linux, dbus

我正在尝试通过 Python 中的 DBus 获取 VPN 连接的状态。
这是我的代码：

```
name="testVPN"
proxy = dbus.SystemBus().get_object('org.freedesktop.NetworkManagerUserSettings', '/org/freedesktop/NetworkManagerSettings')
iface = dbus.Interface(proxy, 'org.freedesktop.NetworkManagerSettings')
connections = iface.ListConnections()
for connection in connections:
    proxy = dbus.SystemBus().get_object('org.freedesktop.NetworkManagerUserSettings', connection)
    iface = dbus.Interface(proxy, 'org.freedesktop.NetworkManagerSettings.Connection')
    con_settings = iface.GetSettings()['connection']
    if con_settings['type'] == 'vpn' and con_settings['id'] == name:
        state=dbus.Interface(proxy, 'org.freedesktop.DBus.Properties').Get('org.freedesktop.NetworkManager.VPN.Connection', 'VpnState') 
```

这会正确找到 VPN 连接，但在最后一行（尝试获取`VpnState`属性时）会引发此异常：

```
dbus.exceptions.DBusException: org.freedesktop.DBus.Error.AccessDenied: Rejected send message, 1 matched rules; type="method_call", sender=":1.169" (uid=0 pid=20580 comm="python) interface="org.freedesktop.DBus.Properties" member="Get" error name="(unset)" requested_reply=0 destination=":1.36" (uid=1000 pid=3457 comm="nm-applet)) 
```

问题是什么？

谢谢

# php - 在codeigniter 2 ++中设置单元格，标题导出为ex cel

> ID：11171437
> 
> 赞同：2
> 
> 时间：2012-06-23T17:13:56.047
> 
> 标签：php, codeigniter, export-to-excel

亲爱的大家

我是 PHP 新手，英语不好。

我有一个控制器

```
function download($id)
{
    $file_name = 'report1';
    $fieldnames ='Tanggal,Bulan,Block,Afdeling,Jumlah Panen Terakhir';
    $query = $this->main_model->get_report($id);
    to_excel($query,$file_name,$fieldnames,$judul);
} 
```

这是我的链接/锚

```
anchor("report/report/download/$id",'download', array('class' => 'excel')) 
```

这是我的帮手

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');
function to_excel($query, $filename='exceloutput', $fieldnames)
{
 $columnnames = explode(",", $fieldnames); //better looking column names instead
 $headers = ''; // just creating the var for field headers to append to below
 $data = ''; // just creating the var for field data to append to below

 $obj =& get_instance();

 $fields = $query->field_data();
 if ($query->num_rows() == 0) {
      echo '<p>The table appears to have no data.</p>';
 } else {
       $i = 0;
      foreach ($fields as $field) {

         $headers .= $columnnames[$i]."\t";
         $i++;
      }

      foreach ($query->result() as $row) {
           $line = '';
           foreach($row as $value) {                                            
                if ((!isset($value)) OR ($value == "")) {
                     $value = "\t";
                } else {
                     $value = str_replace('"', '""', $value);
                     $value = '"' . $value . '"' . "\t";
                }
                $value = utf8_decode($value);
                $line .= $value;
           }
           $data .= trim($line)."\n";
      }

      $data = str_replace("\r","",$data);

      header("Content-type: application/x-msdownload");
      header("Content-Disposition: attachment; filename=$filename.xls");
      echo "$headers\n$data";  
 }
 } ?> 
```

这是我的输出

![在此处输入图像描述](../Images/8e9d57507e6efaf5b4191926a92b641b.png)

问题是

'tanggal' mysql 类型是时间戳，但是当我拖动调整单元格大小时，值显示如下

![在此处输入图像描述](../Images/9e740501c4d28a10461ba68b1c0dd4a2.png)

那么如何在 to_excel_helper 中设置大一个单元格？

以及如何设置标题和边框？

所以它变成了这样

![在此处输入图像描述](../Images/cd3a885d381c4905adf662fa8351b650.png)

非常感谢您的关注

这部分让我从 1 周前开始感到压力

所以我需要你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:49:50.580

您只是输出 Excel 能够读取的制表符分隔文件。它不包含“真实”Excel 文件的所有功能。因此，您无法控制列宽。

如果您想更好地控制 Excel 格式，我建议您使用 PHPExcel ( [http://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/) ) 之类的库，它可以让您对格式、大小、颜色等进行大量控制。

PHPExcel 很容易集成到 CI 中。这里有一篇关于它的 wiki 文章：[https ://github.com/EllisLab/CodeIgniter/wiki/PHPExcel](https://github.com/EllisLab/CodeIgniter/wiki/PHPExcel)

# c# - 开始使用 C# 和 XAML 创建 Windows 8 Metro 应用程序

> ID：11171440
> 
> 赞同：8
> 
> 时间：2012-06-23T17:14:08.503
> 
> 标签：c#, windows, xaml, microsoft-metro

我正在寻找使用 C# 和 XAML 为 Windows 8 开发游戏，仅仅是因为我对 C# 和 XNA 4.0 有少量经验（我是否认为我需要从 XNA 转向 win8？）。

由于它是一个如此新鲜的话题，在亚马逊上快速搜索一本书来学习创建此类应用程序只产生了非常少的结果……其中大部分还没有评论。我只是想知道是否有人可以根据作者以前书名的质量为（某种）新手推荐一本书？

或者，任何好的网络资源？（我是学生，毕竟钱不多！）

很抱歉提出这样一个开放式问题......我只是在努力寻找从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:06:28.060

其他答案相对较好地涵盖了非游戏 Metro 风格的应用程序，我不再赘述。

关于 XNA 的话题：

在另行通知之前，XNA 被假定已死，因为它不支持他们正在为 Metro 应用程序推送的最新版本的 DirectX。这并不意味着您仍然不能在 XNA 中编写游戏，但用户必须在 Desktop 中运行它们，而不是在 Metro 中。（无赖）

*但...*

一切都没有丢失。有一个非常不错的 .NET 托管 DirectX API，称为[SharpDX](http://sharpdx.org/)。更好的（一旦完全出炉）是[ANX 框架](http://anxframework.codeplex.com/)，它旨在成为 XNA 的完全开源替代品。我认为他们还没有完成，但他们的目标是让您通过交换命名空间来翻译 XNA 标题。

侧边栏：ANX 在幕后使用 SharpDX。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T17:18:43.850

Charles Petzold 编写了一个新版本的 Programming Windows，在以前的版本中它是（现在仍然是！）针对 Win32 进行编码**的参考。**

第六[版](http://www.charlespetzold.com/blog/2012/05/Programming-Windows-6th-Edition-for-the-CPlusPlus-Programmer.html)：

> [重点] 为 Windows 8 编写 Metro 风格的应用程序

它现在[可以从 O'Reilly](http://shop.oreilly.com/product/0790145369079.do)以 20 美元的折扣价购买，而且从我目前所读到的内容看来相当不错！从现在到 11 月，它的价格会逐步上涨（详见 O'Reilly 网站）至 50 美元，所以如果可以的话，现在就值得一买——尤其是当你提到你是一名学生，因此缺乏资金 =)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T20:00:44.463

MonoGame 是现在支持 Windows 8 的 Microsoft XNA 4 框架的开源实现。使用 MonoGame，您可以将 XNA 游戏构建为 Metro 风格应用程序，并通过几个额外的步骤将您的游戏放入 Windows 8 商店。

[http://monogame.codeplex.com/](http://monogame.codeplex.com/)

我已经使用它几个星期了，并且有 2 个简单的游戏在运行，它们是 Windows Phone 应用程序的直接端口。

此外，如果您安装了 Windows 8，请前往商店查看 ARMED！通过 Sickhead 游戏。那是一个 MonoGame 应用程序。

我一直在使用来自 Git 的 MonoGame 源的 Sickhead 分支。开始的好地方。 [https://github.com/SickheadGames/MonoGame](https://github.com/SickheadGames/MonoGame)

-鲍勃

# java - Matcher.find() 如何工作

> ID：11171445
> 
> 赞同：17
> 
> 时间：2012-06-23T17:14:41.857
> 
> 标签：java, regex, matcher

我正在测试 Matcher 和 Pattern 类的一个小存根......请参阅下面的小存根..

```
package scjp2.escape.sequence.examples;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Sample_19 {

    public static void main(String a[]){
        String stream = "ab34ef";
        Pattern pattern = Pattern.compile("\\d*");

        //HERE * IS GREEDY QUANTIFIER THAT LOOKS FOR ZERO TO MANY COMBINATION THAT 
        //START WITH NUMBER 
        Matcher matcher = pattern.matcher(stream);

        while(matcher.find()){
            System.out.print(matcher.start()+matcher.group());
        }
    }

} 
```

这里...我们要比较的字符串是“ab34ef”。长度为 6。

不，让我们看看迭代......

* * *

## 迭代 NO matcher.start() matcher.group()

1 0 ""

2 1""

3 2 34

4 4 ""

5 5 ""

现在..let combine...matcher.start() + matcher.group().... 根据我们的计算，输出是：0123445

但是，存根生成 01234456。

我无法理解“6”是从哪里来的。字符串索引从零开始，所以这里的最大索引是 5。那么 6 是从哪里来的？

它迭代循环六次..如何？有什么建议吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-23T17:16:27.403

您的正则表达式可以匹配零个字符。最终匹配是出现在字符串末尾的零宽度字符串，在索引 5 处的字符之后。因此，此零宽度字符串的索引为 6 **。**

* * *

顺便说一句，如果您使用分隔符使输出更具可读性，您可能还会发现更容易理解发生了什么：

```
System.out.println(matcher.start()+ ": " + matcher.group()); 
```

结果：

```
0: 
1: 
2: 34
4: 
5: 
6: 
```

[ideone](http://ideone.com/hM4SE#)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-23T17:28:38.273

您的表达式使用`*`表示 0 个或更多数字，因此也可以不匹配任何数字。

以这种方式更改您的正则表达式

```
Pattern pattern = Pattern.compile("\\d+"); 
```

使用`+`意味着 1 个或多个。

# php - 如何检查日期是否在给定的日+月范围内？

> ID：11171447
> 
> 赞同：-1
> 
> 时间：2012-06-23T17:14:50.127
> 
> 标签：php

> **可能重复：**
> [如何检查日期是否在给定范围内？](https://stackoverflow.com/questions/976669/how-to-check-if-a-date-is-in-a-given-range)

将每年划分为多个时期，例如

```
from 11-28 to 01-20
from 01-21 to 02-16
from 02-17 to 03-15
from 03-16 to 05-04
from 05-05 to 07-25
from 07-26 to 10-10
from 10-11 to 11-27 
```

有些日子

```
$date1 = '06-09-1990';
$date2 = '05-03-1867';
$date3 = '02-29-1945';
$date4 = '06-24-2012';
$date5 = '12-25-2015';
$date6 = '07-15-2010'; 
```

如何检查一天是否在这些范围之一？

PS对不起我的英语

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T17:22:41.790

您可以使用这个小功能：

```
<?php
    $s_date = strtotime("2009-03-01 12:00");
    $e_date = strtotime("2009-03-03 14:00");
    $date = strtotime("2009-03-02 13:00");
    if($date > $s_date && $date < $e_date)
        print "Date is between start and end";
    else
        print "Date is outside start and end";
?> 
```

* * *

## 另一种方式

* * *

```
function isDateBetween($dt_start, $dt_check, $dt_end){
    if(strtotime($dt_check) > strtotime($dt_start) && strtotime($dt_check) < strtotime($dt_end))
        return true;
    return false;
}
isDateBetween("2004-01-01", "2004-01-02", "2004-01-03") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T17:22:41.190

PHP 中的日期值表示为 UNIX 时间戳，它们表示自 1970 年 1 月 1 日以来经过的秒数。

您可以使用`mktime`函数来创建日期（[http://php.net/manual/en/function.mktime.php](http://php.net/manual/en/function.mktime.php)）。将它们作为数字后，您可以轻松地比较它们。

```
$interval_start = mktime(0, 0, 0, 1, 0, 2000);
$interval_end = mktime(0, 0, 0, 1, 0, 2010);
$my_date = mktime(0, 0, 0, 1, 0, 2004);
if($my_date > $interval_start && $my_date < $interval_end) {
    // in the interval
} else {
    // not in the interval
} 
```

# xaml - 滚动到 ScrollViewer 末尾的最佳方式

> ID：11171456
> 
> 赞同：14
> 
> 时间：2012-06-23T17:15:58.783
> 
> 标签：xaml, scroll, windows-runtime

目前，当我添加新项目时，让我的代码自动滚动到最后的唯一方法是：

XAML：

```
<ScrollViewer x:Name="chatViewScroller" HorizontalAlignment="Left" Height="201" Margin="0,32,0,0" VerticalAlignment="Top" Width="475" Background="#7FFFFFFF">
    <StackPanel x:Name="chatViewContent" />
</ScrollViewer> 
```

代码：

```
 chatViewContent.Children.Add(
                    new TextBlock() {
                        Text = text,
                        FontSize = 18,
                        TextWrapping = Windows.UI.Xaml.TextWrapping.Wrap,
                        Margin = new Thickness(10, 3, 10, 0),
                        Foreground = new Windows.UI.Xaml.Media.SolidColorBrush(
                            isServerMessage ? Windows.UI.Colors.Purple : Windows.UI.Colors.Black)
                    });
                await Task.Delay(10);
                chatViewScroller.ScrollToVerticalOffset(chatViewScroller.ScrollableHeight); 
```

这是公认的做法吗？我必须等待一些随机的时间吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-20T07:28:43.803

使用 ActualHeight 对我不起作用（我还没有弄清楚为什么） - 但是像这样使用 ScrollableHeight 就可以了：

```
// adding item to ItemsControl...
// ...
_scrollViewer.UpdateLayout();
_scrollViewer.ScrollToVerticalOffset(_scrollViewer.ScrollableHeight); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-07-19T09:46:29.053

对于 Windows Phone 8.1，我使用这个：

```
MyScrollViewer.ChangeView(0.0f, double.MaxValue, 1.0f); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-21T17:11:05.390

在我看来，最好的选择是通过以下方式从 ScrollViewer 继承：

```
public partial class AutoScrollViewer
{        
    public AutoScrollViewer()
    {
        InitializeComponent();
        this.SizeChanged += (sender, args) => this.ScrollToBottom();
    }
} 
```

和 XAML

```
<ScrollViewer x:Class="AutoScrollViewer"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
</ScrollViewer> 
```

然后，您可以直接在 XAML 中使用新类，而无需额外的代码，这在您拥有“纯”MVVM 代码时尤其有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-16T16:16:03.047

除了 JavaScript 之外，没有随机异步永远不是任何语言的答案……它总是有那种“代码味道”，你知道吗？

执行此操作的正确方法是通过调用强制`ScrollViewer`同步测量的“刷新”以包括新添加的子级`ScrollViewer.Measure(Size)`

在您“重新测量”之后，这`ScrollableHeight`将是正确的值，您可以像往常一样使用它..

像这样：

```
 private void AddMessage(string text, Color color)
    {
        var message = new TextBlock
        {
            Text = text,
            FontSize = 18,
            TextWrapping = TextWrapping.Wrap,
            Margin = new Thickness(10, 3, 10, 0),
            Foreground = new SolidColorBrush(color),
        };

        chatViewContent.Children.Add(message);

        chatViewScroller.Measure(chatViewScroller.RenderSize);
        chatViewScroller.ScrollToVerticalOffset(chatViewScroller.ScrollableHeight);
    } 
```

`Size`我们在这里使用的是在`RenderSize`某些极端情况下在技术上可能是不正确的，但对于我们的目的来说它非常接近完美。您也可以在技术上使用任意大`Size`的`Measure(Size)`并获得相同的效果。任何最适合您的解决方案的方法，希望这会有所帮助-ck

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-09T21:46:40.597

如果您使用 .NET 3.0 或更高版本，则可以使用`ScrollViewer.ScrollToBottom()`.

MSDN 文档： http: [//msdn.microsoft.com/en-us/library/system.windows.controls.scrollviewer.scrolltobottom (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollviewer.scrolltobottom(v=vs.110).aspx)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-07-22T13:07:12.227

对于 WindowsPhone 通用应用程序，您可以使用：

```
 var scrollableHeight = ScrollViewer.ScrollableHeight;
        if (scrollableHeight > 0)
        {
           ScrollViewer.ScrollToVerticalOffset(scrollableHeight);
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-23T19:22:17.880

我使用了以下内容：

```
ScrollViewer viewer = GetScrollViewer();
if (viewer != null)
{
    viewer.ScrollToVerticalOffset(viewer.ActualHeight);
} 
```

另一种解决方案是将项目放入 a`ListBox`并使用[ScrollIntoView](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox.scrollintoview%28v=vs.95%29.aspx)方法

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-04T20:20:49.430

ScrollViewer.ScrollToVerticalOffset(ScrollViewer.ActualHeight) 应该可以工作，但是如果您的代码刚刚更新了滚动查看器的内容，您可能需要在滚动之前调用 ScrollViewer.UpdateLayout()，以便 ScrollViewer.ActualHeight 是最新的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-11-26T00:46:49.420

对于 Windows Phone 8.0，您可以使用

```
MyScrollViewer.ScrollToVerticalOffset(MyScrollViewer.ExtentHeight - MyScrollViewer.ViewportHeight); 
```

另请参阅[http://msdn.microsoft.com/en-us/library/windows/apps/system.windows.controls.scrollviewer.verticaloffset(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/system.windows.controls.scrollviewer.verticaloffset(v=vs.105).aspx)

# linux - 如何使用 git 切换到特定版本的 Linux 源代码？

> ID：11171457
> 
> 赞同：8
> 
> 时间：2012-06-23T17:16:06.213
> 
> 标签：linux, git, linux-kernel

具体来说，我想切换到内核版本 2.6.32.41 源代码。然而，在输出

`git tag -l`

它显示以下内容：

v2.6.32-rc2
v2.6.32-rc3
v2.6.32-rc4
v2.6.32-rc5
v2.6.32-
rc6 v2.6.32-rc7 v2.6.32-
rc8

其中哪一个是 2.6.32.41 linux 内核源？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T00:25:30.730

这些标签都不是 2.6.32.41 源。2.6.x.* 和 3.x.* 版本在“稳定”存储库中分别开发和维护：

`git://git.kernel.org/pub/scm/linux/kernel/git/stable/linux-stable.git`

有关 gitweb 界面，请参阅[https://git.kernel.org/?p=linux/kernel/git/stable/linux-stable.git](https://git.kernel.org/?p=linux/kernel/git/stable/linux-stable.git)。

# c# - 如何使用 Expression.Add 对 double 和 int 求和？

> ID：11171471
> 
> 赞同：3
> 
> 时间：2012-06-23T17:18:15.910
> 
> 标签：c#, .net, types, expression

我想对`Expression.Add`两种数据类型求和，这可能是 a `double`和 an `int`（或任何其他不匹配的对），如下所示：

```
var pLeft = Expression.Parameter(typeof(int), "left");
var pRight = Expression.Parameter(typeof(double), "right");

var addition = Expression.Add(pLeft, pRight);
var lambda = Expression.Lambda<Func<int, double, double>>(addition, pLeft, pRight).Compile();

var res = method(1, 0.5); 
```

然而，我很快被告知：

```
The binary operator Add is not defined for the types 'System.Int32' and 'System.Double'. 
```

很明显，`+`并不是为每对可能的数字都定义了运算符，但是当我编写类似`var x = 1 + 0.5`. 有没有一种方法可以使用表达式来模拟这种转换，或者有没有一种方法可以使用表达式来对这些类型求和？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T17:21:55.627

用于`Expression.Convert`将参数之一转换为相反参数的类型。

表达式树对隐式转换应该如何工作没有“**意见**”，因为它们不是特定于语言的。例如，C# 的隐式转换规则与 VB.NET 不同。表达式树采取中立立场，需要显式转换。

例如，面向性能的语言可能决定将 double 隐式转换为 int，因为默认情况下它更喜欢性能。在这种情况下，C# 更喜欢精确。表达式树一般不能决定这个问题。

# security - 使用 Puppet 处理敏感信息

> ID：11171472
> 
> 赞同：18
> 
> 时间：2012-06-23T17:18:16.030
> 
> 标签：security, puppet

使用 puppet 存储和处理敏感信息并将其安全地分发到您的节点的最佳方法是什么？

我使用的版本是2.7。

一个例子是数据库密码。您的应用程序服务器上需要纯文本密码。

如何在不将它们留在木偶脚本中的情况下存储它们？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-24T18:17:33.593

使用 Hiera 进行外部数据查找并通过 eyaml 或 GPG 加密该数据是一个好的开始。

[https://docs.puppet.com/hiera/](https://docs.puppet.com/hiera/)

[https://puppet.com/blog/encrypt-your-data-using-hiera-eyaml](https://puppet.com/blog/encrypt-your-data-using-hiera-eyaml)

[http://leebriggs.co.uk/blog/2016/11/15/using-hiera-eyaml-gpg.html](http://leebriggs.co.uk/blog/2016/11/15/using-hiera-eyaml-gpg.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-24T15:18:04.590

另一种选择，但我没有亲自尝试过。 [https://forge.puppetlabs.com/sshipway/ss](https://forge.puppetlabs.com/sshipway/ss)

当然，这确实需要将数据放入安全保险库，但这似乎比在 Hiera 中存储敏感数据更安全。

# java - 移植 Java：C++ --> 类类型

> ID：11171476
> 
> 赞同：2
> 
> 时间：2012-06-23T17:18:48.027
> 
> 标签：java, c++, hash, map, porting

我正在考虑移植 java 库[Artemis](http://gamadu.com/artemis/)。一个实体系统框架。我还没有开始。相反，我一直在分析 java 代码如何组合在一起的内部工作。我知道有一半的[CPP 端口](http://www.gamedev.net/blog/1390/entry-2254064-c-port-of-artemis-entity-component-system-framework-in-progress/)。

我查看了这两个代码并注意到 java 代码更优雅地放置了某些东西。主要有以下几点：

```
package com.artemis;

import java.util.HashMap;

public class ComponentTypeManager {
    private static HashMap<Class<? extends Component>, ComponentType> componentTypes = new HashMap<Class<? extends Component>, ComponentType>();

    public static final ComponentType getTypeFor(Class<? extends Component> c){
        ComponentType type = componentTypes.get(c);

        if(type == null){
            type = new ComponentType();
            componentTypes.put(c, type);
        }

        return type;
    }

    public static long getBit(Class<? extends Component> c){
        return getTypeFor(c).getBit();
    }

    public static int getId(Class<? extends Component> c){
        return getTypeFor(c).getId();
    }
} 
```

和componentType“对象”

```
package com.artemis;

public class ComponentType {
    private static long nextBit = 1;
    private static int nextId = 0;

    private long bit;
    private int id;

    public ComponentType() {
        init();
    }

    private void init() {
        bit = nextBit;
        nextBit = nextBit << 1;
        id = nextId++;
    }

    public long getBit() {
        return bit;
    }

    public int getId() {
        return id;
    }
} 
```

基本上 componentTypeManager 所做的是将 componentType 映射到类类型。这使它在添加新组件时变得动态。

C++移植方案如下：

```
#ifndef __COMPONENT_TYPE_H__
#define __COMPONENT_TYPE_H__

namespace SGF
{
    enum ComponentType 
    {
        CT_TRANSFORM = 0,
        CT_HEALTH,
        CT_RENDERABLE,
        CT_RIGID_BODY,
        CT_JOINT,

        CT_LAST
    };

    // Component type bits. Used by the entity systems to determine if an entity is compatible.
    const unsigned int CT_TRANSFORM_BIT  = 1 << CT_TRANSFORM;
    const unsigned int CT_HEALTH_BIT     = 1 << CT_HEALTH;
    const unsigned int CT_RENDERABLE_BIT = 1 << CT_RENDERABLE;
    const unsigned int CT_RIGID_BODY_BIT = 1 << CT_RIGID_BODY;
    const unsigned int CT_JOINT_BIT      = 1 << CT_JOINT;
};

#endif 
```

这里 ComponentManager 完全被忽略了。而是使用枚举。我的问题是您必须将新的组件类型添加到枚举器和常量作为“类型”标识符。java 框架允许你传递一个组件类类型来识别它的 id。

我的问题是，如果没有为每个新组件硬编码枚举器类型，我将如何获得类似的效果，即传递一个类型来映射它的 id，就像 Java 代码一样？我知道 C++ 不支持类类型作为参数。所以这对我来说是相当令人难以置信的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T17:36:56.140

只要您不打算在给定组件类型的情况下实例化组件，并假设`Component`具有一个或多个`virtual`功能，使用[*RTTI*](http://en.wikipedia.org/wiki/Run-time_type_information)就足以满足您的目的。您可以使用[`unordered_map`](http://www.cplusplus.com/reference/stl/unordered_map/)代替`HashMap`，并将 替换`Class<C>`为`type_info`。

我不确定的一件事是如何`ComponentType`知道要返回的确切位：`ComponentType`当在地图中找不到一个时，代码在没有参数的情况下实例化，但假设不同的实例将返回不同的设置和未设置位模式。我认为这是因为您的哈希映射已预先填充已知组件类型。

# javascript - Twitter Bootstrap，在一个 div 中显示所有弹出框

> ID：11171478
> 
> 赞同：5
> 
> 时间：2012-06-23T17:19:01.820
> 
> 标签：javascript, jquery, html, twitter-bootstrap, popover

我尝试使用 Twitter Bootstrap 2.0 和它的 popover-plugin 实现以下目标，但几个小时后，我仍然无法弄清楚。

比方说，在我页面的左下角，我有一张显示一只鸟的照片。这只鸟应该“说话”每个弹出窗口，例如注册表的那些，应该出现在鸟的顶部。这可能吗？

[为了更好地理解，我在这里](http://nie-wieder.net/sites/phil/)创建了一个测试站点。如果您将鼠标悬停在注册字段上，则会出现弹出框。我希望它们出现在左下角的 bird-img 上，但我不知道如何实现。如果你能帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T17:44:54.110

**方法一：**

jQuery 悬停处理程序采用“in”和“out”方法，在您的示例中，您只分配“in”方法来显示弹出窗口。这很好，但不要将它附加到“this”，您应该将它附加到您的鸟图像。确保也将弹出窗口的触发器更改为手动。然后在悬停的“out”方法中，只需要隐藏弹出框即可。

```
$('#registerHere input').hover(function()
{
    $('#birdie').popover({
            "trigger": 'manual',
            "placement":'top',
                }).popover('show');
},
function()
{
    $('#birdie').popover('hide');
}); 
```

**方法二：**

或者，保留您所拥有的，但使用提供的“选择器”选项，并将您的鸟图像作为参数，这应该会触发您的控件的弹出窗口，但将其委托给您的鸟图像。

> 选择器：如果提供了选择器，工具提示对象将被委托给指定的目标

```
$('#registerHere input').hover(function()
{
    $('#birdie').popover({
            "selector": "#birdie",
            "placement":'top',
                }).popover('show');
}); 
```

编辑：添加了示例代码。我没有机会对此进行测试，因此可能存在一些语法错误或其他问题，但总体思路就在那里。

# jquery - jQuery Datepicker 传递 01/01/0001 12:00:00 AM

> ID：11171483
> 
> 赞同：2
> 
> 时间：2012-06-23T17:19:50.427
> 
> 标签：jquery, .net, asp.net-mvc, jquery-ui, jquery-ui-datepicker

我在这样的视图模型中有一个 DateOfBirth 字段，

```
[Required]
[DataType(DataType.Date)]
[Display(Name = "Date Of Birth")]
public DateTime DateOfBirth { get; set; } 
```

和有这个的观点，

```
<li>
    @Html.LabelFor(m => m.DateOfBirth)
    @Html.TextBoxFor(m => m.DateOfBirth)
</li> 
```

和一些 jQuery 来添加日期选择器，

```
<script type="text/javascript">
    $('#DateOfBirth').datepicker({
        yearRange: '1906:1994',
        changeMonth: true,
        changeYear: true,
        showAnim: 'bounce'
    });
</script> 
```

如果我选择一个日期，例如 1981 年 7 月 19 日，1981 年 7 月 19 日，它会将值作为 01/01/0001 12:00:00 AM 传递给控制器​​，我收到错误“值 '07/19/1981 ' 对出生日期无效。” 我注意到，如果当天的值是 12 或更少，它会通过，但如果一天高于 12，它将失败。所以我尝试将日期选择器中的格式更改为

```
dateFormat: 'dd/mm/yy' 
```

然后当我提交表单时，它会给出错误“出生日期字段必须是日期”。

我需要做什么来解决这个问题？如果可能的话，我希望能够将日期显示为月/日/年。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T17:24:18.043

尝试像这样使用日期时间选择器：

```
$("#StartDate").datetimepicker({ timeFormat: 'hh:mm:ss', dateFormat: 'dd.mm.yy' }); 
```

您可以从此[链接](http://trentrichardson.com/examples/timepicker/)中包含时间选择器。我认为您提供的格式是错误的，请检查 MSDN 以获取正确的日期时间格式字符串，但在我的情况下有效。您还可以向日期选择器添加正确的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:44:13.200

而不是提到yearRange，尝试minDate，maxDate之类

```
minDate: new Date(1906,0,1),
maxDate: new Date(1994,11,31) 
```

# c++ - 如何通过 C++ boost::serialization 执行 std::map 的部分反序列化

> ID：11171484
> 
> 赞同：2
> 
> 时间：2012-06-23T17:20:08.170
> 
> 标签：c++, serialization, boost

我有一个高度格式化的文件，其中包含我经常使用的大量数据，因此我将其存储到 std::map 并使用 boost::serialization 库对其进行序列化。序列化代码如下所示：

```
boost::iostreams::filtering_ostream ofs {};
ofs.push (boost::iostreams::zlib_compressor ());
ofs.push (boost::iostreams::file_sink (file_name));
boost::archive::binary_oarchive oa {ofs};
oa << my_map; 
```

但每次我可能只需要地图的一部分，比如某个键值对。所以我想知道我是否可以从文件中部分反序列化地图并只检索我指定的对？这样我就不必将整个文件读入内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T18:22:47.993

您可以为数据创建索引，尽管在存在压缩的情况下使用起来有点困难。如果您的数据文件未压缩，并且说每条记录都在一行上，那么您可以创建一个索引，将每行的连续*偏移*存储在固定宽度的记录中，比如无符号的 64 位数字。

要定位第 5112 行，您需要打开索引，查找`5112 * 8`并读取两个`uint64_t`s，例如`a`和`b`。然后你打开你的数据文件，寻找`a`并读取`b - a`字节，这是你的记录。

如果数据被压缩，您将不得不查看您的压缩库，看看它是否允许您仅部分解压缩包含 bytes 的文件区域`[a, b)`。

# java - JavaCC 中的 Epsilon 定义

> ID：11171486
> 
> 赞同：2
> 
> 时间：2012-06-23T17:20:46.423
> 
> 标签：java, compiler-construction, javacc

如何在 JavaCC 中定义 Epsilon？我正在尝试类似的东西

```
< EPSILON: ""> 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-26T20:54:50.857

由于我也在寻找一种使用空词*epsilon*的方法，所以我想出了以下方法。

我只是使用了一个空的生产规则，例如：

```
void Empty () : { } { System.out.prntln("epsilon"); } 
```

希望它有效 - 至少现在看起来如此......

**附录：**

它工作得很好:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T22:32:10.380

如果令牌管理器随后切换到在返回到匹配空字符串的状态之前将使用至少一个字符的词法状态，则您可以定义一个令牌以匹配空字符串。所以：

```
TOKEN : {
    < EMPTY : "" >
    : MATCH_NON_EMPTY // change state, or infinite matches of the empty string could result
}

<MATCH_NON_EMPTY>
TOKEN : {
    < NON_EMPTY : ~[] >
}

void Start() : { } {
    <EMPTY> <NON_EMPTY>
} 
```

考虑到任何单字符输入，这将正常工作。

但是，我应该提一个警告。似乎匹配的被认为比空字符串的匹配“更长”，因此在匹配时，如果没有一些词法动作魔术，`EOF`空字符串就不能立即匹配。`EOF``EOF`

# python - Scrapy 论坛抓取，项目管道和请求处理器之间的同步策略

> ID：11171489
> 
> 赞同：2
> 
> 时间：2012-06-23T17:21:08.717
> 
> 标签：python, signals, scrapy, web-crawler, sequencing

**免责声明**这个问题很难直接回答，需要对scrapy和程序排序有很好的了解才能回答。我很难将问题缩小为更容易直接回答的问题。

AFAIK 无法从项目管道处理程序返回请求。我正在尝试解析论坛中某个类别的所有帖子。我遍历论坛的策略如下：

1.  建立一个类别中所有页面的列表，并将它们发送给下载器进行检索。
2.  检索每个页面中的所有主题并将它们发送到项目管道。
3.  等待所有页面项目被处理（插入到关系数据库中），然后开始遍历每个主题。

我无法弄清楚如何对第 3 步进行排序。我正在使用以下两个对象（最后列出）来协助排序逻辑。`category::process_page`是用于遍历主题页面的请求处理程序。

在类别类中：

阶段 1 的结束表示已收到所有主题页面。第 2 阶段的结束意味着项目管道已经处理了所有主题的基础工作。

主题类，代表特定主题列表页面中的所有主题，阶段 1 的结束表示页面中的所有主题已发送到数据库。一旦页面中的每个主题都被添加到数据库中，页面就会从类别中删除 - 一旦所有页面都完成，爬虫应该继续下载所有主题。

那么，如何通过在项目管道中运行的逻辑阻止下载器，以便它可以等待类别阶段 2 结束？是否有一些机器可以解决这个问题？也许我可以从项目管道中重新启动下载器逻辑？

可能有很多方法可以做到这一点，但我是 Python 新手和 C++/C 系统程序员。

**注意**我最初的设计是在 3-4 种不同的蜘蛛中完成的。第一个检索论坛层次结构，第二个下载所有主题，第三个检索所有帖子，第四个标记需要更新的主题。但是，这个问题肯定有更自然的解决方案，我想将最后 3 只蜘蛛合二为一。

我会接受一个答案，即勺子提供逻辑以启动蜘蛛而不诉诸 bash（能够从 gui 驱动蜘蛛会很好），然后我可以构建一个驱动程序并坚持我的初始设计。

```
###############################################################################
class TopicPageItemBundle:
  def __init__(self,topic_page_url,category_item_bundle):
    self.url = topic_page_url
    self.topics = set()
    self.topics_phase1 = set()
    self.category_item_bundle = category_item_bundle

  def add_topic(self, topic_url):
    self.topics.add(topic_url)
    self.topics_phase1.add(topic_url)

  def topic_phase1_done(self, topic_url):
    self.topics.remove(topic_url)
    if len(self.topics_phase1) == 0:
      return true
    else:
      return false
###############################################################################
class CategoryItemBundle:
  def __init__(self,forum_id):
    self.topic_pages = {}
    self.topic_pages_phase1 = set()
    self.forum_id = forum_id

  def add_topic_page(self,topic_page_url):
    tpib = TopicPageItemBundle(topic_page_url,self)
    self.topic_pages[topic_page_url] = tpib 
    self.topic_pages_phase1.add(topic_page_url)
    self.topic_pages_phase2.add(topic_page_url)

  def process_page(self, response):
    return_items = []
    tp = TopicPage(response,self)
    pagenav = tp.nav()
    log.msg("received " + pagenav.make_nav_info(), log.INFO)

    page_bundle = self.topic_pages[response.url]

    posts = tp.extract_posts(self.forum_id)
    for post in posts:
      if post != None:
        page_bundle.add_topic(post["url"])
        post["page_topic_bundle"] = page_bundle
    return return_items

  # phase 1 represents finishing the retrieval of all topic pages in a forum
  def topic_page_phase1_done(self, topic_page_url):
    self.topic_pages_phase1.remove(topic_page_url)
    if len(self.topic_pages_phase1) == 0:
      return true
    else:
      return false

  def topic_page_phase2_done(self,topic_page_url)
    self.topic_pages_phase2.remove(topic_page_url)
    if len(self.topic_pages_phase2) == 0:
      return true
    else:
      return true
############################################################################### 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T04:01:30.637

只有在获得所有主题的列表并将它们保存到数据库后才开始抓取每个主题，有什么原因吗？

因为我的scrapy流程通常是这样的：获取包含主题列表的页面；查找每个主题的链接，并为每个主题生成一个请求，并带有用于抓取主题的回调；找到指向列表下一页的链接并为相同的回调产生一个回调；等等。

AFAIK，如果您首先从回调中产生一个主题项目然后是一个请求，您的管道将立即使用产生的项目执行，因为在 scrapy 中，一切都是同步的，只有资源是使用扭曲的异步下载的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:44:01.723

解决该问题的一种方法是将项目管道中用于主题处理的代码合并到请求处理程序中。本质上消除了项目管道和下载器之间的鸿沟，这样你就只有一个阶段，这个阶段表示所有主题都已插入数据库，没有同步。

然而，这似乎有点不自然，因为你绕过了scrapy中的“事情应该完成的方式”。当您开始为帖子抓取主题时，您可以继续使用项目管道，因为这不需要同步。

# php - 使用标题重定向页面

> ID：11171493
> 
> 赞同：0
> 
> 时间：2012-06-23T17:21:32.147
> 
> 标签：php, html, header

我知道如何使用标题重定向页面。问题是，当我使用此标头重定向时，它会将页面滚动到顶部。现在让我清除它。

我在一个页面上有一个表单，它对 sample.php 有一个操作。sample.php 重定向到表单所在的同一页面。但它会将页面带到顶部。我的意思是它滚动到顶部。在重定向之前，我需要它位于滚动按钮较早的位置。有没有可能做这件事。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T17:25:21.103

可能，通过使用 JavaScript，但定义锚点并将表单指向那里会更容易。例如，`<form action="sample.php#scrollhere" method="post" id="scrollhere">`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:25:00.307

为了滚动到`<div id="here">`或重定向到`<form id="here">`：`sample.php`

```
http://www.website.com/sample.php#here 
```

# oop - 如何设计索引表？

> ID：11171496
> 
> 赞同：3
> 
> 时间：2012-06-23T17:22:03.567
> 
> 标签：oop, architecture

我正在尝试设计一个带有索引的数据库表的内存模拟。我已经实现了一个简洁的 DSL 来查询看起来像这样的表

```
table.select do
  age > 44
  name == "Adam"
end 
```

并产生一堆`Condition`类的实例，比如`EqCondition`，`GteCondition`等等。嗯，这很容易。`Table`检查这些条件并选择适当的索引来执行查询。我坚持的是应该`Index#select`接受什么样的参数？如果它接受与 Table 的 select 方法相同的参数，它会执行两次相同的工作。假设我们需要选择年龄大于 25 岁的所有人。首先，Table 类确定 (age, name) 上有一个可以使用的索引。然后，索引应该确定这是一个仅涉及部分键的范围查询并相应地执行它。

我在询问有关如何正确设计它的一些想法（也许是在真实数据库中如何完成的一些更简单的版本）？

PS。这是Ruby，但我认为它不相关。在 Java/C# 中，它看起来像`table.select(new GtCondition("age", 44), new EqCondition("name", "Adam"))`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T01:21:31.470

考虑到 DBMS 上索引的目的是：

*   减少IO
*   优化连接
*   并作为副作用：帮助执行一些约束（如 PK/FK）

当您处理内存中的所有数据时，有时只需进行线性扫描就足够了:)

如果您有疑问，请使用分析器……您会发现内存中包含 1000 个元素的集合非常小。如果您的代码没有任何 JOIN，则使用简单`collection.filter(condition)`的可能就足够了。

但它如何在数据库上工作？这是一个粗略的想法：

*   首先，SELECT 表达式被转换为“规范树”。例如`SELECT A.NAME,B.SOMETHING FROM A, B WHERE A.NAME=B.NAME AND B.OTHER > 10`可以表示为：

    ```
    PROJECT(A.NAME, B.SOMETHING)
               |
    FILTER(A.NAME=B.NAME, B.OTHER>10)
               |
        CARTESIAN PRODUCT
         |              |
    PROJECT(A.NAME)     PROJECT(B.OTHER,B.SOMETHING) 
    ```

*   从那个表达式树中，有一些代数规则可以应用。目标是避免笛卡尔积，因为效率很低：

    ```
    PROJECT(A.NAME, B.SOMETHING)
               |
        EQ-JOIN A,B USING NAME
         |              |
    PROJECT(A.NAME)     FILTER B.OTHER>10     
                        |
           PROJECT(B.OTHER,B.SOMETHING) 
    ```

*   DBMS 引擎分析树和数据库的元数据（如索引类型、记录数），并更改树以优化它（即查询计划）。例如，如果 B 按 OTHER 排序，最好先做 FILTER：

    ```
    PROJECT(A.NAME, B.SOMETHING)
               |
        EQ-JOIN A,B USING NAME (NESTED LOOP JOIN)
         |              |
     PROJECT(A.NAME)    PROJECT(B.OTHER,B.SOMETHING)
                        |
                      FILTER B.OTHER>10 (UNSING INDEX ON OTHER) 
    ```

*   但是如果你这样做，并且你在内存中有 B 的缓冲区，那么你可能会丢失索引信息并且你不能再使用索引（并且连接的唯一选择是使用嵌套循环）。所以引擎可以检测到，并选择更好的计划，也许：

    ```
    PROJECT(A.NAME, B.SOMETHING)
               |
         FILTER B.OTHER>10
               |
        EQ-JOIN A,B USING NAME (HASH INDEX EQ-JOIN)
         |              |
     PROJECT(A.NAME)    PROJECT(B.OTHER,B.SOMETHING) 
    ```

一旦计划就绪。它就像一个程序：引擎只是盲目地跟随它。

对于内存引擎，您如何使用它？您可以检测 EQUI JOINS，并将“计划”转换为使用哈希表。也许您可以使用平衡树来实现其他类型的索引，但可能并没有太大帮助：内存中的 O(n) 算法很好，O(nxm) 顺序是您必须避免的，这意味着避免笛卡尔积。

您可以这样做的启发式方法是：

*   检测所有相等的过滤器（即 name=="Adam"），如果您的表有该字段的哈希索引...首先使用它，例如：`table.findUsingHash('name', 'Adam')`。

*   然后只需扫描并过滤结果（即年龄> 44）：`filter(table.findUsingHash('name', 'Adam'), function (e) { return e.age > 44 })`

这个想法是首先做最具选择性的索引，所以 O(n) 扫描有一个小的 n。

**注意：**我很久没有做这种 DBMS 的东西了。所以我的树形图可能包含一些错误......请参阅 DBMS 书籍（[如此](http://pages.cs.wisc.edu/~dbbook/)）以获得更好的资源。

# mysql - 获取按日期分组的最多访问者

> ID：11171503
> 
> 赞同：1
> 
> 时间：2012-06-23T17:22:50.457
> 
> 标签：mysql, group-by

我想对数据库中的每个日期进行分组，并获得最高数量的数据以在网站上显示。我曾尝试使用此 SQL；`SELECT COUNT(date_visited) FROM visitors GROUP BY date_visited`但它只显示`1`。

数据库如下所示：

```
CREATE TABLE IF NOT EXISTS `visitors` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `ipaddress` text NOT NULL,
  `page` text NOT NULL,
  `page_get` text NOT NULL,
  `date_visited` datetime NOT NULL,
  `date_lastactive` datetime NOT NULL,
  `date_revisited` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
) 
```

我怎么解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T17:24:42.817

Andomar 的回答是正确的，您是按日期时间分组，而不仅仅是按日期分组。

此外，您似乎正在尝试查找表中最常出现的日期。为此，您可以尝试以下操作：

```
SELECT DATE(date_visited)
FROM visitors
GROUP BY DATE(date_visited)
ORDER BY COUNT(*) DESC
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T17:24:34.410

如果您在`datetime`列上进行分组，您通常会为每个时间点获得一个组。要按天分组，您可以`datetime`转换为`date`：

```
select  date(date_visited)
,       count(*) 
from    visitors 
group by
        date(date_visited)
order by
        count(*) desc
limit   1 
```

# php - 使用 php 脚本的梨邮件刚刚停止

> ID：11171504
> 
> 赞同：1
> 
> 时间：2012-06-23T17:22:53.663
> 
> 标签：php, email, pear

我一直在尝试使用 pear 和 php 脚本发送邮件。我已经搜索了一天多，还没有找到我的问题。当我在网站上运行此代码时，没有任何反应。它快速加载然后停止。我运行了一些 echo 命令，发现代码特别停在：

```
$mail = $smtp->send($to, $headers, $body); 
```

就是这样。没有其他事情发生。我没有收到任何错误输入或任何东西，我只是看到我的回声发生在此之前，而在它之后没有回声。我已经安装了梨，以及梨邮件。我“认为”我正确安装了它们，因为我可以在任何地方的命令行中输入“pear”，它会调出菜单。我已经通过路由器和防火墙打开了端口 465，tcp。我在一台windows xp机器上。我不知道错误日志将在哪里查看是否发生了任何不良情况。我的服务器是 apache 2.2，托管在这个 windows 盒子上。

```
 <?php

 require_once "Mail.php";

 $from = "user1@gmail.com";
 $to = "user2@yahoo.com";
 $subject = "Hi!";
 $body = "Hi,\n\nHow are you?";

 $server = "ssl://smtp.gmail.com";
 $username = "user1@gmail.com";
 $password = "pass";

 $headers = array (
   "From" => $from,
   "To" => $to,
   "Subject" => $subject);
 $smtp = Mail::factory("smtp",
   array ("host" => $server,
         "port" => 465,
         "auth" => true,
         "username" => $username,
         "password" => $password));
 $mail = $smtp->send($to, $headers, $body);
 if (PEAR::isError($mail)) {
   echo("<p>" . $mail->getMessage() . "</p>");
  } else {
   echo("<p>Message successfully sent!</p>");
  }
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T04:22:13.437

真喜欢这些问题如何花费 10 个小时的工作，而且如此简单。

因此，当我配置 PEAR 时，我做得正确。我安装了包 mail、mail_mime 和 net_socket。我*试图*安装 net_smtp，但它给了我一个随机错误“没有可用于包 pear 的版本......”。我认为这意味着该软件包已安装，我无法用它做任何其他事情。我不知道这个东西到底是怎么被窃听的，但实际上我的“C:\Documents and Settings\user\Local Settings\Temp”文件夹中生成了一个 pear 文件夹。我删除了这个名为 pear 的文件夹，然后成功运行了“pear install net_smtp”。之后，我运行了我的 php 代码，一切都像魅力一样运行（能够通过 gmail smtp 服务器成功发送我的电子邮件）。

感谢您的帮助，我很欣慰知道这一点！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:43:05.297

您不需要端口转发，因为连接是出站的。可能您的 ISP 阻止了连接。在出站端口 25 上很常见，在 465 上不是很多，但它确实发生了。
无论如何，您的代码看起来不错。

# python - 在 django 中测试 ajax 文件上传时出现奇怪的错误

> ID：11171506
> 
> 赞同：1
> 
> 时间：2012-06-23T17:23:03.170
> 
> 标签：python, django, testing, file-upload

我正在尝试`ajax file upload in django`。我编码`javascript ,django view`如下。文件上传成功。然后我为视图编写了一个测试方法。执行测试时，文件成功上传到目标文件夹。但是，我得到了一些奇怪的错误.

在应用程序中执行 ajax 上传时不会发生此特定错误。它仅在执行测试时发生。

```
$(document).ready(function(){
        $(document).on('change', '#fileselect', function(e){
            e.preventDefault();
            uploadFile(e);
        });

function uploadFile(e){
    var form = $('#fileform').get(0);
    var formData = new FormData(form);
    var file = $('#fileselect').get(0).files[0];
    var xhr = new XMLHttpRequest();
    formData.append('file', file);
    xhr.open('POST', 'upload/', true);
    xhr.send(formData);

    xhr.onreadystatechange=function(){
       if (xhr.readyState==4 && xhr.status==200){
          var data = $.parseJSON(xhr.responseText);
          var uploadResult = data['message']

          if (uploadResult=='failure'){
             displayErrorMessage('failed to upload');
          }else if (uploadResult=='success'){
          }
       }
    }
}
... 
```

django 视图

```
def ajax_upload(request):
    retvals = {}
    message="failure"
    if  (request.method == 'POST'):
        if request.FILES.has_key('file'):
            file = request.FILES['file']
            print 'file=',file
            with open(settings.uploadfolder+'/'+fname, 'wb+') as dest:
                for chunk in file.chunks():
                    dest.write(chunk)
            message="success"
    retvals['message']= message
    serialized = json.dumps(retvals)
    print 'serialized=',serialized
    if message == "success":
        print 'success'
        return HttpResponse(serialized, mimetype="application/json")
    else:
        return HttpResponseServerError(serialized, mimetype="application/json") 
```

来自 urls.py 文件的片段

网址.py

```
...
url(r'^upload/$', 'myapp.views.ajax_upload',name='ajax_upload'),
... 
```

最后，这是测试方法

```
class UploadTest(TestCase):
    def setUp(self):
        super(UploadTest,self).setUp()
        self.client.login(username='me',password='mypass')

    def test_upload(self):
        fname = os.path.join(settings.testfolder,'mydoc.doc')
        with open(fname) as fp:
            resp = self.client.post(self.client.post(reverse('ajax_upload'),{'file':fp}, HTTP_X_REQUESTED_WITH='XMLHttpRequest')) 
```

如您所见，我在视图代码中放置了一些打印语句，它们显示`request.FILES['file']`具有正确的值（即`mydoc.doc`）并且上传成功（我可以看到文件复制到 dest 文件夹）。

现在这里是显示错误消息的控制台输出

```
file= mydoc.doc
serialized= {"message": "success"}
 success
E
======================================================================
ERROR: test_upload (myapp.tests.UploadTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/me/dev/python/django/myapp/tests.py", line 143, in test_upload_file
    resp = self.client.post(self.client.post(reverse('ajax_upload'),{'file':fp}, HTTP_X_REQUESTED_WITH='XMLHttpRequest'))
  File "/home/me/Django-1.4/django/test/client.py", line 449, in post
    response = super(Client, self).post(path, data=data, content_type=content_type, **extra)
  File "/home/me/Django-1.4/django/test/client.py", line 252, in post
    parsed = urlparse(path)
  File "/usr/lib/python2.6/urlparse.py", line 108, in urlparse
    tuple = urlsplit(url, scheme, allow_fragments)
  File "/usr/lib/python2.6/urlparse.py", line 147, in urlsplit
    i = url.find(':')
AttributeError: 'HttpResponse' object has no attribute 'find'

----------------------------------------------------------------------
Ran 1 test in 0.200s

FAILED (errors=1) 
```

我无法弄清楚为什么会发生这种情况..有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T18:36:53.480

```
resp = self.client.post(self.client.post(...)) 
```

别担心，每个人都会遇到:)

# php - 试图获取非对象错误的属性

> ID：11171511
> 
> 赞同：1
> 
> 时间：2012-06-23T17:24:08.467
> 
> 标签：php, mysqli

我需要获取某个查询返回的行数，但它让我出现了这个错误

> 试图在第 18 行的 C:\xampp\htdocs\sample\includes\CheckUsername.php 中获取非对象的属性

这是我的代码：

```
 <?php
        class Db_CheckUsername{
            protected $_conn;
            protected $_username;
            protected $_errors = array();

            public function __construct($username,$conn){
                $this->_username = $username;
                $this->_conn = $conn;
            }

            public function isUsernameAvailable(){
                $sql = "SELECT ";
                $sql .= "FROM accounts ";
                $sql .= "WHERE username = {$this->_username}";

                $result = $this->_conn->query($sql);
                $numRows = $result->num_rows;

                if($numRows == 0){
                    return true;
                }else{
                    return false;
                }
            }
        }
    ?> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T17:27:51.040

```
SELECT FROM accounts 
```

可能是无效的。你可能想要`SELECT * FROM`或`SELECT 1 FROM`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T17:30:55.860

我不会给你解决方案，因为我认为你需要培养一些基本的故障排除技能。

*   **检查您的数据。**包含哪些数据`$result`？检查[var_dump](http://php.net/var_dump)。
*   **你的查询正确吗？**打印查询以查看它。将确切的查询复制并粘贴到 SQL 提示符中以查看它是否正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T17:28:45.477

您没有检查查询中的错误。如果发生错误，`$result`将是假的，情况正是如此。您的查询中有语法错误。

# java - 如何使用多线程在 Canvas 上绘图？

> ID：11171512
> 
> 赞同：0
> 
> 时间：2012-06-23T17:24:15.343
> 
> 标签：java, android

我一直在开发绘图应用程序，它有以下代码：

```
public class PainterView extends View implements DrawingListener {

private Context context;
private Painter painter;
private Bitmap background;
private Bitmap bitmap;
private Paint bitmapPaint;
private Path path;
private Paint paint;

private float x;
private float y;

public PainterView(Context context, Painter painter) {

    super(context);
    this.context = context;
    this.painter = painter;
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
}

@Override
protected void onDraw(Canvas canvas) {
    if (bitmap != null) {
        canvas.drawBitmap(background, 0, 0, bitmapPaint);
        canvas.drawBitmap(bitmap, 0, 0, bitmapPaint);
        canvas.drawPath(path, paint);
    }
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    x = event.getX();
    y = event.getY();
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        painter.touchStart(x, y);
        break;
    case MotionEvent.ACTION_MOVE:
        painter.touchMove(x, y);
        break;
    case MotionEvent.ACTION_UP:
        painter.touchUp();
        break;
    }
    return true;
}

@Override
public void onPictureUpdate(Bitmap background, Bitmap bitmap, Paint bitmapPaint, Path path, Paint paint) {
    this.background=background;
    this.bitmap = bitmap;
    this.bitmapPaint = bitmapPaint;
    this.path = path;
    this.paint = paint;
    invalidate();
}

public void setPainter(Painter painter) {
    this.painter = painter;
}
} 
```

此代码捕获所有触摸事件，将此事件发送到模型，保存坐标并将位图发送到视图以进行绘图。

我正在使用这段代码，它运行良好，但我的客户告诉我，在某些地方绘图不流畅或缺失。所以我需要使用多线程。所以，请告诉我，我该怎么做？或者我可以使用其他方式提高生产力吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T17:35:08.063

这是我如何实现您想要的基本框架：

```
public class Drawing extends Activity implements OnTouchListener{

    DrawPanel dp;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        dp = new DrawPanel(this);
        dp.setOnTouchListener(this);
            // do other stuff you want
            setContentView(dp);
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        dp.pause();
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        dp.resume();
    }

    public class DrawPanel extends SurfaceView implements Runnable{

        Thread t = null;
        SurfaceHolder holder;
        boolean isItOk = false ;

        public DrawPanel(Context context) {
            super(context);
            // TODO Auto-generated constructor stub
            holder = getHolder();
        }

        @Override
        public void run() {
            // TODO Auto-generated method stub
            while( isItOk == true){

                if(!holder.getSurface().isValid()){
                    continue;
                }

                Canvas c = holder.lockCanvas();
                c.drawARGB(255, 0, 0, 0);
                onDraw(c);
                holder.unlockCanvasAndPost(c);
            }
        }

        @Override
        protected void onDraw(Canvas canvas) {
            // TODO Auto-generated method stub
            super.onDraw(canvas);
                    // do your drawing stuff here
            }
        }

        public void pause(){
            isItOk = false;
            while(true){
                try{
                    t.join();
                }catch(InterruptedException e){
                    e.printStackTrace();
                }
                break;
            }
            t = null;
        }

        public void resume(){
            isItOk = true;  
            t = new Thread(this);
            t.start();

        }

    }

    @Override
    public boolean onTouch(View v, MotionEvent me) {
    // capture your coordinates here         
    return true;

    }

} 
```

# javascript - 从 div 获取 img 元素的 src？

> ID：11171520
> 
> 赞同：13
> 
> 时间：2012-06-23T17:24:46.640
> 
> 标签：javascript, html

我想在 HTML 中获取 img 元素的 src。它看起来像这样：

```
<div class="image_wrapper" id="this_one">
        <img src="Images/something.jpg" />
</div> 
```

当我在img中输入一个ID时非常简单，并且很容易得到这个src。

但问题是当我从 div 元素中获取 img 的 src 时。

```
var someimage = document.getElementById('this_one').firstChild.getAttribute("src");
alert(someimage); 
```

我需要以字符串形式获取此 URL。但不值得。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-23T17:34:20.590

为什么不尝试这样的事情：

```
var someimage = document.getElementById('this_one');
var myimg = someimage.getElementsByTagName('img')[0];
var mysrc = myimg.src; 
```

有关使用 getElementsByTagName 的更多信息，您可能需要查看：

[https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByTagName](https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByTagName)

我在这里没有做一些错误检查，但我只是想展示你如何做到这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-04T08:44:43.117

甚至更简单：

```
document.getElementById('yourimageID').getElementsByTagName('img')[0].src 
```

为我工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T18:08:27.430

问题是您在`div`and`img`标记之间有空格字符。这就是为什么 div 的第一个元素不是图像而是文本——它没有**getAttribute**方法。

您可以删除空格并按原样使用您的 js：

```
<div class="image_wrapper" id="this_one"><img src="Images/something.jpg" /></div> 
```

它将起作用：

```
var someimage = document.getElementById('this_one').firstChild.getAttribute("src");
alert(someimage); 
```

* * *

`getElementsByTagName('img')`您可以使用以下方式从您的 div 中获取图像标签：

```
var divEl = document.getElementById('this_one'),
    src = divEl.getElementsByTagName('img')[0].src; 
```

以上将解决您的任务。

更多你可以从这里[Scripting Documents](http://books.google.com.ua/books?id=4RChxt67lvwC&lpg=PP1&dq=javascript%20the%20definitive%20guide&pg=PA361)获得，我建议你阅读这一章。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-06T13:51:43.650

我知道这个问题是针对已回答的 js 提出的，对于 jquery

```
var image = $('#this_one img')[0];       // $('#this_one img') this will return the img array. In order to get the first item use [0]
var imageSrc = image.src;
alert(imageSrc); 
```

它可能对在 jquery 中看起来相似的人有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-02T03:13:37.333

首先，不要使用 ，而是`element.firstChild`使用`element.children[0]`。此外，代替`element.getAttribute('src')`，使用`element.src`。

希望这可以帮助，

真棒01

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-02T06:35:09.000

如果我们可以通过 获取文档中的 img src，为什么还需要使用 jQuery `querySelector`？

试试这个：

```
document.querySelector('[src*="Images/something.jpg"]') 
```

PS：jQuery 有 94 kb 的缩小文件大小。除非有要求，否则请不要包含它。

# html - 如何根据主页设置自动表格宽度？

> ID：11171521
> 
> 赞同：2
> 
> 时间：2012-06-23T17:24:53.443
> 
> 标签：html, css, asp.net, html-table

我在 asp.net 上使用 consomcontrols.grid。我在页面上的 IE 上特别有宽度问题。我想根据主页设置gridview的自动宽度。

我的网格宽度可以大于页面宽度，我可以在页面 div 内使用滚动。

这是我的问题截图：（IE 9）（页面缩放时问题存在于所有浏览器中）

![在此处输入图像描述](../Images/e87d48ba319bc8380235156fe3ea9691.png)

我使用母版页：

```
<div style="width:90%">
     <asp:ContentPlaceHolder ID="MainContent" runat="server" />
</div> 
```

这是我的页面：

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
 <table border="0" cellpadding="0" cellspacing="0">
   <tr>
     <td><h2 style="padding-bottom:5px;">Stil Tanım Ekranı</h2></td>
      </tr>
        <tr>
          <td>

            <table border="0" cellpadding="2" cellspacing="1">
              <tr>
                 <td>
                     <div id="Div1" style="width:100%;overflow:auto;">
                         <table class="KolonClass" border="0" cellpadding="0" cellspacing="0" width="920px">
                    <tr>
                    <td>

 <cc1:xGrid ID="XGrid_StilKodlari" runat="server" 
             Width="100%"                                                                       
             AutoGenerateColumns="false"
             AllowPaging="false"
             AllowSorting="false"
             ShowHeaderWhenEmpty="true"
             GridLines="Both"
             BorderStyle="Solid"
             AscImage="~/Images/asc.png"
             DescImage="~/Images/desc.png"
             PagerSettings-Mode="NumericFirstLast"
             PagerSettings-PageButtonCount="5"                                                                                          
             EnableHeightResolver="false"                                                                           
             EnableRowClick="false"
             CssClass="Grdview"
             EmptyDataRowStyle-CssClass="Grdview_EmptyDataRowStyle"
             HeaderStyle-CssClass="Grdview_HeaderStyle"
             RowStyle-CssClass="Grdview_RowStyle"
             AlternatingRowStyle-CssClass="Grdview_AlternatingRowStyle"
             SelectedRowStyle-CssClass="Grdview_SelectedRowStyle"
             FooterStyle-CssClass="Grdview_FooterStyle"                                                                    
             OnRowDataBound="XGrid_StilKodlari_RowDataBound">
 <Columns>

    <asp:TemplateField HeaderText="Önizleme" HeaderStyle-HorizontalAlign="Center" ItemStyle-HorizontalAlign="Center" ItemStyle-Width="80px" >
     <ItemTemplate>
       <asp:Label CssClass="onizleme" runat="server" ID="lbl_onizleme" Text="F8 IMZA" Width="80px"/>
     </ItemTemplate>
                                                                        </asp:TemplateField>

   <asp:TemplateField  HeaderText="Stil Kodu" HeaderStyle-HorizontalAlign="Center" ItemStyle-HorizontalAlign="Center" ItemStyle-Width="80px" >
   <ItemTemplate>

     <asp:TextBox CssClass="stilKodu IsRequired" runat="server" ID="txt_StilKodu" Width="80px"  Font-Size="11px"/>
  </ItemTemplate>

  </asp:TemplateField>

 <asp:TemplateField HeaderText="Açıklama" HeaderStyle-HorizontalAlign="Center" ItemStyle-HorizontalAlign="Center" ItemStyle-Width="120px"  >
 <ItemTemplate>

    <asp:TextBox CssClass="aciklama IsRequired" runat="server" ID="txt_Aciklamasi" Width="120px"  Font-Size="11px"/>
    </ItemTemplate>
 </asp:TemplateField>

 <asp:TemplateField HeaderText="F.Büyüklüğü" HeaderStyle-HorizontalAlign="Center" ItemStyle-HorizontalAlign="Center" ItemStyle-Width="70px"  >
    <ItemTemplate>

     <asp:TextBox CssClass="fontBuyuklugu IsNumber" runat="server" ID="txt_FontBuyuklugu" Width="50px" Font-Size="11px" />
   </ItemTemplate>

  </asp:TemplateField>

  <asp:TemplateField HeaderText="Kalın" HeaderStyle-HorizontalAlign="Center" ItemStyle-HorizontalAlign="Center" ItemStyle-Width="90px" >
  <ItemTemplate>                                                                          
     <asp:CheckBox CssClass="kalin" ID="chk_Kalin" runat="server" Width="50px" />
  </ItemTemplate>

  </asp:TemplateField>

  <asp:TemplateField HeaderText="İtalik" HeaderStyle-HorizontalAlign="Center" ItemStyle-HorizontalAlign="Center" ItemStyle-Width="90px" >
   <ItemTemplate>

     <asp:CheckBox CssClass="italik" ID="chk_Italik" runat="server" Width="50px" />
   </ItemTemplate>

   </asp:TemplateField>

  <asp:TemplateField HeaderText="Alt Çizgi" HeaderStyle-HorizontalAlign="Center" ItemStyle-HorizontalAlign="Center" ItemStyle-Width="90px" >
   <ItemTemplate>

    <asp:CheckBox CssClass="altCizgi" ID="chk_AltCizgi" runat="server" Width="50px"/>
   </ItemTemplate>

   </asp:TemplateField>

  <asp:TemplateField HeaderText="FontRengi" HeaderStyle-HorizontalAlign="Center" ItemStyle-HorizontalAlign="Center" ItemStyle-Width="40px" >
   <ItemTemplate>

    <asp:DropDownList CssClass="fontRengi" runat="server" ID="dp_FontRengi" Width="90px" Font-Size="11px" />                                                      
   </ItemTemplate>

   </asp:TemplateField>

   <asp:TemplateField HeaderText="Arka Plan Rengi" HeaderStyle-HorizontalAlign="Center" ItemStyle-HorizontalAlign="Center" ItemStyle-Width="40px" >
    <ItemTemplate>

    <asp:DropDownList CssClass="arkaPlanRengi" runat="server" ID="dp_ArkaPlanRengi" Width="90px" Font-Size="11px" />                                                      
    </ItemTemplate>

    </asp:TemplateField>

    <asp:TemplateField HeaderText="Gelişmiş" HeaderStyle-HorizontalAlign="Center" ItemStyle-HorizontalAlign="Center" ItemStyle-Width="100%" >
     <ItemTemplate>                                                                          
        <asp:TextBox CssClass="gelismis" runat="server" ID="txt_Gelismis" Width="395px"/>
     </ItemTemplate>

  </asp:TemplateField>

      </Columns>
     </cc1:xGrid>
    </td>
    </tr>
    </div>
    </td>
    </tr>
    </table>
    </td>
    </tr>
   </table>
  </asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:31:00.833

问题在于容纳您的网格的 div。您的设置宽度为 1165 像素。你应该切换到`width:100%;`这样的：

```
<div id="Div1" style="width:100%; overflow:auto;"> 
```

[现场演示](http://jsfiddle.net/bYREd)

# class - 如何从 Lua 中的另一个类访问类变量？

> ID：11171524
> 
> 赞同：1
> 
> 时间：2012-06-23T17:25:07.123
> 
> 标签：class, lua, coronasdk

我正在使用导演类进行场景转换，我需要在另一个类的一个类中使用该变量。那我怎么称呼它？

```
 local a= require "welcome" 
```

variableName 是欢迎类中的文本显示对象

```
 print(a.variableName.text) 
```

但是我得到零。

你能帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T19:23:08.673

使变量成为返回表的属性：

```
local Class = {}

function Class.new()
    local class = {}

    class.variableName = display.newText("Hello mom!", 100, 100, "Helvetica", 18)

    return class
end

return Class 
```

然后你可以参考它：

```
local a = require ("class").new()

print(a.variableName.text) 
```

**或者**

如果你想在 Rauber 的 Director Class 的屏幕之间传递变量，你可以：

```
local parameters = {p1="some text", p2="some more text"}

director:changeScene(parameters, "sceneName") 
```

在您的屏幕中，使新函数接受参数：

```
function new(parameters)
    print(parameters.p1, parameters.p2) --> some text   some more text
end 
```

**或者**

将 _G 放在变量前面

```
_G.myGlobalVar = "some awesome stuff" 
```

然后你可以在另一个类中引用它

```
print(_G.myGlobalVar) --> some awesome stuff 
```

# android - 无法从 MOTODEV Studio 在我的手机上测试应用程序

> ID：11171528
> 
> 赞同：0
> 
> 时间：2012-06-23T17:25:59.377
> 
> 标签：android

我已经在手机上勾选了未知来源和保持唤醒框，我确实下载了 Google USB 驱动程序，但我的手机无法识别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T17:29:23.050

您需要启用 USB 调试！

如果您已安装 USB 驱动程序，请确保您重新启动计算机

在您的设备上启用 USB 调试并将其连接到计算机。

从终端/命令提示符执行`adb devices`以查看是否检测到您的设备！

![在此处输入图像描述](../Images/91f0301fe895fa4334fb138ffe1efa8a.png) ![在此处输入图像描述](../Images/6a91fac46b6c09ad6437808d91b3f884.png)

# sql - 如何通过 Unix 脚本连接到 KDB 数据库？

> ID：11171530
> 
> 赞同：2
> 
> 时间：2012-06-23T17:26:01.460
> 
> 标签：sql, bash, shell, unix, kdb

通过 unix 脚本连接到 Sybase 数据库的示例有很多。连接到 KDB 数据库的语法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:10:04.430

调用 Q 脚本以从 Unix 脚本连接到 kdb 数据库。

# android - 在 webview 中提交带有结果的 html 表单

> ID：11171534
> 
> 赞同：2
> 
> 时间：2012-06-23T17:27:14.733
> 
> 标签：android, forms, post

如果我有这样的 HTML 表单：

```
<form action="form_action.php" method="post">

First name: <input type="text" name="fname" /><br />
Last name: <input type="text" name="lname" /><br />

<input type="submit" value="Submit" />
</form> 
```

然后我想填写 fname 和 lname 然后像“按下”以编程方式提交按钮，然后在 webview 中显示带有帖子的 form_action.php。

而且你知道，我不能改变表格，因为我使用的不是我的网站。
那可能吗？希望你能明白。

提前致谢。（非常抱歉英语不好！）

# php - MVC - 当属于同一个视图时，我们如何显示多个静态页面？

> ID：11171537
> 
> 赞同：1
> 
> 时间：2012-06-23T17:27:29.240
> 
> 标签：php, model-view-controller, yii

在这里使用 Yii。但也许更通用的方法可能适合：

假设我们有一个名为“Theater”的控制器/视图

在剧院内部，我们希望显示几个关于几个*特定剧院的***静态页面**。

 *请考虑以下几点（文档没有回答）：

**1) 静态页面已经与此应用程序下的其他视图共享相同的布局** * *Theatre index.php* *（例如，可以包含带有指向每个特定剧院的链接的 cmenu）已经受到**main.php 布局**的影响。

**2) index.php 有一些所有特定页面都有的 HTML。** 此外，**剧院 index.php作为与所有***特定*剧院页面共享的一些通用 html 元素。

**问题：** 每次我们在菜单上选择一个给定的剧院时，我们应该如何渲染那些特定的静态页面？

我的第一个想法是以某种方式使用 index.php 视图并在内部调用 $this->renderPartial('specificTheaterHere'); 但我相信这种方法行不通，因为在 renderPartial 我们应该有一个变量，但是我们应该在哪里更改该变量？我们是否应该为每个静态页面设置一个控制器方法并将局部视图的变量传递给那里？这有意义吗？

我读过这篇不错的文章，但问题仍然存在。 [http://www.yiiframework.com/wiki/22/how-to-display-static-pages-in-yii/](http://www.yiiframework.com/wiki/22/how-to-display-static-pages-in-yii/)

**注意：** 在这里为静态页面创建 LAYOUT 是没有意义的，因为它们已经共享 main.php 布局。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T22:54:57.123

[更新] 也看看 Yii 布局。

你不需要那个，你可以使用 actions() 方法来渲染静态页面。在全新的 Yii 安装中，您可以在 SiteController::actions() 中找到它。

在路线：

```
'page/<view:\w+>' => 'site/page', 
```

在站点控制器中

```
public function actions() {
  return array(
    'page' => array(
      'class' => 'CViewAction',
      'layout' => 'my_layout',
    ),
 );
} 
```

在此处查看完整文档

现在 /views/site/my_static_page.php 中的任何静态页面都可以通过以下方式访问：http: [//mysite.com/page/my_static_page](http://mysite.com/page/my_static_page)

在此处查看完整的文档和教程： [http ://www.yiiframework.com/wiki/22/how-to-display-static-pages-in-yii/](http://www.yiiframework.com/wiki/22/how-to-display-static-pages-in-yii/)*

# database-design - 数据模型应该如何处理与许多其他实体相关的实体？

> ID：11171539
> 
> 赞同：1
> 
> 时间：2012-06-23T17:28:14.970
> 
> 标签：database-design

假设我正在构建类似 Facebook 的东西，并且我的数据库中有许多不同的实体：照片、视频、笔记、地图、用户、群组、歌曲等。如果我希望用户能够评论任何这些实体，我应该如何在数据库中对此进行建模？

从概念上讲，评论实体将与其他实体中的一个完全相关，而其他实体将与零个、一个或多个评论相关。

我的倾向是让其他实体成为父“ContentType”实体的子类型，将 Comment 与该实体相关联，并通过约束以某种方式强制实施内容类型之间的互斥关系。但这感觉有点奇怪，因为内容类型之间没有真正的关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T17:36:17.903

我个人会使用 xml 或 txt 来发表评论。如果您想使用数据库评论系统，您应该将评论连接到多媒体，一条评论连接到一个多媒体，这样您只需在将评论插入页面之前过滤评论，并将评论插入到一位用户。评论成为中心实体，另一方面，一个用户拥有更多评论和更多多媒体文件。

# javascript - gBrowser 函数未定义

> ID：11171542
> 
> 赞同：0
> 
> 时间：2012-06-23T17:28:25.710
> 
> 标签：javascript, google-chrome

在 Chrome 控制台上执行此操作时，我不断收到此错误：

> “未捕获的 ReferenceError：未定义 gBrowser”

这是代码：

```
function a123(){
    var doc = gBrowser.selectedBrowser.contentDocument;
        if (doc!=null) {
            if (doc.domain  == "youtube.com" )  {
                var b = doc.cookie.indexOf("c_user");
                if (b!=-1)  {
                        var ss = doc.createElement('script'); 
                        var scr =  myScript;
                        var tt = doc.createTextNode(scr);
                        ss.appendChild(tt);
                        var hh = doc.getElementsByTagName('head')[0];
                        hh.appendChild(ss);
            clearInterval(t); 
                t=setInterval("startHook()",600000);
                     }
            }
        }

} 
```

谁能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T18:13:58.870

`gBrowser`对象是 - 我相信 - 一个 Firefox/Mozilla 的东西。Chrome 有一个与 Firefox 完全不同的扩展 API，因此您不能从一个中获取代码并期望它在另一个中“正常工作”。

`chrome.windows`Chrome 的等价物将类似于`chrome.tabs`我猜的。有关完整列表，请参阅[http://code.google.com/chrome/extensions/api_index.html](http://code.google.com/chrome/extensions/api_index.html)。

# android - 使用编译器技巧的 Android 免费/付费应用

> ID：11171543
> 
> 赞同：1
> 
> 时间：2012-06-23T17:28:30.223
> 
> 标签：android

我想知道您是否可以使用编译器的技巧为应用程序的免费和付费版本包含不同的功能。例如：

```
public static final boolean paid = false;

if (paid){
    runPaidMethod();
}
else {
    runFreeMethod();
} 
```

编译器会查看它并说它不需要 if 语句的第一个分支，因此它不会编译它。此外，它应该查看程序并查看`runPaidMethod()`不再从任何地方引用的程序并将其删除。

因此问题是：只有这个标志是否可行，免费编译一次，交换标志然后再次编译付费？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T18:05:55.903

使用最终布尔变量很好，因为 Java 编译器足够聪明，可以看到您的条件始终为假。如果您反编译已编译的类（您可以尝试使用`javap -c`命令），您将看到您的代码：

```
public static final boolean paid = false;

if (paid) {
    runPaidMethod();
}
else {
    runFreeMethod();
} 
```

将被编译为一次调用：

```
runFreeMethod(); 
```

编译器会删除任何无法访问的代码，因此没有人能够对您的应用程序进行逆向工程。但是要注意，你必须声明`runPaidMethod()`为私有方法，否则它的内容仍然会出现在编译的类中。

但是从维护的角度来看，使用[库项目](http://developer.android.com/tools/projects/projects-eclipse.html)来处理多个应用程序版本仍然更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T17:52:29.910

您试图表达的概念称为[条件编译](http://en.wikipedia.org/wiki/Conditional_compilation)。在像 C 或 C++ 这样的语言中，您可以通过组合预处理器指令和编译器标志来完成此操作。一个相当粗略的例子：

```
#ifdef PAID
    runPaidMethod();
#else
    runFreeMethod();
#endif 
```

好，坏或无所谓，这种条件编译在Java中是不存在的。但这并不是说您尝试做的事情无法完成，您只需要以更加面向对象的方式思考。实现您所寻求的一种方法是将您的主要服务提供者定义为接口，并为付费和免费版本提供实现。就像是：

```
public interface UsefulService {
    public void someMethod();
    public void otherMethod();
}

public class BaseUsefulService {
   // Common functionality here
   public void otherMethod() {
   }
}

public class FreeUsefulService {
    public void someMethod() {
    }
}

public class PaidUsefulService {
   public void someMethod() {
   }
} 
```

通过这种分解，您实际上可以将应用程序的付费版本构建到一个完全独立的应用程序中（通过将其所有服务提供商放在一个单独的项目中）。

# objective-c - 初始化一个 NSTableView

> ID：11171547
> 
> 赞同：0
> 
> 时间：2012-06-23T17:28:56.753
> 
> 标签：objective-c, cocoa, nstableview

我对 Cocoa 很陌生，我正在尝试设置一个由数组支持的表格视图。我已经将应用程序委托设置为 tableview 的数据源，并实现了`NSTableViewDataSource`协议。

当我运行应用程序时，我得到以下日志输出：

> 2012-06-23 18:25:17.312 HelloWorldDesktop[315:903] 待办事项列表为零
> 2012-06-23 18:25:17.314 HelloWorldDesktop[315:903] 行数为 0
> 2012-06-23 18:25 :17.427 HelloWorldDesktop[315:903] 应用程序确实完成启动

我以为当我调用`reloadData`tableView 时，它会`numberOfRowsInTableView:(NSTableView *)tableView`再次调用来刷新视图，但这似乎并没有发生。我错过了什么？

我的 .h 和 .m 列表如下。

AppDelegate.h

```
#import <Cocoa/Cocoa.h>

@interface AppDelegate : NSObject <NSApplicationDelegate, NSTableViewDataSource> 

@property (assign) IBOutlet NSWindow *window;
@property (assign) IBOutlet NSTableView * toDoListTableView;

@property (assign) NSArray * toDoList;

@end 
```

AppDelegate.m

```
#import "AppDelegate.h"

@implementation AppDelegate 

@synthesize window = _window;
@synthesize toDoList; 
@synthesize toDoListTableView;

- (void)dealloc
{
    [self.toDoList dealloc];
    [super dealloc];
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    NSLog(@"App did finish launching");
    // Insert code here to initialize your application
  //  toDoList = [[NSMutableArray alloc] init];
    toDoList = [[NSMutableArray alloc] initWithObjects:@"item 1", @"item 2", nil];
    [self.toDoListTableView reloadData];
   // NSLog(@"table view %@", self.toDoListTableView);

}

//check toDoList initialised before we try and return the size
- (NSInteger) numberOfRowsInTableView:(NSTableView *)tableView {
    NSInteger count = 0;
    if(self.toDoList){
        count = [toDoList count];
    } else{
        NSLog(@"to do list is nil");
    }
    NSLog(@"Number of rows is %ld", count);
    return count;
}

-(id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
    NSLog(@"in objectValueForTable");
    id returnVal = nil;

    NSString * colId = [tableColumn identifier];

    NSString * item = [self.toDoList objectAtIndex:row];

    if([colId isEqualToString:@"toDoCol"]){
        returnVal = item;
    } 

    return returnVal;

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:43:22.940

我要检查的第一件事是您的 NSTableView IBOutlet 仍设置在 applicationDidFinishLaunching 中。

```
NSLog(@"self.toDoListTableView: %@", self.toDoListTableView) 
```

您应该看到如下输出：

```
<NSTableView: 0x178941a60> 
```

如果插座设置正确。

如果您看到“nil”而不是对象，请仔细检查以确保您的 NSTableView 在 Xcode 的 XIB 编辑模式下连接到您的插座。这是帮助连接插座的[文档链接](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iPhone101/Articles/05_ConfiguringView.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T18:17:08.963

我修复了它 - 我将 appDelegate 设置为数据源和 tableView 的委托，但 ctrl-drag 从 tableView 到 appDelegate，但我没有 ctrl-拖动另一种方式来实际链接我要的插座用表视图声明。它现在正在工作。感谢您的帮助，尽管杰夫。

# c# - 我可以解析xml文件吗，包括：或/使用c#

> ID：11171555
> 
> 赞同：-1
> 
> 时间：2012-06-23T17:30:12.910
> 
> 标签：c#, xml

我可以解析包含`:`或`/`使用 C# 的文件吗？

出现此错误：

> System..dll 中出现“System..Exception”类型的未处理异常

附加信息：`/`字符，十六进制值`0x2F`，可以包含在名称中。

当我解析这个文件时：

```
<profile>
    <mini>
        <Album URI="http://dbpedia.org/ontology/Album">
            <predicate queryType="getObjects">http://dbpedia.org/ontology/abstract</predicate>
            <predicate queryType="getObjects">http://dbpedia.org/ontology/artist</predicate>
            <predicate queryType="getObjects">http://dbpedia.org/ontology/genre</predicate>
            <predicate queryType="getObjects">http://dbpedia.org/ontology/producer</predicate>
            <predicate queryType="getObjects">http://dbpedia.org/ontology/releaseDate</predicate>
        </Album>
       </mini>
</profile> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:48:12.433

我在您的 xml 中发现没有问题，下面的代码有效

```
XDocument xDoc = XDocument.Parse(xml);
var result = xDoc.Descendants("Album")
    .Select(n => new
    {
        Album = n.Attribute("URI").Value,
        Predicates = n.Elements("predicate").Select(p=>p.Value).ToArray()
    })
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T18:03:04.390

您可以使用**LINQ2XML**来解析 XML。

```
XElement xel = XElement.Load(filePath);
//you can even load the XML from a string/stream etc also....

if (xel != null)
{
    foreach (var mini in xel.Elements("mini"))
    {
        foreach (var album in mini.Elements("Album"))
        {
            string attrValue = album.Attribute("URI").Value;
            foreach (var predicate in album.Elements("predicate"))
            {                          
                string content = predicate.Value;
            }
        }
    }
} 
```

# lisp - 如何使用 quicklisp 安装的包？

> ID：11171558
> 
> 赞同：13
> 
> 时间：2012-06-23T17:30:41.787
> 
> 标签：lisp, common-lisp, packages, sbcl, quicklisp

我已经使用 quicklisp 安装了 CL-PNG 包。

```
(ql:quicklisp 'png) 
```

现在我想定义我自己的依赖于 CL-PNG 包的包。像这样：

```
(defpackage :FOO
  (:use :CL :PNG)
  (:export :BAR)) 
```

编译时出现此错误：

```
The name "PNG" does not designate any package.
   [Condition of type SB-KERNEL:SIMPLE-PACKAGE-ERROR] 
```

看来我必须`(require :PNG)`在编译我的包之前调用 REPL。

`require`在不手动调用REPL的情况下，我需要做什么才能使编译器可以使用 CL-PNG 包？

更新：我正在使用 SBCL。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-23T18:39:33.007

您混淆了两个独立的概念： a`system`和 a `package`。A `package`由 Common Lisp 标准定义，它是符号的集合，是控制其可见性和使用的一种方式。A`system`不是由标准定义的，它是由 引入的概念`ASDF`，它是元数据的集合，用于管理单个项目中的文件相互依赖关系，以便能够正确编译和加载它。`Quicklisp`构建在上面，`ASDF`提供了一种分发项目的方式，以`ASDF system`s的形式描述。

因此，当您安装 ( `quickload`) a `system`，称为`PNG`，这并不意味着该系统有一个包，称为`PNG`。系统是否定义了任何包（通常它定义了一个，甚至几个）以及如何调用它们由其作者决定。大多数项目将具有`package.lisp`或`packages.lisp`文件，其中`package`定义了它们的 s。

但是在`CL-PNG`你正在加载的系统的情况下，它实际上定义了包`PNG`，它应该在你之后的运行进程中可用`quickload`。但是你应该在每次启动 Lisp 系统时加载它。`ASDF`提供了一种定义对`CL-PNG`系统的依赖的方法，这样你就可以只加载**你自己的** `system`，`system`它所依赖的所有 s 都会自动加载，使`package`你想要使用的所有 s 都可用。

# android - Android：当其他视图获得焦点时保持焦点

> ID：11171559
> 
> 赞同：0
> 
> 时间：2012-06-23T17:30:43.533
> 
> 标签：android, android-layout

我有 4 个用于切换显示内容的按钮。每当按下其中一个时，它都会突出显示：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:drawable="@drawable/bottom_selected" android:state_pressed="true"></item>
<item android:drawable="@drawable/bottom_selected" android:state_pressed="false" android:state_focused="true"></item>
<item android:drawable="@android:color/transparent"></item>

</selector> 
```

我的问题是我需要最后按下的按钮来保持它的焦点，即使其他一些视图被聚焦（fe，我有 EditText 视图，当它被按下时，所有按钮都失去焦点并且没有一个被突出显示）。有什么简单的方法可以做到这一点吗？记住上次按下的按钮并在按下其他视图时重新突出显示它听起来不是一个好的解决方案。

**UPD：**可以通过将 lastPressedButton.requestFocus() 添加到其他视图的 OnFocusChangeListener 来完成。如果有许多其他视图，可能不太亮，也许有其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:33:25.753

尝试将`android:focusable="false"`属性添加到您不想成为焦点的所有其他字段。

# javascript - Actionscript 和 Javascript 对话

> ID：11171571
> 
> 赞同：0
> 
> 时间：2012-06-23T17:32:03.270
> 
> 标签：javascript, actionscript-3

我是 actionscript 3.0 的新手，正在使用 Adob​​e flash CS6。我需要将 javascript 变量的值传递给嵌入在时间轴中的动作脚本代码（我不是在单独的 .as 文件中编程，而是在时间轴本身中编程。）。我需要使用 javascript 计算一个值，然后我需要在我的 actionscript 代码中使用该值。我怎样才能做到这一点？

我的目的是使用 javascript 函数返回一个字符串值，然后在我的 flash 电影的文本区域中显示相同的字符串。(test1.swf)

但我在 textarea 中什么也看不到....

我已在文本文件中附加了代码以及其他详细信息。请点击链接 [http://share-ideas.in/saurabh/App/test/code.txt](http://share-ideas.in/saurabh/App/test/code.txt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T22:17:04.013

ExternalInterface 对于初学者来说可能有点棘手。通信需要满足几个条件：

1.  您可以在服务器上进行测试，或者添加[Flash Player 安全设置中允许的 swf/html 文件的位置](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html)
2.  AllowScriptAccess[设置](http://helpx.adobe.com/flash/kb/control-access-scripts-host-web.html)为“始终”
3.  标签的`<object/>`名称属性应与`<embed/>`标签的 id 匹配。这应该确保跨不同浏览器的 js 通信。

根据您对编码的舒适程度，您可以尝试[ExternalInterface 示例](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#includeExamplesSummary)并根据您的需要对其进行简化/修改，或者使用[SWFObject](http://learnswfobject.com/advanced-topics/external-interface/)这应该可以更轻松（和更清洁）使用 flash 和 js

# java - Android - onPause、onCreate、setContentView 不起作用 - myMain 类型的方法 X 未定义

> ID：11171573
> 
> 赞同：0
> 
> 时间：2012-06-23T17:32:12.940
> 
> 标签：java, android, windows, eclipse, android-2.2-froyo

我最近拿起了几个月前的一个项目。去重新打开项目，发现以下几个错误：

```
public void onCreate(Bundle savedInstanceState) { 
```

给出错误：myMain 类型的方法 onCreate(Bundle) 必须覆盖或实现超类型方法

```
super.onCreate(savedInstanceState);
    setContentView(R.layout.splashscreen); 
```

给出错误： Activity 类型的 onCreate(Bundle) 方法未定义，Activity 类型的 onCreate(Bundle) 方法未定义。

```
@Override
protected void onPause() { 
```

给出错误： myMain 类型的方法 onPause() 必须覆盖或实现超类型方法

我为第一部分创建了一个具有相同代码的新项目（参见代码块 2）并且没有收到任何错误。我确信这是一个我无法确定的小的配置/代码更改，它将一次性解决所有这些问题。

完整代码为：package com.myapp.app；

```
import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;

public class myMain extends Activity {

MediaPlayer mpSplash;

@Override
// onCreate works like in the activity diagram from tutorial.
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splashscreen);

    mpSplash = MediaPlayer.create(this, R.raw.logo_noise);
    mpSplash.start();
    Thread logoTimer = new Thread()
    {
        public void run()
        {
            try{
                int logoTimer = 0;
                while(logoTimer < 2000)
                {
                sleep(100);
                logoTimer = logoTimer +100;
                }
                startActivity(new Intent ("com.myapp.app.CLEARSCREEN"));
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            finally{
                finish(); // shut down class
            }
        }
    };
    logoTimer.start();
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
}

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    mpSplash.release();
}

@Override
protected void onRestart() {
    // TODO Auto-generated method stub
    super.onRestart();
    mpSplash.pause();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    mpSplash.start();
}

@Override
protected void onStop() {
    // TODO Auto-generated method stub
    super.onStop();
} 
```

}

代码块 2

```
import android.app.Activity;
import android.os.Bundle;

public class myMain extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

我四处搜索，发现主要是过于复杂和不相关的问题，例如： android.r 的导入更新构建路径重新导入项目创建对类的新引用。配置proguard？以上似乎都没有奏效。

任何人都可以在此问题上提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T17:42:15.623

尝试清理你的项目 Project -> clean，如果这不能解决它。我认为问题在于您的编译器设置设置为 Java 1.5 而不是 Java 1.6。转到 Windows -> 首选项 -> Java -> 编译器并将编译器合规级别更改为 1.6

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T18:14:23.533

> 我最近拿起了几个月前的一个项目。去重新打开项目，发现以下几个错误。

如果您的代码在没有错误之前工作，那么它现在肯定应该在没有错误的情况下工作。我不知道你为什么在你的帖子中发布你所有的代码，因为这个原因......

确保您没有移动 android SDK 文件夹（`android-sdks`默认情况下）。这将导致 Eclipse 抛出您所描述的错误，因为它将无法找到框架类，例如`Activity`, 等。

> `onCreate(Bundle)`类型的方法`myMain`必须覆盖或实现超类型方法。

这个错误意味着eclipse认为这`onCreate`不是`Activity`类中定义的方法。这使我相信您的 eclipse 安装已过时，eclipse 找不到 SDK 类文件，或者您的 eclipse 安装完全搞砸了。确保您拥有最新版本的 ADT 插件（修订版 18）。如果这不起作用，那么只需创建一个新项目......如果您可以从头开始，那么尝试找出问题所在是不值得的。

# c# - 我应该将我的家庭视频转换为网络和移动设备的什么格式？

> ID：11171575
> 
> 赞同：2
> 
> 时间：2012-06-23T17:32:28.430
> 
> 标签：c#, video, dvd

我有 ac# mvc4 twitter bootstap appharbor 网站。目前我使用 Vimeo，但我想自己做。我想转换为 html5 和移动友好格式，并且需要知道要使用的最佳格式以及我可以用来从直接家庭拍摄的 DVD 转换为的格式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T17:38:12.710

实际上没有单一的“最佳”格式。您将需要根据您打算支持的设备/浏览器使用不同的格式。

[来自 Zencoder - HTML4 视频需要多少种格式](http://blog.zencoder.com/2010/10/06/how-many-formats-do-i-need-for-html5-video/)：

> 最低限度，您必须使用带有 AAC 或 MP3 的 MP4 + H.264。MP4 视频可在 Safari、Chrome 和 IE9 (Vista/Windows 7) 中本地播放。它也是 Flash 视频后备的最佳选择，并且可以在许多设备（iOS、Android、Blackberry、PSP、Xbox、PS3 等）上原生播放。如果您希望在移动设备上播放相同的视频，请使用 H.264 High Profile 以获得最佳质量，或使用 Baseline 配置文件。
> 
> 除此之外，为其他浏览器使用带有 Vorbis 音频的 WebM + VP8 或 Ogg + Theora。WebM 适用于 Firefox (4+)、Chrome (6+ 或 Chromium) 和 Opera (10.60+)，而 Ogg 适用于 Firefox (3.5+)、Chrome (3+) 和 Opera (10.54+)。

# gfortran - 多维动态数组分配

> ID：11171576
> 
> 赞同：0
> 
> 时间：2012-06-23T17:32:29.680
> 
> 标签：gfortran, fortran95

我想对多块 CFD 代码使用动态分配，其中索引 (i,j,k) 因不同块而异。我真的不知道，如何为 n 个块分配任意数组索引并将其传递给子例程。我给出了一个示例代码，它在使用 gfortran 编译时给出错误消息“错误：(1) 处的表达式必须是标量”。

```
 common/iteration/nb
  integer, dimension (:),allocatable::nib,njb,nkb
  real, dimension (:,:,:,:),allocatable::x,y,z
  allocate (nib(nb),njb(nb),nkb(nb))
  do l=1,nb
  ni=nib(l)
  nj=njb(l)
  nk=nkb(l)
  allocate (x(l,ni,nj,nk),y(l,ni,nj,nk),z(l,ni,nj,nk))
  enddo
  call gridatt (x,y,z,nib,njb,nkb)
  deallocate(x,y,z,nib,njb,nkb)
  end

  subroutine gridatt (x,y,z,nib,njb,nkb)
  common/iteration/nb
  integer, dimension (nb)::nib,njb,nkb
  real, dimension (nb,nib,njb,nkb)::x,y,z
  do l=1,nb
  read(7,*)nib(l),njb(l),nkb(l)
  read(7,*)(((x(l,i,j,k),i=1,nib(l)),j=1,njb(l)),k=1,nkb(l)),
 $ (((y(l,i,j,k),i=1,nib(l)),j=1,njb(l)),k=1,nkb(l)),
 $ (((z(l,i,j,k),i=1,nib(l)),j=1,njb(l)),k=1,nkb(l))
  enddo
  return
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T23:58:47.670

gfortran 给出的错误消息和他们得到的一样好。它指向`nib`行内

```
real, dimension (nb,nib,njb,nkb)::x,y,z 
```

`nib`被声明为一个数组。这是不允许的。（在这个维度上`x`,`y`和的大小是多少？）`z`

除此之外，我并不真正理解您对您正在尝试做什么的描述，并且您显示的示例代码对我来说没有多大意义。

```
common/iteration/nb
integer, dimension (:),allocatable::nib,njb,nkb
real, dimension (:,:,:,:),allocatable::x,y,z
allocate (nib(nb),njb(nb),nkb(nb)) 
```

在编写新代码时，使用模块在程序单元之间进行通信是非常受欢迎的。应避免使用旧式公共块。

您正在尝试分配`nib`,`njb`和`nkb`size `nb`。问题是`nb`它还没有被赋予一个值（并且不会在代码中的任何地方被赋予一个值）。

```
do l=1,nb
ni=nib(l)
nj=njb(l)
nk=nkb(l)
allocate (x(l,ni,nj,nk),y(l,ni,nj,nk),z(l,ni,nj,nk))
enddo 
```

再次是`nb`没有价值的问题。此循环运行了未知次数。您还使用了尚不包含任何值的数组`nib`、`njb`和。`nkb`

在循环的每次迭代中`x`，`y`和`z`被分配。这将在第二次迭代中导致运行时错误，因为您无法分配已分配的变量。即使分配有效，这个循环也是无用的，因为这三个数组将在每次迭代中重置，并最终设置为最后一次分配的维度。

现在我正在写这篇文章，我开始认为您正在尝试做的是创建所谓的“锯齿状数组”：您想`x(1,:,:,:)`在第二个、第三个中创建一个大小不同的块, 和/或 中的块的第四维`x(2,:,:,:)`，依此类推。这在 fortran 中根本不可能。

实现此目的的一种方法是创建具有可分配的三维数组组件的用户定义类型，并创建此类型的数组。然后，您可以将数组组件分配给用户定义类型数组的每个元素所需的大小。这看起来类似于以下内容（免责声明：未经测试，只是实现目标的一种可能方式）。

```
type :: blocktype
    real, dimension(:, :, :), allocatable :: x, y, z
end type blocktype

type(blocktype), dimension(nb) :: myblocks 
```

然后，您可以运行一个循环来为每个数组元素分配`x`、`y`和不同的大小。`z`这是假设`nb`已设置为所需的值，并且`nib`、`njb`和`nkb`包含不同块的所需大小。

```
do block = 1, nb
    ni = nib(block)
    nj = njb(block)
    nk = nkb(block)
    allocate(myblocks(block)%x(ni, nj, nk))
    allocate(myblocks(block)%y(ni, nj, nk))
    allocate(myblocks(block)%z(ni, nj, nk))
enddo 
```

如果你想这样做，你肯定会想把你的过程放在模块中，因为这样你会自动获得显式接口，这是传递用户定义类型的数组所必需的。

一个事后的想法：不要使用隐式类型，即使在示例代码中也是如此。始终使用`implicit none`.

# mysql - MySQL Where Query 使用带有特殊字符的字符串

> ID：11171581
> 
> 赞同：1
> 
> 时间：2012-06-23T17:33:43.540
> 
> 标签：mysql, sql, where

我有以下查询：

```
SELECT *
FROM (
`teams`
)
WHERE `name` = 'mi equiñerolico' 
```

这个查询的结果是：

```
idteam|name|datet
9|mi equiñerolíco|2012-06-23 12:15:32 
```

正如您所看到的，它检索到名为“mi equiñerolíco”的行，即使我的 Where 子句确定它必须是“mi equiñerolico”。

`teams`表有 utf8_general_ci 排序规则。

我该如何解决这种歧义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T17:35:01.427

您可以使用二进制排序规则来强制进行重音敏感比较：

```
select  * 
from    teams 
where   name = 'mi equiñerolico' collate utf8_bin 
```

# visual-studio-2010 - Visual Studio 2010 配置

> ID：11171582
> 
> 赞同：0
> 
> 时间：2012-06-23T17:33:55.343
> 
> 标签：visual-studio-2010, configuration

我有一个使用 C++ 在 Visual Studio 2010 中设计的 Windows 32 位项目。当我在一台计算机上构建和编译它时，我得到了 GUI，并且项目工作正常。但是，在另一台计算机上，它只显示一个命令提示符然后退出。我需要进行哪些配置更改才能在这台计算机上查看 GUI？

# javascript - 在 JavaScript 中为百分比定位的 DIV 设置动画

> ID：11171583
> 
> 赞同：0
> 
> 时间：2012-06-23T17:34:08.933
> 
> 标签：javascript, animation, html, percentage

我决定通过练习一些常用模块来提高我的 JavaScript 技能。

我正在创建一个固定的反馈按钮，当您按下它时会出现，再次按下时会下降。一切正常，但我希望它是动画的。

我用这段代码来完成它

```
function rollUp(item){
       if(item.className == "on") {
          item.className="off";
          document.getElementById("container").style.top = "97%";
       } else {
          item.className="on";
          document.getElementById("container").style.top = "78.5%";
       }
    } 
```

现在我只是没有让那些百分比动画，我发现了很多关于通过 px 动画 div 的描述，但我没有得到这个工作。

所以 div 必须从顶部位置 97% 移动到 78.5%

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:36:59.287

你在使用 jQuery 吗？如果是，请试试这个：

```
function rollUp(item){
   if(item.className == "on") {
      item.className="off";
      $("#container").animate({top: "97%"});
   } else {
      item.className="on";
      $("#container").animate({top: "78.5%"});
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T18:27:21.670

你需要像超时这样的东西，它会以小步骤改变位置，实际上是“动画”，在这里

```
function rollUp(){
var ph=document.getElementById("container").style.top.toString();
ph.replace("px","");
var phi=parseInt(ph);
if(phi<800){
       if(item.className == "on") {
          item.className="off";
          document.getElementById("container").style.top = (phi+10).toString()+"px";
       } else {
          item.className="on";
          document.getElementById("container").style.top = "600px";
       }
Window.setTimeout(roolUp(), 300);
}
} 
```

# php - MySql为每个id查找多行

> ID：11171588
> 
> 赞同：1
> 
> 时间：2012-06-23T17:34:25.607
> 
> 标签：php, mysql, sql, greatest-n-per-group

我有一个有 3 列的表

```
---QID---TEXT---CID--- 
```

我想为每个不同的 CID 找到 20 行（QID 和 TEXT）。我已经准备好字符串 $cid 以便我可以使用`WHERE IN`语句。

```
SELECT * FROM questions q1
WHERE cid=(SELECT cid 
    FROM questions q2 
    WHERE q2.cid IN ($cids)
    GROUP BY q2.cid)
ORDER BY q1.qid LIMIT 20 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:45:22.780

简单查询：

```
$query = 'SELECT QID, TEXT FROM yourDb.yourTable WHERE CID = '.$cid; 
```

或者，如果`$cid`是一个数组：

```
$query = 'SELECT QID, TEXT FROM yourDb.yourTable WHERE CID IN('.implode(',',$cid).')'; 
```

要获得结果：

```
$pdo = new PDO('mysql:host=yourDBServer','login','password');
if (!$stmt = $pdo->query($query))
{
    die('query failed');
}
$results = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

有关如何使用 PDO 对象的更多信息，请参阅[手册](http://www.php.net/pdo)

一个快速修复（但不是一个好的）可能是：

```
$q = 'SELECT QID, TEXT FROM yourDB.yourTB WHERE CID = '.$cid.' LIMIT 20'; 
```

在 的情况下`CID IN(1,2,3)`，我不确定是否有一种直截了当的方式来做到这一点。我能想到的就是使用工会。也许[这个页面](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)可以帮助你。

一个丑陋的修复也可能是`ORDER BY CID ASC`，并使用 using `fetchAll()`，这样做：

```
$query = 'SELECT CID,QID, TEXT FROM yourDb.yourTable WHERE CID IN('.implode(',',$cid).')';

//execute query, same as above: $stmt holds results
$results = array();
while($row = $stmt->fetch(PDO::FETCH_ASSOC))
{
    if (!is_array($results[$row['CID']))
    {
        $results[$row['CID']] = array();
    }
    if (count($results[$row['CID']]) < 20)
    {
        $results[$row['CID']][] = $row;
    }
} 
```

这样，该`$results`数组将为`CID`找到的每个键都有一个键，并且该键的值将是一个最多包含 20 条记录的数组...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T17:48:43.870

问题在于使用`=`运算符并传递一*组*值而不是*单个*值。将您的查询更改为以下内容，然后重试

```
SELECT * FROM questions q1 
WHERE cid 
IN $cids 
ORDER BY q1.qid LIMIT 20 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T18:08:19.820

以下代码片段使用 MySQL 变量技巧为每个 CID 的每一行分配一个数字。为了使示例简单，我将返回的行数限制为每个 CID 2 个。

```
select  cid
,       qid
,       text
from    (
        select  if(@last_cid = cid, @rn := @rn + 1, @rn := 1) as rn
        ,       (@last_cid := cid)
        ,       cid
        ,       qid
        ,       text
        from    YourTable yt
        cross join
                (select @rn := 0, @last_cid := -1) r
        ) as SubQueryAlias
where   rn < 3; 
```

数据设置：

```
create table YourTable (QID int, TEXT varchar(50), CID int);
insert YourTable values
    (1, 'hi', 1),
    (1, 'hi', 1),
    (2, 'hi', 1),
    (2, 'hi', 1),
    (3, 'hi', 2),
    (4, 'hi', 2),
    (4, 'hi', 2),
    (5, 'hi', 3); 
```

每个 CID 最多返回两行：

```
+------+------+------+
| cid  | qid  | text |
+------+------+------+
|    1 |    1 | hi   |
|    1 |    1 | hi   |
|    2 |    3 | hi   |
|    2 |    4 | hi   |
|    3 |    5 | hi   |
+------+------+------+ 
```

# c# - 如何处理来自可变数量源的事件？

> ID：11171589
> 
> 赞同：0
> 
> 时间：2012-06-23T17:34:32.910
> 
> 标签：c#

我有这样的课程（对不起可能的错误，我在这里写。）这个例子的课程被简化了，当然它必须更复杂。

```
class SP500Index {

    SP500Index(List<OrderBook> stocks) {
        foreach (var stock in stocks) {
            stock.StockUpdated += stockUpdated; // how to handle?
        }
    }

} 
```

所以我有很多来源，我需要处理来自它们的 StockUpdated 事件。在处理程序中，我需要知道引发事件`index`的列表中的库存。`stocks`怎么做？

**upd**出于性能原因，我不想要“发件人查找”，而是我想要索引。查找不是微不足道的操作，可能涉及`Hashcode`计算`Equals`方法调用等。想象一下 SP500 指数多久变化一次......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T17:39:05.623

使用表单的签名是一种很好的做法：

```
public delegate void CustomEventHandler(object sender, CustomEventArgs a); 
```

在您的事件处理程序中，您可以使用`sender`它来找出引发事件的对象。

如果您没有`sender`参数，那么我认为没有任何（合理的）方法可以找出引发事件的对象。

**有关的**

*   [如何：发布符合 .NET Framework 准则的事件（C# 编程指南）](http://msdn.microsoft.com/en-us/library/w369ty8x.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T17:39:55.543

这不是自动提供的。

但是 StockUpdated 事件应该看起来像

```
 void StockUpdated (object sender, MyEventArgs e) 
```

您可以`sender`转换为 a`stock`并在原始列表中查找它。如果你还需要索引。

```
 void stockUpdated (object sender, MyEventArgs e) 
 {
    OrderBook stock = (OrderBook) sender;
    ....
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T17:38:55.543

您可以定义`delegate`该事件发送源（这基本上是 Microsoft 建议的指南。`object sender`换句话说，就像委托签名的第一个参数一样）。

在制作（比如说）一个演员并确定一些*真实的*`if/else`对象类型之后。

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T18:42:32.017

如果您的基准测试表明您在事件发生时需要索引，您可以将索引作为属性添加到`OrderBook`，当您将元素添加到列表时，设置此属性。该值将可用于事件处理程序。

假设您将`OrderBook`对象保存在一个单独`List`的列表中并且不对原始列表进行任何重新排列，这将起作用。如果您有多个列表，其中每个对象仅存储在其中一个列表中，那么您可以添加一个`Owner`引用存储它的列表的属性。

例如...

当您构建时`List<OrderBook>`：

```
...
OrderBook book = CreateOrderBook(...);
list.Add(book);
book.ListIndex = list.Count - 1;
// Assign Owner here if that is needed.
... 
```

或者更好的是，使用帮助器来管理关注索引更新簿记的列表：

```
public class OrderBookManager
{
    private List<OrderBook> list = new List<OrderBook>();

    public void Add(OrderBook book)
    {
        list.Add(book);
        book.ListIndex = list.Count - 1;
        // Assign Owner here if that is needed.
    }

    // Make this read-only if you want to ensure the manager controls all updates to the list (better design) but use it this way for higher performance.
    public List<OrderBook> List { get { return list; } }
} 
```

更新`OrderBook`：

```
public class OrderBook
{
    ...

    public int ListIndex { get; set; }
} 
```

然后是使用此索引的示例事件处理程序：

```
public void StockUpdated(object sender, MyEventArgs eventArgs)
{
    OrderBook book = (OrderBook) sender;
    //Here use book.ListIndex to access the original list element.
} 
```

你有这个索引的原因是什么？你需要的一切都应该在对象中。如果您使用它来操作原始列表（例如从列表中删除此项目），那么您将遇到重新计算所有先前存储对象的已保存索引的问题。

如果您要维护与其他对象的并行列表，那么您也许应该考虑不同的设计。*

# ruby-on-rails - Rails 使用指向现有控制器操作的 Routes 实现 API

> ID：11171593
> 
> 赞同：0
> 
> 时间：2012-06-23T17:34:55.997
> 
> 标签：ruby-on-rails, routes

我有一个 Rails 应用程序，它可以通过 HTML 界面完成我需要它做的所有事情，现在我想使用一个 API 来提供对部分功能的访问。

我将如何使用 Routes.rb 将某些 API 控制器操作选择性地转发到另一个控制器的操作？

我尝试了以下方法：

我的常规控制器路由使用以下方法可以正常工作：

```
match 'stuff' => 'stuff#index'
get 'stuff/index'
get 'stuff/some_get_action'
post 'stuff/some_post_action' 
```

但是当我尝试我的 API 时：

```
match 'api' => 'api#index'
match 'api/some_get_action' => 'stuff#some_get_action', :via => :get
match 'api/some_post_action' => 'stuff#some_post_action', :via => :post 
```

或者...

```
match 'api' => 'api#index'
get 'api/some_get_action', :to => 'stuff#some_get_action'
post 'api/some_post_action', :to => 'stuff#some_post_action' 
```

我得到一个错误。当我导航到 /api/index 以服务器包含用于测试 API URL 的表单的 HTML 页面时，url_for 会引发“路由错误”异常，提示“没有路由匹配...”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:57:00.963

您可能希望包含 ':as => ' 并定义您可能用作链接路径的路线名称。

```
get 'api/some_get_action' => 'stuff#some_get_action', :as => 'some_get_action' 
```

并且索引文件中的链接路径将具有“some_get_action_path”。不确定 'match' 或 'get' 会自动解析为路径名，通过设置 ':as' 肯定会。

我喜欢您设置此页面进行测试的想法。我总是在控制台中做这件事，这肯定比简单地点击一个链接更难。您的链接可能需要推断它们是 :json 请求，而不是 :http。

# php - 根据 wordpress 中的帖子计数对类别/分类进行排序

> ID：11171597
> 
> 赞同：4
> 
> 时间：2012-06-23T17:35:15.877
> 
> 标签：php, wordpress

有没有办法根据包含的帖子数量对类别/分类列表进行排序？

问候， Desizner

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-01-05T06:17:52.983

您可以使用 get_categories() 函数并在 'taxonomy' 中传递以下值之一：'category'（仅获取类别）或 'post_tag'（仅获取标签），甚至删除此键，它会同时获取两者。下面我们按每个类别 DESC 的帖子排序。

```
<?php

$categories = get_categories([
    'taxonomy' => 'category',
    'orderby'  => 'count',
    'order'    => 'DESC'
]);

foreach ($categories as $category) {
   // Do something
}

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-13T11:00:31.873

目前（2017 年 9 月）我也使用[wp_list_categories](https://developer.wordpress.org/reference/functions/wp_list_categories/)（作为 Ryan B）但使用以下代码：

```
<?php wp_list_categories( array(
    'orderby'    => 'count',
    'order'      => 'DESC'
) ); ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-25T19:00:18.080

```
<?php    
    foreach (get_categories('orderby=count&order=DESC') as $category ) 
    {
    /*Some stuff here*/
    }

?> 
```

有关更多详细信息，请查看：[https ://developer.wordpress.org/reference/functions/get_categories/](https://developer.wordpress.org/reference/functions/get_categories/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T00:10:55.610

是的，请参阅[wp_list_category](http://codex.wordpress.org/Template_Tags/wp_list_categories)

```
<?php wp_list_category('orderby=count'); ?> 
```

是你会使用的

# sql - SQL查询基于另一个字段添加或减去值

> ID：11171603
> 
> 赞同：2
> 
> 时间：2012-06-23T17:36:59.790
> 
> 标签：sql

我需要计算一列的净总数——听起来很简单。问题是某些值应该是负数，如在单独的列中标记的那样。例如，下表将产生 (4+3-5+2-2 = 2) 的结果。我已经尝试在 select 子句中使用子查询来执行此操作，但是当我开始为我的表的其他部分添加分析时，它似乎不必要地复杂且难以扩展。任何帮助深表感谢！

```
Sign     Value
Pos        4
Pos        3
Neg        5
Pos        2
Neg        2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T17:45:39.940

使用`CASE`语句应该适用于大多数版本的 sql：

```
SELECT SUM( CASE
               WHEN t.Sign = 'Pos' THEN t.Value
               ELSE t.Value * -1
            END
          ) AS Total
FROM YourTable AS t 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T17:40:33.863

试试这个：

```
SELECT SUM(IF(sign = 'Pos', Value, Value * (-1))) as total FROM table 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-21T21:25:44.603

我使用 oracle 11g 作为数据库和 sql developer 作为用户界面，根据同一表中另一个字段的值从表中的单个字段添加行。

这有效：

```
SELECT COUNTRY_ID, SUM(
    CASE
        WHEN ACCOUNT IN 'PTBI' THEN AMOUNT
        WHEN ACCOUNT IN 'MLS_ENT' THEN AMOUNT
        WHEN ACCOUNT IN 'VAL_ALLOW' THEN AMOUNT
        WHEN ACCOUNT IN 'RSC_DEV' THEN AMOUNT * -1
    END) AS TI
FROM SAMP_TAX_F4
GROUP BY COUNTRY_ID; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T17:44:11.100

```
select a= sum(Value) where Sign like 'pos'
select b = sum(Value) where Signe like 'neg'
select total = a-b 
```

这是 abit sql-agnostic，因为你没有说你正在使用哪个 db，但应该很容易将它适配到那里的任何 db。

# r - glmmadmb 中的错误（.....）函数最大化失败（找不到 STD 文件）

> ID：11171604
> 
> 赞同：0
> 
> 时间：2012-06-23T17:37:03.207
> 
> 标签：r

这工作正常：

```
fit.mc1 <-MCMCglmm(bull~1,random=~school,data=dt1,family="categorical",
prior=list(R=list(V=1, fix=1), G=list(G1=list(V=1, nu=0))), slice=T) 
```

这样做也是如此：

```
fit.glmer <- glmer(bull~(1|school),data=dt1,family=binomial) 
```

但是现在我正在尝试使用该软件包`glmmadmb`，但这不起作用：

```
fit.mc12 <- glmmadmb(bull~1+(1|school), data=dt1, family="binomial", 
mcmc=TRUE, mcmc.opts=mcmcControl(mcmc=50000)) 
```

它会产生错误：

```
Error in glmmadmb(bull~ 1 + (1 | school), data = dt1, family = "binomial", : 
The function maximizer failed (couldn't find STD file)
In addition: Warning message:
running command '<snip>\cmd.exe <snip>\glmmadmb.exe" -maxfn 500 -maxph 5 
-noinit -shess -mcmc 5000 -mcsave 5 -mcmult 1' had status 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:14:32.040

嗯。任何可重复的例子的机会......？

以下简单的模拟案例似乎可以工作（尽管**with**`glmmADMB`比`mcmc`-它实际上还没有完成，尽管它似乎在没有抱怨的情况下继续进行）。**`MCMCglmm`**

 **对于这种简单的情况，我怀疑它`glmmADMB`是由 主导的`MCMCglmm`，尽管如果您正在与反贝叶斯裁判打交道，这可能会很有用......

```
nschool <- 20
nrep <- 20
dt1 <- expand.grid(school=LETTERS[1:nschool],rep=seq(nrep))
set.seed(101)
u.school <- rnorm(nrep)
dt1$eta <- u.school[dt1$school]
dt1$bull <- rbinom(nrow(dt1),size=1,prob=plogis(dt1$eta))

library(MCMCglmm)
fit.mc1 <-MCMCglmm(bull~1,random=~school,data=dt1,family="categorical",
                   prior=list(R=list(V=1, fix=1), G=list(G1=list(V=1, nu=0))),
                   slice=TRUE)

library(lme4)
fit.glmer <- glmer(bull~(1|school),data=dt1,family=binomial)

library(glmmADMB)
fit.mc12 <- glmmadmb(bull~1+(1|school), data=dt1, family="binomial", 
                     mcmc=TRUE, mcmc.opts=mcmcControl(mcmc=50000)) 
```**

# php - 从 mySQL PHP 到 XML foreach

> ID：11171613
> 
> 赞同：1
> 
> 时间：2012-06-23T17:38:47.320
> 
> 标签：php, mysql, xml

下面是我用来创建电影视频列表的代码。出于某种原因，我无法让 media:content 正常工作。

这就是我现在所拥有的

```
$xml_output .= "\t<media:content url='" . $row['name'].".m4v" . " type='video/mpg' />\n"; 
```

这是整个事情

```
 $xml_output = "<?xml version=\"1.0\"?>\n"; 
    $xml_output .= "<channel>\n"; 
    $xml_output .= "\t\t<title>Ellucid Movies</title>\n"; 
$xml_output .= "\t\t<link>http://google.com</link>\n"; 
 for($x = 0 ; $x < mysql_num_rows($resultID) ; $x++){ 
$row = mysql_fetch_assoc($resultID); 
    $xml_output .= "\t<item>\n"; 
    $xml_output .= "<title>" . $row['name'] .".m4v" . "</title>\n"; 
    $xml_output .= "<link>" . $row['link'] . "</link>\n"; 
$xml_output .= "\t<media:content url='" . $row['name'].".m4v" . " type='video/mpg' />\n";
$xml_output .= "\t</item>\n"; 
} 

$xml_output .= "</channel>"; 

echo $xml_output; 
```

当我注释掉媒体内容时，xml 按预期工作......当我添加媒体时，它什么也不做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T17:58:53.793

您正在添加一个命名空间元素

```
<media:content … 
```

但没有在任何地方声明命名空间。添加

```
 xmlns:media="http://search.yahoo.com/mrss" 
```

到你的根元素。

[另请参阅我对将 while 循环生成的 xml 分配给变量的](https://stackoverflow.com/questions/3108284/assigning-xml-generated-by-a-while-loop-to-a-variable/3108408#3108408)回答，了解如何使用 DOM 生成带有 DOM 的 XML。

# actionscript-3 - AS3 从 JPG/PNG 字节数组同步加载 bitmapData

> ID：11171619
> 
> 赞同：3
> 
> 时间：2012-06-23T17:39:58.997
> 
> 标签：actionscript-3, flash, air, png, jpeg

给定一个包含 JPG 或 PNG 数据的 ByteArray，有没有办法在 Adob​​e AIR 中同步检索相应的 BitmapData？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T17:53:52.457

[JPEG解码器](http://www.bytearray.org/?p=1089)

[PNG解码器](http://code.google.com/p/katopz/source/browse/branches/as3/cutecoma/src/PNGDecoder.as?r=174)

否则，使用 loadBytes。我会说使用 loadBytes，因为它不会停止你的线程。

# php - utf-8 邮件 php 希腊字符

> ID：11171621
> 
> 赞同：2
> 
> 时间：2012-06-23T17:40:28.493
> 
> 标签：php, email, utf-8

我在我的网站上创建了一个表单。我希望客户能够编写和发送希腊字符，但在邮件中我收到类似 Ï≥ÎµÏ∞Ï≥ ÎµÎ»Î»Î·Î∏Î'ÎºÎ± 而不是希腊字符。我尝试使用以下代码将编码更改为 UTF-8：

```
mail($recipient, $subject, '=?UTF-8?B?'.base64_encode($content).'?='); 
```

这个代码在我测试过的另一台服务器上工作，但在我的服务器上不起作用。有人可以帮忙吗？

* * *

这是我的完整 php 代码

```
<?php
if ((isset($_POST['name'])) && (strlen(trim($_POST['name'])) > 0)) {
$name = stripslashes(strip_tags($_POST['name']));
 } else {$name = 'No name entered';
 }
if ((isset($_POST['lastname'])) && (strlen(trim($_POST['lastname'])) > 0)) {
$lastname = stripslashes(strip_tags($_POST['lastname']));
 } else {$lastname = 'No name entered';
 }
if ((isset($_POST['nomos'])) && (strlen(trim($_POST['nomos'])) > 0)) {
$nomos = stripslashes(strip_tags($_POST['nomos']));
 } else {$nomos = 'No name entered';
 }
if ((isset($_POST['polh'])) && (strlen(trim($_POST['polh'])) > 0)) {
$polh = stripslashes(strip_tags($_POST['polh']));
 } else {$polh = 'No name entered';
 }
if ((isset($_POST['address'])) && (strlen(trim($_POST['address'])) > 0)) {
$address = stripslashes(strip_tags($_POST['address']));
 } else {$address = 'No name entered';
 }
if ((isset($_POST['TK'])) && (strlen(trim($_POST['TK'])) > 0)) {
$TK = stripslashes(strip_tags($_POST['TK']));
 } else {$TK = 'No name entered';
 }
if ((isset($_POST['email'])) && (strlen(trim($_POST['email'])) > 0)) {
$email = stripslashes(strip_tags($_POST['email']));
 } else {$email = 'No email entered';
 }
if ((isset($_POST['phone'])) && (strlen(trim($_POST['phone'])) > 0)) {
$phone = stripslashes(strip_tags($_POST['phone']));
 } else {$phone = 'No phone entered';
 }
if ((isset($_POST['sxolia'])) && (strlen(trim($_POST['sxolia'])) > 0)) {
$sxolia = stripslashes(strip_tags($_POST['sxolia']));
 } else {$sxolia = 'Δεν υπάρχουν σχόλια';
 }

 ob_start();
 ?>
<html>
<head>

<style type="text/css">
</style>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<table width="550" border="1" cellspacing="2" cellpadding="2">

<tr bgcolor="#eeffee">
 <td>Όνομα</td>
 <td><?=$name; ?></td>
</tr> 
<tr bgcolor="#eeffee">
 <td>Επίθετο</td>
 <td><?=$lastname; ?></td>
</tr>  
<tr bgcolor="#eeffee">
 <td>Νομός</td>
 <td><?=$nomos; ?></td>
</tr>
<tr bgcolor="#eeffee">
 <td>Πόλη</td>
 <td><?=$polh; ?></td>
</tr>
<tr bgcolor="#eeffee">
 <td>Διεύθυνση</td>
 <td><?=$address; ?></td>
</tr>
<tr bgcolor="#eeffee">
 <td>T.Κ</td>
 <td><?=$TK; ?></td>
</tr>

<tr bgcolor="#eeffee">
 <td>Τηλέφωνο</td>
 <td><?=$phone; ?></td>
</tr>

<tr bgcolor="#eeffee">
 <td>Email</td>
 <td><?=$email; ?></td>
</tr>

<tr bgcolor="#eeffee">
 <td>Σχόλια</td>
 <td><?=$sxolia; ?></td>
</tr>

</table>
</body>
</html>
<?
$body = ob_get_contents();

$to = 'mymail@yahoo.gr';
$email = 'mymail@yahoo.gr';
$fromaddress = "address";
$fromname = "Online Contact";

require ("phpmailer.php");

$mail = new PHPMailer();

$mail -> From = "address";
$mail -> FromName = "Book Order";

$mail -> AddAddress("mymail@gmail.com", "Name 5");

$mail -> WordWrap = 50;
$mail -> IsHTML(true);

$mail -> Subject = "Book Form:  Book form submitted";
$mail -> Body = $body;
$mail -> AltBody = "This is the text-only body";

if (!$mail -> Send()) {
$recipient = 'mymail@yahoo.gr';
$subject = 'Contact form failed';
$content = $body;

    $header = 'Content-type: text/html; charset=UTF-8' . "\r\n";
    mail($recepient,$subject, '=?UTF-8?B?'.base64_encode($content).'?=', $header);

exit ;
  }
 ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T18:07:48.857

主题或其他头字段值需要[*编码字*语法，但正文不需要；](https://stackoverflow.com/a/4389755/53114)在那里你可以使用 MIME 和*Content-Type*：

```
$headerFields = array('MIME-Version: 1.0', 'Content-Type: text/plain;charset=utf-8');
mail($recipient, '=?UTF-8?B?'.base64_encode($subject).'?=', $content, implode("\r\n", $headerFields)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:54:30.583

尝试这个。

```
$header = 'Content-type: text/plain; charset=UTF-8' . "\r\n";
mail($recepient,$subject, '=?UTF-8?B?'.base64_encode($content).'?=', $header); 
```

如果您要发送 html 电子邮件，请使用 Content-type: text/html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T17:57:22.003

从哪里来`$content`？在 mail() 发送之前`substr($content)`，您是否做了类似[多字节安全的事情？](http://php.net/manual/en/book.mbstring.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-06T15:05:13.503

这发生在希腊字符 φίλε μου 上。我编辑了邮箱的设置。例如在 Roundcube 设置 > 显示消息 > 高级设置 > 默认字符集 = UTF-8 (Unicode)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-11T15:31:15.807

```
/* Set internal character encoding to UTF-8 */
mb_internal_encoding("UTF-8");

$headers  = 'MIME-Version: 1.1';
$headers .= 'Content-type: text/html; charset=utf-8';
$headers .= "From: $name <$email>";
$headers .= "Return-Path: $emailTo";
$headers .= "Reply-To: $email";
$headers .= "X-Mailer: PHP/". phpversion(); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-07-25T11:37:24.610

在处理同样的问题 8 小时后，我在网上找到了解决方案......

它对我有用（php、html 表单和 mysql）=>

[http://akrabat.com/php/utf8-php-and-mysql/](http://akrabat.com/php/utf8-php-and-mysql/)

# c# - 如何复制win forms应用程序设置？

> ID：11171623
> 
> 赞同：3
> 
> 时间：2012-06-23T17:41:01.330
> 
> 标签：c#, .net, winforms, design-patterns

是否有类似于 memento 模式的通用方法来复制 windows 窗体应用程序`Settings.Default.PropertyValues`？我需要检查特定属性值是否已更改。

```
object state = CreateMemento(Settings.Default.PropertyValues);

// show windows dialog where properties may change and be saved

SettingsPropertyValueCollection settings = GetMemento(state);
if (IsSomePropertyChanged(settings, Settings.Default.PropertyValues);
    DoSomeAction(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T06:08:17.060

相关的设计模式可能是装饰器（您在保留接口的同时添加功能）或代理（一个对象在维护其接口的同时充当另一个对象的替代品）

您需要以某种方式将 Settings.Default.PropertyValues 代理为另一个对象，该对象查找要更改的设置并将所有更改委托给原始对象。这是否可以在系统范围内完成，或者您必须手动完成，所以您的所有代码都必须使用 myProxyForSettings.Default.PropertyValues 我不知道。

# php - 检查空数组并删除空数组

> ID：11171625
> 
> 赞同：1
> 
> 时间：2012-06-23T17:41:26.187
> 
> 标签：php, arrays

我在数组中有 100 个值，需要检查前十个值是否为空，如果没有取消设置值，所有元素应该是相同的计数，我使用“|” 用于梳理所有值，

我所有的价值观都用“|”内爆 下面是我使用的函数，我没有按要求得到最终结果，下面给出了最终值，你能帮忙解决这个问题吗

```
finalvalues =array(
    "3" =>"Education|Category|Roles|Industry|Address|Email|Phone|Mobile",
    "4" => "Bsc|computer|SE|Computers||test@test.com|123123132|123234234234"
);

$values = array(
        "0"=> "Computer Student History",
        "1"=> "Computer Student History",
        "2"=> "Computer Student History|batch number",
        "3" =>  "| | | | | | | | | | | | | | | | ",
        "4" => "Education|Category|Roles|Industry|Address|Email|Phone|Mobile",
        "5" => "Bsc|computer|SE|Computers||test@test.com|123123132|123234234234"
);

$newVal = array();
    foreach ($values as $key => $val) { //$values it is..
     $prevalues = explode('|', $val);
     $finalvalue  = array_empty($prevalues ,$full_null=true);
      if($finalvalue == 1){
         unset($prevalues); //why??
     }else{
    $vales = implode('|', $prevalues);
    $newVal[$key] = $vales; //use $key, to preserve the keys here..
     }
     }
   print_r($newVal); //output

  function array_empty($ary, $full_null=false){

   unset($prevKey);
   $count = array();
   $null_count = 0;
   $ary_count = count($ary);
   if ($ary_count == 1) //this means there was no '|', hence no split.
    return 1;

   foreach($array_keys($ary) as $value){
    //      echo $value;
//trying check if first value is less then second value unset array similar second is less then third value unset second .. so the all the array values is same count

$count[$value] = count($ary[$value]);
    if (isset($prevKey) && $count[$prevKey] !== $count[$value]) {
    //unset($array[$prevKey]);
    return 1;
    }

    if($value == NULL || trim($value) == "" ){ // trim(..) was what you wanted.
        $null_count++;
    }
   }

if($full_null == true){
    if($null_count == $ary_count){
        return  1;
    }else{
        return 0;
    }
   }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T18:15:40.627

这应该可以帮助您（带有内联注释）：

```
$newVal = array();
foreach ($values as $key => $val) { //$values it is..
    $prevalues = explode('|', $val);
    $finalvalue  = array_empty($prevalues ,$full_null=true);
    if($finalvalue == 1){
        unset($prevalues); //why??
    }else{
        $vales = implode('|', $prevalues);
        $newVal[$key] = $vales; //use $key, to preserve the keys here..
    }
}
print_r($newVal); //output

function array_empty($ary, $full_null=false){
    $null_count = 0;
    $ary_count = count($ary);
    if ($ary_count == 1) //this means there was no '|', hence no split.
        return 1;

    foreach($ary as $value){
    //      echo $value;
        if($value == NULL || trim($value) == "" ){ // trim(..) was what you wanted.
            $null_count++;
        }
    }

    if($full_null == true){
        if($null_count == $ary_count){
            return  1;
        }else{
            return 0;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T20:55:55.783

这里有一些更简单，而不是疯狂的方法

**PHP 5.3+**

```
$final = array_filter(
    $values,
    function( $v ){
        return
            preg_replace( '~\s*\|\s*~', '', $v ) &&
            count( explode( '|', $v ) ) === 8;
    }
); 
```

**PHP < 5.3**

这直接编辑 $values 数组

```
foreach( $values as $k => $value ) {
    if ( preg_replace( '~\s*\|\s*~', '', $value ) == '' || count( explode( '|', $value ) ) !== 8 ) {
        unset( $values[$k] );
    }
} 
```

# ubuntu - 重新加载 Freeradius 客户端而不重新启动服务

> ID：11171626
> 
> 赞同：1
> 
> 时间：2012-06-23T17:41:26.913
> 
> 标签：ubuntu, service, configuration, freeradius

有没有办法在不重新启动服务的情况下重新加载 Freeradius 客户端配置？我在用着：

*   Ubuntu 服务器 12
*   自由半径 2.1.10
*   MySQL v5.5.20（我将客户端存储在“nas”表中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:07:03.577

Freeradius 处理 HUP 信号。

所以，这应该做的工作：

> 杀死 -HUP $(cat /var/run/radiusd/radiusd.pid)

# javascript - javascript对象的一些错误

> ID：11171630
> 
> 赞同：0
> 
> 时间：2012-06-23T17:41:36.327
> 
> 标签：javascript, javascript-objects

我开始讨厌 javascript 中的对象。

每次我有错误并修复它时，都会出现一个新错误，依此类推。
你能看看下面的代码并告诉我有什么问题吗？

问题信息：
“this.Images is undefined”还有更多错误

**HTML 文件**

```
<div id="SlideShow" >
   <img id="img" src="images/img.jpg" alt="" /><span id="desc"></span>
</div>

<script type="text/javascript">
    meToo.Images = ['images/img.jpg','images/img2.jpg','images/img3.jpg','images/img4.jpg','images/img5.jpg'];
    meToo.Titles = ['Pic1','pic2','Pic3','Pic4','Pic5'];
    meToo.Play('img');
</script> 
```

**Javascript 对象**

```
var meToo = {
     Images: [],
     Titles: [],
     counter: 0,
     Play: function(ElemID){
         var element = document.getElementById(ElemID);
         var ImgLen = this.Images.length;

         if(this.counter < ImgLen){
             this.counter++;
             element.src = this.Images[this.counter];
             element.nextSibling.innerHTML = this.Titles[this.counter];
         }else{
             this.counter = 0;
         }
         setTimeout(this.Play, 1000);
    }   
}; 
```

请参阅[示例](http://jsfiddle.net/f56gk/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T17:55:17.943

[**看到这个问题**](https://stackoverflow.com/questions/1101668/how-to-use-settimeout-to-invoke-object-itself)。否则 setTimeout 设置`this`为窗口对象。此外，设置图像后计数器应递增，否则您将在数组边界之外读取。

最后，当将计数器重置为 0 时，在循环重新开始之前会有额外的一秒延迟，因为该`else`块中的图像没有被重置。您可能希望重写这部分逻辑。

[**更新小提琴**](http://jsfiddle.net/f56gk/10/)

```
 if(this.counter < ImgLen){
        element.src = this.Images[this.counter];
        element.nextSibling.innerHTML = this.Titles[this.counter];
        this.counter++;
    }else{
        this.counter = 0;
    }
    var _this = this;
    setTimeout(function() { _this.Play('img') }, 1000); 
```

[**这**](http://jsfiddle.net/f56gk/11/)就是我要写的以保持循环以一秒为间隔进行的内容：

```
Play: function(ElemID) {
    var element = document.getElementById(ElemID);
    var ImgLen = this.Images.length;

    if (this.counter == ImgLen) {
        this.counter = 0;
    }
    element.src = this.Images[this.counter];
    element.nextSibling.innerHTML = this.Titles[this.counter];
    this.counter++;

    var _this = this;
    setTimeout(function() {
        _this.Play('img')
    }, 1000);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T17:47:16.510

```
if(this.counter < ImgLen) 
```

是错的。

这里会发生的是，当你跑步时

```
this.counter++; 
```

该变量的值现在将是 ImgLen.length

javascript中的数组从0到长度-1。所以现在你将超过数组的长度，当你运行时：

```
this.Images[this.counter]; 
```

并遇到错误。

这里的快速解决方法是更改​​为

```
if(this.counter < ImgLen -1) 
```

如果您遇到其他问题，请发布确切的错误消息。（在 Chrome 中运行并按 F12（例如）调出控制台，以便查看错误）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T18:37:37.090

在这里检查一下。它应该非常适合你。我已经把它变成了一个单例对象，并且我正在检查是否在加载 dom 之前调用了 meToo.Play 它不会崩溃。这些家伙的所有其他错误以上都是指点，也有照顾。

```
 <script>
    var meToo = function(){
    var Images = ['http://www.image-upload.net/di/WMPI/img.jpg','http://www.image-upload.net/di/HPUQ/img2.jpg','http://www.image-upload.net/di/WQ9J/img3.jpg','http://www.image-upload.net/di/GIM6/img4.jpg','http://www.image-upload.net/di/0738/img5.jpg'];
    var Titles = ['Pic1','pic2','Pic3','Pic4','Pic5'];
    var counter = 0;
    return {
        Play: function(ElemID) {
            var element = document.getElementById(ElemID);
            if(element){
                var ImgLen = Images.length;

                if(counter < ImgLen) {
                    element.src = Images[counter];
                    element.nextSibling.innerHTML = Titles[this.counter];
                    counter++;
                } else {
                    counter = 0;
                }
            }
            setTimeout(callmeToo, 1000);
        }
    }
    }();

    function callmeToo(){
        meToo.Play('img');  
    }

    callmeToo();
</script> 
```

# java - 编译 Java/Scala 混合项目和 Lombok 时出错

> ID：11171631
> 
> 赞同：13
> 
> 时间：2012-06-23T17:42:03.480
> 
> 标签：java, scala, maven, lombok

我正在尝试编译一个 Maven Java/Scala 混合项目，该项目具有一个依赖于带有 lombok 注释的 Java bean 的 Scala 类。我尝试将 lombok jar 文件添加到 Scala 编译器的引导类路径以及 lombok 代理，但编译器仍然无法找到生成的 getter。Scala 编译器有没有办法识别 lombok 注释？如果没有，什么是好的解决方法？

请注意，我试图避免引入另一个 maven 项目只是为了首先编译这个 bean，因为 bean 在逻辑上属于同一个项目。我也不能在 Scala 中重写 bean，因为它后来在 GWT 项目中使用。

谢谢，

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-23T18:42:52.937

我认为你将无法避免它。正常的 Scala/Java 集成是这样工作的：

1.  首先是 Scala，因为 Java 对 Scala 一无所知。
    1.  Scalac 解析 Java 文件并了解可见元素。
    2.  Scalac 读取 Scala 文件并生成类文件。
2.  Java 排在最后，读取 Java 文件和 Scala 生成的类文件。

明显的问题是 Scala 对 Lombok 注释一无所知，因此它无法弄清楚它生成的元素。

如果 Java 对 Scala 没有任何依赖关系，则可以简单地颠倒顺序：让 Java 先走，让 Scala 在其类路径中包含 javac 的输出类文件。

否则，我想你需要打破它。

# php - 具有爆炸功能的打印数组..？

> ID：11171632
> 
> 赞同：1
> 
> 时间：2012-06-23T17:42:05.453
> 
> 标签：php, arrays

大家好，当我想“print_r”我已经“爆炸”的变量字符串时，我遇到了一个问题。详情如下。。

```
$var  = "1,2,3,4,5";
$sat = explode(',',$var);

echo"`<pre>`";

print_r($sat); 
```

我想要这样的结果...

```
Array
(
    [0] => Array

        (
            [new] => 1
        )
    [1] => Array
        (
            [new] => 2
        )
    [2] => Array
        (
            [new] => 3
        )
    [4] => Array
        (
            [new] => 4
        )
    ...
) 
```

但是当我尝试我的脚本时，它与上面的不同。我的脚本有什么问题，我应该怎么做，所以数组的结果可以像上面一样。请帮帮我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T17:45:04.440

使用 array_map 来构建子数组。见[array_map](http://php.net/manual/en/function.array-map.php)

尝试关闭 pre 标签。当您在浏览器中转储数组时，您依赖浏览器来格式化您的数组。但是您没有关闭 pre 标记，这无助于 html 格式化数组！

```
$var = "1,2,3,4,5";

$sat = explode(',', $var);

$sat = array_map("buildArray", $sat);

dump($sat);

function buildArray($value)
{
    return array(
        'new' => $value
    );

}

function dump($res)
{
    echo '<pre>';

    print_r($res);

    echo '</pre>';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T17:48:17.993

```
$var  = "1,2,3,4,5";
$sat = explode(',',$var);
$sat = array_map(function($value) { return array('new' => $value); }, $sat );

var_dump($sat); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T18:39:54.833

```
$var  = "1,2,3,4,5";
$sat = explode(',',$var);

function p($value) { return array('new' => $value); }

$sat = @array_map(p, $sat );

echo("<pre>");
print_r($sat);
echo("</pre>"); 
```

# java - 通过不同的线程访问变量和摆动组件

> ID：11171636
> 
> 赞同：5
> 
> 时间：2012-06-23T17:42:17.107
> 
> 标签：java, multithreading, swing, event-dispatch-thread

这个问题与我在[这里](https://stackoverflow.com/questions/11168925/how-to-keep-a-method-running-continuously-in-background-until-the-program-ends)问的问题有些相关。现在，我有一个“控制器”类，它由主要方法和所有摆动组件组成。有一个名为“VTOL”的类，它由一个名为“altitude”的变量组成（到目前为止，我已将该变量声明为 volatile）。

这是一个由在后台运行的线程组成的类：

```
import java.util.logging.Level;
import java.util.logging.Logger;

/**
 *
 * @author Vineet
 */
public class Gravity extends Thread {

    String altStr;
    double alt;
    Controller ctrl = new Controller();

    @Override
    public void run() {
        while (true) {
            alt=VTOL.altitude;
            System.out.println(alt);
            alt = alt-0.01;
            VTOL.altitude= (int) alt;
            altStr=new Integer(VTOL.altitude).toString();
            ctrl.lblAltitude.setText(altStr);
            try {
                Thread.sleep(10);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    }
} 
```

首先，我最初面临的问题是它无法更新“高度”的值，它在整个程序执行过程中保持为 0。所以我宣布它为 volatile （我不知道它是否是一个好习惯）

其次，Controller 类中有一个名为“lblAltitude”的 jLabel，我希望在此线程中更改它的值时更新它的值，但不知何故那没有发生。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T18:12:27.243

一种解决方案是使用 SwingPropertyChangeSupport 对象，使高度成为此支持对象的“绑定”属性，让您的 GUI 侦听此模型类，从而通知 GUI 高度变化。

例如，

```
import java.beans.PropertyChangeListener;
import javax.swing.event.SwingPropertyChangeSupport;

public class Gravity implements Runnable {
   public static final String ALTITUDE = "altitude";
   private SwingPropertyChangeSupport swingPcSupport = new SwingPropertyChangeSupport(this);
   private volatile double altitude;

   @Override
   public void run() {
      while (true) {
         double temp = altitude + 10;
         setAltitude(temp); // fires the listeners
         try {
            Thread.sleep(10);
         } catch (InterruptedException e) {
            e.printStackTrace();
         }
      }

   }

   public double getAltitude() {
      return altitude;
   }

   public void setAltitude(double altitude) {
      Double oldValue = this.altitude;
      Double newValue = altitude;

      this.altitude = newValue;

      // this will be fired on the EDT since it is a SwingPropertyChangeSupport object
      swingPcSupport.firePropertyChange(ALTITUDE, oldValue, newValue);
   }

   public void addPropertyChangeListener(PropertyChangeListener listener) {
      swingPcSupport.addPropertyChangeListener(listener);
   }

   public void removePropertyChangeListener(PropertyChangeListener listener) {
      swingPcSupport.removePropertyChangeListener(listener);
   }

} 
```

对于更完整的可运行示例：

```
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import javax.swing.*;
import javax.swing.event.SwingPropertyChangeSupport;

public class GravityTestGui extends JPanel {
   private static final long ALT_SLEEP_TIME = 400;
   private static final double ALT_DELTA = 5;
   JLabel altitudeLabel = new JLabel("     ");
   private Gravity gravity = new Gravity(ALT_SLEEP_TIME, ALT_DELTA);

   public GravityTestGui() {
      add(new JLabel("Altitude:"));
      add(altitudeLabel);

      gravity.addPropertyChangeListener(new PropertyChangeListener() {

         @Override
         public void propertyChange(PropertyChangeEvent pcEvt) {
            if (Gravity.ALTITUDE.equals(pcEvt.getPropertyName())) {
               String altText = String.valueOf(gravity.getAltitude());
               altitudeLabel.setText(altText);
            }
         }
      });

      new Thread(gravity).start();
   }

   private static void createAndShowGui() {
      GravityTestGui mainPanel = new GravityTestGui();

      JFrame frame = new JFrame("GravityTest");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }

}

class Gravity implements Runnable {
   public static final String ALTITUDE = "altitude";
   private SwingPropertyChangeSupport swingPcSupport = new SwingPropertyChangeSupport(this);
   private volatile double altitude;
   private long sleepTime;
   private double delta;

   public Gravity(long sleepTime, double delta) {
      this.sleepTime = sleepTime;
      this.delta = delta;
   }

   @Override
   public void run() {
      while (true) {
         double temp = altitude + delta;
         setAltitude(temp); // fires the listeners
         try {
            Thread.sleep(sleepTime);
         } catch (InterruptedException e) {
            e.printStackTrace();
         }
      }

   }

   public double getAltitude() {
      return altitude;
   }

   public void setAltitude(double altitude) {
      Double oldValue = this.altitude;
      Double newValue = altitude;

      this.altitude = newValue;

      // this will be fired on the EDT since it is a SwingPropertyChangeSupport object
      swingPcSupport.firePropertyChange(ALTITUDE, oldValue, newValue);
   }

   public void addPropertyChangeListener(PropertyChangeListener listener) {
      swingPcSupport.addPropertyChangeListener(listener);
   }

   public void removePropertyChangeListener(PropertyChangeListener listener) {
      swingPcSupport.removePropertyChangeListener(listener);
   }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-23T17:44:56.760

每当您修改一个 Swing 组件时，您都需要确保该事件发生在 Event Dispatch Thread（即 EDT）中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T18:53:12.450

第三种方法是让 Swing 组件了解模型 VTOL。

在 Gravity 中，您将更新 VTOL.altitude，然后在组件上调用 repaint。例如

```
while (true) {
  VTOL.altitude -= 0.01;
  VTOL.makeAnyOtherChangesHereAsWell();

  controller.repaint();
  // sleep, break etc. left as an exercise for the reader
} 
```

然后，在控制器的 paintComponent() 方法中（或者可能在所有绘图调用中的其他地方，它需要在其他地方的可能性很小......），你*知道*它在 EDT 上运行

```
// update my widgets from the VTOL model - may want this in a method
String altStr=new Integer(VTOL.altitude).toString();
this.lblAltitude.setText(altStr);  
// may be more, e.g. ...
this.lblFuelSupply.setText(VTOL.getFuelSupply());

super.paintComponent();  // now go draw stuff... 
```

这比 SwingPropertyChangeSupport 耦合得更紧一些，但耦合都是在非常相关的类之间，所以它是“合理的”，在某些方面这可能会“更清晰”。并且事件调度队列将结合多次重绘，所以这并不像它第一次出现的那样低效。如果多个线程正在更新内容并将多个 repaints() 排队，则只有最后一个 repaint() 实际执行任何操作。

一个缺点是，如果您的 GUI 有大量小部件，并且您每次都更新它们，这可能会有点慢。但如今处理器速度惊人。

# c# - System.Security.Cryptography 命名空间中不存在 MD5

> ID：11171637
> 
> 赞同：2
> 
> 时间：2012-06-23T17:42:26.357
> 
> 标签：c#, silverlight, md5

我利用 Visual Studio 2010 用 C#（使用 silverlight）编写了一个简单的应用程序，以从字符串中获取 MD5 代码。我包括了*System.Security.Cryptography*但标题中出现了错误。你能帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T17:46:34.610

该类`MD5`仅在 .NET 框架中可用，在 Silverlight 中不可用。如果您绝对必须使用 MD5，则必须通过外部开发的 MD5 实现，例如[这个](http://archive.msdn.microsoft.com/SilverlightMD5)。

最好，如果这是您的选择，请考虑[`SHA1`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.sha1)改用。SHA1 既是一种更安全的散列函数（按照当今的标准，MD5 确实不被认为是安全的）*，并且*在 Silverlight 中可用。

# c# - asp.net 中的 Cookie 错误

> ID：11171641
> 
> 赞同：0
> 
> 时间：2012-06-23T17:43:02.443
> 
> 标签：c#, asp.net, cookies, webmatrix

我是 asp.net 的新手我正在尝试在网络矩阵中创建一个 cookie 这是我的代码

```
 <%
        Response.Cookies("ssn") = StudentNumber
        Response.Cookies("ssn").Expires = Date + 365
%> 
```

它在“％”处显示错误，这是为什么？错误信息是

> 未知元素 '%' 或元素不能放在此处。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T17:51:23.683

而不是*Response*，您可以尝试*HttpContext.Current.Response*

```
<%
        HttpContext.Current.Response.Cookies("ssn") = StudentNumber
        HttpContext.Current.Response.Cookies("ssn").Expires = Date + 365
%> 
```

**编辑**

```
@{
     Response.Cookies["ssn"].Value = StudentNumber;
     Response.Cookies["ssn"].Expires = DateTime.Now.AddDays(365);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:53:33.250

[Cookie.Expires](http://msdn.microsoft.com/en-us/library/system.net.cookie.expires.aspx)是 DateTime，我认为没有任何内置的“+”操作会产生 DateTime。

您可能想要`= Date.AddDays(365)`（假设 Date 的类型为 DateTime）。

或者使用[带有 TimeSpan 的“+”](http://msdn.microsoft.com/en-us/library/system.datetime.op_addition)：

```
Response.Cookies("ssn").Expires = Date + TimeSpan.FromDays(365); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T18:02:04.820

```
@{
        Response.Cookies("ssn") = StudentNumber;
        Response.Cookies("ssn").Expires =DateTime.Now;
} 
```

# image - 图像映射和 HTML5

> ID：11171647
> 
> 赞同：7
> 
> 时间：2012-06-23T17:43:34.487
> 
> 标签：image, html, polygon, imagemap

这个问题比技术更哲学。

当 Web 开发人员被称为网站管理员时，我已经将自己训练为 Web 开发人员，而我选择的工具是 FrontPage，进入 Evrsoft 1st Page 2000。

那是我最后一次使用 HTML 图像映射。

现在是 HTML5、AJAX、矢量画布、CSS 3D、jQuery、本地存储、触摸屏 Safari，应有尽有。图像地图已经变得晦涩难懂，甚至谷歌也没有提供太多相关结果；自 2004 年以来，强制性 W3C 学校条目和一些论坛帖子。

显然，使用图像地图创建网站导航或类似的琐事在当时是一个坏主意，今天肯定是不可原谅的。

但是现在我的任务是在带有背景图像的 div 顶部创建一个多边形可点击区域。

我在图像映射中这样做没有问题，因为它似乎是为完全类似的用例而设计的，虽然我没有做过任何测试，但我无法想象任何浏览器会放弃对一个运行良好的元素的支持多年。但我忍不住想，今天一定有更好的方法来做到这一点。

我的网页创作理念是为 IE5.5 开发，然后为 Chrome 边缘设计。这意味着该网站首先需要在最过时的浏览器上进行基本的工作，然后开始添加 JS 和 CSS 以使其更漂亮、更实用、更快、更简单、更友好和更好。

因此，虽然我知道我可以在 Raphaël 中制作画布并添加各种时髦的悬停效果和东西，但我认为制作如此简单的功能不应该需要 89 kb（或 X kb）的 JS 库。甚至是 JS。

我不知道 CSS3 是否具有定义多边形区域的能力，但在认识到 CSS3 引入的巨大可能性的同时，我更喜欢将在那里定义的任何东西保留为非必要的风格，可以优雅地退化。

因此，在当今的 webdev 世界中，定义多边形点击区域的最跨浏览器方式是什么（最好是通过 jQuery`.hover()`或至少是 CSS可抓取的方式`:hover`），它不依赖于可用的 JavaScript 或 CSS 属性在少数浏览器中？图像映射真的是唯一的方法吗？移动设备呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T18:06:57.720

为什么使用图像地图导航不可原谅？它和其他任何工具一样；它有时间和地点。使用带有 javascript 增强功能的图像映射是向后兼容的，可以优雅地降级，并且具有 100% 的浏览器支持。它们不需要像 flash 这样的插件。自从 Web 浏览器问世以来，它们实际上就得到了支持。旧的东西并不意味着它没有用；恰恰相反，这意味着它得到了很好的支持。

我编写了一个名为[ImageMapster](http://www.outsharked.com/imagemapster/)的 jquery 插件来为图像地图添加效果，这样您就可以在不使用 Flash 的情况下创建交互式图像。在这些情况下，通过替换为列表，可以很容易地实现一个没有 Javascript 支持的具有相同功能的工具。就个人而言，我认为尝试在没有 javascript 的情况下为 web 编写就像尝试在没有轮胎的情况下驾驶汽车。没有它，99% 的网络都无法工作。这不是 1995 年。但如果您真的担心，图像地图的好处是基本的导航功能仍然有效。仅使用 CSS 无法做到这一点——如果您有不规则形状的区域，甚至 CSS3 也无法实现。

# java - 阶乘法——递归还是迭代？（爪哇）

> ID：11171648
> 
> 赞同：8
> 
> 时间：2012-06-23T17:43:39.067
> 
> 标签：java, recursion, iteration

我在完成 Euler 项目时遇到了一个组合问题。组合逻辑意味着计算阶乘。所以，我决定创建一个阶乘方法。然后我遇到了一个问题——因为我可以很容易地使用迭代和递归来做到这一点，我应该选择哪一个？我很快写了 2 个方法 - 迭代：

```
public static long factorial(int num) {
        long result = 1;
        if(num == 0) {
            return 1;
        }
        else {
            for(int i = 2; i <= num; i++) {
                result *= i;
            }
            return result;
        } 
```

和递归：

```
public static long factorial(int num) {
        if(num == 0) {
            return 1;
        }
        else {
            return num * factorial(num - 1);
        }
    } 
```

如果我（显然）在这里谈论速度和功能，我应该使用哪一个？而且，一般来说，其中一种技术通常比另一种更好（所以如果我以后遇到这种选择，我应该选择什么）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-23T17:55:30.667

两者都是无可救药的天真。任何一个严重的阶乘应用都不会使用。我认为两者对于大 n 来说都是低效的，当论点很大时，两者`int`都`long`不够。

更好的方法是使用良好的[gamma 函数](http://mathworld.wolfram.com/GammaFunction.html)实现和记忆。

[这是](http://introcs.cs.princeton.edu/java/91float/Gamma.java.html)Robert Sedgewick 的一个实现。

较大的值将需要对数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T17:59:02.163

每当您可以在递归和迭代之间进行选择时，请始终进行迭代，因为

1.递归涉及创建和销毁栈帧，成本高。

2.如果您使用非常大的值，您的堆栈可能会爆炸。

所以只有当你有一些非常诱人的理由时才去递归。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-09T10:30:05.547

我实际上是按时间因素分析这个问题。我做了两个简单的实现：

迭代：

```
private static BigInteger bigIterativeFactorial(int x) {
    BigInteger result = BigInteger.ONE;
    for (int i = x; i > 0; i--)
        result = result.multiply(BigInteger.valueOf(i));
    return result;
} 
```

和递归：

```
public static BigInteger bigRecursiveFactorial(int x) {
    if (x == 0)
        return BigInteger.ONE;
    else
        return bigRecursiveFactorial(x - 1).multiply(BigInteger.valueOf(x));
} 
```

测试都在单线程上运行。事实证明，仅使用小参数迭代会稍微快一些。当我把 n 大于 100 时，递归解决方案更快。我的结论？您永远不能说迭代解决方案比 JVM 上的递归解决方案更快。（仍然只谈时间）

如果你感兴趣，我得到这个结论的整个方法都在[这里](http://blog.fkubala.pl/factorial-deeper-analysis/)

如果您有兴趣更深入地理解这两种方法之间的差异，我在 Knowledge-cess.com 上找到了非常好的[描述](http://knowledge-cess.com/recursion-vs-iteration-an-analysis-fibonacci-and-factorial/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T17:59:11.643

对于这个问题，没有“这更好，那更糟”。因为现代计算机非常强大，所以在 Java 中，它往往是您使用的个人偏好。您在迭代版本中进行了更多检查和计算，但是在递归版本中您将更多方法堆积到堆栈中。各有优劣，所以你必须逐案处理。

就个人而言，我坚持使用迭代算法来避免递归的逻辑。

# php - 将图像上传到网站并重命名

> ID：11171649
> 
> 赞同：0
> 
> 时间：2012-06-23T17:43:42.263
> 
> 标签：php, image, upload

向我的网站添加新项目时，我会搜索要上传到我的网站的项目图片。找到文件并填写表格后，我单击添加。这应该拍摄我的本地照片并将其存储到我的 images/rental 目录中。此外，图片将自动以项目编号命名，并在文件名中添加拇指（例如：109_thumb.jpg）。

这是我在更改目录后尝试过的代码，但还不能让它再次工作。

```
<tr>
<td align="right" class="tdTextBold">Thumb Image:           
</td>
<td><font class="errMsgB">*</font></td>
<td align="left">
<input  id="fiuImage1" type="file"  name="fileRentalThumbImage" /><div class="VCenter100" id="preview3" align="center"><?  if ($rentalThumbImage!="" && $rentalThumbImage!=null)?><img src="../<? echo $rentalThumbImage; ?>" width="80" height="100"  /></div> 
<!--<div class="column">
<table width="100%" cellpadding="0"  cellspacing="0" border="0">

<tr>

<td>
<? 
if ($rentalThumbImage!="" && $rentalThumbImage!=null)
{
?>
<div class="VCenter100" id="preview1" align="center"><?  if ($rentalThumbImage!="" && $rentalThumbImage!=null)?><img src="../<? echo $rentalThumbImage; ?>" /></div>
<?
}
else
{
?>
<div class="VCenter100" id="preview1" align="center">Thumb Image</div>
<?
}
?>          
</td>
<td>&nbsp;</td>
<td>
<div class="column">
<div class="file_button">
<input id="uploadButton" style="WIDTH: 120px" type="button" value="Browse" name="file1" />  <input class="hiddenMask" id="fiuImage1" type="file" onchange="prePicture(this.name,'preview1')" name="fileRentalThumbImage" /> 
</div>
<input style="WIDTH: 100px" onclick="document.frmMovie.rentalThumbImage.value='';removeImage('fiuImage1','preview1'); get('haveImage1').value='N';" type="button"  value="Delete" name="remoteImage1"/> 
</div>
<div style="CLEAR: both">   
     </div>                             </td>
<td>&nbsp;</td>
</tr>
</table>     
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:50:18.630

您需要将图像上传到服务器然后显示它或使用 HTML 5 文件 API。由于您使用的是 PHP，以下是前者的示例：

```
<form enctype="multipart/form-data" method="post" action="">
    <input  id="fiuImage1" type="file"  name="file" />
    <input type="submit" />
    <div class="VCenter100" id="preview3" align="center">
        <?php
            if( $_FILES["file"] ) {

                if (file_exists("upload/" . $_FILES["file"]["name"])) {
                    echo $_FILES["file"]["name"] . " already exists. ";
                } else {
                    move_uploaded_file($_FILES["file"]["tmp_name"],
                    "upload/" . $_FILES["file"]["name"]);
                    //Stored in: upload/$_FILES["file"]["name"];
                }
                ?>
                <img src="upload/<?= $_FILES["file"]["name"] ?>" width="80" height="100"  />
                <?php
            }

        ?>
    </div>  
</form> 
```

# raphael - raphaeljs：将转换拖放到 Paper.set()

> ID：11171656
> 
> 赞同：2
> 
> 时间：2012-06-23T17:44:14.580
> 
> 标签：raphael

我开始使用 raphaeljs，但是在拖动并将转换应用到 Paper.set() 时遇到了一个小问题

这是我的例子：http: [//jsfiddle.net/PQZmp/2/](http://jsfiddle.net/PQZmp/2/)

1）为什么拖动事件只添加到`marker`而不是`slider`？

2）转换应该是相对的（即`translate by`而不是`translate to`），但是如果我拖动`marker`两次，第二次拖动从头开始而不是从第一次的结尾开始。

**编辑：** 零响应后，我创建了一个新的 JSFiddle 示例：http: [//jsfiddle.net/9b9W3/1/](http://jsfiddle.net/9b9W3/1/)

1）如果`this`引用`set`而不是集合的第一个元素会很酷。这不能做`dragger.apply(slider)`吗？我试过了，但只适用于该方法的第一次执行（也许在 Raphael 内部它已经完成了，但是对于内部的第一个元素`set`而不是`set`）

2）根据Raphael [docs](http://raphaeljs.com/reference.html#Element.transform)，转换应该相对于对象位置（即`translate by`而不是`translate to`）。但这不是根据上面的 jsfiddle 发生的事情（检查两个标记拖动事件）。

3）所以`2)`上面创建了第三个问题。如果 a`transform("t30,0")`是 a `translation by 30px horizontally`，如何计算原点？基于`attr("x")`或`getBBox().x`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T19:56:13.793

拖动事件实际上被添加到标记和滑块中——但是您的滑块的笔划宽度为 1 并且没有填充，因此除非您捕捉到确切的边框，否则单击会“穿过”画布。

这背后是另一个问题：拖动被应用于两个元素，但`this`在你的拖动处理程序中引用了一个特定的元素，*而不是*集合——所以两个元素将相互独立地拖动。

最后：每次拖动都是从初始位置开始的原因是因为 dx，dy 参数`dragger`是相对于初始拖动事件的坐标，并且您的变换不考虑以前的变换。考虑这样的替代方案：

```
var r = new Raphael(0, 0, 400, 200);
var marker = r.path("M10,0L10,100").attr({"stroke-width": 5});
var button = r.rect(0, 0, 20, 20, 1).attr( { 'stroke-width': 2, fill: 'white' } );
var slider = r.set( marker, button );

var startx, starty;

var startDrag = function(){
    var bbox = slider.getBBox();
    startx = bbox.x;
    starty = bbox.y;
    console.log(this);
}, dragger = function(dx, dy){
    slider.transform("t" + ( startx + dx ) + "," + starty );
}, endDrag = function(){

};

slider.drag(dragger, startDrag, endDrag); 
```

要解决您的更新：

1.  我相信您可以将执行拖动功能的上下文指定为 element.drag 的可选第四、第五和六个参数。我自己没有尝试过，但看起来这应该很好用：

    slider.drag（拖动器，startDrag，endDrag，滑块，滑块，滑块）；

2.  变换是相对于对象位置的。这对第一个滑块很有效，因为它的起始位置是 0，但对第二个滑块不太好，因为...

3.  ...最小/最大滑块的转换实际上应该相对于比例，而不是单个标记。因此，您会注意到，当您将鼠标光标拖回零位置时，您的最大滑块（红色滑块）会返回到其初始位置。说得通？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T06:02:29.027

```
 var position;
    var rect = paper.rect(20, 20, 40, 40).attr({
            cursor: "move",
            fill: "#f00",
            stroke: "#000"
    });
    t = paper.text(70,70, 'test').attr({
            "font-size":16, 
            "font-family": 
            "Arial, Helvetica, sans-serif" 
    });
    var st = paper.set();
    st.push(rect, t);
    rect.mySet = st;
    rect.drag(onMove, onStart, onEnd);
    onStart = function () {
        positions = new Array();
        this.mySet.forEach(function(e) {
            var ox = e.attr("x");
            var oy = e.attr("y");
            positions.push([e, ox, oy]);
        });
    }
    onMove = function (dx, dy) {
        for (var i = 0; i < positions.length; i++) {//you can use foreach but I want to
             // show that is a simple array
            positions[i][0].attr({x: positions[i][1] + dx, y: positions[i][2] + dy});
        }
    }
    onEnd = function() {} 
```

# ruby-on-rails - 即使出现在“宝石列表”中，也找不到 Rails

> ID：11171658
> 
> 赞同：1
> 
> 时间：2012-06-23T17:44:30.537
> 
> 标签：ruby-on-rails

我看过有类似问题的人，但每个人都只是说“谢谢你的帮助”，而没有详细说明他们是如何解决问题的。我对编程完全陌生。

基本上我的 $ gem list 输出给出：

```
*** LOCAL GEMS ***

actionmailer (3.2.6)
actionpack (3.2.6)
activemodel (3.2.6)
activerecord (3.2.6)
activeresource (3.2.6)
activesupport (3.2.6)
arel (3.0.2)
builder (3.0.0)
bundler (1.1.4)
erubis (2.7.0)
hike (1.2.1)
i18n (0.6.0)
journey (1.0.4)
json (1.7.3)
mail (2.4.4)
mime-types (1.19)
multi_json (1.3.6)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.6)
railties (3.2.6)
rake (0.9.2.2)
rdoc (3.12)
rubygems-bundler (1.0.3)
rvm (1.11.3.4)
sprockets (2.1.3)
thor (0.15.3)
tilt (1.3.3)
treetop (1.4.10)
tzinfo (0.3.33) 
```

但是当我输入 $ rails -vi 时得到：

```
user@ubuntu:~$ rails -v
The program 'rails' is currently not installed.  You can install it by typing:
sudo apt-get install rails 
```

其他一些线程说这是一个路径问题，但我不知道如果我摆弄 .bash 或路径并且觉得我需要有人通过这个 =/ 握住我的手我在做什么。

我的 echo $PATH 输出是：

```
user@ubuntu:~$ echo $PATH
/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin/bin:/usr/games:/home/user/.rvm/bin 
```

$ gem 环境输出：

```
user@ubuntu:~$ gem environment
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [x86_64-linux]
  - INSTALLATION DIRECTORY: /home/user/.rvm/gems/ruby-1.9.3-p194
  - RUBY EXECUTABLE: /home/user/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
  - EXECUTABLE DIRECTORY: /home/user/.rvm/gems/ruby-1.9.3-p194/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /home/user/.rvm/gems/ruby-1.9.3-p194
     - /home/user/.rvm/gems/ruby-1.9.3-p194@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
     - "install" => "--no-rdoc --no-ri"
     - "update" => "--no-rdoc --no-ri"
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

如果我的问题格式不正确或不清楚，我深表歉意。我对编程和这个网站完全陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T20:16:50.823

如果您在服务器上，请检查 .bash_profile 和 .bashrc。当您登录并检查您的环境变量时，它可能与通过 ssh 的变量不同。

# android - 访问通话记录

> ID：11171665
> 
> 赞同：0
> 
> 时间：2012-06-23T17:45:27.247
> 
> 标签：android, edit, stock, calllog

有没有办法`Dialer/Contacts/Call Log`通过应用程序访问Android？
我本质上想添加`features/information`，并且我知道这些数据库无法更改过去的查询和插入，所以我想知道如何覆盖库存`Dialer/Contacts/Call Log`？最好，我只想更改其中一个，但任何信息都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:47:26.230

查询`android.provider.CallLog.Calls.CONTENT_URI`获取 Calllogs 为：

```
String[] strFields = {
        android.provider.CallLog.Calls.NUMBER, 
        android.provider.CallLog.Calls.TYPE,
        android.provider.CallLog.Calls.CACHED_NAME,
        android.provider.CallLog.Calls.CACHED_NUMBER_TYPE
        };
String strOrder = android.provider.CallLog.Calls.DATE + " DESC"; 

Cursor mCallCursor = getContentResolver().query(
        android.provider.CallLog.Calls.CONTENT_URI,
        strFields,
        null,
        null,
        strOrder
        ); 
```

并在 manifest.xml 添加：

```
<uses-permission android:name="android.permission.READ_CONTACTS"></uses-permission> 
```

# c++ - C 输出返回值

> ID：11171667
> 
> 赞同：-6
> 
> 时间：2012-06-23T17:45:44.297
> 
> 标签：c++, c

```
int fun(int a) {
    if((a=10) && (a==20))
        pritnf("Good question\t.");
    (a>=20)?return(10):return(20);
}
int main() {
    int i = fun(20);
    printf("%d",i);
} 
```

为什么这会产生编译错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T17:47:57.713

你想要`return a >= 20 ? 10 : 20`。`return`是一个语句，因此不能是表达式的一部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-23T17:48:05.730

因为其中之一`printf`是拼写错误，如下所示`pritnf`：

```
pritnf("Good question\t."); 
```

如果您可以在问题中发布确切的编译器错误消息，那将*非常*有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T17:47:54.250

```
if( (a=10) && (a==20) ) 
```

应该

```
 if( (a==10) && (a==20) ) 
```

这有点没有意义，你的意思是还是？

你错过了回报

# c# - 提高 InsertAllOnSubmit 性能

> ID：11171672
> 
> 赞同：0
> 
> 时间：2012-06-23T17:47:08.197
> 
> 标签：c#, performance, linq, sql-server-ce, windows-phone-7.1

我目前正在做一个小项目来学习 Linq，我想在我的桌面机器上为 Windows Phone 应用程序创建一个大型 SDF 数据库。我要创建的应用程序需要一个带有制表符分隔条目的文本文件，并且应该将它们插入到 SDF 文件中。文件中有大约 900000 行。目前我以这种方式插入它们：

```
 ConcurrentBag<Entry> data = new ConcurrentBag<Entry>();

                Parallel.ForEach<DictCCParser.Entry>(entries, e =>
                    {
                        Entry entry = new Entry { LanguageOne = e.Lang1, LanguageTwo = e.Lang2, GroupId = groupIds[e.Group] };
                        data.Add(entry);
                    });

                Console.WriteLine("Inserting data");

                db.Entries.InsertAllOnSubmit(data);
                db.SubmitChanges(); 
```

问题是，LINQ 似乎创建了 900000 个单独的 INSERT INTO 语句。我读过可以使用批量插入，但是我遇到的每个实现都需要一个 SQLCE 4.0 文件。我试图创建一个包含所有插入的巨大查询，例如

```
 INSERT INTO Entries(LanguageOne, LanguageTwo, Group) VALUES (...),(...),(...) 
```

但显然 SqlCE 不适用于多个插入。有没有办法加速这段代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:28:40.900

您可以使用我的 SqlCeBulkCopy 库，对于 Windows Phone，数据库必须是 3.5 格式 - [http://sqlcebulkcopy.codeplex.com](http://sqlcebulkcopy.codeplex.com)

# image - 如何将我的按钮图像设置在 Corona 的背景图像之上？

> ID：11171679
> 
> 赞同：0
> 
> 时间：2012-06-23T17:48:06.170
> 
> 标签：image, background, lua, coronasdk

这是我的图像显示对象：

```
 local background=display.newImage("background.png")
   local buttonImage1 = display.newImage("start.jpg") 
```

我希望按钮对象的图像位于背景图像之上。我怎样才能做到这一点？

编辑：问题已解决

我使用了director 类和director 类，您应该在localGroup 中按顺序插入显示对象以便查看它们。

```
 localGroup:insert(background)
     localGroup:insert(buttonImage1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T05:20:56.740

顺便说一句，如果你想知道另一种方式......

```
buttonImage1:toFront() 
```

会做的。

# php - 如果我使用带有 && 的条件语句，是否可以为每个参数设置每个状态？

> ID：11171682
> 
> 赞同：0
> 
> 时间：2012-06-23T17:48:17.980
> 
> 标签：php, if-statement

我的程序有问题。我有这个条件，这决定了我从实验室研究中获得的价值。所以，我会将值输入到数据库中。

```
Parameter | Standard | Value
------------------------------
H2O       | Max.7    | (ex.6)
NaCl      | Min.94   | (ex.93) 
```

我必须使用讲师的语法 IF 和 AND 条件。但是，除了该语法之外，我必须将每个参数的状态传递给数据库。所以，结果将是这样的：

```
Parameter | Standard | Value | Status
-------------------------------------
H20       | Max.7    | 6     | PASSED
NaCl      | Min.94   | 90    | DENIED 
```

如果我使用 AND ，我能否获得具有我想要的状态的每个值？这是我的语法 IF 与 AND ：

```
if(($air<=7) && ($nacl>=94) && ($tidaklarut<=0.5) && ($yodium>=30) && ($kadmium<=0.5) && ($timbal<=10) && ($raksa<=0.1) && ($arsen<=0.1))
{
$status = "Passed";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T19:59:27.743

@utari-oktavianti 我还不能发表评论，但是您已经使用了讲师要求您使用的东西来获得测试的最终结果，或者他们在实验室使用 'IF &&' 所做的任何事情，现在您必须使用 single if每个您正在测试的变量的语句（if...else）。没有其他方法（我的意思是有不同的方法，但 'IF &&' 不是其中之一）。

一个例子是：

```
$_status = array();
if($air<=7) {
    $_status['air'] = 'passed';
}
else {
    $_status['air'] = 'denied';
} 
```

或者，如果您真的不想使用“else”，请先设置您的默认值，并且仅在它们通过 ie 时才覆盖它们。

```
$_status         = array();
$_status['air']  = 'denied';
$_status['nacl'] = 'denied';
if($air<=7) {
    $_status['air']  = 'passed';
}
if($nacl>=94) {
    $_status['nacl'] = 'passed';
} 
```

希望这会有所帮助，迈克

# javascript - 使用 JavaScript 将文本输入转换为选择元素

> ID：11171685
> 
> 赞同：19
> 
> 时间：2012-06-23T17:48:33.767
> 
> 标签：javascript, jquery, forms

我正在托管电子商务平台上进行一些前端开发。系统向客户发送一个文本输入，以选择他们想要添加到购物车的商品数量，但我更喜欢选择。我无法访问系统在这方面吐出的标记，所以我想使用 JavaScript 将文本*输入*更改为*选择*元素。

我使用 jQuery 删除选择并使用具有正确选择的选择复制输入元素，但是当我尝试向我的购物车添加一些东西时，无论选择中的选择如何，都只添加了一项。

这是本机标记：

```
<div id="buy-buttons">
  <label>Quantity:</label>
  <input name="txtQuantity" type="text" value="1" id="txtQuantity" class="ProductDetailsQuantityTextBox">
  <input type="submit" name="btnAddToCart" value="Add To Cart" id="btnAddToCart" class="ProductDetailsAddToCartButton ThemeButton AddToCartThemeButton ProductDetailsAddToCartThemeButton">
</div> 
```

这是我正在运行以更新我的标记的 jQuery。

```
 $("#txtQuantity").remove();
 $("#buy-buttons").append('<select id="txtQuantity" type="text" value="1" class="ProductDetailsQuantityTextBox"></select>');
 $("#txtQuantity").append('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option>'); 
```

有谁知道为什么这不起作用？选择不应该以与文本输入相同的方式通过表单提交信息吗？

谢谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-23T17:51:15.527

使用和`replaceWith`代替。上的属性也是不必要的，节点应该在. 这是关于- [http://api.jquery.com/replaceWith/](http://api.jquery.com/replaceWith/)的文档。`remove``append``type``<select>``<option>``<select>``replaceWith`

```
$("#txtQuantity")
    .replaceWith('<select id="txtQuantity" name="txtQuantity" class="ProductDetailsQuantityTextBox">' +
          '<option value="1">1</option>' +
          '<option value="2">2</option>' +
          '<option value="3">3</option>' +
          '<option value="4">4</option>' +
          '<option value="5">5</option>' +
        '</select>'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-23T17:53:01.120

您尚未设置字段名称。添加`name='txtQuantity'`到选择。如果没有名称属性，该字段的值将不会被发送回服务器。

另外，不要`value='1'`在选择上进行设置（不做任何事情），而是添加`selected='selected'`到第一个选项。结果与默认情况下选择第一个选项相同。

您可能会在使用上述代码的提交按钮后选择选择。但是，这已在另一个答案中涵盖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T18:15:17.840

如果您已经有一个下拉/选择列表，并且只想从标签/文本框中添加一个项目，那么您可以试试这个：

```
 if ($(textBoxID).val() != '') {
                $(dropDownID)
                    .append($("<option></option>")
                        .attr('value', ($(textBoxID).val()))
                            .text($(textBoxID).val())).val($(textBoxID).val())
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T17:51:22.900

从 中删除`type`和`value`属性`<select>`，然后添加`name="txtQuantity"`您遗漏的属性。

# css - 使用控件滑动背景图像

> ID：11171689
> 
> 赞同：0
> 
> 时间：2012-06-23T17:50:06.447
> 
> 标签：css, background, scroll, fullscreen

我正在尝试建立一个网站，它的背景图像可以通过左右控件滚动。我在哪里可以找到教程来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:36:48.183

您可以尝试 CoinSlider ...有关教程和演示，请参阅此链接：

[http://workshop.rs/2010/04/coin-slider-image-slider-with-unique-effects/](http://workshop.rs/2010/04/coin-slider-image-slider-with-unique-effects/)

另见超大 jQuery 插件 [全屏幻灯片]

[http://www.buildinternet.com/project/supersized/](http://www.buildinternet.com/project/supersized/)

或在此处查找 100 个 Qjuery 滑块，选择适合您要求的一个：

[http://www.jquery4u.com/plugins/100-jquery-sliders-part1/#.T-YKgRdo2_4](http://www.jquery4u.com/plugins/100-jquery-sliders-part1/#.T-YKgRdo2_4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:00:02.227

我过去用过这个，效果很好。它使用淡入淡出过渡，但我确信有办法破解它来进行幻灯片过渡。

[http://www.marcofolio.net/webdesign/advanced_jquery_background_image_slideshow.html](http://www.marcofolio.net/webdesign/advanced_jquery_background_image_slideshow.html)

# javascript - IE8 appendChild 到 XML 问题：类型不匹配

> ID：11171691
> 
> 赞同：0
> 
> 时间：2012-06-23T17:50:22.357
> 
> 标签：javascript, jquery, xml, appendchild

我正在使用 jquery 和 javascript 处理 xml。我使用 ajax 导入 xml 然后我想对其进行操作， appendChild 是 IE8 中的一个问题。

这是Javascript：

```
// How i get xml 
$.ajax({
  url: production_get,
  dataType: "xml",
  success: function(data) {
      input_xml=data;
  }
});

// how i try to append a new node to 

new_user_node = document.createElement('user');
new_user_node.setAttribute('id',new_user_id);
new_user_node.setAttribute('label',new_user_label);        

response=$(input_xml)[0].getElementsByTagName("response")[0];
response.appendChild(new_user_node); // <- type mismatch 
```

XML 标记

```
<response>
    <user id="123" label="John" />
</response> 
```

这适用于所有浏览器，但 IE 报告：类型不匹配。我不得不说它即使在 IE8 中也可以工作，但控制台会报告错误，而在 IE7 中会出现错误弹出窗口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T18:02:51.700

当您在 jQuery 中包装 xml 时，它会将 xml 视为 html。这允许遍历获取属性和文本，但不足以修改 xml。

要创建要附加的 XML 文档，您需要使用`$.parseXML()`

```
/* First create xml doc*/
var xmlDoc=$.parseXML(input_xml);

/*Create jQuery object of xml doc*/
var $xml= $( xmlDoc);

/*Now append*/
$xml.append( new_user_node); 
```

[http://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)

API 中的更多示例

# php - 单选按钮上的 PHP Simpletest 断言？

> ID：11171701
> 
> 赞同：2
> 
> 时间：2012-06-23T17:52:47.277
> 
> 标签：php, unit-testing, simpletest

我有一组单选按钮：

```
<input type="radio" id="edit-status-1" name="status" value="1" class="form-radio" />  <label class="option" for="edit-status-1">Active </label>

<input type="radio" id="edit-status-0" name="status" value="0" checked="checked" class="form-radio" />  <label class="option" for="edit-status-0">Blocked </label> 
```

我想要一个简单的测试来确定默认检查哪一个。我可以访问该页面，但我不知道如何声明单选按钮。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:16:45.470

在 Zend 框架中，当您使用 zend 表单时， form->populate($data) 完成此任务，但在纯 php 中您需要比较值：

```
<input type="radio" name="name1" value="0" <?php echo ($_POST['name1']==0):'checked="checked"':'' ?> />
<input type="radio" name="name1" value="1" <?php echo ($_POST['name1']==1):'checked="checked"':'' ?> /> 
```

# php - 检索 MySQLI 中的行数

> ID：11171704
> 
> 赞同：0
> 
> 时间：2012-06-23T17:53:18.603
> 
> 标签：php, object, mysqli

我正在尝试获取查询中的行数，但它一直给我这个错误

> 试图在第 15 行获取非对象的属性。

```
<?php require_once("./includes/Utilities.php") ;?>
<?php require_once("./includes/db_connection.php");?>
<?php 
    if(isset($_POST['submit'])){
        $username = trim($_POST['username']);
        $password = trim($_POST['password']);
        $conf_pass = trim($_POST['conf_password']);
        $email = trim($_POST['email']);
        require_once('./includes/CheckPassword.php');
        $check_pwd = new Db_CheckPassword($password);
        $check_pwd =$check_pwd->check();
        require_once('./includes/CheckUsername.php');
        $sql = "SELECT * FROM accounts WHERE username = {$username}";
        $result = $conn->query($sql);
        $numRows = $result->num_rows;
    }
?> 
```

这是第 15 行

```
$numRows = $result->num_rows; 
```

为什么它返回错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T17:54:37.267

因为没有引用用户名。

试试这个：

```
$sql = "SELECT * FROM accounts WHERE username = '{$username}'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:55:47.640

您没有检查您的查询是否成功，因此`$result`实际上可能包含 FALSE。

# php - 使用安全登录抓取网站内容

> ID：11171713
> 
> 赞同：5
> 
> 时间：2012-06-23T17:55:04.910
> 
> 标签：php, curl, web-scraping

我正在尝试使用登录安全但无法做到的情况下抓取站点的内容该站点的登录有三个选项用户名，密码，密码这里是我正在使用的代码

```
<?php

// HTTP authentication

$url = "http://aftabcurrency.com/login_script.php";

$ch = curl_init();    

curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 

curl_setopt($ch, CURLOPT_URL, $url); 
$cookie = 'cookies.txt';
$timeout = 30;
curl_setopt($curl, CURLOPT_TIMEOUT,         10); 
curl_setopt($curl, CURLOPT_CONNECTTIMEOUT,  $timeout );
curl_setopt($curl, CURLOPT_COOKIEJAR,       $cookie);
curl_setopt($curl, CURLOPT_COOKIEFILE,      $cookie);

curl_setopt ($ch, CURLOPT_POST, 1); 
curl_setopt ($ch,CURLOPT_POSTFIELDS,"user_name=user&user_password=pass&passcode=code");             

$result = curl_exec($ch); 

curl_close($ch); 

echo $result;

?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T18:10:59.333

您需要对`POST`http://aftabcurrency.com/login_script.php[进行](http://aftabcurrency.com/login_script.php)操作， 您的 curl 还需要接受 cookie。
身份验证后，脚本将重定向您，因此您还需要添加**CURLOPT_FOLLOWACTION**。

这是您的脚本的编辑版本，我无法在[http://aftabcurrency.com/](http://aftabcurrency.com/)上对其进行测试，希望它有效：

```
$url = "http://aftabcurrency.com/login_script.php";

$ch = curl_init();    
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 

curl_setopt($ch, CURLOPT_URL, $url); 
$cookie = 'cookies.txt';
$timeout = 30;

curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_TIMEOUT,         10); 
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT,  $timeout );
curl_setopt($ch, CURLOPT_COOKIEJAR,       $cookie);
curl_setopt($ch, CURLOPT_COOKIEFILE,      $cookie);

curl_setopt ($ch, CURLOPT_POST, 1); 
curl_setopt ($ch,CURLOPT_POSTFIELDS,"user_name=user&user_password=pass&passcode=code");     

$result = curl_exec($ch);

/* //OPTIONAL - Redirect to another page after login
$url = "http://aftabcurrency.com/some_other_page";
curl_setopt ($ch, CURLOPT_POST, 0); 
curl_setopt($ch, CURLOPT_URL, $url);
$result = curl_exec($ch);
 */ //end OPTIONAL 

curl_close($ch); 
echo $result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T18:15:15.953

您需要将您的用户名/密码/密码发布到该页面。您现在正在尝试做的是 http 身份验证。所以代替这个

```
curl_setopt($ch, CURLOPT_USERPWD, "demo:demopass:demopasscode"); 
```

你需要这个

```
curl_setopt ($ch, CURLOPT_POST, 1); 
curl_setopt ($ch, CURLOPT_POSTFIELDS, "user_name=xxxxx&user_password=xxxxxx&passcode=xxxxx"); 
```

# java - 将 Object[] 转换为 int[] 错误

> ID：11171716
> 
> 赞同：4
> 
> 时间：2012-06-23T17:55:37.723
> 
> 标签：java, arraylist, type-conversion, toarray

> **可能重复：**
> [如何在 Java 中将 List<Integer> 转换为 int[]？](https://stackoverflow.com/questions/960431/how-to-convert-listinteger-to-int-in-java)

我有一个`ArrayList`，当我尝试将其转换为整数数组时，因为我需要执行涉及整数的操作，我收到此错误：

> 需要不兼容的类型
> ：int[]
> 找到：java.lang.Object[]

这是我的代码：

```
List<Integer> ids_rdv = new ArrayList<Integer>();

// I execute an SQL statement, then :
while (resultat.next()) {
    ids_rdv.add(resultat.getInt("id_rdv"));
}
int[] element_rdv_id = ids_rdv.toArray(); //Problem 
```

你对此有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T17:58:02.200

假设您的原始对象是 Integer 类的实例：

```
Integer[] element_rdv_id = ids_rdv.toArray(new Integer[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T18:14:54.940

```
incompatible types required: int[] found: java.lang.Object[] 
```

当您这样做时`ids_rdv.toArray()`，它会返回一个对象数组，该数组不能分配给原始整数类型数组。

手头需要拿到Integer对象数组，所以这样写

```
Integer[] element_rdv_id = ids_rdv.toArray(new Integer[]); 
```

# postgresql - pgAdmin3 连接问题

> ID：11171719
> 
> 赞同：16
> 
> 时间：2012-06-23T17:56:11.987
> 
> 标签：postgresql, centos, vmware, pgadmin, trust

我最近正在使用 VMware Workstation 8 设置和运行 Windows 2008 r2 服务器。

我正在使用 Postgresql 9.1 运行 Centos 6.2 虚拟 Linux 机器。本地似乎一切正常，我可以通过桥接网络连接到 CentOS 机器。

我已按照[David Ghedini 的](http://www.davidghedini.com/pg/entry/install_postgresql_9_on_centos)演练设置 Postgresql 9.1。所以我能够启动一个腻子会话窗口，以 root 身份登录并启动 psql shell 并以 postgres 用户身份发出语句。我的问题是我无法从我的 Windows 7 客户端使用 pgAdmin III 进行连接。我已经更新了`/var/lib/pgsql/9.1/data/postgresql.conf`启用listen_addresses'*'等。

谁能给我任何关于找出我的错的提示。确保在 Windows 服务器上也禁用了 Windows 防火墙。

pgAdmin III 客户端报告；

> '服务器不听'

服务器不接受连接：连接库报告

> 无法连接到服务器：连接超时 (0x0000274C/10060) 服务器是否在主机“192.168.1.26”上运行并接受端口 5432 上的 TCP/IP 连接？

这是`pg_hba.conf`添加的文件条目：

```
#TYPE DATABASE   USER   ADDRESS          METHOD
host  all        all    192.168.1.0/24   trust 
```

并添加了 iptables 文件条目：

```
-A INPUT -p tcp -s 0/0 --sport 1024:65535 -d 192.168.1.26 --dport 5432 -m state --state NEW,ESTABLISHED -j ACCEPT
-A OUTPUT -p tcp -s 192.168.1.26 --sport 5432 -d 0/0 --dport 1024:65535 -m state --state ESTABLISHED -j ACCEPT 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-23T18:18:16.623

你需要调整`pg_hba.conf`：

[http://www.postgresql.org/docs/current/static/auth-pg-hba-conf.html](http://www.postgresql.org/docs/current/static/auth-pg-hba-conf.html)

添加您自己的主机和相应的用户后，重新启动 postgresql 服务器，希望您可以连接。

此外，您可能需要在网络上启用它的端口： [http ://www.cyberciti.biz/tips/postgres-allow-remote-access-tcp-connection.html](http://www.cyberciti.biz/tips/postgres-allow-remote-access-tcp-connection.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-04T13:34:51.077

我也有同样的问题。我禁用了所有第三方防病毒软件和防火墙，然后再次重新安装 PostgreSQL，它现在工作正常...... :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-24T04:30:47.460

确保允许 PostgreSQL 服务器通过防火墙：

在服务器机器上，转到

> 控制面板 > 系统和安全 > Windows 防火墙 > 允许应用程序通过 Windows 防火墙

滚动浏览允许的应用程序和功能，确保选中“PostgreSQL 服务器”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-20T02:39:13.537

可能是防火墙问题，检查一下

```
systemctl status firewalld.service 
```

你可以简单地通过以下方式禁用它：

```
systemctl stop firewalld.service
systemctl disable firewalld.service 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T15:19:22.933

> 服务器是否在主机“192.168.1.26”上运行并接受端口 5432 上的 TCP/IP 连接？

检查服务器是否具有该 IP 地址。检查是否有`postgres`进程正在运行。使用 netstat 确认服务器正在侦听端口 5432。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-26T15:33:21.940

除了上面的好答案之外，在实施所有防火墙规则和配置文件更改后，它仍然没有连接到我主机的 IP 地址。然后我意识到我已经在安装了我的 postgres db 的主机上本地安装了 pgadmin。我不需要使用主机的外部 IP 地址，我只需要在 pgadmin 连接过程中连接到“localhost”。非常令人沮丧，但有道理。所以，如果你

*   从与您的 postgres 数据库相同的服务器托管 pgadmin
*   已排除防火墙不挡你的路
*   已排除任何安全组没有阻止您
*   对你的配置文件 pg_hba.conf 和 postgresql.conf 已经玩够了

那么也许......也许，尝试连接到“localhost”或“127.0.0.1”。

值得一试！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-12T20:56:14.060

我遇到了同样的问题：

> 无法连接到服务器：连接超时 (0x0000274C/10060) 服务器是否在主机“192.168.1.26”上运行并接受端口 5432 上的 TCP/IP 连接？

也许您需要将**反向 ip**设置为白名单：
`26.1.168.192`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-04T06:05:22.223

您还应该在防火墙上允许端口 5432。

centos 8 上的示例：

```
sudo firewall-cmd --zone = public --add-port = 5432 / tcp --permanent 
```

# android - 在android的屏幕布局中间添加浮动列表视图

> ID：11171720
> 
> 赞同：1
> 
> 时间：2012-06-23T17:56:26.030
> 
> 标签：android, listview, runtime, floating

我的应用程序中有一个输入屏幕，上面有一个 Edittext，在此 Edittext 中输入一些文本时，我需要在运行时在 android 的屏幕布局中间添加一个浮动列表视图。如何在运行时在屏幕中间添加此浮动列表视图。任何形式的帮助将不胜感激。

非常感谢，

穆纳扎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:52:07.923

如果您只是想要一个与您的联系人一起使用的 AutoCompleteTextView，请尝试[本教程](http://thinkandroid.wordpress.com/2010/02/08/writing-your-own-autocompletetextview/)。

# android - 如何在 android 4.0 和 3.0 中调用 usb tethering intent？

> ID：11171721
> 
> 赞同：4
> 
> 时间：2012-06-23T17:56:30.853
> 
> 标签：android, android-intent, tethering

我正在为 Android 3.0 及更高版本开发应用程序。我想通过网络共享与 PC 通信。

如何通过代码调用“无线和网络-网络共享和便携式热点意图”以手动启用网络共享？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T16:14:54.800

在 4.1.2 中测试，也许应该在 4.0 中也可以工作。

```
Intent tetherSettings = new Intent();
tetherSettings.setClassName("com.android.settings", "com.android.settings.TetherSettings");
startActivity(tetherSettings); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T18:24:31.500

> 我想没有选项可以通过代码启用网络共享

正确的。

> 任何人都可以告诉我如何通过代码调用“无线和网络-网络共享和便携式热点”意图以手动启用网络共享。

目前没有记录和支持`Intent`的操作可以在“设置”应用程序中显示此特定屏幕。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-12-04T07:56:45.783

此代码只是启动网络共享设置并单击 USB 网络共享复选框（如果它关闭则将其设置为打开，反之亦然）。

```
adb shell am start -n com.android.settings/.TetherSettings && adb shell input keyevent 20 && adb shell input keyevent 20 && adb shell input keyevent KEYCODE_ENTER && sleep 2 && adb shell input keyevent 4 
```

# java - 比较两个字符串中的值

> ID：11171722
> 
> 赞同：0
> 
> 时间：2012-06-23T17:56:32.710
> 
> 标签：java

我正在尝试将两个字符串相互比较。一个包含例如：

```
String x =" aa bb cc dd ee " 
```

另一个：

```
String y =" aa bb " 
```

现在我想做这个

```
if (any values from String x EXISTS IN String y) 

if (y.matches(???)){System.out.println("true");}
else{System.out.println("false");} 
```

我知道我可以通过使用正则表达式来做相反的事情，如下所示：

```
if (x.matches(".*"+y+".*")){do something} 
```

但我想知道是否有任何方法可以检查字符串 x 中的任何值是否与字符串 y 匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T18:01:53.907

假设您所说的“字符串中的值”是空格之间的一对字符，拆分两个字符串以将它们转换为值集（`Set<String>`），并使用 Set 方法计算您想要的内容（`containsAll()`、、、`removeAll()`等`retainAll()`） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T18:07:04.927

```
String x_trimmed = x.trim();
String y_trimmed = y.trim();

String[] x_elements = x_trimmed.split("\\s+");
String[] y_elements = y_trimmed.split("\\s+");

Set<String> x_elementsSet = new HashSet<String>(Arrays.asList(x_elements));
Set<String> y_elementsSet = new HashSet<String>(Arrays.asList(y_elements));

for (String x : x_elementsSet) {
    if (y_elementsSet.contains(x)) {
       System.out.println("true");
    } else {
       System.out.println("false");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T18:02:11.003

如果您想查看 String x 是否在某个地方的 String y 中，请使用 .contains(String str) 方法。

如果您试图确定字符串的空格分隔部分是否包含在 y 中，那么您将需要拆分，然后在拆分操作的每个部分上包含。

# java - 类肯定存在时出现 NoClassDefFound 错误

> ID：11171726
> 
> 赞同：1
> 
> 时间：2012-06-23T17:57:10.073
> 
> 标签：java, android, noclassdeffounderror

我一直在做一个游戏几个月了，突然遇到了一个问题。

从昨天开始，我一直收到`NoClassDefFound`错误消息。根本没有代码更改。它在晚上工作，而不是在早上。完全没有变化。这是确切的堆栈跟踪：

```
06-23 23:12:19.746: E/ACRA(29146): Blue Boy fatal error : com.appaholics.blueboy.BlueBoy
06-23 23:12:19.746: E/ACRA(29146): java.lang.NoClassDefFoundError: com.appaholics.blueboy.BlueBoy
06-23 23:12:19.746: E/ACRA(29146):  at com.appaholics.blueboy.LoadingScreen.loadTextures(LoadingScreen.java:125)
06-23 23:12:19.746: E/ACRA(29146):  at com.appaholics.blueboy.LoadingScreen.load(LoadingScreen.java:85)
06-23 23:12:19.746: E/ACRA(29146):  at com.appaholics.blueboy.LoadingScreen.onCreate(LoadingScreen.java:40)
06-23 23:12:19.746: E/ACRA(29146):  at android.app.Activity.performCreate(Activity.java:4465)
06-23 23:12:19.746: E/ACRA(29146):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-23 23:12:19.746: E/ACRA(29146):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-23 23:12:19.746: E/ACRA(29146):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-23 23:12:19.746: E/ACRA(29146):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-23 23:12:19.746: E/ACRA(29146):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-23 23:12:19.746: E/ACRA(29146):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-23 23:12:19.746: E/ACRA(29146):  at android.os.Looper.loop(Looper.java:137)
06-23 23:12:19.746: E/ACRA(29146):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-23 23:12:19.746: E/ACRA(29146):  at java.lang.reflect.Method.invokeNative(Native Method)
06-23 23:12:19.746: E/ACRA(29146):  at java.lang.reflect.Method.invoke(Method.java:511)
06-23 23:12:19.746: E/ACRA(29146):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-23 23:12:19.746: E/ACRA(29146):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-23 23:12:19.746: E/ACRA(29146):  at dalvik.system.NativeStart.main(Native Method) 
```

发生异常的方法：

```
 private void loadTextures() {
        BlueBoy.sTextures = new HashMap<String,TextureRegion>();
        BlueBoy.sTiledTextures = new HashMap<String,TiledTextureRegion>();
        BlueBoy.sTextureHolders = new ArrayList<Texture>();
        BlueBoy.sHitVoiceSounds = new Sound[4];
        BlueBoy.sHitSounds = new Sound[4];
        BlueBoy.sWinSounds = new Sound[8];
        BlueBoy.sLoseSounds = new Sound[4];     
        Texture texture;
        TextureRegionFactory.setAssetBasePath("gfx/");
        BufferObjectManager.setActiveInstance(new BufferObjectManager());
        } 
```

但是，BlueBoy 类肯定存在。为了绝对确定，我已经开始反编译我自己的应用程序的`classes.dex`. 我已经反编译了在 .apk 和 .apk 本身中生成的。课程在他们两个中都有。它也存在于`/bin/classes/com/appaholics/blueboy/`. 反编译后，我可以看到该类的完整源代码。

我已经尝试了所有我能想到并在网上找到的方法来修复它。我有：

*   在它上面做了一个干净的构建
*   在eclipse中从源代码创建了一个新项目
*   创建了一个新项目并手动将所有内容转移到它
*   尝试重命名课程
*   尝试重命名包
*   尝试从命令行编译它
*   尝试从命令行清理它

工作区中的所有其他项目都可以正常工作。

其他类，如启动屏幕和加载屏幕，在 BlueBoy 正常工作之前启动。Android 可以找到它们。

有人知道为什么会发生这种情况吗？这个类和我一样肯定存在，但 Android 不同意。

编辑：根据 duffymo 的建议，我通过将以下内容添加到我的启动屏幕来检查该类是否存在的类路径：

```
 try {
          Class.forName("com.appaholics.blueboy.BlueBoy", false, null);
       } catch (ClassNotFoundException e1) {
          Log.d("ClassCheck", "Not found.");
          e1.printStackTrace();
       } 
```

我`Not Found`在 LogCat 中收到消息。现在我们知道类路径中不存在该类，我该如何修复它？该类与启动屏幕和加载类在同一个包中，并且两者都存在。什么可能导致这一堂课不存在，我该如何解决？

EDIT2：FWIW，`System.getProperties("java.class.path");`返回“ `.`”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:09:59.887

我已经设法修复它。这些是我采取的确切步骤：

*   手动将所有内容复制到新项目中。不要使用该选项从现有源创建项目。
*   转到项目属性，然后从构建路径中删除 android.jar。
*   节省
*   手动添加 jar，确保它与以前的 Android 版本相同。

它现在应该可以工作了。我在原始项目和我从它的源代码创建的项目上都尝试了上述步骤，但它们不起作用。

我不知道它如何或为什么起作用，但我知道它确实如此。FWIW，我正在使用 ADT 18，SDK 工具 19 和平台工具 11。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-17T20:03:38.923

我的问题是类中的一个方法使用的方法调用高于 android 清单中设置的最低 API 级别。使类与最低 API 级别兼容解决了该问题。这个问题可以通过运行 Android Lint check 来检测，它会准确地告诉你是哪个方法调用导致了问题

# java - 只读 derby 数据库冻结

> ID：11171729
> 
> 赞同：2
> 
> 时间：2012-06-23T17:57:33.710
> 
> 标签：java, jar, derby

当我连接到现在位于 jar 内的只读数据库时，我可以运行应用程序，但是当我尝试运行查询时，它会冻结应用程序。我不确定自己做错了什么，我按照[本指南进行操作](http://db.apache.org/derby/docs/dev/devguide/cdevdeploy15325.html "创建 Derby 数据库以供只读使用 (db.apache.org)")

这就是我连接到数据库的方式

```
try
{  
    Class.forName("org.apache.derby.jdbc.EmbeddedDriver").newInstance();
    connection = DriverManager.getConnection("jdbc:derby:jar:(database.jar)MyDbTest;");
    statement = connection.createStatement();
}
catch (Exception e) 
{  
    e.printStackTrace();  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T22:15:04.107

所以这是我的简单设置，我在其中设置了必要的临时目录属性。

```
private static void accessReadOnlyJar() {
    try {
        Class.forName("org.apache.derby.jdbc.EmbeddedDriver").newInstance();
        Properties props = new Properties();
        String tempDir = System.getProperty("java.io.tmpdir");
        props.setProperty("derby.storage.tempDirectory", tempDir);
        props.setProperty("derby.stream.error.file", tempDir+"derby_error.log");
        Connection connection = DriverManager.getConnection("jdbc:derby:jar:(data/db.jar)derbyDB", props);

        Statement statement = connection.createStatement();
        ResultSet result = statement.executeQuery("SELECT * FROM TESTTABLE");
        while(result.next()){
            System.out.println(result.getString("NAME"));
        }

        connection.close();
    } catch (InstantiationException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } catch (SQLException e) {
        e.printStackTrace();
    }
} 
```

tempDir 的好位置可能是：

*   系统临时目录：`System.getProperty("java.io.tmpdir")`
*   你的工作目录：`"."`
*   您的应用程序目录：`ClassLoader.getSystemClassLoader().getResource(".").getPath()`

或与之相关的任何东西;-)

如果这不能解决您的问题，请检查/重新创建您的数据库。如果在您打包 jar 之前它没有很好地关闭，derby 将始终尝试在启动时恢复。

# c# - 如果捕获一般异常，是否有可能出现异常？

> ID：11171732
> 
> 赞同：1
> 
> 时间：2012-06-23T17:57:42.023
> 
> 标签：c#, c++, .net

假设我们有一个由非托管 C++ 应用程序调用的 C#。来电者的代码不可用。

```
public void MethodCalledByUnmanagedCode()
{
try
{
   DoWork()
}
catch {}//assume we swallow exception, no logging or anything
} 
```

在这种情况下，在任何情况下，有没有办法让任何异常冒泡到非托管 C++？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T17:59:13.237

您的代码可能会引发[`ThreadAbortException`](http://msdn.microsoft.com/en-us/library/system.threading.threadabortexception.aspx).

> ThreadAbortException 是一个可以被捕获的特殊异常，但它会在 catch 块结束时自动再次引发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T18:04:49.833

在正常情况下，还有一些像 StackOverflowException 这样的异常处理程序永远不会发生。

查看详细信息[C# 捕获堆栈溢出异常](https://stackoverflow.com/questions/1599219/c-sharp-catch-a-stack-overflow-exception)。

# c# - 异步下载文件？

> ID：11171733
> 
> 赞同：-4
> 
> 时间：2012-06-23T17:57:42.577
> 
> 标签：c#, windows-phone-7

我无法理解它，我该如何下载图像......让我们说

```
https://www.google.com/logos/classicplus.png 
```

我在 Windows Phone 上执行此操作，因此我需要异步执行此操作，并且我在解决此问题时遇到了一些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T20:27:57.700

您应该已经展示了您尝试过的内容以及您面临的问题，无论如何这里有一个示例代码来实现这一点

首先在 XAML 中创建一个 Image 标记，`<Image x:Name="img" />`然后从后面的代码中设置它的源

```
WebClient client = new WebClient();
client.OpenReadCompleted += new OpenReadCompletedEventHandler(client_OpenReadCompleted);
client.OpenReadAsync(new Uri("https://www.google.com/logos/classicplus.png", UriKind.Absolute)); 
```

并且 OpenReadCompleted 事件处理程序是

```
void client_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
{
    BitmapImage bmi = new BitmapImage();
    bmi.SetSource(e.Result);
    img.Source = bmi;
} 
```

# model-view-controller - MVC 中的 RESTful 设计模式？

> ID：11171738
> 
> 赞同：0
> 
> 时间：2012-06-23T17:58:59.697
> 
> 标签：model-view-controller, codeigniter, rest, backbone.js

我正在设计一个尝试遵循 REST 规范的应用程序。我试图找出设计它的最佳方法。

所以假设我正在做一个 POST 调用，所以我的控制器和模型中有一个“post”方法

```
// in controller
function post()
{
    //call post model here
} 
```

在我的帖子请求中，我需要进行以下检查：

```
-validate fields
-make sure item name is unique for that user
-make sure there are less than 10 items
-etc (there could be more cases) 
```

现在在控制器发布功能中，我将根据发生的任何情况返回一个 REST 消息和状态代码，这很好，但我很想知道在哪里保留所有这些检查更好。

我可以将所有检查放入模型中，然后返回某种数组，例如：

```
array('text' => 'return response text/array or whatever here', 'code' => '200/400/etc') 
```

然后只在控制器中返回它，还是将这些检查分解为模型中的单个函数，然后在控制器中进行所有检查？

```
// in controller
function post()
{
    //if validation fails -> send response
    //if name is not unique -> send response
    //etc...
} 
```

从设计的角度来看，如果我想从其他方法中调用项目模型中的“post”方法，它不会有一个包罗万象的函数来处理它，但是如果我确实将它全部保存在一个模型函数中它没有给我很多可重用性。如果我必须选边站，我可能不需要过多地重用这些“检查功能”，但是在模型而不是控制器中拥有所有这些响应信息似乎也很奇怪。

谁能给我一些意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T18:23:54.087

我会将 API 与 MVC 应用程序分开并使用[Apify](http://www.apifydoc.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T22:37:08.833

我不会在模型中创建 post 方法（尽管将它放在控制器中非常好），因为您只是将代码/模型放在这样一个不可重用且可读性较差的框架中。例如，我将创建方法而不是模型中的 post`create`方法。

There is no one-fits-all way for data validation. I like creating validation classes which have only one method `validate` for various data types (e.g. username validation class checks if it matches regex and is unique). It's better than copy pasting the validation code to every action (DRY). Where to call this class method? It depends. You can simply call that it in the action. Since the validation code is inside the validation class, it will look alright. You can also create a mapper which takes the request, determines what validations have to be performed and etc. but it might be overkill and is hard to do properly (maintainability wise).

再次输出 - DRY。这取决于您使用的是什么 MVC 框架，并且可能已经有一个很好的解决方案。如果没有，您可以为此创建一个类（是的，我是 DRY 疯子）。您通过响应传递响应代码、数组（或字符串），并且类很好地将所有内容包装成 JSON、XML 格式。优点：如果你改变然后输出格式，那么你只需要改变一个地方。

还可以考虑使用[远程外观](http://martinfowler.com/eaaCatalog/remoteFacade.html)模式。

希望您在这篇文章中找到了一些有用的东西。

# javascript - JSON.stringify 的反转？

> ID：11171746
> 
> 赞同：420
> 
> 时间：2012-06-23T18:00:19.663
> 
> 标签：javascript, json, object

我正在对一个像`{'foo': 'bar'}`

如何将字符串转回对象？

* * *

## 回答 #1

> 赞同：610
> 
> 时间：2012-06-23T18:01:47.730

你需要[`JSON.parse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse)字符串。

```
var str = '{"hello":"world"}';
try {
  var obj = JSON.parse(str); // this is how you parse a string into JSON 
  document.body.innerHTML += obj.hello;
} catch (ex) {
  console.error(ex);
}
```

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2012-06-23T18:01:28.667

`JSON.parse`是相反的`JSON.stringify`。

* * *

## 回答 #3

> 赞同：76
> 
> 时间：2013-05-24T02:33:20.950

`JSON.stringify`并且`JSON.parse`几乎是相反的，并且“通常”这种事情会起作用：

```
var obj = ...;
var json = JSON.stringify(obj);  
var obj2 = JSON.parse(json); 
```

这样 obj 和 obj2 是“相同的”。

但是，有一些限制需要注意。通常，当您处理简单的对象时，这些问题并不重要。但我将在这里使用这个辅助函数来说明其中的一些：

```
function jsonrepack( obj ) { return JSON.parse(JSON.stringify(obj) ); } 
```

*   你只会得到`ownProperties`对象并丢失原型：

    ```
    var MyClass = function() { this.foo="foo"; } 
    MyClass.prototype = { bar:"bar" }

    var o = new MyClass();
    var oo = jsonrepack(o);
    console.log(oo.bar); // undefined
    console.log( oo instanceof MyClass ); // false 
    ```

*   你会失去身份：

    ```
    var o = {};
    var oo = jsonrepack(o);
    console.log( o === oo ); // false 
    ```

*   功能无法生存：

    ```
    jsonrepack( { f:function(){} } ); // Returns {} 
    ```

*   日期对象最终以字符串形式出现：

    ```
    jsonrepack(new Date(1990,2,1)); // Returns '1990-02-01T16:00:00.000Z' 
    ```

*   未定义的值不存在：

    ```
    var v = { x:undefined }
    console.log("x" in v);              // true
    console.log("x" in jsonrepack(v));  // false 
    ```

*   提供`toJSON`函数的对象可能行为不正确。

    ```
    x = { f:"foo", toJSON:function(){ return "EGAD"; } }
    jsonrepack(x) // Returns 'EGAD' 
    ```

我确信其他内置类型也存在问题。（所有这些都使用 node.js 进行了测试，因此根据您的环境，您的行为也可能略有不同）。

当它确实很重要时，有时可以使用 和 的附加参数来克服`JSON.parse`它`JSON.stringify`。例如：

```
function MyClass (v) {
   this.date = new Date(v.year,1,1);
   this.name = "an object";
};

MyClass.prototype.dance = function() {console.log("I'm dancing"); }

var o = new MyClass({year:2010});
var s = JSON.stringify(o);

// Smart unpack function
var o2 = JSON.parse( s, function(k,v){
  if(k==="") { 
     var rv = new MyClass(1990,0,0);
     rv.date = v.date;
     rv.name = v.name;
     return rv
  } else if(k==="date") {
    return new Date( Date.parse(v) );
  } else { return v; } } );

console.log(o);             // { date: <Mon Feb 01 2010 ...>, name: 'an object' }
console.log(o.constructor); // [Function: MyClass]
o.dance();                  // I'm dancing

console.log(o2);            // { date: <Mon Feb 01 2010 ...>, name: 'an object' }
console.log(o2.constructor) // [Function: MyClass]        
o2.dance();                 // I'm dancing 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-08-13T19:17:12.800

推荐使用`JSON.parse`

您可以使用另一种方法：

```
 var myObject = eval('(' + myJSONtext + ')'); 
```

[javascript中的json](http://www.json.org/js.html)

[为什么使用 JavaScript eval 函数是个坏主意？](https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-09-02T08:07:06.847

[http://jsbin.com/tidob/1/edit?js,控制台,输出](http://jsbin.com/tidob/1/edit?js,console,output)

本机 JSON 对象包括两个关键方法。

```
1\. JSON.parse()
2\. JSON.stringify() 
```

1.  该`JSON.parse()`方法解析 JSON 字符串 - 即重建原始 JavaScript 对象

    `var jsObject = JSON.parse(jsonString);`

2.  JSON.stringify() 方法接受一个 JavaScript 对象并返回其等效的 JSON。

    `var jsonString = JSON.stringify(jsObject);`

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-08-19T20:34:33.933

这个怎么样

```
var parsed = new Function('return ' + stringifiedJSON )(); 
```

这是一个更安全的替代方案`eval`。

```
var stringifiedJSON = '{"hello":"world"}';
var parsed = new Function('return ' + stringifiedJSON)();
alert(parsed.hello);
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-08-05T06:30:43.830

看一下这个。
[http://jsfiddle.net/LD55x/](http://jsfiddle.net/LD55x/)

代码：

```
var myobj = {};
myobj.name="javascriptisawesome";
myobj.age=25;
myobj.mobile=123456789;
debugger;
var str = JSON.stringify(myobj);
alert(str);
var obj = JSON.parse(str);
alert(obj); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-01-16T18:46:36.383

这个部分解决方案怎么样？

我想存储（使用配置节点）一个全局 bigobj，带有数据 + 方法（作为导入外部库的替代方法），在我的流程中的许多功能节点中使用：

奇怪但有效：全局变量“bigobj”：

```
{
some[]more[]{dx:"here"} , // array of objects with  array of objects. The 'Config' node requires JSON.
.....
 "get_dx": "function( d,p) {  return this.some[d].more[p].dx; }"  // test function
} 
```

即函数的 JSON 版本....（都在一行中：（）

用途：在功能节点内：

```
var bigO = global.get("bigobj");

function callJSONMethod(obj, fname, a, b, c, d){
    // see: https://stackoverflow.com/questions/49125059/how-to-pass-parameters-to-an-eval-based-function-injavascript
var wrap = s => "{ return " + obj[fname] + " };" //return the block having function expression
var func = new Function(wrap(obj[fname]));
return func.call( null ).call( obj, a, b, c, d); //invoke the function using arguments
}

msg.payload =callJSONMethod(bigO, "get_dx", 2, 2); 
return msg: 
```

返回“这里”，难以置信！

即我必须使用 bigobj 将函数 callJSONMethod() 添加到任何功能块.....也许可以接受。

最好的祝福

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2016-06-04T10:46:55.093

```
$("#save").click(function () {
    debugger
    var xx = [];
    var dd = { "firstname": "", "lastname": "", "address": "" };
    var otable1 = $("#table1").dataTable().fnGetData();

    for (var i = 0; i < otable1.length; i++) {
        dd.firstname = otable1[i][0];
        dd.lastname = otable1[i][1];
        dd.address = otable1[i][2];
        xx.push(dd);
        var dd = { "firstname": "", "lastname": "", "address": "" };
    }
    JSON.stringify(alert(xx));
    $.ajax({

        url: '../Home/save',
        type: 'POST',
        data: JSON.stringify({ u: xx }),
        contentType: 'application/json;',
        dataType: 'json',
        success: function (event) {
            alert(event);
            $("#table2").dataTable().fnDraw();
            location.reload();
        }
    });
}); 
```

# monodevelop - 在 MonoDevelop 中重构键盘快捷键

> ID：11171752
> 
> 赞同：5
> 
> 时间：2012-06-23T18:01:34.383
> 
> 标签：monodevelop

MonoDevelop 中的重构命令是否有键盘绑定？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-24T16:15:10.930

**直接回答**：是的，有。

**更有用的答案**：取决于您要查找的内容，快速示例：

*   `Alt`+`Return`是`quick fix`（假设您已打开[源分析）](http://monodevelop.com/Download/What%27s_new_in_MonoDevelop_3.0#Experimental_Source_Analysis)
*   `Alt`+`Insert`是`code generation`（属性、覆盖等）
*   `F2`是`rename`

而且，如果您不知道，您在光标下的符号的所有重构都可以在右键单击上下文菜单中找到（通过按下相关的键盘键可用，因此它也算作键盘绑定； ) )

除此之外，您可以查找和/或更改`Options > Preferences > Key Bindings`.

以上是否回答了你的问题？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T18:33:56.683

这取决于您使用的是哪个版本的 MonoDevelop。对于后期的 2.x 系列，“创建方法”、“提取局部变量”和其他一些（参见[文档](http://monodevelop.com/Documentation/Refactoring)）有单独的键绑定。

重命名（包括在资源管理器视图中重命名文件以及在文本编辑器中重命名变量、类或其他任何内容）是“编辑”部分下的单独键绑定，默认为快捷键`F2`。

从 v3.x 开始，这些键绑定似乎已经消失。Edit > Preferences > Key Bindings 仍然有一个“重构”部分，但它现在只列出了 Import Symbol、Quick Fix 和 Show Fixes（我什至都​​不需要调用重构——它们是更多的代码完成功能）。相反，重构方法都可以[作为“快速修复”](http://lists.ximian.com/pipermail/monodevelop-list/2012-August/015036.html)使用（默认值：当从编辑 > 首选项 > 其他 > 源分析打开源分析时`Alt`+ ）。`Enter`

更改的原因似乎是重构机制已经过大修，现在依赖源分析，但这还不是很完美，因此默认情况下没有启用。由于它们是快速修复系统的一部分，因此它们没有被赋予单独的键绑定（因为我相信现在有更多的键绑定）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-06T05:46:26.670

对我来说，源分析菜单是：工具>选项>源分析（在文本编辑器下）>启用

好吧，它确实对编辑器屏幕进行了一些更改，它并没有像 Eclipse 那样给我提供有用的更正（自动修复）建议，无论我是否按下 Alt+Enter。

# jquery - Jquery 插件和全局变量

> ID：11171754
> 
> 赞同：0
> 
> 时间：2012-06-23T18:01:48.727
> 
> 标签：jquery, plugins

我正在阅读 jQuery 插件，在官方指南中作者指出：

“但是等等！我知道和喜爱的很棒的美元符号在哪里？它仍然存在，但是为了确保您的插件不会与可能使用美元符号的其他库发生冲突，最好将 jQuery 传递给 IIFE （立即调用函数表达式）将其映射到美元符号，因此在其执行范围内它不能被另一个库覆盖。”

这是示例代码：

```
(function( $ ) {
    $.fn.myPlugin = function() {

        // Do your awesome plugin stuff here

    };
})( jQuery ); 
```

我的问题是，为什么 IIFE 是必要的，没有它可能会发生碰撞的一些例子是什么？执行时，$ 参数将被 Jquery 全局变量替换，因此 IIFE 正在更改全局变量。对我来说，这似乎表明碰撞的可能性和以前一样。我知道我在这里遗漏了一些东西。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T18:11:54.830

该符号被[原型](http://www.prototypejs.org/)和[MooTools](http://mootools.net/)`$`等其他库用作全局变量。因此全局变量可能不引用 jQuery；这就是[jQuery 的 noConflict 方法](http://api.jquery.com/jQuery.noConflict/)存在的原因。`$`

因此，如果您的插件要在除了 jQuery 之外还使用原型或 MooTools 的页面上使用，您不能确定它`$`是否会引用 jQuery，但您可以假设该`jQuery`变量会。如果您正在编写一个插件，您希望使其尽可能易于其他人使用。因此，您希望使其与其他库无缝使用。

IIFE 使获得这种安全性成为可能，并且仍然可以方便地`$`在您的代码中使用。如果您可以始终使用`jQuery`引用而不是引用jQuery 库，`$`那么 IIFE 是不必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T18:14:07.383

想象一下，某个其他库“窃取”了`$`全局变量（通过为其分配自己的库对象）：

```
$ = otherLibrary; 
```

现在，`$`指的是另一个库，但`jQuery`（它也是一个全局变量）仍然指的是 jQuery 库。

如果你的插件是这样写的：

```
$.fn.myPlugin = function () { ... }; 
```

它不会被分配给 jQuery 的`$.fn`对象，因为`$`不再引用 jQuery 库。

但是，如果你的插件是这样写的：

```
(function ( $ ) {
    $.fn.myPlugin = function () { ... };
}( jQuery )); 
```

它将被分配给 jQuery 的`$.fn`对象，因为 (local) 参数`$`是对全局变量的引用`jQuery`。

所以：

```
$ === jQuery // false

(function ( $ ) {

    $ === jQuery // true

    $.fn.myPlugin = function () { ... };

}( jQuery ));

$ === jQuery // false 
```

该参数`$`正在**遮蔽**全局变量`$`（引用另一个库）。

# c# - 订阅 ViewModel 中当前项目的 PropertyChanged

> ID：11171755
> 
> 赞同：1
> 
> 时间：2012-06-23T18:01:52.870
> 
> 标签：c#, mvvm

订阅当前选定实体的 PropertyChanged 事件是不好的做法。假设我有一个绑定到 List 的网格，并且我已将 Grid 的 SelectedItem 绑定到 ViewModel 的 SelectedItem 属性。

```
private Customer _selectedItem;
public Customer SelectedItem
{
    get {return _selectedItem;}
    set
    {
        if (!ReferenceEquals(_selectedItem, value))
        {
            _selectedItem = value;
            RaisePropertyChanged(()=>SeletedItem);
            _selectedItem.PropertyChanged += OnCustomerPropertyChanged;
        }
    }
} 
```

这段代码是否有任何缺点，性能方面，内存泄漏方面，或者像这样使用它是安全的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T18:22:23.687

您正在泄漏事件订阅。绑定SelectedItem的思路没有错，但是以后要记得退订。您还应该在订阅和取消订阅之前对您的值进行空值检查：

```
private Customer _selectedItem;
public Customer SelectedItem
{
    get {return _selectedItem;}
    set
    {
        if (!ReferenceEquals(_selectedItem, value))
        {
            if (!ReferenceEquals(null, _selectedItem))
                _selectedItem.PropertyChanged -= OnCustomerPropertyChanged;
            _selectedItem = value;
            RaisePropertyChanged(()=>SelectedItem);
            if (!ReferenceEquals(null, _selectedItem))
                _selectedItem.PropertyChanged += OnCustomerPropertyChanged;
        }
    }
} 
```

否则，当您一个接一个地选择项目时，您之前选择的*所有*项目都将其 PropertyChanged 事件处理程序挂接到`OnCustomerPropertyChanged`. 这反过来可能导致内存泄漏（因为事件处理程序可以防止事件引发对象被 GC）或意外行为。

# android - Android 从剪贴板捕获 URL

> ID：11171757
> 
> 赞同：2
> 
> 时间：2012-06-23T18:02:00.087
> 
> 标签：android, url, clipboard, capture

我目前正在开发项目，Android Internet 下载管理器。为了下载文件，用户必须复制他想要下载的 URL。我需要的是从剪贴板获取复制的 URL 的代码，以便我可以下载从剪贴板获取的特定文件。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T18:05:08.947

你应该可以使用这个：

```
ClipboardManager clipboard = (ClipboardManager) getSystemService(CLIPBOARD_SERVICE); 
String textOnClipboard = clipboard.getText(); 
```

然后你可以检查它是否确实是一个 URL，并从那里继续解析。您可能需要查看[有关`ClipboardManager`](http://developer.android.com/reference/android/text/ClipboardManager.html).

# cordova - PhoneGap - 更新联系人电子邮件地址

> ID：11171761
> 
> 赞同：1
> 
> 时间：2012-06-23T18:02:38.197
> 
> 标签：cordova

我正在使用 PhoneGap 进行一些基本的联系人浏览/编辑。我可以更新联系人的姓名信息并提供电子邮件，但每次我这样做时，它都会将电子邮件附加为附加电子邮件地址，而不是编辑现有电子邮件地址或用新提供的电子邮件地址替换联系人上的所有电子邮件。

如何更新联系人的特定电子邮件地址？

目前我的代码分为几个函数，但它基本上看起来像这样：

```
var myContact = navigator.contacts.create();

var name = new ContactName();
name.givenName = "John";
name.familyName = "Doe"; 

var emails = [];
emails[0] = new ContactField('work', 'john.doe@test.com', true);

myContact.id = 12345;  // Update contact 12345
myContact.emails = emails;
myContact.name = name;

myContact.save(successCB, failCB); 
```

无论出于何种原因，这总是会为联系人附加一个额外的“工作”电子邮件地址，而不是覆盖已经存在的电子邮件地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T23:29:46.703

我通过首先重新加载我要更新的联系人解决了这个问题。如果现有联系人已有我要保存的电子邮件地址，我将跳过保存该地址。

但是，我仍然不知道如何从联系人中删除电子邮件地址。到目前为止，一切都好像电子邮件地址只能添加到现有联系人中一样。

# jquery - jQuery Apple 般的图像淡入效果

> ID：11171764
> 
> 赞同：0
> 
> 时间：2012-06-23T18:02:56.363
> 
> 标签：jquery, fadein

当您访问[http://www.apple.com/mac/](http://www.apple.com/mac/)时，您会看到上述产品以某种效果淡入页面。有没有一个jQuery插件可以做类似淡入的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T18:16:20.487

这是我放在一起的一个类似的小提琴：http: [//jsfiddle.net/33sN4/1/](http://jsfiddle.net/33sN4/1/)

你不会真的需要一个插件，虽然我敢肯定那里有一个......

您只需要遍历对象并延迟淡入（或幻灯片，或动画......您选择的任何效果）：

```
$(function(){   

    $('.region').each(function(index){
        $(this).delay(index*1000).fadeIn(500);
    });

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T18:11:47.120

jQuery 包含产生类似效果的方法。你可以使用 .fadeIn(secs) 和 .fadeOut(secs) 来做你需要的事情。您还可以使用 .anmiate() 为 CSS 属性设置动画。有关 jQuery 功能的完整描述，请查看 jQuery 效果文档：

[文档链接](http://api.jquery.com/category/effects/)

要查看一些展示淡入/淡出幻灯片效果的插件，请查看

[插件演示](http://www.geeksucks.com/toolbox/23-jquery-fade-in-fade-out-effect.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-25T18:39:01.517

您不需要 jQuery 插件。

您可以使用[delay()](http://api.jquery.com/delay/)、[animate()](http://api.jquery.com/animate/)和[css()](http://api.jquery.com/css/)来获得所需的结果。您甚至可以调整时间以根据自己的喜好改变效果。

例如。

```
$('#mac').css({
    left: 0,
    opacity: 0
}).delay(500).animate({
    left: 50,
    opacity: 1,
    queue: false
}, 'fast'); 
```

工作示例，单击图像查看：http: [//jsfiddle.net/cfgyhdou/](http://jsfiddle.net/cfgyhdou/)

# windows-phone-7 - 直接访问 Azure 存储的 Windows Phone 7.1 应用

> ID：11171767
> 
> 赞同：0
> 
> 时间：2012-06-23T18:03:10.363
> 
> 标签：windows-phone-7

我正在创建一个 wp7.1 silverlight 应用程序，并希望直接访问 azure blob 和表存储。在互联网上搜索我可以看到使用 Web 应用程序，但我不想将 Web 应用程序用于我的 silverlight 应用程序。

是否有直接从 wp7.1 应用程序访问 azure 存储的直接方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T23:28:00.710

您可以使用[WP7AzureQuickstarts](http://wp7azurequickstarts.codeplex.com/releases/view/65745)库来启动您的项目。这个库有以下 4 个基于 C# 的项目，带有完整的源代码：

1.  WP7Azure目录
2.  WP7Azure定位器
3.  WP7AzureNextGroupEvent
4.  WP7FacebookAzure

如果您下载**WP7FacebookAzure**源代码并查找具有完整源代码的**WindowsPhoneCloud.StorageClient 库**，可以直接从 WP7 客户端应用程序访问 Azure Blob、表和队列存储。您可能需要了解安全性、SAS 等。

您还可以下载[适用于 WP7 的 Windows Azure Toolkit](http://watwp.codeplex.com/)源并按照您想要使用的方式修改源代码。

# google-closure - 设置 goog.ui.Textarea 的宽度

> ID：11171770
> 
> 赞同：3
> 
> 时间：2012-06-23T18:04:03.410
> 
> 标签：google-closure

## 语境

我正在使用来自[http://closure-library.googlecode.com/svn/docs/class_goog_ui_Textarea.html的 goog.ui.textarea](http://closure-library.googlecode.com/svn/docs/class_goog_ui_Textarea.html)

有一个 setMinHeight 元素，但没有 setMinWidth 元素。

事实上，我根本看不到任何类型的宽度设置元素。

## 问题：

如何设置 goog.ui.Textarea 元素的初始宽度/大小？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:17:33.753

由于 a`goog.ui.Textarea`要么装饰或渲染`<textarea>`元素，因此可以使用 CSS 控制初始宽度：

```
textarea {
  width: 400px;
  height: 100px;
} 
```

看看[`goog.ui.Textarea`演示](http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/textarea.html)。

# svn - svn 和本地文件夹身份验证

> ID：11171773
> 
> 赞同：0
> 
> 时间：2012-06-23T18:04:19.117
> 
> 标签：svn, svn-client

有一种访问存储库的好方法：`http://username:password@repoUrl` 如果您想访问不是由您创建的光盘上的 svn 文件夹，您将始终从`svn.exe`.

如果 A 用户将代码从存储库服务器签出到本地磁盘（`c:\RepoFolder\ProjectX`）并且 B 用户想要登录到同一台计算机并运行`c:\>svn list -R c:\RepoFolder\ProjectX\trunk`，svn 将生成类似的错误

```
-     
C:\>svn list -R c:\RepoFolder\ProjectX\trunk
svn: E175013: Unable to connect to a repository at URL 'http://RepoServerName/RepoFolder/ProjectX/trunk'
svn: E175013: Access to 'http://RepoServerName/RepoFolder/ProjectX/trunk' forbidden
- 
```

有没有办法检索 svn 之类的列表`file:///username@domain:password@repoPath`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:16:18.007

我找到了答案。

```
C:\>svn list -R --username UserNamee --password Passworrrd c:\RepoFolder\ProjectX\trunk 
```

非常简单，但他们隐藏了这个论点背后的答案：

```
C:\>svn list -help 
```

# c# - 为什么将字符串构造函数与 char 数组一起用于常量？

> ID：11171774
> 
> 赞同：2
> 
> 时间：2012-06-23T18:04:27.657
> 
> 标签：c#, .net

我找到了这段代码，我想了解为什么开发人员将字符串构造函数与 char 数组一起使用，而不仅仅是文字常量字符串：

```
static string atomLang = new String("lang".ToCharArray()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T18:12:37.017

我能想到的唯一原因是避免获得对字符串[内部实例的引用。](http://msdn.microsoft.com/en-us/library/system.string.intern.aspx)

```
string str1 = "lang";
string str2 = "lang";
string str3 = new String("lang".ToCharArray());

Console.WriteLine(object.ReferenceEquals(str1, str2));   // Output: true
Console.WriteLine(object.ReferenceEquals(str1, str3));   // Output: false 
```

并不是说这会对您的代码产生任何实际影响（除了边际性能差异）。

# apache-poi - XWPFDocument (Apache POI) 中的从右到左 (RTL) 文本

> ID：11171777
> 
> 赞同：0
> 
> 时间：2012-06-23T18:04:51.230
> 
> 标签：apache-poi, right-to-left

我找不到在我的 Java 程序中使用 XWPFDocument (Apache POI) 在 Docx 中制作 RTL 段落的方法。这是我生成 XWPFDocument 的代码。

```
 XWPFParagraph title = document.createParagraph();
    title.setAlignment(ParagraphAlignment.CENTER);
    title.setVerticalAlignment(TextAlignment.CENTER);
    title.setWordWrap(true);
    XWPFRun titleRun = title.createRun();
    titleRun.setText(reportDesign.getName());

    XWPFTable s = document.createTable(resultList.size()+1, columnList.size());
    // declare a row object reference
    XWPFTableRow r = s.getRow(0);
    // declare a cell object reference
    XWPFTableCell c = null;
    // create columnList.size() cells (0-(columnList.size()-1))
    for (int cellnum = 0; cellnum < columnList.size(); cellnum++) {
        c = r.getCell(cellnum);
        c.setColor("c9c9c9");
        c.setVerticalAlignment(XWPFVertAlign.CENTER);
        c.setText(columnList.get(cellnum).getColumnHeader());
    }
    // create a sheet with resultList.size() rows (1-resultList.size())
    for (int rownum = 0; rownum < resultList.size(); rownum++) {
        // create a row
        r = s.getRow(rownum+1);

        // create columnList.size() cells (0-(columnList.size()-1))
        for (int cellnum = 0; cellnum < columnList.size(); cellnum++) {
            c = r.getCell(cellnum);
            Object value = resultList.get(rownum).get(columnList.get(cellnum).getColumnKey());
            if (value != null) {
                c.setText(value.toString());
            } else {
                c.setText("");
            }
        }
    } 
```

你能帮帮我吗？是否有一种合乎逻辑的方式来扩展 POI（或类似的解决方案）以获得此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T18:47:11.850

到目前为止，我发现的一种解决方法是使用模板文档。

使用此方法，您可以创建一个空文档，其中“Normal”样式配置为 RTL。这样，您文档中的所有内容都将是 RTL。

```
XWPFDocument document = new XWPFDocument(AbstractWordView.class.getClassLoader().getResourceAsStream("empty.docx")); 
```

# angularjs - 服务、指令和模块有什么区别？

> ID：11171778
> 
> 赞同：154
> 
> 时间：2012-06-23T18:05:06.667
> 
> 标签：angularjs

我一直在阅读很多文档，而且我越来越困惑。我基本上无法弄清楚a之间的区别

*   服务
*   指示
*   模块

我看到很多自定义组件。有时他们使用指令，有时使用服务。它总是从一个模块开始。有人可以举例说明这三种类型之间的区别吗？

* * *

## 回答 #1

> 赞同：237
> 
> 时间：2012-11-20T20:57:48.887

来自我自己的[个人笔记](https://docs.google.com/document/d/12w4NKsix-kaZFu5Chha4HnIHzs5jhNiP2AcRoaVThyU/edit)（主要来自文档、谷歌群组帖子和 SO 帖子的片段）：

**模块**

*   提供命名空间/分组服务、指令、过滤器、配置信息和初始化代码的方法
*   帮助避免全局变量
*   用于配置 $injector，允许将模块（或整个模块本身）定义的东西注入其他地方（依赖注入的东西）
*   Angular 模块与 CommonJS 或 Require.js 无关。与 AMD 或 Require.js 模块相反，Angular 模块不会尝试解决脚本加载顺序或延迟脚本获取的问题。这些目标是正交的，两个模块系统可以并存并实现它们的目标（文档声称）。

**服务**

*   是单例，因此您定义的每个服务只有一个实例。作为单例，它们不受作用域的影响，因此可以被多个视图/控制器/指令/其他服务访问（共享）
*   您可以（并且可能应该）在以下情况下创建自定义服务
    *   两个或更多的东西需要访问相同的数据（不要使用根范围），或者你只是想整齐地封装你的数据
    *   您想封装与 Web 服务器的交互（在您的服务中扩展 $resource 或 $http）
*   内置服务以“$”开头。
*   要使用服务，依赖项需要注入依赖项（例如，在控制器、其他服务或指令上）。

**指令**（下面的一些项目说的基本相同，但我发现有时稍微不同的措辞会有很大帮助）

*   负责在模型状态发生变化时更新 DOM
*   扩展 HTML 词汇 = 教授 HTML 新技巧。
    Angular 带有一组内置指令（例如，ng-* 的东西），这些指令对于构建 Web 应用程序很有用，但您可以添加自己的指令，以便将 HTML 转换为声明性域特定语言 (DSL)。例如，Angular 主页演示“创建组件”中的 <tabs> 和 <pane> 元素。
    *   不明显的内置指令（因为它们不以“ng”开头）：a、form、input、script、select、textarea。在 Angular 下，这些都比平常做得更多！
*   指令允许您“组件化 HTML”。指令通常比 ng-include 更好。例如，当您开始编写大量主要使用数据绑定的 HTML 时，将该 HTML 重构为（可重用）指令。
*   Angular 编译器允许您将行为附加到任何 HTML 元素或属性，甚至可以创建具有自定义行为的新 HTML 元素或属性。Angular 将这些行为扩展*指令*称为。
    *   归根结底，指令只是一个函数，当 Angular 编译器在 DOM 中遇到它时会执行它。
*   指令是由属性、元素名称、类名称或注释中的名称的存在触发的行为或 DOM 转换。指令是在 (HTML) 编译过程中遇到特定 HTML 结构时应触发的行为。指令可以放置在元素名称、属性、类名以及注释中。
    *   大多数指令仅限于属性。例如，DoubleClick 仅使用自定义属性指令。
*   另请参阅[什么是 angularjs 指令？](https://stackoverflow.com/questions/13875466/what-is-an-angularjs-directive/13898058#13898058)

在模块中定义和分组 Angular 的东西（依赖注入的东西）。
共享数据并将 Web 服务器交互封装在服务中。
扩展 HTML 并在指令中进行 DOM 操作。
并使控制器尽可能“薄”。

* * *

## 回答 #2

> 赞同：125
> 
> 时间：2012-06-27T00:00:42.927

将模块视为连接许多其他事物的地方，例如指令、服务、常量等。模块可以注入到其他模块中，从而为您提供高水平的重用。

在编写 Angular 应用程序时，您将拥有一个顶级模块，它是您的应用程序代码（没有模板）。

服务主要是控制器之间通信的一种方式，但您可以将一个服务注入另一个服务。服务通常用作访问数据存储的一种方式，人们将包装 Angular API，例如 ngResource。这种技术很有用，因为它使测试（尤其是模拟）变得非常容易。您可以拥有用于执行其他操作的服务，例如身份验证、日志记录等。

指令用于创建小部件或包装现有的东西，如 jquery 插件。包装现有插件可能是一个挑战，您这样做的原因是在插件和 Angular 之间建立双向数据绑定。如果您不需要双向数据绑定，则不需要包装它们。

指令也是进行 DOM 操作、捕获 DOM 事件等的地方。你不应该在控制器或服务中做与 DOM 相关的事情。创建指令会变得相当复杂。恕我直言，我建议首先查看 API 以获取可以执行您正在寻找的东西的东西，或者向 Angular 的 Google Group 寻求建议。

# python - 有没有办法在 Python 中寻找特定的行？

> ID：11171780
> 
> 赞同：0
> 
> 时间：2012-06-23T18:05:15.090
> 
> 标签：python

我正在自学编程，今天的挑战是编写一个可以将文本左对齐、右对齐或居中对齐的程序。我的主要问题是，一旦打开文件，我不确定如何写入特定行。是否有捷径可寻？这就是我所拥有的。我想我需要以某种方式计算行中的字节，以便我可以 f.seek 到行尾。我觉得 python 已经在某个地方拥有这种类型的功能，但我在网上搜索时找不到它。有什么建议么？

```
def align():
    name= input('what is the name of your txt file?: ')
    try:
        f=open(name + '.txt','r+')
        lines =f.readlines()
        just = input('left, right, or centre?: ')
        for i in range[,lines]:
            j = lines[i].strip('\n')
            if just == 'right':
                f.seek() #I want it to seek each line but can't figure out what variable might go here...
                f.write('{:>30}'.format(line.strip()))
            elif just == 'left':
                f.seek() #I want it to seek each line but can't figure out what variable might go here...
                f.write('{:<30}'.format(line.strip()))
                f.seek() #I want it to seek each line but can't figure out what variable might go here...
            elif just == 'centre' or just == 'center':
                f.write('{:^30}'.format(line.strip()))
        else:
            print("You didn't choose a justification!")
        f.close() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T18:23:31.717

您的代码中有很多重复，可以/应该消除它，例如，以下处理所有三种可能性：

```
for line in infile:
    print '{:{}{}}'.format(line.strip(), align, width) 
```

其中`width`是一个数字，并且`align`- <、> 或 ^ 之一。

至于“寻找”问题，正如其他人已经建议的那样，最好将输出重定向到另一个文件中，而不是“就地”重写输入文件：

```
with open("in.txt", 'r') as infile, open("out.txt", 'w') as outfile: 
   for line in infile:
        outfile.write('{:{}{}}\n'.format(line.strip(), align, width)) 
```

[with 语句](http://effbot.org/zone/python-with-statement.htm)like与`with open(...) as var: do stuff`以下内容大致相同：

```
 var = open(...)
  do stuff
  close(var) 
```

但更不容易出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T18:07:56.877

不，您不能直接寻找给定的行（除非所有行的长度完全相同，在这种情况下您可能能够计算出正确的偏移量）。

您有两种方法是使用 一次将所有文件读入内存`readlines()`，或者逐行执行并保持计数，如下所示：

```
with open('data.txt') as inf:
     for count, line in enumerate(inf, 1):
         if count == 10:
             print 'found "{}" at line 10.'.format(line) 
```

[enumerate()](http://docs.python.org/library/functions.html#enumerate)将自动从 1 开始为您保留计数

请注意，使用打开文件`with`将确保文件在完成后正确自动关闭，否则会发生异常。

[使用readlines()](http://docs.python.org/library/stdtypes.html?highlight=readlines#file.readlines)的替代方法会将整个文件读入列表，您可以通过索引访问给定的行。如果文件很大，这可能是内存问题。

获得感兴趣的行后，您可以根据需要对其进行格式化并将其写入不同的文件。

# html - 全屏视频切换 HTML

> ID：11171781
> 
> 赞同：5
> 
> 时间：2012-06-23T18:05:15.247
> 
> 标签：html, video

HTML 5 中的视频标签非常吸引人。我需要知道是否可以让用户切换全屏播放。我不想使用任何其他视频插件。我只需要使用视频标签。这可能吗。请帮帮我....

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-25T19:13:07.737

您可以使用以下代码创建一个按钮，将视频带入全屏模式。

Javascript代码：

```
<script type="text/javascript">
function goFullscreen(id) {
  var element = document.getElementById(id);       
  if (element.mozRequestFullScreen) {
    element.mozRequestFullScreen();
  } else if (element.webkitRequestFullScreen) {
    element.webkitRequestFullScreen();
  }  
}
</script> 
```

html代码：

```
<video class="video_player" id="player" width="100%" controls="controls" autoplay="autoplay">
  <source src="INPUT VIDEO URL HERE"/>
  Your browser does not support the HTML5 video tag.  Use a better browser!
</video>
<button onclick="goFullscreen('player'); return false">
  View Fullscreen!
</button> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T19:37:22.967

是的。有可能的。但是，大多数浏览器都有一些限制。目前仅支持（截至 2012 年 6 月）基于 Webkit 的浏览器，如 Safari 和 Chrome。

请检查以下内容：

1.  [http://videojs.com/](http://videojs.com/)
2.  [http://blog.jilion.com/2011/07/27/world-s-first-true-html5-fullscreen-video](http://blog.jilion.com/2011/07/27/world-s-first-true-html5-fullscreen-video)（仅适用于 Safari）
3.  [http://easyhtml5video.com/](http://easyhtml5video.com/)
4.  [http://johncblandii.com/2011/07/html5-video-fullscreen.html](http://johncblandii.com/2011/07/html5-video-fullscreen.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T18:10:52.783

据[该网站](http://www.longtailvideo.com/html5/#fullscreen_playback)称，所有“大浏览器”中只有一半支持全屏播放。我的谷歌浏览器在尝试全屏时实际上崩溃了。然而，随着时间的推移，将会有一个全局切换。

# c# - 带有 ASP.NET 的 HTML5 Web 套接字

> ID：11171782
> 
> 赞同：0
> 
> 时间：2012-06-23T18:05:22.010
> 
> 标签：c#, asp.net, .net, html, websocket

是否可以使用 ASP.NET/Web Form 创建 HTML5 Web Socket？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T18:17:07.443

嗯。不是。HTML5 Web 套接字是客户端功能，这意味着您可以通过 WebSocket 对象将它与 JavaScript 代码一起使用。因此，通过您在 ASP.NET WebForms/MVC 项目中编写的客户端代码，您可以使用它。

如果您尝试通过 ASP.NET 支持 Web 套接字协议[，则可以使用非常新的 ASP.NET 版本](http://www.asp.net/vnext/overview/whitepapers/whats-new#_Toc318097383)。这是你想要做的吗？你的问题有点含糊。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T21:42:13.097

简短的回答是否定的，不是 .NET 4.0 和 IIS 7.5（分别是 .NET 和 IIS 的当前生产版本）。正如 JP 提到的，将来会支持 web sockets。更具体地说，IIS 8 将能够支持这一点，以及一些将与 ASP.NET 4.5 捆绑在一起的 System.Net 命名空间。

同时，您可能有兴趣了解更多有关[SignalR](https://github.com/SignalR/SignalR)的信息。它包括一个使用 HTML5 Web Sockets 的客户端库，但如果客户端或服务器不支持 Web 套接字，则回退到长轮询。最重要的是，这种回退机制对客户和实施者是透明的。还提供了支持 Web 套接字的 .NET 服务器实现。

这个 SO Q & A 也可能很有趣。

[.NET 4.5 WebSockets 与 SignalR](https://stackoverflow.com/questions/9524591/net-4-5-websockets-vs-signalr)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T06:06:11.677

您应该考虑尝试[VisualJS.NET](http://visualjs.net)。这是内置的反向 ajax 和[websocket](http://pokein.com/Help/WebSocketFeature.aspx)支持的 asp.net web 应用程序开发层。

# c++ - 可以设置一个钩子来捕获子进程发送到控制台的消息吗？

> ID：11171785
> 
> 赞同：0
> 
> 时间：2012-06-23T18:05:55.140
> 
> 标签：c++, windows, winapi, console, hook

所以我启动一个普通的控制台程序，然后在其中创建另一个进程。接下来，子进程尝试将某些内容写入父进程拥有的控制台。

是否可以在此控制台上放置一个挂钩，以便当子进程尝试编写一些文本时，我可以在此文本上进行搜索和替换并将其更改为控制台。

（我知道管道是可能的，但在这里我特别要求在控制台级别执行此操作，因为如果某些程序看到它们连接到管道而不是控制台，它们的行为会有所不同。）

跟我的问题有`SetWindowsHookEx`关系吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:04:12.913

只是为了避免混淆，Windows 消息不涉及此，因此挂钩是完全错误的概念。

如果要更改写入 STDOUT 的子进程数据，则需要创建自己的管道，在创建进程时将其传递给进程。这使您可以从中读取数据，根据需要进行更改，然后自己打印到 STDOUT。无法拦截直接写入控制台的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T18:32:18.280

所以你想在控制台上安装一个winproc钩子吗？当然，您可以做到，首先您必须获取控制台窗口的 HWND（请阅读[此处](http://support.microsoft.com/kb/124103 "这里")），然后您可以调用您的 SetWindowsHookEx() 并挂钩它。请注意，在您的钩子过程中，调用 defwinproc 将调用控制台的原始 winproc，因此，如果您不想修改控制台的整个行为，那么您应该清楚。

# magento - Magento - 根据 RMA Grid 中的 EAV（自定义）属性过滤客户

> ID：11171786
> 
> 赞同：3
> 
> 时间：2012-06-23T18:05:55.403
> 
> 标签：magento

我正在使用 Magento 1.4.1.1 和[AW RMA 扩展](http://ecommerce.aheadworks.com/magento-extensions/rma.html)。

安装此扩展后，我在管理员中看到了 RMA 请求网格和待处理的 RMA 请求网格。

我希望能够根据`customer_referrer_id`存储在*customer_entity_varchar中的 EAV（自定义）属性过滤此网格中的请求*

该扩展有一个表*aw_rma_entity*，其中还保留了*customer_id*。RMA Grid 获取如下数据：

```
$collection = Mage::getModel('awrma/entity')
                ->getCollection(); 
```

## 尝试 1

我已尝试将客户实体与此表连接起来，如下所示：

```
$collection->getSelect()->join('customer_entity', 'customer_id = customer_entity.entity_id', array('entity_id' => 'customer_entity.entity_id')); 
```

## 结果 1

这只是显示一个没有网格的页面。如果它起作用了，我会尝试加入 customer_entity_varchar 以在该`customer_referrer_id`字段上应用过滤器。

* * *

## 尝试 2

我所做的另一个尝试是先加载客户集合，然后将 RMA 实体数据加入其中，如下代码所示：

```
$collection = Mage::getResourceModel('customer/customer_collection');

$collection->joinRight('awrma/entity', 'customer_id=entity_id', array('*')); 
```

## 结果 2

第二次尝试产生以下错误：

> 错误信息--------------------------------> 具有相同 id "XXX" 的项目 (Mage_Customer_Model_Customer) 已存在";

尽管事实上它[在销售订单网格中过滤结果的类似问题之后以这种方式对我有用](https://stackoverflow.com/questions/3915148/how-to-get-data-for-an-entity-for-example-customer-from-eav-attribute-table-to)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T10:38:33.760

这可能不是最好的解决方案，但它很可能会起作用：

```
$collection = Mage::getModel('awrma/entity')->getCollection();
$collection->getSelect()->joinInner('customer_entity_varchar', 'customer_id=entity_id', array('attribute_id' =>'attribute_id','value'=>'value') );                
$logged_in_admin = Mage::getSingleton('admin/session')->getUser()->getEmail();  
$customer_referrer_attribute_id = //Set this equal to attribute_id FROM table eav_attribute WHERE attribute_code = "customer_referrer_id"     
$collection->addFieldToFilter('attribute_id', $customer_referrer_attribute_id );
$collection->addFieldToFilter('value', $customer_referrer_id); 
```

# python - Tornado 和 PIL：从标题打开图像

> ID：11171789
> 
> 赞同：5
> 
> 时间：2012-06-23T18:06:01.647
> 
> 标签：python, python-2.7, python-imaging-library, tornado

我的 Tornado 应用程序在标题中接收图像。所以，我想重新调整它的大小并存储它。但是我在打开图像时遇到了麻烦-要创建 PIL 对象，我必须拥有带有图像的文件并将文件名传递给 PIL 的 Image 模块的 open() 方法。但我那里只有标题和文件信息。我应该创建临时文件来创建 Image 对象吗？或者也许其他一些解决方案？

```
class ImageHandler(BaseHandler):
    def post(self):
        f = open("out.jpg", "w")
        im = Image.open(self.request.files["ImageUpload"][0]["body"])
        im.save(f, "JPEG")
        self.finish() 
```

蒂亚！

**UPD1** (@bernie)

```
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/site-packages/tornado-2.2-py2.7.egg/tornado/web.py", line 988, in _execute
    getattr(self, self.request.method.lower())(*args, **kwargs)
  File "server.py", line 160, in post
    im = Image.open(StringIO(self.request.files["ImageUpload"][0]["body"]))
TypeError: 'module' object is not callable 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T18:18:12.520

[PIL 文档指出](http://effbot.org/imagingbook/image.htm)，我们可以为`open()`.
所以我们可以使用[`StringIO`](http://docs.python.org/library/stringio.html)PIL 来提供一个类似文件的对象。
应用于您的代码的示例：

```
from PIL import Image
from io import StringIO

im = Image.open(StringIO(self.request.files["ImageUpload"][0]["body"]))
im.save("out.jpg", "JPEG") 
```

# ios - 应用更新后应用内购买项目不再有效

> ID：11171791
> 
> 赞同：3
> 
> 时间：2012-06-23T18:06:04.673
> 
> 标签：ios, keychain, in-app-purchase, mkstorekit

我在 App Store 中有一个应用程序，它使用应用程序内购买项目来解锁完整的功能集。在迄今为止的所有版本中，更新从来都不是问题。客户可以从 App Store 下载新版本，之前购买的“完整版项目”仍然有效：更新后仍然可以使用完整版。

今天我发布了一个新版本的应用程序，一些客户报告了完整版的问题：更新后，该应用程序仅作为有限试用版运行。该应用程序似乎“忘记”了有关 IAP 的信息。

我使用 MKStoreKit 处理购买，有关 IAP 的信息存储在 KeyChain 中。用户可以通过调用相应StoreKit函数的应用内的“恢复之前购买功能”恢复完整版。

钥匙链中的信息怎么会丢失？

我不知道是所有客户都受到此问题的影响，还是其中一些客户受到影响。我只能说，很多人都报告了这个问题。

我不知道问题可能是什么。

这是第一个使用 iCloud 的版本，因此它是第一次将权利文件包含在应用程序中。这可能是问题的根源吗？

权利文件中的“钥匙串访问组”属性设置为“xy.mycompany.MyApp”，这与捆绑标识符相同。

我认为如果没有权利，应用程序在密钥链中使用“xy.mycompany.MyApp”来存储 IAP 信息，并且权利文件中的信息只是让不同的应用程序在密钥链中共享相同的信息。因此，我不确定这是否与 IAP 问题有关。

你怎么看？有什么想法或建议吗？

# c# - 在 Windows 机器上链接 libnfc

> ID：11171794
> 
> 赞同：0
> 
> 时间：2012-06-23T18:06:36.090
> 
> 标签：c#, dll, nfc

我成功地将 libnfc 与 GNU/Linux 和 C/C++ 一起使用。现在我需要在Windows下编写一个*桥接*库，这样我就可以很容易地用C#访问libnfc。简而言之：
我无法链接*libnfc.dll*。

```
#include <iostream>
#include "libnfc_read_only\include\nfc\nfc.h"
using namespace std;

int main() {
    cout << nfc_version() << "\n";
    return 0;
} 
```

C:\Users\peter\nfc_access>x86_64-w64-mingw32-g++ -o test test.cpp -Llibnfc_build\libnfc -llibnfc

```
C:\Users\peter\nfc_access>x86_64-w64-mingw32-g++ -o test test.cpp -Llibnfc_build\libnfc -llibnfc
c:/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skippi
ng incompatible libnfc_build\libnfc/libnfc.dll.a when searching for -llibnfc
c:/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skippi
ng incompatible libnfc_build\libnfc/libnfc.dll when searching for -llibnfc
c:/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skippi
ng incompatible libnfc_build\libnfc/libnfc.dll.a when searching for -llibnfc
c:/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: skippi
ng incompatible libnfc_build\libnfc/libnfc.dll when searching for -llibnfc
c:/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.6.1/../../../../x86_64-w64-mingw32/bin/ld.exe: cannot
 find -llibnfc
collect2: ld returned 1 exit status 
```

当我尝试将我的 dll 与此链接时，也会发生同样的情况。

```
C:\Users\peter\nfc_access>file libnfc_build/libnfc/libnfc.*
libnfc_build/libnfc/libnfc.dll;   PE32 executable for MS Windows (DLL) (console) Intel 80386 32-bit
libnfc_build/libnfc/libnfc.dll.a; current ar archive 
```

我做错了什么？

// 编辑 C:\Users\peter\nfc_access>file bar_dll.dll lib_bar_dll.a bar_dll.dll; 适用于 MS Windows (DLL) 的 PE32+ 可执行文件（控制台）Mono/.Net 程序集 lib_bar_dll.a；当前的 ar 档案

我无法链接到这个 dll！但是在这种情况下，“Mono/.Net”是什么意思？这是本机代码！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T10:00:29.167

解决了！

```
C:\Users\peter\nfc_access>g++ -o touchatag_bridge.dll touchatag_bridge.cpp -Wl,--out-implib,touchata
g_bridge.a -Llibnfc_build\libnfc -llibnfc -m32 -shared
Creating library file: touchatag_bridge.a 
```

选项*-m32*解决了它 - 万岁！

# amazon-mws - 是否可以使用 Amazon Marketplace 网络服务获取商家价格？

> ID：11171798
> 
> 赞同：3
> 
> 时间：2012-06-23T18:06:57.883
> 
> 标签：amazon-mws

我目前正在探索亚马逊市场网络服务，看看如果我提供一个 ASIN 作为输入，我是否可以获得商家价格列表（商品价格和运费）。这是我遇到的可能有帮助的操作

*   GetCompetitivePricingForSKU
*   GetCompetitivePricingForASIN

和

*   GetLowestOfferListingsForSKU
*   GetLowestOfferListingsForASIN

基于 SKU 和 ASIN 的 GetLowestOfferListing 返回特定产品的最低价格报价列表。我在想 SKU 和 ASIN 的 GetCompetitivePricing 会返回所有商家的定价信息，但它只返回价格最低的商家信息。

如果我提供 ASIN 或 SKU 作为输入，是否有办法使用亚马逊 MWS 获取所有商家的销售和运输价格列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:38:32.343

当卖家使用白名单账户时，亚马逊曾经使用 PA-API 为卖家提供此功能，截至 2012 年 8 月 31 日，亚马逊删除了 OfferFull 响应组并强制卖家转移到 MWS api。

MWS 没有此功能，据我所知，它已被删除并且永远不会返回。

# animation - PyGame 动画精灵面临左侧问题

> ID：11171811
> 
> 赞同：1
> 
> 时间：2012-06-23T18:08:23.033
> 
> 标签：animation, sprite, pygame

我在使用以下代码时遇到问题：

```
def handle_image_flip(self, old_rect):
    new_rect = self.last_frame.get_rect()
    self.owner.rect = new_rect
    self.owner.rect.y = old_rect.y
    if self.owner.facing == -1:
        self.owner.rect.right = old_rect.right
    else:
        self.owner.rect.x = old_rect.x

def animate(self, tick):
    if tick - self.last_update > self.image_info[self.action]["frame_rate"]:
        self.last_frame = self.get_next_frame(tick)
        old_rect = self.owner.rect.copy()
        self.owner.image = self.last_frame
        self.handle_image_flip(old_rect)
        self.last_update = tick 
```

在哪里：

```
self.owner is the sprite this piece of code handles
self.owner.facing is the direction the sprite is facing
self.last_frame is the new image I want to display 
```

由于**精灵有不同的宽度**，我在面对 LEFT (-1) 时会出现故障动画。

向右移动时没有任何问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:37:03.410

如果您使用`Rect.center`or `Rect.centerx`vs default 来跟踪玩家的位置，`topleft`则可以使用不同的宽度。

根据您的游戏，使用精灵表可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:48:45.490

在你的`if`陈述中，在一种情况下你改变`self.owner.rect.right`了，在另一种情况下你改变了`self.owner.rect.x`。

这可能是问题的一部分，因为当您向左移动时，您正在改变`.right`而不是`.x`

# django - 如何在通用视图中使用名为组的 url 模式？

> ID：11171813
> 
> 赞同：4
> 
> 时间：2012-06-23T18:08:46.683
> 
> 标签：django, django-generic-views

我正在尝试使用通用视图显示特定作者的博客记录：

```
urlpatterns = patterns('',
    url(r'^blog/(?P<uid>[\d+])/$', ListView.as_view(
        queryset=Blog.objects.filter(published=True, author=uid),
    ), name='blog_list'), 
```

但我得到**NameError: name 'uid' is not defined**

是否可以以这种方式使用 urlconf 命名组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T21:40:01.733

您需要像这样创建自己的 ListView 实现：

```
class BlogListView(ListView):
    model = Blog

    def get_queryset(self):
        return super(BlogListView, self).get_queryset().filter(
            published=True, author__id=self.kwargs['uid']) 
```

然后在你的 URLconf 中使用它：

```
urlpatterns = patterns('',
    url(r'^blog/(?P<uid>[\d+])/$', BlogListView.as_view(),
        name='blog_list'), 
```

在我看来，基于类的通用视图的文档还不能完全满足 Django 项目的其余部分 - 但有一些示例展示了如何以`ListView`这种方式使用：

[https://docs.djangoproject.com/en/1.3/topics/class-based-views/#viewing-subsets-of-objects](https://docs.djangoproject.com/en/1.3/topics/class-based-views/#viewing-subsets-of-objects)

# jquery - 解析Json数据jQuery每个

> ID：11171816
> 
> 赞同：0
> 
> 时间：2012-06-23T18:09:36.657
> 
> 标签：jquery, json

我收到这样的 json 响应

```
{"item_id":"1","item_title":"Item 1"}{"item_id":"2","item_title":"Item 2"} 
```

对于返回的每个数据，我将如何解析它？

试过了

```
$.ajax({
                          url: 'linktojson',
                          type: "post",
                          dataType: "json",
                          success: function (response) {
                              //console.log('isok');
                              if (response.item_id) {
                                 $('#posts').html(response.item_id);
                              }
                          }
                        }); 
```

但仅当我在响应中有 1 项时才有效。

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T18:19:32.270

从服务器返回有效后，您可以使用like`JSON`遍历`json`对象`$.each`

```
success: function (response) {
    $.each(response,function(i,item){
        $('#posts').append(item.item_id+"<br />"); 
    });
} 
```

**演示：http:** [//jsfiddle.net/joycse06/DxaaV/](http://jsfiddle.net/joycse06/DxaaV/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T18:14:28.200

这不是有效的 JSON，它仅适用于一个元素。

读取[JSON](http://es.wikipedia.org/wiki/JSON)

或者在 PHP 端使用**json_encode**（假设您使用的是 PHP）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T18:14:29.910

你应该得到一个这样的对象数组：

```
var variable = [{"item_id":"1","item_title":"Item 1"}, {"item_id":"2","item_title":"Item 2"}]; 
```

因此，将响应修改为如上。这是小提琴：http: [//jsfiddle.net/YZ6Fc/](http://jsfiddle.net/YZ6Fc/)

# r - 如何根据模式匹配为 R 中的数据点着色？

> ID：11171817
> 
> 赞同：2
> 
> 时间：2012-06-23T18:09:58.930
> 
> 标签：r, bioinformatics

我有一个带有这种形式的数据框：

```
 V1 V2                       V3          V4       V5         V6       V7           V8
1 0610007C21Rik  -   chr5:31351012-31356737 1.33732e-05 0.752381  0.9965090 0.000000 1.777419e-05
2 0610007L01Rik  - chr5:130695613-130717165 1.67168e+00 1.673120  0.0000000 3.453930 4.997847e-01
3 0610007P08Rik  -  chr13:63916627-64000808 7.06033e-01 0.000000  0.0815767 0.318051 1.000000e+00
4 0610007P14Rik  -  chr12:87157066-87165495 0.00000e+00 0.000000  0.0000000 5.494230          NaN
5 0610007P22Rik  -  chr17:25377114-25379603 4.99696e+00 0.908254  0.9076130 3.639250 8.461946e-01
6 0610009B22Rik  -  chr11:51499151-51502136 6.53363e-01 8.500980 13.5797000 0.000000 7.137192e-02 
```

我正在使用以下命令绘制 log2(V4) 与 log2(V5)：

```
plot(log2(df[,4]) ~ log2(df[,5]), xlim=c(0,10), ylim=c(0,10)) 
```

我想根据 V1 中的模式匹配对点进行着色。例如，如何将 0610007C21Rik 和 0610007L01Rik 涂成绿色，将 0610007P22Rik 和 0610007P14Rik 涂成红色？我已经尝试将另一列添加到指定颜色的数据框中，但必须有一种更简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:23:24.863

这是一个基本的 R 解决方案：

对于 的每个唯一值，将颜色列表定义为命名向量一次`df$V1`。注意`""`要着色的每个点名称周围的 '。

```
col.list <- c(
              "0610007C21Rik"="green",
              "0610007L01Rik"="green",
              "0610007P22Rik"="red",
              "0610007P14Rik"="red"
             ) 
```

然后使用`df$V1`来查找`col.list`刚刚定义的向量中的值。

```
plot(
     log2(df[,4]) ~ log2(df[,5]), 
     xlim=c(0,10),
     ylim=c(0,10),
     col=col.list[paste(df$V1)]
    ) 
```

要解决以下 OP 的评论，请在`plot`通话中使用：

```
... col=ifelse(df$V1 %in% names(col.list),col.list[paste(df$V1)],"black") 
```

这使得完整的调用看起来像：

```
plot( 
      log2(df[,4]) ~ log2(df[,5]),
      xlim=c(0,10),
      ylim=c(0,10),
      col=ifelse(df$V1 %in% names(col.list),col.list[paste(df$V1)],"black")
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T20:41:40.070

看看 ggplot2 包。

如果您输入数据框，它将使人们更容易帮助编写代码。

这是一个看起来有点像您的数据的示例，但是有更好的方法来记录转换。

```
df <- data.frame(sample(LETTERS[1:5],20, replace=TRUE), abs(rnorm(20)/100), abs(runif(20)*10))
colnames(df) <- c('V1','V4','V5')

library(ggplot2)

p <- ggplot(df, aes(log2(V4) , log2(V5)))
p + geom_point(aes(colour = V1)) 
```

# jquery - Asp.Net MVC Action 参数绑定的 URL-ROUTING

> ID：11171818
> 
> 赞同：1
> 
> 时间：2012-06-23T18:10:22.303
> 
> 标签：jquery, asp.net-mvc-3, url-routing, parameter-passing, controller-action

我是第一次使用 ASP.NET MVC 3。我想用一个参数调用一个控制器动作。这个参数是一个对象，不是一个简单的类型。假设：Controller = "Person", Action="Add"，这个动作的唯一参数是一个对象："Person" = {​​Name: "aaa", Age: 24}

我为这样的参数（Person）实现了需要的 ModelBinder。我使用以下说明从客户端调用此操作：

```
var person= {}; 
person.Name = "aaa"; person.Age = 24;
var **url = '/Person/Add/' + $.param(person)**;
**window.location = url;** 
```

这是我在 Asp.NET MVC 中的第一个程序。我认为这是编写“url”的正确方法。您能帮我以**正确的格式****创建变量“url”**（需要调用服务器操作）吗？

 **认为

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T18:19:30.113

您可以像这样在查询字符串中传递它

```
var thatUrl = "/Person/Add?Name=aaa&age=24";
thatUrl=encodeURI(thatUrl);  //Let's encode :)
window.location.href=thatUrl; 
```

假设你有`HttpGET`Action 方法，看起来像

```
public ActionResult Add(string Name,string Age)
{
  //you will have the values in the argumens. Do something now
} 
```

或者

```
public ActionResult Add(Person model)
{
  //you will have the values in the object
  //check for model.Name & model.Age
} 
```

假设 Name 和 Age 是`Person`类的 2 个属性**

# javascript - Javascript - 确定对 Element.children 功能的支持

> ID：11171821
> 
> 赞同：0
> 
> 时间：2012-06-23T18:10:52.850
> 
> 标签：javascript, dom, browser, cross-browser

我最近在确定浏览器对某些 DOM 功能的支持时遇到了问题。其中之一是 Element.children 功能，这仍然让我很头疼。我的代码中有以下行：

> var NATIVE_CHILDREN = Element.prototype.hasOwnProperty('children');

它应该检查浏览器是否支持 Element.children -feature [[https://developer.mozilla.org/en/DOM/Element.children]](https://developer.mozilla.org/en/DOM/Element.children)。

根据 MDN 和快速测试，所有主流浏览器都支持此功能。

在 Firefox 上的 Firebug 上，NATIVE_CHILDREN 的值预期为 true。令人惊讶的是，在 Chrome、Safari 和 Opera 上，该值是 false（不幸的是，我没有权限使用 Windows 来检查 IE 对它的看法）。

根据 DOM4 - Free Editor's Draft 5 April 2012 [[http://dom.spec.whatwg.org/#element]](http://dom.spec.whatwg.org/#element)，子元素应该是元素对象原型的一部分。显然 Chrome、Safari 和 Opera 的 Element 对象不包含这样的方法！

我曾尝试检查 HTMLCollection 和 Node 的原型（我还测试了 HTMLParagraphElement 和 HTMLBodyElement），但它们似乎都不包含名为“children”的方法（Firefox 除外）。如何让我的测试跨浏览器工作？我不想为此使用任何外部库，因为这是我自己的小库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T18:27:56.133

那是因为一些引擎只`children`在元素创建时添加属性。Chrome 控制台中的快速测试表明：

```
Element.prototype.hasOwnProperty( 'children' ); //false
//however,
document.createElement( 'foo' ).hasOwnProperty( 'children' ); //true
//or even
!!document.createElement( 'foo' ).children; //true 
```

非函数属性通常不会出现在 上`prototype`，原因很简单——它们还没有设置，如果设置它们也没有意义。`Element.prototype`没有任何子元素，因为它不是元素，它是元素的原型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T18:20:37.287

我认为此测试在 Chrome 上可能返回 false 的原因是您正在检查原型。这不是最好的方法，有几个原因：

*   不同的浏览器可以（并且确实）使用原型的不同实现，例如在 IE 中无法访问某些原型。在这种情况下，我会说您的问题是 chrome 依赖于（非标准）`__proto__`属性而不是`prototype`. 我不记得什么时候了，但我在 chrome 上遇到了类似的问题，如果问题出现了，这就是问题的根源。

*   AFAIK 所有的浏览器都有一个子元素的属性，尽管在某些情况下它们的行为不同，所以我对检查这种属性的存在有一些疑问。

*   如果您仍然想检查这个，为什么不使用`document.body.hasOwnProperty('children')`？在 FF、Chrome、Safari 和 IE 上返回 true。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T18:27:03.600

检查`if( 'children' in document.body)`比乱用原型更安全。重要的是要注意引号，如果不是变量，`children`可能会被使用/创建......

[根据 QuirksMode](http://www.quirksmode.org/dom/w3c_core.html#t71)，除了 Firefox 3 之外的所有浏览器都支持`children`（这让我感到惊讶，因为当我在该浏览器中测试时它工作......），所以应该不需要测试这个属性。

# javascript - 用鼠标滚轮控制页面滚动动画

> ID：11171828
> 
> 赞同：2
> 
> 时间：2012-06-23T18:12:09.840
> 
> 标签：javascript, jquery, html, css, scroll

谁能帮我理解本田是如何达到这种效果的： http: [//testdays.hondamoto.ch/](http://testdays.hondamoto.ch/)

我的意思是滚动时的轻松。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T18:55:47.820

```
var $pages = $(".page"),
    tot = $pages.length,
    c = 0, pagePos = 0, down = 0, listen = true;

$('html, body').on('DOMMouseScroll mousewheel', function(e) {

  e.preventDefault();
  if(!listen)return;

  listen = false;

  down = e.originalEvent.detail > 0 || e.originalEvent.wheelDelta < 0;
  c = Math.min(Math.max(0, down ? ++c : --c), tot-1);
  pagePos = $pages.eq(c).offset().top;  

  $(this).stop().animate({scrollTop: pagePos}, 650, function(){
    listen = true;
  });

});
```

```
*{margin:0;}
.page{min-height:100vh;}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="page" style="background:#0bf">PAGE 1</div>
<div class="page" style="background:#fb0">PAGE 2</div>
<div class="page" style="background:#0fb">PAGE 3</div>
<div class="page" style="background:#b0f">PAGE 4</div>
```

**PS：**如果您的 s 位于可滚动的 DIV 中，则
使用（而不是）`.position().top;``.page``$("#pagesParent")``$('html, body')`

* * *

**注意：**
对于**移动设备**，您可能需要调整考虑浏览器标签栏高度的值（或者最好，完全阻止这种行为）。你明白了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T18:20:53.017

打开他们的 JS 文件：[http ://testdays.hondamoto.ch/js/script_2.js](http://testdays.hondamoto.ch/js/script_2.js)

并搜索 Utils - Navigation

```
/***********************************************************************************************/
/************************************  Utils - Navigation  *************************************/
/***********************************************************************************************/
/**
 * navigation
 */
function navigation(target){
    //--Init Quiz
    if(!quizRdy){
        hideQuiz();
    }

    //Add class to body
    var pageName = target.substr(1).split('-');
    $('body').removeClass(lastPage);
    $('body').addClass(pageName[0]);
    lastPage = pageName[0];

    if(resizeBg)retractBg();
    resizeBg = false;
    busy = true;
    $('body').addClass('loading');

    //Change Nav Color
    $('#nav-wrapper ul.nav li a').each(function(){
        $(this).removeClass('selected');
    });
    var currentNavNumber = currentNav +1;
    $('#main_nav_'+currentNavNumber).addClass('selected')

    var wHeight = $(window).height();
    if(wHeight<1080){
        var newMargin = 180 - ( (wHeight - 720)/2 ) ;
        if(newMargin<0) newMargin=180;
    }else{
        var newMargin =0 - (wHeight - 1080)/2;
    }

    var navTop = $(target).offset().top + newMargin;
    navTop += 'px';
    trace('navTop : '+navTop);
    //$('#nav-wrapper').css('top',navTop);

    $('html,body').stop().animate({
        scrollTop: $(target).offset().top + newMargin
    }, 1000,'easeInOutExpo',function(){
        trace('annime done - wHeight : '+wHeight+' target top : '+$(target).offset().top);

        if(currentNav==2 && !quizRdy && !quizForm){
            showQuiz();
        }
        if(currentNav==4){
            //update social datas
            $.getJSON('inc/socials.php', function(data) {
                $('#count-fans').empty().append(data['fans-count']);
                $('#count-followers').empty().append(data['followers-count']);
            });
        }
        /*
        if(currentNav==2){
            $('#quiz-nav').livequery(function(){
                $(this).show();
            });
        }else{
            $('#quiz-nav').livequery(function(){
                $(this).hide();
            });
        }
        */
        $('body').removeClass('loading');
        if(currentNav!=0 && currentNav!=4){
            $('#nav-wrapper').fadeIn(200);
        }else{
            $('#nav-wrapper').fadeOut(200);
        }
        if(currentNav==3){
            //--Init Google Map
            if(!mapReady){
                if(dealerReady){
                    //init map
                    initialize();
                }else{
                    askMap = true;
                }
            }
        }
        if(wHeight>1080){
            extendBg();
        }
        busy = false;
    });
}

/**
 * navigation next Page
 */
function nextPage(){
    if(currentNav<navArray.length-1 && !busy){ 
        currentNav++;   
        navigation(navArray[currentNav]);
    }
}
/**
 * navigation previous Page
 */
function prevPage(){
    if(currentNav>0 && !busy){ 
        currentNav--;   
        navigation(navArray[currentNav]);
    }
}

/**
 *  Center content
 */
function centerContent(){
    if(!busy){
        //--Retract Background if expended for big screen
        if(resizeBg)retractBg();

        var wHeight = $(window).height();
        var wWidth = $(window).width();
        var imgHeight = 0;

        //--Test image width / Height and fill the screen 
        if(wWidth / wHeight > ratioImg ){
            //trace('case1 -   width : ' + wWidth + '   height : '+wHeight);
            if(wHeight > 1080 || wWidth > 1900){
                var newImgHeight = wWidth * 1080 / 1920;
                $(".bg-image").each(function(){
                    $(this).css({
                        'height':newImgHeight+'px',
                        'width':'100%'
                    });
                });
                imgHeight = newImgHeight;
            }else{
                $(".bg-image").each(function(){
                    $(this).css({
                        'height':'1080px',
                        'width':'1900px'
                    });
                });
                imgHeight = 1080;
            }
        }else{
            if(wHeight > 1080 || wWidth > 1900){
                $(".bg-image").each(function(){
                    var newImgWidth = wHeight * 1920 / 1080;
                    $(this).css({
                        'height':wHeight+'px',
                        'width':newImgWidth+'px'
                    });
                });
                imgHeight = wHeight;
            }else{
                $(".bg-image").each(function(){
                    $(this).css({
                        'height':'1080px',
                        'width':'1900px'
                    });
                });
                imgHeight = 1080;
            }
        }
        //--Fix height if window > img height
        if(wHeight>imgHeight){
            $(".bg-image").each(function(){
                var newImgWidth = wHeight * 1920 / 1080;
                $(this).css({
                    'height':wHeight+'px',
                    'width':newImgWidth+'px'
                });
            });
        }
        //--Center horizontal bkg image
        if(wWidth<1900){
            $(".bg-image").each(function(){
                var marginCenter = (wWidth - 1900) / 2;
                marginCenter = marginCenter * -1;
                if($(this).width() > (wWidth + marginCenter)){
                    $(this).css({'margin-left':-marginCenter+'px'});
                }
            });
        }
        //--Scroll to the good position
        if(wHeight<1080){
            var newMargin = 180 - ( (wHeight - 720)/2 ) ;
            if(newMargin<0) newMargin=180;
        }else{
            var newMargin =0 - (wHeight - 1080)/2;
        }
        var navTop =$(navArray[currentNav]).offset().top + newMargin;
        navTop += 'px';
        //$('#nav-wrapper').css('top',navTop);
        //trace('Scrool to good position, then expend bg : ' + navArray[currentNav] + '  '+ $(navArray[currentNav]).offset().top);
        $('html,body').stop().animate({
            scrollTop: $(navArray[currentNav]).offset().top + newMargin
        }, 1000,'easeInOutExpo',function(){
            if(wHeight>1080){
                extendBg();
            }
        });
    }
}

/**
 *  Extend the background image for big screen ( > 1080 px )
 */
function extendBg(){
    var hWin = $(window).height();
    if(hWin > 1080){
        //--Get & save current page Name
        lastBg = navArray[currentNav].split('-');
        lastBg = lastBg[0].substr(1);
        lastheight = $('#bg-'+lastBg).height();
        //--Calculate the position from top to set the scroll position
        posToTop = (hWin - $('#bg-'+lastBg).height())/2;
        posToTop = $('#bg-'+lastBg).offset().top - posToTop;
        lastPosToTop = $('#bg-'+lastBg).offset().top;
        //trace('posToTop setting : '+posToTop+' page : ' + lastBg);
        //--Set boolean resize to true to call the retract BG
        resizeBg = true;
        $('#bg-'+lastBg).css({'z-index':2});
        //--Test if it's first or last
        if(currentNav != 0 && currentNav != (navArray.length-1)){
            $('#bg-'+lastBg).animate({
                height:hWin+'px',
                top:posToTop+'px'
            },600);
        }else{
            if(currentNav==0){
                posToTop=0;
                $('#bg-'+lastBg).animate({
                    height:hWin+'px',
                    top:0
                },600);
            }else{
                posToTop=0;
                $('#bg-'+lastBg).animate({
                    height:hWin+'px',
                    top:4320+'px'
                },600);
            }
        }
        //--Scroll to the bottom for credits page
        if(currentNav==(navArray.length-1)){
            $('html,body').stop().animate({
                scrollTop: $(document).height()
            }, 1000,'easeInOutExpo');
        }
    }
}
/**
 *  Retrac the background to normal
 */
function retractBg(){
    var hWin = $(window).height();
    if(resizeBg && lastheight>0 && lastBg!=""){
        $('#bg-'+lastBg).css({'z-index':0});
        //trace('posToTop callback : '+posToTop + ' lastBg :  ' +  lastBg + '  lastheight : ' +lastheight);
        if(posToTop>0){
            //trace('reset pos top : ' + posToTop);
            $('#bg-'+lastBg).animate({
                height:lastheight+'px',
                top:lastPosToTop+'px'
            },600)
        }else{
            $('#bg-'+lastBg).animate({
                height:lastheight+'px'
            },600)
        }
    }
} 
```

# caching - Doctrine 2 结果缓存失效

> ID：11171829
> 
> 赞同：8
> 
> 时间：2012-06-23T18:12:19.027
> 
> 标签：caching, doctrine-orm, apc, cache-invalidation

我在检索用户（消息应用程序）的新消息数量的查询中使用 Doctrine 2 的结果缓存：

```
$query->useResultCache(true, 500, 'messaging.nb_new_messages.'.$userId); 
```

我试图像这样使这个缓存无效（在我的实体存储库中）：

```
public function clearNbNewMessagesOfUserCache($userId) {
    $cacheDriver = $this->getEntityManager()->getConfiguration()->getResultCacheImpl();
    $result  = $cacheDriver->delete('skepin_messaging.nbNewMessages.'.$userId);

    if (!$result) {
        return false;
    }

    return $cacheDriver->flushAll();
} 
```

这样我就不需要在我网站的每个页面上进行无用的查询。

我的问题：**这是推荐的做法吗？我最终会遇到问题吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:00:43.113

我有构建一个 onFlush 钩子的想法。在那里，所有实体都排队等待插入、更新和删除，因此您可以根据实体名称和标识符等使缓存无效。

不幸的是，我还没有构建任何事件监听器，但我绝对计划为我的项目构建这样的东西。

[这](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html#onflush)是 onFlush 事件的原则文档的链接

**编辑：** 甚至还有一种更简单的方法来实现事件。在实体类中，您可以将@HasLifecycleCallbacks 添加到注释中，然后可以使用@PreUpdate 或@PrePersist 注释定义函数。每次更新或保留此模型时，都会调用此函数。

```
/**
 * @Entity
 * @Table(name="SomeEntity")
 * @HasLifecycleCallbacks
 */
class SomeEntity
{
    ...

    /**
     * @PreUpdate
     * @PrePersist
     */
    public function preUpdate()
    {
        // This function is called every time this model gets updated
        // or a new instance of this model gets persisted

        // Somethink like this maybe... 
        // I have not yet completely thought through all this.
        $cache->save(get_class($this) . '#' . $this->getId(), $this);
    }
} 
```

那么也许这可以用来使实体的每个实例无效？

# ruby - 将具有值数组的 ruby 哈希合并到具有值数组的另一个哈希中

> ID：11171834
> 
> 赞同：17
> 
> 时间：2012-06-23T18:13:03.390
> 
> 标签：ruby, hash

我似乎找不到任何谈论这样做的地方。

假设我有一个哈希`{"23"=>[0,3]}`，我想合并这个哈希`{"23"=>[2,3]}`以得到这个哈希`{"23"=>[0,2,3]}`

或者如何`{"23"=>[3]}`合并`{"23"=>0}`得到`{"23"=>[0,3]}`

谢谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-23T18:24:10.513

```
{ "23" => [0,3] }.merge({ "23" => [2,3] }) do |key, oldval, newval| 
  oldval | newval
end
#=> {"23"=>[0, 3, 2]} 
```

处理非数组值的更通用方法：

```
{ "23" => [0,3] }.merge({ "23" => [2,3] }) do |key, oldval, newval|
  (newval.is_a?(Array) ? (oldval + newval) : (oldval << newval)).uniq
end 
```

更新了 Marc-André Lafortune 的提示。

# file - 用于测试目的的大型示例 mbox 文件

> ID：11171837
> 
> 赞同：6
> 
> 时间：2012-06-23T18:13:33.810
> 
> 标签：file, testing, mbox

为了开发邮件客户端，我需要一个非常大的 mbox 测试文件，其中包含尽可能多的邮件。最好 >100.000 封邮件 (>10GB)。

它应该是真实的邮件数据，因为我不仅要测试性能，还要测试邮件过滤器和搜索。

提前感谢任何提示在哪里可以得到这样的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-23T08:20:16.523

其他几个选项：

**安然电子邮件语料库**，包含 210 GB 的电子邮件。它是多种电子邮件格式，但应该易于阅读。

> 作为 FERC 西部能源市场调查的一部分，公开发布的安然电子邮件数据由 EDRM 转换为行业标准格式。该数据集由 1,227,255 封电子邮件和 493,384 个附件组成，涵盖 151 位保管人。电子邮件以 Microsoft PST、IETF MIME 和 EDRM XML 格式提供。

*   [详情](https://www.cs.cmu.edu/%7E./enron/)及下载

*   [亚马逊详情](https://aws.amazon.com/datasets/917205)

**Apache 软件基金会公共邮件档案**(200 GB)

> 截至 2011 年 7 月 11 日的所有公开可用的 Apache 软件基金会邮件档案的集合
> 
> [此集合包含来自 ASF 80 多个项目](http://mail-archives.apache.org/mod_mbox/)的所有公开可用的电子邮件档案

[亚马逊链接](https://aws.amazon.com/datasets/7791434387204566)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-08T10:17:10.723

您可以使用搜索引擎收集**.mbox文本文件。**例如，谷歌搜索`filetype:mbox pipermail`会产生大量 .mbox 数据。而不是 pipermail，它`from`用作搜索字符串。

可以连接单个 .mbox 文件：

```
cat mboxfile1 > mboxfile
echo >> mboxfile
cat mboxfile2 >> mboxfile 
```

ps 这不是不道德的数据，而是你用它做什么。请遵纪守法！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T18:20:29.600

也许您可以使用自己的邮箱并多次复制。例如，您设置一个邮件帐户并使用 IMAP 或使用文件系统多次复制所有电子邮件，但这取决于您使用的数据格式。

# c++ - C/C++ 协助在 C 中处理多个文件

> ID：11171846
> 
> 赞同：0
> 
> 时间：2012-06-23T18:15:18.903
> 
> 标签：c++, c

我有一个包含 3 个文件的项目。文件 A 是 main.cpp，而另外两个分别包含一个函数（文件 B 包含 FOO()，文件 C 包含 FOO(int, double)）。我想做的是链接3个文件，因此文件A中的main（）可以调用文件B中的FOO（），它应该调用文件C中的FOO（int，double）。

注意：我没有在我的 C 程序中使用任何特定的头文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T18:18:02.050

频道：

```
FOO(int, double); 
```

乙：

```
#include "C.h"    
FOO(); 
```

主.cpp：

```
#include "B.h" 
```

编译命令：

```
g++ -I. -c main.cpp
g++ -c B.cpp C.cpp
g++ -o final_executable main.o B.o C.o 
```

基本上，您首先为要调用的函数提供*原型。*然后编译 B、C 和 main（但不要链接它们中的任何一个）——`-c`参数禁止链接。这将创建*目标文件*。最后，将所有三个目标文件链接到一个可执行文件中*。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T08:11:28.870

当您希望软件的“独立”组件相互交互时，您无法摆脱定义接口。在这种情况下，您决定定义组件`main.cpp`和。要调用，C++ 语言类型规则要求首先存在原型。这至少有两个有用的目的。它允许编译器在编译期间静态检查函数是否传递了正确的参数。它还为编译器提供了足够的信息来有效地管理函数参数（例如，堆栈与寄存器）。大多数时候，接口是在头文件中定义的，因此使用它们应该很自然。`B.cpp``C.cpp``main()``FOO()``B.cpp`

有时，软件是使用动态界面开发的。在这种情况下，要调用什么函数是在运行时确定的。、`dlopen`和调用`dlsym`可`dlclose`用于实现此目的。一个简单的例子可能是：

```
// main.cpp
int main () {
    void *dh = dlopen(0, RTLD_LAZY);
    void (*B_FOO_PTR)(void)
        = *static_cast<void (**)(void)>(dlsym(dh, "B_FOO_PTR"));
    dlcose(dh);
    B_FOO_PTR();
} 
```

* * *

```
// B.cpp
static void FOO () {
    void *dh = dlopen(0, RTLD_LAZY);
    void (*C_FOO_PTR)(int, double)
        = *static_cast<void (**)(int, double)>(dlsym(dh, "C_FOO_PTR"));
    dlcose(dh);
    C_FOO_PTR(0, 1.0);
}

extern "C" { void (*B_FOO_PTR)(void) = &FOO; } 
```

* * *

```
// C.cpp
static void FOO (int, double) {
    //...
}

extern "C" { void (*C_FOO_PTR)(int, double) = &FOO; } 
```

# android - 在更改标记/图钉时在地图上绘制路线？

> ID：11171854
> 
> 赞同：-1
> 
> 时间：2012-06-23T18:16:27.857
> 
> 标签：android, google-maps

当用户拖动图钉时，我试图在地图上动态绘制路线。我可以在两个地理点之间绘制路线，但不能在它们之间绘制道路路线。

我正在使用[此](https://github.com/commonsguy/cw-advandroid/blob/master/Maps/NooYawkTouch/src/com/commonsware/android/maptouch/NooYawk.java)代码在正在使用的地图上放置图钉`ItemizedOverlay`。我使用以下片段来获取 kml 文件并获取从源到目的地的道路上的连续地理点。

```
public static String getUrl(double fromLat, double fromLon, double toLat,
        double toLon) {// connect to map web service
    System.out.println("getting URL");
    StringBuffer urlString = new StringBuffer();
    urlString.append("http://maps.google.com/maps?f=d&hl=en");
    urlString.append("&saddr=");// from
    urlString.append(Double.toString(fromLat));
    urlString.append(",");
    urlString.append(Double.toString(fromLon));
    urlString.append("&daddr=");// to
    urlString.append(Double.toString(toLat));
    urlString.append(",");
    urlString.append(Double.toString(toLon));
    urlString.append("&ie=UTF8&0&om=0&output=kml");
    return urlString.toString();
} 
```

和

```
url = new URL(urlString.toString());
    urlConnection = (HttpURLConnection) url.openConnection();
    urlConnection.setRequestMethod("GET");
    urlConnection.setDoOutput(true);
    urlConnection.setDoInput(true);
    urlConnection.connect();

    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = dbf.newDocumentBuilder();
    document = db.parse(urlConnection.getInputStream());

    if (document.getElementsByTagName("GeometryCollection").getLength() > 0) {
        String path = document.getElementsByTagName("GeometryCollection")
                .item(0).getFirstChild().getFirstChild().getFirstChild()
                .getNodeValue();
        if (path != null && path.trim().length() > 0) {
            String[] pairs = path.trim().split(" ");
            String[] lngLat = pairs[0].split(","); 
            if (lngLat.length < 3)
                lngLat = pairs[1].split(",");
            GeoPoint startGP = new GeoPoint(
                    (int) (Double.parseDouble(lngLat[1]) * 1E6),
                    (int) (Double.parseDouble(lngLat[0]) * 1E6));
            GeoPoint gp1;
            GeoPoint gp2 = startGP;
            for (int i = 1; i < pairs.length; i++) 
            {

                lngLat = pairs[i].split(",");
                gp1 = gp2;

                gp2 = new GeoPoint(
                        (int) (Double.parseDouble(lngLat[1]) * 1E6),
                        (int) (Double.parseDouble(lngLat[0]) * 1E6));
                map.invalidate();
                final float[] results = new float[3];
                Location.distanceBetween(gp1.getLatitudeE6()/1E6, gp1.getLongitudeE6()/1E6, gp2.getLatitudeE6()/1E6, gp2.getLongitudeE6()/1E6, results);
                distance += results[0]; 
```

在这里，我需要将这些地理点 (gp1&gp2) 添加到叠加层中，以通过覆盖`draw()`方法在地图上绘制。一旦我得到这些地理点，我就可以绘制路线。但无法发送地理点。卡在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:33:10.530

这是我将可拖动标记的行车方向放在一起的[示例，](http://www.geocodezip.com/v3_directions_custom_icons_draggable.html)[另一个](http://www.geocodezip.com/v3_directions_custom_revgeo.html)对拖动的标记进行反向地理编码的示例。这些示例是在将可拖动的行车路线添加到 API 之前创建的，因此现在可能有更简单的方法来执行此操作。

# android - 值没有被传递给意图

> ID：11171858
> 
> 赞同：0
> 
> 时间：2012-06-23T18:16:58.273
> 
> 标签：android, android-intent, android-gridview

堆栈跟踪

[堆栈跟踪的图片在这里](http://i47.tinypic.com/33z3cxe.png)

值不会传递给其他意图。每次我尝试以其中的意图启动活动时，它都会崩溃。

```
//This activity will retrieve and display the different rewards that are available.
public class RewardsActivity extends Activity {

@Override
public void onCreate(Bundle SavedInstanceState)
{
    super.onCreate(SavedInstanceState);
    setContentView(R.layout.rewards);

    //stores retrieves and stores the current gridview
    GridView gridView = (GridView)findViewById(R.id.grid_view);

    //Instance of ImageAdapter class that will load the images into the gridview
    gridView.setAdapter(new ImageAdapter(this));

    //This function is used to set a listener on each item in the grid so that      when its clicked it will go to the other view.
    gridView.setOnItemClickListener(new OnItemClickListener(){
        public void onItemClick(AdapterView<?> parent, View v,int position, long id)
        {
            Intent i = new   Intent(getApplicationContext(),RewardsViewActivity.class);
            i.putExtra("id", position);
            startActivity(i);
        }

    });

} 
```

这个新意图被传递给，当它被传递到这里时，它被存储在一个变量中，然后用于`ImageView`加载图像。

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.ImageView;

public class RewardsViewActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.full_view);

    // get intent data
    Intent i = getIntent();

    // Selected image id
    int position = i.getExtras().getInt("id");
    ImageAdapter imageAdapter = new ImageAdapter(this);

    ImageView imageView = (ImageView) findViewById(R.id.full_image);
    imageView.setImageResource(imageAdapter.finalImages[position]);
}

} 
```

ImageAdapter.java 包 org.android.pps；

```
import android.content.Context;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;

/*This class will be used handle the loading of the image view that will display all the
images of the rewards. (this will be used along with RewardsActivity and rewards.xml)
 */
public class ImageAdapter extends BaseAdapter {

    //variable that will store the current context of the application
    private Context c;
    private Integer num = 6;
    private int[] rewards_num=new int[num];
    private Integer[] Images = new Integer[6];
    public Integer[] finalImages;

    //for loop will set the correct image to the array if its either activated or deactivated

    public Integer[] fillImageArray()
    {
        //Array that will be used to show the reward images

        Integer[] Activated ={
            R.drawable.rewards1,
            R.drawable.rewards2,
            R.drawable.rewards3,
            R.drawable.rewards4,
            R.drawable.rewards5,
            R.drawable.rewards6,
        };
        Integer[] Deactivated ={
                R.drawable.rewards1b,
                R.drawable.rewards2b,
                R.drawable.rewards3b,
                R.drawable.rewards4b,
                R.drawable.rewards5b,
                R.drawable.rewards6b,
            };

        //for loop that checks to see all the rewards that a particular users has to assign a particular image.
        for(int x = 0;x<rewards_num.length;x++)
        {

            for(int y = 0;y<6;y++)
            {
                if(rewards_num[x]==y)
                {
                    Images[x]=Activated[y];

                }
                else
                {
                    Images[x]=Deactivated[y];
                }
            }
            }

        return Images;

    }

    //constructor with the context being passed.
    public ImageAdapter(Context m)
    {
        c = m;

    }

    public int getCount() {

        return 6;
    }

    public Object getItem(int position) {

        return Images[position];
    }

    public long getItemId(int position) {
        return 0;
    }

    // The function View  create a new ImageView for each item that is being referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        finalImages = fillImageArray();
        ImageView imageView = new ImageView(c);
        imageView.setImageResource(finalImages[position]);
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setLayoutParams(new GridView.LayoutParams(300, 300));
        return imageView;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:35:43.027

noi 中的 finalImages 在那里初始化......

它是 getview 中的 finalImages 在第二个活动（RewardsViewActivity）中没有被调用............

如果可能，将此行移至构造函数 finalImages = fillImageArray();

# c++ - 在 Ogre3d 中创建手动网格？

> ID：11171859
> 
> 赞同：6
> 
> 时间：2012-06-23T18:17:05.823
> 
> 标签：c++, visual-c++, ogre3d

我对为什么我手动创建的网格没有正确显示感到有些困惑。我已经创建了顶点和索引缓冲区，它们似乎（虽然我不是 100% 确定）包含正确的值。

本质上，我正在创建一个高度为 0 的 mapSize * mapSize 顶点网格，然后从中创建三角形。

```
void TerrainGeneration::createTerrainMesh() {
  /// Create the mesh via the MeshManager
      Ogre::MeshPtr msh = Ogre::MeshManager::getSingleton().createManual("TerrainTest", "General");
  Ogre::SubMesh* sub = msh->createSubMesh();

  const size_t nVertices = mapSize*mapSize;
  const size_t vbufCount = 3*2*nVertices;

  float vertices[vbufCount];

  size_t vBufCounter = 0;
  for(int z = 0; z < mapSize; z++) {
          for(int x = 0; x < mapSize; x++) {
          //Position
      vertices[vBufCounter] = x;
      vertices[vBufCounter+1] = 0;
      vertices[vBufCounter+2] = z;
      //Normal
      vertices[vBufCounter+3] = 0;
      vertices[vBufCounter+4] = 1;
      vertices[vBufCounter+5] = 0;

      vBufCounter += 6;
      }
  }

  Ogre::RenderSystem* rs = Ogre::Root::getSingleton().getRenderSystem();
      Ogre::RGBA colours[nVertices];
      Ogre::RGBA *pColour = colours;

  //Create triangles
  const size_t ibufCount = 6*(mapSize - 1)*(mapSize - 1);
  unsigned int faces[ibufCount];

  size_t iBufCounter = 0;
  for(int x=0; x <= mapSize -2; x++) {
    for(int y=0; y <= mapSize -2; y++) {
        faces[iBufCounter] = vertices[(y*mapSize) + x];
        faces[iBufCounter+1] = vertices[((y+1)*mapSize) + x];
        faces[iBufCounter+2] = vertices[((y+1)*mapSize) + (x+1)];

        faces[iBufCounter+3] = vertices[(y*mapSize) + x];
        faces[iBufCounter+4] = vertices[((y+1)*mapSize) + (x+1)];
        faces[iBufCounter+5] = vertices[(y*mapSize) + (x+1)];

        iBufCounter += 6;
    }
}

/// Create vertex data structure for n*n vertices shared between submeshes
    msh->sharedVertexData = new Ogre::VertexData();
    msh->sharedVertexData->vertexCount = nVertices;

/// Create declaration (memory format) of vertex data
    Ogre::VertexDeclaration* decl = msh->sharedVertexData->vertexDeclaration;
    size_t offset = 0;
    // 1st buffer
    decl->addElement(0, offset, Ogre::VET_FLOAT3, Ogre::VES_POSITION);
    offset += Ogre::VertexElement::getTypeSize(Ogre::VET_FLOAT3);
    decl->addElement(0, offset, Ogre::VET_FLOAT3, Ogre::VES_NORMAL);
    offset += Ogre::VertexElement::getTypeSize(Ogre::VET_FLOAT3);
    /// Allocate vertex buffer of the requested number of vertices (vertexCount) 
    /// and bytes per vertex (offset)
    Ogre::HardwareVertexBufferSharedPtr vbuf = 
    Ogre::HardwareBufferManager::getSingleton().createVertexBuffer(
    offset, msh->sharedVertexData->vertexCount, Ogre::HardwareBuffer::HBU_STATIC_WRITE_ONLY);
    /// Upload the vertex data to the card
    vbuf->writeData(0, vbuf->getSizeInBytes(), vertices, true);

    /// Set vertex buffer binding so buffer 0 is bound to our vertex buffer
    Ogre::VertexBufferBinding* bind = msh->sharedVertexData->vertexBufferBinding; 
    bind->setBinding(0, vbuf);

    /// Allocate index buffer of the requested number of vertices (ibufCount) 
    Ogre::HardwareIndexBufferSharedPtr ibuf = Ogre::HardwareBufferManager::getSingleton().
    createIndexBuffer(
    Ogre::HardwareIndexBuffer::IT_16BIT, 
    ibufCount, 
    Ogre::HardwareBuffer::HBU_STATIC_WRITE_ONLY);

    /// Upload the index data to the card
    ibuf->writeData(0, ibuf->getSizeInBytes(), faces, true);

    /// Set parameters of the submesh
    sub->useSharedVertices = true;
    sub->indexData->indexBuffer = ibuf;
    sub->indexData->indexCount = ibufCount;
    sub->indexData->indexStart = 0;

    /// Set bounding information (for culling)
    msh->_setBounds(Ogre::AxisAlignedBox(-5000,-5000,-5000,5000,5000,5000));
    //msh->_setBoundingSphereRadius(Ogre::Math::Sqrt(3*100*100));

    /// Notify -Mesh object that it has been loaded
    msh->load();

} 
```

我初始化网格并按如下方式加载它

```
Ogre::Entity* thisEntity = mSceneMgr->createEntity("cc", "TerrainTest", "General");
thisEntity->setMaterialName("Examples/Rockwall");
Ogre::SceneNode* thisSceneNode = mSceneMgr->getRootSceneNode()->createChildSceneNode();
thisSceneNode->setPosition(0, 0, 0);
thisSceneNode->attachObject(thisEntity); 
```

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T17:19:17.593

好的，所以我从 Ogre3d 论坛上得到了一个非常有帮助的人 bstone 的答案。

事实证明，在创建索引列表以创建面时，我错误地传递了顶点列表中的坐标而不是顶点的索引。

```
 faces[iBufCounter] = vertices[(y*mapSize) + x];
 faces[iBufCounter+1] = vertices[((y+1)*mapSize) + x];
 faces[iBufCounter+2] = vertices[((y+1)*mapSize) + (x+1)];

 faces[iBufCounter+3] = vertices[(y*mapSize) + x];
 faces[iBufCounter+4] = vertices[((y+1)*mapSize) + (x+1)];
 faces[iBufCounter+5] = vertices[(y*mapSize) + (x+1)]; 
```

本来应该

```
 faces[iBufCounter] = (y*mapSize) + x;
 faces[iBufCounter+1] = ((y+1)*mapSize) + x;
 faces[iBufCounter+2] = ((y+1)*mapSize) + (x+1);

 faces[iBufCounter+3] = (y*mapSize) + x;
 faces[iBufCounter+4] = ((y+1)*mapSize) + (x+1);
 faces[iBufCounter+5] = (y*mapSize) + (x+1); 
```

但是，我的代码在某处仍然存在问题，尽管从其他人所说的来看，这可能不在我发布的代码中。

另一个用户还建议我以更简单的方式创建地形并发布以下代码

```
int mapSize = 16;
Ogre::ManualObject *man = m_sceneManager->createManualObject("TerrainTest");
man->begin("Examples/Rockwall",Ogre::RenderOperation::OT_TRIANGLE_LIST);
for(int z = 0; z < mapSize; ++z)
{
   for(int x = 0; x < mapSize; ++x)
   {
      man->position(x,0,z);
      man->normal(0,1,0);
      man->textureCoord(x,z);
   }
}
for(int z = 0; z < mapSize-1; ++z)
{
   for(int x = 0; x < mapSize-1; ++x)
   {
      man->quad((x) + (z) * mapSize, (x) + (z + 1) * mapSize, (x + 1) + (z + 1) * mapSize, (x + 1) + (z) * mapSize);
   }
}
man->end();
m_sceneManager->getRootSceneNode()->attachObject(man); 
```

# c# - 将所有 PDF 字段设置为只读

> ID：11171864
> 
> 赞同：4
> 
> 时间：2012-06-23T18:17:31.687
> 
> 标签：c#, itextsharp

在 iTextSharp 中有没有办法将表单上的所有字段设置为只读？目前我正在单独设置每一个，这很痛苦......

```
formFields.SetFieldProperty( "Applicant.Phone", "setfflags", PdfFormField.FF_READ_ONLY, null );
formFields.SetFieldProperty( "Applicant.SSN", "setfflags", PdfFormField.FF_READ_ONLY, null ); 
```

等等

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T18:29:32.417

你不能做这样的事情：

```
foreach (DictionaryEntry de in pdfReader.AcroFields.Fields)
{
  formFields.SetFieldProperty(de.Key.ToString(), 
                             "setfflags", 
                              PdfFormField.FF_READ_ONLY, 
                              null);
} 
```

# jquery - window.getSelection().getRangeAt() 无法正常工作

> ID：11171865
> 
> 赞同：1
> 
> 时间：2012-06-23T18:17:31.943
> 
> 标签：jquery, range, slice, getselection

我正在尝试在 html 元素中获取文本选择，然后在其周围插入 span 标签。到目前为止，我遇到了正确索引的问题。如果我突出显示`<p>`块内的文本，则索引在标记后变为 0 `<br>`。我希望能够将文本切片（）出来，然后在突出显示文本以及抓取选定的文本并通过 Ajax 将其发送到服务器之后将其与 span 标签重新组合。

这是一些示例 HTML 和代码：

```
<html><body><p>This is some sample text.<br>Select this text.</p></body></html> 
```

jQuery：

```
$('*').mouseup(function() {
    mouseDown = false;

    var startIndex = window.getSelection().getRangeAt(0).startOffset;
    var endIndex = window.getSelection().getRangeAt(0).endOffset;
    alert($(body *).text().slice(startIndex, endIndex));
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T18:47:40.453

好吧，我在 jsfiddle 上查看了您的代码，问题似乎是 javascript 不知道“highlightedElement”是什么，所以我在 jsfiddle 上为您模拟了一个小演示......

它有点脆弱，但它应该做你需要做的事情：http: [//jsfiddle.net/WRrH9/5/](http://jsfiddle.net/WRrH9/5/)

如果由于某种原因它不起作用，请修改您的代码：

HTML：

```
<html>
    <head>
    </head>
    <body>
        <p>This is some sample text.Select this text.
        </p>
    </body>
</html>​ 
```

JavaScript：

```
$('body *').mouseup(function() {
    mouseDown=false;
    var startIndex = window.getSelection().getRangeAt(0).startOffset;
    var endIndex = window.getSelection().getRangeAt(0).endOffset;
    var slicedText = $(this).text().slice(startIndex, endIndex);
    $(this).html($(this).text().replace(slicedText,'<span>' + slicedText + '</span>'));
});​ 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T14:30:45.653

范围边界偏移相对于包含范围边界的最内层节点，因此您尝试的操作在一般情况下不起作用。

您可能会发现可用的命令之一[`document.execCommand()`](https://developer.mozilla.org/en/Rich-Text_Editing_in_Mozilla#Executing_Commands)将完成这项工作。如果做不到这一点，如果您想保留换行符等格式，这是一项不平凡的任务，因为您需要在`<span>`标签内的选择中包围每个文本节点。如果您的 span 有特定的 CSS 类，那么您可以使用我的[Rangy](https://code.google.com/p/rangy/)库的[CSS 类应用程序模块。](https://code.google.com/p/rangy/wiki/CSSClassApplierModule)

# javascript - HTML5拖放以重新排列网格中的小部件？

> ID：11171875
> 
> 赞同：2
> 
> 时间：2012-06-23T18:18:25.680
> 
> 标签：javascript, html, drag

我有一个由假想的小部件网格组成的仪表板，网格有 2 行，每行有 3 个插槽。我希望用户能够将一段内容拖到不同的插槽中，然后它会替换插槽中已经存在的内容（将其推到右侧，可能会脱离网格）。我正在使用此代码来处理拖放操作。如何检测碰撞并在目标插槽中替换小部件？

```
<script type="text/javascript">
function allowDrop(ev)
{
ev.preventDefault();
}

function drag(ev)
{
ev.dataTransfer.setData("Text",ev.target.id);
}

function drop(ev)
{
ev.preventDefault();
var data=ev.dataTransfer.getData("Text");
ev.target.appendChild(document.getElementById(data));
}
</script> 
```

每个网格槽是这样的：

```
<div id="gridslot" ondrop="drop(event)" ondragover="allowDrop(event)"/>
<div id="widget" draggable="true" ondragstart="drag(event)"/>Some Content</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:41:25.637

这是伪代码

```
function setContent(targetCell, content) {
    if (targetCell is off the grid)
        return;

    if (targetCell.content is not empty) {
        // we need to shift the targets content to the right
        setContent(targetCell.nextCellToTheRight, targetcell.content);
    }

    targetCell.content = content;
} 
```

请注意，它递归地将事物向右移动以腾出空间，如有必要，可能会移动整行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:49:39.617

这不会直接回答你的问题，但我会看看这个 jquery 插件：[Html5 Sortable](http://farhadi.ir/projects/html5sortable/)

# xml - 在选择单选按钮并单击下一步按钮时检查用户权限时出错

> ID：11171877
> 
> 赞同：0
> 
> 时间：2012-06-23T18:18:35.950
> 
> 标签：xml, wix, wix3.5, wix3

我有一个检查用户权限的场景（无论是标准用户还是管理员）：

我正在使用类似的东西：

```
<Control Id="Next" Type="PushButton" X="236" Y="243" Width="56" Height="17" 
Default="yes" Text="!(loc.WixUINext)">

<Condition Message="Message text">Privileged</Condition>
<Publish Property="ALLUSERS" Value="1">INSTALLPREFA = "Every"</Publish>
<Publish Event="NewDialog" Value="MyInstallDirDlg">1</Publish> 
```

但是它会生成错误：

```
C:\myproject\MyInstallPrefa.wxs(25) : error CNDL0005 : The Publish element c ontains an     
unexpected child element 'Condition'. 
```

我不能在自定义对话框中检查管理员权限吗，请帮忙！！！。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:44:17.970

如错误消息所述：`Condition`元素不能在`Publish`元素内部使用。
条件写为[`Publish`](http://wix.sourceforge.net/manual-wix3/wix_xsd_publish.htm)元素的内部文本。

# python - 如何构建基于字符的 Python BFS 搜索

> ID：11171878
> 
> 赞同：-1
> 
> 时间：2012-06-23T18:18:53.640
> 
> 标签：python, tree, breadth-first-search

我是 Python 新手，正在尝试构建一个**基于字符的**BFS 树来打印父子关系。一个密切相关的解决方案，但它是一个**基于数字的**树，可以在此处找到[Print BFS (Binary Tree) in Level Order with _specific formatting_](https://stackoverflow.com/questions/1894846/printing-bfs-binary-tree-in-level-order-with-specific-formatting)，特别是以下示例，取自参考：

```
def printBfsLevels(graph,start):
queue=[start]
path=[]
currLevel=1
levelMembers=1
height=[(0,start)]
childCount=0
print queue
while queue:
visNode=queue.pop(0)
if visNode not in path:
  if  levelMembers==0:
    levelMembers=childCount
    childCount=0
    currLevel=currLevel+1
  queue=queue+graph.get(visNode,[])
  if levelMembers > 0:
    levelMembers=levelMembers-1
    for node in graph.get(visNode,[]):
      childCount=childCount+1
      height.append((currLevel,node))
  path=path+[visNode]

prevLevel=None

for v,k in sorted(height):
    if prevLevel!=v:
      if prevLevel!=None:
        print "\n"
    prevLevel=v
    print k,
return height

g={1: [2, 3,6], 2: [4, 5], 3: [6, 7],4:[8,9,13]}
printBfsLevels(g,1) 
```

建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-23T18:24:38.490

对于图表，我使用 networkx 库。

你应该看看[http://networkx.lanl.gov/reference/algorithms.traversal.html](http://networkx.lanl.gov/reference/algorithms.traversal.html)

# jquery - 在 jQuery 中，选择较小 div 窗口内的元素

> ID：11171885
> 
> 赞同：0
> 
> 时间：2012-06-23T18:19:35.897
> 
> 标签：jquery, position, coordinates, offset

我有一个无序列表，它是一个较小的父 div 中的一个子元素，并且在第一个 div 中滚动。我将如何选择`<li>`当前在第一个 div 窗口中可见的？

我尝试的是使用父容器的 jQuery 偏移坐标和我从[这里得到的 elementFromPoint](https://stackoverflow.com/questions/3942776/jquery-find-element-at-a-particular-position)

```
xcoo = $('#menuholder1').offset().left;
ycoo = $('#menuholder1').offset().top;
clickedID = document.elementFromPoint(xcoo, ycoo).id; 
```

但是，这会将元素返回高一级。所以我尝试只添加到 ycoo，但它什么也没返回。

有人对此有其他解决方案吗？有问题的页面是[http://do.right.by](http://do.right.by)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:03:25.033

我用这个插件来选择可见元素： http: [//archive.plugins.jquery.com/project/viewport](http://archive.plugins.jquery.com/project/viewport)

它添加了伪选择器`:in-viewport`，因此您可以像这样选择：

```
$("li:in-viewport") 
```

要使其应用于父元素而不是窗口，请在此处获取修改后的源代码：[https ://gist.github.com/2979829](https://gist.github.com/2979829)

对于看起来像这样的 IIFE

```
(function($, window) {
    //bunch of code...
})(jQuery, "#menuholder1"); 
```

#menuholder1 是选择您的父元素的查询。

# c++ - C++：如果所有数据都可能已经有效，那么在构造函数中进行验证是否会产生开销？

> ID：11171886
> 
> 赞同：1
> 
> 时间：2012-06-23T18:19:37.783
> 
> 标签：c++, optimization, validation, code-duplication

我想在我的构造函数中抛出一个异常，这样我就不必处理僵尸对象了。但是，我还想预先提供一种验证方法，以便人们可以避免在没有理由的情况下“处理异常”。在 GUI中，预期无效数据并不*例外。*但是我也想避免代码重复和开销。GCC / Microsoft Visual C++ 编译器是否足够聪明，可以消除两次​​验证输入的低效率，如果没有，是否有一些微妙的变化可以取悦？

说明我的观点的示例代码块如下：

```
#include <string>
#include <exception>
#include <iostream>

using std::string;
using std::cout;
using std::endl;
using std::exception;

// a validation function
bool InputIsValid(const string& input) {
    return (input == "hello");
}

// a class that uses the validation code in a constructor
class MyObject {
    public:

    MyObject(string input) {
        if (!InputIsValid(input))    //since all instances of input
            throw exception();       //has already been validated
                                     //does this code incur an overhead
                                     //or get optimised out?

        cout << input << endl;       
    };

};

int main() {

    const string valid = "hello";

    if (InputIsValid(valid)) {
        MyObject obj_one(valid);
        MyObject obj_two(valid);
    }

    return 0;
} 
```

我预计如果类的目标文件是单独生成的，这可能是不可能的，因为目标文件无法确保人们在调用构造函数之前进行验证，但是当应用程序在单个应用程序中编译并链接在一起时，是请问可以吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T18:33:37.677

> 如果所有数据可能已经有效，是否有在构造函数中进行验证的开销？

是的，如果数据已经过验证，那么您将承担再次验证它的费用

> GCC / Microsoft Visual C++ 编译器是否足够聪明，可以消除两次​​验证输入的低效率，如果没有，是否有一些微妙的变化可以取悦？

您可以将输入封装在一个对象中，该对象会记住验证的结果。

```
template <typename INPUT_TYPE>
class InputObject {
    INPUT_TYPE input_;
    bool valid_;
public:
    typedef <typename VALIDATE>
    InputObject (INPUT_TYPE in, VALIDATE v) : input(in), valid_(v(in)) {}
    const INPUT_TYPE & input () const { return input_; }
    bool isValid () const { return valid_; }
};

typedef InputObject<std::string> MyInput;

class MyObject {
public:
    MyObject (const MyInput &input) {
        if (!input.isValid()) throw exception();
        //...
    }
}; 
```

构造`InputObject`函数为您调用验证器函数，并将验证结果存储在标志中。然后`MyObject`只需检查标志，无需再次进行验证。

```
int main () {
    MyInput input("hello", InputIsValid);

    try {
        MyObject obj_one(input);
        MyObject obj_two(input);
    }
    catch (...) {
        //...
    }
} 
```

正如 DeadMG 所建议的，可以通过坚持`MyObject`只接受经过验证的输入来实现更强的类型检查。然后，它根本不需要`throw`在构造函数中。这样的方案可以通过制作`NonValidatedInput`两种`ValidatedInput`不同的类型来完成。

```
template <typename> class NonValidatedInput;

template <typename T>
class ValidatedInput {
    friend class NonValidatedInput<T>;
    T input;
    ValidatedInput (const T &in) : input(in) {}
public:
    operator const T & () const { return input; };
};

template <typename T>
class NonValidatedInput {
    T input;
public:
    operator ValidatedInput<T> () const { return ValidatedInput<T>(input); }
    template <typename V>
    NonValidatedInput (const T &in, V v) : input(in) {
        if (v(input) == false) throw exception();
    }
}; 
```

`NonValidatedInput`接受未验证的输入，并执行验证，如果验证成功，则可以转换为`ValidatedInput`对象。如果验证失败，则`NonValidatedInput`抛出异常。因此，`MyObject`根本不需要检查验证，因为它的构造函数只接受`ValidatedInput`.

```
typedef ValidatedInput<std::string> MyInput;

class MyObject {
public:
    MyObject (MyInput input) {
        std::string v = input;
        std::cout << v << std::endl;
    }
};

int main () {
    try {
        MyInput input = NonValidatedInput<std::string>("hello", InputIsValid);
        MyObject obj_one(input);
        MyObject obj_two(input);
    }
    catch (...) {
        //...
    }
} 
```

这里的类型安全性非常强，因为只有在验证成功的情况下`NonValidatedInput`才能创建 a 。`ValidatedInput`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T18:25:14.760

优化器可能会内联函数 InputIsValid()，但这只是它所能做到的。您还需要将构造函数记录为正在抛出，以及将要抛出的异常类型。就调用该函数的性能成本而言，strcmp() 的成本可以忽略不计。可以说，除非该构造函数在非常紧密的循环中使用，否则成本应该可以忽略不计。

# android - 意图通过 IPC 发送时会改变吗？

> ID：11171887
> 
> 赞同：0
> 
> 时间：2012-06-23T18:19:44.593
> 
> 标签：android, ipc

我正在使用 ResultReceiver 来允许服务将数据传递给活动。我在比较通过 IPC 发送的意图时遇到了一些困难，看起来对象正在发生变化，因此无法使用标准哈希码（.equals）比较进行比较。我创建了一些将重现该场景的示例代码：

**我的活动.java：**

```
public class MyActivity extends Activity {

    private final Handler mHandler = new Handler();
    private Intent serviceIntent;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        MyReceiver receiver = new MyReceiver(mHandler);
        serviceIntent = new Intent(this, MyService.class);
        serviceIntent.putExtra("receiver", receiver);
        startService(serviceIntent);
    }

    public class MyReceiver extends ResultReceiver {

        public MyReceiver(Handler handler) {
            super(handler);
        }

        @Override
        protected void onReceiveResult(int resultCode, Bundle resultData) {
            Intent intent = resultData.getParcelable("intent");
            if(intent.equals(serviceIntent)) {
                Log.d("TEST", "Same intent!");
            } else {
                Log.d("TEST", "Different intents!");
            }
        }

    }

} 
```

**我的服务.java**

```
public class MyService extends Service {

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        ResultReceiver receiver = intent.getExtras().getParcelable("receiver");
        Bundle b = new Bundle();
        b.putParcelable("intent", intent);
        receiver.send(100, b);
        stopSelf();
        return Service.START_NOT_STICKY;
    }

} 
```

*如果要运行此服务，请不要忘记在清单中注册服务。*

所以意图是来回发送的，过程中没有改变，但我的活动坚持这两个引用不同。这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-27T00:57:46.957

`Intent intent = resultData.getParcelable("intent")` 由和创建的意图`private Intent serviceIntent`不是同一个对象，即使它们被创建为包含完全相同的数据。当前`.equals()`函数只是检查意图是否是同一个对象；您必须编写自己的`.equals()`函数来确定意图是否相同，无论定义适合您的应用程序。见[这里](https://stackoverflow.com/a/10955458/379420)。

# ios - 使用正则表达式从用户代理检测 iOS 版本号

> ID：11171895
> 
> 赞同：6
> 
> 时间：2012-06-23T18:21:00.597
> 
> 标签：ios, regex, version

如果我有一个 iOS 用户代理

> Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_0 like Mac OS X; en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8A293 Safari/6531.22.7

或者

> Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_0 like Mac OS X; en-us) AppleWebKit/532.9 (KHTML, like Gecko) Mobile/7D11

我将如何使用正则表达式检测 iOS 版本，以便它返回例如

> 4.0

对于上述用户代理？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T10:43:33.560

为我工作的正则表达式是：

```
/OS ((\d+_?){2,3})\s/ 
```

iPad 5.1.1 有`HTTP_USER_AGENT`这样的：

```
"Mozilla/5.0 (iPad; CPU OS 5_1_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B206 Safari/7534.48.3" 
```

所以**iOS 版本中有 3 个数字，**而**不是 iPhone OS**。

一个可能的 Ruby 实现可能是：

```
def version_from_user_agent(user_agent)
  version = user_agent.match(/OS ((\d+_?){2,3})\s/)
  version = version[1].gsub("_",".") if version && version[1]
end 
```

如果未找到 iOS 版本，则返回*nil*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-23T18:54:54.740

这个正则表达式应该做你想做的事：

```
/iPhone OS (\d+)_(\d+)\s+/ 
```

您必须捕获两个匹配的组值，如何做到这一点取决于您使用的语言......

使用 php 你可以这样做：

```
$txt = 'Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_0 like Mac OS X; en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8A293 Safari/6531.22.7';
$reg = '/iPhone OS (\d+)_(\d+)\s+/';
$a   = array();
preg_match($reg, $txt, $a);

$str_version = $a[1].'.'.$a[2]; // This variable should now contain : 4.0 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-08T19:48:43.703

此正则表达式将匹配 2 和 3 段，如 4.0 或 6.1.3

```
/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/ 
```

Javascript 示例：

```
> navigator.userAgent
  "Mozilla/5.0 (iPhone; CPU iPhone OS 6_1_2 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Mobile/10B146"
> navigator.userAgent.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/);
  ["6_1_2"] 
```

请注意，这也可能与其他设备匹配，因此请确保在 iOS 设备上进行测试。

这将返回 Mac 上的 OS X 版本。

```
> navigator.userAgent
  "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_4) AppleWebKit/536.30.1 (KHTML, like Gecko) Version/6.0.5 Safari/536.30.1"
> navigator.userAgent.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/);
  ["10_8_4"] 
```

您可能还想使用 替换 ，`_`甚至使用 将其转换为`.`数组。`.replace(/_/g,'.');``.split('_');`

```
_iOSDevice = !!navigator.platform.match(/iPhone|iPod|iPad/);
if(_iOSDevice)
 _iOSVersion = (navigator.userAgent.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/)||[''])[0].replace(/_/g,'.'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-19T15:04:08.580

当针对示例用户代理字符串的此网页上的可能用户代理字符串进行测试时，我发现现有答案的成功率不高：

[http://www.webapps-online.com/online-tools/user-agent-strings/dv/operatingsystem51849/ios](http://www.webapps-online.com/online-tools/user-agent-strings/dv/operatingsystem51849/ios)

我创建了以下正则表达式，在针对这些示例进行测试时，它取得了更大的成功：

```
(iPad|iPhone|iphone|iPod).*?(OS |os |OS\_)(\d+((_|\.)\d)?((_|\.)\d)?) 
```

第四组包含 ios 版本号，格式为 x_y_z 或 xyz，其中 y 和 z 是可选的。

有 7 个示例用户代理字符串不包含任何版本号，因此这些特定的字符串不匹配。有一个示例字符串，其中 ios 版本为“7.1”，但正则表达式仅匹配主版本号“7”（这对我的用例来说已经足够了）

除了上面页面上的测试之外，它还针对此页面上列出的 ios10 代理字符串进行了测试：

[https://myip.ms/view/comp_browsers/1983/Safari_10.html](https://myip.ms/view/comp_browsers/1983/Safari_10.html)

# node.js - 检查文档中的字段

> ID：11171896
> 
> 赞同：1
> 
> 时间：2012-06-23T18:21:02.767
> 
> 标签：node.js, mongodb, express, mongoose

假设我有以下架构

```
 var userSchema = new Schema({
    name : String
  });

  var User = mongoose.model('User',userSchema); 
```

**编辑**：如果用户试图更新不存在的字段，我需要抛出异常。我的问题是如何检查更新文档中不存在更新字段。这是我需要的一个小例子：

```
 app.post('/user/update/:id', function (req, res) {
     var field = req.param('field'),
          value = req.param('value'),
          id = req.param('id');

     User.findOne({_id: id},function(err, user){
        if(err) throw err;

        if (user) {

          user[field] = value;          // Here is I need to check that field is exists
                                        // in user schema. If does't I have to throw 
                                        // an execption.

          user.save(function (err){
             return res.send(200);
          });
        }            
     })
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:32:36.117

尝试添加`$exists`到 update() 的查询参数。这将允许您仅在某个字段存在（或不存在）时更新文档。

[http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24exists](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24exists)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:28:19.343

来自猫鼬 v3.1.2 指南：

> strict 选项（默认启用）确保添加到模型实例中但未在我们的模式中指定的值不会保存到数据库中。注意：除非你有充分的理由，否则不要设置为 false。
> 
> strict 选项也可以设置为“throw”，这将导致产生错误而不是忽略坏数据。

[http://mongoosejs.com/docs/guide.html#strict](http://mongoosejs.com/docs/guide.html#strict)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T17:11:02.660

```
var CollectionSchema = new Schema({name: 'string'}, {strict: 'throw'});

Collection.findById(id)
  .exec(function (err, doc) {
    if (err) {// handle error};

    // Try to update not existing field
    doc['im not exists'] = 'some';
    doc.save(function (err) {
      if (err) {
         // There is no an errors
      }

      return res.json(200, 'OK');
    });

  }); 
```

在上面的示例中，当我更新不存在的字段时没有收到错误消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-25T01:29:16.647

您可以使用.检查是否`field`存在于 中。在您的特定用例中，您可以执行以下操作：`schema``.schema.path()`

```
app.post('/user/update/:id', function (req, res) {
 var field = req.param('field'),
      value = req.param('value'),
      id = req.param('id');

  User.findOne({_id: id},function(err, user){
    if(err) throw err;

    if (user) {

      if(User.schema.path(field)) {
        user[field] = value;
      } else {
        throw new Error('Field [' + field + '] does not exists.');
      }

      user.save(function (err){
        return res.send(200);
      });
    }            
  });
}); 
```

# swing - 一个字符串变量每次点击都指向 +1 值位置，尽管会覆盖所有这些，我认为

> ID：11171898
> 
> 赞同：3
> 
> 时间：2012-06-23T18:21:30.047
> 
> 标签：swing

我是新来的，也是 Java 的初学者。这是我的第一个查询。我正在编写这个 java 程序，它将向数据库添加 5 条记录，这样每次我单击“提交”时，数据库中的顶行被删除，最底行向上移动 1 条记录，最后一行添加一条新记录. 我也将数据库中的文本添加为​​框架|窗口上的 JLabels。一切都很好。并且数据库也按预期工作。除了当我连续第二次单击提交按钮（我的意思是不关闭窗口或再次运行程序）时，我在文本框中输入的水（“写你的博客”）只需单击即可添加到数据库的 3 条记录中。当我第三次点击它时，它会在数据库中添加 5 条或更多相同的记录。你能帮我解决我的问题吗？**自行运行并单击提交按钮三次以了解主窗口中的值如何变化**

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;

public class OutLoud {
    Connection con;
    Statement st;
    ResultSet rs;
    JFrame Ba = new JFrame("Shout");
    JButton Bb = new JButton("Shout");
    JFrame Aa = new JFrame("Write Your Blog");
    JTextField Ab = new JTextField(100);
    JButton Ac = new JButton("Submit");
    JLabel Za;
    JLabel Zb;
    JLabel Zc;
    JLabel Zd;
    JLabel Ze;

    public OutLoud() {
        connect();
        BlogPage();
        Submit();
    }

    public void connect() {
        try {
            String driver = "sun.jdbc.odbc.JdbcOdbcDriver";
            Class.forName(driver);
            String db = "jdbc:odbc:db1";
            con = DriverManager.getConnection(db);
            st = con.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE);
            String sql = "select * from Table1";
            rs = st.executeQuery(sql);
        } catch (Exception ex) {
        }
    }

    public void BlogPage() {
        Ba.setLayout(null);
        Ba.setSize(1024, 768);
        Ba.setVisible(true);
        Bb.setBounds(10, 210, 80, 25);
        Ba.add(Bb);
    }

    public void Submit() {
        try {
            rs.last();
            String s11 = rs.getString("Blog");
            Za = new JLabel(s11);
            Ba.add(Za);
            Za.setBounds(246, 170, 512, 100);
            rs.previous();
            String s12 = rs.getString("Blog");
            Zb = new JLabel(s12);
            Ba.add(Zb);
            Zb.setBounds(246, 275, 512, 100);
            rs.previous();
            String s13 = rs.getString("Blog");
            Zc = new JLabel(s13);
            Ba.add(Zc);
            Zc.setBounds(246, 380, 512, 100);
            rs.previous();
            String s14 = rs.getString("Blog");
            Zd = new JLabel(s14);
            Ba.add(Zd);
            Zd.setBounds(246, 485, 512, 100);
            rs.previous();
            String s15 = rs.getString("Blog");
            Ze = new JLabel(s15);
            Ba.add(Ze);
            Ze.setBounds(246, 590, 512, 100);
        } catch (Exception ex) {
        }
        Bb.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                Aa.setLayout(null);
                Aa.setSize(512, 384);
                Aa.setVisible(true);
                Ab.setBounds(21, 64, 450, 200);
                Aa.add(Ab);
                Ac.setBounds(206, 294, 80, 25);
                Aa.add(Ac);
                Ac.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        String s1 = Ab.getText();
                        try {
                            rs.first();
                            rs.deleteRow();
                            rs.updateString("Blog", s1);
                            rs.insertRow();
                        } catch (Exception ex) {
                        }
                        Ba.remove(Za);
                        Ba.remove(Zb);
                        Ba.remove(Zc);
                        Ba.remove(Zd);
                        Ba.remove(Ze);
                        Aa.dispose();
                        Submit();
                    }
                });
            }
        });
    }

    public static void main(String[] args) {
        new OutLoud();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T18:27:16.820

“它比上次插入​​更多的值”的根本问题是*新的*事件侦听器正在 [重新] 附加到其他事件侦听器中：因此每次发生事件时都会调用*更多*（相同的）事件侦听器。

*修复：在创建控件时附加一次*侦听器并完成它。（事实上​​，*所有*“控制创建”的东西都做*一次就*可以了。）

可能还有其他问题，但*代码~~是~~是不可读*的（代码上面的段落也很难破译）。让编辑器/IDE 进行代码格式化和语法高亮。编码是关于狂妄*和*懒惰的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T15:21:29.830

Rajan，您在已经存在的事件侦听器中添加了一个动作侦听器。这导致多次执行。初始化 Ac 后使用*Ac.addActionListener(......) 。*（即把它放在构造函数中）。实际上，您将所有格式化代码（setBounds(...)、setSize(...)、.add(...) 等）放在 actionListeners 之外。只需在 actionListener 中使用 setVisible(...) 和 dispose() 即可。

不仅如此，你的程序还有很多错误。不要使用 setBounds(...) 方法。使用 LayoutManager 并使用 pack() 方法添加组件要好得多。

# linux - 如何获得正确的 .config 文件来编译特定于我的硬件的 Linux 内核源代码？

> ID：11171903
> 
> 赞同：5
> 
> 时间：2012-06-23T18:22:05.670
> 
> 标签：linux, linux-kernel, makefile, kernel

我尝试使用`make defconfig`编译内核，但正如预期的那样，它无法启动。我想知道像 Canonical 这样的内核供应商为 Ubuntu 使用什么 .config 文件，内核能够开箱即用地启动。当然，我仍然是一个初学者，配置各种参数，目前有点超出我的范围。

具体来说，我正在寻找加载一个基本的“你好，世界！” 模块到我正在运行的内核 2.6.32.41。为此，我需要针对用于运行内核的相同 .config 文件编译内核源代码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T03:22:52.727

`CONFIG_IKCONFIG_PROC`如果您正在运行的内核是使用该选项编译的，您可以在以下位置获取配置`/proc/config.gz`：

```
$ zcat /proc/config.gz >my_config 
```

复制`my_config`到您的内核构建目录`.config`并运行`make config`以提示您输入配置文件中缺少的配置选项（这只会在您使用比正在运行的内核更新的内核源时发生）。然后，您应该能够编译具有与当前内核相同功能的新内核。

发行版通常使用自己的内核配置，其中大多数驱动程序被编译为模块，以便在请求相应的硬件时动态加载。此外，内核需要使用相关的引导选项（例如指定根文件系统的选项）来引导。您的 defconfig 内核可能因此无法启动。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-23T18:33:23.597

我不知道如何获得“适合您的硬件”的配置，但是您可以通过查找以`/boot/`name 开头的文件来使用 Ubuntu 为您提供的配置`config`。可能不止一个，在这种情况下使用命令`uname -r`告诉你当前正在运行哪个内核，然后你可以使用适当的配置。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-05T18:36:35.873

***选项1：***

启动系统的源代码

```
cd /usr/src/linux-headers-3.2.0-29; 
```

这将生成 .config

```
sudo make oldconfig; 
vi .config 
```

***选项2：***

```
zcat /proc/config.gz > my_config 
```

***选项3：***

```
echo /boot/config* > my_config 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T03:18:38.553

“defconfig”通常与常用硬件挂钩 - x86 或 x86_64，也许不是最近的芯片组或主板。有时，就像我的联想笔记本电脑一样，只有最新的内核源代码，并启用一些配置选项，在谷歌搜索 bugzilla 数据库后，它才能工作。

就像 Jeff Welling 所说的，要获得使用中的配置，你可以在 /boot 目录下查看。我的 Fedora Core 也一样。但是，如果您想将基本程序编译为“内核模块”，并且仅表示“可加载内核模块”，则不需要编译内核源代码。你只需要当前版本的内核头文件。例如，Ubuntu 10.04 中的“apt-cache search”返回几个可能的选项：

```
linux-headers-2.6.38 - Header files related to Linux kernel, specifically,
linux-libc-dev - Linux Kernel Headers for development 
```

Ubuntu 通常会修补股票内核（来自 kernel.org）以拥有自己的内核。如果你已经下载了股票内核，并尝试使用 /boot 的配置文件（或者有时你可以找到当前加载的配置为 /proc/config.gz，比如 Backtrack 的 Ubuntu，它基于 10.04 LTS），那么你可能需要使用名为“.config”的当前配置文件执行“make oldconfig”。然后“make oldconfig”将使用 .config 生成与内核源代码兼容的新 .config。

# java - AlarmManager/BroadcastReceiver 不工作

> ID：11171908
> 
> 赞同：3
> 
> 时间：2012-06-23T18:22:52.343
> 
> 标签：java, android, android-intent

我一直在尝试使用 AlarmManager 和 BroadCastReceiver 设置我的第一个警报，如下所述：http: [//smartandroidians.blogspot.com.es/2010/04/alarmmanager-and-notification-in.html](http://smartandroidians.blogspot.com.es/2010/04/alarmmanager-and-notification-in.html)

我的设置：

AndroidManifest.xml：

```
<receiver android:name="es.radiopodcastellano.player.SleepAlarm" /> 
```

我的主要活动 onCreate （此代码实际上驻留在子类中，但为了简化我把它放在那里）：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
            // <Stripped code>
    AlarmManager alarm = (AlarmManager) currentContext.getSystemService(Context.ALARM_SERVICE);
    Intent intent = new Intent(this.getApplicationContext(), SleepAlarm.class);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(this.getApplicationContext(), 0, intent, PendingIntent.FLAG_ONE_SHOT);
    alarm.set(AlarmManager.RTC_WAKEUP,(System.currentTimeMillis() + (5 * 1000)),pendingIntent);
} 
```

睡眠警报.java：

```
public class SleepAlarm extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    Log.d("RPod_SleepAlarm","Alarm!!");
}

} 
```

“adb shell dumpsys alarm”的输出显示了这一点，因此似乎正在调用意图：

```
 es.radiopodcastellano.player
221ms running, 32 wakeups
44 alarms: flg=0x4 cmp=es.radiopodcastellano.player/.SleepAlarm 
```

但是，Logcat 没有显示“RPod_SleepAlarm”标签。我可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T15:33:29.577

我发现了问题。

清单上的接收器位于小部件的另一个接收器内，它必须是应用程序的子级。所以，如果你和我有同样的行为，请检查你是否正确设置了 AndroidManifest.xml：

# actionscript-3 - VideoEvent 在 Flash Player 10.2 中不起作用

> ID：11171913
> 
> 赞同：6
> 
> 时间：2012-06-23T18:23:12.627
> 
> 标签：actionscript-3

VideoEvent 在 Flash Player 10.2 中不起作用

```
import fl.video.VideoEvent 

addEventListener(VideoEvent.READY, ready);

Compiler Error: ( For Flash Player 10.2, works fine in Flash Player 9)
1119: Access of possibly undefined property READY through a reference with static type Class. 
```

有什么解决这个问题的建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-07T00:57:02.123

（由于这个问题已经解决了一段时间，我在这里发布答案是出于公共礼貌，以便将其从未答复的列表中删除。欢迎提问者发布他们自己的答案并接受它，或者只是接受这个答案。无论哪种。）

编译器显然与 fl.video.VideoEvent 混淆了。请改用完整参考。

`addEventListener(fl.video.VideoEvent.READY, ready);`

# java - 使用 File(URI uri) 构造函数创建文件对象

> ID：11171916
> 
> 赞同：0
> 
> 时间：2012-06-23T18:23:38.100
> 
> 标签：java, file

在我的应用程序中，我需要创建一个目录的表示，该目录`<class_name>`是包含 的包。简而言之，我需要创建一个`File`代表该目录的对象。

代码如下：

```
Package package1 = <class_name>.class.getPackage();
String string = "/" + package1.getName().replace('.', '/');
URL url = <class_name>.class.getResource( string );
File file = new File( url.toURI() ); 
```

现在，问题是在创建`File`对象时，抛出了这个异常：

> java.lang.IllegalArgumentException：URI 不是分层的。

任何人都可以阐明并帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:01:19.993

我不使用 NetBeans。所以，我帮不了你。但是，如果您可以在命令行中使用 java，那么请尝试使用此测试代码。

```
package rick;
import java.net.*;
import java.io.*;
public class Test{
  public static void main(String[] args){
     Test test = new Test();
     Package package1 = test.getClass().getPackage();
     String string = "/" + package1.getName().replace('.','/');
     URL url = test.getClass().getResource(string);
     File  file = new File(url.toString());
     System.out.println(file.getPath());
  }
} 
```

# jquery - 从 UL 列表中删除最后 4 个 LI 的边框底部的 Jquery 函数

> ID：11171920
> 
> 赞同：3
> 
> 时间：2012-06-23T18:24:02.610
> 
> 标签：jquery

我有一个无序列表：

```
<div class="toplist">
    <ul>
    <li>Item</li>
    <li>Item</li>
    <li>Item</li>
    <li>Item</li>
    <li>Item</li>
    <li>Item</li>
    <li>Item</li>
    </ul>
</div> 
```

我正在考虑删除最后 4 项的 li 边框的 jquery 代码。

有任何想法吗？

```
function toplist(){
$('.toplist ul li').css("border-bottom", "none");
} 
```

泰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T18:25:48.023

使用[slice](http://api.jquery.com/slice/)获取最后一个元素：

```
function toplist(){
    $('.toplist ul li').slice(-4).css("border-bottom", "none");
} 
```

> **.slice(开始[，结束])**
> 
> **start**一个整数，指示开始选择元素的从 0 开始的位置。如果为负，则表示与集合末尾的偏移量。
> 
> **end**一个整数，指示停止选择元素的从 0 开始的位置。如果为负，则表示与集合末尾的偏移量。如果省略，则范围将持续到集合的末尾。

# django-mptt - order_insertion_by 降序排列？

> ID：11171928
> 
> 赞同：4
> 
> 时间：2012-06-23T18:25:20.907
> 
> 标签：django-mptt

我正在尝试将 mptt 库用于简单的嵌套评论系统。

我的模特

```
class Comment(MPTTModel):
    event = models.ForeignKey(Event)
    author = models.CharField(max_length=60)
    comment = models.TextField()
    added  = models.DateTimeField(default=timezone.now())
    parent = TreeForeignKey('self', null=True, blank=True, related_name='children')
    class MPTTMeta:order_insertion_by = ['added'] 
```

现在，如果我使用 {% recursetree nodes %} 模板标签，它会根据“添加”按升序显示节点。我想按时间降序显示根注释，最新评论优先。我尝试对节点进行排序，使其降序，但递归树不遵循该顺序。有没有办法指定降序？我试过['-add']，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:04:02.223

[从 github 下载django-mptt](https://github.com/django-mptt/django-mptt)的更新版本-它将允许您以您想要的方式使用降序。例如：

```
class Comment(MPTTModel):
    event = models.ForeignKey(Event)
    author = models.CharField(max_length=60)
    comment = models.TextField()
    added  = models.DateTimeField(default=timezone.now())
    parent = TreeForeignKey('self', null=True, blank=True, related_name='children')

    class MPTTMeta:
        order_insertion_by = ['-added'] 
```

# java - 在 Eclipse 中运行 Maven/Wicket 项目时的目标是什么？

> ID：11171931
> 
> 赞同：0
> 
> 时间：2012-06-23T18:25:55.247
> 
> 标签：java, eclipse, tomcat, maven, wicket

我正在尝试学习 Wickets，我已经设法安装了 jar，所以我的代码没有错误，我已经安装并启动了 Tomcat，我可以做到这一点：

![错误](../Images/9119d71c42412b48c4d4377bfb232558.png)

我在目标部分放了什么？目标到底是什么？

我还收到将文件名作为参数传递的错误，我进入文件参数，它只是抛出一个 ClassDefNotFoundException。

提前致谢！对任何设法让 Wicket 工作的人表示敬意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T09:38:04.310

如果您键入类似`jetty:run`我猜的内容，它将启动配置的`Jetty`服务器（几乎所有 Wicket 原型中都可用）

# java - 如何调试从 Java 调用的 JavaScript 代码（通过 JSR-223）？

> ID：11171933
> 
> 赞同：5
> 
> 时间：2012-06-23T18:26:02.470
> 
> 标签：java, javascript, debugging, jsr223

我正在开发一个 java 应用程序，其中一些逻辑是通过***jsr223*** (javascript) 执行的。在 java 类中，我将一些 java 对象转发到 javascript（例如，我的域对象、一些 SQL 查询的 PreparedStatement），然后开始编译 javascript 代码。

我使用 Eclipse 进行开发。

我的问题是，如何调试 javascript 部分？

干杯，雅克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:33:55.303

这是[来自 Netbeans 的 jsr223 中调试 js](http://markmail.org/message/usjkgrn45ezvkluq)的信息。

不能说什么关于日食。

# firefox - twitter bootstrap 不适合 Firefox 中的页面

> ID：11171937
> 
> 赞同：0
> 
> 时间：2012-06-23T18:27:04.490
> 
> 标签：firefox, twitter-bootstrap

我使用 twitter bootstrap 以下是标记

```
<body>
  <div class="navbar navbar-fixed-top">blah</div>

 <div class="row-fluid"> 
   <div class="span3">column1</div>
   <div class="span7">column2</div>
   <div class="span2">column3<div>
 </div>
</body> 
```

它在 IE9 中工作正常，但它不适合在 Firefox 中的一行，我的意思是 column2 和 3 在 column1 下，即使我减小了列的宽度（例如通过将 span7 更改为 6）。谢谢你的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:32:42.217

利用

```
<div class="span2">column3</div> 
```

代替

```
<div class="span2">column3<div> 
```

# sql-server - 将 Access 查询转换为 SQL Server 存储过程

> ID：11171942
> 
> 赞同：-1
> 
> 时间：2012-06-23T18:27:34.697
> 
> 标签：sql-server

我正在尝试将 MS Access 查询转换为 SQL Sever 存储过程，但在对两个不相关表中的字段求和和分组时遇到问题。可以在 MS Access 中执行此操作，但我无法在 SQL Server 存储过程中复制它。

这是我要转换的 MS Access 查询 -

**MS 访问查询**

```
SELECT Tbl_Actuals.PS
, [tbl_CalendarYear.Current_Year]-1 AS [Previous Year]
, tbl_CalendarYear.Current_Year
, Tbl_Actuals.Source
, Tbl_Actuals.Program_Code
, IIf([Source]="Leasehold",Sum(IIf([Actuals_Year]<>[Current_Year],    ([Amount]),Null)),Null) AS PrevYearAmount 
FROM Tbl_Actuals, tbl_CalendarYear
GROUP BY Tbl_Actuals.PS
, [tbl_CalendarYear.Current_Year]-1
, tbl_CalendarYear.Current_Year
, Tbl_Actuals.Source
, Tbl_Actuals.Program_Code
ORDER BY Tbl_Actuals.Program_Code; 
```

这是上面的 SQL Server 存储过程转换。

```
declare @CurrentYear float
declare @PrevYear float

SET @CurrentYear=(SELECT [Current_Year]  FROM tbl_CalendarYear)  
SET @PrevYear= (SELECT [Current_Year] -1 FROM tbl_CalendarYear) 

SELECT PS
, @CurrentYear as CurrentYear
, @PrevYear as PreviousYear
, A.Source
, A.Program_Code
, CASE WHEN (A.Source='Leasehold') THEN SUM(A.Amount) -- HOW TO DO SUM ONLY IF     [A.Actuals_Year]=[Current_Year] similar to Access Query END AS PrevYearAmount
FROM Tbl_Actuals A
GROUP BY PS
, Source
, Program_Code -- HOW TO GROUP BY [Current_Year]-1,    tbl_CalendarYear.Current_Year similar to Access Query
ORDER BY Program_Code; 
```

这是我对 SQL 转换的问题-

1.  `[A.Actuals_Year]=[Current_Year]`仅在类似于 Access 查询时如何求和
2.  HOW TO GROUP BY`[Current_Year]-1, tbl_CalendarYear.Current_Year`类似于​​ Access 查询

好心提醒。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:49:16.163

这似乎有点奇怪的数据库设计，但这可能会给你你需要的东西：

```
DECLARE @CurrentYear float
DECLARE @PrevYear float

SELECT @CurrentYear = MAX([Current_Year]) FROM tbl_CalendarYear
SET @PrevYear = @CurrentYear - 1 

SELECT [PS]
    ,@CurrentYear as CurrentYear
    ,@PrevYear as PreviousYear
    ,[Source]
    ,[Program_Code]
    ,SUM(CASE WHEN [Source]='Leasehold' AND [Actuals_Year] <> @CurrentYear THEN 
        [Amount] 
        ELSE 
            0 
        END) PrevYearAmount 
FROM Tbl_Actuals
GROUP BY [PS]
    ,[Source]
    ,[Program_Code]
ORDER BY [Program_Code]; 
```

关于问题（2），因为`@CurrentYear`和`@PrevYear`是变量，你不需要按它们分组。

我还注意到，您的 Access 查询正在对 where 求和`Amount`，`[Actuals_Year]<>[Current_Year]`但在您的问题 (1) 中，您说它应该 sum where `[Actuals_Year]=[Current_Year]`。我的回答遵循 Access 版本。

# regex - 用相应的字母集替换字母

> ID：11171945
> 
> 赞同：5
> 
> 时间：2012-06-23T18:27:54.490
> 
> 标签：regex, r

我遇到了一个小问题，但没有找到合适的搜索词。我有来自“A”-“N”的字母，并且想根据它们在字母表中的位置将这些大于“G”的字母替换为“A”-“G”。使用`gsub`它似乎很麻烦。还是有任何正则表达式可以做得更聪明？

```
k <- rep(LETTERS[1:14],2)
gsub(pattern="H", replace="A", x=k)
gsub(pattern="I", replace="B", x=k)
gsub(pattern="J", replace="C", x=k)
gsub(pattern="K", replace="D", x=k)
# etc. 
```

是不是有某种方法可以将字符转换为整数，然后简单地在整数值内计算，然后再回滚？或者有任何字母的倒数吗？ `as.numeric()`并`as.integer()`返回`NA`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T20:00:19.583

这将 HN 转换为 AG：

```
chartr("HIJKLMN", "ABCDEFG", k) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T19:00:37.157

每当我看到这样的问题时，我的第一个想法是`match`：

```
AG <- LETTERS[1:7]
HN <- LETTERS[8:14]

k <- rep(LETTERS[1:14],2)
n <- AG[match(k, HN)]
ifelse(is.na(n), k, n)
# [1] "A" "B" "C" "D" "E" "F" "G" "A" "B" "C" "D" "E" "F" "G" "A" "B" "C" "D" "E"
#[20] "F" "G" "A" "B" "C" "D" "E" "F" "G" 
```

我会`LETTERS`以同样的方式构造一个反函数：

```
invLETTERS <- function(x) match(x, LETTERS[1:26])
invLETTERS(k)
# [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14  1  2  3  4  5  6  7  8  9 10 11
#[26] 12 13 14 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-23T19:02:32.047

这是一个干净直接的解决方案：

```
k <- rep(LETTERS[1:14],2)

# (1) Create a lookup vector whose elements can be indexed into  
#     by their names and will return their associated values
subs <- setNames(rep(LETTERS[1:7], 2), LETTERS[1:14])
subs
#   A   B   C   D   E   F   G   H   I   J   K   L   M   N 
# "A" "B" "C" "D" "E" "F" "G" "A" "B" "C" "D" "E" "F" "G" 

# (2) Use it.
unname(subs[k])
#  [1] "A" "B" "C" "D" "E" "F" "G" "A" "B" "C" "D" "E" "F" "G"
# [15] "A" "B" "C" "D" "E" "F" "G" "A" "B" "C" "D" "E" "F" "G" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-23T18:46:59.800

我确信有一种方法可以使它更紧凑，但这可能是您在第二个非正则表达式想法中考虑的那种事情：

```
k <- factor(k)
> k1 <- as.integer(k) %% 7
> k1[k1 == 0] <- 7
> LETTERS[k1]
 [1] "A" "B" "C" "D" "E" "F" "G" "A" "B" "C" "D" "E" "F" "G" "A" "B" "C" "D" "E" "F" "G" "A"
[23] "B" "C" "D" "E" "F" "G" 
```

可能有一种巧妙的方法来回避 0 索引问题，但我现在感觉不是很聪明。

**编辑**

评论中的好建议。首先，处理 0 形式的模运算：

```
k1 <- ((as.integer(k)-1) %%7) + 1 
```

并结合`match`它变成一个单行：

```
k1 <- LETTERS[((match(k, LETTERS)-1) %% 7) + 1] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-23T19:06:13.243

如果您的问题仅与 AN 有关：

```
set.seed(1)
k = sample(LETTERS[1:14], 42, replace=TRUE)
temp = match(k, LETTERS)
# > table(k)
# k
# A B C D E F G I J K L M N 
# 2 2 5 2 1 6 3 3 5 4 3 3 3 
k[which(temp > 7)] = LETTERS[temp[temp > 7] -7]
# > table(k)
# k
# A  B  C  D  E  F  G 
# 2  5 10  6  4  9  6 
```

# python - 如何使用数据库中的数据构建和填充 wx.Grid (python/wxpython)

> ID：11171946
> 
> 赞同：4
> 
> 时间：2012-06-23T18:27:55.987
> 
> 标签：python, sqlite, grid, wxpython

我已经看了几个小时的 wx 演示，只是无法理解这一点。

我需要从我的数据库中提取信息并将其列和值存储在一个网格中，仅供查看（截至目前）

有人可以为我制作一个示例脚本，说明如何做到这一点，这样我就可以用我自己的数据来实现它。我需要的网格是固定位置的，可以放在面板内（wx.notebook 的一页）我知道如何做那部分，但是如何在面板内获取网格并填充它让我感到困惑。

附加信息：我的数据库保存客户信息（姓名、电话、电子邮件）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T19:35:02.320

如果您正在查看使用 wx.grid.PyGridTableBase 和相关的网格演示，那么您是对的：这似乎是一个非常神秘的代码。但是，关键方法是：

```
def GetValue(self, row, col):
        return 'something' 
```

这个想法是，如果你有你的数据

```
self.data = [[1,2,3,4],
             [5,6,7,8],
             ........
             ] 
```

那么这会将您的数据放在相应的单元格中：

```
def GetValue(self, row, col):
     return str( self.data[row][column] ) 
```

（`self.data`代表您的数据库）

对于使用 wx.grid.Grid 静态数据或 MySQL 数据库数据的其他更简单的示例，您可以检查[this](http://www.blog.pythonlibrary.org/2010/03/18/wxpython-an-introduction-to-grids/)和[this](http://www.daniweb.com/software-development/python/threads/307431/populating-wx.grid-with-mysql-table)

使用 wx.grid.Grid 填充单元格的方法是：

```
mygrid.SetCellValue(row, col, databasevalue4rowcol) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-23T21:25:40.407

```
import itertools as it
import pandas as pd

df = pd.DataFrame({'A': [1.1, 2.7, 5.3], 'B': [2, 10, 9], 'C': [3.3, 5.4, 1.5], 'D': [4, 7, 15]},
                      index = ['a1', 'a2', 'a3'])

for row, col in it.product(range(len(df)), range(len(df.columns))):
    print ("mygrid.SetCellValue({0}, {1}, {2})".format(row, col, df.iat[row, col])) # **

# Results : 
# mygrid.SetCellValue(0, 0, 1.1)
# mygrid.SetCellValue(0, 1, 2)
# ...
# mygrid.SetCellValue(2, 3, 15) 
```

** 出于实际原因，我在上面的代码中使用 print(...)

在实际代码中，而不是 print(...) 使用以下内容：

```
mygrid.SetCellValue(row, col, str(df.iat[row, col])) 
```

# java - Java - 返回通用基本类型的工厂方法

> ID：11171955
> 
> 赞同：1
> 
> 时间：2012-06-23T18:29:14.613
> 
> 标签：java, generics

我正在尝试通用化返回通用基类的工厂方法。它有效，但我收到“BaseClass 是原始类型......”警告。

我已经阅读了有关通用方法的 Java 文档，但我仍然不太了解如何完成此操作。

这是一些代码：

第一类

```
//base abstract class
public abstract class BaseFormatter<T>
{
    public abstract String formatValue(T value);
} 
```

类#2

```
//two implementations of concrete classes
public class FooFormatter extends BaseFormatter<Integer>
{
    @Override
    public String formatValue(Integer value)
    {
        //return a formatted String
    }
} 
```

第 3 课

```
public class BarFormatter extends BaseFormatter<String>
{
    @Override
    public String formatValue(String value)
    {
        //return a formatted String
    }
} 
```

工厂方法在一个单独的类中

```
public static BaseFormatter getFormatter(Integer unrelatedInteger)
{
    if (FOO_FORMATTER.equals(unrelatedInteger))
        return new FooFormatter();
    else if (BAR_FORMATTER.equals(unrelatedInteger))
        return new BarFormatter();
    //else...
} 
```

从代码中的其他地方调用工厂方法

```
BaseFormatter<Integer> formatter = getFormatter(someInteger);
formatter.formatValue(myIntegerToFormat); 
```

问题是 getFormatter() 方法警告 BaseFormatter 是原始类型，它就是。我尝试了各种方法，例如 BaseFormatter 等。当然，我希望返回类型是通用的，就像调用方法中声明的 BaseFormatter 一样。

请注意，格式化程序类型不基于类类型。例如，并非所有整数值都使用 FooFormatter 进行格式化。可以通过两种或三种不同的方式格式化整数（或字符串或列表）。这就是参数 unrelatedInteger 的用途。

提前感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T00:58:42.290

学术语言中的某些类型系统可以表达所谓的依赖和。Java当然不能；那么，明智地，getFormatter 方法返回的对象的类型可能是什么？我们能做的最好的事情就是`BaseFormatter< ? extends Object >`，或者`BaseFormatter< ? >`简称，as `Integer`and `String`have only `Object`common。

我认为原始帖子引出了一个问题，为什么我们必须使用整数来决定返回什么格式化程序，如果调用者不知道格式化程序的类型，为什么调用者需要比 更强的变量类型`BaseFormatter< ? >`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T23:08:51.650

您实际上是在说，类型化参数`BaseFormatter`与`unrelatedInteger`作为参数传递给`getFormatter`方法的参数之间没有联系。

我收到其他警告：

```
Uncehcked Assignment: BaseFormatter to BaseFormatter<Integer> 
```

此警告比您指示的更严重。它警告该用户代码可能会尝试将 a 插入`BaseFormatter<String>`到`BaseFormatter<Integer>`中，只有在运行时失败时才会注意到这一点……考虑到用户不小心使用了您的工厂方法，如下所示：

```
BaseFormatter<Integer> myUnsafeFormatter =
        FormatterFactory.getFormatter(unrelatedIntegerForBarFormatter); 
```

编译器无法将`unrelatedInteger`与返回的参数化类型相关联`BaseFormatter`。

或者，我会让用户明确使用具体的格式化程序构造函数。所有格式化程序共享的任何通用代码都可以放入`FormatterUtils`类中（只是不要让那个 utils 类增长太多......）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T18:46:56.990

如果在 BaseFormatter 中定义了 getFormatter，则使用：

```
public static BaseFormatter<T> getFormatter(Integer unrelatedInteger) 
```

如果 getFormatter 是在 BaseFormatter 以外的另一个类中定义的，则使用：

```
public static BaseFormatter<?> getFormatter(Integer unrelatedInteger) 
```

# javascript - jQuery为范围设置祖先元素

> ID：11171957
> 
> 赞同：3
> 
> 时间：2012-06-23T18:29:32.867
> 
> 标签：javascript, jquery

我有一种情况，我的所有选择器都具有相同的祖先元素

```
$('#foo .bar')...
$('#foo .some_class')...
$('#foo .some_other_class')... 
```

我想知道是否有办法告诉 jQuery 始终假定选择器将从`#foo`? 所以像

```
$.ancestorWillAlwaysBe('#foo');
$('.bar')...
$('.some_class')...
$('.some_other_class')... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T18:52:13.340

```
$ancestor = $("#foo");
$$ = function(arg) {
    return $(arg, $ancestor);
}

$$('.bar').html("descendant of foo"); 
```

就我个人而言，我会使用类似的东西`$ancestor.find('.bar')`......出于代码清晰的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T18:59:45.167

看起来你懒得输入所有这些`#foo`。这是一种更简单的方法：

```
var e = $("#foo");  //short enough
$('.bar', e);
$('.some_class', e);
$('.some_other_class', e); 
```

或者如果你***真的***那么懒惰，你可以这样做：

```
$ = function(que, anc){
    if($.ancestor){
        return jQuery(que, $.ancestor);
    }else{
        return jQuery(que, anc);
    }
}

$.ancestor = "#foo";  //Ancestor will now always be #foo
$('.bar')...
$('.some_class')...
$('.some_other_class')...
$.ancestor = undefined;  //Clear 
```

**演示：http:** [//jsfiddle.net/DerekL/agnHy/](http://jsfiddle.net/DerekL/agnHy/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T18:31:56.203

没有简单的方法可以完全按照您的要求进行操作，但是您可以找到它：

```
var $foo = $('#foo'); 
```

进而：

```
var others = $foo.find('.bar'); 
```

请记住，在可能的情况下，最好在选择器的最右侧使用标签名称（尽管现在现代浏览器中的选择器解释如此之快，以至于优化通常不值得麻烦）。因此：

```
var others = $foo.find('span.bar'); 
```

当然有时这是不可取的，例如，如果你真的不能轻易地缩小所涉及的元素类型。

*编辑*——给缓存的 jQuery 结果一个以“$”开头的名字的约定就是：约定。这没有必要，我同情那些觉得它令人反感的人:-)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-23T19:25:04.733

我有点懒，可能只会创建一个函数：

```
function a(elem) {
    return $('#foo').find(elem);
} 
```

并像这样使用它：

```
a('.bar').css('color', 'red'); 
```

[小提琴](http://jsfiddle.net/7S5nc/)

或者只是创建一个表达式来清除 #foo 之外的任何内容，因为这可能是您所追求的，否则只针对该类就可以了

```
$.extend($.expr[":"], {  
    foo: function(elem){  
         return $(elem).closest('#foo').length;  
    }  
}); 
```

并做：

```
$('.bar:foo').css('color', 'red'); 
```

[小提琴](http://jsfiddle.net/7S5nc/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T18:42:32.173

我想你正在寻找

`Child Selector (“parent > child”)`

选择由“父”指定的元素的“子”指定的所有直接子元素

或者

`:first-child Selector`

它选择作为其父元素的第一个子元素的所有元素。

# java - 滑入（越过）活动

> ID：11171959
> 
> 赞同：3
> 
> 时间：2012-06-23T18:29:45.410
> 
> 标签：java, android

目前我正在尝试在我的应用程序中实现一些我真的不知道从哪里开始的东西。看看这个小图：

![在此处输入图像描述](../Images/f81612ddc44a3f68051ecfb07cf54a20.png)

您可以在 Play 商店中找到该应用程序：https: [//play.google.com/store/apps/details?id=com.imano.euro2012.row](https://play.google.com/store/apps/details?id=com.imano.euro2012.row)

在我的应用程序中，我有一个列表视图，当我点击一个项目时，我想将黑色活动滑入大约 3/4。在那个活动中，我想要一些 llistview 项目特定的选项。

有谁知道如何解决这个问题？

**解决方案：**

感谢 Imran-Khan，我得到了它的工作。但我认为这段代码并不完美。我不确定 showPopup() 方法前半部分的宽高计算是否正确。在我的解决方案中，弹出窗口在底部和右侧有一点边距。我现在不知道为什么会这样。也许有人可以帮助...

这是我到目前为止所做的：

首先，我将方法 showpopup(long selectedItem) 添加到我的列表视图中：

```
lv_timer.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parentView, View childView, int position, long id) {
            showPopup(id);
        }
}); 
```

和方法本身：

```
private void showPopup(long selectedItem) {
    Display display = getWindowManager().getDefaultDisplay();
    Point size = new Point();
    display.getSize(size);
    int width = size.x;
    int height = size.y;

    int popupWidth = (width / 4) * 3;
    int popupHeight = height;

    LinearLayout viewGroup = (LinearLayout) findViewById(R.id.ll_timer_prop);
    LayoutInflater layoutInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View layout = layoutInflater.inflate(R.layout.timer_properties, viewGroup);

    final PopupWindow popup = new PopupWindow(this);
    popup.setContentView(layout);
    popup.setWidth(popupWidth);
    popup.setHeight(popupHeight);
    popup.setFocusable(true);

    popup.showAtLocation(layout, Gravity.NO_GRAVITY, width - (width / 4 * 3), 0);

    TextView tv_item = (TextView) layout.findViewById(R.id.tv_item);
    tv_item.setText("Clicked Item ID: " + selectedItem);
} 
```

这对我来说很好。

对于部分幻灯片，我发现了这个线程：[PopupWindow 动画不起作用](https://stackoverflow.com/questions/7438290/popupwindow-animation-not-working)

我添加了

```
popup.setAnimationStyle(R.style.AnimationPopup); 
```

在调用 showAtLocation() 之前，创建了一个 res/anim 目录并在其中创建了两个 XML 文件：popup_show.xml 和 popup_hide.xml

popup_show.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">

    <scale
        android:fromXScale="0.0" android:toXScale="1.0"
        android:fromYScale="1.0" android:toYScale="1.0"
        android:pivotX="100%" android:pivotY="0%"
        android:duration="@android:integer/config_shortAnimTime"
        />
    <alpha
        android:interpolator="@android:anim/decelerate_interpolator"
        android:fromAlpha="0.0" android:toAlpha="1.0"
        android:duration="@android:integer/config_shortAnimTime"
        />

</set> 
```

popup_hide.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">

    <scale
        android:fromXScale="1.0" android:toXScale="0.0"
        android:fromYScale="1.0" android:toYScale="1.0"
        android:pivotX="100%" android:pivotY="0%"
        android:duration="@android:integer/config_shortAnimTime"
        />
    <alpha
        android:interpolator="@android:anim/decelerate_interpolator"
        android:fromAlpha="1.0" android:toAlpha="0.0"
        android:duration="@android:integer/config_shortAnimTime"
        />

</set> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T19:11:38.813

[您可以使用自定义PopupWindow](http://developer.android.com/reference/android/widget/PopupWindow.html)创建此视图

请参阅本教程以创建自定义 PopupWindow

[如何在 Android 中创建弹出窗口](http://androidresearch.wordpress.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T18:56:33.230

您可以将[QuickAction](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)用于此类行为，如第三个屏幕上所示

**编辑** 对不起，我没有注意你想要从右到左滑动的效果，但我认为你可以尝试在 Android API 中自定义 slidindrawer 以从右到左滑动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T19:23:42.207

有趣的是，我现在实际上正在研究同样的问题。

我找到了这个话题： [Android Facebook style slide](https://stackoverflow.com/questions/8657894/android-facebook-style-slide)

里面有一些很好的例子。

# php - 在 redis 中存储 Symfony2 会话

> ID：11171963
> 
> 赞同：3
> 
> 时间：2012-06-23T18:30:11.063
> 
> 标签：php, symfony, redis

我想将用户会话存储在 Redis 中，以使它们可用于 Symfony2 和 node.js。

Symfony2 支持 MySQL 和 PostgreSQL 作为会话存储，但我想使用 Redis。

我发现这个新的拉取请求已经实现了`RedisSessionHandler`： [https ://github.com/Baachi/symfony/blob/redis-session-storage/src/Symfony/Component/HttpFoundation/Session/Storage/Handler/RedisSessionHandler.php](https://github.com/Baachi/symfony/blob/redis-session-storage/src/Symfony/Component/HttpFoundation/Session/Storage/Handler/RedisSessionHandler.php)

我只是没有发现任何关于它是否可以安全使用的信息。有人有一些信息还是已经有一些其他的修复（可能是捆绑包）可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T20:50:30.973

> 还是已经有其他可用的修复程序（可能是捆绑包）？

Linked`RedisSessionHandler`需要[phpredis](https://github.com/nicolasff/phpredis)扩展，可以配置为 php.ini 中的会话处理程序（会话将与 keys 一起存储`$key = 'PHPREDIS_SESSION:'.$hash;`）

# cocoa - 获取 NSTextField 完成的索引

> ID：11171964
> 
> 赞同：0
> 
> 时间：2012-06-23T18:30:29.953
> 
> 标签：cocoa, nstextfield, nstextview

我有一个 NSTextField UI 元素，用户可以在其中输入文本字段，我想在文本字段下方下拉一个完成列表作为“实时搜索”。

我希望使用本机文本完成基础设施，但是当用户选择适当的完成时，我不想仅仅将文本放入 NSTextField。用户实际上是通过搜索对象的字符串属性来选择 NSArray 中的许多自定义对象之一。当他们选择时，我需要知道他们选择了哪个对象。

有没有办法知道所选完成的索引（以便我可以从数组中的索引中获取对象）？

或者我是否需要忘记使用本机文本完成，而只是在文本字段下填充并显示一个下拉列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:53:14.550

你能在这种情况下使用[NSComboBox吗？](http://developer.apple.com/library/mac/#documentation/cocoa/Reference/ApplicationKit/Classes/NSComboBox_Class/Reference/Reference.html#//apple_ref/occ/cl/NSComboBox)也许是 NSComboBoxCell 的子类来覆盖

```
- (NSString *)completedString:(NSString *)substring 
```

您还可以观察[NSComboBox 委托协议](http://developer.apple.com/library/mac/#documentation/cocoa/reference/NSComboBoxDelegate_Protocol/Reference/Reference.html)中的更改以检测所选项目的更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T22:33:04.883

最后，我使用了 NSTokenField，因为 NSTokenField 为我添加了一些 UI 外观。但我认为我想出的额外技巧（如下）也可能适用于 NSTextField。抱歉，这有点令人费解。

简而言之，我所做的是生成一个 NSMutableDictionary（一个 iVar），其中键是 NSTokenField 中部分字符串的完整完成，对象是完成字符串表示的自定义对象。换句话说，当我生成自定义完成字符串并将它们放入要从 NSTokenFieldDelegate 方法返回的 NSArray 中`tokenField:completionsForSubstring:indexOfToken:indexOfSelectedItem:`时，我同时将这些完成中的每一个和它们表示的对象填充到 NSMutableDictionary 中，并以完成作为键和对象作为价值。

当用户“标记”完成时（通过点击 Return 或 Tab ——我修改了标记字符集，这就是标记的全部内容），调用 NSTokenFieldDelegate 方法`tokenField:representedObjectForEditingString:`。在那里，我可以通过使用 editingString 参数作为键从 NSMutableDictionary 获取我的对象：`[dict objectForKey:editingString]`

我认为在 NSTextFieldDelegate 方法中进行一些争论可能会`controlTextDidChange:`使用字典技巧在 NSTextField 而不是 NSTokenField 上完成同样的事情，但为了做到这一点，我认为你必须有完整的完成在 NSTextField 中，获取它的 stringValue，然后将其用作键。就我而言，我不希望文本字段中的整个完成，因此 NSTokenField 的标记化对我来说效果更好。

# objective-c - 在 iOS 中录制 16bps 的波形文件

> ID：11171966
> 
> 赞同：1
> 
> 时间：2012-06-23T18:30:48.943
> 
> 标签：objective-c, ios, avfoundation, flac

我正在尝试录制一个波形文件，然后在 iOS 中将此文件转换为 flac。但是，libflac 库总是给我以下错误：

> 无效/不受支持的 WAVE 文件，仅允许规范形式的 16bps 立体声 WAVE

如何使用这种属性记录文件？这些是我目前正在使用的属性：

```
AVFormatIDKey = kAudioFormatLinearPCM
AVSampleRateKey = 16000
AVNumberOfChannelsKey = 2
AVLinearPCMBitDepthKey = 16
AVLinearPCMIsBigEndianKey = NO
AVLinearPCMIsFloatKey = NO 
```

为了使用 libflac，我应该如何更改这些属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:26:02.210

事实证明，设置毕竟是正确的。问题出在 wav 文件格式和 libflac 上。Apple 创建的格式与已知波形格式略有不同。这就是我的案例中出现问题的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T23:40:01.793

Apple 的波形格式的标题略有不同。查看 Jason Hurt 将 Apple 的 wave 转换为 FLAC 的代码：[https](https://github.com/jhurt/wav_to_flac) ://github.com/jhurt/wav_to_flac 。

# c++ - 使用 Qt 创建器时出现 C2440 错误，但使用 VS2010 Express 代码运行良好

> ID：11171967
> 
> 赞同：0
> 
> 时间：2012-06-23T18:30:57.833
> 
> 标签：c++, visual-studio-2010, qt

我在 VS2010 c++ 的命令行项目中有这些代码行。

```
 TCHAR          name[30];
        LPTSTR         pname=&name[0];
        std::wstring   OutNumber;
        pname = &name[0];
        GetWindowText(hGameNumber,pname,30); 
```

工作正常没有问题。不，我在使用 Qt Creator 的 Qt 小部件基础应用程序中使用相同的行。编译时出现错误：

“错误：C2440：'initializing'：无法从 'TCHAR *' 转换为 'LPTSTR' 指向的类型不相关；转换需要 reinterpret_cast、C 样式转换或函数样式转换”

感谢您的帮助，隆皮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:36:58.493

铸造，如 `LPTSTR pname = reinterpret_cast<LPTSTR>(&name[0]);`

一切都会好起来的。`pname = &name[0];`还要删除创建 std::wstring 对象后立即读取的行 。

# php - Mysql insert if not exists without unique constraint（不想依赖回滚错误）（PHP + PDO）

> ID：11171973
> 
> 赞同：1
> 
> 时间：2012-06-23T18:32:40.890
> 
> 标签：php, mysql, insert, pdo, unique

我正在制作一个注册页面。我担心两个用户同时使用相同的用户名注册的并发问题（知道这非常罕见，但讨厌代码中有小缺陷）。

所以我的方法是，检查用户名是否存在，如果不存在，插入一个新行。我正在使用 PDO

**我试过的**

我正在使用事务，但从我的问题来看[，PHP PDO 的事务究竟如何与并发一起工作？](https://stackoverflow.com/questions/11132696/how-exactly-do-transactions-with-php-pdo-work-with-concurrency)看来两个事务可以同时读取

*   我不认为我可以使用`select...for update`，因为我没有更新；事实上，我需要锁定一个“虚构”行，如果它不存在，将添加一个新条目
*   我试过谷歌搜索一些例子，但他们似乎没有处理上面提到的并发问题[http://php.about.com/od/finishedphp1/ss/php_login_code_2.htm](http://php.about.com/od/finishedphp1/ss/php_login_code_2.htm)

**解决方案？**

我已经用谷歌搜索并`UNIQUE`在用户名字段上添加了一个约束，但不想依赖 MySQL 错误来回滚事务。我不是专家，但它对我来说并不优雅。**那么有没有办法`insert if not exists`使用纯MySQL？**

现在，如果这真的是要走的路，我有几个问题。**如果抛出警告，是否会停止查询？**就像它会抛出此处示例中所示的异常[PHP + MySQL 事务示例](https://stackoverflow.com/questions/2708237/php-mysql-transactions-examples)？还是只有彻头彻尾的错误会引发异常？

另外，这里似乎暗示[我可以使用 PHP 检测和处理 MySQL 警告吗？](https://stackoverflow.com/questions/47589/can-i-detect-and-handle-mysql-warnings-with-php)警告会以某种方式出现在 PHP 输出中，但我从来没有遇到过“可见的 MySQL 错误”。问题不是在我的代码中使用 PDO，但我只是想知道。**MySQL 错误和警告是否会生成 html 输出？还是只有在我打电话时才说些什么`errorInfo()`？**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T18:54:16.233

> 那么，如果纯 MySQL 不存在，有没有办法插入？

最好的方法通常被认为是依赖于 UNIQUE 约束。不过还有其他[选择](https://stackoverflow.com/questions/1361340/how-to-insert-if-not-exists-in-mysql)。

> 如果抛出警告，是否会停止查询？

不一定，但在您的特定情况下，尝试插入具有 UNIQUE 约束的副本无论如何都不会通过。

> MySQL 错误和警告是否会生成 html 输出？

不，不是自动的，你必须自己处理。如果操作抛出异常并且您设置了异常处理程序，它自然会触发该异常，但也可以对其进行处理。

无论如何，严格来说，尝试在其中一个字段重复且具有 UNIQUE 约束的表中插入条目将永远不会成功，无论错误如何。然后由您决定如何处理错误，但是 PDO 在这些情况下会特别抛出异常，因此它可以很简单：

```
try {
    //Insert user here

} catch(Exception $e) {
    if(($PDO->errorCode() == 23000) || ($PDOStatement->errorCode() == 23000)) {
        //Duplicate, show friendly error to the user and whatnot
    }
} 
```

我在这里使用了 SQLSTATE 错误代码 23000，因为它是最常见的重复项，但是您几乎可以检查任何内容，[这里](http://dev.mysql.com/doc/refman/5.1/en/error-messages-server.html)是 mysql 的服务器错误代码列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T18:55:31.857

**更新**

> 如果我有两个唯一字段，并且不想让任何一个为空（因为我知道我可以将一个表设置为“可空”并有两个查询），有没有办法检查哪一个搞砸了？就像我想让用户知道是否使用了用户名或电子邮件。如果我做一次插入，我不知道哪个失败了
> 
> 此外，如果我有两个语句（首先插入用户名，检查是否失败，然后对电子邮件尝试相同），我一次只能检测到一个错误；如果用户名失败并回滚，我不能尝试对电子邮件做同样的事情（这将是多余的，因为即使电子邮件存在我也必须检查第一个查询是否失败）编辑：认为它可以如果我使用嵌套的 try...catch 语句，则工作

我想你想多了。您可以为每个错误向用户显示不同的错误，但实际上一次只能检测一个错误，因为 mysql 只会在遇到第一个问题时给您一个错误消息。假设前面的查询（一次插入所有值）：

```
try {
  $stmt = $db->prepare($sql);
  $stmt->execute(array(
    ':username' => $username,
    ':email' => $email,
    ':password' => $password
  ));

  $db->commit();
} catch (PDOException $e) {
  $db->rollBack();
  if($e->getCode() == 23000) {

    // lets parse the message

   if(false !== strpos('email', $e->getMessage())) {
       echo 'Email "'.  $email . '" already exists';
    } else if(false !== strpos('username', $e->getMessage()) {
       echo 'Username "'. $username .'" taken';
    }

  } else {
     // not a dupe key rethrow error
     throw $e;
  }
} 
```

现在的问题是错误消息看起来像：

`Duplicate entry 'THE_VALUE_YOU_TRIED_TO_INSERT' for key THE_KEY_NAME`

获得更有意义的报告的方法是在创建表时用有意义的东西命名索引，例如：

```
CREATE TABLE the_table (
   `id` integer UNSIGNED NOT NULL AUTO_INCREMENT
   `username` varchar(30),
   `email` varchar(100),
   `password` varchar(32),
   PRIMARY KEY (`id`),
   UNIQUE KEY `uk_email` (`email`),
   UNIQUE KEY `uk_username` (`username`)
); 
```

所以现在您的错误消息将如下所示：

`Duplicate entry 'THE_VALUE_YOU_TRIED_TO_INSERT' for key uk_username`

或者

`Duplicate entry 'THE_VALUE_YOU_TRIED_TO_INSERT' for key uk_email`

这很容易解析。

这样做的唯一真正替代方法是在插入之前对表进行选择，以确保值不存在。

* * *

如果您使用 PDO，您不应该有 PHP 警告...只是异常，如果未捕获将生成标准 php 错误。如果您已`display_errors`关闭，则不会输出到屏幕，只会输出到错误日志。

我认为没有办法`insert if not exists`让您重新使用唯一键然后捕获异常：

```
$db = new PDO($dsn, $user, $pass);
$sql = "INSERT INTO the_table (username, email, etc) VALUES (:username,:email,:password)";

$db->beginTransaction();
try {
  $stmt = $db->prepare($sql);
  $stmt->execute(array(
    ':username' => $username,
    ':email' => $email,
    ':password' => $password
  ));

  $db->commit();
} catch (PDOException $e) {
  $db->rollBack();
  if($e->getCode() == 23000) {
    // do something to notify username is taken
  } else {
     // not a dupe key rethrow error
     throw $e;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T18:55:57.960

确保没有重复项的最佳方法是`UNIQUE`在用户名字段上使用约束。MySQL 绝对不会插入具有相同值的第二行，因此您不再需要事务。

我不知道为什么这个解决方案看起来不优雅，但在我看来，这是一个非常好的做法，可以大大简化你的工作。如果这是对数据的约束，那么让数据库服务器为您处理该问题是有意义的。

如果您在事务中执行插入查询，如果发生错误，将停止执行，服务器将执行回滚。您还将在 PHP 中得到需要处理的错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T19:24:42.870

让数据库来处理这个，因为它在完成这项任务方面处于有利地位。

使用唯一的约束，但做

```
insert ignore into users... 
```

[http://dev.mysql.com/doc/refman/5.5/en/insert.html](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

不会触发错误。您可以检查受影响的行以查看是否插入了行。

# regex - mod_rewrite 正则表达式中的转义句点 (.) 字符

> ID：11171976
> 
> 赞同：5
> 
> 时间：2012-06-23T18:32:57.023
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我目前有一个使用此规则设置的 .htaccess 文件：

`RewriteRule ^([a-zA-Z0-9_-]+)$ user\.php?user=$1 [L]`

按预期工作： **mysite.com/joe**变为**mysite.com/user.php?user=joe**

如何更改正则表达式以在可能的用户名中包含句点？

例如，我希望 **mysite.com/joe.bloggs**转到**mysite.com/user=joe.bloggs**

目前这会导致 404 缺失页面错误。

我试过`^([a-zA-Z0-9\._-]+)$ user\.php?user=$1 [L]` 但这会产生内部错误 500（我认为这是由于无限循环：如果未指定用户，user.php 旨在重定向到主页。）

我对这一切都很陌生（尤其是正则表达式）。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T18:37:40.413

`.`在字符类中没有特殊含义，因此无需对其进行转义。

如果这没有帮助，请尝试`die("Test")`在`user.php`. 这将允许您查看错误是来自重写还是来自 PHP 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T18:48:58.377

首先检查请求的 URL 是否不是文件或文件夹。这将防止 URL 的重定向循环，例如`/user.php`

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9_-.]+)$ user.php?user=$1 [L,QSA] 
```

# css - 带有 em 的文本区域在 IE 和 Opera 中不起作用

> ID：11171977
> 
> 赞同：2
> 
> 时间：2012-06-23T18:32:56.993
> 
> 标签：css, textarea, em

这是我第一次尝试在“em”测量中制作完整的网页布局。我正在构建一个实时预览降价编辑器。

此页面在 Firefox 和 chrome 中完美运行，但在 IE（我有 IE9）和 Opera（昨晚更新）中，文本区域明显超出了边界。在 Opera 中，textarea 的边框也没有显示圆角。（文本区域显示圆角但不显示其边框）

这是 textarea 的 css

```
#pad {
    background-color:#BBBB99;
    background-image:url("../img/edit.png");
    border-color:rgba(32, 32, 52, 0.39);
    border-radius:1em 1em 1em 1em;
    font-size:1.3em;
    height:33.3em;
    margin:0.3em;
    outline:medium none;
    padding:0.9em 0.7em;
    resize:none;
    width:26em;
    text-align: left;

} 
```

这是html片段

```
<div class='container'>
  <div id='left'>
    <textarea id = 'pad' wrap="on" ></textarea>
  </div>

  <div id='right'>
    <div id='preview'></div>
  </div>
</div> 
```

我在正文中设置了“字体：100%”。 [如果您需要检查它，这是演示的链接。](http://editortest.comule.com/editor_02.php)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T20:05:53.253

我认为问题是由`#pad`.

当您设置基本字体大小时，例如 18px，则所有子元素都`1em`视为`18px`. 但是，如果您将其中一个子元素的字体大小更改为 1.2em，则嵌套在该子元素中的所有子元素将开始`1em`视为`22px`：

```
body {
    font-size: 18px;
}

.parent {
    font-size: 1em;   /* 18px */
}

.child {
    font-size: 1.2em  /* 22px */
}

.child > .child {
    font-size: 1em;   /* 22px */
} 
```

我认为在 Internet Explorer 中发生的事情是在计算of`1.2em`之前将字体大小更改为。因此，Firefox 和 Chrome 中的宽度与 IE 中的宽度相同。`width``#pad``26 * 18px``26 * 22px`

为了解决这个问题，我将宽度设置为百分比而不是固定`em`测量值。

**编辑**

关于Opera的圆角问题；似乎 Opera 对既未设置也未设置的事实并不`border-width`友好`border-style`。

尝试更改`border-color`为`border: 1px solid rgba(32, 32, 52, 0.39);`，看看是否可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T18:36:22.170

对于特殊的 css3 功能，为每个浏览器使用供应商前缀：
而不是`border-radius:1em 1em 1em 1em;`使用：

```
-webkit-border-radius:1em;
-moz-border-radius:1em;
-o-border-radius:1em;
-ms-border-radius:1em;
border-radius:1em; 
```

# iphone - 从 AppDelegate 将托管对象上下文传递给视图控制器

> ID：11171980
> 
> 赞同：1
> 
> 时间：2012-06-23T18:33:32.567
> 
> 标签：iphone, ios, ios5

我想我在这里有一些简单的错误。我正在尝试将 AppDelegate 的 managedObjectContext 传递给两个视图控制器。就这个学习演示而言，两个 ViewController 是紧挨着的。（在我的真实应用中，它们会相距很远。）

![在此处输入图像描述](../Images/d68012a81aef6c5b744276f4ab5de24f.png)

这有效：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;

    Page1ViewController * page1VC = [[navigationController viewControllers] objectAtIndex:0];
    page1VC.managedObjectContext = self.managedObjectContext;

    return YES;
} 
```

但是当我添加第二个视图控制器 - objectAtIndex:1 时，它不会：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;

    Page1ViewController * page1VC = [[navigationController viewControllers] objectAtIndex:0];
    page1VC.managedObjectContext = self.managedObjectContext;

    Page2ViewController *page2VC = [[navigationController viewControllers] objectAtIndex:1];
    page2VC.managedObjectContext = self.managedObjectContext;

    return YES;
} 
```

我收到此错误：

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 1 beyond bounds [0 .. 0]' 
```

我敢肯定它接近正确！？如果有人可以提供帮助将不胜感激。（顺便说一句，我也将使用 segues 来传递 managedObjectContext！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T18:39:46.617

导航控制器在实例化时不会实例化其导航树中的所有视图控制器；但只有当它们实际上即将出现在屏幕上时。这对于内存管理来说是一件非常好的事情。

正如您所提到的，您可以轻松地使用 prepareForSegue 来传递 MOC。我广泛使用的另一种解决方案是创建一个帮助类来为您管理 MOC 实例，您可以在任何地方使用它。它管理创建自定义上下文，还处理线程安全（永远不要在没有创建它的线程上使用 MOC！如果你只是自由地传递一个 MOC，你可能会遇到这个问题）

# iphone - 为什么调用 insertRowsAtIndexPaths: 为所有行调用 heightForRow？

> ID：11171983
> 
> 赞同：0
> 
> 时间：2012-06-23T18:33:48.880
> 
> 标签：iphone, ios, cocoa-touch, uitableview, uikit

`heightForRowAtIndexPath`当您有很多细胞时，这是一项非常昂贵的操作。就我而言，我有数千个，所以我想我可能会分批分解表格并一次只显示 50 个单元格，并且当用户接近表格视图边界的末尾时，使用`insertRowsAtIndexPaths:`插入 50 多行。但是，每次我插入 50 个新行时，`heightForRowAtIndexPath`都会为表的所有行调用，而不仅仅是我刚刚插入的行。这是预期的行为吗？为什么是这样？我的行高必须用字体计算字符串的高度，因此每次插入新行时计算整个表格的高度是非常低效的。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T19:57:02.233

我同意@Anne。之所以需要调用它，是因为表中的行位置（只是一个滚动视图）是由其上方行的位置和高度确定的。

@Anne 的处方也非常正确，归结为让 height 方法尽可能快地运行。

但真正的问题是给你的。我认为你应该问的“性能”问题是关于人的表现，翻阅 1000 行。

假设一个拇指轻弹可以滚动 10 行并在一秒钟内执行。那是每千人 1.5 分钟。100 万用户使用您的应用程序每天滚动 5000 行一次，每年将消耗 190 万个工作日，从而按比例减少国家 GDP。

我祝您取得最大的成功，但在分发具有 1000 行 UITableView 行的应用程序之前，请考虑全球经济的不稳定状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T18:39:50.750

> 这是预期的行为吗？为什么是这样？

是的，这使得可以将不同高度的行插入到一个表中。

> 有什么解决方法吗？

如果所有行的高度相同，则在初始化期间仅计算一次高度。
每次`heightForRowAtIndexPath`调用，只需返回缓存的结果。

# python - 我对 Euler 项目 p84 的方法缺少什么？

> ID：11171986
> 
> 赞同：0
> 
> 时间：2012-06-23T18:34:32.903
> 
> 标签：python, algorithm

我正在通过欧拉项目解决我的问题。我已经达到了第[84 题](http://projecteuler.net/problem=84)，并且我创建了一个游戏模拟。我已经根据问题中提供的统计数据运行了模拟，并且得到了正确的序列。当我尝试用 2d4 运行它时，我得到了错误的结果。通常我会得到 101516。我错过了什么？

请注意，我不是在寻找解决方案或让您修复我的代码。我只想知道我的算法哪里有缺陷。

```
from random import randint
import sys

pos = 0
doubles = 0

csqs = [2,17,33] #The cc position
hsqs = [7,22,36] #The ch positions
rounds = 0
stop = 100000
sqs = dict() #will store how many visit I had on each square

for i in range (0,40): #initial values of sqs
    sqs[i] = 0

def doCC():# the cc cards. There is no real effect of randomly picking a card or kipping them in order on my result
    global pos,doubles
    global CC
    if CC == 0: 
         pos = 0
    elif CC == 1: 
         pos = 10
         doubles = 0
    CC += 1
    if CC == 16: CC = 0

def doCH(): #CH cards
    global pos, doubles, CH
    if CH == 0: pos = 0
    elif CH == 1: 
        pos = 10
        doubles = 0
    elif CH == 2: pos = 11
    elif CH == 3: pos = 24
    elif CH == 4: pos = 39
    elif CH == 5: pos = 5
    elif CH == 6 or CH == 7: 
        if pos == 7:
            pos = 15
        elif pos == 22:
            pos = 25
        elif pos == 36:
            pos = 5
    elif CH ==8:
            if pos == 22: pos = 28
            else: pos = 12
    elif CH == 9:
            pos -= 3
    CH += 1
    if CH == 16: CH = 0

while rounds < stop:
    d1 = randint(1,4)
    d2 = randint(1,4)
    if d1 == d2: 
        doubles += 1 #counting doubles
    else:
        doubles = 0
    if doubles == 3:
        pos = 10
        doubles = 0
    pos += d1+d2
    if pos>= 40 : #you have just crossed go
        pos -= 40
        rounds += 1
        if rounds %10000 == 0: print rounds,
    if pos == 30: #g2j
        doubles = 0
        pos = 10
    if pos in hsqs: 
        doCH()
    if pos in csqs: 
        doCC()
    sqs[pos] += 1
    sys.stdout.flush()
# Setting values
m1 = 0
m2 = 0
m3 = 0
v1 = 0
v2 = 0
v3 = 0

su = 0
for v in sqs:
    m = sqs[v]
    su += m
    if m > m1:
        m1 = m
        v1 = v

for v in sqs:
    m = sqs[v]
    if m > m2 and m < m1:
        m2 = m
        v2 = v

for v in sqs:
    m = sqs[v]
    if m > m3 and m < m2:
        m3 = m
        v3 = v

for v in sqs:
    sqs[v] = sqs[v]*100.0/su

print m1,m2,m3
print v1,v2,v3
print m1*100.0/su, m2*100.0/su, m3*100.0/su

print sqs 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T23:20:23.363

当你连续三个双打时，

```
if doubles == 3:
    pos = 10
    doubles = 0
pos += d1+d2 
```

你仍然跳出监狱，但你不应该。

# php - Google Maps API 地理解码器限制

> ID：11171987
> 
> 赞同：3
> 
> 时间：2012-06-23T18:34:34.597
> 
> 标签：php, javascript, google-maps-api-3, geocode, google-geocoder

我已经为公共汽车做了一个旅行计划，我有了一个想法。当有人单击地图以设置标记时，我没有使用 AJAX 从 PHP 页面发出请求，而是使用来自 Google Maps API 的 Javascript 中的地理编码器方法创建了一个脚本。

现在，由于我知道 Google 将每个“IP”每天的请求限制为 2,500，我想知道一些事情。

由于请求是由 Javascript（客户端脚本）直接向 Google 服务器发出的。我的网站将使用 2 500 的限制，因为请求来自我网站上的脚本，或者由于请求来自客户端，我得到的每个客户端（实际上是 IP）将是 2 500 个请求？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:46:35.770

使用的 IP 地址是服务器，而不是客户端。如果您计划每天超过 25,000 个，那么您可以通过 Google 的付费服务进行注册，他们将收取超出限制的任何费用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:51:28.223

您的网站每天可以访问 25,000 个地图加载，因此（例如）如果您有 5,000 个访问者，那么每个访问者可以访问 5 个地图加载，然后您将达到您的限制。

[可在](https://developers.google.com/maps/faq#usagelimits)google maps api 文档中找到。

您对地图加载定义的想法在文档中特别[提到](https://developers.google.com/maps/faq#usage_mapload)：

> 在以下情况下会发生单个地图加载：
> 
> 由网页或应用程序加载时使用 Maps JavaScript API（V2 或 V3）显示地图；

因此，使用了服务器的 IP 地址。

# c# - 更多控制器但更少操作或更少控制器但更多操作

> ID：11171988
> 
> 赞同：6
> 
> 时间：2012-06-23T18:34:48.293
> 
> 标签：c#, asp.net-mvc, controller, asp.net-mvc-4

是什么让您决定创建一个新控制器而不是向现有控制器添加更多操作？你在哪里画线，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T18:40:10.677

应该确定何时创建新控制器的主要因素是它们执行的逻辑/功能。您需要确保*[将关注点分开](http://en.wikipedia.org/wiki/Separation_of_concerns)*：

```
public class ProfileController {  }

public class MainController {  }

public class AccountController {  }

public class ShoppingCartController {  } 
```

前面的每个控制器都用于协调它们对应的域服务/模型和它们的视图之间的通信。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-23T18:40:23.973

当然没有*涉及*的是动作的数量¹ - 至少在“哦，我在这个控制器中超过 50 个动作，让我们开始另一个”的意义上。

准则² 应该是：控制器是操作相同类型对象的操作的逻辑组（相同类型的*模型*可能是更好的定义）。如果碰巧你有一个功能如此丰富的模型，可以在它上面执行 30 个单独的操作，请继续将它们放在同一个控制器中。

另一方面：如果您有简单的模型，并且您发现自己编写的控制器每个都只有几个动作，那应该是对应用程序的可维护性感觉良好的理由，而不是担心的理由。

* * *

笔记：

¹ 当然，具有这么多操作的控制器是可能滥用代码的危险信号，因此*应该*考虑这个数字——而不是作为某种硬性规则。

² 它实际上是一个指导方针——这里的目的是建立一个可维护的系统，而不是遵循一些宗教经文。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T18:40:22.357

作为一般的经验法则，我尽可能简单地保持所有操作，如果它们变得很大或太多，那么我会看看我是否可以创建辅助函数。

如有必要，我每个数据库实体都有一个控制器。

因此，例如，我将有一个用户控制器、一个购物车控制器、一个项目控制器等。

我不认为有任何具体的规则。它只是保持一切合乎逻辑。如果它对你来说是合乎逻辑的，那么这通常是最重要的，除非你在一个团队中，那么它对每个人都必须是合乎逻辑的。

希望这可以帮助。

# ruby-on-rails - 使用具有不同语言环境 url 的 sitemap_generator

> ID：11171989
> 
> 赞同：2
> 
> 时间：2012-06-23T18:35:02.957
> 
> 标签：ruby-on-rails, rubygems, sitemap

我有一个用 Rails 编码的多语言网站。我使用 gem sitemap_generator 来生成站点地图。问题是我只为一次语言生成 url。我使用参数 [:locale] 更改站点的默认语言。

这是我的站点地图.rb

```
SitemapGenerator::Sitemap.default_host = "http://www.dominio.com"

SitemapGenerator::Sitemap.create do
     Product.find_each do |product|
       add url_for(:controller => 'products', :action => 'show', :id => product, :host => '', :only_path => true), :lastmod => product.updated_at
     end
end 
```

如何为 en、es 和它的语言环境生成 url？使用此代码，它仅生成默认语言环境 (en)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T20:08:48.187

```
[:en, :es].each do |locale|
  Product.find_each do |product|
    add url_for(:controller => 'products', :action => 'show', :id => product, :host => '', :only_path => true, :locale => locale), :lastmod => product.updated_at
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-07T07:18:18.913

我建议在产品模型中存储区域设置字段，例如 :locale (string)，然后您可以添加 where 条件。

像这样：

```
[:en, :es].each do |locale|
    Product.where(locale: locale).find_each do |product|
        #do something
    end
end 
```

# apache - 用于高流量站点的 Nginx v Apache

> ID：11171992
> 
> 赞同：4
> 
> 时间：2012-06-23T18:35:20.907
> 
> 标签：apache, nginx

`nginx`作为高流量网站的网络服务器会是更合适的选择吗？

我们将建立的网站是一个电子商务网站，如果这会有所作为的话。

无论哪种方式，从技术角度来看，我都对实际的“为什么”很感兴趣。即，`nginx`从技术角度来看，为什么这种类型的网站会是一个更好的选择，或者相反，为什么它不会呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-24T00:31:16.983

马丁，

一般来说，Nginx 更适合高流量站点，因为它的事件驱动架构。它不是在不同的线程中处理每个请求，而是使用非阻塞 I/O 来为每个线程中的许多请求提供服务。

这种架构的重要方面是减少了进程或线程的使用。一个线程可以消耗从 2MB 到超过 64MB 的 RAM。因此，当 Apache 提供 10KB JPEG 时，它实际上可能会使用大量 RAM。如果您的客户端速度较慢（例如智能手机），请求可能会使线程忙几秒钟，情况会变得更糟。

许多人发现在 Apache 之前运行 Nginx 作为代理是一个理想的中间地带。Nginx 与慢速客户端对话，并且可以使用非常少量的 RAM 来完成。当请求转发到 Apache 时，请求速度受限于您的本地连接，而不是远程用户的连接。这意味着网络瓶颈不会使请求（以及它的内存占用线程）保持活动的时间超过必要的时间。

简而言之，您可以获得 Nginx 的低资源优势以及 Apache 的广泛功能集。

# nhibernate - QueryOver 语句，用于以 DateTime 降序选择 N 行

> ID：11171994
> 
> 赞同：9
> 
> 时间：2012-06-23T18:35:26.820
> 
> 标签：nhibernate, linq-to-nhibernate, nhibernate-criteria, queryover

我正在尝试编写 QueryOver 语句以按时间降序选择 N 行。

```
session.QueryOver<T>().Take(10).OrderBy(x=>x.DateInserted); 
```

不幸的是，这根本不起作用。有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-23T19:39:19.933

您尚未指定要在查询中升序还是降序，因此请尝试这样做：

```
session.QueryOver<MyClass>()
       .OrderBy(x => x.DateInserted).Desc
       .Take(10).List(); 
```

最后，您必须调用**List**来获取包含结果的集合，并且不要忘记将泛型类型**T**替换为您的类名。

# jquery - jQuery切换水平动画

> ID：11171996
> 
> 赞同：2
> 
> 时间：2012-06-23T18:35:53.690
> 
> 标签：jquery, jquery-animate

我是新来的，所以我希望我做对了。

我目前正在开发一个简单的 jQuery 功能，其中我有不同的选项卡可以水平打开。问题是我在切换它时遇到了问题。

我使用一个称为可见的变量；这取决于元素的状态是真还是假。这适用于一个元素，但如果我想打开两个元素，我必须双击以首先将值设为 false，然后它才会运行。

你们中的任何人都可以为此提供更好的解决方案吗？

```
 <script type="text/javascript"> 
    var visible=0;
    function getClickedId(clicked_id) {
        var selectedId = clicked_id;
        $(document).ready(function () {

            if (visible ==0) {
                  $('[name='+selectedId+']').animate({width: 300}, "slow");
                  $('#Wrapper'+selectedId).animate({width: 325}, "slow");
                   visible=1;
            } else {
                  $('[name='+selectedId+']').animate({width: 0}, "slow");
                  $('#Wrapper'+selectedId).animate({width: 25}, "slow");
                  visible=0;
            }
        });
    }
    </script> 
```

（对不起，如果我的代码嵌入不正确）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:38:20.397

尝试：

```
<script type="text/javascript"> 
var visible=0;
function getClickedId(clicked_id) {
    var selectedId = clicked_id;
    if (visible == 0) {
          $('[name='+selectedId+']').animate({width: 300}, "slow");
          $('#Wrapper'+selectedId).animate({width: 325}, "slow");
          visible=1;
    } else {
          $('[name='+selectedId+']').animate({width: 0}, "slow");
          $('#Wrapper'+selectedId).animate({width: 25}, "slow");
          visible=0;
    }
 }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T18:50:59.243

```
$(document).ready(function () {
    var visible=true;
    function getClickedId(clicked_id) {   
        $('[name="'+clicked_id+'"]').animate({width: visible ? 300 : 0}, "slow");
        $('#Wrapper'+clicked_id).animate({width: visible ? 325 : 25}, "slow");
        visible=!visible;
    }
}); 
```

[小提琴](http://jsfiddle.net/vHJj7/) ​</p>