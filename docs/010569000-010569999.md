# StackOverflow 问答 10569000-10569999

# objective-c - 如何显示 UIActionSheet 以确认在导航视图中返回

> ID：10569000
> 
> 赞同：0
> 
> 时间：2012-05-13T03:00:45.740
> 
> 标签：objective-c, xcode, navigation, uiactionsheet

使用 Xcode 我有导航到视图 B 的视图 A。

按下返回 UIBarButtonItem 后，我正在尝试向用户展示 UIActionSheet 以确认导航以返回视图 A。

我需要在代码中做什么来阻止视图向后导航，然后（取决于用户输入）向后移动或停留在当前屏幕上？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T03:16:32.280

以编程方式添加后退按钮。

例如。

```
UIButton *backBtn= [[UIButton alloc] initWithFrame:CGRectMake(0,0,54,30)];
 [backBtn addTarget:self action:@selector(backButtonPressed:)forControlEvents:UIControlEventTouchUpInside];
 UIBarButtonItem *backBarButton = [[UIBarButtonItem alloc] initWithCustomView:backBtn];   
[backBtn release];
 [[self navigationItem] setLeftBarButtonItem:backBarButton];
 [backBarButton release];

  //backButtonPressed is the selector for backBtn 
```

然后从该选择器中向您展示 ActionSheet，并根据用户导航到上一个 viewController 或不导航到前一个 viewController。

要导航到上一页，请使用 popViewMethod。

`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T04:54:55.713

您不应该为所有其他操作呈现 UIActionSheet。为此目的使用 UIAlertView 会更好。根据 Apple UIActionsheet 指南：-

提供完成任务的替代方法。操作表允许您提供一系列在当前任务的上下文中有意义的选择，而无需在用户界面中永久放置这些选择。

在完成潜在危险任务之前获得确认。操作表会提示用户考虑他们将要采取的步骤的潜在危险影响，并为他们提供一些替代方案。这种类型的通信在基于 iOS 的设备上尤为重要，因为有时用户会无意中点击控件。

对于 UIAlertView ：-

```
UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Alert View"
                                                            message:@"Do You want to go back to previous screen?"
                                                            delegate:self
                                               cancelButtonTitle:@"NO"
                                               otherButtonTitles:@"YES",nil];
[alertView show];
[alertView release];

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0) {
        NSLog(@"THE 'NO' BUTTON WAS PRESSED");
    }
    if (buttonIndex == 1) {
        NSLog(@"THE 'YES' BUTTON WAS PRESSED");
    }
} 
```

在 UINavigationController 的后退按钮的动作上实现这一点。根据按下的按钮“YES”或“NO”，您可以允许导航。也符合 UIAlerrtVIewDelegate 协议。

# python - 如何监视目录以进行文件修改

> ID：10569002
> 
> 赞同：3
> 
> 时间：2012-05-13T03:01:05.617
> 
> 标签：python, macos, bash, launchd

我在Mac上。我一直在使用 Launchd 的 WatchPaths 指令来监视目录中的文件更改。我的脚本仅在从监视目录中添加或删除文件时触发。

但是，修改文件时脚本不会触发..

本质上，我正在尝试创建一个 DIY Dropbox 来同步我的站点文件夹。

有没有办法通过launchd、bash或python来做到这一点？

我认为linux有类似inotify的东西，但我不知道mac的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T04:01:27.063

我使用[MacFSEvents](https://github.com/malthe/macfsevents) 包（也[可以在 PyPI 上找到](http://pypi.python.org/pypi/MacFSEvents)）尝试解决这个问题：

```
import os

from fsevents import Observer, Stream

def callback(file_event):
    print file_event.name # the path of the modified file

def main():
    observer = Observer()
    observe_path = os.getcwd() # just for this example
    stream = Stream(callback, observe_path, file_events=True)
    observer.start()
    observer.schedule(stream)

if __name__ == '__main__':
    main() 
```

这将`callback`在任何时候创建、修改或删除文件时调用（您可以使用 的值检查发生了哪个事件`file_event.mask`）。

请注意，您可能希望在主线程之外的线程上观察（上面的程序拒绝退出，即使在 上`KeyboardInterrupt`）。有关 API 的更多信息可以在 MacFSEvents README 中找到。希望这可以帮助！

# php - zend 框架 2 + 教义 2 安装

> ID：10569005
> 
> 赞同：1
> 
> 时间：2012-05-13T03:01:52.123
> 
> 标签：php, orm, doctrine-orm, zend-framework2

[Zend 框架 2 + 教义 2](https://stackoverflow.com/questions/7867198/zend-framework-2-doctrine-2)

参考这个问题，我有一个关于安装过程的简单问题。

由于我在 Windows 8 机器上使用 Zend Server CE，而且我没有 GitHub 帐户，因此我不得不手动将 DoctrineModule 和 DoctrineORM Module 下载到供应商文件夹。我的问题是，我还需要下载 Doctrine 库并将其 cd 到供应商文件夹吗？

*编辑

我通过 GIT 安装，我的 php_error.log 中出现此错误

```
[13-May-2012 01:37:22] PHP Fatal error:  Uncaught exception 'ReflectionException' with message 'Class Doctrine\ORM\Mapping\Driver\AnnotationDriver does not exist' in C:\Zend\Apache2\htdocs\zf2\vendor\DoctrineORMModule\Module.php:71
Stack trace:
#0 C:\Zend\Apache2\htdocs\zf2\vendor\DoctrineORMModule\Module.php(71): ReflectionClass->__construct('Doctrine\ORM\Ma...')
#1 [internal function]: DoctrineORMModule\Module->registerAnnotations(Object(Zend\Module\ModuleEvent))
#2 C:\Zend\Apache2\htdocs\zf2\vendor\ZendFramework\library\Zend\EventManager\EventManager.php(463): call_user_func(Array, Object(Zend\Module\ModuleEvent))
#3 C:\Zend\Apache2\htdocs\zf2\vendor\ZendFramework\library\Zend\EventManager\EventManager.php(205): Zend\EventManager\EventManager->triggerListeners('loadModules.pos...', Object(Zend\Module\ModuleEvent), NULL)
#4 C:\Zend\Apache2\htdocs\zf2\vendor\ZendFramework\library\Zend\Module\Manager.php(87): Zend\EventManager\EventManager->trigger('loadModules.pos...', Object(Zend\Module\Manager), Object(Zend\Module\ModuleEvent))
#5 C:\Zend\Apache2 in C:\Zend\Apache2\htdocs\zf2\vendor\DoctrineORMModule\Module.php on line 71 
```

这是 Module.php

```
<?php
/*
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * This software consists of voluntary contributions made by many individuals
 * and is licensed under the LGPL. For more information, see
 * <http://www.doctrine-project.org>.
 */

namespace DoctrineORMModule;

use RuntimeException;
use ReflectionClass;
use Zend\EventManager\Event;
use Zend\Module\Consumer\AutoloaderProvider;
use Zend\Module\Manager;
use Zend\Module\ModuleEvent;
use Zend\Loader\StandardAutoloader;
use Doctrine\Common\Annotations\AnnotationRegistry;

/**
 * Base module for Doctrine ORM.
 *
 * @license http://www.opensource.org/licenses/lgpl-license.php LGPL
 * @link    www.doctrine-project.org
 * @since   1.0
 * @version $Revision$
 * @author  Kyle Spraggs <theman@spiffyjr.me>
 * @author  Marco Pivetta <ocramius@gmail.com>
 */
class Module implements AutoloaderProvider
{
    /**
     * @param Manager $moduleManager
     */
    public function init(Manager $moduleManager)
    {
        $moduleManager->events()->attach('loadModules.post', array($this, 'registerAnnotations'));
    }

    /**
     * Registers annotations required for the Doctrine AnnotationReader
     *
     * @param  ModuleEvent $e
     * @throws RuntimeException
     */
    public function registerAnnotations(ModuleEvent $e)
    {
        $config = $e->getConfigListener()->getMergedConfig();
        $config = $config['doctrine_orm_module'];

        if ($config->use_annotations) {
            $annotationsFile = false;

            if (isset($config->annotation_file)) {
                $annotationsFile = realpath($config->annotation_file);
            }

            if (!$annotationsFile) {
                // Trying to load DoctrineAnnotations.php without knowing its location
                $annotationReflection = new ReflectionClass('Doctrine\ORM\Mapping\Driver\AnnotationDriver');
                $annotationsFile = realpath(dirname($annotationReflection->getFileName()) . '/DoctrineAnnotations.php');
            }

            if (!$annotationsFile) {
                throw new RuntimeException('Failed to load annotation mappings, check the "annotation_file" setting');
            }

            AnnotationRegistry::registerFile($annotationsFile);
        }

        if (!class_exists('Doctrine\ORM\Mapping\Entity', true)) {
            throw new RuntimeException('Doctrine could not be autoloaded: ensure it is in the correct path.');
        }
    }

    /**
     * Retrieves configuration that can be consumed by Zend\Loader\AutoloaderFactory
     *
     * @return array
     */
    public function getAutoloaderConfig()
    {
        if (realpath(__DIR__ . '/vendor/doctrine-orm/lib')) {
            return array(
                'Zend\Loader\StandardAutoloader' => array(
                    StandardAutoloader::LOAD_NS => array(
                        __NAMESPACE__                   => __DIR__ . '/src/' . __NAMESPACE__,
                        __NAMESPACE__ . 'Test'          => __DIR__ . '/tests/' . __NAMESPACE__ . 'Test',
                    ),
                ),
            );
        }

        return array();
    }

    /**
     * @return array
     */
    public function getConfig()
    {
        return include __DIR__ . '/config/module.config.php';
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T22:07:24.747

当您从 git 安装时，您是否还更新了子模块？如果没有，请 cd 进入 DoctrineORMModule 目录并使用以下命令：

`git submodule update --init`

顺便说一句，composer install 是推荐的方法。

# jquery - 在资产管道中加载 JS

> ID：10569008
> 
> 赞同：0
> 
> 时间：2012-05-13T03:02:25.963
> 
> 标签：jquery, ruby-on-rails, asset-pipeline, assets

我刚刚更新了我的网站以使用 jQuery 插件`jquery.raty.min.js`

该插件允许用户在完成评论时选择 jQuery 风格的评分星。

[http://www.wbotelhos.com/raty/](http://www.wbotelhos.com/raty/)

在本地主机上一切正常，但是当我部署到“heroku”时，我收到一个错误，甚至无法加载主页！请参阅下面的错误：

```
 ActionView::Template::Error ('twitter/bootstrap/bootstrap.less' wasn't found.
   (in /app/app/assets/stylesheets/bootstrap_and_overrides.css.less)):
6:     <!--[if lt IE 9]>
7:     <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
8:     <![endif]-->    
9:     <%= stylesheet_link_tag "application", media: "all" %>
10:     <%= javascript_include_tag "application" %>
11:     <%= include_gon %>
12:     <%= csrf_meta_tags %>    
app/views/layouts/application.html.erb:9:in `_app_views_layouts_application_html_erb___4184194920936324767_38840920' 
```

在 localhost 上一切正常，无需为 raty 添加 require 行，`//= require jquery.raty.min`但在“heroku”上，插件根本不加载。为了修复它，我添加了 require 行，但随后我开始收到网站上每个页面的上述错误。

编辑：

我的应用程序.js：

```
//= require jquery
//= require jquery-ui
//= require jquery_ujs
//= require twitter/bootstrap
//= require bootstrap-tooltip
//= require bootstrap-popover
//= require dataTables/jquery.dataTables
//= require dataTables/jquery.dataTables.bootstrap
//= require chosen-jquery
//= require_tree . 
```

我将 include 放在哪里似乎并不重要`jquery.raty.min`。它总是打破:)

更新：

我实际上正在使用[https://github.com/seyhunak/twitter-bootstrap-rails](https://github.com/seyhunak/twitter-bootstrap-rails) gem，为了解决这个问题，我需要添加到我的 application.css 中：

```
*= bootstrap_and_overrides.css.less 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T06:27:30.847

你需要在你的应用程序 css 中包含 twitter-bootstrap

```
*= require 'twitter/bootstrap' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T02:45:49.430

添加`*= bootstrap_and_overrides.css.less`我的 application.css 文件并没有解决我在 heroku 上使用 twitter-boostrap-rails gem 时遇到的类似问题。您可能需要在 config/application.rb 文件中设置以下内容：

```
config.assets.initialize_on_precompile = false 
```

我最初是在以下位置找到的： [http ://www.simonecarletti.com/blog/2012/02/heroku-and-rails-3-2-assetprecompile-error/](http://www.simonecarletti.com/blog/2012/02/heroku-and-rails-3-2-assetprecompile-error/)

正如 Abram 建议的那样，我还留`*= bootstrap_and_overrides.css.less`在了我的 application.css 文件中，现在所有作品都将在 Heroku 上进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T01:13:48.420

尝试`bundle exec rake assets:precompile`

[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

# macos - 如何在 mac 上设置 assembla svn 存储库

> ID：10569014
> 
> 赞同：1
> 
> 时间：2012-05-13T03:03:37.413
> 
> 标签：macos, svn, repository, assembla

如何将mac平台上维护的本地仓库导出到assembla SVN

我尝试导出我的存储库，然后将其压缩并将其导入到 assemble 中，每次我都会收到以下错误。

> 错误 - 我们尝试备份的 SVN /mnt/atl-fs8-data1/svn/myproject 中没有 breakout.ini

我还尝试检查给我的网址的工作副本

[https://subversion.assembla.com/svn/mysecretproject/](https://subversion.assembla.com/svn/mysecretproject/)

那也不起作用。

在 Windows 平台上可能很容易，但我所有的代码都在 mac 上。我现在坚持了2天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:11:27.767

Have you asked on their support sites? If not, you can

*   [Ask user community](http://forum.assembla.com)
*   [File a new support ticket](https://www.assembla.com/spaces/AssemblaSupport/support/tickets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:38:01.590

How did you export your repository?

My advice is to follow the instructions in SVN Tool:

1.  Dump the repo with "svnadmin dump"
2.  Import the dump by uploading it (if smaller than 200 MB) or providing url for assembla to download it

If this does not work, you can open up a support ticket and attach the repo dump you are trying to import

# java - 无法实例化服务：ClassNotFoundException

> ID：10569015
> 
> 赞同：3
> 
> 时间：2012-05-13T03:03:43.843
> 
> 标签：java, android, eclipse

我已经阅读了大约一百个相同类别的问题，但没有任何帮助。我有一个工作应用程序，然后重构了包名称，它编译并运行。一周后，我回来处理它并在启动时收到 ClassNotFoundException。更糟糕的是，如果我从 repo 中签出以前的提交（在任何重构之前，一切正常），该项目在启动时会引发相同的错误（除了使用不同的包名称）。

我已经尝试了所有我能想到的方法，但我不知道如何找出问题所在。我已经做了很明显的事情：清理项目，完全删除它并重新添加它，在新设备上运行......

我不确定哪些代码对调试有帮助，但这是我的清单和 logcat 输出中的声明。如果其他东西可能有用，请告诉我。我真的迷路了。

碰撞：

```
E/AndroidRuntime(  515): FATAL EXCEPTION: main
E/AndroidRuntime(  515): java.lang.RuntimeException: Unable to instantiate service
co.mosic.mosic.CommunicationService: java.lang.ClassNotFoundException: co.mosic.mosic.CommunicationService
E/AndroidRuntime(  515):    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2237)
E/AndroidRuntime(  515):    at android.app.ActivityThread.access$1600(ActivityThread.java:123)
E/AndroidRuntime(  515):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1201)
E/AndroidRuntime(  515):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(  515):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(  515):    at android.app.ActivityThread.main(ActivityThread.java:4424)
E/AndroidRuntime(  515):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  515):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(  515):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime(  515):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime(  515):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(  515): Caused by: java.lang.ClassNotFoundException: co.mosic.mosic.CommunicationService
E/AndroidRuntime(  515):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
E/AndroidRuntime(  515):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
E/AndroidRuntime(  515):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
E/AndroidRuntime(  515):    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2234)
E/AndroidRuntime(  515):    ... 10 more 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="co.mosic.mosic"
    android:versionCode="1"
    android:versionName="1.0" >

...

<service 
    android:name=".CommunicationService" >
    <intent-filter>
        <action android:name="co.mosic.mosic.MStcServiceInet" /> 
    </intent-filter>
</service> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T09:37:34.250

由于最近更新了 ADT 插件，因此必须将库文件夹更改为“libs”而不是 lib。我最近遇到过几次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T03:08:57.343

在我看来，此类错误的最常见原因是缺少 proguard.flags 文件。

Proguard 将在您的代码上运行并混淆所有名称。如果您没有`-keep`为您的服务类指定一个标志，它的名称也将被更改，因此操作系统将无法找到它。

所以我的猜测是你忘记提交正确的 proguard 配置文件，这可以解释为什么它过去可以工作但现在不行。

# android - 将 /assets 文件夹中的 JSON 读取到 Android 中的 ArrayList 中？

> ID：10569021
> 
> 赞同：4
> 
> 时间：2012-05-13T03:05:26.850
> 
> 标签：android, json, arraylist

首先，我对这个问题进行了很多研究。我学会了如何从资产文件夹中的文本文件中读取。问题是我不想以字符串结尾，因为该文件实际上是一个使用 json 编写的数组列表，并且在该数组列表中是对象。我只需要访问一个对象。这就是我的意思：

我有一个 Book 类，它有一个名为 chapter 的 int、一个名为 title 的 int 和一个名为 pageNum 的 int。我创建了几个 Book 对象并将它们添加到 ArrayList。然后我使用以下代码将我的 ArrayList 写入文本文件（在常规 java 项目中）：

```
ArrayList<Book> aList = new ArrayList<Book>();
aList.add(book1);
//etc...add more Book objects here...

File aFile = new File("books.txt");
FileOutputStream aFileStream = new FileOutputStream(aFile);
JSONOutputStream jsonOut = new JSONOutputStream(aFileStream);
jsonOut.writeObject(aList);
jsonOut.close(); 
```

该代码创建了一个文本文件，然后我将其放入我的 Android 项目的 /assets 文件夹中，因为我希望它包含在应用程序中。在非 Android java 项目中，我可以简单地使用以下代码重新填充 ArrayList，以便我可以从特定索引中解析 Book 对象：

```
File bFile = new File("books.txt");
FileInputStream bFileStream = new FileInputStream(bFile);
JSONInputStream jsonIn = new JSONInputStream(bFileStream);
Arraylist<Book> bList = (ArrayList<Book>) jsonIn.readObject();
Book aBook = bList.get(253); //some arbitrary index 
```

我使用的 json 代码来自 quickconnectfamily.org。您必须将名为 qc_json.jar 的文件添加到项目的构建路径中。[http://www.quickconnectfamily.org/qcjson/more.html](http://www.quickconnectfamily.org/qcjson/more.html)

Android中的问题是当我使用InputStream读取文件时，我只能将整个文件变成一个字符串，上面的代码在Android中不起作用。我不能将 JSONInputStreams 包裹在 InputStream 周围，只能包裹在 FileInputStream 周围。但似乎我无法使用 FileInputStream。

所以我需要的是一种在我的 Android 应用程序中创建 ArrayList 而不是字符串的方法。在没有过多介绍我的应用程序的情况下，该应用程序基本上会生成一个随机数并从 ArrayList 中的该索引创建一个 Book 对象。然后向用户询问来自该特定书籍的信息。听起来很傻，但真正的应用程序要酷得多。

我对解决方案、将对象存储在文本文件中的替代方法等持开放态度。请不要简单地发表对我的语法、语法或应用程序想法的批评。我对应用程序开发很陌生，我不太关心个人意见。如果有人想查看更多代码，我可以上传它，但此时似乎没有必要。谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-14T04:34:25.833

我想出了解决方案。我连接了我的 Evo 4G 并测试了该应用程序，它工作正常。这是我所做的：

我使用以下方法从文件中读取，这是我之前所做的：

```
InputStream is = appContext.getAssets().open("books.txt");
int size = is.available();
buffer = new byte[size];
is.read(buffer);
is.close();
String bufferString = new String(buffer); 
```

当你这样做时，你最终会得到整个文件的字符串。这是我之前能够做到的，但我想要的是一种将 String 转换为 Book 对象的 ArrayList 的方法。以下是我如何做到这一点：

```
//convert string to JSONArray
jsonArray = new JSONArray(bufferString);
//parse an Object from a random index in the JSONArray
JSONObject anObject = jsonArray.getJSONObject(randomNum); 

Book aBook = new Book();
aBook.setTitle((String) anObject.get("title"));
//you can continue to set the different attributes of the Book object using key/value pairs from the Book class (e.g. setPageNum, setChapter, etc). 
```

我不知道，也许这对某些人来说是显而易见的，但我真的找不到任何这样做的例子。在另一个问题中，有人提到使用 Android [org.json](http://developer.android.com/reference/org/json/package-summary.html)原生的 json 库，所以我尝试了它并且它有效。

# javascript - 使用 jquery $(window).width(); 有什么好处吗？window.resizeTo( w,h ) 上的和高度函数

> ID：10569026
> 
> 赞同：0
> 
> 时间：2012-05-13T03:07:05.163
> 
> 标签：javascript, jquery

我只是想知道使用 jquery 是否有任何优势

```
$(window).width(); 
$(window).height(); 
```

改变浏览器的尺寸

```
window.resizeTo( w,h ); 
```

如果你要改变它们呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T03:09:51.010

不是真的，但`window.resizeTo( w,h );`更短。

# c++ - 在 C++ 中捕获音频

> ID：10569028
> 
> 赞同：2
> 
> 时间：2012-05-13T03:07:47.357
> 
> 标签：c++, audio-recording

我开始开发一个涉及处理录制音频的应用程序。我正在使用 C++（使用 Visual Studio，但试图避免使用 .NET 特定库），我想知道从哪里开始最好？有推荐的图书馆吗？

如果这很重要，我目前只是在我的电脑上使用线路 - 没有考虑特殊的声音硬件（还）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T03:13:25.487

我会建议 OpenAL！我已经在许多游戏项目中使用它来播放音频，它同样能够录制声音。

查看此堆栈溢出答案以获取更多信息：[使用 OpenAL 录制音频](https://stackoverflow.com/questions/3056113/recording-audio-with-openal)

# php - 简化这个PHP？

> ID：10569041
> 
> 赞同：0
> 
> 时间：2012-05-13T03:12:53.970
> 
> 标签：php

我正在复制/粘贴一些 PHP 以获得我想要的结果，但我相信这可以以更好的方式简化。任何开发人员都可以帮助设计师吗？

```
<?php
$url = dirname(__FILE__);
$id = substr( $url, strrpos( $url, '/' )+1 );
echo '<img src="../i/';
echo $id;
echo '.png" alt="';
echo $id;
echo '" />'; 
?> 
```

**结果：** `<img src="(name of $id)" alt="(name of $id)" />`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T03:15:10.540

您可以为此使用[PHP 的字符串插值](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing)：

```
echo "<img src=\"../i/$id.png\" alt=\"$id\" />"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T03:15:51.350

```
<img src="../i/<?php echo $id; ?>.png" alt="<?php echo $id ?>"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T03:15:56.240

```
$url = dirname(__FILE__);
$id = substr( $url, strrpos( $url, '/' )+1 );
echo "<img src=\"../i/$id.png\" alt=\"$id\" />" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T03:16:09.020

这是一个可回收的版本：

```
function img_tag () {
  $url = dirname(__FILE__);
  $id = substr( $url, strrpos( $url, '/' )+1 );
  return "<img src=\"../i/$id.png\" alt=\"$id\" />";
} 
```

在文档的其他地方，按如下方式调用此函数：

```
<?php echo img_tag(); ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-13T03:18:07.657

像这样：

```
<?php
$url = dirname(__FILE__);
$id = substr( $url, strrpos( $url, '/' )+1 ); ?>

<img src="../i/<?php echo $id >.png" alt="<?php echo $id >" /> 
```

# java - PircBot 如何获取主机名

> ID：10569046
> 
> 赞同：0
> 
> 时间：2012-05-13T03:13:53.180
> 
> 标签：java, irc

有谁知道如何在 PircBots 中使用它？ [http://www.jibble.org/javadocs/pircbot/index.html](http://www.jibble.org/javadocs/pircbot/index.html) 我只需要获取用户主机名并禁止他们。谢谢阅读！

```
 if (cmd.equalsIgnoreCase("ban")) {
                        if (command[1] != null && command[2] != null) {
                            //Command[1] is the users name.
                            //Command[2] is the reason.
                            //how do i make this ban someone?
                        }
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T07:09:07.793

你不能有理由禁止，只能有理由踢。在这种情况下，我假设您想要 kban，即 kick + ban。

```
 if (cmd.equalsIgnoreCase("ban")) {
                    if (command[1] != null && command[2] != null) {
                        //Command[1] is the users name.
                        //Command[2] is the reason.
                        //how do i make this ban someone?

                        // ban first 
                        //make sure to input the current channel in "currentChannel"
                        ban(currentChannel, command[1]+"!*@*");

                        // kick with a reason
                        kick(currentChannel, command[1], command[2]);
                    }
                } 
```

如果您的命令需要主机掩码，您应该让用户指定它 - 他可能想要一个特定的禁令，也许是整个范围的禁令等。否则，生成一个糟糕的昵称禁令（如果用户离线，您可以使用“whowas”找出来，否则你应该使用“whois”。请注意，“whowas”可能不起作用。）

来自 PircBot 的 JavaDoc - [http://www.jibble.org/javadocs/pircbot/index.html](http://www.jibble.org/javadocs/pircbot/index.html)

ban(String channel, String hostmask) 禁止用户进入频道。

kick(String channel, String nick) 将用户踢出频道。

kick(String channel, String nick, String reason) 将用户踢出频道，给出原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-26T17:57:25.683

虽然这是一个老问题，但我想我会分享我是如何解决这个问题的。我假设您正在处理`onMessage`事件中的禁令命令。在这种情况下，您必须将其保存`command[1]`在地图中。然后打电话

```
sendRawLine("WHO " + command[1]); 
```

覆盖`onServerResponse`并捕获代码 RPL_WHOREPLY 和`split("\\s")`响应。然后您可以在地图中使用键查找，`splitResult[5]`主机将在`splitResult[3]`您的内部，然后您可以执行禁令`String.format("*!*%s", splitResult[3])`

# php - 将日期时间转换为字符串 PHP

> ID：10569053
> 
> 赞同：254
> 
> 时间：2012-05-13T03:15:21.710
> 
> 标签：php, datetime

我已经研究了很多关于如何将 PHP DateTime 对象转换为字符串的网站。我总是看到“字符串到日期时间”而不是“日期时间到字符串”

PHP DateTime 可以回显，但我想用 PHP 字符串函数处理我的 DateTime。

我的问题是如何将 PHP dateTime 对象转换为从这种代码开始的字符串：

```
$dts = new DateTime(); //this returns the current date time
echo strlen($dts); 
```

* * *

## 回答 #1

> 赞同：468
> 
> 时间：2012-05-13T03:17:40.940

您可以使用该类的[`format`](http://www.php.net/manual/en/datetime.format.php)方法`DateTime`：

```
$date = new DateTime('2000-01-01');
$result = $date->format('Y-m-d H:i:s'); 
```

如果`format`由于某种原因失败，它将返回`FALSE`。在某些应用程序中，处理失败的情况可能是有意义的：

```
if ($result) {
  echo $result;
} else { // format failed
  echo "Unknown Time";
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-12-07T12:47:12.363

我发现的最简单的方法是：

```
$date   = new DateTime(); //this returns the current date time
$result = $date->format('Y-m-d-H-i-s');
echo $result . "<br>";
$krr    = explode('-', $result);
$result = implode("", $krr);
echo $result; 
```

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-08-13T06:52:02.750

```
echo date_format($date,"Y/m/d H:i:s"); 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-09-06T19:35:10.417

有一些预定义的格式`date_d.php`可以使用，`format`例如：

```
define ('DATE_ATOM', "Y-m-d\TH:i:sP");
define ('DATE_COOKIE', "l, d-M-y H:i:s T");
define ('DATE_ISO8601', "Y-m-d\TH:i:sO");
define ('DATE_RFC822', "D, d M y H:i:s O");
define ('DATE_RFC850', "l, d-M-y H:i:s T");
define ('DATE_RFC1036', "D, d M y H:i:s O");
define ('DATE_RFC1123', "D, d M Y H:i:s O");
define ('DATE_RFC2822', "D, d M Y H:i:s O");
define ('DATE_RFC3339', "Y-m-d\TH:i:sP");
define ('DATE_RSS', "D, d M Y H:i:s O");
define ('DATE_W3C', "Y-m-d\TH:i:sP"); 
```

像这样使用：

```
$date = new \DateTime();
$string = $date->format(DATE_RFC2822); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-16T13:40:09.363

它对我有用

```
$start_time   = date_create_from_format('Y-m-d H:i:s', $start_time);
$current_date = new DateTime();
$diff         = $start_time->diff($current_date);
$aa           = (string)$diff->format('%R%a');
echo gettype($aa); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-09-30T02:18:08.113

使用列表的更短方式。你可以对每个日期组件做你想做的事。

```
list($day,$month,$year,$hour,$min,$sec) = explode("/",date('d/m/Y/h/i/s'));
echo $month.'/'.$day.'/'.$year.' '.$hour.':'.$min.':'.$sec; 
```

# android - 复制地图遵循 Android 中的当前位置功能

> ID：10569054
> 
> 赞同：3
> 
> 时间：2012-05-13T03:15:50.307
> 
> 标签：android, google-maps, android-maps, android-mapview

我正在寻找如何使用 Google 地图外部库复制 Android（和 iPhone）上的地图中存在的跟随当前位置功能。该功能在地图中的工作方式是，当您按下按钮时，它会开始平移您的位置，直到您触摸（和/或移动）地图。使用以下内容，我可以让我的应用程序将当前位置保留在屏幕上，但不能将当前位置保留在屏幕中央（当位置接近屏幕边缘时它会平移，而 Maps 会将其保留在始终居中）：

```
butMapCurrentLocation.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        runOnUiThread(new Runnable() {
            public void run() {
                mapController.animateTo(myLocationOverlay.getMyLocation());
            }
        });
    }
}); 
```

我也尝试过`setCenter`，而不是`animateTo`它们似乎具有相同的效果。

另外值得注意的是，我需要能够停止这个将位置保持在中心的功能（例如当按下另一个按钮或触摸地图时）。上面的 Runnable 不会立即停止，即使在使用 .cancel 时，我也无法在请求时正确停止，如此处所述：[Android：如何停止 Runnable？](https://stackoverflow.com/questions/9458097/android-how-do-i-stop-runnable)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:36:38.793

在 Google Maps v2 中还没有正式的方法可以做到这一点。

然而，你可以做你想做的事。你必须做两件事：

1.  从一些LocationProviders（例如gps）注册位置更新以获取用户的位置。当您获取到新位置的位置动画地图时。
2.  当用户移动地图时停止此操作。

所以做 1\. 很容易，用 Maps v2 api 正式做 2\. 是不可能的。查看此[问题](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4636&q=apitype=Android2&colspec=ID%20Type%20Status%20Introduced%20Fixed%20Summary%20Stars%20ApiType%20Internal)以获取更多详细信息。

建议的解决方法是创建自己的 MapView（扩展原始 MapView）并覆盖它的[dispatchTouchEvent](http://developer.android.com/reference/android/view/View.html#dispatchTouchEvent%28android.view.MotionEvent%29)方法。在那里，您可以捕获任何触摸事件，并可以检测用户是否触摸/移动了地图。

# facebook - 用户使用 Facebook 登录时如何触发事件

> ID：10569057
> 
> 赞同：1
> 
> 时间：2012-05-13T03:16:01.113
> 
> 标签：facebook, facebook-apps

我有设置

```
<div id="fb-root"></div><div class="fb-login-button" data-show-faces="true" data-width="400" data-max-rows="1" scope="email, publish_stream"></div><script type="text/javascript">
window.fbAsyncInit = function () {
    FB.init({
        appId: 'xxx', // App ID
        status: true, // check login status
        cookie: true, // enable cookies to allow the server to access the session
        xfbml: true,  // parse XFBML,
        oauth : true
    });

    FB.Event.subscribe('auth.authResponseChange', function (response) {
        if (response.status === 'connected') {
            // the user is logged in and has authenticated your
            // app, and response.authResponse supplies
            // the user's ID, a valid access token, a signed
            // request, and the time the access token 
            // and signed request each expire
            var uid = response.authResponse.userID;
            var accessToken = response.authResponse.accessToken;

            // TODO: Handle the access token

            $.post('/facebook/login', { accessToken: accessToken }, function (response) { if(response) {alert('Logged in')} });

        } else if (response.status === 'not_authorized') {
            // the user is logged in to Facebook, 
            // but has not authenticated your app
        } else {
            // the user isn't logged in to Facebook.
        }
    });

};

// Load the SDK Asynchronously
(function (d) {
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) { return; }
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
} (document)); 
```

问题是当用户单击登录按钮并接受我的应用程序时，登录对话框关闭并且没有触发任何事件，因此我的帖子 $.post('/facebook/login') 也永远不会触发，除非我按 F5。

如何在登录对话框关闭后立即触发事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T03:51:18.650

只是分享。在阅读 Facebook 文档以获取答案时遇到可能的解决方案。

[http://facebook.stackoverflow.com/questions/3548493/how-to-detect-when-facebooks-fb-init-is-complete](http://facebook.stackoverflow.com/questions/3548493/how-to-detect-when-facebooks-fb-init-is-complete)

你可以在 fbEnsureInit(); 中运行你的 $.post('/facebook/login'); <-- 指的是 serg 的回答。

使用间隔回调来检查登录状态可能是一种方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-13T06:33:07.340

您可以使用以下命令重新加载页面：`window.location.reload();`因此您无需按 F5，

一个 FB.login 示例：

```
FB.login(function(response) {
    if (response.authResponse) {
        console.log('Application authorized.');
        window.location.reload();
    } else {
        console.log('You cancelled login or you did not fully authorize the app.');
    }
}, { scope: 'email' }); 
```

或者您可以使用订阅事件：

```
FB.Event.subscribe('auth.authResponseChange', function(response) {
    console.log('The status of the session changed to: '+response.status);
    window.location.reload();
}); 
```

# c - 使用 read() 和 write() 系统调用

> ID：10569064
> 
> 赞同：1
> 
> 时间：2012-05-13T03:17:40.907
> 
> 标签：c, io

所以我有一个任务，我应该使用 read 和 write 从 stdin 的文件中读取行，对其进行排序，然后使用 write 将其写出到 stdout。但是，我无法让它工作。

在重新输出之前，我必须首先在 buf 上调用一个排序函数来对字符串（我使用 read）进行排序。我可以将 buf 视为一个数组吗？或者它不是那样工作的？原因是我必须先对字符串进行排序。

```
int record_compare(const void *a, const void *b)
{
  return (memcmp(a, b, num_bytes));
}
 qsort(buf, num_elements, num_bytes, record_compare);
 while (count < n - num_bytes)
 {
   i = memcmp(buf+count, buf+count + num_bytes, num_bytes);
   if (i == 0)
     count = count + num_bytes;
   else
   {
     for (k = 0; k < num_bytes; k++)
     {
   printf("%c", buf[count]);
   count++;
     }
   }     
 } 
```

但是由于我得到的是带有 read 而不是 fgets 之类的字符串，我仍然可以将 buf 视为一个数组吗？这就是排序在普通数组上的工作方式（它对它进行排序，然后打印出来而不重复。

```
 do {
     c = read(0, buf+n, 1);
     if (c != 0)
        n++;
   }
 while (c != 0); 
```

这就是我得到buf的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T04:47:46.680

系统调用将`read()`读取 N 个字节（按照您编写代码的方式一次读取 1 个字节）。您将需要继续阅读，直到您得到一个换行符，或者直到您返回零字节（这标志着 EOF），或者直到您收到错误。假设您找到了换行符，您将开始一个新的缓冲区。

您可能会有一个字符指针数组，并且您可能会为每一行分配一个新字符串，并将指针存储在字符指针数组中。

```
enum { MAX_LINES = 1024 };
char *lines[MAX_LINES];
int n_lines = 0; 
```

我假设一个固定的上限是可以的；您也可以安排动态分配指针数组。

因此，您需要一个函数来读取一行并存储它。

那么你的比较功能有问题。你会打电话给：

```
qsort(lines, n_lines, sizeof(char *), record_compare); 
```

但是`record_compare()`会被赋予两个`char **`值，所以你需要使用：

```
int record_compare(const void *v1, const void *v2)
{
    const char *s1 = *(char **)v1;
    const char *s2 = *(char **)v2;
    return(strcmp(s1, s2));
} 
```

编写排序后的数据非常简单。因此，您需要专注于线路阅读器功能。

# spring - 通过环境变量动态加载 SpringBean

> ID：10569068
> 
> 赞同：0
> 
> 时间：2012-05-13T03:18:24.423
> 
> 标签：spring, spring-jms

我正在尝试找出加载 spring bean 的最佳方法，具体取决于设置的系统环境变量。我意识到这将是使用配置文件的简单任务，但不幸的是我使用的是 Spring 2.5。所以这是我的 XML 文件中的 bean 定义：

```
<bean id="updateBlogEntryListenerContainer"
          class="org.springframework.jms.listener.DefaultMessageListenerContainer">
        <property name="concurrentConsumers" value="1"/>
        <property name="connectionFactory" ref="jmsConnectionFactory"/>
        <property name="destinationName" value="queue/updateBlogEntryQueue"/>
        <property name="messageListener" ref="updateBlogEntryMessageHandler"/>
        <property name="transactionManager" ref="transactionManager"/>
        <property name="sessionTransacted" value="true"/>
        <property name="destinationResolver" ref="destinationResolver"/>
</bean> 
```

基本上，我正在寻找一种仅根据系统环境变量的存在加载该 bean 的方法，否则，忽略它。我一直在研究 BeanPostProcessors 和 BeanFactoryPostProcessors 的使用，但不能完全确定解决方案。对此的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T14:48:54.533

您可以实现一个 FactoryBean 来检查环境变量并创建实际的 bean 或一些 NoOp 实现 - 如果没有在任何地方引用它，从 FactoryBean 返回 null 也可能有效。

```
class ListenerContainerFactory extends FactoryBean<MessageListenerContainer> {

     MessageListenerContainer getObject() {
        if (someCondition) {
            // create and return DefaultMessageListenerContainer
        } else {
            // return null or some NoOpMessageListenerContainer
        }
     }
} 
```

# asp.net-mvc - 具有复杂操作（动词）的 RESTful Web 服务

> ID：10569069
> 
> 赞同：4
> 
> 时间：2012-05-13T03:18:32.747
> 
> 标签：asp.net-mvc, asp.net-mvc-4, rest, rpc

我正在尝试构建一个 Web 应用程序，其中后端是一个完整的 RESTful Web 服务。即模型（业务逻辑）可以通过HTTP 完全访问。例如：

```
GET    /api/users/
GET    /api/users/1
POST   /api/users
PUT    /api/users/1
DELETE /api/users/1 
```

提供更多不是 CRUD（动词/动作）的方法的正确方法是什么？这是否被认为更像是一个 RPC-api 域？如何正确设计 RPC api 以在 RESTful api 之上运行？

例如，我将如何优雅地为用户实现忘记密码的方法。

```
POST (?) /api/users/1/forgot 
```

然后应用程序（控制器/视图）将使用 https 请求（类似 HMVC）来访问模型和方法。什么是最好的身份验证？OAuth，基于 HTTP 的基本身份验证？

虽然这是以后可扩展性的“最佳实践”，但我是否过度设计了这项任务？是否最好只遵循典型的 MVC 模型并提供非常基本的 API？

这个问题的灵感主要来自 ASP.NET 的 MVC 4 (WebAPI) 和 NodeJS 模块[https://github.com/marak/webservice.js](https://github.com/marak/webservice.js)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:45:39.363

我最近开始学习 REST，在开发新的 Web 服务时，我认为您正在做正确的事情来考虑它。

您对自定义动词的假设是正确的。REST 承认某些操作需要以不同的方式处理，并且自定义动词不违反要求。与服务器通信时应使用 POST，但动词通常用[命令式](http://en.wikipedia.org/wiki/Imperative_mood)编写。而不是*forgot*，我可能会使用*提醒*或类似的东西。即，你应该给出做什么的指示，而不是在没有明确说明你期望的结果的情况下描述发生的事情。

此外，构建服务的首选方法是将*api*包含到域名中，并将其从路径中删除。我会这样写你的特定例子：

```
POST /users/1/remind HTTP/1.1
Host: api.myservice.example.com 
```

REST 中的会话处理有点棘手。最简洁的方法可能是使用基本访问身份验证在每个请求上使用用户名和密码进行身份验证。但是，我相信很少有人这样做。您应该阅读这个问题（及其接受的答案）：[OAuth's tokens and sessions in REST](https://stackoverflow.com/questions/1672530/oauths-tokens-and-sessions-in-rest)

**编辑：**在您的示例中，我还将删除 GET 请求中的尾部正斜杠。如果服务真的是 RESTful 的，那么资源不应该可以从`/users/`和访问`/users`。一个特定的资源应该只有一个 URL 指向它。带有斜杠的 URL 实际上与没有斜杠的 URL 不同。REST 提倡删除它，并且 RESTful Web 服务不应同时接受两者（在 GET 的情况下，这意味着以 200 OK 响应），尽管它可能会从一个重定向到另一个。否则，可能会导致对正确 URL 的混淆、重复缓存、哭泣和咬牙切齿。:)

**编辑 2：**在Richardson & Ruby 的*RESTful Web Services*中，不鼓励您将新动词放在路径中。相反，您可以附加类似`?_method=remind`. 这取决于您选择哪一个，但请记住，*无论*您选择什么，您**都不**应该使用 来处理这些请求。A不得更改资源，并且如果用户在历史记录中来回浏览，则不应产生副作用。否则，您可能会多次重新发送密码。改为使用。`GET`*`GET``POST`*

# jquery - 如何在画布中获得双击

> ID：10569070
> 
> 赞同：1
> 
> 时间：2012-05-13T03:19:02.927
> 
> 标签：jquery, html, html5-canvas

我能够跟踪鼠标移动。我计划使用相同的计算来查看鼠标在哪个对象上，但画布似乎没有获得双击事件（使用 jquery）。

跟踪双击的最佳方法是什么？如果您建议跟踪时间而不是我如何获得单击以及如何获得时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T04:26:52.730

示例画布：

```
<canvas id="mycanvas" height="200" width="300"></canvas> 
```

检测画布上的双击：

```
$('#mycanvas').on('dblclick', function() {
  alert('Double clicked');
}); 
```

**[演示](http://jsfiddle.net/5kzvx/)**

# iphone - Xcode 不会检测到设备

> ID：10569073
> 
> 赞同：2
> 
> 时间：2012-05-13T03:19:21.853
> 
> 标签：iphone, ios, xcode, ipad, deployment

我在使用 iPhone 测试我的应用程序时遇到了一些问题。上周我升级到 Xcode 4.3。我能够在我的 iPhone（运行 iOS 4.3）上测试我的应用程序。今天我将我的 iPhone 升级到 iOS 5.1，现在 Xcode 不会检测到我的 iPhone（btw SDK 是 5.1）。

我不太确定该怎么做，我什至尝试将 Xcode 中的部署目标更改回 4.3，但仍然没有。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T08:59:14.873

确保设备在 Xcode 的 Organizer 下为“Enabled for development”。我见过 Xcode 无法识别设备的情况，因为它没有设置为开发设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:24:41.197

我遇到了这个问题，但我的设备**已经启用开发**。这是我为使其工作而采取的步骤。

如果您想作弊，请尝试最后一步。这就是它为我工作的原因！

1.  尝试重新启动 Xcode 和设备。分别地。

2.  确保您使用的是 Base SDK 下的最新 iOS SDK（在 Targets / Projects > Build Settings 中），并且它是您设备上运行的更高版本

3.  检查项目 > 构建设置 > iOS 部署目标**小于或等于**您设备上的内容。

事实证明，当我创建一个新项目时，它选择了一个比我的设备版本**更大的 iOS 部署目标。**

# javascript - 如何使用 jQuery 获取具有相同 z-index 的元素？

> ID：10569074
> 
> 赞同：1
> 
> 时间：2012-05-13T03:19:24.277
> 
> 标签：javascript, jquery, css

现在，我有不同的元素`z-index`，我想使用 jQuery 对它们进行分组。

```
<div class="float" style="z-index:2"></div>
<div class="float" style="z-index:6"></div>
<div class="float" style="z-index:10"></div>
           .
           .
           .
<!-- You get the point --> 
```

我可以用它`.attr("style")`来获取`z-index`价值，但这样做似乎不是一个好主意。（有时它也可能在`<style>`标签中）有类似的东西吗？

```
var ele = $("*[zindex=5]"); 
```

期待任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T03:41:59.703

创建您自己的自定义选择器：

```
$.extend($.expr[':'], {
  zindex: function(el, i, m) {
    return $(el).css("z-index") === m[3];
  }
}); 
```

然后你可以像这样使用它：

```
$("div:zindex(2)").each(function(){
 alert( this.innerHTML );
}); 
```

这将返回所有`div`带有`z-index`of 的元素`2`。

```
<div style="position:relative; z-index:2">Foo</div>
<div style="position:relative; z-index:6">Bar</div> 
```

使用上面的标记，早期的 jQuery 脚本会提醒`Foo`.

演示：http: [//jsbin.com/icevih/2/edit](http://jsbin.com/icevih/2/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T03:31:05.237

如果您添加此功能，那么您将拥有它们

```
$.fn.filterByZIndex = function(zIndex) {
    var $zElm = $("*").filter(function() {
        return $(this).css('z-index') == zIndex;
    });
    return $zElm;
}; 
```

# javascript - Bootstrap、CSS、JS - 单击后引导文件菜单栏悬停

> ID：10569075
> 
> 赞同：3
> 
> 时间：2012-05-13T03:19:40.157
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我想制作一个使用 twitter 的引导框架的应用程序。我有一个导航栏，其功能类似于带有文件/编辑/帮助/等的文件菜单栏。

我喜欢这样一个事实，即您需要单击以使下拉菜单出现，但是我怎样才能使其位于下拉菜单的位置，例如从“文件”菜单移动时（单击并下拉后）。

这方面的一个例子是谷歌文档，点击一个菜单，然后移动到另一个菜单项，它将下拉新的悬停菜单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T16:13:53.493

我的解决方案：为您的`<ul>`元素制作两个类。一个例如`doc-menu`other `normal-menu`。在菜单项上单击：您`<li>`应该得到`class="active"`和`<ul class="doc-menu"`。然后出现在`<ul><li>....</ul>`内部`<li class="active">`并保持它即使没有悬停。在其他`doc-menu`项目悬停时，您将活动类更改为其他`<li>`元素。这可以通过使用 javascript监听[mouseover来完成。](https://developer.mozilla.org/en/DOM/element.onmouseover)单击背景或内部`<ul><li>....</ul>`更改`<ul class="doc-menu">`为`<ul class="normal-menu>`

# android - Android：我有内存泄漏吗？

> ID：10569077
> 
> 赞同：2
> 
> 时间：2012-05-13T03:20:19.633
> 
> 标签：android, memory, native, heap-memory

我正在研究一个 lwp，随着时间的推移，通过 UI（设置、应用程序、运行）报告的内存使用量显示出内存使用量不断增加（从 ~18M 开始，在我使用它之前已经攀升至 90M）。这似乎很糟糕，让我找到了一定是内存泄漏的问题。所以我使用了 ddms，它表明虽然应用程序显示内存使用量增加，但 Dalvik 分配的堆为 ~13.7M，并且随着时间的推移变化不会超过 ~500K。好的，所以它必须在本机堆上。我包含了 Debug.getNativeHeapSize() 和 Debug.getNativeHeapAllocatedSize() 的日志，它们都报告了 ~5M 本机堆 +/- ~2M，与 UI 显示内存使用量增加一致。除了 Dalvik 和 native 还有什么其他的内存使用？[所以我在这里](https://stackoverflow.com/questions/2298208/how-to-discover-memory-usage-of-my-application-in-android)读到了 Diane Hackborn 的优秀文章并意识到我还有很多东西要学。我使用了 adb shell dumpsys meminfo，结果如下：

```
** MEMINFO in pid 6856 **
                         Shared  Private     Heap     Heap     Heap
                   Pss    Dirty    Dirty     Size    Alloc     Free
                ------   ------   ------   ------   ------   ------
       Native     1118     1116     1076     5072     3452       59
       Dalvik     4102    16204     3584    15111    14077     1034
       Cursor        0        0        0                           
       Ashmem        2        4        0                           
    Other dev    33344      292      820 
```

“Other Dev”加上 Native/Pss 和 Dalvik/Pss 的巨大 33M“Pss”大致是 UI 报告的内存使用情况。阅读 Diane 的帖子，我不知道我是否应该担心我的内存使用情况。我可以看到“Pss/Other dev”值随着时间的推移而攀升，但我的原生堆和 Dalvik 堆仍然保留在 ddms 和 Debug.getNativeHeapSize() 报告它们所在的位置。我很困惑，不知道我是否应该担心，除了用户会看到我的 lwp 正在消耗这么多的“内存”，而据我所知，它实际上并没有泄漏。

有谁明白这里发生了什么？这在 Galaxy Nexus，ICS 4.0.2 上。

编辑：我随后试图通过让 Other/Pss 爬升直到应用程序在 UI 中达到约 2 亿的报告使用量来使应用程序崩溃。它确实崩溃了：

```
E/IMGSRV  ( 8337): :0: __map: Map device memory failed
W/GraphicBufferMapper( 8337): registerBuffer(0x3364c0) failed -14 (Bad address)
F/libc    ( 8337): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1)
I/DEBUG   (  114): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** 
```

所以我有一些东西要修复，我不知道从哪里开始，因为我在 dalvik 或本机堆上看不到任何问题。

# java - JAVA：如何在对象的子类中调用方法？

> ID：10569080
> 
> 赞同：0
> 
> 时间：2012-05-13T03:20:50.413
> 
> 标签：java, inheritance, polymorphism

我正在尝试解决这个问题，但我真的不明白语法。考虑以下代码：

```
class Parent {
   private String productCode1;      // Format X9999
   private String productCode2;

    public Parent(String productCode1, String productCode2)
    {
        this.productCode1= productCode1;
        this.productCode2= productCode2;

    } 

} 
```

然后我有一个包含我要调用的方法的子类

```
public Child extends Parent{
    private String[] serialNumbers;

    public Child(String productCode1, String productCode2, String... args){
        super(productCode1,  productCode2,);
        int i = 0;

        for(String serialN: args){
            serialNumbers = new String[10]; 
            serialNumbers[i]= serialN;
            i++;
        }

        public String[] getSerialNumbers(){     //This is the method i want to call
            return this.serialNumbers;
        }
} 
```

这是库存类

```
public class Inventory{

public ArrayList<Parent> products;

public Inventory(){

    products = new ArrayList<Parent>();  //Some hard coded items
    products.add(new Parent("A0001", "abcdefg"));
    products.add(new Parent("B0010", "abcdefg"));
    products.add(new Parent("C0100", "abcdefg"));
    products.add(new Child("D1000",  "abcdefg", "firstSN", "secondSN", "thirdSN"));
}

public static ProductLine getProduct(ArrayList<Parent> products, String productCode){

    for(int i = 0; i < products.size(); i++){
         ProductLine product = products.get(i);
         if(product.getProductCode().equals(productCode)){
             return product;  
         }
    }

    return null;

} 
```

现在在主类中，我需要检查对象是父对象还是子对象，因为我正在尝试获取序列号，如果我得到序列号，则表示是子对象，否则是父对象.

我试图使用子类中的 getserialNumbers() 的唯一问题

```
public Application{
    String inputProductCode = keyboard.nextLine(); //Input product code from user
    Inventory inventory = new Inventory();

    ProductLine pFound = inventory.getProduct(inventory.products, inputProductCode);  //check if is Child item

    String[] serNumb = pFound.getSerialNumbers(); //Here is where i get Error cannot find symbol/method getSerialNumbers
    if(serNumb[0] == null){
          // code continue... 
} 
```

我试着像这样投：

```
String[] serNumb = ((ItemisedProductLine)pFound).getSerialNumbers(); 
```

它可以编译，但他（如预期的那样）在运行时向我抛出“无法将父级转换为子级”。

我希望我能很好地解释很长的问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T03:25:34.427

正确的。你不能做演员，因为`Parent`根本不是`Child`.

你可以`instanceof`用来检查你有什么类型的对象，然后只在你有一个实例的情况下进行强制转换和调用，`Child`但你通常希望避免做这样的事情。这不是好的面向对象。

您可以做的一件事是将`getSerialNumbers()`方法放入`Parent`并始终返回一个空数组，然后将其覆盖`Child`以实际返回`Child`的序列号。

当然，在这里重新考虑整个类层次结构也可能是值得的。`Parent`所有继承自的类都有序列号是否有意义？如果是这样，您应该考虑将所有序列号处理移至`Parent`. `Parent`than的子类会更多`Child`吗？如果没有，也许`Child`应该被淘汰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T05:36:16.480

这是`OOP`编程模型中的简单问题：

*   任何`Child`实例也是`Parent`实例。
*   任何`Parent`实例也可以是`Child`实例。

如果您`Inventory`按以下方式更改类构造函数，则您的程序可以正常工作：

```
public Inventory()
{
    products = new ArrayList<Parent>();  //Some hard coded items
    products.add(new Child("A0001", "abcdefg"));
    products.add(new Child("B0010", "abcdefg"));
    products.add(new Child("C0100", "abcdefg"));
    products.add(new Child("D1000",  "abcdefg", "firstSN", "secondSN", "thirdSN"));
} 
```

或者更好的方法是`instanceof`在将`Parent`实例转换为`Child`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T03:25:19.667

为什么 Parent 类没有 getSerialNumbers 方法？我认为您有 2 个选择：在 Parent 类中实现或在您的逻辑中不考虑父母（使用 instanceof 进行测试）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T03:26:39.173

您不能调用子类的方法，除非它是父类中定义的抽象方法。因为 JVM 不理解子类中的方法。`Inventory`为此，您可以在课堂上做以下事情。

```
public class Inventory{

public ArrayList<Parent> products;

public Inventory(){

    products = new ArrayList<Parent>();  //Some hard coded items
    products.add(new Child("A0001", "abcdefg"));
    products.add(new Child("B0010", "abcdefg"));
    products.add(new Child("C0100", "abcdefg"));
    products.add(new Child("D1000",  "abcdefg", "firstSN", "secondSN", "thirdSN"));
}

public static ProductLine getProduct(ArrayList<Parent> products, String productCode){

    for(int i = 0; i < products.size(); i++){
         ProductLine product = products.get(i);
         if(product.getProductCode().equals(productCode)){
             return product;  
         }
    }

    return null;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-13T03:37:40.807

如果您的目标是确定您的对象是 Parent 还是 Child 类型，您可以使用 instanceof 关键字来完成：

```
if(pFound instanceof Child) {
     //...
} 
```

如果要使用序列号区分类型，Parent 类也必须实现 getSerialNumber 方法。

# xamarin.ios - CGSize/SizeF 绑定的转换值不正确

> ID：10569081
> 
> 赞同：2
> 
> 时间：2012-05-13T03:20:53.817
> 
> 标签：xamarin.ios, gmgridview

我正在开发 MonoTouch 绑定项目，以将[GMGridView](https://github.com/gmoledina/GMGridView)集成到我的应用程序中。我能够成功加载空的网格视图，但无法加载网格项目。在 MonoTouch 和 Objective C 代码上花费数小时后，结果发现 System.Drawing.SizeF 绑定错误地转换为 CGSize（即 SizeF(140f, 110f) 正在转换为 CGSize(140, 0) - 高度值丢失） .

目标 C 定义

```
 - (CGSize)GMGridView:(GMGridView *)gridView sizeForItemsInInterfaceOrientation:(UIInterfaceOrientation)orientation; 
```

单点触控绑定

```
 [Abstract, Export ("GMGridView:sizeForItemsInInterfaceOrientation:")]
    System.Drawing.SizeF SizeForItemsInInterfaceOrientation (GMGridView gridView, UIInterfaceOrientation orientation); 
```

我想知道我是否错误地[绑定](http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types)它或者这是一个已知的错误？此外，除了为高度值创建额外的回调之外，还有什么解决方法。

绑定和测试代码贴在这里：[GMGridMono](https://github.com/rpulipati/GMGridMono)

感谢您查看这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:32:49.280

我在绑定到返回 CGSize 的方法时遇到了同样的问题。单触 V5.2.12。它发生在模拟器上，但不在设备上。从单声道应用程序直接调用该方法可以正常工作，但是当该方法用作从绑定库到单声道代码的回调时，返回的高度值不正确并显示为未初始化。

# linux - 查找是否使用 shell 脚本安装了库

> ID：10569082
> 
> 赞同：4
> 
> 时间：2012-05-13T03:21:17.373
> 
> 标签：linux, shell, deb

我在 shell 脚本中完全是菜鸟我想要的是 shell 脚本，它确定当前安装的库/包的列表，如果没有用户许可不安装它们

我想要的是确定库/包当前是否安装在系统中

我知道**aptitude search**命令，但我正在寻找更好的解决方案

例如，我现在已经定义（在 shell 脚本中）检查 readline 库/包，我如何从 shell 脚本（我想创建）中知道当前是否安装了 readline 包。

任何想法或建议肯定会有所帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T05:40:01.050

> 我想要的是确定库/包当前是否安装在系统中

`dpkg -s`不需要root权限，会显示包状态详情。

示例外壳脚本：

```
#!/bin/sh

for P; do
    dpkg -s "$P" >/dev/null 2>&1 && {
        echo "$P is installed."
    } || {
        echo "$P is not installed."
    }
done 
```

用法是：

`script.sh package1 package2 .... packageN`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T05:18:03.373

为了简单地进行测试，您似乎可以为您感兴趣的库 grep 诸如 ldconfig -p 之类的命令的输出。

或者，您可以提供一个与所需库链接的小型测试程序，尝试运行它，然后测试是否失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:45:40.400

如果您尝试设置依赖项检查，正确的解决方案是创建一个虚拟包，`Depends:`该包位于您需要安装的包上。有一个名为[equivs](http://packages.debian.org/squeeze/equivs)的工具对此有所帮助。（然而，它被批评为“过度设计”；当然，如果您熟悉 Debian 软件包的格式，如果您的要求如此简单，则可能不需要单独的工具。）然后您只需安装此软件包并它将拉入指定为依赖项的包。

您仍然必须知道提供的库`libreadline.so`是`libreadline5-dev`. [Debian 软件包搜索](http://packages.debian.org/search?searchon=contents&keywords=libreadline.so)可以帮助您找到需要放入的软件包名称`Depends:`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-13T13:39:10.393

你可能可以做你想做的事[`dpkg`](http://manpages.debian.net/cgi-bin/man.cgi?query=dpkg)

# php - 处理 $.ajax 函数中的空操作

> ID：10569083
> 
> 赞同：1
> 
> 时间：2012-05-13T03:21:27.297
> 
> 标签：php, javascript, jquery, forms, html

我想在一个 div 中加载我的网站中的所有内容，所以我创建了一个函数来处理表单提交以使动作加载到同一个 div 中，但是问题是某些表单没有动作`action=""`，因为脚本在同一个页面中，所以当我提交表单时，div 没有任何反应，那么我如何在我的函数中处理这个问题？

```
$(document).ready(function() {
              $('#mydiv').delegate('form', 'submit', function() { // catch the form's submit events inside the div
    $.ajax({ // create an AJAX call...
        data: $(this).serialize(), // get the form data
        type: $(this).attr('method'), // GET or POST
        url: $(this).attr('action'), // the file to call
        success: function(response) { // on success..
             //$('#mydiv').html(response); // update the DIV
            $('#mydiv').fadeOut('slow',function() {
                        $('#collabsoft').html(response).fadeIn('slow');
                });
              //  return false;
}
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T03:26:10.077

您可以使用三元 if 语句：

```
url: $(this).attr('action') == '' ? window.location : $(this).attr('action') 
```

# javascript - zeroClipboard 的困难

> ID：10569084
> 
> 赞同：2
> 
> 时间：2012-05-13T03:22:21.677
> 
> 标签：javascript, jquery, html, clipboard, zeroclipboard

我正在使用 zeroClipboard，但我无法让它工作。

这是我的 HTML 标记：

```
 <div id= 'd_clip_button'>
        <img class = 'displayed' src="{{ asset('bundles/yopyourownpoet/images/CopyPoemPage8.png') }}" alt="Copy Poem" height="71" width="300" />
    </div> 
```

和javascript：

```
 <script src="{{ asset('bundles/yopyourownpoet/js/ZeroClipboard.js') }}" type="text/javascript"></script>
    <script>
        $(document).ready(function() {
            ZeroClipboard.setMoviePath("{{ asset('bundles/yopyourownpoet/flash/ZeroClipboard.swf') }}");
            var clip = new ZeroClipboard.Client();
            clip.setText( "aaaa" );
            clip.glue( 'd_clip_button' );
            clip.addEventListener( 'onLoad', function(){ alert('loaded baby'); } );

        });
    </script> 
```

我看到警报“加载婴儿”。但是，我从来没有将文本复制到剪贴板中。我在我的计算机和服务器上尝试了本地。

我还访问了此页面[http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04a.html](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04a.html)和自动闪光，但仍然无法正常工作。

我可能做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T08:32:54.153

如果您在使用 zeroClipboard 时遇到问题，您可能想试试这个 jquery 插件：http: [//www.steamdev.com/zclip/](http://www.steamdev.com/zclip/)

zclip 基于 zeroClipboard。易于安装和使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-19T00:13:08.663

仅供参考……ZeroClipboard 项目似乎仍然处于活动状态……截至 2013 年 8 月 31 日刚刚触及： [https ://github.com/zeroclipboard/ZeroClipboard](https://github.com/zeroclipboard/ZeroClipboard)

我刚刚使用 ASP 控件在我的 Visual Studio 2010 ASP.NET C# 项目中成功使用了它。凉爽的！撞！

# java - 传递相同参数时方法执行不同

> ID：10569087
> 
> 赞同：-2
> 
> 时间：2012-05-13T03:23:46.517
> 
> 标签：java

相同的参数传递给同一个对象的同一个方法。它通常会显示为真，这是我所期望的。但是......有时它显示为假。大约 100 次中的 2-3 次。这种方法有什么问题会导致这种行为？

年、月、日是实例变量，分别包含“2012”、“4”、“1”。

```
public boolean isInDateRange(String startDate, String endDate)
{
    if(startDate == null || endDate == null){
        return false;
    }
    Calendar today = Calendar.getInstance();
    today.set(Integer.valueOf(year), Integer.valueOf(month), Integer.valueOf(day));

    Calendar start = Calendar.getInstance();
    //subtract 1 from the month parameter because java.util.Calendar's months
    //go from 0 to 11 instead of 1 to 12.
    start.set(Integer.valueOf(startDate.substring(0, 4)), Integer.valueOf(startDate.substring(5, 7)) - 1, Integer.valueOf(startDate.substring(8, 10)));

    Calendar end = Calendar.getInstance();
    end.set(Integer.valueOf(endDate.substring(0, 4)), (Integer.valueOf(endDate.substring(5, 7))) -1 , Integer.valueOf(endDate.substring(8, 10)));

    return today.compareTo(start) >= 0 && today.compareTo(end) <= 0;
} 
```

这就是我要传递给它的内容

```
calendarDetails.getTuesday().isInDateRange("2012-05-01 00:00:00", "2012-05-01 00:00:00") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T05:25:04.913

您在计算中忽略了时间。在少数情况下毫秒在`Calendar today = ...`和之间跳动`Calendar start = ...`，您最终会得到`today`,`start`和`end`具有相同的日期值，但两者的时间都在`start`和`end`之前`today`。具体来说，它们比您使用`Calendar.getInstance()`返回当前时间的 1 ms 提前了 1 毫秒，以构建所有三个。因此，当该滴答声发生时，`today`不在`start`and之间`end`。如果你不关心它，你应该把时间归零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T03:46:00.067

发布更多信息以帮助您更好地了解哪些输入给出了错误的结果。

你的程序运行良好。

我认为 One Date 不能既大于又小于其他日期。

您在两个参数中都传递了相同的日期。`(2012-05-01 00:00:00)`.

此外，您可以自己调试，在没有得到预期结果时打印日期。

# android - SpannableStringBuffer 限制为 9,999 个字符？

> ID：10569093
> 
> 赞同：0
> 
> 时间：2012-05-13T03:25:18.483
> 
> 标签：android, lg, spannablestring, spannable

我的应用程序从文本文件资产中读取大量数据，并将它们显示在 TextView 的屏幕上。（最大的是 ~450k。）我将文件逐行读入[SpannableStringBuffer](http://developer.android.com/reference/android/text/SpannableStringBuilder.html "SpannableStringBuilder")（因为我删除了一些元数据，例如部分名称）。在我将应用程序投放市场的两年中（超过 7k 的活动设备安装），这种方法一直有效，因此我知道代码是相当正确的。

但是，我最近收到了一位用户关于[LG Lucid](http://www.lg.com/us/support-mobile/lg-VS840 "LG 清醒")（LGE VS840 4G，Android 2.3.6）的报告，称该文本已被截断。从日志条目中，我的应用程序在缓冲区中只有 9,999 个字符。这是[SpannableStringBuffer](http://developer.android.com/reference/android/text/SpannableStringBuilder.html "SpannableStringBuilder")的已知问题吗？还有其他推荐的方法来构建大型[Spannable](http://developer.android.com/reference/android/text/Spannable.html%20Spannable)缓冲区吗？任何建议的解决方法？

除了在每次追加到[SpannableStringBuilder](http://developer.android.com/reference/android/text/SpannableStringBuilder.html "SpannableStringBuilder")时保持单独的预期长度之外，我什至没有检测错误的好方法，因为追加接口返回对象，而不是错误！

我读取数据的代码是：

```
 currentOffset = 0;
    try {
        InputStream is = getAssets().open(filename);
        BufferedReader br = new BufferedReader(new InputStreamReader(is));
        ssb.clear();
        jumpOffsets.clear();
        ArrayList<String> sectionNamesList = new ArrayList<String>();
        sectionOffsets.clear();
        int offset = 0;
        while (br.ready()) {
            String s = br.readLine();
            if (s.length() == 0) {
                ssb.append("\n");
                ++offset;
            } else if (s.charAt(0) == '\013') {
                jumpOffsets.add(offset);
                String name = s.substring(1);
                if (name.length() > 0) {
                    sectionNamesList.add(name);
                    sectionOffsets.add(offset);
                    if (showSectionNames) {
                        ssb.append(name);
                        ssb.append("\n");
                        offset += name.length() + 1;
                    }
                }
            } else {
                if (!showNikud) {
                    // Remove nikud based on Unicode character ranges
                    // Does not replace combined characters (\ufb20-\ufb4f)
                    // See
                    // http://en.wikipedia.org/wiki/Unicode_and_HTML_for_the_Hebrew_alphabet
                    s = s. replaceAll("[\u05b0-\u05c7]", "");
                }
                if (!showMeteg) {
                    // Remove meteg based on Unicode character ranges
                    // Does not replace combined characters (\ufb20-\ufb4f)
                    // See
                    // http://en.wikipedia.org/wiki/Unicode_and_HTML_for_the_Hebrew_alphabet
                    s = s.replaceAll("\u05bd", "");
                }
                ssb.append(s);
                ssb.append("\n");
                offset += s.length() + 1;
            }
        }

        sectionNames = sectionNamesList.toArray(new String[0]);

        currentFilename = filename;

        Log.v(TAG, "ssb.length()=" + ssb.length() +
                 ", daavenText.getText().length()=" +
                daavenText.getText().length() +
                ", showNikud=" + showNikud +
                ", showMeteg=" + showMeteg +
                ", showSectionNames=" + showSectionNames +
                ", currentFilename=" + currentFilename
                ); 
```

查看界面后，我计划用[InputFilter](http://developer.android.com/reference/android/text/InputFilter.html)替换 showNikud 和 showMeteg 案例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:25:20.063

> 这是 SpannableStringBuffer 的已知问题吗？

我在源代码中没有看到任何建议对`SpannableStringBuffer`. 根据您的经验，我猜这是该设备特有的问题，因为设备制造商的工程师做出了一个愚蠢的决定。

> 任何建议的解决方法？

如果您通过 Google Play 商店分发，请在您的控制台中阻止此设备。

或者，不要使用一个巨大的`TextView`，而是`TextView`在一个中使用几个较小的小部件`ListView`（这样它们可以被回收），也许每段一个。这应该具有减少内存占用的额外好处。

或者，生成 HTML 并以`WebView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T17:18:55.137

在编写（并让用户运行）一个测试应用程序之后，他的设备似乎对 有这个任意限制`SpannableStringBuilder`，但没有`StringBuilder`or `StringBuffer`。我测试了一个快速更改以读取 a `StringBuilder`，然后`SpannableString`从结果中创建 a 。不幸的是，这意味着在完全读入之前我无法创建跨度。

我必须考虑`TextView`在 a 中使用多个对象`ListView`，以及使用`Html.FromHtml`来查看这是否更适合我的应用程序的长期计划。

# c++ - C++：使用 libcurl 和流

> ID：10569095
> 
> 赞同：0
> 
> 时间：2012-05-13T03:25:20.900
> 
> 标签：c++, pointers, curl, reference, libcurl

只是想学习C++。我从刮刀开始。这个想法是我想抓取一堆页面，应用正则表达式，然后将我的发现写入文件。

但是，我目前正试图分配 curl 句柄以写入字符串变量。任何指针（我的意思是提示......）？

```
#include <stdio.h>
#include <curl/curl.h>
#include <string>
#include <iomanip>
#include <boost/lexical_cast.hpp>

// Typedefs
using std::string;      using boost::lexical_cast;
using std::cout;
using std::endl;
using std::ostringstream;

// CURL directives
static const string BASE_URL = "http://www.XXXXXX.com/action?page=";
static char* USER_AGENT_STRING = "C++ Scraper"; 

// CURL variables
static CURL* curl;
static CURLcode res;

       void setPageOpts(CURL* c, int count, const ostringstream stream) {
            cout << "Got to the set opts method." << endl;

            // Set URL
            string new_url = BASE_URL + lexical_cast<string>(count);
            curl_easy_setopt(curl, CURLOPT_URL, new_url.c_str());
            curl_easy_setopt(curl, CURLOPT_WRITEDATA, &stream);
        }

        void setConstOpts(CURL *c) {
            // User agent string
            curl_easy_setopt(curl, CURLOPT_USERAGENT, USER_AGENT_STRING);
            //curl_easy_setopt(curl, CURLOPT_VERBOSE, 1);
        }

        void loadCurl() {
            int status = curl_global_init(CURL_GLOBAL_ALL);

            if (status != 0) {  
                cout << "An error has occurred with exit status " << status << endl;
                exit(status);
            }   
        }

        int main() {
            loadCurl();
            curl = curl_easy_init();

            if(curl) {
                setConstOpts(curl);

                for (int i = 1; i < 2; ++i) {           
                    const ostringstream stream;

                    setPageOpts(curl, i, &stream);

                    res = curl_easy_perform(curl);  

                    string output = stream.get();
                    cout << "And the data was: " << endl << endl << output << endl;
                }

                curl_easy_cleanup(curl);
            }

            // Everything went as planned
            return 0;
        } 
```

我得到的当前错误：

```
learn.cpp:15: warning: deprecated conversion from string constant to 'char*'
learn.cpp: In function 'int main()':
learn.cpp:62: error: conversion from 'const std::ostringstream*' to non-scalar type 'std::ostringstream' requested
learn.cpp:67: error: request for member 'get' in 'stream', which is of non-class type 'const std::ostringstream*' 
```

我看到它的方式，我想 CURL 获取内存中流的位置，以便它可以在那里写入。所以我认为我需要使用 & 字符并将其提交。但这似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T03:39:29.253

第一个警告是针对

```
static char* USER_AGENT_STRING = "C++ Scraper"; 
```

文字在哪里`const`，所以你的指针应该是一个指向`const char`.

第二个问题与`const ostringstream stream`. 如果流是`const`，你不能对它做任何改变它的状态的事情——比如读或写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T03:49:37.117

你的定义：

```
 void setPageOpts(CURL* c, int count, const ostringstream stream) 
```

很可能会给你带来麻烦。看起来您的意思是通过引用传递，`stream`以便*可以*更新它：

```
void setPageOpts(CURL* c, int count, ostringstream& stream) 
```

（并且不要忘记`c`在传递时使用）。

然后代替这个：

```
 const ostringstream stream;
                setPageOpts(curl, i, &stream); 
```

调用你的函数：

```
 ostringstream stream;
        setPageOpts(curl, i, stream); 
```

这将允许`stream`更新。

[`std::ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream)没有`::get()`。我想你的意思是：

```
 string output = stream.str(); 
```

您可能还会发现[此答案](https://stackoverflow.com/questions/8020640/libcurl-output-to-variable-instead-of-textfile)很有用，如果没有设置[**`CURLOPT_WRITEFUNCTION`**](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTWRITEFUNCTION)指定回调函数来使用您的`std::ostringstream`指针，当 libcurl 尝试访问`write`它时，您会遇到访问冲突。

# ruby-on-rails-3 - UJS 在 application.js 回调中失败

> ID：10569103
> 
> 赞同：1
> 
> 时间：2012-05-13T03:26:10.683
> 
> 标签：ruby-on-rails-3, ujs

当我可以动态添加回复时，我有一个简单的评论系统，并且我正在尝试添加一种允许用户取消回复的 UJS 方式。我有一个 id="comment_reply_content" 的文本字段，然后是

```
<input id="cancel_reply" data-remote="true" class="btn btn-mini" type="button" value="Cancel"> 
```

在我的 application.js 文件中，我添加了：

```
$('#cancel_reply').live('ajax:success', function() {
   alert('hello');   
   // $('#comment_reply_content').val('');
}); 
```

无论我做什么，我都无法让它发挥作用。我注释掉了清除表单等的实际功能性javascript，但现在我求助于一个简单的警报进行测试。将警报单独放在我的 application.js 中可以正常工作。我的控制器中有 *.js 文件，这些文件正在创建新的回复表单等，所以我知道 UJS 正在工作。我很确定我只是在这里遗漏了一些简单的东西。我尝试将其更改`live`为`bind`没有成功。

# javascript - Javascript遍历稀疏数组

> ID：10569106
> 
> 赞同：13
> 
> 时间：2012-05-13T03:27:05.170
> 
> 标签：javascript, arrays

我有一个稀疏数组（索引不连续），如下所示：

```
var testArray = { 0: "value1", 5: "value2", 10: "value3", 15: "value4" }; 
```

我只想遍历每个项目，做一些事情，并能够在特定条件下中断。

我对 Javascript 还很陌生，但没有找到合适的方法。这是我尝试过的：

1.  内置“for..in”。似乎这[不是遍历数组的正确方法](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)

2.  来自 ECMASCRIPT5 的[forEach 。](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)这一个迭代正确，但我无法脱离循环。

3.  [_.each()](http://documentcloud.github.com/underscore/#each)来自 Underscore.js。结果与#2 相同。

4.  [$.each()](http://api.jquery.com/jQuery.each/)来自 JQuery。有了这个，我可以通过返回 false 来中断，但它不会正确迭代。对于上面的例子，不是在 0、5、10、15 处迭代，而是在 0、1、2、3、4、5、6 处迭代……这显然不是我所期望的。

所以我的问题是：**有没有一种简单的方法来迭代稀疏数组，并有可能在 Javascript 中的循环期间中断，或者使用其他数据结构（如哈希表）会更好吗？如果有，有什么推荐吗？**

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-13T03:32:26.023

`for...in`语法有什么问题？您有一个对象，因此`for...in`语法完全可以使用：

```
var testArray = { 0: "value1", 5: "value2", 10: "value3", 15: "value4" };

for (var key in testArray) {
  var value = testArray[key];

  if (...) {
    break;
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T03:33:01.143

For..in 在处理对象哈希时并不是最糟糕的事情。应避免与数组 ( `[]`) 一起使用，但在这里应该没问题：

```
var val;
for (index in testArray) {
  if (index == 10) {
    break;
  } else {
    val = testArray[index];
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-20T21:17:51.287

你所拥有的不是一个数组，它只是一个对象。

您可以通过以下方式进行测试：

```
Array.isArray(testArray) 
```

值得一提的是，JavaScript 确实有据说是稀疏的数组。当您使用`delete`运算符删除元素或将长度属性更改为更大时，就会发生这种情况。

要回答您的问题，通过对象循环，最好的方法是`Object.keys(obj).forEach()`.

```
var o = {"a":3, "b":4};

Object.keys(o).forEach(
    function (key) {
        var val = o[key];
        console.log("Key:" + key);
        console.log("Value:" + val);
    }
); 
```

可能的问题 `for (var p in o) {…}`是它还将循环遍历父级（即原型链）中的任何可枚举属性。但是，通常它不会发生，如果您通过字面表达式定义对象`var obj = {...}`，默认情况下它的父对象是 Object.prototype，并且它没有任何可枚举的属性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-13T03:36:08.443

你必须吻别的第一件事是“阵列”。ECMAscript中没有真正`Array`的东西（忘记类型数组和二进制技巧）。

所以你得到的是一个普通的`Object`. `.forEach`要迭代它，如果你对 ES5 很满意，我建议你使用。如果您需要提前中断该迭代，您可能需要使用 ES5 方法，例如`.some()`or `.every()`，例如：

```
Object.keys( testArray ).some(function( key ) {
    if( +key < 15 ) {            
        return true;
    }

    console.log(key, testArray[key]);
}); 
```

当遇到一个数值不低于 15 的键时，这将通过返回 来中断迭代`true`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-24T00:25:15.557

您也可以使用 (abuse)`Array.every`代替`Array.fromEach`提前跳出循环。

```
var pre = document.getElementById('console');

var arr = new Array();
arr[10] = 'Hello';
arr[20] = 'World!';
arr[30] = 'stop';
arr[40] = 'Goodbye';

arr.every(function (val, idx) {
  if (val !== 'stop') {
    pre.textContent += idx+': '+val+'\n';
    return true;
  }
});
```

```
<pre id="console"></pre>
```

基本上，只要其中一个元素返回，就会`Array.every`立即返回。这使您可以尽早跳出循环。`false``false`

# actionscript-3 - Flex 3.2：FlexPrintJob 每页输出一行 PrintDataGrid

> ID：10569107
> 
> 赞同：0
> 
> 时间：2012-05-13T03:27:07.970
> 
> 标签：actionscript-3, apache-flex, printing, datagrid, flex3

我正在尝试使用 FlexPrintJob 在 Flex 3.2 中打印表格。我需要正常的打印行为 - 如果所有行都适合单页，则需要一页，如果有足够的数据可以填充一页以上，则需要整页的行，然后是部分填充的页面。不知何故，我每行得到一个页面，其中每个页面都有一个表头，然后是一行数据，然后是空白空间。

包含 15 行的表格会生成 15 页的文档。我在 Firefox 和 IE8 中得到相同的行为。

什么可能导致这种行为？谢谢你的帮助！

这是代码：

```
 // The function to print the output.
    public function onPrint():void {
        var printJob:FlexPrintJob = new FlexPrintJob();
        printJob.start();

        var thePrintView:FormPrintView = new FormPrintView();
        addChild(thePrintView);
        thePrintView.initPrintDataGrid(openSequences);
        // thePrintView.printOpenTimeGrid.dataProvider = printOpenTime.dataProvider;
        thePrintView.validateNow();

        thePrintView.width=printJob.pageWidth;
        thePrintView.height=printJob.pageHeight;

        printJob.addObject(thePrintView, FlexPrintJobScaleType.MATCH_WIDTH);

        while (thePrintView.printOpenTimeGrid.validNextPage) {
            //Put the next page of data in the view.
            thePrintView.printOpenTimeGrid.nextPage();
            //Queue the additional page.
            printJob.addObject(thePrintView, FlexPrintJobScaleType.MATCH_WIDTH);
        }

        printJob.send();
        removeChild(thePrintView);
        this.onClose();
    } 
```

PrintDataGrid 直接位于 TitleWindow 对象中：

```
 <!-- The data grid. The sizeToPage property is true by default, so the last
    page has only as many grid rows as are needed for the data. -->
<mx:PrintDataGrid id="printOpenTimeGrid" dataProvider="{openSequences}" sizeToPage="true" width="100%" height="100%">
    <mx:columns>
        <mx:DataGridColumn dataField="startDate" headerText="Seq Date" width="70">
            <mx:itemRenderer>
                <mx:Component>
                    <mx:VBox>
                        <mx:DateFormatter id="startDateFormatter" formatString="M/D/YYY"/>
                        <mx:Label fontWeight="bold" text="{startDateFormatter.format(data.startDate)}"/>
                    </mx:VBox>
                </mx:Component>
            </mx:itemRenderer>
        </mx:DataGridColumn>
        <mx:DataGridColumn dataField="equipCode" headerText="EQP" width="40" />
        <mx:DataGridColumn dataField="base" headerText="BSE" width="40" />
        <mx:DataGridColumn dataField="sequenceNumber" headerText="SEQNO" width="45" />
        <mx:DataGridColumn dataField="seat" headerText="ST" width="40" />
        <mx:DataGridColumn headerText="DPRT" width="40">
            <mx:itemRenderer>
                <mx:Component>
                    <mx:VBox>
                        <mx:DateFormatter id="departTimeFormatter" formatString="JJNN"/>
                        <mx:Label fontWeight="bold" text="{departTimeFormatter.format(data.startDate)}"/>
                    </mx:VBox>
                </mx:Component>
            </mx:itemRenderer>
        </mx:DataGridColumn>
        <mx:DataGridColumn dataField="terminationDate" headerText="ARVL/DT" width="60" >
            <mx:itemRenderer>
                <mx:Component>
                    <mx:VBox>
                        <mx:DateFormatter id="arvDateFormatter" formatString="JJNN/DD"/>
                        <mx:Label fontWeight="bold" text="{arvDateFormatter.format(data.startDate)}"/>
                    </mx:VBox>
                </mx:Component>
            </mx:itemRenderer>
        </mx:DataGridColumn>
        <mx:DataGridColumn dataField="tripValue" headerText="TTL" width="50" />
        <mx:DataGridColumn dataField="blockType" headerText="Block Type" width="170" />
    </mx:columns>
</mx:PrintDataGrid> 
```

打印输出看起来像这样 ![每页一行](../Images/8fb303032a627304440535e6f8292cf5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:24:48.690

该问题通过向 TitledWindow 对象（PrintDataGrid 的包装器）添加“高度”参数来解决。当高度设置为 800 时，内容会打印到整页上，并且不显示滚动条。

```
<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml" title="Open Time" height="800">
<mx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import mx.core.*;

        [Bindable]
        private var openSequences:ArrayCollection;

        public function initPrintDataGrid(sequences:ArrayCollection):void {
            openSequences = sequences;
        }
    ]]>
</mx:Script>

<!-- The data grid. The sizeToPage property is true by default, so the last
    page has only as many grid rows as are needed for the data. -->
<mx:PrintDataGrid id="printOpenTimeGrid" dataProvider="{openSequences}" sizeToPage="true" 
    width="100%" height="100%">
    <mx:columns> 
```

# wcf - 使用 DTO，在 WCF 中更新 BLL 属性的正确方法是什么？

> ID：10569109
> 
> 赞同：1
> 
> 时间：2012-05-13T03:27:34.987
> 
> 标签：wcf, events, c#-4.0, properties, dto

现在已经到了 WCF 地狱的第 74 级，我被判处永远的 DTO 混乱。我非常习惯于像这样明智地封装对象/属性设置机制，其中在构造函数中设置了一些默认值，并且该值的重置“弄脏”了对象：

```
public class SomeObject
{
    private int someValue;

    public int SomeValue
    {
        get { return someValue; }
        set 
        { 
            someValue = value; 
            // now SomeObject.IsDirty = true;
        }
    }

    public SomeObject(int someDefaultValue)
    {
        someValue = someDefaultValue;
    }
} 
```

DTO 似乎强烈反对这种简单的构造，我假设（但不知道）通过`DataContract`and`DataMember`装饰器。当我单步执行时，我看到堆栈中有一些我无法进入的调用，但这大致是结果：

```
[DataContract]
public class SomeObjectDTO
{
    private int someValue;

    [DataMember]
    public int SomeValue
    {
        get { return someValue; }
        set
        {
            // apparently the set is getting called by the constructor?
            someValue = value;
        }
    }

    public SomeObjectDTO(int someDefaultValue)
    {
        //apparently no one cares what I want to do here? next line won't fire
        someValue = someDefaultValue;
    }
} 
```

我可以看到构造函数参数的值流入`set`，但我不知道如何，也看不到如何将 mapper-constructed-default 值与 user-edited-property-value-and-now 分开-it-must-be-returned-to-the-service 编辑。

我确定这是对 DTO 的滥用，但我看不到正确的 WCF 方法来处理这些非常基本的常见情况：

*   您如何将属性值的实例化与对其的编辑分开？
*   如果您有一个具有 50 个属性的对象/DTO，您如何知道用户何时更改了其中的 49 个属性，以及如何将这些更改一次性发送回 BLL 母对象船？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:16:23.050

对这个问题缺乏回应可能与我问得不够清楚有关，但它的要点对 WCF 初学者很重要，我怀疑这里的 WCF 权威很少...无论如何我现在可以回答它我自己，以防其他人被困在一个月前的地方。

如果您单步执行使用 WCF 的 WCF 操作，则很容易误解正在发生的事情，除非您仔细观察您的调用堆栈。有些`SomeObjectDTO`可能在服务器端正确构建，您可能认为调用已完成......只是看到它再次通过。我想 MSFT 没有办法记录这一点，但是“第二个”构造——它将忽略任何使用参数的构造函数——实际上*是反序列*化。对于`DataContract`初学者，我怎么强调都不为过：你会在服务端根据一些规则来构造你的对象，然后它会（除非你已经实现了自己的序列化器）100% 失明地被序列化和反序列化，这在客户端产生一个新的、无参数的构造，意思是*`set`除了方法之外，你不能使用任何东西来构造它*。这是因为它没有被“构建”，而是从关于自身的一串元数据中重建（或者，如某些人所说，“重新水化”）。它只是属性，串在一起，在一个父元素下。

Sooo至于将某些`IsDirty`逻辑构建到 a中的问题`DataMember`，算了吧。这些对象是传输机制，一次性的，只有可以序列化的东西一样聪明，这很愚蠢：名称-值对的列表。了解 50 个属性中的 1 个何时更改或未更改的唯一方法是在一些更智能（至少半）持久的环境中比较对象之间的值：这是什么？不，不是吗？哦，很脏。乘以 50。或 1000。或多少。

有趣的是，在 WCF 中实现的 SOA 和“解耦”代表了发展的巨大飞跃。他们不; 它们代表了一种非常薄弱的​​共识，一种最小公分母的方法，当分离到单个应用程序级别时，需要大量的重复工作。最佳情况下，复制是对模型、操作和协议的联合故障排除；最坏的情况，您将编写*n 个*版本的代码来处理*n*案例。在 .NET 到 .NET 的实现中，这变得霓虹灯可见，因此更加痛苦，如果 .NET 是您的平台并且 MSFT 堆栈您的环境，那么这就是反对使用 WCF 的有力论据。投入数以千计的隐藏配置默认值等待以零准确的异常报告来破坏操作，您可以将其称为一天，或者比您当前的范围多三到四个人月。

# c# - 如何选中/取消选中 WPF datagridcheckboxcolumn 中的复选框？以及如何在后面的代码中检索 isChecked 值？

> ID：10569112
> 
> 赞同：0
> 
> 时间：2012-05-13T03:28:09.220
> 
> 标签：c#, .net, wpf

我正在构建一个电子邮件发送应用程序。在我的窗口中，我有以下数据网格：

```
<DataGrid AutoGenerateColumns="False" CanUserAddRows="False" HorizontalAlignment="Stretch" Name="dgdTo" VerticalAlignment="Stretch" ItemsSource="{Binding}" >
        <DataGrid.Columns>
            <DataGridTextColumn x:Name="contactFName" IsReadOnly="True" Binding="{Binding Path=FirstName}" Header="First Name" Width="2*"/>
            <DataGridTextColumn x:Name="contactLName" IsReadOnly="True" Binding="{Binding Path=LastName}" Header="Last Name" Width="2*"/>
            <DataGridTextColumn x:Name="contactEmail" IsReadOnly="True" Binding="{Binding Path=Email}" Header="E-mail" Width="2*"/>
            <DataGridCheckBoxColumn x:Name="mailSend" Header="Send mail" Width="*"/>
        </DataGrid.Columns>
</DataGrid> 
```

前三列绑定到数据库中的 ContactPerson 表。最后一列指示是否应向此人发送电子邮件。因为，我在 ContactPerson 对象中没有字段“boolean SendMail”，所以我需要另一种方法来获取复选框的值。

如何获取/设置特定行的复选框值？（C#）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:27:21.480

您需要在数据库和用户界面（[ViewModel](http://en.wikipedia.org/wiki/Model_View_ViewModel)）之间引入一个中间对象。

在您的情况下，这可能是[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)，`UIContactPerson`其中是带有附加**SendMail**布尔属性的数据库`UIContactPerson`副本。`ContactPerson`

 **然后，您无需将 UI 直接绑定到数据库对象，而是绑定到 ViewModel。显然，您还需要连接一些从底层数据存储中刷新数据并将更改发回的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T07:00:36.680

首先，要为您的数据网格设置值，请创建一个 DataTable（内存中的数据库）。在该 DataTable 中创建列，即`FirstName`, `LastName`, `Email`。它们都将是字符串类型。

添加应为 Boolean DataType 的列并将其命名`Sendmail`。以这种方式绑定它`Binding="{Binding Path=Sendmail}"`。现在，当您提供gridview的数据源时，最后一列复选框中的任何地方都会被勾选并取消选中是否为假。**

# php - 在标签之间回显内容？

> ID：10569118
> 
> 赞同：1
> 
> 时间：2012-05-13T03:30:26.043
> 
> 标签：php

是否可以仅使用 获取然后回显标签之间的内容`PHP`？

例如。如果这是以下内容`HTML`：

```
<td class="header subject">Text</td> 
```

你怎么`Text`能从里面得到标签然后`echo`呢？

我认为这会起作用：

```
<? 
preg_match("'<td class=\"header subject\">(.*?)</td>'si", $source, $match);
if($match) echo "result=".$match[1];
?> 
```

但`$source`变量必须是整个页面。

注意：该类只有一个实例`header subject`，因此多个标签应该没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T05:06:26.343

[您应该使用DOMDocument](http://php.net/manual/en/class.domdocument.php)类解析文本，并获取`textContent`元素的 。

```
$html = '<td class="header subject">Text</td>';

$dom = new DOMDocument();
$dom->loadHTML( $html );

// Text
echo $dom->getElementsByTagName("td")->item(0)->textContent; 
```

或者，如果您需要循环浏览许多`td`元素并仅显示具有类 value 的那些文本`"header subject"`，您可以执行以下操作：

```
$tds = $dom->getElementsByTagName("td");

for ( $i = 0; $i < $tds->length; $i++ ) {
  $currentTD = $tds->item($i);
  $classAttr = $currentTD->attributes->getNamedItem("class");
  if ( $classAttr && $classAttr->nodeValue === "header subject" ) {
    echo $currentTD->textContent;
  }
} 
```

演示：[http ://codepad.org/o1xqrnRS](http://codepad.org/o1xqrnRS)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T05:02:06.177

假设你的问题是因为你不知道如何解释页面，你可能想试试这个：

```
<?php 
$lines = file("/path/to/file.html");
foreach($lines as $i => $line)
{
   if (preg_match("'<td class=\"header subject\">(.*?)</td>'si", $line, $match))
   {
      echo "result=". $match[$i];
   }
}
?> 
```

# amazon-s3 - 使用 GET、PUT 方法在 Amazon S3 云中获取和存储对象时，数据大小有哪些限制？

> ID：10569119
> 
> 赞同：3
> 
> 时间：2012-05-13T03:30:40.853
> 
> 标签：amazon-s3, cloud, storage

使用 GET PUT 方法从亚马逊 s3 云存储和检索数据可以发送的数据大小是多少，我还想知道在哪里可以了解更多关于 Amazon S3 中可用于存储的 API 的信息，而不是文档已经提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T10:24:55.787

该`PUT`方法在相应的[Amazon S3](http://aws.amazon.com/s3/)常见问题中得到解决[我可以存储多少数据？](http://aws.amazon.com/s3/faqs/#How_much_data_can_I_store)：

> 您可以存储的数据总量和对象数量不受限制。单个 Amazon S3 对象的大小范围为 1 字节到 5 TB。**可以在单个 PUT 中上传的最大对象为 5 GB。**对于大于 100 兆字节的对象，客户应考虑使用分段上传功能。*[强调我的]*

如前所述，对于已经大于 100MB 的对象，建议[使用 Multipart Upload API 上传对象，对于大于 5GB 的对象则需要。](http://docs.amazonwebservices.com/AmazonS3/latest/dev/uploadobjusingmpu.html)

该`GET`方法本质上是无限的。请注意，S3 支持开箱即用的[BitTorrent 协议，这（取决于您的用例）可能会大大简化处理大文件的工作，请参阅](http://en.wikipedia.org/wiki/BitTorrent_%28protocol%29)[将 BitTorrent 与 Amazon S3 一起使用](http://docs.amazonwebservices.com/AmazonS3/2006-03-01/dev/S3Torrent.html?r=3558)：

> Amazon S3 支持 BitTorrent 协议，因此开发人员可以在大规模分发内容时节省成本。[...]

# hadoop - Hadoop 本地模式：映射器和减速器的数量

> ID：10569123
> 
> 赞同：0
> 
> 时间：2012-05-13T03:31:18.647
> 
> 标签：hadoop, mapreduce

我需要在我的 Mac 中以 Hadoop 本地模式对一些 Hadoop MR 代码进行原型设计，我想听听可能存在的一些问题。

一个特别的问题是关于映射器和化简器的数量。基本上两者都是一个？指定超过 1 会起作用吗？我将使用较小的样本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T05:14:11.977

您不能在本地模式下指定映射器和减速器的数量。它始终是单线程的。同时，如果您想分析您的映射器或减速器的性能 - 这将是非常现实的。
当所有守护进程都在单台机器上运行时，可以有许多映射器和减速器的最近模式是伪分布式模式。
以上两者都不会考虑数据局部性、洗牌性能可能存在的问题。我也不希望您的开发机器与生产机器具有相同的磁盘子系统。
简而言之-如果您在本地模式下的单个映射器/减速器性能较低-您可以开始修复它。如果它运行良好 - 在规划集群之前尝试真正的硬件。

# php - 是否可以在完成处理之前在 while 循环中打印 PHP？

> ID：10569125
> 
> 赞同：2
> 
> 时间：2012-05-13T03:31:48.097
> 
> 标签：php

```
for($x=0;$x<100000;$x++) {
    echo "hello $x";
} 
```

因此，通常情况下，它会先处理完所有内容，然后一次打印所有内容。有没有办法在发送命令时继续打印消息，以便我会看到一个新的`hello $x`附加信息，还是必须使用 jQuery/JavaScript？

更新：

我问是因为我正在尝试运行一个长测试脚本并让它在浏览器上一一显示所有结果，这样我就不必去检查日志，而可以直观地看到颜色编码的结果。我正在尝试对此做出类似的效果：[http](http://tools.css3.info/selectors-test/test.html) ://tools.css3.info/selectors-test/test.html如果有人可以提供 jQuery 的简短示例（如果必须这样做），我会很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T04:10:35.593

虽然可以通过控制输出缓冲区来实现，但我不会这样做，主要是因为它会延迟 JavaScript DOMReady 事件。

如果您正在寻找视觉效果，您应该使用 JavaScript（但根据您的问题，我没有看到任何使用 Ajax 的理由）。它可以通过一个简单的`setInterval`. 考虑一个最初为空的`<div id="hello">`：

```
var i = 0;
var timer = setInterval(function(){
    if(i == 10000) {
        clearInterval(timer);
        return;
    }
    var div = document.getElementById('hello');
    div.innerHTML += 'hello ' + i + '<br>';
    i++;
}, 250); 
```

* * *

我刚刚看到您的编辑，现在我认为您实际上应该使用 Ajax！您链接到的示例确实如此。基本上，您必须在 JavaScript 中设置一个测试队列，其中每个测试都有一个唯一的 URL。然后只需使用 Ajax 一次触发一个请求（jQuery 并且[`$.get`](http://api.jquery.com/jQuery.get/)将是最简单的方法）。下面假设一个`<ul>`而不是我之前示例中的 div ，并且服务器将响应每个测试的成功或失败消息：

```
var tests = [
    'http://example.com/test1',
    'http://example.com/test2',
    'http://example.com/test3',
];

function processQueue() {
    if(tests.length > 0) {
        var test = tests.shift();
        $.get(test, function(response) {
            $('#some_ul').append('<li>' + response + '</li>');
            processQueue();
        });    
    }
}

processQueue(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T03:37:10.723

是的，如果您禁用输出缓冲： http: [//php.net/manual/en/book.outcontrol.php](http://php.net/manual/en/book.outcontrol.php)

但是正如@Blender 所建议的那样，您最好使用 AJAX（通常使用 jQuery 完成）来执行此操作。

# php - iOS 中的身份验证 - 你可以使用 cookie/会话吗？

> ID：10569135
> 
> 赞同：5
> 
> 时间：2012-05-13T03:33:02.850
> 
> 标签：php, iphone, authentication

我想根据用户的登录情况从 PHP 向 iPhone 应用程序提供信息。我可以通过会话/cookie 路由来验证来自应用程序的请求还是必须使用某种令牌身份验证？基本上，如果我从 iPhone 应用程序调用服务，php 可以留下 cookie（与浏览器相同）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T03:35:27.960

是的 - NSHTTP 方法在幕后处理 cookie。

[您也可以使用NSHTTPCookieStorage](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSHTTPCookieStorage_Class/Reference/Reference.html)配置行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-24T19:51:21.223

这是[NSURLRequest](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/index.html#//apple_ref/occ/cl/NSURLRequest)文档。我认为 NSHTTPCookie 的链接比这个问题需要的更多。

看到[这个答案](https://stackoverflow.com/a/9148844/1312094)

# visual-studio - Matlab 可以将字符串中的数据实时传递到 Visual Studio 2010 吗？

> ID：10569137
> 
> 赞同：0
> 
> 时间：2012-05-13T03:33:25.850
> 
> 标签：visual-studio, visual-studio-2010, matlab, matlab-deployment

我正在做一些 Matlab 编码，它能够将数据实时传递到 Visual Basic 2010。你们中的任何人对此有任何想法吗？我很着急。谢谢 :D

p/s：我为我糟糕的英语语法道歉，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T06:35:34.323

我没有使用过 Visual Basic，但我想到了至少四个不同的选项：

1.  将数据保存到 MATLAB 中的文件中，并在 Visual Basic 中轮询文件，例如。每秒，每十秒，每分钟等根据您的需要（响应时间与 CPU 使用率）。

2.  从 MATLAB 启动 Visual Basic，并将数据作为命令行参数传递给 Visual Basic。在 Visual Basic 处理较早的数据集时，使用并行计算工具箱保持 MATLAB 运行。在 MATLAB 中，您可以启动新的 Visual Basic 实例/进程并让旧的实例/进程保持活动状态，或者如果您愿意，可以终止它们。

3.  在 MATLAB 中，将数据作为 IP 数据包发送到 127.0.0.1 的某个端口，在 Visual Basic 中，继续读取 127.0.0.1 的同一端口。

4.  在 MATLAB 中，将数据作为电子邮件发送到本地电子邮件地址，在 Visual Basic 中，继续阅读同一地址的电子邮件。

我认为最好的解决方案取决于数据是什么，以及你想要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T17:56:40.033

在 VS 中创建一个 .Net DLL。然后在 Matlab 中加载程序集并在 Matlab 中使用它。Matlab 可以在您的类或 GUI 中直接分配变量（即传递给 VB）。

# c# - Azure C# 服务器套接字编程

> ID：10569138
> 
> 赞同：1
> 
> 时间：2012-05-13T03:33:30.797
> 
> 标签：c#, sockets, azure

在基于 Azure 的 Web 应用程序中，我希望客户端能够将 TCP 数据包发送到我服务器上的端口 293，并且作为响应，我的 Web 应用程序应该为客户端打开一个套接字（并且能够发回 TCP ）。

它在 Azure 中的工作方式与在任何 C# 服务器中的工作方式相同吗？套接字 C# 文件是否进入 Web 角色或辅助角色？我可以/应该使用哪些课程？

感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T05:04:13.600

Web 角色和辅助角色本质上是分别运行和不运行 IIS 的 Windows Server 2008 SP2/R2。至于代码，请在 Windows Server 中执行任何操作来侦听特定端口。

端口映射到特定角色。因此，如果您有一个 Web 角色并在端口 293 上创建一个输入端点，那么该流量将被定向到您的 Web 角色（并在所有实例之间进行负载平衡）。同样，如果您在 Worker Role 上设置端口，流量将流向 Worker Role 的实例。

如果您的套接字侦听器实际上要保存正在上传的数据，您需要确保保存的数据进入*持久存储*- 即 Windows Azure blob 或表，或 SQL Azure。如果您写入本地磁盘（包括分配为本地资源的磁盘本地磁盘空间），则它是不持久的，并且如果出现问题（例如磁盘故障），您不能指望数据仍然存在。

# jquery - jquery：如何在此脚本中添加复选框和收音机的验证？

> ID：10569141
> 
> 赞同：0
> 
> 时间：2012-05-13T03:33:43.420
> 
> 标签：jquery

我正在为需要一些特殊验证代码的客户端开发应用程序。我很接近，但我卡在我的**复选框**和**单选**按钮验证上。我正在使用下面的代码来查找和过滤可见字段集中的必填字段。

以为我可以在同一个 jquery 查找/过滤器中包含我的输入：复选框字段，但是检查和无线电的验证不适用于 [return $.trim($(this).val()) === ""] . 我必须如何在查找/过滤器中获取**not :checked**并将结果包含在我的错误消息中

如何为未选中/选择但必需的复选框和单选按钮字段包含/添加搜索/验证？[**注意**：第三个文件。准备好是我工作的一次]

**我的jQuery：**

```
<script type="text/javascript">
            $(document).ready(function() {
                $('fieldset#section-11,fieldset#section-12,fieldset#section-13').hide(); 
            });//end of close all fieldsets

            $(document).ready(function() {
                var projType = new Array(
                        {value : 'Cars', sect_id : 'fieldset#section-11'},
                        {value : 'Planes', sect_id : 'fieldset#section-12'},
                        {value : 'Boats', sect_id : 'fieldset#section-13'}
                    ); //end of projType array

            $("select#1169").on('change',function () {
                var dropDownVal = $(this).val();
                var sect_id ="";
                    $(projType).each(function() {
                        $(this.sect_id).hide(); //hide all section each time you run thru here
                            if(this.value == dropDownVal) 
                                {
                                    $(this.sect_id).show();
                                }
                    });
            });
            });
$(document).ready(function(){
    $("#btnCatchReqFlds").on('click', function(){
        $("#holdErrMsg").empty();
        var reqButEmpty = $('fieldset:visible').find('input[type="text"][class*="-required"],textarea[class*="-required"],select[class*="-required"]').filter(function() 
            {
                    return $.trim($(this).val()) === "";
            });
                    if(reqButEmpty.length>0)
                        {
                            reqButEmpty.each(function() {
                                $('#holdErrMsg').append("Please fill in the " + this.name + "<br />"); 
                            });
                        }
                    return !reqButEmpty.length;
                });
        });

        </script> 
```

**我的html>>**

```
<form method="post" action="">
    <div id="holdErrMsg"></div>
    <fieldset id="mainSection" name="mainSection">
                <legend style="color:blue; font-weight:bold">Project Overview Section</legend>

                <table style="width: 100%">
                    <tr>
                        <td style="height: 33px; width: 178px;">Name</td>
                        <td style="height: 33px"><input  id="1125" name="1125" class="1125-required" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 33px; width: 178px;">Email</td>
                        <td style="height: 33px"><input id="1026" name="1026" class="1026-required" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="width: 178px">Product Title</td>
                        <td><input  id="1089" name="1089" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="width: 178px">Product Type</td>
                        <td><select id="1169" name="1169">
                        <option value="">Select</option>
                        <option value="Cars">Cars</option>
                        <option value="Boats">Boats</option>
                        <option value="Planes">Planes</option>
                        </select></td>
                    </tr>
                                        <tr><td>
                                        <button id="btnCatchReqFlds" type="button" name="btn">Check Required Fields</button>
                                        </td></tr>
                                    </table>
            </fieldset>

            <fieldset id="section-11" name="section-11">
                <legend style="color:fuchsia; font-weight:bold">Car Details Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:*</label></td>
                        <td style="height: 35px"><input id="1245" class="1245-required" name="1245" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color:*</td>
                        <td style="height: 35px">
                        <select id="1433" class="1433-required" name="1433">
                        <option value="">Select</option>
                        <option value="Orange">Orange</option>
                        <option value="Blank">Blank</option>
                        <option value="Green">Green</option>
            </select></td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1290" name="1290" class="1290-required" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset>

            <fieldset id="section-12" name="section-12">
                <legend style="color:fuchsia; font-weight:bold">Plane Details Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:</label></td>
                        <td style="height: 35px"><input id="1245" name="1245" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color*:</td>
                        <td style="height: 35px">
                                                <input type="checkbox" name="1433[]" id="1433[]" value="Orange" class="1433[]-required"/>Orange
                                                <input type="checkbox" name="1433[]" id="1433[]" value="Blue" class="1433[]-required"/>Blue
                                                <input type="checkbox" name="1433[]" id="1433[]" value="Green" class="1433[]-required"/>Green
                        </td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset>
            <fieldset id="section-13" name="section-13">
                <legend style="color:fuchsia; font-weight:bold">Boat Details Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:</label></td>
                        <td style="height: 35px"><input id="1245" name="1245" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color:*</td>
                        <td style="height: 35px">
                                                <input type="radio" name="1834[]" id="1834[]" value="None" class="valuetext" class="1834[]-required">None
                                                <input type="radio" name="1834[]" id="1834[]" value="All" class="valuetext" class="1834[]-required">All
                       </td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset><br>
<fieldset id="section-1011" name="section-1011">
                <legend style="color:green; font-weight:bold">Misc Info Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:</label></td>
                        <td style="height: 35px"><input id="1301" name="1301" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color:</td>
                        <td style="height: 35px">
                        <select id="1302" name="1302">
                <option value="Orange">Orange</option>
                        <option value="Blank">Blank</option>
                        <option value="Green">Green</option>
            </select></td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1303" name="1303" class="1303-required" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset>

</form>​
        <?php
        // put your code here
        ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T03:53:59.273

Hiya在这里用你的代码**做了一个演示：http:** [//jsfiddle.net/MfVJT/](http://jsfiddle.net/MfVJT/)

**使用验证插件** 的一点额外简单演示[http://jsfiddle.net/9jSGN/](http://jsfiddle.net/9jSGN/)

现在它将检测 1433 即复选框，用于在代码中进行验证。请告诉我。

**只是一个建议**:) 我不确定您是否正在根据需要重新编写验证插件，但请在此处查看：http: [//docs.jquery.com/Plugins/Validation/](http://docs.jquery.com/Plugins/Validation/)

希望这会有所帮助，请让我知道它是如何进行的，这应该会有所帮助，问题在于字段设置关闭标签。

```
$("#signupForm").validate({
    rules:{
        termsConditions : "required"
    }

}); 
```

# mysql - mysql中的交叉表

> ID：10569142
> 
> 赞同：0
> 
> 时间：2012-05-13T03:34:18.177
> 
> 标签：mysql, crosstab

我有这个数据

```
| car_name | year | price 
| Honda    | 2011 |  123
| Honda    | 2012 |  124
| Suzuki   | 2011 |  1234
| Suzuki   | 2012 |  1235 
```

我将如何将其更改为

```
| car_name | 2011 | 2012 |
| Honda    | 123  | 124
| Suzuki   | 1234 | 1235 
```

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:38:17.303

在 MySQL 中，您可以执行以下操作：

```
SELECT car_name,
  max(case when year = '2011' then price ELSE 0 END) as `2011`,
  max(case when year = '2012' then price ELSE 0 END) as `2012`
FROM t
GROUP BY car_name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/63e46/8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T04:35:39.463

在 PHP 中，这是您的答案：

```
$sql = "SELECT DISTINCT `year` FROM `table`";
$result = mysql_query($sql);

$sql2_select = "SELECT t1.`car_name`";
$sql2_from = "FROM `table` t1";

$i = 2;
while($row = mysql_fetch_row($result)) {
  $year = $row[0];

  $sql2_select .= ", t{$i}.`price` AS `$year`"

  $sql_from .= " LEFT JOIN (SELECT `car_name`, `price` WHERE `year` = '$year') AS t{$i}";
  $sql_from .= " ON t1.`car_name` = t2.`car_name`";

  $i++;
}

$sql2 = $sql2_select . ' ' . $sql2_from . ' ' . "GROUP BY t1.car_name";

$result = mysql_query($sql2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-15T14:00:56.853

在 MySQL 中进行交叉表的一种方法是使用子选择：

```
select car_name, 
(select price from t t2 where t2.car_name = t1.car_name and year = 2011) as '2011',
(select price from t t2 where t2.car_name = t1.car_name and year = 2012) as '2012'
from t t1
group by car_name 
```

[SQL小提琴](http://sqlfiddle.com/#!2/63e46/11)

如果您每年每辆车有多个记录，那么 sum(price)。

# ruby - 捆绑 gem 和 datamapper 的问题：与 muti_json 版本冲突？

> ID：10569145
> 
> 赞同：2
> 
> 时间：2012-05-13T03:35:13.797
> 
> 标签：ruby, sinatra, rvm, bundler, datamapper

我有一个使用 nginx/unicorn/sinatra (bundler/rvm) 运行的站点。在我最后一次之后`bundle update`，我收到一个错误：

```
in `raise_if_conflicts': Unable to activate dm-serializer-1.2.1, because multi_json-1.3.5 conflicts with multi_json (~> 1.0.3) 
```

我的 Gemfile 是：

```
source "http://rubygems.org"

gem 'unicorn'
gem 'sinatra'
gem 'datamapper'
gem 'dm-mysql-adapter'
gem 'haml'
gem 'sass'
gem 'omniauth-twitter' 
```

Gemfile.lock 没有对 multi_json 1.0.3 的任何引用

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:23:06.713

解决方案是：

*   检查 Gemfile.lock 以查看哪些 gem（s）引入了更高版本（在这种情况下 -omniauth-twitter）
*   找一个不需要太高版本的‘罪犯’
*   回滚更高版本，锁定到 Gemfile 中的正确版本

在这种特殊情况下，工作的 Gemfile 需要行：

```
gem 'omniauth-twitter', '0.0.9'
gem 'multi_json', '~> 1.0.3' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T03:57:09.640

你的包中的一个 gem 有一个旧版本的`multi_json`作为它看起来的依赖项。看看有没有`bundle viz`告诉你。`ruby-graphviz`但是，如果您尚未安装 gem 和 graphviz 本身，则需要安装它们。

另一种查看最新情况的方法是将`multi_json`您尝试升级到的版本添加到您的 gemfile 中，然后执行 a`bundle install`并查看出现了什么错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T14:20:15.017

这是解决此问题的方法：

```
rvm uninstall multi_json 
```

它会告诉您安装了许多版本，显示它们的列表，并询问您要卸载哪个版本。
尝试第一个，如果它告诉您它已被其他宝石使用，请尝试第二个，依此类推。继续删除所有未使用的版本，直到只剩下一个。

我就是这样做的，但可能有一些*更清晰的*解决方案。如果有人知道，感谢您与我们分享。

# c++ - 模板，为什么以这种方式调用模板函数不起作用？

> ID：10569151
> 
> 赞同：1
> 
> 时间：2012-05-13T03:35:48.070
> 
> 标签：c++, templates

我正在读一本书（Accelerated C++）并从那本书中做练习，试图自己学习 C++。

现在我试图理解为什么以下代码不起作用：

```
// analysis.cpp
void write_analysis(ostream& out, const string& name,
                    double analysis(const vector<Student_info>&),
                    const vector<Student_info>& did,
                    const vector<Student_info>& didnt)
{
  out << name << ":median(did) = " << analysis(did) <<
    ", median(didnt)=" << analysis(didnt) << endl;
}

template <double F(Student_info&)>
double generic_analysis(const vector<Student_info>& students)
{
    vector<double> grades;

    transform(students.begin(), students.end(),
          back_inserter(grades), F);
    return median(grades);
}
template<> double generic_analysis<grade_aux>(const vector<Student_info>& students);

double median_analysis(const vector<Student_info>& students)
{
    return generic_analysis<grade_aux>(students);
    // if not using template function, the code will be 
    // as following
    // vector<double> grades;

    // transform(students.begin(), students.end(),
    //           back_inserter(grades), grade_aux);
    // return median(grades);
} 
```

分析.cpp

```
// analysis.h
template <double F(const Student_info&)>
double generic_analysis(const std::vector<Student_info>&);

void write_analysis(std::ostream&, const std::string&,
                    double analysis(const std::vector<Student_info>&),
                    const std::vector<Student_info>&,
                    const std::vector<Student_info>&);

double grade_aux(const Student_info&);

double median_analysis(const std::vector<Student_info>&); 
```

分析.h

```
// main.cpp
int main()
{
  // students who did and didn't do all their homework
  vector<Student_info> did, didnt;

  // read the student records and partition them
  Student_info student;
  while (read(cin, student)) {
    did.push_back(student);
  }

  // do the analyses
  write_analysis(cout, "median", median_analysis, did, didnt);

  return 0;
} 
```

主文件

```
// grade.cpp 
// compute a student's overall grade from midterm and final exam grades
// and homework grade
double grade(double midterm, double final, double homework)
{
  return 0.2 * midterm + 0.4 * final + 0.4 * homework;
}

double grade_aux(const Student_info& s)
{
  try {
    return grade(s);
  } catch (domain_error) {
    return grade(s.midterm, s.final, 0);
  }
} 
```

等级.cpp

错误信息是：

> g++ -Wall *.cpp -o main /tmp/ccbXbVcV.o: 在函数中 `median_analysis(std::vector<Student_info, std::allocator<Student_info> > const&)': analysis.cpp:(.text+0x91): undefined reference to`double generic_analysis<&(grade_aux(Student_info const&))>(std::vector > const&)' collect2: ld 返回 1 退出状态

同时，当我将generic_analysis代码声明和定义放在头文件中时，它将起作用。请有人解释为什么？

**编辑：** 删除行时：

```
template<> double generic_analysis<average_grade>(const vector<Student_info>& students); 
```

我有：

> g++ -Wall *.cpp -o main /tmp/cc3VhXKU.o: 在函数中`median_analysis(std::vector<Student_info, std::allocator<Student_info> > const&)': analysis.cpp:(.text+0x91): undefined reference to`double generic_analysis<&(grade_aux(Student_info const&))>(std::vector > const&)' collect2: ld 返回 1 退出状态

所以好像我需要一个`Explicit instantiation`. 然后我添加了以下行：

```
template double generic_analysis<grade_aux>(const vector<Student_info>&); 
```

现在错误消息是：

> g++ -Wall *.cpp -o 主
> 
> analysis.cpp: 在'double generic_analysis(const std::vector&) [with double (* F)(const Student_info&) =grade_aux]'的实例化中：
> 
> analysis.cpp:26:72: 从这里实例化 analysis.cpp:26:72: 错误: 'double generic_analysis(const std::vector&) [with double (* F)(const Student_info&) =grade_aux]' 的显式实例化但是没有可用的定义 [-fpermissive] analysis.cpp：在 'double generic_analysis(const std::vector&) [with double (* F)(const Student_info&) = grade_aux]' 的实例化中：
> 
> analysis.cpp:26:72: 从这里实例化 analysis.cpp:26:72: 错误: 'double generic_analysis(const std::vector&) [with double (* F)(const Student_info&) =grade_aux]' 的显式实例化但是没有可用的定义 [-fpermissive] analysis.cpp：在 'double generic_analysis(const std::vector&) [with double (* F)(const Student_info&) = grade_aux]' 的实例化中：
> 
> analysis.cpp:26:72: 从这里实例化 analysis.cpp:26:72: 错误: 'double generic_analysis(const std::vector&) [with double (* F)(const Student_info&) =grade_aux]' 的显式实例化但是没有可用的定义 [-fpermissive]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T03:41:35.773

你定义：

```
template<> double generic_analysis<grade_aux>(const vector<Student_info>& students); 
```

实施在哪里？

如果您试图*强制*实例化一个函数：

[http://publib.boulder.ibm.com/infocenter/macxhelp/v6v81/index.jsp?topic=%2Fcom.ibm.vacpp6m.doc%2Flanguage%2Fref%2Fclrc16explicit_instantiation.htm](http://publib.boulder.ibm.com/infocenter/macxhelp/v6v81/index.jsp?topic=%2Fcom.ibm.vacpp6m.doc%2Flanguage%2Fref%2Fclrc16explicit_instantiation.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T03:43:46.427

你声明了

```
template<> double generic_analysis<grade_aux>(const vector<Student_info>& students); 
```

但没有在任何地方定义它。如果您真的打算拥有这样一个明确的专业化，您需要定义它（但可能不在标题中）。

另一方面，如果意图是使用主模板`generic_analysis`，那么您不需要声明上述特化。

# jsp - useBean 类属性 beans.QueryBean 的值无效

> ID：10569154
> 
> 赞同：1
> 
> 时间：2012-05-13T03:36:49.147
> 
> 标签：jsp, javabeans

我在使用 jsp 的 java bean 时遇到了一些问题。

我得到的错误是：

org.apache.jasper.JasperException: /runquery.jsp(16,3) useBean 类属性 beans.QueryBean 的值无效。

bean 类已编译并位于 myWebRoot/WEB-INF/classes/beans 中。

它们有公共的默认构造函数并且属于包'beans'。

在 jsp 文件中，我已经导入了 bean 类，并且正在使用 jsp:useBean：

```
 <%@ page contentType="text/html" import="beans.*" %>
<snip...> 
```

```
 <%-- load the bean with the input values --%>
 <jsp:useBean id="qi" class="beans.QueryBean" scope="request" />
 <jsp:setProperty name="qi" property="*" /> 
```

关于我所缺少的任何想法？

我已经看到这个错误意味着无法调用类的构造函数（这里：[JasperException: The value for the useBean class attribute is invalid](https://stackoverflow.com/questions/3024507/jasperexception-the-value-for-the-usebean-class-attribute-is-invalid)），所以问题要么是类文件的放置，要么是缺少默认构造函数。我当然有默认构造函数，所以我唯一可以得出的结论是我的类文件没有放错地方，但如果是这种情况，它们会去哪里？

# database - 如何将现有的 sqlite 数据库表转换为 fts3 之一？

> ID：10569155
> 
> 赞同：7
> 
> 时间：2012-05-13T03:36:59.383
> 
> 标签：database, sqlite, fts3

我有正常的 sqlite 数据库，想使用 fts3。如[http://www.sqlite.org/fts3.html](http://www.sqlite.org/fts3.html)教程中所述，必须创建 FTS 表才能使用此搜索功能。

有没有办法将现有表转换为 FTS 表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:15:15.127

我认为解决方案是自己填充 FTS 虚拟表。我的意思是打开一个新线程，该线程将从现有数据库中读取，然后写入 FTS 表。

其实，我可能会找到更好的方法，希望你还在看这个帖子：

请检查此线程： [SQLite 创建预先填充的 FTS 表](https://stackoverflow.com/questions/7477377/sqlite-create-pre-populated-fts-table)

选择的答案提供了更好的方法：

首先`CREATE VIRTUAL TABLE`在您现有的数据库中执行，然后使用数据库中的原始表填充虚拟表。

# hadoop - 您如何在 map/reduce 中实现排名和排序？

> ID：10569157
> 
> 赞同：2
> 
> 时间：2012-05-13T03:37:19.597
> 
> 标签：hadoop, mapreduce

我正在学习 Hadoop 中的 Java map/reduce API，并试图围绕在 map/reduce 中的思考。这是我针对 apache http 服务器日志文件编写的示例程序，它有两个阶段（每个阶段都实现为 M/R 作业，然后链接在一起）：

1.  统计每个IP地址访问服务器的次数
2.  查找前 5 个 IP 地址（请求最多）

    阶段 1 看起来很简单，它是 map/reduce 中的一个简单计数实现，它发出如下内容：

    ```
    192.168.0.2  4
    10.0.0.2  7
    127.0.0.1  3
    ...etc 
    ```

此输出将馈送到第二个 map/reduce 作业的映射器。

现在我对如何以并行方式实现前 5 名感到困惑。由于 reducer 本质上是顺序的，我猜只有一个 reducer 会与完整列表背道而驰，对它进行排序，对吧？您如何以并行方式解决第 2 步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T04:42:44.363

首先，如果第一个作业的输出足够小以至于您不需要并行化它，请考虑：

```
hadoop fs -cat joboutput/part-* | sort -k2 -n | head -n5 
```

在许多情况下，这可能比将其全部发送到一个减速器要快！

* * *

当您试图摆脱仅使用 1 个 reducer 时，Hadoop 中的排序非常粗糙。如果您对排序感兴趣，请尝试查看[TotalOrderPartioner](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapreduce/lib/partition/TotalOrderPartitioner.html)。通过在网上搜索，您应该会找到一些示例。基本解决方案是您必须使用自定义*分区*器将值分区到升值箱中。然后，每个 bin 都会自然排序。你输出，你有一个排序集。

困难的部分是弄清楚如何将数据放入哪些箱中。

* * *

如果您对前 5 名（或前 50 名，等等）感兴趣，有一种有趣的方法可以做到这一点。基本前提是，如果取每个mapper的top 5，那么取reducer中top 5的top 5。每个 mapper 都有效地将他们的前五名发送给 reducer，以争夺真正的前五名，有点像锦标赛。您可以保证在减速器中获得前 5 名，您只需将其中一些剔除即可。

为了跟踪 mapper 和 reducer 中的 top-5，我喜欢使用[`TreeMap`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html). 基本上，一直插入值，一直截断到前5个。在[`Mapper#cleanup`](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapreduce/Mapper.html#cleanup%28org.apache.hadoop.mapreduce.Mapper.Context%29)方法中，写出前5个记录（不要在`map`本身写出）。对减速器做同样的事情。

* * *

我将在此处插入 Apache Pig 来完成类似的操作。它可能不如上面的选项有效，但它确实更容易编码。

```
loaded = LOAD 'joboutput/' USING PigStorage('\t') AS (ip:chararray, cnt:int);
sorted = ORDER loaded BY cnt DESC;
top = LIMIT sorted 5;
dump top; 
```

* * *

很抱歉，像排序这样简单的事情并不像您在 Hadoop 中想象的那么简单。有些事情会很容易（例如，您所做的 ip 计数），而有些事情会很困难（排序、连接）。只是野兽的本性。

# ios - 在ios5中使用panoramaGL库并运行HelloPanorama

> ID：10569159
> 
> 赞同：3
> 
> 时间：2012-05-13T03:38:20.580
> 
> 标签：ios, shared-libraries, compatibility, xcode4.3, panorama-control

我一整天都在搜索如何设置panoramaGL，但这些都没有回答我的问题。emm，也许那是因为我是 ios 开发的新手，我从 ios5 开始，具有所有 ARC 很酷的功能。我确实在[http://www.codeproject.com/Articles/60635/Panorama-360-iPod-Touch-iPhone](http://www.codeproject.com/Articles/60635/Panorama-360-iPod-Touch-iPhone)找到了一个非常全面的指南，但它对我来说有点过时了。我无法在带有 ios 5.0 sdk 的 xcode 4.3 中遵循本指南。

嗯，所以这是一个问题，假设panoramaGL和helloPanorama在创建它的任何xcode版本和sdk版本中都可以正常工作。有没有办法，无需任何代码修改，我可以导入库并将api与我的应用程序一起使用ios5开发的？当然我不介意一些小的修改，我确实深入研究了这些代码并评论了所有保留或释放的东西。但有线错误不断弹出。我在这里真的需要帮助。

如果最终证明在ios5.0中无法重用它，我可能需要根据我对复杂全景算法的理解逐行编写整个事情......

非常感谢你的帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T21:48:00.337

新版 PanoramaGL 0.1 r2 已发布，请查看[http://code.google.com/p/panoramagl/](http://code.google.com/p/panoramagl/)。此版本在 iOS >= 4.x 上运行并支持热点。

请查看 HelloPanoramaGL 示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:31:17.533

似乎有人正在开发另一个基于全景GL 的库。适用于IOS 5。

请参阅[http://code.google.com/p/tk-panorama/](http://code.google.com/p/tk-panorama/)

# php - 为网站创建多图像上传器的好方法是什么？

> ID：10569160
> 
> 赞同：0
> 
> 时间：2012-05-13T03:39:09.250
> 
> 标签：php, image, forms, api, upload

我正在为某人制作一个自定义网站，该网站要求新用户能够上传多张照片。我一直在研究图像上传脚本、图像主机 API，并从头开始制作一些东西。我知道如何使用表单和 PHP 上传单个图像，但我不知道为多个图像执行此操作的最佳方法。

你有什么建议吗？

另外，如果我从头开始制作一些东西或使用脚本，并且图像存储在我服务器上的文件夹中，那安全吗？（人们可以上传恶意文件并运行它们）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T04:34:21.480

对于简单的多重上传方法，您可以在输入标签上使用多个属性：

```
<input type="file" multiple="multiple" /> 
```

但是，用户只能选择当前文件夹视图中可见的文件；通常只有一个文件夹。

如果您希望能够添加更多文件，也许可以动态应用`display:none;`到文件输入标签并在其位置添加一个新标签。要显示已选择的文件，请列出要使用 javascript 上传的当前文件，如此处所示，[multiple-file-upload](http://davidwalsh.name/multiple-file-upload)。

或者跳过上面的隐藏步骤，这样您就可以在任何给定时间看到所有文件上传表单，同时动态保持一个空白，以便上传更多文件。

如果您想要有效的 XHTML/HTML 请小心，因为该`multiple`属性仍然是 HTML5 推测 (SPEC) 的一部分。

* * *

另一种选择是使用 iframe 并在上传文件时重新加载 iframe，这样用户就可以立即选择另一个文件。

我个人从不使用 Frames，所以我不知道它是如何工作的。

* * *

从我所见，所谓的“AJAX 文件上传器”方法也只是一个聪明的 iframe 技巧。

* * *

我能想到的唯一其他选择是静态拥有很多`<input type="file"/>`s 并希望您的用户需要的不仅仅是提供的更多。

* * *

我个人只会使用普通`<input type="file" multiple="multiple"/>`的，因为我假设他们尝试同时上传的大多数用户的图片组都在同一个文件夹中。

# emacs - 如何在 emacs Evil 模式中将“jj”映射到 Esc

> ID：10569165
> 
> 赞同：48
> 
> 时间：2012-05-13T03:40:03.377
> 
> 标签：emacs, evil-mode

最近我尝试了 Emacs，发现 Evil 有助于保持我的 vim 习惯。我习惯于像许多 Vimer 一样键入“jj”从插入模式返回正常模式，但不知道如何在 Evil 模式下实现。

我像这样映射它，但似乎不正确：

```
(define-key evil-insert-state-map (kbd "jj") 'evil-normal-state) 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-24T17:16:01.950

这对我有用。它需要[KeyCord](http://emacswiki.org/emacs/KeyChord)库：

```
;;Exit insert mode by pressing j and then j quickly
(setq key-chord-two-keys-delay 0.5)
(key-chord-define evil-insert-state-map "jj" 'evil-normal-state)
(key-chord-mode 1) 
```

它受到上述@phils 答案的启发，并基于[Simon 的编码博客：Emacs 和 Unity Every Day](http://bbbscarter.wordpress.com/2012/09/13/emacs-bits-and-bobs/)。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-21T03:44:58.910

我不知道它是否适用于 Evil，但对于 Emacs，[KeyChord](http://emacswiki.org/emacs/KeyChord)库通常是为这类事情设计的。

试试看？

```
(key-chord-define evil-insert-state-map "jj" 'evil-normal-state) 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-02-20T18:26:11.963

如果您使用的是 Spacemacs，那么我发现这个设置（添加到开头`user-init`）效果很好，

`(setq-default evil-escape-key-sequence "jj")`

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-05-21T00:51:38.470

请参阅此博客文章：http: [//zuttobenkyou.wordpress.com/2011/02/15/some-thoughts-on-emacs-and-vim/](http://zuttobenkyou.wordpress.com/2011/02/15/some-thoughts-on-emacs-and-vim/)并搜索“cofi”。我自己使用“kj”版本，它就像 Vim 一样工作。

编辑：这是博客文章中的实际代码片段：

```
(define-key evil-insert-state-map "k" #'cofi/maybe-exit)

(evil-define-command cofi/maybe-exit ()
  :repeat change
  (interactive)
  (let ((modified (buffer-modified-p)))
    (insert "k")
    (let ((evt (read-event (format "Insert %c to exit insert state" ?j)
               nil 0.5)))
      (cond
       ((null evt) (message ""))
       ((and (integerp evt) (char-equal evt ?j))
    (delete-char -1)
    (set-buffer-modified-p modified)
    (push 'escape unread-command-events))
       (t (setq unread-command-events (append unread-command-events
                          (list evt)))))))) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-08-23T16:32:58.733

对于我的 Windows 安装，在 init.el 中添加作为 use-package evil 配置的一部分对我有用：

```
(use-package evil
 :ensure t
 :config
 (evil-mode 1)
 (define-key evil-insert-state-map "jj" 'evil-normal-state)
) 
```

对于 Ubuntu，我遵循 E. Sambo 的回答。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T21:19:24.730

这有点复杂 - 你必须注意前一个角色。[这应该可以解决问题。](https://gist.github.com/822738)（要点是“jk”，您可以轻松地将其修改为“jj”，尽管您会注意到“jk”更有效/更快）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-18T20:31:14.483

这是我自己使用了一段时间的解决方案，尽管我实际上使用了“jf”。

```
(defun xwl-jj-as-esc ()
  (interactive)
  (if (memq evil-state '(insert replace))
      (let ((changed? (buffer-modified-p)))
          (insert "j")
          (let* ((tm (current-time))
                 (ch (read-key)))
            (if (and (eq ch ?j)
                     (< (time-to-seconds (time-since tm)) 0.5))
                (save-excursion
                  (delete-char -1)
                  (evil-force-normal-state)
                  (set-buffer-modified-p changed?))
              (insert ch))))
    (call-interactively 'evil-next-line)))

(define-key evil-insert-state-map  "j" 'xwl-jj-as-esc)
(define-key evil-replace-state-map "j" 'xwl-jj-as-esc) 
```

# hibernate - 如何让 Hibernate 在它创建的表/字段上发表评论

> ID：10569167
> 
> 赞同：9
> 
> 时间：2012-05-13T03:40:28.663
> 
> 标签：hibernate, documentation, annotations, ddl

我希望 Hibernate 在生成 DDL 时包含来自我的 java 源代码的注释。我很乐意将其作为注释或 javadoc 标记。

IOW：我希望能够去

```
@Entity
@DDLComment "This entity is cool"
class Foo {
  @DDLComment "But this field is kinda lame"
  int lame_o_rama; 
```

并且（在 oracle 中），休眠应该生成

```
CREATE TABLE FOO ( LAME_O_RAMA number };
COMMENT ON FOO IS 'This entity is cool';
COMMENT ON FOO.LAME_O_RAMA 'But this field is kinda lame'; 
```

是否有注释、文档标签、配置选项等来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T17:44:13.127

从休眠文档...

> SchemaExport 是一个 Hibernate 实用程序，它从您的映射文件生成 DDL。生成的模式包括实体和集合表的参照完整性约束、主键和外键。它还为映射标识符生成器创建表和序列。

[文档](http://docs.jboss.org/hibernate/orm/4.0/devguide/en-US/html_single/)

schemaexport 实用程序如何帮助开发，而不是用于维护或生产。 [休眠：hbm2ddl.auto=生产中的更新？](https://stackoverflow.com/questions/221379/hibernate-hbm2ddl-auto-update-in-production)

# c# - [方法] 的 C# 没有重载匹配委托 'System.EventHandler - 添加一个额外的参数

> ID：10569169
> 
> 赞同：1
> 
> 时间：2012-05-13T03:40:48.943
> 
> 标签：c#, function, overloading

我对 C# 很陌生，我的作业有问题。对于某些按钮的单击事件，我有以下内容。对于单击事件，我想调用一个名为 functionA 的函数，其参数名为 parameterB，一个双精度类型数组。附加参数导致错误。我这样做的正确方法是什么？

```
private void button1_Click(object sender, EventArgs e, double [] parameterB)
  {
      functionA(parameterB);
  } 
```

在 Designer.cs 的相应部分

```
this.button1.Location = new System.Drawing.Point(386, 309);
this.button1.Name = "button1";
this.button1.Size = new System.Drawing.Size(174, 27);
this.button1.TabIndex = 25;
this.button1.Text = "Calculate Final Grade";
this.button1.UseVisualStyleBackColor = true;
this.button1.Click += new System.EventHandler(this.button1_Click); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T03:52:36.330

您不调用`button1_Click`-当最终用户单击您的按钮时*会调用它。*检测按钮点击的系统部分知道如何使用一种方式通知您的程序点击：通过调用带有签名的方法

```
void OnClick(object sender, EventArgs e) 
```

您不能在参数列表中添加或删除参数，或更改方法的返回类型：它必须与此签名精确匹配。

现在回到您的`parameterB`：您需要它来调用该`functionA`方法，但它不会传递给事件处理程序。那你怎么得到它？通常，答案是您将其存储在执行事件处理的对象的实例中：声明一个 type 的实例变量，`double[]`当您有足够的数据来设置它时设置它，然后从您的方法`functionA`内部传递它。`button1_Click`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T04:10:39.530

当您尝试添加另一个参数时，事件处理程序不再匹配定义。EventHandler 用 2 个参数定义。

*sender*
   类型：System.Object
   事件的来源。

*e*
   类型：System.EventArgs
   一个不包含事件数据的 EventArgs。

您需要将**parameterB**设置为表单的属性或[字段](https://stackoverflow.com/questions/295104/what-is-the-difference-between-a-field-and-a-property-in-c-sharp)。然后，您将从事件处理程序内部获取**parameterB**。

# php - sql 从索引中选择行

> ID：10569170
> 
> 赞同：1
> 
> 时间：2012-05-13T03:41:04.130
> 
> 标签：php, mysql, sql

如果我有 10 行符合 mysql 上的描述

```
SELECT id, nav, img 
FROM mytable 
WHERE id='$id' 
ORDER BY pageDisplayNum ASC; 
```

`pageDisplayNum`可能不是数字顺序，这意味着`1, 2, 5, 10, 16, 22 etc...`
q：我如何从这个列表

中选择第 3 项或第 6 项索引号将从 php 作为
我读到的关于 TOP 的变量传入，但这也不起作用

```
SELECT TOP $num 
id, nav, img 
FROM mytable 
WHERE id='$id'
ORDER BY pageDisplayNum ASC; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T03:45:26.087

这是第 7 项

```
SELECT id, nav, img 
FROM mytable 
WHERE id='$id' 
ORDER BY pageDisplayNum ASC;
LIMIT 6,1 
```

您可以添加`LIMIT offset,row_count`查询

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T03:46:39.477

您可以使用`LIMIT <offset>, <#rows>`来选择所需的行：

```
SELECT id, nav, img 
FROM mytable 
WHERE id='$id' 
ORDER BY pageDisplayNum ASC
LIMIT 2, 1 
```

# php - 如何在 Codeigniter 的 HMVC 模块中扩展控制器类以允许路由

> ID：10569177
> 
> 赞同：1
> 
> 时间：2012-05-13T03:42:40.320
> 
> 标签：php, model-view-controller, codeigniter, routing, hmvc

## 问题：

**如何扩展 HMVC 模块的控制器，然后在 Codeigniter 的 URI 路由器中调用该扩展类？**

## 细节：

假设以下与 HMVC 相关的典型 Codeigniter 文件结构：

```
/
/application
/application/modules
/application/modules/module-name
/application/modules/module-name/controllers
/application/modules/module-name/controllers/controller-name.php
/application/modules/module-name/models
/application/modules/module-name/models/model-name.php
/application/modules/module-name/views
/application/modules/module-name/views/view-name.php
/application/config
/application/config/routes.php 
```

我有一个类`Events`存储在`/application/modules/events/controllers/events.php`. 我想将它扩展到`Courses`并`Conferences`为这些各自的控制器提供特定的功能。我想将这些控制器存储在同一个模块文件夹中（即`/applications/modules/events/controllers/courses.php`，等）我想将访问[http://www.example.com/courses](http://www.example.com/courses)的用户路由到`courses`控制器，如下所示：

```
$route['courses'] = 'courses/getList'; 
```

我还想将访问[http://www.example.com/conferences](http://www.example.com/conferences)的用户路由到`conferences`控制器，如下所示：

```
$route['conferences'] = 'conferences/getList'; 
```

## 问题：

不幸的是，我似乎无法让它工作，因为课程不包含在它自己的模块中，因此路由器无法找到。看来路由器正在`course`以下文件路径中查找类文件：`/applications/modules/courses/controllers/courses.php`. 我已尝试将该文件移动到上述路径，但随后我被要求提供扩展自的`Events`控制器类的位置。`Courses`

## 一个可能的解决方案：

一种可能的解决方案可能是将每个控制器包含在单个控制器文件中。但是，我不希望这样做，因为我喜欢将每个类存储在它自己的单独文件中，并尽可能与它的扩展类进行分组。我正在寻找一个更优雅且完全正确的解决方案。即使我要尝试使用单个文件的这种技术，它也需要包含在其中`/applications/modules/courses/controllers/courses.php`才能被访问。这让我在稍后尝试路由到`conferences`控制器时不走运。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T04:22:11.240

似乎通过添加

```
require APPPATH."modules/events/controllers/events.php"; 
```

在我的扩展课程（`courses`和`conferences`）开始时，我将能够不理会`Events`模块。

不幸的是，我必须为`courses`和`conferences`控制器创建单独的模块。哦，好吧，我想它不可能是完美的。

# c++ - setText 方法替换现有文本， append 方法在新行之后输入新文本；我如何将 QStrings 背靠背连接起来？

> ID：10569178
> 
> 赞同：1
> 
> 时间：2012-05-13T03:42:56.377
> 
> 标签：c++, qt, qt-creator, qstring

所有 Qt 小部件都有一个替换现有文本的 SetText 和一个在添加 QString 之前添加新行的追加，但是有什么方法可以连接文本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T05:05:19.970

您可以使用以下方法手动完成`setText()`：

```
widget->setText(widget->text() + "new text"); 
```

# codeigniter - 当我查询两个有关系的表时，CodeIgniter 中出现奇怪的错误... o_O

> ID：10569179
> 
> 赞同：0
> 
> 时间：2012-05-13T03:43:06.457
> 
> 标签：codeigniter, relational-database

因此，当我运行活动记录查询时，我遇到了一个奇怪的错误（或者我可能只是愚蠢）。看看这个：

```
$results = $this->db->
  select('cd.casino_name, cd.casino_opened, cd.casino_latitude, cd.casino_longitude')->
  from('casino_data as cd, casino_cities as cc')->
  where('cd.city_id',$city_id)->
  where('cd.city_id=cc.city_id')->
  get()->result_array(); 
```

然后我明白了：

```
Error Number: 1054

Unknown column 'cd.city_id=cc.city_id' in 'where clause'

SELECT `cd`.`casino_name`, `cd`.`casino_opened`, `cd`.`casino_latitude`, `cd`.`casino_longitude`
FROM (`m_casino_data` as cd, `m_casino_cities` as cc)
WHERE `cd`.`city_id` =  1
AND `cd`.`city_id=cc`.`city_id`

Filename: httpdocs/_dev/libraries/Test.php

Line Number: 649 
```

发生了什...

帮助请...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T04:07:05.787

问题在于 where 子句

```
$results = $this->db->
select('cd.casino_name, cd.casino_opened, cd.casino_latitude, cd.casino_longitude')->
from('casino_data as cd, casino_cities as cc')->
where('cd.city_id',$city_id)->
where('cd.city_id','cc.city_id')->//this would produce WHERE cd.city_id = cc.city_id
get()->result_array(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T07:09:11.793

CodeIgniter 的 AR 保护有时效果不佳。在这种情况下，我认为您应该使用可选参数`FALSE`来避免自动保护。但并非所有函数都接受这个参数——但是`where`是的！

> `$this->db->where()`接受可选的第三个参数。如果您将其设置为`FALSE`，CodeIgniter 将不会尝试使用反引号保护您的字段或表名称。

请参阅[文档](http://codeigniter.com/user_guide/database/active_record.html)（您可以在附近找到`4\. Custom string`）。

# r - R计算机语言上的距离矩阵？

> ID：10569181
> 
> 赞同：1
> 
> 时间：2012-05-13T03:44:11.143
> 
> 标签：r, distance

我不是 R 方面的专家，也不是非常擅长统计的，所以我会很简短。

我正在使用 R 来获取矩阵的距离矩阵，如下所示它在 R 上的显示方式。

![在此处输入图像描述](../Images/afd17397a561710acb51a96b4a4bbe8c.png)

当我应用 dist(matrix) 时，我看到以下内容：

```
 1         2         3         4         5         6
2 16.155494                                                  
3  5.830952 15.329710                                        
4  2.236068 18.055470  6.244998                              
5  7.681146 13.928388  9.110434  8.124038                    
6  8.306624 11.489125  9.110434  9.273618  2.449490          
7 11.090537 10.392305 12.124356 12.247449  5.099020  3.464102 
```

所以我的问题是三个，第一，那个结果好吗？，第二，为什么计算的行数比我们以前少？，最后为什么列数比开始时多？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T04:45:49.607

我得到相同的结果。（这是否“正确”可能取决于您的目标。您的最后一个问题向我表明您不明白这些是行之间的距离。）返回的对象的长度始终是在这种情况下`combn(n,2)`的列数`combn(7,2))==21`，其中 n = 行数。它显示为尺寸为 (n-1)x(n-1) 的下三角矩阵。没有第 1 行仅仅是因为从一行到自身的距离为零并且打印它没有用。也将有 n-1 列，其中 n 是行数，与原始列数无关。列数仅决定计算距离的空间的尺寸。

# php - 在某个点拆分响应

> ID：10569182
> 
> 赞同：0
> 
> 时间：2012-05-13T03:44:33.020
> 
> 标签：php, .net, vb.net

我之前在同一个项目中有一个涉及 php 和 mysql 的问题，

这是.net，我试图阅读我的 php 响应的来源，并在某个字符或短语后停止，其中我的`<br />`

我试过谷歌，没有运气，我希望这里有人能救我！

这是我当前的代码。

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles     Button1.Click
        Dim request As System.Net.HttpWebRequest =    System.Net.HttpWebRequest.Create("http://mywebsite/db.php?hwid=" + TextBox1.Text)
        Dim response As System.Net.HttpWebResponse = request.GetResponse()
        Dim sr As System.IO.StreamReader = New System.IO.StreamReader(response.GetResponseStream())
    Dim name As String = sr.ReadToEnd
        If name = "" Then
            MessageBox.Show("HWID Not Activated!", "Error: Invalid HWID")
        Else
            MessageBox.Show("Welcome, " + name)
            Me.Hide()
            Form1.Show()
        End If
    End Sub 
```

我想在源代码之后停止阅读所有内容`<br />`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:45:49.527

您可以找到“<br />”的位置并在此之前获取字符串：

```
Dim s = "Andrew<br />Morton"
Dim brIndex = s.IndexOf("<br />")
Dim myName As String = ""
If brIndex >= 0 Then
    myName = s.Substring(0, brIndex)
End If
Console.WriteLine(myName)
' outputs: Andrew 
```

此外，您需要在 HttpWebResponse 上调用 .Close()。

而且，VB.NET 中的字符串连接运算符是“&”，而不是“+”。

# sql - 多选插入

> ID：10569184
> 
> 赞同：1
> 
> 时间：2012-05-13T03:44:58.840
> 
> 标签：sql, database, postgresql

我的插入需要能够有多个选择语句或值。如果我删除第二个列名（notication_timestamp），则以下工作。

```
insert into notification (msg,notification_timestamp) select msg from data; 
```

我想能够说：

```
insert into notification (msg,notification_timestamp) values (select msg from data,now()); 
```

但这不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T03:51:06.133

删除值语句：

```
Insert into notification(msg, notification_timestamp)
    Select msg, now()
    from data 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T03:49:57.660

您没有`notification_timestamp`进行选择查询

```
insert into notification (msg,notification_timestamp) select msg,'value for notification_timestamp' from data; 
```

所以它可能

```
insert into notification (msg,notification_timestamp) select msg,now() from data; 
```

# python - 如何读取 PEM + PKCS#1 格式的 RSA 公钥

> ID：10569189
> 
> 赞同：28
> 
> 时间：2012-05-13T03:47:27.503
> 
> 标签：python, cryptography, x509, pycrypto, key-management

我有一个 PEM 格式的 RSA 公钥 + PKCS#1（我猜）：

```
-----BEGIN RSA PUBLIC KEY-----
MIGJAoGBAJNrHWRFgWLqgzSmLBq2G89exgi/Jk1NWhbFB9gHc9MLORmP3BOCJS9k
onzT/+Dk1hdZf00JGgZeuJGoXK9PX3CIKQKRQRHpi5e1vmOCrmHN5VMOxGO4d+zn
JDEbNHODZR4HzsSdpQ9SGMSx7raJJedEIbr0IP6DgnWgiA7R1mUdAgMBAAE=
-----END RSA PUBLIC KEY----- 
```

我想在 Python 中获取其 ASN1 编码版本的 SHA1 摘要。第一步应该是读取这个密钥，但是我在 PyCrypto 中没有做到这一点：

```
>> from Crypto.PublicKey import RSA
>> RSA.importKey(my_key)
ValueError: RSA key format is not supported 
```

[PyCrypto](https://www.dlitz.net/software/pycrypto/api/current/Crypto.PublicKey.RSA-module.html)的文档说支持 PEM + PKCS#1，所以我很困惑。我也尝试过 M2Crypto，但事实证明 M2Crypto 不支持 PKCS#1，而只支持 X.509。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-13T19:53:19.297

PyCrypto 支持*PKCS#1*，因为它可以读取*包含以**PKCS#1*编码的 RSA 公钥的 X.509`SubjectPublicKeyInfo`对象。

 **相反，在您的密钥中编码的数据是一个纯`RSAPublicKey`对象（即，具有两个整数、模数和公共指数的 ASN.1 序列）。

不过，您仍然可以阅读它。尝试类似：

```
from Crypto.PublicKey import RSA
from Crypto.Util import asn1
from base64 import b64decode

key64 = 'MIGJAoGBAJNrHWRFgWLqgzSmLBq2G89exgi/Jk1NWhbFB9gHc9MLORmP3BOCJS9k\
onzT/+Dk1hdZf00JGgZeuJGoXK9PX3CIKQKRQRHpi5e1vmOCrmHN5VMOxGO4d+znJDEbNHOD\
ZR4HzsSdpQ9SGMSx7raJJedEIbr0IP6DgnWgiA7R1mUdAgMBAAE='

keyDER = b64decode(key64)
seq = asn1.DerSequence()
seq.decode(keyDER)
keyPub = RSA.construct( (seq[0], seq[1]) ) 
```

* * *

从 2.6 版开始，PyCrypto 也可以导入`RsaPublicKey`ASN.1 对象。代码就简单多了：

```
from Crypto.PublicKey import RSA
from base64 import b64decode

key64 = b'MIGJAoGBAJNrHWRFgWLqgzSmLBq2G89exgi/Jk1NWhbFB9gHc9MLORmP3BOCJS9k\
onzT/+Dk1hdZf00JGgZeuJGoXK9PX3CIKQKRQRHpi5e1vmOCrmHN5VMOxGO4d+znJDEbNHOD\
ZR4HzsSdpQ9SGMSx7raJJedEIbr0IP6DgnWgiA7R1mUdAgMBAAE='

keyDER = b64decode(key64)
keyPub = RSA.importKey(keyDER) 
```**

# java - Java GUI：使坐标正确对齐

> ID：10569191
> 
> 赞同：2
> 
> 时间：2012-05-13T03:47:54.073
> 
> 标签：java, swing, user-interface

我正在制作一个简单的 Java Swing GUI 棋盘，玩家可以在其中拖放棋子。问题是，由于框架周围的边框（标题在顶部，最大化/最小化/关闭按钮等），坐标偏斜 - (0, 0) 是左上角框架，即 X 按钮上方一点，但 GUI 开始在标题栏下方自行构建，因此 GUI 与坐标不对齐，事情最终不会按应有的方式工作。此外，例如，当我将框架的大小设置为 100 x 100 时，我的 GUI 的下部和一些右侧部分被切断，因为框架没有补偿其边框。当我将它作为小程序运行时，我没有这个问题，但我不想那样做。

sscce：

```
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JFrame;

public class class1 extends JFrame{
    public class1(){
        addMouseListener(new MouseAdapter(){
            public void mousePressed(MouseEvent evt){
                System.out.print(evt.getPoint());
            }
        });
    }

    public static void main(String[] args){
        class1 c = new class1();
        c.setTitle("Test");
        c.setSize(320, 320);
        c.setLocationRelativeTo(null);
        c.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        c.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T03:51:33.457

没有代码很难知道你的代码有什么问题，但我知道，如果你通过使用各种布局管理器来简单的方法，并让这些管理器为你完成组件的布局和事物的大小调整，包括`pack()`在 JFrame 上的调用，通常事情都会很容易就位。再说一遍，不要设置任何东西的大小，而是让组件的首选大小和布局管理器为你做这件事。

如果此建议没有帮助，请向我们提供更多信息和代码，最好是[sscce](http://sscce.org)，这是一个可编译和可运行的小型程序，除了演示您的问题外，它不会做任何事情。

编辑：我假设这是一个 Swing GUI。请验证是否是这样。

编辑 2：您遇到的一个问题是您设置 JFrame 的大小时没有考虑到它的“装饰”，包括菜单栏、调整大小/最大化/关闭图标。同样，您不应该直接设置大小，但如果您必须更好地覆盖`getPreferredSize()`保存网格的 JPanel 的方法。

编辑3：例如：

```
import java.awt.*;
import javax.swing.*;

public class Grid extends JPanel {
   public static final Color DARK_COLOR = Color.red.darker().darker().darker();
   public static final Color LIGHT_COLOR = Color.lightGray.brighter();
   public static final int SQUARE_SIDE = 60;
   private static final int ROW_COUNT = 8;

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(ROW_COUNT * SQUARE_SIDE, ROW_COUNT * SQUARE_SIDE);
   }

   @Override
   protected void paintComponent(Graphics g) {
      super.paintComponent(g);
      for (int i = 0; i < ROW_COUNT; i++) {
         for (int j = 0; j < ROW_COUNT; j++) {
            Color c = (i % 2 == j % 2) ? LIGHT_COLOR : DARK_COLOR;
            g.setColor(c);
            int x = i * SQUARE_SIDE;
            int y = j * SQUARE_SIDE;
            g.fillRect(x, y, SQUARE_SIDE, SQUARE_SIDE);
         }
      }
   }

   public Grid() {
      // TODO Auto-generated constructor stub
   }

   private static void createAndShowGui() {
      Grid mainPanel = new Grid();

      JFrame frame = new JFrame("Grid");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }

} 
```

# ipad - iPad 弹出视图

> ID：10569193
> 
> 赞同：0
> 
> 时间：2012-05-13T03:48:37.993
> 
> 标签：ipad, popover

我遇到了 UIPopoverController 的问题。我正在尝试在应用程序启动时在屏幕上显示一个注册表单（然后定期显示一个登录屏幕）。但是，由于表单有点长，我还需要一个位于键盘上方的工具栏，带有下一个、上一个、完成按钮（类似于 safari 中的那些）。

如何使工具栏出现在弹出视图的顶部，同时仍保持屏幕的全宽，iPad 始终处于横向模式。

我确实有这个工作，但是这些按钮只有在它们出现在与弹出框相同的矩形中时才会处于活动状态。

在这里的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T05:29:57.473

将您的工具栏设置为每个 UITextField 的 inputAccessoryView。

在 SO 和其他网站上有很多关于如何做到这一点的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:37:51.650

Create a Class for your Previous,next Toolbar. Make a method which return a Toolbar as below.

```
-(UIToolbar*)createToolBarForView:(UIView *)keyBoardView
{
  //Add segment Controller and Selector for your segmentController
} 
```

In the selector for your segment controller Use Delegates to notify the implementing Class that segment controller is getting fired.

After Making all these things set the inputAccessoryType for all the textFields for which you want that toolbar to appear

{ YourTextField.inputAccessoryView = [OBjectOfYourCustomView createToolBarForView:self.view]; }

# bash - 获取第一个命令行参数并传递其余参数

> ID：10569198
> 
> 赞同：96
> 
> 时间：2012-05-13T03:49:51.927
> 
> 标签：bash

例子：

`check_prog hostname.com /bin/check_awesome -c 10 -w 13`

```
check_remote -H $HOSTNAME -C "$ARGS"
#To be expanded as
check_remote -H hostname.com -C "/bin/check_awesome -c 10 -w 13" 
```

我希望以上是有道理的。参数会改变，因为我将使用它来处理大约 20 多个命令。这是包装程序的一种奇怪方法，但它可以解决我们在这里使用的一些系统的一些问题（必须喜欢 70 年代的代码）。

以上可以用 Perl 或 Python 编写，但 Bash 将是首选方法。

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-05-13T04:05:49.350

您可以使用[移位](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_09_07.html)

shift 是一个对位置参数进行操作的内置 shell。每次调用 shift 时，它都会将所有位置参数“移动”一个。2 美元变成 1 美元，3 美元变成 2 美元，4 美元变成 3 美元，以此类推

例子：

```
$ function foo() { echo $@; shift; echo $@; } 
$ foo 1 2 3
1 2 3
2 3 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2019-12-01T15:09:10.527

作为一名程序员，我强烈建议不`shift`要这样做，因为修改状态的操作会影响脚本的大部分内容，并使其更难理解、修改和调试：sweat_smile:。您可以改为使用以下内容：

```
#!/usr/bin/env bash

all_args=("$@")
first_arg=$1
second_args=$2
rest_args=("${all_args[@]:2}")

echo "${rest_args[@]}" 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2021-07-05T12:08:56.070

稍微调整一下[阿卜杜拉的回答](https://stackoverflow.com/a/59126818/41283)：

```
your_command "$1" "${@:2}" 
```

在 Bash（v3.2 和 v5.1）和 Zsh（v5.8）上测试

# .net - 如何重置为默认按钮背景色？

> ID：10569200
> 
> 赞同：44
> 
> 时间：2012-05-13T03:50:40.217
> 
> 标签：.net, winforms, visual-studio, button, backcolor

我正在尝试按钮背景颜色的不同选项，并最终更改`BackColor`了外观类别中的属性。然后我将它改回默认状态，即`Control`，但它看起来仍然与其他按钮不同：

![按钮截图](../Images/b761e06d5147b419be3c2f3ac87687de.png)

我已经尝试构建项目并重新启动 Visual Studio，但它没有帮助。

我知道我可以拖动另一个按钮并复制/粘贴代码，但首先是什么导致了这种情况以及如何正确修复它？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-05-13T04:03:33.550

默认情况下，该`BackColor`属性是环境属性，这意味着它从其父控件继承其值。当您将其*显式*设置为特定值时，它会覆盖环境性质并强制它使用该特定值。

标准的 Windows 按钮控件不支持自定义颜色，因此 WinForms 实际上会自定义绘制控件以允许设计者覆盖其颜色。这样，如果你想要一个丑陋的绿色或红色按钮，你可以这样做。

这里发生的情况是您已经为按钮控件有效地设置了自定义背景颜色（您将其设置为 3D 控件的背景颜色，但它也可以很容易地设置为紫色），这迫使 WinForms 自定义绘制控件并用您指定的颜色绘制其背景。这就是赋予它“平坦”外观的原因 - 背景颜色现在使用单一自定义颜色绘制，而不是使用默认的渐变效果。在 Windows Classic（Aero 之前）主题下，它不会那么明显，因为按钮实际上*是*用平面 3D 控制颜色绘制的。但是 Aero 添加了渐变和其他“热”效果，这使得它像拇指酸痛一样突出。

要清除您设置的值并恢复属性的环境特性，您可以在“属性”窗口中右键单击该属性，然后选择“重置”。您也可以通过代码将属性设置为`default(Color)`：

```
myButton.BackColor = default(Color); 
```

您还需要将`UseVisualStyleBackColor`属性设置回，每当更改属性以支持自定义背景颜色时`true`，它都会自动设置为。`false``BackColor`

或者，您可以告诉 WinForms 完全忽略这样的自定义属性，并要求 Windows 绘制按钮控件。通过将`FlatStyle`属性设置为 来做到这一点`FlatStyle.System`。

同样，这可以在设计器中或通过代码完成。这不仅可以防止您更改背景颜色等愚蠢的东西，创建一个丑陋的控件，而且还可以将 Win32 按钮控件的本机行为恢复到您的 WinForms 应用程序，包括悬停时微妙的 Aero 淡入淡出效果。

我不知道为什么这不是默认设置。您应该提出特殊要求才能获得丑陋和非标准的控件。这不应该只是自动发生。我只能假设这是对 VB 6 程序员的让步，他们多年来一直能够制作各种丑陋的控件。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-13T04:09:32.233

当您更改默认背景颜色时，它会将`UseVisualStyleBackColor`属性翻转为 false。

只需将其更改回 true，您就应该设置好了！

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-08-21T06:00:49.733

要恢复按钮的默认背景颜色，请使用；

```
Button1.BackColor = SystemColors.ButtonFace
Button1.UseVisualStyleBackColor = True 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-05-01T13:43:01.353

什么对我有用：

```
CommandButton1.BackColor = vbButtonFace 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-02-18T19:23:00.013

要将默认背景和前景恢复为按钮，请使用：

```
Button1.BackColor = SystemColors.ButtonFace;
Button1.ForeColor = default(Color);
Button1.UseVisualStyleBackColor = true; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-10-28T17:58:24.517

```
Button1.BackColor = Color.FromKnownColor(KnownColor.Control) 
```

使用`FromKnowColor`访问系统颜色。真的就是这么简单。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-05-22T21:42:04.287

```
Button1.BackColor = Color.Gainsboro 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-04-03T12:49:23.790

**请使用这个**

```
myButton.BackColor = default(Color); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-20T03:19:56.203

参考您的问题标题*“如何重置为默认按钮背景颜色？”* ，我通过以下方式解决了我的问题：

创建另一个按钮，比如说`ButtonFoo`，并将其设置为不可见，

```
ButtonFoo.visible = False 
```

您可以使用此按钮获取其颜色（因为它是默认颜色）以重置您的另一个按钮颜色，例如，

```
ButtonChangedColor.BackColor = ButtonFoo.BackColor 
```

你去吧；颜色恢复为默认值:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-25T11:46:39.110

在 Winforms 中，默认颜色是 Control。您可以从 VS 的属性窗格中设置它。

PropertyName 是 BackColor 并且您想要的颜色在 System Colors -> Control

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-06-12T20:48:11.933

```
tmpButtonCtrl.BackColor = DefaultBackColor
tmpButtonCtrl.ForeColor = DefaultForeColor
tmpButtonCtrl.UseVisualStyleBackColor = True 
```

.NET 框架 4.5
VB.Net Visual Studio 2013

# java - 扫描仪 - 管理来自文本文件的输入

> ID：10569201
> 
> 赞同：0
> 
> 时间：2012-05-13T03:50:58.277
> 
> 标签：java, java.util.scanner

我正在使用 java Scanner 尝试从名为 Inventory.txt 的文本文件中提取产品信息。

此文件包含以下格式的产品数据：

```
“Danelectro|Bass|D56BASS-AQUA|336177|395.00Orange|Amplifier|BT1000-H|319578|899.00Planet Waves|Superpicks|1ORD2-5|301075|4.50Korg|X50 Music Synthesizer|X50|241473|735.00Alpine|Alto Sax|AAS143|198490|795.00” 
```

我正在尝试解析字符串并将它们添加到 arraylist 中，以便 arraylist 中的每个元素看起来像这样：

```
"Danelectro|Bass|D56BASS-AQUA|336177|395.00"
"Orange|Amplifier|BT1000-H|319578|899.00"    
"KorPlanet Waves|Superpicks|1ORD2-5|301075|4.50"
"g|X50 Music Synthesizer|X50|241473|735.00"
"Alpine|Alto Sax|AAS143|198490|555.00” 
```

以下是我的代码：

```
public class ItemDao {        
    public ItemDao() {
        scanFile();
    }

    public void scanFile() {
        Scanner scanner; 
        ArrayList <String> content = new ArrayList <String>();
        try {
            Pattern p1 = Pattern.compile("\\.[0-9]{2}$");
            scanner = new Scanner(new File("Inventory.txt"));

            while (scanner.hasNext(p1)) {
                content.add(scanner.next(p1));
            }

            for (String item : content) {
                System.out.println("Items:" + item);
            }
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
    }
} 
```

当我测试这段代码时，我发现arraylist 是空的。任何帮助将非常感激。

java -jar A00123456Lab5.jar

在 dao 包中创建一个 ItemDAO 类 该类将包含一个实现 Comparator 的静态内部类（DAO = 数据访问对象）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T11:32:54.833

您可以在 String 上定义 Scanner 和分隔符。由于| 在正则表达式中用作 OR 组合器，您必须使用（双）反斜杠对其进行屏蔽：

```
sc = new java.util.Scanner ("Danelectro|Bass|D56BASS-AQUA|336177|395.00");
sc.useDelimiter ("\\|");

String name = sc.next ();
// name: java.lang.String = Danelectro
String typ = sc.next ();
// typ: java.lang.String = Bass
String model = sc.next
// model: java.lang.String = D56BASS-AQUA
int id = sc.nextInt ();
// id: Int = 336177
val d = sc.nextDouble ();
// d: Double = 395.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T05:07:17.593

我看到您正在使用一种模式，这些模式可以派上用场——但我只取每一行并对其进行子串化。

```
while(scanner.hasNextLine()){
    String temp = scanner.nextLine();
    while(temp.indexOf("|") != -1){
        content.add(temp.substring(temp.indexOf("|"));
        temp.substring(temp.indexOf("|")+1);
    }    
} 
```

只是一个想法 - 使用这种方式可能更容易调试。

# java - 寻找已经在播放的铃声

> ID：10569205
> 
> 赞同：1
> 
> 时间：2012-05-13T03:51:38.377
> 
> 标签：java, android

如何确定铃声是否已经在播放？如果它已经在播放，则不要再次播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T05:58:14.467

您可以使用：

```
Uri ringtoneUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
Ringtone ringtone = RingtoneManager.getRingtone(this, ringtoneUri); 
```

并检查**铃声**是否为**空**并做出相应的决定。

# java - 从 DatePicker 和 TimePicker 设置 AlarmManager

> ID：10569206
> 
> 赞同：1
> 
> 时间：2012-05-13T03:52:00.447
> 
> 标签：java, android, android-alarms

我很难从 DatePicker 和 TimePicker 创建警报...

这是我尝试的代码：

```
Calendar cal=Calendar.getInstance();
cal.set(Calendar.DAY_OF_MONTH, datePicker.getDayOfMonth());
cal.set(Calendar.MONTH, datePicker.getMonth());
cal.set(Calendar.YEAR, datePicker.getYear());
cal.set(Calendar.HOUR, timePicker.getCurrentHour());
cal.set(Calendar.MINUTE, timePicker.getCurrentMinute());        
long millis=cal.getTimeInMillis();

Intent intent=new Intent(CalendarView.this,AvisoReceiver.class);
PendingIntent mAlarmSender=PendingIntent.getBroadcast(CalendarView.this,23454546, intent,0);
AlarmManager alm=(AlarmManager)getSystemService(ALARM_SERVICE);
alm.set(AlarmManager.RTC_WAKEUP, millis,mAlarmSender); 
```

但是当我从 TimePicker 和 DatePicker 设置我的闹钟时，我的接收器没有被调用。

如果我在呼叫接收器 3 秒后设置闹钟并收到通知。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T05:46:29.750

**改写**

因此，在凌晨 2 点编程时，我并不总是处于最佳状态。以下是添加到您的代码中的两项修改，以获得您期望的行为 (24/7)：

```
cal.set(Calendar.HOUR_OF_DAY, timePicker.getCurrentHour());
cal.set(Calendar.SECOND, 0); 
```

用于`HOUR_OF_DAY`读取 24 小时时间并将`SECOND`秒设置为 :00。唯一读取 12 小时的`HOUR`时间，这就是为什么它在凌晨 2 点而不是晚上 7 点工作以及为什么它是 43000 秒（12 小时）。如果不设置`SECOND`Calendar 对象，它将携带当前分钟秒数，从而产生意外延迟。

作为旁注，您还可以一次设置所有日历值：

```
cal.set(datePicker.getYear(), datePicker.getMonth(), datePicker.getDayOfMonth(), timePicker.getCurrentHour(), timePicker.getCurrentMinute(), 0); 
```

无论哪种方式，您只需要调用：

```
alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), mAlarmSender); 
```

（不，像我的第一个建议一样需要更多花哨的数学。）希望这会有所帮助！

# android - 在 ViewPager 中滑动半页（来自兼容包）

> ID：10569208
> 
> 赞同：7
> 
> 时间：2012-05-13T03:52:33.057
> 
> 标签：android, swipe, android-viewpager

我正在使用 a `ViewPager`with a `PageAdapter`（来自兼容包 v4）在水平的框列表中滑动。**问题是我的第一页中的第二个框是第二页中的第一个框**（从视觉上和概念上）。像这样的东西：

![在此处输入图像描述](../Images/8c178e2450aa00a70a0026ee90716b4e.png)

我现在的做法是有效的。然而，这变得有点奇怪，因为在滑动的中间有一个相同的框出现两次的情况（就像它在图像中显示的那样）。

有没有办法只刷“半”页？

**编辑：**

盒子是一种抽象。事实上，每个盒子都是一个`ListView`，我创建了不同的页面，只是改变了每个`ListView`.

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-28T06:21:24.993

1.  每页创建一个片段
2.  覆盖 PageAdapter 中的 getPageWidth() 以显示多个页面

代码：

```
@Override
public float getPageWidth(int position) {
    float nbPages = 2; // You could display partial pages using a float value
    return (1 / nbPages);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T22:03:40.170

是的，使用子宽度作为页面的一半。因此，调用下一个孩子的滑动将滑动一半页面。祝你好运！

编辑：再次检查你的草图，尝试将第一个、第二个、第三个......作为不同的孩子。（我预测大部分解决方案，同时假设它将作为 GalleryView 做出反应）

# java - 使用 ANT 编译后无法运行 Java 代码

> ID：10569210
> 
> 赞同：1
> 
> 时间：2012-05-13T03:52:37.017
> 
> 标签：java, ant, build

我有以下项目结构：

```
项目目录
-src
-lib
-数据

```

`src`是 Java 源文件，`lib`包含我的项目使用的几个外部 JAR，并`data`包含程序用来存储和引用数据的各种文本文件。到目前为止，我已经在 IDE 中完成了所有开发（显然）并且一切都很好，但我正在尝试编写一个编译代码的构建文件（在类路径中使用 JAR）并且可以使用数据运行文件。自从我使用 ANT 进行构建以来已经有一段时间了，所以我确信这是一个简单的问题，但我无法让构建脚本正常工作。

下面是蚂蚁文件：

```
<project name="CMSC491Project" basedir="." default="main">

    <property name="src.dir"     value="src"/>

    <property name="build.dir"   value="build"/>
    <property name="classes.dir" value="${build.dir}/classes"/>
    <property name="jar.dir"     value="${build.dir}/jar"/>
    <property name="lib.dir"     value="lib"/>

    <property name="main.class"  value="parse.Driver"/>
    <property name="args"     value="?"/>

    <target name="clean">
        <delete dir="${build.dir}"/>
    </target>

    <fileset id="lib" dir="${lib.dir}">
        <include name="*.jar"/>
    </fileset>

    <path id="build.classpath">
        <fileset refid="${lib.dir}"/>
    </path>

    <target name="compile">
        <mkdir dir="${classes.dir}"/>

        <javac srcdir="${src.dir}" destdir="${classes.dir}" classpathref="build.classpath"/>
    </target>

    <target name="jar" depends="compile">
        <mkdir dir="${jar.dir}"/>
        <jar destfile="${jar.dir}/${ant.project.name}.jar" basedir="${classes.dir}">
            <manifest>
                <attribute name="Main-Class" value="${main-class}"/>
        <attribute name="Class-Path" value="${lib.dir}/javahash ${lib.dir}/twitter4j-core-2.2.5 ${lib.dir}/twitter4j-stream-2.2.5"/>
            </manifest>
        </jar>
    </target>

    <target name="clean-build" depends="clean,jar"/>

    <target name="main" depends="clean,jar"/>

    <target name="run" depends="compile" description="run the project">
        <java dir="${classes.dir}" classname="${main.class}" fork="yes">
            <arg line="${args}"/>
        </java>
    </target>

</project> 
```

它编译得很好，但是如果我尝试`ant run`我会收到一条错误消息，指出 java 无法从数据目录中的一个 JAR 中找到其中一个类。

不知道它需要我做什么，但提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T04:41:11.960

你`dir`在`java`蚂蚁任务中使用。这告诉您的 JVM 调用该目录中的进程。看看[这里](http://ant.apache.org/manual/Tasks/java.html)的文档。您应该通过`jar`或`classpath`属性引用 jar。尝试将您的构建配置更改为：

```
<path id="build.classpath">         
    <fileset refid="lib"/>
    <fileset dir="${classes.dir}"/>     
</path>

<target name="run" depends="compile" description="run the project">
    <java classpathref="build.classpath" classname="${main.class}" fork="yes">
        <arg line="${args}"/>
    </java>
</target> 
```

**编辑**（在编译中包含 classpathref）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T13:00:54.990

您尚未指定可执行 jar 所依赖的 jar 的正确相对链接。您的罐子位于此处：

```
build/jar 
```

并且它在以下位置找不到罐子（取自清单中的“类路径”）：

```
build/jar/lib/??.jar 
```

解决这个问题的最好方法是使用 ANT 的[manifestclasspath](http://ant.apache.org/manual/Tasks/manifestclasspath.html)任务：

```
<manifestclasspath property="jar.classpath" jarfile="${jar.dir}/${ant.project.name}.jar">
    <fileset dir="lib" >
        <include name="*.jar"/>
    </fileset>
</manifestclasspath>

<jar jarfile="${jar.dir}/${ant.project.name}.jar" basedir="${classes.dir}">
   <manifest>
      <attribute name="Main-Class" value="${main-class}"/>
      <attribute name="Class-Path" value="${jar.classpath}"/>
   </manifest>
</jar> 
```

设置完所有这些后，您可以按如下方式运行 jar：

```
<java dir="${classes.dir}" jar="${jar.dir}/${ant.project.name}.jar" fork="yes">
    <arg line="${args}"/>
</java> 
```

有两种方法可以运行 jar。使用**jar**参数来指定使用**classname**的主类。

只有**jar**参数将使用嵌入在您的 jar 文件清单中的类路径。如果您使用**类路径**，您将被迫指定它。

您最终应该考虑如何分发这个 jar。如果您将 jar 提供给其他人，他们需要将依赖项放在一个目录中，该目录位于 jar 的以下相对路径中

```
../../lib 
```

# python - 如何在 Python 的补码中表达二进制文字？

> ID：10569213
> 
> 赞同：1
> 
> 时间：2012-05-13T03:53:18.333
> 
> 标签：python, syntax, binary, literals, twos-complement

在 python 中，0b01001011 将是 75，这也适用于 Two's Complement。但是 0b10101001 将是 169，而在二进制补码中，它将是 -87。如何表达二进制补码字面量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T03:56:51.293

您用负号表示负二进制文字，如下所示：

```
>>> -0b1010111
-87 
```

Python 的整数不是固定宽度的，因此没有“二进制补码”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-16T22:16:44.667

您可以使用[二进制分数](https://pypi.org/project/binary-fractions/)包。这个包`TwosComplement`用二进制整数和二进制分数实现。您可以将二进制分数字符串转换为其二进制补码，反之亦然

例子：

```
>>> from binary_fractions import TwosComplement, Binary
>>> int(Binary("01001011"))
75
>>> int(Binary("10101001"))
169
>>> TwosComplement("10101001").to_float()
-87.0 
```

PS：无耻插件，我是这个包的作者。

# php - jquery + php倒计时并执行错误

> ID：10569214
> 
> 赞同：0
> 
> 时间：2012-05-13T03:53:58.680
> 
> 标签：php, javascript, jquery, timer

好的，所以我无法让这个倒计时运行，我提供了`date-time`一个`jquery Date()`函数，我希望它每秒运行一次，但由于某些奇怪的原因，我抛出了未定义的错误。*请注意，这是 100% 动态的，页面上可能有 1 个倒计时或每个用户有 1000 个倒计时。

HTML 标记：

```
 <li class="clu">
    <legend>Clutch # 1</legend>
    <ul class='clutch-des'>
        <li class='it-d'>2012-05-12 23:55:59</li>
        <li class='it'>Remaining: <span class="timeremaining" id="dlvdfovwdfivwsf">
            <span class="hours">03</span>
            <span class="mins">09</span>
            <span class="sec">55</span>
            </span>
        </li>

     </ul>
</li>
<li class="clu">
    <legend>Clutch # 1</legend>
    <ul class='clutch-des'>
        <li class='it-d'>2012-05-12 23:55:59</li>
        <li class='it'>Remaining: <span class="timeremaining" id="dlvdfovwdfivwsf">
            <span class="hours">03</span>
            <span class="mins">09</span>
            <span class="sec">55</span>
            </span>
        </li>

     </ul>
</li>
<li class="clu">
    <legend>Clutch # 2</legend>
    <ul class='clutch-des'>
        <li class='it-d'>2012-05-12 23:55:59</li>
        <li class='it'>Remaining: <span class="timeremaining" id="dlvdfovwdfivwsf">
            <span class="hours">03</span>
            <span class="mins">09</span>
            <span class="sec">55</span>
            </span>
        </li>

     </ul>
</li>
<li class="clu">
    <legend>Clutch # 3</legend>
    <ul class='clutch-des'>
        <li class='it-d'>2012-05-12 23:55:59</li>
        <li class='it'>Remaining: <span class="timeremaining" id="dlvdfovwdfivwsf">
            <span class="hours">03</span>
            <span class="mins">09</span>
            <span class="sec">55</span>
            </span>
        </li>

     </ul>
</li>
​ 
```

查询：

```
 var a = new Array(); var i = 0;
$('.timeremaining').each(function(index , el){
    var ID = $(this).attr('id');
    // get due date for countdown
    var dd = $(this).parent().parent().children('.it-d').text().split('Due :'); var dd = dd[1];
    var kids = $(this).children();
    $(kids).each(function(){
    a[i] = $(this).attr('class');
    i++;
    });

    Cdtd(x,a[0],a[1],a[2],ID);
});    
function Cdtd(x,hrd,md,sd,ID){

    var dd = new Date(x);
    var now = new Date();
    var dif = dd.getTime() - now.getTime() ;
    if(dif <= 0){
        clearTimeout(CountDown);
        alert('Clutch done!');
    }
    var sec = Math.floor(dif / 1000);
    var min = Math.floor(sec / 60);
    var hr = Math.floor(min / 60);
    var day = Math.floor(hr / 24);
    min %= 60;
    sec %= 60; 
    hr  %= 24;
    $('#'+ID+' '+sd).text (sec+ 'secs');
    $('#'+ID+' '+md).text (min+ 'mins');
    $('#'+ID+' '+hrd).text(hr+  'hrs' );
    var CountDown = setInterval('Cdtd(x,hrd,md,sd)',1000);

}
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T07:15:59.407

我终于让你的代码在[这里工作了，做了一些修改](http://jsfiddle.net/W7jny/2/)。另外，请记住不要对元素使用相同的 ID；他们需要每个都是独一无二的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T06:03:08.400

试试这个[javascript 库](http://www.hashemian.com/tools/javascript-countdown.htm)。他的代码易于阅读和自定义。

# bash - bash 递归 CSV 解析器

> ID：10569217
> 
> 赞同：1
> 
> 时间：2012-05-13T03:55:12.930
> 
> 标签：bash, csv, awk, recursive-descent

我已将此问题移至**[代码审查](https://codereview.stackexchange.com/questions/11727/need-some-advice-or-help-with-translation-and-or-testing-csv-recursive-parser-i)**

我在 bash 中编写了一个递归下降解析器。

我想知道你是否可以指出一些对我有帮助的东西。它支持反斜杠转义和带解析错误报告的引用字段。

该脚本`cut`在某些方面的工作方式类似于.. 从文件中获取输入或`stdin`允许用户选择他们想要打印的行和字段。分别使用选项`-l`和`-f`。可以打印字段列表，并且可以使用选项 --list '1 2 3 4 5' 和 --list-seperator $'\n' 指定该列表的自定义分隔符。

```
#!/bin/bash

shopt -s extglob; # we need maxiumum expression capabilities enabled

# option variables
declare list='' delim=$'\n' field='' lineNum=1;

while [[ ${1:0:1} = '-' ]]; do # Parse user arguments

    case $1 in
        -f)
            field=$2; shift 2;
        ;;
        -l)
            lineNum=$2; shift 2;
        ;;
        --list-seperator)
            delim="$2"; shift 2;
        ;;
        --list)
            list="$2"; shift 2;
        ;;
        *) break;;
    esac

done

# open a user supplied file on stdin
[[ -e "$1" ]] && exec 0<$1;

# data from 'read/getline'
declare input='';

# we are using sed to optimize input, the command just prints the desired line
read -r input < <(sed -n ${lineNum}p) 
# why doesn't the above work as a pipe into read?

# range of this line
declare strLen=${#input} value='';

# data processing variables
declare symbol='' value='';

# REGEX symbol "classes"
declare nothing='' comma='[,]' quote='["]' backslash='[\]' text='[^,\"]';

# integers:
declare -i iPos=-1 tPos=0;

# output array:
declare -a items=();

NextSymbol() {

    symbol="${input:$((++iPos)):1}"; # get next char from string

    (( iPos < strLen )); # return false if we are out of range

}

Accept() {

    [[ -z "$symbol" && -z "$1" ]] && return 0; # accept "nothing/empty"

    # if you can meld the above line into the next line
    # let me know: pc.wiz.tt@gmail.com; this is some kind of bug!
    # becare careful because expect expects 'nothing' to be empty.
    # that's why it says 'end of input'

    [[ "$symbol" =~ ^$1$ ]] && NextSymbol && return 0; # match symbol
}

Expect() {
    Accept "$1" && return
    local msg="$0: parse failure: line $lineNum: expected symbol: "
    echo "$msg'${1:-end of input}'" >&2;
    echo "$0: found: '$symbol'" >&2;
    exit 1;
}

value() {

    while Accept $text; do # symbol will not be what we expect here
        value+=${input:$((iPos-1)):1}; # so get what we expect
    done

    Accept $nothing && { # this will only happen at end of the string
        value+=${input:$((iPos-1)):1} # get the last char
        pushValue; # push the data into the array
    }

}

pushValue() {
    items[tPos++]=$value;
    value=''; # clear value!
}

quote() {

    until [[ $symbol =~ $quote || -z $symbol ]]; do
        value+=$symbol;
        NextSymbol;
    done

    Expect $quote;

}

line() {

    Accept $quote && {
        quote
        line;
    }

    Accept $backslash && {
        value+=$symbol;
        NextSymbol;
        value;
        line;
    }

    Accept $comma && {
        pushValue;
        line;
    }

    Accept $text && {
        value=${input:$((iPos-1)):1};
        value;
        line;
    }

}

NextSymbol;
    line;
        Expect $nothing

[[ $field ]] && { # want field    
    echo "${items[field-1]}" # print the item
                             # (index justified for human use)
    exit;
}

[[ $list ]] && { # want list
    for index in $list; do
        echo -n "${items[index-1]}${delim}" # print the list 
                                            # (index justified for human use)
    done
    exit;
}

exit 1; # no field or list 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T04:02:47.137

说真的，让它更快的方法是用一种不被解释的语言编写。

对于解析器来说，shell 可能不是一个糟糕的选择，原因与我不会用 6502 汇编语言或用 COBOL 编写操作系统的原因相同。

而且，老实说，`awk`不会那么好。它是顺序文本处理的理想选择，但将其应用于像解析器这样复杂的东西将是一个延伸。

有时，您只需要重新考虑您正在使用的工具。如果你做不到它是像 C 这样的编译语言，至少要考虑一下像 Python 这样的面向字节码的语言。

# sql-server-ce - SQL：表数组

> ID：10569218
> 
> 赞同：0
> 
> 时间：2012-05-13T03:55:24.690
> 
> 标签：sql-server-ce

我正在学习将 SQL Server Compact 与我的 C# 程序一起使用，并且我想确保我做对了。

我想要一组表。在我的程序中，用户创建数据表，每个数据表都存储在一个 SQL 表中。这些表由 C# 方面的唯一字符串索引（表“foo”、表“bar”等）。我可以创建一个将这些字符串与整数 ID 匹配的表，但我不知道如何为数据库中的索引创建一个表数组之类的东西。

我的想法是我可以将整数 ID 转换为字符串 ID，例如将“13”转换为“table_0013”并将其用作表名。但我想也许有更好的方法。

那么当你需要一个表数组时，你通常会怎么做呢？

# android - 自定义选项卡视图中的片段生命周期

> ID：10569219
> 
> 赞同：0
> 
> 时间：2012-05-13T03:55:40.707
> 
> 标签：android

我有一个自定义小部件，它在按下按钮时执行 FragmentTransaction.replace。目前，我的代码设置为在第一次创建片段时，它会将一堆东西附加到最初不是 xml 布局文件的一部分的视图中。

当应用程序首次启动时，我的所有片段都正确显示了内容，但是，假设我从片段 A 开始。然后我可以转换到片段 B（B 正确显示），但是，当我转换回片段 A 时，所有我附加到 Fragment A 视图的东西现在已经消失了。我知道发生这种情况是因为调用了 onCreateView，这可能意味着在调用 FragmentTransaction.replace 时会重新生成 Fragment 的视图。

有没有一种方法可以在调用 FragmentTransaction.replace 时保留我的片段，而不是让它们重新生成视图？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T12:03:05.123

不要使用 fragmentTransaction.replace，而是使用 fragmentTransaction.show 和 fragmentTransaction.hide。

这样可以防止您的碎片被破坏。

# google-apps-script - Google Apps 脚本：.appendRow() 不会增加表单记录数

> ID：10569224
> 
> 赞同：1
> 
> 时间：2012-05-13T03:57:40.823
> 
> 标签：google-apps-script

我有一张需要两种方法来附加记录（行）的工作表。一个是关联的表单，另一个是关联的脚本。该脚本成功执行 .appendRow() 并且 .getLastRow() 增加了，但下一个表单提交将数据附加到错误行之后，即 privoius 最后一行 (.getLastRow-1)。我还注意到 .appendRow() 不会像 Form(123) 那样增加电子表格菜单中 Form 之后显示的数字。电子表格似乎有两个不同的最后一行。

有没有人帮我在脚本中增加表格最后一行。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T04:49:15.237

这似乎是由脚本填充的数据没有被自动吸收到与表单提交相关的所谓表格中的问题，该表格由浅灰色背景定义。后续的表单提交将被添加到灰色区域的底部（无论下面的数据如何），并且表单提交计数将仅针对灰色区域中的行。

一个笨拙的解决方法是在附加行之后使用 copyTo 方法将数据复制到位：

```
sheet.getRange(sheet.getLastRow(),1,1,sheet.getLastColumn())
     .copyTo(sheet.getRange(sheet.getLastRow(),1,1,sheet.getLastColumn())); 
```

高温高压

亚当

# javascript - d3.js，点击链接到另一个用变量编码的 URL

> ID：10569225
> 
> 赞同：2
> 
> 时间：2012-05-13T03:57:54.313
> 
> 标签：javascript, jquery, d3.js

我做了一个散点图，并想为每个点添加一个链接。

```
 chart.selectAll("scatter-dots")
      .data(data)
      .enter().append("circle")
        .attr("cx", function (d) { return x(d.position[0]); } )
        .attr("cy", function (d) { return y(d.position[1]); } )
        .attr("r", 4)
        .style("fill", "#666")
        .style("opacity", 0.5)
    .on("click", function(){
        var url = "http://somelink.com/link.php?id=";
        url += d.link_id;
        //$(location).attr('href', url);
        //window.location = url;    
    }); 
```

如果我只是将纯字符串链接（例如 window.location = "http://stackoverflow.com"

jquery 和 javascript 都不起作用（如评论。）

我也尝试了一个外部js文件，仍然失败。

如果有帮助，这是在 PHP 文件中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T04:16:48.363

如果它适用于静态字符串，则 d.link_id 有问题。尝试通过做`alert(d.link_id)`或使用萤火虫或类似工具来查看里面的内容`console.log(d.link_id)`。

或者，您应该使用真正的锚点来链接您的节点，而不是设置点击事件。这会像......

```
chart.selectAll("scatter-dots")
  .data(data)
  .enter()
  .append("a")
    .attr("xlink:href", function(d) {return "http://somelink.com/link.php?id=" + d.link_id})
    .append("circle")
      .attr("cx", function (d) { return x(d.position[0]); } )
      .attr("cy", function (d) { return y(d.position[1]); } )
      .attr("r", 4)
      .style("fill", "#666")
      .style("opacity", 0.5) 
```

（我似乎不记得这是否是这样做的确切方式，您可能需要将锚点保存在变量中，然后将圆圈附加到它们。）

# android - 简单远程 plist 存储的解决方案比较/选择

> ID：10569226
> 
> 赞同：1
> 
> 时间：2012-05-13T03:57:56.847
> 
> 标签：android, ios, persistence, cloud

这个问题是确定解决方案并选择“保持简单和愚蠢”的问题。

为简化起见，我需要在远程服务器上放一个 plist 文件，iOS/Android 客户端可以将其下载到本地并按一定时间间隔请求更新。我知道我们可以

*   1）建立自己的服务器来托管plist文件并提供简单的Web服务供访问；

*   2) 选择一种云服务？

还有其他人吗？哪个是 KISS 的？

# jquery - 将 CSS 垂直菜单转换为下拉菜单 - 一旦下降就无法消失

> ID：10569228
> 
> 赞同：0
> 
> 时间：2012-05-13T03:58:24.363
> 
> 标签：jquery, css, menu

我有一个要转换为下拉菜单的垂直 CSS 菜单。我为 mouseover 添加了一些 javascript 以使其下拉，但不能让它在 mouseout 时消失。

[http://jsfiddle.net/hCVjK/4/](http://jsfiddle.net/hCVjK/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T04:33:25.517

这是一个很难解决的问题，尤其是当您淡出而不是立即隐藏时。您需要跟踪鼠标悬停在什么地方，并考虑到当您从一个标签移动到另一个标签时，mouseenter 和 mouseleave 事件不会同时完美触发。

试试这个：http: [//jsfiddle.net/cgagliardi/NPVVQ/](http://jsfiddle.net/cgagliardi/NPVVQ/)

在 HTML 中，我删除了类别上的 onMouseOver 代码并将其移到 JS 中。

在 CSS 中，我改变了

```
#navigation { ... visibility: hidden } 
```

到

```
#navigation { ... display: none } 
```

除此之外，所有更改都在 javascript 中。如果您想延迟主菜单淡出所需的时间，请更改 setTimeout 调用中的 100 值。

# jquery - JsRender - 如何从模板内渲染模板？

> ID：10569229
> 
> 赞同：4
> 
> 时间：2012-05-13T03:58:35.877
> 
> 标签：jquery, jquery-templates, jsrender

如何从 JSRender 的模板中渲染模板？在之前的 jquery 模板中，我可以使用

`{{tmpl(Languages) "#languageTemplate"}}`

在 JSRender 中，我可以在条件语句和循环中找到模板组合示例。我想独立调用模板。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T04:55:12.920

在 JsRender 中

> {{for Languages tmpl="#languageTemplate"/}}

或多或少完全等同于 jQuery 模板中的以下内容

> {{tmpl（语言）“#languageTemplate”}}

在每种情况下，如果 Languages 是一个数组，则 languageTemplate 将为每个项目呈现一次，但如果 Languages 不是数组，则模板将呈现一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T20:36:28.393

鲍里斯答案的一次更新。在 Boris 的最新文档中，您需要在 for 循环中的模板名称前添加“tmpl=”以引用模板中的模板。所以最终版本是：

{{for Languages tmpl="#languageTemplate"/}}

查看他的[演示](http://borismoore.github.com/jsrender/demos/demos.html)以了解更多信息

# xcode - 有没有办法重建 Xcode 项目文件？

> ID：10569230
> 
> 赞同：0
> 
> 时间：2012-05-13T03:58:55.903
> 
> 标签：xcode

如果当前的 Xcode 项目文件（都在`ProjectName.xcodeproj`文件夹内）在崩溃后丢失，如果不依赖 git，有没有办法重建它？（项目文件并非一直提交）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T05:58:18.367

其他地方没有足够的冗余信息来完全重建 xcodeproj 文件，但您可以先创建一个新文件并将源代码拖入其中。

# ios - 如何直观地表明 UIAlertView 很重要？

> ID：10569233
> 
> 赞同：1
> 
> 时间：2012-05-13T04:01:03.980
> 
> 标签：ios, xamarin.ios, uialertview

我正在使用 monotouch，但会接受 Objective-C 的答案。

我想要一个 UIAlertView 消息是否重要的​​视觉指示。

我找到了一个关于如何在警报中显示图标的 Objective-C 示例（在 stackoverflow 上的某处），但文本不会环绕图标。

也许还有另一种选择。也许有一种方法可以将警报的背景颜色更改为黄色？

所以我的具体问题是这是否有标准做法，或者有人可以推荐一个好的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T06:14:01.960

Apple 的[HIG](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW39)强烈建议 AlertView 的外观应与背景的配色方案相协调。他们建议的唯一视觉指示是使用红色按钮进行潜在的破坏性操作。我同意@MDT 的观点，根据定义，所有警报都应该是重要的和不重要的消息（例如常规状态消息），应该以其他方式呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T04:41:19.743

一般来说，人们不喜欢定制太多。这是 Apple 的一些 UI 指南。是的，您可以自定义 UIAlertView 但为此您必须对其进行子类化并覆盖它的方法：-

```
@interface CustomAlertView : UIAlertView

@end 
```

在 .m 文件中覆盖方法 layoutSubviews:-

```
- (void)layoutSubviews
{
    for (UIView *subview in self.subviews){ //Fast Enumeration
        if ([subview isMemberOfClass:[UIImageView class]]) {
            subview.hidden = YES; //Hide UIImageView Containing Blue Background
        }

        if ([subview isMemberOfClass:[UILabel class]]) { //Point to UILabels To Change Text
            UILabel *label = (UILabel*)subview; //Cast From UIView to UILabel
            label.textColor = [UIColor colorWithRed:210.0f/255.0f green:210.0f/255.0f blue:210.0f/255.0f alpha:1.0f];
            label.shadowColor = [UIColor blackColor];
            label.shadowOffset = CGSizeMake(0.0f, 1.0f);
        }
    }
} 
```

然后您将不得不覆盖 drawRect ，如果您想要完全不同的警报，可以[在 CustomAlert 上查看本教程。](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uialertview-custom-graphics/)

# eclipse - 为什么我无法通过安装新软件下载任何插件？

> ID：10569238
> 
> 赞同：3
> 
> 时间：2012-05-13T04:02:14.320
> 
> 标签：eclipse, eclipse-plugin, jetty

我无法通过安装新软件或通过 Marketplace 下载 Eclipse 的任何插件。我追求的特定插件是 Run-Jetty-Run，但经过一些测试，我注意到我无法下载任何东西，即使是从 Eclipse 更新源。

我正在运行最新版本的 Indigo，并且正在使用 Win7 64 位。我的机器位于路由器后面并运行 AVG Free。
我已经尝试过的事情：
转发端口 4000
以管理员身份运行
Eclipse 在 Windows 防火墙中为 Eclipse 添加异常

尝试下载 RJR 的源时，我在错误日志中收到“配置异常”，但没有弹出消息。痕迹很大，如有需要会发布。最终，我进入接受许可协议的屏幕，下载开始，但在标记为 Fetching [repository URL] 的步骤处挂起。一段时间后，我收到此弹出错误：

收集要安装的项目时发生错误会话上下文是：（profile=SDKProfile，phase=org.eclipse.equinox.internal.p2.engine.phases.Collect，operand=，action=）。无法在[http://run-jetty-run.googlecode.com/svn/trunk/updatesite/plugins/runjettyrun_1.3.3.201203161919.jar](http://run-jetty-run.googlecode.com/svn/trunk/updatesite/plugins/runjettyrun_1.3.3.201203161919.jar)读取存储库。读取超时无法读取位于[http://run-jetty-run.googlecode.com/svn/trunk/updatesite/plugins/runjettyrun.jetty7_1.3.3.201203161919.jar](http://run-jetty-run.googlecode.com/svn/trunk/updatesite/plugins/runjettyrun.jetty7_1.3.3.201203161919.jar)的存储库。读取超时

[最后三行又重复了，但我的声誉太低，不能再发一个链接]

我知道这不是存储库本身失败 - 我尝试加载的每个插件都以类似的方式失败并出现相同类型的错误消息，我可以通过浏览器下载 jar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T03:44:09.550

这正是存在某种防火墙或代理设置不正确时遇到的问题。您是否已转到首选项 -> 常规 -> 网络设置并在那里设置您的代理配置？

如果这不起作用，则某些项目已存档更新站点，您可以下载这些站点。尝试寻找其中之一，从本地更新站点下载和安装。

# wpf - 如何在不定义每一行的情况下设置网格列/行大小？

> ID：10569239
> 
> 赞同：7
> 
> 时间：2012-05-13T04:02:28.330
> 
> 标签：wpf, xaml

我有一个网格。我必须手动定义每一列和每一行，如下所示：

```
<Window x:Class="GridBuild"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="GridBuild" Height="300" Width="300">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition/>
    </Grid.RowDefinitions>        
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>        
</Grid> 
```

我想用一行定义行数和列数，如下所示：

```
<Window x:Class="GridBuild"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="GridBuild" Height="300" Width="300">
    <Grid>
        <Grid.NumberOfRows="2"/>
        <Grid.NumberOfColumns/>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T13:55:07.693

你所描述的是所谓的`UniformGrid`。它具有`Columns`和`Rows`属性，您可以通过这些属性设置所需的行数或列数。

如果您不设置这些属性，`UniformGrid`则将尝试将子项布置得尽可能接近正方形。在这种情况下，它倾向于在增加行数之前增加列数。

这是一个不起眼的面板，但如果使用得当，它会非常强大。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T09:23:22.370

我建议从这些属性派生`Grid`并添加到它，如下所示：

```
public class GridEx : Grid
{
    public int NumberOfRows
    {
        get { return RowDefinitions.Count; }
        set
        {
            RowDefinitions.Clear();
            for (int i = 0; i < value; i++)
                RowDefinitions.Add(new RowDefinition());
        }
    }

    public int NumberOfColumns
    {
        get { return ColumnDefinitions.Count; }
        set
        {
            ColumnDefinitions.Clear();
            for (int i = 0; i < value; i++)
                ColumnDefinitions.Add(new ColumnDefinition());
        }
    }
} 
```

现在可以按如下方式使用：

```
<local:GridEx NumberOfRows="3" NumberOfColumns="2">
    <TextBox>some text</TextBox>
    <TextBox Grid.Row="1">some text</TextBox>
    <TextBox Grid.Row="2">some text</TextBox>

    <TextBox Grid.Column="1">some text</TextBox>
    <TextBox Grid.Row="1" Grid.Column="1">some text</TextBox>
    <TextBox Grid.Row="2" Grid.Column="1">some text</TextBox>
</local:GridEx> 
```

顺便说一句，也可以在设计师中工作:)

这里的挑战是为不同的行和列设置不同的宽度、高度等。我有一个很好的想法如何做到这一点。也可以自动分配 Grid.Row 和 Grid.Column。想想看：）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-24T17:59:42.140

EvAlex 的上述答案将起作用，但前提是您不想使用数据绑定设置列/行数。

```
public class GridEx : Grid
{
    public int NumberOfRows
    {
        get { return RowDefinitions.Count; }
        set
        {
            RowDefinitions.Clear();
            for (int i = 0; i < value; i++)
                RowDefinitions.Add(new RowDefinition());
        }
    }

    public int NumberOfColumns
    {
        get { return ColumnDefinitions.Count; }
        set
        {
            ColumnDefinitions.Clear();
            for (int i = 0; i < value; i++)
                ColumnDefinitions.Add(new ColumnDefinition());
        }
    }
} 
```

如果您确实想通过数据绑定来设置这些（就像我一样），那么使用上述解决方案，编译器会抱怨，因为它需要这样做`DependencyProperties`。A`DependencyProperty`可以如下实现（使用 C# 6 的`nameof`运算符）（插入它的快速方法是使用片段 propdp）：

```
public int Columns
{
    get { return (int) GetValue(ColumnsDependencyProperty); }
    set { SetValue(ColumnsDependencyProperty, value); }
}
public static readonly DependencyProperty ColumnsDependencyProperty =
    DependencyProperty.Register(nameof(Columns), typeof(int), typeof(GridEx), new PropertyMetadata(0)); 
```

但是这样你就不能执行必要的逻辑来添加必要数量的`RowDefinitions`. 为了解决这个问题，`DependencyPropertyDescriptor`为每个定义一个`DependencyProperty`并在您的自定义类的构造函数中添加一个`AddValueChanged`带有必要逻辑的调用。然后每个属性的结果是（使用 C# 6 的空条件运算符`?.`）：

```
 public int Columns
    {
        get { return (int) GetValue(ColumnsDependencyProperty); }
        set { SetValue(ColumnsDependencyProperty, value); }
    }
    public static readonly DependencyProperty ColumnsDependencyProperty =
        DependencyProperty.Register(nameof(Columns), typeof(int), typeof(GridEx), new PropertyMetadata(0));

    DependencyPropertyDescriptor ColumnsPropertyDescriptor = DependencyPropertyDescriptor.FromProperty(ColumnsDependencyProperty, typeof(GridEx));

    public GridEx()
    {
        ColumnsPropertyDescriptor?.AddValueChanged(this, delegate
        {
            ColumnDefinitions.Clear();
            for (int i = 0; i < Columns; i++)
                ColumnDefinitions.Add(new ColumnDefinition());
        });
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-05T10:04:24.150

在这里寻找一个完全符合您要求的助手： [https ://rachel53461.wordpress.com/2011/09/17/wpf-grids-rowcolumn-count-properties/](https://rachel53461.wordpress.com/2011/09/17/wpf-grids-rowcolumn-count-properties/)

如果您已将上述链接中的帮助程序添加到您的项目中，您可以像这样使用它：

```
<Grid local:GridHelpers.RowCount="6"
      local:GridHelpers.StarRows="5"
      local:GridHelpers.ColumnCount="4"
      local:GridHelpers.StarColumns="1,3">
</Grid> 
```

# objective-c - 如何更新 UILabel

> ID：10569244
> 
> 赞同：2
> 
> 时间：2012-05-13T04:04:41.090
> 
> 标签：objective-c, ios, ios5, uikit

我有一个要更新的 UILabel。它已通过 ctrl-cicking 并通过 XIB 文件添加到类中。我在等待短暂的延迟后尝试更新标签文本。到目前为止，除了下面的代码之外，没有其他任何事情发生。但是，当我运行它时，模拟器会暂时空白并直接将我带到最后更新的文本。它没有向我显示`100`只是`200`.

如何让标签按照我的意愿进行更新。最终，我试图在标签内设置一个递减计时器。

从 XIB 链接到头文件的标签：

```
@property (strong, nonatomic) IBOutlet UILabel *timeRemainingLabel; 
```

在实施中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.timeRemainingLabel.text = @"100";
    sleep(1);
    self.timeRemainingLabel.text = @"200";    
} 
```

*   已经合成了。

*   XCode 4.3.2、Mac OSX 10.7.3、iOS 模拟器 5.1（运行 iPad）、iOS 5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T04:12:03.200

它永远不会像这样向您显示 100，因为您在`sleep`这里使用的是停止程序的执行，并且在 1 秒后`sleep`您正在更新文本。如果你想这样做，那么你可以使用一个`NSTimer`。

像这样更改上面的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.timeRemainingLabel.text = @"100";

    [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(updateLabel) userInfo:nil repeats:NO];

}

- (void) updateLabel
{
    self.timeRemainingLabel.text = @"200"; 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T04:13:01.763

您的实现的问题是执行序列在`sleep`. 这就是问题所在，因为 UI 子系统在获得将标签`"100"`设置为`"200"`.

要正确执行此操作，首先您需要在 init 方法中创建一个计时器，如下所示：

```
timer = [NSTimer scheduledTimerWithTimeInterval: 1.0 target:self selector:@selector(updateLabel) userInfo:nil repeats: YES]; 
```

然后你需要为你的`updateLabel`方法编写代码：

```
-(void) updateLabel {
    NSInteger next = [timeRemainingLabel.text integerValue]-1;
    timeRemainingLabel.text = [NSString stringWithFormat:@"%d", next];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T04:12:38.703

在视图尚未加载之前，您的视图不会出现，并且标签的文本`timeRemainingLabel`是`@"200"`发生这种情况的时候。所以你看不到文本的变化。`NSTimer`改为使用 an并将文本分配给选择器中的标签：

```
timer = [NSTimer scheduledTimerWithTimeInterval:timeInSeconds target:self selector:@selector(updateText) userInfo:nil repeats: YES/NO]; 
```

并在您的更新方法中，根据您的要求设置最新文本：

```
-(void) updateText {
    self.timeRemainingLabel.text = latestTextForLabel;
} 
```

# c# - ORM：LLBLGen 项目和其他

> ID：10569245
> 
> 赞同：0
> 
> 时间：2012-05-13T04:05:24.520
> 
> 标签：c#, database, nhibernate, orm, llblgenpro

ORM：nHibernate 和 LLBLGen 等...

在 LLBLGen 中，您在单个项目下定义所有数据库，我不确定您是要在单个项目下定义所有数据库还是在单个项目下定义每个应用程序的数据库。

你做什么工作？它与 nhibernate 和其他人有什么不同，你在哪里定义/ERM 你的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T06:18:32.333

好吧，在最近的过去，我们每个数据库都有一个项目，其中所有映射的类都重新定位，但我们有零逻辑贫血模式 - 没有方法，只有映射的类。这主要是因为在这个领域（2个项目：数据仓库和金融交易）数据没有方法，但要么没有在加载程序（数据仓库）之外进行操作，要么通过服务架构运行，结果排队等待写入（再次没有逻辑） .

在此之前，我使用了我自己的，它能够合并多项目映射模式——这对于模块化应用程序来说非常重要，因为你可能不希望所有东西都在一个模块中，数据库方面。

> 假设在一个项目下定义所有数据库

现在那将是愚蠢的。看，如果我在 4 个软件解决方案上工作，拥有数据库，唯一的共同点是我在 thjem 上工作，那么拥有一个数据库项目是愚蠢的——它破坏了源代码控制、持续集成，并且很难与其他程序员交换信息致力于解决方案之一。无论您做什么，“项目”（如：项目管理，而不是 Visual Studio 项目）都是硬边界（如：TFS 项目，目录层次结构），不应与其他项目重叠。

> 或在单个项目下为每个应用程序定义数据库

至少你隔离应用程序，但是应用程序共享的数据库是什么（如：我有一个项目，如项目管理中的一个解决方案，但它有 5 个应用程序（exe 文件） - 并非一切都是一个简单的微不足道的网站。我目前的主要到目前为止，proejct 有一个服务器应用程序、一个客户端应用程序、2 个网站和十几个外部工具，我们只是从 PowerShell 集成开始；）

# java - 从程序中从 objectdb 数据库中检索值

> ID：10569246
> 
> 赞同：0
> 
> 时间：2012-05-13T04:05:36.860
> 
> 标签：java, database, objectdb

我在尝试通过程序获取数据时遇到了一些问题。我使用 objectDB 作为我的数据库。另外，我的数据库已经设置好了，并且我已经将laptop.odb 文件放到了我的objectDB 安装的db 文件夹中。此外，当我转到资源管理器并触发查询时：

`select this.modelName == "HP Pavillion"`

出现正确的结果。但是，当我尝试对我的代码做同样的事情时，如下所示

`public static void main(String argv[]) {
PersistenceManager pm = Utilities.getPersistenceManager("laptop.odb"); System.out.println("-- TEST --\n");
Query query = pm.newQuery(Laptop.class,"this.modelName == \"HP Pavillion\""); Collection result = (Collection)query.execute(); System.out.println("Result is >> "+result);`

这里不返回任何结果。我的输出是：
--测试找到--

结果是 >> []

我的课程代码如下。

```
 package com.project;

    import java.util.*;

    import javax.annotation.processing.Processor;
    import javax.jdo.*;

    import com.objectdb.Utilities;

    public class Laptop {

        String modelName; // key

public static void main(String argv[]) {
        PersistenceManager pm = Utilities.getPersistenceManager("laptop.odb");
        System.out.println("-- TEST find --\n");
        Query query = pm.newQuery(Laptop.class,"this.modelName == \"HP Pavillion\"");
        Collection result = (Collection)query.execute();
        System.out.println("Result is >> "+result);

} 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:30:37.940

原因可能是“laptop.odb”指的是一个不存在的 ObjectDB 数据库。在这种情况下，会自动创建一个新数据库。因为它创建的新数据库是空的，所以查询没有返回任何结果。

尝试指定现有数据库的绝对路径。

# asp.net-mvc - WCF 服务未更新引用（未显示其所有类型）

> ID：10569250
> 
> 赞同：0
> 
> 时间：2012-05-13T04:07:42.687
> 
> 标签：asp.net-mvc, wcf

我有一个 MVC 应用程序。我向它添加了一个服务引用。都好。我能够看到我的课程，客户，没问题。

我向我的 WCF 服务添加了更多类，但我无法让它们“显示”在服务参考中。

我已经尝试过这些步骤

*   删除服务引用并重新添加。没啥事儿。
*   重建整个事情。停止开发服务器，删除服务，重新添加。没啥事儿
*   更改了开发服务器的端口，（前两个步骤）。没啥事儿。

在这一点上，我不知道还能做什么。我在这上面花了 3 个小时。我不知道用谷歌搜索什么。我找到的所有“解决方案”，都不适合我。

注意：例如，当我向现有类（实际显示在我的客户端中的类）添加新属性时，我可以看到它们。

此外，如果复制其中一个类，完全原样并仅更改名称，它也不会显示。

看起来 WCF 只能“看到”最初添加的类。它忽略最近添加的任何内容。

请帮忙。谢谢你

小伙伴们别说...

我已经添加了所有新类，但没有`OperationContract`使用它们。这就是为什么我无法看到他们。我在我的界面中添加了一个简单`OperationContract`的，实现了它，操作中涉及的所有类型/类都出现了。

不管怎么说，还是要谢谢你。对不起，不必要的问题...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:08:10.780

小伙伴们别说...

我已经添加了所有新类，但没有 OperationContract 正在使用它们。这就是为什么我无法看到他们。我在我的界面中添加了一个简单的 OperationContract，实现了它，操作中涉及的所有类型/类都显示出来了。

不管怎么说，还是要谢谢你。对不起，不必要的问题...

# python - 下一个方法对 python 迭代器是透明的吗？

> ID：10569251
> 
> 赞同：2
> 
> 时间：2012-05-13T04:07:44.733
> 
> 标签：python, functional-programming

对我来说， Iterator 对象，方法似乎很明显`X`：

*   `X.next()`蟒蛇2.x
*   `X.__next__()`蟒蛇3.x

不是引用透明的，因为每次调用都会返回不同的结果。但是，我只需要确认我是正确的。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T04:50:27.500

你是对的，迭代器可以在每次调用时返回不同的结果，所以它不能被称为引用透明的。

但是，使用*可迭代*对象的聚合操作可以是引用透明的，即使各个步骤不是。例如，即使*list*的实现对字符串迭代器进行重复的*next*调用，`list('cat')`它也是确定性和引用透明的。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T04:31:03.733

它在引用上是透明的`X`。该方法本身不会改变透明度，但可迭代对象可以根据需要简单或复杂。**

# php - 用于简单 PHP\DB 接口的 Web 服务器

> ID：10569252
> 
> 赞同：0
> 
> 时间：2012-05-13T04:08:52.687
> 
> 标签：php, python, webserver, embedded-database

我需要设计一个工作订单管理系统，该系统将通过 Web 浏览器使用 PHP 访问，并将与任意嵌入式数据库进行交互。目前，此应用程序将是独立的，并且需要进行非常简单的设置。我想暂时远离完整的 Apache 设置。显然，我需要某种网络服务器来提供 PHP 页面，而任何无法内置到数据库或 PHP 中的东西都可能用 Python 编写。我认为将所有内容都内置到这个单一的 Python 实例中可能是最简单的，但我愿意接受建议。

我真正想要远离的是在任何给定时间运行多个服务，这些服务都需要更新和维护。我将在一台机器上运行它，它需要保持低调。有什么建议么？

# security - SYN Cookie 网络服务器安全

> ID：10569256
> 
> 赞同：6
> 
> 时间：2012-05-13T04:09:53.673
> 
> 标签：security, networking, cookies

如果我的服务器实施 SYN Cookie 以避免 DoS 攻击，但攻击者知道服务器使用 SYN Cookie，他们是否有可能仅通过发送 ACK 来创建半/完全打开的连接？

我知道 SYN Cookie 使用一种算法来创建唯一的初始连接，如果攻击者握手不完整，则 SYN 将被丢弃，并且只能通过接收有效的 SYN-ACK 来重新创建。

但是攻击者还能以某种方式管理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T23:14:44.027

**不**，攻击者*不可能*知道 SYN 初始序列值是什么来完成 TCP 3 路握手。此外，任何 tcp 端口在使用 SYN Cookie 时都不可能处于半开状态。答案植根于密码学。

[SYN Cookie](http://en.wikipedia.org/wiki/SYN_cookies)的实现可以使用[对称密码](http://en.wikipedia.org/wiki/Block_cipher)生成序列ID。例如，当机器启动时，它将生成一个随机密钥，用于所有 TCP 序列 ID。当机器收到并传入 SYN 数据包到一个开放端口时，它将通过加密服务器的 IP 地址、客户端的 IP 地址和正在使用的端口号来生成一个序列 ID。服务器不需要跟踪它发出的 SYN 初始序列 ID，因此它没有每个客户端的状态，并且这种“半开”tcp 套接字的想法并不真正适用（at-至少在 DoS 方面）。现在，当客户端发回它的 SYN-ACK 数据包时，它需要包含 SYN 初始序列 ID。当服务器通过 SYN-ACK 数据包从客户端获取此初始序列 ID 时，它可以通过加密服务器的 IP 地址向后工作，

# ruby-on-rails - 红地毯和中间人：:with_toc_data

> ID：10569259
> 
> 赞同：2
> 
> 时间：2012-05-13T04:10:29.330
> 
> 标签：ruby-on-rails, sinatra, markdown, middleman, redcarpet

我想知道如何将 Redcarpet 的[:with_toc_data](https://github.com/tanoku/redcarpet#darling-i-packed-you-a-couple-renderers-for-lunch-)选项用于 Markdown 与[Middleman](http://www.middlemanapp.com)（基于 Sinatra 的静态站点生成器）一起使用。

我们当前的**config.rb**：

```
set :markdown, :layout_engine => :haml
set :markdown_engine, :redcarpet 
```

这不起作用：

```
set :markdown, :layout_engine => :haml, :with_toc_data => true
set :markdown_engine, :redcarpet 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T02:20:12.697

[Thomas Reynolds](https://stackoverflow.com/users/904346/thomas-reynolds)在 Middleman 3.0 中修复：[https ://github.com/middleman/middleman/issues/442](https://github.com/middleman/middleman/issues/442)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T16:34:35.323

[从 Github 的 Middleman 的Issue #200](https://github.com/middleman/middleman/issues/200)看来，应该这样做：

```
set :markdown, :layout_engine => :haml
set :markdown_engine, :redcarpet
set :redcarpet, :with_toc_data => true 
```

第三行是关键。我也无法完成这项工作，所以中间人的错误可能仍然存在一些问题？

最新[版本](http://rubygems.org/gems/middleman/versions/2.0.15.3-x86-mingw32)是`2.0.15.3`，这是我安装的；但我也无法让它工作。也许[第 200 期](https://github.com/middleman/middleman/issues/200)应该重新打开？

我的代码中有这个确切的代码`config.rb`：

```
###
# GitHib flavoured Markdown, I can't go back!
###
set :markdown_engine, :redcarpet
set :redcarpet, fenced_code_blocks: true, autolink: true 
```

如果我做错了什么，我很想知道。（我特别想在中间人博客中使用它）

**更新我的答案**：发行版中不存在[问题 #200](https://github.com/middleman/middleman/issues/200)中引用的提交`2.0.15.3`，因此我们必须使用更新的东西。

# ios - 从应用程序委托覆盖默认的故事板视图控制器

> ID：10569267
> 
> 赞同：2
> 
> 时间：2012-05-13T04:13:02.073
> 
> 标签：ios, uiviewcontroller, uistoryboard

使用 IB 故事板时，始终会选择一个默认视图控制器，该控制器将在应用程序启动时显示。

有没有办法在代码中覆盖它？例如，我的应用程序委托逻辑可能需要将用户发送到其他地方。这是一种可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:24:02.660

我将以下所有内容放在默认控制器上。

```
- (void)gotoScreen:(NSString *)theScreen
{
    AppDelegate *app = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    UIViewController *screen = [self.storyboard instantiateViewControllerWithIdentifier:theScreen];
    [app.window setRootViewController:screen];
} 
```

然后在逻辑发生的地方，我会根据需要调用以下代码。

```
if(myBool == YES) {
    [self gotoScreen:@"theIdentifier"];
} 
```

# php - Drupal 7 - 检索特定列的所有行的最合适方法是什么？

> ID：10569269
> 
> 赞同：0
> 
> 时间：2012-05-13T04:13:57.220
> 
> 标签：php, database, drupal

我正在使用以下代码来尝试检索 Drupal 7 中特定列的所有行：

```
// Use Database API to retrieve current posts.
    $query = db_select('field_data_field_phone_number', 'n');
    $query->fields('n', array('field_phone_number_value'));

    // Place queried data into an array
    $phone_numbers = $query->execute()->fetchAssoc(); 
```

我认为这足以检索整个列，但是当我使用以下行显示查询时，没有要显示的值：

```
drupal_set_message( '<pre>'.print_r($phone_numbers, true).'</pre>'); 
```

我知道表中有相关​​值，因为我使用 MySQLWorkbench 进行了检查。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T17:59:54.557

解决了！

```
$phone_numbers = $query->execute()->fetchAssoc(); 
```

应该：

```
$phone_numbers = $query->execute()->fetchCol(); 
```

# entity-framework - 在实体框架查询中包含层次结构

> ID：10569271
> 
> 赞同：0
> 
> 时间：2012-05-13T04:14:02.743
> 
> 标签：entity-framework, ef-code-first

我有一个看起来像这样的对象层次结构：

```
public class Book
{
    public virtual List<Page> Pages { get; set; }

    public virtual List<Paragraph> Paragraphs { get; set; }
}

public class Page
{
    public virtual List<Paragraph> Paragraphs { get; set; }
} 
```

我想加载完整的对象层次结构，并这样做：

```
Book book = (from b in context.Books.Include("Pages").Include("Paragraphs")
    .Include("Pages.Paragraphs") where CONDITION).SingleOrDefault(); 
```

我发现`book.Pages`并已`book.Paragraphs`加载，但.`book.Pages[i].Paragraphs``null`

检查数据库，数据看起来正确（关联列都正确填充）。

我也尝试了 lamda 语法，但看不到当参数是集合而不是实体时它是如何工作的，例如可以执行以下操作：

```
.Include(s => s.Paragraphs.Select(p => p.Id == 1) 
```

但我看不出如何使用 lamda 语法来指定应该加载`Paragraphs`每个`Page`in的集合。`book.Pages`

我是否遗漏了什么，或者这是实体框架的限制？如果这是一个限制，我该如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:12:28.710

在实际代码中（不是为了提出有针对性的问题而简化的代码，我错过了一个`virtual`关键字。EF 并没有抱怨无法加载通过 请求的附加数据`.Include("Pages.Paragraphs")`，它只是默默地忽略了该请求。

```
public class Page
{
    public /* was missing: virtual*/ List<Paragraph> Paragraphs { get; set; }
} 
```

# c++-cli - NUnit：对所有测试使用单个 AppDomain - 它真的像宣传的那样工作吗？

> ID：10569274
> 
> 赞同：0
> 
> 时间：2012-05-13T04:15:18.407
> 
> 标签：c++-cli, nunit

在 Visual Studio 中对托管 C++ 代码进行单元测试时存在一个众所周知的问题：调用回托管的非托管代码无法跨应用程序域并导致单元测试崩溃，如此处所述：http: [//social.msdn.microsoft.com/论坛/is/vststest/thread/fc7bc074-ff05-407b-b646-d9e5532c6998](http://social.msdn.microsoft.com/Forums/is/vststest/thread/fc7bc074-ff05-407b-b646-d9e5532c6998) 以及更多详细信息：http: [//lambert.geek.nz/2007/05/29/unmanaged-appdomain-callback](http://lambert.geek.nz/2007/05/29/unmanaged-appdomain-callback)

使用 /noisolation 标志是一种解决方案，但它仅在 Visual Studio 之外运行测试时有效，这意味着您无法在 Visual Studio 中调试测试。

对我来说，这是一件大事。我很难理解微软至少从 2006 年起就不想解决这个问题。发现即使是 Visual Studio 11 beta 也没有提供任何新的东西，这让我非常失望。

所以我转向 NUnit 并开始运行我的测试，并选择了“对所有测试使用单个 AppDomain”。令人失望的是，NUnit 显示消息：“执行此测试时抛出未处理的 System.ArgumentException：无法跨 AppDomain 传递 GCHandle。” 之后它崩溃了。

我希望我能够调试并避免 GCHandle AppDomain 问题。我是否误解了单个 AppDomain 选项的含义？NUnit 2.6 是否在单独的 AppDomain 中执行测试并且仍然没有选项可以更改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T23:57:27.977

根据 NUnit 组的 Charlie Poole 的回答：

[https://groups.google.com/forum/?fromgroups&hl=en#!topic/nunit-discuss/elG7oyCOyBw](https://groups.google.com/forum/?fromgroups&hl=en#!topic/nunit-discuss/elG7oyCOyBw)

NUnit 主（驱动程序）程序在与被测试代码不同的 AppDomain 中执行。单个 AppDomain 意味着单个仅用于所有要测试的代码。

Charlie 建议使用 NUnitLite，它对“一切”使用单个 AppDomain，并且在测试 0.7 版本之后，我很高兴我可以调试使用 gcroot 的 C++/CLI 代码测试。

在 Visual Studio 中集成 NUnitLite 的 UI 将是一个额外的好处，但现在我可以没有它。

# xcode - 我可以在 Xcode 的 Storyboard 模式中添加声音吗？

> ID：10569275
> 
> 赞同：0
> 
> 时间：2012-05-13T04:15:19.840
> 
> 标签：xcode, audio, storyboard

我是为 iOS 创建应用程序的新手，我正在使用情节提要模式。我想知道如何添加声音。另外，它需要编码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T04:25:51.497

您可以使用它来播放简单的声音。它使用`AVFoundation`框架，这将要求您将 AVFoundation 添加到您的项目中，并使用`#import <AVFoundation/AVFoundation.h>`

```
- (IBAction) myPlayAction {
    AVAudioPlayer *data;
    NSString *name = [[NSString alloc] initWithFormat:@"SoundName"];
    NSString *source = [[NSBundle mainBundle] pathForResource:name ofType:@"mp3"];
    if (data) {
        [data stop];
        data = nil;
    }
    data=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath: source] error:NULL];
    data.delegate = self;
    [data prepareToPlay];
    [data play];
} 
```

# qt - 如何使用 Qt 获取安装在设备中的应用程序图标列表

> ID：10569278
> 
> 赞同：1
> 
> 时间：2012-05-13T04:17:56.953
> 
> 标签：qt, symbian, qicon

我正在使用 Qt 应用程序，我想在其中创建一个 QListWidget，其中包含安装在设备上的所有应用程序的名称及其图标。因此，我无法从此[LINK](http://asmncl.blogspot.in/2012/05/symbianqt-get-list-of-installed.html)中的代码获取每个应用程序的所有应用程序名称和 UID 。但我也无法获取应用程序图标。我尝试了这个[LINK1](http://www.developer.nokia.com/Community/Wiki/Get_application_icon)和[LINK2](http://www.developer.nokia.com/Community/Wiki/How_to_get_Application_Icon_using_RApaLsSession)但在这里我遇到了更多问题，比如如何将 CGulIcon 转换为 QIcon 和 CApaMaskedBitmap 转换为 QIcon。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:57:57.853

如果您无法获得解决方案或有任何疑问，[请单击此处](https://chat.stackoverflow.com/rooms/10629/agarwal)进行讨论。

**主文件**

```
#include "GetInstalledApps.h"

#include <QtGui>
#include <QApplication>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    GetInstalledApps w;
    w.showMaximized();
    return a.exec();
} 
```

**.pro**

```
TEMPLATE = app
TARGET = GetInstalledApps 

QT        += core \
    gui 

HEADERS   += GetInstalledApps.h
SOURCES   += main.cpp \
    GetInstalledApps.cpp
FORMS     += GetInstalledApps.ui
RESOURCES +=

HEADERS += xqinstaller_p.h \
   xqinstaller.h \

SOURCES += xqinstaller_p.cpp \
   xqinstaller.cpp

symbian:LIBS += -lswinstcli \
   -lcommdb \
   -lapparc \
   -lefsrv \
   -lapgrfx \

symbian:TARGET.CAPABILITY += TrustedUI
symbian:TARGET.UID3 = 0xEF3055F4 
```

**GetInstalledApps.h**

```
#ifndef GETINSTALLEDAPPS_H
#define GETINSTALLEDAPPS_H

#include <QtGui/QMainWindow>
#include "ui_GetInstalledApps.h"
#include "xqinstaller.h"

class GetInstalledApps : public QMainWindow
{
    Q_OBJECT

public:
    GetInstalledApps(QWidget *parent = 0);
    ~GetInstalledApps();

private:
    void GetApps();

private:
    Ui::GetInstalledAppsClass ui;
    XQInstaller* m_installer;
    QMap<QString, uint> m_applications;
    QList<QString> m_appNames;
    QList<uint> m_appUID;
};

#endif // GETINSTALLEDAPPS_H 
```

**GetInstalledApps.cpp**

```
#include "GetInstalledApps.h"
#include <QScrollArea>

GetInstalledApps::GetInstalledApps(QWidget *parent)
    : QMainWindow(parent)
{
    ui.setupUi(this);
    setWindowTitle("GetAllInstalledApps");
    m_installer = new XQInstaller(this);
    GetApps();

}

void GetInstalledApps::GetApps()
{
    /* Get List of applications. 
     * type of m_applications is QMap<QString, uint>.
     * type of  m_installer is XQInstaller
     */
    m_applications = m_installer->applications();

    /* Get List of application names
     type of m_appNames is QList<QString> */
    m_appNames = m_applications.keys(); 

    /* Get List of application UID in decimal. 
    type of m_appUID is QList<uint> */
    m_appUID = m_applications.values(); 

    ui.listWidget->clear();
    for (int i = 0; i < m_appNames.count(); i++) 
    {
        QString str;
        /* convert UID from decimal to hex and then string. */
        str.setNum(m_appUID.at(i),16);
        /* append name and UID to string */     
        QString string(m_appNames.at(i)+"  UID:"+ str);
        /* append string to list widget to display on screen */
        ui.listWidget->addItem(string);
    }

    /* Let's make the UI scale so that we can scroll it. */
    QScrollArea* scrollArea = new QScrollArea;
    scrollArea->setWidget(ui.listWidget);
    scrollArea->setWidgetResizable(true);

    setCentralWidget(scrollArea);
}

GetInstalledApps::~GetInstalledApps()
{

} 
```

**xqinstaller.h**

```
#ifndef XQINSTALLER_H
#define XQINSTALLER_H

// INCLUDES
#include <QObject>
#include <QMap>

class XQInstallerPrivate;

// CLASS DECLARATION
class XQInstaller : public QObject
{
    Q_OBJECT

public:
    enum Error {
        NoError = 0,
        OutOfMemoryError,
        AlreadyInUseError,
        UserCancelError, 
        PackageNotSupportedError,
        SecurityFailureError,
        MissingDependencyError,
        NoRightsError,
        BusyError,
        AccessDeniedError,
        UpgradeError,
        UnknownError = -1
    };

    enum Drive {
        DriveA,   DriveB,   DriveC,   DriveD,   DriveE,
        DriveF,   DriveG,   DriveH,   DriveI,   DriveJ,
        DriveK,   DriveL,   DriveM,   DriveN,   DriveO, 
        DriveP,   DriveQ,   DriveR,   DriveS,   DriveT,
        DriveU,   DriveV,   DriveW,   DriveX,   DriveY,
        DriveZ
    };

    XQInstaller(QObject *parent = 0);
    ~XQInstaller();

    bool install(const QString& file, XQInstaller::Drive drive = XQInstaller::DriveC);
    QMap<QString, uint> applications() const;
    bool remove(uint uid);

    XQInstaller::Error error() const;

Q_SIGNALS:
    void applicationInstalled();
    void applicationRemoved();
    void error(XQInstaller::Error);

private:
    friend class XQInstallerPrivate;
    XQInstallerPrivate *d;
};

#endif // XQINSTALLER_H 
```

**xqinstaller.cpp**

```
#include "xqinstaller.h"
#include "xqinstaller_p.h"

/*!
    \class XQInstaller
    \brief The XQInstaller class is used to install sis-packages silently. 
    This extension can be used for example to install back-end applications.

    Example:
    \code
    XQInstaller *installer = new XQInstaller(this);
    QMap<QString, uint> applications = installer->applications();
    QListWidget *applicationList = new QListWidget(this);
    QList<QString> appNames = applications.keys();
    for (int i = 0; i < appNames.count(); i++) {
        applicationList->addItem(appNames.at(i));
    }   
    \endcode
*/

/*!
    Constructs a XQInstaller object with the given parent.
    \sa install(), remove()
*/
XQInstaller::XQInstaller(QObject *parent)
    : QObject(parent), d(new XQInstallerPrivate(this))
{
}

/*!
    Destroys the XQInstaller object.
*/
XQInstaller::~XQInstaller()
{
    delete d;
}

/*!
    Installs a sis package silently given as parameter.

    \param file Sis package
    \param drive Drive letter where the sis is installed to. Default value is 'C'.
    \return If false is returned, an error has occurred. Call error() to get a value of 
    XQInstaller::Error that indicates which error occurred
    \sa error()
*/  
bool XQInstaller::install(const QString& file, XQInstaller::Drive drive)
{
    return d->install(file, drive);
}

/*!
    Get list of installed applications
    If an empty QMap is returned, an error has possibly occurred. Call error() to get a value of 
    XQInstaller::Error that indicates which error occurred if any

    \return List of installed applications
    \sa error()
*/
QMap<QString, uint> XQInstaller::applications() const
{
    return d->applications();
}

/*!
    Removes application specified by the uid

    \param uid of the application
    \return True if removing was successfully started, otherwise false
    \sa error()
*/
bool XQInstaller::remove(uint uid)
{
    return d->remove(uid);
}

/*!
    \enum XQInstaller::Error

    This enum defines the possible errors for a XQInstaller object.
*/
/*! \var XQInstaller::Error XQInstaller::NoError
    No error occured.
*/
/*! \var XQInstaller::Error XQInstaller::OutOfMemoryError
    Not enough memory.
*/
/*! \var XQInstaller::Error XQInstaller::AlreadyInUseError
    Installer is already in used.
*/
/*! \var XQInstaller::Error XQInstaller::UserCancelError
    Installer cancelled by the user.
*/
/*! \var XQInstaller::Error XQInstaller::PackageNotSupportedError
    Package not supported
*/
/*! \var XQInstaller::Error XQInstaller::SecurityFailureError
    Security failure
*/
/*! \var XQInstaller::Error XQInstaller::MissingDependencyError
    Missing dependency
*/
/*! \var XQInstaller::Error XQInstaller::NoRightsError
    No rights
*/
/*! \var XQInstaller::Error XQInstaller::BusyError
    Installer is busy
*/
/*! \var XQInstaller::Error XQInstaller::AccessDeniedError
    Access denied
*/
/*! \var XQInstaller::Error XQInstaller::UpgradeError
    Error while upgrading
*/
/*! \var XQInstaller::Error XQInstaller::UnknownError
    Unknown error.
*/

/*!
    Returns the type of error that occurred if the latest function call failed; otherwise returns NoError
    \return Error code
*/
XQInstaller::Error XQInstaller::error() const
{
    return d->error();
}

/*!
    \fn void XQInstaller::applicationInstalled()

    This signal is emitted when the application has been installed.

    \sa install()
*/

/*!
    \fn void XQInstaller::error(XQInstaller::Error)

    This signal is emitted if error occured during the asynchronous operation

    \sa install()
*/

/*!
    \fn void XQInstaller::applicationRemoved()

    This signal is emitted when the application has been removed.

    \sa remove()
*/

// End of file 
```

**xqinstaller_h.h**

```
#ifndef XQINSTALLER_P_H
#define XQINSTALLER_P_H

// INCLUDES
#include "xqinstaller.h"
#include <SWInstApi.h>
#include <SWInstDefs.h>

// FORWARD DECLARATIONS
class QString;
class QFile;

// CLASS DECLARATION
class XQInstallerPrivate: public CActive
{

public:
    enum State {
        ERemove,
        EInstall
    };

    XQInstallerPrivate(XQInstaller *installer);
    ~XQInstallerPrivate();

    bool install(const QString& file, XQInstaller::Drive drive);
    bool remove(uint uid);
    QMap<QString, uint> applications() const;

public:
    XQInstaller::Error error();

protected:  
    void DoCancel();
    void RunL();

private:
    XQInstaller *q;
    mutable int iError;

    SwiUI::RSWInstSilentLauncher iLauncher;
    SwiUI::TInstallOptions iOptions;
    SwiUI::TInstallOptionsPckg iOptionsPckg;  

    SwiUI::TUninstallOptions iUninstallOptions;
    SwiUI::TUninstallOptionsPckg iUninstallOptionsPckg;
    XQInstallerPrivate::State iState;
    TFileName iFileName;
    bool iLauncherConnected;
};

#endif /*XQINSTALLER_P_H*/

// End of file 
```

**xqinstaller_h.cpp**

```
#include "xqinstaller.h"
#include "xqinstaller_p.h"
#include <f32file.h>
#include <apgcli.h>

XQInstallerPrivate::XQInstallerPrivate(XQInstaller *installer) 
    : CActive(EPriorityNormal), q(installer), iOptionsPckg(iOptions), 
      iUninstallOptionsPckg(iUninstallOptions), iLauncherConnected(false)
{
    CActiveScheduler::Add(this);  
}

XQInstallerPrivate::~XQInstallerPrivate()
{
    Cancel();
    if (iLauncherConnected) {
        iLauncher.Close();
    }
}

bool XQInstallerPrivate::install(const QString& file, XQInstaller::Drive drive)
{
    int asciiValue = 10;  // = 'A'
    TRAP(iError,
        if (!iLauncherConnected) {
            User::LeaveIfError(iLauncher.Connect());
            iLauncherConnected = true;
        }
        if (IsActive()) {
            User::Leave(KErrInUse);
        }

        iState = XQInstallerPrivate::EInstall;
        iOptions.iUpgrade = SwiUI::EPolicyAllowed;
        iOptions.iOCSP = SwiUI::EPolicyNotAllowed;
        iOptions.iDrive = TChar(asciiValue+drive);
        iOptions.iUntrusted = SwiUI::EPolicyAllowed; 
        iOptions.iCapabilities = SwiUI::EPolicyAllowed;  
        iOptions.iOptionalItems = SwiUI::EPolicyAllowed;  
        iOptions.iOverwrite = SwiUI::EPolicyAllowed; 
        TPtrC16 fileName(reinterpret_cast<const TUint16*>(file.utf16()));
        iFileName = fileName;
        iLauncher.SilentInstall(iStatus, iFileName, iOptionsPckg);
        SetActive();
    )
    return (iError == KErrNone);
}

bool XQInstallerPrivate::remove(uint uid)
{
    TRAP(iError,
        if (!iLauncherConnected) {
            User::LeaveIfError(iLauncher.Connect());
            iLauncherConnected = true;
        }
        if (IsActive()) {
            User::Leave(KErrInUse);
        }

        iState = XQInstallerPrivate::ERemove;

        iLauncher.SilentUninstall(iStatus,TUid::Uid(uid),
            iUninstallOptionsPckg, SwiUI::KSisxMimeType);
        SetActive();
    )
    return (iError == KErrNone);
}

QMap<QString, uint> XQInstallerPrivate::applications() const
{
    RApaLsSession lsSession;
    QMap<QString, uint> applications; 

    // Connect to application architecture server
    TRAP(iError,
        User::LeaveIfError(lsSession.Connect());
        CleanupClosePushL(lsSession);

        TApaAppInfo appInfo;
        lsSession.GetAllApps();  

        while (lsSession.GetNextApp(appInfo) == KErrNone) {
            TApaAppCapabilityBuf capability;
            User::LeaveIfError(lsSession.GetAppCapability(capability,
                appInfo.iUid));
            if (appInfo.iCaption.Length() > 0 && !capability().iAppIsHidden) {
                QString fullName = QString::fromUtf16(
                    appInfo.iCaption.Ptr(), appInfo.iCaption.Length());
                applications.insert(fullName, (TUint)appInfo.iUid.iUid);
            }
        }
        CleanupStack::PopAndDestroy(&lsSession);
    )

    return applications; 
}

void XQInstallerPrivate::DoCancel()
{
    if (iState == XQInstallerPrivate::EInstall) {
        iLauncher.CancelAsyncRequest(SwiUI::ERequestSilentInstall);
    } else if (iState == XQInstallerPrivate::ERemove) {
        iLauncher.CancelAsyncRequest(SwiUI::ERequestSilentUninstall);
    }
}

void XQInstallerPrivate::RunL()
{
    if (iStatus.Int() == KErrNone) {
        if (iState == XQInstallerPrivate::EInstall) {
            emit q->applicationInstalled();
        } else if (iState == XQInstallerPrivate::ERemove) {
            emit q->applicationRemoved();
        }
    } else {
        iError = iStatus.Int();
        emit q->error(error());
    }
}

XQInstaller::Error XQInstallerPrivate::error()
{
    switch (iError) {
    case KErrNone:
        return XQInstaller::NoError;
    case SwiUI::KSWInstErrInsufficientMemory:
    case KErrNoMemory:
        return XQInstaller::OutOfMemoryError;
    case SwiUI::KSWInstErrFileInUse:
    case KErrInUse:
        return XQInstaller::AlreadyInUseError;
    case SwiUI::KSWInstErrUserCancel:
        return XQInstaller::UserCancelError;  
    case SwiUI::KSWInstErrPackageNotSupported:
        return XQInstaller::PackageNotSupportedError; 
    case SwiUI::KSWInstErrSecurityFailure:
        return XQInstaller::SecurityFailureError; 
    case SwiUI::KSWInstErrMissingDependency:
        return XQInstaller::MissingDependencyError; 
    case SwiUI::KSWInstErrNoRights:
        return XQInstaller::NoRightsError;
    case SwiUI::KSWInstErrBusy:
        return XQInstaller::BusyError;
    case SwiUI::KSWInstErrAccessDenied:
        return XQInstaller::AccessDeniedError;
    case SwiUI::KSWInstUpgradeError:
        return XQInstaller::UpgradeError;
    case SwiUI::KSWInstErrGeneralError:
    default:
        return XQInstaller::UnknownError;
    }    
}

// End of file 
```

****并[获得 QIcon](http://qt-project.org/doc/qt-4.8/qpixmap.html#fromSymbianCFbsBitmap) ::****

**听众要求：**

```
#include <fbs.h> //CFbsBitmap
#include <aknsskininstance.h> //MAknsSkinInstance 
#include <aknsutils.h> //AknsUtils 
```

**所需图书馆：**

```
LIBRARY   fbscli.lib ///CFbsBitmap
LIBRARY   aknskins.lib aknskinsrv.lib aknswallpaperutils.lib  //MAknsSkinInstance ,AknsUtils 
```

源代码：

```
CGulIcon* CMyClass::GetApplicationIconL(const TUid& aAppUID)
{
    CFbsBitmap* AppIcon(NULL);
    CFbsBitmap* AppIconMsk(NULL);

    MAknsSkinInstance* skin = AknsUtils::SkinInstance();

    AknsUtils::CreateAppIconLC(skin,aAppUID,  EAknsAppIconTypeContext,AppIcon,AppIconMsk);
    CleanupStack::Pop(2);

    return CGulIcon::NewL(AppIcon,AppIconMsk);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-27T16:24:37.307

好吧，对于图标的事情，看看这个： CGullIcon 有一个返回位图的函数，一个 CFbsBitmap。一旦你完成了，看看这个： http: [//qt-project.org/doc/qt-4.8/qpixmap.html#fromSymbianCFbsBitmap](http://qt-project.org/doc/qt-4.8/qpixmap.html#fromSymbianCFbsBitmap)然后你创建一个新的 QIcon(QPixmap) （QPixmap = 你已经转换的图标） . 因此，您很可能首先将其传递给 CFbsBitmap，然后使用 QPixmap 使用 fromSymibnaCFbsBitmap()。

如果我没记错的话，CApaMaskedBitmap 是 CFbsBitmap 的一个子类，所以它应该是一样的。

为了获取应用程序及其 UID，请尝试查看： http: [//www.developer.nokia.com/Community/Wiki/Get_list_of_installed_applications_and_its_UID_in_Qt](http://www.developer.nokia.com/Community/Wiki/Get_list_of_installed_applications_and_its_UID_in_Qt)

# ruby-on-rails - ActiveRecord::StatementInvalid：找不到表“用户”

> ID：10569280
> 
> 赞同：7
> 
> 时间：2012-05-13T04:18:24.887
> 
> 标签：ruby-on-rails

我正在学习 Ruby on Rails 教程，我已经完成了第 7 章并且效果很好，但是遇到了 25 个失败/错误，如下所示：

用户失败/错误：@user = User.new（名称：“示例用户”，电子邮件：“user@example.com”，ActiveRecord::StatementInvalid：找不到表“用户”# ./spec/models/user_spec。 rb:18:in`new' # ./spec/models/user_spec.rb:18:in`块 (2 级) in '

这是 users_controller.rb

```
class UsersController < ApplicationController
  def new
    @user = User.new
  end

  def show
    @user = User.find(params[:id])
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end
end 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-01T09:01:58.433

您可以检查是否`db/test.sqlite3`为空。在这种情况下，运行`rake db:test:prepare`

# image-processing - 使用 Imagemagick Chebyshev 找到最大的矩形

> ID：10569285
> 
> 赞同：1
> 
> 时间：2012-05-13T04:20:29.130
> 
> 标签：image-processing, imagemagick

我有以下 Chebyshev(ed) 图像：

![在此处输入图像描述](../Images/095254afb2049f528894ae2b53e5b899.png)

![在此处输入图像描述](../Images/fc04afea9d24df7a5732430a9673e374.png)

我使用以下 imagemagick 命令生成了这些：

```
convert imagein.jpeg -virtual-pixel black  -morphology Distance Chebyshev -auto-level imageout.jpeg 
```

现在，我需要获取最大矩形的 x、y 位置和高度/宽度。我在这里遵循了说明：[http](http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=20269#p81610) ://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=20269#p81610和这里[http://www.imagemagick.org/Usage/morphology/#chebyshev](http://www.imagemagick.org/Usage/morphology/#chebyshev)。我尝试了以下命令（我不完全理解）：

```
convert imagein.jpeg -virtual-pixel black  -morphology Distance Chebyshev \
     \( +clone -auto-level -fill black +opaque white \) \
     -compose multiply -composite -depth 16 txt: |\
  grep -v black 
```

这会产生以下输出（我也不完全理解）：

```
# ImageMagick pixel enumeration: 2272,1704,65535,srgb
1154,437: (43700,43700,43700)  #AAB4AAB4AAB4  srgb(66.6819%,66.6819%,66.6819%)
... 
```

我所理解的：2272,1704 = 图像的宽度/高度。1154,437 = 最亮像素的 x,y 像素位置（最大内核的中心）。43700/100 = 内核的像素半径（我不明白为什么会重复三次）。

# javascript - Jquery $("document").ready 函数的不同行为

> ID：10569289
> 
> 赞同：2
> 
> 时间：2012-05-13T04:21:25.907
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [jquery .bind() 和/或 .ready() 不起作用](https://stackoverflow.com/questions/6195169/jquery-bind-and-or-ready-not-working)

为什么以下类似程序之间的o / p存在差异？

```
<html>
 <head>
 <script src="scripts/jquery-1.6.2.js"></script>
 <script>
   function main()
   {
    $("#inside").text("1234");
   }
   $(document).ready( function(){
       main();   // 1
    });
 </script>
 </head>
 <body>
  <div id="inside">abcd</div>
 </body>
</html> 
```

> **输出：1234**

```
<html>
 <head>
 <script src="scripts/jquery-1.6.2.js"></script>
 <script>
   function main()
   {
    $("#inside").text("1234");
   }
   $(document).ready( main());//2
 </script>
 </head>
 <body>
   <div id="inside">
    abcd
   </div>
 </body>
</html> 
```

> **输出：abcd**

为什么 innerHTML 在这里没有改变？请解释这种行为.. :)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T04:23:44.203

在第二个变体中，您正在调用函数`document.ready`的*结果*。要为函数本身调用它，只需省略括号：

```
$(document).ready(main); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T04:25:21.593

在第二个版本中，您将`main()`立即调用该函数，而不是将其作为回调传递 - 您传递给`$(document).ready()`的是函数的实际结果`main`，而不是函数本身。

# apache-flex - 使用 Flex 移动开发的 Iphone App 推送通知

> ID：10569291
> 
> 赞同：0
> 
> 时间：2012-05-13T04:21:57.683
> 
> 标签：apache-flex, actionscript, flex4.5, flex-mobile, flex4.6

我正在处理一个需要为 android 和 ios 推送通知的 flex 移动项目。已经使用 flex 原生扩展添加了一个文件来完成 android 部分。有兴趣了解IOS程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:37:11.983

看看这里 - [http://flashsimulations.com/2011/12/16/apple-push-notification-service-native-extension-for-adobe-air/](http://flashsimulations.com/2011/12/16/apple-push-notification-service-native-extension-for-adobe-air/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T05:59:03.357

终于让它在我的项目中工作了

按照 adobe devnet 站点 [http://www.adobe.com/devnet/air/articles/ios-push-notifications.html中提供的步骤操作](http://www.adobe.com/devnet/air/articles/ios-push-notifications.html)

您必须在城市飞艇中创建一个帐户才能实现此功能

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T01:25:50.880

您需要使用 AIR 3.4，因为推送通知是 iOS 和 Android 版本的一部分。

# facebook - FB.ui 对话框出现在页面顶部，而不是在当前滚动位置居中

> ID：10569298
> 
> 赞同：4
> 
> 时间：2012-05-13T04:24:17.117
> 
> 标签：facebook, facebook-javascript-sdk, fb.ui

FB.ui 对话框出现在页面顶部，而不是在当前滚动位置居中。

1.  人员向下滚动到页面
2.  点击次数`share`
3.  `FB.ui`对话框出现在页面顶部（人看不到它）

代码很简单：

```
FB.ui({
    method: 'feed',
    link: 'http://[..].com/app/' + app_id,
}); 
```

我需要/可以调用任何方法来调整对话框元素的位置吗？

请注意，内容是动态添加到页面中的，因此 FB 脚本可能不知道当前窗口大小。

# jquery - Mouseonclick 显示/隐藏 div 图像映射？[jQuery/css]

> ID：10569299
> 
> 赞同：1
> 
> 时间：2012-05-13T04:24:26.057
> 
> 标签：jquery, show-hide, imagemap, onmouseover

关于我必须做的项目，我一直在这里查看一堆不同的问题和答案。我仍然不确定最好的方法。

此时我有一个大图像，其中一部分图像被切割成 5 个不均匀的部分。每个部分/部分都是一个类别。单击它时，部分的颜色会发生变化，并且一些图像和文本应显示在图像右侧的单独 div 中。我几乎是 jquery 的新手，但我有 js 和 css 的背景。

我不确定是否需要突出显示图像的部分（鼠标悬停）。但也会喜欢这种可能性。

我想知道是否应该使用 onclick 事件的图像映射或 pagx,pagey 坐标？另外，如何用突出显示的版本替换该部分？

我想我想用另一个图像替换该部分，该图像向用户显示他单击了该部分。

我宁愿不使用直接编码的插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T18:32:50.283

如果您真的被困在如何开始编写问题中描述的代码，我相信没有任何答案会足够好，但可以为您指明一些路径（正确与否）：

[这是一个使用 jQuery 的 Imagemap 翻转](http://www.svennerberg.com/2008/09/imagemap-rollover/)的工作示例。

**还：**

另一个关于如何[使用 Jquery 构建交互式图像地图的教程！](http://www.gethifi.com/blog/jquery-vs-flash-for-interactive-map)

这两个为您提供了您所描述内容的起点！

祝你工作顺利！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:44:40.747

你真的应该提供一些代码，但我认为图像映射是更好的解决方案。[这](http://abhinavsingh.com/blog/wp-content/plugins/wordpress-toolbar/toolbar.php?wptbto=http://abhinavsingh.com/webdemos/indiaimagemap/&wptbhash=aHR0cDovL2FiaGluYXZzaW5naC5jb20vYmxvZy8yMDA5LzAzL3VzaW5nLWltYWdlLW1hcHMtaW4tamF2YXNjcmlwdC1hLWRlbW8tYXBwbGljYXRpb24vPHdwdGI%2bVXNpbmcgSW1hZ2UgTWFwcyBpbiBKYXZhc2NyaXB0ICYjODIxMTsgQSBEZW1vIEFwcGxpY2F0aW9uPHdwdGI%2baHR0cDovL2FiaGluYXZzaW5naC5jb20vYmxvZzx3cHRiPkFiaGkmIzAzOTtzIFdlYmxvZw==)是图像映射的演示。看看它，你会看到这个解决方案是否适合你。

# jquery - 为什么 $(window).height() 这么错误？

> ID：10569301
> 
> 赞同：25
> 
> 时间：2012-05-13T04:25:10.380
> 
> 标签：jquery

我正在尝试获取当前浏览器视口高度，使用

```
$(window).on('resize',function() { 
  console.log("new height is: "+$(window).height()); 
}); 
```

但我得到的价值太低了。当视口大约 850 像素高时，我从 height() 中得到大约 350 或 400 像素的值。这是怎么回事？

示例：http: [//jsfiddle.net/forgetcolor/SVqx9/](http://jsfiddle.net/forgetcolor/SVqx9/)

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-09-22T17:14:33.537

我在 Firefox 中遇到了同样的问题，然后我`<!DOCTYPE HTML>`在我的索引中添加了它并且它有效。

来源：http: [//viralpatel.net/blogs/jquery-window-height-incorrect/](http://viralpatel.net/blogs/jquery-window-height-incorrect/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-13T04:32:17.017

一个可能的原因可能是您正在使用 firebug/ 其他东西检查控制台。这样你就不会因为萤火虫的高度而得到正确的窗口高度。

你可以尝试这样的事情：

在你的文档中取一个 span/div：

```
<span id="res"></span> 
```

进而

```
$(window).on('resize',function() { 
  $('#res').html("new height is: "+$(window).height()); 
}); 
```

或者，如果您想检查 put on firebug 控制台，然后将其与浏览器分离，然后检查结果。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-12-24T07:19:40.287

对于那些在上述解决方案后仍有问题的人......

请检查浏览器对您的 project.html 的查看比例。

$(window).height() 的值与调整视图比例时客户区的“真实”像素不同！（以及其他 $(xx).width()...在这种情况下）

（浏览器记得我前几天粗心调整的110%比例……）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-13T04:38:31.367

没有复制。请记住，浏览器 chrome 中的项目会降低窗口高度，例如地址栏、开发人员工具、书签工具栏等。以下似乎显示了视口高度的准确表示：

jsbin 会给你一个很好的窗口高度估计，因为它不会像其他 js 测试站点（如 jsfiddle）那样将你的代码输出限制到一个小的 iframe。

[http://jsbin.com/otaqej/edit#javascript,html](http://jsbin.com/otaqej/edit#javascript,html)

```
<!DOCTYPE html>
<html>
  <head>
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.js"></script>
  </head>
  <body>
    <div id="message">Height: 0</div>
    <script>
      $(window).on("resize", function(){
        $("#message").html( "Height: " + $(window).height() );
      });
    </script>
  </body>
</html> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-06-12T12:07:49.870

我已经看到 jQuery`$(window).height()`在 Chrome 移动设备上返回了错误的值，即使我的`viewport`和`DOCTYPE`声明已经到位。最终我使用了`window.innerHeight`.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-13T04:38:47.950

JSFiddle 通过创建一个`<iframe>`在渲染代码后动态加载的工作。

您的 JavaScript 正在计算窗口的高度，恰好是`<iframe>`'s 的高度，对我来说大约是 400px 高。

你的代码正在做它应该做的事情。

# java - 将显示名称字符串从“First M. Last”更改为“Last, First M.”？

> ID：10569303
> 
> 赞同：0
> 
> 时间：2012-05-13T04:25:19.517
> 
> 标签：java, regex, string

我有一个名字“John B. Smith”，我需要将名字的格式更改为“Smith, John B.” 我正在考虑使用正则表达式，但即使在阅读后我也不完全理解它。有人可以帮忙吗？

你能花点时间解释一下表达式中发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T04:32:51.573

与解析电子邮件地址或正则表达式常用的 HTTP 地址相比，正则表达式在解析简单的名称（如名称）时可能会过度使用。

为什么不直接用空格字符拆分名称，然后在第一个数组元素（John）之前使用第三个数组元素（Smith）创建一个新字符串 - 插入逗号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T04:34:47.263

这是我在[Rubular](http://rubular.com/r/74woHSK2Dt)提出的一个例子。

我使用的正则表达式是`(\w+)\s+(\w+)\s+(\w+)`. 这是它的分解：

1.  当我使用`\w+`时，我是说我正在寻找一个带有一个或多个字母、数字或下划线的正则表达式。这通常用于查找单词。
2.  当我使用 时`\s+`，我正在寻找一个或多个空格字符。
3.  `()`我想要捕获（又名记住）该正则表达式匹配的输入部分的意思。

# python - Django-Pinax：除了使用 pinax 基础项目获得的功能之外，您如何使用 pinax 应用程序？

> ID：10569310
> 
> 赞同：15
> 
> 时间：2012-05-13T04:26:34.873
> 
> 标签：python, django, pinax, django-1.3

我正在尝试了解**Pinax**并计划在我的下一个项目中使用它。

我从**pinax 基本项目**开始，现在我有一些东西可以与**runserver**一起使用。

现在，我知道我可以自定义从 pinax 获得的初始设置，并根据我的要求自定义配置文件、主题等。

**但这就是 pinax 提供的全部内容吗？**

我在这里很困惑，就像我想在我的项目中使用**pinax phileo**应用程序，那么 pinax 如何帮助我做到这一点？

**我的努力 ：**

*   我搜索并发现我必须安装它`pip install phileo`
*   然后，`INSTALLED_APPS`根据需要添加并使用它。

但是 pinax 在这件事上做了什么？

Pinax`phileo`在其网站上有特色，但为什么呢？因为我可以像我的非 pinax django 项目中的任何其他应用程序一样使用它。

所以，简而言之，我的问题是：

**pinax 在基础项目和 pinax 附带的默认模板之后提供了什么？**

对，现在感觉 pinax 只是提供了一个基础项目，其中一些应用程序已经在使用一些默认模板。[ 而已 ？]

**那么，pinax 网站上没有包含基础项目的其他应用程序呢？**

请帮助消除混乱！

**更新** 我的问题有点——当我们已经将 pinax-ecosystem 列在 djangopackages.com 之类的地方时，它们的意义是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T05:54:05.927

您似乎假设除非*所有*Pinax 都有用，否则 Pinax 作为一个项目是没有用的。Pinax 从来都不是一个单一的东西，你在给定的项目中使用所有这些东西。

如果您觉得对您有帮助的只是项目布局，那很好。Pinax 建议使用标准项目布局（您可以单独使用 pinax-project-zero）。

如果您发现所有有用的是 pinax-project-account（django-user-accounts 和其他一些东西，已经与引导类命名后的模板集成）作为您网站的起点，那就太好了。Pinax 从根本上说是为了让您更快开始，而 pinax-project-account 是大多数拥有用户帐户的网站的合适起点。

一旦你有了一个项目，你就可以自由地添加任何你想要的 Django 应用程序。没有什么需要您使用 Pinax 应用程序。“所以”，你问，“为什么 Pinax 还要费心开发应用程序？”。

好吧，因为应用程序不是孤立的。可重用性不仅在应用程序级别，还包括应用程序组。举个例子，一个等候名单应用程序、一个邀请应用程序、一个推荐代码应用程序、一个积分应用程序、一个徽章应用程序。当然这些可以独立开发和使用。

但是，如果它们以相同的思维方式开发，您可以确保等待列表应用程序和邀请应用程序以及推荐代码应用程序与用户帐户应用程序一起工作（并且不要重复任何内容）。您可以确保推荐代码应用程序与积分应用程序很好地配合，而积分应用程序与徽章应用程序配合得很好。您可以确保您的论坛应用程序不会尝试执行您的审核应用程序已经提供的操作。或者每个应用程序都没有尝试以自己的方式解决头像。

所以 Pinax 并没有试图成为应用程序的“目录”。这是一系列应用程序、主题和入门项目，它们相互考虑。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-13T04:34:05.337

Pinax 只是 django 与其他 django 插件的混合。您必须启用它们并单独设置它们。要在 pinax 中使用每个单独的应用程序，您必须阅读该特定应用程序的文档并进行适当的设置（可能包含此处文档的应用程序和存储库列表：http: [//pinaxproject.com/ecosystem/](http://pinaxproject.com/ecosystem/)）

有些人喜欢 pinax，但我发现它比解决方案更麻烦。最后 pinax 不能开箱即用。您必须自定义所有内容，但同时您将自己定位为使用不需要的捆绑包。我建议改为启动一个项目并单独安装您需要的包，甚至可以在这里找到更多：http: [//djangopackages.com/](http://djangopackages.com/)。特别是，如果它是一个大项目，因为如果你自己捆绑/设置所有东西，你就会知道这一切的来龙去脉。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T13:50:39.060

好处很简单——当启动一个新站点时，与空的 Django 项目相比，Pinax 为您提供了一些领先优势。

考虑一下：您正在启动一个需要用户帐户管理（包括电子邮件确认、用户配置文件、密码重置等）和通知的新站点。

使用 Pinax，您可以通过几个命令获得此功能：

```
$ mkvirtualenv mysite
$ pip install pinax
$ pinax-admin setup_project -b basic mysite
$ python manage.py syncdb
$ python manage.py runserver 
```

你现在有：

1.  用户管理所需的几乎所有内容
2.  您总是添加的所有内容，`settings.py`例如 PROJECT_ROOT
3.  “关于”网址 -（关于 / 条款 / 隐私 / DMCA / 接下来是什么）
4.  Django 调试工具栏
5.  i18n 已经设置好了。
6.  在生产中使用压缩的静态文件
7.  默认主题（使用 Bootstrap）
8.  [一大堆其他的东西](http://pinax.readthedocs.org/en/latest/starterprojects.html#bundled-projects)

从那里，您可以像添加任何 Django 项目一样添加应用程序并构建/自定义模板。不同之处在于您刚刚为自己节省了几个小时安装和配置应用程序的时间。

关于主题，他们试图将主题推广为仅包含静态文件的应用程序的想法。[查看默认主题](https://github.com/pinax/pinax-theme-bootstrap)的repo以了解其工作原理（它基本上只是一个带有静态文件和模板的应用程序）。

如果您是构建一个属于您自己项目的单个站点的业余爱好者，请不要为 Pinax 烦恼。

如果您是一名不断从头开始构建新网站的开发人员，Pinax 可能是您的朋友。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-13T12:24:11.680

pinax 解决的问题是，它避免了您四处寻找可以做某事的最佳应用程序，因为 pinax 为您将其捆绑在一起。

因此，如果您想快速启动并运行某些东西，pinax 让这一切变得简单。例如，到目前为止，它是让 django 项目与 twitter bootstrap + 其他常用插件一起运行的最快方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T21:14:00.100

Pinax 0.7 与一些应用程序和启动项目（如 social_projects）捆绑在一起，可用于更快地构建网站，但我在 pinax 0.9 中发生了变化。

我认为 pinax 出于某些原因重新改造了它的结构（例如，在 pinax 0.7 中，有些人抱怨自定义启动项目或仅使用某些启动项目的子集很麻烦，因此 pinax 0.9 可以提供更大的灵活性）。

pinax网站中包含的一些应用程序以某种方式相互耦合，因此更容易将它们部署在一起，有时您只需安装它们，应用程序就会相互通信。

# javascript - javascript / jquery：关闭打印取消窗口？

> ID：10569314
> 
> 赞同：1
> 
> 时间：2012-05-13T04:27:30.550
> 
> 标签：javascript, jquery, printdialog

我正在生成一个打印机友好的页面，该页面会在用户访问时自动打开浏览器的打印对话框。如果用户按下“取消”，有没有办法关闭窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T04:29:15.740

```
window.close() 
```

关闭当前窗口

你可以这样做。

```
<button type="button" id="cancelButton">Cancel</button>

$('#cancelButton').click(function(){
    window.close();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T04:50:03.980

[`window.print()`](https://developer.mozilla.org/en/DOM/window.print)没有标准；它的操作是从浏览器到浏览器的抓包。此外，据我所知，在任何浏览器实现中都不会将信息传回。您无法确定用户如何通过 JavaScript 响应打印对话框。

也就是说，打印友好页面的唯一要点似乎就是打印。也许您可以在提示打印后关闭窗口，而不管用户如何响应？

# git - 有没有办法配置 git 在用户处理文件时锁定文件？

> ID：10569317
> 
> 赞同：1
> 
> 时间：2012-05-13T04:29:41.020
> 
> 标签：git, version-control, tfs

在 TFS 中，当一个用户在一个类上工作时，其他用户不能在它上工作。git 是否有任何配置可以完成这项工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T04:34:48.237

不，这样的特性完全*违背*了 Git 的分布式原则。

根据我的经验，如果您有两个人在处理同一个文件，那么当您进行合并时会发生以下两种情况之一：

1.  没有合并冲突，因为您一直在处理代码的不同区域。继续。这是通常的情况。
2.  存在合并冲突，您必须手动解决它们。**两个提交者之间的沟通通常是必不可少的。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T05:52:21.977

不，这完全是 Git，这就是为什么为了更好的实践，我们应该经常提交并拉取更新我们的存储库。

合并代码时的任何冲突都应在检查同一行代码上的先前提交并需要通信后解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T04:10:59.750

说了这么多，

[Gitolite](https://github.com/sitaramc/gitolite) 是一个扩展，它可以让你对你的存储库和文件进行细粒度的访问控制。

# java - 如何在 Spring-WS 中定义基于模式的端点

> ID：10569321
> 
> 赞同：0
> 
> 时间：2012-05-13T04:30:43.057
> 
> 标签：java, web-services, annotations, spring-ws, endpoint

在 Spring WS 中，端点通常使用 @Endpoint 注释进行注释。例如

```
@Endpoint
public class HolidayEndpoint {
    ...
} 
```

我的问题是：有没有办法定义基于模式的端点（基于 XML 配置）？谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T05:14:03.817

在您的 spring-ws-servlet.xml 配置中，添加以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans>
    <context:annotation-config />
    <sws:annotation-driven />
    <sws:dynamic-wsdl id="holidayEndPoint" portTypeName="HolidayEndpoint"
............
...... 
```

可以从这里获得更多信息

[无法访问 Web 服务端点：Spring-WS 2](https://stackoverflow.com/questions/7718257/unable-to-access-web-service-endpoint-spring-ws-2)

可能这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:53:46.827

生成并发布 wsdl：

```
<sws:dynamic-wsdl id="EntityService" portTypeName="Entity" locationUri="/ws/EntityService/"
    targetNamespace="http://me.com/myproject/definitions">
    <sws:xsd location="WEB-INF/schemas/EntityCommons.xsd" />
    <sws:xsd location="WEB-INF/schemas/EntityService.xsd" />
</sws:dynamic-wsdl>

<bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="mappings">
        <props>
            <prop key="ws/EntityService/*.wsdl">EntityService</prop>
        </props>
    </property>
    <property name="defaultHandler" ref="messageDispatcher" />
</bean> 
```

设置拦截器：

```
<sws:interceptors>
    <bean class="org.springframework.ws.server.endpoint.interceptor.PayloadLoggingInterceptor" />

        <!-- Postel's Law: “Be conservative in what you do; be liberal in what you accept from others.” -->
        <bean id="validatingInterceptor" class="org.springframework.ws.soap.server.endpoint.interceptor.PayloadValidatingInterceptor">
        <property name="schema" value="WEB-INF/schemas/EntityService.xsd"/>
        <property name="validateRequest" value="false"/>
        <property name="validateResponse" value="true"/>
    </bean>
</sws:interceptors> 
```

或者，如果您使用的是 JAXB，则可以将编组器配置为使用模式。

# java - OpenGL中的Nuking服务器状态

> ID：10569324
> 
> 赞同：3
> 
> 时间：2012-05-13T04:31:37.807
> 
> 标签：java, opengl, lwjgl

## 简短的问题

有没有办法在 OpenGL 中消除服务器状态？即我想要

```
GL_nuke(); 
```

将 GL 服务器状态恢复为“新”GL 服务器。即，它应该释放所有纹理、VBO、FBO、顶点着色器、片段着色器以及任何可能已上传到 GL 服务器的其他内容。

## 长问题

我正在使用 LWJGL 用 Ja​​va 开发一个 OpenGL 应用程序。我目前正在使用热代码交换。我宁愿不必：

```
* have a global list of all objects on the OpenGL server side
* and clear them on every code reload 
```

因此，我希望有一个：

```
* GL_nuke(); 
```

这将释放所有服务器端对象并将所有内容返回到原始环境。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T04:43:17.603

不，没有办法使用 OpenGL API 来做到这一点。

您可以销毁并重新创建 OpenGL 上下文。尽管它会很昂贵，并且需要使用特定于平台的 API（WGL、GLX、AGL 等。）

# ruby-on-rails - 我应该在 Rails 应用程序中本地测试 SSL / HTTPS 路由吗？

> ID：10569330
> 
> 赞同：0
> 
> 时间：2012-05-13T04:33:33.963
> 
> 标签：ruby-on-rails, testing, ssl, https

我想知道关于测试某些 url 使用某些协议的最佳实践是什么。我必须在本地设置 SSL 证书吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T05:35:24.807

您无需在本地设置 SSL 证书。您可以在测试中伪造 HTTPS 请求，例如：

```
request.env['HTTPS'] = 'on' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T18:42:12.140

如果您特别关注 HTTPS 连接测试，我建议您设置自己的测试 CA 并为您的机器颁发证书。然后，将 CA 证书导入您的测试客户端。这比您绕过证书验证的测试要现实得多。

避免向 IP 地址颁发证书，为您的服务器命名。即使您没有 DNS 服务器，也要`hosts`在客户端机器的文件中设置机器名称。

有许多工具可以帮助您设置小型 CA。例如，TinyCA 就是其中之一。

# r - R: index() 不能返回所需的类

> ID：10569333
> 
> 赞同：3
> 
> 时间：2012-05-13T04:34:40.323
> 
> 标签：r, xts

我有以下带有 indexClass“日期”的**xts对象。**`index(data)`给了我“POSIXct”对象。我认为`index(Data)`会返回一个“日期”对象。

如何从中获取“日期”对象`index()`？

```
str(data)
An ‘xts’ object from 2007-01-15 to 2012-04-27 containing:
  Data: num [1:1282, 1:5] 1881 2003 2064 2026 2098 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:5] "open" "high" "low" "close" ...
  Indexed by objects of class: [Date] TZ: GMT
  xts Attributes:  
List of 2
 $ tclass: chr "Date"
 $ tzone : chr "GMT"

 indexClass(data)
 "Date"

str(index(data))
Class 'POSIXct'  atomic [1:1282] 1.17e+09 1.17e+09 1.17e+09 1.17e+09 1.17e+09 ...
  ..- attr(*, "tzone")= chr "GMT"
  ..- attr(*, "tclass")= chr "Date" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T06:40:09.107

快速回答：日期没有时区。所以它（我想）必须将您的 Date 包装在 POSIXct 中以保留时区信息。

这是一个没有时区的示例，它显示了您期望的行为：

```
x=xts(1:10, seq.Date(as.Date('2012-01-01'),by=1,length.out=10))
indexClass(x)
# [1] "Date"
index(x)
# "2012-01-01" "2012-01-02" "2012-01-03" "2012-01-04" "2012-01-05" "2012-01-06" "2012-01-07" "2012-01-08" "2012-01-09" "2012-01-10"
str(index(x))
# Date[1:10], format: "2012-01-01" "2012-01-02" "2012-01-03" "2012-01-04" "2012-01-05" "2012-01-06" "2012-01-07" "2012-01-08" "2012-01-09" "2012-01-10" 
```

更新：将 tzone 属性添加到 xts 对象不会改变任何内容：

```
x=xts(1:10, seq.Date(as.Date('2012-01-01'),by=1,length.out=10), tzone="GMT")
str(index(x))
# Date[1:10], format: "2012-01-01" "2012-01-02" "2012-01-03" "2012-01-04" "2012-01-05" "2012-01-06" "2012-01-07" "2012-01-08" "2012-01-09" "2012-01-10" 
```

尽管 str(x) 给出了与您相同的输出：

```
An ‘xts’ object from 2012-01-01 to 2012-01-10 containing:
  Data: int [1:10, 1] 1 2 3 4 5 6 7 8 9 10
  Indexed by objects of class: [Date] TZ: GMT
  xts Attributes:  
List of 2
 $ tclass: chr "Date"
 $ tzone : chr "GMT" 
```

# vmware - 如何使用 autoit 将键盘和鼠标命令从主机发送到 VMware？

> ID：10569340
> 
> 赞同：0
> 
> 时间：2012-05-13T04:36:12.323
> 
> 标签：vmware, autoit

如何使用 autoit 将键盘和鼠标命令从主机发送到 VMware？

有没有其他解决方法？

谢谢，华

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:36:44.307

The main issue with automating VMware is getting feedback from software running in the guest system. For instance, you cannot wait on a window in a guest by executing WinWait() on the host.

One way to get around that is to implement a master/slave dependency where an AutoIt controller script on the host OS issues commands (via VMware shared folder, a network share, etc) and the AutoIt executor script on the guest OS makes stuff happen and reports back (again, over a share).

An example (simplified, but based on what I'm using right now):

```
WinWait("VMware")
WinActivate("VMware")
Send("{CTRLDOWN}g{CTRLUP}") ; Ctrl+G, give focus to the guest OS
Send("{LWINDOWN}r{LWINUP}") ; Win+R, brings up command entry dialog on the guest
Send("...the actual command with job ID as the argument")
; this last command given to host is actually a compiled AU3 script 
; that does something useful and reports back over a network share
Do
    Sleep(15000) ; now wait for the script on the guest to report back
Until GuestHasResponded()

Func GuestHasResponded()
   ; ... check if the guest has created a flag file on the network share
EndFunc 
```

On the other hand, if you simply need to automate the VMware client itself (e.g. automate creation of virtual machines), you can get by with basic AutoIt approach of which examples are plenty on the AutoIt forum.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T16:10:18.953

你会想要[`WinActivate()`](http://www.autoitscript.com/autoit3/docs/functions/WinActivate.htm)你的 vmware 窗口，然后使用你需要的任何[`Send()`](http://www.autoitscript.com/autoit3/docs/functions/Send.htm)和[`MouseMove()`](http://www.autoitscript.com/autoit3/docs/functions/MouseMove.htm)/[`MouseClick()`](http://www.autoitscript.com/autoit3/docs/functions/MouseClick.htm)功能。

编辑：

之后`WinActivate()`，执行 Send("^g") 以获得对 VM 的 GUI 控制，然后再尝试`Send()`或`MouseMove()`/`MouseClick()`对 VM 进行任何其他操作。

# python - 多个登录访问特定结果而不使用 Django 中的组

> ID：10569341
> 
> 赞同：0
> 
> 时间：2012-05-13T04:37:43.970
> 
> 标签：python, django

我有一个使用标准 Django 用户身份验证设置的 Django 应用程序。用户可以在其中登录，添加他们的玩家（玩家模型 - 外键到用户模型），并为他们的玩家添加结果（结果模型 - 外键到玩家模型）。

我还希望用户创建的玩家（玩家模型中的每个条目）能够登录，但只能编辑/添加他们自己的结果。为了清楚起见，用户和玩家会看到该玩家的相同结果，并且每个人都可以添加和编辑它们。

我不相信这可以通过组来完成，因为组必须是特定于用户的。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T15:07:34.190

我能想到的：您可以使用自定义身份验证后端。允许某人输入玩家名和密码（或您用于授权的任何内容）。登录与该播放器关联的用户（以便能够继续使用 Django 的身份验证系统），但存储选择了哪个播放器。

编辑播放器结果时，不仅要检查播放器是否属于正确的用户，还要检查它是否确实是该播放器登录的身份（如果有）。

# c# - C# 扩展方法重载

> ID：10569348
> 
> 赞同：2
> 
> 时间：2012-05-13T04:39:44.297
> 
> 标签：c#, extension-methods, overloading

我有两种扩展方法：

```
 public static string ToString(this List<object> list, char delimiter)
    {
        return ToString<object>(list, delimiter.ToString());
    }

    public static string ToString(this List<object> list, string delimiter)
    {
        return ToString<object>(list, delimiter);
    } 
```

当我使用这个时：

```
 char delimiter = ' ';
    return tokens.ToString(delimiter); 
```

它行不通。char 重载也不会出现在代码完成列表中。谁能告诉我如何使这项工作？

**编辑**

我不小心忘了提到实际上有 3 种扩展方法，第三种是：

```
 public static string ToString<T>(this List<T> list, string delimiter)
    {
        if (list.Count > 0)
        {
            string s = list[0].ToString();

            for (int i = 1; i < list.Count; i++)
                s += delimiter + list[i].ToString();

            return s;
        }

        return "";
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-13T04:42:42.470

添加对具有扩展方法的类的引用：

```
using MyApplicationNamespace.ToStringExtensionClass; 
```

VS / ReSharper 不提供自动添加引用，因为该方法已经被识别，只是没有那个特定的签名。

此外，除非您有带有通用参数的第三个扩展方法，否则您的方法本身不会编译。

他们为我工作的方式（编译和逻辑）：

```
public static string ToString(this List<object> list, char delimiter)
{
    return ToString(list, delimiter.ToString());
}

public static string ToString(this List<object> list, string delimiter)
{
    return string.Join(delimiter, list);
} 
```

用法将是：

```
var list = new List<int> { 1, 2, 3, 4, 5 };
var str = list.Cast<object>().ToList().ToString(' '); 
```

如果您想避免强制转换并使方法通用，请将它们更改为：

```
public static string ToString<T>(this List<T> list, char delimiter)
{
    return ToString(list, delimiter.ToString());
}

public static string ToString<T>(this List<T> list, string delimiter)
{
    return string.Join(delimiter, list);
} 
```

然后使用更干净：

```
var list = new List<int> { 1, 2, 3, 4, 5 };
var str = list.ToString(' '); 
```

**编辑**

因此，在您进行编辑后，我更好地理解了您的问题。您应该失去非泛型方法，并具有泛型重载以接受 char 。

```
public static string ToString<T>(this List<T> list, char delimiter)
{
    return ToString(list, delimiter.ToString());
}

public static string ToString<T>(this List<T> list, string delimiter)
{
    ...
} 
```

此外，您尝试实现的逻辑可以通过以下方式轻松实现：

```
string.Join(delimiter, list); 
```

所以你基本上可以删除所有这些方法并使用它，除非你真的希望它作为列表的扩展方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T04:47:43.083

我认为您的问题是您正在为泛型 List 指定对象的类型，而不是使其成为泛型方法。

当您定义如下内容时，看看它是否有效：

```
public static string ToString<T>(this List<T> list, char delimiter) 
{ 
    return ToString<T>(list, delimiter.ToString()); 
} 

public static string ToString<T>(this List<T> list, string delimiter) 
{ 
    return String.join(list, delimiter); 
} 
```

您使用字符串分隔符的原始函数只是在调用自己，因此您必须更改您`ToString<T>(this List<T> list, string delimiter)`的函数才能在此处执行一些有用的操作，例如 String.join

# jquery - 用于ajax搜索请求的jquery

> ID：10569349
> 
> 赞同：0
> 
> 时间：2012-05-13T04:39:52.087
> 
> 标签：jquery, ajax, search, onkeyup, ondemand

当谈到 jQuery 时，我有点像新手，我正在尽力理解它。以下是两段代码，我将不胜感激您的反馈。我的最终目的是在要查询的框中输入什么，我将分别用下面的两段代码讨论这两个问题。

```
function update_results(){
$.ajax({
    url: '{base}modules/search.php?q=' + $("#q").val(),
    success: function(data) {
    $('#q').bind('keyup', function() { $('#results').fadeIn(400).delay(500).html(data); } ).keyup();
 }
});
} 
```

这段代码一旦将请求抛出到服务器的循环中并导致浏览器显着变慢，但运行良好（跟上输入的字符）。

```
function update_results(){
$.ajax({
    url: '{base}modules/search.php?q=' + $("#q").val(),
    success: function(data) {
    $('#q').bind('keyup', function() { $('#results').fadeIn(400).delay(500).html(data); } );
 }
});
} 
```

这段代码没有循环问题，但是每当我键入发送到我的 search.php 页面的查询时，总是缺少最后两三个字符。

以下是触发上述两种情况的 HTML 元素：

```
<h3>Site Search</h3>
    <input id="q" type="text" onkeyup="update_results()" value="Type in a search term..." onFocus="this.value='';" /><br>
    <a href="javascript:clear_results();">(Reset)</a> | <a href="search/">(Advanced Search)</a>
    <div id="results" style="text-align: left; font-size: 11px;"></div></center>
    </div> 
```

我想要的只是将#q 中的内容发送到search.php?q= 并让它返回数据并将其放在#results div 中。我还想在其中放置某种计时器，这样它就不会在每次输入字符时查询服务器，因为在人完成键入后，由某个任意时间值指定，或者每隔几秒钟。一旦这个人完成打字，显然我希望它停止敲击服务器。

我在互联网上环顾四周，如果看起来我没有做过任何研究，我深表歉意。相反，我昨天才开始学习jQuery。

感谢您的宝贵时间，如果这是一个非常新手的问题，我提前道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T05:04:30.823

你总是落后几个角色的原因可能与此有关。

```
success: function(data) {
    $('#q').bind('keyup', function() { $('#results').fadeIn(400).delay(500).html(data); } ).keyup();
} 
```

这些“绑定”动作越来越多，每次从 AJAX 请求返回更多结果。因此，每次触发 keyup 操作时，都会设置所有这些不同的结果集。我不确定这是否有意义，但这不是最容易遵循的代码。

尝试将此部分更改为

```
success: function(data) {
    $('#results').show().html(data);
} 
```

如果这看起来更好，请尝试使用您的fadeIn() 和delay() 来调整它。

您可能想要添加的另一件事是这样的：

```
$('#q').blur(function(){ $('#results').hide() }); 
```

这将使您在离开文本字段（模糊）时隐藏结果。

# java - 仅当在 Java 中按下鼠标时如何让 mouseEntered 执行

> ID：10569351
> 
> 赞同：3
> 
> 时间：2012-05-13T04:40:07.623
> 
> 标签：java, event-handling, mouseevent, listener

我只想在当前按下鼠标时执行 mouseEntered ，基本上是这样的：

```
 @Override
    public void mouseEntered(MouseEvent e) {
       if(e.mouseDown()){
         //Do stuff
        }
    } 
```

我可以这样做，还是需要鼠标运动监听器或什么？

谢谢！

编辑：对不起应该更清楚，但我需要按下鼠标在它进入组件之前，它就像按住鼠标并将鼠标悬停在组件上会激活监听器

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T04:47:30.917

您可能想评估 MouseEvent API 以查看可用的方法，因为我认为您会在那里找到您的解决方案：

```
 myComponent.addMouseListener(new MouseAdapter() {

     @Override
     public void mouseEntered(MouseEvent mEvt) {
        System.out.println("mouse entered");

        if (mEvt.getModifiers() == MouseEvent.BUTTON1_MASK) {
           System.out.println("Mouse dragging as entered");
        }

     }

  }); 
```

例如：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class MouseEnteredPressed extends JPanel {
   private static final int SIDE = 500;

   public MouseEnteredPressed() {
      setLayout(new GridBagLayout());
      JLabel label = new JLabel("Hovercraft Rules The World!");
      label.setFont(label.getFont().deriveFont(Font.BOLD, 24));
      label.setBorder(BorderFactory.createLineBorder(Color.LIGHT_GRAY));
      add(label);

      label.addMouseListener(new MouseAdapter() {
         @Override
         public void mouseEntered(MouseEvent mEvt) {
            System.out.println("mouse entered");

            if (mEvt.getModifiers() == MouseEvent.BUTTON1_MASK) {
               System.out.println("Mouse dragging as entered");
            }
         }
      });

   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(SIDE, SIDE);
   }

   private static void createAndShowGui() {
      MouseEnteredPressed mainPanel = new MouseEnteredPressed();

      JFrame frame = new JFrame("MouseEnteredPressed");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# html - 包含输入输入时出现的动态生成列表的 div

> ID：10569354
> 
> 赞同：0
> 
> 时间：2012-05-13T04:40:45.293
> 
> 标签：html, css, autocomplete

本质上，我正在尝试为自动完成创建 HTML/CSS。我希望它的外观/行为与此处大致相似：[http](http://www.skyscanner.com/) ://www.skyscanner.com/ （输入 From 或 To 字段）

我并不担心实际使自动完成工作，我只想创建 HTML/CSS 用于显示自动完成生成的文本项列表。

这是我希望制作的基本布局：

![在此处输入图像描述](../Images/0a137ead49f1438a2026487ff0975e18.png)

输入框 1 和输入框 2 是我目前拥有的。当用户单击其中一个输入框时，我希望出现相应的自动完成框（此时将显示虚假数据）。

不幸的是，我想不出我会如何做这样的事情。任何人都可以让我开始或指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T00:20:32.490

基本思想是有一个相对于页面定位但不移动它的父元素。由于此元素已定位（不是静态的），因此您可以将建议框*相对于父元素*绝对定位在文本框下方。由于它是绝对定位的，它不会影响文档流，也就是它出现在文本框下方的其他元素之上。像这样的东西应该工作：

**HTML：**

```
<span class="tbSuggestParent">
<input type="text" class="tbSuggest">
<span class="suggestions"><!-- Suggestions go here --></span>
</span> 
```

**CSS：**

```
.tbSuggestParent {
    position: relative;
    display: inline-block;
}

.tbSuggest {
    width: 200px;
    height: 30px;
    font-family: Arial;
    font-size: 14pt;
    border: 2px solid black;
    border-radius: 2px;
}

.suggestions {
    position: absolute;
    width: 170px;
    height: 300px;
    top: 36px;
    left: 15px;
    border: 1px solid black;
    border-radius: 2px;
    display: inline-block;
    background-color: white;
} 
```

这包括您的图像似乎显示的圆形边框，使用`border-radius`. 如果该属性在给定的浏览器中不可用，它应该只使用常规边框。

**演示**（包括下面的文字）：[http ://www.dstrout.net/pub/suggest.htm](http://www.dstrout.net/pub/suggest.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T01:04:19.943

这是一个简单的方法

*   将元素包装在`div`. **为什么？**它避免你使用很多不必要的样式

设置 div 定位为`relative`，则自动补全框会自动对齐输入框和容器。

这是我建议的标记。

```
<div class="field">
     <input type="text" />
     <ul class ="autocomplete">
          <li>Option 1</li>
          <li>Option 2</li>
          <li>Option 3</li>
          <li>Option 4</li>
          <li>Option 5</li>
     </ul>
</div> 
```

[演示](http://jsfiddle.net/4KZq2/2/)

# java - 通过将类骨架从服务器传输到客户端来创建服务器端类的客户端对象

> ID：10569361
> 
> 赞同：0
> 
> 时间：2012-05-13T04:41:48.290
> 
> 标签：java, web-services, object, client-server

如果之前已经问过这个问题，请原谅我......

我想创建一个客户端-服务器应用程序，最好使用Java，它要求客户端程序调用服务器程序中的某个控制器来封装一个最初驻留在服务器中的类并传递到客户端。然后客户端将解封装类并创建一个新的类对象并执行某些任务。

但是，我不确定如何将整个类封装在服务器端并传输回客户端以进行对象创建、实例化和执行所需任务。

例如，类似类型的应用程序可能类似于客户端 JavaScript 或用于服务器端代码的 Flash 程序执行。但我不确定 JavaScript 或 Flash 程序是否以这种方式运行。

请建议我以非常简单的方式编写此类应用程序的可能方式来表达这个概念/想法或任何可能的链接/示例以掌握。

非常感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T05:09:32.210

这是某种协议问题。

类似问题：

[最佳 Java 支持的服务器/客户端协议？](https://stackoverflow.com/questions/451004/best-java-supported-server-client-protocol)

[带有 XML 消息的客户端服务器协议](https://stackoverflow.com/questions/3182464/client-server-protocol-with-xml-messages)

你可以试试：

[RMI](http://docs.oracle.com/javase/tutorial/rmi/index.html)

设置 RMI 后，它将帮助您透明地对对象进行 en/decapsulate。

[Xstream](http://xstream.codehaus.org/)

Xstream 将帮助您将对象序列化/反序列化为 xml。您可以使用 xml 进行客户端/服务器通信。

[协议缓冲区](http://code.google.com/p/protobuf/)

> 协议缓冲区是一种以高效且可扩展的格式对结构化数据进行编码的方法。Google 几乎所有内部​​ RPC 协议和文件格式都使用协议缓冲区。

# drupal-6 - 如何使用节点标签/术语填充计算字段

> ID：10569362
> 
> 赞同：0
> 
> 时间：2012-05-13T04:42:07.480
> 
> 标签：drupal-6, tags, cck, taxonomy

我正在尝试使用与节点关联的术语/标签以及正文填充计算字段。使用 "$node->body" 将 body 放入很好，但我不确定如何引入标签？

我想要的词汇的 VID 是“4” - 所以我希望文章已标记的所有 VID 4 术语与正文一起显示在此字段中。

我这样做是出于自定义搜索的目的，可以同时搜索标签和正文，但我相信这些代码也会在未来的项目中派上用场。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T13:15:27.600

我解决了。这是我在计算字段的“计算代码”框中输入的完整代码：

```
// Specify the vocabulary you want to pull tags from for the node
$vid = 4;

// String together the term array with a pipe between each term
$terms = taxonomy_node_get_terms_by_vocabulary($node, $vid);
if ($terms) {foreach ($terms as $term) {$node_terms .= ' | ' . $term->name;}}

// Merge terms and body into field value
$node_field[0]['value'] = $node_terms ." <br><br>". $node->body; 
```

希望以后可以帮助任何有类似问题的人:)

# javascript - Jquery将文本附加到div部分

> ID：10569366
> 
> 赞同：1
> 
> 时间：2012-05-13T04:43:12.677
> 
> 标签：javascript, jquery, html

我正在尝试使用 jquery 向 div sectionj 添加文本，但文本超出了我想要的 div .. 我的 html 看起来像：

```
<!--CONTENT AREA-->
<div id="content">
  <div id="content_inner">
    <h2 id='titulo'>BUSCAR:</h2>
    KEYWORDS: 
    <input type='text' id='paramsQuery'>
    <input type='submit' id='botonBuscar' value='buscar'>
    <div id='results'></div>
  </div>
</div> 
```

我的 js 函数如下所示：

```
$(document).ready(function() {
  $("#botonBuscar").click(function() {
    var params = $("#paramsQuery").val();
    $("#column3_inner").append(params); 
  });
}); 
```

有什么建议可以使文本保持在所需的宽度上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T04:45:50.380

您将结果添加到不在提供的代码中的元素。也许你打算把它放进去`#results`？

```
$(function() {
  $("#botonBuscar").on("click", function() {
    $("#results").append( $("#paramsQuery").val() ); 
  });
}); 
```

演示：http: [//jsbin.com/icapuh/edit#javascript,html](http://jsbin.com/icapuh/edit#javascript,html)

如果您的文本溢出您的框，您可以在那里有几个选项。你可以打破界限：

```
#results {
  word-wrap: break-word;
} 
```

或者您可能会导致滚动：

```
#results {
  overflow-x: scroll;
} 
```

或设置`text-overflow`显示省略号：

```
#results {
  overflow: hidden;
  text-overflow: ellipsis;
  -o-text-overflow: ellipsis;
  -ms-text-overflow: ellipsis;
} 
```

# c# - C# MVC4 Razor 部分视图 - 切换视图时刷新整页？

> ID：10569367
> 
> 赞同：1
> 
> 时间：2012-05-13T04:43:12.770
> 
> 标签：c#, razor, views, refresh

我正在构建一个典型的管理门户 - 顶部和左侧菜单有两个共享的部分视图 .cshtml 文件。然后，主要内容是通常的视图文件。

例如，我在“views”中有一个“dashboard.cshtml”和“settings.cshtml”等等。在这些内部，我调用了 @Html.Partial("_Layout_topmenu") 和 @Html.Partial("_Layout.leftnav")

一切都“工作”正常，除了当我从“仪表板”到“设置”并返回“仪表板”时，我看到整个屏幕刷新。我希望只有主要内容部分会刷新，而顶部和左侧导航会保持不变，因为它们是部分视图。我错过了什么吗？

在返回 ActionResult 类型的“仪表板”和“设置”GET 方法的控制器代码中，我只是返回 view();

那么是否可以在从 //site/controller/view1 移动到 //site/controller/view2 时保持顶部菜单和左侧导航窗格并不断更改主要内容（并且不涉及 jQuery/AJAX 魔法）.. . ?

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T04:52:02.213

除非您使用框架（我认为您不是），或者您通过 ajax 手动将部分视图的 html 加载到它们各自的容器中，否则您只是在发出常规的 http 请求。部分视图仅在服务器上，而不是客户端，因此当您对给定页面发出请求时，整个内容都会重新加载。

如果您想独立于其他区域加载内容区域，我建议您考虑[`PartialView()`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.partialview.aspx)从您的控制器方法返回，并通过 jQuery 的方法调用该[`.load()`](http://api.jquery.com/load/)方法。

* * *

编辑

不使用 jquery/其他魔法，不。如果你请求一个页面，你将加载一个页面。这应该不足为奇。

# c# - 带有错误报告和依赖项集成的 SmartAssembly 的免费替代品

> ID：10569369
> 
> 赞同：3
> 
> 时间：2012-05-13T04:43:25.750
> 
> 标签：c#, .net, obfuscation

我尝试了 Smart Assembly，对此非常满意。它的错误报告功能很棒。依赖集成也是非常酷的功能。我的问题是有像 Smart Assembly 这样的免费替代品吗？

我尝试了 Eazfuscator.NET，它是很棒的混淆器，但缺少 Smart Assembly 中我最喜欢的两个。是否有任何免费工具可用于 .Net 框架的错误报告和依赖项集成。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T10:51:31.443

在阅读[Eazfuscator.NET](http://www.gapotchenko.com/eazfuscator.net)的文档时，我发现它包含两个功能，称为程序集合并和程序集嵌入。为了报告错误，我创建了自己的库。[你可以在CodePlex CrashReporter.NET](http://crashreporterdotnet.codeplex.com/)找到这个库

任何人都可以按照以下说明使用程序集合并或嵌入

> **程序集合并**
> 
> **介绍**
> 
> 程序集合并允许将多个程序集合并为一个。从部署和安全的角度来看，这可能是有益的。
> 
> 组件合并技术在下面使用 ILMerge 实用程序。因此，为了使用程序集合并，请确保您的机器上安装了 ILMerge。通过单独使用 ILMerge 实用程序也可以实现程序集合并，但在大多数情况下，使用 Eazfuscator.NET 提供的程序集合并接口会更方便。
> 
> 使用从 Eazfuscator.NET 合并的程序集与直接使用 ILMerge 的好处
> 
> Eazfuscator.NET 在 Eazfuscator.NET Assistant 的帮助下自动集成到项目构建过程中。在直接使用 ILMerge 的情况下，您必须手动为项目编写构建事件处理程序 Eazfuscator.NET 神奇地处理项目的签名选项。在直接使用 ILMerge 的情况下，您必须手动为其提供签名密钥和选项 Eazfuscator.NET 为 ILMerge 提供目标平台信息，这些信息是从输入程序集中自动检测到的。在直接使用 ILMerge 的情况下，您必须手动提供此信息 Eazfuscator.NET 为 ILMerge 提供所有必需的选项，因此您不必阅读 ILMerge 手册。它大大加快了集成速度
> 
> 默认情况下，在程序集的混淆过程中不使用程序集合并。
> 
> **指示**
> 
> 要启用程序集合并，您应该将特殊形成的属性应用于您的程序集。为此，您可以使用以下说明。
> 
> 启用程序集合并的说明
> 
> 在 IDE 中打开可混淆项目 将新的源文件添加到项目中并将其命名为 ObfuscationSettings.cs（对于 C#）或 ObfuscationSettings.vb（对于 Visual Basic .NET）。您可能更喜欢使用其他名称而不是 ObfuscationSettings.cs 或 ObfuscationSettings.vb 使用以下内容 (C#) 填充 ObfuscationSettings.cs：
> 
> ```
> using System;
> using System.Reflection;
> 
> [assembly: Obfuscation(Feature = "merge with XXXXXX.dll", Exclude = false)] 
> ```
> 
> 对于 Visual Basic .NET，使用以下内容填充 ObfuscationSettings.vb：
> 
> ```
> Imports System
> Imports System.Reflection
> 
> <Assembly: Obfuscation(Feature:="merge with XXXXXX.dll", Exclude:=False)> 
> ```
> 
> **笔记**
> 
> 将 XXXXXX.dll 更改为要合并的程序集的文件名。
> 
> **提示**
> 
> 如果要与多个程序集合并，则只需添加几个属性：
> 
> ```
> using System;
> using System.Reflection;
> 
> [assembly: Obfuscation(Feature = "merge with Assembly1.dll", Exclude = false)]
> [assembly: Obfuscation(Feature = "merge with AnotherAssembly2.dll", Exclude = false)]
> … 
> ```
> 
> **注意** 使用程序集合并可能会导致一些副作用，这可能会导致混淆失败。如果是这种情况，则使用最小公分母原则——仅合并那些不会导致混淆失败的程序集。程序集嵌入可以结合使用或作为程序集合并的替代方法。
> 
> **ILMerge 的自定义参数**
> 
> 有时您可能需要将自定义参数传递给 ILMerge 实用程序。例如，您可能更喜欢自己控制类内部化或使用一些棘手的 ILMerge 功能。为此，您可以使用以下说明。
> 
> **将自定义参数传递给 ILMerge 的说明**
> 
> 在 IDE 中打开可混淆项目 将新的源文件添加到项目中并将其命名为 ObfuscationSettings.cs（对于 C#）或 ObfuscationSettings.vb（对于 Visual Basic .NET）。您可能更喜欢使用其他名称而不是 ObfuscationSettings.cs 或 ObfuscationSettings.vb 使用以下内容 (C#) 填充 ObfuscationSettings.cs：
> 
> ```
> using System;
> using System.Reflection;
> 
> [assembly: Obfuscation(Feature = "ilmerge custom parameters: <parameters>", Exclude = false)] 
> ```
> 
> 对于 Visual Basic .NET，使用以下内容填充 ObfuscationSettings.vb：
> 
> ```
> Imports System
> Imports System.Reflection
> 
> <Assembly: Obfuscation(Feature:="ilmerge custom parameters: <parameters>", Exclude:=False)> 
> ```
> 
> **笔记**
> 
> 使用您要传递的参数进行更改。当没有定义属性时，Eazfuscator.NET 默认传递 /internalize /ndebug 参数。如果您不想将任何参数传递给 ILMerge，请使用无字符串进行更改。

程序集嵌入指令

> **装配体嵌入**
> 
> **介绍**
> 
> 程序集嵌入允许将程序集的依赖项嵌入程序集本身。从部署和安全的角度来看，这可能是有益的。
> 
> 程序集嵌入类似于合并。主要区别在于程序集在嵌入时不会合并为单个程序集。它们只是被加密并打包为程序集资源。结果，输出中只有一个程序集，它包含同一文件中的打包依赖项。
> 
> 当我们合并时嵌入有什么意义（反之亦然）？装配体合并为生成的装配体提供最佳性能。它们可以是 NGENed，它们可以在所有受限环境（Windows Phone、Compact Framework 等）中工作。操作系统可以为此类程序集缓存文件映射和 JIT 代码，从而带来令人眼花缭乱的快速应用程序启动。装配合并绝对是岩石。
> 
> 合并的唯一缺点是它并不总是可以在不破坏应用程序的情况下应用它。因此，这就是程序集嵌入发挥作用的地方。
> 
> 嵌入式组件很容易实现，而且开箱即用。缺点？好吧，他们在场。嵌入式程序集不能 NGENed，它们在某些受限环境（Xbox、Windows Phone 和 Compact Framefork）中不起作用。在应用程序加载期间提取嵌入式程序集是一种性能损失（损失非常小，因此您不太可能注意到它）。
> 
> 程序集嵌入也带来了一些好处。嵌入式程序集是加密的，因此这是针对黑客的安全加固。嵌入式组件被压缩，从而减小了最终组件的尺寸。当然，程序集嵌入是实现单文件部署的最简单方法，使您的应用程序由单个 .exe（或 .dll）文件组成。
> 
> **指示**
> 
> 要启用程序集嵌入，您应该将特殊形成的属性应用于您的程序集。为此，您可以使用以下说明。启用程序集嵌入的说明
> 
> 在 IDE 中打开可混淆项目 将新的源文件添加到项目中并将其命名为 ObfuscationSettings.cs（对于 C#）或 ObfuscationSettings.vb（对于 Visual Basic .NET）。您可能更喜欢使用其他名称而不是 ObfuscationSettings.cs 或 ObfuscationSettings.vb 使用以下内容 (C#) 填充 ObfuscationSettings.cs：
> 
> ```
> using System;
> using System.Reflection;
> 
> [assembly: Obfuscation(Feature = "embed XXXXXX.dll", Exclude = false)] 
> ```
> 
> 对于 Visual Basic .NET，使用以下内容填充 ObfuscationSettings.vb：
> 
> ```
> Imports System
> Imports System.Reflection
> 
> <Assembly: Obfuscation(Feature:="embed XXXXXX.dll", Exclude:=False)> 
> ```
> 
> **笔记**
> 
> 将 XXXXXX.dll 更改为您要嵌入的程序集的文件名。
> 
> **重要的**
> 
> 建议对嵌入式程序集进行模糊处理。
> **提示**
> 
> 当仅提供文件名时，Eazfuscator.NET 会自动查找程序集路径。如果您希望指定程序集的确切文件路径，则可以使用脚本变量：
> 
> ```
> [assembly: Obfuscation(Feature = @"embed $(InputDir)\Lib\AssemblyToEmbed.dll", Exclude = false)] 
> ```
> 
> **提示**
> 
> 如果要嵌入多个程序集，则只需添加几个属性：
> 
> ```
> [assembly: Obfuscation(Feature = "embed Assembly1.dll", Exclude = false)]
> [assembly: Obfuscation(Feature = "embed AnotherAssembly2.dll", Exclude = false)]
> … 
> ```
> 
> **调音**
> 
> 默认情况下，嵌入式程序集被压缩和加密。您可能更喜欢关闭压缩、加密或两者。为此，请阅读以下说明。
> 
> 程序集嵌入的自定义属性的完整表示法具有以下形式：
> 
> ```
> [assembly: Obfuscation(Feature = "embed [flags] XXXXXX.dll", Exclude = false)] 
> ```
> 
> 其中 [flags] 是由空格分隔的标志的可选枚举。
> 
> 下表列出了可用标志的列表。
> 
> **下面是程序集嵌入属性的标志列表**
> 
> 标志 说明 no_compress 禁用压缩 no_encrypt 禁用加密 no_satellites 禁用附属程序集的自动嵌入 load_from_file 指示 Eazfuscator.NET 在混淆程序集运行时从文件而不是内存加载嵌入程序集。这可用于从 System.Reflection.Assembly 类型中保留有意义的 Location 属性值。
> 
> 让我们看一下例子。
> 
> 例 4.24。无需压缩和加密的嵌入程序集
> 
> ```
> using System;
> using System.Reflection;
> 
> [assembly: Obfuscation(Feature = "embed [no_compress no_encrypt] XXXXXX.dll", Exclude = false)] 
> ```
> 
> 例 4.25。无需加密的嵌入程序集；启用压缩
> 
> ```
> using System;
> using System.Reflection;
> 
> [assembly: Obfuscation(Feature = "embed [no_encrypt] XXXXXX.dll", Exclude = false)] 
> ```
> 
> 例 4.26。嵌入装配；启用压缩和加密
> 
> ```
> using System;
> using System.Reflection;
> 
> [assembly: Obfuscation(Feature = "embed XXXXXX.dll", Exclude = false)] 
> ```
> 
> 例 4.27。嵌入自己的卫星组件；启用压缩和加密
> 
> ```
> using System;
> using System.Reflection;
> 
> [assembly: Obfuscation(Feature = "embed satellites", Exclude = false)] 
> ```
> 
> **故障排除**虽然程序集嵌入是链接程序集的最非侵入性方式，但可能会出现一些罕见的问题。本章描述了可能出现的问题以及避免这些问题的相应解决方案。System.Reflection.Assembly 类问题摘要的位置属性。System.Reflection.Assembly 类的 Location 属性通常用于查找程序集附近文件的路径。虽然不是正确的解决方案，但这适用于大多数部署方案。
> 
> 可能会出什么问题？首先，在使用程序集卷影复制时，Location 属性可能具有完全意外的值，从而破坏了预期的应用程序逻辑。其次，当嵌入相应的程序集时，Location 属性具有空值。
> 
> 解决方案。请改用 EscapedCodeBase 属性。此属性在所有部署方案中始终具有正确的值。请看下面的示例。
> 
> ```
> using System;
> 
> class Program
> {
>     static string GetEulaPath()
>     {
>         var assembly = typeof(Program).Assembly;
>         // string location = assembly.Location; // Please do not use this. This is a flawed approach
>         string location = new Uri(assembly.EscapedCodeBase).LocalPath; // <-- Use this instead
>         return Path.Combine(Path.GetDirectoryName(location), "EULA.rtf");
>     }
> } 
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T10:02:45.813

对于错误报告，您可以尝试 N Bug。对于依赖项集成，您可以使用 ILMerge，

[http://www.nbusy.com/projects/nbug](http://www.nbusy.com/projects/nbug)

[http://research.microsoft.com/en-us/people/mbarnett/ILMerge.aspx](http://research.microsoft.com/en-us/people/mbarnett/ILMerge.aspx)

顺便说一句，如果您真的喜欢 SmartAssembly，请考虑购买它。

# mysql - SQL 查询中的用户定义变量

> ID：10569370
> 
> 赞同：4
> 
> 时间：2012-05-13T04:44:18.873
> 
> 标签：mysql, sql

我在使用 SQL 查询窗口调用 phpmyadmin 中的变量时遇到了一点麻烦。

我仍然只是在学习绳索，所以这很简单。我相信这只是一个小的语法或引用问题。

我想做的是：

```
SET @var1 = Value (Does it need quote marks after "=" or not?)

SELECT * From `Table` WHERE 'Column' = @var1      (Same question about quote marks) 
```

这似乎只是愚蠢的简单。我进行了搜索，只是找不到我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T04:47:16.673

你不需要引号：

```
SET @var1 =10;
SELECT * FROM table WHERE `column` = @var1 //should work 
```

或者你可以这样做：

```
SET @var1:='somename';
SELECT * FROM table WHERE `somefield`=@var1 
```

请参阅：[变量](http://dev.mysql.com/doc/refman/5.1/en/user-variables.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T04:52:33.967

如果你的值包含一个字符串，你必须在它周围使用引号，否则你不需要。但是你不应该引用你的列名！所以：

```
SET @var1 = 'stringval';
SELECT * From Table WHERE Column = @var1; 
```

# types - 在 RavenDB 中重命名实体

> ID：10569371
> 
> 赞同：2
> 
> 时间：2012-05-13T04:45:17.727
> 
> 标签：types, ravendb, rename

我想重命名一个用于在 RavenDB 中持久化的类。恐怕 RavenDB 在重命名类型后将无法从数据库中获取文档。实体名称也用作 Id 的一部分，因此我可能还需要重命名它们。

关于如何成功重命名的任何好的指示？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-13T10:58:59.697

您将能够加载旧文档。不过，您需要注意使用实体名称的索引。您可以使用 UpdateByIndex 对所有旧文档进行批量更新。

# javascript - 如何在 JavaScript 窗口对象打开的窗口中设置某些元素的 innerHTML？

> ID：10569374
> 
> 赞同：3
> 
> 时间：2012-05-13T04:45:28.757
> 
> 标签：javascript, html, window.open

我有一些像这样的简单 JavaScript 代码：

```
<script type="text/javascript">
   function openWindow() {
     var mywindow = window.open("file.html");
     mywindow.document.getElementById("foo").innerHTML="Hey you!!";
   }
</script> 
```

使用 onclick 事件调用此函数。窗口可以正常打开，但元素的 innerHTML 没有改变。这是我拥有的文件，所以我知道我没有被任何安全策略阻止，并且 id 为 'foo' 的元素肯定存在。（这是一个 DIV）。我已经尝试过 .innerHTML 的其他变体，例如 .src 和 .value，但似乎没有任何效果。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T04:52:51.283

这里的问题是，您很可能在新窗口有机会完成加载之前尝试访问新窗口的 DOM。

考虑以下：

```
<script type="text/javascript">
   function openWindow() {
     var mywindow = window.open("file.html");

     // register an onload event with the popup window so that we attempt to 
      // modify it's DOM only after it's onload event fires.
     mywindow.onload = function() {
         mywindow.document.getElementById("foo").innerHTML="Hey you!!";
     }

   }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T04:00:23.920

请注意......即使在修复了它的时间之后，如果您在本地机器上而不是在互联网或本地服务器上开发，您也可能会遇到错误。我只是浪费了一个小时试图弄清楚为什么它不起作用，然后将相同的代码上传到我的服务器并且它运行良好。我使用的是 2 年前在本地运行的代码，但在不同的浏览器中，更改了几行和浏览器，它停止工作，直到在服务器上运行。希望这可以帮助某人。

# compiler-construction - 理解 flex 生成器中的规则

> ID：10569376
> 
> 赞同：0
> 
> 时间：2012-05-13T04:45:38.320
> 
> 标签：compiler-construction, lex, flex-lexer

我正在尝试使用 flex 生成器及其工作原理，下面的代码将文本文件 {number number} 中的符号序列替换为 {"d" ws "d"}，并计算替换次数

```
%{
   int count = 0;
%}
DIGIT [0-9]
%%
{DIGIT}{DIGIT} {count++; printf("d d");} 
%%
int main()
{
  yylex();
  printf( "\n#Report: %d changes made!", count);
  return 0;
}
int yywrap()
{
    return 1;
} 
```

提交文件后用规则输入文件并编译flex lex.yy.c，收到一个可执行文件。可执行文件的输入我们提交如下数据流

```
====================test.in============================
wefwe
f
weferg54gfwsfwe
fwef
wefwefwf
wefewf21321dsfredf
sdf
=========================================================== 
```

得到的输出

=============================test.out==================

```
wefwe
f
wefergd dgfwsfwe
fwef
wefwefwf
wefewfd dd d1dsfredf
sdf
#Report: 3 changes made! 
```

==================================================== ======

我的问题是，如果我想在给定的文本中将符号序列 {consonant consonant} 替换为 {consonant «a» consonant} 并计算替换次数怎么办

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T13:47:40.030

我不确定你坚持什么概念。也许这是编写一个字符类来匹配辅音的想法：让我们认为“Y”是这个问题的辅音，并且只匹配小写字母。也许这是如何访问匹配输入的单个字符的问题：一种方法是声明`yytext`为`%array`. 无论如何，你想要的代码是这样的：

```
%{
    int count = 0;
    int consonantPatternCount = 0;
%}
%array
DIGIT [0-9]
CONSONANT [bcdfghjklmnpqrstvwxyz]
%%
{DIGIT}{DIGIT} {count++; printf("d d");}
{CONSONANT}{CONSONANT} { consonantPatternCount++; printf("%c a %c", yytext[0], yytext[1]);} 
%%
int main()
{
      yylex();
      printf( "\n#Report: %d changes made!", count);
      printf("\n#Report: %d consonant changes made", consonantPatternCount);
      return 0;
}
int yywrap()
{
    return 1;
} 
```

# ruby-on-rails-3 - “rails generate controller ControllerName”没有创建默认的 7 个 REST 动作

> ID：10569380
> 
> 赞同：1
> 
> 时间：2012-05-13T04:46:20.057
> 
> 标签：ruby-on-rails-3

如果我跑步，`rails generate controller ControllerName`我会得到一个空控制器？我可以手动将其编辑为我想要的，但为什么会出现这种情况？如果我将选项留空，是否不应该将 7 默认值放在那里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T05:02:07.897

这是控制器生成器的默认行为。如果您想要默认操作，您将需要使用`rails generate scaffold`.

请注意，您还可以将动作名称传递给控制器​​生成器以生成空白动作。这负责设置基本测试/视图/等，但您需要为您以这种方式定义的每个操作编写自己的代码：

```
rails generate controller ControllerName action1 action2 etc 
```

# java - 为什么 Java 的 Date.getTime() 返回一月份的错误响应？

> ID：10569381
> 
> 赞同：2
> 
> 时间：2012-05-13T04:46:21.850
> 
> 标签：java, date

以毫秒为单位计算日期的代码是：

```
//installment date converted to milliseconds
long localDateInstall = installDate.getTime();

//installment date converted to milliseconds
long localDatePay = payDate.getTime(); 
```

在这里我计算这些日期之间的天数：

```
days=Math.abs((localDatePay - localDateInstall))/86400000; 
```

当我想测试它时，我输入`1/Jan/2012`for`localDateInstall`和`1/Feb/2012`for `localDatePay`。结果是：**29 天**。问题是什么？谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-13T04:57:18.883

反例：

```
public static void main(String[] args) throws Exception {
    SimpleDateFormat format = new SimpleDateFormat("d MMM yyyy");
    Date installDate = format.parse("1 Jan 2012");
    Date payDate = format.parse("1 Feb 2012");
    long localDatePay = payDate.getTime();
    long localDateInstall = installDate.getTime();
    long days = Math.abs(localDatePay - localDateInstall) / 86400000;
    System.out.println(days);
} 
```

这工作正常，输出为“31”，正如预期的那样。问题出在你没有告诉我们的地方。在黑暗中射击：您可能正在构建您的测试输入，如下所示：

```
Date installDate = new Date(2012, 1, 1);
Date payDate = new Date(2012, 2, 1); 
```

可悲的是，这在两个方面是错误的。首先，“年份”参数应该是“[年份减去 1900](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#Date%28int,%20int,%20int%29) ”。其次，[一月是第 0 个月，而不是第 1 个月](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#Date%28int,%20int,%20int%29)。使用这两个日期作为输入，您确实会得到 29 的答案，因为您实际上是在询问 3912 年 2 月的天数，这是闰年。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T05:00:25.553

你可以试试：

```
//installment date converted to milliseconds
long localDateInstall=installDate.getTimeInMillis();

//installment date converted to milliseconds
long localDatePay=payDate.getTimeInMillis();

long diff = localDatePay-localDateInstall;

long diffInDays = diff / (24 * 60 * 60 * 1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T05:37:52.233

我认为没有足够的信息继续下去，但这里有一些想法可以追求。

1.  您正在执行整数运算，它不会四舍五入，而是截断任何短于一整天的东西。如果您一天中的结束时间比开始时间早一点，您将失去一整天。

2.  确保时区没有有趣的事情发生。这两个日期是否以相同的方式输入，或者它们是否来自可能附加不同时区的不同来源？

3.  如果您发布每个的实际毫秒值以及您的预期时区，则应该很容易确定两者中的哪一个关闭。

# sublimetext - sublime text 2：检查文件是否是最新的或已更改

> ID：10569387
> 
> 赞同：1
> 
> 时间：2012-05-13T04:48:22.590
> 
> 标签：sublimetext, sublimetext2

如果多人从不同的计算机对同一个文件进行更改，我如何使 sublime text 2 使我的文件保持最新？

如果有人`fileName.txt`在我编辑同一个文件时进行了更改，我不想在保存时覆盖他们的更改。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T20:19:18.897

这听起来像是一个适当的源代码控制系统的工作，而不是文本编辑器。

# mercurial - TortoiseHg 推送到 BitBucket 失败，出现无效参数错误

> ID：10569388
> 
> 赞同：3
> 
> 时间：2012-05-13T04:48:58.723
> 
> 标签：mercurial, tortoisehg, bitbucket

我们将 TortoiseHg 与 BitBucket 一起使用。该项目有两名开发人员远程工作。直到昨天，过去 2 个月里一切都很顺利。由于我提取了最新更新并添加了我的更改，因此我无法再推送到 BitBucket。当我使用 Workbench 推送时，出现以下错误：

中止：推送创建新的远程头 xxxx 提示：您忘记合并了吗？使用 push -f 强制

我没有忘记合并，我所有的更改都已提交并与其他开发人员的更改合并。

我尝试强制推送“hg push -f --traceback”，但也失败了：

中止：无效的参数回溯（最近一次调用最后一次）：**init中的文件“mercurial\revlog.pyo”失败**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T05:33:40.430

您是否尝试过先进行 hg pull ？您的本地存储库中可能没有一些最近的更改，您需要在推送之前合并这些更改。（换句话说，尝试拉/合并/提交，然后推）。

# multithreading - 用于在多线程情况下处理每个方法的多个互斥对象

> ID：10569391
> 
> 赞同：0
> 
> 时间：2012-05-13T04:49:26.770
> 
> 标签：multithreading, c#-4.0, ado.net, thread-safety, mutex

我目前正在使用几种方法来实现一个单例类。每种方法都使用相同的私有字段，该字段实际上是与数据库的连接。在每种方法中，读者都试图敞开心扉。如您所见，这是在整个应用程序范围内共享的单个连接。如果您在阅读器已经打开时尝试在 Ado.Net 中打开阅读器连接，则会发生异常。如果您在打开阅读器后忘记关闭阅读器，则可以打开此案例，但在我的案例中会发生这种情况，因为我使用多个线程来做一些事情。

我的问题是：我必须为每个方法实现不同的互斥对象还是为所有方法共享一个对象就足够了？

我知道单例很少有好的模式。我也知道共享连接不是一个好习惯，但请记住我的项目是一个 winforms 项目并且被认为是遗留项目。我的客户也不想为重新设计应用程序付费。我只想知道在这种情况下应该如何处理互斥锁。

非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T04:55:55.020

你需要一个互斥锁。如果您有多个互斥锁控制单个共享资源（在这种情况下为数据库连接），那么多个线程可以一次访问它，这破坏了互斥锁的意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T04:54:38.977

您需要使用同一个对象锁定所有方法，以便对数据库的每次调用都将一一完成。

您确定不可能在每种方法中创建连接并关闭它吗？我认为这比尝试用锁来修复行为要容易：S

# ruby-on-rails - 尽管进程正在运行，但heroku延迟作业停止，rails

> ID：10569395
> 
> 赞同：2
> 
> 时间：2012-05-13T04:50:09.933
> 
> 标签：ruby-on-rails, heroku, delayed-job

我试图让延迟工作在 Heroku 工作。我一直在关注

[https://devcenter.heroku.com/articles/delayed-job](https://devcenter.heroku.com/articles/delayed-job)和 [https://devcenter.heroku.com/articles/procfile](https://devcenter.heroku.com/articles/procfile)

我在我的根目录上创建了一个 Procfile 并传入

```
worker: rake jobs:work 
```

当我这样做时，我的延迟作业在我的开发机器上工作

```
rake jobs:work
foreman start 
```

但是，在heroku 上似乎找不到我的delayed_jobs。当我跑步时

```
heroku ps 
```

它说

```
Process   State       Command
--------  ----------  ---------------------------------
run.1     up for 27m  bundle exec rails console
web.1     up for 28m  bundle exec rails server -p $PORT
worker.1  up for 28m  rake jobs:work 
```

我做了命令

```
heroku ps:scale worker=1 
```

早些时候（我不认为我必须再做一次......）

只是为了检查我的工作是否正在运行（他们应该这样做）

```
heroku console
irb(main):001:0> Delayed::Job.all 
```

但这又回到了我

```
Delayed::Backend::ActiveRecord::Job Load (1.4ms)  SELECT "delayed_jobs".* FROM "delayed_jobs" => [] 
```

它似乎没有找到delayed_job。

在我的代码中，我执行了类似

```
$index.document(@lesson.id).delay.update_variables({ 0 => new_score}) 
```

delay_job 在我的开发中起作用。

我试图通过做来隔离问题

```
heroku run bundle exec rake jobs:work 
```

然而它吐出的只是……

```
Running bundle exec rake jobs:work attached to terminal... up, run.2
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
[Worker(host:39da7fc7-7b64-49c1-8e8c-36242e705abf pid:7)] Starting job worker 
```

为什么当我尝试运行它时它会停止生产？

谢谢你。

# exception - Task.Status.Faulted - 如何处理异常

> ID：10569399
> 
> 赞同：2
> 
> 时间：2012-05-13T04:50:57.537
> 
> 标签：exception, httpclient, task, asp.net-web-api

我的 ASP.NET Web API 中有以下任务，它将传入的请求保存为文件。它似乎在我的本地工作正常，但在托管服务器上，文件未保存，我的日志显示状态为故障。

据我了解，这与未处理的异常有关。我怎样才能找出这些异常是什么以便解决它们？

```
 // Save file
    MultipartFormDataStreamProvider provider = new MultipartFormDataStreamProvider(HttpContext.Current.Server.MapPath("~/Files"));
    Task<IEnumerable<HttpContent>> task = Request.Content.ReadAsMultipartAsync(provider);

    return task.ContinueWith<string>(contents =>
    {
        string filename = provider.BodyPartFileNames.First().Value;

        FileInfo file = new FileInfo(filename);

        Log.LogMessage("Status: " + task.Status.ToString() + " File Exists: " + file.Exists);

        // Delete excel file when complete.
        File.Delete(filename);

        // Return message to user.
        return "Complete";

    }, TaskScheduler.FromCurrentSynchronizationContext()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T12:19:33.773

您需要再继续查看异常：

```
Task task1 = () => ....;
task1.ContinueWith((t) => if(t.IsFaulted) Trace.WriteLine(t.Exception.ToString()));
return task1; 
```

所以诀窍是仍然返回初始任务，同时仍然定义它的延续。

# spring - 无法找到 Spring Namesp 违规资源：ServletContext 资源

> ID：10569403
> 
> 赞同：4
> 
> 时间：2012-05-13T04:51:08.530
> 
> 标签：spring, security

我正在尝试做一些基本的弹簧安全示例。但是经过大量的尝试和网上的各种建议，仍然无法解决问题。它给了我以下错误。

```
09:54:31,640 ERROR [org.springframework.web.context.ContextLoader] (MSC service thread 1-4) Context initialization failed: org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate Spring Namesp
aceHandler for XML schema namespace [http://www.springframework.org/schema/security]
Offending resource: ServletContext resource [/WEB-INF/springapp-security.xml]

        at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:80) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.error(BeanDefinitionParserDelegate.java:316) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1416) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1409) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:184) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:140) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:111) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125) [org.springframework.web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94) [org.springframework.web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131) [org.springframework.context-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:522) [org.springframework.context-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:436) [org.springframework.context-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385) [org.springframework.web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284) [org.springframework.web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111) [org.springframework.web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.10.Final.jar:]
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.10.Final.jar:]
        at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.0.Final.jar:7.1.0.Final]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [rt.jar:1.6.0_24]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.6.0_24]
        at java.lang.Thread.run(Unknown Source) [rt.jar:1.6.0_24]

09:54:31,796 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/Trial]] (MSC service thread 1-4) Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener:
org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/security]
Offending resource: ServletContext resource [/WEB-INF/springapp-security.xml]

        at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE] 
```

**我正在使用的罐子是**

```
org.springframework.aop-3.1.0.RELEASE.jar
org.springframework.asm-3.1.0.RELEASE.jar
org.springframework.aspects-3.1.0.RELEASE.jar
org.springframework.beans-3.1.0.RELEASE.jar
org.springframework.context-3.1.0.RELEASE.jar
org.springframework.context.support-3.1.0.RELEASE.jar
org.springframework.core-3.1.0.RELEASE.jar
org.springframework.expression-3.1.0.RELEASE.jar
org.springframework.jdbc-3.1.0.RELEASE.jar
org.springframework.jms-3.1.0.RELEASE.jar
org.springframework.orm-3.1.0.RELEASE.jar
org.springframework.test-3.1.0.RELEASE.jar
org.springframework.transaction-3.1.0.RELEASE.jar
org.springframework.web-3.1.0.RELEASE.jar
org.springframework.web.servlet-3.1.0.RELEASE.jar
spring-batch-core-2.1.8.RELEASE.jar
spring-batch-infrastructure-2.1.8.RELEASE.jar
spring-security-acl-3.1.0.RELEASE.jar
spring-security-config-3.1.0.RELEASE.jar
spring-security-core-3.1.0.RELEASE.jar
spring-security-taglibs-3.1.0.RELEASE. 
```

jar spring-security-web-3.1.0.RELEASE.jar

**在 web.xml 我有**

```
<listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/springapp-security.xml</param-value>
    </context-param>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

springapp **-security.xml**是

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:security="http://www.springframework.org/schema/security"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/security
http://www.springframework.org/schema/security/spring-security-3.1.xsd "> 
    <security:http auto-config="true">
        <security:intercept-url pattern="*.htm" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
    </security:http>
    <security:authentication-manager>
        <security:authentication-provider>
            <security:user-service>
                <security:user name="rod" password="koala" authorities="supervisor, teller, user" />
                <security:user name="dianne" password="emu" authorities="teller, user" />
                <security:user name="scott" password="wombat" authorities="user" />
                <security:user name="peter" password="opal" authorities="user" />
            </security:user-service>
        </security:authentication-provider>
    </security:authentication-manager>

</beans 
```

>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:42:37.313

每件事看起来都很好。仔细检查帽子`spring-security-config.jar`真的是正确的！

# tomcat - Tomcat 中嵌入的 OSGi 中的 ClassCastException

> ID：10569406
> 
> 赞同：1
> 
> 时间：2012-05-13T04:52:36.690
> 
> 标签：tomcat, osgi, activemq, embedding, classcastexception

我们有一个在 OSGi 内部运行的框架。我们的其中一个捆绑包使用 ActiveMQ 进行基于 JMS 发布/订阅的通知。此捆绑包将 activemq jar 嵌入捆绑包中（私下）

```
捆绑类路径：.,
 ……
 lib/activemq-all.jar,
 ……

```

所有这些在所有情况下都可以正常工作（除了一种情况 -**嵌入情况**）。

**嵌入案例：**现在我们正在处理应用程序嵌入我们的框架的场景。在其中一个嵌入应用程序开始使用其类路径中的 activemq 之前，这也可以正常工作。这个嵌入应用程序是一个基于 tomcat 的 webapp，并且在 tomcat 的 lib 中有 activemq-all.jar。

我们不会通过片段包导出与 active-mq 相关的任何内容，因此在 tomcat 类路径中对我们的包应该看不到 activemq 类，但它似乎正在发生。

```
引起：java.lang.ClassCastException: org.apache.activemq.transport.tcp.TcpTransportFactory 不能转换为 org.apache.activemq.transport.TransportFactory
在 org.apache.activemq.transport.TransportFactory.findTransportFactory(TransportFactory.java:201)   
... 24 更多

```

我们尝试在创建 ActiveMQ 连接之前/之后设置/重置 ContextClassLoader，这似乎解决了这个问题，但破坏了很多其他东西（围绕我们使用的 Apache Tuscany SDO），所以它不是一个可行的选择。

问题：当完全断开连接时，ActiveMQ 类为什么会在应用程序类路径和捆绑类路径之间发生冲突？如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:21:48.017

因此，如果我理解正确，您可以从 Tomcat webapp 启动嵌入式 OSGi 框架，并且 Tomcat 类路径中的类现在在嵌入式 OSGi 环境中可见。

我想这取决于您为框架提供的类。对于 Felix（我不知道您使用的是哪个 OSGi 实现），您可以使用[框架配置属性](http://felix.apache.org/site/apache-felix-framework-configuration-properties.html)对其进行配置。

也许您的问题与[此](http://wiki.osgi.org/wiki/Why_does_Eclipse_find_javax.swing_but_not_Felix?)和您的应用程序集有关：`org.osgi.framework.bootdelegation=*`

# php - html列表的困难PHP MySQL while循环

> ID：10569407
> 
> 赞同：0
> 
> 时间：2012-05-13T04:52:47.710
> 
> 标签：php, mysql, while-loop, html-lists

我一直在努力解决这个问题，所以我最终决定寻求帮助。我正在尝试编写一个由 mysql 数据库中的信息填充的 html 列表。我正在尝试编写一个 php 循环（或多个循环）来完成此操作。它开始变得复杂，因为列表中有多个节点。我尝试了许多不同的方法，但无法获得预期的结果。任何帮助将不胜感激！

该列表由具有各种“类别”和“子类别”的项目填充。该列表应按 ASC 顺序按客户名称、类别、子类别和零件编号排列。有些项目只有一个类别，没有子类别。有些项目没有类别，应该只是列在客户的名字下。所以列表应该是这样的......

客户
    1 - 类别
        1 - 子类别
                1 - 第 1 部分（包含类别和子类别的项目）
                - 第 2 部分
        - 子类别
                2 -第 3 部分
    - 类别2
        - 第 4 部分（只有一个类别的项目） - 第 5 部分
        -第 6 部分（
    没有类别或子类别的项目
    - 第 7 部分
客户
    2 - 类别
        1 - 子类别 1
                - 第 1 部分（包含类别和子类别的项目）
                - 第 2 部分
        - 子类别2
                -第 3 部分

ETC......

希望这足够清楚。

这是我第一次尝试解决这个问题，它接近了。它只是将物品放在错误的地方（不知道为什么）。

```
 <?php
    $con = mysql_connect("localhost:3306","root","");
    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("pcu_ops", $con);

    $sql_customer="SELECT DISTINCT customer FROM common_parts ORDER BY customer ASC";

    $result_customer=mysql_query($sql_customer,$con);

    if (!mysql_query($sql_customer,$con))
    {
        die('Error: ' . mysql_error());
    }
?>
<table border="0">
    <colgroup>
        <col width="300px" valign="top">
        <col width="90%">
    </colgroup>
    <tr>
        <td valign="top">
            <!-- Add a <div> element where the tree should appear: -->
            <div id="common_parts_tree">
                <ul>
                    <?php
                        while ($row_customer = mysql_fetch_array($result_customer)) {
                            echo '<li class="expanded folder">'.$row_customer['customer'];
                                echo '<ul>';
                                    $customer=$row_customer['customer'];
                                    $sql_category="SELECT DISTINCT category FROM common_parts WHERE customer='$customer' ORDER BY customer ASC";
                                    $result_category=mysql_query($sql_category,$con);
                                    if (!mysql_query($sql_category,$con)) {
                                        die('Error: ' . mysql_error());
                                    }
                                    while ($row_category = mysql_fetch_array($result_category)) {
                                        if ($row_category['category'] != '') {
                                            echo'<li class="expanded folder">'.$row_category['category'];
                                                echo '<ul>';
                                                    $category=$row_category['category'];
                                                    $sql_subcategory="SELECT DISTINCT subcategory FROM common_parts WHERE (customer='$customer' AND category='$category') ORDER BY subcategory ASC";
                                                    $result_subcategory=mysql_query($sql_subcategory,$con);
                                                    if (!mysql_query($sql_subcategory,$con)) {
                                                        die('Error: ' . mysql_error());
                                                    }
                                                    while ($row_subcategory = mysql_fetch_array($result_subcategory)) {
                                                        if ($row_subcategory['subcategory'] != '') {
                                                            echo'<li class="expanded folder">'.$row_subcategory['subcategory'];
                                                                echo '<ul>';
                                                                    $subcategory=$row_subcategory['subcategory'];
                                                                    $sql_pn="SELECT DISTINCT pn FROM common_parts WHERE (customer='$customer' AND category='$category' AND subcategory='$subcategory') ORDER BY pn ASC";
                                                                    $result_pn=mysql_query($sql_pn,$con);
                                                                    if (!mysql_query($sql_pn,$con)) {
                                                                        die('Error: ' . mysql_error());
                                                                    }
                                                                    while ($row_pn = mysql_fetch_array($result_pn)) {
                                                                        $pn=$row_pn['pn'];
                                                                        echo '<li><a href="includes/phpscripts/part_quick_view.php?pn='.$pn.'&customer='.$customer.'" target="contentFrame">'.$pn.'</a>';
                                                                    }
                                                                echo '</ul>';
                                                        }
                                                        else {
                                                            if ($row['subcategory'] == '') {
                                                                $sql_pn="SELECT DISTINCT pn FROM common_parts WHERE (customer='$customer' AND category='$category') ORDER BY pn ASC";
                                                                $result_pn=mysql_query($sql_pn,$con);
                                                                if (!mysql_query($sql_pn,$con)) {
                                                                    die('Error: ' . mysql_error());
                                                                }
                                                                while ($row_pn = mysql_fetch_array($result_pn)) {
                                                                    $pn=$row_pn['pn'];
                                                                echo '<li><a href="includes/phpscripts/part_quick_view.php?pn='.$pn.'&customer='.$customer.'" target="contentFrame">'.$pn.'</a>';
                                                                }
                                                            }
                                                        }
                                                    }
                                                echo '</ul>';
                                        }
                                        else {
                                            echo '<li><a href="includes/phpscripts/part_quick_view.php?pn='.$pn.'&customer='.$customer.'" target="contentFrame">'.$pn.'</a>';
                                        }
                                    }
                                echo '</ul>';
                        }
                    ?>
            </div>
        </td>
        <td>
            <iframe src="" name="contentFrame" width="100%" height="500" scrolling="yes" marginheight="0" marginwidth="0" frameborder="0">
                <p>Your browser does not support iframes</p>
            </iframe>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <center>
                <form id="rcv_common_parts">
                <input type="hidden" id="pn" name="pn"/>
                <input type="hidden" id="customer" name="customer"/>
                <table class="table">
                    <tr>
                        <td>Quantity to Receive:</td>
                        <td><input type="text" name="qty" /></td>
                    </tr>
                </table>
                </form>
            </center>
        </td>
    </tr>
</table> 
```

这是我最近的尝试。我放弃了第一种方法并开始尝试使用此文件。仍然没有任何运气。

```
<?php
    $con = mysql_connect("localhost:3306","root","");
    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("pcu_ops", $con);

    $sql="SELECT * FROM common_parts ORDER BY customer ASC, category ASC, subcategory ASC, pn ASC";

    $result=mysql_query($sql,$con);

    if (!mysql_query($sql,$con))
    {
        die('Error: ' . mysql_error());
    }
?>
<table border="0">
    <colgroup>
        <col width="300px" valign="top">
        <col width="90%">
    </colgroup>
    <tr>
        <td valign="top">
            <!-- Add a <div> element where the tree should appear: -->
            <div id="common_parts_tree">
                <ul>
                    <?php
                        $row = mysql_fetch_array($result);
                            echo '<li class="expanded folder">'.$row['customer'];
                                echo '<ul>';
                                    while (($row['category'] != NULL) && ($row['subcategory'] != NULL)) {
                                        echo '<li class="expanded folder">'.$row['category'];
                                            echo '<ul>';
                                                echo '<li class="expanded folder">'.$row['subcategory'];
                                                    echo '<ul>';
                                                        echo '<li><a href="includes/phpscripts/part_quick_view.php?pn='.$row['pn'].'&customer='.$row['customer'].'" target="contentFrame">'.$row['pn'].'</a>';
                                                    echo '</ul>';
                                            echo '</ul>';
                                    }
                                echo '</ul>';
                    ?>
            </div>
        </td>
        <td>
            <iframe src="" name="contentFrame" width="100%" height="500" scrolling="yes" marginheight="0" marginwidth="0" frameborder="0">
                <p>Your browser does not support iframes</p>
            </iframe>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <center>
                <form id="rcv_common_parts">
                <input type="hidden" id="pn" name="pn"/>
                <input type="hidden" id="customer" name="customer"/>
                <table class="table">
                    <tr>
                        <td>Quantity to Receive:</td>
                        <td><input type="text" name="qty" /></td>
                    </tr>
                </table>
                </form>
            </center>
        </td>
    </tr>
</table> 
```

当然希望有人能帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T06:06:37.430

您应该实现递归算法。

数据库提示...仅包含类别和部分的简单示例：

```
- 类别1
        - 子类别 1
                - 第1部分
                - 第2部分
        - 子类 2
                - 第 3 部分
    - 类别2
        - 子类别 3
                - 第 4 部分
        - 第 5 部分
        - 第 6 部分
    - 第 7 部分
    - 第 8 部分

```

```
分类表
id 名称 父 user_id
1 类 1 0 1
2 类 2 0 1
3 子类别 1 1 1
4 子类别 2 1 1
5 子类别 3 2 1
```

```
零件表
名称类别
第 1 部分 3
第 2 部分 3
第 3 部分 4
第 4 部分 5
第 5 部分 2
第 6 部分 2
第 7 部分 0
第 8 部分 0
```

你明白了...

然后进行表演：

```
 $query_user = mysql_query("select * from users",$con);
while($row_user = mysql_fetch_array($query_user)) {
    echo "<ul>".$row_user['id'];
    show_category($row_user['id'],0);
    echo "</ul>";
}
function show_category($user,$parent){
    global $con;
    echo "<ul>";
    $query_cat = mysql_query("select * from categories where user_id=".$user." and parent=".$parent,$con);
    while($row_cat = mysql_fetch_array($query_cat)) {
        echo "<li>".$row_cat['name'];
        show_category($user,$row_cat['id']);
        echo "</li>";       
    }
    $query_parts = mysql_query("select * from parts where category=".$parent,$con);
    while($row_parts = mysql_fetch_array($query_parts)) {
        echo "<li>".$row_parts['name']."</li>";
    }
    echo "</ul>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T07:50:24.113

This is going to be a long answer but I think I can help you. First let's get a couple of things straight about how you will need to setup your database. I know your example says 'customers' but for my example below I will call them 'users':

1) You have a users table. That table should have an 'id' field that is an int 11, primary key, auto-increment. You will have more fields but the 'id' is all I am concerned with.
2) You need a 'categories' table to determine if the category is a "parent" category or "child" category. The structure should basically be something like 'id' (int 11, primary key, auto-increment), 'name' (varchar), 'user_id' (int 11), 'parent_id' (int 11). In your requirements above, Category 1, Category 2, etc... are "parent" categories so the parent_id should be 0 meaning they have no parent. For subcategories, you should use the id of the category that is it a subcategory of. For example if Category 1 has an id of 1, a sub-category of that category would have a parent_id of 1\.
3) Finally you have a parts table. Again have an 'id' (int 11, primary key, auto-increment), 'user_id' (int 11), and a 'category_id' (int 11). You can obviously put other fields here but those are the three I am concerned with. If the part is not in a category, category_id is 0, otherwise use the id of the category or subcategory.

That gives you a sound database structure for mapping relationships for users, categories, and parts. Now, how do you get all that data into something usable? An array. Build an associative array that helps you display the data like you want it. Without writing a million lines of PHP, here is the gist.

```
$arr_user = array();
$sql = mysql_query('SELECT * FROM users ORDER BY name ASC', $con);
while($user = mysql_fetch_object($sql))
{
    $arr_user[$user->id]['name'] = $user->name;
    $sql2 = mysql_query('SELECT * FROM parts WHERE user_id='.$user->id.' AND category_id=0 ORDER BY name ASC', $con);
    while($part = mysql_fetch_object($sql2))
    {
        $arr_user[$user->id]['parts'][$part->id] = $part->name;
    }
    $sql3 = mysql_query('SELECT * FROM categories WHERE user_id='.$user->id.' AND parent_id=0 ORDER BY name', $con);
    while($category = mysql_fetch_object($sql3))
    {
        $sql4 = mysql_query('SELECT * FROM parts WHERE user_id='.$user->id.' AND category_id='.$category->id.' ORDER by name', $con);
        while($part = mysql_fetch_object($sql4))
        {
            $arr_user[$user->id]['category'][$category->id]['name'] = $category->name;
            $arr_user[$user->id]['category'][$category->id]['parts'][$part->id] = $part->name;
        }
        $sql5 = mysql_query('SELECT * FROM categories WHERE parent_id='.$category->id.' ORDER BY name', $con);
        while($subcat = mysql_fetch_object($sql5))
        {
            $sql6 = mysql_query('SELECT * FROM parts WHERE category_id='.$subcat->id.' ORDER BY name', $con);
            while($part = mysql_fetch_array($sql6))
            {
                $arr_user[$user->id]['category']['subcat'][$subcat->id]['name'] = $subcat->name;
                $arr_user[$user->id]['category']['subcat'][$subcat->id]['parts'][$part->id] = $part->name;
            }
        }
    }
}

if( sizeof( $arr_user ) )
{
    foreach( $arr_user as $k=>$v )
    {
        echo $v['name']; //echo the user's name
        if( isset( $v['category'] ) && sizeof( $v['category'] ) )
        {
            foreach( $v['category'] as $ck=>$cv )
            {
                echo $cv['name']; //echo category name
                if( isset( $cv['subcat']) && sizeof( $cv['subcat'] ) )
                {
                   foreach( $cv['subcat'] as $sk=>$sv )
                   {
                       echo $sv['name']; //echo subcat name
                       if( isset( $sv['parts'] ) && sizeof( $sv['parts'] ) )
                       {
                           foreach( $sv['parts'] as $spk=>$spv )
                           {
                               echo $spv; //echo part name
                           }
                       }
                   }
                }
                if( isset($cv['parts']) && sizeof($cv['parts']) )
                {
                    foreach( $cv['parts'] as $cpk=>$cpv )
                    {
                        echo $cpv; //echo part name
                    }
                }
            }
        }
        if( isset($v['parts']) && size($v['parts']) )
        {
            foreach( $v['parts'] as $pk=>$pv )
            {
                echo $pv;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T05:22:19.060

您发布的第一个代码似乎还可以，但是太长了，我无法弄清楚。基本上你只需要一个while循环内的while循环，等等所有类别，子类别等......

我不知道您的数据库结构，因此您可能需要更改一些列名称，但除此之外应该可以：

```
$query1 = "the customer query";
while($customerRow = mysql_fetch_array(mysql_query($query1,$con))) {
    echo '<ul><li>';
    echo $customerRow['customer'];
    $query2 = "the category query";
    while($categoryRow = mysql_fetch_array(mysql_query($query2,$con))) {
        echo '<ul><li>';
        echo $categoryRow['category'];
        $query3 = "the subcategory query";
        while($subcategoryRow = mysql_fetch_array(mysql_query($query3,$con))) {
            echo '<ul><li>';
            echo $subcategoryRow['subcategory'];
            echo '</li></ul>';
        }
        echo '</li></ul>';
    }
    echo '</li></ul>';
} 
```

# objective-c - 将 CTFrame 分解为 CTLines

> ID：10569409
> 
> 赞同：3
> 
> 时间：2012-05-13T04:52:57.543
> 
> 标签：objective-c, core-text

我有以下代码在矩形中绘制属性字符串：

```
CGContextRef context = UIGraphicsGetCurrentContext();
    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((__bridge CFAttributedStringRef)string);

    // left column form
    CGMutablePathRef leftColumnPath = CGPathCreateMutable();
    CGPathAddRect(leftColumnPath, NULL, CGRectMake(rect.origin.x, -rect.origin.y,rect.size.width, self.bounds.size.height));

    // left column frame
    CGContextSetTextMatrix(context, CGAffineTransformIdentity);
    CGContextTranslateCTM(context, 0, self.bounds.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);   
    CTFrameRef leftFrame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), leftColumnPath, NULL);
    CTFrameDraw(leftFrame, context); 
```

这里一切正常，但我需要更好地控制每一行。因此，我不想绘制框架，而是分别绘制每条线。所以我尝试使用 CTFrameDraw 来代替：

```
CFArrayRef linesArray =  CTFrameGetLines(leftFrame);
    for (CFIndex i = 0; i < CFArrayGetCount(linesArray); i++){
        CTLineRef line = CFArrayGetValueAtIndex(linesArray, i);
        CTLineDraw(line, context);
} 
```

但是，这与绘制框架的结果不同。我是 Core Text 的新手，所以我还应该做更多的事情来划清界限吗？当前这个循环执行了几次，但是屏幕底部只画了一条线（而不是用 CTFrameDraw 在顶部）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T02:14:26.163

`CGContextSetTextPosition(context, x, y)`在之前插入`CTLineDraw`并根据需要更改 x 和 y（不要忘记`y`反转）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:26:04.337

示例代码摘自： [https ://github.com/BigZaphod/Chameleon/blob/master/UIKit/Classes/UIStringDrawing.m](https://github.com/BigZaphod/Chameleon/blob/master/UIKit/Classes/UIStringDrawing.m)

```
 if (lines)
 {
     CFIndex numberOfLines = CFArrayGetCount(lines);

    numberOfLines = 3;

    const CGFloat fontLineHeight = font.lineHeight;
    CGFloat textOffset = 0;

    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextSaveGState(ctx);
    CGContextTranslateCTM(ctx, rect.origin.x, rect.origin.y+font.ascender);
    CGContextSetTextMatrix(ctx, CGAffineTransformMakeScale(1,-1));

    for (CFIndex lineNumber=0; lineNumber<numberOfLines; lineNumber++) {
        CTLineRef line = CFArrayGetValueAtIndex(lines, lineNumber);
        float flush = 0.5;

        switch (alignment) {
            case UITextAlignmentCenter: flush = 0.5;    break;
            case UITextAlignmentRight:  flush = 1;      break;
            case UITextAlignmentLeft:
            default:                    flush = 0;      break;
        }

        CGFloat penOffset = CTLineGetPenOffsetForFlush(line, flush, rect.size.width);
        CGContextSetTextPosition(ctx, penOffset, textOffset);
        CTLineDraw(line, ctx);
        textOffset += fontLineHeight;
    }

    CGContextRestoreGState(ctx);

    CFRelease(lines);
} 
```

# php - 有没有像 smush.it 这样的 php 脚本来优化我网站上的本地图像？

> ID：10569410
> 
> 赞同：4
> 
> 时间：2012-05-13T04:53:00.240
> 
> 标签：php, image, optimization, compression

我已经看到可以使用 smush.it 为您的网站优化图像的功能，但它们仍然调用实际的 yahoo smushit 服务器。

有没有这样的脚本可以在用户上传后在本地安装以压缩图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:28:37.870

如果你在一个 linux 机器上，有[http://sourceforge.net/projects/littleutils/](http://sourceforge.net/projects/littleutils/)它提供

1.  包括几个基本的文件属性查询实用程序。
2.  包括几个文件重命名实用程序。包括几个无损图像文件重新压缩器。
3.  包括几个压缩文件再压缩器。
4.  包括一个重复的文件查找实用程序。
5.  包括一个安全的临时文件创建实用程序。

如果您正在运行 wordpress，甚至还有一个方便的花花公子插件，可以使用它，[http://wordpress.org/extend/plugins/cw-image-optimizer/](http://wordpress.org/extend/plugins/cw-image-optimizer/)

*我没有使用上述任何一个链接，但我计划在重建当前服务器时使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T10:19:31.920

我最近 fork 了一个 PHP Image resize 脚本，你可以[在 GitHub 上](https://github.com/whizzzkid/phpimageresize)找到它。这基本上可以帮助您动态减小图像的大小并为您缓存它。因此，这可以根据加载的图像数量改善任何特定页面的加载时间。

例如，在[我的主页](http://nishantarora.in/)上，我从 facebook cdn 加载了大约 20 张图片作为标题。现在由于图像很大，可以说超过 500x500，我加载了很多开销，只是使用标签的宽度属性重新调整它们的大小。所以我固定宽度并在页面加载时动态调整它们的大小。

因此，早些时候页面缓存的平均大小为 2.8mb，这被降低了大约 1mb，从而为我节省了每次加载时的服务器带宽，而且加载时间要快得多。

用法很简单，万一有不清楚的地方还是ping！

希望我有所帮助！PS：我正在尝试减少损失的压缩，这将进一步减小图像大小。让我们看看我得到了什么！

# c++ - RE同时找到第N个平方自由半素数

> ID：10569414
> 
> 赞同：0
> 
> 时间：2012-05-13T04:54:30.440
> 
> 标签：c++, algorithm, math

我试图找到第 n 个自由半素数。（N <= 2 * 10^6）。我有以下代码来尝试这样做。我在这里不断收到运行时错误，我不知道为什么。

这是我所做的。

```
#include <cstdio>
#include <cstring>
#include <algorithm>
using namespace std;
#define N 3000000

int main()
{
    bool* prime = new bool[N];
    int* primes = new int[N];
    int* semiprimes = new int[2000005];

    for(int i=0; i < N ; i++) prime[i] = true;
    int cnt = 0;
    for(int i=2 ; i < N ; i++)
    {
        if(prime[i])
        {
            primes[cnt++] = i;
            for(int j = i; j < N ; j+= i)
                prime[j] = false;
        }
    }

    int i, j, k = 1;
    int p, q, current_limit;
    int target = 2000000;
    for (i = 0, p = primes[i]; p < target; i++)
    {
        current_limit = target/p;
        for (j = i + 1, q = primes[j]; q <= current_limit; j++)
        {
            k++;
            semiprimes[k++] = p*q;
        }
    }
    printf("%d\n",k);

    int t;

    scanf("%d",&t);
    int n;
    while(t--)
    {
        scanf("%d",&n);
        printf("%d\n",semiprimes[n]);
    }

    delete[] prime;
    delete[] semiprimes;
    delete[] primes;

    return 0;
} 
```

有人可以告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T05:00:59.830

您正在尝试在堆栈中分配具有数百万个元素的多个数组，这通常限制为几兆字节。你应该在堆上分配，使用类似的东西：

```
bool *prime = new bool[N];
int *primes = new int[N];
int *semiprimes = new semiprimes[2000005];

// Do everything you need...

delete[] prime;
delete[] primes;
delete[] semiprimes; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T06:31:09.287

您可能不希望在以下位置进行双倍增量`k`：

```
 for (j = i + 1, q = primes[j]; q <= current_limit; j++)
    {
        k++;
        semiprimes[k++] = p*q;
    } 
```

这意味着仅使用数组的所有其他元素。您可能还应该检查您的数组边界（例如 的值`k`）是否超出限制。

# java - 在java代码中放置一个html链接

> ID：10569420
> 
> 赞同：3
> 
> 时间：2012-05-13T04:55:31.303
> 
> 标签：java, html

我是java编码的新手。我有一个可以发送邮件的应用程序，用 Java 实现。我想在邮件中放置一个 HTML 链接，但是当我放置一个 html 链接时，它会显示错误消息；即使一切正确，也丢失了。

```
String msgbody = "This is a reminder mail"; 
String link = "<a href="http://abcd.efg.com" target="_blank">http://abcd.efg.com</a>"; 
msgbody = msgbody + link; 
```

如果我使用这样的字符串有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T04:57:40.833

您需要在字符串文字中转义引号。

代替

```
String link = "<a href="http://abcd.efg.com" target="_blank">http://abcd.efg.com</a>"; 
```

尝试

```
String link = "<a href=\"http://abcd.efg.com\" target=\"_blank\">http://abcd.efg.com</a>"; 
```

有关详细信息，请参阅[“字符”](http://docs.oracle.com/javase/tutorial/java/data/characters.html)

> ### 转义序列
> 
> 以反斜杠 ( `\`) 开头的字符是转义序列，对编译器具有特殊含义。下表显示了 Java 转义序列：
> 
> ...
> 
> 当在 print 语句中遇到转义序列时，编译器会相应地解释它。例如，**如果要将引号放在引号内**，则必须在内部引号上使用转义序列 , `\"`。打印句子
> 
> `She said "Hello!" to me.`
> 
> 你会写
> 
> ```
> System.out.println("She said \"Hello!\" to me."); 
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T05:03:38.787

您可以使用上面回答的转义方法，也可以使用单引号。如下：

```
String link = "<a href='http://abcd.efg.com' target='_blank'>http://abcd.efg.com</a>"; 
```

单引号适用于 HTML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-08T09:06:25.560

使用[multiLine Strings](https://stackoverflow.com/a/50155171/2891692)包含在 JDK 15 中：

```
String msgbody = "This is a reminder mail";
String link = """
<a href="http://abcd.efg.com" target="_blank">http://abcd.efg.com</a>""";
msgbody = msgbody + link; 
```

# compiler-construction - 如何从 C 或 C++ 编译 Game Boy ROM

> ID：10569423
> 
> 赞同：2
> 
> 时间：2012-05-13T04:56:13.067
> 
> 标签：compiler-construction, rom, gameboy

我需要在 Windows 中编译一个 Game Boy ROM。这是怎么做的？我在谷歌上到处找，只发现死链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-09T14:38:38.000

那里有很多不同的选择。首先，您需要决定您是使用汇编还是 C 进行编程。到目前为止，C 是更容易的选择，尤其是如果您以前从未使用过汇编。对于下面的示例，我假设您使用 GBDK ( [http://gbdk.sourceforge.net/](http://gbdk.sourceforge.net/) ) 从 C 编译。

这是一个示例构建命令。我假设您使用的是 linux 环境，并且您已将开发工具包放入 /opt 但只需将正确的位置替换为 lcc 或 lcc.exe 可执行文件：

```
/opt/gbdk/bin/lcc -Wa-l -Wl-m -o output.gb input.c 
```

这应该很好用，但让我分解一下，以便您了解*为什么*要发送这些论点。

（`-W`区分大小写）允许您向汇编器、链接器或编译器发送参数：

第一个参数 - `-Wa-l`- 将参数发送给汇编器`-l`，以便让它生成一个列表输出文件（例如，与目标文件相反）。

第二个参数 -`-Wl-m`将参数发送给链接器`-m`，以生成映射文件（出于各种原因很有用）。

第三个参数是`-o`，它将生成构建的输出二进制文件 (ROM)。您可能希望它以 .gb 结尾，因为这是您的模拟器或闪存车将运行的实际文件。

最后，您需要指向您的源代码。非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-12T05:25:43.633

此页面上有一个工作链接：

[GameBoy 编程和开发 - Loirak 开发](http://www.loirak.com/gameboy/)

首先，您必须下载这些编译器文件：

agb-win-binutils-r4.zip (2.3MB)

agb-win-core-r5.zip (481kB)

agb-win-gcc-r4.zip (2.4MB)

agb-win-newlib-r4.zip (3.8MB)

这些文件可以在[这里](https://sourceforge.net/projects/devkitadv/files/Windows/Release%204/)找到。

只有“agb-win-core-r5.zip”在“Release 5”部分。

下载这些文件后，将它们解压缩到您的操作系统目录中。例如：- `'C:\'`。这将创建另一个名为“devkitadv”的文件夹。在记事本中创建一个“start.bat”文件并添加以下代码（如果您使用的是 Windows XP 或更高版本）：

```
set PATH=c:\devkitadv\bin;%PATH%
cmd 
```

将其保存在“devkitadv”目录中。接下来，在记事本中创建一个“make.bat”文件，然后键入以下代码：

```
set path=C:\devkitadv\bin;%path%
gcc -o <file_name>.elf <file_name>.c -lm
objcopy -O binary <file_name>.elf <file_name>.gb
pause 
```

将其保存在程序目录中后，运行“make.bat”程序。这应该会创建一个已编译的 ROM 文件以及一个“.elf”文件。您可以使用游戏模拟器 VisualBoy Advance 来测试您的 ROM 文件。希望这可以帮助。

# iphone - 使用 IBAction 插入数据抛出异常

> ID：10569424
> 
> 赞同：0
> 
> 时间：2012-05-13T04:56:20.197
> 
> 标签：iphone, ios, core-data

我想创建一个按钮，即“完成”，按下时，将所有数据保存到核心数据中，我正在使用下面的代码

```
- (IBAction)done:(id)sender
{

    // Create a new instance of the entity managed by the fetched results controller.
    NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
    NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];
    NSManagedObject *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];

    // If appropriate, configure the new managed object.
    // Normally you should use accessor methods, but using KVC here avoids the need to add a custom class to the template.

    NSString *name = _nameField.text;
    NSString *amount = _amountField.text;

    [newManagedObject setValue:[NSDate date] forKey:@"date"];
    [newManagedObject setValue:name forKey:@"name"];
    [newManagedObject setValue:amount forKey:@"amount"];
    [newManagedObject setValue:category forKey:@"category"];

    // Save the context.
    NSError *error = nil;
    if (![context save:&error]) {
        /*
         Replace this implementation with code to handle the error appropriately.

         abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
         */
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
    [self.delegate addContentViewControllerDidSave:self];
} 
```

这是获取的结果控制器：

```
#pragma mark - fetchedResultsController

- (NSFetchedResultsController *)fetchedResultsController {

    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription
                                   entityForName:@"Item" inManagedObjectContext:managedObjectContext];
    [fetchRequest setEntity:entity];

    NSSortDescriptor *sort = [[NSSortDescriptor alloc]
                              initWithKey:@"date" ascending:NO];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];

    [fetchRequest setFetchBatchSize:20];

    NSFetchedResultsController *theFetchedResultsController =
    [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                        managedObjectContext:managedObjectContext sectionNameKeyPath:nil
                                                   cacheName:@"Root"];
    self.fetchedResultsController = theFetchedResultsController;
    //_fetchedResultsController.delegate = self;

    return _fetchedResultsController;

}

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    // The fetch controller is about to start sending change notifications, so prepare the table view for updates.
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath {

    UITableView *tableView = self.tableView;

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:[NSArray
                                               arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:[NSArray
                                               arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id )sectionInfo atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type {

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    // The fetch controller has sent all current change notifications, so tell the table view to process all updates.
    [self.tableView endUpdates];
} 
```

我得到了错误：

> 2012-05-13 11:26:08.341 测试[818:fb03] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“+entityForName：找不到实体名称“项目”的 NSManagedObjectModel

但我检查了实体名称和 NSManagedObject 子类，它们在代码中是相同的

我试图清理和重建并重置模拟器但没有工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T09:38:55.360

尝试从模拟器中删除应用程序，清理并重建它

# database - 6 数据库中的主键

> ID：10569425
> 
> 赞同：1
> 
> 时间：2012-05-13T04:56:25.523
> 
> 标签：database, primary-key

请问我可以在我的数据库项目中有 6 个主键吗？我刚刚开始创建我的数据库项目，并且知道一和二是可能的，但不确定是六。请帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T05:34:31.653

多主键是什么意思？你可以解释吗？如果在数据库中您要询问多个主键，那么您可以占用每个表的主键。但在同一个表中，两个或多个主键是不可能的。

一张表只能有一个主键和多个唯一键，这将是您的复合键。

示例：-员工表

```
 EmpID(Not null)   ManagerID(null)
     001               001
     002               002 
```

这里 EmpId 是您的主键，经理 ID 是您的复合键。

像这样，您可以使表格的列独一无二。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T05:02:15.290

当你说不止一个时，它就变成了一个复合键。从技术上讲，您可以拥有一个包含多于一列的复合键。但我真的很想知道这样一个用例是什么，它满足了在表中将 6 个键作为复合键的要求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T05:16:17.757

我猜你是想问如何在一个表中拥有多个主键，而不是在数据库中。（严格来说，这使它成为一个复合键）。

你当然可以做到这一点。例如，mysql中的语法是：

```
CREATE TABLE tbl_name (
  col1 int,
  col2 int,
  col3 int,
  col4 int,
  col5 int,
  col6 int,
  col7 int,
  col8 int,
  col9 int,
  PRIMARY KEY (col1, col2, col3, col4, col5, col6)); 
```

话虽如此，除非您真的知道自己在做什么，否则这可能不是您应该做的。我当然曾使用过具有大型复合键的非常复杂的业务模型。

（例如，一个客户有很多表，组合键中有 5 个字段，例如，代表某些库存/订购行项目的 salesOrganizationNumber、salesRepNumber、locationId、styleNumber、styleType。）

但是您的问题是如此基本，我怀疑您可能应该问一个关于如何设计模式的更详细的示例问题，您可能会发现您的主键会小得多。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-13T05:25:11.857

您可以在*数据库*中拥有与表一样多的主键 - 每个表允许一个主键。

当然，每个表可以有多个*索引*，但它们不被视为主键。

您还可以从多列（任意多列）构造主键，但这仍然是一个主键，只是一个复合主键。

它与多个主键有很大不同，因为前者允许复制键的复合部分，只要完整的键是唯一的。后者（如果允许）将要求每个部分都是唯一的，因为这是主键的属性。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-13T08:33:22.020

是的，每个表可以有多个键，每个键中可以有多个属性。根据定义，每个键都必须是*不可约*的，这意味着它包含保持该键唯一性所需的最小列集。

根据您的评论，我怀疑您实际上是在询问具有多个属性而不是多个键的 ONE 键。区别很重要，你应该明白这一点。您可能需要考虑学习一本书或参加有关数据库设计基础的课程，以帮助您回答此类问题。

# c# - 如何提取 LinkedListNode 来自链表

> ID：10569430
> 
> 赞同：9
> 
> 时间：2012-05-13T04:58:51.713
> 
> 标签：c#, casting, linked-list, .net-3.0

我有一个 LinkedList 用于跟踪发送到此类的连续数字。（我最终想找到丢失的数字）。

我现在需要使用方法[range.AddAfter(recentNode,someNewNode)](http://msdn.microsoft.com/en-us/library/0hxfc7s5%28v=vs.80%29)，但我不能通过强制转换来做到这一点。我错过了什么？

```
class ContiguousData 
{
    LinkedList<ContiguousDataValue> ranges = new LinkedList<ContiguousDataValue>();

    public void AddValue(int val)
    {
        LinkedListNode<ContiguousDataValue> recentNode = null;

        foreach (var range in ranges)
        {
            if (val > range.UpperInt)
            {
                if (val == range.UpperInt + 1)
                    range.UpperInt = val;
                else
                {
                    if (recentNode == null)
                        ranges.AddFirst(new ContiguousDataValue() { UpperInt = val, LowerInt = val });
                    else
                        ranges.AddAfter(recentNode, new ContiguousDataValue() { UpperInt = val, LowerInt = val });
                }
                break;
            }
            else if (val < range.LowerInt)
            {
                if (val == range.LowerInt - 1)
                    range.LowerInt = val;
                else
                {
                    // do  more logic (incomplete)
                }
            }

           // Compiler error
            recentNode = (LinkedListNode<ContiguousDataValue>)range;
        }

        if (ranges.Count == 0)
        {
            ranges.AddFirst(new ContiguousDataValue() { UpperInt = val, LowerInt = val });
            return;
        }
    }

    internal class ContiguousDataValue
    {
        public int UpperInt { get; set; }
        public int LowerInt { get; set; }
    }
} 
```

由于强制转换不起作用，我如何转换`range`为 a `LinkedListNode<T>`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-13T05:18:58.477

我想你正在寻找；

```
var ranges = new LinkedList<ContiguousDataValue>();

for (var recentNode = ranges.First;
     recentNode != null;
     recentNode = recentNode.Next)
{
  var range = recentNode.Value; 
  ranges.AddAfter(recentNode,someNewNode);
} 
```

# xslt - 如何将变量从javascript传递到xsl

> ID：10569431
> 
> 赞同：1
> 
> 时间：2012-05-13T04:59:29.660
> 
> 标签：xslt

我有一个如下所示的 xml 文件，我想通过引用它的 URL 过滤掉目标记录，比如*http://localhost/rc.xml?rid=2*，然后网络浏览器将显示所有 rcid=2 的记录

```
 <?xml version="1.0">

    <?xml-stylesheet type="text/xsl" href="rc.xsl" ?>

    <RInfo "Location="KLN">
    <Info rcid="1" >1

    <RCHNo>1</RCHNo>

        <BrandNo>J252</BrandNo>

<Age>6</Age>

    </Info>
    <Info rcid="1" >1

<RCHNo>2</RCHNo>

<BrandNo>J132</BrandNo>

<Age>6</Age>

    </Info>
    <Info rcid="2" >2
<RCHNo>1</RCHNo>

<BrandNo>K152</BrandNo>

<Age>3</Age>

    </Info>
    <Info rcid="2" >2
<RCHNo>2</RCHNo>

<BrandNo>K152</BrandNo>

<Age>4</Age>

    </Info>
    </RInfo> 
```

我在下面有一个 xsl 废料，我想做的是通过 javascript 获取 url 参数并对其进行按摩以检索“=”之后的值

```
 <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"

    xmlns:xalan="http://xml.apache.org/xslt"

    xmlns:my-ext="ext1" 

    extension-element-prefixes="my-ext" 

    version="1.0">

 <xsl:output method="xml"/>
      <xalan:component prefix="my-ext" elements="getrid">
<xalan:script lang="javascript">
<![CDATA[
    function getrid() {
      var ridstr= window.location.toString().split("=");
      //alert ("2");
      return ridstr[1];
      }
]]>
     </xalan:script>
 </xalan:component>
 ::::
 ::::
 <xsl:if test="@rcid=my-ext:getrid"> 
```

# c++ - 指针包含什么类型的数据

> ID：10569433
> 
> 赞同：0
> 
> 时间：2012-05-13T04:59:56.510
> 
> 标签：c++, pointers, memory, memory-address

我写了以下代码

```
int num =   3;
int *ptr = &num;

cout << *ptr << " " << ptr << endl; 
```

并得到以下输出。

```
3 0x7fff5fbff43c 
```

我想知道这是什么类型的数据。

> 0x7fff5fbff43c

是吗

一个。有符号浮点数据

湾。有符号整数数据

C。无符号浮点数据

d。无符号整数数据

e. 签名字符数据

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T05:01:50.530

这些都不是——它是一个指向整数的指针，它是一种不同于在其描述中包含“数据”一词的任何类型的野兽。

这`0x7fff5fbff43c`仅仅是一个指针的*数字解释*，它是一个以 base-16 打印的无符号整数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T05:02:57.067

数据类型为`int *`。这不是你提到的任何事情。您也许可以将其转换为其中之一；但是，您是否可以这样做是未定义的，并且可能因平台和编译器而异。

为了显示，ostream`<<`将转换为字符串。这个字符串不直接对应一个类型；`operator<<`调用`ostream`函数以将字符数据作为单独的字符、字节串或它们的组合传递。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-13T05:06:10.743

它代表一个内存地址，而不是一个变量。所以它是无类型的。但是你可以给它一个“间接类型”，这意味着这个指针指向的内存确实有一个类型（所以你可以有指向 int、chars、结构等的指针）。

阅读[间接](http://en.wikipedia.org/wiki/Indirection)，这是一个有趣的概念。

# javascript - 创建一个按钮，单击时将隐藏其他元素

> ID：10569434
> 
> 赞同：-2
> 
> 时间：2012-05-13T05:00:18.787
> 
> 标签：javascript, css

> **可能重复：**
> [javascript 隐藏/显示元素](https://stackoverflow.com/questions/6242976/javascript-hide-show-element)
> [如何在 HTML 中单击时隐藏或显示 div](https://stackoverflow.com/questions/10222797/how-to-hide-or-show-div-on-click-in-html)

我有一个[博客](http://stramaxon.blogspot.com/)。在右侧边栏上，有几个小工具，但我想制作一个隐藏特定小工具或 div 元素的按钮，我只需要一个想法，我将自己设置 div 元素的样式和类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T05:06:47.113

```
<div onclick="document.getElementById('tohide').style.visibility = 'hidden';"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T05:08:45.743

这是一个简单的例子[http://jsfiddle.net/qRwDr/](http://jsfiddle.net/qRwDr/)

请详细解释我您希望它如何工作，我会帮助您。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-13T05:10:22.287

您可以使用 jquery 来实现您的要求，

```
$('button').on('click', function(){
    // perform something for eg :
    $('div').hide();
}); 
```

您可以访问 www.jquery.com 了解更多详情。

# ruby-on-rails - 嵌套资源的参数名称是什么

> ID：10569437
> 
> 赞同：3
> 
> 时间：2012-05-13T05:00:53.873
> 
> 标签：ruby-on-rails, ruby, nested-forms, restful-url

我有这样的嵌套资源

```
resources :profiles do
    resources :albums do
      resources :images 
    end
  end
match ':username' => "profiles#show", :as => 'profile' 
```

例如，特定图像的 url 是

```
http://localhost:3000/profiles/Azzurrio/albums/4/images/1 
```

我不能在模板中使用个人资料用户名，当我使用 params[:username] 时它不起作用，所以谁能告诉我如何处理这个参数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T05:09:46.267

[这个页面](http://guides.rubyonrails.org/routing.html)（寻找“嵌套路由”）告诉你你想要什么。

简而言之，如果你有上面定义的嵌套资源结构，那么 url 将包含这个结构：

`profiles/:profile_id/albums/:album_id/images/:image_id`

所以你正在寻找`params[:profile_id]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T05:11:02.653

如果您运行`rake routes`它，它还会告诉您各种参数键的名称。

# python - 如何在 Python 中打印 Unicode 字符？

> ID：10569438
> 
> 赞同：152
> 
> 时间：2012-05-13T05:00:57.087
> 
> 标签：python, python-unicode

我想制作一本字典，其中英语单词指向俄语和法语的翻译。

如何在 Python 中打印出 unicode 字符？另外，如何将 unicode 字符存储在变量中？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-05-13T05:10:04.833

要在 Python 源代码中包含 Unicode 字符，您可以在字符串的表单中使用[Unicode 转义字符](http://docs.python.org/howto/unicode.html#unicode-literals-in-python-source-code)`\u0123`。在 Python 2.x 中，您还需要在字符串文字前加上 'u' 前缀。

这是在 Python 2.x 交互式控制台中运行的示例：

```
>>> print u'\u0420\u043e\u0441\u0441\u0438\u044f'
Россия 
```

在 Python 2 中，以 'u' 为前缀的字符串将它们声明为 Unicode 类型变量，如[Python Unicode 文档](http://docs.python.org/howto/unicode.html#the-unicode-type)中所述。

在 Python 3 中，'u' 前缀现在是可选的：

```
>>> print('\u0420\u043e\u0441\u0441\u0438\u044f')
Россия 
```

如果运行上述命令没有为您正确显示文本，则您的终端可能无法显示 Unicode 字符。

这些示例使用 Unicode 转义符 ( `\u...`)，它允许您打印 Unicode 字符，同时将源代码保持为纯 ASCII。这有助于在不同系统上使用相同的源代码。`print u'Россия'`如果您确信您的所有系统都能正确处理 Unicode 文件，您也可以直接在 Python 源代码中使用 Unicode 字符（例如在 Python 2 中）。

有关从文件中读取 Unicode 数据的信息，请参阅此答案：

[在 Python 中从文件中读取字符](https://stackoverflow.com/questions/147741/character-reading-from-file-in-python)

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-12-07T23:20:41.653

## 在 Python 中打印一个 unicode 字符：

**直接从 python 解释器打印一个 unicode 字符：**

```
el@apollo:~$ python
Python 2.7.3
>>> print u'\u2713'
✓ 
```

Unicode 字符`u'\u2713'`是一个复选标记。解释器在屏幕上打印复选标记。

**从 python 脚本打印一个 unicode 字符：**

把它放在 test.py 中：

```
#!/usr/bin/python
print("here is your checkmark: " + u'\u2713'); 
```

像这样运行它：

```
el@apollo:~$ python test.py
here is your checkmark: ✓ 
```

如果它没有为您显示复选标记，那么问题可能出在其他地方，例如终端设置或您正在使用流重定向执行的操作。

**将 unicode 字符存储在文件中：**

将此保存到文件：foo.py：

```
#!/usr/bin/python -tt
# -*- coding: utf-8 -*-
import codecs
import sys 
UTF8Writer = codecs.getwriter('utf8')
sys.stdout = UTF8Writer(sys.stdout)
print(u'e with obfuscation: é') 
```

运行它并将输出通过管道传输到文件：

```
python foo.py > tmp.txt 
```

打开 tmp.txt 并查看内部，您会看到：

```
el@apollo:~$ cat tmp.txt 
e with obfuscation: é 
```

因此，您已将带有混淆标记的 unicode e 保存到文件中。

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2017-05-15T21:36:20.803

**如果您尝试使用`print()`Unicode，并遇到 ascii 编解码器错误**，请查看[此页面](http://chase-seibert.github.io/blog/2014/01/12/python-unicode-console-output.html)，其 TLDR 是`export PYTHONIOENCODING=UTF-8`在启动 python 之前完成的（此变量控制控制台尝试将您的字符串数据编码为的字节序列）。在内部，Python3 默认使用 UTF-8（参见[Unicode HOWTO](https://docs.python.org/3/howto/unicode.html)) 所以这不是问题；您可以将 Unicode 放入字符串中，如其他答案和评论中所示。当您尝试将这些数据发送到您的控制台时，问题就会发生。Python 认为你的控制台只能处理 ascii。其他一些答案说，“首先将其写入文件”，但请注意，他们为此指定了编码（UTF-8）（因此，Python 不会更改任何写入内容），然后使用读取方法只吐出字节而不考虑编码的文件，这就是它起作用的原因。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-05-13T05:07:50.310

在 Python 2 中，您使用 , 声明 unicode 字符串`u`，如 in`u"猫"`和使用`decode()`and`encode()`分别转换为 unicode 和从 unicode 转换。

[这在 Python 3 中要容易得多。可以在这里](http://pyvideo.org/video/948/pragmatic-unicode-or-how-do-i-stop-the-pain)找到一个很好的概述。那个演讲为我澄清了很多事情。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-05-11T16:22:46.573

考虑到这是 google 搜索该主题时的第一个堆栈溢出结果，值得一提的`u`是，在 Python 3 中为 unicode 字符串添加前缀是可选的。（Python 2 示例复制自顶级答案）

Python 3（两者都有效）：

```
print('\u0420\u043e\u0441\u0441\u0438\u044f')
print(u'\u0420\u043e\u0441\u0441\u0438\u044f') 
```

蟒蛇2：

```
print u'\u0420\u043e\u0441\u0441\u0438\u044f' 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2020-08-02T08:28:10.153

将**'+'**替换为**'000'**。例如，**'U+1F600'**将变为**'U0001F600'**并在 Unicode 代码前加上**“\”**并打印。例子：

```
>>> print("Learning : ", "\U0001F40D")
Learning :  
>>> 
```

检查这个也许它会帮助 [python unicode emoji](https://www.geeksforgeeks.org/python-program-to-print-emojis/)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-11-18T23:01:47.493

我在 Windows 中使用 Portable winpython，它包括 IPython QT 控制台，我可以实现以下。

```
>>>print ("結婚")
結婚

>>>print ("おはよう")
おはよう

>>>str = "結婚"

>>>print (str)
結婚 
```

您的控制台解释器应支持 unicode 以显示 unicode 字符。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-08-29T01:38:04.507

还有一件事尚未添加

在 Python 2 中，如果要打印具有 unicode 和 use 的变量，`.format()`请执行此操作（将要格式化的基本字符串设置为 unicode 字符串`u''`：

```
>>> text = "Université de Montréal"
>>> print(u"This is unicode: {}".format(text))
>>> This is unicode: Université de Montréal 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-10-08T10:58:13.487

这修复了 python 中的 UTF-8 打印：

```
UTF8Writer = codecs.getwriter('utf8')
sys.stdout = UTF8Writer(sys.stdout) 
```

# iphone - 在 MPMoviePlayerController 中自定义 OverLay View

> ID：10569446
> 
> 赞同：0
> 
> 时间：2012-05-13T05:03:03.553
> 
> 标签：iphone, objective-c

我是 iPhone 新手。我有一个问题，是否可以更改 MPMoviePlayerController.in 的完成按钮标题和颜色，然后请发送一些代码。在此先感谢并致以诚挚的问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T19:54:53.110

不适用于 MPMoviePlayerController。试试 AV Foundation 的 AVPlayer。[这是 Apple 文档中的一个很好的教程](http://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html)。

您需要提供自己的自定义控件以用于 AVPlayer。

或者，您可以尝试将 MPMoviePlayerController 与 MPMovieControlStyleNone 的 controlStyle 一起使用。这将删除默认控件。我的观点是 MPMoviePlayerController 的好处是它工作起来很容易，并且提供控件的工作量很小。如果您要以任何一种方式进行控制，我建议您使用更灵活、更强大的 AV Foundation。

2015 年更新：如果您的目标是 iOS8 或更高版本，您可能想尝试 AVPlayerViewController。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:59:38.407

您可以使用以下代码行更改**DONE按钮的标题**

```
 [[UIBarButtonItem appearance] setTitle:@"doneButtonCaption"]; 
```

只需在您编写 MPMoviePlayerController 代码的地方使用这行代码

# asp.net - ASP.Net 传递客户端身份以在集成身份验证模式下创建数据库连接字符串

> ID：10569448
> 
> 赞同：0
> 
> 时间：2012-05-13T05:03:12.930
> 
> 标签：asp.net, authentication, integrated

我有一个托管在 IIS Web 服务器中的 ASP.NET 页面。此页面只是创建一个连接字符串并打开一个连接。我想为数据库连接传递客户端身份，因为我的数据库存储过程正在使用 current_user 执行各种任务（典型的客户端-服务器架构）。

在开发环境中：当我在我的开发机器上从 Visual Studio 运行此页面时，一切正常，数据库连接以我的 Windows 身份打开。而且存储过程中current_user的值也是我自己。在连接字符串中，我可以看到自己正在通过身份验证。

问题：在部署服务器上，服务器机器帐户发生上述身份验证，因此登录失败。我以某种方式希望使用客户端凭据进行连接，以便 SP 中 current_user 的值始终是打开页面的用户。

请帮助我，如果有任何其他问题，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T05:41:18.520

在您的 web.config 上使用模拟将解决此问题。

将以下行添加到您的 web.config 文件

```
 <identity impersonate="true"> 
```

下面的链接解释了模拟的详细信息以及它如何影响您的 Web 应用程序 [http://msdn.microsoft.com/en-us/library/aa292118(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa292118(v=vs.71).aspx)

在 Visual Studio 中运行应用程序时，它使用 IIS 以外的 Web 服务器来运行 Web 应用程序。此 Web 服务器将始终使用登录用户的身份。当您将应用程序部署到 IIS 时，当模拟设置为 false 时，应用程序池标识将用于 SQL Server 访问。模拟的默认值为 false。

# iphone - 如何等待 ftp 请求完成，然后继续程序

> ID：10569451
> 
> 赞同：0
> 
> 时间：2012-05-13T05:03:57.187
> 
> 标签：iphone, objective-c, multithreading

我使用“SimpleFTPSample”来执行 ftp 请求以列出错误信息。部分代码如下：

```
- (void)_startReceive
{
 ......
    self.networkStream = (NSInputStream *) ftpStream;
    self.networkStream.delegate = self;
    [self.networkStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

    [NSTimer scheduledTimerWithTimeInterval:TIMEOUTFTP target:self
                                   selector:@selector(dealTimeOut:) userInfo:nil repeats:NO];
 ......
} 
```

我还设置了一个 NSTimer 以在 TIMEOUTFTP 之后停止 networkStream，如果请求在我定义的 TIMEOUTFTP 内正确完成，networkStream 也将关闭。我在另一个地方使用该方法，如下所示：

```
- (void)downLoadData
{
    NSArray* receivedData;
    [ftpService _startReceive];

   //wait until the network is closed
    while (ftpService.isReceiving) {}

    receivedData = ftpService.dataArray;

    if([receivedData count] == 0) {
       NSLog(@"no data get");   
    }
    else {
       NSLog(@"get data number %d", [receivedData count]);
    } 
```

}

情况是程序卡在“while (ftpService.isReceiving) {}”。我不熟悉多线程。可能是我不正确理解运行循环。有人可以告诉我为什么会发生这种情况以及如何实现我的目的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T06:13:58.127

在让程序继续之前，您应该重新考虑是否真的要等待接收到的数据。相反，您应该将您的 UI 置于显示正在下载并限制用户可以执行的操作的状态，将控制权返回给应用程序的主事件循环，并让它在收到数据时调用您的委托方法。只有在收到数据后，您才应该解锁 UI 并继续下一步，无论是什么。

阻塞应用程序的主线程将导致糟糕的用户体验，并可能导致您的应用程序终止。

但是，如果你真的想这样做，你需要运行运行循环而不是忙着等待。就像是：

```
while (ftpService.isReceiving)
    [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]]; 
```

实际上，在这种情况下，您自己运行运行循环，您应该在此处和您安排流的位置使用不同的运行循环模式。默认的运行循环模式将包含来自其余框架的运行循环源，让它们从你自己的内部运行循环中触发是很危险的。只需使用可能对您的程序唯一的任意字符串作为模式。

运行循环是各种事件源和输入（和计时器）的集合。您的代码和框架的各个部分都将在运行循环中调度源。它们依赖于正在运行的运行循环，以便接收事件/输入/定时器触发并处理它们。通过不运行运行循环而只是忙于等待，您阻止了流从 FTP 连接接收数据并对其进行处理。

# c++ - opencv中的图像表示

> ID：10569452
> 
> 赞同：1
> 
> 时间：2012-05-13T05:04:12.090
> 
> 标签：c++, opencv

```
Mat img=imread("image_location"); 
```

我研究了“img”变量就像java中的对象引用变量，它引用原始对象（在这种情况下是图像）。出于好奇，我想找出“img”变量的含义。如果它指的是实际对象，它应该保存一个地址并在我使用时返回该地址

```
cout<<img; 
```

但是，Shock，它将实际图像（像素值）返回到输出。我认为我的理解有问题。请帮助，我是一个菜鸟程序员，试图让我的大脑理解这些概念。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T07:43:13.243

`cv::Mat`将表示图像的数据保存在数组中，以及特定于`cv::Mat`实例的其他数据。数据数组本身取决于图像的格式。你可以有不同数量的通道和通道深度，当你使用时，`imread`你可以传递第二个参数来控制它。所以`cv::Mat`没有指向原始对象的指针，它有一个指向包含表示该对象的数据的数组的指针。

最重要的是，在较新版本的 OpenCV 中，`ostream& operator<<`为 重载`cv::Mat`，并试图以矩阵格式生成数组值的良好打印输出。这是你看到的时候`std::cout << someMat;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T07:08:22.830

它可能是由 for 的过载引起`operator<<`的`cv::Mat`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T07:37:22.317

Mat 对象包含一个指向数据的指针，但它也包含其他值。有关更多信息，请参阅[文档](http://opencv.willowgarage.com/documentation/cpp/core_basic_structures.html#mat)。

# hadoop - Hadoop 中 Amazon S3 和 S3n 的区别

> ID：10569455
> 
> 赞同：72
> 
> 时间：2012-05-13T05:04:48.880
> 
> 标签：hadoop, amazon-s3, hdfs

当我将我的 Hadoop 集群连接到 Amazon 存储并将文件下载到 HDFS 时，我发现`s3://`它不起作用。在 Internet 上寻求帮助时，我发现我可以使用`S3n`. 当我使用它时`S3n`，它起作用了。我不明白使用`S3`和`S3n`与我的 Hadoop 集群之间的区别，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-05-13T10:12:08.290

使用[Amazon S3](http://aws.amazon.com/s3/)的两个文件系统记录在针对 Amazon S3 的相应[Hadoop wiki 页面](http://wiki.apache.org/hadoop/AmazonS3)中：

> *   **S3 Native FileSystem（URI 方案：s3n）**
>     用于在 S3 上读取和写入常规文件的本机文件系统。此文件系统的优点是您可以访问 S3 上使用其他工具编写的文件。**相反，其他工具可以访问使用 Hadoop 编写的文件。缺点是 S3 对文件大小施加了 5GB 的限制**。由于这个原因**，它不适合作为 HDFS**（支持非常大的文件）的替代品。
>     
>     
> *   **S3 块文件系统（URI 方案：s3）**
>     由 S3 支持的基于块的文件系统。文件存储为块，就像它们在 HDFS 中一样。这允许有效地实现重命名。此文件系统要求您为文件系统专用一个存储桶 - 您不应使用包含文件的现有存储桶，或将其他文件写入同一存储桶。**此文件系统存储的文件可以大于 5GB，但不能与其他 S3 工具互操作**。
>     
>     
> 
> 有两种方法可以将 S3 与 Hadoop 的 Map/Reduce 一起使用， **或者作为使用 S3 块文件系统的 HDFS 的替代品**（即，将其用作支持超大文件的可靠分布式文件系统）或作为数据输入的便捷存储库使用任一 S3 文件系统从 MapReduce 到和输出。在第二种情况下，HDFS 仍然用于 Map/Reduce 阶段。[...]
> 
> *[强调我的]*

所以差异主要与如何处理 5GB 限制有关（这是*可以在单个 PUT 中上传的最大对象*，即使*对象的大小范围可以从 1 字节到 5 TB*，请参阅[我可以存储多少数据？](http://aws.amazon.com/s3/faqs/#How_much_data_can_I_store) )：虽然使用*S3 块文件系统（URI 方案：s3）*可以弥补 5GB 的限制并将文件存储到 5TB，但它依次取代了 HDFS。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-05-14T01:17:36.963

我认为您的主要问题与拥有`S3`并`S3n`作为 Hadoop 的两个独立连接点有关。`s3n://`意思是“一个常规文件，在这个 S3 url 上可以从外界读取”。`s3://`指的是映射到位于 AWS 存储集群上的 S3 存储桶的 HDFS 文件系统。因此，当您使用 Amazon 存储桶中的文件时，您必须使用 S3N，这就是您的问题得到解决的原因。@Steffen 添加的信息也很棒！！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-06-03T16:44:02.980

这是一个解释：[https ://notes.mindprince.in/2014/08/01/difference-between-s3-block-and-s3-native-filesystem-on-hadoop.html](https://notes.mindprince.in/2014/08/01/difference-between-s3-block-and-s3-native-filesystem-on-hadoop.html)

> 第一个 S3 支持的 Hadoop 文件系统是在 Hadoop 0.10.0 (HADOOP-574) 中引入的。它被称为 S3 块文件系统，并被分配了 URI 方案 s3://。在这个实现中，文件被存储为块，就像它们在 HDFS 中一样。此文件系统存储的文件无法与其他 S3 工具互操作 - 这意味着**如果您转到 AWS 控制台并尝试查找此文件系统写入的文件，您将找不到它们 - 相反，您会找到名为类似block_-1212312341234512345**等的东西。
> 
> 为了克服这些限制，在 Hadoop 0.18.0 (HADOOP-930) 中引入了另一个 S3 支持的文件系统。它被称为 S3 本机文件系统，并被分配了 URI 方案 s3n://。此文件系统允许您访问 S3 上使用其他工具编写的文件...当引入此文件系统时，S3 的文件大小限制为 5GB，因此此文件系统只能处理小于 5GB 的文件。2010 年末，亚马逊……将文件大小限制从 5GB 提高到 5TB……
> 
> **不再推荐使用 S3 块文件系统。**Qubole 和 Amazon EMR 等各种 Hadoop 即服务提供商将 s3:// 和 s3n:// URI 映射到 S3 本机文件系统以确保这一点。

所以总是使用本机文件系统。不再有 5Gb 限制。有时您可能需要键入`s3://`而不是`s3n://`，但只需确保您创建的任何文件在浏览器的存储桶资源管理器中可见。

另请参阅[http://docs.aws.amazon.com/ElasticMapReduce/latest/ManagementGuide/emr-plan-file-systems.html](http://docs.aws.amazon.com/ElasticMapReduce/latest/ManagementGuide/emr-plan-file-systems.html)。

> 以前，Amazon EMR 使用带有 URI 方案 s3n 的 S3 Native FileSystem。虽然这仍然有效，但我们建议您使用 s3 URI 方案以获得最佳性能、安全性和可靠性。

它还说您可以`s3bfs://`用来访问旧的块文件系统，以前称为`s3://`.

# wcf - WCF 行为评估顺序和 ServiceAuthorizationBehavior

> ID：10569461
> 
> 赞同：2
> 
> 时间：2012-05-13T05:06:03.137
> 
> 标签：wcf, web-services

根据 MSDN 中的这篇[文章](http://msdn.microsoft.com/en-us/library/ms730137.aspx)，WCF 行为的评估顺序为：

1.  合同
2.  手术
3.  端点
4.  服务

我有一个使用 ServiceAuthorizationManager 类来为请求执行一些自定义安全验证的服务。此授权管理器与实现 IServiceBehavior 的 ServiceAuthorizationBehavior 挂钩。

我还定义了实现 IEndpointBehavior 的自定义行为。

根据上面的顺序，端点行为应该在服务行为之前被评估，但是，日志证明不是这样。ServiceAuthorizationBehavior 在端点行为之前被评估。

这是一个错误吗？这里发生了什么？

谢谢，穆罕默德

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T13:42:39.473

文档不正确。实际顺序是

1.  服务
2.  合同
3.  端点
4.  手术

感谢您指出此问题，我会通知文档团队修复此问题。

# c++ - 结合 std::strings 和 C-Strings 会导致缓冲区溢出

> ID：10569463
> 
> 赞同：0
> 
> 时间：2012-05-13T05:06:18.750
> 
> 标签：c++, winapi, cstring

我正在尝试创建一个函数，使`std::string`在我的 C++ WinAPI 应用程序中组合 C 字符串和 sa 更容易一些。

所以不要这样做：

```
TCHAR res[MAX_PATH];
_stprintf(res, _T("In functionX(): error occured where the variable values are %d, %u, %s, %c"), myInt, myUnsignedInt, myStr.c_str(), myChar);
MessageBox(NULL, res, _T("Error Occurred"), MB_OK); 
```

我只需要这样做（这使得合并不同的字符串类型变得更容易，因为我不必在任何地方都声明 TCHAR 数组）：

```
tstring res = concat(_T("In functionX(): error occured with the variable values %d, %u, %s, %c"), myInt, myUnsignedInt, myStr.c_str(), myChar);
MessageBox(NULL, (LPTSTR)res.c_str(), _T("Error Occurred"), MB_OK); 
```

**我的问题：**我的函数*concat();* *当我在参数格式*中传递超过 1 个变量时失败，我不知道为什么？

```
// The following function call causes the error
tstring ou = concat(_T("In functionX(): Failed to create temp file - %s - %s\r\n"), (LPTSTR)tempFileRootDir.c_str(), tempFile); 

tstring WinFile::concat( TCHAR* strFormat, TCHAR* format, ... )
{
    // tstring is either a std::string or std::wstring depending on whether unicode is used
    // Post: Wrapper function to easily merge C++ strings with C Strings

    va_list arguments;
    va_start(arguments, format);
    TCHAR res[MAX_PATH];
    _stprintf(res, strFormat, format); 
    return tstring(res);
} 
```

在 Microsoft Visual C++ 中运行该函数时发生的错误是：

> Application.exe 中发生缓冲区溢出，已损坏程序的内部状态。按 Break 调试程序或按 Continue 终止程序。
> 
> 有关详细信息，请参阅帮助主题“如何调试缓冲区溢出问题”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T05:29:32.417

看起来你的可变参数处理有点不对劲。是的，通过写入固定大小的缓冲区，您要求堆栈溢出。

要更正第一个问题，您需要使用接受可变参数的 printf 版本。对于第二个，您应该在打印之前计算：

```
tstring WinFile::concat( TCHAR const * strFormat, ... )
{
    va_list args;

    // Determine how much space to reserve.
    va_start(args, strFormat);
    size_t msg_len=_vsctprintf(strFormat, args);
    va_end(args);

    // Reserve space on heap.
    //
    // "_vscprintf returns the number of characters that would be generated
    // if the string pointed to by the list of arguments was printed ... 
    // [and] does not include the terminating null character."
    //
    // So we add space for a terminating null.
    std::vector<TCHAR> writebuffer(1+msg_len);

    // perform formatting
    va_start(args, strFormat);
    _vstprintf(&writebuffer[0], strFormat, args);
    va_end(args);

    // return a copy as a tstring.
    return tstring(&writebuffer[0], &writebuffer[msg_len]);
} 
```

# java - java.sql.Time 对象与 java.sql.Date 对象混淆

> ID：10569469
> 
> 赞同：2
> 
> 时间：2012-05-13T05:07:51.683
> 
> 标签：java, mysql, date, jdbc, time

我正在查询一个 MySQL 表并选择 varchar、Date、Time、Double 和 Boolean 数据类型。我从 ResultSet 中获取数据并将其放入 DefaultTableModel 中，然后将其放入 JTable 中，然后放入 JScrollPane 中进行显示。

除了其中包含 java.sql.Time 对象的列之外，所有数据都正确显示。这些显示为日期对象，它们的值都是 1970 年 1 月 1 日。

似乎 java.sql.Time 对象被读取为 java.sql.Date 对象（我猜测 1970 年 1 月 1 日被返回，因为时间值超出了对日期对象有效的范围）。

我很困惑，因为如果我覆盖 DefaultTableModel 中的 getColumnClass 方法以始终返回 String.class 并使用表方法 setAutoCreateRowSorter(true)，当我单击包含 java.sql.Time 对象的列的标题对其进行排序时，a抛出 java.lang.ClassCastException，它说 java.sql.time 不能转换为字符串。为什么这会正确地将数据识别为 java.sql.Time，但是如果我重写 DefaultTableModel getColumnClass 以返回正确的类，它会将其视为日期而不是时间？任何解决问题的帮助将不胜感激。下面是我如何在 DefaultTableModel 中覆盖他的 getColumnClass 方法：

```
 model = new DefaultTableModel() {
            @Override
            public Class<?> getColumnClass(int columnIndex) {
                if (columnIndex == numberOfColumns) {
                    return Boolean.class;
                } else {
                    return getValueAt(1, columnIndex).getClass(); //return actual class
                    return String.class; //return string regardless of what class is
                }
            }
        }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T05:20:46.213

ClassCastException 即将到来，因为您试图将 Time 类转换为字符串。它显示为 Date 对象，因为 java.sql.Time 和 java.sql.Date 都是 java.util.Date 的子类。这些子类只是简单的包装器（同样的，只有足够的额外信息可以映射到 SQL 列）。因此，在 Swing JTable 中，它被用作 java.util.Date，因为 java.sql 类型在大多数情况下与摆动组件无关。

# perl - 如何执行一系列字符串替换并能够轻松撤消它们？

> ID：10569470
> 
> 赞同：1
> 
> 时间：2012-05-13T05:08:26.207
> 
> 标签：perl, sed, awk, str-replace

我有一系列字符串和它们的替换用空格分隔：

```
a123 b312
c345 d453 
```

我想用右列中的字符串替换左列中的那些字符串，然后撤消替换。对于第一部分，我可以构建一个 sed 命令 s/.../...;s/.../... 但这不考虑反转，它需要我显着改变输入，这需要时间. 有没有方便的方法来做到这一点？

列出了一些示例程序，可以是任何免费的 win/lin。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T05:35:36.177

文本编辑器提供“撤消”功能，但命令行实用程序不提供。您可以编写一个脚本来进行替换，然后反转替换文件以反向执行相同的操作。

这是一个脚本，它在“replacements.txt”中进行一系列替换，并根据脚本的输入运行它们：

```
#!/usr/bin/perl -w

use strict;

open REPL, "<replacements.txt";
my @replacements;
while (<REPL>) {
    chomp;
    push @replacements, [ split ];
}
close REPL;

while (<>) {
    for my $r (@replacements) { s/$r->[0]/$r->[1]/g }
    print;
} 
```

如果将此文件保存为“repl.pl”，并将上面的文件保存为“replacements.txt”，则可以这样使用它：

```
perl repl.pl input.txt >output.txt 
```

要将替换文件转换为“reverse-replacements.txt”文件，可以使用简单的 awk 命令：

```
awk '{ print $2, $1 }' replacements.txt >reverse-replacements.txt 
```

然后只需修改 Perl 脚本以使用反向替换文件而不是正向替换文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T05:46:11.930

```
use strict;
use warnings;

unless (@ARGV == 3) {
    print "Usage: script.pl <reverse_changes?> <rfile> <input>\n";
    exit;
}
my $reverse_changes = shift;
my $rfile = shift;
open my $fh, "<", $rfile or die $!;
my %reps  = map split, <$fh>;

if ($reverse_changes) {
    %reps = reverse %reps;
}

my $rx = join "|", keys %reps;

while (<>) {
    s/\b($rx)\b/$reps{$1}/g;
    print;
} 
```

`\b`围绕替换的单词边界检查将防止部分匹配，例如替换`a12345`为`b31245`. 在`$rx`你可能希望转义元字符，如果这样可以出现在你的替代品中。

**用法：**

要执行替换：

```
script.pl 0 replace.txt input.txt > output.txt 
```

要反转更改：

```
script.pl 1 replace.txt output.txt > output2.txt 
```

# .net - .NET：安装 .NET 4.0 后是否可以安装 .NET frameworks 2.0 和 3.5？

> ID：10569475
> 
> 赞同：2
> 
> 时间：2012-05-13T05:09:36.500
> 
> 标签：.net, frameworks, installation, version

最近，当我运行我的 Visual Studio 2010 以打开我自己的 vb.net 项目时，我从 vs 收到以下消息：

“VB.NET 项目 project1 的目标是“.NETFramework, Version 2.0”，这台机器上没有安装。你必须下载这个框架，以及 .NET framework3.5，才能打开和构建这个项目。 ……”

我应该提一下，之前没问题，我可以打开我的项目并通过 VS2010 构建它。我能做些什么？你的建议是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T05:44:33.553

安装 .NET4 时是否卸载了以前的 .NET 框架版本？

您可以更改项目以使用 .NET4 进行编译，它应该没问题，或者安装较旧的框架版本（再次）。

你会发现在顶部安装这些旧框架没有问题......除了一个例外（我知道）。安装两个 .NET3.5 框架后，您需要运行以下命令：

```
C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -i 
```

这是因为旧的安装程序从 IIS 中删除了 ASP.NET4.0（这是正确的行为）。

否则没问题，我已经在机器上做过几次（Win2k8服务器经常发生，因为它们只带有.NET3.0并且.NET3.5安装在服务器上而不是下载包，所以人们忽略了安装如果使用 .NET 3.5 代替）。

但很可能您只需要在项目设置窗口中为 .Net4 升级您的项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T05:11:17.677

> 安装 .net 4.0 后是否可以安装 .net frameworks 2.0 和 3.5？

是的。

> 我应该提一下，之前没问题，我可以打开我的项目并通过 VS2010 构建它。

好的。之后您是否卸载了 .NET Frameworks 2.0 和 3.5？

> 我能做些什么？你的建议是什么？

安装它们。

# python - 将文本文件打开到字典中 - Python

> ID：10569480
> 
> 赞同：0
> 
> 时间：2012-05-13T05:11:15.490
> 
> 标签：python, file, dictionary, load, tuples

文本文件读取

```
1
2
3
4, Eric Wont, 1/1/10, 1,2,10
5
6, John Smith, 2/2/10, 2/2/11 
```

我想将其存储在字典中，其中数字作为键，名称和日期作为元组，例如

```
{4: (Eric Wont, 1/1/10, 1,2,10)} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T05:44:21.977

它看起来像这样：

```
val_dict = {}
for line in open('a.txt'):
    vals = line.strip().split(', ', 3)                                                                                                                                
    val_dict[vals[0]] = tuple(vals[1:]) 
```

但这看起来不是什么大问题，更像是一个家庭作业:)

# touch - Surface SDK 在代码中生成触摸事件

> ID：10569483
> 
> 赞同：1
> 
> 时间：2012-05-13T05:11:25.733
> 
> 标签：touch, pixelsense

我只是想知道如何在 MS 表面上的表面 sdk 中生成代码中的触摸事件（如果可能的话）。即使用 x 和 y 点我想在那个位置模拟触地。我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:44:13.657

如果您需要模拟接触点，请根据您的场景查看[MultiTouchVista](http://multitouchvista.codeplex.com/)，您可能需要创建自己的 InputProvider。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:28:15.653

MSDN 上有一篇文章 ( [http://msdn.microsoft.com/en-us/library/ee804820(v=surface.10).aspx](http://msdn.microsoft.com/en-us/library/ee804820(v=surface.10).aspx) ) 展示了如何创建使用模拟 API 的应用程序。

# algorithm - 0-1 无限整数数组上的背包？

> ID：10569486
> 
> 赞同：5
> 
> 时间：2012-05-13T05:12:58.707
> 
> 标签：algorithm, dynamic-programming

`Given an infinite positive integer array or say a stream of positive integers, find out the first five numbers whose sum is twenty.`

通过阅读问题陈述，它首先似乎是`0-1 Knapsack`问题，但我很困惑可以`0-1 Knapsack algo`在整数流上使用。假设我为上述问题编写了一个递归程序。

```
int knapsack(int sum, int count, int idx)
{
    if (sum == 0 && count == 0)
        return 1;

    if ((sum == 0 && count != 0) || (sum != 0 && count == 0))
        return 0;

    if (arr[idx] > 20) //element cann't be included.
        return knapsack(sum, count idx + 1);

    return max(knapsack(sum, count, idx +1), knapsack(sum - arr[idx], count -1, idx + 1));
} 
```

现在，当上述函数将调用一个无限数组时，`max`函数 ie中的第一次调用`knapsack(sum, count, idx +1)`将永远不会返回，因为它将继续忽略当前元素。即使我们改变了`max`函数中调用的顺序，第一次调用仍然有可能永远不会返回。有没有办法`knapsack`在这种情况下应用算法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T05:32:39.880

如果您仅使用正整数，则此方法有效。

基本上保留一份您可以到达前 20 个号码中的任何一个的方法列表，并且每当您处理一个新号码时，相应地处理此列表。

```
def update(dictlist, num):
    dk = dictlist.keys()
    for i in dk:
        if i+num <=20:
            for j in dictlist[i]:
                listlen = len(dictlist[i][j]) + 1
                if listlen >5:
                    continue
                if i+num not in dictlist or listlen not in dictlist[i+num]:
                    dictlist[i+num][listlen] = dictlist[i][j]+[num]
    if num not in dictlist:
        dictlist[num]= {}
    dictlist[num][1] = [num]
    return dictlist

dictlist = {}
for x in infinite_integer_stream:
    dictlist = update(dictlist,x)
    if 20 in dictlist and 5 in dictlist[20]:
        print dictlist[20][5]
        break 
```

这段代码可能有一些小错误，我现在没有时间调试它。但基本上 dictlist[i][j] 存储总和为 i 的 j 长度列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T06:22:51.113

德尔福代码：

```
var
  PossibleSums: array[1..4, 0..20] of Integer;
  Value, i, j: Integer;
  s: string;
begin
  s := '';
  for j := 1 to 4 do
    for i := 0 to 20 do
      PossibleSums[j, i] := -1;
  while True do begin
    Value := 1 + Random(20); // stream emulation
    Memo1.Lines.Add(IntToStr(Value));

    if PossibleSums[4, 20 - Value] <> -1 then begin
    //we just have found 5th number to make the full sum
      s := IntToStr(Value);
      i := 20 - Value;
      for j := 4 downto 1 do begin
        //unwind storage chain
        s := IntToStr(PossibleSums[j, i]) + ' ' + s;
        i := i - PossibleSums[j, i];
      end;
      Memo1.Lines.Add(s);
      Break;
    end;

    for j := 3 downto 1 do
      for i := 0 to 20 - Value do
        if (PossibleSums[j, i] <> -1) and (PossibleSums[j + 1, i + Value] = -1) then
          PossibleSums[j + 1, i + Value] := Value;

    if PossibleSums[1, Value] = -1 then
      PossibleSums[1, Value] := Value;
  end;
end; 
```

输出：

```
4
8
9
2
10
2
17
2
4 2 10 2 2 
```

# php - 如何使用 Codeigniter 将 gridview 数据导出到 php 中的 pdf 文件

> ID：10569491
> 
> 赞同：0
> 
> 时间：2012-05-13T05:14:05.813
> 
> 标签：php, codeigniter

我是 Codeigniter 的新手。我正在尝试将 gridview 数据导出到 pdf 文件，我正在使用 mpdf 库。我解压缩并放置 \system\helpers 的那个库，我创建了一个 pdfexport_helper.php，它放在 \system\helpers 上。pdfexport_helper.php 这个文件

```
<?php

if ( ! function_exists('exportMeAsMPDF'))
{
            function exportMeAsMPDF($htmView,$fileName) {

                        $CI =& get_instance();
                        $CI->load->library('MPDF54/mpdf.php');
                       // $CI->mpdf=new mPDF('c','A4','','',32,25,27,25,16,13);
                        $CI->mpdf->AliasNbPages('[pagetotal]');
                        $CI->mpdf->SetHTMLHeader('{PAGENO}/{nb}', '1',true);
                        $CI->mpdf->SetDisplayMode('fullpage');
                        $CI->mpdf->pagenumPrefix = 'Page number ';
                        $CI->mpdf->pagenumSuffix = ' - ';
                        $CII->mpdf->nbpgPrefix = ' out of ';
                        $CI->mpdf->nbpgSuffix = ' pages';
                        $CI->mpdf->SetHeader('{PAGENO}{nbpg}');
                        $CI->mpdf = new mPDF('', 'A4', 0, '', 12, 12, 10, 10, 5, 5);
                        $style = base_url().'/source/template/css/stylesheet.css';
                        $stylesheet = file_get_contents( $style);
                        $CI->mpdf->WriteHTML($stylesheet,1);                       
                        $CI->mpdf->WriteHTML($htmView,2);                       
                        $CI->mpdf->Output('mpdf.pdf','I');
            }
} 
```

我的控制器包含

```
function pdf()
    {
        $this->load->helper('pdfexport_helper.php');
        $urlid  = $this->uri->segment('3');
         if($urlid == "export") 
         {

             $data['pageTitle'] = "Annual Report";
             $data['htmView'] = $this->load->view('site_view',$data,TRUE);
             $templateView  = $this->load->view('../template_export',$data,TRUE);
             exportMeAsMPDF($templateView,$data['filename']);     

        }
    } 
```

我的观点是

```
<html>
    <head>
        <title><?=$page_title?></title>
    </head>
    <body>
   <p align="right"> <a href="<?php echo base_url();?>index.php/site/pdf" style="text-align:right">Export to PDF</a></p>

     <table border="1">
        <?php foreach($result as $row):?>

        <tr>
       <td><a href=""><?=$row->id?></a></td>
        <td><p><?=$row->firstname?></p></td>
        <td><p><?=$row->lastname?></p></td>
        <td><p><?=$row->email?></p></td>
        <td><a href="<?php echo base_url();?>index.php/site/update">Update</a></td>
         <td><a href="">Delete</a></td>    

        <?php endforeach;?>
        </tr>
        </table>
    </body>
</html> 
```

当我单击导出 pdf 时，它显示空白页面。

任何人都可以帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T10:00:09.407

你看到这个了吗？[http://codeigniter.com/wiki/PDF_generation_using_dompdf](http://codeigniter.com/wiki/PDF_generation_using_dompdf)

# javascript - Javascript 触发 Tropo 脚本问题

> ID：10569494
> 
> 赞同：1
> 
> 时间：2012-05-13T05:15:02.833
> 
> 标签：javascript, jquery, html, ajax, tropo

希望使用 jQuery 和 Ajax 获取请求在我的 Tropo 帐户上放置一个触发简单 SMS 脚本的按钮。该按钮不需要打开任何东西，只需触发 Tropo 脚本（JS）发送短信即可。

Tropo 上给出的带有令牌的 URL 是：[http ://api.tropo.com/1.0/sessions?action=create&token=foo](http://api.tropo.com/1.0/sessions?action=create&token=foo)

触发时的 about URL 会发送一条短信说：“晚餐准备好了”。

我在 html 中有一个按钮：晚餐

在我的 HTML 中，我链接到一个外部 js：

```
$("#myButton").click( function(e) { 
  e.preventDefault(); 
  $.get("http://api.tropo.com/1.0/sessions?action=create&token=foo", function( data ) { 
    console.log( data ); 
  }); 
}); 
```

这不会成功，并且不会触发任何控制台错误。会喜欢一些见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T05:52:41.050

我认为您正在尝试从跨域服务中获取数据，根据您无法这样做的[同源策略。](http://en.wikipedia.org/wiki/Same_origin_policy)你可以这样尝试：

```
$("#myButton").click( function(e) { 
  e.preventDefault(); 
  $.ajax({
    url: 'http://api.tropo.com/1.0/sessions?action=create&token=foo',
    dataType: 'jsonp',
    success: function(data) {
        console.log( data ); 
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:26:03.423

如前所述，这可能是从跨域服务获取数据的问题。JSONP 可以解决这个问题，但我不确定 Tropo 的 API 是否可以与 JSONP 一起使用。我在文档或用户论坛中找不到任何提及。如果 JSONP 不起作用，那么您将需要向服务器发送一条消息并使用一些服务器端代码调用[Tropo 的 WebAPI](https://www.tropo.com/docs/webapi/new_tropo_web_api_overview.htm)来发送 SMS 消息。

# xml - 逐行拆分xml

> ID：10569495
> 
> 赞同：1
> 
> 时间：2012-05-13T05:15:45.310
> 
> 标签：xml, perl

我有一段像下面这样的 xml 代码我会读到这个并用换行符分割它

```
<head>
        <name>states.opml</name>
        <Created>Tue, 15 Mar 2005 16:35:45 GMT</Created>
        <Modified>Thu, 14 Jul 2005 23:41:05 GMT</Modified>
        <owner>Dave Winer</owner>
        <Email>dave@scripting.com</Email>
        <expansion>1, 6, 13, 16, 18, 20</expansion>
        <vertScrollState>1</vertScrollState>
        <windowTop>106</windowTop>
        <windowLeft>106</windowLeft>
        <windowBottom>558</windowBottom>
        <windowRight>479</windowRight>
        </head> 
```

我的 perl 代码：

```
my $xml=<STDIN>;
my @head=split(/\n/,$xml);
print length(@head);
#output is 1...split is not working at all 
```

我想要的是：我想要的是这样的字符串数组：

```
@head={<head>,
        <name>states.opml</name>,
        <Created>Tue, 15 Mar 2005 16:35:45 GMT</Created>,
        <Modified>Thu, 14 Jul 2005 23:41:05 GMT</Modified>,
        <owner>Dave Winer</owner>,
        <Email>dave@scripting.com</Email>,
        <expansion>1, 6, 13, 16, 18, 20</expansion>,
        <vertScrollState>1</vertScrollState>,
        <windowTop>106</windowTop>,
        <windowLeft>106</windowLeft>,
        <windowBottom>558</windowBottom>,
        <windowRight>479</windowRight>,
        </head>} 
```

有人可以帮忙吗？我知道 XML::XMLin，但不允许使用它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T05:37:56.973

实际上[`split`](http://perldoc.perl.org/functions/split.html)正在按应有的方式工作。您只将一行读入`$xml`，因此`split`只返回一行。如果您将文件 slurp 到 scalar`$xml`中，那么您将需要拆分，并且此代码将起作用：

```
local $/ = undef;   # set input record separator to undef (instead of newline)
my $xml=<STDIN>;    # all lines are now in $xml
my @head=split(/\n/,$xml);    # so now we can split it 
```

但是，此代码并没有按照您的想法进行：

```
print length(@head); 
```

它打印数组大小的长度，即 1。`@head`在标量上下文中作为字符串进行评估，字符串“1”的长度为 1。您要查找的内容很简单：

```
print scalar @head; 
```

但是为什么要这么麻烦呢？做就是了：

```
my @head = <STDIN>;   # all the lines are now in @head
print scalar @head; 
```

如果您需要删除换行符，请使用[`chomp`](http://perldoc.perl.org/functions/chomp.html)：

```
chomp(my @head = <STDIN>); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:54:51.273

问题是站点上的文件具有传统的 Mac OS 编码，`CR`用作行分隔符。

*输入记录分隔符* 的正常设置分隔字符`$/`上的行`LF`，并且由于您的文件中没有任何行，因此一次读取所有行。

解决这个问题的传统方法是 write `local $/ = "\r"`，之后相同范围内的文件读取语句将由`CR`字符终止。也`chomp`将从行尾删除 a `CR`。

但是，如果您同时从具有不同行终止符的多个文件中读取，这可能会很尴尬，因为它会影响`<FH>`操作员而不是特定的文件句柄。

我遇到的处理这个问题的最巧妙的方法是安装模块，[`PerlIO::eol`](https://metacpan.org/module/PerlIO%3a%3aeol)它可以让你打开*任何*带有`MODE`. `<:raw:eol(LF)`这会将所有不同的行终止符更改为标准`"\n"`，并且您的程序将独立于数据源正常运行。

**请注意**，该模块只需要安装 - 程序中不需要`use`一行。

# c++ - 如果一个父类是接口，是否可以使用多重继承？

> ID：10569499
> 
> 赞同：2
> 
> 时间：2012-05-13T05:16:20.273
> 
> 标签：c++, inheritance, multiple-inheritance, virtual-functions

![在此处输入图像描述](../Images/e005373774da42632e3275894a7e9232.png)

如果一个父类是一个接口（仅包含带有虚拟析构函数的纯虚函数），是否可以使用多重继承？

我想只暴露接口部分（图中的黄色类）以提高编译速度。绿色部分是执行部分。但是CPet应该从CAnimal(is-a relationship)和IPet(implement)继承，有“死亡钻石”:(

接口类（黄色部分）只有纯虚函数和虚销毁，所以当我通过工厂类创建CDog、CCat时，没有歧义之类的问题。CDog 有两个 vtable（来自 IDog 和 CPet），但在虚函数表中，点表示相同的函数（CDog 成员函数）。

没有编译错误，没有运行错误......但我担心这个层次结构。没问题还是有什么问题？

PS：我不想使用“虚拟继承”，因为如果我使用它，我无法通过观察视图查看类成员变量。（我猜这是因为虚拟继承链接到父类，如链表。）

环境：Visual Studio C++ 2008 或以上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T06:01:13.310

鉴于上面的描述，您应该无法实例化 的实例，`CPet`因为纯虚函数`IAnimal::isAlive()`在`IPet`vtable 中未定义。

```
struct IAnimal {
    virtual ~IAnimal() {}
    virtual void isAlive() = 0;
};

struct IPet : public IAnimal {
};

struct CAnimal : public IAnimal {
    virtual void isAlive() {
    }
};

struct CPet : public CAnimal, public IPet {
};

int main(void) {
    CPet cp;
} 
```

使用 Visual C++ 2008 和 2010 编译时产生以下内容：

```
animal.cpp(18) : error C2259: 'CPet' : cannot instantiate abstract class
    due to following members:
    'void IAnimal::isAlive(void)' : is abstract
    mytest.cpp(5) : see declaration of 'IAnimal::isAlive' 
```

GCC 会产生类似的警告：

```
animal.cpp: In function 'int main()':
animal.cpp:18:7: error: cannot declare variable 'cp' to be of abstract type 'CPet'
animal.cpp:14:8: note:   because the following virtual functions are pure within 'CPet':
animal.cpp:3:15: note:  virtual void IAnimal::isAlive() 
```

# git - Git显示删除了一个文件夹，但是git checkout 不能带回来吗？

> ID：10569500
> 
> 赞同：1
> 
> 时间：2012-05-13T05:17:18.453
> 
> 标签：git

如果`git status`显示：

```
$ git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   deleted:    FooBar.xcodeproj/project.pbxproj 
```

不`git checkout`应该带回来吗？

```
$ git checkout FooBar.xcodeproj
error: pathspec 'FooBar.xcodeproj' did not match any file(s) known to git. 
```

git如何正确恢复这个文件夹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T05:22:20.773

`FooBar.xcodeproj`显然是一个目录，而不是直接受版本控制。您可能会尝试强制它再次签出文件：

```
git checkout --  FooBar.xcodeproj/project.pbxproj 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T05:22:29.293

你在这里想svn。这不是 git 的工作方式。您不签出子目录。

如果要将特定文件重置为 HEAD，请将其重置，例如：

```
 git reset HEAD filename 
```

# zend-framework - Zend框架中的访问控制

> ID：10569501
> 
> 赞同：0
> 
> 时间：2012-05-13T05:17:36.353
> 
> 标签：zend-framework, zend-acl

我有一个错误，实际上这是错误通知，但我仍然想修复它；

当我尝试使用 访问页面时`null role`，它显示以下消息：

`Notice: Trying to get property of non-object in C:\Zend\Apache2\htdocs\hotelrwanda\application\plugin\AccessCheck.php on line 18`

如何在这里修复它是我的脚本：

```
 public function preDispatch(Zend_Controller_Request_Abstract $request) {

        $resource = $request->getControllerName();
        $action = $request->getActionName();

        $identity = $this->_auth->getStorage()->read();
        $role = $identity->role;

        if(!$this->_acl->isAllowed($role, $resource, $action)){
            $request->setControllerName('users')
                    ->setActionName('login');
        }
    } 
```

行：18 是这一行：`$role = $identity->role;`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T09:25:33.570

```
 public function preDispatch(Zend_Controller_Request_Abstract $request) {

            $resource = $request->getControllerName();
            $action = $request->getActionName();

           $role = 'guest';  //your default role 

        if(Zend_Auth::getInstance()->hasIdentity())
        {
            $role = Zend_Auth::getInstance()->getIdentity()->role;
        }

            if(!$this->_acl->isAllowed($role, $resource, $action)){
                $request->setControllerName('users')
                        ->setActionName('login');
            }
        } 
```

这里的 'guest' 充当默认角色。您可以将其命名为您喜欢的任何名称，但请确保在您的 acl 中添加此角色并相应地授予此角色的权限。

# iphone - 当我释放视图时委托崩溃，因为没有找到

> ID：10569502
> 
> 赞同：1
> 
> 时间：2012-05-13T05:17:42.283
> 
> 标签：iphone, objective-c, ios, ipad

我有下一个问题，我在触摸一个按钮时创建一个视图。创建和加载视图时，我发出 2 个请求，`ASIFormDataRequest`一个请求下载一个图像，另一个请求获取一些文本。

当视图中的用户加载选择返回时，头痛就变成了，因为如果按下按钮返回，视图将从超级视图中删除，但是如果一个请求回调即将到来并且视图不存在，我该怎么做才能取消请求，或者怎么能我解决这个问题。

崩溃在下一行代码中

类：ASIHTTPRequest.m

```
 BOOL dataWillBeHandledExternally = NO;
    **if ([[self delegate] respondsToSelector:[self didReceiveDataSelector]]) {**
        dataWillBeHandledExternally = YES;
    } 
```

使用：**线程 6：EXC_BAD_ACCES（代码 = 1，地址 = 0x30047dbc）**

请让我一直困扰着。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T05:22:53.047

您要确保`ASIHTTPRequest`在弹出视图时取消任何待处理：来自：[http ://allseeing-i.com/ASIHTTPRequest/How-to-use#cancelling_an_asychronous_request](http://allseeing-i.com/ASIHTTPRequest/How-to-use#cancelling_an_asychronous_request)

```
// Cancels an asynchronous request, clearing all delegates and blocks first
[request clearDelegatesAndCancel]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-31T13:38:36.460

你可以使用 try catch 。以下是您在 ASIHTTPRequest.m 中的操作方法

```
@try {
        if ([[self delegate] respondsToSelector:[self didReceiveDataSelector]]) {
            dataWillBeHandledExternally = YES;
        }
    }
    @catch (NSException *exception) {
        dataWillBeHandledExternally = NO;
    } 
```

# c# - 如何开发一个帮助类以用于所有基于 Web 的应用程序以从 Active Directory 中检索信息？

> ID：10569505
> 
> 赞同：0
> 
> 时间：2012-05-13T05:18:32.790
> 
> 标签：c#, asp.net, active-directory

我是一名新的 Web 开发人员，在我的公司中，所有 ASP.NET 应用程序都依赖于一个系统，该系统从 SAP 系统中提取用户信息并将它们作为 XML 文档检索。该系统只有一个文本框用于插入用户名以检索他的信息。例如：如果您插入用户名：johnA，系统将为您提供以下信息：John Arneson Elli 等。

然后，在基于 ASP.NET Web 的应用程序中，我们曾经使用三个 C# 类来与该系统建立连接，并帮助从该系统获取特定的用户信息。无论如何，现在我们想用一个从 Active Directory 获取用户信息的新系统替换该系统。

我将以下代码放在服务器中，它运行良好，因此当员工在我们的服务器中访问此代码时，他会看到一个显示他所有信息的页面。我现在想做的是在我们所有开发的和下一个新开发的基于 Web 的应用程序中使用它，方法是放置一个 TextBox 来放置用户的用户名并从这个系统中检索他的所有信息。**那么该怎么做呢？**

我是一个初学者，我无法在谷歌或其他任何地方找到这样做的方法。

我用于访问 Active Directory 的课程代码是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.DirectoryServices;

/// <summary>
/// Summary description for ActiveDirectory
/// </summary>
public class ActiveDirectory
{
    public static string GetPersonData(string id, string datatype)
    {
        //return "x xx xxxx xxx xxx"; //comment this line.
        //Faster performance through Active Directory
        string property = datatype;
        switch (property) //backwards compatibility
        {
            /* case "tel":
                return FindProperty(id, Property.Tel);*/
            case "name":
                return FindProperty(id, Property.Name);
            case "dept":
                return FindProperty(id, Property.Dept);
            case "line":
                return FindProperty(id, Property.Line);
            case "email":
                return FindProperty(id, Property.Email);
            case "id":
                return FindProperty(id, Property.Name);
            default:
                return "";
        }
    }

    //ACTIVE DIRECTORY OPTION.. FOR A BETTER PERFORMANCE
    const string ID = "cn";
    const string NAME = "displayName";
    const string TEL = "telephoneNumber";
    const string DEPT = "department";
    const string LINE = "extensionAttribute3";
    const string UNIT = "extensionAttribute10";
    const string TITLE = "title";
    const string FNAME = "givenName";
    const string MNAME = "initials";
    const string LNAME = "sn";
    const string EMAIL = "mail";
    const string AREA = "extensionAttribute3";
    const string MANAGER = "manager";
    const string ORGCODE = "extensionAttribute10";
    const string DN = "distinguishedName";

    public enum Property
    {
        Name, Tel, Dept, Line, Unit, Title, Fname, Mname, Lname, Email, Manager, OrgCode, DistinguishedName
    }

    public static DirectoryEntry GetDirectoryEntry() 
    {
        using (((System.Security.Principal.WindowsIdentity)HttpContext.Current.User.Identity).Impersonate())
        {
            DirectoryEntry de = new DirectoryEntry(); //DirectoryEntry class encapsulates a node or object in the AD hierarchy
            de.Path = "LDAP://CompanyName.COM";
            de.AuthenticationType = AuthenticationTypes.Delegation;

            return de;
        }
    }

    public static bool UserExists(string username)
    {
        DirectoryEntry de = GetDirectoryEntry();
        DirectorySearcher deSearch = new DirectorySearcher(); //Directory Searcher: It will perform queries against the active directory hierarchy 

        deSearch.SearchRoot = de; //SearchRoot is used to specify where the search starts
        deSearch.Filter = "(&(objectClass=user) (cn=" + username + "))"; //the search retrieves all objects.

        // Create a SearchResultCollection object to hold a collection of SearchResults
        // returned by the FindAll method.
        SearchResultCollection results = deSearch.FindAll();

        return results.Count > 0;
    }
    public static String FindName(String userAccount)
    {
        DirectoryEntry entry = GetDirectoryEntry();
        String account = userAccount.Replace(@"Domain\", "");

        try
        {
            DirectorySearcher search = new DirectorySearcher(entry);
            search.Filter = "(SAMAccountName=" + account + ")";
            search.PropertiesToLoad.Add("displayName");

            SearchResult result = search.FindOne();

            if (result != null)
            {
                return result.Properties["displayname"][0].ToString();
            }
            else
            {
                return "Unknown User";
            }
        }
        catch (Exception ex)
        {
            string debug = ex.Message;

            return debug;
        }
    }

    public static String FindProperty(String userAccount, Property p)
    {
        string property = "";

        //proceed with LDAP search.
        switch (p)
        {
            case Property.Dept:
                property = DEPT;
                break;
            case Property.Email:
                property = EMAIL;
                break;
            case Property.Fname:
                property = FNAME;
                break;
            case Property.Line:
                property = LINE;
                break;
            case Property.Lname:
                property = LNAME;
                break;
            case Property.Mname:
                property = MNAME;
                break;
            case Property.Name:
                property = NAME;
                break;
            case Property.Tel:
                property = TEL;
                break;
            case Property.Title:
                property = TITLE;
                break;
            case Property.Unit:
                property = UNIT;
                break;
            case Property.Manager:
                property = MANAGER;
                break;
            case Property.OrgCode:
                property = ORGCODE;
                break;
            case Property.DistinguishedName:
                property = DN;
                break;
            default:
                return "";

        }

        DirectoryEntry entry = GetDirectoryEntry();
        String account = userAccount.Replace(@"Domain\", "");

        try
        {
            System.Text.Encoding enc = System.Text.Encoding.ASCII;
            DirectorySearcher search = new DirectorySearcher(entry);
            search.Filter = "(&(objectCategory=user)(SAMAccountName=" + account + "))";
            search.PropertiesToLoad.Add(property);

            SearchResult result = search.FindOne();
            search.Dispose();
            entry.Close();
            entry.Dispose();

            if (result != null)
            {
                object value = result.Properties[property][0];
                if (value is System.Byte[])
                    return enc.GetString((byte[])value);
                else
                    return value.ToString();
            }
            else
            {
                return "-";
            }
        }
        catch (Exception ex)
        {
            string debug = ex.Message;

            return "debug";
        }
    }

    public static List<string> FindChildren(string userAccount)
    {
        DirectoryEntry entry = GetDirectoryEntry();
        String account = userAccount.Replace(@"Domain\", "");
        string dn = FindProperty(userAccount, Property.DistinguishedName);
        dn.Replace("*","\\2a");
        dn.Replace("(", "\\28");
        dn.Replace(")", "\\29");
        dn.Replace("\\", "\\5c");
        dn.Replace("NUL", "\\00");
        dn.Replace("/", "\\2f");

        string property = ID;
        List<string> output = new List<string>();
        try
        {
            System.Text.Encoding enc = System.Text.Encoding.ASCII;
            DirectorySearcher search = new DirectorySearcher(entry);
            search.Filter = "(&(objectCategory=user)(manager=" + dn + "))";
            search.PropertiesToLoad.Add(property);

            SearchResultCollection results = search.FindAll();
            search.Dispose();
            entry.Close();
            entry.Dispose();

            if (results != null)
            {
                foreach (SearchResult result in results)
                {
                    object value = result.Properties[property][0];
                    if (value is System.Byte[])
                        output.Add(enc.GetString((byte[])value));
                    else
                        output.Add(value.ToString());
                }
            }
        }
        catch (Exception ex)
        {
            throw ex;
        }
        return output;
    }
    public static string FindOrg(string orgcode, string property)
    {
        DirectoryEntry entry = GetDirectoryEntry();

        try
        {
            System.Text.Encoding enc = System.Text.Encoding.ASCII;
            DirectorySearcher search = new DirectorySearcher(entry);
            search.Filter = "(&(objectCategory=user)(" + ORGCODE + "=" + orgcode + "*))";
            search.PropertiesToLoad.Add(property);

            SearchResult result = search.FindOne();
            search.Dispose();
            entry.Close();
            entry.Dispose();

            if (result != null)
            {
                object value = result.Properties[property][0];
                if (value is System.Byte[])
                    return enc.GetString((byte[])value);
                else
                    return value.ToString();
            }
            else
            {
                return "-";
            }
        }
        catch (Exception ex)
        {
            string debug = ex.Message;

            return "debug";
        }
    }
} 
```

**更新：**

供您参考，以上课程在服务器上。现在，我正在开发一个新的基于 Web 的应用程序。在这个基于 Web 的应用程序中，我有一个用于输入用户名的文本框。那么我如何能够将此用户名发送到该系统并将其用户信息检索到该应用程序？你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T06:09:07.500

好的，现在了解您真正需要什么。实现这一目标的最佳方法是使用 asp.net webservices。这意味着您必须对当前在服务器上运行的代码进行一些编辑。
请查看**Asp.net Web 服务**并查看以下链接：[Microsoft Web Services weblink](http://msdn.microsoft.com/en-us/library/ms972326.aspx)和[Create and Use ASP.NET Web Service](http://www.youtube.com/watch?v=qOqEKpYbTzw)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T07:01:28.293

如果您使用的是 .NET 3.5 及更高版本，则应查看`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您可以定义域上下文并在 AD 中轻松找到用户和/或组：

```
// set up domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

// find a user
UserPrincipal user = UserPrincipal.FindByIdentity(ctx, "SomeUserName");

if(user != null)
{
   // do something here....     
}

// find the group in question
GroupPrincipal group = GroupPrincipal.FindByIdentity(ctx, "YourGroupNameHere");

// if found....
if (group != null)
{
   // iterate over members
   foreach (Principal p in group.GetMembers())
   {
      Console.WriteLine("{0}: {1}", p.StructuralObjectClass, p.DisplayName);
      // do whatever you need to do to those members
   }
} 
```

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

正如“Nation”在他的回复中提到的那样，如果您将其“隐藏”在 Web 服务接口后面，那么各种应用程序都可以调用您的代码并从 Active Directory 中获取他们需要的信息！

# actionscript-3 - ActionScript 3.0 - ByteArray 中的空字节

> ID：10569506
> 
> 赞同：2
> 
> 时间：2012-05-13T05:18:37.573
> 
> 标签：actionscript-3, bytearray

我试图了解 ByteArray 中空字节的重要性。他们的行为像终结者吗？我的意思是，一旦写入空字节，我们就不能进一步写入 ByteArray 吗？

例如，

```
import flash.utils.*;

public class print3r{
    public function print3r{
        Util.print(nullout());
    }

    public function nullout:ByteArray (){
        var bytes:ByteArray = new ByteArray();
        bytes.writeInt(((403705888 + 1) - 1)); // Non Printable Characters
        bytes.writeInt(((403705872 - 1) + 1)); // Non Printable Characters
        bytes.writeInt(0x18101000); // Notice the NullByte in this DWORD
        bytes.writeInt(0x41424344); // ASCII Characters ABCD
        return bytes;
    }
}

new print3r; 
```

这给出了一个空白输出。

现在，如果我用 0x18101010 替换 DWORD 0x18101000，这次我可以在输出中看到 ASCII 填充 ABCD。

我的问题是，是否可以将空字节写入 ByteArray()？

我问的原因是因为我在 ActionScript 代码中看到，即使在写入空字节之后，也会在 ByteArray 上执行很多 writeInt 和 writeByte 操作。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T14:01:28.723

> 是否可以将空字节写入 ByteArray()？

当然是的。`ByteArray`-- 是一大块原始数据。你可以在那里写你喜欢的任何东西，你可以用你喜欢的任何方式阅读（使用零字节作为分隔符或你可能想做的任何其他事情）。

当您使用 将字节发送到标准输出时`trace()`，您所看到的完全取决于您对数据实际执行的操作以将其转换为字符串。有几种方法可以将字节数组转换为字符串。因此，您的问题缺少对什么`Util.print()`方法的解释。

以下是将字节转换为字符串的几个选项：

*   循环遍历字节和输出字符，编码由您决定。
*   [使用ByteArray.readUTFBytes()](http://livedocs.adobe.com/livecycle/8.2/programLC/common/langref/flash/utils/ByteArray.html#readUTFBytes%28%29)读取字符串。该方法读取 utf 编码的符号；当遇到零字符时它会停止。
*   [使用ByteArray.readUTF()](http://livedocs.adobe.com/livecycle/8.2/programLC/common/langref/flash/utils/ByteArray.html#readUTFBytes%28%29)读取字符串。此方法希望您的字符串以 unsigned short 为前缀，指示其长度。在其他方面，它与 相同`ByteArray.readUTFBytes()`。
*   使用[ByteArray.toString()](http://livedocs.adobe.com/livecycle/8.2/programLC/common/langref/flash/utils/ByteArray.html#toString%28%29)。这就是当你简单地做的时候发生的事情`trace(byteArray);`。此方法忽略零字节并输出其余字节。此方法使用`System.useCodePage`设置来决定编码，如果数据以它开头，则可以使用 UTF BOM。

以下是一些说明上述情况的测试：

```
var test:ByteArray = new ByteArray();

// latin (1 byte per character)
test.writeUTFBytes("ABC");

// zero byte
test.writeByte(0);

// cyrillic (2 bytes per character)
test.writeUTFBytes("\u0410\u0411\u0412");

trace(test); // ABCАБВ
trace(test.toString()); // ABCАБВ
test.position = 0;
trace(test.readUTFBytes(test.length)); // ABC

// simple loop
var output:String = "";
var byte:uint;
for (var i:uint = 0; i<test.length; i+=1) {
    byte = uint(test[i]);
    if (output.length && i%4 == 0) {
        output += " ";
    }
    output += (byte > 0xF ? "" : "0") + byte.toString(16);
}
trace(output); // 41424300 d090d091 d092 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T10:46:25.717

据我所知，将 null 写入字节数组没有任何意义。但是 print 函数可能会将其用作字符串终止符。

# c++ - 从 AVI 捕获 OpenCV 帧

> ID：10569510
> 
> 赞同：5
> 
> 时间：2012-05-13T05:19:24.637
> 
> 标签：c++, opencv, frames, avi

我正在使用 openCV 2.2 开发一个项目。我需要对 AVI 文件的每一帧进行处理，但是当我运行我的代码时，它只抓取文件的第一帧。CV_CAP_PROP_POS_FRAMES 似乎没有工作。有什么想法为什么不呢？

```
 CvCapture* capture = cvCaptureFromAVI("test1.avi");

    IplImage *img = 0;

    if (!cvGrabFrame(capture)) {
            printf("Error: Couldn't open the image file.\n");
            return 1;
    }

    int numFrames = (int) cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_COUNT);
    int posFrame = 1;
    for(int i =0; i <= numFrames; i++){
        cvSetCaptureProperty(capture, CV_CAP_PROP_POS_FRAMES, i);
              posFrame = cvGetCaptureProperty(capture, CV_CAP_PROP_POS_FRAMES);

              img = cvGrabFrame(capture);
              cvNamedWindow("Image:", CV_WINDOW_AUTOSIZE);
              cvShowImage("Image:", img);
              printf("%i\n",posFrame);

              cvWaitKey(0);

              cvDestroyWindow("Image:");
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T07:11:42.107

为什么不使用 OpenCV 2.3 尝试这种方式？我认为它更直接，更有效，更清晰：

```
VideoCapture _videoSource;

if(!_videoSource.open("test1.avi")) 
{
   exit(1);         // Exit if fail
}
_videoSource.set(CV_CAP_PROP_CONVERT_RGB, 1);

Mat frame;
namedWindow("Image");
int posFrame;

while(1) 
{
  _videoSource >> frame;
  posFrame=_videoSource.get(CV_CAP_PROP_POS_FRAMES);
  imshow("output", frame);
  return 0;
} 
```

像这样的东西应该工作。

# javascript - JS库模拟Internet Explorer？

> ID：10569512
> 
> 赞同：6
> 
> 时间：2012-05-13T05:19:41.713
> 
> 标签：javascript, css, internet-explorer, google-chrome, webkit

Webkit中有一些JS库可以模拟IE吗？例如：IE8 目前不支持`border-radius`（可能在 IE10 上）。所以我运行了一个 JS 库来检查我是否正在使用`border-radius`然后将其删除以使其类似于 IE 视觉。

我知道这是一个疯狂的想法，但是在 IE 上工作太慢了，如果我能在 Webkit 上模拟它，那就太好了！我也需要为自己的项目做这件事。

**注意**：我知道有一个 Chrome 扩展来制作一个 IE 标签，但建议不同：我需要在 Webkit 上运行，但删除 IE 不支持的功能。

**Edit1**：我正在开发基于 Webkit 的 IDE 来开发 HTML 模板。基本上我需要一个模拟 IE 视图版本的按钮，而无需安装 IE（例如 Mac、Linux）。例如，拥有一个 Mozilla 模拟器也会很有趣。基本上我也会为每个浏览器生成一个 CSS 文件。例如：`-webkit`属性不会包含在 MSIE CSS 中。`filter`不会包含在 Webkit CSS 中（*但可以模拟*）。

所以，我会在应用一个 JS 方法来编辑或删除不支持的内容之前复制当前的 HTML 页面，使其类似于 IE。如果 IE8 不支持`border-radius`，它将被删除，我会看到基本上是 IE 版本的页面。如果 Mozilla 不支持`-webkit-box-sizing`，它将被重命名为`-moz-box-sizing`if disponible。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T05:45:04.703

我不知道任何脚本，坦率地说，我不希望很快看到脚本，因为在各种版本的浏览器中重新创建 IE 对 CSS 的支持将是一项艰巨的任务。如果像这样的无证黑客`_height`也得到支持，事情就会变得更加复杂。

坦率地说，在 IE8 中测试您的网站的最佳方法是使用 IE8+。在 IE8 和更高版本中，Microsoft 引入了浏览器仿真，允许您从单个浏览器中回退和仿真任意数量的 IE 版本——我每天都使用这个，这是一个很棒的功能。

在 IE 中，按 F12 打开开发者工具，然后您可以将*浏览器模式*更改为 IE8。无需刷新，因为浏览器会自行处理。使用这种方法，您可以通过单击按钮快速测试版本 7 到 10（假设您从 IE10 进行测试）。

### 禁用 CSS3

如果您只想禁用 CSS3 功能，您可以使用[Strip Tease](http://css-tricks.com/examples/CSS3StripTease/)小书签。这不是一个完全开发的解决方案，所以请记住，它不会处理高级选择器等问题。

# android - 我如何识别该应用程序可移动到 SD 卡？

> ID：10569513
> 
> 赞同：4
> 
> 时间：2012-05-13T05:19:57.417
> 
> 标签：android

我想确定安装在手机内存和可移动到 sdcard 上的应用程序列表。我正在使用以下功能来获取已安装应用程序的列表。

我已经检查了 InstalledAppDetails 的 Android 源代码，但无法获得解决方案。

提前谢谢

```
private List<App> loadInstalledApps(boolean includeSysApps) 
   {
       List<App> apps = new ArrayList<App>();

       //   the package manager contains the information about all installed apps
       PackageManager packageManager = getPackageManager();

       List<PackageInfo> packs = packageManager.getInstalledPackages(0); //PackageManager.GET_META_DATA 

       for(int i = 0; i < packs.size(); i++) 
       {
           PackageInfo p = packs.get(i);
           ApplicationInfo a = p.applicationInfo;
           // skip system apps if they shall not be included
           if ((!includeSysApps) && ((a.flags & ApplicationInfo.FLAG_SYSTEM) == 1)) 
           {
               continue;
           }

           App app = new App();
           app.setTitle(p.applicationInfo.loadLabel(packageManager).toString());
           app.setPackageName(p.packageName);
           app.setVersionName(p.versionName);
           app.setVersionCode(p.versionCode);
           app.setInstallDir(p.applicationInfo.sourceDir);
           app.setInstallSize(calculateSize(app.getInstallDir()));
           CharSequence description = p.applicationInfo.loadDescription(packageManager);
           app.setDescription(description != null ? description.toString() : "");
           if(app.getInstallDir().contains("/mnt"))
           {
               //app on sdcard
               apps.add(app);
           }
           else
           {
               //app on phone memory
               apps.add(app);
           }        
       }
       return apps;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:13:25.297

应用安装位置在应用的 AndroidManifest.xml 中指定。在[这里](http://developer.android.com/guide/appendix/install-location.html)查看更多信息。简而言之：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
android:installLocation="preferExternal"
... > 
```

或者

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
android:installLocation="auto"
... > 
```

Where`auto`表示该应用程序可能安装在外部设备上，但您没有偏好；并且`preferExternal`意味着该应用程序将尽可能安装在外部设备上

请记住...

> 如果您不声明此属性，您的应用程序将仅安装在内部存储上，而不能移动到外部存储上。

所以，现在的问题是如何从应用程序中获取 androidManifest.xml 文件。好吧，您可以从 APK 中获取它（如果安装后未删除）。对于这个问题，看看这篇文章：[如何解析 .apk 包内的 AndroidManifest.xml 文件](https://stackoverflow.com/questions/2097813/how-to-parse-the-androidmanifest-xml-file-inside-an-apk-package)

最后，在这篇文章中也找到了关于解析 xml 的一个很好的主题。[访问 android:installLocation 清单属性](https://stackoverflow.com/questions/3065219/accessing-androidinstalllocation-manifest-attribute)

干杯，奥尔多

# javascript - Google Apps 脚本 - 电子表格中的通用标题

> ID：10569514
> 
> 赞同：0
> 
> 时间：2012-05-13T05:20:07.807
> 
> 标签：javascript, google-apps-script

快速看看我通常会打扰人们告诉我这里是提问的新地方！

我一直在制作一个脚本来创建从电子表格数据生成的文档，而电子表格数据又是从谷歌表单生成的。（希望这是有道理的......）

无论如何，通过大量搜索和一些帮助，我已经非常成功，但现在我想让我的脚本同质化，所以当我想设置新表单等时我不需要修改它。

我有来自 Googles 脚本教程的 getRowData 函数，但不是从规范化的标题中调用行数据，我希望这些是通用的，即 Column1、Column2 等。

我已经粘贴了下面的教程函数，它将数据传递给另一个函数，该函数将标头规范化以用作对象，我在想那是我可以使它们通用但我不知道如何开始使用它...

任何帮助将不胜感激！！

谢谢，

亚历克斯

```
// getRowsData iterates row by row in the input range and returns an array of objects.
// Each object contains all the data for a given row, indexed by its normalized column name.
// Arguments:
//   - sheet: the sheet object that contains the data to be processed
//   - range: the exact range of cells where the data is stored
//   - columnHeadersRowIndex: specifies the row number where the column names are stored.
//       This argument is optional and it defaults to the row immediately above range; 
// Returns an Array of objects.
function getRowsData(sheet, range, columnHeadersRowIndex) {
  columnHeadersRowIndex = columnHeadersRowIndex || range.getRowIndex() - 1;
  var numColumns = range.getEndColumn() - range.getColumn() + 1;
  var headersRange = sheet.getRange(columnHeadersRowIndex, range.getColumn(), 1, numColumns);
  var headers = headersRange.getValues()[0];
//  Browser.msgBox(headers.toSource());
  return getObjects(range.getValues(), normalizeHeaders(headers));
//  return getObjects(range.getRowIndex);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T22:18:37.457

如果您想使用它们的索引获取列，为什么要将它们解析为对象呢？只需使用平原`getValues`！

```
var values = sheet.getDataRange().getValues();
var row2 = values[1];
var cell_in_col4 = row2[3]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T17:31:38.467

声明 columnHeadersRowIndex 变量时，您似乎缺少“var”。

# python - 如何组织代码/何时使用类？

> ID：10569516
> 
> 赞同：1
> 
> 时间：2012-05-13T05:20:41.270
> 
> 标签：python

目标是创建一个程序，该程序将有效地让用户创建布尔逻辑语句（未启动），存储这些表达式，访问它们（expression_menu），构建它们（setup_table）然后评估它们（truth），然后最终测试它们（in另一个模块）。

鉴于所有这些，这对我的技能来说是一个相当大的项目。我被困在如何组织一切。我觉得我可能想要转向使用类，因为跟踪属性可能更容易......

然而，我的问题是如何围绕布尔逻辑语句进行传输，显然在第 29 行我会得到一个语法错误，因为 x 是未定义的（代码片段仅在第 11 行到第 15 行有意义。

我如何在这里组织我的代码以更好地满足我的目标

```
def setup_table(variables=2):
    return (list(itertools.product(range(2), repeat = variables)))

def truth(variables=None,expression=None):
    truth_table = []
    for x in setup_table(variables):
        if expression:
            x.append(1)
        else:
            x.append(0)
        truth_table.append(x)
    return truth_table

def expression_menu():
    expression = input('''
    choose your expression:
    1\. if ((p and q) or (p or q)) and not(r or not q):
    2\. if (p or r) or (q and s):
    3\. if (p or r) and ( q or (p and s))

    Expression: ''')
    table = None
    if int(expression) == 1:
        table = truth(variables = 3, expression =((x[0] and x[1]) or (x[0] or x[1])) and not (x[
    print(table)

if __name__ == "__main__":
    import itertools
    expression_menu() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T05:32:45.547

你可以把你的布尔表达式变成一个函数。

所以：

```
table = truth(variables = 3, expression = lambda x: (x[0] and x[1])) 
```

或者：

```
def expression(x):
    return x[0] and x[1]
table = truth(variables = 3, expression = expression) 
```

# search - 使用关键字查询 MongoDB

> ID：10569518
> 
> 赞同：-1
> 
> 时间：2012-05-13T05:21:06.480
> 
> 标签：search, mongodb

我有大量存储在 MongoDB 中的推文。推文看起来像这样：

```
"_id" : ObjectId("4c02c58de500fe1be1000005"),
"contributors" : null,
"text" : "Hello world",
"user" : {
    "following" : null,
    "followers_count" : 5,
    "utc_offset" : null,
    "location" : "",
    "profile_text_color" : "000000",
    "friends_count" : 11,
    "profile_link_color" : "0000ff",
    "verified" : false,
    "protected" : false,
    "url" : null,
    "contributors_enabled" : false,
    "created_at" : "Sun May 30 18:47:06 +0000 2010",
    "geo_enabled" : false,
    "profile_sidebar_border_color" : "87bc44",
    "statuses_count" : 13,
    "favourites_count" : 0,
    "description" : "",
    "notifications" : null,
    "profile_background_tile" : false,
    "lang" : "en",
    "id" : 149978111,
    "time_zone" : null,
    "profile_sidebar_fill_color" : "e0ff92"
},
"geo" : null,
"coordinates" : null,
"in_reply_to_user_id" : 149183152,
"place" : null,
"created_at" : "Sun May 30 20:07:35 +0000 2010",
"source" : "web",
"in_reply_to_status_id" : {
    "floatApprox" : 15061797850
},
"truncated" : false,
"favorited" : false,
"id" : {
    "floatApprox" : 15061838001 
```

例如，如果我想查找关于某个主题的推文，例如佳能，那么我应该如何编写一个查询来检查“文本”并找到所有关于“佳能”的推文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T05:30:27.340

MongoDB 没有直接在文本中搜索的原生查询支持。有官方文档向您展示了如何实现全文搜索的简单方法：
[http ://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo](http://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo)

它涉及将文本拆分为单词，并将它们存储在您索引的数组中。这使您可以匹配数组的内容。如何拆分它们是您的选择。也许你只是做单词，小写，然后匹配一个小写的关键字。或者，也许您需要自动完成功能，以便对每个单词或语音等进行变体。这就是词干。

它不像全文搜索引擎那样强大，旨在做到这一点，但它确实有效。根据您使用的语言，某些框架具有搜索包。例如，我将 mongodb 与[django 的 nonrel 项目](http://www.allbuttonspressed.com/projects/django-nonrel)一起使用，并且有一个[搜索应用程序](http://www.allbuttonspressed.com/projects/nonrel-search)，它提供了词干提取和不同的搜索工具。

# java - Java for 循环错误

> ID：10569519
> 
> 赞同：-4
> 
> 时间：2012-05-13T05:21:17.740
> 
> 标签：java, for-loop, applet

```
Image probe;

Thread t;
public int x=410,y=250;

public void init()
{
    //Images Call
    probe = getImage(getDocumentBase(),"image/probe.png");

    t = new Thread();   
}

public void paint(Graphics g)
{
    for(int i=0;i<5;i++)
    {
        g.drawImage(probe,x,y,50,50,this);
        g.setColor(Color.red);
        System.out.print(i);
        x=x+10;
        y=y+10;
        repaint();

        try
        {
            t.sleep(100);
        } catch(Exception e) {}
    }
} 
```

所以在这它应该做我的for循环5次正确吗？但相反，它一遍又一遍地做，当我希望它移动 5 次然后停止时，它永远不会停止，而是它只会永远持续下去。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T05:36:47.347

如果您的循环在`paint()`方法中并且您`repaint()`从循环中调用，您将导致该方法被连续调用！您的循环不会一遍又一遍地执行，它会执行一次，然后调用自己再次调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T05:38:21.183

如果你在你的方法中调用[repaint()](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Component.html#repaint%28%29)`paint()`，它会`paint()`一遍又一遍地调用。

# templates - Play 2.0 模板中 object.member 的模式匹配

> ID：10569520
> 
> 赞同：7
> 
> 时间：2012-05-13T05:21:29.473
> 
> 标签：templates, scala, playframework, pattern-matching, playframework-2.0

根据[Play 2.0 文档](http://www.playframework.org/documentation/2.0.1/ScalaTemplates)，模式匹配可以在模板中完成，如下所示：

```
@connected match {

  case models.Admin(name) => {
    <span class="admin">Connected as admin (@name)</span>
  }

  case models.User(name) => {
    <span>Connected as @name</span>
  }   
} 
```

case 表达式后面的括号之间的文本被视为输出（例如 HTML），这非常方便。

但是，当尝试使用不是简单变量的匹配表达式时，例如 object.member，如下所示：

```
@album.year match {
   case Some(y: Int) => { @y }
   case None => { <b>nope</b> }
} 
```

它会导致编译错误： `"')' expected but 'case' found."`

用于将`defining`表达式绑定到一个简单的变量，如下所示：

```
@defining(album.year) { foo =>
  @foo match {
        case Some(y: Int) => { @y }
        case None => { <b>nope</b> }
      }
  } 
```

工作，但它似乎有点麻烦。

是否有适当的方法在涉及对象和成员（例如`album.year`）的表达式上使用此模式匹配功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:20:21.467

你试过这个吗？

```
@album.year match {

   case Some(y: Int) => {
     @y 
   }
   case None => { 
     <b>nope</b> 
   }
} 
```

有关示例，请参见此处：[https ://github.com/bjartek/computer-database-mongo/blob/matchtest/app/views/list.scala.html#L67](https://github.com/bjartek/computer-database-mongo/blob/matchtest/app/views/list.scala.html#L67)

在模板中执行此操作时，空格似乎非常重要

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T23:19:20.153

目前不可能（在 2.0.1 版中），因为这是一个已确认的错误：

[https://play.lighthouseapp.com/projects/82401/tickets/46-support-more-complex-match-statement](https://play.lighthouseapp.com/projects/82401/tickets/46-support-more-complex-match-statement)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T20:21:27.983

你试过这样做吗？

```
@album.year.getOrElse("<b>None</b>"); 
```

不确定它是否像那样简单，但它应该可以工作。见[https://github.com/playframework/Play20/blob/master/samples/scala/computer-database/app/views/list.scala.html#L64](https://github.com/playframework/Play20/blob/master/samples/scala/computer-database/app/views/list.scala.html#L64)

# html - Twitter Bootstrap 折叠是如何工作的？

> ID：10569521
> 
> 赞同：4
> 
> 时间：2012-05-13T05:22:17.197
> 
> 标签：html, css, twitter-bootstrap

所以我一直在玩弄[Twitter Bootstrap 网站](http://twitter.github.com/bootstrap/index.html)，我对缩小浏览器窗口时顶部导航栏如何折叠成不同的布局很感兴趣。

这是扩展后的样子：

![Twitter Bootstrap 栏已展开](../Images/fe6be69088968cb2e3f2097f66016d77.png)

这是折叠时的样子： ![Twitter Bootstrap 栏已折叠](../Images/b481bc920a3159b03e399ec2257b7b53.png)

它是如何做到的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T05:45:33.413

它通过媒体查询进行更改。CSS3 允许按媒体（视口？）和检测诸如宽度/高度之类的媒体相关样式表

有关媒体查询的更多阅读：[https](https://developer.mozilla.org/en/CSS/Media_queries) ://developer.mozilla.org/en/CSS/Media_queries 我看了他们的 css，但你可以在页面 css 源中得到提示：**bootstrap-responsive.css**

我相信 bootstrap 也可以通过他们的工具包促进响应式设计。希望这可以帮助。

# delphi - 如何更改默认的delphi停靠表单标题高度？

> ID：10569526
> 
> 赞同：3
> 
> 时间：2012-05-13T05:23:19.410
> 
> 标签：delphi, delphi-xe2

我使用标准的 delphi 停靠功能将表单停靠到 TPanel。停靠表格的标题看起来像这样 ![在此处输入图像描述](../Images/6010b273037efaad219f0c12469d3c56.png)

如何修改它的外观？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T08:29:02.897

默认外观来自[`TCaptionedDockTree`](http://docwiki.embarcadero.com/Libraries/en/Vcl.CaptionedDockTree.TCaptionedDockTree). 您可以编写自己的后代并将其分配[`DefaultDockTreeClass`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Controls.DefaultDockTreeClass)给替换它。要更改标题高度，请覆盖[`AdjustCaptionRect`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.CaptionedDockTree.TCaptionedDockTree.AdjustCaptionRect). 要更改标题的实际绘制，请使用覆盖和/或方法覆盖[`GetDockCaptionDrawer`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.CaptionedDockTree.TCaptionedDockTree.GetDockCaptionDrawer)以返回您自己的后代。`TDockCaptionDrawer``DrawDockCaption``DockCaptionHitTest`

# ruby - Ruby - Array#<< 和 Array#push 之间的区别

> ID：10569529
> 
> 赞同：64
> 
> 时间：2012-05-13T05:24:15.030
> 
> 标签：ruby, arrays, append

通过检查 Ruby 1.9.3 的文档，两者`Array#<<`和`Array#push`都旨在实现将元素附加到当前数组的末尾。但是，两者之间似乎存在细微差别。

我遇到的一个是`*`运算符可用于将整个其他数组的内容附加到当前数组，但只能使用`#push`.

```
a = [1,2,3]
b = [4,5,6]

a.push *b
=> [1,2,3,4,5,6] 
```

尝试`#<<`改用会产生各种错误，具体取决于它是否与点运算符和/或括号一起使用。

为什么`#<<`工作方式`#push`不一样呢？一个实际上不是另一个的别名吗？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-05-13T05:29:28.850

它们非常相似，但并不完全相同。

[`<<`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-3C-3C)接受单个参数，并将其推送到数组的末尾。

[`push`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-push)另一方面，接受一个或多个参数，将它们全部推到最后。

仅接受单个对象的事实`<<`就是您看到错误的原因。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-04-08T15:09:07.850

这里要注意的另一个重点是，`<<`它也是一个运算符，它的优先级低于或高于其他运算符。这可能会导致意想不到的结果。

例如，`<<`具有比三元运算符更高的优先级，如下图所示：

```
arr1, arr2 = [], []

arr1.push true ? 1 : 0
arr1
# => [1] 

arr2 << true ? 1 : 0
arr2
# => [true] 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-13T05:30:46.893

`<<`不起作用和起作用的原因`push`是：

1.  `push`可以接受许多参数（当你这样做时会发生这种情况`*b`）。
2.  `<<`只接受一个参数。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-08-15T06:17:26.867

Array#<< 和 Array#push 之间的主要区别是

```
Array#<< # can be used to insert only single element in the Array

Array#push # can be used to insert more than single element in the Array 
```

另一个显着的区别是，在插入单个元素的情况下，

Array#<< 比 Array#push 快

[基准测试](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.html)可以帮助找出这两种方法的性能，[在这里](https://rubyinrails.com/2013/08/14/difference-between-array-push-and-array-insert/)找到更多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-13T06:07:12.443

该`push`方法将一项附加到数组的末尾。它可以有多个参数。 `<<`用于初始化数组，只能有一个参数，如果已经初始化，则在数组末尾添加一个元素。

# c# - 是否可以保证使用任务工厂创建的任务不会在 WPF 的 UI 线程中调度？

> ID：10569530
> 
> 赞同：3
> 
> 时间：2012-05-13T05:24:39.230
> 
> 标签：c#, .net, wpf, multithreading, task-parallel-library

以前我使用后台工作线程进行服务调用并且不阻塞 UI 线程。目前开始使用 TPL，但理想情况下任务应该用于 CPU 密集型任务..

所以想知道使用任务处理进行服务调用是否有什么问题，因为会有很多线程处于空闲状态，直到服务调用完成？

同样关于原始问题，是否可以保证始终在与 WPF 应用程序中的 UI 线程不同的线程上调用创建的任务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T09:34:52.350

这[`TaskCreationOptions.LongRunning`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskcreationoptions.aspx)就是为了。这告诉任务调度器该任务需要一段时间才能完成，因此线程池的有限资源将不会被使用。

至于您的实际问题，在 UI 线程上执行任务的唯一可能方式是：

*   您使用在 UI 线程上执行其任务的任务调度程序（例如使用[`TaskScheduler.FromCurrentSynchronizationContext`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.fromcurrentsynchronizationcontext.aspx)）
*   您[`TaskContinuationOptions.ExecuteSynchronously`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskcontinuationoptions.aspx)在从 UI 线程上执行的任务继续执行的任务上指定

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-13T09:49:31.267

任务是计划以*某种方式*运行的工作的抽象。它不一定是 CPU 密集型的。

通常，当您创建 a 时`Task`，它使用默认调度程序，该调度程序将其安排在线程池上（这意味着它不会在 UI 线程上）。您可以使用`TaskScheduler.FromCurrentSynchronizationContext`创建将工作发布到 UI 线程的调度程序。

要实现`BackgroundWorker`与任务类似的行为，您可以使用：

```
var syncScheduler = TaskScheduler.FromCurrentSynchronizationContext(); // must be called on the UI thread
var task = ... // create the task
task.ContinueWith(t => { /* update the UI here */ }, syncScheduler); 
```

关于服务调用，如果你不想浪费线程池线程等待 IO，你应该使用 WCF 的[APM](http://msdn.microsoft.com/en-us/library/ms730059.aspx)模式，结合[本文](http://blogs.msdn.com/b/rjacobs/archive/2011/06/30/how-to-implement-a-wcf-asynchronous-service-operation-with-task-lt-t-gt.aspx)`TaskFactory.FromAsync`中的解释。

# objective-c - 将 .c 文件添加到 xcode

> ID：10569532
> 
> 赞同：2
> 
> 时间：2012-05-13T05:25:07.623
> 
> 标签：objective-c, c, xcode

我正在尝试将 hypen 库添加到我的 Xcode iOS 项目中，它有 4 个文件：hyphen.c、hyphen.h、hnjalloc.c、hnjalloc.h。我将它们拖到我的项目中并点击构建，但我得到了架构 i386 错误的未定义符号。除了将它们拖到我的项目之外，我是否应该采取任何其他步骤？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T05:38:33.023

确保您已将它们添加到构建目标 - 将文件包含到项目中而不包含在构建目标中很容易导致此错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T10:42:52.090

右键单击源文件夹（所有文件夹所在的左上角）并检查添加。然后选择要添加的文件。我尝试拖放时链接器出现问题。

# dojo - 获取道场组合框选定项的 ID 值

> ID：10569536
> 
> 赞同：1
> 
> 时间：2012-05-13T05:26:35.430
> 
> 标签：dojo

```
 var xhrArgs = {
     url: "../Person/GetAll",
         handleAs: "json",
         preventCache: true,
       load: function (data, ioargs) {
            var jsonString = dojo.toJson(data)
            var dataStore = new dojo.store.Memory({ data:
            dojo.fromJson(jsonString) });
    var personCmb = dijit.byId('cmbSingers');
                        if (personCmb == null)
 {
     var cobox = new dijit.form.ComboBox({ id: "cmbSingers", name: "Name", store: dataStore, searchAttr: "Name" }, "cmbSingers");

                                cobox.startup();
                            }

     function cmbSingers_OnSelected() {

               alert(dijit.byId('cmbSingers').get('value')); **this return the Text, But I want to get Id of Select value**     

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-29T16:01:29.320

对于任何在 2016+ 年寻找解决方案的人......我遇到了同样的情况，并找到了一种从 Dojo ComboBox 获取所选选项值的方法。不要只使用 .value 或 .get('value')，而是使用 .item.value：

```
dijit.byId('someComboBox').item.value 
```

.item 将返回一个像这样的对象供您使用： **Object {id: "1", value: "1", name: "One"}**

详细说明...假设您使用这样的**选择**来定义 ComboBox 的选项：

```
<select dojoType="dijit.form.ComboBox" id="someComboBox" maxlength="30">
   <option value=""></option>
   <option value="1">One</option>
   <option value="2">Two</option>
   <option value="3">Three</option>
</select> 
```

假设您选择“一个”选项。
调用**dijit.byId('someComboBox').value**将返回**"One"**，但调用**dijit.byId('someComboBox').item.value**将返回**"1"**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T15:58:17.490

Mkay, json is like so?

`{ identifier: 'Id', items: [ { Id: '1', name:'foo', age: 12 }, { Id: '2', name:'bar', age: 30 } ] }`

And you have `dijit.form.ComboBox` in variable `cobox`, your `dojo.data.ItemFileReadStore` in variable `store`.

```
dojo.connect(cobox, "onChange", function() {

  var val = this.get("value"),
    id = "",
    matcher = new RegExp("^" + val + "$");

  dojo.some(store._arrayOfAllItems, function(item, idx) {

   if(matcher.test(store.getValue(item, "name")) {
      id = store.getValue(item, "Id");
      return true; // breaks .some loop
   }
  });

}); 
```

# hadoop - 建议hadoop架构

> ID：10569537
> 
> 赞同：1
> 
> 时间：2012-05-13T05:27:25.577
> 
> 标签：hadoop, hdfs

我有一个脚本，它匹配 500 万条记录（A）和 4 万条记录（B）。如果匹配，则将电子邮件异步放置到队列中。

如果 A 的某些属性与 B 匹配，则匹配发生。目前此脚本大约需要 1 天才能完成。

我想将这段时间减少到使用 hadoop 的 3 到 4 个小时。

我想，我会将 A 存储在文件中，这个文件将输入到我的 Mapper 中。可以淘汰减速机。

对于 B 的最小或无磁盘读取的存储策略应该是什么？就像我应该把它放在哪里一样。内存缓存、hdfs 等。Memcache 似乎是一个不错的选择，因为它消除了运行时的磁盘访问。但欢迎提出建议。

我是hadoop的新手。那么在这种情况下推荐的方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T06:10:08.400

我不确定我能不能给出一个合适的答案......
你的 B 文件是否足够小，可以将它们全部放入映射器的内存中？
如果是这样，Hadoop 有一种称为分布式缓存的机制。它可以将文件分发到集群中的所有节点。在您的情况下，您可以使 B 成为缓存文件，通过 configure() 将其加载到内存中并在映射器中使用它。

`DistributedCache.addCacheFile(/*B's path*/); //in run()`

# c# - 在卸载 C# Winforms 期间删除 SQL Server 数据库

> ID：10569538
> 
> 赞同：0
> 
> 时间：2012-05-13T05:27:45.203
> 
> 标签：c#, visual-studio-2010, installation, sql-server-express

我通过**VS2010 Windows Installer创建了一个****MSI** Installer 。

 **我能够设置 C# 程序，并且能够将数据库附加到 SQL Server Express。

`.ldf`当我卸载我的应用程序时，如何删除程序文件中的文件并删除在附加到 SQL Server Express 期间创建的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T06:12:52.833

> 当我卸载我的应用程序时，如何删除程序文件中的 .ldf 文件并删除在附加到 ms sql express 期间创建的数据库？

两个字：自定义动作。Protram 在卸载期间执行的自定义操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T06:45:38.297

在 sql 中执行 DROP DATABASE 命令。

[http://msdn.microsoft.com/en-us/library/ms178613.aspx](http://msdn.microsoft.com/en-us/library/ms178613.aspx)**

# html - Sencha Touch 2 中的面板中的面板

> ID：10569541
> 
> 赞同：1
> 
> 时间：2012-05-13T05:28:19.100
> 
> 标签：html, sencha-touch, extjs, sencha-touch-2

我是 Sencha Touch 2 的新手，我想要类似的东西：

*   一个列表（例如，用于待办事项，仅用于试用 ST2），我可以在其中点击以编辑或将其设置为已完成等。

我不确定我做得对，但我想我有一个面板，左侧包含列表，右侧包含详细信息视图。查看 Conatiner 的文档：

```
//this is the Panel we'll be adding below
var aboutPanel = Ext.create('Ext.Panel', {
    html: 'About this app'
});

//this is the Panel we'll be adding to
var mainPanel = Ext.create('Ext.Panel', {
    fullscreen: true,

    layout: 'hbox',
    defaults: {
        flex: 1
    },

    items: {
        html: 'First Panel',
        style: 'background-color: #5E99CC;'
    }
});

//now we add the first panel inside the second
mainPanel.add(aboutPanel); 
```

我想我也许可以使用该`config`属性来配置我的面板：

```
Ext.define("SimpleTodo.view.Main", {
    extend: 'Ext.Panel',
    config: {
        items: [
            {
                xtype: 'panel',
                config: {
                    html: 'Panel 1 ...'
                }
            },
            {
                xtype: 'panel',
                config: {
                    html: 'Panel 2 ...'
                }
            }
        ]
    }
}); 
```

失败：空白屏幕。如果我在其中添加`html`属性`config`，则会显示 HTML，但是我在做什么错了`items`？

你可能也注意到了，我有一个左边的列表和右边的细节。这对平板电脑很好，但我怎样才能让它适用于手机呢？我是否需要为它们使用配置文件和单独的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T07:11:09.320

> 但是我对这些物品做错了什么？

您没有组件的`config`属性`panel`。因此，删除`config`每个人的属性`panel`并直接使用`html`属性在每个人中设置html`panel`

像这样，

```
{
  xtype: 'panel',
  html: 'Panel 1 ...'
},
{
  xtype: 'panel',
  html: 'Panel 2 ...'
} 
```

# javascript - 如何阻止页面宽度javascript

> ID：10569542
> 
> 赞同：0
> 
> 时间：2012-05-13T05:29:22.527
> 
> 标签：javascript

```
...
<head>
    <script type="text/javascript" src="a.js"></script>
</head>
<body>
    <button id="test">click me</button>
    <script type="text/javascript">
        show();
        document.getElementById('test').onclick=function(){
            show();
        }
    </script>
</body>
</html> 
```

上面的代码：

我把标签`a.js`放在`<head>`标签里，`a.js`里面有一个`b.js`由

```
document.getElementsByTagName('head')[0].appendChild(document.createElement('script'));  function show(){...} 
```

在 b.js 中；

现在我想`show()`在b.js中调用which，但是出错了，因为b.js没有加载；

我想添加一些代码来阻止页面加载。

`while(){}` ?

* * *

实际上，我了解到 b.js 应该在调用函数 show 时加载；

但是点击事件呢？另外，我必须把 show() 放在页面中。

现在，我将另一个 js(base.js) 放入 head 标签中，上面的代码将是这样的：

```
...
<head>
<script type="text/javascript" src="base.js"></script>
<script type="text/javascript" src="a.js"></script>
</head>
<body>
    <button id="test"></button>
    <script type="text/javascript">
        //invoke button click event from base.js and b.js
    </script>
</body>
... 
```

比如base.js和b.js绑定了两个click事件（通过a.js加载ansync），当用户点击页面中的按钮时，base.js中绑定的事件会立即被调用，然后。 ..错误...

我必须将调用者放在 body 标记中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T05:34:00.320

您将不得不等到`b.js`加载。

jQuery的方法：

```
$("<script>").attr("src","b.js").appendTo("head").load(show); 
```

原生 JavaScript：

```
var ele = document.createElement('script');
ele.src = "b.js";
document.getElementsByTagName('head')[0].appendChild(ele);
ele.addEventListener("load",show,false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T05:33:45.330

为什么不阻止页面加载，而不是`onload`在窗口事件上运行代码？

```
window.onload = function() {
    show();
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T05:33:52.620

您可以在从该脚本执行任何操作之前收听 onload 事件以确保它们已加载。

```
//a simple script loader
function loadScript(url,callback){
    var s = document.createElement('script');                    //new script
    var document.getElementsByTagName('head')[0].appendChild(s); //append to head
    s.onload = function(){                                       //add onload
        callback();                                              //callback when done
    }
    s.src = url;                                                 //start download
}

//load b.js and run "show()" when b.js is loaded
loadScript('b.js',function(){
    show();
}); 
```

# java - 如何制作 Netbeans 拥有的桌面窗格

> ID：10569550
> 
> 赞同：0
> 
> 时间：2012-05-13T05:30:49.667
> 
> 标签：java, netbeans, panel, desktop

因此，当我启动 Netbeans 时，它们会在桌面上创建一个小面板来显示加载进度。我很确定 Microsoft Office 2010 也使用它。我很好奇如何用java制作其中之一？我查看了 API 并看到了 JDesktopPane。但我认为这不是我想要的，除非你能把它放在实际的桌面上，但我不确定。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T05:33:52.037

您实际上可以使用 JPanel 来做到这一点..您不需要做任何其他事情..不需要桌面窗格您需要做的就是设计一个`JPanel`并在其中放置一个进度条，该进度条将链接到一个进程并显示多少它已经完成了。JPanel 没有正常的框架功能，如最小化、关闭等，并且会完全按照您的要求进行操作。

**更新：**刚刚尝试做你想做的事。您需要开始使用 JFrame。并将其装饰设置为假。在 Netbeans 中，您可以转到 Frame 属性并将 Undecorated 设置为 true 或您可以编写的内部代码`setUndecorated(true);`

然后你必须设计你的框架，在其中放置一个进度条，将其链接到一个函数，将其 onTop 值设置为 true（这意味着它将始终在顶部）并将其位置设置为屏幕中心。完毕！！你准备好了你的窗户！！

# python - 在多个端口上运行套接字脚本

> ID：10569551
> 
> 赞同：0
> 
> 时间：2012-05-13T05:31:11.937
> 
> 标签：python, ios, sockets, twisted

我想要做的是在每个端口 1025+ 上运行以下脚本。我正在做的是制作一个与此脚本交互的 Blackjack iPhone 应用程序以进行在线游戏。问题是，我想通过更改端口来手动将其放在每个端口上，以便每次监听所有端口。我该怎么做才能在每个端口上都有一个新表。每张牌桌都有一个 ID，应用程序将检查该 ID 以查看牌桌人数和牌桌人数。

套接字为 Table 类设置 ID，但我需要在多个端口上才能保持该表继续运行并保存每个玩家的移动等。

底线，我怎样才能让这个脚本在每个端口上运行，我怎样才能自己改变监听端口，我怎样才能让python在每个端口上自己制作所有的表？

```
class Table:
    def __init__(self, id):
        self.players = []
        self.positions = {'1': '', '2': '', '3': '', '4': ''}

    def sit(self, player_id, position):
        self.positions[position] = player_id

# --------------------------------------------- #
# --------------------------------------------- #

class Socket(Protocol):
    def connectionMade(self):
        #self.transport.write("""connected""")
        self.factory.clients.append(self)
        print "Clients are ", self.factory.clients

    def connectionLost(self, reason):
        self.factory.clients.remove(self)

    def dataReceived(self, data):
        #print "data is ", data
        a = data.split(':')
        if len(a) > 1:
            command = a[0]
            content = a[1]

            msg = ""

        print msg

        for c in self.factory.clients:
            c.message(msg)

    def message(self, message):
        self.transport.write(message)

factory = Factory()
factory.protocol = Socket
factory.clients = []

reactor.listenTCP(1025, factory)
print "Blackjack server started"
reactor.run() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T06:08:27.877

# 回答你的问题

你问：

*   如何让这个脚本在每个端口上运行？
*   如何自行更改监听端口？
*   如何让 python 在每个端口上自己制作所有表格？

我认为这里的答案是简单地使用循环将工厂绑定到任意数量的端口。但是，由于您也在工厂中存储了客户列表，因此您还需要为到达端口创建一个新工厂。所以像：

```
factories = [ ]
for i in range(0, NUM_TABLES):
    factory = Factory()
    factory.protocol = Socket()
    factory.clicents = []
    factories.append(factory)
    reactor.listenTCP(1025 + i, factory)
    reactor.run() 
```

您正在使用类，因此每个工厂都有自己的客户端列表，每个工厂都有自己的 Socket 实例来管理连接。您没有展示`Table`实例是如何实例化的，但只要每个 Socket 或 Factory 实例实例化并维护对 的引用`Table`，这应该允许您拥有多个连接，每个连接都有自己的状态。

通过保留所有工厂的列表，您可以遍历它们以制作正在运行的游戏列表等。

# 考虑不同的架构

虽然上述方法可能有效，但这并不是客户端-服务器系统通常的架构方式。特别是，您的系统需要您的客户端知道要使用的端口。当你们都在客厅时，这可能会临时起作用，但这很乏味，而且一般不会扩展。

你想要的是一些东西，比如一个网络服务器，它在一个端口上侦听以建立连接，然后告诉客户端：“嘿，你的表 id 是 25，只要你想说话就用它”。此外，这意味着为客户提供一个表格列表，以便他们可以选择一个。而且，您可以从那里获得更多乐趣：给客户端一个特殊的过期 cookie，这样它就不会意外地破解/干扰不再属于它的游戏等。

# java - 如何使用在后台运行的 java 程序从用户那里获取输入？(SetWindowsHookEx)

> ID：10569553
> 
> 赞同：0
> 
> 时间：2012-05-13T05:32:11.200
> 
> 标签：java, input, background, keylogger

当程序在后台运行时，有什么方法可以从用户那里获取输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T05:44:13.537

您可以轻松弹出一个 GUI 要求输入。以下提示用户输入字符串：

```
String myString = JOptionPane.showInputDialog("Input some string"); 
```

您将需要导入`javax.swing.JOptionPane`

javadoc 位于[http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html)。请注意，如果用户取消对话框，`JOptionPane.showInputDialog()`它将返回。`null`

# sql - 如何从 sp 中的源表快速填充临时表结构？

> ID：10569558
> 
> 赞同：0
> 
> 时间：2012-05-13T05:33:43.003
> 
> 标签：sql, sql-server

我想从 sp 中的物理表创建一个临时表结构。

我有两种方法

```
Select * into #temptable from MainTable where NULL=NULL 
```

或者

```
Select * into #temptable from MainTable where 1=0 
```

我在 sp 中有许多创建临时表结构的语句，因此有必要选择更好的方法来创建临时表。

请让我知道创建高性能临时表的更好方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T11:41:46.273

此外，您可以使用`TOP(0)`：

```
SELECT  TOP(0) *
INTO    #TempTable
FROM    SourceTable 
```

但是在所有这三种情况下（`SELECT TOP(0)`, `WHERE NULL=NULL`, `WHERE 1=0`），执行计划都是一样的： ![在此处输入图像描述](../Images/efcac47626ad5fab1bb47eab8be41007.png)

在所有这些情况下，SQL Server 将从查询优化阶段知道这些查询在执行时不会生成行。`Sales.SalesOrderHeader`因此，服务器将使用[`Constant Scan`运算符](http://msdn.microsoft.com/en-us/library/aa178579%28v=sql.80%29.aspx)，而不是从源表（在这种情况下）读取数据：

1)

> [...] 查询优化器可能知道没有记录可以满足谓词，甚至在接触任何数据页之前 [（来源）](http://www.benjaminnevarez.com/tag/contradiction-detection/)

2)

> 矛盾检测是一种优化，它可以识别何时以永远不会返回任何行的方式编写查询。 [（来源）](http://www.simple-talk.com/sql/t-sql-programming/13-things-you-should-know-about-statistics-and-the-query-optimizer/)

**结论**：您可以使用任何这些解决方案。

**注意**：您`WHERE NULL=NULL`只能在`SET ANSI_NULLS ON`. 如果`ANSI_NULLS`设置是，`OFF`那么`WHERE NULL=NULL`过滤器将始终`true`是，执行计划将是： ![在此处输入图像描述](../Images/ebd78b3ac2e2e2145c2ea8a2537eb3a0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T06:10:10.180

`Select * into #temptable from MainTable where 1=0`是正确的方法。虽然`Select * into #temptable from MainTable where NULL=NULL`给出了相同的结果，但最佳实践是必须使用`IS`运算符进行 NULL 比较。开发人员之间也`1=0`很常见比较。

# com - 混合模式 DLL 需要延迟加载

> ID：10569573
> 
> 赞同：0
> 
> 时间：2012-05-13T05:37:01.143
> 
> 标签：com, c++-cli

我创建了一个混合 DLL (C++/CLI)，在从普通的 ANSI C 应用程序成功调用它之后，我继续从 C++ COM 服务器调用它（使用相同的 C 入口点）。然而，即使在 COM 服务器成功启动或调用 DLL 之前，我也会在 ntdll.dll 中收到“访问冲突”。调用堆栈只是让 ntdll.dll!ExecuteHandler2 重复多次，直到在 VS 调试输出中报告堆栈溢出。我可以看到我的混合模式 DLL 和 mscoree.dll 已加载。

我将混合 DLL 添加到 COM 服务器的延迟加载 DLL 选项中，它似乎可以工作。

为什么我写的 C 应用程序似乎可以正常工作而没有延迟加载时，混合 DLL 需要在 C++ COM 服务器中延迟加载？我该如何调试这个问题（除非这是预期的，但是我找不到任何关于它的东西）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:15:32.267

看起来需要初始化[COM 公寓。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms695279%28v=vs.85%29.aspx)COM appartments 用于处理线程同步。

# php - phpMailer 附件不起作用

> ID：10569586
> 
> 赞同：1
> 
> 时间：2012-05-13T05:41:19.297
> 
> 标签：php, attachment, phpmailer, contact, contact-form

这是我的第一篇文章，我希望能在我的 phpMailer 联系表单中添加附件字段方面获得一些帮助。我已经在 html 网站中添加了一个上传器 [browse] 栏，但我不知道如何将它与 phpmailer 链接。我必须在 phpmailer.php 包中声明它还是用它做些什么？

我真的很感激一些帮助。下面是我绝望的尝试。

代码片段：

```
<?
$body = ob_get_contents();

$to = 'xxx@xxxx.com>';
$email = $email;
$subject = $subject;
$fromaddress = "xxx@xxxx.com";
$fromname = "Online Contact";

require("phpmailer.php"); //<<this is the original pack

$mail = new PHPMailer();

$mail->From     = "xxx@xxxx.com";
$mail->FromName = "My Name";
$mail->AddBCC("xxx@xxxx.com","Name 1");
$mail->AddAddress( $email,"Name 2");

$mail->WordWrap = 50;
$mail->IsHTML(true);

$mail->Subject  =  $subject;
$mail->Body     =  $body;
$mail->AltBody  =  "This is the text-only body";
// attachment
$mail->AddAttachment('uploadbar', 'new_file.pdf'); // the name of my html uploader is uploadbar, clicking browse to locate a file

if(!$mail->Send()) {
    $recipient = 'xxx@xxxx.com';
    $subject = 'Contact form failed';
    $content = $body;   

  mail($recipient, $subject, $content, "From: xxx@xxxx.com\r\nReply-To: $email\r\nX-Mailer: DT_formmail");
  exit;
}
?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-10T13:24:12.487

遇到同样的问题，试试这个

```
$mail->AddAttachment($_SERVER['DOCUMENT_ROOT'].'/file-name.pdf'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T05:59:25.313

首先，确保您的上传表单`enctype='multipart/form-data'`具有`<form method=post action=file.php enctype='multipart/form-data'>`.

然后，在您的 phpmailer 处理程序文件中使用此代码

```
foreach(array_keys($_FILES['files']['name']) as $key) {
   $source = $_FILES['files']['tmp_name'][$key];
   $filename = $_FILES['files']['name'][$key];

   $mail->AddAttachment($source, $filename);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-24T02:50:41.040

确保附件文件名不应包含任何特殊字符并检查文件路径是否正确。

> 例如：[文件名.pdf] 应该类似于 [文件名.pdf]

# php - 如何使用 PHP 找到图像的“多数颜色”？

> ID：10569590
> 
> 赞同：0
> 
> 时间：2012-05-13T05:43:50.560
> 
> 标签：php, algorithm, image-processing, imagemagick, gd

如何计算 PHP 中图像的主要颜色是什么？我更愿意将相似颜色的不同深浅组合到一个桶中，例如，所有深浅不一的蓝色都被计为“蓝色”。

换句话说，我想要一个接受图像并返回一个简单数组的函数，类似于：

```
"blue":90%, "white":10% 
```

不需要高精度，只需按主要颜色和次主要颜色对图像进行分类即可。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T06:03:13.110

这是一种方法：

1) 定义一组我们称之为质心的颜色——这些是您想要将图像分解成的基本颜色的中间部分。例如，您可以使用像[k-means](http://en.wikipedia.org/wiki/K-means_clustering)这样的聚类算法来做到这一点。所以现在你有了，比如说，100 个质心（桶，你可以把它们想象成），每个质心都是一个 RGB 颜色三元组，你可以手动为其附加一个名称。

2) 为新图像生成直方图：

*   [在gd](http://php.net/manual/en/book.image.php)或其他中打开图像
*   将其转换为像素值数组（例如使用[imagecolorat](http://www.php.net/manual/en/function.imagecolorat.php)）
*   确定像素值和所有质心之间的距离（[欧几里得距离可以）。](http://en.wikipedia.org/wiki/Euclidean_distance)将每个像素分类为最接近哪个桶。
*   您的输出是每个像素的质心分配。或者，如果您只需要一个直方图，您可以计算每个质心出现的次数。

请记住，这种颜色分配有些主观。我不确定是否会有从颜色到名称的明确映射（例如，它[取决于语言](http://www.amazon.co.uk/Through-Language-Glass-Words-Colour/dp/043401690X)）。但是如果你用谷歌搜索，可能存在一个你可以使用的查找表，尽管我还没有遇到过。

希望这可以帮助！

本

# gwt - 是否可以使用 GWT 创建多模块应用程序

> ID：10569595
> 
> 赞同：1
> 
> 时间：2012-05-13T05:44:45.007
> 
> 标签：gwt, gwt-mvp

是否可以使用 GWT 创建多模块应用程序？我的意思是，创建 2 个模块，一个用于前端网站，一个用于管理前端网站的管理员管理。希望你能理解我的方法:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T10:10:06.097

这是可能的，但不是很明显，因为您必须在几个地方修改默认项目布局（重命名为属性、入口点类名、脚本源代码、编译器参数）。所以我相信，这是一个有效的问题。

我假设您想这样做，因为您想在两个网页之间共享代码。有几种方法可以实现这一点，最简单的一种可能是：

### 单个项目，两个 URL

您需要两个模块 xml 文件和两个 html 文件。

前端.gwt.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to='frontend'>
  <inherits .../>
  <entry-point class='org.example.FrontEndEntry'/>
  ...
</module> 
```

管理员.gwt.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to='admin'>
  <inherits .../>
  <entry-point class='org.example.AdminEntry'/>
  ...
</module> 
```

前端.html

```
<!doctype html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    ...
    <script type="text/javascript" language="javascript"
       src="frontend/frontend.nocache.js"></script>
  </head>
  ...
</html> 
```

管理员.html

```
<!doctype html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    ...
    <script type="text/javascript" language="javascript"
       src="admin/admin.nocache.js"></script>
  </head>
  ...
</html> 
```

然后，在编译 GWT 应用程序时，只需在命令行末尾添加这两个模块（或在 Eclipse 等 IDE 中，编译时选择两者）。启动配置相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T08:56:29.180

一个模块被加载为一个名为 sample/sample.nocache.js 的 javascript 文件。您可以让 servlet 根据 url 或用户登录时使用不同的 js 文件（模块）提供不同的 html 文件。您需要分别编译每个模块。

谷歌资源： [动态主机页面](https://developers.google.com/web-toolkit/articles/dynamic_host_page#servlet)，[组织模块](https://developers.google.com/web-toolkit/doc/1.6/DevGuideOrganizingProjects)

您还可以在同一页面上包含多个模块，但要小心这一点，因为您不知道它们将按什么顺序加载。

# django - 在同一台机器上服务多个 Django 和 PHP 项目？

> ID：10569597
> 
> 赞同：0
> 
> 时间：2012-05-13T05:45:00.263
> 
> 标签：django, apache, wsgi, django-1.4

该文档指出，不应将静态文件与 Django 项目放在同一台机器上，因为静态内容会将 Django 应用程序踢出内存。这个问题是否也来自在一台服务器上拥有多个 Django 项目？我应该将我所有的网站项目合并到一个非常大的 Django 项目中吗？

我目前正在为 Django 以及来自 Apache 的带有 mod WSGI 的 php 脚本提供服务。这是否也会导致效率损失？

或者警告只是针对静态内容，因为在提供数百个文件时会出现问题，同时提供 20-30 个不同的 PHP / Django 项目是可以的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T11:33:39.640

我会说这个设置完全没问题。当然，这取决于硬件、负载和其他项目。但是在这里您可以尝试监控使用/性能。
对静态文件使用不同服务器的建议很有意义，因为它对资源更有效。但只要一台服务器性能足够好，我就没有理由使用第二台服务器。

另一个问题 - 与性能的关系比与易用性/配置的关系更小 - 是您是否真的想在同一台服务器上运行所有东西的决定。

对于具有一堆较小站点（以及一些 php-legacy）的设置，我们使用一台具有四个虚拟服务器的机器：

*   运行 nginx（和清漆）的 webhead
*   数据库
*   简单的 apache2/php 服务器
*   使用 gunicorn + supervisord 的 django 服务器

nginx 处理所有站点，代理到应用程序服务器或提供静态内容（通过 nas）。我喜欢这种设置，因为它很容易安装和处理，而且如果需要，它可以很容易地扩展一个部分。卜

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T23:57:03.540

如果文档说“”“不应在与 Django 项目相同的机器上提供静态文件，因为静态内容会将 Django 应用程序踢出内存”“”那么文档非常具有误导性，并且可以说是完全错误的。

如果在同一系统上使用 PHP，我会提出的一个建议是，确保您使用 mod_wsgi 守护进程模式来运行 Python Web 应用程序，甚至每个 Python Web 应用程序都有一个守护进程。

不要在嵌入式模式下运行 Python Web 应用程序，因为这意味着您正在与 mod_php 相同的进程中运行东西，并且因为包含扩展的 PHP 并不是真正的多线程安全，这意味着您必须运行 prefork MPM。在运行 prefork MPM 时运行嵌入在 Apache 中的 Python Web 应用程序是一个坏主意，除非您非常了解如何为它正确设置 Apache。不要正确设置 Apache，您会遇到如下所述的问题：

[http://blog.dscpl.com.au/2009/03/load-spikes-and-excessive-memory-usage.html](http://blog.dscpl.com.au/2009/03/load-spikes-and-excessive-memory-usage.html)

简而言之，PHP 和 Python 的 Apache 配置需要完全不同。不过，您可以通过对 Python Web 应用程序使用 mod_wsgi 守护程序模式来解决这个问题。

# ios - 在后台运行的 IOS 5 应用程序在 4 天后终止

> ID：10569600
> 
> 赞同：0
> 
> 时间：2012-05-13T05:45:35.037
> 
> 标签：ios, background, mode, terminate

我在后台运行一个应用程序，位置发生重大变化并监视区域，该应用程序运行良好，但如果用户几天不使用该应用程序，则该应用程序将被终止。有没有办法防止应用程序被终止？比如可能触发警报以提醒用户每 2 天打开一次应用程序？有谁知道如何让应用程序持续运行，而不是被终止/暂停？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T06:07:10.270

超过 4 天的“显着位置变化”意味着您的应用程序不仅会耗尽电池电量（自 iOS 4.x 以来禁止使用），而且还会在后台从系统中占用资源。应用程序无法在后台永远处理，因此操作系统选择终止它。只需关闭后台处理并仅在用户打开应用程序时更新用户的位置。你想知道最好的部分吗：这一切都是随机的！操作系统本可以杀死 Mail 或 YouTube 或其他类似的应用程序来为您的应用程序腾出空间，但它没有，它杀死了您的应用程序。抱歉，没有记录在案的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T06:16:39.553

我认为应用程序不可能连续运行，也不可能被终止/暂停。您可以使用[推送通知](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)提醒用户每两天打开应用程序。

# visual-studio-2010 - 在 MVC++ 2010 上的 Win32 应用程序中输出到控制台/调试窗口

> ID：10569605
> 
> 赞同：3
> 
> 时间：2012-05-13T05:46:52.913
> 
> 标签：visual-studio-2010, visual-c++

我正在使用 Microsoft Visual C++ 2010 Express：在 C++ WinAPI 应用程序中，如何打印到调试窗口？我使用什么功能？

![在此处输入图像描述](../Images/c53003428b1c7feb8a613b650c7da3eb.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T08:26:55.297

您正在寻找[`OutputDebugString`功能](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363362.aspx)。

在调试器下运行时（例如，在 Visual Studio 中），此函数的参数会自动重定向到输出窗口。

# php - 在 jquery ajax url 中包含 $_SERVER 文件路径的语法？

> ID：10569606
> 
> 赞同：1
> 
> 时间：2012-05-13T05:46:55.110
> 
> 标签：php, javascript, jquery, ajax, syntax

我正在使用 jquery ajax 将数据发送到 url。我想使用 php $_SERVER 放置绝对 url。这样做的语法是什么？

**这是 URL 中的文件路径**

```
$_SERVER['DOCUMENT_ROOT']."/folder/file_name.php" 
```

**这是文件路径进入的功能**

```
$.ajax({
            type: "GET",
            url: "",
            data: 'time='+ visitortimezone,
            success: function(){
                location.reload();
            }
        }); 
```

这是什么语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T06:00:15.257

如果你真的想从 PHP 获取文档根目录，你可以尝试这样的事情：

**HTML：（** *将您的文档根放在隐藏的文本字段中）*

```
<input type='hidden' name='baseurl' id='baseurl' value='<?php echo  $_SERVER['DOCUMENT_ROOT'];?>'> 
```

**jQuery** : *(从隐藏的文本字段中获取 jQuery 中的文档根目录)*

```
 $.ajax({
            type: "GET",
            url:  $('#baseurl').text() + "/folder/file_name.php",
            data: 'time='+ visitortimezone,
            success: function(){
                location.reload();
            }
        }); 
```

**如果你在 PHP 文件中编写 JavaScript，你也可以试试这个：**

```
 $.ajax({
            type: "GET",
            url:  "<?php echo $_SERVER['DOCUMENT_ROOT'] . '/folder/file_name.php';?>",
            data: 'time='+ visitortimezone,
            success: function(){
                location.reload();
            }
        }); 
```

**您也可以在 JavaScript 中获取主机名：**

```
document.location.hostname 
```

# php - 使用 div 循环每次迭代的颜色

> ID：10569610
> 
> 赞同：1
> 
> 时间：2012-05-13T05:48:26.800
> 
> 标签：php

我想知道如何改变这个：

这段代码使用的是表格，而我尝试使用 div，但我想以与`enter <td>. In <td class= '".$class." thum'> here` Like相同的方式定义 div`enter <div class='".$class." thumb'> here`

```
enter <td ' class='".$class." thumb'><div align='center'><a href='show-".$row['id'].".php'><img src='".$row['image']."' width='80' height='60' /></a></div></td> here 
```

我试图在每次循环迭代时改变颜色。这就是 $class 的存在。

我认为这一点都不清楚。很难解释

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T05:53:00.050

您可以在回显输出之前在每个循环中定义一个新值。例如，如果您想要“斑马条纹”，您可以检查当前迭代是偶数还是奇数：

```
for ( $i = 0; $i < count( $items ); $i++ ) {
  $style = ( $i % 2 == 0 ) ? $styleA : $styleB ;
  echo "<td class='{$style} thumb'>...</td>";
} 
```

示例输出：[http ://codepad.org/8cYyiBBH](http://codepad.org/8cYyiBBH)

# javascript - 当鼠标悬停在页面的其他部分时如何滚动页面的一部分？

> ID：10569611
> 
> 赞同：1
> 
> 时间：2012-05-13T05:48:55.080
> 
> 标签：javascript, scroll

请看一下[我的示例页面](http://www.applegrew.com/so_sample1/)。

在该页面上，请注意带有乱码文本的部分。这是要滚动的“内容部分”。所有其他部分都应该是固定的。

如果您将鼠标移动到左侧导航或标题上并尝试滚动，那么自然不会发生任何事情。

即使用户的鼠标位于标题或左侧导航或任何其他固定部分上，如何使内容部分滚动？

**PS。**我想在这里模仿 Google Plus。他们似乎有一个`scroll`听众，但 Javascript 代码太混乱了，我无法理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T02:45:19.337

我之前的结论是错误的，即 Google+ 正在为此使用 Javascript。

昨天使用 Firebug 将他们的网站分解成碎片。现在很明显，它们也`position: fixed`用于固定部件。

[这是我更新的示例页面。](http://www.applegrew.com/so_sample2/)请注意，现在我们也可以使用键盘箭头来上下移动页面。此页面未使用任何 Javascript。

# c# - 如何在 Windows Phone 7 中使用绑定到 ListBox 的不同数据模型设置不同的 ListBoxItem 样式？

> ID：10569615
> 
> 赞同：0
> 
> 时间：2012-05-13T05:49:32.473
> 
> 标签：c#, visual-studio, silverlight, windows-phone-7, xaml

我有一个`ListBox`。我将其设置`ItemSource`为我的自定义数据集合，称为`Book`. 但是`Book`是通用类型，它有不同的类型，比如`Novel`,`ScienceBook`等。所以我想要为其设置不同的样式`ListBoxItem`。例如：`Book`如果是 的实例`Novel`，则设置标题为红色，其他设置为蓝色。如何在 Windows Phone 7 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T05:58:23.187

好的，我找到了我的问题的答案。解决方案只是创建中间数据模型，提供有关要使用的样式的信息。在 xaml 中，我只是添加了属性`Style={Binding Style}`。希望它会帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T07:21:22.350

更优雅的方法是定义[DataTemplateSelector](http://www.windowsphonegeek.com/articles/Implementing-Windows-Phone-7-DataTemplateSelector-and-CustomDataTemplateSelector)来选择哪个`DataTemplate`将用于哪个项目

# asp.net - 无法浏览到 WCF 服务：HTTP 400 错误请求

> ID：10569616
> 
> 赞同：1
> 
> 时间：2012-05-13T05:49:58.963
> 
> 标签：asp.net, wcf, iis

我有一个调用 2 个 WCF 服务的 VS2010 MVC3 解决方案。在我的第一台电脑上一切正常。我在另一台计算机上安装了相同的操作系统、相同的 VS、相同的 SQL Server Express、相同的 IIS……我在第二台计算机上复制了我的解决方案的源代码。运行解决方案时一切正常。

但是在第二台计算机上：

*   我无法浏览到服务 URL ！？(1)

*   我不能做“更新服务参考”！？(2)

(1) 当我浏览到**http://localhost/PLATONServices/RequestService.svc**时，我收到了 HTTP400 BAD REQUEST 错误。

(2) 我收到一个 HTTP 状态 400 的请求失败：错误的请求元数据包含无法解析的引用：'http://localhost/PLATONServices/RequestService.svc'。

任何想法？

因为两台计算机上的代码源相同，并且第一台计算机上一切正常，所以问题出在其他地方。我在两台计算机上都使用 IIS6，但看不到任何差异。

我搜索了一整天都没有成功。

谢谢。

* * *

更新

这是WCF的踪迹：

```
<E2ETraceEvent xmlns="http://schemas.microsoft.com/2004/06/E2ETraceEvent">
<System xmlns="http://schemas.microsoft.com/2004/06/windows/eventlog/system">
<EventID>131075</EventID>
<Type>3</Type>
<SubType Name="Error">0</SubType>
<Level>2</Level>
<TimeCreated SystemTime="2012-05-13T08:33:37.1384484Z" />
<Source Name="System.ServiceModel" />
<Correlation ActivityID="{5d80ddb2-6cf8-4e65-bc9b-3f4b7b880605}" />
<Execution ProcessName="w3wp" ProcessID="5280" ThreadID="13" />
<Channel />
<Computer>THINKPAD</Computer>
</System>
<ApplicationData>
<TraceData>
<DataItem>
<TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Error">
<TraceIdentifier>http://msdn.microsoft.com/fr-BE/library/System.ServiceModel.Diagnostics.ThrowingException.aspx</TraceIdentifier>
<Description>Throwing an exception.</Description>
<AppDomain>/LM/W3SVC/1/ROOT/PLATONServices-2-129813716146273047</AppDomain>
<Exception>
<ExceptionType>System.ServiceModel.ProtocolException, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>There is a problem with the XML that was received from the network. See inner exception for more details.</Message>
<StackTrace>
at System.ServiceModel.Channels.HttpRequestContext.CreateMessage()
at System.ServiceModel.Channels.HttpChannelListener.HttpContextReceived(HttpRequestContext context, Action callback)
at System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(HostedHttpRequestAsyncResult result)
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest()
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest()
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequest(Object state)
at System.Runtime.IOThreadScheduler.ScheduledOverlapped.IOCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
</StackTrace>
<ExceptionString>System.ServiceModel.ProtocolException: There is a problem with the XML that was received from the network. See inner exception for more details. ---&gt; System.Xml.XmlException: The body of the message cannot be read because it is empty.
   --- End of inner exception stack trace ---</ExceptionString>
<InnerException>
<ExceptionType>System.Xml.XmlException, System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
**<Message>The body of the message cannot be read because it is empty.</Message>**
<StackTrace>
at System.ServiceModel.Channels.HttpRequestContext.CreateMessage()
at System.ServiceModel.Channels.HttpChannelListener.HttpContextReceived(HttpRequestContext context, Action callback)
at System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(HostedHttpRequestAsyncResult result)
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest()
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest()
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequest(Object state)
at System.Runtime.IOThreadScheduler.ScheduledOverlapped.IOCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
</StackTrace>
<ExceptionString>**System.Xml.XmlException: The body of the message cannot be read because it is empty.**</ExceptionString>
</InnerException>
</Exception>
</TraceRecord>
</DataItem>
</TraceData>
</ApplicationData>
</E2ETraceEvent> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T23:14:27.787

确保如本文所述在应用程序中设置服务

[WCF 服务返回 400 错误：无法读取消息正文，因为它是空的](https://stackoverflow.com/questions/3934209/wcf-service-returning-400-error-the-body-of-the-message-cannot-be-read-because)

# c++ - 单词比较 - 向量 /Getopt

> ID：10569617
> 
> 赞同：0
> 
> 时间：2012-05-13T05:50:53.867
> 
> 标签：c++, command-line, arguments, stdvector

我的理解`getopt`非常有限。但是，我确实意识到这`argv[0]`是 exe 文件，`argv[1]`是选项，`argv[2]`是要比较的词，并且`argv[3]`是我要搜索的字典或文档（文件`.txt`）。

我正在尝试设置一个指向字典的指针，然后遍历它以查看是否与`argv[2]`文本文件的（输入单词）匹配，以及是否匹配输出该`argv[2]`单词。以下是我当前有错误的代码：

```
main.cpp:61: error: no match for 'operator==' in 'list == *(argv + 12u)'
main.cpp:64: error: no match for 'operator*' in '*list' 
```

任何帮助将不胜感激。

```
#include <cstdlib>
#include <unistd.h>
#include <vector>
#include <iostream>
#include <string>
#include <iterator>
using namespace std; 

int main(int argc, char** argv) {
    enum {
        WHOLE, PREFIX, SUFFIX, ANYWHERE, EMBEDDED
    } mode = WHOLE;
    bool jumble = false;
    bool ignore_case = false;
    bool invert = false;
    string length = "0,0";
    int c;
    string input;
    vector <string> list;
    vector <string>::iterator i;

    while ((c = getopt(argc, argv, ":wpsaejivn:")) != -1) {
        switch (c) {
            case 'w': mode = WHOLE;
                break;
            case 'p': mode = PREFIX;
                break;
            case 's': mode = SUFFIX;
                break;
            case 'a': mode = ANYWHERE;
                break;
            case 'e': mode = EMBEDDED;
                break;
            case 'j': jumble = true;
                break;
            case 'i': ignore_case = true;
                break;
            case 'v': invert = true;
                break;
            case 'n': length = optarg;
                break;
            default: WHOLE;
                break;
        }
    }
    argc -= optind;
    argv += optind;

    switch (mode) {
        case WHOLE:
            while(argc != -1){
                list == argv[3];
                for(i == list.begin(); i != list.end(); i++)
                if(argv[1] == argv[3]){
                    cout << *list << endl;
                }else cout << "Did not work again" << endl;
            }                                  
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T08:07:16.420

如果我理解正确，您将不需要这里的矢量。您需要读取文件 argv[3]，逐字解析它并在找到等于 argv[2] 的单词时停止。

我想你想要这样的东西：

```
#include <string>
#include <fstream>
#include <ostream>

using namespace std;

int main(int argc, char** argv)
{    
  // The part where you parse the input and validate it
  // ...

  // Read the dictionary specified in argv[3] and compare it with argv[2] line by line
  ifstream input_file(argv[3]);
  string match_string(argv[2]);
  string current_string;
  bool found = false;
  while(getline(input_file, current_string) && !found)
      found = (current_string.compare(match_string) == 0);

  // Check the result
  if (found)
     cout << "Found " << match_string << " in " << argv[3] << endl;
  else
     cout << "Did not work again" << endl;

  return 0;
} 
```

在这个基本解决方案中，我假设字典文件中的每个单词都在单独的行中。当然你需要根据你的需要修改这个，并且根据需要添加更多的输入验证。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T08:09:46.607

没有进入`getopt`，我认为这不是您的问题，我将回答给定带有单词列表和单词的文件的问题，您如何确定该单词是否存在于文件中。

有很多方法可以做到这一点，但从概念上讲，它涉及以下步骤：

1.  读取输入文件并从中创建字典。
2.  匹配字典中的输入词。

代码片段：

```
#include <fstream>
#include <iostream>
#include <iterator>
#include <string>
#include <set>

int main (int argc, char *argv[])
{
  // Input file stream
  std::ifstream file_in(argv[3]);

  // Iterators to iterate over input file
  std::istream_iterator<std::string> in_begin(file_in), in_end;

  // Create a dictionary of words.
  // Using std::set for this.
  std::set<std::string> dictionary(in_begin, in_end);

  // Word to find in dictionary
  std::string word(argv[2]);

  // See if the word is present in our dictionary
  if(dictionary.find(word) != dictionary.end())
    std::cout << word << " found in " << argv[3] << std::endl;
  else
    std::cout << word << " not found in " << argv[3] << std::endl;
} 
```

# php - 带有 Sublime Text 2 的 .php 扩展名中的 Zen 编码

> ID：10569628
> 
> 赞同：2
> 
> 时间：2012-05-13T05:53:10.613
> 
> 标签：php, emmet, sublimetext2

我习惯于在`.html`文件中进行 zen 编码，它可以工作！但是我不知道当我在文件中时如何做同样的事情，也`.php`尝试过`ctrl`++但什么也没发生。我在一个 Joomla 网站上工作，所以主题文件会在里面而不是在里面，但是有很多 HTML 标签要输入。我什至尝试添加此设置并将其保存在用户文件夹中，但没有任何反应。为什么它不起作用？这是我从[链接](http://andrewblogs.com/blog/zen-coding-php-zen-coding-custom-snippet-example/)获得参考的地方，但是它在 Zen Coding.js 中使用，但即使在 ST2 中语法也是相同的。片段只是附加设置，但主要是 HTML zen-coding 缩写不会出现在文件中，但它可以在. 任何人都可以解决这个问题？`alt``enter``.php``.html``zen-coding.sublime.settings``.php``.html`

```
"my_zen_settings" : {
    "html": {
        "filters": "php,html",
        "abbreviations": {
            "jq": "<script src='jquery.js' type='javascript'>",
            "demo": "<div id=\"demo\"></div>"
        }
    },
    "css": {
        "filters": "html,css,fc",
        "snippets": {
            "c": "color:#${1:000000};"
        }
    },
    "php": {
       "filters": "php,html",
       "snippets": {
            "php":          "<?php | ?>",
            "php:info":     "<?php\nphpinfo();\n?>",
            "php:echo":     "<?php echo | ?>",

            "php:Ns":       "<?php\nnamespace |;\n\t\n?>",
            "php:ns":       "namespace |;",

            "php:Class":    "<?php\nclass |\n{\n\t\n}\n?>",
            "php:class":    "class |\n{\n\t\n}",

            "php:Function": "<?php\nfunction |() {\n\t\n}\n?>",
            "php:function": "function |() {\n\t\n}",

            "php:Var":      "<?php $| = ; ?>",
            "php:var":      "$| = ;",

            "php:Object":   "<?php $| = (object) ; ?>",
            "php:object":   "$| = (object) ;",

            "php:New":      "<?php $| = new ; ?>",
            "php:new":      "$| = new ;",

            "php:Bool":     "<?php $| = FALSE; ?>",
            "php:bool":     "$| = FALSE;",

            "php:Array":    "<?php $| = array(); ?>",
            "php:array":    "$| = array();",

            "php:Array+":   "<?php |[] = ; ?>",
            "php:array+":   "|[] = ;",

            "php:Array-":   "<?php unset($|[]); ?>",
            "php:array-":   "unset($|[]);",

                        //hack $|, seems to replace $i with $1
            "php:For":      "<?php\nfor ($|i = 0; $|i < |; $|i++) {\n\t\n}\n?>",
            "php:for":      "for ($|i = 0; $|i < |; $|i++) {\n\t\n}",

            "php:Foreach":  "<?php\nforeach (| as ) {\n\t\n}\n?>",
            "php:foreach":  "foreach (| as ) {\n\t\n}",

            "php:While":    "<?php\nwhile(|) {\n\t\n}\n?>",
            "php:while":    "while(|) {\n\t\n}",

            "php:Dowhile":  "<?php\ndo {\n\t\n} while(|);\n?>",
            "php:dowhile":  "do {\n\t\n} while(|);",

            "php:If":       "<?php if( | ) { ?>\n\t\n<?php }?>",
            "php:if":       "if( | ) {\n\t\n}",

            "php:Ifelse":   "<?php if( | ) { ?>\n\t\n<?php } else { ?>\n\t\n<?php }?>",
            "php:ifelse":   "if( | ) {\n\t\n} else {\n\t\n}",

            "php:Switch":   "<?php switch( | ) { \n\tcase :\n\t\t\n\t\tbreak;\n\tdefault :\n\t\t\n\t\tbreak;\n}\n?>",
            "php:switch":   "switch( | ) { \n\tcase :\n\t\t\n\t\tbreak;\n\tdefault :\n\t\t\n\t\tbreak;\n}",

            "php:Include":  "<?php include \"|\"; ?>",
            "php:include":  "include \"|\";",

            "php:Include1": "<?php include_once \"|\"; ?>",
            "php:include1": "include_once \"|\";"
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:37:13.727

有同样的问题。尝试了以下方法：

1.  首选项 > 浏览包 > 默认 (OSX).sublime-keymap
2.  找到“操作数”索引，其中“键”= ctrl + alt + enter
3.  将“text.php”添加到该字符串。像这样：***“source.css - source.css.embedded, text.xml, text.html -source -meta.tag, meta.scope.between-tag-pair.html -source, text.php”***

这似乎奏效了。我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:02:07.457

您可以为 Sublime Text 2 安装 Emmet： [https ://github.com/sergeche/emmet-sublime](https://github.com/sergeche/emmet-sublime)

**注意：** Emmet（前 Zen 编码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T19:46:06.080

将 text.php 添加到 Default (Windows).sublime-keymap 对我有用。

# php - 使用 PHP 跨三个 MySQL 表更新/插入

> ID：10569629
> 
> 赞同：0
> 
> 时间：2012-05-13T05:54:05.293
> 
> 标签：php, mysql, insert

我有 3 张桌子：

1.  **`SMS_IN`**使用“原始”号码（数据是通过短信发送的，因此所有号码都是短信形式：我正在“分解”它们以将它们变成一个号码）：

    ```
    短信文本
    发件人号码
    sent_dt
    ```

2.  **`members`**与会员的手机号码：

    ```
    会员ID
    用户名
    comp_id
    电话
    ```

3.  **`mobile_numbers_test`**他们所有的数字表：

    ```
    会员ID
    comp_id
    数字
    联系电话
    积极的
    ```

我正在尝试通过 2 次检查将`SMS_IN`（新号码）输入`mobile_numbers_test`（旧号码）：

1.  `SMS_IN.sender_number = members.phone`; 和
2.  如果`SMS_IN.sender_number = mobile_numbers_test.contact_number AND SMS_IN.sms_text`（以分解形式）`= mobile_numbers_test.numbers`，跳过（或覆盖） - 否则`INSERT`。

这是我到目前为止所拥有的：

```
include ('database_connection.php');

$result = mysql_query("SELECT phone FROM members")
or die(mysql_error());  
$no=0;
echo'<table>
        <tr>
        <td>Numbers</th>
        <td>From</th>
        <td>Date</th>
        </tr>';
while($row = mysql_fetch_array($result))
    {$no++;
    $phone= $row['phone'];  
    $comp_id =  $row['comp_id'];
    $result1 = mysql_query("SELECT * FROM SMS_IN where sender_number ='$phone'")
    or die(mysql_error()); 
    while($row = mysql_fetch_array($result1))
        {$no++;
        $sms= $row['sms_text'];
        $sms_no=$row['sender_number'];
        $sms_time=$row['sent_dt'];
        $sms_exp = explode("\r\n",$sms);
        foreach($sms_exp as $no )
        { //** not working from here **//

        $result2 = mysql_query("SELECT * FROM members,mobile_numbers_test,SMS_IN 
        where members.phone = SMS_IN.sender_number and 
        mobile_numbers_test.numbers != '$no'
        ")
        or die(mysql_error());

        while($row = mysql_fetch_array($result2))
        {
        $circle=$row['state'];
        $price='Call Us';
        $contact_person=$row['Username'];
        $contact_number=$row['phone'];
        $type='Fancy';
        $per_post='Pre-Paid';
        $provider=$sms_exp[0];
        $date=strtotime($sms_time);
        $ip=$sms_no;
        $old_no=$row['numbers'];;

        if($old_no!=$no){ 
            echo '<tr><td>'.$no.'</td>';
            echo '<td>'.$contact_person.'</td></tr>';
        } else { echo 'Old No';
        }
        }
        }
        }

        }       
    echo'</table>'; 
```

在这个例子中，我给出`echo`了答案，以便我知道会发生什么......我该怎么做`UPDATE`？`INSERT`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:14:10.850

1.  如果不存在，则在on中创建一个`UNIQUE`索引：`mobile_numbers_test``(contact_number, numbers)`

    ```
    ALTER TABLE mobile_numbers_test ADD UNIQUE INDEX (contact_number, numbers); 
    ```

2.  加入你`members`的`SMS_IN`加入标准：

    ```
    SELECT * FROM members JOIN SMS_IN ON SMS_IN.sender_number = members.phone 
    ```

3.  循环遍历结果集，爆炸数字并插入`mobile_numbers_test`using `INSERT IGNORE`。把它们放在一起（使用 PDO，因为它会让你的生活更轻松，你真的应该停止使用古老的`mysql_*`函数编写新代码：它们不再被维护并且社区已经开始[弃用过程](http://goo.gl/KJveJ)）：

    ```
    $dbh = new PDO("mysql:host=$hostname;dbname=$database", $user, $pass);

    $select = $dbh->query("
      SELECT * FROM members JOIN SMS_IN ON SMS_IN.sender_number = members.phone
    ") or die($dbh->errorInfo());

    $insert = $dbh->prepare("
      INSERT IGNORE INTO mobile_numbers_test
               ( Memberid,  comp_id,  numbers,  contact_number)
        VALUES (:Memberid, :comp_id, :numbers, :contact_number)
    ");

    while($sms = $select->fetch()) {
      foreach(explode("\r\n",$sms['sms_text']) as $no) $insert->execute(array(
        'Memberid'       => $sms['Memberid'],
        'comp_id'        => $sms['comp_id'],
        'numbers'        => $no,
        'contact_number' => $sms['sender_number']
      ));
    } 
    ```

# java - Image.setIcon(Parameters) 不刷新标签

> ID：10569630
> 
> 赞同：0
> 
> 时间：2012-05-13T05:55:06.657
> 
> 标签：java, swing, icons, refresh, set

我正在使用 Java Swing 制作在线国际象棋（客户端-服务器），我已经能够毫无问题地制作 chessTable 表格，但是在大厅里我正在展示用户的头像，问题是，用户可以通过服务器更改他的头像，但是当我调用`setIcon`新图像时，它不会刷新它。

解释：

用户从服务器下载的默认图像（Avatar.jpg）开始，如果他改变它，服务器将他选择的新图像发送给客户端，与前一个图像的名称相同，因此它被替换。但是当我调用`setIcon`这个新图像时（下载后），它不会做任何事情，并且标签棒会显示他设置的第一张图像。我正在检查文件夹，并且图像正在从服务器发送到客户端没有问题，让客户端刷新头像的唯一方法是关闭和打开应用程序。有什么想法吗？，我尝试重新打印我能找到的所有随机内容，但仍然没有解决方案，并且标签由 clickedListener 刷新。我使用这条线来设置图像：

```
this.JLProfilePic.setIcon(new javax.swing.ImageIcon(getClass().getResource("/View/Images/avatar.jpg"))); 
```

Edit1：我没有使用 a `JApplet`，但我仍然不知道问题可能出在哪里，因为我能够将标签图标更改为任何图像，但是当我尝试将图标更改为头像时，它即使在文件夹中您可以看到 Avatar.jpg 不一样，它仍然显示以前的，它已更改为新的。

Edit2：好吧，我仍然没有找到任何解决方案，我想可能是真的，因为我设置了一次图标，当程序重新访问它进入缓存的相同图像时，图像被保存在缓存中再次检查文件的来源。不确定，但这是我能做的唯一逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:12:21.333

尝试这个，

图片 img = ImageIO.read(new URL("http:\Server_IP:Port\image.jpg"));

setIconImage(img);

# servlets - smartgwt servlet 使用

> ID：10569634
> 
> 赞同：0
> 
> 时间：2012-05-13T05:56:11.300
> 
> 标签：servlets, smartgwt

嗨，我在 smartgwt 中有一个 listgrid，我需要一个按钮来将文件上传到服务器，我创建了一个普通的 servlet，并在我的项目的 web.xml 中声明了但我无法让它工作，让我出现 404 错误部署 。您可以在 gwt 中使用常规 servlet（及其 post 和 get 方法）吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:02:43.840

GWT 以一种称为 GWT-RPC 的特殊方式在服务器端代码（在 servlet 容器上运行，如 tomcat 或 jetty）和客户端代码（GWT 编译的客户端 JS 文件）之间传输数据。

![在此处输入图像描述](../Images/0fb2272347a3e7e90a150ff023341e58.png)

客户端需要知道将发送或接收到/从服务器和服务器的数据格式还必须知道客户端可以解析的数据格式（我们在数据的序列化和反序列化方面有严重的限制，因为一方面我们只有 javascript！）。这就是为什么您需要为远程 servlet 声明一个接口，GWT 使用它创建另一个异步接口并将您的服务调用限制在该接口。这就是为什么您不能将任何标准 servlet 与 GWT 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T05:09:02.227

`HttpServlet`可以与 smartgwt 一起使用。您需要拥有`DynamicForm`并设置`.setCanSubmit(true);`

示例代码：

```
final String DEFAULT_FILE_UPLOAD_SERVICE_PATH = "upload";
final String TARGET = "uploadTarget";

VLayout body = new VLayout();

uploadForm = new DynamicForm();

 // initialise the hidden frame
NamedFrame frame = new NamedFrame(TARGET);
frame.setWidth("1px");
frame.setHeight("1px");
frame.setVisible(false);

uploadForm.setEncoding(Encoding.MULTIPART);
uploadForm.setMethod(FormMethod.POST);
// set the (hidden) form target
uploadForm.setTarget(TARGET);

uploadForm.setAction(DEFAULT_FILE_UPLOAD_SERVICE_PATH);

// initialise the File name field
uploadItem = new UploadItem("filename");
uploadItem.setName("filename");
uploadItem.setTitle("File name");

// set the fields into the form
uploadForm.setFields(uploadItem);

// add the Upload Form and the (hidden) Frame to the main layout container
body.addMember(uploadForm);
body.addMember(frame); 
```

# android - 关于Android AsyncTask的查询

> ID：10569635
> 
> 赞同：0
> 
> 时间：2012-05-13T05:57:16.303
> 
> 标签：android, android-asynctask

我希望在 Android 2.3.3 上实现一个 CRUD 应用程序作为使用 SQLite 数据库的学习 PoC。现在，我已经放入了一个包含搜索表单的搜索活动和一个搜索结果活动（正在建设中）。我正在使用 AsyncTask 来处理数据库访问，并希望在下一个活动中显示此数据。

目前，我正在从该`onPostExecute`方法启动结果活动，结果似乎很好，但这不会在第二个线程（为 AsyncTask 创建）中启动新活动吗？

如果是这种情况，我如何将数据返回到 UI 线程，并从那里启动结果活动？

请随时要求澄清，我不是经常发帖的人，所以我的帖子有时会有点半生不熟。

德博吉特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T05:59:04.170

只有[doInBackground](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29)在后台线程中。[onPostExecute](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)在 UI 线程中。这就是 AsyncTask 的美妙之处：在 UI 线程中设置它，它在后台线程中执行高延迟工作，例如文件和网络访问，然后在 UI 线程中使用 onPostExecute 进行响应。

# python - 如何获取字典列表和字典的嵌套字典中的所有键和值？

> ID：10569636
> 
> 赞同：10
> 
> 时间：2012-05-13T05:57:23.030
> 
> 标签：python, list, dictionary

```
{'action_name':'mobile signup',
    'functions':[{'name':'test_signUp',
                  'parameters':{'username':'max@getappcard.com',
                                'password':'12345',
                                'mobileLater':'123454231',
                                'mobile':'1e2w1e2w',
                                'card':'1232313',
                                'cardLater':'1234321234321'}}],
    'validations':[
            {'MOB_header':'My stores'},
            {'url':"/stores/my"}]} 
```

我想将此字典的所有键和值作为列表获取（在它们是字典或数组的值之外）

打印结果应该是这样的：

```
action name = mobile signup
name = test_signUp
username : max@getappcard.com
password : 12345
mobileLater: 123454231
mobile : 1e2w1e2w
card : 1232313 
cardLater : 1234321234321
MOB_header : My stores 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T06:08:26.867

您可能希望使用递归函数来提取所有`key, value`对。

```
def extract(dict_in, dict_out):
    for key, value in dict_in.iteritems():
        if isinstance(value, dict): # If value itself is dictionary
            extract(value, dict_out)
        elif isinstance(value, unicode):
            # Write to dict_out
            dict_out[key] = value
    return dict_out 
```

这种东西。我来自 C++ 背景，所以我不得不用谷歌搜索所有语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-03T12:27:43.247

有点晚了，但对于 python 3.8，你可以使用`yield from`

```
def dictitems2list(d):
    for k, v in d.items():
        yield k
        if isinstance(v, dict):
            yield from get_all_items(v)
        else:
            yield v

all_itemt = list(dict2items(d)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-03T16:20:17.283

[我已经从这个链接](https://stackoverflow.com/questions/39233973/get-all-keys-of-a-nested-dictionary)进行了一些修改，以获取字典列表和字典的嵌套字典中的所有键和值：

```
def recursive_items(dictionary):
    for key, value in dictionary.items():
        if type(value) is dict:
            yield (key, value)
            yield from recursive_items(value)
        elif type(value) is list:
            yield (key, value)
            for i in value:
                if type(i) is dict:
                    yield from recursive_items(i)
        else:
            yield (key, value)

for i in recursive_items(your_dict):
    print(i) #print out tuple of (key, value) 
```

输出：

```
('action_name', 'mobile signup')
('functions', [{'name': 'test_signUp', 'parameters': {'username': 
'max@getappcard.com', 'password': '12345', 'mobileLater': '123454231', 'mobile': 
'1e2w1e2w', 'card': '1232313', 'cardLater': '1234321234321'}}])
('name', 'test_signUp')
('parameters', {'username': 'max@getappcard.com', 'password': '12345', 
'mobileLater': '123454231', 'mobile': '1e2w1e2w', 'card': '1232313', 
'cardLater': '1234321234321'})
('username', 'max@getappcard.com')
('password', '12345')
('mobileLater', '123454231')
('mobile', '1e2w1e2w')
('card', '1232313')
('cardLater', '1234321234321')
('validations', [{'MOB_header': 'My stores'}, {'url': '/stores/my'}])
('MOB_header', 'My stores')
('url', '/stores/my') 
```

# javascript - 在 .each() 中添加变量的总和

> ID：10569637
> 
> 赞同：1
> 
> 时间：2012-05-13T05:57:36.493
> 
> 标签：javascript, jquery, dom

我在 .each() 上处理了一些 dom 节点，并在通过它们 parseFloat 之后提取它们的值。

在 .each 中，我试图使用一些数学来将输出变量的总和相加。

如何做到这一点？

看看我在这里说什么：

[http://jsfiddle.net/LpHbk/1/](http://jsfiddle.net/LpHbk/1/)

请使用您的控制台查看 .each() 在 dom 中的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T06:02:34.637

如果要添加数字，则必须在*某个地方* [使用`+`](http://www.doxdesk.com/img/updates/20091116-so-large.gif).

```
var re = /.*\$/g;
var total = 0;

$("#dropDowns select option:selected").each(function() {
    var ourValue = $(this).text();
    var basePrice = re.test(ourValue) ? parseFloat(ourValue.replace(re, ''), 10) : 0;
    total += basePrice;
});

$("#finalValue").text("$" + total); 
```

另外，干掉那个代码！[http://jsfiddle.net/mattball/uhUHt](http://jsfiddle.net/mattball/uhUHt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T06:07:16.643

我会确保使选择器更加具体，以便仅包含`select`您实际想要包含的元素。

```
$("select").on("change", function(){
  var price = 0;
  $("select option:selected").each(function(){
    price += parseInt( this.value.match( /\$(\d+\.\d+)/ )[1] , 10 );
  });
  alert( '$' + price.toFixed(2) );
}) 
```

演示：http: [//jsbin.com/amubew/2/edit](http://jsbin.com/amubew/2/edit)

# html - 为什么字体松鼠 @font-face 生成器不能在 IE8 中工作？

> ID：10569640
> 
> 赞同：4
> 
> 时间：2012-05-13T05:58:08.800
> 
> 标签：html, internet-explorer, css, font-face, eot

背景：
我直接从 font-squirrel 下载了一个包。我对这个@font-face 包进行了零操作。此外，该软件包适用于所有现代浏览器。

代码：
我已将代码上传到我的服务器：[http ://designobvio.us/font/accent-demo.html](http://designobvio.us/font/accent-demo.html)

问题：
有谁知道为什么 IE8 或更低版本不渲染这个@font-face？

研究：
我知道 EOT 在包装中。我读过很多文章。他们中的大多数人都了解@font-face 的工作原理。我觉得好像我对@font-face 了解得更多，那么我也需要；然而，没有一个读取解决了这个问题。最接近的答案是，IEtester 没有正确渲染。 [资源](https://stackoverflow.com/questions/7173095/fontface-in-ie7-ietester-not-working-properly)

注意：
我真的不认为是 IE-tester 搞砸了（因为我已经测试了我知道有 @font-face [example](http://www.pixeltheory.cc/)的各种其他网站）。不过，如果有人可以 vm 测试或有 xp 来测试，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T17:44:08.843

似乎 Font-squirrel 现在正在进行一些维护。我不得不假设这就是他们的生成器无法正确转换文件的原因。我通过使用另一个字体转换器解决了这个问题。 [在这里找到！](http://fontface.codeandmore.com/) 我不确定为什么，但是使用这个生成器与 font-squirrel 相比，字体也变小了 20kbs。如果有人有任何想法，为什么这个生成器会减少文件大小，那会很棒，我会支持你。我希望这可以停止一些头痛。

# jquery - 如何为移动应用创建可滚动的照片流

> ID：10569644
> 
> 赞同：0
> 
> 时间：2012-05-13T05:58:27.740
> 
> 标签：jquery, css, jquery-mobile

我是新的 jQuery 和移动 web 应用程序开发人员，我想学习。

请指导我：如何创建可滚动的照片流；也就是说，当我用手指交换一张图片时，它会显示一张新图片。换句话说，我可以用手指前后移动图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T06:49:43.847

我不完全确定，但这里有一些资源可以帮助你。首先是jquery mobile。[jquery中网格化的一个例子，检查最后一个例子](http://jquerymobile.com/demos/1.1.0/docs/content/content-grids.html)

您可以使用 jquery mobile 做任何您想做的事情！

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T09:23:25.060

查看[http://www.photoswipe.com/](http://www.photoswipe.com/)。如果您真的想自己制作一个，那里有数百个教程。

1.  [http://vandelaydesign.com/blog/web-development/jquery-image-galleries/](http://vandelaydesign.com/blog/web-development/jquery-image-galleries/)
2.  [http://www.tripwiremagazine.com/2012/02/jquery-image-slider-plugins.html](http://www.tripwiremagazine.com/2012/02/jquery-image-slider-plugins.html)

由于您希望它与触摸事件一起使用，您只需绑定到 swipeleft 和 swiperight 而不是单击。

# android - 在 Android 中加载图片

> ID：10569645
> 
> 赞同：0
> 
> 时间：2012-05-13T05:58:42.673
> 
> 标签：android, listview

将图像从 Web 加载到 ListView 的最佳实践是什么？

我必须先将它们加载到 SQLite 数据库中还是应该将它们直接加载到 ListView 中？

而且在单击 ListView 中的项目后，我必须在另一个活动中显示相同的图像。将这个图像传递给另一个活动是否是正确的方法，或者最好再次从 Web / SQLite 加载它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T06:17:45.420

看这里[延迟加载图像](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)

将它们直接加载到列表视图中会使滚动速度变慢，因为每次它们可见时都会重新加载它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T09:24:00.200

这样做谷歌推荐[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

# c++ - 使用指针/引用影响本地成员的多态调用

> ID：10569651
> 
> 赞同：1
> 
> 时间：2012-05-13T05:59:40.207
> 
> 标签：c++, polymorphism

我今天在编码时遇到了一个奇怪的情况，我希望有人能解释为什么会这样。

我有一个指向某些基类的指针列表：

```
std::list<BaseClass*> m_list; 
```

然后我从这个列表中得到一个 BaseClass 指针

```
BaseClass* pBase = m_list.front(); 
```

然后我把这个基类变成它的子类之一。（这就是我认为奇怪之处发挥作用的地方）

```
pBase = new ChildClass(*pBase); 
```

ChildClass 使用 BaseClasses 复制构造函数来复制所有 BaseClasses 字段。

现在有了这个 ChildClass，我调用 BaseClasses 方法之一在 BaseClass 中设置一个字段。

```
pBase->SetSomeIntMember(10); 
```

现在，如果我检查这个 int 值，它是 10，正如预期的那样，但它似乎只是在本地更改它，因为如果我再次从列表中获得相同的 ChildClass 并检查它的 int 成员，它将保持不变。

希望这不是太棘手。是什么导致这种情况发生？在任何不涉及多态性的情况下，它显然不仅是局部变化，因为我们有一个指向类实例的指针。我猜我在创建一个新的 ChildClass 时踩到了指针，但这肯定会使列表中的 BaseClass 成为 ChildClass，因为虚拟方法仍然有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T06:08:46.720

```
 pBase = new ChildClass(pBase); 
```

这不会“使列表中的 BaseClass 成为 ChildClass”。它创建了一个**新**的 ChildClass 实例。只有对`pBase`done in`ChildClass`的构造函数的更改会影响`pbase`之前指向的内容。（你不能让一个类“成为子类的一个实例”。）

那行代码根本没有改变`m_list`。`m_list`仍然包含指向原始`BaseClass`对象的指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T06:08:54.443

乍一看，您只是将新分配的指针按值分配给 pBase。列表元素实际上是按值复制到 pBase 的指针地址。列表元素实际上没有改变

试试这个

```
BaseClass** pBase = &(m_list.front());
BaseClass* pOld = *pBase;
*pBase = new ChildClass(**pBase); // you have a leak here of *pBase BTW 
deleteOrCleanup(pOld); // cleanup or delete the old pBase pointer 

//do what you were doing 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T06:09:36.830

您复制指针的值，而不是对指针的引用。

那是，

```
BaseClass* pBase = m_list.front();
pBase = new ChildClass(*pBase); 
```

不一样

```
Baseclass*& pBase_r = m_list.front();
pBase_r = new ChildClass(*pBase_r); 
```

请记住，如果要更新原始值，则需要使用引用或指针。

**笔记**

第二个示例包含内存泄漏，因为 的原始值在`pBase`之前被丢弃`delete`。为避免此类意外，请使用智能指针，例如`std::shared_ptr<T>`(C++11) 或`boost::shared_ptr<T>`代替`T*`.

不要使用，因为它的语义与 STL 容器*不*`std::auto_ptr<T>`兼容。

所以你的列表类应该是`std::list<std::shared_ptr<BaseClass>>`. 这里的另一个优点是您可以使用智能指针的实例而不是引用，而不会弄乱内部引用计数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-13T06:28:13.637

正如其他人指出的那样，您的问题是您只是在修改指针的本地副本，而不是它实际指向的内容。

当您尝试替换容器元素时，不要将原始指针粘贴到容器中并不得不手动删除它们（或泄漏内存），而是使用智能指针。

```
#include <memory>
#include <list>
#include <iostream>

struct base
{
  base( int a )
  : x(a)
  {}

  int x;
};

struct derived : base
{
  derived( int a )
  : base(a)
  {}
};

int main()
{
  std::list<std::unique_ptr<base>> mylist;
  mylist.push_back( std::unique_ptr<base>( new derived(10) ) );

  auto pbase = mylist.front().get();    // get raw pointer to first element
  std::cout << pbase->x << std::endl;

  pbase = new derived( 10 * pbase->x ); // create a new derived object
  mylist.front().reset( pbase );        // replace the first element, previous 
                                        // element is deleted automatically

  pbase = mylist.front().get();
  std::cout << pbase->x << std::endl;

  // all allocated objects will be automatically deleted
  // when mylist goes out of scope
} 
```

输出：

```
10
100 
```

# android - 使用 MergeCursor 和 SimpleCursorAdapter，缺少什么？

> ID：10569652
> 
> 赞同：4
> 
> 时间：2012-05-13T05:59:43.247
> 
> 标签：android, listview, simplecursoradapter, mergecursor

无论我做什么，以下都会引发错误，即 cursor_counterparty 中包含的列之一不存在。当我检查 merge_cursor 时，我可以在那里找到列，这是我的代码，我做错了什么？

```
cursor_invoices = Invoices.getInvoicesCursor(counterparty.getId());
    Cursor cursor_counterparty = Counterparties
            .getCounterpartyCursor(counterparty.getId());
    startManagingCursor(cursor_invoices);
    startManagingCursor(cursor_counterparty);

    /* Joins cursors akin to doing an SQL join */

    MergeCursor merge_cursor = new MergeCursor(new Cursor[] {
            cursor_invoices, cursor_counterparty });
    merge_cursor.moveToFirst();

    int[] listview_columns = new int[] { R.id.textview_invoice_number,
            R.id.textview_counterparty_name, R.id.textview_amount,
            R.id.textview_account_name, R.id.textview_invoice_date,
            R.id.textview_date_paid };
    String[] listview_fields = new String[] { App.INVOICENUMBER,
            App.COUNTERPARTYNAME, counterparty_amount_field,
            App.ACCOUNTNAME, App.INVOICEDATE, App.DATEPAID };

    SimpleCursorAdapter cursor_adapter_invoices = new SimpleCursorAdapter(
            this, R.layout.listview_invoice_item, merge_cursor,
            listview_fields, listview_columns); 
```

我得到的错误是：

> java.lang.IllegalArgumentException：列“counterparty_name”不存在

当我调试应用程序时，我可以在 merge_cursor 中的一个游标中看到“counterparty_name”作为一列。

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T06:28:16.323

您是要垂直连接游标（添加行）还是水平连接（添加列）？

这是理论，因为我没有看过代码，但这对我来说很有意义......

MergeCursor 一个接一个地垂直连接游标（事实）。因此，对于光标的一部分，您有一组列，而对于另一部分，您有一组不同的列（假设）。

您的适配器正在尝试为正在显示的行查找一部分中不存在的列。

如果您更改为连接列的 CursorJoiner，我认为它会更符合您的预期，尽管我不知道如何适当地排列行。

[这里](https://stackoverflow.com/a/5703196/1105376)有一个很好的解释

**编辑**

我看到您使用相同的 ID 来获取每个游标，所以我对排列它们的担心是无关紧要的。我认为您确实想要 CursorJoiner 而不是 MergeCursor。

# amazon-ec2 - boto .get_all_keypairs() 方法及其结果的 .save()

> ID：10569653
> 
> 赞同：2
> 
> 时间：2012-05-13T05:59:43.467
> 
> 标签：amazon-ec2, boto

因此，我可以访问许多 EC2 实例，其中一些已经运行多年。我们有所有这些私钥的特殊存储库；因此，对于我们的大多数实例，我可以以 root（或某些情况下的“ubuntu”用户）身份进入它们来管理它们。

在玩 boto 时，我注意到 EC2 的 .get_keypair() 和 get_all_keypairs 方法，想知道这是否可以用来恢复任何 SSH 密钥，这些密钥已经从我们的程序的裂缝中溜走并丢失了。

但是，当我检查生成的 boto.ec2.keypair.KeyPair 对象时，我看到 .material 属性似乎是空的，当我尝试使用密钥对的 .save() 方法时，我收到一个异常，抱怨材料没有t 被取走。

（其他操作，例如 .get_all_instances() 和 .run_instances() 在该会话期间工作）。

那么，我错过了什么？是否有一些其他操作需要我提供 X.509 证书。除了我的普通 AWS 密钥/密钥对之外？

（注意：我实际上还不需要这个。我只是让自己熟悉 API 并为这种可能性做准备）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T09:50:14.307

不可能像这样恢复 SSH 密钥，[get_all_key_pairs()](http://boto.readthedocs.org/en/latest/ref/ec2.html#boto.ec2.connection.EC2Connection.get_all_instances)方法名称在这方面有点误导，尽管至少通过类[boto.ec2.keypair.KeyPair的返回对象正确记录，参见例如](http://boto.readthedocs.org/en/latest/ref/ec2.html#boto.ec2.keypair.KeyPair)[save ()](http://boto.readthedocs.org/en/latest/ref/ec2.html#boto.ec2.keypair.KeyPair.save)方法：

> **将新创建的 KeyPair**的材料（未加密的 PEM 编码的 RSA 私钥）保存 到本地文件。*[强调我的]*

这不是[boto的限制，而是](https://github.com/boto/boto)[Amazon EC2](http://aws.amazon.com/ec2/)的安全架构的结果：在初始创建密钥对的过程中，您只能检索完整的密钥对（即包括私钥），私钥永远不会被存储EC2 并且无法恢复，如果您曾经松开它（但请参阅下面的解决方法）。

[Eric Hammond 最近对删除 ec2 实例上的已删除密钥对](https://serverfault.com/a/382137/10305)的相关问题后果的回答为该主题提供了另一个角度，包括指向他的文章[Fixing Files on the Root EBS Volume of an EC2 Instance](http://alestic.com/2011/02/ec2-fix-ebs-root)的指针，解释了如何访问该实例无论如何最终。

鉴于您的一些实例*已经运行多年*，但这可能无法正常工作，因为 *此过程仅适用于 EBS 启动实例*（当时尚不可用），并且正如 Eric 强调的那样，它也是其中之一[您现在应该在 Amazon EC2 上使用 EBS 引导实例](http://alestic.com/2012/01/ec2-ebs-boot-recommended)的众多原因。

# java - 在 onclick 方法中实现进度条的问题

> ID：10569654
> 
> 赞同：1
> 
> 时间：2012-05-13T05:59:46.693
> 
> 标签：java, android, android-layout, dialog, progress-bar

我目前正面临着试图弄清楚如何在我的程序中实现进度条以便在等待它计算调度时通知用户进度的问题。这是我编码的重要部分。

```
 Button btnOp1 = (Button) findViewById(R.id.btnOption1);
                btnOp1.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {

                        int year1 = datePicker.getYear();
                        int mnth1 = datePicker.getMonth() + 1;
                        int dy1 = datePicker.getDayOfMonth();
                        int hr1 = timePicker.getCurrentHour();
                        int min1 = timePicker.getCurrentMinute();

                        fDate1 = (pad(year1)) + ("-") + (pad(mnth1))
                             + ("-") + (pad(dy1));
                        fTime = (pad(hr1)) + (":") + (pad(min1));

                        ScheduleOp1();  
                            }
                    private Object pad(int b) {
                        // TODO Auto-generated method stub
                        if (b >= 10){
                            return String.valueOf(b);
                        }else{
                           return "0" + String.valueOf(b);
                        }

                    }
                   });  
protected void ScheduleOp1() {
        // TODO Auto-generated method stub

            Cursor cur = null;
            boolean mustCont = true;
            while (mustCont){
                db.execSQL("DROP VIEW IF EXISTS " +view_Schedule1);
                db.execSQL("CREATE VIEW " +view_Schedule1+ " " +
                        " AS SELECT " +sBusDepart+ "," +sBusArrival+ "," 
                        +sBusDepartT+ "," +sBusArrivalT+ " FROM" + " "
                        +fDepart+ " " + "INNER JOIN" + " " +sBusSchedule+ " " +
                        "ON " +sBusSchedule+ "." +sBusDate+ "=" +fDepart+ "." 
                        +fDate+ " " + "WHERE " +fDate+ "= '" +fDate1+"'"+" "+
                        "AND" + " " +sBusDepartT+ " " + "= strftime('%H:%M', '" +fTime+ "', '" +getVarMin()+"');");
                cur = fetchAllTodos();

                if (cur.getCount() == 0){

                    switch (min){
                    case 140 :
                        min = 141;
                        break;
                    case 141 :
                        min = 142;
                        break;
                    case 142 :
                        min = 143;
                        break;
                    case 143 :
                        min = 144;
                        break;
                    case 144 :
                        min = 145;
                        break;
                    case 145 :
                        min = 146;
                        break;
                    case 146 :
                        min = 147;
                        break;
                    case 147 :
                        min = 148;
                        break;
                    case 148 :
                        min = 149;
                        break;
                    case 149:
                        min = 150;
                        break;
                    case 150 :
                        min = 151;
                        break;
                    case 151 :
                        min = 152;
                        break;
                    case 152 :
                        min = 153;
                        break;
                    case 153 :
                        min = 154;
                        break;
                    case 154 :
                        min = 155;
                        break;
                    case 155 :
                        min = 156;
                        break;
                    case 156 :
                        min = 157;
                        break;
                    case 157 :
                        min = 158;
                        break;
                    case 158 :
                        min = 159;
                        break;
                    case 159 :
                        min = 160;
                        break;
                    case 160 :
                        min = 161;
                        break;
                    case 161 :
                        min = 162;
                        break;
                    case 162 :
                        min = 163;
                        break;
                    case 163 :
                        min = 164;
                        break;
                    case 164 :
                        min = 165;
                        break;
                    case 165 :
                        min = 166;
                        break;
                    case 166 :
                        min = 167;
                        break;
                    case 167 :
                        min = 168;
                        break;
                    case 168 :
                        min = 169;
                        break;
                    case 169 :
                        min = 170;
                        break;
                    case 170 :
                        min = 171;
                        break;
                    case 171 :
                        min = 172;
                        break;
                    case 172 :
                        min = 173;
                        break;
                    case 173 :
                        min = 174;
                        break;
                    case 174 :
                        min = 175;
                        break;
                    case 175 :
                        min = 176;
                        break;
                    case 176 :
                        min = 177;
                        break;
                    case 177 :
                        min = 178;
                        break;
                    case 178 :
                        min = 179;
                        break;
                    case 179 :
                        min = 180;
                        break;
                    case 180 :
                        min = 181;
                        break;
                    case 181 :
                        min = 182;
                        break;
                    case 182 :
                        min = 183;
                        break;
                    case 183 :
                        min = 184;
                        break;
                    case 184 :
                        min = 185;
                        break;
                    case 185 :
                        min = 186;
                        break;
                    case 186 :
                        min = 187;
                        break;
                    case 187 :
                        min = 188;
                        break;
                    case 188 :
                        min = 189;
                        break;
                    case 189 :
                        min = 190;
                        break;
                    case 190 :
                        min = 191;
                        break;
                    case 191 :
                        min = 192;
                        break;
                    case 192 :
                        min = 193;
                        break;
                    case 193 :
                        min = 194;
                        break;
                    case 194 :
                        min = 195;
                        break;
                    case 195 :
                        min = 196;
                        break;
                    case 196 :
                        min = 197;
                        break;
                    case 197 :
                        min = 198;
                        break;
                    case 198 :
                        min = 199;
                        break;
                    case 199 :
                        min = 200;
                        break;
                    case 200 :
                        min = 201;
                        break;
                    case 201 :
                        min = 202;
                        break;
                    case 202 :
                        min = 203;
                        break;
                    case 203 :
                        min = 204;
                        break;
                    case 204 :
                        min = 205;
                        break;
                    case 205:
                        min = 206;
                        break;
                    case 206 :
                        min = 207;
                        break;
                    case 207 :
                        min = 208;
                        break;
                    case 208 :
                        min = 209;
                        break;
                    case 209 :
                        min = 210;
                        break;

                    case 210 :
                        mustCont = false;
                        break;
                    }

                }else{
                    mustCont = false;
                    min = 140;
                }
            }
            if(cur != null && cur.getCount()>0){
                cur.moveToFirst();

                AlertDialog.Builder dialog = new AlertDialog.Builder(this);
                dialog.setTitle("Schedule Option 1 was chosen !")
                .setMessage("Based on the flight time chosen, the latest SkyBus available to take from"+ " " +cur.getString(0)+ "  " 
                                + "is"+ " " +cur.getString(2)+ " " + "which arrives at" + " " 
                        +cur.getString(1)+ " " + "at" + " " +cur.getString(3)+ ".")

                .setCancelable(false)
                        .setNeutralButton("Ok", new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int but) {
                                dialog.cancel();    
                            }       
                        });

                dialog.show();
                dialog.create();

                }else {
                min = 140;
                Toast.makeText(this, "Flight Schedule not found !", Toast.LENGTH_LONG).show();
                }
    } 
```

有什么建议么？我希望你们能帮助我。如果你们可以粘贴代码来展示如何实现这一点，那将会很有用，因为我对此并不熟悉。=/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T06:07:19.597

对 ScheduleOp1 进行异步任务，并将发布更新保持在主线程上的 ProgressDialog 中。按照链接： http: [//developer.android.com/resources/articles/painless-threading.html](http://developer.android.com/resources/articles/painless-threading.html) http://developer.android.com/guide/topics/ui/dialogs.html#ProgressDialog

# css - moz-transition - 翻转其他对象时更改文本

> ID：10569657
> 
> 赞同：0
> 
> 时间：2012-05-13T06:00:38.113
> 
> 标签：css, rollover

我正在寻找一个关于如何做这样的事情的真实例子：

图像上的滚动会导致此页面上的文本突出显示：http: [//shop.parklafun.com/t-shirts/](http://shop.parklafun.com/t-shirts/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T06:08:37.403

如果我理解您的问题，则`-moz-transition`不要更改文本颜色。这是更改颜色的代码：

```
div.ProductList div.grid_6:hover > a .ProductDetails h2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T06:16:27.520

这不是 -moz-transition ，可能是该标签隐藏在该图像上，并显示在 javascript 的 onMouseOver 事件上。

# java - 相机俯仰/偏航到方向矢量

> ID：10569659
> 
> 赞同：13
> 
> 时间：2012-05-13T06:01:01.607
> 
> 标签：java, lwjgl, raytracing, ray-picking

我想做的是从我的相机投射光线。我知道相机的 x、y 和 z 坐标，以及它的俯仰和偏航角。我需要计算它的方向向量，以便将它传递给我的光线追踪算法。

相机的向上向量是 (0, 1, 0)。“俯仰”，从摄像机的角度来看，是上下看。

（我宁愿不使用矩阵，但如果必须，我会使用）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-13T06:15:02.347

假设您的坐标系设置为满足以下条件：

```
(pitch, yaw)  -> (x, y, z)
(0,     0)    -> (1, 0, 0)
(pi/2,  0)    -> (0, 1, 0)
(0,    -pi/2) -> (0, 0, 1) 
```

这将计算 (x, y, z)：

```
xzLen = cos(pitch)
x = xzLen * cos(yaw)
y = sin(pitch)
z = xzLen * sin(-yaw) 
```

# vba - Office 2007 和 2003 之间的对象名称更改

> ID：10569661
> 
> 赞同：0
> 
> 时间：2012-05-13T06:01:20.147
> 
> 标签：vba, powerpoint, powerpoint-2007

出于自动化目的，我已将对象名称分配给 2007 Powerpoint 文件中的对象。我在另一台装有 office 2003 的机器上运行了自动化代码，发现对象名称在那里动态变化，因此自动化代码会引发错误。

我尝试使用 VBA 在该机器中再次重命名对象，并且它在调试时工作。但是当我重新运行自动化代码时会出现错误。

这是两个版本之间的兼容性问题还是其他问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:26:27.903

那是我对不同版本的 Word 的问题。通常，早期版本可能不支持 PowerPoint 最高版本的代码。但有时代码可以工作，但它所引用的方法可能会导致问题。

我建议使用后期绑定（...作为对象）来解决问题

用一个例子进行修订：

不同之处在于您在运行时将对象库绑定到代码中。您不使用工具参考。类似的东西：

```
Sub ppt()

    Dim olApp As Object

    Set olApp = CreateObject("PowerPoint.Application")

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T22:26:07.513

“对象名称”是指形状名称吗？即形状的 .Name 属性？这似乎是错误的。

考虑在需要处理的形状上使用标签。例如，假设在 oSh 中引用了您的形状，而不是使用 oSh.Name = "Remember me"，请执行以下操作：

```
oSh.Tags.Add "ShapeName","RememberMe" 
```

然后，当您需要获取对形状的引用时，请使用如下函数：

```
Function ShapeNamed(oSl as Object, sName as string) as Shape
  Dim oSh as Shape
  For Each oSh in oSl.Shapes
    If oSh.Tags("ShapeName") = sName Then
      Set ShapeNamed = oSh
      Exit Function
    End If
  Next
End Function 
```

oSl 被声明为 Object 而不是 Slide，因此您可以传递函数 Slides、Masters、Layouts 等。

# javascript - 如何检查特定列javascript中的所有复选框？

> ID：10569662
> 
> 赞同：4
> 
> 时间：2012-05-13T06:01:39.657
> 
> 标签：javascript, jquery

假设我有一个包含 3 列的表格，只有 TD 的第 1 列和第 3 列有复选框。我有一个按钮，上面写着“SelectAllFirst”，它只在第一列的所有复选框上打了一个复选标记，第三个保持不变。我该如何做到这一点？

我认为它会是这样的：

```
$("#mytable tr td:eq(0) input:[type=checkbox]").prop("checked", true); 
```

（但这没有做任何事情。删除“eq（0）”会导致所有复选框，包括要检查的第 3 列）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T06:14:09.413

我认为这应该可行，尽管我没有尝试过：

```
$("#mytable tr td:nth-child(1) input[type=checkbox]").prop("checked", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T06:06:33.460

`td`是单元格，我猜你的意思是行。虽然没有 html 很难说...

```
$("#mytable tr:eq(0) td input:checkbox").prop("checked", true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T06:24:43.143

我在这里为你创建了一个小提琴：http: [//jsfiddle.net/pwCKu/](http://jsfiddle.net/pwCKu/)

我相信有更好的方法来切换检查。只是一个概念证明。

# eclipse - Eclipse 在调试时未获取 Maven 附加源

> ID：10569663
> 
> 赞同：21
> 
> 时间：2012-05-13T06:02:11.843
> 
> 标签：eclipse, maven

我已经使用 Maven->Download Sources 下载了我的构建路径中所有 Maven JAR 的源代码，并且成功`mvn eclipse:eclipse -DdownloadSources=true`了！当我打开构建路径时，我可以看到每个 JAR 文件都附加了源 JAR。

但是当我在 Tomcat 6 上运行该死的东西时，我不断得到带有“编辑源查找路径”按钮的“找不到源”页面。但是源代码已经附加在构建路径中。这有什么不工作？

当我通过单击“编辑源查找路径”按钮手动将其指向 JAR 文件时，它可以工作。当我手动将其指向该文件夹时，它不起作用。为什么 Eclipse 或 Tomcat 没有在构建路径中获取附加的源代码？

**注意：**我使用的是 apache-maven-3.0.4、apache-tomcat-6.0.16 和 Eclipse Indigo Service Release 2。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-12T13:14:10.400

尽管此错误在@Sonatype 的所有错误中获得最多票数，但尚未修复。

但是我已经在 Eclipse Bugzilla 上填写了一个增强请求，如果您同意这个问题“找不到源”应该被修复，请在[这里](https://bugs.eclipse.org/bugs/show_bug.cgi?id=384065)投票。

[您可以在此处](https://stackoverflow.com/a/11452410/695116)找到三种解决方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-08T19:54:04.287

我找到了这个[com.ifedorenko.m2e.sourcelookup](https://github.com/ifedorenko/com.ifedorenko.m2e.sourcelookup)插件。该链接在“ *[Java 调试：找不到源](https://stackoverflow.com/questions/9474981/java-debugging-source-not-found)*”中提供。

前往`Help > Install New Software ..`并使用

> `http://ifedorenko.github.com/m2e-extras/`

搜索链接。安装此插件后，我终于能够调试依赖项的源代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-05T11:50:48.357

在**Debug Configurations**对话框中使用*External* Maven 而不是默认*Embedded 。*

 **请参阅下面的示例屏幕截图（菜单运行 -> 调试配置...）：

[配置外部 Maven](https://i.stack.imgur.com/D7nHg.png)

测试环境：

*   面向 Java 开发人员的 Eclipse IDE：Oxygen.1a Release (4.7.1a)，64 位（来自 spring.io）
*   Oracle JDK jdk1.8.0_144, 64 位
*   Maven：3.5.2
*   操作系统：Windows 10 企业版 N，64 位
*   测试目标`hpi:run`（示例 Jenkins 插件）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-13T23:22:57.430

在我的情况下，问题与“调试配置”附带的源代码有关，也许一些残留物形成了向 Maven 的迁移。

我通过转到“调试配置...”页面并选择配置以防万一，然后在“源”选项卡中恢复了默认值，这添加了所有项目的 Maven 依赖项，从而解决了这个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-19T07:18:50.867

Window->Preferences->JBoss Tools->Source Lookup

确保您已选中“自动将 JBoss Maven 源容器添加到所有 JBoss As 启动配置”。并在“自动配置 Java 源附件”下，选择“始终”。

这可以帮助自己解决问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-21T16:51:03.073

我想我通过更新我的[Eclipse m2e](https://www.eclipse.org/m2e/index.html)为自己解决了这个问题。我想我有 ~1.2 版本，然后更新到最新的 [写作时] 1.6.2。

[Eclipse Bug 注释](https://bugs.eclipse.org/bugs/show_bug.cgi?id=384065#c25)帮助我解决了这个问题。

现在我可以调试到我的 gquery-dnd-bundle-1.0.6 了！

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-03-16T16:03:35.177

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-source-plugin</artifactId>
            <version>${version.maven-source-plugin}</version>
            <executions>
                <execution>
                    <id>attach-sources</id>
                    <goals>
                        <goal>jar-no-fork</goal>
                        <goal>test-jar-no-fork</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2017-03-16T16:08:23.303

“目标” maven 项目应该在“客户端”项目可以访问源代码之前发出它的源代码。我通过在“目标”项目中使用 maven-source-pluging 解决了这个问题：[https ://maven.apache.org/plugins/maven-source-plugin/index.html](https://maven.apache.org/plugins/maven-source-plugin/index.html)

只需在目标项目的 pom.xml 文件中使用以下代码片段，进行发布，并将发布版本使用到客户端项目的 pom.xml 文件中。那么eclipse就可以自动让你无缝“跳转”到目标项目：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-source-plugin</artifactId>
            <version>${version.maven-source-plugin}</version>
            <executions>
                <execution>
                    <id>attach-sources</id>
                    <goals>
                        <goal>jar-no-fork</goal>
                        <goal>test-jar-no-fork</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```**

# javascript - ThreeJS中的平原地形

> ID：10569667
> 
> 赞同：0
> 
> 时间：2012-05-13T06:02:49.067
> 
> 标签：javascript, three.js, terrain

我正在尝试使用 ThreeJS 绘制平面地形，但它不起作用。

这是我的飞机创建代码：

```
var plane = new THREE.Mesh(new THREE.PlaneGeometry(300, 300), new THREE.MeshBasicMaterial({
        color: 0x0000ff
    }));
plane.overdraw = true;
this.scene.add(plane); 
```

很直接。其实我只是从某个网站复制的。

这就是我初始化场景和相机的方式：

```
 this.camera =
        new THREE.PerspectiveCamera(
        45, // view angle
        width / height, // aspect
        0.1, // near
        10000); // far

    this.scene = new THREE.Scene();

    // add the camera to the scene
    this.scene.add(this.camera);

    // the camera starts at 0,0,0
    // so pull it back
    this.camera.position.z = 800;
    this.camera.position.y = -100; 
```

我的中心还有一个半径为 20 的球体。它显示得很好。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:19:44.557

摄像机正在观察飞机的“背面”。

飞机有两个侧面，但只有一个是可见的。

两种解决方案：

**1）**移动相机看平面的“正面”：

```
this.camera.position.y = 100; 
```

**2）**或者，激活`doubleSided`标志：

```
plane.doubleSided = true; 
```

# jquery - 如何在用户可以“添加新”的地方实现动态 grouped_collection_select？

> ID：10569668
> 
> 赞同：1
> 
> 时间：2012-05-13T06:03:07.163
> 
> 标签：jquery, ruby-on-rails, coffeescript, grouped-collection-select

在 Rails 3.2 应用程序中，我有一对动态选择字段。这方面的典型示例是国家选择，在更改时将过滤州选择的选项。这是完美的工作。

但是如果我需要允许用户向列表中添加新状态怎么办？

这似乎应该是一个相当普遍的情况，但我一直无法找到有关最佳方法的大量信息。我发现与`select`标签有关，而`grouped_collection_select`我使用的标签更具挑战性。

我想知道其他人的意见和实施类似事情的经验。在非常基本的层面上，您将如何解决这个问题？

例如，我可以通过控制器或 javascript 在选择中包含一个 Add New 选项（注意，以下指示概念而不是有效代码）。

```
@state_options = State.all.collect {|so| [ so.country.id, so.id, so.name ] }
@state_options << [nil, nil, "Add New"] 
```

然后检测是否选择了“Add New”：

1.  无论是在保存时，都会显示一个弹出窗口供用户填写州名、母国和其他详细信息。
2.  或者在更改时，此时会使用 javascript 显示一些附加字段（更好的 UX，但如果 javascript 不存在则需要后备）。

或者我可以包含一个“添加新”链接：

1.  显示一个带有新状态表单的弹出窗口，在保存时会在状态选择字段上执行 Ajax 刷新。
2.  用一些文本字段替换状态选择，这些文本字段在保存父表单时会内置到新状态中。

所以我想知道哪种方法更好，为什么？

我也会感谢一些编码示例。我已经尝试过上面的合并`@state_options`数组，但是在语法上遇到了困难 - `syntax error, unexpected '['`，而且我的 javascript 技能不是很先进。

我的代码目前如下所示：

```
<%= simple_form_for(@address ) do |f| %>
  <%= f.collection_select :country_id, Country.order(:name), :id, :name, include_blank: true %>
  <%= f.grouped_collection_select :region_id, Country.order(:name), :regions, :name, :id, :name, include_blank: true %>
<% end %> 
```

（如果我走那条路，我会在上面的分组选择中用 @state_options 替换 :regions 。）

咖啡脚本看起来像这样

```
jQuery ->
    states = $('#address_state_id').html()
    console.log(states)
    $('#address_country_id').change ->
        country = $('#address_country_id :selected').text()
        escaped_country = country.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g, '\\$1')
        options = $(states).filter("optgroup[label=#{escaped_country}]").html()
        console.log(options)
        if options
            $('#address_state_id').html(options)   
        else
            $('#address_state_id').empty() 
```

# ruby - 尝试在 ruby 脚本上运行 ruby -debug 时如何摆脱此错误

> ID：10569672
> 
> 赞同：3
> 
> 时间：2012-05-13T06:03:14.383
> 
> 标签：ruby, debugging

我按照[此处](https://github.com/mark-moseley/ruby-debug/blob/master/README)的说明进行操作，但仍然无法找出问题所在。很高兴听到一些建议。提前致谢！

```
stanley@ubuntu:~/Github/webdev_class/ruby$ gem install ruby-debug19
Fetching: archive-tar-minitar-0.5.2.gem (100%)
Fetching: ruby_core_source-0.1.5.gem (100%)
Fetching: linecache19-0.5.12.gem (100%)
Building native extensions.  This could take a while...
Fetching: ruby-debug-base19-0.11.25.gem (100%)
Building native extensions.  This could take a while...
Fetching: ruby-debug19-0.11.6.gem (100%)
Successfully installed archive-tar-minitar-0.5.2
Successfully installed ruby_core_source-0.1.5
Successfully installed linecache19-0.5.12
Successfully installed ruby-debug-base19-0.11.25
Successfully installed ruby-debug19-0.11.6
5 gems installed
Installing ri documentation for archive-tar-minitar-0.5.2...
Building YARD (yri) index for archive-tar-minitar-0.5.2...
Installing ri documentation for ruby_core_source-0.1.5...
Building YARD (yri) index for ruby_core_source-0.1.5...
Installing ri documentation for linecache19-0.5.12...
Building YARD (yri) index for linecache19-0.5.12...
Installing ri documentation for ruby-debug-base19-0.11.25...
Building YARD (yri) index for ruby-debug-base19-0.11.25...
Installing ri documentation for ruby-debug19-0.11.6...
Building YARD (yri) index for ruby-debug19-0.11.6...
Installing RDoc documentation for archive-tar-minitar-0.5.2...
Installing RDoc documentation for ruby_core_source-0.1.5...
Installing RDoc documentation for linecache19-0.5.12...
Installing RDoc documentation for ruby-debug-base19-0.11.25...
Installing RDoc documentation for ruby-debug19-0.11.6...
stanley@ubuntu:~/Github/webdev_class/ruby$ ruby-debug ex39.rb
ruby-debug: command not found
stanley@ubuntu:~/Github/webdev_class/ruby$ ruby-debug19
ruby-debug19: command not found
stanley@ubuntu:~/Github/webdev_class/ruby$ rdebug ex40.rb
/home/stanley/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require': /home/stanley/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug-base19-0.11.25/lib/ruby_debug.so: undefined symbol: ruby_current_thread - /home/stanley/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug-base19-0.11.25/lib/ruby_debug.so (LoadError)
    from /home/stanley/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
    from /home/stanley/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
    from /home/stanley/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug-base19-0.11.25/lib/ruby-debug-base.rb:1:in `<top (required)>'
    from /home/stanley/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/stanley/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/stanley/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug19-0.11.6/cli/ruby-debug.rb:5:in `<top (required)>'
    from /home/stanley/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug19-0.11.6/bin/rdebug:108:in `require_relative'
    from /home/stanley/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug19-0.11.6/bin/rdebug:108:in `<top (required)>'
    from /home/stanley/.rvm/gems/ruby-1.9.3-p194/bin/rdebug:19:in `load'
    from /home/stanley/.rvm/gems/ruby-1.9.3-p194/bin/rdebug:19:in `<main>' 
```

- - - - - 更新 - - - - - - - - - - - - - -

我尝试卸载并重新安装 ruby​​-debug 和 linecache，但仍然失败。这是发生的事情的日志：

```
stanley@ubuntu:~/Github/webdev_class/ruby$ gem install linecache
Building native extensions.  This could take a while...
ERROR:  Error installing linecache:
    ERROR: Failed to build gem native extension.

        /home/stanley/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
Can't handle 1.9.x yet
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/home/stanley/.rvm/rubies/ruby-1.9.3-p194/bin/ruby

Gem files will remain installed in /home/stanley/.rvm/gems/ruby-1.9.3-p194/gems/linecache-0.46 for inspection.
Results logged to /home/stanley/.rvm/gems/ruby-1.9.3-p194/gems/linecache-0.46/ext/gem_make.out
stanley@ubuntu:~/Github/webdev_class/ruby$ gem uninstall linecache
INFO:  gem "linecache" is not installed
stanley@ubuntu:~/Github/webdev_class/ruby$ gem install linecache
Building native extensions.  This could take a while...
ERROR:  Error installing linecache:
    ERROR: Failed to build gem native extension.

        /home/stanley/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
Can't handle 1.9.x yet
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/home/stanley/.rvm/rubies/ruby-1.9.3-p194/bin/ruby

Gem files will remain installed in /home/stanley/.rvm/gems/ruby-1.9.3-p194/gems/linecache-0.46 for inspection.
Results logged to /home/stanley/.rvm/gems/ruby-1.9.3-p194/gems/linecache-0.46/ext/gem_make.out
stanley@ubuntu:~/Github/webdev_class/ruby$ gem uninstall ruby-debug
INFO:  gem "ruby-debug" is not installed
stanley@ubuntu:~/Github/webdev_class/ruby$ gem install ruby-debug
Building native extensions.  This could take a while...
ERROR:  Error installing ruby-debug:
    ERROR: Failed to build gem native extension.

        /home/stanley/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
Can't handle 1.9.x yet
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/home/stanley/.rvm/rubies/ruby-1.9.3-p194/bin/ruby

Gem files will remain installed in /home/stanley/.rvm/gems/ruby-1.9.3-p194/gems/linecache-0.46 for inspection.
Results logged to /home/stanley/.rvm/gems/ruby-1.9.3-p194/gems/linecache-0.46/ext/gem_make.out 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T21:49:43.190

最终通过安装 gem 解决了我的问题`debugger`：[http ://rubygems.org/gems/debugger](http://rubygems.org/gems/debugger)

*   将 gem 添加到您的 Gemfile 中：`gem 'debugger', group: [:development, :test]`
*   运行捆绑器：`bundle install`

如果您需要有关如何使用 gem 的指导，请观看视频教程[使用 Rails 在 15 分钟内创建博客 - 第 2 部分](http://youtu.be/zG_mvp8u4cI)。基本上，您需要做两件事来中断服务器呈现页面。

*   `debugger`在 ruby​​ 代码中的某处添加命令。如果它是一个视图，请`<% debugger %>`改用。
*   使用参数启动服务器：`rails server --debugger`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T06:16:26.357

我怀疑 ruby​​-debug19 尚未准备好 1.9.3 - 请参阅[http://blog.wyeworks.com/2011/11/1/ruby-1-9-3-and-ruby-debug](http://blog.wyeworks.com/2011/11/1/ruby-1-9-3-and-ruby-debug)以了解与您的类似症状和解决方法

# c++ - 为一组子类对象设置动画

> ID：10569674
> 
> 赞同：2
> 
> 时间：2012-05-13T06:05:02.030
> 
> 标签：c++, arrays, pointers, allegro

我正在尝试使用子类“Circle”、“Triangle”、“Rectangle”创建一个父类“Shape”。父类保存 x 位置、y 位置和填充颜色或所有“形状”，然后每个子类保存特定于该形状的信息。有人会介意查看我的代码，看看为什么我在尝试设置对象数组中的半径时收到错误“形状没有成员'setRadius'”...

PS现在我只有子类“Circle”，直到我让它工作。然后我将添加其他两个类。

此外，如果有人在我的代码中看到任何其他错误，我将不胜感激。

提前致谢

```
#include <allegro.h>
#include <cstdlib>

using namespace std;

#define scrX 640
#define scrY 400
#define WHITE makecol(255,255,255)
#define GRAY makecol(60,60,60)
#define BLUE makecol(17,30,214)

int random(int low, int high);

const int numCircles = random(1,50);

class Shape{
    public:
        Shape(){x = scrX / 2; y = scrY / 2; fill = WHITE;}
    protected:
        int x, y, fill;    
};
class Circle : public Shape{
    public:
        Circle(){radius = 0;}
        Circle(int r){radius = r;}
        void setRadius(int r){radius = r;}
    protected:
        int radius;
};
int main() 
{   
    // Program Initialization
    allegro_init();
    install_keyboard();
    set_color_depth(32);
    set_gfx_mode(GFX_AUTODETECT_WINDOWED, scrX, scrY, 0, 0);

    // Create and clear the buffer for initial use
    BITMAP *buffer = create_bitmap(scrX, scrY);
    clear_to_color(buffer, GRAY);

    // Set title and create label text in window
    set_window_title("Bouncing Balls Ver 1.0");
    textout_ex(buffer, font, "Bouncing Balls Ver 1.0", 10, 20, WHITE, GRAY);

    // Draw a background box
    rectfill(buffer, 50, 50, scrX-50, scrY-50, BLUE);

    // Create circles
    Shape **GCir;
    GCir = new Shape *[numCircles];
    for(int i=0;i<numCircles;i++){
        GCir[i] = new Circle;
        GCir[i]->setRadius(random(1,25)); // THIS IS THE ERROR        
    }

    while(!key[KEY_ESC]){
    blit(buffer, screen, 0, 0, 0, 0, scrX, scrY);
    }

    destroy_bitmap(buffer);

    return 0;
}
END_OF_MAIN();
int random(int low, int high)
{
    return rand() % (high - low) + low;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T06:22:23.863

`GCir[i]`的类型`Shape*`和`Shape`类没有`setRadius`方法，`Circle`有。因此，要么在分配对象之前调用`setRadius`它`Circle`，`GCir[i]`要么只构造`Circle`具有适当半径的对象：`GCir[i] = new Circle(random(1,25));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T06:16:21.850

锤子修复：

```
GCir[i]->setRadius(random(1,25)); 
```

应该改为

```
((Circle*)GCir[i])->setRadius(random(1,25)); 
```

更深层次的问题：

你需要 BaseClass 上的虚拟析构函数

更好的方法是在 Circle 类构造函数中获取半径。然后要么使用 Shape::draw() 作为虚拟函数来指定形状绘制，要么实现 Shape::getType() 并使用 switch case 来确定正确转换后的绘制逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T06:14:54.437

编译器说了算。您有一个 Shapes 数组，您尝试在其上调用仅针对 Circles 定义的 setRadius。您只能调用形状方法而不将形状指针转换为圆形。

# java - 鼠标位置更新不正确

> ID：10569675
> 
> 赞同：1
> 
> 时间：2012-05-13T06:06:28.890
> 
> 标签：java, swing, mouse, jframe, jbutton

我正在尝试获取鼠标位置并在光标位于按钮上方时点亮按钮。但是鼠标位置没有正确更新。我认为 y 位置搞砸了，因为目前如果我在按钮上方很远，它就会亮起。

这是我不正确的代码：

```
public void mouseMoved(MouseEvent e) {
    Window.mse = new Point((e.getX()) + ((Frame.size.width - Window.myWidth)/2), (e.getY()) + (Frame.size.height - (Window.myHeight)/2));
} 
```

这是窗口文件：

```
import javax.swing.*;
import java.awt.*;
import java.awt.image.*;
import java.io.*;

public class Window extends JPanel implements Runnable {

    public Thread thread = new Thread(this);

    public static Image[] tileset_ground = new Image[100];
    public static Image[] tileset_air = new Image[100];
    public static Image[] tileset_resources = new Image[100];

    public static int myWidth, myHeight;

    public static boolean isFirst = true;

    public static Point mse = new Point(0, 0);

    public static Room room;
    public static Levels levels;
    public static Shop shop;

    public Window(Frame frame) {
        frame.addMouseListener(new KeyHandler());
        frame.addMouseMotionListener(new KeyHandler());

        thread.start();
    }

    public void define() {
        room = new Room();
        levels = new Levels();
        shop = new Shop();

        tileset_resources[0] = new ImageIcon("resources/cell.png").getImage();

        levels.loadLevels(new File("levels/level1.level"));

        for(int i=0;i<tileset_ground.length; i++) {
            tileset_ground[i] = new ImageIcon("resources/tileset_ground.png").getImage();
            tileset_ground[i] = createImage(new FilteredImageSource(tileset_ground[i].getSource(), new CropImageFilter(0, 32 * i, 32, 32)));
        }

        for(int i=0;i<tileset_air.length; i++) {
            tileset_air[i] = new ImageIcon("resources/tileset_air.png").getImage();
            tileset_air[i] = createImage(new FilteredImageSource(tileset_air[i].getSource(), new CropImageFilter(0, 32 * i, 32, 32)));
        }

    }

    public void paintComponent(Graphics g) {
        if(isFirst) {

            myWidth = getWidth();
            myHeight = getHeight();

            define();

            isFirst = false;
        }

        g.setColor(new Color(70, 70, 70));
        g.fillRect(0, 0, myWidth, myHeight);
        g.setColor(new Color(0, 0, 0));
        g.drawLine(room.block[0][0].x, room.block[room.worldHeight - 1][0].y + room.blockSize, room.block[0][room.worldWidth - 1].x + room.blockSize, room.block[room.worldHeight - 1][0].y + room.blockSize);
        g.drawLine(room.block[0][0].x, room.block[room.worldHeight - 1][0].y + 1 + room.blockSize, room.block[0][room.worldWidth - 1].x + room.blockSize, room.block[room.worldHeight - 1][0].y + 1 + room.blockSize);

        room.draw(g); //Draws room
        shop.draw(g); //Draws shop
    }

    public void run() { 
        while(true) {

            if(!isFirst) {
                room.physic();
            }

            repaint();

            try {
                Thread.sleep(1);
            } catch(Exception e) {
                e.printStackTrace();
            }

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T06:10:26.760

只需将 MouseListener 添加到 JButton。或者更好的做法是在按钮的模型中添加一个 ChangeListener，并在其中调用`isRollover()`模型。

# shell - 如何在 unix shell 中创建多行刷新

> ID：10569693
> 
> 赞同：0
> 
> 时间：2012-05-13T06:09:21.090
> 
> 标签：shell, unix, terminal, carriage-return

我知道如何通过清除该行的`\r`回车来使终端应用程序的最后一行刷新自己。

我怎样才能用比最后一行更多的行来做到这一点？（像 vi 这样的程序是如何做到的？）

编辑没有外部，如`ncurses`，`tput`等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T06:11:10.657

> 我怎样才能用比最后一行更多的行来做到这一点？（像 vi 这样的程序是如何做到的？）

他们正在使用`ncurses`, `termcap`, `terminfo`, 很多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T06:58:50.087

如果您想在不使用`curses`等的情况下执行此操作，那么您必须知道为您计划支持的每种不同终端类型发送哪些终端控制代码。

您还需要了解每个终端所支持的操作如何达到所需的效果。一些终端可能有一个“清除屏幕结束”命令；其他人可能需要写很多字符。

总体而言，使用设计用于处理工作的东西和`terminfo`终端数据库可能更容易。

# ruby-on-rails-3 - 如何在嵌入式 Ruby 中指定 twitter 引导程序的标签

> ID：10569695
> 
> 赞同：1
> 
> 时间：2012-05-13T06:09:39.617
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T09:54:31.957

当然，只需尝试以下操作：

```
<%= content_tag(:li, :class => 'sidebar') do %>
  <%= link_to '#' do %>
    <%= content_tag :i, '', :class => 'icon-user' %> Home
  <% end -%>
<% end -%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T05:30:41.720

我使用的较短的替代方案是

link_to " ".html_safe, '#'

它“更脏”但更容易理解。

# html - 将整个图像按比例（动态但没有固定图像尺寸）调整为 div 容器而不拉伸到容器的每一侧

> ID：10569696
> 
> 赞同：0
> 
> 时间：2012-05-13T06:09:52.257
> 
> 标签：html, css, image, wordpress

我在不拉伸动态生成并加载到固定容器中的情况下按比例调整全尺寸图像的大小时遇到​​问题。我正在使用 Wordpress + WP Ecommerce 来动态调整完整的 singke

例如，使用以下 html 代码：

```
<div class="image" style="display: table; width:360px; height: 430px; #position: relative; overflow: hidden; text-align:center;">
       <table width="100%"  class='nocolour' style="display: table-cell;margin-left: auto;
        margin-right: auto; text-align: center; vertical-align: middle; height:auto;">
           <tr style=" width:100%;">
           <td valign="middle" style="vertical-align:middle; width:100%; text-align: center;">
           <div class="imageplaceholder" style="max-width:100%; width:100%; height: 430px; overflow: hidden;margin: auto; text-align:center; "><a style="width: 100%; text-align: center; " href="<?php echo wpsc_the_product_permalink(); ?>">
                 <img style="height: auto; max-width:100%;margin-left: auto; margin-right: auto; display:block; overflow:hidden;"  class="product_image" id="product_image_<?php echo wpsc_the_product_id(); ?>" alt="<?php echo wpsc_the_product_title(); ?>" title="<?php echo wpsc_the_product_title(); ?>" src="<?php echo wpsc_the_product_thumbnail(get_option('product_image_width'),get_option('product_image_height'),'','single'); ?>"/>
             </a></div>
            </td>
          </tr>
        </table>
    </div> 
```

和CSS：

```
.wrapper .page-container .content .rightcontent .main-product-image img{
   width: 360px; height:430px; display:block; overflow:hidden;
} 
```

有什么想法可以纠正这个问题吗？

非常感谢任何回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T06:46:36.983

同时设置宽度和高度参数将拉伸和扭曲您的图像以适应这些尺寸。将 CSS 中的宽度或高度（无论您喜欢哪个）设置为“自动”。所以：

```
.wrapper .page-container .content .rightcontent .main-product-image img{
    width: 360px; height:auto; display:block; overflow:hidden;
} 
```

其次，确保您的所有图像都没有比提供的静态样式少。在这种情况下，所有图像的宽度都不应小于 360 像素。在浏览器中缩放图像的一般经验法则是始终按比例缩小。否则，您的图像将看起来像一个破碎的屁眼。

就图像的父容器的样式而言，它看起来还不错。你有一个静态的宽度和高度，它会切断任何溢出。只要确保当图像缩小到它们各自的静态值时，自动值不小于容器的尺寸。

# javascript - RexExp (?=) 结构

> ID：10569699
> 
> 赞同：0
> 
> 时间：2012-05-13T06:10:18.180
> 
> 标签：javascript, regex

考虑您正在搜索出现在 B 之后的 C。为什么以下代码返回 -1 而不是 2：

```
console.log('abc'.search(/(?=b)c/)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T06:13:39.373

因为[`(?=`是向前看，而不是向后看](http://www.regular-expressions.info/lookaround.html)。

> `q(?=u)`匹配`q`后跟 a 的 a `u`，而不使 u 成为匹配的一部分。

* * *

在你问之前：[JavaScript regex 不支持 lookbehind](http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript)。但是，在这种简单的情况下，您可以使用基于前瞻的解决方法：

```
var index = 'abc'.search(/b(?=c)/);
if (index !== -1) index++;
console.log(index); 
```

之所以有效，是因为您正在寻找 的 位置，`c`但这`b`在逻辑上与 的位置 大于 1`b`相同`c`。

但是，在您太兴奋之前：**您不需要正则表达式。完全没有。**

```
var index = 'abc'.indexOf('bc');
if (index !== -1) index++;
console.log(index); 
```

# javascript - 如何让 Jquery 显示/隐藏动态 Div 元素？

> ID：10569701
> 
> 赞同：4
> 
> 时间：2012-05-13T06:10:38.367
> 
> 标签：javascript, jquery, django

我想使用 JQuery 复制以下 javascript 代码，这样页面就不必刷新。我在使用 Jquery 时遇到的主要问题是，我想要选择的 div 会根据评论 id 而有所不同，其中可能有数百个。非常感谢任何帮助或建议！

```
<head>
<script type="text/javascript">
<!--
function toggle_visibility(id) {
   var e = document.getElementById(id);
   if(e.style.display == 'block')
      e.style.display = 'visible';
   else
      e.style.display = 'block';
}
//-->
</script>
</head>
<body>
{% for comment in comments %}
<a href="#" onclick="toggle_visibility('make_reply_{{comment.id}}');">Reply</a>
<div id="make_reply_{{comment.id}}">
<form name="titleform" action="/{{slug}}/reply/" method = "post">
    <input type="hidden" name="id" value="{{comment.id}}"</input>
{% csrf_token %}
<textarea name = "comment" value="" rows="7" cols="50"></textarea><br>
<input type="submit" value="Submit"/>
</form>
</div>
{% endfor %}
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T06:16:31.677

HIya**演示** [http://jsfiddle.net/gpwnn/](http://jsfiddle.net/gpwnn/)

API 链接：[http ://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

**代码**

```
toggle_visibility = function (id){

   var e = $("#"+id);
   e.toggle();
}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T06:16:07.823

由于您使用的是 jQuery，请[`$.toggle()`](http://api.jquery.com/toggle/)改用：

```
$( '#' + id ).toggle(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T06:16:56.343

```
function toggle_visibility(id) {
   var $e = $('#' + id);
   if($e.is(':visible'))
      $e.hide();
   else
     $e.show();
} 
```

要不就`$e.toggle();`

```
function toggle_visibility(id) {
   var $e = $('#' + id);
   $e.toggle();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T06:38:03.657

如果我必须这样做，我会以更简单的方式进行，如下所示：

**HTML：**

```
 {% for comment in comments %}
 <div id="{{comment.id}}"> // this div will separate each iterate elements
   <a href="#">Reply</a> // no inline method required in jquery
   <form name="titleform" action="/{{slug}}/reply/" method = "post">
     <input type="hidden" name="id" value="{{comment.id}}"/>
     <textarea name = "comment" value="" rows="7" cols="50"></textarea><br>
     <input type="submit" value="Submit"/>
   </form>
 </div>
 {% endfor %} 
```

**jQuery**

```
 $('a').click(function(){
   $(this).next('form').toggle();
 }); 
```

小提琴：http: [//jsfiddle.net/VjthL/2/](http://jsfiddle.net/VjthL/2/)

# java - 在对话框的自定义视图中处理后退键

> ID：10569702
> 
> 赞同：1
> 
> 时间：2012-05-13T06:10:39.420
> 
> 标签：java, android

好的，所以我在对话框中有一个自定义视图，但它的 onKeyDown 永远不会被调用。我也尝试过 onKeyPreIme 但没有用，并且将对话框的 setCancelable 设置为 true 也无济于事。

编辑 ：

```
//Removed all unnecessary code

public class CustomView extends LinearLayout
{    

    @Override
    public boolean onKeyDown (int keyCode, KeyEvent event)
    {
            if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0)
            {           
                   //do stuff here
                    return true;

            }    
            return super.onKeyDown(keyCode, event);         
    }
}
public class CustomDialog
{
    Dialog dialog;
    public class CustomDialog(Context context)
    {
         dialog = new Dialog(context);
         dialog.setContentView(R.layout.test);// the test.xml has CustomView

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T06:36:36.400

你为什么不简单地使用：

```
public void onBackPressed() {
       //desired functionality here 
       return;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T06:35:21.633

将您的`onKeyDown`逻辑移动到一个`OnKeyListener`实现并将其注册到您的视图的构造函数中。

# c# - 通过在 c# 中创建 httpwebrequest 来获取 .... 的 html 元素

> ID：10569704
> 
> 赞同：1
> 
> 时间：2012-05-13T06:11:28.180
> 
> 标签：c#, .net, visual-studio

我想从 html 代码的“tablerow”内容中提取一些 html 元素并创建一个自动化应用程序。httpwebrequest 和 httpwebresponse 可以帮我这样做吗？如果是，那么任何人都可以告诉我这样做的样本......提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T06:53:04.150

我会从 nuget 获取 HtmlAgilityPack。WebClient 更简单，但 HttpWebRequest 更强大并且允许更多控制。正则表达式可以工作，但通常很痛苦。如果您认为此文档的格式足够好，则相关元素的快速 XPath 通常更容易和更清晰，因此请尝试以下操作：

```
 var client = new WebClient();
//var html = client.DownloadString("YOURURL");
var html = "<html><body><table><tr><td></td></tr></table></body></html>";
var document = new HtmlDocument();
document.LoadHtml(html);
var nodes = document.DocumentNode.SelectNodes("//body/table");

Console.WriteLine(nodes[0].InnerHtml);
Console.ReadLine(); 
```

# php - 加入 mySQL 查询并且只返回某些结果？

> ID：10569716
> 
> 赞同：0
> 
> 时间：2012-05-13T06:14:30.777
> 
> 标签：php, mysql

我目前有两个查询：

```
$iQ = mysql_query("SELECT * FROM `movies` WHERE `released` > '" . $begin . 
    "' AND `released` < '" . $end . "' ORDER BY `views` DESC LIMIT 5");

while ($iR = mysql_fetch_array($iQ)) {
    $imageQ = mysql_query("SELECT * FROM `movie_image`
        WHERE `movie_id` = '" . $iR['id'] . "' AND `image_size` = 'thumb'
        AND `type` = 'poster' LIMIT 1");
} 
```

我想把它放到一个查询中，如果movie_image 表中有行，我只想返回结果，这意味着结果集中不会返回没有图像的电影。

如何加入这两个查询，以便我可以使用第一个查询获取电影图像，并且仅在电影 ID 存在电影图像时才返回结果？

如果您不明白，请告诉我，我会尝试改写我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T06:58:13.117

如果您想选择其中一个匹配的图像，但不关心哪个（这就是您当前的查询所做的），您可以加入表和`GROUP BY`电影 id（我假设它`UNIQUE`在 中`movies`，例如主键）：

```
SELECT   *
FROM     movies
    JOIN movie_image 
      ON movie_image.movie_id = movies.id
     AND movie_image.image_size = 'thumb'
     AND movie_image.type = 'poster'
WHERE    movies.released BETWEEN :begin AND :end
GROUP BY movies.id
ORDER BY views DESC
LIMIT    5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T06:20:30.460

```
SELECT * FROM `movies`
    INNER JOIN `movie_image` ON `movie_image`.`movie_id` = `movies`.`id`
    WHERE `movies`.`released` > '" . $begin . "'
    AND `movies`.`released` < '" . $end . "'
    AND `movie_image`.`image_size` = 'thumb'
    AND `type` = 'poster' ORDER BY `movies`.`views` DESC LIMIT 5 
```

此查询应该适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T06:23:39.510

首先，这里的关系是一对多的关系，所以你不能在一个查询中做到这一点。

其次，如果存在电影图像，要返回电影，您需要在第一个查询中检查，然后遍历第一个查询以获取与每部电影相关的图像。

```
$iq = "SELECT m.* FROM `movies` m 
      RIGHT JOIN `movie_images` mi ON mi.movie_id = m.movie_id
      WHERE `m.released` > '" 
      . $begin . "' AND `m.released` < '" . $end . "' GROUP BY `m.movie_id` ORDER BY `m.views` 
      DESC LIMIT 5";

$res = mysql_query($iq);
while($ir = mysql_fetch_assoc($res)){
  //get the images for each movie here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T06:23:48.467

我认为这个查询可以帮助你。如果电影表标识符 = id(ms.id)。

```
SELECT mi.* FROM movie_image mi
    JOIN movies ms ON mi.movie_id = ms.id
    WHERE ms.released > '" . $begin . "'
    AND ms.released < '" . $end . "'
    AND mi.image_size = 'thumb' AND mi.type = 'poster'
    ORDER BY ms.views DESC LIMIT 5 
```

# eclipse - Eclipse 和 Collabnet 颠覆

> ID：10569720
> 
> 赞同：0
> 
> 时间：2012-05-13T06:15:08.740
> 
> 标签：eclipse, svn

我已经在 Eclipse 上安装了 Collabnet Subversion，以便连接到 Collabnet 服务器。

目前只有一个开发者，所以不存在冲突的问题。

但是，现在我们正在添加多个开发人员。每个人都将开发一个应用程序的部分。我如何组织项目？我不能让他们每次都检查整个项目，因为他们会丢失他们拥有的任何更新——如果我是正确的。

我是否应该以每个部分都在一个单独的包中的方式拆分应用程序。这样，程序员可以导入已由其他程序员更新的应用程序部分，而不必每次都导入整个应用程序。

这有任何意义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T06:26:50.303

我不确定我是否理解你的问题。每个开发人员只需检查一次整个项目。当他们想要获取其他人所做的更改时，他们运行“更新”，svn 将替换/合并任何修改过的文件。没有丢失更改的危险。即使多人编辑同一个文件，它通常也会自动合并，如果没有，手动合并是可用的。

您应该按功能组织您的应用程序代码。如果这与单个开发人员将要处理的“部分”相对应，那很好，但这不是绝对必要的。

# java - 如何限制 arraylist 在泛型之前只接受特定类型的对象

> ID：10569724
> 
> 赞同：-1
> 
> 时间：2012-05-13T06:16:07.357
> 
> 标签：java, generics, collections, arraylist

我们如何限制数组列表在泛型之前只接受特定类型的对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T06:22:17.933

编写一个仅接受允许类型的包装函数，并隐藏集合。这是 Java-5 之前的标准最佳实践。

```
private final List strings = new ArrayList();

public void add(String s)
{
    strings.add(s);
}

public String remove(String s)
{
    return (String) strings.remove(s);
}

// etc... 
```

是的，这很糟糕。

我可能会问：您不使用泛型是否有原因？它们*与*Java 1.4 字节码兼容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T06:33:16.953

两个选项，（我在这里假设 C#，但几乎都适用于所有 OO 语言）。

1）从选择的集合类型（或其接口）继承，覆盖所有方法以在错误的类型上抛出异常，如下所示：

```
 public class MyType
{
    // Your type here
}

public class MyTypeCollection : ArrayList
{
    public override int Add(object value)
    {
        if (!(value is MyType))
        {
            throw new ArgumentException("value must be of type MyType");
        }

        return base.Add(value);
    }

    public int Add(MyType myType)
    {
        return base.Add(myType);
    }

    // Other overrides here
} 
```

或 2）（可能更好），完全创建自己的类型并实现集合所需的接口，并在内部使用非泛型、非类型化集合。像这样的东西：

```
 public class MyTypeCollection2 : IEnumerable
{
    private readonly ArrayList _myList = new ArrayList();

    public void Add(MyType myType)
    {
        _myList.Add(myType);
    }

    // Other collection methods

    public IEnumerator GetEnumerator()
    {
        yield return _myList.Cast<MyType>();
    }
} 
```

确保实现您将关心的所有接口。在 .NET Framework 中，为 ArrayList 实现的接口有：IList、ICloneable

希望这可以帮助。

# javascript - 用于检查日期的 JavaScript

> ID：10569732
> 
> 赞同：1
> 
> 时间：2012-05-13T06:17:06.133
> 
> 标签：javascript, asp.net

```
function checkDate(sender, args) {
                var toDate = new Date();
                toDate.setMinutes(0);
                toDate.setSeconds(0);
                toDate.setHours(0);
                toDate.setMilliseconds(0);
                if (sender._selectedDate > toDate) {
                    alert("You can not select forthcoming days!");
                    sender._selectedDate = toDate;
                    sender._textbox.set_Value(sender._selectedDate.format(sender._format))
                } 
```

我使用这个 javascript 来验证文本框的日期。它应该只接受所有过去的日期和今天的日期。不接受未来日期。它非常适合过去和未来的日期。但是当我选择今天的日期时，它不接受。逻辑是正确的，因为选择的日期应该大于我给出的今天的日期。任何人都可以对此提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T06:20:55.327

您正在检查一天的开始时间（即 0:00）。因此，除非他们在午夜继续，否则 selectedDate 将 > toDate *。*您希望将时间字段设置为 23:59:59 以允许当天的任何时间。

# ajax - ajax 在 django 模板中发布没有更新

> ID：10569737
> 
> 赞同：0
> 
> 时间：2012-05-13T06:19:15.827
> 
> 标签：ajax, django

我想用 ajax 在 django 中发布一些文本，并保存输入数据，在同一页面中显示数据并且不刷新，比如 twitter。

我的js：

```
$('#SumbitButton').click(function(){
        var data_1 = $('#data_1').val()
        var data_2 = $('#data_2').val()
        var data_3 = $('#data_3').val()
        var data_4 = $('#data_4').val()
        var user = $('#AuthorName').text()
        var authorprotrait = $('#UserProprait').html()
    if(data_1.length>0){
        $.ajax({
            type: 'POST',
            url: '/post/',
            data:{'data_1':data_1,'data_2':data_2,'data_3':data_3,'data_4':data_4}, 
            async: false,
            error: function(msg){alert('Fail')},
            success:  function(msg){
                $('#TopicWrap').prepend("<div class='topic-all even'><div class='topic-left'><div class='topic-author'><div class='topic-author-protrait'>"+authorprotrait+"</div><div class='topic-author-nickname'>"+authorname+"</div></div></div><div class='topic-right'><div class='topic-meta'><span class='topic-datetime'></span></div><div class='topic-content-wrap'><div class='topic-content'>"+msg+"</div></div></div><div class='clearfix'></div></div>");
                $('#data_1').val('');   
                $('#data_2').val('');
                $('#data_3').val('');
                $('#data_4').val('');   
            }
        });
    } else {
        alert('The data_1's length  error ！'+data_1.length);  
    }   
}); 
```

和html：

```
<div id="TopicTextarea">
    <div>
        data1:<input tabindex="4" id="data_1"  type="text" name="data1"  value="" maxlength="6"  placeholder=""/></br>
        data2:<input tabindex="4" id="data_2"  type="text" name="data2"  value="" maxlength="8"  placeholder=""/></br>
        data3:<input tabindex="4" id="data_3"  type="text" name="data3"  value="" maxlength="10"  placeholder=""/></br>
        data4:<input tabindex="4" id="data_4"  type="text" name="data4"  value="" maxlength="10"  placeholder=""/>  
        <div id="TopicFormControl">
        <button type="button" id="SumbitButton" class="button orange">sumbit</button>
        </div>
    </div>
　　 <div class="clearfix"></div>
</div>
<div id="TopicWrap">
{% include 'topics.html'%}
</div> 
```

和意见：

```
@login_required
def post(request):

    assert(request.method=='POST' and request.is_ajax()==True)
    data_1 = smart_unicode(request.POST['data_1'])
    data_2 = smart_unicode(request.POST['data_2'])
    data_3 = smart_unicode(request.POST['data_3'])
    data_4 = smart_unicode(request.POST['data_4'])

    data_obj = DataPool(user=request.user,data_1=data_1,data_2=data_2,data_3=data_3, data_4=data_4)
    data_obj.save()

    content = '"+data_3+" 　"+data_4+"　"+data_1+"("+data_2+")' 

    response = HttpResponse(cgi.escape(content))

    return response 
```

当我输入数据并单击 sumbit 按钮时，它可以保存数据，但不能显示数据。我的代码有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T07:05:14.700

首先，使用诸如[海报之](https://addons.mozilla.org/en-US/firefox/addon/poster/)类的东西来测试您的视图是否返回了您所期望的。只有这样您才应该开始构建 AJAX 部分。

至于出了什么问题……很难说，因为您只是写它“无法显示数据”而不是说它实际上在做什么。我怀疑这与您认为的这条线有关：

```
content = '"+data_3+" 　"+data_4+"　"+data_1+"("+data_2+")' 
```

我不太清楚你认为这会做什么，但它实际上做了什么：

```
>>> '"+data_3+" 　"+data_4+"　"+data_1+"("+data_2+")'
'"+data_3+" \xe3\x80\x80"+data_4+"\xe3\x80\x80"+data_1+"("+data_2+")' 
```

也就是说，它生成一个包含子字符串`"data_3"`（等）的字符串。它**不**包括提交的数据。

# jquery - 在液体布局中使用 Less.js 计算 div 的高度

> ID：10569738
> 
> 赞同：1
> 
> 时间：2012-05-13T06:19:25.903
> 
> 标签：jquery, css, height, less, liquid-layout

我有一个流畅的布局，并且正在学习/使用 Less.js 作为我的 CSS。

我有一个 div 'A' 需要考虑用户视图框，减去另一个 div 'B' 高度（以 % 为单位），最后减去另一个 div 'C' 以像素为单位。

这是我认为可行但不可行的方法：

```
@menubarsHeight: 7%;   // declaring variable with div 'B' 's height.
@ttlHeight: '$(window).height()';     // calculating height using jquery 
@midParentHeight: -20px + @didParentHeight - @menubarsHeight;     // calculating the height based on the above two variables, -20px is the height of div 'C'. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T18:49:42.773

这里有一些不清楚的地方。也就是说，你不告诉我们是什么`@didParentHeight`，你计算`@ttlHeight`但不使用它。您也没有明确说明 div B 的父级是什么（窗口？）。

鉴于这些不确定性，我将假设一些事情并尝试回答。如果所有三个 div 都将窗口作为其父窗口，并且您的 javascript 给出了正确的窗口高度，那么看起来这就是答案：

```
@menubarsHeight: 0.07; /* define as decimal */
@midParentHeight: @ttlHeight - 20px - (@ttlHeight * @menubarsHeight); 
```

我使用`0.07`而不是`7%`因为我不太确定 LESS 是否会使用百分比正确进行乘法（它将是混合`px`和`%`单位）。所以用小数，然后假设`@ttlHeight`是`100px`，这应该计算为：

```
@midParentHeight: 100px - 20px - (100px * 0.07); 
```

应该变成：

```
@midParentHeight: 100px - 20px - 7px = 73px 
```

如果您需要`@menubarsHeight`稍后实际定义您的 div B，请执行此操作（这将采用小数并将其放入`%`css 的单位值）：

```
div.B { height: percentage(@menubarsHeight); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:53:09.367

顺便说一句，事实证明，你不需要 less/js 来做我想做的事情，即计算视口的高度。

以下简单的 CSS 解决了这个问题。但是，ScottS 的答案对于 Less 查询来说非常棒。

```
 position: absolute;
    top: 8%;
    bottom: 50px;
    left: 1.5%;
    right: 1.5%; 
```

# linux - 限制分叉/子进程的数量

> ID：10569739
> 
> 赞同：1
> 
> 时间：2012-05-13T06:19:54.190
> 
> 标签：linux, ubuntu, ulimit, setrlimit

我在 Ubuntu 12.04 上托管一个计算服务，我需要一种方法来防止用户进行分叉炸弹攻击。我目前`setrlimit(RLIMIT_NPROC)`在 Linux 中使用。但是，这实际上对给定 UID 的进程数设置了全局限制。因为我的服务有许多并行作业，都以相同的 UID 运行，这意味着一个进程可以 DOS 整个服务。

相反，我正在寻找一种方法来设置限制，例如当前进程的子进程的递归数量。我被告知要研究 linux `cgroups`/`libcgroup`但老实说，我真的不明白这如何解决我的问题。有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T07:46:07.677

互联网说，防止（阅读：减轻）分叉炸弹的唯一方法是设置 RLIMIT_NPROC。可能是因为用户 ID 是附加“到目前为止分叉的进程”调用的唯一实用位置。

建议：让您的服务在多个 uid 下运行，并让服务的每次调用选择一个。然后，流氓客户端通过分叉轰炸进入 DOS 的能力受到使用的 UID 数量成比例的限制。

您可能需要某种 SUID 帮助程序来执行此操作，除非服务的顶级进程以 root 身份运行（通常被认为是个坏主意）。

# objective-c - NSRect 圆角

> ID：10569742
> 
> 赞同：1
> 
> 时间：2012-05-13T06:20:42.573
> 
> 标签：objective-c, ios, xcode, macos

有没有一种简单的方法可以在 Objective-C 中为 NSRect 元素添加圆角？目前我们正在应用一个模拟角落的PNG图像：

```
NSRect newFrame = NSMakeRect(0, 0, size.width, size.height); 
```

但是，性能成为一个问题，因为这个 NSRect 的许多实例以及使用 Core Animation 渲染的图像。从性能的角度来看，也许渲染带有圆角边缘的本机 NSRect 会更好？使用 Core Animation 渲染时，所述边缘看起来是否平滑（抗锯齿）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T06:33:42.473

NSRect 是一个包含 NSPoint 和 NSSize 的结构，所以我认为你的意思是任何接受 NSRects（所以是 NSView 的子类）的东西。所有 NSView 子类层都对 -cornerRadius 做出适当的响应（关于 NSScrollView 的内容除外）。

```
self.view.layer.masksToBounds = YES;
self.view.layer.cornerRadius = 10.0; 
```

# javascript - JavaScript/jQuery：运行 DOM 命令 *after* img.onload 命令

> ID：10569745
> 
> 赞同：2
> 
> 时间：2012-05-13T06:21:30.497
> 
> 标签：javascript, jquery

我需要获取 CSS 背景图像的宽度和高度并将其注入到 document.ready javascript 中。就像是：

```
$(document).ready(function(){
  img = new Image();
  img.src = "images/tester.jpg";

  $('body').css('background', 'url(' + img.src + ')');
  $('body').css('background-size', img.width + 'px' + img.height + 'px');
}); 
```

问题是，在 document.ready 时没有加载图像的宽度和高度，所以这些值是空白的。（它们可以从控制台访问，但之前不能）。

`img.onload = function() { ... }`检索宽度和高度，但`$(element)`无法从 img.onload 中访问 DOM 调用。

简而言之，我的 javascript 有点生疏，不知道如何将图像参数同步到 DOM 中。任何帮助表示赞赏

编辑：jQuery 版本是 1.4.4，无法更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T06:24:05.870

您可以使用它[`$.holdReady()`](http://api.jquery.com/jQuery.holdReady/)来阻止 jQuery 的`ready`方法在所有图像加载之前触发。那时，它们的宽度和高度将立即可用。

打电话加星`$.holdReady(true)`。在`onload`每个图像的方法中，检查总共加载了多少图像，如果与预期图像的数量相匹配，您可以`$.holdReady(false)`触发 ready 事件。

如果您无权访问`$.holdReady()`，则只需等待吐出您的 HTML，直到所有图像都已加载，仍然调用一个函数：

```
var images = { 'loaded': 0,
               'images': [
                 "http://placekitten.com/500/500", 
                 "http://placekitten.com/450/450", 
                 "http://placekitten.com/400/400",
                 "http://placekitten.com/350/340", 
                 "http://placekitten.com/300/300", 
                 "http://placekitten.com/250/250",
                 "http://placekitten.com/200/200", 
                 "http://placekitten.com/150/150", 
                 "http://placekitten.com/100/100"
               ]};

function outputMarkup() {
  if ( ++images.loaded === images.images.length ) {
    /* Draw HTML with Image Widths */ 
  }
}

for ( var i = 0; i < images.images.length; i++ ) {
  var img = new Image();
  img.onload = function(){
    outputMarkup();
  };
  img.src = images.images[i];
} 
```

# emacs - Org-agenda-files 用显式文件名替换目录

> ID：10569746
> 
> 赞同：6
> 
> 时间：2012-05-13T06:22:06.873
> 
> 标签：emacs, elisp, org-mode

我`tasks/`在`org-agenda-files`变量中有一个目录。当我通过命令（ ）将文件添加到`org-agenda-files`变量时，目录路径将替换为当前位于该目录中的文件的路径。这很糟糕，因为当我稍后添加一些文件时，它们不会对我的议程做出贡献。`C-c [``org-agenda-file-to-front``tasks/`

有什么方法可以避免这种情况，还是我坚持手动添加文件和目录`org-agenda-files`？

这个问题在[组织模式中得到承认 - 用纯文本组织你的生活！](http://doc.norang.ca/org-mode.html#AgendaSetup)

Emacs 版本：24.0.50.1 组织模式版本：7.8.09

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-05T23:54:18.997

You could define a command that just adds a file to org-agenda-files without calling org-agenda-files-to-front, and then rebing that to C-c [. For example:

```
(defun my-org-agenda-file-to-front ()
  (interactive)
  (setq org-agenda-files (append org-agenda-files (list (buffer-file-name (current-buffer))))))

(define-key org-mode-map (kbd "C-c [") `my-org-agenda-file-to-front) 
```

# python - python 2.7上的pydasm安装错误

> ID：10569749
> 
> 赞同：0
> 
> 时间：2012-05-13T06:22:19.867
> 
> 标签：python, mingw

我正在尝试安装pydasm，但遇到错误，不知道如何继续。python的版本是2.7，操作系统是WinXP。

```
python setup.py build_ext --compiler=mingw32
running build_ext
building 'pydasm' extension
creating build
creating build\temp.win32-2.7
creating build\temp.win32-2.7\Release
C:\MinGW\bin\gcc.exe -mno-cygwin -mdll -O -Wall -IC:\Python27\include -IC:\Pytho
n27\include -IC:\Python27\PC -c ../libdasm.c -o build\temp.win32-2.7\Release\..\
libdasm.o
cc1.exe: error: unrecognized command line option '-mno-cygwin'
error: command 'gcc' failed with exit status 1 
```

似乎最新的 MinGW 不再支持 -mno-cygwin，但 python 2.7 disutils 模块仍在使用它。如何解决？

# java - 通过命令提示符编译 .java

> ID：10569754
> 
> 赞同：2
> 
> 时间：2012-05-13T06:23:08.687
> 
> 标签：java, compiler-errors, javac

我是编程新手，我现在正在学习 Java。我尝试使用*javac*命令，但环境说*javac*是未知命令。

如何使用“javac”从命令提示符编译 .java 文件？我正在使用 eclipse 1.2.2.20100216-1730、JRE 1.6 和 JRE6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T06:26:23.673

JRE 有用于运行已编译程序的“java”程序。“javac”程序仅在 JDK 中。下载并安装 JDK。如果顺便说一句，它仍然给你同样的错误，那么你需要将 javac 目录添加到你的 PATH 环境变量中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T06:28:37.853

在 Java 虚拟机 (VM) 可以运行 Java 程序之前，必须使用 javac 编译器将程序的 Java 源代码编译成字节码。Java字节码是机器码的平台独立版本；目标机器是 Java VM 而不是底层架构。要编译 Java 源代码文件 add.java，您需要执行以下操作：

```
 javac  add.java 
```

如果源文件中没有错误，Java 编译器将生成一个或多个 .class 文件（add.java 源文件中定义的每个类对应一个 .class 文件）。例如，成功编译 Foo.java 的结果将在名为 Foo.class 的文件中生成该类的字节码版本。

您编写的每个公共类都必须位于单独的 .java 文件中，其中文件名的第一部分与类名相同。.java 文件还可以包含受保护类和私有类的代码。

一旦成功编译了 Java 源代码，就可以调用 Java VM 来运行应用程序的字节码：

```
 java <class with main method to run> [<command line args>, ...] 
```

例如，要从 Foo 类运行 main 方法：

```
 java Foo 
```

任何命令行参数（add 的 main 方法的参数）都跟在类名之后：

```
 java add 10 20 
```

由于两个原因，可能会发生此类错误：

1.  您尚未在系统上安装 java jdk。
2.  你还没有设置环境变量.classpath ,path。

设置路径和类路径：

*   视窗

    *   选择开始，选择控制面板。双击系统，然后选择高级选项卡。
    *   单击环境变量。在系统变量部分中，找到 PATH 环境变量并选择它。
    *   单击编辑。如果 PATH 环境变量不存在，请单击新建。
    *   在编辑系统变量（或新系统变量）窗口中，指定 PATH 环境变量的值。单击确定。单击确定关闭所有剩余的窗口。
*   视窗：

    *   在桌面上，右键单击我的电脑图标。
    *   从上下文菜单中选择属性。
    *   单击高级选项卡（Vista 中的高级系统设置链接）。
    *   单击环境变量。在系统变量部分中，找到 PATH 环境变量并选择它。
    *   单击编辑。如果 PATH 环境变量不存在，请单击新建。
    *   在编辑系统变量（或新系统变量）窗口中，指定 PATH 环境变量的值。单击确定。单击确定关闭所有剩余的窗口。

如果您尚未设置类路径和路径，则可以访问 javac 并给出完整路径：

如`C:\Java\jdk1.7.0\bin\javac MyClass.java`

要检查路径和类路径，请在命令窗口中键入以下命令：

```
echo $PATH
echo $CLASSPATH 
```

如果您得到一个空白命令行来响应其中任何一个，则该特定变量没有值（尚未设置）。

通过cmd设置路径和类路径：

```
set path=c:\j2sdk1.4.1_01\bin(Give the path of bin)

set classpath=;(or the directory where you want your class files) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T06:39:48.267

下载并安装 JDK 设置环境路径 --> 在环境路径中编辑路径并使用 javac 命令添加 ;/bin --> javac *.java 或 javac ClassName.java

运行 main 方法时，您应该注意 [package] name java packagename.ClassName

# java - 在android中将图像上传到服务器

> ID：10569758
> 
> 赞同：0
> 
> 时间：2012-05-13T06:24:16.017
> 
> 标签：java, android

我遇到了一些问题，之前我已经解决了。非常感谢所有回答问题的人。

我正在尝试将图像从我的 android 应用程序上传到服务器（Servelet）。我还模拟了包含一个 jpeg 图像的 SD 卡。

我已经能够与服务器建立连接并收到一些消息。但到目前为止，我还无法在服务器上检索图像。我在服务器上收到错误消息。我正在使用多部分选项。代码如下。请看看，让我知道我做错了什么。

**安卓端**

```
 String path="http://10.0.2.2:8080/ImageLocalizer/Localize";
        String pathToFile="/sdcard/building.jpg";
        text1.setText(path);

        int bytesRead, bytesAvailable, bufferSize;
        byte[] buffer;
        int maxBufferSize = 1*1024*1024;
        try
        {
        FileInputStream fileInputStream = new FileInputStream(new File(pathToFile) );

        URL url = new URL(path);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();

        // Allow Inputs & Outputs
        connection.setDoInput(true);
        connection.setDoOutput(true);
        connection.setUseCaches(false);

        // Enable POST method
        connection.setRequestMethod("POST");

        connection.setRequestProperty("Connection", "Keep-Alive");
        connection.setRequestProperty("Content-Type",  "multipart/form-data");
        connection.setRequestProperty("FileName", "building.jpg");

        DataOutputStream outputStream =new DataOutputStream( connection.getOutputStream());
        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];

        // Read file
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);

        while (bytesRead > 0)
        {
            outputStream.write(buffer, 0, bufferSize);
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        }

        fileInputStream.close();
        outputStream.flush();
        outputStream.close();
        text1.setText(path);

        BufferedReader in =new BufferedReader(new InputStreamReader( connection.getInputStream() ) );

        String response="",msg="";
        while ( (response = in.readLine()) != null ) {
            msg+=response;
        }
        text2.setText(msg);
    }        
    catch (Exception ex)
     {}

    } 
```

**服务端**

```
 doPost()
    {
            System.out.println("RUNNING");
             InputStream in = request.getInputStream();
                BufferedReader r = new BufferedReader(new InputStreamReader(in));
                StringBuffer buf = new StringBuffer();
                String line;

                PrintWriter out = response.getWriter();
                out.println("Image copied !!");
                out.close();
                try  
                {  
                        PrintWriter out1=response.getWriter();  
                        FileItemFactory factory = new DiskFileItemFactory();  
                        ServletFileUpload upload = new ServletFileUpload(factory);  
                        String s[]=new String[30];  
                        byte i=0;  
                        boolean isMultipart = ServletFileUpload.isMultipartContent(request);  
                        if(isMultipart)  
                        {  
                            List items=upload.parseRequest(request);      
                            Iterator iterator=items.iterator();  
                            while(iterator.hasNext())  
                            {  
                                FileItem fitem=(FileItem)iterator.next();  
                                if(!fitem.isFormField())  
                                {  
                                    StringBuffer s2=new StringBuffer(fitem.getName());                    
                                    if(s2!=null && s2.length()>0)  
                                    {  
                                        File fl=new File("H:\\abcd.jpg");  
                                        fitem.write(fl);  
                                    }  
                                }  
                                if(fitem.isFormField())  
                                {  
                                    s[i]=fitem.getString();  
                                    i++;  
                                }  
                            }  

                        }  

                }catch(Exception e){e.printStackTrace();}  

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T08:12:31.440

我认为您的请求正文没有被格式化为多部分表单数据。正文应该包含几个不同的分隔部分，每个部分都包含该部分的文件名和编码。有关示例，请参见以下 URL：

[http://chxo.com/be2/20050724_93bf.html](http://chxo.com/be2/20050724_93bf.html)

如果您一次只发布一个文件，我会删除多部分表单数据标题，并将文件的内容作为请求正文发布。

# android - Android - 如何在构建时为开源项目动态设置包名称？

> ID：10569760
> 
> 赞同：14
> 
> 时间：2012-05-13T06:24:28.400
> 
> 标签：android, ant, open-source

我正在开发一个开源项目。因为任何人都可以下载源代码并自己构建它，所以我不想在*任何地方*硬编码包名称- 包括目录结构。

我`ant`用于建筑。显然我可以修改`build.xml`，但我相信这会被`android update`. 无论使用什么都将提交到 Git 存储库，它不应该太复杂。

目前，直接从 Git 存储库构建代码的过程相当简单。以下是该文件的摘录`README`：

```
$ cd ~/src/isokeys/IsoKeys
$ android list targets # I build against API level 10.
$ android update project --name IsoKeys --target 1 --path ./ # Only needed first time.
$ ant debug && adb -d install -r bin/IsoKeys-debug.apk 
```

对我来说，将包名放在 中是有意义的`local.properties`，因为这是`.gitignore`'d. 由于包名称不会出现在其他任何地方，因此如果不这样做，构建将失败。因此，至少需要多出 1 个步骤`README`，但我希望将其保持在最低限度。

编辑：当然，另一个要求是差异有意义 - 如果您手动重命名包名称，它们就没有意义。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-13T06:59:50.987

我做了类似的事情（但不是出于这个原因），需要在构建时更新清单。我实现这一点的方法是制作第二个 AndroidManifest 并将其放在名为 config 的目录下。所以在 config/AndroidManifest 你可以有这样的东西：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="@CONFIG.APP_PACKAGE_NAME@"
      android:versionCode="@CONFIG.APP_VERSION_CODE@"
      android:versionName="@CONFIG.APP_VERSION@">

<!-- EVERYTHING ELSE GOES HERE -->

</manifest> 
```

然后，您可以使用常规的基本框架 build.xml ant 脚本，只需进行一些修改（无需从 android 构建系统复制整个脚本，因为它们添加了一些钩子供您使用，而无需重新发明轮子）。默认情况下，构建脚本应该读取 local.properties，但如果不添加（或取消注释）这样的行：

```
<property file="local.properties" /> 
```

在您的构建脚本中，您应该看到一个名为“-pre-build”的任务，将其更改如下：

```
<target name="-pre-build">
     <copy file="config/AndroidManifest.xml" todir="." overwrite="true" encoding="utf-8">
       <filterset>
          <filter token="CONFIG.APP_PACKAGE_NAME" value="${app.packagename}" />
          <filter token="CONFIG.APP_VERSION" value="${app.version}" />
          <filter token="CONFIG.APP_VERSION_CODE" value="${app.versioncode}" />
       </filterset>
     </copy>           
</target> 
```

然后你的 local.properties 文件你会像这样放置包名、版本名/代码：

```
app.version=1.0
app.versioncode=1
app.packagename=com.mypackage.name 
```

现在，您只需要确保在清单中完全限定所有活动/服务/广播侦听器等。这意味着您始终指定源代码的完整包。如果您希望您自己的源代码的包是动态的，您可以替换每个类的每个前缀。但这似乎有点愚蠢。将您的代码打包到您自己的包名下很容易，它们只需在项目中包含源代码或 jar，就可以从任何项目中使用它。

-- 更新 -- 哦，你可以做的另一件事来通知用户他们必须定义一个包名是在你的构建 xml 中使用失败标记，如下所示：

```
<fail message="app.packagename is missing. This must be defined in your local.properties file" unless="app.packagename" /> 
```

将其放在读取 local.properties 文件的行之后

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-13T17:59:51.483

*感谢马特沃尔夫的帮助，到目前为止，我正在发布部分答案。*

我注意到默认准系统`build.xml`也会导入`custom_rules.xml`：

```
<import file="custom_rules.xml" optional="true" /> 
```

所以我创建了这个文件并开始修补。到目前为止，这是我想出的：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="custom_rules" default="debug">
    <target name="-pre-build">
        <fail message="Please define app.packagename in your local.properties file." unless="app.packagename" />
        <taskdef resource="net/sf/antcontrib/antcontrib.properties">
            <classpath>
                <pathelement location="/usr/share/java/ant-contrib.jar"/>
            </classpath>
        </taskdef>
        <!-- How do I check for propertyregex?
        <fail message="Depends on ant-contrib's propertyregex for app.packagename.path." unless="propertyregex" />
        -->
        <propertyregex property="app.packagename.path"
            input="${app.packagename}/"
            regexp="\."
            replace="/"
            global="true"
        />
        <copy todir="build/" overwrite="true" encoding="utf-8">
            <fileset dir="./">
                <include name="AndroidManifest.xml" />
                <include name="res/**" />
                <include name="lib/**" />
            </fileset>
            <filterset>
                <filter token="CONFIG.APP_PACKAGE_NAME" value="${app.packagename}" />
            </filterset>
        </copy>
        <copy todir="build/src/${app.packagename.path}" overwrite="true" encoding="utf-8">
            <fileset dir="./src/isokeys/">
                <include name="**" />
            </fileset>
            <filterset>
                <filter token="CONFIG.APP_PACKAGE_NAME" value="${app.packagename}" />
            </filterset>
        </copy>
    </target>
    <target name="-pre-clean" description="Removes output files created by -pre-build.">
        <delete file="build/AndroidManifest.xml" verbose="${verbose}" />
        <delete dir="build/res/" verbose="${verbose}" />
        <delete dir="build/lib/" verbose="${verbose}" />
        <delete dir="build/src/" verbose="${verbose}" />
    </target>
    <!-- NOW CHANGE DIRECTORY TO build/ BEFORE HANDING BACK OVER TO build.xml!!! -->
</project> 
```

这将所有内容都设置好`build/` *（这具有保持整洁的额外好处）*，现在的目的是让 sdk 工具`build.xml`从这个`build/`目录运行。但是，我找不到任何方法`cd`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-08T12:45:45.443

最简单的方法可能是尽可能晚地替换包名称。这样，您甚至不必触摸您的代码。有一篇不错的文章，名为[Renaming the Android Manifest package](http://www.piwai.info/renaming-android-manifest-package/) ( [http://www.piwai.info/renaming-android-manifest-package/](http://www.piwai.info/renaming-android-manifest-package/) )。概括：

*   可以`aapt --rename-manifest-package`用来修改包名

*   或者，如果您希望包名称替换成为 ant 构建过程的一部分，您可以覆盖`-package-resources`目标：

    *   `-package-resources`从 SDK 的 build.xml复制目标
    *   添加`manifestpackage`参数

# java - MIDLet 中的 nullPointerException

> ID：10569761
> 
> 赞同：2
> 
> 时间：2012-05-13T06:24:29.280
> 
> 标签：java, java-me, nullpointerexception, midp, midlet

我写了以下内容`Java Application`：

```
import java.util.Timer;
import java.util.TimerTask;
import javax.microedition.lcdui.Display;
import javax.microedition.lcdui.Form;
import javax.microedition.lcdui.StringItem;
import javax.microedition.midlet.MIDlet;

public class JavaApplication6 extends MIDlet
{
private static Form clockForm=null;
private static StringItem clockItem=new StringItem("hello", "World!");
private static ClockTask task=null;
private static Timer timer=null;

static class ClockTask extends TimerTask 
{
private int count=0;
        @Override
public void run()
{
count++;
clockItem.setText("hello "+count);
}
}
public static  void JavaApplication6() throws Exception
{
clockForm=new Form("Clock");
clockItem=new StringItem("","0");
clockForm.append(clockItem);
}

    @Override
public  void startApp()
{
task=new ClockTask();
timer=new Timer();
timer.schedule(task,1000,1000);
Display.getDisplay(this).setCurrent(clockForm);}

    @Override
public void pauseApp()
{}

public void destroyApp(boolean unconditional)
{}

    public static void main(String[] args) {

        JavaApplication6 test=new JavaApplication6();
        test.startApp();

    }
} 
```

但是当我运行它时，它`exception`在最后一行给了我以下内容`startApp()`；

```
Exception in thread "main" java.lang.NullPointerException
    at javax.microedition.lcdui.Display.<init>(Display.java:420)
    at javax.microedition.lcdui.Display.getDisplay(Display.java:447)
    at javaapplication6.JavaApplication6.startApp(JavaApplication6.java:42)
    at javaapplication6.JavaApplication6.main(JavaApplication6.java:56) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T06:35:31.247

`JavaApplication6`您创建了名为的静态方法，因为它是构造函数。但事实并非如此。所以当你说它时它不会被调用`JavaApplication6 test=new JavaApplication6();`。因此`clockForm`保持未初始化，即`null`。所以，线

`Display.getDisplay(this).setCurrent(clockForm);`

抛出 NPE ，因为在这一点上`clockForm`。`null`

`static void`解决方案是从 line中删除`public static void JavaApplication6() throws Exception`。它应该看起来像

`public JavaApplication6() throws Exception`

在这种情况下，它成为构造函数，一切都会正常工作。

祝你好运。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-14T09:42:48.960

你似乎以一种根本错误的方式处理事情。

我的意思是，即使您设法找出并破解所有空指针异常，您也不会得到有效的 MIDlet 应用程序代码。

问题是，因为**JavaApplication6 类扩展了 MIDlet**，所以以下行将在任何正常运行的 MIDP 实现中抛出运行时异常（阅读：在任何正常工作的设备上）：

```
JavaApplication6 test=new JavaApplication6(); // SecurityException in runtime 
```

[这是 MIDP ( JSR 118](http://www.jcp.org/en/jsr/detail?id=118 "MIDP 规范的官方页面") ) API指定事物的方式。上一行表示应用程序试图绕过 AMS 调用 MIDlet 构造函数，这将在运行时导致 SecurityException。

[这在MIDlet 构造函数 javadocs](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/midlet/MIDlet.html#MIDlet%28%29 "API 文档")中有明确解释，请注意以下内容`Throws`：

```
protected MIDlet()

    Protected constructor for subclasses. The application management software
    is responsible for creating MIDlets and creation of MIDlets is restricted.
    MIDlets should not attempt to create other MIDlets.

Throws:
    SecurityException - unless the application management software is creating
    the MIDlet. 
```

# arduino - NFC MIFARE Ultralight C 认证失败

> ID：10569763
> 
> 赞同：0
> 
> 时间：2012-05-13T06:25:04.543
> 
> 标签：arduino, nfc, mifare

我最近为我的 arduino Uno 板购买了 NFC shield v1.0。我尝试了种子工作室 wiki [http://www.seeedstudio.com/wiki/index.php?title=NFC_Shield](http://www.seeedstudio.com/wiki/index.php?title=NFC_Shield)提供的一些入门代码。在多次尝试读取或写入一组 Mifare Ultralight C 后，我开始逐行尝试以查看问题所在。我将其范围缩小到或多或少这条线：

```
nfc.authenticateBlock( 1 /*1 or 2*/,
                 id /*Card NUID*/,
                 10/*0 to 63*/,
                 KEY_A /*Either KEY_A or KEY_B */,
                 keys)) 
```

卡的 id 是正确的，所以我假设另一个论点一定是把事情搞砸了。我正在使用 keys[]= {0xff, 0xff, 0xff, 0xff, 0xff, 0xff} 作为密钥。还有什么可能是问题吗？我在下面包含了我的整个代码。如果您需要更多详细信息，请告诉我。

谢谢！

```
#include "PN532.h"

#define SCK 13
#define MOSI 11
#define SS 10
#define MISO 12

PN532 nfc(SCK, MISO, MOSI, SS);

void setup(void) {
    Serial.begin(9600);
    Serial.println("Hello!");

    nfc.begin();

    uint32_t versiondata = nfc.getFirmwareVersion();
    if (! versiondata) {
        Serial.print("Didn't find PN53x board");
        while (1); // halt
    }
    // Got ok data, print it out!
    Serial.print("Found chip PN5"); Serial.println((versiondata>>24) & 0xFF, HEX);
    Serial.print("Firmware ver. "); Serial.print((versiondata>>16) & 0xFF, DEC);
    Serial.print('.'); Serial.println((versiondata>>8) & 0xFF, DEC);
    Serial.print("Supports "); Serial.println(versiondata & 0xFF, HEX);

    // configure board to read RFID tags and cards
    nfc.SAMConfig();
}

void loop(void) {
    uint32_t id;
    // look for MiFare type cards
    id = nfc.readPassiveTargetID(PN532_MIFARE_ISO14443A);

    if (id != 0)
    {
        Serial.print("Read card #");
        Serial.println(id);
        Serial.println();
        uint8_t keys[]= {0xFF,0xFF,0xFF,0xFF,0xFF,0xFF};  // default key of a fresh card

        if(nfc.authenticateBlock( 1 /*1 or 2*/,
                 id /*Card NUID*/,
                 0x08 /*0 to 63*/,
                 KEY_A /*Either KEY_A or KEY_B */,
                 keys)) 
        {
            Serial.println("authenticated!");
        }
        else {
            Serial.println("failed to authenticate");
        }
    }
    delay(2000);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:44:11.927

您正在使用 MIFARE Classic 身份验证功能对 MIFARE Ultralight C 芯片进行身份验证。由于两种芯片使用完全不同的身份验证方法，因此这是行不通的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T04:58:26.967

您无需对超轻 NFC 标签的写入/读取进行身份验证。我遇到了同样的问题。

来自种子工作室或任何其他地方的库的问题在于它们仅支持读取超轻标签。

我试图“强制”写入标签，但没有成功，因为库中不存在该函数。您写入 Classic Mifare 上的扇区/块，但您需要写入超轻标签中​​的页面。您需要在 NFC.H/NFC.PP 中创建该函数，以便您可以写入超轻页面。

检查 NFC Ultralight 标签的结构，每页中的小块 [http://www.sonmicro.com/en/downloads/Mifare/um_sm130_a2.pdf](http://www.sonmicro.com/en/downloads/Mifare/um_sm130_a2.pdf)

# ios - 从另一个控制器访问在应用程序委托中创建的视图控制器

> ID：10569764
> 
> 赞同：-4
> 
> 时间：2012-05-13T06:25:33.423
> 
> 标签：ios, uiviewcontroller

我正在从我的应用程序委托加载我的 GPS 控制器，它正在查找用户的当前位置，但我的问题是从另一个视图控制器访问 GPS 视图。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T06:48:12.813

您将不得不查看`corelocation`API [Core Location Tuorial](http://mobileorchard.com/hello-there-a-corelocation-tutorial/)

1）位置更新是异步接收的，因此您需要根据时间戳立即响应它们

2）始终检查时间戳并将其与当前时间戳进行比较，以便检查它是否是最新的。

3）一旦您收到更新，请停止服务，因为 wifi GPS 等会快速耗尽电池电量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T06:51:45.813

我不清楚你想要实现什么。无论如何，您可以`CLLocationManager`从`CoreLocation`框架中使用来获取 GPS 位置

在你的声明中`appdelegate.h`

```
CLLocationManager *locationManager; 
```

在 appdelegate.m 中使用这个

```
locationManager = [[CLLocationManager alloc] init];
  locationManager.delegate = self;
  locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
  locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
  [locationManager startUpdatingLocation]; 
```

您还需要实现以下委托方法

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation 
```

有关更详细的说明，请参见[此处](http://www.switchonthecode.com/tutorials/getting-your-location-in-an-iphone-application)的教程

# sql - 从 SQL SERVER 中的 3 个值中获取较低的值

> ID：10569766
> 
> 赞同：4
> 
> 时间：2012-05-13T06:26:12.173
> 
> 标签：sql, sql-server, tsql

如何在 Sql Server 中获得 3 个值中的最低值？

MySQL 中的相同函数称为 LEAST，而 SQL Server 中的比较？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T13:53:53.180

您可以在没有嵌套案例的情况下执行此操作：

```
select (case when val1 < val2 and val1 < val3 then val1
             when val2 < val3 then val2
             else val3
        end) as least_of_three 
```

这似乎很清楚它在做什么。它也很容易概括。

一定要小心 NULL —— LEAST 和 GREATEST 会忽略它。如果你需要处理这些，那就有点麻烦了：

```
select (case when val1 <= coalesce(val2, val1) and val1 <= coalesce(val3, val1) then val1
             when val2 <= coalesce(val3, val2) then val2
             else val3
        end) as least_of_three 
```

请注意，我已将“<”更改为“<=”。我使用合并通过评估为真来“忽略”该值。因此，如果 val2 为空，则 val1 始终小于 val2。我选择了这种方法，因为它适用于所有数据类型（字符串、数字、日期）。

编辑：

我通常不会回去写七岁的问题的答案，但这个问题显然是SQL Server。最好的方法使用`apply`：

```
select t.*, max_val
from t cross apply
     (select max(v.val) as max_val
      from (values (t.val1), (t.val2), . . .
     ) v(val); 
```

请注意，此解决方案在 MySQL 中不起作用，因为它不支持横向连接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T07:21:25.127

显而易见的嵌套 case 语句是：

```
select case when val1 < val2 then
               case when val1 < val3 then val1
               else val3
               end
        when val2 < val3 then val2
               else val3
    end
from cols; 
```

上

```
create table cols (val1 int, val2 int, val3 int); 
```

它不会很容易地扩展到更高的比较 #，并且它不包括合并语句来抑制空值。

唯一的优势是其他程序员在查看您的代码时将能够快速弄清楚。（除非这是性能瓶颈，否则我认为这是一个很好的考虑！）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T11:29:54.310

SQL Server 中没有类似于 mysql 中的 Least() 函数的函数

MySQL 的 Least() 函数执行以下操作

> 取两个或多个参数，返回最小（最小值）参数。使用以下规则比较参数：
> 
> 如果任何参数为 NULL，则结果为 NULL。不需要比较。
> 
> 如果在 INTEGER 上下文中使用返回值或所有参数都是整数值，则将它们作为整数进行比较。
> 
> 如果在 REAL 上下文中使用返回值或所有参数都是实值，则将它们作为实数进行比较。
> 
> 如果参数包含数字和字符串的混合，则将它们作为数字进行比较。
> 
> 如果任何参数是非二进制（字符）字符串，则将参数作为非二进制字符串进行比较。
> 
> 在所有其他情况下，参数作为二进制字符串进行比较。

sql server 的 Min() 函数返回不带参数的表中列的最小值

这是一个模拟，但仍然不像 Least 因为它只能接受整数

```
CREATE FUNCTION [dbo].[GetSmallest]
(
    -- Add the parameters for the function here
    @val1 int,  @val2 int,  @val3 int
)
RETURNS int
AS
BEGIN
Declare @result int
set @result = case when @val1 < @val2 then
               case when @val1 < @val3 then 
                @val1
               else
                @val3
               end
        when @val2 < @val3 then 
                @val2
        else
                 @val3
    end
  return @result  
END 
```

这是你的称呼

```
SELECT [dbo].[GetSmallest] (   32  ,31  ,6) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-13T07:08:47.210

如果你想避免嵌套 CASE 语句，这会做（虽然有点尴尬）：

```
CREATE TABLE #t(ID INT, V1 INT, V2 INT, V3 INT)
INSERT INTO #t VALUES
    (1, 10, 20, 30)
    , (2, 60, 50, 40)

SELECT * FROM #t t1
CROSS APPLY (SELECT MAX(V), MIN(V) FROM (
SELECT V1 AS V
UNION SELECT V2
UNION SELECT V3 
) T) AS t2(VMAX, VMIN)

DROP TABLE #t 
```

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-05-13T06:30:12.250

您可以在 T-SQL 中使用“Min”函数：

```
SELECT MIN(Value) FROM MyTable 
```

# python - 如何进行重定向并保留查询字符串？

> ID：10569768
> 
> 赞同：19
> 
> 时间：2012-05-13T06:26:14.220
> 
> 标签：python, google-app-engine, python-2.7, wsgi, webapp2

我想进行重定向并保留查询字符串。像`self.redirect`加上发送的查询参数之类的东西。那可能吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-14T19:57:44.063

```
newurl = '/my/new/route?' + urllib.urlencode(self.request.params)
self.redirect(newurl) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-15T04:03:26.623

您可以使用 ; 将查询字符串获取到当前请求`self.request.query_string`。因此您可以使用 . 重定向到新的 URL `self.redirect('/new/url?' + self.request.query_string)`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-10-08T21:38:04.883

使用`RedirectView`.

```
from django.views.generic.base import RedirectView
path('go-to-django/', RedirectView.as_view(url='https://djangoproject.com', query_string=True), name='go-to-django') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-01T20:09:02.540

这在 Django 2.2 中对我有用。查询字符串可用作`request.GET`HTTP GET 和`request.POST`HTTP POST 的 QueryDict 实例。将这些转换为普通字典，然后使用`urlencode`.

```
from django.utils.http import urlencode

query_string = urlencode(request.GET.dict())  # or request.GET.urlencode()

new_url = '/my/new/route' + '?' + query_string 
```

请参阅[https://docs.djangoproject.com/en/2.2/ref/request-response/](https://docs.djangoproject.com/en/2.2/ref/request-response/)。

# email - IMAP 客户端能否自动过滤 IMAP 服务器接收的消息？

> ID：10569769
> 
> 赞同：1
> 
> 时间：2012-05-13T06:26:21.087
> 
> 标签：email, language-agnostic, imap

假设我创建了一个 IMAP 客户端，并且我想创建一个过滤器，例如，删除具有某些特征的消息。

我可以将此设置为在打开客户端时执行的启动任务，但问题是用户可能会在不同的客户端中查看收件箱，并且在查看收件箱之前过滤器不会删除不需要的消息。

是否有某种方法可以告诉服务器每次收到消息时都调用我的服务，以便服务器收到不需要的消息而不是打开客户端后就可以消失？这甚至可以使用 IMAP 吗？如果没有，是否有不同的支持良好的电子邮件技术允许这种交互？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:17:41.483

*您可以使用Sieve 电子邮件过滤语言*和*ManageSieve 协议*进行服务器端电子邮件过滤。开源软件有很好的支持。但是，我只知道一些支持它的主要电子邮件提供商。如果支持，通常可以在 IMAP 主机上使用 IMAP 帐户凭据访问它，即您可以通过连接到 TCP 端口 2000 和 4190 来测试它。

有关详细信息，请参阅以下三个链接：

*   [http://en.wikipedia.org/wiki/Sieve_%28mail_filtering_language%29](http://en.wikipedia.org/wiki/Sieve_%28mail_filtering_language%29)
*   [https://www.rfc-editor.org/rfc/rfc5228（Sieve](https://www.rfc-editor.org/rfc/rfc5228)：一种电子邮件过滤语言）
*   [https://www.rfc-editor.org/rfc/rfc5804（ManageSieve](https://www.rfc-editor.org/rfc/rfc5804)协议）

Sieve 还支持一些通知类型。如果过滤语言不足以满足您的目的，您可以为所有传入的电子邮件发送通知，唤醒 IMAP 客户端，并让客户端进行过滤。

# javascript - 我的 javascript 表单验证在 Chrome 中完美运行，但在 Firefox 中却不行

> ID：10569773
> 
> 赞同：2
> 
> 时间：2012-05-13T06:26:50.970
> 
> 标签：javascript, firefox, google-chrome

的JavaScript：

```
 function validateForm()
{
    var x=document.forms["newsletter"]["agree"].value;
    if (newsletter.agree.checked != 1)
    {
        alert("Checkbox must be checked");
        return false;
    }

    var y=document.forms["newsletter"]["email"].value;
    var atpos=y.indexOf("@");
    var dotpos=y.lastIndexOf(".");
    if (atpos<1 || dotpos<atpos+2 || dotpos+2>=y.length)
    {
      alert("Not a valid e-mail address");
      return false;   
    }

    else 
    {   
        return true;
    }
} 
```

还有我的 HTML

```
<div id="signup">
<form id="newsletter" action="" method="get" onsubmit="return validateForm()">
<fieldset>
<p>Email: <input type="text" name="email" size="35"/>
Please send me the monthly newsletter 
<input type="checkbox" checked="checked" name="agree" value=""/>
<br/>
<input type="submit" value="Signup"/></p>
</fieldset>
</form>
</div><!-- signup --> 
```

当我在 Chrome 中单击带有无效条目的提交时，会显示警报消息并且表单未提交。但是，当我在 Firefox 中执行相同操作时，表单提交时没有警告消息。

我已经为此工作了5个小时，我真的不知道。感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T06:37:35.617

我想它可能会对你有所帮助。

```
<div id="signup">
        <form id="newsletter" action="" method="get" onsubmit="return validateForm()">
        <fieldset>
        <p>Email: <input type="text" name="email" id="email" size="35"/>
        Please send me the monthly newsletter 
        <input type="checkbox" checked="checked" name="agree" id="agree" value=""/>
        <br/>
        <input type="submit" value="Signup"/></p>
        </fieldset>
        </form>
        </div><!-- signup -->

   function validateForm()
    {
        var agreeEl = document.getElementById("agree");
        if (agreeEl.checked != 1)
        {
            alert("Checkbox must be checked");
            return false;
        }

        var emailEl = document.getElementById("email");
        var atpos = emailEl.value.indexOf("@");
        var dotpos = emailEl.value.lastIndexOf(".");
        if (atpos < 1 || dotpos < atpos + 2 || dotpos + 2 >= y.length) {
          alert("Not a valid e-mail address");
        return false;   
        }

        return true;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:07:36.883

```
function validateForm()
{
var x=document.forms["myForm"]["email"].value;
var atpos=x.indexOf("@");
var dotpos=x.lastIndexOf(".");
if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length)
  {
  alert("Not a valid e-mail address");
  return false;
  }
}

<form name="myForm" action="demo_form.asp" onsubmit="return validateForm();" method="post">
    Email: <input type="text" name="email">
    <input type="submit" value="Submit">
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T06:43:17.560

首先，您使用“get”而不是“post”提交表单是否有某些原因？当我尝试使用“get”提交您的表单时，Chrome 向我抱怨。

[我在http://jsfiddle.net/jsWyw/](http://jsfiddle.net/jsWyw/)设置了一个简单的小提琴来测试您的表单。如果我使用 JQuery 来处理表单提交而不是您的“onSubmit”，那么一切正常。因此，我查看了 onSubmit 发生了什么，并遇到了这个线程：[http](http://productforums.google.com/forum/#!topic/chrome/Z3MD5Od3oQM) ://productforums.google.com/forum/#!topic/chrome/Z3MD5Od3oQM 。

要尝试的事情：

*   确保使用 post 而不是 get
*   使用“onSubmit”而不是“onsubmit”
*   确保使用包含您的脚本`<script type="text/javascript" src="javascript.js"></script>`

如果失败，我建议您`submit`自己在 Javascript 中处理事件，而不是使用`onSubmit`在 Chrome 中似乎有点不稳定的事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T04:07:58.733

你看过你的错误控制台吗？您的 validateForm 处理程序假设它`window.newsletter`是一个表单元素（而不是在第一个中使用 document.forms["newsletter"] `if()`），它不在标准模式下的 Firefox 中。所以该行抛出，如果一个 onsubmit 处理程序抛出该表单将继续并提交。但当然错误控制台报告处理程序抛出.....

# php - 尝试回显变量 $_SESSION，php jquery ajax 时未定义的索引，

> ID：10569782
> 
> 赞同：1
> 
> 时间：2012-05-13T06:28:38.257
> 
> 标签：php, javascript, jquery

**编辑**我不再收到错误未定义索引“时间”。现在我没有收到任何错误，但是当我尝试回显 $timezone; 什么都没发生。

我在这里缺少什么导致未定义的索引“时间”？我确实在页面中有 jquery。

**索引.php**

```
<?php
session_start();
$timezone=$_SESSION['time'];

?> 
```

脚本，使用 jquery 获取时间，然后将其设置为 $_SESSION['time'] 变量。

```
<script>
$(document).ready(function() {
    if("<?php echo $timezone; ?>".length==0){
        var visitortime = new Date();
        var visitortimezone = "GMT " + -visitortime.getTimezoneOffset()/60;
        $.ajax({
            type: "GET",
            url: "<?php echo $_SERVER['DOCUMENT_ROOT'].'/social_learning/php/timezone.php';?>",
            data: 'time='+ visitortimezone,
            success: function(){
                location.reload();
            }
        });
    }
});
</script> 
```

**时区.php**

```
 <?php 
  session_start();
  $_SESSION['time'] = $_GET['time'];
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T06:48:56.723

只需更改`$timezone=$_SESSION['time'];`为 `$timezone=isset($_SESSION['time'])?$_SESSION['time']:"";`

# .htaccess - 需要 modrewrite 的通配符子域

> ID：10569783
> 
> 赞同：0
> 
> 时间：2012-05-13T06:28:39.643
> 
> 标签：.htaccess, mod-rewrite, httpd.conf

我正在尝试向通配符子域添加“/登录”。

例如：

*.example.com 将被重定向到 *.example.com/login

但是，我希望某些子域不被重定向，例如...

**help.example.com、m.example.com 等**

执行此操作的最佳方法是什么，这将在 .htaccess 或 httpd.conf 中完成吗？

谢谢您的帮助。

更新如下：

这是我目前拥有的：

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    RewriteCond %{HTTP_HOST}  !^m.example.com$
    RewriteCond %{HTTP_HOST}  ^(.+).example.com$ [NC]
    RewriteRule ^/$ https://%1/login [L,R=301]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T16:56:59.573

你快到了

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    RewriteCond %{HTTP_HOST}  !^m\.example\.com$
    RewriteCond %{HTTP_HOST}  !^help\.example\.com$
    RewriteCond %{HTTP_HOST}  ^(.+\.example\.com)$ [NC]
    RewriteRule ^/?$ https://%1/login [L,R=301]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

# ruby - Ruby中数组的-1索引是什么意思？

> ID：10569786
> 
> 赞同：0
> 
> 时间：2012-05-13T06:28:56.023
> 
> 标签：ruby, arrays

这是否意味着最后引用的索引？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T06:30:36.213

负数组索引从末尾倒数。-1 是最后一个元素。

见：[http ://www.ruby-doc.org/core-1.9.3/Array.html#method-i-5B-5D](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-5B-5D)

# iphone - 财产分配

> ID：10569789
> 
> 赞同：1
> 
> 时间：2012-05-13T06:29:56.180
> 
> 标签：iphone, objective-c, ios, ipad

如果我有一个这样的属性，那么分配第一种模式和第二种模式的属性的值有什么区别？

```
@interface Prueba : NSObject{
    CustomeClass *_cclass;
}
@property(nonatomic, retain)CustomeClass *cclass;

@end

@implementation Prueba

@synthesize cclass = _cclass

- (void)config{
    // 1 This
    self.cclass = [[CustomeClass alloc] init];

    // 2 This or
    CustomeClass *cc = [[CustomeClass alloc] init];
    self.cclass = cc;
    [cc release];
}

@end 
```

：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T06:47:31.040

您的第一个示例为您提供了一个保留计数为 2（错误）的对象，而您的第二个示例为您提供了一个保留计数为 1（正确）的对象。第二种方法在非 ARC 项目中是首选。或者，您也可以自己设置 ivar（我不喜欢，因为您没有使用 setter）：

```
_cclass = [[CustomeClass alloc] init]; 
```

或者像你的例子一样使用setter，但是做一个自动释放（我不喜欢，因为你不应该推迟你的发布，除非你必须这样做）：

```
self.cclass = [[[CustomeClass alloc] init] autorelease]; 
```

在您的非 ARC 项目中，您最初的第二个示例是最好的（使用指针，使用属性的设置器，然后释放指针），因为对于 KVO，您希望养成使用设置器的习惯：

```
CustomeClass *cc = [[CustomeClass alloc] init];
self.cclass = cc;
[cc release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T06:35:46.807

结果没有区别，只是在第二种方法中您创建了一个附加指针。在这两个版本`self.cclass`中都可以很好地保存您的对象。

问题是，当您仅在第二种模式下释放对象时，在第一种模式下您将出现内存泄漏。由于`retainCount`分配对象时它是 +1，因此您通过 setter 分配一个 +1 对象。这意味着，你实际上又撞上了`retainCount`。现在，如果您在将对象分配给您的属性后不释放它，一旦它从那里释放，它`retainCount`只会减少 1。因此让一个带有`retainCount`+1 的对象在内存中浮动，永远丢失。

但是因为您已经在询问更好的版本，所以我想向您介绍惰性实例化。您可以做的是覆盖相关属性的 getter 方法并检查它是否已被分配。如果没有，则在 getter 方法中分配它，然后返回它。它看起来像这样：

```
- (CustomeClass*) cclass
{
  if(!_cclass)
  {
    _cclass = [[CustomeClass alloc] init];
  }
  return _cclass;
} 
```

使用此方法，您可以将 +1 保留对象分配给内部变量，从而绕过 setter 而不会增加`retainCount`. 它也是内存友好的，因为你的对象只有在你真正需要它的时候才会被实例化。现在，当您将属性设置为 nil 或某个新对象时，旧对象将被正确释放。

编辑：

针对 Robert Ryan 的评论，我想添加以下内容：

这不会破坏 KVO，或干扰为您的属性分配的资格。如果你的属性被标记为`assign`or `weak`，那么惰性实例化就没有意义了。如果它被标记为`retain`或者`strong`这种实例化对象的方式非常好，特别是当它是一个你可以在配置方法中分配的属性时。

关于 KVO：在 getter 内部分配的值可以看作是初始值/默认值，因此 KVO 仍然有效。当您使用 setter 为属性分配其他内容时，它将触发。您不希望 KVO 因为默认值而触发，对吗？

# java - 按日期排序需要做什么？

> ID：10569794
> 
> 赞同：1
> 
> 时间：2012-05-13T06:31:11.147
> 
> 标签：java

我需要按日期对状态报告进行排序。在我调用 addItem 方法之前，应该完成排序，否则我必须按报告日期与以前的报告进行比较。需要说明的是，可以使用getReportDate()[类型为JVDate]的方法来获取状态报告的报告日期。请您帮忙对状态报告进行排序：

```
 public void  doImport( TRDataReader in )
        throws IOException, TRException        
   {

       in.start( getClassTag() ); // get the class tag
       // import the set's flags from a datareader
       importFlags( in ); 
       beginLoad ();
       final String restag = new TRStatusReport().getClassTag ();
       while (in.nextToken (restag))  {
             addItem (new TRStatusReport (in));
       }
       endLoad ();
       in.end (getClassTag ());
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T06:36:20.563

只需指定适当的比较器，即可使用 Java 的内置排序算法。类似于以下内容：

```
public void  doImport(TRDataReader in) throws IOException, TRException {
    in.start(getClassTag()); // get the class tag
    importFlags(in); // import the set's flags from a datareader

    // Add the reports to a temporary list first.
    final String restag = new TRStatusReport().getClassTag();
    List<TRStatusReport> list = new ArrayList<TRStatusReport>();
    while (in.nextToken(restag)) {
        list.add(new TRStatusReport(in));
    }         

    // Now sort them.
    TRStatusReport[] array = list.toArray(new TRStatusReport[]{});
    Collections.sort(array, new Comparator<TRStatusReport>() {
        @Override
        public int compare(TRStatusReport o1, TRStatusReport o2) {
            return o1.getReportDate().compareTo(o2.getReportDate());
        }
    });

    // Add it to the internal list.
    beginLoad();
    for (int i = 0; i < array.length; i++) {
        addItem(array[i]);
    }
    endLoad();
    in.end( getClassTag() );
} 
```

如果日期不是 Java Date 对象，则必须找到一种方法来比较日期。我盲目地编写了这段代码（我不知道对象是什么）并且有一些假设。例如，beginLoad() 和 endLoad() 方法……它们是用于列表还是用于读取？...如果是这样，它们可能需要放置在加载对象并将其添加到临时列表的 while 子句周围。

# google-contacts-api - 动态 Google API 重定向网址

> ID：10569795
> 
> 赞同：7
> 
> 时间：2012-05-13T06:31:23.123
> 
> 标签：google-contacts-api

我正在为社交网络编写谷歌联系人导入代码，此导入发生在用户页面上，其 url 因用户而异，例如 profile/user1、profile/user2

但是，使用 google，我似乎只能设置一个重定向 url，并且似乎找不到任何提及 google 允许通配符匹配域而不是特定 url。

有没有办法做到这一点，还是我必须将其设置为一个 url？

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-15T13:31:58.693

我有实现它的 PHP 代码。说不能做是错误的。我将这种技术用于分析、Adwords、Google+ 和 YouTube。它适用于所有提到的服务。

诀窍是使用“状态”参数作为动态 URL。我希望它会帮助大家。

```
// Auth URL
// $campaign_id will be different for everyone
$dynamic_redirect = 'http://' . $_SERVER['HTTP_HOST'] . "/analytics/$campaign_id";
$client_id = 'XXXXXXXX';
$redirect_uri = 'API_REDIRECT_URI'; // Fixed URL, it will not be changed

$auth_url = "https://accounts.google.com/AccountChooser?service=lso&continue=";
$auth_url .= urlencode("https://accounts.google.com/o/oauth2/auth?response_type=code&scope=https://www.googleapis.com/auth/analytics.readonly&access_type=offline&redirect_uri=$redirect_uri&approval_prompt=force&state=$dynamic_redirect&client_id=$client_id");

/*************************************/
API_REDIRECT_URI PAGE
/*************************************/
$redirect_url = $_GET['state']; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-14T12:37:25.850

我发现这是不可能的，所以如果有人在寻找这个，那就没有办法了。我最终通过让谷歌重定向到固定网址而不是动态网址来解决我的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-14T07:43:38.637

你可以做一件简单的事情。创建 Auth URL 时将“用户页面 url”放入会话中。在您的回调页面上，从会话中获取“用户页面 url”并将用户简单地重定向到该页面。

我能够使用 PHP 成功实现上述目标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-19T16:48:43.610

这是可能的，因为我知道有一个应用程序可以做到这一点。我发现这篇关于如何做的帖子 - 还没有尝试过，但值得一试：http: [//www.ioncannon.net/programming/1443/google-oauth-for-installed-apps-php-example /](http://www.ioncannon.net/programming/1443/google-oauth-for-installed-apps-php-example/)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-07-16T10:00:27.543

我们可以在 Google API 设置中指定多个重定向 URI，每行一个

Google API 控制台 -> 选择您的 API -> API 访问权限 -> 编辑设置 -> 在授权重定向 URI 下

进入..

[http://one.example.com/contactimporter.php](http://one.example.com/contactimporter.php)

[http://two.example.com/contactimporter.php](http://two.example.com/contactimporter.php)

# java - windows xp无法安装maven

> ID：10569799
> 
> 赞同：0
> 
> 时间：2012-05-13T06:33:33.933
> 
> 标签：java, maven, environment-variables, maven-3

我已经按照以下步骤中的描述安装了 Maven3.04：

[http://maven.apache.org/download.html](http://maven.apache.org/download.html)

我正在运行一台 XP 机器。我创建了用户变量并将 bin 路径添加到路径变量中。但是，当我尝试运行 mvn --version 命令以验证它是否安装正确时，我收到以下错误：

```
'mvn' is not recognized as an internal or external command 
```

但是，如果我按如下方式使用命令，我会得到预期的结果：

```
C:\maven\apache-maven-3.0.4\bin>mvn --version

Apache Maven 3.0.4 (r1232337; 2012-01-17 14:14:56+0530)
Maven home: C:\maven\apache-maven-3.0.4
Java version: 1.6.0_11, vendor: Sun Microsystems Inc.
Java home: C:\Program Files\Java\jdk1.6.0_11\jre
Default locale: en_US, platform encoding: Cp1252
OS name: "windows xp", version: "5.1", arch: "x86", family: "windows" 
```

我错过了什么..？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T06:39:32.727

显然，您的 PATH 变量未设置。尝试将其设置为：

```
 PATH=%PATH%;C:\maven\apache-maven-3.0.4\bin 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T06:41:34.833

在 Windows 和 Linux 中，您只能运行 PATH 中的程序（除非您也提供目录）在 Windows 上，当前目录隐含在您的路径中，而在 linux 上则不是。

将 maven bin 目录添加到路径并重新启动需要添加到您的任何窗口后，您将能够运行`mvn`

# perl - 首选的跨平台 IPC Perl 模块是什么？

> ID：10569805
> 
> 赞同：16
> 
> 时间：2012-05-13T06:34:36.773
> 
> 标签：perl, ipc, pipe, filehandle

我想创建一个简单的 IO 对象，它代表一个向另一个程序打开的管道，我可以在我的应用程序运行时定期写入另一个程序的 STDIN。我希望它是防弹的（因为它可以捕获所有错误）和跨平台。我能找到的最佳选择是：

### `open`

```
sub io_read {
    local $SIG{__WARN__} = sub { }; # Silence warning.
    open my $pipe, '|-', @_ or die "Cannot exec $_[0]: $!\n";
    return $pipe;
} 
```

好处：

*   跨平台
*   简单的

缺点

*   否`$SIG{PIPE}`从管道程序中捕获错误
*   是否发现了其他错误？

### IO::管道

```
sub io_read {
    IO::Pipe->reader(@_);
} 
```

好处：

*   简单的
*   为 OO 接口返回一个 IO::Handle 对象
*   由 Perl 核心支持。

缺点

*   仍然没有`$SIG{PIPE}`从管道程序中捕获错误
*   Win32 不支持（或者，至少跳过了[它的测试）](https://metacpan.org/source/GBARR/IO-1.25/t/io_pipe.t)

### IPC::运行

IPC::Run 中没有用于写入文件句柄的接口，仅附加到标量。这似乎……很奇怪。

### IPC::Run3

这里也没有文件句柄接口。我可以使用代码引用，它会被重复调用以假脱机给孩子，但查看源代码，它似乎实际上写入了一个临时文件，然后打开它并将*其*内容假脱机到管道命令的`STDIN`. 世界卫生大会？

### IPC::Cmd

仍然没有文件句柄接口。

* * *

我在这里想念什么？似乎这应该是一个已解决的问题，但我有点震惊，事实并非如此。IO::Pipe 最接近我想要的，但缺乏`$SIG{PIPE}`错误处理和缺乏对 Windows 的支持令人苦恼。JDWIM 的管道模块在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T05:07:02.540

感谢@ikegami 的指导，我发现在Perl 中以交互方式读取和写入另一个进程的最佳选择是IPC::Run。但是，它要求您正在读取和写入的程序在完成写入其 STDOUT 时具有已知输出，例如提示。这是一个执行`bash`，让它运行`ls -l`，然后打印输出的示例：

```
use v5.14;
use IPC::Run qw(start timeout new_appender new_chunker);

my @command = qw(bash);

# Connect to the other program.
my ($in, @out);
my $ipc = start \@command,
    '<' => new_appender("echo __END__\n"), \$in,
    '>' => new_chunker, sub { push @out, @_ },
    timeout(10) or die "Error: $?\n";

# Send it a command and wait until it has received it.
$in .= "ls -l\n";
$ipc->pump while length $in;

# Wait until our end-of-output string appears.
$ipc->pump until @out && @out[-1] =~ /__END__\n/m;

pop @out;
say @out; 
```

因为它作为 IPC 运行（我假设），`bash`所以在完成写入其 STDOUT 时不会发出提示。所以我使用这个`new_appender()`函数让它发出一些我可以匹配的东西来找到输出的结尾（通过调用`echo __END__`）。在调用后我还使用了一个匿名子例程`new_chunker`来将输出收集到一个数组中，而不是一个标量（`'>'`如果你想要的话，只需传递一个对标量的引用）。

所以这行得通，但在我看来，这很糟糕，原因有很多：

*   没有一般有用的方法可以知道 IPC 控制的程序是否已完成打印到其 STDOUT。相反，您必须在其输出上使用正则表达式来搜索通常意味着它已完成的字符串。
*   如果它没有发出一个，你必须欺骗它发出一个（就像我在这里所做的那样——上帝保佑我是否应该有一个名为 的文件`__END__`）。如果我正在控制一个数据库客户端，我可能需要发送类似`SELECT 'IM OUTTA HERE';`. 不同的应用程序需要不同的`new_appender`hack。
*   对魔法`$in`和`$out`标量的写作感觉很奇怪，而且动作很遥远。我不喜欢它。
*   如果标量是文件句柄，则无法对标量进行面向行的处理。因此，它们的效率较低。
*   使用`new_chunker`获取面向行的输出的能力很好，虽然还是有点奇怪。不过，假设它被 IPC::Run 有效缓冲，那么从程序中读取输出的效率会有所提高。

我现在意识到，虽然 IPC::Run 的界面可能会更好一些，但总体而言，IPC 模型的弱点尤其使它难以处理。没有普遍有用的 IPC 接口，因为必须对正在运行的特定程序的细节了解太多才能使其工作。没关系，*也许*，如果你确切地知道它将如何对输入做出反应，并且能够可靠地识别它何时完成发射输出，并且不需要过多担心跨平台兼容性。但这远远不足以满足我对在 CPAN 模块中与各种数据库命令行客户端交互的普遍有用方法的需求，该模块可以分发到整个操作系统主机。

最后，感谢博文评论中[的](http://www.justatheory.com/computers/databases/dbi-in-sqitch.html)打包建议，我决定放弃使用 IPC 来控制这些客户端，而改用[DBI](http://metacpan.org/module/DBI)。它提供了优秀的API，健壮、稳定、成熟，没有IPC的缺点。

我对那些追随我的人的建议是：

*   If you just need to execute another program and wait for it to finish, or collect its output when it is done running, use [IPC::System::Simple](https://metacpan.org/module/IPC%3a%3aSystem%3a%3aSimple). Otherwise, if what you need to do is to interactively interface with something else, use an API whenever possible. And if it's not possible, then use something like [IPC::Run](https://metacpan.org/module/IPC%3a%3aRun) and try to make the best of it—and be prepared to give up quite a bit of your time to get it "just right."

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T07:01:31.423

我做过类似的事情。尽管这取决于父程序以及您要通过管道传输的内容。我的解决方案是生成一个子进程（让 $SIG{PIPE} 运行）并将其写入日志，或者以您认为合适的方式处理错误。我使用 POSIX 来处理我的子进程，并且能够利用父进程的所有功能。但是，如果您试图让孩子与父母交流 - 那么事情就会变得困难。你有一个主程序的例子和你想要管道的东西吗？

# ajax - ASP.NET MVC 用户控件和撇号被编码

> ID：10569807
> 
> 赞同：2
> 
> 时间：2012-05-13T06:34:47.433
> 
> 标签：ajax, asp.net-mvc-3, character-encoding, knockout.js, partial-views

为什么这个用户控件会编码撇号？它导致 Jquery 模板出现问题。撇号被编码为`&#39;`来自 AJAX 请求。

```
 <script type="text/html" id="editTimeTemplate">
        @Html.TextBoxFor(q => q.Time, new { type = "text", maxlength = 8, data_bind = "value: editTime.time.time, time: { options : { defaultTime: '8:00', showPeriod: true, showLeadingZero: false} }" })
    </script>
    <script type="text/html" id="editTimeTemplate">
    <input data-bind="value: editTime.time.time, time: { options : { defaultTime: &#39;8:00&#39;, showPeriod: true, showLeadingZero: false} }" id="Time" maxlength="8" name="Time" type="text" value="" />
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T08:14:25.687

TextBoxFor 在内部使用 TagBuilder，它将对所有属性值进行此编码。简单的解决方法是不使用辅助方法，而是使用 HTML 标记（我使用的是 MVC4，因此您必须自己实现 IdFor 和 NameFor 方法）。

```
 <input type="text" id="@Html.IdFor(m => m.Time)" name="@Html.NameFor(m => m.Time)" maxlength="8" data-bind="value: editTime.time.time, time: { options : { defaultTime: '8:00', showPeriod: true, showLeadingZero: false} }" /> 
```

或者当然只是：

```
 <input type="text" id="Time" name="Time" maxlength="8" data-bind="value: editTime.time.time, time: { options : { defaultTime: '8:00', showPeriod: true, showLeadingZero: false} }" /> 
```

如果这很困扰你（或者你经常这样做），我会去实现我自己的 TexBoxFor 扩展方法并覆盖你不喜欢的任何行为。

# opengl - 清除openGL中的鼠标点击缓冲区

> ID：10569811
> 
> 赞同：0
> 
> 时间：2012-05-13T06:35:42.043
> 
> 标签：opengl, glut

我需要清除动画结束之前发生的任何鼠标点击。只有之后的鼠标点击才需要考虑。我尝试在动画后启用鼠标功能，但考虑了动画期间发生的任何点击。据我了解，有一个存储鼠标点击的缓冲区，并且在任何鼠标回调期间，它都会获取存储在该缓冲区中的第一次单击的坐标和任何其他信息。所以我需要知道如何清除它。我使用了 fflush(stdin) 但它没有清除键盘或鼠标缓冲区。我在 c 语言中使用 windowsxp 和 Visualsudio2008 中的编程。我也使用 glut.h

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T07:17:00.357

> 我也使用 glut.h

那你不能。如果您正在制作动画，则由*您*来处理（或选择不处理）任何消息。

您不应该通过*在*显示方法中循环来制作动画。相反，您应该设置一个计时器回调或将调用的东西`glutPostRedisplay`将不断调用您的绘图方法。在此期间，如果您不想处理任何消息，则应忽略它们。

# sql-server-2008 - SSMS“删除数据库”上的“关闭现有连接”有什么作用？

> ID：10569820
> 
> 赞同：2
> 
> 时间：2012-05-13T06:37:51.747
> 
> 标签：sql-server-2008

在保持“现有连接”打开的同时删除数据库有什么意义？即，如果那里没有数据库，这些连接的目的是什么？自动删除数据库时不应该关闭连接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:12:57.320

选择该选项将强制在尝试删除数据库之前终止所有打开的连接；如果有打开的连接并且您没有选择此选项，则删除将失败。

这有点像一个安全网，我通常手动终止连接，并且不选中它，如果我在删除时遇到错误，我知道某人或某事最近重新连接，或者我正在删除错误的数据库......

# javascript - Rails，AJAX：根据先前单击的链接呈现新的 link_to

> ID：10569827
> 
> 赞同：0
> 
> 时间：2012-05-13T06:39:40.637
> 
> 标签：javascript, ruby-on-rails, ajax, ruby-on-rails-3, jquery

所以我只是想做一些简单的事情，但我似乎无法在我的书中找到任何类型的解决方案或轻松地在谷歌上搜索它。

```
<div id="subscribe">
<% if session[:read_random]
    unless is_subscribed?(session[:read_random].last)%>
            <%= link_to 'Subscribe', subscriptions_path(feed_id: session[:read_random].last), method: :post, remote: :true %>

    <% else %>
        <%= link_to 'Unsubscribe', subscriptions_path(feed_id: session[:read_random].last), method: :delete, remote: :true %>

<%  end
   end %>
</div> 
```

我的 create.js.erb 是：

```
if is_subscribed?(session[:read].last)
    $('#subscribe').html("Unsubscribe");
else
    $('#subscribe').html("Subscribe");
end 
```

所以我知道这段代码显然是错误的，请告诉我我在这里做错了什么，如果他没有订阅，我想给用户订阅的选项，反之亦然。

我是否需要将 link_to 放在 jQuery 语句的 html 部分中？唯一的问题是，虽然我会尝试这个看看它是否有效，但我什至没有从 ajax 调用中获得任何更新的文本。服务器说它已经渲染了订阅/create.js.erb 并且数据库正在适当地更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:08:44.170

感觉是控制器有问题。也许我们可以看到控制器......如果你使用 webkit 工具的 Firebug，你会收到任何错误吗？

您的 javascript 是错误的，因为它混合了 ruby​​ 和 javascript：

```
<% if is_subscribed?(session[:read].last) %>
    $('#subscribe').html("Unsubscribe");
<% else %>
    $('#subscribe').html("Subscribe");
<% end %> 
```

您的 is_subscribed 方法将更好地放置在模型中，并且它会更好地查询模型属性而不是使用会话。然而，这只是一个建议。我想is_subscribed？在助手中定义？

抱歉，我现在无法提供更多帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T03:44:05.370

解决方案：在views/subscriptions/create.js.erb 和destroy.js.erb

```
$('#subscribe').html("<%=j link_to 'Unsubscribe', subscriptions_path(feed_id: session[:read_random].last), method: :delete, remote: :true %>"); 
```

改变为破坏，你有它！

# php - PHP 和 SQL：这个查询中的“am”和“w”是什么意思？

> ID：10569832
> 
> 赞同：2
> 
> 时间：2012-05-13T06:41:52.850
> 
> 标签：php, sql

我在这里有一个关于这个 PHP 函数的快速问题。`am`SELECT 查询之后是什么？`w`还有这个查询是什么意思？

```
function download_redirect_torrent($winner_id)
{
    global $db, $setts;
    $output = array('url' => null, 'redirect' => false, 'display' => null);
    $winner_id = intval($winner_id);
    $media_details = $db->get_sql_row(
        "SELECT 
            am.*, w.is_dd, w.dd_active, w.dd_active_date 
        FROM  
            " . DB_PREFIX . "auction_media am, " . DB_PREFIX . "winners w 
        WHERE 
            am.auction_id=w.auction_id AND w.winner_id=" . $winner_id . " AND am.media_type=4"
    );
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T06:45:29.140

和`am`是`w`表别名，有效地是本地化到这一查询的表名的缩写。

它们被指定在：

```
FROM 
    " . DB_PREFIX . "auction_media am, " . DB_PREFIX . "winners w WHERE 
```

有些人会在表名和别名之间放置一个 AS。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T06:45:50.760

您指的是 MySQL 别名。

`winners w`, 这里`w`代表获胜者表

所以不要写：

```
winners.is_add, winners.dd_active_date 
```

你可以简而言之：

```
w.is_add, w.dd_active_date 
```

也是如此`auction_media am`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-13T06:49:48.673

这里 `w.`和`am.`是表`winners`和的别名`auction_media`。假设两个表中是否有任何相同的字段，并且我们正在展示，所以这个别名将有助于区分它们。

谢谢

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-13T06:47:02.237

`am`是`auction_media`talbe的别名，也是table`w`的别名。`winner`基本上是在查询中指定要查询的表。在连接查询中，为了避免两个表中的字段之间发生任何冲突，最好使用表名，而别名只是一种使更长的表名更容易的方法。

# android - 为什么 OptionMenu 在 4.0 中不显示图标菜单但在 2.xx 中工作

> ID：10569833
> 
> 赞同：1
> 
> 时间：2012-05-13T06:42:00.753
> 
> 标签：android, android-menu, optionmenu

我尝试创建应用程序目标为 15 但 minSDK 为 8 的 OptionMenu。我有一个 Menu 文件夹并`mymenu.xml`在其中。我想使用默认图标菜单，并希望从 sdk 8 开始支持它。它应该怎么做？我测试时的问题是，选项菜单图标仅在 sdkVersion 8 上显示，但在 sdkVersion 15 上不显示

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:id="@+id/my_menu" android:title="Send Mail" android:icon="@android:drawable/ic_menu_send"></item>
</menu> 
```

在活动中

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.mymenu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.my_menu:
            //Do something
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:15:20.327

动作溢出——您认为是 API Level 11+ 上的选项菜单——不显示图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T10:36:06.030

@ohh: android:showAsAction="ifRoom", you can add it to your menu.xml

# iphone - iOS safari 可以操作数字证书api吗？

> ID：10569836
> 
> 赞同：0
> 
> 时间：2012-05-13T06:43:18.007
> 
> 标签：iphone, ios, ipad, webkit

IE 和 Firefox 桌面可以使用证书 api，ios safari 是否可以使用纯 JS（不通过嵌入在具有目标 c 桥的应用程序中的 UIWebView）？

更新：我将动词操纵更改为使用某些人的字面意思。

# mysql - mysql中多条记录删除速度慢

> ID：10569839
> 
> 赞同：3
> 
> 时间：2012-05-13T06:44:20.840
> 
> 标签：mysql, relational-database, innodb

我注意到在测试服务器上从表中删除多行需要很长时间，例如，删除 100K 行大约需要 80-90 秒。我在 mysql 中使用 innodb 引擎。没有 DELETE 触发器。该表现在有大约 23M 行。需要很长时间的查询类似于：

```
DELETE FROM contacts WHERE list_id = som_list_id 
```

添加索引。

```
EXPLAIN SELECT *
FROM contacts
WHERE list_id =118

id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  subscribers     ref     FK_list_id  FK_list_id  4   const   1 
```

这是分析结果：

```
 SET PROFILING = 1;
    DELETE FROM contacts WHERE list_id = 118;
    SHOW PROFILE FOR QUERY 1;

Status  Duration    CPU_user    CPU_system  Context_voluntary   Context_involuntary     Block_ops_in    Block_ops_out   Messages_sent   Messages_received   Page_faults_major   Page_faults_minor   Swaps   Source_function     Source_file     Source_line
starting    0.000031    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL
checking permissions    0.000004    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    check_access    sql_parse.cc    4895
Opening tables  0.000031    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    open_tables     sql_base.cc     4860
System lock     0.000005    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    mysql_lock_tables   lock.cc     299
init    0.000079    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    mysql_delete    sql_delete.cc   79
updating    94.624119   NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    mysql_delete    sql_delete.cc   277
end     0.000007    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    mysql_delete    sql_delete.cc   356
Waiting for query cache lock    0.000003    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    lock    sql_cache.cc    749
end     0.000006    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL
query end   0.012509    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    mysql_execute_command   sql_parse.cc    4584
closing tables  0.000018    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    mysql_execute_command   sql_parse.cc    4636
freeing items   0.000038    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    mysql_parse     sql_parse.cc    5817
logging slow query  0.000006    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    log_slow_statement  sql_parse.cc    1581
logging slow query  0.000000    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    log_slow_statement  sql_parse.cc    1590
cleaning up     0.000003    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    dispatch_command    sql_parse.cc    1443 
```

我试图将联系人复制到没有联系人具有的子表的contact1：分析结果相似：

```
Status  Duration    CPU_user    CPU_system  Context_voluntary   Context_involuntary     Block_ops_in    Block_ops_out   Messages_sent   Messages_received   Page_faults_major   Page_faults_minor   Swaps   Source_function     Source_file     Source_line
starting    0.000028    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL
checking permissions    0.000005    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    check_access    sql_parse.cc    4895
Opening tables  0.000035    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    open_tables     sql_base.cc     4860
System lock     0.000014    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    mysql_lock_tables   lock.cc     299
init    0.000792    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    mysql_delete    sql_delete.cc   79
updating    72.805936   NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    mysql_delete    sql_delete.cc   277
end     0.000006    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    mysql_delete    sql_delete.cc   356
Waiting for query cache lock    0.000002    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    lock    sql_cache.cc    749
end     0.000006    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL
query end   0.013662    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    mysql_execute_command   sql_parse.cc    4584
closing tables  0.000017    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    mysql_execute_command   sql_parse.cc    4636
freeing items   0.000044    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    mysql_parse     sql_parse.cc    5817
logging slow query  0.000003    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    log_slow_statement  sql_parse.cc    1581
logging slow query  0.000002    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    log_slow_statement  sql_parse.cc    1590
cleaning up     0.000003    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    dispatch_command    sql_parse.cc    1443 
```

看起来更新消耗了大部分时间。

为什么删除需要这么长时间？是否因为服务器的 I/O 系统很慢而需要这么多时间？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T07:02:54.440

表是 MyISAM 吗？如果是这样，请尝试

```
 delete quick from contacts... 
```

其次是

```
 optimize table contacts 
```

使用快速没有数据库在删除期间合并索引。然后优化回收未使用的空间来支付表。

# weblogic - Weblogic 10，会话复制

> ID：10569841
> 
> 赞同：-1
> 
> 时间：2012-05-13T06:45:20.313
> 
> 标签：weblogic

我正在使用集群中的两个服务器实例进行会话复制。

会话 id 没有被复制到第二台服务器，因此它总是创建一个新的，我打开的应用程序出错并被关闭。如何处理服务器实例的故障转移，以便用户不会知道服务器实例是否关闭。这是我在 weblogic.xml 中使用的设置

```
 <?xml version="1.0" encoding="ISO-8859-1"?>

      <weblogic-web-app xmlns="http://www.bea.com/ns/weblogic/weblogic-web-app">
         <session-descriptor>
       <session-param>
      <param-name>URLRewritingEnabled</param-name>
        <param-value>true</param-value>
       </session-param>
        <session-param>
        <param-name>PersistentStoreType</param-name>
       <param-value>replicated</param-value>
     </session-param>
     </session-descriptor>

 <context-root>@CONTEXT_ROOT@</context-root>
  </weblogic-web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:42:23.643

既然您知道直接访问应用服务器并不能缓解似乎缓解您的会话 id 问题，您需要进行更深入的调试：

1.  在 Firefox 中安装 Firebug ( [https://getfirebug.com/](https://getfirebug.com/) )
2.  在 Firefox 中访问您的网站
3.  在 Firefox 中打开 Firebug（并确保 Firefox 的“网络”选项卡（可能是灰色的）已启用）
4.  登录您的网站
5.  查看 firebug 中的 Net 选项卡并展开请求的加号。
6.  查看请求标头部分——您是否在 cookie 字段中看到任何类似于 JSESSIONID 的内容？如果是这样，当您导航到站点上的其他页面时，JSESSIONID 是保持不变还是会发生变化？

我附上了使用 Firebug 查看设置并在您登录到 weblogic 管理控制台进行比较时重新发送的 cookie 的屏幕截图（而不是 ADMINCONSOLESESSION，您会看到 JSESSIONID 作为 cookie 键)

![在此处输入图像描述](../Images/90fc965b7d658aee3f0d8fcd2f4de66c.png)

# wicket - 如何更改 PageableListView 的样式和颜色生成编号

> ID：10569845
> 
> 赞同：0
> 
> 时间：2012-05-13T06:45:52.350
> 
> 标签：wicket

我在表中使用了 PageableListView，但编号以以下简单
格式生成：

```
<< < 1 2 3 4 > >> 

with blue color .please tell how to change color & style of such PageableListView in   
wicket 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T07:49:59.777

You need to write CSS to change the color of `a` elements :

```
a, a:hover, a:visited, a:active{
  color:black;
} 
```

# python - Pip 安装但未找到模块

> ID：10569846
> 
> 赞同：2
> 
> 时间：2012-05-13T06:46:02.970
> 
> 标签：python, pip, virtualenv

我正在尝试从 github 安装 Exscript。

```
pip install -e 'git+git://github.com/knipknap/exscript.git#egg=Exscript'
...
Successfully installed Exscript
Cleaning up.. 
```

当我尝试加载它时，python 无法找到它：

```
python2.7 -c "import Exscript"
Traceback (most recent call last):
File "<string>", line 1, in <module>
ImportError: No module named Exscript 
```

但是，当我尝试将它安装在与 setup.py 相同的 virtualenv 中时，它会成功安装并加载。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:58:12.523

该标志的`-e`意思是“可编辑”，幕后发生的是一个符号链接，正如我所见，`Exscript`使用了一个名为 的目录`src`，这不是一个好的做法[1]。

因此，为了解决您的问题，您有两种选择：

1.  删除`-e`标志
2.  更改 Exscript 以摆脱`src`，并使用另一个目录名称

看看[https://the-hitchhikers-guide-to-packaging.readthedocs.io/en/latest/creation.html#arranging-your-file-and-directory-structure](https://the-hitchhikers-guide-to-packaging.readthedocs.io/en/latest/creation.html#arranging-your-file-and-directory-structure)和[https://setuptools.readthedocs。 io/en/latest/userguide/development_mode.html](https://setuptools.readthedocs.io/en/latest/userguide/development_mode.html)。

[1]：好的做法是目录与导入包时使用的名称相同

# c# - 按 URL（路由）ASP.NET 4 的输出缓存

> ID：10569849
> 
> 赞同：3
> 
> 时间：2012-05-13T06:46:43.290
> 
> 标签：c#, asp.net, caching, routing

我还没有找到明确的答案，所以有人可以帮助我吗？

如果我们有这样的 URL

```
 www.website.com/results.aspx?listingtype=2&propertytype=1&location=alaska 
```

然后我们可以设置

```
 <%@ OutputCache Duration="120" VaryByParam="listingtype;propertytype;location" %> 
```

但是我使用路由，所以我的 url 看起来像这样：

```
 www.website.com/buy/houses/alaska 
```

或者例如

```
 www.website.com/rent/condominiums/nevada 
```

如何在 VaryByParam 中使用 RouteValues，或者我可以从代码隐藏中设置它还是如何设置？我没有使用 MVC，这是一个 ASP.NET 网站

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T07:04:41.503

编辑：（对于非 ASP.NET MVC 应用程序）

这个怎么样：

使 OutputCache 定义如下：

```
 <%@ OutputCache Duration="120" VaryByParam="None" VaryByCustom="listingtype;propertytype;location" %> 
```

在 Global.asax.cs 添加这些方法：

```
 public override string GetVaryByCustomString(HttpContext context, string custom)
{
    if (custom == "lisingtype")
    {
        return GetParamFromRouteData("listingtype", context);
    }

    if (custom == "propertytype")
    {
        return GetParamFromRouteData("propertytype", context);
    }

    if (custom == "location")
    {
        return GetParamFromRouteData("location", context);
    }

    return base.GetVaryByCustomString(context, custom);
}

private string GetParamFromRouteData(string routeDataKey, HttpContext context)
{
    object value;

    if (!context.Request.RequestContext.RouteData.Values.TryGetValue(routeDataKey, out value))
    {
        return null;
    }

    return value.ToString();
} 
```

## 旧内容：

如果您只是将 OutputCache 放在您的操作方法上，并使您的所有路由部分成为您操作方法的一部分，则如下所示：

```
 [OutputCache]
public ActionResult FindProperties(string listingtype, string propertytype, string location)
{
} 
```

框架会自动为您更改这些项目的缓存（请参阅：[http](http://aspalliance.com/2035_Announcing_ASPNET_MVC_3_Release_Candidate_2_.4) ://aspalliance.com/2035_Announcing_ASPNET_MVC_3_Release_Candidate_2_.4 ）

# php - 在 PHP 中添加或替换文本

> ID：10569852
> 
> 赞同：0
> 
> 时间：2012-05-13T06:47:03.133
> 
> 标签：php

我是 PHP 新手。我的 js 文件看起来像

```
 var sites = [
 //Texte anime
  {url:" http://carouselinfo.com/canal/", duration:9},
 //Texte anime
  {url:" http://carouselinfo.com/canal-2/", duration:9}, 
  //Intro detallee
 {url:"http://carouselinfo.com/index-t1.html", duration:35},
 //CTA
 {url:"http://carouselinfo.com/index-t2.html", duration:35},

 //Football
  {url:"http://carouselinfo.com/twitter-ligue/", duration:100},

 //Texte anime
  {url:" http://carouselinfo.com/canal-2/", duration:9}, 

  //TrailersClub.com
  {url:"http://trailersclub.com/?lang=fr", duration:480},

 //Heure
 {url:"http://carouselinfo.com/heure", duration:8},
 //Meteo
 {url:"http://carouselinfo.com/meteo", duration:12},
 //Texte anime
  {url:" http://carouselinfo.com/canal-cine/", duration:9},
 //Cine
 {url:"http://carouselinfo.com/cine/index-t1.html", duration:150},
  //Texte anime
  {url:" http://carouselinfo.com/canal-2/", duration:9}, 
 //Heure
 {url:"http://carouselinfo.com/heure", duration:8},
   ]; 
```

我想在 var site=[ 之后添加文本，或者使用 php 在 4 行处添加任何行，那么我们如何添加。这是我在任何行上替换文本的代码。

```
$lines = array();
foreach( file('source.js') as $line ) {
  if ( 'var site=[' === $line ) {
    array_push($lines, 'test');
  }
  array_push($lines, $line);
}

file_put_contents('source.js', $lines); 
```

这段代码行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T06:56:28.257

如果这是您尝试做的，这将附加到您的文件中。

```
<?
$file = "/path/to/file.js";
$lines = file($file);
$lines[] = "test\n";
file_put_contents($file, $lines);
?> 
```

如果您想替换该位置的文本，您可以

```
foreach($lines as $i => $line)
{
   if($line == "text to replace")
      $lines[$i] = "replacement";
} 
```

如果要在第 4 行放置新链接，请将数组向右移动并写入数组位置 3 ( `$lines[3]`)。或者你可以使用我的功能：

```
function array_insert($array, $index, $value) //assumes all keys are ints
{
   for($i=sizeof($array); $i < $index ; $i--)
      $array[$i+1] = $array[$i];
   $array[$index]  = $value;
} 
```

如果要在索引 4 处插入“测试”，请使用如下函数：`array_insert($array, 4, "Test")`

我还没有测试，但它应该工作。

# python - 使用包含字典值的元素对列表进行排序

> ID：10569853
> 
> 赞同：3
> 
> 时间：2012-05-13T06:47:24.830
> 
> 标签：python, list, sorting, dictionary

我正在尝试制作一个带有卡片等级的排序系统，它们的值是从单独的字典中获得的。在一个简单的 52 张牌中，我们有 2 个 A 等级，在这种情况下，我想要一个等级系统，其中 0 是 10，J 是 11，Q 是 12，K 是 13，A 是 14，2 是 15，其中 2 是最大的价值排名。问题是，如果有一个列表，我想根据编号系统*按 ASCENDING*顺序对排名卡进行排序，我该怎么做？

例如，这是一个列表，`[3,5,9,7,J,K,2,0]`我想将列表排序为`[3,5,7,9,0,J,K,2]`。我还为编号系统制作了一本字典`{'A': 14, 'K': 13, 'J': 11, 'Q': 12, '0': 10, '2': 15}`。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:12:15.313

这个答案有效：

```
 sorted(list_for_sorting, key=dictionary_you_wrote.__getitem__) 
```

这也是：

```
 sorted_list = sorted(unsorted_list, key = lambda k: your_dictionary[k]) 
```

sorted 函数使用第一个参数（要排序的对象）中的每个条目来调用第二个参数。这样，lamda 函数从字典中返回给定项目的值，并且 sorted 可以将其用作键。

如果任何列表条目不在 your_dictionary.keys() 中，这将不起作用。完成字典或使用

```
 sorted(unsorted_list, key = lambda k: your_dictionary[k] if k in your_dictionary.keys() else k) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T07:10:25.647

你试过了吗

> `sorted(list_for_sorting, key=dictionary_you_wrote.__getitem__)`

?

# android - 如何知道是否显示短信或联系人？

> ID：10569860
> 
> 赞同：-1
> 
> 时间：2012-05-13T06:49:16.237
> 
> 标签：android, contact

我正在开发 android 应用程序，在该应用程序中，我的服务将不断检查是否显示短信或联系人应用程序。任何人都可以帮助我了解如何了解显示的联系人或发件人短信。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:14:30.780

幸运的是，出于明显的隐私和安全原因，这是不可能的。

# php - isset($_SESSION['admin']) 是一种危险的授予访问权限的方法吗？

> ID：10569861
> 
> 赞同：2
> 
> 时间：2012-05-13T06:49:26.260
> 
> 标签：php, session, login

如果（为了论证）在 php 中授予了“admin-access”：

```
if (isset($_SESSION['admin']))  // this session would be set
{ // grant access; }            // after a successful login
else { //redirect ;} 
```

如果您知道会话的名称是什么（在本例中是管理员），这会是一件特别容易绕过和伪造的事情吗？

换句话说，如果所有脚本都要求“设置”会话，那么有人可以轻松伪造 $_SESSION 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T06:54:25.403

使用`isset()`对安全性来说还不错。这取决于你如何使用它的逻辑。如果您不仅检查`isset()`而且检查其价值，那将是一件好事。

**例如：**

```
if( isset($_SESSION['admin']) && $_SESSION['admin'] == true ) { 
  // grant access
} else { 
  //redirect 
} 
```

或者是这样的：

```
if( isset($_SESSION['admin']) && $_SESSION['admin'] == '1' ) { 
  // grant access
} else { 
  //redirect 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T07:00:28.863

我更喜欢更安全的方式，比如我在旧应用程序中使用的这个类：

```
class auth {

    protected $userID;
    protected $password;
    protected $username;
    protected $remember;
    protected $userType;

    public function checkAuth($username,$password,$remember=0) {
        global $db;

        $this->password = sha1($password);
        $this->username = strtolower($username);
        $this->remember = $remember;

        $sth = $db->prepare("SELECT `id`,`username`,`password`,`type` FROM `user` WHERE `username` = :username AND `active` = '1' LIMIT 1");
        $sth->execute(array(
            ':username' => $this->username
        ));
        $result = $sth->fetchAll();
        $this->userType = $result[0]['type'];

        if (@$result[0]['password'] == $this->password) {
            $this->userID = $result[0]['id'];
            $this->makeLogin();
            return true;
        } else {
            return false;
            exit;
        }
    }

    private function makeLogin() {
        $securityInformation = $this->username . '|-|' . $this->password . '|-|' . $this->userID . '|-|' . $this->userType;
        $hash = $this->encode($securityInformation);
        if ($this->remember) {
            setcookie('qdata',$hash,time()+604800,'/');
        } else {
            $_SESSION['qdata'] = $hash;
        }
        $this->updateStats();
    }

    public function isLogin() {
        global $db, $ua, $cache;

        $data = $this->getUserInfo();
        if ($data) {

            $sth = $db->prepare('SELECT `password`,`last_login_ip` FROM `user` WHERE `id` = :ID LIMIT 1');
            $sth->execute(array(
                ':ID' => $data['userID']
            ));

            $result = $sth->fetchAll();
            if ( ($result[0]['password'] == $data['password']) AND ($result[0]['last_login_ip'] == $ua->getIP()) ) {
                return true;
            } else {
                return false;
            }

        }
    }

    public function logout() {
        if (@isset($_COOKIE['qdata'])) {
            setcookie('qdata','',time()-200, '/');
        } 
        if (@isset($_SESSION['qdata'])) {
            unset($_SESSION['qdata']);
        }
    }

    private function parseHash($hash) {
        $userData = array();
        list($userData['username'],$userData['password'],$userData['userID'],$userData['userType']) = explode('|-|',$this->decode($hash));
        return $userData;
    }

    public function getUserInfo() {
        if (@isset($_COOKIE['qdata'])) {
            $data = $this->parseHash($_COOKIE['qdata']);
            return $data; 
        } elseif (@isset($_SESSION['qdata'])) {
            $data = $this->parseHash($_SESSION['qdata']);
            return $data;
        } else {
            return false;
        }
    }

    private function encode($str) {
        $chr = '';
        $prt = '';
        for($i=0;$i < strlen($str);$i++) {
            $prt = (chr(ord(substr($str,$i,1)) + 3)) . chr(ord(substr($str,$i,1)) + 2);
            $chr =  $prt . $chr;
        }
        return str_rot13($chr);
    }

    private function decode($str) {
        $chr = '';
        $prt = '';
        $str = str_rot13($str);
        for($i=0;$i < strlen($str);$i++) {
            if($i % 2 == 0) {
                $prt = (chr(ord(substr($str,$i,1)) - 3));
                $chr = $prt . $chr;
            }
        }
        return $chr;    
    }
} 
```

如果您不喜欢这种方法，请至少在管理表中存储一个特殊键并使用带有该键值的会话，每次加载页面时还要检查登录是否验证。

# c++ - 错误 2 错误 C2679: 二进制 '/' : 未找到采用右侧操作数类型的运算符（或没有可接受的转换）

> ID：10569865
> 
> 赞同：1
> 
> 时间：2012-05-13T06:50:25.510
> 
> 标签：c++, operator-overloading

我对运算符重载有一些问题。我到处寻找，但找不到解决此错误的正确方法。这是我的代码的一些部分：

```
Matrix<type> Matrix<type>::operator/(const Matrix& denom){

if(num_of_rows != denom.num_of_rows || num_of_cols != denom.num_of_cols)
    throw string("Unable to divide (Different size).");
if(denom.contains(0))
    throw string("Unable to divide (Divide by zero).");

for(int i = 0; i < num_of_rows; i++)
    for(int j = 0; j < num_of_cols; j++)
        values[i][j] /= denom.values[i][j]; 
                    // I KNOW THIS IS NOT HOW TO DIVIDE TWO MATRICES

return *this;
 }

 void Matrix<type>::operator=(const Matrix& m) const {

delete [][] values;
num_of_rows = m.num_of_rows;
num_of_cols = m.num_of_cols;
values = new type*[num_of_rows];

for(int i = 0; i < num_of_rows; i++){
    *(values + i) = new type[num_of_cols];
    for(int j = 0; j < num_of_cols; j++)
        values[i][j] = m.values[i][j];
}
 } 
```

这是 Matrix 类，构造函数有 2 个参数：

```
class Matrix{

private:
    type** values;
    int num_of_rows, num_of_cols;

public:
    Matrix(){}
    Matrix(int, int);
    type getElement(int, int);
    void print();
    bool contains(type);
    Matrix<type> operator/(const Matrix&);
    void operator=(const Matrix&) const;
};

template <class type>

Matrix<type>::Matrix(int rows, int cols){

values = new type*[rows];
num_of_rows = rows;
num_of_cols = cols;

for(int i = 0; i < rows; i++){
    *(values + i) = new type[cols];
    for(int j = 0; j < cols; j++){
            type random = (type)rand() / 3276.71;
        values[i][j] = random;
    }
}
} 
```

而 main 中的这段代码给出了这个错误：

```
srand(time(NULL));
Matrix<int> m1(3,5);  // creating some objects 
Matrix<double> m2(3,5);  // matrices’ elements are assigned randomly from 0 to 10
Matrix<double> m3(5,5);
Matrix<double> m4(5,6);
if(!(m2.contains(0))){
    Matrix<double> m8(3,5);
    m8=m1/m2; // THIS LINE GIVES ERROR
    m8.print();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T07:01:38.070

`m1`有 type `Matrix<int>`，所以在寻找合适的重载时，`operator/`我们发现：

```
Matrix<int> Matrix<int>::operator/(const Matrix& denom); 
```

注意`Matrix`这里的参数类型使用了所谓的注入类名。这意味着`Matrix`在这种情况下代表`Matrix<int>`，因为那是有问题的（模板）类。但是`m2`，调用 to 的参数`operator/`具有类型`Matrix<double>`。没有合适的从`Matrix<double>`to转换，`Matrix<int>`所以调用无效。

一个可能的解决方法是更改`operator/`​​为模板：

```
// Declared inside Matrix<type>:
template<typename Other>
Matrix& operator/=(Matrix<Other> const& other); 
```

（我还冒昧地修复了操作符，以更好地反映它实际在做什么。）

但是，您将遇到问题，您正在使用 a `Matrix<int>`（调用的结果`operator/`）来分配`m8`具有 type`Matrix<double>`的。因此，也许您需要进行`operator=`转换（在这种情况下，我也建议使用转换构造函数，或者甚至只是不带转换的构造函数`operator=`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T07:06:29.803

错误消息非常清楚地表明您没有定义一个除法运算符，将这两种类型作为您传递的参数。查看代码摘录是这种情况：有一个运算符采用两个`Matrix<T>`但没有一个采用 a`Matrix<T1>`和 a `Matrix<T2>`（对于不同的类型`T1`and `T2`）。

顺便说一句，你的问题是什么？

# jquery - JQuery Full Calendar不能同时使用ajax事件资源和静态资源

> ID：10569876
> 
> 赞同：0
> 
> 时间：2012-05-13T06:54:56.200
> 
> 标签：jquery, ajax, fullcalendar

好的，我正在使用 Adam Shaw 的 FullCalendar，它真的很棒……我想充分利用它的功能。行。我的问题是我无法制作 2 个事件资源，即存储在我的页面中的静态 JSON 数据`window.initial_task_items`和另一个是 jquery.ajax 函数。

```
eventSources: [{
            //static events
            events: window.initial_task_items},
        { //ajax fetching
            events: function(start, end, callback) {
                if (window.task_calendar_firstrun == true) {
                    window.task_calendar_firstrun = false;
                }
                else if (window.task_calendar_firstrun == false) {
                    window.AjaxRegistry["gettasks"] = $.ajax({
                        url: window.cvars.userburl + "gettasks",
                        type: "GET",
                        dataType: 'json',
                        data: {
                            procdate: new XDate($('#task-full-calendar').fullCalendar('getDate')).toString("yyyy-MM-dd"),
                            user_hash: window.cvars.acuserhash
                        },
                        beforeSend: function() {

                        },
                        success: function(rsp) {
                            $('#task-full-calendar').fullCalendar('removeEvents');
                            var events = [];
                            $.each(rsp, function(i, task) {
                                events.push({
                                    start: task.start,
                                    end: task.end,
                                    allDay: task.allDay,
                                    title: task.title,
                                    color: task.color
                                });
                            });
                            callback(events);
                        },
                        error: function(ex) {
                            alert("error occured");
                        },
                        complete: function(obj, rsptype) {

                        }
                    });
                }
            }}] 
```

现在我最近测试了上面的代码，但这不起作用。唯一有效的是当我单击完整日历中的上一个和下一个按钮时的 ajax 请求，但未呈现静态 JSON 中的数据。

无论如何我可以使这两个事件资源工作吗？

**注意：** 我想加载我的页面，该页面已经呈现了在看到页面时显示的月份的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T11:16:14.840

好吧，也许我不太了解您的问题，但是处理您的目的的方法是这样的。

您必须在 eventsources 选项中传递所有“源”（静态和动态），而不是像您那样“覆盖”事件：

```
eventSources: [
     // 1\. event source
     array_of_static_events
     // 2\. event source
     , { 
         url: "/getevents"
         data: { param1: "test" }
         error: function(){ alert("error"); }
     }
] // end of eventSources 
```

一切都在相关的[远程事件事件](http://arshaw.com/fullcalendar/docs/event_data/events_json_feed)源[对象](http://arshaw.com/fullcalendar/docs/event_data/Event_Source_Object/)中有详细描述。

这是一个运行[示例](http://jsfiddle.net/domi27/bQXYp/2/)，其中混合了全日历事件的静态和远程源。

# mysql - Sphinx 2.0.4 使用 MAMP 2.0 安装错误：找不到 MySQL 标头

> ID：10569877
> 
> 赞同：1
> 
> 时间：2012-05-13T06:55:35.537
> 
> 标签：mysql, gcc, sphinx, mamp

在 MAMP 本地开发，需要 Sphinx 与 MAMP 的 MySQL 一起工作。期间基本陷入死胡同`$ sudo make`。

MAMP 安装时没有一些用于 Sphinx 集成的必要资源，主要是一个 mysql lib 目录和一个包含 C 头源文件的包含目录。这些已成功下载并安装（使用 CMake）到以下目录中：

/Applications/MAMP/Library/include/mysql
/Applications/MAMP/Library/lib/mysql

解压 Sphinx 并运行后：

```
sudo ./configure --prefix=/usr/local/sphinx --with-libstemmer --with-mysql=/Applications/MAMP/Library 
```

我有：

```
******************************************************************************
ERROR: cannot find MySQL include files.

Check that you do have MySQL include files installed.
The package name is typically 'mysql-devel'.

If include files are installed on your system, but you are still getting
this message, you should do one of the following:

1) either specify includes location explicitly, using --with-mysql-includes;
2) or specify MySQL installation root location explicitly, using --with-mysql;
3) or make sure that the path to 'mysql_config' program is listed in 
```

将 ./configure 命令更改为：

```
sudo ./configure --prefix=/usr/local/sphinx--with-libstemmer --with-mysql-includes /Applications/MAMP/Library/include --with-mysql-libs /Applications/MAMP/Library/lib 
```

一开始就抛出以下内容，但无论如何都会导致配置成功：

```
configure: WARNING: you should use --build, --host, --target
configure: WARNING: invalid host type: /Applications/MAMP/Library/include
configure: WARNING: you should use --build, --host, --target
configure: WARNING: invalid host type: /Applications/MAMP/Library/lib 
```

该日志还具有以下行（我认为这是相关的）：

```
checking MySQL include files... -Iyes 
```

现在，继续，`$ sudo make`抛出以下内容：

```
Making all in src
/bin/sh svnxrev.sh ..
make  all-am
g++ -DHAVE_CONFIG_H -I. -I../config  -DSYSCONFDIR="\"/usr/local/sphinx--with-libstemmer/etc\"" -DDATADIR="\"/usr/local/sphinx--with-libstemmer/var/data\"" -I/usr/local/include -Iyes   -Wall -g -D_FILE_OFFSET_BITS=64 -O3 -DNDEBUG -MT sphinx.o -MD -MP -MF .deps/sphinx.Tpo -c -o sphinx.o sphinx.cpp
In file included from sphinx.cpp:16:
sphinx.h:64:19: error: mysql.h: No such file or directory

... //whole bunch of errors follow, resulting from the above 
```

所以，我知道 mysql.h 存在于我的包含文件中，我想我也有所有必要的二进制文件，并且配置似乎看到了包含文件，所以我有点担心。我希望这是一个简单的路径问题，或者是我的 ./configure 属性的语法错误，因为这是我第一次从命令行编译和安装。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T17:11:07.440

Sphinx`./configure`使用未知的默认值`--with-mysql`，默认情况下启用，这可能会让您认为没有必要调用它。

要让 Sphinx 使用 MAMP 的不同分布的 MySQL 文件，请确保在您的`./configure`命令中使用以下每个属性，并为每个属性指定直接路径：

```
--with-mysql= // root mysql app
--with-includes= // path to mysql header includes
--with-mysql-libs= // path to libmysqlclient.dylib files 
```

对我有用的最终命令：

```
./configure --prefix=/usr/local/sphinx --with-libstemmer --with-mysql=/Applications/MAMP/Library --with-mysql-includes=/Applications/MAMP/Library/include/mysql --with-mysql-libs=/Applications/MAMP/Library/lib/mysql 
```

`--prefix`是您在 usr/local 中的首选安装目录，并`--libstemmer`添加了 Snowball 的扩展词干提取功能（如果您下载了它）。

如果这运行没有错误，`make`那么`make install`你就可以开始了。

另请注意，未压缩的 Sphinx 目录中有一个易于忽略的配置错误日志。在这种情况下没有帮助，但如果您遇到问题，可能对其他人非常有用。

# ios - 如何在 Xcode 项目中将 Font Awesome 与 Objective-C 或 Swift 集成和使用？

> ID：10569878
> 
> 赞同：32
> 
> 时间：2012-05-13T06:55:38.267
> 
> 标签：ios, objective-c, swift, unicode, font-awesome

所以我正在尝试使用这种字体[http://fortawesome.github.com/Font-Awesome/](http://fortawesome.github.com/Font-Awesome/)。我已将字体添加为资源并将其放入 plist 文件中。这是我使用它的方式：

```
[homeFeedButton.titleLabel setFont:[UIFont fontWithName:@"fontawesome" size:8]];
NSString *str = [NSString stringWithFormat:@"%C", @"\f030"]; 
```

但是，这不起作用。有谁知道如何在 Xcode 项目中使用这种字体？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-06-15T13:31:23.830

在**斯威夫特**：

[字体真棒备忘单。](http://fortawesome.github.io/Font-Awesome/cheatsheet/)

[关于如何在 Xcode 项目中集成名为“Font Awesome”的字体的教程。](https://www.youtube.com/watch?v=J1EHAS0icv0)

[向 iOS 应用程序添加自定义字体的常见错误](http://codewithchris.com/common-mistakes-with-adding-custom-fonts-to-your-ios-app/#doublechecktarget)

```
let label = UILabel(frame: CGRectMake(0, 0, 100, 100))
label.font = UIFont(name: "FontAwesome", size: 40)
let myChar: UniChar = 0xF180
label.text = String(format: "%C", myChar)
self.view.addSubview(label) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-01-21T10:30:20.457

使用 XCode 进行 FA 的最佳解决方案：

1.  [从http://fontawesome.io/cheatsheet/](http://fontawesome.io/cheatsheet/)复制您想要的图标（我的意思是标记并复制图标本身）：

[![在此处输入图像描述](../Images/59269613d84cb51ea37ea5486dff0118.png)](https://i.stack.imgur.com/RRvkg.jpg)

2.  然后在情节提要中添加标签，并在其属性上：

[![在此处输入图像描述](../Images/8be412d902e185399828a3abeb976986.png)](https://i.stack.imgur.com/cQe7Y.jpg)

*   RED - 选择 FontAwesome 作为家人
*   绿色 - 设置您想要的尺寸
*   蓝色 - 在此处粘贴您在第一步中复制的内容。（不要担心问号 - 在视图中你应该正确地看到它）。

**而已。**

*如果您需要更改代码中的图标 - 您也可以在代码中粘贴第一步：* [![在此处输入图像描述](../Images/c8405cf33a5be5c33efc6f7001185716.png)](https://i.stack.imgur.com/AS8nJ.png)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-03-05T23:18:09.607

不确定你是否能正常工作，但现在 github 上有几个不错的项目：

[https://github.com/alexdrone/ios-fontawesome](https://github.com/alexdrone/ios-fontawesome) - 它为您提供了一个 NSString 类别，它提供了使用 FontAwesome 的基本帮助。

和[https://github.com/leberwurstsaft/FontAwesome-for-iOS](https://github.com/leberwurstsaft/FontAwesome-for-iOS)它为您提供了一个 NSString 类别`fontAwesomeIconStringForIconIdentifier` 和一个`UIImageView`子类：`FAImageView`

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-13T07:01:15.813

这是因为您的`+[NSString stringWithFormat:]`方法包含 unichar 的文字，而不是 NSString，它是一个使用 %@ 的对象，这是题外话，因为文字化文字是多余的。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-10-09T01:32:44.693

您可以通过将文字代码字符串附加到`\u`.

例如，您可以使用`\f030`以下代码段在您的 iOS 应用程序中使用。

`[[[UILabel alloc] initWithFrame:CGRectZero] setText:@"\uf030"];`

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-09-26T12:40:23.933

所以，我可以同时为 Swift 和 Objective C 回答这个问题。（这里使用 Swift 3.0）

## 添加和配置字体真棒文件和编辑故事板

只需从此处下载 font-awesome：fontawesome.io 并将 .ttf 添加到您的项目中

查看下面的图片以获取更多详细信息...

![按照图片中给出的顺序](../Images/2ce932f6d1b30497d3fad8ac0dc5b15a.png)

## 现在是编码部分

### 斯威夫特 3.0

```
let iconUniChar: UniChar = 0xf113  
textLabel.text = String(format: "%C", iconUniChar) 
```

### 目标 C

```
_textLabel.text = [NSString stringWithFormat:@"%C", 0xf113]; 
```

而且，如果您仍然面临麻烦，这里是

### [**整个源代码**](https://insights.nimblechapps.com/app-development/ios-app-development/awesome-font-ios)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-03-21T07:45:34.463

您还可以使用库[FontAwesome+iOS for iOS](https://www.cocoacontrols.com/controls/fontawesome-ios)

那么你只需要使用这段代码：

```
label.text = [NSString fontAwesomeIconStringForIconIdentifier:@"icon-github"];
// or:
label.text = [NSString fontAwesomeIconStringForEnum:FAIconGithub]; 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-09-25T06:30:50.860

下面是使用 FontAwesome 将图像设置为 UIButton 的代码

```
 UIButton *btnMenu = [UIButton buttonWithType:UIButtonTypeCustom];
 btnMenu.frame = CGRectMake(0, 0, 40, 32);
 [btnMenu setTitle:@"\uf0c9" forState:UIControlStateNormal];
 [btnMenu setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
 [btnMenu.titleLabel setFont:[UIFont fontWithName:@"FontAwesome" size:16]]; 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-07-12T05:47:47.820

NSLog 使用以下代码记录您的所有字体并提供确切名称。

```
 NSArray *familyNames = [[NSArray alloc] initWithArray:[UIFont familyNames]];
    NSArray *fontNames;
    NSInteger indFamily, indFont;
    for (indFamily=0; indFamily<[familyNames count]; ++indFamily)
    {
        NSLog(@"Family name: %@", [familyNames objectAtIndex:indFamily]);
        fontNames = [[NSArray alloc] initWithArray:
                     [UIFont fontNamesForFamilyName:
                      [familyNames objectAtIndex:indFamily]]];
        for (indFont=0; indFont<[fontNames count]; ++indFont)
        {
            NSLog(@"    Font name: %@", [fontNames objectAtIndex:indFont]);
        }
    } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-11-01T14:36:48.127

我正在寻找 Swift3 的帮助程序库，发现这是一个非常简单且有效的解决方案[https://github.com/Syndicode/FontAwesomeKitSwift3](https://github.com/Syndicode/FontAwesomeKitSwift3)。它有动画，可以为像我这样的新手解释如何包含它并快速使用它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-06-14T15:31:43.603

以下是单元格标签文本的示例：

```
cell.textLabel.font = [UIFont fontWithName:@"FontAwesome" size:12];
cell.textLabel.text = @"\uf000"; 
```

确保按照上面的建议获得正确的字体名称。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-10-15T15:00:06.517

不确定这个答案是否对查看您发布问题的日期有用....但是为了帮助可能正在做这件事的人，

[self.homefeedbutton setTitle:@"o" forState:UIControlStateNormal]; [self.homefeedbutton.titleLabel setFont:[UIFont fontWithName:@"fontawesome" size:30]];

setTitle:@"o" o 是字体的名称，不要使用 unichar，而是将字体重命名为其他更可取的字母，例如，如果您查看 fontello.com ，选择图标，然后单击自定义代码选项卡，在你的图标顶部有一个小框，将其更改为任何字母....

喊的不够清楚，我会尝试用不同的方式解释。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-07-15T12:06:32.507

我用 swift 语言制作了一个库，可以轻松集成`UILabel`,`UIButton`和`UIBarButtonItem`. 还支持 Pod。[字体真棒斯威夫特](https://github.com/Vaberer/Font-Awesome-Swift)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-09-19T23:20:59.743

这可能对其他人有所帮助......我的项目中有大约 90% 的 Font Awesome 图标在工作，除了少数我无法让它们正确显示。他们会改为显示“...”图标。

在研究了 Objective-C 中的 unicode 字符几个小时后，我意识到我找错了树！“...” 不是 FontAwesome 图标，它是 UIKit 告诉我 UILabel 的框架太小/字体太大而无法显示文本字符串！哦。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-01-13T06:54:56.933

如果有人想知道，请在 .m 文件中导入以下内容。

```
import "NSString+FontAwesome.h" 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2014-09-27T18:17:41.383

FontAwesome 字体名称如下：FontAwesome

试试`[UIFont fontWithName:@"FontAwesome" size:8]]`。

观看此视频教程可能会有所帮助：http: [//youtu.be/J1EHAS0icv0](http://youtu.be/J1EHAS0icv0)。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2012-05-13T15:25:42.017

对于使用自定义字体，请确保您在 plist 和此处给出的字体名称具有相同的真实名称。我的意思是字体名称应该与通常具有的相同。不要尝试修改name.检查您使用的字体名称是否真的是该字体的名称。

谢谢桑杰

# jquery - 如何将 jQuery 与 CodeIgniter 结合起来？

> ID：10569880
> 
> 赞同：1
> 
> 时间：2012-05-13T06:56:21.550
> 
> 标签：jquery, codeigniter

嘿伙计们，我似乎有一点问题。当我尝试使用 jQuery 时，它不会一无所获。一切都链接得很好，jQuery 设置得很好，什么都没有。但是当我做一个简单的时候`$(document).ready(function(){});`，我看着控制台，我看到了这个

```
"Uncaught ReferenceError: $ is not defined" 
```

有人知道我会是什么吗？

我的代码看起来像这样

```
 <script type="text/javasript" src="<?=base_url()?>js/jquery.js"></script>
    <script type="text/javascipt" src="<?=base_url()?>js/jquery.alerts.js"></script>
    <script type="text/javascript">
        $(function(){
            alert(1);
        });
    </script> 
```

****** *** ****找到解决方案***** **** 我想通了，所有内容都已正确链接，但出于某种奇怪的原因，因为我将模板分别设置为页眉和页脚页面，它不起作用，所以我必须包含 jQuery在我正在使用的当前页面上手动（不包括页眉和页脚）。但它似乎工作正常。谢谢你们的帮助:)**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T07:01:25.607

您的页面中没有 jQuery！确保您的 html 如下所示：

```
<html>

    <head>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript">
            // we will add our javascript code here
        </script>
    </head>

    <body>
        <!-- we will add our HTML content here -->
    </body>

</html> 
```

jQuery 必须为你定制代码。

遵循本[教程](http://docs.jquery.com/Tutorials%3aGetting_Started_with_jQuery)，这会很有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-13T06:59:44.230

尝试使用 jquery.noConflict()

```
<script type="text/javascript">

      $.noConflict();
      jQuery(document).ready(function($) {
        // Code that uses jQuery's $ can follow here.
      });
      // Code that uses other library's $ can follow here.
</script> 
```**

# ruby-on-rails - spree_i18n 集成

> ID：10569887
> 
> 赞同：0
> 
> 时间：2012-05-13T06:58:24.363
> 
> 标签：ruby-on-rails, gem, rvm, bundler, spree

我正在尝试让 spree_i18n gem 工作，但我不太明白。

我已将此添加到 Gemfile： gem 'spree_i18n', :git => 'git://github.com/spree/spree_i18n.git' 我正在使用 RVM，因此将其捆绑安装到：~/.rvm/ gems/ruby-1.9.3-p125@spree/bundler/gems/spree_i18n-e5e3e189c843 而不是通常的位置：~/.rvm/gems/ruby-1.9.3-p125@spree/gems/ 所以我不是确定 RVM 是否在做一些奇怪的事情。

但是运行任何 rake spree_i18n:xxx 命令都会导致以下错误：'不知道如何构建任务'spree_i18n:new'

我猜这是因为宝石没有被 rake 和应用程序拾取。我在想该应用程序应该从 gem 文件夹中获取 .yml 翻译文件，因此我不需要将它们复制到主应用程序文件夹。

作为快速修复，我将 .yml 文件从 gem 文件夹复制到 app config/locales 文件夹。它有效，但绝对感觉像一个黑客。

有人可以指出正确的方向来正确整合这个宝石吗？

我也在这里发布了这个问题，以防万一有其他信息可能有助于解决这个问题。 [https://groups.google.com/forum/?hl=en&fromgroups#!topic/spree-user/6ycWGfm6eTk](https://groups.google.com/forum/?hl=en&fromgroups#!topic/spree-user/6ycWGfm6eTk)

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:06:38.917

在 github 上查看相关的已关闭问题

[https://github.com/spree/spree_i18n/issues/171](https://github.com/spree/spree_i18n/issues/171)

# tomcat - 当客户端调用 web 服务时，从 tomcat 发送自定义错误（不是错误页面）

> ID：10569889
> 
> 赞同：0
> 
> 时间：2012-05-13T06:58:55.167
> 
> 标签：tomcat, custom-error-handling

我正在使用 TOMCAT 服务器通过安全连接（SSL）开发 Java Web 服务。访问 Web 服务需要客户端身份验证。我们正在处理 Tomcat 级别的客户端身份验证。现在，如果客户端没有有效的 SSL 证书，那么他应该会收到自定义错误。现在有什么方法可以将自定义错误从 Tomcat 发送到客户端。我们不想要错误页面，我们只想要客户端身份验证案例的自定义错误。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T07:42:28.707

如果 SSL 连接需要客户端身份验证，则如果客户端证书无效，则 SSL 连接将失败。如果没有 SSL 连接，则不会有 HTTP 连接。如果没有 HTTP 连接，则没有 HTTP 请求。如果没有 HTTP 请求，则没有响应供您自定义。

简而言之，在连接到足以让您生成自定义错误页面之前很久就失败了。

# javascript - 为什么使用这种方法返回一个函数或值？

> ID：10569890
> 
> 赞同：1
> 
> 时间：2012-05-13T06:59:34.230
> 
> 标签：javascript, return

我只是想知道为什么我应该使用这种方法来返回一个函数：

```
clusters.prototype.get_local_storage_data = function(data_key) {
    return +(this.localStorage.getItem(data_key) || 1);
}; 
```

那里做什么`+()`以及为什么使用它？如果函数得到的是 null ，有没有更好的方法来返回函数或 1 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T07:03:13.450

使用`+`before 一个值会强制该值变成一个数字。在上述情况下，数据键将被转换为数字（如果找到），否则将返回数字 1。无论哪种方式，结果都将转换为数字。

```
+null;   // 0
+"3.14"; // 3.14
+1;      // 1 
```

它只是确保无论输出是什么，您都将返回一个`number`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T07:03:18.570

可以将`+`结果转换为数字 -

```
typeof +"123" // "number" 
```

它的实现方式看起来很好，不需要改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T07:03:28.690

这`+`只是确保返回值是一个数字，否则`1`将是`true`而不是第一。这是一个快捷方式：

```
Number( expression ) 
```

# algorithm - 计算两个节点之间的路径数

> ID：10569894
> 
> 赞同：0
> 
> 时间：2012-05-13T06:59:54.873
> 
> 标签：algorithm, math, data-structures, graph

王国连接

对于查尔斯国王来说，这是繁荣的一年，他正在迅速扩张他的王国。最近建造了一个美丽的新王国，在这个王国中有许多城市由多条单向道路连接。两个城市可能直接连接不止一条路，这是为了保证高连通性。

在这个新王国中，查尔斯国王将其中一个城市作为他的金融首都和一个作为战争首都，他希望这两个首都之间具有高度的连通性。一对城市的连通性说城市 A 和城市 B 被定义为从城市 A 到城市 B 的不同路径。如果可能，一条路径可能会多次使用一条道路。如果两条路径不使用完全相同的道路序列，则它们被认为是不同的。

新王国有N个城市，编号从1到N，单行路有M条。城市 1 是货币之都，城市 N 是战争之都。

作为新王国最好的程序员之一，你需要回答金融资本和战争资本的连通性，即从城市 1 到城市 N 的不同路径的数量。

输入说明：

第一行包含两个整数 N 和 M。

然后沿着M行，每行有两个整数x和y， 1<=x,y<=N ，表示从城市x到城市y有一条路。

输出说明：

打印从城市 1 到城市 N 的不同路径的数量以 1,000,000,000(10^9) 为模。如果有无限多不同的路径，则打印“INFINITE PATHS”（引号是为了清楚起见）。

样本输入：

5 5 1 2 2 4 2 3 3 4 4 5

样本输出：

2

样本输入：

5 5 1 2 4 2 2 3 3 4 4 5

样本输出：

无限路径

约束：

2<=N<=10,000(10^4)

1<=M<=1,00,000(10^5)

两个城市可能由两条以上的道路连接，在这种情况下，这些道路将被认为是不同的，以计算不同的路径

我用来解决问题的算法是：

1.  检测节点 n 是否可以从节点 1 到达。
2.  它不是那么所需的ans是0
3.  如果其可达，则通过从节点 0 执行 dfs 来查找图中是否有任何循环
4.  如果有循环，则打印 INFINITE PATHS
5.  如果没有循环使用递归计算所需的ans

    *   F(n) = 1
    *   F(0) = Sumofall F(x) 使得 x 与 0 相邻
    *   如果没有与 x 相邻的 x，则 F(x) = 0

我已将解决方案实施为：

```
#include <cstdio>
#include <vector>
#include <algorithm>
using namespace std;

vector<vector<pair<int, int> > > g;

int seen[10001] = {0};

int colour[10001] = {0};
bool has_cycle(int u) {
    colour[u] = 1;
    for(int i = 0; i < g[u].size(); i++) {
            if(colour[g[u][i].first]==1) return true;
            if(!colour[g[u][i].first])
            if(has_cycle(g[u][i].first)) return true;
    }
    colour[u] = 2;
    return false;
}

bool reachable(int u, int v) {
     if(u==v) return true;
     seen[u] = true;
     for(int i = 0; i < g[u].size(); i++) {
             if(!seen[g[u][i].first]) {
                                      if(reachable(g[u][i].first, v)) return true;
             }
     }
     return false;
}

long long mm[10001] = {0};
long long solve(int u, int n) {
     if(u==n) return mm[u]=1;
     if(mm[u]!=-2) return mm[u];
     long long ans = 0;
     for(int i = 0; i < g[u].size(); i++) {
             ans += ((g[u][i].second%1000000000)*(solve(g[u][i].first, n)%1000000000)%1000000000);
             ans %= 1000000000;
     }
     return mm[u]=ans;
}

long edge[100001];
int main() {
    int n, m;
    scanf("%d%d", &n, &m);

    g.resize(n);
    for(int i = 0; i < m; i++) {
            int x, y;
            scanf("%d%d", &x, &y);
            x--; y--;
            edge[i] = x*100000+y;
    }

    sort(edge, edge+m);
    edge[m] = -1;
    int last = edge[0];
    int cnt = 1;
    for(int i = 1; i <= m; i++) {
            if(edge[i]!=last || i==m) {
                              int u, v;
                              u = last/100000;
                              v = last%100000;
                              if(i!=0) {       
                                       g[u].push_back(make_pair(v, cnt));
                              }
                              cnt = 1;
            } else {
                   cnt++;
            }
            last = edge[i];
    }

    for(int i = 0; i < n; i++) mm[i] = -2;
    if(reachable(0, n-1)) {
      if(has_cycle(0)) printf("INFINITE PATHS\n");
      else 
      printf("%lld\n", solve(0, n-1)%1000000000);
    } else printf("0\n");
} 
```

我无法检测到这个算法的问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T07:35:08.560

数字 (3)+(4) 错误：

> 如果其可达，则通过从节点 0 执行 dfs 来查找图中是否存在任何循环。
> 
> 如果有循环，则打印 INFINITE PATHS

图中可能有一个循环，但如果从循环中无法到达目标，则所需的#paths 仍然是有限的数字。
示例：查找从 A 到 C 的#paths

```
A-->D<-->B
|
----->C 
```

在这里: `G=(V,E)`,`V = {A,B,C,D}`和`E = {(D,B),(B,D),(A,C),(A,D)}`

虽然从 (A->D->B->D) 可以到达一个循环，但是从到 的`A`路径只有一条。`A``C`

要查找从源到目标的路径中是否存在循环，可以创建一个新图`G'=(V',E')`，其中`V'= { v | there is a path in the original graph from v to target }`和`E' = V' x V' [intersection] E`（`E`仅减少到 的顶点`V'`），然后在 上运行 DFS/BFS `G'`。

另请注意，如果没有循环-根据定义，`G'`它是一个[DAG](http://en.wikipedia.org/wiki/Directed_acyclic_graph)`G'` ，因此从现在开始工作可能会简化查找#paths。（您还必须修剪从源无法到达的顶点，以确保它确实是 DAG）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T07:48:25.773

明显的错误。假设有一个循环，但没有从循环到第二个城市的路径。然后你会说有无数条路径，但路径的数量实际上可能是有限的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T03:23:12.717

你可以参考我的代码

```
#include <iostream>
#include <vector>
#include <set>
#include <stack>
#include <map>
#include <algorithm>
#include <iomanip>
#include <numeric>
#include "string.h"
#define MODE 1000000000
using namespace std;

int main () {
    vector<int> adj[10001], inv_adj[10001];
    int indegree[10001];
    int visited[10001];
    int ranks[10001];
    long long total[10001];
    int N, M;
    cin >> N >> M;

    memset(indegree, 0, (N+1)*sizeof(int));
    adj[0].push_back(1); 
    inv_adj[1].push_back(0);
    indegree[1] = 1;
    for (int i=0;i<M;i++)
    {
        int s, t;
        cin >> s >> t;
        adj[s].push_back(t);
        inv_adj[t].push_back(s);
        indegree[t]++;
    }

    stack<int> st;
    st.push(0);
    memset(visited, 0, (N+1)*sizeof(int));
    visited[0] = 1;
    while (!st.empty()) {
        int v = st.top();
        st.pop();

        for (int i=0;i<adj[v].size();i++)
            if (!visited[adj[v][i]])
            {
                st.push(adj[v][i]);
                visited[adj[v][i]] = 1;
            }
    }

    if(!visited[N])
    {
        cout << 0 << endl;
        return 0;
    }

    for (int i=1;i<=N;i++)
    {
        if(!visited[i]){
            for (int j=0;j<adj[i].size();j++)
                indegree[adj[i][j]]--;
        }
    }

    int count = 0;
    stack<int> topo;

    for (int i=0;i<=N;i++)
    {
        int j;
        for (j=0;j<=N;j++)
            if (visited[j] && indegree[j] ==0)
                break;
        if (j > N)
        {
            cout << "INFINITE PATHS" << endl;
            return 0;
        }
        else
        {
            topo.push(j);
            ranks[count++] = j;
            if (j == N)
                break;

            indegree[j] = -1;
            for (int k=0;k<adj[j].size();k++)
                indegree[adj[j][k]]--;
        }
    }

    memset(total, 0, (N+1)*sizeof(long long));
    total[N] = 1;
    for (int i=count - 1;i>=0;i--)
    {
        int r = ranks[i];
        for (int j=0;j<inv_adj[r].size();j++)
            if(visited[inv_adj[r][j]])
            {
                total[inv_adj[r][j]] = (total[inv_adj[r][j]] + total[r]) % MODE;
            }
    }
    cout << total[0] << endl;
    return 0;
} 
```

# jquery - jQuery 中的切换错误

> ID：10569895
> 
> 赞同：2
> 
> 时间：2012-05-13T07:00:05.370
> 
> 标签：jquery, vbulletin

我正在尝试在论坛 (vbulletin) 上创建一个剧透。它基本上是点击时的切换 div。一切正常，但是当在另一个切换 div 中放置一个切换 div 时，动画只会上下移动而不会停止。（它打开和关闭）

奇怪的是，当我在 jsfiddle 上测试它时，它工作正常。

在 vbulletin 上，jquery 代码被替换为 BBcode，如下所示

```
[spoiler] Text/Images [/spoiler] 
```

HTML

```
<div class="head">
    Click to show content
</div>
<div class="body" style="display:none;">   
    Content
    <div class="head">
        Click to show content
    </div>
    <div class="body" style="display:none;">   
        Content
    </div>
</div> 
```

jQuery

```
$(document).ready(function(){
    $('.head').click(function() {
        $(this).siblings('.body:first').toggle('slow')
    });
}); 
```

谁能想到一个解决方案？非常感谢任何帮助

这是另一个切换 div 中带有切换 div 的 jsfiddle [http://jsfiddle.net/9FP55/](http://jsfiddle.net/9FP55/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T07:08:02.167

使用您的嵌套`.head`'s with`.body`您将需要一个更复杂的选择器：

```
$("div[id^=post_message] > .head, .body > .head").on("click", function(){
  $(this).next().slideToggle("slow");
}); 
```

当然，更好的解决方案是不要一开始就产生这种歧义。

演示：http: [//jsbin.com/olizux/4/edit](http://jsbin.com/olizux/4/edit)

也许这只是一个错字，但您的代码不包含所需的`$`：

```
(document).ready(function(){
  /* Code here */
}); 
```

应该

```
$(document).ready(function(){
  /* Code Here */
}); 
```

或者干脆

```
$(function(){
  /* Code Here */
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T07:26:05.073

**尝试这个**

```
$(document).ready(function(){ 
$('.head').click(function() {
$(this).siblings('.body:first').stop(true,true).toggle('slow'); 
}); 
}); 
```

# sql - T-SQL：SUSER_SNAME 与 SUSER_NAME？

> ID：10569914
> 
> 赞同：29
> 
> 时间：2012-05-13T07:03:30.160
> 
> 标签：sql, sql-server, tsql

MSDN 文档说明了[SUSER_SNAME](https://msdn.microsoft.com/en-us/library/ms174427.aspx)函数：

> 从用户的安全标识号 (SID) 返回登录标识名称。

此外，它对[SUSER_NAME](https://msdn.microsoft.com/en-us/library/ms187934.aspx)函数说：

> 返回用户的登录标识名。

尽管如此，当我执行以下 SQL 语句时，我得到**了相同的结果**：

```
SELECT SUSER_NAME();
SELECT SUSER_SNAME(); 
```

那么，有什么区别，我应该使用哪一个？有没有一种情况我应该使用一种而不是另一种？

请指教，

提前致谢 ：）

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-13T08:51:15.553

如果您在没有参数的情况下调用该函数，它们都将返回相同的值。但他们确实采取了不同的论点：

*   SUSER_SNAME() 将`varbinary(85) SID`登录名作为参数
*   SUSER_NAME() 需要`integer principal_id`登录

您可以像这样验证：

```
select  suser_name(principal_id)
,       suser_name(sid)
,       suser_sname(principal_id)
,       suser_sname(sid)
from    sys.server_principals 
where   name = suser_name() 
```

只有第一列和最后一列将返回非空值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-13T18:44:40.173

SUSER_NAME() 将返回与 sys.server_principals 中存在的 sid 关联的名称。sid 必须存在于 sys.server_principals 中。

SUSER_SNAME() 可以做到这一点，但如果登录名是活动目录组的成员，也可以返回登录名的 sid

因此，如果您在 Active Directory 中有 [CONTOSO\MyGroup] 并且该组有一个用户 [CONTOSO\MyUser]

然后将该组添加到 SQL Server： CREATE LOGIN [CONTOSO\MyGroup] FROM WINDOWS;

选择 SUSER_ID('CONTOSO\MyUser')、SUSER_SID('CONTOSO\MyUser')

会给你 NULL, CONTOSO\MyUser 因为 CONTOSO\MyUser 不在 sys.server_principals 但在 A/D

# c# - url 中的日期，当我转到水晶报告的下一页（第 2 或第 3 等）时，将 / 转换为 %2f

> ID：10569915
> 
> 赞同：0
> 
> 时间：2012-05-13T07:04:39.910
> 
> 标签：c#, asp.net, crystal-reports-2008

我在查询字符串中传递日期，对使用此日期返回数据集的数据库进行查询，然后我只是将此数据表绑定到我的报告..evry 事情好..但是当我按下导航按钮（下一步）时错误（加载报告失败）我猜它是由于 url 中的日期转换为 %2f。
谁能告诉我解决方法...

我的网址是（在第一次加载报告时效果很好）

```
http://localhost:8186/Report.aspx?RptType=1&fromdate=5/1/2012&todate=5/31/2012 
```

当我点击下一步时，网址变成了

```
http://localhost:8186/Report.aspx?RptType=1&fromdate=5%2f1%2f2012&todate=5%2f31%2f2012 
```

我的代码是：

```
 string fromdate = Request.QueryString.Get("fromdate");
 string todate = Request.QueryString.Get("todate");

Dataset ds = sbg_JobSeeker.GetJobSeakerDetailInfo(fromdate, todate);
ds.Tables[0].TableName = "sbg_JobSeeker";
            reportSource.ReportDocument.Load(path + "Applicants.rpt");
            reportSource.ReportDocument.SetDataSource(ds.Tables[0]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T07:56:28.023

我发现它是我自己..：P 我只是发送我的查询字符串，如

```
txtDateFrom.Text.Replace('/', '-') + "&todate=" + txtDateTo.Text.Replace('/', '-')
http://localhost:8186/Report.aspx?RptType=1&fromdate=5-1-2012&todate=5-31-2012 
```

它现在对我来说很好..:)

# c# - 发送大量 POST 数据

> ID：10569917
> 
> 赞同：0
> 
> 时间：2012-05-13T07:04:42.627
> 
> 标签：c#, http, post

所以我正在制作一个程序，您可以在其中输入一些信息。一部分信息需要大量文本，我们说的是 100 多个字符。我发现当数据很大时，它根本不会发送数据。这是我正在使用的代码：

```
 public void HttpPost(string URI, string Parameters)
    {
        // this is what we are sending
        string post_data = Parameters;

        // this is where we will send it
        string uri = URI;

        // create a request
        HttpWebRequest request = (HttpWebRequest) WebRequest.Create(uri); 
        request.KeepAlive = false;
        request.ProtocolVersion = HttpVersion.Version10;
        request.Method = "POST";

        // turn our request string into a byte stream
        byte[] postBytes = Encoding.ASCII.GetBytes(post_data);

        // this is important - make sure you specify type this way
        request.ContentType = "application/x-www-form-urlencoded";
        request.ContentLength = postBytes.Length;
        Stream requestStream = request.GetRequestStream();

        // now send it
        requestStream.Write(postBytes, 0, postBytes.Length);
        requestStream.Close();
    } 
```

然后我像这样调用该方法：

```
 HttpPost(url, "data=" + accum + "&pass=HRS"); 
```

'accum' 是我发送的大量数据。如果我发送少量数据，此方法有效。但是当它很大时，它不会发送。有没有办法向我网站上的 .php 页面发送超过 100 多个字符的发布请求？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T07:13:06.823

你*只是*在打电话`GetRequestStream`。这不会发出请求 - 默认情况下它将缓冲在内存中，IIRC。

您需要调用`WebRequest.GetResponse()`以实际向 Web 服务器发出请求。

因此，将代码的结尾更改为：

```
 // Using statement to auto-close, even if there's an exception
 using (Stream requestStream = request.GetRequestStream())
 {
     requestStream.Write(postBytes, 0, postBytes.Length);
 }

 // Now we're ready to send the data, and ask for a response
 using (WebResponse response = request.GetResponse())
 {
     // Do you really not want to do anything with the response?
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-09T18:01:08.643

我正在使用这种方式在请求中发布 JSON 数据，我想这有点不同，但它可能会起作用，

```
httpWebRequest = (HttpWebRequest)WebRequest.Create(RequestURL);
httpWebRequest.ContentType = "application/json";
                httpWebRequest.Accept = "application/json";
                httpWebRequest.Method = "POST";
String username = "UserName";
String password = "passw0rd";
String encoded = System.Convert.ToBase64String(System.Text.Encoding.GetEncoding("ISO-8859-1").GetBytes(username + ":" + password));
httpWebRequest.Headers.Add("Authorization", "Basic " + encoded);
 using (StreamWriter sw = new StreamWriter(httpWebRequest.GetRequestStream()))
                {
                    string json = "{" +
                                    "\"user\":[ \"" + user + "\"] " +
                                    "}";
                    sw.Write(json);
                    sw.Flush();
                    sw.Close();
                }
using (HttpWebResponse httpResponse = (HttpWebResponse)httpWebRequest.GetResponse())
                {

                    //var httpResponse = (HttpWebResponse)httpWebRequest.GetResponse();
                    using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
                    {
                        var responseText = streamReader.ReadToEnd();
                        //Now you have your response.
                        //or false depending on information in the response
                    }

                    httpResponse.Close();
                } 
```

# java - 为什么有些java对象不能获取值引用

> ID：10569919
> 
> 赞同：-1
> 
> 时间：2012-05-13T07:04:51.390
> 
> 标签：java

> **可能重复：**
> [Java 是否通过引用传递？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

当我使用一些Java类（如（整数，文件，布尔））时，如果我将实例作为参数传递给函数并在我在函数外部使用此值后尝试更改其值，则该值保持不变。

例如：

```
private void run(){
        File tmpFile;
        setFile(tmpFile);
        System.out.println(tmpFile.getAbsolutePath());  //error tmpFile is null
    }

private void setFile(File xFile){
    xFile = jFileChooser.getSelectedFile();  // this returned object file
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T07:14:30.453

简短的回答是 Java 使用按值调用，而不是按引用调用。

在您的`setFile`方法中，您的分配`xFile`仅更改局部变量。它不会更改方法`tmpFile`中的变量`run()`。

您应该编写代码以便`setFile`返回一个值；例如

```
 private void run(){
        File tmpFile = getFile();
        System.out.println(tmpFile.getAbsolutePath());
    }

    private File getFile() {
        return jFileChooser.getSelectedFile();
    } 
```

（注意：我更改了方法名称，因为调用的方法`setXXX`实际上并没有设置任何内容，这是无缘无故的误导。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T07:13:44.197

Java 总是按值传递。你不应该期待任何其他行为。

方法只能在传递引用时更改对象（引用仍然是按值传递）

# php - Facebook PHP SDK - 将用户数据存储到 MYSql 数据库中

> ID：10569922
> 
> 赞同：5
> 
> 时间：2012-05-13T07:05:32.097
> 
> 标签：php, mysql, facebook

我对 PHP 和 MySQL 完全陌生，但我正在我的网站中实现 Facebook PHP SDK。到目前为止一切正常，但我正在努力将用户数据添加到我的数据库（MySQL）中。我所拥有的一切都是一个数字，而不是用户名和 oauth_uid（我得到两个字段的数字 5）。这是代码：

```
 <?php
  define('db_user','myUserName');
  define('db_password','myPassword');
  define('db_host','myHost');
  define('db_name','myDbName');

  // Connect to MySQL
  $dbc = @mysql_connect (db_host, db_user, db_password) OR die ('Could not connect to  MySQL: ' . mysql_error() );
    // Select the correct database
   mysql_select_db (db_name) OR die ('Could not select the database: ' . mysql_error() );

    require 'lib/facebook.php';

  // Create our Application instance (replace this with your appId and secret).
  $facebook = new Facebook(array(
  'appId'  => 'MYAPPID',
  'secret' => 'MYSECRET',
      'cookie' => true));

    // Get User ID
     $user = $facebook->getUser();

    // We may or may not have this data based on whether the user is logged in.
   //
  // If we have a $user id here, it means we know the user is logged into
 // Facebook, but we don't know if the access token is valid. An access
 // token is invalid if the user logged out of Facebook.

   if ($user) {
    try {
    // Proceed knowing you have a logged in user who's authenticated.
    $fbuid = $facebook->getUser();
     $user_profile = $facebook->api('/me');

       } catch (FacebookApiException $e) {
       error_log($e);
       $user = null;
       }
         }else{
       header('Location: index.php');

        }
          $query = mysql_query("SELECT * FROM users WHERE oauth_provider = 'facebook' AND     oauth_uid = ". $user['id']);  
          $result = mysql_fetch_array($query);  

        if(empty($result)){ 
          $query = mysql_query("INSERT INTO users (oauth_provider, oauth_uid, username)         VALUES ('facebook', {$user['id']}, '{$user['name']}')");  
           $query = msyql_query("SELECT * FROM users WHERE id = " . mysql_insert_id());  
          $result = mysql_fetch_array($query);  
           }  

       // Login or logout url will be needed depending on current user state.
        if ($user) {
         $paramsout = array('next'=>'http://www.mywebsite.com/test/logout.php');
         $logoutUrl = $facebook->getLogoutUrl($paramsout);
         }

         ?> 
```

上面的页面称为 user_page.php ，它是用户在登录后被重定向到的地方。我试图将“数据库”代码移动到 index.php （用户登录的地方），但到目前为止一切努力都没有成功。这是 index.php 的代码：

```
require 'lib/facebook.php';

// Create our Application instance (replace this with your appId and secret).
  $facebook = new Facebook(array(
   'appId'  => 'MYAPPID',
   'secret' => 'MYSECRET',
       'cookie' => true));

    // Get User ID
    $user = $facebook->getUser();

    if ($user) {
    try {
      // Proceed knowing you have a logged in user who's authenticated.
      $fbuid = $facebook->getUser();
      $user_profile = $facebook->api('/me');

      header('Location: user_page.php');

      } catch (FacebookApiException $e) {
      error_log($e);
     $user = null;
    }
     }

     // Login or logout url will be needed depending on current user state.
     if ($user) {
      $logoutUrl = $facebook->getLogoutUrl();

     } else {

        $loginUrl = $facebook->getLoginUrl(Array('scope'=>    'user_interests,user_activities,user_education_history,user_likes,user_about_me,   user_birthday, user_groups, user_hometown, user_work_history, email',
          'redirect_uri' => 'http://www.mywebpage.com/test/user_page.php')
          );
          }

          ?> 
```

***更新********问题已修复（$user_profile 而不仅仅是 $user）：

```
 $query = mysql_query("SELECT * FROM users WHERE oauth_provider = 'facebook' AND  oauth_uid = ". $user_profile['id']);  
   $result = mysql_fetch_array($query);  

  if(empty($result)){ 
  $query = mysql_query("INSERT INTO users (oauth_provider, oauth_uid, username) VALUES    ('facebook', {$user_profile['id']}, '{$user_profile['name']}')");  
  $query = msyql_query("SELECT * FROM users WHERE id = " . mysql_insert_id());  
  $result = mysql_fetch_array($query);  
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T07:11:01.457

您代码中的 Facebook 用户数据存储在`$user_profile`而不是`$user`.

# java - 关于 Math.floor(Double.MIN_VALUE)

> ID：10569923
> 
> 赞同：-5
> 
> 时间：2012-05-13T07:05:35.637
> 
> 标签：java

为什么是 Math.floor(Double.MIN_VALUE) == 0 ？任何人都可以向我发送 Floor 函数的 java algorithme 或者至少解释一下这个结果吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-13T07:07:58.570

[`Double.MIN_VALUE`](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#MIN_VALUE)并不意味着你认为它意味着什么。它的意思是“最小的正值`double`”——所以很自然地，当你取它的“下限”（小于或等于该值的最大整数）时，你会得到 0。文档：

> 一个保持双精度类型的最小正非零值 2 ^(-1074)的常数。它等于十六进制浮点文字 0x0.0000000000001P-1022，也等于 Double.longBitsToDouble(0x1L)。

我同意这个名称令人困惑，但一旦你看到令人困惑的行为，总是值得检查文档。

如果您想获得“最低”的有限`double`，只需使用`-double.MAX_VALUE`.

# javascript - 为什么表的 td node.appendChild 不起作用？

> ID：10569935
> 
> 赞同：0
> 
> 时间：2012-05-13T07:08:22.780
> 
> 标签：javascript, html

我有这个 JavaScript 函数来创建一个包含图像单元格的表格：

```
 function Draw(array) {
        // get the reference for the body
        var body = document.getElementsByTagName("body")[0];
        document.clear();

        // creates a <table> element and a <tbody> element
        var tbl = document.createElement("table");
        tbl.setAttribute("borderstyle", "1");
        var tblBody = document.createElement("tbody");

        // creating all cells
        for (var j = 0; j < 4; j++) {
            // creates a table row
            var row = document.createElement("tr");

            for (var i = 0; i < 4; i++) {
                // Create a <td> element and a text node, make the text
                // node the contents of the <td>, and put the <td> at
                // the end of the table row
                var cell = document.createElement("td");
                var cellText = document.createElement(array[4 * j + i]);
                cell.appendChild(cellText);
                row.appendChild(cell);
            }

            // add the row to the end of the table body
            tblBody.appendChild(row);
        }

        // put the <tbody> in the <table>
        tbl.appendChild(tblBody);
        // appends <table> into <body>
        body.appendChild(tbl);
        // sets the border attribute of tbl to 2;
        tbl.setAttribute("border", "2");
    } 
```

但在

```
var cellText = document.createElement(array[4 * j + i]);
cell.appendChild(cellText);
row.appendChild(cell); 
```

不起作用`cell.appendChild(cellText);`！我不知道为什么，我不知道如何解决它！

**更新** 一个数组是这样的：

```
 var a = Array(16);
    for (var i = 0; i < 16; i++) {
        a[i] = '<img src="' + i + '.jpg" />';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T07:10:32.137

**更新的答案**

回复您的评论：

> 它只是放了一个文本。这意味着我看到的`<img src ...`不是图像的文字！

如果您告诉我们`array[4 * j + i]`包含*标记*（例如，在问题中包含它的示例），那将会很有用。

如果数组包含*markup*，您不想创建任何类型的新节点。相反，分配给`innerHTML`表格单元格：

```
cell.innerHTML = array[4 * j + i];
row.appendChild(cell); 
```

当您分配给 时`innerHTML`，浏览器会解析标记并将相关内容添加到元素中。

* * *

**在下面的评论和之前`array`的内容之前给出了**原始答案：****

 **要创建文本节点，请使用[`createTextNode`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1975348127)，而不是`createElement`。所以：

```
// Change here ---------v
var cellText = document.createTextNode(array[4 * j + i]);
cell.appendChild(cellText);
row.appendChild(cell); 
```

假设`array[4 * j + i]`是`"Hi there"`。您的`document.createElement(array[4 * j + i])`调用是要求 DOM 创建一个带有标签名称的*元素*`Hi there`，这正是`document.createElement('div')`要求它创建一个带有标签名称的元素的方式`div`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T07:45:49.407

为了完整起见，如果您更喜欢使用 appendChild() 而不是 innerHTML 属性，这里有一些其他替代方案可以替代已[接受的解决方案。](https://stackoverflow.com/a/10569943/365237)

你也可以做到

```
var a = Array(16);
for (var i = 0; i < 16; i++) {
    a[i] = document.createElement('img');
    a[i].setAttribute('src', i + '.jpg');
} 
```

它也会起作用。此外，您可以创建一个 Image 对象：

```
var a = Array(16);
for (var i = 0; i < 16; i++) {
    a[i] = new Image();
    a[i].src = i + '.jpg';
} 
```

并且 appendChild 应该仍然有效。

另一种可用但完全不同的方法是使用 javascript 框架，例如 jQuery 及其功能。但是，这将需要重写您拥有的代码。**

# sql - 链接服务器登录失败

> ID：10569936
> 
> 赞同：2
> 
> 时间：2012-05-13T07:08:24.360
> 
> 标签：sql, sql-server, sql-server-2000

如何创建链接服务器...？

```
1st Server name is ABC.DATABASE1
2nd server name is EFG.DATABASE2 
```

EFG 数据库用户名是`sa`密码是`sa`

我想从第二台服务器到第一台服务器检索数据

在第一台服务器中，我执行这样的存储过程....

```
exec sp_linkedserver 'EFG' 
```

成功执行，

当我试图检索数据时，它显示错误为“ `login failed for user sa, Reason: Not associated with trusted sql server connection`”

如何解决这个问题呢...

需要帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T07:39:41.333

在 Microsoft SQL Server Management Studio 中，检查“*安全”选项卡上链接服务器属性的登录配置，并为您的本地`sa`帐户创建映射远程登录或为所有连接配置替代登录。

要通过执行创建具有登录映射的链接服务器`sp_linkedserver`，请尝试

```
sp_addlinkedsrvlogin @rmtsrvname = N'EFG', @locallogin = N'sa', @useself = N'False', 
                     @rmtuser = N'your_remote_user', @rmtpassword = N'remotepassword' 
```

要使用备用登录创建链接服务器，请尝试

```
sp_addlinkedsrvlogin @rmtsrvname = N'EFG', @locallogin = NULL , @useself = N'False', 
                     @rmtuser = N'your_remote_user', @rmtpassword = N'remotepassword' 
```

# java - 播放铃声 uri 时出错

> ID：10569941
> 
> 赞同：0
> 
> 时间：2012-05-13T07:09:25.910
> 
> 标签：java, android

我正在尝试在电池充满电时播放铃声。为了实现这一点，我做了一项服务。当我第一次执行我的代码时它工作然后第二次它没有并且我在我的 logcat 中不断收到这些错误。

```
05-13 10:03:13.925: D/dalvikvm(26079): GC_EXTERNAL_ALLOC freed 25K, 49% free   2788K/5379K, external 518K/518K, paused 29ms
05-13 10:03:13.985: D/CLIPBOARD(26079): Hide Clipboard dialog at Starting input: finished by someone else... !
05-13 10:03:16.210: D/AndroidRuntime(26079): Shutting down VM
05-13 10:03:16.210: W/dalvikvm(26079): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
05-13 10:03:16.215: E/AndroidRuntime(26079): FATAL EXCEPTION: main
05-13 10:03:16.215: E/AndroidRuntime(26079): java.lang.RuntimeException: Error receiving broadcast Intent { act=android.intent.action.BATTERY_CHANGED flg=0x60000000 (has extras) } in com.zafar.batterynotify.BatteryService$1@4053f718
05-13 10:03:16.215: E/AndroidRuntime(26079):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:722)
05-13 10:03:16.215: E/AndroidRuntime(26079):    at android.os.Handler.handleCallback(Handler.java:587)
05-13 10:03:16.215: E/AndroidRuntime(26079):    at android.os.Handler.dispatchMessage(Handler.java:92)
05-13 10:03:16.215: E/AndroidRuntime(26079):    at android.os.Looper.loop(Looper.java:130)
05-13 10:03:16.215: E/AndroidRuntime(26079):    at android.app.ActivityThread.main(ActivityThread.java:3691)
05-13 10:03:16.215: E/AndroidRuntime(26079):    at java.lang.reflect.Method.invokeNative(Native Method)
05-13 10:03:16.215: E/AndroidRuntime(26079):    at java.lang.reflect.Method.invoke(Method.java:507)
05-13 10:03:16.215: E/AndroidRuntime(26079):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
05-13 10:03:16.215: E/AndroidRuntime(26079):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
05-13 10:03:16.215: E/AndroidRuntime(26079):    at dalvik.system.NativeStart.main(Native Method)
05-13 10:03:16.215: E/AndroidRuntime(26079): Caused by: java.lang.NullPointerException: uriString
05-13 10:03:16.215: E/AndroidRuntime(26079):    at android.net.Uri$StringUri.<init>(Uri.java:420)
05-13 10:03:16.215: E/AndroidRuntime(26079):    at android.net.Uri$StringUri.<init>(Uri.java:410)
05-13 10:03:16.215: E/AndroidRuntime(26079):    at android.net.Uri.parse(Uri.java:382)
05-13 10:03:16.215: E/AndroidRuntime(26079):    at com.zafar.batterynotify.BatteryService$1.onReceive(BatteryService.java:49)
05-13 10:03:16.215: E/AndroidRuntime(26079):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:709)
05-13 10:03:16.215: E/AndroidRuntime(26079):    ... 9 more 
```

根据 logcat 错误在某处`Uri uri = Uri.parse(alarms);`。

这是我的服务类代码

```
public class BatteryService extends Service {
Notify notification = new Notify();
BatteryAlarm alarm = new BatteryAlarm();
private MediaPlayer mMediaPlayer;

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    notification.initNotification(this);
    this.registerReceiver(this.mBatInfoReceiver, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));

    Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
    return START_STICKY;
}

private BroadcastReceiver mBatInfoReceiver = new BroadcastReceiver(){
    @Override
    public void onReceive(Context c, Intent i) {

        int level = i.getIntExtra(BatteryManager.EXTRA_LEVEL, 0);
        int plugged = i.getIntExtra(BatteryManager.EXTRA_PLUGGED, 0);

        SharedPreferences getAlarm = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
        String alarms = getAlarm.getString("ringtones", null);
        Uri uri = Uri.parse(alarms);

        if(plugged == 2) {

            if(level < 100) {

                if(uri != null) {
                    playAlarm(c, uri);
                }
                //CharSequence t = (CharSequence) uri;
                //Toast.makeText(c, "Set", Toast.LENGTH_LONG).show();

            }

        } else if (plugged == 0) {
            if(uri != null) {
                stopAlarm();
            }
            Toast.makeText(c, "Unplugged", Toast.LENGTH_LONG).show();

        }
    }
};

private void playAlarm(Context c, Uri uri) {
    //Uri uri = Uri.parse(uri);
    mMediaPlayer = new MediaPlayer();
    try {
        mMediaPlayer.reset();
        mMediaPlayer.setDataSource(getBaseContext(), uri);
        final AudioManager audioManager = (AudioManager) c.getSystemService(Context.AUDIO_SERVICE);
        if (audioManager.getStreamVolume(AudioManager.STREAM_ALARM) != 0) {
            mMediaPlayer.setAudioStreamType(AudioManager.STREAM_ALARM);
            mMediaPlayer.prepare();
            mMediaPlayer.start();
        }
    } catch (Exception ex) {
        ex.printStackTrace();
        onDestroy();
    }
}

private void stopAlarm() {
    mMediaPlayer.stop();
    onDestroy();
}

public void onDestroy() {
    super.onDestroy();
    notification.cancelNotification(this);
    unregisterReceiver(this.mBatInfoReceiver);
    Toast.makeText(this, "Service Stopped", Toast.LENGTH_LONG).show();
}

} 
```

请帮帮我。我在哪里犯了错误，因此我不断收到这些错误

**添加 Log.d("TAG", alarms) 后的 Logcat**

```
05-13 10:29:43.450: D/AndroidRuntime(28062): Shutting down VM
05-13 10:29:43.450: W/dalvikvm(28062): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
05-13 10:29:43.455: E/AndroidRuntime(28062): FATAL EXCEPTION: main
05-13 10:29:43.455: E/AndroidRuntime(28062): java.lang.RuntimeException: Error receiving broadcast Intent { act=android.intent.action.BATTERY_CHANGED flg=0x60000000 (has extras) } in com.zafar.batterynotify.BatteryService$1@40547e78
05-13 10:29:43.455: E/AndroidRuntime(28062):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:722)
05-13 10:29:43.455: E/AndroidRuntime(28062):    at android.os.Handler.handleCallback(Handler.java:587)
05-13 10:29:43.455: E/AndroidRuntime(28062):    at android.os.Handler.dispatchMessage(Handler.java:92)
05-13 10:29:43.455: E/AndroidRuntime(28062):    at android.os.Looper.loop(Looper.java:130)
05-13 10:29:43.455: E/AndroidRuntime(28062):    at android.app.ActivityThread.main(ActivityThread.java:3691)
05-13 10:29:43.455: E/AndroidRuntime(28062):    at java.lang.reflect.Method.invokeNative(Native Method)
05-13 10:29:43.455: E/AndroidRuntime(28062):    at java.lang.reflect.Method.invoke(Method.java:507)
05-13 10:29:43.455: E/AndroidRuntime(28062):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
05-13 10:29:43.455: E/AndroidRuntime(28062):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
05-13 10:29:43.455: E/AndroidRuntime(28062):    at dalvik.system.NativeStart.main(Native Method)
05-13 10:29:43.455: E/AndroidRuntime(28062): Caused by: java.lang.NullPointerException: println needs a message
05-13 10:29:43.455: E/AndroidRuntime(28062):    at android.util.Log.println_native(Native Method)
05-13 10:29:43.455: E/AndroidRuntime(28062):    at android.util.Log.d(Log.java:137)
05-13 10:29:43.455: E/AndroidRuntime(28062):    at com.zafar.batterynotify.BatteryService$1.onReceive(BatteryService.java:51)
05-13 10:29:43.455: E/AndroidRuntime(28062):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:709)
05-13 10:29:43.455: E/AndroidRuntime(28062):    ... 9 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T07:16:36.543

我怀疑这是问题所在：

```
String alarms = getAlarm.getString("ringtones", null);
Uri uri = Uri.parse(alarms); 
```

它看起来`alarms`仍然是空的——所以大概在共享首选项中没有“铃声”字符串。

首先，您应该验证是这种情况（`alarms`在尝试解析之前记录），然后找出不存在预期偏好的原因。

# objective-c - 未声明的方法错误目标 C IOS

> ID：10569948
> 
> 赞同：1
> 
> 时间：2012-05-13T07:11:35.817
> 
> 标签：objective-c, ios, methods

我是 Obejctive C 的新手，所以如果这是一个简单的问题，请原谅我。我正在尝试使以下代码正常工作（来自 Facebook IOS 集成教程），但在线时出现错误

```
- (void) logoutButtonClicked:(id)sender {
    [facebook logout]; 
```

我得到错误

“使用未声明的标识符” logoutButtonClicked。我知道这是说我正在实现一个未定义的方法。所以我的问题是，下面代码中定义的方法在哪里？

我在这里看到了一个解决方案，但它对我不起作用，这个错误仍然存​​在。我已经尝试过尝试修复的替代方法，但是请有人确认这段代码在做什么。

我的理解是，我们首先创建一个指向 UIButton 的指针（logoutButton），然后设置它的参数。然后，我们使用选择器为 UIControlEventTouchInside 方法定义操作消息 (LogoutButtonClicked)。

我不完全理解该方法是如何声明的，因为我认为这里的行是定义实例方法：

```
-(void) logoutButtonClicked:(id)sender {
        [facebook logout]; 
```

或者是在声明的方法

```
[logoutButton addTarget:self action:@selector(logoutButtonClicked)
           forControlEvents:UIControlEventTouchUpInside];

// Add the logout button
    UIButton *logoutButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    logoutButton.frame = CGRectMake(40, 40, 200, 40);
    [logoutButton setTitle:@"Log Out" forState:UIControlStateNormal];
    [logoutButton addTarget:self action:@selector(logoutButtonClicked)
           forControlEvents:UIControlEventTouchUpInside];
    [self.viewController.view addSubview:logoutButton];
    // Method that gets called when the logout button is pressed
    - (void) logoutButtonClicked:(id)sender {
        [facebook logout];
    } 
```

我真的很感谢有人在这方面的帮助，一直在努力理解这一点无济于事。

梅尔文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T07:16:55.020

冒号是选择器名称的一部分：

```
@selector(logoutButtonClicked:)
                             ^ 
```

**不是**

```
@selector(logoutButtonClicked) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T07:48:19.140

您似乎在另一个方法的中间定义了一个方法。你不能那样做。这些行：

```
- (void) logoutButtonClicked:(id)sender {
    [facebook logout];
} 
```

必须出现在任何其他方法之外，而不是在其他方法的花括号 ( `{`... `}`) 内。

# java - 如何强制转换相同加载的不同类加载器的两个实例？

> ID：10569952
> 
> 赞同：9
> 
> 时间：2012-05-13T07:13:23.713
> 
> 标签：java, tomcat, web-applications, classcastexception

我有两个不同的网络应用程序，每个应用程序都使用不同的类加载器加载相同的 A 类。当我将一个实例放入会话中，然后从另一个 web 应用程序中获取它时，`ClassCastException`会抛出 a。

例如，在 webapp A 中，我存储`a`在会话中，然后在 webapp B 中，我`a`从会话中获取并将其转换为 A，然后`ClassCastException`抛出。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T07:24:37.873

> 有没有办法解决这个问题？

基本上没有。

就 JLS 而言，类型是不同的类型，JVM 不会允许您假装其他类型。例如，这些类*可能*有不同的代码和不同的对象布局。如果您可以欺骗 JVM 将类型视为相同，您将能够吹走 JVM 运行时安全性。那就是精神错乱。

解决方案是确保您没有两个不同的类加载器加载同一个类。在 Tomcat 的上下文中，这意味着如果两个或多个 webapps 需要共享一个类的实例，那么该类必须在两者都通用的类加载器中定义；例如，将 JAR 文件放在`$CATALINA_HOME/lib`or`$CATALINA_HOME/common`目录中。

* * *

如果由于技术原因*必须*由不同的类加载器加载类（可能是因为类确实不同），那么您可以通过定义两个版本的类都实现的接口来解决该问题，然后编程到接口而不是实现类。当然，接口需要由共享类加载器加载……否则你会再次遇到同样的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T07:20:30.913

基本上，您应该避免这种情况 - 要么将这两种功能放在同一个 webapp 中，要么将包含类 A 的库移动到适当的位置，以便只使用一个类加载器。由不同类加载器加载的两个类在 JVM 中是完全不同的——您根本*无法*在它们之间进行转换。

有关使用的各种类加载器的更多详细信息，请参阅[Tomcat 类加载器文档](http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html)。看起来您希望将此公共类放入公共类加载器区域。正如文档所述，这很不寻常，但如果你*真的*想在两个 web 应用程序之间共享一个对象（这*也*很不寻常），这可能是最简单的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T08:23:18.940

你不能。不同类加载器加载的两个类是不同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-31T06:38:50.013

也许您可以序列化共享对象？

我不一定提倡这种方法，但是这就是序列化本质上所做的——你从一些 JVM 或 ClassLoader **X**序列化并将其加载（反序列化）到另一个 JVM/ClassLoader **Y** ...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-23T23:59:34.153

即使类具有相同的包名称和签名，您也不​​能从不同的类中转换两个对象，但是您可以简单地使用 apache bean utils 库将数据从一个复制到另一个，`BeanUtils.copyProperties(o1, o2);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-27T05:14:48.390

这可以通过一种解决方法来实现。

虽然确实不能将对象从类加载器 A 加载的一个类转换为类加载器 B 加载的同一个类（如果在不同的类加载器下加载，同名的类不兼容，如此处[所述](https://stackoverflow.com/questions/826319/classcastexception-when-casting-to-the-same-class)），在 webapp 容器中例如 Jetty 或 Tomcat，您可以在父类加载器中加载该类一次，该类将被 JVM 中的所有 webapps 使用。每个 webapp 类加载器都将遵循类定义的共享（父）类加载器，并且来回转换它就可以了。

例如，对于 Jetty，请`WebAppContext.addSystemClass()`按照[此处](https://stackoverflow.com/a/8011651/1287091)所述使用。

# c# - ResolveClientUrl 在不指向域根目录的虚拟目录中

> ID：10569955
> 
> 赞同：0
> 
> 时间：2012-05-13T07:13:47.370
> 
> 标签：c#, asp.net, iis, virtual-directory

我有一个包含以下虚拟目录的网站，每个目录都配置为应用程序根目录：

1.  _root/网站1
2.  _root/网站2
3.  _root/网站3

它们每个都有自己的指向域：

1.  [www.website1.com](http://www.website1.com)
2.  [www.website2.com](http://www.website2.com)
3.  [www.website3.com](http://www.website3.com)

当我在**website1 调用 ResolveClientUrl("~/Default.aspx")**时，它返回：

> /website1/Default.aspx

这是正确的，但浏览器随后会将用户指向：

> [http://www.website1.com/website1/Default.aspx](http://www.website1.com/website1/Default.aspx)

这是错误的，它应该指向：

> [http://www.website1.com/Default.aspx](http://www.website1.com/Default.aspx)

我明白为什么会发生这种情况，我想知道是否有一些工作可以告诉我的应用程序忽略虚拟目录并假设它位于网站的根目录中，在这种情况下是域的根目录？也许覆盖 ResolveClientUrl 并添加一个标志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T15:22:48.303

您可以使用以下代码：

string.Format(Request.IsSecureConnection ? "https://{0}{1}" : "http://{0}{1}", Request.Url.Host, Page.ResolveUrl("~/default.aspx "));

# django - 使用 Django 查询集在列中搜索多个单词

> ID：10569960
> 
> 赞同：3
> 
> 时间：2012-05-13T07:14:27.080
> 
> 标签：django, django-queryset

我有一个自动完成框，它需要返回具有输入单词的结果。然而，输入词可以是部分的并且位于不同的顺序或位置。

**例子：**

数据库列（MySQL）中的值-

```
Expected quarterly sales
Sales preceding quarter
Profit preceding quarter
Sales 12 months 
```

现在，如果用户键入`quarter sales`，那么它应该返回前两个结果。

我试过：

```
column__icontains = term  #searches only '%quarter sales% and thus gives no results
column__search = term  #searches any of complete words and also returns last result
**{'ratio_name__icontains':each_term for each_term in term.split()}   #this searches only sales as it is the last keyword argument 
```

通过正则表达式的任何技巧或者可能是我在 Django 中缺少的东西，因为这是一种常见的模式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T11:04:59.613

搜索引擎更适合这项任务，但您仍然可以使用基本代码来完成。如果您正在寻找包含“A”和“B”的字符串，您可以

```
Model.objects.filter(string__contains='A').filter(string__contains='B') 
```

或者

```
Model.objects.filter(Q(string__contains='A') & Q(string__contains='B')) 
```

但实际上，您最好使用配置很少的简单全文搜索引擎，例如 Haystack/Whoosh

# iphone - 有什么方法可以使用 iMessage 相关或一些类似的逻辑来检测电话联系人列表中谁都使用 iPhone？

> ID：10569966
> 
> 赞同：3
> 
> 时间：2012-05-13T07:15:38.150
> 
> 标签：iphone, ios, xcode, imessage

当我向电话簿中同样使用 iPhone 的朋友发送短信时，默认情况下该消息以 iMessage 形式发送。

使用反向逻辑，是否有可能以某种方式以编程方式找出我的电话簿中使用 iPhone 的人的列表？

实际上，我已经构建了一个 iPhone 应用程序，并且我想提供一个功能，让用户在喜欢该应用程序的情况下与她的其他 iPhone 朋友分享有关该应用程序的信息。现在，由于非 iPhone 朋友对 msg 不感兴趣，因为他们无法使用该应用程序，因此为用户提供一个只有她可以转发她的 msg 的 iPhone 朋友的列表是有意义的。因此，我只想从她的电话簿中提供一个 iPhone 用户列表，然后让她给他们发 iMessage。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:08:07.223

我看了你的帖子好几遍了，看不出一个明确的问题。但我会试试看：

> 是否有可能找出我的哪些朋友正在使用 iPhone？

是和不是。如果您只想显示下载了该应用程序的人，那完全有可能，但如果您只想通过他们的电话号码并使用官方框架找到这一点，则无法做到这一点。

> 是否有可能找出我的哪些朋友正在使用 iMessage？

不，除非他们都下载您的应用程序并输入是否使用 iMessage。

*再说一遍：如果您想获取正在使用 iPhone 的朋友的列表，他们需要下载您的应用程序来收集数据。（它被称为WhatsApp）*

# php - 如何使用 php 循环获取所有 xml 数组

> ID：10569971
> 
> 赞同：0
> 
> 时间：2012-05-13T07:16:56.067
> 
> 标签：php, xml, json, curl, yql

我已经在 php 会话中获取了 xml 数据并打印在 div 中。我想打印查询的所有数据..

```
<?php
session_start();

$yql_base_url = "http://query.yahooapis.com/v1/public/yql";  
$yql_query = "select * from yahoo.finance.quotes where symbol in ('XAUUSD=X','XAGUSD=X','PLN12.NYM','PAK12.NYM','USDCAD=X')";  
$yql_query_url = $yql_base_url . "?q=" . urlencode($yql_query);
$yql_query_url .= "&env=http://datatables.org/alltables.env";
$yql_query_url .= "&format=json";
$session = curl_init($yql_query_url);  
curl_setopt($session, CURLOPT_RETURNTRANSFER,true);      
$json = curl_exec($session);
$phpObj =  json_decode($json);  
if(!is_null($phpObj->query->results)){  
}  
if(!is_null($phpObj->query->results)){  
    foreach($phpObj->query->results->quote as $quotes){  
        $_SESSION['Ask'] = $quotes->Ask;
        $_SESSION['Bid'] = $quotes->Bid;
        $_SESSION['AskRealtime'] = $quotes->AskRealtime;
        $_SESSION['BidRealtime'] = $quotes->BidRealtime;
        $_SESSION['LastTradeDate'] = $quotes->LastTradeDate;
        $_SESSION['LastTradePriceOnly'] = $quotes->LastTradePriceOnly;
        $_SESSION['LastTradeTime'] = $quotes->LastTradeTime;
  }  
}  
?> 
```

仅打印一个结果..
1.0015 1.0005
5/11/2012
1.001
5:55pm

但我想做这样的事情

```
<body>
<div>
<ul>
<li>Gold Price</li>
<li><?php echo $_SESSION['Ask'];?></li>
<li><?php echo $_SESSION['Bid'];?></li>
<li><?php echo $_SESSION['AskRealtime'];?></li>
<li><?php echo $_SESSION['BidRealtime'];?></li>
<li><?php echo $_SESSION['LastTradeDate'];?></li>
<li><?php echo $_SESSION['LastTradePriceOnly'];?></li>
<li><?php echo $_SESSION['LastTradeTime'];?></li>
</ul>
<ul>
<li>Silver Price</li>
<li><?php echo $_SESSION['Ask_2'];?></li>
<li><?php echo $_SESSION['Bid_2'];?></li>
<li><?php echo $_SESSION['AskRealtime_2'];?></li>
<li><?php echo $_SESSION['BidRealtime_2'];?></li>
<li><?php echo $_SESSION['LastTradeDate_2'];?></li>
<li><?php echo $_SESSION['LastTradePriceOnly_2'];?></li>
<li><?php echo $_SESSION['LastTradeTime_2'];?></li>
</ul>
<ul>
<li>Platinum Price</li>
<li><?php echo $_SESSION['Ask_3'];?></li>
<li><?php echo $_SESSION['Bid_3'];?></li>
<li><?php echo $_SESSION['AskRealtime_3'];?></li>
<li><?php echo $_SESSION['BidRealtime_3'];?></li>
<li><?php echo $_SESSION['LastTradeDate_3'];?></li>
<li><?php echo $_SESSION['LastTradePriceOnly_3'];?></li>
<li><?php echo $_SESSION['LastTradeTime_3'];?></li>
</ul>
</div>
</body> 
```

我想为那些打印所有结果

```
$yql_query = "select * from yahoo.finance.quotes where symbol in ('XAUUSD=X','XAGUSD=X','PLN12.NYM','PAK12.NYM','USDCAD=X')"; 
```

XML 看起来像这样

```
<query yahoo:count="5" yahoo:created="2012-05-12T22:01:43Z" yahoo:lang="en-US">
<diagnostics>
<publiclyCallable>true</publiclyCallable>
<redirect from="http://datatables.org/alltables.env" status="301">http://www.datatables.org/alltables.env</redirect>
<url execution-start-time="417" execution-stop-time="775" execution-time="358" proxy="DEFAULT">http://datatables.org/alltables.env</url>
<url execution-start-time="826" execution-stop-time="1040" execution-time="214" proxy="DEFAULT">http://www.datatables.org/yahoo/finance/yahoo.finance.quotes.xml</url>
<url execution-start-time="1247" execution-stop-time="1261" execution-time="14" proxy="DEFAULT">http://download.finance.yahoo.com/d/quotes.csv?f=aa2bb2b3b4cc1c3c6c8dd1d2ee1e7e8e9ghjkg1g3g4g5g6ii5j1j3j4j5j6k1k2k4k5ll1l2l3mm2m3m4m5m6m7m8nn4opp1p2p5p6qrr1r2r5r6r7ss1s7t1t7t8vv1v7ww1w4xy&s=XAUUSD%3DX,XAGUSD%3DX,PLN12.NYM,PAK12.NYM,USDCAD%3DX</url>
<query execution-start-time="1045" execution-stop-time="1261" execution-time="216" params="{url=[http://download.finance.yahoo.com/d/quotes.csv?f=aa2bb2b3b4cc1c3c6c8dd1d2ee1e7e8e9ghjkg1g3g4g5g6ii5j1j3j4j5j6k1k2k4k5ll1l2l3mm2m3m4m5m6m7m8nn4opp1p2p5p6qrr1r2r5r6r7ss1s7t1t7t8vv1v7ww1w4xy&s=XAUUSD%3DX,XAGUSD%3DX,PLN12.NYM,PAK12.NYM,USDCAD%3DX]}">select * from csv where url=@url and columns='Ask,AverageDailyVolume,Bid,AskRealtime,BidRealtime,BookValue,Change&PercentChange,Change,Commission,ChangeRealtime,AfterHoursChangeRealtime,DividendShare,LastTradeDate,TradeDate,EarningsShare,ErrorIndicationreturnedforsymbolchangedinvalid,EPSEstimateCurrentYear,EPSEstimateNextYear,EPSEstimateNextQuarter,DaysLow,DaysHigh,YearLow,YearHigh,HoldingsGainPercent,AnnualizedGain,HoldingsGain,HoldingsGainPercentRealtime,HoldingsGainRealtime,MoreInfo,OrderBookRealtime,MarketCapitalization,MarketCapRealtime,EBITDA,ChangeFromYearLow,PercentChangeFromYearLow,LastTradeRealtimeWithTime,ChangePercentRealtime,ChangeFromYearHigh,PercebtChangeFromYearHigh,LastTradeWithTime,LastTradePriceOnly,HighLimit,LowLimit,DaysRange,DaysRangeRealtime,FiftydayMovingAverage,TwoHundreddayMovingAverage,ChangeFromTwoHundreddayMovingAverage,PercentChangeFromTwoHundreddayMovingAverage,ChangeFromFiftydayMovingAverage,PercentChangeFromFiftydayMovingAverage,Name,Notes,Open,PreviousClose,PricePaid,ChangeinPercent,PriceSales,PriceBook,ExDividendDate,PERatio,DividendPayDate,PERatioRealtime,PEGRatio,PriceEPSEstimateCurrentYear,PriceEPSEstimateNextYear,Symbol,SharesOwned,ShortRatio,LastTradeTime,TickerTrend,OneyrTargetPrice,Volume,HoldingsValue,HoldingsValueRealtime,YearRange,DaysValueChange,DaysValueChangeRealtime,StockExchange,DividendYield'</query>
<javascript execution-time="279" instructions-used="302744" table-name="yahoo.finance.quotes"/>
<warning>Unable to sort response according to field 'Ask,Bid,AskRealtime,BidRealtime,LastTradeDate,LastTradePriceOnly,LastTradeTime'.</warning>
<user-time>1326</user-time>
<service-time>586</service-time>
<build-version>27222</build-version>
</diagnostics>
<results>
<quote symbol="XAUUSD=X">
  <Bid>1585.30</Bid>
  <AskRealtime/>
  <BidRealtime/>
  <LastTradeDate>5/11/2012</LastTradeDate>
  <LastTradePriceOnly>1580.3002</LastTradePriceOnly>
  <LastTradeTime>5:15pm</LastTradeTime>
  <Ask>1575.30</Ask>
</quote>
<quote symbol="XAGUSD=X">
  <Bid/>
  <AskRealtime/>
  <BidRealtime/>
  <LastTradeDate>5/11/2012</LastTradeDate>
  <LastTradePriceOnly>28.858</LastTradePriceOnly>
  <LastTradeTime>5:39pm</LastTradeTime>
  <Ask/>
</quote>
<quote symbol="PLN12.NYM">
  <Bid/>
  <AskRealtime>1478.60</AskRealtime>
  <BidRealtime>1462.90</BidRealtime>
  <LastTradeDate>5/11/2012</LastTradeDate>
  <LastTradePriceOnly>1465.30</LastTradePriceOnly>
  <LastTradeTime>5:02pm</LastTradeTime>
  <Ask/>
</quote>
<quote symbol="PAK12.NYM">
  <Bid/>
  <AskRealtime>0.00</AskRealtime>
  <BidRealtime>0.00</BidRealtime>
  <LastTradeDate>3/23/2012</LastTradeDate>
  <LastTradePriceOnly>658.80</LastTradePriceOnly>
  <LastTradeTime>7:12am</LastTradeTime>
  <Ask/>
</quote>
<quote symbol="USDCAD=X">
  <Bid>1.0005</Bid>
  <AskRealtime/>
  <BidRealtime/>
  <LastTradeDate>5/11/2012</LastTradeDate>
  <LastTradePriceOnly>1.001</LastTradePriceOnly>
  <LastTradeTime>5:55pm</LastTradeTime>
  <Ask>1.0015</Ask>
</quote> 
```

任何建议..用谷歌搜索..但无法解决...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T16:41:22.347

我想数组在这里应该有帮助..

```
<?php
session_start();

$yql_base_url = "http://query.yahooapis.com/v1/public/yql";  
$yql_query = "select * from yahoo.finance.quotes where symbol in ('XAUUSD=X','XAGUSD=X','PLN12.NYM','PAK12.NYM','USDCAD=X')";  
$yql_query_url = $yql_base_url . "?q=" . urlencode($yql_query);
$yql_query_url .= "&env=http://datatables.org/alltables.env";
$yql_query_url .= "&format=json";
$session = curl_init($yql_query_url);  
curl_setopt($session, CURLOPT_RETURNTRANSFER,true);      
$json = curl_exec($session);
$phpObj =  json_decode($json);  
if(!is_null($phpObj->query->results)){  
}  
if(!is_null($phpObj->query->results)){
    $_SESSION['Ask']=array();
    $_SESSION['Bid']=array();
    $_SESSION['AskRealtime']=array();
    $_SESSION['BidRealtime']=array();
    $_SESSION['LastTradeDate']=array();
    $_SESSION['LastTradePriceOnly']=array();
    $_SESSION['LastTradeTime']=array();

    foreach($phpObj->query->results->quote as $quotes){  
        $_SESSION['Ask'][] = $quotes->Ask;
        $_SESSION['Bid'][] = $quotes->Bid;
        $_SESSION['AskRealtime'][] = $quotes->AskRealtime;
        $_SESSION['BidRealtime'][] = $quotes->BidRealtime;
        $_SESSION['LastTradeDate'][] = $quotes->LastTradeDate;
        $_SESSION['LastTradePriceOnly'][] = $quotes->LastTradePriceOnly;
        $_SESSION['LastTradeTime'][] = $quotes->LastTradeTime;
  }  
}
?> 
```

现在，您可以遍历会话数组。

**注意：**我不知道为什么`[]`不将每个会话变量声明为数组就不起作用。希望有帮助。

# linux - 在 Linux 上使用 PSFTP

> ID：10569972
> 
> 赞同：1
> 
> 时间：2012-05-13T07:16:58.920
> 
> 标签：linux, ftp, sftp

我正在使用 Linux Suse 10，在使用它时我完全是个菜鸟，这就是为什么我真的需要一些帮助。

场景很简单。我需要将一些文件从我的 linux 服务器传输到 windows pc。

我已经使用写在 .scr 文件中的 FTP 命令完成了这项工作。这是我的 Upload.scr 的内容：

```
ftp -n 10.*.*.* <<SCRIPT
user administrator drowssap
cd TESTDIR
binary
lcd /path/of/the/txt/file/
put TESTUpload.txt
bye
SCRIPT 
```

然后我会使用 linux Konsole 调用它：bash Upload.scr

它实际上正在工作，并且可以成功地将文件传输到我的 windows pc。但是，我需要的是使用“psftp”传输文件。

从 Windows 到 Windows 传输的原始代码是：

```
ProcessStartInfo PSI = new ProcessStartInfo("CMD.exe", "/C psftp " + UserName + "@" + IP + " -pw " + Password + " -b UpLoad.scr"); 
```

我需要对我的 linux-to-windows 传输做同样的事情（即我需要使用 psftp 而不仅仅是 ftp 或 sftp）。

每当我尝试在 linux Konsole 上键入“psftp”时，它都会显示 ff : **bash: psftp: command not found**

我知道有些东西不见了。我应该首先做什么才能使其工作？我应该在我的 linux 服务器中安装一些应用程序或 .exe 文件吗？

我真的需要帮助。非常感谢您！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T07:20:49.137

`psftp`是 PuTTY 的`SFTP`实用程序。

OpenSSH 也有一个，简单命名`sftp`（不带`p`）。它很可能已经安装在您的 Linux 机器上。

如果你想安装 PuTTY `psftp`，你只需要运行：

```
apt-get install putty-tools 
```

或等效于您的发行版。

# scala - 伴随对象中的Scala隐式Numeric [T]

> ID：10569974
> 
> 赞同：6
> 
> 时间：2012-05-13T07:17:01.910
> 
> 标签：scala, numeric, implicit-conversion, implicit, implicits

我有以下通用 Interval 类（由用户 soc 为我制定）：

```
case class Interval[T](from: T, to: T)(implicit num: Numeric[T]) {
  import num.mkNumericOps // allows us to write from.toDouble and to.toDouble
  def mid: Double = (from.toDouble + to.toDouble) / 2.0
} 
```

典型用例：Interval[Double] 或 Interval[Int]。为了添加二元*联合*和*交集*`(implicit num: Numeric[T])`运算符，我在伴随对象中遵循了类似的模式：

```
object Interval {

  def union[T](interval1: Interval[T], interval2: Interval[T])(implicit num: Numeric[T]) = {
    import num.mkOrderingOps // allows interval1.from min
    Interval[T](interval1.from min interval2.from, interval1.to max interval2.to)
  }

  def intersect[T](interval1: Interval[T], interval2: Interval[T])(implicit num: Numeric[T]) = {
    import num.mkOrderingOps
    Interval[T](interval1.from max interval2.from, interval1.to min interval2.to)
  }

} 
```

在这两种方法中复制`(implicit num: Numeric[T])`and是丑陋的样板。`import num.mkOrderingOps`有没有办法在 Interval 对象本身的级别上只做一次？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T08:50:58.543

就在这里。

首先是导入。您可以改为在 Interval 范围内导入 Ordering.Implicits._ 。

```
object Interval {
   import Ordering.Implicits._

   def union[T](....)(implicit num: Numeric[T]) = {
     // do not import num.mkOrderingOps
     ...
   }
   ...
} 
```

有了这些隐式，当它找到一个排序操作时，它会在操作发生的范围内寻找隐式排序（数字是排序）。在您的每个例程中，恰好都有一个适当的隐含范围。如果您也需要算术运算，还可以导入 Numeric.Implicits._

现在有了隐含的论点。语言中有一个快捷方式，称为上下文绑定：您可以编写`def f[T: X](args)`而不是`def f[T](args)(implicit someName: X[T])`

不同之处在于您没有上下文绑定的隐式名称（您可以使用 implictly[T] 但这几乎不会更短。幸运的是，您不再需要使用 import Ordering.Implicits._ 的名称

所以

```
object Interval {
   import Ordering.Implicits._
   // also import Numeric.Implicits._ if you need +,-,*,/ ...
   def union[T: Numeric] ...
   def intersection[T: Numeric] ...
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-13T08:46:30.983

`Numeric`对象中类型类的使用`Interval`有一个类型参数`T`，该参数必须绑定在其封闭范围内的某个位置。`Interval`，作为唯一的常量值，不能提供该绑定。

这个特定问题的一种解决方案是将您的`union`和`intersect`操作的定义作为普通实例方法移动到`Interval` *类*中，在这种情况下，它们将与类的其余部分共享绑定`T`和关联实例，`Numeric`

```
case class Interval[T : Numeric](from: T, to: T) {
  import Numeric.Implicits._
  import Ordering.Implicits._

  def mid: Double = (from.toDouble + to.toDouble) / 2.0
  def union(interval2: Interval[T]) =
    Interval(this.from min interval2.from, this.to max interval2.to)
  def intersect(interval2: Interval[T]) =
    Interval(this.from max interval2.from, this.to min interval2.to)
} 
```

`Interval`但是，如果您希望将这些操作的定义与类分开，那么一种减少您需要在 API 中追踪的隐式样板数量的方法是根据 Numeric[ T]。例如，

```
// Type class supplying union and intersection operations for values
// of type Interval[T]
class IntervalOps[T : Numeric] {
  import Ordering.Implicits._

  def union(interval1: Interval[T], interval2: Interval[T]) =
    Interval[T](interval1.from min interval2.from, interval1.to max interval2.to)

  def intersect(interval1: Interval[T], interval2: Interval[T]) =
    Interval[T](interval1.from max interval2.from, interval1.to min interval2.to)
}

implicit def mkIntervalOps[T : Numeric] = new IntervalOps[T] 
```

在使用中看起来像，

```
def use[T](i1 : Interval[T], i2 : Interval[T])(implicit ops : IntervalOps[T]) = {
  import ops._
  val i3 = union(i1, i2)
  val i4 = intersect(i1, i2)
  (i3, i4)
} 
```

第三个选项结合了这两个，使用隐式定义来丰富原始类和附加方法，

```
class IntervalOps[T : Numeric](interval1 : Interval[T]) {
  import Ordering.Implicits._

  def union(interval2: Interval[T]) =
    Interval[T](interval1.from min interval2.from, interval1.to max interval2.to)

  def intersect(interval2: Interval[T]) =
    Interval[T](interval1.from max interval2.from, interval1.to min interval2.to)
}

implicit def enrichInterval[T : Numeric](interval1 : Interval[T]) =
  new IntervalOps[T](interval1)

type Ops[T] = Interval[T] => IntervalOps[T] 
```

那么在使用中，

```
def use[T](i1 : Interval[T], i2 : Interval[T])(implicit ops : Ops[T]) = {
  val i3 = i1 union i2
  val i4 = i1 intersect i2
  (i3, i4)
} 
```

# jquery-ui - 使用jquery ui时如何初始化数据？

> ID：10569977
> 
> 赞同：0
> 
> 时间：2012-05-13T07:17:13.003
> 
> 标签：jquery-ui

我有一个使用 jQuery UI 的复选框

```
<input type="checkbox" id="checkbox_1" name="checkbox_1" value="1" />
<label for="checkbox_1" class="checked">checkbox_1</label>
<script>
$(function){
    $("input:checkbox").button();
};
</script> 
```

我从数据库中查询数据，复选框应该被选中。但是当我像正常使用一样在复选框中添加“已选中”的属性时，它不起作用。如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T07:20:00.797

添加 html 已 `<input type="checkbox"`**检查 =“已检查”**`id="checkbox_1" name="checkbox_1" value="1" />`

# ios - CCSprite 在其他 CCSprite 之上的定位问题，因为它使屏幕动画化？

> ID：10569980
> 
> 赞同：5
> 
> 时间：2012-05-13T07:18:12.757
> 
> 标签：ios, cocos2d-iphone, position, box2d, ccsprite

在我的应用程序中，我有一个有脚的角色，我想制作它，以便在我的应用程序中它看起来像站在另一个 CCSprite 的顶部，因为它在屏幕上移动（动画）。一切正常，除了有一点我无法弄清楚的定位问题！让我再解释一下这个问题，当角色在 CCSprite 之上时，角色似乎以非常快的间隔上下移动了大约 10 个点。

有谁知道为什么会这样？

谢谢！

**最后编辑：**我想再次感谢您帮助我完成所有这些。首先，由于帖子太长，我已经删除了所有其他编辑，如果您出于任何原因需要参考较旧的编辑，只需查看我的编辑历史！

因此，经过大约一个小时的测试，我已将其缩小到您之前提到的一个问题，检查角色和地板是否碰撞的 if 语句**不会**在游戏循环中的每次迭代中被调用，当它们**应该**是 (就他们在 UI 中的外观而言）。

我的 cocosGameLoop 日志在所有碰撞检测代码之前，但仍在游戏 loop.f 中

我还注意到我的 NSLogs 中有一个模式，如下所示：

```
2012-05-27 17:00:54.791 App[2769:707] cocosGameLoop
2012-05-27 17:00:54.811 App[2769:707] cocosGameLoop
2012-05-27 17:00:54.825 App[2769:707] cocosGameLoop
2012-05-27 17:00:54.841 App[2769:707] cocosGameLoop
2012-05-27 17:00:54.858 App[2769:707] cocosGameLoop
2012-05-27 17:00:54.874 App[2769:707] cocosGameLoop
2012-05-27 17:00:54.891 App[2769:707] cocosGameLoop
2012-05-27 17:00:54.908 App[2769:707] cocosGameLoop
2012-05-27 17:00:54.924 App[2769:707] cocosGameLoop
2012-05-27 17:00:54.928 App[2769:707] collisiontwo
2012-05-27 17:00:54.929 App[2769:707] two
2012-05-27 17:00:54.941 App[2769:707] cocosGameLoop
2012-05-27 17:00:54.944 App[2769:707] collisiontwo
2012-05-27 17:00:54.945 App[2769:707] two
2012-05-27 17:00:54.958 App[2769:707] cocosGameLoop
2012-05-27 17:00:54.974 App[2769:707] cocosGameLoop
2012-05-27 17:00:54.991 App[2769:707] cocosGameLoop
2012-05-27 17:00:55.008 App[2769:707] cocosGameLoop
2012-05-27 17:00:55.025 App[2769:707] cocosGameLoop
2012-05-27 17:00:55.043 App[2769:707] cocosGameLoop
2012-05-27 17:00:55.058 App[2769:707] cocosGameLoop
2012-05-27 17:00:55.076 App[2769:707] cocosGameLoop
2012-05-27 17:00:55.078 App[2769:707] collisiontwo
2012-05-27 17:00:55.078 App[2769:707] two
2012-05-27 17:00:55.091 App[2769:707] cocosGameLoop
2012-05-27 17:00:55.094 App[2769:707] collisiontwo 
```

当我 NSLog 字符 Y 坐标时，我还注意到它在几个交互中保持在同一点附近（即使它应该发生碰撞，因此它会与上面 NSLog 中的一堆 cocosGameLoop 调用重合），然后当它实际上碰撞（以编程方式），它从之前的 Y 坐标向上移动了大约 14 个点。所以有大约 14 个点的上下抖动。

所以底线是，我如何才能使碰撞代码在每次迭代中都被调用并且不会抖动大约 14 点？我不想更改锚点，因为这会弄乱我的动画定位等等。无论如何，你有什么推荐的？另外请记住，我只使用 Box2D 进行碰撞检测，所以我必须将所有内容保存在 Cocos2D 代码中。

最后，我认为由于重力，我的应用程序中存在舍入点错误，但即使我弄乱了诸如将重力更改为整数之类的值，它也没有解决闪烁问题，所以这是我上面提到的 100% 的问题.

无论如何，这是问题的核心，我认为你可以看到一些我看不到的东西！让我知道你的想法 ：）

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T13:33:24.577

看起来很奇怪的第一件事是您在`Some other tag collision checking before`评论之后检查标签。这会更有意义：

```
else if ((spriteA.tag == 1 && spriteB.tag == 5) || (spriteB.tag == 1 && spriteA.tag == 5))
...
else if ((spriteA.tag == 6 && spriteB.tag == 1) || (spriteB.tag == 6 && spriteA.tag == 1))
... 
```

即，这假设您正在测试的碰撞接触可以以任一顺序为您提供两个身体 - 例如，对于两个碰撞的物体，比如角色和地面，接触侦听器可以将地面作为身体 A，将脚作为身体 B，或者将脚作为主体 A 和地面作为主体 B。上面的语句将保证无论顺序如何，您都执行相同的条件块。您的执行路径是否可能在两个`else if`块之间摆动，因此当它进入错误的块时设置了不正确的位置？

好的，所以假设这些条件都是正确的（我只是看不到，因为我不知道标签也引用了哪些主体，如何设置联系侦听器等），那么振荡一定是由物理模拟。当你在 Cocos2d 中用 Box2D 设置 CCSprite 的位置时会发生什么？设置精灵的位置是否也会改变物理体的位置，或者两者是分开的（精灵通常在物理体的位置渲染）？自从我使用 Cocos2d 以来已经有一段时间了，并且从早期以来它已经发生了很大的变化，所以我不确定是否不打开最新版本并查看一下。如果改变 CCSprite 的位置也改变了物理体的位置，那么这是一件坏事——所有的运动都应该由物理模拟控制（所以如果你想移动一个物理物体，你应该对其施加力或冲量，而不是直接设置位置）。在物理模拟的下一步运行时，更改物理之外的身体位置可能会导致振动或施加到身体的不正确脉冲。如果您想在不破坏物理模拟的情况下更改精灵的位置，请考虑在您想要直接设置位置的所有时间从物理模拟中删除与该精灵关联的物理主体，然后稍后重新添加如果你想让它在物理学下起作用。这可能意味着删除物理体并在以后重新创建它，如果没有干净的方法可以从物理世界中添加/删除它。您应该对其施加力或冲动，而不是直接设置位置）。在物理模拟的下一步运行时，更改物理之外的身体位置可能会导致振动或施加到身体的不正确脉冲。如果您想在不破坏物理模拟的情况下更改精灵的位置，请考虑在您想要直接设置位置的所有时间从物理模拟中删除与该精灵关联的物理主体，然后稍后重新添加如果你想让它在物理学下起作用。这可能意味着删除物理体并在以后重新创建它，如果没有干净的方法可以从物理世界中添加/删除它。您应该对其施加力或冲动，而不是直接设置位置）。在物理模拟的下一步运行时，更改物理之外的身体位置可能会导致振动或施加到身体的不正确脉冲。如果您想在不破坏物理模拟的情况下更改精灵的位置，请考虑在您想要直接设置位置的所有时间从物理模拟中删除与该精灵关联的物理主体，然后稍后重新添加如果你想让它在物理学下起作用。这可能意味着删除物理体并在以后重新创建它，如果没有干净的方法可以从物理世界中添加/删除它。在物理模拟的下一步运行时，更改物理之外的身体位置可能会导致振动或施加到身体的不正确脉冲。如果您想在不破坏物理模拟的情况下更改精灵的位置，请考虑在您想要直接设置位置的所有时间从物理模拟中删除与该精灵关联的物理主体，然后稍后重新添加如果你想让它在物理学下起作用。这可能意味着删除物理体并在以后重新创建它，如果没有干净的方法可以从物理世界中添加/删除它。在物理模拟的下一步运行时，更改物理之外的身体位置可能会导致振动或施加到身体的不正确脉冲。如果您想在不破坏物理模拟的情况下更改精灵的位置，请考虑在您想要直接设置位置的所有时间从物理模拟中删除与该精灵关联的物理主体，然后稍后重新添加如果你想让它在物理学下起作用。这可能意味着删除物理体并在以后重新创建它，如果没有干净的方法可以从物理世界中添加/删除它。然后考虑从物理模拟中删除与该精灵关联的物理体，以便在您想要直接设置位置的所有时间内，然后如果您希望它在物理下起作用，则稍后重新添加它。这可能意味着删除物理体并在以后重新创建它，如果没有干净的方法可以从物理世界中添加/删除它。然后考虑从物理模拟中删除与该精灵关联的物理体，以便在您想要直接设置位置的所有时间内，然后如果您希望它在物理下起作用，则稍后重新添加它。这可能意味着删除物理体并在以后重新创建它，如果没有干净的方法可以从物理世界中添加/删除它。

另一种解决方案是在要一起移动的实体之间创建一个关节。距离连接或焊接连接将是最合适的。这将导致它们被连接，因此当您移动一个时，另一个也会移动，保持两个物体之间的距离相同。在这种情况下，它们都将在物理模拟下起作用。

实际上，我刚刚想到你可能会改变角色和它所站立的 CCSprite 的物理体的位置。在这种情况下，这不仅很糟糕，因为物理模拟不受控制，而且您的位置计算也可能导致两个物体略微重叠，所以当物理模拟下一次运行时，它会对两个物体施加很大的力迫使它们分开，但随后您将位置更改回再次重叠，因此下一次更新再次产生很大的力。

如果您改变 CCSprite 的位置实际上并没有改变物理体的位置，并且您基本上只是将玩家的渲染位置设置为与物理体在世界中的位置不同，那么您需要考虑物理体发生了什么。它是在滚动，从世界上掉下来，在其他物体或其他物体之间摆动吗？如果不了解更多关于你的游戏，我很难判断它会发生什么。但是它发生的事情可能会影响您的头寸计算。如果您想在精灵周围移动而不让它们受到物理模拟的影响，请考虑从物理世界中移除物理对象。在处理物理实体时，进行某种调试绘制是非常宝贵的，因此，无论您自己的任何精灵或其他艺术品如何，您都可以看到每个身体的确切形状和位置以及与之交互的内容。不确定 Cocos2D/Box2D 组合是否提供了开箱即用的功能，但如果没有，那么强烈考虑实施它，并通过一种简单的方法来打开/关闭它。

要考虑的另一件事是以下两个陈述：

```
if (spriteA.position.x - spriteA.boundingBox.size.height*.5 <= spriteB.position.x + spriteB.boundingBox.size.height*.5) 
```

和

```
if (spriteB.position.x - spriteB.boundingBox.size.height*.5 <= spriteA.position.x + spriteA.boundingBox.size.height*.5) 
```

您是否尝试过删除这两个语句，以便每帧设置一个新位置，而不是等待位置中的一些错误在几帧上累积？如果您正在移动一个对象，并且您希望另一个对象像牢固地连接一样四处移动，那么您需要每帧更新位置。可能是你只通过了这个有条件的说每 30 帧中的 10 帧，所以假设 30 fps 这将给出一个非常明显的抖动运动，而不是你想要的平滑运动。

希望上面提到的东西可以解决您的问题，或者至少让您更好地了解从哪里开始寻找。在您的问题中提供更多信息 - 也许是对我提到的一些假设/未知数的回应 - 应该有助于我们深入了解您的问题:)

**编辑 1**

感谢您向我们提供额外的细节——这让事情变得更加清晰。既然我知道您只是在使用 Box2D 进行碰撞检测，那么您所做的一切就完全有意义了。

我会说要解决您的问题，在`for`您查看联系人的循环中，您检测到已建立联系人，您应该只设置一个标志而不是此时更改角色的位置，例如`BOOL characterOnPlatform`- 将其设置为`YES`当检测到接触时。在该`for`循环之外（尽管不一定使用相同的方法 - 它可能是每帧调用的任何地方，并且在任何地方最有意义）您将检查该标志和 if `characterOnPlatfom == YES`，然后将角色的位置设置为您所在的位置计算当前在联系侦听器`for`循环中进行。`for`即在联系监听器循环中不要做任何事情，**除非**改变一些你将在别处引用的状态。

这种变化将使您的角色与平台完全一致。如果您仍然希望角色能够从平台上跳下，则需要`NO`在玩家进行诸如跳跃之类的输入时将该标志设置回，否则他们所需的运动将被我们强制他们进入该平台。

**编辑 2**

实际上不可能确切地看到您的新代码发生了什么。例如，您的`resetgravity`方法中发生了什么？你如何设置`hasCollided`为NO（即你如何检测角色不再在平台上）？您的角色是否还在上下抖动，或者您提到的闪烁与以前不同？

假设您仍在上下移动，我仍然希望这可能是由于您发布的代码没有被每一帧调用，或者它与其他一些定位代码冲突（例如，无论您移动到哪里周围的角色响应玩家的输入，你应用重力等）。

确保将角色保留在平台上的代码不会将位置设置得太高而导致角色被检测为不在平台上，否则您将陷入恶性循环：

*   角色与平台碰撞
*   角色位置设置在平台上方
*   角色不再与平台碰撞，因此定位代码不会运行以在平台上重新定位他
*   由于重力的影响，角色向下坠落（或者你模拟这个）
*   角色与平台碰撞
*   ...

如果是这种情况，那么您需要改进对角色何时不与平台发生碰撞的检测，或者偏移您的定位代码以使角色与平台保持轻微相交（如果这在视觉上看起来很糟糕，您可能想要从 Box2D 形状稍微偏移精灵，使物理体与平台稍微相交，但角色的脚似乎正好在平台上。

**编辑 3**

听起来您已经排除了很多可能导致抖动的事情！我问了另一个游戏开发者，他说你的问题可能是从世界空间到屏幕空间的转换引起的。因此，您可以尝试注销角色的世界位置，以及渲染它的屏幕位置（这可能意味着更改 Cocos2D 中完成此转换的代码）。至少查看注销的值可能有助于缩小一些抖动/振荡的值。您还可以查找可能引入的任何舍入点错误，例如将浮点精度截断为整数。如果您的抖动看起来仅在 + 或 - 1 像素的区域内，那么很值得研究世界位置与屏幕位置。

# java - 从 SurfaceView 获得更多 FPS，我可以做得更好吗？

> ID：10569983
> 
> 赞同：1
> 
> 时间：2012-05-13T07:18:29.870
> 
> 标签：java, android, surfaceview

我正在玩将 jbox2d 对象绘制到表面视图上，但我对我得到的帧速率并不满意（10-13，当屏幕上有多个对象/在调试中更多时，我得到大约 26- 30)。

```
 while (isRun)
        {
            Canvas canvas = holder.lockCanvas();
            _update(canvas); /// <- call to update
            holder.unlockCanvasAndPost(canvas);
        } 
```

...

```
 canvas.drawColor(0xFF6699FF);

    for ( Body b = world.getBodyList(); b!=null; b = b.getNext() ) // <- cycle through all the world bodies
    {
        rlBodyImage bi = new  rlBodyImage();
        bi = (rlBodyImage) b.getUserData();
        float x = b.getPosition().x*scale + wOffset + camera_x + camera_x_temp;
        float y = b.getPosition().y*-scale + hOffset + camera_y + camera_y_temp;
        canvas.save();
        canvas.translate( x - (bi.getImage().getWidth()*bi.getCoof()*scale)/2 , y - (bi.getImage().getHeight()*bi.getCoof()*scale)/2 );
        canvas.scale( bi.getCoof()*scale , bi.getCoof()*scale );
        canvas.rotate( (float) -(b.getAngle() * (180/Math.PI)) , bi.getImage().getWidth() /2 , bi.getImage().getHeight() /2 );
        canvas.drawPicture(bi.getImage()); // <- draw the image assossiated with current body on canvas
        canvas.restore();                  // images are stroed as "Pictures" , extracted from SVGs.
    } 
```

有没有办法加快速度，当然还有使用更简单的 SVG？：） 谢谢！

* * *

**编辑 ：**

是的，将不得不切换到 PNG，它们提供更好的 FPS 速率。

矢量图片 = 10...13...16 FPS

仅 PNG = 35...40+ FPS

缩放的 PNG = 32...37+ FPS

带缩放和旋转的 PNG = 27+ FPS

![在此处输入图像描述](../Images/ea036251744c94cb9fe52940fd534879.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T07:35:40.563

立刻，这条线让我觉得很奇怪：

```
rlBodyImage bi = new  rlBodyImage(); 
```

你正在制作一个新的 rlBodyImage 的每一帧，考虑到它的名字，我怀疑这不是一件简单的事情。

但是，下一行忽略了该图像：

```
bi = (rlBodyImage) b.getUserData(); 
```

在你的循环中试试这个，而不是这两行：

```
rlBodyImage bi = (rlBodyImage) b.getUserData(); 
```

让我们知道这是否有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T07:37:41.287

您可能应该使用光栅化图像而不是 SVG。您可以在编译之前/期间将它们保存为 png 或类似文件，或者手机可以在（第一次）启动时将它们转换为合适的图像。

似乎您正在交换要在每帧中多次绘制的纹理。这对于 GPU 来说是极其昂贵的。您应该创建一个包含所有图像的大型 sprite/imageatlas，将其加载到 GPU 上，然后将其不同区域绘制到屏幕上。

如果您不打算长时间使用它们，请不要在每帧分配许多新对象。GC 会时不时地冻结你的游戏一段时间，从而降低你的 fps。

编辑：您还应该在调试模式下实现超过 ~20 fps（除非您的手机真的很旧）。考虑优化你的 box2d 世界。您或许应该考虑使用 Libgdx 框架。它为 Box2d 提供了一个 JNI 包装器，大大提高了性能。

编辑2：

> 当我必须旋转和缩放它们时（当用户放大或缩小时）PNG 的问题就开始了

这**不是**问题。将 PNG 保存为它们将在屏幕上显示的最大尺寸，然后缩放和旋转它们以适应。如果您使用适当的缩小过滤器，并且可能会在周围添加一些额外的空间（请参阅[此帖子](http://www.badlogicgames.com/forum/viewtopic.php?f=11&t=635)以获取示例），您应该会看到没有或最小的质量损失。如果需要，您可以为每个精灵创建一个大版本和一个小版本，并绘制最合适的一个。或者只是在 OpenGL 中使用 mipmapping。并且您不需要为每个精灵的每个大小/角度保存一个版本。

> Libgdx Box2D

我不知道有多少性能提升。

# php - 为什么我需要“&”？

> ID：10569984
> 
> 赞同：4
> 
> 时间：2012-05-13T07:18:45.167
> 
> 标签：php, oop

请参阅 Web 上有关 PHP 工厂模式的示例。

在线路`$kind =& Vehicle::category($wheel);`中，我为什么要使用`&`？

编码：

```
<?php
    class Vehicle {

        function category($wheel = 0) {
            if ($wheel == 2) {
                return "Motor";
            } elseif($wheel == 4) {
                return "Car";
            }
        }
    }

    class Spec {

        var $wheel = '';

        function Spec($wheel) {
            $this->wheel = $wheel;
        }

        function name() {
            $wheel = $this->wheel;
                return Vehicle::category($wheel);
        }

        function brand() {
            $wheel = $this->wheel;
                $kind =& Vehicle::category($wheel);
            if ($kind == "Motor") {
                return array('Harley','Honda');
            } elseif($kind = "Car") {
                return array('Nisan','Opel');
            }
        }
    }

    $kind = new Spec(2);
    echo "Kind: ".$kind->name();
    echo "<br>";
    echo "Brand: " . implode(",", $kind->brand());
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T07:26:10.770

来自 Stack Overflow 问题*[参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139)*：

`=&`参考

*   *[PHP 中的引用赋值运算符 =&](https://stackoverflow.com/questions/1768343)*
*   *[PHP 中的 "=&" 和 "&=" 运算符是什么意思？](https://stackoverflow.com/questions/1367454)*
*   *['&=' 和 '=&' 运算符有什么作用？](https://stackoverflow.com/questions/3177342)*
*   *[=& 在 PHP 中是什么意思？](https://stackoverflow.com/questions/2081806)*

正如（已删除）评论所说，最后一个链接应该适用于您的具体案例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T07:23:10.463

它在这里没有用，因为该示例正在获取对常量的引用，但是当您想“监视”可能更改的值并且希望变量随之更改时，[引用确实有其用途。](http://php.net/references)

# sql - 学生标记功能的 SQL 查询

> ID：10569985
> 
> 赞同：5
> 
> 时间：2012-05-13T07:19:05.377
> 
> 标签：sql, database

把这个作为亚马逊的一个面试问题来测试基本的 SQL 技能，我有点失败了。考虑下表：

```
Student - Stid, Stname, Details
Subject - Subid, Subname
Marks - Stid, Subid, mark 
```

编写查询以打印在每个科目中得分最高的学生的姓名列表。

我给出的错误答案是：

```
select A.Stname from A as Student, B as 
(select Stid, Subid, max(mark) from Marks groupby Subid) where A.Stid = B.Stid 
```

我在想你可以有一个表 B，你可以在其中单独获得最高分，并将其与学生表 A 中的名称匹配。但事实证明我的“groupby”是错误的。

*我认为可以提出的问题的另一个变体是，如果有一门学科的得分最高的学生不止一个，甚至他们的名字也应该包括在内。*

你能帮忙解决这些问题吗？它们似乎很简单，但我无法掌握它。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T07:52:55.160

您只需将问题划分为一些小步骤并逐个解决

首先，获得每个科目的最高分：

```
select SubjectID, max(MarkRate)
from Mark
group by SubjectID; 
```

然后查询谁是具有最大 MarkRate 的 SubjectID：

```
select SubjectID, MarkRate, StudentID
from Mark
where (SubjectID,MarkRate)
in
  (
  select SubjectID, max(MarkRate)
  from Mark
  group by SubjectID
  )
order by SubjectID, StudentID; 
```

然后获取学生的姓名，而不是只显示 StudentID：

```
select SubjectName, MarkRate, StudentName
from Mark
join Student using(StudentID)
join Subject using(SubjectID)
where (SubjectID,MarkRate)
in
  (
  select SubjectID, max(MarkRate)
  from Mark
  group by SubjectID
  )
order by SubjectName, StudentName 
```

除了数据库厂商在加入和关联结果方面的人为差异外，基本步骤是相同的​​；首先，将问题分成一小部分，然后在解决每个问题时将它们整合起来，这样就不会那么混乱了。

* * *

样本数据：

```
CREATE TABLE Student
    (StudentID int, StudentName varchar(6), Details varchar(1));    
INSERT INTO Student
    (StudentID, StudentName, Details)
VALUES
    (1, 'John', 'X'),
    (2, 'Paul', 'X'),
    (3, 'George', 'X'),
    (4, 'Paul', 'X');

CREATE TABLE Subject
    (SubjectID varchar(1), SubjectName varchar(7));    
INSERT INTO Subject
    (SubjectID, SubjectName)
VALUES
    ('M', 'Math'),
    ('E', 'English'),
    ('H', 'History');

CREATE TABLE Mark
    (StudentID int, SubjectID varchar(1), MarkRate int);    
INSERT INTO Mark
    (StudentID, SubjectID, MarkRate)
VALUES
    (1, 'M', 90),
    (1, 'E', 100),
    (2, 'M', 95),
    (2, 'E', 70),
    (3, 'E', 95),
    (3, 'H', 98),
    (4, 'H', 90),
    (4, 'E', 100); 
```

现场测试：[http ://www.sqlfiddle.com/#!1/08728/3](http://www.sqlfiddle.com/#!1/08728/3)

* * *

IN tuple test 仍然是任何其他名称的连接：

转换这个..

```
select SubjectName, MarkRate, StudentName
from Mark
join Student using(StudentID)
join Subject using(SubjectID)

where (SubjectID,MarkRate)
in
  (
  select SubjectID, max(MarkRate)
  from Mark
  group by SubjectID
  )

order by SubjectName, StudentName 
```

..加入：

```
select SubjectName, MarkRate, StudentName
from Mark
join Student using(StudentID)
join Subject using(SubjectID)

join
  (
  select SubjectID, max(MarkRate) as MarkRate
  from Mark
  group by SubjectID
  ) as x using(SubjectID,MarkRate)

order by SubjectName, StudentName 
```

将此代码与直接它的代码进行对比。看看独立查询上的 JOIN 看起来如何像一个 IN 构造？它们看起来几乎一样，只是将 IN 替换为 JOIN 关键字；并且用 JOIN 替换的 IN 关键字实际上更长，您需要为独立查询的列 result( `max(MarkRate) AS MarkRate`) 以及子查询本身 ( `as x`) 取别名。无论如何，这只是风格问题，我更喜欢IN子句，因为意图更清晰。使用 JOIN 只是为了反映数据关系。

无论如何，这是适用于所有不支持元组 test( `IN`) 的数据库的查询：

```
select sb.SubjectName, m.MarkRate, st.StudentName
from Mark as m
join Student as st on st.StudentID = m.StudentID
join Subject as sb on sb.SubjectID = m.SubjectID

join
  (
  select SubjectID, max(MarkRate) as MaxMarkRate
  from Mark
  group by SubjectID
  ) as x on m.SubjectID = x.SubjectID AND m.MarkRate = x.MaxMarkRate

order by sb.SubjectName, st.StudentName 
```

现场测试：[http ://www.sqlfiddle.com/#!1/08728/4](http://www.sqlfiddle.com/#!1/08728/4)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-23T18:15:45.030

```
SQL> select * from stud;

 STUDENTID NAME                           DETAILS
---------- ------------------------------ ------------------------------
         1 Alfred                         AA
         2 Betty                          BB
         3 Chris                          CC

SQL> select * from subject;

 SUBJECTID NAME
---------- ------------------------------
         1 Maths
         2 Science
         3 English

SQL> select * from marks;

 STUDENTID  SUBJECTID       MARK
---------- ---------- ----------
         1          1         61
         1          2         75
         1          3         87
         2          1         82
         2          2         64
         2          3         77
         3          1         82
         3          2         83
         3          3         67

9 rows selected.

SQL> select name, subjectid, mark
  2  from (select name, subjectid, mark, dense_rank() over(partition by subjectid order by mark desc) rank
  3  from stud st, marks mk
  4  where st.studentid=mk.studentid)
  5  where rank=1;

NAME                            SUBJECTID       MARK
------------------------------ ---------- ----------
Betty                                   1         82
Chris                                   1         82
Chris                                   2         83
Alfred                                  3         87

SQL> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T07:24:36.677

我的尝试 - 我将从最大标记开始并从那里构建

架构：

```
CREATE TABLE Student (
  StudentId int,
  Name nvarchar(30),
  Details nvarchar(30)
)
CREATE TABLE Subject (
  SubjectId int,
  Name nvarchar(30)
)
CREATE TABLE Marks (
  StudentId int,
  SubjectId int,
  Mark int
) 
```

数据：

```
INSERT INTO Student (StudentId, Name, Details) 
VALUES (1,'Alfred','AA'), (2,'Betty','BB'), (3,'Chris','CC')

INSERT INTO Subject (SubjectId, Name)
VALUES (1,'Maths'), (2, 'Science'), (3, 'English')

INSERT INTO Marks (StudentId, SubjectId, Mark)
VALUES 
(1,1,61),(1,2,75),(1,3,87),
(2,1,82),(2,2,64),(2,3,77),
(3,1,82),(3,2,83),(3,3,67)
GO 
```

我的查询是：

```
;WITH MaxMarks AS (
  SELECT SubjectId, MAX(Mark) as MaxMark
    FROM Marks
    GROUP BY SubjectId
 )
SELECT s.Name as [StudentName], sub.Name AS [SubjectName],m.Mark
FROM MaxMarks mm
INNER JOIN Marks m 
ON m.SubjectId = mm.SubjectId 
AND m.Mark = mm.MaxMark
INNER JOIN Student s
ON s.StudentId = m.StudentId
INNER JOIN Subject sub
ON sub.SubjectId = mm.SubjectId 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/0511c/44)

1.  找出每个科目的最高分
2.  加入`Marks`，`Student`并`Subject`找到最高分的相关详情

这也照顾了最高分的重复学生

结果：

```
STUDENTNAME SUBJECTNAME     MARK
Alfred  English     87
Betty   Maths           82
Chris   Maths           82
Chris   Science     83 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-13T07:43:45.147

我会说：

```
select s.stname, s2.subname, highmarks.mark
from students s
join marks m on s.stid = m.stid
join Subject s2 on m.subid = s2.subid
join (select subid, max(mark) as mark
  from marks group by subid) as highmarks
    on highmarks.subid = m.subid and highmarks.mark = m.mark
order by subname, stname; 
```

SQLFiddle在这里： [http ://sqlfiddle.com/#!2/5ef84/3](http://sqlfiddle.com/#!2/5ef84/3)

这是一个：

*   在学生表上选择以获取可能的学生
*   加入分数表以将学生与分数相匹配，
*   连接到主题表以将主题 ID 解析为名称。
*   连接到每个主题的最高分数的派生表。

只有获得最高分的学生才能满足所有三个加入条件。这列出了所有获得最高分数的学生，所以如果有平局，都会列出。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-13T13:47:08.177

我喜欢使用 Windows 函数的简单解决方案：

```
select t.*
from (select student.*, su.subname, max(mark) over (partition by subid) as maxmark
      from marks m join
           students st
           on m.stid = st.stid join
           subject su
           on m.subid = su.subid
     ) t
where t.mark = maxmark 
```

或者，或者：

```
select t.*
from (select student.*, su.subname, rank(mark) over (partition by subid order by mark desc) as markseqnum
      from marks m join
           students st
           on m.stid = st.stid join
           subject su
           on m.subid = su.subid
     ) t
where markseqnum = 1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T00:18:17.750

***只是为了好玩，考虑一下对 OP 的描述进行非常字面解释时会遇到的不同问题：“编写查询以打印在每个***科目中得分最高的学生的姓名列表。”

那些在这里回答的人已经写了查询，列出一个学生是否在任何***一***门科目中得分最高，但不一定在***所有***科目中得分。由于 OP 提出的问题不要求在输出中提供主题名称，因此这是一个合理的解释。

要列出在所有科目中得分最高的学生（如果有的话）的姓名（不包括没有分数的科目，因为可以说那时没有最高分），我认为这是可行的，使用 Michael's SQL Fiddle 中的列名，我在[这里](http://www.sqlfiddle.com/#!1/e430f/1)适应了。

```
select StudentName
from Student 
where not exists (
  select * from Subject
  where exists (
    select * from Mark as M1
    where M1.SubjectID = Subject.SubjectID
    and M1.StudentID <> Student.StudentID
    and not exists (
      select * from Mark as M2
      where M2.StudentID = Student.StudentID
      and M2.SubjectID = M1.SubjectID
      and M2.MarkRate >= M1.MarkRate
    )
  )
) 
```

换句话说，如果没有科目中某人对该科目的分数不匹配或超过属于 X 的同一科目的某个分数，则选择学生 X 的姓名。（如果学生在一门学科中获得了多个分数，则此查询将返回学生的姓名，只要其中一个分数是该学科的最高分。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-19T20:01:29.237

使用子查询：

```
select m.subid, m.stid, m.mark
from marks m,
    (select m2.subid, max(m2.mark) max_mark
    from marks m2
    group by subid) subq

where subq.subid = m.subid
and subq.max_mark = m.mark
order by 1,2; 
```

使用带有分区的等级：

```
select subid, stid, mark
from (select m.subid, m.stid, m.mark,
rank() over (partition by m.subid order by m.mark desc) Mark_Rank
from marks m)
where Mark_Rank = 1
order by 1,2; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-18T09:25:33.617

```
 select max(m.mark)  as maxMarkObtained,su.Subname from Student s 
  inner join Marks m on s.Stid=m.Stid inner join [Subject] su on
  su.Subid=m.Subid group by su.Subname 
```

我已经执行了，这应该可以。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-07T18:25:38.240

```
Select S.StudentName 
From Student S 
where S.StudentID IN 
    (Select StudentID from (
        ( Select Max(MarkRate)as MarkRate,SubjectID From  Mark Group by SubjectID)) MaxMarks, Mark
 where MaxMarks.SubjectID= Mark.SubjectID AND MaxMarks.MarkRate=Mark.MarkRate) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-29T07:51:31.950

我将尝试使用 CTE 和窗口函数 rank() 通过一个查询来获得答案

创建表

```
create table Students 
(student_id int,
Name varchar(255),
details varchar(255));

create table Subject(
Sub_id int,
name varchar(255));

create table marks
(student_id int,
subject_id int,
mark int); 
```

答案应该是包含以下字段的表格

学生姓名 | 主题名 | 标记

计划执行步骤

1.  创建 CTE

*   加入表格；
*   对主题进行排名，按标记降序排列

2.  从 CTE 中选择输出字段

```
with CTE as (select s.name, sb.name as subject_name, m.mark, rank() over(partition by sb.name order by m.mark desc) as rn 
from Students s
join marks m on s.student_id = m.student_id
join subject sb
on sb.Sub_id = m.subject_id)
select name , subject_name, mark
from CTE
where rn = 1 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-30T21:04:16.350

```
select Student.Name,dt.Mark from Student inner join 
(
select StudentId, Mark from Marks where Mark in 
(
select Max(Mark) from Marks group by SubjectId
)
)dt
on dt.StudentId = Student.StudentId; 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-06-07T14:07:02.663

```
SELECT          subjectname,
                studentname 
FROM            student s 
INNER JOIN      mark m 
  ON            s.studid = m.studid 
INNER JOIN      subject su 
  ON            su.subjectid = m.subjectid 
INNER JOIN (
  SELECT        subjectid,
                max(value) AS maximum 
  FROM          mark 
  GROUP BY      subjectid
)               highmark h 
  ON            h.subjectid = m.subjectid 
  AND           h.maximum = m.value; 
```

# c# - 使用非托管资源

> ID：10569988
> 
> 赞同：4
> 
> 时间：2012-05-13T07:19:43.053
> 
> 标签：c#, .net, out-of-memory

我使用 3rd 方库，它是原生 dll 的包装器。该库包含一个类型`XImage`、`XImage`一些属性和一个`IntPtr Data()`方法。`XImage`也实现`IDisposable`了，但我不知道它是否正确实现。

我从 TCP 连接中获得了许多`XImage`s 并将它们显示为`PictureBox`.

我曾经将 'XImage' 转换为`System.Drawing.Image`并在 a 中查看它们，`PictureBox`但我得到了`AccessViolationException`.

所以我做了一个包装，`XImage`叫做`Frame`.

```
public class Frame : IDisposable
{
  public uint size { get; private set; }
  private Image image;
  public XImage XImage { get; set; }
  public Image Image { get { return image ?? (image = GetBitmap(this.XImage)); } }
  public DateTime Time { get; set; }

   public Frame(XImage xImage)
  {
    this.XImage = xImage;
    this.size = XImage.ImageBufferSize();
    GC.AddMemoryPressure(size);
  }

  public void Dispose()
  {
    Dispose(true);
    GC.SuppressFinalize(this);
  }

  ~Frame()
  {
    Dispose(false);
  }

  protected virtual void Dispose(bool disposing)
  {
    if (disposing)
    {
      try
      {
        image.Dispose();
      }
      catch { }
      finally
      {
        image = null;
      }
      try
      {
        MImage.Dispose();
      }
      catch { }
      finally { XImage = null; }
    }
    GC.RemoveMemoryPressure(size);
  }
} 
```

并通过处理对`Frame`我的引用解决了`AccessViolationException`. 现在我有另一个问题，当我从 Visual Studio 运行程序时（F5 - 开始调试）一切都很好，但是当我从`.exe`文件或（ctrl + F5 - 开始而不调试）运行它时，内存使用量越来越大直到我得到`OutOfMemoryException`.(Biuld Configuration: Release - X86)。我应该怎么办 ？

**- - 编辑 - -**

我发现`GC.AddMemoryPressure`或者`GC.RemoveMemoryPressure`只是让垃圾收集更频繁地运行，我现在的问题是我有一些小对象，这些小对象有一个大型非托管内存的句柄，而 GC 没有收集这些小对象。

**---- EDIT ----**
调用`GC.Collect`会在运行时解决问题，我设置了一个定时器并`GC.Collect`定期调用，但它会使应用程序冻结一小段时间，所以我不想使用这种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:16:45.290

我发现它`GC`有局限性，在非常重的压力和内存密集型应用程序下可能无法很好地工作。我有一个应用程序不直接对非托管资源、所有标准 .NET 组件执行任何操作，并且它仍然会阻塞内存。它可以使用 GB 的 RAM，但不是因为需要巨大的内存，而是因为大对象的创建和销毁速度相对较快，而且显然没有经常收集。应用程序没有内存泄漏，因为它在强制收集时全部释放。看起来`GC`并不总是能够按时收集未使用的对象，即之前`OutOfMemoryException`。它等待找到最好的时刻，但在它下定决心之前为时已晚。当我定期强制收集时，应用程序运行没有问题。

值得一提的是，`OutOfMemoryException`这并不总是意味着您实际上没有可用内存。这也可能意味着没有足够大的连续内存块可用。尤其是在处理视频和图像时可能会出现这种情况。`GC`可能会认为仍有大量可用内存，但对于您的应用程序来说太碎片化了。我确信`GC`会考虑到碎片化，但它可能并不总是正确。

如果您确定库不是问题，我的建议是更多地尝试使用内存压力方法（[AddMemoryPressure](http://msdn.microsoft.com/en-us/library/system.gc.addmemorypressure.aspx)和[RemoveMemoryPressure](http://msdn.microsoft.com/en-us/library/system.gc.removememorypressure%28v=vs.100%29.aspx)）以帮助`GC`按时完成工作。它可能会解决您的问题，因为您使用的非托管库可能正在处理大量的内存`GC`。或者像你一样做`GC.Collect`。手动收集可能并不理想，但我相信在某些情况下它是合理的。当然，确实希望手动收集大量对象可能会对您的应用程序性能产生影响。

**编辑**

如果手动收集对性能影响太大，请尝试使用重载版本`GC.Collect`，让您有更多控制权。

# javascript - JS对数组进行排序

> ID：10569989
> 
> 赞同：0
> 
> 时间：2012-05-13T07:19:49.253
> 
> 标签：javascript, arrays

我有以下数组：

```
var events = [
 {id : 1, start : 100, end : 120},
 {id : 2, start : 60, end : 240},
 {id : 3, start : 700, end : 720}
]; 
```

如何`start`在保留以下内容的同时根据索引进行排序`id`：

```
var events = [
 {id : 2, start : 60, end : 240},
 {id : 1, start : 100, end : 120},
 {id : 3, start : 700, end : 720}
]; 
```

我试过：

```
events.sort()
events.sort(function(a,b){return a-b}); 
```

但都没有工作:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T07:24:50.723

该`array.sort(..)`函数将数组的两个元素（正在比较）传递给您指定的比较器函数。因为，在那种情况下，`a`和`b`是类似的对象`{id : 3, start : 700, end : 720}`，所以它们不能真正比较类似`a-b`。

改用这个：

```
events.sort(function(a,b){return a.start - b.start;}); 
```

# javascript - 将字符串块复制并粘贴到 JS 代码中

> ID：10569994
> 
> 赞同：0
> 
> 时间：2012-05-13T07:20:56.997
> 
> 标签：javascript, string

> **可能重复：**
> [如何创建多行字符串](https://stackoverflow.com/questions/805107/how-to-create-multiline-strings)

是否可以更轻松地将以下文本分配给变量：

```
line 1
line 2 
line 3 
```

代替：

```
 t="line 1\nline 2\nline 3"; 
```

我想复制并粘贴一些文本来测试一些 RexExt 而不修改每个文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T07:24:46.490

你可以[试试这个网站](http://www.htmlescape.net/stringescape_tool.html)。不是自动的，但比手动快得多

# windows - 创建 3D 文本屏幕保护程序

> ID：10569997
> 
> 赞同：0
> 
> 时间：2012-05-13T07:21:14.347
> 
> 标签：windows, opengl, screensaver

我希望我没有在错误的地方问这个问题，我只是迷路了，现在没有其他地方可以求助。

我的老板坚持要我为 windows 创建一个 3D 文本屏幕保护程序，就像 windows 中的 opengl 一样，但文本必须更长。
在 Windows 中，它限制为 14 个字符。

有谁知道可以创建这样的屏幕保护程序的软件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T07:43:26.337

有一些用于 OpenGL 的字体渲染库，我会使用 GLTT，因为它可以生成 3d 挤压字体。

[http://www.opengl.org/archives/resources/features/fontsurvey/](http://www.opengl.org/archives/resources/features/fontsurvey/)

由于这听起来不像你老板的一个非常重要的要求，我建议你使用即时模式 OpenGL 和你能找到的任何其他库在一天左右的时间里一起破解屏幕保护程序。屏幕保护程序的一般过程实际上非常简单。一旦你初始化了屏幕保护程序并生成了 3d 文本，你只需要调用一些位置`glTranslatef`和`glRotatef`旋转值，然后每帧都增加一次。