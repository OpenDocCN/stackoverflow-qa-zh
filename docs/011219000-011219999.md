# StackOverflow 问答 11219000-11219999

# c# - 用system.net.downloadfile下载文件，Path（第一段）有非法字符

> ID：11219001
> 
> 赞同：0
> 
> 时间：2012-06-27T03:28:27.670
> 
> 标签：c#, asp.net-mvc

```
var request = new WebClient();
request.DownloadFile("http://2nditeration.ca/Images/facebook.png", "C:\tmp\filename.png"); 
```

第一个参数是说Path有非法字符？任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T03:29:31.743

尝试改变

```
"C:\tmp\filename.png" 
```

至

```
@"C:\tmp\filename.png" 
```

该`\`字符引入了一个[转义序列](http://msdn.microsoft.com/en-us/library/h21280bw.aspx)。 `\t`是选项卡并且`\f`是换页符。

告诉编译器忽略以下字符串中的`@`任何转义序列。

或者，你可以`\\`在任何你真正想要的地方使用`\`，比如

```
"C:\\tmp\\filename.png" 
```

# php - 从数组更新记录

> ID：11219002
> 
> 赞同：0
> 
> 时间：2012-06-27T03:28:31.200
> 
> 标签：php, mysql

我在从数组更新记录时遇到问题。当我去更新时，我只得到第一个数字。例如，如果实际值为 58，我只会插入 5

下面是我的代码，下面有进一步的解释：

```
$bidArr = $tmpArr;

foreach($tmpArr as $key => $val)
{
$sqlEp = "select sum(endpoints_c), account_id1_c as id from accounts_cstm as ac join accounts as a on a.id = ac.id_c 
where account_id1_c ='$val' and (status_c IN ('active','llp')) and deleted='0'";
$rowEp = $db->query($sqlEp);
$recordEp = $db->fetch_row($rowEp);

$bidArr[$key]['sold_ep_c'] = $recordEp[0];

//print "<pre>EP";
//print_r($recordEp);

}

foreach($bidArr as $key => $val)
{

$data['sold_ep_c'] = $val['sold_ep_c'];
$db->query_update(TABLE_ACC, $data, "id_c='".$key."'");
print "<pre>EP";
print_r($key);
print_r($data);
} 
```

发生的事情是当我取消注释我得到的第一个 print_r 时：

EPArray ( [0] => 16 [1] => 51067d38

哪个是对的。但是，如果我将其注释掉并取消注释第二个，我会得到：

51067d38 ( [sold_ep_c] => 1 )

为什么这会剥离第一个数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T03:31:52.520

根据聊天...您的数组未初始化。 `$bidArr[$key] = array();`在第一个循环中！

# mysql - 使用两个连接表进行 SQL 排序

> ID：11219010
> 
> 赞同：1
> 
> 时间：2012-06-27T03:29:35.223
> 
> 标签：mysql, sql

我有这两张桌子

```
people
============
id, name 
```

和

```
answer_sheets
============
id, person_id, answer, date_answered 
```

*   `person_id`是 people.id 的外键

现在，我想做的是`people`根据最新的顺序进行排序`answer_sheets.date_answered`（我们可以得出`people`一行可以有很多`answer_sheets`行）

比如说我们有桌子

```
people  
============
id  name  
1   Person1  
2   Person2  
3   Person3  
4   Person4  
5   Person5  

answer_sheets  
=============
id  person_id   answer  date_answered  
1   1           string  JUN 13  
2   2           string  JUN 15  
3   3           string  JUN 17  
4   2           string  JUN 18  
5   1           string  JUN 19  
6   3           string  JUN 20  
7   2           string  JUN 25 
```

我想根据一行的`people`顺序订购`ASC``people``answer_sheets.date_answered`

输出必须是

```
=============
id  name      last_date_answered
4   Person4   NIL
5   Person5   NIL
1   Person1   JUN 19
3   Person3   JUN 20
2   Person2   JUN 25 
```

您可以观察到`people`with `id`s 4 和 5 没有 an`answer_sheet`但它们应该包含在列表中。问题：什么必须是适当的 SQL 查询？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T03:50:08.787

即使没有匹配项也要显示记录，您可以使用[LEFT JOIN](http://www.w3schools.com/sql/sql_join_left.asp)。

```
SELECT p.id, p.name, MAX(a.date_answered)
FROM people p
LEFT JOIN answer_sheets a on p.id = a.personID
GROUP BY p.id, p.name
ORDER BY MAX(date_answered) ASC 
```

而且，如果您想尝试一下，或者更多地使用它，我制作了一个[SQLFiddle](http://sqlfiddle.com/#!3/e6c70/11) ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T03:38:24.297

```
SELECT
  people.id,
  people.name,
  baseview.last_date_answered
FROM (
  SELECT
    person_id,
    MAX(date_answered) AS last_date_answered
  FROM answer_sheets
  ORDER BY IFNULL(MAX(date_answered),'0001-01-01')
  ) AS baseview
  INNER JOIN people ON bseview.person_id=people.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T07:57:49.763

```
SELECT  *
FROM    people
        CROSS APPLY ( SELECT    MAX(date_answered) MaxDate
                      FROM      answer_sheets
                      WHERE     answer_sheets.PersonID = people.ID
                    ) L 
```

# python - python - 字典列表检查键：值

> ID：11219011
> 
> 赞同：1
> 
> 时间：2012-06-27T03:29:58.267
> 
> 标签：python, list, dictionary

**更新：为了清楚起见，我想检查“名称”和“最后一个”的键值，并且仅当它们不在列表中时才添加。**

我有：

```
lst = [{'name':'John', 'last':'Smith'.... .... (other key-values)... }, 
{'name':'Will', 'last':'Smith'... ... (other key-values)... }] 
```

仅当它与现有字典不完全相同时，我才想将新字典附加到此列表中。

换句话说：

```
dict1 = {'name':'John', 'last':'Smith'} # ==> wouldn't be appended 
```

但...

```
dict2 = {'name':'John', 'last':'Brown'} # ==> WOULD be appended 
```

**有人可以解释最简单的方法，以及用英语解释解决方案中发生的事情。谢谢！**

参考：[Python：检查任何列表元素是否是字典中的键](https://stackoverflow.com/questions/7183869/python-check-if-any-list-element-is-a-key-in-a-dictionary?rq=1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T03:42:42.200

由于您要求一种仅检查两个键的方法，即使字典中有其他键：

```
name_pairs = set((i['name'], i['last']) for i in lst)
if (d['name'], d['last']) not in name_pairs:
    lst.append(d) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T03:49:41.553

您可以使用此列表推导来做到这一点，只需将所有内容附加到您的列表并运行：

```
lst.append(dict1)
lst.append(dict2)
[dict(y) for y in set(tuple(x.items()) for x in lst)] 
```

输出是：

```
[
    {'last': 'Smith', 'name': 'John'},
    {'last': 'Brown', 'name': 'John'},
    {'last': 'Smith', 'name': 'Will'}
] 
```

使用这种方法，您可以添加额外的字段，它仍然可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T04:38:46.410

您还可以编写一个小方法来执行此操作并返回列表

```
def update_if_not_exist(lst, val):
    if len([d for d in lst if (d['name'], d['last']) == (val['name'], val['last'])]) == 0:
        lst.append(val)
    return lst

lst = update_if_not_exist(lst, dict1)
lst = update_if_not_exist(lst, dict2) 
```

它通过过滤原始列表以匹配名称和最后一个键并查看结果是否为空来工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T05:26:14.683

```
>>> class Person(dict):
...     def __eq__(self, other):
...         return (self['first'] == other['first'] and
...                 self['second'] == other['second'])
...     def __hash__(self):
...         return hash((self['first'], self['second']))

>>> l = [{'first': 'John', 'second': 'Smith', 'age': 23},
...         {'first': 'John', 'second': 'Smith', 'age': 30},
...         {'first': 'Ann', 'second': 'Rice', 'age': 31}]

>>> l = set(map(Person, l))
>>> print l
set([{'first': 'Ann', 'second': 'Rice', 'age': 31},
    {'first': 'John', 'second': 'Smith', 'age': 23}]) 
```

Person 类的实例可以用作简单的字典。

# android - 删除listview android中的下划线

> ID：11219023
> 
> 赞同：1
> 
> 时间：2012-06-27T03:31:40.380
> 
> 标签：android, android-listview

我想知道如何在android的显示列表视图中删除下划线，有人可以帮我吗？

这是我的列表视图 xml 代码

```
<?xml version="1.0" encoding="utf-8"?>
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/list_mini"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:shadowColor="#ffffff"
android:gravity="center_vertical"
android:paddingLeft="6dip"
android:paddingRight="6dip"
android:textColor="#000000"
android:textSize="9px"
android:background="#fff"
/> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T03:41:01.317

尝试添加这个分隔标签：

```
<ListView
android:everythingelse = "yourStuff"
android:divider="#00000000" <--- this guy
/> 
```

到包含 ListView 元素的 XML 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-16T13:51:28.113

简单的解决方案

```
 android:divider="@null"
 android:dividerHeight="0dp" 
```

# php - 从 PHP 类中获取帖子 ID

> ID：11219024
> 
> 赞同：1
> 
> 时间：2012-06-27T03:31:43.883
> 
> 标签：php, jquery, wordpress, class

我正在编写一个插件，通过单击超链接（jQuery）来更新 wordpress 数据库。我学会这样做的方式是从 PHP 类更新数据库。

我可以使用 user_id 捕获和更新我的表：

```
$current_user = wp_get_current_user();
$user_id = $current_user->ID; 
```

我可以使用 blog_id 捕获和更新我的表：

```
global $blog_id; 
```

但是，我无法使用 post_id 捕获和更新我的表。我试过了：

```
global $wp_query;
$post = $wp_query->post;
$post_id = $post->ID; 
```

这不起作用 - $post_id 返回 0。事实上，在这个类中，is_single 甚至返回 FALSE。我被困住了，非常感谢一些帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T03:33:59.973

**除非您在The Loop**中（啊，成为 WordPress 用户），否则object 属性`$post`不存在。相反，使用 object 属性。**`$posts`**

 **参考：[Wordpress 法典](http://codex.wordpress.org/Class_Reference/WP_Query#Properties)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T03:49:47.317

您必须使用`$posts`而不是`$post`**

# c++ - 为文件块生成 SHA1 哈希

> ID：11219028
> 
> 赞同：1
> 
> 时间：2012-06-27T03:32:22.257
> 
> 标签：c++, sha1

我能够为整个文件生成 SHA-1 哈希。我通过以下 C++ 代码使用 Open SSL 做到了这一点。

```
file_buffer = mmap(0, file_size, PROT_READ, MAP_SHARED, file_name, 0); 
SHA1((unsigned char*) file_buffer, file_size, hash_value); 
```

但我想为较小的文件块创建单独的哈希值。

考虑，

```
File Size  = 10KB and 
Chunk Size = 2KB 
```

在这种情况下，我想为文件的每个块生成 5 个哈希值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T03:41:03.107

```
file_buffer = mmap(0, file_size, PROT_READ, MAP_SHARED, file_name, 0); 

SHA1((unsigned char*) file_buffer, 2048, hash_value_1);
SHA1((unsigned char*) (file_buffer+2048), 2048, hash_value_2);
//... 
```

# java-me - J2ME 中地址簿字段的最大长度

> ID：11219031
> 
> 赞同：3
> 
> 时间：2012-06-27T03:32:54.643
> 
> 标签：java-me, jsr75, pim

我目前正在使用 Java ME 通过 PIM（JSR75 规范）提取设备中的地址簿（ContactList）字段。如果字段的数据类型是字符串，我在获取字段的值的最大长度时遇到问题。我最初认为 API 中有一个方法，`getFieldLength(int fieldId)`但不幸的是没有找到。

有没有办法让我得到这个？

[我需要知道字段的数据长度，因为我只读取字段定义本身。不是价值观。我需要收集设备中所有支持的字段。从这些字段中，我需要获取字段的名称、数据类型和最大长度。我们将上述信息放入我们的服务器应用程序以进行设备移植。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:07:55.440

检索字段的最大长度不是 PIM API 的一部分。

但是，您可以通过尝试将长度增加的内容写入该字段来解决此问题。

未能写入内容将引发异常。

对于您要测试的每个字段，写入 512 个字节，然后写入 1kb、2kb、4kb...

我的猜测是，大多数手机都可以让你写下你想要的所有数据。

请记住在写入尝试之间删除字段。

如果您确实需要精确到字节，则可以在找到上限后使用二分法。

# java - 有人可以帮我从这个文本中提取子字符串吗？

> ID：11219040
> 
> 赞同：1
> 
> 时间：2012-06-27T03:34:12.447
> 
> 标签：java, json, api, data-extraction

我正在尝试创建一个需要从 imdb 提取数据的项目。我见过一些 php 提取器，但我需要一个 java 程序。我需要提取如下信息：

1.  电影名称和年份
2.  小地块
3.  评分
4.  类型
5.  演员

数据如下，我需要从中提取数据：

```
{
    "Title": "Brave",
    "Year": "2012",
    "Rated": "PG",
    "Released": "22 Jun 2012",
    "Runtime": "1 h 40 min",
    "Genre": "Animation, Action, Adventure, Comedy, Family, Fantasy",
    "Director": "Mark Andrews, Brenda Chapman",
    "Writer": "Mark Andrews, Steve Purcell",
    "Actors": "Kelly Macdonald, Billy Connolly, Emma Thompson, Julie Walters",
    "Plot": "Determined to make her own path in life, Princess Merida defies a custom that brings chaos to her kingdom. Granted one wish, Merida must rely on her bravery and her archery skills to undo a beastly curse.",
    "Poster": "http://ia.media-imdb.com/images/M/MV5BMzgwODk3ODA1NF5BMl5BanBnXkFtZTcwNjU3NjQ0Nw@@._V1_SX640.jpg",
    "imdbRating": "7.5",
    "imdbVotes": "1,002",
    "imdbID": "tt1217209",
    "Response": "True"
} 
```

如果有帮助，此数据来自 imdbapi.com。让我知道是否有任何其他方法可以以任何其他方式提取这些数据，我的意思是这些数据将以更结构化的形式显示的其他方式。喜欢卓越。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T03:37:33.937

它是 JSON。使用 JSON 库对其进行解析。

[http://www.json.org/](http://www.json.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T03:39:03.177

在我看来它是[JSON](http://json.org/example.html)。获取 JSON 解析库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T03:39:14.747

这是有效的 JSON（[在此处](http://jsonlint.com/)验证）。在 Java库中使用[JSON 。](http://www.json.org/java/)[下面是一个](http://www.mkyong.com/java/json-simple-example-read-and-write-json/)解析json的例子。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T03:41:56.087

由于这是一个 JSON 字符串，您可以使用 JSON Passer 从数据中提取信息。您可以使用 JSON 解析器将上述信息填充到 JAVA 对象中。请参阅以下链接。

[https://stackoverflow.com/questions/338586/a-better-java-json-library](https://stackoverflow.com/questions/338586/a-better-java-json-library)

# arrays - C#数组如何存储在内存中

> ID：11219041
> 
> 赞同：2
> 
> 时间：2012-06-27T03:34:17.073
> 
> 标签：arrays, c#-4.0, pointers, converter

我想我的主要问题是，只要我不重新初始化（新字节 [#]）作为参数传递的数组，这是否总是有效？

```
static unsafe decimal GetDecimal(byte[] ba)
{
    decimal* decimal_PTR;
    fixed (byte* byte_PTR = &ba[0])
    {
        decimal_PTR = ((decimal*)byte_PTR);
    }
    return *decimal_PTR;
} 
```

我不确定 C# 如何处理内存中的数组。直到大约一个小时前，我什至不知道它们是托管类型。我只想知道如果我将小数作为字节 [] 传递，它是否总是返回正确的值？感谢您提供任何其他信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:33:02.350

在@MJLaukala 通过评论澄清后：

1.  .Net 中的数组是一块连续的内存，就像任何其他语言一样。但与 C/C++ 不同，此块不仅存储数组的元素，还存储其他“信息”，包括数组的等级和长度。话虽如此，&ba[0] 将返回指向数组第一个元素的指针，您可以安全地递增指针直到最后一个元素。ba.Length 将提供数组中元素的数量。

2.  现在，如果您确定字节数组完全代表小数，那么您的代码将正常工作。

十进制的内存布局（128位）：

前 2 个字节为 0

第 3 个字节包含 0 到 28 之间的值，表示 10 的幂除以 96 位整数部分以产生十进制值

第 4 字节：前 7 位为零，第 8 位表示小数的符号（1 表示负数）

接下来的 12 个字节：十进制的整数部分。

# vb.net - DataGridView KeyDown 事件

> ID：11219042
> 
> 赞同：1
> 
> 时间：2012-06-27T03:34:39.390
> 
> 标签：vb.net, datagridview, event-handling

当您处于 EditMode 时，您能弄清楚 DataGridView 的问题是什么吗？

当我按 Enter 时，它不会转到，`DatagridView_Keydown`但是当我按 Enter 两次时，它正在工作。我的目标是按一次 Enter 键来执行 produre。

这是我的代码：

```
Private Sub DatagridView_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles DataGridView.KeyDown
    If e.KeyCode = Keys.Enter Then
        'Do Procedures
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-05T14:15:53.507

检查this [post](https://stackoverflow.com/questions/35179517/vb-net-datagridview-modify-currentcell)，它解决了我的tab键问题。

```
Public Class DataGridViewEx
  Inherits DataGridView

  Protected Overrides Function ProcessCmdKey(ByRef msg As Message, keyData As Keys) As Boolean
    If keyData = Keys.Enter then
      Me.ProcessDownKey(keyData)
      Return True
    End If
    Return MyBase.ProcessCmdKey(msg, keyData)
  End Function
End Class 
```

我刚刚修改`Keys.Tab`为`Keys.Enter`.

# cakephp - 查找调用中的无效引号

> ID：11219043
> 
> 赞同：0
> 
> 时间：2012-06-27T03:34:45.643
> 
> 标签：cakephp

在我的项目中`

```
$cid = $this->Surgical->find('first',array('conditions' => 
 array('to_char(dt_surgery , \'DD-MM-YYYY\' )' =>'to_char(now() ,\'DD-MM-YYYY\')'))); 
```

在调试模式下，查询等于以下内容：=

选择“外科”。“id”从“外科”作为“外科”在哪里 to_char(dt_surgery, 'DD-MM-YYYY') = **'to_char(now(),''DD-MM-YYYY'')'** LIMIT 1

我的问题是 'to_char(now() ,''DD-MM-YYYY'')' 处不需要的引号，即开头和结尾。''DD-MM-YYYY'' 处也有双引号

我的数据库是 Postgres，蛋糕版本是 1.3。实际上我想要选择查询中的以下“where”条件

```
WHERE to_char(dt_surgery , 'DD-MM-YYYY' ) = to_char(now() ,'DD-MM-YYYY') LIMIT 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T03:40:02.033

你试过这个吗？注意第3行没有`' => '`但只是`=`

```
$cid = $this->Surgical->find('first', array(
    'conditions' => array(
        'to_char(dt_surgery , \'DD-MM-YYYY\') = to_char(now() ,\'DD-MM-YYYY\')'
     )
 )); 
```

# http - 课间框架 + 添加页眉

> ID：11219047
> 
> 赞同：0
> 
> 时间：2012-06-27T03:35:47.610
> 
> 标签：http, frameworks, header, recess

如何在 Recess Framework 上添加 HTTP 标头。

我试试这个。

**header('HTTP/1.1 204 无内容');**

但它不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T03:00:40.053

在这种情况下，为特定响应添加 HTTP 标头的最佳方法是创建新的响应类型。这将让您以正常方式从控制器方法返回（如 return $this->ok()）并让框架添加标题。我敢打赌，您的 Recess 版本有 No Content 响应，但它不在 AbstractController 中，因此您无法访问它。请按照以下步骤进行检查。

查看凹槽/目录。我们将修改几个文件。

首先，创建recess/http/responses/NoContentResponse.class.php 文件，如果它不存在（它很可能存在于您的版本中）。使用此代码：

```
<?php
Library::import('recess.http.Response');
Library::import('recess.http.ResponseCodes');

class NoContentResponse extends Response {
    public function __construct(Request $request) {
    parent::__construct($request, ResponseCodes::HTTP_NO_CONTENT, 
                 ResponseCodes::getMessageForCode(ResponseCodes::HTTP_NO_CONTENT));
    }
}
?> 
```

确保 HTTP_NO_CONTENT 响应代码在凹槽/http/ResponseCodes.class.php 文件中（它应该已经在其中）。

现在，您需要确保可以从控制器访问响应。将以下代码添加到凹槽/框架/AbstractController.class.php 文件中：

```
protected function noContent() {
    Library::import('recess.http.responses.NoContentResponse');
    $response = new NoContentResponse($this->request);
    return $response;
} 
```

这将让您从控制器返回 $this->noContent() ，就像任何其他响应一样。祝你好运！

# ruby-on-rails - 有没有办法在 Rails 中为 500 错误页面编写测试？

> ID：11219058
> 
> 赞同：14
> 
> 时间：2012-06-27T03:37:36.780
> 
> 标签：ruby-on-rails

我的rails应用程序中有一个自定义错误页面，测试404错误似乎很简单（获取不存在的页面并对某些文本执行assert_match/select），但我想知道如何测试500错误页面。

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T22:47:40.407

所以我发现我可以在 rspec 中做这样的事情

```
def other_error
   raise "ouch!"
end

it "renders 500 on Runtime error" do
  get :other_error
  response.should render_template("errors/500")
  response.status.should == 500
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-16T23:15:01.673

这就是我所做的，假设您使用的是[rspec](/questions/tagged/rspec "显示标记为“rspec”的问题")、[rspec-mocks](/questions/tagged/rspec-mocks "显示标记为“rspec-mocks”的问题")和[capybara](/questions/tagged/capybara "显示标记为“水豚”的问题")：首先，您需要找到一个调用方法的控制器操作。例如，您可能有`UserController`一个`show`调用`User.find`. 在这种情况下，您可以执行以下操作：

```
it "should render the 500 error page when an error happens" do
  # simulate an error in the user page
  User.should_receive(:find).and_raise("some fancy error")
  visit '/user/1'

  # verify status code
  page.status_code.should eql(500)

  # verify layout
  page.title.should eql('Your site title')
  page.should have_css('navigation')
  page.should have_css('.errors')
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-09T08:31:06.010

如果您使用的是 rspec，则可以使用该`controller`块并在此处定义一些正在测试的测试操作：

```
describe ApplicationController, type: :controller do
  controller do
    def index
      fail 'Something bad happened'
    end
  end

  it 'returns an error page'
    get :index
    expect(response.status).to eq 500
    expect(response).to render_template 'errors/500'
  end
end 
```

这`type: :controller`很重要，否则 RSpec 不会公开该`controller`方法（尽管您可能已经这样做了）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-13T17:17:09.890

```
allow(User).to receive(:find).and_raise('500 error')
get "/users/#{user.id}"
expect(response.status).to eq 500 
```

# python - 为什么不一切都默认为 UTF-8？

> ID：11219060
> 
> 赞同：8
> 
> 时间：2012-06-27T03:37:48.917
> 
> 标签：python, mysql, ruby, utf-8

我只是好奇那里有现代系统默认为 UTF-8 以外的东西。我在 mysql 系统可以有不同编码的多个位置上有一整天的时间。非常令人沮丧。

是否有充分的理由不使用 utf-8 作为默认值（存储空间似乎不是一个很好的理由）？不想争论，只是好奇。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T04:51:54.123

曾几何时，没有 unicode 或 UTF-8，世界各地都在使用不同的编码方案。

直到 1988 年，最初的 unicode 提案才发布，目标是用一种通用的编码方式对世界上的所有字符进行编码。

1991 年的第一个版本涵盖了许多字符表示，但是直到 2006 年才添加了巴厘岛语、楔形文字、N'Ko、Phags-pa 和腓尼基语。

在那之前，腓尼基人和其他人无法用 UTF-8 表示他们的语言，这激怒了许多程序员，他们想知道为什么所有东西都不只是默认为 UTF-8。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-27T03:41:12.983

一些编码有不同的字节顺序（小端和大端）

# iphone - iPhone 应用程序大约 75% 的时间从服务器获得空响应

> ID：11219070
> 
> 赞同：0
> 
> 时间：2012-06-27T03:38:33.750
> 
> 标签：iphone, ios, codeigniter, nsurlconnection, nsurlrequest

我正在使用 NSMutableURLRequest 从我的服务器获取数据。我从中获取的基于 Codeigniter 的 api 端点 100% 的时间都来自网站的浏览器，但大约 75% 的时间用于应用程序。

我运行了一个简单的测试，将帖子值发送到服务器并将它们吐回应用程序。我每次都发送相同的值，我只收到大约 75% 的正确响应。

这是我的应用程序代码。

```
// Request
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@%@", URL_API, endpoint]];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];
[request setCachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData];
[request setHTTPMethod:method];
[request setValue:contentType forHTTPHeaderField:@"content-type"];
[request setTimeoutInterval:timeoutInterval];

DLog(@"bodyValues: %@", bodyValues);

// Set body
[request setHTTPBody:[self encodeDictionary:bodyValues]];

// Connection
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
if (connection) {
    data = [[NSMutableData alloc] init];
}
else {
    [self showError];
} 
```

这是我的服务器的代码。

```
 header('HTTP/1.1 200 OK');
 header('Status: 200 OK');
 header('Access-Control-Allow-Origin: *');
 header('Access-Control-Request-Method: GET,POST');
 header('Access-Control-Allow-Headers: x-requested-with');
 header('Content-Type: application/x-json;charset=utf-8');
 header('Connection: keep-alive');
 print(json_encode($this->input->post())); 
```

如果我可以提供任何其他代码，请告诉我。先感谢您！

编辑：另外，这在模拟器和设备上都是一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:57:30.840

在 - (void)connectionDidFinishLoading:(NSURLConnection *)connection 我在下面的代码中注释掉了以下几行，出于某种原因，我每次都有可靠的字典响应。

```
NSError *error = nil;
//responseString = [NSString stringWithUTF8String:[data bytes]];
responseDictionary = NULL;
//if (responseString != (id)[NSNull null] && responseString.length != 0) {
    responseDictionary = [NSJSONSerialization JSONObjectWithData:data options:NSJSONWritingPrettyPrinted error:&error];
//} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T03:55:12.350

代码看起来不错，除了在生产中，您可能应该使用 NSOperationQueue 将其放在后台线程上。

timeoutInterval 设置为什么？你试过增加它吗？我敢打赌，您的服务器始终响应不够快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:48:03.570

我想知道在初始化您的 NSMutableData ivar 数据之前是否收到响应。

```
data = [[NSMutableData alloc] init];
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

# mysql - 从节点父亲获取价值时出错？

> ID：11219072
> 
> 赞同：4
> 
> 时间：2012-06-27T03:38:52.973
> 
> 标签：mysql

我有一个样本数据：

```
product(id, parent_id, name)
        1 |  0  | Windows
        2 |  1  | XP
        3 |  1  | 7
manufacturer(id, parent_id, name)
        1 |  0  | Westwood Studios
        2 |  1  | Red Alert 1
        3 |  1  | Red Alert 2
product_manufacturer(product_id, manufacturer_id)
        2 |  2  
        3 |  2
        3 |  3 
```

和mysql：

```
SELECT prod.name
FROM `manufacturer` AS child
INNER JOIN `manufacturer` AS parent ON parent.id=child.parent_id 
INNER JOIN `product_manufacturer` AS pr_ma ON pr_ma.manufacturer_id=child.manufacturer_id
INNER JOIN `product` AS prod ON pr_ma.product_id=prod.product_id 
WHERE parent.id=1
GROUP BY prod.id 
```

`parent.id=1 (manufacturer=Westwood Studios)`结果是什么时候`XP, 7`

如何修复何时`parent.id=1`是结果`Windows`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T03:44:16.850

```
SELECT prodparent.name
FROM `manufacturer` AS child
INNER JOIN `manufacturer` AS parent ON parent.id=child.parent_id 
INNER JOIN `product_manufacturer` AS pr_ma ON pr_ma.manufacturer_id=child.manufacturer_id
INNER JOIN `product` AS prod ON pr_ma.product_id=prod.product_id 
INNER JOIN product AS prodparent ON prod.parent_id=prodparent.id
WHERE parent.id=1
GROUP BY prod.id 
```

# java - JAXB xsi：类型子类解组不起作用

> ID：11219074
> 
> 赞同：4
> 
> 时间：2012-06-27T03:39:14.177
> 
> 标签：java, jaxb

我正在按照这篇经常被引用的博客文章中关于使用 xsi:type 的说明进行操作：

[http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-xsitype.html](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-xsitype.html)

基本上我有这个：

```
public abstract class ContactInfo {
}

public class Address extends ContactInfo {

    private String street;

    public String getStreet() {
        return street;
    }

    public void setStreet(String street) {
        this.street = street;
    }
}

@XmlRootElement
public class Customer {

    private ContactInfo contactInfo;

    public ContactInfo getContactInfo() {
        return contactInfo;
    }

    public void setContactInfo(ContactInfo contactInfo) {
        this.contactInfo = contactInfo;
    }
} 
```

而这个测试：

```
@Test
public void contactTestCase() throws JAXBException, ParserConfigurationException, IOException, SAXException {
    Customer customer = new Customer();
    Address address = new Address();
    address.setStreet("1 A Street");
    customer.setContactInfo(address);

    JAXBContext jc = JAXBContext.newInstance(Customer.class, Address.class, PhoneNumber.class);
    StringWriter writer = new StringWriter();
    Marshaller marshaller = jc.createMarshaller();
    marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
    marshaller.marshal(customer, writer);
    String s = writer.toString();
    System.out.append(s);

    StringInputStream sis = new StringInputStream(s);
    DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = documentBuilderFactory.newDocumentBuilder();
    Document doc = db.parse(sis);

    Unmarshaller um = jc.createUnmarshaller();
    JAXBElement result = um.unmarshal(doc, Customer.class);
    Customer f = (Customer) result.getValue();

    writer = new StringWriter();
    marshaller.marshal(customer, writer);
    s = writer.toString();
    System.out.append(s);
} 
```

我得到了这个结果：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<customer>
    <contactInfo xsi:type="address" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <street>1 A Street</street>
    </contactInfo>
</customer>

javax.xml.bind.UnmarshalException: Unable to create an instance of blog.inheritance.ContactInfo 
```

我已经尝试了 JAXB 的默认实现，jaxb-impl-2.1.2，并且基于这个[错误](http://java.net/jira/browse/JAXB-890)，我尝试了 jaxb-impl-2.2.6-b38.jar。它都不起作用。

这不应该工作还是我错过了一些设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T10:29:17.007

在您的测试用例中，您需要指定`DocumentBuilderFactory`是命名空间感知的。如果没有此设置，您的 JAXB 实现的 DOM 输入将不包含格式正确的`xsi:type`属性。

```
 documentBuilderFactory.setNamespaceAware(true); 
```

# iphone - 为什么 ftp list 请求返回不完整的结果

> ID：11219079
> 
> 赞同：0
> 
> 时间：2012-06-27T03:39:38.483
> 
> 标签：iphone, objective-c, ftp

我正在开发一个需要在服务器上请求文档信息的应用程序。我使用[simpleFTP](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Listings/Read_Me_About_SimpleFTPSample_txt.html)来请求文档信息，包括名称和修改日期。但是当文档数量很大时，总会有坏文档信息返回：

```
 Name   /   Modification                                         
......
2012-06-27 11:22:21.661 TestNewFTP[2774:11303] BOOK 9 / 2012-06-26 07:48:00 +0000
2012-06-27 11:22:21.661 TestNewFTP[2774:11303] Jun 26 15:49 BOOK 90 / (null)   
2012-06-27 11:22:21.661 TestNewFTP[2774:11303] BOOK 91 / 2012-06-26 07:49:00 +0000
2012-06-27 11:22:21.661 TestNewFTP[2774:11303] BOOK 92 / 2012-06-26 07:49:00 +0000
2012-06-27 11:22:21.675 TestNewFTP[2774:11303] BOOK 93 /  2012-06-26 07:49:00 +0000
2012-06-27 11:22:21.612 TestNewFTP[2774:11303] 133 / (null) 
```

如第二行所示，文档名称变为“Jun 26 15:49 BOOK 90”，实际上是修改日期，文档名称和修改日期变为（null）。最后一行显示丢失的更多信息。

更重要的是，我发现每次错误都发生在同一个文档上。

我想知道为什么会发生此错误，是否可以修复此错误？

# z3 - Z3 中整数的 min 函数

> ID：11219085
> 
> 赞同：1
> 
> 时间：2012-06-27T03:41:01.087
> 
> 标签：z3

Z3 是否支持整数的 min 函数，即返回两个数字的最小值？我在 Z3 的网站上找不到它。

此外，它是否支持某种可以返回一组数字中最小值的函数？像这样：(assert (= y (min x1 x2 x3 x4 x5)))，其中 x 和 y 是整数。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:51:41.977

`min`是即将到来的浮点理论的保留关键字。您可以使用该`define-fun`命令来定义宏`min2`（二进制）、`min3`（三进制）等。这是一个定义`min2`和`min3`的示例`min4`。

[http://rise4fun.com/Z3/akWje](http://rise4fun.com/Z3/akWje)

SMT 2.0 标准不支持具有任意数量参数的宏。如果您愿意，可以使用 Z3 API 之一来执行此操作。Python 前端非常灵活。这是 Z3Py 中的一个示例。

[http://rise4fun.com/Z3Py/Vvp](http://rise4fun.com/Z3Py/Vvp)

# backbone.js - 骨干.js 无法从集合中读取

> ID：11219089
> 
> 赞同：0
> 
> 时间：2012-06-27T03:41:30.183
> 
> 标签：backbone.js

花了很多小时，仍然无法弄清楚。sampleData.json 文件包含以下 json 对象。

```
[{name: "Tim", age: 5},{name: "Ida", age: 26},{name: "Rob", age: 55}] 
```

为什么这个数据在集合对象中不可用？

```
var ListCollection = Backbone.Collection.extend({
    url: '/sampleData.json'
});

var ListView = Backbone.View.extend({
    el: $('#file-list'),
    initialize: function () {
        _.bindAll(this, 'render');
        this.render(); 
},
render: function() {
    $(this.collection.toJSON()).each(function(key, val) {
        console.log(val['name']);
    });
}
});

var list = new ListCollection();

list.fetch();

var listView = new ListView({
    collection: list
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T04:11:43.273

您的调用实际上是一个 AJAX 调用，因此当您尝试在视图[`list.fetch()`](http://documentcloud.github.com/backbone/#Collection-fetch)中使用时，不能保证它会从服务器检索任何内容。`this.collection`通常的方法有两个组成部分：

1.  让您`render`足够聪明地处理空集合。
2.  将您绑定`render`到集合的`"reset"`事件。

当你`fetch`，[一个`"reset"`事件被触发](http://documentcloud.github.com/backbone/#Collection-fetch)：

> 当模型数据从服务器返回时，集合将*重置*。

因此，当服务器开始返回您的数据时，绑定到集合的`"reset"`事件将触发对您的视图的调用。`render`

所以你想要更像这样的东西：

```
var ListView = Backbone.View.extend({
    el: $('#file-list'),
    initialize: function () {
        _.bindAll(this, 'render');
        this.collection.on('reset', this.render);
        this.render(); 
    },
    render: function() {
        // Whatever really happens here should be able to handle an empty collection.
        this.collection.each(function(m) {
            console.log(m.get('name'));
        });
        return this; // This is conventional, it is expected of you that you do this.
    }
}); 
```

你会注意到我已经从 jQuery 切换[`each`](http://api.jquery.com/each/)到 Underscore 的[`each`](http://documentcloud.github.com/underscore/#each)；Backbone 集合[混合了各种 Underscore 方法，](http://documentcloud.github.com/backbone/#Collection-Underscore-Methods)因此您不妨使用它们。

Backbone 是一个基于事件的系统，因此如果您遇到问题，请首先查看您的事件处理（或缺少事件处理）。

此外，这：

```
[ {name: "Tim", age: 5}, {name: "Ida", age: 26}, {name: "Rob", age: 55} ] 
```

是 JavaScript，不是 JSON，有细微的差别。你`sampleData.json`应该是这样的：

```
[{"name":"Tim","age":5},{"name":"Ida","age":26},{"name":"Rob","age":55}] 
```

注意对象中键周围的引号，JSON 需要它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T03:48:22.880

首先，您将“this.collection.toJSON()”传递给 jquery 的元素选择器。jQuery 的 each 不能那样工作 - 你需要 $.each(this.collection.toJSON())。

其次，如果我错了，请纠正我，但如果你在构造函数中传递它，你不能简单地使用 this.collection。您必须使用 this.options.collection。

此外，如果您使用的是骨干网，您可以使用下划线。我不确定这是否有任何区别，但下划线将使用本机 forEach（如果存在）（firefox、chrome），并将回退到 ie 和其他不具备该功能的浏览器。我不确定 jquery 是否这样做。因此，在这些情况下，速度肯定会有所提高。

# ios - 使用数字格式化程序指定文本字段中的小数位数

> ID：11219091
> 
> 赞同：1
> 
> 时间：2012-06-27T03:42:08.757
> 
> 标签：ios, cocoa-touch, cocoa

在 Cocoa 应用程序中，我使用了大量“带有数字格式化程序的文本字段”对象。这些对象通过在适当的地方添加逗号来改进数据的表示，因此数字“123456”表示为“123,456”。当数字是浮点类型并使用以下代码填充时，这很有帮助：

```
[OutR2C2 setFloatValue:MyVariable2 ]; 
```

那么，数字“123456.567”表示为“123,456.567”，数字“123456.5”表示为“123,456.5.”。

我需要能够指定小数点后总是有两位数，如 123,456.50 或 123,456.56 等。在此对象的属性中，我看不到任何设置小数点数的方法。

在使用“带有数字格式化程序的文本字段”对象时如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T03:51:07.783

你可能有这样的事情：

`NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];`

`[formatter setNumberStyle:NSNumberFormatterDecimalStyle];`

紧随其后的是：

`[formatter setFormat:@"###.##"];`

您需要将其切换为：

`[formatter setFormat:@"###.00"];`

这将使您的数字始终显示两位小数。

或者，您可以使用：

`[formatter setFormat:@"##0.00"];`

如果你想在小数点前显示一个 0，如果它是一个 <1 的值。（例如 0.44 将显示为 0.44）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T18:22:06.763

我感谢在这个问题上的帮助。该响应帮助我找到了如下所示的解决方案。我将其发布为问题的答案，因此它可能会帮助其他有相同问题的人

在这个例子中，一个文档上有两个 NSTextField 对象，由 Interface Builder 显示在一个 .xib 文件中。

在 .h 文件中，在 @interface 部分中……

```
@interface MyViewController : NSWindowController {
@private

    IBOutlet NSTextField *Out1;
    IBOutlet NSTextField *Out2;

// other code goes here

}

In the .m file, in the @implementation section…

    @implementation MyViewController

    -(void)awakeFromNib
    {

    // set decimal places 

        NSNumberFormatter *numberFormatter =
        [[[NSNumberFormatter alloc] init] autorelease];
        NSMutableDictionary *newAttributes = [NSMutableDictionary dictionary];

        [numberFormatter setFormat:@"###,##0;(###,##0)"]; 
    //[numberFormatter1 setFormat:@"###,##0.00;(###,##0.00)"]; // for two decimal places.

        [newAttributes setObject:[NSColor redColor] forKey:@"NSColor"];
        [numberFormatter setTextAttributesForNegativeValues: newAttributes];

       [[Out1 cell] setFormatter:numberFormatter];
       [[Out2 cell] setFormatter:numberFormatter];

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-22T11:22:09.130

我也很欣赏答案和解决方案。

对于那些在 Swift 中寻找解决方案的人来说，这里可能就是其中之一。

```
class NumberFormatterWithFraction_2 : NumberFormatter {

  required init?(coder aDecoder: NSCoder) {
    super.init(coder: aDecoder)

    minimumIntegerDigits = 1
    minimumFractionDigits = 2
    maximumFractionDigits = 2
    roundingMode = .halfDown
  }

} 
```

Then, specify the class defined above as a Custom class of Number Formatter in the Interface Builder of recent Xcode. That would resemble `[formatter setFormat:@"##0.00"];`

For details, [https://developer.apple.com/documentation/foundation/numberformatter](https://developer.apple.com/documentation/foundation/numberformatter)

# c++ - 如何在 mac os x 上从通过 USB 连接的多轨混音器获取输入

> ID：11219094
> 
> 赞同：0
> 
> 时间：2012-06-27T03:42:32.197
> 
> 标签：c++, c, macos, audio, usb

从多轨混音器/设备捕获音频输入的一般方法和 API（最好是 C 或 C++）是什么？（即 Mbox）。

例如，假设我有吉他、贝司、小号等连接到通过 USB/FireWire 连接到我的计算机的混音器，是否有获取该输入的 API 或通用方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:41:55.307

该 API 称为 CoreAudio。您可能已经注意到，在您提到的 MBox 上，“CoreAudio”被列为受支持，尽管 OS X 将支持任何类兼容设备。还有一些构建在 CoreAudio 之上的库，使 CoreAudio 更容易和/或更便携使用，例如 PortAudio 和 RTAdudio。

有关音频编程的概念性介绍，您可能需要查看此处：

[http://blog.bjornroche.com/2011/11/slides-from-fundamentals-of-audio.html](http://blog.bjornroche.com/2011/11/slides-from-fundamentals-of-audio.html)

要直接进入 CoreAudio 编程，您可能想看这里：

[https://developer.apple.com/library/mac/#documentation/MusicAudio/Conceptual/CoreAudioOverview/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/MusicAudio/Conceptual/CoreAudioOverview/Introduction/Introduction.html)

# c++ - C++ 风格：在构造函数主体中使用参数或成员

> ID：11219101
> 
> 赞同：2
> 
> 时间：2012-06-27T03:42:57.047
> 
> 标签：c++, coding-style, constructor

这是我经常有的一个问题，最后想听听人们对自己喜欢的风格的看法。

使用（出于只读目的）构造函数中的参数或成员是更好/首选的做法吗？例如，在这个简单的向量类中：

```
#include <iostream>
#include <array>

class SimpleDoubleVector {
private:
  double * _data;
  std::size_t _size;
public:
  SimpleDoubleVector(double * data, std::size_t size) :
  _size(size) {
    _data = new double[size];
    for (int k=0; k<size; ++k)
      _data[k] = data[k];
  }
  ~SimpleDoubleVector() {
    delete[] _data;
  }
}; 
```

**是不是更好**

1.  `size`在整个构造函数中使用（如图所示）**或**
2.  首先分配/初始化`_size`，然后使用`_size`

**可能的后果：**

哪个更具可读性？

哪个会提供更好的性能（或者它们会因为[复制传播](http://en.wikipedia.org/wiki/Copy_propagation)而等效）？直觉上，感觉从参数中读取会更有效率，因为它永远不会被写入，因此会产生更简单的[依赖图](http://en.wikipedia.org/wiki/Dependency_graph)。

我知道这可能看起来很迂腐，但它经常出现，我真的很想剖析最好的方法（或者至少更好地了解利弊）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T04:35:13.743

**从语义上讲，**局部变量（以及因此的参数）通常比成员变量更受欢迎。举这个有点捏造的例子：

```
class Complex {
    float real_;
    float imag_;

public:
    Complex& operator*=(const Complex& that) {
        real_ = real_ * that.real_ - imag_ * that.imag_;
        imag_ = imag_ * that.real_ + real_ * that.imag_;
    }
}; 
```

乍一看很好，直到您意识到您`real_`在第一行中的修改改变了您`real_`在第二行中的值。即使你抓住了它并将原始数据存储`real_`在一个局部变量中，你也可能在 的情况下`c *= c`，运算符的左侧和右侧是别名，并且你`real_`在第一行中的更改无意中改变了`that.real_`在第二行。换句话说，对成员变量的更改可能会导致对局部变量的更改不会产生的副作用。

**在速度方面，**任何合理的编译器都会发现两者相同。如果您重用参数，不合理的编译器可能会生成更好的代码，因为它已经在本地并且编译器肯定知道除了它可以看到的代码之外没有任何东西可以更改该值。还值得注意的是，即使在良好的编译器上，轻度复杂的情况也会在以下情况下产生更差的输出：

```
void MyClass::foo(int value, MyClass* child) {
    value_ = value;
    for (int i = 0; i < value_; ++i) {
        if (child) child->value_ = i;
        bar(i, child);
    }
} 
```

这个函数绝对没有办法保证，`this`并且`child`是不同的指针。所以它不能`value_`在循环迭代之间保存在一个寄存器中，因为对的赋值`child->value_`可能已经改变`this->value_`。在这种情况下，即使是优秀的编译器也会希望看到您使用该参数。

**可读性方面，**如果您认为在您的成员名称之前或之后的下划线（或者`m_`，就此而言）使其不可读，那么您为什么要使用该符号？构造函数体和普通函数体之间的一致性绝对是可取的。所以我会争辩说，如果你的语义鼓励在函数执行期间将成员变量拉入局部变量，那么也在构造函数中执行此操作（只需使用参数）。但是如果在你的其他成员函数中没有使用这样的约定，那么也不要在构造函数中使用它——让编译器来处理它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T04:59:08.097

我总是在整个构造函数中使用参数（如果可能），原因有两个：

1）我正在从外部输入初始化对象状态。使用参数强调了对外部数据的这种使用。

2）当更广泛地使用初始化列表时，它可以防止在初始化之前使用类成员的各种问题（由于初始化顺序由成员顺序指定，而不是构造函数中的初始化顺序）。

我无法想象任何性能原因会使一个与另一个显着不同，因此只有当分析器告诉我更改它会导致显着改进时，我才会选择不同的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T04:07:19.103

如果问题是可读性，答案应该是初始化列表。既然`_data`是排在第一位的，这个问题就有点勉强了。

```
 SimpleDoubleVector(double * data, std::size_t size)
        : _data(std::copy(data, data+size, new double[size])),
          _size(size)
        {} 
```

如果`_size`是第一个列出的，有一个选择，但在这种情况下我会选择使用参数，因为没有`_`. 我相信`std::copy`性能差异可以忽略不计。

如果初始化必须发生在构造函数的主体中，如果参数中的名称和数据成员名称具有 1-1 对应关系，我将使用相同的推理。如果一个数据成员是用某种参数计算来初始化的，那么如果它对其他数据成员的初始化有用，那么显然代码应该使用计算值。如果有一个复杂的初始化，将初始化放在一个单独的函数中通常很有用。这需要多个构造函数。可以编写此函数以利用已初始化的数据成员，以最小化构造函数和初始化函数之间传递的参数。

```
 SimpleDoubleVector(double * data, std::size_t size) {
        _size = size;
        initialize_data(data);
    }

    SimpleDoubleVector(std::size_t size) {
        _size = size;
        initialize_data();
    }

    double * initialize_data(double * data = 0) {
        _data = new double[_size];
        if (data) {
            for (std::size_t k = 0; k < _size; ++k) {
                _data[k] = data[k];
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T04:07:36.543

我会按如下方式上课：

```
class SimpleDoubleVector {
private:
  std::size_t _size; // Make sure this is declared first!!
  double * _data;
public:
  SimpleDoubleVector(double * data, std::size_t size) : 
      _size(size), data(new double[size]) // Use initialization lists
  {
    for (int k = 0; k < _size; ++k) // Could eliminate all this with std::vector
      _data[k] = data[k];
  }
  ~SimpleDoubleVector() {
    delete[] _data;
  }
}; 
```

当然，这不是所有代码，因为您正在管理资源，所以您需要实现三规则（或 C++11 中的 5 或类似的规则）。但是，有几点建议：

1.  当您`_size = size;`在构造函数的主体中执行此操作时，您不再进行初始化，而是进行*赋值*，这就是您应该使用初始化列表的原因（当然对于内置类型，这*实际上*是同一件事，但是，我会认为*意图*不同）。

2.  传递给构造函数的参数用于初始化示例中的成员变量。除了执行初始化之外，您不应将它们用于任何其他目的。

3.  `std::vector<double>`使用or可能会更好`std::array<double>`，但我相信这与问题无关。

另外，我不知道依赖图与这个问题有什么关系。

（个人注意：我从来不喜欢`_`成员变量前面的样式）

# java - play 2.0.2 测试查询参数错误

> ID：11219102
> 
> 赞同：0
> 
> 时间：2012-06-27T03:42:57.167
> 
> 标签：java, routes, playframework-2.0

我有一个 Java play 2 控制器，它接受这样的查询字符串参数：

控制器：

```
public static Result syncInterests(
        String lastsyncdate,
        String fooid) {
} 
```

测试：

```
Result result = routeAndCall(fakeRequest(GET, "/foo/sync?fooid=123")); 
```

但是得到这个错误。这是什么意思？这肯定是一个 java 动作。

```
failed: This is not a JavaAction and can't be invoked this way. 
```

编辑：

这就是我在路线中定义的方式。lastsyncdate 是可选的。

```
GET  /foo/sync  controllers.FooSync.syncInterests(lastsyncdate: String, fooid: String) 
```

编辑：

我无法让它工作。所以我用这个函数来测试继续我的其他工作。

```
Result result = callAction(controllers.routes.ref.FooSync.syncInterests(time, fooId)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T03:57:39.713

我认为您的网址“/foo/sync?fooid=123”对于控制器不正确。它应该是 **"/foo/syncInterests?fooid=123"** 并且**syncInterests** 方法应该有返回语句。

# jsf-2 - 当有参数时，实际重定向链接与 faces-configs.xml 中的链接不同

> ID：11219105
> 
> 赞同：1
> 
> 时间：2012-06-27T03:43:10.597
> 
> 标签：jsf-2

在 face-configs.xml 中，

```
 <navigation-rule>
     <from-view-id>/login.jspx</from-view-id>
           <navigation-case>
        <from-outcome>failure</from-outcome>
        <to-view-id>/login.jspx?Error=InvalidUser</to-view-id>
        <redirect />
    </navigation-case>
      </navigation-rule> 
```

当Login返回“失败”时，返回页面是login.jspx，而不是网站地址中的login.jspx?Error=InvalidUser。

我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:27:21.340

JSP/JSPX 与 JSF 有很大不同。在使用 JSF2.x 版本时，最好建议使用 JSF 页面（.xhtml）进行 UI 开发。我建议您完全使用 JSF 或 JSP 来完成应用程序，而不是修复上述错误，不建议将两者合并并陷入兼容性问题。

同样在 JSF-2.x 版本中，我们不需要在 faces-config.xml 中定义导航规则，它们可以配置为网页或相应的托管 bean 本身

```
 <h:commandLink id = "submitBtn" value="New Page" action="#{bean.showPage}">
 </h:commandLink> 
```

bean可以有一个方法

```
public String showPage(){
  return "\login.xhtml";
} 
```

或者

```
<h:commandButton id="submitBtn" value="Submit" action="Response.jsp"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:16:15.940

您需要在 中指定它们，`<view-param>`而`<redirect>`不是在`<to-view-id>`.

```
<navigation-case>
    <from-outcome>failure</from-outcome>
    <to-view-id>/login.jspx</to-view-id>
    <redirect>
        <view-param>
            <name>Error</name>
            <value>InvalidUser</value>
        </view-param>
    </redirect>
</navigation-case> 
```

由于 JSF 2.0 新的隐式导航功能，可以完全摆脱导航案例。以上可以通过在action方法中返回以下字符串来替换。

```
public String login() {
    // ...

    if (failure) {
        return "/login.jspx?Error=InvalidUser&faces-redirect=true";
    }
} 
```

# php - 如何从命令行 PHP 写入文件？

> ID：11219122
> 
> 赞同：2
> 
> 时间：2012-06-27T03:46:13.023
> 
> 标签：php, shell, command-line

我正在尝试编写一些命令行 PHP - 使用 PHP 从命令行写入文件有技巧吗？该文件名为 testcl.php，我使用以下命令执行它：

```
/usr/bin/php -f /var/www/html/media/testcli.php

$myFile = "test.txt";
$fh = fopen($myFile, 'a');
fwrite($fh, "batman2");
fclose($fh);
echo "batman"; 
```

batman echo 语句有效，所以我知道文件正在运行 - 但由于某种原因它没有写入 test.txt。如果我访问 testcli.php 它会成功写入 text.txt - 所以我想我错过了一些技巧。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T03:52:33.363

我怀疑你有一个 CWD 问题：`test.txt`是一个相对路径，所以它会根据你在调用脚本时所处的位置进行计算 - 这可能在 shell 和网络服务器上有所不同。尝试

```
$myFile=dirname(__FILE__).'/test.txt'; 
```

这也可能是权限问题：确保您对 websrver 目录具有写入权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T03:51:09.373

这可能是一个权限问题。尝试使用：

`sudo /usr/bin/php -f /var/www/html/media/testcli.php`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T03:50:11.837

在运行 php 代码之前，我会 cd 到 /var/www/html/media/。还要确保当前用户可以写入该目录/

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T03:51:35.360

两种可能：

*   当您从 Web 服务器运行 PHP 时，它始终以当前目录设置为包含脚本的目录运行。当您从命令行运行 PHP 时，工作目录将保持不变。检查您的 cwd 以获取输出文件。

*   如果该文件不存在，则您正在运行 php-cli 的用户可能没有写入其当前目录的权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-16T07:59:52.783

相对于 OP 问题。例如，如果我们有两个文件，其中一个是`log.php`写入`log.txt`文件，并且都位于`C:/MAMP/htdocs`.Log.php 中，其中包含：

```
<?php
 $txt = "user id date";
 $myfile = file_put_contents(dirname(__FILE__).'/logs.txt', $txt.PHP_EOL , FILE_APPEND | LOCK_EX);
echo dirname(__FILE__);
?> 
```

这将在执行 log.php 的目录中找到 log.txt 文件：

> php -f C:/MAMP/htdocs/log.php

** 这里`php`设置为环境变量，其他人可以使用`C:\MAMP\bin\php\php7.1.7\php.exe`

** 将 php7.1.1 设置为您的 php 版本

** 此示例适用于 MAMP，可以在其他本地服务器上使用

# php - SimpleXMLElement 在共享服务器上不起作用

> ID：11219125
> 
> 赞同：0
> 
> 时间：2012-06-27T03:46:28.780
> 
> 标签：php, xml, simplexml

我在我的一个应用程序中使用以下代码，并且需要来自 url 的一些特定数据。

```
$url = 'http://twitter.com/#!/rubarrichello';

$sXML = new SimpleXMLElement($url, NULL, TRUE);
$screen_name = $sXML->screen_name; 
```

我只需`$screen_name`要从`$sXML`.this 代码中获取的值在我的本地服务器上运行良好，而不是在共享服务器上运行良好，我已经检查了 libxml 的 php 信息文件

它是这样写的：

```
libXML support  active
libXML Compiled Version 2.7.8
libXML Loaded Version   20708
libXML str
eams   enabled 
```

我的知识`SimpleXMLElement`非常有限。谁能指导我如何调试这个？

共享服务器上的 PHP 版本是 5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T04:29:59.913

> 谁能指导我如何调试这个？

*   您可以通过使用查看请求中的数据`file_get_contents($url)`

*   您可能希望`htmlentities()`在结果上运行，因此您可以`echo`将其作为伪 HTML。

*   您会看到 fetch 工作正常，只是没有返回您想要的格式。

* * *

为了做你想做的事，你必须找到正确的 URL，它会返回 XML（不是 HTML）。从我上面评论中的其他链接来看，它（可能）看起来像

`http://search.twitter.com/search.atom?q=from:rubarrichello&rpp=5`

或者

`...com/search.json?...`

对于 JSON（然后您将在其中使用`json_decode()`）。但是，我对 twitter API 不太熟悉，所以您可能需要阅读手册。

# javascript - Backbone：调用扩展视图的覆盖渲染（）函数

> ID：11219130
> 
> 赞同：6
> 
> 时间：2012-06-27T03:47:17.627
> 
> 标签：javascript, view, backbone.js, overriding

我有一个`WorkoutExerciseRowView`which extends `ExerciseRowView`。渲染函数非常相似，除了`WorkoutExerciseRowView`必须在渲染中添加一些参数`ExerciseRowView`。如何在 ' 的渲染函数中调用`ExerciseRowView`' 的`WorkoutExerciseRowView`渲染函数？

```
var WorkoutExerciseRowView = ExerciseRowView.extend( {      
    render : function() {
        //return this.constructor.render({ // doesn't work
        return this.render({ // doesn't work
            workoutExercise : this.model,
            exercise : this.model.get("exercise"),
            workoutSection : this.model.get("section"),
            isEditable : true,
            number : this.number,
            WorkoutExercise : WorkoutExercise,
            WorkoutSection : WorkoutSection
        });
    }
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T04:00:37.477

```
var WorkoutExerciseRowView = ExerciseRowView.extend( {      
    render : function() {
        return ExerciseRowView.prototype.render.call(this,{
            workoutExercise : this.model,
            exercise : this.model.get("exercise"),
            workoutSection : this.model.get("section"),
            isEditable : true,
            number : this.number,
            WorkoutExercise : WorkoutExercise,
            WorkoutSection : WorkoutSection
        });
    }
}); 
```

来自 Backbone 的文档：http: [//backbonejs.org/#Model-extend](http://backbonejs.org/#Model-extend)

> 关于 super 的简要说明：JavaScript 没有提供调用 super 的简单方法——在原型链上定义的同名函数。如果你重写了一个像 set 或 save 这样的核心函数，并且你想调用父对象的实现，你必须显式地调用它，如下所示：

`Backbone.Model.prototype.set.call(this, attributes, options);`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T04:02:15.097

你应该可以使用

```
ExerciseRowView.prototype.render.call(this) 
```

这将从ExerciseRowView 调用渲染函数，范围设置为此（当前模型）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-31T19:05:30.727

```
this.constructor.__super__.render.call(this,{}); 
```

# google-chrome - 在 Chrome 扩展程序的弹出窗口中保留页面独有的数据？

> ID：11219132
> 
> 赞同：0
> 
> 时间：2012-06-27T03:47:24.347
> 
> 标签：google-chrome, google-chrome-extension, popup, local-storage

我觉得我在这里遗漏了一些非常明显的东西。
我正在构建一个 Chrome 扩展程序，我希望能够保留特定于正在查看的页面的数据，这些数据会影响 popup.html。

一个简单的示例将遵循以下步骤：
- 打开 google.com 的标签
- 单击扩展图标以打开弹出窗口，背景为蓝色。
- 将 Popup 已打开的注释保存到 localStorage。关闭弹出窗口。
- 再次打开 Popup，由于 localStorage 设置，背景为绿色。
- 打开 yahoo.com 的标签

当我在 yahoo.com 选项卡上打开弹出窗口时，我希望背景为蓝色，但 localStorage 特定于弹出窗口，而不是选项卡，因此背景实际上是绿色的。

如何将数据存储在特定于用户正在查看的选项卡的弹出窗口中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T13:17:45.803

转自以上评论：

> 我刚刚发现 chrome.tabs.getSelected(null, function(tab) { console.log(tab); }) 会给我有关当前选定选项卡的信息......所以我应该能够从这里弄清楚。

# css - 居中全窗口视频

> ID：11219136
> 
> 赞同：3
> 
> 时间：2012-06-27T03:47:47.937
> 
> 标签：css, html, video, html5-video, media-queries

我试图让一个 HTML5 视频在`background: center center fixed; background-size: cover;`不使用 JS 的情况下完全像一个元素一样运行（我知道有 JS 库可以做到这一点）。我想出了如何将宽度或高度设置为 100%，具体取决于窗口的纵横比与视频的纵横比相比，使用媒体查询（下面的示例假设您使用的是 16/9 视频）。我现在要做的就是让视频水平或垂直居中。

任何帮助，将不胜感激。

```
@media screen and (max-aspect-ratio: 16/9) {
  div#fixed video {
    position: absolute;
    height: 100%;
    z-index: -100;
  }
}

@media screen and (min-aspect-ratio: 16/9) {
  div#fixed video {
    position: absolute;
    width: 100%;
    z-index: -100;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-18T02:14:10.903

你甚至不需要媒体查询来实现这一点:)

尝试这个：

```
#fixed {
    position: relative;
    height: 100vh;
    z-index: 0;
}
#fixed video {
    -webkit-transform: translateX(-50%) translateY(-50%);
    -moz-transform: translateX(-50%) translateY(-50%);
    -ms-transform: translateX(-50%) translateY(-50%);
    -o-transform: translateX(-50%) translateY(-50%);
    transform: translateX(-50%) translateY(-50%);
    position: absolute;
    top: 50%;
    left: 50%;
    min-width: 100%;
    min-height: 100%;
    width: auto;
    height: auto;
    z-index: -100;
}
```

```
<div id="fixed">
	<video autoplay loop class="bg-video">
		<source src="https://d2v9y0dukr6mq2.cloudfront.net/video/preview/abstract-rainbow_wjpctkdes__PM.mp4" type="video/mp4">
	</video>
</div>
```

这是一个[有效的小提琴示例](http://jsfiddle.net/2jyLnm3L/)。

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:58:28.343

```
@media screen and (max-aspect-ratio: 16/9) {
  div#fixed video {
    position: absolute;
    height: 100%;
    z-index: -100;
    top: 0;
    bottom: 0;
    margin:auto 0;
  }
}

@media screen and (min-aspect-ratio: 16/9) {
  div#fixed video {
    position: absolute;
    width: 100%;
    z-index: -100;
    text-align: left;
    right: 0;
    left: 0;
    margin:0 auto;
  }
} 
```

# php - 可以将 INSERT、UPDATE、DELETE、SELECT 查询放在同一个文件中吗

> ID：11219139
> 
> 赞同：3
> 
> 时间：2012-06-27T03:48:31.337
> 
> 标签：php, mysql

我有文件夹和页面 /admin/add/index.php、/admin/edit/index.php 和 /admin/view/index.php 都需要页面 /admin/php.php ，其中包含我所有的 php 代码每个，我都无法打开流错误。我应该将它们分开`<? ?>`还是做我做不到的事情或最好的方法？

我的 admin/php.php 文件：

```
<?php
FOR ADD CONTACT PAGE

require ("../../dbandpassword.php");
$ID = $_POST['ID'];
$firstname = mysqli_real_escape_string($con,$_POST['firstname']);
$lastname = mysqli_real_escape_string($con,$_POST['lastname']);

$sql = "INSERT INTO table (firstname, lastname) VALUES ('$firstname', '$lastname')"; 

mysqli_query($con,$sql) or die ("Error: ".mysqli_error($con));

header("location: http://www.mydomain.com/admin/edit/?ID=".mysqli_insert_id($con));

exit;
}
FOR EDIT CONTACT PAGE

require ("../../dbandpassword.php");
$ID = $_POST['ID'];
$firstname = mysqli_real_escape_string($con,$_POST['firstname']);
$lastname = mysqli_real_escape_string($con,$_POST['lastname']);

$sql = "UPDATE table SET `firstname` = '$firstname', `lasttname` = '$lastname' WHERE `table`.`ID`  = '$ID' LIMIT 1";

mysqli_query($con,$sql) or die ("Error: ".mysqli_error($con));

FOR VIEW CONTACT PAGE

require ("../../dbandpassword.php");

$ID = $_GET['ID'];

$sql = "SELECT * FROM table WHERE ID='$ID' limit 1" or die ('Error: ' .mysqli_error());

$query = mysqli_query($con,$sql) or die ('Error: ' .mysqli_error($con));
$row = mysqli_fetch_array($query);

$space = (!empty($row['firstname']) && !empty($row['lastname'])) ? ' ' : '';        
$name = $row['firstname'].$space.$row['lastname'];       

mysqli_query($con,$sql) or die ("Error: ".mysqli_error($con));

FOR VIEW ALL CONTACTS PAGE

require ("../dbandpassword.php");

$ID=$_GET['ID'];

$query = "SELECT * FROM table WHERE firstname IN ('Bob','Joe') AND lastname = 'Smith' ORDER BY date DESC";

$result=mysqli_query($con,$query);
while ($row = mysqli_fetch_array($result)) {

$space = (!empty($row['firstname']) && !empty($row['lastname'])) ? ' ' : '';        
$name = $row['firstname'].$space.$row['lastname'];   

mysqli_query($con,$query) or die ("Error: ".mysqli_error($con));
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T03:55:07.640

最好创建一个 php 文件，然后为每个操作创建单独的函数，例如

```
function insert()
{

}

function delete()
{

}

function update()
{

}

function fetch()
{

} 
```

# android - 自动下载 Webview 中显示的所有图像

> ID：11219140
> 
> 赞同：0
> 
> 时间：2012-06-27T03:48:42.187
> 
> 标签：android

**我的代码：-**

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webview);
    // defining the WebView
    WebView myWebView = (WebView) findViewById(R.id.web);
    // Websetting can be used to define several web related settings.
    WebSettings webSettings = myWebView.getSettings();
    // Enabling JAVASCRIPT
    webSettings.setJavaScriptEnabled(true);
    // providing navigational access
    myWebView.setWebViewClient(new WebViewClient());
    // loading the URL
    myWebView.loadUrl("http://abcd.com");
} 
```

它是任何人都会在那里找到的最简单的 webview，我想在那里做一些修改，但我做不到，所以请帮助我。

我打开的网站包含很多图像，现在我想知道，当访问一个网站时，它包含的所有图像和文本都被下载以在 UI 上显示它，当我们关闭页面时，所有的图像都丢失了，如果我猜对了。要下载图像，必须专门下载它。就像我们在 Opera 浏览器或任何其他浏览器中所做的那样。

**所以我想将我的 webview 在 UI 中打开的所有图像自动下载到我的 SDCard 上的一个目录（路径已知 /sdcard/pics）中。**有办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:46:00.103

您可以在 WebView 上启用缓存并将缓存中的所有图像保存到您需要的任何位置。

要启用缓存，请使用以下代码：

```
webView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);
webView.getSettings().setAppCacheMaxSize(1024 * 1024 * 8); 
```

[您可以在将 Android WebView 缓存保存到 SD 卡](http://www.devahead.com/blog/2012/01/saving-the-android-webview-cache-on-the-sd-card/)中找到有关保存缓存内容的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T04:53:16.437

`WebView`使用缓存目录方法的另一种方法是在加载图像时即时拦截对图像的所有请求。您可以将 a 设置为实现以下方法之一的`WebViewClient`您的：`WebView`

*   [onLoadResource](http://developer.android.com/reference/android/webkit/WebViewClient.html#onLoadResource%28android.webkit.WebView,%20java.lang.String%29)（从 API lvl 1 开始）
*   [shouldInterceptRequest](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldInterceptRequest%28android.webkit.WebView,%20java.lang.String%29)（从 API lvl **11**开始）

第一种方法应该适用于所有设备，但可能会导致下载资源两次：一次是手动将其保存在 SD 卡上的特定目录中，一次是`WebView`自行下载。第二种方法允许您在将下载的资源保存在某处后返回，从而有效地只下载一次。

您应该能够在 SO 上或通过查询您最喜欢的搜索引擎找到大量示例。

# c++ - C++重载'--'后缀运算符

> ID：11219142
> 
> 赞同：0
> 
> 时间：2012-06-27T03:48:56.567
> 
> 标签：c++, class, operator-overloading, postfix-operator

我正在尝试重载“--”后缀运算符。我有这个代码：

```
class Counter
{
 private:
    int count;
 public:
    Counter()
    { count = 0; }
    Counter(int c)
    { count = c; }

    void setCount(int c)
    { count = c; }
    int getCount()
    { return count; }

    int operator--()
    {
       int temp = count;
       count = count - 1;
       return temp;
    }
}; 
```

然后在`main`我有这个函数调用：

```
 Counter a; 
 a.setCount(5); 
 cout << a-- << endl; 
```

这给了我这个错误： `error: no ‘operator--(int)’ declared for postfix ‘--’, trying prefix operator instead`

但是当我这样调用`operator--`函数时，它工作得很好：

```
 cout << a.operator--() << endl; 
```

是什么赋予了？它应该工作正常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T03:51:21.867

对于重载后缀运算符，您需要`int`在函数签名中指定一个虚拟参数，即还应该有一个`operator--(int)`. 您定义的是前缀减量运算符。有关更多详细信息，请参阅此[常见问题解答](http://www.parashift.com/c++-faq-lite/operator-overloading.html#faq-13.14)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-27T03:51:58.717

后缀运算符将 a`int`作为参数以将其与前缀运算符区分开来。

后缀：

```
int operator--(int)
{
} 
```

字首：

```
int operator--()
{
} 
```

# php - 未从 PHP.INI 中选择 extension_dir：PHP 5.3.5 未在 Apache 2.2.22 上配置 Windows Ultimate 7 上的 Zend 1.11.11

> ID：11219147
> 
> 赞同：2
> 
> 时间：2012-06-27T03:49:53.413
> 
> 标签：php, windows, apache

我正在尝试在具有 Service Pack 1 的 Windows 7 Ultimate 64 位上配置 PHP 5.3.5、Apache 2.2.22、Zend 1.11.11。我咨询了许多站点并应用了几乎所有想法，但仍然无法为 Zend 配置 MySql 适配器。PHP.INI 文件未正确配置，因为 extension_dir 需要定向到适配器 dll 可用的正确位置，我得到：

> ***当前未安装 mysql 驱动程序***

以下是我迄今为止采取的一些行动：

**HTTPD.CONF (Apache) 中的更改**

```
LoadModule php5_module c:/PHP/php5apache2_2.dll
PHPIniDir "c:/php" - also tried, 'c:/php', c://php with upper case and backslashes combination too
    DocaumentRoot "E:/Personel/Mics/libraryprj/public/"
    <Directory />
        #Options FollowSymLinks ::commented out manually
        #AllowOverride None::commented out manually
        #Order deny,allow ::commented out manually
        #Deny from all ::commented out manually
        Options All
        AllowOverride All 
    </Directory>
    AddType application/x-httpd-php .php
    AddType application/x-httpd-php .phtml 
```

**PHP.INI 文件的变化**

```
extension_dir = "C:\php\ext"
extension=c:\php\ext\php_pdo_mysql.dll - out of desparation
extension=p_pdo_mysql.dll 
```

我在咨询了可能的网站后做的杂事清单：

1.  将 PHP/EXT 文件夹的所有内容复制到 Windows/System32
2.  将 PHP 文件复制到 c:\Windows, c:\Windows\system32
3.  添加了注册表项 [HKEY_LOCAL_MACHINE\SOFTWARE\PHP]，IniFilePath=c 的值：\php

核心问题是让 Apache 选择正确的 PHP.INI 文件，这样如果我在那里进行任何更改，它们就会被反映。截至目前，我正在尝试设置 extension_dir 目录以加载`php_pdo_mysql.dll`但在任何地方都找不到正确的 PHP.INI。由于此处对新帐户的限制，无法发布 PHPInfo 屏幕截图。以下是phpinfo的结果：

{

```
Build Date  Jan 6 2011 17:50:45
Compiler    MSVC6 (Visual C++ 6.0)
Architecture    x86
Configure Command   cscript /nologo configure.js "--enable-snapshot-build" "--disable-isapi" "--enable-debug-pack" "--disable-isapi" "--without-mssql" "--without-pdo-mssql" "--without-pi3web" "--with-pdo-oci=D:\php-sdk\oracle\instantclient10\sdk,shared" "--with-oci8=D:\php-sdk\oracle\instantclient10\sdk,shared" "--with-oci8-11g=D:\php-sdk\oracle\instantclient11\sdk,shared" "--enable-object-out-dir=../obj/" "--enable-com-dotnet" "--with-mcrypt=static"
Server API  Apache 2.0 Handler
Virtual Directory Support   enabled
Configuration File (php.ini) Path   C:\Windows
Loaded Configuration File   (none)
Scan this dir for additional .ini files     (none)
Additional .ini files parsed    (none)
PHP API     20090626
PHP Extension   20090626
Zend Extension  220090626
Zend Extension Build    API220090626,TS,VC6
PHP Extension Build     API20090626,TS,VC6
Debug Build     no
Thread Safety   enabled
Zend Memory Manager     enabled
Zend Multibyte Support  disabled
IPv6 Support    enabled
Registered PHP Streams  php, file, glob, data, http, ftp, zip, compress.zlib, phar
Registered Stream Socket Transports     tcp, udp
Registered Stream Filters   convert.iconv.*, mcrypt.*, mdecrypt.*, string.rot13, string.toupper, string.tolower, string.strip_tags, convert.*, consumed, dechunk, zlib.*

Zend logo This program makes use of the Zend Scripting Language Engine:
Zend Engine v2.3.0, Copyright (c) 1998-2010 Zend Technologies

PHP Credits
Configuration
apache2handler
Apache Version  Apache/2.2.22 (Win32) PHP/5.3.5
Apache API Version  20051115
Server Administrator    email@home.com
Hostname:Port   localhost:80
Max Requests    Per Child: 0 - Keep Alive: on - Max Per Connection: 100
Timeouts    Connection: 300 - Keep-Alive: 5
Virtual Server  No
Server Root     D:/Apache/Apache2_2_22
Loaded Modules  core mod_win32 mpm_winnt http_core mod_so mod_php5 mod_actions mod_alias mod_asis mod_auth_basic mod_authn_default mod_authn_file mod_authz_default mod_authz_groupfile mod_authz_host mod_authz_user mod_autoindex mod_cgi mod_dir mod_env mod_include mod_isapi mod_log_config mod_mime mod_negotiation mod_rewrite mod_setenvif

Directive   Local Value Master Value
engine  1   1
last_modified   0   0
xbithack    0   0

Apache Environment
Variable    Value
HTTP_HOST   localhost
HTTP_USER_AGENT     Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0.1
HTTP_ACCEPT     text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
HTTP_ACCEPT_LANGUAGE    en-us,en;q=0.5
HTTP_ACCEPT_ENCODING    gzip, deflate
HTTP_CONNECTION     keep-alive
HTTP_CACHE_CONTROL  max-age=0
PATH    c:\PHP;E:\OracleClient11GBase\product\11.2.0\client_1\bin;E:\Oracle-Client;C:\Program Files (x86)\PC Connectivity Solution\;C:\Program Files (x86)\AMD APP\bin\x86_64;C:\Program Files (x86)\AMD APP\bin\x86;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Google\Google Apps Sync\;C:\Program Files (x86)\Microsoft SQL Server\80\Tools\Binn\;C:\Program Files (x86)\Microsoft SQL Server\90\Tools\binn\;C:\Program Files (x86)\Microsoft SQL Server\90\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\90\Tools\Binn\VSShell\Common7\IDE\;C:\Program Files (x86)\Microsoft Visual Studio 8\Common7\IDE\PrivateAssemblies\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\Google\Google Apps Migration\;E:\Personel\Installations\Zend\ZendFramework-1.11.11\bin;
SystemRoot  C:\Windows
COMSPEC     C:\Windows\system32\cmd.exe
PATHEXT     .COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC
WINDIR  C:\Windows
SERVER_SIGNATURE    no value
SERVER_SOFTWARE     Apache/2.2.22 (Win32) PHP/5.3.5
SERVER_NAME     localhost
SERVER_ADDR     127.0.0.1
SERVER_PORT     80
REMOTE_ADDR     127.0.0.1
DOCUMENT_ROOT   E:/Personel/Mics/libraryprj/public/
SERVER_ADMIN    email@home.com
SCRIPT_FILENAME     E:/Personel/Mics/libraryprj/public/phpinfo.php
REMOTE_PORT     49757
GATEWAY_INTERFACE   CGI/1.1
SERVER_PROTOCOL     HTTP/1.1
REQUEST_METHOD  GET
QUERY_STRING    no value
REQUEST_URI     /phpinfo.php
SCRIPT_NAME     /phpinfo.php

HTTP Headers Information
HTTP Request Headers
HTTP Request    GET /phpinfo.php HTTP/1.1
Host    localhost
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0.1
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language     en-us,en;q=0.5
Accept-Encoding     gzip, deflate
Connection  keep-alive
Cache-Control   max-age=0
HTTP Response Headers
X-Powered-By    PHP/5.3.5
Keep-Alive  timeout=5, max=100
Connection  Keep-Alive
Transfer-Encoding   chunked
Content-Type    text/html

bcmath
BCMath support  enabled

Directive   Local Value Master Value
bcmath.scale    0   0

calendar
Calendar support    enabled

com_dotnet
COM support enabled
DCOM support    disabled
.Net support    not present in this build

Directive   Local Value Master Value
com.allow_dcom  0   0
com.autoregister_casesensitive  1   1
com.autoregister_typelib    0   0
com.autoregister_verbose    0   0
com.code_page   no value    no value
com.typelib_file    no value    no value

Core
PHP Version     5.3.5

Directive   Local Value Master Value
allow_call_time_pass_reference  On  On
allow_url_fopen On  On
allow_url_include   Off Off
always_populate_raw_post_data   Off Off
arg_separator.input &   &
arg_separator.output    &   &
asp_tags    Off Off
auto_append_file    no value    no value
auto_globals_jit    On  On
auto_prepend_file   no value    no value
browscap    no value    no value
default_charset no value    no value
default_mimetype    text/html   text/html
define_syslog_variables Off Off
disable_classes no value    no value
disable_functions   no value    no value
display_errors  On  On
display_startup_errors  Off Off
doc_root    no value    no value
docref_ext  no value    no value
docref_root no value    no value
enable_dl   On  On
error_append_string no value    no value
error_log   no value    no value
error_prepend_string    no value    no value
error_reporting no value    no value
exit_on_timeout Off Off
expose_php  On  On
extension_dir   C:\php  C:\php
file_uploads    On  On
highlight.bg    #FFFFFF #FFFFFF
highlight.comment   #FF8000 #FF8000
highlight.default   #0000BB #0000BB
highlight.html  #000000 #000000
highlight.keyword   #007700 #007700
highlight.string    #DD0000 #DD0000
html_errors On  On
ignore_repeated_errors  Off Off
ignore_repeated_source  Off Off
ignore_user_abort   Off Off
implicit_flush  Off Off
include_path    .;C:\php\pear   .;C:\php\pear
log_errors  Off Off
log_errors_max_len  1024    1024
magic_quotes_gpc    On  On
magic_quotes_runtime    Off Off
magic_quotes_sybase Off Off
mail.add_x_header   Off Off
mail.force_extra_parameters no value    no value
mail.log    no value    no value
max_execution_time  30  30
max_file_uploads    20  20
max_input_nesting_level 64  64
max_input_time  -1  -1
memory_limit    128M    128M
open_basedir    no value    no value
output_buffering    0   0
output_handler  no value    no value
post_max_size   8M  8M
precision   14  14
realpath_cache_size 16K 16K
realpath_cache_ttl  120 120
register_argc_argv  On  On
register_globals    Off Off
register_long_arrays    On  On
report_memleaks On  On
report_zend_debug   On  On
request_order   no value    no value
safe_mode   Off Off
safe_mode_exec_dir  no value    no value
safe_mode_gid   Off Off
safe_mode_include_dir   no value    no value
sendmail_from   no value    no value
sendmail_path   no value    no value
serialize_precision 100 100
short_open_tag  On  On
SMTP    localhost   localhost
smtp_port   25  25
sql.safe_mode   Off Off
track_errors    Off Off
unserialize_callback_func   no value    no value
upload_max_filesize 2M  2M
upload_tmp_dir  no value    no value
user_dir    no value    no value
user_ini.cache_ttl  300 300
user_ini.filename   .user.ini   .user.ini
variables_order EGPCS   EGPCS
xmlrpc_error_number 0   0
xmlrpc_errors   Off Off
y2k_compliance  On  On
zend.enable_gc  On  On

ctype
ctype functions     enabled

date

Warning: phpinfo() [function.phpinfo]: It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected 'Asia/Karachi' for '5.0/no DST' instead in E:\Personel\Mics\libraryprj\public\phpinfo.php on line 2
date/time support   enabled
"Olson" Timezone Database Version   2010.15
Timezone Database   internal
Default timezone    Asia/Karachi

Directive   Local Value Master Value
date.default_latitude   31.7667 31.7667
date.default_longitude  35.2333 35.2333
date.sunrise_zenith 90.583333   90.583333
date.sunset_zenith  90.583333   90.583333
date.timezone   no value    no value

dom
DOM/XML     enabled
DOM/XML API Version     20031129
libxml Version  2.7.7
HTML Support    enabled
XPath Support   enabled
XPointer Support    enabled
Schema Support  enabled
RelaxNG Support     enabled

ereg
Regex Library   Bundled library enabled

filter
Input Validation and Filtering  enabled
Revision    $Revision: 298196 $

Directive   Local Value Master Value
filter.default  unsafe_raw  unsafe_raw
filter.default_flags    no value    no value

ftp
FTP support     enabled

hash
hash support    enabled
Hashing Engines     md2 md4 md5 sha1 sha224 sha256 sha384 sha512 ripemd128 ripemd160 ripemd256 ripemd320 whirlpool tiger128,3 tiger160,3 tiger192,3 tiger128,4 tiger160,4 tiger192,4 snefru snefru256 gost adler32 crc32 crc32b salsa10 salsa20 haval128,3 haval160,3 haval192,3 haval224,3 haval256,3 haval128,4 haval160,4 haval192,4 haval224,4 haval256,4 haval128,5 haval160,5 haval192,5 haval224,5 haval256,5

iconv
iconv support   enabled
iconv implementation    "libiconv"
iconv library version   1.11

Directive   Local Value Master Value
iconv.input_encoding    ISO-8859-1  ISO-8859-1
iconv.internal_encoding ISO-8859-1  ISO-8859-1
iconv.output_encoding   ISO-8859-1  ISO-8859-1

json
json support    enabled
json version    1.2.1

libxml
libXML support  active
libXML Compiled Version     2.7.7
libXML Loaded Version   20707
libXML streams  enabled

mcrypt
mcrypt support  enabled
mcrypt_filter support   enabled
Version     2.5.8
Api No  20021217
Supported ciphers   cast-128 gost rijndael-128 twofish cast-256 loki97 rijndael-192 saferplus wake blowfish-compat des rijndael-256 serpent xtea blowfish enigma rc2 tripledes arcfour
Supported modes     cbc cfb ctr ecb ncfb nofb ofb stream

Directive   Local Value Master Value
mcrypt.algorithms_dir   no value    no value
mcrypt.modes_dir    no value    no value

mhash
MHASH support   Enabled
MHASH API Version   Emulated Support

mysqlnd
mysqlnd enabled
Version     mysqlnd 5.0.7-dev - 091210 - $Revision: 304625 $
Compression     supported
SSL     not supported
Command buffer size     4096
Read buffer size    32768
Read timeout    31536000
Collecting statistics   Yes
Collecting memory statistics    No
Tracing     n/a

Client statistics   
bytes_sent  0
bytes_received  0
packets_sent    0
packets_received    0
protocol_overhead_in    0
protocol_overhead_out   0
bytes_received_ok_packet    0
bytes_received_eof_packet   0
bytes_received_rset_header_packet   0
bytes_received_rset_field_meta_packet   0
bytes_received_rset_row_packet  0
bytes_received_prepare_response_packet  0
bytes_received_change_user_packet   0
packets_sent_command    0
packets_received_ok     0
packets_received_eof    0
packets_received_rset_header    0
packets_received_rset_field_meta    0
packets_received_rset_row   0
packets_received_prepare_response   0
packets_received_change_user    0
result_set_queries  0
non_result_set_queries  0
no_index_used   0
bad_index_used  0
slow_queries    0
buffered_sets   0
unbuffered_sets     0
ps_buffered_sets    0
ps_unbuffered_sets  0
flushed_normal_sets     0
flushed_ps_sets     0
ps_prepared_never_executed  0
ps_prepared_once_executed   0
rows_fetched_from_server_normal     0
rows_fetched_from_server_ps     0
rows_buffered_from_client_normal    0
rows_buffered_from_client_ps    0
rows_fetched_from_client_normal_buffered    0
rows_fetched_from_client_normal_unbuffered  0
rows_fetched_from_client_ps_buffered    0
rows_fetched_from_client_ps_unbuffered  0
rows_fetched_from_client_ps_cursor  0
rows_affected_normal    0
rows_affected_ps    0
rows_skipped_normal     0
rows_skipped_ps     0
copy_on_write_saved     0
copy_on_write_performed     0
command_buffer_too_small    0
connect_success     0
connect_failure     0
connection_reused   0
reconnect   0
pconnect_success    0
active_connections  0
active_persistent_connections   0
explicit_close  0
implicit_close  0
disconnect_close    0
in_middle_of_command_close  0
explicit_free_result    0
implicit_free_result    0
explicit_stmt_close     0
implicit_stmt_close     0
mem_emalloc_count   0
mem_emalloc_amount  0
mem_ecalloc_count   0
mem_ecalloc_amount  0
mem_erealloc_count  0
mem_erealloc_amount     0
mem_efree_count     0
mem_efree_amount    0
mem_malloc_count    0
mem_malloc_amount   0
mem_calloc_count    0
mem_calloc_amount   0
mem_realloc_count   0
mem_realloc_amount  0
mem_free_count  0
mem_free_amount     0
mem_estrndup_count  0
mem_strndup_count   0
mem_estndup_count   0
mem_strdup_count    0
proto_text_fetched_null     0
proto_text_fetched_bit  0
proto_text_fetched_tinyint  0
proto_text_fetched_short    0
proto_text_fetched_int24    0
proto_text_fetched_int  0
proto_text_fetched_time     0
proto_text_fetched_datetime     0
proto_text_fetched_timestamp    0
proto_text_fetched_string   0
proto_text_fetched_blob     0
proto_text_fetched_enum     0
proto_text_fetched_set  0
proto_text_fetched_geometry     0
proto_text_fetched_other    0
proto_binary_fetched_null   0
proto_binary_fetched_bit    0
proto_binary_fetched_tinyint    0
proto_binary_fetched_short  0
proto_binary_fetched_int24  0
proto_binary_fetched_int    0
proto_binary_fetched_bigint     0
proto_binary_fetched_decimal    0
proto_binary_fetched_float  0
proto_binary_fetched_double     0
proto_binary_fetched_date   0
proto_binary_fetched_year   0
proto_binary_fetched_time   0
proto_binary_fetched_datetime   0
proto_binary_fetched_timestamp  0
proto_binary_fetched_string     0
proto_binary_fetched_blob   0
proto_binary_fetched_enum   0
proto_binary_fetched_set    0
proto_binary_fetched_geometry   0
proto_binary_fetched_other  0
init_command_executed_count     0
init_command_failed_count   0
com_quit    0
com_init_db     0
com_query   0
com_field_list  0
com_create_db   0
com_drop_db     0
com_refresh     0
com_shutdown    0
com_statistics  0
com_process_info    0
com_connect     0
com_process_kill    0
com_debug   0
com_ping    0
com_time    0
com_delayed_insert  0
com_change_user     0
com_binlog_dump     0
com_table_dump  0
com_connect_out     0
com_register_slave  0
com_stmt_prepare    0
com_stmt_execute    0
com_stmt_send_long_data     0
com_stmt_close  0
com_stmt_reset  0
com_stmt_set_option     0
com_stmt_fetch  0
com_deamon  0
bytes_received_real_data_normal     0
bytes_received_real_data_ps     0

odbc
ODBC Support    enabled
Active Persistent Links     0
Active Links    0
ODBC library    Win32

Directive   Local Value Master Value
odbc.allow_persistent   On  On
odbc.check_persistent   On  On
odbc.default_cursortype Static cursor   Static cursor
odbc.default_db no value    no value
odbc.default_pw no value    no value
odbc.default_user   no value    no value
odbc.defaultbinmode return as is    return as is
odbc.defaultlrl return up to 4096 bytes return up to 4096 bytes
odbc.max_links  Unlimited   Unlimited
odbc.max_persistent Unlimited   Unlimited

pcre
PCRE (Perl Compatible Regular Expressions) Support  enabled
PCRE Library Version    8.10 2010-06-25

Directive   Local Value Master Value
pcre.backtrack_limit    100000  100000
pcre.recursion_limit    100000  100000

PDO
PDO support enabled
PDO drivers     no value

Phar
Phar: PHP Archive support   enabled
Phar EXT version    2.0.1
Phar API version    1.1.1
SVN revision    $Revision: 305584 $
Phar-based phar archives    enabled
Tar-based phar archives     enabled
ZIP-based phar archives     enabled
gzip compression    enabled
bzip2 compression   disabled (install pecl/bz2)
OpenSSL support     disabled (install ext/openssl)

Phar based on pear/PHP_Archive, original concept by Davey Shafik.
Phar fully realized by Gregory Beaver and Marcus Boerger.
Portions of tar implementation Copyright (c) 2003-2009 Tim Kientzle.

Directive   Local Value Master Value
phar.cache_list no value    no value
phar.readonly   On  On
phar.require_hash   On  On

Reflection
Reflection  enabled
Version     $Revision: 305605 $

session
Session Support     enabled
Registered save handlers    files user
Registered serializer handlers  php php_binary wddx

Directive   Local Value Master Value
session.auto_start  Off Off
session.bug_compat_42   On  On
session.bug_compat_warn On  On
session.cache_expire    180 180
session.cache_limiter   nocache nocache
session.cookie_domain   no value    no value
session.cookie_httponly Off Off
session.cookie_lifetime 0   0
session.cookie_path /   /
session.cookie_secure   Off Off
session.entropy_file    no value    no value
session.entropy_length  0   0
session.gc_divisor  100 100
session.gc_maxlifetime  1440    1440
session.gc_probability  1   1
session.hash_bits_per_character 4   4
session.hash_function   0   0
session.name    PHPSESSID   PHPSESSID
session.referer_check   no value    no value
session.save_handler    files   files
session.save_path   no value    no value
session.serialize_handler   php php
session.use_cookies On  On
session.use_only_cookies    On  On
session.use_trans_sid   0   0

SimpleXML
Simplexml support   enabled
Revision    $Revision: 302715 $
Schema support  enabled

SPL
SPL support enabled
Interfaces  Countable, OuterIterator, RecursiveIterator, SeekableIterator, SplObserver, SplSubject
Classes     AppendIterator, ArrayIterator, ArrayObject, BadFunctionCallException, BadMethodCallException, CachingIterator, DirectoryIterator, DomainException, EmptyIterator, FilesystemIterator, FilterIterator, GlobIterator, InfiniteIterator, InvalidArgumentException, IteratorIterator, LengthException, LimitIterator, LogicException, MultipleIterator, NoRewindIterator, OutOfBoundsException, OutOfRangeException, OverflowException, ParentIterator, RangeException, RecursiveArrayIterator, RecursiveCachingIterator, RecursiveDirectoryIterator, RecursiveFilterIterator, RecursiveIteratorIterator, RecursiveRegexIterator, RecursiveTreeIterator, RegexIterator, RuntimeException, SplDoublyLinkedList, SplFileInfo, SplFileObject, SplFixedArray, SplHeap, SplMinHeap, SplMaxHeap, SplObjectStorage, SplPriorityQueue, SplQueue, SplStack, SplTempFileObject, UnderflowException, UnexpectedValueException

standard
Dynamic Library Support     enabled
Internal Sendmail Support for Windows   enabled

Directive   Local Value Master Value
assert.active   1   1
assert.bail 0   0
assert.callback no value    no value
assert.quiet_eval   0   0
assert.warning  1   1
auto_detect_line_endings    0   0
default_socket_timeout  60  60
from    no value    no value
safe_mode_allowed_env_vars  PHP_    PHP_
safe_mode_protected_env_vars    LD_LIBRARY_PATH LD_LIBRARY_PATH
url_rewriter.tags   a=href,area=href,frame=src,form=,fieldset=  a=href,area=href,frame=src,form=,fieldset=
user_agent  no value    no value

tokenizer
Tokenizer Support   enabled

wddx
WDDX Support    enabled
WDDX Session Serializer     enabled

xml
XML Support     active
XML Namespace Support   active
libxml2 Version     2.7.7

xmlreader
XMLReader   enabled

xmlwriter
XMLWriter   enabled

zip
Zip     enabled
Extension Version   $Id: php_zip.c 305848 2010-11-30 11:04:06Z pajoye $
Zip version     1.9.1
Libzip version  0.9.0

zlib
ZLib Support    enabled
Stream Wrapper support  compress.zlib://
Stream Filter support   zlib.inflate, zlib.deflate
Compiled Version    1.2.3
Linked Version  1.2.3

Directive   Local Value Master Value
zlib.output_compression Off Off
zlib.output_compression_level   -1  -1
zlib.output_handler no value    no value

Additional Modules
Module Name

Environment
Variable    Value
ALLUSERSPROFILE     C:\ProgramData
AMDAPPSDKROOT   C:\Program Files (x86)\AMD APP\
APPDATA     C:\Windows\system32\config\systemprofile\AppData\Roaming
CommonProgramFiles  C:\Program Files (x86)\Common Files
CommonProgramFiles(x86)     C:\Program Files (x86)\Common Files
CommonProgramW6432  C:\Program Files\Common Files
COMPUTERNAME    FAMJAD-PC
ComSpec     C:\Windows\system32\cmd.exe
FP_NO_HOST_CHECK    NO
lib     C:\Program Files\SQLXML 4.0\bin\
LOCALAPPDATA    C:\Windows\system32\config\systemprofile\AppData\Local
NUMBER_OF_PROCESSORS    4
OS  Windows_NT
Path    c:\PHP;E:\OracleClient11GBase\product\11.2.0\client_1\bin;E:\Oracle-Client;C:\Program Files (x86)\PC Connectivity Solution\;C:\Program Files (x86)\AMD APP\bin\x86_64;C:\Program Files (x86)\AMD APP\bin\x86;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Google\Google Apps Sync\;C:\Program Files (x86)\Microsoft SQL Server\80\Tools\Binn\;C:\Program Files (x86)\Microsoft SQL Server\90\Tools\binn\;C:\Program Files (x86)\Microsoft SQL Server\90\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\90\Tools\Binn\VSShell\Common7\IDE\;C:\Program Files (x86)\Microsoft Visual Studio 8\Common7\IDE\PrivateAssemblies\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\Google\Google Apps Migration\;E:\Personel\Installations\Zend\ZendFramework-1.11.11\bin;
PATHEXT     .COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC
PROCESSOR_ARCHITECTURE  x86
PROCESSOR_ARCHITEW6432  AMD64
PROCESSOR_IDENTIFIER    Intel64 Family 6 Model 42 Stepping 7, GenuineIntel
PROCESSOR_LEVEL     6
PROCESSOR_REVISION  2a07
ProgramData     C:\ProgramData
ProgramFiles    C:\Program Files (x86)
ProgramFiles(x86)   C:\Program Files (x86)
ProgramW6432    C:\Program Files
PSModulePath    C:\Windows\system32\WindowsPowerShell\v1.0\Modules\
PUBLIC  C:\Users\Public
SystemDrive     C:
SystemRoot  C:\Windows
TEMP    C:\Windows\TEMP
TMP     C:\Windows\TEMP
USERDOMAIN  WORKGROUP
USERNAME    FAMJAD-PC$
USERPROFILE     C:\Windows\system32\config\systemprofile
VBOX_INSTALL_PATH   E:\Oracle\VirtualBox\
windir  C:\Windows
AP_PARENT_PID   1600

PHP Variables
Variable    Value
_SERVER["HTTP_HOST"]    localhost
_SERVER["HTTP_USER_AGENT"]  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0.1
_SERVER["HTTP_ACCEPT"]  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
_SERVER["HTTP_ACCEPT_LANGUAGE"] en-us,en;q=0.5
_SERVER["HTTP_ACCEPT_ENCODING"] gzip, deflate
_SERVER["HTTP_CONNECTION"]  keep-alive
_SERVER["HTTP_CACHE_CONTROL"]   max-age=0
_SERVER["PATH"] c:\PHP;E:\OracleClient11GBase\product\11.2.0\client_1\bin;E:\Oracle-Client;C:\Program Files (x86)\PC Connectivity Solution\;C:\Program Files (x86)\AMD APP\bin\x86_64;C:\Program Files (x86)\AMD APP\bin\x86;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Google\Google Apps Sync\;C:\Program Files (x86)\Microsoft SQL Server\80\Tools\Binn\;C:\Program Files (x86)\Microsoft SQL Server\90\Tools\binn\;C:\Program Files (x86)\Microsoft SQL Server\90\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\90\Tools\Binn\VSShell\Common7\IDE\;C:\Program Files (x86)\Microsoft Visual Studio 8\Common7\IDE\PrivateAssemblies\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\Google\Google Apps Migration\;E:\Personel\Installations\Zend\ZendFramework-1.11.11\bin;
_SERVER["SystemRoot"]   C:\Windows
_SERVER["COMSPEC"]  C:\Windows\system32\cmd.exe
_SERVER["PATHEXT"]  .COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC
_SERVER["WINDIR"]   C:\Windows
_SERVER["SERVER_SIGNATURE"] no value
_SERVER["SERVER_SOFTWARE"]  Apache/2.2.22 (Win32) PHP/5.3.5
_SERVER["SERVER_NAME"]  localhost
_SERVER["SERVER_ADDR"]  127.0.0.1
_SERVER["SERVER_PORT"]  80
_SERVER["REMOTE_ADDR"]  127.0.0.1
_SERVER["DOCUMENT_ROOT"]    E:/Personel/Mics/libraryprj/public/
_SERVER["SERVER_ADMIN"] email@home.com
_SERVER["SCRIPT_FILENAME"]  E:/Personel/Mics/libraryprj/public/phpinfo.php
_SERVER["REMOTE_PORT"]  49757
_SERVER["GATEWAY_INTERFACE"]    CGI/1.1
_SERVER["SERVER_PROTOCOL"]  HTTP/1.1
_SERVER["REQUEST_METHOD"]   GET
_SERVER["QUERY_STRING"] no value
_SERVER["REQUEST_URI"]  /phpinfo.php
_SERVER["SCRIPT_NAME"]  /phpinfo.php
_SERVER["PHP_SELF"] /phpinfo.php
_SERVER["REQUEST_TIME"] 1340765338
_SERVER["argv"] 

Array
(
)

_SERVER["argc"] 0
_ENV["ALLUSERSPROFILE"] C:\ProgramData
_ENV["AMDAPPSDKROOT"]   C:\Program Files (x86)\AMD APP\
_ENV["APPDATA"] C:\Windows\system32\config\systemprofile\AppData\Roaming
_ENV["CommonProgramFiles"]  C:\Program Files (x86)\Common Files
_ENV["CommonProgramFiles(x86)"] C:\Program Files (x86)\Common Files
_ENV["CommonProgramW6432"]  C:\Program Files\Common Files
_ENV["COMPUTERNAME"]    FAMJAD-PC
_ENV["ComSpec"] C:\Windows\system32\cmd.exe
_ENV 
```

# javascript - 将点击处理程序绑定到除特定 HTML 标记之外的所有元素

> ID：11219149
> 
> 赞同：1
> 
> 时间：2012-06-27T03:50:00.370
> 
> 标签：javascript, jquery, html

因此，我有一个页面设置，可让您在单击时扩展文本框：

[http://hashtag.ly/#NASCAR](http://hashtag.ly/#NASCAR)

它会在单击时向元素添加一个“活动”类，如果单击另一个文本框则将其删除。现在，如果您单击红色背景，我想删除该课程。我还想尽快将元素添加到页面中，因此重要的是仅通过单击作为`<body>`元素的红色部分来进行删除。

所以这就是我现在在页面上的内容：（注意日志将被删除类所取代）

```
$('*:not(li)').click(function(){
    console.log('foo')
}); 
```

问题是它会在您单击的任何地方记录“foo”，甚至直接在作为`li`元素的文本框上。如何仅在单击背景时才能使这项工作？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T03:54:23.033

您的问题是您正在冒泡 HTML 堆栈。通过将处理程序放在*所有内容*上，即使您单击 LI，事件也会冒泡到其 UL。同样， $('body') 会导致冒泡问题。

你最好在主堆栈之外创建一个 div 来处理这个问题。想象一下在大部分页面后面有一个绝对定位的 div。

如果你真的想让除了 LI 之外的*所有东西都*触发，你的代码需要看起来更像这样：

```
$('*:not(li)').click(function(){
// do something.
});
$('li').click(function(evt){
// do something else.
    evt.stopPropagation();
}); 
```

# c - 在 C 中释放分配的内存时堆损坏

> ID：11219152
> 
> 赞同：0
> 
> 时间：2012-06-27T03:50:23.383
> 
> 标签：c, memory, memory-management, memory-leaks

为了在 malloc 命令后释放内存以防止内存泄漏，我在运行时遇到了堆损坏问题。我的调试告诉我，在达到堆缓冲区的末尾后，我的应用程序正在尝试写入内存。这是我为隔离我的问题而简化的内容。

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

main(){

int i,j,n;
int temp[4];
int **a;

printf("Amount of intervals to be entered: ");
scanf("%d", &n);

//allocate memory for a 2d array of size (n x 4)
a = (int**) malloc(n*sizeof(int*));
for (i=0;i<4;i++){
    a[i] = (int*) malloc(4*sizeof(int));
}

if (!a){
    printf("malloc failed %d\n",__LINE__);
    exit(0);
}

printf("Please enter the intervals a line at a time followed by a return: \n");
for(i=0;i<n;i++){
    scanf("%d %d %d %d",&a[i][0], &a[i][1], &a[i][2], &a[i][3]);
}

for(i=0;i<n;i++){

    printf("%d, %d, %d, %d\n", a[i][0], a[i][1], a[i][2], a[i][3]);

}

// free up the allocated memory 

for (i=0;i<n;i++){
    free(a[i]);
}

free(a);

} 
```

我对分配和取消分配内存不是很熟悉，所以我不知道我应该做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T03:54:30.507

可能还有其他问题。但这至少是错误的：

```
a = (int**) malloc(n*sizeof(int*));
for (i=0;i<4;i++){                   <---- 4 should be n
    a[i] = (int*) malloc(4*sizeof(int));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:32:44.547

```
//allocate memory for a 2d array of size (n x 4)
a = (int**) malloc(n*sizeof(int*));

if (!a){
    printf("malloc failed %d\n",__LINE__);
    exit(0);
}

for (i=0;i<n;i++){
    a[i] = (int*) malloc(4*sizeof(int));
} 
```

- 在调用之后移动 malloc 检查，在使用“a”之前

- 使用“n”

-删除“math.h”、“temp”和“j”

# function - 在过程或函数中使用 SYS_REFCURSOR

> ID：11219154
> 
> 赞同：2
> 
> 时间：2012-06-27T03:50:27.813
> 
> 标签：function, stored-procedures, jdbc, plsql, oracle10g

我会`procedure`使用`function`.`JDBC`

就最佳实践和性能而言，最好使用 a `function`which return a`SYS_REFCURSOR`或使用 a `procedure`which return a `SYS_REFCURSOR`。

例如。

```
Procedure

create or replace procedure my_proc(p_deptno IN number,p_emp_no IN varchar2
    , p_cursor OUT SYS_REFCURSOR)
    is
    begin
    open p_cursor FOR
    select *
    from emp
    where deptno = p_deptno and emp_number=p_emp_no;
    end proc;
    /

Function

CREATE OR REPLACE FUNCTION my_func (p_deptno IN number,p_emp_no IN varchar2)
   RETURN SYS_REFCURSOR
AS
   p_cursor   SYS_REFCURSOR;
BEGIN
   OPEN p_cursor FOR
      select *
        from emp
        where deptno = p_deptno and emp_number=p_emp_no;
   RETURN p_cursor;
END;
/ 
```

以上哪一项是更好的选择？有人可以对此提供一些见解吗？任何帮助都是非常可观的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T03:57:21.913

从性能的角度来看，这并不重要。

通常，如果 PL/SQL 块的目的是向调用者返回某些内容，则它应该在函数中。如果 PL/SQL 块的目的是做某事（删除、插入、更新等），它应该在一个过程中。由于这段代码的目的是向调用者返回一些东西，所以它是一个函数是合适的。

# c++ - 只通过指针转换来制作可互换的类类型，而不必分配任何新对象？

> ID：11219159
> 
> 赞同：5
> 
> 时间：2012-06-27T03:51:00.407
> 
> 标签：c++, c++11, language-lawyer, reinterpret-cast, type-punning

**更新**：我很欣赏“不想要那个，想要这个”的建议。它们很有用，尤其是在[激励场景](https://stackoverflow.com/questions/11167483/deriving-from-a-base-class-whose-instances-reside-in-a-fixed-format-database-m)的上下文中提供时。仍然......不管是好是坏，我都很好奇找到一个硬性的*“是的，可以在 C++11 中合法地完成”*与*“不，不可能做那样的事情”*。

* * *

我想将对象指针“别名”为另一种类型，其*唯一目的*是添加一些辅助方法。别名不能将数据成员添加到底层类（事实上，我越能防止这种情况发生越好！）所有别名都同样适用于这种类型的任何对象......如果类型系统可以提示哪个别名可能是最合适的。

不应该有关于在底层对象中编码的任何特定别名的信息。因此，我觉得你应该能够“欺骗”类型系统并让它成为一个注释......在编译时检查，但最终与运行时转换无关。这些方面的东西：

```
Node<AccessorFoo>* fooPtr = Node<AccessorFoo>::createViaFactory();
Node<AccessorBar>* barPtr = reinterpret_cast< Node<AccessorBar>* >(fooPtr); 
```

在后台，工厂方法实际上是创建一个`NodeBase`类，然后使用类似`reinterpret_cast`的方法将其返回为`Node<AccessorFoo>*`.

避免这种情况的简单方法是使这些轻量级的类包装节点并按值传递。因此，您不需要强制转换，只需将节点句柄包装在其构造函数中的 Accessor 类：

```
AccessorFoo foo (NodeBase::createViaFactory());
AccessorBar bar (foo.getNode()); 
```

但如果我不必为此付出一切，我就不想。这将涉及 - 例如 - 为每种包装的指针（AccessorFooShared、AccessorFooUnique、AccessorFooWeak 等）创建一个特殊的访问器类型。将这些类型化的指针作为一个基于单个指针的对象标识的别名是可取的，并提供了一个很好的正交性。

所以回到最初的问题：

```
Node<AccessorFoo>* fooPtr = Node<AccessorFoo>::createViaFactory();
Node<AccessorBar>* barPtr = reinterpret_cast< Node<AccessorBar>* >(fooPtr); 
```

似乎有一些方法可以做到这一点，这可能是丑陋的，但不会“打破规则”。根据[ISO14882:2011(e) 5.2.10-7](https://stackoverflow.com/a/9018959/211160)：

> 对象指针可以显式转换为不同类型的对象指针。70 当“指向 T1 的指针”类型的纯右值 v 转换为“指向 cv T2 的指针”类型时，结果为 static_cast(static_cast(v))如果 T1 和 T2 都是标准布局类型 (3.9) 并且 T2 的对齐要求不比 T1 更严格，或者任何一个类型都是无效的。将“指向 T1 的指针”类型的纯右值转换为“指向 T2 的指针”类型（其中 T1 和 T2 是对象类型，并且 T2 的对齐要求不比 T1 的对齐要求更严格）并返回其原始类型会产生原始类型指针值。未指定任何其他此类指针转换的结果。

深入研究[“标准布局类”](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2342.htm)的定义，我们发现：

*   没有非标准布局类（或此类类型的数组）或引用类型的非静态数据成员，并且
*   没有虚函数 (10.3) 和虚基类 (10.1)，并且
*   对所有非静态数据成员具有相同的访问控制（条款 11），并且
*   没有非标准布局基类，并且
*   要么在最派生类中没有非静态数据成员，并且最多有一个具有非静态数据成员的基类，要么没有具有非静态数据成员的基类，并且
*   没有与第一个非静态数据成员相同类型的基类。

听起来像使用这样的东西会使我的手有点束缚，而访问器或节点中没有虚拟方法。然而，C++11 显然必须`std::is_standard_layout`保持检查。

这可以安全地完成吗？似乎在 gcc-4.7 中工作，但我想确定我没有调用未定义的行为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T23:15:32.717

我相信严格的别名规则禁止您尝试做的事情。

澄清一下：严格的别名与布局兼容性、POD 类型或其他无关。它与优化有关。以及语言明确禁止您做的事情。

本文总结得很好：[http ://dbp-consulting.com/StrictAliasing.pdf](http://dbp-consulting.com/StrictAliasing.pdf)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T04:56:36.500

如果我理解正确，你有：

*   一个`NodeBase`有状态的类，是系统的真正主力；
*   一组`Accessor`提供接口的无状态类型`NodeBase`；和
*   包装访问器的`Node<AccessorT>`类，可能提供便利功能。

我假设最后一点，因为如果你没有一个包装类型来做方便的事情，那么就没有理由不让`Accessor`类型成为你的顶级，就像你建议的那样：按值传递`AccessorFoo`和传递`AccessorBar`。它们不是同一个对象的事实完全没有实际意义。如果您将它们视为指针，那么您会注意到这`&foo != &bar`并不比拥有`NodeBase* p1 = new NodeBase; NodeBase* p2 = p1;`并注意到它更有趣，当然，`&p1 != &p2`.

如果您确实需要一个包装器`Node<AccessorT>`并希望使其成为标准布局，那么我建议您利用您的`Accessor`类型的无状态性来发挥您的优势。如果它们只是一个无状态的功能容器（它们必须是；否则你为什么能够自由地转换它们？），那么你可以做这样的事情：

```
struct AccessorFoo {
    int getValue(NodeBase* n) { return n->getValueFoo(); }
};

struct AccessorBar {
    int getValue(NodeBase* n) { return n->getValueBar(); }
};

template <typename AccessorT>
class Node {
    NodeBase* m_node;

public:
    int getValue() {
        AccessorT accessor;
        return accessor.getValue(m_node);
    }
}; 
```

在这种情况下，您可以添加模板化转换运算符：

```
template <typename OtherT>
operator Node<OtherT>() {
    return Node<OtherT>(m_node);
} 
```

现在您可以在`Node<AccessorT>`您喜欢的任何类型之间进行直接的价值转换。

如果你更进一步，你将把所有`Accessor`类型的方法都设置为静态，并达到[特征模式](http://www.cantrip.org/traits.html)。

* * *

顺便说一句，您引用的 C++ 标准部分涉及`reinterpret_cast<T*>(p)`源类型和最终类型都是指向标准布局对象的指针的情况下的行为，在这种情况下，标准保证您获得相同的指针d 从转换到 a`void*`然后到最终类型。在不调用未定义行为的情况下，您仍然不能将对象用作它创建的类型以外的任何类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T06:40:21.360

访问器一词是一个死的*赠品*：您正在寻找的是[*Proxy*](http://www.vincehuston.org/dp/proxy.html)。

没有理由不按值传递代理。

```
// Let us imagine that NodeBase is now called Node, since there is no inheritance

class AccessorFoo {
public:
    AccessorFoo(Node& n): node(n) {}

    int bar() const { return node->bar; }

private:
    std::reference_wrapper<Node> node;
}; 
```

然后你可以自由地从一个访问器转换为另一个......虽然*这闻起来*很香。通常，拥有访问器的目标是以某种方式限制访问，因此将 nilly willy 强制转换为另一个访问器是*不好的*。但是，可以支持转换为**更窄**的访问器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-07T19:54:02.883

```
struct myPOD {
   int data1;
   // ...
};

struct myPOD_extended1 : myPOD {
   int helper() { (*(myPOD*)this)->data1 = 6; };  // type myPOD referenced here
};
struct myPOD_extended2 : myPOD { 
   int helper() { data1 = 7; };                   // no syntactic ref to myPOD
};
struct myPOD_extended3 : myPOD {
   int helper() { (*(myPOD*)this)->data1 = 8; };  // type myPOD referenced here
};
void doit(myPOD *it)
{
    ((myPOD_extended1*)it)->helper();
    // ((myPOD_extended2*)it)->helper(); // uncomment -> program/compile undefined
    ((myPOD_extended3*)it)->helper();
}

int main(int,char**)
{
    myPOD a; a.data1=5; 
    doit(&a);

    std::cout<< a.data1 << '\n';
    return 0;
} 
```

我相信这可以保证在所有符合 C++ 的编译器中都有效，并且必须打印 8。取消注释标记的行，所有的赌注都被取消了。

优化器可能会通过检查函数中实际引用的句法类型列表与生成正确结果所需的句法类型引用列表（在 3.10p10 中）以及当实际（“动态") 对象类型是已知的，该列表不包括通过对任何派生类型的引用进行的访问。因此，s中对`this`to的显式（和有效）向下转换将放在此处语法引用的类型列表中，并且优化器必须将生成的引用视为对 object （其他名称，别名）的潜在合法引用。`myPOD*``helper()``myPOD``a`

# android-ndk - 无法运行亚行

> ID：11219162
> 
> 赞同：0
> 
> 时间：2012-06-27T03:51:13.153
> 
> 标签：android-ndk, gdb, adb

我在运行 ndk-gdb 时遇到问题。

这是我所做的：

```
~/< my ndk path >/ndk-gdb --adb="< my sdk path >/platform-tools/adb" 
```

但它会产生一个错误：

> 无法使用以下命令运行 ADB：~/< my sdk path >/platform-tools/adb

有任何想法吗？我可以毫无问题地使用 ndk-build。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-15T19:46:34.567

在 adb 文件夹中输入`adb-killserver`. 另一种选择是转到 DDMS 设备并选择`Reset adb`.

# grails - GORM 用 hasMany 映射同一个类的两个属性

> ID：11219167
> 
> 赞同：2
> 
> 时间：2012-06-27T03:52:05.830
> 
> 标签：grails, mapping, grails-orm

我有以下内容：

```
class Match{ 
    Team localTeam
    Team visitingTeam
}

class Team{
    static hasMany = [matches: Match]
} 
```

抛出：加载插件管理器时出错：类 [class myapp.Team] 中的属性 [matches] 是双向一对多，反面有两个可能的属性。要么命名关系 [team] 另一侧的属性之一，要么使用“mappedBy”静态定义关系映射的属性。示例：静态 mappedBy = [matches:'myprop']

所以，我使用'mappedBy'：

```
class Team{
    static hasMany = [matches: Match]
    static mappedBy = [matches: localTeam, matches: visitingTeam]
} 
```

但是，通过这样做，当我从 db 获得一个团队时，matches Set 仅包含该团队是访问队的匹配项，这意味着它仅将匹配项映射到访问队。

如果我编写以下代码：

```
class Team{
    static hasMany = [matches: Match]
    static mappedBy = [matches: localTeam]
} 
```

它仅映射 localTeam 的匹配项。

**有没有办法将两场比赛（当球队是本地的，当它是访客时）映射到球队？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T04:41:00.930

请先阅读有关 GORM 性能问题的文章：[https ://mrpaulwoods.wordpress.com/2011/02/07/implementing-burt-beckwiths-gorm-performance-no-collections](https://mrpaulwoods.wordpress.com/2011/02/07/implementing-burt-beckwiths-gorm-performance-no-collections)

这可能就是你要找的：

```
class Team {
   String name
   String description

   static constraints = {
    name blank: false, nullable: false
    description blank: true, nullable: true
   }

   static mapping = {
      description type: 'text'
   }

   Set<Match> getHomeMatches() {
    Match.findAllByHomeTeam(this).collect { it.homeTeam } as Set
   }

   Set<Match> getMatches() {
    Match.findAllByTeam(this).collect { it.team } as Set
   }
}

class Match {

   Team homeTeam
   Team team

   static constraints = {
    homeTeam nullable: false
    team nullable: false
   }

   static mapping = {
    id composite: ['homeTeam', 'team']
   }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T04:48:16.953

尝试这个

```
class Team {
    static hasMany = [localTeamMatches: Match, visitingMatches: Match]
    static mappedBy = [localTeamMatches: "localTeam", visitingMatches: "visitingTeam"]
} 
```

# http-headers - ghs.google.com 如何知道指向我的位置？

> ID：11219168
> 
> 赞同：1
> 
> 时间：2012-06-27T03:52:20.593
> 
> 标签：http-headers, dns, blogger, cname

我有一个通过 GoDaddy 注册的网站，我决定将 blog.mysite.com 指向我的 Google Blogger 页面。奇怪的是：你应该告诉你的别名指向 ghs.google.com 而不是 myblog.blogspot.com （后者我试图无济于事）。

我不明白 ghs.google.com 怎么知道要去哪个博客。我从未指定过这一点。实际上，我*确实*告诉 myblog.blogspot.com 重定向到 blog.mysite.com，但我不认为这就是它建立关联的方式。

我所知道的是 ghs.google.com 让我觉得这很容易和方便，但它没有任何意义，我不知道他们是如何做到的（这不会让我满意）。

感谢您的澄清！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T08:54:53.673

在 HTTP 1.1 中，浏览器在向 ghs.google.com 请求任何内容时，会向 ghs.google.com 发送一个包含您的域名称的 Host 标头。

例如，一个 GET 请求看起来像

```
 GET /pub/WWW/ HTTP/1.1
   Host: www.w3.org 
```

ghs.google.com 将匹配此标头的内容，以确定必须将哪些内容（以及针对哪个站点）发送回浏览器。

# google-app-engine - 在 Django 模板中使用 webapp2.uri_for

> ID：11219176
> 
> 赞同：4
> 
> 时间：2012-06-27T03:53:33.037
> 
> 标签：google-app-engine, django-templates, webapp2

我有一个使用股票 webapp2 框架和 Django 模板引擎的 GAE 应用程序。此设置似乎不支持 Django 的内置 {% url %} 模板标签。

我不想将 URL 硬编码到我的模板中，而是想在我的模板中使用 webapp2.uri_for 函数。这可能吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:43:14.787

尝试编写自定义模板标签，请参阅[https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-tags](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-tags)

您可以在 [https://github.com/django/django/blob/master/django/template/defaulttags.py#L1194查看 Django 标签的源代码](https://github.com/django/django/blob/master/django/template/defaulttags.py#L1194)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T19:57:28.297

是的，这是可能的。我今天有同样的问题，最后得到了以下模板标签。我希望该功能支持 django “as” 语法，以便从 django url 模板标签中引入。

```
from django import template
import webapp2

register = template.Library()

def uri_for(parser, token):
    """Webapp2 uri_for django template tag"""
    bits = token.split_contents()
    if len(bits) < 2:
        raise template.TemplateSyntaxError("'%s' takes at least one argument (path to a view)" % bits[0])

    view_name = bits[1]
    as_var = None
    if len(bits) >= 2 and bits[-2] == 'as':
        as_var = bits[-1]

    return UriForNode(view_name, as_var)
uri_for = register.tag(uri_for)

class UriForNode(template.Node):
    """Uri for node"""
    def __init__(self, uri, as_var=None):
        self.uri = uri
        self.as_var = as_var

    def render(self, context):
        view = webapp2.uri_for(self.uri)
        if self.as_var:
            context[self.as_var] = view
            return ''
        return view 
```

# visual-studio-2010 - 每当我重新启动系统时，所有 Visual Studio 2010 项目都会“过时”

> ID：11219177
> 
> 赞同：1
> 
> 时间：2012-06-27T03:53:48.290
> 
> 标签：visual-studio-2010

我的 Visual Studio 2010 解决方案中有 20000 多个项目。当我开始新的一天时，我确实构建了“构建解决方案”。问题是，如果我重新启动系统，我无法直接运行项目，因为我得到“项目过时”。我很确定我什至没有修改单个源文件或头文件。随着我进一步调查，我发现所有项目都已过时。所以我必须再次构建我的完整解决方案，这需要 2 个多小时。那么，有什么办法可以防止这个问题。

我检查了我的系统时间，我的系统时间是最新的。系统时间也将比修改的 xxx.exe 日期提前，但我仍然得到“项目过期”窗口。我非常关心这个问题，因为有很多时间用于构建。有什么办法让我摆脱这种状态。？

谢谢大家，库沙尔

# python - 嵌套python装饰器？

> ID：11219184
> 
> 赞同：4
> 
> 时间：2012-06-27T03:54:18.197
> 
> 标签：python, decorator

我不知道是否“嵌套 python 装饰器”？是陈述这个问题的正确方式，所以如果不是，请告诉我。

无论如何，我正在 udacity 上一堂课，刚刚遇到了一些涉及 python 装饰器的代码，看起来像巫术魔法，所以现在我想问一个普遍的问题，看看我是否能弄清楚那个代码。

假设我有以下代码：

```
def A(f):
    print 'blah'
    return f

@A
def B(f):
    return f

@B
def C():
    pass 
```

现在，我从上面的代码中了解到，装饰器导致 B 变成：

```
B = A(B) 
```

这就是装饰师所做的。然而，C 是什么样的？从我看到的一些小示例代码中，不知何故 C 受到 A 的影响，因为 A 改变了 B，B 改变了 C。但我在理解这一点上有两个问题：

1.  C的确切性质。是`C = A(B)(C)`还是`C = A(B(C))`？
2.  如果 C 确实受 A 影响，为什么在我运行上述代码时只打印一次“blah”？

**个人猜测**

实际上，既然我已经把它打出来了，我假设发生的事情是我们首先得到 *：*`B = A(B)`然后. 这意味着总体而言，我们得到，它可以解释为什么 'blah' 只打印一次。 *`C = B(C)``C = A(B)(C)`*

 *但最好是我确定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T03:58:16.493

你的个人猜测是正确的。

装饰器在定义时被“调用”，当`@`-line 及其后面的函数定义被评估时。

```
@foo
def bar():
    pass 
```

只是...的语法糖

```
def bar():
    pass
bar = foo(bar) 
```*

# asp.net - WebAPI 空 500 错误

> ID：11219187
> 
> 赞同：4
> 
> 时间：2012-06-27T03:54:34.563
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api

我遇到了 WebAPI 返回空 500 的问题。

这是数据类。

```
public class Comment
{
    public int Id { get; set; }
    public string Content { get; set; }
    public string Email { get; set; }
    public bool IsAnonymous { get; set; }

    public int ReviewId { get; set; }
    public Review Review { get; set; }
}
public class Review
{
    public int Id { get; set; }
    public string Content { get; set; }

    public int CategoryId { get; set; }
    public string Topic { get; set; }
    public string Email { get; set; }
    public bool IsAnonymous { get; set; }

    public virtual Category Category { get; set; }
    public virtual ICollection<Comment> Comments { get; set; }
} 
```

这是来自 ReviewRepository.cs 的代码

```
public Review Get(int id)
{
    return _db.Reviews.Include("Comments").SingleOrDefault(r => r.Id == id);
} 
```

以及来自 ReviewController.cs 的代码

```
public HttpResponseMessage Get(int id)
{
    var category = _reviewRepository.Get(id);
    if (category == null)
    {
        return Request.CreateResponse(HttpStatusCode.NotFound);
    }
    return Request.CreateResponse(HttpStatusCode.OK, category);
} 
```

无论我做什么，从 /api/reviews/1 返回的响应都是 500 错误。调试时，类别正确，所有评论都已加载。

我试过`GlobalConfiguration.Configuration.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always;`了，但这没有帮助。我在这里不知所措！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T14:13:42.100

我猜这是因为你有一个圆形对象图，这会导致序列化错误。

[http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#handling_circular_object_references](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#handling_circular_object_references)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:51:58.490

我遇到了同样的问题。除了 GlobalConfiguration 策略，您可能需要在 web.config 中包含以下内容。

```
<system.webServer>
  <httpErrors existingResponse="PassThrough" />
</system.webServer> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:26:14.073

它可能是`ICollection<Comment> Comments`or的序列化`Category Category`。

# postgresql - phppgadmin 出现“空白 SQL”错误

> ID：11219188
> 
> 赞同：0
> 
> 时间：2012-06-27T03:54:41.660
> 
> 标签：postgresql, postgresql-9.1, phppgadmin

这是我的问题：我使用 Phppgadmin 的“导出”功能导出数据库 A_DB。转储文件 A_dump.sql 包括数据库结构和数据。然后我尝试创建另一个空白数据库 B_DB，并将 A_dump.sql 导入其中。

每次我这样做时，事务都会失败，没有报告错误：

```
SQL error:

In statement: 
```

是否有一些我可以在 phppgadmin 中找到的日志可以让我调查这个问题？我已经尝试搜索了一个小时，但仍然没有找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T03:08:59.253

最后发现上传的SQL文件大小超过了服务器设置的上传限制。因此 phppgadmin “默默地”删除了上传的文件，这导致了“空白”SQL 错误。

当我将导入的 SQL 文件拆分为较小的文件时，它可以工作。

# javascript - 如何正确编写 http 响应以使用 XHR 进度事件侦听器

> ID：11219191
> 
> 赞同：0
> 
> 时间：2012-06-27T03:55:27.353
> 
> 标签：javascript, http, http-headers, xmlhttprequest, httpresponse

我想使用 XHR 对象的“进度”事件来获取下载进度。

[这是来自MDN](https://developer.mozilla.org/en/using_xmlhttprequest#Monitoring_progress)的示例代码

```
var req = new XMLHttpRequest();

req.addEventListener("progress", updateProgress, false);
req.addEventListener("load", transferComplete, false);
req.addEventListener("error", transferFailed, false);
req.addEventListener("abort", transferCanceled, false);

req.open();

...

// progress on transfers from the server to the client (downloads)
function updateProgress(evt) {
  if (evt.lengthComputable) {
    var percentComplete = evt.loaded / evt.total;
    ...
  } else {
    // Unable to compute progress information since the total size is unknown
  }
}

function transferComplete(evt) {
  alert("The transfer is complete.");
}

function transferFailed(evt) {
  alert("An error occurred while transferring the file.");
}

function transferCanceled(evt) {
  alert("The transfer has been canceled by the user.");
} 
```

我写过类似的代码，但`lengthComputable`进度事件的字段结果是错误的。该`loaded`字段是某个有限值，但`total`设置为零。

从上面代码示例中的注释中，我可以看到浏览器在 HTTP 响应中没有获得足够的信息来计算有意义的下载进度。

编写响应以使其工作的正确方法是什么？我在测试中看到的响应有`Transfer-encoding: chunked`和`Content-Length: 8`。我从 Tornado Web 服务器生成它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:32:13.947

在[分块传输编码](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)中，响应的总长度不由服务器指示，因此客户端事先不知道。

你可以尝试两件事。

*   要么禁用分块传输编码，而是使用`Content-Length`. 这是进度事件规范所[要求](http://www.w3.org/TR/progress-events/#firing-events-using-the-progressevent-interface-for-http)的。但我不知道 Tornado 是否/如何做到这一点。
*   或者，在自定义响应标头中包含总长度，例如`X-Total-Length`. 然后，使用这样的代码来确定你的百分比：

    ```
    function updateProgress(evt) {
      var total = evt.lengthComputable ?
                  evt.total : parseInt(req.getResponseHeader('X-Total-Length'));
      if (total) {
        var percentComplete = evt.loaded / total;
        // ...
      }
    } 
    ```

# c# - 如何在数据网格中添加 rowsadded 事件？

> ID：11219192
> 
> 赞同：0
> 
> 时间：2012-06-27T03:55:59.090
> 
> 标签：c#, winforms, datagridview

如何添加活动？默认情况下，将数据网格添加到表单后，它没有添加行事件。然后我添加了这个

```
private void dataGridView1_RowsAdded(object sender, DataGridViewCellEventArgs e)
{
    MessageBox.Show("Row added", "Error!");
} 
```

哪个能够运行，当我向网格添加数据时，这并没有触发。我错过了一步吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T04:04:07.887

**从后面的代码**

`InitializeComponent();` 添加后

```
dataGridView1.RowsAdded += dataGridView1_RowsAdded; 
```

事件应该改变为

```
private void dataGridView1_RowsAdded(object sender, DataGridViewRowsAddedEventArgs e)
{
    MessageBox.Show("Row added", "Error!");
} 
```

**知识库快捷方式**

```
public MyForm()
{
    InitializeComponent()
    dataGridView1.RowsAdded += (press [tab][tab] now)
} 
```

**来自设计师**

您可以从设计器视图中执行此操作。转到网格视图的属性并选择事件选项卡。找到 RowsAdded 事件并双击它。它将为您生成事件处理程序和事件。

[Microsoft Visual Studio 和 C#：如何以可视方式向控件添加事件？](https://stackoverflow.com/questions/1135299/microsoft-visual-studio-and-c-how-to-visually-add-events-to-controls)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T04:01:33.227

您是否在 *.designer.cs 文件中添加了代码？

```
this.dataGridView1.RowsAdded += new System.Windows.Forms.DataGridViewRowsAddedEventHandler(this.dataGridView1_RowsAdded); 
```

添加事件的最简单方法是：

1.  转到控件的属性窗口。
2.  然后单击属性窗口顶部的小“闪电”标志选项卡。
3.  然后向下滚动到该控件所需的事件并双击它。

这将在设计器和您的 cs 文件中为您创建所有代码。

# wordpress - 安全上传 Wordpress 评论

> ID：11219194
> 
> 赞同：1
> 
> 时间：2012-06-27T03:56:10.743
> 
> 标签：wordpress, security, plugins, upload, comments

我喜欢 Easy Comment Uploads Wordpress 插件提供的功能。但是，我看到它已从 Wordpress 插件存储库中删除，我猜测是出于安全原因，但我似乎无法在任何地方确认。该插件的早期版本存在安全问题，但我没有看到任何关于我拥有的 1.01 版本问题的报告。无论如何，有人知道这个插件是否安全，和/或是否有任何其他提供类似功能的安全插件（免费或高级）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:24:38.657

作为插件的作者，我可以确认插件的最新版本 (1.01) 不包含已知的安全问题，尽管您应该用最新的可用版本替换插件中包含的 timthumb.php 脚本的版本。

我最近一直忙于开发插件，所以我担心它不太可能很快更新，尽管我目前正在开发一个提供许多相同功能的高级插件，除了包括更加注重安全性的设计： http: [//www.solaceten.info/plugins/wp-extra-comment-fields-v2/](http://www.solaceten.info/plugins/wp-extra-comment-fields-v2/)。

# xcode - ios应用程序中的股票行情

> ID：11219196
> 
> 赞同：0
> 
> 时间：2012-06-27T03:56:42.210
> 
> 标签：xcode, yahoo-finance

我想从一个滚动视图创建一个股票代码，该滚动视图创建显示股票代码信息的图像视图子视图，并且不断滚动。问题是，我想从 Yahoo 的 Finance API 获取我的股票报价，但我还没有找到有关如何在 xcode 中使用 YQL 的信息。有人对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T23:17:23.667

对我来说看看[这个组件](https://github.com/MugunthKumar/MKTickerViewDemo)，它是一个带有代码的实时保护程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T04:29:40.177

这里有一个 YQL 和 Yahoo API for XCode on Objective-C 的例子。

尝试查看此代码以获取一些解决方案，并可以将其用于自己的应用程序。

[雅虎！社交 SDK，Objective-C 库](https://github.com/yahoo/yos-social-objc)

# jquery - 关于 emberjs 中的模板

> ID：11219197
> 
> 赞同：1
> 
> 时间：2012-06-27T03:56:57.997
> 
> 标签：jquery, ember.js

```
 $.each(data, function () {
                var d = new Date(item.created_at.replace('+', 'UTC+'));
                var dd = d.format('mediumDate');
                var text = '';
                if (item.text != null)
                    text = item.text.linkify();
                html += text + '<br/>' + dd + '</div>';

            }); 
```

我想为它制作模板（emberjs）。但我不知道如何处理模板中的属性日期（dd 变量）。我怎么能这样做？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T06:08:53.333

假设我正确猜到了缺失的部分，您在这里有一个工作示例：http: [//jsfiddle.net/MikeAski/Pueqb/](http://jsfiddle.net/MikeAski/Pueqb/)，它说明了单个项目显示的情况。

**车把**：

```
<script type="text/x-handlebars" >
    {{linkify text}}
    <br/>
    {{formatDate created_at}}
</script> 
```

**JavaScript**：

```
Ember.Handlebars.registerHelper('linkify', function(path, options) {
    var text = this.get(path);
    return Ember.String.htmlSafe(linkify(text));
});

Ember.Handlebars.registerHelper('formatDate', function(path, options) {
    var rawDate = this.get(path);
    return new Date(rawDate).toLocaleString(); // or whatever format you need...
}); 
```

​</p>

有关一系列项目，请参阅：http: [//jsfiddle.net/MikeAski/Pueqb/11/](http://jsfiddle.net/MikeAski/Pueqb/11/)或[http://jsfiddle.net/MikeAski/Pueqb/12/](http://jsfiddle.net/MikeAski/Pueqb/12/)

# scala - 除了或多或少的功能外，使用 var List 或 val mutable.List 的权衡是什么

> ID：11219198
> 
> 赞同：0
> 
> 时间：2012-06-27T03:57:16.377
> 
> 标签：scala

我知道函数式风格更喜欢可变的 var 或 val 列表，我理解为什么，但我正在考虑纯粹的时间/空间权衡。

我目前正在与一个 java 库进行交互，并且无论如何都必须在 scala 中编写大量非 idomatic 代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T09:08:16.363

也许有几个指针可以帮助您理解，为什么在使用不可变结构时没有那么大的惩罚：

*   [scala 集合的性能特征表](http://docs.scala-lang.org/overviews/collections/performance-characteristics.html)。
*   [Extreme Cleverness：Scala 中的函数式数据结构](http://www.infoq.com/presentations/Functional-Data-Structures-in-Scala)（关于不可变数据结构的相当长但非常有趣的视频）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T07:24:43.120

在我看来，不可变列表的最大用途是，如果您在对象之间共享它们，就没有副作用。如果您开始使用并发性甚至并行性，这一点很重要。

顺便说一句：Scala 使用 Builder 来更改现有的列表并“回收”以前的列表，因此这并不像您预期​​的那样昂贵。

**编辑**

当我现在让您获得基准时，我发现[这个](http://paradigmatic.streum.org/2012/02/benchmarking-scala-list-traversal-idioms/)非常好，因为它们显示了他们使用的代码。

# iphone - 检查 NSDocumentDirectory 中的现有图像

> ID：11219202
> 
> 赞同：2
> 
> 时间：2012-06-27T03:58:05.097
> 
> 标签：iphone, ios, xcode

我有一个选择器，可以将我的图像保存在`NSDocumentDirectory`此处：

```
 for (int i = 0; i < image.count; i++) {
            NSLog(@"%@", [image objectAtIndex:i]);
            NSArray *paths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory,    NSUserDomainMask ,YES );
            NSString *documentsDirec = [paths objectAtIndex:0];
            NSString *savedPath = [documentsDirec stringByAppendingPathComponent:[NSString stringWithFormat:@"myImages%d.png", i]];
            ALAssetRepresentation *rep = [[image objectAtIndex: i] defaultRepresentation];
            UIImage *image = [UIImage imageWithCGImage:[rep fullResolutionImage]];
            NSData *imageData = UIImagePNGRepresentation(image);
            [imageData writeToFile:savedPath atomically:YES];

            NSLog(@"saving at:%@",savedPath);
         } 
```

如何确定或实施检查现有图像/图像名称是否已经存在。然后，如果图像存在，即使它仍然在选择器中被选中，它也不会添加相同的图像/图像名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T04:04:30.573

使用以下代码检查文档目录中是否已存在特定图像：

```
NSString *documentsDirectoryPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

NSString *imageName = [documentsPath stringByAppendingPathComponent:@"imageName.jpg"];
BOOL fileExists = [[NSFileManager defaultManager] imageName]; 
```

在您的代码中，您可以像这样添加它：

```
 for (int i = 0; i < image.count; i++) {
                NSLog(@"%@", [image objectAtIndex:i]);
                NSArray *paths = NSSearchPathForDirectoriesInDomains(  NSDocumentDirectory,    NSUserDomainMask ,YES );
                NSString *documentsDirec = [paths objectAtIndex:0];
                NSString *savedPath = [documentsDirec stringByAppendingPathComponent: [NSString stringWithFormat:@"myImages%d.png", i]];

                BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:savedPath];

                //Save only if file not exists
                if(!fileExists) {
                ALAssetRepresentation *rep = [[image objectAtIndex: i] defaultRepresentation];
                UIImage *image = [UIImage imageWithCGImage:[rep fullResolutionImage]];
                NSData *imageData = UIImagePNGRepresentation(image);
                [imageData writeToFile:savedPath atomically:YES];

                NSLog(@"saving at:%@",savedPath);
               }
             } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T04:19:20.130

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"imageName.jpg"];

        if ([[NSFileManager defaultManager] fileExistsAtPath:filePath]) {
            NSLog(@"file exists at the path");
        }
        else
            NSLog(@"file doesnt exist"); 
```

我想这会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T04:24:45.420

做这个：

```
 for (int i = 0; i < image.count; i++) 
     {
        NSLog(@"%@", [image objectAtIndex:i]);
        NSArray *paths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory,    NSUserDomainMask ,YES );
        NSString *documentsDirec = [paths objectAtIndex:0];
        NSString *savedPath = [documentsDirec stringByAppendingPathComponent:[NSString stringWithFormat:@"myImages%d.png", i]];
        if(![[NSFileManager defaultManager]fileExistsAtPath:savedPath]) //if not exits then save image
        {
         ALAssetRepresentation *rep = [[image objectAtIndex: i] defaultRepresentation];
         UIImage *image = [UIImage imageWithCGImage:[rep fullResolutionImage]];
         NSData *imageData = UIImagePNGRepresentation(image);
         [imageData writeToFile:savedPath atomically:YES];
         NSLog(@"saving at:%@",savedPath);
        }
     } 
```

# android - AndroidManifest.xml 中使用库的 Android 自定义 SDK 问题

> ID：11219205
> 
> 赞同：0
> 
> 时间：2012-06-27T03:58:35.170
> 
> 标签：android, android-sdk-2.3, bluetooth-lowenergy

我正在使用从 Broadcom 下载的自定义 SDK 来访问手机上的 BLE 芯片。我通过 SDK 管理器下载并安装了 SDK，据说在 AndroidManifest.xml 中包含这一行的文档：

```
<uses-library android:name="com.broadcom.bt.le" android:required="true" /> 
```

我使用 Broadcom SDK 创建了一个 AVD。当我尝试使用模拟器或手机进行调试时，出现以下错误：

```
Installation error: INSTALL_FAILED_MISSING_SHARED_LIBRARY
Please check logcat output for more details.
Launch canceled! 
```

[http://code.google.com/p/broadcom-ble/](http://code.google.com/p/broadcom-ble/)

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:35:44.580

[`<uses-library>`](http://developer.android.com/guide/topics/manifest/uses-library-element.html)用于指定要安装此包**的设备需要**此元素中提到的共享库。因此，该库必须存在于设备中才能继续安装。显然，您在此元素中提到的任何内容都不存在于导致安装错误的设备中。

请尝试不指定元素并报告任何错误。

# android - Android - 使用电话号码查询联系人，返回姓名和公司，即使没有指定公司

> ID：11219209
> 
> 赞同：0
> 
> 时间：2012-06-27T03:58:55.547
> 
> 标签：android, android-contacts

如标题所述，我想查询所有指定了电话号码的联系人，并返回一个光标，其中只包含联系人的显示名称和公司名称。我希望每个联系人只返回 1 行。

到目前为止，这是我想出的：

```
Cursor contactsCur = getContentResolver().query(
        ContactsContract.Data.CONTENT_URI,
        new String[] {ContactsContract.Contacts._ID, ContactsContract.Contacts.DISPLAY_NAME, ContactsContract.CommonDataKinds.Organization.COMPANY},
        ContactsContract.Contacts.HAS_PHONE_NUMBER + " >? AND " + Contacts.Data.MIMETYPE + " =? " ,
        new String[] {"0", ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE},
        null ); 
```

这将为同时指定电话号码和公司的每个联系人返回 1 行 - 它不包括未指定公司的联系人。

我知道为什么会这样 -`AND " + Contacts.Data.MIMETYPE + " =? "`查询的一部分会阻止任何没有公司的联系人被返回。问题是如果没有该`AND`部分，每个联系人都会返回多行。

看起来这是因为`ContactsContract.CommonDataKinds.Organization.COMPANY`实际上是指`ContactsContract.Contacts.Data.DATA1`，这是一个通用字段。

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T14:10:38.080

我最终为此使用了多个查询

# php - 如何避免系统生成的电子邮件进入垃圾邮件？

> ID：11219210
> 
> 赞同：-1
> 
> 时间：2012-06-27T03:58:58.453
> 
> 标签：php, email, email-spam, spam-prevention

我已经编写了使用 php 发送电子邮件的代码。我不想把那封邮件变成垃圾邮件。我怎样才能避免将该邮件变成垃圾邮件？

```
<?php

$EmailTo = "name@example.com";
$Subject = "Enquiry from xxxx Website";
$name = $_REQUEST["name"];
$Body = $_REQUEST["body"];
$Subject = $_REQUEST["subject"];
$emailfrom = $_REQUEST["email"];
$phone = $_REQUEST["phone"];
$comments = $_REQUEST["comments"];
$todayis = date("l, j F Y, g:ia (T)") ;

// To send HTML mail, the Content-type header must be set
$headers .= "Organization: Sender Organization\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-type: text/plain; charset=iso-8859-1\r\n";
$headers .= "X-Priority: 3\r\n";
$headers .= "X-Mailer: PHP". phpversion() ."\r\n";

// Prepare email body text
$Body = "Here is the information collected from your online enquiry form. It was submitted by:\n";
$Body .= "Email: ";
$Body .= $todayis;
$Body .= "\n\n";

$Body .= "Name: ";
$Body .= $name;
$Body .= "\n";

$Body .= "Email: ";
$Body .= $emailfrom;
$Body .= "\n";

$Body .= "Phone: ";
$Body .= $phone;
$Body .= "\n";

$Body .= "Comments: ";
$Body .= $comments;
$Body .= "\n";

// send email 
$success = mail($EmailTo, $Subject, $Body, "From: <$emailfrom>");

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T04:00:07.560

这取决于垃圾邮件过滤器将其标记为垃圾邮件，但请确保您的 DNS MX 标头配置正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T04:05:29.653

邮件分类是在接收端完成的，而不是在发送端。因此，无论您做什么，都无法避免被归类为垃圾邮件。

顺便说一句：如果您设法找到 100% 的“我不是垃圾邮件”收据，请告诉我。我有这个令人兴奋的商业机会，在尼日利亚拥有一笔无人认领的财富。

所以：解决问题所在：在接收方。确保您的主机的 IP 地址被列入白名单，就像您的发件人地址（或发件人/收件人元组，取决于您的文件管理器）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T04:06:59.280

正如大卫所说，这取决于垃圾邮件过滤器。每个电子邮件服务器/电子邮件提供商都有自己的一套规则，但通常有几个常见的错误需要避免：

> 1.  使用垃圾短语，例如“点击这里！” 或“千载难逢的机会！” 用感叹号发疯！！！！！！！！！！！！！！！
>     
>     
> 2.  使用全部大写，这就像通过电子邮件在你的肺顶部尖叫（尤其是在主题行中）
>     
>     
> 3.  着色字体亮红色或绿色
>     
>     
> 4.  编码草率的 HTML，通常来自将 Microsoft Word 文件转换为 HTML
>     
>     
> 5.  创建一个 HTML 电子邮件，它只有一个大图像，几乎没有文本（因为垃圾邮件过滤器无法读取图像，他们认为您是试图欺骗他们的垃圾邮件发送者）在主题行中使用“测试”一词（代理机构在向客户发送草稿以供批准时遇到这种情况）
>     
>     
> 6.  向同一公司内的多个收件人发送测试（该公司的电子邮件防火墙只能假设它是垃圾邮件攻击）
>     
>     
> 7.  在 Word 中设计 HTML 电子邮件并将代码导出为 HTML（该代码草率，垃圾邮件过滤器讨厌它。）

您可以参考 MailChimp 的“[垃圾邮件过滤器的思考方式”](http://kb.mailchimp.com/article/how-spam-filters-think/)以获得良好的阅读效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T04:02:35.257

确保您的服务器不在黑名单上。如果您使用的是动态 IP，则很可能是。检查[http://www.spamhaus.org/](http://www.spamhaus.org/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-26T12:27:28.123

I know you're sending plain text, but if you ever decide to send something in html, **make sure not to use old, deprecated html tags**. I got spam-listed once for having `<font>` tags and the like, which were being inserted by NicEdit.

Just a nugget for everyone out there.

# python - 读取特定的 Windows 事件日志事件

> ID：11219213
> 
> 赞同：15
> 
> 时间：2012-06-27T03:59:44.947
> 
> 标签：python, windows, event-log

我正在开发一个程序，需要知道如何根据记录号读取 Windows 事件日志的特定条目，该脚本已经具有该记录号。下面是我一直在使用的代码，但我不想遍历所有事件，直到找到我正在寻找的事件。有任何想法吗？

```
import win32evtlog

server = 'localhost' # name of the target computer to get event logs
logtype = 'System'
hand = win32evtlog.OpenEventLog(server,logtype)
flags = win32evtlog.EVENTLOG_BACKWARDS_READ|win32evtlog.EVENTLOG_SEQUENTIAL_READ
total = win32evtlog.GetNumberOfEventLogRecords(hand)

while True:
    events = win32evtlog.ReadEventLog(hand, flags,0)
    if events:
        for event in events:
            if event.EventID == "27035":
                print 'Event Category:', event.EventCategory
                print 'Time Generated:', event.TimeGenerated
                print 'Source Name:', event.SourceName
                print 'Event ID:', event.EventID
                print 'Event Type:', event.EventType
                data = event.StringInserts
                if data:
                    print 'Event Data:'
                    for msg in data:
                        print msg
                break 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-05-22T19:54:28.837

我意识到这是一个老问题，但我遇到了它，如果我遇到了，其他人也可能会遇到。

您还可以编写自定义查询，允许您通过可以编写脚本的任何 WMI 参数（包括事件 ID）进行查询。它还有一个好处是可以让您退出并清除所有存在的 VBS WMI 查询。实际上，我比其他任何功能都更频繁地使用此功能。例如，请参阅：

*   [http://technet.microsoft.com/en-us/library/ee176693.aspx](http://technet.microsoft.com/en-us/library/ee176693.aspx)
*   [http://technet.microsoft.com/library/ee176695.aspx](http://technet.microsoft.com/library/ee176695.aspx)

这是在应用程序日志中查询特定事件的示例。我没有详细说明，但您也可以构建 WMI 时间字符串并查询特定日期/时间之间或之后的事件。

```
#! py -3

import wmi

def main():
    rval = 0  # Default: Check passes.

    # Initialize WMI objects and query.
    wmi_o = wmi.WMI('.')
    wql = ("SELECT * FROM Win32_NTLogEvent WHERE Logfile="
           "'Application' AND EventCode='3036'")

    # Query WMI object.
    wql_r = wmi_o.query(wql)

    if len(wql_r):
        rval = -1  # Check fails.

    return rval

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-27T05:16:32.733

不！没有可用的函数允许您根据事件 ID 获取事件。

参考：[事件记录功能](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363654%28v=vs.85%29.aspx)

```
GetNumberOfEventLogRecords  Retrieves the number of records in the specified event log.
GetOldestEventLogRecord     Retrieves the absolute record number of the oldest record 
                            in the specified event log.
NotifyChangeEventLog        Enables an application to receive notification when an event
                            is written to the specified event log.

ReadEventLog                Reads a whole number of entries from the specified event log.
RegisterEventSource         Retrieves a registered handle to the specified event log. 
```

只有其他感兴趣的方法是阅读最旧的事件。

您将不得不以任何方式遍历结果，并且您的方法是正确的:)

您只能更改方法的形式，如下所示，但这是不必要的。

```
events = win32evtlog.ReadEventLog(hand, flags,0)
events_list = [event for event in events if event.EventID == "27035"]
if event_list:
    print 'Event Category:', events_list[0].EventCategory 
```

这和你做的一样，但更简洁

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-05-06T19:02:47.703

现在有一个 python 库（python 3 及更高版本）可以满足您的要求，称为[winevt](https://github.com/Owlz/winevt)。您正在寻找的内容可以通过以下方式完成：

```
from winevt import EventLog
query = EventLog.Query("System","Event/System[EventID=27035]")
event = next(query) 
```

# javascript - 扩展点击功能

> ID：11219214
> 
> 赞同：1
> 
> 时间：2012-06-27T03:59:48.060
> 
> 标签：javascript

我有这样的 onclick 功能

```
onclick = function(){alert('hello')} 
```

我想根据服务器响应向它添加一个附加功能，以便我可以显示更多内容，例如不仅显示你好，还显示“不客气”，如何在没有 jquery 的情况下编写它？

```
onclick = function(){alert('you are welcome')} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T04:08:56.210

使用[`addEventListener`](https://developer.mozilla.org/en/DOM/element.addEventListener).

```
elementSelected.addEventListener("click", function(){
    alert('you are welcome');
}); 
```

这是一种现代的方式来做到这一点。

对于那个旧的 IE，你必须这样做：

```
elementSelected.attachEvent("onclick", function(){
    alert('you are welcome');
}); 
```

* * *

所以更方便的方法是

```
function addEvent(ele, type, func){
    if(ele.addEventListener){
        ele.addEventListener(type, func, false);
    }else if(ele.attachEvent){
        ele.attachEvent("on" + type, func);
    }
}

addEvent(document.body, "click", function(){
    alert("Hello world!");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T04:10:25.597

使用事件监听器可能会解决问题，但请注意 W3C 模型并未说明首先触发哪个事件处理程序。

我最好建议您从函数中检查服务器响应并从那里调用第二个函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T04:02:22.347

如果没有 jQuery，请添加事件侦听器而不是使用 onClick 值。这是一个[描述](http://www.quirksmode.org/js/events_advanced.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T04:04:00.830

```
yourelement.attachEvent('onclick',hello);

Function hello(){
// do wat you want here
} 
```

# eclipse - 安装新软件时 Eclipse 挂起

> ID：11219215
> 
> 赞同：5
> 
> 时间：2012-06-27T03:59:56.983
> 
> 标签：eclipse, eclipse-plugin

我正在尝试在 C++ 版本的 Eclipse 中安装新软件。`Help -> install new software`. 当我去安装新软件时，它会挂起或需要几个小时才能移动一个百分比。

我已经读到这是一个已知的错误`JRE7`，我假设我正在使用它，因为我已经安装了它。我`JRE6`通过`eclipse.ini`使用参数`-vm XXXX`where`XXXX`是我的`javaw.exe`.

它似乎没有改变任何东西。

想法？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-11T09:47:43.503

**最后，只有在安装期间取消选中联系所有更新站点以查找所需的软件，**它才能为我工作。从我所看到的可能是 Mac 问题，在 Windows 和 Linux 上它没有任何变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-27T16:54:48.403

您可以通过在安装新插件之前禁用防火墙软件来解决此问题。如果您的防病毒软件具有内置防火墙，则需要将其禁用。

或者，为了减少更新时间，您可以取消选中*安装期间联系所有更新站点以查找所需的软件*，有关详细信息，请参阅[我的博客文章](http://techcetra.blogspot.in/2012/08/eclipse-hangs-while-adding-new-plugin.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-03T21:03:18.333

我发现通过将此行添加到 eclipse.ini 文件中会有所帮助：

-Djava.net.preferIPv4Stack=true

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T13:38:20.490

为了解决这个问题，我去了 Windows->preferences->general->network settings 并手动输入了每个存储库。我还从窗口顶部的下拉菜单中选择了手动。

离开我的家庭网络似乎也很有用，我不得不进入另一个网络。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T12:17:33.653

要将新插件安装到 Eclipse 中，您可以下载插件安装程序或去市场安装。确保您使用的是什么 SDK 并填写正确的路径。祝你成功

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-07T15:03:34.643

I kept having this issue and resolved it by following Nitin Kale's fix for Eclipse slowness on fresh 16.04 here> [https://askubuntu.com/a/788826](https://askubuntu.com/a/788826)

> open terminal and type following command
> 
> export SWT_GTK3=0 add this to your ~/.profile file to make it persistent across logins (you'll need to logout and log back in to be able to start eclipse from shortcut)
> 
> then go to your eclipse folder and search for eclipse.ini file Right click anywhere in the folder and choose "open in terminal" and type following command in terminal
> 
> sudo gedit eclipse.ini and add the following line before --launcher.appendVmargs
> 
> --launcher.GTK_version 2 Search in the file for 256 and replace it with 1024

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-28T15:00:35.500

我必须转到首选项-> 常规-> 网络连接并将活动提供程序设置为“直接”，因为默认情况下它是“本机”。然后它工作得很好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-05T18:26:19.860

以上方法都不适用于 Ubuntu 16.04 LTS 和 Eclipse Mars。不得不做以下

> 转到“首选项”->“安装/更新”->“可用软件站点”并取消选中除“Mars”之外的所有选项。

在此安装之后，很快就工作了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-19T15:44:31.490

如果有人仍然遇到此问题，只需转到 Windows Defender 并将安装应用程序添加为例外。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-22T06:32:05.877

我按照上述答案中的所有步骤解决了我的问题

1.  窗口 -> 首选项 -> 安装/更新 -> 可用软件站点，然后取消选中除您的包名称（霓虹灯，火星）之外的所有选项。

2.  Window -> Prefrerences -> General -> Network Connections 并将 Active provider 设置为“manual”。

3.  帮助 -> 安装新软件 -> 取消选中“安装期间联系所有更新站点”。

# css - CSS Dropdown 不显示但定位正确

> ID：11219219
> 
> 赞同：0
> 
> 时间：2012-06-27T04:00:41.583
> 
> 标签：css

[http://jsfiddle.net/WTELW/4/](http://jsfiddle.net/WTELW/4/)

以下在 JSFiddle 上运行良好，但在浏览器中似乎无法正常运行（尝试复制粘贴到记事本）。

我已经尝试为图层设置 z-index，但似乎并没有这样做。我可以看到图层定位正确，但仍然隐藏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T04:42:40.343

`overflow: hidden`从以下内容中删除后，下拉菜单出现在我面前：

```
#header {
    width: 1024px;
    position: relative;
    overflow: hidden;
    margin-right: auto;
    margin-left: auto;
} 
```

我认为正在发生的事情是您`ul`在标题中有（下拉菜单）。由于`ul`扩展的内容在 header 之外`div`，并且您已`overflow`设置为`hidden`，因此您无法再看到下拉列表，因为它被隐藏了。

# android - 无法在 Eclipse 上从我的应用程序导入 R

> ID：11219223
> 
> 赞同：0
> 
> 时间：2012-06-27T04:01:41.413
> 
> 标签：android, android-layout

您好，我无法从我的应用程序中导入带有布局资源的 R 这是我完全遵循的代码，但 eclipse 不会运行应用程序

```
package menu.packg;

import android.app.Activity;
import android.os.Bundle;
import android.widget.*;

import menu.packg.R;

public class Menuactivity extends Activity{
    @Override
    public void onCreate(Bundle savedInstanceState){ 
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T04:22:55.017

R 是自动生成的。但是，如果您想在您的 gen 目录中创建 R.java ，请尝试使用它。

```
-> Right click on the Respective Project Folder in eclipse
-> Click Properties, then select Java Build Path, then select source
-> Now select Add Folder at right side of that window,
-> Select on gen folder -> then select Ok, again Ok. 
```

现在您将获得项目的相应 gen 包。现在尝试清理项目。

希望它会帮助你。我已经这样做了，它对我有很大帮助。

享受。

:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T04:19:54.980

1.  检查所有的 XML，
2.  项目 -> 清洁，
3.  右键单击-> 修复项目属性，
4.  重复。
5.  也许尝试重新启动 Eclipse

我的 R 代问题恐慌清单

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T04:06:18.243

您根本不必导入`R.java`文件。它会自动生成（如果您有有效的 XML）并为您处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T04:26:36.053

此外，根据我的经验，有时如果您的布局有问题，构建将不会完成，因此`R.java`将无法正确生成。

你确定你的布局没有错误吗？

# c# - 在 VPN 中使用时 Visual Studio 模拟器无法连接

> ID：11219231
> 
> 赞同：0
> 
> 时间：2012-06-27T04:02:31.740
> 
> 标签：c#, .net, visual-studio, vpn, visual-studio-2012

嗨，当我使用 Cisco 系统 vpn 客户端连接到 vpn 时，我正在尝试在模拟器中访问互联网。

我关注[了这个链接](http://msdn.microsoft.com/en-us/library/ff754351%28v=vs.92%29.aspx#BKMK_DisableProxy) ，但没有得到太多帮助。我正在使用 Windows8 发布预览版和 Visual Studio 2012 RC。

**我可以使用桌面浏览器连接到互联网**..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:06:13.360

参考本[指南](http://betterthaneveryone.com/archive/2008/08/31/getting-network-access-on-the-windows-mobile-emulator.aspx)，看起来您可能具有桥接网络配置或将设备绑定到您的物理接口。这将解释您描述的行为。

您希望将虚拟机绑定到由您的 VPN 连接创建的隧道接口。如果有办法在此对话框中选择 NAT 选项，请尝试。这将是最好的，因为它采用您的计算机配置为采用的任何互联网路径，并且不需要从 VPN 服务器为您的 VM 提供单独的 IP 地址。

使用此对话框选择连接到 VPN 时创建的隧道/虚拟/非物理接口。

![设置页面](../Images/576bd13dd661717ba0913625f685e665.png)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T23:03:29.290

正如我们之前指出的，这可能是因为您的 VPN 限制了您对互联网的访问。如果是这样，解决方法是让您的 VPN 管理员设置一个您可以通过 VPN 连接到的远程桌面，然后在远程桌面上运行模拟器以连接到 Internet。

或者尝试禁用您已安装的任何防病毒/防火墙套件，以查看它是否会阻止模拟器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T05:17:54.047

您可以要求您的 vpn 管理员将访问其互联网的权限授予您连接 VPN 的用户。

# php - 简单的 PHP 数学函数

> ID：11219233
> 
> 赞同：-2
> 
> 时间：2012-06-27T04:02:39.417
> 
> 标签：php, mysql, phpmyadmin

我需要一些帮助来解决一个小的 php 问题。但我不知道如何处理它。

有一个函数叫

```
<td><?=$currentCourse['price']?></td> 
```

我需要这个功能做的是无论 $currentCourse['price']. 都可以享受 20% 的折扣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T04:03:42.023

```
<td><?=$currentCourse['price']*0.8?></td> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T04:05:13.877

要创建一个函数，您需要使用`()`而不是`[]`. `[]`用于获取数组的数组索引！

对于您的功能，您可以这样做：

```
<?php
    function currentCourse($price)
    {
        return ($price * 0.8);
    }
?> 
```

或者如果你想在没有函数的情况下使用相同的东西，你可以这样做：

```
<td><?=($currentCourse['price'] * 0.8)?></td> 
```

但我建议你不要使用短标签，而是使用这个：

```
<td><?php echo ($currentCourse['price'] * 0.8); ?></td> 
```

因为默认情况下`short_tags`是`Off`.

## 圆形功能

```
<?php
    echo round(3.4);         // 3
    echo round(3.5);         // 4
    echo round(3.6);         // 4
    echo round(3.6, 0);      // 4
    echo round(1.95583, 2);  // 1.96
    echo round(1241757, -3); // 1242000
    echo round(5.045, 2);    // 5.05
    echo round(5.055, 2);    // 5.06
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T04:10:08.380

```
<?php
function getPercentOff($price, $percent = 20)
{
    return $price * (1 - ($percent/100));
}
?> 
```

对于您的要求，这将是一个相对通用的解决方案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-27T04:07:34.087

首先短标签操作数`<?=`被折旧，不要使用它

```
<td><?php echo getPrice($currentCourse['price']);?></td>    

function getPrice($price){
return $price * 0.8;
} 
```

# c++ - 如何在 C++ 类中使用引用变量？

> ID：11219234
> 
> 赞同：1
> 
> 时间：2012-06-27T04:02:46.127
> 
> 标签：c++

我想在一个类中有一个引用数据成员，但我不想在构造函数中初始化它。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T04:04:19.667

这是不可能的，您*必须*在 ctor 初始化列表中初始化引用数据成员。如果您真的必须做这样的事情，请使用指向数据成员的指针而不是引用。初始化指向`NULL`ctor 的指针，然后在需要时正确初始化它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T04:13:46.797

您必须在构造函数中初始化它（**仅**通过初始化列表），因为这是引用变量的属性（必须初始化引用）。

您可以通过默认参数对其进行初始化来将其初始化为一些静态/全局变量。

```
YourClass::YourClass(int& ref = _SomeGlobalVar) : m_RefInClass(ref){} 
```

但是您将无法进一步重新初始化它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T06:31:08.803

如前所述，如果某处需要参考，这通常是一个糟糕的主意——通常有充分的理由说明原因。

如果您正在做的事情有特定的原因，您可能想[看看 Null Object Patterns](http://en.wikipedia.org/wiki/Null_Object_pattern)。

您可以创建一个抛出某种“未实现”异常的空对象，或者什么都不做。您仍然需要在**初始化列表**中初始化您的成员变量，但现在至少您可以灵活地在将来进行更改。

# git - 更改分支后合并提交

> ID：11219235
> 
> 赞同：1
> 
> 时间：2012-06-27T04:02:54.913
> 
> 标签：git

我最初有两个分支：

```
master A---B---C
                \
fork             D---E---F---H---I 
```

所以我想让我的fork分支在F合并到master，而不合并D和E。所以它变成：

```
master A---B---C-------F---H---I
                \
fork             D---E 
```

然后我希望能够将 fork 重新设置为 master，所以它变成：

```
master A---B---C-------F---H---I
                                \
fork                             D---E 
```

（不确定字母，还是应该变成 D' 和 E' 并让旧的留在 C 之后）

所以我四处寻找，发现我可以在“I”处分支我的叉子，然后硬重置它，但它变得更加复杂：

```
master A---B---C
                \
fork             D---E
                      \
to-merge               F---H---I 
```

（我现在就在这个位置）

请帮助一个新手进行分支以使其工作。即便如此，我最终也会得到这样的结果：

```
master A---B---C-------F---H---I
                \     /         \
fork             D---E           D'--E' 
```

我根本不想将 D 和 E 合并到 master 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:14:15.107

如果只有 3 次提交，那么将它们挑选到您的主分支中可能是最简单的。

```
git checkout master
git cherry-pick F
git cherry-pick H
git cherry-pick I 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T04:14:03.623

我想你可能想看看樱桃采摘。

只是一个快速的谷歌提出了这个。看起来很有用（和你需要的一样）。 [http://technosophos.com/content/git-cherry-picking-move-small-code-patches-across-branches](http://technosophos.com/content/git-cherry-picking-move-small-code-patches-across-branches)

先看看师傅。

```
$ git checkout master 
```

然后每个樱桃采摘都是这样的。

```
$ git cherry-pick F
Finished one cherry-pick. 
```

# iphone - 来自 IOS/iPad/iPhone 的最大速度

> ID：11219240
> 
> 赞同：10
> 
> 时间：2012-06-27T04:03:13.610
> 
> 标签：iphone, ios, xcode, opencv

`OpenCV`我使用for完成了计算密集型应用程序`iOS`。当然，它很慢。但它比我的 PC 原型慢 200 倍。所以我正在优化它。从最初的 15 秒开始，我就可以达到 0.4 秒的速度。我想知道我是否找到了所有东西以及其他人可能想要分享的东西。我做了什么：

1.  `double`将OpenCV 中的“”数据类型替换为“ `float`”。Double 是 64 位，而 32 位 CPU 无法轻松处理它们，所以 float 给了我一些速度。OpenCV 经常使用 double。

2.  `-mpfu=neon`在编译器选项中添加了“ ”。副作用是模拟器编译器不再工作的新问题，任何东西都只能在本机硬件上进行测试。

3.  用 90 个值查找表替换`sin()`和实现。`cos()`加速是巨大的！这与 PC 有点相反，PC 的这种优化不会带来任何加速。有代码以度为单位工作，这个值被转换为`sin()`和的弧度`cos()`。这段代码也被删除了。但是查找表完成了这项工作。

4.  启用`"thumb optimizations"`。一些博客文章建议完全相反，但这是因为拇指通常会使事情变慢`armv6`。`armv7`没有任何问题，让事情变得更快更小。

5.  为了确保拇指优化和`-mfpu=neon`最好的工作并且不引入崩溃，我完全删除了 armv6 目标。我所有的代码都被编译成`armv7`，这也被列为应用商店的要求。这意味着最小值`iPhone`将是`3GS`. 我认为放弃旧的是可以的。无论如何，较旧的 CPU 速度较慢，如果安装在旧设备上，CPU 密集型应用程序会提供糟糕的用户体验。

6.  我当然用`-O3 flag`

7.  `"dead code"`我从 OpenCV 中删除。通常在优化 OpenCV 时，我会看到我的项目显然不需要的代码。例如，通常有一个额外`"if()"`的检查像素大小是 8 位还是 32 位，我知道我只需要 8 位。这会删除一些代码，为优化器提供更好的机会来删除更多内容或替换为常量。代码也更适合缓存。

还有其他技巧和想法吗？对我来说，启用拇指并用查找替换三角函数是助推器，让我感到惊讶。也许您知道更多可以让应用程序飞起来的事情？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T04:22:54.657

如果你正在做大量的浮点计算，那么使用 Apple 的[Accelerate](http://developer.apple.com/library/mac/#documentation/Accelerate/Reference/AccelerateFWRef/_index.html)框架会让你受益匪浅。它旨在使用浮点硬件对向量进行并行计算。

我也会一一解决你的观点：

1）这不是因为 CPU，而是因为从 armv7 时代开始，浮点处理器硬件中只会计算 32 位浮点运算（因为苹果更换了硬件）。64 位的将改为在软件中计算。作为交换，32 位操作变得更快。

2）NEON是新的浮点处理器指令集的名称

3) 是的，这是一种众所周知的方法。另一种方法是使用我上面提到的 Apple 框架。它提供了并行计算 4 个值的 sin 和 cos 函数。这些算法在组装和 NEON 中进行了微调，因此它们在使用最少电池的同时提供了最大的性能。

4) thumb 的新 armv7 实现没有 armv6 的缺点。禁用建议仅适用于 v6。

5) 是的，考虑到现在 80% 的用户使用的是 iOS 5.0 或更高版本（armv6 设备在 4.2.1 结束支持），这在大多数情况下是完全可以接受的。

6) 当您在发布模式下构建时，这会自动发生。

7）是的，但这不会像上述方法那样大。

我的建议是查看 Accelerate。这样，您可以确保您充分利用了浮点处理器的全部功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:35:21.960

我对以前的帖子提供了一些反馈。这解释了我在第 7 点中试图提供的关于死代码的一些想法。这意味着更广泛的想法。我需要格式化，所以不能使用评论表。这样的代码在 OpenCV 中：

```
for( kk = 0; kk < (int)(descriptors->elem_size/sizeof(vec[0])); kk++ ) {
    vec[kk] = 0;
} 
```

我想看看它在组装时的样子。为了确保我可以在汇编中找到它，我将它包装成这样：

```
__asm__("#start");
for( kk = 0; kk < (int)(descriptors->elem_size/sizeof(vec[0])); kk++ ) {
    vec[kk] = 0;
}
__asm__("#stop"); 
```

现在我按“产品-> 生成输出-> 程序集文件”，我得到的是：

```
 @ InlineAsm Start
    #start
    @ InlineAsm End
Ltmp1915:
    ldr r0, [sp, #84]
    movs    r1, #0
    ldr r0, [r0, #16]
    ldr r0, [r0, #28]
    cmp r0, #4
    mov r0, r4
    blo LBB14_71
LBB14_70:
Ltmp1916:
    ldr r3, [sp, #84]
    movs    r2, #0
Ltmp1917:
    str r2, [r0], #4
    adds    r1, #1
Ltmp1918:
Ltmp1919:
    ldr r2, [r3, #16]
    ldr r2, [r2, #28]
    lsrs    r2, r2, #2
    cmp r2, r1
    bgt LBB14_70
LBB14_71:
Ltmp1920:
    add.w   r0, r4, #8
    @ InlineAsm Start
    #stop
    @ InlineAsm End 
```

很多代码。我 printf-d 输出的值`(int)(descriptors->elem_size/sizeof(vec[0]))`总是 64。所以我将它硬编码为 64 并通过汇编程序再次传递：

```
 @ InlineAsm Start
    #start
    @ InlineAsm End
Ltmp1915:
    vldr.32 s16, LCPI14_7
    mov r0, r4
    movs    r1, #0
    mov.w   r2, #256
    blx _memset
    @ InlineAsm Start
    #stop
    @ InlineAsm End 
```

正如您现在可能看到的，优化器得到了这个想法，代码变得更短了。它能够对此进行矢量化。关键是编译器总是不知道哪些输入是常量，如果这是像网络摄像头大小或像素深度这样的东西，但实际上在我的上下文中它们通常是常量，我关心的只是速度。

我还按照建议尝试了 Accelerate，将三行替换为：

```
__asm__("#start");
vDSP_vclr(vec,1,64);
__asm__("#stop"); 
```

组装现在看起来：

```
 @ InlineAsm Start
    #start
    @ InlineAsm End
Ltmp1917:
    str r1, [r7, #-140]
Ltmp1459:
Ltmp1918:
    movs    r1, #1
    movs    r2, #64
    blx _vDSP_vclr
Ltmp1460:
Ltmp1919:
    add.w   r0, r4, #8
    @ InlineAsm Start
    #stop
    @ InlineAsm End 
```

不确定这是否比 bzero 快。在我的上下文中，这部分没有太多时间，两个变体似乎以相同的速度工作。

我学到的另一件事是使用 GPU。更多信息在这里[http://www.sunsetlakesoftware.com/2012/02/12/introducing-gpuimage-framework](http://www.sunsetlakesoftware.com/2012/02/12/introducing-gpuimage-framework)

# iphone - UITableView 图像导致崩溃

> ID：11219241
> 
> 赞同：7
> 
> 时间：2012-06-27T04:03:24.613
> 
> 标签：iphone, uitableview, uiimageview, uiimage

我已经完成了一百万个 UITables - 带有字幕、图像、背景、颜色、文本样式 - 你可以命名它。突然，我在这张桌子上崩溃了，特别是在需要细胞图像的那一行。这是代码：

```
// Configure the cell:
cell.textLabel.font = [UIFont fontWithName:@"Franklin Gothic Book" size:18];
cell.textLabel.text = [leadershipMenu objectAtIndex:indexPath.row];
cell.detailTextLabel.text = [leadershipSubtitlesMenu objectAtIndex:indexPath.row];

// And here's the statement that causes the crash:
cell.imageView.image = [leadershipPhotosMenu objectAtIndex:indexPath.row]; 
```

现在，我得到的错误是：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: '-[__NSCFConstantString _isResizable]: unrecognized selector sent to instance 0xcacbc' 
```

我确定导致崩溃的语句是

```
cell.imageView.image = ... 
```

因为一旦我评论它一切正常。

我这辈子从没见过

```
-[__NSCFConstantString _isResizable]: 
```

错误。我已经用谷歌搜索了它，但发现很少。

很奇特。

有人有任何线索吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T04:22:25.883

如您的评论中所述。保存图像的方式是导致问题的原因。

尝试这个..

```
leadershipPhotosMenu = [[NSMutableArray alloc] initWithObjects:[UIImage imageNamed:@"JohnQ.jpg"], [UIImage imageNamed:@"BillZ.png"], nil]; 
```

上面的代码会将图像存储在您的 mutableArray 中，这将起作用，但我建议不要将图像存储在数组中。

您还可以通过执行以下操作来解决您的问题，而无需像上面的代码那样将图像存储在数组中：

```
cell.imageView.image = [UIImage imageNamed:(NSString*)[leadershipPhotosMenu objectAtIndex:indexPath.row]]; 
```

这个错误信息意味着你里面的对象`leadershipPhotosMenu`不是图像，而是字符串

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: '-[__NSCFConstantString _isResizable]: unrecognized selector sent to instance 0xcacbc' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T04:17:45.267

做这个：

```
 cell.imageView.image = [UIImage imageNamed:[leadershipPhotosMenu objectAtIndex:indexPath.row]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T04:22:40.987

您正在存储图像广告的名称而不是图像。然而 imageView 有 UIImage 作为它的属性，而不是图像名称。所以进行以下更改。

```
cell.imageView.image = [UIImage imageNamed:[leadershipPhotosMenu objectAtIndex:indexPath.row]]; 
```

# html - 数字+空格字符串（信用卡号）的移动友好输入

> ID：11219242
> 
> 赞同：10
> 
> 时间：2012-06-27T04:03:39.823
> 
> 标签：html, input, keyboard, credit-card

我有一个信用卡号输入表单，移动和非移动浏览器都将使用它。

我想暗示一个键盘应该出现在移动设备上，并允许（可选）空格，所以应该接受“4111 1234 1234 1234”或“4111123412341234”。

根据我的发现，选项是：

a) `<input type="tel"/>`- 这似乎表现得如我所愿（至少使用当前的移动浏览器），但它在语义上是错误的。

b)`<input type="text" pattern="[\d ]*"/>`或类似的 - [iPhone 将某些模式](https://stackoverflow.com/questions/6178556/iphone-numeric-keyboard-for-text-input)( `[0-9]*`, `\d*`) 识别为与键盘一起使用，但这在 Android 上效果不佳。此外，我不确定 iPhone 是否会提供任何允许空格的小键盘模式，尽管我现在手头没有 iPhone 可以检查。

c) 尝试使用 Javascript 进行浏览器检测，并使用 (a) 用于移动设备和 (b) 用于非移动设备。杂乱无章，对（a）没有真正的好处。

`<input type="number"/>`似乎不是首发，因为[Chrome 至少会将此类输入强制为 number](https://stackoverflow.com/questions/6155744/how-can-i-prevent-chrome-from-formatting-a-html5-format-number?rq=1)，因此会使用空格中断输入。

有没有更好的方法来提示移动浏览器他们应该提供一个小键盘而不是使用 numpad `type="tel"`？

**编辑：**

也许`-webkit-*`可以应用于普通文本输入字段以提示应该显示小键盘的属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-16T02:57:39.750

`<input type="text" inputmode="numeric"/>`然而，据我所知，仍然可以包含空格和其他特殊字符的文本字段的语义正确标记是[WhatWG](http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#attr-fe-inputmode)`inputmode`推荐的，但尚未得到任何浏览器的支持。其目的是在具有数字小键盘但仍充当文本输入的设备上为用户呈现数字小键盘。

我的建议是`inputmode`用 JS 填充并更改为`type="tel"`触摸设备（这是目前可用的最佳解决方案）。请注意，不同的设备具有非常不同的“电话”和“数字”键盘，iOS 的“电话”不允许使用空格，而 Chrome 移动版允许使用各种特殊字符。谁知道自定义 Android 键盘有什么作用？

如果您不想构建自己的 polyfill，您可以实现[Webshim](http://afarkas.github.io/webshim/demos/)，它现在`inputmode`从[1.14.0 版本](https://github.com/aFarkas/webshim/blob/gh-pages/changelog.md#release-1140)开始使用 polyfill 。这也有一个很好的功能，`pattern="[0-9]*"`如果你想要的话，可以通过设置来调用 iOS“数字”键盘（注意：这不是你在设置时得到的那个键盘`type="number"`！）

这是我对[跨浏览器的输入类型行为](http://codepen.io/davidelrizzo/pen/hdmor?editors=100)所做的分析，以及我与@aFarkas（Webshim 的作者）就 polyfill输入模式的[辩论。](https://github.com/aFarkas/webshim/issues/383#issuecomment-44797724)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:28:31.463

据我所知，iPhone 上没有允许数字和空格的键盘布局，至少不会自动从数字切换回字符。键入中间有空格的数字将要求用户在每个空格后重复切换回数字键盘布局。

如果您要为四个数字块提供单独的输入字段，并使用一些 javascript 在输入第四个数字后自动将光标从一个输入字段移动到下一个输入字段，您可以使用`<input type="number"/>`plus，您可以避免 iPhone 用户在键盘布局。

# google-analytics - 跟踪页面上的链接，但不跟踪 Google 分析中的综合浏览量

> ID：11219244
> 
> 赞同：0
> 
> 时间：2012-06-27T04:03:51.880
> 
> 标签：google-analytics

我有几个带有图形横幅的网页，可在附属网站的 iframe 中使用。但是正在发生的事情是，那些 iframe 页面正在膨胀我们在 Google Analytics 中的综合浏览量。我想跟踪横幅的链接，但不将网页计为页面浏览量。

我有一个 noindex 并关注元信息，但我认为这还不够，因为这些页面仍被作为综合浏览量进行跟踪。

有什么我忽略的吗？

任何见解都会很棒！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:07:46.683

Are you embedding your GA tracking code in your iFrame? To begin with, I don't think you want to do this. But if you want to track the number of clicks, and do this within Google Analytics, I presume you would have to make your link a Redirect and then create a custom event in the redirect.

# iphone - 无法设置属性

> ID：11219247
> 
> 赞同：1
> 
> 时间：2012-06-27T04:04:16.430
> 
> 标签：iphone, objective-c

我有一个`SourceViewController`和一个`DesViewController`，有一个变量`DesViewController`： `@property ( nonatomic , assign , readwrite ) NSString* name ;`

但是当我调用 SourceViewController 中的方法时出现问题：

```
-(void)performSegueWithIdentifier:(NSString *)identifier sender:(id)sender {
    UIStoryboard* storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil ] ;
    DestinationViewController* desViewController = [storyboard instantiateInitialViewController ] ;
    desViewController.name = @"haah" ;
    [self presentViewController:desViewController animated:YES completion:nil ] ;
} 
```

输出 ：

```
'NSInvalidArgumentException', reason: '-[SourceViewController setName:]: unrecognized selector sent to instance 0x6a0d7c0' 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:33:54.923

下面的代码行：

```
[storyboard instantiateInitialViewController ] ; 
```

它返回 SourceViewController。这是因为，它被设置为您的初始 viewController。但是，您将其视为 `DestinationViewController`. 因此问题。

要么更改您的初始控制器，要么为`SourceViewController`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T04:28:05.180

您`SourceViewController`在尝试加入时正在初始化属性`DestinationViewController`。

您需要为`DestinationViewController`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T06:35:15.213

就像现在一样，您实例化的视图控制器似乎不属于 DestinationViewcontroller 类（因为您的初始视图控制器似乎不属于该类）。所以它没有那个属性。您必须实例化正确的类（见下文）。还要检查您是否在 DestinationViewcontroller 的实现中合成了该属性。

附带说明：尽管您可能只想将字符串变量分配给一个新值，但大多数时候您希望使用复制而不是在 NStrings 上分配。此外，由于它是默认行为，因此不需要读写。因此，最好这样更改您的属性声明：

```
@property (nonatomic, copy) NSString *name; 
```

并在实现中检查你是否像这样合成：

```
@synthesize name = _name; 
```

在你的交易中：

```
[_name release]; 
```

此外，如果您统计一个新项目，请考虑使用 ARC。

现在，如果您将 viewController 设置为 DestinationViewcontroller，它应该可以工作。最好的方法是

```
DestinationViewcontroller *dc = [storyboard instantiateViewControllerWithIdentifier:@"identifier of your desviewcontroller"]; 
```

# javascript - 谷歌地图自定义方向到 Android 导航

> ID：11219251
> 
> 赞同：0
> 
> 时间：2012-06-27T04:04:35.837
> 
> 标签：javascript, android, iphone, google-maps, cordova

我正在使用从[http://gmaps-samples-v3.googlecode.com/svn/trunk/draggable-directions/draggable-directions.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/draggable-directions/draggable-directions.html)上的 google 可拖动地图建模的脚本在 android 设备上创建自定义行车路线。

到目前为止，就像示例一样，我可以在地图上拖动行车线并重新路由导致行程计算的方向，并逐个改变方向。

我在锚链接上看到了文档，该链接将在设备上打开地图选项，要求从与地图交互的已安装应用程序列表中选择地图应用程序。

我想将新的转弯行车路线发送到导航并遵循新路线。

任何想法脚本或如何解析链接以打开地图和/或导航都会感兴趣和有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:24:42.447

首先，这是您打开您提到的地图应用程序对话框的方式。这是当你有一个地址的时候。

```
Uri geoUri = Uri.parse("address here");
Intent mapCall = new Intent(Intent.ACTION_VIEW, geoUri);
startActivity(mapCall); 
```

# php - 在 Windows 7 上安装 PECL

> ID：11219252
> 
> 赞同：3
> 
> 时间：2012-06-27T04:04:37.313
> 
> 标签：php, javascript, pecl, spidermonkey

这个宇宙中的某个人可以给我一步一步在php服务器上安装PECL for windows，这样我就可以使用SpiderMonkey js引擎在php代码中运行js了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T04:09:32.553

不幸的是，pecl4win 网站由于资源有限而缺乏。Pierre，我们的 Windows 构建大师，根据请求随机创建扩展，并通过[http://downloads.php.net/pierre/](http://downloads.php.net/pierre/)提供它们，直到新的 PECL 基础设施准备好。

如果你需要一个没有可用的扩展，你可以在 list.php.net 邮件列表的 pecl-dev 上询问。

[http://wiki.php.net/internals/windows/stepbystepbuild](http://wiki.php.net/internals/windows/stepbystepbuild)也有一些说明。Windows 上的构建系统目前不允许单独构建扩展，但您必须从 PHP 源代码树构建。要添加 oauth，您要么必须在运行之前将源代码放在 php-src/ext/oauth 下，`buildconf.bat`要么使用`--extra-ext-dir`（或类似的）选项`buildconf.bat`。

# iphone - Reminer 应用程序的底部视图

> ID：11219254
> 
> 赞同：2
> 
> 时间：2012-06-27T04:04:39.660
> 
> 标签：iphone, user-interface, uikit

在 iPhone 的默认提醒应用程序底部，有可以直接进入所选月份的栏......

什么 UiKit 类可以做到这一点，或者是否有任何私有框架？

谢谢您的回答....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T04:36:13.473

它是 UIKit 中可用的标准控件。它的名字是页面控制。

这是一个示例代码：[页面控制演示](http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html)

这是页面控件的类参考：[UIPageControl 类参考](http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html)

# node.js - uv_queue_work 的 node.js C 插件队列

> ID：11219264
> 
> 赞同：2
> 
> 时间：2012-06-27T04:06:17.693
> 
> 标签：node.js

我在 libUV 的帮助下创建了一个 C node.js 插件以使插件异步。

我为此做了几个队列。

代码是这样的，`loopArray`用于存储那些队列：

```
//... variables declarations

void AsyncWork(uv_work_t* req) {
    // ...
}

void AsyncAfter(uv_work_t* req) {
    // ...
}

Handle<Value> RunCallback(const Arguments& args) {
    // ... some preparation work

    int loopNumber = (rand() % 10);
    int status = uv_queue_work(loopArray[loopNumber], &baton->request, AsyncWork, AsyncAfter);
    uv_run(loopArray[loopNumber]);
    return Undefined();

}

extern "C" {
    static void Init(Handle<Object> target) {
        int i = 0;
        for (i = 0; i< 10; i++){
            loopArray[i] = uv_loop_new();
        }           

        target->Set(String::NewSymbol("callback"), FunctionTemplate::New(RunCallback)->GetFunction());
    }
}

NODE_MODULE(addon, Init) 
```

问题是，即使我为 CPU 要求高的任务创建了 10 个队列。node.js 在处理其中一个队列时不会在任务之间切换。是不是因为 node.js 的单线程特性？

是这样， uv_thread_create 是否有助于这种情况？

我找不到任何代码示例，所以我不知道如何使用它。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T16:28:03.830

这是节点架构背后的主要思想：使用函数调用（返回）和主事件循环来运行它们，而不是使用线程来并行处理多个作业。

如果您要做的是处理一系列作业，那么最好的方法是一次做一项作业。在系统上使用多个 cpu 内核是由多个节点实例而不是线程完成的。为此，我们有 child_process 和 cluster 节点模块。

当您创建多个线程时，假设您想为您的工作运行 10 个线程，如果您的系统有 8 个 cpu 内核，那么您通过给操作系统的调度程序提供不必要的工作来降低性能。这是您应该考虑的非常重要的一点。如果您有 8 个内核，那么如果您想要获得最大性能，则不应创建超过 8 个并行线程。

对于节点，我们不会尝试在一个进程中创建多个队列或线程。相反，我们采用多个节点进程，同样每个核心最多一个进程。

如果您要处理已经存在的队列。在这种工作中，您不需要 C 模块是异步的。

当我们有来自外部的作业（例如 Web 服务器上的 http 请求）时，我们需要异步行为。在 Web 服务器上，我们的工作以一种我们无法控制的方式出现。人们和其他机器可以随时连接到我们的服务器，我们希望尽快回复每个人。为此，我们不希望任何请求阻止其他人。我们需要并行处理尽可能多的请求。

但是，如果您在数据库表的行上运行或对一长串参数进行一些计算，那么您的业务就完全不同了。您的工作队列在您面前等待您的管理方式。您的工作不会以您无法控制的方式进入您的系统。在这种业务中，要达到极致的效率和最高的利润，你应该一个接一个地运行工作，不要在它们之间进行任何切换。并行性仅在您拥有多个内核并使用它们时才有用，节点的最佳实践是使用多个节点进程。

# git - 如何修复命令控制台中的“警告：终端功能不全”错误？

> ID：11219266
> 
> 赞同：55
> 
> 时间：2012-06-27T04:06:37.577
> 
> 标签：git, command-line

我正在使用 hg，现在我正在转换为 Git。

但安装后，每次执行“git diff”或“git log”时，都会收到此错误：警告：终端功能不完整。

我该如何摆脱这个？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-06-27T04:11:59.023

问：你是如何连接到 Git 的？

例如，如果您在 Windows 上使用 Cygwin，请尝试以下操作：

```
TERM=msys 
```

如果您使用的是 Linux（或通过 putty 连接到 Linux 服务器），请尝试以下操作：

```
export TERM=msys 
```

如果您从 Windows 命令提示符运行：

```
<Rclick>Computer, Properties, 
  [Advanced System Settings], [Advanced], [Environment Variables]
  Create a new System variable "TERM", value "msys" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:17:08.380

如果有人使用 Git Extensions 得到这个，请检查`Path to linux tools...`. 我的设置为`C:\cygwin`. 更改它`C:\Program Files (x86)\Git\bin\`为我修复它。

# javascript - 带有页面导航问题的 HTML5 滑块

> ID：11219267
> 
> 赞同：0
> 
> 时间：2012-06-27T04:06:45.547
> 
> 标签：javascript, asp.net-mvc-3, html

我的项目中有这个有趣的障碍。

我目前正在做一个在平板电脑和智能手机上运行的 MVC3 项目。它包括一个带有页面导航的 HTML5 滑块。这个概念与 iPad 上的“The Daily”应用程序非常相似。

[http://youtu.be/KHILJBw-104](http://youtu.be/KHILJBw-104)

这个概念来自视频 0:15 开始。

我想使用 HTML5 滑块来导航页面。当我滑动滑动条时，我使用onchange来检测html5滑块的值变化

```
@using (Ajax.BeginForm("ViewFilter", new AjaxOptions { UpdateTargetId = "showpage" })){   
    <input name="sliderStatus"  id="sliderStatus" type="range" min="0" max="100" value="0" step="1"  onchange="$(this.form).submit();" />
</div>} 
```

但是，每当我更改滑块的值时，都会呈现“ViewFilter”动作。

是否有任何可能的方法来处理它，以便仅当我们滑动滑动条并释放时才会更改值？

**重要提示：Jquery 滑块不适用于平板电脑和智能手机，因此无法在平板电脑浏览器上拖动，例如 Windows 8 上的 IE10 和 iPad 上的 Safari。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:42:11.507

如果您想要的是在用户滑动然后释放鼠标后触发事件，您可以考虑使用鼠标向上事件，这可能是这样的，或者您可以为您的事件设置超时，或者您可以使用带有时间间隔的 onchnge例如滚动所需的时间，因此系统将等待并触发事件，因为更改后不会立即触发它

[https://developer.mozilla.org/En/Window.setInterval](https://developer.mozilla.org/En/Window.setInterval) // 更多关于设置间隔

```
$('#sliderStatus').mouseup(function() {
  $(this.form).submit();
}); 
```

# android - 杰克沃顿浏览器

> ID：11219268
> 
> 赞同：-1
> 
> 时间：2012-06-27T04:06:48.417
> 
> 标签：android, android-viewpager, viewpagerindicator

我这里有问题。我下载了杰克沃顿。他举了一个很好的例子。但我想要的是从这个![在此处输入图像描述](../Images/7a306576c7f128d8d7376e6e0256609f.png) 我想将最近最近的文本更改为一个活动..所以我所做的就是这个![在此处输入图像描述](../Images/858d42b70b23ebbdbe3de0f046721c18.png)，我在那里放了一个带有.getname的类..我认为这将是一个活动，但它将它转换为文本？这是杰克的代码..

测试片段.java

```
package com.simple.viewpage;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.LinearLayout;
import android.widget.LinearLayout.LayoutParams;
import android.widget.TextView;

public final class TestFragment extends Fragment {
    private static final String KEY_CONTENT = "TestFragment:Content";

    public static TestFragment newInstance(String content) {
        TestFragment fragment = new TestFragment();

        StringBuilder builder = new StringBuilder();
        for (int i = 0; i < 20; i++) {
            builder.append(content).append(" ");
        }
        builder.deleteCharAt(builder.length() - 1);
        fragment.mContent = builder.toString();

        return fragment;
    }

    private String mContent = "???";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if ((savedInstanceState != null) && savedInstanceState.containsKey(KEY_CONTENT)) {
            mContent = savedInstanceState.getString(KEY_CONTENT);
        }
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        TextView text = new TextView(getActivity());
        text.setGravity(Gravity.CENTER);
        text.setText(mContent);
        text.setTextSize(20 * getResources().getDisplayMetrics().density);
        text.setPadding(20, 20, 20, 20);

        LinearLayout layout = new LinearLayout(getActivity());
        layout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        layout.setGravity(Gravity.CENTER);
        layout.addView(text);

        return layout;
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putString(KEY_CONTENT, mContent);
    }
} 
```

测试 FragmentAdapter.java

```
package com.simple.viewpage;

import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;

class TestFragmentAdapter extends FragmentPagerAdapter {
    protected static final String[] CONTENT = new String[] { "This", "Is", "A", "Test", };

    private int mCount = CONTENT.length;

    public TestFragmentAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        return TestFragment.newInstance(CONTENT[position % CONTENT.length]);
    }

    @Override
    public int getCount() {
        return mCount;
    }

    public void setCount(int count) {
        if (count > 0 && count <= 10) {
            mCount = count;
            notifyDataSetChanged();
        }
    }
} 
```

这是他的主要活动：

```
package com.viewpagerindicator.sample;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.view.ViewPager;
import com.viewpagerindicator.TabPageIndicator;

public class SampleTabsDefault extends BaseSampleActivity {
    private static final String[] CONTENT = new String[] { "Recent", "Artists", "Albums", "Songs", "Playlists", "Genres" };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.simple_tabs);

        mAdapter = new GoogleMusicAdapter(getSupportFragmentManager());

        mPager = (ViewPager)findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        mIndicator = (TabPageIndicator)findViewById(R.id.indicator);
        mIndicator.setViewPager(mPager);
    }

    class GoogleMusicAdapter extends TestFragmentAdapter {
        public GoogleMusicAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            return TestFragment.newInstance(SampleTabsDefault.CONTENT[position % SampleTabsDefault.CONTENT.length]);
        }

        @Override
        public int getCount() {
            return SampleTabsDefault.CONTENT.length;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            return SampleTabsDefault.CONTENT[position % SampleTabsDefault.CONTENT.length].toUpperCase();
        }
    }
} 
```

我将内容字符串更改为：

```
private static final String[] CONTENT = new String[] { "Recent", "Artists", "Albums", "Songs", "Playlists", "Genres",ListTest.class.getName() }; 
```

请帮忙..我想查看一个活动而不是将其转换为文本..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T04:30:54.923

> 请帮忙..我想查看一个活动而不是将其转换为文本..

你不查看 a `Activity`，你查看 a `Fragment`。而且您没有转换它，只是检索它的类名并将其用作 pager **indicator**中的标签。

> 我将内容字符串更改为：

这些只是标签。内容不同。内容在以下位置检索：

```
@Override
public Fragment getItem(int position) {
    return TestFragment.newInstance(SampleTabsDefault.CONTENT[position % SampleTabsDefault.CONTENT.length]);
} 
```

Jake 把这段代码只是一个例子。

取决于你想要出现的位置并`switch(position)`返回一个新的。`Fragment`我不使用那种方法（我的方法略有不同），但你想如何实现完全取决于你。

如果您有其他问题，请提出。:-)

编辑：一个可能的例子：

```
static class MyFragmentPagerAdapter extends FragmentPagerAdapter {

    public MyFragmentPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public int getCount() {
        return 2;
    }

    @Override
    public Fragment getItem(int position) {
        Fragment f;
        switch(position) {
        case 0:
            f= new PlaceDataFragment();
            break;
        case 1:
            f= new PlaceSelectorFragment();
            break;
        default:
            throw new IllegalArgumentException("not this many fragments: " + position);
        }
        //DebugUtils.debugUI("getView(): " + f.toString());
        return f;
    }
} 
```

# ruby-on-rails - Rails 对未绑定到任何模型的字段进行验证

> ID：11219279
> 
> 赞同：0
> 
> 时间：2012-06-27T04:08:36.063
> 
> 标签：ruby-on-rails

我有一个具有以下形式的 Rails 应用程序：

```
<%= form_tag(:action => 'index') do %>
  From: <%= text_field_tag(:from, params[:from]) %><br />
  To: <%= text_field_tag(:to, params[:to]) %><br />
  <%= submit_tag("Submit") %>
<% end %> 
```

它根据 :from 和 :to 参数提供的日期范围显示列表。

如何在未绑定到任何模型或表格的两个文本框上进行存在和比较验证？

谢谢！科里克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:38:17.077

您可以使用未持久化到数据库的模型。

```
class DateRange
  include ActiveModel::Validations

  attr_accessor :from, :to
  validates_presence_of :from, :to

  def persisted?
    false
  end
end 
```

然后在控制器中：

```
date_range = DateRange.new(:from => params[:from], :to => params[:to])
if date_range.valid?
  #do stuff
end 
```

# algorithm - 合并两个有向树？

> ID：11219281
> 
> 赞同：0
> 
> 时间：2012-06-27T04:09:11.003
> 
> 标签：algorithm, computer-science

> 由于树高是计算效率的主要障碍，一个好的策略是让较短树的根指向较长树的根。

这*真的*重要吗？我的意思是，如果你反过来（将较长的树合并到较短的树），树的高度只会增加 1。因为增加 1 不会产生真正的区别（会吗？），真的很重要哪棵树合并到哪棵树中？或者是否有其他原因可以将较短的树合并到较长的树中？

注意我说的是不相交的集合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T04:16:15.217

目前还不清楚您在谈论哪种树（二叉搜索树、不相交集或任何 n 叉树）。但无论如何，我认为原因是尽管增加 1 并不重要，但如果你进行 n 次合并，最终会增加 n。如果您有一个需要大量合并的数据结构（例如不相交集），这可能很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T04:17:50.897

引用缺乏上下文。例如，在某些树结构中，可能必须一个一个地插入单个元素（例如，可能重新平衡树 - 通常您需要高度为 O(log n) 的树）；也许这意味着：然后将更少的元素插入到更大的树中会更容易。

显然，如果高度增加 1 很重要，则取决于高度增加 1 的频率:-)

编辑：对于[不相交的集合](http://en.wikipedia.org/wiki/Disjoint-set_data_structure#Disjoint-set_forests)，将较小（较低）的树添加到较大的树中*很重要。*

# php - 如何使用 php 循环将 mysql 数据放入谷歌图表？

> ID：11219282
> 
> 赞同：1
> 
> 时间：2012-06-27T04:09:17.263
> 
> 标签：php, mysql, google-visualization

我创建了一个谷歌图表，并添加了从数据库本身获取的数据。但是，当通过 php 循环获取数据时，我遇到了一些困难，因为我无法将这些数据修改到图表中，因为它的语法。

这就是我所到之处。我需要获取 mysql 值来代替：

1170、460、45、123、456]、660、1120、145、785、658]

```
 var data = google.visualization.arrayToDataTable([
      ['Term', <?php

      while ($getchartrows =  mysql_fetch_array($getchart))
      {
          echo  " ' " . $getchartrows['std_ID'] . " ' " . ",";
      }

      ?>],

      <?php

      $one = mysql_query("SELECT * FROM stusitting WHERE std_ID = '0001' AND subjectNo = '$subin' AND grade = '$gradein' AND termNo = '$tcheck' ");
      $getone = mysql_fetch_array($one);

      ?>

          ['01',  <?php echo $getone ['marks']; ?>,      400, 495, 565, 415],
      ['02',  1170,      460, 45, 123, 456],
      ['03',  660,       1120, 145, 785, 658]
    ]);

    var options = {
      title: 'Class Progress'
    }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T05:56:24.790

尝试一个接一个地解决问题。首先，从数据库中获取您需要的数据。然后，在 PHP 中创建您需要的数据结构，并使用`json_encode()`. 最后，将其传递给 JavaScript 中的可视化函数：

```
<?php
// query data
$result = mysql_query(...);

// format data structure
$data = array();
$i = 0;
while($row = mysql_fetch_array($result)) {
    $i += 1;
    array_push($data, array($i) + $row);
}

// convert to JavaScript
?>
var raw_data = <?php echo json_encode($data) ?>;

// visualize
var data = google.visualization.arrayToDataTable(raw_data); 
```

# php - 发送 ECHO 然后发送 HEADER()

> ID：11219283
> 
> 赞同：-1
> 
> 时间：2012-06-27T04:09:17.963
> 
> 标签：php

我有一个通过 php 文件向我的数据库发送信息的 flash 表单。问题是 Flash 表单需要回显响应，但我还必须发送 header(Location:with_url_vars) ...我刚刚发现他的不起作用 => 无法在 header() 之前发送回显

我想我也不能使用 javascript 或元刷新，因为只有我的 swf 文件执行我的 php 文件......所以用户的浏览器永远不会访问我的 php 文件。

而且我也无法在 header(Loaction:...) 之后发送回声，因为一旦我离开，我就无法回到我的回声。

有什么想法可以解决这个问题吗？谢谢马维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T04:55:16.907

粗鲁，但在脚本开始时打开 PHP 的输出缓冲

```
ob_start(); 
```

在脚本末尾添加此内容的奖励积分

```
ob_end_flush(); 
```

# web-services - 使用 jquery 调用 Web 服务

> ID：11219285
> 
> 赞同：0
> 
> 时间：2012-06-27T04:09:22.240
> 
> 标签：web-services, jquery, asp.net-mvc-4

我正在尝试使用 jquery 调用本地 webservice/webApi，但我已经被困了好几天了。有人可以帮我吗？

所以我的网络服务位于 localhost 端口 4011 即 localhost:4011/api/poi/

我的 javascript 位于本地主机端口 localhost:4213/ 上，我是这样称呼它的：

```
 $.get('http://localhost:4011/api/values', function (data) {
        alert(data);
    }); 
```

当我直接将url输入浏览器时，它返回了结果。但是当我使用 jquery 调用它时。我没有回应（从开发人员工具中查看）。

我不确定我做错了什么。请帮忙。

如果有帮助，我正在使用 webApi mvc .net4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:19:19.410

这是由于[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。由于 API 与您提供网页的端口不同，因此浏览器将不允许您发出请求。

您可以使用 jsonp 来解决这个问题，或者在您的 Web 服务上使用跨源策略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T04:23:13.377

如果您使用的是 CrossDomain，请使用此选项，因为 CrossDomain 在 jQuery 中不起作用！

```
$.ajax({
    url: 'ajax/test.html',
    crossDomain: true,
    success: function(data) {
        alert(data);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T04:16:55.840

您可能会受到跨源策略[**CORS**](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)的限制。配置您的 Web 服务以接受来自跨域的请求。您可以添加`Access-Control-Allow-Origin`标题，例如

```
responseMessage.Headers.Add("Access-Control-Allow-Origin","*"); 
```

# php - OpenCart DB 查询问题（语法误解）

> ID：11219292
> 
> 赞同：0
> 
> 时间：2012-06-27T04:11:02.787
> 
> 标签：php, mysql, opencart

OpenCart v1.5.3.1，导出插件：

```
 $query  = "SELECT pd.*, cg.name FROM `".DB_PREFIX."product_discount` pd ";
    $query .= "LEFT JOIN `".DB_PREFIX."customer_group` cg ON cg.customer_group_id=pd.customer_group_id ";
    $query .= "ORDER BY pd.product_id, cg.name"; 
```

谁能解释一下，这里是什么`pd`意思`cg`？

在其他地方遇到类似的sintax，但不确定它的含义以及如何使用它......

看起来这是一些常见的事情，但我对使用数据库还是很陌生，请帮助:-(

此查询生成错误：

> 注意：错误：“字段列表”中的未知列“cg.name”错误编号：1054

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:12:22.397

```
pd is the alias name for table `product_discount`
cg is the alias name for table `customer_group` 
```

* * *

```
Notice: Error: Unknown column 'cg.name' in 'field list' Error No: 1054 
```

这实际上意味着表中没有名称字段`customer_group`

# f# - F#：为什么我不能在作用域关闭的行上设置断点？

> ID：11219294
> 
> 赞同：5
> 
> 时间：2012-06-27T04:11:47.007
> 
> 标签：f#, scope, breakpoints

```
myList |> List.filter (fun item ->
    if item.MyValue < 10 then
        sideEffect ()
        true
    else
        false ) 
```

如果我在 处设置断点`false )`，它将被忽略/跳过。

我必须：

```
 false
) 
```

我不太想知道为什么会发生这种情况（很容易做出有根据的猜测），而是想知道这是否会得到解决。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T05:19:15.887

它在 VS2012 中没有修复，所以谁知道（未来太远无法预测更多）。我们的调试器支持在 VS2010 中“足够好”，因此我们选择在这个周期中不投入太多；客户很少提到调试器*（也许是因为人们发现他们很少需要调试 F# 代码？），所以我们没有优先考虑它。

(* - 有一个例外；人们真的希望在调试管道或大型表达式时看到中间值/返回值 - 这个请求对于 C# 和 F# 用户来说都很常见（尽管对 F# 可能更重要）。事实上，我只是看起来，这是迄今为止对 VS 调试器的最高投票用户请求：

[http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2206747-function-return-value-in-debugger](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2206747-function-return-value-in-debugger)

所以去那里添加你的声音。）

通常情况下，所有这些小的调试器问题都可以通过将代码分散到更多行或引入更多中间变量来解决；仅仅为了使其更易于调试而更改代码是很烦人的，但是对于真正需要它的任何人来说，值得一提的是解决方法。

# php - concat() 如何查询搜索字符串？

> ID：11219297
> 
> 赞同：0
> 
> 时间：2012-06-27T04:12:09.737
> 
> 标签：php, mysql

我有一个包含以下行的表设置：

```
orderfrom                               | Name
-------------------------------------------------------
ClearVision, Oakley, I-Deal Optics      | ClearVision
ClearVision                             | I-Deal Optics
ClearVision                             | Oakley 
```

我想要一个查询，它将选择在“orderfrom”列中找不到*“*名称”值的行。在这种情况下，它将返回第 2 行和第 3 行，但不返回第一行（因为“ClearVision”在 orderfrom 列中）。

这是我尝试过的：

```
SELECT * FROM `dist`
    JOIN `patientacct`
        ON `patientacct`.dist LIKE CONCAT('%', `dist`.name ,'%')
    INNER JOIN `treasure`
        ON `treasure`.`id` = `patientacct`.`id`
        WHERE (status = 'To Order' AND ****** ORDER BY `name` ASC); 
```

******部分是我需要帮助的地方。我试过这个：

```
(( `dist`.name NOT LIKE CONCAT('%',`patientacct`.orderfrom,'%')) )) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:03:29.837

我不确定，但是这么简单的代码不是可以正常工作吗？

```
mysql> select * from stringComp;
+------------------------------------+---------------+
| value1                             | value2        |
+------------------------------------+---------------+
| ClearVision, Oakley, I-Deal Optics | ClearVision
  |
| ClearVision                        | I-Deal Optics |
| ClearVision                        | Oakley        |
| ClearVision, Oakley, I-Deal Optics | ClearVision   |
+------------------------------------+---------------+
4 rows in set (0.00 sec) 
```

请注意，第 1 行的值 2 周围有额外的空格。

```
mysql> select * from stringComp where value1 not like concat('%',value2,'%');
+------------------------------------+---------------+
| value1                             | value2        |
+------------------------------------+---------------+
| ClearVision, Oakley, I-Deal Optics | ClearVision
  |
| ClearVision                        | I-Deal Optics |
| ClearVision                        | Oakley        |
+------------------------------------+---------------+
3 rows in set (0.00 sec) 
```

这个简单的 SQL 比较列 value2 的内容以查看它们是否在列 value1 中，并返回它们不在的行。

所以，为了回答你的问题，我认为 where 子句中的这个小片段可以让你得到正确的结果：*value1 not like concat('%',value2,'%')*

编辑：我刚刚在您的查询中看到了额外的一行：我认为有一个额外的括号

```
(( `dist`.name NOT LIKE CONCAT('%',`patientacct`.orderfrom,'%')) )) 
```

应该：

```
(( `dist`.name NOT LIKE CONCAT('%',`patientacct`.orderfrom,'%'))) 
```

编辑2：为什么你有所有这些括号呢？

```
SELECT 
    * 
FROM 
    `dist`
    JOIN `patientacct`
        ON `patientacct`.dist LIKE CONCAT('%', `dist`.name ,'%')
    INNER JOIN `treasure`
        ON `treasure`.`id` = `patientacct`.`id`
WHERE 
    status = 'To Order' 
    AND `dist`.name NOT LIKE CONCAT('%',`patientacct`.orderfrom,'%')
ORDER BY
    `name` ASC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:47:38.197

`treasure` 内部加入`treasure`。`id`= `patientacct`。`id` WHERE status = 'To Order' AND `dist`.name NOT LIKE CONCAT('%', `patientacct`.orderfrom,'%')

# java - JPA IdClass 混淆——这个想法实用吗？

> ID：11219298
> 
> 赞同：0
> 
> 时间：2012-06-27T04:12:22.397
> 
> 标签：java, mysql, hibernate, jpa

如果您有一个用户实体，您可以通过两种方式存储他/她的地址。您可以直接将所有字段存储在用户对象中 - 或者 - 您可以创建一个地址对象，该对象保存在单独的表中并加入用户（或级联，或其他）并放入用户实体内的地址对象.

做后者有什么好处？如果你可以在一张桌子上放更多东西，那不是最有意义的吗？我认为后者最终会导致更多的资源使用。我知道它对于其他事情可能更实用，但这个例子特别提到了你可以做的情况。

如果您做了类似于我上面描述的事情，那么您通常会为用户使用 IdClass 吗？

对于 IdClass，每个字段都必须只是另一个实体的键，还是您可以在其中添加具体或临时字段？@IdClass 的用法只是说期望多个 Id 注释，其余的取决于您吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:26:34.453

您的用户与地址的关系应该是多对一的。因为一个用户可能有两个地址。如果要将地址对象放入用户对象中，则用户只能拥有一个地址。在用户对象中有地址字段也有这个问题。因此，您的两个建议都不是最佳实践。

无需为 User 实体使用 IdClass，您可以简单地通过注释使用数据库本机 id 生成。`@Id @GeneratedValue(strategy=GenerationType.IDENTITY)。

# ruby - 续集（加载错误）

> ID：11219300
> 
> 赞同：1
> 
> 时间：2012-06-27T04:12:37.530
> 
> 标签：ruby, rubygems, gem, sequel

我正在尝试运行`requires 'sequel'`第 11 行包含该行的文件。运行该文件时，出现此错误：

`/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in 'gem_original_require': no such file to load -- sequel (LoadError)`

`from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in 'require'`

`from lib/pass_server_ctl:11`

我已经安装了 sequel ruby​​ gem，所以我不确定为什么会出现这个错误。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:29:18.267

我猜我的环境设置中存在配置错误。我还必须重新安装续集和 json。之后问题就解决了！

# php - 您可以制作一个不设置 $_POST 值的选择选项列表吗？

> ID：11219302
> 
> 赞同：0
> 
> 时间：2012-06-27T04:12:51.007
> 
> 标签：php, validation, isset

所以我有一个包含值的选择选项列表。但与大多数选择选项一样，第一个选项列出了用户的虚拟文本。问题是，当 $_POST 变量被传递到 isset 值时为真，但有没有办法让它为假？这里只是一个例子。即使尝试使用虚拟文本，底部也始终回显真实。令人沮丧还是我做错了？顺便说一句，这只是示例代码

```
<?php
if(isset($_POST['curreny_pairs'])):
    echo "true";
endif;
?>
<html>
    <form action="blah" method="post">
        <select name="currency_pairs" id="currency_pairs">
             <option selected="selected">Currency Pair</option>
             <option value="AUDCAD" >AUD/CAD</option>
             <option value="AUDCHF" >AUD/CHF</option>
        </select>    
        <input type="submit" value="submit">
    </form>
 </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T04:29:32.020

两种方式

1)为第一个选项设置**value="0"**

```
 <option selected="selected" value="0">Currency Pair</option> 
```

并检查[`empty()`](http://php.net/manual/en/function.empty.php)而不是**isset()**因为

> `empty()`为“0”返回**假**

2）`disabled`第一个选项使用属性

```
<option selected="selected" disabled="disabled" >Currency Pair</option> 
```

然后你可以检查`isset()`

```
<?php
if(!empty($_POST['curreny_pairs'])):
 echo "true";
endif;
?>

<html>
<form action="blah" method="post">
<select name="currency_pairs" id="currency_pairs">
<option selected="selected" value="0">Currency Pair</option>
<option value="AUDCAD" >AUD/CAD</option>
<option value="AUDCHF" >AUD/CHF</option>
</select>

<input type="submit" value="submit">
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T04:21:17.837

您可以在表单第一个选项中设置特定值，然后确保未选中

```
<?php
    if(isset($_POST['curreny_pairs']) && $_POST['curreny_pairs']!="false")
     echo "true";
    endif;
    ?>
    <html>
    <form action="blah" method="post">
    <select name="currency_pairs" id="currency_pairs">
    <option value="false" selected="selected">Currency Pair</option>
    <option value="AUDCAD" >AUD/CAD</option>
    <option value="AUDCHF" >AUD/CHF</option>
    </select>

    <input type="submit" value="submit">
    </form>
    </html> 
```

# haskell - 如何命名物理学中大写的Haskell变量

> ID：11219304
> 
> 赞同：9
> 
> 时间：2012-06-27T04:13:37.480
> 
> 标签：haskell, naming-conventions

haskell 中的变量名需要小写，但是

如果我们要存储**g** = 9.8 和**G** = 6.67300 × 10-11（在以下场景中），如何在 .hs 文件中声明变量？

传统物理学家提到：

(1) 地球重力加速度

**g** = 9.8 米/秒^2

(2) 万有引力常数

**G** = 6.67300 × 10-11 m3 kg-1 s-2

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T04:25:36.200

你只需要想出另一个名字。以大写字母和小写字母开头的名称之间的区别是语法的一部分。

虽然这在您的情况下可能很不幸，但这是一种设计权衡。为了简化区分不同事物（例如变量和构造函数），以小写字母开头的标识符和以大写字母开头的标识符是根本不同的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-27T04:34:53.710

你可以给他们起有意义的名字。仅仅因为数学家和物理学家在历史上喜欢使用难以理解的符号，除了死记硬背之外无法解释它们，并不意味着你必须这样做。我们现在是在打字，而不是手写，所以用`earthGravity`and定义方程并不比用and`gravitationalConstant`更难写，而且它更容易阅读！`g``G`

或者，您可以指定所有带有前缀的标识符`c`代表标准众所周知的常量，并使用`cg`and `cG`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T14:51:42.360

我会简单地使用`g`and `_G`。我认为下划线不会太分散注意力。

# java - 欺骗 Java Web Start 关于操作系统

> ID：11219311
> 
> 赞同：1
> 
> 时间：2012-06-27T04:14:44.513
> 
> 标签：java, macos

我正在修复一辆古董车，为此我使用梅赛德斯奔驰的 EPC（电子零件目录）。（会员是免费的，所以那些想看我正在谈论的程序的人可以去[这里](https://epc.startekinfo.com/epc/login.jsp)查看它。）要进入该程序，有一个登录页面，然后是另一个带有链接的页面。单击该链接会下载一个名为 ewa-net.jnlp 的文件，并使用 JavaWS 启动它。

我曾经在我的 Linux 系统上使用过这个程序，它确实有效。我记得我在 /etc 目录中更改了 osname 变量，或者在运行程序之前更改了 Firefox 中的操作系统，并在完成后将其更改回来，因此它不会影响任何其他 Java 程序。EPC 计划在这些条件下运行良好。我强烈怀疑需要 Windows 的原因更多是一种防御性举措（例如，避免责任或避免修复多个操作系统上的错误）。

我知道进行这样的更改可能会弄乱程序，但这仅用于查看零件目录并检查零件图，这有助于确定零件位置或放置或帮助零件人员，因为我可以帮助他们如果我在打电话给他们之前已经完成了我的研究，那么可以快速找到某个部分所在的页面。我不会在磁盘驱动器或其他地方保存数据或修改任何内容（尽管我有时会截取屏幕截图并将其打印出来）。

我无法下载 ewa-net.jnlp 并随时运行它。我必须通过 HTML 登录页面，然后从他们的站点运行程序，所以我不能只从命令行或类似的东西运行程序。（除非在我登录后立即用 JavaWS 代替运行它。）

现在我正在使用 iMac，使用 Snow Leopard。我尝试在此处查找和更改 osname，但没有成功。

现在每当我需要使用 EPC 时，我都必须在 Parallels 中启动一个 Windows VM，而我使用该 Windows VM 的唯一原因就是为了这个程序。

有什么方法可以欺骗 Java，所以当我运行这个程序时，它认为它在 Windows 上？我知道这可能会崩溃，但由于目录在 Linux 上运行良好，我想至少在 OS X 上尝试一下。

我想也许我可以使用运行 JavaWS 的包装脚本，但我不太确定该怎么做，正如我之前所说，更改 osname 设置似乎不起作用。

有什么东西可以帮助我欺骗这个程序，让它认为它在 Windows 上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:49:15.373

这取决于究竟是什么应用了 Windows 限制。

JNLP 文件可以仅为特定操作系统指定元素，从而有效地将其限制为特定操作系统。因此，如果 JNLP 文件包含类似这样的内容...

```
<resources os="Windows XP">
    <j2se version="1.5+" />
    <jar href="/example.jar" />
</resources> 
```

...那么这可能是阻止您在 Mac OS X 上运行它的原因。查看 JNLP 文件（我看不到它，作为非美国居民，我无法自己注册）并查看如果这就是原因。如果是，也许你可以编辑它。为什么你说不能下载 ewa-net.jnlp？如果您可以下载 JNLP 文件，请将其编辑为具有`os="Mac OS X"`，然后双击它以运行它（或右键单击并选择`Open With`> `Java Web Start`）。

或者，更改 osname 对您不起作用的原因*可能*是您在错误的 Java 安装中更改了它。在 Snow Leopard 发布后的某个时间（我认为），Apple 移动了 Java 的安装位置。因此，您可能会在以下任一位置找到您的安装：

*   /System/Library/Frameworks/JavaVM.framework/Versions
*   /系统/库/Java/JavaVirtualMachines

如果您只更新了其中一个位置，您可能也必须在其他位置进行更新。

# sql-server - 定义范围的 ASCII 增量

> ID：11219313
> 
> 赞同：0
> 
> 时间：2012-06-27T04:15:19.160
> 
> 标签：sql-server, algorithm

客户希望根据计数附加一个带有文字增量的字段。

范围从“ *aa* ”到“ *zz* ”。

“ *aa* ”表示计数为**1**，“ *zz* ”表示范围内的最大值： **676**

我有***几乎***可以工作的 sql，但希望能有专家帮助我克服最后一道障碍。

```
--Constants
DECLARE @START_ASCII INT = 97
DECLARE @ASCII_OFFSET INT = 1
DECLARE @ALPHABET_LETTER_COUNT INT = 26

--Variables
DECLARE @RecordCount INT = 0
DECLARE @FirstLetter VARCHAR(1) = NULL
DECLARE @SecondLetter VARCHAR(1) = NULL

SET @RecordCount = 1 --Range is 1 to 676 (e.g. 'aa' to 'zz')

SET @FirstLetter = CHAR(round(@RecordCount / @ALPHABET_LETTER_COUNT, 2, 1) + @START_ASCII) 
SET @SecondLetter = CHAR((((@RecordCount - @ASCII_OFFSET) % @ALPHABET_LETTER_COUNT) + @START_ASCII)) 

SELECT @FirstLetter + @SecondLetter 
```

上面sql的问题涉及到第一个字母。它一直有效，直到第二个字母到达字母表的末尾。例如，计数为**26**时，我希望得到 ' *az* '，但得到的是 ' *bz* '。

我想保持 SQL 小而紧凑（例如没有 CASE 语句）。我可以对上面的代码进行一些小调整以使其正常工作吗？

或者，如果有更聪明的方法给这只猫剥皮，我想知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T04:30:35.780

我认为这是计算`@RecordCount-1`（范围 0 到 675）的 base-26 表示。然后将 base-26 数字的两位数映射到 ASCII 字符：

```
SET @FirstLetter = CHAR(floor((@RecordCount-1) / @ALPHABET_LETTER_COUNT) + @START_ASCII)
SET @SecondLetter = CHAR(((@RecordCount-1) % @ALPHABET_LETTER_COUNT) + @START_ASCII) 
```

# python - 通过 CGI 执行的 Python 中不返回 APPDATA

> ID：11219319
> 
> 赞同：1
> 
> 时间：2012-06-27T04:16:30.823
> 
> 标签：python, apache, cgi, nltk, appdata

我通过 CGI 在 Apache 中使用 Python 和 NLTK 工具包。该工具包需要知道 APPDATA 目录，但是在服务器中执行时，`os.environ`不会列出`APPDATA`.

`print os.envrion`当我在控制台中执行简单时，`APPDATA`它存在，但在 Web 服务器中通过 CGI 执行时不存在。

到底是怎么回事？我该如何解决这个问题？我是 Python 新手，我刚刚学习它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:23:51.253

是很有可能的。CGI 环境与控制台中的环境不同。

您可以从 Apache (from `apache.conf`) 设置变量：

```
SetEnv APPDATA 1.2.3.4.5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:25:15.867

`%APPDATA%`是展开到展开变量的用户（即运行脚本的人）的“应用程序数据”目录的特殊变量。Apache 没有像你一样运行，所以它不知道*你的*APPDATA 目录。

您应该将相关路径硬编码到脚本中，或者将其替换为相对于脚本位置的路径，例如`r'..\data\nltk_data'`. 如果您确实需要，您可以通过查看`__file__`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-30T22:28:54.050

模块在运行前检查：

```
if sys.platform == 'win32' and 'APPDATA' in os.environ 
```

但是 APPDATA 在 Apache 中不存在，因为它以与您不同的另一个用户身份运行。

所以你必须手动分配你的APPDATA

```
import os
os.environ.__setitem__('APPDATA','C:\Python27\Lib\site-packages') 
```

For my case, i use python 2.7, and I store all the packages in site-packages, so they are accessible for all users. so i don't really need to give my user appdata folder.

# java - JTextArea 中插入符号位置下方的工具提示

> ID：11219321
> 
> 赞同：0
> 
> 时间：2012-06-27T04:16:42.763
> 
> 标签：java, swing, tooltip, jtextarea, caret

我试图在插入符号位置下方显示一个工具提示，与重命名局部变量时Eclipse 提示“输入新名称，按**Enter重构”的方式相同。**我假设我不能使用 ToolTip，因为它们绑定到鼠标而不是插入符号，所以我必须根据`ToolTipManager.showTipWindow()`我的目的调整代码。在这里，唯一的问题是以像素为单位计算插入符号的位置。我尝试过：

```
Caret c = editor.getCaret();
Point location = c.getMagicCaretPosition(); 
```

其中后续使用`location`会导致 NPE。我想当插入符号不可见时会发生这种情况，因此该方法不可靠。有没有办法将 TextArea 中的字符偏移量转换为 Point 位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:26:24.613

的使用`modelToView()`方法`JTextArea`。

# ios - iOS，无法在 viewDidLoad 之外委托

> ID：11219323
> 
> 赞同：0
> 
> 时间：2012-06-27T04:17:23.623
> 
> 标签：ios, object, viewdidload

我有这个 appdelegate.h

```
#import <UIKit/UIKit.h>
@interface appDelegate : NSObject <UIApplicationDelegate> {
  UIWindow *window;
  NSString *name;

}
@property (nonatomic, retain) NSString *name;
@end 
```

和 .m 文件

```
@synthesize name;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    name=@"john";
    return YES;
   } 
```

现在...我想从另一个控制器获取这个名称，如果我尝试在我的 viewDidLoad 方法中调用它，它可以工作..

```
- (void)viewDidLoad
{
    appDelegate *test= (appDelegate *)[[UIApplication sharedApplication] delegate];
    NSLog(@"%@", test.name);
} 
```

但如果我尝试在我的 initWithNibName 中做同样的事情，它就没有用......

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
    {
        appDelegate *test= (appDelegate *)[[UIApplication sharedApplication] delegate];
        NSLog(@"%@", test.name);
    } 
```

任何人都可以帮助我吗？这个问题快把我逼疯了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:45:11.850

如果要覆盖`-initWithNibName:`，则需要返回类的实例（或`self`）；试试下面的代码`-initWithNibName:`。它对我有用。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    appDelegate *test= (appDelegate *)[[UIApplication sharedApplication] delegate];
    NSLog(@"%@", test.name);

   if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) {

   }
   return self;
} 
```

我认为这可能对你有用。

# button - 新手编程：HTML5 显示图像 - 按钮 onclick=

> ID：11219324
> 
> 赞同：0
> 
> 时间：2012-06-27T04:17:25.437
> 
> 标签：button, onclick

第一次来这里的程序员，在 HTML5 上编写简单的程序。单击按钮时似乎无法显示图像。这是我的代码：

```
<p>
    <center>
    <button onclick="DeadTest()">
    <img src="BeginTest.gif"/></button></center></p>

    <script language="javascript" type="text/javascript">
        function DeadTest() 
        {
            <img style="border-width: 0px;" src="White.jpg" width="768" height="1280" />
        }
    </script> 
```

浏览了无数的网站和论坛，但似乎无法让它发挥作用。尝试了一个 alert() 函数并且它正在工作。我认为这一定与调用图像的代码有关。

第一次程序员，所以它可能看起来很白痴。教我，哦，大师的...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T04:50:56.293

首先了解如何正确调用 javascript 函数以及如何更改属性的基础知识。

请参阅我的示例演示。希望你能从中吸取教训。

[http://jsfiddle.net/NgryM/1/](http://jsfiddle.net/NgryM/1/)

```
<script  type="text/javascript">
    function ButtonClick() 
    {
        alert('Button was clicked');
    }
    function ImageClick(){
        alert('Image was clicked');
    }
    function ChangeImageSrc(){
        var img = document.getElementById('myImage'); 
        img.src = "http://www.ivankristianto.com/wp-content/uploads/2011/05/Javascript.gif";
    }

    function ChangeSize(){
        var img = document.getElementById('myImage'); 
        img.height = "80";
        img.width = "40";    
    }

    </script>
<p>
    <center>
        <input type="button" onclick="ChangeImageSrc()" value="Change Image Src"/>
        <input type="button" onclick="ButtonClick()" value="Test Button Click"/>
        <input type="button" onclick="ChangeSize()" value="Change Size"/>
        <img id="myImage" src="http://www.mmncs.com/wp-content/uploads/javascript_logo.gif" onclick="ImageClick()"/>    
    </center>
</p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:18:50.880

```
<p><center><button style="background:url('Login_Button.png');width:86px;height:45px" onclick="DeadTest()"></button></p>
<div><img id="img1"  style="visibility:hidden" src="a3.jpg" width="768" height="1280" /></div>
<script>
    function DeadTest(){
        document.getElementById('img1').style.visibility='visible';
    }
</script> 
```

# java - 为什么 DefaultHttpClient 通过半封闭的套接字发送数据？

> ID：11219325
> 
> 赞同：11
> 
> 时间：2012-06-27T04:17:28.290
> 
> 标签：java, android, tcp, apache-httpclient-4.x

我在 Android (2.3.x) 上`DefaultHttpClient`使用`ThreadSafeClientConnManager`将 HTTP 请求发送到我的 REST 服务器（嵌入式 Jetty）。

在大约 200 秒的空闲时间后，服务器使用 [FIN] 关闭 TCP 连接。Android 客户端以 [ACK] 响应。这应该并且确实使套接字处于半关闭状态（服务器仍在侦听，但无法发送数据）。

我希望当客户端再次尝试使用该连接（通过`HttpClient.execute`）时，`DefaultHttpClient`会检测到半关闭状态，关闭客户端的套接字（从而发送它的 [FIN/ACK] 以完成关闭），然后打开一个请求的新连接。但是，问题来了。

相反，它通过半关闭的套接字发送新的 HTTP 请求。只有在发送之后才检测到半关闭状态并且客户端关闭了套接字（将[FIN]发送到服务器）。当然，服务器无法响应请求（它已经发送了[FIN]），因此客户端认为请求失败并通过新的套接字/连接自动重试。

最终结果是服务器看到并处理了请求的两个副本。

有想法该怎么解决这个吗？（我的服务器对第二个副本做了正确的事情，但我很生气有效载荷被传输了两次。）

DefaultHttpClient 不应该在第一次尝试写入新的 HTTP 数据包时检测到套接字已关闭，立即关闭该套接字并启动一个新的套接字？我对在服务器发送 [FIN] 几分钟后如何在套接字上发送新的 HTTP 请求感到困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T14:03:13.843

这是 Java 中阻塞 I/O 的一般限制。除了尝试从套接字读取之外，根本没有办法找出对面端点是否已关闭连接。Apache HttpClient 通过使用过时的连接检查来解决这个问题，这本质上是一个非常简短的读取操作。但是，检查可以并且经常被禁用。事实上，由于检查引入的额外延迟，通常建议禁用它。我不知道 Android 附带的 HttpClient 版本在这方面的表现如何，但您可以尝试使用适当的配置参数显式启用检查。

此问题的更好解决方案可能是在一段时间不活动后从连接池中逐出在特定时间段（例如 150 秒）内空闲的连接。

[http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html#d5e652](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html#d5e652)

# menu - 当前菜单项的突出显示未正确突出显示

> ID：11219340
> 
> 赞同：0
> 
> 时间：2012-06-27T04:19:42.137
> 
> 标签：menu, highlight

当用户位于该部分时，我希望当前菜单项保持突出显示。我为 .current-menu-item 设置了样式。出于某种原因，有些样式有效，有些则无效。我将所有这些用于测试目的：

```
.current-menu-item {
    color:#F90;
    border-bottom:2px solid #fco;
    text-decoration:line-through;
        background:#000;
} 
```

背景和文本装饰是唯一有效的样式。任何线索为什么其他人不这样做？我真的只希望文本颜色保持橙色（突出显示#f90）。

在此先感谢您的帮助:)

桑德拉：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T04:29:19.947

您的颜色规则可能会被更具体的规则覆盖。您可以进一步调查这一点，在谷歌浏览器中使用“检查元素”，并查看检查器中的样式。

# blackberry - 黑莓应用程序：自动运行模式下不显示屏幕

> ID：11219341
> 
> 赞同：6
> 
> 时间：2012-06-27T04:19:49.423
> 
> 标签：blackberry, java-me, blackberry-jde

我正在尝试创建一个将在系统启动时运行的后台应用程序。当我手动运行它（从功能区）时，屏幕会出现，但是当我将其设置为启动应用程序（描述符中的启动时自动运行选项）后运行该应用程序时，屏幕上不会出现任何内容。我正在尝试以下代码；

```
public class AppClass extends UiApplication {

    public static void main(String[] args) {
        AppClass theApp = new AppClass();
        theApp.enterEventDispatcher();
    }

    public AppClass() {
        pushScreen(new AppScreen());
    }
} 
```

这是屏幕类；

```
public final class AppScreen extends MainScreen {

    private LabelField  label;

    public AppScreen() {
        setTitle("AppTitle");

        label = new LabelField();
        label.setText("Ready.");

        add(label);
    }
} 
```

我期待它是一个 UI 应用程序，因此无论是在启动时自动运行还是手动运行，它的屏幕都应该可见。如果我需要做一些事情以使其按预期工作，请指导我，我是 BlackBerry 开发的新手。我正在以下环境中开发；

*   黑莓 JDE Eclipse 插件 1.5.0
*   黑莓操作系统 4.5

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T12:28:46.230

自动启动应用程序在操作系统完成启动之前运行，因此不支持用户界面。我怀疑您的应用程序正在启动，但在某些 UI 调用上失败。编写要自动运行并从主屏幕运行的应用程序的文档化方法是为自动运行提供一个备用入口点，并使用参数告诉程序它已自动运行。然后使用 API 等待操作系统为 UI 应用程序做好准备。

```
public class AppClass extends UiApplication {
    public static void main(String[] args) {

        if (args.length > 0 && args[0].equals("auto-run")) {
            // auto start, wait for OS
            while (ApplicationManager.getApplicationManager().inStartup()) {
               Thread.sleep(10000);
            }

            /*
            ** Do auto-run UI stuff here
            */
        } else {
            AppClass theApp = new AppClass();
            theApp.enterEventDispatcher();
        }
    }

    public AppClass() {
        pushScreen(new AppScreen());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T11:57:25.333

调用[getApplication().requestForeground();](http://www.blackberry.com/developers/docs/4.5.0api/net/rim/device/api/system/Application.html#requestForeground%28%29) 从 AppScreen 类的构造函数中，以便您的屏幕可见。

```
public final class AppScreen extends MainScreen {

    private LabelField  label;

    public AppScreen() {
        setTitle("AppTitle");

        label = new LabelField();
        label.setText("Ready.");

        add(label);

        getApplication().requestForeground();
    }
} 
```

一旦应用程序在后台运行，我们必须明确地将其带到前台以显示 UI 元素，这就是我们在这里所做的。

# data-binding - 如何以特殊形式绑定网格视图

> ID：11219343
> 
> 赞同：0
> 
> 时间：2012-06-27T04:20:00.393
> 
> 标签：data-binding

我在网格视图绑定中遇到问题。我想以特殊形式绑定我的网格视图例如：-

```
Class       Name         Address         phone no
 10         abc          australia       1233
            was          usa             56777
            qaz          uk              8766
 12         tre          india           64326
            yre          canada          76543
            poi          france          8566

I don't want to repeat same class more than once but show all student having same    class,so may you please tell me how i can do this work.

Thanks in advance 
```

# php - Facebook Graph API 为公众上传照片

> ID：11219344
> 
> 赞同：0
> 
> 时间：2012-06-27T04:20:07.400
> 
> 标签：php, facebook-graph-api

我已经通过 Facebook graph API 成功上传了照片，但是 APPS 只允许朋友观看，但不允许朋友的朋友观看。

这是我将照片上传到相册的编码

```
$photo_details = array('message'=> 'Padswapp Photos','no_story' => 1);
$photo_details['image'] = '@' . realpath($t_name["tmp_name"][$i]);
$upload_photo = $facebook->api('/'.$album_uid.'/photos', 'post', $photo_details); 
```

任何人都可以帮助我如何将照片上传为公开。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:32:59.333

创建相册时，您需要设置隐私，请记住，您将无法上传比用户在接受身份验证对话框时为您的应用选择的隐私更开放的照片。

查看`privacy`相册对象的参数；在[为用户创建相册](https://developers.facebook.com/docs/reference/api/user/#albums)时，您可以将其设置为用户想要的任何内容，但须遵守上述警告。

从文档：

> 定义相册隐私设置的 JSON 编码对象，例如：{"value":"SELF"}（详见下文）。只有用户可以指定帖子的隐私设置。

然后是您可以使用的隐私设置的可能组合列表

# android - 如何确定是什么触摸了我的安卓设备的屏幕？

> ID：11219345
> 
> 赞同：6
> 
> 时间：2012-06-27T04:20:24.430
> 
> 标签：android, touch, touchscreen

我的意思是我想知道是什么触摸了我的安卓设备的屏幕？就像如果手指触摸屏幕它会知道它是手指，如果是圆珠笔、铅笔、笔记本或其他东西它会知道它不是手指。

触摸屏如何确定触摸它的东西？因为我想开发指纹扫描仪。我用什么技术？是否有一个android函数可以确定什么东西触摸了屏幕？

谢谢。

我不能很好地解释它，但我希望你明白这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:33:18.950

您的设备屏幕没有这样的传感器来确定触摸类型..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:12:41.557

不幸的是，我们今天在手机上使用的触摸屏技术还没有那么先进。当然，我也想在 Android 上构建一个生物识别安全解锁应用程序；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T04:34:11.260

触摸屏并不能确定触摸它们的是什么。

在[电阻式触摸屏](http://en.wikipedia.org/wiki/Resistive_touchscreen)的情况下，它们完全取决于工具按下的压力。（这些有点过时了，我不知道有任何 Android 设备使用这种类型的触摸屏。）

[正如您可能已经猜到的那样，电容式触摸屏](http://en.wikipedia.org/wiki/Touchscreen#Capacitive)使用电容器和电流来确定何时触摸它们。由于人体的皮肤是导体，因此它表示屏幕已被触摸。然而，他们开发的手写笔也很有用，因此也引起了人们的注意。但是，屏幕不知道这些之间的区别；他们只是电的导体。

您无法通过智能手机上的触摸屏技术确定指纹的精确形状。您可以确定触摸的[压力](http://developer.android.com/reference/android/view/MotionEvent.html#getPressure%28%29)、代表触摸区域的椭圆的长轴和短轴，或者[触摸](http://developer.android.com/reference/android/view/MotionEvent.html#getTouchMajor%28%29)的[大致](http://developer.android.com/reference/android/view/MotionEvent.html#getTouchMinor%28%29)[大小](http://developer.android.com/reference/android/view/MotionEvent.html#getSize%28%29)。而已。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T04:42:00.383

您可以使用 API 14 轻松完成此操作：

```
myView.setOnTouchListener(new Button.OnTouchListener() {
                @Override
                public boolean onTouch(View v, MotionEvent arg1) {
                     if (arg1.getAction() == android.view.MotionEvent.ACTION_DOWN
                              && (MotionEvent.TOOL_TYPE_FINGER == arg1.getToolType(0)) {    
                        Toast.makeText(this,
                                        "You touched me with your finger!",
                                        Toast.LENGTH_LONG).show();
                    }
                     return true;
                }
        }); 
```

真的只告诉您提供了触摸输入，但与手写笔和鼠标指针不同。大多数设备使用热检测来进行触摸输入，但也有一些设备可以模拟手指输入。前任。智能手机手套、Ipad 触控笔

# c# - 带有下拉列表的动态 Formview 失败

> ID：11219346
> 
> 赞同：2
> 
> 时间：2012-06-27T04:20:37.097
> 
> 标签：c#, asp.net

188 分

400 个帖子

带有下拉列表的动态 Formview 严重失败。

6 小时 21 分钟前|LINK

我脑子里有一个概念，我正在努力实现它，但它不起作用。这是需要发生的事情：用户从列表中选择一个项目。根据选择动态构建表单视图。formview 需要是动态的，因为查询将返回一个在非空值中包含空值的数据集，例如：

4600, 1, 4, 空, 空, 68 ....

“4600”是型号，其他都是对应于组件的 ID。Null 值表示该字段不属于 4600。

此后，然后构建表单视图，以便将“4600”馈送到标签。对于每个非空值，我需要构建一个下拉列表，每个都有一个单独的数据源，不是 ODS 的东西，而是对 BLL 类的调用。然后将非空值分配给 ddl 的 selected value 属性。

很简单，不是吗？所以这是代码，它失败了。实际上只是在无限循环中超时。超时发生在 ddlTonerBlack_DataBinding 方法中。有人可以告诉我我做错了什么吗？谢谢。EJM

aspx 标记：

```
<form id="form1" runat="server"> 
<div> 
    <asp:DropDownList runat="server" ID="ddlPrinterModels" AppendDataBoundItems="True" 
        DataTextField="Hardware_Model" DataValueField="Hardware_Model" 
        width="246px" CssClass="AssetMngnt-smallFont" AutoPostBack="true" > 
            <asp:ListItem Value="-1" Selected="True">-- Select Printer Model --</asp:ListItem> 
    </asp:DropDownList> 
    <hr /> 

    <asp:PlaceHolder id="DetailsViewPlaceHolder" runat="server"/> 

</div> 
<!-- NOT A COMPLETE QUERY --> 
<asp:sqldatasource id="ODSTonerBlackByModel" 
    selectcommand="SELECT [Hardware_Model], [Ident_Black], [Ident_Cyan], [Ident_Yellow] FROM [cPrinters_Toners] WHERE ([Hardware_Model] = @Hardware_Model)" 
    connectionstring="<%$ ConnectionStrings:CISF_Asset_Management %>" 
    runat="server"> 
    <SelectParameters> 
        <asp:ControlParameter ControlID="ddlPrinterModels" Name="Hardware_Model" 
            PropertyName="SelectedValue" Type="String" /> 
    </SelectParameters> 
</asp:SqlDataSource>  
</form> 
```

现在代码文件：

```
public partial class Default2 : System.Web.UI.Page 
{ 
    protected void Page_Load(object sender, EventArgs e) 
    { 
        if (!IsPostBack)  
        { 
            LoadData_PrinterModels();  
        } 

        FormView printerModelFormView = new FormView(); 

        dalConsumables_TonerBlack x = new dalConsumables_TonerBlack(); 

        printerModelFormView.ID = "fvPrinterModel"; 
        printerModelFormView.DataSourceID = "ODSTonerBlackByModel"; 

        printerModelFormView.PagerSettings.Mode = PagerButtons.NextPrevious; 
        printerModelFormView.HeaderText = "Printer Model"; 

        printerModelFormView.ItemTemplate = new FormViewTemplate(); 

        DetailsViewPlaceHolder.Controls.Add(printerModelFormView); 
    } 

    protected void LoadData_PrinterModels() 
    { 
        Printer_ModelsList x = new Printer_ModelsList(); 

        ddlPrinterModels.DataSource = x.GetPrinetr_Models(); 
        ddlPrinterModels.DataBind(); 
    } 

    protected void Page_Init(object sender, EventArgs e)  
    { 
        SqlDataSource sqlDS = new SqlDataSource(); 
        sqlDS.ConnectionString = ConfigurationManager.ConnectionStrings["CISF_Asset_Management"].ConnectionString; 
        sqlDS.SelectCommand = "SELECT dbo.cCartridge_Black.Ident_Black, dbo.cCartridge_Black.Model_Black, " + 
                               "dbo.cCartridge_Black.Desc_Black, dbo.cCartridge_Black.Qty_Black,  " + 
                               "dbo.cCartridge_Black.Black_Reorder_Limit, dbo.cCartridge_Black.Notes,  " + 
                               "dbo.cCartridge_Black.UpdatedBy, dbo.cPrinters_Toners.Hardware_Model " + 
                               "FROM   dbo.cCartridge_Black LEFT OUTER JOIN " + 
                               "dbo.cPrinters_Toners ON dbo.cCartridge_Black.Ident_Black  " + 
                               "= dbo.cPrinters_Toners.Ident_Black"; 
        form1.Controls.Add(sqlDS); 
        DropDownList ddl = new DropDownList(); 
        ddl.ID = "ddlTonerBlack"; 
        ddl.DataSource = sqlDS; 
        ddl.DataTextField = "Model_Black"; 
        ddl.DataValueField = "Ident_Black"; 
        form1.Controls.Add(ddl); 
    } 
} 
```

和模板类：

```
public class FormViewTemplate : System.Web.UI.ITemplate 
{ 
    void System.Web.UI.ITemplate.InstantiateIn(System.Web.UI.Control container) 
    { 
        Label lblPrinterModel = new Label(); 
        lblPrinterModel.ID = "lblHardwareModel"; 
        lblPrinterModel.DataBinding += new EventHandler(PrinterModelLabel_DataBinding); 

        container.Controls.Add(lblPrinterModel); 

        DropDownList ddlTonerBlack = new DropDownList(); 
        ddlTonerBlack.ID = "ddlTonerBlack"; 
        ddlTonerBlack.DataBinding +=new EventHandler(ddlTonerBlack_DataBinding); 

        container.Controls.Add(ddlTonerBlack); 
    } 

    private void PrinterModelLabel_DataBinding(Object sender, EventArgs e) 
    { 
        Label lblPrinterModel = (Label)sender; 

        FormView formViewContainer = (FormView)lblPrinterModel.NamingContainer; 
        DataRowView rowView = (DataRowView)formViewContainer.DataItem; 

        lblPrinterModel.Text = rowView["Hardware_Model"].ToString(); 

    } 

    private void ddlTonerBlack_DataBinding(Object sender, EventArgs e) 
    { 
        DropDownList ddlTonerBlack = (DropDownList)sender; 
        FormView formViewContainer = (FormView)ddlTonerBlack.NamingContainer; 
        DataRowView rowView = (DataRowView)formViewContainer.DataItem; 

        dalConsumables_TonerBlack x = new dalConsumables_TonerBlack(); 
        ddlTonerBlack.DataSource = x.GetListTonersBlack(); 
        ddlTonerBlack.DataBind(); 

        ddlTonerBlack.SelectedValue = rowView["Ident_Black"].ToString(); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:53:14.077

您会得到一个无限循环，因为在 ddlTonerBlack_DataBinding 方法中，您在刚刚触发数据绑定事件的控件上调用了 DataBind 方法。

只需在同一控件的数据绑定事件处理程序中触发数据绑定事件，这就是您获得无限循环的原因。

# vhdl - 如何创建大于 2³¹-1 的 numeric_std 有符号值？

> ID：11219350
> 
> 赞同：2
> 
> 时间：2012-06-27T04:20:56.660
> 
> 标签：vhdl

在以下类型和常量声明中，数组中的最后一个值实际上不是`2**35-1`，因为大于`2**31-1`的整数不是标准 VHDL (2002)

```
library ieee;
use ieee.numeric_std.all;

-- Boilerplate elided...

constant X_SIZE : natural := 40; -- Really, anything greater than 32
type x_array is array(natural range <>) of signed;

constant XS : x_array := (
    to_signed(0, X_SIZE),
    to_signed(1, X_SIZE),
    to_signed(2**35 - 1, X_SIZE) -- Not possible!
); 
```

我不能这样做`to_signed(2, X_SIZE)**35 - 1`，因为没有在`signed`. 我不愿意输入完整的数组，因为它看起来很笨重，并且`X_SIZE`将来可能会改变。那么如何在这里创造我想要的价值呢？有没有比直接输入 40 `0`s 和`1`s 更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:12:59.977

根据价值，有几种方法可以做到这一点。

1.  使用十六进制文字对任意数字都有好处，并且会节省一些空间：`x"1FFFFFFFF"`
2.  聚合赋值提供了一种指定模式的方法（例如，对于任何大小，一个 0 后跟所有 1）：`(X_SIZE-1 downto 35 => '0', others => '1')`- 但请注意，如果您尝试将其与其他运算符或函数结合使用，编译器将无法推断所需的向量大小。您需要执行以下操作：`(X_SIZE-1 downto 35 => '1', 35 downto 0 => '0')`. 在这一点上，您可能不会节省太多空间，但取决于您在做什么，它可能会使您的意图比文字更清晰。
3.  您还可以构建所需类型的单元，并将其移动：`shift_left(to_unsigned(1, X_SIZE), 35) - 1`.

# windows-phone-7 - 消息框修改phone7

> ID：11219351
> 
> 赞同：1
> 
> 时间：2012-06-27T04:20:57.727
> 
> 标签：windows-phone-7, windows-phone-7.1

我们可以在 MessageBox 的过渡上制作动画并更改其默认样式或显示消息的外观，请帮助我是新手？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T05:32:03.980

如果您想要自定义的 MessageBox，请使用 MessagePrompt 而不是 MessageBox。

下载：[Code2Fun 工具](http://coding4fun.codeplex.com)

对于文档：[MessagePrompt](http://coding4fun.codeplex.com/wikipage?title=MessagePrompt&referringTitle=Documentation)

# linker - 在 Mac OSx 10.6 中从 gfortran 链接预安装的库

> ID：11219354
> 
> 赞同：0
> 
> 时间：2012-06-27T04:21:55.303
> 
> 标签：linker, gfortran

几天来，我一直在尝试编译用 fortran90 和 C 编写的某些代码。我正在使用 gfortran 和 gcc。代码需要链接到 lapack、blas 和 fftw3 库。我的 macbook pro 中安装了所有三个。但是当我运行配置脚本时，由于某种原因，它无法找到 fftw3 库。

这是我的配置行：

```
./configure --prefix=`pwd` --with-fft=fftw3 \
  --with-fft-lib='-I/opt/local/include -L/opt/local/lib -lfftw3 -lm' \
  --with-blas='-I/opt/local -L/opt/local -lblas' \
  --with-lapack='-I/opt/local -L/opt/local  -llapack' \
  FCFLAGS='-O3 -m64' 
```

我为 lapack、blas 和 fftw3 使用了完全相同的链接线。配置能够找到 lapack 和 blas 但无法链接 fftw3。有谁知道这里发生了什么？我将不胜感激任何帮助。

谢谢，科平约尔

大家好，

首先感谢 Hristo Iliev 之前的回答。我已经能够通过链接库来解决这个问题。您对库和主代码使用不同的编译器是正确的。这就是问题所在。当我用相同的编译器编译它们时，链接问题就消失了。但现在我有另一个问题。

在代码中有一个这样的函数调用：

```
call io_open(info_files(n_files)%unit,trim(dir)//"/info") 
```

`io_open`函数定义如下：

```
subroutine io_open(unit, file, status, form)
    integer,          intent(out) :: unit
    character(len=*), intent(in)  :: file
    character(len=*), intent(in), optional  :: status, form
    integer :: iostat
    character(len=20) :: status_, form_ 
```

我得到的错误是这样的：

```
call io_open(info_files(n_files)%unit, trim(dir)
                                                1
Error: Syntax error in argument list at (1) 
```

基本上，代码似乎给出了语法错误

```
trim(dir)//"/info" 
```

这是函数调用中的文件名。

现在代码在 linux 机器上编译没有任何问题（我使用的是最新版本的 ubuntu）。我只在运行 osx 10.6 的 macbook pro 上收到错误。

同样令人惊讶的是，当我将一个额外的变量定义`fname`为

```
fname=trim(dir)//"/info" 
```

然后将其用于函数调用

```
call io_open(info_files(n_files)%unit,fname) 
```

现在我可以在代码中的所有函数调用中进行替换，这些函数调用相当多，手动进行更改可能需要几个小时。但不知何故，使用相同编译器的相同代码在 linux 中编译没有错误但在 mac 中失败。有谁知道可能出了什么问题？我将不胜感激任何意见。

在此先感谢，
kopinjol

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:46:00.850

Thanks for the reply Hristo Iliev. I just figured out the problem. The problem was that I was using different versions of the same compiler. Once I updated the environment variables with compilers of the same versions, it all started working.

This is what I did,

```
export FC="gfortran-mp-4.6 -m64"
export F77="gfortran-mp-4.6 -m64"
export F90="gfortran-mp-4.6 -m64"
export CC="gcc-mp-4.6 -m64"
export CXX="g++-mp-4.6 -m64"
export CPP="cpp-mp-4.6 -m64 -C -ansi"
export FCCPP="cpp-mp-4.6 -m64 -C -ansi"
export FCFLAGS="-O3"
export FFLAGS="-O3" 
```

As explained in the APE mailing list.

Thanks again,

kopinjol

# asp.net - JetBrains dotTrace 尝试在本地计算机上执行配置文件时不起作用

> ID：11219355
> 
> 赞同：0
> 
> 时间：2012-06-27T04:21:59.750
> 
> 标签：asp.net, profiling

我目前正在尝试使用 JetBrains 的 dotTrace Performance Profiler 为我的 ASP.NET 应用程序设置跟踪/配置文件。

每当我尝试启动我的 IIS 应用程序时，我都会不断收到此错误：

```
---------------------------
JetBrains Product – dotTrace Performance 5.0
---------------------------
Error - w3wp.exe (11148):
Can't create file (system error 5 - Access is denied.)
---------------------------
OK   
--------------------------- 
```

尝试在 IIS 中实现我的 Windows 帐户，并为它尝试分析的应用程序文件夹放置适当的安全设置，但我不断收到此错误。

想知道你们是否遇到过这个错误，如果是的话，你们采取了哪些措施来修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T23:28:12.420

我刚刚设法完全删除了 dotTrace，只是使用了 Redgate 的 ANTS Profiler 替代方案……因为我基本上是在一个时间受限的项目中，所以我无法进一步调查。

感谢大家的帮助！

干杯，一个

# cross-browser - 使 css 验证某些修复 IE 以兼容传递的属性的任何技术

> ID：11219356
> 
> 赞同：0
> 
> 时间：2012-06-27T04:22:01.143
> 
> 标签：cross-browser, css

我正在使用一些在 CSS 2.1 中不支持的 CSS 属性。例如，-moz-border-radius, box-shadow, zoom, filter,.... 让我无法通过 CSS 验证。

那么有什么技术可以让 CSS 验证器忽略它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:26:39.523

对于 Microsoft Propreitary attributes ，您可以通过以下方式将它们保存在条件注释中：

```
<!--[if IE 6]>
<style type="text/css">
    /* Use all the non-standard Microsoft Propreitary attributes */
    body {zoom: 1; filter: none;}
</style>
<![endif]--> 
```

如果您在样式表中使用东西，那么您可以这样做：

```
<!--[if IE 6]>
<link rel="stylesheet" href="ie6.css" type="text/css" />
<![endif]--> 
```

这在 W3C 中得到了完美验证。使用此代码检查：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Untitled Document</title>
        <!--[if IE 6]>
        <style type="text/css">
            /* Use all the non-standard Microsoft Propreitary attributes */
            body {zoom: 1; filter: none;}
        </style>
        <![endif]-->
    </head>

    <body>

    </body>
</html> 
```

通过直接输入验证：http: [//validator.w3.org/#validate_by_input](http://validator.w3.org/#validate_by_input)

对于其他人，您可以为**供应商扩展**设置一个选项，以仅在 CSS 验证器中显示警告。

![](../Images/d4afea0a1d362a1e0edce9eab2854a5c.png)

# encode - CLR 中的 httputility.urlencode 需要 system.web 吗？

> ID：11219358
> 
> 赞同：0
> 
> 时间：2012-06-27T04:22:05.763
> 
> 标签：encode, system.web

我创建了一个 CLR 数据库项目，我想使用 httputility.urlencode。但是，当我尝试添加对我的项目的引用时，我在任何地方都找不到 system.web。我搜索了一下，有人建议我将框架更改为完整的 .net 4.0。

[但是，问题是我无法使用 4.0 部署它，正如微软通过此链接 ( http://msdn.microsoft.com/en-us/library/dd193408.aspx](http://msdn.microsoft.com/en-us/library/dd193408.aspx) )指出的那样。所以我需要使用3.5。而且即使我尝试将其更改为 4.0 或 3.5 以查看是否可以找到 system.web，我仍然无法在列表中看到引用。

我的问题与这个非常相似[为什么我在 Visual Studio 2010 中找不到或使用 UrlEncode？](https://stackoverflow.com/questions/4967051/why-cant-i-find-or-use-urlencode-in-visual-studio-2010)

**所有 System.Web 给我的是：AspNetHostingPermission、AspNetHostingPermissionAttribute 和 AspNetHostingPermissionLevel**

我遵循了建议的解决方案，但一点运气都没有。请问有什么建议吗？真的需要你的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T04:13:54.253

大家好，经过长时间的研究。我找到了一个更简单的解决方案来解决我的问题。它可能有一些我不知道的限制，但我认为在 SQL 服务器中创建程序集要简单得多。解决方案是使用此链接为 URL 编码创建一个函数：

[http://sqlblog.com/blogs/peter_debetta/archive/2007/03/09/t-sql-urlencode.aspx](http://sqlblog.com/blogs/peter_debetta/archive/2007/03/09/t-sql-urlencode.aspx)

希望它也对其他人有所帮助。

干杯。

# android - 在android sqlite中选择不同的值

> ID：11219361
> 
> 赞同：37
> 
> 时间：2012-06-27T04:22:31.797
> 
> 标签：android, sqlite

我尝试在android中运行以下原始查询，它似乎不起作用

```
String query ="SELECT DISTINCT category FROM event";
Cursor  cursor = mDb.rawQuery(query, null);
if (cursor != null) {
     cursor.moveToFirst();
}
return cursor; 
```

所以我决定在 android 中使用 query() 方法，类似于

```
Cursor mCursor = mDb.query(EVENT_TABLE, new String[] {KEY_ROWID, KEY_CAT}, null, null,null,null, null) 
```

谁能告诉我如何选择使用 query() 而不是 rawquery 的不同类别，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-14T13:17:09.873

但是你必须记住在`GROUPBY`( `NOT NULL`send) 中发送参数。

您必须为 提供列名`distinct`。

例子：

```
Cursor cursor = db.query(true, YOUR_TABLE_NAME, new String[] { COLUMN_NAME_1 ,COLUMN_NAME_2, COLUMN_NAME_3 }, null, null, COLUMN_NAME_2, null, null, null); 
```

true - 不同的 TRUE

`COLUMN_NAME_2`- 名称列你有什么是不同的。

这对我来说很好。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-06-27T04:27:35.707

您可以使用[此](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28boolean,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)方法：

```
public Cursor query (boolean distinct, String table, 
                     String[] columns, String selection, 
                     String[] selectionArgs, String groupBy, 
                     String having, String orderBy, String limit) 
```

这里第一个参数指定是否使用 distinct。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-15T15:40:51.260

有多种方法，正如已经打勾的绿色。但是，如果有人希望通过原始查询来获取它，那么您可以这样做：

```
String query = "SELECT DISTINCT(category) FROM event"; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-26T21:10:15.513

```
Cursor res=db.rawQuery("select column1 column2...  Distinct column3 from "+Table_name, null); 
```

`column3`是一个不同的列

# javascript - 骨干样板 - 如何更改模板目录？

> ID：11219367
> 
> 赞同：0
> 
> 时间：2012-06-27T04:23:07.443
> 
> 标签：javascript, backbone.js

当我在模块中为视图指定模板时，形成的 URL 是：/app/templates/template.html。我有一个静态文件夹中的所有样板代码，所以我需要 URL 看起来像 /static/app/templates/template.html。我怎样才能改变配置来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:52:12.503

不确定这是否正确，但我知道 Backbone-boilerplate 使用 require.js 所以我建议把

`baseUrl: 'static'`

在您的 config.js 文件中

# iphone - 没有图像显示在 iPad 上运行但在模拟器中

> ID：11219369
> 
> 赞同：2
> 
> 时间：2012-06-27T04:23:17.453
> 
> 标签：iphone, ios, xcode, ipad, xcode4

因此，在非常疲倦/工作日结束的状态下，我正在更改构建中的一些目标设置以克服配置文件出现的问题，我成功地让应用程序在新设备上运行。问题是没有图像显示在应用程序中？在我更改一些应用程序目标设置之前，这个问题没有发生，所以我知道这不是我在这里看到的检查图像名称是否存在大小写不一致的正常答案。该应用程序在模拟器中运行良好，并在我的设备上提前 30 分钟运行，但现在在我的设备上运行时图像曾经存在的空白区域。

有谁知道为什么会发生这种情况？我很乐意提供更多信息以帮助大家更好地协助工作，我只是不确定还有哪些其他信息对追查原因很有价值。

非常感谢所有提供帮助的人，这真是令人沮丧。

**编辑** 虽然所有图像都包含在复制包资源部分中，但它们在运行到设备时不会出现在应用程序包中（在 iExplorer 中检查）。在 iExplorer 中将图像手动移动到我设备上的应用程序包后，它们会加载到应用程序中。
有谁知道为什么他们实际上没有复制过来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T04:25:43.757

如果您正在更改应用程序的目标设置，您确定您的图像正在为设备构建吗？检查目标的 Build Phases 选项卡，并确保您的图像显示在 Copy Bundle Resources 阶段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T04:44:14.733

检查 Targets-->Build Phases-->Copy bundle Resources

![在此处输入图像描述](../Images/a9c3796228fdd1acda4fb8a4d147ccec.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T04:40:31.383

确保您在从设备或模拟器以及 xcode 中清除构建后尝试过它。有时这是一个普遍的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T10:59:09.503

当图像文件名以大写字母开头时，我遇到了这个问题。确保所有图像名称都以小写字母开头。

# php - 自动加载数据库的空白页

> ID：11219370
> 
> 赞同：1
> 
> 时间：2012-06-27T04:23:26.277
> 
> 标签：php, codeigniter, iis

**可能重复：[CodeIgniter 中的数据库有问题](https://stackoverflow.com/q/4959449/63609)**

好吧，我这两天google了，没用。我从 SO 和 codeigniter 的支持论坛收到了一些点击，它们大多是误导性线程和其他人的“哎呀”错误。我实际上有两个问题，但为了解决这个令人难以置信的问题，我可以坚持一个。

我的设置：

*   新鲜的 CodeIgniter 2.1
*   IIS 7.5、FastCGI+PHP 5.4.4
*   Windows 7 专业版 x64

好吧，

1.  在加载视图之前，我将以下行添加到我的“欢迎”控制器中。CodeIgniter 吐出“无法加载请求的类：数据库”。我也试过“数据库”，同样的事情。

    `$this->load->library('database');`

2.  我试过`$autoload['libraries'] = array('database');`了，它会产生一个空白页。

3.  我也尝试过`$autoload['libraries'] = array('Database');`生成预览页面，如 #1 所示。
4.  我`error_reporting(E_ALL)`在欢迎控制器的内联负载上方添加了任何其他内容。

我只能归咎于我对 IIS 的缺乏经验，这可能会导致问题。

**编辑：**所以，#1 已经修复，自动加载数据库，而且，多亏了 Ben，我忘记了 " `load->database(...)`" 方法......

*无论如何，当通过自动加载加载数据库时，我当前的错误现在只是一个白页。我的代码只是设置为自动加载数据库并显示 CodeIgniter 提供的默认视图。删除数据库自动加载会导致视图显示...*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T04:29:26.483

您的 #2 选项很可能运行良好，并且其他一些未报告的 PHP 错误（检查您的 CI 日志）导致空白页。

要手动加载数据库，请使用 $this->load->database();

有关更多信息，请参阅[此链接](http://codeigniter.com/user_guide/database/connecting.html "这个链接")

library() 用于自定义库文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:16:16.933

只是跟进任何有同样问题的人（包括我未来的自己）。

确保您在数据库配置中加载的任何 dbdriver 都在 php.ini 中加载了正确的库（dll 左右）

```
$db['default']['dbdriver'] = 'mysqli'; //MySQLi <-- mysqli.dll
$db['default']['dbdriver'] = 'mysql'; //MySQL <-- mysql.dll
$db['default']['dbdriver'] = 'pdo'; //PDO <-- pdo.dll 
```

未能加载正确的 dll 将导致 CodeIgniter 失败并显示空白页。

# c# - FileSystemWatcher 监视 UNC 路径

> ID：11219373
> 
> 赞同：25
> 
> 时间：2012-06-27T04:24:10.680
> 
> 标签：c#, filesystemwatcher

关于这个主题的问题不乏问题，但我仍然遇到麻烦。这是我的情况。我有一项服务，我需要监视配置文件中指定的路径。当我使用本地驱动器时效果很好。

但是，当我将其更改为`\\server2\secondary\temp\watch_folder`服务无法启动时。日志中的错误是

> 目录名称 \\server2\secondary\temp\watch_folder 无效。

如果我将其直接复制到 Windows 资源管理器中，则文件夹可以正常打开。如果我将代码粘贴到旧的 Winforms 应用程序中，它可以正常工作。我已经尝试了所有的“登录身份”帐户。我将其设置为使用管理员帐户，但仍然没有骰子。

这是我的代码：

```
_watcher = new FileSystemWatcher();
_watcher.Path = ConfigurationManager.AppSettings["WatchFolder"];
_watcher.NotifyFilter = NotifyFilters.LastWrite | NotifyFilters.FileName;
_watcher.Filter = "*.txt";
_watcher.Created += new FileSystemEventHandler(OnCreated);
_watcher.Error += new ErrorEventHandler(OnError);
_watcher.EnableRaisingEvents = true; 
```

有任何想法吗？我不知所措，在这一点上，我想我已经盯着它太久了。我真诚地感谢任何帮助。

谢谢，尼克

***编辑*** 这里是例外：

> 无法启动服务。System.ArgumentException：目录名称 \server2\Secondary\temp\watch_folder 无效。
> 在 System.IO.FileSystemWatcher.set_Path(String value)
> 在 FileWatcher.FileWatcher.Watch()
> 在 FileWatcher.FileWatcher.OnStart(String[] args)
> 在 System.ServiceProcess.ServiceBase.ServiceQueuedMainCallback(Object state)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-27T16:53:58.647

我刚试过这个：

```
var _watcher = new FileSystemWatcher();
_watcher.Path = @"\\10.31.2.221\shared\";
_watcher.NotifyFilter = NotifyFilters.LastWrite | NotifyFilters.FileName;
_watcher.Filter = "*.txt";
_watcher.Created += new FileSystemEventHandler((x, y) =>Console.WriteLine("Created"));
_watcher.Error += new ErrorEventHandler( (x, y) =>Console.WriteLine("Error"));
_watcher.EnableRaisingEvents = true;
Console.ReadKey(); 
```

这没有问题，但是我在以下情况下复制了您的异常：

*   正在运行的用户没有读取远程文件夹的权限。
*   远程文件夹不存在。

您的问题肯定与权限有关，我认为正在运行的用户没有所需的权限。

您可以尝试的另一件事是将远程文件夹映射到一个本地文件夹。

在 cmd 中执行：

```
NET USE Z: \\server2\Secondary\temp\watch_folder /user:Domain\UserName Password 
```

然后在您的代码中：

```
_watcher.Path = @"Z:\"; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-27T13:39:06.887

您的服务可能在没有该共享权限的用户帐户下运行。尝试更改 Windows 服务以在不同的凭据下运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-03T14:37:19.103

我找到了一种非常酷的方法来获取 UNC，其凭据与 Codeproject 上的 Windows 服务中的 FileSystemWatcher 一起使用。

请参阅 Adrian Hayes 的帖子： http: [//www.codeproject.com/Articles/43091/Connect-to-a-UNC-Path-with-Credentials](http://www.codeproject.com/Articles/43091/Connect-to-a-UNC-Path-with-Credentials)

他的解决方案很有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-28T18:23:40.820

我也遇到了这个问题。我的解决方法是在服务器路径中包含我们公司的域名：

```
\\servername.company.com\directorytowatch 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T19:21:32.497

您可能需要如下所示的路径：

```
\\\\server2\\Secondary\\temp\\watch_folder 
```

或者

```
@"\\server2\Secondary\temp\watch_folder" 
```

# java - 斯坦福 CoreNLP 非常慢

> ID：11219392
> 
> 赞同：1
> 
> 时间：2012-06-27T04:26:40.443
> 
> 标签：java, performance, stanford-nlp

我在**Windows**中做一个 NLP 项目，问题是每当我从命令提示符运行 Stanford CoreNLP 时，生成给定输入文本文件的 XML 输出大约需要 14-15 秒。我认为这个问题是因为库需要很长时间才能加载。请有人解释问题是什么，我该如何解决这个问题，因为这个时间问题对我的项目来说是一个大问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T05:43:42.403

斯坦福 CoreNLP 使用各种组件的大型模型文件参数。是的，它们需要大量时间来加载。您要做的是只启动程序一次，然后为其提供大量文本。

你如何做到这一点取决于你在做什么：

*   您可以将 -filelist 传递给命令行版本以一次处理一大堆文件。
*   您可以让一个 StanfordCoreNLP 对象运行，然后向其发送文件并使用 API 取回输出。
*   根据您需要的 NLP 处理，您还可以通过不加载不使用的模型来加快启动速度。请参阅“注释器”属性。

**2016 年更新：**现在在文档页面[了解内存和时间使用情况上有更多信息](http://stanfordnlp.github.io/CoreNLP/memory-time.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-01T19:17:11.053

克里斯托弗是正确的，这是解决方案之一：

```
import java.util.Properties;
import edu.stanford.nlp.pipeline.Annotation;
import edu.stanford.nlp.pipeline.StanfordCoreNLP;

public class SentimentAnalyzer {
    private StanfordCoreNLP pipeline;

    public void initializeCoreNLP() { 
        Properties props = new Properties();
        props.put("annotators", "tokenize, ssplit, pos, lemma, ner, parse, sentiment");
        pipeline = new StanfordCoreNLP(props);
    }

    public T getSentiment(String text) {
        ...
        Annotation annotation= new Annotation(text);
        pipeline.annotate(annotation);
        ...
        return ...
    }

    public static void main(String[] argv) {
        SentimentAnalyzer sentimentAnalyzer = new SentimentAnalyzer();
        sentimentAnalyzer.initializeCoreNLP(); // run this only once
        T t = sentimentAnalyzer.getSentiment("put text here..."); // run this multiple times
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T21:27:32.697

要查看如何使用 API，请查看下载的 Core NLP 文件夹中的示例代码“NERDemo.java”。

# jquery - 根据数量动态布局固定大小的 div

> ID：11219395
> 
> 赞同：2
> 
> 时间：2012-06-27T04:27:05.063
> 
> 标签：jquery, html, css

对你来说有点谜......

我有一个 730px 宽的自动高度 div。在这里面我有一些较小的 div 164px X 261px。

这些将被动态拉入模板，因此我可以有 1 个，或者我可以有 18 个，或者为了这个练习，我可以有 1000 个或介于两者之间的任何值。

我需要将它们分开，以便在每条线上，每条线之间的距离相等。很简单，如果我们最多处理 4 个，我可以执行以下操作：

```
var totalWidth = $('.bigDiv .smallerDivs').length * $('.bigDiv .smallerDivs').width();
var margin = ($('.bigDiv').width - totalWidth) / ($('.bigDiv .smallerDivs').length * 2);
$('.bigDiv .smallerDivs').css('margin-left': margin , 'margin-right': margin); 
```

但是，当有 5 个时。我希望顶行有 3 个，底部有 2 个。或者如果我有 7 个，我希望 4 在顶部 3 在底部。如果有 11 个，我希望顶部有 4 个，中间有 4 个，下面有 3 个等等，等等，每行根据有多少小盒子都很好地证明了这一点。

任何人都可以建议我可以解决这个问题的一个很好的干净方式吗？

![在此处输入图像描述](../Images/0e985ff6465225bcd5bcf902b003b837.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:32:35.433

我的回答基本上是基于[在这篇文章的回答中找到](https://stackoverflow.com/questions/2821006/find-if-variable-is-divisible-by-2)的逻辑。

总体概念是，您可以评估 div 的数量可以被多少，然后将一个类附加到较大的 div，您可以使用它来分隔内部 div。

```
$(document).ready(function(){
  function nos_div_eval(val,container,inner){
    var nosDivs = $(inner).length;
     for(var i=val; i>1; i--){
      if (nosDivs % i === 0) {
        $(container).addClass('div_by_' + i);
        break;
      } else {
       $(container).addClass('prime');
      }  
     }
   }

   nos_div_eval(10, '.bigDiv', '.smallerDivs');

});​ 
```

`.div_by_3`这将评估小 div 的数量，并查看它是否可以被 2 到 10 之间的任何数字整除。如果匹配，它会在external中添加一个类`<div>`。它将基于 2 到 10 之间的最大数添加一个类，它可以被整除。这样你就可以像这样设置你的样式：

```
.bigDiv.div_by_3 .smallerDivs {
   margin-right: 40px;
 }

 .bigDiv.div_by_4 .smallerDivs {
   margin-right: 20px;
  } 
```

您可以调整边距金额，以便让 div 分成您想要的行。

但是，如果较小的 div 的数量不能被 2 到 10 之间的数字整除，则此函数将添加一个名为“prime”的类，因为它很可能是质数。您可以为这些 div 添加一些任意边距值并接受发生的情况。

如果你真的想覆盖你的基础，你可以改变“i”的初始值 - 你可以将它设置为 31，这是平方小于 1000 的最大数字。我只是认为这会使 for 循环真正长。

[这个小提琴](http://jsfiddle.net/ZED6x/1/)演示了逻辑，尽管我对其进行了一些简化以使其更清晰。您可以添加`<div>`'s 并查看新的警报值。

编辑：好的，我不能独自离开，我已经回去并用三个参数让函数自己包装起来。第一个参数是您要检查的上限值，然后是容器元素，然后是内部元素。一定要包括“#”或“。” 取决于元素是否具有 ID 或类 - 这也适用于普通的 ol' 元素。

# php - php分形图像生成器，如stackoverflow的默认头像

> ID：11219397
> 
> 赞同：11
> 
> 时间：2012-06-27T04:27:32.127
> 
> 标签：php, image-processing

有没有像stackoverflow的默认头像这样的php分形图像生成库？我想将它用于像这个网站这样的默认头像。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T04:31:24.750

Stack Overflow 头像由[Gravatar](http://en.gravatar.com/)提供。默认图像不是分形 - 它是使用[Identicon](https://github.com/donpark/identicon)算法的变体生成的，该算法基本上只是使用网格中的几个简单几何组件将图像组合在一起。

有一个 Identicon 算法的 PHP 实现可用：http: [//sourceforge.net/projects/identicons/](http://sourceforge.net/projects/identicons/)

# php - Chrome Preview 的预设打印设置

> ID：11219400
> 
> 赞同：0
> 
> 时间：2012-06-27T04:27:46.893
> 
> 标签：php, css, google-chrome, printing

我想知道有没有办法将 Chrome 打印预览（使用 Ctr+P）中的“边距”设置预设为无？

我希望在收据纸上打印输出，因为它的宽度确实有限，所有打印输出都必须在打印之前将其边距设置为无。如果此设置可以以 CSS 或脚本为前缀，那对我的用户来说会很棒。

欢迎任何想法。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:05:50.793

是也不是，您可以禁用 chrome 的打印预览并将其设置为传统打印菜单的默认设置！

要禁用谷歌打印预览转到是和否，您可以禁用 chrome 的打印预览转到 about:flags，只需将其放在您的 google chrome 浏览器中。cntrl+F 输入打印并寻找禁用打印预览！

现在重新启动 chrome 浏览器（关闭所有窗口）并按 cntrl+p 单击首选项，然后选择功能，然后选择字母大小！进行更改，然后返回打印快捷方式并单击立即保存 cntrl+p，然后单击打印，完成！

# c# - 如何使用下拉列表验证结束日期必须大于开始日期

> ID：11219402
> 
> 赞同：0
> 
> 时间：2012-06-27T04:27:58.750
> 
> 标签：c#, javascript

我有两个下拉列表。在第一个下拉列表中我有开始年份，在第二个下拉列表中我有结束年份。我必须验证结束年份必须大于开始年份。我正在使用下拉列表。不是输入文本框。验证后，我必须将验证消息放在下拉列表中，而不是警告框。给我一个示例或一些与此相关的代码

感谢和问候斯里尼瓦斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:32:36.700

假设您正在使用 ASP.Net，您可以使用[CompareValidator](http://msdn.microsoft.com/en-us/library/db330ayw%28v=vs.71%29.aspx)

```
<asp:CompareValidator ID="cmpVal1" ControlToCompare="ddlStartDate" 
         ControlToValidate="ddlEndDate" Type="Date" Operator="GreaterThanEqual"   
         ErrorMessage="*Invalid Data" runat="server"></asp:CompareValidator> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-29T08:48:23.360

如果您正在使用 JavaScript，那么您可以将日期与简单的 if 条件进行比较

```
var startDate = document.getElementById("StartDate").value;
var endDate = document.getElementById("EndDate").value;

if ((Date.parse(startDate) <= Date.parse(endDate))) {
    alert("End date should be greater than Start date");
    document.getElementById("EndDate").value = "";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T04:35:22.503

尝试这样的事情。

```
<asp:CompareValidator ID="CompareValidatorDate" runat="server"
ControlToCompare="ddlDate1"
ControlToValidate="ddlDate2" Display="Dynamic"
ErrorMessage="date 2nd is must be grater than 1st "
Operator="LessThanEqual"
Type="Date" 
ValueToCompare="<%= ddlDate2.SelectedValue.ToShortString() %>"></asp:CompareValidator> 
```

# facebook - Facebook js sdk "/me/permissions" 没有返回访问令牌（js sdk / php sdk 冲突？）

> ID：11219407
> 
> 赞同：-1
> 
> 时间：2012-06-27T04:28:31.997
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, facebook-javascript-sdk

以下控制台记录“必须使用活动访问令牌来查询有关当前用户的信息。” 显然我的 js 没有从 php 获取访问令牌 - 我该如何纠正这个问题？下面的代码是 FB 在他们的博客上发布的内容的虚拟克隆： [https ://developers.facebook.com/blog/post/534/](https://developers.facebook.com/blog/post/534/)

```
<?php
$basePath = "/usr/lib/fb";

// Include the fb sdk
require 'fb/src/facebook.php';

// Create our Application instance
$facebook = new Facebook(array(
  'appId'  => '#####', // I do repeat this in fb.js so I can externalize it
  'secret' => '#####',
));

// See if there is a user from a cookie
$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>';
    $user = null;
  }
}

?>
<!DOCTYPE html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
  <body>
    <?php if ($user_profile) { ?>
      Your user profile is 
      <pre>            
        <?php print htmlspecialchars(print_r($user_profile, true)) ?>
      </pre> 
    <?php } else { ?>
      <fb:login-button></fb:login-button>
    <?php } ?>
    <div id="fb-root"></div>
    <script>               
      window.fbAsyncInit = function() {
        FB.init({
          appId: '<?php echo $facebook->getAppID() ?>', 
          cookie: true, 
          xfbml: true,
          oauth: true
        });
        FB.Event.subscribe('auth.login', function(response) {
          window.location.reload();
        });
        FB.Event.subscribe('auth.logout', function(response) {
          window.location.reload();
        });

        FB.api('/me/permissions', function (response) {
            console.log(response);
        } );

      };

      (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
          '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
      }());
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:51:08.230

您加载并启动了 fb sdk，但您需要对用户进行身份验证。
仅对于 js 身份验证，您需要使用[FB.login 方法](http://developers.facebook.com/docs/reference/javascript/FB.login/)，但如果您的 php 负责对用户进行身份验证，那么您只需调用[FB.getLoginStatus](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)，例如：

```
window.fbAsyncInit = function() {
    FB.init({
        appId: '<?php echo $facebook->getAppID() ?>', 
        cookie: true, 
        xfbml: true,
        oauth: true
    });
    FB.Event.subscribe('auth.login', function(response) {
        window.location.reload();
    });
    FB.Event.subscribe('auth.logout', function(response) {
        window.location.reload();
    });

    FB.getLoginStatus(function(response1) {
        if (response1.status === 'connected') {
            FB.api('/me/permissions', function(response2) {
                console.log(response2);
            });
        }
        else {
            // user is not logged in or not authorized with the app.
            // use a login button or FB.login
        }
    });
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:00:11.373

`me/permissions`即使用户没有授权您的应用程序，您也在打电话，

改为这样做，

```
<?php if ($user_profile): ?>
   FB.api('/me/permissions', function (response) {
      console.log(response);
   });
<?php endif; ?> 
```

# c# - 数据网格绑定到多重检查选择

> ID：11219409
> 
> 赞同：1
> 
> 时间：2012-06-27T04:28:48.823
> 
> 标签：c#, wpfdatagrid

[重新写了这个问题，以便更清楚地了解我正在尝试做什么]

希望有人可以帮助我，因为我已经追了几个小时了。试图掌握 WPF，因为 GUI 输出反映了我所寻找的不仅仅是 WinForms。

我有 3 个控件：

组合框

清单框

数据网格

我有一个数据表，其中设置了我需要查询结果的 3 个表之间的关系。这是我的 XAML。

```
 <xctk:CheckListBox DataContext="{Binding Path=NAME, UpdateSourceTrigger=PropertyChanged, Source={StaticResource _Regions__Terminal_ViewSource}}" ItemsSource="{Binding Source={StaticResource _Regions__Terminal_ViewSource}}" Margin="17,108,13,71" Name="clb_Terminals" SelectedItems="{Binding}" SelectedMemberPath="IsSelected" SelectedValue="{Binding Path=SelectedValue}" ValueMemberPath="Level" DisplayMemberPath="NAME" />
                        <Button Content="Refresh Forecast View" Height="48" HorizontalAlignment="Left" Margin="17,288,0,0" Name="button1" VerticalAlignment="Top" Width="220" />
                        <ComboBox DisplayMemberPath="GROUPNAME" Height="23" HorizontalAlignment="Left" ItemsSource="{Binding Source={StaticResource _Regions_ViewSource}}" Margin="22,52,0,0" Name="_Regions_ComboBox" SelectedValuePath="GROUPNUM" VerticalAlignment="Top" Width="215">
                            <ComboBox.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <VirtualizingStackPanel />
                                </ItemsPanelTemplate>
                            </ComboBox.ItemsPanel>
                        </ComboBox>
                    </Grid>
                </TabItem>
                <TabItem Header="Advanced" Name="tabItem2">
                    <Grid />
                </TabItem>
            </TabControl>
            <DataGrid AutoGenerateColumns="False" EnableRowVirtualization="True" Height="380" HorizontalAlignment="Left" ItemsSource="{Binding Source={StaticResource _Regions__Terminal_GridViewViewSource}}" Margin="297,15,0,0" Name="gridViewDataGrid" RowDetailsVisibilityMode="VisibleWhenSelected" VerticalAlignment="Top" Width="1148" DataContext="{Binding}" GridLinesVisibility="None">
                <DataGrid.Columns>
                    <DataGridTextColumn x:Name="sTATNUMColumn" Binding="{Binding Path=STATNUM}" Header="STATNUM" IsReadOnly="True" Width="*" />
                    <DataGridTextColumn x:Name="jDEColumn" Binding="{Binding Path=JDE}" Header="JDE" IsReadOnly="True" Width="*" />
                    <DataGridTextColumn x:Name="cONTRACTColumn" Binding="{Binding Path=CONTRACT}" Header="CONTRACT" IsReadOnly="True" Width="*" />
                    <DataGridTextColumn x:Name="sTATIONNAMEColumn" Binding="{Binding Path=STATIONNAME}" Header="STATIONNAME" IsReadOnly="True" Width="*" />
                    <DataGridTextColumn x:Name="tOWNColumn" Binding="{Binding Path=TOWN}" Header="TOWN" IsReadOnly="True" Width="*" />
                    <DataGridTextColumn x:Name="tRIPTIMEColumn" Binding="{Binding Path=TRIPTIME}" Header="TRIPTIME" IsReadOnly="True" Width="*" />
                    <DataGridTextColumn x:Name="tERMINALColumn" Binding="{Binding Path=TERMINAL}" Header="TERMINAL" IsReadOnly="True" Width="*" />
                    <DataGridTextColumn x:Name="mAXSIZEColumn" Binding="{Binding Path=MAXSIZE}" Header="MAXSIZE" IsReadOnly="True" Width="*" />
                </DataGrid.Columns>
            </DataGrid> 
```

到目前为止，这 3 个控件是通过父/子关系绑定的，但它并没有像我希望的那样工作，而且我有点超出我的深度。

我从组合框中选择我的区域，该组合框成功地用相应的终端填充了我的复选框。接下来我需要做的是，当检查每个终端时，它会过滤我的数据网格上的终端列，以仅显示与勾选的终端匹配的相应记录集。

我似乎也有一个奇怪的问题，默认组合框选择 (region1) 然后填充两个终端名称，在数据网格中没有返回任何内容。这我无法理解，因为即使没有过滤器，数据网格也会为其他所有选择返回结果。（检查了我的表格并测试了一些查询，但似乎不是表格数据）。

我在后面的代码中尝试了这个：

```
 public ObservableCollection<CheckedItem> List { get; set; }

    public class CheckedItem
    {
        public bool Selected { get; set; }
        public string Description { get; set; }
    } 
```

但是，我还需要定义复选框列表的 DisplayMemberName，否则它无法返回正确的值。这里的问题是我不能同时在 XAML 中使用项目列表。

无论如何，花了 6 个小时试图完成这项工作，却无可救药地迷失了方向。非常感谢任何方向或帮助。

使用 VS2010 WPF .net 4。

# html - IE9中滚动条的问题，位置：固定，溢出：自动

> ID：11219410
> 
> 赞同：13
> 
> 时间：2012-06-27T04:28:49.370
> 
> 标签：html, internet-explorer

在使用具有固定位置和溢出的 div 时，我在 IE9 上遇到了垂直滚动条的一个奇怪问题：在 div 上自动设置。

请参阅此处使用 IE9 的案例并将窗口高度缩小到较小的尺寸。

[http://bytiger.com/add/ie9_div_test.html](http://bytiger.com/add/ie9_div_test.html)

我可以确认这不会发生在 IE8 上。

有谁知道这方面的合理破解？我尝试将宽度设置为窗口宽度，但似乎它故意从 div 的大小中减去滚动条宽度。我想看看是否有一个解决方案不必计算这个常数或对其进行硬编码并将其添加回计算出的宽度。

干杯!

编辑： Jsfiddle 似乎没有表现出问题......所以这可能是一个关于可能发生的事情的重要提示。

[http://jsfiddle.net/dvAKW/](http://jsfiddle.net/dvAKW/)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-29T11:58:53.337

似乎 IE9 没有正确处理[box-sizing](http://www.w3schools.com/cssref/css3_pr_box-sizing.asp)属性 - 将其从“border-box”更改为“content-box”或将其留空将解决您的问题。

# php - 在 jQuery 文件上传 Blueimp(PHP) 中返回文件路径

> ID：11219411
> 
> 赞同：0
> 
> 时间：2012-06-27T04:28:58.267
> 
> 标签：php, jquery, forms, upload

我想要一个花哨的上传栏为我的网站，觉得[这个](http://blueimp.github.com/jQuery-File-Upload/)很酷我有不同的问题，但最终设法上传。

问题：如何获取上传文件的路径以插入到我的数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:36:14.743

在文件中的函数`handle_file_upload`中`upload.class.php`，之后`$file_path`，我添加了：

```
$url = 'YOUR PATH HERE/files/'.$file->name; 
```

然后我`$url`在我的数据库插入中包含了 var。这`YOUR PATH HERE`将是您获取`/server/php/files/`目录的任何结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T04:36:19.913

无法获取文件路径，因为它存储在客户端计算机上（安全问题）。

您只能获取文件名。

编辑：尽管某些浏览器（IE）*可能会*为您提供您不能也不应该依赖它的路径。

# hardware - 了解 Tomasulo 算法

> ID：11219418
> 
> 赞同：5
> 
> 时间：2012-06-27T04:29:42.337
> 
> 标签：hardware, computer-science, computer-architecture

所以我试图理解用于乱序指令执行的 Tomasulo 算法。这是我到目前为止所得到的：

*   指令按顺序取出并存储在指令队列中。

*   寄存器重命名发生在接下来的某个地方......？据我了解，这是通过给寄存器贴标签来避免 WAR/WAW 危险。假设您有 add r1,r2,r3 (1) add r3,r5,r6 (2) 您有 WAR 危险，需要确保指令 (1) 在将其添加到 r1 之前读取 r3 的旧值。所以我猜在指令队列（？）中，硬件会重命名寄存器，即 add r1,r2,r3#1 add r3#2,r5,r6 或类似的东西。

*   向预订站发出指示。据我了解，每个功能单元都有自己的一套预约站。但是，当适当标记的操作数在公共数据总线上可用时，它是否类似于该功能单元执行的指令队列（FIFO）？

*   由于指令可以以任意顺序（无序）完成，并且更多指令可以不断出现......是否存在公共数据总线在更多指令进入之前更新寄存器文件的阶段？我听说使用了重新排序缓冲区，它基本上按顺序对指令进行排序（这必须意味着指令具有某种标签），然后将寄存器结果提交回寄存器文件。

我感到困惑的是寄存器重命名的实现，以及保留站的结构。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T22:30:41.847

Tomasulo 的算法实际上与任何特定硬件无关，事实上，在真实机器中，寄存器重命名通常发生在指令插入指令队列之前。让我们了解几个基本点。首先，程序中表达的寄存器是逻辑寄存器。其次，实际的硬件寄存器称为物理寄存器。Tomasulo 的算法只是一种将逻辑寄存器映射到物理寄存器的机制。在真机中，一般有两个表将逻辑寄存器映射到物理寄存器。一个在重命名阶段，一个在提交阶段。物理寄存器也必须比逻辑寄存器多。它基本上是这样工作的：

1.  对于每个逻辑输入，在重命名阶段映射表中查找以找出当前保存该逻辑寄存器值的物理寄存器。
2.  对于每个逻辑输出，找到一个未使用的物理寄存器并将输出映射到它。更新重命名阶段映射表。如果没有可用的物理寄存器，请等到有一个可用。
3.  在提交阶段，当一条指令被提交时，用新的映射覆盖指令逻辑输出的旧逻辑到物理映射。作为旧映射一部分的空闲物理寄存器。
4.  如果出现错误预测（或管道中的任何类型的 squash），则提交阶段的表会覆盖重命名阶段的表，并且介于两者之间的管道中的所有内容都会被吹走。

关于保留站的部分实际上是乱序流水线的特定实现，并且本质上与物理寄存器一起出现。有很多机器并没有真正的预订站概念。

Hennessy 和 Patterson 的计算机体系结构书籍是这类东西的标准教科书。我试图尽可能简单地解释这一点，但实际上有成千上万的优化这些东西的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T13:57:31.880

1.  Tomasulo 算法与重新排序缓冲区无关。Tomasulo 算法的目的是启用乱序执行，而重新排序缓冲区的动机是实现精确中断。

2.  通用**寄存器重命名**方案提供了比 ISA 需要的更多的物理寄存器。在这种情况下，在将指令送入指令队列之前，其架构寄存器的名称（例如 r5）已被修改为物理寄存器（例如 p19）。然而，Tomasulo 算法使用另一种方法，其中指令的寄存器实际上被“重命名”为零件的编号（零件可以是保留站中的单个插槽/条目或任何寄存器）。

您可以在此幻灯片中了解更多详细信息：

[http://www.slideshare.net/onesuper/understanding-tomasolu-algorithm](http://www.slideshare.net/onesuper/understanding-tomasolu-algorithm)

# iphone - 在 Core Data 中添加对象

> ID：11219432
> 
> 赞同：0
> 
> 时间：2012-06-27T04:31:29.553
> 
> 标签：iphone, core-data

我正在尝试熟悉 Core Data 并让 Xcode 为我创建 NSManagedObject 的子类。一个是 AddressAnnotation，它只包含一些关于位置的信息，如街道、邮编、地址等。另一个是：

```
Map : NSManagedObject
@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSSet *locations;
- (void)addLocationsObject:(AddressAnnotation *)value;
- (void)removeLocationsObject:(AddressAnnotation *)value;
- (void)addLocations:(NSSet *)values;
- (void)removeLocations:(NSSet *)values; 
```

当我想向地图添加位置时，我会：

```
- (void)insertLocationIntoMap:(Map *)map {  
    [map addLocationsObject:self.address]; 
```

我 NSLogged Map 对象和地址对象，两者都有值。当我尝试将对象添加到现有的 Map 对象时，它似乎没有被添加。记录的该地图的输出是：

```
<Map: 0x7087480> (entity: Map; id: 0x7084ff0 <x-coredata://8D6D7849-E7EC-48A3-BA95-C082D09E5D6D/Map/p1> ; data: {
    locations = "<relationship fault: 0x768e4e0 'locations'>";
    name = asdf;
}) 
```

如果我创建一个新地图，然后调用 insertLocationIntoMap:，AddressAnnotation 对象会被添加。记录的地图是：

```
<Map: 0x767dee0> (entity: Map; id: 0x767d2d0 <x-coredata://8D6D7849-E7EC-48A3-BA95-C082D09E5D6D/Map/p5> ; data: {
    locations =     (
    );
    name = asdfasdf;
}) 
```

在向 Maps 对象添加 AddressAnnotation 时我做错了什么吗？当我不使用 NSManagedObject 的子类并且只是在任何地方使用 setValue:forKey: 时，这是有效的，但我认为在我习惯之后这会更直观。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:51:03.970

第一个日志显示关系的错误。这并没有说明哪些对象处于该关系中。您还应该记录您的`AddressAnnotation.map`关系。是一对多还是多对多的关系？

最后，如果您想打印出哪些对象是相关的，您应该使用获取请求来获取位置关系中的对象（`@"self.map == %@"`对于`AddressAnnotation`带有 %@ 的实体替换为`Map`您感兴趣的实例）。

# android - 跳过连接到 USB 附件的权限

> ID：11219435
> 
> 赞同：2
> 
> 时间：2012-06-27T04:31:42.907
> 
> 标签：android, usb

我不想获得连接到 USB 附件的权限，因为我想连接到特定的 USB 附件。是否可以 。正如我在 android.com 上所读到的那样

> 注意：如果您的应用程序使用意图过滤器在连接附件时发现它们，那么如果用户允许您的应用程序处理意图，它会自动获得许可。如果没有，>您必须在连接到附件之前在您的应用程序中明确请求权限。

那么有没有可能这样做。请帮忙。

* * *

谢谢高拉夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T05:10:12.833

您可以使用以下代码侦听意图：

```
UsbAccessory accessory = (UsbAccessory) intent.getParcelableExtra(UsbManager.EXTRA_ACCESSORY); 
```

但是，清单中必须包含以下信息：

[http://developer.android.com/guide/topics/connectivity/usb/accessory.html#manifest](http://developer.android.com/guide/topics/connectivity/usb/accessory.html#manifest)

这将允许您根据许多属性过滤设备。

# mysql - mySQL 到 PostgreSQL 连接名字和姓氏以进行名称搜索（Ruby on Rails）

> ID：11219436
> 
> 赞同：4
> 
> 时间：2012-06-27T04:31:43.767
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, postgresql

嘿，我想弄清楚如何将在 mySQL 中工作的语句转换为 PostgreSQL，并且好奇是否有人知道解决方案。

这是在 mySQL 中有效的语句：

```
def self.by_name(keywords)
    if keywords
        find(:all, :conditions => ["concat(first_name," ",last_name) like?", "%#{keywords}%"])

    end
  end 
```

这是我在[这个网站](http://archives.postgresql.org/pgsql-sql/2000-07/msg00294.php)上发现的基本上有类似问题的声明，但它对我不起作用，例如，如果我进行像 Contact.by_name("Bobby") 之类的搜索，则没有结果。

```
def self.by_name(keywords)
    if keywords
        find(:all, :conditions => ["textcat(textcat(first_name,text ' '),last_name) like?", "%#{keywords}%"])
    end
  end 
```

我的想法是，我可以搜索“Bobby”、“Fishcer”或“Bobby Fischer”，它会匹配具有该名字、姓氏或同时具有名字和姓氏的任何人。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T05:12:05.543

您可以使用[连接运算符 ( `||`)](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-SQL)将所有内容粘贴在一起：

```
:conditions => [
  "coalesce(first_name, '') || ' ' || coalesce(last_name, '') ilike '%' || ? || '%'",
  keywords
] 
```

您还会注意到我从字符串插值 , 切换`"%#{keywords}%"`到 SQL 中的字符串连接`'%' || ? || '%'`, 来构建搜索模式；这样做可以避免注入和引用问题。我也切换到了，[`ilike`](http://www.postgresql.org/docs/current/interactive/functions-matching.html#FUNCTIONS-LIKE)因为您可能想要不区分大小写的搜索。

# ios4 - 在我的 iphone 应用程序中加载播客目录

> ID：11219438
> 
> 赞同：-1
> 
> 时间：2012-06-27T04:31:47.340
> 
> 标签：ios4, ios5, podcast

我正在创建一个在我的 iphone 应用程序中加载 iTunes 播客目录的应用程序。

用户可以看到它并将其下载到应用程序。

我试图找到我们如何将 iTunes 播客目录加载到我们的应用程序？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:05:26.357

我找到了一种方法。

Apple 提供了这样的 api 来从播客中获取数据。

我们可以从 api 解析数据并将其加载到应用程序。

然后你就可以下载了。

谢谢

# javascript - 我使用书签来加载 js 文件

> ID：11219439
> 
> 赞同：0
> 
> 时间：2012-06-27T04:32:03.063
> 
> 标签：javascript, extjs

我正在使用书签来加载`js`文件。

我面临的问题是我的书签没有检查`js`文件中的更新。

```
javascript:(function(){
    document.body.appendChild(document.createElement('script'))
        .src='http://mysite.com/pet.js';
})(); 
```

我必须在书签中添加一些东西吗？还是我需要添加一个`js`文件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T04:37:12.990

浏览器可能正在从缓存中加载它，以便摆脱缓存问题。

```
javascript:(function(){
    document.body.appendChild(document.createElement('script'))
        .src='http://mysite.com/pet.js?'+Math.random();
})(); 
```

# sqlite - SQLite LEFT JOIN & WHERE 子句混淆

> ID：11219440
> 
> 赞同：7
> 
> 时间：2012-06-27T04:32:23.210
> 
> 标签：sqlite, left-join, where-clause

我有两个表：

**表 1：问题**：

```
QuestionId NUMERIC
Title      TEXT 
```

**问题表中的测试数据：**

```
QuestionId     Title
1              What is your name?
2              What is your age? 
```

**表 2：答案：**

```
AnswerId     NUMERIC
PersonId     NUMERIC
QuestionId   NUMERIC
Answer       TEXT 
```

如果**答案表中没有数据，**则下面的**查询将返回正确的结果（2 行）**：

```
SELECT  q.QuestionId, q.Title, a.Answer
FROM    Questions q
    LEFT OUTER JOIN Answers a ON q.QuestionId = a.QuestionId
WHERE    a.PersonId = 2 OR a.PersonId IS null 
```

**但是，如果我在答案表中有例如 1 条记录，例如**：

```
AnswerId     1
PersonId     1
QuestionId   1
Answer       'My Name is Yaqub' 
```

下面的查询工作正常：

```
SELECT  q.QuestionId, q.Title, a.Answer
FROM    Questions q
    LEFT OUTER JOIN Answers a ON q.QuestionId = a.QuestionId
WHERE    a.PersonId = 1 OR a.PersonId IS null 
```

**但是这个查询只返回一行**：

```
SELECT  q.QuestionId, q.Title, a.Answer
FROM    Questions q
    LEFT OUTER JOIN Answers a ON q.QuestionId = a.QuestionId
WHERE    a.PersonId = 2 OR a.PersonId IS null 
```

上面的查询只返回一行是错误的，因为我在问题表中有两个问题，上面的查询应该返回它们，因为条件“OR a.PersonId IS null”。

**为什么它不返回两行？**

**期望的结果：**

我想获取所有问题（2 行）和 PersonId 具有某些价值的答案，例如 Person 2 的两行，因为我在答案表中没有他的数据。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T05:30:42.793

**我找到了解决方案：**

```
SELECT q.QuestionId, q.Title, a.Answer
FROM Questions q
 LEFT OUTER JOIN Answers a ON q.QuestionId = a.QuestionId AND 
(a.PersonId = 2 OR a.PersonId IS null) 
```

此查询将列出所有问题，而 WHERE 子句将过滤掉 PersonID 具有特定值或为空的那些答案。因此，只要有问题的答案，我就不会得到 PersonID 的 NULL 值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-15T03:57:24.783

You can do it just like this:

```
SELECT q.QuestionId, q.Title, a.Answer
FROM Questions q
 LEFT OUTER JOIN Answers a ON q.QuestionId = a.QuestionId AND 
a.PersonId = 2 
```

The query still returns records with PersonId = null because of outer join.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T04:39:16.853

这是您在`where`应用之前执行加入时所拥有的：

```
QuestionID    AnswerID    PersonID
1             1           1
2             null        null 
```

实际上， questions 表中只有一条记录匹配`(PersonID = 2 or PersonID is null)`，因此您应该期望只有一行。

你的意思是放

```
a.PersonId = 1 OR a.PersonId IS null 
```

反而？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T05:15:40.697

@Yaqub。如果您想显示所有问题，那么我认为您需要应用 RIGHT OUTER JOIN 来替换 Left Outer Join，以便解决所有问题。谢谢

# sql-server - SSIS - 包配置 - 环境变量

> ID：11219441
> 
> 赞同：0
> 
> 时间：2012-06-27T04:32:26.733
> 
> 标签：sql-server, tsql, deployment, ssis, package

在我提出主要问题之前，我想澄清几件事。

如果您创建超过 1 个包（相同的源/目标），您可以只使用一个包配置文件吗？

-> 假设我使用相同的源/目标创建了 10 个包。我可以只创建一个 XML 包配置并使用该 xml 文件来编辑源和目标的路径吗？还是我需要为每个包创建 1 个包配置文件？

假设您有 50 个包要从开发服务器移动到生产服务器……在这种情况下，我可以在哪里存储包配置文件？

-> 我还没有为任何包创建包配置文件。

->我应该为所有 50 个包创建一个 XML 包配置文件吗？

-> 如果没有，我应该采取什么步骤？

-> 我读到环境变量在这种情况下很有用。

->**为了创建环境变量，我需要采取哪些步骤？**如果可能，ELI5。

-> 我读到它只允许存储一个属性...我是否必须为源、目标、凭据等创建多个环境变量？

-> 我[在 Evn Var 上阅读了本教程，](http://www.mssqltips.com/sqlservertip/1405/sql-server-integration-services-ssis-package-configuration/)但没有清楚地理解在这种情况下使用环境变量的过程和好处（超过 1 个包，将包从一个环境移动到另一个环境等）。

感谢您的帮助。尽量不要对这篇文章投反对票，因为我已经做过研究，但只是不理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:12:18.320

1.每个包的包配置文件？

```
You can reuse the same configuration file in multiple SSIS packages .
But you should make sure that you have the same name and the number of connection
manager and variables  defined in all the packages .If you have different names
and numbers   then you have to create different config files .Creating different
config files for each environment is a better option because you just need to change 
the connection string to point to a particular sql server instance but not suitable
for large number of ssis packages . 
```

2.环境变量

```
In case you are going with Enviroment variable then you need to have same config
file for all the SSIS packages .Environment variable should be present in all your 
environments (test ,dev,prod).you need to have permission to create these variables.
Package Configuration file per Package.The problem with environment variable is it 
each variable can store only one property.So if more than one property needs to 
stored then you need to have different variables for it . 
```

有关更多信息，请阅读本[白皮书](http://msdn.microsoft.com/en-us/library/cc895212.aspx)

# winforms - 在一个 userControl 资源中组合不同的样式标签

> ID：11219443
> 
> 赞同：0
> 
> 时间：2012-06-27T04:32:50.300
> 
> 标签：winforms, wpf-controls

我正在从 2 个 xaml 文件构建一个 userControl，其中一个从窗口类继承，另一个从 userControl 类继承，我这样做的原因是将 WPF 嵌入到 winForm 中。我将两个文件中的资源元素合并到新的 xaml 文件资源元素中，因此我有两个样式元素，如下所示（第一个来自 userControl xaml，第二个来自 window xaml）：

```
<UserControl.Resources>

        <Style x:Key="NodeBorderStyle" TargetType="{x:Type Border}">
                <Setter Property="Background" Value="LightGreen" />
                <Setter Property="BorderBrush" Value="Gray" />
                <Setter Property="BorderThickness" Value="3" />
                <Setter Property="BorderBrush" Value="Gray" />
                <Setter Property="Height" Value="{Binding Path=NodeHeight, Mode=OneTime}" />
                <Setter Property="Padding" Value="4" />
                <Setter Property="TextElement.FontWeight" Value="Normal" />
                <Setter Property="Width" Value="{Binding Path=NodeWidth, Mode=OneTime}" />
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=HasCircularDependency, Mode=OneTime}" Value="True">
                        <Setter Property="Background" Value="Red" />
                        <Setter Property="BorderBrush" Value="Black" />
                        <Setter Property="TextElement.FontWeight" Value="Bold" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>

        <Style TargetType="{x:Type local:NodeConnector}">
            <Setter Property="ArrowLength" Value="12" />
            <Setter Property="Stroke" Value="Gray" />
            <Setter Property="StrokeThickness" Value="3" />
            <Style.Triggers>
                <Trigger Property="IsPartOfCircularDependency" Value="True">
                    <Setter Property="Stroke" Value="DarkRed" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources> 
```

一次只有一种样式有效，而不是两种样式都有效的问题，我该如何解决这个问题？

**编辑**第一个样式是样式节点，第二个样式是这些节点之间的样式连接器。

# jpa - 如何使用 JPA 继承

> ID：11219447
> 
> 赞同：0
> 
> 时间：2012-06-27T04:33:13.960
> 
> 标签：jpa

我有两个类，一个是非实体类，假设 A 在所有实体类中都有公共字段，另一个是扩展实体类的实体类。我定义这些类的方式如下。

```
public class A{
     private Date startDate;
     private Date endDate;
     //setters and getters for these fields
     }

@Entity
@Table(name="some table name")
public class B extends A{
     private long id;
     private String duration;
public B(){

    }
public B(Date startDate,Date endDate,String duration){
     //setter methods for the fields inside the constructor             
    }
    //Setter ,Getter methods for the fields in B class
   } 
```

现在的问题是，当我运行应用程序时，它仅使用 B 类中定义的字段创建表。该表没有超类（A 类）中的字段。我做错了什么......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T04:51:33.583

从非实体类继承不继承持久属性。在 JPA (2.0) 规范中，这是用以下词语来说明的：

> 非实体超类仅用于行为继承。非实体超类的状态不是持久的。从非实体超类继承的任何状态在继承的实体类中都是非持久的。

如果您的目标是仅继承持久性映射，那么使用[MappedSuperClass](http://docs.oracle.com/javaee/5/api/javax/persistence/MappedSuperclass.html)将满足您的目标。想法是，只有持久映射被继承，并且可能被重用到扩展相同映射超类的多个实体。从持久性的角度来看，映射的超类 A 和扩展实体 B 之间没有关系，只是重用持久性映射。如果您的映射在其他方面是合理的，那么只需将`@MappedSuperClass`注释添加到 class `A`。

如果你想在查询和关系中使用超类 A，那么它应该是实体（映射的超类将不起作用）。开始的好方法是阅读 Java EE[教程](http://docs.oracle.com/javaee/5/tutorial/doc/bnbqa.html#bnbqn)中的相应部分。

# mysql - 使用 3 个连接表进行 SQL 排序

> ID：11219450
> 
> 赞同：0
> 
> 时间：2012-06-27T04:33:49.570
> 
> 标签：mysql, sql

我有这三张桌子

```
people
============
id, name 
```

,

```
surveys
============
id, org_id 
```

和

```
answer_sheets
============
id, person_id, survey_id, answer, date_answered 
```

*   `person_id`and是来自and`survey_id`的外键`people.id``surveys.id`

现在，我想做的是`people`根据最新的排序`answer_sheets.date_answered`（我们可以得出一个`surveys`AND`people`行可以有很多`answer_sheets`）给定`surveys.org_id`

比如说我们有桌子

```
people  
============
id  name  
1   Person1  
2   Person2  
3   Person3  
4   Person4  
5   Person5  

surveys
============
id  org_id  
1   1  
2   1
3   2
4   2

answer_sheets  
=============
id  person_id   survey_id   answer  date_answered  
1   1           1           string  JUN 13  
2   2           1           string  JUN 15  
3   3           2           string  JUN 17  
4   2           2           string  JUN 18  
5   1           2           string  JUN 19  
6   3           3           string  JUN 20  
7   2           3           string  JUN 25  
8   4           3           string  JUN 27  
9   4           4           string  JUN 27 
```

我想根据一行最新的调查`people`按顺序订购= 1`ASC``people``answer_sheets.date_answered``org_id`

输出将是

```
=============
id  name      last_date_answered
4   Person4   NIL
5   Person5   NIL
3   Person3   JUN 17
2   Person2   JUN 18
1   Person1   JUN 19 
```

您可以观察到`people`with `id`s 4 和 5 没有`answer_sheet`in `surveys`with `org_id`= 1 ，但它们应该包含在列表中。问题：什么必须是适当的 SQL 查询？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:35:26.603

这个查询更简单：

```
SELECT
    p.id,
    p.name,
    t.last_date_answered
FROM people p
LEFT JOIN (
    SELECT
        a.person_id,
        MAX(a.date_answered) as last_date_answered
    FROM answer_sheets a
    INNER JOIN surveys s ON a.survey_id = s.id
    WHERE s.org_id = 1
    GROUP BY a.person_id) t ON p.id = t.person_id
ORDER BY t.last_date_answered; 
```

`UNION`也很强大，但这里不`LEFT JOIN`那么冗长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:40:56.783

此查询仍然有效，但其他答案更好。小提琴仍然有效

[http://sqlfiddle.com/#!2/3aac2/1/0](http://sqlfiddle.com/#!2/3aac2/1/0)

~~这是我在这个夜晚能做的最好的事情。是的，它很丑（非常非常丑），但它提供了所需的输出。我真的不喜欢我必须使用一个 union 和 an in，但是现在是深夜，所以我可能错过了一些东西。请注意，如果这是 /is/ 作业，您可能希望远离此解决方案。如果不是，底部有一个小提琴可以帮助其他人帮助你~~

 ~~```
SELECT people.id,
   people.name,
   MAX(date_answered) AS date_answered
FROM people
LEFT OUTER JOIN answer_sheets ON answer_sheets.person_id = people.id
INNER JOIN surveys ON surveys.id = answer_sheets.survey_id
GROUP BY people.id,
     surveys.org_id HAVING surveys.org_id = 1
UNION
SELECT ALL people.id,
       people.name,
       NULL AS date_answered
FROM people
WHERE people.id NOT IN
    (SELECT person_id
     FROM answer_sheets
     INNER JOIN surveys ON answer_sheets.survey_id = surveys.id
     WHERE surveys.org_id = 1)
ORDER BY date_answered 
```~~ 

使用以下解决方案之一，在子查询上左连接更好。小提琴仍然有效

如果有人想对此进行改进，请随时使用这个小提琴： [http ://sqlfiddle.com/#!2/3aac2/1/0](http://sqlfiddle.com/#!2/3aac2/1/0)

 ~~* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T13:13:10.467

```
SELECT
  p.id, p.name, MAX(a.date_answered)
FROM
  people p
LEFT JOIN
  (SELECT * FROM 
    answer_sheets a
  INNER JOIN
    surveys S ON a.survey_id = s.id
  WHERE S.orgid = 1) a
ON
  p.id = a.personID
GROUP BY
  p.id, p.name
ORDER BY MAX(date_answered) ASC 
```

这是最优化的答案。感谢我的朋友 Sheila Ruth Fausto。~~

# java - 空列表解组 Java 对象

> ID：11219454
> 
> 赞同：2
> 
> 时间：2012-06-27T04:34:33.127
> 
> 标签：java, xml, collections, jaxb, unmarshalling

我正在尝试使用 JAXB Unmarshaller 将 XML 文档生成到 Java 对象中。在XML文档中如果有元素要呈现给类List的类Java对象，但是结果对象List是空的，虽然it元素中有内容，

是否因为 XML 文档中的元素不如 Java 上的 class 表示那么完整，使得 JAXB 无法将 XML 文档解析为 Class 表示？

有没有人可以帮助我，为什么会发生，以及解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:17:17.183

在不了解您的对象模型或 XML 文档的情况下，很难说出解组操作无法正常工作的原因。下面我有一个包含包装和未包装集合的示例，可以帮助您找出用例中可能出现的问题：

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root>
    <item>A</item>
    <item>B</item>
    <item>C</item>
    <items>
        <item>D</item>
        <item>E</item>
        <item>F</item>
    </items>
</root> 
```

**根**

对于被包装的集合，我们将使用`@XmlElementWrapper`注解来指定包装元素。

```
package forum11219454;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
public class Root {

    private List<String> list;
    private List<String> nestedList;

    @XmlElement(name="item")
    public List<String> getList() {
        return list;
    }

    public void setList(List<String> list) {
        this.list = list;
    }

    @XmlElementWrapper(name="items")
    @XmlElement(name="item")
    public List<String> getNestedList() {
        return nestedList;
    }

    public void setNestedList(List<String> nestedList) {
        this.nestedList = nestedList;
    }

} 
```

**演示**

```
package forum11219454;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum11219454/input.xml");
        Root root = (Root) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html](http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html)

# node.js - 部署到 Heroku 时，这个 Backbone/node/express 400 Bad Request 错误是怎么回事？

> ID：11219455
> 
> 赞同：3
> 
> 时间：2012-06-27T04:34:44.577
> 
> 标签：node.js, heroku, backbone.js, xmlhttprequest, express

`400 Bad Request`将我的 Backbone.js/node.js 应用程序部署到 Heroku 时出现错误。

从日志中：

```
Error: Bad Request
    at Object.error (/app/node_modules/express/node_modules/connect/lib/utils.js:42:13)
    at IncomingMessage.<anonymous> (/app/node_modules/express/node_modules/connect/lib/middleware/json.js:57:73)
    at IncomingMessage.emit (events.js:64:17)
    at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:130:23)
    at Socket.ondata (http.js:1506:22)
    at TCP.onread (net.js:374:27) 
```

从 Chrome devtools 的网络选项卡：

![在此处输入图像描述](../Images/80cefca0059cddf05fd95ed7233d0d1e.png)

运行时不会出现该错误`localhost`。

![在此处输入图像描述](../Images/21a6115bed5ebd0d1e2687f1fa0affab.png)

有趣的是，直接访问 URL 可以正常工作。手动`jQuery.ajax()`调用也可以正常工作。此`Backbone.sync`调用是资源失败的唯一实例，但它始终失败。

部署到 Heroku 时，这个 Backbone/node/express 400 Bad Request 错误是怎么回事？我的猜测可能与代理/路由器工件有关，例如`x-forwarded-for`但此时我无法判断错误是在 Backbone、express 还是 Heroku 级别。

骨干网请求标头（400 错误请求）

```
GET /services HTTP/1.1
Host: karmr.herokuapp.com
Connection: keep-alive
Cache-Control: max-age=0
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1082.0 Safari/536.5
Content-Type: application/json
Accept: application/json, text/javascript, */*; q=0.01
Referer: http://karmr.herokuapp.com/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

HTTP/1.1 400 Bad Request
Content-Type: text/plain
X-Powered-By: Express
Content-Length: 420
Connection: keep-alive 
```

直接`GET`（200 OK）：

```
GET /services HTTP/1.1
Host: karmr.herokuapp.com
Connection: keep-alive
Cache-Control: max-age=0
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1082.0 Safari/536.5
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

HTTP/1.1 200 OK
Content-Type: text/html; charset=utf-8
X-Powered-By: Express
Content-Length: 84
Connection: keep-alive 
```

以下是标头差异（此处为[较大版本](https://i.stack.imgur.com/61jsU.jpg)）：

![在此处输入图像描述](../Images/87901d0d23034ebf56c1277ddbb1c05a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T00:40:03.273

我不知道你是否尝试过这个，但是当从你的服务器发送响应而不是使用普通的旧

`response.send(response to send);`

尝试使用

```
response.json(response to send); 
```

反而。

我出现了同样的错误，并且在我的一生中找不到解决方案，切换它后立即起作用。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T11:50:18.363

我建议您进行两条调查：

1.  **URL 没有响应 JSON**：检查这个 URL 响应了什么以及为什么它没有响应正确的 JSON。如果您看到*客户端*期望的标头`application/json, text/javascript, */*; q=0.01`并且 URL 正在响应`text/plain`。

2.  **有一个 CROSS-Domain 问题**：检查[有关 CROSS-Domain 的所有问题](https://stackoverflow.com/questions/tagged/cross-domain)

# mysql - 在mysql中搜索用空值替换空间

> ID：11219458
> 
> 赞同：0
> 
> 时间：2012-06-27T04:34:54.657
> 
> 标签：mysql, sql

我需要一个查询来搜索电话号码。简单的搜索很好，但我有以下条件。

```
eg : I want to search a number   : 0431248892 
```

但是当用户输入数据时，数据可以以任何格式存储在数据库中。

例如：

```
 04 3124 8892
             0431248892
         0431 2488 92 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T04:39:37.883

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)

```
SELECT * FROM tablename WHERE REPLACE(columnname,' ','') = '0431248892' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T04:37:19.433

考虑使用 MySql 正则表达式：

*   [http://dev.mysql.com/doc/refman/5.1/en/regexp.html](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)

*   [http://www.go4expert.com/forums/showthread.php?t=2337](http://www.go4expert.com/forums/showthread.php?t=2337)

# ruby-on-rails - 使用取决于 URL 参数的 :notice 呈现操作

> ID：11219460
> 
> 赞同：9
> 
> 时间：2012-06-27T04:34:57.140
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个动作“批准”，它呈现一个视图，该视图显示来自模型（类）的一些内容。`accept`在视图中，我有一个使用 URL 参数 (:id)调用的 link_to 。操作完成后`accept`（将批准设置为真），我想`approval`再次呈现一条消息（“已保存！”）。但是，与静态登录页面不同，批准操作在第一次调用时需要一个参数。第二次渲染时，会发生运行时错误（显然）。`approval`使用 Flash 通知进行呼叫的最佳方式是什么？

```
def approval
  @c = Class.find(params[:id])
end

def accept
  @c = Class.find(params[:id])
  @c.approve = true
  @c.save

  render 'approval', :notice => "Saved!"
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T04:40:14.157

将其更改`render 'approval', :notice => "Saved!"`为

```
flash[:notice] = "Saved!"
redirect_to :back 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-05T14:17:43.450

您可以使用`FlashHash#now`设置当前操作的通知

```
flash.now[:notice] = 'Saved !'
render 'approval' 
```

[http://api.rubyonrails.org/classes/ActionDispatch/Flash/FlashHash.html#method-i-now](http://api.rubyonrails.org/classes/ActionDispatch/Flash/FlashHash.html#method-i-now)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-24T02:46:37.060

摘自：[http ://www.perfectline.ee/blog/adding-flash-message-capability-to-your-render-calls-in-rails](http://www.perfectline.ee/blog/adding-flash-message-capability-to-your-render-calls-in-rails)

现在控制器中的常见模式如下所示：

```
if @foo.save
  redirect_to foos_path, :notice => "Foo saved"
else
  flash[:alert] = "Some errors occured"
  render :action => :new
end 
```

我想要做的是：

```
if @foo.save
  redirect_to foos_path, :notice => "Foo saved"
else
  render :action => :new, :alert => "Some errors occured"
end 
```

添加这个功能实际上非常简单——我们只需要创建一些扩展渲染函数的代码。下一段代码实际上扩展了包含重定向调用功能的模块。

```
module ActionController
  module Flash

    def render(*args)
      options = args.last.is_a?(Hash) ? args.last : {}

      if alert = options.delete(:alert)
        flash[:alert] = alert
      end

      if notice = options.delete(:notice)
        flash[:notice] = notice
      end

      if other = options.delete(:flash)
        flash.update(other)
      end

      super(*args)
    end

  end
end 
```

# mysql - 用户排名查询

> ID：11219469
> 
> 赞同：1
> 
> 时间：2012-06-27T04:35:41.177
> 
> 标签：mysql, sql

我有一张桌子：

```
**user**
id, name, points 
```

您能否建议我如何编写查询以按点获取用户位置。

例如：

```
1, 'David', 5
2, 'Dmitry', 10
3, 'Monica', 15
4, 'Jeniffer', 7
5, 'Andy', 12 
```

用户“Monica”根据积分获得第一名，“Jeniffer” - 第四名，依此类推。

谢谢你的建议！

**编辑**

我想要一个像这样的查询：

```
SELECT rank FROM user ... WHERE id = 3;
rank |
1

SELECT rank FROM user ... WHERE id = 5;
rank |
2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:38:43.577

```
select * from user order by points desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:04:39.170

请尝试以下方法：

```
SELECT
   id,rank, name,point 
FROM (
    SELECT id,
        name,
        point,  
        @rank := @rank + 1 as rank        
    FROM (
      SELECT * from tblA ORDER by point desc) As a, 
    (SELECT @rank := 0) AS vars      

) T 
WHERE id=1 
```

[http://sqlfiddle.com/#!2/581fc/9](http://sqlfiddle.com/#!2/581fc/9)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T06:16:55.520

试试这个：

```
select t.rank from (
      select @i := @i + 1 as rank, id, name, points
        from MyUser x,(SELECT @i:=0) foo 
    order by x.points desc) T
 where T.id = 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T04:40:07.090

使用这种方式：

```
SELECT * FROM `user` ORDER BY `points` DESC; 
```

如果你想单独获得第一名，你可以使用这个：

```
SELECT * FROM `user` ORDER BY `points` DESC LIMIT 1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T04:47:50.053

```
set @rank := 0;
select *, (@rank := @rank + 1) as rank
from (select * from user order by points desc) x
where id = 3 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T06:43:58.887

```
with cte as(
select *,RANK() over(order by points desc) as rnk from user_ 
)
select rnk [rank] from cte where id=3 
```

# asp.net-mvc - 如何在多层应用程序中使用 EF 4.3 数据迁移功能？

> ID：11219477
> 
> 赞同：0
> 
> 时间：2012-06-27T04:36:47.963
> 
> 标签：asp.net-mvc, entity-framework, poco, data-access-layer, entity-framework-migrations

我有 3 个项目：

ef 代码首先在数据访问层。和服务层，以及一个mvc项目。

当我更改 ef poco 类而不重新创建数据库时，如何使用数据迁移？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:40:20.967

您可以设置数据库初始化程序以在应用程序启动时使用迁移，如此[处](https://stackoverflow.com/questions/9281423/entity-framework-4-3-run-migrations-at-application-start/9284447#9284447)所述。

# jquery - 高级 CSS HTML 窗口大小调整

> ID：11219484
> 
> 赞同：2
> 
> 时间：2012-06-27T04:37:23.783
> 
> 标签：jquery, html, css

这个网站是如何达到这个效果的？

[http://demicreative.com](http://demicreative.com)

只需重新调整您正在查看网站的窗口的大小，您就会看到它完全改变以适应移动设备。

一个人怎么能这样？！？

如果标题看起来有误导性，请原谅

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T04:46:14.163

这是一种称为[响应式网页设计](http://www.alistapart.com/articles/responsive-web-design/)的技术。简而言之，此技术基于不同的响应，具体取决于页面正在呈现的屏幕大小。这就是为什么当您重新调整窗口大小时，内容适合这个“新”屏幕。

这可以使用[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)来完成，它允许设计者不仅针对某些设备类，而且检查呈现页面的设备的物理特性。

因此，例如，在您的 CSS 中，您可以使用以下代码：

```
@media screen and (max-width: 480px) {
  .column {
    float: right;
  }
} 
```

`.column`当屏幕宽度小于 480px 时，它会将类的所有元素向右浮动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T04:43:29.270

您可以使用 Get Sleleton 来实现类似 [http://www.getskeleton.com](http://www.getskeleton.com)

Html5 样板 [https://github.com/h5bp/html5-boilerplate/wiki/css](https://github.com/h5bp/html5-boilerplate/wiki/css)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T04:45:24.440

这称为媒体查询。符合 CSS3。

[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

在您的示例链接上，这是他们 CSS 中的媒体查询：

```
@media all and (max-width: 480px) {
  h1 {
    background: #141414;
    font-size: 25px;
    height: 105px;
    line-height: 30px;
    padding-top: 120px;
    text-shadow: none;
  }
  h1 i {
    display: none;
  }
} 
```

因此只有当设备的最大屏幕宽度为 480 像素时才会激活 CSS。本质上是一部手机，而不是平板电脑或显示器。

# python - Python并行编程中Pool.map和Process有什么区别？

> ID：11219485
> 
> 赞同：2
> 
> 时间：2012-06-27T04:37:37.607
> 
> 标签：python, python-2.7

我试图了解多处理模块。当我想使用不同的参数连续多次运行一个函数时，我应该何时使用 Pool.map 而不是 Process？各自的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:53:50.970

Pool.map 产生多个进程来完成某个任务。

当您有要在单独的进程中处理的任务单元时，您可以直接生成该进程。

```
def execute_new_work(work=somefunction):
    p = multiprocessing.Process(target=work)
    p.start() 
```

池可用于管理固定数量的工人。

当您知道要使用相同功能但并行处理的工作单元数量时`for loop`，您可以使用 pool.map 而不是使用。这只是更方便和容易

```
pool_size = multiprocessing.cpu_count() * 2
pool = multiprocessing.Pool(processes=pool_size,
                            initializer=start_process,
                           )
outputs = pool.map(workon_fucntion, inputs) 
```

正如您所看到的，这是 Python 中的 map 函数的 Pythonic 和回忆。你可以用地图做什么，你可以用`for loop`.

这里唯一需要注意的是，工作进程是预先固定的，并且池管理工作分配给工作人员，这非常好。

# c# - 日历插件

> ID：11219486
> 
> 赞同：1
> 
> 时间：2012-06-27T04:37:55.050
> 
> 标签：c#, jquery, asp.net, calendar

我可以在允许每周、每天和每月查看的开源 asp.net 应用程序中使用的最好的日历插件是什么？我在网上看了一些，但我不确定哪个是最好的。你有什么想法我可以使用并且我可以集成到我的应用程序中。

我看到了一些使用 JQuery 的不错的东西，有什么类似于我可以在我的 asp.net 应用程序中使用的 Google 日历的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T04:55:01.347

计划日历和完整日历

[http://www.planscalendar.com/demo/](http://www.planscalendar.com/demo/)

[http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)

# ant - 如何批量使用ant变量？

> ID：11219490
> 
> 赞同：0
> 
> 时间：2012-06-27T04:38:17.760
> 
> 标签：ant, batch-file, argument-passing

大家好，这是我上传文件的 maven comd

```
mvn -e -s C:\settings.xml deploy:deploy-file -Dfile=D:\abc.exe -DgroupId=Agent -DartifactId=Instal -Dversion=1.2.3 -Dpackaging=exe -DuniqueVersion=false -DrepositoryId=releases -Durl=http://xyz:8081/internal/ 
```

我已将此命令放在我从 ant 调用的批处理文件中，`EXEC task`唯一的问题是`file=D:\abc.exe`总是会改变，所以我想将它从 ant 传递到批处理并在`file="ARGUMENT FROM ANT"`有人可以告诉我我该怎么做... ant 文件名始终存储在`${FILENAME}`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:07:34.687

像这样使用 arg 值：

```
<exec executable="cmd">
    <arg value="/c"/>
    <arg value="thebat.bat"/>
    <arg value="${FILENAME}"/>
</exec> 
```

然后在您的 bat 文件中检索它：

```
set myfile=%1
[...]
mvn -e -s C:\settings.xml deploy:deploy-file -Dfile=%myfile% -DgroupId=Agent -DartifactId=Instal -Dversion=1.2.3 -Dpackaging=exe -DuniqueVersion=false -DrepositoryId=releases -Durl=http://xyz:8081/internal/ 
```

在那里检查： http: [//ant.apache.org/manual/Tasks/exec.html](http://ant.apache.org/manual/Tasks/exec.html)

# php - php session.save_path 位置

> ID：11219492
> 
> 赞同：0
> 
> 时间：2012-06-27T04:38:28.133
> 
> 标签：php, unix, webserver, mount

我的网络服务器有 2 个挂载。根挂载是 500GB 驱动器，Web 根挂载到 2TB RAID 驱动器。在我的 php.ini 设置中，我一直在使用会话“/tmp”的默认位置，但这意味着会话保存在我的 500GB 驱动器上，而不是像所有其他网站相关文件一样保存在 2TB 驱动器上。

我之所以这么问，是因为前几天我不小心从我的 Web 根目录的一部分备​​份到 500GB 驱动器，这使它的容量达到了 100%。因为 500GB 驱动器无法在 /tmp 中创建完整会话并且用户无法登录。问题已解决并且是一个意外，所以我不希望始终使用 100% 的根驱动器。

有人可以对此发表意见吗？会话存储在哪里真的很重要（我正在运行自己的专用机器）吗？由于网络驱动器处于 raid 状态，考虑到我的 raid 驱动器存储了高度交付的内容，管理这样一个临时文件是否会给驱动器带来更大的压力？

谢谢你。

# blackberry - 没有得到 GPS

> ID：11219494
> 
> 赞同：3
> 
> 时间：2012-06-27T04:38:43.393
> 
> 标签：blackberry, java-me, gps, locationlistener

我一直在努力获取 GPS 位置我已经阅读了许多示例和文章，但还没有取得任何成功。我想可能是我错过了一些非常小的东西，但我是 BB 开发的新手。

下面是代码

```
package mypackage;

import javax.microedition.location.Criteria;
import javax.microedition.location.Location;
import javax.microedition.location.LocationException;
import javax.microedition.location.LocationProvider;

import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.container.MainScreen;

/**
* A class extending the MainScreen class, which provides default standard
* behavior for BlackBerry GUI applications.
*/
public final class MyScreen extends MainScreen {

/**
* Creates a new MyScreen object
*/
public MyScreen() {
    setTitle("GPS Demo");
    new GpsThread().start();
}

public boolean onClose() {
    UiApplication.getUiApplication().requestBackground();
    return false;
}

private class GpsThread extends Thread {

    Location currentLoc; // Stores component information of our position

    Criteria cr; // Settings for the GPS - we can read it at
    // different accuracy levels

    LocationProvider lp; // LocationProvider does the actual work of reading
    // coordinates from the GPS

        public GpsThread() {
            add(new LabelField(("GPS Constructor")));
            cr = new Criteria();
        }

        public void run() {

            add(new LabelField(("run")));
            showLocationToast();

        }

        private void setCriteria() {

        // I basically set no requirements on any of the horizontal,
        // vertical,
        // or
        // power consumption requirements below.
        // The distance components are set in meters if you do want to
        // establish
        // accuracy - the less the accuracy, the
        // quicker and more likely a successful read (I believe).
        // You can also set power consumption, between low, medium, high (or
        // no
        // requirement)
        // There are also a number of other settings you can tweak such as
        // minimum
        // response time, if altitude is required,
        // speed required, etc. It all depends on the exact application
        // you're
        // writing and how specific you need the info to
       cr.setCostAllowed(true);
       cr.setHorizontalAccuracy(Criteria.NO_REQUIREMENT);
       cr.setVerticalAccuracy(Criteria.NO_REQUIREMENT);
       cr.setPreferredPowerConsumption(Criteria.POWER_USAGE_HIGH);
       add(new LabelField(("Criteria set ")));

    }

    private void getLocation() throws InterruptedException {

        setCriteria();
        try {
            add(new LabelField(("getting location")));
            // Get a new instance of the location provider using the
            // criteria we
            // established above.
           if (lp != null) {
                lp.setLocationListener(null, 0, -1, -1);
                lp.reset();
                lp = null;
            }

        add(new LabelField(("lp had something so resetting it")));
        lp = LocationProvider.getInstance(cr);
        add(new LabelField(("got locationprovider instance ... ")));

        // Now populate our location object with our current location
        // (with
       // a 60 second timeout)
       lp.setLocationListener(new MyLocationListener(), 120, -1, -1);

       currentLoc = lp.getLocation(60);

       String location = "Latitude : "
       + currentLoc.getQualifiedCoordinates().getLatitude()
       + "\n Longitude : "
       + currentLoc.getQualifiedCoordinates().getLongitude();
       add(new LabelField((location)));
       }
       // If we hit the timeout or encountered some other error, report it.
       catch (LocationException e) {
           // Dialog.alert("Error getting coordinates");
           add(new LabelField(e.getMessage()));
          return;
        }
   }

   private void showLocationToast() {

        add(new LabelField(("showing toast")));

        try {
            getLocation();
        } catch (InterruptedException e) {
            add(new LabelField(e.getMessage()));
        }

        add(new LabelField(("Got all info")));
        String location = "Latitude : "
        + currentLoc.getQualifiedCoordinates().getLatitude()
        + "\n Longitude : "
        + currentLoc.getQualifiedCoordinates().getLongitude();
        add(new LabelField("Showing toast..." + location));
    }
}
} 
```

**附加信息：** 类我的听众只有在更新位置时必须显示的对话框。我什至试图在不使用监听器的情况下获得单个位置

像

```
lp.getLocation (60); 
```

就在我设置听众的地方之前。但是这两次我都只得到了我设置监听器的标签。我将使用`Timer`，`TimerTask`但是我能够正确地进行此演示。

我正在使用 9900 进行开发，该应用程序应该在 4.5.0 上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T09:34:28.670

我看到了两件对我来说看起来不正确的事情。我无法复制您的确切测试场景，所以我不能肯定它们是问题所在……只是它们看起来很可疑。

## 穿线

您正在`LabelFields`从后台线程（您的`GpsThread`）调用更新您的 UI，并添加 。我不认为这是对的。一般来说，当我有一个需要更新 UI 的后台线程时，我总是这样做

```
private void addNewLabelField(final String text) {
    UiApplication.getUiApplication().invokeLater(new Runnable() {
        public void run() {
           add(new LabelField(text));
        }
    });
} 
```

然后，您可以`addNewLabelField("something");`从任何地方拨打电话。

也就是说，我认为`IllegalStateException`如果你尝试这样做，你会得到一个，并且你说你没有得到任何例外。无论如何，我认为将与 UI 相关的调用保留在主 (UI) 线程上仍然是一种好习惯。

## 位置标准

您正在为您的位置使用**NO_REQUIREMENT、NO_REQUIREMENT、成本允许、POWER_USAGE_HIGH**`Criteria`。如果我看这个文件：

[http://supportforums.blackberry.com/t5/Java-Development/Location-APIs-Start-to-finish/ta-p/571949](http://supportforums.blackberry.com/t5/Java-Development/Location-APIs-Start-to-finish/ta-p/571949)

...向下滚动到名为**Criteria mapping for JSR-179 API**的表，这似乎暗示此精确位置标准仅支持 CDMA 手机。但是，[据此](http://www.phonearena.com/phones/RIM-BlackBerry-Bold-9900_id5141)，9900 是一款 GSM 手机。你知道吗（也许我错了，它也有 CDMA 型号）？

但是，如果您碰巧选择了`Criteria`手机不支持的手机，您可能无法获得定位结果。所以，我肯定会尝试另一种标准组合，这些标准列在我上面链接到的那个文件中。

That's my best guess.

# silverlight - 未找到 DockPanel 的附加属性 Dock

> ID：11219499
> 
> 赞同：0
> 
> 时间：2012-06-27T04:39:07.650
> 
> 标签：silverlight

这是我的代码……我们可以在这段代码中找到一个按钮标签。对于按钮标签，我想使用 DockPanel 的附加属性 Dock。但我没有在智能中得到它。我怎么能得到那个。

```
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:toolkit="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Toolkit"
xmlns:mswindows="clr-namespace:Microsoft.Windows;assembly=System.Windows.Controls.Toolkit"
mc:Ignorable="d"
d:DesignHeight="300" d:DesignWidth="400">

<toolkit:DockPanel x:Name="LayoutRoot">
    <Button Content="Create New Employee" Height="27" Width="136"></Button>
    <sdk:DataGrid Background="White">

    </sdk:DataGrid>

</toolkit:DockPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:47:02.337

`DockPanel`附加属性与您需要使用的位于相同的 namaspace 中`toolkit:DockPanel.Dock`：

```
<toolkit:DockPanel x:Name="LayoutRoot">
    <Button toolkit:DockPanel.Dock="Top" Content="Create New Employee" />    
</toolkit:DockPanel> 
```

这是一个很好的[教程，如何在 Silverlight 中使用 DockPanel](http://blogs.silverlight.net/blogs/justinangel/archive/2008/10/30/silverlight-toolkit-dockpanel.aspx)。

# virtuemart - 如何提取编码的美德购物车会话数据

> ID：11219502
> 
> 赞同：1
> 
> 时间：2012-06-27T04:39:24.433
> 
> 标签：virtuemart

我正在为 joomla 使用 2.06 德行，我创建了一个自定义组件来显示有关选择付款类型和交货时间以及用户详细信息的一些基本信息，在显示用户信息之前，我必须在自定义组件视图中显示添加到购物车的产品作为购买产品的评论信息给购买者。

我已经在自定义组件的视图页面中打印了会话数据，但是购物车的会话数据是编码的。如何提取美德市场购物车会话数据。

print_r($*会话['* _vm']['vmcart']);

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:23:08.573

尝试

```
print_r(unserialize($_SESSION['__vm']['vmcart'])); 
```

# powerpoint - 在PowerPoint中为单张幻灯片添加密码

> ID：11219503
> 
> 赞同：0
> 
> 时间：2012-06-27T04:39:25.997
> 
> 标签：powerpoint

由于我们现在已经有了向 ppt 文件添加密码的功能，所以我想在 powerpoint 中为特定幻灯片添加密码。这是因为我在演示文稿中添加了一个图表，并且我希望该图表仅对某些用户可见。我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:38:36.193

你不能。相反，您可以从主演示文稿链接到另一个受密码保护的演示文稿，该演示文稿仅包含带有图表的幻灯片。

# jquery - 如何从 div 内部为整个列表设置动画

> ID：11219508
> 
> 赞同：0
> 
> 时间：2012-06-27T04:40:16.403
> 
> 标签：jquery, jquery-ui

我试图从和图像制作一个覆盖滑块，例如，一个图像，当我点击它时，一个滑块将来自图像的相同位置并显示描述。我尝试使用 jquery ui，但现在我在实现它时遇到了问题。我想将这个效果用于很多项目，一个列表，所以我的问题是如何让这个脚本适用于列表中的每个项目，同时考虑到 href 在容器 div 内。我认为这可以更清楚地解释我的观点：http: [//jsfiddle.net/viciosogb/tmzsZ](http://jsfiddle.net/viciosogb/tmzsZ)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:06:43.617

这可能是你要找的..

[http://jsfiddle.net/tmzsZ/11/](http://jsfiddle.net/tmzsZ/11/)

有点hacky，但它有效。

基本上，你需要使用`$(this)`更多，所以你抓住点击的那个而不是定位一个 ID，你需要定位一个可以多次使用的东西，比如一个类。

# unit-testing - DBUnit：验证作为另一个表的自动 ID 生成的外键

> ID：11219510
> 
> 赞同：1
> 
> 时间：2012-06-27T04:40:41.657
> 
> 标签：unit-testing, dbunit

事情是 ：

我在一个 xml 中有一些数据，这些数据被一个正在运行的线程占用，该线程读取数据，并在执行一些业务逻辑后将该数据保存到两个表中，比如说表 A 和表 B。

它的完成方式是表 B 的元组包含一个外键，它恰好是表 A 中条目的自动生成 id。由于我正在测试的是线程的正确性，我无法控制可能生成的内容表 A 中的条目的自动 ID 和我要验证的数据必须测试表 A 和表 B 的条目的连接正确性。

在预期的数据集中，我无法提供自动生成的 ID 和外键值，因为我不知道这一点。如果 DB 单元提供了一种方法，您只需用一个变量替换预期值并在另一个表的相应条目中使用该变量，那么有没有办法做到这一点？或者还有其他方法可以做到吗？请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:16:22.043

好吧，我想出的是通过指定确切的 SQL 而不是拾取单个表，然后忽略结果集中的 ID 列，从而通过 DBUnit 接收实际数据，这样您剩下的就是名称映射属性的名称在结果集中的每一行。最后是一个非常微不足道的东西:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-01T06:11:36.907

如果您使用`@ExpectedDatabase`检查结果，可以指定修饰符`assertionMode = DatabaseAssertionMode.NON_STRICT_UNORDERED`。

在结果集数据中不要指定 id 字段，在比较时必须忽略 id。

# c - CGFX着色器多次输出顶点数据

> ID：11219511
> 
> 赞同：0
> 
> 时间：2012-06-27T04:40:51.703
> 
> 标签：c, shader, pixel-shader, vertex-shader, cg

如何多次从顶点着色器输出到像素着色器。例如，在对顶点着色器中的顶点颜色执行一些不同的数学运算后，我需要将顶点颜色作为浮点数 4 输出到像素着色器 4 次？

我可以这样做吗？我尝试创建一个空的 float4 color2，从 In.color 读取 In.vertcolor 并输出...我没有收到任何错误，但我的纹理是白色的。它只是读取任何空的浮点数 4 ......

这是我本节的代码。谢谢！

```
//////////////////////////////////////////////////////////////
// Structs section 
// input from application
struct a2v {
float4 position  : POSITION;
float4 normal    : NORMAL;
float2 texCoord : TEXCOORD0;
float2 secondUV : TEXCOORD1;
float4 color: COLOR;
float4 color2;

};

// output to fragment program
struct v2f {
    float4 position        : POSITION;
    float2 texCoord : TEXCOORD0;

    float2 secondUV : TEXCOORD1;
    float3 worldNormal     : TEXCOORD2;
    float4 color: COLOR;
    float4 color2;

};

//////////////////////////////////////////////////////////////
// Vertex Shader 

v2f vShader(a2v In)
{
v2f Out;
Out.texCoord = In.texCoord;
Out.secondUV = In.secondUV;

float4 Mask1 = floor ((fmod((In.color  * 100f ), 10f))) *.111f;
float4 Mask2 = floor ((fmod((In.color2  * 100f ), 10f))) *.111f;
Out.color = Mask1;
Out.color2 = Mask2;

Out.position = mul(WorldViewProjection, In.position);
Out.worldNormal = mul(WorldInverseTranspose, In.normal).xyz;

return Out;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:48:25.620

有一个 COLOR1 绑定属性，您可以将其分配给 a2v 和 v2f 结构中的“color2”字段。

确保在您的应用程序中将辅助颜色 (COLOR1) 分配为属性流。

# clojure - 将一系列地图转换为多地图

> ID：11219512
> 
> 赞同：1
> 
> 时间：2012-06-27T04:40:55.297
> 
> 标签：clojure, multimap

我有一系列地图。

```
;; input
[{:country "MX", :video 12345, :customer "cid1"}
 {:country "US", :video 12345, :customer "cid2"}
 {:country "MX", :video 54321, :customer "cid1"}] 
```

我想将其转换为多图。我想生成。

```
;; output
{"cid1"
     {:actions
          [{:country "MX", :video 12345, :customer "cid1"}
           {:country "MX", :video 12345, :customer "cid1"}]},
 "cid2" 
     {:actions
          [{:country "US", :video 12345, :customer "cid2"}]}} 
```

我觉得我应该使用`update-in`. 类似于......我只是没有弄清楚到底是什么`some-fn-here`样子，我认为其他人可能有同样的问题。

```
(defn add-mm-entry
    [m e]
    (update-in m [(:customer e)] some-fn-here))

(def output (reduce add-mm-entry {} input)) 
```

我想在我工作的时候把它扔给社区。如果我在这里走错了路，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T04:55:38.303

如果我正确理解了意图，您将按：customer 分组，然后将操作向量包装到：actions 中。您可以使用**clojure.core/group-by**进行分组，然后映射（**clojure.core/map**）结果：

```
(def v [{:country "MX", :video 12345, :customer "cid1"}
        {:country "US", :video 12345, :customer "cid2"}
        {:country "MX", :video 54321, :customer "cid1"}])

(->> v
     (group-by :customer)
     (map (fn [[cid xs]] {cid {:actions xs}}))
     (into {})) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T05:57:34.980

迈克尔的回答效果很好。由于我正在加载的数据的大小，我不确定是否`group-by`适合我的特定情况。我还没有测试过，但我认为这种方法会减少中间产品。

```
(def v [{:country "MX", :video 12345, :customer "cid1"}
        {:country "US", :video 12345, :customer "cid2"}
        {:country "MX", :video 54321, :customer "cid1"}])

(defn add-entry
    [m e]
    (let [cust (:customer e)]
        (update-in m [cust :actions] #(conj % e))))

(reduce add-entry {} v) 
```

仍然会导致加载完整的数据集，但它会直接加载到目标数据结构中，而不是加载到地图向量中，然后再加载到多地图中。同样，我还没有测试来检查哪一个确实更具有性能，但看起来这个对数据集的迭代次数减少了一次，并且避免了创建来自`group-by`.

# django - django 管理静态 URL：适用于 base.css 但不适用于dashboard.css

> ID：11219518
> 
> 赞同：0
> 
> 时间：2012-06-27T04:41:44.323
> 
> 标签：django, django-admin, django-staticfiles

在 settings.py 中：

```
STATIC_ROOT = os.path.join(PROJECT_PATH, '..', 'media/static')
STATIC_URL = '/media/static/ 
```

在渲染页面中：

```
<title>Site administration | Django site admin</title>
<link rel="stylesheet" type="text/css" href="/media/static/admin/css/base.css" />
<link rel="stylesheet" type="text/css" href="css/dashboard.css" /> 
```

base.css 的 href 是正确的，但 dashboard.css 的 href 缺少`media/static/admin`. 为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:14:03.217

即使 Django 对您大喊 ADMIN_MEDIA_PREFIX 已被弃用，但将它放在您的 settings.py 中似乎有时可以修复此错误。我还没有时间去寻找资料来源，但是无论dashboard.css 来自哪里的“extra_styles”上下文设置，似乎仍然会查看AMP 设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:08:52.810

我猜你的模板看起来像这样？

```
<title>Site administration | Django site admin</title>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}admin/css/base.css" />
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/dashboard.css" /> 
```

如果您尝试在浏览器中使用它们应该具有的位置打开它们，您可以访问这两个文件吗？`/media/static/admin/css/base.css`和`/media/static/css/dashboard.css`（或者可能是../admin/...）

你添加`'django.core.context_processors.static',`到你的`TEMPLATE_CONTEXT_PROCESSORS`?

**更新**

当我尝试同样的方法时，它对我来说效果很好。在我的模板中：

```
{% load staticfiles %}
<link rel="stylesheet" type="text/css" href="{% block stylesheet %}{% static "admin/css/base.css" %}{% endblock %}" />, 
<link rel="stylesheet" type="text/css" href="{% static "admin/css/dashboard.css" %}" /> 
```

呈现的 HTML（在我当前的项目`/static/`中是我的 STATIC_URL）：

```
<link rel="stylesheet" type="text/css" href="/static/admin/css/base.css" />, 
<link rel="stylesheet" type="text/css" href="/static/admin/css/dashboard.css" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:41:21.420

当我忘记`STATIC_URL`设置`render_to_response`. 如果没有看到您在视图和模板中使用的代码，很难确定实际问题，但如果它正在设置上下文并且您正在使用`render_to_response`，请尝试以下操作：

```
return render_to_response("login.html", context_instance=RequestContext(request)) 
```

许多其他渲染功能也是如此。你能发布视图和模板吗？

# c++ - 如何最小化更新一系列节点收集数据的成本？

> ID：11219519
> 
> 赞同：1
> 
> 时间：2012-06-27T04:41:49.727
> 
> 标签：c++, algorithm, graph

我有一系列 k 节点`N1`, `N2`, `N3`, ...`Nk`每个节点都被连续命中（可能会跳过）。

每次我访问其中一个节点时，我都需要 += 从前一个节点到达那里所花费的时间。棘手的部分是，如果我在`N1` *没有*到达的情况下返回`Nk`，那么应该删除这些 += 更新。

一种方法是在每个节点中保留两个量：x 和 y。当我们跳节点时，我们 += 值到 y 中。如果我们到达，`N1`我们将 y 重置为 0。而如果我们到达`Nk`，我们`x += y`对每个节点都这样做。

问题是每次我们击中`Nk`它都需要一个 O(n) 操作——即使序列返回`N1`而不击中它可能不是常见的情况`Nk`。有没有更聪明的方法可以更有效地做到这一点，而无需在每次迭代结束时都“提交”O(n)？

考虑这个有 3 个节点的例子：`N_1`, `N_2`, `N_3`:

左边显示了在迭代中命中的节点的子序列，右边显示了累积计数器应该包含的内容：

```
(N_1, 2)(N_2, 3)(N_3, 7) ---> (N_1, 2)(N_2, 3)(N_3, 7)
(N_1, 4)(N_3, 2)         ---> (N_1, 6)(N_2, 3)(N_3, 9)
(N_1, 6)(N_2, 3)         ---> (N_1, 4)(N_2, 3)(N_3, 2) //nothing changes as this was an "invalid" op because we never hit the end node
etc... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T05:22:25.997

您可以在每个节点中维护两个累加器 ( )，以及一个在到达第 k 个节点时递增`accum_[2]`的全局 1 位计数器 ( )。然后保持对每个节点始终具有正确累积值`k_counter`的不变量。`accum_[k_counter]`在此方案中，如果您跳过节点，您将被迫访问它们并`node[i] += 0`在它们上执行。可以通过访问计数器优化该要求，我将把它作为练习:-)。

```
enum { K = 100 };
struct Node *node;
struct Node {
    static bool k_counter;
    unsigned accum_[2];
    unsigned id_;
    Node () : accum_(), id_(this - node + 1) {}
    void operator += (unsigned time_data) {
        accum_[!k_counter] = accum_[k_counter] + time_data;
        if (id_ == K) k_counter = !k_counter;
    }
    operator unsigned () const { return accum_[k_counter]; }
};
bool Node::k_counter;

node = new Node[K]; 
```

# java - 为什么 javax.servlet 不能用于导入？

> ID：11219521
> 
> 赞同：1
> 
> 时间：2012-06-27T04:42:04.687
> 
> 标签：java, servlets

我有java sdk 1.7。我一直使用 django/python 进行 web 开发，这将是我第一次使用 java。

当我尝试时：

```
import javax.servlet.http.*; 
```

没有找到servlet？如何正确安装此 servlet jar？

编辑：

我正在使用 java 为谷歌应用引擎开发一些小东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T04:43:09.913

它不附带标准 JDK，您需要在类路径中添加 servlet-api.jar

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:28:14.683

如果您的 IDE 是 Intellij，您必须获得 Ultimate 版本。

以下是[Intellij IDEA 终极版](http://www.jetbrains.com/idea/download/)的功能。

*   用于基于 JVM 和多语言开发的全功能 IDE
*   Java EE、Spring/Hibernate等技术支持
*   大多数应用服务器的部署和调试
*   重复代码搜索、依赖结构矩阵等

然后，您可以轻松地启动一个 Intellij J2EE 项目，该项目将在类路径中包含所有必要的 jar。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T05:07:12.883

它不附带核心 J2Se 分布的分布 ..因为这个 API 取决于您使用的服务器（tomcat，码头）。所以它带有服务器。如果您使用的是 tomcat，则它位于 tomcat lib 目录中，名称为 servler-api.jar 。将其添加到您的类路径

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T04:44:59.447

“javax.servlet.*”和朋友随您使用的任何 servlet 容器一起提供。Tomcat 使用 j2ee.jar 或 servlet.jar (IIRC)，WebSphere 使用不同的 .jar，等等。

您正在使用 Google App Engine。

这意味着您需要使用 Google .jar 文件。

这是文档：

> [https://developers.google.com/appengine/docs/java/runtime](https://developers.google.com/appengine/docs/java/runtime)
> 
> 当您使用 Java SDK 中的 AppCfg 工具上传应用程序时，App Engine 知道要为您的应用程序使用 Java 运行时环境。
> 
> App Engine Java API 只有一个版本。此 API 由 SDK 中包含的 appengine-api-*.jar 表示（其中 * 表示 API 和 SDK 的版本）。您可以通过将此 JAR 包含在应用程序的 WEB-INF/lib/ 目录中来选择应用程序使用的 API 版本。如果发布的 Java 运行时环境的新版本引入了与现有应用程序不兼容的更改，则该环境将具有新的版本号。您的应用程序将继续使用以前的版本，直到您将 JAR 替换为新版本（来自较新的 SDK）并重新上传应用程序。

# php - 按时间戳对 MySQL 表进行排序

> ID：11219525
> 
> 赞同：1
> 
> 时间：2012-06-27T04:42:12.440
> 
> 标签：php, mysql, sorting, timestamp

我运行了一个数据采集板，我生成了一个 php 代码，每 15 分钟提取一次数据，然后将其插入一个表中。

这工作正常。但是，如果由于某种原因连接丢失或缺少某些值，我想生成一个恢复功能，所以我想知道如何向董事会索要一些值，但我需要弄清楚如何发布恢复的数据和然后按时间戳对整个表顺序进行排序。

为此，我想使用 php，并放置此代码

```
$result = mysql_query("SELECT * FROM `table` ORDER BY `date` DESC;" ); 
```

但这不会造成任何影响。我需要对表格而不是结果进行排序。

有什么简单的方法可以做到这一点吗？

**编辑**：

使用时间戳提取数据，现在我的表具有以下结构：

```
id  |  TimeStamp  |  Temperature 
```

*   我`id`是`INT NOT NULL AUTO_INCREMENT PRIMARY KEY`
*   `timestamp`
*   `temperature`是`varchar(15)`

php函数获取adquicition board的最后一个值，插入到最后一个id上。我只是放置时间戳来制作数据的历史记录。但我希望表按此字段排序，以防恢复。为了进行恢复，对板的调用功能与连续模式不同。这就是我使用顺序插入的原因，如果在丢失数据恢复完成后我可以使用时间戳对整个表进行排序，我会徘徊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T04:56:59.597

根据我对问题的阅读，这与希望表中的数据根据​​时间戳插入而不是按顺序插入有关。

也许如果作者能够澄清这种需求是如何产生的，那么 SO 社区可能会提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T20:44:13.477

我知道这不是您想听到的答案，但是 - 不幸的是 - 这是真的：没有“表格顺序”之类的东西 - 表格是行的集合，而不是行的序列。这就是为什么您只能对结果进行排序，而不能对表本身进行排序（操作将毫无意义）。

你需要做的是重新思考你的设计，花一些时间阅读一本关于数据库的好书，并摆脱一些错误的假设。

如果您想要实现的是“确保根据时间戳对主键进行排序”，那么您不应该这样，有一些方法，但它们都是疯狂的。*最简单的（可能）是使用select into*将所有行转储到其他表，然后从原始表中删除它们并再次插入。无论如何：不要尝试这个。你不需要订购你的桌子。

# python - 如何在Python中提取“”之间的文本

> ID：11219532
> 
> 赞同：3
> 
> 时间：2012-06-27T04:42:56.357
> 
> 标签：python

例如，如何有一个 string `a`，它被定义为

```
a = "\"hello\"" 
```

如何使用`re`提取文本`hello`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T04:45:30.300

```
m = re.search('"([^"]*)"', a)
m.group(1) 
```

表示字符串内部必须`[^"]*`没有。`"`

这对于以下情况很重要：

```
"a" bcd "e" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T04:44:11.240

```
re.search('"(.*)"', "\"hello\"").group(1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:16:42.483

您的问题也可以使用[shlex](http://docs.python.org/library/shlex.html) .split() 来解决，它会以与 Unix shell 拆分命令行参数相同的方式拆分字符串。换句话说，它将尊重引号。取决于你最终想要做什么，它可能更安全、更合适。

# javascript - 如何根据行位置和列位置查找索引

> ID：11219537
> 
> 赞同：0
> 
> 时间：2012-06-27T04:43:55.420
> 
> 标签：javascript

我有一个二维数组..

我知道行位置和列位置。

如何根据行位置和列位置找到数组的索引。

```
Ex: if rowPosition =1 and columnPosition = 1, 
```

索引应为 2。图形表示为

```
 0      1
      2      3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:01:52.450

您尝试访问的值可以通过做来获得`array2D[rowPosition][columnPosition]`。

例子：

```
var array2D=[[0,1],[2,3]];
alert(array2D[1][1]); 
```

请注意，行索引和列索引都是从 0 开始的，因此 [1][1] 得出 3。

# mysql - 有没有其他方法可以触发这个查询

> ID：11219539
> 
> 赞同：0
> 
> 时间：2012-06-27T04:44:01.367
> 
> 标签：mysql

```
SELECT CategoryID, CategoryName
FROM testcategory
WHERE CategoryID NOT 
IN (
  SELECT ChildMuzeCategoryID
  FROM testsubcategory
) 
```

第一个表包含 75k 第二个表包含 45k 记录

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T04:47:28.213

尝试使用加入：

```
SELECT CategoryID, CategoryName
FROM testcategory
LEFT JOIN testsubcategory ON testcategory.CategoryID = testsubcategory.ChildMuzeCategoryID
WHERE testsubcategory.ChildMuzeCategoryID IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T04:46:23.687

这个查询非常好，没有办法重写它实际上会使其性能更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T04:46:27.323

你写的是最好的方法，没有更好的方法，但我有一个建议：

因为在处理大量行时，如果你有一些类似的标志`testsubcategory`并`1 (boolean)`在更新`testsubcategory`表时更新它会更好。我们可以很容易地使用这个查询：

```
SELECT `CategoryID`, `CategoryName` FROM `testcategory` WHERE NOT `testsubcategory` = 1; 
```

# sql - 使用 QTableView 和 QSqlTableModel 进行类似网格的内联编辑

> ID：11219542
> 
> 赞同：2
> 
> 时间：2012-06-27T04:44:20.943
> 
> 标签：sql, qt, qsqltablemodel

我试图让 QTableView 表现得像一个网格表，即底部总是有一个空行，用户输入要插入的新记录。想想 MS Access 子表单，或者在 web 开发中，我认为我们称之为内联编辑。

我正在使用 Qt 4.7.4，非常标准的代码：

```
model = new QSqlTableModel(this);
model->setTable("order_details");
models->setEditStrategy(QSqlTableModel::OnManualSubmit);
model->setFilter(QString("parent_id = '%1'").arg(ID->toString());
model->select();
model->insertRow(model->rowCount());  //worked womehow
//QSqlRecord rec = model->record();
//rec.setValue("fieldName", var);  //useful for initializing some fields
//model->insertRecord(-1, rec);  //internally call insertRow(rowCount()) then setRecord

ui->tblGrid->setModel(model); 
```

如果将 insertRow 或 insertRecord 放入构造函数中，则不会发生任何事情。没有添加行。但是，如果我创建一个调用其中任何一个的按钮，则会添加一个新行，但它是**uneditable**。

要观察这一点，请尝试修改[Qt 的缓存](http://doc.qt.nokia.com/4.7-snapshot/sql-cachedtable.html)表示例，如果放入构造函数中，添加 insertRow() 将无济于事。但是，在从按钮调用的插槽中，它将很好地添加行。不可编辑，当然。

所以我的问题是：

1.  为什么会这样？我已经看够了 QSqlTableModel 的源代码，但要理解它，我们还需要了解 QSqlRecord、QSqlQuery、QAbstractItemModel 等......我无法理解它。
2.  为了解决不可编辑的行，我将 QSqlTableModel 重写为 flags() 以返回 Qt::ItemIsEditable 和 Qt::ItemIsenabled 无济于事。我做错了什么？
3.  我知道我最终将继承 QTableView 以获得这种行为，所以如果有人对我有一些指示，我将不胜感激，也许我可以阅读一些项目的源代码。

谢谢，

埃文

# java - final static 和 static final 的区别

> ID：11219556
> 
> 赞同：174
> 
> 时间：2012-06-27T04:45:51.410
> 
> 标签：java, static, final

我找到了一个代码，它声明了类似的代码

```
private final static String API_RTN_SUCCESS = "0";
private final static String API_RTN_ERROR = "1";

public static final String SHARED_PREFERENCE_CONFIG = "shared_preference_config";
public static final String STARTUP_SETTING_KEY = "startup_setting"; 
```

它们之间有什么区别还是相同？或者它对 or 有什么`private`不同`public`？

* * *

## 回答 #1

> 赞同：252
> 
> 时间：2012-06-27T04:49:42.017

完全没有区别。根据 [Java 语言规范的 8.3.1 - Classes - Field Modifiers](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1)，

> 如果两个或多个（不同的）字段修饰符出现在字段声明中，尽管不是必需的，但习惯上它们的出现顺序与上面在 FieldModifier 的产生式中显示的顺序一致。

对于字段，上述产生式按以下顺序列出修饰符：

> `@Annotation` `public` `protected` `private` `static` `final` `transient` `volatile`

对于方法：

> `@Annotation` `public` `protected` `private` `abstract` `static` `final` `synchronized` `native` `strictfp`

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-06-27T04:50:34.733

他们是一样的。修饰符的顺序并不重要。请注意，相同的规则适用于 Java 中使用修饰符的*所有上下文。*

但是，大多数 Java 样式指南都建议/要求对修饰符使用相同的特定顺序。在这种情况下，它是`public static final`。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-06-27T05:31:17.147

```
private static final String API_RTN_ERROR= "1";
private final static String API_RTN_ERROR= "1";
static private final String API_RTN_ERROR= "1";
static final private String API_RTN_ERROR= "1";
final static private String API_RTN_ERROR= "1";
final private static String API_RTN_ERROR= "1"; 
```

即使以上都相同，前三个的位置是可以互换的。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-06-27T04:46:46.247

他们是一样的，

```
private final static String API_RTN_ERROR = "1";

private static final String API_RTN_ERROR= "1"; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-27T04:54:34.450

> 它们之间有什么区别还是相同？

如果您正在谈论更改静态和最终的顺序，那么是的，它们是相同的。

> 私人或公共有区别吗？

不，您可以在私人和公共场合使用任何订单。只是不同的是私有变量不能直接在类之外访问。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-09-14T04:36:44.957

**逻辑上没有区别，也没有技术影响。**

唯一的问题是，如果您按此顺序使用，sonarqube 将报告 Code Smell

```
private final static <Type> <variable_name> = <value>; 
```

因此建议使用：

```
private static final <Type> <variable_name> = <value>; 
```

Java 语言规范建议按以下顺序列出修饰符：

1.  注释
2.  上市
3.  受保护
4.  私人的
5.  抽象的
6.  静止的
7.  最终的
8.  短暂的
9.  易挥发的
10.  同步的
11.  本国的
12.  严格的fp

注意遵循这个约定没有技术影响，但会降低代码的可读性，因为大多数开发人员都习惯了标准顺序。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-14T07:08:38.480

这只是人们为了保持编码风格一致而遵循的惯例或做法。它提高了可读性。所以首选的写作方式是

```
private static final <Type> <variable_name> = <value>; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-19T07:52:58.050

当然是一样的。这仅取决于您的习惯和偏好:-)。我也对成员和方法使用公共静态最终顺序

# php - jQuery触发一个函数

> ID：11219557
> 
> 赞同：0
> 
> 时间：2012-06-27T04:45:57.167
> 
> 标签：php, jquery, timeout

感谢 ehynds 的出色工作，我将[这个jquery 空闲超时脚本实现到了一个站点中。](https://github.com/ehynds/jquery-idle-timeout)

除以下部分外，一切正常：

```
onTimeout: function(){
    window.location = "timeout.htm";
}, 
```

还有另一个函数将处理同一页面中的注销过程，我希望 onTimeout 在达到计时器时触发注销函数，如下所示：

```
onTimeout: function(){
   // call a logout function here;
}, 
```

如何在 onTimeout 块中调用函数加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:48:55.107

您可以找到要触发其事件的控件。

```
onTimeout: function(){
    $('#foo').trigger('click');
} 
```

或者您可以直接调用函数。

```
onTimeout: function(){
    SomeFunction();      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T04:53:19.163

如果插件按预期工作 - 您粘贴的是您正在寻找的功能。如果要调用单独的函数：

```
onTimeout: function(){
    anotherFunction();
}, 
```

但是如果插件正常运行，则应该调用其中的任何代码。像这样测试：

```
onTimeout: function(){
    alert('i will put my logout function here');
}, 
```

如果您在超时后没有收到警报对话框.. 我会说这是插件的问题。

# geolocation - 美国各州和城市之间的距离

> ID：11219564
> 
> 赞同：0
> 
> 时间：2012-06-27T04:46:21.330
> 
> 标签：geolocation, dataset, distance

我正在构建一个基于 Web 的应用程序来确定一个值，该值包括计算 X 城市到 Y 城市（美国）之间的距离。

是否有数据资源来提取该信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:49:52.773

您可以从地图 API 获取城市的纬度和经度。我使用 Yahoo 是因为他们的服务条款更符合我的需要，但 Google API 无疑也是一个不错的选择。

此处描述了 Yahoo API

[http://developer.yahoo.com/geo/placefinder/](http://developer.yahoo.com/geo/placefinder/)

获得纬度和经度后，您可以使用相当简单的公式找到距离

[计算两个经纬度点之间的距离？（Haversine 公式）](https://stackoverflow.com/questions/27928/how-do-i-calculate-distance-between-two-latitude-longitude-points)

或使用其他 API：

[http://developer.yahoo.com/flash/maps/classreference/com/yahoo/maps/api/utils/Distance.html](http://developer.yahoo.com/flash/maps/classreference/com/yahoo/maps/api/utils/Distance.html)

# sqlite - 运算符之间的 Sqlite 问题

> ID：11219569
> 
> 赞同：0
> 
> 时间：2012-06-27T04:46:52.840
> 
> 标签：sqlite, between

我需要查询以获取两天之间的数据。我试过这个。但它给出了表的所有记录。中间运算符不起作用。

```
Select * From Test
Where strftime('%d-%m-%Y',Date) Between '01-06-2012' And '30-06-2012' 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T04:09:30.860

试试这个，

```
Select * From Test
Where strftime('%Y%m%d',Date) Between '20120601' And '20120630' 
```

# vb6 - 如何获得总列值

> ID：11219571
> 
> 赞同：0
> 
> 时间：2012-06-27T04:46:57.603
> 
> 标签：vb6, msflexgrid

使用弹性网格。

弹性网格行

```
id value

001 200
003 400
002 600
... 
```

我想对 flex 网格中的 value 列 sum(value) 求和，

Flexgrid 行从表中填充，最后右侧我想在 flex 网格本身中显示值列的总和。这个怎么做。

预期产出

```
id value

001 200
003 400
002 600
........

Total 1200 ' I want to show the total in flex grid itself... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:40:12.090

```
Private Sub Command1_Click()
  Dim intRow As Integer
  Dim intTotal As Integer
  intTotal = 0
  With MSFlexGrid1
    For intRow = 0 To .Rows - 2
      intTotal = intTotal + Val(.TextMatrix(intRow, 1))
    Next intRow
    .TextMatrix(3, 1) = CStr(intTotal)
  End With 'MSFlexGrid1
End Sub

Private Sub Form_Load()
  With MSFlexGrid1
    .TextMatrix(0, 0) = "001"
    .TextMatrix(1, 0) = "003"
    .TextMatrix(2, 0) = "002"
    .TextMatrix(0, 1) = "200"
    .TextMatrix(1, 1) = "400"
    .TextMatrix(2, 1) = "600"
    .TextMatrix(3, 0) = "Total"
  End With 'MSFlexGrid1
End Sub 
```

# javascript - 选中“N/A”复选框时，自动从下拉列表中选择“In Person Interview”？

> ID：11219573
> 
> 赞同：1
> 
> 时间：2012-06-27T04:47:04.253
> 
> 标签：javascript, drop-down-menu, checkbox, greasemonkey

我正在尝试创建一个脚本，一旦选中 N/A (In Person Interview) 复选框，该脚本将在下拉字段中自动选择“In Person Interview”。我已经在这里阅读了近 2 周的示例，但没有找到任何可以为我指明正确方向的内容。任何帮助表示赞赏。谢谢。

[这是我一直在尝试使用的小提琴](http://jsfiddle.net/jibby/3Sata/)

这是标记：

```
<li id="fielditem_51926" class="field toggleField">
    <table>
        <tbody>
            <tr>
                <td style="width: auto">
                    <input type="hidden" value="false" name="client[custom][custom70]">
                    <input id="field_51926" class=" field_51926 " type="checkbox" value="true" name="client[custom][custom70]">
                    <label id="field_51926_form_label">N/A·(In Person Interview)?·</label>
                    <div id="field_51926_form_note" class="global_note"></div>
                </td>
                <td></td>
            </tr>
        </tbody>
    </table>
</li>
<li id="fielditem_50508" class="field toggleField">?
    <table>
        <tbody>
            <tr>
                <td style="width: auto">
                    <label id="field_50508_form_label" class="above">
                        Need
                        <span class="alert">&nbsp;*</span>
                    </label>
                    <div id="field_50508_form_note" class="global_note">What Are You Looking For Today?</div>
                    <div id="container-50508" class="field_container">
                        <select id="field_50508" class="required_field " name="client[module][custom23][0][option_id]">
                            <option label="(select)" value="">(select)</option>
                            <option label="Utilities" value="45398">Utilities</option>
                            <option label="Motel Voucher" value="45947">Motel?·Voucher</option>
                            <option label="Health" value="49184">Health</option>
                            <option label="General Outreach Event" value="62620">General?·Outreach?·Event</option>
                            <option label="Email" value="46046">Email</option>
                            <option label="Disaster" value="45449">In Person Interview</option>
                        </select>
                    </div>
                </td>
                <td></td>
            </tr>
        </tbody>
    </table>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:35:45.163

**如果**这就是 HTML 的样子，那么这里有一个***完整的脚本***，它使用 jQuery 在选中该复选框时选择所需的选项。

[**请参阅 jsFiddle 中的底层代码。**](http://jsfiddle.net/mDZnW/)

```
// ==UserScript==
// @name     _Select matching option when CB checked, in poorly structured HTML
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// ==/UserScript==

var targChkBox = $("label:contains('(In Person Interview)')").prev ("input");
targChkBox.change (function () {
    if (this.checked) {
        var matchingOption  = $("option:contains('In Person Interview')");
        var targValue       = matchingOption.prop ("value");
        var targSelect      = matchingOption.parents ("select.required_field");
        targSelect.val (targValue); //-- Select the desired option.
    }
} ); 
```

假设字段和 ID 号是可变的，因此可以通过它们的文本找到关键元素（“In Person Interview”）。

请注意，HTML 看起来很可疑。例如，标签被滥用并且没有`for`属性。如果您在让此代码工作时遇到困难，请链接到实际的目标页面。

# javascript - 如何使用 JavaScript 检测我的浏览器版本和操作系统？

> ID：11219582
> 
> 赞同：145
> 
> 时间：2012-06-27T04:47:56.027
> 
> 标签：javascript, browser, operating-system, version

我尝试使用下面的代码，但它只在 Chrome 和 Mozilla 中显示结果，在 IE6 中不起作用。

```
<div id="example"></div>

<script type="text/javascript">

txt = "<p>Browser CodeName: " + navigator.appCodeName + "</p>";
txt+= "<p>Browser Name: " + navigator.appName + "</p>";
txt+= "<p>Browser Version: " + navigator.appVersion + "</p>";
txt+= "<p>Cookies Enabled: " + navigator.cookieEnabled + "</p>";
txt+= "<p>Platform: " + navigator.platform + "</p>";
txt+= "<p>User-agent header: " + navigator.userAgent + "</p>";

document.getElementById("example").innerHTML=txt;

</script> 
```

输出：

```
Browser CodeName: Mozilla

Browser Name: Netscape

Browser Version: 5.0 (Windows)

Cookies Enabled: true

Platform: Win32

User-agent header: Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0 
```

我只需要获取“Firefox/12.0”版本。

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2012-06-27T05:00:46.557

检测浏览器的详细信息：

```
var nVer = navigator.appVersion;
var nAgt = navigator.userAgent;
var browserName  = navigator.appName;
var fullVersion  = ''+parseFloat(navigator.appVersion); 
var majorVersion = parseInt(navigator.appVersion,10);
var nameOffset,verOffset,ix;

// In Opera, the true version is after "Opera" or after "Version"
if ((verOffset=nAgt.indexOf("Opera"))!=-1) {
 browserName = "Opera";
 fullVersion = nAgt.substring(verOffset+6);
 if ((verOffset=nAgt.indexOf("Version"))!=-1) 
   fullVersion = nAgt.substring(verOffset+8);
}
// In MSIE, the true version is after "MSIE" in userAgent
else if ((verOffset=nAgt.indexOf("MSIE"))!=-1) {
 browserName = "Microsoft Internet Explorer";
 fullVersion = nAgt.substring(verOffset+5);
}
// In Chrome, the true version is after "Chrome" 
else if ((verOffset=nAgt.indexOf("Chrome"))!=-1) {
 browserName = "Chrome";
 fullVersion = nAgt.substring(verOffset+7);
}
// In Safari, the true version is after "Safari" or after "Version" 
else if ((verOffset=nAgt.indexOf("Safari"))!=-1) {
 browserName = "Safari";
 fullVersion = nAgt.substring(verOffset+7);
 if ((verOffset=nAgt.indexOf("Version"))!=-1) 
   fullVersion = nAgt.substring(verOffset+8);
}
// In Firefox, the true version is after "Firefox" 
else if ((verOffset=nAgt.indexOf("Firefox"))!=-1) {
 browserName = "Firefox";
 fullVersion = nAgt.substring(verOffset+8);
}
// In most other browsers, "name/version" is at the end of userAgent 
else if ( (nameOffset=nAgt.lastIndexOf(' ')+1) < 
          (verOffset=nAgt.lastIndexOf('/')) ) 
{
 browserName = nAgt.substring(nameOffset,verOffset);
 fullVersion = nAgt.substring(verOffset+1);
 if (browserName.toLowerCase()==browserName.toUpperCase()) {
  browserName = navigator.appName;
 }
}
// trim the fullVersion string at semicolon/space if present
if ((ix=fullVersion.indexOf(";"))!=-1)
   fullVersion=fullVersion.substring(0,ix);
if ((ix=fullVersion.indexOf(" "))!=-1)
   fullVersion=fullVersion.substring(0,ix);

majorVersion = parseInt(''+fullVersion,10);
if (isNaN(majorVersion)) {
 fullVersion  = ''+parseFloat(navigator.appVersion); 
 majorVersion = parseInt(navigator.appVersion,10);
}

document.write(''
 +'Browser name  = '+browserName+'<br>'
 +'Full version  = '+fullVersion+'<br>'
 +'Major version = '+majorVersion+'<br>'
 +'navigator.appName = '+navigator.appName+'<br>'
 +'navigator.userAgent = '+navigator.userAgent+'<br>'
) 
```

源[JavaScript：浏览器名称](http://www.javascripter.net/faq/browsern.htm)。
[请参阅 JSFiddle 以检测浏览器详细信息](http://jsfiddle.net/q7tsm/)。

检测操作系统：

```
// This script sets OSName variable as follows:
// "Windows"    for all versions of Windows
// "MacOS"      for all versions of Macintosh OS
// "Linux"      for all versions of Linux
// "UNIX"       for all other UNIX flavors 
// "Unknown OS" indicates failure to detect the OS

var OSName="Unknown OS";
if (navigator.appVersion.indexOf("Win")!=-1) OSName="Windows";
if (navigator.appVersion.indexOf("Mac")!=-1) OSName="MacOS";
if (navigator.appVersion.indexOf("X11")!=-1) OSName="UNIX";
if (navigator.appVersion.indexOf("Linux")!=-1) OSName="Linux";

document.write('Your OS: '+OSName); 
```

源[JavaScript：操作系统检测](http://www.javascripter.net/faq/operatin.htm)。
[请参阅 JSFiddle 以检测操作系统详细信息](http://jsfiddle.net/y26Zx/)。

```
 var nVer = navigator.appVersion;
    var nAgt = navigator.userAgent;
    var browserName  = navigator.appName;
    var fullVersion  = ''+parseFloat(navigator.appVersion); 
    var majorVersion = parseInt(navigator.appVersion,10);
    var nameOffset,verOffset,ix;

    // In Opera, the true version is after "Opera" or after "Version"
    if ((verOffset=nAgt.indexOf("Opera"))!=-1) {
     browserName = "Opera";
     fullVersion = nAgt.substring(verOffset+6);
     if ((verOffset=nAgt.indexOf("Version"))!=-1) 
       fullVersion = nAgt.substring(verOffset+8);
    }
    // In MSIE, the true version is after "MSIE" in userAgent
    else if ((verOffset=nAgt.indexOf("MSIE"))!=-1) {
     browserName = "Microsoft Internet Explorer";
     fullVersion = nAgt.substring(verOffset+5);
    }
    // In Chrome, the true version is after "Chrome" 
    else if ((verOffset=nAgt.indexOf("Chrome"))!=-1) {
     browserName = "Chrome";
     fullVersion = nAgt.substring(verOffset+7);
    }
    // In Safari, the true version is after "Safari" or after "Version" 
    else if ((verOffset=nAgt.indexOf("Safari"))!=-1) {
     browserName = "Safari";
     fullVersion = nAgt.substring(verOffset+7);
     if ((verOffset=nAgt.indexOf("Version"))!=-1) 
       fullVersion = nAgt.substring(verOffset+8);
    }
    // In Firefox, the true version is after "Firefox" 
    else if ((verOffset=nAgt.indexOf("Firefox"))!=-1) {
     browserName = "Firefox";
     fullVersion = nAgt.substring(verOffset+8);
    }
    // In most other browsers, "name/version" is at the end of userAgent 
    else if ( (nameOffset=nAgt.lastIndexOf(' ')+1) < 
              (verOffset=nAgt.lastIndexOf('/')) ) 
    {
     browserName = nAgt.substring(nameOffset,verOffset);
     fullVersion = nAgt.substring(verOffset+1);
     if (browserName.toLowerCase()==browserName.toUpperCase()) {
      browserName = navigator.appName;
     }
    }
    // trim the fullVersion string at semicolon/space if present
    if ((ix=fullVersion.indexOf(";"))!=-1)
       fullVersion=fullVersion.substring(0,ix);
    if ((ix=fullVersion.indexOf(" "))!=-1)
       fullVersion=fullVersion.substring(0,ix);

    majorVersion = parseInt(''+fullVersion,10);
    if (isNaN(majorVersion)) {
     fullVersion  = ''+parseFloat(navigator.appVersion); 
     majorVersion = parseInt(navigator.appVersion,10);
    }

    document.write(''
     +'Browser name  = '+browserName+'<br>'
     +'Full version  = '+fullVersion+'<br>'
     +'Major version = '+majorVersion+'<br>'
     +'navigator.appName = '+navigator.appName+'<br>'
     +'navigator.userAgent = '+navigator.userAgent+'<br>'
    )

    // This script sets OSName variable as follows:
    // "Windows"    for all versions of Windows
    // "MacOS"      for all versions of Macintosh OS
    // "Linux"      for all versions of Linux
    // "UNIX"       for all other UNIX flavors 
    // "Unknown OS" indicates failure to detect the OS

    var OSName="Unknown OS";
    if (navigator.appVersion.indexOf("Win")!=-1) OSName="Windows";
    if (navigator.appVersion.indexOf("Mac")!=-1) OSName="MacOS";
    if (navigator.appVersion.indexOf("X11")!=-1) OSName="UNIX";
    if (navigator.appVersion.indexOf("Linux")!=-1) OSName="Linux";

    document.write('Your OS: '+OSName);
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-03-15T06:32:30.970

## 更新

[我对Platform.js](https://github.com/bestiejs/platform.js)有一些很好的经验（[这里是演示](https://bestiejs.github.io/platform.js/)），但仍然建议谨慎：

## 原帖

我想向您推荐《 [WhichBrowser](https://github.com/WhichBrowser/WhichBrowser)：**每个人都在撒谎**》的作者。

基本上，没有浏览器是诚实的。无论您使用 Chrome 还是 IE，它们都会告诉您它们是支持 Gecko 和 Safari 的“Mozilla Netscape”。在这个线程中飞来飞去的任何小提琴上自己尝试一下：

[hims056 的小提琴](http://jsfiddle.net/y26Zx/)

[哈里哈兰的小提琴](http://jsfiddle.net/Harigr/u5aoLnuc/)

或任何其他...用 Chrome 试试（可能仍然成功），然后用最新版本的 IE 试试，你会哭的。当然，有一些启发式方法可以解决问题，但是掌握所有边缘情况会很乏味，而且它们很可能在一年后不再起作用。

以您的代码为例：

```
<div id="example"></div>
<script type="text/javascript">
txt = "<p>Browser CodeName: " + navigator.appCodeName + "</p>";
txt+= "<p>Browser Name: " + navigator.appName + "</p>";
txt+= "<p>Browser Version: " + navigator.appVersion + "</p>";
txt+= "<p>Cookies Enabled: " + navigator.cookieEnabled + "</p>";
txt+= "<p>Platform: " + navigator.platform + "</p>";
txt+= "<p>User-agent header: " + navigator.userAgent + "</p>";
document.getElementById("example").innerHTML=txt;
</script> 
```

铬 说：

> 浏览器代号：Mozilla
> 
> 浏览器名称：网景
> 
> 浏览器版本：5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/40.0.2214.115 Safari/537.36
> 
> 启用 Cookie：真
> 
> 平台：Win32
> 
> 用户代理标头：Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/40.0.2214.115 Safari/537.36

IE 说：

> 浏览器代号：Mozilla
> 
> 浏览器名称：网景
> 
> 浏览器版本：5.0（Windows NT 6.1；WOW64；Trident/7.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0；.NET4.0C；.NET4 .0E; InfoPath.3; rv:11.0) 像 Gecko
> 
> 启用 Cookie：真
> 
> 平台：Win32
> 
> 用户代理标头：Mozilla/5.0（Windows NT 6.1；WOW64；Trident/7.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0；.NET4。 0C；.NET4.0E；InfoPath.3；rv:11.0) 像 Gecko

至少 Chrome 仍然有一个字符串，其中包含带有确切版本号的“Chrome”。但是，对于 IE，你必须从它支持的东西中推断出来才能真正弄清楚（还有谁会吹嘘他们支持`.NET`或`Media Center`：P），然后将它与最后的 进行匹配`rv:`以获得版本号。当然，一旦 IE 12（或任何他们想要的名称）问世，即使如此复杂的启发式方法也很可能会失败。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-01-16T10:00:19.787

为此目的有一个库：[https ://github.com/bestiejs/platform.js#readme](https://github.com/bestiejs/platform.js#readme)

然后你可以这样使用它

```
// example 1
platform.os; // 'Windows Server 2008 R2 / 7 x64'

// example 2 on an iPad
platform.os; // 'iOS 5.0'

// you can also access on the browser and some other properties
platform.name; // 'Safari'
platform.version; // '5.1'
platform.product; // 'iPad'
platform.manufacturer; // 'Apple'
platform.layout; // 'WebKit'

// or use the description to put all together
platform.description; // 'Safari 5.1 on Apple iPad (iOS 5.0)' 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2017-01-25T06:48:42.543

要使用 JavaScript 检测操作系统，最好使用 navigator.userAgent 而不是 navigator.appVersion

```
{
  var OSName = "Unknown OS";
  if (navigator.userAgent.indexOf("Win") != -1) OSName = "Windows";
  if (navigator.userAgent.indexOf("Mac") != -1) OSName = "Macintosh";
  if (navigator.userAgent.indexOf("Linux") != -1) OSName = "Linux";
  if (navigator.userAgent.indexOf("Android") != -1) OSName = "Android";
  if (navigator.userAgent.indexOf("like Mac") != -1) OSName = "iOS";
  console.log('Your OS: ' + OSName);
}
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-06-27T04:55:51.737

正如@Jalpesh 所说，PPK 的脚本是此类事情的权威，这可能会为您指明正确的方向

```
var wn = window.navigator,
        platform = wn.platform.toString().toLowerCase(),
        userAgent = wn.userAgent.toLowerCase(),
        storedName;

// ie
    if (userAgent.indexOf('msie',0) !== -1) {
        browserName = 'ie';
        os = 'win';
        storedName = userAgent.match(/msie[ ]\d{1}/).toString();
        version = storedName.replace(/msie[ ]/,'');

        browserOsVersion = browserName + version;
    } 
```

取自[https://github.com/leopic/jquery.detectBrowser.js/blob/sans-jquery/jquery.detectBrowser.sansjQuery.js](https://github.com/leopic/jquery.detectBrowser.js/blob/sans-jquery/jquery.detectBrowser.sansjQuery.js)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-01-28T10:08:59.240

试试这个。。

```
// Browser with version  Detection
navigator.sayswho= (function(){
    var N= navigator.appName, ua= navigator.userAgent, tem;
    var M= ua.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);
    if(M && (tem= ua.match(/version\/([\.\d]+)/i))!= null) M[2]= tem[1];
    M= M? [M[1], M[2]]: [N, navigator.appVersion,'-?'];
    return M;
})();

var browser_version          = navigator.sayswho;
alert("Welcome to " + browser_version); 
```

检查工作小提琴（[在这里](http://jsfiddle.net/Harigr/u5aoLnuc/)）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-30T09:15:39.903

适用于 Firefox、Chrome、Opera、Internet Explorer 和 Safari

```
var ua="Mozilla/1.22 (compatible; MSIE 10.0; Windows 3.1)";
//ua = navigator.userAgent;
var b;
var browser;
if(ua.indexOf("Opera")!=-1) {

    b=browser="Opera";
}
if(ua.indexOf("Firefox")!=-1 && ua.indexOf("Opera")==-1) {
    b=browser="Firefox";
    // Opera may also contains Firefox
}
if(ua.indexOf("Chrome")!=-1) {
    b=browser="Chrome";
}
if(ua.indexOf("Safari")!=-1 && ua.indexOf("Chrome")==-1) {
    b=browser="Safari";
    // Chrome always contains Safari
}

if(ua.indexOf("MSIE")!=-1 && (ua.indexOf("Opera")==-1 && ua.indexOf("Trident")==-1)) {
    b="MSIE";
    browser="Internet Explorer";
    //user agent with MSIE and Opera or MSIE and Trident may exist.
}

if(ua.indexOf("Trident")!=-1) {
    b="Trident";
    browser="Internet Explorer";
}

// now for version

var version=ua.match(b+"[ /]+[0-9]+(.[0-9]+)*")[0];

console.log("broswer",browser);
console.log("version",version); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-08-16T15:13:45.547

我无法使用相同的代码在 Chrome、Firefox、IE11 和 Edge 上获得其他一些答案。我想出了以下内容，它似乎适用于上面列出的那些浏览器。我还想看看用户使用的是什么操作系统。我没有针对具有用户覆盖的用户代理设置的浏览器对此进行测试，因此里程可能会有所不同。IF 的顺序对于正常工作很重要。

```
let os, osStore, bStore, appVersion, browser;
// Chrome
if(navigator.vendor === "Google Inc."){
    appVersion = navigator.appVersion.split(" ");
    os = [appVersion[1],appVersion[2],appVersion[3],appVersion[4],appVersion[5]].join(" ");
    os = os.split("(")[1].split(")")[0]
    browser = appVersion[appVersion.length-2].split("/").join(" ");
    console.log("Browser:",browser,"- OS:",os);
}

// Safari
else if(navigator.vendor === "Apple Computer, Inc."){
    appVersion = navigator.appVersion.split(" ");
    os = [appVersion[1],appVersion[2],appVersion[3],appVersion[4],appVersion[5]].join(" ");
    os = os.split("(")[1].split(")")[0];
    browser = appVersion[appVersion.length-1].split("/").join(" ");
    console.log("Browser:",browser,"- OS:",os);
}

// Firefox is seems the only browser with oscpu
else if(navigator.oscpu){
    bStore = navigator.userAgent.split("; ").join("-").split(" ");
    browser = bStore[bStore.length-1].replace("/"," ");
    osStore = [bStore[1],bStore[2],bStore[3]].join(" ");
    osStore = osStore.split("-");
    osStore.pop(osStore.lastIndexOf)
    osStore = osStore.join(" ").split("(");
    os = osStore[1];
    console.log("Browser:",browser,"- OS:",os);
}

// IE is seems the only browser with cpuClass
// MSIE 11:10 Mode
else if(navigator.appName === "Microsoft Internet Explorer"){
    bStore = navigator.appVersion.split("; ");
    browser = bStore[1]+" / "+bStore[4].replace("/"," ");
    os = [bStore[2],bStore[3]].join(" ");
    console.log("Browser:",browser,"- OS:",os);
}

// MSIE 11
else if(navigator.cpuClass){
    bStore = navigator.appVersion.split("; ");
    osStore = [bStore[0],bStore[1]].join(" ");
    os = osStore.split("(")[1];
    browser = "MSIE 11 "+bStore[2].split("/").join(" ");
    console.log("Browser:",browser,"- OS:",os);
}

// Edge
else if(navigator.appVersion){
    browser = navigator.appVersion.split(" ");
    browser = browser[browser.length -1].split("/").join(" ");
    os = navigator.appVersion.split(")")[0].split("(")[1];
    console.log("Browser:",browser,"- OS:",os);
}

// Other browser
else {
    console.log(JSON.stringify(navigator));
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-01-03T10:35:05.367

检测用户**操作系统的代码**

```
let os = navigator.userAgent.slice(13).split(';')
os = os[0] 
```

```
console.log(os) 
```

```
Windows NT 10.0 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-07-23T04:48:11.087

要获取基于 Mozilla 核心的新 Microsoft Edge，请添加：

```
else if ((verOffset=nAgt.indexOf("Edg"))!=-1) {
 browserName = "Microsoft Edge";
 fullVersion = nAgt.substring(verOffset+5);
} 
```

前

```
// In Chrome, the true version is after "Chrome" 
else if ((verOffset=nAgt.indexOf("Chrome"))!=-1) {
 browserName = "Chrome";
 fullVersion = nAgt.substring(verOffset+7);
} 
```

# c - 使用 sscanf() 从一行中仅输出 2 个标记

> ID：11219587
> 
> 赞同：0
> 
> 时间：2012-06-27T04:48:31.883
> 
> 标签：c, scanf

我需要编写一个程序，一次输入一行，**只**输出有两个标记的行。假设输入不超过 50 个字节。我使用 fgets 一次捕获一行，并使用 sscanf 一次获取令牌并查看它是否返回 2。但是，它似乎不起作用。有人可以建议怎么做吗？

```
#include <stdio.h>

int main(void)
{
    char buff[50];
    char token[50];
    int number;

    while (fgets(buff, sizeof(buff), stdin) != NULL)
    {
        while ((number = sscanf(buff, "%s", token)) != EOF)
        {
            number = sscanf(buff, "%s", token);
            if (number == 2)
            {
                printf("%s\t", token);
            }
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T04:58:48.067

做这个 -

```
number = sscanf(buff, "%s %s", token, token); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T04:58:56.333

来自[http://www.cplusplus.com/reference/clibrary/cstdio/sscanf/](http://www.cplusplus.com/reference/clibrary/cstdio/sscanf/)：

“s：字符串。这将读取后续字符，直到找到空格（空格字符被认为是空白、换行符和制表符）。”

您只使用了 1 %s，因此它永远不会返回超过 1。无论如何，您已经在 while 条件内调用了 sscanf，无需在 while 主体内再次调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T06:09:50.347

我不会使用 scanf 来解决您的问题。您可以使用`strtok`定义的函数`string.h`。因此，您的问题的答案可能是：

```
#include <stdio.h>
#include <string.h>

int main(void) {
    char buff[50];
    char *token;
    int number=0;

    while (fgets(buff, sizeof(buff), stdin) != NULL) {

        if((token = strtok (buff, " ")) != NULL) {
            ++number;
            while ((token = strtok (NULL, " ")) != NULL)
                ++number;
        }
        if(number == 2)
            printf("Current line has two tokens\n");
        else printf("current line has %d tokens\n", number);

        number=0;
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T06:10:38.557

请试试这个

```
#include <stdio.h>

int main(void)
{
char buff[50];
char token1[50], token2[50];

while (fgets(buff, sizeof(buff), stdin) != NULL)
{
    if( sscanf(buff, "%s %s", token1, token2) == 2 )
    {
        printf("%s ", buff);
    }
}
   return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T06:25:01.137

这有效..

```
#include <stdio.h>

int main(void)
{
    char buff[50];
    char token1[50];
    char token2[50];
    char token3[50];

    while (fgets(buff, sizeof(buff), stdin) != NULL)
    {

        if (sscanf(buff, "%s%s%s", token1, token2, token3) == 2)
        {
            printf("%s %s\n", token1, token2);
        }
    }
    return 0;
} 
```

# firefox-addon - 可以将普通的“contentAreaContextMenu”添加到 XUL 浏览器元素吗？

> ID：11219597
> 
> 赞同：2
> 
> 时间：2012-06-27T04:49:40.327
> 
> 标签：firefox-addon, xul

我在边栏中使用 xul 浏览器元素（想法是能够动态控制其内容）。

同时，我已经弄清楚了如何从在线文档中手动构建上下文菜单

```
<window id="main-window">
  <popupset>
     <menupopup id="ins-del-menu" onpopupshowing="showHideItems()">
       <menuitem label="Insert"/>
       <menuitem label="Delete"/>
     </menupopup>
  </popupset>
</window>
<browser id="mypanel-browser" type="chrome" src="chrome://emptysidebar/content/test.html" context="ins-del-menu" flex="1"/> 
```

这显然不是我想要的上下文菜单（我认为尝试复制正常的上下文菜单有点浪费精力。

我应该能够将我的 context= 指定为 contentAreaContextMenu 吗？（它似乎不起作用，但也许我在做一些愚蠢的事情）。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:01:09.287

该`contentAreaContextMenu`元素在[浏览器窗口](http://hg.mozilla.org/mozilla-central/file/d254c07f3301/browser/base/content/browser.xul#l233)中定义（[实际菜单内容](http://hg.mozilla.org/mozilla-central/file/d254c07f3301/browser/base/content/browser-context.inc)）。并且有很多[代码驱动该菜单](http://hg.mozilla.org/mozilla-central/file/d254c07f3301/browser/base/content/nsContextMenu.js)，以及实现上下文菜单所指命令的代码。将所有这些从浏览器窗口中移除几乎是不可能的（即使你设法做到了，你也会做出可能会在下一个 Firefox 版本中打破的假设），遗憾的是没有办法在你自己的版本中重新实现必要的部分窗户。

# c# - 如何在 asp.net(c#) 中更改颜色。如果树节点检查

> ID：11219602
> 
> 赞同：1
> 
> 时间：2012-06-27T04:50:40.253
> 
> 标签：c#, asp.net, treeview

在我的 ASP.NET 应用程序中，使用启用了复选框的 Treeview 控件。在那个树视图中，如果我检查了 treenode 想要在特定的选中节点中显示不同的颜色。见下文

```
 foreach (treenode node in treeview.nodes)
 {
    if (node.checked == true)
    {
      "change the color of the node" 
    }   
 } 
```

我曾经在编码下面检查这样的节点。但没有标记来更改已检查节点的颜色

```
 protected void TreeView1_TreeNodeCheckChanged(object sender, TreeNodeEventArgs e)
    {           

        if (e.Node.ChildNodes.Count > 0)
        {
            CheckAllChildNodes(e.Node, e.Node.Checked);
        }

        if (e.Node.ChildNodes.Count == 0)
        {
            CheckAllParentNodes(e.Node);
        }
     }

     private void CheckAllChildNodes(System.Web.UI.WebControls.TreeNode treeNode, bool nodeChecked)
    {
        foreach (System.Web.UI.WebControls.TreeNode node in treeNode.ChildNodes)
        {
            node.Checked = nodeChecked;

            if (node.ChildNodes.Count > 0)
            {
                this.CheckAllChildNodes(node, nodeChecked);
            }
        }
    }
    private void CheckAllParentNodes(System.Web.UI.WebControls.TreeNode treeNode)
    {
        if (treeNode.Parent != null)
        {
            if (treeNode.Checked == false)
            {
                treeNode.Parent.Checked = false;
                CheckAllParentNodes(treeNode.Parent);
            }
        }
    } 
```

请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T04:54:32.173

设置 SelectedNode 的 BackColor 属性可以使其自动化。

```
treeview.SelectedNodeStyle.BackColor = System.Drawing.Color.Silver; 
```

**编辑**

asp.net TreeView 中的单个节点没有 ForeColor 属性。要更改前景色，您必须扩展 TreeNode 并在自定义的 TreeNode 类中应用样式。您将不得不在 TreeView 节点集合中使用这个自定义的 TreeNode，而不是使用默认的 TreeNode 类。详细了解这些文章[**第 1**](http://forums.asp.net/t/949089.aspx/1)条、**[第 2 条](http://weblogs.asp.net/dannychen/archive/2006/01/25/436454.aspx)**将对您有所帮助。

在 HTML 中

```
<asp:TreeView ID="TreeView1" runat="server">
    <Nodes>
        <My:CustomTreeNode Text="Node A"
                           Value="Node A">
            <My:CustomTreeNode Text="Node B"
                               Value="Node B">
            </My:CustomTreeNode>
        </My:CustomTreeNode>
    </Nodes>
</asp:TreeView> 
```

**在代码后面**

```
public class CustomTreeNode : TreeNode
{
    protected override void RenderPreText(HtmlTextWriter writer)
    {
       writer.AddStyleAttribute(HtmlTextWriterStyle.Color, "green");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T06:10:03.090

如果我清楚地理解您的问题，这有点棘手，您必须执行以下步骤

1）像这样设置树视图的每个节点的文本

```
<asp:TreeNode Text='<font color="Red"> Test Inner 1</font>' Value="1"></asp:TreeNode> 
```

2）在后面的代码中使用以下代码

```
protected void TreeView1_SelectedNodeChanged(object sender, EventArgs e)
{
    if(Session["lastNode"] != null)
    {
       TreeNode lastNode = Session["lastNode"] as TreeNode;

       TreeNode tn = TreeView1.FindNode(Server.HtmlEncode(lastNode.ValuePath));
       tn.Text = tn.Text.Replace(@"color=""Red""", @"color=""Blue""");

     }

    Session["lastNode"] = TreeView1.SelectedNode;
} 
```

# android - Android：多次写入同一个文件

> ID：11219611
> 
> 赞同：1
> 
> 时间：2012-06-27T04:51:54.983
> 
> 标签：android, sd-card, filewriter, bufferedwriter

安卓的新功能。对不起！我正在尝试创建以下...

1.  等待计时器完成。（这里没有问题）。
2.  将时间写入日志文件。
3.  再次激活定时器。
4.  返回第 1 步并重复。

写入文件的代码如下...

```
 File file = new File("/sdcard/log.txt");
    BufferedWriter writer = new BufferedWriter(new FileWriter(file));
    writer.write(str);
    writer.newLine();
    writer.flush();
    writer.close(); 
```

该代码仅写入文件中的最后一个 .write ！先前的 WRITE 被删除。我怀疑它每次都创建一个新文件并编写最新行。我尝试使用 FOS 和 OSW，但结果相同！请帮忙，我在这个上卡了将近 48 小时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T04:57:13.373

使用[`FileWriter`](http://developer.android.com/reference/java/io/FileWriter.html)附加模式。

```
BufferedWriter writer = new BufferedWriter(new FileWriter(file, true)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T04:57:21.393

您可能希望将此构造函数用于 FileWriter ：

[FileWriter（文件文件，布尔附加）](http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html#FileWriter%28java.io.File,%20boolean%29)

> 通过使用第二个参数 as `true`then 字节将被写入文件的末尾而不是开头。

在您的代码中使用：`BufferedWriter writer = new BufferedWriter(new FileWriter(file,true));`

# jquery - 链接到 jquery 函数

> ID：11219613
> 
> 赞同：0
> 
> 时间：2012-06-27T04:52:07.573
> 
> 标签：jquery, ruby-on-rails

我对一般编码相当陌生，学习在 Rails 中编码，并且觉得我缺少 jquery 的一些非常基本的东西。

在我的用户资料页面上，有一个链接供用户更改他们的头像图片：

```
<div id="show_avatars_choice">
  <%= link_to "Change Avatar", "#", remote: true %>
</div> 
```

然后，在 /assets/javascripts/users.js 中，我有：

```
$("#show_avatars_choice").on("click", function(event){
  event.preventDefault();
  alert("you clicked me");
}) 
```

最终，警报将被一些代码替换，这些代码允许显示选择的替代头像图片，但在这个阶段，当我单击链接时，即使是简单的警报也不会弹出。我究竟做错了什么？

application.js 文件确实包含以下几行：

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T07:35:44.807

Tracy Fu 说的没错，元素应该在绑定前的页面上。她的回答是正确的，但如果你这样做会更短：

```
$(document).on("click", "#show_avatars_choice", function(event){
  event.preventDefault();
  alert("you clicked me");
})​ 
```

看看它在行动：http: [//jsfiddle.net/sXVzU/](http://jsfiddle.net/sXVzU/)

Tracy Fu 的小提琴也做了一些改动：http: [//jsfiddle.net/4qRjt/](http://jsfiddle.net/4qRjt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T04:49:23.063

问题是否可能是您在元素存在于 DOM 之前绑定事件？据我了解，jQuery`on`仍然要求元素在初始绑定之前位于页面上。

你能试试这个：

```
// This will run when the DOM is loaded
$(function() {
  $("#show_avatars_choice").on("click", function(event){
    event.preventDefault();
    alert("you clicked me");
  })
}); 
```

这是一个显示在 DOM 加载之前和之后尝试绑定的小提琴：http: [//jsfiddle.net/tracyfu/FX5aC/](http://jsfiddle.net/tracyfu/FX5aC/)

# php - 注册后如何显示弹出框？

> ID：11219616
> 
> 赞同：1
> 
> 时间：2012-06-27T04:52:17.953
> 
> 标签：php, javascript, jquery, popup

我想在会员注册后显示一个弹出框，类似于[jQuery popup](http://www.jquerypopup.com/documentation.php)。我想在弹出框中包含一个按钮，所以我不能使用警报功能。

这是我当前的代码：

```
if($_SESSION['msg']['reg-success'])
{
    echo '<div class="success">'.$_SESSION['msg']['reg-success'].'</div>';
    unset($_SESSION['msg']['reg-success']);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T04:54:45.267

您将需要使用像 javascript 这样的动态脚本语言。本质上是设置用户单击按钮时 Div 的可见性。

您还需要向 div 添加一个 id：

```
echo '<div class="success" id="success">'.$_SESSION['msg']['reg-success'].'</div>'; 
```

基本上像这样添加一个链接：

```
echo "<a href=\"javascript:hide(document.getElementById('success'))\">Hide box</a>"; 
```

然后添加脚本：

```
echo '<script type="text/javascript">
function hide(a){
    a.style.display="none"
}
</script>'; 
```

应该这样做......最终结果是这样的：

```
if($_SESSION['msg']['reg-success']) {
    echo '<div class="success" id="success">'.$_SESSION['msg']['reg-success'];
    echo "<a href=\"javascript:hide(document.getElementById('success'))\">Hide box</a>";
    echo '</div>';
    unset($_SESSION['msg']['reg-success']);
}

echo '<script type="text/javascript">
    function hide(a){
        a.style.display="none"
    }
    </script>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T05:00:18.620

在这里你可以这样做。

```
<?php if($_SESSION['msg']['reg-success']) { ?>

<script type="text/javascript">
openPopup();// Call popup function
</script>

<?php } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T05:00:19.533

你应该使用[Noty](http://needim.github.com/noty/#buttons)。我相信这是您正在寻找的东西。但是，您将不得不弄乱源代码，以便在用户注册后完全按照您的网站要做的事情。

```
$('#form').submit(function() {
  noty({
    text: "Display your message HERE", 
    buttons: [
      {type: 'button green', text: 'Enter your text for the button HERE', click: function($noty) {

          $noty.close();

          **doSomethingHere()**
        }
      },
      {type: 'button pink', text: 'Enter your text for the button HERE', click: function($noty) {
          $noty.close();

          **doSomethingHere()**
        }
      }
      ],
    closable: false,
    timeout: false
  });
  return false;
}); 
```

如果您打算使用它，请告诉我是否需要帮助。您必须在站点中包含源代码，然后才能运行。单击[此处](http://needim.github.com/noty/#installation)获取您站点的安装帮助

# android - 如何在android中显示指定的国家

> ID：11219618
> 
> 赞同：0
> 
> 时间：2012-06-27T04:52:44.700
> 
> 标签：android, android-mapview

我想显示特定的国家地图，并仅指示其所在地区的状态。

```
MapView maps=(MapView) findViewById(R.id.mapView);
maps.setSatellite(true);
final MapController mapControl = maps.getController();
mapControl.setZoom(17);
GeoPoint newPoint = new
GeoPoint((int)(42 * 1E6), (int)(2 * 1E6));
mapControl.animateTo(newPoint); 
```

我使用此代码，但它向我显示了法国地图，但它没有在一个固定屏幕上指示具有指定区域的状态。所以请帮助我，帮助者必须感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:09:52.900

例如，您必须为国家或州提供特定的纬度和经度并分配 Geopoint

印度的纬度和经度是 21.7679° N，78.8718° E

如果您传递这些值，则地图将显示特定国家/地区..

# node.js - mongodb：可以找到二维索引返回距离吗？

> ID：11219619
> 
> 赞同：1
> 
> 时间：2012-06-27T04:53:02.097
> 
> 标签：node.js, mongodb, mongoose, spatial-index

我从 mongodb 文档中看到，带有**geoNear 返回距离**的 db.runCommand也。

我在 node.js 中使用猫鼬，**想知道**Model.find({'loc': { $near: [lng, lat], $maxDistance:5/111.12},.... .)

如果您有多个 2d 索引，则带有 geoNear 的 runCommand 将不起作用。我在一个集合中有 2 个 2d 索引。一个在模式中定义，另一个是 DbRef 的一部分。

另外，我对用于 mongoose 的 runco​​mmand 的确切语法不太满意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:14:26.880

[geoNear](http://mongodb.github.com/node-mongodb-native/api-generated/collection.html#geonear)在本地 MongoDB 驱动程序中可用，因此通过扩展在 mongoose 中，将搜索文档中的所有地理索引，并可以在那里多次返回它，您可以传递参数 uniqueDocs 以确保您没有重复的条目。

```
collection.geoNear(50, 50, {uniqueDocs:true}, function(err, docs) {
}); 
```

另一种方法是对特定字段进行近距离查询，但您可能必须对距离值进行一些转换才能获得正确的范围。我不记得那会是什么。最好的实验场所是 mongoshell，然后将其转换为 node.js 的命令。

# wpf - 如何使用后面的代码暂停 wpf 动画？

> ID：11219620
> 
> 赞同：1
> 
> 时间：2012-06-27T04:53:09.240
> 
> 标签：wpf, animation

鉴于我的动画`scene1`。如何使用`C# code`后面的“跳过”按钮暂停它，然后播放另一个动画`scene2`。

```
<Window.Resources>
    <Storyboard x:Key="scene1">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="whitebox">
            <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1.7" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
        <StringAnimationUsingKeyFrames Storyboard.TargetProperty="(TextBlock.Text)" Storyboard.TargetName="charName">
            <DiscreteStringKeyFrame KeyTime="0:0:2" Value="Teacher"/>
            <DiscreteStringKeyFrame KeyTime="0:0:7.8" Value="Teacher"/>
            <DiscreteStringKeyFrame KeyTime="0:0:8" Value="Teacher"/>
        </StringAnimationUsingKeyFrames>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.HorizontalAlignment)" Storyboard.TargetName="charName">
            <DiscreteObjectKeyFrame KeyTime="0:0:2" Value="{x:Static HorizontalAlignment.Left}"/>
            <DiscreteObjectKeyFrame KeyTime="0:0:7.8" Value="{x:Static HorizontalAlignment.Left}"/>
            <DiscreteObjectKeyFrame KeyTime="0:0:8" Value="{x:Static HorizontalAlignment.Left}"/>
        </ObjectAnimationUsingKeyFrames>
        <ObjectAnimationUsingKeyFrames
        (too long… etc.) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:09:38.017

在后面的代码中，使用 this.Resources["scene1"] 获取 Storyboard 对象。

```
Storyboard storyBoard = this.Resources["scene1"] as Storyboard;
storyBoard.Begin(); 
```

故事板完成后，使用故事板“已完成”事件启动另一个动画

```
storyBoard.Completed += eventHandler 
```

称呼

```
storyBoard.Stop() 
```

停止动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:42:26.920

除了 Jeric Paul Calderon 的回答，还有暂停功能：`storyBoard.Pause()`
主要是`Pause()`在当前播放位置暂停动画，并`Stop()`确实停止并返回到起点。

# php - 如何从 PHP 中的 IP 地址/国家名称中查找时区 ID？

> ID：11219635
> 
> 赞同：7
> 
> 时间：2012-06-27T04:55:48.730
> 
> 标签：php, timezone

谁能告诉我PHP中是否有任何方法可以从IP地址或国家名称中获取时区区域，例如（'Asia/Calcutta'）？

描述：

我正在尝试根据他/她的国家/地区设置用户时区。我从他的 IP 地址获取用户国家/地区，但我需要该国家/地区的时区区域，例如（'Asia/Calcutta'）来检查该国家/地区是否启用 DST。谁能给我一些合适的PHP解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T05:09:39.530

**使用 IP 地址**

时区有时遵循一些古怪的规则。IP 地理定位绝非精确（尽管一些供应商声称）。

话虽如此，您当然可以使用 MaxMind 等 Geo IP 产品找到城市和国家：

[http://www.maxmind.com/app/geolite](http://www.maxmind.com/app/geolite)

其中包括一个 PHP 模块

[http://www.maxmind.com/app/php](http://www.maxmind.com/app/php)

然后，您可以使用 MaxMind API 来尝试估计用户的时区

[http://www.maxmind.com/app/faq#timezone](http://www.maxmind.com/app/faq#timezone)

**选择**

如果你想依赖用户的时钟而不是 IP 地址，jsTimezoneDetect 工作得很好（尽管它并不完美）。

[https://bitbucket.org/pellepim/jstimezonedetect/wiki/Home](https://bitbucket.org/pellepim/jstimezonedetect/wiki/Home)

**概括**

这两种技术都不能在所有情况下完美运行。确保您允许您的用户更正任何自动生成的时区建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-09T07:53:16.573

这样你得到时区..

```
<?php
$jsondata = file_get_contents("https://ipapi.co/json");
$data = json_decode($jsondata, true);
echo '<pre>';
print_r($data);
echo '</pre>';

//Timezone
echo $data['timezone'];
?>

//OUTPUT
Array
(
    [ip] => 2405:204:f089:d0e8:b1e7:a83e:9e2d:1bb5
    [city] => Bhubaneswar
    [region] => Odisha
    [region_code] => OR
    [country] => IN
    [country_name] => India
    [continent_code] => AS
    [postal] => 
    [latitude] => 20.2333
    [longitude] => 85.8333
    [timezone] => Asia/Kolkata
    [utc_offset] => +0530
    [country_calling_code] => +91
    [currency] => INR
    [languages] => en-IN,hi,bn,te,mr,ta,ur,gu,kn,ml,or,pa,as,bh,sat,ks,ne,sd,kok,doi,mni,sit,sa,fr,lus,inc
    [asn] => AS55836
    [org] => Reliance Jio Infocomm Limited
)

Asia/Kolkata 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T06:04:35.303

我认为一个更好的主意是找出根据用户客户端设置设置的时区。也许存在用户处于他不想成为的时区的情况。

一种简单的可能性是询问用户，但这很容易。

使用 JavaScript，您可以在几分钟内找出与 UTC的[偏移量。](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset)您还可以了解客户是否在夏令时 (DST) 的国家/地区以及 dst 是否处于活动状态。这可以通过比较两个日期对象的时间来完成，一个是月份`January`，一个是月份`July`。

```
var dst1, dst2, expires, hemisphere, now;

now = new Date(); expires = new Date(); dst1 = new Date(); dst2 = new Date();

expires.setTime(now.getTime() + 31536000000);
setCookie('timezone_offset', now.getTimezoneOffset(), expires, '/');

dst1.setDate(1);
dst1.setMonth(1);
dst2.setDate(1);
dst2.setMonth(7);

if (parseInt(dst1.getTimezoneOffset()) === parseInt(dst2.getTimeZoneOffset())) {
  setCookie('timezone_dst', 0, expires, '/');
} else {
  hemisphere = parseInt(d1.getTimezoneOffset()) - parseInt(d2.getTimezoneOffset());
  if ((hemisphere > 0 && parseInt(d1.getTimezoneOffset()) === parseInt(now.getTimezoneOffset())) || (hemisphere < 0 && parseInt(d2.getTimezoneOffset()) === parseInt(now.getTimezoneOffset()))) {
    setCookie('timezone_dst', '0', expires, '/');
  } else {
    setCookie('timezone_dst', '1', expires, '/');
  }
} 
```

使用 PHP 读取 cookie 并使用[timezone_name_from_abbr()](http://de.php.net/manual/en/function.timezone-name-from-abbr.php)解释它们的信息：

```
$timezone = timezone_name_from_abbr('', $_COOKIE['timezone_offset'] * 60, $_COOKIE['timezone_dst']); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-28T09:10:13.867

如果您想在服务器端执行此操作，您可以使用 PHP 执行此操作：

```
$url = "https://ipsidekick.com/json";
$result = file_get_contents($url);
$json = json_decode($result, true);
print("It's " . $json["gmtOffset"] . " at " . $json["timeZoneName"]); 
```

请注意，这是同步的。

或者，如果您可以在客户端执行此操作。您可以将其与 jQuery 或等效项一起使用：

```
$.get("https://ipsidekick.com/json", function(response) {
  console.log(response.ip +
    " It's " + response.gmtOffset +
    " from " + response.timeZoneName);
}); 
```

免责声明：我运行[IP Sidekick](https://ipsidekick.com)。

# node.js - 在 node.js 中使用 LESS

> ID：11219637
> 
> 赞同：9
> 
> 时间：2012-06-27T04:56:03.483
> 
> 标签：node.js, less

Less 很神奇，我想使用 node.js，因为使用 less.js 性能不好。我测试我在 Windows 上使用 xamp 的目的，我安装了 node.js，但我应该在哪里写什么。我安装 express.js`npm install -g express` 和更少`npm install -g less`

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-27T07:03:00.630

如果您使用的是 expressjs，则可以安装

```
npm install less-middleware 
```

然后在您的应用程序（app.js）中

```
var lessMiddleware = require('less-middleware'); 
```

然后你必须告诉 expressjs 使用 less-middleware 做

```
app.configure(function(){
  //other configuration here...
  app.use(lessMiddleware({
    src      : __dirname + "/public",
    compress : true
  }));
  app.use(express.static(__dirname + '/public'));
}); 
```

现在在你的 [appname]/public/stylesheets/custom.less

被翻译成常规的 css custom.css

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-28T14:57:36.020

如果您使用的是 express 4.x 和 less-middleware 0.2.x beta（目前是最新的），那么语法会有些不同。

这是一样的：

```
$ npm install less-middleware 
```

但是中间件有一个`source`和三个选项参数：

```
function(source, options, parserOptions, compilerOptions) 
```

例子：

```
app.use(require('less-middleware')(
    __dirname + 'public/style/less', // source
    { dest: __dirname + 'public/style/css' }, // options
    {}, // parser
    { compress: 'auto' } // complier
));

app.use(express.static(__dirname + '/public')); 
```

编译器的自动压缩非常好，`style.css`会导致未压缩，`style.min.css`并会给你一个压缩文件。

有关更多信息，您应该在此处查看迁移指南和源代码：[https ://github.com/emberfeather/less.js-middleware](https://github.com/emberfeather/less.js-middleware)

# jquery - JQuery Cookies：尝试检索 cookie 值

> ID：11219638
> 
> 赞同：0
> 
> 时间：2012-06-27T04:56:08.520
> 
> 标签：jquery, cookies, set

我正在使用[Jquery Cookie](https://github.com/carhartl/jquery-cookie)，但在设置和检索信息时遇到了困难。

到目前为止，我所拥有的是：

```
 <script type="text/javascript" charset="utf-8" src="js/jquery.cookie.js"></script>
     <script type="text/javascript">
        $(function() {
        var cookiedate = new Date();
        cookiedate.setTime(cookiedate.getTime() + (60 * 60 * 1000));
        $.cookie("mycookie", "checked", { expires: cookiedate, path: '/' });
        console.log(cookiedate);
          alert( $.cookie("mycookie") );
              });
    </script> 
```

但它只是不工作。

谁能帮我找出我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:01:30.810

jquery.Cookie 为您处理日期。只需输入您希望 cookie 有效的天数：

```
 $(function() {
    $.cookie("mycookie", "checked", { expires: 365, path: '/' }); //valid for a year
    alert( $.cookie("mycookie") );
  }); 
```

PS 以防万一您使用 Chrome 并在本地进行测试 - Chrome 不支持本地 cookie - 将其上传到服务器。

# ruby-on-rails - 如何在 Heroku Rails 应用程序中显示“上次部署”时间戳？

> ID：11219639
> 
> 赞同：7
> 
> 时间：2012-06-27T04:56:08.600
> 
> 标签：ruby-on-rails, git, heroku, continuous-deployment

我想更新一个环境变量或其他东西来跟踪当前活动的部署时间。有什么方法可以从我在 Heroku 上的应用程序中自动执行此操作，还是我必须将其作为部署脚本的一部分来执行？理想情况下，我想要使用 TDDium for CI 与我一起工作的东西，并让他们在构建通过时为我推送到 Heroku。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T07:11:08.603

### 在 Heroku 上使用环境变量

你可以使用 Heroku 的[config-vars](https://devcenter.heroku.com/articles/config-vars)。这些实际上只是您通过 Heroku CLI 配置的环境变量。例如，您可以将当前日期存储在名为 DEPLOY_TIMESTAMP 的环境变量中。

```
heroku config:add DEPLOY_TIMESTAMP=$(date) 
```

然后，您应该能够从应用程序中或从命令行访问此环境变量。可以`ENV['DEPLOY_TIMESTAMP']`从 Rails 应用程序或通过解析`heroku config`本地项目目录的输出来访问该值。

### 使用别名自动化

如果你想稍微自动化一下，你可以创建一个 Git 别名来推送到 Heroku 并同时更新 DEPLOY_TIMESTAMP。请注意，您不能覆盖真正的 Git 命令的名称，例如*push*，但您可以添加自定义操作，例如*pushstamp*。例如：

```
git config alias.pushstamp \
    '! git push heroku master; heroku config:add DEPLOY_TIMESTAMP=$(date)' 
```

### 也可以看看

[混帐配置（1）](http://git-scm.com/docs/git-config)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-14T23:44:53.187

您可以通过查看只读 Heroku 文件系统中文件的时间戳来找到上次部署时间。

您可以通过直接使用 ls 查看这些时间戳来验证这一点。运行示例`heroku run rails c`：

```
irb(main):003:0> puts `ls -la`
total 96
drwx------ 14 u51199 51199  4096 May 14 22:49 .
drwxr-xr-x 15 root   root   4096 Mar 20 09:43 ..
drwx------ 10 u51199 51199  4096 May  7 02:12 app
drwx------  2 u51199 51199  4096 May  7 02:17 bin
drwx------  2 u51199 51199  4096 Mar 14 22:12 .bundle
drwx------  5 u51199 51199  4096 May  7 02:12 config
-rw-------  1 u51199 51199   226 May  7 02:12 config.ru
drwx------  3 u51199 51199  4096 May  7 02:12 db
-rw-------  1 u51199 51199  1138 May  7 02:12 Gemfile
-rw-------  1 u51199 51199 11456 May  7 02:12 Gemfile.lock
-rw-------  1 u51199 51199   542 May  7 02:12 .gitignore
drwx------  5 u51199 51199  4096 May  7 02:12 lib
drwx------  2 u51199 51199  4096 May  7 02:17 log
-rw-------  1 u51199 51199    57 May  7 02:12 Procfile
drwx------  2 u51199 51199  4096 May  7 02:13 .profile.d
drwx------  3 u51199 51199  4096 May  7 02:17 public
-rw-------  1 u51199 51199   249 May  7 02:12 Rakefile
-rw-------  1 u51199 51199   613 May  7 02:12 README.md
-rw-------  1 u51199 51199    31 May  7 02:12 .rspec
drwx------  7 u51199 51199  4096 May  7 02:12 spec
drwx------  3 u51199 51199  4096 May  7 02:18 tmp
drwx------  6 u51199 51199  4096 May  7 02:13 vendor 
```

因此，如果您想知道您的应用程序上次部署的时间，您可以使用`File.mtime`并取回一个真实`Time`对象：

```
irb(main):009:0> File.mtime("app")
=> 2015-05-07 02:12:57 +0000
irb(main):010:0> File.mtime("app").class
=> Time 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T02:17:21.457

1\. 部署到 Heroku 时没有自动方法，除非您制作部署脚本/任务。（我也在 2012 年 6 月搜索过这个）。我有一个执行部署的 rake 任务，其中一部分设置 GIT_TAG 并且我的网页（rails 中的应用程序布局）将其打印到页面上。

下面是我如何写入 Heroku GIT_TAG 配置变量（使用基于 Rails 的 Rake 任务）：

```
 tag = `git describe master --always`.strip
    `heroku config:add GIT_TAG=#{tag} --app XXXX` 
```

2\. 使用 tddium：tddium 现在支持“构建后挂钩”，我增加了他们的标准版本以在该过程中设置 GIT_TAG。首先阅读并关注[http://blog.tddium.com/2012/05/09/heroku-continuous-deployment/](http://blog.tddium.com/2012/05/09/heroku-continuous-deployment/)并在“post_build_hook”任务中添加一些内容以读取标签并设置 heroku config var，如下所示：

```
 namespace :tddium do
      def cmd(c)
        system c
      end

      desc "post_build_hook to deploy to dfc-site-qa"
      task :post_build_hook do
        ...use code verbatim from above URL (https://www.tddium.com/support/reference#customization)
        ...
        current_tag = `git describe master --always`.strip
        cmd "heroku config:add GIT_TAG=#{current_tag} --app XXXX" or puts "could not set GIT_TAG to #{current_tag}"
        ...
      end 
```

笔记：

1.  根据需要替换上面的“master”。在我的部署 rake 任务（很高兴分享）中，我允许基于分支或标签进行部署（方便绕过 heroku 仅从 master 部署的愿望）。

2.  要让 tddium 运行您的“post_build_hook”，您必须通过运行以下命令停用部署后 URL：tddium suite --edit

    并使用“拉网址”的当前值，但将“推网址”设置为空白（或默认值）。博客链接中未提及此步骤。

3.  在当前构建的 tddium 网页中，您现在将看到 post_deploy_hook 日志文件的链接（在页面的最底部），您可以打开它并查看它是如何进行的（也就是调试您的 rake 任务）。

# css - 需要自动缩放重复背景图像

> ID：11219640
> 
> 赞同：0
> 
> 时间：2012-06-27T04:56:12.267
> 
> 标签：css, background-image

我有一个 1px 宽的背景图像，它在 x 坐标上重复，用于 div 的大小可以调整。水平。我希望该背景图像自动拉伸或收缩。如何在包括 IE7+ 在内的所有主流浏览器中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:48:29.277

你知道有什么了不起吗？我们不再需要使用渐变图像。这是一个适用于所有主要浏览器的便捷渐变工具的链接，包括对 IE6、7、8 和 9 的支持

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

# css - ie8溢出-y：自动；滚动条被 PIE.htc 锁定

> ID：11219643
> 
> 赞同：1
> 
> 时间：2012-06-27T04:56:21.587
> 
> 标签：css, internet-explorer-8, scrollbar

PIE.htc 似乎导致了这个问题，但是我需要保留它以获得其他几个效果。

ie8（在 FF 和 webkit 中运行良好）

`overflow-y: auto;`当滚动条显示我可以使用滚轮时，我有一个带有 css 的嵌套 div 设置，单击向上 / dn 箭头并且它工作正常，但是滚动抓取条被锁定，即当我左键单击时它闪烁蓝色但然后返回到正常的灰色，我不能拖动它。

任何人都有解决建议

谢谢艺术

```
.outterDiv{  
  position:absolute;
  min-width: 1000px;
  min-height: 600px; 
  width:99%;  
  height:50%;  
  z-index:100;

  background-color:#212121;  
  color:#fff;  
  text-shadow:1px 1px 1px #000;  

  border:1px solid #303030;  
  -webkit-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px; 

  -moz-box-shadow:0px 0px 10px #000;  
  -webkit-box-shadow:0px 0px 10px #000;  
  box-shadow:0px 0px 10px #000;  
  behavior: url(PIE.htc);
} 
```

带滚动条的 innerDiv

```
.innerDiv{  
  position:absolute; 
  overflow-x:hidden;  
  overflow-y: auto;
  -ms-overflow-y : auto;

  left: 0%;
  width:25%; 
  margin-left:0;

  top: 5.5%;
  height:91%;   
  z-index:900;  
  margin: 0% 0% 0% 0%;
  padding: .5% 0% 0.1% 0%;

  background-color:#ababab; 

  text-shadow:1px 1px 1px #000;  

  border:1px solid #303030;  
  -webkit-border-radius: 8px;
  -moz-border-radius: 8px;
  border-radius: 8px; 

  -moz-box-shadow:0px 0px 4px #000;  
  -webkit-box-shadow:0px 0px 4px #000;  
  box-shadow:0px 0px 4px #000;   
} 
```

# javascript - JQuery 中的更改事件最初不会触发

> ID：11219648
> 
> 赞同：2
> 
> 时间：2012-06-27T04:57:04.700
> 
> 标签：javascript, jquery, wordpress

我对 jQuery 很陌生。我将它用于我的一个 WordPress 插件。我有以下代码

```
<script type="text/javascript">
  $(document).ready(function(){
    $("#tmp-preview").html($("#title").val());
    $("#title").change(function(){
      $("#tmp-preview").html(getTweetPreview);
    });
  });
</script> 
```

我希望每次 wordpress 新帖子页面的标题文本字段中的文本发生变化时，它都应该反映到一个 div 中。但问题是，该事件不会在第一次更改时触发。我的意思是，如果用户第一次编写标题并将焦点移到其他部分，则该标题不会在 div 中更新。但话又说回来，如果他更改标题，新标题确实会反映出来！为什么会这样？

我想知道的另一件事是，如果我想要即使文本字段中的焦点没有丢失，标题文本也会在每个字符更改时在 div 中更新，我是否必须使用 keydown 事件或者我可以通过更改来做到这一点事件以某种方式？

PS：问题不在于 getTweetPreview() 函数。我已经尝试过使用简单的字符串，但仍然相同。我相信这是由于 wordpress 的其他一些函数调用而发生的，因为当标题完成编辑时，它会自动保存草稿。这可能是问题吗？如果是，如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T05:35:39.363

这可能有效：

```
$("#title")
    .on(
        "input", 
        function () {
            $("#tmp-preview").html(getTweetPreview); 
        }
    ); 
```

如果其他一切都失败了，请尝试这样的事情：

```
var updateTweetPreview = function () { // DRY
    $("#tmp-preview").html(getTweetPreview); 
};

$("#title")
    .one( // sic.
        "keydown", 
        function () {
            updateTweetPreview();
            $("#title").on("change", updateTweetPreview);
        }
    ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T19:03:56.847

请使用`on()`事件功能。[自 jQuery 1.7 source](http://api.jquery.com/live/)`live()`起已弃用。

至于实际问题，我认为 WordPress 的自动保存是在自动保存完成时使用 ajax 将数据的副本加载到表单中。这将导致您的代码的内容被覆盖。尝试将其放入：

```
<script type="text/javascript">
  $(document).ready(function(){
    $("#tmp-preview").html($("#title").val());
    $("#title").on("change", function(event){
        event.stopImmediatePropagation()
        $("#tmp-preview").html(getTweetPreview());
    });
  });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T05:10:07.137

尝试使用 live 方法

```
$("#title").live('change', function(){
  $("#tmp-preview").html(getTweetPreview);
}); 
```

更多直播信息请[点击这里](http://api.jquery.com/live/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T05:17:09.143

gettweetpreview 来自哪里？因为这似乎每次都有效：

```
$("#tmp-preview").html($("#title").val());
$("#title").change(function(){
  $("#tmp-preview").html($(this).val());
}); 
```

​工作小提琴：http: [//jsfiddle.net/TNrPZ/](http://jsfiddle.net/TNrPZ/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T13:17:03.190

您可以使用 中的`keyup`事件来`jQuery`更新 div 的内容，而不会失去文本框的焦点。

**试试这个代码**。

`$("#tmp-preview").html($("#title").val()); $("#title").keyup(function(){ $("#tmp-preview").html($(this).val()); });`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T09:58:49.477

如果`getTweetPreview`是一个函数，那么你应该调用它而不是仅仅引用它。代码如下所示：

```
$("#title").live('change', function(){
  $("#tmp-preview").html(getTweetPreview());
}); 
```

这里唯一的区别是包含`()`after `getTweetPreview`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-10T13:04:02.627

我已经看到这种情况发生了，并且解决了*调用* `focus()`该元素的问题。尝试*调用*事件发生之前`focus()`完成的最后一件事。

# html - 如何设置 HTML 按钮的值？

> ID：11219651
> 
> 赞同：1
> 
> 时间：2012-06-27T04:57:37.477
> 
> 标签：html

我试过以下

```
<input type="file" name="upload" multiple="multiple" value="MyText"> 
```

但是我的按钮上的文本仍然显示“选择文件”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:02:59.593

值用于文本输入目的。按钮输入类型是提交。您可以为此使用 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T04:59:24.277

值仅适用于文本输入、按钮和具有 sumbit 类型的输入，如果没有一些 javascript，您真的无法调整输入类型文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T05:03:27.977

输入类型=“文件”由浏览器预先定义。您无法更改它，但如果您想尝试，这里有一篇好文章。

[http://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)

# c# - 如果 tiff 具有不同大小的页面，为什么 ImageResizer 会裁剪 tiff 页面？

> ID：11219653
> 
> 赞同：0
> 
> 时间：2012-06-27T04:57:51.487
> 
> 标签：c#, imageresizer

我在控制台应用程序中使用 imageresizer.net 从 tiff 图像中提取页面，但是当 tiff 包含不同大小的页面时，imageresizer 似乎将所有页面视为与第一页具有相同的尺寸。

在我的测试中，如果第一页是A4，第二页是A3，我能得到的第2页最大的部分是A4（图像的左侧是输出，右侧是截断）。imageresizer 也不会引发错误。

```
ImageBuilder.Current.Build(sourceImagePath, destinationImagePath, new ResizeSettings("page=2")); 
```

我错过了什么，还是 imageresizer.net 无法处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T23:09:00.380

**感谢您报告此错误！**

发生此错误是因为在设置活动框架或页面之前缓存了图像尺寸。

**它已在[版本 3.2.3 (changelog)](http://imageresizing.net/releases/3-2-beta-3)**中修复。

您可以[在此处找到最新的下载](http://imageresizing.net/download)。

# javascript - Backbone.js 的基本用途和好处是什么？

> ID：11219655
> 
> 赞同：4
> 
> 时间：2012-06-27T04:57:59.957
> 
> 标签：javascript, html, node.js, backbone.js

我听到了很多在使用and`backbone.js`时非常有用的消息。我已经阅读了文档，但我仍然无法理解.`html5``node.js``backbone.js`

有人可以简单地向我解释一下。另外，如果您可以指导我找到好的教程。

谢谢

编辑：看到这个问题[Backbone.js 的目的是什么？](https://stackoverflow.com/questions/5418369/what-is-the-purpose-of-backbone-js?rq=1)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T05:50:58.387

几乎每个富客户端 Web 应用程序都有一个或多个对象列表，当您执行某项操作时，其中一个对象需要更改其显示方式。想想一个 TODO 列表，它是 Backbone.js 的典型示例。这里有一些你可以做到的方法：

*   当您进行更改时，使用 jQuery 或类似的东西来更改 HTML div 本身的文本。但是当你想把它保存到服务器时呢？您是否阅读了所有 HTML div 的文本，使其成为数据的权威位置？只是感觉很笨拙！如果您有其他不想显示给用户的状态怎么办？或者如果你想在两个不同的地方显示同一个对象？

*   当您进行更改时，请在某处更新一个普通的 Javascript 对象，例如`window.todos = [{id:1, foo:'bar'},...]`. 但是当您更改它时，您必须重新渲染使用该对象的所有内容，并告诉服务器有关更改。如果您有两种或多种不同的方式来更改状态，例如我们的 TODO 应用程序的“标记所有已完成”功能，那么您最终会重复自己很多次！

Backbone.js 通过为每个持有权威版本数据的 TODO 对象创建一个 Backbone.Model 来解决这个问题。每当您更改模型上的属性时，无论您从何处更改它，它都会通知该对象的所有视图重新渲染。您可以通过单个函数调用将整个模型集合同步到 RESTful 服务器。您的应用程序将更易于维护，并且您将能够更轻松地添加任意功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:16:10.220

Backbone.js 是一个 MVC 框架，它可以帮助您正确地组织代码，并且在您重用它时会非常有用和容易。

它重量轻。

[你可以在http://thomasdavis.github.com/2011/02/01/backbone-introduction.html](http://thomasdavis.github.com/2011/02/01/backbone-introduction.html)找到一些很好的教程

# py2app - Py2app- 在 10.7 Lion 上为 10.6 Snow Leopard 构建 PyQt4 应用程序时出错（未找到符号：_kMDItemDownloadedDate）

> ID：11219657
> 
> 赞同：0
> 
> 时间：2012-06-27T04:58:08.443
> 
> 标签：py2app

我已经成功地使用 py2app 为 10.7 Lion 构建了一个开源应用程序。但是，当用户尝试在 10.6 Snow Leopard 上打开应用程序时，会收到以下错误：

> ImportError：dlopen（/Applications/Mnemosyne.app/Contents/Resources/lib/python2.7/lib-dynload/PyQt4/QTWebKit.so，2）：找不到符号：_kMDItemDownloadedDate
> 
> 引用自：/Applications/Mnemosyne.app/Contents/MacOS/../Frameworks/libQtWebKit.4.dylib

我所有的依赖项都是使用 MacPorts 安装的。如何解决此问题以允许 Snow Leopard 用户也打开应用程序？这个应用程序最初是基于 linux 的，所以应该没有特定于 Lion 的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:34:09.750

我最终通过将 Snow Leopard 安装在 Mac 上的单独分区上并在 Snow Leopard 中重新安装所有内容，然后在那里构建应用程序来解决这个问题。Snow Leopard 构建的应用程序在 Snow Leopard、Lion 和 Mountain Lion 中运行良好。

# node.js - 如何使用 express+ejs 在节点服务器上进行反向地理编码

> ID：11219658
> 
> 赞同：0
> 
> 时间：2012-06-27T04:58:22.733
> 
> 标签：node.js, geolocation, express, reverse-geocoding, ejs

我有纬度和经度值。我想显示与这些值对应的地点的名称。

我发现用 curl 可以做到这一点。

```
http://www.geoplugin.net/extras/location.gp?lat=XXX&long=YYY&format=json 
```

如何在运行 express 和 ejs 的 nodejs 服务器中使用它？现在服务器将经度和纬度坐标传递给客户端，因此它们在客户端和服务器中都可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:04:02.430

第一次安装[请求](https://github.com/mikeal/request)：

```
npm install request 
```

然后：

```
var request = require('request'),
    geoUrl = 'http://www.geoplugin.net/extras/location.gp?lat=XXX&long=YYY&format=json';

request(geoUrl, function(err, response, body) {
    console.log(body);
}); 
```

处理响应取决于您——它不是真正的 JSON，它看起来更像 JSONP。

# android - 连接更改时奇怪的应用程序行为

> ID：11219659
> 
> 赞同：1
> 
> 时间：2012-06-27T04:58:29.817
> 
> 标签：android, web-services

我有一个以登录页面启动的应用程序，现在当用户使用 wifi 时它工作正常，但是当他/她切换到数据连接时，web 服务没有响应。在此之后，当用户手动强制停止/重新安装应用程序时，它再次在数据连接/wifi 上工作，但给出与上述相同的行为，我的代码如下：

```
public class Logg extends Activity {
    EditText log, pw, tfld;
    Button bt;
    String logg, pww, resp ;
    static String employidd;
    ProgressDialog p;
    private static String SOAP_ACTION = "MyName/CheckLogin"; // "http://tempuri.org/CheckLogin";
    private static String NAMESPACE = "MyName"; // "http://tempuri.org/";
    private static String METHOD_NAME = "CheckLogin";
    private static String URL = "http://timetracker.e-pspl.com/erm-login/";     //"http://tdsw025.pcsolutions.com/ERMWeb/";

    /* Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        log = (EditText) findViewById(R.id.logger1);
        pw = (EditText) findViewById(R.id.pwwrs);
        bt = (Button) findViewById(R.id.subb);
        bt.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                logg = log.getText().toString();
                pww = pw.getText().toString();
                if (logg.equals("")) {
                    Toast.makeText(Logg.this, "Login ID cannot be blank",
                            Toast.LENGTH_SHORT).show();
                }
                if (pww.equals("")) {
                    Toast.makeText(Logg.this, "Password cannot be blank",
                            Toast.LENGTH_SHORT).show();
                } else {

                    try {
                        new SoapLog().execute();
                    } catch (Exception e) {
                        Log.v("xcptn", e.toString());
                    }

                }
            }
        });
    }

    private class SoapLog extends AsyncTask<Void, Void, Void> {

        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub
            // Initialize soap request + add parameters
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

            // Use this to add parameters
            request.addProperty("UserName", logg);
            request.addProperty("Pwd", pww);
            // Declare the version of the SOAP request
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);
            Log.v("req", request + "");
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            try {
                // this is the actual part that will call the webservice
                androidHttpTransport.call(SOAP_ACTION, envelope);
                Log.v("envelope", envelope + "");
            } catch (Exception e) {
                e.printStackTrace();
            }
            try{
                // Get the SoapResult from the envelope body.
                SoapObject result = (SoapObject) envelope.bodyIn;
                resp = result.toString();
                Log.v("respmain", resp);
            }catch(NullPointerException e){
                e.printStackTrace();
            }

            return null;

        }

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            p.dismiss();
            if (resp != null) {

                // // if (resp.contains("true")) {
                // Intent one = new Intent(Logg.this, Second.class);
                // startActivity(one);
                // finish();
                // // }
                if (resp.contains("false")) {
                    Toast.makeText(Logg.this, "Invalid UserID/Password",
                            Toast.LENGTH_SHORT).show();
                    // StringTokenizer tokens = new StringTokenizer(resp, "=");
                    // String first = tokens.nextToken();
                    // String second = tokens.nextToken();
                    // Log.v("tag", first);
                    // Log.v("tag1", second);
                } else {
                    String str[] = resp.split("=");
                    String tempStr[] = str[1].split(";");
                    employidd = tempStr[0];
                    Log.v("id", employidd);
                    Toast.makeText(Logg.this, "Success!!", Toast.LENGTH_SHORT)
                            .show();
                    Intent onne = new Intent(Logg.this, DateList.class);
                    onne.putExtra("ID", employidd);
                    startActivity(onne);
                    finish();
                }
            }
        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            p = ProgressDialog.show(Logg.this, "", "Loading...");

        }

    }

} 
```

什么可能导致这种行为？任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:05:15.337

通常最好明确指定连接和数据接收的超时，因为默认超时没有限制，当网络连接发生变化时，您的应用程序会永远等待（或相当长的时间）。

请尝试设置超时并告诉您是否看到任何结果？

# wpf - 带有 RichTextboxes 的 Wpf 动态选项卡

> ID：11219660
> 
> 赞同：0
> 
> 时间：2012-06-27T04:58:38.460
> 
> 标签：wpf, richtextbox

我有一个可关闭的选项卡系统，每个选项卡都有 RichTextbox（作为暂存器）。我遇到的问题是，每当我创建一个新选项卡时，它应该会创建一个新的 RichTextBox，但它会覆盖所有以前的 RTB 的内容，将它们全部清除。谁能告诉我为什么会这样？？但是，当我创建固定的 RTB（例如，创建一个带有 4 个选项卡的选项卡控件并且每个选项卡都有自己的 RTB）时，它不会发生，然后一切正常。但它不适用于动态标签？

下面的代码来自每个选项卡项中包含的用户控件：

```
 <Border Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="0" Grid.RowSpan="3" BorderBrush="#FF939393" BorderThickness="26" CornerRadius="26" >
        <Border.Effect>
            <DropShadowEffect />
        </Border.Effect>           
    </Border>
    <TextBlock Grid.Column="1" Grid.Row="0" Height="23" Name="textBlock1" Text="{Binding Path=TestMessage}" />
    <Button Grid.Column="0" Grid.Row="1" Style="{DynamicResource PageNavigationButton}" Height="52" Width="26" Command="{Binding Path=CMD_SwapLeft}" >
        <Button.RenderTransform >
            <RotateTransform Angle="180" CenterX="13" CenterY="26" />
        </Button.RenderTransform>
    </Button>
    <Button Grid.Column="2" Grid.Row="1" Style="{DynamicResource PageNavigationButton}" Height="52" Width="26" Command="{Binding Path=CMD_SwapRight}" />

    <View:DebtorTabView Grid.Column="1" Grid.Row="1" Visibility="{Binding RelativeSource={RelativeSource Self}, Path=Parent.DataContext.MyDataContextVisibility}"  DataContext="{Binding Path=MyDataContext}"  />
    <Grid Background="Blue" Grid.Column="1" Grid.Row="1" Visibility="{Binding Path=MyDataContextOtherVisibility}">
        <TextBlock Text="{Binding Path=TestMessageTwo}" Height="23" Width="124" Margin="6,6,0,0" VerticalAlignment="Top" HorizontalAlignment="Left" />
        <RichTextBox HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
    </Grid> 
```

我还没有完成任何绑定（当我解决这个问题时，它是自定义控件的一部分）。
谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:13:37.410

这是因为 WPF 将卸载`TabItems`未使用的，这意味着如果该`Text`属性未绑定到任何东西，它将被重置。

一旦你将你的`RichTextBox.Text`属性绑定到 中的某个东西`DataContext`，它应该可以正常工作。

另一种方法是扩展当前`TabControl`类，以便在切换选项卡时它不会破坏其子级。[您可以在此 SO 答案](https://stackoverflow.com/a/8619120/302677)中找到此代码（最初包含该代码的站点已不复存在），并且您在 XAML 中使用控件的方式与常规方式相同`TabControl`

```
<local:TabControlEx ItemsSource="{Binding OpenTabs}" 
                    SelectedTab="{Binding SelectedTab}" /> 
```

# javascript - 动态插入大量 DOM 元素时，Mobile Safari (iPhone/iPad) 崩溃

> ID：11219664
> 
> 赞同：1
> 
> 时间：2012-06-27T04:58:52.173
> 
> 标签：javascript, iphone, html, ipad, safari

我们有一个应用程序可以在用户交互之后呈现动态内容。

一个调用在 AJAX 调用之后将大约 400 个 DOM 元素附加到页面。

在桌面上运行良好，但 iPhone/iPad 滚动内容缓慢，然后最终冻结，然后完全崩溃。

如果我们在页面加载时加载相同数量的数据而不是动态加载，iPhone/iPad 能够毫无问题地处理它。

我有一种感觉，这是因为设备在加载时分配了一定数量的内存，然后动态插入会导致崩溃。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:01:53.433

我的第一个建议是尝试使用因内存而发生崩溃的工具。然后如果是因为记忆，

也许您应该加载一些 DOM 元素，并且像延迟加载一样，您可以逐部分获取剩余的部分？

希望这可以帮助。:)

# ruby-on-rails - 设计错误消息！导致 nil:NilClass 的未定义方法“错误”

> ID：11219670
> 
> 赞同：3
> 
> 时间：2012-06-27T04:59:36.053
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我的 layouts/application.html.erb 上有一个表单，它贴在下面，如果我添加该行`<%= devise_error_messages! %>`，我会收到下面的错误。

如何在没有分页符的情况下添加 devise_error_messages？

/app/views/layouts/application.html.erb

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
    <%= devise_error_messages! %>  <!-- this line causes issues -->
    <h3>Add new contact</h3>
    First Name<br />
    <%= f.text_field :username %><br />
    Last Name<br />
    <%= f.text_field :password %><br />
    <%= f.text_field :password_confirmation %><br />                                
    Email<br />
    <%= f.text_field :email %>
    <hr />
    <%= f.submit "Add Contact" %>

<% end %> 
```

错误：

```
NoMethodError in My_devise/sessions#index

Showing /app/views/layouts/application.html.erb where line #59 raised:

undefined method `errors' for nil:NilClass

Extracted source (around line #59):

56:                             <a href="#" class="has-popupballoon button button-blue"><span class="add"></span>New Contact</a>
57:                             <div class="popupballoon top">
58:                             <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
59:   <%= devise_error_messages! %>
60:                                 <h3>Add new contact</h3>
61:                                 First Name<br />
62:                                 <%= f.text_field :username %><br /> 
```

这是我正在使用的网址`http://localhost:3000/admin/home`，这是我的 routes.rb

```
devise_for :users do 
    get '/users/sign_out' => 'devise/sessions#destroy' 
    get "/users/sign_in", :to => "my_devise/sessions#new"
    get 'admin/home', :to => 'my_devise/sessions#index'
    get 'users/sign_up', :to => 'my_devise/registrations#new'
  end 

  devise_for :users, :controllers => {:sessions => "my_devise/sessions", :registrations => "my_devise/registrations"}
  get "home/index"
  root :to => "home#index" 
```

/app/controllers/my_devise/sessions_controller.rb

```
class MyDevise::SessionsController < Devise::SessionsController
    layout false

    before_filter :authenticate_user!

    def index
        render :layout => 'application'
    end

    def new
        super
    end

    def create
        super
    end

end 
```

/app/controllers/my_devise/registrations_controller.rb

```
class MyDevise::RegistrationsController < Devise::RegistrationsController

    def index

    end

end 
```

耙路线：

```
users_sign_out GET    /users/sign_out(.:format)      {:controller=>"devise/sessions", :action=>"destroy"}
           users_sign_in GET    /users/sign_in(.:format)       {:controller=>"my_devise/sessions", :action=>"new"}
              admin_home GET    /admin/home(.:format)          {:controller=>"my_devise/sessions", :action=>"index"}
           users_sign_up GET    /users/sign_up(.:format)       {:controller=>"my_devise/registrations", :action=>"new"}
        new_user_session GET    /users/sign_in(.:format)       {:action=>"new", :controller=>"devise/sessions"}
            user_session POST   /users/sign_in(.:format)       {:action=>"create", :controller=>"devise/sessions"}
    destroy_user_session DELETE /users/sign_out(.:format)      {:action=>"destroy", :controller=>"devise/sessions"}
           user_password POST   /users/password(.:format)      {:action=>"create", :controller=>"devise/passwords"}
       new_user_password GET    /users/password/new(.:format)  {:action=>"new", :controller=>"devise/passwords"}
      edit_user_password GET    /users/password/edit(.:format) {:action=>"edit", :controller=>"devise/passwords"}
                         PUT    /users/password(.:format)      {:action=>"update", :controller=>"devise/passwords"}
cancel_user_registration GET    /users/cancel(.:format)        {:action=>"cancel", :controller=>"devise/registrations"}
       user_registration POST   /users(.:format)               {:action=>"create", :controller=>"devise/registrations"}
   new_user_registration GET    /users/sign_up(.:format)       {:action=>"new", :controller=>"devise/registrations"}
  edit_user_registration GET    /users/edit(.:format)          {:action=>"edit", :controller=>"devise/registrations"}
                         PUT    /users(.:format)               {:action=>"update", :controller=>"devise/registrations"}
                         DELETE /users(.:format)               {:action=>"destroy", :controller=>"devise/registrations"}
        new_user_session GET    /users/sign_in(.:format)       {:action=>"new", :controller=>"my_devise/sessions"}
                         POST   /users/sign_in(.:format)       {:action=>"create", :controller=>"my_devise/sessions"}
    destroy_user_session DELETE /users/sign_out(.:format)      {:action=>"destroy", :controller=>"my_devise/sessions"}
                         POST   /users/password(.:format)      {:action=>"create", :controller=>"devise/passwords"}
                         GET    /users/password/new(.:format)  {:action=>"new", :controller=>"devise/passwords"}
                         GET    /users/password/edit(.:format) {:action=>"edit", :controller=>"devise/passwords"}
                         PUT    /users/password(.:format)      {:action=>"update", :controller=>"devise/passwords"}
                         GET    /users/cancel(.:format)        {:action=>"cancel", :controller=>"my_devise/registrations"}
                         POST   /users(.:format)               {:action=>"create", :controller=>"my_devise/registrations"}
                         GET    /users/sign_up(.:format)       {:action=>"new", :controller=>"my_devise/registrations"}
                         GET    /users/edit(.:format)          {:action=>"edit", :controller=>"my_devise/registrations"}
                         PUT    /users(.:format)               {:action=>"update", :controller=>"my_devise/registrations"}
                         DELETE /users(.:format)               {:action=>"destroy", :controller=>"my_devise/registrations"}
              home_index GET    /home/index(.:format)          {:controller=>"home", :action=>"index"}
                    root        /                              {:controller=>"home", :action=>"index"}
                    root        /                              {:controller=>"home", :action=>"index"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T12:22:40.200

我遇到了类似的问题。

我花了一段时间才弄清楚，但就我而言，这是由于：

```
def current_user
  @current_user ||= User.find(session[:user_id]) if session[:user_id]
end
helper_method :current_user 
```

在我的 application_controller.rb 文件中。

我从教程中添加了这一行。删除此内容后，我不再收到有关“devise_error_messages”的错误。我不太明白为什么这会扰乱事情，也许“current_user”是在别处定义的，它设置（或导致设置）错误对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T05:14:54.597

尝试更改您的 devise_for 路由，查看此文档[http://rdoc.info/github/plataformatec/devise#Configuring_routes](http://rdoc.info/github/plataformatec/devise#Configuring_routes)

您可以使用 :path 参数添加自己的前缀

这是一个示例

```
devise_for :users, :path => "", :path_names => {
 :sign_in => 'signin',
 :sign_out => 'signout',
 :sign_up => 'signup'            
 },
:sign_out_via => [:delete],

 :controllers => {:sessions => 'my_devise/sessions', :registrations => 
  'my_devise/registrations'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T01:45:11.660

重新访问一个我有一段时间没有时间接触的项目，但简单的答案就是在 application_controller 中创建 User 对象。

我将此片段添加到 application_controller：

```
before_filter :instantiateUser

def instantiateUser
    @user = User.new
end 
```

# c# - 椭圆不保持绘制

> ID：11219673
> 
> 赞同：1
> 
> 时间：2012-06-27T05:00:05.120
> 
> 标签：c#, .net, winforms, events, graphics

我试图在检测到 mousedown 事件后在窗口的特定位置绘制一个椭圆。

椭圆被绘制没有任何问题，但它在绘制后立即消失。

我认为这与应用程序不断处理 WM_PAINT 消息但应用程序没有在每个绘制消息上绘制椭圆有关。

如何使椭圆保持绘制在窗口的特定坐标上？

```
 private void rtbLogicCode_MouseDown(object sender, MouseEventArgs e)
    {
        Point p = new Point(e.X, e.Y);
        if (p.X < 39 && p.Y < 817)
        {
            LinearGradientBrush lgb = new LinearGradientBrush(new Rectangle(0, p.Y, 15, 15), Color.LightPink, Color.Red, 45);

            System.Drawing.Graphics formGraphics = rtbLogicCode.CreateGraphics();
            formGraphics.FillEllipse(lgb, 0, p.Y, 15, 15);
            this.Invalidate();
            lgb.Dispose();
            formGraphics.Dispose();
        }
        ...
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T05:06:07.423

通常的模式是让您的 WM_MOUSEDOWN 处理程序只记录位置并使窗口无效。然后 WM_PAINT 处理程序检索信息并适当地绘制。

# javascript - 如何在Phonegap中存储多维数组

> ID：11219676
> 
> 赞同：0
> 
> 时间：2012-06-27T05:00:32.203
> 
> 标签：javascript, html, cordova

我正在尝试使用 localstorage.setitem 在 JavaScript phonegap 中存储一个多维（二维）数组

但是，它似乎将数组转换为一维。

本地存储时有什么方法可以维护数组结构吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T05:50:25.077

我遇到了同样的问题，我使用以下解决方案使其工作：

```
var a1 = [1,2,3];
var b1 = [4,5,6];
var c1 = [7,8,9];
var a = [a1, b1, c1];
localStorage.setItem("arr", JSON.stringify(a));
var b = JSON.parse(localStorage.getItem("arr")); 
```

默认情况下，localStorage 只支持字符串作为存储格式。您不能将 JavaScript 计算的结果存储为数组或对象，并且每个数字都存储为字符串 - [http://24ways.org/2010/html5-local-storage](http://24ways.org/2010/html5-local-storage)。​</p>

# java - 在 Maven 插件中访问注解

> ID：11219677
> 
> 赞同：4
> 
> 时间：2012-06-27T05:00:32.823
> 
> 标签：java, maven, plugins, annotations

目前我创建了一个插件，执行时需要从项目工件中访问类并检索注释。

```
/**
 * Generate document for services
 * 
 * @author Ali Irawan
 * 
 * @goal doc
 * @requiresDependencyResolution compile
 * @phase generate-sources
 */
public class GeneratePlugin extends AbstractMojo {

    /**
     * project
     * 
     * @parameter expression = "${project}";
     */
    protected MavenProject project;

    /**
     * scanPackage
     * 
     * @parameter
     */
    private String scanPackage;

    @Override
    public void execute() throws MojoExecutionException {
        getLog().info("My Maven Plugin Started");
        getLog().info("Scanning package: " + scanPackage);

        // PluginDescriptor pluginDescriptor = (PluginDescriptor) super.getPluginContext().get("pluginDescriptor");
        try {
            ClassLoader original = Thread.currentThread().getContextClassLoader();

            Collection urls = new ArrayList();

            Set<Artifact> artifacts = project.getArtifacts();
            Iterator<Artifact> iterator = artifacts.iterator();
            while(iterator.hasNext()){
                Artifact entry = iterator.next();
                urls.add(entry.getFile().toURI().toURL());
            }

            urls.add(new File(project.getBuild().getOutputDirectory()).toURI().toURL());

            Thread.currentThread().setContextClassLoader(new URLClassLoader((URL[]) urls.toArray(new URL[urls.size()]),original));

            ClassLoader loader = Thread.currentThread().getContextClassLoader();
            Class clazz = loader.loadClass("com.goijo.mona.services.AuthenticationService");
            getLog().info("Class name: " + clazz.getName());

            // This always return 0, don't know why ?
            getLog().info("Annotation : " + clazz.newInstance().getClass().getAnnotations().length);

            // Restore class loader
            Thread.currentThread().setContextClassLoader(original);

            getLog().info("MyMaven Plugin Stopped");
        } catch (Exception e) {
            e.printStackTrace();
            getLog().error(e.getMessage());
        }
    }

} 
```

然后我在其他项目中使用这个插件

```
<plugin>
    <groupId>com.my</groupId>
    <artifactId>my-maven-plugin</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <configuration>
        <scanPackage>com.my.services</scanPackage>
    </configuration>
</plugin> 
```

当我尝试使用执行 mvn 目标时

```
mvn my:doc 
```

它产生这个输出

```
[INFO] Scanning package: com.goijo.mona.services
[INFO] Class name: com.my.services.AuthenticationService
[INFO] Annotation : 0 
```

任何人都可以帮助为什么注释总是 0 因为我的类 com.my.services.AuthenticationService 已经被注释了

```
@InfoIn( ... )
public class AuthenticationService {

} 
```

并且注释已经设置了 RetentionPolicy

```
@Target(value=ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface InfoIn {

    public Info[] value();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-10T20:15:32.540

问题的根源在于加载外部类文件时使用的 ClassLoader。以下代码应该可以解决您的问题...我编写了一个类似的 Maven 插件：

```
// The outputDirectory is the ${project.build.directory} the Maven plugin is executing in
File classesDirectory = new File(outputDirectory.getAbsolutePath() + "/classes"); 

URL classesUrl = classesDirectory.toURI().toURL();
URL[] classesUrls = new URL[]{classesUrl}; 

// Make sure to use the URLClassLoader, using the simple ClassLoader WILL NOT WORK for reading the annotations       
URLClassLoader classLoader = URLClassLoader.newInstance(classesUrls, getClass().getClassLoader());

// Load our remote class file found out in the "/classes" directory
Class classObject = classLoader.loadClass("com.my.services.AuthenticationService"); 

// Check to make sure the class has the annotation
if(classObject.isAnnotationPresent(InfoIn.class)) 
{
    // Get the annotation and print the value
    InfoIn annotation = (InfoIn)classObject.getAnnotation(InfoIn.class);
    System.out.println("Annotation value is: " + annotation.value());
} 
```

我希望这会有所帮助。

# eclipse - ubuntu中apache Tomcat安装目录/eclipse+ubuntu中配置Tomcat

> ID：11219678
> 
> 赞同：22
> 
> 时间：2012-06-27T05:00:34.933
> 
> 标签：eclipse, tomcat7, ubuntu-12.04

我在我的 Ubuntu12.04 中安装了 java7 和 ApacheTomcat7，并下载了 eclipse EE。现在我必须用tomcat配置我的eclipse。因为我想找到tomcat的安装目录。我怎么能找到它。我使用 Ubuntu 软件中心安装了 java 和 tomcat。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-27T05:37:12.667

**1.**`apache-tomcat-7.0.6.tar.gz`从下面的链接
[http://tomcat.apache.org/download-70.cgi](http://tomcat.apache.org/download-70.cgi) [tar.gz]下载包“ ”

**2.**现在使用以下命令解压它：

```
tar xvzf apache-tomcat-7.0.8.tar.gz 
```

**3.**然后移动到更合适的目录，在我们的例子中`/usr/share/tomcat7`，但可以在任何目录中。我们使用以下命令执行此操作：

```
sudo mv apache-tomcat-7.0.8/ /usr/share/tomcat7 
```

**4.**现在定义环境变量`JAVA_HOME`和`JRE_HOME`. 这个文件是在“环境”中的/etc。命令来编辑这个文件：

```
sudo gedit /etc/environment 
```

**5.**这里记录下我们安装Java的路由，我的情况如下：

```
JAVA_HOME="/usr/local/jdk1.6.0_23"
JRE_HOME="/usr/local/jdk1.6.0_23/jre"
PATH="...(other path):$JAVA_HOME:$JRE_HOME" 
```

**6\. 重要提示：**验证他们安装 Java 的路由。

有时 tomcat 无法识别，但识别 tomcat 的可靠方法是定义`catalina.sh`位于`tomcat7/bin`. 要修改此文件，请使用以下命令：

```
sudo gedit /usr/share/tomcat7/bin/catalina.sh 
```

现在在第一行之后插入`JAVA_HOME`and `JRE_HOME`，所以文件如下：

```
#!/bin/sh
JAVA_HOME="/usr/local/jdk1.6.0_23"
JRE_HOME="/usr/local/jdk1.6.0_23/jre"
# Licensed to the Apache Software Foundation (ASF)...
#...
#...
.... 
```

现在配置Tomcat用户，这是在文件“ `tomcat-users.xml`”目录中完成的`tomcat7/conf`。编辑文件的命令：

```
sudo gedit /usr/share/tomcat7/conf/tomcat-users.xml 
```

**7.**不同于以前的版本，管理员应该拥有“manager”角色，现在应该是“ `manager-gui`”来操作web管理tomcat7。该文件如下所示：

```
<?xml version='1.0' encoding='utf-8'?>

<tomcat-users>
<role rolename="manager-gui"/>
<role rolename="manager-script"/>
<role rolename="manager"/>
<role rolename="admin-gui"/>
<role rolename="admin-script"/>
<role rolename="admin"/>

<user username="usuario" password="contrasena" roles="manager-gui,admin-gui,manager,admin,manager-script,admin-script"/>
</tomcat-users> 
```

**8.**更多信息请看[这里](http://diegobenna.blogspot.in/2011/01/install-tomcat-7-in-ubuntu-1010.html)
[set-up-eclipse-and-tomcat-7-on-ubuntu-12-04](http://lackovic.wordpress.com/2012/05/31/set-up-eclipse-and-tomcat-7-on-ubuntu-12-04-to-create-java-restful-web-services-with-jersey/)
[cannot-create-a-server-using-the-selected-type-eclipse-tomcat](http://hariprasad.info/cannot-create-a-server-using-the-selected-type-eclipse-tomcat/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-11T01:00:00.040

实际上，您可以将 Ubuntu 存储库中的 Tomcat 与 Eclipse 一起使用（至少使用 Kepler 版本）。它只需要几个额外的步骤。

1.  打开 Eclipse。按文件⇒新建⇒其他...⇒服务器⇒服务器⇒下一个>⇒Apache ⇒Tomcat v7.0服务器
2.  选择Tomcat安装目录：/usr/share/tomcat7
3.  单击完成，忽略错误消息，再次单击完成
4.  将 Tomcat 配置复制到从终端执行的工作区：

    ```
    sudo cp -r /etc/tomcat7/* ~/workspace/Servers/Tomcat\ v7.0\ Server\ at\ localhost-config/
    sudo chown -R $USER:$USER ~/workspace/Servers/Tomcat\ v7.0\ Server\ at\ localhost-config/ 
    ```

5.  将策略文件合并为一个文件：

    ```
    cd ~/workspace/Servers/Tomcat\ v7.0\ Server\ at\ localhost-config/
    cat policy.d/* > catalina.policy 
    ```

6.  每次从 Eclipse 运行之前关闭 tomcat7 服务，或者在工作区的配置文件中编辑 tomcat 的端口（我建议编辑配置）：

    ```
    gedit ~/workspace/Servers/Tomcat\ v7.0\ Server\ at\ localhost-config/server.xml 
    ```

    您有兴趣更改端口 8080、8009 和 8005（例如，更改为 9090、9009 和 9005）。

7.  返回 Eclipse，在 Project Explorer（左侧面板）中选择“Servers”，按 F5 刷新它。
8.  从 Eclipse 启动 Tomcat（请参阅 Eclipse 底部面板中的 Servers 选项卡）。

我根据[我的文章](http://sukharevd.net/environment-for-j2ee-development-under-ubuntu.html#eclipsetomcat)写了这个答案。它有点详细，所以如果需要，请参阅它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-10T14:21:17.907

您可以从存储库安装 tomcat。

1.  搜索tomcat。

    ```
    sudo apt-cache search tomcat 
    ```

2.  安装tomcat admin和tomcat

    ```
    sudo apt-get install tomcat7-admin
    sudo apt-get install tomcat7 
    ```

3.  检查tomcat状态

    ```
    sudo service tomcat7 status 
    ```

4.  启动和停止tomcat

    ```
    sudo service tomcat7 start
    sudo service tomcat7 stop 
    ```

tomcat7 的 bin 文件夹位于 /usr/share/tomcat7，日志和配置位于 /usr/lib/tomcat7

来源：[http ://www.allaboutjava.club/linux/linux-install-tomcat7-on-ubuntu](http://www.allaboutjava.club/linux/linux-install-tomcat7-on-ubuntu)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-16T18:44:42.677

我喜欢尽可能使用存储库中的包。

在这种情况下：

```
sudo apt-get install tomcat7-user
sudo tomcat7-instance-create /srv/tomcats/ubuntu
sudo ln -s /usr/share/tomcat7/lib /srv/tomcats/ubuntu/ 
```

对于 tomcat6，可以跳过 ln 步骤。

然后只需使用这个路径在eclipse上添加一个tomcat7服务器。在 14.04 和 eclipse kepler sr2 上测试。应该在 12.04 工作。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-08-01T06:27:35.553

默认情况下不要使用命令，例如`sudo apt-get install tomcat7`.

如果您遵循上述命令，那么您将面临很多问题，因为`CATALINA_HOME`并且`CATALINA_BASE`将在不同的位置。在这种情况下，您必须单独声明环境变量。

# ruby-on-rails - I18n Twitter 应用程序名称

> ID：11219681
> 
> 赞同：2
> 
> 时间：2012-06-27T05:00:48.333
> 
> 标签：ruby-on-rails, twitter, oauth, internationalization

我有一个针对不同语言有不同名称的应用程序。我如何在我的 Twitter 应用程序注册中反映这一点？当用户尝试进行身份验证时，我想显示来自特定域的特定名称。

在应用程序方面，我使用带有 ominiauth 和 twitter gems 的 Rails。我需要一些想法，伙计们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T02:18:26.540

您可以在 Twitter Developers 上创建一个具有唯一名称的唯一应用程序（例如“toto Twitter”），并向您的用户说明该应用程序在他们授权的应用程序列表中称为“toto Twitter”。

izeed 的解决方案很好，但它意味着用户每次选择新语言时都必须再次进行身份验证。它不符合人体工程学，可能会淹没用户的授权应用程序列表。想象一个用户已经使用了 15 种不同的习语。它必须对应用程序进行 15 次身份验证，并且它的授权应用程序列表中将有 15 个“toto Twitter_lang”，仅用于您的应用程序。那不是很方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:39:24.607

出于安全原因，您不能以编程方式更改应用名称（或回调 url）。您可以做的最好的事情是创建多个具有不同名称的应用程序。当用户使用 twitter 登录（使用他的语言的应用程序）时，您将他的令牌/秘密与他使用的应用程序一起保存。

# java - 如何设置 Axis2 以使用（复杂）数据类型和自定义模式？

> ID：11219685
> 
> 赞同：0
> 
> 时间：2012-06-27T05:01:37.663
> 
> 标签：java, wsdl, axis2

我目前正在开发一组将 POJO/bean 作为参数的 Web 服务，这些参数将通过 Axis2 进行部署。问题是生成 WSDL 的 Axis2 的内置代码以不同于我需要的方式表示 POJO。

例如，我有以下课程：

```
public class Employee {
    private String firstName;
    private String lastName;
    //mutators, accessors
}

public class Department {
    private String name;
    private List<Employee> employees;
    //mutators, accessors
} 
```

我希望 XML 看起来像（减去所有命名空间数据）：

```
<department>
  <name>marketing<name>
  <employees>
    <employee>
      <firstName>Juan</firstName>
      <lastName>dela Cruz</lastName>
    <employee>
    <employee>
      <firstName>Pedro</firstName>
      <lastName>Mahusay</lastName>
    <employee>
  </employees>
<department> 
```

但是，Axis2 将上述 XML 表示为：

```
<department>
  <name>marketing<name>
  <employees>
    <firstName>Juan</firstName>
    <lastName>dela Cruz</lastName>
  </employees>
  <employees>
    <firstName>Pedro</firstName>
    <lastName>Mahusay</lastName>
  <employees>
<department> 
```

我研究了 MessageBuilders 和 MessageFormatters，但我仍然不确定如何将 XML 处理为 OMElement（在 Builder 的情况下）以使其工作。我不知道 Axis2 如何将这些 OMElement 转换为 Web 服务代码可以使用的 Bean。有没有一种（可能更简单或更合乎逻辑/更有效？）的方法让它像第一个一样工作？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:51:38.500

您需要一个包含 Employee 对象列表的**Employees****对象**。

 **不过，最好自己编写 WSDL 和 XSD，然后从中生成轴存根，这样您就可以完全控制 xml 格式，这也是一种最佳实践。**

# php - Php - 这段代码是什么意思？

> ID：11219686
> 
> 赞同：0
> 
> 时间：2012-06-27T05:01:46.197
> 
> 标签：php, arrays

我有以下代码

```
$arr =  array(
     'media[]'  => "@{$image};type=image/jpeg;filename={$image}"
); 
```

我不知道第 2 行是什么意思。`[]`和`@`代表什么`{}`？

**更新：**

[*这是从使用 PHP 在 Twitter 上上传图片*](https://stackoverflow.com/a/9873217/1137788)中提取的代码。

用于将图像上传到 Twitter。我需要在 Lua 中实现相同的功能。因此这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T05:06:08.233

```
$arr =  array(
     'media[]'  => "@{$image};type=image/jpeg;filename={$image}",
); 
```

就像

```
$arr =  array(
     'media[]'  => "@".$image.";type=image/jpeg;filename=".$image,
); 
```

请参阅[PHP 手册](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing.complex)`{}`，了解双引号字符串中大括号 ( ) 的含义。

而 for`"[]"`和`"@"`它们只是普通的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T05:08:30.180

此代码中出现错误。这是设置图像的输出路径..这是模板代码吗？

# css - 所有 Css 属性和允许值的列表

> ID：11219691
> 
> 赞同：1
> 
> 时间：2012-06-27T05:02:33.993
> 
> 标签：css

> **可能重复：**
> [完整的 CSS 属性表](https://stackoverflow.com/questions/6187085/full-css-property-table)

我在一个完整的 CSS 属性列表之后，它以简单的形式描述了一个或多个有效值。如果该列表还说明了该属性的最小/最大值的数量，那就太好了，因为有些是可变的，例如边框。

编辑一些评论问我为什么不简单地尝试谷歌或阅读 w3 规范。两者的答案都是我做到了。总体而言，规范本身可用于确定所有属性和值很长，没有一个是简单的表格或完整的。

[http://www.w3.org/TR/CSS21/propidx.html](http://www.w3.org/TR/CSS21/propidx.html)

CSS 21 表格看起来很完整，并且采用了我所追求的表格样式。但是，其他规格没有等效表。

CSS3 主页似乎列出了每一个属性，不适合打印。它末尾的属性列表似乎是一个增量或样本。再次没有一个大胖子简单的阅读参考表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T05:20:13.640

[此处](https://stackoverflow.com/q/6187085/1081234)已对此进行了更详细的介绍

[MDN CSS 参考](https://developer.mozilla.org/en/CSS/CSS_Reference)涵盖标准 CSS 属性

[w3完整属性表](http://www.w3.org/TR/CSS21/propidx.html)列出CSS2.1属性

我也遇到过[这个资源](http://css-infos.net/)——我不确定它的声誉，但肯定似乎涵盖了更广泛的属性。

# c# - 如何在 3 次登录尝试后重新加载页面并出现 401 未经授权的访问错误？在 asp.net 中

> ID：11219692
> 
> 赞同：0
> 
> 时间：2012-06-27T05:02:34.290
> 
> 标签：c#, javascript, asp.net

当尝试访问我在 3 次登录尝试后创建的站点时，它会给出未经授权的访问错误 401。在 asp.net 中尝试 3 次后如何重新加载页面。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:22:15.147

最好的方法是在后端存储和管理这些东西（意思是在 SQL SERVER 或任何其他服务器上）。如果您使用的是 SQL SERVER，请按照以下步骤操作：1）。在名为**invalidattempts**的表中添加一个 int 类型的新列 2)。现在在**logincheck**存储过程中，如果用户名和密码未被授权，则更新表中的无效列。并编写以下代码。

```
Declare @PasswordDB varchar(100)
Declare @InvalidDB int
if exists(select 1 from tblUser where email=@email)
begin
    set @PasswordDB= (Select password from tblUser where email=@email)
    if @PasswordDB=@Password
        begin
                print'login Successfully.'
        end
    else
        begin
            set @InvalidDB=(select invalidattempts from tblUser where email=@email)
update tblUser set invalidAttepmts=@InvalidDB+1 where email=@email 
select 3
end
end
else
begin
select 2
print'username does not exists.'
end 
```

当您从 sp 获得 3 时，显示一条警告消息“您已进行 3 次无效尝试，就是这样”

# iphone - 如何将选定的东西放在滚动视图的中间？

> ID：11219693
> 
> 赞同：0
> 
> 时间：2012-06-27T05:02:34.260
> 
> 标签：iphone, scroll

我正在开发一个应用程序，我想要的是当我从滚动中选择某些东西时

视图，选定的东西出现在滚动视图的中间，还有一件事我

没有提到如果我正在滚动滚动视图，我该如何淡化

不在中间的内容，当它们出现时再次将它们恢复为原始颜色

在中间。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:39:31.777

以下是您的问题的可能解决方案：

*   居中，一旦你触摸到一个对象，选择它并`contentOffset`根据所选项目的位置移动滚动视图
*   要淡化项目，要么实现协议并观察每个偏离中心的项目，要么`scrollViewDidScroll:`将`UIScrollViewDelegate`半透明（带渐变）图像放在滚动视图的边缘

# web-services - Jboss xml解析器与xerces冲突

> ID：11219694
> 
> 赞同：0
> 
> 时间：2012-06-27T05:02:34.887
> 
> 标签：web-services, spring, jboss, xml-parsing, jax-ws

当我尝试部署 Spring Web 服务（jax-ws）应用程序时，我发现 Jboss 和 xerces jar 文件存在冲突。这是错误。

```
09:58:50,852 ERROR [JBossContextConfig] XML error parsing: context.xml
org.jboss.xb.binding.JBossXBRuntimeException: Failed to create a new SAX parser 
```

经过一些技术论坛，发现这是jboss服务器中的一个错误。这是该错误报告的[链接。](http://community.jboss.org/wiki/WhydoigetjavalangClassCastExceptionorgapachexercesparsersXIncludeAwareParserConfigurationinAS-5)它说从 lib 文件夹中删除 xercec.jar。

但是如果我删除 xerces jar，服务器会给出一个 spring 错误，因为我认为我的应用程序需要 xcerces jar 来解析 applicationContext.xml 中的一些特定 xml sysntaxes。这是弹簧错误。

```
09:14:38,175 ERROR [org.springframework.web.context.ContextLoader] Context 
initialization failed: org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 
'com.sun.xml.ws.transport.http.servlet.SpringBinding#0 defined in ServletContext 
resource [/WEB-INF/applicationContext.xml]: Cannot create inner bean '(inner bean)'
of type [org.jvnet.jax_ws_commons.spring.SpringService] while setting bean property 
'service'; nested exception is org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name '(inner bean)': FactoryBean threw exception on object
creation; nested exception is java.lang.LinkageError: loader constraint violation: when     
resolving field "DATETIME" the class loader (instance of 
org/jboss/classloader/spi/base/BaseClassLoader) of the referring class, 
javax/xml/datatype/DatatypeConstants, and the class loader (instance of <bootloader>) 
for the field's resolved type, loader constraint violation: when resolving field 
"DATETIME" the class loader 
```

它包含以下 xml sysntax。

```
<wss:service>
        <ws:service bean="#helloWs"/>
</wss:service> 
```

我认为服务器会抛出那个spring错误，因为jboss xml解析器无法识别这个涉及创建spring内部bean的特定xml sysntax。（bean =“#helloWs”）。所以我认为用 xercess xml 解析器覆盖现有的 Jboss xml 解析器就可以了。我的问题是怎么做？也欢迎对此问题提出任何替代建议。

提前谢谢大家。

仅供参考：相同的应用程序在 glassfish 服务器 3.x 中运行顺利（无需任何修改） :) 但我需要在 Jboss 服务器中部署它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:07:04.937

我也遇到过这个问题。就我而言，解决方案是从我的应用程序中删除 Xerces，但您需要它。

可以在[此处](http://www.mastertheboss.com/jboss-application-server/223-solving-jboss-5-classloading-issues.html)找到“从您的应用程序中删除 xercers”的替代解决方案。

# objective-c - UIWebView BringToFront

> ID：11219697
> 
> 赞同：0
> 
> 时间：2012-06-27T05:03:06.307
> 
> 标签：objective-c, ios, uiwebview

我已经把头撞在墙上一段时间了，但它就这样了。我正在使用 PhoneGap 构建应用程序。底部有一个标签栏，有 5 个标签，一个标签加载 Google 地图（来自 GitHub 的旧插件的 MapKit），但问题是当您在地图标签后立即切换到另一个标签时，新标签会不接受触摸事件，就好像地图还在那里一样。（地图不可见，方法如下：

```
self.mapView.hidden = YES;
self.childView.hidden = YES; 
```

但如果你这样做：地图选项卡 -> 主页选项卡 -> 通知选项卡然后触摸事件在通知选项卡上工作。

我认为解决这个问题的方法是以某种方式将 PhoneGap 使用的 UIWebview 带到前面。

我试过了：

```
[self.childView bringSubviewToFront:self.webView]; 
```

和：

```
[self.webView bringSubviewToFront:self.mapView]; 
```

并且：

```
[self.viewController bringSubviewToFront:self.webView] 
```

最后一行代码给出了这个错误：“UIViewController”可能不会响应“bringSubviewToFront：”并且什么也没有发生。

这是用于绘制地图的代码：

```
if (!self.mapView) 
{
    [self createView];
}

// defaults
CGFloat height = 480.0f;
CGFloat offsetTop = 0.0f;

if ([options objectForKey:@"height"]) 
{
    height=[[options objectForKey:@"height"] floatValue];
}
if ([options objectForKey:@"offsetTop"]) 
{
    offsetTop=[[options objectForKey:@"offsetTop"] floatValue];
}
if ([options objectForKey:@"buttonCallback"]) 
{
    self.buttonCallback=[[options objectForKey:@"buttonCallback"] description];
}

if ([options objectForKey:@"regionDidChangeCallback"]) 
{
    self.regionDidChangeCallback=[[options objectForKey:@"regionDidChangeCallback"] description];
}

CLLocationCoordinate2D centerCoord = { [[options objectForKey:@"lat"] floatValue] , [[options objectForKey:@"lon"] floatValue] };
CLLocationDistance diameter = [[options objectForKey:@"diameter"] floatValue];

CGRect webViewBounds = self.webView.bounds;

CGRect mapBounds;
mapBounds = CGRectMake(
                       webViewBounds.origin.x,
                       webViewBounds.origin.y + (offsetTop / 2),
                       webViewBounds.size.width,
                       webViewBounds.origin.y + height
                       );

[self.childView setFrame:mapBounds];
[self.mapView setFrame:mapBounds];

MKCoordinateRegion region=[ self.mapView regionThatFits: MKCoordinateRegionMakeWithDistance(centerCoord, 
                                                                                            diameter*(height / webViewBounds.size.width), 
                                                                                            diameter*(height / webViewBounds.size.width))];
[self.mapView setRegion:region animated:YES]; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:25:23.723

您不能在 viewController 对象上调用方法 bringSubviewToFront:，因为 UIViewController 不会对此做出响应。您可以按如下方式进行更改，

错误的 ：

```
[self.viewController bringSubviewToFront:self.webView]; 
```

对 ：

```
[self.viewController.view bringSubviewToFront:self.webView]; 
```

我认为这可能对你有用。

# ninject - Ninject 和装饰器

> ID：11219698
> 
> 赞同：5
> 
> 时间：2012-06-27T05:03:12.510
> 
> 标签：ninject, ninject-2

鉴于：

```
public interface IBatchProcess
{
    void Run();
} 
```

和多种实现：

```
public class BatchProcessOne : IBatchProcess { ... }
public class BatchProcessTwo : IBatchProcess { ... }
public class BatchProcessThree : IBatchProcess { ... } 
```

和一个跟踪装饰器：

```
public class BatchProcessTraceDecorator : IBatchProcess
{
    private readonly IBatchProcess _inner;

    public BatchProcessTraceDecorator( IBatchProcess inner )
    {
        _inner = inner;
    }

    public void Run()
    {
        Trace.TraceInformation( "Starting batch process..." );
        _inner.Run();
        Trace.TraceInformation( "Batch process complete." );
    }
} 
```

如何绑定装饰器和所有实现，以便在调用 kernel.GetAll 时获得 3 个跟踪装饰器实例，每个实例都有不同的内部批处理？

我知道 Ninject Interception 并且出于各种原因不想使用基于代理的解决方案。目前，我似乎需要使用 IBatchProcess 实例的激活策略，以便解决它们，然后我可以装饰并返回它们，但我希望我只是错过了绑定 api 中的某些内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T04:28:53.550

如果您不需要将依赖项注入装饰器，那么有一个非常简单的解决方案可以解决您的问题。只需使用 OnActivation 绑定方法。那看起来像

```
Bind<IBatchProcess>().To<ConcreteBatchProcess>()
                     .OnActivation((ctx, process) => 
                         new BatchProcessDecorator(process)); 
```

如果您需要将东西注入装饰器，您可以使用相同的技巧，但通过解决装饰器

```
Bind<IBatchProcess>().To<ConcreteBatchProcess>()
                     .OnActivation((ctx, process) => 
                         ctx.Kernel.Get<BatchProcessDecorator>(new ConstructorArgument("process", process))); 
```

希望有帮助

# c++ - 使用自定义谓词对类成员进行排序

> ID：11219702
> 
> 赞同：0
> 
> 时间：2012-06-27T05:03:36.580
> 
> 标签：c++

我有一个看起来像这样的场景：

```
#include <algorithm>
using namespace std;

// a "heavy" struct with lots of members
struct B {
  int key;
  // other members  
} 

class A {
  vector<B> bs;
} 
```

我想按他们的键对 bs 进行排序。现在，我过去为避免交换 B（因为它们相当重）而这样做的一种方法是定义一个索引向量并对索引进行排序。如果 bs 不是类成员，则此方法有效。

例如

```
vector<B> bs;
vector<size_t> indices;

bool pred(size_t i, size_t j) { return bs[i] < bs[j]; }

indices.resize(bs.size());
for (size_t i = 0; i < bs.size(); i++) indices[i] = i;
std::sort(indices.begin(), indices.end(), pred); 
```

但是，当 bs 是类成员时，这种“技术”会失败，因为谓词只能带两个参数。特别是，没有办法传递“this”。

我可以看到解决此问题的三种不同方法：

*   不要为指数烦恼。只是重载运算符`<`来处理 B 的实例。整个索引的事情只是过早的优化:-)
*   有一个指向 的全局指针`bs`，在调用之前设置它`sort`，然后在`pred`.
*   **使用闭包**。这会很酷，除非我没有使用 C++11。

有没有其他方法可以做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:08:58.593

如果您可以为其编写轻量级交换，`B`那么问题并不存在：`sort`将使用您的轻量级交换。

如果这不是一个选项，您可以将指向您的类的（智能）指针存储在向量中并对指针进行排序。

或者让你的班级使用 pimpl 成语然后交换，因为几乎免费。

绝对不要使用全局指针，因为有时有人想让这段代码线程安全，而用于排序的全局容器将成为任何尝试对这些对象进行多线程排序的巨大刺。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:10:04.807

假设它`b`位于`class A`并且可以通过一个名为 的成员函数访问`get`，您可以编写如下仿函数：

```
struct Comparator
{
  Compartor(A& a): m_a(a){}
  bool operator()(int i, int j) const
  {
    return m_a.get(i) < m_a.get(j);
  }

 A& m_a;
}; 
```

并像这样使用它：

```
A a;
std::sort(indices.begin(), indices.end(), Comparator(a)); 
```

# drupal - Drupal 7 FAPI ajax 和 jquery 提交事件

> ID：11219706
> 
> 赞同：2
> 
> 时间：2012-06-27T05:04:24.460
> 
> 标签：drupal, jquery, drupal-7

我在使用 FAPI 创建的表单的提交按钮中使用 #ajax。现在，当用户提交表单时，我想在通过 ajax 提交表单之前运行一些 jQuery 验证。由于#ajax 阻止了与提交按钮相关的事件，例如提交、单击、鼠标按下、按键等。我无法使用 jQuery 捕获提交事件。

现在作为一种解决方法，我在 ajax.js (misc/ajax.js) 中添加了自定义代码：

```
Drupal.ajax = function (base, element, element_settings) {
    ...
    beforeSubmit: function (form_values, element_settings, options) {
        //my custom code
        alert(1);
        ... 
```

这违反了 drupal 最佳实践，因为我正在破解核心。请任何人都可以帮助我从我的自定义 js 文件或任何其他方法在 ajax 提交之前验证内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:16:53.910

我认为以下帖子中接受的答案回答了您的问题：[如何扩展或“挂钩” Drupal Form AJAX？](https://drupal.stackexchange.com/questions/9920/how-to-extend-or-hook-drupal-form-ajax)

```
(function($) {
Drupal.behaviors.MyModule = {
attach: function (context, settings) {

    // Overwrite beforeSubmit
    Drupal.ajax['some_element'].options.beforeSubmit = function (form_values, element, options) {
        // ... Some staff added to form_values
    }
    //Or you can overwrite beforeSubmit
    Drupal.ajax['some_element'].options.beforeSerialize = function (element, options) {

        // ... Some staff added to options.data
        // Also call parent function
        Drupal.ajax.prototype.beforeSerialize(element, options);
    }

                //... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:32:36.850

我把它放在附加函数中

```
for (var base in settings.ajax) {
  Drupal.ajax[base].options.beforeSubmit = function(form_values, element, options){
    console.log('call your func');
  }
} 
```

有用！

# javascript - 仅限 Firefox (v13) 中的 localStorage.removeItem() 问题

> ID：11219709
> 
> 赞同：0
> 
> 时间：2012-06-27T05:04:50.317
> 
> 标签：javascript, html, firefox, local-storage

我只在 Firefox 中有一个奇怪的问题。

我将项目保存到 localStorage（其中一个是一个非常大的 JSON 对象，我用 JSON.stringify 对其进行了字符串化）。问题是当我尝试在 localStorage 对象上使用 removeItem() 时，它会清除整个事情。所有属性都被清除。但是，如果我刷新页面，属性就会回来。这适用于 Safari、Chrome 和 Opera（最新版本），但只有 Firefox 有这个奇怪的问题。

我已将问题隔离到我调用 localStorage.removeItem("value") 的一行中。有没有人见过这样的事情？

我什至对窗口对象上的“存储”事件进行了一些调试，只是为了看看发生了什么。我包括了下面的输出。当我尝试删除一个属性，任何属性时，所有这些都会回来。

altKey 未定义

attrChange 未定义

attrName 未定义

冒泡假的

可取消的错误

ctrlKey 未定义

currentTarget Window 周末度假

数据未定义

委托目标窗口周末度假

事件阶段 2

handleObj 对象 { type="storage", origType="storage", guid=9}

jQuery17207456704310204192 真的

元键未定义

原始事件存储

相关节点未定义

相关目标未定义

shiftKey 未定义

srcElement 未定义

目标窗口周末度假

时间戳 1340773330422505

输入“存储”

查看未定义

哪个未定义

isDefaultPrevented returnFalse()

isImmediatePropagationStopped returnFalse()

isPropagationStopped returnFalse()

防止默认函数（）

stopImmediatePropagation 函数（）

停止传播函数（）

**proto** Object { preventDefault=function(), stopPropagation=function(), stopImmediatePropagation=function(), more...} storage changed cityli...0771360（第 55 行）

altKey 未定义

attrChange 未定义

attrName 未定义

冒泡假的

可取消的错误

ctrlKey 未定义

currentTarget Window 周末度假

数据未定义

委托目标窗口周末度假

事件阶段 2

handleObj 对象 { type="storage", origType="storage", guid=9}

jQuery17207456704310204192 真的

元键未定义

原始事件存储

相关节点未定义

相关目标未定义

shiftKey 未定义

srcElement 未定义

目标窗口周末度假

时间戳 1340773330470620

输入“存储”

查看未定义

哪个未定义

isDefaultPrevented returnFalse()

isImmediatePropagationStopped returnFalse()

isPropagationStopped returnFalse()

防止默认函数（）

stopImmediatePropagation 函数（）

停止传播函数（）

**proto** Object { preventDefault=function(), stopPropagation=function(), stopImmediatePropagation=function(), more...} storage changed cityli...0771360（第 55 行）

altKey 未定义

attrChange 未定义

attrName 未定义

冒泡假的

可取消的错误

ctrlKey 未定义

currentTarget Window 周末度假

数据未定义

委托目标窗口周末度假

事件阶段 2

handleObj 对象 { type="storage", origType="storage", guid=9}

jQuery17207456704310204192 真的

元键未定义

原始事件存储

相关节点未定义

相关目标未定义

shiftKey 未定义

srcElement 未定义

目标窗口周末度假

时间戳1340773331099462

输入“存储”

查看未定义

哪个未定义

isDefaultPrevented returnFalse()

isImmediatePropagationStopped returnFalse()

isPropagationStopped returnFalse()

防止默认函数（）

stopImmediatePropagation 函数（）

停止传播函数（）

**proto** Object { preventDefault=function(), stopPropagation=function(), stopImmediatePropagation=function(), more...} storage changed cityli...0771360（第 55 行）

altKey 未定义

attrChange 未定义

attrName 未定义

冒泡假的

可取消的错误

ctrlKey 未定义

currentTarget Window 周末度假

数据未定义

委托目标窗口周末度假

事件阶段 2

handleObj 对象 { type="storage", origType="storage", guid=9}

jQuery17207456704310204192 真的

元键未定义

原始事件存储

相关节点未定义

相关目标未定义

shiftKey 未定义

srcElement 未定义

目标窗口周末度假

时间戳 1340773332394871

输入“存储”

查看未定义

哪个未定义

isDefaultPrevented returnFalse()

isImmediatePropagationStopped returnFalse()

isPropagationStopped returnFalse()

防止默认函数（）

stopImmediatePropagation 函数（）

停止传播函数（）

**proto** Object { preventDefault=function(), stopPropagation=function(), stopImmediatePropagation=function(), more...} storage changed cityli...0771360（第 55 行）

altKey 未定义

attrChange 未定义

attrName 未定义

冒泡假的

可取消的错误

ctrlKey 未定义

currentTarget Window 周末度假

数据未定义

委托目标窗口周末度假

事件阶段 2

handleObj 对象 { type="storage", origType="storage", guid=9}

jQuery17207456704310204192 真的

元键未定义

原始事件存储

相关节点未定义

相关目标未定义

shiftKey 未定义

srcElement 未定义

目标窗口周末度假

时间戳 1340773332395014

输入“存储”

查看未定义

哪个未定义

isDefaultPrevented returnFalse()

isImmediatePropagationStopped returnFalse()

isPropagationStopped returnFalse()

防止默认函数（）

stopImmediatePropagation 函数（）

停止传播函数（）

**proto** Object { preventDefault=function(), stopPropagation=function(), stopImmediatePropagation=function(), more...} storage changed cityli...0771360（第 55 行）

altKey 未定义

attrChange 未定义

attrName 未定义

冒泡假的

可取消的错误

ctrlKey 未定义

currentTarget Window 周末度假

数据未定义

委托目标窗口周末度假

事件阶段 2

handleObj 对象 { type="storage", origType="storage", guid=9}

jQuery17207456704310204192 真的

元键未定义

原始事件存储

相关节点未定义

相关目标未定义

shiftKey 未定义

srcElement 未定义

目标窗口周末度假

时间戳1340773361375308

输入“存储”

查看未定义

哪个未定义

isDefaultPrevented returnFalse()

isImmediatePropagationStopped returnFalse()

isPropagationStopped returnFalse()

防止默认函数（）

stopImmediatePropagation 函数（）

停止传播函数（）

**proto** Object { preventDefault=function(), stopPropagation=function(), stopImmediatePropagation=function(), more...} storage changed cityli...0771360（第 55 行）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:16:40.623

对不起，伙计们，我什至不知道如何解释，但我在这里找到了答案：http: [//treasonx.com/blog/2012/05/08/firefox-localstorage-bug/](http://treasonx.com/blog/2012/05/08/firefox-localstorage-bug/)

> 如果您执行以下操作，则会显示该错误。如果您与 localStorage 的第一次交互是 removeItem，您将无法从 localStorage 对象中获得正确的长度。看起来好像 localStorage 中的所有项目都已被删除。情况并非如此，浏览器只是没有使用 localStoage 的内容更新其缓存。

这是建议的解决方法，直到问题得到解决：

> 目前的解决方法是在使用 localStorage 进行任何其他操作之前获取 localStorage 对象的长度，以便它按预期工作。

# javascript - getElementById() 的 Javascript 速记语法不起作用

> ID：11219710
> 
> 赞同：0
> 
> 时间：2012-06-27T05:04:51.987
> 
> 标签：javascript, syntax, shorthand

我已经找到了有关此[https://stackoverflow.com/a/6398848/1406888](https://stackoverflow.com/a/6398848/1406888)的上一个问题的答案，但它对我不起作用。我不明白，因为当我在 Firefox 开发人员的控制台中使用相同的简写时，它可以工作。

这是我正在使用的代码的简短示例

```
<div id="list1">
<li>pres</li>
<li>mike</li>
<li>camel</li>
<li>week</li>
</div>

<p></p>
<div id="list2">
<li>time</li>
<li class="test">era</li>
<li>people</li>
<li>life</li>
</div>

<p></p>
<div id="list3">
<li>time</li>
<li class="test">era</li>
<li>people</li>
<li>life</li>
</div>

<script type="text/javascript">

var testId = document.getElementById("list1");
testId.style.borderStyle="solid";
$("#list2").style.borderStyle="solid";

$("list3").style.borderStyle="solid";

</script> 
```

唯一有效的是 list1 边框。其他的都失败了。有人可以纠正我。

我现在有一个工作模板。这是我的代码：

```
<div id="list1">
<li>pres</li>
<li>mike</li>
<li>camel</li>
<li>week</li>
</div>

<p></p>
<div id="list2">
<li>time</li>
<li class="test">era</li>
<li>people</li>
<li>life</li>
</div>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">

var testId = document.getElementById("list1");
testId.style.borderStyle="solid";
//$("#list2").style.borderStyle="solid";   this does not work
$("#list2").css("border-Style","solid");   this works.
</script> 
```

就这样我明白了。没有getElementById的替代品？？？我认为这是一种可互换的速记，但在我的示例中，它仅适用于 JQuery 速记的 .css 属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T05:09:18.397

有时，当我只想能够使用 $ 作为 document.getElementById 的简写而不实际需要主要 javascript 库的功能时，我将在页面中折腾：

```
function $(a){return document.getElementById(a);} 
```

节省大量打字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T05:06:59.967

您需要有一些库来提供此快捷方式（如 jQuery）。它没有内置在核心语言或您的浏览器中。

此外，对于 jQuery，它会是`$('#list3')`（您可以使用各种选择器，而不仅仅是节点 ID）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T05:07:27.423

您需要在页面中包含 JQuery 才能使用此表示法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T05:09:03.737

您在此处描述的语法需要[jQuery](http://jquery.com/) javascript 库。您必须下载并导入库，或直接链接到 HTML 中的 jQuery 代码库，然后才能使用。将以下行添加到 HTML 文件的顶部：

```
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T05:09:40.123

追加 jquery 库，$ 不在核心功能中——

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">

var testId = document.getElementById("list1");
testId.style.borderStyle="solid";
$("#list2").style.borderStyle="solid";

$("list3").style.borderStyle="solid";

</script> 
```

或者如果你对 JS 很难，那么就这样做吧----

```
var testId1 = document.getElementById("list1");
var testId2 = document.getElementById("list2");
var testId3 = document.getElementById("list3");
testId1.style.borderStyle="solid";
testId2.style.borderStyle="solid";
testId3.style.borderStyle="solid"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T05:20:12.437

IMO：您需要在 jquery 中这样做

```
$("#list2").css("border-Style","solid")

$("#list3").css("border-Style","solid") 
```

并确保在 jquery 中添加`#`Id 如果您正在访问具有 id 的元素。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-27T05:22:26.350

尝试使用 jquery [css](http://api.jquery.com/css/)方法设置边框样式。

```
<script type="text/javascript">
  $(document).ready(function(){
    $("#list2").css("border-style","solid");
  });
</script> 
```

# javascript - 如果从自己的文件中调用函数，则不会触发 JSON 回调

> ID：11219711
> 
> 赞同：0
> 
> 时间：2012-06-27T05:05:14.667
> 
> 标签：javascript, json, callback, jsonp, undefined

标题是我总结的最好方式。如何解释这个有点模糊。基本上，如果我在 html 文件中包含保存 JSON 函数的 javascript 文件，则触发 JSON 函数 - 回调有效。但是，如果我只是从它自己的文件中调用 JSON 函数 - 回调永远不会触发。不确定这是否是某种 javascript 或网络浏览器安全功能。非常感谢您的解释。

这里有些例子。

工作版本：

json.html：（精简）

```
<html>
<head><script type="text/javascript" src="json.js"></script></head>
<script>
    JSON_Object(json_url, function(json_obj) {
        alert(json_obj); // this version works!
    });
</script>
<html> 
```

json.js：

```
function JSON_Object(json_url, callback) {
    // This function will return an object to the JSON data.
    json_url = json_url + "&callback=jsonCallback";

    var json_script = document.createElement("script");
    json_script.setAttribute("src", json_url);
    json_script.setAttribute("type", "text/javascript");

    window.jsonCallback = function(jsonObjReturn) {
        // cleanup
        document.body.removeChild(json_script);
        delete window[callback];

        callback(jsonObjReturn); // use our callback function to return the data.
    }

    document.body.appendChild(json_script);
} 
```

非工作版本 - json.js 中的另一个函数：

```
 JSON_Object(content_page, function(json_obj) {
        alert(json_obj); // This version doesn't work. Never called.
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:38:12.740

经过一番研究，我发现我是对的。它是用于扩展的 Web 浏览器安全功能。从以下链接： [http ://code.google.com/chrome/extensions/content_scripts.html](http://code.google.com/chrome/extensions/content_scripts.html)

从页面引用

> 但是，内容脚本有一些限制。他们不能：
> 
> *   使用由其扩展页面定义的变量或函数
>     
> *   使用由网页或其他内容脚本定义的变量或函数

JSON 属于上述类别，因为它使用回调函数。

# html - 浏览器较小时，标题不会完全向左移动

> ID：11219715
> 
> 赞同：1
> 
> 时间：2012-06-27T05:05:54.850
> 
> 标签：html, css, sass

我正在制作菜单。在我当前的实现中，当我缩小浏览器时，标题内容不会完全向左移动。如何使 css 样式更好，以便当用户缩小浏览器时它完全向左移动。

我当前的代码如下。

```
.header-container
  .header
    .logo
      %img{:src => 'assets/logo.png'}
    .menu
      %ul
        %li
          %a{:href => '#'} Home
        %li
          %a{:href => '#'} Features
        %li
          %a{:href => '#'} Pricing
        %li
          %a{:href => '#'} Team
        %li
          %a{:href => '#'} Support 
```

这是我的scss

```
.header-container {
width: 100%;
height: 5%;
background: url(menubg.jpg) no-repeat;

.header {
    width: 70%;
    margin: 0 auto;
    padding: 2%;
    border: 1px solid red;

    img {
        float: left;
    }

    ul {
        border: 1px solid green;
        //min-width
        li {
            float: left;
            border: 1px solid blue;
            margin-right: 2%;
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:09:44.260

你听说过[媒体查询](http://css-tricks.com/css-media-queries/)吗？

# c++ - C++ winsock服务器中非阻塞模式与异步套接字的区别

> ID：11219720
> 
> 赞同：0
> 
> 时间：2012-06-27T05:06:36.317
> 
> 标签：c++, multithreading, asyncsocket, winsock2

在 C++ 中，我阅读了一些教程来创建一个可以接受来自多个客户端的连接的服务器。他们建议使用异步套接字，但我真的不知道为什么我们应该选择异步而不是非阻塞模式。使用多线程的想法又是怎样的呢？它比使用异步套接字更好吗？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:51:28.840

由于您要求使用 C++ 解决方案，因此[boost asio](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio.html)是 imo 最好的异步 io 库。

我假设您在提到“多线程”时谈论的是“每个客户端一个线程”解决方案，这对于希望在短时间内有多个客户端或同时连接的服务器来说通常是一个非常糟糕的主意。线程是这种用途的资源消耗方式，而且您必须注意互斥，这与阻塞调用相结合会使您很快陷入死锁。这就是你可能遇到的最糟糕的情况。

此外，攻击者很容易利用您的服务器卡住。您将花费大量时间来尝试设计您的代码，以避免这种情况发生，这会导致您拥有不可读、难以更新和错误的电话代码。

在 boost.asio 中，指定的线程（调用 io_service::run 的线程）只会在实际有工作要做时才工作，直接将您引导到分配给任务的对象。因此，从技术上讲，异步也是阻塞的，不同之处在于只有调度程序等待工作完成，而您添加的那些功能（连接、发送、接收......）将立即返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:53:36.003

我假设您说的是 TCP 而不是 UDP。我绝对建议*跳过*异步套接字，它们受到 Microsoft 和支持者的青睐，但不可移植。而是使用香草的东西：[这是一个](http://www.linuxhowtos.org/C_C++/socket.htm)带有[server](http://www.linuxhowtos.org/data/6/server.c)和[client](http://www.linuxhowtos.org/data/6/client.c)的示例。

# c# - 在 Windows 8 上访问以 PDF 格式创建的笔记

> ID：11219726
> 
> 赞同：3
> 
> 时间：2012-06-27T05:06:53.483
> 
> 标签：c#, .net, windows-8

在 Windows 8 中，我可以在本地新 PDF 查看器中打开任何 PDF 文件，并通过突出显示文本并单击“添加注释”来添加注释。

我希望能够使用 C# 以编程方式访问这些笔记。但我很难找到它们。我可以很容易地枚举文档属性，但我根本找不到注释......

这是我的代码：

```
 FileOpenPicker openPicker = new FileOpenPicker();
        openPicker.ViewMode = PickerViewMode.Thumbnail;
        openPicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
        openPicker.FileTypeFilter.Add(".pdf");
        StorageFile file = await openPicker.PickSingleFileAsync();

        var props = await file.Properties.RetrievePropertiesAsync(new List<string> { });

        foreach (var key in props.Keys)
        {
            Debug.WriteLine("key: " + key + " value: " + props[key]);
        }

        var docProp = await file.Properties.GetDocumentPropertiesAsync();
        var allDocProperties = await docProp.RetrievePropertiesAsync(new List<string> { });

        foreach (var key in allDocProperties.Keys)
        {
            Debug.WriteLine("key: " + key + " value: " + allDocProperties[key]);
        } 
```

但是我在输出窗口中看到的所有属性都与我在 PDF 中创建的注释无关。

其他人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:58:22.063

这样做的结果是我不得不将足够多的代码从 iTextView 移植到 .NETCore 中，这很痛苦，但我得到了足够多的工作，这样我就可以传入 a`byte[]`并提取注释。

谢谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T05:22:36.253

Microsoft Reader 还将它们存储在自己的隔离存储中。具体来说，这些注释位于 Microsoft Reader 隔离存储中的 LocalState\PLM\Document 文件夹中。您可以在用户配置文件的 AppData\Local\Packages 中找到每个应用程序的隔离存储。

# jquery - 用于逐步动画的 jQuery 队列插件

> ID：11219728
> 
> 赞同：0
> 
> 时间：2012-06-27T05:07:00.933
> 
> 标签：jquery, jquery-plugins, raphael

有没有我可以用来排队动画的插件。

我将 jQuery.Queue() 和回调函数视为选项，但我的问题是 Queue("fx") 不适用于我的 div，因为它有多个 DOM。

基本上，我有一个可视化排序的动画功能，**我希望它一个一个地发生**。我即将编写一个自定义队列..但想知道是否存在一个插件来处理队列并提供逐步运行动画的能力。

如果有人能告诉我制作具有多个 div 的动画的最佳选择，那将是一个很大的帮助

编辑：http: [//jsfiddle.net/realwork007/tnJug/](http://jsfiddle.net/realwork007/tnJug/)

小提琴不起作用，但是如果您查看 selectionSort() 它会调用各种动画方法。如果我运行，我希望动画功能逐步运行，但目前所有同时运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T05:12:49.990

这是一个可能有帮助的小脚本。我经常用它来一张一张地淡化图像。

```
$.fn.fade1by1 = function (options) {

    var opt = $.extend({
            'delay' : 500,
            'speed' : 500,
            'ease' : 'swing' // Other requires easing plugin
        }, options);

    var that = this;
    for (var i = 0, d = 0, l = that.length; i < l; i++, d += opt.delay)
        that.eq(i).delay(d).fadeIn(opt.speed, opt.ease);

    return this

}; 
```

**演示：http:** [//jsfiddle.net/elclanrs/9Zxew/](http://jsfiddle.net/elclanrs/9Zxew/)

# javascript - trim() 函数在 IE8 中不起作用？

> ID：11219731
> 
> 赞同：28
> 
> 时间：2012-06-27T05:07:28.940
> 
> 标签：javascript, internet-explorer, internet-explorer-8

每当我`trim()`在字符串上使用该函数时，它在 Chrome 和 Firefox 上都能正常工作，但在 IE8 中出现错误：

> 对象不支持此属性或方法

谁能告诉我为什么会发生这种情况以及是否有解决方法？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-06-27T05:14:48.920

IE8 不支持修剪功能。这是一个polyfill：

```
if(typeof String.prototype.trim !== 'function') {
  String.prototype.trim = function() {
    return this.replace(/^\s+|\s+$/g, ''); 
  };
} 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-06-27T05:11:10.370

如果你愿意，你可以添加 jquery 并使用 $.trim(....) 这将工作..

```
$.trim("  hello "); 
```

给你

```
"hello" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-12T16:10:13.700

`trim()`Internet Explorer 仅从版本 9开始支持。

作为参考，[MDN Polyfill`String.prototype.trim()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim#Polyfill)是：

```
if (!String.prototype.trim) {
  (function() {
    // Make sure we trim BOM and NBSP
    var rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;
    String.prototype.trim = function() {
      return this.replace(rtrim, '');
    };
  })();
} 
```

对它的[支持](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim#Browser_compatibility)是：

```
+--------+---------+----+-------+--------+
| Chrome | Firefox | IE | Opera | Safari |
+--------+---------+----+-------+--------+
| All    | 3.5     |  9 | 10.5  |      5 |
+--------+---------+----+-------+--------+ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-05T09:46:54.860

因为，我在使用 jQuery，在 @nemo 和 @karesh-a 的帮助下，我想出了：

```
if(typeof String.prototype.trim !== 'function') {
     String.prototype.trim = function(){
        return jQuery.trim( this );
    }
} 
```

# ruby-on-rails - Hartl 的 Rails 教程（第 8 章） - 如何让 home.html.erb 在用户登录时显示用户配置文件？

> ID：11219733
> 
> 赞同：0
> 
> 时间：2012-06-27T05:07:57.883
> 
> 标签：ruby-on-rails, session-cookies

关于SO的第一个问题:)

在第 8 章的最后，在 perm 的帮助下。cookie，根据用户是否登录，可能会显示不同的项目。我想对书中建议的 home.html.erb 做一个小修改，这样如果用户已登录，点击“主页”或“示例应用”徽标将不再显示默认的蓝色登录并欢迎屏幕，而是用户的个人资料。换句话说：

```
<% if !signed_in? %>
# if user is NOT signed in
# show the welcome and blue sign in buttons
<% else %>
# if user is signed in
# Render show.html.erb (i.e. the user profile) in app/views/users <-- this is where I am stuck on 
```

基本上，我的问题的要点是，我如何告诉 Rails 在 home.html.erb 环境中呈现另一个页面？这将更类似于 Facebook 或 twitter，如果您在其中登录，单击徽标会将您带回您的个人资料页面而不是注册页面。

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:55:15.017

In the book session create action is

```
def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end
end 
```

You must change `redirect_to` .check [http://api.rubyonrails.org/..for](http://api.rubyonrails.org/..for) usage of redirect_to.

# android - 模仿 ListView 行中的溢出微调器

> ID：11219735
> 
> 赞同：2
> 
> 时间：2012-06-27T05:08:02.233
> 
> 标签：android, android-layout

我试图在`Spinner`a 内的每一行中放入`ListView`a `ListFragment`。

我希望它看起来像商店中的垂直溢出图像，但我无法弄清楚如何显示可单击以显示选项的垂直溢出图像。

![在此处输入图像描述](../Images/812f1191de863e30b2b503e8cc2042d3.png)

它总是看起来像下面。我想删除“选项”并改为使用溢出图像。

![在此处输入图像描述](../Images/33f4291c6c59edaafd96941c4aa32f8e.png)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T23:02:18.190

从其他帖子中找到相关的想法并将它们组合起来，谢谢 Stack Overflow。

[Android：如何将微调器选择器设置为拥有图像/图标？](https://stackoverflow.com/questions/4535109/android-how-to-set-spinner-selector-to-own-image-icon/5150999#5150999)

[使用 XML 声明一个自定义的 android UI 元素](https://stackoverflow.com/questions/2695646/declaring-a-custom-android-ui-element-using-xml)

[如何获取图像的宽度和高度？](https://stackoverflow.com/questions/4552833/how-to-get-width-and-height-of-the-image)

这个想法是你创建一个 0dp 宽度，上面`Spinner`有一个`ImageView`。当您单击图像时，它会显示下拉菜单。当 Spinner 位于屏幕边缘时，我还没有测试它的行为，并且很可能会引起麻烦。我还需要调整 Spinner 的位置，但这暂时有效。

我的计划是从 Spinner 中捕获选择，然后根据单击的内容打开一个对话框/意图。这是它的样子。（ImageView 很微弱，但它现在对我来说主要是一个占位符）

**点击前**

![在此处输入图像描述](../Images/42ec89523ffc748158b4a44aee00a87c.png)

**点击后**

![在此处输入图像描述](../Images/89b7e3233fd0e553b4cdb13b5cce9f45.png)

这是我使用的通用代码，因为这对其他人来说似乎是可取的。

**值/attrs.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="OverflowSpinner">
        <attr name="imageResource" format="string" />
        <attr name="spinnerTextResource" format="string" />
    </declare-styleable>
</resources> 
```

**值/字符串.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string-array name="spinner_array">
        <item>Skip</item>
        <item>View log</item>
    </string-array>
</resources> 
```

**布局/row.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:awesome="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    <!-- stuff -->
    <com.blah.package.OverflowSpinner
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        awesome:imageResource="@drawable/ic_menu_moreoverflow_normal_holo_light"
        awesome:spinnerTextResource="@array/spinner_array"
        /> 
</RelativeLayout> 
```

**溢出Spinner.java**

```
public class OverflowSpinner extends RelativeLayout {
    int mImage;
    int mStrings;

    public OverflowSpinner(Context context) {
        super(context);
    }

    public OverflowSpinner(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(attrs);
        setupDisplay(context);
    }

    public OverflowSpinner(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init(attrs);
        setupDisplay(context);
    }

    private void init(AttributeSet attrs) { 
        TypedArray attribs = getContext().obtainStyledAttributes(attrs, R.styleable.OverflowSpinner);
        // get attributes
        mImage = attribs.getResourceId(R.styleable.OverflowSpinner_imageResource, -1);
        mStrings = attribs.getResourceId(R.styleable.OverflowSpinner_spinnerTextResource, -1);

        attribs.recycle();
    }

    private void setupDisplay(Context context) {
        BitmapDrawable bitmap = (BitmapDrawable)this.getResources().getDrawable(mImage);
        int height = bitmap.getBitmap().getHeight();

    // set size of Spinner to 0 x height so it's "hidden"
    // the height is used to help position the Spinner in a nicer spot 
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(context, mStrings, android.R.layout.simple_spinner_item);

        // setup spinner
        final Spinner spinner = new Spinner(context);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(adapter);
        spinner.setLayoutParams(lp);
        this.addView(spinner);

        // set size of image to be normal
        lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        lp.addRule(ALIGN_PARENT_BOTTOM);

        ImageButton option = new ImageButton(context);
        option.setBackgroundResource(android.R.color.transparent);
        option.setImageResource(mImage);
        option.setLayoutParams(lp);
        // when clicking the image button, trigger the spinner to show
        option.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                spinner.performClick();
            }
        });
        this.addView(option);
    }
} 
```

# android - 如何封装 ArrayAdapter 的数据？

> ID：11219740
> 
> 赞同：0
> 
> 时间：2012-06-27T05:08:40.640
> 
> 标签：android, adapter, encapsulation

我的活动中有一个来自我的自定义适配器类的构造函数：

```
CustomAdapter cAdapt = new CustomAdapter(this,
        android.R.layout.simple_list_item_1, newlist); 
```

目前，“newlist”是一个`ArrayList<String>`. 它用于`TextView`在我的自定义适配器中设置一个它为列表中的每个项目保存的数据。问题是我的每个项目都`ListView`包含三个`TextView`和一个`ImageView`.

如何封装所有 5 个对象的数据，然后将其传递给我的构造函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T05:14:11.947

您应该摆脱的第一件事是`android.R.layout.simple_list_item_1`每行不会给您超过一个 TextView。

> 问题是我的 ListView 中的每个项目都包含三个 TextView 和一个 ImageView。

您应该设计自己的行布局。

以下代码段将为您提供帮助。

**行.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/logo"
        android:layout_width="50px"
        android:layout_height="50px"
        android:layout_marginLeft="5px"
        android:layout_marginRight="20px"
        android:layout_marginTop="5px"
        android:src="@drawable/windowsmobile_logo" >
    </ImageView>

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="30px" >
    </TextView>

</LinearLayout> 
```

**MobileArrayAdapter.java**

```
package com.mkyong.android.adaptor;

import com.mkyong.android.R;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class MobileArrayAdapter extends ArrayAdapter<String> {
    private final Context context;
    private final String[] values;

    public MobileArrayAdapter(Context context, String[] values) {
        super(context, R.layout.list_mobile, values);
        this.context = context;
        this.values = values;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View rowView = inflater.inflate(R.layout.list_mobile, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.label);
        ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
        textView.setText(values[position]);

        // Change icon based on name
        String s = values[position];

        System.out.println(s);

        if (s.equals("WindowsMobile")) {
            imageView.setImageResource(R.drawable.windowsmobile_logo);
        } else if (s.equals("iOS")) {
            imageView.setImageResource(R.drawable.ios_logo);
        } else if (s.equals("Blackberry")) {
            imageView.setImageResource(R.drawable.blackberry_logo);
        } else {
            imageView.setImageResource(R.drawable.android_logo);
        }

        return rowView;
    }
} 
```

**MainActivity.java**

```
package com.mkyong.android;

import com.mkyong.android.adaptor.MobileArrayAdapter;
import android.app.ListActivity;
import android.os.Bundle;
import android.widget.ListView;
import android.widget.Toast;
import android.view.View;

public class MainActivity extends ListActivity {

    static final String[] MOBILE_OS = 
               new String[] { "Android", "iOS", "WindowsMobile", "Blackberry"};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setListAdapter(new MobileArrayAdapter(this, MOBILE_OS));

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

        //get selected items
        String selectedValue = (String) getListAdapter().getItem(position);
        Toast.makeText(this, selectedValue, Toast.LENGTH_SHORT).show();

    }

} 
```

把时间花在阅读上。

[http://www.mkyong.com/android/android-listview-example/](http://www.mkyong.com/android/android-listview-example/)

```
How do I encapsulate the data for all 5 objects then pass it into my constructor? 
```

您可以做的是使用 setter getter 方法创建模型类。并将类对象传递给 arraylist。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:18:04.190

您可以使用 BaseAdapter 并创建自定义列表视图。您必须创建包含您的文本视图和图像的 custom_list.xml 文件。

```
itemlist.setAdapter(new MyCustomBaseAdapter(this)); 
```

像这样创建类

```
static class ViewHolder {
    TextView txtTitle;
    TextView txtDescription;
    TextView txtDate;
}

public class MyCustomBaseAdapter extends BaseAdapter {
    // private static ArrayList<SearchResults> searchArrayList;

    private LayoutInflater mInflater;

    public MyCustomBaseAdapter(Context context) {
        mInflater = LayoutInflater.from(context);
    }

    public int getCount() {
        return arrayRSS.size();
    }

    public Object getItem(int position) {
        return arrayRSS.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.custom_list, null);
            holder = new ViewHolder();
            holder.txtTitle = (TextView) convertView
                    .findViewById(R.id.title);
            holder.txtDescription = (TextView) convertView
                    .findViewById(R.id.description);
            holder.txtDate = (TextView) convertView.findViewById(R.id.date);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.txtTitle.setText(arrayRSS.get(position).getTitle());
        holder.txtDescription.setText(arrayRSS.get(position)
                .getDescription());
        holder.txtDate.setText(arrayRSS.get(position).getPubdate());

        return convertView;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T05:13:07.450

您可以创建一个对象`ItemInfo`，并使用 getter 和 setter 包含五个数据字段中的每一个。然后制作一个`ArrayList<ItemInfo>`, 并将其传递给您的适配器并从那里处理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T05:15:28.513

您可以将数组列表传递为

```
 ArrayList<ArrayList<Object>> arraylist=new ArraList<ArrayList<Object>> 
```

其中 ArrayList 包含三个 textview 和一个 imageview 的数据。

# mysql - 如何在我的 sql 中使用连接？

> ID：11219742
> 
> 赞同：0
> 
> 时间：2012-06-27T05:08:53.067
> 
> 标签：mysql

有两个表 tbldoctor 和 tblschedule

医生

```
 doc_id(PK)    docMrId        docfname
      1          22             manish
      2          23             rahul
      3          22             ashish
      4          24             ahemad
      5          22             narendra
      6          22             akshat 
```

tblschedule

```
 doctor_id(FK)    mr_id       schedule_date
     1              22          2012-06-12
     1              22          2012-06-13
     3              22          2012-06-14
     3              22          2012-06-14
     4              24          2012-06-12
     4              24          2012-06-12
     5              22          2012-06-14
     5              22          2012-06-15
     5              22          2012-06-12 
```

我想要的是所有医生的列表和在 tblschedule 表中重复的特定医生的计数，其中提供了 schedule_date 参数和 mr_id 我们假设 mr_id =22 和 schedule_date 在 2012-06-01 到 2012-06-31 之间

输出应该看起来像

```
 doc_id         docfname      count
    1               manish       2
    3               rahul        2
    5               narendra     3
    6               akshat       0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T05:14:55.737

```
select d.doc_id, docfname, count(mr_id) as count
from tbldoctor d
left outer join tblschedule s on s.doctor_id = d.doc_id
where mr_id = 22 
and schedule_date between '2012-06-01' and '2012-06-31'
group by s.doctor_id 
```

## 编辑

```
select d.doc_id, 
       docfname, 
       sum(case when mr_id = 22 
                then 1 
                else 0 
           end) as count
from tbldoctor d
left outer join tblschedule s on s.doctor_id = d.doc_id
and schedule_date between '2012-06-01' and '2012-06-31'
group by s.doctor_id 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/257de/6)

## 编辑 2

怎么样

```
select d.doc_id, docfname, count(mr_id) as count
from tbldoctor d
left outer join tblschedule s on s.doctor_id = d.doc_id and mr_id = docmrid
where docmrid = 22 
and (schedule_date between '2012-06-01' and '2012-06-31' or mr_id is null)
group by s.doctor_id
order by d.doc_id 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/65158/12)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:14:57.867

不是 100% 确定我理解你的意思，但这会给你一个所有医生 ID 的列表，以及两个给定日期之间每个医生 ID 的计划项目数。

```
SELECT tbldoctor.doc_id, COUNT(*) cnt
FROM tbldoctor d INNER JOIN tblschedule s
    ON d.doc_id = s.doctor_id
WHERE s.schedule_date BETWEEN '2012-06-12' AND '2012-06-15'
GROUP BY tbldoctor.doc_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T05:16:10.073

```
SELECT * FROM `tbldoctor` JOIN `tblschedule` ON `tblschedule`.doctor_id(FK) = `tbldoctor`.doc_id(PK) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T05:45:17.753

```
SELECT tbldoctor.doc_id, COUNT(*) cnt FROM tbldoctor d INNER JOIN tblschedule s     ON d.doc_id = s.doctor_id WHERE s.schedule_date BETWEEN '2012-06-12' AND '2012-06-15' GROUP BY tbldoctor.doc_id 
```

# ruby-on-rails - 在不同环境中读取相同文件时的 Ruby 字符编码混乱

> ID：11219749
> 
> 赞同：2
> 
> 时间：2012-06-27T05:09:25.330
> 
> 标签：ruby-on-rails, ruby, character-encoding

我有一个接受 CSV 文件上传的 Rails 应用程序。在我的 Mac 上本地开发该功能时，我在尝试解析上传的文件（使用 Ruby 的标准库 CSV）时收到“UTF-8 中的无效字节序列”错误。

因此，在对 StackOverflow 上的类似问题进行了一些研究并阅读了一些答案之后，我尝试使用 gem 来嗅出字符编码（即 CharDet），然后在通过 CSV 库打开文件时，我会指定编码。这解决了我所有的问题，生活很美好。

```
 content = File.read(fullpath)
    self.file_encoding = CharDet.detect(content)['encoding']
    CSV.table(fullpath, :encoding => file_encoding, :header_converters => :downcase).headers 
```

但后来我将此代码部署到生产 Linux 环境，并再次出现“UTF-8 中的无效字节序列”错误。多么神秘（无论如何对我来说）！在尝试解决错误一段时间后，我尝试在打开文件时删除指定编码的代码。并且奇迹般地解决了生产问题，但现在本地 Mac 开发被打破了。

请记住，在这两种情况下，我都使用相同的浏览器上传相同的文件。有人对这里发生的事情有任何见解吗？

顺便说一句，ruby 的版本很接近，但不一样。Mac 是**ruby​​ 1.9.3-p0**，Linux 服务器是**1.9.2-p180**。该应用程序是 Rails **3.2.6**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:53:09.993

一些想法：

1.  您确认上传文件的编码了吗？
2.  您是否按照 Frederick Cheung 的建议在 Mac 上测试了 1.9.2-p180？
3.  您是否尝试过在每个平台上输出 CharDet.detect 的结果以查看接收到的文件（相对于上传的文件）的编码是什么？我想知道 Linux 上的 Apache 和 Mac 上的 WEBrick 之间的某些配置是否不同？
4.  您是否在两个平台上使用相同版本的 CharDet？它使用哪些库（例如 iconv），它们在两个平台上的版本是否相同？

我不知道 1.9.2 和 1.9.3 之间的编码行为有任何差异，但我也没有专门研究过它。这也可能是 MRI 构建的配置不同。

# windows - 如何确保使用 Perl 的 Imager::Screenshot 截取特定窗口的屏幕截图？

> ID：11219755
> 
> 赞同：2
> 
> 时间：2012-06-27T05:09:42.363
> 
> 标签：windows, perl, internet-explorer, browser

我在我的 Perl 代码中使用[Imager::Screenshot](http://search.cpan.org/perldoc/Imager%3a%3aScreenshot)，它确实有效并截取了屏幕截图。

现在，每次浏览器在不同的位置打开时，这意味着开始的 x 和 y 位置可能不一样。

有没有办法从浏览器而不是桌面起始位置开始截图。

如果不是（有点偏离编程主题），有没有办法将浏览器设置为仅以全尺寸打开，无论它是从哪个程序打开的。由用户单击图标时打开，或由 Perl 使用[Win32::OLE](http://search.cpan.org/perldoc/Win32%3a%3aOLE)模块打开。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T05:37:31.717

您可以使用[Win32::GuiTest::FindWindowLike](http://search.cpan.org/perldoc/Win32%3a%3aGuiTest)查找与浏览器关联的窗口句柄并将其指定为`screenshot`：

```
#!/usr/bin/env perl

use strict; use warnings;
use Const::Fast;
use Imager;
use Imager::Screenshot qw( screenshot );
use Win32::GuiTest qw( FindWindowLike SetForegroundWindow );

const my $TYPE => 'bmp';

my @windows = FindWindowLike(0,
    '(?:Mozilla Firefox)|(?:Internet Explorer)|(?:Opera)'
);

for my $hwnd (@windows) {
    warn "$hwnd\n";
    SetForegroundWindow $hwnd;
    sleep 1;
    my $img = screenshot(hwnd => $hwnd, decor => 1);
    die Imager->errstr unless $img;

    $img->write(file => "$hwnd.$TYPE", type => $TYPE)
        or die $img->errstr;
} 
```

上面的代码将为整个 IE 窗口和包含当前选项卡的子窗口分别截屏。如果你只对顶级 IE 窗口感兴趣，你会想使用`my @windows = FindWindowLike(0, 'Internet Explorer', '^IEFrame');`

此外，如果您使用 已打开[“InternetExplorer.Application”](http://msdn.microsoft.com/en-us/library/aa752084%28v=vs.85%29)窗口`Win32::OLE`，则可以访问对象的[Top](http://msdn.microsoft.com/en-us/library/aa752079%28v=vs.85%29)、[Height](http://msdn.microsoft.com/en-us/library/aa752055%28v=vs.85%29)和[Width](http://msdn.microsoft.com/en-us/library/aa752083%28v=vs.85%29)属性以确定其位置和区域。另外，您可以获取它的[HWND](http://msdn.microsoft.com/en-us/library/bb268219%28v=vs.85%29)，以便您可以将其设置为前景窗口。

```
#!/usr/bin/env perl

use strict; use warnings;
use Const::Fast;
use Imager;
use Imager::Screenshot qw( screenshot );
use Win32::GuiTest qw( SetForegroundWindow );
use Win32::OLE;
$Win32::OLE::Warn = 3;

const my $TYPE => 'bmp';

const my $READYSTATE_COMPLETE => 4;

my $browser = Win32::OLE->new("InternetExplorer.Application");
$browser->Navigate('http://www.example.com/');

sleep 1 while $browser->{ReadyState} != $READYSTATE_COMPLETE;
$browser->{Visible} = 1;

my $hwnd = $browser->{HWND};
SetForegroundWindow $hwnd;
sleep 1;

my $img = screenshot(hwnd => $hwnd, decor => 1) or die Imager->errstr;

my $title = $browser->{LocationName};
$browser->Quit;

$title =~ s/[^A-Za-z0-9_-]/-/g;
$img->write(file => "$title.$TYPE", type => $TYPE) or die $img->errstr; 
```

或者，[使用 OLE 事件](http://blog.nu42.com/2012/06/using-win32ole-with-events-to-capture.html)：

```
#!/usr/bin/env perl
use strict; use warnings;
use feature 'say';
use Const::Fast;
use Imager;
use Imager::Screenshot qw( screenshot );
use Win32::GuiTest qw( SetForegroundWindow );
use Win32::OLE qw(EVENTS valof);
$Win32::OLE::Warn = 3;

const my $TYPE => 'bmp';
const my $READYSTATE_COMPLETE => 4;

my ($URL) = @ARGV;
die "Need URL\n" unless defined $URL;

my $browser = Win32::OLE->new(
    "InternetExplorer.Application", sub { $_[0]->Quit }
);
Win32::OLE->WithEvents($browser, \&Event, 'DWebBrowserEvents2');

$browser->{Visible} = 1;
$browser->Navigate2($URL);

Win32::OLE->MessageLoop;
Win32::OLE->SpinMessageLoop;

$browser->Quit;
sleep 3;

sub Event {
    my ($browser, $event, @argv) = @_;
    say $event;

    if ($event eq 'DocumentComplete') {
        $browser->{ReadyState} == $READYSTATE_COMPLETE
            or return;

        my $hwnd = $browser->{HWND};
        SetForegroundWindow $hwnd;

        my $img = screenshot(hwnd => $hwnd, decor => 1)
            or die Imager->errstr;

        my $url = valof( $argv[1] );
        $url =~ s{^https?://}{};
        $url =~ s{[^A-Za-z0-9_-]}{-}g;

        $img->write(file => "$url.$TYPE", type => $TYPE)
            or die $img->errstr;

        Win32::OLE->QuitMessageLoop;
    }
    return;
} 
```

# c# - c#获取windows服务安装位置

> ID：11219758
> 
> 赞同：0
> 
> 时间：2012-06-27T05:09:54.040
> 
> 标签：c#, windows, service

我正在开发一个 Windows 服务，它可以获取它正在运行的系统上所有 Windows 服务的安装位置。我试图从注册表中获取位置，但那里的名称与 C# 对象返回的名称不一致。有什么指导方针吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:08:06.487

我倾向于使用 ServiceController 来查找每个已安装的服务，然后在 Registry 中查找路径。

```
foreach (ServiceController c in ServiceController.GetServices())
{
     Console.WriteLine(c.DisplayName + " " + c.ServiceName);
} 
```

实际上，现在我用谷歌搜索它，我发现[这个](http://www.codeproject.com/Articles/26533/A-ServiceController-Class-that-Contains-the-Path-t)解决方案做的事情非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T05:34:49.157

如果您只需要查找所有 Windows 服务的信息，请不要开发 Windows 服务。只需制作一个使用 WMI（Windows Management Instrumentation）的简单软件。链接[WMI 和服务](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394602%28v=vs.85%29.aspx)为您提供了一个想法。该示例是用 VB 脚本编写的，但您可以在 .NET 中执行类似的操作。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-27T05:18:27.630

首先你的想法是错误的。这将导致不同操作系统中的访问问题。您必须安装在程序文件中并将其注册为服务。

**PS 大多数 Windows 服务从 System32 文件夹运行**

# php - 将 $_POST 变量分配为函数中的参数默认值的解决方法

> ID：11219765
> 
> 赞同：0
> 
> 时间：2012-06-27T05:10:35.317
> 
> 标签：php

我正在开发一个可通过 Web 访问的 API，并且一直在尝试找出将 $_POST / $_GET 变量分配为函数参数的最简洁和最有效的方法。我知道变量不能用作参数默认值，所以目标是 DRY（不要重复自己）；使 API 函数既可以在应用程序内部使用，也可以通过外部接口使用。

**背景：**

**1)**目前，API 函数被组织成具有公共静态方法的类。当发出远程请求时，请求的类和方法（安全地）确定，如果类+方法组合有效，则使用`call_user_func("$class::$method")`.

**2）**最终调用的代码`class::method()`是故意愚蠢的——*它不知道也不关心函数的参数*。由于无法在缺少参数的情况下调用函数，因此 API 中的所有函数必须要么没有参数，要么没有参数而没有默认值。我认为在这里要做的最干净的事情是使用默认值定义所需的参数，`null`并让函数在内部处理 $_POST 变量的分配：

```
public static function complete($id = null, $offset = 0, $limit = 50){ ... } 
```

**3)**在内部，API 方法返回常规 PHP 变量，然后外部接口用`json_encode()`.

**我现在拥有的东西：**

起初我尝试了一些怪物，每个函数需要 10 或更多额外的行，但我已将其缩减为可重用的函数。我看了看，[`extract()`](http://php.net/manual/en/function.extract.php)但它对我的目的来说不够精确或安全。

```
function assign($postIndex, &$target, $require = true){
    // Any code assigned parameter overrides remote values
    if($target != null && $require == true)
        return;

    // Force parameter requirement if specified
    if($require && !isset($_POST[$postIndex]))
        throw new MissingParameterException();

    // Assign to referenced variable if it's set
    if(isset($_POST[$postIndex]))
        $target = $_POST[$postIndex];
} 
```

**像这样使用：**

```
public static function delete($id = null){
    assign('id', $id);

    ...

} 
```

请注意，**我知道潜在的注入漏洞**；无论来源如何，所有 API 函数都会清理其参数。我也知道其他使用此方法为 API 编写函数的人可能会假设参数是安全的，但是由于`assign()`必须显式调用，我认为这有点无效（如果函数被重命名则更是如此 `assign_raw_post_var_to_param()`） - 它本质上与写作`$name = $_POST['name'];`。

**问题...**

有没有更好的方法将 $_POST / $_GET 变量分配给函数参数，允许通过外部接口和代码透明地调用函数？如果是这样，您将如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:11:06.810

我认为你需要[`call_user_func_array`](http://php.net/manual/en/function.call-user-func-array.php). 使用它你可以指定一个参数数组，这样你就可以保留简单的方法签名。

如果您不知道参数的顺序并且需要确定是否运行时，您可以使用[反射](http://php.net/manual/en/class.reflectionmethod.php)来完成。

* * *

**由 OP 编辑​​：**

反射是一个很好的解决方案。例如：

```
class TestClass {
    public static function some_method($name, $email, $bannana){

    }
}

$reflection = new ReflectionMethod('TestClass', 'some_method');
$params = $reflection->getParameters(); 
```

`$params`现在看起来像这样：

```
Array
(
    [0] => ReflectionParameter Object
        (
            [name] => name
        )

    [1] => ReflectionParameter Object
        (
            [name] => email
        )

    [2] => ReflectionParameter Object
        (
            [name] => bannana
        )

) 
```

# c# - 在 EF 4.2 中批处理存储过程命令

> ID：11219766
> 
> 赞同：1
> 
> 时间：2012-06-27T05:10:45.923
> 
> 标签：c#, stored-procedures, sql-server-2012, batching, entity-framework-4.2

我调用了一个存储过程，它基本上是一个 INSERT 存储过程。它插入表 A，然后以表 A 的身份插入表 B。

现在，我需要从我的应用程序代码中调用这个存储过程 N 次。

有什么办法可以批量处理吗？目前它正在对数据库进行 N 次往返，我希望它是一次。

我能想到的唯一方法是通过用户定义的表类型通过网络传递整个项目列表。

但是这种方法的问题是我需要在存储过程中使用一个 CURSOR 来遍历每个项目以进行插入（因为标识字段）。

`DbCommand.ExecuteNonQuery()`基本上，我们可以使用 EF 4.2进行批处理吗？

或者我们可以用 Dapper 之类的东西来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:29:39.877

您可以保持这种状态，并且在存储过程中只需[`MERGE`](http://msdn.microsoft.com/en-us/library/bb522522%28v=sql.105%29.aspx)在目标表和表参数之间进行操作。因为你总是带着新记录来，所以`MERGE`只会在`INSERT`分支上输入。

在这种情况下，`MERGE`像这样使用是一种在没有游标的情况下进行批量插入的简单方法。

此外，另一种避免使用游标的方法是`INSERT from SELECT`在 SP 中使用语句。

# python - 如何在 Python 中对嵌套列表的外部和内部子列表进行排序？

> ID：11219770
> 
> 赞同：2
> 
> 时间：2012-06-27T05:11:08.763
> 
> 标签：python, list, sorting, dictionary, key

首先，如果这太天真了，请道歉（我是初学者）。我有以下类型的列表列表，我想首先按内部列表的最后一个成员按升序排序：

```
data =  [[1, .45, 0], [2, .49, 2], [3, .98, 0], [4, .82, 1], [5, .77, 1], [6, .98, 2] ] 
```

我通过使用 : 来实现这一点`sorted(data,key=operator.itemgetter(2),reverse = True)`，这给了我：

```
[[1, .45, 0], [3, .98, 0],[4, .82, 1], [5, .77, 1], [2, .49, 2], [6, .98, 2]] 
```

现在，我想在子列表中进行排序，即首先使用中间成员作为键，以降序对列表的最后一个成员为“0”进行排序。然后以“1”作为最后一个成员对子列表进行排序，依此类推。请注意，每个子列表中的元素数量不同且未知。最终列表应如下所示：

```
[[3, .98, 0],[1, .45, 0], [4, .82, 1], [5, .77, 1], [6, .98, 2],[2, .49, 2] ] 
```

该列表实际上非常庞大，因此我正在寻找一个有效的实现。任何指导将不胜感激 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T05:29:41.790

```
>>> data =  [[1, .45, 0], [2, .49, 2], [3, .98, 0], [4, .82, 1], [5, .77, 1], [6, .98, 2] ]
>>> sorted(data, key=lambda x:(x[2], -x[1]))
[[3, 0.98, 0], [1, 0.45, 0], [4, 0.82, 1], [5, 0.77, 1], [6, 0.98, 2], [2, 0.49, 2]] 
```

您可以根据需要向 lambda 添加额外的术语

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:35:49.400

您可以传递排序的多个键：

```
data =  [[1, .45, 0], [2, .49, 2], [3, .98, 0], [4, .82, 1], [5, .77, 1], [6, .98, 2] ]
sorted(data, key=lambda x: (x[2], -x[1]))

[[3, 0.98, 0],
 [1, 0.45, 0],
 [4, 0.82, 1],
 [5, 0.77, 1],
 [6, 0.98, 2],
 [2, 0.49, 2]] 
```

# c# - 布尔列的 CAML 查询不起作用

> ID：11219772
> 
> 赞同：18
> 
> 时间：2012-06-27T05:11:16.450
> 
> 标签：c#, sharepoint, caml

嗨，我有一个要查询我的桌面应用程序的 SharePoint 列表，我只想检索活动成员，但是当我查询时，我只得到了不活动的用户。我的 CAML 查询有什么问题？

```
camlQuery.ViewXml = "<<"View">><Query><Where><Eq><FieldRef Name='Active'/><Value Type='Boolean'> " + true + "</Value></Eq></Where></Query></View>""; 
```

我也尝试了以下

```
camlQuery.ViewXml = "<View><Query><Where><Eq><FieldRef Name='Active'/><Value Type='Boolean'> true</Value></Eq></Where></Query></View>"; 
```

和

```
camlQuery.ViewXml = "<Query><Where><Eq><FieldRef Name='Active'/><Value Type='Boolean'> true</Value></Eq></Where></Query>"; 
```

请帮忙，因为我是 CAML 的新手。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-27T07:59:13.383

省去一些麻烦，并使用工具来帮助构建 CAML 查询，例如[U2U 的 Caml Query Builder。](http://www.u2u.be/res/tools/camlQueryBuilder.aspx)

您需要在查询中使用 1 和 0（不是真假），所以

```
<Query><Where>
   <Eq><FieldRef Name="Active" /><Value Type="Boolean">1</Value></Eq>
</Where></Query> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-25T16:59:45.987

这对我有用

```
camlQuery.ViewXml = "<View>" + "<Query>" + "<Where>" + "<Eq>" +
"<FieldRef Name='Active'/>" + " <Value Type='Boolean'>" + "1" + "</Value>" +
"</Eq>" + "</Where>" + "</Query>" + "</View>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-10T11:34:10.490

使用值类型`Bool`，它适用于“true”、“True”或“TRUE”

# php - preg_match 正则表达式的正确/标准语法是什么

> ID：11219773
> 
> 赞同：-1
> 
> 时间：2012-06-27T05:11:22.963
> 
> 标签：php, regex, preg-match, expression, variation

我不断看到 preg_match 的分隔符的变化，包括：

*   preg_match("/[xxx]/",$foo)
*   preg_match("/^[xxx]$/",$foo)
*   preg_match("#[xxx]#e",$foo)

    等等

为什么变化以及应该使用哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T05:14:19.573

他们都是正确的。

分隔符（您所说的是打开/关闭标签）可以是任何非字母数字、非反斜杠、非空白字符。[参考](http://php.net/manual/en/regexp.reference.delimiters.php)。

# jquery - 放大/缩小文本以使用 jquery 动态填充 div？

> ID：11219774
> 
> 赞同：0
> 
> 时间：2012-06-27T05:11:25.037
> 
> 标签：jquery, css, font-size, autoresize

我看过一些类似的帖子并尝试了给出的答案，但我似乎无法让它工作（无论如何对我来说）。

基本上我正在寻找能够自动调整（放大或缩小）我的文本以适应多行设置宽度 div 的东西。其中第 1 行是最大的，第 2 行较小，第 3 行最小的文本大小，并且（希望）证明文本的合理性。如果这有任何意义吗？

任何帮助，将不胜感激！:)

编辑：我忘了提到它最多只能运行 2-3 行，设置 div 宽度为 286px。

我尝试了以下代码：

```
;(function($) {
$.fn.textfill = function(options) {
    var fontSize = options.maxFontPixels;
    var ourText = $('span:visible:first', this);
    var maxHeight = $(this).height();
    var maxWidth = $(this).width();
    var textHeight;
    var textWidth;
    do {
        ourText.css('font-size', fontSize);
        textHeight = ourText.height();
        textWidth = ourText.width();
        fontSize = fontSize - 1;
    } while ((textHeight > maxHeight || textWidth > maxWidth) && fontSize > 3);
    return this;
}
})(jQuery);
$(document).ready(function(e){
  $('.testimonial').textfill({ maxFontPixels: 36 });
}); 
```

[自动调整大小的动态文本以填充固定大小的容器](https://stackoverflow.com/questions/687998/auto-size-dynamic-text-to-fill-fixed-size-container)

```
$( '.testimonial' ).each(function ( i, box ) {
    var width = $( box ).width(),
        html = '<span style="white-space:nowrap"></span>',
        line = $( box ).wrapInner( html ).children()[ 0 ],
        n = 100;
    $( box ).css( 'font-size', n );
    while ( $( line ).width() > width ) {
        $( box ).css( 'font-size', --n );
    }
    $( box ).text( $( line ).text() );
  }); 
```

[JavaScript 缩放文本以适应固定的 div](https://stackoverflow.com/questions/4165836/javascript-scale-text-to-fit-in-fixed-div)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T05:18:47.777

您需要根据您的描述自己编写代码，这样的事情应该可以工作：

1.  获取`div`使用的大小`.innerWidth()`和`.innerHeight()`
2.  根据您自己的数学公式，您可以根据包装 div 的大小设置字体大小的容差。`$.css('font-size','12px');`使用等切换字体大小。

所以你会这样做：

```
 // get the size of the div
 var w = $('div').innerWidth();
 var h = $('div').innerHeight();

 // your own formula to your liking
 if (w >= 100) { fontsize = 11 }
 elseif (w >= 200) { fontsize = 12 }
 else { fontsize = 10 }

 //text to resize
 $('div span').css('font-size', fontsize + 'px'); 
```

或者也许有一个插件，试试谷歌。

# javascript - Web Worker 中的全局变量

> ID：11219775
> 
> 赞同：43
> 
> 时间：2012-06-27T05:11:32.943
> 
> 标签：javascript, web-worker

我正在使用这个 Web 工作者，它声明了一个全局变量。我可以在新生成的网络工作者（工作者 2）中访问相同的（工作者 1 中的全局变量）吗？

当我尝试在 Web Worker 中使用 jQuery 时，出现错误“未定义窗口”。有什么方法可以在 jQuery 中使用 jQuery`Web Worker`吗？

```
importScripts('jquery-latest.js');

函数 fetch_ajax(url) {
  $.ajax({
    类型：'GET'，
    网址：网址，
    成功：功能（响应）{
    postMessage（响应）；  

    }
  });
}

fetch_ajax('test.txt');

```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-06-28T02:17:36.613

Web Workers 没有`window`对象。

要访问全局状态，请改用`self`可在主线程和工作线程上工作的代码。

但请注意，您仍然无法访问或操作父级`DOM`（例如 get `window.jQuery`via `self.jQuery`）。

虽然主线程窗口`self`指向 Window 对象，但在工作线程中`self`指向一个单独的`WorkerGlobalScope`对象。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-03-04T01:11:24.633

基于@buley 提示，我做到了：

```
var window = self;

importScripts(/* dependencies here */);

/* my code */ 
```

就我而言，我试图使用 ES6-Promise 库：[https ://github.com/jakearchibald/es6-promise#readme](https://github.com/jakearchibald/es6-promise#readme)

# android - 如何从 MapView 中删除特定的 ItemizedOverlay？

> ID：11219777
> 
> 赞同：1
> 
> 时间：2012-06-27T05:11:39.013
> 
> 标签：android, android-mapview, itemizedoverlay

`ItemizedOverlay`我的应用程序中有 2 个实例，一个用于其他用途，`CurrentLocation`另一个用于其他用途。我已将这 2 个叠加层添加到`MapView`.

`CurrentLocation`当地图的刷新按钮被倾斜时，我想更新叠加层。如果我这样做了，则意味着它还显示了以前的当前位置，以及新的位置。如何删除之前的？

但我还需要显示另一个叠加层。

我已经子类化了`ItemizedOverlay`：

```
MyItemizedOverlay currentOverlay = new MyItemizedOverlay(pushPinDrawable);
MyItemizedOverlay anotherOverlay = new MyItemizedOverlay(drawable); 
```

刷新按钮的代码：

```
if (currentGeo != null) {
    mapView.getOverlays().remove(currentOverlay);
    mapVite();
    mapOverlays = mapView.getOverlays();
    myLocationOverlay = new OverlayItem(currentGeo, "My Location", mapTime.format(new Date(myLocationTime)));   
                                    // (currentGeo is the updated current geo point.)
    currentOverlay.addOverlay(myLocationOverlay);
    mapOverlays.add(currentOverlay);
    mapController.animateTo(currentGeo);
} else {
    Toast.makeText(this, "Your Current Location is temporarily unavailable", Toast.LENGTH_LONG).show();
} 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:23:55.247

你应该有一些这样的

```
public void onLocationChanged(Location location) {
        if (mMyOverlay == null) {
            mMyOverlay = new myOverlay(getResources().getDrawable(R.drawable.arrow), MyMap);
            MyMap.getOverlays().add(mMyOverlay);
        } else {
            MyMap.getOverlays().remove(mMyOverlay);
            MyMap.invalidate();
            mMyOverlay = new myOverlay(getResources().getDrawable(R.drawable.arrow), MyMap);
            MyMap.getOverlays().add(mMyOverlay);
        }
        if (location != null) {
            MyMap.invalidate();
            GeoPoint MyPos = new GeoPoint(microdegrees(location.getLatitude()), microdegrees(location.getLongitude()));
            MyController.animateTo(MyPos);
            mMyOverlay.addPoint(MyPos, "My position", "My position");
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:57:43.447

在添加`CurrentOverlay`mapOverlays 数组之前，你肯定可以做这样的事情，

```
if(mapOverlays.contains(itemizedOverlay))
{
   mapOverlays.remove(itemizedOverlay);
}
mapOverlays.add(itemizedOverlay); 
```

# windows-phone-7 - 如何监控我当前的位置是否接近预设位置

> ID：11219779
> 
> 赞同：1
> 
> 时间：2012-06-27T05:12:16.423
> 
> 标签：windows-phone-7

比如说，我已经在我的 WP 应用程序中设置了一个我想去的位置，例如时代广场 (LatLon:40.760586,-73.984852)。假设，我想乘出租车去时代广场并打开我的应用程序。我如何继续跟踪我当前的 GPS 越来越接近那个地方？如何确定我在范围内？以下代码适用于当前的 GPS。

```
 GeoCoordinateWatcher 跟踪器；

 void tracker_PositionChanged（对象发送者，GeoPositionChangedEventArgs e）
 {

    textLatitude.Text = e.Position.Location.Latitude.ToString("0.000");
    textLongitude.Text = e.Position.Location.Longitude.ToString("0.000");

}

```

预先感谢。感谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T07:49:57.910

GeoCoordinate 类已经有[GetDistanceTo()](http://msdn.microsoft.com/en-us/library/system.device.location.geocoordinate.aspx)方法

它可以按如下方式使用：

```
GeoCoordinate start = new GeoCoordinate(startLatitude, startLongitude);
GeoCoordinate end = new GeoCoordinate(endLatitude, endLongitude);  
double distance = start.GetDistanceTo(end); 
```

您可以将其设置为每次 GeoCoordinateWatcher 类触发“PositionChanged”事件时计算

# iphone - 标签栏图标中的 UIAlertview

> ID：11219782
> 
> 赞同：0
> 
> 时间：2012-06-27T05:12:30.883
> 
> 标签：iphone, xcode, ios5

如何使标签栏图标可点击。一旦我点击它，应该会弹出一个窗口或一个警报 ( `UIAlertView`)。

我知道如何呈现`UIAlertView`，但我想在单击标签栏图标时发出警报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T05:18:41.093

首先，您需要将您设置`UITabBarController`为它的委托并使用该方法`didSelectItem`

在`.h`添加`<UITabBarDelegate>`

在`viewDidLoad`

```
 yourTabBarController.delegate=self; 
```

然后使用委托方法：

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item
{

     if(item == yourAlertTab)

     {

        //Code to show alert.

     }
} 
```

# java - 枚举使最终变量过时了吗？

> ID：11219785
> 
> 赞同：0
> 
> 时间：2012-06-27T05:12:50.407
> 
> 标签：java, enumeration, final

我是 Java 新手，无法了解枚举是否使最终变量过时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T05:17:05.703

枚举和最终变量无关。在枚举之前，人们不得不求助于常量，但它们并不等价。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:27:52.747

我假设在这个问题中你问的是整数常量而不是任何其他类型？如果不是，请记住枚举只能是枚举（整数），不能是特定类型。

否则……再一次，它不会使它们过时。枚举在只有（少量）有限数量的永远不会改变的可能性的情况下很有用。在这些可能是无限数量的事物（或大量事物）或并非全部完全定义但有些可以定义的情况下，这不是那么有用。

这真的取决于使用情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T05:20:51.047

绝对不。Java 中的最终变量不仅仅是常量。

*   Final 可以应用于方法参数以提供编译时保证，防止重新分配。
*   Final 可以应用于局部变量，以提供编译时防止重新分配的保证。这对于实例化引用局部变量（也称为闭包）的匿名内部类也是必需的。
*   Final 可以应用于实例变量以保证这些字段的引用不变性。如果字段类型是不可变的或采取了适当的防御措施，这可以用来确保您的对象的不可变性，使其成为线程安全的。
*   Final 可以应用于方法以防止子类覆盖它们。
*   Final 可以应用于类以完全防止类的扩展。

`final`如您所见，关键字仍有很多用途。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T05:18:10.663

如果您的意思是`public static final int`用作命名常量的变量，那么是的，枚举旨在代替它们使用。

然而，final 变量在一些地区仍然有用——特别是，闭包的使用需要它们，例如

```
final int foo = 3; // must be marked final
t = new Thread(new Runnable() { 
    public static void run() { 
        System.out.println(foo + 1);
    }
});
t.start(); 
```

此外，PSF 变量仍可用作配置常量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T05:18:34.250

两者都有不同的应用。枚举更适合状态机或值不相关的地方。我有一组最终变量，它们在我的一个程序中充当值和状态指示器。final 变量仍然有重要的应用，因为它们允许在整个程序中简单地修改字面值。

/简而言之

# web - 创建简单的 Web 应用程序？

> ID：11219786
> 
> 赞同：0
> 
> 时间：2012-06-27T05:12:50.377
> 
> 标签：web

我目前正在运行一个网站，我想通过添加某种 Web 应用程序来使其更加独特。它可能就像用于执行“创建您自己的......”之类的交互层一样简单，或者它可能更复杂，例如小型游戏。

基本上，我对编码相当缺乏经验，并且需要一个带有说明的工作框架来制作像这样的基本应用程序。

如果你有这样的想法，我很想知道。否则，您也许可以将我引导到可以向我展示如何创建此类应用程序的网站。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T05:42:23.867

如果您想在不编码的情况下将一些游戏添加到您的网站，请搜索一些开源网页游戏并使用它。你需要的是一个搜索引擎，:) Stack Overflow 是一个编程问答网站。

# python - 选择主键字段 = null 的行

> ID：11219787
> 
> 赞同：0
> 
> 时间：2012-06-27T05:12:55.167
> 
> 标签：python, django

我有这个代码：

```
object_id = request.POST.get('id')
try:
    object = request.user.object_set.get(id=object_id, flag=False)
except Object.DoesNotExist:
    object = None 
```

我想如果`object_id == None`，我会一直得到`object == None`。但不是！什么时候`object_id`没有我`object`从数据库中得到一些！我使用远程调试并检查了第一次评估时`request.user.object_set.get(id=object_id, flag=False)`我得到了 Object 实例，第二次评估这段代码时我得到了 DoesNotExist 异常。

我重写了这段代码来明确检查`object_id`，然后才要求 DB 获取对象。我只是好奇-为什么会发生这种情况？一些缓存问题？还要注意 - 它在本地机器（Windows 7）上按预期工作，它不仅在服务器（CentOS）上工作，而且在相同版本的 Python/Django 上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:59:58.727

也许您的帖子数据没有按预期发送。在运行 python 代码时尝试打印 object_id 看看你得到了什么。您真的应该考虑在您的数据库配置中将所有 PK 设置为 NOT NULL。要搜索空值，None 应该这样做

尝试为您的帖子数据设置默认值

```
object_id = request.POST.get('id', None) 
```

# linux - 通过 weblogic 中的 linux 脚本更新部署

> ID：11219788
> 
> 赞同：0
> 
> 时间：2012-06-27T05:13:00.463
> 
> 标签：linux, weblogic, weblogic-10.x

在 linux 中更新部署的脚本是什么（从 GUI，我们可以通过解锁和保存更改来完成此更新）。是否有可能做到这一点 ？如果不是要重新部署的脚本是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:51:51.690

在 WebLogic 中，您可以使用 wlst 来执行管理任务，例如管理部署。如果您使用 google weblogic wlst，您将收到大量信息。wlst 在 python 语言上运行。

假设您使用的是 weblogic 10，您还可以“记录”您的操作。这会将操作保存到 python 脚本中，您可以稍后“重播”（执行）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:21:00.983

正如 Kevin 所指出的，WLST 是必经之路。您可能应该编写一个脚本（`wlDeploy.py`例如，名为 ），其内容如下（`import`为简单起见，省略了子句）：

```
current_app_name = '[your current deployed app name]'
new_app_name = '[your new app name]'
target_name = '[WL managed server name (or AdminServer)]'
connect([username],[pwd],'t3://[admin server hostname/IP address]:[PORT]')  
stopApplication(current_app_name)
undeploy(current_app_name, timeout=60000);
war_path = '[path to war file]'
deploy(appName=new_app_name, path=war_path, targets=target_name); 
```

并通过以下方式调用它：

```
./wlst.sh wlDeploy.py 
```

当然，您可以向脚本添加参数，以及与您的部署相关的许多逻辑。这完全取决于您。不过，上面的示例应该可以帮助您入门。

# sql-server - SQL Server 中的 OR 运算符短路

> ID：11219791
> 
> 赞同：21
> 
> 时间：2012-06-27T05:13:11.243
> 
> 标签：sql-server, tsql, query-optimization, short-circuiting

我想咨询 SQL Server 或短路

代码：

```
DECLARE @tempTable table
    (
        id int
    )
INSERT @tempTable(id) values(1)

DECLARE @id varchar(10)
SET @id = 'x'
SELECT * FROM @tempTable WHERE 1=1 OR id = @id --successfully
SELECT * FROM @tempTable WHERE @id = 'x' OR id = @id --Exception not Convert 'x' to int 
```

为什么？`1=1`并且`@id='x'`是`true`。

SQL Server OR 运算符：是否有短路功能？</p>

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-27T05:20:16.667

在 SQL 中，**不要求**OR 子句提前中断。换句话说，是否同时检查这两个条件取决于优化器。我不是 MSSQL 优化器方面的专家，但我见过优化器有和没有短路 OR 子句的实例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T19:35:41.613

刚刚偶然发现这个问题，并且已经找到了这个博客条目：[http ://rusanu.com/2009/09/13/on-sql-server-boolean-operator-short-circuit/](http://rusanu.com/2009/09/13/on-sql-server-boolean-operator-short-circuit/)

SQL Server 可以在任何它认为合适的地方自由优化查询，因此在博客文章中给出的示例中，您不能依赖短路。

但是，显然记录了一个 CASE 以按书面顺序评估 - 检查该博客文章的评论。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2015-06-12T08:01:09.580

很明显，MS Sql server 支持短路理论，通过避免不必要的检查来提高性能，

支持示例：

```
SELECT 'TEST'
WHERE 1 = 'A'

SELECT 'TEST'
WHERE 1 = 1 OR 1 = 'A' 
```

在这里，第一个示例将导致错误“将 varchar 值 'A' 转换为数据类型 int 时转换失败。”

虽然第二个条件很容易运行，因为条件 1 = 1 评估为 TRUE，因此第二个条件根本没有运行。

此外

```
SELECT 'TEST'
WHERE 1 = 0 OR 1 = 'A' 
```

在这里，第一个条件将评估为 false，因此 DBMS 将适用于第二个条件，并且您将再次得到转换错误，如上例所示。

注意：我写了错误的条件只是为了意识到天气条件被执行或短路，如果查询结果错误意味着条件被执行，否则短路。

简单说明

考虑，

```
WHERE 1 = 1 OR 2 = 2 
```

由于第一个条件被评估为**TRUE**，因此评估第二个条件毫无意义，因为它的任何值的评估都不会影响结果，因此 Sql Server 通过跳过不必要的条件检查或评估来节省查询执行时间的好机会.

在**“OR”**的情况下，如果第一个条件被评估为**TRUE ，则由****“OR”**连接的整个链将被视为评估为 true，而不评估其他条件。

```
condition1 OR condition2 OR ..... OR conditionN 
```

如果 condition1 被评估为 true，则将所有条件休息，直到 conditionN 被跳过。概括地说，在确定第一个**TRUE**时，将跳过由 OR 链接的所有其他条件。

考虑第二个条件

```
WHERE 1 = 0 AND 1 = 1 
```

由于第一个条件被评估为**FALSE**，因此评估第二个条件毫无意义，因为它的任何值的评估都不会影响结果，因此 Sql Server 再次通过跳过不必要的条件检查或评估来节省查询执行时间的好机会.

在**“AND”**的情况下，如果第一个条件被评估为**FALSE ，则与****“AND”**连接的整个链将被视为评估为 FALSE，而不评估其他条件。

```
condition1 AND condition2 AND ..... conditionN 
```

如果 condition1 被评估为**FALSE**，则其余所有条件直到**conditionN**被跳过。概括地说，在确定第一个**FALSE**时，将跳过由**AND**链接的所有其他条件。

因此，明智的程序员应该始终以这样一种方式对条件链进行编程，以便首先评估成本较低或最能消除的条件，或者以能够最大限度地利用短路的方式安排条件

**谢谢并恭祝安康，**

**Rk_Hirpara**

# php - 在已经托管 asp.net 网站的 windows server 2003 中安装 wordpress

> ID：11219798
> 
> 赞同：0
> 
> 时间：2012-06-27T05:13:33.230
> 
> 标签：php, asp.net, wordpress

我有一个已经托管 ASP.Net 网站的服务器。我正在从博客迁移到 WordPress。所以我需要在我们的服务器上安装 WordPress。我们可以在 Windows 服务器上托管 WordPress 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T22:21:37.747

是的，如果服务器上安装了 php，您可以在 Windows 服务器上安装 Wordpress（或任何其他 php 应用程序）。谷歌上有很多关于如何在 IIS（Windows Web 服务器）上安装和设置 PHP 的教程，但微软实际上从他们的网站上提供了一个简单的 PHP 安装：[从 Windows Web App Gallery 在 IIS 上安装 PHP](http://www.microsoft.com/web/gallery/install.aspx?appid=PHP53)

Wordpress 还需要 MySQL 才能工作，因此也必须在服务器上安装它。

我猜你主要关心的是你是否可以访问服务器来安装 PHP 和 MySQL：

*   如果此服务器由托管服务提供，它可能不支持 PHP，在这种情况下您无能为力。您需要与提供商核实他们是否支持它，以及他们是否可以安装它。
*   如果您可以完全访问服务器，您只需要安装 PHP 和 MySQL（可能需要一些配置 - 谷歌上有很多教程可以帮助您）；然后像在任何其他类型的服务器上一样正常安装 Wordpress。

PS：*如果你自己安装 PHP，你应该确保检查你运行的是哪个版本的 IIS（Windows 2003 上的 IIS6？Windows 2008 上的 IIS7+？）。正如 Marty 在他的评论中链接的文章中所指出的，IIS6 需要一些额外的配置才能使一切正常工作。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T01:25:01.750

当我第一次开始使用 Wordpress 时，我使用的是 Windows Server（授予它是由服务提供商共享的空间），但运行状况不佳。我切换到一个 Linux 主机帐户，它运行得更好。根据我的经验，只是我的两分钱。

# java - 如何在 Hibernate 中更新集合？

> ID：11219799
> 
> 赞同：2
> 
> 时间：2012-06-27T05:13:34.737
> 
> 标签：java, hibernate, persistence

我有一个名为“Document”的对象，它与“DocumentPersonCc”具有一对多的关系。我试图在我的代码中更改这些集合中的一个或多个，但 Hibernate 并没有在我期望的时候调用更新查询。当我更改其中一个常规字段（如文档主题）时，它确实会调用更新查询，但即便如此，它也不会保留数据库中的任何一对多更改。为了让它工作，我需要改变什么？

DocumentPersonCc 的获取器和设置器：

```
@OneToMany(fetch = FetchType.LAZY, mappedBy = "document")
@LazyCollection(LazyCollectionOption.EXTRA)
@Sort(type = SortType.NATURAL, comparator = DocumentPersonCc.class)
public SortedSet<DocumentPersonCc> getDocumentPersonCcs() {
    return this.documentPersonCcs;
}

public void setDocumentPersonCcs(
        SortedSet<DocumentPersonCc> documentPersonCcs) {
    this.documentPersonCcs = documentPersonCcs;
} 
```

更新代码：

```
public Document updateCcs(Document document) {
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    Document oldD = (Document) session.load(Document.class, document.getId());
    Hibernate.initialize(oldD.getDocumentPersonCcs());
    oldD.setDocumentPersonCcs(document.getDocumentPersonCcs());
    session.update(oldD);
    session.getTransaction().commit();
    document = this.returnDocument(document.getId());
    Hibernate.initialize(document.getDocumentPersonCcs());
    return document;
} 
```

DocumentPersonCc 的文档获取器和设置器：

```
@ManyToOne(fetch = FetchType.EAGER)
@JoinColumn(name = "DocumentsId", nullable = false, insertable = false, updatable = false)
protected Document getDocument() {
    return this.document;
}

public void setDocument(Document document) {
    this.document = document;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T05:33:23.700

尝试这个 -

```
@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "document")
@LazyCollection(LazyCollectionOption.EXTRA)
@Sort(type = SortType.NATURAL, comparator = DocumentPersonCc.class)
public SortedSet<DocumentPersonCc> getDocumentPersonCcs() {
    return this.documentPersonCcs;
} 
```

使用级联更新子映射

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:24:50.707

在 Document 实体类中使用级联。`

```
@OneToMany(fetch = FetchType.LAZY, mappedBy = "document")
@LazyCollection(LazyCollectionOption.EXTRA)
@Sort(type = SortType.NATURAL, comparator = DocumentPersonCc.class)
@Cascade({CascadeType.SAVE_UPDATE}) 
public SortedSet<DocumentPersonCc> getDocumentPersonCcs() {
    return this.documentPersonCcs;
} 
```

` 然后当你保存或更新集合时保存或更新文档实体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T05:48:30.810

在您的 Document.java 中添加一种方法为

```
 public void addDocumentPersonCc(DocumentPersonCc documentPersonCc) {
    documentPersonCc.setDocument(this);
    documentPersonCcs.add(documentPersonCc);
 } 
```

现在将您的 updateCcs 方法更改为

```
public Document updateCcs(Document document) {
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    Document oldD = (Document) session.load(Document.class, document.getId());
    Hibernate.initialize(oldD.getDocumentPersonCcs());
    SortedSet<DocumentPersonCc> documentPersonCcsList = document.getDocumentPersonCcs();
    //Iterate this documentPersonCcsList

    {
        // add oldD.addDocumentPersonCc(Value from Iterator);
    }    
    session.update(oldD);
    session.getTransaction().commit();
    document = this.returnDocument(document.getId());
    Hibernate.initialize(document.getDocumentPersonCcs());
    return document;
} 
```

# events - 如何在 vb6 中实现事件？

> ID：11219800
> 
> 赞同：3
> 
> 时间：2012-06-27T05:13:35.660
> 
> 标签：events, vb6

我已经定义了一个按钮，一个事件在按钮单击中引发了事件，所以我的问题是如何实现该事件

```
Public Event ClickEvent()

Private Sub Command1_Click()
    RaiseEvent ClickEvent
End Sub 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T08:05:27.903

假设您发布的代码位于名为 Form1 的表单中。

创建一个新窗体 (Form2)。将此代码添加到 Form2：

```
'declare an object and tell vb you want to subscribe to the objects events
Private WithEvents Foo As Form1

Private Sub Form_Load()
    'initialise the object
    Set Foo = New Form1
    'show the Form1 object which has the button on so we have something to click
    Foo.Show
End Sub

'when the button is clicked this event is raised
Private Sub Foo_ClickEvent()
    MsgBox "Click Event"
End Sub 
```

# android - android ksoap 调用 xmlpullparser 异常

> ID：11219815
> 
> 赞同：5
> 
> 时间：2012-06-27T05:15:51.413
> 
> 标签：android, exception, ksoap2, xmlpullparser

我使用***ksoap2***来调用我的 SOAP 服务。它在**android2.2**中运行良好，但是当相同的代码在**android2.3.3**之后运行时，它会在以下行中引发异常。

```
http_transport_se.call(SOAP_ACTION, envelope); 
```

抛出的异常，如下。

```
org.xmlpull.v1.XmlPullParserException: unexpected type (position:TEXT �������������[ێG...@1:255 in java.io.InputStreamReader@4057acc8) 
```

请注意，调用此方法不需要任何参数。请帮忙。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:11:04.727

我无法解决这个问题，ksoap2 API 在多个平台上运行时出现问题。所以我在不使用任何 API 的情况下实现了 SOAP 服务并使用了 Native。

这个[链接](http://mobileorchard.com/android-app-development-calling-web-services/)帮助我调用了我的网络服务。[在这里](http://www.validwsdl.com/)您可以找到您的 SOAP 请求/响应的外观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:10:23.930

尝试使用其他版本的库。将版本从 2.6.5 切换到 2.6.4 为我解决了这个问题。

# asp.net-mvc-3 - MVC3 - 异步分页

> ID：11219817
> 
> 赞同：1
> 
> 时间：2012-06-27T05:15:59.307
> 
> 标签：asp.net-mvc-3, asynchronous, pagination

我有一个在我的主页 > index.cshtml 中使用分页的对象列表。当用户单击对象的每个页面时，我只想刷新页面的该部分，而不是其他任何内容。我将如何做到这一点？

理想情况下，我想使用异步方法和 ControllerActions ......

控制器 > HomeController.cs

```
public ViewResult Index(int page = 1) {
ProductsListViewModel viewModel = new ProductsListViewModel {
Products = repository.Products
.OrderBy(p => p.ProductID)
.Skip((page - 1) * PageSize)
.Take(PageSize),
PagingInfo = new PagingInfo {
CurrentPage = page,
ItemsPerPage = PageSize,
TotalItems = repository.Products.Count()
}
};
return View(viewModel);
} 
```

首页 > 索引.cshtml：

```
@model SportsStore.WebUI.Models.ProductsListViewModel
@{
ViewBag.Title = "Products";
}
@foreach (var p in Model.Products) {
<div class="item">
<h3>@p.Name</h3>
@p.Description
<h4>@p.Price.ToString("c")</h4>
</div>
}
<div class="pager">
@Html.PageLinks(Model.PagingInfo, x => Url.Action("List", new {page = x}))
</div> 
```

HtmlHelper > PagingHelper.cs

```
namespace SportsStore.WebUI.HtmlHelpers {
public static class PagingHelpers {
public static MvcHtmlString PageLinks(this HtmlHelper html,
PagingInfo pagingInfo,
Func<int, string> pageUrl) {
StringBuilder result = new StringBuilder();
for (int i = 1; i <= pagingInfo.TotalPages; i++) {
TagBuilder tag = new TagBuilder("a"); // Construct an <a> tag
tag.MergeAttribute("href", pageUrl(i));
tag.InnerHtml = i.ToString();
if (i == pagingInfo.CurrentPage)
tag.AddCssClass("selected");
result.Append(tag.ToString());
}
return MvcHtmlString.Create(result.ToString());
}
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T06:20:35.627

你可以使用 AJAX。第一步是将要刷新的内容放入一个partial并放入它自己的div中：

```
@model SportsStore.WebUI.Models.ProductsListViewModel
@{
    ViewBag.Title = "Products";
}

<div id="products">
    @Html.Partial("_products", Model.Products)
</div>

<div class="pager">
    @Html.PageLinks(Model.PagingInfo, x => Url.Action("Index", new { page = x }))
</div> 
```

然后当然你会有相应的`_Products.cshtml`部分：

```
@model IEnumerable<SportsStore.WebUI.Models.ProductViewModel>
@foreach (var p in Model.Products) {
    <div class="item">
        <h3>@p.Name</h3>
        @p.Description
        <h4>@p.Price.ToString("c")</h4>
    </div>
} 
```

然后调整您的控制器操作，使其能够响应 AJAX 请求：

```
public ActionResult Index(int page = 1) 
{
    var viewModel = new ProductsListViewModel 
    {
        Products = repository.Products
            .OrderBy(p => p.ProductID)
            .Skip((page - 1) * PageSize)
            .Take(PageSize),
        PagingInfo = new PagingInfo 
        {
            CurrentPage = page,
            ItemsPerPage = PageSize,
            TotalItems = repository.Products.Count()
        }
    };
    if (Request.IsAjaxRequest())
    {
        return PartialView("_Products", viewModel);
    }

    return View(viewModel);
} 
```

现在剩下的就是 AJAXify 你的分页锚。可以在一个单独的 javascript 文件中完成，您可以在其中使用 jQuery 订阅`.click()`它们的事件并用 AJAX 请求替换默认操作：

```
$(function() {
     $('.pager a').click(function() {
         $.ajax({
             url: this.href,
             type: 'GET',
             cache: false,
             success: function(products) {
                 $('#products').html(products);
             }
         });

         // prevent the default redirect
         return false;
     });
}); 
```

# objective-c - 关于在 UIScrollView 内滚动

> ID：11219824
> 
> 赞同：1
> 
> 时间：2012-06-27T05:16:58.073
> 
> 标签：objective-c, ios, uiscrollview, uitextview

我有一个包含一些内容的滚动视图。加载内容后，我使用以下代码移动到滚动视图的顶部

```
 [scrollViewCustom setContentOffset:CGPointMake(0.0, 0.0) animated:NO]; 
```

有用。除了一个例外：

我有一个`UITextView`. 如果我向其中添加一些文本，则滚动视图永远不会使用此代码返回顶部。我必须手动滚动到顶部。

在将文本添加到`UITextView`.

任何人都可以帮忙吗？谢谢。

注意：所以，这是解决方案：

基本上`UITextView`来源于`UIScrollView`并且因此，只要那里有一些文本，它就会尝试滚动以使文本可见。我已经更换`UITextView`了`UILabel`它，它就像一个魅力！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:28:45.167

```
 - (void)viewDidLoad{
 scroll.contentSize=CGSizeMake(320, 400);
 }

 - (void)scrollViewToCenterOfScreen:(UIView *)theView {  
CGFloat viewCenterY = theView.center.y;  
CGRect applicationFrame = [[UIScreen mainScreen] applicationFrame]; 
CGFloat availableHeight;

    availableHeight = applicationFrame.size.height - 300; 

CGFloat z = viewCenterY - availableHeight / 2.0;  
if (z < 0) {  
    z = 0;  
 }  
 [scroll setContentOffset:CGPointMake(0, z) animated:YES];  
}

-(void)textViewDidBeginEditing:(UITextView *)textView{
[self scrollViewToCenterOfScreen:scroll];

}

 - (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range  replacementText:(NSString *)text
 {
if (range.length==0) {
    [scroll setContentOffset:CGPointMake(0, 0) animated:YES];  
        return NO;
  }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T05:19:22.667

代替

```
 [scrollViewCustom setContentOffset:CGPointMake(0.0, 0.0) animated:NO]; 
```

利用

```
[scroll scrollRectToVisible:CGRectMake(0,0, 100,100) animated:NO]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T05:32:52.093

只需两步：

```
// define the area that is initially visible
 scrollViewCustom.frame = CGRectMake(0, 5, 354, 500);

// then define how much a user can scroll it
[scrollViewCustom setContentSize:CGSizeMake(354, 960)];

In addition,clear the background color of scroll view to show the text. 
scrollViewCustom.backgroundColor = [UIColor clearColor]; 
```

# javascript - 用 Javascript 卡住 alt / 修饰键

> ID：11219831
> 
> 赞同：0
> 
> 时间：2012-06-27T05:17:41.453
> 
> 标签：javascript, dom-events, keyboard-shortcuts

我有一个动态创建编辑器的库（[http://epiceditor.com](http://epiceditor.com)），还自动设置快捷键。快捷方式可以在选项中配置，所以我不能使用`e.altKey`,`e.ctrlKey`等，只是提醒一下。

出于某种原因，修饰键`false` **有时**不会在 Mac/Ubuntu 浏览器上重新设置。

在 Windows 上，它似乎每次都会发生。您可以通过单击 JSBin 中的渲染然后按`alt`+来重现这一点`p`。您应该会看到“Yay”出现。现在，如果在 Windows 上再按**一次** `p`。您会看到“Yay 再次出现。Mac 和 Ubuntu 用户偶尔会看到同样的问题，但很难重现它。

另请注意，这只发生在`alt`它看起来的密钥上。下面我在 18 (alt) 旁边有 16 (shift)。如果您将它们换掉，它将按预期工作。

精简测试用例的代码是：

```
var modKey = false;
var modKeyCode = 18; //16
document.body.addEventListener('keydown', function (e) {
  if (!modKey && modKeyCode == e.keyCode) {
    modKey = true;
  }

  if (modKey && e.keyCode == 80) {
    console.log('Yay!');
  }
});

document.body.addEventListener('keyup', function (e) {
  if (modKey && modKeyCode == e.keyCode) {
    modKey = false;
  }
}); 
```

演示：http: [//jsbin.com/uhupah/3/edit#javascript,html](http://jsbin.com/uhupah/3/edit#javascript,html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:07:10.200

我目前无法访问我的 Linux 机器，所以我无法测试您的代码。

因此，这里更多的是一个建议：

Linux（根据我的经验）在 keyCodes 和关键事件的顺序方面很挑剔。也许将 keyup 中的 if(..) 与 keydown 结合起来

```
if (!modKey && modKeyCode == e.keyCode) {
  modKey = true;
} else if (modKey && modKeyCode == e.keyCode) {
  modKey = false;
} 
```

上述建议是在假设您没有特定要求同时具有“keydown”和“keyup”的情况下提出的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:51:23.243

我想出了一个修复方法，虽然是一种糟糕的修复方法，但仍然是一个修复方法。

我采用的修复方法是在任何组合键成功时重置修饰符 var。即一个`p`in`alt+p`被按下重置`modKey`为 false 像这样：

```
var modKey = false;
var modKeyCode = 18; //16
document.body.addEventListener('keydown', function (e) {
  if (!modKey && modKeyCode == e.keyCode) {
    modKey = true;
  }

  if (modKey && e.keyCode == 80) {
    console.log('Yay!');
    modKey = false; //THIS
  }
});

document.body.addEventListener('keyup', function (e) {
  if (modKey && modKeyCode == e.keyCode) {
    modKey = false;
  }
}); 
```

这个问题是你不能做背靠背的关键命令。大多数情况下这没问题，因为用户会执行“保存”或“预览”之类的键盘命令，再输入一些命令，然后再执行另一个键盘命令。但是你不能，比方说：在不放开钥匙的情况下`alt+p s`触发。`alt+p``alt+s``alt`

# embedded-linux - 仅在网络准备好后，在重新启动时运行 ntpdate 的最佳方法是什么

> ID：11219832
> 
> 赞同：3
> 
> 时间：2012-06-27T05:17:52.317
> 
> 标签：embedded-linux, clock, beagleboard, ntp

我使用的是 BeagleBone，由于它没有内置 RTC 和备用电池，因此每次重新启动时都会丢失日期。我可以使用以下命令轻松设置日期：

**/usr/bin/ntpdate -b -s -u pool.ntp.org**

但是，例如，如果房子断电又重新通电，那么时间就浪费了。最新的 beaglebone Angstrom linux 发行版附带的解决方案是在其中放置一条 crontab 行，每半小时更新一次时间。但我宁愿在开机时只运行一次命令。

我尝试将上面列出的这个命令与**@reboot**行一起放在crontab 中，但我相信在配置网络之前运行，或者其他失败，因为当我拉电源5 分钟并放上它时，它没有给我正确的时间回到比格骨。

是否有某种方法可以使用 ifconfig 或类似的方法仅在网络可用后从 init.d 运行脚本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T19:57:49.883

```
opkg install ntp-systemd
systemctl enable ntpdate.service
systemctl enable ntpd.service 
```

编辑 /etc/ntp.conf 并注释以下行（不回退不存在的硬件时钟，因为 ntpdate 服务使用“ntpd -q”命令）

```
#server 127.127.1.0
#fudge 127.127.1.0 stratum 14 
```

* * *

安装了两个服务：

/lib/systemd/system/ntpd.service：

```
[Unit]
Description=Network Time Service
After=network.target

[Service]
Type=forking
PIDFile=/run/ntpd.pid
ExecStart=/usr/bin/ntpd -p /run/ntpd.pid 
```

/lib/systemd/system/ntpdate.service：

```
[Unit]
Description=Network Time Service (one-shot ntpdate mode)
Before=ntpd.service

[Service]
Type=oneshot
ExecStart=/usr/bin/ntpd -q -g -x
RemainAfterExit=yes 
```

ntpd 在网络启动后启动（After=network.target），因此日期应该不断同步。但是在 ntpd 手册页中有解释：

> 当今的大多数操作系统和硬件都包含一个时间 (TOY) 芯片，以在电源关闭期间保持时间。当机器启动时，该芯片用于初始化操作系统时间。机器与 NTP 服务器同步后，操作系统会不时更正芯片。如果没有 TOY 芯片或者由于某种原因它的时间距离服务器时间超过 1000 秒，ntpd 会假设某些事情一定是非常错误的，唯一可靠的行动是操作员进行干预并手动设置时钟。这会导致 ntpd 退出并在系统日志中显示恐慌消息。-g 选项会覆盖此检查，并且无论芯片时间如何，时钟都将设置为服务器时间。但是，为了防止硬件损坏，

所以我们需要在启动 ntpd 之前设置日期，这是由 ntpdate 服务通过在启动 ntpd.service 之前执行“ntpd -q -g -x”来完成的。

从 ntpd 手册页：

> -q 在第一次设置时钟后退出 ntpd。这种行为模仿了 ntpdate 程序的行为，该程序将被淘汰。-g 和 -x 选项可与此选项一起使用。注意：使用此选项禁用内核时间规则。

* * *

Beaglebone 上安装的另一个服务与日期/时间交互

时间戳服务

```
[Unit]
Description=Timestamping service
ConditionPathExists=/etc/timestamp
After=remount-rootfs.service

[Service]
RemainAfterExit=yes
ExecStart=/usr/bin/load-timestamp.sh
ExecStop=/usr/bin/load-timestamp.sh --save 
```

此服务在停止时将当前时间戳存储在 /etc/timestamp 中，并在启动时从该时间戳设置日期。因此，如果未安装 ntpd，手动设置日期并重新启动 beaglebone，则日期仅落后于启动持续时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:17:43.963

您的目标系统上有 /etc/network/if-post-up.d/ 目录吗？如果是这样，则应在网络启动时运行该目录中的脚本。如果没有，您是否使用 DHCP？您的 DHCP 客户端可能支持运行脚本。

# javascript - Paul Irish的代码 - 好还是坏的做法？

> ID：11219837
> 
> 赞同：2
> 
> 时间：2012-06-27T05:18:25.827
> 
> 标签：javascript, coding-style

我正在检查网站[http://mothereffehsl.com/](http://mothereffinghsl.com/)的视图源。它由[Paul Irish编码](http://paulirish.com/)

在代码中，html 元素的 id 没有包含在少数元素的引号中。对于其他元素，id 用引号括起来。这是一个好习惯吗。是错误还是故意省略？我不认为像保罗这样的人忽略了它。

```
<div id="main" role="main">
<h1>Mother-effing <span>hsl()</span></h1>
<canvas width=360 height=100><a href="http://noyoueatabagofdicks.com/">your browser doesnt support canvas.</a></canvas>
<span id=loading>one sec, bro.</span>
<label id=sat>Saturation</label> 
```

你怎么认为？

**接受答案后编辑**

结论：

在 html5 中，引号不是必需的，但出于评论中提到的原因推荐。

此外，即使支持某些属性而不是其他属性，使用引号也不是一个好习惯。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T06:02:18.777

来自文章[为什么属性值应该始终在 HTML 中引用](http://www.cs.tut.fi/~jkorpela/qattr.html)

始终在属性值周围使用引号有几个原因：

*   这更容易，因为您不需要记住和回忆允许遗漏的规则。
*   在 XML 中，总是需要引号（因为 XML 有 SHORTTAG NO；请参阅 SGML 和 XML 的比较）。您将来可能会使用 XML，在这种情况下，如果您养成引用属性值的习惯，您的生活会更简单。
*   当某人（您或其他人）稍后编辑您的 HTML 文件时，如果他以强制引号的方式编辑属性值，他可能很容易忘记添加引号。例如，像 SRC=foo.gif 这样的属性是合法的，但如果有人将属性（例如，由于将文件移动到另一个目录）更改为 SRC=images/foo.gif，它就会变得非法。

所以，我想说省略引号不是最好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:25:24.740

他正在使用 HTML5。属性引号在 HTML5（和 HTML 4，只是在 XHTML 中不是）中是可选的。请参阅[您引用 HTML5 属性吗？](https://stackoverflow.com/questions/6495310/do-you-quote-html5-attributes)和[http://mathiasbynens.be/notes/unquoted-attribute-values](http://mathiasbynens.be/notes/unquoted-attribute-values)（第二个链接引用 Paul Irish BTW！）

# sql-server-2005 - 如何在 SQL Server 2005 中将 dateformat 设置为 mdy？

> ID：11219841
> 
> 赞同：0
> 
> 时间：2012-06-27T05:18:37.617
> 
> 标签：sql-server-2005, date-format

我使用的是 SQL Server 2005。当我执行`SET DATEFORMAT mdy`时，它只是该特定会话的日期格式。当我从 Management Studio 断开连接并重新连接时，它不会采用这种格式。

但我想永久设置它。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:42:28.920

我不认为你可以。每个 msdn：

> 此设置仅在字符串转换为日期值时用于解释字符串。它不影响日期值的显示。
> 
> SET DATEFORMAT 的设置是在执行或运行时设置的，而不是在解析时设置的。

永久更改它的唯一方法是更改​​ sys.syslanguages 表，并且您不能像那样更改系统表。最好的办法是创建一个自定义日期解析函数来设置日期格式并返回适当的字符串值，但您仍然需要为每个日期调用该函数。将默认语言设置为“英式英语”而不是“英语”会有所帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-08T09:14:37.620

如果要在实例级别设置语言，则必须使用`sp_configure`. 请记住，它只会影响所有未来的登录。但是，如果存在现有登录名，则必须执行`ALTER LOGIN ... Default_Language`. [有关更改登录的更多信息](https://docs.microsoft.com/en-us/sql/t-sql/statements/alter-login-transact-sql?view=sql-server-ver15)

在您的情况下，它将如下所示。有关详细信息：[在服务器级别配置默认语言](https://docs.microsoft.com/en-us/sql/database-engine/configure-windows/configure-the-default-language-server-configuration-option?view=sql-server-ver15)

```
USE Database_Name
GO
EXEC sp_configure 'default language', 0 ;  -- English_US
GO  
RECONFIGURE ;  
GO 
```

您可以从 sys.syslanguages 表中读取语言 ID 并进行相应设置。[有关系统语言的更多信息](https://docs.microsoft.com/en-us/sql/relational-databases/system-compatibility-views/sys-syslanguages-transact-sql?view=sql-server-ver15)

**注意：**您需要提升权限才能获得[更多关于安全性的权限，才能在服务器级别更改默认语言](https://docs.microsoft.com/en-us/sql/database-engine/configure-windows/configure-the-default-language-server-configuration-option?view=sql-server-ver15)

> 默认情况下，将不带参数或只带第一个参数的 sp_configure 执行权限授予所有用户。要使用两个参数执行 sp_configure 以更改配置选项或运行 RECONFIGURE 语句，用户必须被授予 ALTER SETTINGS 服务器级权限。ALTER SETTINGS 权限由 sysadmin 和 serveradmin 固定服务器角色隐式持有。

# java - 为什么要删除 Map 的元素？

> ID：11219845
> 
> 赞同：0
> 
> 时间：2012-06-27T05:18:45.063
> 
> 标签：java

我正在过滤在一个列表中具有相同纬度、经度的所有列表并放入同一个列表中并将该列表放入地图我的代码如下：-

```
private Collection<List<Applicationdataset>> groupTheList(ArrayList<Applicationdataset> arrayList)
  {
    Map<Key, List<Applicationdataset>> map = new HashMap<Key, List<Applicationdataset>>();
    for(Applicationdataset appSet: arrayList)
       {
        Key key = new Key(appSet.getLatitude(), appSet.getLongitude());
        List<Applicationdataset> list = map.get(key);
        if(list == null){
            list = new ArrayList<Applicationdataset>();

        }
        list.add(appSet);
             map.put(key, list);
    }
    return map.values();
}

public class Key {
    String _lat;
    String _lon;

    Key(String lat, String lon) {
        _lat = lat;
        _lon = lon;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        Key key = (Key) o;

        if (!_lat.equals(key._lat)) return false;
        if (!_lon.equals(key._lon)) return false;

        return true;
    }

    @Override
    public int hashCode() {
        int result = _lat.hashCode();
        result = 31 * result + _lon.hashCode();
        return result;
    }
} 
```

但是当我根据来自 web 服务的 xml 调试我的代码时，有 2 个具有相同纬度的列表，并且它们在调试时保存在 amp 中的相同列表中，但是当我进行下一步调试时 map 的元素其中有 2 个项目列表减少并显示大小 1 我无法纠正这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:11:22.073

您的代码看起来不错：您已被覆盖`equals()`且`hashCode()`始终如一。

检查 lat/lng 值中的空格是否是导致问题的原因，可能`trim()`在构造函数中：

```
Key(String lat, String lon) {
    _lat = lat.trim();
    _lon = lon.trim();
} 
```

此外，您可以将代码简化为：

```
@Override
public boolean equals(Object o) {
    return o instanceof Key
        && _lat.equals(((Key)o)._lat))
        && _lon.equals(((Key)o)._lon));
}

@Override
public int hashCode() {
    // String.hashCode() is sufficiently good for this addition to be acceptable
    return _lat.hashCode() + _lon.hashCode();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T05:39:21.857

这有点难以理解你想要完成的事情。但我认为问题在于您在 Key hashCode()/equals() 实现中同时使用纬度和经度，这就是为什么输入列表中的第二个 Applicationdataset 替换了地图对象中的第一个。您应该执行相关列表已经放入地图并且不要替换它的情况。

# programming-languages - 声明式编程最能解决哪些具体问题？

> ID：11219849
> 
> 赞同：0
> 
> 时间：2012-06-27T05:18:59.070
> 
> 标签：programming-languages, declarative, paradigms

我了解声明性语言必须提供的内容，但我还没有将这些点联系起来，说明我为什么要使用它们。例如，我不明白为什么描述一个问题比用命令式语言编写一个已经理解的问题的解决方案更有益（副作用不可承受）。

这**不是**讨论什么是声明性语言的良好应用程序。我只想了解会让程序员说“我们真的应该为此使用声明性语言”的情况和任何**常见的特定项目要求。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:34:07.393

根据经验，我认为当存在多种策略来实现一个目标时，声明式编程是有意义的。声明式地编程*什么*而不是*如何*让解析器/编译器/运行时找出哪种策略是最好的——它为你优化了执行。

声明性语言和优化的两个示例：

*   正则表达式——你真的想为快速执行所需的底层 DFA、NDFA 烦恼吗？
*   SQL 查询——DBMS 具有统计信息和缓存，并且可以（希望）找出最佳执行计划

@verisimilitude 提供的链接值得一读。

# grails - 生成控制器和视图时出现错误：无法将 int 字段 lms.Book.bookId 设置为 java.lang.Class

> ID：11219851
> 
> 赞同：0
> 
> 时间：2012-06-27T05:19:10.740
> 
> 标签：grails, grails-domain-class, grails-2.0, grails-controller

在为域类生成控制器和视图时：

```
class Book {

    static constraints = {
        bookId blank:false
        bookTitle blank:false
    }

    private int bookId
    private String bookTitle
    private String author
    private double price
    private Date edition
    private String publisher
} 
```

给出错误说：无法将 int 字段 lms.Book.bookId 设置为 java.lang.Class

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:32:04.833

我认为如果您在字段声明中添加“私有”，您必须为该字段编写 getter 和 setter：

```
class Book {

    static constraints = {
        bookId blank:false
        bookTitle blank:false
    }

    private Integer bookId
...
    Integer getBookId() { this.bookId }

    void setBookId(Integer bookId) { this.bookId = bookId }
....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:20:20.943

将“int”更改为“Integer”（也将“double”更改为“Double”），例如

```
class Book {

    static constraints = {
        bookId blank:false
        bookTitle blank:false
    }

    private Integer bookId
    private String bookTitle
    private String author
    private Double price
    private Date edition
    private String publisher
} 
```

另外，我怀疑您是否可以对整数设置“空白”约束，将其更改为：

```
bookId nullable: false 
```

假设这是您想要的（或完全删除它，因为 nullable: false 约束是隐式的）。

# javascript - JQgrid 对 ID 列的数据更改进行排序

> ID：11219856
> 
> 赞同：0
> 
> 时间：2012-06-27T05:19:23.847
> 
> 标签：javascript, jquery, sorting, jquery-plugins, jqgrid

我正在使用 JQgrid 显示数据，网格中的数据是逐行添加的。我也使用“本地”数据类型来启用客户端排序。我在存储数据库 ID 的 colmodel 中有 'id'。第一次正确加载数据但是当我单击标题以对“id”列的数据内容进行排序时更改为 1,2 ...

请帮忙..

我的代码

```
var pageNumber=0,
    previouslySelectedId,
    numberOfRecords;

var numberOfPages,sortingFlag=false;

$(function() {
     $("#supplierCommodityList").jqGrid({               
            datatype: "local",                          
            colNames:['ID','Supplier','Commodity','Unit','Cost Per Unit','Start Date','End Date'],
            colModel:[
                {name:'id',index:'id',hidden:true}, 
                {name:'supplier.name',index:'supplier.name',sorttype:"string",formatter:wrapToLinkFormatter},
                {name:'coProductSpecification.name',index:'coProductSpecification.name',sorttype:"string",sortable:true}, 
                {name:'unit',index:'unit',sorttype:"string"},
                {name:'expense',index:'expense',sorttype:"int"}, 
                {name:'startDateStr',index:'startDate',formatter:dateFormatter}, 
                {name:'endDateStr',index:'endDate',formatter:dateFormatter}     
            ],

            pager: '#supplierCommodityPager',          //require id pagination, contains id for pagination div.
            viewrecords: true,
            multiselect: false,      // to enable multiselect (chack box)
            caption: "Supplier Commodity",  //to show title on top      
            width: 920,
            height:600,
            viewrecords: true,
            loadonce: true, // to enable sorting on client side 
            sortable: true, //to enable sorting 
            onPaging:paginationEvent,    //pagination
            onSortCol:sortingEvent,
            gridComplete:gridCompleteFunction,
            editurl: "clientArray"
        }).navGrid('#supplierCommodityList',{edit:false,add:false,del:false});

    attach_events(pagiantion_control_classes,'supplierCommodityList','supplierCommodityPager',get_supplier_commodity_details);
    sortingEvent.gridId='supplierCommodityList'; //Id of grid 
    sortingEvent.pagerId='supplierCommodityPager';//Id of Pager
    get_supplier_commodity_details(0);      
});

/**
 * method to get data .
 */
var get_supplier_commodity_details=function(requestedPage){ 
    if(typeof requestedPage == 'undefined')
        requestedPage=0;
    var rurl='supplierCommodity/false';
    $.ajax({
        url: rurl+'/'+requestedPage,
        processData:false,
        type: 'GET',

        success: function(data, textStatus, jqXHR){                     
            render_supplier_commodity_details(data,requestedPage);
        }                               
    }); 
};

/**
 * method used to render data in grid, row by row
 * 
 */
 var render_supplier_commodity_details=function(data,pageNo){
     numberOfRecords=data.numberOfRecords;
     var numberOfPages=data.totalPages;
     var noOfRecordPerPage=0;
     console.debug(data);
        $.each(data.supplierCommodityList,function(i,row){
            $("#supplierCommodityList").jqGrid('addRowData',row.id,row);             
            noOfRecordPerPage+=1;
        });

        //alert(noOfRecordPerPage);
        $("#supplierCommodityList").setGridParam({rowNum:numberOfRecords});
        //jQuery("#supplierCommodityList").trigger("reloadGrid"); // to avoid total no of pages to be shown as 0.
        $('span#sp_1_supplierCommodityPager').text(data.totalPages); //shows total pages
        $('input.ui-pg-input').val(pageNo+1);
        $("#supplierCommodityList").setGridParam({rowNum:numberOfRecords});
        if(numberOfPages==1){
            $('#supplierCommodityPager .ui-paging-info').text('View '+ 1 +' - '+ noOfRecordPerPage+ ' of '+noOfRecordPerPage);
        }else if(numberOfPages==(parseInt(pageNo)+1)){
            var minrecord=numberOfRecords-noOfRecordPerPage+1;
            var maxrecord=numberOfRecords;
            $('#supplierCommodityPager .ui-paging-info').text('View '+ minrecord +' - '+ maxrecord+ ' of '+numberOfRecords);
        }else if(numberOfPages!=1){
        var minrecord=(noOfRecordPerPage*pageNo)+1;
        var maxrecord=noOfRecordPerPage*(pageNo+1)>numberOfRecords?noOfRecordPerPage  :noOfRecordPerPage*(pageNo+1);
            $('#supplierCommodityPager .ui-paging-info').text('View '+minrecord +' - '+ maxrecord+ ' of '+data.numberOfRecords);
        } 
};

/**
 * method handling sorting of column 
 */
sortingEvent=function(index,iCol,sortorder){//index=col. name, icol=index of column,sortorder=asc or desc
    // console.debug(index+ iCol+sortorder+"   satrt");
     sortingFlag=true;                                  //flag required in gridCompleteFunction to change Text in Pager.
     numberOfPages=$('span#sp_1_'+sortingEvent.pagerId).text();
    var pageNumber=$('#'+sortingEvent.pagerId+' .ui-pg-input').val();

        if(iCol== 6 || iCol==7){
            var obj=$("#"+sortingEvent.gridId).jqGrid('getRowData');
            console.debug(obj); 

            compareDate.sortorder=sortorder=='asc'?1:-1;  //for acending order directly return 1 if 1st element<2nd element
            compareDate.sortingField=(iCol==6)?'startDateStr':'endDateStr'; 
            obj.sort(compareDate);
            console.debug(obj); 
            var gridObj = jQuery("#"+sortingEvent.gridId);  
            var textOnPager=$('#'+sortingEvent.pagerId+' .ui-paging-info').text();
            gridObj.clearGridData();
            $.each(obj,function(i,row){
                $("#"+sortingEvent.gridId).jqGrid('addRowData',row.id,row);          //appends data row by row to grid  
            });
            $('#'+sortingEvent.pagerId+' .ui-paging-info').text(textOnPager);
            $('span#sp_1_'+sortingEvent.pagerId).text(numberOfPages); //shows total pages
            $('#'+sortingEvent.pagerId+' .ui-pg-input').val(pageNumber);
            return 'stop';
        }
};

/**
 * method called when we click on link for updating Headline
 */
clickMethod=function(id){
     if(id!=null && typeof id != 'undefined')
        window.location = "/kiss/portal/yoadmintool/supplierCommodity/supplierCommodityDetail/"+id+"/";
    else
        window.location = "/kiss/portal/yoadmintool/supplierCommodityList"; 
 };

 /*
  * method which gets called on pagination.
  */
 var paginationEvent=function(pgButton){
    pageNumber=$('#supplierCommodityPager .ui-pg-input').val();
    var gridObj = jQuery("#supplierCommodityList");  
    gridObj.clearGridData();
    get_supplier_commodity_details(pageNumber-1);   
 };

gridCompleteFunction=function(){   
var noOfRecordPerPage=jQuery("#supplierCommodityList").jqGrid('getGridParam', 'records');
    if(sortingFlag){
        if(numberOfPages==1){
        $('#supplierCommodityPager .ui-paging-info').text('View '+ 1 +' - '+ noOfRecordPerPage+ ' of '+noOfRecordPerPage);
        }else if(numberOfPages==(parseInt(pageNumber)+1)){
            var minrecord=numberOfRecords-noOfRecordPerPage+1;
            var maxrecord=numberOfRecords;
            $('#supplierCommodityPager .ui-paging-info').text('View '+ minrecord +' - '+ maxrecord+ ' of '+numberOfRecords);
        }else if(numberOfPages==0){

        }else if(numberOfPages!=1){
        var minrecord=(noOfRecordPerPage*pageNumber)+1;
        var maxrecord=noOfRecordPerPage*(parseInt(pageNumber))>numberOfRecords?noOfRecordPerPage  :noOfRecordPerPage*(parseInt(pageNumber));
            $('#supplierCommodityPager .ui-paging-info').text('View '+minrecord +' - '+ maxrecord+ ' of '+numberOfRecords);
        } 
    }
    sortingFlag=false;
    $('.ui-state-disabled.ui-pg-button').removeClass('ui-state-disabled').addClass('ui-state-enabled');//to enable pager button
 };

 /**
  * method to wrap discription to link for updation purpose
 */
 wrapToLinkFormatter=function(cellvalue, options, rowObject){
     var link="<a href=\"javascript:clickMethod('"+rowObject.id+"');\">"+cellvalue+"</a>";
     return link;
 }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:51:33.837

我已经多次看过[jsfiddle 演示](http://jsfiddle.net/amorris/yNw3C/)，我想知道它的起源在哪里。问题是演示**模板真的很糟糕**。它包含许多小错误，并显示了用本地数据填充 jqGrid*的最坏方法。*请永远不要将模板用于您的真实代码。

当前代码中的错误如下：您选择`id`了第一列的名称。该`id`属性将用于保存 rowid（网格`id`的`<tr>`元素）。一方面，您使用`id: 48803`and `id: 48769`。另一方面，您使用`$("#grid").jqGrid('addRowData', i + 1, mydata[i]);`. 所以`id`将设置为`i + 1`（1和2）。所以值`48803`和`48769`将被放置在网格中，但`id`内部`data`参数的属性将被*覆盖*为 1 和 2 值。如果您将代码更改为`$("#grid").jqGrid('addRowData', data[i][0], mydata[i]);`问题将得到解决。

尽管如此，我还是强烈建议您重写代码。您应该首先填充`mydata`然后使用`data: mydata`abd`gridview: true`选项创建网格。您应该另外修复与`sorttype`您使用的数据相对应的数据。我建议您另外使用`height: "auto"`而不是`height: 250`包含寻呼机。当前代码将只显示数据的前 20 行（`rowNum`默认值为 20），用户将无法看到下一页。

# c# - 仅在特定条件下为 Telerik MVC Grid 创建 DetailView

> ID：11219857
> 
> 赞同：1
> 
> 时间：2012-06-27T05:19:24.393
> 
> 标签：c#, asp.net-mvc, grid, telerik

我知道有一个关于条件 DetailView 的问题，但是我觉得这不是我想要的。我一直在搞乱 MVC 的 Telerik Grid，并且我设法为我的网格中的行创建了一个 DetailView。事情是到目前为止，我的 DetailView 充满了 HTML 代码，我想在里面有一个新模型。

基于一个列值，我想仅为与该列值匹配的行创建一个 DetailView。因此，例如，如果列“Type”等于 Fruit，则应为其创建一个 DetailView（带有“+”号）。现在如果“类型”是蔬菜，它不应该创建 DetailView（没有“+”号）。

我当前的代码如下所示：

```
Html.Telerik().Grid<SearchViewModel>(Model)
        .Name("Search")
                    .Columns(columns =>
                    {
                        columns.Bound(o => o.Type).Width(60);
                        //etc.
                    })
        //.PrefixUrlParameters(false)
        .DetailView(detailView => detailView.ClientTemplate(
            "<div>" +
            "<h5><span>Details for Type:</span></h5><div><#= DetailsType #></div>" +
            "</div>"
        )) 
```

如您所见，我正在为网格中的每一行创建 DetailView。

另外，我发现了一个在某些条件下隐藏加号的 JavaScript，但是它在初始加载时不起作用（仅在我发出过滤、分页或刷新请求之后）。脚本与 .OnRowDataBound 绑定。

```
function hidePlusSign(e) {
    var row = e.row;
    var dataItem = e.dataItem;

    if (dataItem.Type != "Fruit") {
        $('a.t-icon', e.row.cells).css('display', 'none');

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:49:08.980

你需要做的只是在你的细节视图中添加条件，它看起来像这样：

```
"<# if (DetailsType == 'MyType') { #>" +    
    "<div>some html code here</div>" +
"<# } else { #>" +
    "<div>another html code here</div>" +
"<# } #>" + 
```

# java - Java 8 模式匹配？

> ID：11219858
> 
> 赞同：30
> 
> 时间：2012-06-27T05:19:39.040
> 
> 标签：java, lambda, java-8, matching

Java 8 会像 Scala 和其他函数式程序那样支持模式匹配吗？我正在对 Java 8 的 Lambda 功能进行演示。我在这个特殊的函数式编程概念上找不到任何东西。

我记得让我对函数式编程感兴趣的是快速排序实现，尤其是与命令式编程的实现相比。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-30T21:17:53.137

我想你不是在谈论在字符串上应用正则表达式的意义上的模式匹配，而是[在 Haskell 中应用](http://www.haskell.org/tutorial/patterns.html)。例如使用通配符：

```
head (x:_)  = x
tail (_:xs) = xs 
```

Java 8 本身不支持这一点，但是使用 Lambda 表达式有一些方法可以做到这一点，例如计算阶乘：

```
public static int fact(int n) {
     return ((Integer) new PatternMatching(
          inCaseOf(0, _ -> 1),
          otherwise(  _ -> n * fact(n - 1))
     ).matchFor(n));
} 
```

如何实现这一点，您将在这篇博文中找到更多信息：[Towards Pattern Matching in Java](http://kerflyn.wordpress.com/2012/05/09/towards-pattern-matching-in-java/)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-06-11T17:49:40.673

在 Java 8 中可以将模式匹配实现为一个库（利用 lambda 表达式），但不幸的是，我们仍然会错过 Haskell 或 Scala 等语言所具有的编译器详尽性检查。

[Cyclops-react](https://github.com/aol/cyclops-react)有一个强大的[模式匹配](http://gist.asciidoctor.org/?github-aol/simple-react//user-guide/pattern-matching.adoc) 模块，它提供 Java 8 的结构模式匹配和通过警卫的模式匹配。

它提供了when/then/otherwise DSL 和匹配，包括基于标准Java Predicates 的解构（例如，匹配可以用来过滤一个Stream）。

## 门卫匹配

为了通过保护进行匹配，我们使用 whenGuard / then / else 来清楚地显示案例正在驱动测试，而不是被测对象的结构。

例如，对于基于守卫的匹配，如果我们实现一个实现 Matchable 接口的 Case 类

```
 static class MyCase  implements Matchable{ int a; int b; int c;} 
```

（顺便说一句，Lombok 可以非常方便地创建密封案例类层次结构）

我们可以匹配它的内部值（如果需要，递归，或者在其他各种选项中按类型）。

```
 import static com.aol.cyclops.control.Matchable.otherwise;
  import static com.aol.cyclops.control.Matchable.whenGuard;

  new MyCase(1,2,3).matches(c->c.is(whenGuard(1,2,3)).then("hello"),
                               .is(whenGuard(4,5,6)).then("goodbye")
                               ,otherwise("goodbye")
                           ); 
```

如果我们有一个没有实现 [Matchable][3] 的对象，我们无论如何都可以强制它为 Matchable，我们的代码将变为

```
Matchable.ofDecomposable(()->new MyCase(1,2,3)))
         .matches(c->c.is(whenGuard(1,2,3)).then("hello"),
                      .is(whenGuard(4,5,6)).then("goodbye")
                      ,otherwise("hello")); 
```

如果我们不关心其中一个值，我们可以使用通配符

```
new MyCase(1,2,3).matches(c->c.is(whenGuard(1,__,3)).then("hello"),
                              .is(whenGuard(4,__,6)).then("goodbye")
                              ,otherwise("hello)
                           ); 
```

或者递归地解构一组嵌套的类

```
Matchable.of(new NestedCase(1,2,new NestedCase(3,4,null)))
                .matches(c->c.is(whenGuard(1,__,has(3,4,__)).then("2")
                 ,otherwise("default"); 
```

NestedCase 看起来像这样的地方 -

```
class NestedCase implemends Decomposable { int a; int b; NestedCase c; } 
```

用户还可以使用 hamcrest 编写模式匹配表达式

```
 import static com.aol.cyclops.control.Matchable.otherwise;
 import static com.aol.cyclops.control.Matchable.then;
 import static com.aol.cyclops.control.Matchable.when;

 Matchable.of(Arrays.asList(1,2,3))
                .matches(c->c.is(when(equalTo(1),any(Integer.class),equalTo(4)))
                        .then("2"),otherwise("default")); 
```

## 结构模式匹配

我们还可以匹配被测对象的确切结构。这不是使用 if / then 测试来查看结构是否恰好匹配我们的案例，我们可以让编译器确保我们的案例与提供的对象的结构相匹配。执行此操作的 DSL 与基于保护的匹配几乎相同，但我们使用 when / then / else 来清楚地显示对象结构驱动测试用例，反之亦然。

```
 import static com.aol.cyclops.control.Matchable.otherwise;
  import static com.aol.cyclops.control.Matchable.then;
  import static com.aol.cyclops.control.Matchable.when;

  String result =  new Customer("test",new Address(10,"hello","my city"))
                            .match()
                            .on$_2()
                            .matches(c->c.is(when(decons(when(10,"hello","my city"))),then("hello")), otherwise("miss")).get();

  //"hello" 
```

对从客户中提取的地址对象进行结构匹配。客户和地址类在哪里看这个

```
@AllArgsConstructor
static class Address{
    int house;
    String street;
    String city;

    public MTuple3<Integer,String,String> match(){
        return Matchable.from(()->house,()->street,()->city);
    }
}
@AllArgsConstructor
static class Customer{
    String name;
    Address address;
    public MTuple2<String,MTuple3<Integer,String,String>> match(){
        return Matchable.from(()->name,()->Maybe.ofNullable(address).map(a->a.match()).orElseGet(()->null));
    }
} 
```

cyclops-react 提供了一个[Matchables](http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/Matchables.html)类，它允许对常见的 JDK 类型进行结构模式匹配。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-09T15:00:46.657

我知道这个问题已经得到了回答，而且我是函数式编程的新手，但是在犹豫了很久之后，我最终决定参与到这个讨论中来对接下来的内容进行反馈。

我会建议（太？）下面的简单实现。它与已接受答案中引用的（好）文章略有不同；但根据我的（短暂的）经验，它使用起来更灵活且易于维护（这当然也是一个品味问题）。

```
import java.util.Optional;
import java.util.function.Function;
import java.util.function.Predicate;

final class Test
{
    public static final Function<Integer, Integer> fact = new Match<Integer>()
            .caseOf( i -> i == 0, i -> 1 )
            .otherwise( i -> i * Test.fact.apply(i - 1) );

    public static final Function<Object, String> dummy = new Match<Object>()
            .caseOf( i -> i.equals(42), i -> "forty-two" )
            .caseOf( i -> i instanceof Integer, i -> "Integer : " + i.toString() )
            .caseOf( i -> i.equals("world"), i -> "Hello " + i.toString() )
            .otherwise( i -> "got this : " + i.toString() );

    public static void main(String[] args)
    {
        System.out.println("factorial : " + fact.apply(6));
        System.out.println("dummy : " + dummy.apply(42));
        System.out.println("dummy : " + dummy.apply(6));
        System.out.println("dummy : " + dummy.apply("world"));
        System.out.println("dummy : " + dummy.apply("does not match"));
    }
}

final class Match<T>
{
    public <U> CaseOf<U> caseOf(Predicate<T> cond, Function<T, U> map)
    {
        return this.new CaseOf<U>(cond, map, Optional.empty());
    }

    class CaseOf<U> implements Function<T, Optional<U>>
    {
        private Predicate<T> cond;
        private Function<T, U> map;
        private Optional<CaseOf<U>> previous;

        CaseOf(Predicate<T> cond, Function<T, U> map, Optional<CaseOf<U>> previous)
        {
          this.cond = cond;
          this.map = map;
          this.previous = previous;
        }

        @Override
        public Optional<U> apply(T value)
        {
            Optional<U> r = previous.flatMap( p -> p.apply(value) );
            return r.isPresent() || !cond.test(value) ? r
                : Optional.of( this.map.apply(value) );
        }

        public CaseOf<U> caseOf(Predicate<T> cond, Function<T, U> map)
        {
          return new CaseOf<U>(cond, map, Optional.of(this));
        }

        public Function<T,U> otherwise(Function<T, U> map)
        {
            return value -> this.apply(value)
                .orElseGet( () -> map.apply(value) );
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-19T08:00:00.233

[Derive4J](https://github.com/derive4j/derive4j)是一个库，旨在支持对 Java（甚至更多）求和类型和结构模式匹配的近乎原生支持。以一个小型计算器 DSL 为例，使用 Derive4J 可以编写如下代码：

```
import java.util.function.Function;
import org.derive4j.Data;
import static org.derive4j.exemple.Expressions.*;

@Data
public abstract class Expression {

    interface Cases<R> {
        R Const(Integer value);
        R Add(Expression left, Expression right);
        R Mult(Expression left, Expression right);
        R Neg(Expression expr);
    }

    public abstract <R> R match(Cases<R> cases);

    private static Function<Expression, Integer> eval = Expressions
        .match()
            .Const(value        -> value)
            .Add((left, right)  -> eval(left) + eval(right))
            .Mult((left, right) -> eval(left) * eval(right))
            .Neg(expr           -> -eval(expr));

    public static Integer eval(Expression expression) {
        return eval.apply(expression);
    }

    public static void main(String[] args) {
        Expression expr = Add(Const(1), Mult(Const(2), Mult(Const(3), Const(3))));
        System.out.println(eval(expr)); // (1+(2*(3*3))) = 19
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-30T13:44:30.360

[JMPL](https://github.com/klappdev/jpml)是一个简单的 java 库，它可以使用 Java 8 的特性来模拟一些特性模式匹配。

```
 matches(data).as(
      new Person("man"),    () ->  System.out.println("man");
      new Person("woman"),  () ->  System.out.println("woman");
      new Person("child"),  () ->  System.out.println("child");        
      Null.class,           () ->  System.out.println("Null value "),
      Else.class,           () ->  System.out.println("Default value: " + data)
   );

   matches(data).as(
      Integer.class, i  -> { System.out.println(i * i); },
      Byte.class,    b  -> { System.out.println(b * b); },
      Long.class,    l  -> { System.out.println(l * l); },
      String.class,  s  -> { System.out.println(s * s); },
      Null.class,    () -> { System.out.println("Null value "); },
      Else.class,    () -> { System.out.println("Default value: " + data); }
   );

   matches(figure).as(
      Rectangle.class, (int w, int h) -> System.out.println("square: " + (w * h)),
      Circle.class,    (int r)        -> System.out.println("square: " + (2 * Math.PI * r)),
      Else.class,      ()             -> System.out.println("Default square: " + 0)
   ); 
```

# javascript - 如何制作带有刻度标记html5的“播放”滑块？

> ID：11219860
> 
> 赞同：2
> 
> 时间：2012-06-27T05:20:03.607
> 
> 标签：javascript, jquery, html

我想在 HTML5 中做这样的事情，我有类似的东西：![在此处输入图像描述](../Images/9443dce911122cce54a3faa2edec55d9.png)

我希望能够做到这一点，以便当我单击“开始”按钮时，刻度线逐渐移动到下一个刻度并以每秒 1 的速度递增，单击“停止”会停止该行为，然后再次单击“开始”会从当前位置恢复. 顶部的框仅显示与红色跟踪栏对应的秒数。假设用户可以指定刻度线的数量（即可以是 20 秒/刻度线宽或 10 秒/刻度线宽）。

我已经看到了 JQuery UI Slider [http://jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)虽然它没有标记并且我不确定它是否真的是做我所描述的事情的最佳方法，或者是否有更好的方法。

这样做的最佳 javascript、jquery、html 方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:12:33.690

试试这个——我想锻炼一下！

**[http://jsfiddle.net/zBKJk/](http://jsfiddle.net/zBKJk/)**

唯一的怪癖是底部的刻度与不同的值不完全对齐`TICKS_ON_BAR`。可能是一个小的 CSS/数学问题。

您可以更改这些变量

```
var TICKS_ON_BAR = 10; // Number of seconds to show on the bar
var TICK_RATE_MS = 100; // Interval to tick at (in milliseconds) 
```

还添加了一个方便的回调函数

```
function timerComplete(){
    // Do something further when the timer hits the end of the bar
} 
```

​编辑 **：**如果您希望它顺利运行，您可以降低间隔或（因为您指定了 HTML5）使用线性 CSS3 过渡来使更改动画化：

[http://jsfiddle.net/zBKJk/1/](http://jsfiddle.net/zBKJk/1/)（有点小故障，我只是在 w3schools 的示例 css 中转储）

使用 jQuery 进行动画处理也有问题：http: [//jsfiddle.net/zBKJk/2/](http://jsfiddle.net/zBKJk/2/)

# jquery - 重构jquery附加缩短代码

> ID：11219861
> 
> 赞同：0
> 
> 时间：2012-06-27T05:20:10.553
> 
> 标签：jquery, refactoring, append

我有这个脚本

```
$('head').append('<link rel="stylesheet" href="css/file1.css" type="text/css" />');
$('head').append('<link rel="stylesheet" href="css/jquery.jscrollpane.css" type="text/css" />');
$('head').append('<link rel="stylesheet" href="css/image_contents.css" type="text/css" />'); 
```

这是编写此脚本的最佳方式吗？是否有更简单或更快的语法？对不起，如果我在错误的地方问这个问题。我正在尝试折射这个多重附加。请点亮一盏灯，

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T05:22:55.777

如果需要，您可以创建一个函数：

```
function addCSS() {
   var paths = ["css/file1.css", "css/jquery.jscrollpane.css", "css/image_contents.css"];

   $.each(paths, function(i, path) {
     $('head').append('<link rel="stylesheet" href="'+path+'" type="text/css" />');
   });
} 
```

# ios - PopOverController 在 StoryBoard 中无法正常工作

> ID：11219867
> 
> 赞同：0
> 
> 时间：2012-06-27T05:20:23.610
> 
> 标签：ios, ios5, user-interface, uisplitviewcontroller, uipopovercontroller

我的故事板拆分视图应用程序有问题。我有这个弹出框控制器，但是当我按下条形按钮项目而不是在屏幕顶部弹出时，它会从侧面推动。有什么想法吗？

```
 - (void)splitViewController:(UISplitViewController *)splitController willHideViewController:(UIViewController *)viewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)popoverController
{    
    barButtonItem.title = NSLocalizedString(@"Master", @"Master");
    [self.navigationItem setLeftBarButtonItem:barButtonItem animated:YES];
    self.masterPopoverController = popoverController;
}

- (void)splitViewController:(UISplitViewController *)splitController willShowViewController:(UIViewController *)viewController invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem
{
    // Called when the view is shown again in the split view, invalidating the button and popover controller.
    [self.navigationItem setLeftBarButtonItem:barButtonItem animated:YES];
    self.popoverController =nil;
    // self.masterPopoverController = ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:42:40.720

你可以试试这个：

```
- (void)splitViewController: (UISplitViewController*)splitController willHideViewController:(UIViewController *)viewController withBarButtonItem:(UIBarButtonItem*)barButtonItem forPopoverController:(UIPopoverController*)popoverController {
barButtonItem.title = NSLocalizedString(@"Master", @"Master");
NSMutableArray *items = [[_toolbar items] mutableCopy];
[items insertObject:barButtonItem atIndex:0];
[_toolbar setItems:items animated:YES];
[items release];
self.popover = popoverController; 
```

}

```
- (void)splitViewController: (UISplitViewController*)splitController willShowViewController:(UIViewController *)viewController invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem {    
NSMutableArray *items = [[_toolbar items] mutableCopy];
[items removeObjectAtIndex:0];
[_toolbar setItems:items animated:YES];
[items release];
self.popover = nil; 
```

}

# c# - c#中自定义验证错误

> ID：11219870
> 
> 赞同：0
> 
> 时间：2012-06-27T05:20:42.910
> 
> 标签：c#

错误是：

字符串未被识别为有效的日期时间。

自定义验证器的功能：

```
protected void chkdate1(object sender, ServerValidateEventArgs e)
{
    IFormatProvider theCultureInfo = new System.Globalization.CultureInfo("en-GB", true);
    DateTime from = DateTime.ParseExact(txt_from_date.Text, "MM/dd/yyyy HH:mm:ss", theCultureInfo);
    DateTime to = DateTime.ParseExact(txt_to_date.Text, "MM/dd/yyyy HH:mm:ss", theCultureInfo);
} 
```

自定义验证是：

```
<asp:CustomValidator ID="scdt1" runat="server" OnServerValidate="chkdate1" ErrorMessage="To date not less than From date"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:28:56.807

对于`DateTime.ParseExact()`, 字符串表示的格式必须与指定的格式完全匹配，否则会抛出异常。为什么不能尝试用`DateTime.Parse()`method或`DateTime.TryParseExact()`method解析

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T05:31:10.953

您收到此错误的原因可能是您传递的日期不包含时间。它应该类似于以下格式：

```
"06/27/2012 12:00:00" 
```

或者，如果您的 txt_from_date 不包含时间，您可以使用不同的格式。

```
DateTime from = DateTime.ParseExact(txt_from_date, "MM/dd/yyyy", theCultureInfo); 
```

编辑：基于评论

```
DateTime from = DateTime.ParseExact(txt_from_date, "M/d/yyyy", theCultureInfo);
DateTime to = DateTime.ParseExact(txt_to_date.Text, "M/d/yyyy", theCultureInfo); 
```

由于您提到日期格式为`M/d/yyyy`，因此您应该在 DateTime.ParseExact 中指定

# algorithm - 如何压缩排序单词列表？

> ID：11219872
> 
> 赞同：4
> 
> 时间：2012-06-27T05:20:50.240
> 
> 标签：algorithm, compression

我有一个大文件，每行一个单词。整个文件已排序，我现在需要压缩它。我可以简单地使用 GZIP，结果会非常好。但是，我想知道是否可以更好地知道我们正在处理已排序的单词列表。

这是我的排序单词列表的片段：

```
[...]
ABAISSAT
ABAISSATES
ABAISSE
ABAISSEE
ABAISSEES
ABAISSEMENT
ABAISSEMENTS
ABAISSENT
ABAISSER
ABAISSERA
ABAISSERAI
ABAISSERAIENT
ABAISSERAIS
[...] 
```

使用前缀压缩文件会比 GZIP 产生更好的结果吗？

```
[...]
ABAISS AT ATES E EE EES EMENT EMENTS ENT ER ERA ERAI ERAIENT ERAIS
[...] 
```

什么算法可以让我使用我描述的压缩类型来压缩我的单词列表？还有其他想法如何压缩数据吗？

PS 我虽然关于使用 Trie 并且我实现了它。Trie 的最终大小是内存几乎与列表本身一样大，并且加载列表的时间非常长。由于这些原因，我决定不走那条路。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T05:43:58.140

您似乎在考虑诸如[front compression](http://en.wikipedia.org/wiki/Incremental_encoding)之类的东西，其中每个条目都是该条目与前一个条目共享的最左边字符数，然后是剩余的未共享字符。使用您的数据的示例：

```
0, ABAISSAT
8, ES
6, E
7, E
etc. 
```

结果仍然需要 gzipping（或其他压缩）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:28:12.673

您可以创建一个函数来计算两个连续单词之间的差异，将其应用于整个列表并 GZIP 压缩它（另外，您需要将第一个单词保存为起点）。

该功能会是什么样子？不确定，你必须尝试一下。

这个想法是连续单词之间的差异很小（就信息而言）。

这与视频压缩中使用的概念想法（无论如何是其中一种技术）相同 - 连续帧将非常相似。

# logging - 在 Sentry 中创建帐户

> ID：11219874
> 
> 赞同：6
> 
> 时间：2012-06-27T05:21:13.637
> 
> 标签：logging, sentry

我可以在 Sentry 中创建一个新帐户吗？如何？

*添加用户必须：“如果他们已经有一个帐户，您可以通过他们的用户名添加用户。”。*

TIA。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T09:48:24.150

在这个问题上花了一个小时左右后，我终于找到了答案。Sentry 在这里有用户管理：[http://yoursentry.url](http://yoursentry.url) /manage/users/。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-17T08:09:59.633

我执行以下过程以在本地 Sentry 中创建另一个帐户：

假设哨兵端口是`9000`：

1.  使用原账号登录
2.  去这个地址`http://127.0.0.1:9000/settings/sentry/members/`
3.  使用其电子邮件和角色邀请用户，然后单击`Add Member`
4.  然后单击新创建的邀请。
5.  将邀请链接复制到剪贴板。
6.  从原始用户注销。
7.  转到复制的链接（即 `http://127.0.0.1:9000/accept/6/ab1acc5a37cf4e84a1f75a51c7485f06b01dcad2219540d1b4490a1e1dcbd705/` ）
8.  点击`Create a new account`
9.  现在，注册选项卡将出现在登录附近。
10.  在“注册”选项卡中输入新的电子邮件、姓名和密码，然后单击`Register`
11.  点击`Join to a Sentry organization`

* * *

[**注意**]：

*   使用此地址`http://127.0.0.1:9000/admin`和原始用户，您可以访问 Sentry`User`表，并更改帐户角色和组织，或者您可以创建一个新用户。

*   此方法已在 Sentry 9.0.0 上测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-22T10:19:52.393

我让用户在[http://SOMEHOST:9000/auth/login/sentry/](http://SOMEHOST:9000/auth/login/sentry/)中注册，然后我将用户分配给一个团队。每个项目都分配给一个团队。

Sentry 本地版本：master HEAD 位于 177ed0ef（于 2016 年 11 月 11 日提交）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-02T19:14:58.670

我的用户管理屏幕在这里。

[http://yourSentryURL.com/organizations/sentry/members/](http://yourSentryURL.com/organizations/sentry/members/)

# vb.net - 如何以编程方式断开 Crystal Reports 的链接？

> ID：11219877
> 
> 赞同：1
> 
> 时间：2012-06-27T05:22:11.937
> 
> 标签：vb.net, visual-studio-2010, crystal-reports-2008

我们所有的 Crystal 报表都有图像（例如公司徽标）。其中一些图像硬链接到本地​​计算机上的文件，例如 C:\Images\ReportLogo.bmp。我可以通过单击编辑 > 链接从 Crystal Reports 设计器访问这些链接。在此弹出表单上，有一个标记为**Break Link**的按钮。如何以编程方式断开链接，而不是手动打开每个报告文件并单击按钮？我们有 100 多份报告，所以我不想走手动路线。

这是我到目前为止所拥有的（我们使用它来设置我试图断开链接的同一图片对象的宽度/高度：

```
Imports RAS = CrystalDecisions.ReportAppServer

Dim cdwReport as RAS.ReportClientDocumentWrapper
Dim crcObjects As RAS.ReportDefModel.ReportObjects = cdwReport.ReportDefController.ReportObjectController.GetAllReportObjects
Dim crcPictureObject As CrystalDecisions.ReportAppServer.ReportDefModel.PictureObject

For Each crcObject As RAS.ReportDefModel.ReportObject2 In crcObjects
    If crcObject.Kind = CrystalDecisions.ReportAppServer.ReportDefModel.CrReportObjectKindEnum.crReportObjectKindPicture Then 

        crcPictureObject = crcObject
        With crcPictureObject
            .OriginalHeight = PicHeight
            .OriginalWidth = PicWidth
            'Break link here
        End With
    End If 
```

`crcPictureObject.LinkedURI`没什么。

不能 100% 确定这是否是断开所有链接的适当途径。上面的代码循环遍历文件夹中的所有报告。

有没有“简单”的方法来做到这一点？（VB.net/C# 都可以）

# jquery-plugins - Jquery 插件刷新变量

> ID：11219883
> 
> 赞同：0
> 
> 时间：2012-06-27T05:22:41.283
> 
> 标签：jquery-plugins

我在这里有一个 textarea maxlength 的工作版本：http: [//jsfiddle.net/73r8G/](http://jsfiddle.net/73r8G/) 我正在尝试将其转换为 Jquery 插件。我需要在第 120 行之后参考 textarea 框的更新内容，但我不知道该怎么做。我的目标是从我的代码中替换 ('.user_text') 和 ('.user_text_remaining')。

到目前为止我的代码：

```
<!DOCTYPE HTML>
<html>    
    <head>
        <title>Textarea Limits</title>
        <script type="text/javascript" src="jquery-1.7.2.js"></script>
    </head>
    <body>
    <script type="text/javascript">
        $(document).ready(function () {

    (function($){ 
    $('.user_text').val('');    
    $.fn.truncate = function(options) {  
    var defaults = {  
        limit: 140
    };  
    var options = $.extend(defaults, options); 

               return this.each(function() {  
               var options_limit = options.limit;
                //alert(options_limit);
               obj= $(this); 

               var content = obj.html();

                var fieldSelection = {
                    getSelection: function () {
                        var e = (this.jquery) ? this[0] : this;
                        return ( /* mozilla / dom 3.0 */ ('selectionStart' in e &&
                        function () {
                            var l = e.selectionEnd - e.selectionStart;
                            return {
                                start: e.selectionStart,
                                end: e.selectionEnd,
                                length: l,
                                text: e.value.substr(e.selectionStart, l)
                            };
                        }) || /* exploder */ (document.selection &&
                        function () {
                            e.focus();
                            var r = document.selection.createRange();
                            if (r === null) {
                                return {
                                    start: 0,
                                    end: e.value.length,
                                    length: 0
                                }
                            }
                            var re = e.createTextRange();
                            var rc = re.duplicate();
                            re.moveToBookmark(r.getBookmark());
                            rc.setEndPoint('EndToStart', re);
                            return {
                                start: rc.text.length,
                                end: rc.text.length + r.text.length,
                                length: r.text.length,
                                text: r.text
                            };
                        }) || /* browser not supported */
                        function () {
                            return null;
                        })();
                    }
                };
                jQuery.each(fieldSelection, function (i) {
                    jQuery.fn[i] = this;
                });

            function textAreaLength(options_limit, content) {
                var user_text_count = $('.user_text').val().length;
                if (options_limit - user_text_count <= 1) {
                    var determineCharacters = "character";
                } else {
                    determineCharacters = "characters";
                }
                $('.user_text_remaining').html(options_limit - user_text_count + " " + determineCharacters + " left");
            }

            function textCleanup(content) {
                setTimeout(function () {
                    if (content.length > options_limit) {
                        trimmed = content.substr(0, options_limit);
                        $(this).val(trimmed);
                    }
                }, 10);
                setTimeout(function () {
                    textAreaLength(options_limit, content)
                }, 20);
            }

            var keys = [],
                counter17 = 0,
                presence = 0;
            function printKeys() {
                var html = '';
                var keycount = 0;
                for (var i in keys) {
                    keycount += 1;
                    //counter17 indicates the ctrl key
                    if (i == 17) counter17 += 1;
                    //presence indicates certain key presses; presence = 2 indicates ctrl; presence = 3 indicates ctrl and v
                    if (counter17 >= 1) {
                        presence = 2;
                        if (i == 86 || i == 118) {
                            presence = 3;
                        }
                    }
                }
                return presence;
            }

            //Keypress is used for Opera; ok for Firefox too        
            $(this).bind("keypress keydown", function (event) {     
                /*
                    want to refer to updated content in the textarea
                */
                if ($(this).getSelection().text == "" && $(this).val().length >= options_limit) {
                    //textarea is full; no more ctrl v
                    if ((event.which === 86 || event.which == 118) && event.ctrlKey) {
                        event.preventDefault();
                    } else {
                        //preserve some keys after textarea is full; f5, arrows, backspace
                        if (event.which == 116 || event.which == 0 || event.which == 33 || event.which == 34 || event.which == 35 || event.which == 36 || event.which == 37 || event.which == 38 || event.which == 39 || event.which == 40 || event.which == 8) {
                            event
                        } else {
                            //single key presses are forbidden when textarea is full
                            if ((event.ctrlKey) == false) {
                                event.preventDefault();
                            }
                        }
                    }

                }
                textCleanup(content); 
            }).keyup(function (e) {
                position = 2;
                delete keys[e.which];
            });

            //For IE and Chrome
            $(this).on('paste', function (event) {
                if ($(this).getSelection().text == "" && $(this).val().length >= options_limit) {
                    event.preventDefault();
                }                
                textCleanup(content); 
            });

            }); 
        };             

    })(jQuery);     

        $('.user_text').truncate( {  
  limit: 150
 });    
        });
    </script>   
        <form name="myform" action="#">
            <textarea class="user_text" name="limitedtextarea" cols="100" rows="10"></textarea>
        </form>
        <p class="user_text_remaining">150 characters left</p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T17:37:44.027

解决了我的问题。学习了如何正确使用 $(this) 变量。[http://jsfiddle.net/cdPzv/](http://jsfiddle.net/cdPzv/)上的 jquery 插件

# jquery - 在添加之前使用 jQuery 从元素中删除类

> ID：11219886
> 
> 赞同：0
> 
> 时间：2012-06-27T05:23:20.047
> 
> 标签：jquery, addclass

所以我有一个网页，您可以在其中选择文本框并通过再次单击背景或框来关闭它们：

[http://hashtag.ly/#NASCAR](http://hashtag.ly/#NASCAR)

所以我有一些代码可以根据点击的内容添加或删除类：

```
$('li').click(function(){
    _this = $(this)
    if (_this.hasClass('active')) {
        //Close it if you clicked on that's already open
        _this.removeClass('active')
    } else if ($('li.active').length !== 0) {
        //close one and open another one you clicked
        _this.siblings().removeClass('active')
        _this.siblings().bind('webkitTransitionEnd oTransitionEnd transitionend',function(){
            _this.addClass('active');
        });
    } else {
        //open the first one
        _this.addClass('active');
    }

});

//Close when clicking the background
$('#close').click(function(){
    $('.active').removeClass('active')
}); 
```

**问题：**当您打开一个框并再次单击它时，它应该会自行关闭，就像第一个 if 语句所说的那样。但是，如果您在文本框之间切换 3 次（使用秒 if 语句），并尝试关闭第三个文本框，它只会一遍又一遍地重新打开自己。关于它为什么这样做的任何线索？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:49:08.143

想通了...

即使您在不同的 if 语句中，转换事件处理程序也不会解除绑定。做了一点阅读，按照 jQuery 创建者的建议将 .bind() 和 .unbind() 移动到 .on() 和 .off() ，并将 off 语句添加到 on 语句函数的末尾。

这是代码：

```
$('li').click(function(){
    _this = $(this)
    if (_this.hasClass('active')) {
        //Close it if you clicked on that's already open
        _this.removeClass('active')
    } else if ($('li.active').length !== 0) {
        //close one and open another one you clicked
        _this.siblings().removeClass('active')
        _this.siblings().on('webkitTransitionEnd oTransitionEnd transitionend',function(){
            _this.addClass('active');
            _this.siblings().off('webkitTransitionEnd oTransitionEnd transitionend');
        });
    } else {
        //open the first one
        _this.addClass('active');
    }

});

//Close when clicking the background
$('#close').click(function(){
    $('.active').removeClass('active')
}); 
```

# python - 是否可以在 sqlalchemy 中自动设置一些列

> ID：11219887
> 
> 赞同：2
> 
> 时间：2012-06-27T05:23:22.857
> 
> 标签：python, mysql, sqlalchemy, pyramid

我有一个包含这两列的模型

1.  created_at：日期
2.  last_updated_at：日期

是否可以在插入或更新发生时自动设置这些值。或者我应该在这个类中调用一个方法来做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T06:59:48.267

请阅读[列插入/更新默认值](http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#column-insert-update-defaults)文档的*Python 执行函数*部分。 然后，您的代码将类似于以下内容：

```
# ...
import datetime
# ...
class MyModel(Base):
    __tablename__ = "my_table"
    # ...
    created_at = Column(DateTime, default=datetime.date.today)
    last_updated_at = Column(DateTime, onupdate=datetime.datetime.now) 
```

# android - Android 新手，需要类似于 AbsoluteLayout 的自定义布局

> ID：11219888
> 
> 赞同：0
> 
> 时间：2012-06-27T05:23:24.747
> 
> 标签：android, layout

我一直在研究创建基于 ViewGroup 的自定义布局，并且我得到（我认为）布局所基于的概念。无论如何，其中一些。

似乎基本思想是

*   首先询问您所有孩子的观点，他们想要多大 - 在 onMeasure()
*   基于此计算布局
*   根据所需的大小定位它们 - 在 onLayout()

我想这有点像网页布局。

但是，我根本不想这样做。基于可用的屏幕空间（x/y px），我有一大堆子视图（各种文本、按钮、自由格式图形），我需要定义它们的尺寸、设置文本大小，然后定位。即我对他们想要多大并不感兴趣，我想告诉他们他们将有多大以及他们将在哪里。

有（曾经）一个 AbsoluteLayout 做类似的事情，但它被贬值了。

由于布局完全与孩子（工作的完全固定数量）和屏幕尺寸相关，我建议：

*   创建我自己的自定义布局子类 ViewGroup
*   早期的某个地方 - 可能在它的 onCreate() 中？- 创建所有的孩子（我确切地知道需要什么）
*   在 onMeasure() 中忽略孩子们想要的一切，尽管我怀疑我必须调用 measureChild() 来避免异常，方法是确保在任何地方调用 setMeasuredDimension()，并根据传入的尺寸计算布局（大小、位置）宽度/高度测量规格
*   在 onLayout() 中，只需告诉所有孩子它会如何（“你在这里，这么大”）
*   因为我对孩子们想要的尺寸不感兴趣，所以只需吸收任何 layoutRequest() 回调并且什么都不做

然而，这在概念上似乎与 Android 认为应该完成布局的方式背道而驰——但这正是我所需要的。

所以我的问题是——这是一个可行的方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:29:24.420

您可以获取源代码`AbsoluteLayout`并根据您的需要进行调整。如果`AbsoluteLayout`被弃用，那将是有原因的，如果该原因不适用于您，您可以自由地做任何您喜欢的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T05:33:09.050

是的，虽然 AbsoluteLayout 已被弃用，但仍可用于 ICS。

不过，您可能需要重新考虑您的 UI 设计——它已被弃用是有原因的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T05:35:06.863

如果你想准确地告诉孩子们应该是什么尺寸，当你调用 onMeasure 时，你会通过 MeasureSpec 模式准确地传递尺寸。他们应该遵守这一点，你不应该做任何变通办法来忽略他们请求的大小。

请参阅[View.MeasureSpec](http://developer.android.com/reference/android/view/View.MeasureSpec.html)编码。传递给 onMeasure 的 (int,int) 应该是 measureSpec 编码的。

# junit - java:comp/env 的 junit 测试

> ID：11219889
> 
> 赞同：2
> 
> 时间：2012-06-27T05:23:32.097
> 
> 标签：junit, jndi

我的服务器端有一个方法，代码如下

```
Context ctx = (Context)new InitialContext().lookup("java:comp/env"); 
```

如何使用 JUnit 甚至独立应用程序在客户端测试此方法？我尝试执行以下操作但仍然失败

```
@BeforeClass
    public static void setUpClass() throws Exception {
        // rcarver - setup the jndi context and the datasource
        try {
            // Create initial context
            System.setProperty(Context.INITIAL_CONTEXT_FACTORY,
                "org.apache.naming.java.javaURLContextFactory");
            System.setProperty(Context.URL_PKG_PREFIXES, 
                "org.apache.naming");            
            InitialContext ic = new InitialContext();

            ic.createSubcontext("java:");
            ic.createSubcontext("java:/comp");
            ic.createSubcontext("java:/comp/env");
            ic.createSubcontext("java:/comp/env/jdbc");

            // Construct DataSource
            OracleConnectionPoolDataSource ds = new OracleConnectionPoolDataSource();
            ds.setURL("jdbc:oracle:thin:@host:port:db");
            ds.setUser("MY_USER_NAME");
            ds.setPassword("MY_USER_PASSWORD");

            ic.bind("java:/comp/env/jdbc/nameofmyjdbcresource", ds);
        } catch (NamingException ex) {
            Logger.getLogger(MyDAOTest.class.getName()).log(Level.SEVERE, null, ex);
        }

    } 
```

例外是 javax.naming.NameNotFoundException:remaining name:env

其实我觉得在server里面，一旦new InitialContext()，之前在client里面create subcontext都清楚了，是吗？

# android - 如何在android中解析json解析中的有限记录

> ID：11219890
> 
> 赞同：0
> 
> 时间：2012-06-27T05:23:43.620
> 
> 标签：android

我想做的第一件事是在我的应用程序列表活动中添加一个进度对话框。该活动并不耗时（无论如何也不多），但是当活动从 json 解析中解析数据并嵌入到 listactivity 中时，您不希望 UI 无响应，给用户留下不好的印象。请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:27:11.220

在解析数据时使用 AsyncTask 显示进度对话框

```
private class DownloadingProgressTask extends
        AsyncTask<String, Void, Boolean> {

    private ProgressDialog dialog = new ProgressDialog(ShowDescription.this);

    /** progress dialog to show user that the backup is processing. */

    /** application context. */

    protected void onPreExecute() {
         this.dialog.setMessage("Please wait");
         this.dialog.show();

    }

    protected Boolean doInBackground(final String... args) {
        try {
            downloadFile(b.getString("URL"));
            return true;
        } catch (Exception e) {
            Log.e("tag", "error", e);
            return false;
        }
    }

    @Override
    protected void onPostExecute(final Boolean success) {

         if (dialog.isShowing()) {
         dialog.dismiss();
         }

        if (success) {
            Toast.makeText(ShowDescription.this,
                    "File successfully downloaded", Toast.LENGTH_LONG)
                    .show();
            //imgDownload.setVisibility(8);
        } else {
            Toast.makeText(ShowDescription.this, "Error", Toast.LENGTH_LONG)
                    .show();
        }
    }

} 
```

# java - Java中是否有类似于grep()的过滤方法？

> ID：11219893
> 
> 赞同：3
> 
> 时间：2012-06-27T05:23:58.660
> 
> 标签：java, functional-programming, arraylist

我正在编写一个小型应用程序，它需要在许多不同的列表上执行一项常见任务：按给定条件过滤对象。

例如，有一个类的 ArrayList`Foo`具有属性`int bar`和`boolean baz`：

```
class Foo {
    int bar;
    boolean baz;
} 
```

`bar > 1`我想从该 ArrayList中检索一个仅包含与给定条件（例如）匹配的对象的新列表。在 Perl 等其他语言中，我只是`grep()`用来获取所有这些对象：

```
@where_bar_greater_one = grep { $_->{bar} > 1 } @list; 
```

但是使用 Java 似乎并不那么容易。现在我已经用一个静态方法模拟了这种行为，该方法使用匿名内部类遍历所有元素：

```
interface ListPredicate<T> {
    boolean match(T item);
} 
```

```
class ListUtil {
    public static <T> List<T> grep(List<T> source, ListPredicate<T> predicate) {
        ArrayList<T> results = new ArrayList<T>();
        for(T item : source) {
            if(predicate.match(item)) results.add(item);
        }
        return results;
    }
} 
```

```
ArrayList<Foo> found = new ArrayList<Foo>(ListUtil.grep(list, new ListPredicate<Foo>() {
    @Override public boolean match(Foo item) {
        return item.bar > 1 ? true : false;
    }
})); 
```

与一小段 Perl 相比，这段代码看起来相当臃肿，我想知道我是否没有遗漏一些东西。所以这给我留下了两个问题：

1.  在不使用任何外部库的情况下，是否有更短（也许更清洁）的方法来做到这一点？
2.  是否有推荐的开源库为此类常见的高阶函数（如`grep`、`foldLeft`、`reduceLeft`等`map`......）提供方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:14:38.280

您可以使用[JFilter](http://code.google.com/p/jfilter/) 来查询 java 集合。

另一种选择是将[Commons Collections](http://commons.apache.org/collections/)与谓词一起使用（如此[处](https://discursive.atlassian.net/wiki/display/CJCOOK/Filtering+a+Collection+with+a+Predicate)所述）

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:03:47.350

或者您可以将[grep4j](https://code.google.com/p/grep4j)用于 java greps。（也适用于远程文件）

# php - Facebook Graph API，帖子不起作用

> ID：11219898
> 
> 赞同：0
> 
> 时间：2012-06-27T05:24:22.327
> 
> 标签：php, facebook

我的 php 应用程序运行良好，执行其他一些 Graph API 函数。

但是，以下行：

```
$ret = $facebook->api("/1036102643/posts", "post", array('message'=>'This is a test 
message', 'caption'=>'test message')); 
```

产生：

致命错误：未捕获的 GraphMethodException：不支持的发布请求。在第 1106 行扔进 /home/content/html/idvault/php-sdk/base_facebook.php

为什么我会收到此错误？我是否缺少必填字段（但 API 没有提及）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T05:36:46.893

在 js sdk 中，它的 /me/feed 或 /a_group_id/feed

```
$ret = $facebook->api("/me/feed", "post", array('message'=>'This is a test 
message', 'caption'=>'test message')); 
```

# php - Doctrine 2 和 codeigniter 2，如何使用生成的代码

> ID：11219902
> 
> 赞同：0
> 
> 时间：2012-06-27T05:24:50.573
> 
> 标签：php, codeigniter, doctrine

在 CodeIgniter 工作了几个月，在 Doctrine 工作了几个月。我最近使用[https://github.com/wildlyinaccurate/CodeIgniter-2-with-Doctrine-2](https://github.com/wildlyinaccurate/CodeIgniter-2-with-Doctrine-2)作为基础并使用`generate_classes()`函数（*application/libraries/Doctrine.php，在构造函数结束前调用一次）从 mysql 表/列定义实体，在创建实体后评论它）*：

**应用程序/库/Doctrine.php**

```
<?php
use Doctrine\Common\ClassLoader,
    Doctrine\ORM\Configuration,
    Doctrine\ORM\EntityManager,
    Doctrine\Common\Cache\ArrayCache,
    Doctrine\DBAL\Logging\EchoSQLLogger,
    Doctrine\ORM\Mapping\Driver\DatabaseDriver,
    Doctrine\ORM\Tools\DisconnectedClassMetadataFactory,
    Doctrine\ORM\Tools\EntityGenerator;
/**
 * CodeIgniter Smarty Class
 *
 * initializes basic doctrine settings and act as doctrine object
 *
 * @final   Doctrine
 * @category    Libraries
 * @author  Md. Ali Ahsan Rana
 * @link    http://codesamplez.com/
 */
class Doctrine
{
  /**
   * @var EntityManager $em
   */
  public $em = null;

  /**
   * constructor
   */
  public function __construct()
  {
    // load database configuration from CodeIgniter
    require APPPATH . 'config/database.php';

    // Set up class loading. You could use different autoloaders, provided by your favorite framework,
    // if you want to.
    require_once APPPATH . 'libraries/Doctrine/Common/ClassLoader.php';

    $doctrineClassLoader = new ClassLoader('Doctrine', APPPATH . 'libraries');
    $doctrineClassLoader->register();
    $entitiesClassLoader = new ClassLoader('models', rtrim(APPPATH, "/"));
    $entitiesClassLoader->register();
    $proxiesClassLoader = new ClassLoader('Proxies', APPPATH . 'models');
    $proxiesClassLoader->register();

    // Set up caches
    $config = new Configuration;
    $cache  = new ArrayCache;
    $config->setMetadataCacheImpl($cache);
    $driverImpl = $config->newDefaultAnnotationDriver(array(
      APPPATH . 'models/Entities'
    ));
    $config->setMetadataDriverImpl($driverImpl);
    $config->setQueryCacheImpl($cache);

    // Proxy configuration
    $config->setProxyDir(APPPATH . 'models/proxies');
    $config->setProxyNamespace('Proxies');

    // Set up logger
    //$logger = new EchoSQLLogger;
    //$config->setSQLLogger($logger);

    $config->setAutoGenerateProxyClasses(TRUE);
    // Database connection information
    $connectionOptions = array(
      'driver' => 'pdo_mysql',
      'user' => $db['default']['username'],
      'password' => $db['default']['password'],
      'host' => $db['default']['hostname'],
      'dbname' => $db['default']['database']
    );

    // Create EntityManager
    $this->em = EntityManager::create($connectionOptions, $config);

    /* Generate entity objects automatically from mysql db tables. Run once.
     * http://codesamplez.com/development/using-doctrine-with-codeigniter
     */
    //$this->generate_classes();
  }

  /**
   * generate entity objects automatically from mysql db tables
   * @return none
   */
  function generate_classes()
  {
    $this->em->getConfiguration()->setMetadataDriverImpl(new DatabaseDriver($this->em->getConnection()->getSchemaManager()));

    $cmf = new DisconnectedClassMetadataFactory();
    $cmf->setEntityManager($this->em);
    $metadata  = $cmf->getAllMetadata();
    $generator = new EntityGenerator();

    $generator->setUpdateEntityIfExists(true);
    $generator->setGenerateStubMethods(true);
    $generator->setGenerateAnnotations(true);
    $generator->generate($metadata, APPPATH . "models/Entities");

  }

} 
```

生成的文件：

**应用程序/模型/实体/Customers.php**

```
<?php
use Doctrine\ORM\Mapping as ORM;
/**
 * Customers
 *
 * @ORM\Table(name="customers")
 * @ORM\Entity
 */
class Customers
{
  /**
   * @var integer $idCustomer
   *
   * @ORM\Column(name="id_customer", type="integer", nullable=false)
   * @ORM\Id
   * @ORM\GeneratedValue(strategy="IDENTITY")
   */
  private $idCustomer;

  /**
   * @var string $customerName
   *
   * @ORM\Column(name="customer_name", type="string", length=62, nullable=false)
   */
  private $customerName;

  /**
   * @var CustomerAges
   *
   * @ORM\ManyToOne(targetEntity="CustomerAges")
   * @ORM\JoinColumns({
   *   @ORM\JoinColumn(name="id_customer_age", referencedColumnName="id_customer_age")
   * })
   */
  private $idCustomerAge;

  /**
   * Get idCustomer
   *
   * @return integer 
   */
  public function getIdCustomer()
  {
    return $this->idCustomer;
  }

  /**
   * Set customerName
   *
   * @param string $customerName
   * @return Customer
   */
  public function setCustomerName($customerName)
  {
    $this->customerName = $customerName;
    return $this;
  }

  /**
   * Get customerName
   *
   * @return string 
   */
  public function getCustomerName()
  {
    return $this->customerName;
  }

  /**
   * Set idCustomerAge
   *
   * @param CustomerAges $idCustomerAge
   * @return Customers
   */
  public function setIdCustomerAge(\CustomerAges $idCustomerAge = null)
  {
    $this->idCustomerAge = $idCustomerAge;
    return $this;
  }

  /**
   * Get idCustomerAge
   *
   * @return CustomerAges 
   */
  public function getIdCustomerAge()
  {
    return $this->idCustomerAge;
  }
} 
```

**应用程序/模型/实体/Customer_ages.php**

```
<?php
use Doctrine\ORM\Mapping as ORM;
/**
 * CustomerAges
 *
 * @ORM\Table(name="customer_Ages")
 * @ORM\Entity
 */
class CustomerAges
{
  /**
   * @var integer $idCustomerAge
   *
   * @ORM\Column(name="id_customer_Age", type="integer", nullable=false)
   * @ORM\Id
   * @ORM\GeneratedValue(strategy="IDENTITY")
   */
  private $idCustomerAge;

  /**
   * @var integer $AgeNumber
   *
   * @ORM\Column(name="Age_number", type="integer", nullable=false)
   */
  private $AgeNumber;

  /**
   * Get idCustomerAge
   *
   * @return integer 
   */
  public function getIdCustomerAge()
  {
    return $this->idCustomerAge;
  }

  /**
   * Set AgeNumber
   *
   * @param integer $AgeNumber
   * @return CustomerAges
   */
  public function setAgeNumber($AgeNumber)
  {
    $this->AgeNumber = $AgeNumber;
    return $this;
  }

  /**
   * Get AgeNumber
   *
   * @return integer 
   */
  public function getAgeNumber()
  {
    return $this->AgeNumber;
  }
} 
```

**编辑：**如何将它用于相关表的[CRUD 操作？](http://www.phpandstuff.com/articles/codeigniter-doctrine-day-5-database-crud)我知道，阅读用户指南，但是（例如）如果`$post = $entityManager->find("Customers", $idCustomer);`是单行，哪个函数/语法返回所有行（和相关行）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T08:25:12.043

以下代码应该为您提供表中的所有行。

```
$em->getRepository('Customers')->findAll(); 
```

# lotus-notes - @UrlQueryString 不适用于 http://www.myserver.com/foo.nsf/&L=EN

> ID：11219907
> 
> 赞同：1
> 
> 时间：2012-06-27T05:25:57.177
> 
> 标签：lotus-notes, lotus-domino, lotus-formula

我正在创建一个自定义的常规错误消息（在将替换标准 HTTP404 的 domcfg 中）我想获取 URL 上的参数，所以我使用 @UrlQueryString。它适用于具有以下语法的 URL：
[http://www.myserver.com/foo.nsf/&L=EN](http://www.myserver.com/foo.nsf/&L=EN)
对于此 URL，@UrlQueryString 返回和空字符串。

问题：如何在格式错误的 URL 中获取 URL 的参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:54:29.767

服务器变量 PATH_INFO 将告诉您当前 URL 是什么。

在此处查看有关服务器变量的更多信息： [http ://www.angelfire.com/ult/tipslotusnotes/Special%20Fields,%20Reserved%20Fields%20and%20Special%20Design%20Elements.htm](http://www.angelfire.com/ult/tipslotusnotes/Special%20Fields,%20Reserved%20Fields%20and%20Special%20Design%20Elements.htm)

# asp.net-mvc-3 - ASP.NET MVC 3 XML 序列化：从对象属性名称序列化元素名称中的破折号？

> ID：11219908
> 
> 赞同：1
> 
> 时间：2012-06-27T05:26:02.357
> 
> 标签：asp.net-mvc-3, c#-4.0, xml-serialization

[Trulia 的开发指南](http://static.trulia-cdn.com/resources/TruliaDevGuide.pdf)在其元素名称中使用破折号。假设我创建了一个名称相似但使用下划线而不是破折号的对象，我是否需要使用[XmlWriter](http://msdn.microsoft.com/en-us/library/tx3wa6ka.aspx)创建一个自定义 XML 序列化程序来用破折号替换下划线，或者是否有更简单的方法来做到这一点？（就像是`.WriteElementString("street-address", myObject.street_address);`

示例 XML：

```
<location>
    <street-address>1234 Lane</street-address>
    <city-name>Midway</city-name>
    <state-code>GA</state-code>
    <zipcode>31320</zipcode>
    <display-address>true</display-address>
</location> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T06:10:28.923

您可以在序列化 POCO 和反序列化 XML 时使用属性，如下所示：

```
[XmlElement("street-address")]
public string StreetAddress { get; set; }

[XmlElement("city-name")]
public string CityName { get; set; } 
```

# python - PyQt 的曲线控制

> ID：11219920
> 
> 赞同：1
> 
> 时间：2012-06-27T05:27:22.947
> 
> 标签：python, pyqt, qwidget, maya

pyqt 中是否有任何曲线控制？我附上了一张基于 maya gradientControl 的图像。我正在寻找与 pyqt 类似的东西，我想在其中编辑曲线，并且每次编辑都应该触发一些信号。现在我可以使用 sip 并且可以将 maya gradientControl 包装到我的 pyqt 窗口中，但它确实没有按预期工作。这是我正在尝试的代码。它只是一个 QWidget 所以当我在曲线上添加一个点时很难找到发生了什么。

```
import os
import maya.cmds as cmds
import maya.mel as mel
import maya.OpenMayaUI as mui
import sys
import sip
from PyQt4 import QtGui, QtCore, uic
baseUI = os.path.join(os.path.dirname(__file__), "range_ctrl.ui")
baseUIClass, baseUIWidget = uic.loadUiType(baseUI)

def getMayaWindow():
    windowPointer = mui.MQtUtil.mainWindow()
    return sip.wrapinstance(long(windowPointer), QtCore.QObject)

def convertToQT(controlName):
    controlPoniter = mui.MQtUtil.findControl(controlName)
    if controlPoniter is not None:
        return sip.wrapinstance(long(controlPoniter), QtCore.QObject)

class MayaRangeCtrl(baseUIWidget, baseUIClass):
    def __init__(self, parent=getMayaWindow()):
        super(baseUIWidget, self).__init__(parent)
        self.setupUi(self)
        self.setObjectName("mayaRangeCtrl")
        self.setWindowTitle("Range Control")
        self.p1_vbox = QtGui.QVBoxLayout(self.frame)
        self.range_ctr = cmds.gradientControlNoAttr( 'mayaaaa', h=90)
        mayaQTObj = convertToQT(self.range_ctr)
        self.p1_vbox.addWidget(mayaQTObj)
        self.setCentralWidget(self.frame)
        self.show()

def main():
    myWindow = MayaRangeCtrl()

def run():
    main() 
```

这是屏幕截图。

![在此处输入图像描述](../Images/09284a84ca79739efb15d03071e6e535.png)

并且 ui 包含一个 mian 窗口和一个 QFrame。这是玛雅[文档](http://download.autodesk.com/global/docs/maya2013/en_us/CommandsPython/gradientControlNoAttr.html)

但我正在寻找一些纯 QT 小部件或一些想法，我们可以如何实现它。我尝试使用 QPolygon，但不知道如何操作控制点运行时间。任何的想法 ？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:56:43.547

因为渐变控件是在 Maya 代码的 C++ 端编写的，所以没有像您可能已经发现的那样（据我所知）作为 PyQt4 小部件的公共接口。

sip 将给你的是一个 QWidget 参考，它可以让你根据需要重新设置它并将其放置在你的应用程序中。但至于从那里开始使用它，你最好的办法是连接到[梯度控制的python命令回调](http://download.autodesk.com/us/maya/2010help/CommandsPython/gradientControlNoAttr.html)

```
cmds.gradientControlNoAttr(self.range_ctr, e=True, changeCommand=self.myCallback) 
```

如果可用的回调对`gradientControlNoAttr`您来说还不够，那么恐怕您将不得不使用您自己的绘制事件（或使用 QGraphics 类）来滚动您自己的自定义小部件。

# jquery - 需要在 jquery 中减少/简化此代码

> ID：11219921
> 
> 赞同：0
> 
> 时间：2012-06-27T05:27:29.707
> 
> 标签：jquery, jquery-ui

在这里，我添加了 asp.net 代码和全局变量以及元素的 jquery 条件，这段代码对我来说很好，但我想简化这段代码。有人可以帮忙吗？

## ASP.NET

```
 <div class="toggle_container">
            <p>
                <asp:HiddenField ID="hdnIsSwipe" runat="server" />
                <asp:Label ID="lblPaymentType" runat="server" Text="<span>*</span> Payment Type"
                    AssociatedControlID="ddlPaymentType"></asp:Label>
                <asp:DropDownList ID="ddlPaymentType" runat="server">
                </asp:DropDownList>
            </p>
            <p>
                <asp:Label ID="lblAccountNumber" runat="server" Text="<span>*</span> Account Number"
                    AssociatedControlID="txtAccountNumber"></asp:Label>
                <asp:TextBox ID="txtAccountNumber" runat="server" MaxLength="17" Style="width: 155px;"></asp:TextBox>
                <asp:HiddenField ID="hdnAccountNo" runat="server" />
                <asp:LinkButton ID="btnSwipe" runat="server" CausesValidation="false" OnClientClick="tb_show('Swipe','#TB_inline?height=155&width=300&inlineId=hiddenModalContent&modal=false');return false;"
                    Visible="true" Text="Swipe" CssClass="btnSwipe">

                </asp:LinkButton>
                <input id="btnClear" type="button" class="btnClear" name="Click and clear Account Data" />
            </p>
            <p>
                <asp:Label ID="lblAmount" runat="server" Text="<span>*</span> Amount" AssociatedControlID="txtAmount"></asp:Label><asp:TextBox
                    ID="txtAmount" runat="server" MaxLength="8"></asp:TextBox>
            </p>

            <p>
                <asp:Label ID="lblCVV2" runat="server" Text="CVV2" AssociatedControlID="txtCVV2"></asp:Label><asp:TextBox
                    ID="txtCVV2" runat="server" MaxLength="4"></asp:TextBox></p>
            <p>
                <asp:Label ID="lblReferenceNumber" runat="server" Text="Reference Number" AssociatedControlID="txtReferenceNumber"></asp:Label><asp:TextBox
                    ID="txtReferenceNumber" runat="server" MaxLength="50"></asp:TextBox></p>
            <p>
                <asp:Label ID="lblSaleTaxAmount" runat="server" Text="<span>*</span> Sale Tax Amount"
                    AssociatedControlID="txtSaleTaxAmont">
                </asp:Label><asp:TextBox ID="txtSaleTaxAmont" runat="server" MaxLength="10"></asp:TextBox></p>
            <p>
                <asp:Label ID="lblPoNumber" runat="server" Text="<span>*</span> PO Number" AssociatedControlID="txtPoNumber">
                </asp:Label><asp:TextBox ID="txtPoNumber" runat="server" MaxLength="20"></asp:TextBox></p>
            <p>
                <asp:Label ID="lblTaxType" runat="server" Text="<span>*</span> Tax Type" AssociatedControlID="ddlTaxType"></asp:Label>
                <asp:DropDownList ID="ddlTaxType" runat="server">
                </asp:DropDownList>
            </p>
        </div> 
```

## 全局变量

```
 var lblSaleTaxAmount = '#<%=lblSaleTaxAmount.ClientID %>';
    var txtSaleTaxAmont= '#<%=txtSaleTaxAmont.ClientID %>';
    var lblPoNumber = '#<%=lblPoNumber.ClientID %>';
    var txtPoNumber= '#<%=txtPoNumber.ClientID %>';
    var lblTaxType = '#<%=lblTaxType.ClientID %>';
    var ddlTaxType ='#<%=ddlTaxType.ClientID %>'; 
```

## jQuery代码

```
 $(ddlPaymentType).change(function(){
        if($(ddlPaymentType).val()=='1' || $(ddlPaymentType).val()=='-1'  )
        {
            $(lblSaleTaxAmount).hide();
            $(txtSaleTaxAmont).hide();
            $(lblPoNumber).hide();
            $(txtPoNumber).hide();
            $(lblTaxType).hide(); 
            $(ddlTaxType).hide(); 

            $("label[for='ContentSection_txtSaleTaxAmont']").hide(); 
            $("label[for='ContentSection_txtPoNumber']").hide();  
        }
        else
        {
            $(lblSaleTaxAmount).show();  
            $(txtSaleTaxAmont).show();
            $(lblPoNumber).show(); 
            $(txtPoNumber).show();
            $(lblTaxType).show(); 
            $(ddlTaxType).show();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T05:30:32.293

您可以`hide()`通过将所有选择器放在一起用逗号分隔来使用一个功能：

```
$(lblSaleTaxAmount, 
  txtSaleTaxAmont, 
  lblPoNumber, 
  txtPoNumber, 
  lblTaxType, 
  ddlTaxType)
.hide(); 
```

或者，如果您将它们放在父元素中，例如`div#foo`，您只需执行以下操作：

```
$('#foo').children().hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T05:31:48.317

如果您需要一次隐藏标签和文本，您可以在其`<div>`周围添加标签并使用 div 的 id 一次隐藏标签和文本

编辑：新评论后的附加信息

您还可以向需要立即隐藏的控件添加一个类。就像示例添加一个带有 name 的类`hidinggroup`。然后在您的 CSS（假设您使用 CSS）中为用于隐藏的第二个类创建一个条目，例如`.hideme { ... }`

要隐藏项目，您可以执行以下操作

```
 $('.hidinggroup').addClass('hideme'); 
```

要取消隐藏它们，您可以这样做

```
 $('.hidinggroup').removeClass('hideme'); 
```

该类`hideme`必须包含用于以您想要的方式隐藏控件的标记......例如`visibility: hidden;`或`display: none;`

# linq - 分组所需的 Linq 表达式

> ID：11219922
> 
> 赞同：0
> 
> 时间：2012-06-27T05:27:37.850
> 
> 标签：linq

我有一个“A”类列表，有两个属性 qty 和 groupId.eg

```
      数量组 ID
       8 1
       2 2
       2 3
       1 4
       3 5

```

我需要根据一个因子值对它进行分组。例如让因子值=4。基于这个因子值组看起来像：

```
     数量组 ID
      4 1 - 组 1
      4 1 - 组 2
      2 2 -|
      2 3 -| 组3
      1 4 -|  
      3 5 -| 第 4 组   

```

我需要一个 linq 表达式。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:16:00.257

通常，linq 中的分组是通过调用方法 GroupBy() 来完成的，其中 lambda 表达式说明如何分组。

[http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)

```
// your list
IList<ClassA> listToGroup = new List<ClassA>(){ ... your items ...};
// Factor
int factor = 4;
// group the list by Qty value of the ClassA-items
var resultOfGrouping = listToGroup.GroupBy(a => a.Qty * factor == 8); 
```

Hth 托比

# c# - 不同的内置图像抽象的优点是什么？

> ID：11219924
> 
> 赞同：3
> 
> 时间：2012-06-27T05:27:53.993
> 
> 标签：c#, wpf, image, drawing, imagesource

在我的应用程序中，我想在不同的地方显示小图像。

我使用不同的内置类型来表示这些图像，但我很好奇是否有一个“最好的”表示。

对于上下文：

这些图像由存储在数据库中的部分组成。

目前我`ImageSource`在这里使用，以及`Drawing`用于组成图像。

为了将这些图像发送到 UI，我使用一个`Image`with Source 设置为`ImageSource`来自 ImageComposition 的整体（它正在执行与数据库相关的工作并将“整体”图像组合在一起）。然后`Image`将其推入`ContentControl`. 这些图像出现在应用程序的不同位置，需要缩放以适应这些位置。

因为我有所有可用的源代码并且可以随意更改它：

**最有优势的抽象是什么？**（例如应用程序中的 UI 渲染 <==> 渲染）。

目前可能有：`ImageSource`, `Image`,`Drawing`甚至`Control`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:19:17.697

目前您正在执行至少两个图像处理操作：

*   [图像翻译](http://en.wikipedia.org/wiki/Translation_%28geometry%29)
*   [图像缩放](http://en.wikipedia.org/wiki/Image_scaling)

如果在不久的将来你需要做一些其他的图像处理任务——比如图像对比度调整或者你可能需要稍微旋转一下图像？

所以关键是.NET 没有用于图像处理任务的集成解决方案。我最好建议集成图像处理 .NET 库，例如[ImageMagic.Net](http://imagemagick.codeplex.com/)，因为它是手头工作的正确工具。

# spring - springSecurityFilterChain 如何跳过已登录请求的身份验证

> ID：11219925
> 
> 赞同：1
> 
> 时间：2012-06-27T05:28:02.157
> 
> 标签：spring, spring-security, httpwebrequest

我一直在从事 spring security 工作，一切都运行良好。但我只是去调试它是如何工作的。所有过滤器都通过 http 命名空间为 springsecurityfilterchain 配置。其中之一是用于提供身份验证的身份验证过滤器。我发现当一个新的登录请求到来时（没有以前的会话），身份验证过滤器被调用，但是当请求来自已经登录的用户时，即一个会话存在，那么身份验证过滤器不会被调用。我找不到“springsecurity”在哪里以及如何跳过已登录请求的此身份验证。请帮助我理解这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T00:54:57.833

它是由三个组合处理的`Filters`：

*   [`SecurityContextPersistenceFilter`](http://static.springsource.org/spring-security/site/apidocs/org/springframework/security/web/context/SecurityContextPersistenceFilter.html)它[`Authentication`](http://static.springsource.org/spring-security/site/apidocs/org/springframework/security/core/Authentication.html) 从会话中获取（如果存在）并将其放在本地线程中，`SecurityContextHolder`以便其他过滤器可以看到它。

*   如果没有`Authentication`在[`SecurityContextHolder`](http://static.springsource.org/spring-security/site/apidocs/org/springframework/security/core/context/SecurityContextHolder.html)中[`AnonymousAuthenticationFilter`](http://static.springsource.org/spring-security/site/apidocs/org/springframework/security/web/authentication/AnonymousAuthenticationFilter.html)添加[`AnonymousAuthenticationToken`](http://static.springsource.org/spring-security/site/apidocs/org/springframework/security/authentication/AnonymousAuthenticationToken.html)一个`SecurityContextHolder`。

*   [`FilterSecurityInterceptor`](http://static.springsource.org/spring-security/site/apidocs/org/springframework/security/web/access/intercept/FilterSecurityInterceptor.html)`Authentication`如果中的`SecurityContextHolder`没有`ROLE_USER`当前请求的适当权限（例如 ），则引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:01:38.023

`httpSessionIntegrationFilter`照顾这个。它负责维护来自同一用户的请求之间的会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:26:18.130

我认为 SessionManagementFilter 可以解决这个问题：

```
 if (!securityContextRepository.containsContext(request)) {
        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();

        if (authentication != null && !authenticationTrustResolver.isAnonymous(authentication)) {
         // The user has been authenticated during the current request, so call the session strategy
            try {
                sessionAuthenticationStrategy.onAuthentication(authentication, request, response);
            } catch (SessionAuthenticationException e) {
                // The session strategy can reject the authentication
                logger.debug("SessionAuthenticationStrategy rejected the authentication object", e);
                SecurityContextHolder.clearContext();
                failureHandler.onAuthenticationFailure(request, response, e);

                return;
            }
            // Eagerly save the security context to make it available for any possible re-entrant
            // requests which may occur before the current request completes. SEC-1396.
            securityContextRepository.saveContext(SecurityContextHolder.getContext(), request, response);
        } else {
         // No security context or authentication present. Check for a session timeout
            if (request.getRequestedSessionId() != null && !request.isRequestedSessionIdValid()) {
                if(logger.isDebugEnabled()) {
                    logger.debug("Requested session ID " + request.getRequestedSessionId() + " is invalid.");
                }

                if (invalidSessionStrategy != null) {
                    invalidSessionStrategy.onInvalidSessionDetected(request, response);
                    return;
                }
            }
        }
    } 
```

当然，这里还有更多的东西。身份验证存储在 ThreadLocal 中：

> 在 Spring Security 中，存储请求之间的 SecurityContext 的责任落在了 SecurityContextPersistenceFilter 上，它默认将上下文存储为 HTTP 请求之间的 HttpSession 属性。它为每个请求将上下文恢复到 SecurityContextHolder，并且至关重要的是，在请求完成时清除 SecurityContextHolder。出于安全目的，您不应直接与 HttpSession 交互。这样做根本没有理由 - 始终使用 SecurityContextHolder 代替。

因此，SecurityContextPersistenceFilter 负责加载上下文数据（并稍后将其删除），过滤器链中的其他模块将根据这些数据做出决策。（例如跳过或通过 usermanager 服务进行身份验证）

我不是 SpringSecurity 开发人员，因此仅将此信息作为有根据的猜测:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T08:03:02.407

当向安全对象发出请求时，SessionManagementFilter 将查看 SecurityContextRepository。如果其内容与 SecurityContextHolder 匹配，则假定该用户之前已通过身份验证（如记住我或预身份验证）。

如果存储库包含安全上下文，则此过滤器不执行任何操作。

如果它什么都没有并且 ThreadLocal 包含一个身份验证对象，则它假定以前的过滤器已经以某种方式对该用户进行了身份验证。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-14T16:00:00.153

好的问题可能仍然是实际的，因此将尝试回答：

根据我自己的研究，它看起来不像“跳过”。

首先 spring 生成过滤器链。如果您使用弹簧启动 - 只需启用调试并在启动日志中您可以看到整个过滤器链。

每个请求都通过这个链——不管你在“configure”方法和 HttpSecurity 对象中配置了什么。所以你的短语

> 我发现当一个新的登录请求到来时（没有以前的会话），身份验证过滤器被调用，但是当请求已经登录用户时，即一个会话存在，那么身份验证过滤器不会被调用

不是真的。将调用身份验证过滤器，但在 doFilter 内部存在检查请求，如果 URL 不用于登录 - 过滤器调用 doFilter 并“返回”。示例：您将 LoginPage 过滤器配置为“/login POST”。您可以使用不同的凭据将 POST 请求一一发送到 /login，您的应用程序会将会话重写给新用户。因此，如果您不想让用户这样做 - 您可以覆盖过滤器和一些逻辑来检查用户是否登录并调用 doFilter。

# java - 用于 csv 文件的 java.util.Scanner 的正则表达式？

> ID：11219930
> 
> 赞同：1
> 
> 时间：2012-06-27T05:28:22.917
> 
> 标签：java, regex, csv

我想使用`java.util.Scanner`. 第一次尝试看起来很有希望：

```
 Scanner scanner = new Scanner(cFile);
 while (scanner.hasNextLine()) {
    String curLine = scanner.nextLine().trim();
    this.processRow(curLine);
 }

 private void processRow(String workString) {
     Scanner lineScanner = new Scanner(workString);
     lineScanner.useDelimiter(",");
     // .next goes through the elements
     lineScanner.next();
 } 
```

我面临的挑战是生产线`lineScanner.useDelimiter(",");`。我的 CSV 在文本中有逗号并转义了双引号：

```
 Year,Value,Customer,NickName,Rank
 2012,45.56,T3456C,"Mike, \"The Gangster\"",1
 2012,1237.35,"A453F", Joe Armagendon,2
 2012,,X344,"Frank the weasel",3 
```

是否有只过滤分隔符的正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:54:21.357

正如 nhahtdh 所提到的，您实际上应该使用解析器，因为 CSV 的工作方式比示例复杂一些。

那里有很多图书馆。我使用和分叉的一个是[csvfile](http://sourceforge.net/projects/csvfile/)。它非常易于使用并且可以正确完成工作。

# html - 如何强制 div 元素将其内容保留在容器内

> ID：11219931
> 
> 赞同：19
> 
> 时间：2012-06-27T05:28:25.433
> 
> 标签：html, css

我正在制作一个 CSS 菜单。为此，我使用`ul`. 当我`li`向左浮动时，所有`li`的都会超出 ul。我的意思是高度`ul`变为零。左浮动后如何`li`在内部显示。`ul`

一种方法是`div`用一些公共类制作一个标签并添加 clear: both 在css中，但我不想要这个。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-27T05:36:16.613

只需添加`overflow: auto;`到`<ul>`. 这将使文本不会泄漏到 UL 之外。

见：http: [//jsfiddle.net/6cKAG/](http://jsfiddle.net/6cKAG/)

* * *

但是，根据您的操作，制作`<li>` `display: inline;`. 这完全取决于你在做什么！

见：http: [//jsfiddle.net/k7Wqx/](http://jsfiddle.net/k7Wqx/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-27T05:30:08.693

如果你`float`给你的孩子定义，那么你必须清除你的父母。写信`overflow:hidden`给你的 UL。

```
ul{
 overflow:hidden;
} 
```

**或者** 您也可以`clearfix`为此使用方法：

```
ul:after{
 content:'';
 clear:both;
 display:block;
} 
```

阅读此[http://css-tricks.com/snippets/css/clear-fix/](http://css-tricks.com/snippets/css/clear-fix/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-02T09:40:18.790

如果您希望 div 中溢出的文本自动换行而不是隐藏或制作滚动条，请使用

```
word-wrap: break-word 
```

财产。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T05:34:26.163

当浮动元素（菜单项）位于非浮动容器 ( `ul`) 内时，就会发生这种情况。

这可以通过浮动容器来修复（很少接受），或者应用一个明确解决这个问题[的 clearfix 。](https://stackoverflow.com/q/211383/1081234)

# backbone-relational - 骨干关系 ID 引用与骨干.marionette

> ID：11219935
> 
> 赞同：2
> 
> 时间：2012-06-27T05:28:44.497
> 
> 标签：backbone-relational, marionette

我使用骨干关系的 includeInJSON: 'id' 来仅包含相关的模型 ID，以避免向我的服务器端发送整个对象树的垃圾邮件。不幸的是，Backbone.Marionette.View 默认只公开由 toJSON 返回的视图模式的属性，这意味着相关模型不再可以在视图模板中访问。

我意识到我需要一个自定义的 Marionette.View serializeData。由于几乎我所有的模型都需要这个，我希望能通用地解决这个问题；即覆盖所有视图的serializeData，以便它使用主干关系id 引用做正确的事情。

有人已经这样做了吗？我对此并不太抱有希望，但我认为还有其他人可以使用它，所以如果没有别的，一旦我编码了它，这将作为一个倾倒我的解决方案的地方。:)

任何解决方案都需要以下选项之一：

1.  为模型定义两个版本的 toJSON，一个使用 includeInJSON，另一个始终将其视为 true。

2.  通过 Marionette 对视图模板的限制仅使用模型属性和基于属性的助手来打孔的某种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:42:50.763

我有一个使用选项 #1 的功能性解决方案，但它是如此的 hack，我不忍心公开发布它。基本上，在 serializeData 中，我进入模型并在调用 toJSON 之前和之后修改 _relations。不是线程安全和丑陋的。希望尽快回来并找到合适的解决方案。

# iphone - 使用 PopOverController 填充 TableView - Objective C

> ID：11219939
> 
> 赞同：0
> 
> 时间：2012-06-27T05:29:04.290
> 
> 标签：iphone, objective-c, ios, xcode, ipad

> **可能重复：**
> [无法在 PopOverController 中填充 TableView - 目标 C](https://stackoverflow.com/questions/11222148/unable-to-populate-tableview-in-popovercontroller-objective-c)

我正在使用一个称为“按钮”的按钮。单击它时，我想在*PopOverController*的帮助下在*TableView*中显示我的 kkkk 数组中的内容，即我希望弹出一个小 tableView，其单元格显示 kkkk 数组的内容。

 *我正在使用以下代码行::

```
table = [[UITableViewController alloc]init];

popover2 = [[UIPopoverController alloc] initWithContentViewController:table];//Tell which view controller should be shown

[popover2 setPopoverContentSize:CGSizeMake(200, 200)]; // set content size of popover
[popover2 presentPopoverFromBarButtonItem:uploadspace permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; //From where it should "pop"

self.popoverController = popover2;          
popoverController.delegate = self;

NSString *hhDir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
NSString *hhFilePath = [hisDir stringByAppendingPathComponent:@"hh.txt"];

NSArray *array = [NSArray arrayWithContentsOfFile:hhFilePath ];
kkkk = [[NSMutableArray alloc] init];
for (NSDictionary *dict in array) {
    [keys addObjectsFromArray:[dict allkkkk]];

   // NSLog(@"%@ hellooooooooo", [kkkk objectAtIndex:0]);

}
NSLog(@"hiiiiiii");
NSLog(@"%@", [kkkk objectAtIndex:0]);
table.tableView.delegate=self;
table.tableView.delegate = self;

table.tableView = [[UITableView alloc] initWithFrame:[window bounds]];
// Set up the image view and add it to the view but make it hidden
[window addSubview:table.tableView];

//table.hidden = YES;
[window makeKeyAndVisible];
[self.table.tableView reloadData]; 
```

在这里， tView 是*UITableView*，*table*是*UITableViewController*。

我可以在按下“按钮”时弹出 TableView。但是，我无法用我的 kkkk 数组的值填充它。我在谷歌上搜索了很多关于如何填充 TableView ，但我想使用 PopOverController 显示 TableView 是不同的。

谁能帮我整理一下。谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:37:41.047

```
table.dataSource = self;
table.delegate = self; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T05:40:50.967

如上所述，您需要将`DataSource`and设置`Delegate`为`TableView`您的`viewController`. 并在方法中编写代码的后半部分`cellForRowAtIndexPath`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T05:44:25.360

查看下面的链接，它可能会对您有所帮助。

[http://www.raywenderlich.com/1056/ipad-for-iphone-developers-101-uipopovercontroller-tutorial](http://www.raywenderlich.com/1056/ipad-for-iphone-developers-101-uipopovercontroller-tutorial)*

# php - 通过php和主键连接表单

> ID：11219940
> 
> 赞同：0
> 
> 时间：2012-06-27T05:29:07.147
> 
> 标签：php, forms, function, foreign-keys, primary-key

我正在尝试使用其中一个输入作为主键形式来连接表单。

例如，

---采用主键的第一种形式

```
form1.php 
```

---第二种形式，其中page1基于来自form1的输入

```
form2.php?page1=primary key 
```

--- 第三种形式，其中 page1 基于来自 form2 的输入

```
form3.php?page2=primary key 
```

---第四种形式，其中page2为page1

```
form4.php?page3=primary key 
```

---第四种形式，其中page3为page2

以此类推，直到最后一页。我的问题是如何连接它们？我如何检索主文件并将其传递给所有涉及的表单？到目前为止，我只能将主键传递给form2，当它到达form3时，它就会消失。

顺便说一句，在完成每个表单之后，它会进入一个流程页面。

---下面是示例表单的代码

```
<form id="form1" name="form1" method="post" action="eval_2.php">
            <table width="100%" border="0" cellpadding="2" cellspacing="0">

            <tr>
            <td width="70%">
            <strong>1\. Quality of Work </strong><br />
            - refers to his/her ability to work with thoroughness.
            </td>
            <td align="center"> <select name="qualityremark">
              <option>Select Remark</option>
              <option>O</option>
              <option>VS</option>
              <option>S</option>
              <option>US</option>
              <option>P</option>
            </select></td>
            </tr>

            <tr>
            <td width="70%" height="10%"> &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; a. Works outstandingly accurate and complete in details</td>
            <td width="30%" align="left"> O - Outstanding </td>
            </tr>
            <tr>
            <td width="70%"> &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; b. Does thorough work; rarely commit errors</td>
            <td width="30%" align="left"> VS - Very Satisfactory </td>
            </tr>
            <tr>
            <td width="70%"> &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; c. Fairly completes work with few errors</td>
            <td width="30%" align="left"> S - Satisfactory </td>
            </tr>
            <tr>
            <td width="70%"> &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; d. Work is often incomplete, inaccurate</td>
            <td width="30%" align="left"> US - Unsatisfactory</td>
            </tr>
            <tr>
            <td width="70%"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;e. Very careless work; errors frequently repeated</td>
            <td width="30%" align="left"> P - Poor</td>
            </tr>
            <tr>
            <td> Comments: </td>
            <td></td>
            </tr>
            <tr>
            <td><textarea name="qualitycomment" cols="80" rows="5" id="qualitycomment"></textarea></td>
            </tr>
            </table>    
            <tr>
            <td></td>
            <td><div align="right">
            <a href="performanceeval.php">Back</a>&nbsp;|&nbsp;
            <!--<a href="performanceeval3.php">Next</a> -->
            <input type="submit" value="Next" name="next" id="next" class="silver_button"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div></td>
            </tr><br /> 
            </form> 
```

---下面是流程页面的代码

```
require_once("dbconnect_gentemplate.php");
require_once("attendanceClass.php");

$newAcct= new attendance();
$m=$newAcct->eval_2();

$current=$_GET['page1'];

header("Location: performanceeval3.php?page2=$current"); 
```

---下面是函数的代码

```
function eval_2(){ //page 2

$current=$_GET['page1'];

// $command="select recentact from ojt_evaluation";
// $commando=mysql_query($command) or die("Error ".mysql_error());
// $commander=mysql_fetch_array($commando);

// $current=$commander['recentact'];
// $cur=md5($current);

 if(isset($_POST['next'])){ 
    $qualityremark=$_POST['qualityremark'];
    $qualitycomment=$_POST['qualitycomment'];

    if(trim($qualityremark)=="") return  "<p>Error creating account;blank qualityremark</p>";

    $sql="update ojt_evaluation set qualityremark='$qualityremark', qualitycomment='$qualitycomment' where student='$current'";

    $query=mysql_query($sql)or die ("Error".mysql_error());
    }
    // header("Location: performanceeval3.php?session=$current");
} 
```

我哪里做错了？我该怎么办？帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T05:38:57.133

我认为您没有传递任何查询字符串

在下面的变量中将为 null 没有分配给 page1 的参数值

```
 $current=$_GET['page1']; 
```

还有一个认为提交按钮会点击加载中的表单动作

你可以试试这个

```
<form id="form1" name="form1" method="post" action="eval_2.php?page1=form1"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:20:17.563

您没有正确实例化变量。

```
header("Location: performanceeval3.php?page2=$current"); 
```

试试这个

```
header('Location: performanceeval3.php?page2=' . $current . '); 
```

# python - Python：如何在列表列表中追加新元素？

> ID：11219949
> 
> 赞同：6
> 
> 时间：2012-06-27T05:29:41.407
> 
> 标签：python, list

这是一个非常简单的程序：

```
 a = [[]]*3

 print str(a)

 a[0].append(1)
 a[1].append(2)
 a[2].append(3)

 print str(a[0])
 print str(a[1])
 print str(a[2]) 
```

这是我期待的输出：

```
 [[], [], []]
 [1]
 [2]
 [3] 
```

但相反，我得到了这个：

```
 [[], [], []]
 [1, 2, 3]
 [1, 2, 3]
 [1, 2, 3] 
```

真的有什么我不明白的！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T05:31:19.500

你必须做

```
a = [[] for i in xrange(3)] 
```

不是

```
a = [[]]*3 
```

现在它起作用了：

```
$ cat /tmp/3.py
a = [[] for i in xrange(3)]

print str(a)

a[0].append(1)
a[1].append(2)
a[2].append(3)

print str(a[0])
print str(a[1])
print str(a[2])

$ python /tmp/3.py
[[], [], []]
[1]
[2]
[3] 
```

当你做类似的事情时，`a = [[]]*3`你会在一个列表中得到相同的列表`[]`三次。*这同样*意味着当您更改其中一个时，您会更改所有这些（因为只有一个列表被引用了 3 次）。

您需要创建三个独立的列表来规避这个问题。你可以通过列表理解来做到这一点。您在这里构造一个由独立的空列表组成的列表`[]`。每次迭代都会创建新的空列表（在这种情况下，和`xrange(3)`之间的区别并不那么重要；但更好一点，因为它不会生成完整的数字列表，而是返回一个迭代器对象）。`range``xrange``xrange`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T05:33:32.827

当你写：

```
a = [[]]*3 
```

您不会制作内部空列表的 3 个副本，而是对同一个对象进行 3 次引用。

同样的方式，如果你这样做：

```
b = [1,2,3]
c = b
c.append(4)
print b 
```

你得到作为输出：

```
[1, 2, 3, 4] 
```

那是因为 b 和 c 是对同一个列表的两个不同的引用（您可能会说两个不同的名称）。您可以从任何引用更改对象，但您会看到所有引用的结果，因为它们指向同一事物。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-27T05:34:41.420

您的方法的基本问题是，当您将列表乘以三时，结果列表包含三个*相同的列表*。所以`a[0]`, `a[1]`, 和`a[2]`都引用同一个东西。当您附加到其中任何一个时，您将附加到同一个列表。这就是为什么你的`append()`电话的效果似乎是三倍的。

相反，在不引用相同列表的情况下生成列表列表。例如，您可以像这样使用列表推导。

```
[[] for i in range(3)] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T06:03:30.580

这会给你一个清晰的想法，在 l 所有对象都具有相同的 id() 并且都是可变的，因此编辑其中任何一个也将自动编辑另一个，因为它们都只是对 id=18671936 和 in 的同一对象的引用m都有不同的id()，所以它们都是不同的对象。

```
>>> l = [[]]*4
>>> for x in l:
        print(id(x))

18671936 
18671936
18671936
18671936

>>> m=[[],[],[],[]]
>>> for x in m:
        print(id(x))

10022256
18671256
18672496
18631696 
```

所以，你应该像这样创建你的列表：

```
>>> a=[[] for _ in range(4)]
>>> a[0].append(1)
>>> a[2].append(5)
>>> a
[[1], [], [5], []] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T05:39:43.490

> 真的有什么我不明白的！

`a = [[]]*3`这里的问题是您将列表设置为相同的引用，因为数组和字典都存储为引用。

```
>>> a = [[]]*3
>>> a[0] is a[1] or a[0] is a[2]
True
>>> a[0] is a[1] or a[0] is a[2] or a[1] is a[2]
True
>>> 
```

如果你做 a = [{}]*3`，也会发生同样的事情

因此，您必须小心，您可以执行列表理解`[[] for _ in xrange(3)]`或静态定义所有 3 个数组`[[], [], []]`。

```
>>> a = [[] for _ in xrange(3)]
>>> a[0] is a[1] or a[0] is a[2] or a[1] is a[2]
False
>>> 
```

# asp.net - 在另一个 Web 应用程序中访问虚拟目录

> ID：11219955
> 
> 赞同：0
> 
> 时间：2012-06-27T05:30:11.750
> 
> 标签：asp.net, directory, virtual

我在同一个解决方案中有两个 Web 应用程序项目（项目 A 和项目 B）。

我希望能够：通过项目A，将文件保存在项目B目录中的某处。

每当我使用 Server.MapPath 等时，它都会解析为项目 A 的虚拟目录，而不是 B 的虚拟目录。

根据我的阅读，我相信我应该能够将项目 B 的 URL 直接输入到 save 方法中。但是，目前这两个项目都没有部署。此外，我想利用他们在同一个解决方案上的事实。

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:45:24.167

但是如果你正在*保存一个文件*，那么你就不想访问*虚拟目录*；你想要**实际的（物理）目录**。这意味着*Request.MapPath*是要走的路；您可以使用将*[跨应用映射](http://msdn.microsoft.com/en-us/library/3z2189ck)*设置为*true*的重载。

```
string pathToAppB = Request.MapPath("/AppBVirtualPath", Request.ApplicationPath, true); 
```

不过，您仍然需要知道应用程序 B 将部署到哪个虚拟路径；除非您部署到本地 IIS，否则您无法在本地进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T05:48:19.853

您可以将项目 A 和项目 B 的虚拟目录配置到磁盘上的同一目录。当您使用 Server.MapPath 从项目 A 保存文件时，它将被保存到该文件夹​​。然后当项目 B 尝试通过 url 访问文件时。虚拟目录将访问同一目录。

为 Web 项目配置虚拟目录：

在视觉工作室：见[这篇文章](http://social.msdn.microsoft.com/Forums/pl-PL/msbuild/thread/758bec00-7ded-4312-af60-61beaaedac58)。

在 IIS 中：请参阅[本教程](http://msdn.microsoft.com/en-us/library/zwk103ab.aspx)。

# ruby-on-rails - RoR：试图缩进表单的 f.text_area？

> ID：11219956
> 
> 赞同：0
> 
> 时间：2012-06-27T05:30:17.117
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在尝试缩进整个表格

```
<%= form_for([micropost, micropost.comments.build], :html => { :id => "blah_form" }) do |f| %>

    <div class="field">
      <p2>Who are you?</p2>
      <%= f.text_field :commenter %>
    </div>
    <div class="field">
      <p2>What deal are you offering?</p2>
      <%= f.text_area :body %>
    </div>
    <div class="actions">
      <%= f.submit "Submit"%>
    </div>
  <% end %> 
```

我添加了`#blah_form`输入`{margin-left:80px}`以缩进整个表单。但`f.text_area`不缩进？当我将其更改为`f.text_field`有效但我需要它是`text_area`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:08:00.273

它确实应该在 css 下标记，但是当它已经在这里时：

你应该尝试而不是

```
#blah_form input {margin-left:80px} 
```

这个

```
#blah_form input, textarea {margin-left:80px} 
```

# iphone - 在 ipad 中测试 iphone 应用程序？

> ID：11219957
> 
> 赞同：9
> 
> 时间：2012-06-27T05:30:28.457
> 
> 标签：iphone, ios, ipad, testing

我想购买 iphone 或 ipad 任何一个来测试 iphone 和 ipad 应用程序。我怀疑我是否在 ipad 中测试 iphone 应用程序？我选择购买 ipad 但是，如果我在 ipad 中测试 iphone 应用程序是可能的吗？因为，我没有使用 ipad，任何人都可以帮助我做出正确的决定，非常感谢！

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T05:31:32.267

是的，您可以在 iPad 上测试 iPhone 应用程序，该应用程序将缩放到 2 倍以填满 iPad 屏幕，因此如果您需要在 iPhone 和 iPad 上进行测试，购买 iPad 是一个不错的选择

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T05:41:03.507

您可以这样做，但要在 iPad 上测试 iPhone 应用程序，它必须是仅限 iPhone 的应用程序。然后您将能够使用缩放功能（顺便说一句，这看起来不太好）。如果您创建通用应用程序（您应该这样做）并在 iPad 上对其进行测试，它将切换到 iPad 视图，您最终会得到未经测试的 iPhone 视图。您可以尝试操纵项目设置以使您的通用应用程序使用 iPad 上的 iPhone 视图进行测试，但这不是最方便的工作方式。无论如何，如果您现在买不起两台设备，请先购买 iPad，创建您的应用程序，将其提交到 App Store，赚钱并购买 iPhone。祝你好运！:-)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-27T05:45:05.773

除了亚当的回答：

您可以在 iPad 上测试 iPhone 应用程序，但存在一些差异。例如，iPhone 有两个扬声器而不是一个，因此您必须专门将音频重新路由到扬声器。此外，您无法轻松复制应用程序中断（例如电话或短信）。另一个 - 适用于 iPhone 应用程序的 iAd 无法在 iPad 上加载。

这些只是我遇到的问题，经过一番思考，您可以将调试分布在模拟器和 iPad 上，以解决大多数问题。但是您可能会遇到一些问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T05:39:54.727

是的，购买 ipad 更好，因为您也可以在 ipad 中测试您的 iphone 应用程序，但无法在 iphone 中测试 ipad 应用程序/通用应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T06:48:17.217

iPad 可以运行大多数 iPhone (iPod touch) 应用程序。安装 iPhone SDK 3.2 后打开你的 iPhone 模拟器并从菜单中选择下面

硬件 –> 版本 –> 3.2

这将在 iPad 模拟器中打开您的 iPhone 应用程序。默认情况下，应用程序将在 iPad 屏幕中央打开，带有难看的黑色边框。:P 但应用程序将缩放到 2X 以填充 iPad 屏幕.. 所以 iPad 是最好的..

# r - 使用数据框：将结果收集到 R 中的一个数据框中

> ID：11219959
> 
> 赞同：2
> 
> 时间：2012-06-27T05:30:33.827
> 
> 标签：r, for-loop, plyr

在工作区中，我有 48 个数据框：

```
zbp1994f, zbp1994m, zbp1994r
zbp1995f, zbp1995m, zbp1995r
......
zbp2009f, zbp2009m, zbp2009r 
```

在每一帧中，都有一个组变量（例如，组）。我只计算一个数据帧的统计量（Moran's I），即 zbp1994f：

```
library(ape)
moranfn <- function(dta) {
    distinv <- -1/as.matrix(dist(cbind(dta$longi, dta$lati)))
    diag(distinv) <- 0
    Moran_result <- data.frame(Moran.I(dta$myvariable, distinv))
}

library(plyr)
Moran_result_1994f <- ddply(zbp1994f,"group",moranfn) 
```

这给了我 Moran_result_1994f 数据框，其中包含按组的统计信息。

```
group stat1 stat2 sd     p-value
g1    0.049 -0.01 0.012  2.55e-06
g2    0.122 -0.05 0.041  2.45e-08
...... 
```

我的目标是为所有数据框完成这项工作，并制作一个面板数据集：

```
group year stat1 stat2 sd p-value
g1    1994 ..... ..... .. .....
g1    1995 ..... ..... .. .....
g1    1996 ..... ..... .. .....
......
g1    2009 ..... ..... .. .....
g2    1994 ..... ..... .. .....
...... 
```

我想知道如何在一年中（1994:2009）和 c("f","m","r") 循环初始过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T06:53:40.757

扩展 mnel 的解决方案：

做一些数据：

```
set.seed(123)

somelets <- letters[rep(1:5, 2)]

zbp1990f <- data.frame(x=somelets, y=rnorm(10), z=rnorm(10))
zbp1990m <- data.frame(x=somelets, y=rnorm(10), z=rnorm(10))
zbp1991f <- data.frame(x=somelets, y=rnorm(10), z=rnorm(10))
zbp1991m <- data.frame(x=somelets, y=rnorm(10), z=rnorm(10)) 
```

制作一些产生数据框的函数：

```
myfun <- function(.dat){
  med <- median(.dat$y)
  mean <- mean(.dat$z)
  result <- data.frame(stat1=med, stat2=mean)
} 
```

按照 mnel 的建议合并到列表中：

```
zbp.list <- list(`1990`=list(f=zbp1990f, m=zbp1990m), `1991`=list(f=zbp1991f, m=zbp1991m)) 
```

融入数据框：

```
library(reshape2)

zbp.df <- melt(zbp.list, id.var=names(zbp1990f))

names(zbp.df) <- c("x", "y", "z", "group", "year") 
```

将函数应用于数据框中的每个元素：

```
library(plyr)

results <- ddply(zbp.df, .(x, group, year), myfun)

head(results)

   x group year  stat1    stat2
 1 a     f 1990  0.5772947  1.5054975
 2 a     f 1991 -0.9089078  0.8848946
 3 a     m 1990 -1.3772585  0.5575522
 4 a     m 1991  0.3415841  0.2672701
 5 b     f 1990  0.1153694  0.4288322
 6 b     f 1991 -0.3054011 -0.7886498 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T07:11:22.173

我会`get`在 for 循环中使用函数来做到这一点：

```
for(i in 1994:2009){
    for(j in c("f","m","r")){
        temp <- get(paste("zbp",i,j,sep=""))
        temp_result <- ddply(temp,"group",moranfn)
        cbind(year=rep(i,nrow(temp_result)),fmr=rep(j,nrow(temp_result)),temp_result) -> temp_result
        if(i==1994 & j=="f"){temp_result -> result}
        else{rbind(result,temp_result) -> result}
        }
    } 
```

话虽`ldply`如此，Roman Luštrik 的无环解决方案似乎更直接......

# mongodb - MongoDB 从嵌套文档中检索选定的对象

> ID：11219965
> 
> 赞同：7
> 
> 时间：2012-06-27T05:31:11.763
> 
> 标签：mongodb

是否可以在嵌套文档中查询特定对象？这是一个例子，

```
Collection : Threads
{
    Documents : Messages
    {
        threadId = 1
        messages = [
            {
                user = amy
                date = 01/01/2012
                content = hey
            },
            {
                user = bell
                date = 01/01/2012
                content = hey
            },
            {
                user = bell
                date = 01/02/2012
                content = whats up
            }
        ]
    },
    {
        threadId = 2
        messages = [
            {
                user = courtney
                date = 01/03/2012
                content = first!
            }
        ]
    }
} 
```

我想我的查询说`{ threadId : 1, 'messages.date' : { $gt : 01/01/2012 } }, { fields : { messages : 1 } }`。但是当我真正想要的结果是这样时，它会返回所有这些文档消息，

```
messages = [
    {
        user = bell
        date = 01/02/2012
        content = whats up
    }
] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T05:34:16.850

[您不能只返回选定的子文档](https://stackoverflow.com/questions/3985214/mongodb-extract-only-the-selected-item-in-array)。你会得到所有的。因此，您必须在客户端进行过滤。

# java - 以下java程序中的stackoverflow错误

> ID：11219968
> 
> 赞同：3
> 
> 时间：2012-06-27T05:31:22.157
> 
> 标签：java

```
public class testing {    
    testing t=new testing();                

    public static void main(String args[]){   
        testing t1=new testing();  
        t1.fun();  
    }

    void fun(){         
        int a=2;        
        int b=t.fun2(a);  
        System.out.println(a+" "+b);  
    }

    int fun2(int a)  
    {
        a=3;  
        return a;  
    }  
} 
```

为什么上面的代码会出现以下错误？我只想知道原因，因为`StackOverFlowError`在这种情况下很难预料到错误。

```
Exception in thread "main" java.lang.StackOverflowError
at com.testing.<init>(testing.java:4)
at com.testing.<init>(testing.java:4) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T05:32:13.510

您正在递归地创建`testing`

```
public class testing {    
 testing t=new testing();        
//

} 
```

在创建第一个实例时，它将创建新实例，通过`testing t=new testing();`该实例将再次创建新实例，依此类推

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:42:36.800

试试这个解决方案，

```
public class testing {                

    public static void main(String args[]){   
        testing t1=new testing();  
        t1.fun(t1);  
    }

    void fun(testing t1){         
        int a=2;        
        int b=t1.fun2(a);  
        System.out.println(a+" "+b);  
    }

    int fun2(int a)  
    {
        a=3;  
        return a;  
    }  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T05:43:15.973

您必须在类级别创建字段，但在 main 中实例化一次

```
public class Testing {    
    static Testing t1;              

    public static void main(String args[]){   
        t1=new Testing();  
        t1.fun();  
    }

    void fun(){         
        int a=2;        
        int b=t1.fun2(a);  
        System.out.println(a+" "+b);  
    }

    int fun2(int a)  
    {
        a=3;  
        return a;  
    }  
} 
```

# dojo - 如何使用dojo上传文件

> ID：11219973
> 
> 赞同：2
> 
> 时间：2012-06-27T05:31:55.467
> 
> 标签：dojo

如何使用 Dojo 浏览以上传文件？请看下面的代码：

```
 dojox.io.xhrMultiPart({
              url: "http://localhost:8080/myWebService",
              handleAs: "xml",
              form: dojo.byId("myForm"), 
              load: function(data){ processRequest(data);},
              error: function(error){ processError(error); },
              backButton: function() { 
              },
              mimetype: "text/xml"         
        }); 
```

现在我必须将哪些代码附加到上述代码才能上传文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T06:26:21.120

我使用`dojox.form.Uploader`，这将使您能够使用“浏览”功能。

```
<input name="file" multiple="false" type="file" dojoType="dojox.form.Uploader" label="Select Class File" id="uploadedfile" /> 
```

我`dojo.io.iframe.send`用来上传文件。然后在表单的提交按钮上，我使用以下功能发布，

```
function addSwitchType(){
    var td = dojo.io.iframe.send({
        url: switchType_Add_URL,
        form: formName,
        method: "post",
        preventCache: true, 
        handleAs: "json",
        load: function(response, ioArgs){

            },
        error: function(response, ioArgs){

            }
    });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-08T09:06:59.150

您可以将 dojox.form.Uploader 与 dojox.form.uploader.FileList 一起使用。只需如下声明这 2 个。

```
up = new dojox.form.Uploader({
    label: "Select files",
    multiple: true,
    class: "browseButton",
    url: "UploadFile.php"
}).placeAt(form);

list = new dojox.form.uploader.FileList({
    uploader: up
}).placeAt(form);

btn = new Button({
    label: "upload",
    onClick: function() {
        up.upload();
    }
}).placeAt(form);

btn.startup();
up.startup();
list.startup(); 
```

# sql-server-2008-r2 - 查找具有数据值的表名

> ID：11219975
> 
> 赞同：0
> 
> 时间：2012-06-27T05:32:02.667
> 
> 标签：sql-server-2008-r2

我正在使用 SQL Server 2008 R2。现在我想编写一条 SQL 语句来查找该表的列中包含单词“happy”的表名。列名`like '%abc'`可能包含单词

谁能给我一些想法？

谢谢，V

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:01:06.943

尝试这个 ：

```
select obj.name 
    from sys.columns col join sys.tables obj
    on col.name like '%happy%'
      and col.object_id = obj.object_id 
```

# aem - 通过 sling 重命名用户

> ID：11219976
> 
> 赞同：3
> 
> 时间：2012-06-27T05:32:03.640
> 
> 标签：aem, sling, crx

我们有一个外部身份管理系统，它必须使用 Sling 和 REST 管理 CQ5 中用户的生命周期。

我们能够创建和删除用户和组

*   创造

    ```
    POST http://$host:$port/libs/cq/security/authorizables/POST 

    Content: rep:userId=example@example.org&givenName=Example&familyName=Example&email=example@example.org&rep:password=random 
    ```

*   删除

    ```
    POST http://$host:$port/home/users/e/example@example.org.delete.json
    Content: deleteAuthorizable=1 
    ```

我们的问题是我们没有找到如何**重命名**用户（或组）。

**我们如何重命名用户？**

我们找到的唯一解决方案是

1.  列出用户的所有组成员身份
2.  删除用户
3.  创建一个新用户
4.  重新创建所有组成员身份

虽然这个解决方案可以工作，但它很可能会带来一些性能问题（我们有超过 70K 的用户和超过 15K 的组）。如果这是唯一的解决方案：我们如何通过 REST 有效地执行第一步（列出所有成员）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:46:21.883

知道这并不能解决您的问题，而只是指出通过 REST 重命名似乎是不行的。[文档](http://sling.apache.org/site/managing-users-and-groups-jackrabbitusermanager.html)似乎相当明确：

> jackrabbit-usermanager 包提供了一个 REST 接口来创建、更新和删除 JCR 中的用户和组。
> 
> 要更新现有用户，请向 /system/userManager/user/username.update 发出请求。**您不能更新用户名或密码**（请参阅下面的更改密码），只能通过此 URL 更新其他属性。

虽然在同一页面上，但似乎对特定用户的查询应该带回他们的组成员身份：

```
$ curl http://localhost:8080/system/userManager/user/admin.tidy.1.json

{
    "memberOf": [],
    "declaredMemberOf": []
} 
```

不确定 CQ 是否以这种方式锁定对用户信息的访问。

# jquery - 由于重复的ajax调用，内存泄漏和数据库服务器连接失败

> ID：11219978
> 
> 赞同：0
> 
> 时间：2012-06-27T05:32:04.777
> 
> 标签：jquery, memory-leaks

在我的 MVC 应用程序中，我每 10 秒使用重复的 ajax 调用。有时，经过一段时间后，数据库服务器与应用程序服务器断开连接，然后在运行应用程序的浏览器中出现巨大的内存泄漏。

我的代码运行为，

我每 10 秒使用 jquery.timer.js 进行重复的 ajax 调用

```
function class1() {
}

class1.prototype. funtion1 = function () {
    $.ajax({
        type: "POST",
        url: "/TestContoller/ActionOne",
        success: function (result) {
            $('#DivActionOne').html(result);
        },
        traditional: true,
        error: function (req, status, error) {
        }
    });
}

//Likewise for funtion2, funtion3, funtion4, funtion5

var count = 0;
var timer = $.timer(function () {
    $('#counter').html(++count);
    var class1 = new class1();
    var funtionOne= class1.funtion1;
    var funtionTwo= class1.funtion2;
    var funtionThree= class1.funtion3;
    var funtionFour= class1.funtion4;
    var funtionFive= class1.funtion5;
    var currentSec = count;
    if ((currentSec % 10) == 0) {
        funtionOne ();
        funtionTwo ();
        funtionThree ();
        funtionFour ();
        funtionFive ();
    }
});
timer.set({ time: 1000, autostart: true }); 
```

当连接丢失时，我检查了跟踪日志并发现以下错误消息：

消息：System.ServiceModel.CommunicationException：底层连接已关闭：服务器关闭了预期保持活动状态的连接。---> System.Net.WebException：底层连接已关闭：预期保持活动状态的连接已被服务器关闭。---> System.IO.IOException: Unable to read data from the transport connection: 一个现有的连接被远程主机强行关闭。---> System.Net.Sockets.SocketException: 远程主机在 System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size) 处强制关闭现有连接 --- End of inner异常堆栈跟踪 --- 在 System.Net.Sockets.NetworkStream.Read(Byte[] 缓冲区，Int32 偏移量，Int32 大小) 在 System.Net.PooledStream.Read(Byte[] 缓冲区，Int32 偏移量，

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:36:54.727

因为您使用的是计时器，而不是在上一个 ajax 调用回调函数上调用下一个 ajax 请求。除非您将网络服务器设置为像网络花园一样对待（允许同时请求），否则您需要等到每个服务器都完成后才能进入下一个服务器。

将您的 ajax 调用放入函数中，然后在`success`回调中调用该函数，以便在完成后再次运行。

当然，您需要设置某种类型的变量来确定它是否完成，这样它就不会无限循环。

除此之外的任何事情都需要服务器端优化。

这样的东西应该可以工作，当然没有原型，因为我从来没有使用过原型，但这里没有它：

```
 thecount = 0;       
    function class1() { 
        $.ajax({
            type: "POST",
            url: "/TestContoller/ActionOne",
            success: function (result) {
                $('#DivActionOne').html(result);                    
                thecount++1;                    
                if (thecount < 5) { class1(); }                    
            },
            traditional: true,
            error: function (req, status, error) {
            }
        });            
    } 
```

# android - Android 2.3.3 服务应用程序运行清晰，但在 3.2 银河选项卡上它确实可以工作但强制关闭

> ID：11219979
> 
> 赞同：0
> 
> 时间：2012-06-27T05:32:05.367
> 
> 标签：android, service, bluetooth, galaxy-tab

我在运行完美的 sonny erricson xperia Ray 2.3 android 上运行了以下服务。它旨在在用户尝试打开时自动禁用蓝牙和 WiFi。

这在启动时运行。

但是当我在 Galaxy tab 10.2 android 3.2 上运行时，它适用于 wifi，但在蓝牙上它会被强制关闭。

服务如下

```
IntentFilter filterb = new IntentFilter(BluetoothAdapter.ACTION_STATE_CHANGED);
BroadcastReceiver mReceiverb = new StatusReceiver();
registerReceiver(mReceiverb, filterb); 
```

广播如下

```
BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
if (mBluetoothAdapter.isEnabled()) {
    mBluetoothAdapter.disable();
} 
```

许可如下

```
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

刚拿到logcat

```
E/AndroidRuntime( 9217): FATAL EXCEPTION: main
E/AndroidRuntime( 9217): java.lang.RuntimeException: Error receiving broadcast Intent { act=android.bluetooth.adapter.action.STATE_CHANGED flg=0x10000010 (has extras) } in google.android.disable.StatusReceiver@407bbc40
E/AndroidRuntime( 9217):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:734)
E/AndroidRuntime( 9217):    at android.os.Handler.handleCallback(Handler.java:587)
E/AndroidRuntime( 9217):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime( 9217):    at android.os.Looper.loop(Looper.java:132)
E/AndroidRuntime( 9217):    at android.app.ActivityThread.main(ActivityThread.java:4126)
E/AndroidRuntime( 9217):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 9217):    at java.lang.reflect.Method.invoke(Method.java:491)
E/AndroidRuntime( 9217):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
E/AndroidRuntime( 9217):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
E/AndroidRuntime( 9217):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime( 9217): Caused by: java.lang.SecurityException: Calling uid 10097 gave packageandroid which is owned by uid 1000
E/AndroidRuntime( 9217):    at android.os.Parcel.readException(Parcel.java:1321)
E/AndroidRuntime( 9217):    at android.os.Parcel.readException(Parcel.java:1275)
E/AndroidRuntime( 9217):    at android.bluetooth.IBluetooth$Stub$Proxy.disable(IBluetooth.java:806)
E/AndroidRuntime( 9217):    at android.bluetooth.BluetoothAdapter.disable(BluetoothAdapter.java:496)
E/AndroidRuntime( 9217):    at google.android.disable.StatusReceiver.onReceive(StatusReceiver.java:26)
E/AndroidRuntime( 9217):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:725)
E/AndroidRuntime( 9217):    ... 9 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:25:00.700

Android 参考声明您不应在没有明确用户操作的情况下调用 BluetoothAdapter.disable()。这意味着您不应在设备启动时自动调用此方法。这可能是您的错误的原因。

参考： http: [//developer.android.com/reference/android/bluetooth/BluetoothAdapter.html#disable](http://developer.android.com/reference/android/bluetooth/BluetoothAdapter.html#disable) ()

# java - 启动网络服务

> ID：11219983
> 
> 赞同：0
> 
> 时间：2012-06-27T05:33:04.243
> 
> 标签：java, web-services

我使用具有自下而上方法（eclipse indigo 和axis2）的动态Web 项目创建了服务服务器。现在，只有一个类（MyService.java）包含一个公共方法：

```
public String doIt(){  
    return "abc";  
} 
```

1.  如何创建基于 Web 的客户端？我要做一个单独的项目吗？如果是这样，项目的类型是什么？maven，javaEE，动态网络？
2.  肥皂请求将包含一个 xml，该 xml 很可能稍后会被解析为 Java 对象。我假设 POJO 定义将在 Web 服务服务器项目中？
3.  Web 服务项目（服务器和客户端项目）中的类和包的命名约定是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:56:32.453

**第 1 点：**

您可以创建一个类型为 maven、Java EE、动态 Web 的新项目，甚至您也可以在现有的 maven 项目中添加一个新模块。如果你想创建一个基于控制台的应用程序，你也可以创建。

**第 2 点：**

是的，POJO 定义将在 Web 服务中。

**第 3 点：**

您只需要遵循[此处阅读的 Java 标准命名约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)

# .net - 响应式扩展等待队列为空

> ID：11219985
> 
> 赞同：0
> 
> 时间：2012-06-27T05:33:20.190
> 
> 标签：.net, asynchronous, system.reactive

我有以下异步队列处理路由。

```
 var commandQueue = new BlockingCollection<MyCommand>();
      commandQueue
            .GetConsumingEnumerable()
            .ToObservable(new LimitedConcurrencyLevelTaskPoolScheduler(5))
            .Subscribe(c =>
                           {
                               try
                               {
                                   ProcessCommand(c);
                               }
                               catch (Exception ex)
                               {
                                   Trace.TraceError(ex.ToString());
                               }
                           }
            ); 
```

在一种特定情况下（当我要获取一些数据时），我需要确保我的 commandQueue 为空，然后再出去获取数据。此操作预计将同步发生。基本上，我想做类似的事情

```
 public void GetData()
  {
     commandQueue.WaitForEmpty(); 

     // could potentially be expressed: 
     // while (commandQueue.Count > 0) Thread.Sleep(10);

     return GoGetTheData()
  } 
```

我意识到在理想情况下，所有调用者都将“GetData”异步......但有时它必须以同步方式发生......所以我需要等待命令队列为空以确保一致性和我的数据的最新性。

我知道如何使用 ManualResetEvent 很容易地做到这一点……但我想知道 System.Reactive/TPL 是否有简单的方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:46:11.210

这是一个比起初看起来更困难的问题。您想要`BlockingCollection`（和底层`ConcurrentQueue`）生产者-消费者工作语义。但是您还希望能够观察这些集合发生了什么，包括等待“空”信号。

最好的办法是从这里看`JobQueue`一下`ParallelJobQueue`：

[http://social.msdn.microsoft.com/Forums/en-US/rx/thread/2817c6e5-e5a4-4aac-91c1-97ba7de88ff7](http://social.msdn.microsoft.com/Forums/en-US/rx/thread/2817c6e5-e5a4-4aac-91c1-97ba7de88ff7)

其中包括一个 observable`WhenQueueEmpty`并且可以控制同时运行的作业和排队作业的数量（在这种情况下，作业与您的命令概念同义）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:04:09.913

你能用这个吗？

```
 var dataObservable = Observable.Start(() =>
    {
        commandQueue.WaitForEmpty(); 
        return GoGetTheData();
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T11:38:01.313

在我看来你的要求是

*   异步获取数据
*   并行处理这些数据（最多 5 度并行度）
*   重复该过程

如果这些是您的要求并且您没有被迫使用 BlockingCollection 即它不是现有的 API，那么我认为您可以单独使用 Rx 很容易地解决这个问题。

```
var dataRequestScheduler = new EventLoopScheduler();
var subscription = GetTheData()
    .Repeat()
    .SubscribeOn(dataRequestScheduler)
    .ObserveOn(Scheduler.TaskPool)//new LimitedConcurrencyLevelTaskPoolScheduler(5)
    .Subscribe(c =>
           {
               try
               {
                   ProcessCommand(c);
               }
               catch (Exception ex)
               {
                   Trace.TraceError(ex.ToString());
               }
           }
        ); 
```

GetTheData 方法在哪里返回一个 IObservable

您可以利用 Observable.Start 和 Merge(5) 来获得最多 5 个线程，而无需自定义调度程序。

# scala - 表达这个 Scala 的更惯用（单子？）方式

> ID：11219986
> 
> 赞同：8
> 
> 时间：2012-06-27T05:33:23.277
> 
> 标签：scala, monads

我有几个遵循这种模式的代码块：

```
// Dummy function defs.
def result(i : Int, d : Double, b : Boolean) = {
    if (b) d else i
}

def fA(s : String) = {7}
def fB(s : String, i : Int) = {1.0}
def fC(s : String, i : Int, d : Double) = {true}

// Actual code.
def test(s : String) : Double = {
    try {
        val a = fA(s) 
        try {
            val b = fB(s, a)
            try {
                val c = fC(s, a, b)
                result(a, b, c)
            } catch {
                case _ => result(a, b, false)
            }

        } catch {
            case _ => result(a, 0.0, false)
        }
    } catch {
        case _ => result(0, 0.0, false)
    }
} 
```

其中 a、b 和 c 由相应的函数依次计算，然后将值传递给结果函数。如果在任何阶段发生异常，则使用默认值代替其余变量。

有没有更惯用的方式来表达这段代码。它让我想起了 Monads，因为它是一系列链式计算，如果任何计算失败，它们会立即退出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T07:51:31.570

我不确定您是否可以使用 monad，因为在每个步骤中您都有两种选择（异常或结果）并且忠实于您的原始代码，在您不想调用`fB`or`fC`函数的异常情况下。

我无法优雅地删除默认值的重复，所以我将其保留，因为我认为它更清晰。这是我基于`either.fold`and的非单子版本`control.Exception`：

```
def test(s : String) = {
  import util.control.Exception._
  val args = 
    allCatch.either(fA(s)).fold(err => (0, 0.0, false), a => 
      allCatch.either(fB(s, a)).fold(err => (a, 0.0, false), b =>
        allCatch.either(fC(s, a, b)).fold(err => (a, b, false), c =>
          (a, b, c))))
  (result _).tupled(args)
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T09:28:50.770

这些类型的问题正是`Try`旨在解决更多单子的问题（比嵌套`try/catch`块）。

`Try`表示可能导致异常或返回成功计算值的计算。它有两个子类——`Success`和`Failure`。

非常有趣的是这个问题突然出现了——几天前，我完成了一些添加和重构`scala.util.Try`，对于 2.10 版本，这个 SO 问题有助于说明我们最终决定的组合器的一个重要用例包括; `transform`.

（在撰写本文时，`transform`目前在[夜间](https://github.com/scala/scala/blob/master/src/library/scala/util/Try.scala)，将从 2.10-M5 开始在 Scala 中，今天或明天到期。有关`Try`和使用示例的更多信息可以在[夜间文档](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.util.Try)中找到）

使用`transform`（通过嵌套它们），这可以使用`Try`s 来实现，如下所示：

```
def test(s: String): Double = {
  Try(fA(s)).transform(
    ea => Success(result(0, 0.0, false)), a => Try(fB(s, a)).transform(
      eb => Success(result(a, 0.0, false)), b => Try(fC(s, a, b)).transform(
        ec => Success(result(a, b, false)), c => Try(result(a, b, c))
      )
    )
  ).get
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-27T07:00:43.893

我将示例更改为使用 monad：

```
def fA(s: String) = Some(7)
def fB(i: Option[Int]) = Some(1.0)
def fC(d: Option[Double]) = true // might be false as well

def result(i: Int, d: Double, b: Boolean) = {
  if (b) d else i
}

def test(s: String) = result(fA(s).getOrElse(0), fB(fA(s)).getOrElse(0.0), fC(fB(fA(s)))) 
```

注意： for-comprehension 被解释为 chained `flatMap`。所以 的类型`res`是`Option[(Int, Double, Boolean)]`。因此，无需编写`map`或`flatMap`自己编写。编译器为您完成工作。:)

**编辑**

我编辑了我的代码以使其适合所有可能性。如果我找到更好的方法，我会改进它。感谢您的所有评论。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-27T13:19:34.443

通过定义这些效用函数

```
implicit def eitherOps[E, A](v: Either[E, A]) = new {
  def map[B](f: A => B) = v match {
    case Left(e)  => Left(e)
    case Right(a) => Right(f(a))    
  }

  def flatMap[B](f: A => Either[E, B]) = v match {
    case Left(e)  => Left(e)
    case Right(a) => f(a)
  }

  def or(a: A) = v match {
    case Left(_) => Right(a)
    case x       => x          
  }
}

def secure[A, B](f: A => B) = new {
  def run(a: A): Either[Trowable, B]  = try {
    Right(f(a))
  } catch {
    case e => Left(e)
  }
} 
```

并简化你的

```
def fA(s : String) = 7
def fB(i : Int) = 1.0
def fC(d : Double) = true 
```

我们会有：

```
def test(s: String): Either[Throwable, Double] =  for {
  a <- secure(fA).run(s).or(0)
  b <- secure(fB).run(a).or(0.0)
  c <- secure(fC).run(b).or(false)
} yield result(a, b, c) 
```

**编辑**

这是一个可执行但更冗长的代码片段

```
object Example {
  trait EitherOps[E, A] {
    def self: Either[E, A]

    def map[B](f: A => B) = self match {
      case Left(e)  => Left(e)
      case Right(a) => Right(f(a))    
    }

    def flatMap[B](f: A => Either[E, B]) = self match {
      case Left(e)  => Left(e)
      case Right(a) => f(a)
    }

    def or(a: A) = self match {
      case Left(_) => Right(a)
      case x       => x          
    }
  }

  trait SecuredFunction[A, B] {
    def self: A => B

    def secured(a: A): Either[Throwable, B]  = try {
      Right(self(a))
    } catch {
      case e => Left(e)
    }
  }

  implicit def eitherOps[E, A](v: Either[E, A]) = new EitherOps[E, A] {
    def self = v
  }

  implicit def opsToEither[E, A](v: EitherOps[E, A]) = v.self

  implicit def secure[A, B](f: A => B) = new SecuredFunction[A, B]{
    def self = f
  }

  def fA(s : String) = 7
  def fB(i : Int) = 1.0
  def fC(d : Double) = true

  def result(i : Int, d : Double, b : Boolean) = {
    if (b) d else i
  }

  def test(s: String): Either[Throwable, Double] =  for {
    a <- (fA _).secured(s) or 0
    b <- (fB _).secured(a) or 0.0
    c <- (fC _).secured(b) or false
  } yield result(a, b, c)
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T07:08:38.107

您可以`catching`按如下方式使用成语：

```
import scala.util.control.Exception._

def test(s : String) : Double = result(
  catching(classOf[Exception]).opt( fA(s) ).getOrElse(0),
  catching(classOf[Exception]).opt( fB(s, a) ).getOrElse(0.0),
  catching(classOf[Exception]).opt( fC(s, a, b) ).getOrElse(false)
) 
```

但是，与其他解决方案类似，这确实会在执行上进行轻微更改，`fB`并且`fC`将始终对其进行评估，而您的原始代码仅在先前的调用成功时才评估它们。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-06T15:45:27.617

我发现大多数 try-catch 问题可以通过使用`map + recover`or的组合来解决`flatMap + recoverWith`。更喜欢链接表达式而不是嵌套它们。

我以两种不同的方式尝试了这一点：

第一个假设您需要嵌套，并且 fA、fB、fC，结果实际上比您的示例更复杂；尽管这些更现实的例子将有助于提出一个简洁明了的解决方案并编写一些测试用例

```
def test(s: String): Double =
  Try (fA(s)) flatMap (a =>
    Try (fB(s, a)) flatMap (b => 
      Try (result(a, b, fC(s, a, b))) recover { case _ => result(a, b, false) }
      ) recover { case _ => result(a, 0.0, false) }
    ) getOrElse result(0, 0.0, false) 
```

如果 fA、fB、fC 的结果确实像它们一样令人讨厌，我们可以对这个 IMO 有一个更简单的解决方案。如果它们在处理异常时没有任何副作用，你可以这样做`getOrElse`如果它们确实有副作用，例如记录异常，你可以使用`recover`或`recoverWith`

```
def test(s: String) = {
  val evalA = Try(fA(s)).getOrElse(0)
  val evalB = Try(fB(s, evalA)).getOrElse(0.0)
  val evalC = Try(fC(s, evalA, evalB)).getOrElse(false)

  result(evalA, evalB, evalC)
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-27T07:31:59.867

以前的答案似乎错过了您希望每个级别都有默认结果的事实。这里不需要花哨的 for 表达式，你只需要一个辅助函数：

```
def optTry[T]( f: => T) : Option[T] = try { Some(f) } catch { case e:Exception => None } 
```

好的，`optTry`这是一个坏名字（我不擅长那个游戏），但是，你可以：

```
def test(s : String) : Double = {
  val a = optTry(fA(s)) getOrElse 0
  val b = optTry(fB(s,a)) getOrElse 0.0
  val c = optTry(fC(s,a,b)) getOrElse false

  result(a,b,c)
} 
```

请注意，Scala 2.10 将具有一个`Try`数据结构，该结构基本上使用 pimped`Either`代替 执行相同的操作`Option`，请参阅：[http ://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/ index.html#scala.util.Try](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.util.Try)

另请注意，这`try { ... } catch { case _ => ... }`是一个坏主意，您当然不想捕获一些系统异常，例如 OutOfMemory 等。

编辑：另外，请参阅 Scalaz`Validation`数据结构，了解所有此类问题的敬畏世界。请参阅：[http ://scalaz.googlecode.com/svn/continuous/latest/browse.sxr/scalaz/example/ExampleValidation.scala.html](http://scalaz.googlecode.com/svn/continuous/latest/browse.sxr/scalaz/example/ExampleValidation.scala.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-27T06:47:00.540

试图让它更实用。不确定这个解决方案是否比你的更清晰，但我认为如果你有更多的计算步骤，它应该更合适。

```
def result(i : Int, d : Double, b : Boolean) = {
    if (b) d else i
}

def fA(s : String) = {7}
def fB(s : String, i : Int) = {1.0}
def fC(s : String, i : Int, d : Double) = {true}

type Data = (Int, Double, Boolean)
def test(s : String) : Double = {
  val steps = Seq[Data => Data](
    {case (_, b, c) => (fA(s), b, c)},
    {case (a, _, c) => (a, fB(s, a), c)},
    {case (a, b, _) => (a, b, fC(s, a, b))}
  )
  val defaults: Either[Data, Data] = Right((0, 0.0, false))
  val resultData = steps.foldLeft { defaults } { (eith, func) =>
    eith match {
      case left: Left[_,_] => left
      case Right(data) => try {
        Right(func(data))
      } catch {
        case _ => Left(data)
      }
    }
  } fold (identity, identity)
  (result _) tupled (resultData)
} 
```

# tcp - 到环回接口的 TCP 连接有多少开销？

> ID：11219988
> 
> 赞同：2
> 
> 时间：2012-06-27T05:33:27.363
> 
> 标签：tcp, localhost, connection-pooling, couchbase, loopback

我正在构建一个 Web 应用程序，其中所有数据库连接都是通过在同一台机器上运行的代理完成的（特别是[Couchbase Moxi](http://www.couchbase.com/docs/moxi-manual-1.8/moxi-introduction.html)）。我听说建立与外部服务器的 TCP 连接需要开销（时间和内存），这是连接池（Moxi 处理其外部连接）背后的基本原理。但是到 localhost/loopback 的 TCP 连接是否也存在这种开销？具体来说，我是否需要在我的应用程序和本地代理之间建立连接池，或者我可以为每个请求建立一个新连接？更一般地说（对于我自己的教育，我想），如果在建立与 localhost 的 TCP 连接有任何开销，它是如何引入的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T05:40:34.850

对于 localhost，与远程 tcp 相同，但响应时间要低一些 - （我刚刚进行的简单测试为 0.019 而不是 0.19 毫秒）

不过，这只是开销的一部分——它会影响建立连接所需的时间。（TCP SYN-ACK 序列，你可以在维基百科上查到这个：[http](http://en.wikipedia.org/wiki/SYN_%28TCP%29#Connection_establishment) ://en.wikipedia.org/wiki/SYN_%28TCP%29#Connection_establishment ）

除此之外，数据库本身可能会引入其他开销 - 接受连接，检查安全性，检查授权，可能加载任何特定于用户的设置，...... - 即使使用 localhost 连接，这些开销也会保持不变。

# javascript - 根据用户选择的计时器间隔自动刷新页面

> ID：11219989
> 
> 赞同：0
> 
> 时间：2012-06-27T05:33:28.817
> 
> 标签：javascript, refresh, reload, intervals

我试过用谷歌搜索这个，我似乎找不到解决方案/脚本。

我希望用户能够选择页面重新加载的频率。

例如... 该网站分为两个 iframe。顶部 iframe 允许用户输入/选择“页面将每 __ 秒重新加载一次”。底部的 iframe 是实际的网站，它会根据用户设置的时间间隔重新加载。

ps 我熟悉 HTML，但对 javascript 很陌生

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:45:58.637

在这里，我使用 jQuery 和 javascript 来自动更新页面。在`update()`函数内部，我使用 AJAX，它能够从 URL 发送接收数据，然后您可以使用 var 输出该数据`xmlhttp.responseText`

```
var time = //what the user has selected for when the update should happen
setInterval(function() {
    update();
}, time);
function update() {
    var xmlhttp;
    if(window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    } else {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=
        function() {
            if(xmlhttp.readyState==4 && xmlhttp.status==200) {
                if(xmlhttp.responseText != $('body').val()) {
                    $('body').html(xmlhttp.responseText).fadeIn(500);
                }
            }
        }
    xmlhttp.open("GET","your_url_to_get_the_updated_page.php",true);
    xmlhttp.send();
} 
```