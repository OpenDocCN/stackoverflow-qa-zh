# StackOverflow 问答 11190000-11190999

# java - 我丢失了我的 R 文件。？我不知道发生了什么。？

> ID：11190000
> 
> 赞同：1
> 
> 时间：2012-06-25T13:08:23.130
> 
> 标签：java, android, r.java-file, buildconfiguration

我正在研究我的android项目。完成一些编码后，我按 导入了剩余的类`ctrl+shift+o`。比我清理我的项目。清理项目后，我丢失了`BuildConfig.java`文件。我怎样才能把它拿回来？我认为 R.java 现在重命名为 BuildConfig.java。（对于所有开发人员）我对吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:53:30.367

您的 gen 文件夹（在您的包内）中应该有一个 BuildConfig.java 和一个 R.java。

如果清理后没有生成 R.java，请确保布局中没有任何错误。（布局错误将导致 R 被删除，并且在清理之前不会返回 :)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T13:54:53.203

确保您没有导入外部`R`文件。有时，`CTRL+SHIFT+O`将导入`android.R`会弄乱您的项目。删除导入语句，清理并再次构建您的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T13:50:40.700

清洁项目2-3次。它会起作用的。

# bash - 在 Bash 中自动按 Enter 键继续

> ID：11190004
> 
> 赞同：11
> 
> 时间：2012-06-25T13:08:33.650
> 
> 标签：bash, input, enter

我想更改 RSA 密钥以毫无问题地打开 ssh 连接。如果我使用[本教程](http://www.madmadmod.com/sysadmin/4-ssh-key-exchange-or-how-to-logon-without-entering-a-password.html)但我想在 bash 脚本中完成它，它工作正常。不幸的是，我被要求输入密码（我不想输入任何内容）。当脚本到达这一点时，如何实现自动`Enter`连续按三下？

[这个线程](https://stackoverflow.com/questions/1349771/automatically-press-enter-to-exit-in-bash)没有帮助，因为我不允许在我的工作 PC 上安装新程序，而且这个`echo | command`技巧似乎只适用于一个`Enter`. 我还需要输入“n”，并且`Enter`如果该过程已经完成，则不要覆盖任何文件。我如何做到这一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-25T14:28:19.197

如果你只需要按`Enter`很多次就可以了：

`yes "" | command`

对于比您可能想要使用`expect`的其他线程中建议的更复杂的东西，您可以在没有 root 权限的情况下将其安装在您的 homedir 中。

PS：请避免将来重新发布问题。如果您出于某种原因不喜欢某个答案，请发表评论。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T14:34:12.413

如果您只想在 bash 脚本中创建 ssh 密钥而不需要任何用户输入，您可以指定以下参数`ssh-keygen`：

```
# rsa type (default), no passphrase, write to file id_rsa and id_rsa.pub
captain:~> ssh-keygen -t rsa -N "" -f id_rsa
Generating public/private rsa key pair.
Your identification has been saved in id_rsa.
Your public key has been saved in id_rsa.pub.
The key fingerprint is:
fe:4a:82:08:0e:ab:b7:02:62:11:4d:3e:79:a4:d3:98 mrb@captain.local 
```

# java - 如何在另一个模态 JDialog 之上创建模态 JDialog

> ID：11190013
> 
> 赞同：11
> 
> 时间：2012-06-25T13:08:55.300
> 
> 标签：java, swing, user-interface, modal-dialog, jdialog

我有一个模式设置对话框，它是一个 JDialog。在这个设置窗口中，我放置了一些组件，包括一个指向另一个模态设置对话框的按钮，该对话框也是一个 JDialog。我将它们制作为 JDialogs，因为这是我所知道的制作模态对话框的唯一方法。

问题是这样的：当我创建主设置对话框时，我必须在没有父框架或父框架的情况下构建 JDialog。由于我的主窗口是一个 JFrame，我可以将它传递给主设置对话框构造函数。但是当我想创建第二个模式设置对话框时，它应该将主设置对话框作为父级，我找不到获取 JDialog 的 (J)Frame 的方法。我确实想将该主设置对话框作为父级传递，以便第二个设置对话框在显示时以它为中心。假设第二个设置对话框没有用于传递位置的构造函数，只有 JDialog 的构造函数。

有没有办法获得 JDialog 的 (J)Frame？我的设置中是否存在设计缺陷，我是否应该为这些设置对话框使用其他东西？（如果是这样，我应该如何使这些替代设置对话框成为模态？）

谢谢你的帮助，埃里克

更新：谢谢大家的回答。他们让我明白，显然拥有一个 JDialog 的所有者并不是绝对必要的。我认为对话框需要这样做才能禁用所有者，直到对话框关闭，但显然该模式独立于所有者。我还注意到，即使有所有者，对话框仍然不会以所有者为中心，所以现在我的代码如下：

```
public class CustomDialog extends JDialog {
    public CustomDialog(String title) {
        setModal(true);
        setResizable(false);
        setTitle(title);

        buildGUI();
    }

    public Result showDialog(Window parent) {
        setLocationRelativeTo(parent);
        setVisible(true);
        return getResult();
    }
} 
```

这也允许模态对话框中的模态对话框。

感谢你的帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-25T14:14:02.890

不确定您到底有什么问题，但这里有一个关于如何拥有多个模式对话框的示例：

```
import java.awt.BorderLayout;
import java.awt.Window;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TestDialog {

    protected static void initUI() {
        JPanel pane = newPane("Label in frame");
        JFrame frame = new JFrame("Title");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(pane);
        frame.pack();
        frame.setVisible(true);

    }

    public static JPanel newPane(String labelText) {
        JPanel pane = new JPanel(new BorderLayout());
        pane.add(newLabel(labelText));
        pane.add(newButton("Open dialog"), BorderLayout.SOUTH);
        return pane;
    }

    private static JButton newButton(String label) {
        final JButton button = new JButton(label);
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                Window parentWindow = SwingUtilities.windowForComponent(button);
                JDialog dialog = new JDialog(parentWindow);
                dialog.setLocationRelativeTo(button);
                dialog.setModal(true);
                dialog.add(newPane("Label in dialog"));
                dialog.pack();
                dialog.setVisible(true);
            }
        });
        return button;
    }

    private static JLabel newLabel(String label) {
        JLabel l = new JLabel(label);
        l.setFont(l.getFont().deriveFont(24.0f));
        return l;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                initUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T14:03:33.613

1.请阅读[Java SE 6 中的新模式 API](http://www.oracle.com/technetwork/articles/javase/modality-137604.html)

2.有没有办法获取JDialog的(J)Frame？

```
Window ancestor = SwingUtilities.getWindowAncestor(this); 
```

或者

```
Window ancestor = (Window) this.getTopLevelAncestor(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-18T04:57:12.067

现在是 2021 年，距离问题发布大约 8.5 年，但早在 2012 年，到目前为止，最简单的解决方案是简单地`JDialog`以`Dialog`所有者身份创建。Java 提供了[5 个带有 Dialog 所有者的构造函数](https://docs.oracle.com/en/java/javase/12/docs/api/java.desktop/javax/swing/JDialog.html)，旁边有 5 个具有所有者的类似构造函数和 5 个`Frame`具有所有者的构造函数`Window`。

OP 可能面临的问题是`JDialog`Netbeans 或其他 IDE 中的默认模板。Netbeans (12.2) 将此作为新**JDialog 表单的模板...**：

```
public class NewJDialog extends javax.swing.JDialog {

    /**
     * Creates new form NewJDialog
     */
    public NewJDialog(java.awt.Frame parent, boolean modal) {
        super(parent, modal);
        initComponents();
    } 
```

您可以简单地更改构造函数的签名以使用 a`Dialog`作为所有者而不是 a 的默认选项`Frame`：

```
public class NewJDialog extends javax.swing.JDialog {

    /**
     * Creates new form NewJDialog
     */
    public NewJDialog(java.awt.Dialog parent, boolean modal) {
        super(parent, modal);
        initComponents();
    } 
```

你走了。

# algorithm - 最长公共子序列算法

> ID：11190023
> 
> 赞同：0
> 
> 时间：2012-06-25T13:09:28.793
> 
> 标签：algorithm, dynamic-programming

我正在经历 CLRS 的算法简介中最长的常见子序列问题。但我无法理解其背后的思考过程。解释的大多数其他问题都非常直观，并且我相信我将来可以解决类似的问题，但我无法可视化 LCS 问题，因为我不了解如何确定最佳子结构背后的逻辑。

该书对最佳子结构进行了以下解释

**定理 15.1（LCS 的最优子结构）

令 X == 和 Y == 是序列，令 Z = 是 X 和 Y 的任意 LCS。 1\. 如果`xm = yn`，则`zk = xm = yn`和`Zk−1`是 和 的`Xm−1`LCS `Yn−1`。2\. 如果`xm != yn`,then`zk = xm`意味着是和`Z`的 LCS 。3\. 如果,then意味着是和的 LCS 。证明 (1) 如果，那么我们可以追加以获得 和 的公共子序列，这与作为和的最长公共子序列的假设相矛盾。因此，我们必须有.`Xm−1``Y``xm != yn``zk = yn``Z``X``Yn−1``zk != xm``xm = yn``Z``X``Y``k + 1``Z``X``Y``zk = xm = yn`

现在，前缀`Zk−1`是and的`length-(k − 1)`公共子序列。我们希望证明它是 LCS。为了矛盾的目的，假设存在 和 的公共子序列，其长度大于。然后，追加to会产生 的公共子序列，其 长度大于，这是矛盾的。`Xm−1``Yn−1``W``Xm−1``Yn−1``k−1``xm = yn``W``X``Y``k`

(2) If `zk != xm`,then`Z`是`Xm−1`and的公共子序列`Y`。如果and的公共子序列长度大于，那么也将是 and 的公共子序列，`W`这与 and的 LCS的假设相矛盾。`Xm−1``Y``k``W``Xm``Y``Z``X``Y`

(3) 证明与 (2) 对称。**

证据很清楚，但我看不出他们是如何提出最佳子结构的。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:14:22.683

请浏览以下链接的重复部分：

> [https://en.wikipedia.org/wiki/Longest_common_subsequence_problem#LCS_function_defined](https://en.wikipedia.org/wiki/Longest_common_subsequence_problem#LCS_function_defined)

这些递归关系只不过是最优子结构和重叠子问题等式。

# ruby - 将 OpenStruct/Hash 转换为 XML

> ID：11190031
> 
> 赞同：0
> 
> 时间：2012-06-25T13:09:46.480
> 
> 标签：ruby, xml, nokogiri, openstruct

我有一组 OpenStruct 元素，我需要使用这些元素在 Nokogiri 的帮助下构建 XML。

```
collection = [
OpenStruct.new(:catalogStoreNumber => '657758',
:catalogStoreId => 'CTH6536',
:catalogStoreLocation => 'UnitedStates', 
:catalogOwnerId => 'TYCT11190',
:catalogOwner => 'McGrawHill Pub.',
:catalogList => OpenStruct.new(
  :catalogProductInfo => OpenStruct.new(
  :productType => 'Book',
  :productName => 'The Client', 
  :productAuthorized => 'Y', 
  :productId => 'BKSUS113246A',
  :productVerificationCode => '4546747', 
  :productPurcTransactionTime => '2012-05-21T13:36:38+05:30',
  :productAuditDetails => OpenStruct.new(
    :productAuditNo => '1',
    :prodHandledByUser => 'StoreUserS14',
    :productAuditTime => '2012-05-21T13:36:38+05:30',
    :productAuditAdminId => 'McGr1132', 
    :productPurchaseRate => '50.14 Prcnt',
    :productSystemLoggerId => 'UNX-NETW4536'
    ), 
  :productAuditDetails => OpenStruct.new(
    :productAuditNo => '2',
    :prodHandledByUser => 'OnlineUserOn008',
    :productAuditTime => '2012-05-23T16:16:08+05:30',
    :productAuditAdminId => 'McGr1132', 
    :productPurchaseRate => '84.86 Prcnt',
    :productSystemLoggerId => 'UNX-NETW4536'
    )
  ),
:catalogProductInfo => OpenStruct.new(
  :productType => 'Pen',
  :productName => 'Reynolds'
  :productAuthorized => 'N', 
  :productId => 'PNSUS228886B',
  :productVerificationCode => '2330076', 
  :productPurcTransactionTime => '2012-04-22T15:06:18+04:30',
  :productAuditDetails => OpenStruct.new(
    :productAuditNo => '1',
    :prodHandledByUser => 'CCUserA14',
    :productAuditTime => '2012-04-26T13:36:38+05:30',
    :productAuditAdminId => 'ReyGr1132', 
    :productPurchaseRate => '20.19 Prcnt',
    :productSystemLoggerId => 'WIN-NETW4536'
    )
  )
 )
)] 
```

我尝试使用以下代码..根据您的回答（精选元素）

```
builder = Nokogiri::XML::Builder.new do |xml|
    xml.CatalogOrder do 
    collection.each do |ctlg|
     xml.CatalogStoreNumber ctlg.catalogStoreNumber
     xml CatalogStoreId ctlg.catalogStoreId
     xml.CatalogOwnerId ctlg.catalogOwnerid
     xml.CatalogOwner ctlg.catalogOwner
      xml.CatalogList do
        prod_count = 0
        aud_list_count = 0 
        collection.each do |prod|
          info = prod.catalogList[0].catalogProductInfo
          xml.ProductInfo do
            xml.ProductType info.productType
            xml.ProductName info.productName
            xml.ProductId   info.productId
            xml.ProductVerificationCode info.ProductVerificationCode
            xml.ProductPurcTransactionTime info.productPurcTransactionTime
            xml.ProductAuditDetails do
            collection.each do |aud_dtl|
             aud_info = aud_dtl.catalogList[0].catalogProductinfo[0].productAuditDetails
             xml.ProductAuditNo aud_info.productAuditNo
             xml.ProdHandledByUser aud_info.prodHandledByUser
             xml.ProductAuditTime aud_info.productAuditTime
             xml.ProductAuditAdminId aud_info.productAuditAdminId
             xml.ProductPurchaseRate aud_info.productPurchaseRate
             xml.ProductSystemLoggerId aud_info.productSystemLoggerId
            # Do whatever you must above to concoct your ProductId
          end
         aud_list_count = aud_list_count + 1
        end
        prod_count = prod_count + 1
      end
    end
  end

  puts builder.to_xml 
```

我需要如下输出...

```
<CatalogOrder>
 <CatalogStoreNumber>657758</CatalogStoreNumber>
 <CatalogStoreId>CTH6536</CatalogStoreId>
 <CatalogStoreLocation>UnitedStates</CatalogStoreLocation>
 <CatalogOwnerId>TYCT11190</CatalogOwnerId>
 <CatalogOwner>McGrawHill Pub.</CatalogOwner>
 <CatalogList>
   <CatalogProductInfo>
     <ProductType>Book</ProductType>
     <ProductName>The Client</ProductName>
     <ProductAuthorized>Y</ProductAuthorized>
     <ProductId>BKSUS113246A</ProductId>
     <ProductVerificationCode>4546747</ProductVerificationCode>
     <ProductPurcTransactionTime>2012-05-21T13:36:38+05:30</ProductPurcTransactionTime>
     <ProductAuditDetails>
       <ProductAuditNo>1</ProductAuditNo>
       <ProdHandledByUser>StoreUserS14</ProdHandledByUser>
       <ProductAuditTime>2012-05-21T13:36:38+05:30</ProductAuditTime>
       <ProductAuditAdminId>McGr1132</ProductAuditAdminId>
       <ProductPurchaseRate>50.14 Prcnt</ProductPurchaseRate>
       <ProductSystemLoggerId>WIN-NETW4536</ProductSystemLoggerId>
    </ProductAuditDetails>
    <ProductAuditDetails>
       <ProductAuditNo>2</ProductAuditNo>
       <ProdHandledByUser>OnlineUserOn008</ProdHandledByUser>
       <ProductAuditTime>2012-05-23T16:16:08+05:30</ProductAuditTime>
       <ProductAuditAdminId>McGr1132</ProductAuditAdminId>
       <ProductPurchaseRate>84.86 Prcnt</ProductPurchaseRate>
       <ProductSystemLoggerId>UNX-NETW4536</ProductSystemLoggerId>
    </ProductAuditDetails>
   </CatalogProductInfo>
   <CatalogProductInfo>
     <ProductType>Pen</ProductType>
     <ProductName>Reynolds</ProductName> 
     <ProductAuthorized>N</ProductAuthorized>        
     <ProductId>PNSUS228886B</ProductId>
     <ProductVerificationCode>2330076</ProductVerificationCode>
     <ProductPurcTransactionTime>2012-04-22T15:06:18+04:30</ProductPurcTransactionTime>
     <ProductAuditDetails>
       <ProductAuditNo>1</ProductAuditNo>
       <ProdHandledByUser>CCUserA14</ProdHandledByUser>
       <ProductAuditTime>2012-04-26T13:36:38+05:30</ProductAuditTime>
       <ProductAuditAdminId>ReyGr1132</ProductAuditAdminId>
       <ProductPurchaseRate>20.19 Prcnt</ProductPurchaseRate>
       <ProductSystemLoggerId>WIN-NETW4536</ProductSystemLoggerId>
     </ProductAuditDetails>
   </CatalogProductInfo>
 </CatalogList>
</CatalogOrder> 
```

我试图在嵌套的 OpenStruct 元素数组中循环，但无法找到正确的逻辑......

Ref..[如何使用 Nokogiri 在 NodeSet 中添加子节点](https://stackoverflow.com/questions/10300095/how-to-add-child-nodes-in-nodeset-using-nokogiri)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:38:25.543

## 设置代码

```
require 'ostruct'
require 'nokogiri'

collection = [
  OpenStruct.new(
    :catalogStoreNumber => '657758',
    :catalogStoreId => 'CTH6536',
    :catalogStoreLocation => 'UnitedStates', 
    :catalogOwnerId => 'TYCT11190',
    :catalogOwner => 'McGrawHill Pub.',
    :catalogList => OpenStruct.new(
      :catalogProductInfo => OpenStruct.new(
        :productType => 'Book',
        :productName => 'The Client'
      )
    )
  )
] 
```

## 如果您想手动选择元素和数据

```
builder = Nokogiri::XML::Builder.new do |xml|
  xml.CatalogOrder do
    xml.CatalogList do
      collection.each do |prod|
        info = prod.catalogList.catalogProductInfo
        xml.ProductInfo do
          xml.ProductType info.productType
          xml.ProductName info.productName
          xml.ProductId   "#{prod.catalogOwnerId}-#{prod.catalogStoreNumber}"
          # Do whatever you must above to concoct your ProductId
        end
      end
    end
  end
end

puts builder.to_xml 
```

### 输出

```
<?xml version="1.0"?>
<CatalogOrder>
  <CatalogList>
    <ProductInfo>
      <ProductType>Book</ProductType>
      <ProductName>The Client</ProductName>
      <ProductId>TYCT11190-657758</ProductId>
    </ProductInfo>
  </CatalogList>
</CatalogOrder> 
```

* * *

如果您想要更通用的转换（OpenStruct 层次结构的 XML 表示），请参阅以下两种解决方案之一：

## 执行通用转换的一种方法

```
# Add all entries of an OpenStruct to an XML builder
# Recursively creates sub-nodes for OpenStruct instances
def ostruct_each(ostruct,xml)
  ostruct.instance_variable_get(:@table).each do |field,value|
    if value.is_a?(OpenStruct)
      xml.send(field) do
        ostruct_each(value,xml)
      end
    else
      xml.send(field,value)
    end
  end
end

builder = Nokogiri::XML::Builder.new do |xml|
  xml.CatalogOrder do
    xml.CatalogList do
      collection.each do |prod_info|
        xml.ProductInfo do
          ostruct_each(prod_info,xml)
        end
      end
    end
  end
end

puts builder.to_xml 
```

### 输出

```
<?xml version="1.0"?>
<CatalogOrder>
  <CatalogList>
    <ProductInfo>
      <catalogStoreNumber>657758</catalogStoreNumber>
      <catalogStoreId>CTH6536</catalogStoreId>
      <catalogStoreLocation>UnitedStates</catalogStoreLocation>
      <catalogOwnerId>TYCT11190</catalogOwnerId>
      <catalogOwner>McGrawHill Pub.</catalogOwner>
      <catalogList>
        <catalogProductInfo>
          <productType>Book</productType>
          <productName>The Client</productName>
        </catalogProductInfo>
      </catalogList>
    </ProductInfo>
  </CatalogList>
</CatalogOrder> 
```

## 通用转换它的另一种方法

```
# Create a NodeSet of elements for all attributes in an OpenStruct
# Recursively creates child elements for any value that is an OpenStruct
def ostruct_to_elements(xml_doc,ostruct)
  Nokogiri::XML::NodeSet.new(
    xml_doc,
    ostruct.instance_variable_get(:@table).map do |name,val|
      xml_doc.create_element(name.to_s).tap do |el|
        el << (val.is_a?(OpenStruct) ? ostruct_to_elements(xml_doc,val) : val)
      end
    end
  )
end

builder = Nokogiri::XML::Builder.new do |xml|
  xml.CatalogOrder do
    xml.CatalogList do
      collection.each do |prod_info|
        xml.ProductInfo do
          xml.parent << ostruct_to_elements(xml.doc,prod_info)
        end
      end
    end
  end
end

puts builder.to_xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:19:56.363

*回答您更改的问题和数据。*

这是您的源数据，总结如下：

```
collection = [
  OpenStruct.new(
    :foo => 'bar',
    :list => OpenStruct.new(
      :catalogProductInfo => OpenStruct.new(...)
      :catalogProductInfo => OpenStruct.new(...)
    )
  )
] 
```

我们注意到的第一件事是它`collection`是一个数组，但它只有一个项目。这似乎不是很有用。

需要注意的第二件事（更重要的是）是您尝试将 OpenStruct（内部结构）用作数组。这完全失败了，因为第二个值完全覆盖了第一个值：

```
require 'ostruct'
p OpenStruct.new( a:1, a:2 )
#=> #<OpenStruct a=2> 
```

结构中的同一个键不能有两个值。相反，您可能希望在对象内有一个数组值。例如：

```
root = OpenStruct.new(
  :foo => 'bar',
  :list => [  # this is an array of two distinct objects
    OpenStruct.new( :catalogProductInfo => OpenStruct.new(...) ),
    OpenStruct.new( :catalogProductInfo => OpenStruct.new(...) )
  ]
) 
```

第三，正如我之前提到的，我认为您没有充分的理由在这里使用 OpenStruct。相反，只需使用哈希文字。结合我在其他答案中提供的代码，这就是您的数据（简化）和工作解决方案的样子：

### 源数据

```
MyOrder = {
  catalogStoreNumber: '657758',  # Ruby 1.9 Hash syntax;
  catalogStoreId: 'CTH6536',     # same as :catalogStoreId => 'CTH536'
  catalogList: {
    catalogProductInfo: [
      {
        productType: 'Book',
        productName: 'The Client', 
        productAuditDetails: [
          { productAuditNo: '1', prodHandledByUser: 'StoreUserS14'    },
          { productAuditNo: '2', prodHandledByUser: 'OnlineUserOn008' }
        ]
      },
      {
        productType: 'Pen',
        productName: 'Reynolds',
        productAuditDetails: [
          { productAuditNo: '1', prodHandledByUser: 'CCUserA14' }
        ]
      }
    ]
  }
} 
```

### 通用转换

```
# Adds key/value pairs from a Hash to a Nokogiri::XML::Builder
def hash2xml(hash,xml)
  hash.each do |field,value|
    name = field.to_s.sub(/^./,&:upcase) # convert "fooBar" to "FooBar"
    case value
      when Hash  then xml.send(name){ hash2xml(value,xml) }
      when Array then value.each{ |o| xml.send(name){ hash2xml(o,xml) } }
      else            xml.send(name,value)
    end
  end
end 
```

### 工作代码

```
builder = Nokogiri::XML::Builder.new do |xml|
  xml.CatalogOrder do
    hash2xml(MyOrder,xml)
  end
end
puts builder.to_xml 
```

### 输出

```
<?xml version="1.0"?>
<CatalogOrder>
  <CatalogStoreNumber>657758</CatalogStoreNumber>
  <CatalogStoreId>CTH6536</CatalogStoreId>
  <CatalogList>
    <CatalogProductInfo>
      <ProductType>Book</ProductType>
      <ProductName>The Client</ProductName>
      <ProductAuditDetails>
        <ProductAuditNo>1</ProductAuditNo>
        <ProdHandledByUser>StoreUserS14</ProdHandledByUser>
      </ProductAuditDetails>
      <ProductAuditDetails>
        <ProductAuditNo>2</ProductAuditNo>
        <ProdHandledByUser>OnlineUserOn008</ProdHandledByUser>
      </ProductAuditDetails>
    </CatalogProductInfo>
    <CatalogProductInfo>
      <ProductType>Pen</ProductType>
      <ProductName>Reynolds</ProductName>
      <ProductAuditDetails>
        <ProductAuditNo>1</ProductAuditNo>
        <ProdHandledByUser>CCUserA14</ProdHandledByUser>
      </ProductAuditDetails>
    </CatalogProductInfo>
  </CatalogList>
</CatalogOrder> 
```

# vhdl - 从 INOUT 生成 OUT

> ID：11190033
> 
> 赞同：0
> 
> 时间：2012-06-25T13:09:59.743
> 
> 标签：vhdl, xilinx

我想使用芯片示波器探测三态信号。

根据[这个回答记录](http://www.xilinx.com/support/answers/32428.htm)，是做不到的，所以这是我开始的（只包括相关代码）：

```
-- Tristate signals
FPGA_SMB0_SDA <= sysmon_iic_data;
FPGA_SMB0_SCL <= sysmon_iic_clk;

-- Output signals
DEBUG_LED0 <= '0';  
DEBUG_LED1 <= '0'; 
```

哪个构建良好，没有错误。

## 尝试1：

这是我第一次尝试生成用于探测的调试信号，这只是一个输出：

```
-- Tristate signals
FPGA_SMB0_SDA <= sysmon_iic_data;
FPGA_SMB0_SCL <= sysmon_iic_clk;

-- Generating new output signals using tristate (tristate signals are either '0' or 'X' for IIC)
sysmon_iic_data_debug <= '0' when (sysmon_iic_data  = '0') else '1'; 
sysmon_iic_clk_debug <= '0' when (sysmon_iic_clk  = '0') else '1';   

-- connecting debug outs to debug leds (so that the debug signals aren't optimized out)
DEBUG_LED0 <= sysmon_iic_data_debug;  
DEBUG_LED1 <= sysmon_iic_clk_debug; 
```

上面的代码通过了综合，但是 NGDbuild 给出了以下错误：

```
ERROR:ConstraintSystem:59 - Constraint <IOSTANDARD = LVCMOS25 ;>
   [frm121401u1r1.ucf(333)]: NET "FPGA_SMB0_SDA"
   not found.  Please verify that:
   1\. The specified design element actually exists in the original design.
   2\. The specified object is spelled correctly in the constraint source file. 
```

以上重复8次，每网两次。

## 尝试2：

我尝试的第二件事是使用一个过程：

```
FPGA_SMB0_SDA <= sysmon_iic_data;
FPGA_SMB0_SCL <= sysmon_iic_clk;

gen_sysmon_debug : process(refclk_10m,refclk_10m_rst)
begin
    if (refclk_10m_rst = '1') then
        sysmon_iic_data_debug <= '0';
        sysmon_iic_clk_debug <= '0';
    elsif (rising_edge(refclk_10m)) then
        if (sysmon_iic_clk = '0') then
            sysmon_iic_clk_debug <= '0';
        else
            sysmon_iic_clk_debug <= '1';            
        end if;
        if (sysmon_iic_data = '0') then
            sysmon_iic_data_debug <= '0';
        else
            sysmon_iic_data_debug <= '1';       
        end if;

    end if;
end process;

DEBUG_LED0 <= sysmon_iic_data_debug;  
DEBUG_LED1 <= sysmon_iic_clk_debug; 
```

这给了我这个 NGDbuild 错误：

```
ERROR:NgdBuild:924 - bidirect pad net 'FPGA_SMB0_SDA' is driving non-buffer primitives:
     pin D on block sysmon_iic_data with type FDC, 
```

其中两个，一个用于 SDA，一个用于 SCL

## 更多信息：

这是我的 UCF 中的内容：

```
NET "DEBUG_LED0" LOC = "AK33" | IOSTANDARD = LVCMOS25 ;
NET "DEBUG_LED1" LOC = "AK34" | IOSTANDARD = LVCMOS25 ;
...
NET "FPGA_SMB0_SCL" LOC = "G13" | IOSTANDARD = LVCMOS25 ;
NET "FPGA_SMB0_SDA" LOC = "H13" | IOSTANDARD = LVCMOS25 ; 
```

和顶级 vhdl 网络定义：

```
DEBUG_LED0 : out std_logic;
DEBUG_LED1 : out std_logic;

FPGA_SMB0_SCL : inout std_logic;
FPGA_SMB0_SDA : inout std_logic; 
```

在 uBlaze .mhs 中：

```
PORT xps_iic_1_Sda_pin = xps_iic_1_Sda, DIR = IO, BUFFER_TYPE = NONE
PORT xps_iic_1_Scl_pin = xps_iic_1_Scl, DIR = IO, BUFFER_TYPE = NONE 
```

我完全不知道为什么我会收到这些 NGDbuild 错误，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:16:27.000

您的网络可能正在重命名，现在您已将另一个信号连接到它:(

消除约束，让它建立。

将 NCD 文件加载到 FPGA 编辑器中，查看最终调用的网络，然后在 UCF 中使用它。

或者您自己在顶级 VHDL 文件中实例化所有 IOB，然后您知道 IOB“引脚”和实际引脚之间的网络的 nae 不会改变，您可以约束*该*网络。

# jquery - 通过 jquery 获取选项的值

> ID：11190040
> 
> 赞同：0
> 
> 时间：2012-06-25T13:10:31.220
> 
> 标签：jquery, select

我已经搜索过这个，但我无法在任何地方找到它！;(

我有一个带有选项的选择列表 - 第一个选项有一个我想撤回的值。它不是被选中的——但我正在存储一个我想取出的值！

```
<select class="selection_select">
<option value="ref_button_id">Kategory</option>
<option value="ref_database_id">Item 1</option>
<option value="ref_database_id">Item 2</option>
</select> 
```

它被称为使用：

```
$(".selection_select").change(function() {

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:11:13.227

要从 select 元素的事件处理程序中检索第一个选项的值：

```
$(".selection_select").change(function() {

    var firstVal = $("option:first", this).val();

}); 
```

万一这不是完全不言自明的，它说选择`"option:first"`上下文中的第一个选项元素（）`this`（在事件处理程序`this`中是事件发生的元素）。

如果您不在 select 元素的事件处理程序中，则不能`this`以这种方式使用，因此从其他地方您可以执行以下操作：

```
$(".selection_select option:first").val() 
```

# security - 我应该对两个 AWS AZ/区域之间的流量进行 SSL 加密吗？

> ID：11190045
> 
> 赞同：2
> 
> 时间：2012-06-25T13:10:49.403
> 
> 标签：security, amazon-web-services, amazon-ec2

我知道理论上答案当然是“是”。但这样做真的有正当理由吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:55:08.227

两个 EC2 区域之间的流量可能会通过公共网络传输，因此如果它不是公共数据，则应该对其进行加密。

同一区域中两个 EC2 可用区之间的流量保存在 Amazon 的专用网络中，并保护它不被其他客户看到。但是，如果您认为 EC2 实例之间的网络流量很敏感，Amazon 仍然建议您加密它。

# ada - 如何使用传递引用参数将 C 函数导入 Ada？

> ID：11190048
> 
> 赞同：5
> 
> 时间：2012-06-25T13:11:20.617
> 
> 标签：ada

我有一个`int func( int a, int* b)`需要在 Ada 95 中导入和使用的 C 函数。C 函数通常在 C 中调用为`c = func(a, &b);`

我一直将 C 函数导入 Ada，但一直避免使用通过引用参数传递的函数，但终于到了学习的时候了。

我想知道如何在 Ada 中声明这个函数，并且还想要一个简单的例子来使用它并显示声明的变量（因为我对 Access 类型仍然有点模糊）。

谢谢大家！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T14:22:16.723

在 C 中，`int* b`可能意味着很多事情。也许它实际上只是一个指向一个变量的指针，但它也可能是一个`int a`长度为数组的数组。此代码假定它`int* b`实际上只是一个通过引用传递的值：

```
with Interfaces.C;

-- ...
package C renames Interfaces.C;

function Func (A : C.int; B : access C.int) return C.int;
pragma Import (Convention => C, Entity => Func,
               External_Name => "func");

-- ...

declare
   A : C.int := 42;
   B : aliased C.int := 23;
   C : C.int;
begin
   C := Func (A, B'Access);
   -- ...
end; 
```

您可以`'Access`在`aliased`变量上使用。只要您确定指针不会存储在 C 端并在 variable 生命周期结束后访问，这是安全的`B`。（如果 C 声明使用`const`关键字，您可以`access constant`在 Ada 端使用，但仅适用于 Ada 2005。）

您还可以使用命名类型：

```
-- ...
type Int_Access is access C.int;
function Func (A : C.int; B : Int_Access) return C.int;
-- ...
C := Func (A, B'Unchecked_Access);
-- ... 
```

现在我们需要使用`'Unchecked_Access`，因为 Ada 通常不允许非本地访问类型（as `Int_Access`）引用局部变量。如果您知道 C 代码将如何处理指针（就像您应该做的那样），您可以使用命名类型来指定不应传递对局部变量的引用。

**注意事项 1：**如果您有一个过程（在 C 中：一个返回 的函数`void`），您可以通过`in out`在 Ada 过程声明中使用而不是`access`. 这样，您根本不需要担心访问类型。和以前一样，您需要确保指针没有存储在 C 端。

**注意事项 2：**记录类型和数组无论如何都是通过引用传递的 - 除非您指定`pragma Convention (C_Pass_By_Copy, Your_Type);`. 这是在 Ada 中包装 C 函数时的常见问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T20:40:54.923

除了（和抄袭flyx）之外，我还提供了一个完整的解决方案：

文件 c_thing.c

```
#include <stdio.h>

int foo (int a, int * b) {
  printf ("A:%d, B %d\n",a, *b);
} 
```

文件 ada_main.adb

```
with Interfaces.C;

procedure Ada_Main is 

   package C renames Interfaces.C;

   function Func (A : C.int; B : access C.int) return C.int;
   pragma Import (Convention => C, Entity => Func,
                  External_Name => "foo");

   A : C.int := 42;
   B : aliased C.int := 23;
   R : C.int;

begin

   R := Func (A, B'Access);

end Ada_Main; 
```

编译（Linux）：

```
gcc -c c_thing.c
gnatmake -c ada_main.adb
gnatbind ada_main.ali
gnatlink ada_main.ali c_thing.o 
```

跑步

```
./ada_main 
A:42, B 23 
```

# c# - 后台工作人员在程序突然结束时抛出异常

> ID：11190049
> 
> 赞同：1
> 
> 时间：2012-06-25T13:11:24.027
> 
> 标签：c#, .net-3.5, backgroundworker

我有一个非常基本的 Windows 窗体应用程序，使用 C# 工作，我正在尝试使用[Background Worker](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)。我大部分时间都遵循该页面上的基本代码。

```
 void bw_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
            progressBar.Value = e.ProgressPercentage;
    } 
```

一切都很好，除非后台工作人员在运行时关闭窗口（例如点击 X）时正在工作。上面的方法抛出了一个空引用异常（我假设在progressBar上？）。

我确实把它放在了关闭方法上：

```
 private void Form_FormClosing(object sender, FormClosingEventArgs e)
    {
        if(bgWorker.WorkerSupportsCancellation == true)
            bgWorker.CancelAsync();
    } 
```

但是，这并没有解决问题。我想知道为什么会发生这种情况，我知道它与 隔离`progressBar`，因为如果我删除该行，当我在忙时关闭窗口时不会引发异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:24:23.597

是的，当您关闭窗口时，包括 ProgressBar 在内的控件将被销毁。尝试从 Bgw 访问它们而不进行检查将导致错误。

你可以这样保护：

```
void bw_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
   if ((progressBar == null) || progressBar.IsDisposed)
       return;

   progressBar.Value = e.ProgressPercentage;
} 
```

取消 Bgw 也是一个好主意，但仅靠`CancelAsync()`它是不够的。中的代码`DoWork()`需要检查取消标志。

# android - 给定速度的opengl android运动

> ID：11190052
> 
> 赞同：1
> 
> 时间：2012-06-25T13:11:38.653
> 
> 标签：android, opengl-es

这是一个非常基本的问题，但我无法在任何地方找到完整的答案。

考虑一个物体以给定的速度沿 z 轴移动。（例如：-0.2 opengl 单位）现在我用 rotationX 、 Y 和 Z 角度围绕其局部轴旋转对象。

问题：我的对象的下一个位置是什么？

我正在使用以下方程式（我知道这是错误的，但我无法使它们正确）

```
 positionX += -SPEED * Math.sin(rotationY * Utils.DEG)* Math.cos(rotationX * Utils.DEG);
    positionY += SPEED * Math.sin(rotationX * Utils.DEG);       
    positionZ += -SPEED * Math.cos(rotationX * Utils.DEG)* Math.cos(rotationY * Utils.DEG); 
```

我的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:52:29.710

我将存储一个表示对象方向的向量。

旋转时，旋转方向矢量。

搬家时，

```
positionX += SPEED * orientation.X
positionY += SPEED * orientation.Y
etc. 
```

# python - django-getlist()

> ID：11190070
> 
> 赞同：41
> 
> 时间：2012-06-25T13:12:34.807
> 
> 标签：python, django

我刚刚发布了这个问题[jQuery-passing arrays in post request](https://stackoverflow.com/questions/11189079/jquery-passing-arrays-in-post-request/)，我没有在 post request 中发送数组，但是 jQuery 代码没有问题。

问题在于在 django 中接收 POST 请求。我确实喜欢这个。

```
def portfolio_add(request):
    ukeys = request.POST.getlist('ukeys')
    ........etc....... 
```

但我将 ukeys 值设为`u'[]'`. 当我检查时，`request.POST`我得到的值为`u"<QueryDict: {u'ukeys[]': [u'68c04', u'16149']}>"`

那么，如何在 Django 中将这些值作为列表获取？

谢谢！

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-06-25T14:00:08.173

jQuery POST 的数组带有`[]`后缀，因为 PHP 和一些 web 框架理解该约定，并自动为您在服务器端重新构建数组。Django 不是这样工作的，但您应该能够通过以下方式访问数据：

```
ukeys = request.POST.getlist('ukeys[]') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-24T22:46:30.857

我遇到了同样的问题——Jakub 是对的，它对`[]`其他 web 框架很有用，但是 jQuery 的行为可以改变（我不喜欢这种`varname[]`格式）。

该`$.param`函数具体执行此操作，它还接受一个参数来覆盖此行为。

**全球变化：**

```
// put this early in your JS, preferably the first one imported after jQuery
//     or before the document.ready function if using inline js
jQuery.ajaxSettings.traditional = true; 
```

**在每次通话的基础上更改：**

```
 $.param(data, true);  // true sets traditional mode
// for example:
 $.post('/some/url/', $.param(data, true)).done(callback) 
```

或者，您当然可以使用`[]`Jakub 提到的服务器上的 。

# objective-c - iOS 断言 NSMutableArray 包含 2 个对象，与索引无关

> ID：11190071
> 
> 赞同：2
> 
> 时间：2012-06-25T13:12:34.593
> 
> 标签：objective-c, ios, ios5, xcode4.3

我的 iOS 应用程序中有以下测试用例：

```
-(void) testTwoDefaultUsersExist
{
NSString * expected;
NSString * actual;

expected = @"John Smith";
actual = [[[userService getAllUsers]objectAtIndex:0] fullName];
STAssertEqualObjects(expected, actual, @"Not equal");
expected = @"Dave Brown";
actual = [[[userService getAllUsers]objectAtIndex:1] fullName];
STAssertEqualObjects(expected, actual, @"Not equal");
} 
```

以上只是检查我的调用是否`[userService getAllUsers]`返回 2 个用户对象，一个名为 John Smith，另一个与 Dave Brown。这似乎适用于这种情况，但我在其他情况下排序可能会改变，所以 John 可能被放置在索引 1 而不是 0

**问题：**我如何断言`NSMutableArray`从调用返回的 ,`[userService getAllUsers]`包含这 2 个对象，而不管顺序如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:27:37.363

你不能简单地使用 NSArray 方法`-containsObject:`吗？NSMutableArray 仍然是 NSArray，所以你可以这样做：

```
NSArray * expected = [NSArray arrayWithObjects:@"John Smith", @"Dave Brown", nil];
NSArray * actual = [[userService getAllUsers] valueForKey:@"fullName"];
for(NSString * name in expected) {
    STAssertTrue([actual containsObject:name], @"Missing name");
} 
```

请注意（ab）使用`-valueForKey:`将用户对象数组转换为 NSString 对象数组，使`-containsObject:`调用更简单。这仅在您的用户对象符合属性的键值编码时才有效`fullName`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:56:41.003

1.  NSMutableArray 在将元素插入数组时始终包含它们

2.  您可以使用以下方法迭代您插入的元素并测试它们是否位于 NSArray 中：

`- (NSUInteger)indexOfObject:(id)anObject`

如果找不到对象，则返回 NSNotFound，可以与您选择的单元测试框架一起使用

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T13:56:47.933

像这样断言平等

```
 NSAssert1([userService getAllUsers].count == 2, @"SomeDescription", nil); 
```

如果要搜索数组中是否存在某些字符串，请使用以下函数

```
- (BOOL) containsAllNames:(NSArray*)arrToSearch namesToSearch:(NSArray*)arr
{    
    BOOL containsAll = YES;

    for (NSString *name in arr) {

        BOOL containsCurrent = NO;
        for (NSString *nameToSearch in arrToSearch) {
            if ([name isEqualToString:nameToSearch]) {
                containsCurrent = YES;
                break;
            }
        }

        if (!containsCurrent) {
            containsAll = NO;
        }
    }

    return containsAll;
} 
```

像这样称呼它

```
NSArray *toSearch = [NSArray arrayWithObjects:@"John Smith", @"Dave Brown", nil];
[self containsAllNames:YourArray namesToSearch:toSearch]; 
```

# c++ - 在 OS X 上设置语言环境崩溃

> ID：11190072
> 
> 赞同：8
> 
> 时间：2012-06-25T13:12:34.533
> 
> 标签：c++, macos, locale, xlocale

以下代码在 Linux 上运行良好，但在 OS X 10.7 上引发异常：

```
#include <iostream>
#include <locale>
#include <stdexcept>

int main() try {
    std::locale::global(std::locale(""));
    std::cout << "Using locale: " << std::locale().name() << "\n";
}
catch (std::runtime_error const& e) {
    std::cout << e.what() << "\n";
    return 1;
} 
```

OS X 上的输出是：

> `locale::facet::_S_create_c_locale`名称无效

但是，该标准明确指出

> 有效字符串参数值的集合是`"C"`、`""`和任何实现定义的值。

因此，导致上述行为的任何原因都违反了标准。

使用的编译器是clang++ 3.1（tags/Apple/clang-318.0.58）；我还尝试使用通过 Homebrew 安装的 GCC 4.7，结果相同。

**其他人可以验证这个问题吗？是什么原因造成的？我做错什么了吗？这是 OS X 中的错误吗？**

（也许这[与另一个`xlocale`问题](https://stackoverflow.com/q/9451419/1968)有关，但错误实际上完全不同。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:13:18.497

我认为您没有使用 xlocale。我相信您的问题在于 libstdc++，它使用 OS X 不支持的不同语言环境支持库，因为问题 EitanT 链接到状态。

如果你切换到 libc++，你的程序就可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T04:54:27.660

它上面的海报是正确的……问题出在 libstdc++ 上。我想添加我的答案，因为如何让 OS X 链接到 libc++ 并不简单，我花了一个多小时才弄清楚。

`g++ -libstd=libc++`通过或`clang++ -libstd=libc++`通过别名或通过别名调用编译器/链接器`c++ -libstd=libc++`都将失败。

从命令行编译简单程序而不是搞乱 Xcode 的额外开销的解决方案是允许 Xcode 通过使用命令来处理链接`xcrun clang++ -stdlib=libc++`

`xcrun`允许 Xcode 管理工具链，并将构建一个成功的可执行文件`cout.imbue(locale(foo))`。

# ruby-on-rails - Rails assets:precompile - true:TrueClass 的未定义方法“each”

> ID：11190079
> 
> 赞同：1
> 
> 时间：2012-06-25T13:13:13.787
> 
> 标签：ruby-on-rails, methods, asset-pipeline, each, precompile

每当我运行`rake assets:precompile`时，我都会收到一个奇怪的错误：

```
rake aborted!
undefined method `each' for true:TrueClass 
```

我试过去掉 CSS 和 JS 代码，但一直收到这个错误。有任何想法吗？

# file-upload - 带有 utf8 字符过滤器的 primefaces 文件上传过滤器

> ID：11190081
> 
> 赞同：7
> 
> 时间：2012-06-25T13:13:22.880
> 
> 标签：file-upload, jsf-2, utf-8, character-encoding, primefaces

我在 primefaces 3 中遇到了 utf-8 编码的问题。但是有了[这个](https://stackoverflow.com/questions/11177319/probelm-with-utf8-in-primefaces-3-x)（在 web.xml 中添加字符编码过滤器），我的问题就解决了。但是我的 web.xml 中有另一个用于 primefaces 文件上传的过滤器。在有文件上传的页面中，即使没有上传任何内容，我的字符编码过滤器也不起作用，并且 utf-8 字符集具有未知值，就像没有上传过滤器时一样。我怎样才能一起使用这个过滤器？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T11:57:10.917

这是 PrimeFaces 中的一个错误`MultipartRequest`。它对表单字段使用平台默认字符编码，而不是在 HTTP servlet 请求中设置的字符编码过滤器（我假设它在 PrimeFaces*之前*`HttpServletRequest#setCharacterEncoding()`被映射）。`web.xml` *`FileUploadFilter`*

 *基本上，`MultipartRequest`PrimeFaces 3.3的第 85 和 88 行

```
formParams.get(item.getFieldName()).add(item.getString());
// ...
items.add(item.getString()); 
```

需要更改如下

```
formParams.get(item.getFieldName()).add(item.getString(getCharacterEncoding()));
// ...
items.add(item.getString(getCharacterEncoding())); 
```

我已将其报告为[issue 4266](http://code.google.com/p/primefaces/issues/detail?id=4266)。同时，最好的办法是手动修复支持 bean 操作方法中不正确的字符串编码，如下所示，假设服务器平台默认编码为 ISO-8859-1：

```
string = new String(string.getBytes("ISO-8859-1"), "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-06T22:01:36.047

本质上，您需要以下代码行来解决此问题：

```
new String(file.getFileName().getBytes(Charset.defaultCharset()), "UTF-8") 
```*

# asp.net-mvc - ASP.NET MVC 显示一个消息框

> ID：11190082
> 
> 赞同：0
> 
> 时间：2012-06-25T13:13:24.433
> 
> 标签：asp.net-mvc

我有一个 ASP.net MVC 应用程序。在一个页面上，我有一个按钮，当用户单击它时，我需要在弹出窗口上显示一些信息。如何在 ASP.NET MVC 中做到这一点？我使用什么以及在哪里编写弹出窗口的代码？在控制器中？一些java脚本？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:18:26.353

如果您要在弹出窗口中显示的信息是动态的（即您需要一些 c# 逻辑来运行），那么我建议将该逻辑放在控制器中并让相应的视图成为弹出窗口本身。您可以在视图顶部粘贴一些 JavaScript 以在加载时启动弹出窗口。

带有按钮触发器的页面可以调用该控制器并传递所需的任何数据。为了使它顺利，也许使触发器使用 Ajax。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:52:28.560

您可以使用 javascript 显示消息。消息的内容可以在标记中设置，也可以由控制器设置为模型属性。您有几个显示选项：

*   使用该[`alert()`](https://developer.mozilla.org/En/DOM%3awindow.alert)函数，它将显示一个本机浏览器对话框
*   显示一个样式化的模态对话框（例如[jQuery UI 对话框](http://jqueryui.com/demos/dialog/)）
*   显示一个样式化的 div（例如[jQuery UI Message](http://code.google.com/p/jquery-message/) - 无耻插件，这是我的开源项目之一）

警报功能不是很漂亮，但它是最简单的。我通常使用模态对话框或样式化的 div，具体取决于 UI 要求。

# asp.net-mvc - 不支持 MVC4 Razor @helper/替代方案？

> ID：11190087
> 
> 赞同：3
> 
> 时间：2012-06-25T13:13:49.417
> 
> 标签：asp.net-mvc, razor

我真的很想在项目中开始使用@Helpers，但我听说 MVC4 不支持它们？

它们是否可以轻松用于在 MVC3/4 剃须刀视图中创建自定义组件？

# c# - 如何跟踪数据从套接字写入缓冲区拉到传输级别的时刻？C＃

> ID：11190088
> 
> 赞同：0
> 
> 时间：2012-06-25T13:14:00.710
> 
> 标签：c#, sockets, tcp

如何跟踪数据从套接字写入缓冲区拉到 C# 上的传输级别的时刻？还是线程自动等待，直到来自套接字写入缓冲区的数据没有移动到传输级别？在 actionscript 3 上，这一刻可以通过**OutputProgressEvent.OUTPUT_PROGRESS**进行跟踪。C# 有模拟吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T01:30:26.910

如果您指的是应用程序缓冲区，则当 write 方法返回时，数据已从那里移动到传输层，即进入套接字发送缓冲区。

另一方面，如果您引用套接字发送缓冲区，它已经在传输层中，所以您的问题没有意义，并且没有什么可以告诉您数据何时从那里到达的驱动程序接口网卡。

我怀疑您提到的 OUTPUT_PROGRESS 事件是前者。

# sql - 使用 SQL 选择过滤的行

> ID：11190089
> 
> 赞同：-1
> 
> 时间：2012-06-25T13:14:06.873
> 
> 标签：sql

我正在构建一个带有一些参数的 SQL 语句。最后，创建一个 SQL 语句，如 `"select * from table where column1 = "xyz"`“.

但我还需要使用此语句过滤的行。在这种情况下，它们是 column1 中没有“xyz”值的行。更具体地说，我正在寻找类似`INVERSE(select * from table where ...)`. 是否可以？

编辑：我的错，我知道我可以用 != 或运算符来做到这一点。在这种情况下，select 语句可能更复杂（使用一些 AND 和相等、更大的运算符）。假设一个表有 A、B、C，而我的 SQL 语句只产生 A 作为结果。但是我需要 B 和 C，而我只有带 A 的语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:57:10.910

`select * from table where column1 != 'xyz' or column1 is null;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:52:22.007

如果你想要其他的，这样做：

```
select * from table where column1 <> "xyz" 
```

column1 <>（不同于）“xyz”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T13:56:32.977

要检查某些东西是否不相等，您可以使用`<>`甚至`!=`

```
SELECT *
FROM yourTable
WHERE <> 'xyz' 
```

或者

```
SELECT *
FROM yourTable
WHERE != 'xyz' 
```

许多数据库供应商都[支持（见列表）](https://stackoverflow.com/questions/723195/should-i-use-or-for-not-equal-in-tsql/723426#723426) 这两个版本的语法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T14:08:11.510

如果您大约同时检索两个结果集，并且只想先处理这些结果集`xyz`，您可以这样做：

```
select *,CASE WHEN column1 = "xyz" THEN 1 ELSE 0 END as xyz from table
order by CASE WHEN column1 = "xyz" THEN 1 ELSE 0 END desc 
```

这将返回一个结果集中的所有行。虽然`xyz`= 1，但这些是`column1`=的行`'xyz'`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T15:09:58.480

它是 ：

`"select * from table where rowId NOT IN (select rowId from table where column1 = "xyz")`

我需要一个唯一的 rowId 列来实现这一点。

# silverlight - 使用 Childwindow 进行 Silverlight 单元测试

> ID：11190090
> 
> 赞同：0
> 
> 时间：2012-06-25T13:14:08.277
> 
> 标签：silverlight, unit-testing

我正在使用 Silverlight 单元测试我需要测试一个将打开子窗口的函数我需要处理子窗口回调的结果以进行进一步测试

是否可以处理来自 silverlight 单元测试框架的子窗口回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:53:33.233

不，没有办法在子窗口中单击关闭/确定按钮。但是，您可以使用 DialogService 接口解决此问题。创建 MVVMLight 工具包的 Laurent Buignon 在他的[Mix 11 演示](http://channel9.msdn.com/events/MIX/MIX11/OPN03)中谈到了这一点。一旦你接口调用，而不是 childWindow.Open()，你可以模拟 ok 或 cancel 操作（我喜欢使用 Moq）。如果你想更进一步，你可以使用 Ioc 和 DependencyInjection 来注入接口。

以下是一些其他有用的链接： [http](http://csharperimage.jeremylikness.com/2010/01/simple-dialog-service-in-silverlight.html) ://cshaperimage.jeremylikness.com/2010/01/simple-dialog-service-in-silverlight.html http://blog.roboblob.com/2010/01/19/modal- dialogs-with-mvvm-and-silverlight-4/ [http://www.wintellect.com/CS/blogs/jlikness/archive/2010/02/02/using-moq-with-silverlight-for-advanced-unit-测试.aspx](http://www.wintellect.com/CS/blogs/jlikness/archive/2010/02/02/using-moq-with-silverlight-for-advanced-unit-tests.aspx)

# browser - 实时网络编辑如何保持持久性？

> ID：11190093
> 
> 赞同：1
> 
> 时间：2012-06-25T13:14:15.517
> 
> 标签：browser, webpage, contenteditable

用户更改存储在哪里 - 硬盘或浏览器？修改后的页面是存储还是只存储修改？

# delphi - 如何编译 DUnit2

> ID：11190106
> 
> 赞同：2
> 
> 时间：2012-06-25T13:15:01.037
> 
> 标签：delphi, delphi-xe, dunit

我刚刚从 SVN 下载了 DUnit2 代码库。有人编译成功了吗？为了编译它，我必须遵循哪些步骤/先决条件？有人知道是否存在已经编译的版本吗？

谢谢你

法比奥维莱

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:40:57.867

在*项目*目录中，找到与您的 Delphi 版本对应的子目录。在其中，您应该找到一个项目组文件，即*DUnit2ProjectGroup.bpg*、*DUnit2ProjectGroup.bdsgroup*或*DUnit2Delphi* <version> *.groupproj*。打开它并按顺序编译所有项目。

[使用 DUnit2 与使用 DUnit](http://dunit.sourceforge.net/README.html)几乎相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-01T23:16:33.773

万一其他人在尝试使 DUnit2 在 Delphi XE（或 XE5）上运行时偶然发现这个问题：

# **TL;博士：**

Dunit2（官方 SourceForge 源代码，修订版 101）目前（截至 2015 年 6 月 1 日撰写本文时）不能在 Delphi XE 或 XE5 上成功构建。

要使其在 XE 或 XE5 上构建，请获取我在[此处发布的补丁](http://pastebin.com/aLmAexe8 "这里")

将其应用于源代码树。它现在应该可以编译，您应该能够打开 .groupproj 并成功构建所有包含的项目。

该补丁可以使用 TortoiseSVN 应用并使用 TortoiseSVN 创建（以防万一）。

# **更长的版本：**

令人惊讶的是今晚（2015-06-01）我遵循与 Fabio 相同的步骤（在 2012 年不少于）并遇到*完全相同*的问题（E2010 不兼容类型：'指针'和'整数'）试图编译 DUnit2（修订版 101 主干在 XE 和 XE5 上直接从 SourceForge 签出。

我得出以下结论：

1) XE 和 XE5 的头部修订存在多个问题。

2) Fabio 提到的上述关键问题可以通过将 IntPtr 替换为 Pointer 来解决。

据我所知，这实际上似乎对代码没有任何影响，并且在此更改之后，测试套件在 XE 和 XE5 上也都通过了良好的测试，尽管需要注意的是——我也没有看得太仔细（并且也受到以下警告。）

3) 项目搜索路径已过期 [XE]。只需要更新/修复。

4) 缺少 XE5 和其他的 $DEFINES，尽管其他一些代码非常了解 XE5

5) XE 上没有的一些增强的 TRect 东西。（对于内联到将编译并且在 XE 上可用的更基本的表达式，数量相对较小且相对微不足道，因此绝不会停止。）

（关于 3,4 和 5 —— 遗憾的是，我觉得代码库没有针对多个编译器/BDS 目标进行很好的测试。）

6) 某种 Application.OnIdle/GUI 测试错误（运行 T_TGUITestCase 测试以查看它），除非您通过移动鼠标或按下 shift 键来触发应用程序，否则 GUI 自动化测试将阻塞，除非您继续“输入”Windows 消息队列.OnIdle 事件（在我的 Windows 8 XE5 和 XE 二进制文件上可重复）。

现在从我脑海中浮现出来，从多年前的模糊记忆中，我似乎记得以前遇到过这种情况，这归结为前一段时间在 Delphi 或 Windows 中的行为发生了微妙的变化。- 过去的 IIRC，过去的情况是，即使系统上没有其他任何事情发生，即使您将 Done 设置为 True，实际上仍然会在您的 Delphi 应用程序中偶尔收到 Application.OnIdle() 调用. 我记得，由于几年前 Windows 或 Delphi 的变化（不记得是哪个），这种情况在某些时候发生了变化，如果你不希望你的应用程序完全进入睡眠状态。无论如何，今晚（在撰写本文时）DUnit 代码在我的 PC 上显然是/现在是一个问题，所以我不得不修补它。

我这样做可以说是一种相当笨拙的方式，例如通过在运行 GUI 自动化测试时提供 OnIdle 处理程序来处理事情，以表明应用程序实际上没有完成（例如“不要阻塞，不要进入睡眠状态” )，然后立即恢复任何先前的处理程序。毫无疑问，有一个更优雅的解决方案，也许是通过向我们自己发布一条消息来保持应用程序“活着”，但我第一次或 2 次尝试更好的东西并没有成功，我也没有足够的兴趣去追求这个更远。不过，我很想听到更好的解决方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-15T13:28:07.403

我提供了补丁，但没有从 SourceForge 上的 DUnit2 团队得到任何反馈。所以我将带有完整提交历史的 DUnit2 分叉到我的 Github 帐户中。我在那里应用了许多修复程序，包括 XE 和 XE3+ 的编译问题以及如果没有发生鼠标操作就会暂停的可编写脚本的自检。我将在我的 Github 帐户 [ [https://github.com/graemeg/dunit2](https://github.com/graemeg/dunit2) ] 上继续开发 DUnit2。

# c# - 例如，当我用线连接 14 个点并尝试移动它们时，它的移动速度非常慢，是什么让它移动得那么慢？

> ID：11190113
> 
> 赞同：-2
> 
> 时间：2012-06-25T13:15:15.937
> 
> 标签：c#

这是绘画事件：

```
private void pictureBox1_Paint(object sender, System.Windows.Forms.PaintEventArgs e)
        {
            SolidBrush brush;
            Pen p=null;
           Point connectionPointStart;
           Point connectionPointEnd;
           Graphics g = e.Graphics;
           g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;
               brush = new SolidBrush(Color.Red);
               p = new Pen(brush);
               for (int idx = 0; idx < wireObject1._point_X.Count; ++idx)
               {
                   Point dPoint = new Point((int)wireObject1._point_X[idx], (int)wireObject1._point_Y[idx]);
                   dPoint.X = dPoint.X - 5; // was - 2
                   dPoint.Y = dPoint.Y - 5; // was - 2
                   Rectangle rect = new Rectangle(dPoint, new Size(10, 10));
                   g.FillEllipse(brush, rect);

               }

               for (int i = 0; i < wireObject1._connectionstart.Count; i++)
               {

                   int startIndex = wireObject1._connectionstart[i];
                   int endIndex = wireObject1._connectionend[i];

                   connectionPointStart = new Point((int)wireObject1._point_X[startIndex], (int)wireObject1._point_Y[startIndex]);
                   connectionPointEnd = new Point((int)wireObject1._point_X[endIndex], (int)wireObject1._point_Y[endIndex]);
                   p.Width = 4;
                   g.DrawLine(p, connectionPointStart, connectionPointEnd);
                   moveCounter++;
                   textBox1.Text = moveCounter.ToString();
               }

        } 
```

在底部的循环中，我正在运行 int 类型的 _connectionstart 列表。

我添加了一个名为 moveCounter 的 int 变量，以查看它调用此循环并绘制线条的次数。

如果我在 pictureBox1 上添加两个点，用一条线将它们连接起来，然后拖动其中一个点围绕其移动平滑。同样的事情有 3 个连接点和 7 个连接点，但是当我到达 9-10 个与许多线连接的点并尝试移动它时，拖动它或任何未连接的点，一切都移动得非常非常慢而且一样多当我在两点之间添加一条新的连接线时，它变得越来越慢。

所以问题可能是我的循环在绘画事件中的错误，或者在移动事件中它做了很多次 pictureBox1.refresh();

所以我在设计器中添加了一个启用它的计时器并将其设置为 30 毫秒。在移动事件中，我举起一个标志，在计时器滴答事件中，我检查标志是否打开，我创建了一个 pictureBox1.refresh(); 并重新设置标志。这个想法是，当我移动点或连接点时，它会每 30 毫秒移动一次。

但这并没有解决问题。仍然当我有 9-10 个点与它们之间的许多线相连时，一切都变得非常缓慢。

这是 picturebox1 鼠标移动事件：

```
private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
        {
            if (mouseMove == true)
            {
                mouseDrag = true;
                Point NewPoint = e.Location;
                                  wireObject1.MovePoint(selectedIndex, NewPoint, NewPoint); // when moving a point dragging the other point is vanished deleted. To check why !

                    label1.Text = "{X = " + NewPoint.X + "}" + " " + "{Y = " + NewPoint.Y + "}";
                    refreshFlag = true;
                    timer2.Start();

            }
            else
            {
                label19.Text = "{X = " + e.X + "}" + " " + "{Y = " + e.Y + "}";
            }
        } 
```

timer2 是我添加的另一个计时器，只是为了查看它在 5 秒内移动了多少次。因此，如果 timer1 设置为 30 毫秒，我应该在 5 秒后看到大约 150 次移动。

所以在 timer1 滴答事件中我做了：

```
private void timer1_Tick(object sender, EventArgs e)
        {
            if (refreshFlag == true)
            {
                pictureBox1.Refresh();
                refreshFlag = false;
            }
        } 
```

我确信 timer1 的想法应该可以解决问题，但它没有。所以我想知道问题出在哪里，也许我在绘画事件中的循环做错了什么？

列表 _connectionstart 包含索引，例如，如果我有两个点与一条线相连，我单击一个点并拖动该点，使线变长或变短，然后在 _connectionstart 中，例如我有一个地方/单元格 [0]其中包含索引 0

例如，在列表 _point_X 中，我现在有两个单元格放置在 [0] 120.0 和 [1] 180.0 中，它们是 _point_Y 列表中相同的点坐标。

现在的问题是问题出在哪里？绘画事件中的错误？与移动事件有关吗？我无法弄清楚为什么当它有 9-10 个点连接它们之间有很多线时它变得如此缓慢。

例如，我现在用与一条线连接的两个点进行测试，我移动了一个点，围绕该点将线拉长或缩短，5 秒后结果为 160 次移动，再过 5 秒后为 323 次，依此类推。所以它似乎正在使用 timer1 和 30 毫秒，或者我错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:33:57.623

首先，对应用程序进行一些调整：您是否尝试运行与绘图分离的逻辑？=> 例如，“updateData()”方法和“draw()”方法？我也建议使用[DoubleBuffer](http://msdn.microsoft.com/de-de/library/system.windows.forms.control.doublebuffered.aspx)。

其次，如果对于更大的数据集（当您添加更多点时）性能很差，那么您的算法就不够高效。如果您想要绘制多边形，请先更新顶点坐标，然后调用[Graphics.DrawPolygon](http://msdn.microsoft.com/en-us/library/dd0c4s09.aspx)

# java - Android、PHP和node.js之间的加解密

> ID：11190114
> 
> 赞同：10
> 
> 时间：2012-06-25T13:15:16.397
> 
> 标签：java, php, android, node.js, encryption-symmetric

我正在尝试在 Android 上用 Java 加密字符串，然后使用 PHP 和/或 node.js 对其进行解密

我试过[http://www.androidsnippets.com/encrypt-decrypt-between-android-and-php](http://www.androidsnippets.com/encrypt-decrypt-between-android-and-php)，但只有前半部分返回的十六进制字符串有效。

我希望使用 128 位密钥（如果可能更高）的 AES 加密类型。

加密密钥也需要可配置，所以我的问题可能与我如何填充字符串有关。

爪哇

```
String.format("%1$-" + n + "s", s) 
```

PHP

```
$key = str_pad($key,16); 
```

完整的 Java 代码：

```
 package com.giggsey.test;

    import java.security.NoSuchAlgorithmException;

    import javax.crypto.Cipher;
    import javax.crypto.NoSuchPaddingException;
    import javax.crypto.spec.IvParameterSpec;
    import javax.crypto.spec.SecretKeySpec;

    import android.util.Log;

    public class SimpleCrypto {

            private String iv = "fedcba9876543210";//Dummy iv (CHANGE IT!)
            private IvParameterSpec ivspec;
            private SecretKeySpec keyspec;
            private Cipher cipher;

            private String SecretKey = "0123456789abcdef";//Dummy secretKey (CHANGE IT!)

            public void doKey(String key)
            {
                    ivspec = new IvParameterSpec(iv.getBytes());

                    key = padRight(key,16);

                    Log.d("hi",key);

                    keyspec = new SecretKeySpec(key.getBytes(), "AES");

                    try {
                            cipher = Cipher.getInstance("AES/CBC/NoPadding");
                    } catch (NoSuchAlgorithmException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                    } catch (NoSuchPaddingException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                    }
            }

            public byte[] encrypt(String text,String key) throws Exception
            {
                    if(text == null || text.length() == 0)
                            throw new Exception("Empty string");

                    doKey(key);

                    byte[] encrypted = null;

                    try {
                            cipher.init(Cipher.ENCRYPT_MODE, keyspec, ivspec);

                            encrypted = cipher.doFinal(padString(text).getBytes());
                    } catch (Exception e)
                    {                       
                            throw new Exception("[encrypt] " + e.getMessage());
                    }

                    return encrypted;
            }

            public byte[] decrypt(String code,String key) throws Exception
            {
                    if(code == null || code.length() == 0)
                            throw new Exception("Empty string");

                    byte[] decrypted = null;

                    doKey(key);

                    try {
                            cipher.init(Cipher.DECRYPT_MODE, keyspec, ivspec);

                            decrypted = cipher.doFinal(hexToBytes(code));
                    } catch (Exception e)
                    {
                            throw new Exception("[decrypt] " + e.getMessage());
                    }
                    return decrypted;
            }

            public static String bytesToHex(byte[] data)
            {
                    if (data==null)
                    {
                            return null;
                    }

                    int len = data.length;
                    String str = "";
                    for (int i=0; i<len; i++) {
                            if ((data[i]&0xFF)<16)
                                    str = str + "0" + java.lang.Integer.toHexString(data[i]&0xFF);
                            else
                                    str = str + java.lang.Integer.toHexString(data[i]&0xFF);
                    }
                    return str;
            }

            public static byte[] hexToBytes(String str) {
                    if (str==null) {
                            return null;
                    } else if (str.length() < 2) {
                            return null;
                    } else {
                            int len = str.length() / 2;
                            byte[] buffer = new byte[len];
                            for (int i=0; i<len; i++) {
                                    buffer[i] = (byte) Integer.parseInt(str.substring(i*2,i*2+2),16);
                            }
                            return buffer;
                    }
            }

            private static String padString(String source)
            {
              char paddingChar = ' ';
              int size = 16;
              int x = source.length() % size;
              int padLength = size - x;

              for (int i = 0; i < padLength; i++)
              {
                      source += paddingChar;
              }

              return source;
            }

            public static String padRight(String s, int n) {
                return String.format("%1$-" + n + "s", s);  
              }
    } 
```

PHP

```
<?php
class MCrypt
    {
            private $iv = 'fedcba9876543210'; #Same as in JAVA
            private $key = '0123456789abcdef'; #Same as in JAVA

            function encrypt($str,$key) {
             $key = str_pad($key,16);
              //$key = $this->hex2bin($key);
              $iv = $this->iv;

              $td = mcrypt_module_open('rijndael-128', '', 'cbc', $iv);

              mcrypt_generic_init($td, $key, $iv);
              $encrypted = mcrypt_generic($td, $str);

              mcrypt_generic_deinit($td);
              mcrypt_module_close($td);

              return bin2hex($encrypted);
            }

            function decrypt($code,$key) {
              //$key = $this->hex2bin($key);
              $code = $this->hex2bin($code);
              $iv = $this->iv;

              $td = mcrypt_module_open('rijndael-128', '', 'cbc', $iv);

              mcrypt_generic_init($td, $key, $iv);
              $decrypted = mdecrypt_generic($td, $code);

              mcrypt_generic_deinit($td);
              mcrypt_module_close($td);

              return utf8_encode(trim($decrypted));
            }

            protected function hex2bin($hexdata) {
              $bindata = '';

              for ($i = 0; $i < strlen($hexdata); $i += 2) {
                    $bindata .= chr(hexdec(substr($hexdata, $i, 2)));
              }

              return $bindata;
            }

    }

$e = new MCrypt();
$p =  $e->encrypt("This is a sample text message","password");

echo "Encrypted: {$p}" . PHP_EOL;

echo "Decrypted: ";
echo $e->decrypt($p,"password") . PHP_EOL;

echo "Java Decryption: ";

echo $e->decrypt("9cf46d007aeff7c0c3cf880c76762037278269ac508aecd55010ce68e9fd980f","password");

echo PHP_EOL; 
```

Java 调用脚本：

```
 String key = "password";
    String message = "This is a sample text message";

    String encrypted;
    try {
        SimpleCrypto s = new SimpleCrypto();
        encrypted = SimpleCrypto.bytesToHex(s.encrypt(message, key));
        Log.d("giggsey-test",encrypted);

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

加密字符串的输出：

爪哇：9cf46d007aeff7c0c3cf880c76762037278269ac508aecd55010ce68e9fd980f

PHP: 9cf46d007aeff7c0c3cf880c76762037a1778e93dd596e4ce745e1f3b0ba9062

完整的 PHP 输出：

> 加密：9cf46d007aeff7c0c3cf880c76762037a1778e93dd596e4ce745e1f3b0ba9062
> 
> 解密：'Ã½A==)nÃ¿|Ã¤Â¨
> 
> xÃ¦Ã,ÃÃÂasV8gE
> 
> Java解密：'Ã½A==)nÃ¿|Ã¤Â¨
> 
> xÃ1)Ã²ÃÃ®ÃÃAÂ½Ã
> 
> 射线

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T15:03:55.437

填充是 PHP 的问题。

```
<?php

function hex2bin($hexdata) {
   $bindata = '';

   for ($i = 0; $i < strlen($hexdata); $i += 2) {
    $bindata .= chr(hexdec(substr($hexdata, $i, 2)));
   }

   return $bindata;
} 

$key = "password";
$data = "This is a sample text message";

$key = str_pad($key,16);

$blockSize = mcrypt_get_block_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);
$padding   = $blockSize - (strlen($data) % $blockSize);
$data      .= str_repeat(chr($padding), $padding);

$c = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, $data, MCRYPT_MODE_CBC, 'fedcba9876543210');

$c = bin2hex($c);

echo $c;

echo PHP_EOL;

$c = hex2bin($c);
$td = mcrypt_module_open(MCRYPT_RIJNDAEL_128,'',MCRYPT_MODE_CBC, '');
mcrypt_generic_init($td, $key, 'fedcba9876543210');
$decrypted = mdecrypt_generic($td, $c);
mcrypt_generic_deinit($td);
mcrypt_module_close($td);

echo $decrypted; 
```

它现在在加密时返回与 Java 相同的结果，我可以很好地解密消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T04:39:04.260

嗨，请检查此[链接。](http://schneimi.wordpress.com/2008/11/25/aes-128bit-encryption-between-java-and-php/)

在这里检查最后一条评论说“**这不适用于 UNICODE 字符**”

这是工作`UTF-8 characters`

这是我在加密之前对我的字符串所做的：

```
myUtf8String = new String(myString.getBytes("UTF-8")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-13T10:11:59.130

// PHP

```
echo base64_encode('something...') 
```

// 爪哇

```
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.crypto.Cipher;
import sun.misc.BASE64Decoder;

public class Decrypt_test {

    public static void main(String[] args) {
        BASE64Decoder decode = new BASE64Decoder();
        try {
            // sample of string to decode: NTI2cWV5d3RkJV4mKg==
            String result = new String(decode.decodeBuffer("string-to-decode"));
            System.out.println(result);
        } catch (IOException ex) {
            Logger.getLogger(Decrypt_test.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

} 
```

这很容易但不好

# c# - Word 文档中的页脚页码

> ID：11190115
> 
> 赞同：1
> 
> 时间：2012-06-25T13:15:24.593
> 
> 标签：c#, vb.net, visual-c++, vba, ms-office

我在 MS Word 互操作中遇到问题。我正在使用 VC++，但我也会接受 C# 中的建议。

当我使用 SaveAs 方法时，在页脚中给出页码的 word 文档中，我得到的是随机页码而不是正确的页码，任何人都可以帮助我。

我也尝试过使用 PageNumbers.GetStartNumber 和 Range.GetInformation 方法，但没有成功。

如何从Word中获取页脚中的实际页码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:30:59.297

这不是 C# 或 VC++，但 VBA 版本会这样。页码可能是一个字段，因此如果有，请使用“选择”。

```
Public Sub GetPageNumber()
    On Error GoTo MyErrorHandler

    Dim currentDocument As Document
    Set currentDocument = ActiveDocument

    Debug.Print Selection.Sections(1).Footers(wdHeaderFooterPrimary).Range.Text 'Or...
    Debug.Print Selection.Sections(1).Footers(wdHeaderFooterPrimary).Range.Fields(1).Result

    Exit Sub

MyErrorHandler:
    MsgBox "GetPageNumber" & vbCrLf & vbCrLf & "Err = " & Err.Number & vbCrLf & "Description: " & Err.Description
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:54:21.810

谢谢，我能够使用此代码解决它。在 VC++ 中

```
Selection oSelection = m_oApp.GetSelection();
Sections ss = oSelection.GetSections();
Section s = ss.GetFirst();
HeadersFooters hf = s.GetHeaders();
HeaderFooter hfItem = hf.Item(1);
PageNumbers ps = hfItem.GetPageNumbers();

//to get the First pageNumber

long nNo = ps.GetStartingNumber();
HeadersFooters footers = s.GetFooters();
HeaderFooter footer = footers.Item(1);
Range r = footer.GetRange();

//to get the First page footer text
CString strFooterText = r.GetText(); 
```

# node.js - Node.js / Express.js 中的 Redis Bitset 操作

> ID：11190116
> 
> 赞同：2
> 
> 时间：2012-06-25T13:15:25.777
> 
> 标签：node.js, redis, express, bitset

我对 Node.js 和 Redis 很陌生。我读了这篇文章，并想使用 bitset 来存储我的 Express.js 应用程序的所有用户信息，如本文所述：http: [//blog.getspool.com/2011/11/29/fast-easy-实时指标使用redis位图/](http://blog.getspool.com/2011/11/29/fast-easy-realtime-metrics-using-redis-bitmaps/)

我有点麻烦。在我的函数中，我获取当前的年、月和日期，然后使用 client.setbit() 设置适当的键和值。但是我怎么能数出所有的钥匙呢？我在 Redis 2.4* 上，BITCOUNT 命令在 2.6 中。还有其他方法吗？这篇文章使用了 Java 位集，所以这是另一回事。我不太明白。

例如，我如何使用 for 循环来计算所有设置为 1 的位？是否有任何操作来计算位集的大小，所以我可以这样做：

```
for (var i = initial_offset; i < bitset_length; i++){
    if (i == 1){
        total_users++;
    }
} 
```

还是我以完全错误的方式去做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:25:31.653

您需要计算存储在 Redis 中的给定字符串的位数。基本上有两种方法可以做到这一点：

*   您可以尝试使用 Redis 2.6 和新的 BITCOUNT/BITOP 操作在服务器端执行此操作。

*   您可以检索整个字符串（包含所有位）并在客户端处理数据。在原始文章中，作者检索 Redis 字符串并将其转换为可以应用位级算法的 Java 位集。相同的策略可以应用于任何客户端、任何语言：您只需要找到一个好的库来处理位数组，或者自己实现一个（这并不难）。它适用于 Redis 2.2 或更高版本。

一个不太有效的策略是在客户端迭代并通过执行 GETBIT 命令检查每个单独的位。这将是非常低效的。

使用 node.js，您可能希望使用以下一些资源来实现第二个选项：

*   [https://gist.github.com/1455345](https://gist.github.com/1455345)
*   [https://github.com/bramstein/bit-array](https://github.com/bramstein/bit-array)
*   [如何在 Javascript 中创建位数组？](https://stackoverflow.com/questions/6972717/how-do-i-create-bit-array-in-javascript)

Node.js 不是一个很好的环境来实现 CPU 消耗操作，但在最坏的情况下，如果你有非常大的位集，你仍然可以依赖从 Node.js 调用的高效 C++ 实现。你有一个很好的[boost::dynamic_bitset](http://www.boost.org/doc/libs/1_49_0/libs/dynamic_bitset/dynamic_bitset.html)。

这是一个 Node.js 示例，其中包含一个非常简单（并且可能效率低下）的计数算法：

```
var redis = require('redis')
var rc = redis.createClient(6379, 'localhost', {return_buffers:true} );

var bitcnt = [ 0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8]

function count(b)
{
  var cnt = 0
  for (i=0; i<b.length; ++i ) {
    cnt += bitcnt[ b[i] ]
  }
  return cnt
}

function fetch( callback )
{
  rc.get( 'mybitset', function(err,reply) {
     callback(reply)
  });
}

function fill( callback )
{
   rc.setbit( 'mybitset', 0, 1 )
   rc.setbit( 'mybitset', 10, 1 )
   rc.setbit( 'mybitset', 20, 1 )
   rc.setbit( 'mybitset', 60, 1, function(err,reply) {
      callback()
   });
}

rc.flushall( function(err,rr) {
   fill( function() {
      fetch( function(b) {
        console.log( "Count = ",count(b) );
      });
   })
}) 
```

请注意 {return_buffers:true} 选项用于确保 Redis 输出被处理为二进制数据（忽略可能的字符转换）。

# python - python中的python代码解析器

> ID：11190126
> 
> 赞同：0
> 
> 时间：2012-06-25T13:16:06.040
> 
> 标签：python, parsing, abstract-syntax-tree

我需要逐行解析python代码。代码：

```
ast.parse("""if True:
print 'Yes' """) 
```

返回 AST 对象，但此行不是：

```
ast.parse("if True:") 
```

有没有办法以某种方式解析它？（使用 RE 进行文本解析除外）

我需要这个来修改python代码，在用户交互式输入python代码后逐行修改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:04:20.870

您只能解析完整有效的 python 语句或表达式。`if True:`不完整：如果你试图解析它，你会得到一个语法错误。

解决方法是先判断是否有完整的语句或表达式；如果不这样做，请缓冲该行并继续读取新行，直到遇到语法错误或完整的表达式。然后在缓冲输入上使用 ast。

该[`compile_command`](http://docs.python.org/library/code.html#code.compile_command)函数可以区分可能不完整而不是不正确的代码字符串。如果代码显示不完整，则返回`None`; 否则它返回一个代码对象（如果有效）或引发一个`SyntaxError`.

我们可以使用这个函数来确定是缓冲还是解析一行。以下未经测试的代码：

```
linebuffer = []
while True:
    line = raw_input()
    linebuffer.append(line)
    try:
        compiled = code.compile_command(''.join(linebuffer))
    except SyntaxError:
        linebuffer = []
    else:
        if compiled is not None:
            tree = ast.parse(''.join(linebuffer))
            linebuffer = [] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:45:08.117

我认为这里唯一的方法是正则表达式。

> 在用户交互输入 python 代码之后。

看起来您的 python 代码实际上只是文本对象，而不是 python 代码......

为什么正则表达式不适合你？

# orm - 从另一个表加入 Symfony2/Doctrine 的计数？

> ID：11190127
> 
> 赞同：0
> 
> 时间：2012-06-25T13:16:07.030
> 
> 标签：orm, symfony, doctrine

我有一些 symfony/doctrine 实体类，我想添加一个从另一个表连接的计数值。是否可以根据注释对其进行配置？伪类只是指出我需要的一个例子。

```
class Person {

    protected $id;

    /**
     * SELECT COUNT(id) FROM children WHERE parent_id=$this->id
     */
    protected $countChildren;
} 
```

我只需要那个值，在这种情况下我会使用它。没有更密切的关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:20:48.427

通常，您将在格式良好的 sql 数据库中具有 1:n 关系，因为显然一个孩子属于一个父母。我假设一个父母可以有多个孩子。

如果你有这种关系，你可以简单地计算孩子的 ArrayCollection。如果没有，您可能必须在存储库中编写 dql 查询并提供父 ID。

我不知道用注释做这件事的任何方法。

# wpf - 创建显示从数据表馈送的 2 张不同图片中的 1 张的 DataGridColumn

> ID：11190129
> 
> 赞同：0
> 
> 时间：2012-06-25T13:16:20.297
> 
> 标签：wpf, datagrid, datatable

所以我得到了这个 DataGrid，我在其中手动定义了所有列：

```
 <DataGrid AutoGenerateColumns="False" <lotsofstuff> ItemsSource="{Binding}">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="firstname" x:Name="firstname" Binding="{Binding Path=firstname}" />
                        <DataGridTextColumn Header="lastname" x:Name="lastname" Binding="{Binding Path=lastname}" />

                        <DataGridCheckBoxColumn Header="sick" x:Name="sick" Binding="{Binding Path=sick}"/>
                        <DataGridCheckBoxColumn Header="vacation" x:Name="vacation" Binding="{Binding Path=vacation}" />
                    </DataGrid.Columns>
                </DataGrid> 
```

到目前为止，用数据表填充它可以正常工作：

```
 DataGrid.ItemsSource = DataTable.DefaultView; 
```

但是在我的数据表中存在第 5 个布尔列，如果它是真的，我希望我的 DataGrid 显示一张图片，如果它是假的，则显示另一张图片。

我怎么做？我没有线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:26:00.013

在. `DataGridTemplateColumn`_ `Image`_ `CellTemplate`Image`Source`属性将是一个绑定表达式，如下所示：

```
{Binding Path=., Converter={StaticResource DataToImageConverter}} 
```

`IValueConverter`为`DataToImageConverter`（例如）创建一个实现以获取 DataItem {Binding} - 这将包括您的布尔值，并且在转换器中您可以返回您喜欢的任何图像。

# ruby-on-rails - 我的税率和运费模型与我的商店有什么关系？

> ID：11190132
> 
> 赞同：0
> 
> 时间：2012-06-25T13:16:30.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我希望能够将税率和运费添加到我的`Store`模型中，但是当我的计划是按特定费率列出商店时，我不知道这些关联。我还计划给费率一个日期列，以便跟踪哪个是什么。这是HABTM关系吗？你怎么看？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:14:47.673

如果我想跟踪费率，那么我会这样做

```
class Store < ActiveRecord::Base
  has_many :rates, :order => 'applied_on desc'
  has_one :actual_rate, :class_name => 'Rate', :order => "applied_on desc"
  scope :with_rate_pc, lambda { |rpc| includes(:rates).where("rates.pourcentage = ?", rpc)}
end

class Rate < ActiveRecord::Base
  belongs_to :store
end 
```

然后你可以做

```
Store.first.rates #to get all past rates
Store.first.actual_rate #to get the last rate 
```

**编辑**：我添加了一个范围`Store`，让你写：

```
Store.with_rate_pc(7%) 
```

# stored-procedures - 存储过程未出现在 EF 代码中

> ID：11190134
> 
> 赞同：2
> 
> 时间：2012-06-25T13:16:33.973
> 
> 标签：stored-procedures, entity-framework-4, database-first

我首先使用 EF 数据库，并向数据库添加了一个存储过程。

当我`Update model from database`在 edmx 文件上运行时，它获取了存储过程，我选择了它作为我想要包含的项目。

我有一个文件，其中包含一个名为`Model<projectname>.Context.cs`的类`Entities`。这是一个自动生成的类，它包含系统中其他存储过程的方法。我的新存储过程在这个类中没有对应的方法，运行`Run custom tool`也无济于事。

还有什么我需要做的，我没有做的吗？

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:53:25.377

EDMX 不支持表值参数。因此，如果您的 proc 使用 TVP 作为参数，则 EDMX 设计人员无法选择它。

编辑：

如果您想检索结果集并为 proc 创建对象/POCO，那么只需删除 tvp，编译 proc，让 EDMX 设计人员拿起您的 proc，生成结果对象，然后将 tvp 添加回您的过程。这是欺骗 EDMX 设计师并获得所需内容的一种非常简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:28:34.477

确保您在 *Model.CONTEXT.tt 文件上执行“运行自定义工具”。

# iphone - presentModalViewController 不调用任何方法

> ID：11190139
> 
> 赞同：-1
> 
> 时间：2012-06-25T13:17:15.277
> 
> 标签：iphone

在 presentModalViewController 中，使用 SSO 登录 Facebook 后不调用任何方法。

```
SignInViewController *signView=[[SignInViewController alloc]init];
signView.delegate=self;
[self.navigationController presentModalViewController:signView animated:YES];
[signView release];
- (void)cancelAction
{
      [self dismissModalViewControllerAnimated:YES];
} 
```

cancelAction 方法正在调用但未关闭..

请帮我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-25T14:16:48.383

```
SignInViewController *signView=[[SignInViewController alloc]init];

UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:signView];

[signView release];

[self presentModalViewController:navigationController animated:YES];

[navigationController release];

-(void)cancelAction
{

      [self dismissModalViewControllerAnimated:YES];
} 
```

尝试实现这个...

希望这对你有用..

# xaml - XAML 嵌套 Gridview 禁用外部网格视觉样式

> ID：11190147
> 
> 赞同：0
> 
> 时间：2012-06-25T13:17:41.757
> 
> 标签：xaml, winrt-xaml

我在 Windows 8 Metro 应用程序中使用嵌套的 Gridview（另一个网格视图中的网格视图）。我想禁用外部网格上所有事件的视觉样式，例如单击、点击和拖动等事件。请帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:14:02.597

您不应该嵌套 GridView。它就像嵌套列表框——即使它有效——它也会让用户感到困惑。

# regex - 使用正则表达式进行时间验证

> ID：11190149
> 
> 赞同：-1
> 
> 时间：2012-06-25T13:17:56.930
> 
> 标签：regex, validation, time

我是 Objective-C 代码编程的新手......并且是我第一次在 Stackoverflow 上发布问题。

有人可以告诉我为什么这段代码不起作用？我已经在测试网站上测试了正则表达式并且工作正常，但在 Xcode 中不起作用......我需要以这种格式（HH：MM）验证时间。

谢谢大家...

（编码）

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString *expression = [[NSString alloc] init];
    if (textField == self.TB_orarioPartenza)
    {

       expression = @"^([0-1][0-9]|[2][0-3]):([0-5][0-9])$";
    }
    if (textField == self.TB_numGiri) {
        expression = @"^d{2}";
    }

    NSString *newString =[textField.text stringByReplacingCharactersInRange:range withString:string];
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:expression 
                                                                           options:0 
                                                                             error:nil];
    NSUInteger numberOfMatches = [regex numberOfMatchesInString:newString
                                                        options:0
                                                          range:NSMakeRange(0, [newString length])];         
    if (numberOfMatches == 0) return NO;        

    return YES;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:04:25.553

对于**h:mm**格式（例如*"9:35"*）使用正则表达式：

`^(?:0?[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$`

对于**hh:mm**格式（例如*"09:35"*）使用正则表达式：

`^(?:0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$`

# c# - 使用 LINQ 将两个不同类型的 IQueryable 变量连接在一起

> ID：11190152
> 
> 赞同：5
> 
> 时间：2012-06-25T13:18:04.843
> 
> 标签：c#, linq, entity-framework

列名称和类型是相同的，但它来自两个独立的实体。这是一个简化的示例：

```
--Query View
var v_res = from s in db.V_CMUCUSTOMER
           select s;

--Values from table less values from view
var res = from s in db.CMUCUSTOMERs
          where !(from v in v_res
            select v.ID).Contains(s.ID)
         select s;

--join table and view values into one variable
var res_v_res = (from c in res
            select c).Union(from v in v_res
            select v); 
```

但是，我收到以下错误：

实例参数：无法从“System.Linq.IQueryable”转换为 System.Linq.ParallelQuery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:57:21.840

如果您指定一个新的匿名类型并使用 ToList() ，那么您应该能够将它们联合如下：

```
var v_res = (from s in db.V_CMUCUSTOMER
            select new { custName = s.customer_name custAddress = s.address}).ToList();

--Values from table less values from view
var res = (from s in db.CMUCUSTOMERs
          where !(from v in v_res
            select v.ID).Contains(s.ID)
          select new { custName = s.customer_name custAddress = s.address }).ToList();

--join table and view values into one variable
var res_v_res = v_res.Union(res); 
```

如果有几十个列，这可能会很繁重但仍然可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:22:08.117

当我在 LINQPad 中运行类似的查询时，我收到一条错误消息，声称`s`在`Contains(s.ID)`此上下文中未定义 in。

如果我替换`&&`为`where`所有查询都成功执行。

# java - Java中的继承打印null

> ID：11190160
> 
> 赞同：-2
> 
> 时间：2012-06-25T13:18:32.560
> 
> 标签：java, inheritance

我对类的继承有疑问。这是我的Java代码：

```
public class spaarRekening extends rekening{
    private double rente;
    public double getRente(){
        return rente;
    }
    spaarRekening(String rN, int s, double d){
        super(rN, s);
        rente = d;
    }
    spaarRekening sR = new spaarRekening("456", 999999, 2.5);
}

public static class rekening implements rekeningIF{
    int saldo;
    static String rekeningNummer; 
    rekening(String rN, int s){
        rekeningNummer = rN;
        saldo = s;
    }
    public static String getRekeningNummer(){
        return rekeningNummer;
    }
    public int getSaldo(){
        return saldo;
    }
} 
```

我想让 spaarRekening 通过以下方式打印出来：

```
System.out.printf("Uw rekeningnummer is: %s\n", spaarRekening.getRekeningNummer()); 
```

但它打印出空值。为什么是这样？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:36:00.090

不要使用`static`. 直到您了解它的工作原理和适用范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:14:51.203

由于您从未创建任何类型的对象`spaarRekening`或`rekening`变量`rekeningNummer`从未被初始化，因为您在构造函数中进行了初始化。

当您在构造函数中初始化它时，您很可能希望使其成为`rekeningNummer`非静态的。

当您真的希望它是静态的时，您也应该以静态方式对其进行初始化。因此，从构造函数中删除代码并在声明时立即对其进行初始化。

```
public class SpaarRekening extends Rekening{
    private double rente;

    SpaarRekening(String rN, int s, double d){
        super(rN, s);
        rente = d;
    }

    public double getRente(){
        return rente;
    }

    public static void main(String[] args) {
            SpaarRekening sR = new SpaarRekening("456", 999999, 2.5d);
            System.out.println(sR.getRekeningNummer());
    }

}

public class Rekening implements RekeningIF{
    protected int saldo;
    protected String rekeningNummer; 

    Rekening(String rN, int s){
        rekeningNummer = rN;
        saldo = s;
    }

    public String getRekeningNummer(){
        return rekeningNummer;
    }

    public int getSaldo(){
        return saldo;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T13:58:55.607

您永远不会初始化 rekeningNummer，默认值为 null。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T13:54:32.820

你`rekeningNummer`是一个静态变量，类型`Object`和在你的代码中。该变量尚未初始化，因此打印了`null`.

您必须在使用静态变量之前对其进行初始化：

```
public static class Rekening implements RekeningIF{
    int saldo;
    static String rekeningNummer = ""; // initialized to empty String

    Rekening(String rN, int s){
        rekeningNummer = rN;
        saldo = s;
    }

    public static String getRekeningNummer(){
        return rekeningNummer;
    }

    // Provide method for setting value of rekeningNumber
    public static void setRekeningNumber(String number) {
        rekening.rekeningNummer = number;
    }

    public int getSaldo(){
        return saldo;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T14:28:14.883

您从未初始化`rekeningNummer`，您可能认为 `spaarRekening sR = new spaarRekening("456", 999999, 2.5);`您的`spaarRekening` 类中的语句将初始化它，但您将它放在类定义中，您实际上并没有实例化任何`spaarRekening`实例。删除该语句，并在代码中的其他位置实例化它

# c++ - C++：初始化、限制和变量

> ID：11190166
> 
> 赞同：2
> 
> 时间：2012-06-25T13:18:58.503
> 
> 标签：c++, initialization, limit

免责声明，编程新手，通过 C++ Prime Plus 第 6 版工作。

我正在通过清单 3.1 工作。

```
#include <iostream> 
#include <climits>
int main()
{
    using namespace std;
    int n_int = INT_MAX;
    cout << "int is " << sizeof n_int << " bytes." << endl;

    return 0;

} 
```

所以我明白了，这会创建一个变量来设置最大 int 值。

但是，有什么理由我不应该也不能去：

```
cout << "int is " << sizeof (INT_MAX) << " bytes." << endl; 
```

因为它给出了正确的长度。但是当我尝试使用 ( `SHRT_MAX`) 时，它返回 4 个字节，而我希望它会返回 2。

再次使用 ( `LLONG_MAX`) 它正确返回 8 个字节，但是 ( `LONG_MAX`) 错误地返回 8。

任何澄清都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T13:58:55.680

中定义的值`<climits>`是扩展为整数文字的宏。整数字面量的类型是可以容纳该值的最小整数类型，但不小于`int`.

所以`INT_MAX`会有类型`int`，所以和`sizeof INT_MAX`一样`sizeof (int)`。但是，`SHRT_MAX`也会有 type `int`，所以`sizeof SHRT_MAX`不一定 equal `sizeof (short)`。

# java - 添加 TabListener 时出现 NullPointerException

> ID：11190169
> 
> 赞同：0
> 
> 时间：2012-06-25T13:19:13.980
> 
> 标签：java, android, actionbarsherlock, android-actionbar

我在 LogCat 中收到此错误消息：

> 06-25 15:17:34.495：E/AndroidRuntime(5891)：java.lang.RuntimeException：无法启动活动 ComponentInfo{com.example/com.example.MainActivity}： **java.lang.NullPointerException** 06-25 16:07 :43.589: E/AndroidRuntime(6587): 由: java.lang.NullPointerException 06-25 16:07:43.589: E/AndroidRuntime(6587): **at com.example.MyTabsListener.onTabSelected(MyTabListener.java:28)**

这是我的主要活动：

```
package com.example;

import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockActivity;

public class MainActivity extends SherlockActivity {    
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ActionBar actionbar = getSupportActionBar();
        actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        ActionBar.Tab tab1 = actionbar.newTab().setText("Fragment A");
        SherlockFragment fragment1 = new AFragment();

        tab1.setTabListener(new MyTabsListener(fragment1, this
            .getApplicationContext()));
        actionbar.addTab(tab1);
    }

} 
```

还有我简单的 TabListener：

```
package com.example;    

import android.content.Context;
import android.support.v4.app.FragmentTransaction;
import android.widget.Toast;  

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockFragment;

class MyTabsListener implements ActionBar.TabListener {
    public SherlockFragment fragment;
    private final Context appContext;

    public MyTabsListener(SherlockFragment fragment, Context ctx) {
        this.fragment = fragment;
        this.appContext = ctx;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        Toast.makeText(this.appContext, "Reselected!", Toast.LENGTH_LONG)
                .show();
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.replace(R.id.fragment_container, fragment);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.remove(fragment);
    }
} 
```

最后是我的班级*片段 A*：

```
package com.example;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import com.actionbarsherlock.app.SherlockFragment;

public class AFragment extends SherlockFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.weekdays, container, false);
    }

} 
```

所以这个函数导致 TabListener 中的错误：

```
@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
  ft.replace(R.id.fragment_container, fragment);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T19:32:12.967

我刚刚遇到了同样的问题，我想我已经解决了。

基本上，您的**MainActivity**应该扩展**SherlockFragmentActivity**而不是**SherlockActivity**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T19:44:57.570

1.  MainActivity 必须扩展`SherlockFragmentActivity`（感谢 JosipPranjic！）。
2.  *NullPointerException*可以使用此 SO 问题中的以下代码修复：Null [FragmentTransaction being passing to TabListener.onTabSelected()](https://stackoverflow.com/questions/8645549/null-fragmenttransaction-being-passed-to-tablistener-ontabselected)

    ```
    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ignoredFt) {
      FragmentManager fragMgr = ((FragmentActivity) mActivity)
            .getSupportFragmentManager();
      FragmentTransaction ft = fragMgr.beginTransaction();

      // Check if the fragment is already initialized
      if (mFragment == null) {
          // If not, instantiate and add it to the activity
          mFragment = Fragment.instantiate(mActivity, mClass.getName());

          ft.add(android.R.id.content, mFragment, mTag);
      } else {
          // If it exists, simply attach it in order to show it
          ft.attach(mFragment);
      }

      ft.commit();
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ignoredFt) {
      FragmentManager fragMgr = ((FragmentActivity) mActivity)
              .getSupportFragmentManager();
      FragmentTransaction ft = fragMgr.beginTransaction();

      // Check if the fragment is already initialized
      if (mFragment == null) {
          // If not, instantiate and add it to the activity
          mFragment = Fragment.instantiate(mActivity, mClass.getName());

          ft.add(android.R.id.content, mFragment, mTag);
      } else {
          // If it exists, simply attach it in order to show it
          ft.detach(mFragment);
      }

      ft.commit();
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T13:58:41.630

看起来 appContext 没有在代码中初始化......请初始化那个......

用于`MyTabsListener`

```
Toast.makeText(MainActivity.appContext, "Reselected!", Toast.LENGTH_LONG).show(); 
```

但是如果可能的话，将它传递给 MyTabsListener 的构造函数，而不是让它成为静态的

```
new MyTabsListener(fragment1,this) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T14:20:58.300

`appContext`未初始化。请注意， class`Activity`扩展了 class `Context`，因此，要显示 a `Toast`，就足够了

```
Toast.makeText(MainActivity, "Reselected!", Toast.LENGTH_LONG).show(); 
```

另一个问题：如果您想使用真实的应用程序上下文，请尝试`getApplicationContext()`. 这将返回单例应用程序上下文。更多信息：[链接](http://www.devahead.com/blog/2011/06/extending-the-android-application-class-and-dealing-with-singleton/)

# javascript - 在画布中伪造一个 3d 球体

> ID：11190171
> 
> 赞同：3
> 
> 时间：2012-06-25T13:19:31.507
> 
> 标签：javascript, image, canvas

我有一个关于在 HTML5/Canvas/Javascript 中伪造 3d 的问题...

`<canvas>`基本上，我在using上绘制了一个 2d 图像`drawImage()`。
我想做的是绘制图像，然后置换球体上的纹理以看起来......*类似球体*......

为了清楚起见，请参见下图：

![Javascript 中的球体](../Images/cb0ae15e84bfbcadb4e12a0d2fba9b21.png)

有任何想法吗？

我已经在谷歌上搜索到自己濒临死亡，它**也不能**是 WebGL，因为它必须在手机上工作......有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T21:38:24.257

您可以在此处检查工作原型：http: [//jsbin.com/ipaliq/edit](http://jsbin.com/ipaliq/edit)

我敢打赌，优化和更好/更快的算法还有很多空间，但我希望这个概念证明能为您指明正确的方向。

基本算法遍历原始图像的每个像素，如果它受到球面变形，则计算其新位置。

结果如下：

![领域](../Images/0eeaeccac63dcbe28d9dc4c95bd99d59.png)

代码：

```
var w = 150, h = 150;
var canvas=document.getElementById("myCanvas");
var ctx=canvas.getContext("2d");
    ctx.fillStyle="red";
    ctx.fillRect(0,0,w,h);

//-- Init Canvas
var initCanvas = function()
{
  var imgData=ctx.getImageData(0,0,w,h);
  for (i=0; i<imgData.width*imgData.height*4;i+=4)
  {
    imgData.data[i]=i%150*1.5;
    imgData.data[i+1]=i%150*1.5;
    imgData.data[i+2]=(i/imgData.width)%150*1.5;
    imgData.data[i+3]=255;
  }
  ctx.putImageData(imgData,0,0);
};
initCanvas();

var doSpherize = function()
{
    var refractionIndex = 0.5; // [0..1]
        //refraction index of the sphere
    var radius = 75;
    var radius2 = radius * radius;
    var centerX = 75; 
    var centerY = 75; 
        //center of the sphere
    var origX = 0;
    var origY = 0;

    for (x=0; x<w;x+=1)
    for (y=0; y<h;y+=1)
    {
        var distX = x - centerX;
        var distY = y - centerY;

        var r2 = distX * distX + distY * distY;

        origX = x;
        origY = y;

        if ( r2 > 0.0 && r2 < radius2 )
        {
            // distance
            var z2 = radius2 - r2;
            var z = Math.sqrt(z2);

            // refraction
            var xa = Math.asin( distX / Math.sqrt( distX * distX + z2 ) );
            var xb = xa - xa * refractionIndex;
            var ya = Math.asin( distY / Math.sqrt( distY * distY + z2 ) );
            var yb = ya - ya * refractionIndex;

            // displacement
            origX = origX - z * Math.tan( xb );
            origY = origY - z * Math.tan( yb );
        }

      // read
      var imgData=ctx.getImageData(origX,origY,1,1);
      // write
      ctx.putImageData(imgData,x+w,y+h);
    }
};
doSpherize(); 
```

**笔记**

我建议不要在没有 webGL 像素着色器的情况下由前端处理如此密集的操作。这些都非常优化，将能够利用 GPU 加速。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:16:14.077

你绝对可以做这样的事情。我不确定质量和速度是否足够好，尤其是在移动设备上。

你会想要`getImageData`像素，对它们执行一些我目前无法想到的数学变换，然后将`putImageData`它们返回。

它可能看起来有点模糊或像素化（你可以尝试插值，但这只会让你到目前为止）。而且您可能必须大幅优化您的 javascript 才能在合理的时间内在移动设备上完成它。

转换可能类似于逆方位角投影。

# c# - TCP 客户端和套接字的问题

> ID：11190172
> 
> 赞同：1
> 
> 时间：2012-06-25T13:19:35.260
> 
> 标签：c#, sockets, tcp, client

背景：我的应用程序可以选择自动检查网络上的设备是否已连接到网络。

如果设备未连接，则表示为蓝色方块，绿色方块表示已连接。我已经对程序进行了相当彻底的测试，并且有几组不同的数据可供查看；

如果设备开始断开连接，我可以连接，然后断开连接，从蓝色变为绿色，再到蓝色，但在此之后停止运行。

如果设备开始连接，我可以断开连接，但不能再次连接，所以它从绿色变为蓝色，然后停止运行。

这里有一些代码片段来展示我是如何连接到这些的（这不是异步的，因为某些设备没有回调（？））；

```
TcpClient _tc = new TcpClient();
if (!_tc.Client.Connected)
            {
                try
                {
                    _tc.Client.Connect(device.deviceIPAddress, device.devicePort);
                    _tc.Client.ReceiveTimeout = 10;
                }
                catch
                {
                    if (deviceDownNotified == false)
                    {

                        //do stuff to notify me

                    }
                }

            }

            if (_tc.Client.Connected)
                {
                  tcpSet = true;
                    try
                    {
                        result = this.SendCommandResult(bData, 72);

                        if (result[0] == 0xF0 && result[1] == 0xF0 && result[2] == 0x00 && result[3] == 0x02 && result[68] == 0xF0 && result[69] == 0xF0)
                        {

                            CheckChanges(result, device, exit);
                            deviceDownNotified = false;

                        }
                    }
                    catch
                    {

                    }

                 } 
```

编辑：我也只是在想，有时我真的不需要手动断开连接。如果客户端未连接，则连接，如果已连接，则执行操作。我对它在状态之间切换一次并停止工作感到有点困惑。

我认为我的问题可能是由于如果设备断开连接我断开套接字/客户端的方式。有人有想法么？如果您需要更多信息，请询问。

编辑2：我连接了一个重新连接按钮，当它应该重新连接时我手动单击它，我收到以下错误异常：

“一旦套接字断开连接，您只能异步重新连接，并且只能连接到不同的端点。必须在操作完成之前不会退出的线程上调用 BeginConnect。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:19:34.187

解决了我自己的问题。最后。这里有一些信息，供那些正在寻找解决方案的人阅读。

据我所知，当 TCP 连接中断时，您必须创建一个新连接，因为无法以这种方式重新连接或重用。我所做的是：

（根据我的问题中的代码修改）

```
if (!_tc.Connected)
            {
                try
                {

                    connect2(deviceIPAddress, devicePort);

                }
                catch
                {
                    if (deviceDownNotified == false)
                    {

                        ((ListBox)mainUI.Controls["lbLog"]).InvokeEx(f => ((ListBox)mainUI.Controls["lbLog"]).Items.Add("device " + device.deviceDescription + " down at " + System.DateTime.Now));
                        (mainUI.Controls["btn" + device.deviceButtonNumber]).BackgroundImage = null;
                        (mainUI.Controls["btn" + device.deviceButtonNumber]).BackColor = Color.Blue;
                        deviceDownNotified = true;
                        try
                        {

                            _tc = new TcpClient();

                            initialPoll = false;

                            MessageBox.Show("here");
                        }
                        catch (Exception error)
                        {
                            MessageBox.Show(error.Message);
                        }
                    }
                }

            } 
```

在这里，我简单地创建了一个具有相同名称的新 tcplistener（我原来的一个是一个类实例的变量（真是绕口令）。创建这个新的 TCP 实例，然后设置我的 inialPoll 变量允许一切回到正轨。

# symfony - Doctrine2 和持久性：级联错误

> ID：11190175
> 
> 赞同：0
> 
> 时间：2012-06-25T13:19:52.863
> 
> 标签：symfony, doctrine-orm

为了让它更快，我在实体上使用 Doctrine2。

我的一个实体，用户，通过一对一的关系拥有一个联系人。

我同时创建它们，坚持“用户的孩子”（这里是他的联系人），然后继续坚持用户本身。我这样做非常笼统：

```
$em = $this->getDoctrine()
    ->getEntityManager();
$em->persist($object->getChildren()); //object->getChildren() is the Contact here
$em->persist($object); // $object is my User
$em->flush(); 
```

联系人的持久性工作了一次（我真的不知道如何或为什么），但从那时起，每次我以这种方式坚持用户时，它都会失败，给我这个错误消息：

通过关系“Aurae\UserBundle\Entity\User#contact”找到了一个新实体，该实体未配置为对实体进行级联持久化操作：Aurae\UserBundle\Entity\Contact@00000000554b2adc000000007fa05d30。显式持久化新实体或在关系上配置级联持久化操作。如果您无法找出导致问题的实体，请执行“Aurae\UserBundle\Entity\Contact#__toString()”以获取线索。

我尝试在用户中声明级联持续存在，但它没有改变任何东西。

与用户保持联系的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:48:41.193

`cascade={"persist"}`在用户中的联系人声明上解决了这个问题。结案。

# text - .txt 文件中指定的批处理文件复制文件夹

> ID：11190176
> 
> 赞同：1
> 
> 时间：2012-06-25T13:19:55.357
> 
> 标签：text, batch-file, copy, directory

我正在寻找将复制文本文件中指定的文件夹的批处理文件代码。
所以在文本文件中

C:\User\
C:\Random\Random\Random
等等。
目的地将设置在 N:\Backups\PC

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:54:40.620

```
set dest=N:\Backups\PC
for /f %%i in (C:\dirs.txt) do copy "%%i" %dest% 
```

# asp.net - 数据库中已经有一个名为“应用程序”的对象

> ID：11190178
> 
> 赞同：2
> 
> 时间：2012-06-25T13:20:04.853
> 
> 标签：asp.net, sql-server-2008, entity-framework, asp.net-mvc-4, asp.net-web-api

当我调用 method 时，我在我的 asp.net webapi 服务中遇到了这个错误`Membership.ValidateUser(email, password);`。我正在使用 EF 4.3.1。使用此代码创建的数据库

```
 using (var db = DbFactory.Get())
            {
                Console.WriteLine("Creating new database...");
                db.Database.Create();
                Console.WriteLine("Initializing with initial objects...");
                db.Database.Initialize(true);
            } 
```

我只在第一次启动服务时收到此错误。有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:58:09.787

听起来您的应用程序第一次启动时，数据库中已经有一个名为“应用程序”的对象。
您提供的代码片段是否仅在启动时运行？
尝试通过数据库管理引擎删除对象，然后重新运行您的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:54:25.920

该错误是不言自明的。

您正在尝试创建一个已命名`Applications`但该对象已存在于数据库中的对象（例如：表、sp、视图等）。

也许您在初始测试后没有将其删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-24T00:41:55.163

如果您尝试在正确的项目上运行它：

检查您的迁移文件夹，您的 InitialCreate 类的 Up 方法可能正在尝试创建 Application 表。你可以

删除表并再次运行代码

或者

正确设置 InitialCreate 以处理这种情况

# objective-c - 以毫秒为单位的时间到典型的时间格式

> ID：11190181
> 
> 赞同：4
> 
> 时间：2012-06-25T13:20:14.147
> 
> 标签：objective-c, xcode, time

我需要将以毫秒为单位的时间（例如 116124）转换为典型的时间格式，如下所示：03:12:32:04。

我不知道如何简单地做到这一点......你能帮我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T14:20:50.017

根据此处链接的 Apple Dev 论坛：

[https://discussions.apple.com/thread/2350190?start=0&tstart=0](https://discussions.apple.com/thread/2350190?start=0&tstart=0)

你必须自己做。这是您可以使用的函数，它将返回格式化的字符串：

```
- (NSString *) formatInterval: (NSTimeInterval) interval{
unsigned long milliseconds = interval;
unsigned long seconds = milliseconds / 1000;
milliseconds %= 1000;
unsigned long minutes = seconds / 60;
seconds %= 60;
unsigned long hours = minutes / 60;
minutes %= 60;

NSMutableString * result = [NSMutableString new];

if(hours)
    [result appendFormat: @"%d:", hours];

[result appendFormat: @"%2d:", minutes];
[result appendFormat: @"%2d:", seconds];
[result appendFormat: @"%2d",milliseconds];

return result;
} 
```

# msbuild - 是否可以在安装包期间应用 Web 配置转换

> ID：11190185
> 
> 赞同：1
> 
> 时间：2012-06-25T13:20:53.687
> 
> 标签：msbuild, web-config, teamcity, transform, msdeploy

如果您创建了一个具有 release1 配置的包。并且您想使用相同的包将其推送到实时服务器，但您需要具有不同的 Web 配置设置。是否可以安装该软件包并为各种其他配置（LIVE1、LIVE2）执行 Web 配置转换。请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:18:07.603

您可以使用 Web 部署参数，而不是将 Web.config 转换放在转换文件中。然后，可以在包安装期间在 IIS 管理器 UI 中设置参数值（如果您使用它来安装包），或者如果您使用命令行安装它，则可以在随包提供的文件中设置参数值。有关示例，请参阅[http://msdn.microsoft.com/en-us/library/ff398068(v=vs.110](http://msdn.microsoft.com/en-us/library/ff398068(v=vs.110) )中**的使用 Web.Config 文件设置**的部署参数

另一种选择是使用 PackageWeb Nuget 包，它目前是一个测试版：

[http://nuget.org/packages/PackageWeb](http://nuget.org/packages/PackageWeb)

本博客介绍了PackageWeb：

[http://sedodream.com/2011/12/24/PackageOncePublishAnywhere.aspx](http://sedodream.com/2011/12/24/PackageOncePublishAnywhere.aspx)

# java - 如何使用休眠在数据库中为整数字段设置空值？

> ID：11190186
> 
> 赞同：3
> 
> 时间：2012-06-25T13:21:03.593
> 
> 标签：java, hibernate, netbeans, null

我正在尝试将数据库中的字段更新为整数字段的空值。我正在尝试使用休眠来做到这一点。我可以将对象字段（如 String 和任何其他对象）设置为 null 但不设置整数。

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<class name="App_Users" table="app_users" schema="bidtool">

    <id name="userId" type="int" column="user_id">           
        <generator class="assigned"/>
    </id>  

    <property name="username" type="string">
        <column name="username" length="20" not-null="true" />
    </property>
    <property name="password" type="string">
        <column name="password" length="20" not-null="true" />
    </property>
    <property name="firstname" type="string">
        <column name="firstname" length="20" />
    </property>
    <property name="lastname" type="string">
        <column name="lastname" length="20" />
    </property>
    <property name="userType" type="int">
        <column name="user_type" />
    </property>

    <many-to-one class="MasterOrg"  fetch="select"  name="masterOrg">
        <column name="master_org_id" />
    </many-to-one>

   <many-to-one class="CarrierScac"  fetch="select" name="carrierScac">
        <column name="scac" />
    </many-to-one>

     <one-to-one class="AppUserDetails" fetch="select" name="details" constrained="true"/>

    <set name="profiles" inverse="true">
        <key>
            <column name="user_id" />
        </key>
        <one-to-many class="Profiles" />
    </set>

    <set name="boilerPlates" inverse="true">
        <key>
            <column name="user_id" />
        </key>
        <one-to-many class="BoilerPlate" />
    </set>

    <set name="rates" inverse="true" >
        <key>
            <column name="user_id" />
        </key>
        <one-to-many class="BidToolRates" />
    </set>

</class> 
```

在上面的休眠映射代码中，我想将 MasterOrg 字段设置为空。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T19:54:32.287

最好将对象包装器用于原始类型，即 Integer 用于 int，Double 用于 double 等，因为原始类型不允许 null 的可能性，而这在数据库设计中总是可能的。

即使一个值在数据库中声明为非空，Object 类型仍然有用。以以下场景为例。

```
@Entity 
public class ExampleEntity {
    @Column(name="some_column") // assume this column is defined not null in the database 
    private int someProperty; 

    getttes settters other fields go here 
```

}

假设您编写以下代码

```
ExampleEntity t = new ExampleEntity();
entityManager.persist(t); 
```

在此示例中，t.someProperty 的值为 0，因为这是 int 的默认值，因此 entityManager.persist 有效，但可能 0 不是该列的有效值。如果您对该列有数据库约束，那么您会收到错误消息，否则您的数据库中有错误数据。

如果 someProperty 被声明为包装类型为 Integer 并且开发人员忘记设置 somePorpety 值，那么您将得到一个非空异常。

始终使用包装器的第二个原因是作为开发人员的简单性，我希望跨实体的结构保持一致，因为代码被更频繁地阅读，以至于它被普遍地使用实体上的包装器类型编写，这使得事情对于某些人在 5 年后维护代码是可预测的。

# android - 无法传递 ArrayList 参加一项活动

> ID：11190191
> 
> 赞同：5
> 
> 时间：2012-06-25T13:21:08.037
> 
> 标签：android, android-activity, parameters, parcelable

这是代码

```
ArrayList<MyObject> list = new ArrayList<MyObject>();
list.add(new MyObject());
Intent intent = new Intent(this, ReceiverActivity.class);
intent.putExtra("list", list);
startActivity(intent); 
```

接收者活动

```
List<MyObject> list = (List<MyObject>)getIntent().getExtras().getParcelable("list"); 
```

这里列表为空。这也不起作用：

```
List<MyObject> list = (List<MyObject>)getIntent().getExtras().getSerializable("list"); 
```

MyObject 是 Parcelable，我实现了所有必需的方法。我想这个实现不是问题，因为否则我会收到其他类型的异常。但除了列表为空之外，我什么也没得到。

提前致谢...

现在我发现了这个：

```
List<Parcelable> list = (List<Parcelable>)getIntent().getParcelableArrayListExtra("list"); 
```

必须在接收器活动中使用它，但是我如何发送它以及如何从中`List<MyObject>`获取`List<Parcelable>`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-25T13:54:26.107

`i.putParcelableArrayListExtra(name, value)`在我是你的意图的地方使用。不要将 putExtra() 用于可打包的 ArrayList。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-22T20:22:21.833

尝试：

```
ArrayList<MyObject> myList = extras.<MyObject>getParcelableArrayList("list")); 
```

# sql - 创建新行时调用身份

> ID：11190193
> 
> 赞同：0
> 
> 时间：2012-06-25T13:21:08.247
> 
> 标签：sql, hsqldb

我正在尝试将整数分配给新创建的行：

```
INSERT INTO wcategory (name, description) values ('Manager','Hotel Managment');
INSERT INTO worker (name, categoryID) values ('User', CAL IDENTITY() ); 
```

但是，我似乎收到了意外的令牌 CALL 错误。知道如何正确调用最后一个身份吗？或者至少有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:57:35.157

使用 @@identity 或 scope_identity()。将它保存在一个变量中，然后在下一个插入语句中使用它。

# jpa - 在使用 EJB 3.1 和 JPA 2.0 的系统中，应该在哪里缓存 CriteriaQuery 对象？

> ID：11190196
> 
> 赞同：0
> 
> 时间：2012-06-25T13:21:17.640
> 
> 标签：jpa, ejb-3.1

JPA 2.0 规范在第 6.9 节中提到`CriteriaQuery`对象是可序列化的，因此可能比任何 open`EntityManager`或`EntityManagerFactory`实例的寿命更长：

> CriteriaQuery 对象必须是可序列化的。持久性供应商需要支持随后将 CriteriaQuery 对象反序列化为该供应商运行时的单独 JVM 实例，其中两个运行时实例都可以访问任何所需的供应商实现类。

EJB 3.1 规范在第 21.2.2 节中说：

> 企业 bean 不得使用线程同步原语来同步多个实例的执行，除非它是具有 bean 管理的并发性的单例会话 bean。

`CriteriaQuery`如果我有一个无状态会话 bean，希望使用`CriteriaBuilder`从注入的 a 预构建一堆对象`@PersistenceContext`，我应该将结果存储在哪里？

我可以想到以下可能性，但我担心除了一个之外的所有可能性都与上面的“无同步原语”条款相冲突：

*   在一个`Map`存储为我的 bean 实例字段之一的值中，了解我必须同步对地图的访问。我的看法：违反第 21.2.2 节。

*   在`ConcurrentMap`其中存储为我的 bean 实例字段之一的值。我的看法：仍然违反第 21.2.2 节，因为我确信`ConcurrentMap`实现在某处同步。

*   在某个`@Singleton`EJB 的实例字段中，其`@Singleton`存在只是为了充当这种缓存；使用 bean 管理的并发这应该是合法的，但是现在我所有想要使用此`CriteriaQuery`缓存的无状态会话 bean 都必须将单例注入到它们自己中......似乎有很多开销。

所以听起来严格来说最后一个选项是唯一符合规范的选项。我对么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:26:16.687

我会考虑将它们放在一个简单的静态上下文中，可以从任何地方访问。问题在于初始化它们，因为您需要一个实体管理器实例来执行此操作。可能是用于初始化事物的单例 ejb，如[JBoss 启动时 EJB 中的调用方法中](https://stackoverflow.com/questions/2995511/call-method-in-ejb-on-jboss-startup)所述。单例可以初始化您的条件查询缓存，然后可以通过静态上下文为您的 DAO 提供条件查询。

另一种选择是使用内置支持预编译查询的 JPQL。当然，您会失去使用条件 API 的一些优势，尽管我认为主要问题（类型安全等）可能没问题，因为如果预编译查询在部署时而不是运行时无效，则它们应该抛出异常。

# javascript - 拉斐尔 JavaScript

> ID：11190198
> 
> 赞同：0
> 
> 时间：2012-06-25T13:21:29.423
> 
> 标签：javascript, raphael

我是 Raphael 的新手，正在尝试做一些非常简单的事情，但失败得很惨。有谁知道如何创建拉斐尔画布并设置背景颜色（例如：绿色）？这是我到目前为止所拥有的，但是当我在浏览器中打开它时，它什么也没有显示......

```
<html>
<head><title></title>
<script src="raphael-min.js"></script>
</head>

<body>

<script type="text/javascript">
//all your javascript goes here

var paper = Raphael(15,40,320,300);

</script>

</body>
</html> 
```

当我将此代码放入 js 脚本中时，它会正确显示一个圆圈...

```
var circle = paper.circle(50,10,10);
circle.attr("fill","#0f0"); 
```

但同样，我的问题是尝试设置背景颜色。任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:10:51.563

RaphaelJS 不提供默认的背景样式，因为它的事件系统依赖于对象驱动。但是，您可以指定一个特定的 DIV 并相应地对其进行样式设置：

```
<div 
    id="my_paper_div" 
    style="background-color:limegreen;width:400px;height:400px"
></div> 
```

确保您没有调用 DIV 或变量文件。给它们起不同的名字，否则你会遇到一些 IE 不兼容的问题。

像这样重新声明你的纸质javascript：

```
// declare outside the startup scope, so you can do fancy things later
var my_paper;

// raphaeljs' version of onload
Raphael( function() {
    my_paper = Raphael("my_paper_div", 400, 400);
}); 
```

Since RaphaelJS rendering doesn't interfere with the background, you can technically mix and match HTML and SVG/VML. For example, see this jsfiddle: [http://jsfiddle.net/NQtU5/](http://jsfiddle.net/NQtU5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T00:48:28.310

You could also draw a rectangle the size of the canvas:

```
var paper = Raphael("my_paper_div", 600, 400),
    placemat = paper.rect(0,0,paper.width,paper.height).attr({"fill" : "#99FF99" }); 
```

I usually start this way with Raphael projects because I find it useful to have an object in the background to which to attach events, like a click event that closes all open tooltips.

[See example](http://jsfiddle.net/chriswilsondc/CDNCB/4/).

# sphinx - 狮身人面像搜索和排名基于词的位置

> ID：11190200
> 
> 赞同：1
> 
> 时间：2012-06-25T13:21:34.307
> 
> 标签：sphinx

是否有可能使用 Sphinx Search 来确定结果的权重取决于单词在列表中的位置？

例如，如果您的行中的列包含以下文本：

```
Row #1: "dog, bird, horse, cat"
Row #2: "dog, bird, cat" 
```

然后使用`"dog | cat"`我希望第 2 行的排名高于第 1 行执行 OR 搜索，因为两者`"dog"`都`"cat"`找到了，但 #2 使这两个比 #1 更接近。

希望这是有道理的。

谢谢

迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:24:39.523

您可以通过使用字段级别排名来做到这一点。使用“SPH_RANK_EXPR”作为您的排名并查看字段级别因子“min_hit_pos”来判断哪个单词首先匹配。

所有信息都可以在[http://sphinxsearch.com/docs/manual-2.0.4.html#weighting找到](http://sphinxsearch.com/docs/manual-2.0.4.html#weighting)

如果您仔细查看下面的 SPH_RANK_SPH04 排名算法，它包括 min_hit_pos，但仅将功劳归于匹配词为第一个词的行。

```
sum((4*lcs+2*(min_hit_pos==1)+exact_hit)*user_weight)*1000+bm25 
```

您可以做的是使用相同的算法，但将“2*(min_hit_pos==1)”更改为如下所示：-

```
(101-IF(min_hit_pos<100,min_hit_pos,100)) 
```

如果在第一个单词上匹配，一行将获得额外的 100 权重，如果在第二个单词上匹配，则为 99，依此类推，直到第 100 个单词，之后不再给予权重。

您可以使用这些值并包含一个乘数以查看结果是否更好。

希望有帮助。如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:06:05.080

你试过SPH_RANK_PROXIMITY排名模式吗？

* * *

否则可能会更明确并执行类似的查询 - 使用 SPH_RANK_WORDCOUNT

```
"dog cat"/1 | "dog cat"~10 | "dog cat"~8 | "dog cat"~6 | "dog cat"~4 | "dog cat"~3 | "dog cat"~2 | "dog cat"~1 
```

或类似的。

# d - 你如何在 D 中使用范围？

> ID：11190204
> 
> 赞同：7
> 
> 时间：2012-06-25T13:21:50.667
> 
> 标签：d, range, phobos

每当我尝试在 D 中使用范围时，我都会惨遭失败。

在 D 中使用范围的正确方法是什么？（请参阅内联评论以了解我的困惑。）

```
void print(R)(/* ref? auto ref? neither? */ R r)
{
    foreach (x; r)
    {
        writeln(x);
    }

    // Million $$$ question:
    //
    // Will I get back the same things as last time?
    // Do I have to check for this every time?

    foreach (x; r)
    {
        writeln(x);
    }
}

void test2(alias F, R)(/* ref/auto ref? */ R items)
{
    // Will it consume items?
    // _Should_ it consume items?
    // Will the caller be affected? How do I know?
    // Am I supposed to?
    F(items);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T18:08:57.717

如果您还没有阅读范围，您可能应该阅读[本教程。](http://ddili.org/ders/d.en/ranges.html)

范围何时会被消耗和不会被消耗取决于它的类型。如果它是输入范围而*不是*前向范围（例如，如果它是某种类型的输入流 -[`std.stdio.byLine`](http://dlang.org/phobos/std_stdio.html#byLine)就是一个例子），那么以任何形状或形式对其进行迭代都会消耗它。

```
//Will consume
auto result = find(inRange, needle);

//Will consume
foreach(e; inRange) {} 
```

如果它是一个前向范围并且它是一个引用类型，那么它会在你迭代它时被消耗，但是你可以调用`save`来获取它的副本，并且消耗副本不会消耗原始的（也不会消耗原始消耗副本）。

```
//Will consume
auto result = find(refRange, needle);

//Will consume
foreach(e; refRange) {}

//Won't consume
auto result = find(refRange.save, needle);

//Won't consume
foreach(e; refRange.save) {} 
```

事情变得更有趣的是作为值类型（或数组）的前向范围。它们的作用与 的任何前向范围相同`save`，但它们的不同之处在于简单地将它们传递给函数或在`foreach`隐式`save`s 中使用它们。

```
//Won't consume
auto result = find(valRange, needle);

//Won't consume
foreach(e; valRange) {}

//Won't consume
auto result = find(valRange.save, needle);

//Won't consume
foreach(e; valRange.save) {} 
```

因此，如果您处理的输入范围不是前向范围，则无论如何都会消耗它。如果你正在处理一个前向范围，`save`如果你想保证它没有被消耗，你需要调用 - 否则它是否被消耗取决于它的类型。

关于`ref`，如果你声明一个基于范围的函数来接受它的参数`ref`，那么它不会被复制，所以传入的范围是否是引用类型并不重要，但这确实意味着你不能传递一个右值，这真的很烦人，所以你可能不应该`ref`在范围参数上使用，除非你真的需要它来总是改变原始值（例如[`std.range.popFrontN`](http://dlang.org/phobos/std_range.html#popFrontN)，需要 a`ref`因为它显式地改变原始值而不是潜在地操作 a复制）。

至于使用前向范围调用基于范围的函数，值类型范围最有可能正常工作，因为经常使用值类型范围编写和测试代码，而不总是使用引用类型正确测试。不幸的是，这包括了 Phobos 的功能（尽管这将得到修复；它只是尚未在所有情况下都经过适当的测试 - 如果您遇到任何情况下 Phobos 功能在引用类型前向范围内无法正常工作，[请报告](http://d.puremagic.com/issues)）。因此，引用类型前向范围并不总是按应有的方式工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T15:31:42.793

抱歉，我无法将其放入评论中：D。考虑是否以这种方式定义 Range：

```
interface Range {
    void doForeach(void delegate() myDel);
} 
```

你的函数看起来像这样：

```
void myFunc(Range r) {
    doForeach(() {
        //blah
    });
} 
```

当您重新分配 r 时，您不会期望发生任何奇怪的事情，也不会期望能够修改调用者的 Range。我认为问题在于您希望您的模板函数能够考虑范围类型的所有变化，同时仍然利用专业化。那是行不通的。您可以将合同应用于模板以利用专业化，或仅使用一般功能。这有帮助吗？

编辑（我们在评论中一直在谈论的内容）：

```
void funcThatDoesntRuinYourRanges(R)(R r)
if (isForwardRange(r)) {
    //do some stuff
} 
```

编辑 2 [std.range](https://github.com/D-Programming-Language/phobos/blob/master/std/range.d)看起来`isForwardRange`只是检查是否`save`已定义，并且`save`只是一个原语，它制作了一种未链接的范围副本。文档指定`save`没有为例如文件和套接字定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T15:00:57.620

不足之处；范围被消耗。这是您应该期待和计划的。

foreach 上的 ref 对此没有任何作用，它只与范围返回的值有关。

长; 范围被消耗，但可能会被复制。您需要查看文档来决定会发生什么。值类型被复制，因此在传递给函数时范围可能不会被修改，但是如果范围作为结构出现，则不能依赖，因为数据流可能是引用，例如 FILE。当然，一个 ref 函数参数会增加混乱。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T15:02:09.280

假设您的`print`函数如下所示：

```
void print(R)(R r) {
  foreach (x; r) {
    writeln(x);
  }
} 
```

在这里，`r`使用引用语义传递给函数，使用泛型类型`R`：所以你不需要`ref`在这里（并且`auto`会给出编译错误）。否则，这将`r`逐项打印 的内容。（我似乎记得有一种方法可以将泛型类型限制为范围，因为范围具有某些属性，但我忘记了细节！）

反正：

```
auto myRange = [1, 2, 3];
print(myRange);
print(myRange); 
```

...将输出：

```
1
2
3
1
2
3 
```

如果您将功能更改为（假设`x++`对您的范围有意义）：

```
void print(R)(R r) {
  foreach (x; r) {
    x++;
    writeln(x);
  }
} 
```

...然后每个元素将在打印之前增加，但这是使用复制语义。也就是说，原始值`myRange`不会改变，所以输出将是：

```
2
3
4
2
3
4 
```

但是，如果您将函数更改为：

```
void print(R)(R r) {
  foreach (ref x; r) {
    x++;
    writeln(x);
  }
} 
```

...然后将`x`恢复为引用语义，它引用 . 的原始元素`myRange`。因此，现在的输出将是：

```
2
3
4
3
4
5 
```

# c++ - OpenGL显示动画和绘制文本

> ID：11190205
> 
> 赞同：3
> 
> 时间：2012-06-25T13:21:52.340
> 
> 标签：c++, c, opengl

我想显示太阳系并画一个简单的文字说“你好世界”：

下面的代码显示了太阳系，一切正常：

```
#include <iostream>

#include <OpenGL/gl.h>

#include <GLUT/glut.h>

void OpenGLInit(void);

static void Animate(void );
static void Key_r(void );
static void Key_s(void );
static void Key_up(void );
static void Key_down(void );
static void ResizeWindow(int w, int h);

static void KeyPressFunc( unsigned char Key, int x, int y );
static void SpecialKeyFunc( int Key, int x, int y );

static GLenum spinMode = GL_TRUE;
static GLenum singleStep = GL_FALSE;

// These three variables control the animation's state and speed.
static float HourOfDay = 0.0;
static float DayOfYear = 0.0;
static float AnimateIncrement = 24.0;  // Time step for animation (hours)

// glutKeyboardFunc is called below to set this function to handle
//      all normal key presses.  
static void KeyPressFunc( unsigned char Key, int x, int y )
{
    switch ( Key ) {
        case 'R':
        case 'r':
            Key_r();
            break;
        case 's':
        case 'S':
            Key_s();
            break;
        case 27:    // Escape key
            exit(1);
    }
}

// glutSpecialFunc is called below to set this function to handle
//      all special key presses.  See glut.h for the names of
//      special keys.
static void SpecialKeyFunc( int Key, int x, int y )
{
    switch ( Key ) {
        case GLUT_KEY_UP:       
            Key_up();
            break;
        case GLUT_KEY_DOWN:
            Key_down();
            break;
    }
}

static void Key_r(void)
{
    if ( singleStep ) {         // If ending single step mode
        singleStep = GL_FALSE;
        spinMode = GL_TRUE;     // Restart animation
    }
    else {
        spinMode = !spinMode;   // Toggle animation on and off.
    }
}

static void Key_s(void)
{
    singleStep = GL_TRUE;
    spinMode = GL_TRUE;
}

static void Key_up(void)
{
    AnimateIncrement *= 2.0;            // Double the animation time step
}

static void Key_down(void)
{
    AnimateIncrement /= 2.0;            // Halve the animation time step

}

/*
 * Animate() handles the animation and the redrawing of the
 *      graphics window contents.
 */
static void Animate(void)
{
    // Clear the redering window
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    if (spinMode) {
        // Update the animation state
        HourOfDay += AnimateIncrement;
        DayOfYear += AnimateIncrement/24.0;

        HourOfDay = HourOfDay - ((int)(HourOfDay/24))*24;
        DayOfYear = DayOfYear - ((int)(DayOfYear/365))*365;
    }

    // Clear the current matrix (Modelview)
    glLoadIdentity();

    // Back off eight units to be able to view from the origin.
    glTranslatef ( 0.0, 0.0, -8.0 );

    // Rotate the plane of the elliptic
    // (rotate the model's plane about the x axis by fifteen degrees)
    glRotatef( 15.0, 1.0, 0.0, 0.0 );

    // Draw the sun -- as a yellow, wireframe sphere
    glColor3f( 1.0, 1.0, 0.0 );         
    glutWireSphere( 1.0, 15, 15 );

    // Draw the Earth
    // First position it around the sun
    //      Use DayOfYear to determine its position
    glRotatef( 360.0*DayOfYear/365.0, 0.0, 1.0, 0.0 );
    glTranslatef( 4.0, 0.0, 0.0 );
    glPushMatrix();                     // Save matrix state
    // Second, rotate the earth on its axis.
    //      Use HourOfDay to determine its rotation.
    glRotatef( 360.0*HourOfDay/24.0, 0.0, 1.0, 0.0 );
    // Third, draw the earth as a wireframe sphere.
    glColor3f( 0.2, 0.2, 1.0 );
    glutWireSphere( 0.4, 10, 10);
    glPopMatrix();                      // Restore matrix state

    // Draw the moon.
    //  Use DayOfYear to control its rotation around the earth
    glRotatef( 360.0*12.0*DayOfYear/365.0, 0.0, 1.0, 0.0 );
    glTranslatef( 0.7, 0.0, 0.0 );
    glColor3f( 0.3, 0.7, 0.3 );
    glutWireSphere( 0.1, 5, 5 );

    // Flush the pipeline, and swap the buffers
    glFlush();
    glutSwapBuffers();

    if ( singleStep ) {
        spinMode = GL_FALSE;
    }

    glutPostRedisplay();        // Request a re-draw for animation purposes

}

// Initialize OpenGL's rendering modes
void OpenGLInit(void)
{
    glShadeModel( GL_FLAT );
    glClearColor( 0.0, 0.0, 0.0, 0.0 );
    glClearDepth( 1.0 );
    glEnable( GL_DEPTH_TEST );
}

// ResizeWindow is called when the window is resized
static void ResizeWindow(int w, int h)
{
    float aspectRatio;
    h = (h == 0) ? 1 : h;
    w = (w == 0) ? 1 : w;
    glViewport( 0, 0, w, h );   // View port uses whole window
    aspectRatio = (float)w/(float)h;

    // Set up the projection view matrix (not very well!)
    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    gluPerspective( 60.0, aspectRatio, 1.0, 30.0 );

    // Select the Modelview matrix
    glMatrixMode( GL_MODELVIEW );
}

// Main routine
// Set up OpenGL, hook up callbacks, and start the main loop
int main( int argc, char** argv )
{
    // Need to double buffer for animation
    glutInit(&argc,argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH );

    // Create and position the graphics window
    glutInitWindowPosition( 0, 0 );
    glutInitWindowSize( 600, 360 );
    glutCreateWindow( "Solar System Demo" );

    // Initialize OpenGL.
    OpenGLInit();

    // Set up callback functions for key presses
    glutKeyboardFunc( KeyPressFunc );
    glutSpecialFunc( SpecialKeyFunc );

    // Set up the callback function for resizing windows
    glutReshapeFunc( ResizeWindow );

    // Callback for graphics image redrawing
    glutDisplayFunc( Animate );

    // Start the main loop.  glutMainLoop never returns.
    glutMainLoop(  );

    return(0);          // Compiler requires this to be here. (Never reached)
} 
```

**下面的代码绘制文本“Hello world”并且也可以工作：**

```
#include <iostream>

#include <OpenGL/gl.h>

#include <GLUT/glut.h>

void drawBitmapText(char *string,float x,float y,float z) 
{  
    char *c;
    glRasterPos3f(x, y,z);

    for (c=string; *c != '\0'; c++) 
    {
        glutBitmapCharacter(GLUT_BITMAP_TIMES_ROMAN_10, *c);
    }
}

void drawStrokeText(char*string,int x,int y,int z)
{
    char *c;
    glPushMatrix();
    glTranslatef(x, y+8,z);
    // glScalef(0.09f,-0.08f,z);

    for (c=string; *c != '\0'; c++)
    {
        glutStrokeCharacter(GLUT_STROKE_ROMAN , *c);
    }
    glPopMatrix();
}

void reshape(int w,int h) 
{ 

    glViewport(0,0,w,h); 
    glMatrixMode(GL_PROJECTION); 
    glLoadIdentity(); 
    gluOrtho2D(0,w,h,0); 
    glMatrixMode(GL_MODELVIEW); 
    glLoadIdentity(); 

}

void render(void)
{ 

    glClear(GL_COLOR_BUFFER_BIT); 
    glLoadIdentity();

    glColor3f(0,1,0);

    drawBitmapText("Hello world",200,200,0);
    glutSwapBuffers(); 

} 

// Main routine
// Set up OpenGL, hook up callbacks, and start the main loop
int main( int argc, char** argv )
{
    // Need to double buffer for animation
    glutInit(&argc,argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH );

    // Create and position the graphics window
    glutInitWindowPosition( 0, 0 );
    glutInitWindowSize( 600, 360 );
    glutCreateWindow( "Solar System Demo" );

    glutDisplayFunc(render);
    glutIdleFunc(render);
    glutReshapeFunc(reshape); 

    // Start the main loop.  glutMainLoop never returns.
    glutMainLoop(  );

    return(0);          // Compiler requires this to be here. (Never reached)
} 
```

我正在尝试同时使用它们来显示太阳系并绘制文本，但是

我得到一个空白的黑屏：

```
#include <iostream>

#include <OpenGL/gl.h>

#include <GLUT/glut.h>

void OpenGLInit(void);

static void Animate(void );
static void Key_r(void );
static void Key_s(void );
static void Key_up(void );
static void Key_down(void );
static void ResizeWindow(int w, int h);

static void KeyPressFunc( unsigned char Key, int x, int y );
static void SpecialKeyFunc( int Key, int x, int y );

static GLenum spinMode = GL_TRUE;
static GLenum singleStep = GL_FALSE;

// These three variables control the animation's state and speed.
static float HourOfDay = 0.0;
static float DayOfYear = 0.0;
static float AnimateIncrement = 24.0;  // Time step for animation (hours)

// glutKeyboardFunc is called below to set this function to handle
//      all normal key presses.  
static void KeyPressFunc( unsigned char Key, int x, int y )
{
    switch ( Key ) {
        case 'R':
        case 'r':
            Key_r();
            break;
        case 's':
        case 'S':
            Key_s();
            break;
        case 27:    // Escape key
            exit(1);
    }
}

// glutSpecialFunc is called below to set this function to handle
//      all special key presses.  See glut.h for the names of
//      special keys.
static void SpecialKeyFunc( int Key, int x, int y )
{
    switch ( Key ) {
        case GLUT_KEY_UP:       
            Key_up();
            break;
        case GLUT_KEY_DOWN:
            Key_down();
            break;
    }
}

static void Key_r(void)
{
    if ( singleStep ) {         // If ending single step mode
        singleStep = GL_FALSE;
        spinMode = GL_TRUE;     // Restart animation
    }
    else {
        spinMode = !spinMode;   // Toggle animation on and off.
    }
}

static void Key_s(void)
{
    singleStep = GL_TRUE;
    spinMode = GL_TRUE;
}

static void Key_up(void)
{
    AnimateIncrement *= 2.0;            // Double the animation time step
}

static void Key_down(void)
{
    AnimateIncrement /= 2.0;            // Halve the animation time step

}

/*
 * Animate() handles the animation and the redrawing of the
 *      graphics window contents.
 */
static void Animate(void)
{
    // Clear the redering window
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    if (spinMode) {
        // Update the animation state
        HourOfDay += AnimateIncrement;
        DayOfYear += AnimateIncrement/24.0;

        HourOfDay = HourOfDay - ((int)(HourOfDay/24))*24;
        DayOfYear = DayOfYear - ((int)(DayOfYear/365))*365;
    }

    // Clear the current matrix (Modelview)
    glLoadIdentity();

    // Back off eight units to be able to view from the origin.
    glTranslatef ( 0.0, 0.0, -8.0 );

    // Rotate the plane of the elliptic
    // (rotate the model's plane about the x axis by fifteen degrees)
    glRotatef( 15.0, 1.0, 0.0, 0.0 );

    // Draw the sun -- as a yellow, wireframe sphere
    glColor3f( 1.0, 1.0, 0.0 );         
    glutWireSphere( 1.0, 15, 15 );

    // Draw the Earth
    // First position it around the sun
    //      Use DayOfYear to determine its position
    glRotatef( 360.0*DayOfYear/365.0, 0.0, 1.0, 0.0 );
    glTranslatef( 4.0, 0.0, 0.0 );
    glPushMatrix();                     // Save matrix state
    // Second, rotate the earth on its axis.
    //      Use HourOfDay to determine its rotation.
    glRotatef( 360.0*HourOfDay/24.0, 0.0, 1.0, 0.0 );
    // Third, draw the earth as a wireframe sphere.
    glColor3f( 0.2, 0.2, 1.0 );
    glutWireSphere( 0.4, 10, 10);
    glPopMatrix();                      // Restore matrix state

    // Draw the moon.
    //  Use DayOfYear to control its rotation around the earth
    glRotatef( 360.0*12.0*DayOfYear/365.0, 0.0, 1.0, 0.0 );
    glTranslatef( 0.7, 0.0, 0.0 );
    glColor3f( 0.3, 0.7, 0.3 );
    glutWireSphere( 0.1, 5, 5 );

    // Flush the pipeline, and swap the buffers
    glFlush();
    glutSwapBuffers();

    if ( singleStep ) {
        spinMode = GL_FALSE;
    }

    glutPostRedisplay();        // Request a re-draw for animation purposes

}

// Initialize OpenGL's rendering modes
void OpenGLInit(void)
{
    glShadeModel( GL_FLAT );
    glClearColor( 0.0, 0.0, 0.0, 0.0 );
    glClearDepth( 1.0 );
    glEnable( GL_DEPTH_TEST );
}

// ResizeWindow is called when the window is resized
static void ResizeWindow(int w, int h)
{
    float aspectRatio;
    h = (h == 0) ? 1 : h;
    w = (w == 0) ? 1 : w;
    glViewport( 0, 0, w, h );   // View port uses whole window
    aspectRatio = (float)w/(float)h;

    // Set up the projection view matrix (not very well!)
    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    gluPerspective( 60.0, aspectRatio, 1.0, 30.0 );

    // Select the Modelview matrix
    glMatrixMode( GL_MODELVIEW );
}

void drawBitmapText(char *string,float x,float y,float z) 
{  
    char *c;
    glRasterPos3f(x, y,z);

    for (c=string; *c != '\0'; c++) 
    {
        glutBitmapCharacter(GLUT_BITMAP_TIMES_ROMAN_10, *c);
    }
}

void drawStrokeText(char*string,int x,int y,int z)
{
    char *c;
    glPushMatrix();
    glTranslatef(x, y+8,z);
    // glScalef(0.09f,-0.08f,z);

    for (c=string; *c != '\0'; c++)
    {
        glutStrokeCharacter(GLUT_STROKE_ROMAN , *c);
    }
    glPopMatrix();
}

void reshape(int w,int h) 
{ 

    glViewport(0,0,w,h); 
    glMatrixMode(GL_PROJECTION); 
    glLoadIdentity(); 
    gluOrtho2D(0,w,h,0); 
    glMatrixMode(GL_MODELVIEW); 
    glLoadIdentity(); 

}

void render(void)
{ 

    glClear(GL_COLOR_BUFFER_BIT); 
    glLoadIdentity();

    glColor3f(0,1,0);

    drawBitmapText("Hello world",200,200,0);
    glutSwapBuffers(); 

} 

// Main routine
// Set up OpenGL, hook up callbacks, and start the main loop
int main( int argc, char** argv )
{
    // Need to double buffer for animation
    glutInit(&argc,argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH );

    // Create and position the graphics window
    glutInitWindowPosition( 0, 0 );
    glutInitWindowSize( 600, 360 );
    glutCreateWindow( "Solar System Demo" );

    // Initialize OpenGL.
    OpenGLInit();

    // Set up callback functions for key presses
    glutKeyboardFunc( KeyPressFunc );
    glutSpecialFunc( SpecialKeyFunc );

    // Set up the callback function for resizing windows
    glutReshapeFunc( ResizeWindow );

    // Callback for graphics image redrawing
    glutDisplayFunc( Animate );

    glutDisplayFunc(render);
    glutIdleFunc(render);
    glutReshapeFunc(reshape); 

    // Start the main loop.  glutMainLoop never returns.
    glutMainLoop(  );

    return(0);          // Compiler requires this to be here. (Never reached)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:01:36.987

main() 中的这些行会导致问题：

```
glutKeyboardFunc( KeyPressFunc );
glutSpecialFunc( SpecialKeyFunc );
glutReshapeFunc( ResizeWindow );
glutDisplayFunc( Animate );
glutDisplayFunc(render);
glutIdleFunc(render); 
```

glutDisplayFunc()*覆盖*GLUT 内部的函数指针。所以只有 render() 函数被调用，而不是 Animate()。

这里的第二个问题：空闲函数也是render()，所以它被调用了两次。与 Reshape 功能相同。

您需要组合 ResizeWindow() 和 reshape() 函数，然后是 render() 和 Animate() 函数，然后删除 glutIdleFunc 调用，因为一切都已经在 render() 中完成了。

# ruby - 在 sinatra 应用程序中使用自定义布局选项时出现 NameError

> ID：11190208
> 
> 赞同：1
> 
> 时间：2012-06-25T13:22:20.540
> 
> 标签：ruby, layout, sinatra, haml

要在我的应用程序中使用自定义布局文件，我正在使用以下代码，

```
set :views, File.dirname(__FILE__) + "/../views"
set :public_folder, File.dirname(__FILE__) + "/../public"
get '/' do
if !Db.empty? then
haml :home, {:layout => :nosetup-layout}
elsif request.ip == "127.0.0.1" then

haml :setup, {:layout => :nosetup-layout}

else
haml :nosetup, {:layout => :nosetup-layout}
end
end 
```

布局选项似乎有问题

我收到以下错误

```
undefined local variable or method `layout' for #<TabPlayer::Server:0x000000024509c8> 
```

那么，我哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:22:25.843

将您的布​​局重命名为 nosetup_layout（使用下划线）。

然后只需调用：

```
haml :nosetup, {:layout => :nosetup_layout} 
```

# assembly - 计算汉明距离会打印出错误的十进制但使用 MIPS 正确的十六进制

> ID：11190209
> 
> 赞同：1
> 
> 时间：2012-06-25T13:22:22.517
> 
> 标签：assembly, mips

我是使用 MIPS 的新手，我尝试计算汉明距离。然而，即使寄存器 $t3 具有正确的 XOR 结果，当我以十进制打印它时，我得到一个错误的数字。

```
word1:      .word 0xffeff0ff
word2:      .word 0x00000001 
```

当我对这两个词进行异或运算时，结果是：

```
ffeff0fe 
```

我的问题是如何以十进制计算？因为我试图在屏幕上打印它，我得到 -1052418 而不是正确的 26

这是我的完整代码

```
 .text       
        .globl __start 
__start:            
    la $a1,word1
    lw $t1,0($a1)       
    la $a1,word2
    lw $t2,0($a1)       
    xor $t3,$t1,$t2
    la $a0,answer       
    li $v0,4
    syscall         
    move $a0,$t3        
    li $v0,1
    syscall
    la $a0,endl     
    li $v0,4
    syscall         
EXIT:   li $v0,10
    syscall         

    .data
word1:      .word 0xffeff0ff
word2:      .word 0x00000001
answer:     .asciiz "Hamming distance is : "
endl:       .asciiz "\n" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:14:10.830

您正在打印两个值的异或，而不是具有不同值的位数。计算汉明距离所需要做的是计算该数字，例如使用以下代码：

```
 move $a0, $zero    # $a0 will hold the result
loop:
    bgez $t3, skip     # test the most significative bit of $t3
    sll $t3, $t3, 1    # (*) [NOTE below] shift left $t3 one bit
    addiu $a0, $a0, 1  # If bit was set, increment result
skip:    
    bnez $t3, loop     # loop while not done
    nop                # this nop is due to delayed branching 
```

此代码段假定您的 MIPS 处理器已延迟分支。如果不是这种情况，您必须在标签跳过后移动标有（*）的指令。如果您没有延迟分支或下一条指令没有副作用，则可以删除 nop。

此代码应该代替您放置的行`move $a0,$t3`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-04-21T12:34:41.687

。文本

```
.globl __start 
```

__开始：

```
lbu $t0 , B
lbu $t1 , B1

xor  $s0 , $t0 , $t1
addi $s1 , $s1 , 7      # pointer for swift
add $s2 , $zero , $zero # pointer for loop 
```

环形：

```
srl $t7 , $s0 , $s1 # swift
sll $t7 ,  $t7 , 31   
slt $t7 , $t7 , -1 

la $a0 , 0($t7)
li $v0 , 1
syscall
la $a0 , str
li $v0 , 4
syscall 

addi $s2 , $s2 , 1    #loop
addi $s1 , $s1 , -1   #swift

beq $s2 , 8 , exit
j loop 
```

退出：li $v0 , 10 系统调用

。数据

```
B:  .byte 3
B1: .byte 1
str: .asciiz "\n" 
```

# oledb - 菜鸟的 SSIS 数据流

> ID：11190210
> 
> 赞同：1
> 
> 时间：2012-06-25T13:22:26.367
> 
> 标签：oledb, dataflow, ssis

我在编程方面还是个新手，我们当地的 SSIS 天才今天不在这里让我挑选他的大脑。

我正在处理现有的 SSIS 包，并对特定的 .dtsx 文件进行修改。数据流有一个 OLE DB 源，我已经成功地更改了 sql 查询以适应我的项目规范。Destination 是一个连接平面文件，我已经修改了列映射以适应新查询。

我有几个担忧：

1.  源连接原来使用的是 SQL Server 身份验证，我没有用户名和密码。我可以使用 Windows 身份验证在本地对其进行测试，但最终它会被其他人设置为某处服务器上的计划任务。（我意识到这可能是我工作中的人的问题，但我想我会填补你们的）。

2.  目标预览不显示任何内容。但是，我可以成功解析和预览源查询...

3.  我也不明白源编辑器上的“错误输出”是什么意思。 ![源代码编辑器错误输出](../Images/e75b78e3a9c052d2bcf7e234337492fb.png) 这是否已经正确设置，还是意味着输出中会有一些错误？

    任何解释或详细说明都会有所帮助，但我的总体问题是：“我是否缺少此 .dtsx 的某些内容，或者该项目是否已完成并准备好设置为计划任务？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:03:52.580

1.  这将取决于包配置。通常从配置机制（文件或服务器）中读取用户\密码

2.  是的，应该没问题

3.  这意味着当任务发现错误时应该做什么。例如，它可能会使组件失败或忽略错误

# linux - 如何获取shell脚本的所有进程名称？

> ID：11190211
> 
> 赞同：0
> 
> 时间：2012-06-25T13:22:32.437
> 
> 标签：linux, bash, shell

```
$cat t.sh  
grep "12" test | wc -c 
```

我想知道它运行时会创建多少个进程。我用了

```
./t.sh;ps -aux | grep "t.sh" 
```

但它不起作用，因为“./t.sh”在 ps 工作时已经运行。

我怎样才能达到这个目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:13:09.973

你的错误是分号。它告诉 shell 在运行 grep 之前等到 t.sh 完成。使用 & 号来告诉 shell 在后台运行 t.sh。此外，您最好不要使用 grep 来查看由 t.sh 脚本生成的进程列表，如下所示：

```
$ ./t.sh & pstree $(pgrep t.sh) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T13:52:25.733

取决于您正在运行的系统。如果有`strace`，您可以跟踪所有`fork`系统调用。问题是尽管某些系统使用`fork`，一些`vfork`和一些`clone`，您将不得不进行实验。在 Linux 上：

```
strace -c -f -evfork ./t.sh 
```

应该给你一个总结。 `-c`给出一个计数，`-f`表示“跟随”子进程，并`-evfork`表示跟踪`vfork`内核调用。输出到 stderr，但您可以使用`-o`选项将其重定向到文件（如果您在此处指定命名管道，您可以执行一些巧妙的技巧）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:06:16.993

您可以尝试
`./t.sh;ps -aux | grep -E "t.sh"` -E 完全匹配您需要的内容，仅此而已，我现在不在 linux 上，所以我不能确定，但​​是与该选项有关

# svn - 如何提取将主干从 SVN 存储库扩展到具有历史记录的新存储库的分支

> ID：11190212
> 
> 赞同：3
> 
> 时间：2012-06-25T13:22:35.120
> 
> 标签：svn, branch, svnsync, svndumpfilter, svndump

我已经用谷歌搜索了很多这个问题，但没有找到我需要的东西。

我有一个看起来像这样的存储库

```
/Project_A
  +- trunk
  +- branches
      +- Version_1
      +- Version_2
      +- 1st_Custom_version_for_customer_A
      +- 2nd_Custom_version_for_customer_A
/Project_B
  +- trunk
  +- branches
      +- Version_1
      +- Version_2
      +- 1st_Custom_version_for_customer_A
      +- 2nd_Custom_version_for_customer_A 
```

树枝是它们的树干对应物的后代。例如对于 Project_A

```
Trunk ------------------------------------------------------>
Version_1   \--------->                    \
Version_2                  \--------->      \
1st_Custom_version_for_customer_A            \---------------> 
```

自定义版本现在有了自己的生命，不再从主干获得任何更新（许多差异）。

我只需要在新存储库中提取与客户相关的修订。那就是： /Project_A/trunk 直到创建 1st_Custom_version_for_customer_A 的那一刻。然后是 /Project_A/branches/1st_Custom_version_for_customer_A 和 /Project_A/branches/2nd_Custom_version_for_customer_A。项目 B 也是如此。都在同一个存储库中。

我试过 svnsync 但只能提取 /Project_A/branches/2nd_Custom_version_for_customer_A，即使历史很好，我仍然看到其他分支的所有提交消息（这在我的情况下是一个问题）。

至于 svndumpfilter，如果我从一开始就将所有内容都放在“/Customer_A”下，那将是完美的（下次我会这样工作），但是当分支是另一个分支的副本时，有时会被重命名，删除，重新创建，等等...我看不到它工作正常。

有什么工具或东西可以帮助我在这里完成工作吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:59:08.053

基于路径的授权功能（在服务器端）在这里应该有所帮助 - 您是否尝试过设置受限帐户`svnsync`？

# asp.net - 子站点在 ASP.NET 2.0 中使用父站点的连接字符串

> ID：11190215
> 
> 赞同：0
> 
> 时间：2012-06-25T13:22:55.917
> 
> 标签：asp.net, web-config

ASP.NET 2.0 中有 5 个网站具有相同的代码和数据库结构。唯一的区别是 CSS 和站点名称。这些都托管在单个 GoDaddy 帐户上。

例如：

1.  www.abc1.com
2.  www.abc2.com
3.  www.abc3.com
4.  www.abc4.com
5.  www.abc5.com

有一个主文件夹绑定到 www.abc1.com，另外四个子目录绑定到其他四个站点。

问题是：

当我从 www.abc4.com 的 web.config 中删除连接字符串时，它仍在工作。

同时它使用 www.abc1.com 的连接字符串，其余站点工作正常。如果 www.abc4.com 有问题，那么所有网站都应该受到影响吗？

这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:45:07.243

这是因为连接字符串继承自父应用程序的 web.config。

您可以通过插入强制指定使用下一个添加的连接字符串

```
<clear /> 
```

在添加新的连接字符串之前。

这将删除对继承的连接字符串的所有引用，只允许当前添加元素添加的连接字符串。

有关这方面的 MSDN 文档，请参阅[http://msdn.microsoft.com/en-us/library/ayb15wz8.aspx](http://msdn.microsoft.com/en-us/library/ayb15wz8.aspx)。

# c# - 按变量对c#对象列表进行排序

> ID：11190220
> 
> 赞同：2
> 
> 时间：2012-06-25T13:23:17.350
> 
> 标签：c#, list, sorting, int

我有一个带有一个名为“layer”的整数变量的类，有一个这些类的列表，我想按升序排序。我该怎么做呢？我已经尝试过在这里找到的一两种 LINQ 方法，但无济于事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T13:52:21.880

```
var foos = new List<Foo>(); 
// consider this is your class with the integer variable called layer

var ordered = foos.OrderBy(f => f.layer); 
```

[`Enumerable.OrderBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderby.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:12:45.963

还有其他几种方法...

假设层在范围内......

```
 List<Item> list = new List<Item>();

    list.Add(new Item(10));
    list.Add(new Item(2));
    list.Add(new Item(5));
    list.Add(new Item(18));
    list.Add(new Item(1));

    list.Sort((a, b) => { return a.Layer.CompareTo(b.Layer); }); 
```

或者，您可以实现 IComparable 接口，这将允许您按类内部所需的任何内容进行排序。假设该字段始终是您想要排序的内容，然后只需调用 sort()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:48:55.580

在这两种方法都不起作用之后，我做了更多的研究，并提出了这个对我有用的片段：

```
 entities.Sort(delegate(Entity a, Entity b) { return a.layer.CompareTo(b.layer); }); 
```

只需将 Entity 替换为列表中的任何对象，然后使用您想要排序的任何对象进行分层。

# android - android相机中预览大小和fps之间的关系

> ID：11190223
> 
> 赞同：1
> 
> 时间：2012-06-25T13:23:30.627
> 
> 标签：android, camera, frame-rate

大家好：我正在android系统上测试相机fps。我已经通过原生android相机设置了相机功能，将camera.parameter的预览fps设置为最大值（~28fps），然后使用onPreviewFrame提取图像数据，使用标准yuv420sp-to-rgb转换处理以获得我需要的 RGB 信息。

我面临的问题是不同的预览大小会导致不同的可用fps（每秒调用onPreviewFrame（）的次数，而不是相机参数设置的fps），这是来自Asus Transformer TF101（CPU 1GHz）的数据

(预览尺寸,fps) (1024x720,5) (640x480,11) (320x240,28)

似乎只有分辨率 320x240 才能达到最大 fps。我想知道是否有人在PreviewSize vs Fps的这种情况下有经验。我希望找到增加（或解释）fps的方向。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:10:03.490

是的，我也为我的媒体记录器类尝试了相同的方法，如果预览尺寸更大，则 fps 会更小，因为在内部分辨率会更高（因为预览尺寸更大），因此每秒捕获帧需要时间。FPS 只不过是每秒帧数，即每秒捕获的帧数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:37:48.983

fps与分辨率的关系：

```
fps = clock / (width * height) 
```

# haskell - 哪个是给定语句的正确程序？

> ID：11190224
> 
> 赞同：2
> 
> 时间：2012-06-25T13:23:35.367
> 
> 标签：haskell, logic, logic-programming

**问题陈述：**

找出所有边都为整数且所有边等于或小于 10 的周长为 24 的直角三角形。

以下两个解决方案中的哪个解决方案正确解释了问题并给出了正确的答案？

如果第一个解决方案不正确，那么在类似情况下如何避免此类编程错误？

**第一个解决方案：**

```
ghci> let rightTriangles = [(a, b, c) | a <- [1..10], b <- [1..10], c <- [1..10], a^2 + b^2 == c^2, a+b+c == 24]
ghci> rightTriangles
[(6,8,10),(8,6,10)] 
```

**第二种解决方案：**

```
ghci> let rightTriangles' = [ (a,b,c) | c <- [1..10] , b <- [1..c] , a <- [1..b] , a^2 + b^2 == c^2, a+b+c == 24]
ghci> rightTriangles'
[(6,8,10)] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:17:51.207

就目前而言，我认为问题的定义略显不足。

前四个词“Find *the* right triangle”（重点是我的）暗示了一个独特的答案，几乎可以肯定是（6,8,10）。然而，所有与 (6,8,10) 一致的三角形都会遇到问题的其余部分，其中 (8,6,10) 肯定是一个，所以它本身并没有错，但可能不是你的意思要得到。

另一种看待这个问题的方式是，问题定义了一个等价类，其中 (6,8,10) 是规范表示，但是问题没有明确要求规范表示（尽管我们可以推断它可能是预期的答案因此应该使用你的第二个解决方案）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:02:37.113

您必须过滤掉不同的排列。通过限制 a <= b 和 b <= c，您可以做到这一点。您在第二个答案中通过限制 b 和 c 的输入域来做到这一点。b <- [1..c] 意味着 b <= c。

# fortran - 过早确定函数返回值

> ID：11190225
> 
> 赞同：1
> 
> 时间：2012-06-25T13:23:40.540
> 
> 标签：fortran, intel-fortran

我有一个`t_file`带有终结例程的派生类型，`close`它只是将“终结”写入屏幕。还有一个函数返回 type 的实例`t_file`。这个程序的输出是

```
Finalization.
Finalization.
Just opened
     2000
Done. 
```

我有两个问题：

*   为什么最终确定发生在*输出之前*`Just opened`？
*   为什么最终确定会发生*两次*？

我的编译器是 Intel(R) Visual Fortran Composer XE 2011 12.1.3526.2010。

这是代码：

```
module m_file
    implicit none

    type t_file
        integer::iu=1000

        contains

        final::close
    end type

    contains

    function openFile() result(f)
        implicit none

        type(t_file)::f

        f%iu = 2000

    end function

    subroutine close(this)
        implicit none

        type(t_file)::this

        write(*,*) 'Finalization.'

    end subroutine

end module

program foo
    use m_file
    implicit none

    type(t_file)::f

    f = openFile()
    write(*,*) 'Just opened'
    write(*,*) f%iu

    write(*,*) 'Done.'    
    read(*,*)

end program 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T14:17:16.260

这种行为也让我感到惊讶。我已经掌握了 Fortran 的新（-ish）OO 功能，但还不需要编写最终程序。我认为我可以为这种行为提供某种解释。

[在Modern Fortran Explained](http://www.amazon.co.uk/s/ref=nb_sb_ss_i_0_19?url=search-alias=aps&field-keywords=modern%20fortran%20explained&x=0&y=0&sprefix=modern%20fortran%20expl,aps,143)的p282 上，作者写道：

> 当一个可终结的对象即将停止存在时（例如，通过被释放或执行`return`语句），最终的子例程被调用，该对象作为其实际参数。当对象传递给意图`out`虚拟参数时，也会发生这种情况，或者是内部赋值语句左侧的变量。在后一种情况下，最后的子例程在右侧的表达式被求值之后，但在它被分配给变量之前被调用。

在我看来，您似乎同时遇到了本段中提到的两种情况。当函数内`Finalization`命名的实体在从该函数返回时将超出范围时，您将获得第一个。`f``openFile`

`Finalization`当程序范围内的变量`f`用于赋值的*lhs*时，您将获得第二个`f = openFile()`。

从所有这些中，我得出结论，您并没有看到`f`程序范围内的过早完成，而是有些微妙的不同。

我并不完全相信这就是正在发生的事情，而且我想不出为什么语言的行为应该如此的充分理由。我有点惊讶，现在我已经调查过了，`Finalization`当程序结束并`f`超出范围时，您没有收到第三条消息。

运气好的话，一位真正的 Fortran 大师很快就会过去并启发我们所有人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:34:43.207

对High Performance Mark给出的答案的小幅更正：第一个最终确定实际上是程序范围内的变量f。这可以通过让最终例程打印 this%iu 并将程序范围内的 f%iu 设置为某个任意值来简单地看到。

# vb.net-2010 - 更新标签页中的 textbox.text

> ID：11190226
> 
> 赞同：0
> 
> 时间：2012-06-25T13:23:42.100
> 
> 标签：vb.net-2010

我有一个包含大量文本框的应用程序，基本上是要填写的表格。一个标签控件中有几个标签页。在保存数据时，我只需遍历文本框，获取它们的名称和文本，然后将其放入带有“|”的文本文件中 作为分隔符。这很好用，我可以看到我所有的文本框和文本文件中的数据。现在问题来了。当我读回文件（将保存的数据加载回表单）时，它会遍历控件名称并将文本更改为文件中的任何内容。它适用于表单上的文本框，但是当它到达标签页上的第一个文本框时会失败。我该如何解决？如果有更好的方法来保存数据，我会全力以赴。

这是写入文件的代码：

```
 Private Sub savefile(file As String)
    Dim ctl As Control = Me
    Dim sw As System.IO.StreamWriter
    sw = My.Computer.FileSystem.OpenTextFileWriter(file, False)
    Do
        ctl = Me.GetNextControl(ctl, True)
        If ctl IsNot Nothing Then
            If TypeOf ctl Is TextBox Then
                sw.WriteLine(ctl.Name.ToString.Substring(3) & "|" & ctl.Text)
            End If
        End If
    Loop Until ctl Is Nothing
    sw.Close()
End Sub 
```

这是读取文件并更新文本框的代码：

```
 Private Sub ReadFile(filename)
    Dim strfilename As String = filename
    Dim num_rows, x, y As Integer
    Dim strarray(1, 1) As String
    Dim ctrl As Control = Me

    'Check if file exist
    If File.Exists(strfilename) Then
        Dim tmpstream As StreamReader = File.OpenText(strfilename)
        Dim strrecords() As String
        Dim strfields() As String

        'Load content of file to strLines array
        strrecords = tmpstream.ReadToEnd().Split(vbCrLf)

        ' Redimension the array.
        num_rows = UBound(strrecords)
        ReDim strarray(num_rows, 2)

        ' Copy the data into the array.
        For x = 0 To num_rows - 1
            strfields = strrecords(x).Split("|")
            For y = 0 To 1
                strarray(x, y) = strfields(y)
            Next
        Next

        ' Display the data in listbox
        For x = 0 To num_rows - 1
            Dim tbxname As String = strarray(x, 0)
            tbxname = Remove(tbxname) 'routine that removes invisible characters
            tbxname = "tbx" & tbxname
            MsgBox(tbxname) 'used to verify each file and which one fails
            Me.Controls(tbxname).Text = strarray(x, 1)
        Next
    Else : MsgBox("File doesn't exist!")
    End If

End Sub 
```

我希望这是足够的信息。提前感谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T00:05:22.923

我认为该行`Me.Controls(tbxname).text = strarray(x,1)`没有在选项卡控件中处理您的文本框，您可能需要了解如何在选项卡页中处理您的文本框。

就像是

```
Me.TabControl1.TabPages(0).Controls(tbxname).text = starray(x,1) 
```

# c# - 如何从作为 listBoxItem 的堆栈面板访问标签

> ID：11190227
> 
> 赞同：2
> 
> 时间：2012-06-25T13:23:49.290
> 
> 标签：c#, wpf, controls, parent

对于 WPF 中的列表框，我有这个模板：

```
<ControlTemplate x:Key="ListBoxItemControlTemplate1" TargetType="{x:Type ListBoxItem}">
    <StackPanel Orientation="Horizontal" Background="Silver">
        <CheckBox Content="CheckBox" VerticalAlignment="Center"/>
        <Label Content="Label" Padding="5,0" Width="260" VerticalAlignment="Center" Background="#F3D6D6D6" Margin="5,0"/>
        <Button Content="Edit" Width="Auto" Padding="1" Margin="2.5,0" HorizontalAlignment="Right" Click="Button_Click"/>
    </StackPanel>
</ControlTemplate> 
```

每当我按下 listBoxItem 的相应按钮时，我都想修改同一个 listBoxItem 的标签，如果可能的话最好不使用名称。
我在想也许有一种方法可以说“使用此按钮父级的标签”，我认为这将是 StackPanel，但在互联网上找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:23:03.443

我认为更好的解决方案是使用带有 DataTemplate 的视图模型，一旦你设置了代码，你就可以一遍又一遍地重复使用它，而且出错的可能性很小。

这是您的视图模型的外观

```
public class ViewModel : INotifyPropertyChanged
{
    private ObservableCollection<ItemViewModel> _items;

    public ViewModel()
    {
        _items = new ObservableCollection<ItemViewModel>(new List<ItemViewModel>()
            {
                new ItemViewModel() { Label = "Item1", IsChecked = false },
                new ItemViewModel() { Label = "Item2", IsChecked = true },
                new ItemViewModel() { Label = "Item3", IsChecked = true },
                new ItemViewModel() { Label = "Item4", IsChecked = false },
                new ItemViewModel() { Label = "Item5", IsChecked = false },
            });

    }

    public ObservableCollection<ItemViewModel> Items
    {
        get
        {

            return this._items;
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    // Create the OnPropertyChanged method to raise the event
    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(name));
        }
    }
}

public class ItemViewModel  : INotifyPropertyChanged
{
    private bool _isChecked = false;
    private string _label = "Label";

    public ICommand ButtonCommand { get; private set; }

    public ItemViewModel()
    {
        this.ButtonCommand = new DelegateCommand(Com_ButtonCommand);
    }

    public void Com_ButtonCommand(object parameter)
    {
        this.Label = "New Label text";
    }

    public string Label
    {
        get
        {
            return this._label;
        }
        set
        {
            this._label = value;
            this.OnPropertyChanged("Label");
        }
    }

    public bool IsChecked
    {
        get
        {
            return this._isChecked;
        }
        set
        {
            this._isChecked = value;
            this.OnPropertyChanged("IsChecked");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    // Create the OnPropertyChanged method to raise the event
    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(name));
        }
    }
}
public class DelegateCommand : ICommand
{
    private readonly Predicate<object> _canExecute;
    private readonly Action<object> _execute;

    public event EventHandler CanExecuteChanged;

    public DelegateCommand(Action<object> execute)
        : this(execute, null)
    {
    }

    public DelegateCommand(Action<object> execute,
                   Predicate<object> canExecute)
    {
        _execute = execute;
        _canExecute = canExecute;
    }

    public bool CanExecute(object parameter)
    {
        if (_canExecute == null)
        {
            return true;
        }

        return _canExecute(parameter);
    }

    public void Execute(object parameter)
    {
        _execute(parameter);
    }

    public void RaiseCanExecuteChanged()
    {
        if (CanExecuteChanged != null)
        {
            CanExecuteChanged(this, EventArgs.Empty);
        }
    }
} 
```

这里有 3 个类，其中 1 个是助手。

ViewModel --> 你的主 ViewModel，ItemViewModel --> 每个项目的模型，DelegateCommand --> 允许你将按钮映射到视图模型

你的 xml 看起来像这样

```
<ListBox ItemsSource="{Binding Items}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" Background="Silver">
                        <CheckBox IsChecked="{Binding IsChecked}" Content="CheckBox" VerticalAlignment="Center"/>
                        <Label Content="{Binding Label}" Padding="5,0" Width="260" VerticalAlignment="Center" Background="#F3D6D6D6" Margin="5,0"/>
                        <Button Command="{Binding ButtonCommand}" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

请注意“{Binding}”关键字，这会将每个数据模板“绑定”到其自己的视图模型上具有该名称的成员，在本例中为 IsChecked 和 Label。

要加载您的 ViewModel，请将以下行添加到您的用户控件中的代码隐藏中（使用 MVVM，您几乎不会触及用户控件的代码隐藏）。

```
this.DataContext = new ViewModel(); 
```

当您第一次看到视图模型时，它可能看起来需要做很多工作，但它大多是可重用的，并且是执行此类操作 (MVVM) 的事实上的标准，我已经包含了所有必要的代码来帮助您入门。

下面的类以及 DelegateCommand 应该保留以供以后使用，我已经将它包含在上面的代码片段中

```
 public class ViewModelBase : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        // Create the OnPropertyChanged method to raise the event
        protected void OnPropertyChanged(string name)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(name));
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:04:52.197

我建议您在后面使用视图模型。该虚拟机公开了一个绑定到按钮的命令。此外，它还公开了一个包含标签名称的 DependencyProperty。并且标签绑定到该属性。现在，如果您按下按钮，将执行命令，这将更改标签文本，并通过数据绑定更新标签上的新文本。

我不推荐的另一个选项是使用 FindName 来查找标签。或者非常糟糕（但有效）是使用 VisualTreeHelper 迭代控件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T14:06:47.610

我将导航[VisualTree](http://msdn.microsoft.com/en-us/library/system.windows.media.visualtreehelper.aspx)以找到 parent `StackPanel`，然后搜索它`StackPanel`以找到`Label`要更新的子项。

如果您有兴趣，我在我的博客上发布了一些[VisualTreeHelpers](http://rachel53461.wordpress.com/2011/10/09/navigating-wpfs-visual-tree/)，这将使这变得容易：

```
var parent = VisualTreeHelpers.FindAncestor<StackPanel>((Button)sender);
if (parent == null) return;

var lbl = VisualTreeHelpers.FindChild<Label>(parent);
if (lbl == null) return;

lbl.Content = "Some Text"; 
```

这是因为我没有使用 MVVM 设计模式。如果我使用 MVVM，我会将`Label.Content`属性存储在 中`ViewModel`，并且`Button`命令应该指向 中的 a `Command`，`ViewModel`并且它应该将 DataBound 项作为它传递给它，`CommandParameter`以便它知道要更新哪个标签。

```
<ControlTemplate x:Key="ListBoxItemControlTemplate1" TargetType="{x:Type ListBoxItem}">
    <StackPanel Orientation="Horizontal" Background="Silver">
        <CheckBox Content="CheckBox" VerticalAlignment="Center"/>
        <Label Content="{Binding SomeText}" ... />
        <Button Content="Edit" 
                Command="{Binding ElementName=MyListBox, Path=DataContext.EditCommand}"
                CommandParameter="{Binding }" />
    </StackPanel>
</ControlTemplate> 
```

# eclipse - Maven多模块项目，为什么需要“pom打包”？

> ID：11190228
> 
> 赞同：4
> 
> 时间：2012-06-25T13:23:53.807
> 
> 标签：eclipse, google-app-engine, maven

我使用 eclipse 在 maven 上开发一个需要“战争包装”的应用程序引擎项目（使用[maven-gae-plugin archetype](http://hamandeggs.wordpress.com/2010/01/26/how-to-gae-eclipse-maven/)）。

如何包含其他项目（例如公共库项目），以便在其中一个子项目中完成更改时更新所有内容？

一种解决方案可能是“多模块项目”，但我不明白为什么 maven 要求父项目是 pom 包装。另外，我担心更改为 pom 包装可能会破坏 appengine 的兼容性（执行 dev-server、从 eclipse 插件部署等......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:02:57.167

多模块项目不仅是打包库依赖项目的一种方式，确实是一场战争或耳朵。它允许您共享属性、插件、行为......

无论最终结构如何，这是一种将它们链接在一起的方法。他们自己的生命周期是相关的。

所以，做你想做的更好的方法是

```
/
|your-parent-project
+--pom.xml --> pom
|
+--/your-webapp-project
|  +--pom.xml --> war
|  
+--/your-service-project
|  +--pom.xml --> jar
|  
+--/your-dao-project
|  +--pom.xml --> jar
|  
+--/your-common-resources-project
|  +--pom.xml --> zip 
```

您仍将部署您的战争项目，但父项目将包含有关团队、CI、依赖管理的信息。

您将发布您的父项目（使用 maven-release-plugin 它会自动标记和公会），因为它包含整个生命周期和所有项目之间的关系。

Reactor（maven 排序引擎）将安排构建顺序以匹配您的依赖项，例如。资源、dao、服务、webapp ...

你真的应该阅读 Sonatype 的书： http: [//www.sonatype.com/books/mvnref-book/](http://www.sonatype.com/books/mvnref-book/)。

希望这个小解释能帮到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T13:54:44.983

多模块项目是执行此操作的方法。war 项目应该是一个子模块，并且该项目应该使用 gae-plugin。父项目只是公共库、战争和您可能包含的任何其他项目之间关系的描述。在我们的应用程序中，我们有 2 个战争项目（1 个用于我们的网站，1 个用于在我们应用程序的另一个版本上运行的一些 map-reduce 东西）一个通用代码库（打包为 jar）和一个我们使用的 appengine-remote 项目实用功能。

父级只是一个“pom”的原因是它没有作为可运行代码部署在任何地方。

# ria - 检测已删除的复合子项

> ID：11190233
> 
> 赞同：0
> 
> 时间：2012-06-25T13:24:22.063
> 
> 标签：ria

给定一个包含子集合的父级，归因于：

 `````
[Include, Composition]
public virtual ICollection<FieldValue> FieldValues {get;set;} 
````  `并做一个负载：

 `````
Context.Load(Context.GetQuery(),LoadBehavior.RefreshCurrent,true); 
````  `我看到其他用户或后台进程删除的 FieldValues 不会从客户端上下文中删除。我可以看到这可能是设计使然，但我该如何解决这个问题？有没有办法插入加载过程来处理已删除的项目？

加载回调发生得太晚了，看起来 - 一切都已经合并了，没有什么可比较的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:10:29.480

弄清楚了。给定一个父类 Root，这是运行负载的方式：

```
var originalValues = Context.EntityContainer
    .GetEntitySet<FieldValue>()
    .ToList(); // <-- make the pre-load copy of the child entities

Context.Load(Context.GetQuery(),
    LoadBehavior.RefreshCurrent,
    (LoadOperation<Root> o) =>
    {
        (from v in originalValues
        join nv in o.AllEntities.OfType<FieldValue>() on v equals nv into g
        from existing in g.DefaultIfEmpty()
        where existing == null
        select v)
        .ToList()
        .ForEach(Context.EntityContainer.GetEntitySet<FieldValue>().Detach);
    },
    null); 
```

注意：FieldValue 实现 IEquatable<>，如果您的孩子没有，请使用 PK````

# c - 检查是否为我的 USB 设备安装了驱动程序

> ID：11190241
> 
> 赞同：4
> 
> 时间：2012-06-25T13:24:52.157
> 
> 标签：c, windows, winapi, device, device-driver

我使用`SetupDiGetClassDevs()`, `SetupDiEnumDeviceInfo()`and`SetupDiGetDeviceRegistryProperty()`来枚举我的 USB 设备并检查我的设备是否可用。

如何检查是否为我的设备安装了正确的驱动程序？
是否有任何 API 可用于检查这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T10:48:55.923

您可以获取设备的驱动程序信息，然后检查是否已安装驱动程序并且是最新数据。

这是一些可能对您有所帮助的 C++ 代码：

```
bool fetchDriverDescription( const std::wstring& driverRegistryLocation, tDriverDescription& desc )
{
    bool    rval = false;

    std::wstring regFolder = L"SYSTEM\\CurrentControlSet\\Control\\Class\\";
    regFolder += driverRegistryLocation;
    win32::registry::reg_key hKey = 
        win32::registry::reg_key::open( HKEY_LOCAL_MACHINE, regFolder, KEY_READ );
    if( hKey )
    {
        if( win32::registry::read( hKey, L"ProviderName", desc.DriverProviderName, false ) != ERROR_SUCCESS )
            return false;

        desc.InstalledDriverRegFolder = regFolder;

        std::wstring val;
        if( win32::registry::read( hKey, L"DriverVersion", val, false ) == ERROR_SUCCESS )
            desc.Version = val;
        rval = true;
    }
    return rval;
}

std::wstring driverRegLocation;
if( fetchStringFromDiGetDevice( hDevInfo, DeviceInfo, SPDRP_DRIVER, driverRegLocation ) )
{
    bSuccessful = fetchDriverDescription( driverRegLocation, dev.DriverDesc );
} 
```

# python - python - 如果服务器暂时不可用，则无法从客户端重新启动套接字连接

> ID：11190243
> 
> 赞同：0
> 
> 时间：2012-06-25T13:24:59.213
> 
> 标签：python, sockets, ssh-tunnel, graphite

我正在运行 Graphite 服务器来监控远程位置的仪器。我有一个从我的服务器（喜欢 autossh）到机器的“永久”ssh 隧道，以将它们的本地端口映射到我的服务器的本地端口。这很好用，数据可以毫不费力地通过。然而，我们使用不稳定的卫星连接到这些站点，这种连接经常出现故障。我在运行 python 并使用套接字将数据包发送到 Graphite 服务器的仪器上运行“数据爬虫”。问题是，如果链接暂时断开（或服务器重新启动，主要用于测试），我无法重新建立与服务器的连接。我捕获错误，然后运行socket.close（），然后重新打开，但我无法重新建立连接。如果我退出 python 程序并重新启动它，连接就会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T19:54:10.233

如果没有代码示例，很难正确回答这个问题。但是，听起来您可能正在尝试重用已关闭的`socket`，这是不可能的。

如果套接字已关闭（或遇到错误），您必须使用新的套接字对象重新创建新连接。为此，远程服务器必须能够在其 accept() 循环中处理多个客户端连接。

# java - 向 Luke 添加自定义分析器

> ID：11190245
> 
> 赞同：2
> 
> 时间：2012-06-25T13:25:11.497
> 
> 标签：java, lucene, luke

这个问题已经在 Stack Overflow 上被问[过](https://stackoverflow.com/questions/1945294/adding-custom-analyzers-to-luke)了，顺便说一句，即使在阅读了提供的答案之后，我也没有设法添加*MyOwnAnalyzer*，所以我可以直接从 [Luke](http://code.google.com/p/luke/)使用它。

请有人可以帮助我以正确的方式做事，那就是如何以及如何做才能使*MyOwnAnalyzer*可以直接从 Luke 中使用？

我可以这样做（它不起作用，可能是我包含的 jar 不完整？）：

```
java -cp .;d:\java\mylibs\MyOwnAnalyzer.jar -jar lukeall-3.5.0.jar 
```

（*MyOwnAnalyzer.jar*是从 Eclipse 构建的，包含：子目录 com.MyCompany 中的*MyOwnAnalyzer.java、MyOwnTokenizer.java 和**MyOwnToken.java* ... Eclipse 为我添加了*META-INF*和*manifest.mf*）

也许我在命令行中添加类路径和 MyOwnAnalyzer.jar 是错误的？

或者我必须从源代码构建 Luke，包括其目录中某处的 MyOwnAnalyzer？

或者是否还有其他内容要包含/编写，以便我的分析器可以使用并从 Luke 导入？（看起来有一种机制可以检测所有类的子类 Analyzer - MyOwnAnalyzer 已经声明为“ `extends Analyzer`”）

顺便说一句，即使它不是真正相同的问题，但仍然在使用来自 Luke 的自定义分析器的同一主题中......我在使用我得到的选项卡*分析器工具*`Error analyzing:com/google/common/io/CharStreams`时出现错误，这个库包含在一个 jar 中，我包括一个进行样本分析以检查的主体，单独使用时一切正常。如果我按照 JPountz 的解释使用它，来自 Luke，我可以从所有 Luke 选项卡中看到 MyOwnAnalyzer，但它不起作用！

从卢克代码源，我认为抛出异常的原因位于方法[分析](http://luke.googlecode.com/svn-history/r75/branches/branch-3x/src/org/getopt/luke/plugins/AnalyzerToolPlugin.java)内部的某个地方。

注意：调用`CharStreams.toString(input);`是将`Reader`输入转换为内部的字符串`MyOwnTokenizer`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T21:45:44.250

当同时使用 -jar 选项时，Java 会忽略 -cp 选项。你需要这样运行 Luke：

```
java -cp lukeall-3.5.0.jar;MyOwnAnalyzer.jar org.getopt.luke.Luke 
```

# java - 从java启动jar：执行路径和相关资源

> ID：11190247
> 
> 赞同：0
> 
> 时间：2012-06-25T13:25:20.643
> 
> 标签：java, jar, path, system, execution

我正在尝试通过 exec() 从 Java 代码运行 jar 文件。

我正在执行的 jar 有一些相对于需要加载的路径的资源。因此，例如从控制台执行： java -jar [/path/to/jar/]exec.jar 仅在从同一目录启动命令时才有效

我尝试过： cd /path/to/jar/exec.jar && java -jar /path/to/jar/exec.jar 但似乎 exec() 中存在运行 cd 的问题，在网。主要问题是我正在寻找一个同时在 Linux 和 Windows 上运行的程序。

我试图弄乱 -classpath 选项，但没有运气。

有什么简单的解决方案吗？请注意，我不“喜欢”系统调用的想法，只是我在寻找一种简单的方法来安排自定义 jar 的执行。

先感谢您！CB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:24:25.207

您需要使用[ProcessBuilder.directory(File)](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html#directory%28java.io.File%29)设置已启动进程的工作目录。

# php - 如何将数字更改为单词中的月份

> ID：11190250
> 
> 赞同：4
> 
> 时间：2012-06-25T13:25:39.203
> 
> 标签：php, smarty

我需要尝试在其他循环中使用月份名称、日期和年份的下拉菜单，s

我尝试以字符串格式转换 mm 循环，例如第一个月是 jan，值为 1

输出将低于

```
 <option value=1>jan</option> 
```

我使用以下代码

```
<select name="dd" id="dd">
<option value="">Day</option>
{for $foo=1 to 31}
 <option value="{$foo}">{$foo}</option>
{/for}
</select>
<select name="mm" id="mm">
<option value="">Month</option>
{for $foo=1 to 12}
 <option value="{$foo}">{$smarty.now|date_format:"%b"}</option>
{/for}
</select>
<select name="yy" id="yy">
<option value="">Year</option>
{for $foo=1970 to {$foo|date_format:"%Y"}}
 <option value="{$foo}">{$foo}</option>
{/for}
</select> 
```

请帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:24:37.577

您可能对[{html_select_date}](http://www.smarty.net/docs/en/language.function.html.select.date.tpl)感兴趣。

```
{html_select_date 
  start_year=1970 
  month_format="%b" 
  field_order="dmy" 
  field_array="date" 
  prefix="" 
  day_id="dd" 
  month_id="mm" 
  year_id="yy"
} 
```

将生成 HTML 之类的

```
<select id="dd" name="date[Day]">
  <option value="1">01</option>
  …
  <option value="31">31</option>
</select>
<select id="mm" name="date[Month]">
  <option value="01">Jan</option>
  …
  <option value="12">Dec</option>
</select>
<select id="yy" name="date[Year]">
  <option value="1970">1970</option>
  …
  <option selected="selected" value="2012">2012</option>
</select> 
```

提示：设置`time="2011-05-17"`参数以选择该日期。

# java - 无法使用 jnlp 启动 jar

> ID：11190253
> 
> 赞同：1
> 
> 时间：2012-06-25T13:25:50.407
> 
> 标签：java, jnlp

我正在尝试通过 jsp 部署 jnlp jsp 文件如下所示：

```
<%response.setContentType("application/x-java-jnlp-file");

String merchantId = request.getParameter("merchantId");
String restaurantId = request.getParameter("restaurantId");
System.out.println(merchantId+"::"+restaurantId); %>
<?xml version="1.0" encoding="utf-8"?> 
<jnlp spec="1.0+" codebase="http://menuzapp-dev-2.appspot.com/" >
    <information>
        <title>Menuzapp Printing</title>
        <vendor>YONG MOOK KIM</vendor>
        <homepage href="http://menuzapp-dev-2.appspot.com/" />
        <description>print tickets</description>
    </information>
    <security>
        <all-permissions/>
    </security>
    <resources>
        <j2se version="1.6+" />
        <jar href="PrinterApplication.jar" main="true" />
        <jar href="bluecove-2.1.1-SNAPSHOT.jar"/>
        <jar href="gson-1.6.jar"/>
        <jar href="jackson-core-lgpl-1.7.2.jar"/>
        <jar href="jackson-mapper-lgpl-1.7.4.jar" />
    </resources>
    <application-desc main-class="com.PrinterApp" >
      <argument><% out.print(merchantId); %></argument>
      <argument><% out.print(restaurantId); %></argument>
    </application-desc>
</jnlp> 
```

我已经使用相同的证书认证了所有 jar，当我尝试在本地服务器上运行它时，它成功启动了 jar，但是当我更改服务器 url 时，我得到如下异常：

```
<jnlp spec="1.0+" codebase="http://menuzapp-dev-2.appspot.com/">
  <information>
    <title>Menuzapp Printing</title>
    <vendor>YONG MOOK KIM</vendor>
    <homepage href="http://menuzapp-dev-2.appspot.com/"/>
    <description>print tickets</description>
  </information>
  <security>
    <all-permissions/>
  </security>
  <update check="timeout" policy="always"/>
  <resources>
    <java version="1.6+"/>
    <jar href="http://menuzapp-dev-2.appspot.com/PrinterApplication.jar" download="eager" main="true"/>
    <jar href="http://menuzapp-dev-2.appspot.com/bluecove-2.1.1-SNAPSHOT.jar" download="eager" main="false"/>
    <jar href="http://menuzapp-dev-2.appspot.com/gson-1.6.jar" download="eager" main="false"/>
    <jar href="http://menuzapp-dev-2.appspot.com/jackson-core-lgpl-1.7.2.jar" download="eager" main="false"/>
    <jar href="http://menuzapp-dev-2.appspot.com/jackson-mapper-lgpl-1.7.4.jar" download="eager" main="false"/>
  </resources>
  <application-desc main-class="com.PrinterApp">
    <argument>SGXX.000001</argument>
    <argument>ag5tZW51emFwcC1kZXYtMnIRCxIKUkVTVEFVUkFOVBiwFQw</argument>
  </application-desc>
</jnlp> ]
    at com.sun.javaws.LaunchDownload.checkSignedResourcesHelper(Unknown Source)
    at com.sun.javaws.LaunchDownload.checkSignedResources(Unknown Source)
    at com.sun.javaws.Launcher.prepareResources(Unknown Source)
    at com.sun.javaws.Launcher.prepareAllResources(Unknown Source)
    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
    at com.sun.javaws.Launcher.launch(Unknown Source)
    at com.sun.javaws.Main.launchApp(Unknown Source)
    at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
    at com.sun.javaws.Main$1.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

谢谢

# ms-access - 记录太大 MS Access 运行时错误

> ID：11190256
> 
> 赞同：4
> 
> 时间：2012-06-25T13:25:54.767
> 
> 标签：ms-access, ms-access-2010

我在 MS Access 中的一个应用程序有一个异常大的表。它猛烈地破坏了一些规范化规则，但对于这个小型应用程序来说还不错。它有大约 100 个字段（列）。我已经阅读了[这里的限制规范，](http://office.microsoft.com/en-us/access-help/access-2010-specifications-HA010341462.aspx) 但看不到我在哪里违反了这些规范。大多数字段都是文本字段，范围从几个单词到几个句子。我的问题是：

1.  有没有办法获得比“记录太大”更具描述性的错误，以便我可以确定如何使其更小？

2.  将我的“文本”字段更改为“备忘录”字段会减小我的记录大小吗？

乍一看，在所有可能违反的规范中，**当字段的 UnicodeCompression 属性设置为 Yes :: 4,000 时，这 :Number of characters in a record（不包括备忘录和 OLE 对象字段）**
似乎是最可能的罪魁祸首。

3.  这种违规是否会导致“记录太大”运行时错误（在填写表格时）。

4.  将 UnicodeCompression 属性设置为“否”会对性能产生正面还是负面影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:51:01.683

备忘录字段可能是答案。记录限制规则不包括备忘录数据类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T13:57:24.280

似乎字段的限制是 2000 字节（备忘录和 OLE 不计入此限制）。使用约 100 个字段，您可能会达到该限制。

解决办法是对表格进行规范化，或者将某些字段转换为备注字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-16T00:51:49.277

也许为时已晚，但我解决了这个问题，压缩/修复数据库文件

# html - css 表格布局适用于 chrome 而不是 IE9

> ID：11190258
> 
> 赞同：0
> 
> 时间：2012-06-25T13:26:19.243
> 
> 标签：html, css

我有一个无法在 IE 中工作的布局示例。当我单击按钮时，我在底部 div 上切换 50px 和 100px 之间的大小。

我试着做一个小提琴，但无法让它工作。

```
<style type="text/css">
    .table
    {
        display: table;
        width: 100%;
        height: 100%;
    }

    .bottom
    {
        display: table-row;
        height: 100px;
        background-color: red;
    }

    .top
    {
        display: table-row;
        height: 100%;
        background-color: yellow;
        position: relative;
    }

    .header
    {
         height: 100px;
         background-color : gray;
    }

    .content
    {
        display: table-row;
        height: 100%;
        background-color: yellow;
        position: relative;
    }

    .footer
    {
        display: table-row;
        height: 100px;
        background-color: blue;
    }

</style>
<div style="position: absolute; top: 0; right: 0; bottom: 0; left: 0;">
<div class="table">
    <div class="top">
        <div class="table">
            <div class="header" >
                header
            </div>
             <div class="content">
                1.1
            </div>
            <div class="footer">
                1.2
            </div>
        </div>
    </div>
    <div class="bottom">
    <!-- Can change bottom height to 50px on click -->
        <button id="changeSize"></button>
    </div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:16:48.757

我有上面的代码在 jsfiddle 中工作：http: [//jsfiddle.net/c8nLb/1/](http://jsfiddle.net/c8nLb/1/)

据我所知，它适用于 IE(9)。

我注意到类底部的元素并将其更改为 ID（[getElementsByClassName IE 解决问题](https://stackoverflow.com/questions/4404154/getelementsbyclassname-ie-resolution-issue)）

我还将高度从主要的 CSS 样式规则块移到了内联样式，因为我无法让它使用 Javascript 采用高度样式。

希望它也适合你！

# ruby-on-rails - 如果对 Devise 和 Rails 有疑问？

> ID：11190259
> 
> 赞同：0
> 
> 时间：2012-06-25T13:26:20.560
> 
> 标签：ruby-on-rails, if-statement, devise, cancan

我只希望创建对象（例如注册表）的人看到一些东西=，但努力用 Devise 定义一切

这是代码：

```
<% if user_signed_in? && ***"current_user = registry the user created?"?(struggling with the second part)*** %> 
```

提前致谢

PS我正在使用cancan，但这对我想要显示页面的显示页面没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:54:54.717

这不是设计的一部分，而是康康舞的一部分。

您需要在您的 cancan 能力文件中定义能力：

```
user ||= User.new
can :read, Registry, :user_id => user.id 
```

这样，cancan 的授权方法将允许您执行以下操作：

```
@registry = Registry.find(params[:id])
authorize! :read, @registry 
```

明明授权！如果用户无权访问此资源，将引发错误。

如果您只是想在您使用的注册表视图中检查这一点：

```
<% if can? :read, @registry %>
  do your thing here
<% end %> 
```

顺便说一句，所有这些都记录在 cancan 首页上：[https ://github.com/ryanb/cancan](https://github.com/ryanb/cancan)

# perl - perl搜索关键字的句子

> ID：11190260
> 
> 赞同：-3
> 
> 时间：2012-06-25T13:26:22.043
> 
> 标签：perl, match, keyword

如果我想使用 Perl 在句子中查找关键字，我有这样的东西：

```
foreach $line (@lines) 
{ 
   if ($line =~/keyword/) 
   {
      print $line;
   }
} 
```

如果我想查看句子中是否有更多关键字，我应该如何更改匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:54:20.820

有几种解决方案。最简单的方法是使用类似`/keyword.*keyword/`.

当您想计算字符串中关键字的数量时（不仅仅是检查是否有两个关键字），您可以执行以下操作：

```
for(@lines){
    my $n = 0;
    $n++ while /(keyword)/g;
    print if ($n>2);
} 
```

顺便说一句，您的代码可以更简洁：

```
for (@lines) {
  print if /keyword/;
} 
```

那是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:59:09.117

如果要处理所有匹配项的每个匹配项（*g*修饰符）：

```
my $number_of_matches = 0;

foreach $line (@lines) 
{ 
   while ( $line =~ m/keyword/g ) 
   {
      do_something_you_need();
      $number_of_matches++;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:31:53.317

```
my @words=map {split / /;} @lines;

foreach my $el(@keywords) {

    @match=grep {$el eq $_} @words;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T17:17:14.270

您想查看句子是否包含其他（不同）关键字，还是要检查它是否多次包含相同的关键字。

首先，你可以写

```
if ($line =~ /keyword1|keyword2|keyword3/) { ... } 
```

第二个，它看起来像这样

```
my $n = () = $line =~ /keyword/g; 
```

# java - 后缀堆栈计算器

> ID：11190264
> 
> 赞同：6
> 
> 时间：2012-06-25T13:26:46.910
> 
> 标签：java, stack, calculator, postfix-notation

我为我的 Java 类创建了一个堆栈计算器来解决诸如

```
2 + ( 2 * ( 10 – 4 ) / ( ( 4 * 2 / ( 3 + 4) ) + 2 ) – 9 )
2 + { 2 * ( 10 – 4 ) / [ { 4 * 2 / ( 3 + 4) } + 2 ] – 9 } 
```

我们应该`{ } [ ]`在我们的代码中实现。我只用了括号。它只适用于 100% `( )`。当我尝试添加`{ } [ ]`时，它变成了香蕉。

这是我到目前为止所拥有的：

```
package stackscalc;

import java.util.Scanner;
import java.util.Stack;
import java.util.EmptyStackException;

class Arithmetic {
    int length;
    Stack stk;
    String exp, postfix;

    Arithmetic(String s) {
        stk = new Stack();
        exp = s;
        postfix = "";
        length = exp.length();

    }
    boolean isBalance() {
        boolean fail = false;
        int index = 0;

        try {
            while (index < length) {
                char ch = exp.charAt(index);

                switch(ch) {
                case ')':
                    stk.pop();
                    break;

                case '(':
                    stk.push(new Character(ch));
                    break;

                default:
                    break;
                }
                index++;
            }
        } catch (EmptyStackException e) {
            fail = true;
        }
        return stk.empty() && !fail;
    }
    void postfixExpression() {
        String token = "";
        Scanner scan = new Scanner(exp);
        stk.clear();

        while(scan.hasNext()) {
            token = scan.next();
            char current = token.charAt(0);

            if (isNumber(token)) {
                postfix = postfix + token + " ";
            } else if(isParentheses(current)) {
                if (current == '(') {
                    stk.push(current);
                } else {
                    Character ch = (Character) stk.peek();
                    char nextToken = ch.charValue();

                    while(nextToken != '(') {
                        postfix = postfix + stk.pop() + " ";

                        ch = (Character) stk.peek();

                        nextToken = ch.charValue();
                    }
                    stk.pop();
                }
            } else {
                if (stk.empty()) {
                    stk.push(current);
                } else {
                    Character ch = (Character) stk.peek();
                    char top = ch.charValue();

                    if (hasHigherPrecedence(top, current)) {
                        stk.push(current);
                    } else {
                        ch = (Character) stk.pop();

                        top = ch.charValue();

                        stk.push(current);

                        stk.push(top);
                    }
                }
            }
        }
        try {
            Character ch = (Character) stk.peek();
            char nextToken = ch.charValue();

            while (isOperator(nextToken)) {
                postfix = postfix + stk.pop() + " ";
                ch = (Character) stk.peek();
                nextToken = ch.charValue();
            }
        } catch (EmptyStackException e) {}
    }
    boolean isNumber(String s) {
        try {
            int Num = Integer.parseInt(s);
        } catch(NumberFormatException e) {
            return false;
        }
        return true;
    }
    void evaluateRPN() {
        Scanner scan = new Scanner(postfix);
        String token = "";
        stk.clear();

        while(scan.hasNext()) {
            try {
                token = scan.next();
                if (isNumber(token)) {
                    stk.push(token);
                } else {
                    char current = token.charAt(0);
                    double t1 = Double.parseDouble(stk.pop().toString());
                    double t2 = Double.parseDouble(stk.pop().toString());
                    double t3 = 0;

                    switch (current) {
                    case '+': {
                        t3 = t2 + t1;
                        stk.push(t3);
                        break;
                    }
                    case '-': {
                        t3 = t2 - t1;
                        stk.push(t3);
                        break;
                    }
                    case '*': {
                        t3 = t2 * t1;
                        stk.push(t3);
                        break;
                    }
                    case '/': {
                        t3 = t2 / t1;
                        stk.push(t3);
                        break;
                    }
                    default: {
                        System.out.println("Reverse Polish Notation was unable to be preformed.");
                    }
                }
            }

        } catch (EmptyStackException e) {}
    }
}
String getResult() {
    return stk.toString();
}

int stackSize() {
    return stk.size();
}

boolean isParentheses(char current) {
    if ((current == '(') || (current == ')')) {
        return true;
    } else {
        return false;
    }
}

boolean isOperator(char ch) {
    if ((ch == '-')) {
        return true;
    } else if ((ch == '+')) {
        return true;
    }
    else if ((ch == '*')) {
        return true;
    }
    else if((ch == '/')) {
        return true;
    } else {

    }
    return false;
}

boolean hasHigherPrecedence(char top, char current) {
    boolean HigherPre = false;

    switch (current) {
    case '*':
        HigherPre = true;
    break;

    case '/':
        HigherPre = true;
    break;

    case '+':

        if ((top == '*') || (top == '/') || (top == '-')) {
             HigherPre = false;
        } else {
             HigherPre = true;
        }

        break;

    case '-':
        if ((top == '*') || (top == '/') || (top == '-')) {
            HigherPre = false;
        } else {
            HigherPre = true;
        }
        break;

    default:
        System.out.println("Higher Precedence Unsuccessful was unable to be preformed.");
        break;
    }

    return HigherPre;

   }

    String getPostfix() {
        return postfix;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:21:05.960

我假设 ()、{} 和 [] 在操作顺序方面都具有相同的权重，您只需要修改代码以允许所有三个可以互换。

如果是这种情况，我只会使用带有简单正则表达式检查的匹配器类，以查看您正在查看的当前字符是括号、花括号还是括号。

```
 //convert char to string
    String temp += currentChar;
    //this will check for (, [, and { (need escapes because of how regex works in java)
    Pattern bracePattern = Pattern.compile("[\(\{\[]");
    Matcher matcher = numPatt.matcher(temp);
    if(matcher.find()){
    //you know you have a grouping character
    } 
```

此代码应允许您找到所有开始分组字符（只需在正则表达式中替换 (,{, 和 [ ),} 和 ] 以查找结束字符）。这可以在您的 isParenthesis() 方法中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-23T21:08:41.993

您可以使用这样的方法来简化检查 '('、'[' 或 '{' 是否匹配。

```
static char getExpected(char val){
       char expected=' ';
        switch (val) {
            case '(':
                expected=')';
                break;
            case '[':
                expected=']';
                break;
            case '{':
                expected='}';
                break;
        }
       return expected;
   }
```

# http - 私有 API 错误响应应该使用什么 4xx HTTP 返回码？

> ID：11190267
> 
> 赞同：0
> 
> 时间：2012-06-25T13:26:57.147
> 
> 标签：http, rest, http-headers

我正在设计一个 REST API。服务器应该发送什么响应来表示“我已经收到您的请求，解析它并且它是有效的，但我不会处理它，因为您没有提供足够的 glob。”

当只有 100 个可能的错误时，IANA 永远不会为此分配 4xx 错误代码。我查看了维基百科上的 4xx 列表，它们都有特定的含义，没有一个意味着私有 API 使用的通用错误。

当客户端无法提供足够的 glob 时，服务器应该怎么做？

**更新**
我不认为 400 是正确的。RFC2616 说：

> 10.4.1 400 Bad Request
> 由于语法错误，服务器无法理解请求。客户端不应该在没有修改的情况下重复请求。

这个错误似乎是针对协议的更基本错误而不是我正在考虑的错误类别。但是，无论如何，许多人似乎（ab）为此目的使用此代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:35:24.767

400 是一个通用状态代码，旨在捕获整个范围的客户端错误。使用“原因短语”或响应正文进一步限定错误原因。

# wso2 - Wso2 和 jdeveloper（uddi 版本 2）

> ID：11190270
> 
> 赞同：0
> 
> 时间：2012-06-25T13:27:13.617
> 
> 标签：wso2, jdeveloper

我们正在尝试将 WSO2 与 jdeveloper 一起使用，但 jdeveloper 似乎只支持 UDDI version2。

WSO2 是否支持 UDDI 版本 2？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:33:35.033

是的，较新的版本旨在支持 UDDI 规范的第 2 版和第 3 版。

谢谢，塞纳卡。

# magento - 覆盖 Mage_Catalog_Block_Layer_View 是 magento 中的错误吗？

> ID：11190271
> 
> 赞同：1
> 
> 时间：2012-06-25T13:27:20.217
> 
> 标签：magento

我正在尝试`Mage_Catalog_Block_Layer_View`在 magento 中覆盖。我试图覆盖它`Mage_Catalog_Block_Layer_State`并且它工作正常，但`layer_view`重写没有。这是一个错误吗？

```
<global>
    <blocks>
        <catalog>
            <rewrite>
                <layer_view>Mymodule_Catalog_Block_Layer_View</layer_view>
            </rewrite>
        </catalog>
    </blocks>
</global>

<global>
    <blocks>
        <catalog>
            <rewrite>
                <layer_state>Mymodule_Catalog_Block_Layer_State</layer_state>
            </rewrite>
        </catalog>
    </blocks>
</global> 
```

请帮帮我。我正在尝试几个小时

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T15:19:01.857

诊断它的最佳方法是自己验证类名重写。在`./demo.php`：

```
<?php

ini_set('display_errors',true);
error_reporting(E_ALL | E_STRICT);

include 'app/Mage.php';
Mage::setIsDeveloperMode(true);
Mage::app();

$layer = Mage::getConfig()->getBlockClassName('catalog/layer_view');

var_dump($layer); 
```

您应该看到您的自定义模块块类名被返回，而不是核心块类名。如果是这种情况，那么您需要逐步确定问题所在。这个块与其他几个块实例高度耦合，使用起来可能很痛苦。

另外，请注意该`Mage_CatalogSearch`模块有一个从该块`layer_view`扩展的`Mage_Catalog` `layer_view`块，*它不会使用您的覆盖。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:02:49.413

找到您的 .phtml 使用哪个类的最佳方法放在`echo get_class($this)`其中。

由于我使用的是企业版，所以我的分层导航不使用 Mage_Catalog_Block_Layer_View。相反，它使用 Enterprise_Search_Block_Catalog_Block_Layer_View 类。

当我覆盖该课程时，所有事情都为我整理好了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-21T10:36:47.967

我使用了下面提到的代码：

在 config.xml 中

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <PKR_Advmixfilter>
            <version>0.1.0</version>
        </PKR_Advmixfilter>
    </modules>

    <global>
        <blocks>
            <catalog>
                <rewrite>
                    <layer_view>PKR_Advmixfilter_Block_Layer_View</layer_view>
                </rewrite>
            </catalog>
        </blocks>
    </global>
</config> 
```

并创建了一个块视图文件。

```
class PKR_Advmixfilter_Block_Layer_View extends Mage_Catalog_Block_Layer_View {

    public function getFilters()
    {
        $filters = array();
        if ($categoryFilter = $this->_getCategoryFilter()) {
            $filters[] = $categoryFilter;
        }

        $filterableAttributes = $this->_getFilterableAttributes();
        foreach ($filterableAttributes as $attribute) {
            $filters[] = $this->getChild($attribute->getAttributeCode() . '_filter');
        }

        return $filters;
    }
} 
```

它在我的最后工作。所以没有错误。:)

# c++ - 取消引用静态变量时的链接错误

> ID：11190275
> 
> 赞同：-2
> 
> 时间：2012-06-25T13:27:32.400
> 
> 标签：c++, static, linker

（我没有找到任何类似的问题......所以，我希望你能帮助我）

在我正在开发的 C++ 程序中，我有一个模拟线程的类。我在这里称它为“测试”。在其中，我有一个静态映射（`std::map`来自 STL），其中存储了一些信号量（因为我需要所有线程都可以访问相同的信号量）。（我认为不值得解释为什么我使用 a `map`，而不是 a `vector`，但我相信这应该不是问题）

为了“获取”这个静态变量，我创建了一个`getMutexHash()`函数，它返回一个指向 static 的指针`map`。但是，由于某种原因，在编译后，我在尝试返回`this pointer`.

下面的代码举例说明了这个问题：

```
// MAIN.CPP
#include "Test.h"

int main ()
{
    Test test;
    map<int, pthread_mutex_t>* mutexHash = test.getMutexHash();

    return 0;
}

// TEST.H
#include <map>
#include <pthread.h>

using namespace std;

class Test
{
  public:
    map<int, pthread_mutex_t>* getMutexHash();
  private:
    static map<int, pthread_mutex_t> mutexHash;
};

// TEST.CPP
#include "Test.h"

map<int, pthread_mutex_t>* Test::getMutexHash()
{
    return &mutexHash;
} 
```

编译时，我没有收到错误或警告；但是在链接时，我收到此错误：

```
Test.o: In function `Test::getMutexHash()':
Test.cpp:(.text+0x9): undefined reference to `Test::mutexHash'
collect2: ld returned 1 exit status 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:53:15.533

你已经*声明*它`mutexHash`存在，但还没有*定义*它。您需要将定义添加到`test.cpp`：

```
map<int, pthread_mutex_t> Test::mutexHash; 
```

# c# - 如果数据库中有日期，则比较日期

> ID：11190276
> 
> 赞同：1
> 
> 时间：2012-06-25T13:27:35.093
> 
> 标签：c#, .net, linq

我有一个简单的 LINQ 查询。如果数据库中有条目，我只想检查 DateDisable 。如果用户没有选择禁用日期，该条目将始终显示。有人可以告诉我如何在 linq 中添加条件语句

```
return (from promo in context.Promoes
        where promo.DateEnable <= DateTime.Today
        where promo.DateDisable >= DateTime.Today
        orderby promo.SortOrder
        select promo).ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:10:51.877

[鉴于这`DateEnable`是 a`DateTime?`](https://stackoverflow.com/questions/11190276/c-sharp-linq-compare-date-if-there-is-a-date-in-the-database#comment14686913_11190276)，您可以执行以下操作：

```
// Get today.
DateTime today = DateTime.Today;

return (
    from promo in context.Promoes
    where 
        promo.DateEnable <= today &&
        (promo.DateDisable == null || promo.DateDisable >= today)
    orderby promo.SortOrder
    select promo
).ToList(); 
```

基本上，您需要检查日期`null` *是否*大于今天。

此外，您应该捕获语句之外的值，不能保证 LINQ 提供程序将[`DateTime.Today`](http://msdn.microsoft.com/en-us/library/system.datetime.today.aspx)在数据库端正确转换。

但是，请注意，由于延迟执行，如果您等待很长时间来执行查询，`today`可能不会给您预期的值（如果声明查询和执行查询之间的时间超过午夜）。

当然，如果您的数据库服务器与您的应用程序服务器位于不同的时区，那么您需要确保`DateTime.Today`您的 LINQ 提供程序正确处理它（以便在服务器上执行）并在您想要比较时使用它数据库服务器上的时间。如果您的提供程序*不能*正确处理翻译`DateTime.Today`，那么您将不得不求助于存储过程并调用它。

# php - 解析错误：语法错误，第 4 行 C:\xampp\htdocs\capital.php 中的意外 T_DOUBLE_ARROW

> ID：11190278
> 
> 赞同：-5
> 
> 时间：2012-06-25T13:27:45.317
> 
> 标签：php

```
<?php

    $a=$_POST["t1"];
    $ar=$array("gujarat"=>"gandhinagar"
        ,"mumbai"=>"maharashtra"
        ,"madras"=>"channie");

    echo "capital is=" . $ar;

?> 
```

> 解析错误：语法错误，第 4 行 C:\xampp\htdocs\capital.php 中的意外 T_DOUBLE_ARROW

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T13:49:46.840

您之前有一个美元符号 ( `$`) `array()`，这导致 PHP 将其解释为对`$array`变量的引用，而实际上您想要创建一个新数组：

```
$ar=$array("gujarat"=>"gandhinagar"
    ^
    Here 
```

# android - 背景可绘制没有随着文本视图宽度拉伸

> ID：11190280
> 
> 赞同：0
> 
> 时间：2012-06-25T13:27:50.680
> 
> 标签：android, tablelayout

这是问题所在：文本视图边框小于包含“Loooooong Teeeeext”的列中的单元格大小

![在此处输入图像描述](../Images/96533488532a2737adebb6e2f7398d90.png)

我使用这个背景可绘制

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >
   <solid android:color="#ffffff" />
   <stroke android:width="1dip" android:color="#1e11d5"/>
</shape> 
```

和这个表格的布局

```
<LinearLayout android:id="@+id/ll_country"
        android:layout_height="fill_parent" android:layout_width="fill_parent">
        <ScrollView android:id="@+id/ScrollView11"
            android:layout_width="fill_parent" android:layout_height="fill_parent"
            android:fillViewport="true">
            <HorizontalScrollView
                android:layout_width="fill_parent" android:layout_height="fill_parent"
                 >
            <LinearLayout 
                android:id="@+id/layout_table"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" android:layout_margin="5dip">
                <!-- <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
                    android:layout_width="fill_parent" android:layout_height="fill_parent"
                    android:stretchColumns="0,1" android:id="@+id/country_table">
                </TableLayout> -->
            </LinearLayout>
            </HorizontalScrollView>
        </ScrollView>
    </LinearLayout> 
```

这是生成表格的代码

```
for (int current = 0; current < 100 ; current++) {
            row = new TableRow(this);

            TextView t;
            for(int i =0 ; i < 20 ; i++){
                t = new TextView(this);
                t.setTextSize(20);
                t.setText(" text "+i+" ");
                t.setBackgroundDrawable(border);
                if((i== 4) && (current == 5)){
                    t.setText("  looooooong teeeeext  ");
                }
                //t.setWidth(20);
                t.setTextColor(Color.BLACK);
                row.addView(t,LinearLayout.LayoutParams.WRAP_CONTENT,LinearLayout.LayoutParams.WRAP_CONTENT);
                t.setBackgroundDrawable(border);
            }

            table.addView(row, new TableLayout.LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

        }

layout_table.addView(table, new TableLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:55:06.183

您还可以展示您是如何生成`border`可绘制对象的吗？我建议使用

`t.setBackgroundResource(R.drawable.border)`

代替

`t.setBackgroundDrawable(border)`

看看这是否能解决问题。

# r - knitr 中 R 降价的全局注释选项

> ID：11190281
> 
> 赞同：5
> 
> 时间：2012-06-25T13:27:53.057
> 
> 标签：r, knitr

要更改输出的前导字符，.Rmd 中的 knitr 块有一个注释选项，例如

```
```{r comment = ""}
1:100
``` 
```

有没有办法在全局范围内设置它，而不是为每个块单独设置？

```
opts_knit$set(comment = "") 
```

不起作用，我在文档中的任何地方都找不到它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T14:49:30.217

使用`opts_chunk$set()`因为那是一个*块*选项；`opts_knit`用于包选项（对不起，显然让您感到困惑的相似名称）。见[http://yihui.name/knitr/options](http://yihui.name/knitr/options)

# ruby - 使用 Ruby 安全地向网站发送密码

> ID：11190282
> 
> 赞同：1
> 
> 时间：2012-06-25T13:27:54.643
> 
> 标签：ruby, http, authentication

Minecraft 使用启动器来减少游戏被盗：任何人都可以免费下载，但用户必须提供高级帐户的凭据才能更新游戏。我想为一个项目构建一个类似的启动器（在 Ruby 中），但我无法弄清楚如何安全地将密码发送到 HTTP 服务器（如果重要的话，用 Sinatra 编写）。显然，将其作为 URL 中的参数是一个非常糟糕的主意。

另外，我想以某种方式使用密码字段发送它，但我不知道它们是如何工作的（我通常不做 HTTP 的东西）。这仍然是一种可能。

简短摘要：在 Ruby 中，我想通过 HTTP 请求将敏感信息发送到 Ruby/Sinatra 服务器。

感谢您阅读本文！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:21:22.833

使用密码字段没有帮助。即使通过 POST 发送也不行。无论您多么努力地隐藏它们，它们都是以明文形式发送的——这就是 http 的本质。

您绝对应该使用 TLS over https。标准库为此提供了[Net::HTTP](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html)，但您可以使用任何支持 https 的 http 客户端。

如果该计划涉及金钱/价值，请不要满足于任何更少！发明自己的协议是

*   更多的工作（我承认 TLS 并不总是很容易设置，但仍然少了很多工作）
*   在 99.9% 的情况下不安全
*   在其余情况下完全损坏

不，老实说，发明安全协议可能是目前最难的工作之一。所以跛脚并坚持主流（https），它最终会得到回报。

编辑：

您问 TLS 是否因为需要证书而花钱。这只是服务器端的一个问题，在单向身份验证的 TLS 中，只有服务器需要提供证书，因此连接到该服务器的客户端不必购买这样的证书。但是，如果您也操作服务器，那么您将需要这样的证书。如果您不想花钱，您可以考虑免费为您提供 https 的托管服务。[据我所知， Heroku](https://devcenter.heroku.com/articles/ssl)提供了这样一项免费服务，而且我认为还有其他提供者。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-25T13:58:50.180

正如@Len 所说，使用 HTTPS，或者，如果这不是一个选项，则只加密密码：

*   至少，异或加密
*   也许是 DES
*   或者 RSA（完全矫枉过正，除非你的游戏值得权力黑客注意试图破解你的加密，因为 RSA 是银行和军事级别的）

然后，您将使用您的启动器（服务器上的私有密钥）分发一个公共 RSA 密钥，并使用它们来加密密码（或使用它们来加密对称加密密钥）。

# scala - Scala 匹配错误与 unapply

> ID：11190284
> 
> 赞同：2
> 
> 时间：2012-06-25T13:28:12.433
> 
> 标签：scala, pattern-matching, unapply

我正在[http://www.scala-lang.org/node/112](http://www.scala-lang.org/node/112)上尝试代码，但我收到了一个看起来不应该抛出的匹配错误。

这是原始代码：

```
object Twice {                              
  def apply(x: Int): Int = x * 2
  def unapply(z: Int): Option[Int] = if (z%2 == 0) Some(z/2) else None
}

object TwiceTest extends Application {
  val x = Twice(21)
  x match { case Twice(n) => Console.println(n) } // prints 21
} 
```

我只是添加了几行来测试当我传递一个奇数时会发生什么：

```
object TwiceTest extends Application {
  val x = Twice(21)
  x match { case Twice(n) => Console.println(n) } // prints 21
  val y = 21
  y match { case Twice(n) => Console.println(n) } // throws scala.MatchError: 21 (of class java.lang.Integer)
} 
```

据我所知，21 或任何奇数的情况也应该由对象中的 unapply 方法处理。有人可以解释为什么不是这样吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T14:06:53.383

```
val x = Twice(21) 
```

是相同的

```
val x = Twice.apply(21) 
```

这意味着`x`将等于`42`。`Twice.unapply(42)`返回 a ，`Some(21)`表示`case Twice(21)`成功匹配值`x == 42`。

这就是`match`打印出第一条语句的原因`21`。

`Twice.unapply(21)`返回`None`（因为`y == 21`，即如果是`y`奇数）。每当 a`unapply`返回`None`某个值时，我们就说具有该方法的提取器对象与该值`unapply`不**匹配**。

如果一个`match`语句的值与它的任何情况都不匹配，它将抛出一个`MatchError`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:05:29.943

它正在由您的`unapply`方法处理，但不是`match`. 由于您`unapply`应该返回 a `None`，这意味着它不符合`case Twice(n)`。

将其更改为类似

```
21 match {
  case Twice(n) => println("this won't happen")
  case x => println("just " + x)
} 
```

# java - 写函数，它是返回素因子数组

> ID：11190289
> 
> 赞同：1
> 
> 时间：2012-06-25T13:28:48.853
> 
> 标签：java

我有一个函数，它返回一个数字的素数，但是当我初始化 int 数组时我设置了大小。所以结果包含不必要的**零**。如何返回不带零的结果数组或如何初始化数组适用的大小？我没有使用**列表**

```
public static int[] encodeNumber(int n){
        int i;
        int j = 0;
        int[] prime_factors = new int[j];
        if(n <= 1) return null;
        for(i = 2; i <= n; i++){
            if(n % i == 0){
                n /= i;
                prime_factors[j] = i;
                i--;
                j++;
            }
        }
        return prime_factors;
    } 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T04:09:22.960

这是解决我最近解决的主要因素问题的快速方法。我不声称它是原创的，但我确实自己创造了它。实际上必须在 C 中执行此操作，我只想 malloc 一次。

```
public static int[] getPrimeFactors(final int i) {
    return getPrimeFactors1(i, 0, 2);
}

private static int[] getPrimeFactors1(int number, final int numberOfFactorsFound, final int startAt) {

    if (number <= 1) { return new int[numberOfFactorsFound]; }

    if (isPrime(number)) {
        final int[] toReturn = new int[numberOfFactorsFound + 1];
        toReturn[numberOfFactorsFound] = number;
        return toReturn;
    }

    final int[] toReturn;

    int currentFactor = startAt;
    final int currentIndex = numberOfFactorsFound;
    int numberOfRepeatations = 0;

    // we can loop unbounded by the currentFactor, because
    // All non prime numbers can be represented as product of primes!
    while (!(isPrime(currentFactor) && number % currentFactor == 0)) {
        currentFactor += currentFactor == 2 ? 1 : 2;
    }

    while (number % currentFactor == 0) {
        number /= currentFactor;
        numberOfRepeatations++;
    }

    toReturn = getPrimeFactors1(number, currentIndex + numberOfRepeatations, currentFactor + (currentFactor == 2 ? 1 : 2));

    while (numberOfRepeatations > 0) {
        toReturn[currentIndex + --numberOfRepeatations] = currentFactor;
    }
    return toReturn;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:57:23.087

分配您认为该数字可能具有的尽可能多的因子（32 听起来不错），然后用于`Arrays.copyOf()`在实际限制处截断数组：

```
return Arrays.copyOf(prime_factors, j); 
```

# javascript - 从 http 主页面向 https iframe 发送消息时的安全注意事项

> ID：11190290
> 
> 赞同：0
> 
> 时间：2012-06-25T13:28:51.560
> 
> 标签：javascript, security, https

我想让用户在不将他们重定向到 https 的情况下登录 http 页面。这样用户就不会在他们正在查看的页面上失去状态。

当用户单击需要登录的内容时，页面上会弹出一个模式登录表单，询问详细信息。然后，他们可以使用 ajax 登录，并且模态表单消失而不会丢失状态。但是，这并不安全，密码是通过纯文本发送的。

我可以使用 postMessage 将用户名/密码发送到隐藏的 iframe，并使用 https 加载位置。然后安全地发送登录请求并将成功/错误发布回主页。

在这种情况下，我是否缺少任何安全注意事项。

尤其是中间的人。我是否认为可以在中间使用 man 替换 http javascript，这可以用来捕获密码并在它到达 https iframe 之前发送到其他地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:34:44.693

如果您正在考虑中间人攻击者，您必须只使用 https。其他一切都是不安全的，因为攻击者有能力将所有指向 https 资源的链接重写为常规 https

或者，如果您的页面不允许该特定资源使用 http，攻击者可以简单地运行一个从客户端接受 http 的代理，并将其更改为 https，同时将其发送到服务器。

即使没有中间人攻击，攻击者也可以像[FireSheep](http://codebutler.github.com/firesheep/)或[DroidSheep](http://droidsheep.de)那样“窃取”经过身份验证的会话（通常是 cookie）。在这种情况下，密码是安全的，但攻击者仍然可以在您的网页上执行所有被验证为被攻击的不同用户的操作。

# ios5 - 如何在 viewdidload 中强制视图旋转到横向？

> ID：11190291
> 
> 赞同：0
> 
> 时间：2012-06-25T13:28:58.270
> 
> 标签：ios5, uinavigationcontroller

```
Hi I'm using following code to show my app's login screen.   
LoginViewController * loginController = [[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil];
       UINavigationController * navController = [[UINavigationController alloc] initWithRootViewController:loginController];
       navController.modalPresentationStyle = UIModalPresentationFormSheet;
       [self.navigationController presentModalViewController:navController animated:YES]; 
```

它的加载正确。这里我的问题是我的应用程序应该只处于横向模式。在这里，我使用 UIModalPresentationFormSheet，因此应用程序会自动以纵向模式出现。我想在此登录视图加载后强制我的应用程序更改为横向模式。有人请帮助我在加载此 UIModalPresentationFormSheet 后如何将我的视图旋转到横向模式。（这意味着在 LoginViewController 的 viewDidLoad 模式下，我必须强制我的应用更改为横向模式。我该如何实现）。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T11:04:55.777

尝试使用横向坐标值重写您的用户界面框架属性。

这样做

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
                                         duration:(NSTimeInterval)duration 
```

并附带条件

```
 [super willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:duration];

if (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft
    ||  toInterfaceOrientation == UIInterfaceOrientationLandscapeRight) 
```

# model-view-controller - 在 SQLAlchemy 中记录模型

> ID：11190292
> 
> 赞同：4
> 
> 时间：2012-06-25T13:29:00.930
> 
> 标签：model-view-controller, documentation, sqlalchemy

是否有记录 SQLAlchemy 模型的正确方法？我希望能够将字段描述直接放入类中，以便以某种方式获取描述。[Django 的 help_text 字段中的](https://docs.djangoproject.com/en/dev/ref/models/fields/#help-text)一些东西

```
 class User(Base):
    username   = Column(u'username', String(255))
    email      = Column(u'email', String(255)) 
```

类似的东西

```
 class User(Base):
    username   = Column(u'username', String(255), description="System Username unique across all clusters")
    email      = Column(u'email', String(255), description="Email address of the User, and some other important info about it I would like to get at" ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T10:35:44.883

您可以在 Base.metadata.create_all(self.db)... 之后执行此操作...不过不要引用我的话，这很原始

```
conn = self.db.connect()
for table in Base.metadata.tables.itervalues():
    for colname in table.columns.keys():
        doc = table.columns[colname].doc
        conn.execute("COMMENT ON COLUMN %s.%s IS %%s"
                     % (table.name, colname), doc)
conn.execute("COMMIT")
conn.close() 
```

# grails - grails 1.3.7 的测试用例

> ID：11190298
> 
> 赞同：0
> 
> 时间：2012-06-25T13:29:12.450
> 
> 标签：grails, grails-orm, grails-plugin, grails-controller

我想知道是否有任何示例应用程序或插件针对它们编写了测试用例。我开始为 grails 1.3.7 中的应用程序编写更多测试用例，我正在工作，想看看其他人是如何为 grails 编写测试的。

谢谢，

# java - 如何检查数字二进制表示中“1”的偶数？

> ID：11190299
> 
> 赞同：-1
> 
> 时间：2012-06-25T13:29:13.663
> 
> 标签：java

我有整数。如何检查这个整数在二进制表示中是否有奇数或偶数 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:50:47.073

看看[Integer.bitCount(int i)](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#bitCount%28int%29)。

# gradle - gradle docs 缺少让我从 build.gradle 文件调用 ant build 的简单方法？

> ID：11190303
> 
> 赞同：0
> 
> 时间：2012-06-25T13:29:23.200
> 
> 标签：gradle

基于此导入似乎很痛苦，并且并不总是有效

[http://forums.gradle.org/gradle/topics/attempting_to_import_ant_build_file_fails](http://forums.gradle.org/gradle/topics/attempting_to_import_ant_build_file_fails)

然后，只有在第 20 章的文档中导入 ant 任务时才会使用一整页

[http://gradle.org/docs/current/userguide/userguide_single.html#ant](http://gradle.org/docs/current/userguide/userguide_single.html#ant)

但我没有看到只是调用 ant 的一种简单方法（当我尝试执行 exec 时，它失败了 :( :( ）。我现在如何才能连接子项目的 ant 文件以便继续？

谢谢，院长

# symfony - Symfony 一对一关系

> ID：11190308
> 
> 赞同：12
> 
> 时间：2012-06-25T13:29:33.783
> 
> 标签：symfony, doctrine, left-join

我是 symfony2 的新手，无法在 2 个实体之间进行左连接。我收到以下错误消息，不知道如何解决此问题：

> [语义错误] 第 0 行，'i' 附近的第 69 列：错误：类 Bundle\Entity\Users 没有名为 user_id 的关联

实体用户：

```
class Users
{
    /**
     * @ORM\Id
     * @ORM\Column(name="user_id", type="string", length="16")
     * @ORM\OneToOne(targetEntity="UsersInformation", mappedBy="Users")
     */
    protected $user_id;

    /**
     * @ORM\Column(type="string", length="255")
     */
    protected $username;

    /**
     * @ORM\Column(type="string", length="32")
     */
    protected $password;

    ...

     /**
     * Set user_id
     *
     * @param string $userId
     */
    public function setUserId($userId)
    {
        $this->user_id = $userId;
    }

    /**
     * Get user_id
     *
     * @return string 
     */
    public function getUserId()
    {
        return $this->user_id;
    }

    ...
} 
```

实体用户信息：

```
 class UsersInformation
  {
    /**
     * @ORM\Id
     * @ORM\Column(type="string", length="16")
     * @ORM\OneToOne(targetEntity="Users", inversedBy="UsersInformation")
     * @ORM\JoinColumn(name="user_id", referencedColumnName="user_id")
     */
    protected $user_id;

    /**
     * @ORM\Column(type="string", length="255")
     */
    public $email;

    /**
     * @ORM\Column(type="string", length="1")
     */
    public $gender;

    /**
     * @ORM\Column(type="string", length="255")
     */
    public $company;

    ....
  } 
```

UsersRepository 如下所示：

```
public function getAllUsers($limit = null)
  {
        $qb = $this->createQueryBuilder('u')
                   ->select('u, i')
                   ->leftJoin('u.user_id', 'i');

        if (false === is_null($limit))
            $qb->setMaxResults($limit);

        return $qb->getQuery()
                  ->getResult();
   } 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-27T13:03:33.697

我认为查询构建器看起来不错。您的问题可能出在数据结构中。

您通常处理此问题的方式是为每个关系设置一个属性。例如，对于您的班级来说，有一个或一个是`Users`有意义的。`information``userInformation`

也许这样的事情有帮助？

```
class User
{
    /**
     * @ORM\Id
     */
    protected $id;

    /**
     * @ORM\OneToOne(targetEntity="UserInformation")
     */
    protected $information;
}

class UserInformation
{
    /**
     * @ORM\Id
     */
    protected $id;

    /**
     * @ORM\OneToOne(targetEntity="User", inversedBy="information")
     * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
     */
    protected $user;
} 
```

# iphone - iOS - 子类 UIButton - 在哪里为突出显示状态添加代码？

> ID：11190309
> 
> 赞同：1
> 
> 时间：2012-06-25T13:29:34.127
> 
> 标签：iphone, ios, uibutton

我想让我的 iOS 应用程序中的按钮具有红色渐变。起初我使用图像来做到这一点，但后来意识到我可以使用 QuartzCore 框架来做到这一点。我有以下实现文件：

```
#import "RedButton.h"

@implementation RedButton

@synthesize gradientLayer = _gradientLAyer;

- (void)awakeFromNib;
{
    // Initialize the gradient layer
    self.gradientLayer = [[CAGradientLayer alloc] init];
    // Set its bounds to be the same of its parent
    [self.gradientLayer setBounds:[self bounds]];
    // Center the layer inside the parent layer
    [self.gradientLayer setPosition:
     CGPointMake([self bounds].size.width/2,
                 [self bounds].size.height/2)];

    // Insert the layer at position zero to make sure the 
    // text of the button is not obscured
    [[self layer] insertSublayer:self.gradientLayer atIndex:0];

    // Set the layer's corner radius
    [[self layer] setCornerRadius:5.0f];
    // Turn on masking
    [[self layer] setMasksToBounds:YES];
    // Display a border around the button 
    // with a 1.0 pixel width
    [[self layer] setBorderColor:[UIColor colorWithRed:(158.0f/255.0f) green:0.0f blue:0.0f alpha:1.0f].CGColor];
    [[self layer] setBorderWidth:1.0f];

    [self.gradientLayer setColors:[NSArray arrayWithObjects:
                               (id)[[UIColor colorWithRed:(214.0f/255.0f) green:0.0f blue:0.0f alpha:1.0f] CGColor], 
                               (id)[[UIColor colorWithRed:(141.0f/255.0f) green:0.0f blue:0.0f alpha:1.0f] CGColor], nil]];

    [[self layer] setNeedsDisplay];

}

- (void)drawRect:(CGRect)rect;
{
    [super drawRect:rect];
}

- (void)dealloc {
    // Release our gradient layer
    self.gradientLayer = nil;
    [super dealloc];
}
@end 
```

第一个问题 - 我在这里使用 awakeFromNib 是否正确？还是我应该使用 initWithFrame？

第二个问题 - 最初我使用图像并使用界面构建器来设置按钮的默认状态和突出显示状态。现在我不使用图像，如何设置按钮的外观以在突出显示时更改？我只想反转渐变。

第三个问题 - 我已经看到它写在一些你不应该继承 UIButton 的地方。如果没有，我将如何更改我的所有按钮以在不复制大量代码的情况下具有此渐变？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:46:15.703

**编辑1：**误读了有关图像的部分。您应该能够使用渐变将按钮状态本地设置为图像

```
// your code for setting up the gradient layer comes first
UIGraphicsBeginImageContext(CGSizeMake(1, [self bounds].size.height));
[gradientLayer renderInContext: UIGraphicsGetCurrentContext()];
UIImage *bgImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
[self setBackGroundImage:bgImage forState:UIControlStateWhatever] // replace with correct states 
```

==============================

我建议将您的初始化代码放在一个函数中`awakeFromNib`（对于按钮实际上没有在笔尖中使用但可能在代码中创建的情况）。您应该创建一个自定义初始化函数并在两者中调用它，`initWithCoder`这个`initWithFrame` [答案](https://stackoverflow.com/questions/3367685/uiview-drawrect-vs-initwithframe)显示了一个很好的模式。

您可以通过调用在初始化中设置不同状态的背景

```
[self setBackGroundImage: forState]; 
```

在这种情况下，您的状态将在哪里`UIControlStateHighlighted`。

除此之外，在这种情况下反对子类化的一个论点是，您实际上并没有定义任何自定义行为，您只是试图重用一些样式代码。这里不需要子类，您可以做一些简单的事情，例如在某处（可能在您的视图控制器中，或在另一个类中的某个函数中）创建一个格式化函数，该函数将 UIButton 作为场景并在其上执行所有初始化代码。这样，您就不会将按钮锁定在子类中（如果您实际上最终使用另一个 UIButton 子类，这很有用。例如，我喜欢使用一个定义自定义触摸行为的按钮，允许按钮为非矩形形状（并使其触摸区域受到限制）。

我看到的另一个论点是 UIButton 包含一些工厂函数，它们可能返回与您的子类不同类型的按钮，但如果您不使用这些函数，您可能永远不会遇到这个问题。

# asp.net-mvc - 多个 DbContext，多个 Database.SetInitializer

> ID：11190310
> 
> 赞同：8
> 
> 时间：2012-06-25T13:29:45.267
> 
> 标签：asp.net-mvc, entity-framework-4

我创建了两个 DbContext，一个用于应用程序配置，第二个用于日志记录。

原因是，我想在日志数据库上设置一个最大大小，这样它就不会耗尽所有可用磁盘空间并阻止其他数据库工作。

在我的 global.asax.cs 文件中，我有以下内容：

```
 protected void Application_Start()
    {

        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);

        Database.SetInitializer<AdminContext>(new AdminInitialiser());
        Database.SetInitializer<LoggingContext>(new LoggingInitialiser());
    } 
```

未调用 LoggingInitialiser 中的 InitializeDatabase 方法。这是因为只能设置一个初始化程序吗？有没有办法为两个 DbContexts 设置初始化程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T14:21:32.650

而是在 DbContext 构造函数中设置初始化程序。

```
public class AdminContext : DbContext
{
    public AdminContext()
    {
        Database.SetInitializer(new AdminInitialiser());
    }
}

public class LoggingContext : DbContext
{
    public LoggingContext()
    {
        Database.SetInitializer(new LoggingInitialiser());
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T10:04:13.400

是的，你可以做到。您只需要在继续下一个之前进行初始化。

```
 Database.SetInitializer<MyDBContext>(myInitializer);
  MyDbContext context = new MyDbContext();
  context.Database.Initialize(false);

  Database.SetInitializer<MySecondDBContext>(myInitializer);
  MySecondDbContext context2 = new MySecondDbContext();
  context2.Database.Initialize(false); 
```

注意：我通常从依赖解析器获取 DbContext 实例......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-16T00:20:05.210

我建议将 SetInitializer 调用放在静态构造函数中，如下所示：

```
 static ApplicationIdentityDbContext()
    {
        Database.SetInitializer(new IdentityDbInitializer());
    } 
```

以下来自 MSDN

> 静态构造函数用于初始化任何静态数据，或执行只需要执行一次的特定操作。在创建第一个实例或引用任何静态成员之前自动调用它。

所以静态构造函数是初始化数据库的理想选择。我已经将这种技术用于多个数据库，它对我来说效果很好。

# css - 创建三个圆角矩形框，左侧包含图标，右侧包含文本

> ID：11190312
> 
> 赞同：1
> 
> 时间：2012-06-25T13:29:53.347
> 
> 标签：css

我试图找出创建三个 284x87 圆角矩形框的最佳方法，其中左侧包含一个图标，右侧包含文本。是否值得尝试纯粹使用 CSS 来实现这一点，还是没有办法摆脱使用图像？这是我到目前为止所拥有的，使用整个图像的背景图像：

```
<style type="text/css">
.blurect {
    background-image: url(blurect1.gif);
    width: 284px;
    height: 87px;
    color: #FFF;
    }
</style>
<div class="blurect">Test</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:31:02.423

你当然可以使用 CSS。正如cale_b所说，设置一个适当位置的背景图像，然后调整padding-left，使文本不与图标重叠。这是适当的CSS：

```
​.rect {
  background: url(path/to/image.png) 4px center no-repeat;
  padding: 4px 4px 4px 24px;
  width: 200px;
  height: 20px;
  line-height: 20px;
  -webkit-border-radius: 8px;
     -moz-border-radius: 8px;
          border-radius: 8px;
}​ 
```

`4px center`在`background`规则中将图像设置为距左边缘 4px 并垂直居中。左侧填充设置为 24px 以将文本从背景图标移开

这是一个演示：http: [//jsfiddle.net/6p8Rz/](http://jsfiddle.net/6p8Rz/)

尺寸显然可以调节以满足您的需求

# xaml - 两个文本块在彼此之后

> ID：11190316
> 
> 赞同：2
> 
> 时间：2012-06-25T13:30:11.057
> 
> 标签：xaml, textblock

我有两个文本块，它们在页面上一个接一个——名字和姓氏。我将数据绑定到这个，所以大小取决于它们的长度。让他们使用可变大小的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:15:34.063

```
<StackPanel Orientation="Horizontal">
   <TextBlock Text="{Binding FirstName}" Margin="0,0,5,0" />
   <TextBlock Text="{Binding LastName}" />
</StackPanel> 
```

# php - 如何通过视图更改模块中字段的值..

> ID：11190321
> 
> 赞同：0
> 
> 时间：2012-06-25T13:30:32.503
> 
> 标签：php, sugarcrm

我已经通过使用逻辑钩子完成了它我如何通过视图来完成它。我已经通过逻辑钩子完成了它但是我如何通过仅使用视图以及通过代码来实现它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:17:55.397

您是否只想在视图中设置默认值？保存值只能在事后使用钩子完成。如果您想在编辑（或详细视图）中设置默认值，只需在 $this->bean 中设置字段：

```
class AccountsViewDetail extends ViewDetail {
    function display(){
        $this->bean->mycustomfield_c = 'Default';   
...... 
```

# c# - Windows Phone 中的 WriteableBitmapEx 错误

> ID：11190323
> 
> 赞同：0
> 
> 时间：2012-06-25T13:30:35.613
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-7.1

嗨，我试图在 Windows 手机中使用[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)，但代码不起作用......我在这做错了什么？

```
 double height = image1.ActualHeight;
        double width = image1.ActualWidth;
        BitmapImage img = new BitmapImage(new Uri("Tulips.png", UriKind.RelativeOrAbsolute));
        BitmapImage newImg = image1.Source as BitmapImage;

        for (int i = 0; i < height; i++)
        {
            for (int j = 0; j < width; j++)
            {

                int grayScale = (int)((image1.writeableBmp.GetPixel(j, i).R * 0.3) + (image1.writeableBmp.GetPixel(j, i).G * 0.59) + (image1.GetPixel(j, i).B * 0.11));
                Color nc = Color.FromArgb (grayScale, grayScale, grayScale);
                newImg.SetPixel(j, i, nc);

            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:06:14.413

您正在尝试修改`BitmapImage`( `newImg`)。您必须创建一个`WriteableBitmap`：

```
var newImg = new WriteableBitmap(image1.Source); 
```

之后能够修改位图图像。

然后（如果您引用*WriteableBitmapEx*）您应该能够`grayScale`直接从以下获取表达式中的像素值`newImg`：

```
byte grayScale = Convert.ToByte((newImg.GetPixel(j, i).R * 0.3) + 
    (newImg.GetPixel(j, i).G * 0.59) + (newImg.GetPixel(j, i).B * 0.11)); 
```

然后还有一个`Color.FromArgb`看起来应该更像这样的声明：

```
Color nc = Color.FromArgb (255, grayScale, grayScale, grayScale); 
```

# c# - 将 LINQ 的 Zip 与不返回值的闭包一起使用

> ID：11190324
> 
> 赞同：12
> 
> 时间：2012-06-25T13:30:39.343
> 
> 标签：c#, linq, func

免责声明：这个问题是由我个人的好奇心驱动的，而不是实际需要完成某事。所以我的例子是人为的。尽管如此，我认为这是一个很可能会出现的问题。

假设我们正在使用[Zip](http://msdn.microsoft.com/en-us/library/dd267698.aspx)迭代两个序列，调用一个 void 方法，如果发现这对中的一项与另一项不同（因此丢弃任何返回值），该方法只会引发异常。这里的重点不是该方法抛出异常，而是它返回 void。

换句话说，我们做`ForEach`了两个以上的系列（顺便说一下，我知道[Eric Lippert 的想法`ForEach`](http://blogs.msdn.com/b/ericlippert/archive/2009/05/18/foreach-vs-foreach.aspx)，并且完全同意他的观点，从不使用它）。

现在，`Zip`想要一个`Func<TFirst, TSecond, TResult>`，所以当然传递等效于的东西是`Action<TFirst, TSecond>`行不通的。

我的问题是：有没有比这更好的惯用方式（即返回一个虚拟值）？

```
var collection1 = new List<int>() { ... };
var collection2 = new List<int>() { ... };

collection1.Zip(collection2, (first, second) => 
{
    VoidMethodThatThrows(first, second);
    return true;
}); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-25T13:53:19.377

用于`Zip()`将项目放入对象中，然后`foreach`按照您选择的方式进行操作（请执行正常`foreach`循环，而不是*错误*的ToList/ForEach 组合）。

```
var items = collection1.Zip(collection2, (x, y) => new { First = x, Second = y });
foreach (var item in items)
{
    VoidMethodThatThrows(item.First, item.Second);
} 
```

从 C# 7.0 开始，改进的元组支持和解构使其更易于使用。

```
var items = collection1.Zip(collection2, (x, y) => (x, y));
// or collection1.Zip(collection2, ValueTuple.Create);
foreach (var (first, second) in items)
{
    VoidMethodThatThrows(first, second);
} 
```

此外，.NET Core 和 5 添加了一个重载，它会自动将值配对到元组中，因此您不必进行该映射。

```
var items = collection1.Zip(collection2); // IEnumerable<(Type1, Type2)> 
```

.NET 6 添加了第三个集合。

```
var items = collection1.Zip(collection2, collection3); // IEnumerable<(Type1, Type2, Type3)> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-08T16:35:18.177

我经常需要对两个集合中的每一对执行一个**操作**。Zip 方法在这种情况下没有用。

可以使用这种扩展方法**ForPair ：**

```
public static void ForPair<TFirst, TSecond>(this IEnumerable<TFirst> first, IEnumerable<TSecond> second,
    Action<TFirst, TSecond> action)
{
    using (var enumFirst = first.GetEnumerator())
    using (var enumSecond = second.GetEnumerator())
    {
        while (enumFirst.MoveNext() && enumSecond.MoveNext())
        {
            action(enumFirst.Current, enumSecond.Current);
        }
    }
} 
```

因此，对于您的示例，您可以编写：

```
var collection1 = new List<int>() { 1, 2 };
var collection2 = new List<int>() { 3, 4 };

collection1.ForPair(collection2, VoidMethodThatThrows); 
```

# php - PHP 从选择填充文本框 - 数组字段

> ID：11190325
> 
> 赞同：1
> 
> 时间：2012-06-25T13:30:40.420
> 
> 标签：php, javascript

我需要使用 Select 下拉列表的结果填充相关的文本框。

到目前为止，我的 Javascript 是

```
<script language="JavaScript">
var mytextbox = document.getElementById('error');
var mydropdown = document.getElementById('errormsg_id');

mydropdown.onchange = function(){
     mytextbox.value = this.value;
}
</script> 
```

我的选择框和文本框是从查询中构建为数组的，因此它们有多个。我需要能够使用旁边的 Select 的结果填充相应的文本框。

有任何想法吗？

谢谢

```
 <td width="1%">

    <select style="width:100%" name="errormsg_id[]"  id="errormsg_id[]">

    <?php do { ?> 

    <option value="<?php echo  $row_rserrormsg['errormsg_id']?>"
    <?php if ($row_rsdates['errormsg_id'] == $row_rserrormsg['errormsg_id'])                 {              echo("selected='selected'"); } ; ?> >
<?php echo $row_rserrormsg['error_message']?></option>

<?php } while ($row_rserrormsg = mysql_fetch_assoc($rserrormsg)); ?>

<?php  mysql_data_seek($rserrormsg, 0);
$row_rserrormsg = mysql_fetch_assoc($rserrormsg);?>
</select>
</td>  

<TD  align="center" class="adminuser">
<input style="width:96%;text-align:left;"  autocomplete="on"  title="Enter Error    Message" type="text" name="error[]" id="error[]" value="<?php echo $row_rsdates['error_message']; ?>" maxlength="100"/> 
</TD> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:55:39.600

假设您将使用 jQuery 并且您的 HTML 是这样的：

```
<table>
    <tr>
        <td><select class="my_select" name="errormsg_id1[]" id="errormsg_id1">...</select></td>
        <td><input name="errormsg_id1_txt" id="errormsg_id1_txt" title="..." />
    </tr>
    ...
    <tr>
        <td><select class="my_select" name="errormsg_idX[]" id="errormsg_idX">...</select></td>
        <td><input name="errormsg_idX_txt" id="errormsg_idX_txt" title="..." />
    </tr>
</table> 
```

这可以使用 jQuery 来完成：

```
$(document).ready(function(){
    $('.my_select').change(function(){
        $('#'+$(this).attr('id')+'_txt').val($(this).val());
    });
}); 
```

希望它是正确的，没有时间测试它......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:47:23.820

这是一个[JSFiddle/DEMO](http://jsfiddle.net/V4SVt/2/)关于如何让它与示例选择一起工作的：

我认为这种方法比@shadyyx 好一点，因为它消除了您手动增加输入和选择字段名称的需要。

```
<table>
<tr>
    <td><select class="select" name="errormsg_id[]">
            <option val="test1">Test1</option>               
            <option val="test2">Test2</option>                
            <option val="test3">Test3</option>
        </select></td>
    <td><input class="error_text" name="errormsg_id_txt[]" title="..." />
</tr>
...
<tr>
    <td><select class="select" name="errormsg_id[]">               
            <option val="test1">Test1</option>               
            <option val="test2">Test2</option>                
            <option val="test3">Test3</option>
        </select></td>
    <td><input class="error_text" name="errormsg_id_txt[]" title="..." />
</tr>
</table> 
```

和jQuery：

```
$(document).ready(function(){
    $('.select').change(function(){
       $(this).parent().parent().find('.error_text').val($(this).val());
    });
}); 
```

**注意：**如果您使用纯 Javascript，请参阅**[此演示](http://jsfiddle.net/K4yTs/1/)**

```
<table>
<tr>
    <td><select class="select" name="errormsg_id[]" id="errormsg_id1" onChange="update('errormsg_id1')">
            <option val="test1">Test1</option>               
            <option val="test2">Test2</option>                
            <option val="test3">Test3</option>
        </select></td>
    <td><input class="error_text"name="errormsg_id_txt[]" id="errormsg_id_txt1" title="..." />
</tr>
...
<tr>
    <td><select class="select" name="errormsg_id[]" id="errormsg_id2" onChange="update('errormsg_id2')">               
            <option val="test1">Test1</option>               
            <option val="test2">Test2</option>                
            <option val="test3">Test3</option>
        </select></td>
    <td><input class="error_text" name="errormsg_id_txt[]" id="errormsg_id_txt2" title="..." />
</tr>
</table> 
```

和 Javascript：

```
function update(element){
    var e = document.getElementById(element);
    var id = element.substring(element.length-1);
    document.getElementById("errormsg_id_txt"+id).value = e.value;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-25T14:58:47.807

您需要想办法唯一标识您的相应元素集。我建议的最方便的方法是使用数据行的主键值。

例子就像

```
while($row = mysqli_fetch_assoc($result)) {
   $id = $row['id']; //A primary key field

   echo '<input type="text" name="text'.$id.'" id="text'.$id.'" />';
   echo '<select name="select'.$id.'" id="select'.$id.'" />...</select>";
} 
```

接下来，从选择菜单中调用一个函数，以便只更新相关的文本框。更新上面的选择部分以读取与此类似的内容。

```
echo '<select name="select'.$id.'" id="select'.$id.'" onchange="updateBox(\'text'.$id.'\', this.value)" />...</select>"; 
```

现在，创建一个非常简单的函数来更新文本框。

```
function updateBox(element, value) {
    el = document.getElementById(element);
    el.value = value;
} 
```

# javascript - 如何在 Javascript 命名空间脚本中创建函数数组

> ID：11190326
> 
> 赞同：0
> 
> 时间：2012-06-25T13:30:42.317
> 
> 标签：javascript, arrays, namespaces, function-pointers, undefined

我正在尝试在我的脚本中使用一组函数。我使用命名空间对象，当我使用这个数组时，我所有的函数都是`undefined`.

如何使用良好的函数引用创建这个数组来处理这个`processAllFunction`？

查看我的代码：

```
var myns = myns || {};
myns.test = myns.test || {};
myns.test.util = {
    myOne: function(m) {
        return m;
    },
    myTwo: function(m) {
        return m;
    },
    processAllFunction: function(m) {
        for(var i=0; i<this.replaceFilters.length; i++) {
            if(typeof(this.replaceFilters[i])==='function') {
            m= this.replaceFilters[i](m);
        }
        }
        console.log(this.replaceFilters); // undefined functions
        return m;
    },
    replaceFilters: [this.myOne, this.myTwo]
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:27:18.520

在您的代码中，`this`要么是指，要么是您定义的函数范围内的`window`值，这就是您看到的原因。您需要的是对调用对象的引用。你应该能够用这样的东西来做到这一点：`this``myns``undefined`

```
var myns = myns || {};
myns.test = myns.test || {};
myns.test.util = {
    myOne: function(m) {
        return m;
    },
    myTwo: function(m) {
        return m;
    },
    processAllFunction: function(m) {
        for(var i = 0; i < this.getReplaceFilters().length; i++) {
            if(typeof(this.getReplaceFilters()[i]) === 'function') {
               m= this.replaceFilters[i](m);
            }
        }
        return m;
    },
    getReplaceFilters: function() {
        return [this.myOne, this.myTwo];
    }    
}; 
```

请注意，它现在不是`replaceFilters`简单地具有值`[this.myOne, this.myTwo]`，而是一个返回的函数`[this.myOne, this.myTwo]`。这是因为当你现在调用时`myns.test.util.getReplaceFilters`，`this`指向`my.test.util`。`this`当你打电话时也会发生同样的事情`myns.test.util.processAllFunction()`；`this`再次设置为`myns.test.util`。`this`当你调用`getReplaceFilters`inside时，也会使用这个值`processAllFunction`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:25:53.157

我找到了解决方案，在对象外部使用 replaceFilters（声明后）。

```
myns.test.util = {
    myOne: function(m) {
        return m;
    },
    myTwo: function(m) {
        return m;
    },
    processAllFunction: function(m) {
        for(var i=0; i<this.replaceFilters.length; i++) {
            if(typeof(this.replaceFilters[i])==='function') {
            m= this.replaceFilters[i](m);
        }
        }
        console.log(this.replaceFilters);
        return m;
    }
};
myns.test.util.replaceFilters = [this.myOne, this.myTwo]; 
```

使用这种方法，我对`this`.

# c# - 按应用程序策略 OID 查找证书

> ID：11190327
> 
> 赞同：1
> 
> 时间：2012-06-25T13:30:46.553
> 
> 标签：c#, .net, security, x509certificate2

我在我的个人证书存储中安装了两个 x509Certificates，并希望通过应用程序策略检索证书。

我使用以下代码来实现这一点：

```
public X509Certificate2 LocateCertificate(Oid oid)
{
    var store = new X509Store(Store.My, StoreLocation.CurrentUser);
    store.Open(OpenFlags.ReadOnly);

    try
    {
        var certificates = store.Certificates.Find(X509FindType.FindByApplicationPolicy, oid.Value, true);
        if(certificates.Count != 1)
        {
            throw new CryptographicException(string.Format("Expected one certificate, found {0}", certificates.Count);
        }
        return certificates[0];
    }
    finally
    {
        store.Close();
    }
} 
```

当两个安装的 X509Certificates 具有不同的扩展密钥用法值时，上述方法在提供有效 OID 时成功检索正确的证书。但是，如果一个证书没有设置其扩展密钥使用属性，则查询也会返回它以及正确的证书。我想防止退回具有以下内容的证书：

1.  不正确的扩展密钥用法值集。
2.  未设置扩展密钥使用值。

任何帮助都将不胜感激。

# php - 循环遍历多维数组jquery

> ID：11190328
> 
> 赞同：3
> 
> 时间：2012-06-25T13:30:48.107
> 
> 标签：php, javascript, jquery

我有一个从 php 函数返回的数据，如下所示：

```
data[0]
     [0]
       <table>
        ....
       </table>
     [1]
       <table>
        ....
       </table>
       .
       .
       .etc
 data[1] 
```

我怎样才能通过javascript循环这个数组！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T14:06:37.053

可以有一个嵌套的[jQuery foreach 函数。](http://api.jquery.com/jQuery.each/)

```
$.each(data, function(key, value) { 
  //this is each data... data[0], data[1]... etc, the value being value and the index being key.
  $.each(key, function(innerKey, innerValue){
    //this is where your tables are. innerKey being the index innerValue being the value.
    <table>
    ...
    </table>
  });
}); 
```

# javascript - 放置后选择的 Firefox contenteditable 图像 - 无法删除选择

> ID：11190334
> 
> 赞同：1
> 
> 时间：2012-06-25T13:31:04.297
> 
> 标签：javascript, html, firefox, drag-and-drop, contenteditable

如果您在 Firefox 中的内容可编辑区域中拖放图像，有时图像最终会像这样被选中：

![所选图像](../Images/d530c15a2459a707d55fc368ad485d94.png)

在这里小提琴：http: [//jsfiddle.net/zupa/qg5Qh/](http://jsfiddle.net/zupa/qg5Qh/)

您可能需要拖放它几次，我有 20+% 的时间有这个错误。

我在 Windows 7 上使用 Firefox 13.0.1

**如何删除该选择？**任何帮助表示赞赏。

附言：

*   它不能作为一个范围通过`document.getselection().getRangeAt(..)`
*   Firefox 不会添加任何 HTML 属性，但如果我点击保存（自定义 CMS）并以 contenteditable 模式重新加载页面，选择就会返回。似乎是一个令人讨厌的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T23:34:17.607

当图像位于被 Firefox 标记为拼写错误的单词中时，它会可靠地执行此操作。例如，这是您的 jsFiddle，图像移到了“Lorem”一词的中间：http: [//jsfiddle.net/timdown/qg5Qh/1/](http://jsfiddle.net/timdown/qg5Qh/1/)

这似乎与应用于拼写错误的单词的样式有关。将单词“Lorem”添加到浏览器的字典中，图像样式就会消失。

`spellcheck`您可以使用该属性关闭拼写检查。[据我所知](https://stackoverflow.com/questions/5601431/spellcheck-false-on-contenteditable-elements)，您必须在 Firefox 的级别上执行此操作，因为`<body>`它似乎不适用于单个 contenteditable 元素，就像它对 textareas 所做的那样。

演示：http: [//jsfiddle.net/timdown/qg5Qh/2/](http://jsfiddle.net/timdown/qg5Qh/2/)

# windows - 更改 windows 文件夹中的文件名

> ID：11190335
> 
> 赞同：0
> 
> 时间：2012-06-25T13:31:09.727
> 
> 标签：windows, linux, file-rename, batch-rename

您好我正在尝试更改 Windows 机器中某些文件夹中的文件名。

我有一堆文件名以大写字母开头的文件示例

“Hello.html”，但我想将其更改为“hello.html”，因为有数以千计的文件我不能只是去手动更改它。我正在寻找一个脚本，我只需要一些帮助才能开始，我应该从什么开始。

我可以访问一台 linux 机器，我可以在那里复制文件并运行任何脚本，如果有人可以指导我在 Linux 或 Windows 环境中入门，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:16:09.417

在某些 linux 系统上，您可以使用`rename`接受正则表达式的命令。尝试以下操作：

`rename 's/^([A-Z])/\l$1/' *`

这应该用小写字符替换开头的任何大写字符。

否则，如果您运行的不是接受此类命令的 linux 系统，您可以编写自己的小 perl 脚本：

```
#!/usr/bin/perl
use strict;
use warnings;
use File::Copy;

my @files = `ls`;

foreach (@files) {
    chomp($_);
    if ($_ =~ m/^[A-Z]/) {
        my $newname = $_;
        $newname =~ s/^([A-Z])/\l$1/;
        move($_, $newname);
    }
}

exit 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T06:31:01.543

一个非常易于使用的选项是[ReNamer](http://www.filecluster.com/downloads/ReNamer.html)。

安装后，只需添加要重命名的文件并添加案例规则即可将其更改为小写或为高级案例添加正则表达式规则。

# asp.net - 移动时的 Asp 代码 - 解析错误

> ID：11190336
> 
> 赞同：0
> 
> 时间：2012-06-25T13:31:17.890
> 
> 标签：asp.net

我正在尝试将 2 个 asp 页面合并为一个，但是当我从一个工作页面页面移动以下代码并将其放置在另一个工作页面的底部时，我在这一行出现解析错误

`<asp:Panel id="Panel1" runat="server" Width="80%" Font-Size="Small" Font-Names="Calibri" BackColor="White" GroupingText="Password Retrieval">             <table style="width: 75%; height: 28%" cellpadding="5" cellspacing="5">`

有没有人有任何想法。

谢谢罗斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:17:39.017

如果你只移动**了**这部分代码，那么你确实会得到一个错误。

您需要一个关闭标记`<asp:Panel>`来防止 ASP.NET 错误。

您还需要为您的`table`元素添加一个关闭标记，以防止 HTML 验证错误。

* * *

但是，如果这只是一个片段，并且您确实有一个关闭标记，那么请检查页面上的其他控件是否有`Panel1`ID。每个 Web 表单的 ID 必须是唯一的。

# mysql - MySQL 中的 spool 命令等价于什么？

> ID：11190337
> 
> 赞同：2
> 
> 时间：2012-06-25T13:31:37.893
> 
> 标签：mysql, spool

我知道当您尝试将报告写入 Oracle SQLplus 中的文件时，您会使用 spool 命令。

MySQL中的等效命令是什么？

这是我的代码：

```
set termout off

spool ${DB_ADMIN_HOME}/data/Datareport.log @ ${DB_ADMIN_HOME}/Scripts.Datavalidation/Datareportscript.sql

spool off
exit 
```

如何在 MySQL 中编写它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-09-06T05:36:06.087

在 MySQL 中，您需要使用命令**`tee`**& **`notee`**：

```
tee data.txt;
//SQL sentences...
notee; 
```

**`tee`**`data.txt`==**`spool`**`data.txt`

**`notee`**==**`spool off`**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:40:07.840

对于 Oracle SQLPlus`spool`命令，mysql 命令行客户端中没有等效的命令。

要将 mysql 命令行客户端的输出保存到文件中，您可以让操作系统将输出重定向到文件，而不是显示。

在 Unix 中，您`>`在命令行上使用符号。（这里举一个如何重定向输出的例子似乎有点多余。）

```
date > /tmp/foo.txt 
```

如果您有权限，该`>`符号基本上是告诉外壳程序获取写入 STDOUT 句柄的内容并将其重定向到命名文件（如果文件存在，则覆盖该文件）。

* * *

**问：**当您试图生成报告时，是否在 mysql 中使用了和`set pagesize`？`set linesize`

**答：**不可以。这些是特定于 Oracle SQLPlus 的。我不知道 mysql 命令行客户端中的任何等效功能。mysql 命令行客户端在交互模式下运行时具有一些强大的功能（例如`pager`和`tee`），但在非交互模式下，它不足以替代 SQLPlus。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-25T14:47:12.253

如果我得到你的要求：

```
mysql dbname < ${DB_ADMIN_HOME}/Scripts.Datavalidation/Datareportscript.sql \
> ${DB_ADMIN_HOME}/data/Datareport.log 
```

使用重定向。

# asp.net-mvc-4 - 为什么 MVC4 @Styles.Render() 在调试模式下没有按预期运行

> ID：11190339
> 
> 赞同：18
> 
> 时间：2012-06-25T13:31:44.320
> 
> 标签：asp.net-mvc-4, bundling-and-minification, asp.net-optimization

我正在 MVC4 中实现捆绑和缩小支持并对其进行设置，以便它可以为我自动编译我的 Bootstrap .less 文件。我的 BundleConfig.cs 文件中有以下代码

```
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        // base bundles that come with MVC 4

        var bootstrapBundle = new Bundle("~/bundles/bootstrap").Include("~/Content/less/bootstrap.less");
        bootstrapBundle.Transforms.Add(new TwitterBootstrapLessTransform());
        bootstrapBundle.Transforms.Add(new CssMinify());
        bundles.Add(bootstrapBundle);
    }
} 
```

TwitterBootsrapLessTransform 如下（它比我想要的更复杂，因为需要将 sub .less 文件导入 dotLess）

```
public class TwitterBootstrapLessTransform : IBundleTransform
{
    public static string BundlePath { get; private set; }

    public void Process(BundleContext context, BundleResponse response)
    {
        setBasePath(context);

        var config = new DotlessConfiguration(DotlessConfiguration.GetDefault());
        config.LessSource = typeof(TwitterBootstrapLessMinifyBundleFileReader);

        response.Content = Less.Parse(response.Content, config);
        response.ContentType = "text/css";
    }

    private void setBasePath(BundleContext context)
    {
        BundlePath = context.HttpContext.Server.MapPath("~/Content/less" + "/imports" + "/");
    }
}

public class TwitterBootstrapLessMinifyBundleFileReader : IFileReader
{
    public IPathResolver PathResolver { get; set; }
    private string basePath;

    public TwitterBootstrapLessMinifyBundleFileReader(): this(new RelativePathResolver())
    {
    }

    public TwitterBootstrapLessMinifyBundleFileReader(IPathResolver pathResolver)
    {
        PathResolver = pathResolver;
        basePath = TwitterBootstrapLessTransform.BundlePath;
    }

    public bool DoesFileExist(string fileName)
    {
        fileName = PathResolver.GetFullPath(basePath + fileName);

        return File.Exists(fileName);
    }

    public byte[] GetBinaryFileContents(string fileName)
    {
        throw new System.NotImplementedException();
    }

    public string GetFileContents(string fileName)
    {
        fileName = PathResolver.GetFullPath(basePath + fileName);

        return File.ReadAllText(fileName);
    }
} 
```

在我的基础 _Layout.cshtml 页面上，我尝试通过这样做来呈现 css 文件

```
@Styles.Render("~/bundles/bootstrap"); 
```

正如[mvc教程](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)所建议的，但客户端浏览器最终请求的文件是

```
http://localhost:53729/Content/less/bootstrap.less 
```

这会导致错误。如果我将以下链接按基本布局页面放入，它会按预期工作。

```
<link href="~/bundles/bootstrap" rel="stylesheet" type="text/css" /> 
```

为什么@Styles.Render() 在调试模式下的行为方式不同？它在发布模式下工作。我可以理解您不希望它在调试中捆绑和缩小，但我如何才能强制此捆绑始终以相同的方式工作？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-29T22:46:17.493

所以基本上什么时候`debug="true"`，脚本/样式渲染方法假设优化关闭，这意味着没有捆绑和缩小，这意味着它不会调用你的转换；相反，它只会呈现指向捆绑包原始内容的链接（在您的情况下是 boostrap.less ）。

您可以覆盖此行为并始终通过设置运行优化`BundleTable.EnableOptimizations = true`。这将强制渲染方法始终进行捆绑/缩小。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-26T14:46:40.480

我最终做的是在我的 _Layout.cshtml 中放置一个 debug if 语句，这样包无论如何都会呈现。我并不热衷于将它作为一种解决方案，但它现在正在起作用。

```
@if (Context.IsDebuggingEnabled)
{
    <link href="~/bundles/bootstrap" rel="stylesheet" type="text/css" />
}
else
{
    @Styles.Render("~/bundles/bootstrap")
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-23T14:55:35.963

我通过让 dotless 为 .less 文件提供服务来解决这个问题

在 web.config 中：

```
 <handlers>
    <add name="dotless" path="*.less" verb="GET" type="dotless.Core.LessCssHttpHandler,dotless.Core" resourceType="File" preCondition="" />
    </handlers> 
```

# javascript - 如何动态获取html5中的图表和报告？

> ID：11190340
> 
> 赞同：1
> 
> 时间：2012-06-25T13:31:56.487
> 
> 标签：javascript, android, html, css, cordova

我正在使用 phonegap 开发一个 android 平板电脑应用程序，我需要在其中获取一个报告图表，该图表以图表方式解释不同事物的状态，如下图所示。

![在此处输入图像描述](../Images/387db25d562ad63f4fb113738ba9062d.png)

我想动态生成这些图表或报告，这些图表或报告会随着数据的变化而变化。谁能帮我提供一些使用具有类似功能的 html5、js 和 css 的示例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T13:52:29.633

您是否查看了**RGraph：HTML5 和 Javascript 图表**？

**RGraph**是一个用 Javascript 编写的图表库，它使用 HTML5 来绘制并支持二十多种不同类型的图表。使用新的 HTML5 画布标签，RGraph 使用 Javascript 在 Web 浏览器中创建这些图表，这意味着更快的页面和更少的 Web 服务器负载。这导致更小的页面尺寸、更低的成本和更快的网站 - 每个人都赢了！

* * *

如果你看到一个基本代码，它是这样的：

```
<script>
    window.onload = function ()
    {
        // The data to be shown on the Pie chart
        var data = [564,155,499,611,322];

        // Create the Pie chart. The arguments are the canvas ID and the data to be shown.
        var pie = new RGraph.Pie('myPie', data);

        // Configure the chart to look as you want.
        pie.Set('chart.labels', ['Abc', 'Def', 'Ghi', 'Jkl', 'Mno']);
        pie.Set('chart.linewidth', 5);
        pie.Set('chart.stroke', 'white');

        // Call the .Draw() chart to draw the Pie chart.
        pie.Draw();
    }
</script> 
```

[查看饼图](http://www.rgraph.net/examples/pie.html)的实时示例！

* * *

你的是雷达图。在这里查看一个：[雷达图](http://www.rgraph.net/examples/radar.html)。源代码：

```
<script>
    window.onload = function ()
    {
        // The data to be represented on the Radar chart.
        var data = [3, 3, 41, 37, 16];

        // Create the Radar chart. The arguments are the canvas ID and the data to be shown on the chart.
        var radar = new RGraph.Radar('myRadar', data);

        // If you want to show multiple data sets, then you give them like this:
        // var radar = new RGraph.Radar('myRadar', [3,5,6,8], [4,5,2,6]);

        // Configure the Radar chart to look as you wish.
        radar.Set('chart.background.circles', true);
        radar.Set('chart.color', 'rgba(255,0,0,0.5)');
        radar.Set('chart.circle', 20);
        radar.Set('chart.circle.fill', 'rgba(200,255,200,0.5)');
        radar.Set('chart.labels', ['Safari (3%)', 'Other (3%)', 'MSIE 7 (41%)', 'MSIE 6 (37%)', 'Firefox (16%)']);
        radar.Set('chart.key', ['Market share', 'A made up figure']);

        // Now call the .Draw() method to draw the chart.
        radar.Draw();
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:15:35.873

检查下面的链接。它确实有一些很好的例子。

[http://www.highcharts.com/](http://www.highcharts.com/)

如果您还有任何问题，请告诉我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:24:04.960

一种可能的解决方案是将[CSS3 转换](http://www.w3schools.com/css3/css3_transitions.asp)映射到图形。 [这](http://www.w3schools.com/css3/tryit.asp?filename=trycss3_transition1)是一个基本示例，演示了您可以在不使用任何 javascript 的情况下做什么。

[以下](http://speckyboy.com/2010/04/26/30-pure-css-alternatives-to-javascript/)是使用 css（无 javascript）生成的一些静态示例，我很难找到交互式示例，但正如前面的链接之一所示，这是可能的。

# android - Android 使用 Joda 时间计算日期之间的差异

> ID：11190346
> 
> 赞同：-1
> 
> 时间：2012-06-25T13:32:53.817
> 
> 标签：android, datetime, jodatime

我只想知道是否可以使用此示例代码计算两个日期之间的差异，但是当日期格式为 yyyy-MM-dd hh:mm:ss 如果日期格式为 yyyy-MM-dd'T' HH:mm:ss.SSSZ，一切正常。

```
int days = Days.daysBetween(new DateTime(today), new DateTime(StartTime1)).getDays(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:07:21.893

它适用于“ ”，因为[ISODateTimeFormat](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/ISODateTimeFormat.html#dateTimeParser%28%29)`yyyy-MM-dd'T'HH:mm:ss.SSSZ`支持该格式- 它处理传递给构造函数的任何参数。`String``DateTime(Object)`

你应该建立一个适合`DateTimeFormatter`" `yyyy-MM-dd hh:mm:ss`" 并使用它，例如像这样：

```
DateTimeFormatterBuilder b = new DateTimeFormatterBuilder();
b.append(ISODateTimeFormat.yearMonthDay());
b.appendLiteral(" ");
b.append(ISODateTimeFormat.hourMinuteSecond());
DateTimeFormatter fmt = b.toFormatter();
// fmt can now be used to parse "yyyy-MM-dd hh:mm:ss" patterns, like so:
System.out.println(fmt.parseDateTime("2010-04-20 20:13:59")); 
```

**编辑**：要从“ `yyyy-MM-dd hh:mm:ss`”转换为“”，`yyyy-MM-dd'T'HH:mm:ss.SSSZ`您可以这样做：

```
String dateTime = ISODateTimeFormat.dateTime()
        .print(fmt.parseDateTime("2010-04-20 20:13:59")); 
```

不确定与拥有一个有效`DateTime`的（输出`fmt.parseDateTime("2010-04-20 20:13:59")`将是什么）相比，这对您有什么好处。

# java - 如何使用 Jsoup 提交数组

> ID：11190348
> 
> 赞同：0
> 
> 时间：2012-06-25T13:33:03.673
> 
> 标签：java, forms, submit, jsoup

我曾经`Jsoup`发布过这样的表格：

```
Document doc = Jsoup.connect("http://www.example.com/post.php")
   .data("titolo", titolo)
   .data("prezzo", price)
   .data("comune", comune)
   .data("descrizione", descrizione)
   .post();
System.out.println(doc.text()); 
```

我需要一些链接，我必须发布它。我该怎么做？是否可以像发布文本一样发布数组？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:22:49.563

你有没有尝试过这样的事情？

```
Document doc = Jsoup.connect("http://www.mySite.com/post.php")
   .data("titolo", titolo)
   .data("prezzo", price)
   .data("comune", comune)
   .data("descrizione", descrizione)
   .data("link[]", "http://example1.com")
   .data("link[]", "http://example2.com")
   .data("link[]", "http://example3.com")
   .post();
System.out.println(doc.text()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:53:34.997

这是一种使用您提供的任何输入值“发布”表单元素但保留隐藏字段值和其他预填充值不变的小方法

```
public Document submitForm(Element formElement, Map<String, String> data) throws IOException {
    String src = formElement.attr("action");
    Elements inputElements = formElement.select("input");
    for (Element inputElement : inputElements) {
        if (!data.containsKey(inputElement.attr("name"))) {
            data.put(inputElement.attr("name"), inputElement.val());
        }
    }
    Connection.Response response = Jsoup.connect(src).method(Connection.Method.POST).data(data).execute();
    return response.parse();
} 
```

# mysql - 更新表，其中列名设置为变量 mysql

> ID：11190350
> 
> 赞同：2
> 
> 时间：2012-06-25T13:33:13.320
> 
> 标签：mysql, variables, sql-update

我正在创建一个应该更新表的 mysql 语句，但不是以正常方式将列名设置为等于某个值，而是决定使其动态化，例如，而不是：

```
UPDATE mytable SET mycolumn = 'a value'; 
```

我使用一个变量。在这种情况下：

```
SET @column = 'mycolumn';
UPDATE mytable SET @column = 'a value'; 
```

当我执行更新语句时，这会返回一条语法错误消息。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:53:55.483

你可以这样做：

```
set @query = 'UPDATE mytable SET @column = ''a value''';
set @query = replace(@query, '@column', 'col_name');
PREPARE stmt1 FROM @query;
EXECUTE stmt1; 
```

# iphone - 带有大图像的 UIImageView。问题

> ID：11190352
> 
> 赞同：0
> 
> 时间：2012-06-25T13:33:32.363
> 
> 标签：iphone, ios, image, uiimageview, lazy-loading

我想实现 iPhone Photo App（默认 iPhone 应用）。当我想加载大图像（2500 * 3700）时，我遇到了困难。当我想从一个图像滚动到另一个图像时，我会看到类似口吃的东西。要显示图像，我使用苹果网站的 ImageScrollView 它有显示方法：ImageScrollView.m

```
- (void)displayImage:(UIImage *)image
{
    // clear the previous imageView
    [imageView removeFromSuperview];
    [imageView release];
    imageView = nil;

    // reset our zoomScale to 1.0 before doing any further calculations
    self.zoomScale = 1.0;
    self.imageView = [[[UIImageView alloc] initWithImage:image] autorelease];
    [self addSubview:imageView];

    self.contentSize = [image size];
    [self setMaxMinZoomScalesForCurrentBounds];
    self.zoomScale = self.minimumZoomScale;
}

- (void)setMaxMinZoomScalesForCurrentBounds
{
    CGSize boundsSize = self.bounds.size;
    CGSize imageSize = imageView.bounds.size;

    // calculate min/max zoomscale
    CGFloat xScale = boundsSize.width / imageSize.width;    // the scale needed to perfectly fit the image width-wise
    CGFloat yScale = boundsSize.height / imageSize.height;  // the scale needed to perfectly fit the image height-wise
    CGFloat minScale = MIN(xScale, yScale);                 // use minimum of these to allow the image to become fully visible

    // on high resolution screens we have double the pixel density, so we will be seeing every pixel if we limit the
    // maximum zoom scale to 0.5.
    CGFloat maxScale = 1.0 / [[UIScreen mainScreen] scale];

    // don't let minScale exceed maxScale. (If the image is smaller than the screen, we don't want to force it to be zoomed.) 
    if (minScale > maxScale) {
        minScale = maxScale;
    }

    self.maximumZoomScale = maxScale;
    self.minimumZoomScale = minScale;
} 
```

对于我的应用，我有 600*600 的图像，我先展示它们。当用户滚动到下一张图片时，他只能看到 600*600 的图片。然后在后台加载 3600 * 3600 图像

```
[operationQueue addOperationWithBlock:^{
    UIImage *image = [self getProperBIGImage];
    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
        ImageScrollView *scroll = [self getCurrentScroll];
        [scroll displayImage:newImage];
    }];
}]; 
```

我明白了，当图像的尺寸为 3600 * 3600 并且我想在 640 * 960 的屏幕上显示图像时，iPhone 浪费了 1 秒的主队列时间来缩放图像，这就是为什么我不能滚动到下一张图像这1秒。

我想缩放图像，因为我需要用户能够缩放这个图像。我尝试使用这种方法，但这没有帮助。

我看到了一些可能的解决方案：

1）在后台提供 UIImageView 中的图像缩放（但我知道，UI 应该只在主线程中更改）

2) 使用 - (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollViewCalled 在开始时仅显示 600 * 600 图像然后加载大图像，当用户尝试缩放时（但我尝试了这个，我会松开 1 秒，当我尝试使用 bigImage 初始化 UIImageView 然后返回此 UIImageView 时；我什至无法实现它，因为我看到错误的滚动视图，滚动行为错误（难以解释），当我尝试为不同的视图返回不同的视图时秤）

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollViewCalled
{
    if (!zooming)
    {
        ImageScrollView *scroll = (ImageScrollView *)scrollViewCalled;
        UIImageView *imageView = (UIImageView *)[scroll imageView];
        return imageView;
    }
    else
    {
         UIImageView *bigImageView = [self getBigImageView];
         return bigImageView;
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:39:55.413

不幸的是，该图像太大，iPhone 无法处理。我知道在 iPad 上，限制大致是设备屏幕的大小。比这更大的，你将不得不使用 CATiledLayer。

我会看一下从 2010 年开始的过去三年中的 WWDC UIScrollView 演示文稿。在那里，他们讨论了在 iPhone 上处理大图像的方法。示例代码也将帮助您上路。

祝你好运！

# python - Python I/O 找不到文件，但路径似乎没问题

> ID：11190353
> 
> 赞同：1
> 
> 时间：2012-06-25T13:33:47.560
> 
> 标签：python, file-io, io

我有一个python脚本。我想打开一个文件来检索里面的数据。我将正确的路径添加到`sys.path`：

```
 sys.path.append('F:\WORK\SIMILITUDE\ALGOCODE')
 sys.path.append('F:\WORK\SIMILITUDE\ALGOCODE\DTW') 
```

更准确地说，`file.txt`我将打开的文件在 DTW 文件夹中，并且我还添加了上层文件夹 ALGOCODE。然后，我有命令

```
inputASTM170512 = open("file.txt","r") 
```

我有这个礼物：

```
Traceback (most recent call last):
   File "<pyshell#24>", line 1, in <module>
   inputASTM170512 = open("ASTM-170512.txt","r")
IOError: [Errno 2] No such file or directory: 'ASTM-170512.txt' 
```

为什么？你有什么主意吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T13:49:14.113

`open()`仅检查当前工作目录，不遍历系统路径查找文件。仅`import`适用于该机制。

您将需要在打开文件之前更改工作目录，`os.chdir(PATH)`或者在尝试打开文件时包含整个路径。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T13:49:28.450

当您尝试打开文件时`open`，例如：

```
open("ASTM-170512.txt","r") 
```

您将尝试在当前目录中打开一个文件。

它不依赖于`sys.path`. 该`sys.path`变量在您尝试导入模块时使用，但在您打开文件时不使用。

需要指定文件的全路径`open`或者将当前目录改到对应的地方（我觉得前者比较好）。

# stackmob - Stackmob 在注册设备时出现 401 错误

> ID：11190357
> 
> 赞同：0
> 
> 时间：2012-06-25T13:33:55.317
> 
> 标签：stackmob

我正在使用 username 和 device token 将设备注册到 stackmob 。我从 c2dn 获取有效令牌，然后将其存储到该用户的数据库中，然后在注册到 stackmob 时我正在使用这些参数。在开发环境中，它工作正常，但同一段代码在注册设备时给出 401。请在这方面给我建议。

代码如下：

```
public String registerWithNotificationServiceProvider(final String userName, final String deviceToken)        throws UserException 

         {
    if (userName.isEmpty() || deviceToken.isEmpty()) {
        throw new UserException(ResponseCodes.STATUS_BAD_REQUEST, "User Name or device      token is null",## Heading ##                    "label.invalid.user.device.details");
    }
    StackMobRequestSendResult deviceRegisterResult = null;
    deviceRegisterResult = StackMob.getStackMob().registerForPushWithUser(userName, deviceToken,
            new StackMobRawCallback() {
                @Override
                public void done(HttpVerb requestVerb, String requestURL,
                        List<Map.Entry<String, String>> requestHeaders, String requestBody,
                        Integer responseStatusCode, List<Map.Entry<String, String>> responseHeaders,
                        byte[] responseBody) {
                    String response = new String(responseBody);
                    logger.info("request Body is " + requestBody);
                    logger.info("request Url is " + requestURL);
                    for(Map.Entry<String, String> entry : requestHeaders){
                        logger.info("Request Header is " + entry.getKey());
                        logger.info("Request Header content is " + entry.getValue());
                    }
                    for(Map.Entry<String, String> entry : responseHeaders){
                        logger.info("Response Header is " + entry.getKey());
                        logger.info("Response Header content is " + entry.getValue());
                    }
                    logger.info("response while  registering the device is  " + response);
                    logger.info("responseCode while registering device " + responseStatusCode);
                }
            });
    String status = null;
    if (deviceRegisterResult.getStatus() != null) {
        status = deviceRegisterResult.getStatus().name();
        logger.debug("For user : " + userName + " Status for registering device is " + status);
    }
    if (Status.SENT.getStatus().equalsIgnoreCase(status)) {
        return Status.SUCCESS.getStatus();
    } else {
        return Status.FAILURE.getStatus();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:04:12.633

当您使用 api 密钥和秘密设置 StackMob 对象时，您是否记得将 apiVersion 1 与您的生产密钥和秘密一起使用？这是最有可能的问题。

```
StackMobCommon.API_KEY = KEY;
StackMobCommon.API_SECRET = SECRET;
StackMobCommon.USER_OBJECT_NAME = "user";
StackMobCommon.API_VERSION = 1; //! 0 for dev, 1 for production 
```

如果这不起作用还设置 StackMob.getStackMob().getLogger().setLogging(true); 在开头并发布生成的日志

# vbscript - 批处理文件不会启动 VBS 打印机脚本

> ID：11190358
> 
> 赞同：1
> 
> 时间：2012-06-25T13:33:57.563
> 
> 标签：vbscript, batch-file

伙计们，我创建了一个映射网络驱动器的基本登录脚本，并希望该批处理文件调用打印机 .vbs 脚本。这是我在批处理文件中的最后一个“net use”命令之后的命令，用于在同一目录中启动 .vbs 文件。

```
start \\<Server>\c$\<directory>\Printers.vbs 
```

启动 .vbs 文件的正确命令是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:51:40.290

你需要使用`cscript`.

```
cscript Printers.vbs 
```

# c# - 重试几次的好方法

> ID：11190363
> 
> 赞同：1
> 
> 时间：2012-06-25T13:34:20.350
> 
> 标签：c#, .net, exception

我经常遇到一些情况，如果某些操作失败，我必须重试，在一定次数后放弃，并在尝试之间稍作休息。

有没有办法创建一个“重试方法”，让我每次这样做时都不会复制代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:55:25.420

厌倦了一遍又一遍地复制/粘贴相同的代码，所以我创建了一个方法来接受必须完成的任务的委托。这里是：

```
//  logger declaration (I use NLog)
private static readonly Logger Log = LogManager.GetCurrentClassLogger();
delegate void WhatTodo();
static void TrySeveralTimes(WhatTodo Task, int Retries, int RetryDelay)
{
    int retries = 0;
    while (true)
    {
        try
        {
            Task();
            break;
        }
        catch (Exception ex)
        {
            retries++;
            Log.Info<string, int>("Problem doing it {0}, try {1}", ex.Message, retries);
            if (retries > Retries)
            {
                Log.Info("Giving up...");
                throw;
            }
            Thread.Sleep(RetryDelay);
        }
    }
} 
```

要使用它，我会简单地写：

```
TrySeveralTimes(() =>
{
    string destinationVpr = Path.Combine(outdir, "durations.vpr");
    File.AppendAllText(destinationVpr, file + ",     " + lengthInMiliseconds.ToString() + "\r\n");
}, 10, 100); 
```

在此示例中，我正在附加一个文件，该文件被某个外部进程锁定，编写它的唯一方法是重试几次，直到该进程完成...

我肯定希望看到处理这种特定模式（重试）的更好方法。

编辑：我在另一个答案中查看了[Gallio](http://www.gallio.org/)，它真的很棒。看这个例子：

```
Retry.Repeat(10) // Retries maximum 10 times the evaluation of the condition.
         .WithPolling(TimeSpan.FromSeconds(1)) // Waits approximatively for 1 second between each evaluation of the condition.
         .WithTimeout(TimeSpan.FromSeconds(30)) // Sets a timeout of 30 seconds.
         .DoBetween(() => { /* DoSomethingBetweenEachCall */ })
         .Until(() => { return EvaluateSomeCondition(); }); 
```

它无所不能。它甚至会在您编写代码时看着您的孩子 :) 但是，我力求简单，并且仍在使用 .NET 2.0。所以我想我的例子对你还是有用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:08:23.150

我已经根据特定的领域要求创建了这样的帮助程序，但作为一个通用的起点，请看一下 Gallio 的实现。

[http://www.gallio.org/api/html/T_MbUnit_Framework_Retry.htm](http://www.gallio.org/api/html/T_MbUnit_Framework_Retry.htm)

[https://code.google.com/p/mb-unit/source/browse/trunk/v3/src/MbUnit/MbUnit/Framework/Retry.cs](https://code.google.com/p/mb-unit/source/browse/trunk/v3/src/MbUnit/MbUnit/Framework/Retry.cs)

[http://interfacingreality.blogspot.co.uk/2009/05/retryuntil-in-mbunit-v3.html](http://interfacingreality.blogspot.co.uk/2009/05/retryuntil-in-mbunit-v3.html)

# android - DEBUG/SntpClient(71)：请求时间失败：java.net.SocketException

> ID：11190365
> 
> 赞同：0
> 
> 时间：2012-06-25T13:34:26.733
> 
> 标签：android, mysql, web-services, ksoap2

我试图在android应用程序中通过ksoap2开发连接mysql数据库。所以我提到了dis站点：

[http://codeoncloud.blogspot.in/2012/03/android-mysql-client.html](http://codeoncloud.blogspot.in/2012/03/android-mysql-client.html)

我在我的应用程序中反复收到“02-28 06:16:40.267: DEBUG/SntpClient(66): request time failed: java.net.SocketException: Address family not supported by protocol”。

Dis是我的android编码：

```
 package com.retailer.client;

 import android.app.Activity;
 import android.os.Bundle;
 import org.ksoap2.SoapEnvelope;
 import org.ksoap2.serialization.SoapObject;
 import org.ksoap2.serialization.SoapPrimitive;
 import org.ksoap2.serialization.SoapSerializationEnvelope ;
 import org.ksoap2.transport.HttpTransportSE;
 import android.widget.TextView;

 public class RetailerActivity extends Activity {
 private static final String SOAP_ACTION = "retailer.com";
private static final String METHOD_NAME = "customerData";
private static final String NAMESPACE = "retailer.com";
private static final String URL = "http://192.168.1.249:8085/Retailer/services/RetailerWS?wsdl";
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

envelope.setOutputSoapObject(request);

  HttpTransportSE ht = new HttpTransportSE(URL);
 try {
 ht.call(SOAP_ACTION, envelope);
 SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
 SoapPrimitive s = response;
 String str = s.toString();
 String resultArr[] = str.split("&");//Result string will split & store in an array

 TextView tv = new TextView(this);

  for(int i = 0; i<resultArr.length;i++){
  tv.append(resultArr[i]+"\n\n");
  }
setContentView(tv);

} catch (Exception e) {
e.printStackTrace();
}
}
} 
```

还为我的清单文件添加了 Internet 权限。

那为什么空白屏幕只显示在我的模拟器上..当我放置站点所有者 WSDL 链接时意味着它对我有用......但是我输入我的 url 意味着它对我不起作用..但是站点所有者 WSDL 文件和我的 WSDL文件都相同而已..我检查了这两个文件。然后y dis error dis来了。请指导我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:41:41.660

问题是您正在主 UI 线程上执行网络访问。`NetworkAccessOnMainThread`如果您尝试在主线程上执行 HTTP 请求，Android 3.0 及更高版本将使您的应用程序崩溃（即系统将抛出异常）。您需要将您的 HTTP 请求包装在一个`AsyncTask`（或`Thread`某种类型的）中，以确保您不会阻塞 UI 线程。

阅读我关于该主题的博客文章：

## [为什么冰淇淋三明治会使您的应用程序崩溃](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

# jsf-2 - 如何跳过对隐藏组件的验证？

> ID：11190366
> 
> 赞同：1
> 
> 时间：2012-06-25T13:34:28.360
> 
> 标签：jsf-2

我有一个像下面这样的场景..

```
<h:selectOneRadio id="someId" value="#{myBean.type}" required="true">                               
    <f:ajax  event="valueChange"  execute="@form" render="myPanel">
    <f:selectItem itemLabel="Existing Type" itemValue="Existing Type" />
    <f:selectItem itemLabel="New Type" itemValue="New Type" />
<h:selectOneRadio>

<h:panelGroup id="myPanel" rendered="#{myBean.checkforNewType()}">
    <h:inputText id="txtval" value="#{mybean.val}" required = "true" requiredMessage="Some message">
    <h:message for="txtval" styleClass="error"/>
<h:panelGroup> 
```

如果属性类型的值为“现有类型”，则基本上应该隐藏包含文本框的面板。但我面临的问题是，如果用户将框留空，则面板不会因为验证失败而隐藏。

当包含文本框的面板被隐藏时，是否有避免验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:59:27.337

最好检查请求参数值。当验证通常失败时，模型值不会更新，因此`rendered`当绑定到请求范围的 bean 时，您的条件将失败。

```
<h:selectOneRadio id="someId" value="#{myBean.type}" required="true">                               
    <f:ajax event="valueChange" execute="@form" render="myPanel">
    <f:selectItem itemLabel="Existing Type" itemValue="Existing Type" />
    <f:selectItem itemLabel="New Type" itemValue="New Type" />
<h:selectOneRadio>

<h:panelGroup id="myPanel" rendered="#{param['formId:someId'] == 'New Type'}">
    <h:inputText id="txtval" value="#{mybean.val}" required="true" requiredMessage="Some message">
    <h:message for="txtval" styleClass="error"/>
<h:panelGroup> 
```

在这里，我假设父母`<h:form>`有一个`id="formId"`.

# java - 从 Python 调用 Java：“无法找到或加载类”错误

> ID：11190367
> 
> 赞同：0
> 
> 时间：2012-06-25T13:34:31.700
> 
> 标签：java, python, eclipse, subprocess, pydev

我正在尝试使用命令行从 python 调用 java 程序。代码如下：

```
subprocess.check_output(["java", "pitt.search.semanticvectors.CompareTerms", "-queryvectorfile","termvectors.bin","term1","term2"]) 
```

我收到以下错误：

```
Error: Could not find or load main class pitt.search.semanticvectors.CompareTerms 
```

当我从 PyDev（Eclipse 3.7.2 中的 2.5 版）运行程序时会发生这种情况。但是，如果我从终端运行相同的代码，它可以工作并且我得到我想要的结果。

我几乎可以肯定这个问题与 PyDev 的某些配置以及它如何处理 java CLASSPATH 相关，即：

```
/Users/feralvam/Programas/semanticvectors-3.4/semanticvectors-3.4.jar:/Users/feralvam/Programas/lucene-3.5.0/lucene-core-3.5.0.jar:/Users/feralvam/Programas/lucene-3.5.0/contrib/demo/lucene-demo-3.5.0.jar: 
```

“pitt.search.semanticvectors.CompareTerms”类在“semanticvectors-3.4.jar”中。

您能给我的任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:16:46.537

@eis 提出的解决方案奏效了。现在，命令是：

```
subprocess.check_output(["java", "-classpath", "/Users/feralvam/Programas/semanticvectors-3.4/semanticvectors-3.4.jar:/Users/feralvam/Programas/lucene-3.5.0/lucene-core-3.5.0.jar:/Users/feralvam/Programas/lucene-3.5.0/contrib/demo/lucene-demo-3.5.0.jar:", "pitt.search.semanticvectors.CompareTerms", "-queryvectorfile","/Users/feralvam/termvectors.bin","term1","term2"]) 
```

# jquery - 更改表格行的背景颜色（jsfiddle）

> ID：11190370
> 
> 赞同：0
> 
> 时间：2012-06-25T13:34:52.477
> 
> 标签：jquery

我生成了一个类似于我网站上的内容的表格演示。这个想法是每个行单元格都包含小图像，单击图像会生成一个弹出窗口，其中包含有关单击的小图像的相应信息。我正在尝试修改我的 jquery，以便打开的弹出窗口使行（属于）背景发生变化，因此很容易跟踪弹出窗口属于哪一行。

见jsfiddle：

[http://jsfiddle.net/WL9tS/](http://jsfiddle.net/WL9tS/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:02:24.593

您可以将此行添加到单击事件中：

```
$(this).parent().parent().css("background-color","#CCC"); 
```

然后只需想办法在完成后将其恢复为原始颜色。

# c# - 将对象列表作为 json 结果返回

> ID：11190371
> 
> 赞同：0
> 
> 时间：2012-06-25T13:34:54.060
> 
> 标签：c#, javascript, jquery

我正在使用 Json 将对象列表从 c# 返回到 javascript，我的代码是：

**C＃**

```
 List<GuestRSVP_Info> Ser_Result = new List<GuestRSVP_Info>(); 
 return Json(test, "application/json", JsonRequestBehavior.AllowGet); 
```

**javascript**

```
$.post("url", { }, function(){alert("success");}).error(function(){ alert("error");}); 
```

我总是得到`error alert`，但如果我只发送 1 个对象而不是列表，我得到`success alert`了。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:15:15.687

是的。因为您使用 POST 发送 JSON 对象。在 POST 中，我们每次发送一个 json 对象。当要发送数组、列表...或其他对象时，需要以 JSON 格式发送。

```
var data = {
   myArrayOfObjects : [
        { name : 'name 1', value : 'value 1'},
        { name : 'name 2', value : 'value 2'}
        ....
    ],
   secondParameter : { 
    ...
   },
   lastParameter: true
}; 
```

# php - 加载火花库时出现 Codeigniter 404 页面抛出错误

> ID：11190375
> 
> 赞同：3
> 
> 时间：2012-06-25T13:35:07.463
> 
> 标签：php, codeigniter

今晚我遇到了一个我无法弄清楚的问题。我正在为[登山扣资产库加载火花](http://getsparks.org/packages/carabiner/versions/HEAD/show)

```
$this->load->spark('carabiner/1.5.4', array('library' => 'carabiner')); 
```

我在这些场景中加载火花时遇到错误/没有错误：

**default_controller/foo** <- foo 方法不存在，404 加载正常

**other_controller/bar** <- bar 是 other_controller 中的方法，方法加载正常

**other_controller/wakawaka** -> wakawaka 不存在，消息：未定义的属性：错误::$carabiner

```
$this->carabiner->config($carabiner_config); 
```

是 php/codeigniter 抱怨的那一行

Carabiner 正在加载到 MY_controller 中，其中 default_controller 和 other_controller 都扩展了 MY_controller

我注释掉了上面的配置行，并在我必须加载和调用的下一个 spark 模板中得到了相同的错误。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:27:29.633

如果在 MY_Controller 构造函数中加载登山扣，请确保在扩展它的控制器中调用父构造函数。

# php - 如何避免php中的零宽度牢不可破的空间

> ID：11190379
> 
> 赞同：0
> 
> 时间：2012-06-25T13:35:21.217
> 
> 标签：php, html, linux, encoding, utf-8

我的网站呈现`&#65279`为 HTML 我尝试在没有 BOM 和所有这些解决方案的情况下保存编码为 UTF-8 的文件，但我仍然收到错误

注意：当托管环境是 Linux 时，我有阿拉伯字符并且在 windows 上工作

# iphone - CAShapeLayer 和 CAShapeLayer 子层慢

> ID：11190380
> 
> 赞同：0
> 
> 时间：2012-06-25T13:35:21.553
> 
> 标签：iphone, ios5, uikit, interface-builder, cashapelayer

我有一个带有 CAShapeLayer 子层的 UIScrollView，它呈现一条简单的线条。CAShapeLayer 子层有自己的子 CAShapeLayer。这会导致滚动和缩放变慢。层次结构是这样的：

-UIScrollViewLayer -CAShapeLayer -CAShapeLayer

如果我改变这个层次结构，使它只有一层深，我就没有性能问题：

-UIScrollViewLayer -CAShapeLayer -CAShapeLayer

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:47:05.053

塞梅尔，

所以我的滚动视图控制器目前正在这样做：

```
[self.uiview.layer addSublayer:myCALayer]; 
```

myCaLayer 也在其 init 方法中执行此操作：

```
CAShapeLayer *overlayLayer = [[CAShapeLayer alloc] init];
[self addSublayer:overlayLayer] 
```

由于某种原因，我发现这种层次结构很慢。如果我改为展平层次结构并在我的 uiscrollview 控制器中执行此操作：

```
[self.uiview.layer addSublayer:myCALayer];
CAShapeLayer *overlayLayer = [[CAShapeLayer alloc] init];
[self.uiview.layer addSublayer:overlayLayer] 
```

然后性能要好得多。希望这更有意义。

# skype - 是否可以在 Skype 聊天窗口中显示图像？

> ID：11190383
> 
> 赞同：2
> 
> 时间：2012-06-25T13:35:49.280
> 
> 标签：skype

是否可以在 Skype 聊天窗口中显示图像？
（Windows 7 Skype 客户端）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:20:20.967

您可以使用 windows 桌面客户端（不是 Windows Modern）共享您的桌面，或者将图像（或任何文件）拖放到 IM 窗口中，或者如果您使用的是 iOS 客户端，请执行此操作 - [http://mashable.com /2012/08/21/skype-照片共享-更新/](http://mashable.com/2012/08/21/skype-photo-sharing-update/)

2014 年 7 月 9 日更新：更多客户端现在支持在聊天中共享图片：Xbox one、Windows Phone 和 iOS 现在都有了。

2014 年 9 月 10 日更新：Window 和 Mac 现在也是（[改进的 Skype-desktop-clients-for-a-dynamic-new-chat-experience](http://blogs.skype.com/2014/10/09/improved-skype-desktop-clients-for-a-dynamic-new-chat-experience/)）

披露：我目前为 Microsoft/Skype 工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T09:54:55.670

我认为不，只有您可以共享图像链接，如果您想立即显示发送图像，而无需下载它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T12:18:24.257

在 Skype 社区有这样一个功能的[讨论/请求](http://community.skype.com/t5/Live-Messenger/Display-Images-in-Chat-Window/m-p/2891319)。此外，还有这个[功能建议](http://community.skype.com/t5/Mac/Feature-Suggestion-Inline-images/m-p/1652363#M30466)单独。请支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-11T04:08:13.397

如果您希望实时共享照片，则可以使用以下工具进行在线协作幻灯片放映。我经常使用它通过 Skype 会话向我的家人展示照片：[http ://www.photozzap.com/](http://www.photozzap.com/)

# iphone - 自定义 NSEntityMigrationPolicy 关系

> ID：11190385
> 
> 赞同：7
> 
> 时间：2012-06-25T13:36:07.720
> 
> 标签：iphone, core-data, core-data-migration

我正在尝试使用自定义进行数据库升级`NSEntityMigrationPolicy`。这就是我的数据模型现在的样子以及预期的结果：

```
 A <-------->> B   ( 1 A -> many B ) 
```

我想要一个新的 C 实体，它将“破坏”某些子集中的 B 类型对象：

```
 A <-------->> C <------->> B  ( 1 A can have many C, each C can have many B ) 
```

我`NSEntityMigrationPolicy`为实体 A 做了一个自定义。我为每个 A 创建了一些 C 实体`createDestinationInstancesForSourceInstance:entityMapping:manager:error:`，但我不知道如何处理 A 和 B 之间的关系。

在文档中，他们说要以`createRelationshipsForDestinationInstance`某种方式创建新关系。但是对于这种情况，我还没有找到任何暗示性的例子。我想可能可以在这里创建 A <->> C 关系，但 B 可能还不存在于目标上下文中以创建 C<-->>B 关系。如何进行这样的迁移？请帮忙 ：）

谢谢 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T13:52:54.957

基本方法是

1.  创建迁移 A 到 C 的策略
2.  创建迁移 A 到 A 的策略
3.  创建 B-to-B 迁移策略

以正确的顺序执行此操作很重要。

由于数据库中不存在 C，因此您必须做一个小技巧：`NSMigrationManager`可以存储`userInfo`. 这个 userInfo 字典在整个迁移过程中都可用。因此，您可以将您在 A-to-C 中创建的每个 C 对象存储在 userInfo 字典中。您需要在 A 上具有唯一标识符属性，以将其存储为键并将适当的 C 对象设置为值。在第三次迁移（B 到 C）中，您可以访问适当的 C 对象并将其分配给 B。

**1\. A-to-C：基于每个现有的 A 对象创建新的 C 对象。**

在`beginEntityMapping:manager:error:`创建您的初始`NSMutableDictionary`并将其分配给`NSMigrationManager`的 userInfo 属性。

在`createDestinationInstancesForSourceInstance:entityMapping:manager:error:`执行以下操作：

```
- (BOOL)createDestinationInstancesForSourceInstance:(NSManagedObject *)sInstance entityMapping:(NSEntityMapping *)mapping manager:(NSMigrationManager *)manager error:(NSError **)error
{
    NSMutableDictionary *cObjects = (NSMutableDictionary *)[manager userInfo];
    NSObject *aUniqueIdentifierForEveryAObject = [sInstance valueForKey:@"aUniqueIdentifier"];

    NSManagedObject *destinationC = nil;
    if ([[cObjects allKeys] containObject:aUniqueIdentifierForEveryAObject])
    {
        newC = [userInfo objectForKey:aUniqueIdentifierForEveryAObject];
    }
    else
    {
        newC = [NSEntityDescription insertNewObjectForEntityForName:@"C" inManagedObjectContext:[manager destinationContext]];

        // Assign instance A (sInstance) to the newC and update the userInfo
        [newC setValue:sInstance forKey:@"a"];
        [cObjects setObject:newC forKey:aUniqueIdentifierForEveryAObject];
    }

    [manager associateSourceInstance:sInstance withDestinationInstance:destinationC forEntityMapping:mapping];
    return YES;
}

- (BOOL)createRelationshipsForDestinationInstance:(NSManagedObject*)dInstance entityMapping:(NSEntityMapping*)mapping manager:(NSMigrationManager*)manager error:(NSError**)error
{
    return YES;
} 
```

**2\. A-to-A：迁移所有A对象**

这里可以对A的属性做一些额外的调整。重要的是，无论您是否有属性更改，都要创建此迁移，因为自动迁移已关闭。如果您没有任何更改，您可以简单地在映射模型编辑器中创建一个实体映射。

**3\. B-to-B：迁移所有B对象并分配新的C对象**

分配新的 C 对象。你不能这样做，`createRelationships...`因为你需要 A 对象和它的唯一标识符来从 userInfo 字典中获取适当的 C 。

```
- (BOOL)createDestinationInstancesForSourceInstance:(NSManagedObject *)sInstance entityMapping:(NSEntityMapping *)mapping manager:(NSMigrationManager *)manager error:(NSError **)error
{
    id destinationB = [NSEntityDescription insertNewObjectForEntityForName:@"B" inManagedObjectContext:[manager destinationContext]];
    NSMutableDictionary *userInfo = (NSMutableDictionary *)[manager userInfo];
    NSMutableDictionary *cObjects = (NSMutableDictionary *)[userInfo valueForKey:kCObjects];
    A *anA = [sInstance valueForKey:@"a"];
    NSObject *aUniqueIdentifierForA = [anA valueForKey:@"aUniqueIdentifier"];
    C *newC = [userInfo objectForKey:aUniqueIdentifierForA];
    [destinationB setValue:newC forKey:@"c"];

    // Migrate all other attributes here
    [destinationB setValue:... forKey:...];

    [manager associateSourceInstance:sInstance destinationB forEntityMapping:mapping];

    return YES;
}

- (BOOL)createRelationshipsForDestinationInstance:(NSManagedObject *)dInstance entityMapping:(NSEntityMapping *)mapping manager:(NSMigrationManager *)manager error:(NSError **)error
{
    return YES;
} 
```

我没有对此进行测试，但基本方法应该有效。

* * *

**更新**

第 1 步有一个错误：A-to-C。

```
// WRONG
[cObjects setObject:newC forKey:sInstance];

// UPDATED
[newC setValue:sInstance forKey:@"a"];
[cObjects setObject:newC forKey:aUniqueIdentifierForEveryAObject]; 
```

# xml - 向 DITA 文件添加新标签

> ID：11190386
> 
> 赞同：1
> 
> 时间：2012-06-25T13:36:14.383
> 
> 标签：xml, dita, dtd

我从**DITA**技术开始。我已经阅读了 DITA 文档的基本结构。现在，我怀疑如下：

如何**将我自己的标签添加到 DITA 文档中？，我是否应该根据**[http://docs.oasis-open.org/dita/v1.2/cd03/dtd1.2](http://docs.oasis-open.org/dita/v1.2/cd03/dtd1.2/base/dtd/basetopic.dtd)之类的 topic.dtd 创建一个 .DTD 文件[/base/dtd/basetopic.dtd](http://docs.oasis-open.org/dita/v1.2/cd03/dtd1.2/base/dtd/basetopic.dtd)？

问候！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T14:22:42.710

在 DITA 中，修改基本词汇的过程称为专业化。

这里有一个非常好的专业化教程：

[http://www.xiruss.org/tutorials/dita-specialization/](http://www.xiruss.org/tutorials/dita-specialization/)

DITA 用户列表也是询问与 DITA 相关的问题的好地方，因为许多 DITA 专家都在监视它。

问候，拉杜

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T19:33:08.730

专业化是 DITA 架构最重要的方面。它使您能够获取现有的 DITA 元素或属性，然后进一步细化它。（您只能使用专业化来“缩小”某些东西；您不能在您专业化的原始项目上“扩展”。）

但在您专门化元素或属性之前，请确保您仔细查看了现有的 DITA 元素和属性，并确定它们不能满足您的需求。通常，刚接触 DITA 的人会创建专业化，因为他们不完全了解他们已经可以使用的东西，这是不幸的。

我赞同 Radu 使用 Yahoo! 的建议。dita-users 列表以征求具有大量 DITA 专业知识的人的反馈。

# jsp - 使 Servlet 重新加载调用它的页面

> ID：11190388
> 
> 赞同：3
> 
> 时间：2012-06-25T13:36:22.117
> 
> 标签：jsp, servlets

我编写了一个完成任务的 Servlet，然后我希望它重新加载最初称为 Servlet 的 JSP。servlet 运行一个`enctype='multipart/form-data'`JSP，这个 JSP 称为 Uploadtest，每次我尝试运行以下任一代码时都会得到`The requested resource (/project_name/WebContent/jsps/new.jsp) is not available`.

我努力了：

```
response.sendRedirect("/WebContent/jsp/Uploadtest.jsp"); 
```

和

```
getServletContext().getRequestDispatcher("/WebContent/jsps/Uploadtest.jsp").forward   (request, response); 
```

然而，这两个都产生了一个错误，说它找不到我正在寻找的页面。

我正在寻找有关如何解决此问题的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:19:14.003

您确实需要了解项目中源的布局、已部署的 webapp 的布局以及应用程序在服务器中的布局之间的区别。

部署的 webapp 具有以下结构：

```
jsps
    Uploadtest.jsp
WEB-INF
    classes
        the compiled classes of your application
    lib
        the jars of your application 
```

已部署的应用程序中不存在 WebContent 目录。它只是 Eclipse 存储与 webapp 相关的源（JSP 文件、图像等）的地方。

每个 webapp 都有一个上下文路径。如果您的 webapp 的上下文路径是`/foo`，那么您必须在浏览器地址栏中为您的 JSP 键入的路径将是：

```
http://localhost:8080/foo/jsps/Uploadtest.jsp 
```

当你转发到另一个资源时，它总是转发到同一个 webapp 的资源。所以你不需要指定上下文路径：

```
getServletContext().getRequestDispatcher("/jsps/Uploadtest.jsp").forward (request, response); 
```

当您重定向时（这与转发完全不同），您可以重定向到任何 URL（同一个 webapp、同一主机上的另一个 webapp，或者如果您愿意，可以重定向到 www.google.com）。如果你重定向到同一个 webapp 的某个资源，你不需要发送`http://localhost:8080`部分，但你需要发送上下文路径，后面跟着 webapp 中的资源路径，你也应该总是使用 encodeRedirectURL 方法（除非您不关心用户依赖 URL 重写而不是 cookie 进行会话管理）：

```
String redirect = 
    response.encodeRedirectURL(request.getContextPath() + "/jsps/Uploadtest.jsp");
response.sendRedirect(redirect); 
```

`request.getContextPath()`用于在`/foo`不对其进行硬编码的情况下获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:15:35.117

我认为你的问题是关于**应用程序的结构**和**请求 url 路径的规范**。

我要指出的第一件事是“WebContent”是 Eclipse 中的虚拟文件夹。所以你不应该在你的请求或重定向路径中使用它。

第二，我猜您使用了应用程序的绝对路径，但编码错误：

1.  打字有一点小错误：

> http://localhost:8080/foo/jsp/Uploadtest.jsp

根据您的描述，您应该输入：

```
http://localhost:8080/foo/jsps/Uploadtest.jsp 
```

2.

```
getServletContext().getRequestDispatcher("/WebContent/jsps/Uploadtest.jsp").forward   (request, response); 
```

您应该将上下文路径添加到您的转发 url，如下所示：

```
request.getContextPath() + "jsps/Uploadtest.jsp" 
```

# joomla - 如何在桌面浏览器上运行移动 joomla？

> ID：11190389
> 
> 赞同：0
> 
> 时间：2012-06-25T13:36:34.783
> 
> 标签：joomla, joomla1.6

我需要在我的常规浏览器中查看移动 joomla 插件的输出，以便能够轻松地设置样式和调整内容。在旧版本的移动 joomla 中，有一个选项（“始终移动”）可以一直输出移动视图。但我找不到当前版本（1.0.3）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:19:06.530

您始终可以为 Firefox安装[用户代理切换器。](https://addons.mozilla.org/en-US/firefox/addon/user-agent-switcher/)它使您能够更改为移动用户代理以及其他一些东西，例如 IE6 和 IE7。您也可以添加其他人。希望这可以帮助。问候。

# android - 检查列表视图中的复选框也会检查其他随机复选框

> ID：11190390
> 
> 赞同：25
> 
> 时间：2012-06-25T13:36:35.700
> 
> 标签：android, android-listview

每当我在列表视图中选中一个复选框时，其他随机复选框也会被选中。这可能是由于 listview 的项目回收。

我还尝试`android:focusable="false"`在某些地方建议将复选框设置为复选框，但是在选中其复选框时，仍未要求onListItemClick（）行。

我想要的是只有用户选中的复选框应该保持选中状态，直到用户取消选中它们。

我在下面给出了完整的代码，可以直接运行。

活动代码 - ProjActivity.java：

```
public class ProjActivity extends ListActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    PackageManager pm = getPackageManager();
    List<ApplicationInfo> packages = pm.getInstalledApplications(PackageManager.GET_META_DATA);

    final CopyOfMyCustomAdapter a = new CopyOfMyCustomAdapter(this, packages);
    getListView().setAdapter(a);
}} 
```

最后，自定义布局文件 - testlayout.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" 

>

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="20dp"
    android:text="CheckBox" 
    android:focusable="false"
    />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher" 
    android:focusable="false"
    /> 
```

更新：在下面的答案中提出建议后，我的 CustomAdapter ：

```
public class MyCustomAdapter extends ArrayAdapter<ApplicationInfo>  {

private List<ApplicationInfo> appInfoList;
private LayoutInflater mInflater;
private PackageManager pm;
ArrayList<Boolean> positionArray;
private Context ctx;
int[] visiblePosArray;
private volatile int positionCheck; 

public MyCustomAdapter(Context context, List<ApplicationInfo> myList) {
    super(context, NO_SELECTION);
    appInfoList = myList;
    ctx=context;
    mInflater =     (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    pm = context.getPackageManager();

    positionArray = new ArrayList<Boolean>(myList.size());
    for(int i =0;i<myList.size();i++){
        positionArray.add(false);
    }
}
@Override
public int getCount() {
    // TODO Auto-generated method stub
    return appInfoList.size();
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    View row = convertView;
    Holder holder = null;

    if(row==null){
        row = mInflater.inflate(R.layout.testlayout, null); 
        //  visiblePosArray[position%visiblePosArray.length]=position;
        holder = new Holder();
        holder.appIcon = (ImageView)row.findViewById(R.id.imageView1);

        holder.ckbox =(CheckBox)row.findViewById(R.id.checkBox1);

        row.setTag(holder);
    } else {

        holder = (Holder) convertView.getTag();
    }

    holder.ckbox.setFocusable(false);
    holder.appIcon.setImageDrawable(appInfoList.get(position).loadIcon(pm));
    holder.ckbox.setChecked(positionArray.get(position));
    holder.ckbox.setText(appInfoList.get(position).loadLabel(pm));
    holder.ckbox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if(isChecked ){
            System.out.println(position+"--- :)");
                positionArray.add(position, true);
            }else
                positionArray.add(position, false);
        }
    });

    return row;
}
static class Holder
{
    ImageView appIcon;
    CheckBox ckbox;

} 
```

}

当我上下滚动时，我可以看到随机索引在我的布尔 Arraylist 中更改为 true，而在 syso 中。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-28T08:08:09.173

当列表视图回收视图时，它会回收其当前状态*以及*附加到它的侦听器。在我的示例中，如果复选框被选中并且设置了 onCheckedChangeListener，则两者都将根据位置保留为回收视图的一部分。因此，我们有责任重置所有状态并删除以前的侦听器。

因此，当我取消选中回收视图时，onCheckedChange 侦听器正在执行。一行使程序完美运行。侦听器被删除：

```
holder.ckbox.setOnCheckedChangeListener(null); 
```

以下是可能偶然发现此问题的人的适配器工作代码：

```
public class MyCustomAdapter extends ArrayAdapter<ApplicationInfo>  {

private List<ApplicationInfo> appInfoList;
private LayoutInflater mInflater;
private PackageManager pm;
ArrayList<Boolean> positionArray;
private Context ctx;
int[] visiblePosArray;
private volatile int positionCheck; 

public MyCustomAdapter(Context context, List<ApplicationInfo> myList) {
    super(context, NO_SELECTION);
    appInfoList = myList;
    ctx=context;
    mInflater =     (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    pm = context.getPackageManager();

    positionArray = new ArrayList<Boolean>(myList.size());
    for(int i =0;i<myList.size();i++){
        positionArray.add(false);
    }
}
@Override
public int getCount() {
    // TODO Auto-generated method stub
    return appInfoList.size();
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    View row = convertView;
    Holder holder = null;

    if(row==null){
        row = mInflater.inflate(R.layout.testlayout, null); 
        //  visiblePosArray[position%visiblePosArray.length]=position;
        holder = new Holder();
        holder.appIcon = (ImageView)row.findViewById(R.id.imageView1);

        holder.ckbox =(CheckBox)row.findViewById(R.id.checkBox1);

        row.setTag(holder);
    } else {

        holder = (Holder) convertView.getTag();
    holder.ckbox.setOnCheckedChangeListener(null);

    }

    holder.ckbox.setFocusable(false);
    holder.appIcon.setImageDrawable(appInfoList.get(position).loadIcon(pm));
    holder.ckbox.setChecked(positionArray.get(position));
    holder.ckbox.setText(appInfoList.get(position).loadLabel(pm));
    holder.ckbox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if(isChecked ){
            System.out.println(position+"--- :)");
                positionArray.set(position, true);

            }else
                positionArray.set(position, false);
        }
    });

    return row;
}
static class Holder
{
    ImageView appIcon;
    CheckBox ckbox;

} 
```

}

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-25T14:01:18.337

您需要跟踪检查状态，因为`ListView`重复使用`Views`. 因此先前启用/禁用的位置 1 的状态可能与位置 7 的状态相同。

因此，您需要做的是将检查状态保存在数组`boolean`或您喜欢的任何内容中。

在构造函数中以类级别`boolean [] checkedState;`对其进行初始化，根据您的数据数组大小，您也可以将`ArrayList<Boolean>`其用于动态大小。

设置`OnStateChangeListener`为您的`CheckBoxes`in `getView()`，无论何时选中或取消选中，获取该位置并将其保存在这样的数组中`checkedState`：

```
checkedState[position] = false;// or true accordingly 
```

`View`并且在为类似`TextView`或`ImageView`任何特定位置设置其他数据时，也相应地设置选中状态，如下所示：

```
holder.appIcon.setImageDrawable(appInfoList.get(position).loadIcon(pm));
holder.ckbox.setChecked(checkedState[position]); 
```

一个很好的解释和例子：

[Android自定义图片库，网格中带有复选框以选择多个](http://vikaskanani.wordpress.com/2011/07/20/android-custom-image-gallery-with-checkbox-in-grid-to-select-multiple/)

**编辑：**实际上正在发生的事情是，您的位置越来越多，要解决这个问题，请添加以下几行：

```
holder.ckbox.setText(appInfoList.get(position).loadLabel(pm));
holder.ckbox.setTag(String.valueOf(position));   // to properly track the actual position
holder.ckbox.setOnCheckedChangeListener(new OnCheckedChangeListener() {
      @Override
      public void onCheckedChanged(CompoundButton v, boolean isChecked) {
            int pos = Integer.parseInt( v.getTag().toString()) ; //to take the actual position
            positionArray.add(pos, isChecked);  // we don't need to check whether it is true or false, however you can put if-else to debug the app.

      }
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-25T19:02:49.343

这两种方法的组合对我有用：

我在类级别上有一个布尔数组，我用它来跟踪复选框的值。

```
boolean [] checkedItems = new boolean[listItems.size()]; 
```

在 getView() 中：

```
 public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;

        if (convertView == null) {

            convertView = inflater.inflate(R.layout.menu_item_list_item,
                    parent, false);

            holder = new ViewHolder();

            holder.name = (TextView) convertView
                    .findViewById(R.id.menuItemLargeName);
            holder.mainItemCheckBox = (CheckBox) convertView
                    .findViewById(R.id.menuItemLargeCheckBox);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
            // remove the listener so that it does not get attached to other chechboxes. 
            holder.mainItemCheckBox.setOnCheckedChangeListener(null);
            //update the checkbox value from boolean array
            holder.mainItemCheckBox.setChecked(checkedItems[position]);
        }

        holder.name.setText(listItems.get(position).getName());

        holder.mainItemCheckBox
                .setOnCheckedChangeListener(onCheckedListener);
        holder.mainItemCheckBox
                .setTag(R.id.menuItemLargeCheckBox, position);

        return (convertView);
    } 
```

在我的 OnCheckedChangeListener() 中：更新布尔数组。

```
 OnCheckedChangeListener onCheckedListener = new OnCheckedChangeListener() {

    @Override
    public void onCheckedChanged(CompoundButton buttonView,
            boolean isChecked) {

        int position = (Integer) buttonView
                .getTag(R.id.menuItemLargeCheckBox);

        MenuItemObject menuItem = listItems.get(position);

        if (isChecked) {

            cartItems.add(menuItem);
            checkedItems[position] = true;

        } else {

            cartItems.remove(menuItem);
            checkedItems[position] = false;
        }

    }
}; 
```

# mysql - Mysql 没有运行

> ID：11190391
> 
> 赞同：2
> 
> 时间：2012-06-25T13:36:36.513
> 
> 标签：mysql, freebsd

我不知道这个问题是否适合 SO，但如果它不只是关闭它......

问题是，在迁移到另一台专用服务器后，我无法启动我的 MySQL 服务器，日志显示如下：

```
120625 13:04:10 mysqld_safe mysqld from pid file /var/db/mysql/ropp.pid ended
120625 13:04:29 mysqld_safe Starting mysqld daemon with databases from /var/db/mysql
120625 13:04:29 InnoDB: The InnoDB memory heap is disabled
120625 13:04:29 InnoDB: Mutexes and rw_locks use GCC atomic builtins
120625 13:04:29 InnoDB: Compressed tables use zlib 1.2.3
120625 13:04:29 InnoDB: Initializing buffer pool, size = 128.0M
120625 13:04:29 InnoDB: Completed initialization of buffer pool
InnoDB: Error: log file ./ib_logfile0 is of different size 0 104857600 bytes
InnoDB: than specified in the .cnf file 0 5242880 bytes!
120625 13:04:29 [ERROR] Plugin 'InnoDB' init function returned error.
120625 13:04:29 [ERROR] Plugin 'InnoDB' registration as a STORAGE ENGINE failed.
120625 13:04:29 [ERROR] Unknown/unsupported storage engine: InnoDB
120625 13:04:29 [ERROR] Aborting

120625 13:04:29 [Note] /usr/local/libexec/mysqld: Shutdown complete

120625 13:04:29 mysqld_safe mysqld from pid file /var/db/mysql/ropp.pid ended 
```

问题出在哪里，我该怎么办？我的 MySQL 服务器版本是`5.5`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:14:50.453

问题是新服务器上的 mysql 配置与旧服务器不匹配。该变量`innodb_log_file_size`设置为，`5M`但日志的实际大小为 100MB。您需要在 中更改该值`my.cnf`。

如果 MySQL 服务器正在运行，则关闭它（不应该）。编辑`my.cnf`并更改`innodb_log_file_size`to的值`100M`

```
innodb_log_file_size = 100M 
```

这应该可以解决问题。启动服务器。如果它不起作用，则停止服务器，将 ib_logfile0 和 ib_logfile1 移动到 .bak 并再次启动服务器。

# objective-c - Aaron Hillegass :: [NSArrayController add] = insertObject 方法

> ID：11190392
> 
> 赞同：0
> 
> 时间：2012-06-25T13:36:51.723
> 
> 标签：objective-c, cocoa, cocoa-bindings

我肯定错过了什么。我在 Aaron Hillegass 的 Cocoa Programming 中标题为“Key-Value Observing”的章节中。

我插入了使应用程序能够撤消/重做从 RaiseMan 中添加和减少员工的代码。该应用程序有效但是我想知道为什么当我将“添加员工”链接到 NSArrayController 到它调用的 ADD 方法（使用 .xib 文件）时

```
- (void)insertObject:(Person *)p inEmployeesAtIndex:(int)index; 
```

根据Key-Value Coding，add方法不应该调用吗？

```
- (void)addEmployeesObject:newEmployee; 
```

我正在链接“添加”方法而不是“插入”方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:56:56.173

这是使用[KVC 集合访问器方法](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueCoding/Articles/AccessorConventions.html#//apple_ref/doc/uid/20002174-178830-BAJEDEFB)时的预期行为。在所需位置（即使该位置在末尾）插入对象比想知道“它是否在末尾”并直接调用 -add... 更有效。所有这些*都比*在已知修改范围时用全新的（例如，-setEmployees:）数组替换整个数组更有效。NSArrayController 最终在将对象插入到它所控制的数组中时使用此方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:59:07.933

您的数组控制器绑定到有序集合（数组）。这就是为什么它用于`insertObject:inEmployeesAtIndex:`在集合末尾添加一个新对象。

`addEmployeesObject:`如果集合是无序的（即集合），将使用该方法。

# scrum - 我们如何处理 Scrum 中的原型设计？

> ID：11190396
> 
> 赞同：1
> 
> 时间：2012-06-25T13:36:59.560
> 
> 标签：scrum

我们是 Scrum 新手，在第一个 sprint 中，我们已经意识到团队成员（开发人员）需要对应用程序中导航应该如何工作（从用户角度）进行一些调查。

因此，在本次调查结束时，我们应该有一个关于某件事应该如何工作的提案或原型。但它实际上不会在应用程序中编码。

所以我的问题是，在 sprint 计划方面，我们应该如何处理这样的事情。我真的不认为它是用户故事，但它是什么，以及它在 Scrum 中是如何处理的？是否需要在计划委员会中添加一些内容以进行调查？

谢谢

保罗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:07:46.923

尽量像对待任何其他需求一样对待原型设计。想想你想要实现什么，创建一个用户故事，定义一个或几个任务，并在 sprint 计划期间对其进行估计。在这种情况下，将开发团队视为用户。一定要把它写在计划板上，并在每日 Scrum 会议中跟踪进度。如果您在估算任务时遇到问题，请将它们定义为“有时间限制的”，即使用固定的时间预算，以防止“无休止”的工作没有结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T15:00:02.063

虽然你得到了解决方案只是想在这里添加一些东西。这种原型设计/研究工作在敏捷世界中被称为[尖峰。](http://blog.agilebuddy.com/2009/11/what-is-a-spike-in-scrum.html)

在这里，团队将一些成员投入到这样的高峰中，只是为了了解用户故事的可行性，并能够帮助整个团队估计用户故事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-13T19:31:44.117

SCRUM 更像是一个组织过程，而不是一个开发模型，比如原型驱动的开发。这意味着可以轻松整合不同的 X 驱动开发模型，例如 TDD 甚至原型驱动 (PDD)。

要将 PDD 合并到 SCRUM 中，可以设置几个原型版本的里程碑。SCRUM 可以正常使用，将每个原型视为一个全新的项目。它适用于复杂的原型。

但是，如果创建原型非常容易，并且一个人可以在一两个冲刺中完成，那么保留原型专家可能会很有用，就像应用专家一样，监控工作团队其他成员检查与最终目标的一致性。然而，原型专家可以迭代地提供新的原型，以实用的方式指导团队其他成员的工作，这与应用专家不同。

# c++ - 从点向量中找到最近的点

> ID：11190400
> 
> 赞同：6
> 
> 时间：2012-06-25T13:37:21.677
> 
> 标签：c++, stl

我有指向一个非常简单的`Point`类的指针向量：

```
class Point{
public:
    float x;
    float y;
    float z;
}; 
```

如何使用 STL 找到离参考点最近的对象？
我需要先对向量进行排序还是有更有效的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T13:55:39.150

排序需要`O(n*log(N))`，因此效率不高。您可以`O(n)`通过迭代元素并记住最佳匹配来做到这一点。

使用`for_each`from `<algorithm>`，您可以定义一个函数来跟踪最近的元素并在 中完成`O(n)`。

或者，您甚至可以使用`min_element`, 也来自`<algorithm>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:10:03.440

这里的基本问题是您多久会针对一组点进行查询。

如果您打算一次在集合中找到一个最近的点，那么@Lucian 是对的：您最好不要对这些点进行排序，然后进行线性搜索以找到正确的点。

如果您要针对同一组点进行相对大量的查询，则值得组织点数据以提高查询速度。@izomorphius 已经提到了一棵 kd 树，这绝对是一个好建议。另一种可能性（诚然，非常相似）是八叉树。在两者之间，我发现八叉树更容易理解。从理论上讲，kd 树应该稍微更有效（平均而言），但我从来没有看到太大的差异——尽管也许使用不同的数据，差异会变得显着。

但是请注意，构建类似 kd 树或 oct 树的东西并不是*非常*慢，因此您不需要针对一组点进行大量查询来证明构建一个点是合理的。一个查询显然不能证明它是合理的，而两个可能也不会 - 但与 Luchian 暗示的相反，O(N log N) （仅作为示例）并不是真的很慢。粗略地说，log(N) 是数字 N 中的位数，所以 O(N log N) 并不比 O(N) 慢很多。反过来，这意味着您不需要特别大量的查询来证明组织数据以加快每个查询的合理性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:11:10.647

你可以尝试使用四叉树 [http://en.wikipedia.org/wiki/Quadtree](http://en.wikipedia.org/wiki/Quadtree)

或类似的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T13:58:21.530

如果你只知道向量中有点，你就不能比线性比较更快。但是，如果您有额外的知识，可以改进很多。例如，如果您知道所有点都是有序的并且位于同一条线上，则存在对数解。

还有更好的数据结构可以解决您的问题，例如[kd 树](http://en.wikipedia.org/wiki/K-d_tree)。它不是 STL 的一部分——您必须自己实现它，但它是用于解决您遇到的问题的数据结构。

# powershell-3.0 - 如何在PowerShell中为Windows组授予对文件夹的写入权限

> ID：11190404
> 
> 赞同：0
> 
> 时间：2012-06-25T13:37:52.893
> 
> 标签：powershell-3.0

在我的场景中，我必须阅读机器的 Windows 组。我只需要为某些 Windows 组授予对文件夹的写权限。

我需要在 Powershell 脚本中实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:40:17.367

嗨，您可以使用下面的脚本来获取 Windows 机器组的列表，我想您需要管理员组中的用户，下面的脚本将列出管理员组中的成员。

```
$compname = hostname    
$computer = [ADSI]("WinNT://" + $compname + ",computer")
$Group = $computer.psbase.children.find("Administrators")
$Group.psbase.invoke("Members") | %{$_.GetType().InvokeMember("Name", 'GetProperty', $null, $_, $null)} 
```

它的输出将如下所示

```
Administrator
Domain Admins 
```

获得所需组后，您可以在我的场景中使用下面的 powershell cmdlet 分配权限，我将写入权限设置为“C:\Data\Learning Products”，我的意思是“域管理员”的“学习产品”文件夹

```
$Acl = Get-Acl "C:\Data\Learning Products"
$Ar = New-Object  system.security.accesscontrol.filesystemaccessrule("Domain Admins","Write","Allow")
$Acl.SetAccessRule($Ar)
Set-Acl "C:\Data\Learning Products" $Acl 
```

设置权限后，您可以通过运行来验证它

```
Get-Acl "C:\Data\Learning Products" | ForEach-Object { $_.Access  } | ft -Wrap 
```

哪个 wpuld 确实表明“域管理员”现在具有对该文件夹的写入权限

磷

```
osh (0310) >  Get-Acl "C:\Data\Learning Products" | ForEach-Object { $_.Access  } | ft -Wrap

   FileSystemRights   AccessControlType IdentityReference           IsInherited    InheritanceFlags    PropagationFlags
   ----------------   ----------------- -----------------           -----------    ----------------    ----------------
 Write, Synchronize               Allow GDNINDIA\Domain                   False                None                None
                                        Admins

        FullControl               Allow BUILTIN\Administrat                True                None                None
                                        ors
                                          ObjectInherit
        FullControl               Allow NT AUTHORITY\SYSTEM                True                None                None

        ReadAndExecute,           Allow BUILTIN\Users                      True     ContainerInherit,              None
        Synchronize                                                                    ObjectInherit

Modify, Synchronize               Allow NT AUTHORITY\Authen                True                None                None
                                        ticated Users 
```

# shell - 无论用户是否在 PowerShell 中登录，如何安排任务？

> ID：11190405
> 
> 赞同：20
> 
> 时间：2012-06-25T13:37:55.997
> 
> 标签：shell, powershell, logged

无论用户是否登录，我都有一个关于如何使计划任务运行的问题。它必须在powershell中完成。我所做的是：

```
$WINDIR/system32/schtasks.exe /create /tn TaskName /sc daily /st 15:05:00 /tr "C:\cygwin\opt\IBM\tpchc\bin\tools\TheFileToRun.bat" 
```

但是我可以提供一个额外的参数来让这个任务无论用户是登录还是注销都运行吗？

如果它不能在 Powershell 中完成，那么可以用另一种脚本语言来完成吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-25T19:42:12.867

您需要指定一个用户（如`/RU system`），但它应该是默认运行是否登录。您可以查看[此链接](http://msdn.microsoft.com/en-us/library/windows/desktop/bb736357%28v=vs.85%29.aspx)以获取所有`schtasks.exe`参数的列表。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-12-08T21:31:45.070

如果你添加

`/RU <username> /RP <password>`

在调用 schtasks.exe 时，您将选择“无论用户是否登录都运行”。

您也可以使用`/NP`相反，它还将为您提供“无论用户是否登录都运行”，以及“不存储密码...”，这将限制可访问的资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-28T19:54:21.327

我有一个可行的解决方案，只需添加以下内容：

```
/RU "NT AUTHORITY\SYSTEM" /RP * 
```

将作为系统运行并忽略密码，在 XP 上测试

# javascript - 数组列的 Javascript max()

> ID：11190407
> 
> 赞同：12
> 
> 时间：2012-06-25T13:37:58.507
> 
> 标签：javascript, math, max

通常当我需要找到一个数组的最大值时，我会使用这个非常简单的代码： `var max = Math.max.apply(Math, array);`

但是，现在我有一个多维数组，其中每一行都有一个 5 列的数组。有没有类似的方法来找到某一列的最大值？现在我正在做：

```
var maxFunc = function(data){
    var max = 0;
    data.forEach(function(value){
        max = Math.max(max, value[0]);
    });
    return max;
}; 
```

我很好奇是否有更漂亮/更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-25T13:59:33.857

我会这样写：

```
Math.max.apply(Math, array.map(v => v[0])); 
```

将`array.map`根据您的选择逻辑转换原始数组，在这种情况下返回第一项。然后将转换后的数组输入`Math.max()`

为避免创建新数组，您还可以将数组缩减为单个值：

```
array.reduce((max, current) => Math.max(max, current[0]), -Infinity) 
```

如您所见，我们需要添加 的初始值`-Infinity`，如果数组为空，则返回该值。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-25T14:02:37.600

这是一个很好的应用程序[`Array.prototype.reduce`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/Reduce)：

```
max = data.reduce(function(previousVal, currentItem, i, arr) {
    return Math.max(previousVal, currentItem[0]);
}, Number.NEGATIVE_INFINITY); 
```

这也避免了如果所有值`data`都小于`0`. 您应该比较`Number.NEGATIVE_INFINITY`而不是`0`.

或者，您可以在减少到最大值之前对数据进行标准化：

```
max = data.map(function (d) {
    return d[0];
}).reduce(function (p, c, i, arr) {
    return Math.max(p, c);
}); 
```

# php - 使用 exec() 过滤 imagick

> ID：11190408
> 
> 赞同：1
> 
> 时间：2012-06-25T13:38:06.130
> 
> 标签：php, filter, exec, imagick

我一直致力于将 PDF 转换为 JPG，为此我安装了 imagick 和 GhostScript。我一直在我的 php 代码中使用 exec() 来进行转换。现在我的问题是，如果输入 pdf 的来源是从 doc->pdf 的转换，那么缩放时图像质量是颗粒状的。另一方面，我需要将图像大小保持在 500kb 以下，所以我不能使用

*   密度200以上。

有没有办法在保存图像之前添加任何类型的过滤器，以便提高 jpg 质量。

这是我的示例代码：

```
 $inputFileName = 'test.pdf';
    $outputFileName  = 'converted.jpg';
    $sourceFile = escapeshellarg( $inputFileName );
    $outputFile = escapeshellarg( $outputFileName );

    $exe = "convert -density 200 -colorspace RGB {$sourceFile } {$outputFile }";           

    $null = "0";

    echo exec( $exe, $null, $result ); 
```

任何帮助，将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:43:57.683

为什么不增加密度和降低质量？例如：

```
$exe = "convert -density 600 -quality 70 -colorspace RGB {$sourceFile } {$outputFile }"; 
```

# clojure - lein 帮助产生 java.lang.reflect.InvocationTargetException

> ID：11190409
> 
> 赞同：1
> 
> 时间：2012-06-25T13:38:08.063
> 
> 标签：clojure, leiningen

运行`lein noir new new-app`并`lein help`导致这个长堆栈跟踪有很多错误。虽然我仍然得到这些，但我试过`lien self-install`了。`rm -rf ~/.m2`

```
Exception in thread "main" java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at jline.ConsoleRunner.main(ConsoleRunner.java:69)
Caused by: java.lang.ExceptionInInitializerError (NO_SOURCE_FILE:0)
    at clojure.lang.Compiler.eval(Compiler.java:5440)
    at clojure.lang.Compiler.eval(Compiler.java:5391)
    at clojure.core$eval.invoke(core.clj:2382)
    at clojure.main$eval_opt.invoke(main.clj:235)
    at clojure.main$initialize.invoke(main.clj:254)
    at clojure.main$script_opt.invoke(main.clj:270)
    at clojure.main$main.doInvoke(main.clj:354)
    at clojure.lang.RestFn.invoke(RestFn.java:457)
    at clojure.lang.Var.invoke(Var.java:377)
    at clojure.lang.AFn.applyToHelper(AFn.java:172)
    at clojure.lang.Var.applyTo(Var.java:482)
    at clojure.main.main(main.java:37)
    ... 5 more
Caused by: java.lang.ExceptionInInitializerError
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at clojure.lang.RT.loadClassForName(RT.java:1578)
    at clojure.lang.RT.load(RT.java:399)
    at clojure.lang.RT.load(RT.java:381)
    at clojure.core$load$fn__4519.invoke(core.clj:4915)
    at clojure.core$load.doInvoke(core.clj:4914)
    at clojure.lang.RestFn.invoke(RestFn.java:408)
    at clojure.core$load_one.invoke(core.clj:4729)
    at clojure.core$load_lib.doInvoke(core.clj:4766)
    at clojure.lang.RestFn.applyTo(RestFn.java:142)
    at clojure.core$apply.invoke(core.clj:542)
    at clojure.core$load_libs.doInvoke(core.clj:4800)
    at clojure.lang.RestFn.applyTo(RestFn.java:137)
    at clojure.core$apply.invoke(core.clj:542)
    at clojure.core$require.doInvoke(core.clj:4881)
    at clojure.lang.RestFn.invoke(RestFn.java:408)
    at leiningen.core$resolve_task.invoke(core.clj:208)
    at leiningen.core$apply_task.invoke(core.clj:258)
    at leiningen.core$_main.doInvoke(core.clj:329)
    at clojure.lang.RestFn.invoke(RestFn.java:410)
    at clojure.lang.AFn.applyToHelper(AFn.java:161)
    at clojure.lang.RestFn.applyTo(RestFn.java:132)
    at clojure.core$apply.invoke(core.clj:542)
    at leiningen.core$_main.invoke(core.clj:332)
    at user$eval42.invoke(NO_SOURCE_FILE:1)
    at clojure.lang.Compiler.eval(Compiler.java:5424)
    ... 16 more
Caused by: java.lang.RuntimeException: java.util.zip.ZipException: error in opening zip file
    at clojure.lang.LazySeq.sval(LazySeq.java:47)
    at clojure.lang.LazySeq.seq(LazySeq.java:56)
    at clojure.lang.RT.seq(RT.java:450)
    at clojure.core$seq.invoke(core.clj:122)
    at clojure.core$apply.invoke(core.clj:540)
    at clojure.core$mapcat.doInvoke(core.clj:2122)
    at clojure.lang.RestFn.invoke(RestFn.java:423)
    at leiningen.util.ns$namespaces_matching.invoke(ns.clj:68)
    at leiningen.help__init.load(Unknown Source)
    at leiningen.help__init.<clinit>(Unknown Source)
    ... 43 more
Caused by: java.util.zip.ZipException: error in opening zip file
    at java.util.zip.ZipFile.open(Native Method)
    at java.util.zip.ZipFile.<init>(ZipFile.java:127)
    at java.util.jar.JarFile.<init>(JarFile.java:135)
    at java.util.jar.JarFile.<init>(JarFile.java:99)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at clojure.lang.Reflector.invokeConstructor(Reflector.java:160)
    at leiningen.util.ns$namespaces_in_jar.invoke(ns.clj:52)
    at clojure.core$map$fn__3699.invoke(core.clj:2096)
    at clojure.lang.LazySeq.sval(LazySeq.java:42)
    ... 52 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:55:16.787

我的标准 Leiningen 固定过程大约是：

*   检查您的互联网连接
*   删除 ~/.m2/repository/*
*   删除 /home/project/path/lib/*
*   莱因升级
*   莱因部门

这个案例看起来好像缺少 lein 所需的文件之一，但诊断这些问题可能很困难。如果您在 irc.freenode.net 上登录 #clojure，它们通常有助于以交互方式解决这类问题

# c++ - ToCString 的标头在哪里，或者如何将参数转换为 cstrings？

> ID：11190410
> 
> 赞同：1
> 
> 时间：2012-06-25T13:38:16.083
> 
> 标签：c++, node.js, add-on

我正在尝试在 NodeJS 插件中使用 ToCString。

```
String::Utf8Value foo_utf8(args[0]->ToString());
const char *foo = ToCString(foo_utf8); 
```

我找不到它的标题，如果我手动将其原型化为：

```
const char* ToCString(const v8::String::Utf8Value& value); 
```

然后我得到一个运行时错误：

```
node: symbol lookup error: /home/chris/Dropbox/cbackend/build/Release/cbackend.node: 
undefined symbol: _Z9ToCStringRKN2v86String9Utf8ValueE 
```

如何将 V8 字符串参数转换为以 null 结尾的 8 位 C 字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:47:05.280

我找到了一种解决方法，因为 ToCString 函数（无论它位于何处）都是微不足道的。只需添加：

```
const char* ToCString(const v8::String::Utf8Value& value) {
  return *value ? *value : "<string conversion failed>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-29T11:55:13.183

按照[文档](https://v8docs.nodesource.com/node-0.10/d4/d1b/classv8_1_1_string_1_1_utf8_value.html)，v8 具有用于 cstr 转换的运算符：

```
Local<Value> value = get_value();     // nan† thing, you can ignore this

v8::String::Utf8Value string(value);
char* str = *string;                  // defined as:        char * operator* () 
const char* const_str = *string;      // defined as:  const char * operator* () const 
```

这适用于 njs v0.10 和 v0.11。

^(†</sup> [https://github.com/rvagg/nan](https://github.com/rvagg/nan))

# css - 提高加载 css 的速度

> ID：11190414
> 
> 赞同：0
> 
> 时间：2012-06-25T13:38:25.700
> 
> 标签：css

我想知道如果您编写这样的代码，浏览器的性能是否会有所不同：

```
<div class="css-1 css-2 css-3 css-4 css-5">

<div class="css-everything"> 
```

如果将所有内容都放在 .css-everything 中，而不是部分 css 类，加载站点会更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:00:01.780

正如你所说的那样，它唯一的*观点问题。*没有其他的。

> **例子**：

考虑你有这样的场景：

**场景：1**

CSS：

```
.button {
    width:100px;
    border-radius: 5px;
}
.blueBG {
    background-color: blue;
}
.redBG {
    background-color: red;
}
.left{
    float: left;
    margin-left: 10px;
}
.right {
    float: right;
    margin-right: 10px;
} 
```

HTML：

```
<a href="stackoverflow.com" class="button red left">StackOverflow</a>
<p class="blue">Text with blue background</p>
<img class="left" src="image.jpg"></img> 
```

现在想想，如果我在这里使用这样的代码：

CSS：

```
.blueButtonLeft {
    width:100px;
    border-radius: 5px;
    background-color: blue;
    float: left;
    margin-left: 10px;
}
.blueButtonRight {
    width:100px;
    border-radius: 5px;
    background-color: blue;
    float: right;
    margin-right: 10px;
 }
 .redButtonLeft {
    width:100px;
    border-radius: 5px;
    background-color: red;
    float: left;
    margin-left: 10px;
}
.redButtonRight {
    width:100px;
    border-radius: 5px;
    background-color: red;
    float: right;
    margin-right: 10px;
 } 
```

HTML：

```
<a href="stackoverflow.com" class="blueButtonLeft">StackOverflow</a>
<!-- Need of defferent code for img and p --> 
```

> 我希望区别很明显。不是吗？

**场景：2**

很抱歉，我需要离开一段时间，以后肯定会回来并对其进行更多编辑。

# apache - 如果附加域用于magento multistore，需要httpd.conf 编辑吗？

> ID：11190415
> 
> 赞同：0
> 
> 时间：2012-06-25T13:38:26.030
> 
> 标签：apache, magento, cpanel, httpd.conf

尝试设置 Magento 多存储，以便第二个存储使用新的/不同的域名。

只是想知道如果我为原始 Magento 安装创建了一个“附加”域，是否需要在 cPanel 环境中编辑 httpd.conf 文件？

我似乎对我可以在网上找到的各种设置多店的方式感到困惑，所以如果有人可以就上述内容提出建议，那就太好了。

如果这应该已经发布在服务器交换站点上，请提前道歉。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:46:05.383

假设您的 Magento 版本 > 1.3，您只需设置一两个环境变量即可根据您的配置触发正确的商店/网站。来自`index.php`：

```
/* Store or website code */
$mageRunCode = isset($_SERVER['MAGE_RUN_CODE']) ? $_SERVER['MAGE_RUN_CODE'] : '';

/* Run store or run website */
$mageRunType = isset($_SERVER['MAGE_RUN_TYPE']) ? $_SERVER['MAGE_RUN_TYPE'] : 'store';

Mage::run($mageRunCode, $mageRunType); 
```

`SetEnv`并且`SetEnvIf`是不错的选择，因为大多数服务器都已`mod_env`启用。

# php - 在 Heroku 上预编译资产

> ID：11190417
> 
> 赞同：1
> 
> 时间：2012-06-25T13:38:35.030
> 
> 标签：php, node.js, heroku, express

在 slug 编译期间构建资产时，网上到处都在谈论 Rails。有没有办法用其他语言（如 Node.js 或 PHP）来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:53:12.277

我有一种情况，我需要使用 Closure-Compiler 编译我的 javascript 文件，并且我创建了一个调用编译器的脚本，当它完成时，它是 call `node app.js`。然后在你的`Procfile`，你需要调用你新创建的脚本。就像是`web: ./compile_and_start_server.sh`

您还可以检查 package.json 中的“prestart”，但我从未尝试过。

[https://npmjs.org/doc/scripts.html](https://npmjs.org/doc/scripts.html)

# java - 如何在spring中定义命名空间

> ID：11190418
> 
> 赞同：0
> 
> 时间：2012-06-25T13:38:37.400
> 
> 标签：java, jsp, el

我一直在 tomcat server 7 上本地工作，现在我将我的项目上传到服务器，但它有 tomcat 6。所以以下内容不起作用：

```
model.addAttribute("category",cat);

<div class="span4">
            <h2>
                Category:
                <c:out value="${category}" />
            </h2>
            <br />
            <c:forEach items="${categoryList}" var="item">
                <div class="alert alert-init">
                    <c:url value="/getInit/${item.getiID()}" var="url" />
                    <a href="${url}"><c:out value="${item.getTitle()}" /></a>
                </div>
            </c:forEach>
        </div> 
```

它给了我以下错误代码：

org.apache.jasper.JasperException: /WEB-INF/views/categoryinitiatives.jsp(34,5) 函数 iIDGetter 在未指定默认命名空间时必须使用前缀

我一直在网上搜索以找到解决此问题的方法，但没有成功。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:07:55.910

如果您想使用 EL 访问 bean 的属性，只需编写`item.title`而不是`item.getTitle()`. 它会自动调用 getter 并可能解决您的问题。

此外，`item.getiID()`不是一个有效的名称。如果您`iID`的 bean 中有一个属性，则必须命名 getter`getIID()`才能使用 EL 访问它。看看[lowerCamelCase](http://en.wikipedia.org/wiki/CamelCase)语法。

# javascript - 使用 javascript 在我的页面中写入数组内容

> ID：11190419
> 
> 赞同：1
> 
> 时间：2012-06-25T13:38:43.863
> 
> 标签：javascript, html, arrays, variables

我是第一次学习 javascript，我有一些疑问：我有两个数组；第一个包含一个人的图像，第二个包含他的个人信息（数组的长度相同，因为它们包含相同数量的人）。我想在我的页面中写入内容，所以打印第一个用户的图像和信息，然后是第二个用户的图像和信息，依此类推......

我该怎么做？

这是代码：

```
function jsonCard() 
{
var richiestaCard = new XMLHttpRequest();

richiestaCard.onreadystatechange = function()
{
    if(richiestaCard.readyState == 4) 
{
        var objectcardjson = {};
        window.arrayCard= []; //creazione dell'array che conterrà le cards
        objectcardjson = JSON.parse(richiestaCard.responseText);

        arrayCard = objectcardjson.cards; //the first array
    }
}
richiestaCard.open("GET", "longanocard.json", true);
richiestaCard.send(null);
}

function jsonEntity()
{
 var richiestaEntity = new XMLHttpRequest();

richiestaEntity.onreadystatechange = function()
{
    if(richiestaEntity.readyState == 4) 
{
        var objectentityjson = {};
        window.arrayEntity= []; //creazione dell'array che conterrà le entity
        objectentityjson = JSON.parse(richiestaEntity.responseText);

        arrayEntity = objectentityjson.cards; //the second array
    }
}
richiestaEntity.open("GET", "longano.json", true);
richiestaEntity.send(null);
}

function displayArrayCards()
{
jsonCard();
jsonEntity();  
var inizioTag = "<img src=";
var fineTag = "\>";

  for(i = 0; i < arrayCard.length; i++) 
 {
        ...
 }
} 
```

我想让图像，然后是信息（对于第一个用户），图像和第二个用户的信息等等都包含在一个 div 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:06:37.767

尝试一些类似的东西

```
 function displayArrayCards()
{
   jsonCard();
   jsonEntity();  

   var wrapper = document.getElementById('div you want to put all of these users into');
   for(i = 0; i < arrayCard.length; i++) 
   {
        var userDiv = document.createElement('div');

        var cardImg = document.createElement('img');
        img.src = arrayCard[i];
        /** Set other attributes for img **/

        var entityDiv = document.createElement('div');
        entityImg.innerHTML = arrayEntity[i];
        /** Set other attributes for div **/

        userDiv.appendChild(cardImg);
        userDiv.appendChild(entityDiv);

        wrapper.appendChild(userDiv);
   }
} 
```

老实说，有很多方法可以做到这一点。以上就是我会做的。

# objective-c - 理解 NSLog 语法

> ID：11190421
> 
> 赞同：15
> 
> 时间：2012-06-25T13:39:02.407
> 
> 标签：objective-c, cocoa, nslog

（我是可可初学者，并且）我想知道为什么我们应该这样做：

```
NSLog(@"this is the variable value: %d",variable); 
```

而不是这样的：

```
[NSLog outputThis:@"this is the variable value: %d" param:variable]; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-25T13:51:34.877

我同意当你刚开始时这很令人困惑。主要原因是 NSLog 方法和 Core Foundation 中的许多其他方法一样，是基于 C 的 API，而不是 Objective-C API。C 风格的函数看起来像这样*myFunction(myParameter1, myParameter2)*。

您可能习惯于 [UIView presentModalViewController:] 等的所有 GUI 内容都基于一个 Objective-C API，带有您在函数中看到的方括号（在 Obj-C 中称为选择器）。Objective-C 语言位于 C 之上，因此您会在大多数应用程序中找到这两种风格。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-25T13:50:32.353

据我了解，NSLog 不是一个 Objective C 函数，而是一个内置于 Cocoa 基础中的 C 函数。因此，它符合带有可变参数的基本 C 函数。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-25T13:53:43.837

`NSLog`可能*看起来*像一个类，但它不是。

> `NSLog`是一个`FoundationKit`将调试语句打印到控制台的函数。它定义在`NSObjCRuntime.h`：

```
void NSLog(NSString format, ...); 
```

这里有大量信息：http: ~~[//cocoadev.com/wiki/NSLog](http://cocoadev.com/wiki/NSLog)~~

**编辑：**正如@fyngyrz 指出的那样，该页面已死。所以[这是 2012 年页面的回程机器版本](https://web.archive.org/web/20121214131714/http://cocoadev.com/wiki/NSLog)

# sql-server - 如何通过 BIDS 向现有维度添加新维度属性

> ID：11190426
> 
> 赞同：7
> 
> 时间：2012-06-25T13:39:49.803
> 
> 标签：sql-server, ssas, ssas-2008

我有一个客户维度。在创建多维数据集和定义维度时，默认属性将与多维数据集创建一起出现。创建维度后，我想添加更多属性。这该怎么做。我尝试使用“添加商业智能”选项，但失败了。有没有办法做到这一点。如果我们删除维度并再次添加维度，我们可以有一个界面作为“选择维度属性”。但是在不删除现有维度的情况下，如何将属性添加到该维度。以下屏幕说明了添加维度属性。如何查看现有维度的此界面。 ![在此处输入图像描述](../Images/e72cae279ecd7de06c299378ff2352eb.png)

单击维度属性选项卡并单击“编辑数据源”选项后，将显示以下屏幕。在这里我们可以在哪里添加属性？ ![在此处输入图像描述](../Images/2161bca680c9f2d1fd13b5b01ceac522.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T18:43:57.200

假设您的 DSV 包含您要添加为属性的列，并且假设您有一个现有维度，则您无法再次打开维度向导以向您的维度添加更多属性。相反，在 Dimension Structure 页面上（如 Diego 的屏幕截图所示），您在最左侧有 Attributes 窗格，其中列出了每个属性，并且您有显示表格图表的 Data Source View。您将右侧图表中的一列拖到左侧的“属性”窗格中。这会创建一个新属性。

![在此处输入图像描述](../Images/6533c66516d399bd4c8eddae991cf7ec.png)

上图显示了将列拖到“属性”窗格中时的光标外观。下图显示了释放鼠标按钮后的“属性”窗格 - 新属性如图所示。

![在此处输入图像描述](../Images/c92211f30262a4bfea6b7e316b7d7b19.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:37:15.260

您必须编辑 DSV。

在“维度结构”、“数据源视图”选项卡上，右键单击任意空白处并选择“编辑数据源视图”。它会将您带到 DSV。在 DSV 上进行您想要的更改，一旦您返回“维度结构”，它们应该可以作为属性选择

![在此处输入图像描述](../Images/a96e18bc4b86f06903fe7519273971ca.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T23:05:06.627

如果维度基于命名查询，@Stacia 的解决方案将起作用。

如果维度基于表格，则“数据源视图”窗口为空，您无法拖动属性。

解决方案是手动添加属性。单击“以列表形式查看属性”并手动添加属性。请参阅下面的链接。这对我有帮助。

[http://technet.microsoft.com/en-us/library/ms174567.aspx](http://technet.microsoft.com/en-us/library/ms174567.aspx)

# sql - 在 Oracle 中将 YYWW 转换为日期

> ID：11190428
> 
> 赞同：1
> 
> 时间：2012-06-25T13:40:01.333
> 
> 标签：sql, date, dayofweek, week-number

我在 oracle 11g 中将周数转换为日期时遇到了一些麻烦。问题是我有两列 *id|week_code* 并且我想将其转换为本周的第一天（星期一）。因此，假设我有*1202*，即*2012 的第二周*，因此结果将是：*09-January-2012*。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:33:44.793

尝试使用这种方法：（未测试）。

```
with date_wk as (
       select to_date('01/01/'||'20'||substr(%input%,1,2), 'MM/DD/
RRRR') + rownum - 4 dt
        from dual
        connect by level <= 366
),
wk_dt as (
        select dt, to_number(to_char(dt, 'iw')) wk_of_yr

        from date_wk
)
select min(dt)
from wk_dt
where wk_of_yr = substr(%input%,3,2) 
```

获取您想要的日期，并将其格式更改为“DD-MONTH-YYYY”。

# java - 在 Eclipse 中调试时停止代码执行而不终止线程

> ID：11190433
> 
> 赞同：8
> 
> 时间：2012-06-25T13:40:17.407
> 
> 标签：java, eclipse, debugging

有没有办法在程序遇到断点时停止调试（即我不想在它之后执行代码）而不停止整个应用程序服务器（我正在用 Java 编写应用程序，服务器是 JBoss）？

我只知道如何停止调试的一种方法 - 标题为 Terminate 的红色按钮会关闭服务器。那么还有别的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-10-26T11:58:43.613

在调试时，[上下文菜单](https://i.stack.imgur.com/xdKY1.png)让您强制返回。这会立即离开该方法并将您带回调用者。也可以使用`Alt`++ `Shift`。`F`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:00:07.340

如果您的意思是“我不希望执行断点之后的代码”，那么您可以使用[条件断点](https://stackoverflow.com/posts/7194326/edit)`return`从该方法执行 a 。

（请注意，您可以在条件断点中执行您喜欢的任何代码。它不必只是一个条件。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T13:57:23.763

您可以点击断开连接按钮。见附图。这将在不停止服务器的情况下继续执行并停止调试。 ![在此处输入图像描述](../Images/2f3d9d5ed5ccf24b3cabe695809bc677.png)

# php - 临时表和foreach

> ID：11190435
> 
> 赞同：0
> 
> 时间：2012-06-25T13:40:18.420
> 
> 标签：php, mysql

```
$date['"01.06.2012"'] = '2012-06-01'; 
$date['"01.05.2012"'] = '2012-05-01'; 
$date['"01.04.2012"'] = '2012-04-01';
$date['"01.03.2012"'] = '2012-03-01';
$date['"01.02.2012"'] = '2012-02-01';
$date['"01.01.2012"'] = '2012-01-01';     

foreach($date as $month => $actual_date)
{  /* start foreach loop */
$query = "select Player, SUM(points) AS score from rankings WHERE
`drop_date` > '$actual_date' 
AND `drop_date` <= DATE_ADD('$actual_date',  INTERVAL 1 YEAR) 
GROUP BY Player
ORDER BY SUM(sa_points) LIMIT 0,5";
$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result)){
echo $row['player'];
echo $row['score']; }

} /* end foreach loop */ 
```

现在我只想向这个结果表添加另一个查询，我已经尝试过`create temporary table`但不知道根据 foreach 循环将它放在哪里，并且不断得到解析错误或最后的`$actual_date`结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:10:57.203

这是你想要达到的目标吗？

```
$date['"01.06.2012"'] = '2012-06-01'; 
$date['"01.05.2012"'] = '2012-05-01'; 
$date['"01.04.2012"'] = '2012-04-01';
$date['"01.03.2012"'] = '2012-03-01';
$date['"01.02.2012"'] = '2012-02-01';
$date['"01.01.2012"'] = '2012-01-01';     

mysql_query('CREATE TEMPORARY TABLE results (player varchar(100), score int)');

foreach($date as $month => $actual_date)
{  /* start foreach loop */

    $query = "insert into results (player, score) 
    select Player, SUM(points) AS score from rankings WHERE
    `drop_date` > '$actual_date' 
    AND `drop_date` <= DATE_ADD('$actual_date',  INTERVAL 1 YEAR) 
    GROUP BY Player
    ORDER BY SUM(sa_points) LIMIT 0,5";
    mysql_query($query) or die(mysql_error());
} /* end foreach loop */

$result = mysql_query('select * from results') or die(mysql_error());
while($row = mysql_fetch_array($result)){
    echo $row['player'];
    echo $row['score']; 
} 
```

# java - 通过 xpath 使用 SAX 解析 XML

> ID：11190442
> 
> 赞同：1
> 
> 时间：2012-06-25T13:40:53.893
> 
> 标签：java, xml, xml-parsing, sax, saxparser

我正在尝试通过使用 xpath 使用 SAX 进行 XML 解析。但是当我尝试获取多个节点集的数据时，它没有给出。

```
 import java.io.File;
  import java.io.FileInputStream;
  import java.io.IOException;

  import javax.xml.xpath.XPath;
  import javax.xml.xpath.XPathConstants;
  import javax.xml.xpath.XPathExpression;
  import javax.xml.xpath.XPathExpressionException;
  import javax.xml.xpath.XPathFactory;

  import org.apache.xpath.NodeSet;
  import org.w3c.dom.NodeList;
  import org.xml.sax.InputSource;

  public class XPathEvaluator{

   public void evaluateDocument(File xmlDocument){

    try{
 XPathFactory factory=XPathFactory.newInstance();
 XPath xPath=factory.newXPath();
 InputSource inputSource=new InputSource(new FileInputStream(xmlDocument));
 XPathExpression         

  xPathExpression=xPath.compile("/catalog/journal/article[@date='January-2004']/title");
String title=xPathExpression.evaluate(inputSource);
System.out.println("Title: "+ title);

 inputSource=new InputSource(new FileInputStream(xmlDocument));
String publisher=xPath.evaluate("/catalog/journal/@publisher", inputSource);
System.out.println("Publisher:"+ publisher);    

String expression="/catalog/journal[@title='Java Technology']/article";
NodeSet nodes = (NodeSet) xPath.evaluate(expression, inputSource,XPathConstants.NODESET);    
NodeList nodeList=(NodeList)nodes;   
System.out.println("node List"+nodeList);
  }
  catch(IOException  e){}
 catch(XPathExpressionException e){}

 }

 public static void main(String[] argv){

 XPathEvaluator evaluator=new XPathEvaluator();

 File xmlDocument=new File("e://catalog-modified.xml");
 evaluator.evaluateDocument(xmlDocument);

 }

  } 
```

我的 catalog-modified.xml 如下

```
 <?xml version="1.0" encoding="UTF-8"?>
    <catalog xmlns:journal="http://www.w3.org/2001/XMLSchema-Instance"> 
        <journal:journal title="XML" publisher="IBM  developerWorks">       
    <article journal:level="Advanced"   date="February-2003">   
              <title>Design XML Schemas Using UML</title>          
              <author>Ayesha Malik</author>   
    </article>     
</journal:journal> 
 <journal title="Java Technology" publisher="IBM     
      developerWorks">             
 <article level="Intermediate"  date="January-2004" 
      section="Java Technology">                      
   <title>Service Oriented Architecture Frameworks
       </title>                  
       <author>Naveen Balani       
       </author>               
    </article>  
    <article level="Advanced" date="October-2003"  section="Java Technology">                 
       <title>Advance DAO Programming</title>                   
      <author>Sean Sullivan</author>               
   </article>    
    <article level="Advanced" date="May-2002"  section="Java Technology">     
       <title>Best Practices in EJB Exception Handling   </title>          
       <author>Srikanth Shenoy      
       </author>      
     </article> 
</journal> 
```

如果我尝试调用它，请不要为此显示任何节点集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:37:03.043

journal 元素位于命名空间中。您不能忽略命名空间。请阅读有关 XPath 和名称空间的信息——在这个论坛上有数千篇关于该主题的帖子。

# java - 关于曲线拟合和插值的推荐书籍？

> ID：11190445
> 
> 赞同：1
> 
> 时间：2012-06-25T13:41:16.653
> 
> 标签：java, statistics, interpolation, curve-fitting

我正在开发一个 java 应用程序，我需要在其中进行一些曲线拟合和插值。我没有这方面的理论统计背景。如果有人可以推荐涵盖该主题的好书，我将不胜感激，但不是很高级的书。如果这本书提供了java中的编码示例，那就更好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:53:34.440

我不确定要读什么书，但一个好的起点是研究适合[Spline](http://en.wikipedia.org/wiki/Spline_%28mathematics%29)。然而，这种技术的变化被用来模拟尽可能接近的曲线。例如，牙医可能会发现这种技术非常有用。

如果您正在寻找预测能力，[这](http://introcs.cs.princeton.edu/java/97data/LinearRegression.java.html)是一个如何实现线性回归的示例。根据您的最终目标，这将是另一个不错的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:17:40.033

不知道你的数学能力很难推荐，但如果你想理解这些概念，你至少需要掌握线性代数。我会推荐这本书[http://www-maths.mcs.st-and.ac.uk/~gmp/gmptheo.html](http://www-maths.mcs.st-and.ac.uk/~gmp/gmptheo.html). 它描述了插值和近似，并有一些关于样条的部分，您可能会发现它们很有用。它针对的是本科数学水平——有些章节可能对你没有用，但如果没有别的，它至少会突出你需要知道的概念，以便理解你想知道的事情。如果你觉得这太高级了（如果你没有 A-level 数学或同等学历），那么也许可以考虑线性代数的介绍性文本，因为这可能是要理解的最重要的概念，并且是近似和插值理论的核心。网上也可能有很多很好的教程。

# lync - Microsoft Lync Messenger 下载大小？

> ID：11190448
> 
> 赞同：0
> 
> 时间：2012-06-25T13:41:40.787
> 
> 标签：lync

我正在尝试下载 microsoft lync messenger。下载大小约为 1.5 GB。这是信使的正确尺寸吗？

或者这个程序有没有更小尺寸的精简版？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:14:39.700

那是相当大的。[如果您只想要试用客户端，您可以在](http://www.microsoft.com/en-us/download/details.aspx?id=10400)[此处](http://www.microsoft.com/en-us/download/details.aspx?id=5484)找到 32 位版本和 64 位版本。两者都是〜50mb。

# ruby - 为正则表达式匹配编写 gsub 的完美方式？

> ID：11190449
> 
> 赞同：1
> 
> 时间：2012-06-25T13:41:40.863
> 
> 标签：ruby, regex

我正在尝试为正则表达式匹配编写 gsub，但我想有一种更完美的方法可以做到这一点。

我的方程式：

```
ref.gsub(ref.match(/settings(.*)/)[1], '') 
```

这样我就可以拿下这个`settings/animals`，然后回来就好了`settings`。

但如果`settings`为空怎么办？比我`[1]`预期的失败。

那么假设有时`settings`不匹配，怎么能写出上面的语句呢？

因此，基本上，如果它找到单词, `settings`，而不是摆脱它之后的任何东西。但如果没有，不用担心。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T13:49:31.020

为什么不做最简单可行的事情呢？

```
ref.gsub(/(settings)(.*)/, '\1') 
```

# r - R按日期对数据帧进行排序

> ID：11190450
> 
> 赞同：1
> 
> 时间：2012-06-25T13:41:41.983
> 
> 标签：r, dataframe, time-series, finance, stockquotes

我正在研究一个`data.frame`由股票每年股息组成的 R（我有 60 列股票和行中的通常日历）。支付股息时，我有这个数字，否则有一个`NA`。

基本上，这就是我的 Data.frame 的样子

```
 BARC LN      BARN SE  BAS GY  BATS LN 
1999-01-01      0.26       NA      NA
1999-01-02       NA       0.56     0.35     NA
1999-01-03       NA        NA      NA       NA
2000-01-04       NA        NA      0.40     NA
1999-01-05      0.23      0.28     NA       NA
2001-01-06       NA        NA      NA       NA
2001-01-07      0.85       NA     0.15      NA 
```

我想获得每只股票每年支付的股息金额，以计算股息收益率，最后得到一个数据；如下图所示：

```
 BARC LN   BARN SE  BAS GY  BATS LN 
   1999       NA        NA      NA       NA
   2000       NA        NA      NA       NA
   2001       NA        NA      NA       NA 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:35:18.743

因此，假设您的数据位于 data.frame 中，就像您在上面发布的那样`div`：

```
div <- structure(list(barc.ln = c(0.26, NA, NA, NA, 0.23, NA, 0.85), 
    barn.se = c(NA, 0.56, NA, NA, 0.28, NA, NA), bas.gy = c(NA, 
    0.35, NA, 0.4, NA, NA, 0.15), bats.ln = c(NA, NA, NA, NA, 
    NA, NA, NA)), .Names = c("barc.ln", "barn.se", "bas.gy", 
"bats.ln"), row.names = c("1999-01-01", "1999-01-02", "1999-01-03", 
"2000-01-04", "1999-01-05", "2001-01-06", "2001-01-07"), class = "data.frame") 
```

正如您所做的那样，您可以从您的`row.names`:

```
div$years <- as.POSIXlt(row.names(div))$year + 1900 
```

`plyr`和包在`reshape2`这里运行良好，我认为使代码特别清晰。具体来说，我将使用`melt`使数据变长，然后`ddply`分成组和`sum`红利：

```
library(plyr)
library(reshape2)
div.melt <- melt(div, id.vars='years')
div.sum <- ddply(div.melt, 
                 .(years, variable), 
                 summarise, 
                 dividend = sum(value, na.rm=TRUE))

> div.sum
 years variable dividend
1   1999  barc.ln     0.49
2   1999  barn.se     0.84
3   1999   bas.gy     0.35
4   1999  bats.ln     0.00
5   2000  barc.ln     0.00
6   2000  barn.se     0.00
7   2000   bas.gy     0.40
8   2000  bats.ln     0.00
9   2001  barc.ln     0.85
10  2001  barn.se     0.00
11  2001   bas.gy     0.15
12  2001  bats.ln     0.00
> 
```

然后，您可以使用`reshape2`调用中的另一个函数来`cast`“宽”格式化您的数据：

```
> dcast(div.sum, years ~ variable, value.var='dividend')
  years barc.ln barn.se bas.gy bats.ln
1  1999    0.49    0.84   0.35       0
2  2000    0.00    0.00   0.40       0
3  2001    0.85    0.00   0.15       0
> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:30:36.503

我认为你可以很容易地使用 by() 做到这一点。这就是我的做法。我已将每个块以及每个块下方的说明放在一起。

```
dividends <- data.frame(barc_ln=c(0.26,NA,NA,NA,0.23,NA,0.85),
                        barn_se=c(NA,0.56,NA,NA,0.28,NA,NA),
                        bas_gy=c(NA,0.35,NA,0.40,NA,NA,0.15),
                        bats_ln=c(NA,NA,NA,NA,NA,NA,NA),
                        row.names=c("1999-01-01","1999-01-02","1999-01-03","2000-01-04","1999-01-05","2001-01-06","2001-01-07")) 
```

这只会创建您提供的原始数据框。

```
dividends[,"dates"] <- as.Date(row.names(dividends))
dividends <- dividends[order(dividends[,"dates"]),]
dividends[,"year"] <- format(dividends$dates,"%Y") 
```

这将获取行名称日期，然后将它们转换为数据框中的新列（“日期”）。然后，我们按日期排序数据框（不一定需要，但我发现它更直观）并使用格式提取年份（作为一个字符，请注意）。

```
div_output <- data.frame(row.names=unique(dividends$year)) 
```

接下来，我创建将接收数据的输出数据框。我对 year 变量使用 unique() 函数来获取唯一的年份向量。它们已经被订购（订购数据框的一个优点）。

```
for(x in 1:4) {
    div_output[,x] <- by(dividends[,x],INDICES=dividends$year,FUN=sum,na.rm=TRUE)
}
names(div_output) <- names(dividends)[1:4] 
```

使用一个简单的循环，我们只需遍历每一列并应用 by() 函数。变量是列，索引是年份，我们只使用 sum 函数。我在 na.rm=TRUE 上进行标记，以便您获得实际数据而不是 NA。

```
print(div_output)

     barc_ln barn_se bas_gy bats_ln
1999    0.49    0.84   0.35       0
2000    0.00    0.00   0.40       0
2001    0.85    0.00   0.15       0 
```

这就是我得到的输出。

# php - 仅为工作日生成随机日期

> ID：11190455
> 
> 赞同：1
> 
> 时间：2012-06-25T13:42:14.323
> 
> 标签：php, date, random

我正在尝试生成随机日期，即当天后 10 到 30 天的任何一天，并且生成的日期不应该是周六和周日。我搜索了很多，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:32:16.673

尝试：

```
repeat
  day <- pickRandomDay(10 ... 30)
until (not satOrSun(day))
return day 
```

您不会在循环中获得太多次。

# android - 内存泄漏，单实例

> ID：11190457
> 
> 赞同：1
> 
> 时间：2012-06-25T13:42:16.687
> 
> 标签：android, android-layout

我有一些活动可以在[这个 lib](https://github.com/thest1/LazyList/blob/master/src/com/fedorvlasov/lazylist/ImageLoader.java)的帮助下显示图像。问题是应用程序内存不足。我试图 gc.clean()，空引用，在 imageloader 对象上调用 clear，但徒劳无功。

在 MAT 中，我发现我有多个相同活动的对象，如果我没记错的话，这是默认行为。我使用 singleInstance 来抑制多个实例，它有助于解决内存泄漏。

现在，由于 singleInstance，我在导航方面遇到了麻烦。您认为我应该继续使用 singleInstance 还是尝试使用多个实例修复内存泄漏？

这是 ImageView gc 根检查： ![在此处输入图像描述](../Images/59e769cb694ff08a82bfdabe91d2ee62.png)

升级版：

```
 Bitmap bitmap=null;
        URL imageUrl = new URL(url);
        HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
        conn.setConnectTimeout(30000);
        conn.setReadTimeout(30000);
        conn.setInstanceFollowRedirects(true);
        InputStream is=conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        os.close();
        bitmap = decodeFile(f);
        return bitmap;

    ImageView imageView = (ImageView) convertView;
    if(convertView == null){
        imageView = new ImageView(_currentActivity);
    } 
```

UPD2（导航策略）：

我有一个恒定的标题，带有开始家庭活动（带画廊）和个人资料活动的按钮；其次，有一个子标题，它还包含 3 个按钮，这些按钮指向另外 3 个带有列表视图的活动（由图像视图 + 标签组成）。

这些标题、子标题元素可用于应用程序中的每个活动；链接按钮除了：

```
startActivity(new Intent(getActivity(), MainActivity.class)); 
```

或者

```
Intent activityIntent = new Intent(getActivity(), SomeActivityWithListViewInside.class);
// passing some data like list id
activityIntent.putExtra("list_id", listId);
startActivity(activityIntent); 
```

那么，这些活动实例是由那些 startActivity 调用引起的 - 你认为我应该使用 singleTop 或任何其他意图参数来避免这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:17:35.520

我强烈建议不要使用活动的奇怪标志。我也总是在使用 android API 时遇到导航问题（并且仍然存在，即使是片段）。

相反，我建议您解决内存问题。

您应该观看有关内存泄漏的**[视频](http://www.google.com/events/io/2011/sessions/memory-management-for-android-apps.html)**，并阅读**[有关位图](http://developer.android.com/training/displaying-bitmaps/index.html)**的视频。

简而言之，这里有一些提示：

1.  尽量避免静态引用，尤其是当它们引用上下文时。

2.  尽量避免引用上下文。

3.  如果必须引用 context ，请考虑使用 ApplicationContext。

4.  记得在关闭活动时关闭线程和对话框（如果需要）。尝试在不再需要服务时关闭它们。

5.  比非静态内部类更喜欢静态内部类（因为它们引用了包含类）。

6.  请记住，匿名类也有对包含类的引用。

7.  小心你缓存的东西。尽量避免缓存包含上下文引用的类，例如视图和可绘制对象。

8.  如果可能，尝试使用 softReference 和/或 weakReference 来引用引用 context 的“危险”对象。

9.  在 android API 10 及更低版本上，请记住回收您的位图。他们通常会占用大量内存。

10.  如果一个活动占用了太多内存并且您从它转到另一个活动，请考虑完成它并在需要时重新创建它，而不是回到它的旧实例。

11.  如果您使用任何第三方库或使用本机代码（例如使用 NDK），请不要忘记在不需要时释放其内存。dalvik 不会帮你太多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:13:56.847

您不应该使用 singleInstance 启动模式。您需要使用标准和/或 singleTop 启动模式让您的导航正常工作。如果您发现您的活动有多个实例，但您没有预料到，那么您的导航有问题。拥有多个活动实例会保留所有视图和图像，这可能是导致内存不足问题的原因。

使用您预期的导航以及您如何管理它来更新您的帖子，也许我们可以帮助您解决这个问题。

**编辑：回复海报的 UPD：**

我不知道你在哪里设置`_currentActivity`，但这可能是你的问题。当您在适配器中创建视图时，您应该始终使用适配器的上下文（在创建时设置）。所以试试这个：

```
ImageView imageView = (ImageView) convertView;
if(convertView == null){
    imageView = new ImageView(getContext());
} 
```

**编辑：回复海报的 UPD2：**

您需要检查您的导航以确保当用户选择您的标题或子标题中的一个按钮时，您的活动堆栈中没有多个活动实例（如果这不是您想要的）。如果您的活动使用大量图像空间（位图等），那么您需要确保没有多个实例。您可以重新考虑您的导航，或者您可以使用 singleTop、clearTop、reorderToFront 等的组合，这样您就不必继续创建活动实例，而只需在活动堆栈中重新排列它们以获得所需的导航行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:06:26.863

在创建视图时将活动作为上下文传递是不好的：这会阻止活动被“释放”。此外，您可能希望将位图缩小到您真正需要的大小。

# javascript - Jquery 切换隐藏/显示导航元素

> ID：11190458
> 
> 赞同：0
> 
> 时间：2012-06-25T13:42:17.287
> 
> 标签：javascript, jquery

在 Josh Mein 对 Javascript 隐藏/显示菜单的大力帮助之后，该菜单可以 100% 工作，尽管我希望在页面加载时菜单处于“隐藏状态”。这是 jsFiddle 链接： http: [//jsfiddle.net/8y7Sr/3/](http://jsfiddle.net/8y7Sr/3/) ...当您加载页面时，会显示菜单，当您单击“切换菜单”时，它将隐藏导航。那是完美的但是我怎样才能做到这一点，当你加载页面时，菜单已经处于隐藏状态，当你点击“切换菜单”时，导航会向上滑动？Josh 提到，为了做到这一点，我必须注释掉`$("#stickyfooter").show();`并添加`class="show_hide"`到 div ID stickyfooter 。我一直在摆弄，但我似乎无法让它工作。我很可能做错了什么，但谁能澄清 Josh 的意思？吨？提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:50:24.903

为了对现有代码进行最小的更改，只需以编程方式立即触发现有的点击事件：

```
$('.show_hide').click(function(){
   // your existing function code here

}).click();    // <---- add this bit 
```

演示：http: [//jsfiddle.net/8y7Sr/8/](http://jsfiddle.net/8y7Sr/8/)

或者，删除第一行代码：

```
$("#stickyfooter").show();        // <--- delete this line 
```

将类更改为`#sticky_footer_title`：

```
bottom: 0px; 
```

并将`#stickyfooter`班级更改为：

```
display: none; 
```

演示：http: [//jsfiddle.net/8y7Sr/11/](http://jsfiddle.net/8y7Sr/11/)

（顺便说一句，同时拥有一个 id 和一个名为“stickyfooter”的类有点令人困惑。对我来说，如果包含的 div 有`id="stickyfootercontainer"`而不是`class="stickyfooter"`.）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:36:25.550

稍微简化一点

## **HTML**

```
<div class="stickyfooter">
    <div id="sticky_footer_title">
        <a href="#">Toggle Menu &#x25BC;</a>
    </div>
    <div id="stickyfooter">
        <ul id="footer_menu">
            <li class="imgmenu"><a href="#"></a></li>
            <li><a href="#intro">Intro</a></li>
            <li><a href="#photos">Photos</a></li>
        </ul>
    </div>
</div> 
```

## **JAVASCRIPT**

```
var showMenu = $("#stickyfooter");
var menuTrigger = $("#sticky_footer_title");

menuTrigger.find("a").toggle(
    function() {
        $(this).parent().animate({ bottom: '0px' }, "slow");
        showMenu.slideToggle("slow");
    },
    function() {
        $(this).parent().animate({ bottom: '40px' }, "slow");
        showMenu.slideToggle("slow");
    }
); 
```

示例：http: [//jsfiddle.net/7YMPK/](http://jsfiddle.net/7YMPK/)

# c# - 枚举所有可能的字符

> ID：11190461
> 
> 赞同：2
> 
> 时间：2012-06-25T13:42:26.423
> 
> 标签：c#, .net, char

如何枚举 System.Char 的所有可能实例？例如，我需要查看哪些 System.Char.IsSymbol 返回 true。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T13:52:38.210

```
for (int i = char.MinValue; i <= char.MaxValue; i++) {
    char c = Convert.ToChar(i);
    if (!char.IsSymbol(c)) {
        //kung-fu!
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T13:53:19.200

linq-y 回答给你符号字符：

```
var chars = Enumerable.Range(0, char.MaxValue+1)
                      .Select(i => (char) i)
                      .Where(c => char.IsSymbol(c))
                      .ToArray(); 
```

确实应该归功于Skeet爵士，[这里](https://stackoverflow.com/a/887448/1220971)的答案是基于他的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T13:53:26.773

```
for (var c = System.Char.MinValue; c != char.MaxValue; ++c)
    DoSomething(c);
DoSomething(char.MaxValue); 
```

# android - 来自 ThreadPool 线程的 SendBroadcast 阻塞调用

> ID：11190462
> 
> 赞同：1
> 
> 时间：2012-06-25T13:42:34.143
> 
> 标签：android, android-intent

我在服务中的线程池中有一个线程，它可以做很多事情。最后，它将一些数据插入提供程序并发送广播以通知 GUI 有关新数据的信息。

经常发送和接收 1-3 个广播，然后不再接收广播。当我查看线程堆栈跟踪时，所有线程都位于 sendBroadcast 的系统方法中。

Stacktrace 从不返回线程：

> BinderProxy.transact(int, Parcel, Parcel, int) line: 不可用 [native method]
> ActivityManagerProxy.getProviderMimeType(Uri) line: 3296
> ContextImpl$ApplicationContentResolver(ContentResolver).getType(Uri) line: 231
> Intent.resolveType(ContentResolver) line ：3754
> Intent.resolveTypeIfNeeded（ContentResolver）行：3776
> ContextImpl.sendBroadcast（Intent）行：969
> Application（ContextWrapper）.sendBroadcast（Intent）行：301

接收者注册：

```
<receiver android:name=".gui.MeasurementReceiver">
  <intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <data android:scheme="content" android:host="compy.product.providers.measurement"/>
  </intent-filter>
</receiver> 
```

广播发送：

```
context.sendBroadcast(new Intent(android.content.Intent.ACTION_VIEW).
                      setData(Uri.withAppendedPath(compy.content.Intent.URI_channel, ""+id ))); 
```

现在对于真正有趣的部分，上述工作在带有 ICS 的 Galaxy Nexus 和 Galaxy Note pre ICS 上没有任何问题。但在带有 ICS 的 Galaxy Note、Galaxy SII 和 Galaxy SIII 上以上述方式失败。

在 Galaxy Nexus 上可能相关的注释上，提供程序启动一次或两次。在有问题的手机上，它开始处理所有查询。我们也没有找到这种行为的任何原因。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:20:54.247

好吧，事实证明这真的很简单......

我们在 Mainfest 文件中双重注册了 ContentProvider ......

因此，如果您有疯狂的错误，请检查您的清单。我不知道为什么会破坏广播。

更多信息（编辑）：

在大多数情况下，您尝试对 Provider 进行操作时，LogCat 中的“Loading Provider 'your class name'”是这个问题的提示。否则，这似乎是一条非常罕见的消息。我们只在网上找到了一些对它的引用。

所以最后的相关说明是最重要的......

# jquery - XMLHttpRequest POST 调用不起作用

> ID：11190464
> 
> 赞同：0
> 
> 时间：2012-06-25T13:42:44.743
> 
> 标签：jquery, ajax, post, xmlhttprequest, aem

```
I'm using XMLHttpRequest POST to send data to a jsp. But the jsp is not invoked. Here is my code. 
```

JS 方法在按钮单击时被调用

```
<form action="">
<div><input type="button" value="POST DATA"
    onclick=test();
/></div></form> 
```

JS 方法做一个 http POST -

```
<script>
function test() {
        var xmlHttpRequest = new ActiveXObject('Msxml2.XMLHTTP');
        xmlHttpRequest.open("post",
                "http://localhost:4502/content/myTest.html", true);
        xmlHttpRequest.setRequestHeader("Content-Type",
                "application/x-www-form-urlencoded");
        xmlHttpRequest.onreadystatechange = function() {
            getResult(xmlHttpRequest)
        };
        try {
            xmlHttpRequest.send("username=john");
        } catch (e) {
            alert("error" + e);
        }
    }
    function getResult(xmlHttpRequest) {
        if (xmlHttpRequest.readyState == 4) {
            if (xmlHttpRequest.status == 200) {
                alert("ok");
            } else {
                alert("error" + xmlHttpRequest.status);
            }
        }
    }
</script> 
```

myTest.jsp 将 POST 请求写入文本文件 -

```
 <%
    FileOutputStream fos = new FileOutputStream("D:/test.txt");
    PrintWriter pw = new PrintWriter(fos);
    pw.println(request.getParameter("username"));
    %> 
```

myTest.jsp 没有被调用，但我得到了 OK 警报。如果我尝试使用 http get 而不是 post 并将参数附加到 uri，它可以工作。我正在使用 IE8。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:53:45.500

您是否尝试过使用**[jQuery](http://api.jquery.com/jQuery.post/)**发布您的帖子？

在使用之前，您需要在页面中包含 jQuery 库。

使用 jQuery 还将使您的代码跨浏览器兼容，并且该链接上的示例更易于理解。如果您还想对请求进行更多控制，还有其他[jQuery 选项。](http://api.jquery.com/jQuery.ajax/)我强烈推荐它——对于像这样的任务和许多其他任务，它会让你的生活更简单，你的编码更愉快！

# c# - asp.net 进度加载

> ID：11190467
> 
> 赞同：2
> 
> 时间：2012-06-25T13:43:03.947
> 
> 标签：c#, asp.net, loading

由于显示了大量数据，我有一个页面需要几秒钟才能加载。

我怎样才能让它播放 .gif 动画，直到数据准备好显示在表格中，而不是什么都不显示？

如何设置表格/内容仅在加载完成后显示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T13:50:21.757

您可以使用 asp.net ajax 控件，例如 ScriptManager + UpdateProgress + UpdatePanel。这里有一个例子

```
<form id="form1" runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server" />
        <asp:UpdateProgress runat="server" id="PageUpdateProgress">
            <ProgressTemplate>
                Loading...
            </ProgressTemplate>
        </asp:UpdateProgress>
        <asp:UpdatePanel runat="server" id="Panel">
            <ContentTemplate>
                <asp:Button runat="server" id="UpdateButton" onclick="UpdateButton_Click" text="Update" />
            </ContentTemplate>
        </asp:UpdatePanel>
    </form>

protected void UpdateButton_Click(object sender, EventArgs e)
{
    System.Threading.Thread.Sleep(5000);
} 
```

# powershell - PowerShell 集-QADGroup

> ID：11190468
> 
> 赞同：0
> 
> 时间：2012-06-25T13:43:04.850
> 
> 标签：powershell, quest

我已经完成了以下工作：

```
get-QADGroup -SearchRoot 'ex.local/' -LdapFilter '(samaccountname=test_group*)' -GroupType 'Distribution' -IncludedProperties "displayName", "mailNickname", "name", "mail" | foreach-object {
    Set-QADGroup $_ –displayName ("new_displayname")
} 
```

我无法使以下属性起作用：/

```
mail
mailNickname
name
cn
dn 
```

这背后的原因是因为我们将重命名 AD 中的每个对象（数千个组），并且我需要更改所有属性。

到处都在阅读 Quest，但是他们只以 displayName 为例，没有更高级的了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:07:52.147

您可以使用参数设置一些值，例如 Email 和 DisplayName。您可以使用 ObjectAttributes 参数设置没有相应参数的属性。它采用一个哈希表，其中键名是 LDAP 属性名。

```
Get-QADGroup -SearchRoot 'ex.local/' -SamAccountName test_group* -GroupType Distribution -IncludedProperties displayName,mailNickname,name,mail | Foreach-Object {
    Set-QADGroup $_  -DisplayName "new_displayname" -Email "newemail" -ObjectAttributes @{attrib1="new_attrib1"; attrib2="new_attrib2"}
} 
```

要重命名对象，请使用`Rename-QADObject`cmdlet

# android - Android应用程序在运行时突然崩溃？

> ID：11190469
> 
> 赞同：30
> 
> 时间：2012-06-25T13:43:07.687
> 
> 标签：android, android-ndk

**我的应用程序做什么？** 我正在开发的应用程序是一个典型的客户端服务器应用程序，它使用 Wifi 与 Windows 服务器通信。该应用程序有多个活动，并且确实有大量的内存和 CPU 要求，即对 speex 编码/解码的本机调用。

**我的问题是什么？** 问题是应用程序在正常工作时突然重新启动。有时在正常工作时突然我看到（在 logcat 中）应用程序类的构造函数（扩展 API 应用程序类的类）被调用。这会使我的应用程序崩溃，因为所有全局数据都存储在 Application 类本身中。

**我做了什么 ？** 让我想到的第一件事是可能是 Android 觉得他们的内存不足，所以它终止了我的应用程序，然后自动重新启动它。所以我实现`onLowMemory()`了Application类。但令我惊讶的是，它从未被调用..

**主要问题是什么？**主要问题是`Nothing is printed on LogCat`。看起来即使是 Android 本身也不知道为什么要重新启动我已经运行的应用程序？

这次突然重启的可能原因是什么？我怎样才能避免这种情况？

我正在开发 Galaxy Y，API 版本是 2.3.6。我的 AndroidManifiest.xml 看起来像

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="some.package.MyApp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:maxSdkVersion="15"
        android:minSdkVersion="10"
        android:targetSdkVersion="10" />

    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.RECORD_VIDEO" />

    <uses-feature android:name="android.hardware.camera" />
    <uses-feature android:name="android.hardware.camera.autofocus" />

    <application
        android:name="some.package.MyApp"
        android:icon="@drawable/display_image"
        android:label="@string/app_name" >
        <activity
            android:name="some.package.LoginActivity"
            android:configChanges="keyboardHidden|orientation"
            android:label="@string/app_name"
            android:screenOrientation="user" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="some.package.BuddyListActivity"
            android:configChanges="keyboardHidden|orientation"
            android:label="@string/app_name"
            android:screenOrientation="user"
            android:theme="@android:style/Theme.Black.NoTitleBar" >

            <!--
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            -->
        </activity>
        <activity
            android:name="some.package.SessionWindowActivity"
            android:configChanges="keyboardHidden|orientation"
            android:label="@string/app_name"
            android:screenOrientation="user"
            android:theme="@android:style/Theme.Black.NoTitleBar" >

            <!--
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            -->
        </activity>
    </application>

</manifest> 
```

**编辑** 我刚刚在使用 CheckJNI 后在 LogCat 中看到以下输出，

```
06-26 17:27:30.023: I/remove(24544): Sending Signal : 13 **//App Working fine here**
06-26 17:27:32.148: D/dalvikvm(24544): GC_CONCURRENT freed 446K, 49% free 3384K/6599K, external 1057K/1076K, paused 3ms+4ms
06-26 17:27:39.531: W/dalvikvm(24544): **HeapWorker may be wedged: 7374ms spent** inside LsomePackageName/modules/AudioPlayer;.finalize()V
06-26 17:27:40.023: I/remove(24544): Sending Signal : 13
06-26 17:27:40.218: D/dalvikvm(24544): GC_CONCURRENT freed 479K, 49% free 3383K/6599K, external 1057K/1076K, paused 9ms+5ms 
06-26 17:27:42.343: E/RoobrooApp(24670): Application Instance created **//Restarted** 
06-26 17:27:42.351: I/ApplicationPackageManager(24670): cscCountry is not German : INS 
```

**更新** 在一步进一步试验时，我故意为双数组分配了一个非常大的内存。但令我惊讶的是，**onLowMemory()**没有被调用，应用程序也没有重新启动，而是我得到了 outOfMemoryException。如果永远不会调用 onLowMemory() 为什么它会在那里？

另一个问题是，重启后操作系统已经启动 BuddyListActivity 而不是 LoginActivity... 真的需要帮助...。

**更新 2** 我刚刚看到以下错误日志，我真的不知道那是什么意思..

```
06-29 12:07:28.398: W/dalvikvm(19308): ReferenceTable overflow (max=1024)
06-29 12:07:28.398: W/dalvikvm(19308): Last 10 entries in JNI pinned array reference table:
06-29 12:07:28.398: W/dalvikvm(19308):  1014: 0x405b0280 cls=[B (340 bytes)
06-29 12:07:28.398: W/dalvikvm(19308):  1015: 0x405b03d8 cls=[S (660 bytes)
06-29 12:07:28.398: W/dalvikvm(19308):  1016: 0x405d8208 cls=[B (340 bytes)
06-29 12:07:28.398: W/dalvikvm(19308):  1017: 0x405d8360 cls=[S (660 bytes)
06-29 12:07:28.398: W/dalvikvm(19308):  1018: 0x405f8b08 cls=[B (340 bytes)
06-29 12:07:28.398: W/dalvikvm(19308):  1019: 0x405f8c60 cls=[S (660 bytes)
06-29 12:07:28.398: W/dalvikvm(19308):  1020: 0x405f8ef8 cls=[B (340 bytes)
06-29 12:07:28.398: W/dalvikvm(19308):  1021: 0x405ff698 cls=[S (660 bytes)
06-29 12:07:28.398: W/dalvikvm(19308):  1022: 0x405f9050 cls=[B (340 bytes)
06-29 12:07:28.398: W/dalvikvm(19308):  1023: 0x405ff930 cls=[S (660 bytes)
06-29 12:07:28.398: W/dalvikvm(19308): JNI pinned array reference table summary (1024 entries):
06-29 12:07:28.398: W/dalvikvm(19308):     1 of [B 20B
06-29 12:07:28.398: W/dalvikvm(19308):   508 of [B 340B (508 unique)
06-29 12:07:28.398: W/dalvikvm(19308):     3 of [B 348B (3 unique)
06-29 12:07:28.406: W/dalvikvm(19308):   511 of [S 660B (511 unique)
06-29 12:07:28.406: W/dalvikvm(19308):     1 of [S 668B
06-29 12:07:28.406: W/dalvikvm(19308): Memory held directly by tracked refs is 511712 bytes
06-29 12:07:28.406: E/dalvikvm(19308): Failed adding to JNI pinned array ref table (1024 entries)
06-29 12:07:28.406: I/dalvikvm(19308): "Thread-14" prio=5 tid=12 RUNNABLE
06-29 12:07:28.406: I/dalvikvm(19308):   | group="main" sCount=0 dsCount=0 obj=0x4050e548 self=0x2240b8
06-29 12:07:28.406: I/dalvikvm(19308):   | sysTid=19953 nice=-19 sched=0/0 cgrp=[fopen-error:2] handle=1905240
06-29 12:07:28.406: I/dalvikvm(19308):   | schedstat=( 207153329 82244881 1015 )
06-29 12:07:28.406: I/dalvikvm(19308):   at some.package.MyApp.speex.SpeexEncoder.encode(Native Method)
06-29 12:07:28.406: I/dalvikvm(19308):   at some.package.MyApp.speex.SpeexEncoder.encodeFrame(SpeexEncoder.java:51)
06-29 12:07:28.406: I/dalvikvm(19308):   at some.package.MyApp.models.Session.capturedAudioReceived(Session.java:656)
06-29 12:07:28.406: I/dalvikvm(19308):   at some.package.MyApp.modules.AudioCapturer.run(AudioCapturer.java:118)
06-29 12:07:28.406: I/dalvikvm(19308):   at java.lang.Thread.run(Thread.java:1019)
06-29 12:07:28.406: E/dalvikvm(19308): VM aborting
06-29 12:07:29.726: W/AudioTrack(19308): obtainBuffer() track 0x1d3520 disabled, restarting
06-29 12:07:30.351: W/dalvikvm(19308): threadid=4: spin on suspend #1 threadid=1 (pcf=0)
06-29 12:07:30.898: W/AudioTrack(19308): obtainBuffer() track 0x1d3520 disabled, restarting
06-29 12:07:31.101: W/dalvikvm(19308): threadid=4: spin on suspend #2 threadid=1 (pcf=0)
06-29 12:07:31.101: I/dalvikvm(19308): "Signal Catcher" daemon prio=5 tid=4 RUNNABLE
06-29 12:07:31.101: I/dalvikvm(19308):   | group="system" sCount=0 dsCount=0 obj=0x40510490 self=0x159898
06-29 12:07:31.101: I/dalvikvm(19308):   | sysTid=19312 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1575600
06-29 12:07:31.101: I/dalvikvm(19308):   | schedstat=( 1556395 4913328 26 )
06-29 12:07:31.101: I/dalvikvm(19308):   at dalvik.system.NativeStart.run(Native Method)
06-29 12:07:31.101: I/dalvikvm(19308): "main" prio=5 tid=1 RUNNABLE
06-29 12:07:31.101: I/dalvikvm(19308):   | group="main" sCount=1 dsCount=0 obj=0x40022198 self=0xcec8
06-29 12:07:31.101: I/dalvikvm(19308):   | sysTid=19308 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=-1345006496
06-29 12:07:31.101: I/dalvikvm(19308):   | schedstat=( 5364166234 3306213349 13647 )
06-29 12:07:31.101: I/dalvikvm(19308):   at android.media.AudioTrack.native_write_short(Native Method)
06-29 12:07:31.101: I/dalvikvm(19308):   at android.media.AudioTrack.write(AudioTrack.java:943)
06-29 12:07:31.101: I/dalvikvm(19308):   at some.package.MyApp.modules.AudioPlayer.onPeriodicNotification(AudioPlayer.java:163)
06-29 12:07:31.101: I/dalvikvm(19308):   at android.media.AudioTrack$NativeEventHandlerDelegate$1.handleMessage(AudioTrack.java:1084)
06-29 12:07:31.101: I/dalvikvm(19308):   at android.os.Handler.dispatchMessage(Handler.java:99)
06-29 12:07:31.101: I/dalvikvm(19308):   at android.os.Looper.loop(Looper.java:130)
06-29 12:07:31.101: I/dalvikvm(19308):   at android.app.ActivityThread.main(ActivityThread.java:3687)
06-29 12:07:31.101: I/dalvikvm(19308):   at java.lang.reflect.Method.invokeNative(Native Method)
06-29 12:07:31.101: I/dalvikvm(19308):   at java.lang.reflect.Method.invoke(Method.java:507)
06-29 12:07:31.101: I/dalvikvm(19308):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
06-29 12:07:31.101: I/dalvikvm(19308):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
06-29 12:07:31.101: I/dalvikvm(19308):   at dalvik.system.NativeStart.main(Native Method)
06-29 12:07:31.851: W/dalvikvm(19308): threadid=4: spin on suspend #3 threadid=1 (pcf=0)
06-29 12:07:31.851: I/dalvikvm(19308): "Signal Catcher" daemon prio=5 tid=4 RUNNABLE
06-29 12:07:31.851: I/dalvikvm(19308):   | group="system" sCount=0 dsCount=0 obj=0x40510490 self=0x159898
06-29 12:07:31.851: I/dalvikvm(19308):   | sysTid=19312 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1575600
06-29 12:07:31.851: I/dalvikvm(19308):   | schedstat=( 2868652 6927485 37 )
06-29 12:07:31.851: I/dalvikvm(19308):   at dalvik.system.NativeStart.run(Native Method)
06-29 12:07:31.851: I/dalvikvm(19308): "main" prio=5 tid=1 RUNNABLE
06-29 12:07:31.851: I/dalvikvm(19308):   | group="main" sCount=1 dsCount=0 obj=0x40022198 self=0xcec8
06-29 12:07:31.851: I/dalvikvm(19308):   | sysTid=19308 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=-1345006496
06-29 12:07:31.851: I/dalvikvm(19308):   | schedstat=( 5364166234 3306213349 13647 )
06-29 12:07:32.000: I/dalvikvm(19308):   at android.media.AudioTrack.native_write_short(Native Method)
06-29 12:07:32.015: I/dalvikvm(19308):   at android.media.AudioTrack.write(AudioTrack.java:943)
06-29 12:07:32.031: I/dalvikvm(19308):   at some.package.MyApp.modules.AudioPlayer.onPeriodicNotification(AudioPlayer.java:163)
06-29 12:07:32.039: I/dalvikvm(19308):   at android.media.AudioTrack$NativeEventHandlerDelegate$1.handleMessage(AudioTrack.java:1084)
06-29 12:07:32.054: I/dalvikvm(19308):   at android.os.Handler.dispatchMessage(Handler.java:99)
06-29 12:07:32.054: I/dalvikvm(19308):   at android.os.Looper.loop(Looper.java:130)
06-29 12:07:32.062: W/AudioTrack(19308): obtainBuffer() track 0x1d3520 disabled, restarting
06-29 12:07:32.070: I/dalvikvm(19308):   at android.app.ActivityThread.main(ActivityThread.java:3687)
06-29 12:07:32.093: I/dalvikvm(19308):   at java.lang.reflect.Method.invokeNative(Native Method)
06-29 12:07:32.101: I/dalvikvm(19308):   at java.lang.reflect.Method.invoke(Method.java:507)
06-29 12:07:32.109: I/dalvikvm(19308):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
06-29 12:07:32.125: I/dalvikvm(19308):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
06-29 12:07:32.132: I/dalvikvm(19308):   at dalvik.system.NativeStart.main(Native Method)
06-29 12:07:32.890: W/dalvikvm(19308): threadid=4: spin on suspend #4 threadid=1 (pcf=0)
06-29 12:07:32.890: I/dalvikvm(19308): "Signal Catcher" daemon prio=5 tid=4 RUNNABLE
06-29 12:07:32.890: I/dalvikvm(19308):   | group="system" sCount=0 dsCount=0 obj=0x40510490 self=0x159898
06-29 12:07:32.890: I/dalvikvm(19308):   | sysTid=19312 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1575600
06-29 12:07:32.890: I/dalvikvm(19308):   | schedstat=( 5340582 316192616 59 )
06-29 12:07:32.898: I/dalvikvm(19308):   at dalvik.system.NativeStart.run(Native Method)
06-29 12:07:32.898: I/dalvikvm(19308): "main" prio=5 tid=1 RUNNABLE
06-29 12:07:32.898: I/dalvikvm(19308):   | group="main" sCount=1 dsCount=0 obj=0x40022198 self=0xcec8
06-29 12:07:32.898: I/dalvikvm(19308):   | sysTid=19308 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=-1345006496
06-29 12:07:32.898: I/dalvikvm(19308):   | schedstat=( 5364166234 3306213349 13647 )
06-29 12:07:32.929: I/dalvikvm(19308):   at android.media.AudioTrack.native_write_short(Native Method)
06-29 12:07:32.945: I/dalvikvm(19308):   at android.media.AudioTrack.write(AudioTrack.java:943)
06-29 12:07:32.953: I/dalvikvm(19308):   at some.package.MyApp.modules.AudioPlayer.onPeriodicNotification(AudioPlayer.java:163) 
```

**解决方案** 更改代码的测试仍在进行中，到目前为止一切似乎都是积极的。问题出在 JNI 内部（我猜）。@n.Collins 声明**“JVM 没有报告错误的事实也表明它是由您的本机代码引起的。”** 是解决方案最正确的指针之一。我真的很感谢所有回答它的人真的以某种方式帮助了我。多亏了社区，我在尝试解决这个问题时实际上删除了一组其他错误。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-27T14:33:24.983

如果没有完整的源代码，很难确切地知道发生了什么，但也许 Romain Guy 在 Google Groups 上的回答[会](https://groups.google.com/forum/?fromgroups#!topic/android-developers/G_ngkPTOfRo)有所帮助。

> `onLowMemory()`当整个系统内存不足时调用，而不是当您的进程内存不足时调用。每个应用程序仅限于固定数量的 RAM（例如，在 Nexus One 上为 24 MB）。如果您用完这 24 MB 但系统仍有更多可用 RAM，您将得到一个`OutOfMemoryError`但不是`onLowMemory()`.

对于 < Honeycomb 上的应用程序，24mb 的限制几乎是一成不变的。如果您的目标是 API 11 或更高版本，您可以通过声明为您的应用程序分配一个大堆来请求更多内存。文档中没有提到它，但在 Manifest.xml 中添加`android:largeHeap="true"`到您的`application`标签会做到这一点（尽管不能保证）。

注意：在修改后的固件（自定义 ROM）上，该值可能会更低或更高。我相信在三星 Galaxy Nexus 上它默认为 48mb，但作为一般规则，保持在 24mb 以内是一个安全的假设。索尼爱立信也有一篇[很棒的帖子](http://developer.sonymobile.com/wp/2012/03/30/learn-about-the-technical-differences-between-gingerbread-and-ics/)，解释了姜饼和冰淇淋三明治之间的技术差异（RAM 是一个深入讨论的主题）。

祝你好运，我希望这至少可以帮助您找到问题所在。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-30T02:57:46.263

其他海报已经涵盖了内存不足的问题。我将添加它来调试您的本机代码，一种快速而肮脏的方法是在各个检查点添加日志消息。这是我的一个原生 cpp 文件中的一个示例：

```
#include <android/log.h>

...

// Set to 1 to enable debug log traces...
#define DEBUG  0

#define LOG_TAG         "yourNativeCodeLogTag"
#if DEBUG
#define LOG_ERROR(...)  __android_log_print(ANDROID_LOG_ERROR,LOG_TAG,__VA_ARGS__)
#define LOG_WARN(...)   __android_log_print(ANDROID_LOG_WARN,LOG_TAG,__VA_ARGS__)
#define LOG_INFO(...)   __android_log_print(ANDROID_LOG_INFO,LOG_TAG,__VA_ARGS__)
#define LOG_DEBUG(...)  __android_log_print(ANDROID_LOG_DEBUG,LOG_TAG,__VA_ARGS__)
#else // if !DEBUG
#define LOG_ERROR(...)  __android_log_print(ANDROID_LOG_ERROR,LOG_TAG,__VA_ARGS__)
#define LOG_WARN(...)   __android_log_print(ANDROID_LOG_WARN,LOG_TAG,__VA_ARGS__)
#define LOG_INFO(...)   
#define LOG_DEBUG(...) 
#endif // DEBUG

...

extern "C"
JNIEXPORT void JNICALL Java_com_whatever_package_YourClassName_jniInitializeLibrary(JNIEnv * env, jobject thiz, /* other irrelevant stuff here */)                 
{    
    LOG_DEBUG("Initializing native library.\n");
    ....
} 
```

最后，您还需要在相关文件中添加`-llog`LOCAL_LDLIBS 变量。`*.mk`然后，您可以从 logcat 中的本机库中获取日志消息。

更新：看到您的更新后，我认为您应该使用上述技术将日志消息添加到您的本机`encode()`方法中，以准确查看崩溃的位置。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-04T13:02:43.000

我没有足够的代表评论其他人的答案，但我认为[错误 454 的答案](https://stackoverflow.com/a/11288397/904134)非常接近。

我自己的应用程序也遇到了类似的问题，应用程序在没有消息的情况下重新启动。我的问题是由数组溢出引起的，我试图在本机代码中访问对象`n+1`数组中的索引。`n`JVM 没有报告错误这一事实也表明它是由您的本机代码引起的。

这个问题：[c++ Jni Reference Table overflow](https://stackoverflow.com/questions/4959495/jni-reference-table-overflow)的错误日志与您的更新 2 非常相似，进一步表明您的错误在于与您的 get 和 release 调用不匹配。

如果您不明白它`JNI pinned reference table`是什么，我想请您注意[标题为“访问 Java 对象”的 JNI 规范部分和下面的“访问原始数组”部分](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/design.html#wp1253)。

最后，您访问原始数据数组的本机代码的一些片段将有助于解决您的问题，但与此同时，我想提请您注意对[ReferenceTable overflow (max=512) JNI](https://stackoverflow.com/questions/9372373/referencetable-overflow-max-512-jni)答案的最终评论内容如下：

> `GetObjectArrayElement`返回带有本地引用的对象，因此您需要删除本地引用。但是只有在完成数组元素时才应该这样做。所以你应该放在`DeleteLocalRef(oneDim)`后面`releaseIntArrayElements(oneDim)`。

因此，请在访问数组元素时*仔细检查是否匹配了 Get/Release 调用*，当您不再需要访问它时，请*删除本地引用*。您可能会遇到 JNI 固定引用表的末尾，因为您没有删除旧对象。请记住，JNI 只是 Java 的交流接口，因此您必须帮助您的本机代码进行垃圾收集。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-02T05:57:57.483

根据更新 #2，很明显您未能取消固定 JNI 中的数组。这意味着您正在使用`Get<Type>ArrayElements`并且未能将这些调用中的 1 个或多个与 匹配`Release<Type>ArrayElements`。

结果，ReferenceTable 溢出。查找您调用 Get 而不是调用 Release 的位置。例如，您可能正在打电话`GetIntArrayElements`，但`ReleaseIntArrayElements`在完成后没有打电话。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-28T10:30:46.133

可能是问题的一件事是，您的应用程序可能`native code`在`Logcat`.

我遇到了同样的问题，在尝试解码时`bitmaps`，android 在内部某处崩溃`native code`，应用程序停止，没有显示任何消息。

关于`onLowMemory()`@Tom的答案涵盖了它。

# python - 甚至在他们在他们的文档中给出的教程上也出现了 Scrapy Error

> ID：11190471
> 
> 赞同：1
> 
> 时间：2012-06-25T13:43:27.840
> 
> 标签：python, scrapy

我已经复制了 scrapy 在他们的第一个示例中给出的确切代码，但它似乎不起作用。我做了很多论坛搜索，我看到很多人遇到同样的错误。我倾向于认为这可能是因为安装可能不正确。想知道是否有人可以帮助查看日志。

这是 Scrapy 给出的基础教程示例。 [教程网址](http://doc.scrapy.org/en/latest/intro/tutorial.html#intro-tutorial)。

命令行

> D:\tutorial\tutorial\spiders>scrapy crawl dmoz_spider.py 2012-06-25 18:50:55+0530 [scrapy] INFO: Scrapy 0.14.4 started (bot: tutorial) 2012-06-25 18:50: 55+0530 [scrapy] 调试：启用扩展：LogStats、TelnetConsole、CloseSpider、WebService、CoreStats、SpiderState 2012-06-25 18:50:56+0530 [scrapy] 调试：启用下载器中间件：HttpAuthMiddleware、DownloadTimeoutMid dleware、UserAgentMiddleware、 RetryMiddleware, DefaultHeadersMiddleware, RedirectMiddleware, CookiesMiddleware, HttpProxyMiddleware, HttpCompressionMiddleware, ChunkedTransferMiddleware, DownloaderStats 2012-06-25 18:50:56+0530 [scrapy] 调试：启用的蜘蛛中间件：HttpErrorMiddleware, OffsiteMiddleware, Re fererMiddleware, UrlLengthMiddleware-06-DepthMiddleware 25 18:50:56+0530 [scrapy] 调试：启用的项目管道：回溯（最近一次通话最后）：
> 文件“C:\Python27\Scripts\scrapy”，第 5 行，在 pkg_resources.run_script('scrapy==0.14.4', 'scrapy') 文件“C:\Python27\lib\site-packages\pkg_resources.py” ，第 489 行，在 run_script self.require(requires)[0].run_script(script_name, ns)
> 文件“C:\Python27\lib\site-packages\pkg_resources.py”，第 1207 行，在 run_script execfile(script_filename, namespace, namespace) 文件“c:\python27\lib\site-packages\scrapy-0.14.4- py2.7.egg\EGG-INFO\scripts\scrapy”，第 4 行，在 execute() 文件“C:\Python27\lib\site-packages\scrapy-0.14.4-py2.7.egg\scrapy\cmdline .py”，第 132 行，在执行 _run_print_help(parser, _run_command, cmd, args, opts) 文件“C:\Python27\lib\site-packages\scrapy-0.14.4-py2.7.egg\scrapy\cmdline. py”，第 97 行，在 _run_print_help func(*a, **kw) 文件“C:\Python27\lib\site-packages\scrapy-0.14.4-py2.7.egg\scrapy\cmdline.py”中，行139，在 _run_command cmd.run(args, opts) 文件“C:\Python27\lib\site-packages\scrapy-0.14.4-py2.7.egg\scrapy\commands\crawl.py”中，第 43 行运行蜘蛛 = 自我。crawler.spiders.create(spname,*opts.spargs) 文件“C:\Python27\lib\site-packages\scrapy-0.14.4-py2.7.egg\scrapy\spidermanager.py”，第 43 行，在创建中raise KeyError("Spider not found: %s" % spider_name)

KeyError：'未找到蜘蛛：dmoz_spider.py'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T07:22:04.947

您不会通过在您的案例 dmoz_spider.py 中调用蜘蛛模块名称来启动它。你以你给那个蜘蛛的名字开头。

在这种情况下，如果您完全按照教程进行操作，它将是：

```
scrapy crawl dmoz 
```

# delphi - Delphi中带有重采样的透明图像控制

> ID：11190472
> 
> 赞同：6
> 
> 时间：2012-06-25T13:43:30.477
> 
> 标签：delphi, delphi-2010

我有一个带有背景图像的表单（在 Form1.Repaint 中的表单上绘制）。

**我在寻找什么：**一个透明的图像控件，可以平滑地调整（重新采样）加载的图像的大小。

（我需要它是透明的，因为表单背景图像应该是可见的）

**我试过的：**

*   **标准 TImage：**它是透明的，但不会重新采样。

*   **Graphics32 / Image32：重新**采样精美，但不透明。

    我已经用谷歌搜索了几个小时以寻求修复或解决方法，但没有太多解决方案。这与加载到 Image32 中的图像是否透明无关，而是控件的背景颜色仍然是白色（白色 = Image32 控件的颜色属性，将其设置为 clNone 不起作用）。[这显然是设计的](http://graphics32.org/wiki/FAQ/AlphaTransparency)

*   **GR32ex** (The GR32 Extension Components Pack)，据说添加了一个透明属性，但是它已经很多年没有更新了，我无法安装它。它在 Delphi 2010 和 Graphics32 v. 1.9 上引发了无数错误。

任何人都可以想到解决方案或解决方法吗？我想要的只是一个具有透明度和重采样的控件。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T16:59:06.570

我很惊讶这`TImage32`没有透明度。你真的确定是这样吗？

无论如何，如果是这样，我会将透明度支持`TImage`与重新采样能力相结合，`TBitmap32`以这种方式构建解决方案。将原始图像保留在`TBitmap32`实例中。每当您需要将其加载到`TImage`组件中时，例如在重新调整大小时，使用`TBitmap32`执行内存中重新调整大小并加载该重新调整大小的图像。

事实上，如果您已经在自己绘制表单的背景，为什么不自己绘制图像并简单地取消图像控件呢？

**更新 1：** Websearch 揭示了一种使 TImage32 透明的简单方法：[http ://graphics32.org/news/newsgroups.php?art_group=graphics32.general&article_id=9505](http://graphics32.org/news/newsgroups.php?art_group=graphics32.general&article_id=9505)

**更新 2：**上面的链接现在已经失效，新闻组只能通过 NNTP 访问。我不能 100% 确定，但我认为链接的帖子是 Michael Haralabos 的，并且包含以下文件：

```
unit GR32_ImageEx;

// Transparent TImage32 by Michael Haralabos

interface

uses
  Windows, Messages, Classes, GR32_Image, GR32;

type
  TImage32Ex = class(TImage32)
  private
    FTransparent: Boolean;

    procedure SetTransparent(const Value: Boolean);
  public
    procedure ExecClearBackgnd(Dest: TBitmap32; StageNum: Integer); override;
  published
    property Enabled;
    property Transparent: Boolean read FTransparent write SetTransparent;
  end;

procedure Register;

implementation

procedure TImage32Ex.ExecClearBackgnd(Dest: TBitmap32; StageNum: Integer);
var
  P: TPoint;
  SaveIndex: Integer;
begin
  if FTransparent and Assigned(Parent) and
     not (Assigned(Bitmap) and (BitmapAlign = baTile)) then
  begin
    SaveIndex := SaveDC(Dest.Handle);
    GetViewportOrgEx(Dest.Handle, P);
    SetViewportOrgEx(Dest.Handle, P.X - Left, P.Y - Top, nil);
    IntersectClipRect(Dest.Handle, 0, 0, Parent.ClientWidth, Parent.ClientHeight);
    Parent.Perform(WM_ERASEBKGND, Dest.Handle, 0);
    Parent.Perform(WM_PAINT, Dest.Handle, 0);
    RestoreDC(Dest.Handle, SaveIndex);
  end
  else
    inherited;
end;

procedure TImage32Ex.SetTransparent(const Value: Boolean);
begin
  if FTransparent <> Value then
  begin
    FTransparent := Value;
    Invalidate;
  end;
end;

procedure Register;
begin
  RegisterComponents('Graphics32', [TImage32Ex]);
end;

end. 
```

这里的另一个主题表明这可能是现在死链接所指的内容：[Delphi TImage32 - 如果没有加载图片，如何使组件不可见？](https://stackoverflow.com/questions/46119152/)

# c# - 何时/何地/如何在 MVC 中填充模型的属性

> ID：11190473
> 
> 赞同：0
> 
> 时间：2012-06-25T13:43:39.787
> 
> 标签：c#, asp.net-mvc-3, google-maps, design-patterns, json.net

我有一个包含`Address`属性和`Latitude`/`Longitude`属性的模型。该模型填充在“创建”视图中，它们放置在大多数其他字段中。我根据输入的地址使用 Google Maps API 地理编码功能填充 Lat/Lng（让他们手动输入是没有意义的）。

我的大问题是*应该在哪里完成*。下面的代码有效，但我认为它很笨重。关于整合这种行为的更好方法的任何想法？它应该在控制器中吗？它应该是某些内部模型机制的一部分吗？

```
[HttpPost]
public ActionResult Create(Church church)
{
    try
    {
        if (ModelState.IsValid)
        {
            string address = string.Format("{0},{1},{2} {3}", 
                church.Street + church.Street2, church.City,
                church.Region, church.PostalCode);

            JObject jsonResult = GoogleApiHelper.GetAddressGeocodeData(address);

            //Handle some error states here...
            if (jsonResult["results"].Count() == 1)
            {
                church.Latitude = jsonResult.SelectToken(        
                    "results[0].geometry.location.lat").Value<double>();
                church.Longitude = jsonResult.SelectToken(
                    "results[0].geometry.location.lng").Value<double>();
                unitOfWork.ChurchRepository.Insert(church);
                unitOfWork.Save();
                return RedirectToAction("Index");
            }              
        }
    }
    catch (DataException)
    {
        //Log the error (add a variable name after DataException)
        ModelState.AddModelError("", "Unable to save changes.");
    }
    return View(church);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:49:32.540

您可以使用存储库层来抽象对 Google API 的访问，然后从控制器调用此存储库以提供已填充的模型。这样，如果明天您决定使用 Bing 而不是 Google，您只需更改存储库的实现即可。无需触摸您的控制器或模型逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:55:59.303

您可以编写自定义模型绑定器并将所有 Google API 代码放入其中。这样，您的控制器将完全忘记您的数据访问。

这是关于自定义模型绑定器的教程：

[http://buildstarted.com/2010/09/12/custom-model-binders-in-mvc-3-with-imodelbinder/](http://buildstarted.com/2010/09/12/custom-model-binders-in-mvc-3-with-imodelbinder/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T13:57:10.123

主要问题是你打算在其他地方建立教堂吗？

如果不是，那么这是放置代码的完全可以接受的地方。

如果您随后将代码放入可以从两个地方调用的 ChurchService 中。这样您就可以保持 DRY（不要重复自己）原则，而不会过度复杂您的代码。

# c# - 从混合模式应用程序中访问 PageSettings 时，打印机 DLL 被多次加载/卸载

> ID：11190474
> 
> 赞同：1
> 
> 时间：2012-06-25T13:43:40.490
> 
> 标签：c#, printing, mixed-mode

```
var settings = new System.Drawing.Printing.PageSettings();
System.Diagnostics.Debug.WriteLine( "Landscape: " + settings.Landscape ); 
```

当我在托管应用程序中运行此代码时，一切正常。但是，在混合模式（C# 和 C++）应用程序中，当访问`Landscape`属性（或`settings`对象的任何其他属性）时，打印机驱动程序 DLL 会被多次加载和卸载，这会导致代码比托管代码慢得多应用。输出包含几十行，如下所示：

```
Loaded 'C:\WINDOWS\system32\spool\drivers\w32x86\3\EP0LUZ00.DLL', Cannot find or open the PDB file
Unloaded 'C:\WINDOWS\system32\spool\drivers\w32x86\3\EP0LUZ00.DLL' 
```

我能做些什么来防止这种“浪费”吗？

# ejb-3.0 - 在 WebLogic 10.3.5 上使用 Arquillian 进行 @EJB 注入不起作用

> ID：11190475
> 
> 赞同：2
> 
> 时间：2012-06-25T13:43:49.227
> 
> 标签：ejb-3.0, weblogic-10.x, jboss-arquillian

我正在使用 Arquillian 在 WebLogic 10.3.5 上运行基本单元测试。不幸的是，@EJB 注入对我不起作用，并且在调用 EJB 时会得到 NullPointerException。

我发现的示例不需要添加 ejb-jar.xml，但我添加了一个。在任何情况下，都会引发 NullPointerException。

有任何想法吗？

单元测试：

```
import static org.testng.Assert.assertEquals;
import java.io.File;
import javax.ejb.EJB;
import org.jboss.arquillian.container.test.api.Deployment;
import org.jboss.arquillian.testng.Arquillian;
import org.jboss.shrinkwrap.api.ShrinkWrap;
import org.jboss.shrinkwrap.api.exporter.ZipExporter;
import org.jboss.shrinkwrap.api.spec.JavaArchive;
import org.testng.annotations.Test;
import eu.ema.eudract.results.DummyService;
import eu.ema.eudract.results.DummyServiceBean;

public class ResultStatefulServiceBeanIntegrationTest extends Arquillian {

    @Deployment
    public static JavaArchive createDeployment() {
        JavaArchive archive = ShrinkWrap.create(JavaArchive.class, "test.jar")
                .addClasses(DummyService.class, DummyServiceBean.class)
                .addAsManifestResource("META-INF/ejb-jar.xml", "ejb-jar.xml");

        System.out.println(archive.toString(true));
        archive.as(ZipExporter.class).exportTo(new File("C:\\Users\\fragkakm\\Desktop\\test.jar"), true);
        return archive;
    }

    @EJB
    private DummyService dummyService;

    @Test
    public void loadResultTest() {
        assertEquals(dummyService.doNothing(), "Did nothing!");
    }
} 
```

输出：

```
test.jar:
/META-INF/
/META-INF/ejb-jar.xml
/eu/
/eu/ema/
/eu/ema/eudract/
/eu/ema/eudract/results/
/eu/ema/eudract/results/DummyServiceBean.class
/eu/ema/eudract/results/DummyService.class
25 Ιουν 2012 4:31:35 μμ org.jboss.arquillian.container.wls.WebLogicDeployerClient deploy
INFO: Starting weblogic.Deployer to deploy the test artifact.
25 Ιουν 2012 4:31:42 μμ org.jboss.arquillian.container.wls.WebLogicDeployerClient forkWebLogicDeployer
INFO: weblogic.Deployer appears to have terminated successfully.
25 Ιουν 2012 4:31:45 μμ org.jboss.arquillian.container.wls.WebLogicDeployerClient undeploy
INFO: Starting weblogic.Deployer to undeploy the test artifact.
25 Ιουν 2012 4:31:51 μμ org.jboss.arquillian.container.wls.WebLogicDeployerClient forkWebLogicDeployer
INFO: weblogic.Deployer appears to have terminated successfully.
FAILED: loadResultTest
java.lang.NullPointerException
    at eu.ema.eudract.results.result.ResultStatefulServiceBeanIntegrationTest.loadResultTest(ResultStatefulServiceBeanIntegrationTest.java:38)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
    at org.testng.internal.MethodInvocationHelper$1.runTestMethod(MethodInvocationHelper.java:182)
    at org.jboss.arquillian.testng.Arquillian$2.invoke(Arquillian.java:167)
    at org.jboss.arquillian.container.test.impl.execution.LocalTestExecuter.execute(LocalTestExecuter.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:90)
    at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
    at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:135)
    at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:115)
    at org.jboss.arquillian.core.impl.EventImpl.fire(EventImpl.java:67)
    at org.jboss.arquillian.container.test.impl.execution.ContainerTestExecuter.execute(ContainerTestExecuter.java:38)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:90)
    at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
    at org.jboss.arquillian.test.impl.TestContextHandler.createTestContext(TestContextHandler.java:89)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:90)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
    at org.jboss.arquillian.test.impl.TestContextHandler.createClassContext(TestContextHandler.java:75)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:90)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
    at org.jboss.arquillian.test.impl.TestContextHandler.createSuiteContext(TestContextHandler.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:90)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
    at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:135)
    at org.jboss.arquillian.test.impl.EventTestRunnerAdaptor.test(EventTestRunnerAdaptor.java:111)
    at org.jboss.arquillian.testng.Arquillian.run(Arquillian.java:158)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.testng.internal.MethodInvocationHelper.invokeHookable(MethodInvocationHelper.java:194)
    at org.testng.internal.Invoker.invokeMethod(Invoker.java:695)
    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:894)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1219)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
    at org.testng.TestRunner.privateRun(TestRunner.java:767)
    at org.testng.TestRunner.run(TestRunner.java:617)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:87)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1197)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1122)
    at org.testng.TestNG.run(TestNG.java:1030)
    at org.jboss.arquillian.testng.container.TestNGTestRunner.execute(TestNGTestRunner.java:53)
    at org.jboss.arquillian.protocol.servlet.runner.ServletTestRunner.executeTest(ServletTestRunner.java:160)
    at org.jboss.arquillian.protocol.servlet.runner.ServletTestRunner.execute(ServletTestRunner.java:126)
    at org.jboss.arquillian.protocol.servlet.runner.ServletTestRunner.doGet(ServletTestRunner.java:90)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:183)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3717)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:178) 
```

我的 EJB 接口：

```
package eu.ema.eudract.results;

import javax.ejb.Remote;

@Remote
public interface DummyService {

    String doNothing();
} 
```

EJB 实现：

```
package eu.ema.eudract.results;

import javax.ejb.Stateless;

import eu.ema.eudract.results.DummyService;

@Stateless
public class DummyServiceBean implements DummyService {

    public String doNothing() {
        return "Did nothing!";
    }

} 
```

arquillian.xml

```
<?xml version="1.0"?>
<arquillian xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://jboss.org/schema/arquillian"
    xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">

    <container qualifier="arquillian-wls-remote-10.3" default="true">
        <configuration>
            <property name="adminUrl">t3://localhost:7001</property>
            <property name="adminUserName">weblogic</property>
            <property name="adminPassword">aaaaaaaa</property>
            <property name="wlsHome">C:\dbin\wls1035_dev\wlserver\</property>
            <property name="target">AdminServer</property>
        </configuration>
    </container>

</arquillian> 
```

我添加的依赖项：

```
<dependency>
    <groupId>org.jboss.arquillian</groupId>
    <artifactId>arquillian-bom</artifactId>
    <version>1.0.1.Final</version>
    <scope>import</scope>
    <type>pom</type>
</dependency>
<dependency>
    <groupId>org.jboss.arquillian.container</groupId>
    <artifactId>arquillian-wls-remote-10.3</artifactId>
    <scope>test</scope>
    <version>1.0.0.Alpha2</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T06:25:57.163

WLS 10.3.5 是一个符合 JEE5 的容器，因此您不能将 EJB 驻留在 Web 模块中（自 JEE6 即 WLS 12c 起就支持此功能）。

要允许将 EJB 注入 WLS 10.3.x 中的测试类，您需要`ejb-local-ref`在 ShrinkWrap 的 web.xml 中提供相关条目`WebArchive`。如果您准备了一个 EAR 存档，那么您需要将这些条目添加到`WebArchive`将使用 Arquillian Servlet Testrunner 丰富的存档中。

[WebLogicInjectionTestCase](https://github.com/arquillian/arquillian-container-wls/blob/master/wls-remote-10.3/src/test/java/org/jboss/arquillian/container/wls/remote_10_3/WebLogicInjectionTestCase.java)类的 Arquillian GitHub 存储库中提供了一个示例。关联的 web.xml 文件是[in-container-web-eartest.xml](https://github.com/arquillian/arquillian-container-wls/blob/master/wls-remote-10.3/src/test/resources/in-container-web-eartest.xml)。

请注意，当您尝试注入本地 EJB 时，肯定需要 ejb-local-ref 条目，因为默认情况下，WLS 不会将它们绑定到 JNDI 树中。对于远程 EJB，您也许可以跳过这个先决条件。

# java - 通过 HTMLUnit 调用 jqplotToImage 失败

> ID：11190476
> 
> 赞同：1
> 
> 时间：2012-06-25T13:43:49.587
> 
> 标签：java, htmlunit, jqplot

我有一个网页，它使用 jqplot 绘制图表，使用 Google Datatable 以表格格式显示数据。我在网页中还有一个“导出”超链接，用于生成网页的 PDF 副本以供下载。我的导出代码如下所示：

```
function exportPDF() {
    var img = $('#clicks_chart_div').jqplotToImage(0, 0); 
    if (img) {
        var imgTag = $('<img id="ccanvasimage">');
        imgTag.attr('src', img.toDataURL("image/png"));
        imgTag.attr('width', 450);
        imgTag.attr('height', 320);
        $('#clicks_chart_div').replaceWith(imgTag);
    } else {
        alert('could not get image');
    }
    $('#src').val(document.documentElement.innerHTML);
    $('#frmSource').submit();
  } 
```

此代码在浏览器中运行良好并下载相应的 PDF。但是，当我通过 HTMLUnit 调用同一页面时，调用“var img = $('#clicks_chart_div').jqplotToImage(0, 0);” 无法生成图像并转到其他部分“警报（'无法获取图像'）；” 因此，生成的 PDF 仅包含数据表而不包含任何图表。

关于为什么调用 jqplotToImage 失败的任何想法？FWIW，jqplotToImage 的代码通过外部脚本包含如下：

```
<script language="javascript" type="text/javascript" src="javascripts/export-jqplot-to-png.js"></script> 
```

谢谢。

# asp.net - 禁用中继器中的第一个和最后一个按钮

> ID：11190477
> 
> 赞同：1
> 
> 时间：2012-06-25T13:43:51.937
> 
> 标签：asp.net, button, repeater

```
 public void Repeater1_ItemDatabound(Object Sender, RepeaterItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Item)
        {
            if (e.Item.ItemIndex == 0)
            {
                Button b = e.Item.FindControl("btnmoveup") as Button;
                b.Enabled = false;
            }

            DataView view = (DataView)SqlDataSource1.Select(DataSourceSelectArguments.Empty);
            DataTable result = view.ToTable();
            if (e.Item.ItemIndex == (result.Rows.Count)-1)
            {
                Button b2 = e.Item.FindControl("btnmovedown") as Button;
                b2.Enabled = false;
            }

        }
    } 
```

我想将我的 asp 中继器中的第一个和最后一个按钮变灰。第一个按钮被禁用，但最后一个不是。有人可以指出我的错误吗？

# eclipse - JDK 1.7 编译器不识别泛型类

> ID：11190479
> 
> 赞同：0
> 
> 时间：2012-06-25T13:44:03.393
> 
> 标签：eclipse, generics, compiler-construction, javac

我有一个类，它使用 Eclipse OSGI jar (org.eclipse.osgi_3.7.2.v20120110-1415.jar) 中的一个类，它在 Eclipse IDE 和它的编译器中得到了很好的编译。但是如果我尝试用 Ant 和 JDK 1.7 编译器编译这个类，编译器会输出这些错误：

```
[javac] /data/ant/sw_jdk1.7/test-Java7/com.tsystems.favbg.ui.core/src/com/
        tsystems/favbg/ui/core/job/AbstractLoader.java:24: 
        error: type CopyOnWriteIdentityMap does not take parameters
[javac]     private final CopyOnWriteIdentityMap<LoaderListener, String>
            eventListenerMap = new CopyOnWriteIdentityMap<>(); 
```

和

```
error: cannot infer type arguments for CopyOnWriteIdentityMap;
[javac]     private final CopyOnWriteIdentityMap<LoaderListener, String> 
            eventListenerMap = new CopyOnWriteIdentityMap<>();
[javac]   reason: cannot use '<>' with non-generic class CopyOnWriteIdentityMap 
```

显然 javac 不认为该类使用泛型。但是当我用 Java Decompiler 打开它时，泛型参数被很好地识别。有人知道这个问题并有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:55:27.430

我在阅读基于 JDK 1.6 的 SCJP 认证书时发现差异，并尝试编写（复制和粘贴）代码，在 JDK 1.7 中编译。

也许，我一直在犯同样的错误，但它们似乎很难理解。例如，请参阅我在[http://www.coderanch.com/forums/posts/list/80/467890#2679297](http://www.coderanch.com/forums/posts/list/80/467890#2679297)上的帖子。我不是专家，但是，鉴于网站上与 Java 泛型相关的教程，我发现 Angelika Langer (http://www.angelikalanger.com/Publications.html) 的课程对咨询很有吸引力。

你对此事有何建议？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:45:03.257

我会说问题出在您使用`CopyOnWriteIdentityMap`课程的方式上。我假设你正在使用这个类：

```
 org.eclipse.osgi.framework.eventmgr.CopyOnWriteIdentityMap 
```

如果您查看[javadocs](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/osgi/framework/eventmgr/CopyOnWriteIdentityMap.html)，您会发现它不是泛型类。我也（从它的包位置）得到它不打算成为*通用*实用程序类的印象。

当您在 Eclipse 中编译时，您可能正在使用不同版本的 JAR ......它*是*一个泛型类。无论哪种方式，您通过 Ant 使用的编译器都认为它不是通用的。

# c# - 控件不可见时如何保存PictureBox图像？

> ID：11190480
> 
> 赞同：2
> 
> 时间：2012-06-25T13:44:19.803
> 
> 标签：c#, .net, .net-2.0

所以这是保存的代码：

```
 private void saveToolStripMenuItem_Click(object sender, EventArgs e)
    {

        SaveFileDialog saveFileDialog1 = new SaveFileDialog();
        saveFileDialog1.InitialDirectory = Convert.ToString(Environment.SpecialFolder.MyDocuments);
        saveFileDialog1.Filter = "Bitmap (*.BMP)|*.bmp|All Files (*.*)|*.*";
        saveFileDialog1.FilterIndex = 1;

        if (pictureBox1.Image != null)
        {
            if (saveFileDialog1.ShowDialog() == DialogResult.OK)
            {
                pictureBox1.Image.Save(saveFileDialog1.FileName);

                MessageBox.Show("Vasa slika je uspjesno spremljena");

            }
        }

    } 
```

pictureBox1.Image == null 当它不可见时。就像它不可见时它不存在一样。

pictureBox1.Image 包含我的图像，但出于设计原因，它必须不可见。有什么简单的方法可以在不可见时保存它，或者在可见时将其隐藏在程序窗口后面？

# php - 使用 PHP 直接向后

> ID：11190483
> 
> 赞同：0
> 
> 时间：2012-06-25T13:44:32.703
> 
> 标签：php

你如何直接返回`<?php include("./php/content/index.php"); ?>`？

Asin，如果您已经在页面上：

> www.address.com/about/index.php

你如何将它链接到文件：

> www.address.com/php/menu.php

我知道如果你把它工作，`<?php include("www.address.com/php/content/index.php"); ?>`但我被告知不要使用这种方法，因为这是非常糟糕的做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:50:39.723

您可以使用两个点向下查看文件夹结构：

```
include( "../php/content/index.php" ); 
```

您还可以在服务器上使用文件的完整路径，这样您就可以在任何地方使用同一行：

```
include( "/var/www/php/content/index.php" ); 
```

使用 URL`include()`是不好的做法，因为

*   您正在使用 HTTP 检索页面，即使该文件位于您自己的服务器上
*   服务器将解析 PHP 并仅传递 HTML 内容，因此您会丢失例如变量
*   您必须从 Internet 访问该文件。使用文件系统路径，您可以将文件放在 webroot 之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T13:49:06.160

*以下示例从**about/index.php****开始***

 **在相对锚点中：

```
<a href="../php/menu.php">Menu</a> 
```

在绝对锚点中：

```
<a href="/php/menu.php">Menu</a> 
```

除非您指的是服务器端，否则您可以使用`header`：

```
Header("Location: http://address.com/php/menu.php"); 
```

或者一个`include`：

```
Include("../php/menu.php"); 
```

更好的方法是在您的网站根目录中拥有一个公共库，您可以从中引用项目中所有文件的基本位置。也就是说，如果您在每个页面上都包含**/common.php**，那么您可以存储：

```
define('SITE_ROOT', dirname(__FILE__)); 
```

然后像往常一样绝对引用任何文档中的包含：

```
include(SITE_ROOT . 'php/menu.php'); 
```**

# jquery - 复选框变为未选中

> ID：11190485
> 
> 赞同：0
> 
> 时间：2012-06-25T13:44:41.443
> 
> 标签：jquery, jquery-ui, checkbox, dialog, jquery-ui-dialog

我有这种情况：http: [//jsfiddle.net/bRDgK/3/](http://jsfiddle.net/bRDgK/3/)

在这种情况下，我有一个带有复选框的模式对话框。当用户点击复选框时，应该会出现一个新的模式对话框，并且应该选中复选框。由于某些原因，该复选框未选中。知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:00:37.353

与`onchange`

演示：http: [//jsfiddle.net/bRDgK/10/](http://jsfiddle.net/bRDgK/10/)

**其他发现**

模态似乎是问题所在。模式弹出并干扰点击事件。关闭模式所有工作正常跨浏览器。建议检查 jQueryUI 论坛和/或报告错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T21:41:26.317

我真的不明白为什么，但如果我在打开子模式之前取消事件气泡（取消 firefox 的事件传播） - 复选框保持选中状态。

这是示例（仅在 IE 上工作，因为内联 onclick 事件和`window.event`用法）：http: [//jsfiddle.net/bRDgK/16/](http://jsfiddle.net/bRDgK/16/)

知道这如何解决问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:41:38.397

我让它适用于 Firefox 和 IE8。

[http://jsfiddle.net/executorjs/qevfZ/5/](http://jsfiddle.net/executorjs/qevfZ/5/)

我对 doSomething 函数进行了更改：

```
$(this).find("#ee").dialog("open"); 
```

还改变了一些html的位置：

```
<div id="rrr">
    <input type="checkbox" id="dd" onclick="doSomething();" />
</div>
<div id="ee"></div> 
```

# css - 如何合并两个div

> ID：11190488
> 
> 赞同：4
> 
> 时间：2012-06-25T13:44:49.760
> 
> 标签：css

我有两个应该看起来像一个数字的 div。问题出在圆形块的边界上。见图。以下。下面添加了css

![需要输入输出](../Images/05b3c6f5caba5bba6e47bf7154606610.png)

```
#nameWidgeteMain {
  width: 279px;
  height: 400px;
  top: 0px;
  position: absolute;
  background-color: rgb(237,237,237);
  border: 1px solid #dbe0e3;
  box-shadow: 0 0 20px rgba(0,0,0,0.08)
}
.nameWidgeteCloseArea {
  position: absolute;
  width: 22px;
  height: 31px;
  top: 7px;
  left: 270px;
  background-color: rgb(237,237,237);
  color: white;
  border: 1px solid #dbe0e3;
  border-top-left-radius: 50%;
  border-top-right-radius: 50%;
  border-bottom-right-radius: 50%;
  border-bottom-left-radius: 50%;
  text-align: center;
}

#nameWidgeteCloseTitle {
  padding-top: 5px;
  left: auto;
  font-family: sans-serif;
  font-size: 12pt;
  color: rgb(158, 158, 158);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T14:03:29.883

也许尝试这样的事情：http: [//jsfiddle.net/VNAZA/](http://jsfiddle.net/VNAZA/)

使用两个 div：一个只有边框，在矩形下方分层，另一个带有实际内容，在矩形上方分层。这样，您还可以将 css box-shadow 应用于较低的 div。

```
.container{
        position:relative;
        width: 50px;
        height: 150px;
    }

    .rect{
        position:absolute;
        width: 50px;
        height: 150px;
        background: #eee;
        border: 1px solid #000;
        z-index: 5;
        -webkit-box-shadow: 2px 2px 10px 2px #cccccc;
        box-shadow: 2px 2px 10px 2px #cccccc;
    }

    .round_content{
        position: absolute;
        top: 50px;
        right: -25px;
        width: 50px;
        line-height: 50px;
        background: #eee;
        z-index: 6;
        text-align:center;
        -webkit-border-radius: 10px;
        -moz-border-radius: 10px;
        border-radius: 10px;
    }

    .round_border{
        position: absolute;
        top: 49px;
        right: -26px;
        width: 52px;
        height: 50px;
        line-height: 52px;
        border: 1px solid #000;
        z-index: 4;
        text-align: center;
        -webkit-border-radius: 10px;
        -moz-border-radius: 10px;
        border-radius: 10px;
        -webkit-box-shadow: 2px 2px 10px 2px #cccccc;
        box-shadow: 2px 2px 10px 2px #cccccc;
    }
```

```
 <div class="container"> 
      <div class="rect"></div>
      <div class="round_content">x</div>
      <div class="round_border"></div>
    </div>
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T13:52:53.640

这在 CSS 中是不可能的。

解决方案 A) 涉及用作背景的图形，解决方案 B) 使用垂直条后面的一层来绘制椭圆，第二层用于条本身，第三个 DIV 用于 X 及其链接。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-25T13:59:50.957

使用[z-index 属性](http://www.w3schools.com/cssref/pr_pos_z-index.asp)。

```
#nameWidgeteMain, #nameWidgeteMain2 {
  width: 279px;
  height: 400px;
  top: 0px;
  position: absolute;
  background-color: rgb(237,237,237);
  box-shadow: 0 0 20px rgba(0,0,0,0.08)
}

#nameWidgeteMain2 {
  z-index: -2;
  border: 1px solid #dbe0e3;
}

.nameWidgeteCloseArea {
  z-index: -1;
  ...
} 
```

这不是合并，但结果是相同的。

# objective-c - 无法更新 Box2D？

> ID：11190489
> 
> 赞同：1
> 
> 时间：2012-06-25T13:44:52.190
> 
> 标签：objective-c, ios, xcode, cocos2d-iphone, box2d-iphone

我使用的是 Cocos2D 1.0.1，它没有得到最新的 Box2d。所以，我想将它更新到最新版本（v2.2.1）。我已按照以下步骤操作（步骤来自[此处](http://www.cocos2d-iphone.org/archives/1112)）：

1.  在 Xcode 中，从“cocos2d Sources”文件夹中删除 Box2D 文件夹组（删除参考）
2.  在 Finder 中，转到您的项目文件夹并删除 Box2D 文件夹
3.  将最新版本的 Box2D 复制回项目文件夹（确保只复制根深蒂固的“Box2D”文件夹，并删除 CMakeLists.txt 和 Box2DConfig.cmake）
4.  返回 Xcode，Project -> Add to Project，选择 Box2D 文件夹，确保选中创建组（不是文件夹引用），添加

我在这些步骤中做了所有事情，但是我在 GLES-Render 中遇到了许多错误，并且在初始化时遇到了一个错误，我该`b2World`
如何解决这些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:46:54.613

您必须更改 Box2D 的初始化。你做的那条线`new b2World(…)`。[它不采用与以前相同的参数](http://learn-cocos2d.com/api-ref/latest/Box2D/html/classb2_world.html)，只是一个重力矢量。

然后打开 GLES-Render.h 并将其子类从 更改为`b2Draw`。我相信它以前被命名为`b2DebugDraw`.

现在，吸取教训，升级源代码包实际上从来没有他们说的那么容易。更旧的升级过程的描述。这就是为什么在项目副本中进行这些更改总是好的建议，并且仅在您确实需要时进行升级。

# ruby - 如何编写这个 gsub 正则表达式匹配？

> ID：11190492
> 
> 赞同：-4
> 
> 时间：2012-06-25T13:45:07.977
> 
> 标签：ruby, regex

> **可能重复：**
> [为正则表达式匹配编写 gsub 的完美方式？](https://stackoverflow.com/questions/11190449/perfect-way-to-write-a-gsub-for-a-regex-match)

我正在尝试为正则表达式匹配编写 gsub，但我想有一种更完美的方法可以做到这一点。

我的方程式：

```
ref.gsub(ref.match(/settings(.*)/)[1], '') 
```

这样我就可以拿下这个`settings/animals`，然后回来就好了`settings`。

但如果`settings`为空怎么办？比我`[1]`预期的失败。

那么假设有时`settings`不匹配，怎么能写出上面的语句呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:49:17.777

使用`/(settings|)(.*)/`，然后第一组将返回*“设置”*或空字符串（如果不存在）。

```
puts 'settings/123'.match(/(settings|)(.*)/)[1];
puts 'Xettings/123'.match(/(settings|)(.*)/)[1]; 
```

# java - 本机 DLL 和 JRE 地址模型应该匹配吗？

> ID：11190493
> 
> 赞同：1
> 
> 时间：2012-06-25T13:45:09.290
> 
> 标签：java, c++, c, java-native-interface

可以从 64 位 JRE 加载 32 位原生 DLL 吗？如果不是最好的解决方案是什么？用户是否应该同时安装 32 位和 64 位版本的 JRE？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T13:58:43.477

JRE 的 32 位和 64 位版本都需要相应地安装和使用。请注意，这不是 JRE 的要求，而是 Windows 的要求。来自[64 位 Windows 编程指南](http://msdn.microsoft.com/en-us/library/aa384249.aspx)：

> ... 32 位进程无法加载 64 位 DLL 以执行，64 位进程无法加载 32 位 DLL 以执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:16:48.003

如果您想使用 64 位 JVM，但需要使用 32 位 DLL，您可以同时运行这两者，并在需要 DLL 执行某些操作时让 64 位 JVM 与 32 位 JVM 对话。

# android - XmlPullParser 不适用于 InputStream

> ID：11190494
> 
> 赞同：5
> 
> 时间：2012-06-25T13:45:21.137
> 
> 标签：android, xml-parsing, xmlpullparser

我在我的 android 应用程序中使用 XmlPullParser 进行 xml 解析，但是当我将输入设置为 InputStream 时它不起作用，而我将输入设置为 Reader 它开始工作

```
XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
factory.setNamespaceAware(true);
XmlPullParser xpp = factory.newPullParser();
xpp.setInput(obj,null);//obj is the object of InputStream
int eventType = xpp.getEventType();
while (eventType != XmlPullParser.END_DOCUMENT) {
                 logger.println("eventType.."+eventType);
              if(eventType == XmlPullParser.START_DOCUMENT) {

                     // control goes here only

              } else if(eventType == XmlPullParser.START_TAG) {
                  //This block never executed
                  }

              } else if(eventType == XmlPullParser.END_TAG) {
                 //This block never executed
              } else if(eventType == XmlPullParser.TEXT) {

              }
              eventType = xpp.next();
             } 
```

即使我将来自 InputStream 对象的数据存储在一个字符串中并将该字符串设置为输入，那么这段代码也可以正常工作。

```
xpp.setInput(new StringReader(str));//str contains the data from InputStream 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T08:25:34.790

同样的问题：直接传递 InputStream 在 Android 2.3.3 上可以正常工作，但在 4.1 上不起作用。您可以使用`xpp.setInput(new InputStreamReader(obj));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-07T17:31:11.653

在此线程上从 yano 获得了类似问题的答案：[XmlPullParser - unexpected token (android)](https://stackoverflow.com/questions/22438491/xmlpullparser-unexpected-token-android?rq=1)

您需要从文件从 res/xml 移动到 assets 并使用代码获取文件：

```
InputStream in = this.getAssets().open("sample.xml"); 
```

显然 getRawResource() 没有正确读取编码，如果你只是转储输入流的内容，就会有很多垃圾字符。

# java - 以下配置是什么意思（jaxb-fluent-api）？

> ID：11190497
> 
> 赞同：7
> 
> 时间：2012-06-25T13:45:49.320
> 
> 标签：java, web-services, spring, jaxb, jax-ws

我的 POM 文件中有以下配置。特别是 jaxb-fluent-api 配置。

```
<plugin>
    <groupId>org.jvnet.jaxb2.maven2</groupId>
    <artifactId>maven-jaxb2-plugin</artifactId>
    <configuration>
        <extension>true</extension>
        <args>
            <arg>-Xfluent-api</arg>
        </args>
        <schemaDirectory>src/main/resources</schemaDirectory>
        <plugins>
            <plugin>
                <groupId>net.java.dev.jaxb2-commons</groupId>
                <artifactId>jaxb-fluent-api</artifactId>
                <version>2.1.8</version>
            </plugin>
        </plugins>
    </configuration>
    <executions>
        <execution>
            <goals>
                <goal>generate</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

无需配置 jaxb-fluent-api 实体就可以从 xsd 生成。这里**使用 jaxb-fluent-api**有什么好处？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-25T14:56:45.813

这[`jaxb-fluent-api`](http://code.google.com/p/jaxb-fluent-api-ext)是一个 JAXB 扩展，允许您以*流畅的 api*样式生成代码。现在，*fluent api*是一种设计类方法的方式，因此它们总是返回`this`而不是`void`.

[项目 wiki](http://code.google.com/p/jaxb-fluent-api-ext/wiki/Introduction)上有一个很好的示例（为简洁起见，我将其缩短了一点，请访问[该站点](http://code.google.com/p/jaxb-fluent-api-ext/wiki/Introduction)以获取完整示例）：

正常`JAXB`生成的代码必须像这样使用：

```
Project project = factory.createProject();

project.setModelVersion("4.0.0");
project.setGroupId("redmosquito")
project.setArtifactId("jaxb-fluent-api-ext")
project.setPackaging("jar")
project.setVersion("0.0.1")
project.setName("JAXB Fluent API Extensions"); 
```

通过`jaxb-fluent-api`扩展，您可以像这样编写上面的代码：

```
Project project = factory.createProject()
    .withModelVersion("4.0.0");
    .withGroupId("redmosquito")
    .withArtifactId("jaxb-fluent-api-ext")
    .withPackaging("jar")
    .withVersion("0.0.1")
    .withName("JAXB Fluent API Extensions"); 
```

这基本上就是*fluent api*的全部内容。

# grails - 使用数据库迁移插件设置本地开发环境后，如何更新测试服务器

> ID：11190499
> 
> 赞同：1
> 
> 时间：2012-06-25T13:45:50.070
> 
> 标签：grails, database-migration, liquibase

按照文档，我能够让数据库迁移插件在一个现有项目上工作，该项目已经有很多表并且正在生产中运行。我在本地经历了以下过程：

```
Pulled down latest production database
Source production database to local dev
grails dbm-generate-changelog changelog.groovy
grails dbm-changelog-sync
grails dbm-gorm-diff 2012-06-25-latest.groovy --add
grails dbm-update 
```

我理解为什么我必须在本地执行每一项操作才能达到应用未来变更集的目的。但是，现在我想在我的一台测试服务器上运行我的 2012-06-25-latest.groovy。它已经拥有基于我们生产数据库的最新数据库。

我尝试只运行 dbm-update 但没有同步它无法创建已经存在的表。所以我运行了 dbm-changelog-sync 但是在运行 dbm-update 时它实际上并没有应用最新的文件。

我知道我可以将上下文（标签）添加到更改集并在运行 dbm-update 时指定该上下文，但我想知道这是否是解决此问题的唯一方法，或者我的工作流程是否需要修改；将更改日志应用于测试服务器的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:10:13.100

我最终做的是删除 DATABASECHANGELOG 表中 FILENAME = '2012-06-25-latest.groovy' 的所有行。然后我运行了 dbm-status，它告诉我有 256 个更改在等待。然后我运行了 dbm-update，一切都很好。

我不确定这是应该如何完成的，但它似乎奏效了。

更新：除此之外，我可能会在一个空数据库上运行整个迁移，然后只使用 INSERT 语句对生产数据库进行 mysqldump。

# powershell - Set-QADGroup，设置属性

> ID：11190501
> 
> 赞同：1
> 
> 时间：2012-06-25T13:46:02.947
> 
> 标签：powershell, quest

我无法使以下属性起作用：/

```
mail 
mailNickname 
name 
cn 
dn 
```

这背后的原因是因为我们将重命名 AD 中的每个对象（数千个组），并且我需要更改所有属性。

到处都在阅读 Quest，但是他们只以 displayName 为例，没有更高级的了。

我已经得到了以下工作：

```
get-QADGroup -SearchRoot 'ex.local/' -LdapFilter '(samaccountname=test_group*)' -GroupType 'Distribution' -IncludedProperties "displayName", "mailNickname", "name", "mail" | foreach-object {
    Set-QADGroup $_ –displayName ("new_displayname")
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:20:16.493

但有一件事，你不能通过设置 Name 属性来重命名组，你会得到一个错误。要重命名对象，请使用`Rename-QADObject`cmdlet

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:24:55.067

你可以试试：

设置 QADGroup $_ -ObjectAttributes @{mail = "New_Mail"; mailNickname = "New_mailNickname"; 名称=“新名称”}

`DN`并将`CN`在您将组从 OU 移动到另一个 OU 时更新。

# ios - RubyMotion 错误：消息“打开”类型“c@:”的 Objective-C 存根未预编译

> ID：11190505
> 
> 赞同：0
> 
> 时间：2012-06-25T13:46:23.750
> 
> 标签：ios, rubymotion

我的代码抛出错误。

> *消息“打开”类型“c@:”的 Objective-C 存根未预编译。确保您正确链接到定义此消息的框架或库。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:42:12.780

问题是因为 cocoapods 0.5.0。更新到 cocoapods 0.6.0.rc1 有帮助（0.6.0.rc2 也不起作用）

# php - 如何从托管在 Marklogic Server 上的应用程序运行 php 代码？

> ID：11190506
> 
> 赞同：0
> 
> 时间：2012-06-25T13:46:29.313
> 
> 标签：php, xquery, marklogic

我在 Marklogic 上创建了一个 HTTP 服务器来运行我的应用程序。现在我的应用程序有一个 xqy 页面。形成我想调用一个用 PHP 编写的页面的 xqy 页面。如何从 Marklogic 执行 PHP 页面？我还在我的机器上安装了 Wamp Server for PHP。从 PHP 代码执行的 Wamp 服务器内部，但我想从托管在 Marklogic 上的应用程序运行该 php 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:07:48.100

我想埃里克一定是说[`xdmp:http-get()`](http://docs.marklogic.com/xdmp%3ahttp-get)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:32:25.263

通过 xdmp:http-request() 发出 http 请求。

# python - python类方法不同于非类函数

> ID：11190508
> 
> 赞同：1
> 
> 时间：2012-06-25T13:46:35.410
> 
> 标签：python, class, function, methods, scope

我怀疑类方法对某些变量集的作用与相应的非类函数的作用不同。这是一个例子。假设我们有一组变量：A、B、C，我们想根据一些算法随着时间的推移修改它们。有两种可能的实现：

1）与类：

```
 class variables:
       def __init__(self):
           self.A = 0.0
           self.B = 0.0
           self.C = 0.0
       def changeA(self):
           self.A = some function of A, B and C         
       def changeB(self):
           self.B = some function of A, B and C
       def changeC(self):
           self.C = some function of A, B and C 
```

并多次调用：

```
 ob = variables()
    i = 0 
    while i<N:
        ob.changeA()
        ob.changeB()
        ob.changeC()
        i = i + 1 
```

2）没有类

```
 A, B, C = 0.0, 0.0, 0.0
    def changeA(A,B,C):
        A = some function of A, B and C (same as in class method)
        return A
    def changeB(A,B,C):
        B = some function of A, B and C (same as in class method)
        return B
    def changeC(A,B,C):
        C = some function of A, B and C (same as in class method)
        return C 
```

并多次调用：

```
 i = 0 
    while i<N:
        A = changeA(A,B,C)
        B = changeB(A,B,C)
        C = changeC(A,B,C)
        i = i + 1 
```

在我看来，两种方法的结果必须相同。唯一的区别是变量 A、B 和 C 已知的命名空间（对象中的本地或函数实现的全局 - 但在这两种情况下，方法都可以访问所需的变量）。但是，两种方法的结果似乎不同。所以我的问题是在类方法实现/理解中我缺少什么吗？

更具体地说，方法changeA的实现示例：

作为类方法：

```
 (... inside the class)
    def changeA(self):
        self.A = self.A + 2.0*self.B - 3.0*self.C*(self.B-self.A) 
```

作为一个函数：

```
 def changeA(A,B,C):
        A = A + 2.0*B - 3.0*C*(B-A)
        return A 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:56:11.057

我想说的是，在第一种情况下，每次`variables`创建一个新实例时`A`，`B`和的值都会`C`被重置，而在第二种方法中它们似乎是全局的，情况并非如此。根据您使用这些实例的方式，结果可能会受到影响。

**编辑：**在评论中OP的问题之后，这里是如何定义类变量：

```
>>> class Variables:
    A = 0.0
    B = 0.0
    C = 0.0

    def changeA(self):
           Variables.A = Variables.A + Variables.B * Variables.C

>>> v = Variables()
>>> v.changeA()
>>> v.A
0.0
>>> Variables.A
0.0
>>> 
```

如您所见，不再需要定义`__init__`方法。您可以通过`instance.A`或访问这些变量`class.A`。

# java - 如何将私钥和公钥存储到 KeyStore

> ID：11190509
> 
> 赞同：8
> 
> 时间：2012-06-25T13:46:36.777
> 
> 标签：java, rsa, keystore

All.I 正在开发一个 android 项目。我需要生成一个 RSA 密钥对，然后使用它们与他人通信。我需要将私钥和公钥存储在安全的地方，我发现可以使用 KeyStore。

我看到 KeyStore 可以存储 KeyStore.PrivateKeyEntry 但它需要一个 Certificate[] 链。我试图创建它但失败了......

有没有人可以粘贴一些用于存储私钥和公​​钥的示例代码。

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T17:32:11.107

就像您说的那样，为了将私钥存储到密钥库中，您需要私钥（您拥有）和相应公钥的证书链。您所拥有的只是公钥，您需要根据您的公钥从权威机构获取证书。是的，您可以对证书进行自签名。但我认为没有任何内置的 Java API 可以通过编程方式创建和自签名证书。

[在这个线程](https://stackoverflow.com/questions/9890313/how-to-use-keystore-in-java-to-store-private-key)上有类似的讨论。公认的解决方案描述了将私钥和公钥**存储在密钥库之外的受保护文件**中。

您可以在此处阅读有关 Java 密码体系结构的更多信息[http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html](http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html)

希望这可以帮助。

# coldfusion - 对象字面量内的 ColdFusion 局部范围

> ID：11190518
> 
> 赞同：4
> 
> 时间：2012-06-25T13:47:40.580
> 
> 标签：coldfusion, coldfusion-9

在对象文字中，在函数参数中使用 CF 的本地范围时，我看到了一些奇怪的行为。但只有在循环内执行时...

示例代码：

```
<cffunction name="f">
    <cfoutput>
        <cfset LOCAL.foo = 123 />       

        <!--- Works fine --->
        #serializeJSON({blah = LOCAL.foo})#

        <!--- Works fine --->
        <cfloop from=1 to=1 index="i">
            <cfset bar = {blah = LOCAL.foo} />
            #serializeJSON(bar)#
        </cfloop>

        <!--- Element FOO is undefined in LOCAL --->
        <cfloop from=1 to=1 index="i">  
            #serializeJSON({blah = LOCAL.foo})#
        </cfloop>
    </cfoutput>
</cffunction>

<cfset f() /> 
```

PS：`serializeJSON()`仅用于示例目的。这发生在我测试过的任何一个参数是结构的函数中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:58:36.610

在 Railo 中工作得很好。

如果使用任何其他容器而不是作用域，它也没有任何区别`local`，也不可能用`cftry`.

如果您仅在循环内序列化本地范围：

```
<cfloop from=1 to=1 index="i">
    #serializeJSON(local)#
</cfloop> 
```

结果是：

```
{"ARGUMENTS":{},"___IMPLICITARRYSTRUCTVAR1":{"BLAH":123},"___IMPLICITARRYSTRUCTVAR0":{"BLAH":123},"FOO":123} 
```

看起来像一个错误。介意[备案](https://bugbase.adobe.com/index.cfm?event=newBug)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:27:28.087

`LOCAL`是仅在函数中使用的范围。如果您尝试在`LOCAL`函数之外创建范围变量，它将失败。

我会写一个测试并在一分钟内向你证明......

**更新**实际上，我有 CF 8 在工作，无法测试它。

在 CF8 及以下版本中，您可以设置`LOCAL.Foo`，但它并不是真正的 CF 范围。

在 CF9 及以上版本中，`LOCAL`只能在一个函数内设置。

```
<cffunction>
   <cfset LOCAL.foo = 1>
   <cfreturn LOCAL.foo>
</cffunction> 
```

# html - 在链接中使用 HTML 表单的答案提交

> ID：11190519
> 
> 赞同：0
> 
> 时间：2012-06-25T13:47:40.820
> 
> 标签：html, forms, parameters, hyperlink, submit

我希望有人可以帮助我将答案提交给 HTML 表单作为链接的参数。例如，假设表单如下所示：

```
Name: _______
Question: ______ 
```

然后，当用户键入他们的答案并点击提交时，我希望将答案作为链接的参数放置，以便如果用户键入：

```
Name: Joe Smith
Question: How do I win? 
```

当用户然后按下提交时，将提交如下所示的链接：

```
https://myurl.com/Submit.asp?Name=Joe%20Smith&Question=How%20do%20I%20win? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:53:26.620

为您的表单使用方法类型 GET

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T13:53:49.513

你需要[使用](https://stackoverflow.com/questions/1116019/submitting-a-get-form-with-query-string-params-and-hidden-params-disappear) ，参考链接

```
 method="GET" 
```

更绅士化，

```
 <form action="url" method="GET">
    <input type="text" name="Name" value="" /> 
    <input type="text" name="Question" value="" /> 
    <input type="submit" /> 
   </form> 
```

因此，当您提交[表单](http://www.w3.org/TR/html401/interact/forms.html)时，它将自动构建查询字符串并将其附加到 url。

[在这里](http://www.w3.org/TR/html401/interact/forms.html#submit-format)完成***提交表格***

# linux - 在linux中编译用户空间代码

> ID：11190523
> 
> 赞同：0
> 
> 时间：2012-06-25T13:47:56.363
> 
> 标签：linux, compilation

一个非常基本的问题，我在互联网上搜索找不到答案。

基本上，我想知道：

1.  编译器如何区分用户空间代码和内核空间代码？
2.  与内核空间代码相比，编译用户空间代码的 makefile 是否不同？

最好的问候，库蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:53:27.287

编译器只遵循你传递给它的标志，其余的和往常一样，没什么神奇的。

举个小例子，看看[编写你自己的可加载内核模块](http://tldp.org/HOWTO/Module-HOWTO/x839.html)。另请参阅[模块与程序](http://www.tldp.org/LDP/lkmpg/2.6/html/x427.html)。

区别当然在于操作系统如何处理这些模块和程序以及它们具有哪些权限（另请参见[ring](http://en.wikipedia.org/wiki/Ring_%28computer_security%29)）。

# excel - Excel - 按时间跟踪使用情况

> ID：11190534
> 
> 赞同：-1
> 
> 时间：2012-06-25T13:48:45.863
> 
> 标签：excel

我有一个表格，以秒为增量显示日期时间、位置和真/假值 (VPN)。我想按时间和位置绘制使用情况 - 即：6-7、7-8 等之间有多少个位置。

这是数据的简短示例。如何小计时间和地点？

```
 DATE               LOC     VPN
19 Jun 2012 3:07:40 AM MST  TX30    1
19 Jun 2012 4:58:33 AM MST  TX30    1
19 Jun 2012 5:02:57 AM MST  AZ50    1
19 Jun 2012 5:06:17 AM MST  TX30    1
19 Jun 2012 5:06:38 AM MST  TX30    1
19 Jun 2012 5:07:01 AM MST  ZBR20   0
19 Jun 2012 5:08:24 AM MST  TX30    1
19 Jun 2012 5:08:26 AM MST  ZIL05   0
19 Jun 2012 5:09:26 AM MST  AZ50    1
19 Jun 2012 5:10:18 AM MST  TX30    0
19 Jun 2012 5:11:44 AM MST  ZCZ01   0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:02:53.410

对于位置数量，假设数据在 AC 列中：

Excel 2007+：

```
=COUNTIFS(A:A,">="&(DATE(2012,6,19)+TIME(5,0,0)),A:A,"<"&(DATE(2012,6,19)+TIME(6,0,0))) 
```

早期版本：

```
=SUMPRODUCT(--(A2:A100>=(DATE(2012,6,19)+TIME(5,0,0))),--(A2:A100<(DATE(2012,6,19)+TIME(6,0,0)))) 
```

# c#-4.0 - 返回字符串类型列的 HQL 查询

> ID：11190535
> 
> 赞同：0
> 
> 时间：2012-06-25T13:48:59.030
> 
> 标签：c#-4.0, hql, nhibernate-criteria

如何使用 HQL 检索字符串类型的单个列的值。我尝试了以下方式，但无法正常工作。

```
 public virtual string GetCityById(int Id)
    {
        using (var session = sessionFactory.OpenSession())
        {
            using (var transaction = session.BeginTransaction())
            {
                var queryString = string.Format("SELECT C.CityName FROM {0} AS C WHERE Id=:Id", typeof(T));
                return session.CreateQuery(queryString).SetInt32("Id", Id).ToString(); <--Also tried with .SetParameter("Id",Id)
            }
        }
    } 
```

预期输出为：

> 纽约

实际输出为：

> 从 FNHHelper.Entites.Cities 中选择名称，其中 Id=:Id

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:59:09.973

您正在返回查询的字符串表示形式。您只需要执行查询，并返回其唯一的结果：

```
session.CreateQuery(queryString).SetInt32("Id", Id).UniqueResult(); 
```

（假设方法名称与 Java 版本中的相同）。

# java - 使用 JNI 保护 Java 源代码

> ID：11190539
> 
> 赞同：1
> 
> 时间：2012-06-25T13:49:07.377
> 
> 标签：java, jar, java-native-interface, protection, copy-protection

我刚刚有了一个想法，是否可以使用 JNI 代码或其他东西来保护我的 java 源代码（打包到 jar 文件中），这些源代码是用自定义类加载器加载的？

由于无法反编译 JNI 代码，因此能够保护 java 代码也很棒。

那可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:53:14.403

我已经搜索了很多类似的东西，这是我的看法。

在 JVM 级别编写您自己的自定义引导类加载器，它必须用 C 编码。这个类加载器将使用加密密钥将已经加密的 java 类文件动态解密为字节数组以进行类定义。

现在您只剩下在哪里存储您的加密密钥以及如何保护它了。

最后，购买 Excelsior-Jet 可能会更好，我以前用过它，它是一个非常棒的应用程序。3,000 美元左右值得您花在上面。

# sql - 加入选择

> ID：11190540
> 
> 赞同：-1
> 
> 时间：2012-06-25T13:49:12.283
> 
> 标签：sql, sql-server, join

如何将此查询加入单选（没有临时表）？

```
SELECT  t2.value,
        t1.value
    FROM table0 t1
    INNER JOIN table1 t3 on t1.idrelation = t3.id and t3.idparent=@id
    INNER JOIN table2 t2 on t2.idversion = t3.idchild and t2.name = 'FOO'
    ORDER BY t1.value

SELECT SELECT COALESCE(t4._NAME+','+'') 
FROM table1 t1
JOIN table1 t2 on t2.idparent = t1.idchild
JOIN table1 t3 on t3.idparent = t2.idchild
JOIN table3 t4 on t4._ID = t3.idchild
WHERE t1.idparent = @id
AND t4._TYPE ='TXT_CAT' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:54:07.220

这样的事情会有所帮助（一旦你可以告诉你想要加入的列）：

```
select *
from
(
    QUERY 1
) q1
join
(
    QUERY 2
) q2
on q1.key1 = q2.key2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:56:52.740

如果你想加入他们，必须有共同点或不共同点。

当您加入结果集时，将 2 个选择放在一起是很容易的部分，但除非您想要 Ans1 和 Ans2 的所有排列，否则明智的做法是确定某种 where 子句以使其更有效，并缩小范围为你。

如果您提供更多表格信息，我们可以进行调整并为您提供进一步的信息，但这是我们可以做的最好的事情，而无需对您在这里尝试完成的任务进行任意猜测。

我可以给你一件事：

```
 Select A.name, B.id from (Select A.name, A.date from A) join (Select B.id, B.date from B) on A.date = B.date; 
```

# asp.net-mvc - 将多个参数传递给控制器

> ID：11190543
> 
> 赞同：1
> 
> 时间：2012-06-25T13:49:15.560
> 
> 标签：asp.net-mvc, razor

我有一种情况，我需要将两个参数传递给一个动作。我一直在使用下面的代码将参数传递给操作，但我看不到我是如何传递多个参数的。我该怎么做呢？

```
 @Html.ActionLink("Add Visit", "Create", "Visit", new { id = Model.Id }, null) 
```

顺便说一句 - ASP.NET MVC 4 RC

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T13:50:21.817

您应该用逗号分隔参数，如下所示：

```
 @Html.ActionLink("Add Visit", "Create", "Visit", 
                  new { id = Model.Id, secondParameter = Model.yourValue }, null) 
```

查看 MSDN 文档以了解[ActionLink](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.linkextensions.actionlink.aspx)方法。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:57:35.113

我从名为[T4MVC](http://t4mvc.codeplex.com/)的 CodePlex 添加。这通过使用 T4 模板和部分类的组合将所有字符串转换为方法调用。它将允许您将 ActionLink 方法转换为经过语法检查的方法调用。

```
@Html.ActionLink("Add Visit", "Create", "Visit", new { id = Model.Id }, null) 
```

会变成

```
@Html.ActionLink("Add Visit", MVC.Visit.Create(Model.Id)) 
```

和

```
@Html.ActionLink("Add Visit", "Create", "Visit", new { id = Model.Id, Param2 = "Param2", Param3= "Param3Value" }, null)
@Html.ActionLink("Add Visit", MVC.Visit.Create(Model.Id, "Param2", "Param3Value")) 
```

当您打开编译视图时，它可以挽救生命。

# python - 在 Python 中将半精度（2 字节）转换为浮点数

> ID：11190546
> 
> 赞同：3
> 
> 时间：2012-06-25T13:49:23.970
> 
> 标签：python, casting

我正在尝试读取一个包含 2 字节浮点数的二进制文件，但我似乎无法获得我想要的值。struct.unpack 似乎只适用于 4 字节浮点数，我不确定除了完全手动进行强制转换之外还有什么可用的。有没有办法做到这一点？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T14:28:34.990

你已经掌握了大部分的方法`numpy.fromfile`。而是使用`numpy.frombuffer`：

```
>>> np.frombuffer(buffer("\0\0"), dtype=np.float16)[0]
0.0
>>> np.frombuffer(buffer("\x00\x3c"), dtype=np.float16)[0]
1.0 
```

如果数据具有已知形式，您可以通过创建具有适当布局的 dtype 来解析结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:02:02.370

您可以将它们填充为 4 字节单精度浮点数；有几个人已经为您完成了繁重的工作：

*   [http://forums.devshed.com/python-programming-11/converting-half-precision-floating-point-numbers-from-hexidecimal-to-decimal-576842.html](http://forums.devshed.com/python-programming-11/converting-half-precision-floating-point-numbers-from-hexidecimal-to-decimal-576842.html)

*   [http://davidejones.com/blog/1413-python-precision-floating-point/](http://davidejones.com/blog/1413-python-precision-floating-point/)

*   [http://fpmurphy.blogspot.no/2008/12/half-precision-floating-point-format_14.html](http://fpmurphy.blogspot.no/2008/12/half-precision-floating-point-format_14.html)

他们都将格式解析为它的组成部分，如[Wikipedia article on the format 中所述](https://en.wikipedia.org/wiki/Half-precision_floating-point_format)，将 2 个字节填充为 4 个字节的单精度浮点数，然后将其反馈给 python struct 模块以将其转换为 python 浮点数。

# templates - magento - 放置模板的位置

> ID：11190549
> 
> 赞同：2
> 
> 时间：2012-06-25T13:49:29.647
> 
> 标签：templates, magento-1.6

我正在关注 Alan Storm Magento 教程 [http://alanstorm.com/layouts_blocks_and_templates](http://alanstorm.com/layouts_blocks_and_templates)

在本教程中，他建议在此位置创建一个 html 模板文件

```
app/design/frontend/base/default/template/simple_page.phtml 
```

但是，模板看起来像是按模块名称分组到其他目录中的。这是现在的标准吗？

我正在使用 Magento 1.6.2。我不确定该教程是针对哪个版本进行测试的。

*** 附加信息 ***

我在这个位置 app/design/frontend/base/default/layout/local.xml 创建了一个名为“local.xml”的文件

其中包含：

```
<layout version="0.1.0">
    <default>
        <reference name="root">
            <block type="page/html" name="root" output="toHtml" template="simple_page.phtml" />                         
        </reference>
    </default>
</layout> 
```

然后在目录中文件“simple_page.phtml”：

应用程序/设计/前端/基础/默认/模板/

其中包含：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>    
</head>
<body>
    <p>hello world</p>
</body>
</html> 
```

清除缓存后，我在主页上看到“白屏死机”，但是 helloworld 页面有效。

如果我删除 local.xml，首页会返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:57:03.710

这是一个简短的[Turorial](http://www.magentocommerce.com/design_guide/articles/working-with-magento-themes)，但主要概念是您制作自己的**主题/模板**并覆盖默认模板。

所以你可以在**系统 -> 配置 -> 设计**点下创建**主题主题**你将默认更改为你自己的主题名称，如“my_theme”。

休息你可以在教程中看到。您可以将带有主题名称的文件夹放入

```
app\code\frontend\default\my_theme 
```

然后，您可以将具有相同文件夹结构的默认模板复制到您的主题中，然后 magento 从您的主题文件夹中获取模板，而不是默认模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:19:29.830

继续阅读教程... [http://alanstorm.com/layouts_blocks_and_templates](http://alanstorm.com/layouts_blocks_and_templates)

“如果您转到 Magento 站点中的任何其他页面，您会注意到它们要么是空白的白色，要么具有与您的 hello world 页面相同的红色背景。让我们更改您的 local.xml 文件，使其仅适用于hello world 页面。我们将通过更改默认值来使用完整的操作名称句柄 (helloworldindexindex) 来做到这一点。”

```
<layout version="0.1.0">
    <helloworld_index_index>
        <reference name="root">
            <block type="page/html" name="root" output="toHtml" template="simple_page.phtml" />
        </reference>
    </helloworld_index_index>
</layout> 
```

# java - 高效的 bean 树状结构解析

> ID：11190552
> 
> 赞同：-1
> 
> 时间：2012-06-25T13:49:36.293
> 
> 标签：java, algorithm, sax, stax

```
Message
  date: Date
  remarks: String
  person: ContactPerson

Person
  name: PersonName
  surname: PersonName

ContactPerson extends Person

PersonName
  value: 
  language: String 
```

是否可以使用 StAX 或 SAX - 或任何其他框架可能有助于递归解析这样的 bean 树结构并替换备注、name.value 和 surname.value 中的一些字符？

我最初编写了一个递归算法来执行此操作，但对于大型 bean 树大约需要 4 秒。是否有任何框架/不同的解决方案来优化它？

UPDATE1：这些类型通常是从​​包含应该替换的有趣属性的基本类型扩展而来的。例如，ContactPerson 扩展了 Person，其中包含应替换值的姓名和姓氏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:55:48.773

如果您尝试通过某种属性路径显式设置嵌套 bean 中的属性，例如“message.person.name.value”，您可以尝试使用类似`BeanUtils.setProperty`允许通过路径表达式访问嵌套属性的东西。

# r - 确定一个数字是否在 R 中的数字范围内

> ID：11190555
> 
> 赞同：1
> 
> 时间：2012-06-25T13:49:56.153
> 
> 标签：r, plot

我知道标题使这听起来很容易，但我有一个 For 循环来绘制我的数据。随着值的变化，X 轴的限制也不同（每个图的起点和终点不同）。但是，我希望有一个已定义的 X 轴范围，该范围对于所有相似的图都保持不变。这很复杂，因为我想要的 X 有大约 40 个可能的范围。

对于每个图，我有一个我想从中选择的 x-lims 的数据框。它基本上看起来像：

```
 Trait  start    end
    A     123456   134567
    B     234546   245678
    C     234546   245678
    D     345678   356789 
```

等等。所以，如果一个循环给我的值：特征 C，开始 = 235000 和结束 = 240000，我想自动使用第三组默认 X-lims。

编辑：添加了更多信息（特征）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:02:27.843

如果您显示的 data.frame 被调用`df`（并且您确定您的变量`end`将大于`start`），这应该有效：

```
which(start > df$start & end < df$end)[1] 
```

* * *

**修改以回答修改后的问题**

随着您添加更多条件，您可以扩展上述逻辑：

```
## Make your data easily reproducible for others
df <- read.table(text="Trait  start    end
    A     123456   134567
    B     234546   245678
    C     234546   245678
    D     345678   356789", header=TRUE)

## Set values from within your example loop
Trait <- "C"
start <- 235000
end <- 240000

## Get index of desired row
i <- which(Trait==df$Trait & start > df$start & end < df$end)[1]
## Extract xlim values in the form of a numeric vector
myxlim <- unname(unlist(df[i, c("start", "end")]))
myxlim
[1] 234546 245678 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T16:03:19.323

我不确定我是否完全遵循这个问题。如果我对您的理解正确，您希望确保每个图的范围为 11111（在此示例中，无论如何），但上限值和下限值会有很大差异。所以，现在，您正在寻找一种方法来创建您可能想要的所有可能的上限和下限的表格，然后您想在绘图时查找它们。

我建议您可以通过简单地编写 plot 语句来确保最小值和最大值始终相距 11111 来更容易地做到这一点。

假设您在一次循环迭代中得到了 start <- 235000、end <- 240000 和 trait <- B。你能像这样构造你的代码吗？

```
diff <- end-start
gap <- 11111-diff
plot(thing_you_plot,xlim(start-(gap/2),end+(gap/2)) 
```

带数字：

```
diff <- 240000-235000 (5000)
gap <- 11111-5000 (6111)
plot(thing_you_plot,xlim(235000-(6111/2),240000+(6111/2)) 

(x limits are: 231944.5,243055.5, making the plot 11111 in length) 
```

显然，如果您愿意，可以使用下限和上限函数来获取整数而不是小数。您的问题尚不清楚“特征”如何真正影响尺寸；如果你可以有两个使用相同维度绘制的特征（B 和 C），为什么你还需要这张表呢？我认为您可以使用简单的函数为每个绘图做得更好。

**根据修订编辑：**

乔什打败了我，但又来了，因为我几乎把它都打字了。

```
df <- data.frame(trait=c("A","B","C","D"),
                 start=c(123456,234546,234546,345678),
                 end=c(134567,245678,245678,356789))

trait <- "C"
start <- 235000
end <- 240000

xmin <- df[which(start > df$start & end < df$end & trait == df$trait),2]
xmax <- df[which(start > df$start & end < df$end & trait == df$trait),3] 
```

# javascript - 如何将值应用于javascript中所有组合的模式？

> ID：11190556
> 
> 赞同：0
> 
> 时间：2012-06-25T13:50:18.447
> 
> 标签：javascript, pattern-matching, combinations

我有以下二维数组输入：

```
 var arr = [ 
        ['A', ['Sun','Moon']],
        ['B', ['Cat','Dog']],
        ['C', ['John','Peter','Zora']]
 ]; 
```

使用该输入，我希望将所有组合应用于 javascript 中的给定模式：

模式中的占位符格式如下： $( *name* )

*以下是一些带有结果的示例模式：*

```
 var pattern1 = "$(A) / $(A)";
 /* Expected Result
    "Sun / Sun"
    "Sun / Moon"
    "Moon / Sun"
    "Moon / Moon"
 */

 var pattern2 = "$(A)--$(B)";
/* Expected Result
    "Sun--Cat"
    "Sun--Dog"
    "Moon--Cat"
    "Moon--Dog"
*/

 var pattern3 = "$(C) + $(B)";
/* Expected Result
    "John + Cat"
    "John + Dog"
    "Peter + Cat"
    "Peter + Dog"
    "Zora + Cat"
    "Zora + Dog"    
*/

  var pattern4 = "$(A) - $(A) * ( $(B) + $(C) )";
/* Expected Result
    "Sun -  Sun * ( Cat + John )"
    "Sun -  Sun * ( Cat + Peter )"
    "Sun -  Sun * ( Cat + Zora )"
    "Sun -  Sun * ( Dog + John )"
    "Sun -  Sun * ( Dog + Peter )"
    "Sun -  Sun * ( Dog + Zora )"
    "Sun -  Moon * ( Cat + John )"
    "Sun -  Moon * ( Cat + Peter )"
    "Sun -  Moon * ( Cat + Zora )"
    "Sun -  Moon * ( Dog + John )"
    "Sun -  Moon * ( Dog + Peter )"
    "Sun -  Moon * ( Dog + Zora )"
    "Moon -  Sun * ( Cat + John )"
    "Moon -  Sun * ( Cat + Peter )"
    "Moon -  Sun * ( Cat + Zora )"
    "Moon -  Sun * ( Dog + John )"
    "Moon -  Sun * ( Dog + Peter )"
    "Moon -  Sun * ( Dog + Zora )"
    "Moon -  Moon * ( Cat + John )"
    "Moon -  Moon * ( Cat + Peter )"
    "Moon -  Moon * ( Cat + Zora )"
    "Moon -  Moon * ( Dog + John )"
    "Moon -  Moon * ( Dog + Peter )"
    "Moon -  Moon * ( Dog + Zora )"
*/ 
```

模式可以是任意组合（带有重复的占位符）和任意长度。

有人可以帮助我使用javascript中的算法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:58:23.000

您可以一次更换一个占位符。

示例：从数组中的模式开始：

```
["$(A) / $(A)"] 
```

替换第一个占位符并为所有组合创建字符串：

```
["Sun / $(A)", "Moon / $(A)"] 
```

替换每个字符串中的下一个占位符并为所有组合创建字符串：

```
["Sun / Sun", "Sun / Moon", "Moon / Sun", "Moon / Moon"] 
```

重复直到没有更多的占位符。

演示：http: [//jsfiddle.net/Guffa/qGBpg/](http://jsfiddle.net/Guffa/qGBpg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:22:48.500

您可以使用递归函数来执行此操作。

首先，您必须从字符串中提取名称。您可以使用正则表达式执行此操作：

```
var regex = /\$\(([A-Z])\)/g,
    names = [], match;

while(match = regex.exec(pattern)) {
    names.push(match[1]);
} 
```

然后你把这个列表加上你的值的映射传递给一个递归地遍历名称的函数：

```
function create_combinations(pattern, names, map, index) {
    index = index || 0;
    var name = names[index],
        values = map[name],
        needle = "$(" + name + ")",
        combinations = [],
        sub;

    if (index === names.length - 1) {
        for (var i = 0, l = values.length; i < l; i++) {
            combinations.push(pattern.replace(needle, values[i]));
        }
    }
    else {
        for (var i = 0, l = values.length; i < l; i++) {
            sub = pattern.replace(needle, values[i]);
            combinations = combinations.concat(create_combinations(sub, names, map, index + 1));
        }
    }
    return combinations;
} 
```

这要求您的数据结构将是一个对象：

```
var map = { 
    'A': ['Sun','Moon'],
    'B': ['Cat','Dog'],
    'C': ['John','Peter','Zora']
}; 
```

然后你用

```
create_combinations(pattern, names, map); 
```

[**演示**](http://jsfiddle.net/fkling/dT4b9/)

# c++ - MsBuild 任务不会将本机 C++ 输出放入 TargetOutputs ItemGroup

> ID：11190562
> 
> 赞同：2
> 
> 时间：2012-06-25T13:50:32.917
> 
> 标签：c++, msbuild

我刚刚将包含 VC++（本机和托管）项目以及 C# 项目的软件从 .NET 3.5 迁移到 4.0。我们使用 MsBuild 构建，现在享受 MsBuild 4.0 的好处，它现在以相同的方式处理 C# 和 C++ 项目。有一个问题，但是到目前为止我无法解决。

我正在使用 TargetOutputs ItemGroup 来进一步处理生成的二进制文件。这适用于 C# 和托管 C++（clr 支持），但即使项目已正确构建，本机 C++ 程序集（无公共语言运行时支持）也不会放置在此 ItemGroup 中。

这是正在使用的语句，之后 @(MyProjectsOutput) 不包含本机 C++ 程序集。

```
<MSBuild Projects="@(MyProjects)" Targets="Rebuild" Properties="Platform=x64;Configuration=Release">
  <Output TaskParameter="TargetOutputs" ItemName="MyProjectsOutput" />
</MSBuild> 
```

知道可能是什么原因吗？我很困在这里......提前谢谢。

埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:20:03.170

经过一番调查，我创建了一个空的 C++ 控制台应用程序和这个简单的 MsBuild 脚本：

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Target Name="Build" Outputs="" Condition="">
    <ItemGroup>
      <MyProjects Include="test\test.vcxproj">
      </MyProjects>
    </ItemGroup>
    <MSBuild Projects="@(MyProjects)">
      <Output TaskParameter="TargetOutputs" ItemName="MyProjectsOutput" />
    </MSBuild>
    <Message Importance="high" Text="MyProjects: @(MyProjects)"></Message>
    <Message Importance="high" Text="MyProjectsOutput: @(MyProjectsOutput)"></Message>
  </Target>
</Project> 
```

test.exe 已成功构建，但 ItemGroup @(MyProjectOutput) 仍然不包含该文件。当我将 test.vcxproj 更改为“公共语言运行时支持 (/clr)”时，输出会正确显示。这似乎是 MsBuild 中的一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-24T15:16:46.757

您可以使用`GetNativeTargetPath`MSBuild 任务上的目标名称来获取本机 C++ 项目的输出文件路径：

```
 <MSBuild Projects="my.vcxproj" Targets="GetNativeTargetPath">
        <Output ItemName="MyOutput" TaskParameter="TargetOutputs"/>
    </MSBuild> 
```

# android - GridView 在更新后打乱视图

> ID：11190569
> 
> 赞同：1
> 
> 时间：2012-06-25T13:50:49.100
> 
> 标签：android, gridview, android-gridview

*是的，我看过其他问题，但那里的答案对我没有帮助。*

我的应用程序从 Web 加载的图像放置在`GridView`. 这是和的`getView`代码`onScrollStateChanged`：

```
@Override
public void onScrollStateChanged(AbsListView absListView, int scrollState) {

    switch(scrollState) {
        case SCROLL_STATE_FLING :
        case SCROLL_STATE_TOUCH_SCROLL :
            downloader.stopAll();
            adapter.removeExecutor(productCategoriesExecutor);
        break;

        case SCROLL_STATE_IDLE :
            loadProductsChunk();
        break;
    }
}

@Override
public View getView(int i, View view, ViewGroup viewGroup) {
    ProductView productView = (ProductView)view;

    if(productView == null) {
        productView = new ProductView(context, downloader);
        productView.setLayoutParams(new GridView.LayoutParams(columnWidth, rowHeight));
    }

    JSONObject product = getItem(i);

    if(product != null) {
        try {
            Log.i("ololo", String.format("thm: %d ", i) + product.getString("thumbnail"));

            productView.setNewPrice(product.getInt("price"));
            productView.setOldPrice(product.getInt("oldPrice"));
            productView.showThumbnail(product.getString("thumbnail"));
        } catch (JSONException e) {
            e.printStackTrace();
        }
    }
    else {
        productView.setNewPrice(0);
        productView.setOldPrice(0);
        productView.showThumbnail(null);
    }
    return productView;
} 
```

还有`GridView`：

```
<GridView
        android:id="@+id/productsGrid"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:verticalSpacing="@dimen/products_list_grid_spacing"
        android:horizontalSpacing="@dimen/products_list_grid_spacing"
        android:stretchMode="columnWidth"
        android:scrollingCache="false"
        android:alwaysDrawnWithCache="false"
    /> 
```

如您所见，`ProductView`接收链接然后加载（或从缓存中获取）图像。刷新是在哪里执行，也不是在触摸，现在滚动都不是活动的。

```
public void displayRemoteImage(RemoteImage remoteImage) {
    if(this.remoteImage != null) {
        Log.i("ololo", this.remoteImage.getUrl() + remoteImage.getUrl());
    }

    if(this.remoteImage == null || !this.remoteImage.getUrl().equals(remoteImage.getUrl())) {
        this.remoteImage = remoteImage;
        this.remoteImage.setDelegate(this);
    }
} 
```

![好的](../Images/190b81eaefbffcabaa07b5ad797d46db.png)

但是，如果我滚动到任何地方并返回（使用其他图片），它们会闪烁！
好吧，这不是什么大问题。
让我们再加载一行

![在此处输入图像描述](../Images/4335d7ef54eb2ec3f9ee2be182088778.png)

搞什么鬼？？
而且-是的-如果我滚动到任何地方并返回，就会有需要的图片（并且没有重新加载）。

好吧，也许我们是失败者并且搞砸了我们的下载？让我们简单地刷新图片：

![在此处输入图像描述](../Images/4bc967e5b9faeccc476ceaa4dd36c409.png)

哈哈。你们太无聊了，我回家了。

以下是更新日志：

```
06-25 17:26:09.759: INFO/ololo(6613): viewId: 0, should show the link: http://mysite//img/products/3/3031/3031thm.jpg
06-25 17:26:09.779: INFO/ololo(6613): original link: http://mysite//img/products/41/41230/41230thm.jpg; should show: http://mysite//img/products/3/3031/3031thm.jpg
06-25 17:26:09.779: INFO/ololo(6613): viewId: 0, should show the link: http://mysite//img/products/3/3031/3031thm.jpg
06-25 17:26:09.859: INFO/ololo(6613): original link: http://mysite//img/products/3/3031/3031thm.jpg; should show: http://mysite//img/products/3/3031/3031thm.jpg
06-25 17:26:09.869: INFO/ololo(6613): viewId: 0, should show the link: http://mysite//img/products/3/3031/3031thm.jpg
06-25 17:26:09.889: INFO/ololo(6613): original link: http://mysite//img/products/3/3031/3031thm.jpg; should show: http://mysite//img/products/3/3031/3031thm.jpg
06-25 17:26:09.889: INFO/ololo(6613): viewId: 0, should show the link: http://mysite//img/products/3/3031/3031thm.jpg
06-25 17:26:09.909: INFO/ololo(6613): original link: http://mysite//img/products/40/40963/40963thm.jpg; should show: http://mysite//img/products/3/3031/3031thm.jpg
06-25 17:26:09.919: INFO/ololo(6613): viewId: 1, should show the link: http://mysite//img/products/40/40748/40748thm.jpg
06-25 17:26:09.939: INFO/ololo(6613): original link: http://mysite//img/products/40/40940/40940thm.jpg; should show: http://mysite//img/products/40/40748/40748thm.jpg
06-25 17:26:09.939: INFO/ololo(6613): viewId: 2, should show the link: http://mysite//img/products/40/40771/40771thm.jpg
06-25 17:26:09.999: INFO/ololo(6613): original link: http://mysite//img/products/40/40934/40934thm.jpg; should show: http://mysite//img/products/40/40771/40771thm.jpg
06-25 17:26:09.999: INFO/ololo(6613): viewId: 3, should show the link: http://mysite//img/products/40/40790/40790thm.jpg
06-25 17:26:10.009: INFO/ololo(6613): original link: http://mysite//img/products/40/40914/40914thm.jpg; should show: http://mysite//img/products/40/40790/40790thm.jpg
06-25 17:26:10.009: INFO/ololo(6613): viewId: 4, should show the link: http://mysite//img/products/40/40913/40913thm.jpg
06-25 17:26:10.029: INFO/ololo(6613): original link: http://mysite//img/products/40/40913/40913thm.jpg; should show: http://mysite//img/products/40/40913/40913thm.jpg
06-25 17:26:10.029: INFO/ololo(6613): viewId: 5, should show the link: http://mysite//img/products/40/40914/40914thm.jpg
06-25 17:26:10.049: INFO/ololo(6613): original link: http://mysite//img/products/40/40790/40790thm.jpg; should show: http://mysite//img/products/40/40914/40914thm.jpg
06-25 17:26:10.049: INFO/ololo(6613): viewId: 6, should show the link: http://mysite//img/products/40/40934/40934thm.jpg
06-25 17:26:10.069: INFO/ololo(6613): original link: http://mysite//img/products/40/40771/40771thm.jpg; should show: http://mysite//img/products/40/40934/40934thm.jpg
06-25 17:26:10.069: INFO/ololo(6613): viewId: 7, should show the link: http://mysite//img/products/40/40940/40940thm.jpg
06-25 17:26:10.089: INFO/ololo(6613): original link: http://mysite//img/products/40/40748/40748thm.jpg; should show: http://mysite//img/products/40/40940/40940thm.jpg
06-25 17:26:10.099: INFO/ololo(6613): viewId: 8, should show the link: http://mysite//img/products/40/40963/40963thm.jpg
06-25 17:26:10.159: INFO/ololo(6613): original link: http://mysite//img/products/3/3031/3031thm.jpg; should show: http://mysite//img/products/40/40963/40963thm.jpg
06-25 17:26:10.330: INFO/ololo(6613): viewId: 0, should show the link: http://mysite//img/products/3/3031/3031thm.jpg
06-25 17:26:10.340: INFO/ololo(6613): original link: http://mysite//img/products/3/3031/3031thm.jpg; should show: http://mysite//img/products/3/3031/3031thm.jpg
06-25 17:26:10.340: INFO/ololo(6613): viewId: 0, should show the link: http://mysite//img/products/3/3031/3031thm.jpg
06-25 17:26:10.390: INFO/ololo(6613): original link: http://mysite//img/products/3/3031/3031thm.jpg; should show: http://mysite//img/products/3/3031/3031thm.jpg
06-25 17:26:10.390: INFO/ololo(6613): viewId: 0, should show the link: http://mysite//img/products/3/3031/3031thm.jpg
06-25 17:26:10.410: INFO/ololo(6613): original link: http://mysite//img/products/3/3031/3031thm.jpg; should show: http://mysite//img/products/3/3031/3031thm.jpg 
```

## 更新

这在 HTC Explorer (2.3.3) 和 HTC Nexus One (2.3.6) 上发生，但在三星 Galaxy Tab 10.1 (3.2) 上没有发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:58:08.040

它来自于内心的实现`BaseAdapter`。似乎它将视图存储在堆栈或类似的东西中，因此在屏幕更新后它以相反的顺序放置视图。解决方案是尽可能加快数据刷新速度。请记住，您不应该使用异步数据刷新：它会导致闪烁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:18:42.980

使用 ViewHolder 模式。和一个下载和缓存的 ImageManager。

# php - 从数组数据创建逗号分隔的字符串时如何避免尾随/额外的逗号？

> ID：11190573
> 
> 赞同：-1
> 
> 时间：2012-06-25T13:51:10.543
> 
> 标签：php, xml, arrays, wordpress, list

我对 PHP 很陌生，我所要做的就是获取所有选定的值并将它们打印出来，用逗号分隔它们，但是，我需要在列表中的最后一项之后删除最后一个逗号。

```
<?php $favoriteFruit = get_post_meta($post->ID, 'Favorite Fruit', false) ?>
<?php if ($favoriteFruit != null): ?>
    <attribute key="FavoriteFruit" 
               value="<?php foreach($favoriteFruit as $fruit){
                                    echo $fruit.',';
                            } ?>"
               />
<?php endif ?> 
```

这个打印出列表中的所有项目并且不会删除最后一个逗号。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T13:53:16.197

有两种方法可以做到这一点。最简单的方法是使用[`implode()`](http://php.net/implode), 通过改变这个：

```
foreach($favoriteFruit as $fruit){echo $fruit.',';} 
```

到：

```
echo implode( ',', $favoriteFruit); 
```

另一种方法是使用[`rtrim()`](http://php.net/rtrim)从字符串右侧修剪逗号，但由于您有一个数组，您必须自己形成字符串，如下所示：

```
$str = '';
foreach($favoriteFruit as $fruit){ $str .= $fruit .',';} 
echo rtrim( $str, ','); 
```

话虽如此，我建议使用`implode()`它，因为它简单、简单、直接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T13:54:06.190

使用逗号作为分隔符简单地对数组进行内爆怎么样：

```
<?php echo implode(',',$favoriteFruit);?> 
```

* * *

只是为了好玩：因为人们指出你可以保持循环并使用`rtrim`，并且 - 谢天谢地，建议不要这样做。这是另一种不必要的复杂和荒谬的方法，也是有效的：

```
echo vsprintf('%s'.str_repeat(',%s',(count($favoriteFruit)-1)),$favoriteFruit);
//or, the other way round:
echo vsprintf(str_repeat('%s,',(count($favoriteFruit)-1)).'%s',$favoriteFruit); 
```

无论您做什么，都不要使用此代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T13:53:12.753

您可以使用[implode()](http://php.net/implode)而不是[foreach()](http://nl3.php.net/manual/en/control-structures.foreach.php)：

```
<?php $favoriteFruit = get_post_meta($post->ID, 'Favorite Fruit', false) ?>
<?php if ($favoriteFruit != null): ?><attribute key="FavoriteFruit" value="<?php echo implode(",", $favoriteFruit);?>" /><?php endif ?> 
```

* * *

我改变了这个：

```
<?php foreach($favoriteFruit as $fruit){echo $fruit.',';}?> 
```

对此：

```
<?php echo implode(",", $favoriteFruit);?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T13:55:16.230

您可以使用`imlpode`函数（参见[http://php.net/manual/en/function.implode.php](http://php.net/manual/en/function.implode.php)）或`join`（实际上是 的同义词`implode`）（参见[http://www.php.net/manual/en/function.加入.php](http://www.php.net/manual/en/function.join.php) )

# c# - 用户控件的下拉菜单导致更新面板内的完整回发

> ID：11190574
> 
> 赞同：0
> 
> 时间：2012-06-25T13:51:14.773
> 
> 标签：c#, asp.net

我正在处理 asp.net 应用程序，我有一个这样的更新面板：

```
 <asp:UpdatePanel ID="upCheckout" runat="server">
                    <ContentTemplate>
                        <!-- BillingAddress -->
                        <div runat="server" id="pnlBillingAddress" class="checkoutstep">

                            <asp:Panel runat="server" ID="pnlBillingAddressContent" class="stepcontent">
                                <nopCommerce:CheckoutBillingAddress ID="ctrlCheckoutBillingAddress" runat="server"
                                    OnePageCheckout="true" OnCheckoutStepChanged="ctrlCheckoutBillingAddress_CheckoutStepChanged" />

                                <asp:CheckBox ID="chkShippingSameAsBilling" runat="server" Text="  Ship to same address"
                                    AutoPostBack="true" Checked="true" onclick="ShowShippingAddress();" /><br />
                            </asp:Panel>
                        </div>
                        <!-- ShippingAddress -->
                        <div runat="server" id="pnlShippingAddress" class="checkoutstep">                                
                            <asp:Panel runat="server" ID="pnlShippingAddressContent" class="stepcontent">
                                <nopCommerce:CheckoutShippingAddress ID="ctrlCheckoutShippingAddress" runat="server"
                                    OnePageCheckout="true" OnCheckoutStepChanged="ctrlCheckoutShippingAddress_CheckoutStepChanged" />                                    
                            </asp:Panel>
                        </div>
                    </ContentTemplate>
                </asp:UpdatePanel> 
```

其中帐单地址是用户控件。在帐单地址控制中，有一个下拉列表。像这样：

```
 <asp:DropDownList ID="drpBillingAddresses" ClientIDMode="Static" runat="server" AutoPostBack="True" OnSelectedIndexChanged="drpBillingAddresses_SelectedIndexChanged">
                        </asp:DropDownList> 
```

但是当我更改下拉选择时，我会得到完整的回发而不是部分回发。为什么我得到完整的回发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:53:11.280

通过设置UpdatePanel的[Triggers](http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers)属性将事件注册`OnSelectedIndexChanged`为异步。

# javascript - Batman.js 视图中的动态类名

> ID：11190576
> 
> 赞同：3
> 
> 时间：2012-06-25T13:51:19.913
> 
> 标签：javascript, jquery, batman.js

[我的问题与在 Backbone.js 视图中动态设置 id 和 className](https://stackoverflow.com/questions/7033134/setting-id-and-classname-dynamically-in-backbone-js-views)非常接近，但对于 batman.js。在蝙蝠侠中有`data-addclass`方法，但我需要这样的东西：

```
<span data-class="item.color"></span> 
```

例如会产生什么：

```
<span class="yellow"></span> 
```

在 batman.js 中执行此类操作的最佳实践是什么？也许我应该用`data-bind`jquery 使用和检测类？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T14:28:53.070

`data-bind-`最简单的方法是直接对您想要更改的属性执行 a ，在这种情况下为`class`。

```
<span data-bind-class="someBatmanVariable">Here is my content</span> 
```

where`someBatmanVariable`只是您在控制器中设置的东西，它解析为您希望`span`拥有的类。

你可以更进一步，把你想要的任何东西放在任何地方。您可以绑定到大多数属性，它们会更新。不要忘记，通过不指定属性（香草`data-bind`），蝙蝠侠将默认为符合逻辑的内容，通常是标签的内容，或者在`input`元素的情况下，`value`.

最后，一定要看看[蝙蝠侠视图过滤器](http://batmanjs.org/docs/batman.html#batman-view-filters)。您可以稍微按摩一下输出。

# javascript - 一键在一个窗口中打开两个不同的链接图像

> ID：11190577
> 
> 赞同：1
> 
> 时间：2012-06-25T13:51:21.690
> 
> 标签：javascript, html, tags

我想一键在一个窗口中打开两个不同的链接图像。

例如，有两个不同的图像链接，但我想一键在同一个窗口中打开这两个图像。我曾尝试一次单击打开两个不同的链接或图像，但他们在另一个窗口中打开它我想在同一个窗口或新窗口中打开这两个图像，但它们必须在一个窗口中打开，彼此相邻

这就是我一键在其他两个窗口中打开链接的方法

```
<a href="http://www.example.org" onclick="window.open('http://www.google.com','newwin');">click me</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:04:52.327

```
try this

<script>
function openLink(firstlink,secondlink){
document.getElementById('linkopen').innerHTML='<iframe src="'+firstlink+'"></iframe><iframe src="'+secondlink+'"></iframe>';
}
</script>

<a href="javascript:;" onclick="openLink('http://www.google.com','http://www.yahoo.com');">Open two Link</a>
<div id="linkopen"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:00:29.250

您可以使用jQuery，传递要在锚的href和rel属性中打开`<a href="imageURL1" rel="imageURL2" />`的两个图像的URL，就像这样，然后使用jQuery处理两个图像的打开，获取`rel`和`href`值，通过将两个图像分配给它们来加载它们`src`像这样：

```
$(imgSelector1).attr("src",imageURL1);
$(imgSelector2).attr("src",imageURL2); 
```

不要忘记处理单击事件并传递控制权，以便它们执行上述代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:01:44.727

您可以创建一个接受（url 编码的）url 列表作为查询参数的页面，如下所示

```
?url1&url2&url3 
```

然后该页面可以使用 javascript 从查询字符串 url 中加载所有图像

```
urls = location.href.split('?')[1].split('&');
for(var i = 0; i < urls.length; i++)
  $('body').append($("<img>").attr("src", urls[i])); 
```

# android - 自己的activity到activity的过渡效果

> ID：11190579
> 
> 赞同：0
> 
> 时间：2012-06-25T13:51:23.813
> 
> 标签：android, animation, android-activity, transition

我做了一个布局动画，它是一个复合动画，用代码制作。更不用说它的工作方式有点像通过屏幕上边缘滑入/滑出，我感兴趣的是在该动画之后立即看到新活动，因此在此期间我可以看到我要去的新视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:02:43.333

好的，要做我想做的事，我必须使用支持库 v4 中的片段，我只是将视图作为片段持有者的叠加层，实现动画后我可以在我的动画叠加层下方找到片段，我发现没有办法做到这一点标准活动

# aptana - Aptana：App Explorer 与 Project Explorer

> ID：11190583
> 
> 赞同：3
> 
> 时间：2012-06-25T13:52:02.627
> 
> 标签：aptana, aptana3

我想知道 Aptana 为什么在大多数版本的 Eclipse 中通常附带的通常的 Project Explorer 面板的左侧有一个额外的 App Explorer 面板。为什么 Aptana 需要两个这样的面板？两者之间的目的和功能的确切区别是什么？

谢谢，

约翰·戈切

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:27:55.193

您应该检查一下： [Eclipse Package Explorer 和 Eclipse Project Explorer 有什么区别？](https://stackoverflow.com/questions/1265070/what-is-the-difference-between-the-eclipse-package-explorer-and-the-eclipse-proj)

您可以使用两个面板执行类似的操作，但 App Explorer 可以让您更仔细地查看您的应用程序和与之相关的文件，Project Explorer 可以让您更全面地了解您的应用程序和文件系统，例如在复制文件时可能有用的东西进入您的项目工作区。

# c++ - 生成树

> ID：11190586
> 
> 赞同：0
> 
> 时间：2012-06-25T13:52:07.153
> 
> 标签：c++, algorithm

我正在尝试在给定某些图形边缘（可以被视为网络）的情况下生成有效的树。以下是从文件中读取图形边的代码；

```
 FILE *fin = fopen("somefile.txt", "r");

    for (int i = 0; i <=edges; i++) {
    fscanf(fin, "%d%d%d", &u, &v, &w);
            graph[u][v]=w;
    }
    fclose(fin); 
```

现在我想为给定的根`u`和给定的大小生成最大数量的可能树（或拓扑）给`N`定这些边。

例如，如果有边；1--->2 ;1--->3; 3--->4。现在如果 N 为 1；u=1 的可能树是 1---->2 和 1--->3。如果 N 为 2，那么可能的树是 1--->2 & 3 或 1--->3---->4 实现这一目标的最佳方法是什么？我不关心复杂性问题。我会很感激帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:41:44.400

它可能不是最好的实现，但这样的东西应该可以

```
map<vertex,list<edge>> vertexToedgeThatIncludeIt
void Coloredge(edgeList)
{
  for each edge in list:
     edge.color=True
}

void init()
{
   for each edge:
   {
    vertexToedgeThatIncludeIt[edge.vertex1].append(edge)
    vertexToedgeThatIncludeIt[edge.vertex2].append(edge)
   }
}

edge* findUnColoredvertex(edgeList,startPoistion,founfAt)
{
    skip to startPoistion
    for each edge In edgeList:
          if edge not colored return edge 
    update founfAt
    return NULL
}

void spanTree(vertexToedgeThatIncludeIt,spanTreeList,lastvertex)
{
   if(spanTreeList.size==NumberOfTotalvertex)
   {
        print spanningTree
        return 
   }
   nextedge=findUnColoredvertex(vertexToedgeThatIncludeIt[lastvertex],0,founfAt)
   while(nextedge!=NULL)
   {           
       spanTreeList.append(nextedge);
       Coloredge(vertexToedgeThatIncludeIt[lastvertex]);
       spanTree(vertexToedgeThatIncludeIt,spanTreeList,nextedge.othervertex)
       spanTreeList.pop();
       UnColoredge(vertexToedgeThatIncludeIt[lastvertex])
       nextedge=findUnColoredvertex(vertexToedgeThatIncludeIt[lastvertex],founfAt,founfAt)
   }

 } 
```

# iphone - 这将负责 ARC 中的内存管理

> ID：11190587
> 
> 赞同：0
> 
> 时间：2012-06-25T13:52:10.967
> 
> 标签：iphone, automatic-ref-counting

这将在 ios 5.0 或 ios 5.1 中的 ARC 中处理

我被分配了对象，不需要在 ARC 中释放该对象，那些 ARC 会照顾自己

```
UIView *customView = [[UIView alloc]init];

[customView setFrame:CGRectMake(kRect)];
[self.view addSubview: customView];

[customView release]; 
```

在 ARC customView 版本中，它将自行处理。

如果我说释放到 customView 会发生什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:52:58.877

你不能打电话`release`，因为如果你这样做，ARC会抛出一个错误

`Release`在 ARC 环境中不可用，您的项目将无法构建

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:21:16.063

无需释放对象，一旦您的项目创建选择 ARC 自动保留计数，其 ARC 将处理内存！这将负责内存管理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T11:26:25.870

ARC 会照顾你的记忆，但你想从内存中删除一个对象，你可以简单地做 object=nil; 然后 arc 知道该变量没有用并将其从内存中删除。

# vb.net - 向自定义 datagridview 列添加边距

> ID：11190588
> 
> 赞同：0
> 
> 时间：2012-06-25T13:52:20.377
> 
> 标签：vb.net, datagridview

我使用以下代码（[取自此处](http://www.vb-tips.com/TextAndImageColumn.aspx)）为 datagridview 创建了我自己的自定义列，这样我现在可以在同一个单元格中包含图像和文本：

```
Public Class TextAndImageColumn
    Inherits DataGridViewTextBoxColumn
    Private imageValue As Image
    Private m_imageSize As Size
    Public Sub New()
        Me.CellTemplate = New TextAndImageCell
    End Sub
    Public Overloads Overrides Function Clone() As Object
        Dim c As TextAndImageColumn = TryCast(MyBase.Clone, TextAndImageColumn)
        c.imageValue = Me.imageValue
        c.m_imageSize = Me.m_imageSize
        Return c
    End Function
    Public Property Image() As Image
        Get
            Return Me.imageValue
        End Get
        Set(ByVal value As Image)
            Me.imageValue = value
            Me.m_imageSize = value.Size
            Dim inheritedPadding As Padding = Me.DefaultCellStyle.Padding
            Me.DefaultCellStyle.Padding = New Padding(ImageSize.Width, inheritedPadding.Top, inheritedPadding.Right, inheritedPadding.Bottom)
        End Set
    End Property
    Private ReadOnly Property TextAndImageCellTemplate() As TextAndImageCell
        Get
            Return TryCast(Me.CellTemplate, TextAndImageCell)
        End Get
    End Property
    Friend ReadOnly Property ImageSize() As Size
        Get
            Return m_imageSize
        End Get
    End Property
End Class
Public Class TextAndImageCell
    Inherits DataGridViewTextBoxCell
    Private imageValue As Image
    Private imageSize As Size
    Public Overloads Overrides Function Clone() As Object
        Dim c As TextAndImageCell = TryCast(MyBase.Clone, TextAndImageCell)
        c.imageValue = Me.imageValue
        c.imageSize = Me.imageSize
        Return c
    End Function
    Public Property Image() As Image
        Get
            If Me.OwningColumn Is Nothing OrElse Me.OwningTextAndImageColumn Is Nothing Then
                Return imageValue
            Else
                If Not (Me.imageValue Is Nothing) Then
                    Return Me.imageValue
                Else
                    Return Me.OwningTextAndImageColumn.Image
                End If
            End If
        End Get
        Set(ByVal value As Image)
            Me.imageValue = value
            Me.imageSize = value.Size
            Dim inheritedPadding As Padding = Me.InheritedStyle.Padding
            Me.Style.Padding = New Padding(imageSize.Width, inheritedPadding.Top, inheritedPadding.Right, inheritedPadding.Bottom)
        End Set
    End Property
    Protected Overloads Overrides Sub Paint(graphics As Graphics, clipBounds As Rectangle, cellBounds As Rectangle,
                                            rowIndex As Integer, cellState As DataGridViewElementStates, value As Object, formattedValue As Object,
                                            errorText As String, cellStyle As DataGridViewCellStyle, advancedBorderStyle As DataGridViewAdvancedBorderStyle,
                                            paintParts As DataGridViewPaintParts)
        MyBase.Paint(graphics, clipBounds, cellBounds, rowIndex, cellState, value, formattedValue, errorText, cellStyle, advancedBorderStyle, paintParts)
        If Not (Me.Image Is Nothing) Then
            Dim container As System.Drawing.Drawing2D.GraphicsContainer = graphics.BeginContainer
            graphics.SetClip(cellBounds)
            graphics.DrawImageUnscaled(Me.Image, cellBounds.Location)
            graphics.EndContainer(container)
        End If
    End Sub
    Private ReadOnly Property OwningTextAndImageColumn() As TextAndImageColumn
        Get
            Return TryCast(Me.OwningColumn, TextAndImageColumn)
        End Get
    End Property
End Class 
```

它工作得很好，除了我使用的图像正好在单元格的边缘。我想给它一点余地。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:41:46.427

您可以添加一个属性来`TextAndImageCell`喜欢：

```
Private m_imagePadding As New Padding(3)

Public Property ImagePadding() As Padding
    Get
        Return m_imagePadding
    End Get
    Set(ByVal value As Padding)
        m_imagePadding = value
    End Set
End Property 
```

并实施 (in `Paint`) 像：

```
graphics.DrawImageUnscaled(Me.Image, _
         New Point(cellBounds.Location.X + m_imagePadding.Left, _
                   cellBounds.Location.Y + m_imagePadding.Top)) 
```

还需要更改`TextAndImageColumn`：

```
Me.DefaultCellStyle.Padding = New Padding(ImageSize.Width + _
   TextAndImageCellTemplate.ImagePadding.Right, inheritedPadding.Top, _
   inheritedPadding.Right, inheritedPadding.Bottom) 
```

显然，还有改进的空间（触发重新绘制填充更改、整理行高、文本填充等），但这样的事情应该可以工作。

# gcc - 如何使用 gcc powerpc 程序集创建绝对和相对分支

> ID：11190592
> 
> 赞同：1
> 
> 时间：2012-06-25T13:52:24.450
> 
> 标签：gcc, assembly, powerpc

我正在编写引导代码，我只想在分支指令中使用相对寻址。

我注意到以下汇编代码：

```
110: lwz r4,0(r6)
      ...
      ...
     b 110b 
```

分支的目的地是一个全为数字的标签，分支指令在标签后有字母“b”。我假设'b'意味着倒退。我还看到了“f”，我认为这意味着向前。

这种表示法似乎暗示着相对寻址，但我找不到任何说明这种情况的文档。

使用数字后跟“f”或“b”的符号是保证相对分支的唯一机制吗？还是可以将字母数字标签（更有意义的名称）与 af/b 后缀一起使用？

我正在使用 gcc 交叉编译器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:15:23.437

从使用的指令推断出相对/绝对的区别。汇编器不需要猜测你想要哪一个。对于 PPC：

```
b  110b ; relative
ba 110b ; absolute 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T23:11:35.300

您其他问题的答案在[符号名称](http://sourceware.org/binutils/docs/as/Symbol-Names.html)的气体文档中：

全数字标签是“本地标签”，因此您无需为每个标签发明唯一名称；我想这在宏中特别有用。b/f 后缀是确定您所指的标签所必需的，因为名称不需要是唯一的（它还告诉解析器它是本地标签而不是整数立即数）。

# python - 重复 POST 请求导致错误“socket.error: (99, 'Cannot assign requested address')”

> ID：11190595
> 
> 赞同：5
> 
> 时间：2012-06-25T13:52:32.463
> 
> 标签：python, network-programming

我的盒子里部署了一个网络服务。我想通过各种输入检查此服务的结果。这是我正在使用的代码：

```
import sys
import httplib
import urllib

apUrl = "someUrl:somePort"

fileName = sys.argv[1]
conn = httplib.HTTPConnection(apUrl)

titlesFile = open(fileName, 'r')

try:
    for title in titlesFile:

        title = title.strip()
        params = urllib.urlencode({'search': 'abcd', 'text': title})
        conn.request("POST", "/somePath/", params)
        response = conn.getresponse()
        data = response.read().strip()
        print data+"\t"+title

        conn.close()

finally:
    titlesFile.close() 
```

此代码在打印相同数量的行（28233）后给出错误。错误信息：

```
Traceback (most recent call last):
  File "testService.py", line 19, in ?
    conn.request("POST", "/somePath/", params)
  File "/usr/lib/python2.4/httplib.py", line 810, in request
    self._send_request(method, url, body, headers)
  File "/usr/lib/python2.4/httplib.py", line 833, in _send_request
    self.endheaders()
  File "/usr/lib/python2.4/httplib.py", line 804, in endheaders
    self._send_output()
  File "/usr/lib/python2.4/httplib.py", line 685, in _send_output
    self.send(msg)
  File "/usr/lib/python2.4/httplib.py", line 652, in send
    self.connect()
  File "/usr/lib/python2.4/httplib.py", line 636, in connect
    raise socket.error, msg
socket.error: (99, 'Cannot assign requested address') 
```

我正在使用 Python 2.4.3。我`conn.close()`也在做。但是为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T13:58:06.610

这不是python问题。

在 linux 内核 2.4 中，临时端口范围是从 32768 到 61000。所以可用端口的数量 = 61000-32768+1 = 28233。据我了解，因为所讨论的 Web 服务非常快（实际上<5ms），因此所有端口用完了。该程序必须等待大约一两分钟才能关闭端口。

我所做的是计算`conn.close()`. 当数字为 28000 时，等待 90 秒并重置计数器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T15:34:25.173

BIGYaN 正确识别了问题，您可以在异常发生后立即调用“netstat -tn”来验证这一点。您将看到很多状态为“TIME_WAIT”的连接。

等待端口号再次可用的替代方法是简单地为所有请求使用一个连接。您无需`conn.close()`在每次调用 后调用`conn.request()`。您可以简单地保持连接打开，直到您完成您的请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-09T15:16:12.720

在 Spark 中使用 python 的请求库执行多个 POST 语句时，我也遇到了类似的问题。更糟糕的是，我在每个执行程序上使用多处理来发布到服务器。因此，在几秒钟内创建了数千个连接，每个连接需要几秒钟才能从 TIME_WAIT 更改状态并为下一组连接释放端口。

在互联网上所有可用的解决方案中，通过使用 request.Session() 等来禁用keep-alive，我发现[这个](https://stackoverflow.com/a/15511852/7103409)答案是有效的，它使用**'Connection' : 'close'**配置作为标头参数. 不过，您可能需要将标题内容放在 post 命令之外的单独行中。

```
headers = {
        'Connection': 'close'
}
with requests.Session() as session:
response = session.post('https://xx.xxx.xxx.x/xxxxxx/x', headers=headers, files=files, verify=False)
results = response.json()
print results 
```

[这](https://stackoverflow.com/a/49735617/7103409)是我使用上述解决方案对类似问题的回答。

# perl - 在 Perl 中，如何使用 grep 实现 map？

> ID：11190597
> 
> 赞同：2
> 
> 时间：2012-06-25T13:52:42.700
> 
> 标签：perl, map, grep

前段时间有人问我一个“奇怪”的问题，我将如何`map`使用`grep`. 今天我试着去做，结果就是这样。我是从 Perl 中挤出所有东西，还是有其他更聪明的 hack？

```
#!/usr/bin/env perl
use strict;
use warnings;
use 5.010;

sub my_map(&@) {
    grep { $_= $_[0]->($_) } @_[1..$#_];
}

my @arr = (1,2,3,4);

#list context
say (my_map sub {$_+1}, @arr);
#scalar context
say "".my_map {$_+1} @arr;
say "the array from outside: @arr";
say "builtin map:", (map {$_+1} @arr); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T15:26:24.753

您确定他们没有问如何实施`grep`with`map`吗？这有时真的很有用。

```
grep { STMTs; EXPR } LIST 
```

可以写成

```
map { STMTs; EXPR ? $_ : () } LIST 
```

（有一个区别：`grep`返回左值，而`map`不是。）

知道了这一点，就可以压缩

```
map { $_ => 1 } grep { defined } @list 
```

至

```
map { defined ? $_ => 1 : () } @list 
```

（我更喜欢“未压缩”版本，但“压缩”版本可能会快一点。）

* * *

至于实现`map`using `grep`，您可以利用`grep`的循环和别名属性。

```
map { STMTs; EXPR } LIST 
```

可以写成

```
my @rv;
grep { STMTs; push @rv, EXPR } LIST;
@rv 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T15:13:49.923

我在这个基本上毫无意义的学术活动上的尝试是。

```
sub my_map (&@) {
    my $code = shift;
    my @return_list;
    grep {
        push @return_list, $code->($_);
    } @_;
    return @return_list;
} 
```

用`grep`这个有点浪费，因为map的返回列表与输入列表可能不是1：1的，比如`my %hash = map { $_ => 1 } @array;`，你需要比使用grep的返回列表更通用。结果是任何允许修改原始列表的查找方法都可以工作。

```
sub my_map (&@) {
    my $code = shift;
    my @return_list;
    push @return_list, $code->($_) for @_;
    return @return_list;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T15:45:37.100

我不完全确定您的意思（`map`要模拟 ist 的哪个方面`grep`），但典型的地图场景可能是`y = x**3`：

```
 ...
  my @list1 = (1,2,3,4,5);
  my @list2 = map $_**3, @list1;
  ... 
```

使用`grep`，如果必须的话，您*几乎*可以让它看起来像`map`（但会破坏原始列表）：

```
 ...
  my @list2 = grep { $_**=3; 1 } @list1;
  ... 
```

通过简单地写入原始列表元素的引用。这里的*问题*是对原始列表的不必要修改；这是你不想做的`map`。

因此，我们可以在子例程中生成另一个列表，修改这个列表并保持原始列表不变。[对Sinan Ünür 的解决方案](https://stackoverflow.com/a/11190771/170194)稍作修改，内容如下：

```
 sub gap(&@) {
     my $code = shift;
     my @list = @_;
     grep $_ = $code->($_), @list;
     @list
  }

  my @arr = (1 .. 5);

  # original map
  print join ',', map { $_**3 } @arr;
  # 1,8,27,64,125

  # grep map
  print join ',', gap { $_**3 } @arr; 
  # 1,8,27,64,125

  # test original array
  print join ',',  @arr;
  # 1,2,3,4,5 => untouched 
```

问候

rbo

# php - kohana 表单验证

> ID：11190602
> 
> 赞同：0
> 
> 时间：2012-06-25T13:53:01.480
> 
> 标签：php, forms, validation, input, kohana

有一个“ `main.php`”视图，其中包含一个带有字段的表单`email`和`name`一个提交按钮。Eveyrthing 可以正常工作`action_index`（代码如下），但我很好奇如何修改下面的代码，以便验证电子邮件是否输入正确。如果电子邮件字段无效，则不应将值放入数据库中。我希望可以使用`->rule`. 是吗？如果是，那么如何在哪里添加验证？（我没有运气以不同的方式尝试它）。

```
public function action_index()
{
        if ( !empty($_POST) ) {
           $model = ORM::factory('tbl1'); // create
           $model->values($_POST); // load values to model

           if ($model->check()) {
               $model->save(); // save the model
           } else {
             //show errors
           }
        }

        $this->response->body(View::factory('main'));
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:25:24.860

`rules`在 ORM 模型中使用函数：

```
public function rules()
{
    return array(
        'email' => array(
            array('email', array(':value')),
        ),
    );
} 
```

# sitecore - 获取其他语言的字段值？

> ID：11190603
> 
> 赞同：2
> 
> 时间：2012-06-25T13:53:03.513
> 
> 标签：sitecore

我将如何在 Sitecore 6 中获取另一种语言的字段值？要以标准语言获取字段的值，我使用以下内容`page.Fields["Title"].ToString()`。

例如，如果我想要英语（en）的同一字段的值，如何完成这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T14:04:41.283

如果不首先获取该语言的整个项目，则无法获取该字段的值。在您的情况下，`page`语言为“x”，该`Title`字段为语言“x”。如果您想要使用`Title`语言“y”的字段，则需要使用`page`语言“y”。

```
Sitecore.Globalization.Language language = Sitecore.Data.Managers.LanguageManager.GetLanguage("en");
Sitecore.Data.Items.Item itemY = Sitecore.Context.Database.GetItem("/path/to/item", language);
string fieldY = itemY["Title"]; 
```

# ruby-on-rails - rails 中的简单 attr_accesible

> ID：11190612
> 
> 赞同：0
> 
> 时间：2012-06-25T13:53:23.533
> 
> 标签：ruby-on-rails

我有一个简单的 Rails 应用程序是 book belongs_to user 和 user has_many book。在书本模型中，我有一个用户字段，即 user_id 字段，我将设计用于我的 current_user 方法。现在我希望 current_user 添加一个新的 bood，但我不断收到错误无法批量分配受保护的属性：item，user。我不知道该项目来自何处，我是否必须将用户包含在 attr_assible 项目列表中。问题是我不希望书中的用户属性被大量使用，因此人们不只是试图破解和更改书的所有者。我正在使用导轨 3.2.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:56:38.283

将此添加到书籍模型中：

```
attr_accessible :user_id 
```

或者试试这个：

```
@book = Book.new
@book.user_id = current_user.id
@book.save 
```

另见：

> [http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:56:54.117

无论你在哪里构建这本书，你都需要这样做：

```
current_user.new { :item => item } 
```

为此，该`item`属性应启用批量分配。

# jquery - jQuery tablesorter&pager 插件无法正常工作

> ID：11190620
> 
> 赞同：0
> 
> 时间：2012-06-25T13:53:35.817
> 
> 标签：jquery, pagination, html-table, tablesorter

我正在尝试让 jQuery 表格排序器的寻呼机工作。没有寻呼机一切正常，但是当我尝试使用寻呼机时出现问题。

当我不将寻呼机的限制从 10 更改为 5 或 2 时，排序和分页都不起作用。然后它向我展示了一张空桌子。但是，当我事先更改限制时，一切正常？！这不是应该的，对吧？^^

jQuery：

```
 <script>
    $(document).ready(function(){
        var validator = $("#searchForm").validate({ 

        });         
    });

    $(document).ready(function() 
    { 
        $("#myTable")
        .tablesorter({widthFixed: true, widgets: ['zebra']})
        .tablesorterPager({container: $("#pager")}); 
    }); 
```

桌子：

```
// name of database dable == header of table
                echo "<table id=\"myTable\"     class=\"tablesorter\"><thead><tr>";
                foreach( sqlsrv_field_metadata($stmt) as     $fieldMetadata)
                {
                       echo "<th>".$fieldMetadata   ['Name']."</th>";
                }
                echo "<th>Details</th>";
                echo "</thead>";
                echo "<tbody>";
                // printing table rows
                while($row = sqlsrv_fetch_array($stmt,    SQLSRV_FETCH_ASSOC))
                {                                   
                    echo "<tr>";

                    // $row is array... foreach( .. ) puts every element    
                    // of $row to $cell variable    
                    foreach($row as $cell){
                        echo "<td>$cell</td>";
                    }
                    echo "</tr>\n";
                }
                echo "</tbody>";
                echo "</table>";    
                echo("<br>"); 
```

寻呼机：

```
 <div id="pager" class="pager">
                    <form>
                        <img     src="/images/first.png" class="first"/>
                        <img     src="/images/prev.png" class="prev"/>
                        <input type="text"    class="pagedisplay"/>
                        <img   src="/images/next.png" class="next"/>
                        <img    src="/images/last.png" class="last"/>
                        <select class="pagesize">
                            <option   value="">>LIMIT</option>
                            <option value="2">2 per page</option>
                            <option value="5">5 per page</option>
                            <option value="10">10 per page</option>                             
                        </select>
                    </form>
                </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:01:05.590

在第一次通话中指定 10 有帮助吗？

```
$(document).ready(function() 
{ 
    $("#myTable")
    .tablesorter({widthFixed: true, widgets: ['zebra']})
    .tablesorterPager({container: $("#pager"), size: 10}); 
}); 
```

# iphone - 返回 TabBar 主屏幕

> ID：11190623
> 
> 赞同：0
> 
> 时间：2012-06-25T13:53:47.297
> 
> 标签：iphone, ios, xcode

我有一个底部有标签的应用程序。在更多选项卡上，我在列表中有两件事，称为设置和法律。当我点击设置或法律时，我会打开设置或法律视图。当我单击主页选项卡栏然后返回到更多选项卡时，它会返回到我离开之前的位置。是否有可能返回更多选项卡的主视图？

![我的问题](../Images/eb6cf3745d0a835573044b40666efef8.png) 编辑

我的标签栏控制器中有我的导航（如第二张图片）。 ![在此处输入图像描述](../Images/3f74711bc4768de547345d6a9507fb39.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:22:41.853

你在用`UITabBarController`吗？如果是这样，您可以在创建它时或在您的 nib 中设置它的委托，并监听选择：

```
-(void) tabBarController:(UITabBarController*)tabBarController didSelectViewController:(UIViewController*)viewController {

    // Check if the selected tab is a UINavigationController
    if ([viewController isKindOfClass:[UINavigationController class]]) {

        UINavigationController* nav = (UINavigationController*) viewController;
        [nav popToRootViewControllerAnimated:NO];

    }

} 
```

# objective-c - 将标签绑定到类的属性

> ID：11190630
> 
> 赞同：1
> 
> 时间：2012-06-25T13:54:17.657
> 
> 标签：objective-c, cocoa, binding

我正在尝试将标签（NSTextField）绑定到类的属性。在**Interface Builder**中，我使用**Model Key Path** = *self.aString*将标签的**值**绑定到*文件的所有者*。

 ****   *File's Owner*是 NSViewController 的子类，其中*aString*定义为：`@property (nonatomic, strong) NSString *aString;`

*   标签放置在基于**视图的 NSTableView**中，该视图在运行时通过与托管对象上下文的绑定填充。

当我调用`[self setAString:@"..."]`或`[self setValue:@"..." forKey:@"aString"]`在类的实现中，表视图中没有任何变化。但是，如果标签放置在视图内，它就可以工作。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:36:23.990

这是基于视图的表视图的限制，据我所知，修复它的唯一方法是设置`TableView.delegate`为您的`File's Owner`（或者如果您尝试绑定到另一个对象）。

*（我希望有更好的答案来解释原因，因为我不知道为什么会这样）*

蛋糕的答案是一个很好的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:41:35.537

我通过**继承 NSTableCellView**并向**其添加 NSString 属性来**解决。然后我将标签的值绑定到表格单元格视图，属性名称作为键。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-25T14:30:55.957

当它在 tableview 中时，您可能无法直接访问它。尝试存储对 tableview 的引用，然后调用标签。因此，如果您的表格有一个名为 t 的引用，请将标签连接到表格，然后： `t.labelName.text = @"string"`虽然，如果它位于表格中的单元格内，您可能需要`cellForRowAtIndexPath`在子类单元格内使用和引用标签。如果您不知道如何执行此操作，我可以发布一些代码。***

# visual-studio-2010 - Visual Studio 2010 每次都必须关闭才能使网页中的更改可见

> ID：11190636
> 
> 赞同：0
> 
> 时间：2012-06-25T13:54:41.343
> 
> 标签：visual-studio-2010

使用 Visual Studio 2010 时，每次都必须关闭以使 chagnes 每次都可见。这里的任何人都有这个问题的原因和可能的解决方案？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:59:47.730

当您在应用程序“播放”时保存文件时，您应该能够刷新应用程序并从新保存的页面运行。您不必每次都关闭程序。

# windows-phone-7 - 如何验证文本框中的电子邮件格式？

> ID：11190637
> 
> 赞同：0
> 
> 时间：2012-06-25T13:54:41.947
> 
> 标签：windows-phone-7

我想放置验证器，以便如果用户没有以正确的格式（即 abc@xyz.com）输入电子邮件 ID，则会弹出一条错误消息。如何为 Windows Mobile 放置此验证器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:48:09.650

```
using System;
using System.Text.RegularExpressions;

  public static bool IsValidEmail(string strIn)
       {
           // Return true if strIn is in valid e-mail format.
           return Regex.IsMatch(strIn, 
                  @"^(?("")("".+?""@)|(([0-9a-zA-Z]((\.(?!\.))|[-!#\$%&'\*\+/=\?\^`\{\}\|~\w])*)(?<=[0-9a-zA-Z])@))" + 
                  @"(?(\[)(\[(\d{1,3}\.){3}\d{1,3}\])|(([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,6}))$"); 
       } 
```

# java - 迄今为止的 GWT 字符串 - 3 位数的月份

> ID：11190639
> 
> 赞同：0
> 
> 时间：2012-06-25T13:54:46.497
> 
> 标签：java, gwt, datetime-format

我对 GWT (2.3) 很陌生，想采用以下格式的整数（或字符串）：

2012006

并将其格式化为

1206

我知道我可以使用字符串操作轻松地做到这一点，但由于 2012 年是年，而 006 是月（六月），我正在尝试使用 GWT DateTimeFormat 来做到这一点，但我正在为荒谬的 3 位数月份格式而苦苦挣扎......

请帮忙

./CJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:16:31.683

利用

```
DateTimeFormat fmt = DateTimeFormat.getFormat("yyyy'0'MM");
Date date = fmt.parse("2012006"); 
```

将具有您描述的格式的字符串解析为日期。

利用

```
DateTimeFormat out = DateTimeFormat.getFormat("yyMM");
out.format(date); 
```

将日期格式化为所需的格式。

其他解析注意事项 ([DateTimeFormat]) [1](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/i18n/client/DateTimeFormat.html)

> 当使用缩写年份模式 ("yy") 解析日期字符串时，解析器必须解释相对于某个世纪的缩写年份。它通过将日期调整为创建解析器实例之前的 80 年和之后的 20 年来实现这一点。例如，使用“MM/dd/yy”模式和 1997 年 1 月 1 日创建的 DateTimeFormat 对象，字符串“01/11/12”将被解释为 2012 年 1 月 11 日，而字符串“05/04/ 64" 将被解释为 1964 年 5 月 4 日。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:11:12.157

只需使用引号将第一个 0 解释为文字。尝试以下操作：

```
DateTimeFormat.getFormat("yyyy'0'MM") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:50:32.773

试试这个，你会得到你想要的结果

```
public class DateWala {

    public static void main(String[] args){

        System.out.println(new SimpleDateFormat("YYMM").format(new Date()));
    }

} 
```

# c# - 如何从 jquery 变量后面的代码中获取属性？

> ID：11190646
> 
> 赞同：1
> 
> 时间：2012-06-25T13:55:08.900
> 
> 标签：c#, jquery, asp.net

我想在 jquery 函数中检索属性值并将其设置为变量。我正在尝试使用下面的代码，但它不起作用。

.cs 文件

```
private string _Heading;
public string Heading { get { return _Heading; } set { _Heading = value; } } 
```

.aspx

```
<script type="text/javascript">

    $(document).ready(function () {
      $("#btnShowSimple").click(function (e) {
        ShowDialog(false);
        e.preventDefault();
        var someProp = "<%= this._Heading; %>";
       alert(someProp);
      });
 </script> 
```

我应该怎么做才能检索财产价值？任何人都有解决方案，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:19:09.820

首先，如果变量是私有的，您将无法在 JavaScript 中访问它，因此您应该使用公共 Heading 属性。

其次，您的 JavaScript 中有一个分号需要删除，因此请更改此行

```
var someProp = "<%= this._Heading; %>"; 
```

对此

```
var someProp = "<%=this.Heading%>"; 
```

# ruby-on-rails - 如何在 SSH 客户端（PuTTy）关闭后保持 Rails 控制台中的 rails 命令运行

> ID：11190648
> 
> 赞同：6
> 
> 时间：2012-06-25T13:55:18.890
> 
> 标签：ruby-on-rails, ubuntu, solr, putty, sunspot-solr

我使用 PuTTy 连接到我们的 Ubuntu 生产服务器。

我想使用 Solr 重新索引特定模型。我想从 Rails 控制台运行 reindex 命令，即 Modelname.reindex （因为这似乎比 rake 任务运行得更快。）

然而，我们正在查看大量数据，预计此索引需要几个小时。

我希望能够在 Rails 控制台中启动此任务，即使我退出 PuTTy，它也应该继续运行。这该怎么做？

[Linux：在关闭 SSH 客户端建议 nohup 后阻止后台进程停止](https://stackoverflow.com/questions/285015/linux-prevent-a-background-process-from-being-stopped-after-closing-ssh-client)，但我不知道是否/如何将其与 rails 控制台一起使用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T13:58:17.463

用于`sudo apt-get install screen`安装`screen`。然后使用`screen`. 现在您有一个单独的控制台窗口，可以使用`Ctrl + A`, then分离它`D`。关闭腻子不会结束您的`screen`会话。如果您稍后重新登录，您可以使用`screen -r`.

总结一下：

```
> sudo apt-get install screen
> screen
# pops up a new shell
> rails c
# run your reindex operation
# press Ctrl + A, then D
> exit
# putty closes

# reconnect using putty
> screen -r
# you should be back in your rails console 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:58:12.877

您可以做的是使用[screen](http://www.manpagez.com/man/1/screen/)或[tmux](http://tmux.sourceforge.net/)使您的会话在服务器上保持打开状态。

如果您只需键入`screen`一个终端多路复用器，即使您断开控制台，它也会启动会话。

重新连接到控制台后，您可以使用恢复会话`screen -dr`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T13:58:24.027

您应该使用 tmux 或 screen 之类的东西并从会话中分离。

# mysql - 使用 sqldf 在 R 中对重复项进行编号

> ID：11190656
> 
> 赞同：1
> 
> 时间：2012-06-25T13:55:47.900
> 
> 标签：mysql, r

我有一个包含重复行的数据集，我希望将它们编号如下：

原始数据集：

```
DF <- structure(list(pol_no = c(1L, 1L, 2L, 2L, 2L), os = c(23L, 33L, 
45L, 56L, 45L), paid = c(45L, 67L, 78L, 89L, 78L)), .Names = c("pol_no", 
"os", "paid"), class = "data.frame", row.names = c(NA, -5L)) 
```

看起来像这样：

```
> DF
  pol_no os paid
1      1 23   45
2      1 33   67
3      2 45   78
4      2 56   89
5      2 45   78 
```

我希望将 pol_no 中的重复项编号如下：

```
pol_no   os   paid  count
1        23    45      1
1        33    67      2
2        45    78      1
2        56    89      2
2        45    78      3 
```

提前非常感谢。

问候，

曼西

编辑：添加`dput()`输出以使其可重现和固定格式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:22:06.807

**带有 RPostgreSQL 的 sqldf**

PostgreSQL 的 SQL 窗口函数有助于解决这类问题。有关将 PostgreSQL 与 sqldf 一起使用的更多信息，请参阅[sqldf 主页](http://sqldf.googlecode.com)上的[FAQ#12 ：](https://code.google.com/p/sqldf/#12._How_does_one_use_sqldf_with_PostgreSQL?)

```
library(RPostgreSQL)
library(sqldf)
sqldf('select *, rank() over  (partition by "pol_no" order by CTID) count
       from "DF" 
       order by CTID ') 
```

**带有 RSQLite 的 sqldf**

sqldf 默认通过 RSQLite 使用 SQLite。尽管 SQLite 缺少 PostgreSQL 的窗口功能，但使用 SQLite 的整个安装过程要简单得多，因为它是一个普通的包安装，无需额外操作（而对于 PostgreSQL，PostgreSQL 本身必须单独安装和配置）。尽管 SQL 语句的长度实际上是相似的，但缺少这些功能，使用 SQLite 的 SQL 语句会更加复杂：

```
# if RPostgreSQL was previously attached & loaded then detach and & unload it
detach("package:RPostgreSQL", unload = TRUE)

sqldf("select a.*, count(*) count
       from DF a, DF b 
       where a.pol_no = b.pol_no and b.rowid <= a.rowid group by a.rowid"
) 
```

**R大道**

最后，我们展示了一个根本不使用 sqldf 而只是核心 R 功能的解决方案：

```
transform(DF, count = ave(pol_no, pol_no, FUN = seq_along)) 
```

# android - ANDROID：带有 ListViews 的 SQLite

> ID：11190661
> 
> 赞同：0
> 
> 时间：2012-06-25T13:56:01.563
> 
> 标签：android, sqlite, listview

-- 这是我迄今为止的输入布局 --

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/etClassName"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:layout_marginTop="10dp"
        android:layout_marginBottom="10dp"
        android:hint="@string/className"/>

    <EditText
        android:id="@+id/etAssignmentName"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:ems="10" 
        android:hint="@string/assignmentName"/>

    <EditText
        android:id="@+id/etDueDate"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:layout_marginBottom="20dp"
        android:hint="@string/dueDate" />

    <EditText
        android:id="@+id/etNotes"
        android:layout_width="match_parent"
        android:layout_height="194dp"
        android:ems="10"
        android:inputType="textMultiLine"
        android:layout_marginBottom="5dp" 
        android:hint="@string/notes"/>

    <LinearLayout
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:orientation="horizontal">
        <Button
            android:id="@+id/bAddAssignments"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/addAssignment"
            android:layout_weight="1" />

        <Button
            android:id="@+id/bViewAssignments"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/viewAssignments" 
            android:layout_weight="1"/>
    </LinearLayout>
</LinearLayout> 
```

-- 单击添加按钮将带您进入此页面，该页面应列出作业名称，您可以单击以查看作业 --

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/list"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.63" >
    </ListView>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/bNewAssignment"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/newAssignment" />

        <Button
            android:id="@+id/bdeleteAssignment"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/deleteAssignment" />
    </LinearLayout>

</LinearLayout> 
```

我的问题是，当我的第一个布局跟踪数据时，我不知道如何填充第二个布局。第二个布局如何知道用户输入的内容等以填充列表视图

我目前有一个 dbadapter 类（里面有帮助类），一个入口类（创建入口对象）和一个 assignmentclass（应该显示列表视图）

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:22:38.000

在 Intent 包中传递您需要的数据。

当你设置意图时，将你需要的数据作为额外的放在下一个类中（假设这里是字符串，但可以是其他形式）：

```
Intent myIntent = new Intent(YourActivity.this, NewActivity.class);
myIntent.putExtra("Data1", data1var);
myIntent.putExtra("Data2", data2var);
YourActivity.this.startActivity(myIntent); 
```

在新课程中：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Bundle extras = getIntent().getExtras();
    if (extras != null) {
        String value1 = extras.getString("Data1");
        String value2 = extras.getString("Data2");
    }
    //use your passed strings
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:06:01.167

您对问题的描述相当模糊。我可以向您推荐 Lars Vogella 制作的关于如何将 SQLLite 与 ListView 一起使用的[教程之一。](http://www.vogella.com/articles/AndroidSQLite/article.html)他们解释了一切美好而简单的事情。我相信你会在那里找到你的答案！

**更新：**

InputActivity中添加按钮的onClickListener：

*   将您的用户输入添加到数据库（使用 DatabaseHelper）
*   列表项启动您的第二个活动，包括 ListView

ListActivity 的 onCreate：

*   例如创建一个数组
*   让你的 DatabaseHelper 用你想要在数据库中的记录填充数组
*   创建一个适配器给你填充数组

# visual-studio-2010 - 使用 VB 2010 创建 MS Excel 文档时出错

> ID：11190663
> 
> 赞同：0
> 
> 时间：2012-06-25T13:56:06.417
> 
> 标签：visual-studio-2010, vba, office-interop, excel-interop

我在循环和创建 MS Excel 文档时遇到了一些问题，代码片段如下

```
Private Sub selectedRowsButton_Click( _
ByVal sender As Object, ByVal e As System.EventArgs) _
Handles selectedRowsButton.Click

    Dim selectedRowCount As Integer = _
        DataGridView1.Rows.GetRowCount(DataGridViewElementStates.Selected)

    If selectedRowCount > 0 Then

        Dim sb As New System.Text.StringBuilder()
        Dim objexcel As New Excel.Application
        Dim i As Integer
        Dim FACode As Integer
        Dim Sitename As Integer
        Dim Sitecode As Integer
        Dim Address As Integer
        Dim City As Integer
        Dim State As Integer
        Dim ZIP As Integer

        FACode = 1
        Sitename = 5
        Sitecode = 2
        Address = 6
        City = 7
        State = 9
        ZIP = 10
        Dim xlWorkbook As Excel.Workbook
        xlWorkbook = objexcel.Workbooks.Open("template path")
        For i = 0 To selectedRowCount - 1

            objexcel.Visible = True
            objexcel.Range("B2").Value = DataGridView1.SelectedCells(Sitename).Value.ToString()

            objexcel.Range("B3").Value = DataGridView1.SelectedCells(Sitecode).Value.ToString()

            objexcel.Range("B5").Value = DataGridView1.SelectedCells(FACode).Value.ToString()

            Dim thisfile As Object

            thisfile = objexcel.Range("B5").Value & "." & _
            objexcel.Range("B3").Value & "." & "otherstring" & "." & "otherstring2" & "." & ".xls"

            With objexcel

                xlWorkbook.SaveAs(Filename:="c:\test\" & thisfile)
                '~~> Close the Excel file without saving
                xlWorkbook.Close(False)
            End With          

        Next i

    End If 
```

我从 HRESULT 收到错误异常：语句的 0x800A03EC

```
 objexcel.Range("B2").Value = DataGridView1.SelectedCells(Sitename).Value.ToString() 
```

如果我在创建程序之前只选择了我的 DataGrid 的一行工作正常，那么当我选择多行时就会发生此错误。因为我是专门为多行选择创建程序，所以我很难理解我哪里出错了。任何帮助或指针表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:35:36.493

两件事情

1.  你已经声明了`objexcel`As`Excel.Application`所以你不应该使用`objexcel.Range("B2").Value`. 使用`xlWorkbook.Range("B2").Value`. 在您的代码中随处更改它。

2.  你不能那样使用`SaveAs`。请参阅下面的快照。如果要保存为 xls 文件，则必须使用`FileFormat:=56`

请参阅此代码示例

```
'~~> Save As file
xlWorkbook.SaveAs(Filename:="c:\test\" & thisfile, FileFormat:=56) 
```

如果您未指定文件格式，则在打开文件后打开文件时会收到错误消息。

您可能想查看此链接，了解如何从 VB.Net 自动化 Excel

**主题**：VB.NET 和 Excel

**链接**：[http ://www.siddharthout.com/vb-dot-net-and-excel/](http://www.siddharthrout.com/vb-dot-net-and-excel/)

![在此处输入图像描述](../Images/a2aa85cc26051a00b316b72fa6df1480.png)

我不太确定你到底想用 DGV 做什么。就像肖恩提到的那样，您没有增加值。如果您可以发布 DGV 外观的快照以及导出后 Excel 文件的外观，那么我们可以以更好的方式为您提供帮助 :)

# mysql - 将数字格式化为 2 位小数

> ID：11190668
> 
> 赞同：176
> 
> 时间：2012-06-25T13:56:21.893
> 
> 标签：mysql, formatting, decimal

我想知道如何在不四舍五入的情况下输出一个小数点后 2 位的数字。

例如：

```
2229,999 -> 2229,99 
```

我已经尝试过：

```
FORMAT(2229.999, 2)
CONVERT(2229.999, DECIMAL(4,2)) 
```

* * *

## 回答 #1

> 赞同：396
> 
> 时间：2013-05-02T20:31:32.033

将数字格式化为 2 位小数时，您有两个选项`TRUNCATE`和`ROUND`. 您正在寻找`TRUNCATE`功能。

例子：

**不四舍五入：**

```
TRUNCATE(0.166, 2)
-- will be evaluated to 0.16

TRUNCATE(0.164, 2)
-- will be evaluated to 0.16 
```

文档：[http ://www.w3resource.com/mysql/mathematical-functions/mysql-truncate-function.php](http://www.w3resource.com/mysql/mathematical-functions/mysql-truncate-function.php)

**带四舍五入：**

```
ROUND(0.166, 2)
-- will be evaluated to 0.17

ROUND(0.164, 2)
-- will be evaluated to 0.16 
```

文档：[http ://www.w3resource.com/mysql/mathematical-functions/mysql-round-function.php](http://www.w3resource.com/mysql/mathematical-functions/mysql-round-function.php)

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2012-06-25T13:57:55.333

您想使用该`TRUNCATE`命令。

[https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_truncate](https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_truncate)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-06-25T14:00:56.407

如何 `CAST(2229.999 AS DECIMAL(6,2))` 获得小数点后 2 位的小数

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2018-03-14T15:33:24.760

只需使用 format(number, qtyDecimals) 示例： format(1000, 2) result 1000.00

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-17T20:25:27.690

这就是我使用的示例：

```
CAST(vAvgMaterialUnitCost.`avgUnitCost` AS DECIMAL(11,2)) * woMaterials.`qtyUsed` AS materialCost 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-30T14:12:25.093

显示为小数 选择 ifnull(format(100.00, 1, 'en_US'), 0) 100.0

显示为百分比选择 concat(ifnull(format(100.00, 0, 'en_US'), 0), '%') 100%

# iphone - 逻辑运算符如何与目标 c 中的常量操作数一起工作

> ID：11190669
> 
> 赞同：1
> 
> 时间：2012-06-25T13:56:31.923
> 
> 标签：iphone, objective-c, ios5, reachability

我正在做一个项目，我在我的一个班级中有**checkInternet**方法来验证互联网的可用性。在该方法中，我有以下代码：

对于下面的代码行，我收到警告，**“使用带有常量操作数的逻辑 &&”** 对于这个块代码**(flag && kSCNetworkFlagsReachable)**。

```
BOOL isavailable = NO;
Boolean success;
isavailable = success && (flag && kSCNetworkFlagsReachable) && !(flag & kSCNetworkFlagsConnectionRequired); 
```

作为解决方案，xcode 提供了“使用 & 用于按位操作数”的选项，这很好，我这样做了，它消除了我的警告。但我想知道它是如何工作的逻辑运算符？为什么它告诉我按位更改？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T14:36:27.373

[位运算符](http://en.wikipedia.org/wiki/Bitwise_operation) 比较每个单独的`&`位对。仅当左右操作数至少有一个匹配位设置为 1 时，结果才会为非空。

示例：0100 AND 0010 → 0000 但 0110 AND 0010 → 0010。

此运算符允许您使用单个整数值将多个布尔值存储在不同的位上，然后使用第二个值（称为掩码）过滤位。

`kSCNetworkFlagsReachable`等于`1<<1`( `2`)。因此，`flag & kSCNetworkFlagsReachable`仅当 的第二个最低有效位`flag`设置为 1 时才为真。

使用`&&`代替`&`是一个常见的错误。编译器将尝试检测该错误。在您的示例中，`kSCNetworkFlagsReachable`是一个常量值。由于`kSCNetworkFlagsReachable`是常数且始终为真，测试是否`flag && kSCNetworkFlagsReachable`为真与测试是否`flag`为真是相同的。因此，您不太可能真的想在逻辑运算中使用常量值。这就是编译器发出警告的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T14:02:56.567

`kSCNetworkFlagsReachable`是一个整数，而`BOOL`是`typedef short`。使用逻辑和 ( `&&`) 将返回`YES`，如果它们都是非 0，而使用按位和 ( `&`) 将返回整数（非 0），如果任何匹配位为 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:09:04.943

在条件首先评估必须为假意味着它不会检查逻辑运算符（&&）。但按位运算符（&）在里面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T14:20:14.537

位运算符`(&)`逐位执行 AND 运算并将结果作为 int 值返回。例如，如果您对它进行按位与运算，`00110011`结果`11111111`将是。

```
 00110011
&  11111111
===========
   00110011 
```

另一方面，逻辑运算符`(&&)`进行比较。`int 1`如果两个变量不相等则返回，否则`0`返回。`0`这意味着：

```
 00110011 => 0x33 => 51  => (BOOL) true
&& 11111111 => 0xFF => 255 => (BOOL) true 
===========
   00000001 => 0x01 => 1   => (BOOL) true 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T14:26:21.857

您可能需要考虑将该代码重构为整洁的 if/else 语句。它会变得冗长，是的，但是一年后，当你可能忘记了有点武断的优先规则时，你的代码将保持清晰和不言而喻......

# javascript - 由于字符串长度问题，代码不会运行

> ID：11190681
> 
> 赞同：-2
> 
> 时间：2012-06-25T13:57:03.813
> 
> 标签：javascript

这里有一个简单的 Javascript 程序来接受和检查密码。它应该：

1.  要求您输入新密码

2.  检查密码的强度，根据 <6 或 >6 的长度输出弱或强消息。

3.  让你重新输入这个密码进入“系统”

4.  如果密码不正确，给您简单的提示或 2 个随机字母。

除了强/弱检查器外，一切正常。获取 passwordEntry 的长度时有问题，因为它显然不作为实体存在。

任何想法将不胜感激

```
var pass;
var main = function(){
strengthCheck((prompt("Please Choose a New Password to Begin"));
}

var strengthCheck = new function(passwordEntry){
score = 0;
// adds to the score variable depending on the length of the password
if(passwordEntry.length > 6{
score=(score+1);
}
//reads messages back stating how strong password is based on length
if(score=0){
console.log("Your Password is Weak");
}
else if(score=1){
console.log("Your Password is Strong");
}
var passContinue = prompt("Do you want to continue with this password? Yes or no?")
if(passContinue === "no" ||  passContinue === "No"{
main();
}
else{
pass = passwordEntry;
console.log("Your new password has been changed to " + pass);
passwordChecker(prompt("Thank You. Please Enter Your Password Below"));
}
}

var passwordChecker = function (attempt){
if(attempt == pass){
    console.log("Correct password. The system has logged you on");
}
    else{
    //if the password is wrong, runs the incorrectpassword() function
        console.log("Incorrect Password");
        IncorrectPass();
        }
    }
}

var IncorrectPass = function (){
var clueanswer = prompt("Do You Want A Clue");
if(clueanswer === "Yes" ||clueanswer === "yes"){    
console.log("I will give you two random letters");
// takes two random locations from the string array and reads them back
var randarray1 = Math.floor((Math.random()*7)+1);
var randarray2 = Math.floor((Math.random()*7)+1);
var randletter1 = pass[randarray1];
var randletter2 = pass[randarray2];
console.log(randletter1+" "+randletter2);
passwordChecker("Please try entering your password again");  
}
    else{
        console.log("GoodBye");
    }
}

main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:03:53.750

这部分看起来很不对劲：

```
if(score=0){
  console.log("Your Password is Weak");
}
else if(score=1){
  console.log("Your Password is Strong");
} 
```

您应该使用`==`or`===`而不是`=`which 用于分配而不是比较。

这也没有意义：

```
var main = function(){
  strengthCheck((prompt("Please Choose a New Password to Begin"));
} 
```

有三个左括号，只有两个右括号。闻起来像解析器错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:01:19.127

改变这个...

```
var strengthCheck = new function(passwordEntry){ 
```

对这个……

```
var strengthCheck = function(passwordEntry){ 
```

当您使用 时`new`，您并没有使用它来创建新功能。您正在使用它作为构造函数调用该函数，该构造函数将返回一个对象。*（在您的情况下是一个空对象。）*

此外，您的代码中有许多语法错误。使用 http://jshint.com 之类的代码验证器[以及](http://jsbeautifier.org)[http://jsbeautifier.org](http://jshint.com)之类的美化器来清理您的代码。

# jquery - 使用jQuery根据“名称”设置div的背景图像

> ID：11190682
> 
> 赞同：2
> 
> 时间：2012-06-25T13:57:08.180
> 
> 标签：jquery, css

基本上，有一个我正在开发的作品集网站，其中包含超过 15 个作品。希望能够使用我目前已经用于显示片段的“名称”选择器（即滑动最小值）来设置缩略图 div 的背景，而无需手动完成所有 CSS 标记。解释起来可能会令人困惑，也许我编写的这段代码（不起作用）可以提供帮助。

这是实际的缩略图 HTML：

```
<a name="allies" class="portbox port-link allieslink">
    <div class="port-info">
        <h3>Creative Allies</h3>
        <p class="port-label">Product</p>
        <p class="port-detail">Print Design</p>
        <p class="port-label">Year</p>
        <p class="port-detail">2010</p>
     </div>
</a> 
```

截至目前，“allieslink”类在 CSS 中有这个：

```
.allieslink {
    background: url(IMG/portfolio/allies-link.jpg) center top no-repeat;
} 
```

所以我想要做的是取出手动CSS - 让jQuery根据“名称”设置进行计算，然后插入同名选择器（添加“-link.jpg”）作为CSS。

这是我当前的 jQuery 代码（在文档就绪函数中）：

```
var artname= $(".port-link").name;
$(".port-link").css("background","url(IMG/portfolio/" + artname + "-link.jpg) center top no-repeat;"); 
```

显然，这是行不通的。我不确定为什么，因为我觉得我走在正确的道路上，这可能是一些愚蠢的事情。只是想弄清楚确切的 jQuery 以使其正常工作。帮助？

（截至目前，所有元素都有 CSS 类，但你可以想象随着产品组合的增长，这将变得很长。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:58:37.393

尝试`var artname= $(".port-link").attr("name")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T13:58:50.853

检索`name`属性使用的值

```
var artname= $(".port-link").attr('name'); 
```

或者

```
 var artname= $(".port-link")[0].name; 
```

您可以通过这种方式检索 `name`属性的值。但这并不能完全解决您的问题。在这种情况下，您必须遍历链接并为每个链接设置背景。您可以使用它[`.each()`](http://api.jquery.com/jQuery.each/)来做到这一点，甚至更好的是，您可以利用这样的[`.css()`](http://api.jquery.com/css/)方法的隐式循环。

```
$(".port-link").css("background",function(){
   return "url(IMG/portfolio/" + this.name + "-link.jpg) center top no-repeat";
}); 
```

如果您希望将背景定位`center bottom`在悬停上，那么您可以像这样使用 jQuery 来做到这一点。

```
$(".port-link").hover(function(){
     // hover in set background position for hover
     $(this).css('background-position','center bottom');
 },function(){
     // hover out reset background position
     $(this).css('background-position','center top');
 }); 
```

并删除悬停CSS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T13:59:46.097

试试这个：

```
$(".port-link").each(function() {
    $(this).css('background', 'url(IMG/portfolio/' + $(this).attr("name"); + '-link.jpg) center top no-repeat');
}); 
```

这将遍历所有匹配的元素，并使用适当的名称为每个元素应用背景

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T14:01:16.120

您想获取属性名称，而不是某些可能甚至不存在的字段名称：

`var artname= $(".port-link").attr('name');`

# java - 爪哇 | 反射性地获取构造函数

> ID：11190685
> 
> 赞同：2
> 
> 时间：2012-06-25T13:57:13.527
> 
> 标签：java, reflection, constructor

如果它的参数是`Object ... objects`.

我的构造函数：

```
 public MyClass ( Object ... objects )
  {
    if ( ! ( objects == null ) )
    {
      if ( objects.length > 0 && objects [ 0 ] instanceof Long )
      {
        setLatency ( ( Long ) objects [ 0 ] ) ;
      }
    }
  } 
```

我现在如何得到它：

```
Class< ? > clazz = Class.forName ( "MyClass" ) ;

Constructor< ? > clazzConstructor = clazz.getConstructor ( Object [ ].class ) ; 
```

我尝试做的事情：

```
Long latency = 1000L ;

MyClass myInstance = ( MyClass ) clazzConstructor.newInstance ( latency ) ; 
```

我得到 java.lang.IllegalArgumentException: argument type mismatch

如果延迟 == null，则一切正常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T14:01:52.763

您的构造函数需要一个对象数组，但您将一个对象传递`Long`给它。

包装`latency`成一个对象数组会起作用，尽管要小心它`newInstance()`本身所期望`Object ...`的，如果你只传递一个`Object[]`，它会将它解释为一个参数列表。所以你必须做这样的事情：

```
MyClass myInstance = ( MyClass ) clazzConstructor.newInstance ( (Object)new Object[] { latency } ) ; 
```

或者

```
MyClass myInstance = ( MyClass ) clazzConstructor.newInstance ( new Object[] { new Object[] { latency } } ) ; 
```

第一个“愚弄”编译器将您的对象数组包装到另一个中，第二个则显式地执行此操作。

（传递 null 只是因为 null 是 null，无论参数的声明类型是什么。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-25T14:05:12.240

试试这个方法

```
MyClass myInstance = (MyClass) clazzConstructor
        .newInstance(new Object[] { new Object[] { latency } }); 
```

`newInstance(Object ... initargs)`需要对象数组作为参数。在构造函数中购买您的第一个参数也是对象数组，`Object... o`因此您需要再次将其包装在对象数组中。

我用这段代码对其进行了测试，似乎工作正常

```
class MyClass {
    private Long latency;

    public void setLatency(Long latency) {
        this.latency = latency;
    }
    public Long getLatency() {
        return latency;
    }

    public MyClass(Object... objects) {
        if (!(objects == null)) {
            if (objects.length > 0 && objects[0] instanceof Long) {
                setLatency((Long) objects[0]);
            }
        }
    }

    public static void main(String[] args) throws Exception {
        Class<?> clazz = MyClass.class;

        Constructor<?> clazzConstructor = clazz.getConstructor(Object[].class);
        System.out.println(clazzConstructor);

        Long latency = 1000L ;
        MyClass myInstance = (MyClass) clazzConstructor
                .newInstance(new Object[] { new Object[] { latency } });
        System.out.println(myInstance);
        System.out.println(myInstance.getLatency());
    }
} 
```

# asp.net-mvc - 对象引用未设置为 MVC 中对象的实例

> ID：11190695
> 
> 赞同：1
> 
> 时间：2012-06-25T13:57:49.433
> 
> 标签：asp.net-mvc, model-binding

我查看了所有出现此错误的帖子，但没有任何帮助。我将 MVC 与 ASPX (C#) 中的视图一起使用。在简单视图中编辑数据后，我正在更新数据库中的记录。当我一次处理一条记录时（控制器编辑方法和编辑视图）一切正常。当我处理多个记录（控制器 UpdateTest 和 UPDATETEST 视图）时，单击视图中的提交按钮后，控制器中的 HTTPPOST 方法出现错误。

这是示例代码的一个错误，一个有效，一个无效：

```
Object reference not set to an instance of an object. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error:  (CONTROLLER – SEE BELOW HttpPost  UpdateTest(ICollection<Mysurvey> mysurveys)

enter code here

Line 48:         public ActionResult UpdateTest(ICollection<Mysurvey> mysurveys)
Line 49:         {
Line 50:             foreach (var survey in mysurveys)
Line 51:             {
Line 52:                 db.Entry(survey).State = EntityState.Modified;

Source File: C:\Users\rsc_vok\Documents\Visual Studio 2010   \Projects\MvcMysurvey\MvcMysurvey\Controllers\MysurveyController.cs    Line: 50 
```

控制器

```
namespace MvcMysurvey.Controllers
{ 
 THE CODE WHICH WORKS – SINGLE EDIT
    public ActionResult Edit(int id)
    {
        Mysurvey mysurvey = db.Mysurveys.Find(id);
        return View(mysurvey);
    }

    // POST: /Mysurvey/Edit/5

    [HttpPost]
    public ActionResult Edit(Mysurvey mysurvey)
    {
        System.Diagnostics.Debug.WriteLine("iam in edit post");
        if (ModelState.IsValid)
        {
            db.Entry(mysurvey).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(mysurvey);
    }

THE CODE WITH THE ERROR IN httppost – MULTIPLE RECORDS SAVE

    public ActionResult UpdateTest(int id = 0)
    {

        List<Mysurvey> mysurveys = db.Mysurveys.ToList();

        return View(mysurveys.ToList());
    }

    [HttpPost]
    public ActionResult UpdateTest(ICollection<Mysurvey> mysurveys)
    {
        foreach (var survey in mysurveys)
        {
            db.Entry(survey).State = EntityState.Modified;
        }
        db.SaveChanges();
        return View(mysurveys);
    } 
```

看法

```
UPDATETEST
THE CODE WHICH WORKS HERE BUT THROWS AN ERROR IN CONTROLLER AFTER THE SAVE BUTTON IS HIT

  <%@ Page Language="C#"  MasterPageFile="~/Views/Shared/Site.master"  Inherits="System.Web.Mvc.ViewPage<IEnumerable<MvcMysurvey.Models.Mysurvey>>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
Updatetest
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<script src="<%: Url.Content("~/Scripts/jquery.validate.min.js") %>"    type="text/javascript"></script>
<script src="<%: Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js") %>" type="text/javascript"></script>

<% using (Html.BeginForm()) { %>
 <%: Html.ValidationSummary(true) %>
 <fieldset>
    <legend>Mysurvey</legend>
    <% foreach (var item in Model) {  %>
    <%: Html.HiddenFor(model => item.ID) %>
    <%: Html.HiddenFor(model => item.SurveyID) %>
    <div class="editor-label">
        <%: Html.LabelFor(model => item.Comment) %>
    </div>
    <div class="editor-field">
        <%: Html.EditorFor(model => item.Comment) %>
        <%: Html.ValidationMessageFor(model => item.Comment) %>
    </div>
    <%} %>
    <p>
        <input type="submit" value="Save" />
    </p>
  </fieldset>
 <% } %>

<div>
 <%: Html.ActionLink("Back to List", "Index") %>
</div>

</asp:Content> 
```

模型

```
namespace MvcMysurvey.Models
{
public class Mysurvey
{
    public int ID { get; set; }

    [DisplayFormat(DataFormatString = "{0:c}")] 

    public int SurveyID { get; set; }
    public string Comment { get; set; }
}
public class MysurveyDBContext : DbContext
{
    public DbSet<Mysurvey> Mysurveys { get; set; }
}
} 
```

# c# - 线程未启动

> ID：11190702
> 
> 赞同：2
> 
> 时间：2012-06-25T13:58:08.257
> 
> 标签：c#, winforms, multithreading

这一定是一个非常愚蠢的问题。我正在尝试在新线程中运行一个耗时的过程，以便能够显示进度条。我以前从未使用过线程。我必须做错事，因为当我使用该`.Start()`方法时，似乎什么都没有发生。

```
private void btnStart_Click(object sender, EventArgs e)
{
    clsScrap oScrap = new clsScrap(txtInputFilename.Text,txtImgSrc.Text);
    Thread ScrapThread = new Thread(new ThreadStart(oScrap.Scrap));
    ScrapThread.Start();
    while (oScrap.GetLinkCount() < 0) ;
    myProgressBar.Minimum = 1;
    myProgressBar.Maximum = oScrap.GetLinkCount();

    while (ScrapThread.IsAlive)
    {
        Thread.Sleep(1000 * 30);
        myProgressBar.Value = oScrap.GetCurrLinkNo();
    }
} 
```

我在 oScrap.Scrap() 的开头放置了一个断点，但它永远不会到达那里。在该`ScrapThread.Start();`行之后它只是移动到下一个while循环并卡在那里（该函数`oScrap.GetLinkCount()`假设在初始化后快速返回正值）

我究竟做错了什么？先谢谢了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T14:02:14.343

您正在 UI 线程上睡觉（您的按钮单击事件在 UI 线程上运行）。因为您的 UI 线程没有机会更新 Window（您只能休眠或设置一个值），所以您看不到任何变化。

尝试使用 a`BackgroundWorker`代替。
它提供了您可以在进度发生更改时处理的事件。您可以订阅事件[`ProgressChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx)并[`RunWorkerCompleted`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.runworkercompleted.aspx)获得正在发生的事情的通知，并且可以从您的 BackgroundWorker 方法[`ReportProgress`](http://msdn.microsoft.com/en-us/library/ka89zff4.aspx)触发`ProgressChanged`事件。

有关更多信息和示例，请参见此处：

[BackgroundWorker 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

# unit-testing - 在 iframe 中将 qunit 与 Web 应用程序一起使用

> ID：11190707
> 
> 赞同：5
> 
> 时间：2012-06-25T13:58:14.520
> 
> 标签：unit-testing, web-applications, qunit

我正在尝试使用 qUnit 执行一些单元测试，这些单元测试需要我的 Web 应用程序生成的屏幕才能运行。我的想法是将我的应用程序放入我的 qUnit 测试页面中嵌入的 iframe 中。但是，这似乎不起作用（在 chrome 中）我似乎无法访问网络应用程序的 iframe。如果我在 chrome 的控制台中执行此操作，我会得到未定义：

框架['myApp'].document

我认为这与某种跨域脚本安全性有关，但是，我的 Web 应用程序和我的测试页面都是从 localhost 提供的，所以我不明白为什么会发生这种情况，我也使用 --disable 启动了 Chrome -web-security 参数，但这还没有修复。

有没有更好的方法来进行需要我的应用程序输出的单元测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-18T16:01:03.960

您可以尝试通过任何简单的 http 服务器在 localhost 上发布这些测试，例如，如果您有一个节点，您可以使用[https://github.com/nodeapps/http-server](https://github.com/nodeapps/http-server)。

我有类似的情况测试正在 iframe 中运行，并且这项工作没有问题。

# javascript - 使用日语 tategaki 时将块元素 (p, div) 的最后一行对齐（写作模式：tb-rl）

> ID：11190709
> 
> 赞同：1
> 
> 时间：2012-06-25T13:58:18.107
> 
> 标签：javascript, html, css, text-alignment, text-align

我需要能够证明 ap 元素的最后一行。我在以下问题中尝试了解决方案

[对齐 div 的最后一行？](https://stackoverflow.com/questions/4771304/justify-the-last-line-of-a-div)

`<DIV>` `writing-mode`但不幸的是，当样式为`tb-rl`（从上到下/从右到左）且文本为日文时，这不起作用。有没有人有类似的需求并找到了解决方案？这是我当前使用的 HTML 示例。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">`
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">`
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <style>p {text-align:justify;margin:0px; padding-right:7px}</style>
  </head>
      <body style='margin:6px'>
        <DIV style='height: 444px; width: 320px; writing-mode: tb-rl; direction: ltr; -ms-writing-mode: vertical-rl; -moz-writing-mode: vertical-rl; -webkit-writing-mode: vertical-rl; -o-writing-mode: vertical-rl; font-family:"Hiragino Mincho ProN"; font-size:16px'>
      <p style='margin-right: 0px; margin-left: 0px;'>　</p><p>　わたしたちは今日、ミチコの手を&lt;ruby>離&lt;rt>はな</rt></ruby>し、ミチコとは二度と会わないと決めたのだけれど、ひょっとして見捨てられてしまうのはわたしたちのほうなんじゃないだろうか。今日ここで起きたことはすべて、ミチコと別れることでさえ、ひょっとしてミチコにとってはとっくに計算済みの出来事だったんじゃないだろうか。&lt;/p>
      <p>　そのときふと気づいた。ミチコの&lt;ruby>眼&lt;rt>まな</rt></ruby><ruby>差&lt;rt>ざ&lt;/rt></ruby>しが意味するものに。あれは<ruby>哀<rt>あわ</rt></ruby>れみ。ミチコはここにいるわたしたちを哀れんでいる。今日ここにいること、ここで起きたこと、いまこの瞬間この世の中で起きているあらゆることを哀れみ、そして</p>
    </DIV>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T06:59:17.630

您需要使用我发布的方法的轻微变化来证明水平文本的合理性。

不要将 :after 伪元素的宽度设置为 100%，而是将高度设置为 100%。

**CSS：**

```
p {
    margin: 0;
    margin-left: -1.8em; /* remove space added by p:after (adjust) */
}

/* justify last line of text */
p:after {
    content: "";
    display: inline-block;
    height: 100%;
}

/* set writing direction on container */
div.page {
    -webkit-writing-mode: vertical-rl;
    -ms-writing-mode: vertical-rl;
    writing-mode: vertical-rl;
    text-align: justify;
    text-justify: inter-ideograph; /* supported by IE */
} 
```

**HTML：**

```
<div class="page">
    <p>あれは&lt;ruby>哀<rt>あわ</rt></ruby>れみ。ミチコはここにいるわたしたちを哀れんでいる。&lt;/p>
</div> 
```

The :after pseudo element adds extra space after the paragraphs due to its line-height (you can't remove the line-height just from it alone as it's treated as just another piece of text within the p tag). To compensate for this you need to add a negative left margin to the paragraphs.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:50:25.080

您的 CSS 样式存在错误。`direction: ltr`应该是`direction: rtl`。尝试改变它，让我知道它是否有效。

# java - 我可以在 Eclipse 中使用变量来引用 Java 源路径吗

> ID：11190711
> 
> 赞同：4
> 
> 时间：2012-06-25T13:58:22.330
> 
> 标签：java, eclipse, configuration

**背景**

我正在使用 Eclipse 4.2 (Juno) 版本为 Java 应用程序构建插件。我的插件的源代码和类都位于项目工作区中。由于各种原因，应用程序 jar 及其源代码在 eclipse 工作区之外维护，并且应用程序 jar 是由另一种构建机制生成的。

这不是问题，因为我已经在我的项目中使用拖放引用了应用程序 jar 文件，并使用“*链接到文件*”选项指定它“*创建相对于*：**MYDEV**的链接位置”，其中**MYDEV**是我拥有的链接资源变量为每个 Eclipse 安装创建。这让我可以在多台机器上使用相同的 Eclipse 项目，其中应用程序 jar 的路径不同，但相对于 MYDEV 始终相同。

但是，除非我使用绝对路径，否则我找不到将应用程序源代码与此 jar 关联的方法。我只想访问应用程序源以进行调试。

**问题**

在 Eclipse 中，如何以允许在引用源代码已重新定位的多个安装中使用项目的方式将 java 源附加到引用的 jar？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:46:30.530

如果源在项目之外，那么没有绝对路径就无法访问它。

最好的解决方案是在 eclipse 项目目录中使用符号链接到实际的源文件夹；eclipse 不会注意到源在项目目录之外，并且一切都会正常工作，而无需重新定位源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:41:00.767

这是我能够按照您的建议做的唯一方法（不知道是否有更好的方法）。

打包一个 JAR 文件，其中包含 JAR 文件的源代码。将它放在你的项目中的一个文件夹中（你不需要将它添加到你的类路径中）

在 Eclipse 项目中，右键单击 JAR 文件并转到“属性”，然后转到“Java 源附件”从那里选择“工作区”按钮，然后选择包含我们从上述步骤添加的源代码的 jar 文件。

因此源附件路径将始终与项目相关。这样，如果您通过 SVN、GIT 或其他方式共享项目，源代码将始终可用，并且如果用户在 Windows 或 Linux 上运行 eclipse，它将工作。

我遇到了类似的问题，绝对路径对于使用不同操作系统的人来说是个问题，甚至通过 Samba 使用映射驱动器也没有太大帮助。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T21:41:33.907

我解决这个问题的方法是在eclipse中使用一个使用定义的库。以下是您可以用来解决此问题的步骤。

1.  在包含 jars 和源代码文件的目录中，在 eclipse 中创建一个简单的项目。

2.  定义一个 java 用户库，将 jars 添加到用户库中，并为库中的每个 jar 指定源的位置。如果源文件位于工作区中的项目中，则路径将相对于工作区文件夹。

3.  将用户库导出为 .xml 文件

当另一个用户想要使用与您相同的设置来设置 Eclipse 工作区时，他们将做两件事。

1.  将包含 jar 和源代码的项目导入其工作区。

2.  将用户库导入他们的工作区。

# jquery - 获取动态克隆行总数

> ID：11190717
> 
> 赞同：0
> 
> 时间：2012-06-25T13:58:46.103
> 
> 标签：jquery

我正在做基于 jquery 的订单表。当我搜索类似的问题时，有数百种方法可以获得每个表行的总值。但就我而言，总价值以奇怪的方式触发。

完整的源代码上传到 jsfiddle。

[http://jsfiddle.net/pR9Qd/](http://jsfiddle.net/pR9Qd/)

有两个主要问题。

1.  .total_amount 的总值很奇怪。它大于每个 .amount 的总和

2.  当我删除一些行时， .total_amount 不会改变。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:48:41.003

删除行的问题是没有进行计算：

```
function RemoveRow(htmlelement) {
    $(htmlelement).parent().parent().remove();
   /* after remove, run calcs again*/
    doCalc();
} 
```

我进行了演示并对其进行了相当多的清理。它还不是一个完整的应用程序，但更接近。使用 $.each 查找输入元素根本不正确。语法错误，链接 find() 的顺序错误。首先找到 elemenet 集合，然后运行`each`​​.

删除时数学似乎没问题`<?=$dollar_value?>`，`+15000`因此可以看到简单的数字相加。 `Add row`现在`delete row`工作。`Add row`没有重置克隆行的值

演示：http: [//jsfiddle.net/pR9Qd/1/](http://jsfiddle.net/pR9Qd/1/)

# bash - Bash 用字符串代码替换值

> ID：11190719
> 
> 赞同：0
> 
> 时间：2012-06-25T13:58:47.663
> 
> 标签：bash, replace

我有两个文件是这样的：

file1(参考文件)
BBB;33
AAA;2
CCC;5

文件
2 5;.;.;.
33;.;.;.

我想将文件 1 第一列中的相应字符串替换为 column1 文件 2 中的相应值，以便：

输出
CCC;.;.;.
BBB;.;.;.

希望这很清楚，

感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:07:51.213

如果我理解正确并且文件中的顺序正确，

```
$ cat file1
BBB;33
AAA;2
CCC;5
$ cat file2
33;.;.;.
2;.;.;.
5;.;.;.
$ paste file1 file2 | sed 's/\([0-9]\+\)\t\1;//'
BBB;.;.;.
AAA;.;.;.
CCC;.;.;. 
```

添加`> file3`到最后一个命令以将输出写入`file3`. 然后你可以做`mv file3 file1`。

# mysql - 维护数据库中唯一值的列表

> ID：11190720
> 
> 赞同：0
> 
> 时间：2012-06-25T13:58:49.770
> 
> 标签：mysql, performance

假设您有一个随机数生成器吐出 1 到 100 000 000 之间的数字，并且您希望将它们存储在数据库 (MySQL) 中，并带有生成它们时的时间戳。如果出现了以前见过的数字，则将其丢弃。

实现这一目标的最佳算法是什么？根据需要选择然后插入？有什么更有效的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:02:08.343

如果不需要每次都插入新的随机值，可以使用 INSERT IGNORE 或 REPLACE INTO。否则你应该选择检查然后插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:21:16.673

1.  你可以去`SEQUENCE`：

    `+`

    *   没有关系被锁定，因此性能最佳；
    *   没有比赛条件；
    *   便携的。

    `-`

    *   在一系列数字中可能会出现“空白”。
2.  你可以这样`SELECT ...`做`INSERT ...`：

    `+`

    *   没有差距，你也可以对你的数字做一些复杂的数学运算。

    `-`

    *   可以在 和 之间进行另一个并行会话，`SELECT`并`INSERT`以 2 个相等的数字结束；
    *   如果存在`UNIQUE`约束，则先前的情况将导致异常；
    *   为避免这种情况，您可能会使用显式表锁，但这会立即对性能产生影响。
3.  您可以选择`INSERT ON DUPLICATE KEY UPDATE`，到目前为止，它似乎是最好的选择（看看["INSERT IGNORE" 与 "INSERT ... ON DUPLICATE KEY UPDATE"](https://stackoverflow.com/questions/548541/insert-ignore-vs-insert-on-duplicate-key-update)），至少在我看来，唯一的例外 - 不能移植到其他 RDBMS。

PS[这篇文章](http://www.depesz.com/2012/06/10/why-is-upsert-so-complicated/)与 MySQL 无关，但值得一读以了解在您的过程中可能发生的所有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:14:54.857

这通常可以通过在表中的随机数列上创建唯一索引来解决。您可以尝试看看 b 树与散列是否具有更好的性能。

如果您有大量内存，您可以预先填充一个包含 100,000,000 行的表——所有可能的值。然后，当您查看是否已创建某些内容时，您只需要查看时间戳是否为非空。但是，这将需要超过 1 GB 的 RAM 才能将表存储在内存中，并且只有在您尝试最大化每秒事务数时才是最佳解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T15:53:33.443

如果您`UNIQUE`在具有提取数字的列上放置索引，则任何复制键`INSERT`的尝试都将*失败*。`UNIQUE`

 *因此，最简单和最便携的版本将是（PHP 代码，但你明白了）：

```
function extraction() {
  do {
    $random = generate_random_number();
    $result = @mysql_query("INSERT INTO extractions(number) VALUE ($random)");
  } while (!$result);
  return $random;
} 
```*

# c++ - opencv stereoRectifyUncalibrated 的问题

> ID：11190732
> 
> 赞同：7
> 
> 时间：2012-06-25T13:59:13.333
> 
> 标签：c++, opencv, stereo-3d, disparity-mapping

我一直在尝试使用 OpenCV stereoRectifyUncalibrated 为一对图像校正和构建视差映射，但我没有得到很好的结果。我的代码是：

```
template<class T>
T convertNumber(string& number)
{
    istringstream ss(number);
    T t;
    ss >> t;
    return t;
}

void readPoints(vector<Point2f>& points, string filename)
{
    fstream filest(filename.c_str(), ios::in);
    string line;

    assert(filest != NULL);

    getline(filest, line);
    do{
        int posEsp = line.find_first_of(' ');
        string posX = line.substr(0, posEsp);
        string posY = line.substr(posEsp+1, line.size() - posEsp);

        float X = convertNumber<float>(posX);
        float Y = convertNumber<float>(posY);

        Point2f pnt = Point2f(X, Y);
        points.push_back(pnt);
        getline(filest, line);
    }while(!filest.eof());

    filest.close();
}

void drawKeypointSequence(Mat lFrame, Mat rFrame, vector<KeyPoint>& lKeyp, vector<KeyPoint>& rKeyp)
{
    namedWindow("prevFrame", WINDOW_AUTOSIZE);
    namedWindow("currFrame", WINDOW_AUTOSIZE);
    moveWindow("prevFrame", 0, 300);
    moveWindow("currFrame", 650, 300);
    Mat rFrameAux;
    rFrame.copyTo(rFrameAux);
    Mat lFrameAux;
    lFrame.copyTo(lFrameAux);

    int size = rKeyp.size();
    for(int i=0; i<size; i++)
    {
        vector<KeyPoint> drawRightKeyp;
        vector<KeyPoint> drawleftKeyp;

        drawRightKeyp.push_back(rKeyp[i]);
        drawleftKeyp.push_back(lKeyp[i]);

        cout << rKeyp[i].pt << " <<<>>> " << lKeyp[i].pt << endl;

        drawKeypoints(rFrameAux, drawRightKeyp, rFrameAux, Scalar::all(255), DrawMatchesFlags::DRAW_OVER_OUTIMG);
        drawKeypoints(lFrameAux, drawleftKeyp, lFrameAux, Scalar::all(255), DrawMatchesFlags::DRAW_OVER_OUTIMG);

        imshow("currFrame", rFrameAux);
        imshow("prevFrame", lFrameAux);
        waitKey(0);
    }
    imwrite("RightKeypFrame.jpg", rFrameAux);
    imwrite("LeftKeypFrame.jpg", lFrameAux);
}
int main(int argc, char* argv[])
{
    StereoBM stereo(StereoBM::BASIC_PRESET, 16*5, 21);
    double ndisp = 16*4;
    assert(argc == 5);
    string rightImgFilename(argv[1]);       // Right image (current frame)
    string leftImgFilename(argv[2]);        // Left image (previous frame)
    string rightPointsFilename(argv[3]);    // Right image points file
    string leftPointsFilename(argv[4]);     // Left image points file

    Mat rightFrame = imread(rightImgFilename.c_str(), 0);
    Mat leftFrame = imread(leftImgFilename.c_str(), 0);

    vector<Point2f> rightPoints;
    vector<Point2f> leftPoints;

    vector<KeyPoint> rightKeyp;
    vector<KeyPoint> leftKeyp;

    readPoints(rightPoints, rightPointsFilename);
    readPoints(leftPoints, leftPointsFilename);
    assert(rightPoints.size() == leftPoints.size());

    KeyPoint::convert(rightPoints, rightKeyp);
    KeyPoint::convert(leftPoints, leftKeyp);

    // Desenha os keypoints sequencialmente, de forma a testar a consistência do matching
    drawKeypointSequence(leftFrame, rightFrame, leftKeyp, rightKeyp);

    Mat fundMatrix = findFundamentalMat(leftPoints, rightPoints, CV_FM_8POINT);
    Mat homRight;
    Mat homLeft;
    Mat disp16 = Mat(rightFrame.rows, leftFrame.cols, CV_16S);
    Mat disp8 = Mat(rightFrame.rows, leftFrame.cols, CV_8UC1);
    stereoRectifyUncalibrated(leftPoints, rightPoints, fundMatrix, rightFrame.size(), homLeft, homRight);

    warpPerspective(rightFrame, rightFrame, homRight, rightFrame.size());
    warpPerspective(leftFrame, leftFrame, homLeft, leftFrame.size());

    namedWindow("currFrame", WINDOW_AUTOSIZE);
    namedWindow("prevFrame", WINDOW_AUTOSIZE);
    moveWindow("currFrame", 650, 300);
    moveWindow("prevFrame", 0, 300);
    imshow("currFrame", rightFrame);
    imshow("prevFrame", leftFrame);

    imwrite("RectfRight.jpg", rightFrame);
    imwrite("RectfLeft.jpg", leftFrame);

    waitKey(0);

    stereo(rightFrame, leftFrame, disp16, CV_16S);

    disp16.convertTo(disp8, CV_8UC1, 255/ndisp);
    FileStorage file("disp_map.xml", FileStorage::WRITE);
    file << "disparity" << disp8;
    file.release();
    imshow("disparity", disp8);
    imwrite("disparity.jpg", disp8);
    moveWindow("disparity", 0, 0);

    waitKey(0);
} 
```

drawKeyPoint 序列是我直观地检查两个图像的点的一致性的方式。通过按顺序绘制它们的每个关键点，我可以确定图像 A 上的关键点 i 是图像 B 上的关键点 i。

我也尝试过使用 ndisp 参数，但没有太大帮助。

我尝试了以下一对图像：

[左图](https://i.stack.imgur.com/cGf9E.jpg)

[右图](https://i.stack.imgur.com/0F2dm.jpg)

得到以下纠正对：

[修正左](https://i.stack.imgur.com/4T1Hq.jpg)

[纠正右](https://i.stack.imgur.com/AjVkC.jpg)

最后，下面的视差图

[视差图](https://i.stack.imgur.com/KVTNB.jpg)

如您所见，这非常糟糕。我还使用以下 stereoRectifyUncalibrated 示例尝试了同一对图像：http: [//programmingexamples.net/wiki/OpenCV/WishList/StereoRectifyUncalibrated](http://programmingexamples.net/wiki/OpenCV/WishList/StereoRectifyUncalibrated)和 opencv 教程代码示例中的 SBM_Sample.cpp 来构建视差图，并得到了非常相似的结果。

我正在使用 opencv 2.4

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:23:06.470

除了可能的校准问题外，您的图像显然缺少一些纹理，无法使立体块匹配正常工作。该算法将在平坦（非纹理）部分上看到许多歧义和太大的差异。

但是请注意，关键点似乎匹配得很好，所以即使校正输出看起来很奇怪，它也可能是正确的。

[您可以针对来自Middlebury 立体页面](http://vision.middlebury.edu/stereo/data/)的标准图像测试您的代码，以进行完整性检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:24:30.503

我建议使用棋盘进行立体校准，或者使用棋盘拍摄多张照片并`stereocalibrate.cpp`在计算机上使用。我是说因为您使用的是`stereorectifyuncalibrated`，虽然该算法不需要知道相机的内在参数，但它在很大程度上取决于对极几何。因此，如果相机镜头有明显的畸变，最好在计算基本矩阵并调用此函数之前对其进行校正。例如，可以使用 分别估计立体摄像机每个头部的失真系数`calibrateCamera()`。然后，可以使用 校正图像`undistort()`，或者可以使用 校正点坐标`undistortPoints()`。

# google-app-engine - 对 GAE 数据存储的直观理解

> ID：11190733
> 
> 赞同：4
> 
> 时间：2012-06-25T13:59:16.667
> 
> 标签：google-app-engine, google-cloud-datastore

我试图了解 Google App Engine (GAE) 数据存储是如何设计的以及如何使用它。我很难从[入门页面](https://developers.google.com/appengine/docs/java/gettingstarted/usingdatastore)的描述中可视化结构。

有人可以为我们以视觉为导向的人解释数据存储吗？或者在考虑视觉学习的情况下再次指向一个好的教程？

我正在专门寻找解释如何使用 GAE 的图表/数字的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:15:37.787

2008 年 IO 会议“Under the Covers of the Google App Engine Datastore”对数据存储区进行了很好的可视化概述。

[https://sites.google.com/site/io/under-the-covers-of-the-google-app-engine-datastore](https://sites.google.com/site/io/under-the-covers-of-the-google-app-engine-datastore)

[http://snarfed.org/datastore_talk.html](http://snarfed.org/datastore_talk.html)

如需更多 IO 会谈，请访问： [https ://developers.google.com/appengine/docs/videoresources](https://developers.google.com/appengine/docs/videoresources)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-12T18:33:04.650

非常简单，我知道 GAE 可以看作是哈希图的哈希图。

也就是说，您可以这样查看：

[![GAE 数据存储可视化](../Images/80c5874196a1a456095975a1e7b5679c.png)](https://docs.google.com/drawings/d/1CzltvgphG0BNI5mI_erdu0i6IGZO-LOA6iDE7rEkclM/edit?usp=sharing)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T07:07:58.543

我想这里没有正确的答案，只是不同的思维模型。根据您的编程背景，您可能会发现我的启发、令人不安或两者兼而有之。我将数据存储区想象成一个巨大的分布式键值存储桶集合，其中包含任何命名空间中任何类型的所有实体数据以及所有用户的所有 GAE 应用程序。单个存储桶称为实体组。它有一个根键（在后台）由您的 appID、命名空间、种类、实体 ID 或名称组成。在一个实体组中驻留一个或多个实体，这些实体具有扩展根密钥的密钥。属于根密钥本身的实体可能存在也可能不存在。单个实体组中的操作是原子的（事务性的）。实体是一个简单的类似地图的数据结构。2 个内置索引（升序和降序）又是 2 个巨大的索引条目排序集合。每个索引条目都是 appID、命名空间、种类、属性名称、属性类型、属性值、实体键的数据结构 - 按此顺序。每个实体的每个属性的每个（自动）索引值都会创建 2 个这样的索引条目。还有另一个索引，其中只有实体键。然而，自定义索引转到另一个排序集合，其中包含 appID、命名空间、索引类型、组合索引值、实体键的条目。这是整个数据存储中唯一使用元数据的部分。它存储一个索引定义，该定义告诉存储如何从实体形成组合索引值。这是我脑海中烙印的画面，我知道如何让数据存储满意。命名空间、种类、属性名称、属性类型、属性值、实体键 - 按此顺序。每个实体的每个属性的每个（自动）索引值都会创建 2 个这样的索引条目。还有另一个索引，其中只有实体键。然而，自定义索引转到另一个排序集合，其中包含 appID、命名空间、索引类型、组合索引值、实体键的条目。这是整个数据存储中唯一使用元数据的部分。它存储一个索引定义，该定义告诉存储如何从实体形成组合索引值。这是我脑海中烙印的画面，我知道如何让数据存储满意。命名空间、种类、属性名称、属性类型、属性值、实体键 - 按此顺序。每个实体的每个属性的每个（自动）索引值都会创建 2 个这样的索引条目。还有另一个索引，其中只有实体键。然而，自定义索引转到另一个排序集合，其中包含 appID、命名空间、索引类型、组合索引值、实体键的条目。这是整个数据存储中唯一使用元数据的部分。它存储一个索引定义，该定义告诉存储如何从实体形成组合索引值。这是我脑海中烙印的画面，我知道如何让数据存储满意。s 另一个只有实体键的索引。然而，自定义索引转到另一个排序集合，其中包含 appID、命名空间、索引类型、组合索引值、实体键的条目。这是整个数据存储中唯一使用元数据的部分。它存储一个索引定义，该定义告诉存储如何从实体形成组合索引值。这是我脑海中烙印的画面，我知道如何让数据存储满意。s 另一个只有实体键的索引。然而，自定义索引转到另一个排序集合，其中包含 appID、命名空间、索引类型、组合索引值、实体键的条目。这是整个数据存储中唯一使用元数据的部分。它存储一个索引定义，该定义告诉存储如何从实体形成组合索引值。这是我脑海中烙印的画面，我知道如何让数据存储满意。

# python - Python matplotlib 叠加散点图

> ID：11190735
> 
> 赞同：34
> 
> 时间：2012-06-25T13:59:25.680
> 
> 标签：python, plot, matplotlib, scatter-plot

我正在使用 Python matplotlib。我想叠加散点图。我知道如何用命令叠加连续线图：

```
>>> plt.plot(seriesX)
>>> plt.plot(Xresampl)
>>> plt.show() 
```

但它似乎与 scatter 的工作方式不同。或者也许使用带有指定线条样式的进一步参数的 plot() 。如何进行？谢谢

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-25T14:05:57.953

您只需调用该`scatter`函数两次，`matplotlib`将为您叠加两个图。您可能想要指定一种颜色，因为所有散点图的默认值都是蓝色。这也许就是您只看到一个情节的原因。

```
import numpy as np
import pylab as plt

X = np.linspace(0,5,100)
Y1 = X + 2*np.random.random(X.shape)
Y2 = X**2 + np.random.random(X.shape)

plt.scatter(X,Y1,color='k')
plt.scatter(X,Y2,color='g')
plt.show() 
```

![在此处输入图像描述](../Images/62936f67d165c5590ad42834e2b66b47.png)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-08-19T15:13:13.077

如果您希望继续使用绘图，您可以使用子绘图返回的轴对象：

```
import numpy as np
import pylab as plt

X = np.linspace(0,5,100)
Y1 = X + 2*np.random.random(X.shape)
Y2 = X**2 + np.random.random(X.shape)

fig, ax = plt.subplots()
ax.plot(X,Y1,'o')
ax.plot(X,Y2,'x')
plt.show() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-30T14:05:17.173

这是另一种方式：

```
X = np.linspace(0,5,100)
Y1 = X + 2*np.random.random(X.shape)
Y2 = X**2 + np.random.random(X.shape)

plt.plot(Y1, label = "Y1")
plt.plot(Y2, label = "Y2")
plt.tight_layout()
plt.xlabel("X")
plt.ylabel("Y")
plt.legend() 
```

# php - 编写此 php 多个 if 条件的最短方法

> ID：11190737
> 
> 赞同：1
> 
> 时间：2012-06-25T13:59:26.370
> 
> 标签：php, if-statement

我正在尝试进行如下查询：

如果`$_GET['page'] == 'items'`与`$_GET['action'] == 'new' OR 'edit'`

这是我所拥有的：

```
if (isset($_GET['page']) && $_GET['page'] == 'items') {
    if (isset($_GET['action']) && $_GET['action'] == 'new' || isset($_GET['action']) && $_GET['action'] == 'edit') {

        // This is what Im looking for

    }
} 
```

这是正确的，这是进行此查询的最简单方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:02:56.847

你也可以这样做：

```
if (isset($_GET['page']) && $_GET['page'] == 'items') {
    if (isset($_GET['action']) && ($_GET['action'] == 'new' || $_GET['action'] == 'edit')) {

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:05:58.977

您的方式非常好，尽管我几乎很想按照以下方式进行操作。我建议这样做的唯一原因是您的代码需要设置操作和页面。如果未设置操作，则检查页面是否为 == 'items' 没有多大意义。

```
if(isset($_GET['page']) && isset($_GET['action'])) {
    if($_GET['page'] == 'items' && ($_GET['action'] == 'new' || $_GET['action'] == 'edit')) {
        //do code here
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T14:04:17.227

你也可以试试`in_array`：

```
if (isset($_GET['page']) && $_GET['page'] == 'items')
{
    if ( !empty( $_GET['action'] ) && in_array( $_GET['action'], array( 'new', 'edit' ) )
    {
        // This is what Im looking for
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T14:08:33.677

这是可能的解决方案之一

```
if ( @$_GET['page'] == 'items' && in_array(@$_GET['action'], array('new','edit'))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T14:21:32.560

一切都很好，但你也可以使用功能：

```
function paramIs($param, $values) {
    $result = false;
    foreach ((array)$values as $value) {
        $result = $result || isset($_GET[$param]) && $_GET[$param] == $value;
    }
    return $result;
} 
```

用法：

```
if (paramIs('page', 'items') && paramIs('action', array('new', 'edit')))
{
    // your code here
} 
```

它将减少代码中的重复次数并将逻辑封装在一个地方

# linux - 如何使 gcc 输出不可执行？

> ID：11190741
> 
> 赞同：0
> 
> 时间：2012-06-25T13:59:29.440
> 
> 标签：linux, gcc

我在 ubuntu 上，生成的某个 .so 文件是可执行的。当我点击选项卡以自动完成时，我得到“something.so main.executable”而不是“main.executable”，这有点令人烦恼。

是否有一个标志可以传递给链接器以避免 chmod 或者我必须在事后手动 chmod -x ？

# sitecore - Sitecore 中 Lucene Search 的默认排序顺序是什么？

> ID：11190743
> 
> 赞同：1
> 
> 时间：2012-06-25T13:59:40.943
> 
> 标签：sitecore

我正在使用 Sitecore 6.5，想知道 lucene 默认按什么排序顺序排列搜索结果？我们也可以用我们的自定义排序逻辑来改变（替换）这个默认行为吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T15:09:26.823

默认情况下，文档按*相关性排序。*您可以按任何字段排序，这是一个简单的示例（在 SearchContext 中）：

```
var searchHits = new SearchHits(searchContext.Searcher.Search(query, new Sort("__created", true)));
var results = searchHits.FetchResults(0, 100); 
```

其中“__created”是您要排序的字段。

# c# - 自定义错误在 Sharepoint 2010 中不起作用

> ID：11190755
> 
> 赞同：1
> 
> 时间：2012-06-25T14:00:17.163
> 
> 标签：c#, asp.net, sharepoint-2010

我已`customErrors mode="On"`在我的 Sharepoint 站点的 web.config 文件中包含该行，但我仍然没有收到任何错误消息。它只是不断告诉我在出错时将其包含在内。

在这一点上我不确定还能做什么，任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T05:13:19.130

SharePoint 应用程序由多个映射在一起的虚拟目录组成。您可以更改 C:\inetpub\wwwroot\wss\VirtualDirectories\ 下的根 web.config，但这可能会并且确实会被许多映射的虚拟文件夹覆盖，即 _controltemplates、_layouts、_vti_bin、_wpresources。
如果您在系统页面上失败，您可能需要改为修改映射文件夹中的 web.config 文件。
正如您提到的 ULS 通常包含所有错误，而 SharePoint ULS Logviewer 是这里不可或缺的工具，[http:](http://sharepointlogviewer.codeplex.com/) //sharepointlogviewer.codeplex.com/ 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:19:31.087

我发现的另一个解决方案是使用一个名为 ULS Viewer 的工具，它可以直接访问 Sharepoint 日志文件并显示异常。

[http://archive.msdn.microsoft.com/ULSViewer](http://archive.msdn.microsoft.com/ULSViewer)

可以从上面的链接下载！

# iphone - 文本字段不清晰

> ID：11190762
> 
> 赞同：1
> 
> 时间：2012-06-25T14:00:38.910
> 
> 标签：iphone, ios5, xcode4.3

我有一个文本字段，从中显示文本字段值字符串的弹出框。

当我编辑文本字段时，清除按钮是可见的，但是，当我单击清除按钮时，文本字段文本不会消失，但弹出框会消失。

请问我该如何解决这个问题？

下面是代码片段

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    if ([popOverController isPopoverVisible]) 
    {
        [popOverController dismissPopoverAnimated:YES];

    }

    if(textField.tag == SERVER_TAG){

        if ([[self getServerList] count]) {
            [self createPopUp];
        }
    } else {
        [serverNameTf resignFirstResponder];
    }

}

- (BOOL)textFieldShouldClear:(UITextField *)textField {

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:12:48.143

如果您粘贴您尝试过的代码，它会更好。

但正如我从你的问题中了解到的那样，你可能不会设置 TEXTFIELDs 代表，

所以文本字段委托给自己。

**IE。textfield.delegate = self**

并进行更改为>>

[textField setText:@""];

[popOverControllerdismissPopoverAnimated:YES];

试试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:14:26.247

```
if ([popOverController isPopoverVisible]) 
{
    [textField setText:@""];
    [popOverController dismissPopoverAnimated:YES];

} 
```

# json - 将json对象中发布的一项映射到Spring MVC中的列表对象

> ID：11190763
> 
> 赞同：1
> 
> 时间：2012-06-25T14:00:43.773
> 
> 标签：json, spring, model-view-controller, list

我在发布 json 对象并将其与 Spring MVC 控制器中的 List 对象映射时遇到了麻烦。我有一个有几个复选框的表格。当用户检查和提交时，表单中的数据被反序列化，发送到 Spring MVC 控制器并映射到 List 类型对象。当用户选中两个或更多复选框时，它工作正常。但只有一个盒子，它没有。

当用户检查两个或更多时，数据将被反序列化，如下所示。

```
{"users":["137","138"]} 
```

但是，当用户只选中一个复选框时，就像

```
{"users":"138"} 
```

并返回 400 bad request 错误。

有什么解决方法或解决方案吗？

jQuery代码是：

```
$(document).ready(function() {
    $('#groupusers').submit(function() {
    var users = $(this).serializeObject();
    $.postJSON("${context}/admin/groups/${group.seq}/users", users, function(result) {
        ...
    });
    return false;
}); 
```

形式是：

```
<form id="groupusers" method="post" accept-charset="UTF-8" action="/" class="edit_group">
  ...
  <div id="users">
    <c:forEach var="user" items="${users}">
      <label><input id="users" name="users" type="checkbox" value="${user.seq}" /> ${user.firstName} ${user.lastName}</label><br>
    </c:forEach>
  </div>
</form> 
```

映射到表单数据的列表对象：

```
public class AssignedUsers {
  private List<Long> users;
  ...
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:38:13.833

功能的实现是什么`serializeObject()`？您可能需要修改它以始终返回一个数组，因此即使您只选中一个框，该对象也应该是：`{"users":["138"]}`

服务器返回 400 可能是因为 Jackson 在后端抛出了解析异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T20:20:48.897

## [Fojas 的 jQuery 序列化](https://github.com/fojas/jQuery-serializeObject)

这是我找到的解决方案，并且一直在使用它，它完全符合您的要求。

## 例子

HTML

```
<form id="myForm">
  <input name="data[]" value="some data"/>
  <input name="data[]" value="more data"/>

  <input name="users[]" value="137"/>
</form> 
```

jQuery

```
$('#myForm').serializeObject(); 
```

输出

```
{
  data: ["some data", "more data"]
  users: [137]
} 
```

# c# - 公共类扩展内部类

> ID：11190765
> 
> 赞同：1
> 
> 时间：2012-06-25T14:00:49.167
> 
> 标签：c#

`A`我有一个做很多事情的内部类，我还有一组其他类`B`，它们从`D`类`E`继承`A`。当然这不会起作用，因为编译器会抱怨公共类无法扩展内部类（请参阅[this](https://stackoverflow.com/questions/3626958/c-why-cant-my-public-class-extend-an-internal-class)以获得解释）。

我不想`A`公开，因为我不希望我的用户继承它。我希望他们只使用`B`, `D`, `E`.

我知道我可以使用 Intellisense 隐藏该类，`[EditorBrowsable(EditorBrowsableState.Never)]`但用户仍然可以使用反射访问它:(

有没有办法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T14:12:50.140

假设它`A`在程序集*A*中，并且`B`，`D`并且`E`在程序集*BDE*中，您可以在*A上声明*[`InternalsVisibleTo`属性](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)以使*BDE*成为友元程序集。像这样，，，就能看到。**`B``D``E``A`**

 **不过，您不能从 继承`A`，因为超类的可见性不能低于子类。您可以通过声明`A` *public*同时使其所有构造函数为*internal*来解决此问题。这样，只有具有*内部* 访问权限的代码`A`才能从`A`.**

# c++ - 这个 Qt DBus 信号连接代码是否正确？

> ID：11190766
> 
> 赞同：3
> 
> 时间：2012-06-25T14:00:50.290
> 
> 标签：c++, qt, ubuntu, dbus

这是我第一次使用 DBus，所以我不完全确定我是否以正确的方式进行。我正在尝试连接 Ubuntu One DBus 服务并获取我的应用程序的登录凭据，但是我连接到 DBus 返回信号的插槽[似乎](https://one.ubuntu.com/developer/account_admin/auth/ubuntu#other-languages)从未触发，尽管在连接期间返回了肯定结果。

在我开始查找与此特定服务相关的详细信息中的错误之前，有人可以告诉我此代码是否可以首先工作，或者我在这里做错了什么？

```
int main()
{
    UbuntuOneDBus *u1Dbus = new UbuntuOneDBus;
    u1Dbus->init();
}

class UbuntuOneDBus : public QObject
{
  Q_OBJECT

  QString busName;
  QString path;
  QString interface;
  QString method;
  QString signature;

  void connectReturnSignals();

private slots:
  void credentialsFound();
  void credentialsNotFound();
  void credentialsError();

public:
  UbuntuOneDBus();

  void init();
};

UbuntuOneDBus::UbuntuOneDBus()
{
  busName = "com.ubuntuone.Credentials";
  path = "/credentials";
  interface = "com.ubuntuone.CredentialsManagement";
  method = "register";
  signature = "a{ss}";

  connectReturnSignals();
}

void UbuntuOneDBus::init()
{
  QDBusMessage message = QDBusMessage::createMethodCall( busName, path, interface, method );
  QDBusConnection::sessionBus().send( message );
}

void UbuntuOneDBus::connectReturnSignals()
{
  QDBusConnection::sessionBus().connect( busName, path, interface, "CredentialsFound", this, SLOT( credentialsFound() ) );
  QDBusConnection::sessionBus().connect( busName, path, interface, "CredentialsNotFound", this, SLOT( credentialsNotFound() ) );
  QDBusConnection::sessionBus().connect( busName, path, interface, "CredentialsError", this, SLOT( credentialsError() ) );
}

void UbuntuOneDBus::credentialsFound()
{
  qDebug() << "Credentials found";
}

void UbuntuOneDBus::credentialsNotFound()
{
  std::cout << "Credentials not found" << std::endl;
}

void UbuntuOneDBus::credentialsError()
{
  std::cout << "Credentials error" << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T19:08:10.477

我想你忘了跑

```
QDBusConnection QDBusConnection::connectToBus ( BusType type, 
                                                const QString & name ) 
```

然后检查

```
bool QDBusConnection::isConnected () const 
```

在调用之前

```
void UbuntuOneDBus::connectReturnSignals() 
```

或运行带有一些标志的程序，但这应该更容易。

我不想要什么是你的目标，但也许你也应该尝试

```
bool QDBusConnection::registerObject ( const QString & path, QObject * object, 
                                       RegisterOptions options = ExportAdaptors ) 
```

这里有一些文档： [connectToBus](http://qt-project.org/doc/qt-5.1/qtdbus/qdbusconnection.html#connectToBus)

[已连接](http://qt-project.org/doc/qt-5.1/qtdbus/qdbusconnection.html#isConnected)

[注册对象](http://qt-project.org/doc/qt-5.1/qtdbus/qdbusconnection.html#registerObject)

# jsf-2 - Spring Security 发送 AuthenticationEvent 两次

> ID：11190768
> 
> 赞同：1
> 
> 时间：2012-06-25T14:00:56.103
> 
> 标签：jsf-2, spring-security

我已经在 Glassfish 3.1.2 上运行的现有 JSF 2 应用程序中嵌入了 Spring Security。为此，我使用了转发到 /j_spring_security_check 的方法，如下文所述：

[http://ocpsoft.org/java/acegi-spring-security-jsf-login-page/](http://ocpsoft.org/java/acegi-spring-security-jsf-login-page/)

我的代码几乎是文章代码的一对一副本。

这是login.xhtml：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
            xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:f="http://java.sun.com/jsf/core"
            template="/template/template.xhtml">
<ui:define name="content">
    <h:form id="loginForm" prependId="false">
        <h:panelGrid columns="2">
            <h:outputText value="#{msg['loginDialog.login']}: " />
            <h:inputText id="j_username" required="true" />

            <h:outputText value="#{msg['loginDialog.password']}" />
            <h:inputSecret id="j_password" required="true" />
        </h:panelGrid>
        <h:commandButton type="submit"
                         action="#{loginBean.doLogin}" 
                         value="#{msg['loginDialog.register']}"  />
    </h:form>
</ui:define> 
```

这是我的登录 bean：

```
public class LoginBean implements Serializable {

public String doLogin() throws IOException, ServletException {
    ExternalContext context = FacesContext.getCurrentInstance().getExternalContext();

    Map map = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();
    String j_user = (String) map.get("j_username");
    String j_pwd = (String) map.get("j_password");
    RequestDispatcher dispatcher = ((ServletRequest) context.getRequest()).getRequestDispatcher("/j_spring_security_check?j_username=" + j_user + "&j_password=" + j_pwd);

    dispatcher.forward((ServletRequest) context.getRequest(), (ServletResponse) context.getResponse());
    FacesContext.getCurrentInstance().responseComplete();
    return null;

} 
```

}

这是安全上下文的声明：

```
<context:component-scan base-package="com.mycompany.package"/>

<security:global-method-security
    secured-annotations="enabled">
</security:global-method-security>

<security:http auto-config="true"
               access-denied-page="/accessDenied.xhtml">

    <security:intercept-url pattern="/*"
                           access="ROLE_VIEWER,ROLE_CREATOR,ROLE_ADMIN" />

    <security:form-login
        login-processing-url="/j_spring_security_check"
        login-page="/login.xhtml"
        default-target-url="/main.xhtml"
        authentication-failure-url="/login.xhtml" />

    <security:logout logout-url="/logout*"
                     logout-success-url="/login.xhtml" 
                     invalidate-session="true"/>
</security:http>

<security:authentication-manager>
    <security:authentication-provider user-service-ref='userDetailsService'/>
</security:authentication-manager> 
```

然后我创建了一个监听器来捕获所有 AbstractAuthenticationEvent：

```
public class AuthenticationListener implements
    ApplicationListener<AbstractAuthenticationEvent> {
private final static Log log = LogFactory.getLog(AuthenticationListener.class);

@Override
public void onApplicationEvent(AbstractAuthenticationEvent e) {
// some processing
} 
```

}

问题是：每次成功登录后，AuthenticationEvent 会生成两次，而不是一次，正如它所建议的那样。

有人会解释，有什么问题吗？

一些补充：事件生成两次，因为（我不明白为什么），登录后立即自动注销，然后进行新的身份验证。这是来自日志的片段：

> INFO: *** * 试图检索用户
> 
> INFO: *** * 找到用户
> 
> 信息：休眠：插入审计（EVENT_TYPE、EVENT_TIMESTAMP、USER_ID）值（？、？、？）
> 
> 信息：当前会话被 org.apache.catalina.session.StandardSessionFacade@57ac8e 注销用户销毁：3ee7b951888eb8920d07fefceaec...
> 
> 信息：注销
> 
> 信息：当前会话已创建：3f1fd377302220f2f27313c06cdc 于 2012 年 6 月 25 日星期一 16:00:57 CEST 由 org.apache.catalina.session.StandardSessionFacade@912e6a
> 
> 信息：休眠：插入审计（EVENT_TYPE、EVENT_TIMESTAMP、USER_ID）值（？、？、？）

* * *

这是带有调试功能的日志（对不起，列表很长）：

```
26 Jun 2012 12:47:58,703 DEBUG HttpSessionSecurityContextRepository : SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
26 Jun 2012 12:47:58,703 DEBUG SecurityContextPersistenceFilter : SecurityContextHolder now cleared, as request processing completed
26 Jun 2012 12:48:04,078 DEBUG FilterChainProxy : /login.xhtml at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
26 Jun 2012 12:48:04,078 DEBUG HttpSessionSecurityContextRepository : HttpSession returned null object for SPRING_SECURITY_CONTEXT
26 Jun 2012 12:48:04,078 DEBUG HttpSessionSecurityContextRepository : No SecurityContext was available from the HttpSession: org.apache.catalina.session.StandardSessionFacade@10fbf9\. A new one will be created.
26 Jun 2012 12:48:04,078 DEBUG FilterChainProxy : /login.xhtml at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter'
26 Jun 2012 12:48:04,078 DEBUG FilterChainProxy : /login.xhtml at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
26 Jun 2012 12:48:04,078 DEBUG FilterChainProxy : /login.xhtml at position 4 of 10 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
26 Jun 2012 12:48:04,078 DEBUG FilterChainProxy : /login.xhtml at position 5 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
26 Jun 2012 12:48:04,078 DEBUG DefaultSavedRequest : pathInfo: both null (property equals)
26 Jun 2012 12:48:04,078 DEBUG DefaultSavedRequest : queryString: both null (property equals)
26 Jun 2012 12:48:04,078 DEBUG DefaultSavedRequest : requestURI: arg1=/mdmd/; arg2=/mdmd/login.xhtml (property not equals)
26 Jun 2012 12:48:04,093 DEBUG HttpSessionRequestCache : saved request doesn't match
26 Jun 2012 12:48:04,093 DEBUG FilterChainProxy : /login.xhtml at position 6 of 10 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
26 Jun 2012 12:48:04,093 DEBUG FilterChainProxy : /login.xhtml at position 7 of 10 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
26 Jun 2012 12:48:04,093 DEBUG AnonymousAuthenticationFilter : Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@6faba4dc: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffed504: RemoteIpAddress: 127.0.0.1; SessionId: 7f9b291fe5d980eba4639fdcb232; Granted Authorities: ROLE_ANONYMOUS'
26 Jun 2012 12:48:04,093 DEBUG FilterChainProxy : /login.xhtml at position 8 of 10 in additional filter chain; firing Filter: 'SessionManagementFilter'
26 Jun 2012 12:48:04,093 DEBUG FilterChainProxy : /login.xhtml at position 9 of 10 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
26 Jun 2012 12:48:04,093 DEBUG FilterChainProxy : /login.xhtml at position 10 of 10 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
26 Jun 2012 12:48:04,093 DEBUG AntPathRequestMatcher : Checking match of request : '/login.xhtml'; against '/accessdenied*'
26 Jun 2012 12:48:04,093 DEBUG AntPathRequestMatcher : Checking match of request : '/login.xhtml'; against '/login*'
26 Jun 2012 12:48:04,093 DEBUG FilterSecurityInterceptor : Secure object: FilterInvocation: URL: /login.xhtml; Attributes: [IS_AUTHENTICATED_ANONYMOUSLY]
26 Jun 2012 12:48:04,093 DEBUG FilterSecurityInterceptor : Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@6faba4dc: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffed504: RemoteIpAddress: 127.0.0.1; SessionId: 7f9b291fe5d980eba4639fdcb232; Granted Authorities: ROLE_ANONYMOUS
26 Jun 2012 12:48:04,093 DEBUG AffirmativeBased : Voter: org.springframework.security.access.vote.RoleVoter@88fcb2, returned: 0
26 Jun 2012 12:48:04,093 DEBUG AffirmativeBased : Voter: org.springframework.security.access.vote.AuthenticatedVoter@18620f5, returned: 1
26 Jun 2012 12:48:04,093 DEBUG FilterSecurityInterceptor : Authorization successful
26 Jun 2012 12:48:04,093 DEBUG FilterSecurityInterceptor : RunAsManager did not change Authentication object
26 Jun 2012 12:48:04,093 DEBUG FilterChainProxy : /login.xhtml reached end of additional filter chain; proceeding with original chain
26 Jun 2012 12:48:04,281 DEBUG FilterChainProxy : /j_spring_security_check?j_username=admin&j_password=admin at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
26 Jun 2012 12:48:04,281 DEBUG FilterChainProxy : /j_spring_security_check?j_username=admin&j_password=admin at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter'
26 Jun 2012 12:48:04,281 DEBUG FilterChainProxy : /j_spring_security_check?j_username=admin&j_password=admin at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
26 Jun 2012 12:48:04,281 DEBUG UsernamePasswordAuthenticationFilter : Request is to process authentication
26 Jun 2012 12:48:04,296 DEBUG ProviderManager : Authentication attempt using org.springframework.security.authentication.dao.DaoAuthenticationProvider
26 Jun 2012 12:48:04,296 INFO UserDetailsServiceImpl : ** trying to retrieve user
26 Jun 2012 12:48:06,203 INFO UserDetailsServiceImpl : ** user is found
26 Jun 2012 12:48:06,421 WARN LoggerListener : Authentication event AuthenticationSuccessEvent: admin; details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffed504: RemoteIpAddress: 127.0.0.1; SessionId: 7f9b291fe5d980eba4639fdcb232
26 Jun 2012 12:48:06,421 DEBUG SessionFixationProtectionStrategy : Invalidating session with Id '7f9b291fe5d980eba4639fdcb232' and migrating attributes.
26 Jun 2012 12:48:06,468 DEBUG SessionFixationProtectionStrategy : Started new session: 7f9eb44f14616034a4b5169d6ac6
26 Jun 2012 12:48:06,468 DEBUG UsernamePasswordAuthenticationFilter : Authentication success. Updating SecurityContextHolder to contain: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@be0d966d: Principal: org.mycompany.domain.security.UserDetailsImpl@1508a8b; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffed504: RemoteIpAddress: 127.0.0.1; SessionId: 7f9b291fe5d980eba4639fdcb232; Granted Authorities: ROLE_ADMIN
26 Jun 2012 12:48:06,531 WARN LoggerListener : Authentication event InteractiveAuthenticationSuccessEvent: admin; details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffed504: RemoteIpAddress: 127.0.0.1; SessionId: 7f9b291fe5d980eba4639fdcb232
26 Jun 2012 12:48:06,531 DEBUG SavedRequestAwareAuthenticationSuccessHandler : Redirecting to DefaultSavedRequest Url: 'http://localhost:9080/mdmd/'
26 Jun 2012 12:48:06,531 DEBUG DefaultRedirectStrategy : Redirecting to 'http://localhost:9080/mdmd/'
26 Jun 2012 12:48:06,531 DEBUG HttpSessionSecurityContextRepository : SecurityContext stored to HttpSession: 'org.springframework.security.core.context.SecurityContextImpl@be0d966d: Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@be0d966d: Principal: org.mycompany.domain.security.UserDetailsImpl@1508a8b; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffed504: RemoteIpAddress: 127.0.0.1; SessionId: 7f9b291fe5d980eba4639fdcb232; Granted Authorities: ROLE_ADMIN'
26 Jun 2012 12:48:06,562 DEBUG ExceptionTranslationFilter : Chain processed normally
26 Jun 2012 12:48:06,562 DEBUG SecurityContextPersistenceFilter : SecurityContextHolder now cleared, as request processing completed
26 Jun 2012 12:48:06,593 DEBUG FilterChainProxy : /index.jsp at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
26 Jun 2012 12:48:06,609 DEBUG HttpSessionSecurityContextRepository : Obtained a valid SecurityContext from SPRING_SECURITY_CONTEXT: 'org.springframework.security.core.context.SecurityContextImpl@be0d966d: Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@be0d966d: Principal: org.mycompany.domain.security.UserDetailsImpl@1508a8b; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffed504: RemoteIpAddress: 127.0.0.1; SessionId: 7f9b291fe5d980eba4639fdcb232; Granted Authorities: ROLE_ADMIN'
26 Jun 2012 12:48:06,609 DEBUG FilterChainProxy : /index.jsp at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter'
26 Jun 2012 12:48:06,609 DEBUG FilterChainProxy : /index.jsp at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
26 Jun 2012 12:48:06,609 DEBUG FilterChainProxy : /index.jsp at position 4 of 10 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
26 Jun 2012 12:48:06,609 DEBUG FilterChainProxy : /index.jsp at position 5 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
26 Jun 2012 12:48:06,609 DEBUG DefaultSavedRequest : pathInfo: both null (property equals)
26 Jun 2012 12:48:06,609 DEBUG DefaultSavedRequest : queryString: both null (property equals)
26 Jun 2012 12:48:06,609 DEBUG DefaultSavedRequest : requestURI: arg1=/mdmd/; arg2=/mdmd/ (property equals)
26 Jun 2012 12:48:06,609 DEBUG DefaultSavedRequest : serverPort: arg1=9080; arg2=9080 (property equals)
26 Jun 2012 12:48:06,609 DEBUG DefaultSavedRequest : requestURL: arg1=http://localhost:9080/mdmd/; arg2=http://localhost:9080/mdmd/ (property equals)
26 Jun 2012 12:48:06,609 DEBUG DefaultSavedRequest : scheme: arg1=http; arg2=http (property equals)
26 Jun 2012 12:48:06,609 DEBUG DefaultSavedRequest : serverName: arg1=localhost; arg2=localhost (property equals)
26 Jun 2012 12:48:06,609 DEBUG DefaultSavedRequest : contextPath: arg1=/mdmd; arg2=/mdmd (property equals)
26 Jun 2012 12:48:06,609 DEBUG DefaultSavedRequest : servletPath: arg1=/index.jsp; arg2=/index.jsp (property equals)
26 Jun 2012 12:48:06,609 DEBUG HttpSessionRequestCache : Removing DefaultSavedRequest from session if present
26 Jun 2012 12:48:06,609 DEBUG FilterChainProxy : /index.jsp at position 6 of 10 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
26 Jun 2012 12:48:06,609 DEBUG FilterChainProxy : /index.jsp at position 7 of 10 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
26 Jun 2012 12:48:06,609 DEBUG AnonymousAuthenticationFilter : SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.authentication.UsernamePasswordAuthenticationToken@be0d966d: Principal: org.mycompany.domain.security.UserDetailsImpl@1508a8b; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffed504: RemoteIpAddress: 127.0.0.1; SessionId: 7f9b291fe5d980eba4639fdcb232; Granted Authorities: ROLE_ADMIN'
26 Jun 2012 12:48:06,609 DEBUG FilterChainProxy : /index.jsp at position 8 of 10 in additional filter chain; firing Filter: 'SessionManagementFilter'
26 Jun 2012 12:48:06,609 DEBUG FilterChainProxy : /index.jsp at position 9 of 10 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
26 Jun 2012 12:48:06,609 DEBUG FilterChainProxy : /index.jsp at position 10 of 10 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
26 Jun 2012 12:48:06,609 DEBUG AntPathRequestMatcher : Checking match of request : '/index.jsp'; against '/accessdenied*'
26 Jun 2012 12:48:06,625 DEBUG AntPathRequestMatcher : Checking match of request : '/index.jsp'; against '/login*'
26 Jun 2012 12:48:06,625 DEBUG AntPathRequestMatcher : Checking match of request : '/index.jsp'; against '/sessionexpired*'
26 Jun 2012 12:48:06,625 DEBUG AntPathRequestMatcher : Checking match of request : '/index.jsp'; against '/*'
26 Jun 2012 12:48:06,625 DEBUG FilterSecurityInterceptor : Secure object: FilterInvocation: URL: /index.jsp; Attributes: [ROLE_AVIEWER, ROLE_BVIEWER, ROLE_ACREATOR, ROLE_BCREATOR, ROLE_AREGISTER, ROLE_BREGISTER, ROLE_ADMIN]
26 Jun 2012 12:48:06,625 DEBUG FilterSecurityInterceptor : Previously Authenticated: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@be0d966d: Principal: org.mycompany.domain.security.UserDetailsImpl@1508a8b; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffed504: RemoteIpAddress: 127.0.0.1; SessionId: 7f9b291fe5d980eba4639fdcb232; Granted Authorities: ROLE_ADMIN
26 Jun 2012 12:48:06,625 DEBUG AffirmativeBased : Voter: org.springframework.security.access.vote.RoleVoter@88fcb2, returned: 1
26 Jun 2012 12:48:06,625 DEBUG FilterSecurityInterceptor : Authorization successful
26 Jun 2012 12:48:06,625 DEBUG FilterSecurityInterceptor : RunAsManager did not change Authentication object
26 Jun 2012 12:48:06,625 DEBUG FilterChainProxy : /index.jsp reached end of additional filter chain; proceeding with original chain
26 Jun 2012 12:48:11,953 DEBUG FilterChainProxy : /main.xhtml at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
26 Jun 2012 12:48:11,953 DEBUG FilterChainProxy : /main.xhtml at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter'
26 Jun 2012 12:48:11,953 DEBUG FilterChainProxy : /main.xhtml at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
26 Jun 2012 12:48:11,953 DEBUG FilterChainProxy : /main.xhtml at position 4 of 10 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
26 Jun 2012 12:48:11,953 DEBUG FilterChainProxy : /main.xhtml at position 5 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
26 Jun 2012 12:48:11,953 DEBUG FilterChainProxy : /main.xhtml at position 6 of 10 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
26 Jun 2012 12:48:11,953 DEBUG FilterChainProxy : /main.xhtml at position 7 of 10 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
26 Jun 2012 12:48:11,953 DEBUG AnonymousAuthenticationFilter : SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.authentication.UsernamePasswordAuthenticationToken@be0d966d: Principal: org.mycompany.domain.security.UserDetailsImpl@1508a8b; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@fffed504: RemoteIpAddress: 127.0.0.1; SessionId: 7f9b291fe5d980eba4639fdcb232; Granted Authorities: ROLE_ADMIN'
26 Jun 2012 12:48:11,953 DEBUG FilterChainProxy : /main.xhtml at position 8 of 10 in additional filter chain; firing Filter: 'SessionManagementFilter'
26 Jun 2012 12:48:11,953 DEBUG FilterChainProxy : /main.xhtml at position 9 of 10 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
26 Jun 2012 12:48:11,953 DEBUG FilterChainProxy : /main.xhtml at position 10 of 10 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
26 Jun 2012 12:48:11,953 DEBUG FilterChainProxy : /main.xhtml reached end of additional filter chain; proceeding with original chain 
```

# ajax - 控制器必须在 Symfony2 中返回响应

> ID：11190770
> 
> 赞同：13
> 
> 时间：2012-06-25T14:01:01.667
> 
> 标签：ajax, symfony

我的代码中有一个 ajax 调用。我想通过通话实现的效果很好。我想从数据库中删除一些记录，这些记录在通过 ajax 调用该方法时实际上被删除，但是在 symfony 方法中它必须返回一个响应，这就是为什么在执行该方法时它给了我错误

我的 Ajax 调用是

```
 $.ajax({
        type: "POST",
        data: data,
        url:"{{ path('v2_pm_patents_trashpatents') }}",
        cache: false,
        success: function(){
        document.location.reload(true);
        }
    }); 
```

执行的方法是

```
 public function trashpatentAction(Request $request){
    if ($request->isXmlHttpRequest()) {
        $id = $request->get("pid");
        $em = $this->getDoctrine()->getEntityManager();
        $patent_group = $em->getRepository('MunichInnovationGroupPatentBundle:PmPatentgroups')->find($id);
        if($patent_group){
            $patentgroup_id = $patent_group->getId();
            $em = $this->getDoctrine()->getEntityManager();
            $patents = $em->getRepository('MunichInnovationGroupPatentBundle:SvPatents')
            ->findBy(array('patentgroup' => $patentgroup_id));
            if($patents){
                foreach($patents as $patent){
                    if($patent->getIs_deleted()==false){
                        $patent->setIs_deleted(true);
                        $em->flush();
                    }
                }
            }
            $patent_group->setIs_deleted(true);
            $em->flush();
        }
        else{
            $em = $this->getDoctrine()->getEntityManager();
            $patent = $em->getRepository('MunichInnovationGroupPatentBundle:SvPatents')->find($id);
            if ($patent) {
                $patent->setIs_deleted(1);
                $em->flush();
            }
        }
        return true;
    }
} 
```

我怎样才能从这种方法成功返回？有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-25T14:30:58.927

替换`return true;`为`return new Response();`。也不要忘记`use Symfony\Component\HttpFoundation\Response;`在顶部写。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-12T03:12:12.560

您还可以传递错误代码`200`和内容类型，如下所示。

```
return new Response('Its coming from here .', 200, array('Content-Type' => 'text/html')); 
```

这是控制器的完整示例

```
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Response;

class WelcomeController extends Controller
{
    public function indexAction()
    {
        return new Response('Its coming from here .', 200, array('Content-Type' => 'text/html'));
    }
} 
```

# sql - 两个表的连接操作检索日期

> ID：11190776
> 
> 赞同：0
> 
> 时间：2012-06-25T14:01:15.433
> 
> 标签：sql

我的**第一个查询**，从给定的给定中检索`date`和`hours`工作。`work_details``employee number``date`

```
SELECT date,
       SEC_TO_TIME( SUM( TIME_TO_SEC( `total_hours` ) ) ) AS total
FROM `work_details`
WHERE employee_id='28'
  and date between  '2012-02-01'
  and '2012-02-29'
GROUP BY DATE ORDER BY DATE 
```

以及从表中检索的**第二个查询**：`date``holy_date`

```
SELECT holy_date
from holiday
where holy_date between '2012-02-01' and '2012-02-29' 
```

我需要以正确的日期顺序组合两个查询的结果。我尝试了联合操作，但没有得到结果。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:11:54.283

有几种方法可以实现您想要的。

这不是记录在案的方式。但这应该有效。

```
SELECT   date, total
FROM 
         (
          SELECT   date, SEC_TO_TIME( SUM( TIME_TO_SEC( `total_hours` ) ) ) AS total 
          FROM     `work_details` 
          WHERE    employee_id='28' AND date BETWEEN  '2012-02-01' AND '2012-02-29' 
          GROUP BY date 

          UNION ALL

          (  
           SELECT holy_date AS date, NULL AS total 
           FROM   holiday 
           WHERE holy_date BETWEEN '2012-02-01' AND '2012-02-29'
          )
         ) AS t
GROUP BY date
ORDER BY date 
```

# c++ - 3D - 来自方向矢量的旋转矩阵（向前、向上、向右）

> ID：11190786
> 
> 赞同：6
> 
> 时间：2012-06-25T14:01:46.313
> 
> 标签：c++, vector, 3d, matrix, directx

我需要从方向向量（vForward）获取旋转矩阵我也有 vRight 和 vUp 向量。所有这些向量都是单位向量。

我只需要得到旋转矩阵。

为了获得仅在与地面平行的一个平面（xy）中旋转的旋转矩阵，我这样做： XMMATRIX xmResult;

```
Vec3f vFwd = pPlayer->VForward;
vFwd.z = 0;
vFwd.Normalize();

xmResult = XMMatrixSet( vFwd.y,     -vFwd.x,    0,      0,
    vFwd.x,      vFwd.y,    0,      0,
    0,          0,          1,      0,
    0,          0,          0,      1); 
```

上面的代码只得到旋转矩阵绕Z轴旋转：

我想让代码围绕所有轴旋转。这是我被迫使用的坐标系。我知道这很奇怪：

![我正在使用的坐标系](../Images/fea23f31db46b372b2b3627826deab0e.png)

这就是我稍后在代码中使用矩阵的方式：

```
XMStoreFloat3((XMFLOAT3*)&vStart, XMVector3Transform(XMLoadFloat3((XMFLOAT3*)&vStart), xmTransformation));
XMStoreFloat3((XMFLOAT3*)&vEnd, XMVector3Transform(XMLoadFloat3((XMFLOAT3*)&vEnd), xmTransformation)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T14:08:15.880

根据您使用矩阵的方式，Right、Up 和 Forward 应该对应于矩阵的行或列。

```
xmResult = XMMatrixSet( vRight.x, vRight.y, vRight.z, 0, vFwd.x, vFwd.y, vFwd.z, 0, vUp.x, vUp.y, vUp.z, 0, 0, 0, 0, 1); 
```

# sql - 如何使用 Arel 为带有“or”和“and”子句的 SQL 查询正确添加括号？

> ID：11190792
> 
> 赞同：8
> 
> 时间：2012-06-25T14:02:11.823
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3, arel

我正在使用 Ruby on Rails 3.2.2，我想生成以下 SQL 查询：

```
SELECT `articles`.* FROM `articles` WHERE (`articles`.`user_id` = 1 OR `articles`.`status` = 'published' OR (`articles`.`status` = 'temp' AND `articles`.`user_id` IN (10, 11, 12, <...>))) 
```

通过这种方式使用[Arel](https://github.com/rails/arel)

```
Article
 .where(
   arel_table[:user_id].eq(1)
   .or(arel_table[:status].eq("published"))
   .or(
     arel_table[:status].eq("temp")
     .and(
       arel_table[:user_id].in(10, 11, 12, <...>)
     )
  )
) 
```

它生成以下内容（*注意*：括号与第一个 SQL 查询不同）：

```
SELECT `articles`.* FROM `articles` WHERE (((`articles`.`user_id` = 1 OR `articles`.`status` = 'published') OR `articles`.`status` = 'temp' AND `articles`.`user_id` IN (10, 11, 12, <...>))) 
```

由于*我认为*后一个 SQL 查询不像第一个那样“工作”，**我怎么能使用 Arel**（或者，也许是别的东西）**来生成 SQL 查询作为第一个？**

### 更新（评论后）

鉴于上面的 SQL 查询“工作”相同，但我仍然想生成与问题中的第一个完全相同的 SQL 查询（这样做的主要原因是第一个 SQL 查询比第二个更易读，因为在第一个一个使用较少和“显式”括号），我怎样才能通过使用 Arel 来做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-01T16:46:59.213

我有同样的问题。我在网上搜索了几个小时，最后在[Arel::FactoryMethods中找到了一个名为](https://www.rubydoc.info/gems/arel/Arel/FactoryMethods)[grouping](https://www.rubydoc.info/gems/arel/Arel/FactoryMethods#grouping-instance_method)的方法，它只是在表达式周围添加了括号。

你应该用一个电话来包装你的*小组。*`arel_table.grouping(...)`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-15T11:35:07.917

如何`arel_table.grouping(...)`作为范围的一部分使用的示例

```
# app/model/candy.rb
class Candy < ActiveRecord::Base
  has_many :candy_ownerships
  has_many :clients, through: :candy_ownerships, source: :owner, source_type: 'Client'
  has_many :users,   through: :candy_ownerships, source: :owner, source_type: 'User'

  # ....
  scope :for_user_or_global, ->(user) do
    # ->() is new lambda syntax, lamdba{|user| ....}

    worldwide_candies  = where(type: 'WorldwideCandies').where_values.reduce(:and)
    client_candies     = where(type: 'ClientCandies', candy_ownerships: { owner_id: user.client.id, owner_type: 'Client'}).where_values.reduce(:and)
    user_candies       = where(type: 'UserCandies',   candy_ownerships: { owner_id: user.id,        owner_type: 'User'  }).where_values.reduce(:and)

    joins(:candy_ownerships).where( worldwide_candies.or( arel_table.grouping(client_candies) ).or( arel_table.grouping(user_candies) ) )
  end

  # ....
end 
```

称呼

```
Candy.for_user_or_global(User.last)
#=> SELECT `candies`.* FROM `candies` INNER JOIN `candy_ownerships` ON `candy_ownerships`.`candy_id` = `candies`.`id` WHERE (`candies`.`deleted_at` IS NULL) AND (((`candies`.`type` = 'WorldwideCandies' OR (`candies`.`type` = 'ClientCandies' AND `candy_ownerships`.`owner_id` = 19 AND `candy_ownerships`.`owner_type` = 'Client')) OR (`candies`.`type` = 'UserCandies' AND `candy_ownerships`.`owner_id` = 121 AND `candy_ownerships`.`owner_type` = 'User'))) 
```

thx [micha](https://stackoverflow.com/a/15162661/473040)给小费

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:47:03.337

我已经成功地使用了这个宝石：[squeel](https://github.com/ernie/squeel)，它位于 Arel 之上，所以你不必弄乱它。因此，为了生成您的查询，您可以在 Squeel 中执行以下操作：

```
@articles = Article.
  where{
  ( user_id.eq(1) | status.eq('published') ) |
  ( user_id.in([10, 11, 12, '<...>']) & status.eq('temp') )
}

# since this is an ActiveRecord::Relation we can play around with it
@articles = @articles.select{ [ user_id, status ] }

# and you can also inspect your SQL to see what is going to come out
puts @articles.to_sql 
```

您的查询越复杂，您就越喜欢这个宝石。

# wpf - WPF 中是否有类似 FlowDocumentReader 的控件，但可编辑？

> ID：11190796
> 
> 赞同：1
> 
> 时间：2012-06-25T14:02:17.177
> 
> 标签：wpf

WPF 中是否有像 FlowDocumentReader 这样具有搜索功能的控件，但可编辑并具有像 RichTextBox 这样的格式栏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:11:36.113

在 WPF 中，您可以使用带有 FlowDocument 的 RichTextBox。要使用格式和颜色进行编辑，您可以使用类似 [http://www.codeproject.com/Articles/50139/WPF-RichTextEditor-with-Toolbar](http://www.codeproject.com/Articles/50139/WPF-RichTextEditor-with-Toolbar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:06:21.387

有第三方控件，Telerik 有一个我以前用过的特别好的控件：[http](http://www.telerik.com/products/wpf/richtextbox.aspx) ://www.telerik.com/products/wpf/richtextbox.aspx 。

但是 BCL 中没有。

# android - 您如何在一种方法中使用多听众？（安卓）

> ID：11190799
> 
> 赞同：0
> 
> 时间：2012-06-25T14:02:21.643
> 
> 标签：android

我如何将以下内容放在一种方法中。因此，我可以有一个侦听器，而不是两个侦听器，它会检查单击了哪个复选框。谢谢

```
public void onClick(View view) {
    switch (view.getId()) {
    case R.id.safe:
        if (((CheckBox) view).isChecked()) {
            ((CheckBox) view).setButtonDrawable(R.drawable.tick);
        } else {
            ((CheckBox) view).setButtonDrawable(R.drawable.black);
        }
        break;

    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:05:07.703

您可以实施`View.OnClickListener`，然后您可以拥有一种方法。

```
public class NameClass extends Activity implements View.OnClickListener {
   public void onClick(View view) {
      switch(view.getId()) {
         case R.id.someWidget:
            // to do
         break;
         case R.id.anotherWidget:
            // to do
         break;
      }
   }
} 
```

**注意：**还有一个建议，请尝试查看`OnCheckedChangeListener`.

```
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
   switch (buttonView.getId()) {
      case R.id.someButton:
         if (isChecked) {
            // some work
         }
         else {
            // some another work
         }
      break;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:11:19.693

您可以在侦听器中检查 ID：

```
private void setListeners() {
    final View muf = findViewById(R.id.muf);
    final View crewArea = findViewById(R.id.crewArea);

    OnclickListener ocl = new OnClickListener() {
        @OVerride
        public void onClick(View view) {
            Checkbox ck = null;
            switch(view.getId()) {
                case R.id.muf: ck = muf; break;
                case R.id.crewArea: ck = crewArea; break;
            }

            if(ck == null)
                return;

            if (ck.isChecked()) {
                ck.setButtonDrawable(R.drawable.tick);
            } else {
                ck.setButtonDrawable(R.drawable.black);
            }
        }
    };

    muf.setOnClickListener(ocl);
    crewArea.setOnClickListener(ocl);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:04:40.127

在当前类中实现 setOnClickListener ......

和

```
 private void mufListener() {
        muf = (CheckBox) findViewById(R.id.muf);

        muf.setOnClickListener(this);

    }

    private void crewAreaListener() {
        crewArea = (CheckBox) findViewById(R.id.crewArea);
        crewArea.setOnClickListener(this);

    }

public void onClick(View view) {

                switch(view.getID()){

                case R.id.muf:
                case R.id.crewArea:
                if (((CheckBox) view).isChecked()) {
                    ((CheckBox) view).setButtonDrawable(R.drawable.tick);
                } else {
                    ((CheckBox) view).setButtonDrawable(R.drawable.black);
                      }

                break;
             case R.id.tv2:
                    break;

            }
} 
```

# batch-file - 使用 Windows 批处理文件复制文件并删除重复项

> ID：11190801
> 
> 赞同：0
> 
> 时间：2012-06-25T14:02:25.887
> 
> 标签：batch-file, notepad

我正在尝试通过记事本制作批处理文件，以从根本上自动化将文件从驱动器移动到驱动器的过程。

我的目标是将文件从我的 H 驱动器移动到我的 A 驱动器，`H:\Arco\examplefile.csv`到`\A:\DSE\Open_Access_Data\ARCo`.

如果可能的话，我还想自动化这项工作，使其每 30 分钟运行一次。但是，如果我需要通过单击它来完成它，那就这样吧。到目前为止，我所做的只是将文件复制到我的桌面。我似乎无法让它在我的目录之间移动。

```
COPY H:\dehpc14_Disk_Quota_Report.csv %userprofile%\Desktop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:32:10.677

这应该有效：

```
:LOOP
copy H:\Arco\examplefile.csv A:\DSE\Open_Access_Data\ARCo /y
timeout /t 1800
goto :LOOP 
```

这将每 30 秒复制一次文件并覆盖所有现有文件。

*注意：该`timeout`命令仅适用于 Vista 及以上版本，如果您需要在 XP 上使用此命令，请告诉我。*

要在系统启动时启动批处理文件，您可以将其放在用户的启动文件夹中或使用注册表。

当前用户的启动文件夹是

```
C:\Users\%username%\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup 
```

对于所有用户

```
C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Startup 
```

或者您可以使用我个人喜欢的注册表。使用批处理文件的路径创建一个字符串值

当前用户

```
HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run 
```

计算机用户

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run 
```

不过，这两个注册表选项都需要管理员权限。

分别批量启动或注册

```
copy %0 "C:\Users\%username%\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup" /y

reg add HKCU\Software\Microsoft\Windows\CurrentVersion\Run /v "MyBatchFile" /d "%0" /f 
```

它将在每次运行时将自身复制到启动或将自身添加到注册表中。因此，您可以手动执行此操作，也可以在您第一次运行时让它自己执行此操作（上述命令）。

这`%0`是批处理文件自己的路径，如果您想从其他地方使用命令，或者只是从 cmd 输入批处理文件的完整路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:13:00.620

在 Unix 中使用像[cron](http://en.wikipedia.org/wiki/Cron)这样的命令来设置一个定时间隔来运行像你的自动副本这样的程序。请参阅 Stack Overflow 问题*[什么是 Windows 版本的 cron？](https://stackoverflow.com/questions/132971/what-is-the-windows-version-of-cron)*用于 Windows 的类似 cron 的版本。

从一个驱动器复制到另一个用途

```
copy filepath1 filepath2 
```

你在哪里，`filepath1`你在哪里。`H:\path-to-file``filepath2``A:\path-to-file`

# c# - 从库调用的线上抛出异常

> ID：11190803
> 
> 赞同：0
> 
> 时间：2012-06-25T14:02:30.000
> 
> 标签：c#, exception, exception-handling

我正在构建一个库，其中包含很多我经常使用的各种代码的包装器。

我的图书馆代码：

```
public static void Create(string name, string location, List<string> commands)
{
    if (!Directory.Exists(location))
    {
        throw new DirectoryNotFoundException();
    }
    else
    {
        File.WriteAllLines(Path.Combine(location, name), commands);
    }
} 
```

我使用库的示例应用程序

```
AwesomeFunction.Create("Foo", "C:\\DoesntExist\\Bar", new List<string> { "List of stuff" }); 
```

如果找不到给定的目录，它会抛出`throw new DirectoryNotFoundException();`有意义的行，但我需要它抛出`AwesomeFunction.Create`函数。

如果抛出，这将停止切换到库代码，而是突出显示`AwesomeFunction`VS 中的行。

一个可比较的例子是在

```
Directory.Delete("C:\\DoesntExist\\Bar"); 
```

即使`throw`在`Directory`课堂上，它也会突出显示该行。

任何帮助表示赞赏。

**编辑**

如果我将库复制到不同的位置，即 C:\mylibrary，它仍然会打开它的源代码，即使我没有通过项目引用它。

我发现另一个问题是，当我不从我的项目中添加它时，我看不到我对函数的 XML 注释。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:06:59.680

您可以通过使用程序集引用而不是库的项目引用来实现这一点。这样，您将不会在使用项目中获得库的源代码，并且 VS 将在`AwesomeFunction.Create`函数调用时中断。`Directory.Delete`这就是在您提供的调用中引发异常时发生的情况。由于您没有链接此方法的源代码，VS 只是停在这一行上，而不是在引发异常的该方法内的实际行上。显然，在异常堆栈跟踪中，您可以获得完整的方法调用堆栈和异常的来源。

# backbone.js - 如何停止在backbone.js中刷新时覆盖模型

> ID：11190806
> 
> 赞同：0
> 
> 时间：2012-06-25T14:02:43.390
> 
> 标签：backbone.js, underscore.js

我有一组从基本数据开始的用户模型：

```
[
 {'_id': 1, 'username': 'Jamie', 'image': 'jamie.jpg'},
 {'_id': 2, 'username': 'Andrew', 'image': 'andrew.jpg'},
 {'_id': 3, 'username': 'Kerry', 'image': 'kerry.jpg'}
]; 
```

但是当用户单击集合模型视图时，我会将更多数据加载到模型中，这样我就可以创建数据的配置文件视图：

```
{
 '_id'      : 1,
 'username' : 'Jamie',
 'image'    : 'jamie.jpg',
 'age'      : 21,
 'country'  : 'UK'
}; 
```

我已经对其进行了设置，以便在加载完整的配置文件数据时不会再次获取它以保存 GET 请求。

但是，我在主用户​​视图上有一个刷新按钮，所以当我刷新数据时，所有加载的配置文件数据都消失了，我需要发出 GET 请求才能取回信息。

我想知道我将如何解决这个问题。

***更多细节：***

刷新按钮的目的是添加新的在线用户。我想要这个按钮，所以想要查看新数据的用户将使用它而不是刷新整个页面。

擦除加载数据的问题是当用户返回个人资料时（这会发生很多，因为我要添加在每个个人资料上聊天的功能，这需要用户在该用户个人资料上）有一个不必要的GET 请求，因为数据之前已经在用户会话中加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:33:31.003

运行`.fetch({add:true})`会避免覆盖现有模型，但会留下重复的模型。要清除重复模型并将新模型添加到集合中，您需要结合`.fetch({add:true})`自定义`parse()`函数：

```
parse: function(response) {

  var client_ids = _.map(allUsers,function(user){ return user.get('id'); });

  response = _.filter(response,function(user){
    // true if user is not already in collection
    return _.indexOf(client_ids,user.id) < 0; 
  });

  return response;
} 
```

我现在没有任何方法可以测试这个，所以请尝试一下，让我知道它是否有效。

# android - 无法运行或调试 SVN android 项目

> ID：11190808
> 
> 赞同：2
> 
> 时间：2012-06-25T14:02:54.837
> 
> 标签：android, eclipse, svn, subversive, motodev-studio

我在开始对我的项目使用版本控制时遇到了一些初学者问题。我的应用程序已经在运行，我已经安装了颠覆性并执行了以下操作： 1- 将我的项目签出到服务器 - 好的。2- 在另一台电脑上，添加了新的存储库位置 - 好的。

我可以在 SVN Repositories 透视图中看到项目树，其中包含所有文件，但是当我尝试运行它时，模拟器中显示的是项目的本地版本，而不是 SVN 版本。

我试过运行 > 运行配置 > 新启动配置，但 SVN 存储库没有出现在基本设置 > 浏览项目...

在存储库中，我可以看到但不能编辑 .classpath 和 .project 文件。

知道发生了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:12:51.023

您应该将您的项目从 SVN 下载到您 PC 上某处的文件夹中。您需要将该项目添加到 Eclipse 中，或者如果您将其下载到现有项目文件夹中，则需要刷新，然后在 Eclipse 中重建该项目。

# android - ndroid.database.sqlite.SQLiteException：没有这样的列：标题：，编译时：

> ID：11190814
> 
> 赞同：1
> 
> 时间：2012-06-25T14:02:58.030
> 
> 标签：android, sqlite, android-contentprovider, contactscontract

大家好。

我的查询需要帮助。我收到警告，但我不知道出了什么问题。

android.database.sqlite.SQLiteException：没有这样的列：标题：，编译时：SELECT _id，display_name FROM view_data_restricted data WHERE (1) AND (account_name='ricardofilipe19@gmail.com' AND title!=GrupoSocios AND mimetype='vnd .android.cursor.item/group_membership' AND display_name like '%rui%') ORDER BY DISPLAY_NAME

这是我的代码

```
return getContentResolver().query(Data.CONTENT_URI,
     new String[]{ContactsContract.Contacts._ID,   ContactsContract.Contacts.DISPLAY_NAME},ContactsContract.Groups.ACCOUNT_NAME + "='" + accountName + "' AND " + ContactsContract.Groups.TITLE + "!=" + nomeGrupo + " AND " + Data.MIMETYPE + "='" + GroupMembership.CONTENT_ITEM_TYPE + "' AND " + ContactsContract.Contacts.DISPLAY_NAME + " like '%" + filter + "%'" ,
 null,
 "DISPLAY_NAME"); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:14:26.737

尝试在此处放置一个空格并添加一些引号 (`)：

```
ContactsContract.Groups.TITLE + " !='" + nomeGrupo + "' AND " 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:14:26.883

如果将它包含在 SQL 字符串中，则需要引用 'nomeGrupo'。

IE`'" + nomeGrupo + "'`

# qnx - QNX® Momentics IDE for BlackBerry® 10 Native SDK Version: 10.0.4 是否在 Blackberry 10 Native SDK 开发中提供拖放功能？

> ID：11190815
> 
> 赞同：1
> 
> 时间：2012-06-25T14:03:00.420
> 
> 标签：qnx, blackberry-10

我对 BlackBerry Java Development Environment 有很好的体验。我需要了解用于开发 Blackberry 10 的基于 QNX 的 IDE。我成功安装并运行了一个小示例。

但是在这里我没有找到任何拖放 IDE。我希望它包含那种类型的编辑器，但不幸的是我找不到这个功能。我正在使用以下 IDE：

适用于 BlackBerry® 10 Native SDK 的 QNX® Momentics IDE

版本：10.0.4

此外，IDE 并未显示所有提示。如何获得提示？

是否需要手动包含头文件？

请帮助我在这个IDE中哪里可以找到这个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T21:47:05.260

只是为了让您知道，Momentics（版本 10.0.9）现在提供拖放功能。您可以将 UI 组件拖到代码窗口中，它会自动为您填充代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:46:18.877

嗨，我从黑莓顾问那里得到了以下答复

[http://supportforums.blackberry.com/t5/Cascades-Development/Visual-Drag-and-Drop-Editor-for-Cascades/mp/1759935#M300](http://supportforums.blackberry.com/t5/Cascades-Development/Visual-Drag-and-Drop-Editor-for-Cascades/m-p/1759935#M300)

这目前不可用。有关信息和更新，请参阅 BB NDK 文档：

[https://developer.blackberry.com/native/](https://developer.blackberry.com/native/)

[https://developer.blackberry.com/cascades/](https://developer.blackberry.com/cascades/)

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T05:59:25.307

如果你的 qml 文件有错误，它会显示在右上角，这样你就可以知道 qml 有问题。用于添加头文件并且它没有给出任何提示，如 eclips android 和 eclipse bb 是给用户的。您必须手动查找缺少哪个头文件并添加它。

# iphone - 添加操作以终止应用程序事件

> ID：11190817
> 
> 赞同：0
> 
> 时间：2012-06-25T14:03:04.960
> 
> 标签：iphone, objective-c

你能告诉我是否有可能添加自己的函数来终止应用程序事件。当用户单击手机上的按钮时，我想始终向日志发送一些信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:08:40.200

您可以调用自己的方法`- (void)applicationDidEnterBackground:(UIApplication *)application`

查看开发人员文档以获取详细信息 - [http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)

文档中没有提到的一点 -

“你对这个方法的实现有大约五秒钟的时间来执行任何任务并返回。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:08:09.757

请参阅类描述`applicationDidEnterBackground:`中的文档。`UIApplicationDelegate`（从 iOS 4 开始，按下按钮时的默认行为不是终止……尽管您的应用程序可能会选择不同的方式。）

# svn - 您可以修改 VisualSVN 以使其呈现 HTML 文件吗？

> ID：11190824
> 
> 赞同：2
> 
> 时间：2012-06-25T14:03:41.213
> 
> 标签：svn, mime-types, visualsvn, visualsvn-server

我们在工作中使用 SVN，并且有一个 VisualSVN 服务器，每个人都可以使用它来查看存储库的结构。但是当你查看一个文件时，它只是将它显示为文本，我想这很好，但我们想要更改它，以便它实际呈现 HTML 或显示图像。这可以以某种方式完成吗？一个疯狂的问题是与 MIME 类型或文件的某些内容有关吗？

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T09:06:43.423

你当然可以！

您可以在 HTML 文件上应用*svn:mime-type*属性*text/html*，网络浏览器会将其呈现为 HTML。这同样适用于其他文件类型，例如*.jpg 图像的*image/jpeg*。

请参阅[http://www.visualsvn.com/support/svnbook/ref/properties/](http://www.visualsvn.com/support/svnbook/ref/properties/)和[http://www.visualsvn.com/support/svnbook/advanced/props/file-portability/#svn.advanced.props.special .mime 类型](http://www.visualsvn.com/support/svnbook/advanced/props/file-portability/#svn.advanced.props.special.mime-type)

# javascript - Chrome 和 Firefox 的验证失败

> ID：11190826
> 
> 赞同：-2
> 
> 时间：2012-06-25T14:03:42.813
> 
> 标签：javascript, dom

```
<!Doctype html>
<html>
<head>
<script type="text/javascript">
//script 1 - making array
var tableDom = document.getElementsByTagName('table')[0];
var tr = tableDom.getElementsByTagName('tr');
var table = new Array(new Array(9), new Array(9), new Array(9)) ;
for (i=0; i < 3; i++){
    for (j=0; j<3; j++){
    var table[i][j] = tr[i].getElementsByTagName('td')[j];
    }
}
function be(){
alert(table[0][0].innerHTML);//test
}
</script>
</head>
<body onload="be();">
    <table border cellspacing="1px;" width="100%">
        <tr>
            <td>x
            <td>A
            <td>B
        </tr>
        <tr>
            <td>1
            <td><input/>
            <td><input/>
        </tr>
        <tr>
            <td>1
            <td><input/>
            <td><input/>
        </tr>
    </table>
</body>
</html> 
```

在 Chrome 下 7 行是

> 未捕获的类型错误：无法调用未定义的方法“getElementsByTagName”。在第 15 行“未捕获的类型错误：无法读取未定义的属性 '0'。

在 Firefox 中：

> tableDom 未定义
> 
> var tr = tableDom.getElementsByTagName('tr');
> 
> 表未定义
> 
> 警报（表[0][0].innerHTML）；

请帮帮我！我现在不知道有什么问题。我要从 JS 控制表的值，并且我正在循环定义数组，我意识到：

> var table[i][j] = tr[i].getElementsByTagName('td')[j];

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:26:34.970

你想做什么 ？

获取所有内容`<TR> <TD>`？？或[填充表/行](https://stackoverflow.com/questions/9019241/javascript-how-can-i-populate-table-rows-with-the-values-in-an-array)？或[循环遍历表格、收集表格元素和/或条纹行](http://www.webcredible.co.uk/user-friendly-resources/dom-scripting/striped-tables.shtml) ？

**更多信息。真的需要回答你的问题。**

# jquery - IE 中禁用的输入字段上的占位符文本

> ID：11190831
> 
> 赞同：1
> 
> 时间：2012-06-25T14:03:58.890
> 
> 标签：jquery, internet-explorer, input, placeholder

是否有任何 jQuery 插件或其他方法可以将占位符文本添加到 IE 中的*禁用*输入字段？

特别是，我尝试了[Replaceholder](http://designindevelopment.com/plugins/replaceholder-jquery-plugin/)和[Sparkle](http://balupton.github.com/jquery-sparkle/demo/)（其中包括一个占位符 polyfill）。对于任何一种，通过脚本禁用输入字段会导致其占位符文本消失。

我可以尝试一起破解一些东西，但是有没有开箱即用的脚本或插件支持这个？

# c# - asp.net 加载栏

> ID：11190832
> 
> 赞同：2
> 
> 时间：2012-06-25T14:04:00.043
> 
> 标签：c#, asp.net, progress-bar

我的 Page_load 方法中有代码，可能需要几秒钟来取回数据并将其存储到表中。

如何在所有数据准备好之前显示百分比（或只是通用）加载条，而不是在数据准备好之前只使用空表？

是否有专用于进度条的asp控件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T14:06:32.400

简短的回答是：*你不能*。一种可能是分解在 中执行的任务，`Page_Load`使用 Ajax 同步调用它们，同时更新客户端的进度条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:14:34.617

如果您只是想显示数据，您可以在 dom ready If 事件上对服务器使用 ajax 调用并显示它

```
<div id="myTableDate"> </div>
<script type="text/javascript">

$(function(){
   //Whatever inside this block will be executed once DOM finishes loading
   $("#myTableDate") .html("Loading data....").fadeIn(100,function(){
      $("#myTableDate").load("getdata.aspx");
   });    
});

</script> 
```

您应该有一个 getdata.aspx 页面，该页面返回您希望显示的 HTML 标记。

您也可以使用`ashx`处理程序来获取 HTML 标记数据。（这是我的偏好）

此解决方案需要[`jQuery`](http://jquery.com/)将库包含在您的页面中。

# python - Python中的正则表达式出乎意料地慢

> ID：11190835
> 
> 赞同：30
> 
> 时间：2012-06-25T14:04:14.087
> 
> 标签：python, regex, python-3.x

考虑这个 Python 代码：

```
import timeit
import re

def one():
        any(s in mystring for s in ('foo', 'bar', 'hello'))

r = re.compile('(foo|bar|hello)')
def two():
        r.search(mystring)

mystring="hello"*1000
print([timeit.timeit(k, number=10000) for k in (one, two)])
mystring="goodbye"*1000
print([timeit.timeit(k, number=10000) for k in (one, two)]) 
```

基本上，我正在对两种方法进行基准测试来检查大字符串中是否存在多个子字符串之一。

我在这里得到的（Python 3.2.3）是这个输出：

```
[0.36678314208984375, 0.03450202941894531]
[0.6672089099884033, 3.7519450187683105] 
```

在第一种情况下，正则表达式很容易击败`any`表达式 - 正则表达式立即找到子字符串，而在找到`any`正确的子字符串之前必须检查整个字符串几次。

但是在第二个例子中发生了什么？在子字符串不存在的情况下，正则表达式的速度非常慢！这让我感到惊讶，因为理论上正则表达式只需要遍历字符串一次，而`any`表达式必须遍历字符串 3 次。这里有什么问题？我的正则表达式有问题，还是在这种情况下 Python 正则表达式很慢？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-25T15:31:54.057

## 给未来的读者的注意事项

我认为正确的答案实际上是 Python 的字符串处理算法*确实*针对这种情况进行了优化，并且`re`模块实际上要慢一些。我在下面写的是真的，但可能与我在问题中的简单正则表达式无关。

## 原始答案

显然这不是偶然的侥幸——Python 的`re`模块确实比较慢。看起来它在找不到匹配项时使用递归回溯方法，而不是构建 DFA 并对其进行模拟。

即使正则表达式中没有反向引用，它也使用回溯方法！

这意味着在最坏的情况下，Python 正则表达式需要指数而非线性时间！

这是描述该问题的非常详细的论文：http: [//swtch.com/~rsc/regexp/regexp1.html](http://swtch.com/~rsc/regexp/regexp1.html)

我认为这张接近结尾的图表简洁地总结了它： ![各种正则表达式实现的性能图，时间与字符串长度](../Images/162306923e7af3a577183013a7e29d69.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-07T17:11:38.103

我的同事找到了 re2 库 ( [https://code.google.com/p/re2/](https://code.google.com/p/re2/) )？有一个 python 包装器。在某些系统上安装有点麻烦。

对于一些复杂的正则表达式和长字符串，我遇到了同样的问题——re2 显着加快了处理时间——从几秒到几毫秒。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T14:17:00.997

正则表达式如此缓慢的原因是因为它不仅必须遍历整个字符串，而且还必须对每个字符进行多次计算。

第一个只是这样做：

```
Does f match h? No.
Does b match h? No.
Does h match h? Yes.
Does e match e? Yes.
Does l match l? Yes.
Does l match l? Yes.
Does o match o? Yes.
Done. Match found. 
```

第二个这样做：

```
Does f match g? No.
Does b match g? No.
Does h match g? No.
Does f match o? No.
Does b match o? No.
Does h match o? No.
Does f match o? No.
Does b match o? No.
Does h match o? No.
Does f match d? No.
Does b match d? No.
Does h match d? No.
Does f match b? No.
Does b match b? Yes.
Does a match y? No.
Does h match b? No.
Does f match y? No.
Does b match y? No.
Does h match y? No.
Does f match e? No.
Does b match e? No.
Does h match e? No.
... 999 more times ...
Done. No match found. 
```

我只能推测 the`any`和 regex 之间的区别，但我猜 regex 速度较慢主要是因为它在高度复杂的引擎中运行，并且使用状态机的东西和所有东西，它只是不如特定实现那么有效( `in`)。

在第一个字符串中，正则表达式几乎会立即找到匹配项，而`any`在找到任何内容之前必须遍历该字符串两次。

然而，在第二个字符串中，`any`执行与正则表达式基本相同的步骤，但顺序不同。这似乎表明`any`解决方案更快，可能是因为它更简单。

**特定代码比通用代码更有效。任何关于问题的知识都可以用于优化解决方案。简单代码优于复杂代码。**本质上，当模式接近字符串的开头时，正则表达式更快，但是`in`当模式接近字符串的结尾时，正则表达式更快，或者根本找不到。

免责声明：我不知道 Python。我知道算法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T14:22:39.110

您有一个由三个正则表达式组成的正则表达式。如果正则表达式不检查这三遍，您认为这究竟是如何工作的？:-) 计算没有魔法，你仍然需要做三项检查。

但是正则表达式将逐个字符地执行每三个测试，而“one()”方法将检查整个字符串是否有一个匹配项，然后再进行下一个匹配项。

在第一种情况下，正则表达式要快得多，因为您检查最后匹配的字符串。这意味着`one()`需要首先查看整个字符串以查找“foo”，然后查找“bar”，然后查找匹配的“hello”。首先移动“hello”，并且 one() 和 two() 的速度几乎相同，因为在这两种情况下完成的第一个匹配都成功了。

正则表达式比“in”要复杂得多，所以我希望它会更慢。我怀疑当您使用“|”时这种复杂性会增加很多，但是我还没有阅读 regexp 库的源代码，所以我知道什么。:-)

# c# - 实例化新的 Excel 进程时出错

> ID：11190836
> 
> 赞同：1
> 
> 时间：2012-06-25T14:04:16.993
> 
> 标签：c#, .net, excel, automation, com+

这个问题与我之前的问题[有关 Excel 进程的最大数量？](https://stackoverflow.com/questions/11158971/maximum-number-of-excel-processes/11159413#11159413)，但行为不同。

简而言之：有一个 COM+ 组件在启动时会打开许多​​ Excel 进程。句柄被添加到列表中，因此它们不会超出范围或被垃圾收集。

如果我在本地运行此组件（Windows 7 64 位，12 Gb 内存），它可以正常启动，并且可以毫无问题地打开 30 个 excel 进程。

如果我在（虚拟）服务器（windows server 2003 R2 SP2 64 位，4 Gb）上运行此组件，则前 21 个 excel 进程正确启动，但未创建其余 9 个进程；在事件日志中，我看到 9 次以下错误：

```
 Retrieving the COM class factory for component with CLSID {00024500-0000-0000-C000-000000000046} failed due to the following error: 80080005. 
```

所以创建最后 9 个 excel 进程会导致异常，它似乎达到了 21 个 excel 进程的限制。

如果我在另一台服务器（Windows Server 2003 SP 2、1 Gb RAM）上尝试它，它会创建 22 个 excel 进程和 8 个因相同异常而失败的进程。

我想知道是什么导致这些服务器上的 excel 进程创建失败？

编辑：如果我使用开始菜单手动打开它们，我可以毫无问题地打开 30 个 excel 实例。

有任何想法吗？

谢谢， L

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:07:32.987

从技术上讲，您正在做的事情根本不受支持：http: [//support.microsoft.com/kb/257757](http://support.microsoft.com/kb/257757)

> Microsoft 目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET、DCOM 和 NT 服务）的 Microsoft Office 应用程序自动化，因为 Office 可能表现出不稳定的行为和/或在此环境中运行 Office 时出现死锁。

也就是说，由于服务器之间的轻微不一致，我相信您遇到了某种资源冲突/限制，而不是特定于 excel 的东西。由于服务器上的内存量有限，它可能只是内存不足或碎片化。

# doxygen - Doxygen: \code 标签杀死缩进

> ID：11190838
> 
> 赞同：12
> 
> 时间：2012-06-25T14:04:20.077
> 
> 标签：doxygen

在 doxygen 我写：

```
/*! Sample:

\code{.cpp}
void main(int argc, char** argv)
{
    if (argc < 2)
    {
        cout << "no way!" << endl;
    }
    else
    {
        foobar(argv[1]);
    }
}
\endcode
*/ 
```

现在 doxygen 将为我的文档生成一个完美的语法高亮代码示例，但不幸的是它也取消了缩进：

样本：

```
void main(int argc, char** argv)
{
if (argc < 2)
{
cout << "no way!" << endl;
}
else
{
foobar(argv[1]);
}
} 
```

我能做些什么来让 doxygen 尊重我的缩进。我知道有 \verbatim，但它没有突出显示语法。

* * *

编辑：这是 doxygen 配置，也许那里有问题：

```
#---------------------------------------------------------------------------
# Project related configuration options
#---------------------------------------------------------------------------
DOXYFILE_ENCODING      = UTF-8
PROJECT_NAME           = demo
PROJECT_NUMBER         = 
PROJECT_BRIEF          = 
PROJECT_LOGO           = 
OUTPUT_DIRECTORY       = ../../../../../Desktop/dox
CREATE_SUBDIRS         = NO
OUTPUT_LANGUAGE        = English
BRIEF_MEMBER_DESC      = YES
REPEAT_BRIEF           = YES
ABBREVIATE_BRIEF       = "The $name class" \
                         "The $name widget" \
                         "The $name file" \
                         is \
                         provides \
                         specifies \
                         contains \
                         represents \
                         a \
                         an \
                         the
ALWAYS_DETAILED_SEC    = NO
INLINE_INHERITED_MEMB  = NO
FULL_PATH_NAMES        = NO
STRIP_FROM_PATH        = 
STRIP_FROM_INC_PATH    = 
SHORT_NAMES            = NO
JAVADOC_AUTOBRIEF      = YES
QT_AUTOBRIEF           = NO
MULTILINE_CPP_IS_BRIEF = YES
INHERIT_DOCS           = YES
SEPARATE_MEMBER_PAGES  = NO
TAB_SIZE               = 8
ALIASES                = 
TCL_SUBST              = 
OPTIMIZE_OUTPUT_FOR_C  = NO
OPTIMIZE_OUTPUT_JAVA   = NO
OPTIMIZE_FOR_FORTRAN   = NO
OPTIMIZE_OUTPUT_VHDL   = NO
EXTENSION_MAPPING      = 
MARKDOWN_SUPPORT       = YES
BUILTIN_STL_SUPPORT    = NO
CPP_CLI_SUPPORT        = NO
SIP_SUPPORT            = NO
IDL_PROPERTY_SUPPORT   = YES
DISTRIBUTE_GROUP_DOC   = NO
SUBGROUPING            = YES
INLINE_GROUPED_CLASSES = NO
INLINE_SIMPLE_STRUCTS  = NO
TYPEDEF_HIDES_STRUCT   = NO
SYMBOL_CACHE_SIZE      = 0
LOOKUP_CACHE_SIZE      = 0

#---------------------------------------------------------------------------
# Build related configuration options
#---------------------------------------------------------------------------
EXTRACT_ALL            = YES
EXTRACT_PRIVATE        = YES
EXTRACT_PACKAGE        = NO
EXTRACT_STATIC         = YES
EXTRACT_LOCAL_CLASSES  = YES
EXTRACT_LOCAL_METHODS  = YES
EXTRACT_ANON_NSPACES   = YES
HIDE_UNDOC_MEMBERS     = NO
HIDE_UNDOC_CLASSES     = NO
HIDE_FRIEND_COMPOUNDS  = NO
HIDE_IN_BODY_DOCS      = NO
INTERNAL_DOCS          = NO
CASE_SENSE_NAMES       = NO
HIDE_SCOPE_NAMES       = NO
SHOW_INCLUDE_FILES     = YES
FORCE_LOCAL_INCLUDES   = NO
INLINE_INFO            = YES
SORT_MEMBER_DOCS       = YES
SORT_BRIEF_DOCS        = NO
SORT_MEMBERS_CTORS_1ST = NO
SORT_GROUP_NAMES       = NO
SORT_BY_SCOPE_NAME     = NO
STRICT_PROTO_MATCHING  = NO
GENERATE_TODOLIST      = YES
GENERATE_TESTLIST      = YES
GENERATE_BUGLIST       = YES
GENERATE_DEPRECATEDLIST= YES
ENABLED_SECTIONS       = 
MAX_INITIALIZER_LINES  = 30
SHOW_USED_FILES        = YES
SHOW_FILES             = YES
SHOW_NAMESPACES        = YES
FILE_VERSION_FILTER    = 
LAYOUT_FILE            = 
CITE_BIB_FILES         = 

#---------------------------------------------------------------------------
# configuration options related to warning and progress messages
#---------------------------------------------------------------------------
QUIET                  = NO
WARNINGS               = NO
WARN_IF_UNDOCUMENTED   = NO
WARN_IF_DOC_ERROR      = YES
WARN_NO_PARAMDOC       = NO
WARN_FORMAT            = "$file:$line: $text"
WARN_LOGFILE           = C:\Users\foobar\Desktop\dox\demo.log

#---------------------------------------------------------------------------
# configuration options related to the input files
#---------------------------------------------------------------------------
INPUT                  = ../demo/src/export
INPUT_ENCODING         = UTF-8
FILE_PATTERNS          = *.c \
                         *.cc \
                         *.cxx \
                         *.cpp \
                         *.c++ \
                         *.d \
                         *.java \
                         *.ii \
                         *.ixx \
                         *.ipp \
                         *.i++ \
                         *.inl \
                         *.h \
                         *.hh \
                         *.hxx \
                         *.hpp \
                         *.h++ \
                         *.idl \
                         *.odl \
                         *.cs \
                         *.php \
                         *.php3 \
                         *.inc \
                         *.m \
                         *.mm \
                         *.dox \
                         *.py \
                         *.f90 \
                         *.f \
                         *.vhd \
                         *.vhdl
RECURSIVE              = YES
EXCLUDE                = 
EXCLUDE_SYMLINKS       = NO
EXCLUDE_PATTERNS       = 
EXCLUDE_SYMBOLS        = 
EXAMPLE_PATH           = 
EXAMPLE_PATTERNS       = *
EXAMPLE_RECURSIVE      = NO
IMAGE_PATH             = 
INPUT_FILTER           = 
FILTER_PATTERNS        = 
FILTER_SOURCE_FILES    = NO
FILTER_SOURCE_PATTERNS = 

#---------------------------------------------------------------------------
# configuration options related to source browsing
#---------------------------------------------------------------------------
SOURCE_BROWSER         = YES
INLINE_SOURCES         = NO
STRIP_CODE_COMMENTS    = YES
REFERENCED_BY_RELATION = YES
REFERENCES_RELATION    = YES
REFERENCES_LINK_SOURCE = YES
USE_HTAGS              = NO
VERBATIM_HEADERS       = YES

#---------------------------------------------------------------------------
# configuration options related to the alphabetical class index
#---------------------------------------------------------------------------
ALPHABETICAL_INDEX     = YES
COLS_IN_ALPHA_INDEX    = 5
IGNORE_PREFIX          = 

#---------------------------------------------------------------------------
# configuration options related to the HTML output
#---------------------------------------------------------------------------
GENERATE_HTML          = YES
HTML_OUTPUT            = html
HTML_FILE_EXTENSION    = .html
HTML_HEADER            = header.html
HTML_FOOTER            = 
HTML_STYLESHEET        = 
HTML_EXTRA_FILES       = 
HTML_COLORSTYLE_HUE    = 220
HTML_COLORSTYLE_SAT    = 100
HTML_COLORSTYLE_GAMMA  = 80
HTML_TIMESTAMP         = NO
HTML_DYNAMIC_SECTIONS  = NO
HTML_INDEX_NUM_ENTRIES = 100
GENERATE_DOCSET        = NO
DOCSET_FEEDNAME        = "Doxygen generated docs"
DOCSET_BUNDLE_ID       = org.doxygen.Project
DOCSET_PUBLISHER_ID    = org.doxygen.Publisher
DOCSET_PUBLISHER_NAME  = Publisher
GENERATE_HTMLHELP      = NO
CHM_FILE               = 
HHC_LOCATION           = 
GENERATE_CHI           = NO
CHM_INDEX_ENCODING     = 
BINARY_TOC             = NO
TOC_EXPAND             = NO
GENERATE_QHP           = NO
QCH_FILE               = 
QHP_NAMESPACE          = org.doxygen.Project
QHP_VIRTUAL_FOLDER     = doc
QHP_CUST_FILTER_NAME   = 
QHP_CUST_FILTER_ATTRS  = 
QHP_SECT_FILTER_ATTRS  = 
QHG_LOCATION           = 
GENERATE_ECLIPSEHELP   = NO
ECLIPSE_DOC_ID         = org.doxygen.Project
DISABLE_INDEX          = NO
GENERATE_TREEVIEW      = YES
ENUM_VALUES_PER_LINE   = 4
TREEVIEW_WIDTH         = 250
EXT_LINKS_IN_WINDOW    = NO
FORMULA_FONTSIZE       = 10
FORMULA_TRANSPARENT    = YES
USE_MATHJAX            = NO
MATHJAX_RELPATH        = http://www.mathjax.org/mathjax
MATHJAX_EXTENSIONS     = 
SEARCHENGINE           = NO
SERVER_BASED_SEARCH    = NO

#---------------------------------------------------------------------------
# configuration options related to the LaTeX output
#---------------------------------------------------------------------------
GENERATE_LATEX         = NO
LATEX_OUTPUT           = latex
LATEX_CMD_NAME         = latex
MAKEINDEX_CMD_NAME     = makeindex
COMPACT_LATEX          = NO
PAPER_TYPE             = a4wide
EXTRA_PACKAGES         = 
LATEX_HEADER           = 
LATEX_FOOTER           = 
PDF_HYPERLINKS         = YES
USE_PDFLATEX           = YES
LATEX_BATCHMODE        = NO
LATEX_HIDE_INDICES     = NO
LATEX_SOURCE_CODE      = NO
LATEX_BIB_STYLE        = plain

#---------------------------------------------------------------------------
# configuration options related to the RTF output
#---------------------------------------------------------------------------
GENERATE_RTF           = NO
RTF_OUTPUT             = rtf
COMPACT_RTF            = NO
RTF_HYPERLINKS         = NO
RTF_STYLESHEET_FILE    = 
RTF_EXTENSIONS_FILE    = 

#---------------------------------------------------------------------------
# configuration options related to the man page output
#---------------------------------------------------------------------------
GENERATE_MAN           = NO
MAN_OUTPUT             = man
MAN_EXTENSION          = .3
MAN_LINKS              = NO

#---------------------------------------------------------------------------
# configuration options related to the XML output
#---------------------------------------------------------------------------
GENERATE_XML           = NO
XML_OUTPUT             = xml
XML_SCHEMA             = 
XML_DTD                = 
XML_PROGRAMLISTING     = YES

#---------------------------------------------------------------------------
# configuration options for the AutoGen Definitions output
#---------------------------------------------------------------------------
GENERATE_AUTOGEN_DEF   = NO

#---------------------------------------------------------------------------
# configuration options related to the Perl module output
#---------------------------------------------------------------------------
GENERATE_PERLMOD       = NO
PERLMOD_LATEX          = NO
PERLMOD_PRETTY         = YES
PERLMOD_MAKEVAR_PREFIX = 

#---------------------------------------------------------------------------
# Configuration options related to the preprocessor
#---------------------------------------------------------------------------
ENABLE_PREPROCESSING   = YES
MACRO_EXPANSION        = NO
EXPAND_ONLY_PREDEF     = NO
SEARCH_INCLUDES        = YES
INCLUDE_PATH           = 
INCLUDE_FILE_PATTERNS  = 
PREDEFINED             = 
EXPAND_AS_DEFINED      = 
SKIP_FUNCTION_MACROS   = YES

#---------------------------------------------------------------------------
# Configuration::additions related to external references
#---------------------------------------------------------------------------
TAGFILES               = 
GENERATE_TAGFILE       = 
ALLEXTERNALS           = NO
EXTERNAL_GROUPS        = YES
PERL_PATH              = /usr/bin/perl

#---------------------------------------------------------------------------
# Configuration options related to the dot tool
#---------------------------------------------------------------------------
CLASS_DIAGRAMS         = NO
MSCGEN_PATH            = 
HIDE_UNDOC_RELATIONS   = NO
HAVE_DOT               = NO
DOT_NUM_THREADS        = 0
DOT_FONTNAME           = FreeSans
DOT_FONTSIZE           = 10
DOT_FONTPATH           = 
CLASS_GRAPH            = YES
COLLABORATION_GRAPH    = YES
GROUP_GRAPHS           = YES
UML_LOOK               = NO
UML_LIMIT_NUM_FIELDS   = 10
TEMPLATE_RELATIONS     = NO
INCLUDE_GRAPH          = YES
INCLUDED_BY_GRAPH      = YES
CALL_GRAPH             = YES
CALLER_GRAPH           = NO
GRAPHICAL_HIERARCHY    = YES
DIRECTORY_GRAPH        = YES
DOT_IMAGE_FORMAT       = png
INTERACTIVE_SVG        = NO
DOT_PATH               = \\somewhere\over\the\rainbow
DOTFILE_DIRS           = 
MSCFILE_DIRS           = 
DOT_GRAPH_MAX_NODES    = 50
MAX_DOT_GRAPH_DEPTH    = 1000
DOT_TRANSPARENT        = YES
DOT_MULTI_TARGETS      = NO
GENERATE_LEGEND        = YES

DOT_CLEANUP            = YES 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T15:08:09.220

如果您使用的是 Doxygen 1.8.1.1 或更早版本，则会尊重缩进。Doxygen 版本 1.8.1.2 删除了 @code 行共享的前导缩进。检查[2012 年 7 月 12 日发布的更改日志。](http://www.doxygen.nl/manual/changelog.html#1.8.1.2)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-04T22:02:58.503

我遇到了同样的问题，结果是由于使用了自定义`HTML_STYLESHEET`：我们的 CSS 文件定义了自己的样式，`div.fragment`Doxygen 使用它来包装不包含`white-space: pre`. 添加它解决了这个问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T15:10:23.687

将您的 doxygen html (.css) 样式表更新到最新版本。这解决了我的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T14:15:29.217

使用 doxygen 1.8.1 我得到一个语法突出显示的代码块，其中的缩进与问题中的示例一致。您使用的是哪个版本的 doxygen？也许这只是升级你的 doxygen 版本的一个例子。如果这不是解决方案，您将不得不提供更多上下文，即您在源代码中提供的示例文档是 .txt 还是 .markdown 文件？

我确实必须将您的开场评论字符从 更改`\`为`/`，我想这只是一个错字。此外，如果您的文件包含 C++ 源代码，则`{.cpp}`可以省略`\code{.cpp}`（即`\code`本身就可以）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-20T18:55:09.337

在另一台（显着较旧的）计算机上使用相同的 Doxygen 1.8.11 记录相同的代码时，我遇到了这个问题。所有生成的输出都被重新创建，包括 CSS。

缩进在 HTML 源代码中是可见的，但系统默认浏览器拒绝正确显示它，相应的 CHM 文件也有类似的行为（这并不奇怪，因为 Microsoft 的 CHM 查看器使用相同的浏览器）。

好吧，浏览器显然太旧了。即使是相当老的 Firefox 14，也显示生成的带有缩进的 HTML。

# php - PHP 不插入 mysql

> ID：11190839
> 
> 赞同：-3
> 
> 时间：2012-06-25T14:04:21.170
> 
> 标签：php, mysql

我正在尝试插入 mysql 但它给了我一个错误，这里是我的代码：

```
$result = mysql_query("INSERT INTO property( Pname, P_Price,P_Desc,P_City, P_Size,P_Rooms, P_garage, P_Address, P_Long, P_Lat, P_Sold, Provinces_idProvinces)
    VALUES('http://10.0.2.2/images/pic3.jpg',98000,'beautifull house','Durban','7m',1,2,'L-377 Umlazi','30.863226','-29.971518',0,'1'");

 if ($result) {
        // successfully inserted into database
        $response["success"] = 1;
        $response["message"] = $result ;

        // echoing JSON response
        echo json_encode($response);
    } else {
        // failed to insert row
        $response["success"] = 0;
        $response["message"] = "Oops! An error occurred.";

        echo $response["success"];

        // echoing JSON response
        echo json_encode($response);
    }

 mysql_close(); 
```

它返回消息**“糟糕！发生错误**”我不明白它是如何发生的

和我的mysql

```
CREATE TABLE property (
  idProperty int(11) NOT NULL AUTO_INCREMENT,
  Pname varchar(45) DEFAULT NULL,
  P_Price double DEFAULT NULL,
  P_Desc varchar(45) DEFAULT NULL,
  P_City varchar(45) DEFAULT NULL,
  P_Siz varchar(45) DEFAULT NULL,
  P_Rooms varchar(45) DEFAULT NULL,
  P_garage int(11) DEFAULT NULL,
  P_Address varchar(45) DEFAULT NULL,
  P_Long float (10,6) DEFAULT NULL,
  P_Lat float (10,6) DEFAULT NULL,
  P_Sold tinyint(1) DEFAULT '0',
  Provinces_idProvinces int(11) NOT NULL,
  PRIMARY KEY (idProperty),
  KEY fk_Property_Provinces (Provinces_idProvinces),
  CONSTRAINT fk_Property_Provinces FOREIGN KEY (Provinces_idProvinces) REFERENCES provinces (idProvinces) ON DELETE NO ACTION ON UPDATE NO ACTION
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:14:39.213

我认为您没有用括号结束 Values 。

```
$result = mysql_query(
"INSERT INTO property( Pname, P_Price,P_Desc,P_City, P_Size,P_Rooms, P_garage, P_Address, P_Long, P_Lat, P_Sold, Provinces_idProvinces)
VALUES('http://10.0.2.2/images/pic3.jpg',98000,'beautifull house','Durban','7m',1,2,'L-377 Umlazi','30.863226','-29.971518',0,'1')"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:07:36.930

你有 Provinces_idProvinces 作为 '1' 这是一个字符串，而不是你的表描述的 int。

试试这个：

```
$result = mysql_query("INSERT INTO property( Pname, P_Price,P_Desc,P_City, P_Size,P_Rooms, P_garage, P_Address, P_Long, P_Lat, P_Sold, Provinces_idProvinces)
    VALUES('http://10.0.2.2/images/pic3.jpg',98000,'beautifull house','Durban','7m',1,2,'L-377 Umlazi','30.863226','-29.971518',0,1)"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:39:40.717

三个问题：

1.  您的 mysql 创建表模式中有 P_Siz 而不是 P_Size
2.  您的价值观声明后缺少尾随 )
3.  删除 Provinces_idProvinces 之后的单引号

我已经纠正了这个**[DEMO](http://sqlfiddle.com/#!2/fae55/1)**中的问题（删除了外键关联）

# php - 日期未正确存储在 cookie 中

> ID：11190841
> 
> 赞同：1
> 
> 时间：2012-06-25T14:04:29.173
> 
> 标签：php, cookies

我将此日期存储在 cookie 中：

```
Tue Jun 26 2012 15:38:41 GMT+0200 (CEST) 
```

现在我需要以这种形式打印它：

```
06/26/2012 15:38 
```

所以我写了这段代码：

```
echo $_COOKIE['date'];
echo date('m/d/Y g:i A', strtotime($_COOKIE['date'])); 
```

但我明白了：

```
Tue Jun 26 2012 15:38:41 GMT 0200 (CEST)
12/31/1969 7:00 PM 
```

代替：

```
 06/26/2012 15:38 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:11:48.353

strtotime 似乎不理解日期格式，您可以尝试使用 DateTime::createFromFormat 对其进行解析，或者您可以尝试将其存储为另一种格式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:12:02.883

也许将时间戳存储在 cookie 中而不是日期字符串更容易。

```
$_COOKIE['date'] = time(); 
```

然后直接读取到日期函数。

我试过这个：

```
<?php
setcookie('date', time());
var_dump($_COOKIE);
echo date('m/d/Y g:i A', $_COOKIE['date']);
?> 
```

结果是：**06/25/2012 6:13 PM**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:12:05.490

因为`strtotime`无法识别您使用的日期格式。

# android - 在多个 Android 设备上记录数据的同步时间

> ID：11190843
> 
> 赞同：8
> 
> 时间：2012-06-25T14:04:36.433
> 
> 标签：android, time, gps

这个问题可能有点冗长，但可以提出许多建议。

* * *

**问题陈述：**
我们有几个 API 级别 8 (Android 2.2) MyTouch 设备，我们将用于在游乐园（即过山车）记录加速度数据。我们还有一个可视化功能，允许我们绘制和查看加速度计点作为记录时间的函数。这是我们两难的地方！Android设备上的系统时间并不完全相同，也不能以毫秒精度设置相同的时间（只能手动以分钟精度，这很糟糕）。

* * *

**解决方案尝试：**
因此，我首先根据应用程序启动时发现的 GPS 时间记录数据。长流程短：获取GPS时间，获取系统时间，获取差异，在记录数据点后，再次获取系统时间并将差异添加回时间，将其标记为记录开始时间，每次增加200毫秒从那里记录的数据点。但是，有两个问题（获取 GPS 时间）：

*   使用`getLastKnownLocation()`不太准确。实际上，这似乎非常不准确。它给我的时间比当前 GMT/UTC 时间晚 9 分钟。然而，巧合的是，Android 设备上的系统时间也缩短了近 9 分钟……GPS 时间和系统时间之间的差异通常在 1000 到 5000 毫秒（1 到 5 秒）之间。我想我的代码有可能是错误的。我贴在下面给大家看看。

*   `requestSingleUpdate()`使用起来会很棒，因为它会得到一个更新的位置，也许是一个非常准确的时间。问题？需要 API 级别 9……我们没有的设备。

* * *

**想法：**
这是我的一个想法——如果我以某种方式从网站上提取全球时间并使用从那里提取的时间作为记录时间呢？这里的问题 - 我不知道该怎么做，这只是我的一厢情愿......

另一个想法 - 是否有某种`getTime()`我根本不知道的全局类型的函数？

* * *

**推理为什么我希望 Android 从类似的时钟中提取时间：**
想象两个人坐在过山车上 - 一个在前座，一个在后座。记录数据时，前面的人显然会比后面的人稍早经历加速度（我们希望在可视化图表上看到这一点）。这就是为什么按照一个单一的全球时间记录这些点对于毫秒精度至关重要。

* * *

**代码：**

```
Criteria c = new Criteria();
c.setAccuracy(Criteria.ACCURACY_FINE);

if (mLocationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
    mLocationManager.requestLocationUpdates(mLocationManager.getBestProvider(c, true), 0, 0, AmusementPark.this);
    Criteria criteria = new Criteria();
    String bestProvider = mLocationManager.getBestProvider(criteria, false);
    Location location = mLocationManager.getLastKnownLocation(bestProvider);

    try {

        gpsTime = location.getTime();
        systemTime = System.currentTimeMillis();
        timeDif = gpsTime - systemTime;
        Log.e("timedif", "GPS: " + gpsTime + ", System: " + systemTime +", Dif: " + timeDif);

    } catch (NullPointerException e){

    }

} 
```

* * *

**更新：**
[在这里](http://www.coderanch.com/t/325004/java/java/Clock-Synchronization-Java)，有人建议一种“服务器” `getTime()`。我真的很喜欢他的代码/答案，但是这个“服务器”是什么和/或我如何设置一个，如果这是最好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:02:55.057

我认为响应者在该帖子中所指的“服务器”是设置专用时间服务器。基本上，您将设置一些硬件，所有使用您的应用程序的人都会连接到这些硬件以获得时间。这可能比你愿意付出的努力更多。

您需要以下内容，

1.  一些备用硬件（可能像运行 tomcat 的计算机一样简单，也可能像专用服务器机架一样复杂，具体取决于您认为有多少人会使用您的应用程序。）或订阅域服务器/网络主机。

2.  一些 web 服务，只要应用程序请求它就返回时间。

3.  您需要公开您的服务器/网络服务，这是另一个令人头疼的问题。

我不确定这是否是您最好的解决方案，因为它取决于网络连接来访问您的专用服务器。您可以尝试几种替代解决方案：

我不知道您的应用程序是要公开还是专门用于研究。如果是后者，并且将与一群你认识并可以协调的人一起，我实际上建议你下载 ClockSync，将你的手机同步到同一个时间服务器，然后执行你的应用程序。

如果你的应用程序要分发给你不会接触的人，那么最好的办法是让你的应用程序连接到一个 ntp 服务器并以这种方式抓住时间。以下是您可以使用的公共 ntp 服务器列表：[http ://www.pool.ntp.org/en/](http://www.pool.ntp.org/en/)

这里有一些更多信息：

[时钟同步](https://play.google.com/store/apps/details?id=ru.org.amip.ClockSync&hl=en)

建立 SNTP 连接的[示例代码](http://hi-android.info/src/android/net/SntpClient.java.html)

我希望这些信息对您做出决定有所帮助。

# php - 正确重定向访问者（PHP 和正则表达式）

> ID：11190847
> 
> 赞同：2
> 
> 时间：2012-06-25T14:04:44.543
> 
> 标签：php, regex, redirect, preg-match

我希望如果我的访问者去`subdomain.example.com`他们会被重定向到`anothersubdomain.example.com`. 如果他们去那里`css.subdomain.example.com`，他们会被重定向到`css.anothersubdomain.example.com`等等。

我尝试了以下正则表达式（使用 preg_match）：

**尝试1：**

```
if(preg_match('#(([\w\.-]+)\.subdomain|subdomain)\.example\.com#', $_SERVER['SERVER_NAME'], $match)) {
    header('Location: http://'.$match[1].'anothersubdomain.example.com/');
} 
```

如果他们去：`subdomain.example.com`他们会被重定向到：`anothersubdomain.example.com`

但是如果他们去：`css.subdomain.example.com`他们也会被重定向到：`subdomain.example.com`- 所以那是行不通的

**尝试2：**

```
if(preg_match('#([\w\.-]+)\.subdomain\.example\.com#', $_SERVER['SERVER_NAME'], $match)) {
    header('Location: http://'.$match[1].'.anothersubdomain.example.com/');
} 
```

如果他们去：`css.subdomain.example.com`他们会被重定向到：`css.anothersubdomain.example.com`

但是如果他们去：`subdomain.example.com`他们会被重定向到：`.subdomain.example.com`-并且该 URL 无效，因此此尝试也不起作用。

有人有答案吗？我不想使用 nginx 或 apache 重写。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:11:18.750

这[对我有用](http://codepad.viper-7.com/6gltvR)：

```
$tests = array(
    'subdomain.example.com' => 'anothersubdomain.example.com',
    'css.subdomain.example.com' => 'css.anothersubdomain.example.com'
);

foreach( $tests as $test => $correct_answer) {
    $result = preg_replace( '#(\w+\.)?subdomain\.example\.com#', '$1anothersubdomain.example.com', $test);
    if( strcmp( $result, $correct_answer) === 0) echo "PASS\n";
} 
```

我所做的是将“第一个”子域的捕获组设为可选。所以，如果你打印出这样的结果：

```
foreach( $tests as $test => $correct_answer) {
        $result = preg_replace( '#(\w+\.)?subdomain\.example\.com#', '$1anothersubdomain.example.com', $test);
    echo 'Input:    ' . $test . "\n" . 
         'Expected: ' . $correct_answer . "\n" . 
         'Actual  : ' .$result . "\n\n";
} 
```

你会得到[输出](http://codepad.viper-7.com/kV11PE)：

```
Input:    subdomain.example.com
Expected: anothersubdomain.example.com
Actual  : anothersubdomain.example.com

Input:    css.subdomain.example.com
Expected: css.anothersubdomain.example.com
Actual  : css.anothersubdomain.example.com 
```

现在将其应用于您的需求：

```
if( preg_match( '#(\w+\.)?subdomain\.example\.com#', $_SERVER['SERVER_NAME'], $matches)) {
    echo header( 'Location: http://'. (isset( $matches[1]) ? $matches[1] : '') .'anothersubdomain.example.com/');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:14:16.920

```
if(preg_match('#(\w*\.?)subdomain\.example\.com#', $_SERVER['SERVER_NAME'], $match)) {
    header('Location: http://'.$match[1].'anothersubdomain.example.com/');
} 
```

# ruby-on-rails - 几秒钟后重定向到“谢谢”页面

> ID：11190848
> 
> 赞同：2
> 
> 时间：2012-06-25T14:04:49.400
> 
> 标签：ruby-on-rails, redirect, paypal

第二天，我正在尝试将 PayPal 集成到我的网站。我正在尝试获得以下行为：

*   用户点击购买链接 => 被重定向到 PAYPAL 页面（没关系）
*   用户完成支付，在支付宝网站上显示“谢谢”页面
*   10 秒后，用户被重定向到我网站上的“谢谢”页面
*   向用户的 PayPal 电子邮件发送有关他购买的产品的信息

这是我尝试实现的，但不幸的是我仍然找不到正确的方法......我的应用程序在 Ruby on Rails 中，目前我正在使用 Sandbox 并使用 PayPal Payments Standard。

您能否给我一些建议/提示/链接，如何实现这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:29:37.097

如果您使用表单将用户发送到他们的网站进行结帐，Paypal 有一个[返回参数应该可以工作：](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables#id08A6HI0709B)

> 买家完成付款后，PayPal 将他们的浏览器重定向到的 URL。例如，在您的网站上指定一个显示“感谢您的付款”页面的 URL。默认 – PayPal 将浏览器重定向到 PayPal 网页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:34:02.890

您需要[PayPal Standard](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/howto_html_wp_standard_overview)的“[立即购买”按钮](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_buynow_buttons)。

您可以使用 PayPal 创建的表单或创建自己的表单以发布到 PayPal。

我对 ruby​​-on-rails 不熟悉。[但是，您在此处](http://cubanlinks.org/blog/2005/08/03/ruby-on-rails-paypal-ipn-code-example/)查看示例。如果您想将用户带回您的网站，您还需要包含返回 url 和取消 url。

# android - Android WebView 导航

> ID：11190851
> 
> 赞同：0
> 
> 时间：2012-06-25T14:05:03.490
> 
> 标签：android

我想在 webview 中添加新闻和天气应用程序。但是从 webview 跳转到任何其他网站都不是一种选择。如何限制某个网站的 webview。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:33:53.613

创建自己的 WebViewClient：

```
public class CustomWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if(url.getHost().equals("weather.com")){
            // load link
            return false;
        }else{
            // block link
            return true;
        }
    }
} 
```

像这样使用它：

```
webview.setWebViewClient(new CustomWebViewClient()); 
```

编辑注： [getHost() 函数的示例](https://stackoverflow.com/a/4826122/1084554)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:30:52.477

如果我正确理解了这个问题，您可能想要实现自己的[WebViewClient](http://developer.android.com/guide/webapps/webview.html#HandlingNavigation)。这将允许您处理页面导航。查看来自 Google 的教程[链接](http://developer.android.com/guide/webapps/webview.html#HandlingNavigation)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-25T14:31:49.350

```
viewer.setWebViewClient(new WebViewClient(){
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {

        //Block all URL accesses.
        return false;
    }
}); 
```

这应该阻止访问任何东西。如果你想允许它们，你需要在这个函数中处理特定的 URL。

# c# - 强制包含对 dll 的引用

> ID：11190855
> 
> 赞同：3
> 
> 时间：2012-06-25T14:05:15.800
> 
> 标签：c#, .net, namespaces

场景：ProjectA引用ProjectB，ProjectB引用ProjectC

我在 ProjectC 中定义了一个接口

```
namespace Cmp.Product.Family.Configuration.Container
{
  public interface IComponent
  {
    // a couple of methods
  }
} 
```

在 ProjectB（ProjectB 取决于 ProjectC）中，我这样做：

```
using Cmp.Product.Family.Configuration.Container;

namespace Cmp.Product.Family.UI
{
    public interface IPublicComponent :  IComponent
    {

    }
} 
```

到目前为止，一切都很好。但是问题是 ProjectA 无法编译。编译器抱怨说

> Cmp.Product.Family.Configuration.Container.IComponent 未定义。添加对 ProjectC 的引用。

我不明白为什么我需要添加对 ProjectC 的引用。我仍然没有使用`IPublicComponent`ProjectA 中的。

我无法在较小的复制品上重现此问题。有没有办法从 C# 编译器获得详细的输出？

提示：问题出现在 ProjectA 中的类是一个嵌套命名空间 ( `namespace Cmp.Product.Family.UI.Settings`)。如果我更改`IPublicComponent`.

编辑 ：

如果我将包含 IPublicComponent 的名称从：

```
 Cmp.Product.Family.UI 
```

至 ：

```
 Cmp.Product.Family.SomethingElse 
```

这有帮助。知道 ProjectA 中问题所在的类是此命名空间中的容器：

```
Cmp.Product.Family.UI.Settings 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:13:22.850

ProjectA 需要 ProjectC，因为 A 需要 B，而 B 公开有关 C 的公共类型信息。您在 B 中有一个公共接口，它继承了 C 中的一个接口。

如果没有 A 引用 C，A 将不知道 B 的超类型是什么。.NET 的元数据方案需要该信息。

这是一个非常简单的示例，说明如何重现该问题。假设我为项目 B 和 C 使用了您的确切代码，项目 A 中的这将重现该问题：

```
namespace ProjectA
{
    public class Class1
    {
        private IPublicComponent d = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:15:13.373

这是因为项目 B 依赖于项目 C 中定义的接口。因此，当您添加对项目 B 的引用时，.Net 框架识别出该类实现了项目 C 中的接口，但它不理解它，所以对于框架要“理解”接口，因此编译项目 B，它需要知道项目 C 中的接口是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:11:10.280

假设你有这个：

```
ProjectC.ClassC1
ProjectB.ClassB1
ProjectB.ClassB2 : ProjectC.ClassC1 
```

如果您`ProjectA`使用其中的任何内容，显然`ProjectB`至少需要参考。`ProjectB`例如如果`ProjectA`使用`ProjectB.ClassB1`你只需要引用`ProjectB`. 不过，您**不必**在这种情况下引用`ProjectC`。但是如果`ProjectA`你使用`ProjectB.ClassB2`（继承/实现/使用`ProjectC.ClassC1`）你也必须参考`ProjectC`。

所以，如果你`ProjectA`没有编译，那么在你的代码中的某个地方，有一些东西使用了一个代码，`ProjectB`而这个代码又使用了来自`ProjectC`.

我刚刚自己测试过。希望这可以帮助。

**编辑**

如果您仍然有参考问题，则可能是参考损坏或其他问题。尝试删除并重新添加引用。还可以查看项目的源 xml 文件。作为最后一件事，您可以尝试通过将项目创建为新项目并将所有现有文件添加到其中来重新创建项目。

# android - Android 应用内计费安全问题？

> ID：11190856
> 
> 赞同：0
> 
> 时间：2012-06-25T14:05:16.043
> 
> 标签：android, billing, in-app

在我们为我们的 Android 应用程序设计 InApp Billing 的过程中，我们提出了以下方案；

1.  客户拥有植根/可操作设备（因此无法信任市场应用程序 + 我的应用程序）
2.  客户购买产品
3.  购买状态 0（已购买）被发送到我们的后台（一切都已检查并确定），我们给予积分。
4.  客户退款购买
5.  客户操纵我们的应用程序或市场应用程序在本地确认退款，从而阻止退款通知到达我们的后台服务器。

这种情况可能吗？我们如何解决这个问题？

![在此处输入图像描述](../Images/a5d77ce91086af263b88c5b8b7b598e3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-03-05T14:29:14.723

自从提出这个问题以来已经 7 年了，但我仍然会提供答案，因为它可能对某些人有用。

您的图表中缺少的部分是您的 BackOfficeServer，用于在向用户授予信用（商品）之前执行服务器端验证。由于客户端上的任何内容都不可信（无论是您的应用程序还是应用程序商店），您唯一的解决方案是将您的 BackOfficeServer 与Google 提供的[购买验证 API集成。](https://developers.google.com/android-publisher/api-ref/purchases/products/get)只有当您收到他们的回复表明购买有效时，您才应授予商品。

这同样适用于退款。如果用户发出退款，您将需要撤销商品。为此，您再次只能信任您的 BackOfficeServer。Google 提供了可以满足该要求的[实时开发者通知](https://developer.android.com/google/play/billing/realtime_developer_notifications)和[Void API 。](https://developers.google.com/android-publisher/voided-purchases)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:12:46.077

第一：如果用户要求退款，您还会收到一封电子邮件。

第二：在应用内结算的购买不能由用户直接退款。如果用户想要退款，他必须与您联系，然后您可以使用您的谷歌钱包帐户手动进行退款。

所以我认为你的情况永远不会发生。

其次，如果可能的话，我建议您使用托管购买，在这种情况下，如果用户要求退款，谷歌市场会记住它，您可以使用 RESTORE_TRANSACTION 检查是否发生了一些退款（但同样：您必须授予退款） .

# java - 椭圆曲线中的点乘法

> ID：11190860
> 
> 赞同：0
> 
> 时间：2012-06-25T14:05:30.880
> 
> 标签：java, cryptography, biginteger, elliptic-curve

我在 Stack Overflow 上找到了以下代码用于算术运算，即。椭圆曲线点的加法、加倍和乘法。我尝试运行它并使用以下 NIST 例程文档中给出的测试用例，[NSA 提供的 NIST 椭圆曲线例程] (http://www.nsa.gov/ia/_files/nist-routines.pdf/)。

代码编译并运行，但输出与给定的预测值不匹配。请帮忙。

```
import java.lang.*;
import java.math.*;
import java.security.spec.*;
import java.util.*;

class ECPointArthimetic{

EllipticCurve ec;
ECFieldFp ef;
private BigInteger x;
private BigInteger y;
private BigInteger z;
private BigInteger zinv;
private BigInteger one = BigInteger.ONE;
private BigInteger zero = BigInteger.ZERO;
private boolean infinity;

public ECPointArthimetic(EllipticCurve ec, BigInteger x, BigInteger y, BigInteger z) {
    this.ec = ec;
    this.x = x;
    this.y = y;
    this.ef=(ECFieldFp)ec.getField();

    // Projective coordinates: either zinv == null or z * zinv == 1
    // z and zinv are just BigIntegers, not fieldElements
    if (z == null) 
    {
        this.z = BigInteger.ONE;
    } 
    else 
    {
        this.z = z;
    }
    this.zinv = null;
    infinity = false;
    //TODO: compression flag
}

public BigInteger getX() 
{
    if (this.zinv == null) 
    {
        this.zinv = this.z.modInverse(this.ef.getP());
    }
    return this.x.multiply(this.zinv).mod(this.ef.getP());
}

public BigInteger getY() 
{
    if (this.zinv == null) 
    {
        this.zinv = this.z.modInverse(this.ef.getP());
    }
    return this.y.multiply(this.zinv).mod(this.ef.getP());
}

public boolean pointEquals(ECPointArthimetic other) 
{
    if (other == this) 
    {
        return true;
    }
    if (this.isInfinity()) 
    {
        return other.isInfinity();
    }
    if (other.isInfinity()) 
    {
        return this.isInfinity();
    }
    BigInteger u, v;
    // u = Y2 * Z1 - Y1 * Z2
    u = other.y.multiply(this.z).subtract(this.y.multiply(other.z)).mod(this.ef.getP());
    if (!u.equals(BigInteger.ZERO)) 
    {
        return false;
    }
    // v = X2 * Z1 - X1 * Z2
    v = other.x.multiply(this.z).subtract(this.x.multiply(other.z)).mod(this.ef.getP());
    return v.equals(BigInteger.ZERO);
}

public boolean isInfinity() 
{

    if ((this.x == zero) && (this.y == zero)) 
    {
        return true;
    }
    return this.z.equals(BigInteger.ZERO) && !this.y.equals(BigInteger.ZERO);

}

public ECPointArthimetic negate() 
{
    return new ECPointArthimetic(this.ec, this.x, this.y.negate(), this.z);
}

public ECPointArthimetic add(ECPointArthimetic b) 
{
    if (this.isInfinity()) 
    {
        return b;
    }
    if (b.isInfinity()) 
    {
        return this;
    }
    ECPointArthimetic R = new ECPointArthimetic(this.ec, zero, zero, null);
    // u = Y2 * Z1 - Y1 * Z2
    BigInteger u = b.y.multiply(this.z).subtract(this.y.multiply(b.z)).mod(this.ef.getP());
    // v = X2 * Z1 - X1 * Z2
    BigInteger v = b.x.multiply(this.z).subtract(this.x.multiply(b.z)).mod(this.ef.getP());

    if (BigInteger.ZERO.equals(v)) 
    {
        if (BigInteger.ZERO.equals(u)) 
        {
            return this.twice(); // this == b, so double
        }

        infinity = true; // this = -b, so infinity
        return R;
    }

    BigInteger THREE = new BigInteger("3");
    BigInteger x1 = this.x;
    BigInteger y1 = this.y;
    BigInteger x2 = b.x;
    BigInteger y2 = b.y;

    BigInteger v2 = v.pow(2);
    BigInteger v3 = v2.multiply(v);
    BigInteger x1v2 = x1.multiply(v2);
    BigInteger zu2 = u.pow(2).multiply(this.z);

    // x3 = v * (z2 * (z1 * u^2 - 2 * x1 * v^2) - v^3)
    BigInteger x3 = zu2.subtract(x1v2.shiftLeft(1)).multiply(b.z).subtract(v3).multiply(v).mod(this.ef.getP());

    // y3 = z2 * (3 * x1 * u * v^2 - y1 * v^3 - z1 * u^3) + u * v^3
    BigInteger y3 = x1v2.multiply(THREE).multiply(u).subtract(y1.multiply(v3)).subtract(zu2.multiply(u)).multiply(b.z).add(u.multiply(v3)).mod(this.ef.getP());

    // z3 = v^3 * z1 * z2
    BigInteger z3 = v3.multiply(this.z).multiply(b.z).mod(this.ef.getP());

    return new ECPointArthimetic(this.ec, x3, y3, z3);
}

public ECPointArthimetic twice() 
{
    if (this.isInfinity()) 
    {
        return this;
    }
    ECPointArthimetic R = new ECPointArthimetic(this.ec, zero, zero, null);
    if (this.y.signum() == 0) 
    {
        infinity = true;
        return R;
    }

    BigInteger THREE = new BigInteger("3");
    BigInteger x1 = this.x;
    BigInteger y1 = this.y;

    BigInteger y1z1 = y1.multiply(this.z);
    BigInteger y1sqz1 = y1z1.multiply(y1).mod(this.ef.getP());
    BigInteger a = this.ec.getA();

    // w = 3 * x1^2 + a * z1^2
    BigInteger w = x1.pow(2).multiply(THREE);

    if (!BigInteger.ZERO.equals(a)) 
    {
        w = w.add(this.z.pow(2).multiply(a));
    }

    w = w.mod(this.ef.getP());

    // x3 = 2 * y1 * z1 * (w^2 - 8 * x1 * y1^2 * z1)
    BigInteger x3 = w.pow(2).subtract(x1.shiftLeft(3).multiply(y1sqz1)).shiftLeft(1).multiply(y1z1).mod(this.ef.getP());

    // y3 = 4 * y1^2 * z1 * (3 * w * x1 - 2 * y1^2 * z1) - w^3
    BigInteger y3 = (w.multiply(THREE).multiply(x1).subtract(y1sqz1.shiftLeft(1))).shiftLeft(2).multiply(y1sqz1).subtract(w.pow(2).multiply(w)).mod(this.ef.getP());

    // z3 = 8 * (y1 * z1)^3
    BigInteger z3 = y1z1.pow(2).multiply(y1z1).shiftLeft(3).mod(this.ef.getP());

    return new ECPointArthimetic(this.ec, x3, y3, z3);
}

public ECPointArthimetic multiply(BigInteger k) 
{
    if (this.isInfinity()) 
    {
        return this;
    }

    ECPointArthimetic R = new ECPointArthimetic(this.ec, zero, zero, null);
    if (k.signum() == 0) 
    {
        infinity = true;
        return R;
    }

    BigInteger e = k;
    BigInteger h = e.multiply(new BigInteger("3"));

    ECPointArthimetic neg = this.negate();
    R = this;

    int i;
    for (i = h.bitLength() - 2; i > 0; --i) 
    {
        R = R.twice();
        boolean hBit = h.testBit(i);
        boolean eBit = e.testBit(i);

        if (hBit != eBit) {
            R = R.add(hBit ? this : neg);
        }
    }

    return R;
}

}

class ECMath{
public static void main(String args[])
{
    //sx,sy,tx,ty are provided coordinates, and so is d which is a random integer, to be used later as a private key
    BigInteger sx = new BigInteger("d458e7d127ae671b0c330266d246769353a012073e97acf8",16);
    BigInteger sy = new BigInteger("325930500d851f336bddc050cf7fb11b5673a1645086df3b",16);
    BigInteger tx = new BigInteger("f22c4395213e9ebe67ddecdd87fdbd01be16fb059b9753a4",16);
    BigInteger ty = new BigInteger("264424096af2b3597796db48f8dfb41fa9cecc97691a9c79",16);
    BigInteger d = new BigInteger("2854434767935089551580740784991073913165554873467591589150");

    String p192X = "188da80eb03090f67cbf20eb43a18800f4ff0afd82ff1012";
    String p192Y = "07192b95ffc8da78631011ed6b24cdd573f977a11e794811";
    String p192B = "64210519e59c80e70fa7e9ab72243049feb8deecc146b9b1";
    String p192P = "6277101735386680763835789423207666416083908700390324961279";
    String p192Order = "6277101735386680763835789423176059013767194773182842284081";
    String p192A = "-3";

    BigInteger p = new BigInteger(p192P, 16);
    BigInteger gx = new BigInteger(p192X, 16);
    BigInteger gy = new BigInteger(p192Y, 16);
    ECFieldFp ef= new ECFieldFp(p);
    EllipticCurve ec =  new EllipticCurve(ef,new BigInteger(p192A).mod(p),new BigInteger(p192B, 16));
    ECPointArthimetic G = new ECPointArthimetic(ec, new BigInteger(p192X,16), new BigInteger(p192Y,16),null);
    BigInteger order = new BigInteger(p192Order, 16);

    ECPointArthimetic ga = new ECPointArthimetic(ec,gx,gy,null);
    ECPointArthimetic sa = new ECPointArthimetic(ec,sx,sy,null);
    ECPointArthimetic ta = new ECPointArthimetic(ec,tx,ty,null);

    ECPointArthimetic resAdd = sa.add(ta);
    ECPointArthimetic resMul = ga.multiply(d);

    System.out.println(resAdd.getX().toString(16));
    System.out.println(resAdd.getY().toString(16));

    System.out.println(resMul.getX().toString(16));
    System.out.println(resMul.getY().toString(16));

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:25:50.673

您有与[Clickmit Wg](https://stackoverflow.com/users/1440217/clickmit-wg)[完全相同的问题](https://stackoverflow.com/a/11009238/5542)：p192P 和 p192Order 以 10 为底，*而不是*16 为底。因此您应该使用代替) 来构造素数和订单实例。*`new BigInteger(value)``new BigInteger(value, 16`*

# delphi - 在 Delphi XE2 中使用 Unicode 字符

> ID：11190867
> 
> 赞同：0
> 
> 时间：2012-06-25T14:06:03.587
> 
> 标签：delphi, unicode, delphi-xe2

我正在考虑将我们的一个应用程序转换为 Delphi XE2，并且通常会借此机会将其更新。

该应用程序的功能之一是 StringGrid，它在几列中显示许多复选标记。为了实现这一点，网格实际上是 2 个对齐的网格 - 其中第二个设置为 Wingdings 字体以显示复选标记。

我认为我应该能够使用 TListView 之类的东西并将复选标记字符（U + 2713）与文本的其余部分一起使用是错误的......如果是这样，我该怎么做？

我需要将该列的字体设置为 Wingdings 吗？这需要在 OnDraw 中吗？

我是不是找错树了...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T17:57:40.267

`File->New->VCL Forms application`

在 中`Component Palette`，展开`Win32`选项卡并选择`TListView`，然后将其拖放到表单上。

右键单击新添加的`TreeView1`，然后`Items Editor...`从上下文菜单中选择。

单击`New Item`。输入任何文本（例如`x Testing`，暂时使用“x”作为占位符）。

启动 Windows`Character Map`应用程序（开始按钮、`Chara`在搜索框中键入或`Start->Programs->Accessories->Character Map`）。将字体更改为`Arial Unicode MS`，然后导航到您想要的字符（在其中）。

单击字符，然后单击`Copy`按钮。切换回 IDE，选择`x`您在编辑中放置的占位符，然后点击`Ctrl+V`粘贴您刚刚从中选择的字符`Character Map`。您现在应该看到您的复选标记（或您选择的任何字符），然后是`Testing`.

（上面的步骤是我遵循的两分钟过程来了解如何做到这一点，并且那个快速实验表明你可以。）

# azure - Azure 辅助角色中经常性事件的正确代码模式，每个事件之间存在相当大的延迟

> ID：11190868
> 
> 赞同：1
> 
> 时间：2012-06-25T14:06:10.323
> 
> 标签：azure, sleep, azure-worker-roles, thread-sleep

我有一个 Azure 工作者角色，其工作是定期针对 SQL Azure 数据库运行一些代码。这是我当前的代码：

```
const int oneHour = 216000000; // milliseconds

while (true)
{
    var numConversions = SaveSeedsToSQL.ConvertRemainingPotentialQueryURLsToSeeds();
    SaveLogEntryToSQL.Save(new LogEntry { Count = numConversions });
    Thread.Sleep(oneHour);
} 
```

Thread.Sleep(216000000) 是对此类定期但不频繁的事件进行编程的最佳方式，还是我应该使用某种针对 Azure 辅助角色的唤醒和再次运行机制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:16:19.887

这段代码当然可以，但是有一些问题：

1.  你可能会在某个地方失败，而这个时间表就会被全部取消。如果您必须在特定时间实际执行此操作，这一点很重要。
2.  这里没有并发控制。如果您希望某事只完成一次，您需要一种机制，以便单个实例执行该工作而其他实例不执行。

这个问题有几个解决方案：

*   在角色上运行 Windows 调度程序（内置）。这解决了问题 1，但不是问题 2。
*   运行 Quartz.NET 并安排事情。这解决了#1，取决于你如何做，还有#2。
*   在服务总线或 Windows Azure 队列中使用未来计划的队列消息。这两个都解决了。

前两个选项适用于警告，所以我认为最后一个选项值得更多关注。您可以简单地创建您的角色能够理解的消息并将其发布到队列中。一旦时间到了，它就会变得可见，您通常的投票角色会看到它并可以对其进行处理。这里的好处是它既是时间准确的，又是单个实例对其进行操作，因为它是一个队列消息。完成工作后，您可以让实例安排下一个并将其发布到队列中。我们一直在使用这种技术。您只需要小心，如果由于某种原因您的角色在安排下一个角色之前失败，整个系统就会失败。您应该在那里进行一些健全性检查和保护措施。

# java - 尝试生成随机数时堆栈溢出

> ID：11190874
> 
> 赞同：0
> 
> 时间：2012-06-25T14:06:26.720
> 
> 标签：java, random, stack-overflow

我正在写一个数独生成器。

```
static void change(int[][] x, int[][] y, int[][] z, int[][] w, int[][] u, int k) {
    int a = r1.nextInt(9);
    int b = r2.nextInt(2);
    int c = r3.nextInt(2);
    if (x[b][c] != 0 && vcheck(a, c, x, y, z) != false && hcheck(a, b, x, u, w) != false && tcheck(a, x) != false) {
        x[b][c] = a;
        k--;
    } else change(x, y, z, w, u, k);
} 
```

程序的这一部分是空白，它启动将随机生成的位置 (b,c) 上的表中的数字更改为值 a。抛出的错误是

```
Exception in thread "main" java.lang.StackOverflowError
    at java.util.Random.nextInt(Random.java:307) 
```

有人能告诉我我应该改变什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:32:38.980

StackOverflowError 是当你的递归运行太深时你得到的。这通常是设计错误的标志。在我看来，您允许随机数生成器来控制递归的深度。这绝对是个坏主意，因为不能保证 RNG 会在 VM 用完堆栈空间之前生成避免递归调用所需的数字。

还有其他问题。这行代码在给定的上下文中似乎没有做任何有用的事情：

```
k--; 
```

您可能应该多考虑一下您的算法。

# eclipse - 在没有互联网连接的情况下安装 Glassfish Eclipse 插件？

> ID：11190880
> 
> 赞同：0
> 
> 时间：2012-06-25T14:06:32.947
> 
> 标签：eclipse, plugins, glassfish

由于工作中的安全问题，我无法将**Eclipse**连接到互联网，我想找到一种手动下载**Glassfish Eclipse 插件**的方法（不使用**Eclipse Market Place**或**Eclipse 安装向导**）并单独安装它......

我做了很多搜索，我发现的只是如何使用来自**Eclipse Plugin Installer**的下载链接安装 Glassfish Eclipse 插件...... PS：**Glassfish 服务器**已经安装在我的笔记本电脑中，我只需要**Eclipse 插件**。

从哪里可以下载插件？

我该如何安装它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:03:22.613

GlassFish Tools 是 Oracle Enterprise Pack for Eclipse 的一部分，它以多种不同的下载格式提供，例如可立即运行的 Eclipse 安装和可下载的存储库。对于有连接问题的用户来说，这些选项中的任何一个都是不错的选择。如果您已经安装了 Eclipse，请下载离线存储库（在下载站点上可能称为“仅 OEPE 插件”）。然后使用安装插件向导，但指向下载的 zip 而不是公共 URL。确保取消选中咨询其他存储库选项以防止 Eclipse 不必要地漫游到网络。

[OEPE - 主下载页面](http://www.oracle.com/technetwork/developer-tools/eclipse/downloads/index.html)

[OEPE - 最新版本](http://www.oracle.com/technetwork/developer-tools/eclipse/downloads/oepe-12111-1560492.html)

# nhibernate - NHibernate 无法确定列 [namespace,assembly] 的类型：NHibernate.Mapping.Column(column)

> ID：11190881
> 
> 赞同：0
> 
> 时间：2012-06-25T14:06:33.897
> 
> 标签：nhibernate, mapping

我对这种情况感到困惑。有这两个类：

```
public class Payment {
    public Payment() { }
    public  string Trn { get; set; }
    public  TxType TxTypeId { get; set; }
    public  string TxCode { get; set; }        
    public  System.Nullable<decimal> Amount { get; set; }
    public  System.Nullable<System.DateTime> DateStamp { get; set; } }

public PaymentAudit() { }
    public  System.DateTime DateStamp { get; set; }
    public  Payment Trn { get; set; }
    public  PaymentSaga PaymentStateId { get; set; }
    public  ProcessState ProcessState { get; set; }
    public  PublishState PublishState { get; set; }
    public  System.Nullable<short> ChgCount { get; set; }
    public  string UserName { get; set; } 
```

映射是：

```
 <class name="Payment" table="Payment" lazy="false" >
    <id name="Trn">
      <generator class="identity" />
    </id>
    <many-to-one insert="false" update="false" lazy="false" name="TxTypeId">
      <column name="TxTypeId" sql-type="varchar" not-null="false" />
    </many-to-one>
    <property name="TxTypeId">
      <column name="TxTypeId" sql-type="varchar" not-null="false" />
    </property>
    <many-to-one insert="false" update="false" lazy="false" name="TxCode">
      <column name="TxCode" sql-type="varchar" not-null="false" />
    </many-to-one>
    <property name="TxCode">
      <column name="TxCode" sql-type="varchar" not-null="false" />
    </property>
    <property name="Amount">
      <column name="Amount" sql-type="decimal" not-null="false" />
    </property>
    <property name="DateStamp">
      <column name="DateStamp" sql-type="datetime" not-null="false" />
    </property>   
    <bag name="PaymentAudits" inverse="true" cascade="none">
      <key column="Trn" />
      <one-to-many class="PaymentAudit" not-found="ignore" />
    </bag>  
  </class>

  <class name="PaymentAudit" table="PaymentAudit" >
    <composite-id>
      <key-many-to-one name="PaymentStateId"  column="PaymentStateId" />
      <key-property name="DateStamp" column="DateStamp" />
      <key-many-to-one name="ProcessState" column="ProcessState" />
    </composite-id>
    <property name="PublishState">
      <column name="PublishState" sql-type="varchar" not-null="false" />
    </property>
    <many-to-one  name="Trn">
      <column name="Trn" sql-type="varchar" not-null="false" />
    </many-to-one>
    <property name="ChgCount">
      <column name="ChgCount" sql-type="smallint" not-null="false" />
    </property>
    <property name="UserName">
      <column name="UserName" sql-type="nvarchar" not-null="false" />
    </property>
    <many-to-one  name="PublishState">
      <column name="PublishState" sql-type="varchar" not-null="false" />
    </many-to-one> 
  </class> 
```

桌子，

**付款：**
Trn PK
TxTypeId FK
TxCode FK
Amount
DateStamp

**PaymentAudit:**
PaymentStateId PK DateStamp
PK
ProcessState PK
PublishState FK
Trn FK
ChgCount
用户名

我得到了这个错误： ***无法确定类型：MyProject.NHibernate.Payment.Model.Payment.Payment，MyProject.NHibernate.Payment.Model，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null，对于列：NHibernate .Mapping.Column(Trn)***

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:32:20.913

Trn 是主键，是一个字符串并且被映射为身份？Identity 是一个整数，所以属性应该是 int。

# tumblr - 操纵 tumblr 分页：不计算某些帖子

> ID：11190887
> 
> 赞同：0
> 
> 时间：2012-06-25T14:06:54.733
> 
> 标签：tumblr

我正在使用 tumblr 创建一个博客，并且我希望某些类型的帖子（答案块）不会显示在主页中。

我已经通过将主题的默认代码更改为

```
 {block:Answer}
      {block:TagPage}
        <article class="stat-answer" id="post-{PostID}">
         .......
      {/block:TagPage}
   {/block:Answer} 
```

我基本上添加了`{/block:TagPage}`

但是，它仍在计算帖子。

这是个问题。我有很多，我想在标签页面中将它们可视化，而不是在主页中，这将导致空白，因为它计算了帖子而不是可视化它们。

怎么能对 tumblr 说不计算某些类型的帖子？

怎么可能，编辑html源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:22:15.330

使用额外的 Tumblr 标记，您仍然会输出*Ask*帖子，但如果是*Tag*页面，则不会输出*Ask信息。*

 *我认为问题在于案件的顺序。试试这个代码：

```
{block:TagPage}
    {block:Answer}
        <article class="stat-answer" id="post-{PostID}">
        …
        </article>
    {/block:Answer}
{/block:TagPage} 
```

**UPD：**由于我的经验和[**这**](http://www.tumblr.com/docs/en/custom_themes) [**两个**](http://disattention.com/labs/tumblr/theme-guide/)指南，不可能实现你的目标，因为*Tumblr*的正常行为，它给你一定数量的从数据库中获取的帖子，并且由于*Tumblr-dev*逻辑，你必须输出所有那些收到的帖子，*Dev*不会检查你是否做对了（输出所有收到的帖子或有选择地）。

由于主题 API 的简单性，使用纯 Tumblr 标记是不可能的。

但是你可以使用[**Tumblr API**](http://www.tumblr.com/docs/en/api/v2)来获取、过滤和输出只有必要的帖子。这个 API 有更多的灵活性，也许它可以帮助你。*

# phpmyadmin - phpMyAdmin - 记录客户端查询？

> ID：11190892
> 
> 赞同：3
> 
> 时间：2012-06-25T14:07:30.637
> 
> 标签：phpmyadmin

有没有办法找出或记录客户端应用程序向 phpMyAdmin 数据库发送的查询类型？

非常感谢提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:13:17.670

phpmyadmin 确实提供了简短的历史。如果您单击“phpmyadmin”徽标下方的“sql”图标，它将打开一个新窗口。在新窗口中，只需单击“历史记录”选项卡。

这会给你最后二十个左右的 sql 操作。

# c# - 中断/暂停登录过程更改过期密码

> ID：11190893
> 
> 赞同：0
> 
> 时间：2012-06-25T14:07:31.787
> 
> 标签：c#, asp.net, security

我这里有点麻烦。我正在开发一个使用 Web 服务进行身份验证和 WinForms 前端的多层 CAB 应用程序。

现在，我被要求实施密码到期并获得了必要的详细信息，并且我已经使用它们来查看用户的密码是否已过期，唯一的问题是，我在暂停登录过程和“重定向”到ChangePassword 表单。

我一直在尝试的是抛出一个名为 PasswordExpiredException(inherits System.Exception 和后来的 ApplicationExcetion 当它不起作用时) 的自定义异常并在 catch 中调用 ChangePassword.ShowDialog() 。这引起了头疼，因为它正在做我该死的告诉它做的事情，并且如果密码已过期，则会在登录时抛出一个不合时宜的异常。

那么，当它完成它的工作时，我可以取消抛出我的异常吗？或者，我应该放弃这个想法并“正确”地去做吗？不知道那可能是什么

**登录时调用堆栈的基本运行**~~>

```
Logon.Cs.btnOK_Click ~~> wsAuthentication.GetProvider(GetUserDBInstace(UserName))~~>
ASPNETAuthentication.Authenticate(username,password)~~>
CheckIfExipred(MembershipUser.LastPasswordChangedDate) 
~Y~> throw PasswordExpiredException; //getting it to go back all the way to the UI, opening up ChangePassword.cs, leaving me with an authenticated user who's about to change his old password
~N~> //continue login, ignoring all my hard work 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:14:07.413

我不会考虑抛出异常，而是考虑返回某种`AuthenticationResult`. 在我看来，您正在尝试使用异常处理来操纵控制流。例外应该是例外。您的建议听起来像是完全合法的商业规则。

```
public class AuthenticationResult {
  public bool AreCredentialsValid { get; set; }
  public bool IsAccountLocked { get; set; }
  public bool RequiresPasswordChange { get; set; }
} 
```

然后，您可以查询返回的对象以确定下一步要做什么，而不是尝试处理异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:12:30.617

过期的密码不是登录时的例外情况（可能在其他时候，例如在检查特定操作的授权时），因此`PasswordExpiredException`在这种情况下，从登录方法中抛出您的密码可能不是控制您的流程的最佳方法。

也许您的登录方法可以返回一个用户对象，其中包含一个指定密码已过期的布尔值，或者您可以`out`在登录时使用一个参数来返回相同的信息。我更喜欢前者，因为我想尽可能避免`out`使用参数。

# openssl - openssl tsget 服务器

> ID：11190900
> 
> 赞同：0
> 
> 时间：2012-06-25T14:07:55.950
> 
> 标签：openssl

```
[root@LINUX misc]# pwd
/usr/local/openssl/ssl/misc
[root@LINUX misc]# ./tsget -h http://tsa.opentsa.org:8080/tsa ../../bin/alllog.log.tsq
../../bin/alllog.log.tsq: fatal error: could not get timestamp, curl code: 7 (couldn't connect to host) 
```

如何配置时间戳授权服务器以获取签名的 tsq 文件？上面的例子展示了如何向服务器 URL(http://tsa.opentsa.org:8080/tsa) 发送一个 tsq，但我不明白如何启动服务器来处理这个请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:50:00.053

您可能想尝试在浏览器中简单地打开[http://tsa.opentsa.org:8080/tsa - 在编写错误代码时“无法连接到主机”似乎是正确的。](http://tsa.opentsa.org:8080/tsa)我现在至少不能连接到端口 8080 上的服务器 tsa.opentsa.org。[http://tsa.opentsa.org/](http://tsa.opentsa.org/)之类的替代方案建议重新安装简单的drupal。

现在是第二部分 - 如何使用它。

这通常是首先创建一个 tsq 文件。请参阅[http://manpages.ubuntu.com/manpages/precise/man1/tsget.1ssl.html](http://manpages.ubuntu.com/manpages/precise/man1/tsget.1ssl.html)以获得关键的一个很好的例子

```
 openssl ts -query -data file-to-get-timestamped.txt -cert <your cert> > file.tsq 
```

然后使用 tsget 发送结果。

如果您想在 tsa.opentsa.org 开始一个 - 那么您需要与他们（opentsa.org 的所有者）合作。

如果您的意思是在 opentsa.org 上启动一个（目前已完成）；那么在这种情况下，人们将下载并安装诸如 http://opentsa.org/#download 之类的软件（这涉及安装 openssl，在 tsa.org 应用补丁，然后安装 mod_tsa 模块）或安装商业产品，例如[http://www.ascertia.com/products/ADSS-TSA-Server.aspx](http://www.ascertia.com/products/ADSS-TSA-Server.aspx)。

如果您只是想测试/实验一下 - 看看[http://owcapage.wordpress.com/linux-time-stamp-server/](http://owcapage.wordpress.com/linux-time-stamp-server/) - 使用起来要简单得多，或者在最极端的情况下运行 ts 命令像

```
openssl ts -reply -queryfile design1.tsq -inkey tsakey.pem \
    -signer tsacert.pem -out design1.tsr 
```

在“网络服务器”后面。其中 design1.tsq 是您通过网络从 HTTP 客户端获得的有效负载文件 - 而 design1.tsr 是您将输出的结果。

因此，您的 cgi/perl/php/etc 脚本将类似于

```
 1\. create temp file containing GET/POST payload
 2\. run above openssl ts command over it
 3\. output the resulting file back 
```

这实际上正是 [http://owcapage.wordpress.com/linux-time-stamp-server/](http://owcapage.wordpress.com/linux-time-stamp-server/)上的简单脚本所做的。

# google-app-engine - 我在 Google Appengine 中创建应用程序时出错，现在我无法使用相同的应用程序标识符。我怎样才能解决这个问题？

> ID：11190913
> 
> 赞同：-1
> 
> 时间：2012-06-25T14:08:44.783
> 
> 标签：google-app-engine

我在**Google Appengine**中创建应用程序时出错，现在我无法使用相同的**Application Identifier**。我尝试在“仅限于以下 Google Apps 域：”上设置域名并抛出错误，然后锁定应用程序标识符名称。

之后我尝试执行相同的步骤，但没有弄乱**身份验证选项**，它说应用程序标识符现在不可用。

但最初这不是问题。

请帮助：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:39:24.533

不要附加到您的应用程序标识符上，它们应该是内部的而不是公开的，只需创建一个新的。

# ruby-on-rails-3 - 如何处理handlebar.js中的新行

> ID：11190914
> 
> 赞同：5
> 
> 时间：2012-06-25T14:08:49.533
> 
> 标签：ruby-on-rails-3, jquery-mobile, handlebars.js

我在我的 rails jquery 移动应用程序中使用 HandleBar.js。

我有一个 json 返回值`data= "hi\n\n\n\n\nb\n\n\n\nhow r u"`

当在 .hbs 文件中使用时，它`{{data}}`显示我`hi how r u`与插入的实际新行不同

请给我建议。

**前置标签对我有帮助**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-05T04:22:09.600

Handlebars 不会与数据中的换行符混淆，除非您注册了一个正在处理它们的助手。处理 HTML 中的换行符而不将它们转换为标签的一种好方法是在 HTML 中呈现车把模板时`br`使用 CSS 属性。`white-space`您可以将其值设置为`pre-line`。

[阅读 MDN 上的相关文档](https://developer.mozilla.org/en-US/docs/Web/CSS/white-space)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T21:19:00.483

查看生成文件的来源 - 您的换行符可能在那里，HTML 根本不会将换行符呈现为换行符。

您可以插入换行符`<br />`

但是，您似乎正在尝试使用换行符格式化行的位置，从技术上讲，这应该通过将行包装在`<p>`或`<div>`标签中并使用 CSS 进行样式设置来完成。

# actionscript-3 - 闪画 API

> ID：11190916
> 
> 赞同：1
> 
> 时间：2012-06-25T14:09:01.303
> 
> 标签：actionscript-3

我想创建一个Flash Paint应用程序以及每个组件将与图层相关联的图层以及属性面板，该面板将显示组件的所有属性，例如具有填充和描边的矩形，具有描边属性的线条。

因此，该用户可以根据他的要求操作组件。谁能告诉我提供此类功能的此类库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:16:24.880

我不知道有任何库可以提供所有这些功能。但是，您可以从[http://www.nocircleno.com/graffiti/](http://www.nocircleno.com/graffiti/)之类的库开始，然后从那里构建您的应用程序特定需求（例如添加您自己的属性面板）。

# sql - Django，UserProfile继承噩梦？

> ID：11190918
> 
> 赞同：0
> 
> 时间：2012-06-25T14:09:22.110
> 
> 标签：sql, django, django-models, django-admin, django-registration

我同时使用`django-userena`和`django-facebook`作为我的主要注册应用程序。

让我们从他们两个那里继承我自己`UserProlfile`的：

```
from userena.models import UserenaBaseProfile
from django_facebook.models import FacebookProfileModel

class UserProfile(UserenaBaseProfile , FacebookProfileModel):
    user = models.OneToOneField(User, unique=True, verbose_name=_('user'), related_name='user_profile')
    department     = models.ForeignKey('Department' , null = True , blank = True , related_name=_('user'))
    name           = models.CharField(max_length = 100)
    birthday       = models.DateField()

    def __unicode__(self):
        return self.name

class Student(UserProfile):
    courses = models.ManyToManyField(Course , null = True, blank = True, related_name = _('student')) 
```

现在，每当我想在 Django Admin 中查看 Student 时，都会收到此错误：

```
Exception Value: No such column: profiles_userprofile.about_me 
```

但是，它存在！这是输出`./manage.py sqlall profiles`：

```
BEGIN;
CREATE TABLE "profiles_userprofile" (
    "id" integer NOT NULL PRIMARY KEY,
    "mugshot" varchar(100) NOT NULL,
    "privacy" varchar(15) NOT NULL,

    "about_me" text, ## Her it is !!!

    "facebook_id" bigint UNIQUE,
    "access_token" text NOT NULL,
    "facebook_name" varchar(255) NOT NULL,
    "facebook_profile_url" text NOT NULL,
    "website_url" text NOT NULL,
    "blog_url" text NOT NULL,
    "image" varchar(255),
    "date_of_birth" date,
    "gender" varchar(1),
    "raw_data" text NOT NULL,
    "user_id" integer NOT NULL UNIQUE REFERENCES "auth_user" ("id"),
    "department_id" integer,
    "name" varchar(100) NOT NULL,
    "birthday" date NOT NULL
)
; 
```

我很困惑..有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:32:48.480

`sqlall`如果您是第一次运行，只会告诉您*将*要发送的 SQL。`syncdb`它不会*为*您提供数据库的实际状态。您必须实际运行`syncdb`才能创建表。此外，如果任何表格已经存在，*则不*`syncdb`会对表格进行任何更改；它只创建表，从不改变它们。

 *如果您需要更改表，则必须在数据库上手动运行 SQL，或者使用[South](http://south.aeracode.org/)之类的工具进行迁移。*

# java - Hibernate：在 HQL / QueryDSL 中使用单个连接语句初始化所有子级？

> ID：11190919
> 
> 赞同：2
> 
> 时间：2012-06-25T14:09:25.027
> 
> 标签：java, hibernate, jpa, hql, querydsl

我们现在正在使用 QueryDSL 进行数据库查询，但我认为这个问题更普遍与休眠相关..

我想知道：HQL 是否将我查询的实体放入休眠上下文/缓存中，以便可以从那里访问它们？我在想，如果我`leftjoin`为一个实体运行一个大数据，明确地收集所有子关系，如果我可以告诉休眠在将结果映射到我的实体对象时使用该信息，我应该能够节省延迟加载。我就是想不通怎么办。。

**示例：** A 有 Bs，B 有 Cs。现在，如果我`fetch all`为某个 A 构建查询并将其与 Bs 和 Cs 连接（查询 DSL 实现）：

```
List<A> as = query.from(QA.a).leftJoin(QA.a.b,QB.b).leftJoin(QB.b.c,QC.c).where(a.id.eq("1)).fetchAll(); 
```

我会得到一个很好的 SQL 语句，上面写着

```
select... from A inner join B ... inner join C ... where ... 
```

所以结果应该足以让hibernate初始化

```
as.get(index).getBs()
as.get(index).getBs().get(index).getCs() 
```

但它不会这样做，而是会运行查询

```
select ...  from B where B.aId = ?? 
```

是否有可能通过初始化一个包含所有子节点的实体来减少这些延迟加载，还是我希望太多？

如果我使用连接加载所有数据，休眠会将它们放在其缓存中，并且它会访问该缓存以进行那些延迟加载还是会轮询数据库？我对此有发言权还是完全不在我的掌控之中？

谢谢@大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:32:11.737

在 HQL 查询中，您需要使用`fetch`关键字来执行此操作：

```
select a from A a left join fetch a.cs b left join fetch b.cs where ... 
```

这在[Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-joins)中有很好的解释。

我从未使用过 QueryDSL，但根据[其文档](http://www.querydsl.com/static/querydsl/2.6.0/apidocs/com/mysema/query/jpa/JPQLQuery.html#fetch%28%29)，您只需在每次加入后调用 fetch() 方法即可添加此 fetch 关键字：

```
query.from(QA.a).leftJoin(QA.a.b,QB.b).fetch().leftJoin(QB.b.c,QC.c).fetch().where... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:55:27.953

对不起，我忘了在我的帖子中提到这一点。我确实尝试使用`fetch`但没有成功。原来解决方案是使用

```
@Fetch(FetchMode.JOIN) 
```

在实体属性。

# image - Codeigniter - 重新调整多个图像的大小有效，但大小错误？

> ID：11190920
> 
> 赞同：0
> 
> 时间：2012-06-25T14:09:26.450
> 
> 标签：image, codeigniter, resize

我正在尝试将全尺寸图像海报调整为文件的三个较小变体。我首先保存全尺寸海报，然后我使用它的路径来创建较小的海报。问题是尺寸不正确。我有一个 $conf 数组，其中包含所有图像的一般配置信息，然后我为每个具有特定更改（例如大小）的图像有一个 $conf 数组。我在每次新的初始化之前清除库。

```
// Config for all images
$conf['source_image'] = $file_path;
$conf['quality'] = 80;
$conf['maintain_ratio'] = true;
$conf['master_dim'] = 'auto';

// Small
$conf['new_image'] = 'img/movie_images/posters_small/' . $file_name;
$conf['height'] = 75;
//$conf['width'] = 55;

$this->image_lib->initialize($conf);
$this->image_lib->resize();
$this->image_lib->clear();
//unset($conf['width']);

// Medium
$conf['new_image'] = 'img/movie_images/posters_medium/' . $file_name;
$conf['height'] = 200;

$this->image_lib->initialize($conf);
$this->image_lib->resize();
$this->image_lib->clear();

// Big
$conf['new_image'] = 'img/movie_images/posters_big/' . $file_name;
$conf['height'] = 300;

$this->image_lib->initialize($conf);
$this->image_lib->resize();
$this->image_lib->clear(); 
```

看到代码中的任何错误？我尝试按照此处另一个问题中的建议输出错误，但这也没有显示任何内容。我不明白它是如何工作的。如果我将“master_dim”设置为自动，第一个（小）图像得到正确的高度，但默认宽度（真的很宽）。如果我将 master_dim 设置为“宽度”，则小图像保持不变（非常宽，但高度正确）。如果我将 master_dim 设置为“高度”，它们都会得到正确的高度，但小的仍然是超宽的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:13:35.370

正如您在代码中看到的那样，我尝试使用小图像的宽度来获得正确的尺寸，但没有让它工作。

在将 master_dim 设置为 height 并手动设置小图像的宽度后，它可以按我的意愿工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:59:48.233

[您可以从http://thephpcode.com/blog/codeigniter/gradient-image-library-for-codeigniter](http://thephpcode.com/blog/codeigniter/gradient-image-library-for-codeigniter)下载图像库，以将图像转换为正确的宽度和大小。

# datagrid - 隐藏datagrid vb6中的选定列

> ID：11190923
> 
> 赞同：0
> 
> 时间：2012-06-25T14:09:29.567
> 
> 标签：datagrid, vb6, hide

我有一个数据网格对象，用户要求能够选择任何列并隐藏它们。我想我必须遍历列并检查它们是否被选中（？）但我找不到这样做的方法。有人可以给我一个提示吗？我想在 vb6 中创建 excel，所以如果可以让 excel 使用 oracle 数据表作为它的源，我也准备好了:)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:06:20.677

DataGrid 有一个 HeadClick 事件，您可以轻松地使用它。它提供了`colindex`被点击的列。

如果您希望单击的列标题具有多种含义，则可以将其与 CheckBox 结合使用，`Style = vbButtonGraphical`以制作“隐藏单击的列”按钮或其他东西。

# c++ - 如何使用 C++ 在 Linux 中创建窗口？

> ID：11190925
> 
> 赞同：28
> 
> 时间：2012-06-25T14:09:44.970
> 
> 标签：c++, linux, window

我期待一个类似于 Windows API 的 Linux API。我在 Google 上看到的只是对 Qt 和 GTK 的引用。我真的只需要一个简单的窗口就可以使用 OpenGL 进行绘制，所以这些库对于我的使用来说显得臃肿。Qt 和 GTK 在 Linux 下使用什么来创建窗口？没有比这更底层的了吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-25T14:13:50.770

X 窗口系统通常进行绘图 - 然后您在原始 Xlib 之上使用 Qt 或 GTK 等工具包来提供事件循环、拖放、鼠标点击启动应用程序以及所有其他“桌面”内容

[直接使用Xlib 和 opengl](http://www.opengl.org/wiki/Programming_OpenGL_in_Linux:_GLX_and_Xlib)相当容易，或者如果您只想学习 opengl，[glut](http://www.opengl.org/resources/libraries/glut/)提供了显示窗口、处理鼠标/键盘事件等所需的框架。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-25T14:17:58.080

对于 OpenGL，最简单的方法是使用[GLUT](http://www.opengl.org/resources/libraries/glut/)或[SDL](http://www.libsdl.org/)。这是一个使用 GLUT 的近似示例：

```
#include <GL/glut.h>

int main (int argc, char **argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE | GLUT_DEPTH);
    glutInitWindowSize(800, 600);
    glutInitWindowPosition(100, 100);
    glutCreateWindow("My new window");
    /* ... */
} 
```

你真的想避免直接使用 Xlib，因为它使用起来非常乏味。此外，GLUT 和 SDL 可以更轻松地将 OpenGL 应用程序移植到不同的平台。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T14:18:53.980

Ax Martin 说，X11（或者现在它的分支 XOrg）是窗口系统，但实际上你可以不使用工具包，只使用 X 库来编写 X11 应用程序（即客户端）。有关文档，请参见 [此处](http://tronche.com/gui/x/xlib/)。

这样做通常不是最好的主意，因为它相当痛苦，并且会涉及大量代码，以使相对简单的应用程序按您期望的方式工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-04-18T15:23:20.233

更新了 2019 年的答案。类 Unix 系统通常使用 X 窗口系统。您可以使用 Xlib 直接使用它，这是低级 API。但是您可能需要一个更受欢迎和跨平台的解决方案。您可以使用：

*   [OpenGL 实用工具包](http://freeglut.sourceforge.net/)- 过剩
*   [简单快速的多媒体库](https://www.sfml-dev.org/)- SFML
*   [简单的 DirectMedia 层](https://www.libsdl.org/)- SDL
*   [图形库框架](https://www.glfw.org/)- GLFW（我的推荐）

> GLFW 是用 C 语言编写的，并且原生支持 Windows、macOS 和许多使用 X Window 系统的类 Unix 系统，例如 Linux 和 FreeBSD。

安装后，创建一个窗口：

```
#include <GLFW/glfw3.h>
.
. //Entry and glfwInit()
.
GLFWwindow* window = glfwCreateWindow(1000, 1000, "MyWindow", NULL, NULL);
glfwMakeContextCurrent(window); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-12T03:12:05.640

我知道这是一个旧帖子。但是对于像我这样最近发现这一点的人来说，这里有一个有用的图表。这只是您想要/需要抽象多远的问题；如果你不小心，你最终会尝试用二进制编码。XLib 是 SFML 的依赖项，XLib 有它的依赖项。

[GUI 层示意图](https://i.stack.imgur.com/dPxCi.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-14T06:31:09.303

假设简单窗口是指绘图应该出现在屏幕上： [Weston 合成器使用 EGLOutput/EGLDevice 在物理显示设备上显示合成的 Weston 桌面或单个 Wayland 应用程序。](https://docs.nvidia.com/drive/active/5.1.3.0L/nvvib_docs/index.html#page/DRIVE%20Linux%20AGX%20PDK%20Development%20Guide/Windows%20Systems/graphics_wayland.html)

对于用其他厂商硬件学习[GEM](https://lwn.net/Articles/283798/)的绘图可能会有所提示。

# cocoa - UILabel 子类

> ID：11190927
> 
> 赞同：0
> 
> 时间：2012-06-25T14:09:45.983
> 
> 标签：cocoa, subclassing

我知道这是一个新手问题，但我是新手，所以这里是：

我希望在我的应用程序（按钮、标签等）中大量使用 Chalkduster 字体，并尝试子类化 UILabel 来实现这一点。我在 Default.h 中有以下内容：

```
#import <UIKit/UIKit.h>

@interface Default : UILabel
{
UILabel *theLabel;
}

@property (nonatomic, strong) IBOutlet UILabel *theLabel;

@end 
```

这在我的 .m 中：

```
#import "Default.h"

@implementation Default

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {
    // Initialization code

UIFont *custom = [[UIFont alloc] init];

custom = [UIFont fontWithName:@"Chalkduster" size:18];

self.font = custom;

NSLog(@"h");
}
return self;
}

@end 
```

当我在界面生成器中更改类并运行时，我没有看到 Chalkduster 字体。我很感激能帮我完成这个设置，因为我相信它会为我节省很多时间。干杯。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T14:18:58.303

一些需要解决的问题：

1）您混淆了`Default` **成为**标签和`Default` **包含**标签的想法。`self`要进行子类化，请去掉类中的属性，并对而不是`theLabel`（在该`if (self) {`部分内）进行更改。

2）你在无条件之后编码的任何东西`return`都不会被执行......我很惊讶编译器没有抱怨这些语句。

编辑：......还有一件事我刚刚意识到。

3) 如果您从 xib 或情节提要加载，则初始化由`initWithCoder:`而不是完成`initWithFrame:`，因此：

```
- (id)initWithCoder:(NSCoder *)coder {
    self = [super initWithCoder:coder];
    if (self) {
        self.font = [UIFont fontWithName:@"Chalkduster" size:18];
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-25T15:40:27.810

首先，我认为您的子类化不`UILabel`正确。所以我为你制作了教程，解释了如何去做。**您不需要子类化的 IBOutlet 对象。用自己来称呼它。**例如：`self.font = ...`如果你想子类`UILabel`这样做：

创建标题为*myLabel*的新类，如下所示：

**。H**

```
#import <UIKit/UIKit.h>

@interface MyLabel : UILabel {

}

@end 
```

**.m**

```
#import "MyLabel.h"

@implementation MyLabel

-(void)awakeFromNib {

    UIFont *custom = [[UIFont alloc] init];
    custom = [UIFont fontWithName:@"Chalkduster" size:18];

    self.font = custom;
}

@end 
```

现在在情节提要中选择您的标签并转到**身份检查**器并在自定义类中选择上面创建的类。像这样：

![截屏](../Images/47760bd0a639448cb6f3a8a4c808c406.png)

**输出：**

![截图 2](../Images/89a50333e0f854329b2c1863b78570de.png)

**注意：**不要忘记释放自定义，因为您正在分配它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T14:17:25.473

向下移动`return self;`三行。在进行自定义初始化之前从 init 方法返回。

**编辑**以反映评论中的新信息：

从笔尖反序列化视图时，您还必须覆盖`initWithCoder:`

# ember.js - Emberjs：路由器中的条件重定向

> ID：11190928
> 
> 赞同：10
> 
> 时间：2012-06-25T14:09:47.350
> 
> 标签：ember.js, ember-old-router

有没有办法在 Ember.js 路由器中进行条件重定向，而不会破坏路由器的内部一致性？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-25T15:36:05.723

你可以做的（截至今天）是这样的：

```
root: Ember.Route.extend({
    index: Ember.Route.extend({
        enter: function(router) {
            var logged = /* get from appropriated source... */;
            Ember.run.next(function() {
                if (logged) {
                    router.transitionTo('loggedIn');
                } else {
                    router.transitionTo('loggedOut');
                }
            });
        }
    }),

    loggedIn: Ember.Route.extend({
        // ...
    }),

    loggedOut: Ember.Route.extend({
        // ...
    })
}) 
```

不要错过`Ember.run.next`as while you are in `enter`，状态转换始终处于挂起状态，因此您必须在那之后进行转换。

我们将其用于 authent，但您可以想象将其用于您必须的任何条件...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-28T09:31:30.617

新路由器现在包括一个

```
beforeModel 
```

钩子，您可以在转换到路线时覆盖它以包含条件逻辑。beforeModel 钩子将在

```
model 
```

钩子被调用，它被传递了一个

```
transition 
```

目的。您可以决定是否要使用重定向到另一条路线

```
transitionToRoute() 
```

或者如果您不想通过调用重定向，您可以中止转换

```
transition.abort() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T16:06:14.730

根据您要执行的操作，您可能正在寻找条件转换。这包含在[另一个 stackoverflow 问题](https://stackoverflow.com/questions/11617701/ember-js-routing-conditionally-prevent-route-state-change/11673376#11673376)中，其 TLDR 是检查[这个小提琴](http://jsfiddle.net/hjdivad/KsHCN/)。

# ruby-on-rails - 编辑脚手架页面时 Rails 的最佳实践

> ID：11190929
> 
> 赞同：1
> 
> 时间：2012-06-25T14:09:48.123
> 
> 标签：ruby-on-rails, architecture

我有一个最佳实践问题。我有两个班级，公司和类别。他们有一个多对多的关系。当单击一个类别时，我将转到一个显示所有具有所选类别的公司的页面。很直接。

我的问题是：

在过滤控制器中的公司后，我应该列出公司/index.html.erb 上的所有公司吗？

或者

我应该在 category/show.html.erb 页面上列出所有公司吗？

或者

我应该做一个全新的页面，因为它并不真正适合上述两个页面中的任何一个吗？

当您的目标不适合脚手架制作的页面时，您通常会创建一个新页面，还是您非常自由地使用它们？

我正在独自使用 Rails 工作/学习，所以总是会出现很多最佳实践问题。

干杯卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:07:20.970

脚手架是一个起点，因此您应该始终考虑**您**在 Web 应用程序中需要什么。

在你的情况下，我认为所有的例子都很好，但同样，这真的取决于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:12:13.123

如果您只是学习 Rails，请尽可能多地遵守约定。当您不知道所有部分如何协同工作时，脚手架是 Rails 帮助您开始工作的一种方式。

但就像 Oscar 所说，最终你必须决定你的应用程序需要什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:39:44.207

Ruby on Rails 平台带有许多原则，例如 DRY 等。主要部分是 MVC 架构，脚手架所做的就是让您了解模型、视图和控制器生成如何正确使用此 MVC。

当您了解它是如何工作的时，您将能够回答您自己的问题，我可以写下我的想法，但是对于 Rails 开发人员来说理解 MVC 结构是关键，所以我的建议是阅读：

```
http://betterexplained.com/articles/intermediate-rails-understanding-models-views-and-controllers/ 
```

玩得开心

# jquery - jQuery 无法识别动态添加到页面的类

> ID：11190930
> 
> 赞同：9
> 
> 时间：2012-06-25T14:09:53.997
> 
> 标签：jquery, html, css, jquery-selectors, jquery-click-event

我正在做一个项目，我想将同一类的许多元素添加到页面中，并使所有这些类都可以通过 $('selector').click(); 访问。事件处理程序。但是，发生的事情是同一类的动态添加的元素都没有响应点击。

为了让您更好地理解我的意思，我制作了一个示例 jsFiddle，它与我项目中的实际问题非常相似：

链接到 jsFiddle：http: [//jsfiddle.net/8LATf/3/](http://jsfiddle.net/8LATf/3/)

*   “added_element”类的一个元素在加载时已经在页面上。这个元素是可点击的。

*   单击一个按钮，它会使用 append 将“add_element”类的其他元素动态添加到页面中。这些元素都不可点击。

如何使“added_element”类的所有元素都可点击？我猜这与我在事件处理程序中使用的选择器有关，但我无法弄清楚。

任何帮助深表感谢！！！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T14:12:23.517

[您需要委托您的处理程序](http://docs.jquery.com/Frequently_Asked_Questions#Why_doesn.27t_an_event_work_on_a_new_element_I.27ve_created.3F)。最简单的方法是将所有内容委托给`document`using [`.on('click', ...)`](http://api.jquery.com/on)（这是`.live()`内部转换的方式，从 jQuery 1.7 开始）：

```
$(document).on('click','.added_element',function() {
    var id = $(this).attr('id');
    alert(id);    
}); 
```

[​http://jsfiddle.net/mblase75/8LATf/4/](http://jsfiddle.net/mblase75/8LATf/4/)

但是，在您的情况下，您可以委托给`#container`，因为所有添加的元素都出现在其中。在可能的情况下，出于效率原因，最好委托给最接近的 DOM 元素。

```
$('#container').on('click','.added_element',function() {
    var id = $(this).attr('id');
    alert(id);    
}); 
```

[​​​http://jsfiddle.net/mblase75/8LATf/5/](http://jsfiddle.net/mblase75/8LATf/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:14:51.987

您需要在这里使用事件委托，绑定事件的正确方法是：

```
$('#container').on('click', '.added_element', function() {
    var id = $(this).attr('id');
    alert(id);
}); 
```

这是一个[更正的小提琴](http://jsfiddle.net/8LATf/7/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-25T14:13:46.670

当您将事件处理程序附加到“add_element”时，通过脚本动态创建的事件处理程序不在 DOM 中。所以没有绑定到新创建的元素的事件处理程序。

要解决此问题，请将事件处理程序附加到包含 div，并使其查找“added_element”。

jfiddle：http: [//jsfiddle.net/yKJny/](http://jsfiddle.net/yKJny/)

# android - 如何在 maven 和 eclipse 中使用 android 库（apklibs）？

> ID：11190932
> 
> 赞同：14
> 
> 时间：2012-06-25T14:09:58.677
> 
> 标签：android, eclipse, maven, m2e

我正在使用 Eclipse 3.7.2 + Android + Maven + m2e，我对通过 Maven 作为 apklibs 包含的 Android 库有疑问。我用两个项目构建了一个测试场景，*mvntest1*（主项目）和*mvntest2*（我的库项目）。`pom.xml`'s 包含在此文本之后。

到目前为止，一切都很好。我可以通过控制台构建*mvntest2*`$ mvn install`而不会出现任何错误。因此，我的本地 maven 存储库 ( `~/.m2/repository/mvntest2/mvntest2/0.0.1-SNAPSHOT/mvntest2-0.0.1-SNAPSHOT.apklib`) 中有一个 apklib。

但是：包含不起作用。Eclipse在*mvntest1*中不包含 mvntest2 的类*等*。我已经清理、更新了配置和依赖项，但没有任何帮助。

 *我究竟做错了什么？请帮忙。如果缺少某些信息，请询问。

======= mvntest1/pom.xml =====

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>mvntest1</groupId>
<artifactId>mvntest1</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>apk</packaging>
<name>mvntest1</name>

<dependencies>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <version>2.1.2</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>mvntest2</groupId>
        <artifactId>mvntest2</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <type>apklib</type>
    </dependency>
</dependencies>
<build>
    <finalName>${project.artifactId}</finalName>
    <sourceDirectory>src</sourceDirectory>
    <plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <version>3.0.0</version>
            <configuration>
                <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                <resourceDirectory>${project.basedir}/res</resourceDirectory>
                <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
                <sdk>
                    <platform>7</platform>
                </sdk>
                <deleteConflictingFiles>true</deleteConflictingFiles>
                <undeployBeforeDeploy>true</undeployBeforeDeploy>
            </configuration>
            <extensions>true</extensions>
        </plugin>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

====== mvntest2/pom.xml =====

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>mvntest2</groupId>
    <artifactId>mvntest2</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>apklib</packaging>
    <name>mvntest2</name>

    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>2.1.2</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>
    <build>
        <finalName>${project.artifactId}</finalName>
        <sourceDirectory>src</sourceDirectory>
        <plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.0.0</version>
                <configuration>
                    <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                    <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                    <resourceDirectory>${project.basedir}/res</resourceDirectory>
                    <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
                    <sdk>
                        <platform>7</platform>
                    </sdk>
                    <deleteConflictingFiles>true</deleteConflictingFiles>
                    <undeployBeforeDeploy>true</undeployBeforeDeploy>
                </configuration>
                <extensions>true</extensions>
            </plugin>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-25T17:38:46.830

在 ADT Eclipse 中支持 apklib 依赖项是 m2e [-android](http://rgladwell.github.com/m2e-android/)项目正在进行的工作的一部分，尚未完成。请对此问题发表评论以保持更新：

[https://github.com/rgladwell/m2e-android/issues/8](https://github.com/rgladwell/m2e-android/issues/8)

**2013 年 9 月 26 日更新：**适用于 Maven Eclipse (m2e-android) 版本 0.4.3 的 Android 连接器现已发布，完全支持 Android 库。*

# jersey - REST with Java (JAX-RS) 使用 Jersey

> ID：11190934
> 
> 赞同：1
> 
> 时间：2012-06-25T14:10:15.360
> 
> 标签：jersey, jax-rs

我通过 Jersey in Java (JAX-RS) 开发了一个宁静的网络服务：[http ://www.vogella.com/articles/REST/article.html](http://www.vogella.com/articles/REST/article.html)

然后我使用 Hibernate 技术将数据映射到数据库。

最后我开发了一个 android 应用程序来显示数据。

这是我的 Web 服务中的一个方法示例：

```
 @GET
    @Path("/project_id/username/get/{projectId}/{username}/")
    @Consumes(MediaType.APPLICATION_JSON)
    @Produces(MediaType.APPLICATION_JSON)
    public Response deliverableList(@PathParam("projectId") long projectId,
                            @PathParam("username") String username) {
                Session session = HibernateUtil.getSessionFactory().getCurrentSession();
                session.beginTransaction();
                List<Deliverable> list = null;
                try {
                    list= (List<Deliverable>) session.createQuery(
                            "from Deliverable as d where d.project.id= :id").setLong("id", projectId).list();   
                    } catch (HibernateException e) {
                        e.printStackTrace();
                        session.getTransaction().rollback();
                    }
                    session.getTransaction().commit();
                    return Response.status(201).entity(list).build();
                } 
```

如您所见，我使用“Response.status(201).entity(list).build()”来传输数据列表。这是一个好方法吗？如果不是，您对传输数据有什么建议。请用一些代码和示例来支持您的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:54:57.337

1.  Response.ok().enity(object).build() 是返回数据的正确方式
2.  您真的想将您的休眠内容移动到数据访问层......这将很难与您的服务层混合管理
3.  我完全不同意 smcg 关于使用辅助方法将 java 映射到 json。除非您有非常复杂的要求，否则请在您的 bean 上使用 jax-rs 注释：请参阅[http://wiki.fasterxml.com/JacksonAnnotations](http://wiki.fasterxml.com/JacksonAnnotations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:45:38.000

在我看来，您似乎正在依赖某些东西将您的 Java 对象自动映射到 JSON - 可能是杰克逊。我个人不喜欢这种方法。相反，我使用[Jettison](http://jettison.codehaus.org/)并创建自己的从 Java 到 Jettison JSONObject 对象的映射。然后我使用 JSONObject（或 JSONArray）作为实体。我的退货声明将是这样的：

```
return Response.ok().entity(myObjectAsJSON).build(); 
```

在返回事物列表的情况下，使用 JSONArray 而不是 JSONObject。

您需要一个辅助方法来将 Java 对象映射到 JSON。

```
public JSONArray deliverableListToJSON(List<Deliverable> deliverables) 
throws JSONException {
JSONArray result = new JSONArray();
for(Deliverable deliverable : deliverables) {
    JSONObject deliverableJSON = new JSONObject();
    deliverableJSON.put("importantValue", deliverable.getImportantValue());
    result.put(deliverableJSON);
    }
return result;
} 
```

这种方法为您提供了更大的灵活性，并且不会强迫您为所有领域都使用公共 getter 和 setter。

# security - IE 的安全警报删除

> ID：11190936
> 
> 赞同：0
> 
> 时间：2012-06-25T14:10:24.490
> 
> 标签：security, ssl

我有一个可以通过 http (http://mysite.com) 和 https (https://mysite.com) 访问的站点。https 版本包含受保护的内容，而 http 内容是供公众使用的。两个内容都在同一台服务器上。

一些 https 页面包含一些元素，例如托管在 http 页面上的图像。因此，当一个人访问 https 站点时，IE 的安全警报会弹出，说所需的内容包含不安全的数据。知道无论如何都没有风险，我想停止那个弹出窗口。这是否只能通过客户端的 IE 设置来完成，还是我需要对 SSL 证书和配置做一些事情？任何指南都受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:45:04.777

请理解警报的存在是有原因的。现有的 SSL 证书可防止[中间人攻击](https://www.owasp.org/index.php/Man-in-the-middle_attack)*. 如果您从非 https 来源加载资源，那么您原本拥有的中间人保护就会丢失。用户的数据可能仍然被加密，但用户是否将他的所有数据发送到攻击者的计算机并自行解密并不重要！

您需要记住 HTTPS 是一个全有或全无的方案。**一旦您在页面中引入非 HTTPS 元素，您就基本上失去了 SSL 必须提供的所有安全性。**

请在 HTTP 和 HTTPS URL 上安装您的资源（或以某种方式使其可用）并相应地加载它们。如果你不这样做，你会让你的用户面临不必要的风险。

*仅当您拥有完全有效的 SSL 证书时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:11:14.173

IE 并不是唯一会提供这种性质的弹出窗口的浏览器。从记忆中，Firefox 和 Chrome 有类似的警告（比如他们删除了挂锁，或者`https`在地址栏中将其变为红色，而不是绿色）。

让它消失的唯一方法是仅在 https 页面中引用 https 资源。您是否检查过您所指的内容没有安全版本？我使用的所有工具通常都有一个等效的`https://`域。

# drupal - 是否有仅链接到该语言首页的 Drupal 语言切换器？

> ID：11190944
> 
> 赞同：0
> 
> 时间：2012-06-25T14:11:08.227
> 
> 标签：drupal, drupal-7, drupal-modules

在 Drupal 中，语言切换器默认链接到当前语言页面的匹配翻译页面。是否有可能有一个只链接到点击语言的首页而不是翻译的页面/内容的块？如果有一个模块可以实现这个功能，那就太好了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:18:21.210

我不确定是否有此模块，您可以轻松地创建一个新块并输入 html 内容：

```
<p><a class="active" href="/nl">NL</a> | <a href="/en">EN</a> | <a href="/fr">FR</a></p> 
```

如果您以 / 开头链接，则 Drupal 将转到站点的根目录。然后，您可以轻松地将块放置在您想要的任何区域并允许用户更改语言

希望这可以帮助。

# powershell - Powershell 2.0 集合初始化器

> ID：11190957
> 
> 赞同：1
> 
> 时间：2012-06-25T14:11:50.530
> 
> 标签：powershell, collections, powershell-2.0, initializer

在 Powershell 2.0 中，如何使用 C# 3.0 集合初始化程序？（[如何设置内联集合？](https://stackoverflow.com/questions/9083515/how-to-set-collection-inline)）

我试过了

```
$table= New-Object System.Data.DataTable {
    TableName = "my table" ,
    Columns = {
        New-Object System.Data.DataColumn "col1",([string]) ,
        New-Object System.Data.DataColumn "col2",([long]) ,
        New-Object System.Data.DataColumn "col3",([datetime])
    }
} 
```

但是 $table 在这段代码之后有 0 列。

我已经知道如何将列添加到 DataTable 类的 Columns 属性中。我想知道如何直接初始化集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:26:44.927

C# 集合初始值设定项功能在 PowerShell 脚本语言中不可用。PowerShell 确实有一个接近 C# 对象初始化器功能的功能：

```
Add-Type -AssemblyName System.Windows.Forms
new-object system.drawing.point -property @{x = 1; y = 5} 
```

通常，您会发现 C# 的许多功能是 PowerShell 不具备的，包括无三元运算符 (?:) 或空值合并运算符 (??)。没有能力实现新类型，更不用说从另一种类型继承的类型了。您还会发现 PowerShell 可以做 C# 无法做到的事情，提供 REPL 体验、哈希表的内置语法`@{}`、具有命名、位置和可选参数等功能的简单命令行参数解析以及对来自管道输入的绑定参数的支持. 他们都有自己的长处，也有喜欢和不喜欢的东西。:-)

如果您希望看到在未来版本的 PowerShell 中实现的集合初始化程序功能，您可以在[Microsoft Connect 站点](http://connect.microsoft.com/PowerShell)上提交您的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:19:15.940

```
$table = New-Object system.Data.DataTable "my table"

$col1 = New-Object system.Data.DataColumn "col1",([string])
$col2 = New-Object system.Data.DataColumn "col2",([long]) 
$col3 = New-Object system.Data.DataColumn "col3",([datetime])

$table.columns.add($col1)
$table.columns.add($col2)
$table.columns.add($col3) 
```

# ios - 如何使用 assetslibrary 框架将图像保存在与 ipad 上的照片文件夹不同的文件夹中

> ID：11190960
> 
> 赞同：0
> 
> 时间：2012-06-25T14:12:02.320
> 
> 标签：ios, xcode

我是 ipad 编程的新手。目前我正在尝试使用 assetslibrary 框架保存和检索图像。我不想将图像保存到照片文件夹或照片文件夹的相册中，因为那样我将无权访问它们。我正在使用 ios 5。我不想使用 uiimagepicker-popovercontroller 方式来检索它们。我只想将图像放在 ipad 上的自定义文件夹中，然后使用资产检索它们并将它们放入数组中。我将不胜感激任何帮助。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:31:14.657

以下2种保存图像的方法。

保存到一般相册

```
UIImageWriteToSavedPhotosAlbum (imageToSave, nil, nil , nil); 
```

保存到本地APP文件夹

```
NSData *imageData = UIImagePNGRepresentation(imageToSave);
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"3DImage.png"]];
NSFileManager *fileManager = [NSFileManager defaultManager];
[fileManager createFileAtPath:fullPath contents:imageData attributes:nil]; 
```

# sql - Select 语句，需要类似 where 语句中的功能

> ID：11190963
> 
> 赞同：1
> 
> 时间：2012-06-25T14:12:10.987
> 
> 标签：sql, sql-server, sql-server-2000

我在 sql 2000 上。

我正在让所有横幅都显示在网站上。

如果显示的计数！= -1，则始终获取该行。否则，我需要确保它不大于 maxViewCount 列。

所以表格是这样的：

```
bannerID  viewCount maxViewCount
1         -1         0
2         100        200
3         0          200
4         201        200 
```

所以我需要一个返回bannerID 1、2、3的select语句

*   返回 1，因为 viewCount 为 -1（无限制）
*   4 没有返回，因为它的 viewCount > maxViewCount。

这可以通过 SELECT 语句实现还是需要临时表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:15:11.773

```
SELECT * FROM Table WHERE viewCount = -1 OR maxViewCount > viewCount 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:25:31.150

```
SELECT bannerID,
       viewCount,
       maxViewCount
FROM table 
WHERE viewCount = -1
   OR maxViewCount > viewCount 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:15:14.520

这个怎么样：

```
where
    maxViewCount >= viewCount
or  viewCount = -1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T14:16:17.083

**已编辑**

```
 SELECT bannerID,viewCount,maxViewCount
 FROM TABLE
 WHERE viewCount = -1 OR viewCount <= maxViewCount 
```

# c# - c# KeyPressed 不捕获特殊字符

> ID：11190972
> 
> 赞同：1
> 
> 时间：2012-06-25T14:12:47.230
> 
> 标签：c#, winforms, event-handling, keylogger

我正在使用键盘记录器在按键被按下时捕获它们。

它工作正常，但不适用于“@，+£%*¨¨”等特殊字符

```
private void Test_KeyPress(object sender, KeyPressEventArgs e)
{
    if(e.KeyChar == (char)Keys.Return)
        WriteToTextFile(sb.ToString());
    sb.Append(e.KeyChar);
} 
```

如果用户按下退格键，是否也可以删除字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:15:43.423

`OnPreviewKeyDown(PreviewKeyDownEventArgs e)`如果您正在处理控件，请尝试方法。我也有问题，不是所有的东西都被`OnKeyPress`.

# gradle - 在gradle的tomcatRunWar中指定war

> ID：11190977
> 
> 赞同：1
> 
> 时间：2012-06-25T14:12:53.993
> 
> 标签：gradle

我正在使用 gradle 的[tomcat 插件](https://github.com/bmuschko/gradle-tomcat-plugin)，并且在我的 build/tmp/tomcatRun/work/Tomcat/localhost/myWebApp 目录中它是空的。有没有办法让我指定要部署的战争的位置？

我试过

```
[tomcatRun, tomcatRunWar]*.destinationDir= new File("$buildDir/libs").getAbsoluteFile().getPath() 
```

和

```
[tomcatRun, tomcatRunWar]*.warDirectory= new File("$buildDir/libs").getAbsoluteFile().getPath() 
```

**更新**

我在下面添加了构建脚本。当我运行我一直在运行的新任务时

```
gradle build integrationTest 
```

这是来自父 build.gradle 的片段：

```
buildscript {
    repositories {
        add(new org.apache.ivy.plugins.resolver.URLResolver()) {
            name = 'GitHub'
            addArtifactPattern 'http://cloud.github.com/downloads/[organisation]/[module]/[module]-[revision].[ext]'
        }
    }

    dependencies {
        classpath 'bmuschko:gradle-tomcat-plugin:0.9.2'
    }

}

allprojects {
  apply plugin: "java"
  apply plugin: "eclipse"
  apply plugin: "idea"

  ext.springVersion = "3.1.1.RELEASE"
  ext.hibernateVersion = "3.6.7.Final"
  ext.mysqlVersion = "5.1.20"
  ext.tomcatVersion = "7.0.26"
  ext.junitVersion = "4.10"
  ext.httpClientVersion = "4.2"
  ext.pdfboxVersion = "1.7.1"
  ext.resxWebserviceVersion = "10.4.2"

  loadConfiguration()
} 
```

和我的 webapps build.gradle：

```
apply plugin: "maven"
apply plugin: "war"
apply plugin: "tomcat"

def now = new Date()

def cssDir = new File("truexpense-web/src/main/webapp/css").getAbsoluteFile().getPath()
def minCssName = 'all-min.css'
def jsDir = new File("truexpense-web/src/main/webapp/js").getAbsoluteFile().getPath()
def minJsName = 'all-min.js'

ext.requestor = ''
ext.fromAddress = ''
ext.replyAddress = ''
ext.formattedDate = now.format('dd MMM yyy HH:mm')
ext.product = 'Truexpense'

configurations {
  deployerJars
  jasper
  mail
}

dependencies {

  //Compile time but not included dependencies
  providedCompile "javax.servlet:javax.servlet-api:3.0.1"
  providedCompile "org.apache.tomcat:tomcat-jdbc:$tomcatVersion"

  //Compile time dependencies
  compile project(":truexpense-domain")
  compile project(":truexpense-repository")
  compile project(":truexpense-service")
  compile "org.springframework:spring-core:$springVersion"
  compile "org.springframework:spring-web:$springVersion"
  compile "org.hibernate:hibernate-core:$hibernateVersion"
  compile "org.hibernate:hibernate-envers:$hibernateVersion"
  compile "org.hibernate:hibernate-ehcache:$hibernateVersion"
  compile "org.hibernate:hibernate-validator:4.2.0.Final"
  compile "commons-io:commons-io:2.3"
  compile "commons-codec:commons-codec:1.6"
  compile "org.springframework.security:spring-security-core:3.1.0.RELEASE"
  compile "org.springframework.security:spring-security-config:3.1.0.RELEASE"
  compile "org.springframework.security:spring-security-web:3.1.0.RELEASE"
  compile "javax.mail:mail:1.4"
  compile "mysql:mysql-connector-java:$mysqlVersion"
  compile "com.google.visualization:visualization-datasource:1.0.2"
  compile "org.ostermiller:utils:1.07.00"
  compile "net.sf.ofx4j:ofx4j:1.4"
  compile "org.jpedal:jbig2:1"
  compile "org.apache.pdfbox:txp-fontbox:$pdfboxVersion"
  compile "org.apache.pdfbox:txp-jempbox:$pdfboxVersion"
  compile "org.apache.pdfbox:txp-pdfbox:$pdfboxVersion"
  compile "taglibs:taglibs-unstandard:1"
  compile "org.codehaus.jackson:jackson-mapper-asl:1.9.7"
  compile "org.apache.httpcomponents:httpclient:$httpClientVersion"

  //Runtime only dependencies
  runtime "commons-beanutils:commons-beanutils-core:1.8.3"
  runtime "joda-time:joda-time:2.1"
  runtime "org.springframework.security:spring-security-taglibs:3.1.0.RELEASE"
  runtime "org.springframework:spring-beans:$springVersion"
  runtime "org.springframework:spring-context:$springVersion"
  runtime "org.springframework:spring-core:$springVersion"
  runtime "org.springframework:spring-expression:$springVersion"
  runtime "org.springframework:spring-instrument:$springVersion"
  runtime "org.springframework:spring-instrument-tomcat:$springVersion"
  runtime "org.springframework:spring-jdbc:$springVersion"
  runtime "org.springframework:spring-jms:$springVersion"
  runtime "org.springframework:spring-orm:$springVersion"
  runtime "org.springframework:spring-oxm:$springVersion"
  runtime "org.springframework:spring-tx:$springVersion"
  runtime "org.springframework:spring-web:$springVersion"
  runtime "org.springframework:spring-webmvc:$springVersion"
  runtime ("commons-fileupload:commons-fileupload:1.2.2") {
    exclude group: "javax.servlet", module: "javax.servlet-api"
    exclude group: "portlet-api"
  }
  runtime ("javax.servlet:jstl:1.2") {
    exclude group: "javax.servlet", module: "javax.servlet-api"
    exclude group: "javax.servlet", module: "jsp-api"
  }

  //Test only dependencies
  tomcat "org.apache.tomcat:tomcat-dbcp:${tomcatVersion}"
  tomcat "org.apache.tomcat.embed:tomcat-embed-core:${tomcatVersion}",
         "org.apache.tomcat.embed:tomcat-embed-logging-juli:${tomcatVersion}"
  tomcat("org.apache.tomcat.embed:tomcat-embed-jasper:${tomcatVersion}") {
      exclude group: 'org.eclipse.jdt.core.compiler', module: 'ecj'

  }

  //Deployments
  deployerJars "org.apache.maven.wagon:wagon-http:1.0-beta-2"

  [tomcatRun, tomcatRunWar]*.httpPort = 8090
  [tomcatRun, tomcatStop]*.stopPort = 8081
  [tomcatRun, tomcatStop]*.stopKey = 'stopKey'

  task integrationTest(type: Test) {
      include '**/*IntegrationTest.*'

      doFirst {
          tomcatRun.daemon = true
          tomcatRun.execute()
      }

      doLast {
          tomcatStop.execute()
      }
  }

  test {
      exclude '**/*IntegrationTest.*'
  }

}

war {
  baseName='truexpense'
  eachFile {
    if (it.name == 'login_css_include.jsp') {
      it.expand(loginCSS: "login-min.css?t=${now.getTime()}")
    }
    else if (it.name == 'all_css_include.jsp') {
      it.expand(allCSS: "all-min.css?t=${now.getTime()}")
    }
    else if (it.name == 'all_js_include.jsp') {
      it.expand(allJS: "all-min.js?t=${now.getTime()}")
    }
  }
}

task deploy << { deploy() }

task minifyCSS << {
  def files = fileTree(dir: "${cssDir}", includes: [
    "analysis.css",
    "header.css",
    "footer.css",
    "blocks.css",
    "chosen.css",
    "grids.css",
    "space.css",
    "dataTables.css",
    "newCore.css",
    "core.css",
    "skin_clean.css",
    "plugins.css",
    "css3.css",
    "jquery-ui.css",
    "jquery.lightbox-0.5.css",
    "jqueryFileTree.css",
    "jquery.qtip.css",
    "expense.css",
    "report.css",
    "zentab.css"
  ]).getFiles().sort({it.name})
  concatenate("${cssDir}/all.css", files)
  yuiCompressor("${cssDir}/all.css", "${cssDir}/${minCssName}")
  yuiCompressor("${cssDir}/login.css", "${cssDir}/login-min.css")
}

task minifyJS << {
  def files = fileTree(dir: "${jsDir}", excludes:[
    'all*.js',
    'jqtouch*.js'
  ]).getFiles().sort({it.name})
  concatenate("${jsDir}/all.js", files)
  yuiCompressor("${jsDir}/all.js", "${jsDir}/${minJsName}")
}

def yuiCompressor(from, to) {
  ant.java(jar:"tools/yuicompressor-2.4.7.jar", fork: true, failonerror: true) {
    arg(value: from)
    arg(value: "-o")
    arg(value: to)
  }
}

def concatenate(filePath, files) {
  File file = new File(filePath)
  if (file.exists()) {
    file.write("")
  }
  files.each { File f ->
    file.append(f.getText() + '\n')
  }
}

def deploy() {
  println "Deleting ${tomcatHome}/webapps/${war.baseName}"
  delete "${tomcatHome}/webapps/${war.baseName}"
  println "Deleting ${tomcatHome}/work/Catalina/localhost/${war.baseName}"
  delete "${tomcatHome}/work/Catalina/localhost/${war.baseName}"
  println "Copying ${war.archiveName} to ${tomcatHome}/webapps"
  copy {
    from war.archivePath
    into "${tomcatHome}/webapps"
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:54:08.840

你如何引用你`applicationContext.xml`的`web.xml`？如果您使用完整路径 ( `/WEB-INF/classes/applicationContext.xml`)，那么我可能会将其更改为在类路径中搜索它：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:applicationContext.xml</param-value>
</context-param> 
```

# android - 安卓正方体ocr

> ID：11190978
> 
> 赞同：0
> 
> 时间：2012-06-25T14:12:58.383
> 
> 标签：android, ocr, tesseract

我正在尝试使用 tesseract 和本教程 [http://gaut.am/making-an-ocr-android-app-using-tesseract/](http://gaut.am/making-an-ocr-android-app-using-tesseract/)中的代码制作可以读取阿拉伯语的 android OCR， 但每次我修改代码并更改培训阿拉伯语的数据应用程序只是关闭而没有任何错误消息。我的logcat如下

```
06-25 13:14:02.341: I/DEBUG(31):     bef6ceb4  66206e69  
06-25 13:14:03.331: I/BootReceiver(61): Copying /data/tombstones/tombstone_05 to DropBox (SYSTEM_TOMBSTONE)
06-25 13:14:03.361: D/Zygote(33): Process 335 terminated by signal (11)
06-25 13:14:03.371: I/ActivityManager(61): Process com.datumdroid.android.ocr.simple (pid 335) has died.
06-25 13:14:03.371: I/WindowManager(61): WIN DEATH: Window{4054f8f8 com.datumdroid.android.ocr.simple/com.datumdroid.android.ocr.simple.SimpleAndroidOCRActivity paused=false}
06-25 13:14:03.441: I/WindowManager(61): Setting rotation to 0, animFlags=1
06-25 13:14:03.641: I/ActivityManager(61): Config changed: { scale=1.0 imsi=310/260 loc=en_US touch=3 keys=2/1/2 nav=3/1 orien=1 layout=34 uiMode=17 seq=6}
06-25 13:14:04.511: W/IInputConnectionWrapper(344): showStatusIcon on inactive InputConnection
06-25 13:14:06.201: D/dalvikvm(61): GC_EXPLICIT freed 418K, 50% free 4160K/8263K, external 3125K/3903K, paused 77ms
06-25 13:18:06.902: D/SntpClient(61): request time failed: java.net.SocketException: Address family not supported by protocol 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:28:47.197

你知道除了阿拉伯人你还需要英文文件吗？即使您不需要它们来做任何事情，但它们需要出现在您的培训文件夹中

# jquery - jQuery防止图像拖得太远

> ID：11190982
> 
> 赞同：0
> 
> 时间：2012-06-25T14:13:11.173
> 
> 标签：jquery, draggable

我们在 div 中设置了一个图像`overflow: hidden`。我已将其设置为可拖动图像。

如果您尝试将图像拖得太远，它会停在边缘，我们怎么能得到它？

现在它会弹回原位，这会起作用，但并不是我们正在寻找的。

这是一个[jsfiddle](http://jsfiddle.net/richcoy/Ksd6n/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:24:52.273

根据[http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)，您可以通过创建拖动器助手或设置内部 $(this).data('draggable').offset.click 来影响拖动。...不知道这是否是最好的解决方案，但通过在可拖动的内部添加它来测试它（在填充 yPos 之后）：

```
 if(yPos > 0)           
        $(this).data('draggable').offset.click.top += yPos; 
```

这确实在尝试向下拖动时重置了位置（尽管有点生涩）。也应该适用于其他方向。（有些东西告诉我 jquery 拥有更好的属性来实现这一点）防止向右和向下拖动的示例：http: [//jsfiddle.net/Ksd6n/6/](http://jsfiddle.net/Ksd6n/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:20:54.697

jQuery UI draggable 附带了一种约束移动的方法。 [http://jqueryui.com/demos/draggable/#constrain-movement](http://jqueryui.com/demos/draggable/#constrain-movement)

它看起来像这样：

```
$( "#draggable4" ).draggable({ containment: "#demo-frame" }); 
```

# c# - 将 ravendb 查询作为 Func 传递 不工作

> ID：11190983
> 
> 赞同：6
> 
> 时间：2012-06-25T14:13:12.617
> 
> 标签：c#, ravendb

我正在玩 RavenDb，想知道我是否遗漏了一些明显的东西。

事情是，如果我传递这样的查询：

```
 var name = "test";
  posts = RavenSession.Query<Post>()
         .Where(x => x.Tags.Any(y => y == name))
         .OrderByDescending(x => x.CreatedAt)
         .Take(5); 
```

它工作正常，如果我使用 编写等效（IMO）`Func<T, bool>`，它不会崩溃，但查询缺少 where 条件：

```
 var name = "test";     
 Func<Post, bool> selector = x => x.Tags.Any(y => y == name);
 posts = RavenSession.Query<Post>()
         .Where(x => selector(x))
         .OrderByDescending(x => x.CreatedAt)
         .Take(5); 
```

Profiler 输出如下：

> query= start=0 pageSize=5 aggregation=None sort=-CreatedAt

更新：如果我使用表达式而不是 Func，它会起作用，所以我想可能是我记得 Func 和 Linq 有问题，所以写了一个简单的测试：

```
var range = Enumerable.Range(1, 50);

Func<int, bool> selector = x => x == 42;
var filtered = range.Where(x => selector(x)); 
```

所以现在唯一的问题是为什么 Raven Db 查询构建器的行为不同。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T14:18:17.473

尝试`Expression`改用：

```
Expression<Func<Post, bool>> selector = x => x.Tags.Any(y => y == name); 
```

并更改`Where(x => selector(x))`为`Where(selector)`.

An`Expression`是必需的，因为 RavenDb 可以从中构建表达式树，这允许它将逻辑转换为数据库查询。它无法从 a 构建表达式树`Func<Post, bool>`，因此它可能会忽略它、抛出异常或 RavenDb 的创建者指定的任何内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T14:55:09.680

作为对您的更新的回应，在语法上相同`Func<>`的 on`IEnumerable<>`和`Expression<Func<>>`on之间存在显着的行为差异。`IQueryable<>`这不仅是 Raven，还`IQueryable<>`包括任何源，例如 LINQ to SQL 或 Entity Framework。

# java - 在Java中打开后在命令提示符中输入命令？

> ID：11190985
> 
> 赞同：0
> 
> 时间：2012-06-25T14:13:20.440
> 
> 标签：java, runtime, cmd

我想知道打开cmd.exe（命令提示符窗口）后如何输入命令？

我有下面的代码来打开 cmd.exe：

```
Runtime rt= Runtime.getRuntime(); 
Process process= rt.exec("cmd.exe /c start cd c:\\ExecutionSDKTest_10.2.2"); 
```

但是打开后，我想输入“ant compile”或任何一行，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:39:53.463

执行此操作的正常方法是将命令放在脚本中并执行脚本。

您将需要在单独的线程上使用子进程的输出（stdout 和 stderr），否则您的进程将阻塞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:20:12.693

你不需要打开命令行来编译一个正在运行的程序，看看这个[如何在另一个java程序中编译和运行java程序？](https://stackoverflow.com/questions/4842684/how-to-compile-run-java-program-in-another-java-program)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T14:36:44.167

不完全是你问题的答案。但是您可以使用[ProcessBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)设置您的进程当前目录（因此您不再需要调用“cd ...”）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T14:36:52.517

尝试将列表传递给`ProcessBuilder`

```
 final List<String> l = new ArrayList<String>();
    final String cmd = "C:/Program Files/Java/jre6/bin/";
    l.add("C:\\WINNT\\system32\\cmd.exe ");
    l.add("cd " + cmd);
    l.add("dir");
    l.add("java.exe -version"); 
```

# asp.net-mvc-3 - hiddenFor 助手从动作参数中提取 id，而不是 viewModel

> ID：11190989
> 
> 赞同：3
> 
> 时间：2012-06-25T14:13:38.990
> 
> 标签：asp.net-mvc-3, html-helper, html.hiddenfor

我偶然发现了 ASP.Net MVC 的一个非常奇怪的情况，传递一个“id”作为操作参数和一个“id”隐藏表单元素。我有一个带有“id”参数的动作。这个 id 值代表一个项目。我有一个控制器操作，我正在创建一个数据输入表单，用于将员工分配给传入的项目（我创建一个下拉列表，管理员在其中选择要分配给通过的项目的员工）。通过将员工分配给项目，我创建了一个 ProjectEmployee 记录（项目 id、员工 id 和一个表示组合的 id，它是数据库中的一个身份列）。身份列（名为“id”）也是一个隐藏的表单元素。这是必要的，因为我需要能够在以后编辑项目/员工分配。

无论如何，在为项目创建新员工分配时，项目 id（即传递给操作的“id”）将应用于“id”隐藏表单元素。

我将 117 传递给行动。117 是项目 ID。它被设置为应为 0 的“id”隐藏字段，因为 0 表示新项目/员工分配。

**查看模型**

```
id  - unique id that represents the Project/Employee combination
projectId - the "Id" being passed to action
EmployeeId - what the admin is selecting from drop down
rate
startdate
endDate
... 
```

**数据输入表**

```
@Html.HiddenFor(m => m.Id) 
@Html.HiddenFor(m => m.ProjectId)
...
Id: @Model.Id <br />
ProjectId: @Model.ProjectId<br /> 
```

因此，@Html.HiddenFor(m => m.Id) 呈现一个隐藏的表单元素，其值为 117。@Model.Id 向 UI 呈现 0。单步执行代码，我可以直观地看到 Id 属性的值是 0。HiddenFor 是如何让它的电线交叉并拉出 117 的值？

这个错误已经进入生产，所以我手上的数据变得一团糟，因为我没有在数据库表中创建新记录，而是在更新现有记录，因为“Id”属性被错误地设置了从 0（表示新记录）到 117（即 projectId），因此正在更新不同的记录。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T14:18:29.373

> HiddenFor 怎么会越过它并拉动 117 的值？

这是设计使然。TextBoxFor 和 HiddenFor 等所有 HTML 助手在绑定时首先使用 ModelState 的值，然后再使用模型的值。我认为您的控制器操作如下所示：

```
public ActionResult Foo(int id)
{
    SomeModel model = ...
    // At this stage model.Id = 0
    return View(model);
} 
```

问题是默认模型绑定`id`器使用助手使用的键将值添加到 ModelState 中，并且模型属性值被忽略。这不是错误。这就是 HTML 助手的设计方式。当你不知道的时候，一开始有点困惑，但是一旦你习惯了这种行为，你就不会第二次陷入陷阱。

解决此问题的一种可能性是从 ModelState 中删除此值：

```
public ActionResult Foo(int id)
{
    ModelState.Remove("id");
    SomeModel model = ...
    // At this stage model.Id = 0
    return View(model);
} 
```

或者将`Id`模型中的属性重命名为其他名称以避免冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-14T05:50:17.303

作为更改字段名称的替代方法，您可以创建一个新的辅助方法，在评估放入 value 属性的内容时不使用路由值。

我为极其常见的情况创建了这个助手`id`：

```
public static MvcHtmlString HiddenIdFor<TModel, TValue>(this HtmlHelper<TModel> html,
        Expression<Func<TModel, TValue>> expression)
    {
        var value = ModelMetadata.FromLambdaExpression(expression, html.ViewData).Model.ToString();
        var builder = new TagBuilder("input");
        builder.MergeAttribute("type", "hidden");
        builder.MergeAttribute("name", ExpressionHelper.GetExpressionText(expression));
        builder.MergeAttribute("value", value);
        return MvcHtmlString.Create(builder.ToString(TagRenderMode.SelfClosing));

} 
```

然后你可以在模板中使用它：

```
@Html.HiddenIdFor(m => m.Id) 
@Html.HiddenIdFor(m => m.ProjectId) 
```

# ruby-on-rails-3 - Rails 控制台不适用于红绿宝石

> ID：11190991
> 
> 赞同：1
> 
> 时间：2012-06-25T14:13:50.807
> 
> 标签：ruby-on-rails-3, rails-console, redgreen

我在使用 rails 控制台时遇到问题，这是我尝试启动 rails 控制台时遇到的问题：

> backo@speedy:~/ucimrails/simple_app$ rails c --sandbox /home/backo/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251 :in `require': no such file to load -- test/unit/ui/console/testrunner (LoadError) from /home/backo/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in`block in require' from /home/backo/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:236:in `load_dependency' from /home/backo/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in`require' from /home/ backo/.rvm/gems/ruby-1.9.2-p320/gems/redgreen-1.2.2/lib/redgreen.rb:2:in `<top (required)>' from /home/backo/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:68:in`require'来自/home/backo/.rvm/gems/ruby-1.9.2 -p320@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:68:in `block (2 levels) in require' from /home/backo/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:66:in`each' from /home/backo/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler -1.1.4/lib/bundler/runtime.rb:66:in `block in require' from /home/backo/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:55:in`each' 来自 /home/backo/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler /runtime.rb:55:in`require' from /home/backo/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler.rb:119:in`来自 /home/backo/ucimrails/simple_app/config/application.rb:13`<top (required)>' from /home/backo/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.2/lib/rails/commands.rb:39:in`的要求：来自 /home/backo/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.2/ 的要求lib/rails/commands.rb:39:in `<top (required)>' from script/rails:6:in`require' from script/rails:6:in `'

我发现问题是由红绿宝石引起的。当我从 Gemfile 中排除它时，控制台再次工作。但是，有人可以帮我让它与红绿宝石一起使用吗？有趣的是，这仅发生在我的上网本上，当我在台式计算机上工作时，rails 控制台一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:51:43.610

在我的 Gemfile 中指定：

```
gem 'test-unit', '1.2.3' 
```

...似乎适用于 1.9.3 和 Rails 3.2.8。但是，最好将它与更新版本的测试单元一起使用（看起来 2.5.2 是最新的）......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:43:07.807

redgreen gem 不适用于 1.9.2；对于 redgreen 测试输出，您可以尝试

```
require 'test/unit'
require 'test/unit/ui/console/testrunner'   

class Test::Unit::UI::Console::TestRunner
  def guess_color_availability; true; end
end 
```

在你的测试助手左右。