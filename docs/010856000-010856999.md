# StackOverflow 问答 10856000-10856999

# javascript - 估计形式的 Javascript 数学计算

> ID：10856005
> 
> 赞同：0
> 
> 时间：2012-06-01T19:08:15.927
> 
> 标签：javascript, forms, math

我正在创建一个应用程序来估计丝网印刷的工作，但我现在被困住了。这是迄今为止的表格[http://www.redfivedesigns.com/mprintsapp/index2.html](http://www.redfivedesigns.com/mprintsapp/index2.html)。首先，我需要做的是添加正面颜色 + 背面颜色 + 其他颜色 + 价格，然后将该总数乘以数量，并将该总数添加到其余费用中。此外，我需要有关如何将用户定义的价格和数量添加为文本输入的帮助。

```
//Set up an associative array 
//The keys represent the front colors
var front_prices= new Array();
front_prices["None"]=0;
front_prices["One"]=.40;
front_prices["Two"]=1.15;
front_prices["Three"]=1.90;
front_prices["Four"]=2.65;
front_prices["Five"]=3.40;
front_prices["Six"]=4.15;
front_prices["Seven"]=4.90; 

//Set up an associative array 
//The keys represent the back colors
var back_prices= new Array();
back_prices["None"]=0;
back_prices["One"]=.40;
back_prices["Two"]=1.15;
back_prices["Three"]=1.90;
back_prices["Four"]=2.65;
back_prices["Five"]=3.40;
back_prices["Six"]=4.15;
back_prices["Seven"]=4.90; 

//Set up an associative array 
//The keys represent the other colors
var other_prices= new Array();
other_prices["None"]=0;
other_prices["One"]=.40;
other_prices["Two"]=1.15;
other_prices["Three"]=1.90;
other_prices["Four"]=2.65;
other_prices["Five"]=3.40;
other_prices["Six"]=4.15;
other_prices["Seven"]=4.90; 

//The keys represent the front screens
var screens_front_prices= new Array();
screens_front_prices["None"]=0;
screens_front_prices["One"]=15;
screens_front_prices["Two"]=30;
screens_front_prices["Three"]=45;
screens_front_prices["Four"]=60;
screens_front_prices["Five"]=75;
screens_front_prices["Six"]=90;
screens_front_prices["Seven"]=105;

//The keys represent the back screens
var screens_back_prices= new Array();
screens_back_prices["None"]=0;
screens_back_prices["One"]=15;
screens_back_prices["Two"]=30;
screens_back_prices["Three"]=45;
screens_back_prices["Four"]=60;
screens_back_prices["Five"]=75;
screens_back_prices["Six"]=90;
screens_back_prices["Seven"]=105;

//The keys represent the back screens
var screens_other_prices= new Array();
screens_other_prices["None"]=0;
screens_other_prices["One"]=15;
screens_other_prices["Two"]=30;
screens_other_prices["Three"]=45;
screens_other_prices["Four"]=60;
screens_other_prices["Five"]=75;
screens_other_prices["Six"]=90;
screens_other_prices["Seven"]=105;

//Set up an associative array 
//The keys represent the art hours
var art_prices= new Array();
art_prices["One"]=15;
art_prices["Two"]=30;
art_prices["Three"]=45;
art_prices["Four"]=60;
art_prices["Five"]=75;

//Set up an associative array 
//The keys represent the ink color changes
var color_change_prices= new Array();
color_change_prices["None"]=0;
color_change_prices["One"]=5;
color_change_prices["Two"]=10;
color_change_prices["Three"]=15;
color_change_prices["Four"]=20;
color_change_prices["Five"]=25;

//Set up an associative array 
//The keys represent the ink color changes
var pms_color_prices= new Array();
pms_color_prices["None"]=0;
pms_color_prices["One"]=10;
pms_color_prices["Two"]=20;
pms_color_prices["Three"]=30;
pms_color_prices["Four"]=40;
pms_color_prices["Five"]=50;
pms_color_prices["Six"]=60;
pms_color_prices["Seven"]=70;

//This function finds the front price based on the 
//drop down selection
function getfrontPrice()
{
var estimatefrontPrice=0;
//Get a reference to the form id="estimateform"
var theForm = document.forms["estimateform"];
//Get a reference to the select id="front"
var selectedfront = theForm.elements["front"];

//set estimatefront Price equal to value user chose
estimatefrontPrice = front_prices[selectedfront.value];

//finally we return estimatefrontPrice
return estimatefrontPrice;
}

//This function finds the front price based on the 
//drop down selection
function getbackPrice()
{
var estimatebackPrice=0;
//Get a reference to the form id="estimateform"
var theForm = document.forms["estimateform"];
//Get a reference to the select id="front"
var selectedback = theForm.elements["back"];

//set estimatefront Price equal to value user chose
//For example front_prices["Lemon".value] would be equal to 5
estimatebackPrice = back_prices[selectedback.value];

//finally we return estimatefrontPrice
return estimatebackPrice;
}

//This function finds the front price based on the 
//drop down selection
function getotherPrice()
{
var estimateotherPrice=0;
//Get a reference to the form id="estimateform"
var theForm = document.forms["estimateform"];
//Get a reference to the select id="front"
var selectedother = theForm.elements["other"];

//set estimatefront Price equal to value user chose
//For example front_prices["Lemon".value] would be equal to 5
estimateotherPrice = other_prices[selectedother.value];

//finally we return estimatefrontPrice
return estimateotherPrice;
}

//This function finds the front price based on the 
//drop down selection
function getscreens_frontPrice()
{
var estimatescreens_frontPrice=0;
//Get a reference to the form id="estimateform"
var theForm = document.forms["estimateform"];
//Get a reference to the select id="front"
var selectedscreens_front = theForm.elements["screens_front"];

//set estimatefront Price equal to value user chose
estimatescreens_frontPrice = screens_front_prices[selectedscreens_front.value];

//finally we return estimatefrontPrice
return estimatescreens_frontPrice;
}

//This function finds the front price based on the 
//drop down selection
function getscreens_backPrice()
{
var estimatescreens_backPrice=0;
//Get a reference to the form id="estimateform"
var theForm = document.forms["estimateform"];
//Get a reference to the select id="front"
var selectedscreens_back = theForm.elements["screens_back"];

//set estimatefront Price equal to value user chose
estimatescreens_backPrice = screens_back_prices[selectedscreens_back.value];

//finally we return estimatefrontPrice
return estimatescreens_backPrice;
}

//This function finds the back price based on the 
//drop down selection
function getscreens_otherPrice()
{
var estimatescreens_otherPrice=0;
//Get a reference to the form id="estimateform"
var theForm = document.forms["estimateform"];
//Get a reference to the select id="back"
var selectedscreens_other = theForm.elements["screens_other"];

//set estimateback Price equal to value user chose
estimatescreens_otherPrice = screens_other_prices[selectedscreens_other.value];

//finally we return estimatefrontPrice
return estimatescreens_otherPrice;
}

//This function finds the front price based on the 
//drop down selection
function getartPrice()
{
var estimateartPrice=0;
//Get a reference to the form id="estimateform"
var theForm = document.forms["estimateform"];
//Get a reference to the select id="front"
var selectedart = theForm.elements["art"];

//set estimatefront Price equal to value user chose
//For example front_prices["Lemon".value] would be equal to 5
estimateartPrice = art_prices[selectedart.value];

//finally we return estimatefrontPrice
return estimateartPrice;
}

//This function finds the front price based on the 
//drop down selection
function getcolor_changePrice()
{
var estimatecolor_changePrice=0;
//Get a reference to the form id="estimateform"
var theForm = document.forms["estimateform"];
//Get a reference to the select id="front"
var selectedcolor_change = theForm.elements["color_change"];

//set estimatefront Price equal to value user chose
estimatecolor_changePrice = color_change_prices[selectedcolor_change.value];

//finally we return estimatefrontPrice
return estimatecolor_changePrice;
}

//This function finds the front price based on the 
//drop down selection
function getpms_colorPrice()
{
var estimatepms_colorPrice=0;
//Get a reference to the form id="estimateform"
var theForm = document.forms["estimateform"];
//Get a reference to the select id="front"
var selectedpms_color = theForm.elements["pms_color"];

//set estimatefront Price equal to value user chose
estimatepms_colorPrice = pms_color_prices[selectedpms_color.value];

//finally we return estimatefrontPrice
return estimatepms_colorPrice;
}

//rushsPrice() finds the rushs price based on a check box selection
function rushsPrice()
{
var rushPrice=0;
//Get a reference to the form id="estimateform"
var theForm = document.forms["estimateform"];
//Get a reference to the checkbox id="includerushs"
var includerushs = theForm.elements["includerushs"];

//If they checked the box set rushPrice to 5
if(includerushs.checked==true)
{
rushPrice=50;
}
//finally we return the rushPrice
return rushPrice;
}

function less_than_minimumPrice()
{
//This local variable will be used to decide whether or not to charge for the less  
//If the user checked the box this value will be 20
//otherwise it will remain at 0
var less_than_minimumPrice=0;
//Get a refernce to the form id="estimateform"
var theForm = document.forms["estimateform"];
//Get a reference to the checkbox id="includeless_than_minimum"
var includeless_than_minimum = theForm.elements["includeless_than_minimum"];
//If they checked the box set less_than_minimumPrice to 20
if(includeless_than_minimum.checked==true){
less_than_minimumPrice=25;
}
//finally we return the less_than_minimumPrice
return less_than_minimumPrice;
}

function calculateTotal()
{
//Here we get the total price by calling our function
//Each function returns a number so by calling them we add the values they return
var estimatePrice = getfrontPrice() + getbackPrice() + getotherPrice() +  getscreens_frontPrice() + getscreens_backPrice() + getscreens_otherPrice() + getartPrice() + getcolor_changePrice() + getpms_colorPrice() + rushsPrice() + less_than_minimumPrice();

//display the result
var divobj = document.getElementById('totalPrice');
divobj.style.display='block';
divobj.innerHTML = "Total Price For the estimate $"+estimatePrice;

}

function hideTotal()
{
var divobj = document.getElementById('totalPrice');
divobj.style.display='none';
}

{
//If total is 200 for example

var totalPrice = document.getElementById('totalPrice');    
totalPrice.value = "200";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:42:26.820

当您从表单中提取元素时，它们是字符串。您需要将它们转换为数字才能进行数学运算。使用类似的东西：`var numVal = parseFloat(formValue)`

# ruby-on-rails - Why am I getting this bundler error in an existing project that uses Heroku?

> ID：10856008
> 
> 赞同：7
> 
> 时间：2012-06-01T19:08:21.220
> 
> 标签：ruby-on-rails, heroku, bundler

This error happens during just about any rake task:

```
project/Gemfile:4:in `evaluate': undefined method `ruby' for #<Bundler::Dsl:0x007f8274ba6ac8> (NoMethodError)
~/.rvm/gems/ruby-1.9.3-p0-perf/gems/bundler-1.1.4/lib/bundler/dsl.rb:7:in `instance_eval'
~/.rvm/gems/ruby-1.9.3-p0-perf/gems/bundler-1.1.4/lib/bundler/dsl.rb:7:in `evaluate'
~/.rvm/gems/ruby-1.9.3-p0-perf/gems/bundler-1.1.4/lib/bundler/definition.rb:18:in `build'
~/.rvm/gems/ruby-1.9.3-p0-perf/gems/bundler-1.1.4/lib/bundler.rb:135:in `definition'
~/.rvm/gems/ruby-1.9.3-p0-perf/gems/bundler-1.1.4/lib/bundler/cli.rb:220:in `install'
~/.rvm/gems/ruby-1.9.3-p0-perf/gems/bundler-1.1.4/lib/bundler/vendor/thor/task.rb:22:in `run'
.rvm/gems/ruby-1.9.3-p0-perf/gems/bundler-1.1.4/lib/bundler/vendor/thor/invocation.rb:118:in `invoke_task' 
```

**Gemfile:4**

```
 ruby '1.9.3' 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-01T19:08:21.643

This line is required for running multiple versions of ruby on Heroku, but currently requires a prerelease version of bundler to work locally.

```
gem install bundler --pre 
```

See [http://blog.heroku.com/archives/2012/5/9/multiple_ruby_version_support_on_heroku/](http://blog.heroku.com/archives/2012/5/9/multiple_ruby_version_support_on_heroku/)

# redirect - 检测带有查看常规站点选项的移动设备

> ID：10856011
> 
> 赞同：0
> 
> 时间：2012-06-01T19:08:35.493
> 
> 标签：redirect, mobile

这不是一个真正的技术问题，但我基本上有两个站点，一个移动站点和一个常规站点。我目前能够检测到用户使用的设备并将他们重定向到移动网站，这是我常规网站的子目录。问题是我需要一个选项让用户能够查看常规站点，如果他们愿意的话。我的问题是，如果我向他们提供常规网站的链接，他们将自动被重定向回移动网站。这两个站点之间的差异不仅仅是一个可以随意更换的样式表。我想到的解决方案是在他们选择是否需要移动站点或常规站点（我猜是 1/0）之后创建一个带有值的 cookie 变量（如果它们被禁用，则为会话）。基于该变量启用或禁用执行重定向的代码。这是正确的方法吗？还是有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T15:04:13.317

我成功地实施了这种方法，并且工作顺利，足以满足我的口味。在常规站点的 if 中，请务必检查 GET 变量（其值为 1 或 0）以及您设置的 cookie 或会话变量。这样，在他们从移动站点获取初始链接并设置会话或 cookie 变量后，您不必在每个后续链接中都携带 GET 变量。

# sql-server - 从点几何或地理获取 XY 值

> ID：10856014
> 
> 赞同：28
> 
> 时间：2012-06-01T19:08:48.150
> 
> 标签：sql-server

我正在寻找以下 mySQL 语句的 MSSQL 等效项：

```
SELECT Y(location) as Lat, X(location) as Lon from myTable; 
```

我想获取存储为地理数据类型的地理的 X 和 Y 值。

我知道`STAsText(Location) as Location`会给我 WKT...我只需要 X 和 Y 数值。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-01T19:12:16.303

对于地理：

```
SELECT location.Lat as Lat, location.Long as Lon from myTable; 
```

对于几何：

```
SELECT location.STY as Lat, location.STX as Lon from myTable; 
```

# blackberry - 如何为黑莓签署 OTA 文件？

> ID：10856015
> 
> 赞同：2
> 
> 时间：2012-06-01T19:08:48.957
> 
> 标签：blackberry, cordova, blackberry-webworks, ota

如何签署 OTAInstaller 文件夹中的黑莓文件？我正在使用电话间隙，我有一个

`\build\OTAInstall`包含 1 个 jar 文件和大量 .cod 文件的文件夹。

我如何签署这些鳕鱼文件？

我按照[本教程](https://bdsc.webapps.blackberry.com/html5/documentation/ww_publishing/Signing_setup_smartphone_apps_1920010_11.html)介绍了如何设置签名，但我不知道如何实际运行它来签名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:14:20.670

按照该[教程](https://bdsc.webapps.blackberry.com/html5/documentation/ww_publishing/Signing_setup_smartphone_apps_1920010_11.html)中的步骤操作后，转到...

[https://build.phonegap.com/people/edit#pane=signing](https://build.phonegap.com/people/edit#pane=signing)

然后将 BlackBerry 签名密钥添加到 Phonegap

* * *

CSK 文件和 DB 文件可在以下位置找到

```
C:\Program Files (x86)\Research In Motion\BlackBerry WebWorks SDK 2.3.1.5\bin 
```

sigtool.csk

sigtool.db

将 BlackBerry 签名密钥设置为默认值，再次运行构建。

* * *

这是将密钥设置为默认值后我的签名页面的样子。

![在此处输入图像描述](../Images/f0305ecfefe004a10a5559e07c622f70.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:02:39.657

在命令行中进入 webworks sdk 的 /bin 目录，例如 C:\Program Files (x86)\Research In Motion\BlackBerry WebWorks SDK 2.3.1.5\bin

然后运行签名工具：java -jar SignatureTool.jar

打开您的任何 .cod 文件并使用“请求签名”，它将对您的标准和 otainstall 文件进行签名

确保使用 java 6 而不是 java 7 运行该工具，它会在以后崩溃

# sql - 你能有一个没有 ON 关键字的 INNER JOIN 吗？

> ID：10856016
> 
> 赞同：18
> 
> 时间：2012-06-01T19:08:55.483
> 
> 标签：sql, oracle, join, oracle11g

在调试一些 Oracle 代码时，我遇到了这个查询：

```
SELECT TPM_TASK.TASKID FROM TPM_GROUP 
INNER JOIN TPM_USERGROUPS ON TPM_GROUP.GROUPID = TPM_USERGROUPS.GROUPID 
INNER JOIN TPM_TASK
INNER JOIN TPM_GROUPTASKS ON TPM_TASK.TASKID = TPM_GROUPTASKS.TASKID 
INNER JOIN TPM_PROJECTVERSION ON TPM_TASK.PROJECTID = TPM_PROJECTVERSION.PROJECTID AND TPM_TASK.VERSIONID = TPM_PROJECTVERSION.VERSIONID 
INNER JOIN TPM_TASKSTAGE ON TPM_TASK.STAGEID = TPM_TASKSTAGE.STAGEID 
INNER JOIN TPM_PROJECTSTAGE ON TPM_PROJECTVERSION.STAGEID = TPM_PROJECTSTAGE.STAGEID 
ON TPM_GROUP.GROUPID = TPM_GROUPTASKS.GROUPID 
```

我对这条线感到困惑：

```
INNER JOIN TPM_TASK 
```

我以前没见过`JOIN`没有`ON`条款的。同样令人困惑的是这条线：

```
ON TPM_GROUP.GROUPID = TPM_GROUPTASKS.GROUPID 
```

这似乎是一个`ON`没有任何匹配的随机子句`JOIN`。查询运行没有任何错误，并返回一堆数据，因此很明显语法是完全有效的。有人可以阐明这里到底发生了什么吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-01T19:16:42.573

Small universe... I ran across a tool generating this syntax yesterday and was rather flummoxed.

Apparently,

```
FROM a 
     INNER JOIN b
     INNER JOIN c ON (b.id = c.id)
     ON (a.id = c.id) 
```

is equivalent to a nested subquery

```
FROM a
     INNER JOIN (SELECT <<list of columns>>
                   FROM b
                        INNER JOIN c ON (b.id=c.id)) c
             ON (a.id = c.id) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T19:16:04.900

I think that this is only a problem of ordering your query (since there are only `INNER JOIN`s, the order of them is not really that important). I rearrenged your query and now it looks like this:

```
SELECT TPM_TASK.TASKID 
FROM TPM_GROUP 
INNER JOIN TPM_USERGROUPS 
    ON TPM_GROUP.GROUPID = TPM_USERGROUPS.GROUPID 
INNER JOIN TPM_GROUPTASKS 
    ON TPM_GROUP.GROUPID = TPM_GROUPTASKS.GROUPID
INNER JOIN TPM_TASK
    ON TPM_TASK.TASKID = TPM_GROUPTASKS.TASKID 
INNER JOIN TPM_PROJECTVERSION 
    ON TPM_TASK.PROJECTID = TPM_PROJECTVERSION.PROJECTID 
    AND TPM_TASK.VERSIONID = TPM_PROJECTVERSION.VERSIONID 
INNER JOIN TPM_TASKSTAGE 
    ON TPM_TASK.STAGEID = TPM_TASKSTAGE.STAGEID 
INNER JOIN TPM_PROJECTSTAGE 
    ON TPM_PROJECTVERSION.STAGEID = TPM_PROJECTSTAGE.STAGEID 
```

Does it make more sense to you now?, it does to me.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-01T19:22:05.643

如果里面有括号就好了...

```
SELECT TPM_TASK.TASKID 
FROM 
    TPM_GROUP 
    INNER JOIN TPM_USERGROUPS ON TPM_GROUP.GROUPID = TPM_USERGROUPS.GROUPID 
    INNER JOIN (
        TPM_TASK
        INNER JOIN TPM_GROUPTASKS ON TPM_TASK.TASKID = TPM_GROUPTASKS.TASKID 
        INNER JOIN TPM_PROJECTVERSION ON TPM_TASK.PROJECTID = TPM_PROJECTVERSION.PROJECTID 
            AND TPM_TASK.VERSIONID = TPM_PROJECTVERSION.VERSIONID 
        INNER JOIN TPM_TASKSTAGE ON TPM_TASK.STAGEID = TPM_TASKSTAGE.STAGEID 
        INNER JOIN TPM_PROJECTSTAGE ON TPM_PROJECTVERSION.STAGEID = TPM_PROJECTSTAGE.STAGEID 
    ) ON TPM_GROUP.GROUPID = TPM_GROUPTASKS.GROUPID 
```

但由于它们都是内部连接，我同意 Lamak 的回答。

# javascript - if 语句中的两个条件（jQuery）

> ID：10856020
> 
> 赞同：2
> 
> 时间：2012-06-01T19:09:02.940
> 
> 标签：javascript, jquery

我正在尝试添加一个 if 语句来检查图像是否大于 199px 以及它是否没有 <a> 父元素。 **这有效：**

```
 $('div.post_body').each(function() {
    $(this).find('img').each(function () {
        var img = $(this);
            if (img.is('a') !== true) {
                img.wrap($('<a/>').attr('href', img.attr('src')).addClass('lightview limg'));
            }
    });
}); 
```

**这有效**

```
 $('div.post_body').each(function() {
    $(this).find('img').each(function () {
        var img = $(this);
            if (img.width() > 199) {
                img.wrap($('<a/>').attr('href', img.attr('src')).addClass('lightview limg'));
            }
    });
}); 
```

***这不起作用：***

```
 $('div.post_body').each(function() {
    $(this).find('img').each(function () {
        var img = $(this);
            if ((img.width() > 199) && (img.is('a') !== true)) {
                img.wrap($('<a/>').attr('href', img.attr('src')).addClass('lightview limg'));
            }
    });
}); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T19:28:37.840

因此，您希望所有`div`超出特定尺寸的图像都直接位于其中？

```
$("div.post_body > img").wrap(function(){
    if ( $(this).width() > 199 ) {
        return $("<a>").attr("href", this.src).addClass("lightview limg");
    }
});​ 
```

演示：http: [//jsfiddle.net/BQAZH/1/](http://jsfiddle.net/BQAZH/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T19:28:52.517

通过查看代码中存在的逻辑，您似乎正在尝试测试是否`img`被包裹`<a></a>`，如果不是，则包裹它。

**如果是这样，您可以优化您的代码：**

```
$('div.post_body img').each(function() {
  var $img = $(this);

  if (($img.width() > 199) && ($img.parent('a').length)) {
    $img
      .wrap($('<a/>').attr('href', $img.attr('src')).addClass('lightview limg'));
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T19:30:51.613

您可以检查其父元素是否为锚元素：

```
$('div.post_body img').each(function() {
    var img = $(this);
        if ((img.width() > 199) && (img.parent().get(0).tagName != 'a')) {
            img.wrap($('<a/>').attr('href', img.attr('src')).addClass('lightview limg'));
        }
}); 
```

# c# - 如何更新 ListView 的选中项？

> ID：10856021
> 
> 赞同：5
> 
> 时间：2012-06-01T19:09:10.790
> 
> 标签：c#, winforms, listview

我有一个显示多行 ListViewItems 的 ListView。用户可以通过单击“编辑”后打开的对话框来编辑其中一项。当对话框关闭时，我想修改选定的 ListViewItem 以使其反映新设置。

以下是我目前更新我的项目的方式：

```
private void btnEditSnmpV3Setting_Click(object sender, EventArgs e)
{
    if (lstVwSNMPv3Settings.SelectedItems.Count > 0)
    {
        ListViewItem selectedItem = lstVwSNMPv3Settings.SelectedItems[0];
        NetworkDiscoverySnmpSetting settings = (NetworkDiscoverySnmpSetting)selectedItem.Tag;
        NetworkDiscoverySnmpV3SettingsDialog dialog = new NetworkDiscoverySnmpV3SettingsDialog(settings);

        //Pass in the owner for centering of dialog.
        if (dialog.ShowDialog(this) == DialogResult.OK)
        {
            selectedItem.SubItems.Clear();
            selectedItem.Text = settings.SnmpV3Username;
            selectedItem.SubItems.Add(settings.SecurityMode.ToString());
            selectedItem.SubItems.Add(settings.AuthenticationProtocol.ToString());
            selectedItem.SubItems.Add(settings.PrivacyProtocol.ToString());
            selectedItem.Tag = settings;
        }
    }
} 
```

我发现这是一个糟糕的解决方案，因为如果我的 ListView 的列数发生变化，我需要在多个地方触摸代码。

`NetworkDiscoverySnmpSetting`我通过提供一个实用方法在“添加”事件（而不是“编辑”）期间处理了这个代码重用问题：

```
public ListViewItem ToListViewItem()
{
    ListViewItem listViewItem = new ListViewItem();
    listViewItem.Text = SnmpV3Username;
    listViewItem.SubItems.Add(SecurityMode.ToString());
    listViewItem.SubItems.Add(AuthenticationProtocol.ToString());
    listViewItem.SubItems.Add(PrivacyProtocol.ToString());
    listViewItem.Tag = this;
    return listViewItem;
} 
```

像这样使用：

```
private void btnAddSnmpV3Setting_Click(object sender, EventArgs e)
{
    NetworkDiscoverySnmpSetting settings = new NetworkDiscoverySnmpSetting(NetworkDiscovery.ID);
    NetworkDiscoverySnmpV3SettingsDialog dialog = new NetworkDiscoverySnmpV3SettingsDialog(settings);
    //Pass in the owner for centering of dialog.
    if (dialog.ShowDialog(this) == DialogResult.OK)
        lstVwSNMPv3Settings.Items.Add(settings.ToListViewItem());
} 
```

不幸的是，ListView.SelectedItems 不允许集合修改。因此，这不会编译：

```
lstVwSNMPv3Settings.SelectedItems[0] = settings.ToListViewItem(); 
```

我应该如何更改我的第一个代码片段，以便在 ListView 的列更改时不需要在多个位置更新我的代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T19:56:21.667

您可以修改元素本身而不是用另一个替换它，因为 ListViewItem 是一个类，所以它是一个引用类型。

为此，请按照下列步骤操作：

*   获取当前选定的项目并将其保存到变量中，如下所示：`ListViewItem selectedItem = lstVwSNMPv3Settings.SelectedItems[0];`
*   将您的`ToListViewItem`方法修改为`void ToListViewItem(ListViewItem listViewItem)`（返回 void 并将`ListViewItem`对象作为参数并修改它而不是创建新对象。它还应该修改现有子项的属性而不是创建新子项。它看起来或多或少像这样：

    ```
    public void ToListViewItem(ListViewItem listViewItem)
    {
        listViewItem.Text = SnmpV3Username;
        listViewItem.SubItems[0].Text = SecurityMode.ToString();
        listViewItem.SubItems[1].Text = AuthenticationProtocol.ToString();
        listViewItem.SubItems[2].Text = PrivacyProtocol.ToString();
        listViewItem.Tag = this;
    } 
    ```

*   称呼`ToListViewItem(selectedItem);`

*   您不必将修改后的项目分配回集合，因为您使用引用，这意味着您只需修改`ListView`

我做了一个快速测试，该方法似乎可以毫无问题地修改现有项目的文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T19:15:43.420

`ListViewItem`s have a `bool Selected` property that you can toggle to make them selected or not selected.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-05T21:33:26.293

一个更简单的解决方案，对我有用：

```
lstVwSNMPv3Settings.Items[lstVwSNMPv3Settings.SelectedIndices[0]] = myNewItem; 
```

但请注意首先确保选择了一个项目：

```
if (lstVwSNMPv3Settings.SelectedIndices.Count > 0) { ... } 
```

# javascript - 用户选择是使用 javascript/jquery 的子元素吗

> ID：10856022
> 
> 赞同：1
> 
> 时间：2012-06-01T19:09:10.977
> 
> 标签：javascript, jquery, html

如何检测用户选择（用鼠标突出显示）是否在某个元素的内部/子元素中？

例子：

```
<div id="parent">
   sdfsdf
   <div id="container">
       some 
      <span>content</span>
   </div>
   sdfsd
</div> 
```

伪代码：

```
if the entire range of window.getSelection().getRangeAt(0) is within/a child of #container
 return true;
else
 return false; 
```

更新：我认为这可以通过查看范围中最高元素的每个父元素来完成，看看是否与#container 匹配。我只需要帮助用 JavaScript 编写这个。

# iphone - 更改 TabBar 中的选项卡时 UIButtons 文本变暗

> ID：10856024
> 
> 赞同：0
> 
> 时间：2012-06-01T19:09:21.317
> 
> 标签：iphone, objective-c, ios, uibutton

我不知道为什么我会遇到这个问题。

详细信息 - 我的应用程序中有一个标签栏控制器。在一个选项卡上，我有一个包含一些按钮的表单。我正在设置这些按钮的标题。现在，当我更改选项卡并返回同一个选项卡时，所有按钮标题都会变暗。

我也附上屏幕截图。

任何帮助，将不胜感激。

谢谢 ！！

![第一的](../Images/d2afbb6584c99e141ea4618bb47e442a.png) ![第二](../Images/e8f1b685deafb68e1952e2211f2411a3.png) ![在此处输入图像描述](../Images/b692988ee378f0cddb374e4a2064bfdb.png)

编辑：这是我如何创建按钮的代码 -

```
-(void)viewWillAppear:(BOOL)animated
{
    float yFrame =310.0f;
            for(int i =0;i<7;i++){

                openPickerButton=[UIButton buttonWithType:UIButtonTypeCustom];
                openPickerButton.frame = CGRectMake(29.0, yFrame+10.0, 280.0, 48.0);
                openPickerButton.tag=i;
                openPickerButton.backgroundColor=[UIColor clearColor];
                [openPickerButton setTitle:[formButtonTitle objectAtIndex:openPickerButton.tag] forState:UIControlStateNormal];

                openPickerButton.titleLabel.font=[UIFont fontWithName:@"Helvetica" size:16];
                [openPickerButton setTitleColor:[UIColor lightGrayColor] forState:UIControlStateNormal];
                openPickerButton.contentHorizontalAlignment=UIControlContentHorizontalAlignmentLeft;
                openPickerButton.showsTouchWhenHighlighted = YES;
                [openPickerButton addTarget:self action:@selector(PickChoreButtonAction:) forControlEvents:UIControlEventTouchUpInside];
                [setPreferencesFormScrollView addSubview:openPickerButton];
                yFrame+=60.0f;
            }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:18:00.917

而不是在 viewWillAppear 方法中创建按钮，而是在 viewDidLoad 方法中创建按钮

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T19:32:38.713

那么在 viewDidLoad 中，您的对象会被调用一次。（一旦视图被加载。停止）在 viewWillAppear 中，每次视图出现时它们都会被调用。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    float yFrame =310.0f;
            for(int i =0;i<7;i++){

                openPickerButton=[UIButton buttonWithType:UIButtonTypeCustom];
                openPickerButton.frame = CGRectMake(29.0, yFrame+10.0, 280.0, 48.0);
                openPickerButton.tag=i;
                openPickerButton.backgroundColor=[UIColor clearColor];
                [openPickerButton setTitle:[formButtonTitle objectAtIndex:openPickerButton.tag] forState:UIControlStateNormal];

                openPickerButton.titleLabel.font=[UIFont fontWithName:@"Helvetica" size:16];
                [openPickerButton setTitleColor:[UIColor lightGrayColor] forState:UIControlStateNormal];
                openPickerButton.contentHorizontalAlignment=UIControlContentHorizontalAlignmentLeft;
                openPickerButton.showsTouchWhenHighlighted = YES;
                [openPickerButton addTarget:self action:@selector(PickChoreButtonAction:) forControlEvents:UIControlEventTouchUpInside];
                [setPreferencesFormScrollView addSubview:openPickerButton];
                yFrame+=60.0f;
            }
} 
```

# java - 在java中使用正则表达式分割文本的问题

> ID：10856028
> 
> 赞同：1
> 
> 时间：2012-06-01T19:09:37.167
> 
> 标签：java, regex

对我对正则表达式世界的理解不佳表示歉意。我正在尝试使用正则表达式拆分文本。这就是我现在正在做的事情。请考虑以下字符串

```
 String input = "Name:\"John Adam\"  languge:\"english\"  Date:\" August 2011\"";
Pattern pattern = Pattern.compile(".*?\\:\\\".*?\\\"\\s*");
Matcher matcher = pattern.matcher(input);
List keyValues = new LinkedList();
while(matcher.find()){
   System.out.println(matcher.group());
   keyValues.add(matcher.group());
}
System.out.println(keyValues); 
```

我得到了正确的输出，这就是我正在寻找的。

```
 Name:"John Adam"  
languge:"english"  
Date:" August 2011" 
```

现在，我正在努力使它有点通用。例如，如果我在输入字符串中添加另一个模式。我以不同的模式添加了一个新值 Audience:(user)，即 " 被 ();

```
 String input = "Name:\"John Adam\"  languge:\"english\"  Date:\" August 2011\"  Audience:(user)"; 
```

这将是什么通用模式？对不起，如果这听起来太蹩脚。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T19:44:17.900

第 1 步：删除大部分斜杠 - 您不需要转义引号或冒号（它们只是另一个普通字符）

试试这个模式：

```
".*?:[^\\w ].*?[^\\w ]\\s*" 
```

它适用于所有非单词/空格字符作为分隔符，适用于您的测试用例，并且适用于`name:'foo'`等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T19:16:09.890

You can always use OR operator `|`

```
Pattern pattern = Pattern.compile("(.*?\\:\\\".*?\\\"\\s*)|(.*?\\:\\(.*?\\)\\s*)"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T19:16:19.220

First of all I should point out that regular expressions are NOT a magic bullet. By that I mean that while they can be incredibly flexible and useful in some cases they don't solve all problems of text matching (for instance parsing XML-like markup)

However, in the example you gave, you could use the `|` syntax to specify an alternate pattern to match. An example might be:

```
Pattern pattern = Pattern.compile(".*?\\:(\\\".*?\\\"|\\(.*?\\))\\s*"); 
```

This section in parentheses: `(\\\".*?\\\"|\\(.*?\\))` can be thought of as: find a pattern that matches `\\\".*?\\\"` or `\\(.*?\\)` (and remember what the backslashes mean - they are escape characters.

Note though that this approach, while flexible, requires you to add a specific case quite literally so it's not truly generic in the absolute sense.

*NOTE*

To better illustrate what I meant by not being able to craft a truly generic solution, here's a more generic pattern that you could use:

```
Pattern pattern = Pattern.compile(".*?\\:[\\\"(]{1,2}.*?[\\\")]{1,2}\\s*"); 
```

The pattern above uses character classes and it's more generic but while it will match your examples, it will also match things like: `blah:\stuff\` or `blah:"stuff"` or even hybrids like `blah:\"stuff)` or worse `blah:((stuff""`

# sql - CRM 2011 中的 CRMAF 过滤

> ID：10856035
> 
> 赞同：3
> 
> 时间：2012-06-01T19:10:13.933
> 
> 标签：sql, dynamics-crm-2011, dynamics-crm

我正在尝试在 CRM 2011 的报告中使用 CRM CRMAF 过滤器。但我找不到任何有关如何执行此操作的示例。需要将查询更改为什么来过滤报价以及需要添加什么参数。

```
SELECT           Quote.QuoteNumber, Quote.Name, Quote.CreatedOn, Quote.CustomerIdName, Quote.OwnerIdName, SystemUser.Address1_Telephone1, 
                         SystemUser.InternalEMailAddress, Quote.Name AS Expr1, Quote.BillTo_Line1, Quote.BillTo_Line2, Quote.BillTo_Line3, Quote.BillTo_StateOrProvince, 
                         Quote.BillTo_PostalCode, Quote.BillTo_Telephone, Quote.BillTo_Fax, QuoteDetail.LineItemNumber, QuoteDetail.Quantity, QuoteDetail.ProductId, 
                         QuoteDetail.ProductDescription, QuoteDetail.BaseAmount, QuoteDetail.ExtendedAmount, Quote.DiscountAmount, Quote.TotalTax, Quote.TotalAmount, 
                         Quote.RevisionNumber
FROM            Quote INNER JOIN
                         QuoteDetail ON Quote.QuoteId = QuoteDetail.QuoteId INNER JOIN
                         SystemUser ON Quote.OwnerId = SystemUser.SystemUserId 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T19:39:38.870

这是您可以查看的一个参考：http: [//blogs.msdn.com/b/crm/archive/2009/03/06/microsoft-dynamics-crm-pre-filtering-tips.aspx](http://blogs.msdn.com/b/crm/archive/2009/03/06/microsoft-dynamics-crm-pre-filtering-tips.aspx)

您最终会使用 CRM 为每个实体创建的特殊过滤视图。

```
SELECT name, accountnumber 
FROM FilteredAccount as CRMAF_Account 
```

另一个参考：http: [//msdn.microsoft.com/en-us/library/gg309722](http://msdn.microsoft.com/en-us/library/gg309722)

# perl - Perl 和 MongoDB：将对象数组插入键值对

> ID：10856039
> 
> 赞同：1
> 
> 时间：2012-06-01T19:10:28.840
> 
> 标签：perl, mongodb

我想使用 perl 将以下 BSON 结构插入到我的 MongoDB 中：

```
{"name" : "BOB", "stuff" : [{"area1": [1,2,3,4,5]}, {"area2": [5,6,7,8,9]}]} 
```

但是很难找到一个很好的例子。我尝试了以下方法：

```
#!/usr/bin/perl
use MongoDB;
use MongoDB::Database;
use MongoDB::OID;

my $conn = MongoDB::Connection->new;
my $db = $conn->test;
my $users = $db->real_time10;

$users->insert
({
    "name" => "BOB",
    "stuff" => 
              "area1" => [1,2,3,4,5],
              "area2" => [5,6,7,8,9]
}); 
```

在 mongo shell 中查询时大致输出：

> db.real_time10.find()

```
{ "_id" : ObjectId("4fc912fa000207ec08000000"), "ARRAY(0xa5bdd4)" : "area2", "A
RAY(0x2f2e844)" : null, "name" : "BOB", "stuff" : "area1" } 
```

到底是怎么回事？有没有一种简单的方法可以做到这一点？

我的梦想/期望的输出是：

```
> db.real_time10.find()

{ "_id" : ObjectId("4fc912fa000207ec08000000"), "stuff" : {"area1" : [1,2,3,4,5],   
"area2": [5,6,7,8,9]}, "name" : "BOB" } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T19:42:28.183

您在示例代码中缺少匿名数组构造函数（方括号） - 但将它们包含在您的 BSON 示例中。要获得所需的输出，请尝试：

```
$users->insert({
    "name" => "BOB",
    "stuff" => {
        "area1" => [1,2,3,4,5],
        "area2" => [5,6,7,8,9]
    }
}); 
```

通过排除数组构造函数，它使用提供的数组键、值对构建散列，因此它将被解析为以下内容（与您的数据转储匹配）：

```
{
    "name" => "BOB",
    "stuff" => "area1",
    [1,2,3,4,5] => "area2",
    [5,6,7,8,9] => undef
} 
```

注意：标量上下文中的数组引用将被视为类似“ARRAY(0x6052b8)”的字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T20:00:52.637

啊，是这样的：

```
#!/usr/bin/perl
use MongoDB;
use MongoDB::Database;
use MongoDB::OID;

my $conn = MongoDB::Connection->new;
my $db = $conn->test;
my $users = $db->real_time10;

$users->insert({
    "name" => "BOB",
    "stuff" => 
          {"area1" => [1,2,3,4,5],
          "area2" => [5,6,7,8,9]}

}); 
```

这输出：

```
{ "_id" : ObjectId("4fc91f110064e9d40b000000"), "name" : "BOB", "stuff" : { "are
a2" : [ 5, 6, 7, 8, 9 ], "area1" : [ 1, 2, 3, 4, 5 ] } } 
```

# android - Imageview 向左浮动

> ID：10856040
> 
> 赞同：1
> 
> 时间：2012-06-01T19:10:30.343
> 
> 标签：android, layout, imageview

如何创建浮动到 textView 左侧的 ImageView，类似于 html：

```
<div>
<img src="src" style="float:left"> Text here.....
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:19:12.620

[Android 中确实](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3adrawableLeft)没有浮动元素的概念，但是您可以使用`TextView`. 例子：

否则，对于更复杂的布局，父视图决定其子视图的布局方式。例如，与 a 的概念不同，`div`它简单地将子组件包装起来并使用子组件的`float`和`display`属性来确定事物的外观，Android 具有更复杂的父视图（`ViewGroup`称为 s，因为这是超类）来控制事物.

查看[LinearLayout](http://developer.android.com/resources/tutorials/views/hello-linearlayout.html)和[RelativeLayout](http://developer.android.com/resources/tutorials/views/hello-relativelayout.html)的文档以获取一些示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T19:24:36.110

视图的位置取决于您使用的布局类型。如果您使用的是RelativeLayout并且想要浮动此Relativelayout内的视图（在您的情况下为ImageView），您可以使用ImageView的属性（android：layout_toLeftOf =“”）指定您的视图ID双引号之间的文本视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T19:29:03.587

你有两个选择：

*   使用 LinearLayout，将方向设置为水平，以便图像在前，然后是其余图像。

*   使用RelativeLayout，您可以使用android:layout_toLeftOft, android:layout_toRightOf, android:layout_below 或android:layout_alignParentTop, ...

但是，对于某些操作，它不像 CSS 那样灵活，例如，在图像周围环绕文本并不容易实现。

# ruby-on-rails - has_many 关系中的 Active Record 对象何时保存？

> ID：10856041
> 
> 赞同：4
> 
> 时间：2012-06-01T19:10:34.913
> 
> 标签：ruby-on-rails, activerecord, has-many, object-persistence

我正在使用 Rails 1.2.3（是的，我知道）并且`has_many`对对象持久性的工作方式感到困惑。

为了举例，我将使用它作为我的声明：

```
class User < ActiveRecord::Base
    has_many :assignments
end

class Assignment < ActiveRecord::Base
    belongs_to :user
end 
```

据我了解，除其他外，这会生成一个方法`User#assignments.build`，该方法创建一个`Assignment`对象，该对象`user_id`是接收实例的`id`（并且其其他字段在参数中指定），但不会将此对象保存在数据库中。该对象可以稍后通过调用来保存`Assignment#save!`。

但是，我一直将其用作教程和参考的 The Pragmatic Programmers' *Agile Web Development with Rails, Second Edition说：*

> 如果父对象存在于数据库中，则将子对象添加到集合中会自动保存该子对象。

这里似乎有矛盾。我想知道的是：

*   如果我这样做`some_user.assignments.build`，`Assignment`对象是否保存？
*   如果我这样做`some_user.assignments << Assignment.new`，`Assignment`对象是否保存？
*   如果我这样做`some_user.assignments << Assignment.create`了，是进行了两次数据库调用，还是仅进行了一次？如果我`Assignment`在创建对象和添加对象之间修改对象会`some_user.assignments`怎样？
*   如果我`save!`的`Assignment`对象`User`尚未保存在数据库中，会发生什么？

PS我不只是`User#assignments.create`用于所有事情的原因是因为它不允许我将初始化外包给外部方法，而我希望能够做到这一点。我也不想多次访问数据库。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-01T19:35:29.187

*注意：下面所有的控制台测试都是在 Rails 3 中运行的。在 Rails 1 中你可能会得到不同的输出，你必须自己运行测试来比较。*

如果您想了解 Active Record 幕后发生的事情，那么使用方便的 rails 控制台是非常有价值的。以下是未保存对象的情况：

```
u = User.new
#<User id: nil, name: nil, created_at: nil, updated_at: nil> 

u.assignments.build(:name => "example")
#<Assignment id: nil, name: "example", user_id: nil, created_at: nil, updated_at: nil>

u.save
#SQL (0.2ms)  INSERT INTO `users` (`created_at`, `name`, `updated_at`) VALUES ('2012-06-01 19:25:45', NULL, '2012-06-01 19:25:45')
#SQL (0.2ms)  INSERT INTO `assignments` (`created_at`, `name`, `updated_at`, `user_id`) VALUES ('2012-06-01 19:25:45', 'example', '2012-06-01 19:25:45', 1) 
```

如您所见，两者都是在保存新用户时同时保存的。现在让我们尝试场景二：

```
u = User.create!(:name => "test")
#SQL (0.2ms)  INSERT INTO `users` (`created_at`, `name`, `updated_at`) VALUES ('2012-06-01 19:27:21', 'test', '2012-06-01 19:27:21')
#<User id: 2, name: "test", created_at: "2012-06-01 19:27:21", updated_at: "2012-06-01 19:27:21"> 

u.assignments.build(:name => "example")
#<Assignment id: nil, name: "example", user_id: 2, created_at: nil, updated_at: nil> 
```

所以，由此我们可以得出结论：

**如果我执行 some_user.assignments.build，是否保存了 Assignment 对象？**

没有

**如果我执行 some_user.assignments << Assignment.new，是否保存了 Assignment 对象？**

不，这正是 assignments.build 所做的，没有区别。

**如果我执行 some_user.assignments << Assignment.create，是进行了两次数据库调用，还是仅进行了一次？**

只是任务。

**如果我在创建分配对象和将其添加到 some_user.assignments 之间修改它会怎样？**

不明白，对不起。

**如果我保存会发生什么！一个分配对象，其相应的用户尚未保存在数据库中？**

它在没有 user_id 的情况下保存到数据库中。然后，当您对用户调用 save 时，将向分配发出更新命令以添加用户 ID。这是在控制台中：

```
u = User.new(:name => "John Doe")
#<User id: nil, name: "John Doe", created_at: nil, updated_at: nil> 

a = Assignment.new(:name => "test")
#<Assignment id: nil, name: "test", user_id: nil, created_at: nil, updated_at: nil> 

u.assignments << a
#[#<Assignment id: nil, name: "test", user_id: nil, created_at: nil, updated_at: nil>] 

a.save!
#SQL (0.2ms)  INSERT INTO `assignments` (`created_at`, `name`, `updated_at`, `user_id`) VALUES ('2012-06-01 19:33:24', 'test', '2012-06-01 19:33:24', NULL)

a.user_id
#nil 

u.save!
#INSERT INTO `users` (`created_at`, `name`, `updated_at`) VALUES ('2012-06-01 19:33:36', 'John Doe', '2012-06-01 19:33:36')
#UPDATE `assignments` SET `user_id` = 3, `updated_at` = '2012-06-01 19:33:36' WHERE `assignments`.`id` = 3 
```

希望这可以帮助。

# sql - 在 select 语句中选择

> ID：10856043
> 
> 赞同：0
> 
> 时间：2012-06-01T19:10:48.660
> 
> 标签：sql

我正在尝试从数据库 B 中的表创建数据库 A 中的表。我对查询有一个想法。在数据库A中，表需要MerchantID，可以通过查询（Select MerchantID from Merchant_Location where LocationID= 'particular LocationID'）从数据库B中获取。

我需要一些有关 SQL Server 2005 中此类查询语法的帮助。提前谢谢您！

```
INSERT INTO A.dbo.Merchant_Category (MerchantCategoryID, MerchantID)
SELECT MerchantLocationCategoryID, (MerchantID from Merchant_Location where LocationID =    @Location) as MerchantID FROM B.dbo.Merchant_Location_Category 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:14:26.150

您想使用 SELECT INTO 语句。它的作用是执行查询，然后将结果插入到您指定的表中。

```
SELECT field1, field2, field3 FROM db_b.TABLE_IN_DB_B
INTO db_a.TABLE_IN_DB_A; 
```

[在此处](http://msdn.microsoft.com/en-us/library/bb208934%28v=office.12%29.aspx)阅读有关 SELECT INTO 语句的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T19:17:53.343

您可以在 中跨数据库 JOIN `INSERT`，就像`SELECT`. 大多数系统也将允许它`UPDATE`。

```
INSERT INTO A.dbo.Merchant_Category (
   MerchantCategoryID, MerchantID
)
SELECT LC.MerchantLocationCategoryID, L.MerchantId
FROM B.dbo.Merchant_Location_Category as LC
JOIN A.dbo.Merchant_Location as L ON
    LC.LocationID = L.LocationID 
```

# java - 完全指定包的快捷方式？

> ID：10856044
> 
> 赞同：2
> 
> 时间：2012-06-01T19:10:51.140
> 
> 标签：java

假设你在 abc 中定义了一个类，并且你想在 ab 中引用一个类，是否有这样的快捷方式，比如“..”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:57:27.733

不。

尽管 Java 包命名的最佳实践通常涉及分层命名，但实际定义的包不是分层的，并且彼此之间没有任何关系。

# symfony - 近似实体搜索

> ID：10856061
> 
> 赞同：0
> 
> 时间：2012-06-01T19:12:06.217
> 
> 标签：symfony, doctrine-orm

无论如何，是否可以对具有原则 2 的实体进行近似搜索（例如，使用 n-gram）？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T21:51:40.687

最终使用了提供此（以及更多）功能的[FOQElasticaBundle ！](http://knpbundles.com/Exercise/FOQElasticaBundle)

# scala - Play Framework 2\. 将视图传入视图

> ID：10856062
> 
> 赞同：0
> 
> 时间：2012-06-01T19:12:10.017
> 
> 标签：scala, playframework-2.0

我花了一些时间学习 Play 2，现在我想概括我的项目。我有一个渲染实体列表的视图，现在我想传递另一个视图作为参数，它将实体渲染到这个列表中。例如：

```
// showList.scala.html
@(entityList: List[Entity], /* Template for one Entity render. Named entityRenderer*/)
@for(entity <- entityList) 
 entityRenderer(entity)

// entityRenderer.scala.html
@(entity: Entity)
    @entity.getName() 
```

entityRenderer 应该有哪种类型？

我知道每个模板只是一个 scala 函数但是如何处理它们呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:38:26.060

如果我理解你的问题，我会提出以下建议：

```
// file main.scala.html
@(entityList: Page[models.Task]) // here we define a Page of entities
@for(entity <- entityList.getList) {
    <ul>
        @tags.entityRenderer(entity) // here we call another view passing the entity
    </ul>
} 
```

另一个文件：

```
// file entityRenderer.scala.html in package tags
@(entity: Task) // here we define the incoming arguments
     <li>entity.property</li> 
```

请记住，模板基本上被编译成函数。因此，您需要定义正确的参数并显然传递正确的参数。

# ssrs-tablix - 如何将 tablix 控件添加到报表中？

> ID：10856064
> 
> 赞同：5
> 
> 时间：2012-06-01T19:12:14.830
> 
> 标签：ssrs-tablix

这似乎是一个简单的问题，但我找不到将 tablix 控件添加到 SSRS 报告的任何内容。

我在出价或报表生成器 3.0 的工具箱中看不到此控件。

我正在使用 SSRS 2008 R2。

有人可以告诉我如何将此控件添加到报告中吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-01T19:21:33.593

[我在这里](http://technet.microsoft.com/en-us/library/dd220587(v=sql.105))找到了答案：

> 表、矩阵和列表数据区域在功能区上由基础 tablix 数据区域的模板表示。将这些模板之一添加到报表时，实际上是在添加针对特定数据布局优化的 Tablix 数据区域。默认情况下，表格模板以网格布局显示详细数据，矩阵以网格布局显示组数据，列表以自由格式布局显示详细数据。

会不会更不直观？

# css - 每第 n 行带有 CSS 计数器的行号？

> ID：10856070
> 
> 赞同：11
> 
> 时间：2012-06-01T19:12:41.413
> 
> 标签：css

我不得不删掉某些引用链接（斜体），因为我还没有足够的声誉，但也许以后可以替换它们。

我创建了一个 jQuery 插件，它显示诗歌和戏剧的递增行号；一首诗的行表示为有序列表（ol.verse）的子级。启用 javascript 后，插件会根据最少的内联列表值每隔 n 个间隔生成行号。然后可以通过 DOM 操作这些数字。当 JS 被禁用时，每五行的数字列表标记作为后备行号启动。

我现在想知道是否有可能将插入的诗歌降级为由 CSS 计数器提供支持的列表。IE 6-7 提供带有数字尾随句点的普通有序列表，但高级浏览器应该获得计数器或插件生成的数字。这就是问题所在。CSS 计数器规则应该能够适应*诗列表的行号和子索引不同步的*情况。我看过很多关于*格式化计数器*和[跳过孩子](https://stackoverflow.com/questions/10186849/counter-increment-in-css)的帖子，以及在语义和*[排版](http://webtypography.net/intro/)**上格式化诗歌的正确和错误方法*（*[W3C 提案](http://www.w3.org/html/wg/wiki/PoeticSemantics#How_to_Markup_a_Stanza_or_Strophe.3F)*推荐段落和前置标签充其量是有问题的）；然而，在使用计数器来增加行号的问题上，我一无所获，所以我分享了我自己为解决方案所做的努力，希望你们能帮助我找到更好的解决方案。

我一直在尝试取得有限成功的基本规则：

```
ol.verse { counter-reset: line 0;
ol.verse li {
   display: block;       
}

ol.verse li:before {
   counter-increment: line;
   content: counter(line) " ";
}

/* hide lines, or more precisely, children, that are not a multiple of 5 */

ol.verse li:not(:nth-child(5n)):before {
   visibility: hidden;
} 
```

正如您从[这个小提琴](http://jsfiddle.net/jqnguyen/qpsGv/1/)中看到的那样，这些规则每第 5 行显示一个数字，只要每个列表子项都被计为诗歌的一行，并且只要段落从第 1、6、11、16 行等开始。 （即计数器复位为 0 或 5 的倍数）。最后一条规则可能对那些想要为一些更简单的任务（例如，一首简单的博客文章）增加行号的人感兴趣，但是这些条件对于我们的需求来说过于严格（TEI 结构的关键版本的存储库）诗歌/戏剧在线）。

**问题 1：**当我有一个或多个作品的多个摘录或分割，其计数器重置不是默认增量的倍数时，我必须按 id 引用摘录并将每个 id'd ol.verse 的隐藏规则偏移其余的。例如，从第 43 行开始的摘录需要将 counter-reset 调整为 42，并将隐藏规则的第 n 个子参数调整为 5n+3（因为 42 % 5 = 3）。突然之间，计数器变得不像手动编号列表值那样吸引人。这至少比......

**问题 2：**让浏览器不计算可能嵌入在诗歌中的某些行，例如副标题或舞台方向。对于这些行，我尝试附加一个 nocount 类并关闭显示属性或可见性属性，例如

```
ol.verse li.nocount:before {
   display: none;     
} 
```

或者

```
ol.verse li.nocount:before {
   visibility: hidden;
} 
```

结合非增量的倍数的规则隐藏线，两者都没有给出期望的结果。看到[这个小提琴](http://jsfiddle.net/jqnguyen/qpsGv/2/)。第一个在正确的数字上触发错误的行号；后者，对错误的正确编号。是否有任何方法可以编写 CSS 计数器规则，无论自动行号是否与正确的子索引对应？也许还有一些其他的 CSS 选择器组合可以完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T19:28:44.203

*修复计数*不是问题，因为您可以使用`counter-increment: line 0;`具有更高特异性或.*`!important`*

 *（如果像您将规则应用于`:before`伪元素的情况一样，但想要根据`li`您可以应用的排除`counter-increment:line -1;`

演示在[http://jsfiddle.net/gaby/qpsGv/3/](http://jsfiddle.net/gaby/qpsGv/3/)

* * *

将它显示在正确的行虽然这是另一个问题，因为这与`nth-child`不允许修改的选择器有关......（*如果它找到一个孩子，它会被计入它的目的......*）

* * *

**更新**

我不知道您在更改实际 html 时有什么灵活性，但我能看到的唯一解决方案是将您不想计入另一个元素的元素包装起来。

这样您就可以使用`nth-of-type`代替`nth-child`，这样您就可以确实只显示 5 的倍数。

为了保持 html 有效，您需要使用该`menu`元素，因为它是唯一允许同时`li`作为`ol`子元素的元素..（*您当然可以使用完全不同的元素..只需确保计数元素与非计数的*）

所以只能指望

```
menu.verse > li { counter-increment: line 1;} 
```

并显示在

```
menu.verse > li:nth-of-type(5n):before {
    content: counter(line);
    width: 2em;
    display: block;
    float: left;
    margin-left: -2em;  
} 
```

当 html 是

```
<menu class="verse">
 <li>countable</li>
 <ol><li>non countable</li></ol>
 <li> countable</li>
</menu> 
```

应该可以工作..（*可以`<ol><li>`成为`div`具有适当样式的..*）

**演示在** [http://jsfiddle.net/gaby/qpsGv/7/](http://jsfiddle.net/gaby/qpsGv/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T19:44:34.667

对于问题 2，如果`class="fallback"`您的小提琴仍然存在，而不仅仅是问题解释的一部分，您可以将其用作解决方案：放弃 nth-child(5n) 并使用后备作为指标，如果行数应该显示与否。

请参阅[更新的 jsFiddle](http://jsfiddle.net/qpsGv/4/)。
我在其中插入了不属于这首诗的一行，以查看它是否有效，并且确实有效：您可以删除该行，其余部分将保持同步。*

# c# - 使用 Razor 模板生成 .aspx 页面

> ID：10856071
> 
> 赞同：2
> 
> 时间：2012-06-01T19:12:46.350
> 
> 标签：c#, razor, tridion

我正在尝试使用 Razor 模板来生成 .aspx 页面作为输出。我没有运气在文档中查找如何执行此操作。Page 和命名空间声明破坏了模板：

```
<%@ Page Language="C#" Title="@Page.Metadata.browser_title" %>
<%@ Import Namespace="System.Xml" %> 
```

这些导致此错误：

TemplateCompileException：CS1501：方法“Write”没有重载需要 0 个参数第 27 行第 1 列：Write()；

我认为这是因为使用 C# 语法的 Razor 模板会使两者发生冲突，因为上面的声明使用“@”。有没有办法让它们一起工作，以便 Razor 模板可以在模板运行后在渲染产品中使用 C# 生成输出？上面的示例还显示了如何将“Title”的值从模板中呈现出来。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T19:16:14.963

The `@`s in the `<%` are invalid Razor syntax.
You need to escape them by writing `<%@@`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T13:58:53.127

如果您喜欢 Razor，也许您应该查看 DD4T (http://code.google.com/p/dynamic-delivery-4-tridion/)。它允许您使用带有 Razor 视图的 ASP.Net MVC 构建网站。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T19:25:54.887

您可以编写一个 C# TBB 在所有 Razormediator 模板之后添加标签，或者如果您可以在默认完成操作之后添加（如果您正在使用一个）则更好。

快速而肮脏的示例代码...

```
 Item OutputItem = package.GetByName(Package.OutputName);
  string OutputText = OutputItem.GetAsString();

  // Page tag declaration..
  string pagePretags = @"<<TWO LINES OF DECLARATIONs..>>"
  string FinalOutputText = pagePretags + OutputText ;

  OutputItem.SetAsString(FinalOutputText); 
```

希望这可以帮助..

# assembly - 8086 中的暂停过程

> ID：10856072
> 
> 赞同：-2
> 
> 时间：2012-06-01T19:12:50.097
> 
> 标签：assembly, emulation, x86-16, proc

您好我正在考虑如何制作一个简单的 PAUSE PROC 在主程序中调用它。你能帮帮我吗？我正在使用屏幕中断，如 int 10h，在屏幕上显示一些消息。所以我需要一个简单的暂停程序在我的第一条消息（msg0 db“按任意键继续...”，0）等待用户按任意键然后返回主程序继续之后调用它。应该有很多方法可以做到这一点，欢迎您随意纠正，但请保持简单。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T16:44:13.217

一个简单的过程。系统正在等待您按任意键并继续它的简单且有效

```
pause proc

    push    cx
    push    ax
    push    dx
    push    bx

    mov     ah, 08h
    int     21h

    pop     bx
    pop     ax
    pop     dx
    pop     cx

    ret 

pause endp 
```

# c# - 多次使用 unseakable 流

> ID：10856075
> 
> 赞同：2
> 
> 时间：2012-06-01T19:13:00.897
> 
> 标签：c#, stream

```
using (var stream = GetS3ObjectStream(fooObj))
{
    WriteStreamToFtp(stream, "ftp://firstserver");
    WriteStreamToFtp(stream, "ftp://SecondServer"); 
} 
```

第一个可以工作，但第二个只会创建一个空文件

`GetS3ObjectStream`获取 Amazon Simple 存储对象的流。这是不可分割的流，您无法更改其中的光标位置。

现在，我要么必须以某种方式限制多次使用流对象，要么必须将光标移动到开头。

有任何想法吗？

upd：是的，您当然可以简单地将流保存在 temp 中。变量，但如果你不想那样做，那怎么办？可以制作采用流的方法并让它们产生这样的副作用吗？如果我在方法中关闭并处理源流怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T19:14:45.257

您可以重新创建流或将其缓冲到 a`byte[]`或`MemoryStream`使用前。

编辑：我忘了提到一个**不缓冲**的解决方案：

1.  打开两个目标流
2.  打开源流
3.  在源耗尽之前，读取 N 字节的缓冲区并将缓冲区写入两个目标流（您甚至可以使用 Parallel.Invoke() 并行写入）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T20:01:38.010

这是一个如何只读取一次流的示例（无需初始化流内容的临时副本）。

这假设您可以`WriteStreamToFtp`使用对实际目标流的访问来替换您的调用。请注意，`FtpStream`构造函数是占位符代码。

```
using (var source = GetS3ObjectStream(fooObj))
using (var target1 = new FtpStream("ftp://firstserver"))
using (var target2 = new FtpStream("ftp://SecondServer"))
{
    byte[] buffer = new byte[1024];
    while (true)
    {
        int count = source.Read(buffer, 0, buffer.Length);
        if (count == 0)
            break;

        target1.Write(buffer, 0, count);
        target2.Write(buffer, 0, count);
    }
} 
```

# c++ - C++11 中依赖类型的模板关键字

> ID：10856077
> 
> 赞同：5
> 
> 时间：2012-06-01T19:13:02.670
> 
> 标签：c++, templates

这是一个更深入的后续： [这个问题](https://stackoverflow.com/questions/6456636/disambiguator-template-keyword-for-a-template-member-of-a-template-when-exactly)

考虑以下代码：

```
template <typename T>
class A {
 public:
  template <typename T2>
  const T2* DoSomething() { ... }
};

template <typename T>
class B : public A<T> {
 public:
  const int* DoSomethingElse() {
    return this->DoSomething<int>();  // Compiler wants 'template' keyword here:
 // return this->template DoSomething<int>();
  }
}; 
```

为什么不编译？我知道标准的相关部分是 14.2/4，但我不确定我是否理解为什么这不起作用的具体细节。有人可以分解该部分中的措辞来解释为什么这不起作用吗？另外，您能否描述（一般）在什么情况下可以省略模板关键字？

请注意，在 C++11 中，以下代码*可以*编译：

```
template <typename T>
class A {
 public:
  template <typename T2>
  const T2* DoSomething() { ... }
};

class B {
 public:
  scoped_ptr<A<int>> var_;

  const int* DoSomethingElse() {
    return var_->DoSomething<int>();
  }
}; 
```

有什么不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T19:16:52.513

It's because C++ is not a context-free grammar.

Normally, the compiler looks at previously declared symbols to decide whether the angle brackets in the token sequence `DoSomething`, `<`, `int`, `>` are relational operators or part of a template name. Since this is a template, and it isn't yet known whether `A<T>` will be specialized, the compiler cannot rely on prior declarations in the symbol table and needs help from the programmer.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T19:17:35.927

假设你有这个：

```
template <> class A<float>
{
    int DoSomething;
    // ...
}; 
```

突然间，这个表达`this->DoSomething < ...`意味着非常不同的东西。如果给定名称是从属名称，则无法确定给定*名称的含义。*这就是为什么*您*要明确说明名称是变量、类型名还是模板。

# c# - 适用于 Windows 8 的间谍实用程序

> ID：10856078
> 
> 赞同：7
> 
> 时间：2012-06-01T19:13:05.513
> 
> 标签：c#, windows-8, microsoft-metro, utility, spy

我用过[Snoop](http://snoopwpf.codeplex.com)，它是 WPF 的绝妙工具。[SilverlightSpy](http://firstfloorsoftware.com/silverlightspy/)对 Silverlight 和 WP7 具有类似的功能。有人知道 Windows 8 项目的任何类似工具吗？

**编辑：**我的意思是在模拟器或本地机器上运行的 C#/XAML 上的 Windows Metro 风格应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T19:50:41.917

根据我所听到的（以及根据[这些](http://social.msdn.microsoft.com/Forums/en/winappswithcsharp/thread/a5085cb8-8e1c-49e4-bacb-94266dc1113c) [帖子](https://twitter.com/timheuer/status/195586392913494017)），确实还没有一个好的方法可以做到这一点。据说它会在下一个版本中出现。 [现在调试绑定的半功能方式。](http://www.kelvinhammered.com/?p=150)

# php - Joomla iCal 功能

> ID：10856081
> 
> 赞同：0
> 
> 时间：2012-06-01T19:13:26.960
> 
> 标签：php, mysql, joomla, module, icalendar

出于某种原因，这个 Joomla 'Jevents' 模块使用 iCal 格式来显示开始日期/结束日期，这使它看起来像是加密的。`1339246800`这是 6 月份的加密开始日期，我想知道是否有人知道解密所述开始日期的功能。我正在从数据库中提取这些值，并希望将它们显示为简单的“月 - 日”格式。我试图询问 Jevents 论坛，但我没有快速到达任何地方。这是[链接](http://www.jevents.net/forum/viewtopic.php?f=17&t=14508)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:24:04.827

它似乎是一个 unix 时间戳，如果你从数据库中提取它，你可以像这样使用 FROM_UNIXTIME() ：

```
SELECT FROM_UNIXTIME(1339246800,'%M %d');
SELECT FROM_UNIXTIME(YouriCalDateColumn,'%M %d') FROM yourTable 
```

如果这没有返回正确的日期，请提供您期望的日期，以及它存储的数字，我们可以仔细查看。

# python - SQLite 中的多个指针

> ID：10856085
> 
> 赞同：0
> 
> 时间：2012-06-01T19:14:10.173
> 
> 标签：python, database-design, sqlite

我正在尝试在 python(3.X) 中重写字典程序。我一直在使用 JSON，但认为尝试使用 SQLlite 会很有趣。我的问题是：

我有：

1.  一个字
2.  使用该词的句子列表
3.  同义词列表
4.  反义词列表

使用 SQLite3 组织数据的最简洁方法是什么？

我的想法是为“val and example”创建一个具有唯一 ID 的表，然后为同义词和反义词创建新条目（如果它们尚不存在）。

```
ValId  Val        Eaxmples
1      'hot'      'the water is hot\n she's hot\n'
2      'warm'     '...'
3      'cold'     '...'
4      'freezing' '...' 
```

但是我将如何创建一个可以指向多个 id 的表呢？例如`'hot'`指向`2`作为同义词和`3 , 4`反义词。我将如何创建多个 ponter，我是否必须将它们放在一个刺痛中然后解析它们，因为我不知道如何创建同义词或反义词。

```
LinksID  ValID SynIDs AntsIds
   1        1     2      3,4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:26:33.317

我将创建两个单独的表，一个用于同义词，一个用于反义词，您必须[`FOREIGN KEYS`在其中引用您的单词](http://sqlite.org/foreignkeys.html)：

```
CREATE TABLE synonym (
    SynID INTEGER,
    WordID1 INTEGER,
    WordID2 INTEGER,
    FOREIGN KEY (WordID1) REFERENCES word(ValID),
    FOREIGN KEY (WordID2) REFERENCES word(ValID)
);

CREATE TABLE antonym (
    AntID INTEGER,
    WordID1 INTEGER,
    WordID2 INTEGER,
    FOREIGN KEY (WordID1) REFERENCES word(ValID),
    FOREIGN KEY (WordID2) REFERENCES word(ValID) 
); 
```

这样您就不必担心每个单词都有未知数量的同义词和反义词。然后你会得到以下结构：

你的单词表：

```
ValId  Val        Eaxmples
1      'hot'      'the water is hot\n she's hot\n'
2      'warm'     '...'
3      'cold'     '...'
4      'freezing' '...' 
```

您的同义词表：

```
SynID  WordID1  WordID2
1      1        2
2      3        4 
```

还有你的反义词表：

```
AntID  WordID1  WordID2
1      1        3
2      1        4
3      2        3
4      2        4 
```

# c++ - C++：检测 USB 加密狗的守护进程

> ID：10856090
> 
> 赞同：0
> 
> 时间：2012-06-01T19:14:25.640
> 
> 标签：c++, linux, daemon, gnu

我有带有特定 USB UUID（或其他任何名称）的加密狗。

我想在连接 USB 设备时设置事件，如果 UUID 正确，它将解锁受保护的目录。

我有如何解锁目录的代码，但我不知道如何检查设备 UUID 以及如何设置上述事件。

**编辑：**它是适用于 GNU/Linux 的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:02:11.267

您可以阅读`udev`守护程序的源代码。或者您可以只做`udev`它已经设计好的事情，并将您的逻辑作为`udev`-triggered hotswap 脚本插入。

# javascript - Testing Chrome's execCommand on localhost

> ID：10856099
> 
> 赞同：0
> 
> 时间：2012-06-01T19:15:12.343
> 
> 标签：javascript, google-chrome-extension, clipboard

At the top of my HTML page, I have declared the path to my Google Chrome extension:

```
<link rel="chrome-webstore-item" href="https://chrome.google.com/webstore/detail/thekey"> 
```

Further down, I inspect of the app is installed, and, if it is, execute a `copy` command (or `paste`, or `cut`):

```
if (chrome.app.isInstalled) {
     document.execCommand("copy");
} 
```

I am trying to serve this page locally, and the URL in the address bar points to `localhost`. However, none of the clipboard features work. My app currently has the correct `clipboardRead` and `clipboardWrite` permissions, and of course the app is installed, but I think it's not executing because my localhost is not pointing to the site listed in `"app":"urls"`.

Is there any way that I can test locally if cut/copy/paste is working correctly through my extension?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:41:37.000

如果您正在测试`"apps" : "urls"`列表中未列出的域，则该域自然不存在您的权限。您不能只添加`http://localhost/`为应用 URL 吗？我知道 Chrome 网上应用店不允许这样做，但无论如何你都应该在完成测试后将其删除。

# zend-framework - Group Inbound & Outbound emails by address and show in threaded view style in Zend Framework

> ID：10856100
> 
> 赞同：1
> 
> 时间：2012-06-01T19:15:22.200
> 
> 标签：zend-framework

I am not a programmer, Our company currently uses ACT CRM integrated with Outlook. Since ACT CRM and Outlook are not cloud based, we are having a CRM built in ZEND Framework. Our issue is tracking email correspondence with our clients. Right now ACT captures via Outlook both inbound and outbound emails and attaches them to the contact record. Our Zend CRM only can capture outbound messages initiated from the program and attached them to the contact record. We want inbound messages to be attached, by comparing or recognizing the inbound email address and then attaching it to the matching contact. Is this possible, our developer does not know.

# c - 在linux中的中断上下文中运行用户线程

> ID：10856103
> 
> 赞同：2
> 
> 时间：2012-06-01T19:15:34.167
> 
> 标签：c, linux, linux-kernel, kernel, linux-device-driver

我正在编写一些自定义应用程序并允许更改 linux 内核中的中断处理程序代码。

我有一个正在等待中断发生的用户线程。如果发生该中断，那么我要做的第一件事就是执行该用户线程。

有没有办法让它工作。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T20:21:18.080

创建一个字符设备（这就是内核所做的，处理设备）。让用户线程从该设备读取。它将挂起，因为没有要读取的字符。

当中断发生时，从您的模块向该设备输出一个字符（或一些有意义的消息）。线程将唤醒，阅读消息并继续。

给处理程序线程一些不错的优先级，以便它早点醒来。

或者，您可能只是让线程等待`select`或`sleep`向其发送信号（内核函数`kill_proc_info`），然后线程将唤醒。确保线程处理信号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:09:21.160

与其在制作字符驱动程序方面做得过大，不如制作一个 sysfs 条目就足够了。您可以执行任何阻塞调用，例如读取/选择/轮询该 sysfs 条目并从您的中断处理程序提供给它。

为您解决的有趣问题是

1.  如果您已经在运行时发生另一个中断怎么办。
2.  如果中断发生了两次，但你只被唤醒了一次怎么办。

等等

# asp.net-mvc - 将 HTML 标记从 POST 重构为 GET

> ID：10856104
> 
> 赞同：0
> 
> 时间：2012-06-01T19:15:37.773
> 
> 标签：asp.net-mvc, http-post, forms, http-get

我在 ASP.NET MVC 视图中有以下标记（这是一个[Twitter Bootstrap](http://twitter.github.com/bootstrap/)搜索框）：

```
<form action="@Url.Action("Results", "Search")" method="post">
    <input type="text" class="search-query" id="SearchTerm" name="SearchTerm" />
</form> 
```

此代码按预期工作，但在此处使用帖子会导致问题。

如何更改此标记以将搜索查询作为 URL 参数传递？我不确定如何在不保留现有标记然后从控制器重定向的情况下解决这个问题。我认为必须有比这更有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:24:37.897

您应该能够更改`method="post"`并`method="get"`获得所需的结果。带有 get 方法设置的表单通过其默认行为将表单中的字段推送到查询字符串。

作为一种解决方法，如果默认行为不适合您，您可以捕获表单的提交事件，然后执行以下操作：

```
window.location = form.action + "?SearchTerm=" + document.getElementById("SearchTerm").value 
```

类似的东西，其中 form 是对表单元素的引用。您可以使用 javascript 构建链接并重定向，这是一个 get 请求。

# iphone - update UILabel with the content of UICell from a different view

> ID：10856110
> 
> 赞同：0
> 
> 时间：2012-06-01T19:16:04.057
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

I have an NSArray `tablePeople` which makes up my UITableView on my 1st View Controller `PeopleController`. I have a UILabel `personsName` on my second View Controller `PeopleDetailsController` which I want to update with the contents of `cell.textLabel.text` of each row in my TableView. I have this method but it's not working:

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    ((PeopleController *)segue.destinationViewController).delegate=self;
    if ([[segue identifier] isEqualToString:@"toPeopleArticle"]) {

        NSIndexPath *indexPath = (NSIndexPath *)sender;

        PeopleDetailsController *mdvc = segue.destinationViewController;
        mdvc.personsName.text = [self.tablePeople objectAtIndex: indexPath.row];
    }
} 
```

I also have this code when the cell is selected:

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"toPeopleArticle" sender:indexPath];
} 
```

I have to note that `PeopleDetailsController` is a modal view and `PeopleController` is a navigation view controller.

EDIT: The text on the UILabel on the 2nd VC is just not being updated, it stays the same, that's the whole problem.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:41:37.140

更改以下内容

```
PeopleDetailsController *mdvc = segue.destinationViewController;
mdvc.personsName.text = [self.tablePeople objectAtIndex: indexPath.row]; 
```

至

```
PeopleDetailsController *mdvc = segue.destinationViewController;
mdvc.personsNameString = [self.tablePeople objectAtIndex: indexPath.row]; 
```

其中 personNameString 是 PeopleDetailsController 中 NSString 类型的属性

现在在 PeopleDetailsController viewDidLoad 或 viewWillAppear 函数中将标签的值设置为属性的值

```
mdvc.personsName.text = personsNameString; 
```

# java - How to deal with Gradle and multi project configuration?

> ID：10856113
> 
> 赞同：1
> 
> 时间：2012-06-01T19:16:08.630
> 
> 标签：java, gradle, build-script

I have several projects [A, B, C], A depends on B and C.

I want to move my projects to a multi project build configuration. Today my projects live on SVN, completely isolated.

I was wondering if the only way to use the multi project build feature is if I move the projects to the same repository, imagine something like:

```
MyPorject 
--A 
----build.gradle 
--B 
---build.gradle 
--C 
----build.gradle 
--build.gradle 
```

Suggestions are welcome! Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:51:35.583

好吧，我从 Gradle 项目的一个人那里得到了 3 个选项：

*   始终在相同的相对位置检查所有三个项目，并将其中一个设为根
*   使用 Subversion 外部组件
*   将所有项目重定位到共享的 Subversion 存储库

这里[http://forums.gradle.org/gradle/topics/how_to_deal_with_multi_project_configuration](http://forums.gradle.org/gradle/topics/how_to_deal_with_multi_project_configuration)

# apache - Redirecting into Subfolder and masking this with Apache Rewrite

> ID：10856120
> 
> 赞同：0
> 
> 时间：2012-06-01T19:16:39.363
> 
> 标签：apache, mod-rewrite

i got a subfolder inside my domains root directory, lets call it "domain.tld/subfolder". Inside this "subfolder" there are more subfolders, one of them is called "public". Now when I request "domain.tld/subfolder" i want the user to see the content of "subfolder/public", but without changing the URL to "domain.tld/subfolder/public".

Any Ideas on this??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:23:56.877

[http://www.htaccessredirect.net/](http://www.htaccessredirect.net/)

用于`.htaccess`重定向。

# batch-file - 在批处理文件上拖放更改相对路径

> ID：10856124
> 
> 赞同：1
> 
> 时间：2012-06-01T19:16:49.070
> 
> 标签：batch-file, relative-path

这是我的代码，我将多张图像拖放到一张以压缩所有图像。

```
if [%1]==[] goto :eof
:loop
start %~dp0ImgCompress.exe %1
shift
if not [%1]==[] goto loop 
```

它适用于第一个文件，但在第二个及以后的相对路径 (%~dp0) 成为我拖放文件的相对路径。我的想法是 %~dp0 是执行文件的相对路径。知道如何克服这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:35:37.657

批处理文件的路径是 %0。Shift 使 %1 变为 %0。为了解决你的问题保存 %~dp0：

```
set mydir=%~dp0 
```

并在以后使用它：

```
start %mydir%ImgCompress.exe %1 
```

# c# - Remove axis line from highchart graphic

> ID：10856126
> 
> 赞同：0
> 
> 时间：2012-06-01T19:16:58.800
> 
> 标签：c#, javascript, jquery, highcharts

I have this graph. I have a grid and I want to insert in each row this graph. The problem is that as you can see there is a small line in the left, it seems that this line is the graph axis. I need to remove it not only because of the visual aspect but because the axis increases the grid cell height.

Thanks in advance!

```
<script src="http://code.highcharts.com/highcharts.js"></script>

<div id="container" style="min-width: 400px; height: 100px; margin: 0 auto"></div>
    ​
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            backgroundColor: null,
            renderTo: 'container',
            type: 'bar',
        },
        title: {
            text: ''
        },
        xAxis: {
            gridLineWidth: 0,
            enabled: false,
            categories: [''],
            labels: {
                enabled: false
            }
        },
        yAxis: {
            enabled: false,
            gridLineWidth: 0,
            lineWidth: 0,
            min: 0,
            title: {
                text: ''
            },
            labels: {
                enabled: false
            }
        },
        legend: {
            enabled: false,
        },
        tooltip: {
            formatter: function() {
                return ''+
                    this.series.name +': '+ this.y +'';
            }
        },
        credits: 
        {
            enabled: false,
            position: 
            {
                align: 'left',
                x: 10
            }
        },
        plotOptions: {
            series: {
                stacking: 'normal'
            }
        },
        series: [ {
            name: 'Clicks',
            data: [2]
        }, {
            name: 'Distributed Points',
            data: [3]
        }],
        exporting: 
        {
            enabled: false
        }
    });
});
​ 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T00:33:18.647

[这就是你所追求的](http://jsfiddle.net/larsenmtl/JEGGf/2/)吗？ ![在此处输入图像描述](../Images/b51a94bfbf8258f7959a2e5160e72da0.png)

我设置了 xAxis `lineWidth: 0`，然后在绘制绘图后：

```
$('.highcharts-axis').css('display','none'); 
```

编辑：

如果您还设置`tickWidth: 0`了 ，则可以在不使用 CSS 调用的情况下移除所有轴线的痕迹。

Revved小提琴[在这里](http://jsfiddle.net/JEGGf/4/)。

# c# - Passing String from Native C++ DLL to C# App

> ID：10856127
> 
> 赞同：2
> 
> 时间：2012-06-01T19:17:02.633
> 
> 标签：c#, c++, string, visual-studio-2008, dllimport

I have written a DLL in C++. One of the functions writes to a character array.

C++ Function

```
EXPORT int xmain(int argc, char argv[], char argv2[])
{
    char  pTypeName[4096];
    ...
    //Other pTypeName ends up populated with "Portable Network Graphics"
    //This code verifies that pTypeName is populated with what I think it is:
    char szBuff[64];
    sprintf(szBuff, pTypeName, 0);
    MessageBoxA(NULL, szBuff, szBuff, MB_OK);
    //The caption and title are "Portable Network Graphics"

    ...
    //Here, I attempt to copy the value in pTypeName to parameter 3.
    sprintf(argv2, szBuff, 0);

    return ret;
} 
```

C# Import

```
 //I believe I have to use CharSet.Ansi because by the C++ code uses char[],
    [DllImport("FirstDll.dll", CharSet=CharSet.Ansi)]
    public static extern int xmain(int argc, string argv, ref string zzz); 
```

C# Function

```
private void button2_Click(object sender, EventArgs e)
{
    string zzz = ""; 
    int xxx = xmain(2, @"C:\hhh.bmp", ref zzz);
    MessageBox.Show(zzz);

    //The message box displays
    //MessageBox.Show displays "IstuÈst¼ÓstÄstlÄstwÄstiÑstõÖstwÍst\
    // aÖst[ÖstÃÏst¯ÄstÐstòÄstŽÐstÅstpÅstOleMainThreadWndClass"

} 
```

I have attempted to pass a parameter from C# by reference and have the C++ DLL populate the parameter. Even though I have verified that the value is correct in the DLL, gibberish gets passed to the C# application.

What can I do to write the correct string value to the C# string?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T21:08:58.173

使用 a`StringBuilder`传递本机代码可以填充的字符数组（请参阅[Fixed-Length String Buffers](http://msdn.microsoft.com/en-us/library/s9ts558h.aspx#cpcondefaultmarshalingforstringsanchor3)）。

声明函数：

```
[DllImport("FirstDll.dll", CharSet=CharSet.Ansi)]
public static extern int xmain(int argc, string argv, StringBuilder argv2); 
```

用它：

```
// allocate a StringBuilder with enough space; if it is too small,
// the native code will corrupt memory
StringBuilder sb = new StringBuilder(4096);
xmain(2, @"C:\hhh.bmp", sb);
string argv2 = sb.ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T19:29:29.810

为 DLLImport 调用提供一些其他信息。看下面我自己的例子：

```
[DllImport("tcpipNexIbnk.dll", EntryPoint = "SendData", CallingConvention = CallingConvention.Cdecl)]
    public static extern int Send([MarshalAs(UnmanagedType.LPWStr)]string message); 
```

注意两件事，CallingConvention 参数：CallingConvention = CallingConvention.Cdecl)

照原样使用它。

然后在 c# 字符串类型后面，您可以使用 MarshalAS 指令使用不同的非托管类型，这会将您的 C# 字符串参数转换为您在 c++ 程序中拥有的本机字符串类型：

```
public static extern int Send([MarshalAs(UnmanagedType.LPWStr)]string message); 
```

希望能帮助到你。

# .net - this operation is not supported in the wcf test client because it uses type system.object[]

> ID：10856128
> 
> 赞同：8
> 
> 时间：2012-06-01T19:17:04.703
> 
> 标签：.net, wcf, c#-4.0

hi while running my wcf service it gives me error "this operation is not supported in the wcf test client because it uses type system.object[]"

![enter image description here](../Images/704714401df195249225e20dd8dd8a38.png)

i m trying to retrieve the running process list.

```
[ServiceBehavior(InstanceContextMode=InstanceContextMode.Single)]
    class Windows_processes_Service:IWindows_processes_Service
    {
        ArrayList RunningProcesses_Name = new ArrayList();
        public ArrayList GetRunningProcesses()
        {
            Process[] processlist = Process.GetProcesses();
            foreach (Process nme_processes in processlist)
            {
                RunningProcesses_Name.Add(nme_processes.ProcessName.ToString());
            }
            return RunningProcesses_Name;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T19:19:53.333

问题是它`ArrayList`可以是*任何东西*的列表（因此`object[]`在错误中），而测试客户端无法处理它。虽然在 WCF 中返回任意对象数组是完全合法的，但您应该考虑返回客户端感兴趣的实际类型——在这种情况下，`String`应该使用数组。

此外，对于它的价值，在.NET 的现代（>1.1）版本上，`ArrayList`通常不使用。泛型`List<T>`通常更合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T19:25:40.087

由于您正在向您的服务添加字符串（`ProcessName.ToString()`- 虽然`ToString()`不是必需的，因为`ProcessName`它已经是 a `string`），所以您应该定义您的方法以返回 a`List<string>`而不是`ArrayList`.

这可以简化为：

```
[ServiceBehavior(InstanceContextMode=InstanceContextMode.Single)]
class Windows_processes_Service:IWindows_processes_Service
{
    public List<string> GetRunningProcesses()
    {
        return Process.GetProcesses().Select(p => p.ProcessName).ToList();
    }
} 
```

# bash - 在 Bash 中的命令之前设置环境变量不适用于管道中的第二个命令

> ID：10856129
> 
> 赞同：452
> 
> 时间：2012-06-01T19:17:20.850
> 
> 标签：bash, environment-variables

在给定的 shell 中，通常我会设置一个或多个变量，然后运行命令。最近我了解了将变量定义附加到命令的概念：

```
FOO=bar somecommand someargs 
```

这行得通……有点。当您更改 LC_* 变量（这似乎会影响命令，但*不*影响其参数，例如 '[az]' 字符范围）或因此将输出管道传输到另一个命令时，它不起作用：

```
FOO=bar somecommand someargs | somecommand2  # somecommand2 is unaware of FOO 
```

我也可以在 somecommand2 前面加上“FOO=bar”，这很有效，但会增加不必要的重复，而且它对根据变量解释的参数没有帮助（例如，'[az]'）。

那么，在单行上执行此操作的好方法是什么？

我正在考虑以下顺序：

```
FOO=bar (somecommand someargs | somecommand2)  # Doesn't actually work 
```

* * *

我得到了很多很好的答案！目标是保持单线，最好不使用“导出”。使用 Bash 调用的方法总体上是最好的，尽管带有“导出”的括号版本更紧凑一些。使用重定向而不是管道的方法也很有趣。

* * *

## 回答 #1

> 赞同：408
> 
> 时间：2012-06-01T19:39:08.603

```
FOO=bar bash -c 'somecommand someargs | somecommand2' 
```

* * *

## 回答 #2

> 赞同：269
> 
> 时间：2012-06-01T19:25:04.350

如何导出变量，但只在子外壳内？：

```
(export FOO=bar && somecommand someargs | somecommand2) 
```

Keith 有一个观点，要无条件地执行命令，请执行以下操作：

```
(export FOO=bar; somecommand someargs | somecommand2) 
```

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2015-12-05T07:39:59.563

您还可以使用`eval`：

```
FOO=bar eval 'somecommand someargs | somecommand2' 
```

* * *

由于这个答案`eval`似乎并不能让每个人都满意，让我澄清一下：当按书面形式使用时，*使用单引号*，它是非常安全的。这很好，因为它不会启动外部进程（如接受的答案），也不会在额外的子外壳中执行命令（如其他答案）。

当我们获得一些常规视图时，最好提供一个让每个人都满意的替代方案，并且拥有这个快速“技巧”`eval`的所有好处（甚至可能更多！） 。`eval`只需使用一个功能！使用所有命令定义一个函数：

```
mypipe() {
    somecommand someargs | somecommand2
} 
```

并使用您的环境变量执行它，如下所示：

```
FOO=bar mypipe 
```

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2019-06-26T04:19:30.973

使用`env`.

例如，`env FOO=BAR command`。请注意，执行完成后，环境变量将再次恢复/不变`command`。

请注意 shell 替换的发生，即如果您想`$FOO`在同一命令行上显式引用，您可能需要对其进行转义，以便您的 shell 解释器在运行*之前*`env`不会执行替换。

```
$ export FOO=BAR
$ env FOO=FUBAR bash -c 'echo $FOO'
FUBAR
$ echo $FOO
BAR 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2020-06-20T07:50:51.187

> 一个简单的方法是利用`;`

例如：

```
ENV=prod; ansible-playbook -i inventories/$ENV --extra-vars "env=$ENV"  deauthorize_users.yml --check 
```

`command1; command2`在执行command1之后依次执行command2。命令是否成功并不重要。

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2012-06-01T19:40:13.293

使用 shell 脚本：

```
#!/bin/bash
# myscript
FOO=bar
somecommand someargs | somecommand2

> ./myscript 
```

# git - 更改 git 子模块，并保留更改

> ID：10856138
> 
> 赞同：38
> 
> 时间：2012-06-01T19:17:55.917
> 
> 标签：git, git-submodules

我已经将我的一个库的一个 git 子模块克隆到我正在处理的项目中。问题是，克隆后，我需要更改克隆子模块中的一些行，**但我不想将这些更改推送到原始存储库**中。

我希望这些更改保留在超级项目中。这可能吗？我怎样才能做到这一点？

编辑：正如@GoZoner 所说，基本上是：

1.  混帐克隆富；
2.  光盘富;
3.  git子模块初始化；
4.  git 子模块更新；
5.  cd 路径/到/子模块；
6.  git结帐大师；
7.  **对子模块进行更改**
8.  git commit -am“某事”；
9.  git push origin（超级项目）；

然后，当我在另一台计算机上克隆超级项目时（直到第 4 步），我希望将这些更改保存*在 superproject 中*。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-03T16:56:32.107

我认为您需要放宽“不提交子模块”约束。有两种选择：

1.  将您的子模块更改提交到子模块分支。它是您团队的分支，也是您的团队放置子模块更改的地方。当有人克隆超级项目并更新子模块时，他们会获得您团队分支的内容。
2.  克隆超级项目存储库“旁边”的子模块存储库并初始化子模块以指向您的克隆。然后，当您提交对子模块的更改时，它们将提交给您的克隆。任何克隆超级项目的人都会从您的子模块克隆中获取子模块内容。

否则，我看不到实现您的愿望的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T19:22:07.123

您可以为您的更改签出一个单独的分支。不要把那根树枝往上推。您确实想要推送的更改，在原始分支之一上进行。将该分支合并到您不向上推的特殊分支中。不要在您的特殊分支上做任何其他工作，因为您将不得不以另一种方式合并。你可以这样做，但它会变得复杂。

# sql - DB2 SQL - 触发后无法成功插入表

> ID：10856141
> 
> 赞同：0
> 
> 时间：2012-06-01T19:18:14.083
> 
> 标签：sql, db2

在附加了触发器后，我在将值插入表中时遇到了问题。触发器如下：

```
CREATE TRIGGER trig
AFTER INSERT ON Follows
REFERENCING NEW as N
FOR EACH row
WHEN ((Select email from Celebrity) <> N.followed_email)
UPDATE followSuggestion SET followSuggestion.Suggested_follower = N.followed_email, followSuggestion.Suggested_followee = N.follower_email
; 
```

插入代码如下：

```
INSERT INTO follows
VALUES('Michael_Phelps@uss.net','Michael_Phelps@uss.net'); 
```

错误如下

```
DB21034E  The command was processed as an SQL statement because it was not a 
valid Command Line Processor command.  During SQL processing it returned:
SQL0811N  The result of a scalar fullselect, SELECT INTO statement, or VALUES 
INTO statement is more than one row.  SQLSTATE=21000

SQL0811N  The result of a scalar fullselect, SELECT INTO statement, or VALUES INTO statement is more than one row. 
```

提前谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T19:30:09.353

我认为这是问题所在：

```
 (Select email from Celebrity) <> N.followed_email 
```

子查询可能会返回不止一行，因此标量运算符 <> 将不起作用。您将不得不将该条件改写为：

```
WHEN ((Select COUNT(email) from Celebrity WHERE email = N.followed_email) = 0) ... 
```

# objective-c - 如何在 NSURL 中编码尖锐的符号

> ID：10856151
> 
> 赞同：1
> 
> 时间：2012-06-01T19:19:07.073
> 
> 标签：objective-c, nsurl

我有这种情况，我需要向远程服务器发送一个 GET http 请求。我使用 NSURLConnection 并在 HTTPScoop 中拦截请求。

url 格式是这样的：

```
http://domain.com?key=username##somehash&url=someotherurl.com 
```

我这样做是这样的：

```
NSString *urlString = [[NSString alloc]init];
urlString = @"http://domain.com?key=username##somehash&url=someotherurl.com";
NSString *encodedString = [urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL *url = [NSURL URLWithString: [NSString stringWithFormat:encodedString]]; 

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL: url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
[request setHTTPMethod:@"GET"];

NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

在这种情况下，我没有转义 # 符号，我在 httpscoop 中看到的请求是：

```
http://domain.com?key=username223somehash&url=someotherurl.com 
```

如果我将尖锐符号转义到 %23，它会在 httpscoop 中变成这样：

```
http://domain.com?key=username22523somehash&url=someotherurl.com 
```

我尝试过不同的组合，但总是对尖锐的标志有问题。有没有这方面的走动？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:22:54.317

将 # 替换为 %23 ( [source](http://www.tutorialspoint.com/html/html_url_encoding.htm) )。

编辑 - 哎呀，没有看到你的消息的其余部分。不确定 NSURL，但我之前也很难用 NSURL 对 URL 中的参数进行编码。我最终使用了[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)，它处理了所有的编码问题。我建议也这样做。

# java - Java 3D API - 防止小的纹理模糊

> ID：10856152
> 
> 赞同：0
> 
> 时间：2012-06-01T19:19:10.783
> 
> 标签：java, scaling, java-3d, texturing

![在 3D 图像的底部，模糊清晰。](../Images/ce047559a81e0d069c2910d511ba1c84.png)

我使用 Java 3D API 渲染了这个场景。在图像的底部，地面更靠近观察者，图像上的黑线周围有模糊。我想完全防止这种模糊。这是我用作纹理的图像：

![网格.png](../Images/ba5d1b06a36736695b1adb6a8dce3c2f.png)

如您所见，它很小，但不能将图像放大。是否有任何缩放方法可以更改类型，例如 Java 3D 纹理的“最近邻”选项？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:03:10.797

正如班塔尔建议的那样，我使用了：

```
texture.setMagFilter(Texture.BASE_LEVEL_POINT‌​); 
```

它完美地工作，没有模糊。

# java - Rhino：从 Java 中返回 JSON

> ID：10856154
> 
> 赞同：2
> 
> 时间：2012-06-01T19:19:18.817
> 
> 标签：java, javascript, rhino

我有 Java 中 JSON 序列化对象的字符串表示形式，例如`"{\"name\":\"John\",\"age\":24}"`. 如何解析并将其返回到 JavaScript 上下文，就像`JSON.parse(str)`在 JS 中工作的方式一样？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-04T12:30:59.287

最新版本的 Rhino 只有四个 args，第四个不能为空。要解决这个问题，您必须创建一个实现 org.mozilla.javascript.Callable 的简单类：

```
import org.mozilla.javascript.Callable;
import org.mozilla.javascript.Context;
import org.mozilla.javascript.Scriptable;

public class NullCallable implements Callable
{
    @Override
    public Object call(Context context, Scriptable scope, Scriptable holdable, Object[] objects)
    {
        return objects[1];
    }
} 
```

然后，您可以像这样调用 NativeJSON.parse：

```
Object result = NativeJSON.parse(context, scope, jsonString, new NullCallable()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-13T21:55:18.013

另一种方法是调用[org.mozilla.javascript.json.JsonParser.parseValue](http://mozilla.github.io/rhino/javadoc/org/mozilla/javascript/json/JsonParser.html#parseValue(java.lang.String))。也就是说，如果您不需要应用复活剂。

更有趣的是，`org.mozilla.javascript.NativeJSON`是围绕`org.mozilla.javascript.json.JsonParser.parseValue`. 你可以在这里看到，[https://github.com/mozilla/rhino/blob/master/src/org/mozilla/javascript/NativeJSON.java#L110](https://github.com/mozilla/rhino/blob/master/src/org/mozilla/javascript/NativeJSON.java#L110)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T19:23:48.890

在这里找到答案：[Access Rhino's native JSON.Stringify from Java](https://stackoverflow.com/questions/10288669/access-rhinos-native-json-stringify-from-java)

```
import org.mozilla.javascript.NativeJSON;

Object json = NativeJSON.parse(cx, scope, str, null, null); 
```

# xcode - 如何以编程方式将长字符串存储在 Mac 钥匙串中？

> ID：10856163
> 
> 赞同：1
> 
> 时间：2012-06-01T19:20:17.820
> 
> 标签：xcode, string, cocoa, keychain

我想将一个长字符串存储在一个加密的、安全的位置，并认为钥匙串是一个很好的地方。我找到了[Adam Gerson 的](http://agerson.net/example-some-common-uses-keychain)关于常见钥匙串使用的示例，我理解并实现了该示例，但是我要存储的字符串太长并且被截断。（我只是使用了占位符用户名）。

我要存储的字符串长度为 1300 多个字符，而密码似乎只存储了 1023 个字符。我不想分解字符串，那么有没有办法将这个字符串存储在钥匙串中？如果是这样，您能指出我的任何工作示例吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-08T20:24:05.713

查看[RHKeychain](http://rheard.com/blog/2012/05/rhkeychain/)以了解能够存储任意长度数据的工作实现。

它为 Mac OS X 钥匙串提供了一个简单易用的包装器，用于创建、编辑和删除通用密码项。

在[GitHub](http://bit.ly/NXTId7)上可用。BSD 许可。

更新：添加了 2000 多个字符的单元测试

# r - 防止“knitr”弹出绘图窗口

> ID：10856164
> 
> 赞同：15
> 
> 时间：2012-06-01T19:20:18.627
> 
> 标签：r, knitr

我正在转换`Sweave`并`knitr`非常喜欢它。非常感谢亿辉！

让我烦恼的一件事是情节窗口会弹出并变得活跃。所以当我在`knitr`工作的时候写作时，我的编辑经常会失去注意力。即使代码块中没有生成绘图，也会发生这种情况。

有没有办法避免这种情况？

这是我的`sessionInfo ()`，以防万一：

```
R 版本 2.15.0 (2012-03-30)
平台：x86_64-unknown-linux-gnu（64 位）

语言环境：
 [1] LC_CTYPE=de_DE.UTF-8 LC_NUMERIC=C              
 [3] LC_TIME=de_DE.UTF-8 LC_COLLATE=de_DE.UTF-8    
 [5] LC_MONETARY=de_DE.UTF-8 LC_MESSAGES=de_DE.UTF-8   
 [7] LC_PAPER=C LC_NAME=C                 
 [9] LC_ADDRESS=C LC_TELEPHONE=C            
[11] LC_MEASUREMENT=de_DE.UTF-8 LC_IDENTIFICATION=C       

附加的基础包：
[1] grid stats graphics grDevices utils datasets 方法  
[8] 基地     

其他附加包：
[1] hyperSpec.sim_0.5 mvtnorm_0.9-9992 hyperSpec_0.98-20120531
[4] lattice_0.20-6 knitr_0.5              

通过命名空间加载（未附加）：
 [1] arrayhelpers_0.75-20120531 codetools_0.2-8           
 [3] 摘要_0.5.2 评估_0.4.2            
 [5] 格式R_0.4 高亮_0.3.1           
 [7] parser_0.0-14 plyr_1.7.1                
 [9] Rcpp_0.9.10 stringr_0.6               
[11] 工具_2.15.0  

```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-01T19:50:36.293

这必须在[上周的提交](https://github.com/yihui/knitr/commit/99f5888244b068bfc817e83115f5ca35acd9781d)中得到修复。将不再打开绘图窗口。如果您不知道如何安装开发版，您将等待大约一周的时间等待下一个 CRAN 版本，否则只需[从 Github 安装](https://github.com/yihui/knitr/tree/#readme)。

# c# - 将 ListBox 绑定到静态列表并创建 DataTemplate

> ID：10856166
> 
> 赞同：0
> 
> 时间：2012-06-01T19:20:33.343
> 
> 标签：c#, wpf, templates, data-binding

我使用静态成员列表创建了以下类：

```
public class Role
{
    public static List<Role> AllRoles = new List<Role>()
    {
        Administrators,
        PowerUsers,
        Limited
    };

    public static Role Administrators = new Role() { Name = "Bob" };
    public static Role PowerUsers = new Role() { Name = "Jimbo" };
    public static Role Limited = new Role() { Name = "Jack" };

    public string Name { get; set; }
} 
```

现在我试图在 ListBox 中使用基于每个属性的项目模板绑定到它。我无法让绑定工作，它不返回值。

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WPFTests">

    <Grid>
        <ListBox Width="200" Height="200"
                 ItemsSource="{Binding Source={x:Static local:Role.AllRoles}}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <CheckBox Content="{Binding Path=Name}" />
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
</Window> 
```

我一定错过了一些简单的东西。我得到 3 个复选框来表示一个由 3 个成员组成的数组，但我没有得到任何绑定到公共属性的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T19:34:35.937

如果你像这样重新排列你的代码，它会起作用：

```
public class Role 
{ 
    public static List<Role> AllRoles = new List<Role>() 
    { 
        Administrators, 
        PowerUsers, 
        Limited 
    }; 

    public static Role Administrators = new Role() { Name = "Bob" }; 
    public static Role PowerUsers = new Role() { Name = "Jimbo" }; 
    public static Role Limited = new Role() { Name = "Jack" }; 

    public string Name { get; set; } 
} 
```

您不应依赖初始化静态字段的特定顺序。根据[http://msdn.microsoft.com/en-us/library/aa645758(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa645758(v=vs.71).aspx)，静态字段初始化的顺序是未定义的。

使用静态构造函数，代码可能更具可读性：

```
public class Role
{
    public static Role Administrators;
    public static Role PowerUsers;
    public static Role Limited;

    public static List<Role> AllRoles;

    static Role()
    {
        Administrators = new Role() {Name = "Bob"};
        PowerUsers = new Role() {Name = "Jimbo"};
        Limited = new Role() {Name = "Jack"};

        AllRoles = new List<Role>()
            {
                Administrators,
                PowerUsers,
                Limited
            };
    }

    public string Name { get; set; }
} 
```

# sql-server-2008 - 数据库设计和大量数据的性能问题

> ID：10856167
> 
> 赞同：0
> 
> 时间：2012-06-01T19:20:41.720
> 
> 标签：sql-server-2008, database-design, query-optimization, database-performance

我今天在我的应用程序中询问了以下有关数据库设计和性能问题的问题。

[从一个沉重的表中进行数据库设计和数据检索](https://stackoverflow.com/questions/10846340/db-design-and-data-retrieval-from-a-heavy-table/10846391#comment14126017_10846391)

但是，不能得到太多的答复。我不知道，我可能没有正确解释这个问题。现在，我重新定义了我的问题，希望得到专家的一些建议。

从特定表中选择数据时，我遇到了性能问题。该应用程序的业务逻辑如下：我有许多导入过程，这些过程导致在其父列名称下创建数据透视列，同时将它们显示给用户。随着列的旋转，系统需要时间将行转换为列，这会导致性能下降。与此功能相关的数据库表如下： 可以有 N 个客户端。CLT_Clients 表存储客户信息。

一个客户可以有 N 个项目。PRJ_Projects 表存储项目信息和到客户端的链接。

一个项目可以有 N 个列表。PRJ_Listings 表存储列表信息和项目链接。

可以有 N 个与列表相关联的源实体。ST_Entities 表存储源实体信息和列表的链接。

此源实体是包含 InvestorID、头寸值、源日期、活动和公式状态的实际导入。

```
The name of the import e.g. L1Entity1 is stored in ST_Entities table alongwith ID field i.e. EntityID
InvestorID, Position, Source Date, Active and Formula values get stored in ST_Positions table 
```

数据库图 ![数据库设计](../Images/0ea3e5d15c8ccc1bda0e4f07ac163866.png)

数据需要查看如下： ![数据视图](../Images/eeeb90a1d852244f347b1fca4949346d.png)

通过这种设计，我可以处理 N 次导入，因为 Position、Source Date、IsActive、Formula 列会被透视。

我在此设计中面临的问题是，当系统必须为超过 10-12 个源实体选择数据时，系统执行速度非常慢，并且要求显示大约 150 个源实体。因为数据不是按行存储的，我需要按列显示，因此编写动态查询来旋转这些需要很长时间的列。

**问题 1：**请评论/建议我当前的数据库设计是否正确或需要使用新设计进行更改，方法是分别为 Position、Source Date、IsActive、Formula 取 150 列；以这种新方式，数据已经以我需要检索的方式存储，即我不必旋转/取消旋转它。但缺点是：

a) 此表中的列数将超过 600 列？

b) 源实体将有限制，即 150 个。

**问题 2：**如果我需要坚持目前的状态，可以做些什么来提高性能？

请参阅下面的索引和 Pivot 方法信息：

关于 Position 表中的索引，我还采用了带有聚集索引的 ProjectID 字段，因为数据是根据 ProjectID 或 EntityID 从 Position 表中选择的。

每当 EntityID 用于从 Position 表中选择数据时，它总是在 JOIN 中使用。并且每当 ProjectID 用于从该表中选择数据时，它总是在 WHERE 中使用。

这里要注意的是，我在 ProjectID 上有一个聚集索引，但我没有在 Pivoted 列或 EntityID 上获取任何索引。这里有改进的余地吗？

使用的旋转方法：

```
Example 1:

'Select * From
(
    Select DD.InvestorID,Cast(1 As Bit) As IsDSInvestor,DD.Position,
    Case DD.ProjectID
    When ' + CAST(@ProjectID AS VARCHAR) +' Then DE.SourceName 
    Else ''' + @PPDeliveryDate + '''+DE.SourceName
    End As SourceName
    From DE_PositionData DD
    Inner Join DE_DataEntities DE ON DE.EntityID=DD.EntityID
    Where DD.ProjectID IN (' + CAST(@ProjectID AS VARCHAR) +',' + CAST(@PreviousProjectID AS VARCHAR) +') AND InvestorID IS NOT NULL

) IDD
Pivot
(
    max(Position) for SourceName in ('+ @DataColumns+')
) as p1' 
```

示例 2：

```
'Select * From
    (
        Select DD.InvestorID As DSSOFID,Cast(1 As Bit) As IsActiveInvestor,
        Case ST.SourceTypeCode
            When ''RSH'' Then Cast(IsNull(DD.IsActive,0) As Int)
            Else Cast(IsNull(DD.IsActive,1) As Int) 
        End As IsActive,
        ''~''+DE.SourceName As ActiveSourceName
        From DE_DataEntities DE
        Left Join DE_PositionData DD ON DE.EntityID=DD.EntityID
        Left Join 
        (
            Select * From #DataSources
            Where ProjectID=' + CAST(@ProjectID AS VARCHAR) +'
        ) ST ON ST.ESourceID=DE.ESourceID
        Where DE.ProjectID=' + CAST(@ProjectID AS VARCHAR) +' AND ST.SourceTypeCode NOT IN (''PBC'',''EBL'',''REG'')
        AND InvestorID IS NOT NULL

    ) IDD
    Pivot
    (
        Max(IsActive) for ActiveSourceName in ('+ @DataColumns+')
    ) As p1' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T23:22:56.177

我建议以下。

您应该以标准化格式存储数据。您应该能够设置索引以使数据的旋转更快。如果您发布用于透视的实际查询，我们可能会提供帮助。

您希望以这种方式存储数据的原因有很多：

*   重复块数量的灵活性
*   许多数据库对表格的列数或总宽度有限制。您不希望您的设计接近这些限制。
*   您可能需要有关每个块的附加信息。我总是在我的表中包含 CreatedBy 和 CreatedAt 列，你会希望每个块都有这个。
*   您在摘要方面具有额外的灵活性。
*   添加/删除中间值很麻烦。

也就是说，透视表有一个关键优势：它是用户想要看到的。如果您的数据每天只更新一次，那么您应该使用数据透视表创建一个报表。

如果您的数据在一天中以增量方式更新，那么您可以设置触发器（或存储过程代码）来更新基表和报告摘要。

但正如我之前所说，您应该问另一个问题是您用于旋转的特定方法。也许我们可以提高那里的性能。

# facebook - Facebook Graph API /inbox 端点返回不完整的响应

> ID：10856169
> 
> 赞同：2
> 
> 时间：2012-06-01T19:20:46.057
> 
> 标签：facebook, facebook-graph-api, facebook-messages

我已经构建了一个使用 FB graph api enpoint /me/inbox 的桌面应用程序。（也使用 Facebook C# SDK 5.4.1）

截至 5 月 31 日，我注意到来自此 FB API 的响应不完整。回复中的每条消息都缺少信息；消息的初始发送者（线程中初始消息的创建者）不再存在。缺少以下内容

```
 "from": {
            "name": "....",
            "id": "..."
        }, 
```

并且“消息”文本也丢失了。“信息”： ”.....”，

典型的（好）消息如下所示：

```
{
       "id": "....",
        "from": {
            "name": "....",
            "id": "..."
        },
        "to": {
            "data": [
                {
                    "name": "...",
                    "id": "...."
                },
                {
                    "name": "....",
                    "id": "..."
                }
            ]
        },
        "message": ".....",
        "updated_time": "....",
        "unread": 0,
        "unseen": 0
 }, 
```

还有其他人遇到这个问题吗？

# php - 复制 PHP 文件的实际脚本内容而不是执行结果

> ID：10856174
> 
> 赞同：0
> 
> 时间：2012-06-01T19:21:28.380
> 
> 标签：php

我必须能够将整个文件夹从远程源复制到执行 PHP 文件的本地服务器。我可以做到这一点，除了一个问题，PHP 文件。显然，我不能只使用常规命令复制 PHP 文件的源代码，因为它们会解释代码并给我返回的内容。我必须拥有的是代码。有没有办法做到这一点？

希望我足够清楚，我的问题不是很难理解，我只是想知道它是否真的可能。如果没有，也许有人可能知道将源代码与可执行 php 一起存储的最佳方式？当我完成开发时，我想简单地将其保存为文本，但如果有一种方法可以完全自动地完成它，那将更加棒。最好的情况下，我可以只复制带有 php 文件的文件夹，然后从本地执行它。我需要知道这是否可能......最坏的情况是，我必须复制文件才能将它们的文本版本复制到本地服务器并丢弃 php 文件，因为执行的文件与我的程序无关。我不想那样，但我只是不知道 PHP 是否能够做我想做的事。

编辑：抱歉没有指定！我是远程服务器的管理员，拥有完全访问权限。我可以并且期待在服务器本身上制作一个 php 文件。这就是我目前拥有的那种系统！我压缩了一个文件夹，并在本地来源请求时将其返回。我唯一的问题是 php 执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:26:14.900

你不能这样做，除非你：

*   具有 FTP 访问权限（或其他任何不基于 HTTP 的）
*   可以访问服务器上的脚本，该脚本旨在返回给定文件的源代码
*   使用诸如`?-s`CGI SAPI 中的漏洞之类的漏洞

所以你很可能不走运。

# gnu - 会使 GNU 构建系统中的 install 覆盖以前安装的同名二进制文件

> ID：10856177
> 
> 赞同：2
> 
> 时间：2012-06-01T19:21:56.440
> 
> 标签：gnu, gnu-make

我的问题是关于 GNU 构建系统，即 configure、make、make install 构建系统。我的问题专门针对“make install”。假设有一个 bin 目录和 man 目录等，我在其中安装了所有二进制文件和手册页。如果发生名称冲突会发生什么。例如，如果有一个名为 program 的二进制文件，然后另一个包也有一个名为 program 的二进制文件怎么办？当我在第二个程序上进行安装时，它会覆盖第一个程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:39:47.040

“make install”命令的行为各不相同，但简短的回答基本上是正确的。“make install”通常将文件从构建目录复制到某些系统目录，这些文件将覆盖目标目录中已经存在的文件。

# hadoop - Amazon EMR：在数据节点上配置存储

> ID：10856190
> 
> 赞同：3
> 
> 时间：2012-06-01T19:23:10.993
> 
> 标签：hadoop, amazon-ec2, amazon-web-services, elastic-map-reduce, emr

我正在使用 Amazon EMR，并且能够正常运行大多数作业。当我开始在 EMR 集群中加载和生成更多数据时，我遇到了问题。集群存储空间不足。

每个数据节点都是一个 c1.medium 实例。根据[此处](http://aws.amazon.com/ec2/instance-types/)和[此处](http://aws.amazon.com/elasticmapreduce/#instance)的链接，每个数据节点应带有 350GB 的实例存储。通过 ElasticMapReduce Slave 安全组，我能够在我的 AWS 控制台中验证 c1.medium 数据节点正在运行并且是实例存储。

当我在 namenode 上运行 hadoop dfsadmin -report 时，每个数据节点都有大约 10GB 的存储空间。通过运行 df -h 进一步验证了这一点

```
hadoop@domU-xx-xx-xx-xx-xx:~$ df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda1             9.9G  2.6G  6.8G  28% /
tmpfs                 859M     0  859M   0% /lib/init/rw
udev                   10M   52K   10M   1% /dev
tmpfs                 859M  4.0K  859M   1% /dev/shm 
```

如何配置我的数据节点以使用完整的 350GB 存储启动？有没有办法使用引导操作来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T13:58:07.697

经过更多研究并在 AWS 论坛上发帖后，我得到了一个解决方案，尽管我并没有完全了解幕后发生的事情。我想如果可以的话，我会把这个作为答案发布。

结果发现 AMI 版本 2.0 中存在一个错误，这当然是我尝试使用的版本。（我已经切换到 2.0，因为我希望 hadoop 0.20 成为默认值）AMI 版本 2.0 中的错误会阻止在 32 位实例上安装实例存储，这就是 c1.mediums 启动的内容。

通过在 CLI 工具上指定 AMI 版本应使用“最新”，问题已得到解决，并且每个 c1.medium 都使用适当的 350GB 存储空间启动。

例如

```
./elastic-mapreduce --create --name "Job" --ami-version "latest" --other-options 
```

有关使用 AMI 和“最新”的更多信息，请参见[此处](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/EnvironmentConfig_AMIVersion.html)。目前“最新”设置为 AMI 2.0.4。AMI 2.0.5 是最新的版本，但看起来还是有一点问题。

# ruby - Ruby：自动将实例变量设置为方法参数？

> ID：10856191
> 
> 赞同：10
> 
> 时间：2012-06-01T19:23:11.400
> 
> 标签：ruby, methods, instance-variables, argument-passing

是否有计划实现类似于 CoffeeScript 在方法参数列表中指定实例变量名称的 ruby​​ 行为？像

```
class User
  def initialize(@name, age)
    # @name is set implicitly, but @age isn't.
    # the local variable "age" will be set, just like it currently works.
  end
end 
```

我知道这个问题：[在 Ruby 中，我可以在初始化方法中以某种方式自动填充实例变量吗？](https://stackoverflow.com/questions/9597249/in-ruby-can-i-automatically-populate-instance-variables-somehow-in-the-initializ/10855962)，但是所有的解决方案（包括我自己的）似乎都不符合 ruby​​ 的简单哲学。

而且，这种行为会有什么缺点吗？

更新

造成这种情况的原因之一是 ruby​​ 社区的 DRY（不要重复自己）哲学。我经常发现自己需要重复参数变量的名称，因为我希望将它分配给同名的实例变量。

```
def initialize(name)
  # not DRY
  @name = name
end 
```

我能想到的一个缺点是，如果一个方法没有主体，它可能看起来好像什么都不做。如果您正在快速扫描，这可能看起来像是无操作。但我认为给定时间，我们可以适应。

另一个缺点：如果您在正文中设置其他实例变量，并且您尝试通过将所有赋值放在开头来使其可读，则可能需要更多的认知“能力”才能看到参数列表中也发生了赋值。但是我认为这并不比看到一个常量或方法调用并不得不跳转到它的定义更难。

```
# notice: instance var assignments are happening in 2 places! 
def initialize(@name)
  @errors = []
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T22:13:08.283

经过一番思考，我想知道是否可以从 ruby​​ 方法中实际获取参数名称。如果是这样，我可以使用像“iv_”这样的特殊参数前缀来指示应该将哪些参数设置为实例变量。

并且有可能：[如何使用反射获取参数名称](https://stackoverflow.com/questions/622324/getting-argument-names-in-ruby-reflection)。

是的！所以我也许可以写一个模块来为我处理这个。然后我被卡住了，因为如果我调用模块的辅助方法，它不知道参数的值，因为它们是调用者的本地。啊，但是 ruby​​ 有 Binding 对象。

这是模块（仅限 ruby​​ 1.9）：

```
module InstanceVarsFromArgsSlurper
  # arg_prefix must be a valid local variable name, and I strongly suggest
  # ending it with an underscore for readability of the slurped args.
  def self.enable_for(mod, arg_prefix)
    raise ArgumentError, "invalid prefix name" if arg_prefix =~ /[^a-z0-9_]/i
    mod.send(:include, self)
    mod.instance_variable_set(:@instance_vars_from_args_slurper_prefix, arg_prefix.to_s)
  end

  def slurp_args(binding)
    defined_prefix = self.class.instance_variable_get(:@instance_vars_from_args_slurper_prefix)
    method_name = caller[0][/`.*?'/][1..-2]
    param_names = method(method_name).parameters.map{|p| p.last.to_s }
    param_names.each do |pname|
      # starts with and longer than prefix
      if pname.start_with?(defined_prefix) and (pname <=> defined_prefix) == 1
        ivar_name = pname[defined_prefix.size .. -1]
        eval "@#{ivar_name} = #{pname}", binding
      end
    end
    nil
  end
end 
```

这是用法：

```
class User
  InstanceVarsFromArgsSlurper.enable_for(self, 'iv_')

  def initialize(iv_name, age)
    slurp_args(binding)  # this line does all the heavy lifting
    p [:iv_name, iv_name]
    p [:age, age]
    p [:@name, @name]
    p [:@age, @age]
  end
end

user = User.new("Methuselah", 969)
p user 
```

输出：

```
[:iv_name, "Methuselah"]
[:age, 969]
[:@name, "Methuselah"]
[:@age, nil]
#<User:0x00000101089448 @name="Methuselah"> 
```

它不会让你有一个空的方法体，但它是 DRY。我确信它可以通过仅指定哪些方法应该具有此行为（通过 alias_method 实现）而不是在每个方法中调用 slurp_args 来进一步增强 - 规范必须在定义所有方法之后。

请注意，模块和辅助方法名称可能会得到改进。我只是使用了想到的第一件事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T02:36:39.613

实际上...

```
class User
  define_method(:initialize) { |@name| }
end

User.new(:name).instance_variable_get :@name
# => :name 
```

适用于 1.8.7，但不适用于 1.9.3。现在，我*从哪里*得知这...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:32:16.250

我想你回答了你自己的问题，它不符合红宝石的简单哲学。它会增加方法中处理参数的额外复杂性，并将管理变量的逻辑上移到方法参数中。我可以看到这样的论点，即它使代码的可读性降低了，但它确实让我觉得不是很冗长。

@ 参数必须应对的一些场景：

```
def initialize( first, last, @scope, @opts = {} )

def search( @query, condition )

def ratchet( @*arg  ) 
```

所有这些场景都应该有效吗？只是`initialize`？`@*arg`在我看来，这似乎特别冒险。所有这些规则和排除使 Ruby 语言更加复杂。为了自动实例变量的好处，我认为这不值得。

# php - 我可以从连接的类名中实例化一个对象吗？

> ID：10856194
> 
> 赞同：1
> 
> 时间：2012-06-01T19:23:16.367
> 
> 标签：php, class, object, instantiation

> **可能重复：**
> [基于字符串动态创建 PHP 对象](https://stackoverflow.com/questions/2201335/dynamically-create-php-object-based-on-string)

有时我可以通过从连接字符串实例化一个对象来节省一行代码，例如：

`<?php $_oMyObject = new "Path_To_My_".$_sClassName; ?>`

但这会导致解析错误 - 有没有办法实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:25:35.323

尝试这个

```
<?php $_oMyObject = new "Path_To_My_".$_sClassName(); ?> 
```

# c# - 网格和画布或两者兼而有之？

> ID：10856202
> 
> 赞同：0
> 
> 时间：2012-06-01T19:24:01.397
> 
> 标签：c#, .net, wpf, xaml

我正在创建一个包含两个库的定制设计软件库。从一个库中，我可以获得绘制形状的方法，例如`rectangle`和`ellipse`（它使用`Canvas`C# 中的类），而在另一个库中使用了一个`adorner`类。我需要同时使用两个对象（客户控件进行拖放），还需要让用户同时绘制这些形状。

以前，我可以看到 `<lib:TheCanvas x:Name="myCanvas" />`已经嵌入到 XAML 中。稍后，所有`adorner`对象都被创建并放置在一个`<Grid></Grid>`区域内。

是否可以将这两者结合起来并实现这两个库的一个应用程序库，以便`Adorner`可以在页面上拖放和绘制对象和形状？

请指教。

谢谢，阿米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:45:29.983

是的，它看起来可能，您可以为您的形状（形状和装饰器）创建一个包装器；并扩展 Canvas 控件以支持形状包装对象的拖放。

看看这个具有类似实现的文章系列 -

WPF 图表设计器 -[第 4](http://www.codeproject.com/Articles/24681/WPF-Diagram-Designer-Part-4)部分、[第 3](http://www.codeproject.com/Articles/23871/WPF-Diagram-Designer-Part-3)部分、[第 2](http://www.codeproject.com/Articles/23265/WPF-Diagram-Designer-Part-2)部分、[第 1 部分](http://www.codeproject.com/Articles/22952/WPF-Diagram-Designer-Part-1)

# objective-c - 有没有办法为 iOS 解锁屏幕提供自定义用户身份验证过程？

> ID：10856204
> 
> 赞同：3
> 
> 时间：2012-06-01T19:24:18.570
> 
> 标签：objective-c, ios

我正在为拥有现有安全解决方案的大型企业开发 iPad 应用程序，这些解决方案为整个公司的无数网络和非网络应用程序提供身份验证/授权等服务。员工使用公司凭据（用户 ID/密码）对这些安全平台进行身份验证。如今，这些员工正在 BYOD 为他们的 iPad 工作，我想设计一种方法让他们使用相同的公司凭据来解锁设备，而不是使用完全独立的设备密码。

所以我的问题是：有没有办法将自定义“身份验证提供程序”插入 iOS 解锁屏幕，而不是依赖 iOS 验证设备密码？我知道密码也用于派生设备上的加密密钥，但我们可以将用户的公司密码用于相同目的。

我正在寻找的是类似于 ASP.NET 的身份验证提供模型的解决方案。我怀疑这目前是否存在，因为所有 iOS 开发都是以应用程序为中心的（MDM 除外），但也许有人知道一个有效的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T00:07:13.573

Are you saying you want the authentication to occur every time the screen unlocks via a swipe regardless of which app you will be returning to? If so:

I am 99% sure this is not possible yet. A member of my family works for CIRM (California Institute for Stem Cell Research) and even though they switched to iPhones for work, they still use the 4 digit passcode setup as applied in settings for authentication to gain access to the entirety of the phone.

Everything related to the underlying operating system is off limits because of Apple for the most part, so I'd imagine this is mostly not possible.

Maybe you could do some tedious hacking after jail-breaking the phones but that would violate a lot of laws which is especially bad in a corporate setting, so don't do that.

What is possible is having an app you create requiring re-authentication each time someone begins using it (Whenever it re-enters the foreground). It seems like you already knew that though and that wasn't really your question.

Hope this helps. Good luck.

# jquery - 没有控件的 iPad html5 视频？

> ID：10856209
> 
> 赞同：24
> 
> 时间：2012-06-01T19:24:53.770
> 
> 标签：jquery, ipad, html, video, html5-video

这让我一整天都在想，但我不确定如何让 html5 视频播放器在没有本机控件的情况下工作。

我不想要任何控制，但如果我不包含它们，视频似乎不想播放，即使我在下面添加一些 javascript 试图强制它播放，它也适用于 iPhone 和多个浏览器，但不是 iPad，这很奇怪，知道吗？

如果有帮助，这里有一些标记！

```
<video src="video.mp4" id="video" poster="image.jpg" onclick="this.play();"/></video>

$('#video').click(function(){
   document.getElementById('video').play();
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-01T23:11:46.820

iOS 不支持`autoplay`video 标签的属性。您似乎也不能使用 jQuery 绑定到来自 video 元素的单击事件（请参阅[fiddle](http://jsfiddle.net/LfBmF/2/)）。

一种解决方法是在视频元素上放置一个不可见的 div 并将播放视频的单击绑定到该元素（参见[小提琴](http://jsfiddle.net/LfBmF/7/)）：

**HTML：**

```
<div id="video-overlay"></div>
<video id="video" width="400" height="300">
      <source id='mp4'
        src="http://media.w3.org/2010/05/sintel/trailer.mp4"
        type='video/mp4'>
      <source id='webm'
        src="http://media.w3.org/2010/05/sintel/trailer.webm"
        type='video/webm'>
      <source id='ogv'
        src="http://media.w3.org/2010/05/sintel/trailer.ogv"
        type='video/ogg'>
</video> 
```

**CSS：**

```
#video { border: 1px solid black; }
#video-overlay { position: absolute; width: 400px; height: 300px; z-index: 999;  } 
```

**jQuery：**

```
$('#video-overlay').click(function(){
   document.getElementById('video').play();
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-30T19:57:53.023

按照设计，您不能自动播放视频，但在播放开始后删除控件很简单，我猜这是您真正想要的效果：

```
<video id="video" src="video.mp4" poster="image.jpg" preload="auto" onplaying="this.controls=false"/></video> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-07-15T00:08:42.703

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-26T00:44:11.143

我能做的最好的就是在用户触摸屏幕做任何事情时播放视频，甚至向下滚动页面。

```
function playVideoNow(e)
{
    document.getElementById('video').play();
    document.removeEventListener('touchstart', playVideoNow);
}

document.addEventListener('touchstart', playVideoNow, false); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-13T09:04:19.947

截至目前，iOS 6`autoplay`在某些设备上支持该元素。

检查[http://www.longtailvideo.com/html5/autoloop/](http://www.longtailvideo.com/html5/autoloop/)以供参考。

# coldfusion - ColdFusion、MS Word 文档和希腊字符

> ID：10856213
> 
> 赞同：1
> 
> 时间：2012-06-01T19:25:13.573
> 
> 标签：coldfusion, ms-word

我正在尝试从数据库动态构建 word 文档（我正在使用 CFC 进行查询处理）。我的努力是成功的，但我只能复制英文文档。但是，我的应用程序使用的是希腊语。

当我尝试构建包含希腊字符的文档时，输出如下所示`??????????????????`：我尝试了很多东西，但没有任何效果。奇怪的是，当我使用相同的 CFC 进行 PDF 复制时，希腊字符输出正确。

**cfm 文件：**

```
<cfheader name="Content-Disposition" value="inline; filename=Save-Print.doc" charset="utf-8">
<cfcontent type="application/msword">

<html xmlns:o="urn:schemas-microsoft-com:office:office"
      xmlns:w="urn:schemas-microsoft-com:office:word" 
      xmlns="http://www.w3.org/TR/REC-html40">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Print</title>
<!--[if gte mso 9]> 
<xml>
<w:WordDocument>
<w:View>Print</w:View>
<w:Compatibility>
<w:UseAsianBreakRules/>
</w:Compatibility>
<w:Zoom>100</w:Zoom>
<w:DoNotOptimizeForBrowser/>
</w:WordDocument>
</xml>
<![endif]-->

<!--[if supportFields]>
<div style="mso-element:header" id="lala">
<p class=MsoHeader><span style="color:red">
<![endif]-->
<style>
<!--
@page Section1
{
size:8.5in 11.0in;
margin:1.0in 1.25in 1.0in 1.25in;
mso-header-margin:.5in;
mso-footer-margin:.5in; 
mso-paper-source:0;
mso-header:url("http://localhost:8500/BookLedger_Final/resources/cfScripts/Header.html") h1;
mso-footer:url("http://localhost:8500/BookLedger_Final/resources/cfScripts/Header.html") f1;
}
div.Section1 {page:Section1;}
p.MsoHeader {
border-bottom-width: 1px;
border-bottom-style: solid;
border-bottom-color: #333;
}
p.MsoFooter {
}
-->
</style>
</head>

<body>

<cfif not IsDefined("URL.id")>
      <cfelseif not IsDefined("URL.model")>
</cfif>

  <!--- Get print details --->
  <cfinvoke
    component="Print"
    method="myPrint"
    returnvariable="getMember"
    id="#URL.id#" 
    model="#URL.model#">

    <div class=Section1>

      <cfoutput query="getMember">
        <b id="lala">#Title#</b>
        <p style="color:##1c1c1c"><i>#Body#</i></p>
      </cfoutput>      

    </div> 

</body>
</html> 
```

**cfc 文件：**

```
<cfcomponent>

    <cffunction name="myPrint" access="remote" returntype="query" output="no">

        <cfargument name="id" default="0" required="false" type="numeric">
        <cfargument name="model" default="" required="false" type="any">
        <cfset model = #ARGUMENTS.model#>

        <cfif model EQ "member">

        <cfquery name="getMember" datasource="rental">            
            SELECT CONCAT(rental.members.firstname,' ',rental.members.lastname) AS 'Title',rental.members.biog AS 'Body'
            FROM rental.members
            WHERE rental.members.id = #ARGUMENTS.id#
            AND rental.members.model = "#ARGUMENTS.model#"
        </cfquery>

        <!---<cfset queryToString = serializeJson(getMember)>
        <cfset strippedQuery = REReplace(queryToString,'<[^>]*>','','all')>--->

        <cfreturn getMember>

        <cfelseif model EQ "new_member">

        <cfquery name="getMember" datasource="rental">            
            SELECT CONCAT(rental.new_members.firstname,' ',rental.new_members.lastname) AS 'Title',rental.new_members.biog  AS 'Body' 
            FROM rental.new_members
            WHERE rental.new_members.id = #ARGUMENTS.id#
            AND rental.new_members.model = "#ARGUMENTS.model#"
        </cfquery>

        <cfreturn getMember>

        <cfelseif model EQ "book">

        <cfquery name="getMember" datasource="rental">            
            SELECT rental.books.title AS 'Title',rental.books.description AS 'Body'
            FROM rental.books
            WHERE rental.books.id = #ARGUMENTS.id#
            AND rental.books.model = "#ARGUMENTS.model#"
        </cfquery>

        <cfreturn getMember>

        <cfelseif model EQ "journal">

        <cfquery name="getMember" datasource="rental">            
            SELECT rental.journals.title AS 'Title',rental.journals.description AS 'Body'
            FROM rental.journals
            WHERE rental.journals.id = #ARGUMENTS.id#
            AND rental.journals.model = "#ARGUMENTS.model#"
        </cfquery>

        <cfreturn getMember>

        <cfelseif model EQ "cd">

        <cfquery name="getMember" datasource="rental">            
            SELECT rental.cd.title AS 'Title',rental.cd.description AS 'Body'
            FROM rental.cd
            WHERE rental.cd.id = #ARGUMENTS.id#
            AND rental.cd.model = "#ARGUMENTS.model#"
        </cfquery>

        <cfreturn getMember>

        </cfif>

    </cffunction>

</cfcomponent> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:57:46.967

当我尝试您的 pastebin 示例时，我也胡言乱语。看起来您删除了`<meta>`指定 utf-8 的标签。当我重新添加它时，这些字符在 MS Word 中为我正确显示。

```
<cfprocessingdirective pageencoding="utf-8">
<cfheader name="Content-Disposition" value="inline; filename=Save-Print.doc" charset="utf-8">
<cfcontent type="application/msword; charset=utf-8">
<html xmlns:o="urn:schemas-microsoft-com:office:office"
      xmlns:w="urn:schemas-microsoft-com:office:word" 
      xmlns="http://www.w3.org/TR/REC-html40">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Print</title>
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T11:49:23.807

听起来很像字符集问题。阅读这篇文章[http://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)，它很好地解释了事情。不过，在这种情况下，您已经竭尽全力将所有内容设置为 utf-8，这让我觉得您从数据库中获得的不是 unicode，而是希腊代码页。作为一个实验，您可以尝试将 cfheader 和标签中的字符集设置为 ISO-8859-7 或 Windows-1253。这可能会正确显示内容。您也可以取出并在 IE 中打开文档。有一个 View->Encoding 菜单可让您更改 IE 用于呈现文档的编码，该文档可能显示实际使用的内容。

通过注释掉标签，我认为您是在让浏览器决定内容类型，并且它可能正在使其成为希腊字符集之一。您还可以尝试使用[fiddler](http://www.fiddler2.com/fiddler2/)来捕获和检查来自 CF 的响应。如果希腊字符真正编码为 utf-8，它们将占用超过 1 个字节，而如果它们在希腊代码页中，它们将仅占用 1 个字节。在 fiddler 的响应选项卡中使用十六进制视图应该很快就会向您展示这一点。

另一种选择可能是使用 Apache POI 之类的东西来生成“真实的”单词 .doc 或 .docx 文件。这是一大块工作，但我们在我工作的地方使用它效果很好。

# ember.js - 你如何制作一个知道 Ember 绑定的 Handlebars 助手？

> ID：10856216
> 
> 赞同：5
> 
> 时间：2012-06-01T19:25:31.170
> 
> 标签：ember.js, handlebars.js

当我尝试将 Ember 绑定或计算属性传递给自定义 Handlebars 助手时，助手会收到字符串而不是值。如何将值放入助手中？

模板：

```
{{my_helper my.binding}} 
```

助手接收“my.binding”而不是相应的值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T11:08:03.030

前几天[推高手](https://github.com/emberjs/ember.js/pull/1274)解决了这个问题：使用Ember.Handlebars.registerBoundHelper。

```
Ember.Handlebars.registerBoundHelper('myHelper', 
    function(myBinding, options) {
        return myDealWith(myBinding);
    }
); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T11:09:26.947

您必须使用*Ember.getPath*来获取辅助方法中的值。
请参阅文档[http://emberjs.com/documentation/#toc_writing-custom-helpers](http://emberjs.com/documentation/#toc_writing-custom-helpers)

# fabric - Fabric：并行运行任意远程 shell 命令

> ID：10856219
> 
> 赞同：4
> 
> 时间：2012-06-01T19:25:48.117
> 
> 标签：fabric

Fabric 的任意命令模式允许我执行

```
$ fab [options] -- [shell command] 
```

[如此处所定义](http://docs.fabfile.org/en/1.4.0/usage/fab.html)

现在，我如何利用结构**并行**运行命令？顺序执行需要花费大量时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T02:09:41.927

From the [docs on the fab command](http://docs.fabfile.org/en/1.4.2/usage/fab.html#cmdoption-P) use the -P option. For example:

```
$ fab -R role_name -P -- du 
```

# android - App Engine Connected Android：失败连接被拒绝

> ID：10856220
> 
> 赞同：0
> 
> 时间：2012-06-01T19:25:51.017
> 
> 标签：android, google-app-engine

我一直在按照这些说明[https://developers.google.com/eclipse/docs/appeng_android_create_project](https://developers.google.com/eclipse/docs/appeng_android_create_project)设置一个应用引擎连接的 android 项目。

我有 gwt 2.4、android sdk 18、app engine plugin 1.6.6、eclipse indigo 和 windows 7。我还注册了一个 c2dm 帐户。我正在尝试在我的运行 android 4 的 Galaxy nexus 上运行该项目，因为我似乎无法将帐户添加到模拟器以“连接到云”。

当我单击“打个招呼”时，我最终会收到错误消息：

```
Failure: Connection to http://192.168.2.2:8888 refused 
```

根据ipconfig，192.168.2.2实际上是我的ip地址。

我知道这个问题[App Engine Connected Android : can't make sample project 正常工作](https://stackoverflow.com/questions/8872521/app-engine-connected-android-cant-make-sample-project-work-properly)但是他的错误显示连接到 127.0.1.1 失败，而我的显示我的实际 IP 地址。尽管如此，我已经尝试使用我的本地和公共 IP 地址来解决他的解决方案，但总是得到相同的错误，只是使用了不同的 IP 地址。

有人可以帮忙吗？

编辑：

在彼得指出我的 IP 地址问题后，我决定快速部署到应用程序引擎，看看它是否在那里工作。我成功部署，然后在我的手机上运行了 android 部分。单击强制关闭后，应用程序会说“正在连接...”很长时间，然后强制关闭。在 logcat 中，我收到错误消息：

```
06-01 18:05:14.678: E/AndroidRuntime(11328): FATAL EXCEPTION: main
06-01 18:05:14.678: E/AndroidRuntime(11328): java.lang.RuntimeException: Error receiving broadcast Intent { act=com.testprojectfourteen.UPDATE_UI flg=0x10 (has extras) } in com.testprojectfourteen.TestProjectFourteenActivity$1@41826430
06-01 18:05:14.678: E/AndroidRuntime(11328):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:737)
06-01 18:05:14.678: E/AndroidRuntime(11328):    at android.os.Handler.handleCallback(Handler.java:605)
06-01 18:05:14.678: E/AndroidRuntime(11328):    at android.os.Handler.dispatchMessage(Handler.java:92)
06-01 18:05:14.678: E/AndroidRuntime(11328):    at android.os.Looper.loop(Looper.java:137)
06-01 18:05:14.678: E/AndroidRuntime(11328):    at android.app.ActivityThread.main(ActivityThread.java:4340)
06-01 18:05:14.678: E/AndroidRuntime(11328):    at java.lang.reflect.Method.invokeNative(Native Method)
06-01 18:05:14.678: E/AndroidRuntime(11328):    at java.lang.reflect.Method.invoke(Method.java:511)
06-01 18:05:14.678: E/AndroidRuntime(11328):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-01 18:05:14.678: E/AndroidRuntime(11328):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-01 18:05:14.678: E/AndroidRuntime(11328):    at dalvik.system.NativeStart.main(Native Method)
06-01 18:05:14.678: E/AndroidRuntime(11328): Caused by: java.lang.NullPointerException
06-01 18:05:14.678: E/AndroidRuntime(11328):    at android.app.PendingIntent.getActivity(PendingIntent.java:195)
06-01 18:05:14.678: E/AndroidRuntime(11328):    at com.testprojectfourteen.Util.generateNotification(Util.java:119)
06-01 18:05:14.678: E/AndroidRuntime(11328):    at com.testprojectfourteen.TestProjectFourteenActivity$1.onReceive(TestProjectFourteenActivity.java:82)
06-01 18:05:14.678: E/AndroidRuntime(11328):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:728)
06-01 18:05:14.678: E/AndroidRuntime(11328):    ... 9 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:26:15.493

The `192.168.2.2` is a [private IP address](http://en.wikipedia.org/wiki/Private_network) and is not visible on the internet. C2DM is a google-run public service which tries to connect to your private IP, but it can not reach it, hence the error.

The workaround is to find out the [internet-visible IP](http://www.whatismyip.com/) of you router and set up [port-forwarding](http://en.wikipedia.org/wiki/Port_forwarding) on it (this is router dependent).

# ios - 弹出窗口中的动画模态视图转换

> ID：10856221
> 
> 赞同：1
> 
> 时间：2012-06-01T19:25:54.107
> 
> 标签：ios

我在弹出窗口中遇到动画模态转换的问题。出于某种原因，当我将过渡设置为动画时，弹出框会水平调整大小。当我没有动画时，没有调整大小。图1有动画，图2没有。

我创建转换的代码是：

```
StoreDetailViewController *sdvc = [[StoreDetailViewController alloc] initWithNibName:@"StoreDetailViewController" bundle:nil];

sdvc.modalPresentationStyle = UIModalPresentationCurrentContext;
sdvc.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
sdvc.modalInPopover = YES;

sdvc.play = playData;
sdvc.st = self;
sdvc.indoors = indoors;

[parent presentModalViewController:sdvc animated:YES]; 
```

[http://i.stack.imgur.com/RtcEb.png](http://i.stack.imgur.com/RtcEb.png)

[http://i.stack.imgur.com/ioY0R.png](http://i.stack.imgur.com/ioY0R.png)

# php - 从 div 中获取值。

> ID：10856230
> 
> 赞同：4
> 
> 时间：2012-06-01T19:26:25.373
> 
> 标签：php, forms, html, input

有没有办法从表单中的 div 元素获取值而不是使用输入？

我知道这是一个愚蠢的问题，但我只想知道它是否可能。像 PHP DOM 之类的东西？

或者有没有办法在点击提交时将 div 更改为输入？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T19:28:20.370

使用 Javascript，您可以在提交表单之前将 div 的内容放入（隐藏的）输入中。

它在 jQuery 中大致如下所示：

```
$('#myForm').submit(function() {
  $('#myHiddenInput').val($('#myDiv').html());
}); 
```

编辑：你们为什么谈论 AJAX？在这种情况下不需要使用 AJAX！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T19:41:44.103

*这是一个没有* [jQuery](http://jquery.com/)的 JavaScript 解决方案：

```
<script>

    function prepareSubmit() {
        var payload = document.getElementById("target").innerHTML;
        document.getElementById("divContents").value = payload;
        return true;
    }​

</script> 
```

标记：

```
<form name="test">
    <div id="target">Payload</div>
    <input type="hidden" id="divContents" name="divContents" />
    <input type="submit" onclick="return prepareSubmit()" value="submit" />
</form>​ 
```

onclick 函数在提交事件之前运行。`prepareSubmit`实际上，除非返回 true ，否则表单不会提交。它将`div`内容插入到隐藏的输入中。我认为这是最简单的解决方案。确保在表单之前加载脚本。

*   [**演示**](http://jsfiddle.net/paislee/xwckr/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T19:29:43.270

PHP 代码在服务器端处理，因此客户端 DOM 基本上不会有 PHP 操作。

使用 JavaScript（最简单的 jQuery 恕我直言），您可以从 DOM 中提取信息并将其作为附加字段包含在表单提交中。

有很多关于 SO 的问题涉及使用 jQuery 添加到表单提交，例如

[Safari / JQUery - 在页面上插入和更新隐藏字段](https://stackoverflow.com/questions/1295470/safari-jquery-insert-and-update-hidden-field-on-page)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T19:29:40.150

使用 jQuery 在 div 中发布信息。做起来很简单，只有几行代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T19:30:02.417

您可以在 javascript 文件中使用 ajax 调用。您需要做的就是调用 div id，例如 $("#yourdiv").val(); 这将为您提供 div id 中任何内容的值。如果你给出一个更具体的例子并展示你的一些代码，我可能会更具体。吉姆

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T19:32:16.123

有多种方法可以对此进行归档。

**隐藏字段**

您可以创建隐藏的输入字段并在提交时使用 javascript 填充这些字段

**阿贾克斯**

使用例如 jQuery 的 AJAX 库来序列化数据并通过 AJAX 发布

**样式输入字段，使它们看起来像您正在谈论的 div**

另一种选择是只使用你习惯的输入字段，并以它们看起来不再像输入的方式设置它们的样式

如果您需要其中任何一个示例，请告诉我。

# android - 安卓设计。图片太大

> ID：10856239
> 
> 赞同：0
> 
> 时间：2012-06-01T19:27:23.267
> 
> 标签：android, android-layout

你好必须在我的应用程序中创建一个标题，但我收到的图像对于手机来说太大了。同时应用`wrap_content`高度和宽度会产生非常奇怪的外观。并指定`layout_height`and`layout_width`缩放它真的是错误的！

我现在必须指定设计器的外观。我不知道该告诉他什么以及如何指定。有人可以帮我吗？

我正在给出一个示例图像。这个想法是我希望它在屏幕上看起来正确。![在此处输入图像描述](../Images/ecef9ca8895399422c8da4e3f17293a9.png)

这显然是一个非常大的图像。而结果更令人震惊。任何人都可以在这件事上提供帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T20:18:16.870

查看 Android 文档：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)。我还建议阅读这篇简单的文章[http://coding.smashingmagazine.com/2011/06/30/designing-for-android/](http://coding.smashingmagazine.com/2011/06/30/designing-for-android/)

一些简单的规则是：

*   对于不同的屏幕密度，您可能需要不同的图像。
*   对于不同的屏幕尺寸，您可能需要不同的布局。
*   我通常开始考虑“正常尺寸”和“中等密度”的设备，这意味着分辨率为 320 x 480 像素，密度为 160 dpi。

所以，简单来说，如果你让他制作 160 x 240 尺寸的图像，在中等密度的设备中，它将有一半的屏幕宽度和一半的高度。如果您在小密度设备中安装相同的应用程序，图像会看起来更大（与屏幕尺寸相比）。如果安装在高密度设备中，图像会显得更小。

然后你可以让他制作不同尺寸的其他图像，以很好地适应其他密度的设备。始终考虑 75 : 100 : 150 的比例。这意味着如果图像在中密度下具有 100 x 100 像素，则在小密度下应该有 75 x 75，在高密度下应该有 150 x 150。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:43:57.703

这是谷歌为安卓应用程序设计者提供的最新说明：http: [//developer.android.com/design/index.html](http://developer.android.com/design/index.html)

其他对设计师有用的链接：

android 4 上的新功能（最新版本的 android，又名 ICS - 冰淇淋三明治）：http: [//developer.android.com/sdk/android-4.0-highlights.html](http://developer.android.com/sdk/android-4.0-highlights.html) http://www.android.com/about/冰淇淋三明治/视频： [http ://www.youtube.com/watch?v=M-AZ08wCwJA](http://www.youtube.com/watch?v=M-AZ08wCwJA)

android 3 上的新功能（平板电脑版本的 android，又名蜂窝，但大多数东西也与 4.0 相关）：http: [//developer.android.com/sdk/android-3.0-highlights.html](http://developer.android.com/sdk/android-3.0-highlights.html) 视频： [http://www .google.com/events/io/2011/sessions/honeycomb-highlights.html](http://www.google.com/events/io/2011/sessions/honeycomb-highlights.html) http://www.google.com/events/io/2011/sessions/designing-and-implementing-android-uis-for-phones-和-tablets.html

android上不同屏幕处理的一些信息：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:51:32.947

转到此链接：[http ://resizepic.com/](http://resizepic.com/)

将您的在线图像调整为这些尺寸，并将它们相应地粘贴到这些文件夹中：

1.  72 X 72 - 可绘制的 hdpi
2.  48 X 48 - 可绘制 mdpi
3.  36 X 36 - 可绘制的 ldpi
4.  96 X 96 - 可绘制-xhdpi

这是解决它的最佳简单方法。

# c# - ASP MVC 文件上传 HttpPostedFileBase 为空

> ID：10856240
> 
> 赞同：13
> 
> 时间：2012-06-01T19:27:39.507
> 
> 标签：c#, asp.net-mvc, razor, upload, httppostedfilebase

在我的控制器中，因为我希望能够填写有关视频的一些详细信息并实际上传它，所以 Video 类不需要实际的视频，因为它将被传递给另一个 Web 服务。

```
public class VideoUploadModel
    {
        public HttpPostedFileBase vid { get; set; }
        public Video videoModel { get; set; }
    }

    //
    // POST: /Video/Create
    [HttpPost]
    public ActionResult Create(VideoUploadModel VM)
    {
        if (ModelState.IsValid)
        {
            db.Videos.AddObject(VM.videoModel);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }

        ViewBag.UserId = new SelectList(db.DBUsers, "Id", "FName", VM.videoModel.UserId);
        return View(VM);
    } 
```

在我看来我有

```
@model LifeHighlightsShoeLace.Controllers.VideoController.VideoUploadModel
@{
   ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script> 
```

```
@using (Html.BeginForm("Create", "Video", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
@Html.ValidationSummary(true)
<fieldset>
    <legend>Video</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.videoModel.KalturaID)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.videoModel.KalturaID)
        @Html.ValidationMessageFor(model => model.videoModel.KalturaID)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.videoModel.Size)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.videoModel.Size)
        @Html.ValidationMessageFor(model => model.videoModel.Size)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.videoModel.Date)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.videoModel.Date)
        @Html.ValidationMessageFor(model => model.videoModel.Date)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.videoModel.UploadedBy)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.videoModel.UploadedBy)
        @Html.ValidationMessageFor(model => model.videoModel.UploadedBy)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.videoModel.UserId, "User")
    </div>

    <div class="editor-field">
        @Html.DropDownList("UserId", String.Empty)
        @Html.ValidationMessageFor(model => model.videoModel.UserId)
    </div>
    <div class="editor-field">
    <input name="model.vid" type="file" />
    </div>
    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset> 
```

}

当我提交表单时，VM 的 videoModel 部分已填写，但实际文件为空。有任何想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-01T19:41:50.947

根据OP评论更新

在 web.config 文件中设置最大文件长度 更改“？” 到您希望最大的文件大小，例如 65536 是 64MB

```
<configuration>
  <system.web>
    <httpRuntime maxRequestLength="?" /> 
  </system.web>
</configuration> 
```

您不能将文件添加到模型中，它将在它自己的字段中，而不是模型的一部分

```
<input name="videoUpload" type="file" /> 
```

你的操作不正确。它需要接受文件作为它自己的参数（或者如果多次`IEnumerable<HttpPostedFileBase>`用作参数类型）

```
[HttpPost]
public ActionResult Create(VideoUploadModel VM, HttpPostedFileBase videoUpload)
{
    if (ModelState.IsValid)
    {
        if(videoUpload != null) { // save the file
            var serverPath = server.MapPath("~/files/" + newName);
            videoUpload.SaveAs(serverPath);
        }

        db.SaveChanges();
        return RedirectToAction("Index");  
    }

    ViewBag.UserId = new SelectList(db.DBUsers, "Id", "FName", VM.videoModel.UserId);
    return View(VM);
} 
```

如果您允许选择多个文件，则必须允许

```
[HttpPost]
public ActionResult Create(VideoUploadModel VM, IEnumerable<HttpPostedFileBase> videoUpload)
{
    if (ModelState.IsValid)
    {
        if(videoUpload != null) { // save the file
            foreach(var file in videoUpload) {
                var serverPath = server.MapPath("~/files/" + file.Name);
                file.SaveAs(serverPath);
            }
        }

        db.SaveChanges();
        return RedirectToAction("Index");  
    }

    ViewBag.UserId = new SelectList(db.DBUsers, "Id", "FName", VM.videoModel.UserId);
    return View(VM);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T19:36:07.413

它不绑定的原因是模型绑定器仅查看`QueryString`, `Form`, 和`RouteData`绑定复杂模型（例如您的模型）时。解决此问题的方法是在您的操作方法中添加另一个参数。（也将您的“名称”更改为“vid”）

```
[HttpPost]
public ActionResult Create(VideoUploadModel VM, HttpPostedFileBase vid)
{
    //add your vid to the model or whatever you want to do with it :)

    if (ModelState.IsValid)
    {
        db.Videos.AddObject(VM.videoModel);
        db.SaveChanges();
        return RedirectToAction("Index");  
    }

    ViewBag.UserId = new SelectList(db.DBUsers, "Id", "FName", VM.videoModel.UserId);
    return View(VM);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T09:46:32.393

为我工作：

```
public class CreateVeiwModel
    {
        public Speaker Speaker { get; set; }
        public Guid Guid { get; set; }
        public HttpPostedFileBase File { get; set; }
    } 
```

控制器：

```
[HttpPost]
        public ActionResult Create(CreateVeiwModel model)
        {
            if (ModelState.IsValid)
            try
            {
                Repository.AddSpeaker(model.Speaker);
            ...
        } 
```

看法：

```
@Html.Label("Most Up-to-Date CV")
             <input type="file" name="File"/> 
```

我认为解决方案放在那里：`Model.File`〜`<input name="File"/>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T19:31:56.687

改变

```
<input name="model.vid" type="file" /> 
```

到

```
@Html.TextBoxFor(model => model.vid, new {type="file"}) 
```

根据您页面上的其他内容以及视图的呈现位置，MVC 将生成唯一 ID，我认为您的硬编码 ID 未与表单字段正确关联。

# objective-c - Objective C 中的接口有什么意义？

> ID：10856249
> 
> 赞同：2
> 
> 时间：2012-06-01T19:28:45.740
> 
> 标签：objective-c

我已经编写Objective C 将近一年了，我从来没有机会将接口（*.h）用于其他目的，而不是声明您可以在实现（* .m）中找到的几乎相同的类结构。

由于我来自其他没有Objective C接口之类的语言，我想知道我是否缺少一些或几种用途，或者这只是这种特定语言可能从其前身继承的约定。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T19:33:29.533

您的接口是该类的公共 API。任何未在接口中声明的东西都不能从类外部访问。如果您更多地考虑 C++ 或 Java，则 .m 文件中的所有内容（未在 .h 中的 @interface 中声明）都是私有的。这就是为什么在 Objective-C 中你不会经常看到它们的关键字 @private、@public 或 @protected。

无论您在界面中放置什么，都是您打算让您的班级用户使用的东西，仅此而已。这遵循最小特权原则。

您还可以将 @interface 视为您的课程的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T19:42:13.723

> 除了声明几乎可以在实现 (.m) 中找到的类结构之外，我从来没有机会将接口 (.h) 用于其他目的。

该接口是该类的公开声明的接口。实现是它尊重该接口的方式。那么一个简单的例子：

```
@interface Accumulator: NSObject

- (void)addAmount:(NSUInteger)amount;

@property (nonatomic, assign, readonly) NSUInteger currentTotal;

@end 
```

和：

```
@implementation Accumulator
{
    NSUInteger currentTotal; // an instance variable; we don't want to publish
                             // these because they're nothing to do with the
                             // interface we implement. Object orientation means 
                             // not thinking about implementations beyond
                             // your own.
}

@synthesize currentTotal;

- (void)addAmount:(NSUInteger)amount
{
     currentTotal += amount;
}

@end 
```

因此，作为一般准则，您没有放入 @interface 的内容包括：

*   实例变量；
*   不适合外用的方法；
*   对您依赖的其他类的引用，但依赖于您的人不需要知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T19:30:59.530

接口文件类似于 C 和 C++ 中使用的头文件，仅在 Objective C 中，您还可以声明诸如[属性](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)和[协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html)之类的好东西（对于需要确认对象接口期望的委托之类的东西非常有用传递消息）。

您的对象的接口文件可以包含在其他对象的实现 (.m) 文件中，这样其他对象的实现就可以访问您刚刚实例化（创建）的对象的方法和属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T20:06:32.407

它继承自 C，其中您有定义接口的标头和包含实现的源文件。这确实意味着一些双重输入。

例如，Java 摒弃了这种两个文件的方法，并有一个包含所有内容的文件。它没有 C 的编译和链接阶段，这是标题的部分原因。

标头方法的一个方面是，使用专有代码，您可以将您的标头连同已编译的二进制文件一起提供给某人，他们可以链接到并调用您的 API。这就是微软对 Win32 API 所做的事情，或者苹果对他们的 SDK 和操作系统所做的事情。

另请参阅[为什么在 C++ 中有头文件和 .cpp 文件？](https://stackoverflow.com/questions/333889/in-c-why-have-header-files-and-cpp-files)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T20:35:30.510

扩展已经说过的内容：基于 C 的语言编译器需要对 .c/.cpp/.m 文件中的单词有一定的了解，然后才能开始链接外部库或目标文件。该信息告诉编译器诸如返回类型和函数和方法的参数的数量和类型，以及类中的实例变量和方法。

如果您实际上将整个 .c/.cpp/.m 文件包含在使用其功能的文件中，那么您最终会遇到一个问题，即链接器具有不知道如何处理的重复代码；因此，头文件仅列出了他们实际需要了解的有关*接口*的内容，而不是实现。

C 和 Objective-C 实际上允许您省略各种接口信息，但是如果他们看到提到的函数或方法的标题没有阅读，他们就会做出（通常是不正确的）假设。例如，一个未知的函数名将被正确识别，但编译器将假定它返回一个 int；我的记忆对如何处理参数有点模糊，但是如果您传递的参数与最终链接到的已实现函数中的参数不兼容，它可能不会抱怨。因此编译器无法进行大量检查像 C 这样的静态语言擅长。

# iphone - 将 RestKit 的 RKObjectMapping 和 RKObjectSerializer 用于 RKClient 后参数时出现错误

> ID：10856251
> 
> 赞同：0
> 
> 时间：2012-06-01T19:29:00.460
> 
> 标签：iphone, objective-c, json, restkit

我有一个这样的请求对象：

```
@interface MyUpdate
@property (nonatomic, copy) NSString* name;
@property (nonatomic, assign) int value;
@end

@interface MyRequest
@property (nonatomic, assign) int index;
@property (nonatomic, retain) MyUpdate* update;
@end 
```

我正在使用 RKObjectMapping 和 RKObjectSerializer 创建 JSON 字符串并在 POST 中使用它：

```
RKObjectMapping* updateMapping = [RKObjectMapping mappingForClass:[MyUpdate class]];
[updateMapping mapForKeyPath:@"name" toAttribute:@"Name"];
[updateMapping mapForKeyPath:@"value" toAttribute:@"Value"];

RKObjectMapping* requestMapping = [RKObjectMapping mappingForClass:[MyRequest class]];
[requestMapping mapForKeyPath:@"index" toAttribute:@"Index"];
[requestMapping mapKeyPath:@"update" toRelationship:@"Update" withMapping:updateMapping];

RKObjectSerializer* serializer = [RKObjectSerializer serializerWithObject:request mapping:requestMapping];

[[RKClient sharedClient] post:requestPath params:[serializer serializationForMIMEType:RKMIMETypeJSON error:nil] delegate:self]; 
```

`request`是我`MyRequest`班级的一个实例。`requestPath`只是一个`NSString`.

我不断收到此错误消息，说密钥对 MyUpdate 无效，即使我已经映射了它。我是否错过了使用 RKObjectMapping 的一些关键步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:01:12.340

我使用“RKObjectLoader”来完成这项工作。这是一个例子：

```
 MyUpdate *myUpdate = [[MyUpdate alloc] init];

    [[RKClient sharedClient].HTTPHeaders setValue:RKMIMETypeJSON forKey:@"Content-Type"];      

    // Prepare the request
    NSMutableDictionary *requestDictionary = [[NSMutableDictionary alloc] init];
    [requestDictionary setObject:yourIndexVar forKey:@"Index"];
    [requestDictionary setObject:fileName forKey:@"fileName"];

    NSError* error;
    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:requestDictionary options:NSJSONWritingPrettyPrinted error:&error];

    NSString *JSON = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];

    RKParams *params = [RKRequestSerialization serializationWithData:[JSON dataUsingEncoding:NSUTF8StringEncoding] MIMEType:RKMIMETypeJSON]; 

    // Prepare the response mapping
    RKObjectMapping* objectMapping = [RKObjectMapping mappingForClass:MyUpdate class]];
    [objectMapping mapKeyPath:@"name" toAttribute:@"Name"];    
    [objectMapping mapForKeyPath:@"value" toAttribute:@"Value"];

    [objectMapping mapKeyPath:@"update" toRelationship:@"Update" withMapping:objectMapping];

    RKObjectManager* manager = [RKObjectManager objectManagerWithBaseURL:@"BASE_URL"];  
    [manager setClient:[RKClient sharedClient]];
    [manager.mappingProvider setMapping:objectMapping forKeyPath:@"****Result"];  

    RKObjectLoader *objectLoader = [manager loaderWithResourcePath:@"RELATIVE_PATH"];   

    // For example:
    // BASE_URL = "http://mysite.com/"
    // RELATIVE_PATH (service end-point uri) = "/ServiceName/SaveFile/"
    // **** = "SaveFile"

    objectLoader.targetObject = myUpdate;
    objectLoader.method = RKRequestMethodPOST;
    objectLoader.params = params;
    objectLoader.delegate = self;

    @try 
    {
        [objectLoader send];
    }
    @catch (NSException *exception) 
     {
         NSLog(@"NSException - Name: %@, Reason: %@", exception.name, exception.reason);
     } 
```

# c# - UserProfileManager dll 未在目标框架 3.5 中构建

> ID：10856253
> 
> 赞同：0
> 
> 时间：2012-06-01T19:29:06.513
> 
> 标签：c#, .net, sharepoint, dll

我正在使用 Visual Studio 2010 并尝试构建一个小型控制台程序，以使用 UserProfileManager 在 Sharepoint 2010 中向用户添加数据。

**使用系统；

使用 System.Collections.Generic；

使用 System.Linq；

使用 System.Text；

使用 Microsoft.SharePoint；

*使用 Microsoft.Office.Server.UserProfiles；*

使用 System.DirectoryServices.AccountManagement；

使用 System.IO；**

我遇到的问题是尝试构建它。如果我的目标框架是 4.0，它构建得很好，但因此不会在部署 sharepoint 的服务器上运行：

*未处理的异常：System.PlatformNotSupportedException：Microsoft .Net 运行时版本 4.0.30319.269 不支持 Microsoft SharePoint。在 Microsoft.SharePoint.Administration.SPConfigurationDatabase.get_Farm() 在 Microsoft.SharePoint.Administration.SPFarm.FindLocal(SPFarm& farm, Boolean & isJoined) 在 Microsoft.SharePoint.SPSite..ctor(String requestUrl) 在 AddRandomMindtags.Program.Main(字符串 [] 参数）*

当目标框架设置为 3.5 时，会出现以下构建错误：

*名称空间“Microsoft”中不存在类型或名称空间名称“Office”（您是否缺少程序集引用？）

找不到类型或命名空间 UserProfileManager...*

有人知道问题可能是什么吗？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T17:31:16.493

您可能知道 SP 2010 是在 3.NET Framework 3.5 之上构建的，因此在部署 SP 2010 Server 时不能使用 4.0 DLL。

还有更多关于你试图用 UserProfiles 做什么？

您可以添加此 DLL 的引用，以便解决您的上述错误。C:\Program Files (x86)\Microsoft Chart Controls\Assemblies\System.Web.DataVisualization.dll

谢谢，-桑托什

# xcode - OS X 上的 TeamCity 构建代理。命令行构建运行程序的问题

> ID：10856256
> 
> 赞同：3
> 
> 时间：2012-06-01T19:29:26.153
> 
> 标签：xcode, macos, teamcity

我正在尝试在 OS X 上使用 TeamCity 构建代理。我的构建步骤之一涉及将存档移动到已知位置，以便我可以将其作为构建工件获取。该`xcodebuild archive`命令将 .xcarchive 文件放在 %system.user.home%/Library/Developer/Xcode/Archives/ *date/appName 日期时间*.xcarchive 中。所以我想移动和重命名 .xcarchive 文件，以便更容易从包中获取可执行文件。FWIW，我还有一个清除存档目录的构建步骤，所以我可以确保我只有一个*日期*文件夹，其中只有一个 .xcarchive 文件。此命令在命令行中可以正常工作：

```
$ /bin/mv /Users/buildagent/Library/Developer/Xcode/Archives/`date+%Y-%m-%d`/*.xcarchive /Users/buildagent/Library/Developer/Xcode/Archives/GetConnected.xcarchive 
```

但是将它用于构建运行器不起作用（我只是得到 mv 的使用消息）：

```
/bin/mv %system.user.home%/Library/Developer/Xcode/Archives/`date +%%Y-%%m-%%d`/*.xcarchive %system.user.home%/Library/Developer/Xcode/Archives/GetConnected.xcarchive 
```

我究竟做错了什么？还有其他一些我需要逃脱的角色吗？有没有这方面的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T17:26:25.470

是的，您确实需要通过加倍来逃避这些百分比。在 TeamCity 页面[Defining and Using Build Parameters in Build Configuration](http://confluence.jetbrains.net/display/TCD6/Defining+and+Using+Build+Parameters+in+Build+Configuration)上有这方面的文档，但我承认这并不容易找到。（基本上，TeamCity 使用百分比字符作为其自己的参数）。

我用于此目的的调用是``date "+%%Y-%%m-%%d"``. 此外，我需要在路径周围加上引号（shell globbing 导致问题），所以整个命令最终是：

```
mv "~/Library/Developer/Xcode/Archives/`date "+%%Y-%%m-%%d"`/*.xcarchive" ./MyApp.xcarchive 
```

另外，感谢您提出问题！我试图做同样的事情，这让我走上了正确的道路。

# css - 如何在悬停时从另一张图片后面滑出一张图片？

> ID：10856264
> 
> 赞同：0
> 
> 时间：2012-06-01T19:30:00.717
> 
> 标签：css, image, hover, slide

我正在尝试创建一种效果，其中 LP 唱片（我们将其称为背景图像）从唱片套（前景图像）后面滑出。我想用尽可能多的 CSS 来做到这一点，但是我知道让 LP 顺利滑入和滑出需要 JQuery。前景图像完全遮盖了背景图像，当悬停在前景图像上时，我无法弄清楚如何移动背景图像。如果可能的话，我还希望这两个图像都是锚点。希望这很清楚（ish）！如果有人可以帮助我，我将非常感激，谢谢！

这是我目前正在使用的内容

```
<div id="container">
  <img src="Record.png" width="200" height="200" id="record"/>
  <img src="Sleeve.png" width="200" height="200" id="sleeve" />
</div>

<!--CSS-->
#container {
    background-color: aqua;
    width: 500px;
    height: 400px;
    position: relative;
}

#record {
    position: absolute;
    left: 0px;
    bottom: 0px;
    z-index: 1;
}

#sleeve {
    position: absolute;
    left: 0px;
    bottom: 0px;
    z-index: 10;
} 
```

编辑：

感谢所有人的回答，我正在尝试使用在这篇文章的第一条[评论](http://jsfiddle.net/j08691/wuPmT/)中给出的答案，但我一生都无法让它自己工作！谁能帮我看看我哪里出错了？再次感谢。

```
<!DOCTYPE html>
<html>

        <meta charset="utf-8">

    <link rel="stylesheet" type="text/css" href="testing.css">

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<body>

<div id="container">
  <img src="http://cdn1.iconfinder.com/data/icons/oldschool_babasse/Png/Hardware/CD%20oldSchool.png" width="200" height="200" id="record"/>
  <img src="http://cdn1.iconfinder.com/data/icons/softwaredemo/PNG/128x128/Box_Grey.png" width="200" height="200" id="sleeve" />
</div>​

<script>

$('#container').hover(function() {
    var record = $('img:eq(0)', this);
    record.stop(1,0).animate({
        left: '200px'
    }, 1000, function() {
        record.css('z-index', 11).stop(1, 0).animate({
            left: '0px'
        }, 1000);
    });
}, function() {
    var record = $('img:eq(0)', this);
    record.stop(1,0).animate({
        left: '200px'
    }, 1000, function() {
        record.css('z-index', 1).stop(1, 0).animate({
            left: '0px'
        }, 1000);
    });
});​

</script>

</body>
</html>

<!--CSS-->

#container {
    width: 400px;
    height:200px;
    position: relative;
    overflow:auto;
}

#record {
    position: absolute;
    left: 0px;
    bottom: 0px;
    z-index: 1;
}

#sleeve {
    position: absolute;
    left: 0px;
    bottom: 0px;
    z-index: 10;
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T19:41:09.433

您可以通过将其添加到现有代码中来纯粹使用 css 来完成：

```
#record {
  -webkit-transition: left 0.5s ease-out; 
     -moz-transition: left 0.5s ease-out; 
      -ms-transition: left 0.5s ease-out; 
       -o-transition: left 0.5s ease-out; 
          transition: left 0.5s ease-out;
}

#container:hover #record {
    left: 100px;  /* This is assuming you want it to slide from left-to-right */
} 
```

不幸的是，动画仅适用于较新的浏览器。较旧的浏览器只会显示弹出/弹出的记录，这可能会或可能不会产生可怕的影响。

如果您希望它在所有浏览器中工作，您需要使用一些 javascript 来制作动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T19:49:14.067

从这个开始：

```
$("#sleeve").hover(
    function(){
       $("#record").animate({left: '+=100',bottom: '+=100'}, 1750);
    },
    function(){
       $("#record").animate({left: '-=100',bottom: '-=100'}, 1750);  
    }); 
```

悬停时，记录滑出，如果鼠标离开袖子，它会滑回来。你想拥有什么，你必须自己编写代码。

这是一个演示：http: [//jsfiddle.net/rniestroj/nZhbg/](http://jsfiddle.net/rniestroj/nZhbg/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T19:41:39.477

欢迎来到 StackOverflow。

通常，我们希望用户在向我们询问答案之前发布他们尝试过的代码，但这里有一些东西可以让您开始使用悬停：

```
$("selector").hover(function(){
  //do some code on hover
}); 
```

并带有动画：

```
$("selector").animate({
  //animate to these values
  left:250px,
}); 
```

也许查看这些文档以了解[动画](http://api.jquery.com/animate/)和[选择器](http://api.jquery.com/category/selectors/)。

你也许可以用 CSS3 动画来做到这一点，但我给你的 jQuery 将支持跨浏览器，如果你愿意的话，你可以做更复杂的事情。

# dns - 在 VPS 上设置 DNS

> ID：10856266
> 
> 赞同：9
> 
> 时间：2012-06-01T19:30:04.187
> 
> 标签：dns, centos

我对服务器管理很陌生，所以我正在寻求一些帮助来正确设置我的 DNS 并普遍扩展我在该领域的知识。我之前在 Godaddy 注册了一个域名。我最近在一家单独的公司设置了一个 VPS，我希望将我的 Godaddy 注册域指向我的新服务器。

根据我的阅读，我可以将我的区域文件的 A 记录指向我的新服务器 IP，或者我可以将我当前的 Godaddy 名称服务器指向我的新服务器（这将使用我的新服务器的 DNS？-我假设这个需要在我的 VPS 上做更多的工作）。任何人都可以为我确认这一点，并可能解释为什么一个比另一个更受欢迎和/或明确的区别是什么？

我正在运行 CentOs 5.8。

感谢您向正确方向提供任何提示、建议和推动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:30:11.680

看看这篇关于如何在 CentOS 6.2 VPS 上使用 Bind9 Chroot 设置私有 DNS的[Howto 。](http://www.ehowstuff.com/how-to-setup-private-dns-with-bind9-chroot-on-centos-6-2-vps/ "如何在 CentOS 6.2 VPS 上使用 Bind9 Chroot 设置私有 DNS")CentOS 5.x 和 CentOS 6.x 的绑定配置没有太大区别。已启用以下配置：

1.  转发命名服务器
2.  绑定 chroot 命名服务
3.  主（ns1）/从属（ns2）服务器。允许从站下载主站的分区文件。

# asp.net - 谷歌网站搜索受保护的网页

> ID：10856276
> 
> 赞同：1
> 
> 时间：2012-06-01T19:30:46.730
> 
> 标签：asp.net, login, google-search

我的网站包括基于订阅的页面，这意味着这些页面中的内容受密码保护。我想实现站点搜索，并让这些受保护的页面出现在搜索结果中，但需要登录才能查看它们。

我的想法是为每个受保护的页面创建一个不受保护的版本，然后在每个不受保护的页面中将页面加载重定向到受保护的版本。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:56:05.627

有一些方法可以让您更轻松地做到这一点。假设您赢得了在所有页面上完全自动执行此操作，然后您转到`global.asax`AuthenticationRequest 上的 , 如果您看到这是一个谷歌爬虫，或者一般来说是一个爬虫，您会自动使用简单的登录名登录他。

我必须知道任何人都可以设置错误的浏览器 ID 并查看您的“受保护页面”。代码可以是：

```
protected void Application_AuthenticateRequest(object sender, EventArgs e)
{
   // if its crawler - or check for what else you wish for
   if(HttpContext.Current.Request.Browser.Crawler){      
       // then log him automatically using the 'OneName' user
       FormsAuthentication.SetAuthCookie("OneName", false);       
   }
} 
```

相对：http: [//msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.setauthcookie.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.setauthcookie.aspx)

# android - 文本未出现在 EditText 中

> ID：10856282
> 
> 赞同：0
> 
> 时间：2012-06-01T19:31:50.130
> 
> 标签：android, android-edittext

我知道这是一个愚蠢的问题，但我找不到答案：我已经开始在互联网教程上学习制作 android 应用程序。但是现在我被阻止了，我有 2 个 EditText 用于计算某些东西（没关系），我的问题是当我在模拟器上单击任何字母时没有写入任何文本。我发现问题确实出在这部分代码上：

```
private OnKeyListener modificationListener = new OnKeyListener() {
    @Override
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        // Set a defaut text somewhere else, on another EditText
        result.setText(defaut);
        return true;
    }
}; 
```

我猜我应该调用超级函数，但是当我尝试时它告诉我这是一个错误：`super.onKey(v, keyCode, event);`

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T19:35:45.183

尝试返回 false 而不是 true。

如果您返回 true，则您正在使用该事件，因此其他侦听器将不再对其采取行动。

# c - 将文本文件读入 c-string

> ID：10856283
> 
> 赞同：-1
> 
> 时间：2012-06-01T19:31:53.797
> 
> 标签：c

我正在开发一个将播放文本文件而不是音频或视频的 MediaPlayer 项目。我的问题是如何在 C 字符串数组中显示字符串？例如，如果在我的文本文件中（不带引号）：

```
**"This is only test"** 
```

在我的程序中，我想一次显示一个单词，例如：

```
This
is
only
test 
```

我怎么做？到目前为止，这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

//Global variables
int position=0; //to set the player position
float rate = 1.0; //the rate of playback

void LoadFile(const char *fileName, char *text){
    FILE *ifp; //a file pointer for file read/write

    //opening the file
    ifp = fopen(fileName, "r");
    if(ifp == NULL){
            fprintf(stderr, "Can't open input file \"%s\"!\n",fileName);
            exit(1);
    }
    else{
            fgets(text,50,ifp); //getting the text from the file
    }
    //closing the file  
    fclose(ifp); 
}

void *Start();
void *Stop();
void Rewind();
void SeekTo(int byteOffset);
void setRate(float rate);

int main(void){
    int i = 0;
    char choice;
    char fileName[25];
    char lineOfText[50];    //holds the text inside the file
    printf("Please enter the file you want to open: ");
    scanf("%s", fileName);
    LoadFile(fileName,lineOfText);
    printf("%s",lineOfText);   //I will display the whole string

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:59:43.193

使用 strtok 函数

```
#include < stdio.h >

#include < string.h >

int main ()
{
  char str[] ="- This, a sample string.";
  char * pch;
  //printf ("Splitting string \"%s\" into tokens:\n",str);
  pch = strtok (str," ,.-");
  while (pch != NULL)
  {
    printf ("%s\n",pch);
    pch = strtok (NULL, " ,.-");
  }
  return 0;
} 
```

此代码将给出输出

```
This
a
sample
string 
```

为了进一步了解，请转到以下内容

> [http://www.cplusplus.com/reference/clibrary/cstring/strtok](http://www.cplusplus.com/reference/clibrary/cstring/strtok)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T19:44:51.267

由于您使用的是 C++，因此您可以使用[Boost](http://www.boost.org/)轻松做到这一点。从文件中读取该行后，您可以构造 a`string`然后使用[`boost::split`](http://www.boost.org/doc/libs/1_49_0/doc/html/string_algo/usage.html#id3184031)：

```
string line(text);
vector<string> words;
split(words, line, is_any_of(" ")); 
```

之后，您可以迭代`vector`获取从文件中读取的单个单词。例如，对于顺序打印所有单词（使用 C++11 语法）：

```
for (const auto& w : words)
    cout << w << endl; 
```

此外，您可能还想考虑将您的程序移植到*真正的*C++。为此，您需要使用`string`而不是`char`数组，`ifstream`用于读取文件等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T19:50:49.373

可能重新发明轮子，但有时非常有用：

```
// substring_container_adapter.h
//
// substring_container_adapter is useful for treating a single master string as a collection of substrings
// for the purpose of enumerating over those substrings (read-only)
//
// NOTES:
//  (1) sequential forward access is reasonably efficient, but random access is definitely not very efficient.  (bidirectional could be implemented)
//  (2) the strings must be valid for the lifetime of the adapter and any enumerators you obtain from the adapter
//  (3) uses a greedy algorithm - so whole sequences of delimiters are considered one separator, rather than multiple separators

namespace details 
{
    template <typename charT>
    class substring_container_adapter
    {
    public:
        struct iterator : public std::iterator<std::forward_iterator_tag, const charT *>
        {
            // iterator constructor
            iterator(const charT * pszPosition, const charT * pszDelimeters)
                : m_pszPosition(pszPosition)
                , m_pszDelimeters(pszDelimeters)
                , m_pszEnd(FindOneOfOrNil(pszPosition, pszDelimeters))
            { }

            // supported relational operators
            bool operator == (const iterator & rhs) const { return m_pszPosition == rhs.m_pszPosition; }
            bool operator != (const iterator & rhs) const { return m_pszPosition != rhs.m_pszPosition; }
            bool operator <  (const iterator & rhs) const { return m_pszPosition < rhs.m_pszPosition; }

            // increment to next substring
            iterator & operator ++ ()
            {
                const charT * pszNext = SkipDelimeters(m_pszEnd, m_pszDelimeters);
                if (pszNext)
                {
                    m_pszPosition = pszNext;
                    m_pszEnd = FindOneOfOrNil(m_pszPosition, m_pszDelimeters);
                }
                else
                {
                    m_pszPosition += GetLength(m_pszPosition);
                }

                return *this;
            }

            // postfix increment
            const iterator operator ++ (int)
            {
                // note: the const return type flags misuse patterns (see More Effective C++, Item 6)
                iterator old(*this);
                ++(*this);
                return old;
            }

            // dereference == CString
            CString operator * () const { return CString(m_pszPosition, static_cast<int>(m_pszEnd - m_pszPosition)); }

            // iterators on our characters
            const charT * begin() const { return m_pszPosition; }
            const charT * end() const { return m_pszEnd; }

        private:

            const charT *   m_pszPosition;
            const charT *   m_pszDelimeters;
            const charT *   m_pszEnd;
        };

        typedef iterator const_iterator;

    public:
        substring_container_adapter(const charT * pszString, const charT * pszDelimeters)
            : m_pszString(pszString)
            , m_pszDelimiters(pszDelimeters)
            , m_end(pszString + GetLength(pszString), m_pszDelimiters)
          { }

          // iterators
          iterator begin() const { return iterator(m_pszString, m_pszDelimiters); };
          iterator end()  const { return m_end; };

    private:
        const charT *   m_pszString;        // zero-terminated character array
        const charT *   m_pszDelimiters;    // delimiters
        const iterator  m_end;              // end delimiter
    };

}

typedef details::substring_container_adapter<TCHAR> substring_container_adapter; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T19:51:53.513

您收到错误的原因：

```
printf("%s",lineOfText[0]); 
```

是char使用了不同的标志。你需要：

```
printf("%c",lineOfText[0]); 
```

那只会在 c 字符串中打印字符。只需遍历数组即可访问剩余的字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T22:58:23.347

这里有一个简单的提示，

*   取两个变量。用 0 初始化它们。
*   开始遍历字符串。
*   如果你找到一个空格，记下它的索引到第二个变量中。
*   将声明的第一个变量到第二个变量的内容复制到字符串中。
*   使第一个变量=第二个变量。

继续执行上述步骤，直到字符串结束。

# android - 使用 invalidate(Rect dirtyRect) 实现交互式画布时导致的延迟

> ID：10856284
> 
> 赞同：0
> 
> 时间：2012-06-01T19:31:54.243
> 
> 标签：android, graph, plot, invalidation

我正在使用[GraphView](https://github.com/jjoe64/GraphView) API，并且我将图表实现为难以处理。当用户触摸图表时，会出现一条从数据点延伸到图表底部的垂直线。

我已经在 onDraw 方法中创建了这条线，如下所示：

```
mDrawable = new ShapeDrawable(new RectShape());
mDrawable.getPaint().setColor(0xFF363636);
mDrawable.setBounds((int)markerX,(int) (markerY) , (int)markerX+1,  (int) height);
mDrawable.draw(canvas); 
```

我正在使用以下代码以及计算标记位置的代码来刷新 onTouch 方法中的行。

```
invalidate(mDrawable.getBounds()); 
```

我的问题发生在可绘制对象被移动时。如果手势足够快，刷新往往会有延迟，并且线条会在图形上消失（几分之一秒）。这条线与运动保持一致，但它消失了。如果这有什么意义的话，似乎项目的移动速度快于它的边界。

我听说使整个画布无效是不行的，最好使您想要更改的范围无效（我在上面所做的）。使整个画布无效时，不会出现消失线现象，但应用程序运行缓慢。

我对 SurfaceView 和表面支架做了一些神奇的事情，但在这种情况下使用它们似乎适得其反。据我了解，我基本上会使用 invalidate() 方法，但在不同的线程中。一切仍然会一遍又一遍地重绘，这似乎适得其反。

是否有另一种方法来实现 GraphView 库中描述的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:14:59.030

我能够通过一个简单的修复来解决这个问题。无论何时更改屏幕，无论是移动（纵向模式）还是触摸（横向模式），`onDraw()`都会调用该方法。虽然使用了脏 Rect 方法（横向模式），但仍然有明显的滞后。在滚动视图中滚动图形时也存在明显的延迟。解决方案是将画布保存到位图（在第一次调用时），存储位图，然后仅在位图顶部绘制标记。每当更改视口或添加不同的数据集时，位图就会无效以绘制所有数据。编码

```
 protected void onDraw(Canvas sysCanvas) {
         canvas = new Canvas(); 

         if (bitmap != null) { 
                sysCanvas.drawBitmap(bitmap, 0,0, null); 
                drawMarker(sysCanvas); //draw whatever you want to the system canvas in a different method
                return; 
         } 

        bitmap = Bitmap.createBitmap(sysCanvas.getWidth(), sysCanvas.getHeight(), Bitmap.Config.ARGB_8888); 
        canvas.setBitmap(bitmap); 

        ///more code, draw whatever you want to canvas.
        sysCanvas.drawBitmap(bitmap,0, 0,null);
    } 
```

第一次运行后，画布将绘制图形。虽然在第一遍之后，画布只是绘制位图，然后转到一个方法来绘制对象。`onTouch()`这些对象具有在方法中设置的 x 和 y 参数。

这种方法**极大地**提高了性能。就我而言，我在滚动视图（纵向模式）中有一个图表。每当滚动视图在任一方向移动时，都会重新绘制画布。这种不断的重绘真的吃掉了资源。绘制我已经实现的标记（跟随您的手指的圆圈）也可以这样说。由于 CPU 只需重绘 2 个对象，因此花费的时间更少，从而提高了性能。

希望这可以帮助！

# wordpress - 在wordpress的不同页面中添加不同的菜单？

> ID：10856292
> 
> 赞同：0
> 
> 时间：2012-06-01T19:32:34.230
> 
> 标签：wordpress, menubar

我是 wordpress 3.2 的新手，我成功地添加了页面、帖子和自定义链接并设置了一个静态主页。我的问题是——

1）我有 6 个静态页面，每个页面应该有不同的菜单栏。

2) 在某些页面中，当用户单击菜单栏-> 弹出页面时，应该会出现。

这可能没有在wordpress中编码php吗？或者有没有办法在 GUI/任何插件中做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T03:56:00.253

我认为你应该为此做一些 php 编码。首先从仪表板 -> 外观 -> 菜单创建尽可能多的菜单

然后你需要在functions.php上注册菜单最后你需要将这些菜单添加到自定义模板文件中。

以下是向 WordPress 添加第二个菜单的一些教程。对所有 6 个菜单重复相同的过程。

[创建辅助水平菜单](http://reflectingthedesigner.com/wordpress/2011/01/06/creating-a-secondary-horizontal-menu-space/)

[将第二个导航菜单添加到 WordPress 子主题](http://www.fix-css.com/2011/06/how-to-add-second-navigation-menu-to-child-wp-theme/)

[将二级菜单添加到 wordpress 模板](https://www.google.co.in/search?sourceid=chrome&ie=UTF-8&q=adding+secondary+menu+to+wordpress+template)

开始工作，如果您有任何问题，请回来。干杯！！！

# eclipse - 导出为 JAR 时使用 JMF 和 Eclipse 不支持的 major.minor 版本 51.0

> ID：10856294
> 
> 赞同：0
> 
> 时间：2012-06-01T19:32:39.373
> 
> 标签：eclipse, jar, nullpointerexception, jmf

我正在编写一个简短的程序来使用 Java Media Framework (JMF) 从网络摄像头中提取图像。

似乎我遇到了许多人在我之前遇到的问题，但没有明确的解决方案。我正在使用 eclipse，我的程序运行良好。我已将 jmf.jar 添加为外部库。

现在，问题是，如果我将程序导出为 jar，在命令行上运行它时会出现以下错误：

```
Exception in thread "main" java.lang.NullPointerException
    at recorder.SimpleRecorder.<init>(SimpleRecorder.java:46)
    at recorder.SimpleRecorder.main(SimpleRecorder.java:67) 
```

第 46 行是`ml = di.getLocator();`. （我已经包含了下面的代码。）

当我不将 jmf.jar 添加为外部库并尝试在 eclipse 中运行程序时，这与我得到的错误相同。

网上的一些资源，比如这个

[https://forums.oracle.com/forums/thread.jspa?threadID=1277297](https://forums.oracle.com/forums/thread.jspa?threadID=1277297)

建议文件 jmf.properties 是问题的根源。因此，我尝试了上述资源建议的几件事：

*   将 jmf.properties 文件的路径添加到 jar 的清单中。之后清单如下所示：

    清单版本：1.0

    类路径：. “C:\Program Files (x86)\JMF2.1.1e\lib\jmf.properties”

    主类：recorder.SimpleRecorder

    我不确定这是否是向清单添加路径的正确方法。

*   我还尝试从文件夹 C:\Program Files (x86)\Java\jre7\lib 中删除 jmf.jar，因为它在那里似乎会导致 eclipse 出现问题，因为它是 jmf 可用两次（将它留在那里而不是将 jmf.jar 添加为外部库会导致上述错误）。

*   将 jmf.properties 添加到 jar 文件所在的文件夹会产生不同的错误：

    线程“VFW 请求线程”中的异常 java.lang.UnsatisfiedLinkError: JMFSecurityManager: java.lang.UnsatisfiedLinkError: com.sun.media.JMFSecurityManager.loadLibrary(JMFSecurityManager.java:206) 的 java.library.path 中没有 jmvfw。 sun.media.protocol.vfw.VFWCapture.(VFWCapture.java:19) 在 com.sun.media.protocol.vfw.VFWSourceStream.doConnect(VFWSourceStream.java:241) 在 com.sun.media.protocol.vfw.VFWSourceStream .run(VFWSourceStream.java:763) 在 java.lang.Thread.run（未知来源）

*   将 jmf.properties 文件复制到任何其他位置，包括 jar 内部（如上述资源中所建议的）没有任何效果。

我希望有人知道如何解决这个问题 - 我非常乐意提供更多信息。

谢谢，

乔纳斯

```
package recorder;

import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.FileOutputStream;

import javax.media.Buffer;
import javax.media.CaptureDeviceInfo;
import javax.media.CaptureDeviceManager;
import javax.media.Manager;
import javax.media.MediaLocator;
import javax.media.Player;
import javax.media.control.FrameGrabbingControl;
import javax.media.format.VideoFormat;
import javax.media.util.BufferToImage;
import javax.swing.JFrame;

import com.sun.image.codec.jpeg.JPEGCodec;
import com.sun.image.codec.jpeg.JPEGEncodeParam;
import com.sun.image.codec.jpeg.JPEGImageEncoder;

public class SimpleRecorder extends JFrame{

public static Player player = null;
public CaptureDeviceInfo di = null;
public MediaLocator ml = null;
public Buffer buf = null;
public Image img = null;
public VideoFormat vf = null;
public BufferToImage btoi = null;

public SimpleRecorder(String title) {
    super(title);

    String str2 = "vfw:Microsoft WDM Image Capture (Win32):0";
    di = CaptureDeviceManager.getDevice(str2);

    if(di == null) System.out.println("di is null.");

    ml = di.getLocator();

    try 
    {
      player = Manager.createRealizedPlayer(ml);
      player.start();
      Component comp;

      if ((comp = player.getVisualComponent()) != null)
      {
        add(comp,BorderLayout.CENTER);
      }

    } 
    catch (Exception e) 
    {
      e.printStackTrace();
    }
}

public static void main(String[] args){
    SimpleRecorder frame = new SimpleRecorder("Simple Recorder");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack();
    frame.setSize(335,275);
    frame.setLayout(new BorderLayout());
    frame.setVisible(true);

    frame.addWindowListener(new WindowAdapter() {
          public void windowClosing(WindowEvent e) {
          playerclose();
          System.exit(0);}});

    System.out.println("Waiting for camera to get ready...");

    try {
        Thread.sleep(5000);
    } catch (InterruptedException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    System.out.println("Start recording...");
    while(true){

        frame.recordImage();

        try {
            Thread.sleep(350);
        } catch (InterruptedException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
    }   
}

private void recordImage(){

     // Grab a frame
      FrameGrabbingControl fgc = (FrameGrabbingControl)
      player.getControl("javax.media.control.FrameGrabbingControl");
      buf = fgc.grabFrame();

      // Convert it to an image
      btoi = new BufferToImage((VideoFormat)buf.getFormat());
      img = btoi.createImage(buf);

      // Get current directory
      String currentDir = new File("./Extracted_Image.jpg").getAbsolutePath();

      // save image
      saveJPG(img,currentDir);
}

public static void saveJPG(Image img, String s)
  {
    BufferedImage bi = new BufferedImage(img.getWidth(null), img.getHeight(null), BufferedImage.TYPE_INT_RGB);
    Graphics2D g2 = bi.createGraphics();
    g2.drawImage(img, null, null);

    FileOutputStream out = null;
    try
    { 
      out = new FileOutputStream(s); 
    }
    catch (java.io.FileNotFoundException io)
    { 
        System.out.println("File Not Found"); 
    }

    if(out == null) System.out.println("Could not create file output stream.");

    JPEGImageEncoder encoder = JPEGCodec.createJPEGEncoder(out);
    JPEGEncodeParam param = encoder.getDefaultJPEGEncodeParam(bi);
    param.setQuality(0.5f,false);
    encoder.setJPEGEncodeParam(param);

    try 
    { 
      encoder.encode(bi); 
      out.close(); 
    }
    catch (java.io.IOException io) 
    {
      System.out.println("IOException"); 
    }
  }

public static void playerclose() 
  {
    player.close();
    player.deallocate();
  } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:12:01.450

要检查的一件事是您的 eclipse.ini。我发现工作区的已安装 jre 与 eclipse.ini 指定的 vm 不一致的问题。如果 ini 使用 1.6，workspace 使用 1.7，那么一些 eclipse 插件可能会尝试使用 1.6 工具处理 1.7 字节码或源代码，从而导致各种问题

*   编辑 \eclipse.ini
*   检查 vm 设置为预期版本

    -vm c:/java/jdk1.7.0_05/jre/bin/server/jvm.dll

# matlab - MATLAB绘制表面的一部分

> ID：10856298
> 
> 赞同：2
> 
> 时间：2012-06-01T19:32:59.763
> 
> 标签：matlab, plot

假设我有以下脚本：

```
u = -5:.2:5;
[X,Y] = meshgrid(u, u);
Z = cos(X).*cos(Y).*exp(-sqrt(X.^2 + Y.^2)/4);
surf(X,Y,Z); 
```

无论如何，我可以让 MatLab 只绘制表面的一部分吗？比如说，我只想绘制一个点或一个网格，我该怎么办？我想也许可以绘制一个我可以使用的点：

```
surf(X(1,1), Y(1,1), Z(1,1)) 
```

但后来我收到错误消息：

```
??? Error using ==> surf at 78
Data dimensions must agree. 
```

我真的很感激这里的一些输入/帮助。提前致谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T19:54:58.500

当我尝试您尝试的方法时，我得到以下信息：

> > > surf(X(1,1),Y(1,1),Z(1,1))
> > > 使用 surf 时出错（第 75 行） Z 必须是矩阵，而不是标量或向量。

所以问题是你不能只用 做一个点或线`surf`，你必须使用不同的功能。但是您**可以**选择子区域

```
>> ii=1:5;
>> jj=1:20;
>> surf(X(ii,jj),Y(ii,jj),Z(ii,jj)) 
```

另一种方法是使用 NaN 作为掩码。

```
>> mask = ones(size(X));
>> mask(1:20, 20:end) = nan;
>> surf(X.*mask, Y.*mask, Z.*mask) 
```

这将使存在 NAN 的部分不显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T20:10:53.960

要仅显示单个点，您可能会喜欢为点云设计的函数 scatter3。

```
scatter3(X(1,1), Y(1,1), Z(1,1)) 
```

当然，它也适用于 X、Y、Z 点的向量。您还可以直接为每个点指定点大小和颜色。

# javascript - 调整 Brightcove 视频播放器的大小

> ID：10856301
> 
> 赞同：0
> 
> 时间：2012-06-01T19:33:37.190
> 
> 标签：javascript, brightcove

有没有一个想法可以用来调整 Brightcove 视频播放器的大小，以便根据调整后的高度和宽度适合浏览器窗口。它应该适用于 flash 和 HTML5 模式。有这种可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-28T09:02:50.423

如果其他人有这个问题：

```
var brightcove_video_container = $( "#brightcove-video-container" ).brightcoveVideo({ 
    "playerID": "3715052728001",    "@videoPlayer": liveStream.id,      "autoStart": true, 
    "templateReadyHandler": function(){
        //resize for ipad
        window.addEventListener("orientationchange", function() {
            $("#brightcove-video-container").data( "brightcoveVideo" ).experience.setSize( $("#brightcove-video-container").width(), $("#brightcove-video-container").height() );                           
        }, false);
    } 
}); 
```

# iphone - 如何使用 NSHTTPURLResponse 在 iPhone 上通过 HTTP 查询文件的最后修改日期？

> ID：10856302
> 
> 赞同：6
> 
> 时间：2012-06-01T19:33:49.093
> 
> 标签：iphone, objective-c, ios, cocoa-touch, nsurlrequest

在我的 iPhone 应用程序中，我需要通过 查询 Internet`.m4a`文件的最后修改日期`HTTP`，但我**不想**下载它。

我正在阅读 Apple 关于`NSURLRequest`and的文档`NSHTTPURLResponse`，但它似乎都与下载文件而不是先查询它有关。也许我错了。

我如何知道`.m4a`文件的最后修改日期，通过`HTTP`，**而不**下载它？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T19:56:25.877

此答案假定您的服务器支持它，但您所做的是将“HEAD”请求发送到文件 URL，然后您只返回文件头。然后，您可以检查名为“Last-Modified”的标题，它通常具有日期格式`@"EEE',' dd MMM yyyy HH':'mm':'ss 'GMT'"`。

这是一些代码：

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"HEAD"];
NSHTTPURLResponse *response;
[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:nil];
if ([response respondsToSelector:@selector(allHeaderFields)]) 
{
  NSDictionary *dictionary = [response allHeaderFields];
  NSString *lastUpdated = [dictionary valueForKey:@"Last-Modified"];
  NSDate *lastUpdatedServer = [fileDateFormatter dateFromString:lastUpdated];

  if (([localCreateDate earlierDate:lastUpdatedServer] == localCreateDate) && lastUpdatedServer) 
  {
    NSLog(@"local file is outdated: %@ ", localPath);
    isLatest = NO;
  } else {
    NSLog(@"local file is current: %@ ", localPath);
  }

} else {
  NSLog(@"Failed to get server response headers");
} 
```

当然，您可能希望在后台异步执行此操作，但这段代码应该为您指明正确的方向。

此致。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-20T12:52:14.467

下面的方法执行一个`HEAD`请求，仅获取带有`Last-Modified`字段的标头并将其转换为`NSDate`对象。

```
- (NSDate *)lastModificationDateOfFileAtURL:(NSURL *)url
{
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];

    // Set the HTTP method to HEAD to only get the header.
    request.HTTPMethod = @"HEAD";
    NSHTTPURLResponse *response = nil;
    NSError *error = nil;

    [NSURLConnection sendSynchronousRequest:request
                          returningResponse:&amp;response
                                      error:&amp;error];

    if (error)
    {
        NSLog(@"Error: %@", error.localizedDescription);
        return nil;
    }
    else if([response respondsToSelector:@selector(allHeaderFields)])
    {
        NSDictionary *headerFields = [response allHeaderFields];
        NSString *lastModification = [headerFields objectForKey:@"Last-Modified"];

        NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
        [formatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss zzz"];

        return [formatter dateFromString:lastModification];
    }

    return nil;
} 
```

您应该在后台异步运行此方法，这样主线程就不会被阻塞等待响应。这可以使用几行`GCD`.

下面的代码在后台线程中执行调用以获取最后修改日期，并在检索日期时在主线程上调用完成块。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^
{
    // Perform a call on the background thread.
    NSURL *url = [NSURL URLWithString:@"yourFileURL"];

    NSDate *lastModifDate = [self lastModificationDateOfFileAtURL:url];

    dispatch_async(dispatch_get_main_queue(), ^
    {
        // Do stuff with lastModifDate on the main thread.
    });
}); 
```

我在这里写了一篇关于这个的文章：

[**使用 Objective-C 获取服务器上文件的最后修改日期。**](http://stunningco.de/2014/03/26/getting-a-last-modification-date-of-a-file-on-the-server-using-objective-c/)

# c++ - 通过 tcp 中继目录树的最有效方法是什么？C++

> ID：10856304
> 
> 赞同：0
> 
> 时间：2012-06-01T19:34:02.657
> 
> 标签：c++, tcp, tree, directory

我正在尝试通过 TCP 发送目录树结构。树可能在子目录中。我不想发送实际内容，但或多或​​少会在一个字节流中发送列表。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:43:28.153

要发送一棵树，只需递归地执行以下操作：

发送根，然后发送它的孩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T19:42:50.390

根据场景，“最佳”有很多解释。如果您可以提供一种格式，使您的客户端（TCP 接收器）更容易使用您的数据，那么这可能是一个好主意。

通常我认为最好的方式是最容易理解的。例如，XML 表示会很好，因为 XML 无处不在——每个人都知道（或者他们应该知道）。有一百万个 COTS 库可以处理它，而且众所周知。

XML 本身也可以使实体包含其他实体，并且默认情况下在节点之间具有父/子 - 因此该格式将很好地反映目录结构。

xml 的缺点是它非常冗长。如果您愿意处理额外的复杂性（并且文件大小在网络应用程序中确实很重要），您可以构建一个小得多的平面文件格式。如果您要使用平面文件表示，请考虑如何在单个数据库表（名称、文件/文件夹、父目录等）中构造数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:02:21.087

我认为您对效率的最佳选择（我将假设您的意思是您正在寻找一种相对于其他解决方案需要发送少量字节的解决方案）、可读性和可移植性类似于[JSON](http://www.json.org/)。

```
{"dir":"/","children":
  [{"dir":"bin","children":
     [{"file":"bash"},
      {"file":"csh"}]
   },
   {"dir":"home","children":null}]} 
```

# php - 来自数据库 PHP MYSQL AJAX 的自动完成表单

> ID：10856305
> 
> 赞同：0
> 
> 时间：2012-06-01T19:34:06.380
> 
> 标签：php, mysql, ajax, forms, autocomplete

我希望有人能指出我正确的方向，然后我应该能够解决这个问题并让它工作......

基本上，我有一个位置数据库，例如：

```
ID   City/Town    County
1    Newbury      Berkshire
2    Preston      Merseyside 
```

现在我的网站有一个用户填写的表格以指示他们的地址，在一个部分中我有两个输入字段“城市”和“县”。在这里，我希望发生三件事。

1）当用户开始输入他们的城市时，它会根据数据库的结果自动完成（这将包括他们的城市和县，县只是为了识别，所以选择时只输入城市）。

2）一旦用户选择了他们的城市，它会自动从数据库中完成县域。

3）完成所有这些后，我希望将城市和县结果中的 ID 输入到隐藏的输入元素中。

我一直在网上寻找很多自动完成脚本： http: [//ajaxdump.com/2010/08/11/10-cool-auto-complete-scripts-using-ajaxjquerymootoolsprototype/](http://ajaxdump.com/2010/08/11/10-cool-auto-complete-scripts-using-ajaxjquerymootoolsprototype/) [http://www。 jqueryrain.com/2012/03/35-best-ajax-jquery-autocomplete-tutorial-plugin-with-examples/](http://www.jqueryrain.com/2012/03/35-best-ajax-jquery-autocomplete-tutorial-plugin-with-examples/)

我发现了有关表单填写的各种帖子，例如： [Jquery autocomplete and PHP: populating input field with data from mySQL database based on selected option in autocomplete field](https://stackoverflow.com/questions/7410091/jquery-autocomplete-and-php-populating-input-field-with-data-from-mysql-databas)

但我似乎无法让他们一起工作。我试图坚持使用 PHP、MYSQL 和 JavaScript。如果需要，我很乐意使用 AJAX，其他任何事情都超出了我的编程知识。

我可能把这一切都搞错了，但是任何可以为我指明正确方向的反馈或信息都将非常感激。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:11:28.067

这对于 jQuery 来说相当容易。只需让您的输入检测 $("input").keyup(function(){}); 然后向查询数据库的 PHP 脚本发送 $getJson() 请求。然后让 PHP 返回一个带有 id、city 和 County 的 JSON 字符串。将 JSON 对象加载到所需的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:19:12.130

我实际上找到了完成这项工作所需的脚本。

去看看，花了几天时间试图弄清楚，然后在我们上传这篇文章的过程中，我找到了它！

对于其他正在寻找相同东西的人来说，这里[http://af-design.com/blog/2010/05/12/using-jquery-uis-autocomplete-to-populate-a-form/](http://af-design.com/blog/2010/05/12/using-jquery-uis-autocomplete-to-populate-a-form/)

请享用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T20:37:07.573

我认为雅虎为它提供了最佳选择 YUI ;)

> 看看这个 - [YUI2 - 自动完成](http://developer.yahoo.com/yui/autocomplete/)

上一个答案：点击此链接！它肯定会帮助您..[使用 AJAX 在您的网站中实施自动建议](http://tutzone.org/15-best-techniques-for-implementing/)

上面链接的名称服务器失败了，很抱歉！试试如果网站管理员解决它！

# google-maps - 具有无效 Google API 密钥的 Wordpress 商店定位器

> ID：10856307
> 
> 赞同：0
> 
> 时间：2012-06-01T19:34:09.397
> 
> 标签：google-maps

我有 wordpress 商店定位器：http: [//www.viadat.com/store-locator/](http://www.viadat.com/store-locator/)

当我打开首页时，我收到此错误：

*Google 已禁用此应用程序的 Maps API。提供的密钥不是有效的 Google API 密钥，或者未授权用于本网站上的 Google Maps Javascript API v2。如果您是此应用程序的所有者，您可以在此处了解如何获取有效密钥：[http](http://code.google.com/apis/maps/documentation/javascript/v2/introduction.html#Obtaining_Key) ://code.google.com/apis/maps/documentation/javascript/v2/introduction.html#Obtaining_Key *

我在此链接上创建了新的 api 密钥，激活了 v2 abd v3，但错误仍然存​​在。

也许有任何解决方案？

# android - LoaderManager 离线获取数据，然后在线

> ID：10856308
> 
> 赞同：0
> 
> 时间：2012-06-01T19:34:10.730
> 
> 标签：android, android-asynctask, android-loadermanager, android-loader

我想遵循这个很好的可用性模式，应用程序离线存储数据以获得更快的响应，并在它在线获取新数据时更新它。

我使用`Loaders`with `LoaderManager`。

**现在，实施上述方法的正确方法是什么`Loaders`？**

目前我使用两种方法，它们都有缺点，而且通常不是很优雅。

1.  将数据存储在应用程序上下文中，而不是 SQLite
2.  两个单独的`AsyncTaskLoaders`-`offlineLoader`和`onlineLoader`。第一个从 SQLite 数据库中获取数据并立即显示它，如果它在那里，第二个从外部服务器加载数据，将其写入数据库（用于 offlineLoader）并替换离线数据

**我真正想要的是：**

一个加载器，它离线获取数据并将其返回给 LoaderManager，但之后继续工作并在准备好时返回新的在线数据。所以它应该返回两次 - 甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T22:34:15.503

解决方案是使用`ContentProvider`s`Loader`将数据加载到 UI 并`Service`s 下载数据并将其推送到数据库中（并通知`ContentProvider`应用程序的其余部分，它已被更改）。

# facebook - 使用 XID 向粉丝专页评论发表评论

> ID：10856311
> 
> 赞同：0
> 
> 时间：2012-06-01T19:34:26.147
> 
> 标签：facebook, comments

我为用户获得了发布流的 Facebook 许可。然后我想使用令牌密钥在使用 XID 的粉丝页面评论下发布消息。

我根据[这些](https://graph.facebook.com/374874179197702/feed?message=_MESSAGE_&access_token=_TOKEN_KEY_)说明对我的应用程序进行编码，但我收到一条错误消息：

> 设置：NullProfileSettings pref name default_non_connection_tab 的 pref_type 0 无法识别。

有谁知道如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:41:02.163

帖子上没有`/feed`联系；它应该是`/comments`

# c# - C#中的多数组排序

> ID：10856312
> 
> 赞同：0
> 
> 时间：2012-06-01T19:34:26.523
> 
> 标签：c#, arrays

我有这个数组：

```
int[] a = {5, 2, 3}; 
int[] b = {4, 1, 2}; 
string[] c = {"John", "Peter", "Max"}; 
```

我需要对第二个数组（b[]）的值进行排序，但要与其他两个数组相关，以便它们得到相应的排序。例如，`1`将排在第一位，因为它是最小的数字，并且由于`1`in`b[]`与`2`in`a[]`和`"Peter"`in相关`c[]`，因此它也意味着`2`并且`"peter"`也将移动到第一个排序位置。其他两列也是如此；观察：

```
int[] a = {2, 3, 5}; 
int[] b = {1, 2, 4}; 
string[] c = {"Peter", "Max", "John"}; 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T19:44:10.750

我想我明白你在说什么。您想要对数组进行排序`a`并`c`基于`b`.

您可以按另一个数组对数组进行排序，使用`Array.Sort`它可以为键指定另一个数组，例如：

```
int[] a = { 5, 2, 3 }; 
int[] b = { 4, 1, 2 };
string[] c = { "John", "Peter", "Max" };

Array.Sort(b.ToArray(), c);
Array.Sort(b.ToArray(), a);
Array.Sort(b);
Console.WriteLine(string.Join(", ", a));
Console.WriteLine(string.Join(", ", b));
Console.WriteLine(string.Join(", ", c)); 
```

这将输出您的预期值。请注意，我们`ToArray`在按键排序时使用创建数组的副本，这是因为`Array.Sort`对它们的键和值进行排序，这是我们不想要的。我们`b`直到最后才对键（在这种情况下）进行排序。

这就是我们解决您当前问题的方法。但是，从评论中收集，您正在尝试对表格数据进行排序。当您的数据具有某种结构时，可以这样说：

```
public class Item
{
    public int A { get; set; }
    public int B { get; set; }
    public string C { get; set; }
} 
```

它变得容易*多了。*

```
var items = new[]
{
    new Item {A = 5, B = 4, C = "John"},
    new Item {A = 2, B = 1, C = "Peter"},
    new Item {A = 3, B = 2, C = "Max"},
};
var sortedItems = items.OrderBy(i => i.B).ToArray(); 
```

这使用[`LINQ`](http://en.wikipedia.org/wiki/Language_Integrated_Query)，非常适合您尝试做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T19:38:54.513

您可能希望查看[Tuples](http://www.dotnetperls.com/tuple)，或者如果可以，使用专用类将数据链接在一起，而不是将数据存储在单独的不关联数组中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T19:40:12.880

您可以合并数组以使每个项目代表一条完整的记录吗？

```
// using anonymous types for simplicity
var source = new[] {
    new { a = 5, b = 4, c = "John" },
    new { a = 2, b = 1, c = "Peter" },
    new { a = 3, b = 2, c = "Max" }
};
var results = source.OrderBy(x => x.a); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T19:43:57.617

```
var indices = Enumerable.Range (0, a.Length).ToArray ();
var sortedIndices = indices.OrderBy (j => a [j]);

var i = 0;
foreach (var j in sortedIndices) {
   anew [i] = a [j];
   bnew [i] = b [j];
   cnew [i] = c [j];
   i++;
} 
```

# websphere-7 - wsadmin Web 认证行为

> ID：10856318
> 
> 赞同：2
> 
> 时间：2012-06-01T19:34:48.697
> 
> 标签：websphere-7, wsadmin

我一直在搜索 IBM 文档以试图找到它，但我一直空着。有谁知道使用 wsadmin 为 WAS 7.0 设置配置“Web 身份验证行为”的相关脚本/命令？

我正在查看的设置可以从控制台访问`Security > Global Security > Web and SIP security > General Settings > Authenticate only when the URI is protected > Use available authentication data when an unprotected URI is accessed`

**更新：**

根据评论，我切换了设置并在 {profile}/security.xml 中找到了更改的配置。

这是未选中“访问未受保护的 URI 时使用可用的身份验证数据”复选框的样子：

`<webAuthAttrs xmi:id="DescriptiveProperty_8" name="com.ibm.wsspi.security.web.webAuthReq" value="lazy" type="String" displayNameKey="" nlsRangeKey="" hoverHelpKey="" range="lazy,persisting,always" inclusive="false" firstClass="false"/>`

这是我检查后的样子（这是我试图用 wsadmin 做的）：

`<webAuthAttrs xmi:id="DescriptiveProperty_8" name="com.ibm.wsspi.security.web.webAuthReq" value="persisting" type="String" displayNameKey="" nlsRangeKey="" hoverHelpKey="" range="lazy,persisting,always" inclusive="false" firstClass="false"/>`

所以现在的问题是，如何使用 wsadmin 更新这个特定的属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:46:50.437

相当于使用 Jython 而不是 JACL 的 bkail 建议：

```
import java
import string

sec = AdminConfig.getid('/Security:/')
descProps = AdminConfig.list('DescriptiveProperty', sec)
lineSeparator = java.lang.System.getProperty('line.separator')
descriptiveProperties = descProps.split(lineSeparator)
for descProp in descriptiveProperties:
    id = descProp[string.find(descProp, "("):string.find(descProp, ")")+1]
    name = AdminConfig.showAttribute(id, 'name')
    if name == "com.ibm.wsspi.security.web.webAuthReq":
        print "Updating security config object with id: %s, property name: %s. Setting value to 'persisting'" % (id, name)
        AdminConfig.modify(id, '[[value persisting]]') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T21:04:27.773

尝试这个：

```
set sec [$AdminConfig getid /Security:/]
foreach descProp [$AdminConfig list DescriptiveProperty $sec] {
  set name [$AdminConfig showAttribute $descProp name]
  if {$name == "com.ibm.wsspi.security.web.webAuthReq"} {
    puts "Updating $descProp"
    $AdminConfig modify $descProp {{value persisting}}
  }
} 
```

执行`bin/wsadmin -f webAuthReq.jacl`

# ios - 错误地使用 prepareForReuse

> ID：10856320
> 
> 赞同：0
> 
> 时间：2012-06-01T19:35:13.387
> 
> 标签：ios, uitableview

我正在尝试根据我的单元格`prepareForReuse`方法中字典中键的存在来设置对象的隐藏属性。我一定是用错了`prepareForReuse`。使用下面的代码，`"Key exists at ..."`当我从应该隐藏对象的单元格中滚动时，它会记录下来。当我向单元格滚动时，我希望它会记录下来。尽管如此，我的对象并没有被隐藏。

```
-(void)prepareForReuse
{

NSDictionary *dictionary = [parseTrackArrayReference objectAtIndex:currentIndex];
if ([dictionary objectForKey: @"sliderEnabled"]) {
    playbackSlider.hidden = NO;
    NSLog(@"Key exists at index: %i", currentIndex);
}
else {
    playbackSlider.hidden = YES;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:33:22.707

将方法主体移动到 cellForRow 并且它工作正常。

# c# - 如何让ac#程序按顺序运行？堆栈，自上而下

> ID：10856323
> 
> 赞同：1
> 
> 时间：2012-06-01T19:35:54.420
> 
> 标签：c#, process, console-application

这是我的笨蛋吗？的一天。以下代码不会按顺序运行（如从上到下），它从顶部跳到底部然后运行中间。另一方面，如果我放一个 Console.WriteLine(); 它将自上而下运行。和 Console.ReadKey(true); 在中间，但我希望它直接运行而不会中断。我希望这是从那时起。我不确定这是否与它有关，但我正在尝试使用 shell 程序（adb.exe），但不确定这是否会引发问题。感谢您提供的任何帮助。

另外，我知道有一些更短的方法来写这些，有些我知道，有些我不知道。如果可以的话，请随时启发我。（我已经搜索了很多地方以找到答案，例如 msdn 无济于事）。

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Linq;

namespace ConsoleApplication1
{
    class Program
    {
        public void Main(string[] args)
        {
            // set consolsize to fit text output
            Console.SetWindowSize(150, 50);
            // creat test text file
            var cd = Directory.GetCurrentDirectory();
            string filetest = Path.Combine(cd + "\\android\\5_tools\\test.txt");
            string brand = (cd + "\\android\\5_tools\\brand.txt");
            string model = (cd + "\\android\\5_tools\\model.txt");
            string sdk = (cd + "\\android\\5_tools\\sdk.txt");
            string amodex = (cd + "\\android\\4_framework\\am.odex");
            string phoneodex = (cd + "\\android\\3_app\\Phone.odex");
            string testapp = (cd + "\\android\\3_app\\test.txt");
            string testframe = (cd + "\\android\\4_framework\\test.txt");

            Console.WriteLine(cd);

            // creating folders to work with
            Directory.CreateDirectory(cd + "\\android");
            Directory.CreateDirectory(cd + "\\android\\1_Compile");
            Directory.CreateDirectory(cd + "\\android\\2_Decompile");
            Directory.CreateDirectory(cd + "\\android\\3_App");
            Directory.CreateDirectory(cd + "\\android\\4_Framework");
            Directory.CreateDirectory(cd + "\\android\\5_tools");
            Directory.CreateDirectory(cd + "\\android\\6_Saved_classes");

            File.WriteAllText(filetest, "DO NOT DELETE!!!! This is a test file to be sure device mounts in RW mode to be sure all commands work");

                // set adb commands
                Process myProcess = new Process();
                myProcess.StartInfo.FileName = "cmd";
                myProcess.StartInfo.RedirectStandardInput = true;
                myProcess.StartInfo.UseShellExecute = false;
                myProcess.Start();
                // running adb commands, and setting up device for transfere to and from
                myProcess.StandardInput.WriteLine("adb kill-server");
                myProcess.StandardInput.WriteLine("adb start-server");
                myProcess.StandardInput.WriteLine("adb shell");
                myProcess.StandardInput.WriteLine("su");
                myProcess.StandardInput.WriteLine("mount -o rw,remount /system");
                myProcess.StandardInput.WriteLine("chmod 777 /system");
                myProcess.StandardInput.WriteLine("chmod 777 /system/framework");
                myProcess.StandardInput.WriteLine("chmod 777 /system/app");
                //getting build props
                myProcess.StandardInput.WriteLine("getprop ro.product.brand > /sdcard/brand.txt");
                myProcess.StandardInput.WriteLine("getprop ro.product.model > /sdcard/model.txt");
                myProcess.StandardInput.WriteLine("getprop ro.build.version.sdk > /sdcard/sdk.txt");
                myProcess.StandardInput.WriteLine("exit");
                myProcess.StandardInput.WriteLine("exit");

                Process myProcess1 = new Process();
                myProcess1.StartInfo.FileName = "cmd";
                myProcess1.StartInfo.RedirectStandardInput = true;
                myProcess1.StartInfo.UseShellExecute = false;
                myProcess1.Start();
                // pulling need files from android
                myProcess1.StandardInput.WriteLine("adb pull /sdcard/brand.txt " + (brand));
                myProcess1.StandardInput.WriteLine("adb pull /sdcard/model.txt " + (model));
                myProcess1.StandardInput.WriteLine("adb pull /sdcard/sdk.txt " + (sdk));
                myProcess1.StandardInput.WriteLine("adb pull /system/app/Phone.odex " + (phoneodex));
                myProcess1.StandardInput.WriteLine("adb pull /system/framework/am.odex " + (amodex));

                //testing mount
                myProcess1.StandardInput.WriteLine("adb push " + (filetest) + " /system/app/test.txt");
                myProcess1.StandardInput.WriteLine("adb push " + (filetest) + " /system/framework/test.txt");
                myProcess1.StandardInput.WriteLine("adb pull /system/app/test.txt " + (testapp));
                myProcess1.StandardInput.WriteLine("adb pull /system/framework/test.txt " + (testframe));

                //Console.WriteLine(File.Exists(curFile) ? "File exists." : "File does not exist.");
                Console.WriteLine(File.Exists(testapp) ? "File exists." : "File does not exist.");
                Console.WriteLine(File.Exists(testframe) ? "File exists." : "File does not exist.");

                //clearing test file
                myProcess1.StandardInput.WriteLine("adb shell");
                myProcess1.StandardInput.WriteLine("su");
                myProcess1.StandardInput.WriteLine("rm /system/app/test.txt");
                myProcess1.StandardInput.WriteLine("rm /system/framework/test.txt");
                myProcess1.StandardInput.WriteLine("exit");
                myProcess1.StandardInput.WriteLine("exit");
                Console.WriteLine("Press any key to continue...");
                Console.ReadKey(true);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T19:38:26.307

该程序**确实**按顺序运行。

我怀疑您的困惑是您正在启动其他程序。默认情况下，`Process`该类在您开始之前不会等待`myProcess`退出`myProcess1`。要让它等待，请添加一个调用[`Process.WaitForExit()`](http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx)：

```
 myProcess.StandardInput.WriteLine("exit");

  // Add a line here!
  // This will cause it to wait until the first process completes
  myProcess.WaitForExit();

  Process myProcess1 = new Process();
  myProcess1.StartInfo.FileName = "cmd"; 
```

# c++ - WM_QUERYENDSESSION 处理程序返回没有预期效果的值

> ID：10856326
> 
> 赞同：1
> 
> 时间：2012-06-01T19:36:19.600
> 
> 标签：c++, winapi, windows-xp, shutdown

根据[WM_QUERYENDSESSION 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376890%28v=vs.85%29.aspx)，“应用程序应尊重用户的意图并返回 TRUE。” [该链接](http://msdn.microsoft.com/en-us/library/ms700677%28v=vs.85%29.aspx)将其总结为“[在 XP 中] 应用程序可以返回 TRUE 以指示它们可以关闭，或 FALSE 以指示它们不应关闭”。

但是，在我自己的应用程序中，似乎发生了*相反*的情况：

*   当我返回 FALSE 时，所有正在运行的应用程序都会终止并且计算机重新启动（当我的应用程序收到`WM_ENDSESSION`消息时，`wParam`设置为 1，表示“系统正在关闭或重新启动”（请参阅[​​ WM_ENDSESSION 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376889%28v=vs.85%29.aspx)））。

*   当我返回 TRUE 时，一些正在运行的应用程序被终止，但是当它到达我的应用程序时，它似乎停止了关闭过程，并且后续`WM_ENDSESSION`消息已`wParam`设置为 0，就好像关闭已中止，而我的应用程序保持打开状态。另请注意，由于`DefWindowProc`“为 [WM_QUERYENDSESSION] 返回 TRUE”，因此使用它也会以相同的方式阻止关闭。

如果我完全删除 的所有处理`WM_QUERYENDSESSION`，那么整个关闭的业务将照常进行，终止我的应用程序并关闭。这可能表明我的应用程序中出现了严重错误，因为我认为这应该导致与 using 相同的行为`DefWindowProc`。即使我将处理程序缩减为仅作为返回语句（使用 TRUE 或 FALSE，或者将消息和参数传递给`DefWindowProc`.

由于我不想停止关闭，并且几乎只是处理它，所以我可以在它发生时记录，我可以删除它的所有处理并让事情按预期运行。当然，这并没有向我解释为什么这似乎与文档完全矛盾，所以我想知道是否有人有想法。

这一切都在 Windows XP 中下降，因此 Vista+ 的后续更改无关紧要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T16:12:27.947

看起来我忘记了有关此的关键信息：我正在为我的窗口使用对话框模板，因此它们正在处理所有对话框的陷阱。[如DialogProc 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645469%28v=vs.85%29.aspx)中所见，“如果对话框过程处理需要特定返回值的消息，则对话框过程应在返回之前立即通过调用[SetWindowLong](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633591%28v=vs.85%29.aspx) ( *hwndDlg*、**DWL_MSGRESULT**、*lResult* )来设置所需的返回值`TRUE`。”

我的问题的根源可以解释为：“如果对话框过程返回`FALSE`，对话框管理器将执行默认对话框操作以响应消息”，即返回`FALSE`导致默认行为，即返回`TRUE`而不阻止关闭.

还需要注意，“虽然对话框过程类似于窗口过程，但它不能调用该`DefWindowProc`函数来处理不需要的消息。不需要的消息由对话框窗口过程在内部处理。” 所以我几乎完全错了。

# iphone - AVAudioPlayer 没有声音输出

> ID：10856332
> 
> 赞同：12
> 
> 时间：2012-06-01T19:37:14.193
> 
> 标签：iphone, objective-c, audio

我已将音频工具箱和 avfoundation 导入我的班级，并将框架添加到我的项目中，并使用此代码播放声音：

```
- (void)playSound:(NSString *)name withExtension:(NSString *)extension
{
    NSURL* soundUrl = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:name ofType:extension]]; 
    AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:soundUrl error:nil];
    audioPlayer.delegate = self;
    audioPlayer.volume = 1.0;
    [audioPlayer play];
} 
```

我这样称呼它：

```
[self playSound:@"wrong" withExtension:@"wav"]; 
```

但是我得到零声音。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-01T20:27:13.700

更新的答案：

> 我有这个问题。它与 ARC 相关，与 prepareForPlay 无关。只需对它**进行强有力的引用**，它就会起作用。

如下用户所述：`Kinderchocolate`:)

在代码中：

```
.h
~
@property (nonatomic, strong) AVAudioPlayer *player;

.m
~
@implementation
@synthesize _player = player; 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-04T14:58:58.597

是的，ARC 也是我的问题。我解决了只是添加：

在.h

```
@property (strong, nonatomic) AVAudioPlayer *player; 
```

在.m

```
@synthesize player;

-(void)startMusic{
    NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:@"Riddls" ofType:@"m4a"];
    NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:nil];
    player.numberOfLoops = -1; //infinite
    [player play];
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-03T06:31:01.593

我有这个问题。它与 ARC 相关，与 prepareForPlay 无关。只需对它进行强有力的引用，它就会起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T17:00:09.147

如果你在像-viewDidLoad这样的类方法中声明你的AVAudioPlayer，并且ARC是开启的，那么播放器将在-viewDidLoad之后立即被释放并变为nil，（`-(BOOL)play`方法不会阻塞线程）这将在毫秒内发生，明显的“nil”不能播放任何东西，所以你甚至听不到声音。

最好将播放器声明为 ViewController`@property`或将其设置为全局单例，任何东西都可以持续更长时间。

# javascript - 在我的测试脚本中，我运行了 if 语句，但我从来没有运行过 else？我做错了什么

> ID：10856334
> 
> 赞同：-1
> 
> 时间：2012-06-01T19:37:28.247
> 
> 标签：javascript, html

如果您运行此脚本并在提示框中输入 2，它永远不会运行 else，我不知道为什么。是我如何设置 var 或 myFunction 不正确。

```
<!DOCTYPE html>
<html>
<body>

<p>Click the button to demonstrate the prompt box.</p>

<button onclick="myFunction()">Try it</button>

<script type="text/javascript">
function myFunction()
{
var x=1;
var name=prompt("Please enter a number one");

if ( x===1)
  {
alert("good");
  }
else 
  {
alert("not a number 1");
  }

} 
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T19:39:28.177

我相信你想检查一下`x == name`。

您正在检查`x === 1`哪个总是正确的，因为您已经设置`x = 1`并且从未覆盖它。

此外，`x === name`不能作为`prompt`返回字符串工作，`1`而是一个数字。您可能需要设置`x = '1'`然后检查`x === name`是否要使用严格比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T19:40:13.577

您永远不会将 x 分配给除 1 之外的任何东西！然后你检查它确实是整数 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T19:41:06.610

将您的脚本更改为

```
if (prompt("Please enter a number one") != 1){
    alert('Not a number 1');
} else {
    alert('Good')
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T19:39:25.237

因为您`x=1`在脚本中定义然后检查`x === 1`.

也许您打算将用户输入分配给`x`，但您没有这样做。

或者正如 zzzzBov 所说，也许您打算这样做`x === name`或`x == name`取决于您的目的。

# jquery - 将下一个和后退箭头添加到 jquery 幻灯片

> ID：10856338
> 
> 赞同：1
> 
> 时间：2012-06-01T19:38:03.430
> 
> 标签：jquery, hyperlink, slideshow

我确信以前有人问过这个问题，但是我尝试了其他一些答案，但到目前为止都没有。另外，这是一个两部分的问题。

**1\. 我需要在我的 jquery 图像轮播中插入一个后退箭头和下一个箭头。**

这是当前链接的链接：[http ://www.bmww.com/clients/index3/casestudies/cabrini_casestudy.html](http://www.bmww.com/clients/index3/casestudies/cabrini_casestudy.html)

即使插入了箭头，我也需要数字保持与图像相关的突出显示。我宁愿不改变过渡效果，除非由于某种原因我无法实现这一点。以下是我的代码，但如果您需要其他任何内容来回答我的问题，请告诉我。

这是我的html代码：

```
 <div align="center" class="slideshow" style="height:500px; float:none">

   <ul style="margin-top:-30px">
  <li><img src="images/cabrini_1.png" alt="lemon" /></li><!--MUST ALWAYS HAVE THIS HERE AND BE THE SAME IMAGE AS NEXT IMAGE-->
  <li><img src="images/cabrini_1.png" alt="lemon tea" /></li>
  <li><img src="images/cabrini_2.png" alt="splashing lemon" /></li>
  <li><img src="images/cabrini_3.png" alt="salad with lemon" /></li>
  <li><img src="images/cabrini_4.png" alt="lemonade!" /></li>
  <li><img src="images/cabrini_5.png" alt="sliced lemon" /></li>
  <li><img src="images/cabrini_6.png" alt="dripping lemon" /></li>
   </ul>
 </div>

 <div id="casenumbers" align="right" style="margin-right:10px">

 <a href="#" class="change_link" onclick="$('.slideshow').blinds_change(0); return false"></a><!--MUST ALWAYS HAVE THIS HERE AND BE THE SAME IMAGE AS NEXT IMAGE BUT ALWAYS KEEP HIDDEN-->
 <a href="#" class="change_link" onclick="$('.slideshow').blinds_change(1); return false">1</a>
 <a href="#" class="change_link" onclick="$('.slideshow').blinds_change(2); return false">2</a>
 <a href="#" class="change_link"  onclick="$('.slideshow').blinds_change(3); return false">3</a>
 <a href="#" class="change_link"  onclick="$('.slideshow').blinds_change(4); return false">4</a>
 <a href="#" class="change_link" onclick="$('.slideshow').blinds_change(5); return false">5</a>
 <a href="#" class="change_link" onclick="$('.slideshow').blinds_change(6); return false">6</a>
 <a href="cabrini_casestudy2.html" class="ex1" >    &#187; </a>

 </div> <!--end slideshow div--> 
```

这是我的 CSS 代码：

```
 <style>
    a{color: #666335;}
    a.clicked{ color: #D85D27;}
    </style> 
```

和我的脚本：

```
 <script type="text/javascript">
        $(window).load(function () {
$('.slideshow').blinds();

    })
    $(document).ready(function(){
    $('a.change_link').click(function(){
$('.clicked').removeClass('clicked');
$(this).addClass('clicked');
});

    })
    </script> 
```

**2\. 我不知道当您单击示例链接时大家是否都看到它，但有时当我这样做时，会弹出一个奇怪的滚动条，并且整个图像列表会在所有内容加载之前显示一瞬间。有没有我可以添加的代码块或者会出现一个旋转的轮子，所以在完全正确加载之前它不会显示？**

提前谢谢大家！！抱歉，我还在学习，所以我知道这似乎是一个简单或荒谬的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:42:45.197

在准备好的文件中：

```
$(document).keyup(
    function(e)
    {
        if(e.keyCode == left)
            //decrement blinds
        else if(e.keyCode == right)
            //increment blinds
        else;//do nothing
    }); 
```

您必须查找左右箭头的键码。

# android - Android：如何使用预先录制的语音剪辑“.mp3”响应来电？

> ID：10856343
> 
> 赞同：1
> 
> 时间：2012-06-01T19:38:39.553
> 
> 标签：android

我正在开发一个应用程序，在该应用程序中我已经成功地以编程方式检测到来电，但现在我想将预先录制的消息提供给呼叫者，例如“我很忙，我稍后会打电话给你，再见”。并断开通话。

如何在 ANDROID 中实现上述功能？

谢谢你，祝你有美好的一天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-24T10:40:38.313

这是一项高级功能，直到现在还没有实现。不能只向呼叫者播放声音。Android 无法访问通话中的音频流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T11:12:52.627

不，您能做到的最好的事情就是通过扬声器播放声音，以便麦克风可以拾取它。没有 api 可以做到这一点。

# ios - 由于 SSO，AppCenter 被拒绝

> ID：10856344
> 
> 赞同：7
> 
> 时间：2012-06-01T19:38:47.320
> 
> 标签：ios, facebook

我们的应用程序已被 Facebook 应用程序中心拒绝，原因是：“您的 iOS 应用程序似乎没有使用单点登录 (SSO)。请实施 SSO 或将此集成作为开发者应用程序中列出的平台删除。”

但是我们已经实施了 SSO。这是一个错误吗？我们应该重新提交应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:43:25.960

哇，很奇怪他们在宣布之前给了你这个答案。

它可能是以下两种情况之一：

*   实现这个[http://developers.facebook.com/docs/mobile/ios/build/#implementsso](http://developers.facebook.com/docs/mobile/ios/build/#implementsso)

和/或

*   实现 Facebook API 现在是新 SDK 的一部分

# objective-c - 裁剪 CAShapeLayer 以检索外部路径

> ID：10856353
> 
> 赞同：7
> 
> 时间：2012-06-01T19:39:26.010
> 
> 标签：objective-c, uikit, core-graphics, calayer

我正在尝试用其他图层裁剪图层，但是，不是创建蒙版 (B) 并裁剪图层 (A)，而是得到一个形状为 B 的裁剪图层 A，我想得到一个形状为 A 和一个'的图层用 B 层裁剪创建的孔。

```
*************               ***Layer A***
*  Layer A  *               *************
*   *****   *               ****    *****
*   * B *   *      ->       ****    ***** Layer A without shape B
*   *****   *               ****    *****
*           *               *************
*************               ************* 
```

我怎样才能得到裁剪的图层A？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-04T12:55:05.343

您必须创建一个遮盖您要*保留*的区域的遮罩。这可以通过使用奇偶填充规则并为具有两个矩形的形状图层创建路径来完成。您可以像这样创建形状（两个矩形将是您的两个框架）。然后将其设置为掩码以获得您所追求的结果。

```
CAShapeLayer *maskWithHole = [CAShapeLayer layer];

// Both frames are defined in the same coordinate system
CGRect biggerRect = CGRectMake(30, 50, 120, 200);
CGRect smallerRect = CGRectMake(80, 100, 50, 80);

UIBezierPath *maskPath = [UIBezierPath bezierPath];
[maskPath moveToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMinY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMaxY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(biggerRect), CGRectGetMaxY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(biggerRect), CGRectGetMinY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMinY(biggerRect))];

[maskPath moveToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMinY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMaxY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(smallerRect), CGRectGetMaxY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(smallerRect), CGRectGetMinY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMinY(smallerRect))];

[maskWithHole setPath:[maskPath CGPath]];
[maskWithHole setFillRule:kCAFillRuleEvenOdd];
[maskWithHole setFillColor:[[UIColor orangeColor] CGColor]]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-10-02T14:03:14.450

斯威夫特 3.0 解决方案：

```
class MakeTransparentHoleOnOverlayView: UIView {

    @IBOutlet weak var transparentHoleView: UIView!

    // MARK: - Drawing

    override func draw(_ rect: CGRect) {
        super.draw(rect)

        if self.transparentHoleView != nil {
            // Ensures to use the current background color to set the filling color
            self.backgroundColor?.setFill()
            UIRectFill(rect)

            let layer = CAShapeLayer()
            let path = CGMutablePath()

            // Make hole in view's overlay
            // NOTE: Here, instead of using the transparentHoleView UIView we could use a specific CFRect location instead...
            path.addRect(transparentHoleView.frame)
            path.addRect(bounds)

            layer.path = path
            layer.fillRule = kCAFillRuleEvenOdd
            self.layer.mask = layer
        }
    }

    override func layoutSubviews () {
        super.layoutSubviews()
    }

    // MARK: - Initialization

    required init?(coder aDecoder: NSCoder) {
        super.init(coder: aDecoder)
    }

    override init(frame: CGRect) {
        super.init(frame: frame)
    }
} 
```

# css - 将浮动 div 扩展到父容器的 100% 宽度

> ID：10856356
> 
> 赞同：2
> 
> 时间：2012-06-01T19:39:36.970
> 
> 标签：css, html, width, css-float

我有一个包含评论的 div 容器。它被设置为向左浮动，并且头像容器在它旁边（它也向左浮动）。这是一个屏幕截图。

![在此处输入图像描述](../Images/3d9f8ce20f0d23bc7c9695e5f1a6cb2c.png)

白色评论容器的css：

```
.comment_content{
    float: left;
/*
    width: 86%;
*/
    margin-left:5px;
    padding-left: 15px;
    background: url(http://video.chubbyparade.com/img/arrow_left.png) no-repeat 0 8px;
} 
```

我想将此容器设置为填充父容器中剩余空间的 100%。

如果我将它设置为宽度：100%，我会得到一个换行符（因为它现在填充了父容器宽度的 100%）。

如何设置评论容器以填充剩余空间？我曾经通过将其设置为宽度：86% 来做到这一点。但是，如果我调整窗口大小（布局不是固定宽度），那看起来不太好。

一张桌子将是最简单的出路。但是没有css的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T20:50:40.657

Dave Haigh 的解决方案是一种合理的方法。如果您真的*非常*坚持使用浮动，您可以将容器的左侧填充到肖像的宽度，然后将肖像的左边距设置为 100%。这有点傻，但它会起作用。

jsFiddle 演示：http: [//jsfiddle.net/Malkyne/FZcPq/](http://jsfiddle.net/Malkyne/FZcPq/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T20:19:12.313

为什么不浮动评论框，而只是给一个足够高的 margin-left 来清除头像图像。例如，如果头像是 150px 宽，给评论框`margin-left: 155px;`，因为评论框是一个 div（块元素），它自然会填充父 div 的剩余空间。

**这里的jsfiddle示例：http:** [//jsfiddle.net/UHksQ/](http://jsfiddle.net/UHksQ/)

**造型：**

```
.avatar {
    float: left;
    width: 150px;
}
.comment {
    margin-left:155px;
} 
```

# ipad - CCMenuItemSprite 奇怪行为 Kobold2d 新 iPad

> ID：10856359
> 
> 赞同：0
> 
> 时间：2012-06-01T19:39:51.243
> 
> 标签：ipad, cocos2d-iphone, behavior, kobold2d, ccmenuitem

我正在开发一款游戏，但在我的第二个场景中遇到了一些麻烦。
我有一个 CCLayer 类“NewGameLayer”，其中包含一个 CCLayer 作为子级“bookLayer”，“NewGameLayer”包含一个 CCSprite 作为子级，它是一个像真实键盘一样动画的自定义键盘。

现在键盘包含键的 CCMenuItemSprites，问题是当我按下一个键时它什么也不做，选择器没有被触发，奇怪的是当我按住按钮 3 秒时选择器被触发。为什么会这样？有人可以指出我这样做的正确方向吗？

我将键盘精灵添加到主层，如下所示：

```
keyboard = [CCSprite spriteWithFile:@"fondoTeclado.png"];   
    keyboard.position = ccp(512, 1536);  
    [self addChild:keyboard]; 
```

并且 CCMenu 是这样创建的：

```
s0 = [CCMenuItemImage itemFromNormalImage:@"0.png" selectedImage:@"0.png" target:self    selector:@selector(keyPressed:)];                   
s0.position = ccp(748, 390);

menu = [CCMenu menuWithItems:s0, nil];   
    menu.position = ccp(60, 900);   
    [self addChild:menu]; 
```

提前致谢 ！

# php - php简单的html dom解析一个标签，除了一些div

> ID：10856363
> 
> 赞同：0
> 
> 时间：2012-06-01T19:40:08.013
> 
> 标签：php, simple-html-dom

一些测试从使用简单的 html dom 中获取`a`标签。`http://www.msnbc.msn.com/`

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://www.msnbc.msn.com/');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2 GTB5');
$htmls = curl_exec($ch);
curl_close($ch);
$html = str_get_html($htmls);
foreach($html->find('a') as $element){ 
    echo $element.'<br />';
} 
```

此代码可以获得所有超链接，但如何忽略中的所有链接`div#mainNav`？我需要从`div#mainNav`in 中获取所有链接`http://www.msnbc.msn.com/`，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T19:44:33.160

检查父级，如下所示：

```
foreach($html->find('a') as $element){ 
    if ($element->parent()->id == 'mainNav') {
        //do nothing
    } else {
        echo $element.'<br />';
    }
} 
```

# html - 无法使用 socket.io 启动和运行

> ID：10856370
> 
> 赞同：1
> 
> 时间：2012-06-01T19:40:18.930
> 
> 标签：html, node.js, websocket, socket.io

我在 Windows 上运行并使用 WAMP 作为 localhost 服务器。我已经搜索了很多教程，尝试了很多东西等，但仍然没有任何效果..

## **当前设置**

所以现在写，在我的 www/ 目录中，我创建了一个名为`socketiodemo`.

在其中，我`npm install socket.io`还安装了一些其他节点包：

*   套接字.io
*   表示
*   笔尖
*   手写笔

我安装了所有上述软件包，即使我实际上并不需要它们。我刚刚安装了它们，因为很多教程都需要它们，但我宁愿不使用它们，而只是使用 javascript 访问纯 socket.io。

所以，这是我在 www 下的目录的快照：

*   应用程序.js
*   索引.html
*   节点模块
    *   套接字.io
    *   表示
    *   笔尖
    *   手写笔

我发现的最精简的教程之一给了我这个 app.js 代码，它是服务器端：

```
// Require HTTP module (to start server) and Socket.IO
var http = require('http'), io = require('socket.io');

// Start the server at port 8080
var server = http.createServer(function(req, res){ 

    // Send HTML headers and message
    res.writeHead(200,{ 'Content-Type': 'text/html' }); 
    res.end('<h1>Hello Socket Lover!</h1>');
});
server.listen(8080);

// Create a Socket.IO instance, passing it our server
var socket = io.listen(server);

// Add a connect listener
socket.sockets.on('connection', function(client){ 

    // Create periodical which ends a message to the client every 5 seconds
    var interval = setInterval(function() {
        client.send('This is a message from the server!  ' + new Date().getTime());
    },5000);

    // Success!  Now listen to messages to be received
    client.on('message',function(event){ 
        console.log('Received message from client!',event);
    });
    client.on('disconnect',function(){
        clearInterval(interval);
        console.log('Server has disconnected');
    });

}); 
```

以下 index.html 用于客户端代码：

```
<!DOCTYPE html>
<html>
<head>
    <style>
        * { margin:0; padding:0; font-size:11px; font-family:arial; color:#444; }
        body { padding:20px; }
        #message-list { list-style-type:none; width:300px; height:300px; overflow:auto; border:1px solid #999; padding:20px; }
        #message-list li { border-bottom:1px solid #ccc; padding-bottom:2px; margin-bottom:5px; }
        code { font-family:courier; background:#eee; padding:2px 4px; }
    </style>
    <script src="http://cdn.socket.io/stable/socket.io.js"></script>
    <script>

        // Create SocketIO instance
        var socket = new io.Socket('localhost',{
            port: 8080
        });
        socket.connect(); 

        // Add a connect listener
        socket.on('connect',function() {
            log('<span style="color:green;">Client has connected to the server!</span>');
        });
        // Add a connect listener
        socket.on('message',function(data) {
            log('Received a message from the server:  ' + data);
        });
        // Add a disconnect listener
        socket.on('disconnect',function() {
            log('<span style="color:red;">The client has disconnected!</span>');
        });

        // Sends a message to the server via sockets
        function sendMessageToServer(message) {
            socket.send(message);
            log('<span style="color:#888">Sending "' + message + '" to the server!</span>');
        }

        // Outputs to console and list
        function log(message) {
            var li = document.createElement('li');
            li.innerHTML = message;
            document.getElementById('message-list').appendChild(li);
        }

    </script>
</head>
<body>

    <p>Messages will appear below (and in the console).</p><br />
    <ul id="message-list"></ul>
    <ul style="margin:20px 0 0 20px;">
        <li>Type <code>socket.disconnect()</code> to disconnect</li>
        <li>Type <code>socket.connect()</code> to reconnect</li>
        <li>Type <code>sendMessageToServer('Your Message')</code> to send a message to the server</li>
    </ul>

</body>
</html> 
```

客户端代码旨在通过动态调用`sendMessageToServer('Your Message')`chrome 的检查器来工作。

* * *

## **电流输出**

所以，是时候运行服务器了。WAMP 在线，并去 www/socketiodemo 做

`node app.js`

给我输出：

`info - socket.io started`

现在，转到 localhost/socketiodemo，重复显示以下日志：

```
XMLHttpRequest cannot load http://localhost:8080/socket.io/xhr-polling//1338578840544\. Origin http://localhost is not allowed by Access-Control-Allow-Origin.

XMLHttpRequest cannot load http://localhost:8080/socket.io/xhr-polling//1338578850545\. Origin http://localhost is not allowed by Access-Control-Allow-Origin. 
```

现在服务器（节点 app.js）开始显示以下消息：

```
 info  - socket.io started
  warn  - unknown transport: "undefined"
  info  - unhandled socket.io url
  warn  - unknown transport: "undefined"
  info  - unhandled socket.io url
  warn  - unknown transport: "undefined" 
```

此外，在客户端，doing`sendMessageToServer('Hello');`只是附加到 ul: `Sending "hello" to the server!`但实际上并没有对服务器做任何事情。服务器只是不断地转储上面的`info`s 和`warn`s 。客户端也在不断地执行`XMLHttpRequest`上面显示的错误。

你能确定问题出在哪里吗？我实际上已经尝试了很多教程和东西，这是我最接近工作的地方。

如果有人还想推荐一个他们知道可行的教程，请这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T20:55:09.537

随着时间的推移，一些 Socket.IO 的东西已经发生了变化。此外，您可能希望从同一主机/端口提供 HTML 和 Socket.IO JS。试试这个：

**将您的 index.html 移动到`public`目录中**

这样你就有了以下树：

```
app.js
public/
  index.html
node_modules/
  socket.io
  express
  (whatever else) 
```

**修改 app.js 以提供 HTML**

将您的 app.js 更改为以下 JavaScript（仅前几行更改）：

```
// Require Express module (to start server) and Socket.IO
var io = require('socket.io'), express = require('express');

var server = express.createServer();

server.use(express.static(__dirname + "/public"));

server.listen(8080);

// Create a Socket.IO instance, passing it our server
var socket = io.listen(server);

// Add a connect listener
socket.sockets.on('connection', function(client){

    // Create periodical which ends a message to the client every 5 seconds
    var interval = setInterval(function() {
        client.send('This is a message from the server!  ' + new Date().getTime());
    },5000);

    // Success!  Now listen to messages to be received
    client.on('message',function(event){
        console.log('Received message from client!',event);
    });
    client.on('disconnect',function(){
        clearInterval(interval);
        console.log('Server has disconnected');
    });

}); 
```

`index.html`使用此代码，当您访问 localhost:8080 时，您的服务器将使用 Express 服务

**更改您的 Socket.IO 代码**

在`index.html`中，将您的`<script>`标签更改为 read:，`<script src="/socket.io/socket.io.js"></script>`然后将 JavaScript 更改为 read（仅第一部分更改）：

```
// Create SocketIO instance
var socket = io.connect();

// Add a connect listener
socket.on('connect',function() {
    log('<span style="color:green;">Client has connected to the server!</span>');
});
// Add a connect listener
socket.on('message',function(data) {
    log('Received a message from the server:  ' + data);
});
// Add a disconnect listener
socket.on('disconnect',function() {
    log('<span style="color:red;">The client has disconnected!</span>');
});

// Sends a message to the server via sockets
function sendMessageToServer(message) {
    socket.send(message);
    log('<span style="color:#888">Sending "' + message + '" to the server!</span>');
}

// Outputs to console and list
function log(message) {
    var li = document.createElement('li');
    li.innerHTML = message;
    document.getElementById('message-list').appendChild(li);
} 
```

**启动你的服务器并访问 localhost:8080**

请注意，这会一起跳过 WAMP 堆栈；Node.js 为 Socket.IO 代码*和您的静态文件*提供服务。当您访问 localhost:8080 时，您应该会看到这些消息。另请注意，您应该使用`socket.socket.disconnect()`断开连接和`socket.socket.connect()`重新连接。

**源代码**

此应用程序的工作版本的源代码位于[https://github.com/BinaryMuse/so-10856370](https://github.com/BinaryMuse/so-10856370)；记得要`npm install express socket.io`！

# c# - IEnumerable PLINQ 产量

> ID：10856371
> 
> 赞同：0
> 
> 时间：2012-06-01T19:40:20.197
> 
> 标签：c#, ienumerable, plinq

我有一个返回 IEnumerable 的函数，它通过 MAPI 迭代收件箱中的对象，但它相对较慢，所以我将创建一个连接池并以多线程方式使用它们。是否可以在数以千计的廉价线程中使用 PLINQ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T19:45:42.917

如果“通过 MAPI”指的是 Outlook 对象模型（在 VSTO 中可用），则不要使用线程（无论是通过 PLINQ 还是显式）。Outlook 对象模型将所有调用编组回主线程，使进程比直接从主线程本身运行它们时更慢。

从[选择用于开发 Outlook 解决方案的 API 或技术](http://msdn.microsoft.com/en-us/library/gg608200.aspx)：

> 所有对 Outlook 对象模型和 PIA 的调用都在 Outlook 的主前台线程上执行。Outlook 对象模型支持的唯一线程模型是单线程单元 (STA)。不支持从后台线程调用 Outlook 对象模型或 PIA，这可能会导致您的解决方案出现错误和意外结果。

如果您想使用托管代码对 MAPI 进行多线程访问，最好的选择是[Redemption](http://www.dimastr.com/redemption/home.htm)库（商业第三方解决方案）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:54:33.627

这是针对您的任务的 PLINQ 解决方案的想法：

```
public IEnumerable<IMessage> GetMessagesParallel(IEnumerable<IConnection> connections)
{
    return connections
        .AsParallel()
        .WithDegreeOfParallelism(10)
        .SelectMany(connection => GetMessages(connection));
} 
```

此方法接受许多准备使用的连接。10 个线程将开始从每个连接中并行提取消息。`GetMessages`是实际拉取消息的方法。

# javascript - AMD 加载的脚本在 chrome 中不可见

> ID：10856372
> 
> 赞同：0
> 
> 时间：2012-06-01T19:40:22.927
> 
> 标签：javascript, jquery, google-chrome, js-amd

我正在尝试将脚本加载到我正在使用 AMD 样式模式编写的插件中。我没有使用任何 AMD 库（curl、require），因为我想最小化插件中的依赖关系。我成功地加载了脚本并以我想要的方式返回了对象，但是我很难调试脚本，因为它不会出现在 chrome 的调试器中（我还没有尝试过 firefox，但我使用用于开发的铬。）

你能提供任何帮助或洞察这个问题吗？你对这个脚本有什么改进吗？

```
 _loadRendererAsync: function () {
        console.info("loading renderers");
        var settings = $.graphicsSettings();
        var renderers = settings.renderers.slice(0);
        while (renderers.length > 0) {
            var renderer = renderers.shift();
            if ($.isPlainObject(settings._renderers[renderer])) { // if renderer has been cached, load it
                return $.when(settings._renderers[renderer]);
            } else if ($.isPlainObject(renderer)) { // if the renderer is a function, return it directly
                return $.when(renderer);
            } else if (typeof renderer === "string") { // if the renderer is a string dynamically load it
                // figure out if the rendere is a url
                var pathToLoad = renderer;
                if (renderer.indexOf("/") == -1)
                    pathToLoad = settings.basePath + "jqgl." + pathToLoad + ".js";
                var dfd = $.Deferred();

                // **** here is the ajax call to pull down the script ****
                $.ajax({
                    url: pathToLoad,
                    dataType: "text",
                    type: "get",
                    cache: true
                }).done(function (text) {
                    settings._renderers[renderer] = eval(text);
                    dfd.resolve(settings._renderers[renderer]);
                });
                return dfd;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:01:59.700

深思熟虑后，我决定使用 requirejs 作为可选依赖，通过 $.getScript(); 加载脚本的条件代码；

# iphone - iphone容器控制器方向错误

> ID：10856374
> 
> 赞同：1
> 
> 时间：2012-06-01T19:40:31.540
> 
> 标签：iphone, uiviewcontroller, orientation

我的容器控制器的方向有问题。

在控制器之间切换时，前一个控制器倾向于保持在您切换回来时停止的任何方向。

![方向错误](../Images/55deb86122c9cadca4f4b98f7847f637.png)

首先，我用来重现的步骤：

1.  当容器控制器出现时，我旋转到横向。此时，风景中的一切看起来都很好。
2.  通过分段控制切换到子控制器#2。
3.  在此视图中旋转回横向。一切看起来仍然正常。
4.  切换回子控制器 #1。

在 ContainerController 的 viewDidLoad 中：

```
self.child1 = [self.storyboard instantiateViewControllerWithIdentifier:@"first"];
self.child2 = [self.storyboard instantiateViewControllerWithIdentifier:@"second"];

[self addChildViewController:self.child1];
[self addChildViewController:self.child2];

[self.view addSubview:self.child1.view]; 
```

我如何转换子控制器：

```
- (IBAction)segmentChanged:(id)sender
{
    UIViewController *toVc, *fromVc;
    UISegmentedControl *segment = sender;

    if (segment.selectedSegmentIndex == 0)
    {
        toVc = self.child1;
        fromVc = self.child2;  
    }
    else
    {
        toVc = self.child2;
        fromVc = self.child1;
    }

    [toVc willMoveToParentViewController:self];
    [self transitionFromViewController:fromVc 
                      toViewController:toVc 
                              duration:0.0
                               options:UIViewAnimationOptionTransitionNone 
                            animations:nil
                            completion:^(BOOL finished){
                                [toVc didMoveToParentViewController:self];
                            }];
} 
```

我曾假设 transitionFromViewController 会自动处理所有这些。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T19:54:56.940

一个快速的解决方案是在调用 transtionFromViewController 函数之前添加以下行

```
toVc.view.frame = self.view.bounds; 
```

这应该正确设置新视图中的框架

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T03:09:29.300

我喜欢 Omar Abdelhafith 的回答。虽然它会设置框架，但它可能不会将视图旋转到所需的方向。您将不得不对此进行测试。还可以做的是检查状态栏的方向。然后调用 willRotateToOrientation 方法发送状态栏的方向。我希望这也有帮助。

# iphone - iphone - 带有内发光的 UIButton

> ID：10856382
> 
> 赞同：0
> 
> 时间：2012-06-01T19:41:05.407
> 
> 标签：iphone, objective-c, uibutton

我想创建一个带有内发光的矩形圆角按钮。我听到一些关于添加子视图的建议，但我担心子视图会覆盖我按钮中的文本。

如何在不遮挡文本或背景图标图像的情况下实现内部发光？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:46:12.730

制作您想要的图像，然后将其导入您的项目。将按钮的类型设置为自定义，然后将图像设置为您制作的发光图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T19:51:59.013

您可以这样做（它不完全是按钮上的发光，而是按钮标签上的发光）。效果非常相似。第一的

`#import <QuartzCore/QuartzCore.h>`

进而

```
UIColor *color = button.currentTitleColor;
theButton.titleLabel.layer.shadowColor = [color CGColor];
theButton.titleLabel.layer.shadowRadius = 4.0f;
theButton.titleLabel.layer.shadowOpacity = .9;
theButton.titleLabel.layer.shadowOffset = CGSizeZero;
theButton.titleLabel.layer.masksToBounds = NO; 
```

# ruby-on-rails - find_by 关联

> ID：10856386
> 
> 赞同：1
> 
> 时间：2012-06-01T19:41:18.403
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

在 Rails 中，我可以说：

```
Post.find_by_user_id 1 
```

但是有什么办法可以说像

```
Post.find_by_user User.first 
```

?

没什么大不了的，但会更干净一些。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T19:51:36.960

你可以翻转到：

```
User.first.posts 
```

或者，在帖子上使用“范围”......这样你就可以：

```
class Post < ActiveRecord::Base
  scope :for_user, lambda{|user| where(:user_id => user.id) }
end 
```

你会使用：

```
user = User.first
Post.for_user(user) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T19:50:20.933

这个怎么样：

```
User.first.posts 
```

# database - 直接共享数据或制作副本

> ID：10856387
> 
> 赞同：1
> 
> 时间：2012-06-01T19:41:25.057
> 
> 标签：database, copy, data-modeling, shared

这是对复杂系统的非常简单的描述。以下商店和服务有大量的关系和数百万条各种类型的记录。此外，它还被多个应用程序使用。

我有一个项目，由一堆包含大量服务的商店组成。这是简单的关系。这些服务中的大多数变化不大。但很多时候，新商店是通过复制现有商店来创建的，这需要复制所有服务。

一位客户希望商店支持母公司。因此，母公司可以拥有一个或多个商店。这主要用于报告目的，不影响与商店和服务的关系。这已经完成了，没什么大不了的。

现在我们有一个客户说，他们希望母公司能够创建服务并将它们推送到特定的商店。但由于商店遍布全球，每项服务都需要有自己的定价（还有库存考虑）。从表面上看，有两种基本方法。首先，我们可以有一个在商店之间共享的母公司服务记录，并提供不同的数据库结构来保存每个商店的定价。这样做的主要问题是每个应用程序现在都需要提供服务的 ID 和商店 ID，以确保它正在读取正确的服务数据。对于常规加载和搜索，需要额外的表连接，这会增加更多的数据库开销。

第二种解决方案我们可以为每个商店创建一个母公司服务记录的副本。所以不需要创建新的数据库实体（除了一些对母公司的引用）。所有代码都可以在不知道更改的情况下正常运行。这将需要同步服务，以确保每当母公司级别的服务发生变化时，所有商店都会更新。此外，添加到母公司的任何新商店都需要添加共享服务。

从标准化的角度来看，第一个解决方案似乎是最好的。但是从维护来看，第二个更容易实现，并且需要对服务处理方式进行较少的更改。然而同步过程是一个潜在的失败点，但它不应该经常使用。

那么这两种方法的共识是什么？

# java - Spring 安全权限

> ID：10856388
> 
> 赞同：0
> 
> 时间：2012-06-01T19:41:26.687
> 
> 标签：java, spring-mvc, spring-security

当前的要求是使用 Spring 安全性来保护数据。想象这样一种情况，管理员可以选择任何用户并授予权限，以便他有权编辑表单中特定客户详细信息的详细信息。例如：假设有 6 个用户。现在管理员可以向这 6 个用户授予权限，比如用户 1,2 可以编辑客户 A、B、C 表单。user3,4可以编辑自定义的D,E,F表格。可以有N个用户和M个客户。表单将以禁用模式显示给无权编辑客户表单的用户。有权编辑表单的用户。我怎样才能使用弹簧安全来实现这一点。Spring security 有类似 hasRole 的东西 ..但它非常具体。我想要类似 hasPermission 的东西。告诉我如何在 jsp 中检查 hasPermission，然后根据权限，我可以将表单显示为禁用或启用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:10:48.660

与角色相比，访问控制列表更能满足这一要求——授予对受保护对象的特定实例的权限。请参阅 Spring 关于“[域对象安全](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/domain-acls.html)”的参考文档。

# javascript - 在提交表单上动态更改输入元素javascript

> ID：10856389
> 
> 赞同：0
> 
> 时间：2012-06-01T19:41:27.287
> 
> 标签：javascript

我正在尝试创建一个提交表单，通过该表单我更改其中一个输入元素以添加 cookie 的内容，并通过电子邮件将此内容与其他输入元素一起发送。我尝试了各种方法，包括使用 Firefox 访问 value 属性和附加子元素，但无济于事。

**HTML**

```
<form method="GET" action="mailto:davidflynn12@hotmail.com">
    <input type="hidden" name="subject" value="javascript:GetTotal()">
    <input type="hidden" name="body" value="test">
    <input type="submit" value="Send Email">
</form>
<form id="form1" action="mailto:admin@example.com" enctype="text/plain"
method="post">
    <a href="javascript:addOption()">Add Details </a>
    <p>Name:
        <input name="Name" type="text" id="Name" size="40" value=javascript:GetTotal()>
    </p>
    <p>E-mail address:
        <input name="E-mail" type="text" id="E-mail" size="40">
    </p>
    <p>Comment:</p>
    <p>
        <textarea name="Comment" cols="55" rows="5" id="Comment"></textarea>
    </p>
    <p>
        <input type="submit" name="Submit" value="Submit">
    </p>
</form> 
```

**JS**

```
function GetTotal() {
    // Get the individual cookies, by splitting the cookie string
    // Individual cookies is now an array of all the name=value pairs
    var individualCookies = document.cookie.split(';');
    var temp3 = 0;
    //document.write("<p class = 'special_p'>");
    for (var i = 0; i < individualCookies.length; i++) {
        // Loop through each of the cookies, and split them into
        // their name and value, as separate elements in the array
        var oneCookie = individualCookies[i].split("=");
        var name = oneCookie[0];
        var value = oneCookie[1];

        // This is standard code for removing excess white space
        name = name.replace(/^\s+|\s+$/g, '');
        //document.write("<ul>");
        document.write("<ul>");
        if (name == 'History of Boxing') {
            var temp = 7;
            var temp2 = temp * value;
            document.write("<li class = 'special_p'>" + name + " By David
                                Flynn. No. of Copies: " + value + ".Total cost
                                =" + temp2 + "Euros</li>");
        } else if (name == 'Future of Boxing') {
            var temp = 8;
            var temp2 = temp * value;
            document.write("<li class = 'special_p'>" + name + " By
                                    David Flynn. No. of Copies: " + value + ".Total cost =
                                    " + temp2 + "Euros</li>");
        } else if (name == 'History of TaeKwondo') {
            var temp = 9;
            var temp2 = temp * value;
            document.write("<li class =
                                                'special_p'>" + name + " By David Flynn. No.
                                                of Copies: " + value + ".Total cost =
                                                " + temp2 + "Euros</li>");

        } else if (name == 'Future of TaeKwondo') {
            var temp = 10;
            var temp2 = temp * value;
            document.write("<li class =
                                                'special_p'>" + name + " By David Flynn. No.
                                                of Copies: " + value + ".Total cost =
                                                " + temp2 + "Euros</li>");

        }
        document.write("</ul>");
        temp3 += temp2;
        //document.write("Grand total = "+temp3"):
    }
    document.write("<p class = 'special_p'>Total bill is
                                " + temp3 + " Euros</p>");
    //document.write("</p>");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:08:12.493

你不需要表格。[在这里](http://jsfiddle.net/yTMsy/)查看我的小提琴。

**HTML**

```
<input type="button" value="Send Email" onclick="getTotal()"/> 
```

​<strong>JS

```
function getTotal() {
    var mail = 'mailto:davidflynn12@hotmail.com';
    mail = mail + '?subject=Subject';
    mail = mail + '&body=Body';
    location.href = mail;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T19:56:51.230

使用 JavaScript，请执行以下操作：

```
document.getElementById("Name").value = cookieValue; 
```

当页面加载时，即

**HTML：**

```
<body onload="setNameValue()"> 
```

**JavaScript**

```
function setNameValue(){
    document.getElementById("Name").value = cookieValue;
} 
```

希望有帮助！

# git - GIT合并和变基工作流程确认？

> ID：10856390
> 
> 赞同：3
> 
> 时间：2012-06-01T19:41:35.680
> 
> 标签：git, version-control

我已经阅读了其他一些关于合并 VS 变基、使用什么以及何时使用的问题，但对于普通 GIT 用户，我仍然有一些问题。首先，让我发布我理解的良好 GIT 实践：

1.  从现有分支 A 创建新分支 B
2.  在分支 B 上添加/提交更改
3.  来自分支 A 的变基更新
4.  将分支 B 的更改合并到分支 A"

据我目前了解，上述工作流程在使用层次分支模型时效果最佳（即 A = 主分支，B = 用于开发新功能的实验分支）。简而言之，最好将树变基，然后合并回主控。我这样想对吗？

现在，如果与可能正在提交/合并对 A（主分支）的更改的其他开发人员合作，我认为最好尽可能多地重复步骤 2 和 3，以确保我在分支 B 上的工作不会发生冲突与其他用户已提交到分支 A 的任何内容。如果有任何冲突，在分支 2 上使用 rebase 将重新应用我的提交，并允许我在合并回分支 A 之前解决这些冲突。我的理解是否正确？

最后，这是我的主要问题：如果我不与任何其他开发人员一起工作，并且在完成分支 B 中的新功能之前我不会接触分支 A，那么我是否可以跳过 rebase（步骤 3），然后合并分支 B 到主分支 A？我想先做一个 rebase 仍然没有什么坏处，但是如果我知道分支 A 自创建分支 B 以来没有被触及，则没有必要。我的理解是否正确？

PS。我要提前感谢你们给我的任何指导！我是 GIT 新手，在使用 GIT 之前从未使用过 SCM 系统。

谢谢你，杰西·莱特 [http://www.aurorafxstudios.com/](http://www.aurorafxstudios.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:47:11.580

不，过度使用变基不是一个好主意。我以这种方式开始，但除了合并和重置之外什么也没做。看看[我的工作流程](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)。它基于[nvie 的](http://nvie.com/posts/a-successful-git-branching-model/).

简而言之，你希望你的工作井井有条。使分支 A 成为分支 B 的基础将它们联系在一起。如果 A 中的某些内容不好，这可能是一件坏事，“撤消”它可能并非易事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T19:55:10.667

你的理解是正确的。如果什么都没有触及 A，那么你的 rebase 将是一个空操作。A 不变的好处是你知道不会有冲突！

# java - 关联数组和 Java

> ID：10856397
> 
> 赞同：10
> 
> 时间：2012-06-01T19:41:44.137
> 
> 标签：java, arrays, multidimensional-array

我遇到了很多人似乎面临来自 PHP 的相同问题，缺乏一个体面且易于使用的关联数组解决方案。我在这里读过基本上都建议使用HashMap的问题，像这样Q：[Java associative-array](https://stackoverflow.com/questions/5122913/java-associative-array)

但是，我认为提到的解决方案不会解决我的问题。我会解释的。

我有一个包含 250 个项目（国家）的列表，我想为其存储数据。数据的长度未定义，这意味着每个“列”可以包含多个条目，有时没有条目，有时是 4 个，等等。

在 PHP 中我可以这样做：

```
$country_data = new array();
$country_data["nl"]["currency"] = "euro";
$country_data["nl"]["languages"] = "Dutch";
...
$country_data["us"]["currency"] = "US dollar";
$country_data["us"]["languages"] = array("English", "Spanish"); 
```

所以有时我想存储一个数组，有时不是。当然它也可以是一个只有一个条目而不是字符串的数组，但我只是说。

所以，问题是，如何在 HashMap 的数组中存储和获取数组？我知道我几乎被丑陋的 HashMap 解决方案所困扰，但我仍然看不到这将如何让我存储数组，我确信我忽略了一些简单的东西。一个基于我的例子会很棒！

**更新**

我选择了 HashMaps of HashMaps 的原因是我需要能够轻松地监督一切，并在需要时更改几行值。这很灵活，我可以轻松地根据国家代码、语言获取国家名称，或者我可以在需要时获取 country_data HashMap，或所有国家名称等。

```
public class iso_countries {  
    Map<String, Object> country_data        = new HashMap<String, Object>();
    Map<String, String> country_name        = new HashMap<String, String>();
    Map<String, String[]> country_idd       = new HashMap<String, String[]>();
    Map<String, String[]> country_cid       = new HashMap<String, String[]>();

    public iso_countries(){      
         country_name.put("nl",         "Netherlands");      
         country_idd.put("nl",      new String[]{"+31"});
         country_cid.put("nl",      new String[]{"#31#", "*31#"});
         setData(country_name, country_cid, country_idd);
         // 249 * 4 lines more and later...
    }//end method

    public void setData(Map country_name, Map country_cid, Map country_idd){
         country_data.put("name",   country_name);
         country_data.put("idd",    country_idd);
         country_data.put("cid",    country_cid);
    }//end method   

    public String getCountryName(String countryCode){
        String name     = country_name.get(countryCode);
        return name;
    }//end method

    public String[] getCountryIdd(String countryCode){
        String prefix[] = country_idd.get(countryCode);
        return prefix;
    }//end method

    public String[] getCountryCid(String countryCode){
        String cid[]    = country_cid.get(countryCode);
        return cid;
    }//end method
}//end class 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-01T19:45:32.683

也许我误解了你的问题，但为什么不创建自己的对象来保存数据，然后将它们存储在 HashMap 中呢？

Java 是一种面向对象的语言，所以为什么不使用它最著名的工具：对象！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-01T19:45:33.020

PHP 中的数组实际上是一个散列，而不是数组。

在 java 中正确使用的是 HashMap。您还可以通过在其中存储数组或列表来将多个值存储在 Hashmap 中。所以`HashMap<String, HashMap<String, Object>`或`Hashmap<String, List<Object>>`可能会帮助你。

使用多维数组时，必须使用整数作为键。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-01T19:46:56.060

您可以将数组存储为 a 的值`HashMap`：

```
HashMap<Integer,String[]> hm = new HashMap<Integer,String[]>();
hm.put( 1, new String[]{ "a", "b" } ); 
```

至于具有“多维”键，您始终可以将它们与类一起包装。另一个虽然丑陋的解决方案是拥有`HashMap`s of `HashMap`s。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-01T19:50:02.803

正确的方法是使用 Country 对象：

```
class Country {
    // Might want these private with getters and/or setters
    public String currency;
    public Set<String> languages;

    // String...languages is like String[] languages, except you can pass the
    // arguments in like new Country("Euro", "Dutch", "German")
    // instead of new Country("Euro", new String[] { "Dutch", "German" })
    // It's purely stylistic
    public Country(String currency, String... languages) {
        this.currency = currency;
        this.languages = new HashSet<String>();
        for(String language : languages) {
            this.languages.add(language);
        }
        // or this.languages = new HashSet<String>(Arrays.asList(languages));
    }
}

void someFunction() {
    Map<String, Country> countries = new HashMap<String, Country>():
    countries.put("us", new Country("US Dollar", "English", "Spanish"));
    countries.put("nl", new Country("Euro", "Dutch"));
} 
```

您可以通过嵌套列表和地图来做到这一点，如果您不打算使用编译器提供的工具，为什么还要使用 Java？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-01T19:46:34.783

```
Map<String, Object> map = new HashMap<String, Object>(); 
```

现在您放置 List 而不是 Array，在正常情况下您只需放置 String 作为值。

另一种方法是使用值对象来存储你给它的任何东西。

```
public class ValueObject {

   private Map<String, List<Object>> dataHolder = null; //getter, setter
}

Map<String, ValueObject> map = new HashMap<String, ValueObject>(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-01T20:12:55.250

或者，如果您可以静态定义有关国家、货币和语言的信息，您可以将所有这些信息放在一组枚举中：

```
public enum Language {
    EN, ES, FR; 
}

public enum Currency    {
    USD, GBP, CAD;
}

public enum Country {

    US(USD, EN), UK(GBP, EN), CAN(CAD, EN, FR);

    private final Language[] languages;
    private final Currency currency;

    Country(Currency currency, Language... languages) {
        this.currency = currency;
        this.languages = Arrays.copyOf(languages, languages.length);
    }

    public Currency getCurrency() {
        return this.currency;
    }

    public Collection<Language> getLanguages() {
        return asList(this.languages);
    }
} 
```

然后你可以很容易地做这样的事情：

```
Map<Integer, Country> data = new HashMap<Integer, Country>();
data.put(0, US);
data.put(1, UK);

Currency currency = data.get(0).getCurrency();
Collection<Language> langs = data.get(0).getLanguages();

System.out.println(currency);
System.out.println(langs); 
```

# ios - 在另一个类中停止 AVAudioPlayer

> ID：10856404
> 
> 赞同：0
> 
> 时间：2012-06-01T19:42:23.747
> 
> 标签：ios, avaudioplayer

我搜索了包括这个论坛在内的多个论坛，但找不到解决我问题的方法。当我的“IQTest”视图控制器加载时，我设置了一个要播放的声音文件。它播放正常，我可以在“IQTest”视图控制器中停止声音。

**IQTest.h**

```
@interface IQTest : UIViewController
{
AVAudioPlayer *theAudio;
}
@property (nonatomic, strong) AVAudioPlayer *theAudio;
@end 
```

**IQTest.m**

```
- (void)viewDidLoad
{
[super viewDidLoad];

NSString *path = [[NSBundle mainBundle] pathForResource:@"IQTestBackgroundMusic" ofType:@"mp3"];
AVAudioPlayer* soundTrack=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
soundTrack.numberOfLoops = -1;
self.theAudio = soundTrack;
[theAudio play];
} 
```

当用户按下“IQTestQuestionThree”视图控制器中的按钮时，我想停止播放声音，但是当我尝试停止声音时，它要么继续播放，要么我的应用程序崩溃。我尝试了多种方法，但还没有找到一种方法来阻止我的声音。

**IQTestQuestionThree.m**

```
- (IBAction) question3Answer1
{
IQTest *IQTestAudio = [[IQTest alloc] init];
[IQTestAudio.theAudio stop];

iqScaryFace.hidden = NO;
homeButton.hidden = NO;
homeButtonLabel.hidden = NO;
answer1Button.hidden = YES;
answer2Button.hidden = YES;
answer3Button.hidden = YES;
answer4Button.hidden = YES;
} 
```

感谢您为我提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:53:45.613

```
- (IBAction) question3Answer1
{
    IQTest *IQTestAudio = [[IQTest alloc] init];
    [IQTestAudio.theAudio stop]; 
```

这段代码创建了一个全新的`IQTest`对象（它是一个`UIViewController`子类——因此名称容易混淆），然后调用它的`stop`方法。

这个全新的`IQTest`对象（也许重命名`IQTestViewController`？）刚刚创建——它与开始播放声音的对象不同。所以你期望它停止播放它无法控制的东西。（至少，我不希望它工作，没有看到更多的代码。）

> 当用户按下“IQTestQuestionThree”视图控制器中的按钮时，我想停止播放声音

视图层次结构是如何构成的？

是`IQTestQuestionThree`父级的视图控制器`IQTest`吗？（同样，考虑重命名`IQTestQuestionThree`为类似的名称`IQTestQuestionThreeViewController`。）如果是这样，您可以使用[委托模式](http://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)来`IQTestQuestionThree`提醒`IQTest`停止播放声音。

如果您的视图控制器层次结构更复杂，和/或如果在其他地方有其他视图控制器可能想要停止播放声音，请考虑创建一个用于播放声音的[模型类](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)作为播放声音的[代理](http://en.wikipedia.org/wiki/Proxy_pattern)，实例化该模型在您的应用程序委托中创建类，并将其传递给所有需要控制音频的视图控制器。

(`UIViewController`按照惯例，子类`ViewController`在其名称上带有“”作为后缀。您会在 Apple 的源代码中发现这种情况。如果您想编写代码以提高可读性，您应该遵循您使用的语言的约定'尽可能地重写。）

# java - NotifyChange 依赖于 messageBox 点击 ZK

> ID：10856409
> 
> 赞同：1
> 
> 时间：2012-06-01T19:42:43.177
> 
> 标签：java, mvvm, zk

我在显示用户列表的网格中有一个模板。该模板中有一个按钮，可让用户从列表中删除。当用户单击此按钮时，我会出现一个消息框，询问他们是否确定要继续。如果按下“确定”，则删除用户。我希望更新列表，以便不再显示用户，但似乎 @NotifyChange 什么也没做。如何通知模板用户列表已更改？

这是zul的相关部分：

```
<grid apply="org.zkoss.bind.BindComposer" sclass="noborder" style="padding: 5px;border:none;background-image:none"
viewModel="@id('usersVM') @init('projectName.viewmodel.ListUsersViewModel')"
model="@load(usersVM.users)"
emptyMessage="No users to display">
  <template name="model">
    <row>
        <window>
            <vlayout>
                <hlayout>
                    <label value="@load(each.fullname)" sclass="f" />
                </hlayout>
            </vlayout>     
         </window>
         <button hflex="min" label="Inactivate user" onClick="@command('inactivateUser', user=each)"/>
    </row>
  </template>
</grid> 
```

这是视图模型的相关部分：

```
List<User> users = new ArrayList<User>();
@Command("inactivateUser")
@NotifyChange("users")
public void inactivateUser(@BindingParam("user")
final User user)
{
    EventListener clickedOK = new EventListener() 
    {
        @Override
        public void onEvent(final Event e)
        {
            if (Messagebox.ON_OK.equals(e.getName()))
            {
                // remove from users so that they no longer display on this page.
                users.remove(user);
            }
        }
    };

    Messagebox.show("Are you sure you want to inactivate this user?",
            "Message from webpage", Messagebox.OK | Messagebox.CANCEL, Messagebox.NONE,
            clickedOK);

} 
```

请注意，该变量`users`是 zul 显示的用户列表。我曾尝试添加`@NotifyChange`到嵌套的 EventListener 中，因为我意识到`inactivateUser`在 EventListener 被激活之前控制离开了函数，但它似乎没有更新列表。我也尝试过让 EventListener 调用一个单独的`removeUser(User user)`函数，但这也没有通知更改。谢谢阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T21:22:29.097

从[zk 绑定项目站点](http://code.google.com/p/zkbind/)，您可以下载一个名为**A order CRUD example v3**的示例，该示例演示了如何执行此操作。

从下面的示例中，您可以看到消息框中的删除按钮触发了**deleteOrder**命令：

```
 <window title="Confirm" mode="modal" border="normal" width="300px" visible="@load(not empty vm.deleteMessage)">
    <vbox hflex="true">
        <hlayout height="50px">
            <image src="~./zul/img/msgbox/question-btn.png"/>
            <label value="@load(vm.deleteMessage)"/>
        </hlayout>
        <hbox pack="center" hflex="true">
            <button label="Delete" onClick="@command('deleteOrder')"/>
            <button label="Cancel" onClick="@command('cancelDelete')"/>
        </hbox>
    </vbox>
</window> 
```

# assembly - MASM 例程从 32 位地址读取 dword

> ID：10856412
> 
> 赞同：0
> 
> 时间：2012-06-01T19:42:48.720
> 
> 标签：assembly, masm, masm32

因此，我们的一个项目遇到了一些需要编写的汇编代码的障碍。我们有一个旧的、旧的（用 Borland 1992 编译的）内存测试器 C 程序，它偶尔需要进入汇编程序以从内存的某些区域读取值。我需要编写一个 MASM 汇编例程，它接受 32 位内存地址并返回该位置的 dword。我唯一的组装经验是大约 4 年前在 MIPS 的，所以我很生疏。到目前为止，我有这个：

```
; Do a direct read of a memory address
public _mmap_io
_mmap_io PROC FAR

push  bp          ; 'C' entry    

mov   bp,sp       ; set pointer to parm list
push  es
xor   ax, ax      ; clear ax        
mov   es, ax      ; clear es?
add   bp, 6       ; bump to parms

xor eax,eax       ; clear eax
mov eax, [bp]     ; move the value pointed to by bp into eax
mov esi, eax      ; source index
mov eax,es:[esi]                           

pop   es    
pop   bp          ; 'C' exit    
ret

_mmap_io ENDP 
```

问题是当我读入值时，我得到的东西几乎但不完全是我正在寻找的东西。当我运行类似...

```
DWORD output = mmap_io(0xEFF87110);
printf("output: %p\n");

output = mmap_io(0xE0000000);
printf("output: %p\n"); 
```

在 0xEFF87110 具有值 0x00000000 并且 0xE0000000 具有 0x80863C00 的内存空间中，我最终得到：

```
output: 0110:0000
output: 9463:8086 
```

我相信我混淆了我的 16 位和 32 位寄存器，但任何解决这些问题的尝试都会导致进一步的问题。有没有人有更好、更简洁的代码直接从 32 位内存地址读取，或者可以帮助我解决我的问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-01T19:51:01.243

这可以在良好的旧 C 中完成。无需组装。假设“dword”是 32 位：

```
#include <stdint.h>

uint32_t peek32(uintptr_t address)
{
   volatile uint32_t * ptr = (volatile uint32_t *)address;
   return *ptr;
}

void poke32(uintptr_t address, uint32_t value)
{
   volatile uint32_t * ptr = (volatile uint32_t *)address;
   *ptr = value;
} 
```

对于 16 位和 8 位值，可以有类似的版本。

# css - 如何减少 Twitter Bootstrap 中组件之间的空间

> ID：10856419
> 
> 赞同：1
> 
> 时间：2012-06-01T19:43:36.250
> 
> 标签：css, twitter-bootstrap

我想将组件之间的空间（主要是 DIV）从 20px 减少到 3px 或者可能是 5px。我知道我需要乘以 12 列 * 60 像素，然后乘以 11 个空格 * 20 像素，这给了我 940 像素。也知道 Twitter 中用于进行这些更改的工具，但我尝试了，但我的样式仍然有 20 像素的空间。对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:19:59.047

你的意思是网格列？您要更改的值是：

`@gridColumns`

`@gridColumnWidth`

`@gridGutterWidth`

您可以在 LESS 脚本中修改它们，或者您可以[下载带有已自定义变量的整个包](http://twitter.github.com/bootstrap/download.html#variables)。

# php - Zend 修改。添加 MySQL FORCE INDEX 提示

> ID：10856420
> 
> 赞同：2
> 
> 时间：2012-06-01T19:43:51.180
> 
> 标签：php, zend-framework, zend-db, zend-db-select

我正在尝试扩展 Zend 库以获得这样的查询：

```
SELECT * FROM item i **force index(ix)** ORDER BY date LIMIT 100; 
```

我正在使用这个 Zend 论坛问题解决方案：http: [//framework.zend.com/issues/browse/ZF-7570](http://framework.zend.com/issues/browse/ZF-7570)

但是我有一个问题。看看下面的代码。

```
$select->forceIndex('index');
echo $select->assemble();
     //  I get the right SELECT query with the force index hint
$this->fecthAll($select);
    //  The server execute a wrong SELECT query without the force index hint 
```

一些帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:25:12.703

我不太清楚为什么，但如果我删除 echo 子句，fetchAll 会执行正确的查询......

所以这就是答案，**删除回声**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-21T19:11:50.497

在我看来，您使用的补丁已损坏。如果您检查源，它会在第一次创建查询时取消设置 FORCE INDEX 部分。

如果你检查它， $select->assemble() == $select->assemble() 应该给出错误。

# php - 使用 .htaccess 创建 google 风格的 url

> ID：10856421
> 
> 赞同：1
> 
> 时间：2012-06-01T19:43:55.040
> 
> 标签：php, .htaccess

我正在使用 .htaccess 创建 Google 风格的 SEO 规则，但我在最后一部分遇到了问题。

如果您在浏览器中输入 google.com/nexus，您将被重定向到 www.google.com/nexus/

它添加 www 以及尾部斜杠。

如何使用 .htaccess 实现这一目标？

```
#Start rewrite engine
RewriteEngine on
RewriteBase /

# Enforce www
# If you have subdomains, you can add them to 
# the list using the "|" (OR) regex operator
RewriteCond %{HTTP_HOST} !^(www|dev|d10|m)\.
RewriteCond %{HTTPS}s ^on(s)|
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Hide the private directory by redirecting the request to index.php
RewriteRule ^(private|\.git) index.php/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [QSA,L] 
```

如果您看到任何需要提高速度/可扩展性的地方，将不胜感激。

我的最终解决方案：

```
RewriteEngine on
RewriteBase /        

# Enforce www
# If you have subdomains, you can add them to 
# the list using the "|" (OR) regex operator
RewriteCond %{HTTP_HOST} !^(www|dev|d10|m)\.    
RewriteCond %{HTTPS}s ^on(s)|
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# Add Trailing Slash
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule (.*)$ /$1/ [R=301,L]

# Hide the private directory by redirecting the request to index.php
RewriteRule ^(private|\.git) index.php/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:48:06.230

```
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule (.*)$ http://example.com/$1/ [R=301,L] 
```

将 example.com 替换为您的域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T19:48:15.787

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^domain\.com
RewriteRule ^(.*)$ http://www.domain.com/$1 [R=permanent,L] 
```

对于领先的 www [http://www.cyberciti.biz/faq/apache-redirect-domaincom-to-wwwdomaincom/](http://www.cyberciti.biz/faq/apache-redirect-domaincom-to-wwwdomaincom/)

# sql - SQL Reporting Services 2005 使用 DateSerial 函数向用户显示默认的午夜时间

> ID：10856422
> 
> 赞同：1
> 
> 时间：2012-06-01T19:43:57.037
> 
> 标签：sql, sql-server-2005, reporting-services, report

我目前正在编写 SQL 2005 中的报告，并且对报告非常陌生。我正在使用“开始日期”和“结束日期”让用户选择报告期。

对于我的“开始日期”，我使用的报告参数“默认”值为：

> =DateSerial(年(今天()),月(今天()),日(今天()))

对于我的“结束日期”，我使用的 ReportParameter Defulat 值为：

> =现在（）

用户显示如下：

*   开始日期：06/01/2012
*   结束日期：01/01/2012 12:33:03

**问题：** - 我想向用户显示 DateSerial 函数的默认时间（默认为午夜 00:00:00）。我只是好奇这在 SQL 2005 中是否可行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T19:39:28.717

如果时间与您的查询无关（例如，您查询的数据仅使用日期而不是时间），“结束日期”参数默认值可以更改为“=Today()”

"Today()" 函数仅提供当前日期，如果在支持时间的类型中使用，将显示 12:00:00 AM 的“默认”时间。

[表达式示例（报表生成器和 SSRS）](http://msdn.microsoft.com/en-us/library/ms157328.aspx)

# ios - NSXMLParser 有时只给出错误代码 4，当 NSData 输入总是相同时

> ID：10856424
> 
> 赞同：1
> 
> 时间：2012-06-01T19:43:59.457
> 
> 标签：ios, xcode, nsxmlparser, xmlreader

我正在使用类 XMLReader 从 URL 中解析一些 XML。XML有时被成功解析，有时我得到：

错误域 = NSXMLParserErrorDomain 代码 = 4“操作无法完成。（NSXMLParserErrorDomain 错误 4。）”

解析通常在我第一次运行它时成功，在更改某些内容之后，然后它会失败，直到我更改其他内容。例如，在下面的代码中，我尝试将 [parser release] 行注释掉，并且解析成功。然后我再次运行它并返回错误代码 4。

我每次都记录相同的输入数据，成功或失败。

任何想法这里出了什么问题？如果有帮助，我可以粘贴更多代码，但我已将错误隔离在 NSXMLParser 解析方法（在下面的代码中调用）中，因为它总是接收相同的数据。

谢谢！

编辑：我知道错误代码 4 是一个空文档错误。但我知道我的 NSData 不是空的。所以这里发生了其他事情

```
 - (NSDictionary *)objectWithData:(NSData *)data
{

//data always makes it here, the same data gets logged regardless of parse success

//NSLog(@"%@",data);

// Clear out any old data
[dictionaryStack release];
[textInProgress release];

dictionaryStack = [[NSMutableArray alloc] init];
textInProgress = [[NSMutableString alloc] init];

// Initialize the stack with a fresh dictionary
[dictionaryStack addObject:[NSMutableDictionary dictionary]];

// Parse the XML
NSXMLParser *parser = [[NSXMLParser alloc] initWithData:data];

parser.delegate = self;

[parser setShouldResolveExternalEntities:NO];

BOOL success = [parser parse];

[parser release];

// Return the stack's root dictionary on success
if (success)
{
    NSDictionary *resultDict = [dictionaryStack objectAtIndex:0];

    return resultDict;
}

return nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T23:41:37.867

问题不在于`data`方法开始时是否正确`objectWithData`；通过解析方法计算是否`data`正确。`data`您应该在解析器完成后检查完整性。

很可能，`data`由 XMLReader 返回，但您没有正确保留它。有时，计算密集型解析器会强制进行垃圾收集（或池回收）`data`并被破坏。

只需`[data retain]`在您的`objectwithData`方法开始时执行；然后问题就会消失。

# opencl - opencl 内核实现一个简单的数学公式

> ID：10856428
> 
> 赞同：0
> 
> 时间：2012-06-01T19:44:24.550
> 
> 标签：opencl

实现定义为的错误函数时要考虑的最佳实践是什么

![误差公式](../Images/e13136db409b96674f9390c42ac52016.png)

使用 OpenCL 内核？

A、B 和 C 是 3D 浮点数组，\delta 是 Kronecker delta。

(N, M) = (2, 7) 或 (N, M) = (3, 23) 的典型值。

天真的实现（如下所示）比 CPU 版本慢几个数量级。

谢谢，

T。

```
__kernel void cl_bilinear_alg(
                            __global float * A,
                            __global float * B,
                            __global float * C,
                            __global const int M,
                            __global const int N,
                            __global float * R)
{
    int index = get_global_id(0);
    int N2 = N * N;
    int mat_offset = index * N2 * M;
    float s1, s2, err = 0.0f;

    for (int i = 0; i < N; ++i)
    {
        for (int j = 0; j < N; ++j)
        {
            for (int k = 0; k < N; ++k)
            {
                for (int l = 0; l < N; ++l)
                {
                    for (int m = 0; m < N; ++m)
                    {
                        for (int n = 0; n < N; ++n)
                        {
                            s1 = (n == i) * (j == k) * (l == m);
                            s2 = 0;

                            for (int r = 0; r < M; ++r)
                            {
                                s2 += A[mat_offset + r * N2 + i * N + j] *
                                      B[mat_offset + r * N2 + k * N + l] *
                                      C[mat_offset + r * N2 + m * N + n];
                            }
                            err += (s2 - s1) * (s2 - s1);
                        }
                    }
                }
            }
        }
    }
    R[index] = err;
} 
```

**更新**

主要目标是 Geforce GTX 570，但未来可能会改变。

**更新2**

在对代码进行矢量化、将位移动到本地内存、展开一些循环并将预先计算的 Kronecker 乘积显式传递给内核之后，代码如下所示：

```
__kernel void cl_bilinear_alg(__global const float * A,
                              __global const float * B,
                              __global const float * C,
                              __global const int N,
                              __global const int M,
                              __global const float * kron,
                              __global float * R) 
{
    __private int index = get_global_id(0);
    __private int cM = ceil(M / 4.0f);
    __private int N2 = N*N;
    __private int N4 = N2*N2;
    __private int mat_offset = index * N2 * M;
    __private float s1, s2, err = 0;
    __private float4 vzero = (float4) (0.0f, 0.0f, 0.0f, 0.0f);
    __local float4 va[54], vb[54], vc[54];

for (int ij = 0, k = 0; ij < N2; ++ij)
{
    int r = 0;
    for (; r < M / 4; r += 4, ++k)
    {
        int idx0 = mat_offset + N2 * r + ij;
        int idx1 = mat_offset + N2 * (r + 1) + ij;
        int idx2 = mat_offset + N2 * (r + 2) + ij;
        int idx3 = mat_offset + N2 * (r + 3) + ij;
        va[k] = (float4) (A[idx0], A[idx1], A[idx2], A[idx3]);
        vb[k] = (float4) (B[idx0], B[idx1], B[idx2], B[idx3]);
        vc[k] = (float4) (C[idx0], C[idx1], C[idx2], C[idx3]);
    }

    if (M % 4)
    {
        float buffa[4] = {0}, buffb[4] = {0}, buffc[4] = {0};
        for (; r < M; ++r)
        {
            int idx = mat_offset + N2 * r + ij;
            buffa[r % 4] = A[idx];
            buffb[r % 4] = B[idx];
            buffc[r % 4] = C[idx];
        }
        va[k] = vload4(0, buffa);
        vb[k] = vload4(0, buffb);
        vc[k++] = vload4(0, buffc);
    }
}    

for (int ij = 0; ij < N2; ++ij)
{
    for (int kl = 0; kl < N2; ++kl)
    {
        for (int mn = 0; mn < N2; ++mn)
        {
            s1 = kron[ij * N4 + kl * N2 + mn];
            s2 = 0;
            for (int r = 0; r < cM; ++r)
                s2 += dot(va[cM * ij + r], mad(vb[cM * kl + r], vc[cM * mn + r], vzero));

            //the most expensive line
            err += (s2 - s1) * (s2 - s1);
        }
    }
}

R[index] = err;
} 
```

通过应用这些更改，观察到与幼稚实现相比，速度提高了 4 倍。此外，据透露，最昂贵的线路是错误更新，即

```
err += (s2 - s1) * (s2 - s1); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-19T04:16:49.053

通常你会想要打破其中一些循环......很多...... - 外部循环分成多个`workgroup`s，它们在自己的计算单元上运行（每个 GPU 大约有 16 个计算单元，不多） - 接下来的几个循环将在每个工作组内的不同线程上拆分

如果您尝试同时运行所有计算，它们都会尝试同时将数据加载到内存中，这将非常糟糕。GPU 的内存非常有限。当然，全局内存听起来足够大，几 GB，但全局 GPU 内存很慢。您希望将数据以每个计算单元的形式存入本地内存，大小约为 32-64KB，仅此而已。

您通常希望以某种方式将您的任务分成非常小的任务，并为每个工作组执行以下操作：

*   将一块内存从全局内存加载到本地内存中
    *   整个工作组线程可以参与复制，使用合并访问
*   在这个内存上做一些工作，比如做一些总结，等等
*   将结果写回全局内存
*   然后，可以迭代一下，或者干脆退出，让其他工作组来处理其他工作

在 CPU 上，数学运算往往是一个主要瓶颈，但在 GPU 上，通常内核大多无用地旋转，同时等待数据从全局内存逐渐到达它们。无论你能做什么来优化这个过程，防止需求冲突等等，都会使内核显着更快。

# visual-studio-2010 - 删除 Visual Studio 2010 中不需要的代码？

> ID：10856429
> 
> 赞同：1
> 
> 时间：2012-06-01T19:44:25.307
> 
> 标签：visual-studio-2010

当我在 Visual Studio 中创建[Windows 窗体](http://en.wikipedia.org/wiki/Windows_Forms)的 GUI 时，有时我会碰巧双击一个组件并获得一些自动生成的代码。为了删除这个不需要的代码，我在某个地方读到过，但我不记得在哪里删除这个代码，你不应该删除它，应该以其他方式完成以防止将来出现错误。如何以正确的方式在 Visual Studio 中删除此不需要的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T19:51:41.610

通常，我只是删除代码，并没有什么不好的结果。更糟糕的是，当您尝试构建时，您会在designer.cs 中收到一个错误，提示您找不到某些代码。只需删除它，一切都会正常工作。

您也可以在双击时使用 Ctrl+Z，但它会删除您双击的组件，您必须再次将其添加到表单中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T19:56:37.860

只需将其从[XAML](http://en.wikipedia.org/wiki/Extensible_Application_Markup_Language)代码中删除即可。例如，如果您双击一个按钮，`Click="button1_Click"`在您的 XAML 中搜索并删除它。

如果您创建了 Windows 窗体项目，请转到[解决方案资源管理器](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Other_tools)并打开文件文件`Form.Designer.cs`并从函数中`InitializeComponent()`删除此行：

```
this.button1.Click += new System.EventHandler(this.button1_Click); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T19:58:47.787

AFAIK，答案是`NO`。除非有一些来自 Microsoft 的特定插件（我不知道它已关闭）才能启用它。

因此，您将不得不手动删除自动生成的不必要的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T20:10:35.550

Control-Z - 它将从 YourForm.designer.cs 文件中删除事件处理程序注册，并从 YourForm.cs 文件中删除方法。

按下 Control-Z 后会出现一个警告框，只需单击是。

# jvm - 用于 Cortex M3 的嵌入式 Java VM

> ID：10856437
> 
> 赞同：14
> 
> 时间：2012-06-01T19:45:18.017
> 
> 标签：jvm, embedded, arm

我目前正在寻找可移植（或已移植）到 ARM Cortex M3（来自 NXP 的 LPC1768，512kB ROM）的 Java VM。我已经有一些使用简单实时 Java (www.rtjcom.com) 的经验，它占用空间小并且有据可查。你知道更多用于 Cortex M3 的嵌入式 JVM 吗？理想情况下有一个真正的字节码解释器和一个类加载器？

感谢您的建议。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-02T06:59:14.830

以下 Java VM 以嵌入式系统为目标：

*   [JamaicaVm](http://www.aicas.com/jamaica.html)（商业）
*   [MicroJVM](http://www.microej.com/pricing/)（商业）
*   [Aonix Perc](https://www.ptc.com/en/products/developer-tools/perc)（商业）
*   [PreonVm](http://www.virtenio.com/en/products/virtual-machine.html)（商业）
*   [AvianVM](https://github.com/ReadyTalk/avian)（开源）
*   [打开米卡](https://github.com/kifferltd/open-mika)（开源）
*   [Squawk](https://en.wikipedia.org/wiki/Squawk_virtual_machine)（开源）
*   [SimplRJT](http://www.rtjcom.com/main.php?p=home)（开源不需要 RTOS 来支持线程 - 似乎已经消失了）
*   [Kaffe](https://github.com/kaffe/kaffe)（开源）。

[Michael Barr 和 Jason Steinhorn 的](http://www.eetindia.co.in/ARTICLES/1998FEB/PDF/EEIOL_1998FEB01_EMS_INTD_TA.pdf)这篇文章也可能会有所帮助。

请注意，在 Cortex M3 上，它可能非常慢。[带有Jazelle](http://en.wikipedia.org/wiki/Jazelle)或[ThumbEE](http://en.wikipedia.org/wiki/ARM_architecture#Thumb_Execution_Environment_.28ThumbEE.29)的 ARM 部件可能更合适。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-16T12:29:24.787

看看 IS2T JVM，因为其他 JVM 根本不在 Cortex M 设备上运行。

# python - 使用 Python 解析和重新格式化 CSV/文本数据

> ID：10856438
> 
> 赞同：1
> 
> 时间：2012-06-01T19:45:18.393
> 
> 标签：python, parsing, text, csv, formatting

对不起，如果这是一个初学者的问题，但我对 python 没有太多经验，并且真的可以使用一些帮助来解决这个问题。如果有更好的编程语言来解决这个问题，我会更愿意听到它

我正在做一个小项目，我有两个数据块，格式彼此不同。它们都是保存为 CSV 文件的电子表格，我真的很想让一组匹配另一组，而不必手动编辑所有数据。

我需要做的是通过 CSV，并像这样格式化保存的任何数据：

> 10W
> 
> 20E
> 
> 15-16N
> 
> 17-18S

像这样的格式（相应格式的相应行）：

> 10，瓦
> 
> 20，乙
> 
> ,,15,16,N
> 
> ,,17,18,S

这样它们就可以在作为电子表格打开时被复制

我能够将文件转换为 python 中的字符串，但我不确定如何正确编写一些东西来搜索数字-连字符-数字-字母格式。

我将非常感谢我能得到的任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:05:49.773

这听起来像是正则表达式的一个很好的用例。一旦将行拆分为单独的字符串并去除空格（使用`s.strip()`），这些应该可以工作（我假设这些是基本方向；`[NESW]`如果该假设不正确，则需要更改为其他内容。）：

```
>>> import re
>>> re.findall('\A(\d+)([NESW])', '16N')
[('16', 'N')]
>>> re.findall('\A(\d+)([NESW])', '15-16N')
[]
>>> re.findall('\A(\d+)-(\d+)([NESW])', '15-16N')
[('15', '16', 'N')]
>>> re.findall('\A(\d+)-(\d+)([NESW])', '16N')
[] 
```

第一个正则表达式`'\A(\d+)([NESW])'`仅匹配以数字序列开头后跟大写字母 N、E、S 或 W 的字符串。第二个正则表达式仅匹配以数字序列开头后跟连字符、后跟另一个序列的字符串数字，后跟大写字母 N、E、S 或 W。强制它在开头匹配可确保这些正则表达式不匹配较长字符串的后缀。

然后你可以做这样的事情：

```
>>> vals = re.findall('\A(\d+)([NESW])', '16N')[0]
>>> ','.join(vals)
'16,N'
>>> vals = re.findall('(\d+)-(\d+)([NESW])', '15-16N')[0]
>>> ',,' + ','.join(vals)
',,15,16,N' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T20:15:13.890

这是一个使用正则表达式的完整解决方案。@senderle 已经击败了我，所以请随时勾选他的回复。`re`这只是在这里添加，因为我知道一开始在我的代码中缠绕我的头是多么困难。

```
import re

dash = re.compile('(\d{2})-(\d{2})([WENS])')
no_dash = re.compile( '(\d{2})([WENS])' )

raw = '''10W
20E
15-16N
17-18S'''
lines = raw.split('\n')

data = []

for l in lines:
    if '-' in l:
        match = re.search(dash, l).groups()
        data.append( ',,%s,%s,%s' % (match[0], match[1], match[2] ) )
    else:
        match = re.search(no_dash, l).groups()
        data.append( '%s,%s' % (match[0], match[1] ) )

print '\n'.join(data) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:03:52.517

就您而言，我认为快速解决方案将涉及正则[表达式](http://docs.python.org/library/re.html)

您可以使用[match](http://docs.python.org/library/re.html#re.match)方法在它们与给定的正则表达式匹配时提取不同的标记，或者使用[split](http://docs.python.org/library/re.html#re.split)方法将字符串拆分为给定分隔符的标记。

但是，在您的情况下，分隔符将是单个字符，因此您可以使用类中的[split](http://docs.python.org/library/stdtypes.html#str.split)方法`str`。

# javascript - 删除 D3 中的线元素

> ID：10856440
> 
> 赞同：2
> 
> 时间：2012-06-01T19:45:29.477
> 
> 标签：javascript, d3.js

我正在创建一个基于[https://github.com/mbostock/d3/blob/master/examples/line/line.html](https://github.com/mbostock/d3/blob/master/examples/line/line.html)的折线图。

```
var data = [
  {x: 0, y: 3},
  {x: 1, y: 4},
  {x: 2, y: 5}
];

var margin = {top: 10, right: 10, bottom: 20, left: 40},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var line = d3.svg.line()
    .x(function(d) { return x(d.x); })
    .y(function(d) { return y(d.y); });
line.interpolate('monotone');

var svg = d3.select("#chart").append("svg")
    .datum(data)
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

svg.append("path")
    .attr("class", "line")
    .attr("d", line); 
```

如何从路径中删除最后一个元素（即删除线段）？删除元素的类似示例包括更改数据数组，并通过退出重新初始化。在“圆圈”的情况下，这看起来像：

```
data.shift();
var circles = svg.selectAll(".dot").data(data);
circles.exit().remove(); 
```

但是，这种方法不适用于路径。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T05:22:21.770

替换`data.shift()`为`data = data.splice(0, data.length - 1)`

[array.splice(索引, howMany[, element1[, ...[, elementN]]])](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T22:06:31.230

您可以在将最后一个数据元素传递给 d3 之前删除它。如果您将调用移到`.data()`附加路径的位置，您的代码会更清晰，因为它仅在此处使用，即类似

```
data.shift();
svg.selectAll("path").data(data).enter()
  .append("path")
  .attr("class", "line")
  .attr("d", line); 
```

# regex - sed 命令在文件的偶数行中查找和替换

> ID：10856447
> 
> 赞同：3
> 
> 时间：2012-06-01T19:45:41.207
> 
> 标签：regex, shell, unix, sed

嗨，我是这个论坛的新手。我想使用 SED 替换文件偶数行上的表达式。我的问题是我想不出如何保存原始文件中的更改（即如何覆盖文件中的更改）。我试过了：

```
sed -n 'n;p;' filename | sed 's/aaa/bbb/' 
```

但这不会保存更改。感谢您在这方面的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T19:54:13.773

尝试 ：

```
sed -i '2~2 s/aaa/bbb/' filename 
```

-i 选项告诉`sed`您在原地工作，因此不要将编辑后的版本写入粗壮并保留原始文件，而是将更改应用于文件。该`2~2`部分是 sed 应应用命令的行的地址。`2~2`意味着只编辑偶数行。 `1~2`只会编辑奇数行。`5~6`将每五行编辑一次，从第 5 行开始等...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T20:33:11.727

@Mithrandir's answer is an excellent, correct and complete one.

I will just add that the `m~n` addressing method is [a GNU sed extension](http://www.gnu.org/software/sed/manual/sed.html#Addresses) that may not work everywhere. For example, not all Macs have GNU sed, as well as *BSD systems may not have it either.

So, if you have a file like the following one:

```
$ cat f
1   ab
2   ad
3   ab
4   ac
5   aa
6   da
7   aa
8   ad
9   aa 
```

...here is a more universal solution:

```
$ sed '2,${s/a/#A#/g;n}' f
1   ab
2   #A#d
3   ab
4   #A#c
5   aa
6   d#A#
7   aa
8   #A#d
9   aa 
```

What does it do? The address of the command is `2,$`, which means it will be applied to all lines between the second one (`2`) and the last one (`$`). The command in fact are two commands, treated as one because they are grouped by brackets (`{` and `}`). The first command is the replacement `s/a/#A#/g`. The second one is the `n` command, which gets, in the current iteration, the next line, appends it to the current [pattern space](https://stackoverflow.com/questions/5886564/what-actually-the-meaning-of-n-in-sed/5886784#5886784). So the current iteration will print the current line plus the next line, and the next iteration will process the next next line. Since I started it at the 2nd line, I am doing this process at each even line.

Of course, since you want to update the original file, you should call it with the `-i` flag. I would note that some of those non-GNU seds *require* you to give a parameter to the `-i` flag, which will an extension to be append to a file name. This file name is the name of a generated backup file with the old content. (So, if you call, for example, `sed -i.bkp s/a/b/ myfile.txt` the file `myfile.txt` will be altered, but another file, called `myfile.txt.bkp`, will be created with the *old* content of `myfile.txt`.) Since a) it is required in some places and b) it is accepted in GNU sed and c) it is a good practice nonetheless (if something go wrong, you can reuse the backup), I recommend to use it:

```
$ ls
f
$ sed -i.bkp '2,${s/a/#A#/g;n}' f
$ ls
f  f.bkp 
```

Anyway, my answer is just a complement for some specific scenarios. I would use @Mithrandir's solution, even because I am a Linux user :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T21:09:24.543

这可能对您有用：

```
sed -i 'n;s/aaa/bbb/' file 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-01T19:47:22.200

用于`sed -i`就地编辑文件。

# node.js - NodeJS 在渲染之前加载网站并从页面中删除元素

> ID：10856451
> 
> 赞同：1
> 
> 时间：2012-06-01T19:46:09.943
> 
> 标签：node.js, screenshot, phantomjs, casperjs

我最近搞砸了 NodeJs，它可以加载任何网站并保存屏幕截图。更具体地说，我使用 PhantomJS 加载网站并保存屏幕截图。我也使用过 CasperJS 和 ZombieJS，但是这些工具都不能真正让你在加载之前弄乱网站的资源。甚至可能吗？

需要明确的是，我想加载任何网站，比如说 stackoverflow.com 并计算加载时间并保存屏幕截图。这很容易，但是在第二次运行时，我想加载同一个网站并删除 jquery 资源，然后计算它的加载时间。

看起来 phantomjs 和 casperjs 有 onResourceRequested 或 onResourceReceived 之类的回调，但没有中止请求的方法。是否可以？我不想通过一些执行此操作的 php 脚本来代理请求，但这是替代方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:54:10.470

因此，看起来这是不可能的，但它是 phantomjs 路线图上的一个功能：[http ://code.google.com/p/phantomjs/issues/detail?id=230](http://code.google.com/p/phantomjs/issues/detail?id=230)

# jquery - 在 html 加载默认浏览器滚动条之前加载 nicescroll

> ID：10856455
> 
> 赞同：2
> 
> 时间：2012-06-01T19:46:33.543
> 
> 标签：jquery, scrollbar, nicescroll

我正在使用一个非常有用的滚动条插件，称为[nicescroll](https://github.com/inuyaksa/jquery.nicescroll)。

这个插件需要一些时间来加载，因为我已经在我的项目中使用了很多 jquery。

是否有可能在脚本加载之前隐藏浏览器的默认滚动条，然后脚本会完成它的工作并且会出现新的滚动条？

我正在使用此代码来初始化插件：

```
$(document).ready(function() {
    var nice = $('html').niceScroll({
        cursorborder: "",
        cursorcolor: "#333333",
        cursorwidth: "12px"
    });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T19:51:51.760

你可以这样做：

```
// Hide Overflow of Body on DOM Ready //
$(document).ready(function(){
    $("body").css("overflow", "hidden");
});

// Show Overflow of Body when Everything has Loaded //
$(window).load(function(){
    $("body").css("overflow", "auto");        
    var nice=$('html').niceScroll({cursorborder:"",cursorcolor:"#333333",cursorwidth:"12px"});
}); 
```

**[在这里演示](http://jsfiddle.net/yjyUu/)**

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:48:49.543

也许直接在 CSS 上添加是一个更好的选择。

```
body {
    overflow: hidden;
} 
```

然后在 jQuery 中：

```
$( function() {
    // activate niceScroll
}); 
```

# ruby-on-rails - `build_extensions'：错误：无法构建 gem 原生扩展。(Gem::Installer::ExtensionBuildError)

> ID：10856460
> 
> 赞同：4
> 
> 时间：2012-06-01T19:46:48.393
> 
> 标签：ruby-on-rails, ruby, osx-lion

在 OS X Lion 上尝试启动 rails 服务器时出现错误

```
Could not find json-1.5.4 in any of the sources
Run `bundle install` to install missing gems. 
```

如果我再跑

```
bundle install json 
```

我收到以下错误

```
Installing json (1.5.4) with native extensions /Library/Ruby/Site/1.8/rubygems/installer.rb:556:in `build_extensions': ERROR: Failed to build gem native extension. (Gem::Installer::ExtensionBuildError)

        /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb 
mkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/ruby.h

Gem files will remain installed in /Applications/RubyApps/skatemyspot/json/ruby/1.8/gems/json-1.5.4 for inspection.
Results logged to /Applications/RubyApps/skatemyspot/json/ruby/1.8/gems/json-1.5.4/ext/json/ext/parser/gem_make.out
    from /Library/Ruby/Site/1.8/rubygems/installer.rb:509:in `each'
    from /Library/Ruby/Site/1.8/rubygems/installer.rb:509:in `build_extensions'
    from /Library/Ruby/Site/1.8/rubygems/installer.rb:180:in `install'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/source.rb:101:in `install'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/rubygems_integration.rb:78:in `preserve_paths'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/source.rb:91:in `install'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/installer.rb:58:in `run'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/rubygems_integration.rb:93:in `with_build_args'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/installer.rb:57:in `run'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/installer.rb:49:in `run'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/installer.rb:8:in `install'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/cli.rb:220:in `install'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/vendor/thor/task.rb:22:in `send'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/vendor/thor/task.rb:22:in `run'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/vendor/thor/invocation.rb:118:in `invoke_task'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/vendor/thor.rb:263:in `dispatch'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/lib/bundler/vendor/thor/base.rb:386:in `start'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.0.18/bin/bundle:13
    from /usr/bin/bundle:19:in `load'
    from /usr/bin/bundle:19 
```

我在[nokogiri 看到了答案 - 错误：无法构建 gem 原生扩展](https://stackoverflow.com/questions/6753000/nokogiri-error-failed-to-build-gem-native-extension)，但我正在运行 Xcode 4.3.2。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T13:22:25.377

对于 OS 10.7 + XCode4.3 仅打开 Xcode 首选项，选择“下载”按钮，选择“下载”的“组件”选项卡，突出显示“命令行工具”并按下安装按钮。

# python - 浏览所有 Bonjour 服务

> ID：10856461
> 
> 赞同：2
> 
> 时间：2012-06-01T19:46:52.640
> 
> 标签：python, bonjour

我想编写一个 python 程序来浏览本地网络中所有现有的 Bonjour 服务。我问是否有办法做到这一点，因为服务总是来来去去？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:50:44.980

您可能应该首先查看现有的库，例如[pybonjour](http://code.google.com/p/pybonjour/)。

原则上，这当然是可能的，但您需要做好服务可能会消失的准备，并且您还需要刷新可用服务器的想法，以防止它过时并且不显示新添加的服务器。

pybonjour 的首页上有示例代码，显示了如何浏览服务。

# iphone - Centra DB 到 iPhone 应用程序 / Objective-C

> ID：10856467
> 
> 赞同：0
> 
> 时间：2012-06-01T19:47:14.483
> 
> 标签：iphone, objective-c, database

我正在尝试查找一些有关如何将 IPHONE 应用程序连接到中央数据库服务器（如 SQL 服务器）的阅读材料。

我知道 SQLite，以及在设备本身中存储数据的其他方法。我真正感兴趣的是应用程序与中央数据库服务器交互。.net 中是否有任何类型的对象，例如 SQLClient，或者我是否需要通过发送 HTTP 请求和反序列化 json/xml？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:59:42.637

我不知道您的问题的答案，但即使您发现不建议这样做，因为使用 httprequest 解决方案总是更好，

封装数据库实现总是要走的路，因为数据库实现可能会很快改变，建议在其上添加一个层

不用说，您将无法通过直接访问数据库来进行缓存，这也是一个缺点

很抱歉，这不是您正在寻找的答案，但您应该重新考虑如何实施您的解决方案，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:13:40.940

您必须创建一个 REST 接口将 2 连接在一起，并且正如您所说，根据格式反序列化响应，如果它是 json 或 xml。

从设备端，向您的脚本发出 GET/POST 请求，该脚本将查询结果响应回应用程序并相应地处理它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:01:35.673

对 php 脚本或类似脚本执行 httprequest 并解析 JSON 或 XML。

# mysql - 在查询中重用计算

> ID：10856469
> 
> 赞同：3
> 
> 时间：2012-06-01T19:47:16.073
> 
> 标签：mysql, sql

我想在我的数据库中创建一个包含少量逻辑的视图。这是为了检查产品的可用性。我创建了一个简化的模式作为[SQL Fiddle](http://sqlfiddle.com/#!2/41c91/20)。

但是，我需要在多个列中重复使用一个值。这是我想做的事情：

```
SELECT
    product.id AS id,
    SUM(IFNULL(purchase_product.amount,0)) AS amountSold,
    IFNULL(product.amountAvailable-amountSold,~0) AS amountAvailable,
    amountAvailable>0 AS isAvailable,
FROM product
    LEFT JOIN purchase_product ON purchase_product.product_id = product.id
    LEFT JOIN purchase ON purchase.id = purchase_product.purchase_id AND purchase.completed = TRUE
GROUP BY product.id 
```

但这失败了，因为我不能重复使用“amountSold”和“amountAvailable”。这让我可以选择是重复计算还是使用子查询（/加入 SELECT 的/使用更多视图）。

这是我能想到的最合理的妥协是在小提琴中。**有没有更优雅的解决方案？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:31:42.537

我非常喜欢您当前的解决方案，我认为它没有真正的问题，但是我认为这可能会稍微简单一些：

```
SELECT  Product.ID, 
        COALESCE(AmountSold, 0) AS AmountSold,
        GREATEST(COALESCE(AmountAvailable, ~0) - COALESCE(AmountSold, 0), 0) AS AmountAvailable,
        COALESCE(AmountAvailable, ~0) - COALESCE(AmountSold, 0) > 0 AS IsAvailable
FROM    Product
        LEFT JOIN 
        (   SELECT  Product_ID, SUM(Amount) AS AmountSold
            FROM    Purchase_Product
                    INNER JOIN Purchase
                        ON Purchase.ID = Purchase_ID
            WHERE   Completed = 1
            GROUP BY Product_ID
        ) sold
            ON Sold.Product_ID = Product.ID; 
```

唯一真正的变化是我在子查询中删除了对产品的引用以减少表扫描的次数，并且还稍微改变了计算的逻辑。

最后我`GREATEST`在那里添加，只是为了解决可能存在的任何数据完整性问题，以便您永远不会有负面产品可用。

你可以做更多的子查询来增加查询的可读性，但它几乎肯定不会提高性能。

[SQL Fiddle](http://sqlfiddle.com/#!2/a191b/1)显示了稍微改进的执行计划。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T19:55:36.817

您可以在带有连接的子查询中执行此操作：

```
select product.id, s.amountsold,
       IFNULL(product.amountAvailable-s.amountSold,~0) AS amountAvailable, 
       product.amountAvailable>0 AS isAvailable
       -- although you probably mean
       -- IFNULL(product.amountAvailable-s.amountSold,~0) > 0 as isAvailable
from product join
     (SELECT product.id AS id, 
             SUM(IFNULL(purchase_product.amount,0)) AS amountSold,
             IFNULL(product.amountAvailable-amountSold,~0) AS amountAvailable, 
             amountAvailable>0 AS isAvailable
      FROM product LEFT JOIN
            purchase_product
            ON purchase_product.product_id = product.id LEFT JOIN
            purchase
            ON purchase.id = purchase_product.purchase_id AND
               purchase.completed = TRUE
      GROUP BY product.id
    ) t
    on product.id = t.id 
```

在其他数据库中，您可以使用 windows 函数执行类似的操作。但是，mysql 不支持它们。

另外，我认为您希望 isAvailable 在您减去已售出的商品后出现，因此我将其添加为建议。

# hadoop - 关于在 hadoop 中执行 map-reduce 的查询

> ID：10856470
> 
> 赞同：0
> 
> 时间：2012-06-01T19:47:18.947
> 
> 标签：hadoop

假设数据不存在于其节点中并且存在于其他机器中，

*   任务跟踪器如何知道哪个节点包含数据？

*   它是否直接与该数据节点通信？或者它会联系自己的数据节点，并负责复制该数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:22:44.333

> 任务跟踪器如何知道哪个节点包含数据？

TaskTracker 不知道它。JobTracker 联系 Namenode，获取数据的位置，并尽力将数据从一个节点分配给同一节点上的 TaskTracker（或尽可能接近）。

> 它是否直接与该数据节点通信？或者它会联系自己的数据节点，并负责复制该数据？

它直接与 Datanode 对话。

# java - javax.crypto.BadPaddingException：数据必须从零开始

> ID：10856476
> 
> 赞同：1
> 
> 时间：2012-06-01T19:47:36.013
> 
> 标签：java, security, rsa, encryption

首先，这不是一个重复的问题。我面临一个非常奇怪的问题。

以下是我所做的。

**情况1：**

1.  生成密钥对
2.  使用私钥加密
3.  使用公钥解密

一切正常。

**案例二：**

1.  从 Mozilla Firefox 密钥库加载证书
2.  使用证书 A
3.  使用证书 A 的私钥加密
4.  使用证书 A 的 Public Keu 解密

一切正常。

**案例3：**

1.  从 Internet Explorer 密钥库加载证书
2.  使用证书 A
3.  使用证书 A 的私钥加密
4.  使用证书 A 的 Public Keu 解密

在解密时，我收到 BadPadding 异常错误

以下是我的每个代码的片段。

**生成密钥对**

```
 KeyPair keyPair = KeyPairGenerator.getInstance("RSA").generateKeyPair(); 
    PublicKey publicKey = keyPair.getPublic();
    PrivateKey privateKey = keyPair.getPrivate(); 
```

**加载 Mozilla 密钥库**

```
 String strCfg = System.getProperty("user.home")+ File.separator + "jdk6-nss-mozilla.cfg";
    Provider p1 = new sun.security.pkcs11.SunPKCS11(strCfg);
    Security.addProvider(p1);
    keyStore = KeyStore.getInstance("PKCS11");
    keyStore.load(null, "password".toCharArray()); 
```

**配置文件内容**

```
name=NSS
slot=2
library=C:/Program Files/Mozilla Firefox/softokn3.dll
nssArgs="configDir='C:/Documents and Settings/pratik.vohera.DIGI-CORP/Application Data/Mozilla/Firefox/Profiles/t48xsipj.default' certPrefix='' keyPrefix=''     secmod='secmod.db' flags=readOnly" 
```

**加载 IE 密钥库**

```
 keyStore = KeyStore.getInstance("Windows-MY");
    keyStore.load(null, null); 
```

**从 KeyStore 获取公钥和私钥**

```
 if (keyStore != null) {
    Enumeration<String> enumaration = null;
    try {
        enumaration = keyStore.aliases();
    } catch (KeyStoreException e1) {
        e1.printStackTrace();
    }
    ArrayList<String> certiList;
    while (enumaration.hasMoreElements()) {
        String aliases = enumaration.nextElement();
        certiList = new ArrayList<String>();
        certiList.add(aliases);
        try {
            selectedCert = keyStore.getCertificate(aliases);
            selectedpublickey = (RSAPublicKey) selectedCert.getPublicKey();
            selectedAlias = aliases;
            selectedprivateKey = (PrivateKey) keyStore.getKey(selectedAlias, null);}
        } catch (KeyStoreException e) {
            e.printStackTrace();
        }
    } 
```

**加密**

```
private static String publicEncrypt(String text, Key pubKey) throws Exception {
    BASE64Encoder bASE64Encoder = new BASE64Encoder();
    byte[] plainText = text.getBytes();
    Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
    cipher.init(Cipher.ENCRYPT_MODE, pubKey);
String encryptedText = bASE64Encoder.encode(cipher.doFinal(plainText));
return encryptedText;
} 
```

**解密**

```
private static String privateDecrypt(String text, Key priKey)throws Exception     {
    BASE64Decoder base64Decoder = new BASE64Decoder();
byte[] encryptText = base64Decoder.decodeBuffer(text);
Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
cipher.init(Cipher.DECRYPT_MODE, priKey);
String decryptedString = new String(cipher.doFinal(encryptText));
return decryptedString;
} 
```

**异常堆栈跟踪**

```
javax.crypto.BadPaddingException: Data must start with zero
at sun.security.rsa.RSAPadding.unpadV15(Unknown Source)
at sun.security.rsa.RSAPadding.unpad(Unknown Source)
at com.sun.crypto.provider.RSACipher.a(DashoA13*..)
at com.sun.crypto.provider.RSACipher.engineDoFinal(DashoA13*..)
at javax.crypto.Cipher.doFinal(DashoA13*..)
at test.testclass.privateDecrypt(testclass.java:198)
at test.testclass.test(testclass.java:137)
at test.testclass.main(testclass.java:120) 
```

我已经为此工作了很长时间。这个非常重要。如果需要任何进一步的信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T06:37:16.733

在第三种情况下，问题是：您尝试使用私钥加密并使用错误的公钥解密。您应该始终使用私钥解密。

# java - 验证失败后重置 selectOneMenu 表单值

> ID：10856479
> 
> 赞同：1
> 
> 时间：2012-06-01T19:47:47.550
> 
> 标签：java, validation, jsf, primefaces

我们正在尝试使用 selectOneMenu 作为业务实体的“状态”控件。下拉列表有一个状态列表。当用户选择一个状态时，我们运行一组复杂的业务规则来确定所选状态是否可以设置在业务实体上。如果不是，我们会写出为什么不的消息，并禁止设置状态。这一切都在 JSF 生命周期中运行良好，除了我想在验证失败之前将下拉列表重置为以前的状态（也就是当前状态）。因此，如果我从状态 A 切换到状态 B，但失败了，我想将表单控件重置为状态 B。

# 小面代码

```
<p:selectOneMenu id="statusMenu"
    binding="#{mybean.statusMenu}"
    converter="myConverter"
    value="#{mybean.statusValue}">

    <f:event type="preValidate" listener="#{mybean.validateStatus}"/>
    <p:ajax update="statusMenu :someForm :someOtherForm" />

    <f:selectItems value="#{mybean.statusList}"
        var="status"
        itemLabel="#{status.statusText}"
        itemValue="#{status}">
    </f:selectItems>
</p:selectOneMenu> 
```

# 支持 bean 验证菜单

```
public void validateStatus (ComponentSystemEvent e)
{
    String submittedStatus = ((MyStatus)getStatusMenu().getValue()).getStatusText();

    if(submittedStatus.equals("someStatus"))
    {       
        //do validation
        boolean valid = doBusinessStatusValidationLogicStuff()

        if(!valid)
        {
            //a combination of junk that attempts to reset the form value, or do *something* to it
            getStatusMenu().resetValue();
            getStatusMenu().setSubmittedValue(null);
            getStatusMenu().setValue(null);
            getStatusMenu().setLocalValueSet(false);

            FacesMessage errorMessage = new FacesMessage(severity, summary, detail);
            context.addMessage(null, "you fail");
            context.isValidationFailed();
            context.renderResponse();
        }
    }
} 
```

我可以在调试器中看到绑定组件的值设置为我想要的值，但是它根本不会更新表单控件。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:20:51.153

最终成为一个等于/哈希码问题。所以一定要检查那里！

# asp.net - 如何阻止企业库配置工具在环境配置文件字段中插入绝对路径？

> ID：10856480
> 
> 赞同：0
> 
> 时间：2012-06-01T19:47:50.053
> 
> 标签：asp.net, configuration, web-config, enterprise-library-5

我正在尝试学习/使用 Enterprise Library 5.0 配置工具，它似乎可以完美地工作，但有一些小例外。我目前遇到的问题是在使用不同的环境时。我们的一个网站有 3 个环境，所以我可以在配置工具中创建 3 个不同的环境，我可以设置 delta 文件以及要覆盖哪些属性以及何时覆盖。

![企业库配置环境的初始设置](../Images/b30c9f6c624e0040a97bd4fd8f218fd9.png)

一切都很好，直到我 **导出合并的环境配置文件**。当我这样做时，它会按预期创建文件，但是它将*环境配置文件*字段更改为现在包含绝对路径。

![在此处输入图像描述](../Images/0f429c591fc0f95d4459b0b44aae2f02.png)

此外，增量文件现在包含对绝对路径的引用。

![在此处输入图像描述](../Images/5227c1653d9d475de44821c4dbc50b62.png)

我们使用源代码控制 (VSTS) - 所以绝对路径不好。我们的构建过程包括创建分支，然后将代码合并回根。当分支由不同的团队成员创建时，我们不能有绝对路径，他们的代码位于不同的本地文件夹结构中。

有什么办法可以阻止绝对路径自动添加？或者有什么其他建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:33:36.013

我的研究表明似乎没有办法让 GUI 工具不覆盖环境配置文件的值。我要使用的解决方案是使用安装企业库时提供的命令行工具。命令行工具是 MergeConfiguration.exe。

# expressionengine - 表达式引擎 - 如何随机显示最后七个条目之一？

> ID：10856481
> 
> 赞同：0
> 
> 时间：2012-06-01T19:48:02.830
> 
> 标签：expressionengine

我想随机显示来自特定频道的最后七个条目之一。我尝试使用 offset="" 但这恰好与我需要的相反。我还考虑过使用日期选项：仅在某个日期之后显示条目，但这只会持续一段时间，然后才必须对其进行修改。

任何严肃的建议都会被认真考虑。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:41:52.830

使用表达式引擎在本机上确实没有很好的方法来做到这一点。

查看 AB 条目 ID 插件。这是您正在寻找的具体示例：http: [//www.addonbakery.com/docs/ab-entry-ids.html](http://www.addonbakery.com/docs/ab-entry-ids.html)

只需将 orderby="random" 添加到嵌套通道条目标记对并将条目 ID 查询限制为 7。

[http://devot-ee.com/add-ons/ab-entry-ids](http://devot-ee.com/add-ons/ab-entry-ids)

# android - 二维码安卓

> ID：10856486
> 
> 赞同：-2
> 
> 时间：2012-06-01T19:48:10.693
> 
> 标签：android, qr-code, zxing

我正在使用 Zxing qr 代码开发一个 android 应用程序但是我有一个问题要将网络搜索按钮重新编辑到我的数据库中我在这个 ligne 中进行了修改

```
final void openProductSearch(String upc) {

    Uri uri = Uri.parse("http://www.google." + LocaleManager.getProductSearchCountryTLD(activity) +"/m/products?q=" + upc + "&source=zxing");
    launchIntent(new Intent(Intent.ACTION_VIEW, uri));
} 
```

但什么都没有发生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-27T12:12:53.623

```
Uri uri = Uri.parse("http://www.google." + 
        LocaleManager.getProductSearchCountryTLD(activity) +
        "/m/products?q=" + upc + "&source=zxing"); 
```

通过您的 IP 地址更改 localhost

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-01T20:49:20.060

如果您的应用程序中有 zxing 代码，请删除该部分意图并对数据执行任何您需要执行的操作。您不必使用意图部分。

zxing 拥有 apache 许可证，因此您可以自由更改代码，只要您（始终，即使您不接触代码）留下代码的上标头（带有免责声明等）。

# javascript - 与非 Javascript 服务器相比，使用基于 Javascript 的服务器有哪些优势？

> ID：10856487
> 
> 赞同：1
> 
> 时间：2012-06-01T19:48:14.567
> 
> 标签：javascript, ruby-on-rails, wordpress, node.js, express

**免责声明：**这个问题有点开放式。我还希望回复部分基于开发人员的偏好。

我最近一直在对 Express.js（通过 Node.js 耦合）进行一些研究，我正在努力寻找如何将这些技术中的任何一种融入我当前的网站开发工作流程中。最近我一直在使用 Wordpress 或 Ruby on Rails，前者将在 Apache 上运行，后者将在它自己的专有服务器上运行（我假设）。

现在也许我只是不理解某些东西，但是我看不到争取基于 Javascript 的框架/服务器的支持的优势。如果将这部分作为我的工作流程有明显的优势，它们会是什么？我还没有找到任何方法来适应（比如说）Rails 应用程序或 Wordpress 站点。有人可以为我指出在我已经使用的技术之上实施这些技术的更好帮助的方向吗？

最后一个问题，如果有人在他们的浏览器中禁用了 Javascript，会发生什么？基于 Javascript 的服务器将如何反应（如果有的话）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T20:03:23.120

有两个很大的区别：

**事件循环**

Node.js 与通常的 Apache 概念有点不同，因为它处理连接的方式。Node 没有同步连接，而是使用事件循环来进行非阻塞操作。请注意，这不是 Javascript 独有的，还有基于 C 和 Python 的框架也支持类似的事件循环方法，但是在 Javascript 中，这可能是最自然的感觉，因为这就是自引入以来 JS 的工作方式。

据说，这应该使您能够处理更多并发客户端。但是，它没有像常规阻塞解决方案那样在现实世界中暴露那么多，因此这种方法不像大多数当前实现那样成熟。实际的性能差异值得怀疑，因为它取决于应用程序的确切要求。

**代码共享**

这一点与之前的区别相比争议要小得多，但本质上如果您在客户端和服务器上使用相同的语言，您可以重用大量代码，而不必用多种语言重写您的数据结构等，为您节省大量开发时间。但是，你要明白服务器端 JS 的概念和你在浏览器上所知道的不同，比如你没有 jQuery 或 Prototype 的动态 JS，但它的结果和用例更类似于 PHP被广泛用于。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T20:18:56.850

使用 Javascript 作为服务器端语言的主要优点是您可以用一种语言编写整个系统。

这在以下方面具有优势：

*   开发人员的学习曲线和心理上下文切换
*   并且还为在两个环境之间共享代码提供了一些可能性。

但是，由于多种原因，最后一点没有听起来那么有用，这就是缺点所在：

*   由于两个环境实际执行的操作不同，实际上无法共享太多代码。也许是一些验证代码，所以您知道您正在对客户端和服务器进行相同的检查，也许还有一些实用功能，但仅此而已。
*   您使用的库在两者之间也将完全不同：jQuery 仅适用于客户端，而 Node 具有特定于服务器的库。
*   所以作为一个开发者，你还是需要在不同环境之间进行心理上下文切换，因为两个环境是不同的。他们可能共享一种语言，但他们的运作方式不同，他们所做的事情也不同。事实上，在两者之间共享语言实际上会使上下文切换变得更加困难，这可能会导致错误。
*   最后，值得牢记的是，虽然 Node 得到了开发者社区的大量关注，但它仍然是新事物并且发展迅速：如果您是一家考虑将它作为开发平台的企业，它可能还不够稳定立足于重大项目。

# c - C Linux 设备编程 - 直接从 /Dev 读取

> ID：10856490
> 
> 赞同：6
> 
> 时间：2012-06-01T19:48:19.410
> 
> 标签：c, linux, device-driver, linux-device-driver, midi

我一直在尝试使用 C 中的数学波函数创建声音。我项目的下一步是从 MIDI 键盘控制器获取用户输入，以便将波调制到不同的音高。

我的第一个想法是这将相对简单，并且 Linux 作为 Linux 将允许我像读取任何其他文件一样从我的设备读取原始数据流。

然而，绝大多数研究建议我为 MIDI 控制器编写设备驱动程序。一般的想法是，即使设备文件可能存在，当我的应用程序调用 read() 和 write() 等函数时，内核也不知道要执行哪些系统调用。

尽管有这些警告，我还是做了一个实验。我插入了 MIDI 控制器并 cat'ed "/dev/midi1" 设备文件。出现了稳定的空字符流，当我按下 MIDI 控制器上的一个键时，出现了几个字节，这些字节对应于 MIDI 设备应该输出的预期消息块。[MIDI 协议信息](http://www.csie.ntu.edu.tw/~r92092/ref/midi/midi_messages.html)

所以我的问题是：

为什么 cat'ed 流会这样？

这是否意味着我的系统上已经安装了即插即用设备驱动程序？

我应该继续编写设备驱动程序，还是可以像文件一样阅读它？

非常感谢您在这些领域分享您的智慧。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T19:52:27.900

> 为什么 cat'ed 流会这样？

因为这可能是控制器正在接收的原始 MIDI 数据。空字节可能是某种同步滴答声。

> 这是否意味着我的系统上已经安装了即插即用设备驱动程序？

是的。

> 然而，绝大多数研究建议我为 MIDI 控制器编写设备驱动程序。一般的想法是，即使设备文件可能存在，当我的应用程序调用 read() 和 write() 等函数时，内核也不知道要执行哪些系统调用。
> 
> <...>
> 
> 我应该继续编写设备驱动程序，还是可以像文件一样阅读它？

我不确定你在读什么或者你是如何得出这个结论的，但这是错误的。:) 你已经为你的 MIDI 控制器安装了一个非常好的驱动程序——继续使用它！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T21:53:22.320

你确定你正在读取**NUL**字节吗？而不是 0xf8 字节？因为 0xf8 是 MIDI 时间滴答状态，通常会定期发送以保持乐器同步。尝试使用以下方式读取设备`od`：

```
od -vtx1 /dev/midi1 
```

如果你看到一堆 0xf8，没关系。如果您不需要 MIDI 控制器发送的速度信息，请在控制器上禁用它或忽略那些 0xf8 状态字节。

此外，对于 MIDI，请记住当前 MIDI 状态通常发送**一次**（以节省字节），然后根据需要发送有效负载字节。例如，弯音状态是字节 0xeK（其中 K 是通道号，即 0 到 15），其有效载荷是 7 位最低有效字节，后跟 7 位最高有效字节。因此，也许你有一个奇怪的控制器，你只看到某种状态的重复有效载荷，但任何不愚蠢的控制器都不会重复它不需要的东西。

现在是驱动程序：看看`dmesg`你什么时候插入你的 MIDI 控制器。现在，如果您的 OSS在您插入设备时`/dev/midi1` *出现*`dmesg`（udev 正在执行此工作），并且没有出现任何错误，则您不需要其他任何东西。MIDI 协议是另一种串行协议，具有固定的波特率并传输/接收字节。这没有什么复杂的......只需从设备读取或写入设备即可。

唯一的问题是在某个地方排队可能会导致糟糕的音频延迟（如果您使用 MIDI 命令来控制实时音频，我相信这就是您正在做的事情）。似乎这些设备主要是为*系统专有*消息而设计的，例如，在线为合成器下载一些补丁/预设并使用 MIDI 将其上传到设备。在这种情况下，延迟并不重要。

还可以看看[ALSA](http://www.alsa-project.org/alsa-doc/alsa-lib/rawmidi.html)在 Linux 上使用 MIDI 的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T22:02:15.620

如果您不开发新的 MIDI 控制器硬件，则不必担心为它编写驱动程序。用户关心的是安装他们的硬件，而供应商有义务提供驱动程序。

在 Linux 下，您只需读取文件。现在用数据解释和制作有用的东西。

# forms - GRAILS 2.0 上的表单编码问题

> ID：10856493
> 
> 赞同：2
> 
> 时间：2012-06-01T19:49:03.003
> 
> 标签：forms, grails, encoding, utf-8

我有一个 Grails 应用程序，它在任何地方都配置为 UTF-8。在运行调试版本时，标头说`Content-Type:text/html;charset=utf-8`，并且元标记一致。浏览器将页面识别为 UTF-8 并正确显示字符。

发布表单时，浏览器会正确发送以 UTF-8 编码的表单。但是，当通过 读取数据`params.paramname`时，数据看起来是乱码；`maçã`变成`maÃ§Ã£`.

经过进一步检查，该表单似乎正在发送 UTF-8 数据，但 Grails 似乎尝试将其读取为 ISO-8859-1。表格上的设置`accept-charset="ISO-8859-1"`确认了这个问题，因为它解决了这个问题。

我在 applicationContext.xml 上也有这个：

 `````
<bean id="characterEncodingFilter" class="org.springframework.web.filter.CharacterEncodingFilter">
    <property name="encoding">
        <value>utf-8</value>
    </property>
    <property name="forceEncoding">
        <value>true</value>
    </property>
</bean> 
````  `除了添加`accept-charset="ISO-8859-1"`到应用程序中的所有表单之外，还有其他解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:38:28.600

[我认为您遇到了与Tomcat 中的 Grails 请求参数编码问题](https://stackoverflow.com/questions/9179574/grails-request-parameters-encoding-issue-in-tomcat)相同的问题- Burt 的回答或对其的评论应该有所帮助。``

# c# - 使用什么样的数据结构？

> ID：10856497
> 
> 赞同：2
> 
> 时间：2012-06-01T19:49:20.527
> 
> 标签：c#, oop, data-structures

我正在做一个需要跟踪的项目：

*   5-6 仅字符串名称的根项
*   每个根项都需要有多个不同标识符类型（int、string、float 等）的子项。一个根的所有孩子都将是相同的类型，但每个根将有不同的孩子类型
*   用户需要能够从每个根目录添加/删除子节点
*   我稍后需要单独访问每个孩子，并在需要时执行字符串操作和解析

我考虑过可能使用字典，其中键是字符串，值是对象列表。或者为每个根项设置一个唯一的类，并且每个类都包含一个子项列表。

有人有什么好的建议吗？我对 OOP 还是很陌生，请多多包涵:)

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T19:56:40.670

```
public interface IRoot {}

public class RootItem<T> : IRoot
{
    public string Name { get; set; }
    public List<T> Children {get; set; }
} 
```

然后保持一个`Dictionary<string, IRoot>`来容纳它们。

```
Dictionary<string, IRoot> hair = new Dictionary<string, IRoot>();
hair.Add(
  new RootItem<int>()
      {
        Name = "None",
        Children = new List<int>() {1, 2, 3, 4}
      }
);

hair.Add(
  new RootItem<decimal>()
      {
        Name = "None",
        Children = new List<decimal>() {1m, 2m, 3m, 4m}
      }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T19:56:34.510

`List<T>`一个包含孩子的泛型类怎么样：

```
public class Root<T>
{
    private List<T> children = null;

    public Root(string name)
    {
        Name = name;
    }

    public string Name { get; set; }

    public List<T> Children
    {
        get
        {
            if (children == null)
            {
                children = new List<T>();
            }

            return children;
        }
    }
}

Root<int> intRoot = new Root<int>("IntRoot");
intRoot.Children.Add(23);
intRoot.Children.Add(42);

Root<string> stringRoot = new Root<string>("StringRoot");
stringRoot.Children.Add("String1");
stringRoot.Children.Add("String2");
stringRoot.Children.Add("String3");
stringRoot.Children.Add("String4"); 
```

如果您想将所有根保存在一个对象中，您可以编写自己的类或使用`Tuple`：

```
var rootGroup = Tuple.Create(intRoot, stringRoot);
// intRoot is accessible as rootGroup.Item1
// stringRoot is accessible as rootGroup.Item2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T19:52:37.580

听起来`Dictionary<string, Tuple<type1, type 2, etc>>`是个不错的候选人。

键将是字符串（根）。根的孩子是一个元组。我们可以向元组添加项目。感谢您指出了这一点。

[Tuple 的良好起点](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T20:23:03.657

这是解决问题的一种方法。有很多铸造需要进行，但它可以完成工作：

```
 static void Main(string[] args)
    {
        Dictionary<string, IRootCollection> values = new Dictionary<string, IRootCollection>();

        values["strings"] = new RootCollection<string>();
        (values["strings"] as RootCollection<string>).Add("foo");
        (values["strings"] as RootCollection<string>).Add("bar");

        values["ints"] = new RootCollection<int>();
        (values["ints"] as RootCollection<int>).Add(45);
        (values["ints"] as RootCollection<int>).Add(86);
    }

    interface IRootCollection { }
    class RootCollection<T> : List<T>, IRootCollection { } 
```

# javascript - jQuery mobile 1.1.0 滑块：JS 对象属性访问？

> ID：10856498
> 
> 赞同：1
> 
> 时间：2012-06-01T19:49:21.313
> 
> 标签：javascript, jquery, jquery-mobile, slider

**编辑：**这可以看作是一个纯 javascript 对象问题。代码可以在这里找到： [jquery.mobile-1.1.0.js](http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.js)

我需要访问 jQuery 移动 JS 对象的属性，但不确定这怎么可能。在 jquery.mobile-1.1.0.js 和 mobile.slider 中如下（参见第 5967 行的扩展）：

```
$.widget( "mobile.slider", $.mobile.widget, {
  ...
  _create: function() {
    ...
    $.extend( this, {
      slider: slider,
      handle: handle,
      valuebg: valuebg,
      dragging: false,
      beforeStart: null,
      userModified: false,
      mouseMoved: false
    }); 
```

我想阅读的主要属性是“拖动”。

我知道我可以使用以下方法执行这些方法：

```
$("#slider").slider("refresh") 
```

是否有类似的方式来访问属性？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T16:29:55.827

**如何对用户拖动滑块做出反应，无需绑定鼠标/点击事件，而是使用已经存在的 JQM 功能。**

为了访问 JQM 滑块对象的“拖动”变量，我对该对象进行了扩展，如下所示：

```
$(document).bind("mobileinit", function(){
  $.mobile.slider.prototype.getDragging = function(){
    return this.dragging;
  };
}); 
```

有了这些，我可以选择对仅由用户完成的更改做出反应：

```
$("#slider").live('change',function(){
  if($("#slider").slider("getDragging"))){
    console.log('User is dragging slider to new value'); 
  }
  else {
    console.log('Program changed value. (or user typed in visible textbox)') ;
  }
}); 
```

隐藏滑块文本框后，这给了我以下好处：

1.  当我的程序更改滑块值时，使用“更改”事件对用户拖动做出反应，而不会被触发。
2.  当我的程序要更改滑块值时，它可以首先检查用户当前没有拖动滑块。

# python - 根据用户输入进行循环，然后将结果保存为 Python 中的 MUD

> ID：10856499
> 
> 赞同：1
> 
> 时间：2012-06-01T19:49:36.837
> 
> 标签：python, loops, input, mud

我正在尝试做两件事：

1.  在 python 中创建一个循环，为用户提供 4 个可能选项的提示；输入“1”、“2”、“3”或其他任何内容。如果用户选择 1、2 或 3，则会显示文本。如果用户输入任何其他内容，他们会看到文本，并再次提示。如此重复，直到他们输入 1、2 或 3。

2.  然后我想从用户那里获取输入以在该循环之外使用并继续游戏。

到目前为止我的解决方案：在我发布我的代码之前，我将描述它，我基本上已经将我想要的所有代码放在一个没有参数的函数中的循环中。然后我在 else 语句中调用该函数。

代码在做什么：代码按照我想要的方式循环，但我不知道如何根据用户输入的内容“跳出”循环以继续。我知道它必须是一个回报，但我想我不知道把它放在哪里。

我尝试过的：发布调用我输入的函数：

```
if blackdoor(decision) == "1": 
```

并从那里继续，但这不起作用。

编码：

```
def blackdoor():
    print """After having recently died you awake to find yourself standing in an all white room with a black door that seems to go into the sky forever. What do you do?\n1.Touch the door.\n2.Shout at the door.\n3.Stare at the door."""
    decision = raw_input("> ")
    if decision == "1":
        print "You touch the door. It is as cold as ice. You can feel a vibration pulsing from the door through your body.\n"
    elif decision == "2":
        print "You shout 'Hello?! Is anybody there?!' at the door. But nothing responds. Your voice echoes off in the distance.\n"
    elif decision == "3":
        print "You stare at the door intensely. You envision it opening when all of a sudden you get the feeling of something staring back at you.\n"
    else:
        print "You don't follow instructions very well, do you?\n"
        blackdoor()
    return decision

blackdoor() 
```

我如何才能将输入用于决策以将其用作保持游戏继续进行的条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:03:30.520

根据我对您的问题的理解，您的代码看起来不错，但是，如果您没有将递归限制设置为很大，它可能会由于多次递归而耗尽堆栈。

我会寻求一个迭代解决方案，如下所示：

```
def blackdoor():
    end_condition = False
    while not end_condition:
        end_condition = True
        print """After having recently died you awake to find yourself standing in an all white room with a black door that seems to go into the sky forever. What do you do?\n1.Touch the door.\n2.Shout at the door.\n3.Stare at the door."""
        decision = raw_input("> ")
        if decision == "1":
            print "You touch the door. It is as cold as ice. You can feel a vibration pulsing from the door through your body.\n"
        elif decision == "2":
            print "You shout 'Hello?! Is anybody there?!' at the door. But nothing responds. Your voice echoes off in the distance.\n"
        elif decision == "3":
            print "You stare at the door intensely. You envision it opening when all of a sudden you get the feeling of something staring back at you.\n"
        else:
            print "You don't follow instructions very well, do you?\n"
            end_condition = False
    return decision

decision = blackdoor() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T19:52:34.023

您正在递归调用`blackdoor()`，但您没有返回调用的结果。您需要`return blackdoor()`将结果返回给调用者。

一个简单的改变就可以了；

```
def blackdoor():
print """After having recently died you awake to find yourself standing in an all white room with a black door that seems to go into the sky forever. What do you do?\n1.Touch the door.\n2.Shout at the door.\n3.Stare at the door."""
decision = raw_input("> ")
if decision == "1":
    print "You touch the door. It is as cold as ice. You can feel a vibration pulsing from the door through your body.\n"
elif decision == "2":
    print "You shout 'Hello?! Is anybody there?!' at the door. But nothing responds. Your voice echoes off in the distance.\n"
elif decision == "3":
    print "You stare at the door intensely. You envision it opening when all of a sudden you get the feeling of something staring back at you.\n"
else:
    print "You don't follow instructions very well, do you?\n"
    return blackdoor()
return decision 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:28:36.030

我假设你在整个游戏中都有很多这样的决策点，你会在试图将它们嵌入函数时迷失方向。如果是这种情况，那么您应该探索使用简单的[有限状态机](http://en.wikipedia.org/wiki/Finite-state_machine)(FSM)。

[PythonWiki](http://wiki.python.org/moin/FiniteStateMachine)上有一个 FSM 实现列表。

如果你只有一两个动作，使用 FSM 似乎有点过头了，但你会发现，即使是一个简单的冒险游戏，如果没有一个动作的帮助，编写一个简单的冒险游戏也是不必要的困难。

**更新我在**[Python 和 FSM](https://stackoverflow.com/q/2916181/1290420)上找到了一个有用的答案，以供将来参考。

# javascript - 加载异步时Javascript不起作用

> ID：10856500
> 
> 赞同：2
> 
> 时间：2012-06-01T19:50:00.393
> 
> 标签：javascript, jquery, asynchronous

我的页面上有以下代码：

```
<script src="https://chatserver.comm100.com/js/LiveChat.js?siteId=&amp;planId=2594&amp;partnerId=-1" type="text/javascript"></script> 
```

这个脚本需要永远加载，所以我想异步加载它，所以它在下载/渲染页面的其余部分时做它自己的事情。所以我输入了这段代码：

```
(function() {
    var s = document.createElement('script');
    s.type = "text/javascript";
    s.src = 'https://chatserver.comm100.com/js/LiveChat.js?siteId=&amp;planId=2594&amp;partnerId=-1';
    var x = document.getElementsByTagName('script')[0];
    x.parentNode.insertBefore(s,x);
  })(); 
```

但是当我使用后者时，代码不会运行。调试起来有点困难，因为文件被缩小了。

关于异步加载，我有什么遗漏吗？我还需要采取什么其他步骤吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:57:32.853

async 是 script 标签的新 HTML5 属性。您需要[检查浏览器支持](http://www.w3schools.com/html5/att_script_async.asp)。支持时，您根本不必拥有自定义脚本；写吧：

```
<script ... async="async"></script> 
```

# json - Mac Office 2011 和 vba 中的 json 解析？

> ID：10856505
> 
> 赞同：2
> 
> 时间：2012-06-01T19:50:19.910
> 
> 标签：json, macos, vba, ms-office

我可以为 VBA 找到的所有 json 库都需要字典对象，它是 microsoft 脚本运行时的一部分，在 mac 上不可用。是否有适用于 Mac Office 2011 VBA 的 json 解析器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-11T17:27:10.043

[http://code.google.com/p/vba-json](http://code.google.com/p/vba-json)在纯 VBA 中有一个 json 解析器，它似乎工作得很好，虽然我似乎记得必须做一些小的修改才能让它在我的所有 JSON 上工作正在向它扔东西。我还实现了一个 vba 编码的 Dictionary 对象，以消除对 Scripting 字典的依赖。您可以在[http://www.sysmod.com/Dictionary.cls](http://www.sysmod.com/Dictionary.cls)找到我使用的那个。使用这两者，我能够让它在 OSX Office 2011 上运行，例如：

```
dim js
json_string = ...
Set jsp = New json
Set js = jsp.parse(sjson) 'sets js e.g. to a Dictionary or Collection object if json_string is "{...}" or "[...]" 
```

让我知道您是否需要更多详细信息才能使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:00:00.533

我很久以前就这样做了，我没有在项目中引用 MS Scripting Runtime。我使用 microsoft JScript 并从中抓取对象来解析数据。我从 2008 年挖出了一个线程，其中一些人在谈论同一件事：

[雅虎消息线程](http://tech.groups.yahoo.com/group/json/message/972)

它至少给了你一个起点。从那以后我丢失了我自己做的代码。如果您稍后仍然卡住，请给我打个招呼，也许我可以提供更多帮助

# php - 在 Symfony 2 中使用查询生成器

> ID：10856508
> 
> 赞同：0
> 
> 时间：2012-06-01T19:50:38.093
> 
> 标签：php, symfony, doctrine-orm

我正在尝试使用 Symfony2 中的查询生成器从数据库中获取一些记录。我在 SQL 中运行正常查询，它返回正确的结果。查询是

```
SELECT pg.name, pg.description
FROM pm_patentgroups pg
LEFT JOIN pm_portfolios pp ON pp.id = pg.portfolio_id 
```

我想在 Symfony2 中使用 Doctorine 查询生成器使用精确查询。到目前为止我尝试过的是

```
 $repository = $this->getDoctrine()
        ->getRepository('MunichInnovationGroupBundle:PmPatentgroups');
        $query = $repository->createQueryBuilder('pg')
        ->from('pm_patentgroups', 'pg')
        ->leftJoin('pg','pm_portfolios','pp','pp.id = pg.portfolio_id')
        ->getQuery();
        $portfolio_groups = $query->getResult(); 
```

但它给了我以下错误：

> 警告：Doctrine\ORM\EntityRepository::createQueryBuilder() 缺少参数 1

我是 Symfony2 和 Doctorine 的新手。你能告诉我这里出了什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T20:20:15.013

使用 createQueryBuilder 时缺少别名。由于您拥有存储库，因此您可以删除 from 部分并使用

```
$query = $repository->createQueryBuilder('pg') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T20:01:57.473

就像是：

```
$qb = $this->getDoctrine()->createQueryBuilder();

$qb->addSelect('pm_patentgroups');
$qb->addSelect('pm_portfolios');

$qb->from('MunichInnovationGroupBundle:PmPatentgroups','pm_patentgroups');
$qb->leftJoin('pm_patentgroups.pm_portfolios','pm_portfolios'); 
```

这假设您将两个实体正确关联。

D2 手册中有很多示例。请记住，查询生成器适用于对象，而不是 sql。

顺便说一句，您的错误消息来自实体存储库（与实体管理器相反）需要别名这一事实。

# c++ - QML 打开 GUI 窗口和控制台

> ID：10856513
> 
> 赞同：3
> 
> 时间：2012-06-01T19:50:50.330
> 
> 标签：c++, user-interface, qt4, console, declarative

我正在尝试获得一个有效的 QML 应用程序。一切都很好，除了当我运行我的应用程序时，它会打开 QML 窗口以及控制台窗口。为什么？这是代码：

```
int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    QDeclarativeView view;

    view.setSource(QUrl::fromLocalFile("myfile.qml"));
    view.show();

    return app.exec();
}

Rectangle {
    width: 940
    height: 670
    color: red
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-01-21T14:34:11.337

对于 CMake 用户。

对于 Windows 的 MSVC 和 MinGW 构建，我遇到了这些问题。（即使*不是*从 IDE 启动。）

解决方案是 CMakeLists 中的以下几行：

```
if (WIN32)
    set(WIN32_ON_OFF_SWITCH "WIN32")
else ()
    set(WIN32_ON_OFF_SWITCH "")
endif ()

add_executable(SomeExe
    ${WIN32_ON_OFF_SWITCH}
    #...
) 
```

正如对问题的评论中提到的那样，这正是使目标系统远离控制台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T20:24:59.410

控制台用于使用 QDebug() 进行调试；

您可以通过删除行来禁用它：

```
CONFIG += console 
```

在您的 .pro 文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-19T03:16:50.297

对于 qbs
`consoleApplication: false`
为您的应用程序设置属性。例如：

```
 Application {
    // consoleApplication: false // permanently disable the console for the application
    Properties {
        condition: qbs.buildVariant == "debug"
        consoleApplication: true //show console
    }

    Properties {
        condition: qbs.buildVariant == "release"
        consoleApplication: false //hide console
    }
} 
```

# iphone - viewForOverlay 没有被调用

> ID：10856514
> 
> 赞同：1
> 
> 时间：2012-06-01T19:50:59.677
> 
> 标签：iphone, objective-c, xcode, ios5

我想在 ios 地图上的两条路径之间绘制路线。问题是 mapView:viewforoverlay 没有被调用。

这是我的代码完整代码。解析没有问题，因为我已经使用 NSLog 语句对其进行了测试。我已经从这里自定义了代码：[http ://spitzkoff.com/craig/?p=136](http://spitzkoff.com/craig/?p=136)

感谢这个网站。bt请帮帮我。

```
 #import "AppViewController.h"
    #import "XMLParser.h"
    #import "AppAppDelegate.h"

     @interface AppViewController ()

      @end

      @implementation AppViewController

      @synthesize mapview= _mapview;
      @synthesize routeLine = _routeLine;
      @synthesize routeLineView = _routeLineView;

      @synthesize coordinatearray = _coordinatearray;
      @synthesize pathlatandlong = _pathlatandlong;
      @synthesize coordinate = _coordinate;

      - (void)viewDidLoad
      {
          [super viewDidLoad];
          [self doParse];

        // Do any additional setup after loading the view, typically from a nib.
      }

      - (void)viewDidUnload
      {
          [self setMapview:nil];
          [super viewDidUnload];
          // Release any retained subviews of the main view.
      }          

      - (BOOL)shouldAutorotateToInterfaceOrientation:                              (UIInterfaceOrientation)interfaceOrientation
     {
         return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
     }

     -(void)doParse
     {
         [_coordinatearray removeAllObjects];

         NSURL *parseurl = [[NSURL alloc] initWithString:@"https://maps.google.com/maps?f=d&hl=en&saddr=19.055229,72.830829&daddr=19.113611,72.871389&ie=UTF8&om=0&output=kml"];

         NSXMLParser *nsxmlparser = [[NSXMLParser alloc] initWithContentsOfURL:parseurl];

         XMLParser *parser = [[XMLParser alloc] initXMLParser];

         [nsxmlparser setDelegate:parser];

         BOOL success = [nsxmlparser parse];

         if(success)
         {

             [self loadRoute];

             if (nil != self.routeLine) 
             {
                 [self.mapview addOverlay:self.routeLine];
             }

             // zoom in on the route. 
             [self zoomInOnRoute];

         }

     }

     -(void) loadRoute
     {

         AppAppDelegate *obj = (AppAppDelegate*)[[UIApplication sharedApplication] delegate];
         NSArray* pointStrings = [obj.parsedxmldata componentsSeparatedByString:@" "];

         // while we create the route points, we will also be calculating the bounding box of our route
         // so we can easily zoom in on it. 
         MKMapPoint northEastPoint; 
         MKMapPoint southWestPoint; 

         // create a c array of points. 
         MKMapPoint* pointArr = malloc(sizeof(CLLocationCoordinate2D) * pointStrings.count);

         for(int idx = 0; idx < pointStrings.count-1; idx++)
         {
            // break the string down even further to latitude and longitude fields. 
            NSString* currentPointString = [pointStrings objectAtIndex:idx];
            NSArray* latLonArr = [currentPointString componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@","]];

            CLLocationDegrees latitude  = [[latLonArr objectAtIndex:1] doubleValue];
             CLLocationDegrees longitude = [[latLonArr objectAtIndex:0] doubleValue];

             NSLog(@"%f %f" , latitude , longitude);

    // create our coordinate and add it to the correct spot in the array 
    CLLocationCoordinate2D coordinate = CLLocationCoordinate2DMake(latitude, longitude);

    MKMapPoint point = MKMapPointForCoordinate(coordinate);

    //
    // adjust the bounding box
    //

    // if it is the first point, just use them, since we have nothing to compare to yet. 
    if (idx == 0) 
              {
                northEastPoint = point;
                southWestPoint = point;
         }
    else 
    {
        if (point.x > northEastPoint.x) 
            northEastPoint.x = point.x;
        if(point.y > northEastPoint.y)
            northEastPoint.y = point.y;
        if (point.x < southWestPoint.x) 
            southWestPoint.x = point.x;
        if (point.y < southWestPoint.y) 
            southWestPoint.y = point.y;
    }

    pointArr[idx] = point;

         }

         // create the polyline based on the array of points. 
         self.routeLine = [MKPolyline polylineWithPoints:pointArr count:pointStrings.count];

         _routeRect = MKMapRectMake(southWestPoint.x, southWestPoint.y, northEastPoint.x - southWestPoint.x, northEastPoint.y - southWestPoint.y);
     }

     -(void) zoomInOnRoute
     {
        [self.mapview setVisibleMapRect:_routeRect];
     }

     - (void)didReceiveMemoryWarning {
         // Releases the view if it doesn't have a superview.
         [super didReceiveMemoryWarning];

     }

     - (void)dealloc 
     {
        self.mapview = nil;
        self.routeLine = nil;
        self.routeLineView = nil;

     }
     - (MKOverlayView *)mapView:(MKMapView *)map viewForOverlay:(id <MKOverlay>)overlay
     {
        MKOverlayView* overlayView = nil;
         NSLog(@"Inside viewforoverlay");

         if(overlay == self.routeLine)
         {
            //if we have not yet created an overlay view for this overlay, create it now.          
             if(nil == self.routeLineView)
             {
                self.routeLineView = [[MKPolylineView alloc] initWithPolyline:self.routeLine];
                self.routeLineView.fillColor = [UIColor redColor];
                self.routeLineView.strokeColor = [UIColor redColor];
                self.routeLineView.lineWidth = 3;
             }

             overlayView = self.routeLineView;

         }

         return overlayView;

     }

     @end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T20:06:06.230

确保 mapView 的委托设置为您的控制器，无论是在 XIB 中还是以编程方式，如下所示：

```
- (void)viewDidLoad
  {
      [super viewDidLoad];

      [_mapview setDelegate:self];

      [self doParse];

    // Do any additional setup after loading the view, typically from a nib.
  } 
```

# http - curl - http 补丁问题 [使用 cookie 以及 usr/pwd]

> ID：10856516
> 
> 赞同：0
> 
> 时间：2012-06-01T19:51:07.693
> 
> 标签：http, session, cookies, curl

我正在尝试使用 curl 更新对象。

我正在尝试两种方法：
1] 在补丁请求中提供 usr/pswd
=> 说“警告：您只能选择一个 HTTP 请求！”
2] 首先保存登录 cookie 并使用它执行补丁
-I => 说“警告：您只能选择一个 HTTP 请求！”
没有 -I => [{"message":"会话过期或无效","errorCode":"INVALID_SESSION_ID"}]

以下是请求：
1] 在补丁请求中提供 usr/pswd

```
curl -I -H "Content-Type: application/json" -H "charset=UTF-8" -H "Accept: application/json" -X PATCH -d '{"field":"new_value"}' -D- 'https://url?un=<uname>&pw=<pwd>/<path to obj>/<key>' --trace-ascii trace.OUT
Warning: You can only select one HTTP request! 
```

2]首先保存登录cookie并使用它来执行补丁

```
curl -c cookies.txt  'https://url?un=<uname>&pw=<pwd>'    
curl -b cookies.txt -H "Content-Type: application/json" -H "charset=UTF-8" -H "Accept: application/json" -X PATCH -d '{"field":"new_value"}' -D- 'https://url/<path to obj>/<key>'  
  =>[{"message":"Session expired or invalid","errorCode":"INVALID_SESSION_ID"}]
curl **-I** cookies.txt -H "Content-Type: application/json" -H "charset=UTF-8" -H "Accept: application/json" -X PATCH -d '{"field":"new_value"}' -D- 'https://url/<path to obj>/<key>'  
  =>  Warning: You can only select one HTTP request! 
```

我们有一个可以使用 UI 执行补丁的工具，我检查了 firebug 中的请求/标头，似乎我在请求中有所有内容。但是我想编写这个调用的脚本。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T06:21:33.233

“-I”表示一个 HEAD 请求，但您指定了一个 HTTP 方法“PATCH”。Curl 抱怨说它不能同时做这两件事。

# javascript - Javascript - 范围问题并将参数传递给动态创建的事件处理程序

> ID：10856517
> 
> 赞同：5
> 
> 时间：2012-06-01T19:51:08.890
> 
> 标签：javascript, javascript-events

在下面的代码中，您将看到我正在尝试为 image.onclick 定义一个带有额外参数的事件处理程序，我在 while 循环中声明了这些参数，希望 javascript 以这种方式定义范围，但事实并非如此。基本上这里所有的事件处理程序都获得了我给变量 id 和 section_id 的最后一个值。关于如何处理我想要动态生成这些处理程序的情况的任何想法？

```
function handlePicturesResult(){
    if (req.readyState == 4) { // Complete
        if (req.status == 200) { // OK response

            var el = document.getElementById('pictureHolder');
            while( el.hasChildNodes() ){
                el.removeChild(el.lastChild);
            }

            var tempObject = JSON.parse(req.responseText);
            var pictures = tempObject.images;
            var i=0;

            while(i<pictures.length){

                var picIndex = i;

                var image= new Image(120,80);
                image.src = 'images/' + pictures[i].url;
                image.width = 120;
                image.height = 80;
                var id = pictures[picIndex].id;
                var section_id = pictures[picIndex].sectionId;
                image.onclick = function(event){
                    deleteImage(event,id,section_id);
                }

                var txtNode = document.createTextNode(pictures[picIndex.valueOf()].id); 
                el.appendChild(image);
                el.appendChild(txtNode);
                i++;
            }
        } else {
        alert("Problem: " + req.statusText);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-01T19:59:22.560

[闭包](https://developer.mozilla.org/en/JavaScript/Guide/Closures)解决了另一个问题！

```
image.onclick = function(id, section_id){
    return function(event) {
        deleteImage(event,id,section_id);
    }
}(id, section_id); 
```

外部函数立即运行（注意最后带有参数的括号），并返回内部函数，该函数在其范围内保留*变量的副本，*就像它们在循环的迭代中一样。

JavaScript 按值传递非对象变量，因此通过将`id`and传递`section_id`给外部函数，您可以在该函数内创建它们的副本。当您创建并返回内部函数时，该内部函数将在其创建时处于范围内的所有变量保留在范围内（这是[闭包](http://en.wikipedia.org/wiki/Closure_(computer_science))`id`的核心），包括和的局部变量副本`section_id`。具有独特作用域的内部函数成为该元素的事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:01:59.807

您需要使用闭包。 [https://developer.mozilla.org/en/JavaScript/Guide/Closures](https://developer.mozilla.org/en/JavaScript/Guide/Closures)

```
image.onclick = function(id, s_id){
  return function(event){
    deleteImage(event, id, s_id);
  }
}(id, section_id) 
```

javascript 中的作用域可以在函数的花括号内定义，这就是为什么使用传递给它的参数执行外部函数将在循环中的特定时间保留这些变量的值，您需要它们。

没有它们， id 和 section_id 的值将始终引用它们在最后一次迭代中的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:15:38.753

这是一个经典的 JavaScript 问题，源于对函数作用域缺乏了解。在这条线上：

```
deleteImage(event,id,section_id); 
```

传递给的参数没有理由`deleteImage`保留它们*在*创建回调时的值。变量`id`和`section_id`绑定到`handlePicturesResult`; 它们是存在于该空间中的变量，并且每个变量都只有一个副本。因此，当回调运行时，它将使用那些特定的变量和它们当前引用的值（来自循环的最后一次迭代）。

解决方案是将变量放入一个范围，在循环的每次迭代中“保存”它们的值。函数提供了 JS 中唯一的此类范围。我不会重复已经提供的优秀解决方案。另一种方法是使用 jQuery[`each`](http://api.jquery.com/jQuery.each/)进行迭代，这样您就不会再遇到这个问题了：

```
$.each(pictures, function(i, picture) {

    var image= new Image(120,80);
    var id = pictures.id;
    var section_id = picture.sectionId;
    var txtNode = document.createTextNode(id);

    image.width = 120;
    image.height = 80;
    image.src = 'images/' + picture.url;

    image.onclick = function(event){
        deleteImage(event, id, section_id);
    }

    el.appendChild(image);
    el.appendChild(txtNode);

}); 
```

*   假设`pictures`是一个数组。

# java - 数据类型 short 的模型属性已删除前导零

> ID：10856518
> 
> 赞同：0
> 
> 时间：2012-06-01T19:51:14.727
> 
> 标签：java, spring, hibernate

我的模型从数据类型“短”的属性中删除前导零时遇到问题。

因此，例如，如果我将其包含在我的控制器中：

```
Purchase purchase = purchaseService.getById(purchaseId); 
```

到期属性显示值“612”，而它应该是“0612”。

我可以添加一个注释来防止这种情况吗？（我想避免向 getter 添加任何自定义代码来修复它）。

```
@Entity
@XmlRootElement
public class Purchase implements Serializable
{
    /**
     * 
     */
    private static final long serialVersionUID = 6603477834338392140L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @OneToMany(mappedBy = "purchase", fetch = FetchType.LAZY)
    private List<Tag> tags;

    private Long pan;

    private short cvc;

    private short expiry;

    public short getExpiry()
    {
        return expiry;
    }

    public void setExpiry(short expiry)
    {
        this.expiry = expiry;
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:11:12.500

那个简短的原始类型只是一个数字，所以前导的“0”是微不足道的。它永远不会存储它。

看起来您正在存储信用卡的到期日期。

当我做电子商务应用程序时，我们并没有对该值做出决定，所以我们最容易将它存储为一个字符串，它会保留前导的“0”。然后我们将输入的字符串传输到 CC 公司。

如果您需要进行日期算术或比较，您可以将其存储为 Date 对象，然后您可以以您想要的任何格式打印。但要小心确定 0612 是指 7 月 1 日还是 7 月末。并且不要忘记 Java 日期索引为 0，因此当用户输入 6 并表示六月时，您需要对其进行调整以创建日期对象。

# pdf - 更改pdf的背景颜色

> ID：10856521
> 
> 赞同：1
> 
> 时间：2012-06-01T19:51:35.987
> 
> 标签：pdf, adobe

有没有办法更改扫描的 PDF 文件的背景颜色？我的 PDF 显示几条黑线，我正在尝试删除它们。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T09:28:59.993

**pdf 中的矢量**背景颜色（不同于光栅的**扫描图像背景颜色**）由 pdf 中的这段代码确定，放置在

**溪流**

和

**端流**

标签

```
/GS1 gs    
1.000 1.000 1.000 rg    
0.00 841.00 m    
595.25 841.00 l    
595.25 -0.85 l    
0.00 -0.85 l    
0.00 841.00 l    
h    
f 
```

在pdf中的上下文中：

```
stream    
/GS1 gs    
1.000 1.000 1.000 rg    
0.00 841.00 m    
595.25 841.00 l    
595.25 -0.85 l    
0.00 -0.85 l    
0.00 841.00 l    
h    
f    
endstream 
```

**1.000 1.000 1.000**表示 =**白色**

**1.000 0.000 0.000**表示 =**红色**

**1.000 0.749 0.792**表示**粉色**等等...

看这三个pdf：（红色，粉红色和白色）

[http://ge.tt/9ZavuZI](http://ge.tt/9ZavuZI)

您可以直接从**sodipodi**颜色选择器中获取这些值，或者，如果您有一个图形软件指示 RGB 颜色值从 0 到 255，您只需应用比例

**1:255=x:你选择的颜色**

例如：假设你有这个 RGB 三元组：**30,144,255**

![30,144,255 RGB 图像](../Images/905f0492598ff133ca601ab85b56df0d.png)

要知道对应的值以便在代码片段中插入以更改 pdf 背景颜色，请执行以下操作：

> **1:255=x:30 = 30/255 = 0.117（近似到小数点后三位）**
> 
> **1:255=x:144 = 144/255 = 0.564（近似于前三位小数）**
> 
> **1:255=x:255 = 255/255 = 1**

所以你在 pdf 源代码中插入**stream**和**endstream**标记之间：

```
stream    
/GS1 gs    
0.117 0.564 1.000 rg    
0.00 841.00 m    
595.25 841.00 l    
595.25 -0.85 l    
0.00 -0.85 l    
0.00 841.00 l    
h    
f    
endstream 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T19:56:26.143

您可能可以使用 PDF 编辑器轻松更改它。有一些开源的，看看这个页面[http://www.cogniview.com/convert-pdf-to-excel/post/pdf-editing-creation-50-open-sourcefree-alternatives-to- adobe杂技演员/](http://www.cogniview.com/convert-pdf-to-excel/post/pdf-editing-creation-50-open-sourcefree-alternatives-to-adobe-acrobat/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:04:23.557

问题是在扫描的文档上，您不能使用前面答案中显示的内容。试试 pdftocolor，一个 100%免费的 PDF 颜色转换工具：

[http://www.pdftocolor.com](http://www.pdftocolor.com)

# linux - 检查linux版本的更好方法？

> ID：10856525
> 
> 赞同：2
> 
> 时间：2012-06-01T19:51:47.533
> 
> 标签：linux, shell, scripting

我目前拥有的。这是最好的方法吗？拥有一个包含许多功能的脚本，并且需要一种方法来在运行每个功能之前了解正在运行的操作系统。

```
CHECK_architecture()
{
    architecture=`uname -m`
    if [ "$architecture" != "x86_64" ] && [ "$architecture" != "ia64" ]; then
        architecture="x86"
    else
        architecture="x86_64"
    fi
}
CHECK_distro()
{
    DISTRO="";
    if [ `uname -r | egrep '(6.2-RELEASE|6.1-RELEASE|5.5-RELEASE|6.1-STABLE|5.4-RELEASE|6.0-RELEASE|5.3-RELEASE|4.10-RELEASE|4.11-RELEASE)'` ]; then
        DISTRO="FreeBSD";
        $BIN_ECHO " System is running FreeBSD"
    elif [ -f /etc/debian_version ];  then 
           $BIN_ECHO " System is running Debian Linux"
           DISTRO=DEBIAN;
    elif [ -f /etc/SuSE-release ]; then
           $BIN_ECHO " System is running SuSE Linux"
           DISTRO=SUSE;
    elif [ -f /etc/fedora-release ]; then
           $BIN_ECHO " System is running Fedora Linux"  
          DISTRO=FEDORA;
    elif [ -f /etc/redhat-release ]; then
           $BIN_ECHO " System is running Red Hat Linux"
           DISTRO=REDHAT;
    else 
        $BIN_ECHO -e " no supported distribution found running "
    exit 1
fi
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:00:47.077

您正在寻找[`config.guess`](http://git.savannah.gnu.org/cgit/config.git/tree/)实用程序。它将可靠地确定架构和操作系统，并为您提供许多其他工具使用的标准化名称。它不会准确地告诉您您拥有哪个 Linux 发行版，但您不应该需要这些信息——请说明您使用它的目的，我可以提供进一步的建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T20:24:49.550

来自wikipedia上的[Linux Standard Base文章：](http://en.wikipedia.org/wiki/Linux_Standard_Base)

> Linux Standard Base (LSB) 是多个 Linux 发行版在 Linux Foundation 组织结构下的一个联合项目，旨在标准化与 Linux 操作系统一起使用的软件系统结构，包括文件系统层次结构。LSB 基于 POSIX 规范、单一 UNIX 规范和其他几个开放标准，但在某些领域扩展了它们。
> 
> 根据 LSB：LSB 的目标是开发和推广一套开放标准，以提高 Linux 发行版之间的兼容性，并使软件应用程序能够在任何兼容的系统上运行，即使是二进制形式。此外，LSB 将帮助协调招募软件供应商为 Linux 操作系统移植和编写产品的工作。

如果您正在使用一些符合[LSB](http://en.wikipedia.org/wiki/Linux_Standard_Base)的发行版（并且您应该），只需`man lsb_release`：

```
 $ lsb_release -a
 No LSB modules are available.
 Distributor ID: Ubuntu
 Description:    Ubuntu 8.04.4 LTS
 Release:        8.04
 Codename:       hardy

 $ lsb_release -a
 LSB Version:    :core-3.1-amd64:core-3.1-ia32:core-3.1-noarch:graphics-3.1-amd64:graphics-3.1-ia32:graphics-3.1-noarch
 Distributor ID: CentOS
 Description:    CentOS release 5.5 (Final)
 Release:        5.5
 Codename:       Final 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:08:52.093

没有绝对可靠的方法来检查 Linux 发行版及其版本。

```
$ head -n1 /etc/issue 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T20:12:22.897

实际上，这取决于您正在运行的 linux 操作系统的类型。对我来说，获取您所使用的 linux 版本的最佳方法是`/etc/redhat-release`从`Redhat`. 对于其他，

```
 Redhat: Test for /etc/redhat-release, check contents
    Debian: Test for /etc/debian_version, check contents
    Mandriva: Test for /etc/version, check contents
    Slackware: Test for /etc/slackware-version, check contents 
```

一般来说，检查`/etc/*-release`和`/etc/*-version`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T20:26:15.113

可能最正确和最简单的方法是遵循自由标准组，并使用 lsb-release： http: [//linux.die.net/man/1/lsb_release](http://linux.die.net/man/1/lsb_release)

# jquery - 如何在弹出框内显示 jQuery 页面？

> ID：10856529
> 
> 赞同：3
> 
> 时间：2012-06-01T19:51:57.353
> 
> 标签：jquery, jquery-mobile, popover

我正在使用 jQuery Mobile 开发一个 iPad 应用程序。我想要一个带有按钮的工具栏，单击时会显示一个弹出框。经过一番搜索，我发现了这个[jQuery popover implementation](https://github.com/harryhorn/jquery-popover)。它工作正常，但标题或内容没有任何样式。然后我做了一些调整，决定只设置一个像这样的常规 jQuery 页面的内容：

```
<div id="popover-add-project" data-role="page" data-url="popover-add-project">
  <div data-role="header" data-position="fixed">
    <h1>Add New Project</h1>
  </div><!-- /header -->      
  <div data-role="content">
    <p>project form to be inserted here</p>
  </div>
</div> 
```

问题是它显示一个空的弹出框。[这里](http://ecil.teodo.ro/files/www.zip)有一个简化的代码，可以通过在 webkit 浏览器上打开 index.html（我只在 Safari 和 Chrome 上测试过）并单击 Add 按钮来执行。

jquery.popover.js 包含弹出框相关代码。

app.js 为添加按钮创建弹出框。

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T13:14:08.763

如果您只需要弹出框内的内容，您应该使用@Phill Pafford 提到的即将推出的弹出窗口小部件。

如果您想在弹出窗口中显示完整页面，您可以尝试[multiview](https://github.com/frequent/multiview)，我几乎完成了开发。

这是我的一个[测试页面](http://www.stokkers.mobi/jqm/multiview/test/fix_triplePop.html)，它也有一个弹出窗口（右上角）。

![在此处输入图像描述](../Images/0bb531f8a8ceeb53ede3fe9630065fe6.png)

弹出框是面板，它使用[JQM pageContainer](http://jquerymobile.com/test/docs/api/methods.html) changePage 选项来启用面板导航并集成到 JQM 和浏览器历史记录中。

我还没有完成插件的仅弹出版本，因此目前您必须像这样设置您的页面：

```
<div data-role="page" id="YOUR_ID" data-wrapper="true"> 

    <div data-role="panel" data-id="my_main_panel_id" data-panel="main">

         <div data-role="page" id="page_A1" data-show="first">

            <div data-role="header" data-position="fixed">
               <h1>Local Header</h1>
               <div data-role="controlgroup" data-type="horizontal" class="iconposSwitcher-div">
                    <a href="#" data-transition="pop" data-role="button" data-panel="pop_one" data-icon="info" data-iconpos="left" class="toggle_popover">pop1</a>
               </div>
            </div>
            <div data-role="content"></div>
         </div>
      </div>

      <div data-role="panel" data-id="pop_one" data-panel="popover" data-triangle="top" class="popover1">
           <div data-role="page" id="page_D1" data-show="first">
               <div data-role="header" data-position="fixed" data-theme="a">
                   <h1>Pop</h1>
               </div> 
               <div data-role="content"></div>
            </div>
    <div data-role="page" id="page_D2">
                <div data-role="header" data-position="fixed" data-theme="a">
                   <h1>Pop internal page</h1>
                </div>
                <div data-role="content"></div>
           </div>
       </div>
   </div> 
```

所以要使用popovers，你需要

*   将**data-wrapper="true"**添加到您的页面以初始化插件
*   使用全角主背景面板
*   面板需要一个角色 = **data-role="panel"**，一个类型**data-panel="main|mid|menu|popover"**和一个 data-id **data-id="your_panel_name"**
*   每个面板上的一个页面需要**data-show="first"**，没有它你的面板将是空白的
*   您可以在包装页面中添加任意数量的弹出面板
*   您可以根据需要在弹出框内添加任意数量的嵌套页面
*   加载页面时，嵌套页面不需要“加载”。您可以像 JQM 一样通过链接或 changePage 调用将它们拉入。
*   要将页面拉入或链接到面板内的页面，请像这样更改页面：

    ```
    $.mobile.changePage('#pop_two', {transition: 'slide', pageContainer: $('div:jqmData(id="your_panel_name")') }); 
    ```

*   或使用指定**数据面板的**链接：

    ```
    <a href="#pop_two" data-panel="your_panel_name">Button</a> 
    ```

*   无需在第一页加载时包含所有弹出页面。您可以像常规 JQM 一样将它们拉入，一旦用户离开或弹出窗口关闭，它们将再次被删除。
*   要切换弹出框，您需要一个带有**toggle_popover**和**data-panel="your_panel_name"**类的切换按钮来告诉插件打开哪个弹出框。
*   在智能手机上，您的弹出窗口将是全屏页面

该插件仍然有一些错误，需要一个带有 4 个小调整的自定义 JQM 版本（最重要的是，将 pageContainer 添加到 JQM 历史记录中），但除此之外它工作正常。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T20:18:41.130

`data-role="page"`属性将 css 属性设置`display`为`none`. 所以添加`display: block`里面的样式属性`#popover-add-project`。

`<div style="display: block" id="popover-add-project" data-role="page" data-url="popover-add-project">`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-01T20:36:16.830

您可以开始使用下一个 jQM 迭代 (1.2) 弹出功能

*   [http://jquerymobile.com/test/docs/pages/popup/index.html](http://jquerymobile.com/test/docs/pages/popup/index.html)

![在此处输入图像描述](../Images/b961800258aeb132b785ea9a7bb63219.png)

# c# - DataTable importRow() 到空表中

> ID：10856532
> 
> 赞同：2
> 
> 时间：2012-06-01T19:52:22.063
> 
> 标签：c#, .net, datatable

我一直在尝试将包含许多工作表的 excel 文档合并到一个数据表中，以便我可以在我的 winform 应用程序中显示该工作表。

通过阅读，我认为 Datatable.import(DataRow row) 是我最好的选择。因此我的代码如下所示：

```
DataTable returnSet = new DataTable();
foreach (DataTable datTab in ds.Tables) // ds is extracted excel sheets in a dataset
{
  foreach (DataRow datRow in datTab.Rows) 
  {
    if (datRow.IsNull(0)) //if empty first col go on to next sheet
    {
      break;
    }
    else
    {
      returnSet.ImportRow(datRow);
    }
  }
} 
```

调试时，它显示 datRow/datTab 是我所期望的，但是在每个 ImportRow 之后，returnSet 仍然是一个空的 1x1 单元格。任何关于我做错/遗漏的见解将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-01T20:00:38.027

我认为原因是因为您的 DataTable 当前没有架构。您可以尝试克隆原始 DataTable 以创建相同的架构（DataColumns 等）。

```
foreach (DataTable datTab in ds.Tables) // ds is extracted excel sheets in a dataset
{
    DataTable tblClone = datTab.Clone();
    foreach (DataRow datRow in datTab.Rows) 
    {

        if (datRow.IsNull(0)) //if empty first col go on to next sheet
        {
            break;
        }
        else
        {
            tblClone.ImportRow(datRow);
        }
    }
} 
```

# c++ - SHFileOperation 当 pFrom = "" 时删除

> ID：10856537
> 
> 赞同：0
> 
> 时间：2012-06-01T19:52:45.960
> 
> 标签：c++, shfileoperation

我有一个涉及 SHFileOperation 的问题：

```
 SHFILEOPSTRUCT sf2;
    memset(&sf2,0,sizeof(sf2));
    sf2.hwnd = NULL;
    sf2.wFunc = FO_DELETE;
    sf2.fFlags = FOF_NOCONFIRMATION;
    sf2.pFrom = pathSubDir; // where pathSubDir = ""

    //2\. Delete temporary files
    int n = SHFileOperation(&sf2); 
```

我的期望是，由于 pathSubDir 是“”，它不会删除任何内容，并且我应该得到 n 不等于 0。但是，事实并非如此。我最终得到了 n = 0，这意味着操作已成功完成。我很好奇是否有人可以向我解释为什么我的假设是错误的。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T04:40:24.030

API 要求 pFrom 以双空终止。一个简单的空字符串 like`""`不符合条件。API 可以读取第一个空字符之后的任何内存并成功删除这些文件。

另一种解释是，如果您的字符串格式确实正确，则 API 已成功删除所有请求的文件，并且在此过程中没有遇到任何故障。它完成了您要求的所有删除，因此它返回成功。

# sql-server - 不在 SQL Server 中使用链接服务器的原因？

> ID：10856538
> 
> 赞同：7
> 
> 时间：2012-06-01T19:52:57.797
> 
> 标签：sql-server, sql-server-2008

女士们先生们——

我正在与建议在 SQL Server 中针对（Informix）使用链接服务器的人合作。

他们发现（出于未知原因）在连接到 SQL 的客户端工具和 SQL Server 将 SQL 语句代理到 Informix 然后将客户端工具直接指向 Informix 时，他们的运气更好。我的想法当然是“解决客户端 > Informix 连接问题，不要使用黑客”——但这不是重点，您可能无法真正协商。

话虽如此，这种方法在性能方面有什么危险？

*   所有查询都将访问 Informix 上的单个数据库，我们不需要在原生 SQL 表和 Informix 之间执行任何异构 JOIN。SQL Server 实际上只是充当代理/数据泵。
*   大多数正在执行的查询也将进行大量的 GROUPing 和聚合，因此（幸运的是）我们不会在框之间移动大量的行。

我的问题：

任何人都可以识别在 SQL Server 上触发的“GROUP BY”问题会导致单个、细粒度的行返回到 SQL Server 并**在那里**聚合而不是在 Informix 上聚合的场景吗？就我而言，这就是世界末日。

在我应该注意的这种情况下使用链接服务器是否存在其他（不良）性能影响（并用作尝试简化解决方案并转到客户端> Informix 的方式）？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T19:57:56.630

如果您直接从 SQL Server 以以下形式在查询中使用链接服务器：

```
SELECT Col1, col2, col3, SUM(col4)
FROM LinkedServer.Database.schema.Table
GROUP BY Col1, col2, col3 
```

然后它将在 SQL Server 上执行聚合。但是如果你使用`OPENQUERY`or `OPENROWSET`，那么它将在链接服务器上执行查询，然后将数据检索到 SQL Server：

```
SELECT *
FROM OPENQUERY(LinkedServer, '
SELECT Col1, col2, col3, SUM(col4)
FROM Database.schema.Table
GROUP BY Col1, col2, col3') 
```

# core-data - 我应该等到它更稳定后再发布带有 Core-Data 和 iCloud 的应用程序吗？

> ID：10856539
> 
> 赞同：1
> 
> 时间：2012-06-01T19:53:27.223
> 
> 标签：core-data, icloud

（截至 2012 年 6 月 1 日）

一个非常简单的问题，我非常感谢其他人（我想我们都可以）的意见，他们要么想知道同样的事情，要么决定接受它（如果是这样，任何共享的用户体验都会很棒）。

我有 2 个在 stackoverflow 和各种博客上似乎很常见的主要问题，所以我知道我不是唯一遇到这些问题的人。

1.  有时，我的同步由于某种原因而损坏，并且同步在某些数据上失败或完全同步失败。

2.  预填充数据对我的应用程序至关重要，没有可靠的方法可以做到这一点（不询问用户 - 这是不可靠的）

对于这两个问题，我已经看到了很多很好的解决方法，但我不禁感到我的用户仍然会遇到问题。

我真的很想了解任何经验，尤其是那些决定使用 iCloud 和 Core-Data 发布的经验。

iCloud 已经有一段时间了，但即使在 iOS 5.1.1 上它似乎也不够稳定，当然更可靠的版本也不会太远。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T05:18:15.003

*如果没有“根据意见发表声明*”，很难回答这个问题，但值得给出部分支持的意见，以期为他人节省一些时间和挫败感。

我的意见是它还**没有准备好**。不幸的是，我目前有一个基于 CoreData + iCloud 的应用程序，尽管我们绕过了一些 iCloud 错误以最终使其足够稳定以通过合理彻底的测试，但一些用户仍然遇到损坏的同步状态。我在最近的生活中度过了一段健康的时光，试图让它发挥作用，目前我很不情愿地在没有 Core Data 的情况下重新实现该应用程序。我真的希望它在我真正喜欢它的大部分时尽快稳定下来。

# php - 重复内容问题（example.com/home 和 example.com 指向同一页面）

> ID：10856540
> 
> 赞同：-1
> 
> 时间：2012-06-01T19:53:28.797
> 
> 标签：php, seo

我通过将帖子设为粘性帖子，将其用作我的主页（WordPress 网站）。我更喜欢这样做而不是将页面指定为粘性，因为帖子比页面有更多的选项。

我正在寻找解决方案的问题是该帖子被索引为`example.com`和`example.com/post-name`。

这两个页面都指向相同的内容，我想询问有关 PHP 脚本的建议，该脚本对请求进行“搜索引擎友好”重定向，`example.com/post-name`以便帖子不会被索引为重复内容。

PS：301 重定向可能是最好的解决方案，但我正在寻找一个我也可以在脚本中实现的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:57:43.373

是的，您可以使用 php 或使用 htaccess 来做到这一点。对于 PHP 解决方案，请参阅[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)和[http://us.php.net/manual/en/reserved.variables.server.php](http://us.php.net/manual/en/reserved.variables.server.php) - 我想你想检查 $_SERVER['REQUEST_URI']

# objective-c - XCode 4，初始化中的不兼容类型

> ID：10856542
> 
> 赞同：0
> 
> 时间：2012-06-01T19:53:37.023
> 
> 标签：objective-c, xcode4, cocos2d-iphone

这段代码有什么问题？

```
-(float) getRotatingAngle : (CGPoint)firstPoint secondPoint:(CGPoint)secondPoint
{
   float dx = firstPoint.x - secondPoint.x;
   float dy = firstPoint.y - secondPoint.y;
   float angle = CC_RADIANS_TO_DEGREES(atan2(dy, dx));
   return angle;
} 
```

当我尝试这样称呼它时：

```
float ang = [self getRotatingAngle:projectile.position secondPoint:projectile.position]; 
```

我从标题中得到错误。我正在使用 cocos2d (COCOS2D_VERSION 0x00010001)。

代码`ccTouchesEnded`位于`CCLayerColor`.

任何帮助表示赞赏。

编辑：射弹是`CCSprite`

编辑：编译器错误是（如标题）`Incompatible types in initialization. TheLayer may not respond to '-getRotatingAngle:secondPoint'`）

提示：这是我从 cocos2d 项目中复制粘贴的代码，它在那里工作。只是该项目是cocos2d V2。（？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:19:07.330

您可以将私有方法定义添加到 .m 文件的顶部，如下所示：

```
@interface SomeClass ()  // Note the empty parens here

-(float) getRotatingAngle : (CGPoint)firstPoint secondPoint:(CGPoint)secondPoint;

@end 
```

这使您可以稍后在 .m 中以您想要的任何顺序组织您的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:11:59.747

哇。我只是将方法移到第一个调用之上。然后它起作用了。非常讨厌。

# java - 选择特定对象背后是否有理由？

> ID：10856545
> 
> 赞同：0
> 
> 时间：2012-06-01T19:53:58.610
> 
> 标签：java, multithreading, object, synchronization

用于同步的锁定对象是任意的，还是选择特定对象的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:08:10.260

您最好使用一种更现代的锁定技术，其中大部分复杂性和陷阱已被消除/平滑。[包](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/package-summary.html) `java.util.concurrent.locks`将是一个好的开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T19:56:02.787

为什么要锁定对象？因为它在各个线程之间共享。这就是全部。与选择要锁定的对象相比，如何实现锁定和线程可能是困难的部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T20:07:58.313

你的问题比较不清楚。

您可能将 Semaphore 对象称为锁。您可能还指的是同步对象。

1) 信号量也可以是任意对象。它的预期目的是它可以用来在信号量处保存线程，直到其他线程释放它。

2) 同步对象使它们的所有功能都原子化：如果一个线程正在对该对象进行操作，则另一个对象等待完成自己的功能。这通常在内部使用信号量来实现。

信号量是用于解决同步问题的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T20:54:41.797

正如在接受的答案中一样，您选择的对象是任意的，只要确保您正确使用它即可。但是，有些对象比其他对象更好。最佳做法是不要使用在锁定上下文之外可以访问的某些对象 - 如果它是其他一些代码也可能决定对其进行同步，或者对其调用 notify 等。所以最好使用 java.util.concurrent 代替，或者使用私有对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T20:09:46.730

锁定对象需要表示独占部分。

如果您锁定整个对象意味着由一个线程独占使用它，您可以使用对象“this”来锁定。这就是方法工作的“同步”工作方式。

```
 public class A
 {
    public synchronized void do1 ()
    {
    ...
    }
    public synchronized void do2 ()
    {
    ...
    }
 } 
```

如果您的对象只有一组应该专门使用的成员，您需要单独的（显式）锁定对象

```
 public class B
 {
    private X x;
    private Y y;
    private Object lockXY = new Object ();

    private R r;
    private S s;
    private Object lockRS = new Object ();

    public void do1 ()
    {
       synchronize (lockXY) {
       }
    ...
    }
    public void do2 ()
    {
       synchronize (lockRS) {
       }
    }
 } 
```

注意使锁定变得复杂，您可能会遇到死锁

# mysql - MySQL使用变量在存在索引的情况下排名

> ID：10856546
> 
> 赞同：3
> 
> 时间：2012-06-01T19:53:59.500
> 
> 标签：mysql, sql, mariadb

使用 @N=@N + 1 的经典技巧来获取某个有序列上项目的排名。现在在订购之前，我需要通过将基表与其他表进行内部连接来过滤掉基表中的一些值。所以查询看起来像这样-：

```
SET @N=0;
SELECT 
  @N := @N + 1 AS rank,
  fa.id,
  fa.val 
FROM
    table1 AS fa 
    INNER JOIN table2 AS em 
      ON em.id = fa.id 
      AND em.type = "A" 
ORDER BY fa.val ; 
```

问题是，如果我在 em.type 上没有索引，那么一切正常，但是如果我在 em.type 上放置索引，那么地狱就会释放，排名值而不是按 val 列的顺序排列行存储在 em 表中。

这是示例输出-：

没有索引-：

```
rank    id         val
1   05F8C7  55050.000000
2   05HJDG  51404.733458
3   05TK1Z  46972.008208
4   05F2TR  46900.000000
5   05F349  44433.412847
6   06C2BT  43750.000000
7   0012X3  42000.000000
8   05MMPK  39430.399658
9   05MLW5  39054.046383
10  062D20  35550.000000 
```

带索引-：

```
rank      id        val
480     05F8C7  55050.000000
629     05HJDG  51404.733458
1603    05TK1Z  46972.008208
466     05F2TR  46900.000000
467     05F349  44433.412847
3534    06C2BT  43750.000000
15      0012X3  42000.000000
1109    05MMPK  39430.399658
1087    05MLW5  39054.046383
2544    062D20  35550.000000 
```

我相信索引的使用应该是完全透明的，输出不应该受到它的影响。这是 MySQL 中的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:32:58.797

这个“把戏”是一颗等待爆炸的炸弹。一个聪明的优化器会在它认为合适的时候评估一个查询，优化速度——这就是它被称为优化器的原因。我不认为 MySQL 变量的这种使用被证明可以像您期望的那样工作，但它确实有效。

一直在工作，直到最近对 MariaDB 优化器进行了改进。它可能会在主流 MySQL 中崩溃，因为在（尚未发布，仍为 beta）5.6 版本中对优化器进行了多项改进。

您可以做的（直到 MySQL 实现窗口函数）是使用自连接和分组。无论优化器未来做了什么改进，结果都是一致的。缺点是它可能不是很有效：

```
SELECT 
  COUNT(*) AS rank,
  fa.id,
  fa.val 
FROM
    table1 AS fa 
    INNER JOIN table2 AS em 
      ON em.id = fa.id 
      AND em.type = 'A'

    INNER JOIN

    table1 AS fa2 
    INNER JOIN table2 AS em2 
      ON em2.id = fa2.id 
      AND em2.type = 'A' 

      ON fa2.id <= fa.id 
                          --- assuming that `id` is the Primary Key of the table
GROUP BY fa.id
ORDER BY fa.val ; 
```

# delphi - 添加一个选项以突出显示重点的 LayoutItem(DevExpress VCL)

> ID：10856547
> 
> 赞同：0
> 
> 时间：2012-06-01T19:54:08.577
> 
> 标签：delphi, devexpress, vcl

在 WinForms LayoutControl 中，您可以在其控件获得焦点时突出显示整个 LayoutItem。VCL dxLayoutControl 是否存在类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T06:45:47.647

我使用 FocusControlOnItemCaptionClick 突出显示 LayOutItem。

```
<TdxLayOutControl>.OptionsItem.FocusControlOnItemCaptionClick:= True; 
```

# php - 如何使用 xml-rpc 连接到 Drupal 6

> ID：10856548
> 
> 赞同：0
> 
> 时间：2012-06-01T19:54:10.327
> 
> 标签：php, drupal, xml-rpc

我正在尝试将我的应用程序与 Drupal 连接。它返回给我这个错误：“出了点问题 - -32602：服务器错误。方法参数数量错误。”。我认为它应该工作。

有人知道这里有什么问题吗？

我的代码：

```
set_time_limit(0);
require_once("IXR_Library.php");

// Create the client object
$client = new IXR_Client('http://localhost/drupal6/xmlrpc.php');
//$client->debug=true;
 $username = "admin"; 
 $password = "admin"; 
 $params = array(0,$username,$password,10); 

if (!$client->query('metaWeblog.getRecentPosts', $params)) {
    die('Something went wrong - '.$client->getErrorCode().' : '.$client->getErrorMessage());
}

$myresponse = $client->getResponse(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:01:09.890

您从与之通信的 XMLRPC 端点收到[错误消息（故障代码互操作性规范，版本 20010516） 。](http://xmlrpc-epi.sourceforge.net/specs/rfc.fault_codes.php)

这是一个定义的错误代码：

> ```
> -32602 ---> server error. invalid method parameters 
> ```

服务器找到了您请求的 RPC 方法，但您向其传递了无效参数。请联系您使用的服务的支持人员以获取所有可用方法的列表。如果您的参数应该可用，请联系支持人员并与他们讨论问题。

在您的情况下，请仔细检查 Drupal 手册告诉您的有关`metaWeblog.getRecentPosts`XMLRPC Method [blogapi_xmlrpc ^(*Drupal API*)](http://api.drupal.org/api/drupal/modules!blogapi!blogapi.module/function/blogapi_xmlrpc/6)的内容：

```
array(
  'metaWeblog.getRecentPosts',
  'blogapi_metaweblog_get_recent_posts',
  array('array', 'string', 'string', 'string', 'int'),
  t('Returns a list of the most recent posts in the system.'),
), 
```

如果文档不足，请从 Drupal 的源代码中查找缺失的部分。

例如，第一个参数需要是一个字符串，但您在`0`这里使用整数。

有关如何使用 XMLRPC Introspection 的更多信息，请参阅相关问题/答案：[XMLRPC 显示 -32601 错误（使用 PHP）](https://stackoverflow.com/a/9485163/367456)。

我不知道 drupal 是否支持 XMLRPC Introspection，但看起来确实如此。

# java - 非常令人困惑，一致的 Hibernate 查找问题？

> ID：10856549
> 
> 赞同：1
> 
> 时间：2012-06-01T19:54:13.387
> 
> 标签：java, spring, hibernate, h2

我们有一个由 Hibernate 支持的 Spring webapp 用于存储。最近，我们在使用我们的 Hibernate 存储对象之一执行查找时注意到了一些问题。这是堆栈跟踪：

```
org.h2.jdbc.JdbcSQLException: General error: "java.lang.RuntimeException: object already exists: TABLES"; SQL statement:
SELECT VALUE FROM INFORMATION_SCHEMA.SETTINGS WHERE NAME=? [50000-128]
        at org.h2.message.Message.getSQLException(Message.java:110)
        at org.h2.message.Message.convert(Message.java:287)
        at org.h2.command.Parser.prepareCommand(Parser.java:256)
        at org.h2.engine.Session.prepareLocal(Session.java:417)
        at org.h2.engine.Session.prepareCommand(Session.java:378)
        at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1074)
        at org.h2.jdbc.JdbcConnection.getQueryTimeout(JdbcConnection.java:679)
        at org.h2.jdbc.JdbcStatement.getQueryTimeout(JdbcStatement.java:547)
        at org.hibernate.jdbc.AbstractBatcher.closeQueryStatement(AbstractBatcher.java:299)
        at org.hibernate.jdbc.AbstractBatcher.closeQueryStatement(AbstractBatcher.java:234)
        at org.hibernate.loader.Loader.doQuery(Loader.java:770)
        at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:270)
        at org.hibernate.loader.Loader.doList(Loader.java:2449)
        at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2192)
        at org.hibernate.loader.Loader.list(Loader.java:2187)
        at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:452)
        at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:363)
        at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:196)
        at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1258)
        at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102)
        at com.ourapp.hibernate.HibernateDao.lookup(HibernateDao.java:173) 
```

我无法准确确定问题所在 - SQL 是否试图插入 TABLES 对象？

我们的 HibernateDao.lookup() 方法，第 173 行：

```
172: Query query = session.createQuery("from " + entityClazz.getName() + " as entity where entity." + field + "='" + value + "'");
173: return query.list(); 
```

这似乎总是发生在同一个 HibernateDao 实例上（对于用户表，本质上），并且每次都由相同的操作触发，但我们似乎无法确定实际问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:02:17.597

尝试使用最新版本的 H2。您使用的是相对较旧的版本（2010-01-30 的版本 1.2.128）。我很确定您会收到更好的错误消息，或者问题会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:34:03.613

打开 Hibernate 参数和 SQL 日志记录。例如，在 log4j.properties 文件中：

```
log4j.logger.org.hibernate=INFO, hibernate
log4j.logger.org.hibernate.SQL=DEBUG, hibernate
log4j.logger.org.hibernate.type=TRACE #******this is the most important piece
log4j.appender.hibernate=org.apache.log4j.RollingFileAppender
log4j.appender.hibernate.File=/blah/logs/hibernate.log
log4j.appender.hibernate.MaxFileSize=10024KB
log4j.appender.hibernate.MaxBackupIndex=5
log4j.appender.hibernate.layout=org.apache.log4j.PatternLayout
log4j.appender.hibernate.layout.ConversionPattern=[%d{ISO8601}]%5p%6.6r[%t]%x - %C.%M(%F:%L) - %m%n 
```

# openstack - 是否可以在笔记本电脑/台式机上运行 OpenStack？

> ID：10856551
> 
> 赞同：1
> 
> 时间：2012-06-01T19:54:17.330
> 
> 标签：openstack

我有一些问题：

1.  是否可以在具有 4GB DD3 Ram 的笔记本上安装 openstack？因为该网站说它需要至少 8GB 的​​ RAM。
2.  他们说它需要一个双四核，我认为这意味着八核。我们可以将它安装在 Quadcore 上吗？
3.  他们说不可能将它安装在 NAS 上。如果有可能，你有没有找到任何地方？即使在询问我们的朋友（谷歌）之后，我也找不到任何东西。
4.  总而言之，是否可以在其上安装笔记本/台式机？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T20:17:47.710

该建议适用于生产环境，

所以 1）如果你只是想在你的笔记本上玩耍就可以了。我在 1.2 Ghz 1GB 上网本上进行了成功的测试。当它启动它的第一个实例时它变得非常慢......对于双四核，它们实际上意味着两个独立的四核，就像在一个主板上的两个四核至强处理器中一样

所以 2) 是的，您可以将它安装在四核上。

3) NAS 设备运行 openstack 和 openstack 存储服务似乎确实不太可能。您很可能需要更多的计算能力。但是，如果您的 NAS 支持 NFS 或 SSH 等，您可能可以安装此驱动器并将其用于存储。

4) 你可以在你的笔记本上完美地构建一个一体化的 openstack 测试设置。性能会很低，但可以接受测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-20T00:15:49.940

这取决于您所说的“安装 OpenStack”是什么意思。OpenStack 本身是一个高度模块化的框架，包含许多服务（计算、网络、图像服务、块存储、对象存储、编排、遥测……）。最重要的是，OpenStack 的典型生产部署还需要几个组件，如负载平衡器、缓存系统、防火墙、Web 服务器等。即使在普通笔记本电脑上，也绝对可以安装最小的 openstack 系统。

在笔记本电脑/台式机上运行 OpenStack 的最简单方法是[使用 Devstack](http://docs.openstack.org/developer/devstack/)，这是一个 shell 脚本，它从源代码安装所有服务并（默认情况下）在单台机器上运行它们。它的可定制性足以提供非常好的测试场；OpenStack 开发人员和 OpenStack QA 团队使用它来针对“真实”系统测试最新开发。

为避免弄乱您的系统，通常建议在 VM 中安装 OpenStack。来自 devstack 文档：

> DevStack 应该在任何运行受支持的 Linux 版本的虚拟机中运行。它将在 2Gb 或更多 RAM 时表现最佳。

截至撰写本文时（2015 年 1 月），支持的发行版有：

*   Ubuntu（最新的 LTS）
*   软呢帽
*   中央操作系统

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T14:44:18.950

关于 NAS：你当然可以使用它，但是“在”Openstack apis 之外，通过为你的虚拟机提供挂载点。如果您想支持实时迁移，它甚至是强制性的。

# mysql - 在 MySql 中使用变量

> ID：10856553
> 
> 赞同：0
> 
> 时间：2012-06-01T19:54:22.420
> 
> 标签：mysql

我有以下函数用于增加值组：

```
SET @IncrementValue := 0;
SET @VIN := 0;

UPDATE tbInventoryMedia
SET 
  @IncrementValue := IF(@VIN <> strVIN, @IncrementValue + 1, 1),
  @VIN := strVIN, 
  tbInventoryMedia.intOrder = @IncrementValue; 
```

这看起来像一个非常直接的查询......如果最后一个 vin 不同并重新开始编号，则递增。任何想法为什么它在 SET 之后显示编译错误？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:09:05.440

您无法更新`SET`属于`UPDATE`.

试试这个：

```
SET @IncrementValue := 0;
SET @VIN := 0;

UPDATE  tbInventoryMedia
SET     tbInventoryMedia.intOrder = CASE @vin WHEN @vin := strVin THEN @IncrementValue := @IncrementValue + 1 ELSE @IncrementValue := 1 END
ORDER BY
        strVIN; 
```

# javascript - Jquery 验证和 CSS

> ID：10856556
> 
> 赞同：0
> 
> 时间：2012-06-01T19:54:53.760
> 
> 标签：javascript, css, jquery-ui, jquery

我在一个页面上有多个 DIV，其中包含表单字段。其中一些是必需的，有些不是。当用户通过输入数据从一个 div 跳转到另一个时。我必须验证所需的字段是否满足并更改该 CSS完成DIV。如果未满足必填字段，我不应该更改css效果。我想用Jquery来解决这个问题。所以，有人可以提供一个好的和干净的设计来解决。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:58:24.963

您可以使用[jQuery 验证器](http://bassistance.de/jquery-plugins/jquery-plugin-validation/) 插件来验证您的内容。

一旦您的 div 失去焦点，您就可以检查验证是否通过，如果没有，则不要应用 css 或应用 css。

示例代码：

```
$("#divid").validate({
    onfocusout: false,    //once div looses focus validate
    rules: {
        //your rules go here
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T19:57:01.447

看一下[jquery validate 插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:04:20.500

使用 jQuery 验证，您可以创建自己的方法来验证一组控件，我使用这种方法将元素包装在类名为“validationGroup”的 div 或字段集中。然后，当我从组内触发事件时，我将 DOM 向上导航到具有类名的父元素并验证下面的所有内容。使用这种方法，您可以控制/限制对正在编辑的当前 div 中的控件的验证。

函数 ValidateAndSubmit(evt) { var isValid = true;

```
// Get Validator & Settings
var validator = $("#aspnetForm").validate();
var settings = validator.settings;

// Find the parent control that contains the elements to be validated
var $group = $(evt.currentTarget).parents('.validationGroup');

// Grab all the input elements (minus items listed below)
$group
    .find(":input")
    .not(":submit, :reset, :image, [disabled]")
    .not(settings.ignore)
    .each(function (i, item)
    {
        // Don't validate items without rules
        if (!validator.objectLength($(item).rules()))
            return true;

        if (!$(item).valid())
            isValid = false;
    });

// If any control is the group fails, prevent default actions (aka: Submit)
if (!isValid) {
    evt.preventDefault();
}

return isValid; 
```

}

# php - 带有 MAMP 的 Mongo PHP 驱动程序 1.2.10

> ID：10856558
> 
> 赞同：2
> 
> 时间：2012-06-01T19:54:57.897
> 
> 标签：php, mongodb, mamp

我正在尝试让最新的 Mongo 驱动程序在 OS X 10.5.8 上与 MAMP 1.9.6 一起使用。

我从源代码成功构建它，因为似乎没有预编译的版本，将它包含到正确的目录中并重新启动 apache。

但是 PHP 不识别扩展名。我之前使用的 1.0.11 驱动程序运行良好，但我需要新版本，因为 Doctrines ODM 需要它。

当我用 1.0.11 替换 1.2.10 mongo.so 并重新启动时，apache mongo 可用。我不明白可能出了什么问题。

有人有这种行为或有任何猜测可以使它起作用吗？

**更新**：PHP 错误日志显示如下：

```
[01-Jun-2012 22:02:37] PHP Warning:  PHP Startup: mongo: Unable to initialize module
Module compiled with module API=20060613
PHP    compiled with module API=20090626
These options need to match
 in Unknown on line 0 
```

我不太确定这意味着什么？

**2\. 更新**：我终于能够同步`phpize`.

但现在我无法再构建驱动程序了。

我执行以下操作：

```
phpize
./configure
make
sudo make install 
```

但是在`make`命令中我得到了大量的语法错误。似乎找不到几个头文件。

第一个是`zend_config.h`，实际上我只有另外两个文件：

```
zend_config.nw.h
zend_config.w32.h 
```

我下载了 MAMP 组件来获取这些文件。为什么我错过了这个？还有很多其他的。

我正在使用 PHP 5.3.5 有没有办法从不同的来源获取这些头文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T19:50:44.813

我按照[在 Mac OS X 下使用 MAMP 开发 MongoDB Web 应用程序中](http://m-schmidt.eu/2011/11/06/develop-mongodb-web-apps-with-mamp-under-mac-os-x/)的说明在OS X 10.7.3 上使用 php 5.3 成功构建 MAMP 的 mongo.so。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-03T13:38:32.883

我添加这个是出于历史目的——我保证如果你遇到同样的问题，你会想要这样做。

就个人而言，我很难让 MAMP 的 php 版本与我尝试制作的扩展构建很好地配合使用。

我发现问题在于 MAMP 确实没有设置为一般添加扩展，并且在编译 mongo php 驱动程序期间，它没有将其安装在正确的位置 - 所以我按照以下教程[为额外的 pecl 和 pear 扩展准备 MAMP](http://blog.jellystyle.com/post/37099202581/installing-php-extensions-with-mamp)。

按照这些步骤准备 MAMP 以添加扩展后，您可以轻松安装任何扩展。

在它开始谈论添加扩展的部分，使用 sudo pecl install mongo 并从您的 MAMP 界面重新启动 apache。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T19:40:32.530

从 PHP 5.3 升级到 5.4 时我遇到了同样的问题，并且能够通过以下步骤解决它：

1.  确保升级 php5-cli 以及 php5 和 php5-common

2.  卸载mongo驱动

    ```
    sudo pecl uninstall mongo 
    ```

3.  重新安装mongo驱动

    ```
    sudo pecl install mongo 
    ```

# drupal - Drupal 6：在日期过去后更改内容

> ID：10856565
> 
> 赞同：0
> 
> 时间：2012-06-01T19:55:13.903
> 
> 标签：drupal, drupal-6, views

基本上，我有一个客户想要这些东西：

*   创建事件的能力（指定名称、描述、日期等）。没问题 - 我对 Views 很熟悉（尽管在 Drupal 7 中，但我可以在 6 中弄清楚）
*   这些活动将按日期组织，基本上，一旦活动日期实际过去，过去的活动将被放在自己的页面上。
*   除此之外，当活动日期过去时，节点的布局将发生变化，任何已上传的照片都将对查看者可见。

现在我知道 Views 中存在与日期相关的论点。一个想法（我确实得到了）：

*   制作两种不同的观点——一种是过去的事件，一种是未来的事件（当然，只从“事件”内容类型中提取内容）并为它们中的每一个传递参数，说如果日期已经过去，把它们放在“过去事件”视图，未来事件反之亦然。

无论如何，这在视图中是可行的还是我应该获得另一个模块？我已经考虑过规则模块，但我不熟悉它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T02:24:29.017

是的，听起来不错，在您的视图中只需创建一个新显示，一个显示用于未来事件，一个用于过去事件，更改显示的布局（模板）或字段（更容易），日期过滤器将是一个用于决定何时显示。

如果您的视图使用页面，您可以使用上下文模块甚至规则模块来决定要转到哪个 url，但如果您使用块，那么日期过滤器就足够了。

# vba - Excel 宏要求使用 VBA 将数据从 excel 复制到 power point

> ID：10856568
> 
> 赞同：0
> 
> 时间：2012-06-01T19:55:47.627
> 
> 标签：vba, excel, powerpoint

我不熟悉 VBA，我需要帮助，我不知道需要多长时间以及我需要做什么，因此将不胜感激。

**摘要**- 基本上要求 excel 宏循环遍历某些将指定的 excel 工作表并将这些工作表中的数据粘贴到现有的 power point 演示文稿中或创建新的演示文稿并将每个工作表数据作为图片粘贴到个别幻灯片。

关键细节如下：

**1** )。每个 Excel 工作表将包含 1 个 Excel 表格或 Excel 图表。

**2** )。Excel 表格或图表将在 Excel 中围绕它们设置一个打印区域。这就是 VBA 代码如何知道要在每张纸上复制什么的方式。它需要复制每张纸上设置的打印区域并粘贴到单独的幻灯片中作为图片。

**3**）。在版本 1 中，它只会创建一个新的 power point 幻灯片并粘贴到单个幻灯片中。我们可以指定高度和宽度要求来确定粘贴到 power point 时图片的大小。在这个版本中，我们可以为粘贴的图片指定一个通用的高度和宽度要求。

**4**）。代码需要与 Excel 和 PowerPoint 2010 一起使用。我相信 2007 非常相似，为这些版本编写的代码也适用于 2010。

我在这里先向您的帮助表示感谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:42:46.707

```
Option Compare Database

Private Sub Command3_Click()
Call findField(Text1.Value)
End Sub

Public Function findField(p_myFieldName)
    Dim db As Database, _
        tb As TableDef, _
        fd As Field

    Set db = CurrentDb

    ''''''Clearing the contents of the table
    DoCmd.RunSQL " Delete from Field_Match_Found"

    For Each tb In db.TableDefs
        For Each fd In tb.Fields
            If fd.Name = p_myFieldName Then

                'MsgBox ("Table " & tb.Name & " has the field " & fd.Name)

                strsql = "INSERT INTO Field_Match_Found Values (""" & tb.Name & """, """ & fd.Name & """)"
                DoCmd.RunSQL strsql

            End If
        Next fd
    Next tb
    Set fd = Nothing
    Set tb = Nothing
    Set db = Nothing

    ''''''''Checking if any match found for the specified field or not
    If DCount("Table_name", "Field_Match_Found") = 0 Then
    MsgBox ("No match found in your database")
    Else
    MsgBox ("Check Table Field_Match_Found for your output")
    End If

    '''''''''''clearing the text box for the next time
    Me.Text1.Value = ""

End Function

Private Sub Form_Load()
Me.Text1.Value = ""
End Sub 
```

# java - 通过引用从java返回到JNI

> ID：10856571
> 
> 赞同：1
> 
> 时间：2012-06-01T19:56:03.527
> 
> 标签：java, c++, c, android-ndk, java-native-interface

我需要从 JNI 调用的 java 方法中传递一个数组和一个整数。

```
public static int foo(byte[] data)
{
    byte[] buffer;
    // Fill buffer with data
    data = buffer;  // <--- This doesn't work as the pointer is changed
    return bufferSize;
} 
```

在指示的行中，我的理解是指针已更改，但我在 JNI 中`data`传入的引用没有更新，因此我没有获得新数据。

我将如何通过参数返回额外的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T14:07:29.437

归功于 K-ballo：

字节数组需要在包装类中。

```
class ByteArrayWrapper {
    public ByteArrayWrapper() {}
    public byte[] array;
} 
```

在 JNI 中，我创建了此类的一个实例并将其传递给方法。

```
public static int foo(ByteArrayWrapper data) {
    byte[] buffer;
    // Fill buffer with data
    data.array = buffer;
    return bufferSize;
} 
```

JNI 中的实例`ByteArrayWrapper`现在包含新的字节数组，可以使用该`jfieldID`属性访问该数组。

# grails - Grails 构建测试数据插件 - 调用 DomainObject.build() 时出现 MissingMethodException

> ID：10856572
> 
> 赞同：0
> 
> 时间：2012-06-01T19:56:08.720
> 
> 标签：grails, grails-plugin

**症结**

通过 Build Test Data 插件调用 MyDomainObject.build() 时，我的单元测试中出现以下错误：

**例外**

```
 groovy.lang.MissingMethodException: No signature of method: us.maponline.pesticide.PesticideProfile.addToApplicators() is applicable for argument types: (us.maponline.pesticide.PesticideApplicator) values: [us.maponline.pesticide.PesticideApplicator : null]
            Possible solutions: getApplicators()
                at grails.buildtestdata.handler.NullableConstraintHandler.addInstanceToOwningObjectCollection(NullableConstraintHandler.groovy:121)
                at grails.buildtestdata.handler.NullableConstraintHandler.populateDomainProperty(NullableConstraintHandler.groovy:88)
                at grails.buildtestdata.handler.NullableConstraintHandler.handle(NullableConstraintHandler.groovy:17)
                at grails.buildtestdata.DomainInstanceBuilder.createMissingProperty(DomainInstanceBuilder.groovy:187)
                at grails.buildtestdata.DomainInstanceBuilder.populateInstance(DomainInstanceBuilder.groovy:147)
                at grails.buildtestdata.DomainInstanceBuilder.build(DomainInstanceBuilder.groovy:124)
                at grails.buildtestdata.DomainInstanceBuilder.build(DomainInstanceBuilder.groovy:123)
                at grails.buildtestdata.BuildTestDataService$_addBuildMethods_closure1.doCall(BuildTestDataService.groovy:25)
                at us.maponline.pesticide.PesticideLogServiceTests.testSaveLog(PesticideLogServiceTests.groovy:20)
            | Completed 1 unit test, 1 failed in 5289ms 
```

根据堆栈跟踪，这发生在 buildtestdata 插件代码中。似乎我的类 PesticideApplicator 在添加到 PesticideProfile 类时为空。

当传递给 PesticideProfile 时，我要求构建的类怎么可能为空？

**源代码**

*测试用例*

```
 @TestFor(PesticideLogService)
            @Build([PesticideLog,PesticideApplicator,PesticideProfile])
            class PesticideLogServiceTests
            {
                void testSaveLog() {

                    PesticideApplicator applicator = PesticideApplicator.build()

                    def result = service.createLog(applicator, new Date())

                    result.errors.each {
                        log.info "got an error. field = $it.field, message:$it.defaultMessage, rejected value = $it.rejectedValue "
                    }

                    assert result: 'no result returned'
                    assert result.success: 'save failed'
                    assert result.result instanceof PesticideLog: "result was not PesticideLog"

                    assert applicator.user.pesticideLogs.size() > 0 : 'expected at least on log to be created.'

                }

            } 
```

*农药概况日志*

```
 class PesticideProfile
            {

                def User user
                String companyName

                static constraints = {
                }

                static belongsTo = User
                static hasMany = [sites: PesticideSite, applicators: PesticideApplicator]

            } 
```

*施药器*

```
 class PesticideApplicator
            {

                String firstName
                String lastName
                String company
                PesticideApplicatorLicense licenseType
                Phone phoneNumber

                static belongsTo = [profile:PesticideProfile]

                static constraints = {
                    company blank: false, maxSize: 55
                    firstName blank: false, maxSize: 55
                    lastName blank: false, maxSize: 100
                    phoneNumber nullable: true
                }

                static mapping = {
                    licenseType length: 55
                }

                def getUser(){
                profile?.user
            }

            } 
```

感谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T01:11:40.340

该问题是由构建测试数据插件试图在 PesticideApplicator 中设置用户的值引起的。问题是 getUser() 不是一个字段，它只是一个实用程序助手：

```
 ...
   def getUser(){
     profile?.user
   }
   ... 
```

`getUser()`从`PesticideApplicator`解决的问题中删除。

也就是说，我仍然想要一个访问用户的辅助方法（最好不要让我的代码知道另一个类的内部信息）。标记方法@Transient 不起作用；错误仍然出现。没有重命名方法，我如何指示构建测试数据插件忽略这个getter？

谢谢！

# javascript - 链接随机化器？

> ID：10856573
> 
> 赞同：-1
> 
> 时间：2012-06-01T19:56:09.073
> 
> 标签：javascript, jquery, onclick

好吧，我想到了这个，但我不知道如何制作它……我想在这里寻求帮助。我只是 html/css 新手程序员，我不知道用 jquery 帮助制作 javascripts 或脚本......

无论如何...这是我的解释。

假设我有一个下载按钮。

```
<a onclick="run"><div id="download-button"></div></a> 
```

正常和活动状态的 css 将有休息......让我们在这里跳过它。

现在我需要的是 javascript 我猜？

我希望onclick“运行”触发该脚本，我可以在其中复制/粘贴几个链接以供下载...

假设我有 5 个链接重定向到 eg.(rapidshare)...

我想在那个 javascript 中粘贴这五个链接，所以下载按钮随机选择一个链接。示例... 下载 4 号链接。

因此，如果我继续单击它，它将随机重定向到一个链接... 1,2,3,4,5 没关系:) （如果可能，它不会再次重复相同的链接）。如果不可能，重复相同的链接就可以了。

这甚至可能吗？我猜想在 javascript 或其他东西中进行一些数学计算：DI 不知道 javascript 是如何工作的，所以我真的做不到。

我也知道这个网站不是“来吧，提出问题并完成所有事情”......但是，如果你能帮我解决这个 javascript 问题吗？我什至不知道写什么，除了`<script type="text/javascript"></script>`

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T20:09:16.930

将所有链接放在一个数组中（假设`myArray`），然后您可以调用：

```
var randomItem = myArray[Math.floor(Math.random()*myArray.length)]; 
```

从该数组中选择一个随机项目。

**[参考+详情](https://stackoverflow.com/questions/10843395/random-the-link-everytime-the-page-is-refresh/10843431#10843431)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T20:11:10.503

在这里，您有一个 jquery 解决方案：

HTML：

```
<div id="button">
  link
  <a class="button-link" href="http://www.google.com">a</a>
  <a class="button-link" href="http://www.yahoo.com">b</a>
  <a class="button-link" href="http://www.bing.com">c</a>
</div> 
```

CSS：

```
#button {
  background: red;
}
#button a.button-link {
  display: none;
}​ 
```

Javascript：

```
$(function() {
  $("#button").click(function () {
    var $anchors = $(this).find("a.button-link");
    var $anchor = $($anchors[Math.floor(Math.random()*$anchors.length)]);
    window.open($anchor.attr("href"),'_blank');
  });​
}); 
```

最后但并非最不重要的是[工作演示](http://jsfiddle.net/CUzxd/2/)。

# jquery - 使用 jQuery 的 .html() 方法丢失关闭 img 标记

> ID：10856593
> 
> 赞同：5
> 
> 时间：2012-06-01T19:57:34.357
> 
> 标签：jquery, image

`.html()`当我用户单击图像所属的事件时，我正在使用 jQuery方法将图像动态添加到我网页中的 div 中。

我已经确认图像标签在返回服务器时格式正确，但是一旦使用 插入`.html()`，标签的结尾部分就会丢失。

例如，最初的

```
<img src="poop.txt"></img> 
```

出来作为

```
<img src="poop.txt"> 
```

在实际网页上。这是什么原因？`.html()`与我以类似方式在网站的另一个页面上插入的一组跨度完美配合，但是当涉及到图像标签时，它会失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T20:00:40.807

问题（实际上是一种保护和好处）是 JavaScript，因此 jQuery，只创建*有效*的 HTML。由于`img`标签没有结束标签（因为它不能有任何内容，它会自动关闭）它不会附加到网页上。

参考：

*   [`img`元素，Mozilla 开发者网络](https://developer.mozilla.org/en/HTML/element/img)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:00:48.463

图片标签`img`没有结束标签。当 JQuery 创建新元素时，它会以有效的方式进行。

参考：

*   [http://www.w3.org/wiki/HTML/Elements/img](http://www.w3.org/wiki/HTML/Elements/img)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:00:49.807

Jquery 创建有效的 html 代码。`</img>`在 html 标准中不存在。

# html - Chrome中的中心表单按钮

> ID：10856602
> 
> 赞同：1
> 
> 时间：2012-06-01T19:58:33.393
> 
> 标签：html, css

这是我页面上的表单代码：

```
<form id="form2" action="processRegister.php" method="post" onsubmit="return checkRegister()">
                        <h4>Register</h4>
                        <div class="reminder">Already registered? Sign in below.</div>
                        <div id="sMessage"></div>
                        <div class="field"><label>First Name:</label><input class="input" type="text" name="firstName" /></div>
                        <div class="field"><label>Last Name:</label><input class="input" type="text" name="lastName" /></div>
                        <div class="field"><label>Email (.edu):</label><input class="input" type="text" name="email" /></div>
                        <div class="field"><label>Password:</label><input class="input" type="password" name="password" /></div>
                        <div class="field"><label>Confirm Password:</label><input class="input" type="password" name="cPassword" /></div>
                        <div class="field"><input class="submit" type="submit" value="Register"/></div>
                    </form> 
```

这是相关的CSS：

```
 .submit
{
    background-color:#30BEB4;
    margin:0 auto;
    display:block;
    border: 1px solid #000000
} 
```

这会将提交按钮置于 FF 中而不是 Chrome 中。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:02:18.800

尝试

HTML：

```
<div class="submit-container field">
<input class="submit" type="submit" value="Register"/>
</div> 
```

CSS：

```
.submit
{
    background-color:#30BEB4;
    border: 1px solid #000000
}

.submit-container {
    text-align: center;
}
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T20:05:41.993

你可以用

```
margin:0 45%;
width:10%; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T20:05:50.853

尝试设置按钮的宽度：http: [//jsfiddle.net/hg7KV/1/](http://jsfiddle.net/hg7KV/1/)

```
.submit
{
    width: 100px;
    background-color:#30BEB4;
    margin:0 auto;
    display:block;
    border: 1px solid #000000;  
}​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T20:07:19.357

要么给提交按钮一个宽度，要么将父 div 设置为 text-align:center 并删除提交按钮上的 display:block。

**[jsFiddle 示例](http://jsfiddle.net/j08691/ZAKYP/)**（按钮有宽度）

**[jsFiddle 示例](http://jsfiddle.net/j08691/SFgXQ/)**（父级具有文本对齐中心）

text-align 属性仅影响内联元素，因此您需要从输入元素中删除 display:block 。margin:0 自动居中技巧仅适用于具有宽度的元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T20:08:46.363

您必须将宽度添加到您的提交类：

```
.submit
{
  background-color:#30BEB4;
  margin:0 auto;
  display:block;
  border: 1px solid #000000
  width: 60px;
} 
```

[http://jsfiddle.net/PPDLC/2/](http://jsfiddle.net/PPDLC/2/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-01T20:10:34.840

如果您只向您的 .submit 类添加一个宽度属性，它就可以工作。例如添加“宽度：100px；”。可能 Chrome 需要尺寸来定位其元素，而 Firefox 无论如何都会这样做。

# ios - 停止 tableFooterView 动画？- iOS

> ID：10856607
> 
> 赞同：3
> 
> 时间：2012-06-01T19:59:10.790
> 
> 标签：ios, objective-c, uitableview, cocoa-touch, table-footer

我有一个自定义 tableFooterView（它只是一个带有渐变的 8px 高 CoreGraphics 弧），我使用 viewDidLoad 中的 tableFooterView 属性而不是 viewForFooterInSection 设置。当用 viewForFooterInSection 设置它时，它在到达底部时漂浮在内容上，而 tableFooterView 做了我想要的，因为它保持 UITableView 的高度。

但是当单元格或表格视图的高度确实发生变化时，tableFooterView 会缓慢地为它们设置动画（大约半秒，但非常明显）。这很尴尬，因为页脚应该看起来像最后一个单元格的扩展。例如，当 heightForRowAtIndexPath 更改单元格的高度时，tableFooterView 就会像幽灵一样飘回来。在此屏幕截图中，底部单元格刚刚缩小到正常大小，页脚向后浮动。

~~（作为新用户，我无法发布图片，但链接如下：[http](http://desmond.imageshack.us/Himg835/scaled.php?server=835&filename=iossimulatorscreenshotj.png&res=landing) ://desmond.imageshack.us/Himg835/scaled.php?server=835&filename=iossimulatorscreenshotj.png&res=landing ）~~

*^(（此内容不再可用，2015 年 9 月 14 日）。)*

当最后一个单元格的高度突然变大时，它也会漂浮在内容上。

任何指针？非常感谢。

编辑：通过高度变化的单元格，我的意思是通过 heightForRowAtIndexPath 部分：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    Note *currentNote = [self.notes objectAtIndex:indexPath.row];
    if (currentNote.associatedCellIsSelected) {
        return NORMAL_CELL_FINISHING_HEIGHT*2;
    }

    return NORMAL_CELL_FINISHING_HEIGHT;
} 
```

编辑 2：在 didSelectRowAtIndexPath 中，我选择了单元格（实际上是单元格的注释），开始/结束更新以及为已选择的行调用 reloadRow。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

Note *currentNote = [self.notes objectAtIndex:indexPath.row];

if (currentNote.associatedCellIsSelected == FALSE) {
    currentNote.associatedCellIsSelected = TRUE;
    [tableView beginUpdates];
    [tableView endUpdates];
}

[tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];    } 
```

我还确保使用纯 rect redColor UIView 代替 Core Graphics 页脚获得相同的行为，并获得相同的结果。我希望有一种简单的方法来覆盖页脚并告诉它不要动画！

# powershell - 为什么 Powershell ISE 显示 Powershell 控制台未显示的错误？

> ID：10856609
> 
> 赞同：13
> 
> 时间：2012-06-01T19:59:21.573
> 
> 标签：powershell, powershell-2.0, powershell-1.0, powershell-ise

我在 Powershell ISE（手动加载脚本并按 F5）和 Powershell 控制台（执行脚本文件）中运行完全相同的 script.ps1 文件。**它们都可以工作，但 ISE 会显示控制台不显示的错误。为什么？**

代码是：

```
git push origin master
Write-Host "lastExitCode: $lastExitCode Last command was successful: $?" 
```

此代码在 ISE 中输出此错误：

```
git.cmd : Initializing to normal mode
At E:\script.ps1:28 char:4
+ git <<<<  push origin master
    + CategoryInfo          : NotSpecified: (Initializing to normal mode:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError

Initializing to normal mode

Everything up-to-date

lastExitCode: 0 Last command was successful: False 
```

这在控制台中：

```
Everything up-to-date
lastExitCode: 0 Last command was successful: True 
```

您可以看到成功状态也不相同。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T18:48:15.897

我不知道为什么它们的输出不同，但我们看到的消息`git push`来自 stderr。这意味着它们**都**显示错误，尽管 ISE 使它们变得更响亮，并将其转换为错误***对象***。

考虑 PowerShell 提示符的以下输出：

```
PS> git push
Everything up-to-date
PS> git push 2> $null    # Redirect stderr to $null
PS> $LastExitCode
1
PS> 
```

并将其与 ISE 进行比较：

```
PS> git push
git : Everything up-to-date
At line:1 char:1
+ git push
+ ~~~~~~~~
    + CategoryInfo          : NotSpecified: (Everything up-to-date:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
PS> git push 2> $null
PS> $LastExitCode
1
PS> 
```

除了显示的错误对象的额外输出外，输出是相同的。ISE 已将 stderr 字符串转换为 NativeCommandError 对象，如果您查看红色，它甚至会显示错误消息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-01T07:55:11.010

如[this Stackoverflow answer](https://stackoverflow.com/questions/12751261/powershell-displays-some-git-command-results-as-error-in-console-even-though-ope)所示，以防止`git push`打印到 STDERR 解决方案是调用命令 witn`--porcelain`选项。

然后，调用

> `git push origin master --porcelain`

输出全部到 STDOUT

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-31T05:35:15.603

所以，下面的例子有任何错误，这个命令 -q **2>&1** | %{ "$_" }` 将使错误结果无效。

一个解决方案和用途：`git push -q 2>&1 | %{ "$_" }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T20:25:33.663

嗯，我能想到的唯一主要区别是 ISE 在 v2 中使用单线程单元 (STA) 模式，而控制台使用多线程单元 (MTA)。您是否尝试过使用 -STA 参数运行 powershell.exe，或使用 -MTA 运行 powershell_ise.exe，然后再次尝试该脚本？

看起来错误来自您尝试运行的 Git 命令 FWIW。

# google-earth - 当多个图标位于同一位置时，将蜘蛛替换为列表

> ID：10856613
> 
> 赞同：1
> 
> 时间：2012-06-01T19:59:26.207
> 
> 标签：google-earth, google-earth-plugin

在 Google 地球中，如果我有多个图标出现在同一位置并且您单击它，它会生成蜘蛛。我想用一个列表覆盖它，而不是在你关闭它之前保持静态。

我将如何去创建这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:56:02.330

您必须进行自己的自定义集群，因为 Earth 不会在 API 中向您公开有关该蜘蛛集群的任何信息。您可能希望查看[MarkerClusterer 实用程序库](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/reference.html)以获取灵感，但代码是特定于地图的，而不是特定于地球的。

# ms-access-2010 - 您无法添加或更改记录，因为表中需要相关记录

> ID：10856619
> 
> 赞同：0
> 
> 时间：2012-06-01T19:59:54.737
> 
> 标签：ms-access-2010

我对 Access 还很陌生。

我有一个需要标准化的数据库表。我有一些关于一个人的信息。这些人被授权访问我们工作场所的区域。每个人可能被授权多次管理不同的区域，当然也可以授权不同的人管理不同的区域。我的第一次尝试是将授权和区域包括在一起，但我意识到我确实是在以这种方式重复数据。在做了一些研究之后，我决定最好的方法是创建 4 个表

tblPerson, tblPermission, tblArea, tblArea_Permission

tblArea_Permission 是一个连接表，用于 tblPermission 和 tblArea 之间的多对多关系（这是我刚刚了解到的）。我似乎在关系选项卡上设置了表关系。我还使用查询将记录添加到连接表。当我尝试执行此操作时，使用从表中获取记录的查询，我得到“您无法添加或更改记录，因为表 XXX 中需要相关记录。” 这似乎是不可能的。

我决定我可能可以忍受不强制执行引用完整性的数据库并将其拿走并为两条记录使用组合主键，因为每个有权限的人都将控制一个区域仅在一个组合中。这似乎有效，但后来我注意到记录会随机更改。我决定数据库一定是损坏的。部分数据库似乎工作正常，所以我从一个新数据库开始并导入表和一个表单，然后开始如上所述重建新表。我得到了同样的错误。

任何帮助将不胜感激。我已经阅读了一些不同的书籍，并使用了谷歌，但没有解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:09:16.900

如果一个人被授权管理一个区域，你需要一个persons_area表：

```
PersonID ) Primary key
AreaID   ) 
```

这显示了这个人可以管理哪些领域。我不确定权限表的来源。

然后，您将无法向 person_areas 表添加记录，除非您在 area 表中有一个 ID，并且在 people 表中有一个 ID。如果缺少这些 ID 中的任何一个，您将收到上述错误。

如果您想对您的数据库设计进行更多相关评论，您将需要发布模式。

# sql-server-2008 - 错误处理的 SQLCmd 脚本中的 DDL 命令；没有 Try/Catch 块就不存在的语法错误

> ID：10856626
> 
> 赞同：2
> 
> 时间：2012-06-01T20:00:46.067
> 
> 标签：sql-server-2008, try-catch, ddl, sqlcmd

我对 SQL Server 还是比较陌生，但我喜欢它的很多东西，除了“all-slightly-different-but-none-can-do-everything”、“finicky-in-different-ways”的数组脚本选项，当你觉得你开始处理事情并且正在巡航时，你又遇到了另一个障碍。我一直在使用动态 SQL 路径（并且发现了对生命周期短的变量的限制），并且根据我之前收到的建议（[使用变量创建模式的脚本](https://stackoverflow.com/questions/8585577/script-to-create-a-schema-using-a-variable)），现在我正在尝试编写 sqlcmd 脚本。

如果你“赤裸”地运行它们，很多脚本都可以正常工作。但是，一旦您将其中一些放入 Try / Catch 块中以对它们进行错误处理，您经常会遇到荒谬的限制，最明显的是 DDL 命令，这些命令“独自一人”并且需要成为第一个/唯一的语句一批。Go 在这种情况下是没有用的，因为如果你把 THAT 放在 Try/Catch 块中的任何地方，它保证你会得到一个语法错误。

显然，我已经在网上搜索过（并查看了在编辑这篇文章时出现的一些“类似问题”），但不断提出上述意义上的“赤裸”或 Try/Catch 的示例没有这些限制的代码示例。

在创建模式的情况下，我使用了向我建议的动态 SQL 方法；我通过 sp_executesql 运行它。这不是问题，因为它本质上是一行代码，问题是当我尝试在表上创建触发器时我再次点击它（并且我猜测我会使用其他一些 Create 命令）。

```
CREATE TRIGGER MySchema.NoDelete 
    ON  MySchema.MyTable 
INSTEAD OF DELETE
AS 
    BEGIN
    SET NOCOUNT ON;
    RAISERROR ('Deletions are not allowed on this table', 16,1)
END 
```

自己运行它就可以了。把 Begin Try 放在它前面，End Try 和一个 Catch 块放在它后面，你会得到：

> 消息 156，级别 15，状态 1，第 3 行关键字“TRIGGER”附近的语法不正确。

在 BEGIN 上有一条红色的波浪线，带有虚假的工具提示“Begin 附近的语法不正确，需要外部”。

我再次尝试了 sp_executesql 路径，但是：

*   首先，它还生成了一个虚假的“$ 附近的语法错误”错误，这与告诉我这里和 Zargthorp 星球之间某处存在一些语法错误一样有用，但更重要的是：

*   其次，即使我确实让它适用于像这样的相对微不足道的触发器，我也会做噩梦，试图想象以这种方式包装一个复杂的多线触发器，但即使我确实做到了；

*   第三，它会使代码更加晦涩难懂，并首先破坏了使用脚本的目的之一，即自我记录。

因此，我的问题是：

*   Try/Catch 对那些因为 MS 设计人员最熟悉的原因需要像 Create Trigger 这样的孤立威严的命令（而不是像 Create Schema 那样可以整齐地打包到 sp_executesql 中的单行）的命令是否有效地无用；或者

*   在我的相对新手中，我是否错过了一些其他方法来解决我在 Create Trigger 中遇到的那种限制？

提前感谢您的任何回复。

# python - 如何找到失败的 python 导入的路径？

> ID：10856632
> 
> 赞同：6
> 
> 时间：2012-06-01T20:00:56.187
> 
> 标签：python, exception-handling, module

假设我有一个无法导入的模块（导入时出现异常）。

例如。`test.py`内容如下：

```
print 1/0 
```

*[显然，这不是我的实际文件，但它可以作为一个很好的代理]*

现在，在 python 提示符下：

```
>>> import test
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "test.py", line 1, in <module>
    print 1/0
ZeroDivisionError: integer division or modulo by zero
>>> 
```

**找到路径/文件位置的最佳方法是`test.py`什么？**

[我可以遍历[Python 的模块搜索路径](http://docs.python.org/tutorial/modules.html#the-module-search-path)，在每个目录中查找文件，但我认为必须有更简单的方法......]

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-01T20:09:17.977

使用[imp](http://docs.python.org/library/imp.html)模块。它有一个函数 ，[`imp.find_module()`](http://docs.python.org/library/imp.html#imp.find_module)它接收模块名称作为参数并返回一个元组，其第二项是模块的路径：

```
>>> import imp
>>> imp.find_module('test') # A file I created at my current dir
(<open file 'test.py', mode 'U' at 0x8d84e90>, 'test.py', ('.py', 'U', 1))
>>> imp.find_module('sys')  # A system module
(None, 'sys', ('', '', 6))
>>> imp.find_module('lxml') # lxml, which I installed with pip
(None, '/usr/lib/python2.7/dist-packages/lxml', ('', '', 5))
>>> imp.find_module('lxml')[1]
'/usr/lib/python2.7/dist-packages/lxml' 
```

# python-3.x - Pygame 只对更新的表面进行 blitting

> ID：10856634
> 
> 赞同：2
> 
> 时间：2012-06-01T20:01:04.757
> 
> 标签：python-3.x, pygame

现在我有一个 x x y 数组来保存整数，这些整数决定将哪个图块绘制到屏幕上。（整数选择在我`tile_arr`的哪个瓷砖blit）

为了获得更好的性能，我只希望改变的 int 再次被 blit'ed。

**示例 1：**

例如现在我有类似的东西：

```
tile_arr = [image1,image2,image3,image4]
arr = [[2,2,2],[2,2,2],[2,2,2]] 
```

然后根据用户的操作，某些值`arr`可能会发生变化，所以可以说：

```
arr[0][0]=1
arr[2][1]=1 
```

这会给我们数组：

```
arr=[[1,2,2],[2,2,2],[2,1,2]] 
```

现在当blitting到屏幕时，我会从`tile_arr`：图像编号1,2,2到顶行，2,2,2到中间行，2,1,2到底行。当我对数组进行 blit 时，我`screen.blit`对每个值或 arr 使用 a，即 9 个 blit。我宁愿只做两次。（`screen.blit`只使用两次）

**示例 2：**

```
tile_arr = [green.bmp, red.bemp, blue.bmp]
feild_arr = [[0,0,0], [0,0,0], [0,0,0]] 
```

输出：

> GGG
> 
> GGG
> 
> GGG

用户更改`feild_arr`为`[[1,0,1], [0,2,0], [0,1,2]]`

输出：

> RGR
> 
> 国标
> 
> GRB

现在我只想调用`sceen.blit()`5 次，将 4 个 Green squares 保留为绿色，因为没有任何改变。

我想制作另一个数组，它只是第一个数组的副本。然后运行它并与新数组进行比较以查看发生了什么变化，但我认为有更好更快的方法。现在这个例子只有 3x3，所以制作一个重复的数组并不算太糟糕，但是我正在使用更大的数组，当你对一个 30x20 数组进行 blitting 时，我需要我能得到的所有快捷方式。

**如何仅在数组中的整数值已更改时进行 blit，并跳过（不 blit）未更改的值？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:44:57.237

您只能使用一次 screen.blit，调用已更改的矩形列表。

我认为最好的方法是创建你自己的从 DirtySprite 派生的类：

`class Cell: pygame.sprite.DirtySprite`

它已经具有用于保存图像和矩形的属性，您可以添加一个属性来保存数字和一个更改数字的方法，将其设置为脏。

然后你可以使用[LayeredDirty](http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.LayeredDirty)类在屏幕上渲染脏精灵。

# ruby-on-rails - rails generic fields_for - 强制子索引

> ID：10856636
> 
> 赞同：0
> 
> 时间：2012-06-01T20:01:09.293
> 
> 标签：ruby-on-rails

模型

```
class Person < AR

end 
```

控制器

```
def new
  @people = []
  3.times {@people << Person.new)
end 
```

看法

```
=form_tag :people_form do
 -@people.each_with_index do |person, i|
   =fields_for :person, person do |person_fields|
    =person_fields.text_field :name 
```

很明显，这将为每个人生成相同的 html (name = people_form[person][name])。有没有办法让它插入索引，所以每个人的 for 都是唯一的？（没有 javacript hack）。

例如，如果我能让它生成这样的东西会很好：

```
<input name='people_form[0][name]' />
<input name='people_form[1][name]' /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:15:55.287

比你想象的更简单

```
=form_tag :people_form do
 -@people.each_with_index do |person, i|
   =fields_for "people_form[#{i}]", person do |person_fields|
    =person_fields.text_field :name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-29T15:24:13.703

从 Rails 6 开始，您可以使用该`index`选项。

```
fields_for :person, person, index: i do |person_fields| 
```

# iphone - prepareForSegue 和 UIActionSheet

> ID：10856643
> 
> 赞同：0
> 
> 时间：2012-06-01T20:01:54.397
> 
> 标签：iphone, xcode, uiactionsheet, uistoryboard

在我的应用程序中，当用户单击按钮时，它会调用 prepareForSegue。应用程序需要检查状态，然后提示用户是否要覆盖或删除。问题是它在显示 UIActionSheet 之前加载了下一个视图控制器。如何在调用 prepareForSegue 之前强制 UIActionSheet 出现？这是我对 prepareForSegue 的逻辑；

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    if ([[segue identifier] isEqualToString:@"mySegue"]) {

        //Check Logic removed for simplicity

        if ([myCheck count] > 0){

            UIActionSheet *actionSheet = [[UIActionSheet alloc]
                                          initWithTitle:@"Save?"
                                          delegate:self
                                          cancelButtonTitle:@"Delete"
                                          destructiveButtonTitle:@"Save"
                                          otherButtonTitles:nil];
            [actionSheet showFromToolbar:self.navigationController.toolbar];

        }

    }

} 
```

这是行动表；

```
- (void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex
{
if (buttonIndex == [actionSheet cancelButtonIndex])
{

    //Delete logic removed

    }else {
    //Save logic removed

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:11:37.430

你将无法在 segue 中做到这一点。当您获得应该触发它的按钮索引时，您必须在您的操作表处理程序中手动加载视图控制器。这意味着现在触发 segue 的任何东西都必须断开连接并指向将创建并显示您的操作表的 IBAction。prepareForSegue 旨在允许您在显示目标视图控制器之前在其上设置参数。当您准备好准备Segue 时，segue 已经启动。那时，没有回头/取消/延迟segue的执行。

最好的祝福。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T20:54:56.627

我发现可以从动作表执行 Segue，只要 Segue 来自 View 控制器并且这里的标识符是一个示例。

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    if (buttonIndex == [actionSheet cancelButtonIndex]) return;

    if (buttonIndex == 0) {

        [self performSegueWithIdentifier:@"visitWeb" sender:self];

    }
    if (buttonIndex == 1) {
        if ([MFMailComposeViewController canSendMail])
        { 
```

可能不是正确的方法，因为我有点新手，但对于我在 StoryBoard 上的模态视图控制器来说，它似乎可以解决问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T21:38:58.270

创建操作表是一个异步事件，不会阻塞 segue。您需要从您的操作表中触发 segue。

# facebook-like - 订阅FB活动

> ID：10856646
> 
> 赞同：2
> 
> 时间：2012-06-01T20:02:08.347
> 
> 标签：facebook-like

```
<div id="fb-root"></div><script>
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=223245147771570";
fjs.parentNode.insertBefore(js, fjs);}
(document, 'script', 'facebook-jssdk'));
FB.Event.subscribe('edge.create',
function(response) {
    alert('You liked the URL: ' + response);
});</script>   
  <h1>Lajknout stranku!</h1>
  <div class="fb-like" data-href="https://www.facebook.com/Testra22" data-send="false" data-layout="button_count" data-width="10" data-show-faces="false" data-font="trebuchet ms"></div> 
```

我使用此代码创建 FB Like 按钮，我想在用户单击它时显示警报。但是有js错误Uncaught ReferenceError: FB is not defined。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:04:19.567

您在浏览器加载之前开始使用 Facebook JS SDK。

因为您使用异步方式加载 JS SDK，您需要定义`window.fbAsyncInit`（如[JavaScript SDK 文档中](https://developers.facebook.com/docs/reference/javascript/)所述）函数并从此处运行依赖于 JS SDK 的代码...

```
window.fbAsyncInit = function() {
  FB.Event.subscribe('edge.create', function(response) {
    alert('You liked the URL: ' + response);
  });
} 
```

# jquery - jquery 事件不适用于附加元素

> ID：10856650
> 
> 赞同：7
> 
> 时间：2012-06-01T20:02:31.523
> 
> 标签：jquery, image, events, append

我[这里有这个网站](http://web-art.netau.net/)

如您所见，“图像”和“Web 模板”选项卡有一个小图像滑块，其中图像从右向左滑动，然后消失，然后出现在父元素的最末端（`<tr>`在我的情况下） .

如果您将鼠标悬停在小图像上，您可以在左侧看到它的预览。

到目前为止，一切都很好。

但是如果你等到第一张图片再次出现，悬停事件就不再起作用了。

jquery有可能在`<tr>`标签末尾看不到新的附加元素吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-01T20:12:58.513

您绑定事件的方式不适用于动态添加的元素。在 preview_script.js 你有：

```
$(".box_body img").hover(function(){ 
```

这将为所有带有“box_body”类的 img 标签添加事件处理程序，但稍后附加的那些将不会获得该事件。

尝试这个：

```
$(document).on("hover", ".box_body img", function() {..}); 
```

这会将事件添加到文档中，并且仅当 eventtarget 是带有 class = "box_body" 的 img 时才会触发它。由于事件向上传播，只要在它到达文档之前没有任何东西阻止它（通过调用“event.stopPropagation（）”），它就应该起作用

如果您知道“.box_body img”的父级，则可以用它替换文档，这会更好一些，因为您不必等待事件传播到文档。

请注意，您可以使用委托完成同样的事情（如果 on 不可用）：

```
$(document).delegate(".box_body img", "hover", function() {..}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T20:16:21.157

您将需要使用 jQuery 的 .live() 函数来将事件处理程序附加到将要创建的元素上。这是文档：[http](http://api.jquery.com/live/) ://api.jquery.com/live/ 这里的用法：

```
$(".dynamicButtons").live("hover", function() {
    //do stuffs
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T20:22:27.600

在您的`script.js`更改文件中[http://web-art.netau.net/script.js](http://web-art.netau.net/script.js)

```
$(".box_body img").hover(function(){
            var src=$(this).attr("src");
            var target=$(this).parents("table").attr("id").split("_").pop();
            $("#preview_"+target).attr({src:src});
}) 
```

第 112 至 116 行至以下

```
$(document).on('mouseenter',".box_body img",function(){
        var src=$(this).attr("src");
        var target=$(this).parents("table").attr("id").split("_").pop();
        $("#preview_"+target).attr({src:src});
}); 
```

这背后的原因已在 SO 中多次回答。搜索并找到一个好的答案。喜欢

[动态创建元素的事件绑定？](https://stackoverflow.com/questions/203198/jquery-event-binding-on-dynamically-created-elements)

[在 jQuery 中，如何将事件附加到动态 html 元素？](https://stackoverflow.com/questions/1359018/in-jquery-how-to-attach-events-to-dynamic-html-elements)

[jquery绑定事件到动态加载的html元素](https://stackoverflow.com/questions/6400343/jquery-binding-events-to-dynamically-loaded-html-elements)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T20:21:40.623

那里的一些代码会有用。

您是否从头开始删除项目，然后在滑块的末尾插入它们？

如果答案是“是”，您应该使用

```
$('selector').delegate('subselector', 'hover', function() {
    //your code there
}); 
```

代替

```
$('selector subselector').hover( function() {
    //your code there
}); 
```

请查看[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/ "代表（）")了解更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T20:21:57.620

我强烈建议您使用[livequery](http://docs.jquery.com/Plugins/livequery)，这将帮助您与 javascript 中新添加的元素相处。一个使用示例是：

```
 $('.elementAdded').livequery('event',function(){
    //do stuff
 }) 
```

我使用时遇到了几个问题，`.on()`因为它只会将事件绑定到项目一次（例如在文档准备好之后）。

希望能帮助到你。

# html - 如何创建一个居中的 AJAX 模式弹出窗口，其宽度是基于百分比的？

> ID：10856654
> 
> 赞同：2
> 
> 时间：2012-06-01T20:03:11.993
> 
> 标签：html, css, ajax

我在 Ajax 模式弹出窗口上使用以下样式。宽度设置正确，但它在屏幕左侧对齐。如果我将宽度设置为固定数字，例如 600 像素，它就会居中。有没有办法既以百分比为中心又以百分比为基础？

```
.modalPopup {
    background-color:#ffffff;
    border-width:3px;
    border-style:solid;
    border-color:Gray;
    padding:3px;
    position:relative;
    width:80%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:07:53.220

尝试

```
.modalPopup {
    background:#fff;
    border:3px solid gray;
    padding:3px;
    position:relative;
    width:80%;
    margin: 0 10%; /* percent based margins will do the trick */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:28:39.563

这是我最终使用的，但 Zoltan 向我展示了方法。如果需要，这允许我有一个滚动条。

```
.modalPopup {
    background:#fff; 
    border:3px solid gray; 
    padding:3px; 
    position:relative; 
    width: 80%;
    height: 400px;
    margin:0 10%; 
    overflow:auto;
} 
```

# c++ - 同一文件中的冲突类型错误？

> ID：10856660
> 
> 赞同：0
> 
> 时间：2012-06-01T20:03:54.047
> 
> 标签：c++, vxworks

我正在构建一个 VxWorks 映像，它一直挂在一个特定的 .cpp 文件上。这是错误：

```
C:\\Tornado2.2\\target\\src\\pmccommon\\pmcvxcommon.h:144: conflicting types for `typedef struct PMCDATA_STRUCT PMCDATA_STRUCT'
C:\\Tornado2.2\\target\\src\\pmccommon\\pmcvxcommon.h:144: previous declaration as `typedef struct PMCDATA_STRUCT PMCDATA_STRUCT'
C:\\Tornado2.2\\target\\src\\pmccommon\\pmcvxcommon.h:205: conflicting types for `typedef struct VX_DMA_MEMORY_MAP VX_DMA_MEMORY_MAP'
C:\\Tornado2.2\\target\\src\\pmccommon\\pmcvxcommon.h:205: previous declaration as `typedef struct VX_DMA_MEMORY_MAP VX_DMA_MEMORY_MAP'
C:\\Tornado2.2\\target\\src\\pmccommon\\pmcvxcommon.h:230: new declaration `struct PMCDATA_STRUCT * GetPmc(int)'
C:\\Tornado2.2\\target\\src\\pmccommon\\pmcvxcommon.h:230: ambiguates old declaration `struct PMCDATA_STRUCT * GetPmc(int)' 
```

我以前见过相互冲突的类型错误，但在与自身进行比较时从未见过！这意味着什么？

这是 pmcvxcommon.h 的第 127-144 行：

```
typedef struct
{
    >>lines 129-143
}PMCDATA_STRUCT; 
```

PMCDATA_STRUCT 没有在别处声明。这与 VX_DMA_MEMORY_MAP 相同。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:25:07.220

尝试如下修改**pmcvxcommon.h**文件：

```
#ifndef PMCVXCOMMON_H
#define PMCVXCOMMON_H
... original content of file ...
#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T20:05:59.893

我的猜测：您在给定的编译单元中多次包含该文件。

# wpf - 窗口上的 wpf 弹出灯箱效果

> ID：10856661
> 
> 赞同：0
> 
> 时间：2012-06-01T20:03:55.910
> 
> 标签：wpf, popup, window, lightbox, effect

当我打开一个弹出窗口时，我正在使用以下代码在窗口上设置灰光效果。它工作正常，但它基本上重新加载所有控件或刷新主窗口。

特别是这一行：`currentWindow.Content = lightboxGrid;`

```
Window currentWindow = Application.Current.Windows.Cast<Window>()
    .SingleOrDefault(x => x.Name.Equals(MAIN_WINDOW_NAME));

Grid lightboxGrid = new Grid();
object currentWindowContent = currentWindow.Content;
currentWindow.Content = null;
lightboxGrid.Children.Add(new ContentControl() 
{ 
    Content = currentWindowContent 
});

// now add the grid that will "black out" the content
Grid blackoutGrid = new Grid();
blackoutGrid.Background = new SolidColorBrush(Colors.Black);
lightboxGrid.Children.Add(blackoutGrid);
blackoutGrid.Opacity = 0.0; // start fully transparent
blackoutGrid.Loaded += blackoutGrid_Loaded;
currentWindow.Content = lightboxGrid;
this._lightboxEffectApplied = true; 
```

在不刷新主窗口或重新加载控件的情况下具有相同效果的选项是什么？

![在此处输入图像描述](../Images/0d1265001e6bbc77b176fffad93ea79c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:59:19.267

如果您的主窗口有一个 Grid 作为其布局根（即使所有内容都在第一个单元格中），那么您可以将此 blackoutGrid 作为子级添加到该网格中，它将显示在其他元素上方而不会弄乱原始视觉树状结构。

在这种情况下，您的窗口的内容将是一个网格，您可以将 blackoutGrid 添加到该网格，并在完成后将其删除。

你写这个的方式似乎有点违背面向对象的实践。从技术上讲，它应该是您的主窗口能够显示灯箱效果。

# php - 使用 PHP/cURL（或其他任何东西）将 XML 数据作为键的值部分发布到 url：post 正文中的值对

> ID：10856662
> 
> 赞同：0
> 
> 时间：2012-06-01T20:03:57.207
> 
> 标签：php, xml, post, curl

好的，这就是我的情况。我需要将 XML 数据发布到安全 URL（ColdFusion Web 服务）并显示返回的结果（作为 XML 数据返回）。要求如下：

1.  必须是 POST 请求。
2.  必须使用 XML 数据字符串。
3.  XML 数据必须是 name=>value 对的值部分。（名字可以是任何东西）
4.  name=>value 对必须在请求的正文中。
5.  内容类型标头必须是“application/x-www-form-urlencoded”

除此之外，我不知道其他限制。我正在尝试使用 PHP/cURL 执行此操作，但似乎无法使其正常工作。我能够很好地建立与 Web 服务的连接，但我返回一个错误，表明没有发送任何帖子正文。这是我的代码：

```
 $url = "https://coldfusion.cfm";
    $username = "xxxxx";
    $password = "xxxxxxx";
    $array = array(
        "idata" => "<?xml version='1.0' standalone='yes'?> 
```

`<XMLDATA1> <XMLDATA2> <XMLDATA3>Query</XMLDATA3> <XMLDATA4>Platinum</XMLDATA4> <XMLDATA5>1</XMLDATA5> </XMLDATA2> <XMLDATA6> <XMLDATA7>2440031317</XMLDATA7> </XMLDATA6> </XMLDATA1>");`

```
 $ch = curl_init($url);
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
        curl_setopt($ch, CURLOPT_HEADER, TRUE);
        curl_setopt($ch, CURLOPT_USERPWD, $username . ":" . $password);
        curl_setopt($ch, CURLOPT_TIMEOUT, 30);
        curl_setopt($ch, CURLOPT_POST, TRUE);
        curl_setopt($ch, CURLOPT_HTTPHEADER, array(
            'Content-Type: application/x-www-form-urlencoded'));
        curl_setopt($ch, CURLOPT_POSTFIELDS, $array);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
        $output = curl_exec($ch);

        if(curl_errno($ch))
            print curl_error($ch);
        else
            curl_close($ch); 
```

`echo $output;`

有人可以告诉我我做错了什么吗？如果我在 Chrome 中使用 REST 控制台，我可以通过请求有效负载选项中的请求参数将 XML 数据作为名称 => 值对发布，并且一切正常运行。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:31:33.097

Your your xml has to be a string sent via post.

# android - 在 android sqlite 参数上使用 java String.format

> ID：10856665
> 
> 赞同：0
> 
> 时间：2012-06-01T20:04:29.830
> 
> 标签：android, sqlite, string.format

Android sqlite 命令类似于 db.delete(table, whereClause, whereArgs); whereClause 是一个字符串，例如“column1 = ? and column2 = ?” whereArgs 是一个字符串数组，它保存将在 whereClause 中替换的值。有没有一种简单的方法可以让我从中获取解码的字符串（用于记录目的）。String.format 似乎很接近，但并不完全。这就是我的目标：

```
 Log.e(MY_DEBUG_TAG, 
     "Error executing Delete(" + table + ", " + 
            String.format(whereClause, whereArgs + ")"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:21:54.523

如果仅用于记录目的，您可以尝试：

```
 Log.e(MY_DEBUG_TAG, 
     "Error executing Delete(" + table + ", " + 
            String.format(whereClause.replaceAll("\\?", "%s"), (Object[])whereArgs) + ")"); 
```

# javascript - 在 highcharts 中汇总图形数据

> ID：10856666
> 
> 赞同：0
> 
> 时间：2012-06-01T20:04:40.383
> 
> 标签：javascript, jquery, highcharts

我有一个显示销售数据的 highcharts 折线图。有没有办法总结选定时间段的数据？例如，如果我绘制每日销售报告，是否能够突出显示并总结其中的一周？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T01:47:43.707

您所描述的不是highcharts的本机功能。您可以从图表对象中获取一个系列并对其单独执行所需的计算，或者让工具提示或图例显示整个系列的总和。但是，仅突出显示系列的一部分本身是不可能的，并且它们没有为您所描述的内容提供方便的方法。

如果您对整个系列的总和感到满意，我会使用 legendFormatter 钩子并将系列总和显示为图例的一部分。如果它需要成为系列的子集，您需要自己编写，可能使用系列的悬停事件来启动事件。

# iphone - 如何在 UINavigationItem 类中访问@private 变量 _navigationBar

> ID：10856667
> 
> 赞同：1
> 
> 时间：2012-06-01T20:04:50.313
> 
> 标签：iphone, objective-c, private, uinavigationitem

`UINavigationItem`具有以下私有变量

```
UIKIT_EXTERN_CLASS @interface UINavigationItem : NSObject <NSCoding> {

@private
 NSString        *_title;
 NSString        *_backButtonTitle;
 UIBarButtonItem *_backBarButtonItem;
 NSString        *_prompt;
 NSInteger        _tag;
 id               _context;
 UINavigationBar *_navigationBar;
 UIView          *_defaultTitleView;
 UIView          *_titleView;
 UIView          *_backButtonView;
 UIBarButtonItem *_leftBarButtonItem;
 UIBarButtonItem *_rightBarButtonItem;
 UIView          *_customLeftView;
 UIView          *_customRightView;
 BOOL             _hidesBackButton;
 UIImageView     *_frozenTitleView;

} 
```

有什么方法（使用 KVC 等）来读取`UINavigationBar *_navigationBar;` 我需要这个来访问未定义的 backButton。这不在：

`@property(nonatomic,retain) UIBarButtonItem *leftBarButtonItem;` `@property(nonatomic,retain) UIBarButtonItem *backBarButtonItem;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T20:18:29.073

***不要这样做。***它违反了封装的基本 OOP 概念。如果 Apple 决定重新排列类中 ivars 的顺序或含义`UINavigationItem`，您的代码可能会意外中断，包括崩溃或吃人的紫龙。

* * *

也就是说，如果您确定要走这条**邪恶的** ***邪恶之***路，您应该能够通过以下方式到达`_navigationBar`ivar：

```
UINavigationItem *theItem = ...;
UINavigationBar *bar = [theItem valueForKey: @"_navigationBar"]; 
```

如果这不起作用（例如，如果 Apple 已覆盖`+accessInstanceVariablesDirectly`此类），您可以下拉到 Objective-C 运行时：

```
#include <objc/runtime.h>

UINavigationItem *theItem = ...;
UINavigationBar *bar = nil;
Ivar barIvar = class_getInstanceVariable([UINavigationItem class], "_navigationItem");
if (barIvar) {
    bar = *(UINavigationBar *)((void *)theItem + ivar_getOffset(barIvar));
} 
```

这两种方法都非常危险，并且有可能破坏操作系统的任何一个版本。***你被警告了。这里是龙。***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:09:24.747

您需要访问 UINavigationController 上的导航栏，而不是 UINavigationItem

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:17:53.547

理想情况下，您会像 Christian 所说的那样访问 UINavigationController 上的导航栏。

如果必须通过 UINavigationItem 访问 navigationBar，创建 UINavigationItem 的自定义子类，那么自定义变量是一种替代方法。

最后，如果您真的不太关心任何替代方案并且真的非常想访问该属性，那么您只需调用：

```
[myNavigationItem performSelector:@selector(navigationBar)] 
```

当然，通常的“会让你的应用程序被拒绝”或“这不是好的编码”语句适用。

# java - 如何在 Restlet 2.0.0 中实现服务器机密性 HTTPS

> ID：10856670
> 
> 赞同：0
> 
> 时间：2012-06-01T20:05:10.943
> 
> 标签：java, web-services, rest, restlet, restlet-2.0

我正在尝试使用 https 协议实现 Rest web 服务（服务器）。

**我在启动服务器时收到警告**：警告：没有可用的服务器连接器支持所需的协议：'HTTPS'。请将匹配连接器的 JAR 添加到您的类路径中。

使用的库：1) org.restlet-2.0.0.jar 2) com.noelios.restlet.ext.simple_3.1.jar 3) org.simpleframework_3.1/org.simpleframework.jar 4) com.noelios.restlet。 ext.ssl.jar 5) org.jsslutils_0.5/org.jsslutils.jar

示例代码：

```
import org.restlet.resource.ServerResource;
import org.restlet.data.Parameter;
import org.restlet.data.Protocol;
import org.restlet.util.Series;
import org.restlet.Component; 
import org.restlet.Server;

public class RestServerResource extends ServerResource {

public static void main(String[] args) throws Exception {
    // Create a new Restlet component and add a HTTP server connector to it 
    Component component = new Component();  
    Server server = component.getServers().add(Protocol.HTTPS, 8183); //https secure protocol

    component.getDefaultHost().attach("/", RestServerResource.class); 
    Series<Parameter> parameters = server.getContext().getParameters();

    parameters.add("sslContextFactory", "org.restlet.ext.ssl.PkixSslContextFactory");
    // I have created self signed certificate. reference is attached with parameter
    parameters.add("keystorePath","${user.home}/serverX.jks");
    parameters.add("keystorePassword", "password");
    parameters.add("keyPassword", "password");
    parameters.add("keystoreType", "JKS");  

    component.start();
}} 
```

任何人都可以建议，为什么我超过警告并且无法启动服务器。提前感谢您的早期回复。

问候维姬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-22T15:17:58.627

可能正在使用旧版本的 restlet，这是 pom 文件依赖项，我有

```
<dependencies>
<dependency>  
   <groupId>org.restlet.jse</groupId>  
   <artifactId>org.restlet</artifactId>  
   <version>2.0.0</version>  
</dependency>  
<dependency>  
   <groupId>org.restlet.jse</groupId>  
   <artifactId>org.restlet.ext.simple</artifactId>  
   <version>2.0.0</version>  
</dependency>  
  </dependencies> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:22:01.203

我已经做好了。有一个 jar 问题。它需要来自同一发行版（即 2.0.0 或 2.0.14 等）的上述 jar 列表。不应从 Restlet API 文档中提到的不同版本或其他位置（例如 org.simpleframework_3.1）选择 jar。

# jquery - 自定义计数器标签/气泡

> ID：10856679
> 
> 赞同：-1
> 
> 时间：2012-06-01T20:06:02.127
> 
> 标签：jquery, css

我正在尝试为个人网站创建主题标签计数器。我想介绍一些类似于 twitter、fb 的计数器泡沫。

创建它的最佳方法是什么？CSS?jQuery? 我从数据库中获取主题标签及其计数。目前我将其显示为单曲

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:09:34.467

最好的方法取决于您用于 Web 应用程序的技术。

您正在谈论添加一些简单的文本，并在其周围进行一些装饰。有几十或几百种方法可以做到这一点，使用太阳下的每一种网络技术。

如果您使用项目已经使用的任何技术进行尝试，您可能会得到更好的结果，然后在遇到问题时发布问题。

# xcode - Xcode - WebKit 框架 - 从 Safari 数据中“取消链接”webview

> ID：10856683
> 
> 赞同：2
> 
> 时间：2012-06-01T20:06:31.647
> 
> 标签：xcode, macos, browser, webview, webkit

我正在开发一个基于 OS X（不是 iOS）的 WebKit 框架的小型浏览器。问题是 webview 从 Safari 获取所有数据！示例：我在 Safari 中登录 Twitter。当我启动浏览器并访问 Twitter 时，我已经登录了！

# pointers - 如何在汇编中将全局变量定义为“远”？

> ID：10856685
> 
> 赞同：0
> 
> 时间：2012-06-01T20:06:41.317
> 
> 标签：pointers, assembly, global-variables

我知道在 c 中它很简单

```
far int var; 
```

但我将如何在装配中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:22:35.840

没有远变量。有一个远指针类型。如我错了请纠正我。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-01T20:45:59.723

通过我的硬件的编译选项解决

# vb.net - 需要从sql查询中获取值

> ID：10856686
> 
> 赞同：1
> 
> 时间：2012-06-01T20:06:41.613
> 
> 标签：vb.net, ado.net

通过 ADO，我喜欢做以下查询：

```
 select name, address, zip from terr where id = '33334' 
```

然后我喜欢将名称、地址、zip 分配给变量，以便稍后在我的程序中分配它。如何使用 VB.NET ADO 执行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T20:17:33.757

尝试这样的事情：

```
 Dim dbName As String
  Dim dbAddress As String
  Dim dbZip As String
  Using connObj As New SqlClient.SqlConnection("<connectionString>")
     Using cmdObj As New SqlClient.SqlCommand("select name, address, zip from terr where id = '33334'", connObj)
        connObj.Open()
        Using readerObj As SqlClient.SqlDataReader = cmdObj.ExecuteReader
           'This will loop through all returned records 
           While readerObj.Read
              dbName = readerObj("name").ToString
              dbAddress = readerObj("address").ToString
              dbZip = readerObj("zip").ToString
              'handle returned value before next loop here
           End While
        End Using
        connObj.Close()
     End Using
  End Using 
```

此外，您应该考虑参数化 where 子句的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T20:13:22.140

你需要一个数据库（我假设是 MS Sql-Server）、一个连接和一个 DataAdapter 来填充一个 DataTable。然后你就拥有了你需要的一切。这是一个例子：

```
Public Function GetUser(UserId As Int32) As DataRow
    Using con = New SqlConnection(My.Settings.RM2ConnectionString)
        Using cmd = New SqlCommand("select name, address, zip from terr where id = @id", con)
            cmd.Parameters.AddWithValue("@id", UserId)
            Dim da = New SqlDataAdapter(cmd)
            Dim tblUser = New DataTable
            da.Fill(tblUser)
            If tblUser.Rows.Count <> 0 Then
                Return tblUser(0)
            Else
                Return Nothing
            End If
        End Using
    End Using
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:18:20.770

从 SQLDatareader 执行 SqlCommand，例如：

```
Dim vVendedor As New SqlCommand("SELECT user FROM users", mConeccion)
vDatosVen = vVendedor.ExecuteReader
vVendedor = Nothing 
```

并获得 te 值：

```
While vDatosVen.Read() 
   vUser = vDatosVen("user")
End While 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-20T19:11:08.377

这就是我所做的...

```
 Private Sub btn_Connect_Click(sender As Object, e As EventArgs) Handles btn_Connect.Click
    Dim sql_connection As New MySqlConnection
    Dim sql_query As New MySqlCommand
    Dim sql_result As MySqlDataReader
    sql_connection.ConnectionString = "Server=localhost;Database=hidden;Uid=root;Pwd=;"
    sql_query.Connection = sql_connection
    sql_connection.Open()
    sql_query.CommandText = "SELECT Entry,name FROM table WHERE entry=1;"
    sql_result = sql_query.ExecuteReader
    If sql_result.HasRows Then

        Do While sql_result.Read()
            Dim query_result As String
            query_result = sql_result("name")
            MsgBox(query_result)
        Loop
    Else
        MsgBox("No results found.")
    End If 
```

# javascript - 在 Google 地图上放置标记时出现 JavaScript 错误

> ID：10856695
> 
> 赞同：0
> 
> 时间：2012-06-01T20:07:59.343
> 
> 标签：javascript, ajax, google-maps-markers

我遇到了一个非常令人沮丧的错误，它更接近解决方案，但并不完全存在。我正在尝试根据存储在 Django 模型中的经纬度坐标在 Google 地图上放置标记。

多亏了一些见解，看起来我不太熟悉的 AJAX 是从模型中获取这些坐标然后使用它在地图上放置标记的方法。在从结果中查看源代码时，正在检索坐标，但通过 Firebug 导致错误：

```
syntax error
[Break On This Error]   

function loadMarkers(stories):

/report/all/ (line 1172, col 29) 
```

任何有关可能导致此问题的原因以及可能的解决方案的见解都将受到欢迎。仅供参考，这是开发模式，所有坐标都在同一个地方，可能太多了。地图不再使用“loadMarkers”功能显示。

代码如下：

```
<script>
function mainGeo()
    {
         if (navigator.geolocation) 
            {
              navigator.geolocation.getCurrentPosition( mainMap, error, {maximumAge: 30000, timeout: 10000, enableHighAccuracy: true} );
        }
        else
        {
              alert("Sorry, but it looks like your browser does not support geolocation.");
        }
    }

var map;

 function mainMap(position)
 {
       // Define the coordinates as a Google Maps LatLng Object
       var coords = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

       // Prepare the map options
       var mapOptions =
      {
                  zoom: 15,
                  center: coords,
                  mapTypeControl: false,
                  navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
                  mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        // Create the map, and place it in the map_canvas div
        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

        // Place the initial marker
        var marker = new google.maps.Marker({
                  position: coords,
                  map: map,
                  title: "Your current location!"
        });
    }

function error() {
               alert("You have refused to display your location. You will not be able to submit stories.");
        }

mainGeo();

var stories = [{% for story in stories %}
                {{story.latitude}},{{story.latitude}}, {% endfor %}];

    loadMarkers(stories);

function loadMarkers(stories):
for (var s in stories) {
    var story = story[s];
    var point = new google.maps.LatLng(story[s]);
    var marker = new google.maps.Marker({position: point, map: map});
} 
```

编辑：修改代码但检索到相同的错误

```
var stories = [{% for story in stories %}
                ({{story.latitude}},{{story.longitude}}) {% endfor %}];

    loadMarkers(stories);

function loadMarkers(stories):
    for (var s in stories) {
        var story = story[s]
        var point = new google.maps.LatLng(story.latitude, story.longitude);
        var marker = new google.maps.Marker({position: point, map: map});
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:17:44.150

我不知道 story 和 stories 中存储了什么，但是在制作s 时`var point`，`LatLng`需要使用两个参数构造 s，例如 (number1, number2) 或 (string1, string2)，其中字符串表示数字。

如果 story[s] 是一个字符串，比如“39.39, 20.21”，你只需要`split(",")`获取两个数字字符串。

```
 myString = "40.7, -70.4";
    myStringValues = myString.split(",");
    var point = new google.maps.LatLng(myStringValues[0], myStringValues[1]); 
```

纬度也重复`var stories`，不应该是经度吗？

# c# - 为什么 C# 中没有声明性不变性？

> ID：10856701
> 
> 赞同：9
> 
> 时间：2012-06-01T20:08:32.770
> 
> 标签：c#, .net, multithreading, parallel-processing, multicore

为什么 C# 的设计者不允许这样的事情发生？

```
public readonly class ImmutableThing
{
    ...
} 
```

安全多线程的最重要方法之一是使用不可变对象/类，但没有办法将类声明为不可变。我知道我可以通过适当的实现使其不可变，但是通过类声明强制执行它会使其更容易和更安全。将一个类评论为不可变的，充其量只是一个“门道具”解决方案。

一看类声明，您就会立即知道它是不可变的。如果您必须修改其他人的代码，您会知道一个类不允许有意更改。我只能在这里看到优势，但我不敢相信以前没有人考虑过这一点。那为什么不支持呢？

**编辑**

有人说这不是很重要的功能，但这并不能真正说服我。多核处理器的出现是因为通过频率提高性能遇到了障碍。超级计算机是大量的多处理器机器。并行处理越来越重要，是提高性能的主要途径之一。.NET 中对多线程和并行处理的支持非常重要（各种锁类型、线程池、任务、异步调用、并发集合、阻塞集合、并行 foreach、PLINQ 等），在我看来，一切都可以帮助您编写并行代码更容易提供优势。即使实施起来并不简单。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-01T20:13:52.027

基本上，因为它很复杂——正如 usr 所写，功能在准备好发布之前需要以各种方式进行大量工作。（作为一个扶手椅语言设计师很容易——我敢肯定，要*真正*做到这一点非常困难，因为这种语言有数百万开发人员拥有无法被更改破坏的关键代码库。）

编译器很难在某些情况下验证一个类型是明显不可变的，而不是过度限制。例如，`String`实际上在 内部是可变的`mscorlib`，但是其他类型（例如`StringBuilder`）的代码已经非常仔细地编写以避免外部世界看到这种可变性。

Eric Lippert[写了很多关于不变性](http://blogs.msdn.com/b/ericlippert/archive/tags/immutability/)的文章——这是一个复杂的主题，需要/将需要*大量*工作才能变成实用的语言特性。改造一个没有它的语言*和框架也很困难。*我希望 C# 至少可以让编写不可变类型*变得更容易*，而且我怀疑团队已经花了很长时间思考这个问题——他们是否会对自己的想法感到满意，将其转化为生产语言功能是另一回事。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T20:11:31.437

需要设计、实施、测试、记录、部署和支持功能。这就是为什么我们首先获得最重要的功能，而迟到或永远不会获得不太重要的功能。

您的建议没问题，但有一个简单的解决方法（如您所说）。因此，它不是一个“紧急”功能。

还有一种称为**表示不变性**的东西，其中允许对象内部的状态变化，但从不让外部可见。示例：延迟计算的字段。这在您的提议下是不可能的，因为编译器永远无法证明该类对外部是不可变的，尽管它的字段经常被写入。

# javascript - 扩展 DOM 但不是元素原型.. 可能吗？

> ID：10856702
> 
> 赞同：1
> 
> 时间：2012-06-01T20:08:37.140
> 
> 标签：javascript, dom, element, extend

如果你想在 DOM 中扩展一些组或类，但我不想扩展所有元素。有可能的？

例如：

```
document.getElementsByClass('extended').myMethod(); // working 
```

但

```
document.getElementById('elementNotExtendedClass').myMethod(); // shouldnt be working 
```

因为我不想弄乱所有元素，只是选择的元素。也许应该通过在文档中创建我自己版本的 createElement() 方法来以某种方式完成。例如 document.CreateMyElement()。

或者有什么想法？谢谢

编辑 6 月 6 日：我正在寻找原型链保持工作的解决方案，因此我可以立即更改一些共享方法和属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:16:31.863

为什么不将方法添加到每个实例（[小提琴](http://jsfiddle.net/j7sPt/4)）

```
function test() {
    this.style.fontWeight = "bold";
}

window.onload = function(){
    // add your method to existing elements with class 'extended'
    var elements = document.getElementsByClassName('extended');
    for (var i = 0; i < elements.length; i++){        
        elements[i].test = test;
    }
    // just to visualize what happened...
    var spans = document.getElementsByTagName("span");
    alert("span[0].test: " + typeof spans[0].test
          +"\nspan[1].test: " + typeof spans[1].test); 
    spans[0].test();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:18:17.063

**更新**

这种方法将定义一个全局接口，您可以在该接口上定义扩展方法。将它们放在这样的界面中可以让您更改方法而无需重新应用它。

```
MyExtendedInterface = {
    test: function() {
        // this points to the DOM element itself
        console.log(this);
    }
}

var elements = document.getElementsByClassName('extended');
for (var i = 0, el; el = elements[i]; ++i) {
    for (var j in MyExtendedInterface) {
        // bind the interface methods to the current element
        el[j] = MyExtendedInterface[j].bind(el);
    }
} 
```

* * *

这`.bind()`是最近添加到 JavaScript 的；另见：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)

# assembly - ASM 字符串导致代码损坏

> ID：10856705
> 
> 赞同：0
> 
> 时间：2012-06-01T20:08:43.780
> 
> 标签：assembly, x86, nasm, opcode

我有一个简单的 16 位程序集，如下所示：

```
push bx

StrVar db "My string!",0

push ax

.. other code.. 
```

我正在尝试使用 NASM 对其进行编译，但我有一个问题.. 如果我的带有尾随零的字符串不是 16 位的倍数（比如说，包括 19 个字节零），则字符串后面的 asm 对齐错误并搞砸了（我在反汇编程序中看到了它）。

为什么呢？我注意到操作码并不总是 16 位，那么反汇编程序如何决定操作码应该遵循哪些边界？

此外..如何防止这种情况发生？我应该在每次每个字符时计算我的字符串吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T20:20:55.257

您的问题是，就目前而言，您的代码没有多大意义。执行后`push bx`，它将获取字符串的前几个字节，并尝试将它们作为指令执行。这通常不会很好地工作。

通常，您希望在与代码不同的段中定义数据。在 MASM 语法中，您可能会使用如下内容：

```
.data

StrVar db "My String!", 0

.code
; ...
    push bx
    push ax
    mov si, offset StrVar                        
; ... 
```

有时*您*几乎需要在代码段中定义数据，但是当您这样做时，通常需要使用流控制指令来确保它永远不会被执行（例如，在`ret`from 函数之后立即插入跳转表）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T20:12:47.300

可能是您的反汇编程序感到困惑，因为您正在混合这样的指令和数据。

# symfony - Symfony 命令缓存：清除使某些权限丢失

> ID：10856707
> 
> 赞同：1
> 
> 时间：2012-06-01T20:08:52.000
> 
> 标签：symfony, permissions, directory

我在 Mac Os X Lion (10.7.4) 中使用 Symfony 2.0.12。

由于某种原因，每次我清除缓存（php app/console cache:clear）时，cache/* 文件夹的权限都会丢失。

结果是我尝试进入我的应用程序，它开始给我一堆错误，比如“无法在 app/cache/dev/XXX 文件夹中写入”。

因此，开始了与机器的“战斗”。一旦我授予该文件夹的权限，我很快就会收到下一个 YYY 文件夹的错误消息。这发生在大约 8 或 9 个文件夹中，直到我赢了，一切显然又开始正常工作了。

有没有人通过这个？清除缓存时如何设法保存权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:02:41.110

在文档中有一些关于如何设置权限的替代命令。但我不知道他们是否适用于 mac。选中**设置权限**框。

[http://symfony.com/doc/current/book/installation.html](http://symfony.com/doc/current/book/installation.html)

在我的 ubuntu 系统上，以下命令使权限永久化

```
sudo setfacl -R -m u:www-data:rwx -m u:`whoami`:rwx app/cache app/logs
sudo setfacl -dR -m u:www-data:rwx -m u:`whoami`:rwx app/cache app/logs 
```

在我看来，让网络服务器以您的用户身份运行并不是一个好主意，因为网络服务器不应该访问您的个人文件等等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T03:48:01.130

如果您以与创建缓存文件的 php 进程不同的用户身份运行命令，则会发生这种情况。您必须以 Web 服务器用户身份运行命令，使 Web 服务器以您的用户身份运行，或者在运行命令后 chown/chmod 应用程序/缓存应用程序/日志目录。

# entity-framework - EF 中的完整自定义属性

> ID：10856711
> 
> 赞同：0
> 
> 时间：2012-06-01T20:09:06.063
> 
> 标签：entity-framework

在 C# 中将 EF 与 Winforms 一起使用。我想使用部分类向我们的实体添加完整的自定义属性。所有实体都已经有带有验证内容的部分类等等，所以我只需添加我需要的属性。完整属性是指具有 getter 和 setter 的属性，而不仅仅是计算/只读属性。我想这样做主要是为了直接处理一些设计不良或有其他问题的数据库映射属性。例如，一种情况是这样的：

```
// entity class, generated
public partial class Customer
{
  public string Spot {get;set}
}

// partial class, manually changed
public partial class Customer
{
  public int? xxxSpot 
          { get   {  return Int32.Parse(Spot.Trim()); }  // some code omitted 
          { set   { Spot = value.ToString().PadLeft(5); }
} 
```

因此，我的自定义属性将围绕实体的现有数据库映射属性构建。我想像使用普通属性一样使用这些自定义属性，即将它们绑定到 UI 控件等。我试过一个，到目前为止效果很好。这是一个好主意吗？如果不是，为什么？这样做时我还应该考虑什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:30:20.943

您已经回答了自己的问题 - 它有效，没有理由不这样做。如果您想改进实体的设计，您甚至可以尝试[更改映射属性的可见性](https://stackoverflow.com/questions/5202780/entity-framework-and-business-objects/5202859#5202859)，以确保其他类必须仅使用您的自定义属性和附加逻辑。

# java - Android 创建自定义键 "@hotmail.com","@gmail.com"

> ID：10856725
> 
> 赞同：1
> 
> 时间：2012-06-01T20:09:58.997
> 
> 标签：java, android, eclipse, keyboard, android-softkeyboard

可以使用我想要的单词列表在键盘上创建自定义键吗？

我已经安装了键盘“SwiftKey X”，当我将自己定位在文本字段中时，我在键盘上得到一个键 android“@...”，然后我可以选择选项（“@hotmail.com”、“@ gmail.com”、“@yahoo.com”）。

我想知道您是否可以对此列表进行编程，以及是否可以将域自定义添加为“dyndns.com”、“no-ip.com”。

有可能吗？

![在此处输入图像描述](../Images/27e5a6287781b060014cebca98e624dd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:47:37.030

你可以使用这样的东西

```
<Key
                android:horizontalGap="1.1%p"
                android:keyLabel="GMAIL"
                android:keyOutputText="GMAIL"
                android:keyWidth="10.0%p" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:21:17.520

是的，可以为软显示器创建自定义键盘。这是一个在 android 开发站点上讨论它的链接。

[http://developer.android.com/resources/articles/creating-input-method.html](http://developer.android.com/resources/articles/creating-input-method.html)

# directx - 渲染一堆分层纹理的有效方法？

> ID：10856727
> 
> 赞同：0
> 
> 时间：2012-06-01T20:09:59.970
> 
> 标签：directx, windows-8, windows-runtime, direct3d, hlsl

渲染一堆分层纹理的有效方法是什么？我有一些半透明的纹理矩形，我在 3D 空间中随机定位并从后到前渲染它们。

目前我调用 d3dContext->PSSetShaderResources() 在每次调用 d3dContext->DrawIndexed() 之前为像素着色器提供新纹理。我有一种感觉，我在每次绘制之前将纹理复制到 GPU 内存。我可能有 10-30 个 ARGB 纹理，每个纹理大约 1024x1024 像素，它们与我在屏幕上渲染的 100-200 个矩形相关联。我的 FPS 在 100 时还可以，但在 200 左右变得相当糟糕。我可能在其他地方效率低下，因为这是我的第一个半严肃的 D3D 代码，但我强烈怀疑这与来回复制纹理有关。30*1024*1024*4 是 120MB，对于应该针对任何 Windows 8 设备的 Metro 风格应用来说，这有点高。所以把它们都放在那里可能有点费力，但也许我至少可以以某种方式缓存一些？有任何想法吗？

*编辑 - 添加了一些代码片段

**常量缓冲区**

```
struct ModelViewProjectionConstantBuffer
{
    DirectX::XMMATRIX model;
    DirectX::XMMATRIX view;
    DirectX::XMMATRIX projection;
    float opacity;
    float3 highlight;
    float3 shadow;
    float textureTransitionAmount;
}; 
```

**渲染方法**

```
void RectangleRenderer::Render()
{
    // Clear background and depth stencil
    const float backgroundColorRGBA[] = { 0.35f, 0.35f, 0.85f, 1.000f };
    m_d3dContext->ClearRenderTargetView(
        m_renderTargetView.Get(),
        backgroundColorRGBA
        );

    m_d3dContext->ClearDepthStencilView(
        m_depthStencilView.Get(),
        D3D11_CLEAR_DEPTH,
        1.0f,
        0
        );

    // Don't draw anything else until all textures are loaded
    if (!m_loadingComplete)
        return;

    m_d3dContext->OMSetRenderTargets(
        1,
        m_renderTargetView.GetAddressOf(),
        m_depthStencilView.Get()
        );

    UINT stride = sizeof(BasicVertex);
    UINT offset = 0;

    // The vertext buffer only has 4 vertices of a rectangle
    m_d3dContext->IASetVertexBuffers(
        0,
        1,
        m_vertexBuffer.GetAddressOf(),
        &stride,
        &offset
        );

    // The index buffer only has 4 vertices
    m_d3dContext->IASetIndexBuffer(
        m_indexBuffer.Get(),
        DXGI_FORMAT_R16_UINT,
        0
        );

    m_d3dContext->IASetPrimitiveTopology(D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST);

    m_d3dContext->IASetInputLayout(m_inputLayout.Get());

    FLOAT blendFactors[4] = { 0, };
    m_d3dContext->OMSetBlendState(m_blendState.Get(), blendFactors, 0xffffffff);

    m_d3dContext->VSSetShader(
        m_vertexShader.Get(),
        nullptr,
        0
        );

    m_d3dContext->PSSetShader(
        m_pixelShader.Get(),
        nullptr,
        0
        );

    m_d3dContext->PSSetSamplers(
        0,                          // starting at the first sampler slot
        1,                          // set one sampler binding
        m_sampler.GetAddressOf()
        );

    // number of rectangles is in the 100-200 range
    for (int i = 0; i < m_rectangles.size(); i++)
    {
        // start rendering from the farthest rectangle
        int j = (i + m_farthestRectangle) % m_rectangles.size();

        m_vsConstantBufferData.model = m_rectangles[j].transform;
        m_vsConstantBufferData.opacity = m_rectangles[j].Opacity;
        m_vsConstantBufferData.highlight = m_rectangles[j].Highlight;
        m_vsConstantBufferData.shadow = m_rectangles[j].Shadow;
        m_vsConstantBufferData.textureTransitionAmount = m_rectangles[j].textureTransitionAmount;

        m_d3dContext->UpdateSubresource(
            m_vsConstantBuffer.Get(),
            0,
            NULL,
            &m_vsConstantBufferData,
            0,
            0
            );

        m_d3dContext->VSSetConstantBuffers(
            0,
            1,
            m_vsConstantBuffer.GetAddressOf()
            );

        m_d3dContext->PSSetConstantBuffers(
            0,
            1,
            m_vsConstantBuffer.GetAddressOf()
            );

        auto a = m_rectangles[j].textureId;
        auto b = m_rectangles[j].targetTextureId;
        auto srv1 = m_textures[m_rectangles[j].textureId].textureSRV.GetAddressOf();
        auto srv2 = m_textures[m_rectangles[j].targetTextureId].textureSRV.GetAddressOf();
        ID3D11ShaderResourceView* srvs[2];
        srvs[0] = *srv1;
        srvs[1] = *srv2;

        m_d3dContext->PSSetShaderResources(
            0,                          // starting at the first shader resource slot
            2,                          // set one shader resource binding
            srvs
            );

        m_d3dContext->DrawIndexed(
            m_indexCount,
            0,
            0
            );
    }
} 
```

**像素着色器**

```
cbuffer ModelViewProjectionConstantBuffer : register(b0)
{
    matrix model;
    matrix view;
    matrix projection;
    float opacity;
    float3 highlight;
    float3 shadow;
    float textureTransitionAmount;
};

Texture2D baseTexture : register(t0);
Texture2D targetTexture : register(t1);
SamplerState simpleSampler : register(s0);

struct PixelShaderInput
{
    float4 pos : SV_POSITION;
    float3 norm : NORMAL;
    float2 tex : TEXCOORD0;
};

float4 main(PixelShaderInput input) : SV_TARGET
{
    float3 lightDirection = normalize(float3(0, 0, -1));

    float4 baseTexelColor = baseTexture.Sample(simpleSampler, input.tex);
    float4 targetTexelColor = targetTexture.Sample(simpleSampler, input.tex);
    float4 texelColor = lerp(baseTexelColor, targetTexelColor, textureTransitionAmount);
    float4 shadedColor;
    shadedColor.rgb = lerp(shadow.rgb, highlight.rgb, texelColor.r);
    shadedColor.a = texelColor.a * opacity;
    return shadedColor;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T02:52:44.747

正如 Jeremiah 所建议的那样，您可能不会将每个帧的纹理从 CPU 移动到 GPU，因为您必须为每个帧创建新纹理或使用“UpdateSubresource”或“Map/UnMap”方法。

我认为实例化不会对这种特定情况有所帮助，因为多边形的数量非常少（我会开始担心有几百万个多边形）。您的应用程序更有可能受到带宽/填充率的限制，因为您正在执行大量纹理采样/混合（这取决于GPU 上的结构填充率、像素填充率和[ROP的数量）。](http://en.wikipedia.org/wiki/Render_Output_unit)

为了获得更好的性能，强烈建议：

*   确保所有纹理都生成了所有 mipmap。如果他们没有任何mipmaps，它会对GPU的缓存造成很大的伤害。（我还假设您在 HLSL中使用[texture.Sample方法，而不是 texture.SampleLevel 或变体）](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509700%28v=vs.85%29.aspx)
*   在 GPU 上使用[Direct3D11 块压缩](http://msdn.microsoft.com/en-us/library/windows/desktop/hh308955%28v=vs.85%29.aspx)纹理，方法是使用 texconv.exe 之类的工具，或者最好使用“ [Windows DirectX 11 纹理转换器](http://code.msdn.microsoft.com/windowsdesktop/DirectX-11-Texture-fecd4824)”中的示例。

[附带说明一下，您可能会在https://gamedev.stackexchange.com/](https://gamedev.stackexchange.com/)上对此类问题获得更多关注。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T20:38:45.690

我不认为您正在从 GPU 到系统内存进行任何来回复制。您通常必须显式地调用 Map(...)，或者通过 blitting 到您在系统内存中创建的纹理。

一个问题是，您正在为每个纹理进行 DrawIndexed(...) 调用。如果您通过批处理将大量工作发送给 GPU，则 GPU 的工作效率最高。实现此目的的一种方法是将 n 数量的纹理设置为 PSSetShaderResources(i, ...)，然后执行 DrawIndexedInstanced(...)。然后，您的着色器代码将读取每个着色器资源并绘制它们。我在[这里](http://jeremiahmorrill.wordpress.com/2011/07/23/reengineering-directcanvas/)的 C++ DirectCanvas 代码(SpriteInstanced.cpp) 中执行此操作。这可以编写大量代码，但结果*非常*高效（我什至在着色器中进行矩阵运算以提高速度）。

另一种可能更简单的方法是[试一试 DirectXTK](http://blogs.msdn.com/b/chuckw/archive/2012/03/02/directxtk.aspx) spritebatch。

我在这个[项目](http://jeremiahmorrill.wordpress.com/2012/04/25/gpu-accelerated-media-effects-in-windows-8-metro/)中使用了它......仅用于一个简单的 blit，但它可能是一个很好的开始，可以看到使用 spritebatch 所需的少量设置。

另外，如果可能的话，尝试“atlas”你的纹理。例如，尝试将尽可能多的“图像”放入纹理中并从中进行 blit，而不是为每个纹理设置一个纹理。

# jquery - jquery fadeIn() 的结尾在 Chrome 中有一个“凹凸”

> ID：10856728
> 
> 赞同：2
> 
> 时间：2012-06-01T20:10:31.660
> 
> 标签：jquery, fadein

我在 Chrome 中使用了一个非常简单的淡入淡出和淡入淡出。我只希望一个文本元素淡出，另一个淡入。工作示例：http: [//jsfiddle.net/forgetcolor/7eR5Q/](http://jsfiddle.net/forgetcolor/7eR5Q/)

我遇到的问题是在fadeIn() 结束时突然过渡到结束状态。我称它为“颠簸”。元素平滑地淡入淡出，但在最后它失去了平滑度并一次完成了淡入淡出。

有没有办法避免这种情况？

```
var cur = 1;
$('#btn').click(function() {

    if (cur == 1) {
        $('#txt1').fadeOut(500, function() {
            $('#txt2').fadeIn(500);
        });
        cur = 2;
    } else if (cur == 2) {
        $('#txt2').fadeOut(500, function() {
            $('#txt1').fadeIn(500);
        });
        cur = 1;
    }
});​

body {
    background-color:#666;
    color:white;
    font-size:20px;
    margin:20px;
}
#txt2 {display:none;}​

<div id="txt1">txt1</div>
<div id="txt2">txt2</div>
<br/><div id="btn">btn</div>​ 
```

更新：

这是一个视频：[http ://www.youtube.com/watch?v=n2IGED0pkVg](http://www.youtube.com/watch?v=n2IGED0pkVg)

我在 OSX 上的 Chrome 版本号是 20.0.1132.21 beta（现在最新）

提交的 Chrome 错误报告：[https ://code.google.com/p/chromium/issues/detail?id=130801](https://code.google.com/p/chromium/issues/detail?id=130801)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:35:33.037

如果我继续关闭 webkit 字体平滑，溶解效果很好：http: [//jsfiddle.net/7eR5Q/19/](http://jsfiddle.net/7eR5Q/19/) 所以显然它在过渡期间删除了平滑并在导致“凹凸”后添加它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:14:11.220

如果您觉得淡入太快，请将时间增加到 600，

```
$('#txt1').fadeIn(600); and $('#txt2').fadeIn(600); 
```

对我来说似乎更甚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:59:24.043

这似乎是 Macbook 上字体平滑渲染 *的*问题。这是[来自它的stackoverflow](https://apple.stackexchange.com/questions/36752/problems-with-font-rendering-on-a-macbook-pro-using-external-24-lcd?answertab=votes#tab-top)的一个问题。

**编辑：**您可以在*抗锯齿*（[规范](http://www.w3.org/TR/WD-font/#font-smooth-prop)）模式下使用*字体平滑来改善字体渲染。*这里有[一篇文章](http://www.usabilitypost.com/2012/11/05/stop-fixing-font-smoothing)为什么你一般不应该使用它。

 *`-webkit-font-smoothing: antialiased;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-07T03:23:05.913

对于遇到此问题的未来用户，我发现此解决方案对我有用。

```
-webkit-opacity: .99; 
```*

# asp.net - 自定义会员提供者 asp.net

> ID：10856732
> 
> 赞同：0
> 
> 时间：2012-06-01T20:10:52.030
> 
> 标签：asp.net, sqlmembershipprovider

我有一个已经使用默认 aspnet 会员提供程序构建的网站。我正在寻找扩展它以稍微修改功能。

据我了解，我想创建一个从成员资格类继承的自定义成员资格提供程序，然后重载这些函数。我做到了这一点，但我无法弄清楚如何调用原始验证用户。

我的目标是将验证用户更改为...

```
public override bool ValidateUser(string userName, string password)
    {
        if(base.ValidateUser(userName, password))
        {
          \\Write to database that User logged in
          return true;
        }
        return false;
    } 
```

但是，当我尝试这样做时， base.ValidateUser(x,y) 抛出了错误。我将如何去实现我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:32:52.233

我的猜测是你继承了抽象`MembershipProvider`类。如果是这样，那么调用基类方法当然是不可能的，因为抽象类中没有实现。

另一方面，如果要调用基类方法，则必须从适当的基类继承，例如`SqlMembershipProvider`.

# c# - 升级到 silverlight 5 后的图像 AG_E_NETWORK_ERROR

> ID：10856736
> 
> 赞同：0
> 
> 时间：2012-06-01T20:11:12.407
> 
> 标签：c#, silverlight, silverlight-4.0, silverlight-5.0

当某些图像最初不存在时，我在 ListBox 上显示图像列表时遇到问题。

创建丢失的图像后，我尝试重新加载它们，但我仍然得到 AG_E_NETWORK_ERROR。此外，我确定图像存在，因为我正在从我拥有的闪存加载它们，并且我正在加载我的 Silverlight 应用程序，`D:\Work\SilverlightApplication2\SilverlightApplication2\Bin\Debug\SilverlightApplication2TestPage.html`因此没有其他奇怪的 mambo-jumbo 正在发生。

**此设置适用于 Silverlight 4，但不适用于 Silverlight 5。**

[这是完整的示例代码](http://bit.ly/JFaVsR "这是完整的示例代码")

更多细节：

我用 ListBox 创建了一个 Silverlight 应用程序。ListBox 绑定到列表中`ObservableCollection`的`ThumbnailItem`每个项目，具有一个`ThumbnailPath`属性，该属性是图像路径的字符串。

该文件`ThumbnailPath`最初可能不存在，但是当我确定它存在时，我会调用该 `PropertyChanged`事件来通知绑定`ThumbnailPath`更改的人。

一个简单的测试方法是在不插入闪存驱动器的情况下加载 Silverlight 应用程序。图像加载失败后，我插入闪存驱动器并点击刷新按钮。

```
public class ThumbnailItem : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public string ThumbnailPath { get; set; }
    public void NotifyThumbnailPathChanged() { if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs("ThumbnailPath")); }
}

public partial class MainPage : UserControl, INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public ObservableCollection<ThumbnailItem> lImages { get; set; }

    public MainPage() { ... }

    private void userControl_Loaded(object sender, System.Windows.RoutedEventArgs e)
    {
        //loading the list items            

        lImages.Add(new ThumbnailItem { ThumbnailPath = "F:/onlinePhotos2/262594030.jpg" });
        lImages.Add(new ThumbnailItem { ThumbnailPath = "F:/onlinePhotos2/1276943735.jpg" });
        lImages.Add(new ThumbnailItem { ThumbnailPath = "F:/onlinePhotos2/1632696970.jpg" });
        lImages.Add(new ThumbnailItem { ThumbnailPath = "F:/onlinePhotos2/1656387141.jpg.original.jpg" });
        lImages.Add(new ThumbnailItem { ThumbnailPath = "F:/onlinePhotos2/1699209377.jpg" });
    }

    private void ButtonRefresh_Click(object sender, System.Windows.RoutedEventArgs e)
    {
        //refreshing the list after the images exist 

        foreach (ThumbnailItem tsi in lImages)
        {
            string temp = tsi.ThumbnailPath;
            tsi.ThumbnailPath = null;
            tsi.NotifyThumbnailPathChanged();

            tsi.ThumbnailPath = temp;
            tsi.NotifyThumbnailPathChanged();
        }
    }
} 
```

**TL; 博士；如何重新加载绑定到不存在但现在确实存在的图像**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:14:44.870

`Image AG_E_NETWORK_ERROR`

图像参考路径错误（或）图像未放置在 client-bin 文件夹中。`Image AG_E_NETWORK_ERROR`这些是在 Silverlight中的原因

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T20:34:03.050

这段代码的结构有点奇怪。为什么您将更改通知设置在 ThumnailItem 类之外？通常的方法是跳过使用自动属性并在公共字符串 ThumbnailPath 中拆分设置器，以便它调用更改通知本身。这也将有助于您的 Loaded 事件，其中更改通知永远不会触发，尽管此时控件已经绑定到集合。

像这样：

```
public class ThumbnailItem : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private string _thumbnailPath;
    public string ThumbnailPath 
    {
        get { return _thumbnailPath; }
        set
        {
            if (value == null || _thumbnailPath != value)
            {
                _thumbnailPath = value;

                NotifyPropertyChanged("ThumbnailPath");
            }
        }
    }
    protected void NotifyPropertyChanged(string propertyName) 
    { 
        if (PropertyChanged != null) 
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName)); 
    }
} 
```

是否显示*任何*图像？我不这么认为，因为您是从网页上的插件中的 F 驱动器加载的。您正在跨方案访问文件（http 托管，但文件是本地文件），并且您正在访问沙箱外的文件。

要从 F 驱动器加载，您需要是一个在浏览器外运行的*受信任应用程序。*您的项目是面向 Silverlight 4 运行时的浏览器内不受信任的应用程序。我不希望这可以在具有 SL4 或 SL5 运行时的 Silverlight 4 中工作。这段代码不可能像写的那样工作。

希望有帮助。

皮特

[注意：这一切都是在没有意识到他正在从 file:// 加载 Silverlight 应用程序的情况下编写的——这不是一种常见的方法]

# php - JS 和 PHP 相同的 md5

> ID：10856743
> 
> 赞同：3
> 
> 时间：2012-06-01T20:11:41.717
> 
> 标签：php, javascript, md5

对于一个小项目，我需要为 JS 和 PHP 提供相同的 md5 哈希值。我使用[此](http://pajhome.org.uk/crypt/md5/instructions.html)javascript 将单词转换为 md5（.min 版本）

单词“你好”输出

**JS**：ec59d44dee488759467970486fc9402d

**PHP** : 5d41402abc4b2a76b9719d911017c592

所以它们并不相同。我尝试使用`md5(utf8_encode($word));`而不是`md5($word);`

但两者都给出了相同的结果。

有任何想法吗？非常感谢帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T20:16:03.767

[phpjs](http://phpjs.org/)上的[md5](http://phpjs.org/functions/md5)函数给出了正确的结果。它依赖于[utf8_encode](http://phpjs.org/functions/utf8_encode)，所以你也需要它。

# linux - 在 shell 脚本中查找和替换

> ID：10856749
> 
> 赞同：12
> 
> 时间：2012-06-01T20:12:25.370
> 
> 标签：linux, shell, scripting

是否可以使用 shell 在文件中搜索然后替换一个值？当我安装服务时，我希望能够在配置文件中搜索出一个变量，然后在该值中替换/插入我自己的设置。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-01T20:16:53.590

当然，您可以使用 sed 或 awk 执行此操作。sed 示例：

```
sed -i 's/Andrew/James/g' /home/oleksandr/names.txt 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-01T22:23:34.043

您可以使用 sed 执行搜索/替换。我通常从 bash shell 脚本执行此操作，并将包含要替换的值的原始文件移动到一个新名称，然后运行 ​​sed 将输出写入我的原始文件名，如下所示：

```
#!/bin/bash
mv myfile.txt myfile.txt.in

sed -e 's/PatternToBeReplaced/Replacement/g' myfile.txt.in > myfile.txt. 
```

如果您不指定输出，则替换将转到标准输出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T20:18:30.050

```
sed -i 's/variable/replacement/g' *.conf 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T20:17:54.027

您可以使用 sed 来执行此操作：

```
sed -i 's/toreplace/yoursetting/' configfile 
```

sed 可能在每个类似 unix 的系统上都可用。如果要替换多个出现，可以将 ag 添加到 s 命令：

```
sed -i 's/toreplace/yoursetting/g' configfile 
```

请小心，因为如果您没有正确指定 toreplace-value，这可能会完全破坏您的配置文件。sed 还支持搜索和替换中的正则表达式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T20:23:37.470

查看[UNIX 电动工具](https://www.google.bg/search?q=UNIX%20power%20tools) **awk、sed、grep**和使用 Perl[就地编辑文件。](http://www.unixguide.net/unix/perl_oneliners.shtml)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-01T22:14:23.457

```
filepath="/var/start/system/dir1"
searchstring="test"
replacestring="test01"

i=0; 

for file in $(grep -l -R $searchstring $filepath)
do
  cp $file $file.bak
  sed -e "s/$searchstring/$replacestring/ig" $file > tempfile.tmp
  mv tempfile.tmp $file

  let i++;

  echo "Modified: " $file
done 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-01T20:17:19.007

通常为此使用 awk 或 sed 之类的工具。

```
$ sed -i 's/ugly/beautiful/g' /home/bruno/old-friends/sue.txt 
```

# java - 当类存在于类路径中时，如何防止隐式 Java 编译？

> ID：10856750
> 
> 赞同：6
> 
> 时间：2012-06-01T20:12:40.970
> 
> 标签：java, classpath, javac

假设我有两个类（鲍勃和汤姆），鲍勃使用汤姆，但汤姆不需要鲍勃。这两个文件都位于相同的目录结构中。

```
public class Bob {
  public static void main(String[] args) {
    System.out.println(Tom.MESSAGE);
  }
}

public class Tom {
  public static String MESSAGE = "Hello World";
} 
```

如果我尝试以典型方式编译 Bob，我也可以让它隐式编译`Tom.java`，因为它被识别为`Bob.java`. 这很好用。

但是现在假设我想将 Tom 放在一个 JAR 文件中。所以我构建`Tom.java`并将结果放入一个 JAR 文件：libTom.jar。我现在用指向的类路径进行编译`libTom.jar`。不幸的是，编译器看到该`Tom.java`文件并导致它被编译，而不是使用`libTom.jar`. 有没有办法让编译器跳过在`Tom.java`类路径中找到类的隐式构造？

我承认这个例子是相当做作的。请放心，围绕这个问题有一个更复杂、更少人为的用例。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:31:26.437

如果类路径中有两个同名且在同一个包中的类，那么当java编译代码时，很难预测哪一个会被拾取。如果`Tom`该类存在于源本身中，它肯定会被拾取。

避免这种情况的一种方法是将其中一个`Tom`s 放在不同的包中。另一种方法是，如果你可以将你的当前移动`Tom`到一个单独的项目。我知道其中任何一个对您来说可能都不实用。如果确实有必要，您可以尝试编写自己的 ClassLoader。请参阅此问题以供参考：[Jar hell: how to use a classloader to replace one jar library version with another at runtime](https://stackoverflow.com/questions/6909306/jar-hell-how-to-use-a-classloader-to-replace-one-jar-library-version-with-anoth)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T06:17:43.820

It appears that this just isn't possible, which is what I feared from the beginning.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:29:22.170

是的，你可以通过输入一个类的全名来做到这一点，即 Typing

System.out.println(the.package.of.external.Tom.MESSAGE);
System.out.println(the.current.package.Tom.MESSAGE);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T20:43:48.367

Can you split the java files into separate source directories? This would make sense as you could build your jar from the contents of one source dir, then just include the other source dir when compiling all the other set of files. This works well in Eclipse. Even better would be to use two projects in Eclipse.

# objective-c - 如何允许 NSMutableDictionary 接受“nil”值？

> ID：10856753
> 
> 赞同：20
> 
> 时间：2012-06-01T20:12:56.673
> 
> 标签：objective-c

我有这样的声明：

```
 [custData setObject: [rs stringForColumnIndex:2]  forKey: @"email"]; 
```

其中`[rs stringForColumnIndex:2]`从 SQLite3 d/b 获得的值为`nil`. 该应用程序崩溃给我错误：

```
NSCFDictionary setObject:forKey:]: attempt to insert nil value (key: email)' 
```

有没有办法防止这种情况？（比如设置`NSMutableDictionary`？）

更新：这就是我最终所做的：

```
[custData setObject: ([rs stringForColumnIndex:2] != nil? [rs stringForColumnIndex:2]:@"") forKey: @"email"]; 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-01T20:16:42.467

有一个非`nil`对象称为[`NSNull`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNull_Class/Reference/Reference.html)，它专门用于在“普通”不可接受`nil`的情况下表示 s 。`nil`如果你用对象替换你`nil`的 s ，就会拿走它们。不过，您需要在外出时检查。`[NSNull null]``NSDictionary``NSNull`

请注意，仅当您必须区分未设置的值和设置为的值时，这才重要`nil`。如果您的代码可以将缺失值*解释*为`nil`，则根本不需要使用`NSNull`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-19T05:00:47.710

使用纯 NSMutableDictionary 是不可能的，并且在大多数情况下，您希望将 nil 值转换为`[NSNull null]`或只是从字典中省略它们。但是，有时（很少）允许 nil 值很方便，在这种情况下，您可以使用 CFMutableDictionary 和自定义回调。

如果您采用这种方式，我建议您使用 CoreFoundation API 进行所有访问，例如`CFDictionarySetValue`和`CFDictionaryGetValue`.

但是，如果您知道自己在做什么，则可以使用免费桥接并将 CFMutableDictionary 转换为 NSMutableDictionary 或 NSDictionary。如果您有一堆接受 NSDictionary 的助手，并且您想在修改后的支持 nil 的字典上使用它们，这可能会很有用。（当然，确保助手不会对 nil 值感到惊讶。）

如果您进行桥接，请注意：

1) NSMutableDictionary setter 在桥接之前会在 nil 值上引发错误，因此您需要使用 CFDictionarySetValue 来设置可能为 nil 的值。

2) 从技术上讲，我们在这里违反了 NSMutableDictionary 的合同，并且事情可能会中断（例如，在未来的操作系统更新中）

3) 很多代码在字典中找到 nil 值会非常惊讶；您应该只将桥接的 frankendictionaries 传递给您控制的代码

有关为什么桥接的 CFDictionary 与 NSDictionary 的行为不同的解释，请参阅[荒谬的鱼关于免费桥接的帖子。](http://ridiculousfish.com/blog/posts/bridge.html)

例子：

```
#import <Foundation/Foundation.h>

const void *NullSafeRetain(CFAllocatorRef allocator, const void *value) {
    return value ? CFRetain(value) : NULL;
}
void NullSafeRelease(CFAllocatorRef allocator, const void *value) {
    if (value)
        CFRelease(value);
}
const CFDictionaryValueCallBacks kDictionaryValueCallBacksAllowingNULL = {
    .version = 0,
    .retain = NullSafeRetain,
    .release = NullSafeRelease,
    .copyDescription = CFCopyDescription,
    .equal = CFEqual,
};

int main(int argc, const char * argv[])
{
    @autoreleasepool {
        CFMutableDictionaryRef cfdictionary = CFDictionaryCreateMutable(NULL, 0, &kCFTypeDictionaryKeyCallBacks, &kDictionaryValueCallBacksAllowingNULL);
        CFDictionarySetValue(cfdictionary, @"foo", @"bar");
        CFDictionarySetValue(cfdictionary, @"boz", nil);

        NSMutableDictionary *dictionary = CFBridgingRelease(cfdictionary);
        NSLog(@"dictionary[foo] = %@", dictionary[@"foo"]);
        NSLog(@"dictionary[foo] = %@", dictionary[[@"fo" stringByAppendingString:@"o"]]);
        NSLog(@"dictionary[boz] = %@", dictionary[@"boz"]);
        NSLog(@"dictionary = %@", dictionary);
        NSLog(@"(dictionary isEqualTo: dictionary) = %d", [dictionary isEqualToDictionary:dictionary]);
    }
    return 0;
} 
```

输出：

```
dictionary[foo] = bar
dictionary[foo] = bar
dictionary[boz] = (null)
dictionary = {
    boz = (null);
    foo = bar;
}
(dictionary isEqualTo: dictionary) = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-07T09:14:42.667

我需要将一个`NSDictionary`值设置为可能或尚未设置的值`NSUserDefaults`。

我所做的是将值包装在一个`stringwithFormat`调用中。这两个值都还没有设置，所以从 null 开始。当我在没有`stringwithFormat`调用的情况下运行时，应用程序崩溃。所以我这样做了，在我的情况下工作。

```
-(NSDictionary*)userDetailsDict{
NSDictionary* userDetails = @{
                              @"userLine":[NSString stringWithFormat:@"%@",[[NSUserDefaults standardUserDefaults]stringForKey:kSelectedLine] ],
                              @"userDepot":[NSString stringWithFormat:@"%@",[[NSUserDefaults standardUserDefaults]stringForKey:@"kSelected Duty Book"]]
                              };

return userDetails;
} 
```

# python - Python：如何使用来自另一个文件的参数执行外部程序？

> ID：10856759
> 
> 赞同：1
> 
> 时间：2012-06-01T20:13:30.893
> 
> 标签：python, subprocess, external-process

我正在尝试编写一个 python 脚本来执行带有从另一个文件导入的参数的命令行程序。该程序的命令行界面工作方式如下： ./executable.x parameter(a) parameter(b) parameter(c) ...

我的代码是：

```
#program to pass parameters to softsusy
import subprocess
#open parameter file
f = open('test.dat', 'r')
program = './executable.x'
#select line from file and pass to program
for line in f:
    subprocess.Popen([program, line]) 
```

test.dat 文件如下所示：

```
param(a) param(b) param(c)... 
```

该脚本调用该程序，但它不传递变量。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:16:15.920

你要：

```
line=f.readline()
subprocess.Popen([program]+line.split()) 
```

您当前拥有的内容会将整行作为单个参数传递给程序。（就像在 shell 中调用它一样`program "arg1 arg2 arg3"`

当然，如果你想为文件中的每一行调用一次程序：

```
with open('test.dat','r') as f:
for line in f:
    #you could use shlex.split(line) as well -- that will preserve quotes, etc.
    subprocess.Popen([program]+line.split()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:24:37.930

首先，对于您的情况，使用 subprocess.call() 而不是 subprocess.popen()

至于“未通过参数”，您的脚本中没有任何明显错误。尝试将整个内容连接成长字符串并将字符串提供给 .call() 而不是列表。

```
subprocess.call( program + " " + " ".join(line) ) 
```

您确定它`line`包含您希望它包含的数据吗？

为了确保，（如果源文件很短）尝试将文件显式转换为列表并确保“行”中有数据：

```
for line in file.readlines():
    if len(line.trim().split(" ")) < 2:
        raise Exception("Where are my params?") 
```

# clojure - 一流的类/记录实例化

> ID：10856761
> 
> 赞同：4
> 
> 时间：2012-06-01T20:13:48.997
> 
> 标签：clojure

我有一个记录/类序列，并且我`map`在该序列上使用`new`并期望获得这些记录/类的一系列实例。我知道这`new`是一种特殊的形式，但我期待 Clojure 在这种情况下做正确的事情。

但这不起作用：

```
(map new [SomeClass1 SomeClass2 SomeClass3]) 
```

这个也不行。

```
(map #(new %) [SomeClass1 SomeClass2 SomeClass3]) 
```

类似的代码适用于[Factor](http://factorcode.org/)。

```
{ SomeClass1 SomeClass2 SomeClass3 } [ new ] map 
```

在 Clojure 中执行此操作的正确方法是什么？（我希望它不会涉及`Class.newInstance`丑陋。）

**编辑：**

以下工作，但可能比必要的要慢。（我不确定。我会很感激这方面的一些信息。）

```
(map #(eval `(new ~%)) [SomeClass1 SomeClass2 SomeClass3]) 
```

我也在寻找更优雅的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T20:34:35.303

因为特殊形式很好......特别它们不是一流的，也不像正确的函数那样组成，你可以用 eval 和宏来解决这个问题：

使用 eval 的解决方案：

```
(defn fnew [c] (eval `(new ~c))) 
hello.core> (map fnew ['Exception 'java.lang.String])
(#<Exception java.lang.Exception> "") 
```

以及一个将参数传递给构造函数的版本：

```
(defn fnew [c] (eval `(new ~@c))) 

hello.core> (map fnew ['(Exception) '(java.lang.String "I am a contructor argument")])
(#<Exception java.lang.Exception> "I am a contructor argument")

(map fnew [ [Exception] [(class "foo") "I am a contructor argument"]])
(#<Exception java.lang.Exception> "I am a contructor argument") 
```

这是一个宏示例

```
hello.core> (defmacro newify [classes] (apply vector (for [c classes] `(new ~c))))
#'hello.core/newify

hello.core> (macroexpand '(newify [java.lang.String Exception]))
[(new java.lang.String) (new Exception)]

hello.core>  (newify [java.lang.String Exception])
["" #<Exception java.lang.Exception>] 
```

宏版本可能更有效，而 eval 版本更灵活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T08:52:45.237

作为`new`一种特殊形式，使其像一流一样工作的解决方案之一是使用 clojure 低级调用，例如：

```
(map #(clojure.lang.Reflector/invokeConstructor %1 (into-array [])) [String]) 
```

这可能会导致反射的性能问题，因此基于宏的解决方案比这更受欢迎。

# javascript - 计算线是否穿过圆，在某些角度出现奇怪的行为

> ID：10856768
> 
> 赞同：0
> 
> 时间：2012-06-01T20:14:13.240
> 
> 标签：javascript, math, angle

好的，我希望能够计算一条线是否穿过一个圆（至少是圆内线的一部分）。我找到了几个答案，但我认为它们太复杂了，所以我想出了这个。我不是数学家，所以我现在有点卡住了。当直线垂直对齐时，“半径 >= Math.sqrt(len * len + len * len - o);” 变为真（45°角变为0）。我不知道为什么会这样。谢谢 ：）

```
function lineInCircle(sx, sy, x, y, cx, cy, radius) {
    cx -= sx; x -= sx; //sx is the first point's x position
    cy -= sy; y -= sy;//sy is the first point's y position
    len = Math.sqrt((cy * cy) + (cx * cx))//hypotenuse of circle (cy, cx) to (0, 0) (with offset)
    atanx = Math.atan(y / x); //angle of  (0, 0) to (x, y) in radians
    atany = atanx - Math.atan(cy / cx); //to center
    var o = 2 * len * len * Math.cos(atany);
    var o = o < 0 ? -o:o//Had to do this, at some point the value can become inverted
    return radius >= Math.sqrt(len * len + len * len - o);
} 
```

**编辑：**

```
function lineInCircle(sx, sy, x, y, cx, cy, radius) {
    cx -= sx; x -= sx; //sx is the first point's x position
    cy -= sy; y -= sy;//sy is the first point's y position
    ctp = Math.sin(Math.atan(y / x) - Math.atan(cy / cx)) * Math.sqrt((cy * cy) + (cx * cx));
    return radius >= ctp && ctp >= -radius;
} 
```

工作原理几乎相同，但速度更快。问题是它计算了一条无限线。我将如何解决这个问题？

**编辑2：**

```
function lineInCircle(sx, sy, x, y, cx, cy, radius) {
    cx -= sx; x -= sx;
    cy -= sy; y -= sy;
    var h = Math.sqrt(cy * cy + cx * cx)
    ctp = Math.sin(Math.atan(y / x) - Math.atan(cy / cx)) * h;
    sideb = Math.sqrt(h * h - ctp * ctp);
    line = Math.sqrt(x * x + y * y)
    if (sideb - radius > line) {return false}
    return radius >= ctp && ctp >= -radius;
} 
```

部分修复，从线的一个方向（线端）不会继续无穷大

**编辑3：** 有点长，但快两倍以上，回到第一格

```
function lineInCircle2(sx, sy, x, y, cx, cy, radius) {
    var ysy = y - sy
    var xsx = x - sx
    var k = ((y-sy) * (cx-sx) - (x-sx) * (cy-sy)) / (ysy * ysy + xsx * xsx)
    var ncx = cx - k * (y-sy)
    var ncy = cy + k * (x-sx)
    ncx -= cx
    ncy -= cy
    var ctp = Math.sqrt(ncx * ncx + ncy * ncy)
    return radius >= ctp && ctp >= -radius;
} 
```

**编辑4：** 成功！

```
function lineInCircle(sx, sy, x, y, cx, cy, radius) {
    if (sx > cx + radius && x > cx + radius || x < cx - radius && sx < cx - radius) {return false;}
    if (sy > cy + radius && y > cy + radius || y < cy - radius && sy < cy - radius) {return false;}
    var k = ((y - sy) * (cx - sx) - (x - sx) * (cy - sy)) / ((y - sy) * (y - sy) + (x - sx) * (x - sx))
    var ncx = k * (y - sy)
    var ncy = k * (x - sx)
    return radius >= Math.sqrt(ncx * ncx + ncy * ncy);
} 
```

完全符合我的要求，我将 100000000 次迭代的时间优化到 4.5 - 4.6 秒，而第一个版本的迭代时间为 10 多秒，并且仍然更加准确（意味着在某些角度不再有奇怪的行为）。我很满意 :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T19:51:46.197

```
function lineInCircle(sx, sy, x, y, cx, cy, radius) {
    if (sx > cx + radius && x > cx + radius || x < cx - radius && sx < cx - radius) {return false;}
    if (sy > cy + radius && y > cy + radius || y < cy - radius && sy < cy - radius) {return false;}
    var k = ((y - sy) * (cx - sx) - (x - sx) * (cy - sy)) / ((y - sy) * (y - sy) + (x - sx) * (x - sx))
    var ncx = k * (y - sy)
    var ncy = k * (x - sx)
    return radius >= Math.sqrt(ncx * ncx + ncy * ncy);
} 
```

在我的机器上完成 100000000 次迭代大约需要 4.5 - 4.6 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:41:25.333

太多的工作。找到通过中心的法线，看看交点是否比半径更近。

# javascript - 在特定内容类型的节点创建上执行 JavaScript

> ID：10856769
> 
> 赞同：1
> 
> 时间：2012-06-01T20:14:30.450
> 
> 标签：javascript, drupal, drupal-7

我想仅在一种特定内容类型的节点创建和节点编辑时执行 JavaScript 函数。这只是一个小的函数调用。

我们将 Drupal 7 内容类型称为“ `tear`”，JavaScript 函数称为“ `doitnow();`”

任何想法如何做到这一点？

非常感谢你。

尼尔斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T22:59:12.817

您必须创建自己的模块并实现[hook_node_insert()](http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_insert/7 "hook_node_insert")、[hook_node_update()](http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_update/7 "hook_node_update")和[hook_node_view()](http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_view/7 "hook_node_view")并采取适当的步骤。您还必须使用[Drupal 行为](http://drupal.org/node/756722#behaviors "Drupal 行为")创建一些 JavaScript 代码，并且您已准备好。您必须在节点创建/更新后使用临时会话变量，因为这样您可以在 hook_node_view 中检查此变量的存在，并添加“告诉”新的“撕裂”内容已添加的 JS 设置。

### [您可以在此处下载整个模块。](http://www.mediafire.com/?o7pa0a6cbg0tgze "测试模块")

你必须把这个模块放到`sites/all/modules/testModule`目录中。

好的，这是模块的代码：

## `testModule.info`：

```
name = Test Customization Module
description = Customizing stuffs on the site...
core = 7.x
package = My modules

scripts[] = js/testModule.behaviors.js 
```

## `testModule.module`：

```
/**
 * Implements hook_node_insert()
 * 
 * @see http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_insert/7
 * @param object $node 
 */
function testModule_node_insert($node) {    
    switch ($node->type) {
        case 'tear':
            $_SESSION['tear_just_inserted'] = microtime();
            break;
    }
}

/**
 * Implements hook_node_update()
 * 
 * @see http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_update/7
 * @param object $node 
 */
function testModule_node_update($node) {
    switch ($node->type) {
        case 'tear':
            $_SESSION['tear_just_inserted'] = microtime();
            break;
    }
}

/**
 * Implements hook_node_view().
 */
function testModule_node_view($node, $view_mode, $langcode) {
    switch ($node->type) {
        case 'tear':
            // we call doitnow() if it's needed (if "tear" content was added before)
            if (isset($_SESSION['tear_just_inserted'])) {
                drupal_add_js(array('testModule' => array('tear_just_added' => TRUE)), 'setting');
                unset($_SESSION['tear_just_inserted']);
            }

            break;
    }
}

/**
 * Implements hook_overlay_child_initialize()
 * @see http://api.drupal.org/api/drupal/modules!overlay!overlay.api.php/function/hook_overlay_child_initialize/7
 */
function testModule_overlay_child_initialize() {
    // Add our custom JavaScript: we don't want the node/add/tear to appear on the overlay, because this way the JS setting doesn't get added properly
    drupal_add_js(drupal_get_path('module', 'testModule') . '/js/testModule.overlay.behaviors.js');
} 
```

## `js/testModule.behaviors.js`：

```
(function ($) {   
    Drupal.behaviors.testModule = {
        doitnow: function(){
            alert("A new \"tear\" content has just been added!");
        },

        attach: function (context, settings) {
            try{
                if(settings.testModule.tear_just_added){
                    this.doitnow();
                }
            } catch(ex){}
        }
    };
})(jQuery); 
```

## `js/testModule.overlay.behaviors.js`：

```
(function ($) {
    // Disable overlay for creating the "tear" node.
    Drupal.behaviors.testModule = {
        attach: function (context, settings) {
            var $tear_link = $('a[href*="node/add/tear"]'),
            tear_link_href = $tear_link.attr('href');
            if( $tear_link.length > 0 ) {
                // we want to avoid opening the content adding for "tear" content type in the overlay
                // so we open it in the current window
                $tear_link.unbind();
                $tear_link.click(function(e){
                    window.open(tear_link_href,'_self',false);
                    e.stopPropagation();
                })
            }    
        };
    }
})(jQuery); 
```

问有什么不是很清楚。

# php - Magento：将产品最大数量限制为每个订单 1 个。数量 2 = 2 个订单

> ID：10856770
> 
> 赞同：3
> 
> 时间：2012-06-01T20:14:31.500
> 
> 标签：php, zend-framework, magento, magento-1.6

是否可以将 Magento 中的特定产品限制为每个订单的最大数量？这意味着用户一次只能订购一种产品。如果他想订购两次产品，他必须进行第二次订购。这对我以后的订单工作流程非常重要。

谢谢你的帮助，我很感激！

亲切的问候，马努

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T22:10:23.713

**是的，您可以通过在编辑产品时编辑“库存**”选项卡上的值来限制购物车中产品的最大数量。请参阅下面的屏幕截图。在您的情况下，您需要取消选中`Use Config Settings`并将值设置为`1`.

![产品页面库存选项卡](../Images/7afef3d3868ebd7490e1fc2d0f241f48.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T09:56:18.500

上面的答案对于限制单个产品添加到购物车而不是限制购物车中允许的最大数量很有用。要更改此设置，请遵循以下步骤。

首先登录到 Magento 管理员，然后转到**系统>>配置**，然后使用此配置设置。

![在此处输入图像描述](../Images/5beb674d8387594d9fc4c8911a14ade8.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-24T13:21:43.303

看看@ [Magento Maximum Allowed Order Amount](http://inchoo.net/ecommerce/magento/magento-maximum-allowed-order-amount/)，您必须创建一个自定义模块来添加此功能。

创建一个观察者`sales_quote_save_before`

```
<config>
    <frontend>
        <events>
            <sales_quote_save_before>
                <observers>
                    <inchoo_maxorderamount_enforceSingleOrderLimit>
                        <class>inchoo_maxorderamount/observer</class>
                        <method>enforceSingleOrderLimit</method>
                    </inchoo_maxorderamount_enforceSingleOrderLimit>
                </observers>
            </sales_quote_save_before>
        </events>
    </frontend>
</config> 
```

在你的观察者中

```
class Inchoo_MaxOrderAmount_Model_Observer
{
    private $_helper;
    public function __construct()
    {
        $this->_helper = Mage::helper('inchoo_maxorderamount');
    }
    /**
     * No single order can be placed over the amount of X
     */
    public function enforceSingleOrderLimit($observer)
    {
        if (!$this->_helper->isModuleEnabled()) {
            return;
        }
        $quote = $observer->getEvent()->getQuote();
        if ($quote->getCart()->getItemsCount() == 1) {

            Mage::getSingleton('checkout/session')->addError('limit only one product per order');
            Mage::app()->getFrontController()->getResponse()->setRedirect(Mage::getUrl('checkout/cart'));
            Mage::app()->getResponse()->sendResponse();
            exit;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-30T13:33:12.417

以下应该可以解决您的问题：

```
public function enforceSingleOrderLimit($observer){
     if (!$this->_helper->isModuleEnabled()) {
        return;
    }
    $cart = Mage::getModel('checkout/cart')->getQuote();
    if ($cart->getItemsCount() > 1) {

        Mage::getSingleton('checkout/session')->addError('limit only one product per order');
        Mage::app()->getFrontController()->getResponse()->setRedirect(Mage::getUrl('checkout/cart'));
        Mage::app()->getResponse()->sendResponse();
        exit;
    }
} 
```

# javascript - 在 Javascript 循环期间强制重绘

> ID：10856776
> 
> 赞同：2
> 
> 时间：2012-06-01T20:15:13.823
> 
> 标签：javascript, html

我想在 Javascript 循环期间强制重绘。例如：

```
var s = document.getElementById("foo");
for (var i = 0; i < 10000; i++)
    s.innerText = i + " times"; 
```

最后更新，但我想观察每个中间步骤。对此问题的常见反应是使用`setTimeout`，但是，有三个原因是不可接受的：

*   页面上还有其他按钮/链接等，重要的是在循环运行时不能单击这些按钮/链接。
*   在循环结束时，我想显示一个弹出窗口，如果超时触发，那么标准弹出窗口阻止程序将隐藏它，因为它不再由用户启动。
*   如果用户在循环运行时单击，我希望该单击被缓冲直到循环完成，而不是在循环中途触发。

有没有办法强制浏览器重绘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:24:54.647

不过，恐怕这是您唯一的解决方案，因为中间不可重绘对于提高浏览器渲染速度的谓词很重要。

也许您可以在那些您不想触发的点击事件中管理一个缓冲区标志？或者更好的说法是不要缓冲我的标志......

我希望它有所帮助，最好的问候。

# python - 如何显示使用来自 vcs 的 pip 安装的 Python 包的 vcs 版本？

> ID：10856778
> 
> 赞同：1
> 
> 时间：2012-06-01T20:15:18.527
> 
> 标签：python, version-control, pip

在像这样从 vcs 安装一些带有 pip 的软件包后，
`pip install git+https://github.com/kennethreitz/requests.git@355b97165c#requests`
我如何显示用于安装它的 vcs 修订/提交/分支/标签（本例中为 355b97165c）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:15:18.713

目前没有办法做到这一点，因为安装期间使用的 url 没有被记录在任何地方。但是，添加此类功能的工作正在进行中。请参阅[持续功能/记录下载信息](https://github.com/pypa/pip/pull/507)拉取请求。

我要感谢#pip IRC 频道的 dstufft 回答我的问题并指出这个拉取请求（基于他的拉取请求）。

# java - WebSphere 5.1 到 6.1 迁移错误

> ID：10856781
> 
> 赞同：1
> 
> 时间：2012-06-01T20:15:30.707
> 
> 标签：java, web-services, websphere, axis

我正在开发一个使用 Axis 1 Web 服务的 Java 1.4 Web 应用程序。该应用程序调用由第三方合作伙伴开发和托管的 Web 服务。我们的生产环境正在运行 WebSphere 5.1，应用程序运行良好。出于安全原因，我们需要将服务器从 5.1 迁移到 6.1。我们首先将开发环境升级到 6.1。在我们的开发环境中，除了 WebSphere 迁移之外，我们还决定将应用程序更新到 Java 1.5。dev 上的应用程序运行良好。所有 Web 服务调用都正确执行，除了一个。此特定调用始终返回以下错误。

**使用编码样式“http://schemas.xmlsoap.org/soap/encoding/”找不到“http://schemas.xmlsoap.org/soap/encoding/:string”的映射**

有谁知道为什么除了这个之外所有的 WS 都可以工作？我没有更改代码库，只是我使用的是什么版本的编译器。由于它适用于产品，我不确定我能做些什么来搞乱开发。

我的 Google-Fu 在这一点上让我失望了。非常感谢您提供的任何信息！

WSDL

```
 <?xml version = '1.0' encoding = 'UTF-8'?>
<!--Generated by the Oracle JDeveloper 10g Web Services WSDL Generator-->
<!--Date Created: Thu Jul 08 13:27:58 PDT 2004-->
<definitions
   name="CSIWebService"
   targetNamespace="http://mil/dcma/csi/ws/CSIWebService.wsdl"
   xmlns="http://schemas.xmlsoap.org/wsdl/"
   xmlns:xsd="http://www.w3.org/2001/XMLSchema"
   xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
   xmlns:tns="http://mil/dcma/csi/ws/CSIWebService.wsdl"
   xmlns:ns1="http://mil.dcma.csi.ws/ICSIWebService.xsd">
   <types>
      <schema
         targetNamespace="http://mil.dcma.csi.ws/ICSIWebService.xsd"
         xmlns="http://www.w3.org/2001/XMLSchema"
         xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/">
         <complexType name="mil_dcma_csi_ws_WSCSIServiceResponse" jdev:packageName="mil.dcma.csi.ws" xmlns:jdev="http://xmlns.oracle.com/jdeveloper/webservices">
            <all>
               <element name="results" type="ns1:ArrayOfmil_dcma_csi_ws_WSContract"/>
               <element name="comments" type="ns1:mil_dcma_csi_ws_WSStatusCommentary"/>
            </all>
         </complexType>
         <complexType name="mil_dcma_csi_ws_WSContract" jdev:packageName="mil.dcma.csi.ws" xmlns:jdev="http://xmlns.oracle.com/jdeveloper/webservices">
            <all>
               <element name="cage" type="string"/>
               <element name="dodaac" type="string"/>
               <element name="latestModDate" type="string"/>
               <element name="lineItemIds" type="ns1:ArrayOfString"/>
               <element name="lineItems" type="ns1:ArrayOfmil_dcma_csi_ws_WSLineItem"/>
               <element name="piinDodaac" type="string"/>
               <element name="piinSerial" type="string"/>
               <element name="piinType" type="string"/>
               <element name="piinYear" type="string"/>
               <element name="spiin" type="string"/>
            </all>
         </complexType>
         <complexType name="ArrayOfString" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
            <complexContent>
               <restriction base="SOAP-ENC:Array">
                  <attribute ref="SOAP-ENC:arrayType" wsdl:arrayType="xsd:string[]"/>
               </restriction>
            </complexContent>
         </complexType>
         <complexType name="mil_dcma_csi_ws_WSLineItem" jdev:packageName="mil.dcma.csi.ws" xmlns:jdev="http://xmlns.oracle.com/jdeveloper/webservices">
            <all>
               <element name="fobSite" type="string"/>
               <element name="inspectAcceptCode" type="string"/>
               <element name="itemName" type="string"/>
               <element name="lineItemId" type="string"/>
               <element name="nsn" type="string"/>
               <element name="partNumber" type="string"/>
               <element name="piin" type="string"/>
               <element name="quantityAccepted" type="int"/>
               <element name="quantityShipped" type="int"/>
               <element name="serviceCompletionDate" type="string"/>
               <element name="serviceCompletionEstimatedFlag" type="string"/>
               <element name="spiin" type="string"/>
               <element name="spnRecipient" type="string"/>
               <element name="totalUnits" type="int"/>
               <element name="totalUnitsEstimatedFlag" type="string"/>
               <element name="unitCost" type="double"/>
               <element name="unitCostEstimatedFlag" type="string"/>
               <element name="unitOfMeasure" type="string"/>
               <element name="varianceOver" type="double"/>
               <element name="varianceUnder" type="double"/>
               <element name="schedules" type="ns1:ArrayOfmil_dcma_csi_ws_WSSchedule"/>
               <element name="shipments" type="ns1:ArrayOfmil_dcma_csi_ws_WSShipment"/>
            </all>
         </complexType>
         <complexType name="mil_dcma_csi_ws_WSSchedule" jdev:packageName="mil.dcma.csi.ws" xmlns:jdev="http://xmlns.oracle.com/jdeveloper/webservices">
            <all>
               <element name="clin" type="string"/>
               <element name="deliveryDate" type="string"/>
               <element name="deliveryDateEstimatedFlag" type="string"/>
               <element name="elin" type="string"/>
               <element name="lineItemId" type="string"/>
               <element name="markFor" type="string"/>
               <element name="milStrip" type="string"/>
               <element name="modNumber" type="string"/>
               <element name="piin" type="string"/>
               <element name="schedQuantityEstimatedFlag" type="string"/>
               <element name="scheduledQuantity" type="int"/>
               <element name="shipTo" type="string"/>
               <element name="spiin" type="string"/>
            </all>
         </complexType>
         <complexType name="ArrayOfmil_dcma_csi_ws_WSSchedule" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
            <complexContent>
               <restriction base="SOAP-ENC:Array">
                  <attribute ref="SOAP-ENC:arrayType" wsdl:arrayType="ns1:mil_dcma_csi_ws_WSSchedule[]"/>
               </restriction>
            </complexContent>
         </complexType>
         <complexType name="mil_dcma_csi_ws_WSShipment" jdev:packageName="mil.dcma.csi.ws" xmlns:jdev="http://xmlns.oracle.com/jdeveloper/webservices">
            <all>
               <element name="acceptanceSite" type="string"/>
               <element name="dateAccepted" type="string"/>
               <element name="dateShipped" type="string"/>
               <element name="fobSite" type="string"/>
               <element name="lineItemId" type="string"/>
               <element name="markFor" type="string"/>
               <element name="milStrip" type="string"/>
               <element name="piin" type="string"/>
               <element name="pqaSite" type="string"/>
               <element name="quantityAccepted" type="int"/>
               <element name="quantityShipped" type="int"/>
               <element name="shipmentNumber" type="string"/>
               <element name="spiin" type="string"/>
               <element name="unitOfMeasure" type="string"/>
            </all>
         </complexType>
         <complexType name="ArrayOfmil_dcma_csi_ws_WSShipment" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
            <complexContent>
               <restriction base="SOAP-ENC:Array">
                  <attribute ref="SOAP-ENC:arrayType" wsdl:arrayType="ns1:mil_dcma_csi_ws_WSShipment[]"/>
               </restriction>
            </complexContent>
         </complexType>
         <complexType name="ArrayOfmil_dcma_csi_ws_WSLineItem" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
            <complexContent>
               <restriction base="SOAP-ENC:Array">
                  <attribute ref="SOAP-ENC:arrayType" wsdl:arrayType="ns1:mil_dcma_csi_ws_WSLineItem[]"/>
               </restriction>
            </complexContent>
         </complexType>
         <complexType name="ArrayOfmil_dcma_csi_ws_WSContract" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
            <complexContent>
               <restriction base="SOAP-ENC:Array">
                  <attribute ref="SOAP-ENC:arrayType" wsdl:arrayType="ns1:mil_dcma_csi_ws_WSContract[]"/>
               </restriction>
            </complexContent>
         </complexType>
         <complexType name="mil_dcma_csi_ws_WSStatusCommentary" jdev:packageName="mil.dcma.csi.ws" xmlns:jdev="http://xmlns.oracle.com/jdeveloper/webservices">
            <all>
               <element name="comments" type="ns1:ArrayOfmil_dcma_csi_ws_WSStatusList"/>
               <element name="statusTypes" type="ns1:ArrayOfString"/>
            </all>
         </complexType>
         <complexType name="mil_dcma_csi_ws_WSStatusList" jdev:packageName="mil.dcma.csi.ws" xmlns:jdev="http://xmlns.oracle.com/jdeveloper/webservices">
            <all>
               <element name="contents" type="ns1:ArrayOfString"/>
            </all>
         </complexType>
         <complexType name="ArrayOfmil_dcma_csi_ws_WSStatusList" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
            <complexContent>
               <restriction base="SOAP-ENC:Array">
                  <attribute ref="SOAP-ENC:arrayType" wsdl:arrayType="ns1:mil_dcma_csi_ws_WSStatusList[]"/>
               </restriction>
            </complexContent>
         </complexType>
      </schema>
   </types>
   <message name="getContracts0Request">
      <part name="cage" type="xsd:string"/>
      <part name="piinDodaac" type="xsd:string"/>
      <part name="piinYear" type="xsd:string"/>
      <part name="piinType" type="xsd:string"/>
      <part name="piinSerial" type="xsd:string"/>
      <part name="spiin" type="xsd:string"/>
   </message>
   <message name="getContracts0Response">
      <part name="return" type="ns1:mil_dcma_csi_ws_WSCSIServiceResponse"/>
   </message>
   <message name="getContractLineItems1Request">
      <part name="piinDodaac" type="xsd:string"/>
      <part name="piinYear" type="xsd:string"/>
      <part name="piinType" type="xsd:string"/>
      <part name="piinSerial" type="xsd:string"/>
      <part name="spiin" type="xsd:string"/>
      <part name="lineItemIds" type="ns1:ArrayOfString"/>
   </message>
   <message name="getContractLineItems1Response">
      <part name="return" type="ns1:mil_dcma_csi_ws_WSCSIServiceResponse"/>
   </message>
   <portType name="CSIWebServicePortType">
      <operation name="getContracts">
         <input name="getContracts0Request" message="tns:getContracts0Request"/>
         <output name="getContracts0Response" message="tns:getContracts0Response"/>
      </operation>
      <operation name="getContractLineItems">
         <input name="getContractLineItems1Request" message="tns:getContractLineItems1Request"/>
         <output name="getContractLineItems1Response" message="tns:getContractLineItems1Response"/>
      </operation>
   </portType>
   <binding name="CSIWebServiceBinding" type="tns:CSIWebServicePortType">
      <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
      <operation name="getContracts">
         <soap:operation soapAction="" style="rpc"/>
         <input name="getContracts0Request">
            <soap:body use="encoded" namespace="CSIWebService" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
         </input>
         <output name="getContracts0Response">
            <soap:body use="encoded" namespace="CSIWebService" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
         </output>
      </operation>
      <operation name="getContractLineItems">
         <soap:operation soapAction="" style="rpc"/>
         <input name="getContractLineItems1Request">
            <soap:body use="encoded" namespace="CSIWebService" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
         </input>
         <output name="getContractLineItems1Response">
            <soap:body use="encoded" namespace="CSIWebService" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
         </output>
      </operation>
   </binding>
   <service name="CSIWebService">
      <documentation>
This class defines Web Service messages as local
methods. Each method is a valid Web Service messages, using
RPC-style. This design is appropriate for typical Web Service
implementation toolkits such as Axis.
</documentation>
      <port name="CSIWebServicePort" binding="tns:CSIWebServiceBinding">
         <soap:address location="http://hxacacarqw025:8888/CSI/CSIWebService"/>
      </port>
   </service>
</definitions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T21:46:26.657

WAS 6.1 也有axis1 jars 的副本，所以您可以尝试使用此处提到的“parent last”标志：http: //pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic= [%2Fcom .ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Fcrun_classload.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/crun_classload.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:38:14.107

所以问题最终是我们的 SOAP 客户端（Axis 1）的版本在 WebSphere 5.1 和 6.1 之间略有不同。运行 Axis 实用程序函数“WSDL to JAVA”更新了我们应用程序中的类。我们不得不修改我们的代码以指向这些重新生成的类并重建。错误消失了。我们所有的 Web 服务调用现在都可以正常执行。

感谢所有试图提供帮助的人。

# objective-c - 在目标 c 中，一个类可以本质上删除自己吗？

> ID：10856784
> 
> 赞同：1
> 
> 时间：2012-06-01T20:15:40.380
> 
> 标签：objective-c, ios, xcode

在目标 c 中，假设我有一个对象`Obj`存储在 NSMutableArray 中，并且指向它的数组指针是`Obj`整个程序中唯一的强指针。现在假设我调用一个方法`Obj`并在另一个线程中运行这个方法。在这种方法中，如果`Obj`将自身的指针设置为等于，`nil`它会本质上删除自己吗？（因为不会再有强指针了）我怀疑答案是否定的，但为什么呢？如果这确实有效，是不是不好的编码习惯（我认为它不是好的编码，但它实际上是坏的吗？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T20:50:41.093

如果您的代码设计得当，一个对象极不可能导致其自己的释放/释放。所以是的，你描述的情况表明编码习惯不好，实际上可能导致程序崩溃。这是一个例子：

```
@interface Widget : NSObject
@property (retain) NSMutableArray *array;
@end

@implementation Widget

@synthesize array;

- (id)init
{
    self = [super init];
    if(self) {
        array = [[NSMutableArray alloc] init];
        [array addObject:self];
    }
    return self;
}

- (void)dealloc
{
    NSLog(@"Deallocating!");
    [array release];
    [super dealloc];
}

- (void)removeSelf
{
    NSLog(@"%d", [array count]);
    [array removeObject:self];
    NSLog(@"%d", [array count]);
}
@end 
```

然后这段代码在另一个类中：

```
Widget *myWidget = [[Widget alloc] init];
[myWidget release];  // WHOOPS!
[myWidget removeSelf]; 
```

第二次调用 NSLog in`removeSelf`将导致 EXC_BAD_ACCESS，因为此时`array`已被释放并且无法调用方法。

这里至少有几个错误。最终导致崩溃的一个事实是，创建和使用`myWidget`对象的任何类在使用它完成之前释放它（调用 removeSelf）。如果没有这个错误，代码将运行良好。但是，MyWidget 不应该有一个实例变量首先创建对自身的强引用，因为这会创建一个保留循环。`myWidget`如果有人在没有先调用的情况下尝试释放`removeSelf`，则不会释放任何内容，并且您可能会发生内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:20:06.797

如果你的后向指针很弱（应该是因为一个类永远不应该尝试拥有它的所有者，你最终会得到一个保留循环）并且你从数组中删除了强指针，那么对象将从堆中删除. 没有强指针 = 从内存中删除。

您可以随时对此进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:21:09.147

如果你需要一个类来解决它被删除的情况，最好的做法是首先保留/自动释放它，然后让这种情况发生。在这种情况下，类不会在其方法的中间被删除，而只会在之后被删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T22:25:32.550

我认为我们可以说这*可能是*不好的编码习惯，这取决于你是如何做到的。您可以通过多种方式安全地或可能安全地进行操作。

所以让我们假设我们有一个全局：

```
NSMutableArray *GlobalStore; 
```

一种方法是删除自己作为您的最终行动：

```
- (void) someMethod
{
   ...
   [GlobalStore removeObject:self];
} 
```

由于这是最后的行动，因此应该没有未来的用途，`self`并且一切都应该很好，可能......

其他选项包括以 0 的时间延迟安排删除 - 这意味着它将在下一次运行循环周围触发（当然，只有当你有一个运行循环时才有效，而在线程中你可能没有）。这应该始终是安全的。

您还可以让一个对象保留对自身的引用，这会产生一个循环，从而使其保持活动状态。当它准备好死时，它可以取消自己的引用，如果没有其他引用并且这是一个最终操作（或另一个对象的计划操作），那么该对象就死了。

# unit-testing - 使用带有 jsTestDriver 的闭包库

> ID：10856785
> 
> 赞同：7
> 
> 时间：2012-06-01T20:15:46.307
> 
> 标签：unit-testing, google-closure-library, js-test-driver

我正在通过编写一个简单的 JavaScript 游戏来学习谷歌关闭工具。我无法弄清楚如何设置 jsTestDriver 以便它与闭包库一起工作。

具体来说：我想使用 goog.require 机制来包含任何额外的 JavaScript 文件，而不是必须手动将它们全部添加到配置文件中。

按照 meyertee 的建议，我制作了一个简单的脚本来自动将依赖项写入配置文件

```
#!/bin/bash
cp tests/jsTestDriver.conf.proto tests/jsTestDriver.conf
libs/closure-library/closure/bin/build/closurebuilder.py --root="./libs/closure-library" --root="./js" --namespace="lds" | sed "s#^#  - \.\./#" >> tests/jsTestDriver.conf 
```

tests/jsTestDriver.conf.proto 文件是一个简单的模板：

```
test:
  - "*.js"
load:
  - ../libs/knockout-2.1.0.js
# Crucial, the load key needs to be last, and this comment must be followed by a newline. 
```

这是一个非常脆弱的脚本，但希望有人（除了我）会发现它有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T12:52:33.777

您可以通过让 Closure Compile 生成一个清单文件来半自动完成此操作，该文件将以正确的依赖顺序输出所有文件。然后，您可以将该文件转换为相对路径并将它们粘贴到 JsTestDriver 配置文件中。我就是这样做的。
您甚至可以编写一个自动执行此转换的脚本。

这是相关的编译器参数：

```
--output_manifest manifest.MF 
```

[Closure Compiler 的 Google Code Wiki](http://code.google.com/p/closure-compiler/wiki/ManageClosureDependencies)上有一些详细信息

**编辑：** 还有一些[Python 脚本](https://developers.google.com/closure/library/docs/closurebuilder)可以帮助您计算依赖关系。您可以使用 calcdeps.py 或closurebuilder.py 生成清单文件，其中甚至包括您的代码未“要求”的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T01:36:14.020

由于[JsTestDriver](http://code.google.com/p/js-test-driver/)不遵循使用and声明依赖关系的[闭包库](https://developers.google.com/closure/library/)约定，因此您最好的选择可能是[meyertee 的](https://stackoverflow.com/users/463018/meyertee)解决方案。`goog.provide()``goog.require()`

但是，闭包库包含自己的测试框架。看：

*   [使用闭包框架进行测试驱动开发](http://answers.oreilly.com/topic/2074-test-driven-development-with-the-closure-testing-framework/)
*   [断言 API](http://docs.closure-library.googlecode.com/git/namespace_goog_asserts.html)

# java - 带有 AbstractTableModel 的 JTable 在单击时不会编辑

> ID：10856786
> 
> 赞同：3
> 
> 时间：2012-06-01T20:15:54.780
> 
> 标签：java, swing, jtable, abstracttablemodel

我正在构建一个应该能够处理用户编辑的`JTable`for 。`Applet`因此，我已经扩展`AbstractTableModel`并成功地用数据填充了表格。我的问题是，一旦填充了数据，单击表格就不允许进行编辑。

我已将该`isCellEditable()`方法重写为 always `return true`，并在每次调用该方法时向控制台打印一条消息。但是，当我与表格交互时（通过任意数量的连续鼠标单击任何给定的单个单元格），该单元格不会变得可编辑，也`isCellEditable()`永远不会被调用。

我的问题是，为了编辑特定的单元格需要调用什么？对于帖子中缺少代码，我深表歉意，但代码是高度专有的，我的上级对发布任何代码都非常严格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T20:31:53.253

To protect your superiors' interests, edit your question to include an [sscce](http://sscce.org/) that exhibits the problem you describe. Several example suitable for a starting point may be found in [*How to Use Tables*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html), and this [example](https://sites.google.com/site/drjohnbmatthews/table) illustrates an editable `AbstractTableModel`. You might compare it with your implementation.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T20:26:26.963

1.你添加`AbstractTableModel`到`JTable`屏幕上已经可见

2.如果是，那么代码行不是`isCellEditable()`，但应该是

```
@Override
public boolean isCellEditable(int row, int column) {
    return true;
} 
```

3.我建议使用`DefaultTableModel`而不是覆盖所需的方法`AbstractTableModel`

# c# - 在 Windows Phone 上将图像上传到 Imgur

> ID：10856802
> 
> 赞同：0
> 
> 时间：2012-06-01T20:17:06.770
> 
> 标签：c#, image, windows-phone-7, base64, imgur

我目前正在尝试构建一个应用程序，该应用程序涉及用户从他们的库中选择一张照片（或拍照）并将其上传到 Imgur。我已经为 Windows 窗体应用程序构建了一个相当强大的 C# Imgur 客户端，但不幸的是，将它移植到 Windows Phone 上是一场灾难。

这是我正在使用的代码：

```
public void UploadImageAsync(Stream PhotoStream)
{
    try
    {
        WebClient w = new WebClient();
        w.Headers["Content-type"] = "application/x-www-form-urlencoded";

        string data = "key="+PublicKey+
                "&_fake_status=200"+
                "&type=base64"+
                "&image="+PhotoStreamToBase64(PhotoStream);

        w.UploadStringAsync(new Uri("http://api.imgur.com/2/upload", UriKind.Absolute), "POST", data);

    }
    catch (Exception ex)
    {
    }
}

string PhotoStreamToBase64(Stream PhotoStream)
{
    MemoryStream memoryStream = new MemoryStream();
    PhotoStream.CopyTo(memoryStream);
    byte[] result = memoryStream.ToArray();
    return System.Convert.ToBase64String(result);
} 
```

有趣（也令人沮丧）的是，似乎一切正常，上传完成后我收到了成功的响应。但是，上传后尝试查看图像时，结果如下所示：[http://i.imgur.com/NWY0R.jpg](http://i.imgur.com/NWY0R.jpg)。

这使我相信图像流以某种方式被错误地转换为字节数组，或者被错误地转换为 base 64 字符串。无论如何，我无法让它工作，我完全不知所措。有人知道吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:37:56.823

[SpikeX](https://stackoverflow.com/users/334053/spikex) pushed me toward Imgur's [C# API example](https://api.imgur.com/examples#uploading_cs) for image uploading. Borrowing the Base64 encoding logic from their example fixed the issue. Here is the now functional PhotoStreamToBase64 method:

```
string PhotoStreamToBase64(Stream PhotoStream)
{
    MemoryStream memoryStream = new MemoryStream();
    PhotoStream.CopyTo(memoryStream);
    byte[] result = memoryStream.ToArray();

    string base64img = System.Convert.ToBase64String(result);
    StringBuilder sb = new StringBuilder();

    for (int i = 0; i < base64img.Length; i += 32766)
    {
        sb.Append(Uri.EscapeDataString(base64img.Substring(i, Math.Min(32766, base64img.Length - i))));
    }

    return sb.ToString();
} 
```

# asp.net - 尝试使用 Structuremap 将依赖项注入全局过滤器的问题

> ID：10856805
> 
> 赞同：1
> 
> 时间：2012-06-01T20:17:26.810
> 
> 标签：asp.net, asp.net-mvc-3, inversion-of-control, structuremap

[因此，我在这里](https://stackoverflow.com/questions/10849822/trying-to-figure-out-an-elegant-way-to-persist-data-between-objects-in-asp-net-m)简要介绍了我如何拥有一个全局过滤器，该过滤器运行`GlobalFilters.Filters.Add(new MyFilter)`并获得一个子域管理器，该管理器将根据子域信息进行一些数据库查找。

我的目标是在我进行的验证失败时将 filtercontext.result 设置为新的 ResultRedirect 对象。但是，如果成功，此子域管理器对象将在请求的其余部分中保留在 Structuremap 容器中。

最初我认为当全局过滤器运行时控制器对象没有被实例化，所以我希望根据这个子域管理器的结果在控制器上填充一个子域对象属性。

但是，我有两个困境：

1.  我相信当全局过滤器运行时控制器已经被实例化，所以即使运行子域管理器并验证请求的全局控制器得到验证，我也无法从子域管理器对象填充我的控制器上的子域对象在容器中

2.  其次，更重要的是，我似乎找不到使用结构映射将依赖项注入全局过滤器（SomeValidationAttribute：ActionAttribute）的有效方法。

有什么建议么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:54:59.083

1）在控制器的构造中坚持一个简单的依赖，并可能将它注入到 BeginExecute 中。但我确实认为你必须描述你真正想要归档的内容，而不是让我们猜测你的解决方案。

2) 注册您的 GlobalFilterProvider

```
public class StructureMapGlobalFilterProvider : IFilterProvider
{
    public StructureMapGlobalFilterProvider(IContainer container)
    {
        _container = container;
    }

    private IContainer _container;

    public IEnumerable<Filter> GetFilters(ControllerContext controllerContext, ActionDescriptor 

actionDescriptor)
    {
        return new List<Filter>();
    }
} 
```

来源：[http ://thecodinghumanist.com/blog/archives/2011/2/3/structuremap-global-action-filters-and-dependency-injection-in-asp-net-mvc-3](http://thecodinghumanist.com/blog/archives/2011/2/3/structuremap-global-action-filters-and-dependency-injection-in-asp-net-mvc-3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-05T10:36:05.093

`GetFilters`of`FilterAttributeFilterProvider`为全局过滤器返回零项。在这种特殊情况下，使用 StructureMap 的容器定义全局过滤器：

```
GlobalFilters.Filters.Add(container.GetInstance<LogAttribute>()); 
```

然后您还需要将 StructureMap 注入`IContainer`您的过滤器：

```
public class LogAttribute : ActionFilterAttribute
{
    private readonly IContainer _container; 
    public LogAttribute(IContainer container)
    {
        _container = container;
    }

    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        _container.GetInstance<ILogActionService>().Log("......data......");
        base.OnActionExecuted(filterContext);
    }
} 
```

如果不调用`_container.GetInstance`，全局过滤器的所有依赖项将仅在程序开始时实例化一次。

# c# - 使用 MySQL 时，为什么 Entity Framework 4 试图将 long 转换为小数？

> ID：10856809
> 
> 赞同：5
> 
> 时间：2012-06-01T20:17:38.667
> 
> 标签：c#, asp.net, mysql, entity-framework

每当我有一个带有`BIGINT`主键的表时，我可以插入新记录，但不能更新现有记录。当我尝试进行更新时，出现以下错误：

`"The specified value is not an instance of type 'Edm.Decimal'"`

样品型号：

```
public class Model
{
    public long ModelID { get; set; }

    public DateTime ProcessedOn { get; set; }
} 
```

示例更新代码：

```
public bool SetModelProcessed(long id)
{
    var entity = db.models.SingleOrDefault(m => m.ModelID == id);

    entity.ProcessedOn = DateTime.Now;

    db.ObjectStateManager.ChangeObjectState(entity, System.Data.EntityState.Modified);

    db.SaveChanges();
 } 
```

即使是像这个这样简单的模型对我来说也失败了。有谁知道发生了什么？

**编辑**

我尝试了代码优先的方法。Entity Framework 4.3 甚至无法生成 mySQL 数据库，这显然是 mySQL 和添加迁移功能后的 Entity Framework 版本的问题。

自从降级到 4.1.10715.0 版后`long`，`ulong`仍然有效。如果属性是`ulong`.

`EntityType 'Model' has no key defined. Define the key for this EntityType.`

使用`long`代替`ulong`不是我需要的，但我猜它必须这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:25:24.453

如果这恰好是数据库中的无符号 bigint，那么我相信它会映射到小数而不是 a `long`- 不知道为什么它不只使用 a `ulong`。但我会从那里开始，确保您的 bigint 已签名。

# objective-c - 如何在使用objective-c或cocos2d的游戏中导入和编译一个类？

> ID：10856818
> 
> 赞同：1
> 
> 时间：2012-06-01T20:18:27.520
> 
> 标签：objective-c, class, import, cocos2d-iphone

我正在用 cocos2d（用于 iPad）构建一个游戏，我想知道一个类是否存在，在objective-c 或 cocos2d 中，它允许我导入另一个类（用objective-c 编写）。

在游戏会话期间，这必须以动态方式编译，并且必须在游戏中使用此类的方法来实现它。

我找到了objective-c的NSBundle，但它们不能以这种方式用于iPad。

如果您知道 cocos2d 或 Objective-c 库的解决方案，您能给我一些建议吗？如果没有解决方案，解析器是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:21:35.633

很抱歉这么晚才回答你的问题..我希望这会有所帮助..

假设您要检查“ADBannerView”类是否可用。然后你可以做这样的事情。

```
Class classAdBannerView = NSClassFromString(@"ADBannerView");
if (classAdBannerView != nil){
     //the class is available.
} 
```

# date - JPA 日期和时区混淆

> ID：10856825
> 
> 赞同：1
> 
> 时间：2012-06-01T20:18:55.473
> 
> 标签：date, jpa, timezone

我在使用 JPA 从数据库中读取日期时遇到问题。我正在使用 EclipseLink 和 PostgreSQL

我已经从 CSV 文件填充了我的数据库，女巫将日期作为字符串（以这种格式：）`6/30/2009-23:59:56`。我使用以下代码片段将其转换为 Date 对象：

```
public static Date parseDate(String s){
    DateFormat formatter = new SimpleDateFormat("d/M/yyyy-k:m:s");
    try {
        return new Date( ((java.util.Date)formatter.parse(s)).getTime() );
    } catch (ParseException ex) {
        Logger.getLogger(Type.class.getName()).log(Level.SEVERE, null, ex);
        return null;
    }
} 
```

日期按预期正确转换并存储在数据库中。这是我将 Date 对象映射到数据库的方法：

```
@Column(name="data_ts", nullable=false)
@Temporal(TemporalType.TIMESTAMP)
private Date dataTs; 
```

当我尝试从数据库中读取日期以在图表（Highcharts）中使用它时，问题似乎发生了。上面具有相同时间戳的记录被读取为：

`Mon Jun 06 23:59:56 BRT 2011`它的时间戳为`1307415596000`

请注意，它是巴西时间 (+3h)，因此时间戳（从 GMT 计算）偏移了 3 小时。绘制后，时间戳变为指向`07/06/2011 02:59:56`

这是一个例子：

```
List<TimedataEnt> timeData = currentWellsite.getTimeData();
String debug = timeData.get(timeData.size()-1).getDataTs().toString() + ">>>" + timeData.get(timeData.size()-1).getDataTs().getTime(); 
```

*currentWellsite*和 JPA 实体在哪里，并`getDataTs()`返回 java.util.Date 对象。字符串原来是`"Tue Jun 30 23:59:56 BRT 2009>>>1246417196000"`

如何告诉 JPA 不要转换从数据库读取的时间戳？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:51:15.103

如前所述，日期和时间戳没有时区考虑。看来问题是因为Java认为它从数据库中读取的时间是当前的默认时区。

因此，如果数据库包含`2011-04-04 14:00:00`并且我当前的时区为 +3，则将其分配给 java Date 将生成`2011-04-04 14:00:00 BRT time(+3)`，时间戳偏移 3 小时（因为时间戳是从 UTC 计算的）。

通过获取计算的时间戳解决了该问题：

```
long ts = myDate().getTime() + TimeZone.getDefault().getRawOffset(); 
```

重要的是要说`getRawOffset()`不考虑夏令时。为此，使用`getOffset()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T22:43:59.027

你的日期是`6/30/2009-23:59:56`。我是在 2009 年 6 月 30 日 23:59:56 读到的。所以解析它的格式应该是`M/d/yyyy-HH:mm:ss`or `M/d/yyyy-kk:mm:ss`（取决于你的时间是从 1 到 24 还是从 0 到 23）。但绝对不是`d/M/yyyy-k:m:s`：这个月在一天之前。

此外，时间戳没有任何时区。这是一个普遍的瞬间。只有当您显示其值时，时区才重要，因为您必须选择使用哪个时区来显示时间。使用设置了适当时区的 DateFormat 来显示您的时间戳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:25:23.847

您的问题似乎是您将 Timestamp （没有时区）存储到 java.util.Date （有时区偏移量）中。

如果您想控制时区的设置方式，请将您的时间戳存储为 java.sql.Timestamp，或使用您自己的 @Converter。

一般来说，Calendar 应该在 Java 中使用，而不是 java.util.Date，后者在很大程度上已被弃用。日历也有一个时区，所以你可能会遇到类似的问题。

# android - 解释 targetSdkLevel 以及我应该如何确定它的正确值

> ID：10856831
> 
> 赞同：2
> 
> 时间：2012-06-01T20:19:38.243
> 
> 标签：android, sdk, android-manifest

你能向我解释一下我应该如何确定*targetSdkLevel*的正确值吗？

假设我想构建一个适用于从 android 2.3.7 到 4.0.3 的所有版本的应用程序，我应该如何设置*minSdkLevel*和*targetSdkLevel*？

前者应该匹配android 2.3.7的API级别，后者应该匹配4.0.3的API级别？

那么，当我开发我的应用程序时，我应该只使用最旧的受支持的 sdk 级别中可用的方法/类吗？

当我编译应用程序时，它会编译为 2.3.7 还是 4.0.3？

我无法理解*targetSdkLevel*的用途，因为无法针对此标记中指定的较新版本编译 apk，否则它无法在低至*minSdkLevel*指定的版本上工作......为什么我不应该将*targetSdkLevel*设置为最新可用级别？

我还阅读了有关[*uses-sdk*](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html) Manifest 标签的官方信息，但我仍然不明白..你能帮我澄清这个话题吗？

**编辑：**感谢你们所有人，请原谅我重复的问题。我已经阅读了这篇[博客文章](http://android-developers.blogspot.it/2010/07/how-to-have-your-cupcake-and-eat-it-too.html)，它对我很有帮助。你们所有人的答案都很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T20:25:13.343

这里解释得很清楚：http: [//developer.android.com/guide/topics/manifest/uses-sdk-element.html](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

```
minSdkVersion: 
```

> 一个整数，指定应用程序运行所需的最低 API 级别。如果系统的 API Level 低于此属性中指定的值，Android 系统将阻止用户安装应用程序。您应该始终声明此属性。

而对于`targetSdkVersion`

> 一个整数，指定应用程序所针对的 API 级别。如果未设置，则默认值等于提供给 minSdkVersion 的值。此属性通知系统您已针对目标版本进行了测试，并且系统不应启用任何兼容性行为来保持您的应用程序与目标版本的前向兼容性。该应用程序仍然能够在旧版本上运行（低至 minSdkVersion）。

这里有什么不明白的？

这是您将如何设置它：

```
<uses-sdk android:minSdkVersion="10" 
          android:targetSdkVersion="15"/> 
```

您可以在此处阅读有关 API 级别 14 的更改：http: [//developer.android.com/sdk/api_diff/14/changes.html](http://developer.android.com/sdk/api_diff/14/changes.html) 和此处的 API 级别 4：http: [//developer.android.com/sdk /api_diff/4/changes.html](http://developer.android.com/sdk/api_diff/4/changes.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T20:26:00.323

您应该只使用由*minSdkLevel*指定的 SDK 中可用的方法/类，或者通过适当检查运行时 API 版本来包装它们。

您的应用程序将使用项目本身中指定的 SDK 编译，而不是由*minSdkLevel*或*targetSdkLevel*指定的 SDK 。

您应该将*targetSdkLevel*设置为您测试过应用程序的最高级别 API。这是因为将根据此值为您的应用程序启用/禁用兼容性行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T20:29:50.947

使用目标构建，然后您可以检查用户是否低于目标并正常降级。例如，如果您正在创建位置感知应用程序，您可能希望使用从版本 8 开始可用的 PASSIVE_PROVIDER。您可以将最低版本设置为低于 8 并检查 android 版本。从那里您可以根据版本决定使用或不使用 PASSIVE_PROVIDER。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T20:35:25.190

google 建议您始终使用最新版本的 targetSdk ，并且还提供 lint 工具来检查您的类和方法对于 minSdkVersion 来说不是太新。如果出现警告，您将需要考虑如何处理它。

请注意，正如人们在这里提到的那样，设置 targetSdk 也意味着它将改变应用程序的某些方面。

一方面是app如何处理菜单按钮：如果你将targetSdk设置为11或以上，这意味着你不能假设有一个菜单按钮，所以你将不得不处理操作栏并放置选项以某种方式（或任何其他方式，取决于您的应用程序设计）。

如果您将其设置为 10 或以下，android 将在屏幕上为没有菜单按钮的设备添加此按钮（显示为 3 个点），例如[htc one x](http://www.androidcentral.com/htc-one-x-shows-us-why-developers-need-lose-menu-button)或[Galaxy nexus](http://android-developers.blogspot.co.il/2012/01/say-goodbye-to-menu-button.html)。请注意，对于某些设备，它看起来很难看（例如，htc one x 需要一整行）。

所以，简而言之，我建议将 minSdk 设置为尽可能低，以便支持尽可能多的人，并将 targetSdk 设置为尽可能多，以便享受它可以提供的所有好处。你 。

# c++ - 在 Windows 上为 glut 3.7 构建静态库

> ID：10856832
> 
> 赞同：1
> 
> 时间：2012-06-01T20:19:51.013
> 
> 标签：c++, c, static, glut

我一直在尝试将 glut 编译为静态库，而不必在运行时与 glut32.dll 链接。我下载了 glut windows 源代码，但是当我尝试编译（默认）时，我不断得到：

```
Making in glut subdirectory...
        link  /INCREMENTAL:NO /NOLOGO -entry:_DllMainCRTStartup@12 -dll  -out:glut32.dll -def:glut.def glut_8x13.obj glut_9x15.obj glut_bitmap.obj glut_bwidth.obj glut_cindex.obj glut_cmap.obj glut_cu
rsor.obj glut_dials.obj glut_dstr.obj glut_event.obj glut_ext.obj glut_fullscrn.obj glut_gamemode.obj glut_get.obj glut_hel10.obj glut_hel12.obj glut_hel18.obj glut_init.obj glut_input.obj glut_joy.ob
j glut_key.obj glut_keyctrl.obj glut_keyup.obj glut_mesa.obj glut_modifier.obj glut_mroman.obj glut_overlay.obj glut_roman.obj glut_shapes.obj glut_space.obj glut_stroke.obj glut_swap.obj glut_swidth.
obj glut_tablet.obj glut_teapot.obj glut_tr10.obj glut_tr24.obj glut_util.obj glut_vidresize.obj glut_warp.obj glut_win.obj glut_winmisc.obj win32_glx.obj win32_menu.obj win32_util.obj win32_winproc.o
bj win32_x11.obj opengl32.lib glu32.lib winmm.lib kernel32.lib  ws2_32.lib mswsock.lib advapi32.lib user32.lib gdi32.lib comdlg32.lib winspool.lib
LINK : fatal error LNK1104: cannot open file 'glut32.lib'
NMAKE : fatal error U1077: '"c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\BIN\link.EXE"' : return code '0x450'
Stop.
NMAKE : fatal error U1077: '"c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\BIN\nmake.EXE"' : return code '0x2'
Stop.
NMAKE : fatal error U1077: '"c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\BIN\nmake.EXE"' : return code '0x2'
Stop. 
```

据我了解，glut32.lib 应该在 {source}\lib\glut\ 中编译和创建，但它不存在。

任何为 glut 编译静态库的帮助将不胜感激。

***编辑：***

在*Makefile.win*

**改变：**
`$(link) $(LFLAGS) -out:$(GLUTDLL) -def:glut.def $(OBJS) $(LIBS)`

到

`lib $(OBJS) $(LIBS)`

它生成 \lib\glut\glut_8x13.lib 不确定 8x13 是关于什么的，但是当我尝试与它链接时，我得到了一些未解决的外部问题：

```
GPURenderer_test.obj : error LNK2019: unresolved external symbol __imp__glutCreateWindow@4 referenced in function "protected: __thiscall GlobalDecl::OpenGLConte
xt::OpenGLContext(unsigned int,unsigned int)" (??0OpenGLContext@GlobalDecl@@IAE@II@Z)
GPURenderer_test.obj : error LNK2019: unresolved external symbol __imp__glutInitWindowSize@8 referenced in function "protected: __thiscall GlobalDecl::OpenGLCon
text::OpenGLContext(unsigned int,unsigned int)" (??0OpenGLContext@GlobalDecl@@IAE@II@Z)
GPURenderer_test.obj : error LNK2019: unresolved external symbol __imp__glutInitWindowPosition@8 referenced in function "protected: __thiscall GlobalDecl::OpenG
LContext::OpenGLContext(unsigned int,unsigned int)" (??0OpenGLContext@GlobalDecl@@IAE@II@Z)
GPURenderer_test.obj : error LNK2019: unresolved external symbol __imp__glutInitDisplayMode@4 referenced in function "protected: __thiscall GlobalDecl::OpenGLCo
ntext::OpenGLContext(unsigned int,unsigned int)" (??0OpenGLContext@GlobalDecl@@IAE@II@Z)
GPURenderer_test.obj : error LNK2019: unresolved external symbol __imp__glutInit@8 referenced in function "protected: __thiscall GlobalDecl::OpenGLContext::Open
GLContext(unsigned int,unsigned int)" (??0OpenGLContext@GlobalDecl@@IAE@II@Z)
GPURenderer_test.obj : error LNK2019: unresolved external symbol __imp__glutSwapBuffers@0 referenced in function "protected: void __thiscall GlobalDecl::OpenGLC
ontext::_executeTest(class GlobalDecl::UnitTest &)" (?_executeTest@OpenGLContext@GlobalDecl@@IAEXAAVUnitTest@2@@Z) 
```

谢谢，瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:23:54.350

在我看来，您的构建设置中有一些非常糟糕的东西（或者您完全使用了错误的构建设置，例如在构建它们使用的库之前尝试构建一些示例）。

要构建静态库，您根本不应该运行`link`。对于静态库，您编译目标文件，然后使用`lib`将它们组合到库中。您将`link`用于构建动态库 (DLL) 或可执行文件，而不是静态库。

# vb.net - 数据表左连接 linq

> ID：10856833
> 
> 赞同：0
> 
> 时间：2012-06-01T20:19:56.130
> 
> 标签：vb.net, linq, join, dataset

我很难加入 2 个数据表，结果是加入了数据表。

第一个数据表（标签）保存包括打印机标识的数据。第二个数据表（打印机）保存打印机引用（id > unc）

我想拥有一个数据表作为最终结果（加入），其中包含来自第一个数据表的所有数据以及第二个数据表的字段（unc）。

这就是我一直在尝试的：（注意固定路径是为了方便......）

```
Sub Main()

    Dim ds1 As new DataSet

    ds1.ReadXml("C:\Program Files (x86)\[COMPANY]\ASW2XML\BICOLOR_a07bfc62-501e-4444-9b6e-3b9d3550e1a4.xml")

    Dim ds2 As New DataSet

    Dim li As string()

    li = IO.File.ReadAllLines("C:\Program Files (x86)\[COMPANY]\ASW2XML\printers.dat")

    Dim printers As New DataTable("Printers")

    printers.Columns.Add("REPRT2")
    printers.Columns.Add("REPRT3")

    For Each s In li.ToList

        Dim dr As DataRow = printers.NewRow

        dr.Item(0) = s.Split("=")(0)
        dr.Item(1) = s.Split("=")(1)

        printers.Rows.Add(dr)

    Next

    printers.AcceptChanges

    Dim labels As DataTable = ds1.Tables(0)

    Dim joined As new DataTable("data")

        'Dim lnq = From label In labels.AsEnumerable Join printer In printers.AsEnumerable On label("REPRT") Equals printer("REPRT2") Select printer
        'Dim lnq = From l In labels Group Join p In printers On l Equals p("REPRT2") Into Group From p In Group Select label = l, ppath = If(p Is Nothing, "(Nothing)", p("REPRT3"))
        Dim lnq = labels.AsEnumerable().Where(Function(o)printers.Select("REPRT2 =" & o.Item("REPRT").ToString).Length = 0)

        joined = lnq.CopyToDataTable

End Sub 
```

感谢您的帮助和启发！

grtz -S-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:48:10.203

你试过[http://msdn.microsoft.com/en-us/library/system.linq.enumerable.join.aspx](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.join.aspx)

将您的数据表作为 IEnumerable 的扩展（就像您所做的那样使用 list ），并且加入 linq 可以使其轻松工作。

然后将连接的表发送到您想要的任何目的地。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:43:37.400

我认为评论会更难理解，所以我把它移到了一个帖子中。

我写了一些结构来帮助你理解 Join 的工作原理：

```
structure Label
    Public printerId as long
    Public driver as Strring
end structure

structure Printer
    Public unc as string
end structure 
```

如果您将标签和打印机设置为 DataTable（而不是下面的结构），您应该有类似的内容：

```
 function DoJoin() as datatable 
    'You might remove as datatable in query declaration
    dim query as datatable = Labels.Join(Printers, Function(aLabel) aLabel, _
    function(aPrinter) aPrinter.unc, _
    function(aLabel, aPrinter) New With  
    { .printerID = aLabel.printerId, .driver = aLabel.Driver, _
      .unc = aPrinter.unc
    })
    return query 
end function 
```

However I wote it this morning in notepad, so you might have to adjust this. I just want to add that you must have the same type of container in order to use join (eg : example in [Join at msdn](http://msdn.microsoft.com/en-us/library/bb534675.aspx) they used 2 Lists.), that are compatible with Linq obects (datatable I do not know).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T09:34:26.427

我决定以“硬”的方式来做，并遍历父表中的所有行。这对于少量记录来说非常快，我不知道在大量记录上运行它是否会大大降低使用 Linq 解决方案的速度......

这是我正在使用 atm 的代码：

```
Sub Main()

    Dim ds As new DataSet

    ds.ReadXml("C:\Program Files (x86)\[COMPANY]\ASW2XML\BICOLOR_a07bfc62-501e-4444-9b6e-3b9d3550e1a4.xml")

    Dim labels As DataTable = ds.Tables(0)
    Dim printers As DataTable = GetPrinters

    labels.Columns.Add("REPRT2").SetOrdinal(labels.Columns.IndexOf("REPRT")+1) 'insert new column after key column
    labels.CaseSensitive=False
    labels.AcceptChanges

    For Each dr As DataRow In labels.Rows

        Dim p As String = String.Empty

        Try
            p = printers.Select("ID='" & dr("REPRT") & "'")(0).Item("PATH").ToString
        Catch ex As Exception

        End Try

        dr("REPRT2") = p

    Next

    labels.AcceptChanges

End Sub

Function GetPrinters As DataTable

    Dim printers As New DataTable("Printers")

    Dim li As string()

    li = IO.File.ReadAllLines("C:\Program Files (x86)\[COMPANY]\ASW2XML\printers.dat")

    printers.Columns.Add("ID")
    printers.Columns.Add("PATH")

    For Each s In li.ToList

        Dim dr As DataRow = printers.NewRow

        dr.Item(0) = s.Split("=")(0)
        dr.Item(1) = s.Split("=")(1)

        printers.Rows.Add(dr)

    Next

    printers.AcceptChanges

    Return printers

End Function 
```

# c# - timeago 的 DateTime 本地化问题

> ID：10856838
> 
> 赞同：0
> 
> 时间：2012-06-01T20:20:18.477
> 
> 标签：c#, javascript, jquery, asp.net-mvc, localization

我正在向浏览器输出 GB 格式的日期：`01/06/2012 15:50:01 -03:00`（2012 年 6 月 1 日）

这是在 C# 中的服务器上完成的`DateTimeOffset.ToString()`

我想在这个日期使用 jQuery.timeago。一切正常，除了一个问题：jQuery.timeago 将上述日期解析为`01/06/2012 15:50:01 -03:00`（2012 年 1 月 6 日）

一种解决方案是只做 a `DateTimeOffset.ToString(formatStringHere)`，但这需要与语言环境无关，所以我不确定该解决方案是否有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:45:01.280

您不能依赖无参数`DateTimeOffset.ToString()`方法与文化无关。我建议使用往返格式说明符（`"O"`或`"o"`）根据 ISO 8601 标准明确格式化您的日期（以便在所有文化下正确解析），同时保留时区信息。

来自 MSDN：

```
DateTime date1 = new DateTime(2008, 4, 10, 6, 30, 0);
DateTimeOffset dateOffset = new DateTimeOffset(date1, 
    TimeZoneInfo.Local.GetUtcOffset(date1));
Console.WriteLine(dateOffset.ToString("o"));
// Displays 2008-04-10T06:30:00.0000000-07:00 
```

timeago网站似乎表明它支持 ISO 8601 [。](http://timeago.yarp.com/)

**编辑**：`"o"`格式说明符等效于以下自定义格式字符串：

```
"yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'fffffffzzz" 
```

如果您想将精度限制为毫秒，您可以调整它：

```
DateTime date1 = new DateTime(2008, 4, 10, 6, 30, 0);
DateTimeOffset dateOffset = new DateTimeOffset(date1, new TimeSpan(-7, 0, 0));
Console.WriteLine(dateOffset.ToString("yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'fffzzz"));
// Displays 2008-04-10T06:30:00.000-07:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:49:13.903

使用 ISO-8601 标准：YYYY-MM-DDTHH:mm:ss.sssZ 在 C# 和 Jquery 中传达日期时间。表示使用两个值，一个用于显示，一个用于 JQuery。

# iphone - 过渡或动画后元素变得模糊

> ID：10856839
> 
> 赞同：8
> 
> 时间：2012-06-01T20:20:23.060
> 
> 标签：iphone, css, mobile-safari

在我使用 CSS`transition`或`animation`包含`rotate`整个包含的 div 后变得有点模糊，
我读到这是重绘元素的某种副作用，但有没有办法防止它？

```
.toggle {
    position: absolute;
    width: 36px;
    height: 36px;
    bottom: 7px;
    right: 94px;
    z-index: 200;
    background: transparent url("../img/handle-open.png") no-repeat;

    -webkit-transition: all 1s cubic-bezier(0.91,0.00,1.00,1.00);
       -moz-transition: all 1s cubic-bezier(0.91,0.00,1.00,1.00);
            transition: all 1s cubic-bezier(0.91,0.00,1.00,1.00);
}

.toggle-closed {
    -webkit-transform: rotate(180deg);
       -moz-transform: rotate(180deg);
            transform: rotate(180deg);
} 
```

我试图达到同样的效果`animate`并得到同样的结果

![在此处输入图像描述](../Images/a3f62d9ec35aa44d611771598daecfd6.png)

**更新：**我注意到发生了一些奇怪的事情——在 chrome 中，当动画运行时元素变得模糊，当动画停止时它恢复正常，
在 iOS 上却发生了相反的情况——图像在动画时很清晰，但在完成时变得模糊！另一个奇怪的@$$ 错误！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:48:36.883

在做动画之后，我已经看到过这样的问题。检查过渡后对象的尺寸，它的大小很可能已经改变了几个点，导致模糊。IE：

过渡前：36x36 过渡后：36.2 x 36.8

# javascript - 使用 jQuery 获取动态复选框值

> ID：10856840
> 
> 赞同：5
> 
> 时间：2012-06-01T20:20:25.210
> 
> 标签：javascript, jquery, checkbox

我无法获得动态复选框的选中值。我究竟做错了什么？[http://jsfiddle.net/hxfsB/17/](http://jsfiddle.net/hxfsB/17/)

**标记：**

```
<html>
    <body>
      one<input type="checkbox" name='checkbox0' value="one_name" checked>
     two<input type="checkbox" name='checkbox1' value="one_name1">
     three<input type="checkbox" name='checkbox2' value="one_name2">
         <input type="button" id="envoyer" value="Envoyer Reponse"  /> 
    </body>
</html> 
```

**Javascript：**

```
$('#envoyer').click(function(e){
    var myArray=new Array(4);
    for ( var j = 0; j < 3; j++){ 
        var check=$('input:checkbox[name=checkbox'+j+']').is(':checked');
        if(check==true)
            myArray[j]=$('input:checkbox[name=checkbox'+j+']').val();
    }
    alert('check '+" "+myArray[i]);
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T20:24:32.243

`myArray`在警报中输出时出现错误（`i`未定义变量）。

但是，您的代码可以更好地结构化。这是一种解决方案：

```
$("#envoyer").click(function(e) {
    var myArray = [];
    $(":checkbox:checked").each(function() {
        myArray.push(this.value);
    });

    alert("Checked: " + myArray.join(","));
});​ 
```

**演示：http:** [//jsfiddle.net/hxfsB/25/](http://jsfiddle.net/hxfsB/25/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T20:24:57.213

你有一个`Uncaught ReferenceError: i is not defined`; 我在这里更新了你的小提琴：

[http://jsfiddle.net/hxfsB/24/](http://jsfiddle.net/hxfsB/24/)

```
$('#envoyer').click(function(e){
    var myArray = new Array(3);
    for ( var j = 0; j < 3; j++) { 
        var check=$('input:checkbox[name=checkbox'+j+']').is(':checked');
        if(check==true)
            myArray[j]=$('input:checkbox[name=checkbox'+j+']').val();

        // Alert Current Selection //
        alert('check ' + " " + myArray[j] );
    }    
}); 
```

请记住：`undefined`表示未选中复选框。

我希望这有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T20:32:37.940

在你的标题建议，如果你想获得选中的复选框值，你可以这样做，

**Javascript：**

```
$('#envoyer').click(function(e){
    $('input[type="checkbox"]:checked').each(function(){
        alert(this.value);
    })        
})​ 
```

**标记**

```
<html>
    <body>
      one<input type="checkbox" name='checkbox0' value="one_name" checked>
      two<input type="checkbox" name='checkbox1' value="one_name1">
      three<input type="checkbox" name='checkbox2' value="one_name2">
        <input type="button" id="envoyer" value="Envoyer Reponse"  /> 
    </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T20:25:48.250

试试这个：http: [//jsfiddle.net/hxfsB/27/](http://jsfiddle.net/hxfsB/27/)

选择器有问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T20:26:07.417

```
$('#envoyer').click(function(e){
    var myArray=new Array(3);

    $('input[type=checkbox]:checked').each(function(i) {
       myArray[i] = $(this).val();
       //alert($(this).val());
    });
}​);​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T20:26:27.060

`i`in 在任何`myArray[i]`地方都不存在。您需要将警报放在 for 循环中并使用`myArray[j]`或使用创建新的 for 循环`i`

# delphi - 如何通过 Delphi 2009 打开 PDF 文件（窗口默认程序 Adob e Reader）？

> ID：10856841
> 
> 赞同：3
> 
> 时间：2012-06-01T20:20:31.887
> 
> 标签：delphi, pdf, delphi-2009, shellexecute, adobe-reader

所以基本上当我尝试打开默认使用 Adob​​e Reader 打开的 Windows 的 PDF 文件时，什么也没有发生。如果我将默认程序设置为 Internet Explorer，它可以工作..

这是我的代码

```
var
openDialog : TOpenDialog;    // Open dialog variable
begin
  openDialog := TOpenDialog.Create(self);
  openDialog.InitialDir := MaskEditLocation.Text;
  if openDialog.Execute then
   ShellExecute(Handle, PChar('Open'), PChar(openDialog.FileName), nil, nil,
   SW_SHOWNORMAL);
  openDialog.Free;
end; 
```

有任何想法吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-01T20:24:46.143

您永远不应该假设应用程序已经注册了一个特定的动词，例如`open`or `run`。当您需要默认行为时，只需将动词留空，然后让 Windows 决定：

```
ShellExecute(Handle, nil, PChar(OpenDialog.FileName), nil,  nil, SW_SHOWNORMAL); 
```

# javascript - 如何禁用 YUI3 Calendar minimumDate 之前的日期？

> ID：10856844
> 
> 赞同：1
> 
> 时间：2012-06-01T20:20:57.870
> 
> 标签：javascript, calendar, yui3

根据[文档](http://yuicode.com/yui/docs/api/classes/Calendar.html#attr_minimumDate)，设置`minimumDate`日历将“将任何更早的日期重置为该日期”，但我想禁用任何先前日期的选择。该控件禁用最小日期月份的“上一个”月份按钮，但仍允许选择更早的日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-07T19:54:02.450

我以一种更简单的方式完成了它，希望对您有所帮助：

```
 //Setting the date to today's date.  
var today = new Date();
var dd = today.getDate();
var mm = today.getMonth(); //January is 1
var yyyy = today.getFullYear();

var calendar = new Y.Calendar({
  contentBox: "#mycalendar",
  width:'340px',
  showPrevMonth: true,
  showNextMonth: true,
  minimumDate: new Date(yyyy, mm, dd) , 
  date: new Date()}).render(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T20:20:58.323

经过一番搜索后没有找到解决方案，我发布了一个我终于想出的解决方案。使用日历的[禁用日期规则](http://yuilibrary.com/yui/docs/calendar/calendar-multipane.html)，我创建了以下内容：

```
YUI().use('calendar', function (Y) {

    var calendar, rules,
        settings = { contentBox: '#dueDateSelect', minimumDate: new Date() };

    function getDisabledDatesRule(date, name) {
        var year = date.getFullYear(), 
            month = date.getMonth(), 
            daybefore = date.getDate() - 1, 
            r = {};
        r[year] = {};
        r[year][month] = {};
        r[year][month]['1-' + daybefore] = name;
        return r;
    }

    if (settings.minimumDate) {
        settings.disabledDatesRule = 'days-before-min';
        rules = getDisabledDatesRule(
            settings.minimumDate, 
            settings.disabledDatesRule
        );
    }

    calendar = new Y.Calendar(settings).render();

    if (rules) {
        calendar.set("customRenderer", {
            rules: rules
        });
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:36:37.103

I know you've asked about YUI3 Calendar, but only if you need a second option, you'll probably want to test [JSCal2](http://www.dynarch.com/projects/calendar/) I finally understood how to accomplish this with it: All you need to do it's to use the present day as "min" so today it's the first selectable day! Copy and paste this, it works:

```
<input size="40" id="cal_txt_date" />
<button id="cal_btn">...</button>
<br />
<script type="text/javascript">//<![CDATA[ 
  var now = new Date();
  var cal = Calendar.setup({ min : now, trigger : "cal_btn", });
  cal.manageFields("cal_btn", "cal_txt_date", "%A %e de %B del %Y a las %I:%M %p");
//]]>
</script> 
```

As you can see a new date object it's created in the variable "now", and it is set to "min" (or max if future dates shouldn't be selected) I hope this helps you =) If you paste my code as it is here, it should work with JSCal2.

# asp-classic - 如何使用参数运行存储过程并将结果存储为经典asp中的记录集

> ID：10856863
> 
> 赞同：0
> 
> 时间：2012-06-01T20:22:34.037
> 
> 标签：asp-classic, parameters, recordset, procedure

我无法找到完全涵盖这一点的问题/答案，因此我问这个问题。我需要做的是运行一个带有 1 个参数的存储过程。它将返回一组我需要存储在记录集中的结果。我计划稍后循环遍历这个记录集。对于较旧的 asp，我非常缺乏经验，但这是我必须要做的：

```
dim myConn
Set myConn = Server.CreateObject("ADODB.Connection")
myConn.Open = ("DSN=example-dsn;SERVER=example-server;DATABASE=example-db;UID=user;PWD=pass;")

dim oStoredProc : Set oStoredProc = Server.CreateObject("ADODB.Command")
With oStoredProc
    .ActiveConnection = myConn
    .CommandType = adCmdStoredProc
    .CommandText = "myStoredProcedure"
    .Parameters.Append(.CreateParameter("@PARAM1", ADODB.adInteger, ADODB.adParamInput, 10, 2012))
    Dim rs : Set rs = .Execute() 

End With

// Will loop through it here. 
```

我的猜测是我没有正确设置记录集，但就像我说的那样，我不太确定。如果有人能指出我正确的方向，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:01:08.623

您需要确保您的结果集是正确的对象

```
set rs = Server.CreateObject("ADODB.Recordset") 
```

然后您将使用我认为它的[open 方法](http://www.w3schools.com/ado/met_rs_open.asp)，它的工作原理如下：

```
 rs.Open oStoredProc 
```

[然后使用Record Set 对象](http://www.w3schools.com/ado/ado_ref_recordset.asp)的其他成员循环遍历结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:28:49.873

好吧，我做错了几件事，但最终对我有用。首先，事实证明我不需要传入参数，但这无论如何都不是问题。主要问题之一是“adCmdStoredProc”未被识别，这很奇怪，因为我已经看到它在其他任何地方都使用过，但是用它的相应值 4 替换它确实有效。

```
dim myConn, cmd

Set myConn = Server.CreateObject("ADODB.Connection")
myConn.Open = ("DSN=[BLAH];SERVER=[SERVER];DATABASE=[BLAH];UID=[User];PWD=[Pass];")

dim oStoredProc : Set oStoredProc = Server.CreateObject("ADODB.Command")
oStoredProc.CommandType = 4 
oStoredProc.CommandText = "StoredProcedureName"
oStoredProc.ActiveConnection = myConn
// Add parameters here if needed.

Dim rs 
Set rs = oStoredProc.Execute()

// I Loop through here

rs.Close
myConn.Close
Set rs = Nothing
Set oStoredProc = Nothing
Set myConn = Nothing 
```

如果其他人需要，我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-30T07:35:46.820

```
Dim rsStk As New ADODB.Recordset

Set rsStk = cnnPck.Execute("SP_JOB_ALL '" & Trim(te_Item) & "'")

Set Recordset= CONNECTION .Execute() 
```

这是做这件事的简单方法

# java - 使用 Tomcat，@WebFilter 不适用于 在 web.xml 里面

> ID：10856866
> 
> 赞同：9
> 
> 时间：2012-06-01T20:22:40.037
> 
> 标签：java, jakarta-ee, tomcat, servlet-filters

这是一个有效的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">

    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>

     <filter>
        <filter-name>rememberMeCookieFilter</filter-name>
        <filter-class>be.example.fun.jsp.filters.RememberMeCookieFilter</filter-class>
    </filter>

    <filter>
        <filter-name>mustBeSignedInFilter</filter-name>
        <filter-class>be.example.fun.jsp.filters.MustBeSignedInFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>rememberMeCookieFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter-mapping>
        <filter-name>mustBeSignedInFilter</filter-name>
        <url-pattern>/private/*</url-pattern>
    </filter-mapping>
</web-app> 
```

当我删除`<filter>`元素并改用以下注释时：

```
@WebFilter(filterName="rememberMeCookieFilter")
public class RememberMeCookieFilter implements Filter

@WebFilter(filterName="mustBeSignedInFilter")
public class MustBeSignedInFilter implements Filter 
```

然后 Tomcat 7.0.14 给了我以下错误：

```
java.lang.IllegalArgumentException: Filter mapping must specify either a <url-pattern> or a <servlet-name>
    at org.apache.catalina.core.StandardContext.validateFilterMap(StandardContext.java:2956)
    at org.apache.catalina.core.StandardContext.addFilterMap(StandardContext.java:2915)
    at org.apache.catalina.deploy.WebXml.configureContext(WebXml.java:1180)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1270)
        ... 
```

我遵循了[这个问题](https://stackoverflow.com/questions/6560969/how-to-define-servlet-filter-order-of-execution-using-annotations)的答案，但这对我不起作用。

以下是我的 Web 应用程序的依赖项：

```
<dependencies>
        <!-- SLF4J (+ LOGBack) for logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.6.4</version>
        </dependency>
        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-core</artifactId>
            <version>1.0.0</version>
        </dependency>
        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-classic</artifactId>
            <version>1.0.0</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.groovy</groupId>
            <artifactId>groovy</artifactId>
            <version>1.8.3</version>
        </dependency>

        <!-- The servlet API that I installed in my local repo -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>3.0</version>
            <type>jar</type>
            <scope>provided</scope>
            <!--optional>false</optional-->
        </dependency>

        <!-- JUnit for testing -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.2</version>
            <scope>test</scope>
        </dependency>
    </dependencies> 
```

编辑：我只在使用 Tomcat (7.0.14) 时遇到问题。玻璃鱼很好。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-03T19:17:54.380

这是 Tomcat 7 中的一个错误。我将其报告为[issue 53354](https://issues.apache.org/bugzilla/show_bug.cgi?id=53354)。

> 由于无法在 a 中指定调用顺序`@WebFilter`，因此用户必须`<filter-mapping>`在 web.xml 中显式指定。这与`@WebFilter(filterName)`Glassfish 和 JBoss AS 中的 a 结合使用，如下所示：
> 
> ```
> @WebFilter(filterName="filter1")
> public class Filter1 implements Filter {}
> 
> @WebFilter(filterName="filter2")
> public class Filter2 implements Filter {} 
> ```
> 
> 和
> 
> ```
> <filter-mapping>
>     <filter-name>filter1</filter-name>
>     <url-pattern>/url1/*</url-pattern>
> </filter-mapping>
> <filter-mapping>
>     <filter-name>filter2</filter-name>
>     <url-pattern>/url2/*</url-pattern>
> </filter-mapping> 
> ```
> 
> 但是它在 Tomcat 7.0.27 中失败并出现以下令人困惑的异常（`<url-pattern>` *已*设置）
> 
> ```
> Caused by: java.lang.IllegalArgumentException: Filter mapping must specify either a <url-pattern> or a <servlet-name>
>     at org.apache.catalina.core.StandardContext.validateFilterMap(StandardContext.java:3009)
>     at org.apache.catalina.core.StandardContext.addFilterMap(StandardContext.java:2968)
>     at org.apache.catalina.deploy.WebXml.configureContext(WebXml.java:1207)
>     at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1294)
>     at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:855)
>     at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:345)
>     at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
>     at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
>     at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
>     at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
>     ... 7 more 
> ```

同时，您最好的选择是使用 Glassfish 或 JBoss AS，或者`<filter>`无论如何注册过滤器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T14:40:13.960

您必须为 Servlet 过滤器指定一个目标。为“servletNames”或“urlPatterns”提供一个值。

[http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/WebFilter.html](http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/WebFilter.html)

例如

```
@WebFilter(filterName="mustBeSignedInFilter", urlPatterns={ "/signed/in/path/*" })
public class MustBeSignedInFilter implements Filter 
```

# oracle - 什么 Oracle 数据类型可以通过 SSIS 在 MSSQL 中轻松转换为 BIT？

> ID：10856868
> 
> 赞同：0
> 
> 时间：2012-06-01T20:22:59.990
> 
> 标签：oracle, sql-server-2008, ssis

我有一个从 Oracle 表到 MSSQL 表的数据流，其中一个字段的数据类型为 BIT。Oracle 表目前使用字符 Y 和 N（我不确定数据类型，无法检查），但 MSSQL 表需要数据类型为 BIT。我可以在 Oracle 查询中使用什么类型的强制转换，以便平稳地提取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:01:56.667

使用 char(1)，然后使用派生列转换，如下所示：

```
(DT_BOOL)(OracleField == "Y"?1:0) 
```

将此列命名为 OracleFieldAsBool 之类的名称，然后在其余数据流中使用它代替原始列。

# ruby-on-rails - rspec be nil 和 be_nil 有什么区别

> ID：10856869
> 
> 赞同：15
> 
> 时间：2012-06-01T20:23:02.340
> 
> 标签：ruby-on-rails, rspec2

我正在使用 rspec 并用于断言

```
student.name should be nil
student.name should be_nil 
```

两者似乎都有效。`be nil`使用`be_nil`???有区别吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-01T21:04:33.003

真的没有什么区别，除了`be nil`动态定义，并且`be_nil`由 rspec 专门编程。

当你说`should.be something`rspec 尝试以下

```
 [:==, :<, :<=, :>=, :>, :===].each do |operator|
      define_method operator do |operand|
        BeComparedTo.new(operand, operator)
      end
    end 
```

然而，当您尝试时，`should.be_nil`它只是检查

```
object.nil? 
```

[https://github.com/rspec/rspec-expectations/blob/master/lib/rspec/matchers/built_in/be.rb](https://github.com/rspec/rspec-expectations/blob/master/lib/rspec/matchers/built_in/be.rb)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T20:32:26.117

我认为没有区别，但它用于与其他方法（如`be_true`or ）保持一致`be_false`。

在引擎盖下`be`检查`id`两个元素：

*   与`nil`

*   失败，`true`因为在 Ruby 中，一切都不是，`false`也不`nil`是`true`

*   失败，`false`因为两者`nil`都`false`匹配

# reporting-services - SSRS 报告列名称未更改

> ID：10856872
> 
> 赞同：0
> 
> 时间：2012-06-01T20:23:22.077
> 
> 标签：reporting-services, reportingservices-2005

我正在编写 SSRS 报告 2005。在报告中有一些列，例如名字、姓氏。我正在将列名称更改为 FirstName、LastName。在我显示报告的预览时执行此操作后，将反映旧字段而不是新字段。当我查看报告的 XML 时，我可以查看 XML 中的更改。那么为什么我无法在预览中查看我的更改。有什么缓存问题吗？我该如何解决这个问题。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:29:06.540

SSRS 具有严重的缓存倾向。在“预览”选项卡中，您应该右键单击您的报告并点击“刷新”。每次更改报告时，您可能都必须这样做。

# security - Clojure 安全性：信息流 + 能力系统

> ID：10856873
> 
> 赞同：1
> 
> 时间：2012-06-01T20:23:23.267
> 
> 标签：security, clojure

## 概括

Clojure 中是否有类似[http://en.wikipedia.org/wiki/E_programming_language](http://en.wikipedia.org/wiki/E_programming_language)作为 DSL 的东西？

## 背景

我知道：

*   [http://bit.ly/N4jnTI](http://bit.ly/N4jnTI)和[http://bit.ly/Lm3SSD](http://bit.ly/Lm3SSD)

    但是，两者都没有提供我想要的。

## 语境

我是能力系统和信息流的忠实粉丝。我想知道是否有人为这两种技术开发了 Clojure DSL。以下将是理想的：

*   所有对象都有一些标签（比如在它的元表中），列出了谁对该对象具有读取权限

*   当我想以用户“foo”的身份运行查询时，我设置了一些上下文变量，说“现在，只使用 foo 的功能”——然后函数，当它试图访问对象时，要么获取对象（如果 foo 有访问它）或 nil （如果 foo 无权访问它）。目前，泄露有关物体存在的信息对我来说并不是什么大问题。

## 问题

所以问题是——作为 Clojure DSL，这很容易做到吗？每个对象都有一些功能标签，我们可以在某些标签下执行一些功能/代码，运行时系统确保没有人可以访问他们不应该访问的东西。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T01:19:50.657

您可以使用元数据和先决条件执行此操作，然后创建宏以向其添加 DSL/语法，但我建议跳过宏并仅使用先决条件和元数据。

*   每个对象都有一段元数据，其中列出了它的功能。
*   每个函数都有一个检查元数据的前提条件。

# ruby - Ruby 中是否有任何允许插值但不允许转义字符的字符串语法？

> ID：10856877
> 
> 赞同：3
> 
> 时间：2012-06-01T20:23:54.110
> 
> 标签：ruby

Ruby 中是否有任何单行字符串文字语法允许字符串插值但不将反斜杠解释为转义字符？

IE，

在哪里`ruby_var = "foo"`

我希望能够键入相当于`C:\some\windows\path\#{ruby_var}\path`生成字符串的内容`C:\some\windows\path\foo\path`，而不必转义反斜杠或求助于多行heredoc。

```
puts "C:\some\windows\path\#{ruby_var}\path"
puts "C:\some\windows\path\path_#{ruby_var}\path"
=> C: omewindowspath#{ruby_var}path
=> C: omewindowspathpath_foopath

puts 'C:\some\windows\path\#{ruby_var}\path'
puts 'C:\some\windows\path\path_#{ruby_var}\path'
=> C:\some\windows\path\#{ruby_var}\path
=> C:\some\windows\path\path_#{ruby_var}\path

puts %{C:\some\windows\path\#{ruby_var}\path}
puts %{C:\some\windows\path\path_#{ruby_var}\path}
=> C: omewindowspath#{ruby_var}path
=> C: omewindowspathpath_foopath

puts %q{C:\some\windows\path\#{ruby_var}\path}
puts %q{C:\some\windows\path\path_#{ruby_var}\path}
=> C:\some\windows\path\#{ruby_var}\path
=> C:\some\windows\path\path_#{ruby_var}\path 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T20:32:42.900

```
ruby_var = "hello"
puts 'C:\some\windows\path\%s\path' % ruby_var
#=>C:\some\windows\path\hello\path 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T20:33:14.527

```
'C:\some\windows\path\%s\path' % ruby_var
#=> 'C:\some\windows\path\foo\path' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T20:34:56.347

我不认为这是可能的。

你应该考虑使用正斜杠来让它看起来更漂亮；我相信 Windows 中的标准 ruby​​ 库不会关心你使用什么样的斜线。

还有：

```
File.join('C:', 'path', ruby_var) 
```

# r - R插值极线图

> ID：10856882
> 
> 赞同：30
> 
> 时间：2012-06-01T20:24:12.377
> 
> 标签：r, plot, contour, polar-coordinates

我正在尝试根据插值点数据在 R 中编写等高线极坐标图。换句话说，我有极坐标中的数据，其幅度值我想绘制并显示插值。我想批量制作类似于以下内容的图（在 OriginPro 中制作）：

![OriginPro 等高线极坐标图](../Images/4af7ed8b2b3490e78493653be62b4ed0.png)

到目前为止，我在 R 中最接近的尝试基本上是：

```
### Convert polar -> cart
# ToDo #

### Dummy data
x = rnorm(20)
y = rnorm(20)
z = rnorm(20)

### Interpolate
library(akima)
tmp = interp(x,y,z)

### Plot interpolation
library(fields)
image.plot(tmp)

### ToDo ###
#Turn off all axis
#Plot polar axis ontop 
```

这会产生类似的东西： ![虚拟 R 插值图](../Images/94298ff40338f48698fb6703dc79fbea.png)

虽然这显然不会成为最终产品，但这是在 R 中创建等高线极坐标图的最佳方式吗？

[除了2008 年的存档邮件列表讨论](https://stat.ethz.ch/pipermail/r-help/2008-December/182166.html)之外，我找不到关于该主题的任何内容。我想我并没有完全致力于将 R 用于绘图（尽管那是我拥有数据的地方），但我反对手动创建。因此，如果有另一种具有此功能的语言，请提出建议（我确实看到了[Python 示例](https://stackoverflow.com/questions/9071084/polar-contour-plot-in-matplotlib-best-modern-way-to-do-it)）。

### 编辑

关于使用 ggplot2 的建议 - 我似乎无法让 geom_tile 例程在极坐标中绘制插值数据。我在下面包含了说明我所在位置的代码。我可以用笛卡尔和极坐标绘制原件，但我只能得到插值数据以用笛卡尔绘制。我可以使用 geom_point 在极坐标中绘制插值点，但我不能将该方法扩展到 geom_tile。我唯一的猜测是这与数据顺序有关 - 即 geom_tile 期待排序/排序的数据 - 我已经尝试了每次迭代，我可以想到将数据排序为升序/降序方位角和天顶，没有变化。

```
## Libs
library(akima)
library(ggplot2)

## Sample data in az/el(zenith)
tmp = seq(5,355,by=10)
geoms <- data.frame(az = tmp,
                    zen = runif(length(tmp)),
                    value = runif(length(tmp)))
geoms$az_rad = geoms$az*pi/180
## These points plot fine
ggplot(geoms)+geom_point(aes(az,zen,colour=value))+
    coord_polar()+
    scale_x_continuous(breaks=c(0,45,90,135,180,225,270,315,360),limits=c(0,360))+
    scale_colour_gradient(breaks=seq(0,1,by=.1),low="black",high="white")

## Need to interpolate - most easily done in cartesian
x = geoms$zen*sin(geoms$az_rad)
y = geoms$zen*cos(geoms$az_rad)
df.ptsc = data.frame(x=x,y=y,z=geoms$value)
intc = interp(x,y,geoms$value,
             xo=seq(min(x), max(x), length = 100),
             yo=seq(min(y), max(y), length = 100),linear=FALSE)
df.intc = data.frame(expand.grid(x=intc$x,y=intc$y),
               z=c(intc$z),value=cut((intc$z),breaks=seq(0,1,.1)))
## This plots fine in cartesian coords
ggplot(df.intc)+scale_x_continuous(limits=c(-1.1,1.1))+
                scale_y_continuous(limits=c(-1.1,1.1))+
                geom_point(data=df.ptsc,aes(x,y,colour=z))+
                scale_colour_gradient(breaks=seq(0,1,by=.1),low="white",high="red")
ggplot(df.intc)+geom_tile(aes(x,y,fill=z))+
                scale_x_continuous(limits=c(-1.1,1.1))+
                scale_y_continuous(limits=c(-1.1,1.1))+
                geom_point(data=df.ptsc,aes(x,y,colour=z))+
                scale_colour_gradient(breaks=seq(0,1,by=.1),low="white",high="red")

## Convert back to polar
int_az = atan2(df.intc$x,df.intc$y)
int_az = int_az*180/pi
int_az = unlist(lapply(int_az,function(x){if(x<0){x+360}else{x}}))
int_zen = sqrt(df.intc$x^2+df.intc$y^2)
df.intp = data.frame(az=int_az,zen=int_zen,z=df.intc$z,value=df.intc$value)
## Just to check
az = atan2(x,y)
az = az*180/pi
az = unlist(lapply(az,function(x){if(x<0){x+360}else{x}}))
zen = sqrt(x^2+y^2)
## The conversion looks correct [[az = geoms$az, zen = geoms$zen]]

## This plots the interpolated locations
ggplot(df.intp)+geom_point(aes(az,zen))+coord_polar()
## This doesn't track to geom_tile
ggplot(df.intp)+geom_tile(aes(az,zen,fill=value))+coord_polar() 
```

### 最终结果

我终于从接受的答案（基本图形）中获取了代码并更新了代码。我添加了一种薄板样条插值方法、是否外推的选项、数据点叠加，以及为插值表面执行连续颜色或分段颜色的能力。请参阅下面的示例。

```
PolarImageInterpolate <- function(
    ### Plotting data (in cartesian) - will be converted to polar space.
    x, y, z, 
    ### Plot component flags
    contours=TRUE,   # Add contours to the plotted surface
    legend=TRUE,        # Plot a surface data legend?
    axes=TRUE,      # Plot axes?
    points=TRUE,        # Plot individual data points
    extrapolate=FALSE, # Should we extrapolate outside data points?
    ### Data splitting params for color scale and contours
    col_breaks_source = 1, # Where to calculate the color brakes from (1=data,2=surface)
                                                 # If you know the levels, input directly (i.e. c(0,1))
    col_levels = 10,    # Number of color levels to use - must match length(col) if 
                                        #col specified separately
    col = rev(heat.colors(col_levels)),  # Colors to plot
    contour_breaks_source = 1, # 1=z data, 2=calculated surface data
                                                        # If you know the levels, input directly (i.e. c(0,1))
    contour_levels = col_levels+1, # One more contour break than col_levels (must be
                                                                # specified correctly if done manually
    ### Plotting params
    outer.radius = round_any(max(sqrt(x^2+y^2)),5,f=ceiling),  
    circle.rads = pretty(c(0,outer.radius)), #Radius lines
    spatial_res=1000, #Resolution of fitted surface
    single_point_overlay=0, #Overlay "key" data point with square 
                                                    #(0 = No, Other = number of pt)
    ### Fitting parameters
    interp.type = 1, #1 = linear, 2 = Thin plate spline 
    lambda=0){ #Used only when interp.type = 2

minitics <- seq(-outer.radius, outer.radius, length.out = spatial_res)
# interpolate the data
    if (interp.type ==1 ){
    Interp <- akima:::interp(x = x, y = y, z = z, 
                    extrap = extrapolate, 
                    xo = minitics, 
                    yo = minitics, 
                    linear = FALSE)
    Mat <- Interp[[3]]
    }
    else if (interp.type == 2){
        library(fields)
        grid.list = list(x=minitics,y=minitics)
        t = Tps(cbind(x,y),z,lambda=lambda)
        tmp = predict.surface(t,grid.list,extrap=extrapolate)
        Mat = tmp$z
    }
    else {stop("interp.type value not valid")}

# mark cells outside circle as NA
markNA <- matrix(minitics, ncol = spatial_res, nrow = spatial_res) 
Mat[!sqrt(markNA ^ 2 + t(markNA) ^ 2) < outer.radius] <- NA 

    ### Set contour_breaks based on requested source
    if ((length(contour_breaks_source == 1)) & (contour_breaks_source[1] == 1)){
        contour_breaks = seq(min(z,na.rm=TRUE),max(z,na.rm=TRUE),
                            by=(max(z,na.rm=TRUE)-min(z,na.rm=TRUE))/(contour_levels-1))
    }
    else if ((length(contour_breaks_source == 1)) & (contour_breaks_source[1] == 2)){
        contour_breaks = seq(min(Mat,na.rm=TRUE),max(Mat,na.rm=TRUE),
                            by=(max(Mat,na.rm=TRUE)-min(Mat,na.rm=TRUE))/(contour_levels-1))
    } 
    else if ((length(contour_breaks_source) == 2) & (is.numeric(contour_breaks_source))){
        contour_breaks = pretty(contour_breaks_source,n=contour_levels)
        contour_breaks = seq(contour_breaks_source[1],contour_breaks_source[2],
                            by=(contour_breaks_source[2]-contour_breaks_source[1])/(contour_levels-1))
    }
    else {stop("Invalid selection for \"contour_breaks_source\"")}

    ### Set color breaks based on requested source
    if ((length(col_breaks_source) == 1) & (col_breaks_source[1] == 1))
        {zlim=c(min(z,na.rm=TRUE),max(z,na.rm=TRUE))}
    else if ((length(col_breaks_source) == 1) & (col_breaks_source[1] == 2))
        {zlim=c(min(Mat,na.rm=TRUE),max(Mat,na.rm=TRUE))}
    else if ((length(col_breaks_source) == 2) & (is.numeric(col_breaks_source)))
        {zlim=col_breaks_source}
    else {stop("Invalid selection for \"col_breaks_source\"")}

# begin plot
    Mat_plot = Mat
    Mat_plot[which(Mat_plot<zlim[1])]=zlim[1]
    Mat_plot[which(Mat_plot>zlim[2])]=zlim[2]
image(x = minitics, y = minitics, Mat_plot , useRaster = TRUE, asp = 1, axes = FALSE, xlab = "", ylab = "", zlim = zlim, col = col)

# add contours if desired
if (contours){
    CL <- contourLines(x = minitics, y = minitics, Mat, levels = contour_breaks)
    A <- lapply(CL, function(xy){
                lines(xy$x, xy$y, col = gray(.2), lwd = .5)
            })
}
    # add interpolated point if desired
    if (points){
            points(x,y,pch=4)
}
    # add overlay point (used for trained image marking) if desired
    if (single_point_overlay!=0){
            points(x[single_point_overlay],y[single_point_overlay],pch=0)
    }

# add radial axes if desired
if (axes){ 
    # internals for axis markup
    RMat <- function(radians){
        matrix(c(cos(radians), sin(radians), -sin(radians), cos(radians)), ncol = 2)
    }    

    circle <- function(x, y, rad = 1, nvert = 500){
        rads <- seq(0,2*pi,length.out = nvert)
        xcoords <- cos(rads) * rad + x
        ycoords <- sin(rads) * rad + y
        cbind(xcoords, ycoords)
    }

    # draw circles
    if (missing(circle.rads)){
        circle.rads <- pretty(c(0,outer.radius))
    }

    for (i in circle.rads){
        lines(circle(0, 0, i), col = "#66666650")
    }

    # put on radial spoke axes:
    axis.rads <- c(0, pi / 6, pi / 3, pi / 2, 2 * pi / 3, 5 * pi / 6)
    r.labs <- c(90, 60, 30, 0, 330, 300)
    l.labs <- c(270, 240, 210, 180, 150, 120)

    for (i in 1:length(axis.rads)){ 
        endpoints <- zapsmall(c(RMat(axis.rads[i]) %*% matrix(c(1, 0, -1, 0) * outer.radius,ncol = 2)))
        segments(endpoints[1], endpoints[2], endpoints[3], endpoints[4], col = "#66666650")
        endpoints <- c(RMat(axis.rads[i]) %*% matrix(c(1.1, 0, -1.1, 0) * outer.radius, ncol = 2))
        lab1 <- bquote(.(r.labs[i]) * degree)
        lab2 <- bquote(.(l.labs[i]) * degree)
        text(endpoints[1], endpoints[2], lab1, xpd = TRUE)
        text(endpoints[3], endpoints[4], lab2, xpd = TRUE)
    }

    axis(2, pos = -1.25 * outer.radius, at = sort(union(circle.rads,-circle.rads)), labels = NA)
    text( -1.26 * outer.radius, sort(union(circle.rads, -circle.rads)),sort(union(circle.rads, -circle.rads)), xpd = TRUE, pos = 2)
}

# add legend if desired
# this could be sloppy if there are lots of breaks, and that's why it's optional.
# another option would be to use fields:::image.plot(), using only the legend. 
# There's an example for how to do so in its documentation
    if (legend){
        library(fields)
        image.plot(legend.only=TRUE, smallplot=c(.78,.82,.1,.8), col=col, zlim=zlim)
    # ylevs <- seq(-outer.radius, outer.radius, length = contour_levels+ 1)
    # #ylevs <- seq(-outer.radius, outer.radius, length = length(contour_breaks))
            # rect(1.2 * outer.radius, ylevs[1:(length(ylevs) - 1)], 1.3 * outer.radius, ylevs[2:length(ylevs)], col = col, border = NA, xpd = TRUE)
    # rect(1.2 * outer.radius, min(ylevs), 1.3 * outer.radius, max(ylevs), border = "#66666650", xpd = TRUE)
    # text(1.3 * outer.radius, ylevs[seq(1,length(ylevs),length.out=length(contour_breaks))],round(contour_breaks, 1), pos = 4, xpd = TRUE)
    }
} 
```

![在此处输入图像描述](../Images/ce540093d7592d52593f5b41d1afce5f.png) ![在此处输入图像描述](../Images/e57a88b291464ee3ff4c496815419e95.png) ![在此处输入图像描述](../Images/9720fbca70b15ecfd5aa0666a88e1083.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-05T19:35:53.650

[[主要编辑]]我终于能够在我最初的尝试中添加轮廓线，但是由于原始矩阵的两侧被扭曲并没有实际接触，所以线条在 360 度和 0 度之间不匹配。所以我完全重新考虑了这个问题，但把原来的帖子留在下面，因为这样绘制矩阵仍然很酷。我现在发布的函数接受 x、y、z 和几个可选参数，并吐出与您想要的示例、径向轴、图例、轮廓线等非常相似的东西：

```
 PolarImageInterpolate <- function(x, y, z, outer.radius = 1, 
            breaks, col, nlevels = 20, contours = TRUE, legend = TRUE, 
            axes = TRUE, circle.rads = pretty(c(0,outer.radius))){

        minitics <- seq(-outer.radius, outer.radius, length.out = 1000)
        # interpolate the data
        Interp <- akima:::interp(x = x, y = y, z = z, 
                extrap = TRUE, 
                xo = minitics, 
                yo = minitics, 
                linear = FALSE)
        Mat <- Interp[[3]]

        # mark cells outside circle as NA
        markNA <- matrix(minitics, ncol = 1000, nrow = 1000) 
        Mat[!sqrt(markNA ^ 2 + t(markNA) ^ 2) < outer.radius] <- NA 

        # sort out colors and breaks:
        if (!missing(breaks) & !missing(col)){
            if (length(breaks) - length(col) != 1){
                stop("breaks must be 1 element longer than cols")
            }
        }
        if (missing(breaks) & !missing(col)){
            breaks <- seq(min(Mat,na.rm = TRUE), max(Mat, na.rm = TRUE), length = length(col) + 1)
            nlevels <- length(breaks) - 1
        }
        if (missing(col) & !missing(breaks)){
            col <- rev(heat.colors(length(breaks) - 1))
            nlevels <- length(breaks) - 1
        }
        if (missing(breaks) & missing(col)){
            breaks <- seq(min(Mat,na.rm = TRUE), max(Mat, na.rm = TRUE), length = nlevels + 1)
            col <- rev(heat.colors(nlevels))
        }

        # if legend desired, it goes on the right and some space is needed
        if (legend) {
            par(mai = c(1,1,1.5,1.5))
        }

        # begin plot
        image(x = minitics, y = minitics, t(Mat), useRaster = TRUE, asp = 1, 
            axes = FALSE, xlab = "", ylab = "", col = col, breaks = breaks)

        # add contours if desired
        if (contours){
            CL <- contourLines(x = minitics, y = minitics, t(Mat), levels = breaks)
            A <- lapply(CL, function(xy){
                        lines(xy$x, xy$y, col = gray(.2), lwd = .5)
                    })
        }

        # add radial axes if desired
        if (axes){ 
            # internals for axis markup
            RMat <- function(radians){
                matrix(c(cos(radians), sin(radians), -sin(radians), cos(radians)), ncol = 2)
            }    

            circle <- function(x, y, rad = 1, nvert = 500){
                rads <- seq(0,2*pi,length.out = nvert)
                xcoords <- cos(rads) * rad + x
                ycoords <- sin(rads) * rad + y
                cbind(xcoords, ycoords)
            }

            # draw circles
            if (missing(circle.rads)){
                circle.rads <- pretty(c(0,outer.radius))
            }

            for (i in circle.rads){
                lines(circle(0, 0, i), col = "#66666650")
            }

            # put on radial spoke axes:
            axis.rads <- c(0, pi / 6, pi / 3, pi / 2, 2 * pi / 3, 5 * pi / 6)
            r.labs <- c(90, 60, 30, 0, 330, 300)
            l.labs <- c(270, 240, 210, 180, 150, 120)

            for (i in 1:length(axis.rads)){ 
                endpoints <- zapsmall(c(RMat(axis.rads[i]) %*% matrix(c(1, 0, -1, 0) * outer.radius,ncol = 2)))
                segments(endpoints[1], endpoints[2], endpoints[3], endpoints[4], col = "#66666650")
                endpoints <- c(RMat(axis.rads[i]) %*% matrix(c(1.1, 0, -1.1, 0) * outer.radius, ncol = 2))
                lab1 <- bquote(.(r.labs[i]) * degree)
                lab2 <- bquote(.(l.labs[i]) * degree)
                text(endpoints[1], endpoints[2], lab1, xpd = TRUE)
                text(endpoints[3], endpoints[4], lab2, xpd = TRUE)
            }
            axis(2, pos = -1.2 * outer.radius, at = sort(union(circle.rads,-circle.rads)), labels = NA)
            text( -1.21 * outer.radius, sort(union(circle.rads, -circle.rads)),sort(union(circle.rads, -circle.rads)), xpd = TRUE, pos = 2)
        }

        # add legend if desired
        # this could be sloppy if there are lots of breaks, and that's why it's optional.
        # another option would be to use fields:::image.plot(), using only the legend. 
        # There's an example for how to do so in its documentation
        if (legend){
            ylevs <- seq(-outer.radius, outer.radius, length = nlevels + 1)
            rect(1.2 * outer.radius, ylevs[1:(length(ylevs) - 1)], 1.3 * outer.radius, ylevs[2:length(ylevs)], col = col, border = NA, xpd = TRUE)
            rect(1.2 * outer.radius, min(ylevs), 1.3 * outer.radius, max(ylevs), border = "#66666650", xpd = TRUE)
            text(1.3 * outer.radius, ylevs,round(breaks, 1), pos = 4, xpd = TRUE)
        }
    }

    # Example
    set.seed(10)
    x <- rnorm(20)
    y <- rnorm(20)
    z <- rnorm(20)
    PolarImageInterpolate(x,y,z, breaks = seq(-2,8,by = 1)) 
```

此处提供代码：[https ://gist.github.com/2893780](https://gist.github.com/2893780)

![在此处输入图像描述](../Images/5282deec2495dd9ffb9dd649d411aa3d.png)

[[我的原始答案如下]]

我认为您的问题对我自己很有教育意义，所以我接受了挑战并提出了以下不完整的功能。它的工作原理类似于`image()`，想要一个矩阵作为其主要输入，并返回与您上面的示例类似的内容，减去等高线。[[在注意到它没有按照我声称的顺序绘制后，我在 6 月 6 日编辑了代码。固定的。目前正在研究等高线和图例。]]

```
 # arguments:

    # Mat, a matrix of z values as follows:
    # leftmost edge of first column = 0 degrees, rightmost edge of last column = 360 degrees
    # columns are distributed in cells equally over the range 0 to 360 degrees, like a grid prior to transform
    # first row is innermost circle, last row is outermost circle

    # outer.radius, By default everything scaled to unit circle 
    # ppa: points per cell per arc. If your matrix is little, make it larger for a nice curve
    # cols: color vector. default = rev(heat.colors(length(breaks)-1))
    # breaks: manual breaks for colors. defaults to seq(min(Mat),max(Mat),length=nbreaks)
    # nbreaks: how many color levels are desired?
    # axes: should circular and radial axes be drawn? radial axes are drawn at 30 degree intervals only- this could be made more flexible.
    # circle.rads: at which radii should circles be drawn? defaults to pretty(((0:ncol(Mat)) / ncol(Mat)) * outer.radius)

    # TODO: add color strip legend.

    PolarImagePlot <- function(Mat, outer.radius = 1, ppa = 5, cols, breaks, nbreaks = 51, axes = TRUE, circle.rads){

        # the image prep
        Mat      <- Mat[, ncol(Mat):1]
        radii    <- ((0:ncol(Mat)) / ncol(Mat)) * outer.radius

        # 5 points per arc will usually do
        Npts     <- ppa
        # all the angles for which a vertex is needed
        radians  <- 2 * pi * (0:(nrow(Mat) * Npts)) / (nrow(Mat) * Npts) + pi / 2
        # matrix where each row is the arc corresponding to a cell
        rad.mat  <- matrix(radians[-length(radians)], ncol = Npts, byrow = TRUE)[1:nrow(Mat), ]
        rad.mat  <- cbind(rad.mat, rad.mat[c(2:nrow(rad.mat), 1), 1])

        # the x and y coords assuming radius of 1
        y0 <- sin(rad.mat)
        x0 <- cos(rad.mat)

        # dimension markers
        nc <- ncol(x0)
        nr <- nrow(x0)
        nl <- length(radii)

        # make a copy for each radii, redimension in sick ways
        x1 <- aperm( x0 %o% radii, c(1, 3, 2))
        # the same, but coming back the other direction to close the polygon
        x2 <- x1[, , nc:1]
        #now stick together
        x.array <- abind:::abind(x1[, 1:(nl - 1), ], x2[, 2:nl, ], matrix(NA, ncol = (nl - 1), nrow = nr), along = 3)
        # final product, xcoords, is a single vector, in order, 
        # where all the x coordinates for a cell are arranged
        # clockwise. cells are separated by NAs- allows a single call to polygon()
        xcoords <- aperm(x.array, c(3, 1, 2))
        dim(xcoords) <- c(NULL)
        # repeat for y coordinates
        y1 <- aperm( y0 %o% radii,c(1, 3, 2))
        y2 <- y1[, , nc:1]
        y.array <- abind:::abind(y1[, 1:(length(radii) - 1), ], y2[, 2:length(radii), ], matrix(NA, ncol = (length(radii) - 1), nrow = nr), along = 3)
        ycoords <- aperm(y.array, c(3, 1, 2))
        dim(ycoords) <- c(NULL)

        # sort out colors and breaks:
        if (!missing(breaks) & !missing(cols)){
            if (length(breaks) - length(cols) != 1){
                stop("breaks must be 1 element longer than cols")
            }
        }
        if (missing(breaks) & !missing(cols)){
            breaks <- seq(min(Mat,na.rm = TRUE), max(Mat, na.rm = TRUE), length = length(cols) + 1)
        }
        if (missing(cols) & !missing(breaks)){
            cols <- rev(heat.colors(length(breaks) - 1))
        }
        if (missing(breaks) & missing(cols)){
            breaks <- seq(min(Mat,na.rm = TRUE), max(Mat, na.rm = TRUE), length = nbreaks)
            cols <- rev(heat.colors(length(breaks) - 1))
        }

        # get a color for each cell. Ugly, but it gets them in the right order
        cell.cols <- as.character(cut(as.vector(Mat[nrow(Mat):1,ncol(Mat):1]), breaks = breaks, labels = cols))

        # start empty plot
        plot(NULL, type = "n", ylim = c(-1, 1) * outer.radius, xlim = c(-1, 1) * outer.radius, asp = 1, axes = FALSE, xlab = "", ylab = "")
        # draw polygons with no borders:
        polygon(xcoords, ycoords, col = cell.cols, border = NA)

        if (axes){

            # a couple internals for axis markup.

            RMat <- function(radians){
                matrix(c(cos(radians), sin(radians), -sin(radians), cos(radians)), ncol = 2)
            }

            circle <- function(x, y, rad = 1, nvert = 500){
                rads <- seq(0,2*pi,length.out = nvert)
                xcoords <- cos(rads) * rad + x
                ycoords <- sin(rads) * rad + y
                cbind(xcoords, ycoords)
            }
            # draw circles
            if (missing(circle.rads)){
                circle.rads <- pretty(radii)
            }
            for (i in circle.rads){
                lines(circle(0, 0, i), col = "#66666650")
            }

            # put on radial spoke axes:
            axis.rads <- c(0, pi / 6, pi / 3, pi / 2, 2 * pi / 3, 5 * pi / 6)
            r.labs <- c(90, 60, 30, 0, 330, 300)
            l.labs <- c(270, 240, 210, 180, 150, 120)

            for (i in 1:length(axis.rads)){ 
                endpoints <- zapsmall(c(RMat(axis.rads[i]) %*% matrix(c(1, 0, -1, 0) * outer.radius,ncol = 2)))
                segments(endpoints[1], endpoints[2], endpoints[3], endpoints[4], col = "#66666650")
                endpoints <- c(RMat(axis.rads[i]) %*% matrix(c(1.1, 0, -1.1, 0) * outer.radius, ncol = 2))
                lab1 <- bquote(.(r.labs[i]) * degree)
                lab2 <- bquote(.(l.labs[i]) * degree)
                text(endpoints[1], endpoints[2], lab1, xpd = TRUE)
                text(endpoints[3], endpoints[4], lab2, xpd = TRUE)
            }
            axis(2, pos = -1.2 * outer.radius, at = sort(union(circle.rads,-circle.rads)))
        }
        invisible(list(breaks = breaks, col = cols))
    } 
```

我不知道如何在极地表面上正确插值，所以假设你可以实现这一点并将你的数据放入矩阵中，那么这个函数将为你绘制它。每个单元格都被绘制，与 一样`image()`，但内部的单元格非常小。这是一个例子：

```
 set.seed(1)
    x <- runif(20, min = 0, max = 360)
    y <- runif(20, min = 0, max = 40)
    z <- rnorm(20)

    Interp <- akima:::interp(x = x, y = y, z = z, 
            extrap = TRUE, 
            xo = seq(0, 360, length.out = 300), 
            yo = seq(0, 40, length.out = 100), 
            linear = FALSE)
    Mat <- Interp[[3]]

    PolarImagePlot(Mat) 
```

![在此处输入图像描述](../Images/8c5c65d3ab0f2d2d91bb0a09a5ef1161.png)

无论如何，请随意修改它并随心所欲地使用它。代码在 Github 上可用：[https ://gist.github.com/2877281](https://gist.github.com/2877281)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-02T06:30:18.317

## 目标图

![ggplot2中的等高线图](../Images/435e535dda910e73202aa1ebd4df0619.png)

## 示例代码

```
library(akima) 
library(ggplot2) 

x = rnorm(20)
y = rnorm(20)
z = rnorm(20)

t. = interp(x,y,z)
t.df <- data.frame(t.)

gt <- data.frame( expand.grid(X1=t.$x, 
                              X2=t.$y), 
                  z=c(t.$z), 
                  value=cut(c(t.$z), 
                            breaks=seq(-1,1,0.25)))

p <- ggplot(gt) + 
    geom_tile(aes(X1,X2,fill=value)) + 
    geom_contour(aes(x=X1,y=X2,z=z), colour="black") + 
    coord_polar()
p <- p + scale_fill_brewer()
p 
```

`ggplot2`然后有很多选项可以探索重新色阶、注释等，但这应该可以帮助您入门。

[归功于 Andrie de Vries](https://groups.google.com/group/ggplot2/browse_thread/thread/f1ce9e60ff6bf45d/4788e87ef0178e53)的这个答案，这让我得到了这个解决方案。

# android - ICS 新的日期选择器不工作

> ID：10856883
> 
> 赞同：2
> 
> 时间：2012-06-01T20:24:17.820
> 
> 标签：android, date, dialog, datepicker, timepicker

我已设置 android:targetSdkVersion=15 并将 SDK 构建为 15，并假设应用程序将使用来自 ICS 的新的不错的日期选择器，而在 2.x 设备上它将使用旧的讨厌的日期选择器。

```
 <uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" /> 
```

不幸的是，它不起作用。也许我错过了一些东西，但根据 API Demos，它应该可以工作。哪里可能有问题？

编辑：我创建了示例项目，一切正常，所以也许我需要以某种方式清理或修复我的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:52:37.240

我已经解决了这个问题。我正在使用旧的 GreenDroid 库，它使用从 android:Theme.Light 扩展的主题，所以我不得不将主题更改为 android:Theme.Holo.Light，现在一切似乎都很好。即使在 2.x 设备上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:33:09.543

如果您使用的是 Eclipse，您可以转到 Project-> properties -> 然后选择 android。从那里您应该能够选择目标 API 级别。还要检查 project.properties 文件以查找此行

项目目标

目标=谷歌公司：谷歌 API：8

project.properties 文件是自动创建的，因此在那里修改某些内容不会解决您的问题，但它可能会告诉您它没有尝试使用 SDK 15

# oracle-apex - APEX 3.2：两个不同页面上的相同唯一 ID

> ID：10856884
> 
> 赞同：0
> 
> 时间：2012-06-01T20:24:24.730
> 
> 标签：oracle-apex

我有两个单独的页面：

*   页面 A：用户提交问题的主页
*   B页：附件页

页面 A 将在页面提交时分配一个唯一 ID。我想在页面 A 上有一个按钮，允许用户向问题添加附件。当用户单击该按钮时，附件页面（页面 B）将在单独的窗口中打开，他们可以将附件添加到问题中。当他们单击页面 B 上的“完成”按钮时，附件将添加到不同的表中，但具有来自页面 A 的相应唯一 ID。

如何将唯一 ID 从页面 A 转移到页面 B，并将该 ID 添加到单个问题的一个或多个附件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:42:18.533

如果您在用户单击页面 A 上的新按钮时将唯一 ID 保存到页面项目中，则可以在页面 B 上引用该值。

# javascript - 验证表单中的多个字段

> ID：10856887
> 
> 赞同：1
> 
> 时间：2012-06-01T20:24:40.970
> 
> 标签：javascript, forms, html, validation

我是第一次做测试。我阅读了[这段](http://www.w3schools.com/js/tryit.asp?filename=tryjs_form_validation)代码并从中制作了自己的代码。问题是即使字段为空，它也不会给出任何错误。

这是我的[小提琴](http://jsfiddle.net/4Nkjq/)。

请帮忙。谢谢。

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
{function validateForm()

var x=document.forms["myForm"]["name"].value;
if (x==null || x=="")
  {
  alert("Name must be filled out");
  return false;
  }

var y=document.forms["myForm"]["password"].value;
  {
if (y==null || y=="")
  alert("Password name must be filled out");
  return false;
  }
</script>
</head>

<body>

<form name="myForm" action="demo_form.asp" onsubmit="return validateForm()" method="post">
Name*: <input type="text" name="name"> <br>
Password*: <input type="password" name="password"><br>
Email: <input type="text" name="email"><br>
<input type="submit" value="Submit">
</form>
</body>

</html> 
```

​</p>

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T20:29:43.623

固定代码：[jsfiddle](http://jsfiddle.net/4Nkjq/2/)

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function validateForm() {

var x=document.forms["myForm"]["name"].value;
if (x==null || x=="")
 {
  alert("Name must be filled out");
  return false;
 }

var y=document.forms["myForm"]["password"].value;
if (y==null || y=="") {
  alert("Password name must be filled out");
  return false;
}
}
</script>
</head>

<body>

<form name="myForm" action="demo_form.asp" onsubmit="return validateForm()" method="post">
Name*: <input type="text" name="name"> <br>
Password*: <input type="password" name="password"><br>
Email: <input type="text" name="email"><br>
<input type="submit" value="Submit">
</form>
</body>
<html> 
```

小心放置牙套的位置。此外，最好使用浏览器上的控制台来识别一些错误并修复它们。

​</p>

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T20:27:05.800

你的大括号应该在函数 validateForm() 之后和 if 之后，并且在函数的末尾。总的来说，在这个例子中，大括号是拧紧的。

将您的代码布置好，以便左大括号和右大括号匹配并且对您有意义。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-01T20:35:24.487

你错过了一些牙套`{}`，其中一个在错误的位置。

希望这有效：

```
function validateForm() {
var x=document.forms["myForm"]["name"].value;

if (x==null || x=="")
  {
  alert("Name must be filled out");
  return false;
  }

var y=document.forms["myForm"]["password"].value;
  {
if (y==null || y=="")
  alert("Password name must be filled out");
  return false;
 }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-16T06:14:05.310

您放错了密码验证的大括号`{ }`。将它们放在`if`子句之后。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-03T17:50:09.380

经过很长时间的搜索，我在互联网上找到了它。但它的工作原理非常完美。

**html代码**

```
<html>
<head>
<title>Form Validation</title>
<script type="text/javascript">
<!--
// Form validation code will come here.
//-->
</script>
</head>
<body>
 <form action="/cgi-bin/test.cgi" name="myForm"  
          onsubmit="return(validate());">
 <table cellspacing="2" cellpadding="2" border="1">
 <tr>
   <td align="right">Name</td>
   <td><input type="text" name="Name" /></td>
 </tr>
 <tr>
   <td align="right">EMail</td>
   <td><input type="text" name="EMail" /></td>
 </tr>
 <tr>
   <td align="right">Zip Code</td>
   <td><input type="text" name="Zip" /></td>
 </tr>
 <tr>
 <td align="right">Country</td>
 <td>
 <select name="Country">
   <option value="-1" selected>[choose yours]</option>
   <option value="1">USA</option>
   <option value="2">UK</option>
   <option value="3">INDIA</option>
 </select>
 </td>
 </tr>
 <tr>
   <td align="right"></td>
   <td><input type="submit" value="Submit" /></td>
 </tr>
 </table>
 </form>
 </body>
 </html> 
```

**javascript**

```
<script type="text/javascript">
<!--
// Form validation code will come here.
function validate()
{

   if( document.myForm.Name.value == "" )
   {
     alert( "Please provide your name!" );
     document.myForm.Name.focus() ;
     return false;
   }
   if( document.myForm.EMail.value == "" )
   {
     alert( "Please provide your Email!" );
     document.myForm.EMail.focus() ;
     return false;
   }
   if( document.myForm.Zip.value == "" ||
           isNaN( document.myForm.Zip.value ) ||
           document.myForm.Zip.value.length != 5 )
   {
     alert( "Please provide a zip in the format #####." );
     document.myForm.Zip.focus() ;
     return false;
   }
   if( document.myForm.Country.value == "-1" )
   {
     alert( "Please provide your country!" );
     return false;
   }
   return( true );
}
//-->
</script> 
```

**和电子邮件验证功能**

```
<script type="text/javascript">
<!--
function validateEmail()
{

   var emailID = document.myForm.EMail.value;
   atpos = emailID.indexOf("@");
   dotpos = emailID.lastIndexOf(".");
   if (atpos < 1 || ( dotpos - atpos < 2 )) 
   {
       alert("Please enter correct email ID")
       document.myForm.EMail.focus() ;
       return false;
   }
   return( true );
}
//-->
</script> 
```

你可以[在这里在线查看](http://www.tutorialspoint.com/cgi-bin/practice.cgi?file=javascript_42)

# javascript - MVC3 表单验证导致 Qunit 测试出错

> ID：10856888
> 
> 赞同：1
> 
> 时间：2012-06-01T20:24:44.140
> 
> 标签：javascript, asp.net-mvc-3, validation, qunit

我一直在使用一个使用 jquery 表单验证的 MVC3 应用程序，并且在我的脚本中与远程验证过程交互以查看记录名称是否可用我正在使用

```
 $('#Name').rules().remote.complete = function (xhr) { 
```

检查以更改表单变量等。当我从 QUnit 测试中引用该脚本时，我收到以下错误。

**未捕获的类型错误：无法读取未定义的属性“形式”**

我可以通过将以下条件置于 .rules() 检查之上来修复它，但有没有更好的方法来做到这一点？

```
if (document.forms.length > 0) { 
```

我想我可以在 IIS 中启动页面并以这种方式进行 JS 单元测试，但这似乎不那么孤立。我不想让这个 .rules() 签入其他一些 JS 文件，因为合并 JS 文件是提高速度的一种方法。有人遇到过这个并找到了更好的方法吗？提前致谢。

# ruby-on-rails-3.1 - Rails 3.x 资产管道，包括视图中的咖啡脚本文件

> ID：10856890
> 
> 赞同：1
> 
> 时间：2012-06-01T20:24:46.463
> 
> 标签：ruby-on-rails-3.1, coffeescript, asset-pipeline

我最近遇到了我只想在单个 Rails 视图中包含一个咖啡脚本文件的地方，但是当你使用`javascript_include_tag`它时，它会附加`.js`到你传入的名称的末尾（出于显而易见的原因）。

有没有人想出一个解决方案，只需在页面上包含一个咖啡脚本文件而不会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:35:57.170

我这样做是为了只为每个控制器加载相关的 JS：
在`application.html.erb`你看到的地方

`<%= javascript_include_tag "application" %>`

请加

`<%= javascript_include_tag controller_path, :media => "all" %>`

也
`#=import .`
从 application.js中删除

这种方式只有`myController.coffee.js`从`myController`这种方式加载，您可以对加载的 js 进行更精细的控制，并且可以`application.js`用于通用代码

就用户下载而言，这不是最好的解决方案，但如果你不关心更多的连接，我发现这更容易理解（同样的事情可以用 css 完成）

# php - 从多个句子中选择或生成规范变体

> ID：10856896
> 
> 赞同：23
> 
> 时间：2012-06-01T20:25:02.540
> 
> 标签：php, text-mining, information-extraction, nlp

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T07:23:36.033

Since your existing metric seems to bias towards shorter phrases, you should consider factoring in bigrams into the mix. So instead of considering scores for just individual words, additionally consider the score for consecutive pairs of words as well (e.g. 'nivea deo', deo roll-on', 'roll-on dry', etc). When computing the score for each title, factor in the scores for every unigram and bigram you can generate out of the title together, but maybe give the bigrams more weight, and this should encourage your algorithm to prefer longer phrases.

If you have large existing corpus of lots of names like these at your disposal, consider using something like [TF-IDF](http://en.wikipedia.org/wiki/Tf%2aidf)
What you are doing right can be likened to just using TF. Using your global corpus, you can compute the idf of each unigram and bigram, which is basically a measure of unique or rare a word or phrase is across the entire corpus.
tf = the number of times you have seen an ngram within these results
idf = a global measure of how unique an ngram might be across all results (or atleast a very large number of them)
So when computing the score for a title, instead of simply adding up the tf's of each ngram in it, you add up the tf*idf of each ngram instead. Rarer ngrams (which possibly do a better job at distinguishing this item from all other items) have a higher idf, so your algorithm should give higher weight to them. A lot of junk terms (like Mindestabnahme) would have really high idf, but they would have a really small tf, so they might not make a big difference. Alternatively prune off tokens you see fewer than k times, to get rid of noise.

Another NLP trick to know about is [Levenshtein distance](http://en.wikipedia.org/wiki/Levenshtein_distance) .. which is a way to quantify how similar two strings are. You can compute the levenshtein distance between every pair of strings within your results, and then try preferring the result which has the lowest average distance from all the other strings. This might not work well by itself... but factoring this score in with your existing approach might help you navigate some tricky cases.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T20:28:28.537

I'd:

1.  Convert all strings to lower (or upper) case
2.  Do a multiple sequence alignment over all strings
3.  Convert back to original case
4.  Find the most frequent letter in every column
5.  Remove the gaps

For your example:

1.  Convert all strings to lower (or upper) case

    ```
    nivea deo roll-on dry impact for men
    nivea deo roll on dry/blau
    nivea deo roll-on dry impact for men, 50 ml, 3er pack (3 x 50 ml)
    nivea deo roll on dry/blau 50 ml
    nivea deoroller 50ml dry for men blau mindestabnahme: 6 stück (1 ve)
    nivea deoroller, dry impact for men
    nivea deo roll on dry/blau_50 ml

    ```

2.  Do a multiple sequence alignment over all strings

    ```
    nivea deo roll°°-on °°dry °°°°°°°°°°impact for men°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°
    nivea deo roll°° on °°dry/blau°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°
    nivea deo roll°°-on °°dry °°°°°°°°°°impact for men, 50 ml, 3er pack (3 x 50 ml)°°°°°°°
    nivea deo roll°° on °°dry/blau °°°°°°°°°°°°°°°°°°°°°50 ml°°°°°°°°°°°°°°°°°°°°°°°°°°°°°
    nivea deo°roller 50ml dry °°°°°°°°°°°°°°°°°for men blau mindestabnahme: 6 stück (1 ve)
    nivea deo°roller, °°°°dry °°°°°°°°°°impact for men°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°
    nivea deo roll°° on °°dry/blau_50 ml°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°

    ```

    (where `°` denotes a gap character)

3.  Convert back to original case

    ```
    Nivea Deo Roll°°-On °°Dry °°°°°°°°°°Impact for Men°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°
    NIVEA DEO Roll°° on °°Dry/blau°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°
    Nivea Deo Roll°°-On °°Dry °°°°°°°°°°Impact for Men, 50 ml, 3er Pack (3 x 50 ml)°°°°°°°
    Nivea Deo Roll°° on °°Dry/blau °°°°°°°°°°°°°°°°°°°°°50 ml°°°°°°°°°°°°°°°°°°°°°°°°°°°°°
    Nivea Deo°roller 50ml dry °°°°°°°°°°°°°°°°°for Men blau Mindestabnahme: 6 Stück (1 VE)
    NIVEA Deo°roller, °°°°Dry °°°°°°°°°°Impact for Men°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°
    NIVEA DEO Roll°° on °°Dry/blau_50 ml°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°

    ```

4.  Find the most frequent letter in every column

    ```
    Nivea Deo Roll°° on °°Dry °°°°°°°°°°°°°°°°°for Men°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°

    ```

5.  Remove the gaps

    ```
    Nivea Deo Roll on Dry for Men

    ```

Everything except step 2 (multiple sequence alignment) is straightforward. Multiple sequence alignment is commonly used in bioinformatics, see eg. [here](http://ab.inf.uni-tuebingen.de/teaching/ws06/albi1/script/multiple_alignment_13Nov2006.pdf) or [here](http://www.cbcb.umd.edu/confcour/CMSC423-materials/Multiple_alignment.pdf) or [here](https://docs.google.com/viewer?a=v&q=cache:5JeLGkjLyIAJ%3awww.cs.tau.ac.il/~rshamir/algmb/98/scribe/pdf/lec05.pdf+star+alignment+sequence&hl=en&pid=bl&srcid=ADGEESh1q0DEHVfGF3iNBAmmOSk4bYsNg9pb3xlx5evCMNO3vRKHzOXHKdgAeVxDk_MEY2lth9d0CNfQE7uXlpriK6vlN_BTz6o1-J-KSOOUtUF-j5_L__0qKxiosMwtU48_NFLbv7s6&sig=AHIEtbSILQlwwOvw9J9OdQlb19wAwOAM_w)... You can certainly find C or Java code but I'm not sure about PHP.

**Update:**

To get you started with multiple alignment, so called "star alignment" is basically a combination of pairwise alignments of one sequence (the "star center") with every other. A pairwise alignment is typically computed using dynamic programming, see e.g. [here](http://www.avatar.se/molbioinfo2001/dynprog/dynamic.html) or [here](http://www.avatar.se/molbioinfo2001/dynprog/adv_dynamic.html). To produce multiple alignment, you choose one of your strings to be the star center. You find the pairwise alignments between it and every other string and then align the pairwise alignments by introducing gaps into them so that the star centers in all alignments are perfectly aligned. You can repeat the procedure by using the result of the previous step as the star center for the next one until it converges, i.e. the result does not change.

**Update 2:** You can also use *whole words* as symbols (quants, atoms) to align. Say, `A = nivea`, `B = deo` etc. This has following advantages:

1.  Words cannot be altered by the alignment and are treated equally, irrespectively of their lengths
2.  When doing pairwise alignment, you can assign costs for substituting individual words ("symbols") according to TF-IDF and their synonyms. Pairwise alignment tries to minimize (weighted) Levenshtein distance between the sequences.

In your example (try it yourself) this would lead to

```
Nivea Deo Roll on Dry for Men 50 ml 
```

i.e. we get here also the `50 ml`. This is because skipping two-letter words is not cheaper than skipping 20-letter words.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T18:28:07.383

If I understood right you are not matching those names against existing database, but trying to get as close as possible to the actual name of the product, so here's my idea:

1.  Don't do the usual cleanup - just remove extra whitespace - leave stop words, character case, separators (such as hyphen) intact.
2.  Split strings into terms on whitespace.
3.  Split terms on separators, number/char, character case, but don't remove originals, just add additional ones right after the splited term, lowercase all terms, remove duplicate and empty terms
4.  Remove terms that are not common for fixed % of the strings (if it should be 40 or 95% you'll know after testing) - This will remove most if not all stuff added by merchants.
5.  Find most common position for each term.
6.  If you get more than one term with same most common position check which one is more commonly before the other. Increase "looser" position by 1, repeat till there is no conflict
7.  For each term that is left pick the most common capitalization
8.  Merge remaining terms

Using your example it would work like this:

**Step 1:**

> Nivea Deo Roll-On Dry Impact for Men
> 
> NIVEA DEO Roll on Dry/blau
> 
> Nivea Deo Roll-On Dry Impact for Men, 50 ml, 3er Pack (3 x 50 ml)
> 
> Nivea Deo Roll on Dry/blau 50 ml
> 
> Nivea Deoroller 50ml dry for Men blau Mindestabnahme: 6 Stück (1 VE)
> 
> NIVEA Deoroller, Dry Impact for Men
> 
> NIVEA DEO Roll on Dry/blau_50 ml

**Step 2:**

> Nivea, Deo, Roll-On, Dry, Impact, for, Men
> 
> NIVEA, DEO, Roll, on, Dry/blau
> 
> Nivea, Deo, Roll-On, Dry, Impact, for, Men, 50, ml, 3er, Pack, (3, x, 50, ml)
> 
> Nivea, Deo, Roll, on, Dry/blau, 50, ml
> 
> Nivea, Deoroller, 50ml, dry, for, Men, blau, Mindestabnahme:, 6, Stück, (1, VE)
> 
> NIVEA, Deoroller, Dry, Impact, for, Men
> 
> NIVEA, DEO, Roll, on, Dry/blau_50, ml

**Step 3:**

> nivea, deo, roll-on, roll, on, dry, impact, for, men
> 
> nivea, deo, roll, on, dry/blau, dry, blau
> 
> nivea, deo, roll-on, roll, on, dry, impact, for, men, 50, ml, 3er, pack, 3, x, 50, ml
> 
> nivea, deo, roll, on, dry, blau, 50, ml
> 
> nivea, deoroller, 50ml, 50, ml, dry, for, men, blau, mindestabnahme, 6, stück, 1, ve
> 
> nivea, deoroller, dry, impact, for, men
> 
> nivea, deo, roll, on, dry/blau, dry, blau, 50, ml

**Step 4:** (assuming threshold of 60%)

> nivea, deo, roll, on, dry, for, men
> 
> nivea, deo, roll, on, dry, blau
> 
> nivea, deo, roll, on, dry, for, men, 50, ml
> 
> nivea, deo, roll, on, dry, 50, ml
> 
> nivea, 50, ml, dry, for, men, blau
> 
> nivea, dry, for, men
> 
> nivea, deo, roll, on, dry, blau, 50, ml

**Step 5:**

> nivea => 1
> 
> deo => 2
> 
> roll => 3
> 
> on => 4
> 
> dry => 5
> 
> for => 6
> 
> men => 7
> 
> blau => 6
> 
> 50 => 8, 6, 2, 7
> 
> ml => 8, 7, 3, 8

**Step 6:**

> nivea => 1
> 
> deo => 2
> 
> roll => 3
> 
> on => 4
> 
> dry => 5
> 
> blau => 6
> 
> for => 7
> 
> men => 8
> 
> 50 => 9
> 
> ml => 10

**Step 7**

> Nivea, Deo, Roll, on, Dry, blau for, Men, 50, ml

**Step 8**

end result: **Nivea Deo Roll on Dry blau for Men 50 ml**

This method has following problems:

1.  It doesn't handle names with duplicate terms well (or at all - all term occurences after 1st one are lost)
2.  It's biased to split hyphen-separated or case-separated (ProductName) name parts into space separated ones - this can be fixed if you check most common version at step 8.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T19:32:04.120

You have a very good NLP problem. I have worked a similar one about an year ago. I would also recommend the approach by adi92\. But in case you need to use any NLP software I suggest the Stanford NLP. The software and the respective publications are also present here. [http://nlp.stanford.edu/](http://nlp.stanford.edu/) Hope this helps.

# android - 将图片复制到剪贴板

> ID：10856899
> 
> 赞同：0
> 
> 时间：2012-06-01T20:25:26.247
> 
> 标签：android

我已阅读有关如何将文本复制到剪贴板的先前帖子。但是，我的目的是将图片从本例中的 ImageView 复制到剪贴板。

我知道如何使用 Bitmap/Canvas/OutputStream 将 ImageView 保存到文件中。现在我想知道如何将该图片保存到剪贴板。

我猜必须有一些简单的方法，例如（遵循伪代码）：

```
Bitmap image = get_image_from_image_view();

clipboard_instance.setClipboardContents(image); 
```

我在 Android Clipboard 或 Clipboard Intent 文档中找不到对此的参考。

有人可以指出我正确的方向吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:36:06.000

> 但是，我的目的是将图片从本例中的 ImageView 复制到剪贴板。

Android中不存在这个概念。您可以将文本、a`Uri`或 an`Intent`放在剪贴板上，而不是图像。

根据图像的来源，您可以`Uri`在剪贴板上放置指向该图像的指针。是否有任何东西能够从中粘贴有用的东西，这`Uri`在一定程度上取决于接收应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:50:49.777

原则上可以： 1\. 将图像保存到文件中，然后使用 newRawURI 2\. 将位图流式传输到包裹中并插入到意图中。但在这两种情况下，都必须有一个额外的处理程序代码来处理剪贴板内容。

# javascript - 尝试使用 jqGrid 将树网格自动扩展到第三级

> ID：10856905
> 
> 赞同：2
> 
> 时间：2012-06-01T20:25:59.240
> 
> 标签：javascript, jquery, jquery-plugins, jqgrid, treegrid

我们目前很难尝试将 jqGrid treegrid 自动扩展到树的第 3 级，以便所有子级都可见。当前数据集有数千或行深，我们被迫在请求扩展时动态加载每个节点，这需要重新加载网格。展开的节点 id 作为保存的树状态保存在数组中，以便在重新显示树时可以重新展开节点。当扩展发生时，这会经历从数据库加载每个节点的过程。因为每个节点都是动态加载和扩展的，gridComplete 和 loadComplete 事件按预期处理。

我们试图通过利用保存树状态和现有逻辑在现有逻辑中适当地分解树来触发第 3 级扩展。我们遇到的问题是树不能足够快地扩展以进行处理，而且我们永远无法将树完全分开。

这是遍历父项以捕获要扩展的适当 id 的函数：

```
function ExpandGridLevel(level) {
        if (ExpandGridLevels == false) {
            ExpandTotalLevels = level; 
            ExpandLevelCurrent = 0;
            ExpandGridLevels = true;
        }

        if (!TreeExpandState) {
            TreeExpandState = new Array();
        }
        $(".treeclick", "#Grid").each(function () {
            if ($(this).hasClass("tree-plus")) {
                var id = $(this).parents("tr").attr("id");
                var rowLevel = $("#MaGrid").getLocalRow(id);
                if (rowLevel.level ==  ExpandLevelCurrent) {
                    TreeExpandState.push(id);
                    $(this).removeClass("tree-plus");
                    $(this).addClass("tree-minus");
                }
            }
        });

        $(this).trigger("reloadGrid");
        $("#Grid").jqGrid("setGridParam", { datatype: "local" });

        ExpandLevelCurrent++;
        RefreshGrid();
    } 
```

我们的 gridComplete 和 loadComplete 部分代码：

```
loadComplete: function (data) {                
                $("#Grid").jqGrid("setGridParam", { datatype: "local" });

                if (TreeExpandState.length == 0) {
                          setTimeout(function () { ExpandGridLevel (ExpandTotalLevels); }, 3000);
                }
}

gridComplete: function () {
                if (TreeExpandState) {

                    var rowId =  TreeExpandState.shift();
                    ExpandNode(rowId);
                }
 } 
```

我们试图用 jqGrid 做的事情是可能的吗？如果是这样，我们如何知道树扩展何时真正完成，并且我们可以在扩展的网格上重复以开始下一级父级的扩展？

# android - Windows 7 上的慢速 Android 设备检测

> ID：10856912
> 
> 赞同：0
> 
> 时间：2012-06-01T20:26:20.377
> 
> 标签：android, windows

我在一家为 Android 设备编程的公司工作。因此，我连接并已将数百个 Android 设备连接到我的计算机。每次我连接一个新设备（可以是与我之前连接的另一个设备相同的型号）时，Windows 都会运行驱动程序软件安装过程。

当我第一次拿到这台电脑时，检测设备大约需要一分钟。第一次可能会长一点，但不会太长。

现在，在连接了数百台设备向它们推送软件后，驱动程序软件安装对话框需要大约 20 分钟才能检测到一台设备。

有没有办法加快这个过程？我在网上查看并在设备管理器下卸载了旧设备的所有 Android 驱动程序，但即使将它们全部卸载，仍然需要大约 20 分钟才能检测到一台设备。

感谢您提供有关解决此问题的任何帮助或见解。

亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:56:08.173

有这些驱动程序可用于每家公司，如摩托罗拉、三星等 Android。您需要为所有三星安装所有可用的驱动程序，即所有摩托罗拉的驱动程序。这样一来，您就可以在插入后立即开始。只需谷歌摩托罗拉驱动程序 android ，你会得到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:42:05.117

这似乎是一个驱动程序错误。我在许多装有 Windows XP、7 和 8 的计算机上尝试了不同的 Android 手机，所有这些计算机的连接过程都很慢，你必须忍受它。

# xml - 为什么我用 Perl XML::Simple 得到这个“不是数组引用”？

> ID：10856915
> 
> 赞同：3
> 
> 时间：2012-06-01T20:26:39.063
> 
> 标签：xml, perl, xml-parsing

我的输入 xml 文件是：

```
<?xml version='1.0'?>
<warnings>
 <IDA>
  <file>filea</file>
  <path>patha</path>
 </IDA>

 <IDA>
  <file>fileaa</file>
  <path>pathaa</path>
 </IDA>

 <IDB>
  <file>fileb</file>
  <path>pathb</path>
 </IDB>

</warnings> 
```

我正在阅读这样的文件：

```
my @IDs = ("IDA", "IDB");
my $data = $xml->XMLin("xmlfile.xml");
foreach (@IDs)
{
 foreach $id (@{$data->{$_}})
 {
   print $id->{path}."\n";
 }
} 
```

当我运行脚本时，它给了我这个错误：

```
Not an ARRAY reference at ./waiver.pl line 18. 
```

（第 18 行是第二个 foreach 循环）

**编辑** 我复制了 IDA 标签。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T20:41:30.317

`{$data->{$_}`不是有效的数组引用，因为您只有一个 IDA 标签，因此没有构建数组。`ForceArray`即使只有一个，您也可以在 XMLin 中使用来强制每个标签都成为一个数组。

```
my $data = $xml->XMLin("xmlfile.xml", ForceArray => 1); 
```

**编辑**：现在它给出了 IDB 标签的错误......

或者，您可以使用`ref()`它来检查它是数组还是哈希引用：

```
if (ref({$data->{$_}) eq 'ARRAY')
{
    foreach $id (@{$data->{$_}})
    {
        etc...
    }
} 
```

PS：我也可以建议使用`keys()`函数来检索散列的键，而不是将它们放在单独的数组中。

# .net - 如何测试我的 HTTPListener

> ID：10856916
> 
> 赞同：0
> 
> 时间：2012-06-01T20:26:48.697
> 
> 标签：.net, web-services, httplistener

我有一个正在工作的 HTTPListener (VB.NET)，我正在尝试复制它并进行一些更改。我自然没有给自己留下关于如何测试这一点的好笔记。

这是应该如何工作的：我向 web 服务 A 发送请求（外部，我们无法控制）。他们将我的结果发回给这个听众。我知道我返回的 XML 应该是什么样子。

我已经完成了第 1 步，传递了我的听众的地址。我应该迅速将结果返回给我的听众。这是一个控制台应用程序，当它得到某些东西时会显示。这还没有发生，但我觉得这是我现在的问题的次要问题。在这一点上，我在副本中所做的只是重命名侦听器前缀，当然还有项目名称等，但仅此而已。

我想要一种无需通过供应商即可对其进行测试的方法。所以我想我的问题是：有没有办法可以通过浏览器将 XML 传递给我的监听器？当我只是在侦听器 URI 的末尾附加一些内容时，内容是空白的。

我很确定这就是我第一次测试的方式，但现在它似乎对我不起作用。如果有人能指出我正确的方向，那就太棒了！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:02:11.803

我去了 Web 服务的 .asmx 页面并输入了我要发送给他们的内容，这触发了我期待的调用。

# c# - Zebra EPL/ZPL 上的 .NET 网络套接字打印

> ID：10856917
> 
> 赞同：4
> 
> 时间：2012-06-01T20:26:54.760
> 
> 标签：c#, .net, zebra-printers, zpl-ii, epl

我需要在网络 Zebra 打印机上打印。由于某些原因，我不能使用 winspool 打印（[http://support.microsoft.com/kb/154078](http://support.microsoft.com/kb/154078)），我必须通过 IP 和端口上的套接字直接打印打印。这是我的打印方法：

```
System.Net.Sockets.TcpClient zebraClient = new System.Net.Sockets.TcpClient(); 
        try 
        { 
            zebraClient.SendTimeout = 5000; 
            zebraClient.Connect(IP, port);
        } 
        catch (Exception ex) 
        { 
            Utils.ShowError(ex); 
        } 
        if (zebraClient.Connected) 
        { 
            NetworkStream nStream; 
            nStream = zebraClient.GetStream(); 
            StreamWriter wStream; 
            using (nStream) 
            { 
                wStream = new StreamWriter(nStream); 
                using (wStream) 
                { 
                    wStream.Write(content); 
                    wStream.Flush(); 
                } 
            } 
            zebraClient.Close(); 
        } 
```

问题是，有时会出现“无法创建连接，因为目标计算机主动拒绝它”异常。我不知道为什么会发生这种情况（可能是完整的打印机缓冲区 - 如果是这样，我如何用两种语言检查它？）。所以我问是否有人遇到过这个问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:27:13.007

这是我的 VB 代码。

```
 Private Sub sendData(ByVal zpl As String)
    Dim ns As System.Net.Sockets.NetworkStream = Nothing
    Dim socket As System.Net.Sockets.Socket = Nothing
    Dim printerIP As Net.IPEndPoint = Nothing
    Dim toSend As Byte()

    Try
        If printerIP Is Nothing Then
            'set the IP address
            printerIP = New Net.IPEndPoint(IPAddress.Parse(IP_ADDRESS), 9100)
        End If

        'Create a TCP socket
        socket = New Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp)
        'Connect to the printer based on the IP address
        socket.Connect(printerIP)
        'create a new network stream based on the socket connection
        ns = New NetworkStream(socket)

        'convert the zpl command to a byte array
        toSend = System.Text.Encoding.ASCII.GetBytes(zpl)

        'send the zpl byte array over the networkstream to the connected printer
        ns.Write(toSend, 0, toSend.Length)

    Catch ex As Exception
        MessageBox.Show(ex.Message, "Cable Printer", MessageBoxButtons.OKCancel, MessageBoxIcon.Error)
    Finally
        'close the networkstream and then the socket
        If Not ns Is Nothing Then
            ns.Close()
        End If

        If Not socket Is Nothing Then
            socket.Close()
        End If
    End Try
End Sub 
```

和

```
 Private Function createString() As String
    Dim command As String

    command = "^XA"
    command += "^LH20,25"

    If rdoSmall.Checked = True Then
        command += "^FO1,30^A0,N,25,25^FD"
    ElseIf rdoNormal.Checked = True Then
        command += "^FO1,30^A0,N,35,35^FD"
    Else
        command += "^FO1,30^A0,N,50,50^FD"
    End If

    command += txtInput.Text
    command += "^FS"
    command += "^XZ"

    Return command

End Function 
```

这仅用于将文本打印到 s4m 打印机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:19:42.207

尝试端口 9100。并确保您可以看到网络上的打印机 IP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-21T04:53:55.620

我不确定这是否适用于您，但我在使用 asp classic 时遇到了类似的问题。我需要直接打印到斑马打印机而不更改默认打印机，所以我作为解决方案所做的是创建一个使用套接字连接到斑马打印机的 java 可执行文件。一旦我让 java 可执行文件能够通过打开的套接字上的流向斑马打印机发送 Zpl 字符串，我就创建了一个批处理文件来运行我的 java 可执行文件。由于可执行文件需要我的 asp 页面中的字符串，我在批处理文件中添加了一个用户输入变量。我将这 2 个文件（java jar 和 .bat 文件）放在共享驱动器上，并在 asp 页面上使用 ActiveX，我能够将原始字节以字符串的形式直接发送到我的斑马打印机。如果您有任何问题，请不要犹豫。 [https://km.zebra.com/kb/index?page=content&id=SO7149&actp=RSS](https://km.zebra.com/kb/index?page=content&id=SO7149&actp=RSS)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-02T09:34:03.207

这对我有用：

```
 using System.IO;
    using System.Net;
    using System.Net.Sockets;
    .
    .
    .
    private void btnPrint_Click(object sender, EventArgs e) {
      try {
    string ipAddress = txtIPAddr.Text.ToString(); ; //ie: 10.0.0.91
    int port = int.Parse(txtPort.Text.ToString()); //ie: 9100

    System.Net.Sockets.TcpClient client = new System.Net.Sockets.TcpClient();
    client.Connect(ipAddress, port);
    StreamReader reader = new StreamReader(txtFilename.Text.ToString()); //ie: C:\\Apps\\test.txt
    StreamWriter writer = new StreamWriter(client.GetStream());
    string testFile = reader.ReadToEnd();
    reader.Close();
    writer.Write(testFile);
    writer.WriteLine("Hello World!");
    writer.Flush();
    writer.Close();
    client.Close();
  }
  catch (Exception ex) {
    MessageBox.Show(ex.Message, "Error");
  }
} 
```

# ruby-on-rails - LocomotiveCMS 和 Heroku - 部署问题

> ID：10856923
> 
> 赞同：0
> 
> 时间：2012-06-01T20:27:08.103
> 
> 标签：ruby-on-rails, heroku, locomotivecms

我按照说明将 locomotivecms 应用程序部署到 Heroku：

[http://doc.locomotivecms.com/installation/heroku](http://doc.locomotivecms.com/installation/heroku)

heroku open 命令在浏览器中显示一个错误页面。heroku 日志显示以下内容：

```
response => #<Excon::Response:0x00000004ee6548 @body="App not found.", @headers={"Cache-Control"=>"no-cache", "Content-Type"=>"application/json; charset=utf-8", "Date"=>"Fri, 01 Jun 2012 20:10:00 GMT", "Server"=>"nginx/1.0.14", "Status"=>"404 Not Found", "Strict-Transport-Security"=>"max-age=500", "X-Runtime"=>"40", "Content-Length"=>"14", "Connection"=>"keep-alive"}, @status=404>
2012-06-01T20:10:00+00:00 app[web.1]:   request => {:connect_timeout=>60, :headers=>{"Accept"=>"application/json", "Accept-Encoding"=>"gzip", "Authorization"=>"Basic OmNjYzY1ZmMyNTFkODY1MmQ2NWJhOWVkMTA1MjJjM2E2NTc4NmRiNzM=", "User-Agent"=>"heroku-rb/0.1.8", "X-Heroku-API-Version"=>"3", "X-Ruby-Version"=>"1.9.3", "X-Ruby-Platform"=>"x86_64-linux", "Host"=>"api.heroku.com:443"}, :instrumentor_name=>"excon", :mock=>false, :read_timeout=>60, :retry_limit=>4, :ssl_ca_file=>"/app/vendor/bundle/ruby/1.9.1/gems/excon-0.13.4/data/cacert.pem", :ssl_verify_peer=>true, :write_timeout=>60, :host=>"api.heroku.com", :path=>"/apps/homeschool_minder/domains", :port=>"443", :query=>nil, :scheme=>"https", :expects=>200, :method=>:get}
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/excon-0.13.4/lib/excon/connection.rb:97:in `request'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/heroku-api-0.1.8/lib/heroku/api.rb:60:in `request'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/heroku-api-0.1.8/lib/heroku/api/domains.rb:27:in `get_domains'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/locomotive-heroku-0.0.1/lib/locomotive/heroku.rb:17:in `domains'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/locomotive-heroku-0.0.1/lib/locomotive/heroku/enabler.rb:21:in `enable_heroku'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/locomotive_cms-2.0.0.rc7/lib/locomotive.rb:100:in `enable_hosting'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `block in load'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:587:in `each'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/locomotive_cms-2.0.0.rc7/lib/locomotive.rb:68:in `after_configure'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:55:in `block in run_initializers'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/locomotive_cms-2.0.0.rc7/lib/locomotive.rb:38:in `configure'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `run'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/config/initializers/locomotive.rb:1:in `<top (required)>'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `run_initializers'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:588:in `block (2 levels) in <class:Engine>'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:587:in `block in <class:Engine>'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/controllers/controller.rb:71:in `start'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application.rb:136:in `initialize!'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/runner.rb:185:in `run_command'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-06-01T20:10:00+00:00 app[web.1]:   from config.ru:1:in `new'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/rack/adapter/loader.rb:36:in `load'
2012-06-01T20:10:00+00:00 app[web.1]:   from config.ru:3:in `require'
2012-06-01T20:10:00+00:00 app[web.1]:   from config.ru:1:in `<main>'
2012-06-01T20:10:00+00:00 app[web.1]:   from config.ru:3:in `block in <main>'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `load'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `each'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/rack/adapter/loader.rb:36:in `eval'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `<main>'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/bin/thin:6:in `<top (required)>'
2012-06-01T20:10:00+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/runner.rb:151:in `run!'
2012-06-01T20:10:01+00:00 heroku[web.1]: Process exited with status 1
2012-06-01T20:10:02+00:00 heroku[web.1]: State changed from starting to crashed
2012-06-01T20:10:44+00:00 heroku[api]: Release v12 created by swapna.sony@gmail.com
2012-06-01T20:10:44+00:00 heroku[api]: Deploy 66801e9 by swapna.sony@gmail.com
2012-06-01T20:10:44+00:00 heroku[web.1]: State changed from crashed to created
2012-06-01T20:10:44+00:00 heroku[web.1]: State changed from created to starting
2012-06-01T20:10:45+00:00 heroku[slugc]: Slug compilation finished
2012-06-01T20:10:52+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e production -p 24745`
2012-06-01T20:10:58+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-06-01T20:10:58+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-06-01T20:11:03+00:00 app[web.1]:   ...loading heroku extension
2012-06-01T20:11:03+00:00 app[web.1]:   request => {:connect_timeout=>60, :headers=>{"Accept"=>"application/json", "Accept-Encoding"=>"gzip", "Authorization"=>"Basic OmNjYzY1ZmMyNTFkODY1MmQ2NWJhOWVkMTA1MjJjM2E2NTc4NmRiNzM=", "User-Agent"=>"heroku-rb/0.1.8", "X-Heroku-API-Version"=>"3", "X-Ruby-Version"=>"1.9.3", "X-Ruby-Platform"=>"x86_64-linux", "Host"=>"api.heroku.com:443"}, :instrumentor_name=>"excon", :mock=>false, :read_timeout=>60, :retry_limit=>4, :ssl_ca_file=>"/app/vendor/bundle/ruby/1.9.1/gems/excon-0.13.4/data/cacert.pem", :ssl_verify_peer=>true, :write_timeout=>60, :host=>"api.heroku.com", :path=>"/apps/homeschool_minder/domains", :port=>"443", :query=>nil, :scheme=>"https", :expects=>200, :method=>:get}
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/heroku-api-0.1.8/lib/heroku/api.rb:60:in `request'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/locomotive-heroku-0.0.1/lib/locomotive/heroku/enabler.rb:21:in `enable_heroku'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/excon-0.13.4/lib/excon/connection.rb:97:in `request'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/heroku-api-0.1.8/lib/heroku/api/domains.rb:27:in `get_domains'
2012-06-01T20:11:03+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/excon-0.13.4/lib/excon/connection.rb:266:in `request_kernel': Expected(200) <=> Actual(404 Not Found) (Heroku::API::Errors::NotFound)
2012-06-01T20:11:03+00:00 app[web.1]:   response => #<Excon::Response:0x000000044fae30 @body="App not found.", @headers={"Cache-Control"=>"no-cache", "Content-Type"=>"application/json; charset=utf-8", "Date"=>"Fri, 01 Jun 2012 20:11:03 GMT", "Server"=>"nginx/1.0.14", "Status"=>"404 Not Found", "Strict-Transport-Security"=>"max-age=500", "X-Runtime"=>"39", "Content-Length"=>"14", "Connection"=>"keep-alive"}, @status=404>
2012-06-01T20:11:03+00:00 app[web.
1]:     from /app/vendor/bundle/ruby/1.9.1/gems/locomotive_cms-2.0.0.rc7/lib/locomotive.rb:100:in `enable_hosting'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/locomotive-heroku-0.0.1/lib/locomotive/heroku.rb:17:in `domains'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/locomotive_cms-2.0.0.rc7/lib/locomotive.rb:68:in `after_configure'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/config/initializers/locomotive.rb:1:in `<top (required)>'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `block in load'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/locomotive_cms-2.0.0.rc7/lib/locomotive.rb:38:in `configure'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:588:in `block (2 levels) in <class:Engine>'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:587:in `each'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:587:in `block in <class:Engine>'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `run'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:55:in `block in run_initializers'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `each'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `run_initializers'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application.rb:136:in `initialize!'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2012-06-01T20:11:03+00:00 app[web.1]:   from config.ru:3:in `require'
2012-06-01T20:11:03+00:00 app[web.1]:   from config.ru:1:in `<main>'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/rack/adapter/loader.rb:36:in `eval'
2012-06-01T20:11:03+00:00 app[web.1]:   from config.ru:3:in `block in <main>'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/rack/adapter/loader.rb:36:in `load'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-06-01T20:11:03+00:00 app[web.1]:   from config.ru:1:in `new'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/runner.rb:185:in `run_command'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/controllers/controller.rb:71:in `start'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/runner.rb:151:in `run!'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `load'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/bin/thin:6:in `<top (required)>'
2012-06-01T20:11:03+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:23:in `<main>'
2012-06-01T20:11:04+00:00 heroku[web.1]: Process exited with status 1
2012-06-01T20:11:05+00:00 heroku[web.1]: State changed from starting to crashed 
```

这是什么意思？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T02:36:18.923

结果发现 locomotive.rb 文件中的应用程序名称不正确。应用名称与 Heroku 上的应用名称不匹配。

# windows - Windows 上的 SIGWINCH 等价物？

> ID：10856926
> 
> 赞同：7
> 
> 时间：2012-06-01T20:27:18.873
> 
> 标签：windows, signals, command-line-interface

这很可能是另一个愚蠢的问题，但我似乎找不到答案（或任何与此相关的答案），所以就这样吧。

我有一个命令行程序，它在 Linux 上使用 SIGWINCH 来检测窗口大小的变化，我显然有一个在 Windows 上使用该程序的用户。问题在于程序使用 SIGWINCH 来检测窗口大小的变化，而 Windows 不支持此信号。我已经尝试用谷歌搜索我能想到的每种搜索词组合，但由于 SIGWINCH 和窗口大小变化之间的关系，我很难找到任何有用的结果。我正在寻找 Windows 等效项，或者最常用于检测 Windows 计算机上窗口大小变化的方法。

如何检测 Windows 上窗口大小的变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T21:06:42.037

由于我认为您不能子类化控制台窗口（从而捕获`WM_SIZE`消息），因此您可能只需要 poll [`GetConsoleScreenBufferInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683171%28v=vs.85%29.aspx)。

**编辑：**经过进一步调查（未经测试！），不使用[`ReadConsoleInput`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684961%28v=vs.85%29.aspx). 摘要：调用[`SetConsoleMode`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686033%28v=vs.85%29.aspx)开启窗口输入事件。从不同的线程，等待[控制台输入句柄](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683231%28v=vs.85%29.aspx)使用`WaitForSingleObject`或类似函数发出信号。读取所有待处理的控制台事件；窗口缓冲区大小事件的存在意味着调整了控制台窗口的大小。

# xcode - 在我的自定义对象中访问 NSMutableArray

> ID：10856929
> 
> 赞同：1
> 
> 时间：2012-06-01T20:28:24.933
> 
> 标签：xcode, cocoa, nsmutablearray

我敢肯定这是一个完整的菜鸟问题……但实际上我以前从未处理过这种情况，所以我有点困惑……

假设我有一个名为 person 的自定义对象，每个 person 对象都可以有一个“财产”数组，如果你愿意的话，这是一种库存。我会这样设置：

```
interface person : NSObject {
    NSString *name;
    NSMutableArray *posessions;

@property (copy) NSString *name;
@property (copy) NSMutableArray *posessions; // no idea if this is even necessary...

} 
```

当然，我也会在实现文件中综合我的属性......现在，在我的实际控制器对象中，我将创建我的对象的一个​​实例（或者通常是一个实例数组，但对于这个例子，一个可以正常工作。 ..) 这样：

```
person *aPerson; 
```

我知道要访问人名，我可以这样拨打电话：

```
[aPerson setName:@"Bob"]; 
```

并检索该名称，我可能会使用这个：

```
aVar = [aPerson name]; 
```

我坚持的是，我将如何向位于我的 person 类中的 NSMutableArray 添加或检索对象？假设我想对 NSMutable 数组使用“计数”方法。

我已经尝试过一些尝试和错误，例如：

```
[aPerson.posessions count];
[[aPerson posessions] count]; 
```

同样，要将对象添加到数组中，我经常使用：

```
[someArray addObject:anObject]; 
```

但这样的尝试没有奏效：

```
[aPerson.posessions addObject:anObject]; 
```

在阅读了一堆并搜索了网络之后，我似乎无法在我的自定义类中确切地找到如何与这个 NSMutableArray 交互。我敢肯定，这很明显，我只是不太明白，而且它已经成为一种心理障碍......

另外，我在合成 NSMutableArray 的访问器属性时是否正确？如果是这样，setX 和 X 似乎对 NSMutableArray 不太明显......除非它们只是将整个数组复制到局部变量中......

也许这是需要做的？使用访问器方法获取整个数组，将其放在局部变量中，进行更改，然后使用 set 访问器方法将整个数组放回我的人员对象？

有人可以告诉我我应该在这里使用的语法吗？

*** 编辑 ***

我想我会对这个问题做一些澄清。我的自定义对象（在上面的示例中，我的人员对象）基本上是数据库记录。我的项目中有几个正在使用的数据库，例如：

Person - NSObject 的自定义子类，包含多个 NSString 对象，以及 Ints 和 BOOL。

personDatabase - 一个 Person 对象数组（在我的主 CONTROLLER 对象中设置和控制）

所有的 set 和 get 方法都是从“控制器”调用的。

我一直在尝试做的是从我的 Controller 对象中直接访问 personDatabase 中包含的各个对象。我通过这种方式声明另一个对象来做到这一点：

```
Person *activePerson; 
```

然后，我的所有调用都针对当前活动的 Person 记录（当前从 personDatabase 中选择的记录），例如：

```
someOutput = [activePerson name]; 
```

等等

有没有办法从我的 Controller 对象直接访问 activePerson 对象内的 NSMutableArray 对象内的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T22:53:18.810

您已将 'possessions' 属性指定为 'copy'。因此，当您编写时，`aPerson.possessions`您将获得一份财产数组的副本。对 addObject 的调用将一个对象添加到一个新数组中，该数组是 aPerson 的财产数组的副本。最简单的“修复”是将“复制”更改为“保留”（可能是“只读”）。 **[编辑：错误；它是“分配时复制”-而不是“读取时复制”]**

但是，还有一个更大的问题。一个人拥有财产，但如何存储它们是一个实现细节。当您将 NSMutableArray 放在公共接口中时，您会过度限制您的实现。您最好按照以下方式更改 Person 界面：

```
@interface Person : NSObject {
@private
     NSString *name;
     // ...
  }
  - (Boolean) addPossession: (NSObject *) obj;
  - (Boolean) remPossession: (NSObject *) obj;
  - (Boolean) hasPossession: (NSObject *) obj;
  - (NSArray *) allPossessions;
@end 
```

然后，如何实现这些拥有方法取决于您是否使用数组、集合、链表、树或任何东西。

# ruby - ActiveRecord 不会更新

> ID：10856935
> 
> 赞同：1
> 
> 时间：2012-06-01T20:29:08.113
> 
> 标签：ruby, database, sqlite, activerecord, ruby-1.9

我的简单Sqlite3数据库如下：

```
CREATE TABLE balances(
balance zilch
); 
```

我的红宝石如下：

```
require('active_record')
ActiveRecord::Base.establish_connection(:database => "testbalance.db", :adapter => "sqlite3")
class Balance < ActiveRecord::Base
end
x = Balance.new
x.balance = 50
x.save 
```

当我退出并返回并再次输入相同的 Ruby 时，起初（在我运行之前`x.balance = 50`）余额为`nil`. 为什么是这样？为什么我的数据库没有保存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:30:17.660

If you enter the same code, then you're creating a new object again. No wonder its balance is `nil`.

To check that your object is saved, you can (for example) check `Balance.count` before and after record creation.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T04:04:49.550

这是一种使用 Active Record 的旧演示方式，对生产不是很有用。它会让你开始。我的代码将在不需要 sqlite3 gem 的情况下建立连接。我认为如果您使用 :adapter 哈希条目，Active Record 将包含它。当然，您需要安装它，但 Active Record 的代码中并不真正需要它。无需查看即可尝试。然后，如果您仍有疑问，卸载 gem 只是为了好玩。您应该尝试更多 Active Record 命名空间和方法，尤其是检查数据库是否已存在的方法。然后通过创建一个。这是 Metaprogramming Ruby 一书中的一些示例代码。

```
#---
# Excerpted from "Metaprogramming Ruby",
# published by The Pragmatic Bookshelf.
# Copyrights apply to this code. It may not be used to create training   material, 
# courses, books, articles, and the like. Contact us if you are in doubt.
# We make no guarantees that this code is fit for any purpose. 
# Visit http://www.pragmaticprogrammer.com/titles/ppmetr2 for more book information.
#---

# Create a new database each time
File.delete 'dbfile' if File.exist? 'dbfile'

require 'active_record'
ActiveRecord::Base.establish_connection :adapter => "sqlite3",
                                    :database => "dbfile.sqlite3" 

# Initialize the database schema
ActiveRecord::Base.connection.create_table :ducks do |t|
  t.string  :name
end

class Duck < ActiveRecord::Base
  validate do
    errors.add(:base, "Illegal duck name.") unless name[0] == 'D'
  end
end

my_duck = Duck.new
my_duck.name = "Donald"
my_duck.valid?         # => true
my_duck.save!

require_relative '../test/assertions'
assert my_duck.valid?

bad_duck = Duck.new(:name => "Ronald")
assert !bad_duck.valid?

duck_from_database = Duck.first
duck_from_database.name         # => "Donald"

assert_equals "Donald", duck_from_database.name

duck_from_database.delete

File.delete 'dbfile' if File.exist? 'dbfile' 
```

此代码在使用后删除了 db 文件，这也不是很好的持久性。但是你明白了，因为它只是为了测试断言。您可以在更改余额时尝试确定。

你想要剩下的代码吗？[https://pragprog.com/book/ppmetr/metaprogramming-ruby](https://pragprog.com/book/ppmetr/metaprogramming-ruby)

我是在训练你还是像我一样？如果我在这里错了请版主删除此内容。我不想树立一个坏榜样。

# ios - 一个模型应该做多少设置？

> ID：10856936
> 
> 赞同：2
> 
> 时间：2012-06-01T20:29:10.263
> 
> 标签：ios, model-view-controller, model, uipageviewcontroller

我正在使用 Apple 的 UIPageViewController 模板，其中包含一个“ModelController”类。我使用这个类以视图控制器的形式返回单个页面，但是 Model 类负责多少设置？例如，我有一个 plist，其中包含每个页面的图像布局信息数组。模型应该保存整个数组，然后为每个视图控制器设置其特定的布局信息，还是每个视图控制器只获取自己的布局信息？模型究竟应该注意什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:54:22.823

我建议使模型尽可能重，视图控制器尽可能轻另一件事是对视图控制器中的图像使用延迟初始化

因此，理想情况下，模型将包含您希望加载的所有图像的名称数组，并且每次生成新页面时都会加载图像并将其添加到您将创建的 viewcontoller 中。

viewcontroller 将拥有它所需的所有信息，这意味着您可以使用相同的 viewcontoller 作为 pageviewcontroller 上下文之外的独立控制器

所以模型只负责加载需要的变量，对这些文件的访问，图片的加载都在viewcontroller中完成，viewcontroller只接收字符串作为参数，加载逻辑在里面完成viewcontoller，因此尽可能多地解耦视图

# php - 表单提交jquery

> ID：10856941
> 
> 赞同：0
> 
> 时间：2012-06-01T20:29:54.797
> 
> 标签：php, jquery, forms, mobile

我有一个在 jquery 移动页面中设置的表单。我的问题是我无法使用表格提交信息。我是 jquery 的新手。每个建议都受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:31:28.013

```
$("#form").submit(); 
```

[http://jquerymobile.com/demos/1.0a1/experiments/api-viewer/docs/submit/index.html](http://jquerymobile.com/demos/1.0a1/experiments/api-viewer/docs/submit/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T08:44:55.453

可以使用 jquery 提交表单：

```
$("#formId").submit(); 
```

# sql - 将 sql 查询导出到 csv 的 Perl 脚本

> ID：10856943
> 
> 赞同：3
> 
> 时间：2012-06-01T20:29:55.483
> 
> 标签：sql, perl, oracle, csv

下面的代码有效，但在 Excel 中打开时，所有数据都显示在一行（但不同的列）中。查询应该显示数据标题，第 1 行和第 2 行。此外，当我打开文件时，我收到一条警告，上面写着“您尝试打开的文件，'xxxx.csv'，格式不同于“ 无论如何要解决这个问题？这也可能是原因。

tldr; 导出到具有多行的 csv - 而不仅仅是一行。修复 Excel 错误。谢谢！

```
#!/usr/bin/perl
use warnings;
use DBI;
use Text::CSV;

# local time variables
($sec,$min,$hr,$mday,$mon,$year) = localtime(time);
$mon++;
$year += 1900;

# set name of database to connect to
$database=MDLSDB1;

# connection to the database
my $dbh = DBI->connect("dbi:Oracle:$database", "", "")
or die "Can't make database connect: $DBI::errstr\n";

# some settings that you usually want for oracle 10 
$dbh->{LongReadLen} = 65535; 
$dbh->{PrintError} = 0;  

# sql statement to run
$sql="select * from eg.well where rownum < 3";

my $sth = $dbh->prepare($sql);
$sth->execute();

my $csv = Text::CSV->new ( { binary => 1 } )             
or die "Cannot use CSV: ".Text::CSV->error_diag (); 

open my $fh, ">:raw", "results-$year-$mon-$mday-$hr.$min.$sec.csv"; 

$csv->print($fh, $sth->{NAME});

while(my $row = $sth->fetchrow_arrayref){      

$csv->print($fh, $row);
}

close $fh or die "Failed to write CSV: $!"; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T20:38:27.580

```
while(my $row = $sth->fetchrow_arrayref){   
  $csv->print($fh, $row);
  $csv->print($fh, "\n");
} 
```

CSV rows are delimited by newlines. Just simply add a newline after each row.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-06T16:35:01.073

我认为另一种解决方案是使用`Text::CSV`对象的实例化并在那里传递所需的线路终止...

```
my $csv = Text::CSV->new ( { binary => 1 } )             
  or die "Cannot use CSV: " . Text::CSV->error_diag(); 
```

变成：

```
my $csv = Text::CSV->new({ binary => 1, eol => "\r\n" })
  or die "Cannot use CSV: " . Text::CSV->error_diag(); 
```

# .net - Visual Studio 2010 是否有任何插件可用于工具箱中的更多工具？

> ID：10856944
> 
> 赞同：0
> 
> 时间：2012-06-01T20:30:02.110
> 
> 标签：.net, visual-studio-2010, plugins, toolbox

Microsoft Visual Studio 2010 高级版是否有任何插件可以在工具箱中获取更多工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:34:02.287

你可以查看 DevExpress，他们有一套非常好的自定义控件！虽然不是免费的...

# java - 先决条件是做 RCP 项目的知识

> ID：10856946
> 
> 赞同：1
> 
> 时间：2012-06-01T20:30:11.437
> 
> 标签：java, eclipse-rcp, eclipse-scout

我已经完成了 .NET Win32 项目，并且从 Java 开始，我可以将我的知识应用到它的类中，并且您知道语言本身，但就基于 Java 的技术而言 ..例如我的意思是 SWT？、JFace、Hibernate 等...我对他们的经验为零...

现在两周！我需要使用 RCP、Eclipse 创建一个 DEMO 应用程序......一个简单的应用程序，只是一些带有几个 ListViews 和 SpreadSheets 的表单，在 ComboBox 中输入一些内容，将其添加到电子表格等......像这样的东西。

好的，有了这个背景和我需要知道的，请让我知道我的出发点是什么？有什么书吗？资源？以及我需要先学习的必备知识？

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T21:07:45.437

我将从[Lars Vogel 的一堆优秀教程](http://www.vogella.com/eclipse.html)开始。它们分为基本类别，如果您按照自己的方式处理其中的几个类别，您应该能够开始对事物有所了解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:04:10.010

我可以建议看看 eclipse scout [1]。该框架带有 scout sdk，它应该可以帮助您做您正在寻找的事情。

最初不需要了解 eclipse 平台。但是，对 java 的良好理解是......

在“hello world”之后，您可以浏览更全面的演示应用程序 [2]。如果您遇到障碍，请随时在我们的论坛 [3] 中提问。

祝你好运！马蒂亚斯

```
[1] http://www.eclipse.org/scout
[2] http://wiki.eclipse.org/Scout/Tutorial/3.8
[3] http://www.eclipse.org/forums/index.php?t=thread&frm_id=174 
```

# performance - How to calculate real-time stats?

> ID：10856950
> 
> 赞同：0
> 
> 时间：2012-06-01T20:30:18.173
> 
> 标签：performance, memcached, scalability

I have a site with millions of users (well, actually it doesn't have any yet, but let's imagine), and I want to calculate some stats like "log-ins in the past hour".

The problem is similar to the one described here: [http://highscalability.com/blog/2008/4/19/how-to-build-a-real-time-analytics-system.html](http://highscalability.com/blog/2008/4/19/how-to-build-a-real-time-analytics-system.html)

The simplest approach would be to do a select like this:

```
select count(distinct user_id) 
from logs
where date>='20120601 1200' and date <='20120601 1300' 
```

(of course other conditions could apply for the stats, like log-ins per country) Of course this would be really slow, mainly if it has millions (or even thousands) of rows, and I want to query this every time a page is displayed.

How would you summarize the data? What should go to the (mem)cache?

EDIT: I'm looking for a way to de-normalize the data, or to keep the cache up-to-date. For example I could increment an in-memory variable every time someone logs in, but that would help to know the total amount of logins, not the "logins in the last hour". Hope it's more clear now.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T14:33:50.217

IMO 这里更正确的方法是实现一个连续计算，将相关计数器保存在内存中。每次将用户添加到您的系统时，您都可以启动一个事件，该事件可以通过多种方式处理并更新最后一小时、最后一天甚至总用户计数器。有一些很棒的框架可以进行这种处理。[Twitter Storm](http://engineering.twitter.com/2011/08/storm-is-coming-more-details-and-plans.html)就是其中之一，另一个是[GigaSpaces XAP](http://www.gridgain.com/)（免责声明 - 我为 GigaSpaces 工作），特别是[本教程](http://www.gigaspaces.com/wiki/display/XAP9/Writing+a+Real+Time+Analytics+for+Big+Data+Application)，还有[Apache S4](http://incubator.apache.org/s4/)和[GridGain](http://www.gridgain.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T23:14:32.897

如果您没有数据库，那没关系。我没有数以百万计的用户，但我有一个可以登录数年的表，其中包含一百万行和亚秒级的简单统计信息。一百万行对于数据库来说并不算多。您不能将日期作为 PK，因为您可以有重复项。为了最小化碎片和插入速度，使日期成为聚集的非唯一索引 asc，这就是数据的来源。不确定您是否有数据库，但在 MSSQL 中可以。索引 user_id 是要测试的。这样做会减慢插入速度，因为这是一个会碎片化的索引。如果您正在寻找相当紧凑的时间跨度，则表扫描可能没问题。

为什么不同的 user_id 而不是登录名是登录名。

具有仅每 x 秒运行一次查询的属性。即使每秒并报告缓存的答案。如果或 200 个页面在一秒钟内点击该属性，那么您肯定不想要 200 个查询。如果统计数据在过去一小时内的信息陈旧一秒钟，那么这仍然是有效的统计数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T03:07:43.563

我最终使用了[Esper/NEsper](http://esper.codehaus.org/)。Uri 的建议也很有用。

Esper 允许我在获取数据时计算其实时统计数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-14T19:20:49.227

如果你只是用完日志，你可能想看看 Splunk 之类的东西。

通常，如果您想要这种内存和快速（实时），您将创建登录数据的分布式缓存，并在例如 24 小时后驱逐，然后您可以在该缓存中查询例如过去一小时内的登录。

假设登录记录如下所示：

```
public class Login implements Serializable {
    public Login(String userId, long loginTime) {..}
    public String getUserId() {..}
    public long getLoginTime() {..}
    public long getLastSeenTime() {..}
    public void setLastSeenTime(long logoutTime) {..}
    public long getLogoutTime() {..}
    public void setLogoutTime(long logoutTime) {..}
    String userId;
    long loginTime;
    long lastSeenTime;
    long logoutTime;
} 
```

要支持 24 小时后的驱逐，只需在缓存上配置一个过期时间 (TTL)

```
<expiry-delay>24h</expiry-delay> 
```

查询当前登录的所有用户：

```
long oneHourAgo = System.currentTimeMillis() - 60*60*1000;
Filter query = QueryHelper.createFilter("loginTime > " + oneHourAgo
                                        + " and logoutTime = 0");
Set idsLoggedIn = cache.keySet(query); 
```

查询过去一小时内的登录数和/或活跃用户数：

```
long oneHourAgo = System.currentTimeMillis() - 60*60*1000;
Filter query = QueryHelper.createFilter("loginTime > " + oneHourAgo
                                        + " or lastSeenTime > " + oneHourAgo);
int numActive = cache.keySet(query).size(); 
```

（有关查询的更多信息，请参阅[http://docs.oracle.com/cd/E15357_01/coh.360/e15723/api_cq.htm](http://docs.oracle.com/cd/E15357_01/coh.360/e15723/api_cq.htm)。所有这些示例均来自 Oracle Coherence。）

*为了全面披露，我在 Oracle 工作。这篇文章中表达的观点和观点是我自己的，并不一定反映我雇主的观点或观点。*

# cmake - 为什么 Cmake 总是选择 GCC？

> ID：10856952
> 
> 赞同：1
> 
> 时间：2012-06-01T20:30:26.487
> 
> 标签：cmake, environment-variables, cray

由于我无法完全理解的原因，Cmake awlays 在编译软件时选择了 GNU 编译器工具集。

我的环境是这样的：

```
which cc
/opt/cray/xt-asyncpe/4.9/bin/cc
which CC
/opt/cray/xt-asyncpe/4.9/bin/CC
echo $CC
/opt/cray/xt-asyncpe/4.9/bin/cc
echo $CXX
/opt/cray/xt-asyncpe/4.9/bin/CC 
```

但是当我使用 cmake 时，我得到了这个

```
Using existing /opt/cmake/2.8.4/bin/cmake
-- The C compiler identification is GNU
-- The CXX compiler identification is GNU
-- Check for working C compiler: /usr/bin/gcc
-- Check for working C compiler: /usr/bin/gcc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/c++
-- Check for working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info 
```

它使用 g++ 命令构建所有软件。为什么会这样？如何设置编译器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T18:42:24.067

您还可以像 autotools 一样设置环境变量 CC 和 CXX。

CC=cc CXX=CC cmake ...

确保从一个空的构建树开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T22:08:18.683

我不确定为什么 CMake 偏爱 GCC。

但是，要设置编译器，请使用：

```
cmake <path to CMakeLists.txt> -DCMAKE_C_COMPILER=/opt/cray/xt-asyncpe/4.9/bin/cc -DCMAKE_CXX_COMPILER=/opt/cray/xt-asyncpe/4.9/bin/CC 
```

这些值将被缓存，因此可以通过以下方式简单地调用 CMake 的后续运行（如果需要）：

```
cmake . 
```

# c# - 为初级游戏程序员推荐的游戏引擎

> ID：10856953
> 
> 赞同：-1
> 
> 时间：2012-06-01T20:30:40.133
> 
> 标签：c#, c++, game-engine

只是好奇关于我可以用来制作 PC 游戏的免费游戏引擎的任何建议，我在大学和实习期间一直在用 C++ 和 C# 编程，所以我对这两种语言都感觉很舒服，但从未真正探索过游戏开发除了 RPGmaker 和 GameMaker。话虽如此，我正在寻找一种我可以使用的引擎/开发工具，这将是最直观/易于访问的。（请不要说 gameMaker 或 RPGmaker，那些工作太糟糕了）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:31:55.313

在我看来，XNA 始终是一个不错的起点。

有一些用 XNA 编写的很酷的东西：

*   [http://www.youtube.com/watch?v=TgChURF5fQE](http://www.youtube.com/watch?v=TgChURF5fQE)
*   [http://www.youtube.com/watch?v=OiGADgezjC8](http://www.youtube.com/watch?v=OiGADgezjC8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:38:34.553

我已经用 Ogre 做了一些工作，它是一个 c++ 库。不是很欢乐，因为它只是一个图书馆，但足够强大。他们的网站上有一些很好的教程。

# python - Python error. I don't understand what I'm doing wrong

> ID：10856954
> 
> 赞同：2
> 
> 时间：2012-06-01T20:30:45.827
> 
> 标签：python, json, terminal, httplib

I'm so lost as to what I'm doing wrong... I've searched the net for a few hours now, tried to reformat my code a bunch, and now I just feel stuck.

This is my code:

```
import httplib
import json

urlBase = 'amoeba.im'
token = False
username = raw_input('Username? ')

connection = httplib.HTTPConnection(urlBase)

def get(url):
    connection.request("GET", url)
    response = connection.getresponse()
    print response.status, response.reason
    print response.read();
    if token == False:
        token = response.read()
        token = token.split('"token":"')[1]
        token = token.split('","')[0]
        print token

get('/api/login?username=' + username)

get('/api/rooms/join?room=#lobby&token=' + token)

get('/api/postmessage?message=hello%20world&token=' + token)

connection.close() 
```

Here's the terminal output:

```
Tyler-Keohanes-MacBook-Pro:~ tylerkeohane$ clear && '/usr/bin/pythonw' '/Users/tylerkeohane/Desktop/chatbot.py'
Username? TgwizBot
200 OK
{"success":true,"username":"TgwizBot","token":"103f6a2809eafb6","users":[{"username":"razerwolf","seen":1338582178260},{"username":"tonynoname","seen":1338582178028},{"username":"arrum","seen":1338582177804},{"username":"Valerio","seen":1338582177504},{"username":"Tgwizman","seen":1338582177258},{"username":"tonynoname2","seen":1338582178004},{"username":"TgwizBot","seen":1338582182219}],"time":1338582182219}
Traceback (most recent call last):
  File "/Users/tylerkeohane/Desktop/chatbot.py", line 21, in <module>
    get('/api/login?username=' + username)
  File "/Users/tylerkeohane/Desktop/chatbot.py", line 15, in get
    if token == False:
UnboundLocalError: local variable 'token' referenced before assignment
Tyler-Keohanes-MacBook-Pro:~ tylerkeohane$ 
```

Can anyone help? :(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T20:32:39.760

The clue is here:

```
UnboundLocalError: local variable 'token' referenced before assignment 
```

You need to declare `token` as a global:

```
def get(url):
    global token
    ... 
```

You might also want to consider avoiding global variables as they are generally regarded as a bad practice.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T20:35:27.777

You assign to `token` in your function, so it is considered a local variable to that function. As the error message indicates, you have tried to use it before there is anything in it.

The `token` that you have declared outside the function is "hidden" by the local variable so it is not accessible.

To make it assignable in your function, put `global token` just after the `def` line.

But global variables are usually a sign of a bad design. Instead you should probably be passing `token` into the function as an argument.

You will find life a lot easier if you just use the [`requests`](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFMQFjAA&url=http%3A%2F%2Fdocs.python-requests.org%2Fen%2Flatest%2Fpy-modindex%2F&ei=mSjJT4HvNsOC2AW1pIDaCw&usg=AFQjCNFqp0ERbYnWckemaReEDbso5Ue2cw&sig2=_BQT4C_tqxnoWqYot8a9gw) module.

# drupal-7 - Drupal 7.14: Preprocess search block form gives me a blank form to render in $search_form

> ID：10856956
> 
> 赞同：0
> 
> 时间：2012-06-01T20:30:58.753
> 
> 标签：drupal-7, drupal-theming

I've started working on a theme from scratch, I've tried to replace the title of the textfield but when imploding the search variable into search_form, the result is blank. Any error that I could be missing?

```
`function mytheme_preprocess_search_block_form(&$form) { 
  $form['search'] = array();
  $hidden = array();
// Provide variables named after form keys so themers can print each element independently.
  foreach (element_children($form['form']) as $key) {
     echo $key;
     $type = $form['form'][$key]['#type'];
     echo '__'.$type.'<br />';
     if ($type == 'hidden' || $type == 'token') {
        $hidden[] = drupal_render($form['form'][$key]);
    }
    else {
        if($key == 'search_block_form')
        {
            $form['form'][$key]['#title'] = t('');
            //$form['search'][$key] = drupal_render($form['form'][$key]);
        }
        else
        {
        $form['search'][$key] = drupal_render($form['form'][$key]);
        }
    }
}
// Hidden form elements have no value to themers. No need for separation.
$form['search']['hidden'] = implode($hidden);
// Collect all form elements to make it easier to print the whole form.
$form['search_form'] = implode($form['search']);
 var_dump($form);
 exit;
}` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:16:35.007

参考[http://drupal.org/node/1092122](http://drupal.org/node/1092122)：

```
<?php

/**
 * Implements hook_theme().
 */
function MYMODULE_theme($existing, $type, $theme, $path) {

  return array(
    'article_node_form' => array(
      'render element' => 'form',
      'template' => 'article-node-form',
      // this will set to module/theme path by default:
      'path' => drupal_get_path('module', 'MYMODULE'),
    ),
  );
}
?>

<?php
/**
 * Preprocessor for theme('article_node_form').
 */
function template_preprocess_article_node_form(&$variables) {

  // nodeformcols is an alternative for this solution.
  if (!module_exists('nodeformcols')) {

    $variables['sidebar'] = array();   // Put taxonomy fields in sidebar.

    $variables['sidebar'][] = $variables['form']['field_tags'];
    hide($variables['form']['field_tags']);

    // Extract the form buttons, and put them in independent variable.
    $variables['buttons'] = $variables['form']['actions'];
    hide($variables['form']['actions']);
  }
}
?> 
```

文章节点form.tpl.php

```
<?php echo drupal_render_children($form)?> 
```

# c++ - boost::trim in lambda causes compiler crash

> ID：10856965
> 
> 赞同：2
> 
> 时间：2012-06-01T20:32:03.117
> 
> 标签：c++, boost, lambda

I am having a problem with lambda expression causing compiler to crash (VC10).

It only seems to crash when I use boost::trim on a string. Is there any logical explanation to why this happens and any way to fix that behaviour ? Or will I have to do trimming manually inside the lambda ?

This is sample code that causes the crash:

```
CreateBtn.MouseUpEvent += ([this](const input::MouseEventArgs& args)
{
    Res.BlendBaseName = BlendTb.GetText(); 
    //boost::trim(Res.BlendBaseName); this line causes compiler internal error
}); 
```

MouseUpEvent is object of my class that just wrapps vector of std::functions if this is helpful in any way.

Calling other functions from within the body of lambda works, but boost::trim fails. It seems to me as a compiler bug. Any ideas?

Edit: This is the message in Output Window:

```
1>d:\development\lame\lame_framework_test\editormode.h(243): fatal error C1001: An internal error has occurred in the compiler.
1>  (compiler file 'msc1.cpp', line 1420) 
```

# jquery - jquery滑动菜单不适用于IE7

> ID：10856967
> 
> 赞同：0
> 
> 时间：2012-06-01T20:32:03.190
> 
> 标签：jquery, jquery-selectors, slidetoggle, slideup

所有其他浏览器（包括 IE8+）似乎都可以毫无问题地处理此代码；只是 IE7 失败了。单击 li 时它什么也不做（也没有控制台错误）。使用最新的 jquery 1.7.2 库。

这是javascript函数：

```
function expandableMenu(){
    $('#nav li').click(function(){
        var $child = $(this).next();
        if($child.is('.subNav')){
            if($child.is(':hidden')){
                $('#nav > ul').slideUp(300);
            }
            $child.slideToggle(300);
        }
    });
} 
```

这是html：

```
 <ul id="nav">
    <li id="accommodations"></li>
    <ul class="subNav">
      <li><a href="#">Kitchen</a></li>
      <li><a href="#">Family Room</a></li>
      <li><a href="#">Sauna</a></li>
    </ul>
    <li id="attractions"></li>
    <ul class="subNav">
      <li><a href="#">Bryce Canyon National Park</a></li>
      <li><a href="#">Zion National Park</a></li>
      <li><a href="#">Cedar Breaks Natl Monument</a></li>
    </ul>
    <li id="reserve"></li>
  </ul> 
```

最后，CSS：

```
#nav {
    top: -40px;
    left: 6px;
    position: relative;
    list-style-type: none;
    z-index: -1;
}

#nav li {
    height: 39px;
    vertical-align: bottom;
    position: relative;
}

#nav ul.subNav {
    display: none;
    list-style-type: none;
    width: 273px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:53:12.433

首先，如果您使用的是嵌套列表，则必须将第二个`ul`内部`li`元素：

```
<ul id="nav">
    <li id="accommodations">First list
        <ul class="subNav">
          <li><a href="#">Kitchen</a></li>
          <li><a href="#">Family Room</a></li>
          <li><a href="#">Sauna</a></li>
        </ul>
    </li>
    <li id="attractions">Second list
        <ul class="subNav">
          <li><a href="#">Bryce Canyon National Park</a></li>
          <li><a href="#">Zion National Park</a></li>
          <li><a href="#">Cedar Breaks Natl Monument</a></li>
        </ul>
    </li>
    <li id="reserve"></li>
</ul> 
```

然后使用在您的事件`var $child = $(this).find('.subNav');`中获取嵌套列表。`click`尝试更改`z-index`，当我在 jsfiddle 上检查您的代码时，单击也没有做任何事情 - 当我更改`-1`为`99`它开始工作时。也许 IE7 不能识别负值`z-index`。

# ios - Instruments and Shark

> ID：10856970
> 
> 赞同：1
> 
> 时间：2012-06-01T20:32:20.197
> 
> 标签：ios, debugging, testing, cocos2d-iphone

I've finally reached the end of app creation. I know that Instruments and Shark can be used to test for memory leaks and other such "bad stuff" in your apps. Unfortunately I can't find any good tutorials on how to use these tools. Especially for Shark, how should I go about using these tools? Additionally, are there any other similar tools that may be more powerful or easy to use? Thanks you!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T20:42:51.290

查找内存泄漏和其他问题的一种方法是使用静态分析。如果您使用的是 Xcode，则在 Product->Analyze 中有一个集成工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T20:33:54.437

Shark is no longer really used, use the Time Profiler instrument instead.

Currently your best bet is reading through the Apple documentation on Instruments.

# juice-ui - Juice UI 对话框 - 回发后按钮丢失

> ID：10856976
> 
> 赞同：0
> 
> 时间：2012-06-01T20:32:51.060
> 
> 标签：juice-ui

我有一个带有一些日期选择器和几个按钮的 JuiceUI 对话框。如果我进行回发（与此对话框无关）并再次弹出对话框，则按钮不再存在。请参阅下面我用来创建对话框的代码。

```
<juice:Dialog ID="mDlgEditDates" TargetControlID="dlgEditDates" runat="server" AutoOpen="false" Modal="true" Buttons="{'Edit Dates': function() { EditDatesClick(); }, 'Close': function() { EditDatesClose(); } }" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:38:37.863

这是由于与此处报告的问题相同：[Unable to access controls inside JuiceUI dialog](https://stackoverflow.com/questions/10805359/unable-to-access-controls-inside-juiceui-dialog)。请在 github 上查看问题的答案和链接。

# javascript - Using Javascript to modify user in about:config Firefox

> ID：10856980
> 
> 赞同：0
> 
> 时间：2012-06-01T20:33:05.763
> 
> 标签：javascript, firefox

In our site, we are using Windows authenticated to identify users (via intranet). IE works perfectly. However, we have to set the network.automatic-ntlm-auth value to our INTRANET website via about:config in Firefox.

My question would be: Is it possible to change that value of "*network.automatic-ntlm-auth.trusted-uris*" using Javascript?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:35:14.833

出于安全原因，永远无法从网页更改浏览器配置。

# android - 将控制权从 html 传递给 android 以调用 android 方法

> ID：10856981
> 
> 赞同：1
> 
> 时间：2012-06-01T20:33:07.240
> 
> 标签：android, html

我是 android 的新手（也是我在 StackOverflow 上的第一篇文章），我想知道是否有一种方法可以将控制从显示 HTML 的 web 视图传递到实际的 android 代码。为了更清楚一点：

假设我有一个 HTML 代码，我在 android 的 web 视图中显示，现在我单击提交按钮（在 HTML 页面中），有没有办法使用该单击来调用 android 代码中的方法？

一个非常高级的视图可以是

if(Submit is clicked){ //提交将是html页面中的提交按钮

调用 xyz(); //xyz 将是 android 方法

}

如果你们能提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:37:32.863

可以的，参考[这个](http://developer.android.com/guide/webapps/webview.html)。那里有一个简单的例子应该让你开始。

Javascript 是当今的热门词汇。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T20:38:50.010

用于[`addJavaScriptInterface()`](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29)在 Javascript 环境中对某个 Java 对象进行引用。

[这是一个示例应用程序](https://github.com/commonsguy/cw-advandroid/tree/master/WebView/GeoWeb1)来演示这一点，以允许 a 中的页面`WebView`从托管`WebView`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T20:43:31.337

您可以使用 WebView`addJavascriptInterface`将您的方法导出到 HTML 页面，这是一个相关的片段：

```
WebViewVariable.addJavascriptInterface(new MyJavaScriptInterface(context), "Android"); 
```

这是代码`MyJavaScriptInterface`：

```
class MyJavaScriptInterface {
    Context localContext;

    public MyJavaScriptInterface(Context ctx) {
        localContext = ctx;
    }

    public void pageReady() {
        // do your work here
    }
} 
```

您现在可以`pageReady()`像这样从您的 HTML 页面调用上述类的方法`Android.pageReady()`。请记住，您只能传递原始数据类型（如果我没记错的话）。

希望能帮助到你

# c# - Use LINQ to Join on Multiple Fields

> ID：10856987
> 
> 赞同：0
> 
> 时间：2012-06-01T20:33:15.690
> 
> 标签：c#, linq, inner-join, multiple-tables

How would I do this in LINQ?

```
SQL

Where tblAccounts.AccountCode = tblAccountAssociations.ChildCode
And tblAccountAssociations.AssociationType = "DS" 
```

Here is my attempt. The problem seems to be with "assoc.AssociationType == "DS". Is it part of the join or the Where clause?

```
var customers = 
    from customer in context.tblAccounts 
    join assoc in context.tblAccountAssociations on customer.AccountCode equals assoc.ChildCode 
    where customer.AccountType == "S" and assoc.AssociationType == "DS" 
    orderby customer.AccountType 
    select new { Customer = customer, Assoc = assoc }; 
```

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:40:49.720

```
var customers =  
from customer in context.tblAccounts  
join assoc in context.tblAccountAssociations on customer.AccountCode equals assoc.ChildCode  
where customer.AccountType == "S" **&&** assoc.AssociationType == "DS"  
orderby customer.AccountType  
select new { Customer = customer, Assoc = assoc }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:18:17.330

是的，“and”应该是“&&”，但你的问题的答案是，在 Linq 中，谓词`assoc.AssociationType == "DS`不是连接的一部分。

在 SQL 中，您可以将其作为连接语句的一部分

```
...
FROM tblAccounts c
INNER JOIN tblAccountAssociations a ON
    c.AccountCode = a.ChildCode AND a.AssociationType == "DS" 
... 
```

但是在 Linq 语句中，您只需将其添加为谓词，就像您所做的那样（除了“和”问题）。

在 SQL 中，就执行计划（性能）而言，将其添加到 JOIN 短语中或放入单独的 WHERE 条件中都没有关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T21:49:44.283

根据 MSDN (http://msdn.microsoft.com/en-us/library/bb311043.aspx)，在“where”子句中使用“&&”而不是“and”来指定多个条件。

# database - 在 SQL Server 管理工作室中导入文件失败

> ID：10856988
> 
> 赞同：1
> 
> 时间：2012-06-01T20:33:39.360
> 
> 标签：database, tsql, file-upload

在 SQL Server Management Studio 中，我将一个表从一个数据库导出到一个 .xslx 文件，然后将它导入到另一台服务器上的另一个数据库。它无法导入并提供以下详细信息：

> *   验证（错误）
>     消息
>     • 错误 0xc0202049：数据流任务 1：插入只读列“QuestionID”失败。
>     （SQL Server 导入和导出向导）
> 
> • 错误0xc0202045：数据流任务1：列元数据验证失败。
> （SQL Server 导入和导出向导）
> 
> • 错误 0xc004706b：数据流任务 1：“组件“目的地 - HJFast_Track”(47)”验证失败并返回验证状态“VS_ISBROKEN”。
> （SQL Server 导入和导出向导）
> 
> • 错误0xc004700c：数据流任务1：一个或多个组件验证失败。
> （SQL Server 导入和导出向导）
> 
> 错误 0xc0024107：数据流任务 1：任务验证期间出现错误。
> （SQL Server 导入和导出向导）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T21:06:43.590

我最好的猜测是 QuestionID 是一个自动递增的身份字段。为了将值插入该列，您需要指定。

```
SET IDENTITY_INSERT YourTable ON 
```

*如果该字段是自动增量标识，*则您的另一个选择是将其排除在导入/导出之外，并让 sql 引擎像任何其他插入一样生成键。

在我面前没有你的表的模式的情况下，我可以提供尽可能好的猜测。

If you update your question with the structure of the table your trying to insert that might give other clues. For example, if QuestionID is a guid or something.

# php - Importing Customer Database via CSV to RDS (MySQL)

> ID：10856989
> 
> 赞同：1
> 
> 时间：2012-06-01T20:33:44.847
> 
> 标签：php, mysql, amazon-rds

We're working on a feature to allow our users to import their own customer/marketing database into our system from a CSV file they upload to our servers. We're using PHP on Ubuntu 10.04 on Amazon EC2 backed by MySQL on Amazon RDS.

What we've currently got is a script that uses LOAD DATA LOCAL INFILE but it's somewhat slow, and will be very slow when real users start uploading CSV files with 100,000+ rows.

We do have an automation server that runs several tasks in the background to support out application, so maybe this is something that's handed over to that server (or group of servers)? So a user would upload a CSV file, we'd stick it in an S3 bucket and either drop a line in a database somewhere linking that file to a given user, or use SQS or something to let the automation server know to import it, then we just tell the user their records are importing and will show up gradually over the next few minutes/hours?

Has anybody else had any experience with this? Is my logic right or should we be looking in a entirely different direction?

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:38:13.080

My company does exactly that, via cron.

We allow the user to upload a CSV, which is then sent to a directory to wait. A cron running every 5 minutes checks a database entry that is made on upload, which records the user, file, date/time, etc. If a file that has not been parsed is found in the DB, it accesses the file based on the filename, checks to ensure the data is valid, runs USPS address verification, and finally puts it in the main user database.

We have similarly setup functions to send large batches of emails, model abstractions of user cross-sections, etc. All in all, it works quite well. Three servers can adequately handle millions of records, with tens of thousands being loaded per import.

# asp.net - ASP.net Custom GridView Control

> ID：10856991
> 
> 赞同：3
> 
> 时间：2012-06-01T20:33:49.873
> 
> 标签：asp.net, datagrid, user-controls, asp.net-2.0

I'm working on a custom GridView control and need some help. I can get it to properly spit out what I need if I manually put in the column name. Right now I have 2 problems. The first one is getting the column headers to display dynamically. The second is filling in row items dynamicly.

Default.aspx

```
<asp:View id="vCreateNew" runat="server">
            Content Here (View 2)...
            <trac:DataGridView id="gvMain" runat="server"  GridLines="Horizontal"  AutoGenerateColumns="False" > </trac:DataGridView>
        </asp:View> 
```

Default.aspx.vb

```
Partial Class processes_ProgramTrack_Default
    Inherits Citi.CSPaper.Controls.BasePage
    Protected Sub ProgramTrackNav_MenuItemClick(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.MenuEventArgs) Handles ProgramTrackNav.MenuItemClick
        Dim strSelection As String = ProgramTrackNav.SelectedValue
        Dim sqlDataSource As New SqlDataSource()
        sqlDataSource.ConnectionString = ConfigurationManager.ConnectionStrings("CSPaperWEBConnectionString").ConnectionString
        Select Case strSelection
            ......                
            Case "CreateNew"
                mlvNav.SetActiveView(vCreateNew)
                sqlDataSource.SelectCommand = "SELECT [ProgramNumber], [ProgramName], [ProgramStatus] FROM tblPrgTrackPrograms"
                Dim args As New DataSourceSelectArguments
                gvMain.DataSource = sqlDataSource.Select(args)
                gvMain.DataBind()
            ........
            End Select
    End Sub
End Class 
```

GridViewControl.ascx

```
<%@ Control Language="VB" AutoEventWireup="false" CodeFile="GridViewControl.ascx.vb"  Inherits="GridViewControl" %>
<asp:GridView ID="GridViewControl" runat="server" >
</asp:GridView> 
```

GridViewControl.ascx.vb

```
Public Class GridViewControl
    Inherits System.Web.UI.UserControl
    Private _html As New StringBuilder()
    Private _dataSource As IEnumerable
    Private _CssClass As String
    Private _CellSpacing As String
    Public Property DataSource() As IEnumerable
        Get
            Return _dataSource
        End Get
        Set(ByVal value As IEnumerable)
            _dataSource = value
        End Set
    End Property
    Public Overridable Property CssClass() As String
        Get
            Return _CssClass
        End Get
        Set(ByVal value As String)
            _CssClass = value
        End Set
    End Property
    Public Overridable Property CellSpacing() As String
        Get
            Return _CellSpacing
        End Get
        Set(ByVal value As String)
            _CellSpacing = value
        End Set
    End Property
    Private Sub CreateBulletedList()
        Dim dataSource As IEnumerable = Nothing
        Dim i As Integer = 0
        Dim strArr() As String = {"ID", "Name", "Fee"}
        Try
            dataSource = Me._dataSource
        Catch
        End Try

        If Not (dataSource Is Nothing) Then
            _html.Append("<table id=""" & ClientID & """ class=""" & _CssClass & """ CellSpacing=""" & _CellSpacing & """>")
            _html.Append("<thead>" & vbCrLf & "<tr>" & vbCrLf)
            For Each Item As String In strArr
                _html.Append("<th>" & Item & "</th>" & vbCrLf)
            Next
            _html.Append("</tr>" & vbCrLf & "</thead><tbody>" & vbCrLf)
            For Each dataObject As Object In dataSource
                _html.Append("<tr>" & vbCrLf)
                For i = 0 To 2
                    _html.Append("<td>" & vbCrLf)
                    _html.Append(dataObject.Row(i))
                    _html.Append("</td>" & vbCrLf)
                Next
                _html.Append("</tr>" & vbCrLf)
            Next dataObject
            _html.Append("</tbody></table>" & vbCrLf)
        End If
    End Sub
    Public Overrides Sub DataBind()
        MyBase.OnDataBinding(EventArgs.Empty)

        CreateBulletedList()
    End Sub
    Protected Overrides Sub Render(ByVal output As HtmlTextWriter)
        output.Write(_html)
    End Sub
End Class

------------------------------------
| Table Data                       |
------------------------------------
ID  AppName            Environment
2   TestApp            UAT
3   ServerFileMaint    UAT
4   ProgramTrack       Development
5   RegZ_Stmnt_Adj     Active
6   SecInv             Decommission 
```

I do not want to manually code `for i = 0 to ...`, the upperbound, but want to do this dynamicly. Same way for the headings. The problem I run into is if I don't hard code the upperbound I get an error message stating `Cannot find column 3.`. I get this when coding a second `For Each` block to loop through the row contained data.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:09:40.723

我想我明白这里发生了什么，以及如何解决它。

对我来说最大的困惑是这个块：

```
 For Each dataObject As Object In dataSource
                _html.Append("<tr>" & vbCrLf)
                For i = 0 To 2
                    _html.Append("<td>" & vbCrLf)
                    _html.Append(dataObject.Row(i))
                    _html.Append("</td>" & vbCrLf)
                Next
                _html.Append("</tr>" & vbCrLf)
            Next dataObject 
```

如果 dataSource 是一个 DataSet，那么这种方法是有意义的……但不是真的，因为您想要引用 Table(0)。如果 dataSource 是一个 DataTable ，那么这种方法是有意义的，除非不是真的，因为那样你会想要循环遍历`For Each dataObject as DataRow in dataSource.Rows`. 但情况似乎并非如此，因为您引用了 dataObject.Row(i)。

您可能想要做的是（在粗略/未经测试的代码中）更像这样：

```
 For Each dataObject As DataRow In dataSource.Rows
                _html.Append("<tr>" & vbCrLf)
                For Each col as DataColumn In dataSource.Columns
                    _html.Append("<td>" & vbCrLf)
                    _html.Append(dataObject(col).ToString())
                    _html.Append("</td>" & vbCrLf)
                Next
                _html.Append("</tr>" & vbCrLf)
            Next 
```

这假设 dataSource 是一个 DataTable，您将遍历所有表行，然后对于每一行，您将遍历数据表中的所有列，并获取该行中每一列的数据并显示它。

# java - 如何仅使用给定类所需的类文件创建 JAR

> ID：10856996
> 
> 赞同：3
> 
> 时间：2012-06-01T20:34:16.717
> 
> 标签：java, jar

我有一个目录，其中包含数百个由先前编译构建的类文件。假设我有一个类，它只依赖于那些生成的类文件的一小部分。是否可以创建一个仅具有给定类的依赖项的 JAR？

**编辑：**请注意，我不是在谈论库级别的依赖项（即 JAR）。当我提到上面的依赖关系时，我指的是由 A 类调用 B 类产生的那种依赖关系。也许一个例子会很好。想象一下，我的项目中有以下类。

```
public class A {
    B bField;
}

public class B {
    C cField;
}

public class C {
    B bField;
} 
```

现在假设我想用 B 类构建一个 JAR，那么 JAR 还需要包含 C 的类文件，因为一个依赖于另一个。如果我想从 A 类构建一个 JAR，那么所有三个类都将包括在内。有没有办法检查这个依赖链并用结果构建一个 JAR？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T20:53:37.050

有几种产品可以做到这一点，包括[ProGuard](http://proguard.sourceforge.net)。

危险在于，如果没有详尽的运行时分析，或者对代码及其使用的任何框架没有很好的理解，如果通过反射实例化了某些类，它们可能会被遗漏。插件系统、依赖注入、脚本等都会干扰静态分析的准确性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:40:15.983

是的，有可能。您可以使用要包含的类列表创建一个文件，并将该文件传递给 jar 命令。详细信息记录[在这里](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/jar.html)。