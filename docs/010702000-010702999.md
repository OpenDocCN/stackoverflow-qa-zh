# StackOverflow 问答 10702000-10702999

# javascript - 左侧菜单，如 wordpress

> ID：10702000
> 
> 赞同：0
> 
> 时间：2012-05-22T12:25:23.533
> 
> 标签：javascript, jquery

我正在尝试找到一个 javascript 库（如果可以使用 jquery 更好），以便在您登录后或多或少地复制 wordpress 左侧菜单栏的功能。

此菜单包含带名称的图像，您可以展开/折叠，如果悬停，则可以在新的扩展窗口中看到选项，如果单击它，菜单会扩展为与先前显示的选项相同，...

我找到了一些库/jquery 插件，但它们并不太接近......

我不拘泥于寻找免费的开放选项，它可以是商业选项。

Maye 可以通过 jquery collapse 来完成，但是，如果它已经存在，更好...

谢谢，

![见附图。](../Images/2b9a3d6e05ace3d7ed5a9658153847c1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:33:51.550

像这样的东西？

[看看这个演示](http://jsbin.com/irunik/edit#javascript,html,live)

```
$('ul#tabs li').hover(function() {
  $(this).find('ul').hide().stop().animate({height: 'toggle'});
}, function(){
  $(this).find('ul').stop().animate({height: 'toggle'});
}); 
```

也适用于禁用 JS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:51:45.953

基本的 javascript 和 css 可以完成这项工作，菜单是一个 ul，每个菜单项都是一个 li，里面有另一个 ul，它有 display:none; 在 CSS 中。当您单击它时，只需使用 javascript 来显示它。对于悬停，只需添加一个事件侦听器以悬停在每个 li 元素上，然后显示/隐藏 ul 或附加它。

还是我错过了你想要的东西？

# progress-4gl - 动态引用正在进行中的临时表列值

> ID：10702002
> 
> 赞同：1
> 
> 时间：2012-05-22T12:25:25.113
> 
> 标签：progress-4gl

我正在使用进度 4GL

我有一个数据电子表格，其中包含多个名为 data1....50 的列。

我创建了一个包含所有值的临时表。

现在我想遍历临时表列并进行各种计算

所以我需要这样的东西：

```
for each record loop thru cols_in_temp_table .

   if col_value = "XYZ" then
     do calcs and stuff      

end. 
```

那么如何引用 temp_table cols ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:12:33.497

根据您的版本，这是一种方法：

```
DEFINE VARIABLE h-cols  AS HANDLE   NO-UNDO.         

h-cols = tt-cols:BUFFER-HANDLE.                      

FOR EACH tt-cols                                     
   NO-LOCK:                                         

   IF h-cols::col-name = "some value" THEN       
       RUN do-something.                            

END. 
```

对于不能使用 "::" 运算符的版本，请执行以下操作：

```
FOR EACH tt-cols                                     
   NO-LOCK:                                         

   IF h-cols::buffer-field("col-name"):buffer-value = "some value" THEN       
       RUN do-something.                            

END. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:57:50.060

好的，没有解决原始查询，但找到了解决方法。将数据拆分并放入单独的表中，冗长，但可以解决问题。

# jqgrid - 覆盖搜索表单中的数据下拉值（multipleSearch）

> ID：10702005
> 
> 赞同：1
> 
> 时间：2012-05-22T12:25:37.473
> 
> 标签：jqgrid

我有一个这样的 colModel 条目：

```
{name:'status', index:'status', sorttype:"text", xmlmap:"STATUS", width:"90", stype: 'select', searchoptions:{sopt: ['eq','ne'], value:':all;Hold:Hold;4-Eye-Check:4-Eye-Check;Approved:Approved;Rejected:Rejected;Closed:Closed'}}, 
```

只要在FilterToolBar中使用它就可以正常工作，但是如果我打开NavGridSearch，我会遇到麻烦。条目“全部”不再起作用。FilterToolBar 中的查询似乎忽略了我的空，但 NavGridSearch 没有。

是否有任何通配符可以用来代替空字符串，无论我在 FilterToolBar 或 NavGridSearch 中搜索所有状态条目，它都会提供所有条目？

我使用最新的 OpenSource jQGrid Lib(4.3.2)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:04:11.663

我试图了解“全部”标准的用例。'all' 的目的似乎是您希望网格忽略此搜索条件并返回所有行而不考虑此值？如果是这样的话，用户为什么还要选择这个搜索条件呢——他们可以去掉它，达到同样的效果。还是我错过了什么？

* * *

**更新**

网格使用函数`createEl : function(eltype,options,vl,autowidth, ajaxso)`为搜索表单创建选择。不幸的是，这个选择总是将`all`条件添加到列表中，即使它的搜索值`""`不会匹配任何行。一种解决方法是修改网格以跳过具有空值的选择选项。使用源文件`jquery.jqGrid.src.js`，您可以添加以下代码以跳过该`all`选项：

```
else if (sv.length > 1 && sv[0].length === 0) continue; 
```

这是在以下范围内`createEl`：

```
 if(typeof options.value === 'string') {
                    so = options.value.split(delim);
                    for(i=0; i<so.length;i++){
                        sv = so[i].split(sep);
                        if(sv.length > 2 ) {
                            sv[1] = $.map(sv,function(n,ii){if(ii>0) { return n;} }).join(sep);
                        } else if (sv.length > 1 && sv[0].length === 0) continue; // <-- Change this line
                        ov = document.createElement("option");
                        ov.setAttribute("role","option");
                        ov.value = sv[0]; ov.innerHTML = sv[1];
                        elem.appendChild(ov);
                        if (!msl &&  ($.trim(sv[0]) == $.trim(vl) || $.trim(sv[1]) == $.trim(vl))) { ov.selected ="selected"; }
                        if (msl && ($.inArray($.trim(sv[1]), ovm)>-1 || $.inArray($.trim(sv[0]), ovm)>-1)) {ov.selected ="selected";}
                    } 
```

如果您需要缩小版本，请更新 jqGrid 的“src”版本，然后通过 Google Closure Compiler 运行它。

我不确定这是一个通用的更改，这就是为什么我现在称它为一种解决方法。从长远来看，需要找到更好的解决方案，以便对 jqGrid 进行修补...稍后我将尝试找到更多时间来重新讨论这个问题。

这有帮助吗？

# upshot - UpShot FindById - 子元素

> ID：10702008
> 
> 赞同：1
> 
> 时间：2012-05-22T12:25:46.533
> 
> 标签：upshot

有人知道如何使用 Upshot.findById 来获取子元素吗？

谢谢你的帮助

# field - Sitecore 访问 ASP 控件的字段值

> ID：10702009
> 
> 赞同：0
> 
> 时间：2012-05-22T12:25:49.150
> 
> 标签：field, sitecore

谁能告诉我是否可以使用 ASP 控件而不是字段渲染器来显示字段。请参见下图。注意：我需要在Repeater的Item Databound Event中进行。

我有一个带有字段作为外部链接的模板。例如：联系我们。在页面中显示该链接的一种方法是使用字段渲染器，如下所示。

联系我们.aspx:

```
<asp:Repeater ID="rptContactUS" runat="server" OnItemDataBound="Menu_OnItemDataBound">
        <ItemTemplate>
           <item><sc:FieldRenderer ID="frContactUS" runat="server"/></item>                                           
       </ItemTemplate>    
 </asp:Repeater> 
```

联系我们.aspx.cs：

```
protected void Menu_OnItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        Field item = (Field)e.Item.DataItem;
        if (item != null)
        {
            FieldRenderer frContactUS= (FieldRenderer)e.Item.FindControl("frContactUS");
            if (frContactUS!= null)
            {
                frContactUS.FieldName = item.Name;
            }
        }    
    } 
```

上面的代码工作正常。我的问题是我是否可以使用 Asp 控件而不是 FieldRenderer 并将字段项中的链接值分配给中继器的项目数据绑定事件中链接的 asp href 属性。如果是，请告诉我如何？

谢谢， 苏哈斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:43:22.580

是的你可以。从我在您的示例中看到的内容，您将字段绑定到菜单。您还可以将项目列表绑定到您的菜单。然后，您可以像这样在转发器中检索项目的字段：

```
if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
        {
            Item dataItem = (Item)e.Item.DataItem;
                    System.Web.UI.WebControls.HyperLink hl = (System.Web.UI.WebControls.HyperLink)e.Item.FindControl("hl");

                    if (hl != null)
                    {
                    Sitecore.Data.Fields.LinkField url = dataItem.Fields["linkfield"];

                    if (url != null)
                    {
                        hlMerk.NavigateUrl = url.Url;
                        hlMerk.Target = url.Target;
                        // more properties are available check sitecore documentation
                    }                       
                }
           } 
```

}

从这里您将拥有 url 字段（显然您应该提供正确的字段名称而不是 url。LinkField 具有多个属性，如可在 @ [http://sdn.sitecore.net](http://sdn.sitecore.net)找到的通用 Sitecore 文档中所述。

# python - 如何用字符串中的标签替换不同的值？

> ID：10702010
> 
> 赞同：-1
> 
> 时间：2012-05-22T12:25:50.460
> 
> 标签：python

我有字符串：

```
Lorem ipsum dolor [mytag]something[/mytag]sit amet, ipsum [mytag]something else[/mytag]a laoreet ultricies 
```

我想获得值“某物”和“其他东西”并替换它。

怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:32:56.337

您可以使用[bbcode 模块](http://pypi.python.org/pypi/bbcode)：

```
# Using the default parser.
import bbcode
html = bbcode.render_html(text) 
```

可选，因为我认为已经有 [img] ：

```
# Installing simple formatters.
parser = bbcode.Parser()
parser.add_simple_formatter('img', '<img src="%(value)" />') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:32:20.253

正则表达式是要走的路。

```
import re
s = 'Lorem ipsum dolor [mytag]something[/mytag]sit amet, ipsum [mytag]something else[/mytag]a laoreet ultricies'
print re.sub(r'\[mytag\](.+?)\[/mytag\]', r'<img src="\1">', s) 
```

# firefox - 主机头欺骗

> ID：10702019
> 
> 赞同：1
> 
> 时间：2012-05-22T12:26:28.517
> 
> 标签：firefox, hostheaders

使用 Firefox，我可以篡改主机标头，以便对 localhost/forum/ 的调用将主机标头欺骗为 www.mydomain.com

我这样做的原因是因为我正在开发一个反向代理，它将在检测到某些域时执行。一切正常，几乎一切正常。

代理代码检测到请求并将其重新路由到另一台服务器，服务器以正确的 html 内容进行响应。问题在于返回的 html 引用的外部脚本文件。所以例如

```
<script type="text/javascript" src="init.js"></script> 
```

这将导致来自浏览器的非欺骗性（是否有这样的词？）请求

```
http://localhost/init.js 
```

通过检查此请求，问题在于主机标头已恢复为 localhost 而不是 www.mydomain.com。

有没有办法在不更改主机文件的情况下设置主机标头以用于页面加载期间发出的所有请求？我想篡改从初始导航产生的所有请求的主机头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T23:59:45.213

我倒过来了。我的 reverseProxy 正在读取主机文件并根据主机名的解析方式重定向请求。

正确的方法是更改​​ hosts 文件，然后您的代理读取 web.config 文件以获取重定向。那只是在开发盒上，部署时不需要更改主机文件，因为客户端将在远程计算机上。所以它只需要一个 web.config 文件条目。

# css - css3 自动浏览器兼容性修复程序

> ID：10702020
> 
> 赞同：1
> 
> 时间：2012-05-22T12:26:31.603
> 
> 标签：css, cross-browser

有人知道会自动修复我的 CSS 以获得更多浏览器兼容性的网站吗

例如：如果在我的 css 中写

```
div 
{
    border-radius: 10px;
} 
```

转换成

```
div
{
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:39:35.790

您可以为此[http://leaverou.github.com/prefixfree/使用供应商前缀 JS](http://leaverou.github.com/prefixfree/)

# javascript - 在 Node.js 中，将 json 对象变成字符串 - 简单的方法？

> ID：10702021
> 
> 赞同：-1
> 
> 时间：2012-05-22T12:26:31.653
> 
> 标签：javascript, json, string

我尝试了很多不同的方法，并使用了许多不同的 PHP 和 JS 函数来尝试实现这一点。锄头我把这个 json 对象；

```
"lines" :   ["text line 1<br/>","text line 2<br/>","text line 3<br/>","text line 4<br/>"] 
```

进入这个字符串，这样我就可以添加到 HTMl div

```
text line 1<br/> text line 2<br/> text line 3<br/> text line 4<br/> 
```

不，引号，括号或其他任何东西。

我所拥有的最简单的形式就是字符串化；

```
lines = JSON.stringify(obj.lines) 
```

但上面的输出、括号、引号和逗号

抱歉，如果这是一个简单而愚蠢的问题，但是我（现在完成（尴尬！））已经到处搜索了一个简单的答案。没有什么突出的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:31:36.670

查看[Array.join](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/join)：

```
var html = obj.lines.join(""); 
```

**示例：http:** [//jsfiddle.net/VXbs7/](http://jsfiddle.net/VXbs7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:30:01.743

你*有*一个 JSON 字符串。您需要将其*解析*为数据结构，然后获取字符串数组，然后循环遍历它们（随时输出）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T12:34:10.680

如果您是从 javascript 执行此操作，则非常简单。JSON 是 JavaScript 原生的，可以很简单地解释为一个对象。不过，看起来您的问题中只粘贴了一半的 JSON 对象。一个完整的 JSON 对象被包裹在`[]`or中`{}`（除非它只是一个字符串或数字类型，但它不是一个对象）。

无论如何，如果你在 PHP - 你可以轻松地`json_decode()`这个字符串并像这样循环它：

```
<?php
$arr = json_decode($json_string, true); //true makes it an array instead of object

foreach ($arr['lines'] as $line)
{
    echo $line;
} 
```

如果您尝试在 javascript 中（在浏览器中）完成它，这也很容易（假设您的字符串存储在 php 变量中，并且您正在使用 jquery 进行 dom 操作）

```
<script type="text/javascript">
var obj = <?= $json_string; ?>,
    mydiv = $('#mydiv);

for (key in obj['lines'])
{
    var line = obj['lines'][key];
    mydiv.append(line);
}
</script> 
```

这两个都应该给你你正在寻找的输出

# search - 如何在 UITableView 中显示搜索词的搜索结果及其句子

> ID：10702023
> 
> 赞同：0
> 
> 时间：2012-05-22T12:26:37.747
> 
> 标签：search, core-data, nsfetchedresultscontroller

我在核心数据中有大量文本，并在我的 tableView 中使用了一个搜索栏（显示文本），并使用 fetchedResultsController 和 NSpredicate 在实体中实现了搜索。

所以 UITableView 显示包含搜索词的**文本结果。**但我想在搜索词之前或之后显示包含*搜索词*或 2-3 个词的句子。

例如，如果我有这样的文字：“我对飞行模型飞机有广泛的了解，并且喜欢 CoreData”并搜索“飞行”，我只想显示“......**飞行**模型飞机的广泛知识......”

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:32:38.997

您必须以粗体显示它吗？

如果否，答案如下

*   首先获取已搜索文本的范围，例如假设您在句子“this is the word am search”中搜索“word”，搜索“word”的范围即12，并将其保存在一个变量然后获取范围为 12 - 10（范围 [2,10]）的子字符串并将其保存在另一个变量中最后在范围 [12+4,10] 的单词之后获取 10 个字符的 sbustring 并将其保存到另一个变量

现在连接所有这些变量（之前+“”+“word”+“”+之后）并显示它

如果您需要将单词加粗，那么您可以使用诸如“OHAttributedLabel”之类的库阅读更多[https://github.com/AliSoftware/OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)

# expressionengine - 表达式引擎中的自定义字段名称映射

> ID：10702029
> 
> 赞同：1
> 
> 时间：2012-05-22T12:26:58.337
> 
> 标签：expressionengine, custom-fields

我正在使用 ExpressionEngine 对站点进行一些更改，有一个我似乎不太理解的概念，并且可能正在编码具有预先提供的方法的变通办法。

特别是对于频道和成员，原始创建者添加了几个自定义字段。我来自传统的数据库背景，其中表中的每一列都有一个特定的有意义的名称。我还习惯于通过添加与唯一键连接的相关表来扩展专有数据，同样，相关表中的字段名称是有意义的。

但是，在 EE 中，当您添加自定义字段时，它会在表中将它们创建为 field_id_x 并将一个条目放入另一个表中，告诉您这些是什么。

现在，从 UI 的角度来看，这一切都很好，可以为管理员提供权力，但在编写任何代码时，这都是一件令人头疼的事情。

好的，有模板标签，但我倾向于不使用它们，而且它们在数据库查询中也不好用。

有没有一种简单的方法来查询成员表，然后将 m_field_1 称为它的真正名称——在我的例子中是“addresslonglat”。

我正在处理的表中有几十个这样的字段，目前我用固定的名称来解决它们，比如“m_field_id_73”，这意味着什么。

有人知道将数据及其字段名称轻松组合在一起的简单方法吗？

理想情况下，我想做以下事情：

```
$result = $this->EE->db->query("select * from exp_member_data where member_id = 123")->row();
echo $result->addresslonglat; 
```

而不是

```
echo $result->m_field_id_73; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:29:38.860

这应该适合你：

```
<?php    
$fields = $data = array();
$member_fields = $this->EE->db->query("SELECT m_field_id, m_field_name FROM exp_member_fields");
foreach($member_fields->result_array() as $row)
{
    $fields['m_field_id_'.$row['m_field_id']] = $row['m_field_name'];
}

$member_data = $this->EE->db->query("SELECT * FROM exp_member_data WHERE member_id = 1")->row();
foreach($member_data as $k => $v)
{       
    if($k != 'member_id')
    {
        $data[$fields[$k]] = $v;
    }
}
print_r($data);
?> 
```

然后只需使用您的新`$data`数组。

# html - 右侧带有内部箭头的 CSS 功能区

> ID：10702040
> 
> 赞同：2
> 
> 时间：2012-05-22T12:27:39.117
> 
> 标签：html, css, css-shapes

我想在这个图像上创建一个丝带效果（图像的红色部分）： ![功能区示例](../Images/af0804a5375b42e974445930150e8180.png)

当我尝试创建带边框的箭头效果时，对象的形状被完全破坏：

HTML 代码：

```
<a href="#" class="mali_oglas_kategorija">Kategorija</a> 
```

到目前为止的 CSS 代码（没有尝试创建箭头）：

```
.mali_oglas_kategorija {        
        position: relative;
        display: inline-block; 
    font-weight: bold;
        width: 100px;        
    padding: 6px 20px 6px 40px;
    margin: 10px 10px 10px -18px;
        color: #e5e5e5 !important;
    background-color: #760000;  
    -webkit-box-shadow: 0px 2px 4px rgba(0,0,0,.5);
    -moz-box-shadow: 0px 2px 4px rgba(0,0,0,.5);
    box-shadow: 0px 2px 4px rgba(0,0,0,.5);}    
.mali_oglas_kategorija:after{
        content: ' ';
    position: absolute;
    width: 0;
    height: 0;
    left: 0px;
    top: 100%;
    border-width: 5px 10px;
    border-style: solid;
    border-color: #470000 #470000 transparent transparent;
} 
```

知道如何创建这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:16:59.023

[在这里做了一个小提琴。](http://jsfiddle.net/6uyfq/)虽然没有ab标签无法解决它。我用 b 因为它太小了

HTML

```
<a href="#" class="mali_oglas_kategorija">Kategorija<b></b></a> 
```

CSS

```
.mali_oglas_kategorija {        
    position: relative;
    display: inline-block;
    font-weight: bold;
    width: 100px;        
    padding: 6px 20px 6px 40px;
    margin: 10px 10px 10px -18px;
    color: #e5e5e5 !important;
    background-color: #760000;  
    -webkit-box-shadow: 3px 2px 4px rgba(0,0,0,.5);
    -moz-box-shadow: 3px 2px 4px rgba(0,0,0,.5);
    box-shadow: 3px 2px 4px rgba(0,0,0,.5);}    
.mali_oglas_kategorija:before{
    content: ' ';
    position: absolute;
    width: 0;
    height: 0;
    left: 0px;
    top: 100%;
    border-width: 5px 10px;
    border-style: solid;
    border-color: #470000 #470000 transparent transparent;
}

.mali_oglas_kategorija:after{
    content: ' ';
    position: absolute;
    width: 0;
    height: 0;
    right: -10px;
    top: 0;
    border-width: 10px 5px;
    border-style: solid;
    border-color: #760000 transparent transparent #760000  ;
}
.mali_oglas_kategorija b {
    position: absolute;
    width: 0;
    height: 0;
    right: -10px;
    bottom: 0;
    border-width: 10px 5px;
    border-style: solid;
    border-color:  transparent transparent #760000 #760000 ;
}

body { padding: 50px;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-06T10:43:37.050

如果命中测试也需要这样做，您也可以使用倾斜元素。

就像是：

```
.rib {
  margin-left: 20px;
  height: 40px;
  width: 200px;
  position: relative;
  background: gray;
  color: white;
  line-height: 40px;
  text-align: center;
}
.rib:before,
.rib:after {
  content: "";
  position: absolute;
  right: -10px;
  top: 0;
  height: 50%;
  width: 40px;
  background: inherit;
}
.rib:before {
  transform: skewX(-45deg);
}
.rib:after {
  transform: skewX(45deg);
  top: 50%;
}
.shad {
  position: absolute;
  height: 40px;
  width: 20px;
  top: 0%;
  left: 0;
  background: dimgray;
  transform-origin: top left;
  transform: skewY(45deg);
  z-index: -1;
  box-shadow:inset 0 0 10px black;
}
```

```
<div class="rib">123
  <div class="shad">
  </div>
</div>
```

# windows-7 - 确保您的程序以 Windows 安全模式启动

> ID：10702047
> 
> 赞同：1
> 
> 时间：2012-05-22T12:28:11.530
> 
> 标签：windows-7, windows-xp

有没有办法确保我的程序即使在“Windows 安全模式”下也能启动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T16:58:07.503

有几种方法可以做到这一点。最简单的方法之一是在 Windows 注册表中添加您的应用程序。

> 转到 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon

在这里，您将找到一个带有默认值数据的字符串值

> 外壳 = explorer.exe

现在你可以通过编辑它的值数据来添加你的应用程序，这样编辑后它看起来像

> 外壳 = explorer.exe,app1,app2

这将使这些应用程序在安全模式下运行。

警告：不要删除 explorer.exe 。这样做会阻止 Windows 资源管理器的自动启动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:41:36.057

安全模式是一种 Windows 模式，其中仅启动非常少的最小核心 Windows 功能。

按照设计，它不会加载或自动启动任何第 3 方应用程序、服务或驱动程序。

目的是拥有一个最小运行版本的 Windows，以防这些 3rd 方应用程序、服务或驱动程序之一出现故障并阻止 Windows 正常工作。

# windows - 存储服务数据的位置

> ID：10702056
> 
> 赞同：0
> 
> 时间：2012-05-22T12:28:42.970
> 
> 标签：windows, service, storage

我正在考虑运行 Windows 服务，我可以让那部分运行良好。问题是我在哪里存储启动数据。诸如服务器路径和用户名之类的东西，我在想注册表，但是它不区分大小写。我目前可以收集到的典型配置文件将不起作用。存储这些数据的最佳位置和位置是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:19:19.623

Windows 服务可以像任何其他 exe 一样拥有 App.config 文件。

# c# - 避免 switch case -linq

> ID：10702057
> 
> 赞同：14
> 
> 时间：2012-05-22T12:28:43.253
> 
> 标签：c#, .net, linq

> **可能重复：**
> [动态 LINQ OrderBy](https://stackoverflow.com/questions/41244/dynamic-linq-orderby)

```
 switch (sort) {
                case "Title":
                    queryResults = queryResults.OrderBy(r => r.Title);
                    break;
                default:
                    queryResults = queryResults.OrderBy(r => r.LastName);
                    break; 
```

有什么办法可以摆脱上面的开关块？

我可以做一些类似的事情：

```
queryResults = queryResults.OrderBy(r => r."sort");
or
queryResults = queryResults.OrderBy(r => r.sort); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T12:33:37.570

如果您想完全动态地执行此操作，可以使用一些反射（简单示例）：

```
string prop = "Title";
var q = queryResults.OrderBy(x => x.GetType().GetProperty(prop).GetValue(x, null)); 
```

不过，无论如何我都不会认为这是最好的解决方案。这对您是否真的有意义取决于您从哪里获得属性名称（如果您也从反射中获得它）以及有多少属性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T12:35:18.540

这应该这样做

```
queryResults = queryResults.OrderBy(r => sort == "Title" ? r.Title : r.LastName) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-22T12:41:00.313

您可以使用[DynamcLinq](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)。我已经一年多没有碰它了，但我得到了预期的结果。您的代码将更改为：

`queryResults = queryResults.OrderBy(sort);`

哦，酷，它也是一个[NuGet 包](https://nuget.org/packages/DynamicLINQ)

# hibernate - 休眠：实体未在persist（）函数中推入数据库

> ID：10702062
> 
> 赞同：0
> 
> 时间：2012-05-22T12:28:57.483
> 
> 标签：hibernate

我是休眠世界的新手，正在准备一个演示样本。我尝试使用 entityManager.persist(entity) 功能。没有错误，但实体没有持久化到数据库中。

这是我的 persistence.xml 文件...

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
  http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

    <persistence-unit name="NCLPEntity">

        <provider>org.hibernate.ejb.HibernatePersistence</provider>

        <!-- 
        <jta-data-source>nclp/oracle</jta-data-source>
         -->

        <class>com.fks.nclp.model.MapRoleModule</class>
        <class>com.fks.nclp.model.MstCityDtl</class>
        <class>com.fks.nclp.model.MstClpMcDtl</class>
        <class>com.fks.nclp.model.MstDiscSlbDtl</class>
        <class>com.fks.nclp.model.MstFormatDtl</class>
        <class>com.fks.nclp.model.MstGeneralDtl</class>
        <class>com.fks.nclp.model.MstMediaType</class>
        <class>com.fks.nclp.model.MstModuleDtl</class>
        <class>com.fks.nclp.model.MstRoleDtl</class>
        <class>com.fks.nclp.model.MstSiteDtl</class>
        <class>com.fks.nclp.model.MstStateDtl</class>
        <class>com.fks.nclp.model.MstUserDtl</class>

        <properties>           
            <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect" />
            <property name="hibernate.connection.driver_class"  value="oracle.jdbc.driver.OracleDriver"/>
            <property name="hibernate.connection.url" value="jdbc:oracle:thin:@10.0.7.62:1521:CLP"/>
            <property name="hibernate.default_schema"  value="clp_orcl_db"/>
            <property name="hibernate.connection.username" value="CLPREM"/>
            <property name="hibernate.connection.password" value="********"/>           
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.format_sql" value="false"/>
            <property name="hibernate.query.factory_class" value="org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory"/>
            <property name="hibernate.cache.provider_class" value="org.hibernate.cache.HashtableCacheProvider"/>
            <property name="hibernate.cache.use_second_level_cache" value="false"/>
            <property name="hibernate.order_inserts" value="true"/>
            <property name="hibernate.order_updates" value="true"/>
            <property name="hibernate.jdbc.batch_size" value = "30" />                     
        </properties>
    </persistence-unit>
</persistence> 
```

这是我正在测试持久功能的存根...

```
package com.fks.nclp.junit;

import java.math.BigDecimal;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;

import com.fks.nclp.model.MstStateDtl;

public class Test_1 {

    public static void main(String a[]){
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("NCLPEntity");
        EntityManager em = emf.createEntityManager();

        MstStateDtl state = new MstStateDtl();
        state.setStateId(1002);
        state.setZoneId(new BigDecimal("1234"));
        state.setDescription("testing");        

        em.persist(state);
        em.close();
        emf.close();
    }
} 
```

这是控制台输出...

```
May 22, 2012 5:43:40 PM org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
May 22, 2012 5:43:40 PM org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.1.1}
May 22, 2012 5:43:40 PM org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
May 22, 2012 5:43:40 PM org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
May 22, 2012 5:43:41 PM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000402: Using Hibernate built-in connection pool (not for production use!)
May 22, 2012 5:43:41 PM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000115: Hibernate connection pool size: 20
May 22, 2012 5:43:41 PM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000006: Autocommit mode: true
May 22, 2012 5:43:41 PM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000401: using driver [oracle.jdbc.driver.OracleDriver] at URL [jdbc:oracle:thin:@10.0.7.62:1521:CLP]
May 22, 2012 5:43:41 PM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000046: Connection properties: {user=CLPREM, password=****, autocommit=true, release_mode=auto}
May 22, 2012 5:43:42 PM org.hibernate.dialect.Dialect <init>
INFO: HHH000400: Using dialect: org.hibernate.dialect.Oracle10gDialect
May 22, 2012 5:43:42 PM org.hibernate.engine.jdbc.internal.LobCreatorBuilder useContextualLobCreation
INFO: HHH000424: Disabling contextual LOB creation as createClob() method threw error : java.lang.reflect.InvocationTargetException
May 22, 2012 5:43:42 PM org.hibernate.engine.transaction.internal.TransactionFactoryInitiator initiateService
INFO: HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
May 22, 2012 5:43:42 PM org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory <init>
INFO: HHH000397: Using ASTQueryTranslatorFactory
May 22, 2012 5:43:42 PM org.hibernate.validator.util.Version <clinit>
INFO: Hibernate Validator 4.1.0.Final
May 22, 2012 5:43:42 PM org.hibernate.validator.engine.resolver.DefaultTraversableResolver detectJPA
INFO: Instantiated an instance of org.hibernate.validator.engine.resolver.JPATraversableResolver.
May 22, 2012 5:43:42 PM org.hibernate.validator.engine.resolver.DefaultTraversableResolver detectJPA
INFO: Instantiated an instance of org.hibernate.validator.engine.resolver.JPATraversableResolver.
May 22, 2012 5:43:43 PM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl stop
INFO: HHH000030: Cleaning up connection pool [jdbc:oracle:thin:@10.0.7.62:1521:CLP] 
```

萨克斯，贡詹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:47:58.810

你永远不会刷新你的 EntityManager。您也没有任何有效的交易。

```
EntityManager em = emf.createEntityManager();
em.getTransaction().begin();

MstStateDtl state = new MstStateDtl();
state.setStateId(1002);
state.setZoneId(new BigDecimal("1234"));
state.setDescription("testing");        
em.persist(state);
em.getTransaction().commit();  // performs an implicit flush

em.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:49:30.260

您必须在开始时开始事务，并在结束时提交事务。

```
public static void main(String args[])
   {
      EntityManager em;
      try
      {
          em = Persistence.createEntityManagerFactory(
            "NCLPEntity").createEntityManager();

         em.getTransaction().begin();

         MstStateDtl state = new MstStateDtl();
         state.setStateId(1002);
         state.setZoneId(new BigDecimal("1234"));
         state.setDescription("testing");
         em.persist(state);

         em.getTransaction().commit();

      }
      finally
      {
         if (em != null)
            em.close();
      }
   } 
```

# ios - UIWebthreadlock 冻结应用程序

> ID：10702063
> 
> 赞同：0
> 
> 时间：2012-05-22T12:29:07.813
> 
> 标签：ios, uiview, uiwebview

我有一个视图，我展示了两个不同的 uiwebviews（从本地 html 加载）。每次用户点击导航栏中的按钮时，我都会使用页面卷曲动画（向上卷曲和向下卷曲）从一个 web 视图切换到另一个。一切似乎都运行良好，但有时当用户点击该按钮时应用程序会冻结。在大多数情况下，当我重复点击按钮直到应用程序冻结时，应用程序会冻结，然后我暂停调试并得到以下信息：

![在此处输入图像描述](../Images/ad620ec091c074820215988125f5fe5d.png)

```
self.navigationItem.titleView.userInteractionEnabled = NO; //Disable button interaction until animation is finished

 if (self.isVisibleFrontView) 
    {
    self.isVisibleFrontView = NO;

    [UIView transitionWithView:self.view
                      duration:0.5
                       options:UIViewAnimationOptionTransitionCurlUp | UIViewAnimationOptionCurveEaseInOut
                    animations:^{
                        [[[self.view subviews] objectAtIndex:0] removeFromSuperview];
                        [self.view addSubview:self.patientViewReverse];

                    }
                    completion:^(BOOL finished){
                        self.navigationItem.titleView.userInteractionEnabled = YES;
                    }];
}
else 
{

    self.isVisibleFrontView = YES;

    [UIView transitionWithView:self.view
                      duration:0.5
                       options:UIViewAnimationOptionTransitionCurlDown | UIViewAnimationOptionCurveEaseInOut
                    animations:^{
                        [[[self.view subviews] objectAtIndex:0] removeFromSuperview];
                        [self.view addSubview:self.patientView];

                    }
                    completion:^(BOOL finished){
                            self.navigationItem.titleView.userInteractionEnabled = YES;

                    }];

}
[self showNavigationBarButtons]; //change button image
} 
```

我认为当 removeFromSuperview 时 webView 正在获取锁定，但在某些情况下从未释放它，导致主线程冻结。你怎么看？在不冻结应用程序的情况下实现这一目标的最佳方法是什么？

提前谢谢各位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:02:20.873

最后我修好了。

现在我所做的只是 setHidden:YES 我不想显示的 webview 和 setHidden:NO 动画块中的另一个 webview，而不是每次都将 webview 删除并添加为子视图。这样效率更高，并且 webview 不使用 webthreadlock。

# php - 我网站上的 Instagram 提要基于 RSS 页面的哈希标签

> ID：10702064
> 
> 赞同：0
> 
> 时间：2012-05-22T12:29:13.193
> 
> 标签：php, jquery, instagram

我正在尝试为朋友开发 Instagram 提要。他想展示每张带有“个人”标签的图片的提要。我找到了一个网页，其中显示了所有带有该标签的图片 - 甚至为此制作了一个 rss。

如何从 RSS 中获取图像并在普通提要中显示它们？例如，最近的 5 张照片。

显示的所有图片 [http://web.stagram.com/tag/individen/?vm=grid](http://web.stagram.com/tag/individen/?vm=grid)

RSS [http://web.stagram.com/rss/tag/individen/](http://web.stagram.com/rss/tag/individen/)

什么方法最适合获取饲料？php、JQuery 还是 json？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:40:05.873

全部（PHP、JQuery、JSON）

使用 jquery 对 php 页面进行 ajax 调用。使用 feedparser 解析 rss 提要并得到你想要的。返回包含您要显示的图像 url 和数据的 json。

# android - OpenGL ES 着色器降低了太多性能

> ID：10702065
> 
> 赞同：1
> 
> 时间：2012-05-22T12:29:23.643
> 
> 标签：android, iphone, performance, opengl-es, glsl

我正在优化一款适用于 iPhone 和 Android 的游戏。我正在使用 4 个着色器来绘制场景，我注意到如果我将其中一个更改为另一个，则 fps 从 32 变为 42，即使该着色器仅绘制了 1 个精灵，而这 2 个着色器的唯一区别只是片段着色器中的一个产品。

这些是着色器：

default-2d-tex.shader

```
#ifdef GL_ES
precision highp float;
precision lowp int;
#endif

#ifdef VERTEX

uniform mat4        umvp;

attribute vec4      avertex;
attribute vec2      auv;

varying vec2        vuv;

void main()
{
    // Pass the texture coordinate attribute to a varying.
    vuv = auv;

    // Here we set the final position to this vertex.
    gl_Position = umvp * avertex;
}

#endif

#ifdef FRAGMENT

uniform sampler2D   map0;
uniform vec4 ucolor;

varying vec2        vuv;

void main()
{
    gl_FragColor =  texture2D(map0, vuv) * ucolor;
}

#endif 
```

default-2d-tex-white.shader

```
#ifdef GL_ES
precision highp float;
precision lowp int;
#endif

#ifdef VERTEX

uniform mat4        umvp;

attribute vec4      avertex;
attribute vec2      auv;

varying vec2        vuv;

void main()
{
    // Pass the texture coordinate attribute to a varying.
    vuv = auv;

    // Here we set the final position to this vertex.
    gl_Position = umvp * avertex;
}

#endif

#ifdef FRAGMENT

uniform sampler2D   map0;

varying vec2        vuv;

void main()
{
    gl_FragColor =  texture2D(map0, vuv);
}

#endif 
```

同样，
如果我修改 default-2d-tex.shader 并删除产品“* ucolor”，则 fps 从 32 变为 42，并且我仅将它用于场景中的一个精灵！

这是正常的吗？为什么这个着色器这么慢，我该如何改进它？

**编辑：**

我看到 iPod 和 Android 上的这种性能下降的比例相同。两者都是 PowerVr SGX GPU（iPod 第三代和三星 Galaxy SL -PowerVR SGX 530-）。iOS 版本是 4.1，Android 是 2.3.3

我正在绘制的精灵被缩放以填充屏幕（缩放到 4 倍），并且我每帧绘制一次。它取自纹理贴图，因此纹理实际上更大（1024x1024），但所取的部分为 80x120。启用 Alpha 混合。

**编辑 2**

我犯了一个错误。精灵缩放 11 倍：它的 32x48。如果我根本不画那个精灵，fps 会变成 45。我在场景中画了很多精灵，为什么要花这么多时间？难道是因为它的规模太大了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T16:04:07.300

当您从上述代码中删除“* ucolor”时，会发生很多事情：

1.  统一*的 ucolor*变为未使用
2.  GLSL 编译器从活动制服集中移除这个制服
3.  当您链接程序时，丢失制服的 ID 变为 -1
4.  当您对已移除的制服执行 glUniform4fv( -1, value ) 时，它会立即退出，无需任何更新

与使用“* ucolor”相比，这要少得多。

此外，在片段着色器中，每个片段的操作更少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T09:50:05.560

您的问题出在 default-2d-tex.shader 中的片段着色器中。你有统一的 vec4 ucolor；这意味着，您的每个颜色组件 (RGBA) 都将转换为 32 位浮点值。这会严重降低性能。应该是：统一的lowp vec4 ucolor；

# javascript - LinkedIn Access_token 请求使用 jsoauth 库出错

> ID：10702067
> 
> 赞同：1
> 
> 时间：2012-05-22T12:29:32.877
> 
> 标签：javascript, xcode, cordova, linkedin

嗨，我正在尝试将 LinkedIn 与我的移动应用程序集成，该应用程序正在使用 Xcode 的 phonegap 开发。现在我已经使用来自github的javascript库获得了授权（https://github.com/bytespider/jsOAuth/blob/daa8823a02fa570b285ac26f66ff6c5d8be9d4ec/src/OAuth/Consumer.js）jsoauth，但我不知道如何为“https： //api.linkedin.com/uas/oauth/accessToken"任何人请举个例子。现在我得到了oauth_token，verifier，oath_token_secret。我该如何使用它？我得到问题发送喜欢

代码是：

变量选项={

```
 consumerKey:'XXXXXXXXXX',

    consumerSecret:'XXXXXXXX',

    verifier: verifier,    

    signatureMethod:'HMAC-SHA1'

   };

    oauth = OAuth(options);

    oauth.post('https://api.linkedin.com/uas/oauth/accessToken', null,

               function(data) {alert('acess');   

               window.plugins.childBrowser.close(); 

               },
              function(data) {
              alert('no access');
              console.log(data.error);

               }

              ); 
```

这里调用的错误函数和 Xcode 错误显示如下：

*** WebKit 丢弃了 webView 中未捕获的异常：decidePolicyForNavigationAction:request:frame:decisionListener: delegate: *** -[JKArray objectAtIndex:]: index (1) beyond bounds (1)

任何人帮助我如何获得LinkeIn的AccessToken。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T21:44:11.827

我认为您不能将验证程序设置为选项。

尝试使用该功能

```
oauth.setVerifier('verifier') 
```

&

```
oauth.setAccessToken('MY-ACCESS-KEY', 'MY-ACCESS-SECRET'); 
```

[http://bytespider.github.io/jsOAuth/api-reference/](http://bytespider.github.io/jsOAuth/api-reference/)

之后，jsOAuth 将为您设置标头。

我也只是在使用这个库获取访问令牌时遇到了问题，结果发现它不必要地包含了回调参数，这使得请求失败。

# jquery - 有自定义版本的 jQuery 吗？

> ID：10702077
> 
> 赞同：0
> 
> 时间：2012-05-22T12:30:24.503
> 
> 标签：jquery, ajax, json, cordova

我即将在 Phonegap 应用程序中使用 jQuery，我的问题是 - 是否有 jQuery 的自定义变体？...例如，当您下载 jQuery UI 时 - 您选择要包含在您正在下载的包中的整个 UI 的“部分”。那么，在 jQuery 本身中有这样的东西吗？

（因为现在我要使用 Ajax、JSON 解析和选择器，也许还有 Bind、Live 等事件。对于动画我使用 CSS 3，所以我不需要动画中的东西jQuery，我认为如果我去掉不必要的东西——整个 JS 会比我使用整个 jQuery 轻得多。）

问候，彼得

PS：还有——现在我使用 JSON2 来解析 JSON，iScroll 用于滚动功能，而我将要使用 jQuery 的唯一重要的事情是 Ajax 的统一......所以如果你有更好的建议 -我会很高兴听到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:31:59.347

可能这就是你要找的

[http://www.servicestack.net/jqbuilder/](http://www.servicestack.net/jqbuilder/)

这让您可以从 jQuery 中选择您真正需要的内容，并从所需的列表中构建一个自定义库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:59:46.420

不幸的是，zepto 和自定义的 jQuery 变体都没有解析 JSON 功能。（jQuery 中的 $.parseJSON() ）这意味着我仍然必须使用 JSON2 库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T00:12:04.283

为什么要担心大小（jquery-1.7.2.min.js 只有 93KB）？

您的问题没有提到应用程序的设计（例如，您是简单地使用 PhoneGap 启动外部网站还是完全独立？）。

jQuery 文件将与应用程序一起作为应用程序的资源发布，直到您离开“应用程序”以获取外部链接（在应用程序的 web 视图控件中打开的链接而不是本机浏览器（例如 IE、Safari ， ETC。））。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T18:39:38.033

如果您担心大小，请使用[zepto](http://zeptojs.com)。它被设计成几乎与 jquery-api 兼容（除了它当前不返回 ajax 函数上的 jqXHR，所以如果你正在做现代 jQuery ajax，你将不得不重写一些。它是 8K 压缩 gzipped（与 32K 相比） jQuery) 并且只有 44K 未压缩（与 jQuery 的 232K 相比）。它利用了现代 webkit 浏览器功能，并且没有 IE 所需的膨胀和 jQuery 的旧浏览器支持。

# java - 是否有一个与 JVM 兼容的极其简单的图表库？

> ID：10702078
> 
> 赞同：0
> 
> 时间：2012-05-22T12:30:26.543
> 
> 标签：java, groovy, charts

我一直在 Python 中使用 matplotlib 进行一些快速原型设计和数据分析。但是，我也有一些数据只能通过 Java API 真正获得。我在想，如果我可以使用 Groovy +（一些图表库），我可以拥有一个与 Python + matplotlib 一样好的与 JVM 兼容的工具包。

JFreeChart 当然很棒，但是在脚本中使用它有点复杂。

是否有一个兼容 JVM 的图表库，它具有 matplotlib 的强大功能和简单性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:43:31.373

JFreeChart 可以变得相当复杂，但它也可以相当简单地使用。如果您想创建特定类型的图表，为什么不将设置 JFreeChart 的“复杂”部分包装在您自己的 java 类中，从而有效地为自己创建一个简单的 api？

# orchardcms - Contrib.Taxonomies - 它们是累积的吗？

> ID：10702080
> 
> 赞同：0
> 
> 时间：2012-05-22T12:30:34.650
> 
> 标签：orchardcms

我的意思是说;

与叶子相关联的内容是否也与叶子终止的分支节点相关联？

例如

![在此处输入图像描述](../Images/ed65262f727ab7d9f0e9451d94370063.png)

将一个项目与“c”相关联，它出现在“a”、“b”和“c”中。我希望该项目只与“c”而不是“a”和“b”相关联。

我错过了什么还是正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:25:26.800

好吧，如果你不想让 c 暗示 a 和 b，那么 c 应该是 a 和 b 的兄弟，而不是孩子。

# c# - 谷歌邮件类

> ID：10702082
> 
> 赞同：3
> 
> 时间：2012-05-22T12:30:52.577
> 
> 标签：c#

我有一个谷歌邮件程序，如下所示，我怎样才能将它用于其他邮件系统？有没有更好的方法来做到这一点？另外我如何更改邮件来自（发件人）的名称。非常感谢所有帮助，并提前感谢您

```
 MailMessage message = new MailMessage();
        message.From = new MailAddress(MailAddresds);
        message.Subject = messagesubject;
        message.Body = messagebody;

        message.To.Add(messageto);
        SmtpClient client = new SmtpClient();

        client.Credentials = new NetworkCredential(userName, password);
        client.Host = "smtp.gmail.com";
        client.Port = 587;
        client.EnableSsl = true;
        client.Send(message); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:42:13.277

举个例子：

```
public class MailMessage
{
   public string From{get;set;}
   public string To{get;set;}
   public string Body{get;set;}
   public string Subject{get;set;}
   ....
   //other common properties you may need
}

//interface 
public interface IMailService
{
    Send(MailMessage m);
} 
```

具体实现：

```
public class GoogleMail : IMailService
{
    public Send(Message msg)
    { 
       //google mail specific code
    }
}

public class YahooMail : IMailService
{
    public Send(Message msg)
    { 
       //yahoo mail specific code
    }
}

.... Hotmail,... 
```

在代码中的某处创建支持的邮件服务的集合

```
var mailservices = new List<IMailService>();
mailservices.Add(new GoogleMail ());
mailservice.Add(new YahooMail ()); 
```

之后，在程序运行期间，选择适当的服务来处理用户请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:13:15.383

简单的例子：

```
using System.Web.Mail;

MailMessage objMessage = new MailMessage();
objMessage.From = "from";
objMessage.To = "to";
objMessage.Subject = "subject";
objMessage.BodyFormat = MailFormat.Text;
objMessage.Body = "body";
SmtpMail.SmtpServer = "SmtpServer";
SmtpMail.Send(objMessage); 
```

# c++ - 类对象的 C++ 向量到文件\返回到程序

> ID：10702085
> 
> 赞同：1
> 
> 时间：2012-05-22T12:31:10.167
> 
> 标签：c++, xml-serialization

我期待在每次重新启动程序时使我的数据可用。我很好奇哪种方式是存储到文件而不是读回程序的最佳方式。我一直在网上阅读一些东西，最大的问题是 XML 还是二进制格式？我还在学习 c++ 我不掌握它。该程序的对象是类型`string` `int` `int`......你建议我使用哪种方式，为什么？

还有一件事，有人知道这方面的好教程吗`to binary`？`to XML`

很抱歉缺少代码部分，但我想知道比我更高级的程序员的一些意见。:P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:36:40.473

我不同意。有很多可用的选项。我在这里为您命名了另外两个：1）您可能会查看一种名为[json](http://www.json.org/)的文件格式，它有一个自己的网站（我们中的一些人不这样做）。它声称是一种轻量级的数据交换格式。2) 有一种名为 csv 的文件格式。它的用法已经在stackoverflow上讨论过[了](https://stackoverflow.com/questions/415515/how-can-i-read-and-manipulate-csv-file-data-in-c)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T12:43:45.450

除了马泰斯评论：

我认为最明显的格式在您的情况下是正确的，那只是纯文本。

只需以纯文本（通常由空格分隔）序列化您的数据。PT 的好处是它是人类可读的、人类可修改的、易于使用流（>> 标记化或增强标记化器）进行处理、灵活且比 XML 轻得多。

例如，您可能想要存储

```
struct {
    std::string name;
    int age;
    double height;
}; 
```

你会写：

```
John 21 5.4
Bill 31 4.9 
```

或者你有什么。这总是很方便的，例如 name 可以包含两个单词，所以：

```
John Smith 
```

并且标记器会在空格上拆分并尝试将 smith 解析为 int ，但使用分隔符解决这个问题很容易。如 ””

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T12:45:33.423

即使您的进程被过早地终止（例如由于断电、硬件故障或代码本身的严重错误），您是否需要稳健的行为？

如果是这样，请考虑使用“嵌入式”数据库，例如 SQLite 或 MS SQL Server Compact（等）。这些系统的事务性质应确保您最终不会收到损坏的数据，这会阻止您的程序正确启动。

此外，某些文件系统支持事务（例如 Windows Vista 或更高版本中的事务性 NTFS）。

# php - 如何让这个模态窗口正常工作？

> ID：10702094
> 
> 赞同：1
> 
> 时间：2012-05-22T12:31:36.983
> 
> 标签：php, javascript, html, css, simplemodal

[我对eric martin 的](http://www.ericmmartin.com/projects/simplemodal/)模态窗口有 3 个小问题，我似乎无法弄清楚。希望任何使用过此模式的人都可以帮助我。我创建了一个您可以访问的基本应用程序，因此您可以看到我目前拥有的模式窗口发生了什么，它位于[此处](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable2.php)。

以下是我目前拥有的模态窗口的完整代码：

Javascript：

```
 function plusbutton()
    {

    $(".previouslink").modal(); 

    return false;
} 
```

html:

```
<table id="plus" align="center">
<tr>
<th>
<a href="previousquestions.php" class="previouslink" onclick="return plusbutton();">
<image src="Images/plussign.jpg" width="30" height="30" alt="Look Up Previous Question" class="plusimage"/>
</a>
<span id="plussignmsg">(Click Plus Sign to look <br/> up Previous Questions)</span>
</th>
</tr>
</table> 
```

问题1：当您在应用程序中单击加号时，它在模态窗口中显示我不想要的加号，为什么在模态窗口中显示加号，我该如何删除？

问题 2：在模态窗口的右上角，它应该显示一个关闭按钮（一个 x 的图像），但它没有显示关闭按钮。现在在 css 目录中关闭按钮是这样的：

```
background:url(/images/x.png); 
```

现在这是目录，因为要从 css 页面转到图像，您需要进入“images”文件夹，然后是“x.png”图像。

问题 3：如果您查看我的 html，您会看到在我的超链接中我确实想要链接 perviousquestions.php 页面。所以我想要的是，当用户单击加号按钮时，会出现模式窗口，显示来自“previousquestions.php”页面的信息。如何做到这一点？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:36:27.990

你想在模态窗口中的信息，你需要放在一个单独的位置。你在做什么

```
$(".previouslink").modal(); 
```

您是否希望父元素 .previouslink 中的所有内容成为模态窗口的内容。

尝试将内容移动到另一个 span 或 div 中，以便在弹出模式时，您拥有所需的内容。

对于 background:url，尝试在 / 之前和 .png 之后使用 '。

像`background:url('/images/x.png');`

# linux - 使用 msgrcv 读取动态长度内容

> ID：10702096
> 
> 赞同：0
> 
> 时间：2012-05-22T12:31:40.213
> 
> 标签：linux, ipc, message-queue, msgrcv

我使用 msgrcv 函数从消息队列中读取消息。当我读取已知长度的数据时，它工作正常。在某些情况下，我的消息长度是可变的。在这种情况下，我如何只分配所需的内存量并从消息队列中读取消息而不会丢失消息队列中的任何数据。请给出解决这个问题的想法。

注意：在 IBM 消息队列中，当我们读取超出长度的数据时，它会将消息的实际大小填充到我们传递给 mqget 函数的结构中。像这样，有没有办法在消息队列中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:51:04.673

根据我对手册页的简要阅读[`msgrcv()`](http://linux.die.net/man/2/msgrcv)，如果您的缓冲区太小并且您没有指定`MSG_NOERROR`标志，`msgrcv()`将返回 -1（将 errno 设置为`E2BIG`）并将消息留在队列中。

在这种情况下，您可以将缓冲区大小加倍（最大为`MSGMAX`，在 linux 上默认为 8192），然后重试。

# math - 计算垂直于 3D 中第三个向量的两个向量

> ID：10702099
> 
> 赞同：8
> 
> 时间：2012-05-22T12:31:44.393
> 
> 标签：math, vector, 3d

计算垂直于第三个向量（X）并且彼此垂直的两个向量的**最佳（最快）方法是什么？**

这就是我现在计算这些向量的方式：

```
// HELPER - unit vector that is NOT parallel to X
x_axis = normalize(X);
y_axis = crossProduct(x_axis, HELPER);
z_axis = crossProduct(x_axis, y_axis); 
```

我知道有无数种解决方案，我不在乎哪一个是我的解决方案。

这个问题的背后是什么：我需要构造变换矩阵，我知道 X 轴（矩阵中的第一列）应该指向哪个方向。我需要计算 Y 轴和 Z 轴（第二列和第三列）。众所周知，所有轴必须相互垂直。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T14:04:14.923

我做了什么，前提是`X<>0`或者`Y<>0`是

1.  `A = [-Y, X, 0]`
2.  `B = [-X*Z, -Y*Z, X*X+Y*Y]`

然后对向量进行归一化。

```
[ X,Y,Z]·[-Y,X,0] = -X*Y+Y*X = 0
[ X,Y,Z]·[-X*Z,-Y*Z,X*X+Y*Y] = -X*X*Z-Y*Y*Z+Z*(X*X+Y*Y) = 0
[-Y,X,0]·[-X*Z,-Y*Z,X*X+Y*Y] = Y*X*Z+X*Y*Z = 0 
```

这称为向量的*零空间。*

如果`X=0`，`Y=0`那么`A=[1,0,0]`，`B=[0,1,0]`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T12:36:51.690

这是做到这一点的方法。
这也可能是*唯一*的方法。任何其他方式在数学上都是等效的。
通过打开 crossProduct 计算并确保您不会多次执行相同的乘法运算，可以节省几个周期，但这对于微优化领域来说真的很遥远。

您应该注意的一件事当然是 HELPER 向量。它不仅必须与 X 不平行，而且它与 X 非常不平行也是一个好主意。如果 X 和 HELPER 甚至有点平行，那么您的浮点计算将不稳定且不准确. 你可以测试看看如果 X 和 HELPER 的点积是 0.9999 会发生什么。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T13:15:25.600

有一种方法可以找到一个好的 HELPER（真的 - 它已准备好成为您的 y_axis）。

让我们 X = (ax, ay, az)。选择 2 个量级较大的元素，交换它们，并取反其中一个。将第三个元素设置为零（幅度最小）。这个向量垂直于 X。

例子：

if (ax <= ay) and (ax <= az) then HELPER = (0, -az, ay) (或 (0, az, -ay))

X*HELPER = 0*0 - ay*az + az*ay = 0

如果 (ay <= ax) 和 (ay <= az) 那么 HELPER = (az, 0, -ay)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T18:17:23.740

对于一个好的 HELPER 向量：找到*绝对值最小*的 X 坐标，并使用该坐标轴：

```
absX = abs(X.x); absY = abs(X.y); absZ = abs(X.z);
if(absX < absY) {
  if(absZ < absX)
    HELPER = vector(0,0,1);
  else // absX <= absZ
    HELPER = vector(1,0,0);
} else { // absY <= absX
  if(absZ < absY)
    HELPER = vector(0,0,1);
  else // absY <= absZ
    HELPER = vector(0,1,0);
} 
```

* * *

注意：这实际上与@MBo 的答案非常相似：取坐标轴最小的叉积相当于将最小坐标设置为零，交换较大的两个，然后取反。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T03:00:38.210

我认为单位向量中所有元素的最小最大幅度总是大于 0.577，所以你可以摆脱这个：

-> 通过查找幅度大于 0.5 的任何元素，将找到与 3D 向量的垂直向量到 2D 向量的问题减少，然后忽略不同的元素（在其位置使用 0）并将垂直线应用于 2D 向量其余元素中的公式（对于 2D x-axis=(ax,ay) -> y-axis=(-ay,ax)）

```
let x-axis be represented by (ax,ay,az)

if (abs(ay) > 0.5) {
  y-axis = normalize((-ay,ax,0))
} else if (abs(az) > 0.5) {
  y-axis = normalize((0,-az,ay))
} else if (abs(ax) > 0.5) {
  y-axis = normalize((az,0,-ax))
} else {
  error("Impossible unit vector")
} 
```

# c# - WinForms表格控件可以包含其他UI控件吗？

> ID：10702101
> 
> 赞同：1
> 
> 时间：2012-05-22T12:31:58.760
> 
> 标签：c#, vb.net, winforms

我目前正在用 C# 开发一个 WinForms 应用程序，并且需要一个可以包含其他 UI 控件的表格控件。

在以下示例中，我希望 Links 列包含链接标签控件：

```
| ID | Name |        Links        |
-----------------------------------
| 1  |  n1  | link1, link2, link3 |
| 2  |  n2  | link1               | 
```

有没有我可以“开箱即用”使用的，有没有好的第三方？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:37:51.703

没有支持开箱即用绑定的控件，但是您可以使用 实现类似的结果[`TableLayoutPanel`](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.aspx)，这是一个容器控件。

它具有行和列的基本概念（以及行跨度和列跨度），但是它没有从“网格”控件中获得的行标题、列排序等概念——它只是一个布局司机。

可以包含包含自定义控件的`DataGridView`列，但是要使其正常工作涉及很多问题-因此不符合“开箱即用”的条件。

[这是将 a`DateTimePicker`放入`DataGridView`列中的示例。](http://msdn.microsoft.com/en-us/library/7tas5c80.aspx)

与 WinForms 不同，WPF 具有在其他控件中组合控件的能力。事实上，这是一流的概念。使用结构 XAML 文件来描述 UI 自然适合这种组合模型。

这些天我总是争论选择 WPF 而不是 WinForms - 除非学习曲线太多并且大部分经验都是使用 WinForms。

# c++ - 如何获取 windows xp gui 默认代码页？

> ID：10702103
> 
> 赞同：1
> 
> 时间：2012-05-22T12:32:00.237
> 
> 标签：c++, character-encoding, windows-xp

问题是控制台和 gui 应用程序的 XP 代码页的非英语版本不同，例如，如果我在波兰语版本中在控制台中写入：

```
echo zażółć gęślą jaźń > somefile.txt 
```

该文件的内容是：

```
zaľ˘† g©lĄ ja«ä 
```

如果我将其放入 cmd 文件中，则不会发生这种情况。那就是带有波兰字母的文本。但是，如果我创建一个使用非英语字符命名的文件或目录，那么无论它是从 cmd 还是从 finger 运行，效果总是乱码。

所以我的问题是如何获得其余 Windows 正在运行的第二个代码页。在我的情况下，这个 CP 是 1250 - 但是如何从 c++ 获得这个数字？

`GetConsoleCP()`并且`GetConsoleOutputCP()`都返回 852（这是正确的）并`GetThreadLocale()`给出 1045。

如果我尝试`chcp 1045`它会给出“错误的代码页”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:58:23.490

`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Nls\CodePage\ACP`- 此注册表项存储 ANSI 代码页号（在您的情况下应该是 1250）并`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Nls\CodePage\OEMCP`存储 OEM 代码页。

哦，还有[GetACP](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318070%28v=vs.85%29.aspx "获取ACP")和[GetOEMCP](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318114%28v=vs.85%29.aspx)函数。

# image-processing - 从图像中检测 LED 对象状态

> ID：10702105
> 
> 赞同：4
> 
> 时间：2012-05-22T12:32:10.243
> 
> 标签：image-processing, opencv, computer-vision

我的问题类似于[OpenCV：检测视频源中的](https://stackoverflow.com/questions/1365234/opencv-detect-blinking-lights-in-a-video-feed) [闪烁灯 openCV 检测闪烁灯](https://stackoverflow.com/questions/8877228/opencv-detect-blinking-lights)

我想从任何具有 LED 对象的图像中检测 LED 开/关状态。LED 对象可以是任意大小（但主要是圆形）。获取该图像中所有 LED 的位置非常重要，尽管它可以打开或关闭。首先，我想获得仅打开的 LED 的状态和位置。现在图像源对于我的工作来说是静态的，但它必须来自任何具有发光 LED 的产品的视频。所以没有机会让模板图像减去背景。

我曾尝试将 OpenCV（OpenCV 的新手）与阈值、轮廓和圆形方法一起使用，但未发现成功。如果有任何源代码或解决方案，请分享。解决方案可以是任何东西，不仅可以使用 OpenCV，它会给我带来结果。这将不胜感激。

与其他两个问题的不同之处在于，我想获取图像中 LED 的数量，无论它可以打开还是关闭，以及所有 LED 的状态。我知道这很复杂。首先，我试图检测图像中发光的 LED。我已经实现了我在下面分享的代码。我有不同的实现，但下面的代码能够通过绘制轮廓向我展示发光的 LED，但轮廓的数量比发光的 LED 多。所以我无法得到至少发光的 LED 总数。请建议我您的意见。

```
int main(int argc, char* argv[])
{

IplImage* newImg = NULL;
IplImage* grayImg = NULL;
IplImage* contourImg = NULL;
float minAreaOfInterest = 180.0;
float maxAreaOfInterest = 220.0;
//parameters for the contour detection
CvMemStorage * storage = cvCreateMemStorage(0);
CvSeq * contours = 0;
int mode = CV_RETR_EXTERNAL;
mode = CV_RETR_CCOMP; //detect both outside and inside contour
cvNamedWindow("src", 1);
cvNamedWindow("Threshhold",1);
//load original image
newImg = cvLoadImage(argv[1], 1);

IplImage* imgHSV = cvCreateImage(cvGetSize(newImg), 8, 3);
cvCvtColor(newImg, imgHSV, CV_BGR2HSV);

cvNamedWindow("HSV",1);
cvShowImage( "HSV", imgHSV );
IplImage* imgThreshed = cvCreateImage(cvGetSize(newImg), 8, 1);

cvInRangeS(newImg, cvScalar(20, 100, 100), cvScalar(30, 255, 255), imgThreshed);
cvShowImage( "src", newImg );

cvShowImage( "Threshhold", imgThreshed );

//make a copy of the original image to draw the detected contour
contourImg = cvCreateImage(cvGetSize(newImg), IPL_DEPTH_8U, 3);
contourImg=cvCloneImage( newImg );
cvNamedWindow("Contour",1);
//find the contour
cvFindContours(imgThreshed, storage, &contours, sizeof(CvContour), mode, CV_CHAIN_APPROX_SIMPLE, cvPoint(0,0));
int i = 0;
for (; contours != 0; contours = contours->h_next)
{
    i++;
    //ext_color = CV_RGB( rand()&255, rand()&255, rand()&255 ); //randomly coloring different contours      
    cvDrawContours(contourImg, contours, CV_RGB(0, 255, 0), CV_RGB(255, 0, 0), 2, 2, 8, cvPoint(0,0));
}
printf("Total Contours:%d\n", i);
cvShowImage( "Contour", contourImg );

cvWaitKey(0);
cvDestroyWindow( "src" ); cvDestroyWindow( "Threshhold" );
cvDestroyWindow( "HSV" );
cvDestroyWindow( "Contour" );
cvReleaseImage( &newImg ); cvReleaseImage( &imgThreshed ); 
cvReleaseImage( &imgHSV );
cvReleaseImage( &contourImg );

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T07:34:03.387

昨天晚上我有一些时间，这是一个（非常）简单和部分的解决方案，对我来说很好。我创建了一个可以直接克隆的 git 存储库：

git://github.com/jlengrand/image_processing.git

并使用 Python 运行

```
$ cd image_processing/LedDetector/
$ python leddetector/led_highlighter.py 
```

[你可以在这里](https://github.com/jlengrand/image_processing/tree/master/LedDetector)看到代码

我的方法：

*   转换为单通道图像
*   搜索最亮的像素，假设我们至少有一个 LED 亮着且背景为暗色，就像您的图像一样
*   创建具有图像最亮部分的二值图像
*   从图像中提取斑点，检索它们的中心和 LED 的数量。

该代码此时仅考虑了一个图像，但您可以通过循环来增强它以获取一批图像（我已经在我的存储库中提供了一些示例图像。）您只需要在找到的中心附近玩一下对于 LED，因为它们从一个图像到另一个图像可能不是一个像素准确的（中心可能会稍微移动）。

为了**使算法更健壮**（知道是否有 LED 亮起，找到一个自动且非硬编码的边距值），您可以使用**直方图**（放置在*extract_bright*中）进行一些操作。我已经为此创建了该功能，您只需要对其进行一些增强即可。

有关输入数据的更多信息：Opencv**目前只接受 avi 文件**，因此您必须将 mp4 文件转换为 avi（在我的情况下未压缩）。我用[了这个](http://download.cnet.com/Pazera-Free-MP4-to-AVI-Converter/3000-2194_4-10784027.html)，效果很好。由于某种原因，[queryframe](http://opencv.willowgarage.com/documentation/python/reading_and_writing_images_and_video.html#queryframe)函数导致我的计算机出现内存泄漏。这就是我创建*grab_images*函数的原因，该函数将avi 文件作为输入并创建一批您可以更轻松使用的jpg 图像。

这是图像的结果：

输入图像：

![输入示例](../Images/d5efb7e198434340a31181dc8198414a.png)

二进制图像：

![二进制结果（图像最亮的部分）](../Images/430547357773f3c260e6b9ad9ef53d5d.png)

最后结果 ：

![最终结果（围绕 LED 的边界框）](../Images/06cc6f89e465e7ca891c19edfadfb206.png)

希望这可以帮助。. .

**编辑 ：**

[如果您想使用此图像](http://www.google.co.in/imgres?imgurl=http://www.vpr.net/uploads/photos/original/router_340x255.jpg&imgrefurl=http://www.vpr.net/news_detail/90049/&usg=__R3XQOcxJLXcywmaBSFEI2_v34C0=&h=253&w=340&sz=28&hl=en&start=87&sig2=eTgqrGXg_E5MztETrQM9OA&zoom=1&tbnid=r2FryHBDKx6e9M:&tbnh=89&tbnw=119&ei=l268T9aKC8uf6QHQ9-RI&um=1&itbs=1)，您的问题会稍微复杂一些。我发布的方法仍然可以使用，但需要稍微复杂一些。

您想检测显示“信息”（状态、带宽……）的 LED 并丢弃设计部分。

我看到了三个简单的解决方案：

*   您对 LED 的位置有一定的了解。在这种情况下，您可以应用相同的方法，但在整个图像的精确部分（使用 cv.SetImageROI）。
*   您对 LED 的颜色有一个预先了解（您可以在图像上看到有两种不同的颜色）。然后您可以搜索整个图像，然后应用颜色过滤器来限制您的选择。
*   你没有以前的知识。在这种情况下，事情变得有点复杂。我倾向于说没用的 LED 应该都具有相同的颜色，并且状态 LED 通常会闪烁。这意味着通过在该方法中添加一个学习步骤，您可能能够看到实际上必须选择哪些 LED 是有用的。

希望这会带来更多的思考

# android - Galaxy S2 无法正确返回信号

> ID：10702114
> 
> 赞同：1
> 
> 时间：2012-05-22T12:32:46.527
> 
> 标签：android

早上好！

我使用此代码获取电信网络的信号：

```
int signalof = signalStrength.getGsmSignalStrength(); 
```

文档说当无法“读取”信号时返回 99。

但是，其他设备会正确返回该值。

**只有 Galaxy S2 不起作用。版本 2.3.3 和 2.3.5（Android 出厂版本）**

有没有人解决过这个问题？

很感谢！

# automator - Apple 的 Automator：jpg 的压缩设置？

> ID：10702121
> 
> 赞同：11
> 
> 时间：2012-05-22T12:33:12.033
> 
> 标签：automator

当我运行 Apple 的 Automator 以简单地将一堆图像剪切成它们的大小时，Automator 也会降低文件的质量（jpg）并且它们变得模糊。

我怎样才能防止这种情况？是否有我可以控制的设置？

**编辑：**

或者有没有其他工具可以做同样的工作但不影响图像质量？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T19:29:20.357

如果您想更好地控制 JPEG 压缩量，正如 kopischke 所说，您必须使用该`sips`实用程序，它可以在 shell 脚本中使用。以下是在 Automator 中执行此操作的方法：

首先获取文件和压缩设置：

![将文件和压缩设置传递给 Automator 中的 shell 脚本](../Images/1975384a86e0605cfbc0679b4c0cccd6.png)

**Ask for Text**操作不应接受任何输入（右键单击它，选择“Ignore Input”）。

确保第一个**Get Value of Variable**操作不接受任何输入（右键单击它们，选择“Ignore Input”），并且第二个**Get Value of Variable**从第一个获取输入。这将创建一个数组，然后将其传递给 shell 脚本。数组中的第一项是指定给 Automator 脚本的压缩级别。第二个是脚本将对其执行`sips`命令的文件列表。

**在Run Shell Script**操作顶部的选项中，选择“/bin/bash”作为 Shell，并选择“作为参数”作为 Pass Input。然后粘贴这段代码：

```
itemNumber=0
compressionLevel=0

for file in "$@"
do
    if [ "$itemNumber" = "0" ]; then
        compressionLevel=$file
    else
        echo "Processing $file"
        filename="$file"
        sips -s format jpeg -s formatOptions $compressionLevel "$file" --out "${filename%.*}.jpg"
    fi
    ((itemNumber=itemNumber+1))
done
((itemNumber=itemNumber-1))
osascript -e "tell app \"Automator\" to display dialog \"${itemNumber} Files Converted\" buttons {\"OK\"}" 
```

如果您单击底部的**结果，它会告诉您当前正在处理的文件。**享受压缩的乐趣！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-22T14:16:56.657

Automator 的“裁剪图像”和“缩放图像”操作没有质量设置——就像 Automator 一样，简单性胜过可配置性。但是，还有另一种无需借助 Cocoa 编程即可访问*CoreImage的图像处理工具的方法：* *Scriptable Image Processing System*，它使图像处理功能可用于

1.  **通过[实用程序](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/sips.1.html)[的`sips`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/sips.1.html)**外壳**。您可以使用它来调整最细微的设置，但由于处理起来有点神秘，您可能会更好地使用第二种方式，**
***   **AppleScript**通过[Image Events](http://www.macosxautomation.com/applescript/imageevents/index.html)，一个由 OS X 提供的可编写脚本的不露面后台应用程序。有`crop`和`scale`命令，以及在另存为 JPEG 时指定压缩级别的选项

    ```
    save <image> as JPEG with compression level (low|medium|high) 
    ```

    使用“运行 AppleScript”操作而不是“裁剪”/“缩放”操作，并将图像事件命令包装在一个`tell application "Image Events"`块中，您应该已设置好。例如，要将图像缩放到其大小的一半并以最佳质量另存为 JPEG，请覆盖原始图像：

    ```
    on run {input, parameters}
        set output to {}
        repeat with aPath in input
            tell application "Image Events"
                set aPicture to open aPath
                try
                    scale aPicture by factor 0.5
                    set end of output to save aPicture as JPEG with compression level low
                on error errorMessage
                    log errorMessage
                end try
                close aPicture
            end tell
        end repeat
        return output -- next action processes edited files.
    end run 
    ```

    – 对于其他比例，相应地调整系数（1 = 100 %、.5 = 50 %、.25 = 25 % 等）；对于作物，将 替换`scale aPicture by factor X`为`crop aPicture to {width, height}`。Mac OS X Automation 有很好的关于[scale](http://www.macosxautomation.com/applescript/imageevents/04.html)和[crop](http://www.macosxautomation.com/applescript/imageevents/07.html)用法的教程。** 

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-24T00:23:43.600

Eric 的代码非常棒。可以完成大部分工作。但是如果图像的文件名包含空格，则此工作流程将不起作用。（由于处理 sip 时空格会破坏 shell 脚本。）对此有一个简单的解决方案：在此工作流程中添加“**重命名 Finder 项”。**用“_”或任何你喜欢的东西替换空格。那么，去就好了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-04T20:06:55.013

20 年的评论

我将脚本更改为快速操作，没有任何提示（用于压缩和确认）。它复制文件并将原始版本重命名为_original。我还包括了 nyam 针对“空间”问题的解决方案。您可以在此处下载工作流文件：http: [//mobilejournalism.blog/files/Compress%2080%20percent.workflow.zip](http://mobilejournalism.blog/files/Compress%2080%20percent.workflow.zip)（文件已压缩，否则将被识别为文件夹而不是工作流文件）

希望这对任何寻找这样的解决方案的人有用（就像我一个小时前所做的那样）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-11T04:36:52.043

17 年的评论

为了避免“空间”问题，更改 IFS 比重命名更聪明。备份当前 IFS 并将其更改为仅 \n。并在处理循环后恢复原始 IFS。

```
ORG_IFS=$IFS
IFS=$'\n'
for file in $@
do
    ...
done
IFS=$ORG_IFS 
```**

# java - 一段时间后停止 httpConnection 黑莓

> ID：10702123
> 
> 赞同：0
> 
> 时间：2012-05-22T12:33:26.913
> 
> 标签：java, blackberry, httpconnection

我有个问题。我想在 x 秒后停止 httpconnection，我该怎么做？我认为类似 timertask 的东西会在 x 秒后执行 httpconnection.close() 或类似的东西。这是我使用连接的代码。

```
public void run() {

        boolean hasCoverage = (RadioInfo.getState() == RadioInfo.STATE_ON)
                && (RadioInfo.getSignalLevel() != RadioInfo.LEVEL_NO_COVERAGE);

        if (hasCoverage) {

            UiApplication.getUiApplication().invokeLater(new Runnable() {
                public void run() {
                    popup = new MyPopup("Cargando Incidentes...");
                    UiApplication.getUiApplication().pushModalScreen(popup);
                }
            });

            try {
                HttpConnection conn = null;

                String URL = "anypage.php";

                conn = (HttpConnection) Connector.open(URL);

                InputStream contentIn = conn.openInputStream();
                byte[] data = new byte[400];
                int length = 0;

                StringBuffer raw = new StringBuffer();
                while (-1 != (length = contentIn.read(data))) {
                    raw.append(new String(data, 0, length));
                    str = raw.toString();

                }

            } catch (Exception e) {
                e.printStackTrace();
                mainScreen.add(new RichTextField(
                        "Error ThreadIncidentesConnection: " + e.toString()));
            }

            UiApplication.getUiApplication().invokeLater(new Runnable() {

                public void run() {

                    try {

                        String datos[] = mainScreen.split(str, "ENDOFPAGE");
                        // mainScreen.add(new RichTextField(""+datos[0]));
                        datos[0] = datos[0].substring(2, datos[0].length());
                        mainScreen.vecRegistro = mainScreen
                                .split(datos[0], "$");
                        mainScreen.insertoEnBd();
                        mainScreen.insertoEnTablaDatosBD(_act);
                        UiApplication.getUiApplication().popScreen(popup);

                    } catch (Exception e) {
                        e.printStackTrace();
                        mainScreen.add(new RichTextField(
                                "Error ThreadIncidentes.run: " + e.toString()));
                    }
                }

            });
        } else {
            mainScreen.add(new RichTextField("No hay conexión disponible."));
        }

    } 
```

# asp.net - 如何通过 SSL 连接到 AD LDS？处理“服务器无法运行”错误

> ID：10702134
> 
> 赞同：3
> 
> 时间：2012-05-22T12:33:54.967
> 
> 标签：asp.net, .net, wcf, active-directory

我正在尝试通过来自 .NET 4 Web 服务的安全 SSL 连接连接到 Active Directory 轻量级目录服务 2008 R2 的实例，但我收到“服务器无法运行”。错误。

*   我正在使用使用 ADSI 编辑器创建并放置在管理员角色中的用户。
*   我可以使用 SSL 和简单绑定通过 ADSI 编辑器与该用户登录/连接，并且
*   我可以使用相同的用户凭据但使用非 SSL 端口连接到 Web 服务。
*   我正在使用专有名称和
*   用户绝对不是不活动的。

这是我用来绑定的代码：

```
 DirectoryEntry entry = new DirectoryEntry("LDAP://2.2.2.2:636/DC=nfa,DC=local");
            entry.Username = "CN=ldapadmin,DC=nfa,DC=local";       
            entry.Password = "P@ssw0rd";
            entry.AuthenticationType = AuthenticationTypes.SecureSocketsLayer; 
```

我也试过这样：

```
DirectoryEntry entry2 = new DirectoryEntry("LDAP://2.2.2.2:636/DC=nfa,DC=local", "CN=ldapadmin,DC=nfa,DC=local", "P@ssw0rd", AuthenticationTypes.SecureSocketsLayer); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T04:43:35.640

服务器需要安装[满足记录要求](http://support.microsoft.com/kb/321051)的 SSL 证书。测试与 LDP 的连接性。您将需要使用机器的完全限定域名进行连接。用 FQDN 替换上面的 IP 地址，您应该已经设置好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T16:28:36.940

正如@ColinBowern 提到的，您需要提供完全限定域名 (FQDN) 而不是 IP，因为证书已颁发给 FQDN。

首先，验证在远程机器上注册到 AD LDS 的证书是否正确安装：

1.  运行`certmgr`。
2.  验证颁发证书的证书颁发机构 (CA) 是否存在于`Trusted Root Certification Authority\Certificates`商店中。
3.  验证`Personal\Certificates`存储中是否存在具有正确 FQDN（远程计算机的域名）的证书，该证书由上述 CA 颁发，类型为“服务器身份验证”。

其次，由于 DNS 注册错误，FQDN*可能无法*正确解析到远程计算机。验证本地计算机的`hosts`文件（位于`C:\Windows\System32\drivers\etc`）是否将正确的 IP 映射到 FQDN（如证书名称中所示）。如果不存在条目，则需要添加，

```
192.168.1.34    domain.name    # <-- FQDN as shown in the certificate 
```

# mysql - mysql中的查询和问题有什么区别

> ID：10702136
> 
> 赞同：0
> 
> 时间：2012-05-22T12:34:01.453
> 
> 标签：mysql, variables, status

我想知道mysql中以下两个值之间的区别。

```
show status like 'queries' ;
+---------------+-------------+
| Variable_name | Value       |
+---------------+-------------+
| Queries       | 16987383643 |
+---------------+-------------+
1 row in set (0.00 sec)

mysql> show status like 'Questions' ;
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| Questions     | 5     |
+---------------+-------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:35:27.030

试试看说明书？

*   [13.7.5.37。显示状态语法](http://dev.mysql.com/doc/refman/5.1/en/server-status-variables.html)
*   [5.1.5。服务器状态变量](http://dev.mysql.com/doc/refman/5.1/en/server-status-variables.html#statvar_Queries)

> 与查询变量不同。此 [问题] 变量不计算 COM_PING、COM_STATISTICS、COM_STMT_PREPARE、COM_STMT_CLOSE 或 COM_STMT_RESET 命令。

# android - 如何在android中的应用程序之外发出警报消息？

> ID：10702140
> 
> 赞同：3
> 
> 时间：2012-05-22T12:34:16.413
> 
> 标签：android, notifications, alarmmanager, android-notifications, android-alarms

我正在尝试使用此代码弹出警报消息。它在启动或打开应用程序时工作，但在应用程序之外没有任何弹出消息。我很困惑，我不知道我做错了什么。

```
String alarmtime = cur.getString(cur.getColumnIndex(DBDATA.LG_ALARMTIME));
//Reminder
String[] timesplit = alarmtime.split(":"); 
int hour = Integer.parseInt(timesplit[0]);
int minute = Integer.parseInt(timesplit[1]);
System.out.println(hour);
System.out.println(minute); 

AlarmManager alarmMgr = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
Intent intent = new Intent(this, ShortTimeEntryReceiver.class);
PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, intent, 0); 

Calendar alarm = new GregorianCalendar();
alarm.setTimeInMillis(System.currentTimeMillis());
alarm.set(Calendar.HOUR_OF_DAY, hour);
alarm.set(Calendar.MINUTE, minute); 
alarm.set(Calendar.SECOND, 0);  
System.out.println(System.currentTimeMillis());
System.out.println(alarm.getTimeInMillis());
if (System.currentTimeMillis() > alarm.getTimeInMillis()){
    alarm.setTimeInMillis(alarm.getTimeInMillis()+ 24*60*60*1000);// Okay, then tomorrow ...
    alarmMgr.set(AlarmManager.RTC_WAKEUP, alarm.getTimeInMillis(),pendingIntent);
}
else
{
    alarmMgr.set(AlarmManager.RTC_WAKEUP, alarm.getTimeInMillis(),pendingIntent);                 
} 
```

我需要在应用程序（即）之外弹出警报消息，就像警报一样。谢谢你们的帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:40:42.170

您可能需要一个[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)。

正如您在这个问题中所读到的那样：[BroadcastReceiver not received an alarm's broadcast](https://stackoverflow.com/questions/2544097/broadcastreceiver-not-receiving-an-alarms-broadcast)

您必须像这样构建意图：

```
Intent alarmIntent = new Intent(this, AlarmReceiver.class);
PendingIntent sender = PendingIntent.getBroadcast(this, "CHECK_ALARM_CODE", alarmIntent, 0); 
```

并收到这样的警报：

```
 public class AlarmReceiver extends BroadcastReceiver{
      @Override
      public void onReceive(Context context, Intent intent) {
         Toast.makeText(context, "Alarm worked.", Toast.LENGTH_LONG).show();
         Log.d("OK", "AlarmReceiver.onReceive");
      }
} 
```

不要忘记在清单文件中注册您的广播。

# c++ - 如何在不使用“使用”的情况下缩短 C++ 头文件中的命名空间缩进？

> ID：10702142
> 
> 赞同：0
> 
> 时间：2012-05-22T12:34:30.893
> 
> 标签：c++, coding-style, namespaces

如果您使用命名空间来分离模块/结构化，则头文件中的嵌套和缩进会显着增加。有没有办法以更短的方式编写以下代码？

```
namespace A
{
    namespace B
    {
        namespace C
        {
            namespace D
            {
                namespace E
                {
                    template <typename T>
                    public class X
                    {
                        public: ... 
```

例如喜欢

```
namespace A::B::C::D::E
{
  template<typename T> ...
} 
```

在 C++ 的头文件中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T13:17:53.823

不，嵌套命名空间语法之前已在不同时间和地点提出过，但无效。

你不需要缩进

```
namespace A { namespace B { namespace C {
// ...
} } } // namespace A::B::C 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:35:06.960

您可以使用命名空间别名。这不适用于扩展现有的命名空间，而是为了更容易访问。

您可以使用宏来扩展现有的命名空间，**但**如果您需要这样做，您可能拥有比您需要或想要的更深的命名空间层次结构。

# php - 从数据库中读取 php 代码

> ID：10702147
> 
> 赞同：0
> 
> 时间：2012-05-22T12:34:52.473
> 
> 标签：php, mysql

可以说我想将函数保存在数据库中。例如，我们有具有属性的表函数：函数和函数名。为了节省时间，我们将其保存在数据库中：

`time_funtion(){ return time() } and "Time"`.

从数据库读取后我不知道如何执行这个函数这甚至可能吗？

我可以对文件执行此操作 - 从数据库读取然后将其写入文件，然后包含文件并调用此函数将起作用。还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:36:45.273

我不确定你为什么要这样做，但你可以使用`eval()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:37:18.570

您可以为此使用[eval()](http://de.php.net/manual/en/function.eval.php)。但要小心保存到数据库中的内容。仅存在几个问题，这是一种有用的方法。在 99% 的情况下，您不需要它并且它缺乏安全性，因为您正在执行未知的代码，这不是您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T12:37:40.537

使用 eval("你的 PHP 代码在这里")

# mysql - 选择具有特定权限的用户

> ID：10702154
> 
> 赞同：-3
> 
> 时间：2012-05-22T12:35:19.503
> 
> 标签：mysql, sql

我在 MySQL 中有 4 个表

**用户**

![在此处输入图像描述](../Images/573640b9490cdd5ea277a60592e9328d.png)

**用户信息**

![在此处输入图像描述](../Images/3ba51510b1d34f82c38adf1b79c6e1e9.png)

**USER_RIGHTS**

![在此处输入图像描述](../Images/ded5c18996c95e76e3ea62fb28b524f5.png)

**101** = 正确读取

**102** = 正确写入

**103** = 删除权

**组**

![在此处输入图像描述](../Images/3574c740b16a076a98e87a024929abd9.png)

现在，当我想使用 INNER JOIN 选择所有用户时，我会执行类似的操作

```
SELECT users.id, user_info.first_name, user_info.last_name, user_rights.right
    FROM `users`
INNER 
    JOIN user_info 
    ON users.id = user_info.user_id
ORDER BY user_info.first_name; 
```

我有 2 个用户。

例如，我想创建另一个 INNER JOIN 来选择在第 1 组中具有权限的成员，但我的代码不起作用......

```
SELECT users.id, user_info.first_name, user_info.last_name, user_rights.right
    FROM `users`
INNER 
    JOIN user_info 
    ON users.id = user_info.user_id
INNER 
    JOIN user_rights 
    ON user_rights.rights = '101' 
ORDER BY user_info.first_name; 
```

这个想法是选择哪些成员在某个组中具有 READ 权限。希望我说清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T12:38:10.430

```
SELECT users.id, user_info.first_name, user_info.last_name, user_rights.right
    FROM `users`
INNER 
    JOIN user_info 
    ON users.id = user_info.user_id
INNER 
    JOIN user_rights 
    ON user_rights.user_id = users.id 
INNER JOIN groups 
    on groups.id = user_rights.group
where user_rights.right = '101' 
and groups.group_name = 'Human Resources'
ORDER BY user_info.first_name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:39:55.653

您必须添加与组表的联接：

```
SELECT users.id, user_info.first_name, user_info.last_name, user_rights.right
    FROM `users`
INNER 
    JOIN user_info 
    ON users.id = user_info.user_id
INNER 
    JOIN user_rights 
    ON user_rights.user_id = users.id
INNER 
    JOIN groups 
    ON user_rights.group = groups.id
WHERE user_rights.rights = '101' AND groups.group_name = 'Human Resources' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T12:39:45.573

使用带有 User_Rights 的 Left Join 来获取所有用户和权限

```
SELECT users.id, 
       user_info.first_name, 
       user_info.last_name, 
       user_rights.right 
FROM   users 
       INNER JOIN user_info 
         ON users.id = user_info.user_id 
       LEFT JOIN user_rights 
         ON user_rights.user_id = users.id 
            AND user_rights.right = '101' 
       LEFT JOIN GROUPS 
         ON user_rights.group = GROUPS.group 
            AND groups.group_name = 'Human Resources' 
ORDER  BY user_info.first_name; 
```

# iphone - 更新 UIButton 的背景时延迟

> ID：10702156
> 
> 赞同：2
> 
> 时间：2012-05-22T12:35:29.753
> 
> 标签：iphone, ios, uibutton, delay, setbackground

我正在使用 setBackgroundImage:forState: 来更新 UIButton 的背景。背景更新，但仅在几秒钟后。这里显然有一些刷新周期在起作用，但我无法准确找到问题所在。我尝试使用 setNeedsRefresh 和 setNeedsDisplay 没有任何结果。

如何立即更改 UIButton 背景？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T12:41:50.610

当您尝试在后台线程（例如，在委托回调中）执行 UIKit 操作时，通常会导致此类奇怪的延迟。试试这个：

```
dispatch_async(dispatch_get_main_queue(), ^{
    // set your button background here
}); 
```

# grails - 动态下载链接

> ID：10702163
> 
> 赞同：1
> 
> 时间：2012-05-22T12:36:07.447
> 
> 标签：grails

链接的查看页面代码

```
<a style="margin-left:70px;" href="${grailsApplication.config.grails.project.dir}/download?path=web-app/${What should i write here?}">Sample_Upload_Format.xls</a> 
```

我的视图页面中有一个下拉列表，其中包含 4 个字段，在该字段下方有我的链接。当我选择其中一个字段并单击链接时，与该链接 den 链接的 .xls 文件应该上传相应的 .xls 文件。附带的.xls 文件。

例如，我在下拉列表中有四个字段

1-Product_Type 2-Product_Name 3-Generic_Name 4-Manufacturer

下面是一个链接

Sample_Product_File.xls

我的文件系统命名中有 4 个文件，名称分别为 1-Product_Type.xls 2-Product_Name.xls 3-Generic_Name.xls 4-Manufacturer.xls

当我选择 Product_name 并单击链接 Sample_Product_File.xls 时，应下载 Product_name.xls。

# php - 如何使用strpos在链接中查找单词

> ID：10702169
> 
> 赞同：1
> 
> 时间：2012-05-22T12:36:30.377
> 
> 标签：php

我将创建数据库表`badwords`来存储一些不需要的单词 [ `id,word`]，如下所示。

```
CREATE TABLE `badwords`(
`id` int(3) NOT NULL auto_increment,
`word` text,
PRIMARY KEY (`id`),
KEY `id` (`id`)) 
```

假设我已经存储了以下单词

```
(1,ugly)
(2,yak) 
```

现在我的访问者可能会发布一些包含其中一个坏词的链接，我愿意使用这样的东西。

```
$user = "http://www.this_ugly_site.com"; // visitor post this (ugly) word within

// i'm gonna try to find any of bad words stored in my table

$qry="select * from badwords where word='$user'"; // how to do it (find)
$result=mysql_query($qry) or die($qry);
if(mysql_num_rows($result)=='0'){

echo "Good URL";

}else{

while($line=mysql_fetch_array($result)){

echo "Bad URL";

}} 
```

我不知道如何申请`strpos`，如果它真的很好的解决方案或者我可以使用其他东西！

或者我可以使用

```
$qry="select * from badwords where word LIKE '%$user%'"; 
```

但它看起来不安全，因为它将用户提供的值嵌入到您的 SQL 中

所以任何想法或帮助如何做到这一点〜谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:52:49.937

如果你坚持做这样的事情，我会让 MySQL 为你做所有的工作。您需要做的是将操作数的顺序与您可能习惯在`LIKE`子句中使用它们的方式相反：

```
SELECT `word`
FROM `badwords`
WHERE '<user_input>' LIKE concat('%', `word`, '%')
LIMIT 1 
```

基本的 PHP 代码类似于：

```
// User input
$user = "http://www.this_ugly_site.com";

// Find matching words
// Do NOT show mysql_error() or $query in a production environment!
$query = "
  SELECT `word`
  FROM `badwords`
  WHERE '".mysql_real_escape_string($user)."' LIKE concat('%', `word`,'%')
  LIMIT 1
";
$result = mysql_query($query) or die("MySQL Error: ".mysql_error()."\n".$query);

// Test for a match
if (mysql_num_rows($result)) {
  $row = mysql_fetch_assoc($result);
  echo "Bad URL (matches {$row['word']})";
} else {
  echo "Good URL";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:42:24.140

您正在向后搜索字符串。我不确定我是否会使用 MySQL 来执行此操作；相反，我可能会将所有不好的词从表中拉出，然后搜索我的字符串，如下所示：

```
<?
$user_string = "http://www.this_ugly_site.com";

$query = "SELECT word FROM badwords";
$res = mysql_query($query);

$stringOkay = true;

while ($row = mysql_fetch_assoc($res))
{
    //use stripos for case insensitive matching
    if (stripos($user_string, $row['word']) !== false)
    {
        //this user string contains a bad word!
        $stringOkay = false;
        break;
    }
}

if ($stringOkay) echo "Good URL";
else echo "Bad URL"; 
```

正如 DaveRandom 在您的 OP 中评论的那样，使用这种搜索方法，您将提出*很多*误报和误报。稍微好一点的方法是使用正则表达式，但即使是那些也不是万无一失的。

例如，您可能想要阻止单词 'yak' bot 而不是 'kayak' 所以要完成此操作，您将使用带有单词描述符 (\b) 的正则表达式，并且您将有一个像这样的表达式: `#(^|\b)yak(\b|$)#i`，这也提供当你用这样的模式拼写“leet speak”时，你可以阻止像“ass”这样的东西，`#a(55|$$)#i`但同样，这可能会出现误报，因为有人可以输入`a5$`or `a**`。基本上，这是一个“难题”，您将需要一个更复杂的解决方案来获得完整的覆盖/保护。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T12:48:17.537

你问了 3 个不同的问题：

1.  **我该如何使用`strpos()`**

    这是一个带有三个参数的原生 PHP 函数。我鼓励您使用和学习[PHP 文档](http://php.net/strpos)。尽管如此，这里有一个例子：

    ```
    strpos($string, $bad_word); 
    ```

2.  **有没有更好的办法？**

    可能。但你所拥有的并不坏。`strpos()`是更快的字符串函数之一。如果您每秒有数千个*坏词*和大量请求，那么您可能希望研究缓存*坏词*而不是每次都查询 MySQL。但是，无需过早优化。现在，早点失败。那是当你发现一个*坏词*，`break`在循环之外。

3.  **如何在 MySQL 中转义字符串？**

    我鼓励您使用[MySQLi](http://php.net/mysqli)扩展，然后使用[`mysqli->real_escape_string()`](http://www.php.net/manual/en/mysqli.real-escape-string.php).

    例如：

    ```
    $qry = "SELECT * FROM badwords WHERE word LIKE '%" . $dbc->real_escape_string($user) . "%'"; 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T12:44:26.527

```
$user = "http://www.this_ugly_site.com"; 
$qry="select word_column_name from badwords"; 
$badwords=mysql_query($qry);
if(badword($user,$badwords))
    echo "bad url";

function badword($user,$badwords)
{    
   foreach($badwords as $badword)
   {
     if(stristr($text,$badword))
     {
            return true;
     }
   }
   return false;
} 
```

# ruby-on-rails - Carrierwave/Paperclip and Resque - 在多台计算机上共享

> ID：10702177
> 
> 赞同：0
> 
> 时间：2012-05-22T12:36:56.857
> 
> 标签：ruby-on-rails, paperclip, carrierwave, distributed-computing, resque

我正在开发一个 Rails 应用程序，该应用程序需要将文件上传到我的服务器，然后让 resque 工作人员（在其他几台计算机上运行）使用这些文件来执行一些任务。我让我的员工都准备好完成这项任务，但我似乎找不到一种将文件从我的主机计算机获取到我的员工计算机的好方法。我已经尝试过 Carrierwave（并查看了 Paperclip 的文档），但我看到的只是使用了我无法使用的 S3。我唯一的想法是存储一个字符串，其中包含可以找到文件的 URI，以便工作人员可以下载它们并开始工作。我不是特别喜欢这个主意。有没有人对什么可能是最好的方法有任何建议？谢谢！

* * *

更新

我还应该注意需要共享的文件每个大约 200MB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:03:09.210

您是否考虑过类似[网络文件系统](http://de.wikipedia.org/wiki/Network_File_System)的东西，而不是在您的应用程序中这样做？

根据您的工作人员和服务器是什么平台，您应该有许多共享文件系统的选项（我假设您在它们之间运行了一个 LAN）。

即使没有真正的局域网，[sshfs](http://en.wikipedia.org/wiki/SSHFS)也可以工作..

好处是显而易见的：您的 Ruby 应用程序只需要使用 FileUtils 处理常规文件系统，而推送内容的繁重工作由更可靠的基础架构处理

# xpages - 如何使用 xe:popupMenu

> ID：10702178
> 
> 赞同：2
> 
> 时间：2012-05-22T12:37:06.437
> 
> 标签：xpages, xpages-extlib

我想在 XPage 中有一个右键单击弹出菜单。因此，我使用扩展库在 XPages 中创建了一个弹出菜单。菜单不显示，无论我尝试什么。我必须将它绑定到按钮吗？如果是这样，怎么办？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T12:55:44.197

是的，它需要绑定到链接或按钮。按钮或链接需要使用客户端 JavaScript 调用 xe:popupMenu。扩展库演示数据库中有一个示例，或者在 XPages 扩展库书籍第 8 章 p252 中有更多信息。

# javascript - 使用 nivoSlider，如何确定当前幻灯片图像或索引？

> ID：10702180
> 
> 赞同：3
> 
> 时间：2012-05-22T12:37:13.093
> 
> 标签：javascript, jquery, nivo-slider

我使用的当前方法只是增加`afterChange`事件的索引值，但是当用户向后导航时这会中断。如何确定当前图像索引是什么？

```
(function($){ $(function(){

  var i = 0
  var swapColor = function(){
    var index = i++ % $("#slider img").length // gets the calculated index according to hom many times the slider has swapped slides
    var color = $("#slider img").eq(index).data('color')
    $(".nivo-caption, .nivo-html-caption").css({backgroundColor: color})  
  }

  $('#slider').nivoSlider({
    afterLoad: swapColor,
    beforeChange: swapColor
  });

}) })(jQuery); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T12:50:57.230

我是用这个方法做的...

```
var index = $(".nivo-controlNav .active").attr('rel') 
```

# visual-c++ - 读取数据文件的最后几行以外的所有内容

> ID：10702184
> 
> 赞同：0
> 
> 时间：2012-05-22T12:37:15.793
> 
> 标签：visual-c++

我可以使用 getline 轻松跳过数据文件的标题，但是当我解析数据文件并到达文件的页脚时，我最终陷入了循环，因为程序正在尝试解析没有的数据列不再存在。当行中不再有数据时，是否有一种简单的方法可以停止读取？看起来有一个空白行，后面跟着一些页脚信息，但我不能保证我所有的数据文件都会看起来像那样（即我需要一些非常通用的东西）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:04:21.447

查看您现有的代码（编辑您的问题并将其放在那里，而不是在评论中），我看到您有嵌套循环。但你真正想要的是一个有两个退出理由的循环。

```
while ((q < 16) && (liness >> temp)) { ... } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-22T12:43:40.600

将该行读入一个字符串，仅当您看到`\n`末尾时才解析。

# .net - UserPrincipal 对象中的域名在哪里？

> ID：10702188
> 
> 赞同：10
> 
> 时间：2012-05-22T12:37:25.323
> 
> 标签：.net, active-directory, directoryservices

我正在使用这些`System.DirectoryServices.ActiveDirectory`类来查找所有 Active Directory 用户。代码非常简单：

```
var context = new PrincipalContext(ContextType.Domain);
var searcher = new PrincipalSearcher(new UserPrincipal(context));
var results = searcher.FindAll(); 
```

我想以“友好”（又名“pre-Windows 2000”格式）获取域限定的用户名，例如。“CONTOSO\SmithJ”。`UserPrincipal.SamAccountName`给了我用户名部分，但我如何获得域部分？我不能假设域与机器或当前用户的域相同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T17:47:22.133

对于 AD DS， 的值`msDS-PrincipalName`是 NetBIOS 域名，后跟反斜杠 ("\")。

您可以使用以下方法找到它：

```
/* Retreiving the root domain attributes
 */ 
sFromWhere = "LDAP://DC_DNS_NAME:389/dc=dom,dc=fr"; 
DirectoryEntry deBase = new DirectoryEntry(sFromWhere, "AdminLogin", "PWD"); 

DirectorySearcher dsLookForDomain = new DirectorySearcher(deBase); 
dsLookForDomain.Filter = "(objectClass=*)"; 
dsLookForDomain.SearchScope = SearchScope.base; 
dsLookForDomain.PropertiesToLoad.Add("msDS-PrincipalName"); 

SearchResult srcDomains = dsLookForDomain.FindOne(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T12:40:15.210

好的，这是我使用 JPBlanc 的答案和[MichaelZ 链接](https://stackoverflow.com/questions/4284641/get-netbiosname-from-a-userprincipal-object)的答案得出的最终代码。它显示每个用户的 SID、显示名称和域\用户名。

```
 var ldapUrl = "LDAP://" + defaultNamingContext;

    using (var rootDe = new DirectoryEntry(ldapUrl))
    using (var searcher = new DirectorySearcher(rootDe))
    {
        searcher.SearchScope = SearchScope.Subtree;
        searcher.PropertiesToLoad.Add("objectSid");
        searcher.PropertiesToLoad.Add("displayName");
        searcher.PropertiesToLoad.Add("msDS-PrincipalName");
        searcher.Filter = "(&(objectClass=user)(objectCategory=person))";

        var results = searcher.FindAll();

        foreach (SearchResult result in results)
        {
            var qualifiedUsername = GetSinglePropertyValue(result, "msDS-PrincipalName");
            var displayName = GetSinglePropertyValue(result, "displayName");
            var sid = new SecurityIdentifier((byte[])GetSinglePropertyValue(result,"objectSid"), 0);

            Console.WriteLine("User: {0}\r\n\tDisplay name: {1}\r\n\tSID: {2}",
                qualifiedUsername, displayName, sid);
        }
    }

    private static object GetSinglePropertyValue(SearchResult result, string propertyName)
    {
        var value = result.Properties[propertyName];
        if (value.Count == 0)
            return null;
        if (value.Count == 1)
            return value[0];
        throw new ApplicationException(string.Format("Property '{0}' has {1} values for {2}",
            propertyName, value.Count, result.Path));
    } 
```

并获取机器域的默认命名上下文（如此[处回答](https://stackoverflow.com/questions/140579/how-do-i-detect-if-my-program-runs-in-an-active-directory-environment)）：

```
private static string GetDefaultNamingContext()
{
    // This check is fast
    try
    {
        Domain.GetComputerDomain();
    }
    catch (ActiveDirectoryObjectNotFoundException)
    {
        return null;
    }

    // This takes 5 seconds if the computer is not on a domain
    using (var rootDe = new DirectoryEntry("LDAP://RootDSE"))
    {
        try
        {
            return (string)rootDe.Properties["defaultNamingContext"][0];
        }
        catch (COMException ex)
        {
            if (ex.ErrorCode == -2147023541)
                return null;
            throw;
        }
    }
} 
```

# asp-classic - Request.form('txtname') 为空

> ID：10702189
> 
> 赞同：0
> 
> 时间：2012-05-22T12:37:27.570
> 
> 标签：asp-classic

我有一个包含表格的表格。我有一个单元格之一，我有一个 HTML 文本控件。表单方法定义为 POST & on action 页面本身。当我使用

```
Dim myVar=Request.form('txtName') 
```

我在标签中打印的值变为空白。而当我在萤火虫中查看时，它会在文本框中正确显示帖子值。

请告诉我在哪里失踪。为什么没有在跨度中获得价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:31:53.740

也许试试

```
Dim myVar
myVar = Request.form("txtName") 
```

# ruby-on-rails-3 - RSpec let 方法在规范中使用时给出 nil

> ID：10702193
> 
> 赞同：0
> 
> 时间：2012-05-22T12:37:54.370
> 
> 标签：ruby-on-rails-3, rspec, rspec2, ruby-on-rails-3.2, rspec-rails

当我运行这个测试

```
require 'spec_helper'

describe AssignmentsController do

  let(:user) { create(:user) }
  let(:course) { create(:course) }

  describe "GET 'index'" do
     it "returns http success" do
      assignment = user.assignments.build(name: "Hello 2", start_date: "5/20/2000", due_date: "5/21/2000")
      get :index
      assigns(:assignment).should eq([assignment])
    end
  end
end 
```

我得到这个失败：

```
 1) AssignmentsController GET 'index' returns http success
     Failure/Error: get :index
     NoMethodError:
       undefined method `assignments' for nil:NilClass
     # ./app/controllers/assignments_controller.rb:5:in `index'
     # ./spec/controllers/assignments_controller_spec.rb:29:in `block (3 levels) in <top (required)>' 
```

为什么会这样，因为我用上面的 let 定义了用户变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:07:02.300

如果你仔细看，你会发现错误来自第 5 行的控制器，而不是规范文件。let 语句按照您的方式使用，一切都应该没问题。

# python - 正则表达式检查日期

> ID：10702196
> 
> 赞同：5
> 
> 时间：2012-05-22T12:38:03.203
> 
> 标签：python, regex

嗨，我已经编写了正则表达式来检查字符串在哪里具有类似 - 或的字符。或 / 或 : 或 AM 或 PM 或空格。 follworig 正则表达式适用于此，但如果字符串包含 AMP 以外的字符，我想让大小写失败。重新进口

```
Datere = re.compile("[-./\:?AMP ]+")

FD = { 'Date' : lambda date : bool(re.search(Datere,date)),}

def Validate(date):

    for k,v in date.iteritems():
        print k,v
        print FD.get(k)(v) 
```

输出：

```
Validate({'Date':'12/12/2010'})
Date 12/12/2010
True
Validate({'Date':'12/12/2010 12:30 AM'})
Date 12/12/2010
True

Validate({'Date':'12/12/2010 ZZ'})
Date 12/12/2010
True  (Expecting False) 
```

编辑： Validate({'Date':'12122010'}) 日期 12122010 False（期望 False）

我怎么能找到除 char APM 以外的任何建议的字符串。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:43:15.710

试试这个：

```
^[-./\:?AMP \d]*$ 
```

您的正则表达式的更改是

*   它用 ^ 和 $ 锚定，这意味着整行应该匹配而不是部分匹配
*   \d 被添加到字符类以允许数字

现在正则表达式基本上读取为允许在 1 行上的符号列表

如果您希望空字符串不匹配，请将 * 更改为 +

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:44:01.870

您可以改用这样的表达式：

```
^[-0-9./:AMP ]+$ 
```

`^`并将`$`表达式锚定在字符串的开头和结尾，确保其中没有其他内容（除了 之后的可选新行`$`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T13:23:58.893

你处理这个问题的方式太天真了，无法处理像“-30/A-MP/2012/12”、“-30/A-MP/20PA12/12”这样的乱码输入。

如果您想有效地验证您的日期，如何：

```
import datetime
date = '12-12-2012 10:45 AM'
formats = ("%d-%m-%Y %I:%M %p", "%d/%m/%Y %I:%M %p", ...)
for fmt in formats:
    try:
        valid_date = datetime.datetime.strptime(date, fmt)
    except ValueError as e:
        print(e) 
```

您必须定义所有可能的格式，但您将获得完整的日期时间对象（或时间或日期对象，它们的工作方式类似），并且您可以绝对确定它们是有效的。有关可用格式说明符的完整说明：http: [//docs.python.org/library/time.html#time.strftime](http://docs.python.org/library/time.html#time.strftime)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T13:43:34.650

有点复杂，但确实有用。

```
import re
Datere = re.compile("""
    ^(?:\d\d[-./\:]){2} ## dd_SEP_dd
    \d{4}\s* ## year may be followed by  spaces
    (?:\d\d[-./\:]\d\d\s+(?:AM|PM))? ## hh_SEP_mm spaces followed by AM/PM and this is optional
    \s*$""",re.X)

FD = { 'Date' : lambda date : bool(re.search(Datere,date)),}

def Validate(date):

    for k,v in date.iteritems():
        print k,v
        print FD.get(k)(v)

print Validate({'Date':'12/12/2010'})
print Validate({'Date':'12/12/2010 12:30 AM'})
print  Validate({'Date':'12/12/2010 ZZ'}) 
```

# c# - 将十进制变量拆分为整数和分数部分

> ID：10702199
> 
> 赞同：24
> 
> 时间：2012-05-22T12:38:45.820
> 
> 标签：c#, decimal, fractions, integral

我正在尝试从十进制值中提取整数和小数部分（这两个部分都应该是整数）：

```
decimal decimalValue = 12.34m;
int integral = (int) decimal.Truncate(decimalValue);
int fraction = (int) ((decimalValue - decimal.Truncate(decimalValue)) * 100); 
```

（出于我的目的，十进制变量最多包含 2 个小数位）

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-04-30T09:35:33.340

```
 decimal fraction = (decimal)2.78;
        int iPart = (int)fraction;
        decimal dPart = fraction % 1.0m; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-27T14:13:53.633

尝试数学定义：

```
var fraction = (int)(100.0m * (decimalValue - Math.Floor(decimalValue))); 
```

虽然，它在性能方面并没有更好，但至少它适用于负数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-08T13:38:11.177

```
decimal fraction = doubleNumber - Math.Floor(doubleNumber) 
```

或类似的东西。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T12:42:34.057

怎么样：

```
int fraction = (int) ((decimalValue - integral) * 100); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-24T01:34:39.213

要取出分数，您可以使用[此解决方案](https://stackoverflow.com/a/4667302/698127)：

```
Math.ceil(((f < 1.0) ? f : (f % Math.floor(f))) * 10000) 
```

# google-app-engine - JavaEE 默认错误处理程序 servlet 不捕获抛出的错误

> ID：10702200
> 
> 赞同：0
> 
> 时间：2012-05-22T12:38:50.927
> 
> 标签：google-app-engine, exception, jakarta-ee, error-handling, jersey

我的问题是我注册的错误处理程序代码不适用于所有错误。在我的 web.xml 中，我注册了我的默认错误处理程序：

```
 <servlet>
        <servlet-name>ShowErrorHandlerServlet</servlet-name>
        <servlet-class>tools.ErrorHandlerServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ShowErrorHandlerServlet</servlet-name>
        <url-pattern>/showerror</url-pattern>
    </servlet-mapping>
    <error-page>
        <exception-type>java.lang.Exception</exception-type>
        <location>/showerror</location>
    </error-page>
    <error-page>
        <error-code>404</error-code>
        <location>/showerror</location>
    </error-page>
    <error-page>
        <location>/showerror</location>
    </error-page> 
```

我正在使用 Jersey 来映射休息请求，所以例如这样的：

```
@GET
@Path("/throwError")
public void testThrowUnauthException() {
    // String s = null;
    // s.toString();
    // /*
    // * this nullpointer exception would be caught correctly because of
    // * <exception-type>java.lang.Exception</exception-type> in the web.xml
    // */
    throw new WebApplicationException(Response.Status.UNAUTHORIZED);
} 
```

未捕获 WebApplicationException 并显示默认的 jetty 401 错误页面：

> HTTP 错误 401
> 
> 访问 /v1/locations/throwError 时出现问题。原因：
> 
> ```
> UNAUTHORIZED 
> Powered by Jetty 
> ```

注册

```
<error-page>
    <error-code>401</error-code>
    <location>/showerror</location>
</error-page> 
```

不起作用，但它适用于 404 错误..

有人知道为什么会这样吗？我需要使用 ErrorHandlerServlet 捕获所有错误，以将它们转换为 json 错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:50:49.027

我认为泽西岛正在压倒 Jetty 的行为，因此它没有采用 XML 的价值。解决它的一种方法（可能不是最优雅的）：

```
@Context HttpServletResponse res;
@GET
@Produces(MediaType.TEXT_HTML)
public String doFoo(){
    try {
        //Code that causes the error
    } catch (Exception e) {
        res.sendRedirect("/showError");
    }
    return "";
} 
```

另一个想法是扩展 WebApplicationException 并自己管理响应（可能是最好的）

# jquery - 如何覆盖 JQuery 的 .show() 和 .hide() 以触发前后的事件？

> ID：10702202
> 
> 赞同：3
> 
> 时间：2012-05-22T12:39:13.777
> 
> 标签：jquery, callback, overriding

我正在尝试覆盖 JQuery 的 .show 和 .hide 方法以在使用以下代码调用它们之前和之后启动触发事件。

```
$(document).ready(function () {
    $('#dataBox').bind('afterShow', function () {
        alert('afterShow');
    });
    $('#dataBox').bind('afterHide', function () {
        alert('afterHide');
    });
    $('#dataBox').bind('beforeShow', function () {
        alert('beforeShow');
    });
    $('#dataBox').bind('beforeHide', function () {
        alert('beforeHide');
    });
    $('#toggleButton').click(function(){
        if($('#dataBox').is(':visible')) {
            $('#dataBox').hide ();
        } else {
            $('#dataBox').show();
        }
    });
});

jQuery(function ($) {
    var _oldShow = $.fn.show;
    //Override jquery's 'show()' method to include two triggered events before and after
    $.fn.show = function (speed, oldCallback) {
        return $(this).each(function () {
            var obj = $(this),
                newCallback = function () {
                    if ($.isFunction(oldCallback)) {
                        oldCallback.apply(obj);
                }
                obj.trigger('afterShow');
            };
        obj.trigger('beforeShow');
            _oldShow.apply(obj, [speed, newCallback]);
        });
    }
});

jQuery(function ($) {
    var _oldHide = $.fn.hide;
    //Override jquery's 'hide()' method to include two triggered events before and after
    $.fn.hide = function (speed, oldCallback) {
        return $(this).each(function () {
            var obj = $(this),
                newCallback = function () {
                    if ($.isFunction(oldCallback)) {
                        oldCallback.apply(obj);
                }
                obj.trigger('afterHide');
            };
        obj.trigger('beforeHide');
            _oldHide.apply(obj, [speed, newCallback]);
        });
    }
}); 
```

我有以下标记：

```
<input type='text' id='dataBox'/>
<input type='button' value='toggle' id='toggleButton' /> 
```

当我单击切换按钮时，会触发“beforeHide”和“beforeShow”事件，而“afterShow”和“afterHide”则不会。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T15:44:46.687

请检查[演示小提琴](http://jsfiddle.net/rahen/eUaAw/5/)。希望它有效

**$.show / $.hide - 覆盖功能：**

```
(function($){
$.override ={'show': $.fn.show, 'hide': $.fn.hide};

$.each($.override,function(M,F){

        var m=M.replace( /^\w/, function(r){ return r.toUpperCase(); });

        $.fn[M] = function(speed, easing, callback) {

            var args=[speed||0,easing||'',callback||function(){}];

            if( $.isFunction(speed)){
                args[2]=speed;
                args[0]=0;
            }                   
            else if( $.isFunction(easing)){
                args[2]=easing;
                args[1]='';
            }                   

            if(!this.selector){
                F.apply(this, arguments);
                return this;
            }

            return this.each(function () {
                var obj = $(this),
                    oldCallback = args[args.length-1],
                    newCallback = function () {
                        if ($.isFunction(oldCallback)){
                            oldCallback.apply(obj);
                        }
                        obj.trigger('after'+m);
                };

                obj.trigger('before'+m);
                args[args.length-1]=newCallback;

                //alert(args);
                F.apply(obj,args);

            });
        }
});
})(jQuery); 
```

**用法**

```
jQuery(function($){
var $dataBox=$('#dataBox').bind('beforeHide afterHide beforeShow afterShow', function(e) {
    alert(e.type);
});

$('#toggleButton').bind('click',function(){
    $dataBox[$dataBox.is(':visible')?'hide':'show'](100,'swing',function(){ alert('end of animation');});
    return false;
});
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T13:17:21.887

我在你的代码中设置了一些断点，发现你的`newCallback`函数永远不会被调用。我认为那是因为您在调用该函数时没有使用速度参数。从 jQuery 原始函数的文档[$.show](http://api.jquery.com/show/)中可以看到，可以`$.show`使用`no`、或 ` 三个参数调用`one``two`

> .show( 持续时间 [, 回调] )
> 
> 持续时间一个字符串或数字，确定动画将运行多长时间。
> 
> 回调动画完成后调用的函数。
> 
> 添加的版本：1.4.3
> 
> .show( [duration] [,easing] [, callback] )
> 
> 持续时间一个字符串或数字，确定动画将运行多长时间。
> 
> easing 一个字符串，指示用于过渡的缓动函数。
> 
> 回调动画完成后调用的函数。

所以你可能会也可能不会传递一堆不同的参数。所以我认为问题出在这一行

```
 _oldHide.apply(obj, [speed, newCallback]); 
```

在这种特定情况下`speed`未定义的位置。

你可以调用`$.fn.show`函数

```
$(..).show(undefined,callBack)
//or
$(..).show(undefined,undefined, callBack) 
```

如果没有指定其他参数，则回调始终必须是第一个参数，在这种情况下，jQuery 将使用它的默认`400ms`速度/持续时间进行动画处理。你会看到一个淡入/淡出类型的效果。使用此回调使其表现得像显示/隐藏

`_oldShow/_oldHide`你必须打电话给

```
_oldShow.apply(obj, [0,newCallback]);

//or

_oldHide.apply(obj, [0,newCallback]); 
```

在快速搜索中，我在互联网上找到了一个代码，它似乎工作正常，并且对您可以传递给的所有参数都有特殊处理`$.show`和`$.hide`. 检查下面的小提琴来看看

[工作小提琴](http://jsfiddle.net/joycse06/T3TN2/2/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T11:22:05.907

## 为什么`afterShow`和`afterHide`事件没有被触发

`newCallback`如果显示/隐藏动画，jQuery 只会调用回调函数（在您的代码中）。如果没有参数传递给`.show()`/ `.hide()`（或者 if `speed`is `undefined`），那么 jQuery 将直接显示/隐藏元素，并且不会执行回调函数。

## 为什么覆盖`.show()`/`.hide()`不是最好的主意

*   jQuery 内部调用`.show()`/ `.hide()`（例如作为 的一部分`.fadeTo()`）和递归调用（在进行动画显示 / 隐藏时），因此您的自定义事件将在您可能不期望它们时触发。

*   恕我直言，最好将“库存” jQuery 和自定义设置分开（作为插件），使用单独的方法名称/命名空间：

    *   [当您的开发人员在http://api.jquery.com](http://api.jquery.com)中查找库存方法时，他们会知道文档完整地描述了方法的行为。
    *   如果您的开发人员使用其他地方的代码，他们不会调用常规方法并期望特定于您公司代码库的行为。

## `.eventedShow()`/`.eventedHide()`

这增加了`.eventedShow()`and （它采用与/`.eventedHide()`相同的参数）并且应该做你想要的：`.show()``.hide()`

```
(function( $ ) {

$.each( [ 'Show', 'Hide' ], function( i, method ) {
    $.fn[ 'evented' + method ] = function( speed ) {
        var originalMethod = method.toLowerCase(),
            hasCallback = false,
            args;

        // animate
        if ( speed || speed === 0 ) {
            args = $.makeArray( arguments );
            $.each( args, function( i, arg ) {
                if ( $.isFunction( arg ) ) {
                    args[ i ] = function() {
                        arg.apply( this, arguments );
                        $( this ).trigger( 'after' + method );
                    };
                    hasCallback = true;
                    return false;
                }
            } );
            if ( !hasCallback ) {
                args.push( function() {
                    $( this ).trigger( 'after' + method );
                } );
            }

            this.each( function() {
                var el = $( this );
                el.queue( function() {
                    $( this )
                        .trigger( 'before' + method )
                        .dequeue();
                } );
                $.fn[ originalMethod ].apply( el, args );
            } );

        // straight show/hide
        } else {
            this.trigger( 'before' + method );
            $.fn[ originalMethod ].apply( this, arguments );
            this.trigger( 'after' + method );
        }

        return this;
    };
} );

})( jQuery ); 
```

您可以在这里尝试代码：http: [//jsfiddle.net/jefferyto/bv8D2/](http://jsfiddle.net/jefferyto/bv8D2/)

您仍然需要在现有代码中更改`show`/`hide`到`eventedShow`/ `eventedHide`，但这可以通过全局搜索和替换来完成。

# sql - 在基于行 id 的排序中查找行号，然后找到它的邻居

> ID：10702204
> 
> 赞同：5
> 
> 时间：2012-05-22T12:39:19.863
> 
> 标签：sql, sql-order-by, firebird, rank, rowcount

说我有一些`SELECT`声明：

```
SELECT id, name FROM people
   ORDER BY name ASC; 
```

我在表中有几百万行，`people`并且该`ORDER BY`子句可能比我在此处显示的要复杂得多（可能在十几个列上操作）。

我只检索一小部分行（比如第 1..11 行）以便在 UI 中显示它们。现在，我想解决以下问题：

1.  查找具有给定 的行号`id`。
2.  使用给定的 显示一行之前的 5 项和之后的 5 项`id`。

一旦我解决了问题 1，问题 2 就很容易解决，因为如果我知道我要查找的项目`1000`在排序结果集中具有行号（这是 Firebird SQL 方言），我可以使用类似的东西：

```
SELECT id, name FROM people
   ORDER BY name ASC
   ROWS 995 TO 1005; 
```

我也知道，我可以通过计算在我要查找的行之前的所有行来找到行的[排名](http://www.firebirdfaq.org/faq343/)，但这可能会导致非常长的`WHERE`子句，其中包含大量`OR`和`AND`条件。我必须反复这样做。使用我的测试数据，即使使用正确索引的列，这也需要数百毫秒，这太慢了。

是否有一些方法可以通过使用一些 SQL:2003 功能（例如`row_number`在 Firebird 3.0 中支持）来实现这一点？我绝不是 SQL 专家，在这里我需要一些指示。我可以创建一个缓存视图，其中结果将包括一个等级/密集等级/行索引吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:26:58.293

Firebird 似乎支持窗口函数（在 Oracle 中称为分析函数）。因此，您可以执行以下操作：

要查找具有给定 id 的行的“行”号：

```
select id, row_number() over (partition by NULL order by name, id)
from t
where id = <id> 
```

这假设 id 是唯一的。

解决第二个问题：

```
select t.*
from (select id, row_number() over (partition by NULL order by name, id) as rownum
      from t
     ) t join 
     (select id, row_number() over (partition by NULL order by name, id) as rownum
      from t
      where id = <id>
     ) tid
     on t.rownum between tid.rownum - 5 and tid.rownum + 5 
```

不过，如果您可以修改表结构，我可能会提出其他建议。大多数数据库都提供了在插入行时添加自动增量列的功能。如果您的记录从未被删除，这可以作为您的计数器，简化您的查询。

# java - 几个“ChildException”捕获块与一个“异常”捕获块

> ID：10702205
> 
> 赞同：1
> 
> 时间：2012-05-22T12:39:19.987
> 
> 标签：java, exception-handling, try-catch, readability, catch-block

`ChildException`几个catch 块和一个catch 块之间哪个更好`Exception`？我所说的*更好*，是指*以一种好的做法*。

为了显示：

```
public static void main(String[] args) {
    System.out.println(Main.isNonsense1(null)); // false <- bad
    System.out.println(Main.isNonsense2(null)); // NullPointerException <- good
}

// More readable, less precise
public static boolean isNonsense1(String className) {
    try {
        Class.forName(className);
        String.class.getConstructor(String.class);
        className.getBytes("UTF-8");
        MessageDigest.getInstance("SHA-1").wait();
        return true;
    } catch (Exception e) {
        return false;
    }
}

// Less readable, more precise
public static boolean isNonsense2(String className) {
    try {
        Class.forName(className);
        String.class.getConstructor(String.class);
        className.getBytes("UTF-8");
        MessageDigest.getInstance("SHA-1").wait();
        return true;
    } catch (ClassNotFoundException e) {
        return false;
    } catch (NoSuchMethodException e) {
        return false;
    } catch (SecurityException e) {
        return false;
    } catch (UnsupportedEncodingException e) {
        return false;
    } catch (NoSuchAlgorithmException e) {
        return false;
    } catch (InterruptedException e) {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T12:47:17.360

这与这个问题有关：[一次捕获多个异常？](https://stackoverflow.com/questions/136035/catch-multiple-exceptions-at-once)

那里的答案很好。关键是，如果你抓住了，`Exception`那么你应该处理你知道的每个案例以及`throw`所有其他案例。也就是说，简单地在您的示例中捕获 Exception 并返回 false**并不是**一个好主意。您可能会无意中捕捉到一些您无意捕捉的异常。

使用您的示例，这是我建议的代码：

```
public static boolean isNonsense2(String className) {
    try {
        Class.forName(className);
        String.class.getConstructor(String.class);
        className.getBytes("UTF-8");
        MessageDigest.getInstance("SHA-1").wait();
        return true;
    } catch (Exception e) {
        if (e instanceof ClassNotFoundException
                || e instanceof NoSuchMethodException
                || e instanceof SecurityException
                || e instanceof UnsupportedEncodingException
                || e instanceof NoSuchAlgorithmException
                || e instanceof InterruptedException) {
            return false;
        } else {
            throw e;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:43:38.843

我认为没有完全明确的答案。在你的情况下，我会这样编码：

```
public static boolean isNonsense1(String className) {
    if(slassname==null) throw new IllegalArgumentException("className must not be null");
    try {
        Class.forName(className);
        String.class.getConstructor(String.class);
        className.getBytes("UTF-8");
        MessageDigest.getInstance("SHA-1").wait();
        return true;
    } catch (ClassNotFoundException e) {
        throw new IllegalArgumentException("provided class " + className + " not found");
    } catch (Exception e) {
        return false;
    }
} 
```

就我的口味而言，扔 a`NullPointerException`总是不好的，这就是为什么我扔`IllegalArgumentException`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T13:27:32.147

如果您对处理异常不感兴趣（根据最佳实践您应该这样做），请不要为显式捕获而烦恼。能够处理特定异常的全部意义在于使您能够正确处理它们。

# marklogic - 在 Marklogic 中使用 search-api 操作结果集

> ID：10702211
> 
> 赞同：0
> 
> 时间：2012-05-22T12:39:33.500
> 
> 标签：marklogic

我正在使用`search-api`并想知道如何即时操纵搜索结果？我需要这样的东西：

我需要根据一些标准对我的结果集进行排序，如果标准的值为空，那么我应该应用一些任意整数值，这样我就不会得到`xdmp:cast`异常。

请帮忙。

问候阿米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:03:42.893

每次重新排序都需要一个新的 API 调用 -`search:search`或`search:resolve`. 您可以为排序键适当地设置搜索选项。

修复`XDMP-CAST`异常需要修复底层数据类型问题。完整的错误信息是什么？

*编辑*：正如所写，您可以使用这样的东西来处理非整数值。

```
for $each in $x/ArticleSequenceNumber
order by
  if ($each castable as xs:integer) then xs:integer($each)
  else 0
return $each 
```

但是搜索 API 不处理那种事情。搜索 API 是围绕大型数据库设计的，其中搜索结果太大而无法一次全部放入内存中。所以它期望有可用于排序的范围索引。反过来，范围索引取决于是否有干净的输入数据。

`ArticleSequenceNumber`如果要将元素用作搜索 API 的排序键，通常的解决方案是清理元素。当元素为空时，给它一个虚拟值或完全从 XML 中删除它。

但是，[http](http://markmail.org/message/53pn6xioluwxdx4o) ://markmail.org/message/53pn6xioluwxdx4o可能会有所帮助。这里的想法是将值视为字符串而不是数字，但使用数字排序规则对它们进行排序。

```
for $each in $x/ArticleSequenceNumber
order by $each collation "http://marklogic.com/collation//MO"
return $each 
```

您应该能够在搜索约束中指定相同的排序规则。相应的范围索引将是具有相同排序规则的字符串索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T06:10:28.920

尝试使用最少的空（[http://www.w3.org/TR/xquery/#id-orderby-return](http://www.w3.org/TR/xquery/#id-orderby-return)）。那应该可以使您的空值最后显示。

```
for $each in $x/ArticleSequenceNumber
stable order by xs:integer($each) empty least
return $each 
```

如果您在 ArticleSequenceNumber 上放置一个范围索引并在正确的位置进行排序，您将从索引中获得排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:35:20.957

```
xquery version '1.0-ml';
let $x := <root>
<ArticleSequenceNumber/>
<ArticleSequenceNumber>1</ArticleSequenceNumber>
<ArticleSequenceNumber>5</ArticleSequenceNumber>
<ArticleSequenceNumber>10</ArticleSequenceNumber>
<ArticleSequenceNumber>63</ArticleSequenceNumber>
<ArticleSequenceNumber>54</ArticleSequenceNumber>
<ArticleSequenceNumber>19</ArticleSequenceNumber>
<ArticleSequenceNumber>21</ArticleSequenceNumber>
<ArticleSequenceNumber>29</ArticleSequenceNumber>
<ArticleSequenceNumber>11</ArticleSequenceNumber>
</root>
for $each in $x/ArticleSequenceNumber
order by xs:integer($each)
return $each 
```

# configuration - 如何使用 uclibc 编译？

> ID：10702215
> 
> 赞同：0
> 
> 时间：2012-05-22T12:39:43.673
> 
> 标签：configuration, buildroot, uclibc

大家好，我已经安装了 buildroot 工具链，并且能够编译在基于 uClibc 的 chroot 上运行的简单“Hello World”程序。但是，对于使用 ./configure 的程序，我很困惑如何要求它使用基于 uclibc 的工具链，而不是我系统中存在的基于 glibc 的工具链。我的操作系统是 Fedora，它是基于 i386 的机器。我想使用 uClibc 为同一平台编译程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:26:17.313

buildroot 包含包目录，其中有许多示例如何操作

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-05-16T10:00:37.557

只需设置 CC=PATH_TO_BUILDROOT_UCLIBC_GCC 等。

而且你不需要使用 chroot: `xxx/buildrootxxx/output/host/bin/xxxxx-gcc`工作正常，它会在自己的目录中搜索头文件和库（如`xxx/buildrootxxx/output/host/arm-buildroot-linux-uclibcgnueabi/sysroot/usr/*`）

# java - 针对最长公共序列优化代码

> ID：10702217
> 
> 赞同：0
> 
> 时间：2012-05-22T12:39:49.330
> 
> 标签：java, algorithm, optimization

我试图解决[这个实践问题](http://www.codechef.com/problems/D2/)，下面也引用了它。

> 主厨正在为 DirectiPlex 就职派对策划自助餐，并邀请了所有人。在他们进来的路上，每位客人都会拿起一张纸，里面有一个随机数字（这个数字可能会重复）。客人们随后与他们的朋友坐在圆桌旁。厨师现在决定他想玩一个游戏。他让你从你的桌子上随机挑选一个人，让他们大声读出他们的号码。然后，围绕桌子顺时针移动，每个人都会读出他们的号码。目标是找到形成递增子序列的那组数字。所有拥有这些号码的人都将有资格参加幸运抽奖！一位软件开发人员对此前景感到非常兴奋，并希望最大限度地增加有资格参加幸运抽奖的人数。所以，他决定编写一个程序来决定谁应该先读取他们的号码，以最大限度地增加有资格参加幸运抽奖的人数。你能打败他吗？Input 第一行包含 t，测试用例的数量（大约 15 个）。然后是 t 个测试用例。每个测试用例由两行组成：
> 
> 第一行包含一个数字 N，即被邀请参加聚会的客人人数。
> 
> 第二行包含 N 个数字 a1, a2, ...，一个以空格分隔的数字，它们是按顺时针顺序写在纸上的数字。输出 对于每个测试用例，打印一行包含一个数字，该数字是有资格参加幸运抽奖的客人的最大数量。

这是我想出的解决方案

```
// http://www.codechef.com/problems/D2/
import java.io.*;
import java.util.*;

public class D2
{
  public static void main(String [] args)
    throws IOException
  {
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    int numTestCases = Integer.parseInt(br.readLine());
    for(int _t=0; _t<numTestCases; ++_t)
    {
      int N = Integer.parseInt(br.readLine());
      StringTokenizer strtok = new StringTokenizer(br.readLine());
      int [] originalArray = new int[N*2];
      for(int i=0; i<N; ++i)
      {
        //this concatenates the array with itself at the time of reading the input itself
        originalArray[i] = originalArray[N+i] = Integer.parseInt(strtok.nextToken());
      }
      //Now we calculate the length of the longest increasing sequence
      int maxWinners = new LongestIncreasingSequence(originalArray).lengthOfLongestIncreasingSequence();
      System.out.println(maxWinners);
    }
  }
}

class LongestIncreasingSequence
{
  private int [] array;
  private int [] longest;
  private int subsequence_size;
  public LongestIncreasingSequence(int [] A)
  {
    array = A;
    longest = new int[array.length / 2];
    longest[0] = array[0];
    subsequence_size = 1;
  }

  public int lengthOfLongestIncreasingSequence()
  {
    for(int i=1; i<array.length; ++i)
    {
      if(array[i] < longest[0])
      {
        longest[0] = array[i];
      }
      else if(array[i] > longest[subsequence_size - 1])
      {
        longest[subsequence_size++] = array[i];
      }
      else
      {
        //Make the replacement with binary search
        longest[getReplacementIndex(array[i])] = array[i];
      }
    }
    return subsequence_size;
  }

  //Method to find the correct index using binary search
  private int getReplacementIndex(int elem)
  {
    int left, right, mid;
    left = 0; right = subsequence_size - 1;
    while(right - left > 1)
    {
      mid = 1 + (right - left) / 2;
      if(array[mid] >= elem)
      {
        if(mid != right) right = mid;
        else --right;
      }
      else
      {
        left = mid;
      }
    }
    return right;
  }
} 
```

复杂性是`O(n(log(n))`我通过将数组与自身连接来找到最长的递增序列。

但是，这并没有通过时间要求，有人可以帮我加快实现速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:47:39.767

我不会进行`N`旋转，而是一次性确定最长（循环）运行。这当然是可行的，您只需要注意在阵列末端弯曲即可。

# python - Python - 算法查找时隙

> ID：10702224
> 
> 赞同：10
> 
> 时间：2012-05-22T12:40:08.010
> 
> 标签：python, algorithm, datetime

假设今天我从 09:00 工作到 18:00，我有 3 个约会：

*   10:00 - 10:30
*   12:00 - 13:00
*   15:30 - 17:10

我需要找到一天中 1 小时的可用时间段列表。
这是我应该得到的清单

*   09:00 - 10:00
*   10:30 - 11:30
*   13:00 - 14:00
*   14:00 - 15:00

我已经在 php 中实现了它，我只是试图把它放在 python 中。
这是我的尝试：

```
def get_slots(areas, duration):
    slots = []
    for area in areas:
        if area['start'] == area['end']:
            continue
        i = area['start']
        while (i + duration) <= area['end']:
            i += duration
            slots.append({
                'start': (i - duration),
                'end': i,
            })
    return slots

def get_areas(day_start, day_end, appts):
    areas = []
    old_end = day_start
    for appt in appts:
        if appt['start'] > old_end:
            areas.append({
                'start': old_end,
                'end': appt['start'],
            })
        old_end = appt['end']
        if old_end > day_end:
            return areas
    areas.append({
        'start': old_end,
        'end': day_end,
    })
    return areas 
```

测试：

```
>>> day_start = datetime.datetime(2012, 5, 22, 9)
>>> day_end = datetime.datetime(2012, 5, 22, 18)
>>> appts = [{
    'start': datetime.datetime(2012, 5, 22, 10),
    'end': datetime.datetime(2012, 5, 22, 10, 30),
  },{
    'start': datetime.datetime(2012, 5, 22, 12),
    'end': datetime.datetime(2012, 5, 22, 13),
  },{
    'start': datetime.datetime(2012, 5, 22, 15, 30),
    'end': datetime.datetime(2012, 5, 22, 17, 10),
  },]
>>> duration = datetime.timedelta(hours=1)
>>> pprint.pprint(get_slots(get_areas(day_start, day_end, appts), duration)) 
```

它可以工作，但我只是从 php.ini 移植了代码。
所以我不确定这是一种pythonist方式。

你能告诉我哪里可以改进吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-22T13:07:38.150

```
#time_slots.py
from datetime import datetime, timedelta

appointments = [(datetime(2012, 5, 22, 10), datetime(2012, 5, 22, 10, 30)),
                (datetime(2012, 5, 22, 12), datetime(2012, 5, 22, 13)),
                (datetime(2012, 5, 22, 15, 30), datetime(2012, 5, 22, 17, 10))]

hours = (datetime(2012, 5, 22, 9), datetime(2012, 5, 22, 18))

def get_slots(hours, appointments, duration=timedelta(hours=1)):
    slots = sorted([(hours[0], hours[0])] + appointments + [(hours[1], hours[1])])
    for start, end in ((slots[i][1], slots[i+1][0]) for i in range(len(slots)-1)):
        assert start <= end, "Cannot attend all appointments"
        while start + duration <= end:
            print "{:%H:%M} - {:%H:%M}".format(start, start + duration)
            start += duration

if __name__ == "__main__":
    get_slots(hours, appointments)

% python time_slots.py 
09:00 - 10:00
10:30 - 11:30
13:00 - 14:00
14:00 - 15:00 
```

# android - android：用y字节替换文件开头的x字节

> ID：10702230
> 
> 赞同：1
> 
> 时间：2012-05-22T12:40:34.837
> 
> 标签：android, file, replace, random-access

我想用 y 字节替换文件的前 x 字节。也就是说 x 和 y 的长度不同。我尝试复制到新文件。它可以工作，但对于大文件来说很慢。我知道可以使用替换 RANDOMAccessfile 的确切长度。但我无法将它用于我的目的。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:46:42.743

如果`x`和`y`不一样，你别无选择，只能先写`y`，然后再写文件的其余部分，即使你所做的只是将文件的其余部分向上移动`y - x`字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:53:05.303

如果您迫切需要它快速，那么您可以创建一个自己的随机访问接口，由一组不可变文件 + 不可变更改列表支持。如果您的应用程序有一些空闲时间，那么它可以在后台将最后一个不可变提交点 + 更改列表合并到一个新文件中。

变更列表可以很简单

*   先前更改列表/提交点文件的路径
*   要替换的偏移量和长度
*   替换数据

提交点只是一个完整的文件。

# python - 在 Windows 上编译 Python 2.7 安装程序

> ID：10702237
> 
> 赞同：1
> 
> 时间：2012-05-22T12:41:12.857
> 
> 标签：python

我正在尝试在 Windows 上编译 Python 2.7 安装程序。编译工作正常，但是当我尝试运行时

```
PCbuild\python.exe setup.py bdist_wininst 
```

我收到一个错误：

```
error: pyconfig.h: No such file or directory 
```

我该如何解决？

`Pyconfig.h.in`更新：我在根目录中找到了一个名为的文件。将其重新命名为`Pyconfig.h`bdist 后失败并出现以下错误：

```
Traceback (most recent call last):
  File "setup.py", line 2076, in <module>
    main()
  File "setup.py", line 2071, in main
    'Lib/smtpd.py']
  File "Python-2.7.3\lib\distutils\core.py", line 152, in setup
    dist.run_commands()
  File "Python-2.7.3\lib\distutils\dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "Python-2.7.3\Python-2.7.3\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "Python-2.7.3\lib\distutils\command\bdist_wininst.py", line 131, in run
    self.run_command('build')
  File "Python-2.7.3\lib\distutils\cmd.py", line 326, in run_command
    self.distribution.run_command(command)
  File "Python-2.7.3\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "Python-2.7.3\lib\distutils\command\build.py", line 127, in run
    self.run_command(cmd_name)
  File "Python-2.7.3\lib\distutils\cmd.py", line 326, in run_command
    self.distribution.run_command(command)
  File "Python-2.7.3\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "Python-2.7.3\lib\distutils\command\build_ext.py", line 339, in run
    self.build_extensions()
  File "setup.py", line 152, in build_extensions
    missing = self.detect_modules()
  File "setup.py", line 1146, in detect_modules
    for arg in sysconfig.get_config_var("CONFIG_ARGS").split()]
AttributeError: 'NoneType' object has no attribute 'split' 
```

在此先感谢，伊万。

# jsp - 如何更改从 servlet 重定向的 JSP 的 URL

> ID：10702239
> 
> 赞同：1
> 
> 时间：2012-05-22T12:41:19.037
> 
> 标签：jsp, url, tomcat, servlets

我正在使用 eclipse 和 tomcat 服务器开发一个 java web 应用程序。应用程序由 JSP 和 servlet 组成。我已经在 tomcat 服务器上部署了应用程序，并且我正在从域名重定向到这个应用程序。当我转到“mydomain.co.uk”时，它会重定向到 URL 为“server:port/app_name”的应用程序。我不希望人们看到 serverIP 和端口。如何显示不同的 URL 而不是“server:port/app_name”。或者无论如何都要使每个 JSP 的 URL 保持不变。应用程序应该像现在一样工作，但应该显示不同的 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:55:30.457

如果协议是http://且端口号不是“80”，那么必须在URL中显示端口（https://和443端口也是如此）。如果您不想 /app_name 在您的 URL 中，那么您必须将您的 webapp 重命名为 ROOT（或 ROOT.war，如果您使用的是 WAR 文件），或者在前面有一个可以重写 URL 的反向代理. 如果您使用反向代理，则需要正确配置它和 Tomcat，以便两者都能生成正确的面向外部的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:13:35.270

这是我们用于政府系统的大型项目的解决方案，您使用 iframe 标签

像这个例子

```
<tr>
     <td rowspan=2> &nbsp;</td>
    <td id="Page_layout_middle">
    <iframe id="content_frame" name="content_frame" src="${pageContext.request.contextPath}/showPage/Main.jsp" frameborder="0"></iframe>
    </td>
    <td rowspan=2>&nbsp;</td>

</tr> 
```

并有一个菜单来选择您想要的屏幕，它将包含在 iframe 中，并且 url 仍然没有改变什么

```
http://servername:5100/appName/showPage/Main.jsp 
```

它看起来像页内页！

它使它更快，因此图像、徽标、css、页眉和页脚只加载一次

# actionscript-3 - AIR 应用程序中的奇怪崩溃

> ID：10702242
> 
> 赞同：0
> 
> 时间：2012-05-22T12:41:31.327
> 
> 标签：actionscript-3, apache-flex, air, flash

我的崩溃仅发生在已安装的应用程序中 我无法在 IDE 中将其设为 cvrash（Flash Builder 调试或运行选项）

经过长时间的注释和取消注释代码，我发现了问题，我在下面发布代码

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx"
                       xmlns:ns="generic_components.*"
                       creationComplete="windowedapplication1_creationCompleteHandler(event)">
    <fx:Script>
        <![CDATA[
            //import core.Logger;

            import mx.controls.Alert;
            import mx.events.FlexEvent;

            import spark.events.TextOperationEvent;

            protected function windowedapplication1_creationCompleteHandler(event:FlexEvent):void
            {
                //Logger.init();
            }
            public static function humanFromCamelCase(txt:String):String{

                var res:String=txt.charAt(0);
                //Logger.write("camel case for "+txt);
                for (var i:int=1;i<txt.length;i++) 
                {
                    //  Logger.write("camel iter "+i);
                    var c:String=txt.charAt(i);
                    //Logger.write("camel char is "+c);
                    if(c==c.toUpperCase())
                    {
                        res=res+" "+c;  
                    }
                    else
                        res=res+c;
                }

                return res;
            }

            protected function test_clickHandler(event:Event):void
            {
                Alert.show(humanFromCamelCase("CompanyId"));

            }

        ]]>
    </fx:Script>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <s:layout>
        <s:VerticalLayout />
    </s:layout>
    <s:Button id="test" label="TEST" click="test_clickHandler(event)"/>

</s:WindowedApplication> 
```

另请参阅此处的网络示例[http://ploscariu.com/crash/TestWeb.html](http://ploscariu.com/crash/TestWeb.html) （将来可能不存在）

这次崩溃有什么奇怪的：1 我不知道会发生什么

2 播放器中通常的崩溃处理程序不显示

3 在开发环境IDE中不崩溃

4 如果我取消注释那些 Logger.write 那么代码在我的机器上工作正常（它不能在所有机器上工作），Logger.write 将 sting 写入文件并放置在另一个项目 swf 中（我没有包括记录器代码）我，假设对 Logger.write 的调用会导致延迟或类似的事情

我的代码有问题还是播放器有问题？还是编译器？？有任何想法吗？

编辑：-不是我使用的记录器，因为当我没有像在示例代码或页面中那样使用它时会发生错误，没有记录它崩溃的应用程序

-我没有从 Flash 中得到带有崩溃报告的对话框

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:01:49.870

这太不可思议了！！！！我不知道为什么会发生这种情况（还）......但我有一个解决方法：

而不是`res=res+c`，使用`res+=c`：

```
public static function humanFromCamelCase(txt:String):String{

    var res:String=txt.charAt(0);
    for (var i:int=1;i<txt.length;i++) 
    {
        var c:String=txt.charAt(i);
        if(c === c.toUpperCase())
        {
            res += " " + c;  
        }
        else
            res += c;
    }

    return res;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T16:04:13.303

我不知道你为什么会出错，但是，我会用这个替换函数：

```
public static function humanFromCamelCase(txt:String):String{
    return txt.replace(/([A-Z])/g, ' $1').replace(/^ /, "");
} 
```

没有测试过，但你明白了。这是一种更简单、更快捷的方法。

我还想到了另一种方式：

```
public static function humanFromCamelCase(txt:String):String{
    return txt.split(/(?=[A-Z])/).join(' ');
} 
```

# c - 在 Windows7 64 位中使用 DosBox 在 Turbo C 中重复运行相同程序时出错

> ID：10702245
> 
> 赞同：0
> 
> 时间：2012-05-22T12:41:39.763
> 
> 标签：c, windows-7, turbo-c, turbo-c++, dosbox

我正在尝试在我的 Windows 7 64 位中使用 Turbo C 和 DosBox (DosBox 0.74)。

该程序在第一次运行时运行良好。它编译成功，没有错误，也可以完美执行。

当我尝试重复运行相同的程序时，程序似乎会产生奇怪的输出。因此，虽然它仍然可以成功编译，但现在可以完美运行的同一个程序会产生错误输出。

以下是根据顶点数将多边形顶点放置在空间中的程序。在它的第一次运行中，它会产生完全预期的输出，但当我重复它时，它会产生完全错误的输出。顶点放置在完全随机的位置。

我怀疑这是否与记忆有关。当我尝试使用不同的模拟器时，也会重复类似的错误！

更新 1：我刚刚尝试使用 Mac OSX，但同样的错误正在重复。

```
#include<stdio.h>
#include<conio.h>
#include<graphics.h>
#include<math.h>

int main()
{
    int gd=DETECT,gm,count,i,x[100],y[100],r=100;
    initgraph(&gd,&gm,"c:\\tc\\");
    printf("Enter the number of cordinates:");
    scanf("%d",&count);
    printf("Entered count :%d",count);
    for(i=0;i<count;i++)
    {
        x[i]=r*cos(2*3.14*(i+1)/count)+200;
        y[i]=r*sin(2*3.14*(i+1)/count)+200;
        circle(x[i],y[i],5);
    }
    getch();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-09T07:15:19.907

更改文件 dosbox-0.74.conf 中的一项配置

从核心=自动

核心=正常

再重新打开dosbox，测试一下你的程序，肯定能准确运行！完毕！

# javascript - 在 document.write 之后 JavaScript 不起作用

> ID：10702247
> 
> 赞同：0
> 
> 时间：2012-05-22T12:41:43.673
> 
> 标签：javascript, jquery, ajax, document.write

我正在使用 jQuery BlockUI 打开一个新网页，由于使用以下 javascript 进行大量数据库查询，该网页需要一些时间：

```
function productSheet(url2) {
       $.blockUI.defaults.overlayCSS = {};
        $.blockUI({ });
        $.ajax({
            url: url2,
            success: function (respones) {
                var win = window.open();
                with (win.document) {
                    open();
                    write(respones);
                    close();
                }
            }
        });
    }; 
```

在新页面上，我得到了一些 jQuery JavaScript 和对外部 jQuery 脚本的引用。但是，当我在 JavaScript 之后渲染页面时，我的脚本会抛出错误：“$ undefined”。我可以刷新页面，一切都开始工作了，我没有收到任何脚本错误。

仅当我在 IE 9 中调试时才会出现此问题，在 Firefox 上一切正常（没有 JavaScript 错误并且脚本有效）。

有谁知道问题可能是什么？

编辑：

页面 iam 呈现是 MVC 3 视图。因此，上面的脚本转到返回此视图的 MVC 操作：

```
@model WebApplication.Controllers.ProductSheetModel
<!DOCTYPE html>
<html>
<head>

<title>Sheet - @Model.ArticleMain.ArticleMain.T0018_BENAM</title>

    <script src="../../js/jquery-1.3.2-vsdoc2.js" type="text/javascript"></script>
    <link href="../../css/ProductSheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="wrapper">
    @if (Model.IsPDFExport == false)
    { 
        @Html.DisplayFor(model => model.ArticleMain, "ProductSheetHeader")
    }
    ... some more partical views...
</div>
</body>
</html>
<script type="text/javascript">
$(document).ready(function () {
    var tabelheight1 = $("#divNutritiveValues").height();
    var tabelheight2 = $("#divMarking").height();
    if (tabelheight1 > tabelheight2) {
        $("#divMarking").css("height", tabelheight1 + "px");
        $("#divNutritiveValues").css("height", tabelheight1 + "px");
    }
    if (tabelheight2 > tabelheight1) {
        $("#divNutritiveValues").css("height", tabelheight2 + "px");
        $("#divMarking").css("height", tabelheight2 + "px");
    }

    var tableheightStore = $("#divStore").height();
    var tableheightCooking = $("#divCooking").height();
    if (tableheightCooking > tableheightStore) {
        $("#divCooking").css("height", tableheightCooking + "px");
        $("#divStore").css("height", tableheightCooking + "px");
    }
    if (tableheightStore > tableheightCooking) {
        $("#divCooking").css("height", tableheightStore + "px");
        $("#divStore").css("height", tableheightStore + "px");
    }

    var tableInfoProvid = $("#divInformationProvider").height();
    var tableManufac = $("#divManufacturer").height()
    if (tableInfoProvid > tableManufac) {
        $("#divManufacturer").css("height", tableInfoProvid + "px");
        $("#divInformationProvider").css("height", tableInfoProvid + "px");
    }
    if (tableManufac > tableInfoProvid) {
        $("#divInformationProvider").css("height", tableManufac + "px");
        $("#divManufacturer").css("height", tableManufac + "px");
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:50:48.263

问题是 $ 在您的 IE 页面上未定义。

通常，jQuery 将 $ 设置为对`jQuery`对象的引用。[请参阅文档](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)。

出于某种原因，$ 引用被删除或没有在 IE 上发生。您可以发布更多代码吗？

一种解决方法是使用`jQuery`而不是`$`

但是最好更好地了解 IE 上实际发生的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:35:35.427

我相信这是因为您的 AJAX 帖子没有发生您的 JavaScript 注册，这意味着它们会丢失并且不会重新注册。

这是使用 AJAX 时的常见问题，[本文](http://www.codeproject.com/Articles/32392/Adding-JavaScript-and-CSS-during-an-AJAX-Partial-P)完美地解释了它并提供了您所需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:15:26.523

我想出了一个解决方案，并想与您分享。在我的站点中，我创建了一个脚本来检查 jquery 是否未定义。

```
if (typeof jQuery == 'undefined') {
      window.location.reload();
 } 
```

在我再次重新加载页面后，我的所有脚本都可以正常工作，也许不是最好的解决方案，但它可以工作，所以我很高兴。

# sharepoint - 迁移后出现 TFS 错误 - Sharepoint 中报告站点上的 TF250016

> ID：10702252
> 
> 赞同：0
> 
> 时间：2012-05-22T12:42:06.370
> 
> 标签：sharepoint, tfs, migration, report

大家好，

我们最近从 TFS2008 迁移到了 TFS2010。我们迁移了 TFS_name 数据库和 WSS 数据库。我们遵循了迁移步骤，我们的升级是成功的，除了一个关于项目站点的部分。

每当我进入团队项目门户时，在尝试访问“报告”站点时都会收到以下错误。

`TF250016: No access rights have been granted for the following site: http://<tfsserver>/Sites/<project portal site>. You must grant access rights between the SharePoint Web application and Team Foundation Server. You must also associate this site with reports and dashboards for a specific project in Team Foundation Server. For more information, see the Microsoft Web site (http://go.microsoft.com/fwlink/?LinkId=147580).`

我已经完成了 TFS 升级步骤，并确保我们遵循了每一步，并且我们正在运行想法。谁能指出我正确的方向？我们没有注意到这个错误，因为我们目前没有使用报告，但这是我们希望在未来实现的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:00:02.977

**编辑**

（在评论中阅读）

您从一台服务器移动到另一台服务器并升级了 TFS 服务器。很可能您没有遵循“[如何将 TFS 从一个硬件配置移动到另一个](http://msdn.microsoft.com/en-us/library/ms404869.aspx)”过程，然后您的 SQL 报表服务器已关闭或配置不正确（数据源配置中的 SQL 连接字符串不正确）。

按照我给你的 SQS 服务器报告服务部分的过程，你应该没问题。

# javascript - 按下后退按钮时，Javascript 更改为 dom 丢失

> ID：10702254
> 
> 赞同：6
> 
> 时间：2012-05-22T12:42:13.060
> 
> 标签：javascript, dom, back-button

我有这个视图可以更改 div 内的文本。

然后用户可以点击一个链接跳转到另一个页面。但是当用户按下“返回”按钮时，所有 DOM 更改都将丢失。

FF 会记住更改后的 div 文本，但 Chrome 和 IE 不会。

我发现了类似的问题，但在我的情况下，不可能通过 url 哈希来总结状态，因为 div 包含随机数据。

我需要的是，当用户返回时，div 由相同的数字系列填充。

```
<script type="text/javascript">
    function ChangeText() {
        var newText = "";

        for (var i = 0; i < 10; i++) {
            newText = newText + Math.random() * 100;
            newText = newText + "<br />";
        }

        $("#container").html(newText);
    }
</script>

<div id="container">
    INITIAL TEXT
</div>
<button onclick="ChangeText()">Click here to generate random numbers</button>
<br/>
<a href="http://www.google.com">External link</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-11-24T16:14:10.237

您可以将 html 存储在 LocalStorage 中，因此当用户返回时，您可以使用 localStorage 填充内容：

```
<script type="text/javascript">
    function onLoadPage(){
        if(window.localStorage.getItem("newText") != null){
            $("#container").html(window.localStorage.getItem("newText"));
        }
    }

    function ChangeText() {
        var newText = "";

        for (var i = 0; i < 10; i++) {
            newText = newText + Math.random() * 100;
            newText = newText + "<br />";
        }

        window.localStorage.setItem("newText") = newText;

        $("#container").html(newText);
    }
</script>

<div id="container">
    INITIAL TEXT
</div>
<button onclick="ChangeText()">Click here to generate random numbers</button>
<br/>
<a href="http://www.google.com">External link</a> 
```

# java - 具有覆盖等于和 hashCode 的 HashMap 不起作用

> ID：10702259
> 
> 赞同：4
> 
> 时间：2012-05-22T12:42:36.193
> 
> 标签：java, hashmap

对不起......关于这个愚蠢/愚蠢的问题，伙计们：

为什么不`equals()`被`hashCode()`应用？

目前他们只按照我的预期工作`HashSet`。

**更新**

EVEN 键值 5 重复但它不调用 equals 和 hashCode。

我也想把它应用到价值上。

就像在这个例子中 HashSet 调用 equal 和 hashCode 一样，为什么 hashMap 不被称为 equals 和 hashCode 即使是 key。

**更新2 - 答案**

HashMap 的 key(class->HashCode, equals) 将被调用。谢谢你们。我对此有点困惑。:)

```
 public class Employee {

        int id;
        String name; 
        int phone;

        public Employee(int id, String name, int phone) {
            this.id = id;
            this.name = name;
            this.phone = phone;
        }    
    // Getter Setter

        @Override
        public boolean equals(Object obj) {

            if (obj == null) {
                return false;
            }
            if (getClass() != obj.getClass()) {
                return false;
            }
            final Employee other = (Employee) obj;
            System.out.println("Employee -  equals" + other.getPhone());
            if (this.id != other.id) {
                return false;
            }
            if ((this.name == null) ? (other.name != null) : !this.name.equals(other.name)) {
                return false;
            }
            if (this.phone != other.phone) {
                return false;
            }
            return true;
        }

        @Override
        public int hashCode() {
            System.out.println("Employee -  hashCode" );
            int hash = 3;
            hash = 67 * hash + this.id;
            hash = 67 * hash + (this.name != null ? this.name.hashCode() : 0);
            hash = 67 * hash + this.phone;
            return hash;
        }
    }

____________________________________________________________________________________

public class MapClass {

    public static void main(String[] args) {
        Map<Integer,Employee> map = new HashMap<Integer,Employee>();
        map.put(1, new Employee(1, "emp", 981));
        map.put(2, new Employee(2, "emp2", 982));
        map.put(3, new Employee(3, "emp3", 983));
        map.put(4, new Employee(4, "emp4", 984));
        map.put(5, new Employee(4, "emp4", 984));
       **//UPDATE**
        map.put(5, new Employee(4, "emp4", 984));            

        System.out.println("Finish Map" + map.size());
        Set<Employee> set = new HashSet<Employee>();

        set.add(new Employee(1, "emp", 981));
        set.add(new Employee(2, "emp2", 982));
        set.add(new Employee(2, "emp2", 982));
        set.add(new Employee(3, "emp3", 983));
        set.add(new Employee(4, "emp4", 984));
        set.add(new Employee(4, "emp4", 984));

        System.out.println(set.size());
    }
} 
```

输出是

```
Finish Map5
Employee -  hashCode
Employee -  hashCode
Employee -  hashCode
Employee -  equals982
Employee -  equals982
Employee -  hashCode
Employee -  hashCode
Employee -  hashCode
Employee -  equals984
Employee -  equals984
4 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T12:59:38.840

> EVEN 键值 5 重复但不调用 equals 和 hashCode

是的，它确实在键上调用了 hashCode，即 Integer。

> 我也想把它应用到价值上

现实的剂量：Java HashMaps 不是那样工作的。他们只检查键的重复项，而不是值，这是应该的。

如果您希望在 Map 中检查 Employee 的哈希，那么它*必须*是键。时期。

另一种可能的解决方案是下载一个可用的多图。

**编辑** 以查看它正在调用 hashCode 和 equals，将 Map 的键类型更改为如下所示：

```
class MyInt {
   private Integer i;

   public MyInt(Integer i) {
      this.i = i;
   }

   public Integer getI() {
      return i;
   }

   @Override
   public int hashCode() {
      System.out.println("MyInt HashCode: " + i.hashCode());
     return i.hashCode();
   }

   @Override
   public boolean equals(Object obj) {
      System.out.printf("MyInt equals: [%s, %s]%n", i, obj);
      if (this == obj)
         return true;
      if (obj == null)
         return false;
      if (getClass() != obj.getClass())
         return false;
      MyInt other = (MyInt) obj;
      if (i == null) {
         if (other.i != null)
            return false;
      } else if (!i.equals(other.i))
         return false;
      return true;
   }

   @Override
   public String toString() {
      return i.toString();
   }

} 
```

然后像这样填写您的地图：

```
 Map<MyInt,Employee> map = new HashMap<MyInt,Employee>();
   map.put(new MyInt(1), new Employee(1, "emp", 981));
   map.put(new MyInt(2), new Employee(2, "emp2", 982));
   map.put(new MyInt(3), new Employee(3, "emp3", 983));
   map.put(new MyInt(4), new Employee(4, "emp4", 984));
   map.put(new MyInt(5), new Employee(4, "emp4", 984));
   map.put(new MyInt(5), new Employee(4, "emp4", 984)); 
```

你会看到：

```
MyInt HashCode: 1
MyInt HashCode: 2
MyInt HashCode: 3
MyInt HashCode: 4
MyInt HashCode: 5
MyInt HashCode: 5
MyInt equals: [5, 5] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T12:48:36.280

HashMap 使用键值的equals/hashCode（在您的情况下为整数）。我想这就是你要问的，对吧？

您的地图中有重复项的原因是您为同一员工使用了新密钥。

```
 map.put(4, new Employee(4, "emp4", 345));
  map.put(5, new Employee(4, "emp4", 345));  // You are using 5 as the key
                                             // for the "same" object you did 
                                             // in the previous line 
```

如果你做了类似的事情

```
 // in main
  addEmployee(new Employee(4, "emp4", 345));
  addEmployee(new Employee(4, "emp4", 345));

  private void addEmployee(Employee e)
  {
     map.put(e.getId(), e);
  } 
```

那么您将不会在您的收藏中看到任何重复项。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T12:48:48.940

HashMap 使用键作为索引，而不是值。（那是 hashCode()，也许 equals() 会在上面代码中的 Integer 类上被调用）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T12:50:45.110

您正在使用 a `HashMap<Integer, Employee>`，看起来像，所以`Integer`s 将被散列。由于键是`1,2,3,4,5`，因此您的大小`HashMap`应该是 5。

# web-services - 从其他机器调用 jboss web 服务

> ID：10702264
> 
> 赞同：0
> 
> 时间：2012-05-22T12:43:13.183
> 
> 标签：web-services, jboss5.x, soapui

我创建了一个合同最后的网络服务，它部署在我的 VDI 机器上的 Jboss AS 上。我可以从 localhost 很好地获取 WSDL，但是如果我尝试从我的笔记本电脑或任何其他机器调用 web 服务，我根本无法连接到它。

我正在使用 SoapUI 进行测试，当我调用它时我只是得到一个 NullPointerException，如果我尝试通过浏览器获取 WSDL，它就会超时。

我尝试使用侦听器来查看是否可以从其他机器连接到 VDI，并且可以正常工作。

有什么建议我可以尝试吗？- 我认为它可能是一些 Jboss AS 属性文件中的一些属性设置，但我发现的唯一东西是“jboss.bind.name”，它设置为“0.0.0.0”，应该允许其他机器连接到网络服务，但没有运气：/

希尔夫？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:07:57.977

解决方案是在我的启动脚本中添加“-b 0.0.0.0”

# visual-studio-2010 - 如何在源代码控制下使用 VS 解决方案中的程序集并保持程序集更新？

> ID：10702269
> 
> 赞同：0
> 
> 时间：2012-05-22T12:43:25.480
> 
> 标签：visual-studio-2010, assemblies

（我不再想要答案了。OML，我的英语肯定进步了……）

如何在源代码控制下使用 VS 解决方案中的程序集并保持程序集更新？（源代码控制由 codeplex 和 VS 默认选项提供。）我的意思是，我有一个名为 HyperAero 的项目。我有另一个名为 TestAnimation 的项目。TestAnimation 受源代码控制，需要 hyperaero。当我签入时，HyperAero.DLL 不会保存在服务器中。当然，我可以将 hyperaero.dll 作为文件添加到我的解决方案中，但我希望它自动更新我在 HyperAero 项目中的更改。我该怎么办？答案（自己搞定）：命令：robocopy "E:\Documents\My VS\Fix soft HyperAero Form\Fix soft HyperAero\bin\Release" "E:\Documents\My VS\Fix soft Animation Maker\Test of Animation Maker \DLLs" "*.DLL" set rce=%errorlevel% if not %rce%==1 exit %rce% else exit 0

类似问题（请记住，我希望我的程序集保持更新）：在 Visual Studio 项目中使用自定义程序集时。如何在项目的源代码控制中签入这些程序集，以便任何人都可以下载项目并立即构建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:13:12.020

有两种方法可以解决这个问题：

1/ 不要将程序集依赖项放在源代码管理中，而是始终将其 Visual Studio 项目包含在您的解决方案中。在您的情况下，您将拥有 Hyperaero 项目和 TestAnimation 项目的解决方案，该**项目依赖**于 Hyperaero 项目。

这样，您不必将生成的 DLL 放在源代码管理中，并在每次更改代码中的内容时保持更新。

2/如果你真的想分离这两个项目，那么我建议你使用 Nuget 并为 Hyperaero 项目构建一个 Nuget 包，然后在你的 TestAnimation 项目中引用 Nuget 包。这种方法是最干净的方法，但它可能是矫枉过正，最后它不是你会快速设置的东西（与 1/ 相比）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:48:13.847

1.  将两个项目放在同一个解决方案中并添加项目引用。

2.  使用源代码管理的 UI/命令行添加 DLL 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T12:52:41.560

你用什么源代码控制软件？

如果您正在使用`subversion`：

*   ankhsvn（Visual Studio 插件）可以在一个解决方案中处理多个存储库。

我有以下结构。

```
- App1\
  App1.sln
  App1Forms\
    App1Forms.csprj
- App2\
  App2Dll\
    App2Dll.csprj 
```

现在，如果我打开 App1.sln 并将文件夹结构之外的 App2Dll 添加为项目，则该项目将作为相对路径链接。我很好，如果我将两个源都检出到同一个父目录。

Ankh 意识到了这一点，如果我同时点击`update`这两个项目，就会得到更新。如果我想提交更改，我一次只能提交一个存储库，但同样，ankh 会通知我。

另一种方法是使用 svn-externals [http://svnbook.red-bean.com/en/1.0/ch07s03.html](http://svnbook.red-bean.com/en/1.0/ch07s03.html) 它将透明地包含一个存储库中的另一个。

# javascript - 在隐藏的输入类型中显示 javascript 数组值

> ID：10702270
> 
> 赞同：0
> 
> 时间：2012-05-22T12:43:29.110
> 
> 标签：javascript, arrays

我有一个关于 Javascript 数组的问题。

我有以下 javascript 数组：

```
var startTimeList= new Array(); 
```

我已经在其中添加了一些值。现在我有以下输入（隐藏类型）：

```
 <input type="hidden" value"startTimeList[0]" name="startTime1" /> 
```

但是，这显然是不正确的，因为在输入隐藏类型中无法识别 javascript 数组。所以我什至不能得到一个值。

有谁知道我如何从 javascript 数组中获取输入类型的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:46:46.330

您需要在 Javascript 中设置值：

```
document.getElementById(...).value = startTimeList[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:47:00.433

用这个 ：

```
<script>
window.onload = function() {
    document.getElementsByName("startTime1")[0].value = startTimeList[0];
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T12:47:08.123

您需要通过 JavaScript 本身设置该值。

```
document.getElementById("startTime1").value = startTimeList[0]; 
```

或 jQuery

```
$("#startTime1").val(startTimeList[0]); 
```

将“startTime1”分配为上面的 id。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T12:47:36.860

您可以通过名称找到您的元素：

```
document.getElementsByName(name)[index].value = 'new value'; 
```

**或者**

您应该识别您的元素，然后更改值；

1.  例如，给你的元素一个**ID**`id="ex"`
2.  使用 JavaScript 获取元素（当然，一旦 DOM 准备好了）`var element = document.getElementById('ex')`
3.  更改值`element.value = 'your value';`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T13:00:01.043

您需要将数组拆分为分隔字符串，然后将该字符串分配给隐藏输入的值。

然后，在回发或类似事件中，您希望将值解析回数组以在 JavaScript 中使用：

```
var startTimeList = [1,2,3,4,5];
var splitList = '';
for(var i = 0;  i < startTimeList.length; i++)
{
    splitList += startTimeList[i] + '|';
} 
```

又回来了：

```
var splitList = '2|4|6|8|';
var startTimeList = splitList.split('|'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T12:45:52.703

您必须从 javascript 设置值。类似 document.getElementById (ID).value = startTimeList[0];

您从 body oload 事件执行 javascript。

# unix - 从另一个终端向终端发送命令

> ID：10702275
> 
> 赞同：0
> 
> 时间：2012-05-22T12:43:43.290
> 
> 标签：unix, process, system, stdin, pipe

假设您有一个终端（T1）以 6350 pid 打开。

类型 ：

```
echo "ls\n" > /proc/6350/fd/0 (writen in another terminal (T2)). 
```

这会在 T1 中写入 ls 和行跳转但不执行它？为什么 ？

我也尝试过使用

```
cat|bash with echo "ls\n" > /proc/catPID/fd/0 
```

但它仍然没有执行。

任何想法 ？

谢谢，

编辑：

一种可能的技巧：

```
mkfifo toto

$bash < toto

$echo "ls" > toto 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:35:25.453

首先，如果你想`echo`解释`\n`为换行符，你必须用`-e`.

其次，您想要的（劫持终端）不是（容易）可行的，请参阅[unix.stackexchange](https://unix.stackexchange.com/questions/17838/how-can-i-switch-between-ttys-without-using-screen)。我会`screen`在两个会话中使用（一个带有 -x 选项）。

# operating-system - 哪个进程进入等待队列

> ID：10702279
> 
> 赞同：1
> 
> 时间：2012-05-22T12:44:12.633
> 
> 标签：operating-system, queue, semaphore

假设我们使用信号量来提供互斥，并且一个进程正在关键部分执行。然后另一个进程来使用临界区，它会被放入等待队列吗？

我怀疑哪个进程将此进程放入等待队列？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T03:11:38.993

在典型的操作系统中，这是由内核而不是进程处理的。内核跟踪存在哪些关键区域以及哪些进程正在占用它们。同样在典型的操作系统中，调度程序也是内核的一部分，因此调度程序会将进程置于等待状态（或者更准确地说更可能是阻塞状态）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:13:05.573

当线程/进程/任务请求互斥对象时，它会对处理互斥对象的内核进行*系统调用。*如果此时此对象不可用，则内核将此线程/进程/任务放入等待/阻塞队列并选择另一个。

# c++ - 像windows 7的标题栏一样的窗口背景

> ID：10702286
> 
> 赞同：0
> 
> 时间：2012-05-22T12:44:57.027
> 
> 标签：c++, windows, winapi, windows-7

> **可能重复：**
> [如何将 Windows 窗体应用程序 (C++) 设置为具有 Aero/Glass 背景？](https://stackoverflow.com/questions/6785733/how-to-set-windows-forms-application-c-to-have-an-aero-glass-background)

我想在 Windows 7 中使用带有 C++ 的 WinApis 创建一个透明窗口，并且我使用 VS2010，但我知道如何使其透明，我可以这样做：

```
 SetWindowLong(hWnd, GWL_EXSTYLE,GetWindowLong(hWnd, GWL_EXSTYLE) | WS_EX_LAYERED);
    SetLayeredWindowAttributes(hWnd, 0, (255 * 70) / 100, LWA_ALPHA); 
```

但我想要一个透明窗口，其标题栏具有 Windows 7 普通窗口的透明度

[示例 http://ril.site11.com/photos/879ec4dfeaa4.png](http://ril.site11.com/photos/879ec4dfeaa4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:16:39.267

这个网页有一个很棒的教程： http: [//www.codeproject.com/Articles/15770/Vista-Goodies-in-C-Using-Glass-in-Your-UI](http://www.codeproject.com/Articles/15770/Vista-Goodies-in-C-Using-Glass-in-Your-UI)

它向您展示了如何使窗口的某个部分透明，如何将文本添加到透明部分等等。

# java - 在用户会话中保存数据在用户之间共享

> ID：10702290
> 
> 赞同：1
> 
> 时间：2012-05-22T12:45:21.307
> 
> 标签：java, jakarta-ee, tomcat, glassfish

我有一个带有以下代码的jsp文件

```
String name=request.getParameter("user");
  if(name==null)
    name=(String)request.getSession().getAttribute("name");
  else
    request.getSession().setAttribute("name", name); 
```

我假设如果页面获取任何以用户为参数的请求，它将将该值保存到该特定用户会话，并且如果获取请求没有任何“用户”参数，它将尝试从会话中读取用户值。当我从本地服务器（glassfish）托管代码时，代码运行良好。但是当我将它上传到某个远程主机时，事情变得很奇怪。当我用参数“用户”点击页面时，它会在会话中保存值。但是，如果我从其他浏览器（或清除 cookie 后）访问该页面，它会检索保存的先前值，而不是返回 null 我做错了什么，实际上我对 Java EE 很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:03:25.433

You cannot get previous value saved unless 1) Your session is not finished and same session is getting extended. Can you explain how you are clearing the cookies. 2) Are you typing the URL or trying to refresh the page after deleting the cookies.

# jquery - 如何使用 jQuery 添加类？

> ID：10702291
> 
> 赞同：7
> 
> 时间：2012-05-22T12:45:23.120
> 
> 标签：jquery, css

`<li>`我做了一个小函数，当我们点击 < 时，它的工作是添加类`li>`，但如果它已经有，我想删除它`<li>`。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="generator" content="CoffeeCup HTML Editor (www.coffeecup.com)">
    <meta name="created" content="Tue, 22 May 2012 12:39:23 GMT">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <title></title>

    <style type="text/css">
    <!--
    body {
      color:#000000;
      background-color:#FFFFFF;
    }
    a  { color:#0000FF; }
    a:visited { color:#800080; }
    a:hover { color:#008000; }
    a:active { color:#FF0000; }
    -->
    </style>

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>

    <script type="text/javascript">

    $(function(){

    $('.main').find('li').each(function(){

    $(this).live('click', function (){

    $(this).addClass('active')

    })

    })

    })

    </script>

  </head>
  <body>

  <ul class="main">
  <li>first</li>

  <li>second</li>
    <li>third</li>
      <li>fourth</li>  

  </ul>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-22T12:47:45.463

您可以使用`toggleClass`它将根据需要添加或删除它

```
$('.main li').live('click',function(){
  $(this).toggleClass('active');
}); 
```

如果你想从其他地方删除这个类，你可以添加一个额外的行：

```
$('.main li').live('click',function(){
  $('.main li.active').removeClass('active')
  $(this).addClass('active');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:47:34.457

使用 jquery 函数`.toggleClass`。

```
$('.main li').click( function(){
  $(this).toggleClass('active');
}); 
```

那应该可以解决问题；) [http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-03-04T07:54:48.743

更好的是我们可以使用 . **on()**或**.delgate()**方法：

**不再推荐使用** **.live()** **方法，因为更高版本的 jQuery 提供了没有缺点的更好方法。特别是，使用** **.live()**会出现以下问题：

[https://api.jquery.com/live/](https://api.jquery.com/live/)

```
$('#showDiv').on('click',function(){
  $(this).toggleClass('active');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-03T10:32:01.717

这将工作尝试...

```
$("#button").click(function(){

 $(".addclass").addClass("add");

})

$("#button2").click(function(){

 $(".addclass").removeClass("add");

})
```

```
.add{
color:red;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<p class="addclass">Sample text to add class on it</p>
<button id="button">Add Class</button>
<button id="button2">Remove Class</button>
```

# struts2 - org.apache.struts2.dispatcher.filterdispatcher 不允许链中的其他过滤器被触发？

> ID：10702292
> 
> 赞同：0
> 
> 时间：2012-05-22T12:45:25.787
> 
> 标签：struts2

我正在使用struts 2。在我`web.xml`的配置中，

```
 <filter>
        <description>filter for application</description>
        <display-name>AppBasicFilter</display-name>
        <filter-name>AppBasicFilter</filter-name>
        <filter-class>com.myapp.AppBasicFilter</filter-class>
    </filter>
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>AppBasicFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

对于此配置，我正在正确触发我的操作类。但是无论是在动作类执行之前还是之后，我`AppBasicFilter`都没有被触发。

我试图反编译并查看 struts 2 FilterDispatcher 编码，我看到如果存在映射，则它不会`FilterChain.doFilter()`在其中执行。

这个问题就是因为这个。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:27:14.893

我开始知道这是 FilterDispatcher 的问题。因此，我必须使用 struts 2.1 或更高版本中可用的 StritsPrepareAndExecuteFilter。但不幸的是，我的项目使用的是 struts 2.0。所以我迁移到 struts 2.1 并使它工作。

# ssis - 从命令行执行时出现 SSIS 错误

> ID：10702294
> 
> 赞同：0
> 
> 时间：2012-05-22T12:45:28.953
> 
> 标签：ssis

我有一个小型 SSIS 包，可将数据从 SQL Server 2008 导出到 excel 文件。该包在我们的开发环境中运行良好，当包移动到我们的另一个环境时，我们在命令行执行时收到以下错误。包运行一段时间，然后给出以下错误

```
Error: 2012-05-21 18:34:01.61
   Code: 0xC000F427
   Source: Create Summary From Detail SSIS.Pipeline
   Description: To run a SSIS package outside of Business Intelligence 
   Development Studio you must install Standard Edition of Integration Services 
   or higher.
End Error 
```

之前导出到此环境的其他 SSIS 包现在可以正常工作。只有这个包会抛出这个错误，我的意思是我们在这个环境中安装了 SSIS。

有人可以让我知道这可能是什么原因吗？如果您需要更多信息，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:28:41.393

您的计算机上安装了哪个版本的 SQL Server？您至少需要 SQL Server 2005 标准版。如果您正在运行 Workgroup Edition 或 SQL Server Express，您将难以使用高级 SSIS 功能（除非您正在通过 Visual Studio 运行。）

有关SQL Server 工作组不支持的 SSIS 功能列表，请参阅[http://msdn.microsoft.com/en-us/library/cc645993.aspx#SSIS 。](http://msdn.microsoft.com/en-us/library/cc645993.aspx#SSIS)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:04:10.003

包与启动它的程序在同一台计算机上运行。即使程序加载远程存储在另一台服务器上的包，该包也会在本地计算机上运行。此外，您只能在安装了集成服务的计算机上在开发环境之外运行包。您不能在未安装 Integration Services 的客户端计算机上运行 Business Intelligence Development Studio 之外的包，并且您的 SQL Server 2005 许可条款可能不允许您在其他计算机上安装 Integration Services。

因此，显然您的“另一个环境”上没有 SSIS。您是否将其部署到 SQL Server 或文件磁盘？

> 要从未安装 Integration Services 的本地计算机运行远程包，请启动这些包，以便它们在安装了 Integration Services 的远程计算机上运行。为此，您可以让本地计算机使用 SQL Server 代理、Web 服务或远程组件来启动远程计算机上的程序包。如果您尝试直接从本地计算机启动远程包，这些包将加载到本地计算机并尝试从本地计算机运行。如果本地计算机没有安装集成服务，这些包将不会运行。

[本文](http://msdn.microsoft.com/en-us/library/ms403355%28SQL.90%29.aspx)展示了在另一台安装了 SSIS 的机器上运行包的机制：

# osgi - 以编程方式添加声明性服务

> ID：10702295
> 
> 赞同：4
> 
> 时间：2012-05-22T12:45:31.440
> 
> 标签：osgi, equinox, apache-felix, declarative-services

是否可以使用某种 api 添加声明性服务？

一点背景：

我有一个基于动态脚本的服务器应用程序（可以随时添加、编辑或删除它们）。这些脚本依赖于 OSGi 服务，并且可能相互依赖。每当编辑脚本时，脚本就会被编译为 javascript，并检测其依赖项。

那时，我想（重新）将其注册为声明性服务，因此当它的依赖项来来去去时，它将被激活/停用。

*   这甚至可能吗？还是我缺少一些重要的东西？
*   如果 OSGi 标准无法实现，是否有针对 Felix 或 Equinox 的特定解决方案？
*   你能在其他框架中做到这一点，比如 iPojo 或 blueprint 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T14:41:00.540

没有 API 可以强制添加声明式服务。您可以使用普通的 OSGi api 来注册和使用服务。也许这就是你想要的？

您可能需要检查[Dependency Manager](https://felix.apache.org/site/apache-felix-dependency-manager.html)，它可能提供 API 模型，为您提供所需的依赖支持。

# php - 为什么 CakePhp 看不到我的样式表

> ID：10702296
> 
> 赞同：0
> 
> 时间：2012-05-22T12:45:31.933
> 
> 标签：php, cakephp

我正在从其他离开的人那里接手一个项目。我目前正在尝试设置我的环境。当我查看服务器上的应用程序时，一切正常。但是当我下载它并尝试在本地进行设置时，没有一个样式表被读取。当我单击它们时，这些链接都不起作用。

我认为所有路径都失控了，但我不确定如何修复它。我正在使用 wamp and cake 2.0。

我还在 cake 的网站上发现了[一些](http://ask.cakephp.org/questions/view/cakephp_on_iis_server_-_css_stylesheets_not_working)似乎没有帮助的东西。

如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T01:37:32.170

所以你有一些东西可以接受：

您忘记复制您的 .htaccess 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:59:33.567

确保删除 /app/tmp/ 的内容（保留目录并删除文件）

# email - 发送 html 电子邮件

> ID：10702299
> 
> 赞同：-2
> 
> 时间：2012-05-22T12:45:37.770
> 
> 标签：email

我想知道是否可以发送包含 html 测验的 html 电子邮件，接收者将填写测验并将其发回。那么，是否有可能看到他们的答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:51:03.120

在 google docs 中进行测验并通过电子邮件邀请所有人更容易。

电子邮件中的任何脚本都可能被防火墙、防病毒程序和电子邮件阅读器阻止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:48:19.550

这是不可能的。要发送电子邮件，您需要使用至少一种服务器端脚本语言，例如 Asp.net、Php 等。

这是一个非常常见的要求，并且源代码很容易获得。

# javascript - 无法从 facebook javascript login api 获取用户 ID

> ID：10702307
> 
> 赞同：4
> 
> 时间：2012-05-22T12:45:56.210
> 
> 标签：javascript, facebook, cordova, facebook-javascript-sdk, phonegap-plugins

我正在使用 phonegap facebook 插件和 facebook javascript api。这是我的代码

```
FB.init({
    appId: "xxxxxxxxxxxxxxx",
    status: true,
    oauth :true,
    nativeInterface: CDV.FB,
    //channelURL : 'www', // Channel File
    cookie: true, 
    //useCachedDialogs: false, 
    xfbml: true
});

FB.login(function(response) {
    if (response.authResponse) {
        alert(response.authResponse.userID); // literally shows three dots
        FB.api('/me', function(me){
            if (me.id) {
                alert(me.id);  // this works
            }
        });
    }
}, { scope: "email" }); 
```

我可以从 authResponse 获取 accessToken .... 它是一个长字符串。但 userID 字段的字面意思是“...”。我可以通过使用另一个图形 API 调用来获取额外的往返服务器来获取用户的 ID，`/me`但这似乎很浪费。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T18:31:51.607

[为了 OP 的利益] 您可以通过在开始显示时对服务器进行额外调用来获取客户端中的用户 ID。这是正确的代码：

```
 FB.api('/me', function(me){
        if (me.id) {
            var facebook_userid = me.id;
            alert(facebook_userid);
        }
    }); 
```

这没有解释为什么 userID 字段`"..."`在登录响应对象中。但这是一种解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:51:33.813

我在 github（[https://github.com/davejohnson/phonegap-plugin-facebook-connect/issues/151](https://github.com/davejohnson/phonegap-plugin-facebook-connect/issues/151)）上发布了一个错误，因为这似乎是插件的“功能”。不确定问题出在 facebook IOS sdk（没有从 FB 传回这些数据）还是在插件中（没有在 JS 级别传回这些数据）。

# javascript - 单击按钮时删除类的所有实例

> ID：10702308
> 
> 赞同：0
> 
> 时间：2012-05-22T12:46:06.933
> 
> 标签：javascript, jquery

单击按钮时，我正在尝试删除页面上给定类的所有实例。该代码本身可以正常工作，而不是来自点击功能。我的代码是：

```
$('#myButton').click(function() {
    $("#wrapper").removeClass("myClass");
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:54:01.740

试试看嘛：

```
$('#myButton').click(function() {
    $(".myClass").removeClass("myClass");
}); 
```

它应该在页面上的任何位置捕获具有该类的*每个元素。*

[在http://jsfiddle.net/alnitak/27cFm/](http://jsfiddle.net/alnitak/27cFm/)工作演示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:51:59.220

```
$("#wrapper").removeClass("myClass"); 
```

只会从#wrapper 元素（id 为“wrapper”的元素）中删除 myClass 类，对吗？你可能需要类似的东西：

```
$('#myButton').click(function() {
    $("#wrapper .myClass").removeClass("myClass");
}); 
```

首先：将所有元素与包装器内的 myClass 类匹配，然后删除它们的 myClass 类属性

如果我误解了这个问题，请发表评论，以便我可以修复回复

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T13:07:48.630

要在单击按钮时删除页面上的所有 myClass 实例，您可以尝试：

```
$('#myButton').click(function() {
    // this will select all elemets with 'myClass'
    var $target = $(".myClass");

    // this will remove 'myClass' from the selected elements
    $target.removeClass("myClass");

    // this will remove the selected elements from DOM
    // $target.remove();
}); 
```

# c# - 使用列表作为数据源创建树视图

> ID：10702309
> 
> 赞同：1
> 
> 时间：2012-05-22T12:46:12.710
> 
> 标签：c#, asp.net, treeview

我有一个对象列表，我想将此列表与树视图控件绑定我的类如下

```
public class Tax
{
    public string TaxName { get; set; }
    public string TaxPresentationId { get; set; }
    public string ParentTaxName { get; set; }
    public string PresentationTaxName { get; set; }
    public string RoleURl { get; set; }
    public List<Tax> Child { get; set; }

    public Tax()
    {
        Childrens = new List<Tax>();
    }
} 
```

我有一个包含所有数据的列表

```
 List<Tax> lstreportdata = new List<Tax>(); 
```

如何将此列表绑定到树视图控件中。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:15:52.120

你不能。至少不是直接的。查看 MSDN 上的[TreeView 文档](http://msdn.microsoft.com/en-us/library/ms178258%28v=vs.100%29.aspx)。

TreeView 控件最常见的用法是显示[绑定到 XmlDataSource 的](http://msdn.microsoft.com/en-us/library/ms178367.aspx)站点地图信息。

您还可以使用[PopulateOnDemand](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treenode.populateondemand%28v=vs.100%29.aspx)属性以编程方式填充它。

# php - PHP中的高负载支付处理架构

> ID：10702310
> 
> 赞同：1
> 
> 时间：2012-05-22T12:46:18.067
> 
> 标签：php, mysql, architecture, payment, credit-card

想象一下本地 Groupon 克隆。现在想象一个吸引了 10 倍正常访问者的交易，并且由于访问者试图在并行 MySQL 数据库中购买交易，因此超出了交易的最大购买限制。

我正在寻找高负载网站支付处理的最佳实践，它将并行处理有限数量的产品的支付。

目前，当客户尝试在第三方支付处理器的页面上购买时，最简单的选项似乎是锁定/解锁交易。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:22:18.020

在您开始谈论第 3 方支付处理器页面之前，我一直与您同在。在将用户带到第三方网站时很难控制用户的体验，因为您不知道他们在那儿时在做什么，如果他们走偏了，他们需要多长时间才能完成交易，如果他们完成了交易，等等。

如果在本地处理付款不是一种选择，那不一定是问题 - 它只是提出了一个问题，即您必须如何实际考虑处理您的交易。

所以，如果是我，现在不考虑第三次聚会——我们先搁置一分钟。显然，我会 #1 确保我的 MySQL 数据库具有足够的弹性，不会出现故障，因为这会给协调事务带来巨大的问题。但是，事情发生了，所以你需要一个备份。

我的建议是使用一个缓存系统来跟踪产品，以及当前可用的产品数量。Memcache 可能对此有好处，因为它只是一条很容易抓取的记录。您根本不必访问数据库来获取有关您的产品（可用性）的信息，如果它出现故障，您的用户/应用程序将不再明智，因为您将直接从 Memcache 获取有关您的项目的信息（不需要mysql）。

这带来了存储支付记录的问题（当数据库出现故障时）。当您收款时，您显然需要数据库中的交易信息，如果您的数据库出现故障，那就是个问题。Memcache 并不是一个很好的解决方案，因为你受限于你的值的大小，你必须知道你关心的每一个键。最重要的是，Memcache 没有集合或集合操作，因此您不能附加到一个值而不必担心会破坏某些数据。

所以，让我们添加一个不同的技术，Redis。

事务问题的解决方案是在您的 MySQL 服务器不可用的情况下将它们写入 redis（或者如果您真的想写入两者，但您并不真的需要这样做）。然后有一个后台进程，它知道如何从 redis 获取事务详细信息，并在它重新联机时将它们写入您的 MySQL 表。Redis 对崩溃具有很强的弹性，并且能够大量运行。它还具有集合操作，因此您可以轻松地将数据附加到集合中，而不必担心在读/更改/写操作期间出现竞争条件。

因此，您可以将所有事务作为一个集合存储在一个 redis 键中（如果您愿意，可以将它们存储为 json 字符串，这很容易），然后当您的数据库崩溃时，您可以从 Redis 获取该数据并写入当它重新联机时，它会发送到 MySQL。

为简单起见，如果您打算使用 redis 存储事务，您也可以使用它来存储产品缓存，而不是 memcache - 保持堆栈简单。

这会注意不访问数据库以获取您的产品详细信息，并在 MySQL 崩溃时跟踪您（可能）错过的交易。但它不能处理在 MySQL 关闭时跟踪产品库存的问题，并确保您不会过度销售产品。

为了处理这种情况，当交易被保存时，您可以减少可用产品的数量（将其保留为固定数字，这样您就不会在页面加载时不断地重新计算它）。这将立即告诉您产品是否超卖。但是，这并不能保护“产品在购物车中”的时间。一旦用户将产品放入购物车（您允许这样做，因为您说您有库存），您就会遇到确保在他们结账之前它不会售罄的问题。

此问题的解决方案也可以作为您对 3rd 方交易问题的解决方案。因此，您正在为您的产品使用缓存机制，并为您的交易使用回退机制。您现在应该做的是，当用户尝试购买产品时（或者将其放入购物车，或者被送到第 3 方处理器）为他们创建一个“产品预订”。为这些中的每一个创建一个 redis 条目可能是最简单的。让产品预订有一个到期时间，比如 5 或 10 分钟，如果你愿意，甚至可以是 15 分钟。每次在您的网站上看到用户时，刷新超时以确保他们不会超时（显然，如果您愿意，可以在其中添加更多逻辑）。当交易完成并从待处理变为已付款时，您将创建交易记录（mysql 或 redis，

然后，除了未过期的预订信息外，您还可以使用可用数量信息来确定可供销售的数量。如果这个数字下降到零，那么您实际上已经售罄；但是，如果您的一定数量的用户没有转换它会释放他们没有购买的库存，让您可以冲洗并重复该过程，直到您实际上售罄。

这是一个相当健壮的系统的相当长的解释，如果你遇到了 MySQL 服务器崩溃和 redis 崩溃的情况，你会被搞砸的；因此，在这里对这两个系统进行故障转移是有意义的（这是完全可行和可能的）。它应该使结帐/库存管理过程非常可靠。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T14:33:29.243

使用具有读/写连接的主从 mysql 配置。

尽可能使用缓存（[redis](http://redis.io/)是个好主意）。

尝试将一些逻辑放入redis中，这样它就不会与mysql建立额外的连接+它会更快。

对于事务，使用某种消息队列系统（[rabbitMQ](http://www.rabbitmq.com/)）可能是明智的。它将允许您将一些任务转发到后台。

如果 db 或缓存引擎或 mq 失败，您将遇到所有这些优化问题。但是为所有这些服务使用主从，你会比较安全。即使用多台机器，如果其他机器出现故障，它们将能够继续工作。

这让我想到了下一个想法。具有自动缩放功能的云服务（如[aws](http://aws.amazon.com/)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T13:08:37.053

您是否考虑补偿服务交易？

# php - 通过 jQuery 将变量传递给 PHP 文件

> ID：10702313
> 
> 赞同：3
> 
> 时间：2012-05-22T12:46:21.760
> 
> 标签：php, jquery

对jQuery真的不熟悉。无论如何我可以使用 jQuery 将表单数据传递给 PHP 文件吗？

形式：

```
<div id="dialog-form" title="Fill in your details!">
  <form>
<fieldset>
  <label for="name">Name</label>
  <input type="text" name="name" id="name"/>
  <label for="email">Email</label>
  <input type="text" name="email" id="email" value=""/>
  <label for="phone">Phone</label>
  <input type="phone" name="phone" id="phone" value=""/>
</fieldset>
  </form> 
```

这是一个带有 jQ​​uery 的弹出对话框，并通过以下方式提交：

```
$("#dialog-form").dialog({
  autoOpen: false,
  height: 450,
  width: 350,
  modal: true,
  buttons: {
    "Sumbit": function() {
    //VALIDATES FORM INFO, IF CORRECT
      if (Valid) {
        $.ajax({
          url: 'process-form.php',
          success: function (response) {
          //response is value returned from php
            $("#dialog-success").dialog({
              modal: true,
              buttons: {
                Ok: function() {
                  $(this).dialog("close");
                }
              }
            });
          }
        });
        $(this).dialog("close");
      }
    }
  }
}); 
```

我想要做的是发送用户输入的表单数据，在`process-form.php`那里它将被处理并作为电子邮件发送（我可以这样做）。只是不确定在 jQuery 方面。甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:48:46.663

您可以使用该`.serialize()`功能

```
$('yourform').serialize(); 
```

[.serialize() 的文档在这里](http://api.jquery.com/serialize/)

你会像这样使用它：

```
$.ajax({
    url: 'process-form.php',
    data: $('form').serialize(),  // **** added this line ****
    success: function (response) { //response is value returned from php
        $("#dialog-success").dialog({
            modal: true,
            buttons: {
                Ok: function () {
                    $(this).dialog("close");
                }
            }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:48:46.560

是的，你可以使用jQuery`.post()`方法，[这里详细介绍](http://api.jquery.com/jQuery.post/)

```
$.post( "process-form.php", $( "#dialog-form" ).serialize( ) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T12:50:06.600

鉴于您当前的代码，最简单的方法是将表单序列化为 data 属性：

```
[...]
url: 'process-form.php',
data: $('#dialog-form').serialize() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T12:55:23.847

您使用 $.ajax 是正确的，但是您需要通过提交实际传递数据，到目前为止您还没有这样做。你最好也设置“类型”。

```
$( "#dialog-form" ).dialog({
        autoOpen: false,
        height: 450,
        width: 350,
        modal: true,
        buttons: {
            "Sumbit": function() {
                //VALIDATES FORM INFO, IF CORRECT
                if (Valid ) {
                    $.ajax({
                       url: 'process-form.php',
                       type: "post",
                       data: {
                           name: $('[name=name]').val(),
                           email: $('[name=email]').val(),
                           phone: $('[name=phone]').val(),
                       },
                       success: function (response) { //response is value returned from php
                            $( "#dialog-success" ).dialog({
                                modal: true,
                                buttons: {
                                    Ok: function() {
                                        $( this ).dialog( "close" );
                                    }
                                }
                            });
                       }
                    });
                    $( this ).dialog( "close" );
                } 
```

这些变量现在应该在您的 PHP 脚本中作为 $_POST['name']、$_POST['email'] 和 $_POST['phone'] 可用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T12:57:41.960

如果您使用 ajax 发送，**表单**的意义何在？关于现在的问题，通过以下方式获取输入：

```
var fields = [];
$("#dialog-form form fieldset > input").each(function() {
   fields.push( $(this)[0].value );
});
...
$.ajax({
   url: 'process-form.php',
   data:fields
... 
```

# php - 用于基于灯的 crm 应用程序的 saas 架构

> ID：10702316
> 
> 赞同：0
> 
> 时间：2012-05-22T12:46:32.843
> 
> 标签：php, cloud, saas

这看起来像是一系列问题，但都与我们一直在构建的基于 SaaS 和 PHP 的应用程序有关。我们意识到我们的应用程序架构并对其进行研究，以便我们确保在投入生产之前遇到所有基本技术并且不会面临任何失败。！

为了支持 SaaS，我们决定让我们的数据库多租户，每个客户都有自己的数据库。我的思绪在进一步以下问题列表中令人难以置信。

*   如何提供定制 SaaS 多租户应用程序以满足个别租户需求的能力？

*   如何保证每个租户数据库的安全，使他们不会意外访问对方的数据？

*   什么是集群，如果数量增加，我们如何向它们添加新的应用程序和数据库实例。的客户？

*   我们如何确保 SaaS 网站的性能和可扩展性？

*   我们如何处理 SaaS 应用程序的故障，尤其是当我们推出新版本和更新时（持续集成）？

*   在 SaaS 应用程序中处理订阅者/客户以及激活和停用模块的权限是否有任何特殊解决方案？

[我附上了我们决定使用的 DB 框图](http://i.stack.imgur.com/micgQ.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:58:33.743

我写了一篇很好的文章，其中包含了我们在使用 PHP 开发 SaaS 应用程序时需要考虑的许多项目。在 Zend Framework 中检查[使用 PHP 的 SaaS 应用程序开发](http://advancedphpsolutions.com/blog/zend-framework/saas-application-development-using-php-in-zend-framework/)

您的一些问题的答案如下：

*如何提供定制 SaaS 多租户应用程序以满足个别租户需求的能力？*

它就像一个正常的网站开发。假设您有资源 A 到 Z，那么您需要将到达租户的已分配或可访问资源保留在数据库中。然后在访问时您可以简单地检查权限。

*如何保证每个租户数据库的安全，使他们不会意外访问对方的数据？*

SaaS 应用程序上的数据库设计是 Stack Overflow 上多次讨论的话题。您可以为每个租户使用单一数据库或唯一数据库。对于大项目，第二个是合适的。

如果您使用单一数据库，只需将租户 ID 存储在所有表中。然后在对租户进行身份验证时，根据请求来自的子域将租户 ID 保留在 SESSION 中。然后在所有数据库操作中传递此 ID，因此不会意外影响任何其他租户的数据。

# batch-file - 编写 .bat 文件以在 ASCII 文件中查找文件名并将其设置为变量

> ID：10702317
> 
> 赞同：0
> 
> 时间：2012-05-22T12:46:34.797
> 
> 标签：batch-file

我想从我的 ascii 文件的一行中提取文件名。在文件 examplefile.txt 的一行中，我有以下文本：

```
Inputfile  input_file.txt
Outputfile output_file.txt 
```

我想要做的是打开 examplefile.txt 并读取输入和输出文件的名称并将它们设置为变量。相当于以下行：

```
Set "INPUTFILE=input_file.txt"
Set "OUTPUTFILE=output_file.txt" 
```

我试过这样的东西，但它不起作用：

```
for /f "tokens=1*" %%A in (examplefile.txt) do (
set "TEMP=%%A"
if %TEMP% = "Inputfile" goto :break
)
:break 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:48:29.840

在 之前，您的方法看起来不错`for /f`，但我可能只是使用

```
for /f "tokens=1*" %%A in (examplefile.txt) do set "%%A=%%B" 
```

之后，您应该拥有两个变量`%inputfile%`和`%outputfile%`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:56:40.670

如果您使用 FINDSTR 过滤掉不需要的行，则可以提高性能。

```
for /f "tokens=1*" %%A in ('findstr /r /c:"^Inputfile " /c:"^Outputfile " "examplefile.txt"') do set "%%A=%%B" 
```

# objective-c - CGImage API 和 ICO 文件

> ID：10702319
> 
> 赞同：0
> 
> 时间：2012-05-22T12:46:41.423
> 
> 标签：objective-c, profile, cgimage, ico, nsimagerep

我遇到了一些看起来像错误的事情：如果我使用 CGImage API 创建 ICO 文件，我会得到第一个带有颜色配置文件的代表（256px），而所有其他代表都没有颜色配置文件（实际上他们看起来更亮）。我还尝试在每个图像代表中设置颜色配置文件（在原始 NSImageRep 和通过图像属性字典的 CGDestination 中），但没有任何变化。我们可以肯定地说这是一个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:18:36.223

嗯，ICO 中的 256x256 条目很特别。它基本上是嵌入在 ICO 中的 PNG。因此，它可以支持颜色配置文件。我不相信 ICO 除了通过 PNG 条目间接支持颜色配置文件。

我想这可能是一个错误，但很难知道该做的“正确”事情是什么。

# dos - 还报告了目录中的文件计数以及子目录中的文件计数

> ID：10702326
> 
> 赞同：2
> 
> 时间：2012-05-22T12:47:12.343
> 
> 标签：dos

我希望 DOS 命令找到给定目录中的文件计数（该计数应该有该目录下子目录的单独条目）。

例如，如果 Tech 是一个目录，它有 2 个文件和 2 个子目录（Info Tech、Services），并且每个子目录有 2 个文件，我的结果应该如下所示

```
Tech 6
Info Tech 2
Services 2 
```

如果有人可以用这样的命令行帮助我，那就太好了......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T15:58:10.253

你的要求不清楚。

我假设对于每个文件夹，您都需要文件夹中的文件总数，包括子文件夹中的文件（递归）。您想对根文件夹以及所有子文件夹（递归）进行计算。

此代码适用于从 XP 开始的所有 Windows 版本。我不确定它是否适用于真正的 MS-DOS。你真的在使用 MS-DOS 吗？

```
@echo off
setlocal disableDelayedExpansion
if "%~1"=="" (call :recurse ".") else call :recurse %1
exit /b

:recurse
setlocal
set fileCnt=0
for /d %%D in ("%~1\*") do call :recurse "%%~fD"
for /f %%A in ('dir /b /a-d "%~1\*" 2^>nul ^| find /v /c ""') do set /a fileCnt+=%%A
echo "%~f1"  %fileCnt%
( 
  endlocal
  set /a fileCnt+=%fileCnt%
)
exit /b 
```

该代码从下到上列出了具有文件计数的文件夹。如果您希望自上而下列出文件夹，则只需对结果进行排序。假设批处理脚本名为 fileCnt.bat，则

```
fileCnt | sort 
```

# android - 在 And Engine 中像水果忍者或素食武士一样在触摸上绘制线条效果

> ID：10702328
> 
> 赞同：0
> 
> 时间：2012-05-22T12:47:22.023
> 
> 标签：android, andengine

我想在 AndEngine 中画一条线，其效果类似于 Fruit Ninja 或 Veggie Samurai。谁能帮我？并给出示例代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T10:13:14.240

也许，我迟到了，但希望这对其他人有帮助。

```
 @Override
    public boolean onSceneTouchEvent(Scene pScene, TouchEvent pSceneTouchEvent) {

        final float touchX = pSceneTouchEvent.getX();
        final float touchY = pSceneTouchEvent.getY();

        if (pSceneTouchEvent.isActionDown()) {
            initTrail(touchX, touchY);
            swipeGestureSprite = addSwipeSprite(touchX, touchY);
        } else if (pSceneTouchEvent.isActionMove()) {

            moveTrail(pSceneTouchEvent.getX(), pSceneTouchEvent.getY(), 0);

            if (swipeGestureSprite != null) {
                swipeGestureSprite.setX(touchX);
                swipeGestureSprite.setY(touchY);
            }
        } else if (pSceneTouchEvent.isActionUp()) {

            mScene.detachChild(this.particleSystem);

            if (swipeGestureSprite != null) {
                this.mScene.detachChild(swipeGestureSprite);
                swipeGestureSprite = null;
            }

            return true;
        }

        return false;
    }

    private void initTrail(float mX, float mY) {
        this.particleEmitter = new PointParticleEmitter(mX, mY);
        this.particleSystem = new SpriteParticleSystem(particleEmitter, 1000, 1000, 5000, this.mRibbon, this.getVertexBufferObjectManager());
        particleSystem.addParticleInitializer(new BlendFunctionParticleInitializer<Sprite>(GLES20.GL_SRC_ALPHA, GLES20.GL_ONE));
        particleSystem.addParticleInitializer(new ExpireParticleInitializer<Sprite>(1));
        particleSystem.addParticleModifier(new ScaleParticleModifier<Sprite>(0, 1, 1, 0f));
        particleSystem.addParticleModifier(new AlphaParticleModifier<Sprite>(0, 1, 1, 0));
        this.mScene.attachChild(particleSystem);
    }

private void moveTrail(float trailX, float trailY, int count) {
        if (particleEmitter == null) {
            initTrail(trailX, trailY);
        }

        particleEmitter.setCenter(trailX, trailY);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:37:55.583

我认为你必须使用点粒子效果并使用画线算法来创建点之间的线。使用粒子绘制的线代表更多的现实，粒子也代表动态的方式，因此您可以破坏它。进一步你可以问。编辑：对于粒子生成，您可以使用此代码

```
public void generateParticles(float pX, float pY) {

    pointParticleEmtitter = new PointParticleEmitter(pX, pY);

    particleSystem = new ParticleSystem(pointParticleEmtitter, maxRate,
            minRate, maxParticles, mParticleTextureRegion.deepCopy());

    particleSystem.setBlendFunction(GL10.GL_SRC_ALPHA, GL10.GL_ONE);
    particleSystem.addParticleInitializer(new ColorInitializer(0.8f, 0.43f,
            0.2f));
    particleSystem.addParticleModifier(new AlphaModifier(1, 0, 0, 0.25f));
    particleSystem.addParticleModifier(new ExpireModifier(0.25f));

    gameObject.getScene().attachChild(particleSystem);

} 
```

对于线算法，你可以使用这个

```
public void drawLine() {
    int x;
    float y, m;

    x = (int) previousX;
    y = (int) previousY;

    m = (currentY - previousY) / (currentX - previousX);

    if (Math.round(previousX) == Math.round(currentX)) {
        if (previousY < currentY) {
            for (y = (int) previousY; y < currentY; ++y)
                pointParticleEmtitter.setCenter(previousX, y);
        } else {
            for (y = (int) previousY; y > currentY; --y)
                pointParticleEmtitter.setCenter(previousX, y);
        }
    } else {
        if (previousX < currentX) {
            for (x = (int) previousX; x < currentX; ++x) {
                y = m * (x - previousX) + previousY;
                pointParticleEmtitter.setCenter(x, y);
            }
        } else if (previousX > currentX) {
            for (x = (int) previousX; x > currentX; --x) {
                y = m * (x - currentX) + currentY;
                pointParticleEmtitter.setCenter(x, y);
            }
        }
    }
} 
```

# ios - 在 iOS 中使用两个音频单元进行同时 I/O 是否安全？

> ID：10702329
> 
> 赞同：4
> 
> 时间：2012-05-22T12:47:22.467
> 
> 标签：ios, core-audio

我正在为 iOS 开发一个 VOIP 项目，并注意到一个奇怪的问题。我的设置如下所示：

1.  捕获端有一个 VoiceProcessingIO 单元（用于回声消除），具有输出范围、输出总线和输入范围、输入总线启用。
2.  渲染端有一个 RemoteIO 单元，具有输出范围，启用输出总线。

到目前为止，我没有使用任何音频图。

当我开始录制声音时，我注意到上面的设置导致输出声音非常低，直到我关闭输出范围，VoiceProcessingIO 的输出总线。虽然这听起来像是我的代码中的一个错误（设置错误的 IO 总线），但捕获端的更改为什么会影响渲染端仍然没有意义。

在阅读了 developer.apple.com 的 iOS 音频单元托管指南后，我注意到它多次提到每个设计模式应该只包含一个 I/O 音频单元。我想知道这是强制性的，还是可选的。用两个音频单元保存我的代码是否安全？

确实，使用两个音频单元可能有其自身的原因，因为如果我想使一端静音，我可以简单地关闭一个单元。我不能用 kAudioUnitProperty_EnableIO 来做到这一点，因为它在 AudioUnitInitialize() 之后无法更改，这意味着如果我想禁用其中一个，单音频单元解决方案可能必须关闭两个通道并再次重新初始化音频单元。这会导致糟糕的用户体验，因为此时语音可能会暂停一小会儿。

谢谢，福州

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:48:30.097

好吧，看起来我在问一个角落问题。无论如何，到目前为止，我认为我有一些基于我的实验的想法：

1.  如果我使用两个 RemoteIO 单元...它在本地端可能看起来不错，但在远程端会导致问题。还记得我提到我正在开发一个 VOIP 应用程序吗？我发现当使用渲染端使用扬声器时，我的捕获端只能将非常低的音量传递到远程端。

2.  如果我使用两个 VoiceProcessingIO 单元......虽然看起来我们可以创建两个音频单元对象，但它们实际上是同一个。我的意思是，在我的代码中，如果我创建两个单元并关闭其中一个（例如，静音麦克风），那么另一个也会停止工作。

3.  如果我使用一个 VoiceProcessingIO 单元和一个 RemoteIO 单元……那就更复杂了。首先，不要只使用 VoiceProcessingIO 单元作为渲染端。它不会触发回声消除。所以唯一的选择是使用 VoiceProcessingIO 单元作为捕获和 RemoteIO 作为渲染。它可能有效，但要小心。如果您碰巧同时启用了 VoiceProcessingIO 单元的输入和输出端，您可能会听到您自己的扬声器或扬声器的更低音量输出。

顺便说一句，所有讨论仅针对 iOS。我没有机会玩 Mac。

所以是的，如果我们真的这样做，看起来没有保证的行为，最后的希望 - 是遵循 Apple 的音频单元托管指南。

我仍然期待更多的人在这里有你的意见。如果您发现任何新内容，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T09:19:20.947

There is an Error code for AUGraph

kAUGraphErr_OutputNodeErr AUGraphs can only contain one OutputUnit. this error is returned if trying to add a second output unit or the graph's output unit is removed while the graph is running

AUGraph.h, line 106

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T03:36:25.363

好吧，看来我遇到了同样的问题，我的应用程序也使用了两个音频单元，处理 IO 进行录制和远程播放，我发现输出音量被压低。

根据您的提示：“如果您碰巧启用了 VoiceProcessingIO 单元的输入和输出端，您可能会从您自己的扬声器或扬声器中听到更低音量的输出。”，现在我尝试像这样禁用进动 IO 的输出：

```
flag = 0;
status = AudioUnitSetProperty(_recordAudioUnit,
                              kAudioOutputUnitProperty_EnableIO,
                              kAudioUnitScope_Output,
                              kOutputBus,
                              &flag,
                              sizeof(flag)); 
```

是的，最后我得到了更大音量的渲染，但发生了另一个问题，那就是录制不再工作。

我不知道你是否也遇到了这样的问题，所以希望尽快看到你的更新。

# zend-framework - Zend 致命错误未捕获的异常“Zend_Loader_PluginLoader_Exception”和消息

> ID：10702334
> 
> 赞同：0
> 
> 时间：2012-05-22T12:47:30.787
> 
> 标签：zend-framework, zend-loader

在 localhost 中使用 Zend 框架项目很好，但是当我将它放在公共 Web 服务器中时，出现以下错误：

```
Fatal error: Uncaught exception 'Zend_Loader_PluginLoader_Exception' with message 'Plugin by name 'DocType' was not found in the registry; used paths: Zend_View_Helper_: Zend/View/Helper/:../application/views/helpers/' in /path/to/my/appli/application/library/Zend/Loader/PluginLoader.php:412 
Stack trace: 
#0 /path/to/my/appli/application/library/Zend/View/Abstract.php(1182): Zend_Loader_PluginLoader->load('DocType') 
#1 /path/to/my/appli/application/library/Zend/View/Abstract.php(618): Zend_View_Abstract->_getPlugin('helper', 'docType') 
#2 /path/to/my/appli/application/library/Zend/View/Abstract.php(344): Zend_View_Abstract->getHelper('docType') 
#3 [internal function]: Zend_View_Abstract->__call('docType', Array) 
#4 /path/to/my/appli/appli in /path/to/my/appli/application/library/Zend/Loader/PluginLoader.php on line 412 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:05:03.380

doctype 区分大小写，你应该写 $view->doctype 而不是 $view->docType

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:11:01.660

问题解决了我刚刚从我的引导程序中删除了以下几行：

```
protected function _initDoctype() {
    $this->bootstrap('view');
    $view = $this->getResource('view');
    $view->docType('XHTML1_TRANSITIONAL');
} 
```

而且我不知道为什么当我删除它时它可以正常工作：/（此功能在我的本地主机中没有问题，但在远程服务器中没有问题）

# php - 如何根据输入数组对数组进行排序？

> ID：10702340
> 
> 赞同：0
> 
> 时间：2012-05-22T12:47:44.350
> 
> 标签：php, arrays, multidimensional-array, sorting, usort

我无法根据另一个数组对数组进行排序。我已经尝试过 usort、uksort 和 uasort，但我一无所获。stackoverflow 上的其他问题在这里并不直接适用，因为我的数组结构不同。我想对这个多维数组进行排序：

```
$main = Array (
    [Technology] => Array ()
    [World] => Array ()
    [Europe] => Array () 
) 
```

通过使用这个索引数组：

```
$index = Array (
    [0] => Europe
    [1] => Technology
    [2] => World
) 
```

基本上，在这个例子中，我希望欧洲在 $main 数组中排名第一，技术第二，世界第三，因为这是他们在 $index 数组中的定位。我怎么做？（请忽略上面数组中的小语法错误）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:49:20.400

```
$main_sort = array()    
foreach ($index as $key => $value) {
    if ($main [$value]) $main_sorted [$value] = $main [$value];
} 
```

只需循环遍历`$index`数组并使用数组中的值将这些值映射到新`$main`数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:01:33.907

给定`$index`和`$main`,

```
uksort($main, function ($k, $k2) use ($index) {
  return array_search($k, $index) - array_search($k2, $index);
}); 
```

数组将根据 中指定的键进行排序`$index`。未指定不匹配键的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T13:19:37.833

如果您在 $index 中没有任何不是 $main 中的键的值（如您的示例中的情况），则此解决方案有效：

```
$sorted = array_merge(array_flip($index), $main); 
```

如果 $index 的值是 $main 的键的超集，则可能的解决方案是：

```
$sorted = array_intersect_assoc(array_merge(array_flip($index), $main), $main); 
```

请记住，让 PHP 函数在数组上工作比“显式”地这样做要快得多

# javascript - 如何添加从 html 表中获取的 html 内容？

> ID：10702343
> 
> 赞同：1
> 
> 时间：2012-05-22T12:47:47.880
> 
> 标签：javascript, jquery

我有这个脚本

```
$('table#preview td.price').each(function(){
var price = parseInt($(this).html());
var total;
if(price == ''){
price = 0;
}
total += price;
alert(total);
}); 
```

它所做的是获取具有类价格的列，然后据说将其全部加起来。

但是，我从这段代码中得到的只是 NaN。我不明白代码有什么问题。

请注意脚本**if(price == '')**。我这样做是因为最初表格中没有内容。

编辑：这里是html

```
 <table>
    <tr>
    <th>Name</th>
    <th>Price</th>
    </tr>
    <tr>
    <td>pen</td>
    <td class="price>6</td>
    <td>paper</td>
    <td class="price>8</td>    
    </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T12:54:32.270

~~尝试使用`.text()`方法而不是`.html()`方法，它应该有望帮助摆脱 NaN 错误。~~您需要在`total`每次迭代的范围之外声明它，这样它就不会每次都被重置。尝试一下，我已经稍微简化了它，还包括对数字的检查`price`：

```
var total = 0;
$('table#preview td.price').each(function()
{
    var price = parseInt($(this).text());
    if (!isNaN(price))
    {
        total += price;
    }
});

alert('The total is: ' + total); 
```

## 更新

这是一个[jsFiddle](http://jsfiddle.net/5jAak/)。NB`.html()`也应该工作。

# javascript - 如何打开然后关闭窗口而不会被阻止为弹出窗口？

> ID：10702344
> 
> 赞同：7
> 
> 时间：2012-05-22T12:47:53.797
> 
> 标签：javascript, popup

我想指导电子商务网站中的客户通过 Paypal 的网站付款。我希望在新的选项卡/窗口中完成付款，这样客户就不会丢失他/她所在网页的当前状态。

为了让 Paypal 窗口打开而不会被阻止，我使用了 target="_blank" 的锚点。除了以下事实外，它工作得很好，在 Paypal 付款完成后我无法关闭它，因为`window.close()`它不适用于未通过`window.open()`.

我怎样才能使它既不被阻止为弹出窗口，又可以稍后用 JS 关闭它？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-22T12:52:28.760

> 为了让 Paypal 窗口打开而不会被阻止，我使用了 target="_blank" 的锚点。

这是一种选择，但只要您`window.open`从处理程序中调用用户生成的事件（如`click`），您就可以打开弹出窗口。因此，只需确保您`window.open`从`click`链接上的处理程序中调用（然后您可以关闭它）。现代弹出窗口阻止程序（过去几年的任何内容）阻止不是由用户事件触发的弹出窗口，但允许那些由用户事件触发的弹出窗口。

[实例](http://jsbin.com/ojuvik)| [来源](http://jsbin.com/ojuvik/edit)：

HTML：

```
<p><a href="#" id="target">Click to open popup</a>; it will close automatically after five seconds.</p> 
```

JavaScript：

```
(function() {

  document.getElementById("target").onclick = function() {
    var wnd = window.open("http://stackoverflow.com");
    setTimeout(function() {
      wnd.close();
    }, 5000);
    return false;
  };

})(); 
```

# c# - XAML 数据绑定 - UI 不会自动更新

> ID：10702345
> 
> 赞同：4
> 
> 时间：2012-05-22T12:47:57.890
> 
> 标签：c#, .net, wpf, xaml

我制作了一个程序来存储我的项目类型的任意数量的对象。然后每个项目包含任意数量的文件，这是我为这个程序创建的另一个对象。

我遇到的问题出现在 XAML 中，在 2 个领域，但我想这有相似的起源。

我有一个包含 ListView 的窗口，其中填充了所选项目中的文件。从这里我可以选中每个旁边的框以打开或关闭它们，如果我选择一个文件，有关它的信息将显示在此窗口的状态栏中。

如果我关闭一个文件，它的文本颜色应该在 ListView 中显示为浅灰色，但它不会自动执行此操作；我必须关闭窗口并重新打开它。File 实现 INotifyPropertyChanged，并在开/关状态发生变化时触发此事件。

我使用这个 XAML 代码，转换器在我的代码后面的类中：

```
<ListBox.ItemContainerStyle>
     <Style TargetType="ListBoxItem">
          <Setter  Property="Foreground" Value="{Binding Path=IsVisible, Converter={StaticResource VisibleStateToFontColourConverter}}"/>
     </Style>
</ListBox.ItemContainerStyle> 
```

同样对于所选文件，如果文件中的信息在选择时发生更改（其他类可能导致发生），我希望状态栏自动更新以反映此更改，但事实并非如此；我必须单击其他内容，然后重新选择感兴趣的文件。我也为此实现和使用 INotifyPropertyChanged，所以我不知道为什么它不会自动更新。我的状态项的 XAML 代码是这样的：

```
<StatusBarItem Name="statusItem_FileInfo" Content="{Binding ElementName=loadedFiles_ListView, Path=SelectedItem, Converter={StaticResource GIS_FileToInfoConverter}}"/> 
```

有谁知道我缺少什么可以将它们结合在一起？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T12:53:21.497

尝试添加`UpdateSourceTrigger=PropertyChanged`到您的绑定：

```
Value = "{Binding ... , UpdateSourceTrigger=PropertyChanged}" 
```

`OnPropertyChanged`使用更改后的属性名称更改属性后直接调用：

```
public event PropertyChangedEventHandler PropertyChanged;

private void OnPropertyChanged(string propertyName)
{
    PropertyChangedEventHandler handler = PropertyChanged;
    if (handler == null) return;
    handler (this, new PropertyChangedEventArgs(propertyName));
} 
```

如果您更改`"IsVisible"`通话`OnPropertyChanged("IsVisible")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:22:17.287

为什么不为列表框项使用数据触发器？如果我说得对，您只想在两种状态之间切换？

所以默认样式应该是 foreground=black 和 datatrigger Property=IsVisible Value=false --> 然后前景 lightgrey

# .net - 无法将 IIS 中的 SMTP 日志与 .NET 应用程序关联起来

> ID：10702348
> 
> 赞同：4
> 
> 时间：2012-05-22T12:48:01.993
> 
> 标签：.net, iis, smtp

我们有一个发送电子邮件的网络应用程序（谁没有）。

最近我们实现了一些东西，客户可以向他们的客户发送调查问卷。一次可能发送数千个。（别担心，这不是垃圾邮件。没有出售任何东西，只是一堆问题）

我们遇到了一些问题，由于很多不同的原因，我们得到了很多反弹，我相信，其中大部分只是您的花园类型错误的电子邮件地址或邮箱完整错误。我工作的公司担心这是因为我们已经建立了一些东西。

我进行诊断的唯一方法是进入大型 SMTP 文件的日志文件并查找有问题的地址。我无法知道错误发生了多少次，是否有我们可以避免的错误，等等。

现在我记录正在发送的电子邮件，但是一旦它进入 SMTP，我就会丢失任何类型的上下文。我想我要问的是，是否有一种技术或更好的 SMTP 服务器或我们可以利用的东西来帮助我们更好地理解我们的 SMTP 数据，理想情况下我可以用它来绑定到我在代码中发送它的时候？

目前，我在 Windows Server 2008 中使用 vanilla IIS SMTP，而 .NET 应用程序除了 .NET 3.5 之外没有任何特别之处。如果需要，我愿意接受新的 SMTP 服务器工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:03:03.053

您可以设置 System.Net.Mail。[MailMessage.DeliveryNotificationOptions](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCIQFjAA&url=http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.deliverynotificationoptions.aspx&ei=zP16UO_sNsii2AXO_YCgDg&usg=AFQjCNHE9bqHLtnGWioANQ_-gIbCtqhRBA)到[DeliveryNotificationOptions.OnFailure](http://msdn.microsoft.com/en-us/library/system.net.mail.deliverynotificationoptions%28v=vs.100%29.aspx)。每当交付失败时，这将向“发件人”地址发送一封电子邮件。

仅供参考，有报道称[DeliveryNotificationOptions 可能仅适用于 Exchange server](https://stackoverflow.com/questions/8800299/does-system-net-mail-deliverynotificationoptions-only-work-with-exchange)。对于其他邮件服务器，您可能必须直接设置“Return-Receipt-To”SMTP 值。

# android - 通知计数不计数

> ID：10702349
> 
> 赞同：2
> 
> 时间：2012-05-22T12:48:07.437
> 
> 标签：android, count, notifications, notificationmanager

我有以下代码......当通知到来时......它总是显示“1”并且如果有更多通知则不算数......我做错了什么？

我将从以下代码开始：

```
public class ActionSendSMS extends Activity {

private static final int NOTIFY_ME_ID=5476;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.actionsendsms);

    givenotification(getBaseContext());
    finish();
} 
```

…………

```
public void givenotification(Context context){

    //Get the notification manager
    String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager nm = (NotificationManager)context.getSystemService(ns);

    //Create Notification Object
    int count=1;
    int icon = R.drawable.red_ball;
    CharSequence tickerText = "Nice message!";
    long when = System.currentTimeMillis();
    final Notification notify = new Notification(icon, tickerText, when);

    notify.flags |= Notification.DEFAULT_SOUND;
    notify.flags |= Notification.FLAG_ONLY_ALERT_ONCE;
    notify.flags |= Notification.FLAG_AUTO_CANCEL;

    notify.number += count;

    //Set Notification send options
    Intent intent = new Intent(context, ActionNotifySendMessage.class);

    PendingIntent pi = PendingIntent.getActivity(this, 0, intent, 0);
    notify.setLatestEventInfo(context, "Message Alert", tickerText, pi);

    nm.notify(NOTIFY_ME_ID, notify);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:56:55.237

你设置你的计数`count=1`，然后你增加`notify.number`1 ??? 我从来没有看到你增加你的计数器本身......

您可以尝试将其设为静态成员，并像这样每次都增加它：

```
public class ActionSendSMS extends Activity {

    private static final int NOTIFY_ME_ID=5476;
    private static int count = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.actionsendsms);

        sendSMS();
        givenotification(getBaseContext());
        finish();
    }

    public void givenotification(Context context){

    //Get the notification manager
    String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager nm = (NotificationManager)context.getSystemService(ns);

    //Create Notification Object
    count++;
    int icon = R.drawable.red_ball;
    CharSequence tickerText = "PhoneFinder send GPS-message!";
    long when = System.currentTimeMillis();
    final Notification notify = new Notification(icon, tickerText, when);

    notify.flags |= Notification.DEFAULT_SOUND;
    notify.flags |= Notification.FLAG_ONLY_ALERT_ONCE;
    notify.flags |= Notification.FLAG_AUTO_CANCEL;

    notify.number += count;

    //Set Notification send options
    Intent intent = new Intent(context, ActionNotifySendMessage.class);

    PendingIntent pi = PendingIntent.getActivity(this, 0, intent, 0);
    notify.setLatestEventInfo(context, "DroidFinder Alert", tickerText, pi);

    nm.notify(NOTIFY_ME_ID, notify);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:53:30.070

`int count=1;`正如您声明的那样，将 Activity设为 全局`NOTIFY_ME_ID`。你在里面声明 count`givenotification()`所以它总是用 1 初始化。

# email - 同步同一帐户时是否会发生 POP3 和 IMAP 冲突

> ID：10702350
> 
> 赞同：0
> 
> 时间：2012-05-22T12:48:09.180
> 
> 标签：email, imap, pop3

我目前正在使用 Outlook 的 mac 和 pc 上的一些电子邮件帐户尝试 IMAP。在某种程度上，它似乎工作正常（在 PC Outlook 上更好），但有一些问题我无法深入了解。

我时不时地收到发送/接收错误，说 Outlook 无法联系我的服务器。这可能是因为我在多台计算机上的同一帐户上同时设置了 POP 和 IMAP，因此在与服务器同步时它们发生冲突？

**更新** 换句话说，如果我禁用正在使用 POP 的帐户，错误会消失吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:49:54.237

不; 如果服务器关闭（或错误），就会发生这种情况

# unix - Unix find 命令 - 等效于 .net File.Exists 和 Directoty.Exists 在 Unix

> ID：10702360
> 
> 赞同：0
> 
> 时间：2012-05-22T12:48:34.223
> 
> 标签：unix, find

在我们的 .net 应用程序中，我们必须针对 Unix 系统运行文件操作命令。我正在尝试拥有等效的 File.Exists 和 Directory.Exists。

在 .net 中使用 ssh，到目前为止可以通过以下方式工作：

仅查找名称匹配的文件：

```
find /folder/subfolder -maxdepth 1 -type f -iname test.mov 
```

仅查找名称匹配的目录：

```
find /folder/subfolder -maxdepth 1 -type d -iname test 
```

问题 - 是否可以在不拆分完整路径的情况下执行上述操作？

拆分路径没什么大不了的，但生产中的现有服务只接受运行命令和路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:03:43.733

```
test -d  /path/to/directory_name  
[ -d /path/to/directory_name  ] 
```

返回 true 或 false - 即 directory.exists

```
test -f /path/to/filename
[ -f /path/to/filename ] 
```

文件相同

您可以使用这些构造返回 ok 或 not ok

```
[ -f /path/to/filename ]  && exit 0 || exit 1 
```

find 找不到命名目录或文件时不返回错误

# ios - 填充静态表仅填充可见行

> ID：10702361
> 
> 赞同：0
> 
> 时间：2012-05-22T12:48:35.963
> 
> 标签：ios, uitableview, static, populate

好的，经过几次尝试，我终于在**@jrturton**的帮助下填充了静态表格视图（[如何填充静态 UITableView](https://stackoverflow.com/questions/10409962/how-to-populate-a-static-uitableview)）。

但是现在我遇到了另一个问题。似乎在填充字段时，通过我使用的方法仅填充了可见字段。通过代码填充的其他字段在向下滚动时保持为空。

有什么我想念的吗？虽然通过委托填充动态表格肯定会解决我看到的问题，但我只是不想通过数组等填充所有静态文本（标签）。而且我知道表格中总会有 16 行。

所以有人对出了什么问题有任何建议吗？

这是代码：

```
- (void)setDetailItem:(id)newDetailItem
{
    if (_detailItem != newDetailItem) {
        _detailItem = newDetailItem;

    }
}

-(void)setParam:(id)newparam
{
    if (_param != newparam) {
        _param = newparam;

    // Update the view.
        [self configureView];
    }

    if (self.masterPopoverController != nil) {
        [self.masterPopoverController dismissPopoverAnimated:YES];
    }        
}

- (void)configureView
{
    // Update the user interface for the detail item.

    if (_detailItem) {
        for (int idx=0; idx<16; idx++) {
            NSString *value = [NSString stringWithFormat:@"%@",[_param objectAtIndex:idx]];
            [self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:idx inSection:0]].detailTextLabel.text = value;
        }
    }
}

- (void)viewWillAppear:(BOOL)animated
{ 
    [super viewWillAppear:animated];
// Do any additional setup after loading the view, typically from a nib.
    appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    [self configureView];
} 
```

我从早期的代码中修改了一些行，并添加了一些可能有助于更好理解的代码。

# python - 如何避免在scrapy python中将元素存储在字典中的字母顺序

> ID：10702363
> 
> 赞同：2
> 
> 时间：2012-05-22T12:48:37.343
> 
> 标签：python, json, scrapy, dictionary

我正在研究scrapy，我从网站上获取了一些项目并将它们存储在json文件中。

我的`items.py`代码是：

```
job_title = Field()
full_or_part_Time = Field()
location_affiliates = Field()
department = Field()
requisition_number = Field() 
```

实际上提取后，json文件中存储的项目如下格式

```
{"full_or_part_Time": ["Full Time"], 
 "department": ["808 - Spons Prj Accounting"], 
 "requisition_number": ["12-1407456"], 
 "job_title": ["Accountant"], 
 "location_affiliates": ["Mount Sinai Medical Center (Manhattan)"]} 
```

但我想以我在`items.py`文件中声明的格式保存项目。谁能告诉我如何以声明的格式安排。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T13:08:25.030

JSON 对象不是要排序的。

> 对象是一组无序的名称/值对。

[JSON 规范](http://www.json.org/)

# java - 用正确的自动换行将长字符串分成几行

> ID：10702367
> 
> 赞同：3
> 
> 时间：2012-05-22T12:48:48.893
> 
> 标签：java, regex, matcher

```
 String original = "This is a sentence.Rajesh want to test the application for the word split.";
 List matchList = new ArrayList();
 Pattern regex = Pattern.compile(".{1,10}(?:\\s|$)", Pattern.DOTALL);
 Matcher regexMatcher = regex.matcher(original);
 while (regexMatcher.find()) {
     matchList.add(regexMatcher.group());
 }
 System.out.println("Match List "+matchList); 
```

我需要将文本解析为长度不超过 10 个字符的行数组，并且在行尾不应有断词。

我在我的场景中使用了以下逻辑，但是如果行尾有中断，它会在 10 个字符后解析到最近的空格

例如：实际的句子是“**这是一个句子。Rajesh 想要测试应用程序的单词拆分。** ”但是在逻辑执行之后它得到如下。

匹配列表 [这是一个，nce.Rajesh，想要，测试，应用，对于，单词，拆分。]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-30T01:40:46.047

OK, so I've managed to get the following working, with max line length of 10, but also splitting the words that are longer than 10 correctly!

```
String original = "This is a sentence. Rajesh want to test the applications for the word split handling.";
List matchList = new ArrayList();
Pattern regex = Pattern.compile("(.{1,10}(?:\\s|$))|(.{0,10})", Pattern.DOTALL);
Matcher regexMatcher = regex.matcher(original);
while (regexMatcher.find()) {
  matchList.add(regexMatcher.group());
}
System.out.println("Match List "+matchList); 
```

This is the result:

```
This is a 
sentence. 
Rajesh want 
to test 
the 
applicatio
ns word 
split 
handling. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T20:22:21.960

这个问题在某些时候被标记为 Groovy。假设 Groovy 答案仍然有效并且您不担心保留多个空格（例如 ' '）：

```
def splitIntoLines(text, maxLineSize) {
    def words = text.split(/\s+/)
    def lines = ['']
    words.each { word ->
        def lastLine = (lines[-1] + ' ' + word).trim()
        if (lastLine.size() <= maxLineSize)
            // Change last line.
            lines[-1] = lastLine
        else
            // Add word as new line.
            lines << word
    }
    lines
}

// Tests...
def original = "This is a sentence. Rajesh want to test the application for the word split."

assert splitIntoLines(original, 10) == [
    "This is a",
    "sentence.",
    "Rajesh",
    "want to",
    "test the",
    "application",
    "for the",
    "word",
    "split."
]
assert splitIntoLines(original, 20) == [
    "This is a sentence.",
    "Rajesh want to test",
    "the application for",
    "the word split."
]
assert splitIntoLines(original, original.size()) == [original] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T13:13:18.180

我避免使用正则表达式，因为它不会减轻重量。此代码自动换行，如果单个单词超过 10 个字符，则将其中断。它还负责处理多余的空白。

```
import static java.lang.Character.isWhitespace;

public static void main(String[] args) {
  final String original =
    "This is a sentence.Rajesh want to test the application for the word split.";
  final StringBuilder b = new StringBuilder(original.trim());
  final List<String> matchList = new ArrayList<String>();
  while (true) {
    b.delete(0, indexOfFirstNonWsChar(b));
    if (b.length() == 0) break;
    final int splitAt = lastIndexOfWsBeforeIndex(b, 10);
    matchList.add(b.substring(0, splitAt).trim());
    b.delete(0, splitAt);
  }
  System.out.println("Match List "+matchList);
}
static int lastIndexOfWsBeforeIndex(CharSequence s, int i) {
  if (s.length() <= i) return s.length();
  for (int j = i; j > 0; j--) if (isWhitespace(s.charAt(j-1))) return j;
  return i;
}
static int indexOfFirstNonWsChar(CharSequence s) {
  for (int i = 0; i < s.length(); i++) if (!isWhitespace(s.charAt(i))) return i;
  return s.length();
} 
```

印刷：

```
Match List [This is a, sentence.R, ajesh, want to, test the, applicatio, n for the, word, split.] 
```

# c# - 向列表视图添加控件时缺少行大小

> ID：10702370
> 
> 赞同：0
> 
> 时间：2012-05-22T12:49:00.993
> 
> 标签：c#, visual-studio-2010, listview

Listview 是由 Sql Table 绑定的，我正在尝试在 Listview 上添加类似文本框的控件，如下所示：

```
listviewBinding();
TextBox tb = new TextBox();
tb.BackColor = Color.Red;
tb.Text = "To Balance B/f";
tb.Width = listView1.Width;
listView1.Controls.Add(tb);
listView1.HeaderStyle = ColumnHeaderStyle.None; 
```

问题是第一行是未命中大小，因此我们无法正确读取它。它的解决方案是什么？

# c# - 在 C# 中移动没有边框的表单？

> ID：10702371
> 
> 赞同：0
> 
> 时间：2012-05-22T12:49:01.470
> 
> 标签：c#, visual-c#-express-2010

> **可能重复：**
> [C# - 使无边界表单可移动？](https://stackoverflow.com/questions/1592876/c-sharp-make-a-borderless-form-movable)
> [鼠标拖动无边框窗体](https://stackoverflow.com/questions/4767831/drag-borderless-windows-form-by-mouse)

好的，我已经制作了一个带有控件的表单。表格是无边界的。表单内的控件称为navigationPanel1。我希望能够单击并拖动控件以移动表单。我怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-22T12:55:32.080

您必须订阅 mouse-down、mouse-up 和 mouse-move 事件。在鼠标移动中，您将表单的位置设置为新位置（您必须计算）。仅当鼠标按钮按下时才应执行鼠标移动中的代码（保存此状态）

# ruby-on-rails - Gmaps4Rails：当只有一个标记可用时设置缩放和平移位置。

> ID：10702373
> 
> 赞同：1
> 
> 时间：2012-05-22T12:49:07.887
> 
> 标签：ruby-on-rails, gmaps4rails

以前，我按照[另一个答案](https://stackoverflow.com/questions/8213093/gmaps4rails-how-to-open-the-infowindow-of-the-single-marker-by-default-when-th)中的说明让信息窗口在地图上只有一个点时自动打开。我有这个工作，但信息窗口在顶部被略微切断，因为手动打开信息窗口时地图不会重新居中（就像单击标记以显示信息窗口时一样）。我的观点只是使用基本的：

```
gmaps(:map_options => { :auto_adjust => true },
      :markers => { :data => @json, :options => {:do_clustering => true} }) 
```

在我看来，下面的 JavaScript：

```
<script type="text/javascript" charset="utf-8">
  Gmaps.map.callback = function() {
    if (Gmaps.map.markers.length == 1) {
      var marker = Gmaps.map.markers[0];
      var infowindow = marker.infowindow;
      infowindow.open(Gmaps.map.map, marker.serviceObject);
    }
  }
</script> 
```

我想弄清楚的是将缩放级别设置为 14 以及重新定位标记的最佳方法，以便整个信息窗口显示在屏幕上并且不会在顶部被切断。

我也看过[这个问题](https://stackoverflow.com/questions/8990151/gmaps4rails-zoom-on-one-marker)，他似乎有类似的问题，但不包括重新定位。我也可以执行 Gmaps.map.map.setZoom(14); 在控制台中并让它像 Gmaps.map.map.panBy(0, -80); 一样执行 但它们似乎不是从回调中执行的。另外，我不确定 panBy 是否是解决我的信息窗口被切断问题的最有效方法。

**使用：** gmaps4rails (1.4.8) 和 Rails (3.2.3)

任何人有任何想法或想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:43:05.610

正如我们最后得出的结论，当您只有一个标记时，您应该使用专用的辅助选项。

由于谷歌地图异步加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T08:32:24.273

可能是因为`Gmaps.map.map`不赞成使用`Gmaps.map.serviceObject`（请参阅[https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Javascript-goodies](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Javascript-goodies)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-26T12:32:35.650

我在我的应用程序中遇到了类似的问题，但我做了以下解决。

试试看

1) 将 map_option "auto_adjust" 更改为 false，如下所示

gmaps(:map_options => { :auto_adjust => false }, :markers => { :data => @json, :options => {:do_clustering => true} })

2) 现在在回调函数中调用 map.setZoom(your value) 然后地图将被缩放

# .net - 在 .Net 中保持 Powershell 运行空间处于打开状态

> ID：10702375
> 
> 赞同：2
> 
> 时间：2012-05-22T12:49:18.333
> 
> 标签：.net, powershell

我正在尝试从 VB.Net 中运行一些 PowerShell 代码（如果您知道，C# 编码器也可能会有所帮助！）。
代码的第一部分，我需要使用密码连接到 na-controller，并且需要保持连接打开。我还有其他需要通过单击按钮运行的命令（获取文件、显示文件、删除特定文件）。
如何保持运行空间打开并分别运行每一行代码？我需要使用“CreateRunspacePool”吗？如果是这样，我该如何使用它？

**编辑：** 我现在正在使用 RunspaceStateInfo.State，但我不知道保持连接打开的方法。我已经尝试了 Page_Load 和 Page_Init 事件来让它打开一次，但是在某个地方，它会关闭。我确实删除了“.Close”命令

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T20:12:18.353

您没有提供很多信息，但是从您谈论 Page_Load 和 Page_Init 开始，我假设您正在尝试从 ASP.NET Web 应用程序中执行此操作。通过按下按钮和设置运行空间上的状态。

如果这是一个 winforms 应用程序，您可以简单地创建一个运行空间：

```
Runspace runspace = RunspaceFactory.CreateRunspace(Host); 
```

然后创建 powershell 实例并重用这个运行空间：

```
var ps1 = PowerShell.Create();
ps1.Runspace = runspace;
ps1.AddScript("Write-Host 'hello'")

var ps2 = PowerShell.Create();
ps2.Runspace = runspace;
ps2.AddScript("Write-Host 'world'") 
```

您可以保留运行空间，只需在按钮单击之间针对同一运行空间运行脚本。

如果您在 asp.net 中，但是这是不同的，显然每次单击按钮时都会产生一个新线程，并且您将无法将运行空间保留在变量中，因此您需要做一些事情，例如将其保留在会议如下：

```
protected PSHost Host
{
    get
    {

        if (this.Session["Host"] == null)
        {
            var host = new MyHost();
            this.Session["Host"] = host;
        }

        return (PSHost)this.Session["Host"];
    }
}

protected Runspace Runspace
{
    get
    {

        if (this.Session["Runspace"] == null)
        {
            var rs = RunspaceFactory.CreateRunspace(Host);
            this.Session["Runspace"] = rs;
            rs.Open();
        }

        return (Runspace)this.Session["Runspace"];
    }
} 
```

然后我测试了它是否有效：

```
protected void Page_Load(object sender, EventArgs e)
{
    Button1.Click += new EventHandler(Button1_Click);
    Button2.Click += new EventHandler(Button2_Click);
    Button3.Click += new EventHandler(Button3_Click);
}

void Button3_Click(object sender, EventArgs e)
{
    var ps = PowerShell.Create();
    ps.Runspace = this.Runspace;
    ps.AddScript("$test | ft | out-string");
    var input = new List<object>();
    var output = new List<object>();
    ps.Invoke(input, output);
    TextBox1.Text = output.First().ToString();
}

void Button2_Click(object sender, EventArgs e)
{
    var ps = PowerShell.Create();
    ps.Runspace = this.Runspace;
    ps.AddScript("$test = 'world'");
    ps.Invoke();
}

void Button1_Click(object sender, EventArgs e)
{
    var ps = PowerShell.Create();
    ps.Runspace = this.Runspace;
    ps.AddScript("$test = 'hello'");
    ps.Invoke();
} 
```

当我单击按钮 1 和 3 时，它会显示“Hello”和

当我单击按钮 2 和 3 时，它显示“世界”

所以它成功地重用了运行空间。

# php - 解析错误，预计 activecollab 模型类中出现“T_PAAMAYIM_NEKUDOTAYIM”错误

> ID：10702378
> 
> 赞同：4
> 
> 时间：2012-05-22T12:49:27.813
> 
> 标签：php, permissions, module, controller, activecollab

我正在处理activecollab自定义模块的权限，当尝试调用静态方法的函数时收到此错误消息不知道为什么；请做帮助将是真正appericiatable ..

```
Parse error: parse error, expecting `T_PAAMAYIM_NEKUDOTAYIM' in D:\wamp\www\activecollab\public\activecollab\3.0.9\modules\projectcomrequest\models\Projectcomrequests.class.php on line 130 
```

我在模型文件中做的代码是：

```
 class Projectrequests extends DataManager {

   ...
   ....

        function getPermissionValue($name){
            $roles = Roles::find();
            foreach($roles as $role) {
                if($role->getPermissionValue($name))
                    return true;
                else
                    return false;
        }

        static function canAccess() {
          if(self::getPermissionValue('can_use_project_request')) return true;
            return false;
        } // canAccess

  ...
  ..

  } 
```

通过这个调用控制器：

```
echo Projectrequests::canAccess(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T12:52:18.353

```
 foreach($roles as $role) {
        if($role->getPermissionValue($name))
            return true;
        else
            return false; 
```

你错过了一个结束 } 那里。所以应该是：

```
 class Projectrequests extends DataManager {

   ...
   ....

        function getPermissionValue($name){
            $roles = Roles::find();
            foreach($roles as $role) {
                if($role->getPermissionValue($name))
                    return true;
                else
                    return false;
            } // <-- here
        }

        static function canAccess() {
          if(self::getPermissionValue('can_use_project_request')) return true;
            return false;
        } // canAccess

  ...
  ..

  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T12:52:48.900

当`$this`您尝试在`canAccess()`. 您应该调用`self::`而不是`$this->`访问类上下文，然后您只能调用其他静态字段和方法。你也必须使`getPermissionValue`静态。

还有几个错误：

*   `{`你在你的 foreach 中忘记了一个。为您解决了这个问题（仅在循环内返回 true，else 构造是无用的，否则您的 foreach 只会循环一次）。
*   您可以立即返回对`getPermissionValue`in的调用值，`canAccess`因为它无论如何都是布尔值（if-else 构造有点没用）。

更正的代码：

```
static function getPermissionValue($name){
    $roles = Roles::find();
    foreach($roles as $role) {
        if($role->getPermissionValue($name))
            return true;
    }    
    return false;
}

static function canAccess() {
    return self::getPermissionValue('can_use_project_request');
} // canAccess 
```

我也想建议使用访问修饰符`public`，`private`因为它是一种很好的做法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T12:52:46.007

```
<?php
class Projectrequests extends DataManager {

   ...
   ....

        function getPermissionValue($name){
            $roles = Roles::find();
            foreach($roles as $role) {
                if($role->getPermissionValue($name))
                    return true;
                else
                    return false;
            } // <!---- YOUR ERROR IS HERE
        }

        static function canAccess() {
          if($this->getPermissionValue('can_use_project_request')) return true;
            return false;
        } // canAccess

  ...
  ..

  } 
```

此外，静态方法无权访问`$this`您需要`self::`使用

# ocean - 如何访问域对象统计选项卡中的属性？

> ID：10702383
> 
> 赞同：1
> 
> 时间：2012-05-22T12:49:35.410
> 
> 标签：ocean, petrel

访问支柱网格和视野的统计选项卡中的值对我很有帮助。我可以自己计算大部分，但如果这些属性存在于某个地方，如果我可以访问它们会容易得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:17:25.040

StatisticsService 和 Statistics 类应该为您提供您需要的大部分信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T15:02:05.633

您可以在 Ocean Developers Guide 的第 9 卷中找到有关使用它的详细信息。这是海燕定制卷。

# mybatis - MyBatis mapper 调用工厂方法

> ID：10702385
> 
> 赞同：2
> 
> 时间：2012-05-22T12:49:48.793
> 
> 标签：mybatis

我希望 mybatis 调用工厂方法来创建对象而不是构造函数。因此，对于空值属性，我可以返回一个 NULL 对象（它具有处理所有边缘情况的重写行为）而不是实际对象。我可以用 mapper.xml 实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:57:02.457

定义自己的 ObjectFactory

[http://www.mybatis.org/core/configuration.html#objectFactory](http://www.mybatis.org/core/configuration.html#objectFactory)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:36:02.490

要回答您的具体问题，据我所知，无法直接（且仅）在 mapper.xml 文件本身中指定工厂方法。然而，在 MyBatis 中有两个选项可以做你想做的事：

1.  正如 Bhaskar 的回答中所述，您可以使用 ObjectFactory。
2.  理论上，您也可以定义一个 TypeHandler，但我在最近的测试中无法让它工作。

如果您想查看如何使用 MyBatis ObjectFactory 来实现 Null 对象的工作示例，请参阅我的 MyBatis koans 的 koan19：[https](https://github.com/midpeter444/mybatis-koans) ://github.com/midpeter444/mybatis-koans 。（在 completed-koans/koan19 目录中查找我想出的解决方案。）

# google-apps-script - 如何在 Google 应用脚本中使用 setStyleName？

> ID：10702386
> 
> 赞同：0
> 
> 时间：2012-05-22T12:49:52.597
> 
> 标签：google-apps-script

我想知道在 Google App Scripts 中使用 setStyleName 函数。我想的是，我们可以定义 css 并将其设置在小部件中。请提供一些例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:25:48.563

每安东索拉多

[http://productforums.google.com/forum/#!searchin/apps-script/setstylename/apps-script/g518ngYdg1M/3OagCbn4c-MJ](http://productforums.google.com/forum/#!searchin/apps-script/setstylename/apps-script/g518ngYdg1M/3OagCbn4c-MJ)

> 如果您阅读 setStylePrimaryName 以及其他三个的方法描述，您将看到以下内容：“这对于调试很有用，但在其他方面的使用很少，因为在 UiApp 中无法使用自定义样式表。”
> 
> 例如，您可以设置样式名称并将其用作标记，以便使用 firebug 在浏览器中查找该小部件。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-11T22:51:55.713

您可以在 Google Apps Script UiApp 中使用样式表，格式与 CSS 略有不同，但您有一个单独的文件来包含格式的原则仍然存在。

[请参阅我在http://www.harryonline.net/scripts/stylesheets-in-google-apps-script-uiapp/494](http://www.harryonline.net/scripts/stylesheets-in-google-apps-script-uiapp/494)上的博客文章

# ruby - 如何使用 Ruby 的 net/ssh 与目标网络中的主机建立连接？

> ID：10702388
> 
> 赞同：1
> 
> 时间：2012-05-22T12:50:00.203
> 
> 标签：ruby

我正在尝试使用 Ruby 的 net/ssh 与目标网络内的主机建立连接。如果我在 bash 中，它看起来像这样：

```
ssh $gateway_host -t ssh $target_host 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:00:44.203

```
gw = Net::SSH::Gateway.new(gw_host, gw_user)
gw.ssh(server_host, server_user) do |ssh|
    ssh.exec!("do_stuff")
end 
```

# session - 如何覆盖 node.js 快速会话的会话 ID（使用护照）

> ID：10702399
> 
> 赞同：4
> 
> 时间：2012-05-22T12:50:50.087
> 
> 标签：session, node.js, express, connect

我正在实施一种调用我们内部身份验证服务的护照策略。内部身份验证服务生成会话 ID，因此我需要确保连接会话使用该 ID 而不是默认生成的 ID。

有没有办法做到这一点？是否可以提供我自己的钩子函数来连接以生成会话 ID？我无法想象它像设置 session.id 或类似的东西那么简单，因为我无法控制 connect 何时或如何实际创建会话。

有没有人解决过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:00:07.337

Connect 的会话中间件的当前实现无法做到这一点，但您可以分叉会话中间件并更改会话 ID 的生成方式，即这一行：

[https://github.com/senchalabs/connect/blob/master/lib/middleware/session.js#L202](https://github.com/senchalabs/connect/blob/master/lib/middleware/session.js#L202)

“fork”是指复制上面的文件，更改 sessionID 的分配并在配置会话中间件时使用新文件。

更新：

以下是我如何使用自定义 id 重新生成会话（注意 - 这只是一个想法，我还没有测试过）：

```
// this is the function you'll be calling in your routes or whatever
req.regenerateSession = function(newSid) {
  // keep old session data
  var oldSessionData = req.session;

  // destroy current session and make a new one with your custom id
  store.destroy(req.sessionID, function() {
    store.generate(req, newSid);

    // copy back the session data
    // since you don't want to lose it probably
    req.session = oldSessionData;
  });
}

// replace the session store generate function to accept a custom sessionID
// https://github.com/senchalabs/connect/blob/master/lib/middleware/session.js#L201
store.generate = function(req, customID) {
  req.sessionID = customID || utils.uid(24);
  req.session = new Session(req);
  req.session.cookie = new Cookie(req, cookie);
} 
```

# php - Instagram API 实时订阅

> ID：10702402
> 
> 赞同：1
> 
> 时间：2012-05-22T12:50:51.077
> 
> 标签：php, instagram

所以我遵循[了本教程](http://thegregthompson.com/instagram-real-time-api-php/)，一切正常，但现在我有点困惑，如果我想订阅标签，如何获得带有图片数据的响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T10:09:25.677

我知道这是一个老问题，但它在我最后提出了一些问题。

当我们说标签订阅的通知被推送到您的应用程序时，您现在可以在执行此操作时请求标签/媒体/最近，保存在“分页”下找到的 min_tag_id 值

现在对于每个新的通知请求标签/媒体/最近？min_tag_id={YOUR_MIN_ID} 这将只返回此标签的最新提交。

# eclipse-plugin - Eclipse 中的 FindBugs 损坏？

> ID：10702408
> 
> 赞同：0
> 
> 时间：2012-05-22T12:51:08.190
> 
> 标签：eclipse-plugin, sts-springsourcetoolsuite

使用 Eclipse STS 2.9.1，我无法让 FindBugs 2 工作。当我右键单击项目和“FindBugs”时，我收到一条错误消息，指出我的项目缺少 org.osgi.framework.BundleActivator。

有没有人遇到过同样的问题并设法解决了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:18:15.030

在 STS 3.0.0.M1 上查找错误对我有用。

我还想问你错误日志中的完整堆栈跟踪。您可以将其粘贴到您的答案中。

但是，您最好的选择可能是卸载并重新安装该功能。

# asp.net-mvc - 带有点“。”的 ASP MVC 路由问题。

> ID：10702414
> 
> 赞同：2
> 
> 时间：2012-05-22T12:51:36.110
> 
> 标签：asp.net-mvc, routes

我有这条路线：

> 文件{FileId}/{name}

`name`除非里面有一个点，否则它工作得很好。

例如，这些工作：

> 文件 1/blah，文件 90/foo -

但它没有：

> 文件 1/blah.doc

在这种情况下，我得到的只是`404 error`. 似乎它寻找实际文件`blah.doc`而不是使用路由系统。

此问题仅发生在生产服务器中。我什至试过

> httpRuntime RelaxedUrlToFileSystemMapping="true"

但这没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T02:47:34.023

'.' 之后的所有内容 是文件扩展名。如果该扩展没有映射到 ASP.NET，它就不会被移交给 ASP.NET 处理程序。IIS 改为查找静态文件。因此，您需要为您的案例（web.config）添加一个处理程序，然后您的路由将能够捕获请求。

```
<validation validateIntegratedModeConfiguration="false" />
   <handlers>
      <add name="FileHandlerDot" verb="GET" path="file*/*.*" type="System.Web.Mvc.MvcHttpHandler, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
   </handlers>
</validation> 
```

# c++ - 在openCV中计算字符串的长度（以像素为单位）

> ID：10702422
> 
> 赞同：3
> 
> 时间：2012-05-22T12:51:59.820
> 
> 标签：c++, image, opencv, drawing, size

有人知道任何函数`openCV`或任何方法来获取以像素为单位的字符串长度吗？

例如，我有

> 字符串 c = "你好"

我用它来绘制图像`cvPutText`。如何获取该字符串占用的图像中该字符串的像素数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T13:08:33.543

您正在寻找[getTextSize](http://docs.opencv.org/modules/core/doc/drawing_functions.html#gettextsize)。

# autoconf - 我应该使用哪个目录来处理“错误：使用了 'extra_PROGRAMS' 但未定义 'extradir'”？

> ID：10702423
> 
> 赞同：0
> 
> 时间：2012-05-22T12:52:14.470
> 
> 标签：autoconf, automake

我有一个 autoconf/automake 系统，它有一个名为`stand`. 我不想`stand`正常构建，所以我的 Makefile.am 中有这个：

```
bin_PROGRAMS = grace
extra_PROGRAMS = stand
...
stand_SOURCES = stand.cpp barry.cpp ... 
```

这已经工作了一段时间，但 automake 刚刚在我的系统上更新，我现在收到此错误：

```
src/Makefile.am:4: error: 'extra_PROGRAMS' is used but 'extradir' is undefined
src/Makefile.am:66: warning: variable 'stand_SOURCES' is defined but no program or
src/Makefile.am:66: library has 'stand' as canonical name (possible typo) 
```

所以我添加了这个：

```
extradir = . 
```

但这引起了问题。

我不想`stand`安装程序。这对我来说只是一个测试程序。但它不是正式测试套件的一部分，只是为了我自己的目的。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T17:57:01.253

我们发现了错误！原来`extra`需要大写，像这样：

```
bin_PROGRAMS = grace
EXTRA_PROGRAMS = stand
...
stand_SOURCES = stand.cpp barry.cpp ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:33:53.213

您可以尝试有条件地构建它：

```
noinst_PROGRAMS=
if BUILD_STAND
noinst_PROGRAMS += stand
endif
stand_SOURCES = stand.cpp barry.cpp ... 
```

这不会安装它，因为它已经存在，`noinst_PROGRAMS`而其他人通常不会构建它，因为`BUILD_STAND`通常不会为他们定义。

# xamarin.ios - 如何从 UIViewController 导航到 SplitViewController

> ID：10702427
> 
> 赞同：1
> 
> 时间：2012-05-22T12:52:22.833
> 
> 标签：xamarin.ios

我有 6 个视图。第二个控制器是 Splitviewcontroller，第三个控制器是 viewcontroller。现在我如何从第三个视图的 uiviewcontroller 导航到另一个 splitviewcontroller。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:09:48.820

您`ViewController`很可能以模态形式呈现，在这种情况下，它应该有一个委托给您的`SplitViewController`.

完成. `ViewController`_ `dismissModalViewControllerAnimated`_`SplitViewController`

如果你不熟悉协议/委托的东西，这里有一篇关于它[的好帖子。](http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html)

# hl7 - 如果我可以接收 HL7 XML，我可以接收 CCD 吗？

> ID：10702430
> 
> 赞同：0
> 
> 时间：2012-05-22T12:52:39.430
> 
> 标签：hl7

我正在使用 Mirth Connect 侦听器，因此可以很好地接收 HL7 XML（显然）。不过，有人问我是否能够接收 CCD 消息。

查看 Wikipedia，“CCD 规范是对 HL7 临床文档架构 (CDA) 标准的约束”。对我来说，这意味着我至少可以通过我的正常流程接收到消息。不过，解析消息可能完全不同。

谁能告诉我我在阅读描述时是否正确？Mirth 在接收 CCD 信息时会遇到问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:56:01.027

答案是肯定的，大多数情况下。以下是如何设置接收 CDA 消息的示例。

真正的问题取决于您需要如何接收消息以及需要用它做什么。CDA 和 HL7 v3 消息传递不像 HL7 v2（典型的管道分隔的 HL7 消息）那么简单。消息结构非常复杂，需要大量学习。此外，CDA 消息不会像 HL7 v2 那样通过 MLLP 协议传输。我通常看到人们使用[XDS 配置文件](http://wiki.ihe.net/index.php?title=Cross-Enterprise_Document_Sharing)传输这些消息。因此，根据您需要如何接收消息，可能需要完成一些额外的工作。

我相信 Mirth 的付费/许可版本提供了一些组件来帮助处理 CDA/HL7 v3 消息，但它不包含在 OSS 版本中。

***在 Mirth 中接收 CDA 消息***

Mirth 接收 XML 消息没有问题。只需确保在**通道中将****数据类型**设置为 XML 。

 **![源连接器入站作为 XML](../Images/d86e90291a4e3e0699f4ef70ff9bdb15.png)

从那里，您可以设置接收和目的地。如果您需要使用 CDA 的 XML，请确保在**消息转换器中的****消息模板**部分提供示例 CDA。完成此操作后，该消息应显示在“**消息树**”部分中。

![CDA 作为消息树](../Images/c6c9bd398efcf23ccba2175b73405336.png)**

# c# - 如何解决 System.FormatException？

> ID：10702431
> 
> 赞同：0
> 
> 时间：2012-05-22T12:52:40.697
> 
> 标签：c#, sockets, formatexception

当 PC 之间发生传输时，请告诉我如何解决此异常。

**抛出异常：**

> (System.FormatException)
> 
> 引发了 System.FormatException：“输入字符串的格式不正确。”

排队 ：

```
fileSize = Convert.ToInt32(Encoding.UTF8.GetString(byteFileSize)); 
```

## 我的整个代码：

* * *

```
private void Server()
{
    FileStream fs = null;
    BinaryWriter bw = null;
    int fileSize = 0;
    int bytesReceived = 0;
    int bufferInt = Int32.Parse(textBoxBYTE2.Text);

    byte[] bufferByte = new byte[bufferInt];
    byte[] byteFileName = Encoding.UTF8.GetBytes("empty");
    byte[] byteFileSize = Encoding.UTF8.GetBytes("empty");

    string fileName = "";

    int bytesTmp = 0;

    try
    {   
        IPEndPoint localEndPoint = new IPEndPoint(IPAddress.Parse(ServerIP), int.Parse(textBoxPORT1.Text));
        Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp );
        socket.Bind(localEndPoint);
        socket.Listen(10);
        Socket listener = socket.Accept();
        //[1] Принимаем имя
        bytesTmp = listener.Receive(byteFileName);
        fileName = Encoding.UTF8.GetString(byteFileName, 0, bytesTmp);
        //[2] Принимаем размер
        listener.Receive(byteFileSize);

        fileSize = Convert.ToInt32(Encoding.UTF8.GetString(byteFileSize)); //Exception Thrown Here

        fs = new FileStream(Path.Combine(textBoxPATH.Text, fileName), FileMode.CreateNew, FileAccess.Write);
        bw = new BinaryWriter(fs);
        //<!--
        while (bytesReceived < fileSize)
        {
            if ((fileSize - bytesReceived) < bufferInt)
            {
                int bytes = (fileSize - bytesReceived);
                byte[] buf = new byte[bytes];
                bytes = listener.Receive(buf);
                bw.Write(buf, 0, bytes);
                bytesReceived = bytesReceived + bytes;
            } else {
                int bytes = listener.Receive(bufferByte);
                bw.Write(bufferByte, 0, bytes);
                bytesReceived = bytesReceived + bytes;
            }
        }
        //-->
        //Закрытие
        bw.Close();
        socket.Close();
        listener.Close();
    }
    catch (Exception e)
    {
        System.Windows.Forms.MessageBox.Show("" + e, "Сервер сообщает");
    }
}
private void Client()
{
    FileStream fs = null;
    BinaryReader br = null;
    int bytesSent = 0;
    int fileSize = 0;            
    int bufferInt = Int32.Parse(textBoxBYTE2.Text);
    byte[] bufferByte = new byte[bufferInt];
    byte[] byteFileName = new byte[512];
    byte[] byteFileSize = new byte[512];
    string fileName = "";

    try
    {
        Socket sender = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        sender.Connect(textBoxADDRESS2.Text, int.Parse(textBoxPORT2.Text));
        FileInfo fileInfo = new FileInfo(textBoxFILE.Text);
        fileName = fileInfo.Name;
        byteFileName = Encoding.UTF8.GetBytes(fileName);
        //[1] Передаем имя
        sender.Send(byteFileName);
        fs = new FileStream(textBoxFILE.Text, FileMode.Open);
        br = new BinaryReader(fs);
        fileSize = (int) fs.Length;
        byteFileSize = Encoding.UTF8.GetBytes(Convert.ToString(fileSize));
        //[2] Передаем размер файла
        sender.Send(byteFileSize);
        //<!--
        while (bytesSent < fileSize)
        {
            if ((fileSize - bytesSent) < bufferInt)
            {
                int bytes = (fileSize - bytesSent);
                byte[] buf = new byte[bytes];
                br.Read(buf, 0, bytes);
                sender.Send(buf);
                bytesSent = bytesSent + bytes;
            } else {
               br.Read(bufferByte, 0, bufferInt);
               sender.Send(bufferByte);
               bytesSent = bytesSent + bufferInt;
            } 
        }
        //-->
        //Закрытие
        br.Close();
        sender.Close();
    }
    catch (Exception e)
    {
        System.Windows.Forms.MessageBox.Show("" + e, "Клиент сообщает");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T12:57:01.703

在您对 的调用中[`Socket.Receive`](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.receive.aspx)，您忽略了*实际*读取了多少字节。

这引发了两个问题：

*   你怎么知道你什么时候读够了？
*   您当前假设*所有*字节数组都包含有用的数据，而其中一些很可能是“旧”数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:55:37.950

在我看来你应该打电话给

```
fileSize = byteFileSize.Length; 
```

由于`byteFileSize`是一个`byte[]`

# c++ - 在 MFC 中添加加速器（快捷方式） - 如何？

> ID：10702437
> 
> 赞同：4
> 
> 时间：2012-05-22T12:52:52.840
> 
> 标签：c++, c, mfc

我找到了这个链接：http: [//support.microsoft.com/kb/222829](http://support.microsoft.com/kb/222829)

但我不能理解那么多。

好的，我知道我需要将其添加到我的头文件中：

```
HACCEL  m_hAccelTable; 
```

然后这个：

```
m_hAccelTable = LoadAccelerators(AfxGetInstanceHandle(), MAKEINTRESOURCE(IDR_ACCELERATOR1)); 
```

到我的主要 .cpp

但这会去哪里？

```
BOOL CAboutDlg::PreTranslateMessage(MSG* pMsg) {
   if (m_hAccelTable) {
      if (::TranslateAccelerator(m_hWnd, m_hAccelTable, pMsg)) {
         return(TRUE);
      }
   }
   return CDialog::PreTranslateMessage(pMsg);

} 
```

我需要大约 6 个快捷方式（CTRL + U 加载某些内容，CTRL + O 加载其他内容），我不明白这是如何工作的，需要一点帮助

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-22T22:56:43.507

现在，MSDN 文章具有误导性。它显示了如何将加速器添加到 About 框，并且只有 About 框能够处理在这种情况下相当于按下具有 IDC_BUTTON1 ID 的按钮的加速器。

您需要做一些非常不同的事情，让应用程序中的所有对象都有机会处理此消息。这是在 MDI/SDI 应用程序中为您完成的。

在资源中创建加速器表后，您必须添加加速器： 组合键配对加速器组合键，使用时会生成具有适当 ID 的命令消息。添加完成后，您必须为每个 ID 创建命令消息处理程序。使用加速器时，将调用处理程序，您可以添加所需的代码。现在这样做：向您的应用程序类声明 HACCEL 类型变量。在 InitInstance 中调用 LoadAccelerators。使用向导在您的应用程序类中插入 PreTranslateMessage 覆盖。添加以下内容：

```
 if (m_hAccelTable) 
      {
                if (::TranslateAccelerator(*m_pMainWnd, m_hAccelTable, pMsg)) 
                {
                          return(TRUE);
                }
      } 
```

这将允许主对话框处理加速器。注意 *m_pMainWnd。它是您的对话句柄（自动投射）。现在，您可以将任何加速器的处理程序添加到对话框或应用程序类。您还可以使用 OnCmdMsg 将命令消息路由到应用程序中的任何窗口。

我对未来的建议。当您决定让您的应用程序基于对话框时，请考虑使用 CFormView 派生类创建 SDI 应用程序。您可以更改框架样式以不允许调整大小，它看起来像基于对话框但。. . 您将能够免费使用工具栏和菜单，最重要的是，您将免费获得所有加速器和命令路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T16:39:47.003

您引用的页面描述了将加速器表添加到基于对话框的应用程序。

您是在创建一个基于对话框的应用程序，还是只是一个带有菜单栏的基于 MFC 框架的普通应用程序？

如果您正在执行前者，那么您引用的页面建议您需要覆盖 PreTranslateMessage 对话框方法。

如果你在做后者，那么你只需要调用[CFrameWnd::LoadAccelTable](http://msdn.microsoft.com/en-us/library/0kba7ctw.aspx)函数。

# linq - 使用 LINQ 执行搜索并忽略 î 或 ô 或 ê 等字符

> ID：10702440
> 
> 赞同：0
> 
> 时间：2012-05-22T12:53:13.750
> 
> 标签：linq, linq-to-sql

在我的数据库中，我有一些类似这样的文本：'AVENUE GEORGES LEMAîTRE'。如您所见，'i' 字符上有一个 ^。

是否可以使用 LINQ 执行搜索并忽略此特殊字符。

所以我想搜索**“AVENUE GEORGES LEMAITRE”**并找到“AVENUE GEORGES LEMAITRE”。

```
var address = AddressRepository.Find(m => m.Street == "AVENUE GEORGES LEMAITRE").ToList(); 
```

可能的？如何？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:35:20.057

尝试：

```
List<String> address = (from ad in addressRepository where string.Compare("AVENUE GEORGES LEMAITRE", ad.Street.ToUpperInvariant(),CultureInfo.CurrentCulture, CompareOptions.IgnoreNonSpace) == 0 select ad.Street).ToList(); 
```

除此以外

此博客条目可能会有所帮助：

它详细说明了如何从字符串中删除变音符号。

转到代码示例的底部。

一旦字符被替换，就可以比较字符串。

希望这可以帮助。

[http://www.siao2.com/2007/05/14/2629747.aspx](http://www.siao2.com/2007/05/14/2629747.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:04:13.373

您应该修改您的数据库模型以包含“规范”版本`Street`以及您向用户显示或接受的“实际”版本。例如，该规范版本可以全部为大写，删除所有变音符号，并规范化为特定的 Unicode[规范化形式](http://unicode.org/faq/normalization.html)。

假设您有一个执行此操作的方法`Canonicalize`（这可能是[一个很好的起点](https://stackoverflow.com/questions/249087/how-do-i-remove-diacritics-accents-from-a-string-in-net)），您将在保存地址时调用它：

```
var address = /* incoming data */
address.CanonicalStreet = Canonicalize(address.Street);
/* save the model */ 
```

你也可以在检索数据时使用它：

```
var street = "AVENUE GEORGES LEMAITRE";
street = Canonicalize(street);
var address = AddressRepository.Find(m => m.CanonicalStreet == street).ToList(); 
```

# opengl - 如何使用 glDrawPixels 将图片渲染为背景

> ID：10702445
> 
> 赞同：1
> 
> 时间：2012-05-22T12:53:32.173
> 
> 标签：opengl, textures, texture-mapping, gldrawpixels

事情是这样的：我想加载一张图片作为填充整个视口的背景。无论相机朝向何处，此背景都应始终朝向相机。首先我自然认为使用纹理作为背景，我的代码如下：

```
glMatrixMode(GL_PROJECTION);
glPushMatrix();
glLoadIdentity();
glOrtho(0,1,0,1,0,1);
glMatrixMode(GL_MODELVIEW);
glPushMatrix();
glLoadIdentity();

glBindTexture(GL_TEXTURE_2D, myimage.GetID());
glEnable(GL_TEXTURE_2D);

glBegin(GL_QUADS);
glTexCoord2f(0, 0); glVertex2f(0, 0);
glTexCoord2f(1, 0); glVertex2f(1, 0);
glTexCoord2f(1, 1); glVertex2f(1, 1);
glTexCoord2f(0, 1); glVertex2f(0, 1);
glEnd();

glMatrixMode(GL_PROJECTION);
glPopMatrix();
glMatrixMode(GL_MODELVIEW);
glPopMatrix();
glDisable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, 0); 
```

相信我，myimage 是一个可以将图片加载到纹理中的 CIMAGE 类，它运行良好。但是，由于某些未知原因，我的应用程序无法将纹理加载到矩形中。（我在这里描述了这个问题[点击](https://stackoverflow.com/questions/10698522/why-cannot-load-texture-into-my-app)）结果，我只能在我的视口周围看到一个矩形框。

所以，我想出了另一个解决方案。

我使用 glDrawPixels 而不是纹理。我的代码如下：

```
glRasterPos2i(0, 0);
glDrawPixels(myimage.GetWidth(), myimage.GetHeight(), (myimage.GetBPP() == 24)?GL_RGB:GL_RGBA, GL_UNSIGNED_BYTE, 
    myimage.GetData()); 
```

图片出现了！然而，这张照片并不总是面对我的相机。它只出现在一个特定的方向。你知道，就像场景中的一个物体，而不是一个总是面向相机的背景。

那么有人知道如何使用 glDrawPixels 来实现背景吗？

顺便说一句，我认为这个背景不是放置在 3D 场景中的对象。所以广告牌可能不是我的解决方案。同样，这个背景填充了整个视口，并且始终面向摄像机。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T14:08:21.043

纹理加载可能不起作用的原因之一是它可能没有二维的幂。试试正方形 256x256 纹理（或类似的），看看这是否是问题所在。在此处查看有关[矩形纹理](http://www.opengl.org/wiki/Rectangle_Texture)的更多信息。

回到您的背景问题 - 正确的方法是

1.  设置填充整个屏幕的正交投影/视口。

    ```
    glViewport(0,0,nw,nh);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0,1,0,1,0,1);
    glMatrixMode(GL_MODELVIEW); 
    ```

2.  禁用深度测试

3.  使用您加载的纹理/纹理矩形绘制全屏四边形。

    ```
    glBegin(GL_QUADS);
    glVertex2f(0,0);
    glVertex2f(1,0);
    glVertex2f(1,1);
    glVertex2f(0,1);
    glEnd(); 
    ```

4.  设置您的常规投影/模型视图并继续。

希望这可以帮助！

# configuration - 在 Jenkins 应用程序 -OpenShift 上安装和配置 Mercurial

> ID：10702446
> 
> 赞同：0
> 
> 时间：2012-05-22T12:53:32.563
> 
> 标签：configuration, mercurial, openshift

关于如何做到这一点的任何提示？我尝试从[此处](https://www.mercurial-scm.org/release/mercurial-2.2.1.tar.gz)下载的 zip 自动安装，在此处提取：OPENSHIFT_DATA_DIR/hg 和此处的可执行位置：OPENSHIFT_DATA_DIR/jenkins/data/tools/Mercurial/mercurial-2.2.1/bin/hg

我肯定做错了什么，我不是Linux saavy。詹金斯说找不到 mercurial 可执行文件。

任何帮助都非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:25:46.467

[这是来自这里](https://openshift.redhat.com/community/forums/openshift/installing-and-configuring-mercurial-on-jenkins-application)的答案：

感谢您的电子邮件讨论。

## Mercurial 包含一个 README，它解释了几种执行模式：

基本安装：

$ make # 查看安装目标 $ make install # 进行系统范围的安装 $ hg debuginstall # sanity-check setup $ hg # 查看帮助

不安装运行：

$ make local # 为就地使用而构建

## $ ./hg --version # 应该显示最新版本

“make install”在尝试进行系统范围的安装时将不起作用。齿轮上的用户将无权写入系统文件。“make install-home”也不起作用。

“make local” 工作并将其安装在 cwd 中，这样运行以下命令就可以正常工作：

```
./hg --version
Mercurial Distributed SCM (version 2.2.1)
(see http://mercurial.selenic.com for more information) 
```

# mysql - 根据记录数计算Mysql Query的执行时间

> ID：10702447
> 
> 赞同：1
> 
> 时间：2012-05-22T12:53:39.967
> 
> 标签：mysql, execution-time

在执行查询之前，有什么方法可以计算一组 Mysql 查询执行所需的时间，可能基于记录数或其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:02:17.607

No. There are many factors that go into how long a query takes to execute, including:

*   Hardware specs
*   Network configuration, bandwidth, and load
*   MySQL Server configuration and server load
*   MySQL index usage and execution plan
*   Size of data
*   Size of index
*   Size of result set

The best way to determine how long a query will take is to run it. You should disable the query cache using `SQL_NO_CACHE` so that the query cache does not skew the results.

Use `SHOW PROFILE` to see where MySQL is spending its time.

Use `EXPLAIN` to see the execution plan so that you can optimize the execution plan.

Using EXPLAIN, you can get a feel for whether the query is efficient or not, but you will still have to run it to see how long it takes in your environment.

# c++ - 2D照明 - 使光线不穿过墙壁

> ID：10702448
> 
> 赞同：6
> 
> 时间：2012-05-22T12:53:43.910
> 
> 标签：c++, bitmap, 2d, light

我有一张碰撞图，还有一些我想成为光源的地方。光源提供的光实际上是我可以看到地面的形状。现在看起来像这样：

![在此处输入图像描述](../Images/aa223885b4e3884ff924ac0c358d7117.png)

所以光线穿过墙壁。我想让它看起来像这样：

![在此处输入图像描述](../Images/67e7698dc463009a9380581a48bce91b.png)

（我用深黄色标记了与墙壁的碰撞）

所以光线在遇到墙壁时会停止。我想获得正确光线的形状，最好是包含它的位图）

我的第一个想法是从光源投射光线并检查它们何时与墙壁碰撞（我知道如何做到这一点），但是我需要每隔 0.001 度投射光线，因此生成灯光的时间太长了。其次是光的形状并不总是圆形，有时它可以是椭圆或半椭圆，甚至是三角形或圆形的一部分。通常，我的位图的光线不会碰撞任何东西，我想将其减去一点以使其看起来像第二张图像。

最后一件事，我使用的是 allegro 4.2.1，但前面提到的所有位图都是带有 0 和 1 的二维数组。

感谢您的帮助，对不起，很长的问题和我的英语不好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T13:12:07.323

基本思想是您计算墙壁的阴影区域，而不是对其进行着色。

[这篇文章](http://archive.gamedev.net/archive/reference/programming/features/2dsoftshadow/)应该给你一个好的开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:57:39.507

在您的特定示例中，您可以通过检查从每个（空）像素到光源中心的视线来轻松地暴力破解它。如果您有视线并且距离在衰减范围内，那么您那里就有光。如果没有，那就是天黑了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T18:54:01.160

MadKeithV 解决方案需要 O(像素数^2) 时间。

我的解决方案是扩展的 MadKeithV 想法，但运行时间为 O（像素数）。经过一些改进，它将在 O（光照像素数）中工作

首先，从包含光源的像素开始。然后使用 BFS 程序用光“感染”最近的像素，并存储光可以从每个点前进的方向的角度范围。

在以下 BFS 实例中，重复此过程，仅考虑“感染范围”中的像素。

# java - 等分数组分为 3 部分

> ID：10702449
> 
> 赞同：0
> 
> 时间：2012-05-22T12:53:50.863
> 
> 标签：java, arrays, split

我有一个数组，我想将它几乎平均分成 3 个部分。我知道该怎么做，但我也想处理数组中有 2 个元素的情况。

在这种情况下，我希望该`center`数组是一个零元素 ( `center.length == 0`) 的空数组（必须有零元素，而不仅仅是一个空数组）。

这是我所做的：

```
int elements = data.length;
int sizeLeft;
int sizeCenter;
int sizeRight;
    if (elements > 2) {
        if (elements % 3 == 0) {
            sizeLeft = elements / 3;
            sizeCenter = elements / 3;
            sizeRight = elements / 3;
        } else if (elements % 3 == 1) {
            sizeLeft = (elements / 3) + 1;
            sizeCenter = elements / 3;
            sizeRight = elements / 3;
        } else { //if (elements % 3 == 2)
            sizeLeft = (elements / 3) + 1;
            sizeCenter = elements / 3;
            sizeRight = (elements / 3) + 1;
        }

        int[] left = makeArray(data, 0, sizeLeft);
        int[] center = makeArray(data, sizeLeft, sizeCenter);
        int[] right = makeArray(data, sizeLeft + sizeCenter, sizeRight);

    } else if (elements == 2) {
        int[] center = new int[]{};
        int[] left = makeArray(data, 0, 1);
        int[] right = makeArray(data, 1, 1);
    } 
```

`makeArray`方法：

```
public static int[] makeArray(int[] data, int startCopy, int size) {
    int[] array = new int[size];
    System.arraycopy(data, startCopy, array, 0, size);
    return array;
} 
```

`data`是将要分成 3 部分的主数组：`left` `center`和`right`.

我想问的是，是否有办法将两者完美地结合`ifs`在一起。`if`

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:02:37.077

你可以简单地写：

```
int elements = data.length;
int mod = elements % 3;
int div = elements / 3;

int sizeLeft = div + (mod > 0 ? 1 : 0);
int sizeCenter = div;
int sizeRight = div + (mod > 1 ? 1 : 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:18:39.427

试试这个

```
 int len= data.Length;
        int pos = len / 3;
        int remaining = len % 3;

        int firstpos = pos + (remaining > 0 ? 1 : 0);
        int centerpos=pos;
        int lastpos = pos + (remaining / 2); 
```

# javascript - kineticjs“无法调用未定义的方法‘appendChild’”

> ID：10702456
> 
> 赞同：2
> 
> 时间：2012-05-22T12:54:25.413
> 
> 标签：javascript, html, kineticjs

我才开始使用 kineticJS，但在遵循 [本](http://www.html5canvastutorials.com/labs/html5-canvas-image-mouseover/)教程后出现了一些错误

我不明白为什么，但我从 KineticJS 文件中得到一个异常：

`"Uncaught TypeError: cannot call method 'appendChild' of undefined".`

当我一步一步做时`alert()`，我看到它在

> var stage = new Kinetic.Stage("rightSide", 578, 200);

但我最确定的是：

> ```
> <canvas id="rightSide">
> </canvas> 
> ```

我也试过：

> ```
> <div id="rightSide">
> </div> 
> ```

我得到了同样的错误。

谢谢。

编辑：针对下面的评论，这是教程中的复制粘贴：

> ```
> </head>
> <body>
> <div id="container">
> </div>
> </body> 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:31:36.813

问题在于舞台的实际创建。

代替

> var stage = new Kinetic.Stage("container", 578, 200);

我做了

> var stage = new Kinetic.Stage({ container: "container", width: 578, height: 200 });

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T06:46:42.667

自 3 月以来 Kinetic.Stage 构造函数发生了变化 [https://github.com/ericdrowell/KineticJS/commit/7ced50f6943af544dbdfc95883ec41728db1d3bd](https://github.com/ericdrowell/KineticJS/commit/7ced50f6943af544dbdfc95883ec41728db1d3bd)

因此，@Gleeb 自己的答案反映了 KineticJS v4.0.x 中的当前实践，而不是早期 v3 时代制作的那些文档/教程。

* * *

应该为向后兼容性提出拉取请求..类似

```
if(arguments.length>1){
 config.container =  arguments[0];
 config.width = arguments[1];
 config.height = arguments[2];
} 
```

...在舞台构造函数中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T13:29:03.207

尝试在`window.onload`事件中运行您的脚本（如示例中所示）并用于`console.log()`调试您的变量/对象。

```
window.onload = function() {
  var stage = new Kinetic.Stage("rightSide", 578, 200);
  console.log('stage =', stage); // DEBUG
}; 
```

...并使用`div`而不是`canvas`.

```
<div id="rightSide"></div> 
```

[您可以在http://www.kineticjs.com/docs/symbols/Kinetic.Stage.php](http://www.kineticjs.com/docs/symbols/Kinetic.Stage.php)找到更多教程和官方 API 文档

# java - 使用正则表达式检查字符串

> ID：10702460
> 
> 赞同：0
> 
> 时间：2012-05-22T12:54:37.120
> 
> 标签：java, regex

我有以下字符串：

```
String s = "http://www.[VP_ANY].com:8080/servlet/[VP_ALL]"; 
```

我需要检查此字符串是否包含 [VP_ANY] o [VP_ALL] 字样。我尝试了这样的事情（以及许多组合），但它不起作用：

```
Pattern.compile("\b(\\\\[VP_ANY\\\\]|\\\\[VP_ALL\\\\])\b").matcher(s).matches() 
```

我究竟做错了什么？

我尝试了以下方法：

s = "www.[VP_ANY].com:8080/servlet/[VP_ALL]";

System.out.println(Pattern.compile("\[VP_ANY\]").matcher(s).matches());

System.out.println(s.replaceAll("\[VP_ANY\]", "A"));

第一个“System.out”返回 false，第二个返回正确的替换。

我用 2 个反斜杠转义了“[”和“]”字符，但是当我保存帖子时，只显示一个。但是我用的是2 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:11:56.090

```
Pattern.compile("\b(\\\\[VP_ANY\\\\]|\\\\[VP_ALL\\\\])\b").matcher(s).matches()
String s = "http://www.[VP_ANY].com:8080/servlet/[VP_ALL]";
                      ^^      ^^                ^^      ^
                      NoWB    NoWB              NoWB    WB 
```

您的正则表达式将不起作用，因为`.`and `[`， between `]`and `.`and between `/`and之间没有单词boundaray`[`

此外，我认为您的转义是错误的，您的单词边界需要多加一个反斜杠，而其他两个则少。

因此，由于单词边界不起作用，您应该可以

```
Pattern.compile("\\[VP_(?:ANY|ALL)\\])") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:56:44.543

尝试这个

```
\[VP_ANY\]|\[VP_ALL\] 
```

我去 Java

```
try {
    boolean foundMatch = "www.[VP_ANY].com:8080/servlet/[VP_ALL]".matches("\\[VP_ANY\\]|\\[VP_ALL\\]");
} catch (PatternSyntaxException ex) {
    // Syntax error in the regular expression
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T12:57:07.983

**试试这个**

```
try {
    boolean foundMatch = subjectString.matches("(?i)\\bVP_(?:ANY|ALL)\\b");
} catch (PatternSyntaxException ex) {
    // Syntax error in the regular expression
} 
```

**或这个**

```
try {
    boolean foundMatch = subjectString.matches("(?i)\\[VP_(?:ANY|ALL)\\]");
} catch (PatternSyntaxException ex) {
    // Syntax error in the regular expression
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T13:04:33.920

```
"http://www.[VP_ANY].com:8080/servlet/[VP_ALL]".replaceAll ("http://www.(\\[VP_ANY\\]).com:8080/servlet/(\\[VP_ALL\\])", "$1:$2")
res117: java.lang.String = [VP_ANY]:[VP_ALL] 
```

如果你正在寻找一个文字 [，你必须掩盖它 - 否则它将意味着像 [AZ] 这样的组。

现在，如果您在运行时从文件或 JTextField 中读取正则表达式，仅此而已。但是，如果您将其写入源代码，编译器将看到 \ 并将其视为一般屏蔽，这可能需要屏蔽引号，如

```
char apo = '\''; 
String quote = "He said: \"Whut?\""; 
```

所以你必须再次掩盖它，因为只`"\\"`意味着`"\"`.

因此，对于开发来说，为了不感到太困惑，最好有一个简单的 GUI 应用程序，它带有 2 或 3 个文本字段来测试正则表达式。如果你成功了，你只需要添加另一层掩蔽，但要开发它们，你可以远离这第二层。

*Divide et impera*就像古罗马程序员告诉我们的那样。

# jquery - jQuery：mouseenter/mouseleave 甚至停止传播

> ID：10702461
> 
> 赞同：0
> 
> 时间：2012-05-22T12:54:37.407
> 
> 标签：jquery, mouseevent, mouseenter, mouseleave, stoppropagation

我在无序列表上的 jquery 中使用 mouseenter 和 mouseleave 事件，以`<li>`在鼠标经过它们时显示一些图像。该列表通常如下所示：

```
<ul class="myTree">
    <li class="treeItem" catid="1" catname="Category 1">
        <img src="img/fleche_hori.png" class="expandImage"/>
        Category 1
        <img src="img/cross.png" class="hidden removecategory"/>
        <ul>
            <li class="treeItem" catid="2" catname="Subcategory 1 1">
                <img src="img/spacer.gif" class="expandImage"/>
                Subcategory 1 1
                <img src="img/cross.png" class="hidden removecategory"/>
            </li>
            <li class="treeItem" catid="3" catname="Subcategory 1 2">
                <img src="img/spacer.gif" class="expandImage"/>
                Subcategory 1 2
                <img src="img/cross.png" class="hidden removecategory"/>
            </li>
        </ul>
    </li>
    <li class="treeItem" catid="4" catname="Category 2">
        ...
    </li>
</ul> 
```

*注意：我知道它可能很难阅读，但我尽我所能使其尽可能易读。*

如您所见，它只是一个用于展开/折叠树的树，每个项目都标有“treeItem”类。我需要保留这个类，因为它是所有这些项目共享的公共类，当鼠标经过它们时需要显示图像，我决定将我的事件处理程序绑定到它。

需要在 mouseenter/mouseleave 上显示/隐藏的图像是每个项目的第二个（带有 src="img/cross.png" 的那个）。我用这个脚本很容易做到这一点：

```
$(document).on("mouseenter", ".treeItem", function (e) {
    //e.stopPropagation();
    $(this).children(".removecategory").show();
});

$(document).on("mouseleave", ".treeItem", function (e) {
    //e.stopPropagation();
    $(this).children(".removecategory").hide();
}); 
```

我的问题是，当一个项目展开时（即“类别 1”被展开，“子类别 1 1”和“子类别 1 2”现在显示）并且我用鼠标悬停任何子类别，这些子类别'图像将按要求显示，但父类别（即“类别 1”）的图像不会隐藏，因为我仍在悬停它......

我尝试使用 e.stopPropagation(); 但它并没有做得更好..

任何人都知道一种方法来解决这个问题并在我悬停它的一些内容时在一个元素上触发 mouseleave 吗？

您可以查看[http://api.jquery.com/mouseleave/#example-0](http://api.jquery.com/mouseleave/#example-0)尤其是代码块下方的演示，以了解我的意思。通常（在演示的右侧）我希望当鼠标进入黄色容器时触发蓝色容器的 mouseleave 事件。

*我希望我的问题很清楚，因为很难解释......*

* * *

**编辑**：

我找到了一种将 mouseenter 事件处理程序修改为此的方法：

```
$(document).on("mouseenter", ".treeItem", function (e) {
    $('.removecategory').each(function() {
        $(this).hide();
    });
    $(this).children(".removecategory").show();
}); 
```

但这并不完美，因为我需要离开整个父项目（即“类别 1”项目）并重新输入它以在悬停子项目后再次显示图像。

如果有人有更好的方法请分享！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:58:53.977

为每个类别和子类别添加跨度：

```
<ul class="myTree">
    <li class="treeItem" catid="1" catname="Category 1">
        <img src="img/fleche_hori.png" class="expandImage"/>
        <span class="Item">Category 1</span>
        <img src="http://www.pokerland-il.com/images/smilies/smile.png" class="hidden removecategory"/>
        <ul>
            <li class="treeItem" catid="2" catname="Subcategory 1 1">
                <img src="" class="expandImage"/>
                <span class="Item">Subcategory 1 1</span>
                <img src="http://www.pokerland-il.com/images/smilies/smile.png" class="hidden removecategory"/>
            </li>
            <li class="treeItem" catid="3" catname="Subcategory 1 2">
                <img src="img/spacer.gif" class="expandImage"/>
                <span class="Item">Subcategory 1 2</span>
                <img src="http://www.pokerland-il.com/images/smilies/smile.png" class="hidden removecategory"/>
            </li>
        </ul>
    </li>
    <li class="treeItem" catid="4" catname="Category 2">
        ...
    </li>
</ul>​ 
```

将您的 JS 更改为：

```
$('.Item').mouseover(function(){
    $(this).next(".removecategory").show();
});

$('.Item').mouseout(function(){
    $(this).next(".removecategory").hide();
});​ 
```

[http://jsfiddle.net/xBwyZ/3/](http://jsfiddle.net/xBwyZ/3/)

# java - Java/OS X Lion：设置应用程序名称停止使用 JDK1.7

> ID：10702463
> 
> 赞同：8
> 
> 时间：2012-05-22T12:54:56.223
> 
> 标签：java, macos, swing, osx-lion, java-7

迄今为止，我使用以下代码在我的 Apple MacBook 上设置应用程序名称（在顶部的“系统”菜单栏中）。（实际上，我想我是从 stackoverflow 复制的。）

基本上，有一个单独的 AppLauncher 类，它使用 System.setProperty() 在为应用程序本身创建新的 Runnable 之前设置应用程序名称。

工作得很好。

但是，自从我下载并开始使用 JDK 1.7 后，该解决方案停止工作 - 我在菜单中获得了类名称而不是应用程序名称，就像在我找到该解决方案之前一样。我尝试用谷歌搜索它，但无济于事。

这是过去在 JDK 1.6 下工作的已失效代码，已简化为相关部分：

```
public class AppLauncher {
public static void main(String[] args) {

    System.setProperty("apple.laf.useScreenMenuBar", "true");
    System.setProperty("com.apple.mrj.application.apple.menu.about.name",
                "My Application");
    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());

    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            new MainWindow();
        }
    });
}
} 
```

感谢您的建议！

ETA：使用 java -Dapple.laf.useScreenMenuBar=true 调用仍然有效。将属性放入 Info.plist 可能会起作用，但我还没有尝试过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:53:30.847

似乎设置属性 using`-D`解决了这个问题。

```
java -Dapple.laf.useScreenMenuBar=true … 
```

此相关[答案](https://stackoverflow.com/a/8956715/230513)中提到了其他方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T20:45:12.593

我无法使用 Info.plist 或 -D 方法（我正在分发一个 JRuby 应用程序，这可能与它有关），但对我来说，传递[本文](http://www.oracle.com/technetwork/articles/javase/javatomac-140486.html)`-Xdock:name`中提到的参数部分“更多修改菜单栏”似乎效果很好。

例子：`-Xdock:name="My Application"`

# ios - 语义问题未声明的标识符

> ID：10702469
> 
> 赞同：0
> 
> 时间：2012-05-22T12:55:21.480
> 
> 标签：ios

我想以下列方式制作 NSUrl 的对象，但**Utilities**未定义。

请有人告诉我如果我想使用 Utilities 类，那么我们的项目中必须包含哪个框架。

```
NSString* outputFileName = @"outputFile.mov";
NSString* outputFilePath = [Utilities documentsPath:outputFileName];
NSURL*    outputFileUrl = [NSURL fileURLWithPath:outputFilePath]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:09:51.280

更容易

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"outputFile" ofType:@"mov"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:03:53.547

我一无所知，但您可能正在寻找的是应用程序文档目录的路径

给...

```
NSString *docspath =  [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];

NSString* outputFilePath = [docspath stringByAppendingPathComponent:outputFileName]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:54:10.333

```
NSString *path = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"Documents/movie.m4v"]]; 
```

# jquery - 如何在 http 会话过期时弹出警报

> ID：10702470
> 
> 赞同：0
> 
> 时间：2012-05-22T12:55:22.637
> 
> 标签：jquery, html, jsp, struts2

我正在从事的项目中有一个要求。当用户的会话过期时，我需要自动将用户转发到登录页面或弹出一个警报，告诉他他的会话已过期。当用户单击确定时，他被转发到登录页面。请我如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:57:54.067

1 使用 ajax 调用服务器设置 javascript 计时器。

2 检查服务器端的会话。如果会话过期返回错误

3 在您的 .ajax 错误部分将用户发送到登录页面

```
setInterval(function() {
    $.ajax({
    ...........
    error: function(request, textStatus, errorThrown) {
         //load login page
        }
    });
}, 1000) 
```

# php - jquery 获取 php 数据很慢。如何让它快速？

> ID：10702473
> 
> 赞同：0
> 
> 时间：2012-05-22T12:55:32.863
> 
> 标签：php, jquery

如题所述，jquery显示数据的速度比纯php慢1到2秒。[在http://plekz.com/test-slow3.php](http://plekz.com/test-slow3.php)进行演示。如何让jquery显示数据和纯php一样快？

代码：

```
<div id="jqryd">
</div>

<script src="javascripts/jquery-1.5.js" type="text/javascript" language="javascript"></script>
<script type="text/javascript">
    var jqryd = $('#jqryd');
    jQuery.get("sale-show-month2.php", function(data) {
        jqryd.html(data);
    });
</script>

<?php
    $sql = "SELECT payment_date, SUM(price) FROM sale WHERE seller_id=? && Year(payment_date)=? GROUP BY Month(payment_date) DESC"; //this is loged-in user.
    $q = $conn->prepare($sql);
    $result = $q->execute(array($user_id, $selected_year));
    if(!$result){
        die("Error Select user table query : ". implode(" : ", $q->errorInfo())); //if don't use implode, output of errorInfo() will be "Array".
    }
    while($r = $q->fetch(PDO::FETCH_ASSOC)){
        $price_db2 = $r['SUM(price)'];
        $payment_date_db = $r['payment_date'];
        $payment_month_db = date("F", strtotime($payment_date_db));
        $payment_month_db2 = date("m", strtotime($payment_date_db));
        echo "This is pure php : " . $payment_month_db . " - " . $money_currency . $price_db2 ."<br>";
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:10:10.207

分析您网站示例中的流量，我发现，除了结果之外，在您的`sale-show-month2.php`页面中，您甚至返回 jquery javascript。这大大减慢了整个页面的速度：由于某种原因，网络跟踪器在调用中看到了一个查询字符串，例如`http://plekz.com/javascripts/jquery-1.5.js?_=1337691808625`，这不允许使用缓存。

简单地避免返回到 jquery 的链接将提高性能。

即使在那之后，您也会看到稍后会出现 jquery 加载的数据，但这是因为在`get`加载第一页之后调用该方法。用firebug或者其他工具可以看得很清楚（chrome和IE都有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:05:06.017

关于服务器和客户端之间传输的数据量，我总是只传输所需的最少数据（可能使用纯文本/XML 或 JSON，具体取决于数据）并使用最有效的方法将其附加到 DOM

无论数据有多大，都使用最佳（在您的情况下是最快的）方法附加到 DOM ..[查看这个 jsperf 以了解哪种方法最快](http://jsperf.com/jquery-dom-creation-techniques/3)

你会看到使用内置的 DOM 创建方法总是更快，例如

```
var li = document.createElement('li');
li.innerHTML = i;
li.setAttribute('title', 'Element number ' + i);
li.setAttribute('class', 'list-item');
container.appendChild(li); 
```

因此，在您的情况下，我会将数据作为 JSON 传递，然后循环节点并根据需要追加。如果返回了很多数据，那么我将对数据进行分页 - 或显示一些初始数据，然后添加一个“显示更多”函数来检索下一部分要显示的数据。

关于后端 - 我会确保我的查询已经过优化并且使用了正确的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T13:16:49.483

你的问题真的没有意义。使用 firebug 或 chrome 检查网络传输 - 您会发现在两种情况下等待数据的时间都差不多。但是，在接收到 php 生成的数据后，页面需要很长时间才能下载 jquery - 只有这样它才能请求新数据。

唯一值得注意的是，使用 jquery 连接到您的服务器需要半秒钟 - 如果连接不好，这种延迟将始终存在。使用服务器端生成的数据，您将获得一次，使用 ajax，您将获得两次。

因此，在您的场景中，您无法加快获取速度 - 除非您将服务器切换到具有适当吞吐量和适当响应时间的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T13:39:48.960

虽然有一些方法可以优化结果，但您的问题的答案

> 如何让jquery显示数据和纯php一样快？

是：这是不可能的。

在解析并准备好之前，您的 Javascript 将无法将任何内容加载到 DOM 中。这意味着“纯 PHP”数据已经加载，因为它是由服务器作为主页的一部分提供的。

只有这样，当浏览器必须向服务器发出另一个请求时，需要另一个往返时间才能获得 AJAX 版本。所以：无论你的服务器和你的 JS 有多好，AJAX 版本永远不会像服务器端版本那么快。

注意：这仅适用于两个版本竞争的设置。当然，通过不使用 PHP 和数据库请求来加速 HTML 页面的初始交付是有意义的，然后稍后使用 AJAX 加载一些内容。

# java - 在没有浏览器的服务器上打印 html 文件

> ID：10702476
> 
> 赞同：0
> 
> 时间：2012-05-22T12:55:41.523
> 
> 标签：java

我有一个 html 模板文件，我正在使用服务器端 java 代码来填写模板，现在想在同一台服务器上打印文件。现在当我打印它时，html标签也来了。我应该怎么做才能获得 html 格式而不是标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:59:13.277

浏览器是一个 HTML 渲染引擎。如果您希望 HTML 被渲染（“格式化”），您需要一个浏览器或一些替代渲染引擎。

如果您想从命令行打印，您可以使用命令行打印工具，例如[Command Line Print](http://sites.google.com/site/torisugari/commandlineprint2)，它将通过 Firefox 发送您的文档，如下所示：

```
firefox -print http://www.example.com/index.html 
```

或者

```
firefox -print file://path/to/your/file.html 
```

# java - 在 GAE/J 应用程序中删除 Blobstore 中的 Blob

> ID：10702477
> 
> 赞同：0
> 
> 时间：2012-05-22T12:55:44.127
> 
> 标签：java, google-app-engine, blobstore

我有一个可以将图片上传和存储到 blobstore 的应用程序。该应用程序将允许其用户删除一些图片。在 blobstore 中删除 blob 的最佳方法是什么？

我想要的是在给定 blob 的编码 blobkey 的情况下删除 blob。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:17:37.483

您可以使用要删除的键列表调用 delete。

[https://developers.google.com/appengine/docs/python/blobstore/functions](https://developers.google.com/appengine/docs/python/blobstore/functions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T16:04:40.063

您可以使用 blob 键从 blobstore 中删除任何存储的文件：

```
class DeleteHandler(webapp.RequestHandler):
    def get(self):
        blob_key = self.request.get('key')
        blob_key = str(urllib.unquote(blob_key)) #you get the blob key 
        blob_info = blobstore.BlobInfo.get(blob_key)
        blob_info.delete() 
```

在这个解决方案中，我尝试通过 URL 发送密钥，我希望这很有用。

# java - Guice 不会拦截带注释的方法

> ID：10702481
> 
> 赞同：3
> 
> 时间：2012-05-22T12:56:05.190
> 
> 标签：java, dependency-injection, guice

我有一种情况，Guice 正在为某些绑定工作，而根本不为其他绑定工作。显然我错误地使用了 API。

在某种程度上，这可能是因为我试图对我使用 Guice 的方式过于“花哨”。我已经创建了一个`Module`s 的继承树，我认为我已经变得太聪明（或愚蠢！）为了我自己的利益。

在查看下面的代码之前，请先了解我的*意图*，即提供一个可重用的东西`Module`，我可以将它放在 JAR 中并在多个项目中共享。这种抽象的、可重用`Module`的将提供所谓的“默认绑定”，任何实现`Module`都会自动遵守。诸如 AOP 之类的东西`MethodInterceptor`称为`Profiler`，它查找带有注释的方法`@Calibrated`并自动记录该方法执行所用的时间等。

请注意以下事项：

```
@Target({ ElementType.METHOD })
@RetentionPolicy(RetentionPolicy.RUNTIME)
@BindingAnnotation
public @interface Calibrated{}

public class Profiler implement MethodInterceptor {
    @Override
    public Object invoke(MethodInvocation arg0) throws Throwable {
        // Eventually it will calculate and log the amount of time
        // it takes an intercepted method to execute, hence "Profiler".
        System.out.println("Intercepted!");
        return arg0.proceed();
    }
}

public abstract class BaseModule implements Module {
    private Binder binder;

    public BaseModule() {
        super();
    }

    public abstract void bindDependencies();

    @Override
    public void configure(Binder bind) {
        // Save the binder Guice passes so our subclasses can reuse it.
        setBinder(bind);

        // TODO: For now do nothing, down the road add some
        // "default bindings" here.

        // Now let subclasses define their own bindings.
        bindDependencies();
    }

    // getter and setter for "binder" field
    // ...
}

public abstract class AbstractAppModule extends BaseModule {
    /* Guice Injector. */
    private Injector injector;

    // Some other fields (unimportant for this code snippet)

    public AbstractAppModule() {
        super();
    }

    // getters and setters for all fields
    // ...

    public Object inject(Class<?> classKey) {
        if(injector == null)
            injector = Guice.createInjector(this);

        return injector.getInstance(classKey);
    }
} 
```

所以，要使用这个小库：

```
public class DummyObj {
    private int nonsenseInteger = -1;

    // getter & setter for nonsenseInteger

    @Calibrated
   public void shouldBeIntercepted() {
       System.out.println("I have been intercepted.");
   }
}

public class MyAppModule extends AbstractAppModule {
    private Profiler profiler;

    // getter and setter for profiler

    @Override
    public void bindDependencies() {
        DummyObj dummy = new DummyObj();
        dummy.setNonsenseInteger(29);

        // When asked for a DummyObj.class, return this instance.
        getBinder().bind(DummyObj.class).toInstance(dummy);

        // When a method is @Calibrated, intercept it with the given profiler.
        getBinder().bindInterceptor(Matchers.any(),
            Matchers.annotatedWith(Calibrated.class),
            profiler);
    }
}

public class TestGuice {
    public static void main(String[] args) {
        Profiler profiler = new Profiler();
        MyAppModule mod = new MyAppModule();
        mod.setProfiler(profiler);

        // Should return the bounded instance.
        DummyObj dummy = (DummyObj.class)mod.inject(DummyObj.class);

        // Should be intercepted...
        dummy.shouldBeIntercepted();

        System.out.println(dummy.getNonsenseInteger());
    }
} 
```

这是很多代码，所以我可能在全部输入时引入了一些拼写错误，但我向您保证，这段代码可以编译并且在运行时不会抛出异常。

这是发生的事情：

*   `@Calibrated shouldBeIntercepted()`方法*不*被拦截；但...
*   控制台输出将假人的无意义整数显示为...29！！！！

*因此，无论您认为*这是多么糟糕的设计，您都不能争辩说 Guice 确实适用于 1 绑定（实例绑定），而不是 AOP 方法拦截。

如果实例绑定不起作用，那么我很乐意重新审视我的设计。但这里正在发生其他事情。我想知道我的继承树是否`Binder`以某种方式被抛弃了？

而且我已经验证我将拦截器正确绑定到注释：我创建了另一个包，我只是在其中实现`Module`（而不是这个继承树）并使用相同的注释，相同的`Profiler`，它工作得很好。

我曾经`Injector.getAllBindings()`将我的所有绑定的映射打印`MyAppModule`为字符串。没有什么是这个错误的明确来源。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T06:01:43.887

拦截仅适用于 Guice 创建的对象（请参阅“限制” [http://code.google.com/p/google-guice/wiki/AOP#Limitations](http://code.google.com/p/google-guice/wiki/AOP#Limitations)）。您正在使用“new”来创建 DummyObj，因此无论您的模块设置多么巧妙，实例都是在 guice 之外创建的。

这是基于您的编码的一个小片段。（我使用您的校准注释，但其他所有内容都在一个类中。您应该看看“AbstractModule”。它节省了您对模块层次结构所做的大量手动操作。

```
public class MyModule extends AbstractModule implements MethodInterceptor {

@Override
public Object invoke(MethodInvocation methodInvocation) throws Throwable {

    System.out.println("Intercepted@invoke!");

    return methodInvocation.proceed();
}

@Override
protected void configure() {
    bind(Integer.class).annotatedWith(Names.named("nonsense")).toInstance(29);
    bindInterceptor(Matchers.any(), Matchers.annotatedWith(Calibrated.class), this);
}

public static void main(String... args) {
    Dummy dummy = Guice.createInjector(new MyModule()).getInstance(Dummy.class);

    dummy.doSomething();

    System.out.println(dummy.getNonsense());
}
} 
```

还有我的假人：

```
public class Dummy {

@Inject
@Named("nonsense")
private int nonsense;

public int getNonsense() {
    return nonsense;
}

public void setNonsense(int nonsense) {
    this.nonsense = nonsense;
}

@Calibrated
public void doSomething() {
    System.out.println("I have been intercepted!");
}
} 
```

所以你看？我从不使用“新”这个词（除了模块......）。我让 Guice 处理 Dummy-Object 并为无意义的 int 配置值，然后注入。

输出：

```
Intercepted@invoke!
I have been intercepted!
29 
```

# php - 表单无法在php中传递值

> ID：10702483
> 
> 赞同：0
> 
> 时间：2012-05-22T12:56:09.333
> 
> 标签：php

我想使用 form 将 $username 值从 member.php 传递给 doMember.php 页面：

成员 ：

```
$username = $_GET['user'];
<form name="member" method="get" action="doMember.php?user=<?php echo $username;?>"> 
```

在 doMember.php 页面中：

```
$username = $_GET["user"];
echo $username; 
```

但是 doMember.php 中的 $username 是空的。有什么遗漏吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:59:08.057

HTML 和 PHP 不一样

```
$username = $_GET['user'];
echo '<form name="member" method="get" action="doMember.php?user='.$username.'">'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T13:01:56.963

You should place the username in an

```
<input type="hidden" name ="username" val="usr"> 
```

instead

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T12:59:16.013

您不应在操作中设置参数。查看生成的 HTML，您会看到您的表单将发送到`"doMember.php?user="`，因此您将始终发送一个空用户。

浏览器会将所有表单变量附加到`action`提交时，因此只需将`doMember.php`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T13:02:27.783

Can't you include the value of $user_name in a hidden variable in your so $username = $_GET['user'];

```
    <form name="member" method="get" action="doMember.php">
      <input type="hidden" id="user_name" name="user_name" value="<?php echo $username; ?>"
      .
      .
      . 
    </form>

```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T13:00:42.223

表单方法='post'

该表单的字段名称必须命名为“用户”

# java - 从java中的web url下载图像？

> ID：10702484
> 
> 赞同：2
> 
> 时间：2012-05-22T12:56:36.973
> 
> 标签：java, filenotfoundexception

```
URL url = new URL("http://localhost:8080/Work/images/abt.jpg");

InputStream in = new BufferedInputStream(url.openStream());
ByteArrayOutputStream out = new ByteArrayOutputStream();
byte[] buf = new byte[1024];
int n=0;
while (-1!=(n=in.read(buf)))
{
   out.write(buf, 0, n);
}
out.close();
in.close();
byte[] response1 = out.toByteArray();

FileOutputStream fos = new FileOutputStream("C://abt.jpg");
fos.write(response1);
fos.close(); 
```

在这段代码中，最后 3 行有一些错误

> 严重：servlet ImageDownloadServlet 的 Servlet.service() 引发 java.io 异常。**FileNotFoundException** : C:/abt.jpg （没有这样的文件或目录）

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:02:42.460

也许尝试切换`C:/abt.jpg`到`C:\\abt.jpg`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T13:14:56.880

尝试使用 File.pathSeparator 而不是斜杠。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T04:07:09.140

```
String filePath = request.getParameter("action");
        System.out.println(filePath);
        // URL url = new
        // URL("http://localhost:8080/Works/images/abt.jpg");
        response.setContentType("image/jpeg");
        response.setHeader("Content-Disposition", "attachment; filename=icon" + ".jpg");
        URL url = new URL(filePath);
        URLConnection connection = url.openConnection();
        InputStream stream = connection.getInputStream();

        BufferedOutputStream outs = new BufferedOutputStream(response.getOutputStream());
        int len;
        byte[] buf = new byte[1024];
        while ((len = stream.read(buf)) > 0) {
            outs.write(buf, 0, len);
        }
        outs.close();
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T13:03:23.420

`("C://abt.jpg");`

尝试反转斜线

`("C:\\abt.jpg");`

我查找了一个指向FOS 到 C 驱动器示例的[示例链接，而演示则以另一种方式展示了它们。](http://www.ecrion.com/products/xfrenderingserver/XFUltrascaleHelp/java_sample_application.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T13:39:30.633

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException,
                IOException, MalformedURLException {
        String filePath = request.getParameter("action");
        // String filename = "abt.jpg";
        System.out.println(filePath);
        URL url = new URL("http://localhost:8080/Works/images/abt.jpg");

        InputStream in = new BufferedInputStream(url.openStream());
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        byte[] buf = new byte[1024];
        int n = 0;
        while (-1 != (n = in.read(buf))) {
            out.write(buf, 0, n);
        }
        out.close();
        in.close();
        byte[] response1 = out.toByteArray();

        FileOutputStream fos = new FileOutputStream("/home/user/Downloads/abt.jpg");
        fos.write(response1);
        fos.close();

    } 
```

此图像将在下载文件夹中

# android - ContentResolver 查询抛出 nullpointerException

> ID：10702489
> 
> 赞同：6
> 
> 时间：2012-05-22T12:56:57.007
> 
> 标签：android, android-contentprovider

我正在用 sense 2.1 在根植于 Android 2.3.3 htc 令人难以置信的 S 上编写 MMS/SMS 应用程序。现在，在尝试接收某个 SMS/MMS 的联系人列表时，我在查询中得到了一个 FC。

这是一些代码：

```
Uri uri = Uri.parse("content://mms-sms/conversations/"+String.valueOf(thread_id));
ContentResolver cr = context.getContentResolver();
Cursor c= cr.query(uri,null,null,null,null);    //crashing here 
```

日志猫：

```
05-22 15:24:24.273: E/AndroidRuntime(32087): FATAL EXCEPTION: main
05-22 15:24:24.273: E/AndroidRuntime(32087): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.uiu.messaging/com.uiu.messaging.ContactMessageChain}: java.lang.NullPointerException
05-22 15:24:24.273: E/AndroidRuntime(32087): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1816)
05-22 15:24:24.273: E/AndroidRuntime(32087):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1837)
05-22 15:24:24.273: E/AndroidRuntime(32087):    at android.app.ActivityThread.access$1500(ActivityThread.java:132)
05-22 15:24:24.273: E/AndroidRuntime(32087):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1033)
05-22 15:24:24.273: E/AndroidRuntime(32087):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-22 15:24:24.273: E/AndroidRuntime(32087):    at android.os.Looper.loop(Looper.java:143)
05-22 15:24:24.273: E/AndroidRuntime(32087):    at android.app.ActivityThread.main(ActivityThread.java:4196)
05-22 15:24:24.273: E/AndroidRuntime(32087):    at java.lang.reflect.Method.invokeNative(Native Method)
05-22 15:24:24.273: E/AndroidRuntime(32087):    at java.lang.reflect.Method.invoke(Method.java:507)
05-22 15:24:24.273: E/AndroidRuntime(32087):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-22 15:24:24.273: E/AndroidRuntime(32087):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-22 15:24:24.273: E/AndroidRuntime(32087):    at dalvik.system.NativeStart.main(Native Method)
05-22 15:24:24.273: E/AndroidRuntime(32087): Caused by: java.lang.NullPointerException
05-22 15:24:24.273: E/AndroidRuntime(32087):    at android.os.Parcel.readException(Parcel.java:1328)
05-22 15:24:24.273: E/AndroidRuntime(32087):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:160)
05-22 15:24:24.273: E/AndroidRuntime(32087):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114)
05-22 15:24:24.273: E/AndroidRuntime(32087):    at android.content.ContentProviderProxy.bulkQueryInternal(ContentProviderNative.java:372)
05-22 15:24:24.273: E/AndroidRuntime(32087):    at android.content.ContentProviderProxy.query(ContentProviderNative.java:408)
05-22 15:24:24.273: E/AndroidRuntime(32087):    at android.content.ContentResolver.query(ContentResolver.java:264)
05-22 15:24:24.273: E/AndroidRuntime(32087):    at com.uiu.messaging.Data.getContactChain(Data.java:319)
05-22 15:24:24.273: E/AndroidRuntime(32087):    at com.uiu.messaging.ContactMessageChain.onCreate(ContactMessageChain.java:138)
05-22 15:24:24.273: E/AndroidRuntime(32087):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1093)
05-22 15:24:24.273: E/AndroidRuntime(32087):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1780)
05-22 15:24:24.273: E/AndroidRuntime(32087):    ... 11 more 
```

所有权限都被考虑在内。

任何帮助将不胜感激。

编辑：

遵循 Mike 的建议后，我在 logcat 中收到以下错误：

```
05-22 16:31:46.178: E/AndroidRuntime(1892): FATAL EXCEPTION: main
05-22 16:31:46.178: E/AndroidRuntime(1892): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.uiu.messaging/com.uiu.messaging.ContactMessageChain}: android.database.sqlite.SQLiteException: near "*": syntax error: , while compiling: SELECT * FROM (SELECT DISTINCT date * 1 AS normalized_date, NULL AS * FROM sms WHERE (htc_category= 0 AND thread_id = 25 AND (type != 3 AND type > 0)) UNION SELECT DISTINCT date * 1000 AS normalized_date, NULL AS * FROM pdu LEFT JOIN pending_msgs ON pdu._id = pending_msgs.msg_id WHERE (htc_category= 0 AND thread_id = 25 AND msg_box != 3 AND (msg_box > 0 AND msg_box != 3 AND (m_type = 128 OR m_type = 132 OR m_type = 130))) ORDER BY normalized_date ASC)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1816)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1837)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at android.app.ActivityThread.access$1500(ActivityThread.java:132)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1033)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at android.os.Looper.loop(Looper.java:143)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at android.app.ActivityThread.main(ActivityThread.java:4196)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at java.lang.reflect.Method.invokeNative(Native Method)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at java.lang.reflect.Method.invoke(Method.java:507)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at dalvik.system.NativeStart.main(Native Method)
05-22 16:31:46.178: E/AndroidRuntime(1892): Caused by: android.database.sqlite.SQLiteException: near "*": syntax error: , while compiling: SELECT * FROM (SELECT DISTINCT date * 1 AS normalized_date, NULL AS * FROM sms WHERE (htc_category= 0 AND thread_id = 25 AND (type != 3 AND type > 0)) UNION SELECT DISTINCT date * 1000 AS normalized_date, NULL AS * FROM pdu LEFT JOIN pending_msgs ON pdu._id = pending_msgs.msg_id WHERE (htc_category= 0 AND thread_id = 25 AND msg_box != 3 AND (msg_box > 0 AND msg_box != 3 AND (m_type = 128 OR m_type = 132 OR m_type = 130))) ORDER BY normalized_date ASC)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:158)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at android.content.ContentProviderProxy.bulkQueryInternal(ContentProviderNative.java:372)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at android.content.ContentProviderProxy.query(ContentProviderNative.java:408)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at android.content.ContentResolver.query(ContentResolver.java:264)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at com.uiu.messaging.Data.getContactChain(Data.java:318)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at com.uiu.messaging.ContactMessageChain.onCreate(ContactMessageChain.java:138)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1093)
05-22 16:31:46.178: E/AndroidRuntime(1892):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1780)
05-22 16:31:46.178: E/AndroidRuntime(1892):     ... 11 more 
```

我不知道 SQL 语句有什么问题...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T05:58:47.247

好的，修好了。诀窍是在投影中输入实际的列名。似乎这个错误毕竟是android的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:26:22.957

根据this other answer第二个参数不应该为空（尽管文档说这是一个有效值），试试

```
final String[] projection = new String[]{"*"};
Cursor query = contentResolver.query(uri, projection, null, null, null); 
```

[原帖](https://stackoverflow.com/questions/3012287/how-to-read-mms-data-in-android)

# javascript - 绕过弹出窗口拦截器

> ID：10702501
> 
> 赞同：0
> 
> 时间：2012-05-22T12:57:41.603
> 
> 标签：javascript, popup, popup-blocker

我在我的网站中使用弹出窗口进行私人聊天。由于某种原因，我无法使用对话框。有什么方法可以阻止弹出窗口阻止程序阻止我的弹出窗口？

我认为这段代码很有用，但我不知道如何使用它。

```
document.popup = false;
function setCookie(name, value)
{
document.cookie = escape(name) + "=" + escape(value) + "; path=/";
}
function getCookie(name)
{
var exp = new RegExp(escape(name) + "=([^;]+)");
if (exp.test(document.cookie + ";"))
{
exp.exec(document.cookie + ";");
return unescape(RegExp.$1);
}
else return false;
}
document.popup = getCookie('popup');
function openPopup()
{
if (document.popup) return;
window.open('http://mikhakshop.melimarket.com','SHOP','toolbar=no,statusbar=no,location=no,scrollbars=yes,resizable=yes,width=1024,height=600');
document.popup = true;
setCookie('popup', 'true');}
document. = openPopup;
if ((window.XMLHttpRequest == undefined) && (ActiveXObject != undefined)) window. = openPopup; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:10:48.010

不，您不能绕过弹出窗口拦截器。

他们的行为是阻止任何**未由用户调用**`window.open`的调用，或者超时运行的调用。但是，我想这是可能的，因为有些网站打开了一个弹出广告，但我注意到所有这些网站都是在没有焦点的情况下在后台打开的，所以这对你的问题没有帮助。

 **您可以考虑并重新设计您的聊天，以便用户必须单击一个按钮，但这似乎不是您想要做的事情。

您应该问自己，为什么对话框不起作用？**

# mysql - 分片和索引

> ID：10702504
> 
> 赞同：5
> 
> 时间：2012-05-22T12:57:48.107
> 
> 标签：mysql, indexing, sharding

我想对我的数据库进行分片，但我在这个主题上并不专业。所以这是我的考虑。尽管分片键是将请求定向到正确节点的出色索引，但是将在我的表上定义的其余索引呢？我希望引用这些索引的请求也被传递到正确的节点，以便只有一个节点处理请求。据我了解，为此必须存在一些集中式索引节点。所以我的问题是这个功能是否已经存在于像 MYSQL 这样的 RDBMS 中，或者我应该使用其他特殊产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:30:58.820

免责声明：我为[ScaleBase](http://www.scalebase.com/)工作，我每天都生活和呼吸分片......

我会在这里建议，如果您根据列 A 进行分片，例如，列 A=xx 的 WHERE 将转到单个分片。WHERE columnB=xx 必须去所有分片，因为所有分片中可能都有 columnB=xx。除非列 A 和列 B 相关。然后你真的需要将关系保存在映射表中。我可以说在所有数据库上运行可以超快，您需要并行运行并合并结果。在 ScaleBase，我们支持合并 ORDER BY、GROUP BY 等。这并不容易...

嘿，在我的博客中查看更多信息：http: [//database-scalability.blogspot.com](http://database-scalability.blogspot.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T22:37:42.130

Andrey，您所描述的正是 Clustrix 数据库的工作原理，其中数据和索引是自动分布的，然后查询是跨节点分布的。Clustrix“[将查询带到数据](http://www.clustrix.com/Portals/146389/docs/clustrix_a_new_approach.pdf)”并具有无共享架构（因此不需要集中索引）。MySQL 没有任何内置的分布式计算功能，虽然有各种附加选项，但当达到集中式资源限制时，它们最终会遇到扩展限制。

# javascript - 使用 ge.parseKml() 加载时 feature.getId() 返回 null

> ID：10702505
> 
> 赞同：2
> 
> 时间：2012-05-22T12:57:51.207
> 
> 标签：javascript, kml, google-earth-plugin

使用以下代码：

```
 var kmlPlacemark = ge.parseKml(kmlString);
    ge.getFeatures().appendChild(kmlPlacemark); 
```

似乎无法像这样检索遍历功能集合的地标 ID：

```
 var features = ge.getGlobe().getFeatures().getChildNodes();

    try {
        for (var i = 0; i < features.getLength(); i++) {

            var aFeatureToRemove = features.item(i);
            alert (aFeatureToRemove.getId();
          }
         } 
```

这总是返回 null，尽管 kmlString 包含

```
 <placemark id="testId"> 
```

这应该工作吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:11:45.333

这修复了它：

代替

> aFeatureToRemove.getId()

不得不使用

> aFeatureToRemove.getFeatures().getFirstChild().getId()

感谢您考虑提供帮助！

# jquery - 使用 coda 滑块更改图像

> ID：10702507
> 
> 赞同：0
> 
> 时间：2012-05-22T12:57:58.790
> 
> 标签：jquery, html, css

在下面的链接上， [http://www.kars4kids.org/charity/v2/nirangahtml/program_pop/placements.asp](http://www.kars4kids.org/charity/v2/nirangahtml/program_pop/placements.asp)

我正在使用 coda slide 来切换内容。

但我需要根据幻灯片更改上面的 div。放置Cont1 放置Cont2 放置Cont3

与褪色。任何想法如何做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:09:33.887

请确保所有placement_Content div 都有唯一的ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:36:36.730

我已经在 url 使用哈希值修复了这个问题，

所以检查哈希值，显示相关的div。这就是解决方案。

谢谢

# ios - 用于文本消息的 MFMessageComposeViewController 在 iPad 中不起作用

> ID：10702510
> 
> 赞同：0
> 
> 时间：2012-05-22T12:58:11.837
> 
> 标签：ios, ipad, sms

在我的应用程序中，我使用 MFMessageComposeViewController 发送短信。它在 iPhone 中运行良好，但我无法在 iPad 中发送消息。我也可以通过任何其他方式从 iPad 发送短信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:06:41.627

如果您设置了 iMessage，它只能在 iPad 上运行。

在您尝试发送文本之前打电话`[MFMessageComposeViewController canSendText]`，以确保设备能够发送文本。

# jquery - jquery.tinyscrollbar 弹出滚动条不起作用

> ID：10702513
> 
> 赞同：1
> 
> 时间：2012-05-22T12:58:21.530
> 
> 标签：jquery, html, css

*   原始演示[http://jsfiddle.net/anglimass/NVTzx/9/](http://jsfiddle.net/anglimass/NVTzx/9/)
*   更新了演示（实际上演示了问题）[http://jsfiddle.net/NVTzx/16/](http://jsfiddle.net/NVTzx/16/)

请单击“查看全部”，然后显示一个弹出窗口。弹出窗口出现，但滚动条不起作用。

**JavaScript**

```
$(document).ready(function(){
    $('#scrollbar1').tinyscrollbar();    
});

//SETTING UP OUR POPUP
//0 means disabled; 1 means enabled;
var popupStatus = 0;

//loading popup with jQuery magic!
function loadPopup(){
    //loads popup only if it is disabled
    if(popupStatus==0){
        jQuery("#backgroundPopup").css({
            "opacity": "0.7"
        });
        jQuery("#backgroundPopup").fadeIn("slow");
        jQuery("#popupContact").fadeIn("slow");
        popupStatus = 1;
    }
}

//disabling popup with jQuery magic!
function disablePopup(){
    //disables popup only if it is enabled
    if(popupStatus==1){
        jQuery("#backgroundPopup").fadeOut("slow");
        jQuery("#popupContact").fadeOut("slow");
        popupStatus = 0;
    }
}

//centering popup
function centerPopup(){
    //request data for centering
    var windowWidth = document.documentElement.clientWidth;
    var windowHeight = document.documentElement.clientHeight;
    var popupHeight = jQuery("#popupContact").height();
    var popupWidth = jQuery("#popupContact").width();
    //centering
    jQuery("#popupContact").css({
        "position": "absolute",
        "top": windowHeight/2-popupHeight/2,
        "left": windowWidth/2-popupWidth/2
    });
    //only need force for IE6

    jQuery("#backgroundPopup").css({
        "height": windowHeight
    });

}

//CONTROLLING EVENTS IN jQuery
jQuery(document).ready(function(){
    //LOADING POPUP
    //Click the button event!
    jQuery("#button").click(function(){
        //centering with css
        centerPopup();
        //load popup
        loadPopup();
    });

    //CLOSING POPUP
    //Click the x event!
    jQuery("#popupContactClose").click(function(){
        disablePopup();
    });
    //Click out event!
    jQuery("#backgroundPopup").click(function(){
        none();
    });
    //Press Escape event!
    jQuery(document).keypress(function(e){
        if(e.keyCode==27 && popupStatus==1){
            disablePopup();
        }
    });

});

function LoadPop(){
        centerPopup();
        loadPopup();
} 
```

**HTML**

```
<div class="achieve">
    <h2><a href="#" id="button">(see all)</a></h2>
    <div class="achieve-container">

    </div>
</div>
<div id="popupContact">
    <div class="" id="contactArea">
            <div class="logbox">
                <div id="scrollbar1">
                <div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div>
                <div class="viewport">
                <div class="more-achive">
                    <h2>My Profile <a id="popupContactClose"><img src="images/close.gif" /></a></h2>
                    <div class="spacer"></div>
                    <div class="profstat">
                        <img src="images/pro-image1.gif" alt="Profile Image" />
                        <h1>Emily Hsiung</h1>
                        <p><span>567</span> Points</p>
                        <p><span>22</span> achievements</p>
                    </div>
                    <div class="proflevelindicator">
                        <img src="images/level-indicator.gif" alt="level indicator" />
                        <h1>Level 5 Elephant Hunter</h1>
                        <p><span>33</span> Points to next level</p>
                    </div>
                    <div class="spacer"></div>
                    <div class="achievelist">
                        <h2>Achievements</h2>
                        <ul>
                            <li>
                                <div class="imagbox"><img src="https://encrypted-tbn0.google.com/images?q=tbn:ANd9GcQB1T4_bghGtisR6Tom0Umf3FZHCQoPGFJgD0Orck3cB0F8iTZN" /></div>
                                <div class="titlebox">Spotlight</div>
                            </li>
                            <li>
                                <div class="imagbox"><img src="https://encrypted-tbn0.google.com/images?q=tbn:ANd9GcQB1T4_bghGtisR6Tom0Umf3FZHCQoPGFJgD0Orck3cB0F8iTZN" /></div>
                                <div class="titlebox">15 Minutes of Fame</div>
                            </li>
                            <li>
                                <div class="imagbox"><img src="https://encrypted-tbn0.google.com/images?q=tbn:ANd9GcQB1T4_bghGtisR6Tom0Umf3FZHCQoPGFJgD0Orck3cB0F8iTZN" /></div>
                                <div class="titlebox">Contributor</div>
                            </li>
                            <li class="nomar">
                                <div class="imagbox"><img src="https://encrypted-tbn0.google.com/images?q=tbn:ANd9GcQB1T4_bghGtisR6Tom0Umf3FZHCQoPGFJgD0Orck3cB0F8iTZN" /></div>
                                <div class="titlebox">Super Contributor</div>
                            </li>
                            <li class="nomar1">
                                <div class="imagbox"><img src="https://encrypted-tbn0.google.com/images?q=tbn:ANd9GcQB1T4_bghGtisR6Tom0Umf3FZHCQoPGFJgD0Orck3cB0F8iTZN" /></div>
                                <div class="titlebox">Share Your Toughts</div>
                            </li>
                            <li class="nomar1">
                                <div class="imagbox"><img src="https://encrypted-tbn0.google.com/images?q=tbn:ANd9GcQB1T4_bghGtisR6Tom0Umf3FZHCQoPGFJgD0Orck3cB0F8iTZN" /></div>
                                <div class="titlebox">shout From The Rooftops</div>
                            </li>
                            <li class="nomar1">
                                <div class="imagbox"><img src="https://encrypted-tbn0.google.com/images?q=tbn:ANd9GcQB1T4_bghGtisR6Tom0Umf3FZHCQoPGFJgD0Orck3cB0F8iTZN" /></div>
                                <div class="titlebox">15 Minutes of Fame</div>
                            </li>
                            <li class="nomar">
                                <div class="imagbox"><img src="https://encrypted-tbn0.google.com/images?q=tbn:ANd9GcQB1T4_bghGtisR6Tom0Umf3FZHCQoPGFJgD0Orck3cB0F8iTZN" /></div>
                                <div class="titlebox">Super Contributor</div>
                            </li>
                            <li class="nomar1">
                                <div class="imagbox"><img src="https://encrypted-tbn0.google.com/images?q=tbn:ANd9GcQB1T4_bghGtisR6Tom0Umf3FZHCQoPGFJgD0Orck3cB0F8iTZN" /></div>
                                <div class="titlebox">Share Your Toughts</div>
                            </li>
                            <li class="nomar1">
                                <div class="imagbox"><img src="images/ach6.gif" /></div>
                                <div class="titlebox">shout From The Rooftops</div>
                            </li>
                            <li class="nomar1">
                                <div class="imagbox"><img src="https://encrypted-tbn0.google.com/images?q=tbn:ANd9GcQB1T4_bghGtisR6Tom0Umf3FZHCQoPGFJgD0Orck3cB0F8iTZN" /></div>
                                <div class="titlebox">15 Minutes of Fame</div>
                            </li>
                            <li style="margin:0 0 0 0;">
                                <div class="imagbox"><img src="https://encrypted-tbn0.google.com/images?q=tbn:ANd9GcQB1T4_bghGtisR6Tom0Umf3FZHCQoPGFJgD0Orck3cB0F8iTZN" /></div>
                                <div class="titlebox">Contributor</div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="spacer"></div>
            </div>
        </div>
    </div>
</div>
<div class="spacer"></div>
</div>
<div id="backgroundPopup"></div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T13:20:50.127

JavaScript 错误`Uncaught TypeError: Cannot read property 'scrollHeight' of undefined`位于`jquery.tinyscrollbar.js:54`. 查看[源代码](http://www.baijs.nl/tinyscrollbar/js/jquery.tinyscrollbar.js)，它试图找到 scrollHeight 与

```
oContent[options.axis] = oContent.obj[0]['scroll'+ sSize]; 
```

但 oContent 定义为

```
var oContent = { obj: $('.overview', root) }; 
```

您的标记中没有带有 的元素`class="overview"`，因此脚本失败。

我建议按照您似乎已从中[下载脚本](http://www.baijs.nl/tinyscrollbar/)的站点中的示例进行操作，尤其是**用于基本滚动条的 HTML**。该脚本需要您在演示中没有得到的标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:09:25.513

我看到一个自定义滚动条，但没有滚动功能。您可以使用默认浏览器滚动条吗？

如果您删除滚动条 div 并替换`overflow:hidden`为`overflow:scroll`您的 `#scrollbar1 .viewport`属性，该框将​​使用默认滚动条滚动。

**这是一个[jsfiddle](http://jsfiddle.net/NVTzx/10/)演示。**

您可以随时返回并使用 css 设置滚动条的样式，请参阅css 技巧中的[这篇文章](http://css-tricks.com/custom-scrollbars-in-webkit/)。

希望有帮助！

# c# - 用其他序列替换一个字节序列的最有效方法

> ID：10702514
> 
> 赞同：0
> 
> 时间：2012-05-22T12:58:21.833
> 
> 标签：c#, bytearray

用其他字节序列（例如 90）替换一个字节序列（例如 67 67 67）的最有效方法是什么。序列可以具有不同的长度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T13:22:25.830

这是一个简短的应用程序，可以满足您的需求：

```
 static void Main(string[] args)
    {
        byte [] bArray = new byte[] {11, 67, 67, 67, 33, 34, 67, 67, 11, 33, 67, 67, 67, 67};

        byte[] result = Replace(bArray, new byte[] {67, 67, 67}, new byte[] {90});

        foreach (byte b in result)
        {
            Console.WriteLine(b);
        }
    }

    private static byte [] Replace(byte[] input, byte[] pattern, byte[] replacement)
    {
        if (pattern.Length == 0)
        {
            return input;
        }

        List<byte> result = new List<byte>();

        int i;

        for (i = 0; i <= input.Length - pattern.Length; i++)
        {
            bool foundMatch = true;
            for (int j = 0; j < pattern.Length; j++)
            {
                if (input[i + j] != pattern[j])
                {
                    foundMatch = false;
                    break;
                }
            }

            if (foundMatch)
            {
                result.AddRange(replacement);
                i += pattern.Length - 1;
            }
            else
            {
                result.Add(input[i]);
            }
        }

        for (; i < input.Length; i++ )
        {
            result.Add(input[i]);
        }

        return result.ToArray();
    } 
```

# java - 在 tcp 连接中... Java（数据包）

> ID：10702517
> 
> 赞同：2
> 
> 时间：2012-05-22T12:58:37.643
> 
> 标签：java, tcp, client, packets

当我有一个使用数据包的 TCP 连接时..（服务器/客户端应用程序）我是否应该继续来回发送数据包（在服务器和客户端之间），只是为了查看连接是否存在或是否不必要？就像一个 KeepAlive 数据包..

另一个问题是，如果我通过流发送一个 int（DataOutputStream）而不是发送一个平均有 5 个字段、至少 3 个方法和一些 getter 和 setter 的 Packet 对象（ObjectOutputStream），它是否会产生巨大的差异（性能方面） ? 它会在性能方面产生如此大的差异吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:10:32.340

是的。这称为心跳。这有助于心跳接收器检测连接是否存在问题。关于第二部分，如果您尝试发送对象，则需要反序列化和序列化。这肯定会对性能产生影响。如果您想从网络滞后的角度了解性能，那么它应该没有太大的区别。

# vb.net - OpenXML 将 .docx 转换为 .doc

> ID：10702523
> 
> 赞同：0
> 
> 时间：2012-05-22T12:59:13.033
> 
> 标签：vb.net, openxml, openxml-sdk, docx, .doc

我已经成功实现了 OpenXML，它获取文档中的书签并替换它们。不幸的是，它仅适用于 .docx 并且据我所知 .doc 与 OpenXML 格式不兼容。

所以，我想知道的是，`WordprocessingDocument`当用户尝试下载它时，我是否可以将其转换为 .doc。那可能吗？如果是这样，有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:20:42.137

无法使用 Open XML SDK 2.0 从 DOCX 转换为 DOC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:41:22.430

要么使用第三方库，如 Aspose.Words。或者您需要使用 Microsoft 互操作服务。

这是示例 C# 代码：

```
Microsoft.Office.Interop.Word.Application wordApplication = new Microsoft.Office.Interop.Word.Application();
Microsoft.Office.Interop.Word.Document wordDocument = wordApplication.Documents.Open(opath);
wordDocument.SaveAs("BLUH.DOC",  WdSaveFormat.wdFormatDocument);

((Microsoft.Office.Interop.Word._Document)wordDocument).Close(); // cast necessary
((Microsoft.Office.Interop.Word._Application)wordApplication).Quit(); // cast necessary 
```

看看这些页面：

[文件转换器](http://msdn.microsoft.com/en-us/library/ms263819%28v=office.11%29)

[保存格式](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.wdsaveformat%28v=office.11%29.aspx)

[另存为](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word._document.saveas%28v=office.11%29.aspx)

# java - Java：在没有迭代的情况下检查 ArrayList 中对象的公共字段的值

> ID：10702527
> 
> 赞同：1
> 
> 时间：2012-05-22T12:59:16.720
> 
> 标签：java, arraylist

我有一个对象的 ArrayList。这些对象都属于同一个类，并包含一个布尔数据类型的公共字段。是否可以确定 arraylist 中是否存在此字段设置为 true 的任何实例，而无需遍历整个数组并检查每个字段？只是想知道是否有迭代循环的简写版本。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:01:56.923

No.

Unless you have some additional structure that keeps track of the values in the list in some way (for example by tracking each addition/removal and making sure that the boolean field can't change after addition) there is no way to check for this without iteration.

Iteration can be "hidden" via recursion or inside another method, but that doesn't change anything in a significant way.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:47:32.783

JDK 不支持这一点，因为没有适当的闭包，语法非常复杂。有一个库可以在简洁的语法和可用性之间取得平衡：[LambdaJ](http://code.google.com/p/lambdaj/)。实现这一目标所涉及的黑客本身就是一个了不起的故事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T13:04:41.943

Java中没有这样的东西。

[然而，Guava 使用Predicate 和 Collections2.filter()](http://code.google.com/p/guava-libraries/wiki/FunctionalExplained)提供了这种东西。但这不是单线的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T13:05:17.510

有点儿...

您正在寻找类似 LINQ for Java 的东西，因此您可以执行类似的操作
`collection.any(x => x.bool)`

以下是一些库：
[LINQ 的 Java 等价物是什么？](https://stackoverflow.com/questions/1217228/what-is-the-java-equivalent-for-linq)

如果您查看它们，您应该会发现一些简写函数来执行此操作，但它们都以某种方式遍历集合（只是隐藏在函数下方）。

# objective-c - 如何清除uiwebview中的cookies

> ID：10702529
> 
> 赞同：0
> 
> 时间：2012-05-22T12:59:27.653
> 
> 标签：objective-c, ios, ipad, uiwebview

> **可能重复：**
> [如何删除 UIWebView 的所有 cookie？](https://stackoverflow.com/questions/4471629/how-to-delete-all-cookies-of-uiwebview)

在这里，我以 html 格式加载内容，我需要删除 uiwebview 中的所有 cookie 和数据，目前我已经实现了这些代码行来删除 cookie，但它有时可以正常工作而不是，为什么我不...有没有我的代码中的错误

```
NSHTTPCookie *cookie;
    NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    for (cookie in [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]) {
        NSLog(@"%@", cookie);
        [storage deleteCookie:cookie];
    } 
```

# c# - 如何在 .NET 项目中包含解释器？

> ID：10702531
> 
> 赞同：3
> 
> 时间：2012-05-22T12:59:29.387
> 
> 标签：c#, .net, prolog, interpreter, dsl

我正在寻找一种用于青少年代码俱乐部的教育工具。

我的最终目标是生成一个基于规则的非图形 DSL（以及随附的 IDE），以促进为在线游戏创建“机器人”。

不过现在，我只想使用一种已建立的语言来模拟 IDE。我在考虑 Prolog，因为我很熟悉它，它是基于规则的，但我并不太在意。

我在哪里：

1.  我已经看到[了几个](https://stackoverflow.com/questions/2968057/free-open-source-code-editor-ui-control-for-net)我可以使用的很好的代码编辑组件。
2.  我看过[Prolog.Net](http://prolog.hodroj.net/)，我认为它可以用来做繁重的工作

我需要知道的：

*   **如何运行在运行时输入到文本框中的脚本？**

如果重要的话，我通常在 Visual Studio 中使用 C#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:17:18.023

你看过[GOLD Parser](http://goldparser.org/)吗？大约一年前，我在一个项目中使用了它（为用户创建了一个 DSL 以定义自定义业务规则），它满足了我的需求。你可以用它定义你自己的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:09:24.957

Visual Studio 本身是一个相当不错的代码编辑组件（您甚至可以将它与您的包一起提供，请参阅 参考资料`Isolated Shell`）。为它实现语言扩展相对容易。解析 Prolog 是微不足道的，即使使用 ad hoc 解析器，您也不必使用任何重量级的解析器生成器。

如果您要实现自己的 Prolog 或基于 Prolog 的语言，请阅读这篇精彩的教程：[http ://wambook.sourceforge.net/](http://wambook.sourceforge.net/)

# c# - 具有“任何”数据源的 Windows 窗体文件浏览器

> ID：10702536
> 
> 赞同：0
> 
> 时间：2012-05-22T12:59:42.770
> 
> 标签：c#, .net-3.5

我需要某种 Windows 窗体控件，它基本上必须看起来（几乎）完全像文件浏览器，但将由 web 服务提供。我已经构建了一个可以用作文件浏览器的网络服务，但我希望它可以通过类似“文件浏览器”的控件进行浏览。我还希望能够将其用作本地文件浏览器。

我想就什么是最好的方法提供一些建议。我一直在研究[FileBrowser](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.aspx)，但我还不能以我可以编译的方式继承它。

有人可以就如何实现这个愿望提供一些建议吗？如果有人知道已经存在的类似事情，我也想知道。（我还没有找到类似的东西）

谢谢

**编辑1：** 我注意到我错过了几件事。我希望显示的项目包括图标。这些图标可能来自不同的来源。所以我认为最好的方法是为项目创建一个控件，并确保对话框接受该控件的数组作为数据源。

**编辑 2：** 我附上了一张我希望它看起来像的图像。根据评论中的答案，看起来我可以用 ListView 做 2 + 3。4 可以用基本的输入控件来完成。我不确定该怎么做1。1中最重要的部分是地址栏。我想让这个只读但带有可点击的文件夹。我是否必须制作一个带有透明背景按钮的只读文本字段？或者这不是一个选择？

![](../Images/d1ac922b600711f4627878f126af4593.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:54:54.590

如果您对开源 (LGPL) 第三方组件没问题，试试这个： http: [//gong-shell.sourceforge.net/](http://gong-shell.sourceforge.net/)

![在此处输入图像描述](../Images/e0cac80be146d02bef470e7689db6a78.png)

# c# - nullreference glBindFramebufferEXT C#

> ID：10702538
> 
> 赞同：0
> 
> 时间：2012-05-22T12:59:49.913
> 
> 标签：c#, opengl, tao-framework

我正在尝试使用 Tao.OpenGl 渲染到纹理。我在以下行得到一个神秘的 NullReference：

```
 Gl.glGenFramebuffersEXT(1, out targetFrameBuffer);   <---NullReference
    Gl.glBindFramebufferEXT(Gl.GL_FRAMEBUFFER_EXT, targetFrameBuffer); 
```

如果我这样做，也在第二行：

```
 //Gl.glGenFramebuffersEXT(1, out targetFrameBuffer);   
    Gl.glBindFramebufferEXT(Gl.GL_FRAMEBUFFER_EXT, targetFrameBuffer);   <---NullReference 
```

明显的候选者是'targetFrameBuffer'，但调试器报告'targetFrameBuffer'*不是*NULL，而且我还使用了虚拟值来确定......

你们中的任何人都知道可能是什么问题吗？

**编辑：** 更改为 OpenTK 而不是 Tao 后，它仍然在同一行上抱怨，尽管现在它说“无法在 DLL 'opengl32.dll' 中找到名为 'glGenFramebuffers' 的入口点”。反而。也许我的 opengl32.dll 以某种方式损坏了？

# sql-server - 比较sql中的列

> ID：10702539
> 
> 赞同：0
> 
> 时间：2012-05-22T12:59:50.853
> 
> 标签：sql-server, compare

我想比较 SQL 中的两列

```
oldname   newname empid
j11       j12
j12       j13
j13 
```

我想获取已完成某些证书的员工列表。假设 emp1 已完成 j11 证书，但后来证书名称更改为 j12。该员工仍应获得认证。稍后，如果 j12 更改为 j13，则该员工仍应被视为已获得认证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:01:23.610

你的表结构应该像 web_bod 所说的那样。您的查询应如下所示：

```
SELECT employeeid, name FROM
    Employees e INNER JOIN EmployeeCertificates ec ON e.id = ec.employeeId
    INNER JOIN Certificates c ON c.id = ec.certificateId
WHERE Certificates.id = ? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:07:07.903

你应该有三个表：

1.  员工 (employeeId)
2.  证书 (certificateId)
3.  EmployeeCertificates（将员工链接到证书）

如果你给员工和证书以及不变的标识符，那么他们的名字是否改变都没有关系（这是你构建关系数据库时的一个重要设计原则）。

# php - 检索 cookie 不起作用（带有自定义域的本地主机）

> ID：10702544
> 
> 赞同：0
> 
> 时间：2012-05-22T13:00:05.673
> 
> 标签：php, mysql, cookies

我正在我的驱动器上做一个小项目，我偶然发现了一个小问题。我已经设置了指向我的目录的自定义域并编写了一些脚本来放置 cookie（带有`setcookie`）。所以我现在的代码（设置cookies）是：

```
setcookie('id',$login->id, time()+3600*24);
setcookie('name',$login->name, time()+3600*24);
setcookie('pass',$login->pass, time()+3600*24); 
```

所以基本上 - 没什么大不了的。值取自数据库，插入 cookie 工作正常。他们在那里，固定在我的域上。当我尝试打印它们时出现问题。`$_COOKIE['id']`我尝试使用和使用来回显和设置变量`print_r($_COOKIE)`来查看它们。两者都返回空值。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:32:25.137

首先，您必须考虑 $_COOKIE 中的变量仅在下次页面加载时可用。

其次，尝试为 cookie 指定域。

```
 setcookie('id',$login->id, time()+3600*24,'/','site.com');
   setcookie('name',$login->name, time()+3600*24,'/','site.com');
   setcookie('pass',$login->pass, time()+3600*24,'/','site.com'); 
```

最后，检查函数`setcookie()`返回。

```
 var_dump( setcookie('id',$login->id, time()+3600*24,'/','site.com') ); 
```

# mysql - 使用 avg 和 group by 的 SQL 查询

> ID：10702546
> 
> 赞同：34
> 
> 时间：2012-05-22T13:00:12.757
> 
> 标签：mysql, sql, group-by, average

我在为 MySQL 编写 SQL 查询时遇到了一些问题。我有一个具有以下结构的表：

```
mysql> select id, pass, val from data_r1 limit 10;
+------------+--------------+----------------+
| id         | pass         | val            |
+------------+--------------+----------------+
| DA02959106 | 5.0000000000 |  44.4007000000 |
| 08A5969201 | 1.0000000000 | 182.4100000000 |
| 08A5969201 | 2.0000000000 | 138.7880000000 |
| DA02882103 | 5.0000000000 |  44.7265000000 |
| DA02959106 | 1.0000000000 | 186.1470000000 |
| DA02959106 | 2.0000000000 | 148.2660000000 |
| DA02959106 | 3.0000000000 | 111.9050000000 |
| DA02959106 | 4.0000000000 |  76.1485000000 |
| DA02959106 | 5.0000000000 |  44.4007000000 |
| DA02959106 | 4.0000000000 |  76.6485000000 | 
```

我想创建一个从表中提取以下信息的查询：

```
id, AVG of 'val' for 'pass' = 1, AVG of 'val' for 'pass' = 2, etc 
```

查询结果应如下所示：

```
+------------+---------+---------+---------+---------+---------+---------+---------+
| id         | val_1   | val_2   | val_3   | val_4   | val_5   | val_6   | val_7   |
+------------+---------+---------+---------+---------+---------+---------+---------+
| DA02959106 | 186.147 | 148.266 | 111.905 | 76.3985 | 44.4007 | 0       | 0       |
+------------+---------+---------+---------+---------+---------+---------+---------+ 
```

当然，每个唯一的“id”都有更多的行。

我已经尝试过一些查询，例如

```
SELECT id, pass, AVG(val) AS val_1 FROM data_r1 WHERE pass = 1 GROUP BY id; 
```

这会返回正确的结果，但我必须使用“pass”的其他可能值（最多 7 个）的结果来扩展它

我尝试在 AVG 中使用嵌套的 SELECT 但这不起作用，因为我没有弄清楚如何正确地将其限制为当前的“id”。

然后，我创建了视图来表示“pass”=1、“pass”=2 等的每个查询的结果。但是对于大多数 id，“pass”的最大值是 5。当使用 JOIN 查询获取最终结果时我收到一个空结果集的视图，因为某些视图是空的/没有特定“id”的值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-22T13:04:27.250

如果我了解您的需求，请尝试以下操作：

```
SELECT id, pass, AVG(val) AS val_1 
FROM data_r1 
GROUP BY id, pass; 
```

或者，如果您只想为每个 id 保留一行，则：

```
SELECT d1.id,
    (SELECT IFNULL(ROUND(AVG(d2.val), 4) ,0) FROM data_r1 d2 
     WHERE d2.id = d1.id AND pass = 1) as val_1,
    (SELECT IFNULL(ROUND(AVG(d2.val), 4) ,0) FROM data_r1 d2 
     WHERE d2.id = d1.id AND pass = 2) as val_2,
    (SELECT IFNULL(ROUND(AVG(d2.val), 4) ,0) FROM data_r1 d2 
     WHERE d2.id = d1.id AND pass = 3) as val_3,
    (SELECT IFNULL(ROUND(AVG(d2.val), 4) ,0) FROM data_r1 d2 
     WHERE d2.id = d1.id AND pass = 4) as val_4,
    (SELECT IFNULL(ROUND(AVG(d2.val), 4) ,0) FROM data_r1 d2 
     WHERE d2.id = d1.id AND pass = 5) as val_5,
    (SELECT IFNULL(ROUND(AVG(d2.val), 4) ,0) FROM data_r1 d2 
     WHERE d2.id = d1.id AND pass = 6) as val_6,
    (SELECT IFNULL(ROUND(AVG(d2.val), 4) ,0) FROM data_r1 d2 
     WHERE d2.id = d1.id AND pass = 7) as val_7
from data_r1 d1
GROUP BY d1.id 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-11-02T07:43:36.890

据我了解，您需要每次通过时每个 id 的平均值。解决方案是

```
SELECT id, pass, avg(value) FROM data_r1
GROUP BY id, pass; 
```

# android - 如何获取联系人列表的最后修改日期（添加/删除/修改）

> ID：10702547
> 
> 赞同：4
> 
> 时间：2012-05-22T13:00:13.663
> 
> 标签：android, contacts

我如何知道联系人表的最后修改日期？我已经尝试过`ContactsContract.RawContacts.VERSION`，`CONTACT_STATUS_TIMESTAMP`但似乎这些用于知道单个联系人的修改日期，并且它不适用于我。如何获取联系人列表中任何联系人的最后修改日期

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:37:22.887

最后我在我拥有的所有联系人版本中创建了一个数组字符串，因为它是相同的，这意味着联系人表没有改变，我没有找到任何其他方式，这是我的代码

```
private String sGetCurrentContatcsVersions() {

        Cursor allContacts = mContext.getContentResolver().query(
                ContactsContract.RawContacts.CONTENT_URI, null, null, null, null);

        StringBuilder sbCurrentVersion = new StringBuilder();
        allContacts.moveToFirst();

        for (int i = 0; i < allContacts.getCount(); i++) {

            if (!TimelineService.bScannerIsRunning) {
                break;
            }
            int col = allContacts.getColumnIndex(ContactsContract.RawContacts.VERSION);
            sbCurrentVersion.append(allContacts.getString(col));
            allContacts.moveToNext();
        }

        return sbCurrentVersion.toString();
    } 
```

# php - 当图像太小时如何在图像上添加空白以适合给定尺寸

> ID：10702548
> 
> 赞同：0
> 
> 时间：2012-05-22T13:00:18.663
> 
> 标签：php, codeigniter

我有不同尺寸的图像（小于 200x200 像素）我希望它们是 200x200 像素，方法是添加具有给定颜色的空白空间（例如白色）。我尝试使用裁剪库裁剪它们： http: [//codeigniter.com/user_guide/libraries/image_lib.html](http://codeigniter.com/user_guide/libraries/image_lib.html) 我不工作。这是我没有成功使用的一些代码：

```
$config = Array(
 'image_library' => 'gd2',
 'source_image' => '/path/to/my/image.jpg',
 'new_image' => '/path/to/my/small/image.jpg',
 'thumb_marker' => '',
 'create_thumb' => TRUE,
 'maintain_ratio' => TRUE,
 'width' => '200',
 'height' => '200'
);

$this->load->library('image_lib', $config);
if (!$this->image_lib->resize())
{
 $this->session->set_flashdata('message_error',  $this->image_lib->display_errors());
 redirect('/mon_controller', 'location');
}

$config['source_image'] = '/path/to/my/small/image.jpg';
$config['x_axis'] = '200';
$config['y_axis'] = '200';

$this->image_lib->initialize($config);

if ( ! $this->image_lib->crop())
{
 $this->session->set_flashdata('message_error',  $this->image_lib->display_errors());
 redirect('/my_controller', 'location');
} 
```

**编辑**：我认为 lib 符合我的需求： http: [//www.matmoo.com/digital-dribble/codeigniter/image_moo/](http://www.matmoo.com/digital-dribble/codeigniter/image_moo/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:30:37.013

我想你需要这个。

```
http://www.matmoo.com/digital-dribble/codeigniter/image_moo/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:37:36.463

很抱歉没有回答您的问题，但我建议使用 CSS 来完成，这样您就可以保留原始图像并可以在以后的任何地方使用它们（如果您的设计明天发生变化怎么办？或者想在另一个没有的页面中使用它们）需要相同图像的尺寸要求吗？）。

只需将图像放入 div 中，并使用`margin: auto;`（或`text-align: center`，现在不能说）设置样式以使其水平居中。
要使其垂直居中，您可以使用这个 jQuery 函数：

```
(function ($) {
$.fn.vAlign = function(){
    return this.each(function(i){
    var ah = $(this).height();
    var ph = $(this).parent().height();
    var mh = Math.ceil((ph-ah) / 2);
    $(this).css('margin-top', mh);
    });
}; 
```

然后：`$('#image').vAlign()`。

# python - 在 Python 中解析文件的最有效方法

> ID：10702551
> 
> 赞同：1
> 
> 时间：2012-05-22T13:00:32.840
> 
> 标签：python, fileparsing

我想知道解析文本文件最有效的方法是什么。例如，假设我有以下文本文件：

> 服务器连接数为：1
> 
> 服务器状态为：ACTIVE
> 
> 与服务器的连接数为：4
> 
> 服务器状态为：ACTIVE
> 
> 服务器没有响应：13:25:03
> 
> 服务器连接建立：13:27:05

我想要做的是浏览文件并收集信息。例如，与服务器的连接数，或服务器宕机的次数。我想将这些值保存在可能的列表中，以便以后查看或绘制它们。

那么执行此操作的最佳方法是什么，假设我的关键字在列表中，如下所示：

```
referenceLines = ['connections server', 'Server status', 'not responding'] 
```

请注意，我在列表中没有完整的句子，而只有一部分。我想逐行浏览文件，并检查读取的行是否对应于 referenceLines 列表中的任何条目，如果是，则获取列表条目的索引并调用相应的函数。

执行此操作的最有效（时间、内存）方法是什么，因为典型的文本文件大小约为 50MB。

谢谢你。

任何

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T13:04:11.353

If every line is seperated by ": ", you can split the string.

```
message, value = line.split(': ', 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:19:03.413

如果您要解析的文本文件始终包含相同顺序的相同字段，那么 mikerobi 的解决方案很好。否则，您需要遍历这些行并尝试检测参考线...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T13:13:33.323

作为一种实用的方法，我建议您在一系列步骤中实现这一点，同时测量每个步骤的性能，以衡量您对测试数据使用的方法的成本。

例如：

*   简单地逐行读取文件需要多长时间？
*   如果你 split() 每行多长时间？
*   如果在每一行上运行 re.match() 需要多长时间？

最佳解决方案将取决于您的数据，例如，您使用了多少参考线，但在现代机器上应该只需要几秒钟

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T07:11:13.497

这是一种可能的方法。它使用表单的正则表达式模式`'keyword1|keyword2'`一次搜索多个关键字。

```
def func1(line):
    #do something

def func2(line):
    #do something

actions = {'connections server': func1,
           'Server status': func2}

regex = re.compile('|'.join(re.escape(key) for key in actions))

for line in file:
    for matchobj in regex.finditer(line):
        actions[matchobj.group()](line) 
```

# .htaccess - 使用 htaccess 保护您的

> ID：10702554
> 
> 赞同：0
> 
> 时间：2012-05-22T13:00:43.927
> 
> 标签：.htaccess, redirect, yourls

我有一个正常的[YOURLS](http://yourls.org)安装，它工作正常。但是我想拒绝对文件夹和文件的访问，将除我的 IP 之外的所有流量重定向到域根目录，而不会失去进行正常重定向的能力。

就像是：

**doma.in/admin**（这是 admin 文件夹）重定向到**doma.in**

**doma.in/admin/index.php**重定向到**doma.in**

**doma.in/J0f2k**（这是一些随机缩短的 URL）重定向到它关联的任何 URL

基本上我不希望人们看到登录页面或任何文件，但我不想用密码保护它。只需重定向到域根目录。

我有这些规则：

```
RewriteCond %{REMOTE_ADDR} !^192\.168
RewriteCond %{REQUEST_URI} !/yourls-loader\.php$ #needed to do the redirection
RewriteCond %{REQUEST_FILENAME} -f
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule .* http://doma.in/ [R=301,L] 
```

但它不起作用。任何人都可以访问这些文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T22:58:29.373

我最终在每个文件夹中放置了一个 htaccess 文件，将除我之外的所有 IP 重定向到域根目录。它们只有 7 个文件夹，所以没什么大不了的。你的仍然工作正常。

# java - Java 7 中的编译器更改

> ID：10702558
> 
> 赞同：4
> 
> 时间：2012-05-22T13:00:48.700
> 
> 标签：java, compiler-construction, javac, java-7

在 Java 6 中，我可以使用：

```
public static <T, UK extends T, US extends T> T getCountrySpecificComponent(UK uk, US us) {
    Country country = CountryContext.getCountry();
    if (country == Country.US) {
        return us;
    } else if (country == Country.UK) {
        return uk;
    } else {
        throw new IllegalStateException("Unhandled country returned: "+country);
    }
} 
```

使用这些存储库：

```
public interface Repository{
   List<User> findAll();
}

public interface RepositoryUS extends Repository{}

public interface RepositoryUK extends Repository{} 
```

使用这些时：

```
RepositoryUK uk = ...
RepositoryUS us = ... 
```

此行在 Java6 中编译，但在 Java7 中失败（错误找不到符号 - 因为编译器在类 Object 上查找 findAll()）

```
List<User> users = getCountrySpecificComponent(uk, us).findAll(); 
```

这在 Java 7 中编译

```
List<User> users = ((Repository)getCountrySpecificComponent(uk, us)).findAll(); 
```

我知道这是一个相当少见的用例，但有这种变化的原因吗？还是一种告诉编译器“更聪明”的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:12:44.040

我认为`T`应该有界扩展`Repository`。这样编译器就知道`getCountrySpecificComponent`返回一些存储库。

**编辑：**

也应该可以写：`public static <T extends Repository> T getCountrySpecificComponent(T uk, T us)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:19:33.263

然后我同意旧编译器接受这一点是错误的。我想你想要这样的东西：

```
public interface UserFindingComponent{
   List<User> findAll(); 
}

public interface Repository extends UserFindingComponent{ }

public interface RepositoryUS extends Repository{}

public interface RepositoryUK extends Repository{} 
```

...

```
public static <T extends UserFindingComponent, UK extends T, US extends T> T getCountrySpecificComponent(UK uk, US us) {
    Country country = CountryContext.getCountry();
    if (country == Country.US) {
        return us;
    } else if (country == Country.UK) {
        return uk;
    } else {
        throw new IllegalStateException("Unhandled country returned: "+country);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T15:23:24.060

在这种情况下，编译器无法推断类型参数，这在 Java 6 中可能也是如此。但是，您可以使用以下语法告诉编译器泛型类型是什么：

```
import java.util.List;

class User {
}

interface Repository {
  List<User> findAll();
}

interface RepositoryUS extends Repository {
}

interface RepositoryUK extends Repository {
}

class Test {
  public static <T, UK extends T, US extends T> T getCountrySpecificComponent(UK uk, US us) {
    Country country = CountryContext.getCountry();
    if (country == Country.US) {
      return us;
    } else if (country == Country.UK) {
      return uk;
    } else {
      throw new IllegalStateException("Unhandled country returned: " + country);
    }
    return us;
  }

  public static void main(String... args) {
    RepositoryUK uk = null;
    RepositoryUS us = null;
    List<User> users = Test.<Repository, RepositoryUK, RepositoryUS>getCountrySpecificComponent(uk, us).findAll(); 
  }
} 
```

# node.js - 错误：找不到模块 'connect-form' - 尽管它存在

> ID：10702559
> 
> 赞同：3
> 
> 时间：2012-05-22T13:01:08.683
> 
> 标签：node.js, connect

我有一个 railjs 应用程序

我已经安装了连接表单：

```
$ npm install connect-form 
```

它也在 package.json 文件中
（用于部署到 heroku）

我检查了 node_modules 文件夹，它肯定在那里。

当我运行应用程序时，我得到：

> 错误：找不到模块 'connect-form'

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T13:02:53.670

`connect-form`已弃用（这可能是它不起作用的原因），请在此处阅读有关此内容的更多信息：

[Expressjs bodyParser 和 connect-form](https://stackoverflow.com/questions/8481349/expressjs-bodyparser-and-connect-form)

# php - PHP 中的函数不返回我的数组的值，为什么？

> ID：10702562
> 
> 赞同：1
> 
> 时间：2012-05-22T13:01:33.523
> 
> 标签：php, arrays, return, echo

我有一小段代码，我无法让它工作。

```
$dict = array('401003' => "Test")
function getID ($tempid) {
    $id = '<span title="'.$tempid.'">'.$dict[$tempid].'</span>';
    return $id;
}
echo getID('401003');
echo $dict['401003']; 
```

我希望得到两次“测试”，但只有第二个回声给我返回了“测试”。函数中的 $dict[$tempid] 似乎有问题

你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T13:03:50.007

这与[变量范围](http://php.net/manual/en/language.variables.scope.php)有关，您无法访问`$dict`函数内的变量。您可以通过声明为全局来解决此问题`$dict`，或者将其传递给您的函数，您可以像这样重构它：

```
function getID($tempId, $dict) {
    return '<span title="'.$tempid.'">'.$dict[$tempid].'</span>';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T13:04:29.380

getID 看不到您的数组，您必须将其添加为参数或使 $dict 全局化，这通常是个坏主意：

```
$dict = array('401003' => "Test")
function getID ($tempid) {
    global $dict;
    $id = '<span title="'.$tempid.'">'.$dict[$tempid].'</span>';
    return $id;
} 
```

# java - Issue with gui designing in java

> ID：10702565
> 
> 赞同：2
> 
> 时间：2012-05-22T13:01:41.243
> 
> 标签：java, swing

I m designing a gui which displays an image on a panel and has a slider which zooms the image in and out. But the issue is: My image gets zoomed but does not show the image inside the scrollpane **Scrollpane**.

```
ImagePanel imageP = new ImagePanel("D:/ScannedImage1.jpg");
JSlider slid = (JSlider) evt.getSource();
float value = (float) slid.getValue();
imageP.setScale(value);
imagePanel.add(new JScrollPane(imageP), BorderLayout.CENTER);
imagePanel.validate(); 
```

code For imagePanel class paintComponent Method

```
super.paintComponent(g);
Graphics2D g2 = (Graphics2D) g;
g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
    RenderingHints.VALUE_INTERPOLATION_BICUBIC);
int w = getWidth();
int h = getHeight();
int imageWidth = image.getWidth();
int imageHeight = image.getHeight();
double x = (w - scale * imageWidth) / 2;
double y = (h - scale * imageHeight) / 2;
AffineTransform at = AffineTransform.getTranslateInstance (x, y);
at.scale(scale, scale);
g2.drawRenderedImage(image, at); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T14:59:07.297

因为`JScrollPane`依赖于客户的首选大小，您可能需要以反映缩放大小的方式覆盖`getPreferredSize()`方法。`ImagePanel`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:23:15.190

不应该是：

```
imageP.add(new JScrollPane(), BorderLayout.CENTER);
imageP.validate(); 
```

如果不是，并且您确实试图直接从课堂上调用，那么不应该是：

```
ImagePanel.add(new JScrollPane(), BorderLayout.CENTER);
ImagePanel.validate(); 
```

并且 add() 和 validate() 方法应该是静态的，否则你应该使用第一个例子。

# iphone - How to upload a file to server with synchronous request?

> ID：10702567
> 
> 赞同：0
> 
> 时间：2012-05-22T13:01:44.513
> 
> 标签：iphone

My brain is just going to hang, I am working on same method for .....

OK, I am working on an upload code which will upload the file to the server, which is successfully working

now what I need as fallows:

started with an example-->suppose I have a file named file.txt, whose size is 30MB, when I read the contents of the file it will give me all the 30MB it contains. In the sendSynchronousRequest method I want to give request upto 10mb of data and aging calling the same thing unless it reaches at the last point of file. (in brief I want to use a loop to send the request part by part to the server

-I need to seed data with small small chunk of total file to the server -In server I need a relevant PHP to Append the contain and put in to one file at the end of request

so can anyone help me a with a relevant php and objective c code ?

waiting for your quick response !!!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:29:49.157

至于解决方案，请创建一个多部分表单请求并通过同步请求来完成。至于代码，在这里发布会有点过分:)

# php - Passing an argument that may not be set in PHP

> ID：10702568
> 
> 赞同：0
> 
> 时间：2012-05-22T13:01:48.007
> 
> 标签：php

This is a dodgy question...

When requesting a page, the output of the page depends on the parameters passed. Soo:

```
http://localhost/test/php?key=value 
```

AND

```
http://localhost/test/php?key=other_value 
```

will produce different outputs.

There are a lot of these parameters and sometimes they are set, sometimes they are not.

I have this code block, that I keep copying over and over:

```
if ( !isset( $PARAMS["type"] ) ){
    $message = urlencode("No Type Parameter Defined In File {$_SERVER["PHP_SELF"]}");
    header( "Location: /admin/pages/{$PARAMS["page"]}?m=$message" );
    exit;
} 
```

Now this code block is repeated in some cases about 6 times!

So I thought I could write a function:

```
function redirect_on_fail( $var ){
    if ( !isset( $var ) ){
        $message = urlencode("No Type Parameter Defined In File {$_SERVER["PHP_SELF"]}");
        header( "Location: /admin/pages/index?m=$message" );
        exit;
    }
} 
```

## OBVIOUSLY this will not work

Because I will have to call `redirect_on_fail( $PARAMS["type"] );` and if it is not set, it wont be passed to the function...

Because I need to test whether the variable exists in the Pages Scope...

So I could just do this, I suppose:

```
function redirect_on_fail( $message, $redirect_to ){
    header( "Location: /admin/pages/$redirect_to?m=".urlencode($message) );
    exit;
} 
```

But then in the page I'm doing:

```
if ( !isset( $PARAMS["type"] ) ){
    redirect_on_fail( "No Type Parameter", $redirect_to );
} 
```

and that defeats the point...

So is there a way around this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:10:49.097

我认为 gunnx 是在正确的轨道上。这是一些示例代码。只需根据需要更改`$params`数组中的值。

```
<?php

$params = array('foo', 'bar', 'baz');
foreach ($params as $param) {
  if (!isset($PARAMS[$param])) {
    $message = urlencode("No {$param} Parameter Defined In File {$_SERVER['PHP_SELF']}");
    header( "Location: /admin/pages/index?m=$message" );
    exit;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:11:34.263

`$_GET`是一个全局变量。您可以轻松地执行以下操作：

```
function redirect_on_fail(){
    if(!isset($_GET['type'])){
        // redirect
    }
} 
```

因此，您始终可以在`redirect_on_fail()`任何定义的地方调用该方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T13:13:30.330

```
function redirect_on_fail () {
  $args = func_get_args();
  $params = array_shift($args);
  foreach ($args as $arg) {
    if (!isset($params[$arg])) {
      $message = urlencode("No $arg Parameter Defined In File {$_SERVER['PHP_SELF']}");
      header("Location: /admin/pages/index?m=$message");
      exit;
    }
  }
}

// Call it like:
redirect_on_fail($_GET, 'required_key', `another_required_key`);
// Basically takes an array as the first argument, then the required keys as
// subsequent arguments, and redirects the user if any of them are not set.
// Pass as many required key names as you like. 
```

# javascript - JSON对象回复解析

> ID：10702578
> 
> 赞同：1
> 
> 时间：2012-05-22T13:02:29.593
> 
> 标签：javascript, json, class, parsing, object

因此，当 Ajax 调用返回 JSON 回复时，我会：

```
oData = JSON.parse(sReply); 
```

在哪里

```
var oData = new cData();

function cData() {
    this.Email = "";
    this.Name = "";
    this.test = function () {
        alert("lol");
    }
} 
```

问题是，JSON 字符串仅包含电子邮件和名称变量，因此当 oData = JSON.parse(sReply) 发生时，函数测试被覆盖，当我尝试调用该函数时它不存在。有没有办法避免这种情况？我可能有很多函数和其他我不想通过 JSON 传输的变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:03:47.260

JSON 没有编码函数的规定。它仅用于数据。

当然，您可以将函数序列化为 JavaScript 中的字符串，并类似地重构它们，但这在其他语言中效果不佳。（你的 Python 代码会用 JavaScript 函数做什么？）

如果您考虑数据交换的一般问题，特别是当它涉及来自不完全信任的提供者的服务时，通过数据编码允许功能的想法变得非常可怕。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T13:09:32.590

`oData = JSON.parse(sReply);`- 这将创建一个 JavaScript 对象。oData 以前是否是一个对象并不重要`cData`……您只需重新分配它。

您应该能够获取 JSON 响应并手动将其属性分配给现有`cData`对象：

```
var oData = new cData();
var response = JSON.parse(sReply);
oData.Email = response.Email;
oData.Name = response.Name; 
```

或者您可以遍历属性：

```
for (var i in response)
    oData[i] = response[i]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T13:15:13.917

解决此问题的常用方法是为您的 Object( `cData`) 提供一个静态[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)，该方法将接受 DTO ( [Data Transfer Object](http://en.wikipedia.org/wiki/Data_transfer_object) ) 并返回一个新`cData`实例，即：

```
function cData() { 
    this.Email = "";
    this.Name = "";
    this.test = function () {
        alert("lol");
    }
}

// Static factory which produces a new `cData` object from the supplied
// Data Transfer Object.  Note this function belongs to the Constructor
// function rather than instances created when it's used.
cData.fromDTO(value) {
        // Create a new cData instance.
        var result = new cData();

        // Copy the properties from the DTO.
        result.Email = value.Email;
        result.Name = value.Name;

        // Return the populated instance.
        return result;
} 
```

然后您可以使用静态工厂来处理 AJAX 调用的结果，即：

```
function onAjaxResponse(response) {
    var myData = cData.fromDTO(JSON.parse(response));

    // Invoke the 'test' method.
    myData.test();
} 
```

这也在数据传输层（来自服务器的数据）和您的业务逻辑（您的 JavaScript 应用程序）之间提供了清晰的分离；如果您需要更改 DTO 的属性（例如：`Name`更改为`FirstName`），那么您只需在一处修改代码（`fromDTO`工厂方法）。

作为旁注，您应该考虑[在命名构造函数时使用 BumpyCaps](http://javascript.crockford.com/code.html)（即：第一个字符应该是大写的，即：`MyClass`而不是`myClass`像任何其他函数那样）。

# java - EventListener for Object removed from memcached

> ID：10702581
> 
> 赞同：1
> 
> 时间：2012-05-22T13:02:33.243
> 
> 标签：java, oop, memcached, spymemcached

i am using memcached server to store some object with different expire times, is there some way to add event listener on removal or expiration of that object? Currently i'm using spymemcached client.
How can i achieve that i do some cleanup just before my object is deleted/expires.
Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:06:04.023

无法在 memcached 服务器上注册事件侦听器。此外，过期的对象会从 memcached 中延迟删除。这意味着只有当您尝试获取已过期的项目或服务器内存不足并需要腾出更多空间时，才会删除过期项目。如果您要删除一个项目，则该项目会立即被删除。

# c# - Sharepoint 2010 autogenerated workflow column

> ID：10702585
> 
> 赞同：0
> 
> 时间：2012-05-22T13:02:48.040
> 
> 标签：c#, sharepoint, workflow

is it possible to change order of workflow autogenerated column (from last position to 2nd)? I need to do this programatically, not in Library > Modify view.

**EDIT:** Whole workflow I made in Visual Studio and it is with custom association, initiation an task form.

**EDIT2:** I figured it out, just reorder view in onWorkflowActivated method:

```
private void onWorkflowActivated_Invoked(object sender, ExternalDataEventArgs e)
    {
        string colName = workflowProperties.TemplateName;
        SPView defaultView = workflowProperties.List.DefaultView;
        if (defaultView.ViewFields.SchemaXml.Contains(colName))
        {       
            System.Collections.Specialized.StringCollection collStrings = defaultView.ViewFields.ToStringCollection();
            List<string> fields = new List<string>();
            foreach (string field in collStrings)
            {
                fields.Add(field);
            }

            if (fields.IndexOf(colName) != 2)
            {
                defaultView.ViewFields.MoveFieldTo(colName, 2);
                defaultView.Update();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:47:20.297

您可以通过创建自定义工作流关联页面和代码来控制您的工作流如何与列表关联的逻辑。您应该查看此文档作为起点：http: [//msdn.microsoft.com/en-us/library/ms481192.aspx](http://msdn.microsoft.com/en-us/library/ms481192.aspx)

# android - Android distorted ListView

> ID：10702590
> 
> 赞同：1
> 
> 时间：2012-05-22T13:03:07.797
> 
> 标签：android, listview

I have a ListView with let's say 30 items.

For the items, I'm using a custom adapter, which I store in an instance variable of the containing activity.

Now I want to cache the content (my list with model objects) in some cases. It means if I resume the activity nothing has to change.

If the model is cached I assume I don't need to redraw the view because nothing has changed.

Without caching I call this each time, in onResume:

```
myAdapter.setMyData(new ArrayList<MyType>());
myAdapter.setFoo(new Foo());
myAdapter.notifyDataSetChanged(); 
```

And that works, the list is displayed well.

But when I don't call that (besides of the very first time this activity is resumed) (because I'm using the cache), the ListView looks strange. While normally ~ 7 items fit in the screen, now I get only ~ 2 with a very long space in between. And the assets inside the items also a bit shifted. Scrolling down fixes it, the following items look normally, and if I scroll back up everything looks fine.

Why is this?

Edit: The key of the issue is

```
myAdapter.notifyDataSetChanged(); 
```

If I call that each time in onResume the list is displayed correctly. But I don't understand why I have to do it, because my data set didn't change.

# python - tkinter crashes using a thread to send requests

> ID：10702592
> 
> 赞同：1
> 
> 时间：2012-05-22T13:03:10.230
> 
> 标签：python, multithreading, thread-safety, tkinter, python-2.7

I've created a GUI using tkinter to send requests (from file) to a specific URL

everything worked great until I wanted to used threads...

so I used one thread to send the requests in order to keep the control over the GUI.

Now it's unstable, the application crashes almost everytime!

I tried using the 'threading.Thread' instead of 'thread.start_new_thread' but it did not work as a new thread (could not control GUI while requests are being sent)

I'm pretty sure the problem is related to the 'updateStatus' functions which writes a string into the status bar and either the results or the log tab because it works when i remove this option.

I would love to know how should I use the thread with the GUI and the status updater

also, the results tab sometime crashes the application - but only in random (to me) times...

here is the CODE:

* * *

```
from ftplib import FTP
from Tkinter import *
import threading
import thread
import Queue
import Tkinter, tkFileDialog, ttk
import os, base64, time, string, sys
import urllib2, telnetlib

class App:
    def __init__(self, master):

        self.selectedFileName   = StringVar()
        self.inProgress         = 1.0
        self.headers            = {}
        self.word_list          = []
        self.localPath          = os.path.join(os.getcwd())

        self.tabs =  ttk.Notebook(root)
        frame = Frame(self.tabs, width=750, height=300)
        tab_log     = ttk.Frame(self.tabs)
        tab_results = ttk.Frame(self.tabs)

        self.tabs.add(frame, text="  Main  ")
        self.tabs.add(tab_log, text="   Log   ")
        self.tabs.add(tab_results, text="  Results  ")
        self.tabs.pack()

        ######################
        #      Main TAB:     #
        ######################

        # Application URL: LABEL
        self.label_url = Label(frame, text="URL  (https://myApp:666/):", foreground="black")
        self.label_url.pack(side=LEFT)
        self.label_url.place(bordermode=OUTSIDE, x=5, y=40)

        # App URL: TEXT
        self.text_url = Entry(frame, width=66)
        self.text_url.place(bordermode=OUTSIDE, x=200, y=40)

        # Upload File: Button
        self.upload_button = Button(frame, text="Upload File", command=self.browseFile, state=NORMAL)
        self.upload_button.place(bordermode=OUTSIDE, x=5, y=100)

        # Upload File: Label
        self.upload_label = Label(frame, text="")
        self.upload_label.place(bordermode=OUTSIDE, x=100, y=100)

        ########## Main Buttons ###########

        # >> Run Button
        self.button_run = Button(frame, text="Run", width=25, height=2, command=self.runPressed)
        self.button_run.place(bordermode=OUTSIDE, x=300, y=325)

        # >> Quit Button
        self.quit_button = Button(frame, text="Quit", width=10, height=1, command=self.executeQuit)
        self.quit_button.place(bordermode=OUTSIDE, x=666, y=335)

        # Status bars
        self.text_status = Text(frame, width=106, height=2, background="#DDDDDD", foreground="#990000")
        self.text_status.insert(INSERT, "Status")
        self.text_status.configure(state=DISABLED)
        self.text_status.place(bordermode=OUTSIDE, x=0, y=260)

        # Progress bar
        self.progressBar = ttk.Progressbar(frame, orient="horizontal", length=748, mode="determinate")
        #self.progressBar.pack()
        self.progressBar.place(bordermode=OUTSIDE, x=1, y=300)

        ######################
        #      Log TAB:      #
        ######################
        self.log_text = Text(tab_log, width=104, state=DISABLED)
        self.log_text.pack(side=LEFT, fill=BOTH)
        self.button_toResults = Button(tab_log, text="Clear Log", command=self.clearLog)
        self.button_toResults.place(bordermode=OUTSIDE, x=678, y=0)

        # Scroll Bar
        self.logScrollBar = Scrollbar(tab_log)
        self.logScrollBar.pack(side=RIGHT, fill=Y)
        self.logScrollBar.configure(command=self.log_text.yview)
        self.log_text.configure(yscrollcommand=self.logScrollBar.set)

        ######################
        #    Results TAB:    #
        ######################
        self.results_text = Text(tab_results, width=104, state=NORMAL)
        self.results_text.pack(side=LEFT, fill=BOTH)

        # Scroll Bar
        self.resScrollBar = Scrollbar(tab_results)
        self.resScrollBar.pack(side=RIGHT, fill=Y)
        self.resScrollBar.configure(command=self.log_text.yview)
        self.results_text.configure(yscrollcommand=self.resScrollBar.set)

    ## functions... ##

    # clears log in 'Log' tab
    def clearLog(self):
        self.log_text.configure(state=NORMAL)
        self.log_text.delete(1.0, END)
        self.log_text.configure(state=DISABLED)

    # Browse file system to get file to use for requests
    def browseFile(self):
        self.selectedFileName = tkFileDialog.askopenfilename(filetypes = ( ("Text files", "*.txt"), ("All files", "*.*") ))
        try:
            tmpFile = open(self.selectedFileName, 'r')
            self.editStatus('opened: %s' %self.selectedFileName, 1)
            tmpFile.close()
            selectedFileLength = len(self.selectedFileName)
            if selectedFileLength > 75:
                displayedFileName = '...' +self.selectedFileName[selectedFileLength -70:]
            else:
                displayedFileName = self.selectedFileName

            self.upload_label.configure(text='Selected file:        %s' %displayedFileName, foreground="darkblue")
            tmpFile.close()

        except:
            'Error! file does not exist...'

    ## run() ##

    def runPressed(self):
        try:
            self.executeRun()
            """self.lock = thread.allocate_lock()
            thread.start_new_thread(self.executeRun, ())"""
        except:
            self.editStatus('Could not start! please try again...', 1)

    def executeRun(self):
        self.progressBar["value"] = 0

        # is URL missing?
        self.URL_TEXT = self.text_url.get().strip()
        lenURL = len(self.URL_TEXT)
        if lenURL < 1:
            self.editStatus("Please fill in the URL and Press 'Run' again", 1)
            return 0

        if self.URL_TEXT[lenURL -1:] < '/':
            self.URL_TEXT = self.URL_TEXT +'/'

        try:
            tmpFile = open(self.selectedFileName, 'r')

        except:
            self.editStatus("Please select file Press 'Run' again", 1)
            return 0

        tmpFile.close()

        self.progressBar["value"] = 33

        word_file = self.selectedFileName
        myFile = open(word_file, 'r')
        self.word_list = myFile.read().split('\n')
        myFile.close()

        self.progressBar["value"] = 66

        # Create Results folder and files
        self.resultsFolder = self.localPath +'\\' +'Results'

        # Creates 'Results' folder
        try:
            os.makedirs(self.resultsFolder)
            self.editStatus('folder created...', 1)
        except:
            self.editStatus('Folder already exists', 1)

        self.result_file = open(self.resultsFolder +'\\results.txt', 'w')
        self.result_file.close()

        self.progressBar["value"] = 100

        self.lineCounter = 1
        self.totalLines = len(self.word_list)
        self.editStatus('Total lines in file: %d' %self.totalLines, 1)
        # number of reconnection times in case connection has been losts
        timestoTry = 12
        timesTried = 1

        self.progressBar["value"] = 0

        #self.myThread = threading.Thread(target=self.sendRequests())
        thread.start_new_thread(self.sendRequests, ())
        """while self.lineCounter < self.totalLines and timesTried < timestoTry:
            self.editStatus('Stopped @ line number: %d' %self.lineCounter, 1)
            self.editStatus('connection lost, will try again(%s)...' %timesTried, 1)
            time.sleep(5 +timesTried)
            timesTried = timesTried +1
            self.word_list = self.word_list[self.lineCounter -1:]
            thread.start_new_thread(self.sendRequests, ())"""

    # send requests from file
    def sendRequests(self):
        url = self.URL_TEXT
        progress = self.inProgress
        for word in self.word_list:
            self.editStatus(str('Sending (%d): %s%s' %(self.lineCounter, url, word)),1)
            self.lineCounter = self.lineCounter +1
            progress = (self.lineCounter / float(self.totalLines)) * 100
            self.progressBar["value"] = progress
            try:
                myRequest = urllib2.Request(url +word, data=None, headers=self.headers)
                myResponse = urllib2.urlopen(myRequest, timeout=3)
                res_html = myResponse.read()
                myResponse.close()

                if myResponse.getcode() == 200:
                    self.editStatus(url +word +'\n', 2)
                    resFile = open(self.resultsFolder +'\\results.txt', 'a')
                    resFile.write(url +word +'\n')
                    resFile.close()

            except urllib2.HTTPError as e:
                 print 'could not reach: %s%s' %(url, word)

            except urllib2.URLError as e:
                self.editStatus(str(e), 1)
                #thread.exit()
                return 0

        #thread.exit()
        if self.lineCounter == self.totalLines +1:
            self.finito()
            return 1
        else:
            self.editStatus('something went wrong... finished but not done?!', 1)

            return 0

    # grand finale!
    def finito(self):   
        self.editStatus('                 ', 1)
        self.editStatus('                 ', 1)
        self.editStatus('** !!! Mission accomplished !!! **', 1)

    # 'Quit' button clicked
    def executeQuit():
        global root
        root.destroy()

    # writes passed string into Status-Bar
    # if '1' is passed - will also write string to 'Log'
    # if '2' is passed - will write to 'Results'
    def editStatus(self, newStatus, toLog):
        if toLog == 1:
            self.text_status.configure(state=NORMAL)
            self.text_status.delete(1.0, END)
            self.text_status.insert(END, newStatus)
            self.text_status.configure(state=DISABLED)

            self.log_text.configure(state=NORMAL)
            self.log_text.insert(END, newStatus +'\n')
            self.log_text.configure(state=DISABLED)

        elif toLog == 2:
            self.results_text.configure(state=NORMAL)
            self.results_text.insert(END, newStatus +'\n')
            self.results_text.configure(state=DISABLED)

        else:
            print newStatus +'\n'

        #print newStatus +'\n'

root = Tk()

app = App(root)

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:16:42.587

您不能直接从另一个线程操作 GUI 对象。您唯一的选择是将某些内容推送到线程安全队列，然后让您的 GUI 线程轮询该队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-25T20:25:01.473

tkinter 不支持线程。你没有办法在同一个程序中使用 tkinter 和 threading，它只会崩溃

# sql - 使用 MIN 和 MAX 函数的存储过程性能下降

> ID：10702597
> 
> 赞同：0
> 
> 时间：2012-05-22T13:03:30.693
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures, timeout

我在生产中有一个用于存储`workflow`给定项目的数据库表；表中的每条记录基本上代表特定日期的项目状态。

过度简化的表结构是这样的：

**工作流表**

```
|-------------|------------|---------|----------------|
| Category    | ItemCode   | Status  | InsertDate     |
|-------------|------------|---------|----------------|
|    Cat1     |    Foo1    | 01      | 2012-01-01     |
|-------------|------------|---------|----------------|
|    Cat1     |    Foo1    | 02      | 2012-03-02     |
|-------------|------------|---------|----------------|
|    Cat1     |    Foo1    | 03      | 2012-04-01     | 
|-------------|------------|---------|----------------|
|    Cat1     |    Foo2    | 01      | 2012-04-06     |
|-------------|------------|---------|----------------|
|    Cat1     |    Foo2    | 02      | 2012-05-07     |
|-------------|------------|---------|----------------|
|    Cat1     |    Foo2    | 04      | 2012-05-09     | 
|-------------|------------|---------|----------------|
|    Cat2     |    Foo3    | 01      | 2011-02-03     |    
|-------------|------------|---------|----------------|
|    ...      |    ...     | ..      |....            |    
|-------------|------------|---------|----------------| 
```

因此，在*2012-01-01*，项目*Foo1*已达到状态*01*；在*2012-04-01*已达到状态*03*等等。

StoredProcedure`PR_GetCategoryItemsInformation`将给定的值`Category`作为输入，读取 Workflow 表并给出如下结果：

@输入：Cat1
输出：

```
|------------------|---------------|------------------|---------------------|
|   Category       |    ItemCode   | DateOfFirstRecord| StatusOfLatestRecord|
|------------------|---------------|------------------|---------------------|
|     Cat1         |     Foo1      |    2012-01-01    |         03          |    
|     Cat1         |     Foo2      |    2012-04-06    |         04          | 
```

SP，给定一个`Category`，对于每个`ItemCode`需要获取工作流的第一行来读取的`InsertDate`和工作流的最后一行来获取当前的`Status`。

它归结为如下所示的 SP 实现：

```
CREATE PROCEDURE dbo.PR_GetFooItemInformation
    @Category CHAR(3)
AS
BEGIN

    CREATE TABLE #TabTemp (
            Category CHAR(3),
        ItemCode CHAR(3),       
        Status CHAR(2), 
        InsertDate DATETIME
    )

    CREATE CLUSTERED INDEX XIE1TabTemp 
        ON #TabTemp (...)

    CREATE NONCLUSTERED INDEX XIE2TabTemp 
        ON #TabTemp (...)

    INSERT INTO #TabTemp 
    SELECT
                 Category,
                 ItemCode,
                 Status,
                 InsertDate   
    FROM Workflow
    WHERE (Some rules to cut down the number of rows)

  SELECT 
      T1.Category,
      Item.ItemCode,
      T1.InsertDate,
      T2.Status
  FROM 
      Item
  INNER JOIN
      #TabTemp as T1 ON Item.ItemCode = Workflow.ItemCode
  INNER JOIN 
      #TabTemp as T2 ON Item.ItemCode = Workflow.ItemCode
  WHERE
      ...
  AND
      T1.InsertDate= SELECT 
                         MIN(InsertDate) 
                     FROM 
                         #TabTemp as T3 
                     WHERE ..
  AND
      T2.InsertDate = SELECT 
                         MAX(InsertDate) 
                      FROM 
                         #TabTemp as T4 
                      WHERE .. 
```

SP 已经按预期工作了很多年（2005 年），但是几个月前它开始给出一些随机超时；由于`workflow`表的记录数在增长（2.5M 并且还在增加），它的性能肯定会越来越差^*。

这些表已正确编入索引，而且就其价值而言，sql management studio 不建议在 SP 上建立任何进一步的索引。
不使用临时表的同一个 SP 速度要慢 4 倍。
此时的临时表在每次调用时平均填充 150 万行。

就我有限的 dba 知识而言，这个问题与`MIN`需要`MAX`计算以到达给定类别的每个项目的第一行和最后一行的函数有关。

我省略了有关工作流表和 SP 实现的一些细节，但我希望我所描述的内容足以让您了解问题所在。

最后一个问题：
您知道处理这种情况的任何 sql 策略甚至 sql-server 专有解决方案吗？

我有什么样的限制？
好吧，SP 用于 BackOffice 函数，应该返回所有实时记录，而不是预处理的子集。

^(* 我不是 dba；其中一位 dba 目前正在他黑暗的实验室里研究这个小怪物。)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:12:27.207

为什么你必须计算 MAX 和 MIN 超过日期？

你可以为 MAX 做

```
 SELECT TOP 1 InsertDate FROM #TabTemp WHERE ... ORDER BY InsertDate DESC 
```

对于 MIN

```
 SELECT TOP 1 InsertDate FROM #TabTemp WHERE ... ORDER BY InsertDate ASC 
```

并将其保存到 2 datetime 变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:13:29.890

```
SELECT  *
FROM    item
CROSS APPLY
        (
        SELECT  MIN(insertDate) AS dateOfFirstRecord
        FROM    workflow wf
        WHERE   wf.itemCode = i.itemCode
        ) fr
OUTER APPLY
        (
        SELECT  TOP 1
                status AS statusOfLatestRecord
        FROM    workflow wf
        WHERE   wf.itemCode = i.itemCode
        ORDER BY
                wf.insertDate DESC
        ) lr 
```

为此创建一个索引以`workflow (itemCode, insertDate)`使其快速工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T13:18:28.673

您建议的转换可以通过一个相对简单的查询来完成：

```
select category, ItemCode, min(InsertDate) as DateOfFirstRecord,
       max(case when seqnum = 1 then Status end) as LastStatus           
from (Select category, ItemCode, Status, InsertDate,
             row_number() over (partition by category, ItemCode order by InsertDate desc) as seqnum
      from workflow w
      where category = <category>  
     )  w
group by category, ItemCode; 
```

我意识到，一旦您输入条件，这就会变得更加复杂。

一般来说，我更喜欢让 SQL 优化器选择执行查询的最佳方式，而不是使用临时表。（话虽如此，有一些非常不愉快的经历，我不得不求助于多个查询，因为优化器选择了错误的计划。）

我建议你试试这个，看看它是否能解决你的性能问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T13:19:12.497

插入日期是索引吗？您需要一个复合索引（类别、项目代码、插入日期）

很可能，您的瓶颈出现在您不必要地创建的临时表中。您可以使用 where 条件过滤掉您的行。

是否可以像这样重写您的查询？

```
select category, itemcode, a.InsertDate, b.Status from (
        select category, itemCode, min(InsertDate) minDate, max(insertDate) maxDate
        from table where .. group by categroy, item code) minmax
        join table a on a.category =minmax.category 
                  and a.itemcode=minmax.itemcode and a.insertDate = minmax.mindate
        join table b on b.category =minmax.category and b.itemcode=minmax.itemcode 
        and b.insertDate = minmax.max date) results 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T13:19:31.417

试试这个 -

```
SELECT Category,
       ItemCode,
       MIN(InsertDate),
       MAX(Status)
FROM workflow 
WHERE Category = @cat
GROUP BY ItemCode 
```

您可能不需要临时表。此查询将获得所需的输出。索引类别和项目代码。

# ios - UISegmentedControl custom image for segment

> ID：10702599
> 
> 赞同：1
> 
> 时间：2012-05-22T13:03:37.250
> 
> 标签：ios, uisegmentedcontrol

is there any way to set custom image for selected segment in UISegmentedcontrol and change the fontsize?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T16:17:13.027

Use the below code in **UIControlEventValueChanged** event target

I'm adding the sample code.

```
UISegmentedControl *segmentControl = [[UISegmentedControl alloc] init];
[segmentControl addTarget:self action:@selector(segmentedControlValueChanged:) forControlEvents:UIControlEventValueChanged];
[self.view addSubview:segmentControl];
[segmentControl release];
segmentControl = nil;

-(void)segmentedControlValueChanged:(UISegmentedControl *)selectedSegmentControl{

    int numSegments = [selectedSegmentControl.subviews count]; //getting the number of all segment sections

    //removing all segment section images.
    for( int i = 0; i < numSegments; i++ ) {

        [selectedSegmentControl setImage:nil forSegmentAtIndex:i];

    }       

    //setting image to the selected segment section.    
    [selectedSegmentControl setImage:[UIImage imageNamed:@"multiple.png"] forSegmentAtIndex:selectedSegmentControl.selectedSegmentIndex];

} 
```

Please write down the details regarding the **Font Size change** . Do you wish to change only the selected segment text font size or for the all segment tabs?

Anyway, this is the common way to change the segment Font size. Please make use of it as per your conditions. You can add a comment below to get any additional help.

```
UIFont *myFont = [UIFont boldSystemFontOfSize:12.0f];
NSDictionary *myAttributes = [NSDictionary dictionaryWithObject:myFont
                                                       forKey:UITextAttributeFont];
[segmentedControl setTitleTextAttributes:myAttributes 
                                forState:UIControlStateNormal]; 
```

Please note that, this is only work with iOS5+

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-19T14:19:00.023

swift 5.x 用于更改图像：

```
 func addSegmented2(){

        let segmentedControl = UISegmentedControl(items: ["aa", "bb"])
        segmentedControl.frame = CGRect(x: 0, y: 240, width: 250, height: 30)
        self.view.addSubview(segmentedControl)
        let image = UIImage(named: "en")?.withRenderingMode(.**alwaysOriginal**)
        segmentedControl.setImage(image, forSegmentAt: 0)

    } 
```

# google-chrome-extension - Create table and insert data in local storage of Chrome extensions

> ID：10702614
> 
> 赞同：0
> 
> 时间：2012-05-22T13:04:25.830
> 
> 标签：google-chrome-extension

Can anyone please explain how to create a table and insert data in to the table in local storage for Chrome extensions? I need to retrieve the values from the table and do some validation.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:11:59.967

您可以 JSON.stringify() 您的表，然后在需要时再次使用 JSON.parse() 。

例子：

```
var table = [  { name : "Tom" , zip : 8210 } , { name : "Bob" , zip : 8201 } ];

localStorage.table = JSON.stringify( table );

console.log( localStorage.table ); //For the curious folks ( assuming Chrome here )

var retrievedTable = JSON.parse( localStorage.table ); 

console.log( retrievedTable ); 
```

当然你需要一些断言，你不想盲目地解析 localStorage 数据。

T。

# java - 如何在标准 Java 中实现 Android 消息处理程序模式？

> ID：10702622
> 
> 赞同：2
> 
> 时间：2012-05-22T13:04:51.693
> 
> 标签：java, android, multithreading, event-handling, streaming

我正在编写一个通过蓝牙与 PC 通信的 Android 应用程序。在正常操作期间，它会从电话向 PC 快速发送一连串短的 8 字节数据包，通常频率 >100Hz。

在每个设备上，一个单独的线程正在运行，执行写入和读取。代码如下所示：

```
/**
 * The Class ProcessConnectionThread.
 */
public class ConnectedThread extends Thread {

    /** The m connection. */
    private StreamConnection mmConnection;

    InputStream mmInputStream;
    OutputStream mmOutputStream;

    private boolean mmCanceled = false;

    /**
     * Instantiates a new process connection thread.
     * 
     * @param connection
     *            the connection
     */
    public ConnectedThread(StreamConnection connection) {
        mmConnection = connection;
        // prepare to receive data
        try {
            mmInputStream = mmConnection.openInputStream();
            mmOutputStream = mmConnection.openOutputStream();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

    /*
     * (non-Javadoc)
     * 
     * @see java.lang.Thread#run()
     */
    @Override
    public void run() {
        byte[] buffer;
        int bytes;

        // Keep listening to the InputStream while connected
        while (!mmCanceled) {
            try {
                buffer = ByteBufferFactory.getBuffer();
                // Read from the InputStream
                bytes = mmInputStream.read(buffer);
                if(bytes > 0)
                    onBTMessageRead(buffer, bytes);
                else
                    ByteBufferFactory.releaseBuffer(buffer);

            } catch (IOException e) {
                MyLog.log("Connection Terminated");
                connectionLost();//Restarts service

                break;
            }
        }

        if(!mmCanceled){
            onBTError(ERRORCODE_CONNECTION_LOST);
        }
    }

    /**
     * Write to the connected OutStream.
     * 
     * @param buffer
     *            The bytes to write
     * @param length
     *            the length
     */
    public void write(byte[] buffer, int length) {
        try {
            mmOutputStream.write(buffer, 0, length);

            // Share the sent message back to the UI Activity
            onBTMessageWritten(buffer, length);
        } catch (IOException e) {
            MyLog.log("Exception during write:");
            e.printStackTrace();
        }
    }

    /**
     * Cancel.
     */
    public void cancel() {
        try {
            mmCanceled  = true;
            mmInputStream.close();
            mmConnection.close();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }

} 
```

Android 端代码几乎相同，只是使用了蓝牙套接字而不是流连接。

最大的区别在于`onBTMessageRead(buffer, bytes);`

安卓功能：

```
protected void onBTMessageRead(byte[] buffer, int length) {
        if (mHandler != null) {
            mHandler.obtainMessage(BluetoothService.MESSAGE_READ, length, -1,
                    buffer).sendToTarget();
        }
    } 
```

PC服务器功能：

```
protected void onBTMessageRead(byte[] message, int length) {
        if (mEventListener != null) {
            mEventListener.onBTMessageRead(message, length);
        }
        // Release the buffer
        ByteBufferFactory.releaseBuffer(message);
    } 
```

Android 提供了一个 handler-looper/message 模式，允许跨线程发送消息。这允许读取尽可能快地发生，并将消息处理排队在另一个线程中。我的 ByteBufferFactory 确保资源在线程之间正确共享。

目前我只在 PC 端实现了一个事件侦听器模式，但我也希望在 PC 端也有一个类似的消息传递模式。目前，事件侦听器使 ConnectedThread 陷入困境并导致严重的通信延迟。

**有没有办法从java中的一个线程发送消息并让它们在另一个线程中以FIFO顺序异步处理？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:22:20.437

嗯，也许你可以从 Androids Source-Code 中复制相关的东西？你至少需要：

*   [活套](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/os/Looper.java)
*   [处理程序](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/os/Handler.java)
*   [信息](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/os/Message.java)
*   [消息队列](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/os/MessageQueue.java)

如果它不能开箱即用，请考虑将其作为“代码设计指南”

# python - 选择合适的方式在 Python 中使用 Neo4j

> ID：10702623
> 
> 赞同：11
> 
> 时间：2012-05-22T13:05:05.883
> 
> 标签：python, neo4j, gremlin, bulbs, tinkerpop

我目前正在为 neo4j 使用嵌入式 python 绑定。我目前没有任何问题，因为我的图非常小（稀疏且最多 100 个节点）。我正在开发的算法涉及图上的大量遍历，更具体地说，通常是图上的 DFS 以及不同的子图上的遍历。将来我打算在大型图上运行该算法（据说稀疏且具有数百万个节点）。

[在这里](http://groups.google.com/group/neo4j/browse_thread/thread/6c53c7c8d01623e6)[阅读](https://stackoverflow.com/questions/9959502/python-and-graph-database-use-java-lib-wrapper-or-rest-api)了与 python/neo4j 绑定性能相关的不同线程后，我想知道我是否应该已经切换到 Python 的一些 REST API 客户端（如bulbflow、py2neo、neo4jrestclient），直到我无法更改所有代码。

不幸的是，我没有找到任何全面的信息来源来比较不同的方法。

任何人都可以提供有关此问题的进一步见解吗？在选择其中一个选项时，我应该考虑哪些标准？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T17:38:41.710

Django 是一个 MVC Web 框架，所以如果你的框架是一个 Web 应用程序，你可能会对它感兴趣。

从 py2neo（我是它的作者）的角度来看，我试图通过在适当的情况下自动使用批处理执行机制以及提供强大的 Cypher 支持来专注于性能。我最近还投入了大量工作来为索引内的唯一性管理提供良好的选项 - 特别是`get_or_create`和`add_if_none`方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T19:26:54.227

从 Python 运行算法的最简单方法是使用 Gremlin ( [https://github.com/tinkerpop/gremlin/wiki)](https://github.com/tinkerpop/gremlin/wiki)。

使用 Gremlin，您可以将所有内容捆绑到一个 HTTP 请求中，以减少往返开销。

以下是从 Bulbs ( [http://bulbflow.com](http://bulbflow.com) ) 执行 Gremlin 脚本的方法：

```
>>> from bulbs.neo4jserver import Graph
>>> g = Graph()
>>> script = "g.v(id).out('knows').out('knows')"
>>> params = dict(id=3)
>>> g.gremlin.execute(script, params) 
```

Bulbs Gremlin API 文档在这里：[http ://bulbflow.com/docs/api/bulbs/gremlin/](http://bulbflow.com/docs/api/bulbs/gremlin/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:50:32.337

不太确定，我不是专家，但我认为这也取决于您对 Django 的期望，以及您需要多少框架。Py2neo 非常务实和苗条，Bulbflow 似乎建立了一个完整的映射堆栈等，而 neo4jrestclient 专注于 Django（这可能是错误的）？

# php - 将链接的图像重定向到内容页面

> ID：10702629
> 
> 赞同：0
> 
> 时间：2012-05-22T13:05:28.420
> 
> 标签：php, image, .htaccess, hotlinking

我有一个图像/视频托管网站。在 imgur 之类的。我得到的很多“链接果汁”来自直接链接到图像的人。我不喜欢这个。我希望将那些落在这些图片上的那些重定向到图像所在的实际页面。

现在结构如下：

[http://www.funzors.com/uploads/images/225.jpg](http://www.funzors.com/uploads/images/225.jpg) <- image

[http://www.funzors.com/media/225-pull-up-your-pants/](http://www.funzors.com/media/225-pull-up-your-pants/) <- 内容页面。

这是明智的做法吗？如果是这样，我该如何使用 htaccess 呢？我猜：

*   检查推荐人是否不是 funzors.com，并检查它是否不是谷歌（不需要谷歌不喜欢我的重定向）
*   不带状态码的重定向到内容页面。
*   检查人们是否不喜欢这个

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:43:57.127

浏览器期待图像，因为图像是使用类似`<img src="http://www.funzors.com/uploads/images/225.jpg" />`. 因此，如果浏览器获取 html 而不是 jpeg 数据，它只会显示损坏的图像图标，或者根本不显示图像。

您可以只重定向到包含您网站的“广告”的另一张图片。你可以把它做成一个很大的图像，这样盗链网站上的所有其他内容都会被推送到屏幕上:-) 你甚至可以创建一个漂亮的 gif 或其他东西

至于推荐人。嵌入图像的引用者是它所在页面的 url，因此它与页面本身的引用者不同。但是，如果您想在您的网站上允许图像搜索，您也应该允许 google/yahoo/etc。我不认为谷歌的爬虫发送引用标题，所以你很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:07:39.810

将它放在 /uploads/images 文件夹内的 htaccess 中。

```
RewriteEngine On
RewriteBase /uploads/images
RewriteCond %{HTTP_REFERER} !funzors\.com
RewriteCond %{HTTP_REFERER} !google\.
RewriteCond %{HTTP_REFERER} !^$
RewriteRule ^225\.jpg$ /media/225-pull-up-your-pants/ [R,L] 
```

这将重定向 iff：referer 不包含`funzors.com` **也不**包含`google.`（注意我没有指定 tld，因为不同国家/地区不同）**并且**referer 不为空（一些代理和软件删除了 referer；googlebot 也没有t发送推荐人）

# asp.net-mvc - 使用 asp.net MVC 以编程方式重定向到 404 页面

> ID：10702631
> 
> 赞同：12
> 
> 时间：2012-05-22T13:05:37.483
> 
> 标签：asp.net-mvc, http-status-code-404

我创建了一个 Asp.net MVC 应用程序。现在需要 404 处理。

已更新 global.asax 并根据状态码显示 404 页面。还在 web.config 中添加了 customErrors 属性。它工作正常。

现在，当任何不符合我们要求的东西时，我想以编程方式重定向到 404。

IE

```
if(!valid) 
{
    return RedirectToAction("Index", "Page404");
} 
```

它工作正常，但有两种状态，一种是 301，然后是 404。那么我该如何防止 301？我只需要404。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-22T13:10:25.827

只需从您的操作中返回：

```
return HttpNotFound(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T13:10:40.817

在您的`web.config`中，添加：

```
<customErrors mode="On" >
       <error statusCode="404" redirect="/404.shtml" />
</customErrors> 
```

当找不到请求的资源时，这将重定向到 404.shtml 页面。

**注意：**对于这种情况，无需以编程方式重定向用户。

* * *

**编辑：** 我从字面上建议：

```
if (Context.Response.StatusCode == 404) {
  // handle this
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T13:10:02.097

只需在状态码中抛出 404 即可：

```
Response.StatusCode = (int)System.Net.HttpStatusCode.NotFound 
```

# java - Java 中的 String.split() 是否保证返回有序数组？

> ID：10702632
> 
> 赞同：7
> 
> 时间：2012-05-22T13:05:40.477
> 
> 标签：java, string, split

我正在编写一个应用程序，我收到一条消息，该消息是 tag1=value1|tag2=value2|tag3=value3 等序列。我想将它拆分为 | 分隔符。

阅读 Javadoc 后，没有什么可以说 String.split(String regex) 方法可以保证保持消息的原始顺序。我玩过，看起来还不错，但如果我以后会被抓到，我宁愿不采用这种方法。

那么，是否有人知道是否存在可以从原始字符串更改 split() 返回的数组元素顺序的情况？或者任何人都可以指出任何说明订单保证得到维护的文件吗？

（抱歉，如果这是一个骗局，但我在网站上找不到类似的问题。）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-22T13:07:22.927

[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)说：

> 数组中的子字符串按照它们在此字符串中出现的顺序排列。

**编辑**：以上是双参数`split(String regex, int limit)`版本，但单参数版本

> 就像通过使用给定表达式和零极限参数调用双参数拆分方法一样工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T13:07:50.743

我`The substrings in the array are in the order in which they occur in this string.`在[http://docs.oracle.com/javase/7/docs/api/java/lang/String.html](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)看到...

# windows-phone-7 - 如何获取 Bing API AppID

> ID：10702634
> 
> 赞同：9
> 
> 时间：2012-05-22T13:06:08.670
> 
> 标签：windows-phone-7, azure, bing-api, azure-marketplace

我的目的是访问 Windows Phone 项目中的 Bing API，我必须在代码中提供 APP ID。许多教程都说了同样的故事来访问[诺基亚教程](http://www.developer.nokia.com/Community/Wiki/Text_to_Speech_in_Windows_Phone_7)和 [CodeProject](http://www.codeproject.com/Articles/259727/Text-to-speech-in-windows-phone7)等 APP ID 。但是 Bing 宣布现在一切都转移到了 Azure MarketPlace。我搜索了所有内容并在 Azure Marketplace 中注册。但是没有提到APP ID。谁能帮我获取APP ID？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T13:10:52.563

~~[此处](http://www.bing.com/community/site_blogs/b/developer/archive/2012/05/17/bing-developer-update-2.aspx)~~的迁移指南包括不再需要 AppId 而是使用在您注册 Azure 市场时提供给您的帐户密钥的示例。迁移指南应包含您开始使用的所有内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-22T16:13:46.217

您可以在此处获取 Bing API - [http://www.bing.com/toolbox/bingdeveloper/](http://www.bing.com/toolbox/bingdeveloper/)

# c - 将十六进制数解析为数组

> ID：10702636
> 
> 赞同：1
> 
> 时间：2012-05-22T13:06:13.943
> 
> 标签：c

我有一个变量`char* etag="8a964ee2a5e88be344f36c22562a6486";`。

我怎样才能把它转换成一个数组`byte`，`byte`实际上在哪里`typedef unsigned char byte`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T13:23:19.683

```
byte bytes[16];
int i=0;
for (;i<16;++i) {
  int value;
  sscanf(etag+2*i,"%02x",&value);
  bytes[i] = value;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T13:19:40.107

如果我理解正确，您希望将 2 个字母的十六进制字符组转换为字节，然后将这些字节存储在您的 char 数组中。尝试这个：

```
char *str = "long hex string";

int i;
unsigned char bytes[16];
char tmp[3] = { 0 };
for(i = 0; i < 16; i++)
{
    memcpy(tmp, str + 2 * i, 2);
    bytes[i] = (unsigned char)strtol(tmp, NULL, 16);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T13:23:41.730

你可能使用[strtol](http://www.cplusplus.com/reference/clibrary/cstdlib/strtol/)

下面是示例程序：

```
/****************************************************************
 *
 * Purpose: To show examples of the strtol function.
 * Author:  M.J. Leslie
 * Date:    06-Nov-94
 *
 ****************************************************************/

#include <stdlib.h>

main()
{
  char num[10];

                /* Test a valid number      */
  strcpy(num,"13");

  printf("%s(Oct) is %i(Dec)\n", num, strtol(num, NULL,  8));
  printf("%s(Dec) is %i(Dec)\n", num, strtol(num, NULL, 10));
  printf("%s(hex) is %i(Dec)\n", num, strtol(num, NULL, 16));

  puts("----------------------------------");

                /* Test a slightly valid number
                 * Returns the same results as 
                 * above.           */
  strcpy(num, "13hzcd");

  printf("%s(Oct) is %i(Dec)\n", num, strtol(num, NULL,  8));
  printf("%s(Dec) is %i(Dec)\n", num, strtol(num, NULL, 10));
  printf("%s(hex) is %i(Dec)\n", num, strtol(num, NULL, 16));

  puts("----------------------------------");

                /* Test an invalid number
                 * Returns ZERO         */
  strcpy(num, "hzcd");

  printf("%s(Oct) is %i(Dec)\n", num, strtol(num, NULL,  8));
  printf("%s(Dec) is %i(Dec)\n", num, strtol(num, NULL, 10));
  printf("%s(hex) is %i(Dec)\n", num, strtol(num, NULL, 16));

  puts("----------------------------------");

                /* Test 0 base.
                 * This will look at the number 
                 * and decide the base for its self!
                 */
  strcpy(num, "13");
  printf("%s is %i(Dec)\n", num, strtol(num, NULL, 0));

  strcpy(num, "013");
  printf("%s is %i(Dec)\n", num, strtol(num, NULL, 0));

  strcpy(num, "0x13");
  printf("%s is %i(Dec)\n", num, strtol(num, NULL, 0));

}

/****************************************************************
 *
 * Results of the program:
 *
 *  13(Oct) is 11(Dec)
 *  13(Dec) is 13(Dec)
 *  13(hex) is 19(Dec)
 *  ----------------------------------
 *  13hzcd(Oct) is 11(Dec)
 *  13hzcd(Dec) is 13(Dec)
 *  13hzcd(hex) is 19(Dec)
 *  ----------------------------------
 *  hzcd(Oct) is 0(Dec)
 *  hzcd(Dec) is 0(Dec)
 *  hzcd(hex) is 0(Dec)
 *  ----------------------------------
 *  13 is 13(Dec)
 *  013 is 11(Dec)
 *  0x13 is 19(Dec)
 *
 ****************************************************************/ 
```

# google-maps - 在不询问我的情况下强制 getCurrentPosition Google Maps

> ID：10702637
> 
> 赞同：0
> 
> 时间：2012-05-22T13:06:21.943
> 
> 标签：google-maps, localization, geolocation, google-maps-api-2

我在我的网站中使用 Google Maps API 来显示地图。现在发生的是我使用这段代码：

```
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) { 
        var pos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
        map.setZoom(parseInt(document.getElementById("zoom").value));
        map.setCenter(pos);
        markers[0].setPosition(pos);  
    });              

} 
```

所以它每次都会询问我是否要在地图中设置我的位置。有没有办法在地图中默认设置我的位置，而不用问我，所以以某种方式强制 getCurrentPosition 运行？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:19:25.677

如果您检查[Geolocation API](http://dev.w3.org/geo/api/spec-source.html)，您会发现可以缓存位置。您还可以手动将每个用户的位置存储在 cookie 或数据库中，然后再使用它。

# php - 使用 PHP 和 MySQL 处理 txt 文件中的非逗号分隔数据

> ID：10702640
> 
> 赞同：1
> 
> 时间：2012-05-22T13:06:41.883
> 
> 标签：php, mysql, text

我有大量数据需要导入 MySQL 数据库。我习惯于导入逗号和制表符分隔的数据，但这次不同，我将在下面尝试用最简单的术语解释格式。

所以它可能是：

```
XXXXXXXXX
```

或者它可能是：

```
XXX X XXX
```

或者它可能是：

```
XX XX
```

我希望空格显示正确！如果是这样，您会看到每个字符都有其分配的空间，而不是由空格、制表符或逗号分隔的 3 个部分。（它们在技术上由空格分隔，但由不同的数字分隔）。

我需要做的是说字符 1、2 和 3 进入数据库中的 field_1。字符 4 始终为空白，字符 5、6 和 7 进入 field_2 等。基本上每个部分都必须在其自己的字段中。

现在，我想我可以将它作为所有一个字段导入到一个临时表中，并且可能使用 SUBSTR() 将这些数据排列为如上所述的正确格式。

但这似乎有点啰嗦。

有一个更好的方法吗？我希望将其从文本文件直接导入数据库中的正确格式，而无需采取任何其他步骤。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:05:48.543

我尝试了 PHP substr() 路由，虽然它有效，但我发现处理循环通过每一行的数据需要很长时间，并且考虑到我有数十万条记录要处理，觉得它太慢了。

作为替代方案，我找到了这个简单的 SQL 解决方案，它可以非常快速地处理数据：

```
LOAD DATA LOCAL 
    INFILE 'fixed-width-data.txt' 
INTO TABLE 
    my_table (@line)
SET 
    field_1 = SUBSTR(@line,1,3),
    field_2 = SUBSTR(@line, 5,3),
    field_3 = SUBSTR(@line, 9,3) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-22T13:20:05.817

`substr()`是一种选择，但使用正则表达式可能更优雅。对于您的示例，其中字符 1 到 3 是一个字段，而 5 到 7 是另一个字段，您可以这样做……</p>

```
preg_match('/^(.{3}).(.{3})$/', $line_of_data, $matches);
$field_one = $matches[1];
$field_two = $matches[2]; 
```

这显然是一个简化的示例，但我认为，如果您有许多数据“字段”可供使用，您会发现`substr()`从长远来看，使用正则表达式而不是一遍又一遍地使用会更愉快。

# java - 带有状态页面的检票地址 url 参数

> ID：10702641
> 
> 赞同：1
> 
> 时间：2012-05-22T13:06:49.697
> 
> 标签：java, url, wicket

在我开发的应用程序上，我试图为应用程序的页面保留一个漂亮且可读的 url。我从 url 开始，如下所示： [http://somedomain.com/context/?param1=value¶m2=value](http://somedomain.com/context/?param1=value&param2=value) 其中 context 是应用程序的挂载路径，param1 和 param2 是传递给应用程序的一些参数。问题是，当我移动到另一个页面时，url 更改如下： [https://somedomain.com/?wicket:bookmarkablePage=:something&Title=something&group=something](https://somedomain.com/?wicket:bookmarkablePage=:something&Title=something&group=something) 我在页面之间移动的方式如下：

> getRequestCycle().setResponsePage(new otherPage(obj1, obj2, pageParameters)

其中 obj1 和 obj2 是页面初始化所需的对象。[正如我从这篇](https://stackoverflow.com/questions/6390953/how-can-i-create-a-wicket-url-that-hides-its-parameters)文章中了解到的那样

> `RequestCycle().setResponsePage(Page page)`

创建一个不可收藏且不显示参数的有状态页面，同时使用

> `RequestCycle().setResponsePage(Class<C> pageClass, PageParameters pageParameters)`

创建一个显示参数的无状态页面。问题是我使用第一个，因为我必须自己创建页面，这样我才能将两个对象传递给它。有什么方法可以将 url 保持为其原始的可收藏格式并从中删除 wicket 的参数？我尝试了几乎所有在这个网站和其他网站上发布的建议，但没有一个适合我的情况，因为他们建议让 wicket 自己创建页面（使用 setResponsePage 的第二个选项）。任何帮助都感激不尽。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:06:25.910

从您的 url 示例中，我看到您正在使用 Wicket 1.4。我相信 1.5 会做你想要的开箱即用。在 Wicket 1.4 中，您可以通过使用 HybridUrlCodingStrategy 挂载页面来获得类似的结果。

# python - AttributeError：“NoneType”对象没有属性“connectSSL”

> ID：10702644
> 
> 赞同：1
> 
> 时间：2012-05-22T13:06:58.013
> 
> 标签：python, ssl, openssl, twisted, pyqt4

我正在为我的服务器编写一个 ssl 客户端，它使用 python 和 pyqt4 扭曲，我使用 QTReactor 在 PYQT 中扭曲，但是当我运行代码时出现错误

```
AttributeError: 'NoneType' object has no attribute 'connectSSL' 
```

我的初始代码是这样的

```
from OpenSSL import SSL
import sys
from twisted.internet.protocol import ClientFactory
from twisted.protocols.basic import LineReceiver
from twisted.internet import ssl
import qt4reactor

app = QtGui.QApplication(sys.argv)
reactor=qt4reactor.install()
main()
myapp = MainForm()
myapp.show()
reactor.runReturn()
sys.exit(app.exec_())

def main():
    factory = ClientFactory()
    reactor.connectSSL('localhost', 8080, factory, ssl.ClientContextFactory())
    try:
        reactor.run()
    except KeyboardInterrupt:
        reactor.stop() 
```

我运行它时的错误：

```
Traceback (most recent call last):
  File "client.py", line 51, in <module>
    main()
  File "client.py", line 40, in main
    reactor.connectSSL('localhost', 8080, factory, ssl.ClientContextFactory())
AttributeError: 'NoneType' object has no attribute 'connectSSL' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T13:10:43.463

> AttributeError：“NoneType”对象没有属性“connectSSL”

是您尝试在 上调用方法时收到的错误消息`None`。

这行代码

```
reactor=qt4reactor.install() 
```

是唯一`reactor`被分配的地方。错误消息清楚地表明`reactor`正在分配 value `None`。

我可以在该主题上找到的所有网络搜索点击都遵循以下模式：

```
qt4reactor.install(app)
from twisted.internet import reactor 
```

所以我想这就是你应该这样做的方式。但我承认对这些框架一无所知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T13:12:30.613

`qt4reactor.install()`不返回值，因此`reactor`最终成为`None`. 因此，当您尝试调用某个方法时，`reactor`您会收到此错误（显然，`None`没有任何方法）。`reactor`如果我没看错，获取变量的正确方法是：

```
qt4reactor.install(app)
from twisted.internet import reactor 
```

# iphone - 将 spotify url 发布到 facebook 不再有效

> ID：10702650
> 
> 赞同：3
> 
> 时间：2012-05-22T13:07:30.337
> 
> 标签：iphone, facebook, spotify

我曾经有一种将Spotify歌曲完美地发布到Facebook的工作方式。

它们看起来就像从 mac 或 windows 版本的 spotify 共享的任何其他链接。

现在，几个月后..我只能发布像 www.domain.com 这样的链接，但我不能再发布像[http://open.spotify.com/track/4yLSpYlcO0jPPLTa3nW8zN这样的链接](http://open.spotify.com/track/4yLSpYlcO0jPPLTa3nW8zN)

有人可以尝试发布一个类似上面的链接，看看它是否在他们的 Facebook 上显示为带有专辑封面的播放图标吗？我想知道 facebook 是否已经改变了他们的 API，所以这不再可能了？我正在使用 FBGraph。

结果应该是这样的（就像之前一样）：

[http://voteplay.no/fbspotify.png](http://voteplay.no/fbspotify.png)

但是，现在我在使用 spotify url 时收到此错误：

抱歉，出了一些问题。我们正在尽快努力修复这个。

**更新**

代码：

```
‎- (IBAction)facebookShare:(id)sender {

PartyQAppDelegate *delegate = (PartyQAppDelegate *)[[UIApplication sharedApplication] delegate];
facebook = [delegate facebook];

if (![facebook isSessionValid]) {

facebook.sessionDelegate = delegate;

NSArray *permissions = [[NSArray alloc] initWithObjects:@"read_stream", @"publish_stream",@"offline_access", nil];

[facebook authorize:permissions];

NSLog(@"SESSION NOT VALID!");

}else {

NSLog(@"SESSION VALID!");

NSString *trackurl = [self openSpotifyEncode:self.currentTrackPlaying];

NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:trackurl, @"link",nil];

[facebook dialog:@"feed" andParams:params andDelegate:self];

}

}

- (NSString *)openSpotifyEncode:(NSString *)string {

NSString *encodedString = [NSString stringWithFormat:@"http://open.spotify.com/track/%@", [string substringFromIndex:14]];

return encodedString;

} 
```

* * *

我已经解决了错误，不再需要任何帮助！感谢您让我知道它仍在工作。（努力寻找错误）。

错误是 appdelegate 中的代码顺序，但我仍然不知道为什么这会让我完美地发布所有其他链接而不是 spotify 链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:34:19.860

我已经通过直接在 Facebook 上发布链接并通过应用程序进行了尝试。两者都正常工作并显示了轨道的图像和元数据。您可以使用 Graph API Explorer 工具自行测试：[https ://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)

![截屏](../Images/831a552d11a982bf81ec1f2dc7eb3b86.png)

确保其他地方的代码没有问题。我看到您正在请求`offline_access`许可，该许可正在被 Facebook 弃用。

# asp.net - SQL Azure 多实例 Web 角色：- 会话在本地计算机上不起作用

> ID：10702651
> 
> 赞同：0
> 
> 时间：2012-05-22T13:07:30.907
> 
> 标签：asp.net, azure, azure-web-roles

我们在 azure 上托管我们的 Web 应用程序。到目前为止一切顺利，只有 1 个小实例的 Web 角色。

然后，我们决定为我们的 Web 角色尝试 2 个额外的小实例，以便对 http 请求进行负载平衡。

我们的会话也使用 MS 推荐的方法存储在[这里](http://msdn.microsoft.com/en-us/gg457897)。

当我们在生产环境上发布时，会话运行良好（全部填满）。在 azure 模拟器上本地测试时，会话不会被填充。

有谁知道可能是什么问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:00:23.363

问题是由于本地防火墙造成的。关闭它使缓存可用于会话状态！

# static-analysis - IDE 错误检测和自动完成的复杂性取决于语言语法？

> ID：10702652
> 
> 赞同：6
> 
> 时间：2012-05-22T13:07:33.207
> 
> 标签：static-analysis, pre-compilation

为主要由人类可读的短语和单词组成的编程语言（即 Python、VB.NET）提供开发环境错误反馈和自动补全是否需要更少的检查/不太严格的代码分析？这与 C 风格的语言形成对比，后者更多地依赖于符号和标点符号的代码结构。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T17:23:18.620

我有经验/负责构建[数十种语言前端](http://www.semanticdesigns.com/Products/FrontEnds)。

冗长的语言与标点的语言通常同样难以解析和静态分析。

定义这两种语言的人要么几十年来一直在修饰它们（例如，自 1958 年以来的 COBOL），要么构建具有复杂语法、复杂名称解析和类型推断规则的复杂语言（C++、Scala、Ruby）；然后编译器供应商继续添加晦涩的语法来支持他们所做的奇怪事情或提供客户锁定（例如，MS“托管 C++”、DLL 声明等）。第三个问题是糟糕的定义；顶级语言可能对它们的工作方式有精确的规则，但许多语言都有草率的定义（例如，PHP），这会产生黑暗的极端情况，必须通过对实际实现的痛苦实验来解决。

C++ 是我们最糟糕的，尤其是。C++11 委员会最近把事情搞得一团糟。我们拥有完整的 C++ 解析器，但仍在 C++98 实现之上为 C++11 进行全名解析。（名称解析代码大约有 250,000 行代码，还不够！）。

IBM COBOL 紧随其后；该语言非常庞大，并且有各种有趣的名称解析规则（“如果引用明确，则非限定名称可以无条件引用特定名称”那么，在这种情况下，这个名称是明确的引用吗？）。

一旦您通过了解析和名称/类型解析，您就可以进入控制流、数据流、指向分析、范围分析、调用图构建……这些通常与早期阶段的工作量大致相同；通过拥有支持这些任务的非常好的库，我们可以少花钱。

将所有这些作为背景分析，您可以开始进行人们想要的智能类型的“静态分析”。

另一位发帖人指出，从语法错误中恢复并（强调）“继续生成有意义的错误消息”。对此我只能说“阿门，兄弟”。请参阅此 SO 答案[https://stackoverflow.com/a/6657974/120163](https://stackoverflow.com/a/6657974/120163)讨论当您有“部分程序”时出了什么问题，这基本上是您在语法错误修复猜测修复时得到的。

# menu - 排版两个依赖的菜单

> ID：10702656
> 
> 赞同：0
> 
> 时间：2012-05-22T13:07:49.397
> 
> 标签：menu, typo3, typoscript

我想在网站顶部有一个水平菜单，在网站左侧有一个带有 2 级和 3 级菜单的垂直菜单。

不幸的是，我的打字稿为这两个区域显示了相同的菜单。

有什么想法有什么问题吗？

```
# Hauptmenu
lib.mainMenu = HMENU
lib.mainMenu.special = directory
lib.mainMenu.special.value = 1
lib.mainMenu.entryLevel = 0
lib.mainMenu.1 = TMENU
lib.mainMenu.1.NO {
  wrapItemAndSub = <div class="grid_1_menu"> | </div > |*| <div class="grid_1_menu"> | </div > |*| <div class="grid_1_menu grid_1_menu_end"> | </div >
}

# Seitennavigation
lib.subMenu= HMENU
lib.subMenu.special = directory
lib.subMenu.special.value = 1
lib.subMenu.entryLevel = 1
lib.subMenu.wrap = <ul class="sub-menu" id="menu-level-1">|</ul>
lib.subMenu.1 = TMENU
lib.subMenu.1.NO {
  wrapItemAndSub = <li class="first"> | </li> |*| <li class="middle"> | </li> |*| <li class="last""> | </li>
}

lib.subMenu.2 < lib.subMenu.1
lib.subMenu.2.wrap = <ul class="sub-menu" id="menu-level-2">|</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:42:44.010

这很容易：

```
special = directory
special.value = 123 
```

`ALL`从插入`page`或使用 uid = 123的项目创建菜单`sysfolder`，通过写入值（`1`在您的情况下）您指示 TS 从（可能）主页下的页面构建菜单。

正如您在此示例中所见，`special`指令优先于`entryLevel`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:22:22.713

虽然我不明白为什么，但我不得不删除

```
lib.subMenu.special.value = 1 
```

# .net - CSLA.NET 框架的性能

> ID：10702658
> 
> 赞同：2
> 
> 时间：2012-05-22T13:07:55.567
> 
> 标签：.net, c#-4.0, business-logic, csla, data-layers

我们的系统使用基于实体框架的数据层。最近几个月，我们一直在使用 EF 生成的实体进行数据传输、业务逻辑和 UI。

由于我们的应用程序变得越来越大，我们决定创建一个单独的业务层，并使用 CSLA.NET 框架来帮助我们做到这一点。随着系统负载的增加，这应该有助于我们“扩展”。

我们正在编写新的 BL，我一直在比较应用程序模块在迁移它们以使用新的 BL 之前和之后的性能。我注意到性能降低了近 50 倍！这不是 50%，而是慢了 50 倍。

我知道引入 BL 会因为额外的层等而增加一些延迟，但我没想到延迟会这么大。

这是正常的吗？是否有任何标准可以在可接受的引入延迟（由于添加的层）和“我们失去的比我们所能获得的更多”之间划清界限

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:11:08.183

我不认为事情会那么慢，但根据经验......我的团队在过去一年开始使用 CSLA (v4)，我们使用的首批应用之一在加载更大的数据列表时变得非常慢。列表的存储过程在一秒钟内返回，但业务对象 Data Portal 方法需要 10 多秒才能返回。在我们的特定情况下，问题最终是我们正在实例化一个 WCF 事件提供程序类，因为*每个*记录都被加载到一个列表对象中。一旦我们意识到并解决了这个问题，性能就会非常出色。

所以 - 我不希望使用 CSLA 成为你提到的滞后的原因，但是以错误的方式使用它（就像我正在做的那样）很容易导致问题。

# java - 如何在 Eclipse Android 的 Res 下新建文件夹

> ID：10702659
> 
> 赞同：-1
> 
> 时间：2012-05-22T13:08:04.817
> 
> 标签：java, android, eclipse

我想为横向布局 xmls 创建一个新文件夹“layout_land”。当我在 res 下创建一个新文件夹，并清理并重建 ro 重新生成 R.java 时，我仍然发现该文件夹显示为错误。我在创建之前和之后不久尝试过清理/重建，但它没有用。请提出解决方案。问候英德拉吉特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:09:16.863

该文件夹应称为 layout-land 而不是 layout_land。那应该行得通。

# iphone - 在iphone中长时间在后台运行应用程序

> ID：10702661
> 
> 赞同：2
> 
> 时间：2012-05-22T13:08:07.397
> 
> 标签：iphone

嗨，我想在后台运行我的应用程序，直到我退出它。为此，我使用了下面的代码

```
 bgTask = [application beginBackgroundTaskWithExpirationHandler: ^{
            dispatch_async(dispatch_get_main_queue(), ^{

                [application endBackgroundTask:bgTask];
                bgTask = UIBackgroundTaskInvalid;

            });
        }]; 
```

但它在特定时间后退出。任何人都可以指导我实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:19:36.580

你没有！

Apple 会允许你完成一个冗长的操作，但让你的应用程序保持运行并不是件好事。这会耗尽你的电池。

Apple 支持三种后台运行应用程序：音频播放器、VOIP 客户端和基于位置的应用程序。基于位置的应用程序只会接收主要的位置更新，并且一次只能运行一个音频播放器。

滥用后台模式会让你的应用被拒绝。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:19:12.157

不会这样工作。您的应用程序需要以适当的方式支持其中一种后台模式

# c - 为什么程序的输出有所不同？

> ID：10702666
> 
> 赞同：0
> 
> 时间：2012-05-22T13:08:26.773
> 
> 标签：c, file

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main()
{
    FILE *fp;
    char ch;
    char buffer[80] ;
    fp = fopen("c:\\Rasmi Personal\\hello.txt", "w");

    if(fp == NULL)
    {
        printf("File not found");
        exit(1);
    }
    else
    {
        while(1)
        {
            gets(buffer);
            fwrite(buffer, strlen(buffer), 2, fp); /* I made, size_t nitems = 2 (third element/argument)*/
            fwrite("\n", 1, 1, fp);
        }

    }

    fclose(fp);

    return 0;
} 
```

输入：

```
Rasmi Ranjan Nayak 
```

输出：

```
Rasmi Ranjan Nayak      0@ ÿ" 8ÿ" 
```

为什么这个垃圾来了。

根据 fwrite() 函数。如果`size_t nitems is more than 1`则输入的文本将被写入`more than once`。但是这里为什么我会得到垃圾？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T13:12:36.270

您要从缓冲区`fwrite()`写入两倍字节（通过设置您使其写入两个“对象”，每个对象都是字节长），因此它读取的字节数是实际存在的字节数的两倍。`strlen(buffer)``nmemb = 2``strlen(buffer)`

“垃圾”只是字符串以 . 结尾后出​​现在内存中的任何内容`buffer`。

这是损坏的代码，`nmemb`应该是`1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:21:56.830

fwrite 函数的签名是

```
size_t fwrite ( const void * ptr, size_t size, size_t count, FILE * stream );

ptr
  Pointer to the array of elements to be written.
size
  Size in bytes of each element to be written.
count
  Number of elements, each one with a size of size bytes.
stream
  Pointer to a FILE object that specifies an output stream. 
```

在这种情况下，如果您尝试写入比原始字符串更大（以字节为单位）的 count * size，您就会得到这个垃圾。如果你清理缓冲区

```
memset(buffer,0,80*sizeof(char));
gets(buffer); 
```

可能会看到不同的结果

```
$ ./a.out
asdadsadasdsad

$ cat -v hello.txt 
asdadsadasdsad^@^@^@^@^@^@^@^@^@^@^@^@^@^@ 
```

但文本总是写一次。不同之处在于将写入多少字节

# sas - SAS 读取包含多个分隔符的数据

> ID：10702672
> 
> 赞同：1
> 
> 时间：2012-05-22T13:08:44.350
> 
> 标签：sas

```
26/03/2012~19:45:58~1~1636~00000000000000000000~41.45~17~16;
28/03/2012~19:45:58~1~1636~00000000000000000000~41.45~17~6;
29/03/2012~19:45:58~1~1636~00000000000000000000~41.45~17~1;
23/03/2012~19:45:58~1~1636~00000000000000000000~41.45~17~4;
25/03/2012~19:45:58~1~1636~00000000000000000000~41.45~17~9;
27/03/2012~19:45:58~1~1636~00000000000000000000~41.45~17~880; 
```

我有这些数据要读。虽然很明显分隔符是“~”，但由于“;”，我在阅读观察的最后一列时遇到了问题

如何让 SAS 读取 16、6、1、4、9、880 而不是“;” ? 谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T14:16:56.410

只需指定';' 在分隔符语句中，以及 '~'

```
data test;
infile "/path/to/file" delimiter='~;';
input var1 $ var2 $ var3-var7 var8;
run; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T14:03:09.017

你可以读到';' 然后使用 compress 函数将其剥离：

```
a=compress(b,";"); 
```

您可能需要一个数字：

```
a=input(compress(b,";"),best.); 
```

如果我这样做，我可能会使用*INFILE*变量和 SCAN 函数：

```
data mydata;
  infile "/path/to/my/file";
  input;
  rogue_var=scan(_infile_,-1,"~;");
  rogue_var_num=input(scan(_infile_,-1,"~;"),best.);
run; 
```

请注意，“-1”作为 SCAN 函数的第二个参数意味着我们从行尾获取第一个单词。

# c# - PostSharp 序列化

> ID：10702677
> 
> 赞同：1
> 
> 时间：2012-05-22T13:09:08.573
> 
> 标签：c#, postsharp

> 编译时和运行时之间的方面的持久性是通过序列化方面来实现的......

来自[PostSharp 文档](http://doc.sharpcrafters.com/postsharp-2.1/##PostSharp-2.1.chm/html/7480ca54-61c0-46c5-9914-60a58c3033e8.htm)。

据我了解，这仅在我使用该`CompileTimeInitialize`方法在编译时设置某些值时才重要。我很少使用这个。我认为仅仅实例化方面会比反序列化它们快得多，不是吗？如果我可以选择跳过序列化过程，那么 PostSharp 不会更快吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:37:25.470

我想你说的是 CompileTimeInitialize。如果不需要，可以使用 MsilAspectSerializer 跳过序列化（请参阅~~[http://doc.sharpcrafters.com/postsharp-2.1/Content.aspx/PostSharp-2.1.chm/html/f711d5da-5696-443c-9b42 -e67a3d8b7b36.htm](http://doc.sharpcrafters.com/postsharp-2.1/Content.aspx/PostSharp-2.1.chm/html/f711d5da-5696-443c-9b42-e67a3d8b7b36.htm)~~ [http://doc.postsharp.net/postsharp-2.1/Default.aspx##PostSharp-2.1.chm/html/f711d5da-5696-443c-9b42-e67a3d8b7b36.htm](http://doc.postsharp.net/postsharp-2.1/Default.aspx##PostSharp-2.1.chm/html/f711d5da-5696-443c-9b42-e67a3d8b7b36.htm)）。

# objective-c - 在 Objective-C 中，如何打印出 N 个空格？（使用 stringWithCharacters）

> ID：10702678
> 
> 赞同：10
> 
> 时间：2012-05-22T13:09:09.740
> 
> 标签：objective-c, ios, nsstring, core-foundation

以下尝试打印出 N 个空格（或示例中的 12 个）：

```
NSLog(@"hello%@world", [NSString stringWithCharacters:" " length:12]);

const unichar arrayChars[] = {' '};
NSLog(@"hello%@world", [NSString stringWithCharacters:arrayChars length:12]);

const unichar oneChar = ' ';
NSLog(@"hello%@world", [NSString stringWithCharacters:&oneChar length:12]); 
```

但是它们都打印出奇怪的东西，例如`hello ÔÅÓñüÔÅ®Óñü®ÓüÅ®ÓñüÔ®ÓüÔÅ®world`......我认为“char数组”与“字符串”相同，与“指向字符的指针”相同？API规范说它是一个“Unicode字符的C数组”（通过Unicode，它是UTF8吗？如果是，那么它应该与ASCII兼容）......如何使其工作以及为什么这3种方式获胜不行吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-22T13:23:02.930

这会给你你想要的：

```
NSLog(@"hello%@world", [@"" stringByPaddingToLength:12 withString:@" " startingAtIndex:0]); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-22T13:36:16.827

您可以使用`%*s`来指定宽度。

```
NSLog(@"Hello%*sWorld", 12, ""); 
```

[参考：](http://pubs.opengroup.org/onlinepubs/009695399/functions/printf.html)

> 字段宽度或精度或两者都可以用星号 ('*') 表示。在这种情况下，int 类型的参数提供字段宽度或精度。应用程序应确保指定字段宽度或精度或两者的参数以该顺序出现在要转换的参数（如果有）之前。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-22T13:23:56.070

我认为您遇到的问题是您误解了`+(NSString *)stringWithCharacters:length:`应该做什么。它不应该重复字符，而是将它们从数组复制到字符串中。

因此，在您的情况下，数组中只有一个 ' '，这意味着其他 11 个字符将从`arrayChars`内存中的任何内容中获取。

如果你想打印出 n 个空格的模式，最简单的方法是使用`-(NSString *)stringByPaddingToLength:withString:startingAtIndex:`，即创建这样的东西。

```
NSString *formatString = @"Hello%@World";
NSString *paddingString = [[NSString string] stringByPaddingToLength: n withString: @" " startingAtIndex: 0];
NSLog(formatString, paddingString); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-22T13:21:29.423

这可能是最快的方法：

```
NSString *spacesWithLength(int nSpaces)
{
    char UTF8Arr[nSpaces + 1];

    memset(UTF8Arr, ' ', nSpaces * sizeof(*UTF8Arr));
    UTF8Arr[nSpaces] = '\0';

    return [NSString stringWithUTF8String:UTF8Arr];
} 
```

您当前的代码不起作用的原因是因为`+stringWithCharacters:`需要一个长度为 12 个字符的数组，而您的数组的长度只有 1 个字符`{' '}`。因此，要修复，您必须为您的数组创建一个缓冲区（在这种情况下，我们使用`char`数组，而不是 a `unichar`，因为我们可以轻松地`memset`使用 char 数组，但不能使用`unichar`数组）。

我上面提供的方法可能是动态长度可能最快的方法。如果你愿意使用 GCC 扩展，并且你需要一个固定大小的空间数组，你可以这样做：

```
NSString *spacesWithLength7()
{
    unichar characters[] = { [0 ... 7] = ' ' };
    return [NSString stringWithCharacters:characters length:7];
} 
```

不幸的是，该扩展不适用于变量，因此它必须是一个常量。

通过 GCC 扩展和预处理器宏的魔力，我给你.... REPEATENATOR！只需传入一个字符串（或一个字符），剩下的就交给它了！现在购买，仅需$19.95，运营商待命！（基于@JeremyL 提出的想法）

```
// step 1: determine if char is a char or string, or NSString.
// step 2: repeat that char or string
// step 3: return that as a NSString
#define repeat(inp, cnt) __rep_func__(@encode(typeof(inp)), inp, cnt) 

// arg list: (int siz, int / char *input, int n)
static inline NSString *__rep_func__(char *typ, ...)
{
    const char *str = NULL;
    int n;

    {
        va_list args;
        va_start(args, typ);

        if (typ[0] == 'i')
            str = (const char []) { va_arg(args, int), '\0' };
        else if (typ[0] == '@')
            str = [va_arg(args, id) UTF8String];
        else
            str = va_arg(args, const char *);

        n = va_arg(args, int);

        va_end(args);
    }

    int len = strlen(str);
    char outbuf[(len * n) + 1];

    // now copy the content
    for (int i = 0; i < n; i++) {
        for (int j = 0; j < len; j++) {
            outbuf[(i * len) + j] = str[j];
        }
    }

    outbuf[(len * n)] = '\0';
    return [NSString stringWithUTF8String:outbuf];
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-22T13:28:52.863

该`stringWithCharaters:length:`方法使用 C 数组中的第一个长度字符创建一个`NSString`（或 的子类的实例）。`NSString`在达到长度之前，它不会遍历给定的字符数组。

您看到的输出是从您传递的 1 个 Unicode 字符数组的位置开始的 12 个 Unicode 字符长的内存区域。

这应该有效。

```
NSLog(@"hello%@world", [NSString stringWithCharacters:"            " length:12]); 
```

# java - 有没有一种通用的方法可以在jsp中下载所有类型的文件？

> ID：10702683
> 
> 赞同：0
> 
> 时间：2012-05-22T13:09:26.543
> 
> 标签：java, html, jsp, jakarta-ee

我想根据用户选择下载office文件、pdf文件、图像文件、zip文件、dll文件、exe文件。所以，我想从jsp页面下载这些文件类型。

这是jsp代码片段：

```
<% 
String filename = "Sample1.docx"; 
String filepath = "e:\\temp\\"; 
response.setContentType("APPLICATION/OCTET-STREAM"); 
response.setHeader("Content-Disposition","attachment; filename=\"" + filename + "\""); 

java.io.FileInputStream fileInputStream = new java.io.FileInputStream(filepath + filename);

int i; 
while ((i=fileInputStream.read()) != -1) {
    out.write(i); 
} 
fileInputStream.close();
%> 
```

但是在下载办公文件、图像文件时会出现一些错误。当我打开下载的文件时，它会显示“文件可能已损坏”。

有没有什么通用的方法可以在jsp中下载所有类型的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:41:22.427

您的问题是`out`JSP 中的变量是[JspWriter](http://docs.oracle.com/javaee/1.4/api/javax/servlet/jsp/JspWriter.html)，它是一个字符流，因此您的二进制文件会被更改。直接为这个特定目的使用 servlet 会好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:47:18.097

好的，从不同的浏览器下载文件时存在一些问题。我的示例关注 MSIE 和 Mozilla 类型的浏览器所需的处理

```
public HttpServletResponse getFile (HttpServletRequest request ,HttpServletResponse httpServletResponse, .......){
          HttpServletResponse response = httpServletResponse;
          InputStream in =/*HERE YOU READ YOUR FILE AS BinaryStream*/

          String filename = "";
          String agent = request.getHeader("USER-AGENT");
          if (agent != null && agent.indexOf("MSIE") != -1)
          {
            filename = URLEncoder.encode(/*THIS IS THE FILENAME SHOWN TO THE USER*/, "UTF8");
            response.setContentType("application/x-download");
            response.setHeader("Content-Disposition","attachment;filename=" + filename);
          }
          else if ( agent != null && agent.indexOf("Mozilla") != -1)
          {
            response.setCharacterEncoding("UTF-8");
            filename = MimeUtility.encodeText(/*THIS IS THE FILENAME SHOWN TO THE USER*/, "UTF8", "B");
            response.setContentType("application/force-download");
            response.addHeader("Content-Disposition", "attachment; filename=\"" + filename + "\"");
          }

          BufferedOutputStream out = new BufferedOutputStream(response.getOutputStream());
          byte by[] = new byte[32768];
          int index = in.read(by, 0, 32768);
          while (index != -1) {
              out.write(by, 0, index);
              index = in.read(by, 0, 32768);
          }
          out.flush();

          return response;
} 
```

看一下这个

**更新**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T06:29:09.420

问题在于 JSP 的“Out.write”，它不能写入字节流......

用servlet替换了jsp文件...

代码片段是：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    try {
        String filename = (String) request.getAttribute("fileName");
        response.setContentType("application/octet-stream");
        response.setHeader("Content-Disposition",
                "attachment;filename="+filename);

        File file = new File(filename);
        FileInputStream fileIn = new FileInputStream(file);
        ServletOutputStream out = response.getOutputStream();

        byte[] outputByte = new byte[(int)file.length()];
        //copy binary contect to output stream
        while(fileIn.read(outputByte, 0, (int)file.length()) != -1)
        {
        out.write(outputByte, 0, (int)file.length());
        }
     } 
```

现在你可以下载所有类型的文件......

# php - 在php中动态读取嵌套数组

> ID：10702691
> 
> 赞同：1
> 
> 时间：2012-05-22T13:09:42.607
> 
> 标签：php, arrays

我需要在不知道数组外观的情况下读取嵌套数组。

例如;

```
$data = array(
        'Data1_lvl1' => array(
                            'Data1_lvl2' => "value",
                            'Data2_lvl2' => array(
                                                'Data1_lvl3' => "value"
                                            )
                        ),
        'Data2_lvl1' => 'value'
    ); 
```

需要格式化为字符串，如：

1.  数据1_lvl1/数据1_lvl2/
2.  数据1_lvl1/数据2_lvl2/数据1_lvl3/
3.  数据2_lvl1/

但是数组可以是任意大小，其中包含任意数量的嵌套数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:19:30.763

如果您只想输出数组元素的名称，那么这个递归函数就可以了。

**您的数据：**

```
$data = array(
        'Data1_lvl1' => array(
                            'Data1_lvl2' => "value",
                            'Data2_lvl2' => array(
                                                'Data1_lvl3' => "value"
                                            )
                        ),
        'Data2_lvl1' => 'value'
    ); 
```

**功能：**

```
function array2str($array, $str) {
  foreach($array as $key => $val) {
    if (is_array($val) ) {
        $str .= $key . '/';
        array2str($val, $str);
    }
  }
  echo $str.'<br />';  
  return $str;
}

array2str($data); 
```

如您所见，脚本本身会执行 ECHO 以`<br />`在浏览器中查看结果时换行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T13:20:48.003

```
$data = array(
        'Data1_lvl1' => array(
                            'Data1_lvl2' => "value",
                            'Data2_lvl2' => array(
                                                'Data1_lvl3' => "value"
                                            )
                        ),
        'Data2_lvl1' => 'value'
    );

function printArray($array)
{
    foreach ($array as $key=>$value)
    {
       echo $key.'/';
       if (is_array($value))
       {
          printArray($value);           
       } else {    
        echo '<br>';
        }

    }

}

printArray($data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T13:19:07.610

一种方法是递归遍历具有类似功能的数组：

```
<?php
function f($d, $str = '') {
        foreach ($d as $key => $val) {
                if (is_array($val)) f($val, $str . '/' . $key); // If this element is array parse next level
                else print_r($str . '/' . $key . '/'); // Output current string or do what you need to do with it..
        }
}

$data = array(
        'Data1_lvl1' => array(
                            'Data1_lvl2' => "value",
                            'Data2_lvl2' => array(
                                                'Data1_lvl3' => "value"
                                            )
                        ),
        'Data2_lvl1' => 'value'
);

f($data); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T13:32:12.283

使用该功能：

```
<?php
function print_tree ($data, $prefix = '', &$index = 1) {
  foreach($data as $key => $datum) {
    echo $index++ . '. ' . ($new_prefix =  $prefix . $key . '/') . PHP_EOL;
    if (is_array($datum)) {
      print_tree ($datum, $new_prefix, $index);
    }
  }
} 
```

我明白了

> 1.  数据1_lvl1/
> 2.  数据1_lvl1/数据1_lvl2/
> 3.  数据1_lvl1/数据2_lvl2/
> 4.  数据1_lvl1/数据2_lvl2/数据1_lvl3/
> 5.  数据2_lvl1/

# java - 创建一个 Spring 枚举 bean 并传递方法调用的值

> ID：10702693
> 
> 赞同：17
> 
> 时间：2012-05-22T13:09:45.223
> 
> 标签：java, spring, enums

我有这个单身人士：

```
 public enum Elvis {
       INSTANCE;
       private int age;

       public int getAge() {
           return age;
       }
   } 
```

我知道如何在春天创建枚举 bean：

```
 <bean id="elvis" class="com.xyz.Elvis" factory-method="valueOf">
           <constructor-arg>
               <value>INSTANCE</value>
           </constructor-arg>
   </bean> 
```

如何将 INSTANCE.getAge() 返回的 int 传递给另一个 beans 构造函数？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-22T13:12:54.040

您可以使用[Spring 表达式语言](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/expressions.html)：

```
<constructor-arg value = "#{elvis.age}" /> 
```

或没有`elvis`豆：

```
<constructor-arg value = "#{T(com.xyz.Elvis).INSTANCE.age}" /> 
```

# android - Android - 项目拇指的智能加载器

> ID：10702695
> 
> 赞同：0
> 
> 时间：2012-05-22T13:10:01.970
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

在 GridView 中，我应该显示几个图像。所有图片都是从网上下载的。所有这些功能都已经完成并且就像一个魅力，但在某些时候你意识到这不是最好的实现。

考虑 GridView 有数百个图像。在这种情况下，我只想下载那些对用户可见或适合屏幕可见区域的图像。
如果我向下滚动图库，我想取消（如果有的话）之前开始的下载，并开始下载用户可见的图像。

你能给我一些提示，我将如何去实现它？

或者建议一些图书馆。现在我正在看 Ignition，但它似乎一次加载了所有画廊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:38:11.100

如果我理解正确，您描述的是延迟加载。有一个[关于这个](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview "关于这个的问题")的问题有很好的答案。在一个简单的案例中，我使用了 Fedor 的库，效果很好。NOSTRA 提供了一个更复杂的解决方案。

据我所见，[UniversalImageLoader](https://github.com/nostra13/Android-Universal-Image-Loader "这里")完全符合您的要求。它可以[在](https://github.com/nostra13/Android-Universal-Image-Loader "这里")github 上找到。

# ios - ios屏幕导航教程

> ID：10702698
> 
> 赞同：0
> 
> 时间：2012-05-22T13:10:09.477
> 
> 标签：ios

有谁知道任何关于 ios 应用程序屏幕之间导航的好教程。我找到了一些，但由于我在这个领域很新，所以对我来说还不够清楚。我正在一步一步地寻找一些从基础开始解释它的屏幕转储。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:27:39.713

这是一个很模糊的问题。如果你现在开始 iOS 开发，我假设你想知道故事板是如何工作的。

看看[这个](http://www.youtube.com/watch?v=UdQfR4nsXvI)视频。我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:27:09.103

试试斯坦福的讲座。

第6讲是关于segue和navigation :)

[http://itunes.apple.com/us/itunes-u/ipad-iphone-application-development/id473757255](http://itunes.apple.com/us/itunes-u/ipad-iphone-application-development/id473757255)

# ios - ios将音频添加到按钮

> ID：10702703
> 
> 赞同：1
> 
> 时间：2012-05-22T13:10:22.190
> 
> 标签：ios, audio

嗨，有谁知道如何向按钮添加音频我已经添加了框架创建了一个放置声音的动作，但是当我按下按钮时没有声音播放？

这是我到目前为止所做的

```
-(void)buttonSound{

    NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/ButtonSound.mp3", [[NSBundle mainBundle] resourcePath]]];

    NSError *error;
    audioPlayer2 = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    audioPlayer2.numberOfLoops = -1;

    [audioPlayer2 play];

}

- (IBAction)backToMenu:(id)sender {
    [self buttonSound];
    [self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:14:52.110

对于简短的系统声音，您应该使用以下内容：

```
SystemSoundID sound;
CFURLRef alertURL = CFBundleCopyResourceURL(CFBundleGetMainBundle(), (CFStringRef)@"ButtonSound", CFSTR("mp3"), NULL);
OSStatus status = AudioServicesCreateSystemSoundID(alertURL, &sound);

AudioServicesPlayAlertSound(sound); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:13:40.943

通过立即弹出导航控制器释放您的音频播放器。

如果删除此行：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

您应该能够听到音频文件（如果路径正确）。

# r - 如何将不同的聚合函数应用于 R 中的不同列？

> ID：10702708
> 
> 赞同：1
> 
> 时间：2012-05-22T13:10:38.353
> 
> 标签：r, plyr, data.table

如何将不同的聚合函数应用于 R 中的不同列？该`aggregate()`函数仅提供一个要传递的函数参数：

```
V1  V2        V3
1   18.45022  62.24411694
2   90.34637  20.86505214
1   50.77358  27.30074987
2   52.95872  30.26189013
1   61.36935  26.90993530
2   49.31730  70.60387016
1   43.64142  87.64433517
2   36.19730  83.47232907
1   91.51753  0.03056485
... ...       ...

> aggregate(sample,by=sample["V1"],FUN=sum)
  V1 V1       V2       V3
1  1 10 578.5299 489.5307
2  2 20 575.2294 527.2222 
```

如何对每一列应用*不同*的函数，即`V2`与`mean()`函数和`V2`函数聚合，而无需多次`sum()`调用？`aggregate()`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T13:23:26.883

对于该任务，我将`ddply`使用`plyr`

```
> library(plyr)
> ddply(sample, .(V1), summarize, V2 = sum(V2), V3 = mean(V3))
  V1       V2       V3
1  1 578.5299 48.95307
2  2 575.2294 52.72222 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T13:40:22.663

...或者`data.table`同名包中的函数：

```
library(data.table)

myDT <- data.table(sample) # As mdsumner suggested, this is not a great name

myDT[, list(sumV2 = sum(V2), meanV3 = mean(V3)), by = V1]

#      V1    sumV2   meanV3
# [1,]  1 578.5299 48.95307
# [2,]  2 575.2294 52.72222 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T13:24:31.383

让我们调用数据框`x`而不是`sample`已经使用的数据框。

编辑：

该`by`功能提供了比拆分/应用/组合更直接的路线

```
by(x, list(x$V1), f) 
```

：编辑

```
lapply(split(x, x$V1), myfunkyfunctionthatdoesadifferentthingforeachcolumn) 
```

当然，这不是每列的单独功能，但可以同时完成这两项工作。

```
myfunkyfunctionthatdoesadifferentthingforeachcolumn = function(x) c(sum(x$V2), mean(x$V3)) 
```

整理结果的方便方法是可能的（但请查看 plyr 包以获得全面的解决方案，考虑这种动机以更好地学习一些东西）。

```
 matrix(unlist(lapply(split(x, x$V1), myfunkyfunctionthatdoesadifferentthingforeachcolumn)), ncol = 2, byrow = TRUE, dimnames = list(unique(x$V1), c("sum", "mean"))) 
```

# java - 使用 AsyncTask 将资产复制到 SD 卡会引发 IOException，但会创建一个 0 字节文件

> ID：10702714
> 
> 赞同：0
> 
> 时间：2012-05-22T13:10:50.503
> 
> 标签：java, android, android-asynctask, ioexception, android-assets

我正在使用以下代码片段将资产目录中的项目复制到 SD 卡。

```
String DATA_PATH = Environment.getExternalStorageDirectory().toString() + "/MyApp/";
        String lang = "eng";
        String[] paths = new String[]
                {DATA_PATH, DATA_PATH + "mydata/"};

        for (String path : paths)
        {
            File dir = new File(path);
            if (!dir.exists())
            {
                if (!dir.mkdirs())
                {
                    Log.d(TAG, "ERROR: Creation of directory " + path + " on sdcard failed");
                   // return null;
                }
                else
                {
                    Log.d(TAG, "Created Directory " + path + " on sd card");
                }
            }
            Log.d(TAG, "Path " + path + "already exists, not creating");
        }

        if (!(new File(DATA_PATH + "mydata/" + lang + ".dat")).exists())
        {
            try
            {
                Log.d(TAG, "Couldn't find any dat files on SD card, attempting to copy new ones");
                AssetManager assetManager = getAssets();

                String[] filesList = assetManager.list("");
                StringBuilder sb = new StringBuilder();
                for (String s : filesList)
                {
                    Log.d(TAG, "Found file : " + s);
                    if (s.contains("dat"))
                    {
                        try
                        {
                            Log.d(TAG, "Found a dat file, attempting to copy to SD card");
                            InputStream in = assetManager.open("eng.dat");
                            Log.d(TAG, "Opened an inputStream to eng.dat");
                            // GZIPInputStream gin = new GZIPInputStream(in);
                            OutputStream out = new FileOutputStream(DATA_PATH + "mydata/eng.dat");
                            Log.d(TAG, "Opened an outputStream to " + DATA_PATH + "mydata/eng.dat");

                            // Transfer bytes from in to out
                            byte[] buf = new byte[1024];
                            int len;
                            // while ((lenf = gin.read(buff)) > 0) {
                            while ((len = in.read(buf)) != -1)
                            {
                                out.write(buf, 0, len);
                            }
                            in.close();
                            // gin.close();
                            out.close();

                            Log.d(TAG, "Copied " + lang + " .dat");

                        }
                        catch (IOException ioe)
                        {
                            Log.e(TAG, "Was unable to copy " + s + " " + ioe);
                        }
                    }
                    Log.d(TAG, "File : " + s + " is not something we're interested in, not copying to SD card.");
                }
            }
            catch (IOException e)
            {
                Log.e(TAG, "Was unable to copy assets " + e.toString());
            }
        } 
```

我的清单文件中也有这一行：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

我的 logcat 的输出是：

```
05-22 13:57:57.289: D/SEARCH(14609): Path /mnt/sdcard/MyApp/already exists, not creating
05-22 13:57:57.289: D/SEARCH(14609): Path /mnt/sdcard/MyApp/mydata/already exists, not creating
05-22 13:57:57.289: D/SEARCH(14609): Couldn't find any traindeddata files on SD card, attempting to copy new ones
05-22 13:57:57.449: D/SEARCH(14609): Found file : badges
05-22 13:57:57.449: D/SEARCH(14609): File : badges is not something we're interested in, not copying to SD card.
05-22 13:57:57.449: D/SEARCH(14609): Found file : eng.dat
05-22 13:57:57.449: D/SEARCH(14609): Found a dat file, attempting to copy to SD card
05-22 13:57:57.449: D/SEARCH(14609): Opened an inputStream to eng.dat
05-22 13:57:57.469: D/SEARCH(14609): Opened an outputStream to /mnt/sdcard/MyApp/mydata/eng.dat
05-22 13:57:57.469: E/SEARCH(14609): Was unable to copy eng.dat java.io.IOException
05-22 13:57:57.469: D/SEARCH(14609): File : eng.dat is not something we're interested in, not copying to SD card.
05-22 13:57:57.469: D/SEARCH(14609): Found file : images
05-22 13:57:57.469: D/SEARCH(14609): File : images is not something we're interested in, not copying to SD card.
05-22 13:57:57.469: D/SEARCH(14609): Found file : sounds
05-22 13:57:57.469: D/SEARCH(14609): File : sounds is not something we're interested in, not copying to SD card.
05-22 13:57:57.469: D/SEARCH(14609): Found file : webkit
05-22 13:57:57.469: D/SEARCH(14609): File : webkit is not something we're interested in, not copying to SD card. 
```

好像在 SD 卡上创建文件成功，但总是 0 字节。我的卡上有大约 700MB 的可用空间，而我的 dat 文件只有 3MB，所以没有容量问题。

我正在使用 API 级别 8。

任何人都可以就可能导致 IOException 的原因提出建议吗？

谢谢

**编辑**：这是堆栈跟踪（感谢 Narek 的提醒）

```
05-22 14:28:37.043: E/INITIALISATION(22774): java.io.IOException
05-22 14:28:37.043: E/INITIALISATION(22774):    at android.content.res.AssetManager.readAsset(Native Method)
05-22 14:28:37.043: E/INITIALISATION(22774):    at android.content.res.AssetManager.access$700(AssetManager.java:36)
05-22 14:28:37.043: E/INITIALISATION(22774):    at android.content.res.AssetManager$AssetInputStream.read(AssetManager.java:571)
05-22 14:28:37.043: E/INITIALISATION(22774):    at com.example.myapp.task.InitialisationTask.doInBackground(InitialisationTask.java:86)
05-22 14:28:37.043: E/INITIALISATION(22774):    at com.example.myapp.task.InitialisationTask.doInBackground(InitialisationTask.java:19)
05-22 14:28:37.043: E/INITIALISATION(22774):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
05-22 14:28:37.043: E/INITIALISATION(22774):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
05-22 14:28:37.043: E/INITIALISATION(22774):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
05-22 14:28:37.043: E/INITIALISATION(22774):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
05-22 14:28:37.043: E/INITIALISATION(22774):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
05-22 14:28:37.043: E/INITIALISATION(22774):    at java.lang.Thread.run(Thread.java:1096) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:07:15.183

James.Elsey！我读了你的代码，我认为你的问题在这个地方的红圈图中：

```
byte[] buf = new byte[1024]; 
int len; 
// while ((lenf = gin.read(buff)) > 0) { 
while ((len = in.read(buf)) != -1) { 
    out.write(buf, 0, len); 
    out.flush();//Refresh the buffer output stream.This forced all buffer output byte iswrite to the bottom of the output stream. 
} 
in.close(); 
// gin.close(); 
out.close(); 
```

你可以尝试解决你的问题。我的英文不好，不知道是不是我把问题说清楚了。关于flush()方法更详细的解释可以去参考API文档。

# jquery - Jquery使用DIV标签从数组中移动项目

> ID：10702716
> 
> 赞同：-2
> 
> 时间：2012-05-22T13:10:58.240
> 
> 标签：jquery, svg, jquery-animate

您好我正在尝试调用数组中的图像以使用 JQuery 函数移动。

我添加了一个标签来标识每个 id 为 Predator 的 div。单击“播放”按钮时，我正在调用它们并移动它们。

不幸的是它没有。任何人都可以帮助发现错误吗？

```
<HTML>
    <HEAD>  
        <script src="code.jquery.com/jquery-1.7.2.js"></script>
        <SCRIPT language="javascript">

           //************** Array ***********************

            var Predatorlist = [];
            //uniqueid = "anchovies" + document.getElementById('amount').value;

            function addvalue()
            {
                Predatorlist.push(uniqueid)
                alert(Predatorlist);
            }

            function removevalue()
            {
                Predatorlist.pop(uniqueid)
                alert(x.innerHTML=Predatorlist);
            }

          //************** Array *********************** 

            var div = $("div");

            function runIt() {
                div.show("slow");
                div.animate({left:'+=200'},2000);
                div.slideToggle(1000);
                div.slideToggle("fast");
                div.animate({left:'-=200'},1500);
                div.hide("slow");
                div.show(1200);
                div.slideUp("normal", runIt);
            }

            function Add() {
                var id = Math.floor(Math.random()*101+1);
                x = Math.random() * 550;
                y = Math.random() * 250;
                if (document.getElementById('amount').value < 50){
                    document.getElementById('amount').value++;
                    svg = document.getElementById("main");

                    // construct uniqueid for the images
                    uniqueid = "<div id='Predator'>" + "frog" + document.getElementById('amount').value + "</div>";

                    //namespaces for SVG
                    svgNS="http://www.w3.org/2000/svg";
                    xlinkNS="http://www.w3.org/1999/xlink";

                    // create a image element
                    image = document.createElementNS(svgNS, 'image');

                    // set id and other attributes
                    image.setAttributeNS(null, "id", uniqueid);
                    image.setAttributeNS(xlinkNS, "href","jef-frog.gif");
                    image.setAttributeNS(null, "x", x);
                    image.setAttributeNS(null, "y", y);
                    image.setAttributeNS(null, "width", "50");
                    image.setAttributeNS(null, "height", "50");

                    // append to svg
                    svg.appendChild(image);

                } else {
                    alert("we got 50");
                }
            }

            function Remove() {

                if(document.getElementById('amount').value > 0)
                {         
                    document.getElementById('amount').value--;
                    svg = document.getElementById("main");
                    svg.removeChild(svg.lastChild);
                }
            }

            function numinput(e){
                // get the input value if enter
                key=e.keyCode || e.which;
                if (key==13){

                    total = document.getElementById("amount").value;
                    dummy = total;
                    // clear svg with image to avoid clearing the canvas
                    svg = document.getElementById("main");
                    element = svg.getElementsByTagName("image");
                    while(element.length>0){
                        element = svg.getElementsByTagName("image");
                        element[0].parentNode.removeChild(element[0]);
                    }

                    // use the input to create the number of frog.
                    while (dummy>0)
                    {
                        Add();
                        dummy--;
                    }
                    document.getElementById("amount").value = total;
                }

            }

            /*function numeralsOnly(evt) {
             evt = (evt) ? evt : event;
             var charCode = (evt.charCode) ? evt.charCode : ((evt.keyCode) ? evt.keyCode : 
             ((evt.which) ? evt.which : 0));
             if (charCode > 31 && (charCode < 48 || charCode > 57)) {
             return false;
             }
             return true;
             }
             */
            </SCRIPT>
    </HEAD>
    <BODY>
        <div>
            <SVG xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" id="main" style="border:inset 1px #000000;width:600;height:300"><param name='wmode' value='transparent'/></SVG>
        </div>
        <H2>TESTING</H2>
        PREY<BR/>
        <img src="jef-frog.gif" alt="frogsonice.com" width="100" height="100"/><BR/>

        <INPUT type="button" value="+" onClick="Add(); addvalue();"> 

            <!-- disabled the textfield -->
            <input type="text" id="amount" value=0  maxlength="3" size="1"  onkeypress="numinput(evt)">
                <INPUT type="button" value="-" onClick="Remove(); removevalue();">
                <INPUT type="button" value="Play" onClick="runIt();">
    </BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:29:51.007

您提到了“ID Predator 的每个 div”。根据定义，ID 为食肉动物的元素只能有一个。您应该考虑使用类。

使用类选择所有元素的最简单方法是使用 JQuery 并简单地使用以下代码段。从那里您可以使用“Predator”类对元素进行操作。

```
$('.Predator') 
```

# php - include() 还是调用函数更好？

> ID：10702717
> 
> 赞同：2
> 
> 时间：2012-05-22T13:11:00.750
> 
> 标签：php, html

我目前正在用 HTML 和 PHP 开发一个 Web 平台应用程序。我必须开发一个注册/登录系统，我在问自己一个问题。

我写了一个登录表单，我想知道将其存储在 php 函数中（使用简单的 echo("all my login form")）还是将其存储在 .html 文件中更好。显然，调用或相关的 include() 将写在 if($_session()) 语句中。

我只是在询问我应该遵循的正确和逻辑架构方面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:12:05.200

您应该放入一个 .html 文件，最好将应用程序逻辑和表示代码分开。

另外，考虑使用[模板引擎](https://www.google.com/search?q=php%20template%20engine&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aunofficial&client=firefox-nightly&channel=fflb)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:14:02.900

恕我直言，无论语言如何，`include`除了将变量和函数导入当前范围之外，永远不应该有副作用。

因此，如果您确实使用 an `include`，它应该包含一个*在调用时*产生输出的函数。单纯的调用行为`include`不应产生任何输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T13:16:37.300

每次调用时，include 都会“包含”新代码。正常的方法是在 php 文件中定义一个函数并要求它，然后再通过 require_once 在任何地方使用它，因此您只需加载函数定义一次，并且可以在任何地方使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T13:51:59.993

因为您正在设计一些严肃的东西，所以我建议您使用**include**而不是函数。为什么？

*   html 与 php 的东西是分开的
*   Web 编辑器中更干净、突出显示的 html 文件
*   你一劳永逸地避免所有那些双引号/转义等
*   您为设计师提供了一种随意更改文件的方法；设计师不会接触 PHP。
*   更容易更新文件；思考模板
*   如果您坚持，include() 仍然可以进入函数:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T13:22:10.603

在大多数情况下最好包含，但这取决于你调用的文件有多大

每次你甚至不喜欢时，一次又一次地调用函数。

好吧，在一种情况下，如果函数很短并且没有在其他页面上调用，您可以调用它

但是如果你想在任何地方实现一个逻辑，比如检查登录，注销然后包含是要走的路。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T13:28:58.830

最好在您的注册系统中使用 include()，您可以通过调用它来获取一个函数，而不必在任何其他页面创建它。只需包含它，所有工作就完成了。这种方法减少了冗余问题并使您的代码简短而简单。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-22T16:38:11.260

我使用 include() 但倾向于将文件命名为 blah.template.php 而不是 .html。

然后，在模板中，我可以使用简单的循环、变量替换和简单的 if-else 语句。

如果项目更大，我会使用一个最小的模板类来包装对 include() 的调用。除其他外，此类使用 ob_start() 和 ob_get_clean() 包装调用（我认为这些是调用）并允许将模板的输出作为字符串获取。

此外，对于 HTML 代码的重复位，我认为使用返回 HTML 代码的“图片函数”是合法的。图片函数允许您参数化代码并添加一些逻辑。

# ssl - 是否可以在 SSL 网站上使用 Mapstraction

> ID：10702718
> 
> 赞同：1
> 
> 时间：2012-05-22T13:11:02.277
> 
> 标签：ssl, geolocation, openlayers, leaflet, mapstraction

我进行了很多搜索，但似乎您无法在 SSL 网站上使用 Mapstraction。有没有人能够做到这一点，或者 Leaflet/OpenLayers 是使用 SSL tile 提供程序的最佳选择。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:54:28.797

Mapstraction 不是您自己使用的库，它是您与 Google、Yahoo、OpenLayers 等实际提供商之一一起使用的抽象层。Mapstraction 没有 SSL 问题，任何受支持的也没有据我所知的供应商。您只需要确保在脚本标签中指定 https。

# javascript - HTML / Javascript 等待图形被绘制

> ID：10702719
> 
> 赞同：0
> 
> 时间：2012-05-22T13:11:02.747
> 
> 标签：javascript, html, browser, graphics, onload

我听说过`onload`元素完全加载后调用的函数。对于图形或图像，这是否意味着它将等到图像显示在浏览器中？

```
<body onload="foo()">...
     <img onload="bar();".... 
```

如果没有，有没有办法在绘制所有图形并在页面上显示图像时获取事件？

就我而言，它只有一张 1600*1200 的 jpeg 图像，我在上面画画。但是在我开始绘制之前必须显示图像，即使使用 onload 事件我也会在图像出现之前看到绘制的线条。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:15:59.093

Yes`body onload`将等到所有图像（和其他内容）都加载/显示在浏览器中。将`img onload`等到该特定图像已加载/显示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:20:07.893

图像具有`complete`加载时为真的属性。

例如将测试是否所有内容都已加载：

```
var allImagesLoaded = true;
$("IMG").each(function(){ allImagesLoaded &= $(this).attr("complete"); });
if(allImagesLoaded){ alert("Done!");} 
```

`load`图像加载完成后引发事件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T13:20:16.207

为什么不为您的图像保留一个计数器，该计数器将在每次图像加载时减一。检查它是否等于 0，然后调用另一个函数。通过这种方式，您可以在加载所有图像时做您想做的事情

```
$(function() {
    $('img').one('load',function() {
        // fire when image loads decrement the counter
        if counter ==0
        fireanotherfunction()

    });
}); 
```

通过上面的代码你可以达到你的目的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T13:24:50.790

[在此处](http://api.jquery.com/ready/ "这里")阅读 jQuery 就绪 API 文档时：

> 虽然 JavaScript 提供了在页面呈现时执行代码的加载事件，但在完全接收到所有资产（例如图像）之前，不会触发此事件。

在所有`onload`内容都已加载（并显示）后启动。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T13:27:29.727

查看[`window.load`](https://developer.mozilla.org/en/DOM/window.onload)事件：

> load 事件在文档加载过程结束时触发。至此，文档中的所有对象都在 DOM 中，**所有图片和子帧都加载完毕。**

这正是你想要的，我相信。

JQuery[`$(document).ready`](http://api.jquery.com/ready/)不是**你**想要的：

> 在代码依赖于加载的资源的情况下（例如，如果需要图像的尺寸），代码应该放在事件的处理程序中`load`[而不是`ready`事件]。

*   如果您使用的是纯 JS，`window.load`那就是您想要的。
*   如果你使用 jQuery，你会想要`$(document).load`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T13:18:52.383

尝试jquery准备功能

$(文档).ready(函数(){

酒吧（）; });

我不确定它是否有效，但这是一个尝试：D

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-08T12:32:57.343

我在为 Android 应用程序开发 Web 视图时遇到了同样的问题。*加载*事件（窗口和图像元素）以及图像元素的完整*状态*触发得太早。我的（svg）图像尚未完成绘制，因此尺寸计算出错。

我发现的唯一解决方法是一个非常短的计时器（1 毫秒或 10 毫秒）。这对我有用，因为我只有一个这样的图像要考虑。而且由于我在图像数据已经加载时启动了这个计时器，所以这个短暂的间隔应该足够长，让设备可以绘制图像。

```
window.addEventListener('load', function() {
    var img = document.getElementById('logo');

    window.setTimeout(function(){
        var imgRatio = img.naturalWidth / img.naturalHeight;
        var renderedWidth = parseInt(window.getComputedStyle(img).width.match(/(\d+)px/));
        console.log(renderedWidth, img.complete);
        if (renderedWidth < img.naturalWidth) {
            img.style.height = (renderedWidth / imgRatio) + 'px';
        }
    }, 1);
} 
```

除了窗口加载事件，图像的加载事件也应该起作用。但我发现等待一切更安全，因为其他元素可能会影响我的图像绘制。

# c - 被调用对象不是函数或函数指针

> ID：10702723
> 
> 赞同：3
> 
> 时间：2012-05-22T13:11:29.903
> 
> 标签：c, linux, gcc, x86-64, glibc

我有以下代码。

```
typedef pid_t (*getpidType)(void);

pid_t getpid(void)
{
    printf("Hello, getpid!\n");
    getpidType* f = (getpidType*)dlsym(RTLD_NEXT, "getpid");
    return f(); // <-- Problem here
} 
```

编译器抱怨`called object ‘f’ is not a function`. 这里发生了什么？我没有以正确的方式声明和使用函数指针**f吗？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T13:14:35.853

`getpidType`已经是一个指针，所以删除`*`：

```
getpidType f = (getpidType)dlsym(RTLD_NEXT, "getpid"); 
```

（更好的是，也删除显式强制转换：

```
getpidType f = dlsym(RTLD_NEXT, "getpid"); 
```

由于`dlsym`返回`void*`并且`void*`可以隐式转换为任何其他指针类型，因此不需要强制转换。它甚至可能隐藏错误。）

# php - 从 CSV 获取每一行数据，然后在变量中获取它们的数据单元格

> ID：10702728
> 
> 赞同：3
> 
> 时间：2012-05-22T13:11:55.543
> 
> 标签：php, excel, csv

我的 CSV 有类似的表格 ![](../Images/b4c079aba63f42312346f78f7aa12b74.png)

现在，我想做的是，对于每条记录，我想获取相应的单元格数据并将它们放入变量中。（然后我需要使用变量执行一些任务）。

例如（对于每一行，它们在变量中的值）

```
$id = 1;
$name = 'Test'; 
```

等等

数组可以用来做到这一点。

例如，$row_1 = ('1', 'Test', 'chicago', 'testuser', '21', '123456789')

我尝试搜索谷歌，但结果与我的查询无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-30T14:27:16.597

所以你可以在每一行上运行一个 for 循环，让它从每一行和每一个单元格中返回数据。

```
<?php
    $row = 1;
    if (($handle = fopen("data.csv", "r")) !== FALSE) {
        while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
            $num = count($data);
            echo "<p> $num fields in line $row: <br /></p>\n";
            $row++;
            for ($c=0; $c < $num; $c++) {
                echo $data[$c] . "<br />\n";
               // echo $data[1];
            }
        }
        fclose($handle);
    }
    ?> 
```

请记住将您的 csv 文件位置放在代码中

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:17:14.387

哦...以为是JavaScript ..

但我想我可以在 PHP 中尝试： http: [//codepad.org/8SBgTCYy](http://codepad.org/8SBgTCYy)

```
$labels = explode(",", "id,name,city,username,contact_id,phone");
$values = explode(",", "1,Test,chicage,testuser,21,123456789");

$i = 0;
$count = count($labels);
$object = array();
for ( ; $i < $count; $i++ ) {
    $object[$labels[$i]] = $values[$i];
}

var_dump($object); 
```

另一个：[http ://codepad.org/AmVp08QR](http://codepad.org/AmVp08QR)

```
$values = explode(",", "id,1,name,Test,city,chicago,username,testuser,contact_id,21,phone,123456789");

$i = 0;
$count = count($values);
$object = array();

for( ; $i < $count; $i++ ) {
    $object[$values[$i]] = $values[$i+1];
}

var_dump($object); 
```

~~像这样：~~

`id,name,city,username,contact_id,phone`

和

`1,Test,chicage,testuser,21,123456789`

```
var labels = "id,name,city,username,contact_id,phone".split(","),
    values = "1,Test,chicage,testuser,21,123456789".split(","),

    object = {},
    i = 0,
    len = labels.length;

for( ; i < len; i++) object[labels[i]] = values[i]; 
```

现在您将对象命名`object`为：

```
{
    id: "1",
    name: "Test",
    city: "chicago",
    username: "testuser",
    contact_id: "21",
    phone: "123456789"
} 
```

* * *

或像这样：

`id,1,name,Test,city,chicago,username,testuser,contact_id,21,phone,123456789`

```
var values = "id,1,name,Test,city,chicago,username,testuser,contact_id,21,phone,123456789".split(","),

    object = {},
    i = 0,
    len = values.length;

for ( ; i < len; i+=2 ) {
    object[values[i]] = values[i+1];
} 
```

~~然后你最终得到相同的对象。~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T13:26:27.893

看看 fgetcsv() 和家人......

此外，您的 CSV 文件最好符合 CSV 标准；我发现很多 CSV 文件是使用非标准约定生成的……这让互操作非常痛苦。

[http://www.php.net/manual/en/function.fgetcsv.php](http://www.php.net/manual/en/function.fgetcsv.php)

[http://www.php.net/manual/en/function.fputcsv.php](http://www.php.net/manual/en/function.fputcsv.php)

[http://www.php.net/manual/en/function.str-getcsv.php](http://www.php.net/manual/en/function.str-getcsv.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T13:27:33.743

[array_combine()](http://www.php.net/manual/en/function.array-combine.php)在这里可能会有所帮助：

```
$labels = explode(",", "id,name,city,username,contact_id,phone"); 
$values = explode(",", "1,Test,chicage,testuser,21,123456789"); 
//  Use fgetcsv() to read these from your file

$data = array_combine($labels,$values);

var_dump($data); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-27T02:44:05.423

我采用了自己的技术，每行用逗号分隔。

# python - 从列表中查找和排除多个匹配项的逻辑

> ID：10702738
> 
> 赞同：3
> 
> 时间：2012-05-22T13:12:12.160
> 
> 标签：python, logic

我需要将列表的内容与给定的模式匹配，并形成另一个列表，该列表将包含除匹配项之外的所有内容。意思是，我正在尝试制作一个排除列表。

现在有了一个模式匹配，这很容易。但对于更多的，它变得棘手。

让我们看一个例子：

```
Lmain=[arc123, arc234,xyz111,xyz222,ppp999,ppp888]

for count in range(len[Lmain]):

    if Pattern matches Lmain[i]:
              Pass
    else:result.append(Lmain[i]) 
```

现在让我们说 pattern = arc ，我的结果将是

```
result = [xyz111,xyz222,ppp999,ppp888] 
```

这只是一个逻辑，我将使用常规 expr 来查找匹配项。

现在，如果我们有 2 个模式，那么在循环中使用上述逻辑：

```
Pattern=['arc','xyz']

for pat in Pattern:
      if pat matches Lmain[i]:
          Pass
      else:result.append(Lmain[i]) 
```

这会给我们错误的结果

```
result = [xyz111,xyz222,ppp999,ppp888,arc123,arc234,ppp999,ppp888] 
```

所以，你可以看到上面的逻辑是行不通的。

我的计划：

首先，我们找到第一个 Pattern 的排除列表，它会给我们结果：

```
result = [xyz111,xyz222,ppp999,ppp888] 
```

对于第二种模式，我们需要查看上述结果。

```
if Pattern matches Result[i]:
      Pass
else:result_final.append(Result[i]) 
```

我认为我们需要使用递归来实现上述逻辑。现在我们该怎么做呢？我们也不知道用户要输入的模式数量。它可以是一个或多个。

任何人有任何逻辑想法，然后请分享。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T13:18:52.340

使用列表推导和生成器表达式，跳过构建排除列表的中间步骤，只构建最终列表：

```
>>> import re
>>> Lmain=['arc123', 'arc234', 'xyz111', 'xyz222','ppp999','ppp888']
>>> Pattern=['arc','xyz']
>>> [x for x in Lmain if not any(re.search(y, x) for y in Pattern)]
['ppp999', 'ppp888'] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T13:17:25.427

```
for item in lst:
    if all(pat not in item for pat in patterns):
        exclude_list.append(item) 
```

替换`in`为更适合您的情况（例如`item.startswith(pat)`）

如果匹配的比不匹配的多，那么首先找到匹配然后排除它们应该更有效：

```
matches = [x for x in lst if any(x.startswith(p) for p in patterns)]
exclude_list = list(set(lst).difference(matches)) 
```

另一个（可能是最快的）选项是使用正则表达式（这里与 结合`filter`）：

```
import re
expr = '^(?!%s)' % '|'.join(patterns)
exclude_list = filter(re.compile(expr).search, lst) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T13:16:32.843

```
matched = False
for pat in Pattern:
    if pat patches Lmain[i]:
        matched = True
        break;
if matched:
    Pass
else:
    result.append(Lmain[i]) 
```

# fdt - 如何下载 FDT 5.0 或 FDT 4.5 的旧版（旧版）？

> ID：10702748
> 
> 赞同：2
> 
> 时间：2012-05-22T13:12:51.157
> 
> 标签：fdt, legacy-app

我正在寻找 FDT 下载的旧版本。我在哪里可以找到它们？我依赖于这些早期版本之一中存在的特定工作流程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T13:12:51.843

可以通过 FDT 网站上的常见问题解答找到 FDT 的旧版本：

[如何下载 FDT 5.6？（独立）](http://fdt.powerflasher.com/docs/FAQ#How_do_I_Download_FDT_5.5.3F_.28Standalone.29)

[如何下载 FDT 5.0？（独立）](http://fdt.powerflasher.com/docs/FAQ#How_do_I_Download_FDT_5.3F_.28Standalone.29)

[如何下载 FDT 4？（独立）](http://fdt.powerflasher.com/docs/FAQ#How_do_I_Download_FDT_4.3F_.28Standalone.29)

FDT 4 和 5 的版本包括：

*   视窗 32 位
*   视窗 64 位
*   OSX 32 位
*   OSX 64 位
*   Linux 32 位
*   Linux 64 位

FDT 3.5（基于 Galileo，兼容 Ganymede）

[FDT 3.5 Windows 32 位](http://fdt.powerflasher.com/update/installer/FDTEnterpriseWindows.exe)

[FDT 3.5 Mac 可可 32 位](http://fdt.powerflasher.com/update/installer/FDTEnterpriseMacCarbon.zip)

# objective-c - 表格视图：禁用一行或发出警报以停止 segue？

> ID：10702750
> 
> 赞同：0
> 
> 时间：2012-05-22T13:12:53.870
> 
> 标签：objective-c, xcode, uitableview

我有两个表格视图填充了他们的 viewDidLoad，其中的数据来自包含商店名称的 sqllite db。在第一个视图中我选择一个元素（即一个商店），然后在第二个视图中我必须选择另一个与第一个*不同*的商店。

我可以在填充后禁用第二个表格视图的行之一吗？

我尝试不在第二个视图中加载（选择的第一家商店的名称），但我在其 viewDidLoad 中填充表格视图，不幸的是，在 viewDidAppear 和那一刻为时已晚，无法填满表格视图。

我还尝试以这种方式在第二个视图中选择一行的事件中添加警报

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   NSString *choosenSecondShop= [secondShop objectAtIndex:indexPath.row];
   NSString* nameFirstShop = [function loadFirstShopChoosen]; 

   if ([choosenSecondShop isEqualToString:nameFirstShop]) {
       NSString *message=@"Second shop cannot match the first";
       alert = [[UIAlertView alloc] initWithTitle:@"Errore"
            message: message
            delegate: self cancelButtonTitle: @"Ok" 
            otherButtonTitles:nil, 
            nil];
       [alert show];
    }else {
        // go on with the app's stuff!
    }
} 
```

但在这种情况下，会显示警报，但也会显示 segue。我可以阻止segue继续吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:07:32.533

有几种不同的方法可以解决这个问题：

### 1\. 条件转场

这应该可行，尽管我不确定从用户体验的角度来看这是一个好主意。

大概您从表格单元格开始在IB中进行了segue？当你这样做时，你不需要任何代码来执行segue（当你点击表格单元格时它会自动完成），但你也没有对其进行任何运行时控制。

如果您需要对是否/何时/执行哪个 segue 进行编程控制，您应该从视图控制器本身（而不是从其中的控件）开始创建一个 segue，并在 IB 中为 segue 提供一个唯一标识符。然后，在您的实现中，一旦您知道要执行 segue `tableView:didSelectRowAtIndexPath:`，就可以调用。`[self performSegueWithIdentifier:@"myIdentifier"]`

### 2.禁用单元格选择

为了防止选择特定的单元格，您的表格视图控制器可以实现`tableView:willSelectRowAtIndexPath:`返回`nil`您不希望用户选择的任何索引路径。

如果您这样做，您可能希望让用户清楚可以选择哪些行 - 您可以更改单元格在`tableView:cellForRowAtIndexPath:`.

### 3.不显示单元格

您说您正在填充表格视图`viewDidLoad`，但实际上并没有这样工作：表格视图通过在需要时调用您的数据源和委托方法来填充自己。如果您想防止数据集中的项目显示为表格中的单元格，您只需要更改数据源和委托方法的行为：

*   `tableView:numberOfRowsInSection:`应该返回比其他情况少一的数字
*   `tableView:cellForRowAtIndexPath:`应反映该项目的移除；就像是：

    ```
    MyShop *shop;
    if (indexPath.row < indexOfFirstShop)
        shop = [shops objectAtIndex:indexPath.row];
    else
        shop = [shops objectAtIndex:(indexPath.row + 1)];
    // then configure cell for the chosen shop 
    ```

现在，如果您在第一次调用这些方法时不知道要隐藏哪一行，那么一旦获得该信息，您需要做的就是告诉表视图它需要再次调用它们：`[self.tableView reloadData]`应该做诡计。

# php - 基于用户的wordpress系统？

> ID：10702754
> 
> 赞同：0
> 
> 时间：2012-05-22T13:13:09.320
> 
> 标签：php, wordpress

我正在寻找某种方法来为 wordpress 网站提供基于用户的系统。

基本上，用户将能够存储简单的信息。

这些信息将在用户登录时显示。

我注意到在 Wordpress 中您可以让用户登录到管理部分之类的东西，我只想让用户从主页登录，然后重定向到允许用户添加信息的页面，信息基于添加的变量到谷歌地图。然后应保存添加到地图的信息。

然后，该网站的所有用户都可以查看此信息

我看过[Buddypress](http://buddypress.org/)和[wpsymposium](http://www.wpsymposium.com/)，但我认为这对于我想要的东西来说有点矫枉过正。

关于我如何才能做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:01:22.683

有几种方法可以做到这一点。您可以：

1.  创建您自己的用户表（ID、用户名、电子邮件、密码等）和一个单独的数据表，用于存储您要为每个用户存储的信息。这不会作为 Wordpress 框架的一部分存在，而是简单地从您的 Wordpress 安装中显示。
2.  您可以查看挂钩的组合来为您的用户创建您想要的环境，该环境作为 Wordpress 本身的扩展而存在。查看为这些用户[添加角色](http://codex.wordpress.org/Function_Reference/add_role)。您还必须定义他们的[能力](http://codex.wordpress.org/Roles_and_Capabilities)。从那里，您可以为这些用户[创建一个菜单页面](http://codex.wordpress.org/Function_Reference/add_menu_page)以输入他们的信息，或者使用[自定义帖子类型](http://codex.wordpress.org/Function_Reference/register_post_type)和[自定义元框](http://codex.wordpress.org/Function_Reference/add_meta_box)的组合来为您的用户提供一个工作环境。

由于您专门将其用于 Google 地图，我会说第二个选项将是矫枉过正，特别是如果您的用户不希望经常登录。然而，第二种方法的好处是，如果您愿意，您可以以不止一种方式利用每篇文章中提供的信息。

权衡您的选择，看看什么最适合您和您的用户的需求。

# php - 鼠标悬停规范

> ID：10702755
> 
> 赞同：0
> 
> 时间：2012-05-22T13:13:09.710
> 
> 标签：php, javascript, mouseover

我正在一个网站上比较多种产品（[链接](http://www.ledisvet.nl/A3/concept.php?id=350)）。产品名称在一个盒子里。通过鼠标悬停，我可以在框中看到它们的规格。问题是我有多个装有不同产品的盒子，所有规格都装在一个盒子里。我希望有一个人可以帮助我。（部分是荷兰语）

```
if($nieuws['relateditem'])
    {
        $array1 = explode(",", $nieuws['relatedoption']);
        foreach($array1 as $key2)
        {
        print_r($key2);
        }
        $content .='

        <h2>Gerelateerde producten</h2>
        <div id="product-grid">
            <div id="product-grid-inner">   
        ';

        $array = explode(",", $nieuws['relateditem']);

        $i = 0;
        $id = 0;            
        foreach($array as $key1)
        {
            $id++;
            $i++;
            $key1 = trim($key1);

            $query4x = $mysqli->query("SELECT * FROM producten WHERE productcode='".$key1."'");
            $row2x = $query4x->fetch_assoc();

            $hammer = str_replace("XXX", $row2x['id'], $hammertimePro);

            $content .='
            <div id="'.$id.'blok" class="product-grid-item3" onMouseOver="this.style.border = \'1px solid #007fff\'" onMouseOut="this.style.border = \'1px solid #CCCCCC\'">
            <h2 class="titel">'.$row2x['naam'].$hammer.'<br /></h2><br />';

    //----
                    $options2 = explode(",", $row2x['relatedoption']);

                    foreach($options2 as $option2)
                        {
                        $query2 = $mysqli->query("SELECT * FROM producten WHERE productcode = '".$option2."'");
                        while($row2 = $query2->fetch_assoc())
                                {
                                $content.= "<div onMouseOver=\"this.style.backgroundColor='#f0f0f0'; this.style.cursor='pointer'; showConc(".$row2['id'].",1)\" onMouseOut=\"this.style.backgroundColor='#ffffff';\">".substr($row2['naam'], 13, 4)."</div>";
                                }
                        }

    //---- onMouseOver='showInformation(".$prods['id'].")'

    $content.='<div id="specs"></div></div>';

        }

        $content .= '</div></div>';

    }
?>

function showConc(id,box) {

$.ajax({
    url: 'http://www.ledisvet.nl/A3/concept_prod.php',
    type: 'get',
    data: 'id='+id,

    success: function(result) {
        $('#specs').html(result);
    }
});
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:24:58.560

这里有多个问题。#1 的问题是你有三个 id 的 div `specs`。**ID 必须是唯一的**——浏览器不知道你指的是*哪个* `#specs`框，所以它会选择它找到的第一个框。

您永远不会使用`showConc()`函数的第二个参数 ( `box`)。即使你这样做了，你也将它硬编码为`1`: `showConc(".$row2['id'].",1)`。

将函数更改为`showConc()`如下所示：

```
function showConc(id,box) {
    $.ajax({

        // ... other parameters here

        success: function(result) {
            $('#specs'+box).html(result);
        }
    });
} 
```

然后将`specs`id 更改为`specs1`,`specs2`并`specs3`使用正确的数字调用该函数。

# php - 显示会话过期消息

> ID：10702757
> 
> 赞同：2
> 
> 时间：2012-05-22T13:13:12.127
> 
> 标签：php, javascript, jquery, session, session-timeout

我希望我的页面在会话过期时显示警报。我在堆栈中搜索并找到[了带有 JQuery 的 MVC：处理会话过期](https://stackoverflow.com/questions/2319020/mvc-with-jquery-handling-session-expire)

这个很棒的链接解释了如何保留会话。但问题是它使用定时器。在我的情况下，用户可能会将他的系统保持在睡眠模式而使网页保持打开状态。在这种情况下，计时器停止工作。请向我建议一种方法，以便我的代码即使系统进入睡眠模式然后唤醒，也会知道会话已过期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:18:30.563

让这样的东西在所有浏览器和所有平台上工作的唯一方法是通过轮询。您可以使用每隔一段时间执行一次 ajax 调用的 javascript setInterval。如果您将时间间隔设置为低于服务器超时的时间，那么您将更新会话并且不会过期。如果你把它放在服务器超时时间之上，那么你就会知道它是否真的过期并告诉客户端它已经过期了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:24:09.073

将会话 cookie 从 php 存储到浏览器以设置会话结束信息是很常见的。在服务器端，过期信息存储到数据库中。在每个用户请求服务器更新 cookie 和数据库。使用 jquery cookie 插件，您可以检查会话何时过期。您可以像其他人建议的那样使用轮询（而不是池）来将计时器事件设置为会话到期的时间。

**编辑**

我正在开发一个类似的应用程序。这是我所做的：在每个 ajax 请求的 php 中，我设置了 cookie

```
$exp_gmt = gmdate("D, d M Y H:i:s", time() + $this->allowcache_expire * 60)." GMT";
header("Expires: ".$exp_gmt);
header("Cache-Control: max-age=".$this->allowcache_expire * 60, false); 
```

然后我在客户端使用这个 jquery 插件（对不起，我不记得我在哪里找到它了）

```
jQuery.cookie = function(d, e, b) {
    if(arguments.length > 1 && String(e) !== "[object Object]") {
        b = jQuery.extend({}, b);
        if(e === null || e === undefined) {
            b.expires = -1
        }
        if( typeof b.expires === "number") {
            var g = b.expires, c = b.expires = new Date();
            c.setSeconds(c.getSeconds() + g)
        }
        e = String(e);
        return (document.cookie = [encodeURIComponent(d), "=", b.raw ? e : encodeURIComponent(e), b.expires ? "; expires=" + b.expires.toUTCString() : "", b.path ? "; path=" + b.path : "", b.domain ? "; domain=" + b.domain : "", b.secure ? "; secure" : ""].join(""))
    }
    b = e || {};
    var a, f = b.raw ? function(h) {
        return h
    } : decodeURIComponent;
    return ( a = new RegExp("(?:^|; )" + encodeURIComponent(d) + "=([^;]*)").exec(document.cookie)) ? f(a[1]) : null
}; 
```

我在页面上还有一个时钟：

```
showTime : function() {
    var today = new Date();
    var curr_date = today.getDate();
    var curr_month = today.getMonth() + 1;
    var curr_year = today.getFullYear();
    var curr_hour = today.getHours();
    var curr_min = today.getMinutes();
    var curr_sec = today.getSeconds();
    if(curr_date < 10)
        curr_date = '0' + curr_date;
    if(curr_month < 10)
        curr_month = '0' + curr_month;
    if(curr_hour < 10)
        curr_hour = '0' + curr_hour;
    if(curr_min < 10)
        curr_min = '0' + curr_min;
    if(curr_sec < 10)
        curr_sec = '0' + curr_sec;
    var curr_full = curr_date + "/" + curr_month + "/" + curr_year + "<br />" + curr_hour + ":" + curr_min + ' <span style="font-size:0.8em">' + curr_sec + '</span>';
    $('#clock').html(curr_full);
    setTimeout("showTime()", 1000);
} 
```

在时钟功能结束时，您可以读取 cookie 并将其与当前时间进行比较以查看它是否已过期。

# java - 在解压缩要传递到工作池的文件期间打开流的适当时间

> ID：10702758
> 
> 赞同：2
> 
> 时间：2012-05-22T13:13:13.797
> 
> 标签：java, performance, algorithm, compression

这可能更像是一个理论问题。我有一个场景，其中有一个压缩文件（~2 GB）被解压缩成一个更大的文件（~22GB）。这个过程大约需要 20 分钟，这反过来意味着每次运行这个过程我都浪费了大约 19 分 59 秒。我的问题如下：是否可以从正在解压缩的文件中打开一个流并将信息传递给一个单独的程序来处理数据？基本上文件中的每一行都是一条记录，但我一直无法找到一种技术来发现在解压缩过程中何时完全解码了一行。通用算法或 Java 库是有价值的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T19:44:30.417

是的，这很容易。在 unix 中，你可能会这样做

```
bzcat compressedfile.bz2 | mainprogram 
```

然后你的主程序可以读取标准输入上的解压缩流。zip 和 gzip 存在类似的命令行程序。

如果主程序需要从文件而不是标准输入中读取，请使用[命名管道](http://en.wikipedia.org/wiki/Named_pipe)。

如果您使用的是 Windows，则可能有也可能没有类似的工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T19:44:39.610

您可以使用[`java.util.zip`](http://java.sun.com/developer/technicalArticles/Programming/compression/)'s[`GZIPInputStream`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/zip/GZIPInputStream.html)顺序读取 gzip 文件。然后您可以实现自己的缓冲和提取行，或使用[`BufferedReader`](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedReader.html)该`readLine`方法。

# iphone - 类似 ios 中删除的效果

> ID：10702761
> 
> 赞同：1
> 
> 时间：2012-05-22T13:13:18.647
> 
> 标签：iphone, ios

我需要提示/代码，例如在 iOS 上删除/移动应用程序效果，通常我已经启动了代码，我`UIButton`在`UIScroll`.

所以我的问题是，假设我在屏幕上有 8 到 10 个按钮，我想通过拖动来改变它们的位置。例如，选择第 6 个按钮并移动或设置在 1 和 2 之间。当我将它们放在其他按钮之间时，其他按钮的位置会改变。

我`UIPanGestureRecognizer`用于拖动。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T13:24:47.733

下载[Tiles-v1.0.zip](http://undefinedvalue.com/sites/undefinedvalue.com/files/Tiles-v1.0.zip)并检查代码，这是我在需要实现它时使用的。

参考：[移动 UIViews 以避免碰撞，例如在 Springboard 上重新排列图标](https://stackoverflow.com/questions/1535057/move-uiviews-to-avoid-collision-like-rearranging-icons-on-springboard)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:23:49.457

如果你已经有了拖动代码，剩下的就很简单了。只需使用 UIView 动画。

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.3];
...
[button setFrame:newFrame];
...
[UIView commitAnimations]; 
```

基本上，只需将按钮移动到 beginAnimations - commitAnimations 块中的新位置。

希望这可以帮助。

# unix - 执行'mv A B'：'inode'会改变吗？

> ID：10702767
> 
> 赞同：6
> 
> 时间：2012-05-22T13:13:36.667
> 
> 标签：unix, inode, mv

如果我们执行一个命令：

```
mv A B 
```

那么文件A的inode中的字段会发生什么？它会改变吗？

我认为不应该仅仅通过更改文件名来改变它，但我不确定。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T13:19:52.027

它至少部分取决于 A 和 B 是什么。如果您在文件系统之间移动，inode 几乎肯定会有所不同。

简单地在同一系统上重命名文件更有可能保留相同的 inode，因为 inode 属于数据而不是目录条目，效率会导致这种设计。但是，它取决于文件系统，并且不是标准强制要求的。

例如，*可能*有一个带有 inode 概念的版本控制文件系统，它为您提供一个新的 inode，因为它想要跟踪名称更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:20:54.620

这取决于。

[这个网站](http://www.labtestproject.com/linuxcmd/mv.html)上有一个很好的例子，它表明 inode 可能保持不变。但我不会依赖这种行为，我怀疑它是否在任何标准中都有规定。

# asp.net - 如何使用 LINQ ASP.NET 从两个 DataTable 创建一个新的 DataTable

> ID：10702769
> 
> 赞同：1
> 
> 时间：2012-05-22T13:13:39.803
> 
> 标签：asp.net, vb.net, linq, join, datatable

又是我 :D

我正在学习 LINQ，有一些我想做却做不到的事情。请不要建议其他不是 Linq 的解决方案。谢谢。

```
 Dim dtSong As DataTable = New DataTable("Songs")
    dtSong.Columns.Add("ID", GetType(Guid))
    dtSong.Columns.Add("Name", GetType(String))
    dtSong.Columns.Add("Type", GetType(String))
    dtSong.Columns.Add("AlbumID", GetType(Guid))

    Dim dtAlbum As DataTable = New DataTable("Album")
    dtAlbum.Columns.Add("ID", GetType(Guid))
    dtAlbum.Columns.Add("Name", GetType(String))

    Dim idsong, idalbum As Guid
    idalbum = Guid.NewGuid()
    dtAlbum.Rows.Add(idalbum, "Best of")

    idsong = Guid.NewGuid()
    dtSong.Rows.Add(idsong, "You are my sunshine", "Pop", idalbum)
    idsong = Guid.NewGuid()
    dtSong.Rows.Add(idsong, "twinkle twinkle", "Pop", idalbum)
    idsong = Guid.NewGuid()
    dtSong.Rows.Add(idsong, "you are my heart", "Rock", idalbum)        

    Dim query = From x In dtSong Join y In dtAlbum
                On x.Field(Of Guid)("AlbumID") Equals
                y.Field(Of Guid)("ID")
                Where (x.Field(Of String)("Type") = "Pop")
                Select New With
                     {
                        .Name = x.Field(Of String)("Name"),
                        .Type = x.Field(Of String)("Type"),
                        .Album = y.Field(Of String)("Name")
                    }

    Dim dtnew As DataTable = query.CopyToDataTable 
```

我想我的 LINQ 查询有问题。我不允许在此查询中使用 CopyToDataTable。我可以使用 For Each 循环打印出结果，但我想要一个新的 DataTable。谢谢您的帮助。抱歉英语不好。

大号

# apache - 使用 VirtualHost 和 mod_rewrite 找不到文件

> ID：10702772
> 
> 赞同：1
> 
> 时间：2012-05-22T13:14:01.427
> 
> 标签：apache, mod-rewrite, mod-vhost-alias

我正在构建一个基于[Tonic](http://peej.github.com/tonic/)的 RESTful api 。在我的开发人员机器和我们的舞台服务器上，我们使用虚拟主机。

Tonic 使用 .htaccess 文件将传入调用转换为它的 dispatcher.php 文件。这在没有启用 VirtualHosts 的服务器上运行良好。

但是，如果我启用 VirtualHosts，即使文件的路径和名称正确，我也会找不到文件。

这是我的开发人员机器上的 VirtualHost 设置。

```
<VirtualHost *:80>
    ServerAdmin admin@xxxxxxxxxxxx
    ServerAlias *.dev.xxxxx
    VirtualDocumentRoot /home/xxxxxxxx/workspace/%1
    <Directory /home/xxxxxxxx/workspace/>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride All
            Order allow,deny
            allow from all
    </Directory>

</VirtualHost> 
```

Tonic 的 .htacces 位于项目根目录中名为 rest 的文件夹中：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_URI} !dispatch\.php$
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule .* dispatch.php [L,QSA]
</IfModule> 
```

调用[http://project.dev.xxxxx/rest/](http://project.dev.xxxxx/rest/)给出：

```
Not Found
The requested URL /home/xxxxxxxx/workspace/project/rest/dispatch.php was 
not found on this server.

Apache/2.2.22 (Ubuntu) Server at xxxxxxx Port 80 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:24:19.713

看起来好像你在滥用`VirtualDocumentRoot`. 尝试将其更改为：

`DocumentRoot /home/xxxxxxxx/workspace/project/rest`

另外，这里有一个很好的解释`VirtualDynamicRoot`：[动态配置的海量虚拟主机](http://httpd.apache.org/docs/2.2/vhosts/mass.html)

希望有帮助。

# mysql - MySql：多个左连接使查询非常慢

> ID：10702777
> 
> 赞同：2
> 
> 时间：2012-05-22T13:14:10.047
> 
> 标签：mysql, query-optimization

运行以下查询需要很长时间。所有表都包含超过 200,000 条记录。连接语句中的所有列上都存在索引：

```
Select files.filename,
coalesce(temp_decmetadata.glare_roadGlare, 0) as glare_roadGlare,
coalesce(temp_decmetadata.glare_sun, 0) as glare_sun,
coalesce(temp_decmetadata.spray_heavySpray, 0) as spray_heavySpray,
coalesce(temp_kafaspdobjectdata.contrast_wellVisible, 0) as contrast_wellVisible,
coalesce(temp_kafaspdobjectdata.roadSafety_zebraCrossing, 0) as roadSafety_zebraCrossing,
coalesce(temp_visionmetadata.roadUser_bicycle, 0) as roadUser_bicycle,
coalesce(temp_visionmetadata.roadUser_car, 0) as roadUser_car,
coalesce(temp_visionmetadata.roadUser_pedestrian, 0) as roadUser_pedestrian
from files
left join 
(
 Select id,
 count(case when glare like '%roadGlare%' then 1 end) as glare_roadGlare,
 count(case when glare like '%sun%' then 1 end) as glare_sun,
 count(case when spray like '%heavySpray%' then 1 end) as spray_heavySpray
 from decmetadata
 group by id 
) temp_decmetadata on temp_decmetadata.id = files.id 
left join 
(
 Select id,
 count(case when contrast like '%wellVisible%' then 1 end) as contrast_wellVisible,
 count(case when roadSafety like '%zebraCrossing%' then 1 end) as roadSafety_zebraCrossing
 from kafaspdobjectdata
 group by id 
) temp_kafaspdobjectdata on temp_kafaspdobjectdata.id = files.id 
left join 
(
 Select id,
 count(case when roadUser like '%bicycle%' then 1 end) as roadUser_bicycle,
 count(case when roadUser like '%car%' then 1 end) as roadUser_car,
 count(case when roadUser like '%pedestrian%' then 1 end) as roadUser_pedestrian
 from visionmetadata
 group by id 
) temp_visionmetadata on temp_visionmetadata.id = files.id 
```

“解释选择...”的结果附在下面：

![解释选择...](../Images/d405f0772fffd4ef1013e30f260ded0a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:28:19.700

我不是 MySQL 专家，但您可以通过将 JOIN 条件移动到内部`WHERE`条件并将行过滤为仅满足任何`CASE`条件的行来确保改进子查询，这将减少必须评估的行数运算符`LIKE`（这是此查询中最昂贵的操作）。下面的脚本应该给你的想法：

```
...
CROSS JOIN  (
  SELECT
  SUM(CASE WHEN glare LIKE '%roadGlare%' THEN 1 ELSE 0 END) AS glare_roadGlare,
  SUM(CASE WHEN glare LIKE '%sun%' THEN 1 ELSE 0 END) AS glare_sun,
  SUM(CASE WHEN spray LIKE '%heavySpray%' THEN 1 ELSE 0 END) AS spray_heavySpray
  FROM decmetadata
  WHERE ( id = files.id ) -- benefits from an index over DECMETADATA.ID
    AND ( 1=2
      OR glare LIKE '%roadGlare%'
      OR glare LIKE '%sun%'
      OR spray LIKE '%heavySpray%'
    )
) temp_decmetadata
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:17:28.983

您的查询结构良好。问题是所有的`like '%xxx%'`查询。当您像这样进行子字符串匹配时，索引不会帮助这些子句。

尝试改用[全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)。

# c++ - C++11 使用 OpenGL 进行多线程渲染可防止主线程读取标准输入

> ID：10702778
> 
> 赞同：7
> 
> 时间：2012-05-22T13:14:18.400
> 
> 标签：c++, multithreading, opengl, c++11, glfw

它似乎与平台相关（适用于我的笔记本电脑上的 Ubuntu 12.04，不适用于我的工作站上的另一个 Ubuntu 12.04）。

这是一个关于我用两个线程做什么的示例代码。

```
#include <iostream>
#include <thread>
#include <chrono>
#include <atomic>
#include <GL/glfw.h>

using namespace std;

int main() {
  atomic_bool g_run(true);
  string s;
  thread t([&]() {
    cout << "init" << endl;

    if (!glfwInit()) {
      cerr << "Failed to initialize GLFW." << endl;
      abort();
    }

    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 2);
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 1);

    if(!glfwOpenWindow(640, 480, 8, 8, 8, 0, 24, 0, GLFW_WINDOW)) {
      glfwTerminate();
      cerr << "Cannot open OpenGL 2.1 render context." << endl;
      abort();
    }

    cout << "inited" << endl;

    while (g_run) {
      // rendering something
      cout << "render" << endl;
      this_thread::sleep_for(chrono::seconds(1));
    }
    // unload glfw
    glfwTerminate();
    cout << "quit" << endl;
  });
  __sync_synchronize(); // a barrier added as ildjarn suggested.
  while (g_run) {
    cin >> s;
    cout << "user input: " << s << endl;
    if (s == "q") {
      g_run = false;
      cout << "user interrupt" << endl;
      cout.flush();
    }
  }
  __sync_synchronize(); // another barrier
  t.join();
} 
```

这是我的编译参数：

```
g++ -std=c++0x -o main main.cc -lpthread -lglfw 
```

我的笔记本电脑运行这个程序，如下所示：

```
init
inited
render
render
q
user input: q
user interrupt
quit 
```

工作站只输出：

```
init
inited
render
render
q
render
q
render
q
render
^C 
```

它只是简单地忽略了我的输入（另一个程序与 glew 和 glfw 相同的程序，只是跳出主线程中的 while 循环，而不读取我的输入。）**但是**这个东西在 gdb 上正常工作！

知道发生了什么吗？

**更新**

在其他机器上进行更多测试后，NVIDIA的驱动程序导致了这个。同样的事情发生在其他带有 NVIDIA 显卡的机器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:46:57.090

我使用此代码关闭我的程序并在运行时获取我的 q 键

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <pthread.h>
#include <termios.h>

static struct termios old, _new;
static void * breakonret(void *instance);

/* Initialize _new terminal i/o settings */
void initTermios(int echo)
{
 tcgetattr(0, &old); /* grab old terminal i/o settings */
 _new = old; /* make _new settings same as old settings */
 _new.c_lflag &= ~ICANON; /* disable buffered i/o */
 _new.c_lflag &= echo ? ECHO : ~ECHO; /* set echo mode */
 tcsetattr(0, TCSANOW, &_new); /* use these _new terminal i/o settings now */
}

/* Read 1 character with echo */
char getche(void)
{
 char ch;
 initTermios(1);
 ch = getchar();
 tcsetattr(0, TCSANOW, &old);
 return ch;
}

int main(){
 pthread_t mthread;
 pthread_create(&mthread, NULL, breakonret, NULL); //initialize break on return 
 while(1){
   printf("Data on screen\n");
   sleep(1);
 }
pthread_join(mthread, NULL);
}
static void * breakonret(void *instance){// you need to press q and return to close it
 char c;
 c = getche();
 printf("\nyou pressed %c \n", c);
 if(c=='q')exit(0);
 fflush(stdout);
} 
```

有了这个你有一个线程从你的键盘读取数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T04:06:03.980

在其他机器上进行更多测试后，NVIDIA的驱动程序导致了这个。同样的事情发生在其他带有 NVIDIA 显卡的机器上。

要解决此问题，需要对初始化顺序进行一些处理。在 nvidia 机器上，glfw 必须在任何事情之前初始化（例如，创建线程，即使您没有使用 glfw 的线程例程。）初始化必须完成，例如，在 之后创建输出窗口`glfwInit()`，否则问题仍然存在。

这是固定代码。

```
#include <iostream>
#include <thread>
#include <chrono>
#include <atomic>
#include <GL/glfw.h>

using namespace std;

int main() {
  atomic_bool g_run(true);
  string s;

  cout << "init" << endl;

  if (!glfwInit()) {
    cerr << "Failed to initialize GLFW." << endl;
    abort();
  }

  glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 2);
  glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 1);

  if(!glfwOpenWindow(640, 480, 8, 8, 8, 0, 24, 0, GLFW_WINDOW)) {
    glfwTerminate();
    cerr << "Cannot open OpenGL 2.1 render context." << endl;
    abort();
  }

  cout << "inited" << endl;

  thread t([&]() {
    while (g_run) {
      cin >> s;
      cout << "user input: " << s << endl;
      if (s == "q") {
        g_run = false;
        cout << "user interrupt" << endl;
        cout.flush();
      }
    }
  });

  while (g_run) {
    // rendering something
    cout << "render" << endl;
    this_thread::sleep_for(chrono::seconds(1));
  }

  t.join();

  // unload glfw
  glfwTerminate();
  cout << "quit" << endl;
} 
```

感谢您的所有帮助。

# javascript - 根据用户输入更新 webgl-surface-plot

> ID：10702779
> 
> 赞同：0
> 
> 时间：2012-05-22T13:14:19.830
> 
> 标签：javascript, 3d, webgl

我正在尝试使用[webgl-surface-plot](http://code.google.com/p/webgl-surface-plot/)进行 3D 绘图。问题是，我想使用滑块或文本框为我的函数参数输入用户输入。但是由于某种原因，当滑块/文本框更新时，我无法让它更新图表。任何帮助表示赞赏。目前，为了简单起见，我正在使用 html5 滑块，直到我能找出其他更大的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T03:16:31.197

您可以向调用代码公开**JSSurfacePlot.data**对象以及**重绘函数。**在调用后者之前修改前者应该可以解决问题。

**更新**

只需使用新数据调用“draw(...)”方法即可。

# c# - 用不同的值测试函数

> ID：10702780
> 
> 赞同：2
> 
> 时间：2012-05-22T13:14:25.897
> 
> 标签：c#, visual-studio-2010, unit-testing

我有测试功能：

```
[TestMethod()]
public void CreateTest(string input)
{
   string expected = "321"; 
   Assert.AreEqual(expected, input);
} 
```

我需要用不同的数据运行这个测试：`CreateTest("321"); CreateTest("123"); CreateTest(null);` 在我做类似的事情之前我不知道该怎么做`[TestCase("123")], [TestCase("321")]`

我需要一些东西：

```
[RowTest]
[Row(1,1,2)]
[Row(2,1,3)]
[Row(1,-1,0)]
public void SumTest(int a1, int a2, int result)
{
    Assert.AreEqual(a1 + a2, result);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:19:21.603

你试过[数据驱动的单元测试](http://msdn.microsoft.com/en-us/library/ms182527%28v=vs.100%29.aspx)吗？它不使用类属性，但它应该给你相同的结果。

如果您想实现**高代码覆盖率**，请[查看 Pex 电动工具](http://research.microsoft.com/en-us/projects/pex/)。

如果你想为**你的测试建模**( **[MBT](http://en.wikipedia.org/wiki/Model-based_testing)** )，[Spec Explorer 也值得回顾](http://research.microsoft.com/en-us/projects/specexplorer/)。

# mysql - 为什么 MySQL 允许将 NOT NULL 列更新为 NULL？

> ID：10702786
> 
> 赞同：6
> 
> 时间：2012-05-22T13:15:02.667
> 
> 标签：mysql

我跑`MySql`进去了`ubuntu 10.10`。我创建了一个名为**empno、name 和salary**`'employee'` 3 个字段名称的表。插入了几个实体。在过程中，我想将薪水属性更改为. 我将表格更改为**`'NOT NULL'`**

 **```
ALTER TABLE employee MODIFY salary int(10) NOT NULL; 
```

查询已执行。我想通过使用命令进行测试，

```
UPDATE employee SET salary=NULL;

Query OK, 15 rows affected, 15 warnings (0.06 sec)
Rows matched: 15  Changed: 15  Warnings: 15 
```

还发出警告 `" (Code 1048): Column 'salary' cannot be null "`（每行重复）

但是当我看到我的桌子时，所有的薪水都是零（`'0'`）。

**在 WINDOWS XP 的 MySql 中，相同的查询会导致错误而不是警告**

我检查了 INNODB 和 MISAM 引擎，但结果相同。请帮助我了解处理之外发生的情况。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-22T13:40:46.803

您一定没有`SQL_MODE`对 ubuntu 安装设置严格。

问题

```
SET SQL_MODE='STRICT_ALL_TABLES' 
```

或添加

```
SQL_MODE='STRICT_ALL_TABLES' 
```

下`[mysqld]`到你`my.cnf`的`Ubuntu`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T13:18:07.487

我没有看到问题，您将列设置为`NOT NULL`, （不允许 NULL 值），现在它不允许您将其设置为`NULL`，这将是预期的行为。

数据库中有 0 的原因是因为 0 是将 NULL 转换为 int 的结果。**

# dojo - dijit.form.NumberSpinner 的递增/递减事件

> ID：10702787
> 
> 赞同：3
> 
> 时间：2012-05-22T13:15:04.663
> 
> 标签：dojo, dijit.form

如果 dijit.form.NumberSpinner 小部件中的值增加或减少，是否有任何方法可以捕获事件？

我打算做的是，每当值低于 0 时，将 NumberSpinner 小部件内的文本设置为“从不”，当用户将其从“从不”递增时，它应该再次设置为 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:21:39.033

```
dojo.declare("MySpinner", [Spinner], {

    zeroValue: 'Never',

    adjust: function(/*Object*/ val, /*Number*/ delta){
        arguments[0] = val && val > 0 ? val : 0;
        return this.inherited(arguments);
    },

    _getValueAttr: function() {
      var v = this.inherited(arguments);
      return (!v || v <= 0) ? 0 : v;
    },

    format: function(/*Number*/ value, /*dojo.number.__FormatOptions*/ constraints){
      var v = this.inherited(arguments);
      if (v <= 0 || !v) 
         return this.zeroValue;

      return v;
    },

    isValid: function(/*Boolean*/ isFocused){
        var v = this.get('value');
        if (!v) {
            return true;
        }           
        return this.inherited(arguments);
    }
}); 
```

这是工作示例

[http://jsfiddle.net/cswing/zDVep/](http://jsfiddle.net/cswing/zDVep/)

# c# - 我们是否需要在服务器中安装 Microsoft Office 才能在 Asp.net 中导入 Excel？

> ID：10702788
> 
> 赞同：5
> 
> 时间：2012-05-22T13:15:06.367
> 
> 标签：c#, .net, import

我们是否需要在服务器中安装 Microsoft Office 才能运行将数据从 excel 文件导入 mssql 数据库的应用程序？

有什么建议或想法吗？

我使用的代码

```
public partial class _Default : System.Web.UI.Page
{
private String strConnection = "Data Source=MYCBJ017550027;Initial Catalog=MySamplesDB;Integrated Security=True";
protected void Page_Load(object sender, EventArgs e)
{

}
protected void btnSend_Click(object sender, EventArgs e)
{
string path = fileuploadExcel.PostedFile.FileName;
string excelConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + path + ";Extended Properties=Excel 12.0;Persist Security Info=False";
OleDbConnection excelConnection =new OleDbConnection(excelConnectionString);
OleDbCommand cmd = new OleDbCommand("Select [ID],[Name],[Designation] from [Sheet1$]",excelConnection);
excelConnection.Open();
OleDbDataReader dReader;
dReader = cmd.ExecuteReader();
SqlBulkCopy sqlBulk = new SqlBulkCopy(strConnection);
sqlBulk.DestinationTableName = "Excel_table";
sqlBulk.WriteToServer(dReader);
excelConnection.Close();
}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T13:18:25.023

如果您只阅读 xls 文件，请使用`Microsoft.Jet.OLEDB.4.0`.net 框架内置的文件。

如果您正在阅读 xlsx 文件，请使用`Microsoft.ACE.OLEDB.12.0`. 可以从 Microsoft 站点免费下载此驱动程序。您无需安装 Microsoft 官员即可进行互操作。

使用以下连接字符串

```
 string excelConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;  
Data Source=" + path + ";Extended Properties=Excel 12.0;HDR=YES"; 
```

[从这里下载驱动程序](http://www.microsoft.com/en-us/download/details.aspx?id=13255)

[请参阅this以获取运行示例](http://social.msdn.microsoft.com/Forums/en-US/vbinterop/thread/3e9e8441-36be-4f70-826b-51badb9a9bb3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T13:22:06.407

正如@Romil 所说，您可以为此使用 .NET 框架：

```
string ConnectionString = string.Format(@"Provider=Microsoft.Jet.OLEDB.4.0; Data Source={0}; Extended Properties=""Excel 8.0;HDR=Yes"";", fileName);

using (OleDbConnection conn = new OleDbConnection(ConnectionString))
{
     conn.Open();
     DataTable schemaTable = conn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, new object[] { null, null, null, "TABLE" });

     foreach (DataRow schemaRow in schemaTable.Rows)
     {
          string sheet = schemaRow["TABLE_NAME"].ToString();
          using (OleDbCommand cmd = new OleDbCommand("SELECT * FROM [" + sheet + "]", conn))
          {
               cmd.CommandType = CommandType.Text;
               DataTable outputTable = new DataTable(sheet);
               output.Tables.Add(outputTable);
               new OleDbDataAdapter(cmd).Fill(outputTable);
          }
     }
                conn.Close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T13:31:59.457

jet 的问题是，您仍然必须为其安装数据提供程序（尽管这也是免费的）或安装了办公室才能使其工作。如果您只需要读取一个 excel 文件，那么有很多完全托管的库可以很好地完成跟踪，而无需安装任何东西。

我在这里列出了一些。我用过很多excelreader，效果很好。

[http://excelreader.codeplex.com/](http://excelreader.codeplex.com/)
[http://epplus.codeplex.com/](http://epplus.codeplex.com/)

Excel 阅读器在文档方面似乎很轻松。所以这是一个如何使用它的例子

```
IExcelDataReader reader = null;
try
{
    using (FileStream stream = new FileStream(ofd.FileName, FileMode.Open))
    {
        string ext = System.IO.Path.GetExtension(ofd.FileName).Replace(".", "").ToUpper();
        if (ext == "XLS")
            reader = ExcelReaderFactory.CreateBinaryReader(stream);
        else
            reader = ExcelReaderFactory.CreateOpenXmlReader(stream);

        reader.IsFirstRowAsColumnNames = true;
        using (DataSet ds = reader.AsDataSet())
        {
            foreach (DataRow dr in ds.Tables[0].Rows)
            {
                ImportData toAdd = new ImportData()
                    {
                        Format = dr[0].ToString(),
                    };

                Database.Datastore.InsertObject(toAdd);
            }
        }
    }
} 
```

# android - 自动启动应用程序

> ID：10702793
> 
> 赞同：0
> 
> 时间：2012-05-22T13:15:20.410
> 
> 标签：android, android-intent, android-service

我想在以下情况下自动启动我的 Android 应用程序：

1.  重启
2.  应用程序已通过 TaskManager 或 Ram 清除停止

我在网上搜索并找到有关 Android 服务的内容。我实现了一些代码以在重新启动时启动我的服务，但我不工作，而且我不知道如何了解案例 2。

你能给我一个建议吗？

这是我的服务代码：

在 manifest.xml 上

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 

<service android:name="TimetableService">
 <intent-filter>
  <action android:name=".TimetableService" />
 </intent-filter>
</service>

<receiver android:enabled="true" android:name=".OnBootReceiver" android:permission="android.permission.RECEIVE_BOOT_COMPLETED">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</receiver> 
```

OnBootReceiver：

```
public void onReceive(Context context, Intent intent) 
{
    Intent serviceIntent = new Intent();
    serviceIntent.setAction("TimetableService");
    context.startService(serviceIntent);
} 
```

时间表服务：

```
 public class TimetableService extends Service 
 {

@Override
public IBinder onBind(Intent intent) {

    return null;

}

@Override
public void onCreate() {
    super.onCreate();

    Toast.makeText(this, "Service Created", Toast.LENGTH_LONG).show();

}

@Override
public void onDestroy() {
    super.onDestroy();

    Toast.makeText(this, "Service Destroyed", Toast.LENGTH_LONG).show();

}

@Override
public void onStart(Intent intent, int startId) {

    super.onStart(intent, startId);

    Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:05:18.790

我会考虑使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)来安排您的应用程序在一天中的特定时间运行。这样，如果有什么东西关闭了你的应用程序并不重要，警报管理器会在你指定的时间再次唤醒它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T12:16:21.123

让我们使用服务来自动启动应用程序

现在，当启动完成时，您可以使用以下代码重新启动您的服务。

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class MyStartupIntentReceiver extends BroadcastReceiver{
@Override
public void onReceive(Context context, Intent intent) {
 // check for interreupted flag in shared pref
 // if true restart your service
}
} 
```

将以下代码添加到您的清单中

```
<receiver android:name="MyStartupIntentReceiver">
<intent-filter>    
<action
android:name="android.intent.action.BOOT_COMPLETED" />
<category android:name="android.intent.category.HOME" />
</intent-filter>
</receiver> 
```

# php - 异步 PHP

> ID：10702800
> 
> 赞同：2
> 
> 时间：2012-05-22T13:15:49.033
> 
> 标签：php, javascript, image, background-process

我有一个 php 脚本，它获取用户输入（一些文本和一个链接），将其放入数据库中，然后使用用户提供的链接搜索图像。

问题是，有时搜索图片需要一段时间，这会使网站“卡住”，因此显示“您的帖子已提交！”的视图 有时需要 4 到 6 秒才能最终加载。

有没有办法让 PHP 异步搜索图像？

您可能想知道我为什么不直接加载视图然后进行图像搜索，或者只使用 AJAX。好吧，我需要数据库中的“最后插入 ID”来根据项目 ID 重命名图像，这只能在帖子插入数据库后完成。

**编辑 1：**我已经阅读了这个[异步 PHP 调用？](https://stackoverflow.com/questions/124462/asynchronous-php-calls)但我不确定我是否理解。

**编辑 2：**这是所要求的过程概述：

*   第 1 步：用户打开表单并填写 2 个字段（一些文本和一个链接）
*   第 2 步：用户提交表单
*   第 3 步：PHP 在 MySQL 数据库中插入帖子
*   第 4 步：PHP 搜索该链接的图像（爬网，需要几秒钟）并使用数据库插入的最后一个 ID 的名称保存图像。如果最后一个 ID 为 75，图像将保存为“img_75”。
*   第 5 步：PHP 加载“您已成功发布链接”

我想要的是**step 5 在 step 3 之后发生**，而 step 4 正在运行。我实际上并不需要第 4 步的响应。只要它在后台运行我很高兴 :)

* * *

**解决方案：**我已经按照@shadyyx 的建议做了。一个简单的 AJAX 调用。我真的希望有一个替代方案，但显然 php 或任何其他服务器端语言都不能处理异步调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T13:46:54.250

我将在两步 AJAX 调用中执行此操作。

这是它的样子：

1.  用户打开表单并填写数据
2.  用户单击提交按钮 - AJAX 调用被发送到服务器
3.  一个新条目被写入数据库，最后一个 ID 作为响应返回给 JS
4.  您向用户显示表单已提交的消息
5.  并调用新的 AJAX 请求，该请求将抓取所需的 URL，下载并使用您从第一个 AJAX 响应中获得的 ID 保存图像......

清除？简单的？我猜是...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:20:08.140

我为此使用了流程。

1.  客户请求
2.  服务器回答并给客户端一个回答 ID
3.  服务器启动一个 php 进程，该进程在后台执行长时间运行的操作并将结果保存到文件中
4.  客户端每隔几秒就用 ID 请求答案
5.  当所有内容都在文件中时，服务器加载它并在服务器的应答请求中发送结果。

为此使用了 popen() ...

服务器也可以告诉客户端一个时间跨度，客户端应该等待直到请求答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T13:27:31.693

为什么不创建一条新记录，立即返回最后一个 id，然后运行新查询以使用信息更新记录？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T13:40:56.337

以下是我对您的情况的建议：

*   当您加载表单页面时，向浏览器发送一个 cookie。
*   对图像的请求不应该（也不应该）依赖于“将要”插入的记录。
*   您正在搜索的图像将保存在某个临时路径中。将该路径与 cookie 关联。在 PHP 中，您可以使用`$_SESSION[...]`. 一旦用户填写了必填字段，这将是一个 AJAX 请求。
*   当表单提交到服务器时：
*   服务器从 $_SESSION 变量中获取图像。
*   PHP 将文件从临时位置移动到实际位置。
*   更新数据库。

**为什么不应该过早地创建记录**

当 AJAX 请求到达服务器（并创建记录）然后用户导航离开时会发生什么？在这种情况下，您需要有额外的构造来删除该记录，这是您不想进入的某种额外内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T14:36:13.240

> 我已经阅读了这个异步 PHP 调用？

那里的答案质量可能会更好。

> 但我不确定我是否理解

err，那么你可能不明白这里的答案。

简短的回答是您不能编写异步 PHP 代码。

一个更长的答案是您可以使用 curl_multi_ 函数从 PHP 发出并行 HTTP 请求（但仍然阻塞），但是如果您想从 PHP 生成页面而不阻塞，那么您必须生成包含 AJAX 调用的 HTML 并让浏览器处理并发请求并在完成后将它们填充到页面中。使用这种方法，您可以选择在 DBMS 上调用多个搜索线程（如果操作正确）应该比单个请求运行得更快。

# python - cherrypy 动态添加对象

> ID：10702802
> 
> 赞同：2
> 
> 时间：2012-05-22T13:15:52.233
> 
> 标签：python, cherrypy

我正在使用cherrypy 来模仿现有的RESTful 接口。一个要求是我必须能够动态添加对象。

例如，假设我有一个名为 myobj 的对象。我希望能够公开一个基于用户添加的对象的方法。因此，我将有一个“添加”上下文，在其中创建对象

```
http://example.ex/myobj+create 
```

我将能够检索创建的对象以及任何子对象：

```
http://example.ex/myobjs/obj1
http://example.ex/myobjs/obj1/child1 
```

这可以用cherrypy吗？我应该调查不同的框架吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:56:56.280

您可能想查看CherryPy 3.2+ 提供的[_cp_dispatch](https://bitbucket.org/cherrypy/cherrypy/src/b0c48210b250/cherrypy/test/test_dynamicobjectmapping.py)或[popargs工具。](https://bitbucket.org/cherrypy/cherrypy/src/b0c48210b250/cherrypy/__init__.py#cl-366)他们鲜为人知，不幸的是我找不到适合他们的文档，但他们会做你所追求的。或者，您可以使用 Routes 或选择器调度程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:56:57.567

[CherryPy 3.2 (REST)](http://docs.cherrypy.org/dev/progguide/REST.html)提供了一个用于创建 RESTful 接口的接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T18:25:53.203

是的，您可以动态添加处理程序。只需执行`obj1.child1 = Child(...)`.

# asp.net-mvc-3 - 显示输入文本框视图 Asp.net mvc3

> ID：10702804
> 
> 赞同：0
> 
> 时间：2012-05-22T13:15:53.137
> 
> 标签：asp.net-mvc-3

asp:textbox ID="txtQuantity" runat="server" Visible="true" Text* ***="<%# Eval("quatity","{0:######}")"* *** />

我将如何在 mvc3 视图中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:22:22.977

将此用于具有例如多行属性的灵活文本编辑器：

```
@Html.EditorFor(model => model.propertyName) 
```

您可以简单地添加一个输入框，`Html.TextBoxFor`并`HtmlTextboxFor`始终创建一个`textbox (<input type="text" ...)`. 虽然`EditorFor`查看类型和`meta information`, 并且可以呈现您提供的另一个控件或模板。

```
@Html.TextBoxFor(m => m.propertyName) 
```

PropertyName 指定要在文本框中显示的属性值。

# java - java.xml.Validator：存在命名空间时忽略 xsi:schlemaLocation

> ID：10702806
> 
> 赞同：1
> 
> 时间：2012-05-22T13:16:08.957
> 
> 标签：java, xml, validation, xsd, xml-namespaces

我目前正在尝试解决一个（希望如此）简单的问题，但我想我错过了显而易见的问题。

可以在[gist.github.com上找到自包含的示例代码](https://gist.github.com/4fc5341c1cff57a5475b)

我正在尝试在Javas [Validator Framework](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/api/javax/xml/validation/Validator.html)的帮助下验证包含名称空间和隐式模式位置声明的[XML 文档](https://raw.github.com/gist/29ff06c0720988d3d72a/b3f2deaa13bc2837504764b60b185267ffcaddc8/atomic.xml)。

XML 文件如下所示（为便于阅读而缩短）：

```
<atomic:root xmlns:atomic="qname123" xmlns:xsi="schemainstance" xsi:schemaLocation="atomic http://"> 
```

oXygen 针对这个隐式模式验证这个 XML，但我没有让它在我的代码中工作。

在验证没有命名空间的文档时它可以正常工作，可以在[此 gist](https://gist.github.com/eca35d6fc42ccb20906c/3ed8aa791197b411cd1397270504a978106d4eff)中找到一组示例文档。

所以很明显我遗漏了一些东西，[文档](http://docs.oracle.com/javase/6/docs/api/javax/xml/validation/SchemaFactory.html#newSchema%28%29)指出创建一个不带参数的 newSchema() 会使用文档提供的位置提示。

任何帮助将不胜感激，如果您需要更多信息，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:12:06.827

我自己发现了它，从以下位置更改时效果很好：

```
<root xmlns:atomic="http://www.w3.org/XQueryTest"  xsi:schemaLocation="atomic atomic.xsd" /> 
```

至

```
<root  xmlns:atomic="http://www.w3.org/XQueryTest"  xsi:schemaLocation="http://www.w3.org/XQueryTest atomic.xsd" /> 
```

不管怎么说，还是要谢谢你！

# c# - 将HashTable从MVC 3中的控制器传递给视图

> ID：10702808
> 
> 赞同：0
> 
> 时间：2012-05-22T13:16:16.183
> 
> 标签：c#, asp.net, asp.net-mvc-3

有没有办法将`HashTable`加载的键/值传递给页面视图，然后我可以通过 javascript/Jquery 使用它？

**示例：**我有 HashTable

```
key = Car Model (206 XT), Value = "PEUGEOT", etc............... 
```

因此，在视图中，我有一个包含所有车型的组合，并且在附近，我有一个文本框，其中自动填充了从 javascript 获取的制造商

有没有办法这样做？

（我真的是 MVC 3 中的菜鸟 :()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:33:12.773

有不同的方法来解决这个问题：

如果您不想在不重新加载的情况下动态获取此列表，则可以使用 json 请求（[示例](http://blog.js-development.com/2011/08/posting-json-data-to-aspnet-mvc-3-web.html)）。

**Javascript：**

```
 $.ajax({
       type: "POST",
       url: "/controler/action",
       dataType: "json",
       contentType: "application/json; charset=utf-8",
       data: jsonData,
       success: function (result){

         for(var i=0; i<result.length; i++) {
        var value = result[i];
        alert(i =") "+value);
    }
       } 
```

**控制器（c#）：**

```
 [HttpPost]
   public JsonResult Action()
   {
      return Json(YourTable.ToArray()); 
   } 
```

此外，您可以从 javascript 访问每个 html 元素。因此，您可以将内容放在各种 html 元素中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:06:11.397

您可以在视图中使用以下方法序列化大多数 C# 对象：

```
<script type="text/javascript">
    var hashtable = @Html.Raw(Json.Encode(Model.YourHashtable)
</script> 
```

如果您有一些类似树的具有父/子关系的数据结构，您可能会遇到问题，因为编码器无法解决循环关系。

# vb6 - 如何始终使用 VB 6 检查当前键盘的语言？

> ID：10702817
> 
> 赞同：0
> 
> 时间：2012-05-22T13:16:46.073
> 
> 标签：vb6

> **可能重复：**
> [如何使用 vb6 检查当前键盘的语言？](https://stackoverflow.com/questions/4580767/how-to-check-the-current-keyboards-language-using-vb6)

如何始终使用 VB 6 检查当前键盘的语言？

```
Private Sub Timer1_Timer() 
IF (language = EN) Then 
label1.caption = EN 
else ...... 
End IF
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:47:55.260

使用 WMI 可以很容易地完成：

***功能***

```
Public Function GetPropValue(PropName$) As String
    Dim result$
    result = ""
    Set WMIObjectSet = GetObject("winmgmts:\\.\root\CIMV2").ExecQuery("SELECT *FROM Win32_OperatingSystem")
    For Each WMIObject In WMIObjectSet
        If result <> "" Then
            Exit For
        Else
            For Each WMIProperty In WMIObject.Properties_
                If WMIProperty.Name = PropName Then
                    result = WMIProperty.Value
                    Exit For
                End If
            Next
        End If
    Next
    GetPropValue = result
End Function 
```

**可以这样称呼：**

```
GetPropValue("OSLanguage")
1033 
```

现在它必须使用代码页号检查值。有关详细信息，请访问[此处](http://www.science.co.il/Language/Lo....asp?s=decimal)。

或者

```
Private Declare Function GetThreadLocale Lib "kernel32" () As Long

Private Sub Timer1_Timer() 
IF (GetThreadLocale = 1033) Then 
    label1.caption="EN"
else
    'check other values
End IF
End Sub 
```

# jquery - 在 jQuery 中使用选择器选择元素

> ID：10702818
> 
> 赞同：1
> 
> 时间：2012-05-22T13:16:46.270
> 
> 标签：jquery, list, jquery-selectors, checkbox

我想用 jQuery 选择一个元素。

```
<ul>
    <li><label><input type="checkbox" class="checkbox">checkbox1</label></li>
         <ul class="list">
          <li>lorem</li>
          <li>lorem</li>
          <li>lorem</li>
        </ul>
    <li><label><input type="checkbox" class="checkbox">checkbox2</label></li>
         <ul class="list">
          <li>lorem</li>
          <li>lorem</li>
          <li><lorem/li>
        </ul>
 </ul> 
```

我想用 1 个 jQuery 函数隐藏并显示直接在复选框下方的列表。

```
 $(".list").hide();

$(".checkbox").click(function() {

    if ($(".checkbox").is(":checked"))
    {
        $("????").show('slow');
    }
    else
    { 
        $("????").hide('slow');
    }
}); 
```

这 ？？？？需要是一个选择器，即（仅）选择复选框下的列表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T13:21:28.020

首先，您的 HTML 无效，因为您不能`li`在`ul`. 将您的 HTML 更改为：

```
<ul>
    <li>
        <label><input type="checkbox" class="checkbox">checkbox1</label>
        <ul class="list">
            <li>lorem</li>
            <li>lorem</li>
            <li>lorem</li>
        </ul>
    </li>
    <li>
        <label><input type="checkbox" class="checkbox">checkbox2</label>
        <ul class="list">
            <li>lorem</li>
            <li>lorem</li>
            <li><lorem</li>
        </ul>
    </li>
 </ul> 
```

然后您可以使用最近的父级`li`作为上下文来查找相关的`ul`：

```
$(".list").hide();

$(".checkbox").click(function() {
    var $parentLi = $(this).closest("li");
    if ($(this).is(":checked")) {
        $("ul", $parentLi).show('slow');
    }
    else { 
        $("ul", $parentLi).hide('slow');
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T13:21:53.320

快速回答：

```
$(".checkbox").click(function() {

    if ($(".checkbox").is(":checked"))
    {
        $(this).next('ul').show('slow');
    }
    else
    { 
        $(this).next('ul').hide('slow');
    }
}); 
```

但是正如所指出的，您的 HTML 无效，子`<ul>`s 应该在`<li>`s 内部。

此外，根据复选框的初始可见性/状态，您可以通过使用`$(this).next('ul').toggle('slow');`而不是选中复选框的选中状态来缩短代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T13:29:49.100

[http://jsfiddle.net/Y7WDJ/](http://jsfiddle.net/Y7WDJ/)你想要的一个简单版本。它选择下一个`.list`元素并在单击复选框时切换它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T13:21:13.870

你可以很容易地遍历你的结构

```
$(this).parents('li').children('.list').show('slow'); 
```

如果您阅读有关选择器和遍历的 jquery 文档，可能会有更简洁的方法

# android - 如何创建与案例无关的意图过滤器？

> ID：10702819
> 
> 赞同：1
> 
> 时间：2012-05-22T13:16:47.987
> 
> 标签：android, manifest, intentfilter

我需要为 CPP 文件创建一个意图过滤器。今天我发现有些用户使用小写文件扩展名（*.cpp）而其他用户使用大写变体（* .CPP）。我没有检查的是混合大小写（例如 *.Cpp）。

android:pathPattern 的当前设计是纯粹的“咳咳”。有没有办法使检查案例独立而不将这四个 pathPattern 行扩展到 15 行？

提前谢谢了。

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />

    <category android:name="android.intent.category.BROWSABLE" />
    <category android:name="android.intent.category.DEFAULT" />

    <data android:host="*" />
    <data android:mimeType="*/*" />
    <data android:scheme="file" />

    <data android:pathPattern=".*\\.cpp" />
    <data android:pathPattern=".*\\..*\\.cpp" />
    <data android:pathPattern=".*\\..*\\..*\\.cpp" />
    <data android:pathPattern=".*\\..*\\..*\\..*\\.cpp" />
</intent-filter> 
```

# apache - 利用浏览器缓存的最佳价值？

> ID：10702821
> 
> 赞同：0
> 
> 时间：2012-05-22T13:16:57.863
> 
> 标签：apache, .htaccess, caching, browser-cache

我正在尝试通过更改 .htacces 文件浏览器杠杆值来加速我的网站。我不确定要使用什么值？即一周、一个月或更长时间。我正在设计我的网站，所以做了很多改变。在选择值时我应该考虑到这一点吗？请在下面找到我的代码：

```
 ## EXPIRES CACHING ##
    <IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 year"
    ExpiresByType image/jpeg "access plus 1 year" 
    ExpiresByType image/gif "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/pdf "access plus 1 month"
    ExpiresByType text/x-javascript "access plus 1 month"
    ExpiresByType application/x-shockwave-flash "access plus 1 month"
    ExpiresByType image/x-icon "access plus 1 year"
    ExpiresDefault "access plus 2 days"
    </IfModule>
    ## EXPIRES CACHING ## 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:56:38.693

您的缓存非常激进，因此要让浏览器下载新文件而不是使用缓存的文件，您要么必须指定更多正常值，要么向文件添加版本控制。只是谷歌“缓存破坏”

如果您仍在更改站点，则应该是 1 周上衣。我自己我们大概是 2 天。由于大多数浏览器都支持 304，因此我并没有真正看到使用 expires 的意义。（我确实明白了这一点，但我正确实施它的成本并没有增加你获得的非常小的好处）

# c# - 如何在mvc4中获取当前的显示模式是移动的

> ID：10702825
> 
> 赞同：10
> 
> 时间：2012-05-22T13:17:12.523
> 
> 标签：c#, asp.net-mvc-4

我正在开发移动网络应用程序。我需要让当前的显示模式在控制器中是移动的。

我的问题是：我有 2 个局部视图

```
/Views/Shared/ListItem.cshtml
/Views/Shared/ListItem.mobile.cshtml 
```

当使用**PartialView("ListItem")**时，这是正确的。但我需要将部分视图放在子文件夹中

```
/Views/Shared/Modules/Post/ListItem.cshtml
/Views/Shared/Modules/Post/ListItem.mobile.cshtml 
```

当我使用**PartialView("~/Views/Shared/Modules/Post/ListItem.cshtml")**时，它适用于桌面。当 displaymode 为 mobile 时，`ListItem.mobile.cshtml`不显示。

我的选择是

```
if( CurrentDisplayMode==Mobile){
  PartialView("~/Views/Shared/Modules/Post/ListItem.mobile.cshtml");
else
  PartialView("~/Views/Shared/Modules/Post/ListItem.cshtml"); 
```

如何获得`CurrentDisplayMode`？如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T04:44:45.373

我还需要访问当前的显示模式，以便调整传递给视图的视图模型（移动视图中的信息较少，因此可以从较小的视图模型中显示）。

`ControllerContext.DisplayMode`不能使用，因为它将在操作执行后设置。

所以你必须根据上下文（用户代理、cookie、屏幕大小等）确定显示模式

这是[我在 ASP.NET 论坛上找到的一个不错的技巧](http://forums.asp.net/t/1864999.aspx/1?DisplayMode%20null%20in%20ControllerContext)，它可以让您使用稍后将由框架使用的相同逻辑来确定显示模式：

```
public string GetDisplayModeId()
{
    foreach (var mode in DisplayModeProvider.Instance.Modes)
        if (mode.CanHandleContext(HttpContext))
            return mode.DisplayModeId;

    throw new Exception("No display mode could be found for the current context.");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T14:11:13.143

检查值：HttpContext.GetOverriddenBrowser().IsMobileDevice

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T23:58:40.723

您拥有的最佳选择是检查请求标头用户代理字段，您可以在其中收听 android iPhone 等。虽然这不会给您提供屏幕尺寸，并且如果您不听诺基亚手机或类似的东西，这将不起作用，这是一个解决方案，并允许您像大多数公司一样限制您支持的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T22:28:30.410

我相信 MS 希望你使用[这个](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllercontext.displaymode%28v=vs.108%29.aspx)：

```
controller.ControllerContext.DisplayMode 
```

它有效，但我发现了两个主要问题（截至本文发布之日）：

1.  单元测试。DisplayMode 属性不能手动设置（抛出 NullReferenceException）并且不能被模拟，因为它不是虚拟的。
2.  它不适用于[MvcDonutCaching](http://mvcdonutcaching.codeplex.com/)。DisplayMode 在请求页面的缓存部分时仅返回 NULL。

# jquery - 用户单击链接时如何将页面重置为初始比例？

> ID：10702835
> 
> 赞同：2
> 
> 时间：2012-05-22T13:17:28.283
> 
> 标签：jquery, asp.net-mvc-3, html, mobile, jquery-mobile

我有如下元标记：

当您访问该站点时，它会将其加载到初始比例 0.3，然后用户 cam 缩放到最大 2 并缩小到初始比例 0.3。这些都按预期正常工作。我遇到的唯一问题是，当您放大当前页面并单击当前页面的链接以转到另一个页面时，新页面显示为放大。如何在每次通话时将页面设置为初始比例？

此外，如果您在地址栏中键入 url，则页面显示为初始比例。只有当您单击链接或从菜单栏进入并且您有缩放时，下一页才会显示为缩放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-14T23:31:35.923

我通过首先在站点头部的 scale 元中添加一个 id 解决了这个问题：

```
<meta name="viewport" content="initial-scale=1.0, width=device-width"  id="scale1" /> 
```

然后我在我想要重置比例的链接上添加：

```
$('#scale1').remove();
$('head').append('<meta name="viewport" content="initial-scale=1.0, width=device-width"  id="scale1" />'); 
```

它在 Andriod 上运行良好，但在 iOS 上却不行。也许有人可以提供进一步的反馈。

# windows-phone-7 - 处理不同的网络浏览器和 cookie

> ID：10702837
> 
> 赞同：0
> 
> 时间：2012-05-22T13:17:31.767
> 
> 标签：windows-phone-7

我被告知在我的 WP7 应用程序中做一个只有 webviews 的银行应用程序。第一个视图是身份验证，当它完成并且确定时，webView 会收到我必须获取的 cookie 中的令牌。我的第一个问题是我不知道如何检测它是好的.. 身份验证后 uri 发生了变化，但它是否正常。我不知道如何获取 webView 的内容，当我解雇时导航事件，e.Content 为空..

然后我必须使用 5 个 WebBrowser 将令牌传递给全景视图。我知道我只能通过 httpRequest 添加 cookie，然后使用 NavigateToString 将结果放入 webViews，但如果这样做，cookie 将不会添加到 webbrowser 本身，对吗？所以里面的每个重定向都会出错？

所以我的理解是，我必须在导航事件中插入重定向，执行 httpWebRequest，然后将内容设置为我的网络浏览器？

我想我也会失去我的 CSS 吗？

请帮助我，我觉得我走错了路..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:50:34.480

在您的 WebBrowser 控件上尝试该`Navigated`事件。

例子：

```
webBrowser.Navigated += new EventHandler<System.Windows.Navigation.NavigationEventArgs>(webBrowser_Navigated);

    void webBrowser_Navigated(object sender, System.Windows.Navigation.NavigationEventArgs e)
    {

    } 
```

此外，要读取 cookie，请使用`GetCookies()`方法获取`Navigated`事件中的 cookie 集合。我没有尝试添加 cookie，但您可以尝试使用`Add`您`CookieCollection`从`GetCookies()`. 这应该让您将 cookie 从一个 Web 浏览器“传输”到其他 Web 浏览器。

这是关于此的更多文档：http: [//msdn.microsoft.com/en-us/library/microsoft.phone.controls.webbrowserextensions.getcookies%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.webbrowserextensions.getcookies%28v=vs.92%29.aspx)

希望这可以帮助！

# tsql - T-sql 使用局部变量，如 as 子句

> ID：10702839
> 
> 赞同：0
> 
> 时间：2012-05-22T13:17:38.673
> 
> 标签：tsql, local-variables

我想使用我声明局部变量，例如**as 子句**

我得到去年和今年

```
declare @lastYear varchar(4)=datepart(YEAR,DATEADD(year,-1,GETDATE()));
declare @currentYear varchar(4)=datepart(YEAR,DATEADD(year,0,GETDATE())); 
```

和

我想像上面一样使用，

> ```
> select a.totalCountLy  as @lastYear,
> a.totalCountLy as @currentYear from TableName as a (nolock 
> ```

结果就像

```
2011          2012
------------------
1000          5000
400           1000 
```

有什么建议么。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:22:30.063

这个怎么样，使用动态SQL？

```
declare @lastYear varchar(4)=datepart(YEAR,DATEADD(year,-1,GETDATE()));

declare @sql nvarchar(max) = 
    N'select a.total as [' + convert(nvarchar(24), @lastYear) + N'] from TableName as a'

exec sp_executesql @sql 
```

# android - Android Web 视图未加载 URL

> ID：10702841
> 
> 赞同：1
> 
> 时间：2012-05-22T13:17:53.323
> 
> 标签：android, webview

我在使用以下[URL](http://en.wikipedia.org/wiki/Uniform_resource_locator)加载 webview 时遇到问题：

1.  [http://www.walmart.com/](http://www.walmart.com/)

2.  [http://mobile.walmart.com/](http://mobile.walmart.com/)

但两者都在 webview 中显示一个空白页面。

这里我附上了源代码。我如何摆脱这个问题？

来源：

```
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.Window;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Button;

public class WEBVIEW_ITSELF extends Activity {

    WebView homeWeb;
    Button btnPlay;

    final Activity activity = this;
    static Context mContext;

    public boolean orandationChange = true;

    @Override
    protected void onPause() {
        super.onPause();

        orandationChange = false;
    }

    String urlchange;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
        setContentView(R.layout.i_webview);

        mContext = this;

        homeWeb = (WebView) findViewById(R.id.website_webview);
        homeWeb.getSettings().setJavaScriptEnabled(true);
        homeWeb.getSettings().setSupportZoom(true); // Zoom control on web (You)

        homeWeb.clearHistory();
        homeWeb.clearFormData();
        homeWeb.clearCache(true);

        WebSettings webSettings = homeWeb.getSettings();
        webSettings.setCacheMode(WebSettings.LOAD_NO_CACHE);

        homeWeb.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress) {
                activity.setTitle("Loading...");
                activity.setProgress(progress * 100);

                if (progress == 100)
                    activity.setTitle(R.string.app_name); // To enable this you
                                                          // should not set
                                                          // android:theme="@android:style/Theme.Black.NoTitleBar"
                                                          // in the manifest file.
            }
        });

        homeWeb.setWebViewClient(new WebViewClient() {
            public void onReceivedError(WebView view, int errorCode,
                    String description, String failingUrl) {

                System.out.println(" failingUrl " + failingUrl);
                System.out.println(" description " + description);
                System.out.println(" errorCode " + errorCode);

                // Handle the error
            }

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {

                view.loadUrl(url);

                return false;
            }
        });

        homeWeb.loadUrl("http://mobile.walmart.com/");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T14:50:22.280

我真的不知道为什么（你可以做更多的研究），但把它放进去似乎让它起作用了！

```
webSettings.setDomStorageEnabled(true); 
```

我在这里发现：

[错误/Web 控制台：未捕获的类型错误：无法在 http://m.youtube.com/:844 调用 null 方法“getItem”](https://stackoverflow.com/questions/5822256/error-web-console-uncaught-typeerror-cannot-call-method-getitem-of-null-at-h)

# iphone - ios 5 故事板：浏览详细视图项目而不返回主表

> ID：10702847
> 
> 赞同：1
> 
> 时间：2012-05-22T13:18:07.430
> 
> 标签：iphone, ios5, xcode4, uinavigationcontroller, storyboard

我正在使用情节提要完成以下任务：

我有一个主视图，其中包含一个包含多个项目的表视图。我的主视图嵌入在导航控制器中。我的主视图有一个子类“MasterViewController”

然后我有一个详细的视图。这没有嵌入在导航控制器中。我的详细视图有一个子类“DetailViewController”；我的表格单元格和详细视图之间有一个segue。

单击我的 masterview 表中的项目会推送到 detailview。

然后，我希望能够在我的详细视图中浏览我的主视图表项，而无需返回主视图。我有一个“上一个”和一个“下一个”按钮，但是这些按钮的操作应该是什么？

自 2 周以来，我才开始使用目标 c 和 xcode，所以我仍然是一个菜鸟......感谢您的帮助。

我在某处读到我应该做这样的事情：

```
// Just remove the current 
[self.navigationController popViewControllerAnimated:FALSE];

// Create a new 
DetailViewController* newcontroller = [DetailViewController alloc] init];

// init detailview object ....

[self.navigationController pushViewController:newcontroller animated:FALSE]; 
```

但这段代码只是让我回到主视图......

**更新 ：**

好的，我已经设法在详细视图中导航，但是当单击下一个项目时，我的所有网点都消失了？？？

这是我的“下一步”按钮的代码：

```
 DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:nil bundle:nil];

    // fetch next object and pass it to the new detailviewcontroller
    detailViewController.detailItems = self.detailItems;

    UINavigationController *navController = self.navigationController;

    // Pop this controller and replace with another
    [navController popViewControllerAnimated:NO];

    [navController pushViewController:detailViewController animated:NO]; 
```

执行上面的代码会弹出详细视图并推送到新的详细视图。但是现在我只有一个空的详细视图...在我的 detailview 的 viewdidload 方法中，我设置了一个 NSLOG 来打印我的 detailitems 对象，它可以很好地显示下一个对象，但是我的标签现在都看不到了...

在我的 viewdidload 中，我有以下代码：

```
NSString *itemName = [self.detailItems objectForKey:@"name"];
NSLOG(@"current item : %@",itemName); 
// Correctly shows the current item name 
```

还有以下内容：

```
self.nameLabel.text = itemName;
NSLog(@"name label : %@",self.nameLabel.text); 
```

但是上面的代码仅在我最初从主视图推送到详细视图时显示标签文本。一旦我进入详细视图并单击“下一步”按钮，将打印：

```
name label : (null) 
```

推送到新的详细视图时，似乎我的标签不知何故消失了？？？

请帮忙 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:25:31.513

好的，我自己找到了解决方案...

刚刚更改了 1 行：

```
DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:nil bundle:nil]; 
```

我用下面的代码替换了上面的代码，Bob 是你的叔叔：

```
DetailViewController *detailViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"myDetailView"]; 
```

“myDetailView”是我的详细视图的标识符。

# java - JApplet 多线程

> ID：10702865
> 
> 赞同：2
> 
> 时间：2012-05-22T13:19:11.250
> 
> 标签：java, multithreading, runnable, japplet

我尝试从一个类中创建两个移动对象。我想控制它们，但 JApplet 没有用线程打开。

我的代码：

```
import java.awt.Graphics;
import javax.swing.JApplet;

class RunnableThread extends JApplet implements Runnable{

    Thread runner;
    String name;

    public RunnableThread(String namex){
        name=namex;
    }    

    public void init(){
        setSize(200,300);
    }

    public void paint(Graphics g){
        g.drawLine(20, 20, 50, 50);
    }

    public void run(){  
        System.out.println("test"+name);            
    }      
}

import java.util.logging.Level;
import java.util.logging.Logger;

public class RunnableTest{    
    public static void main(String args[]){
    RunnableThread bt1=new RunnableThread("test 1"); 
    RunnableThread bt2=new RunnableThread("test 2");     
    Thread btt1=new Thread(bt1);
    Thread btt2=new Thread(bt2);
    btt2.start();
    btt1.start();    
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:33:10.427

您不能通过 main 方法运行 JApplet。在您尝试在 applet 中执行后台线程之前（可以这样做），请先阅读 applet 教程以了解如何创建和运行 applet。

当您让您的简单小程序正常工作并想要回到这一点时，不要让您的 JApplet 类实现 Runnable，而是将该责任委托给另一个类。

请从这里开始：[Applet 入门](http://docs.oracle.com/javase/tutorial/deployment/applet/getStarted.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:40:40.310

您不能以这种方式实例化 JApplet。一个小程序可以在没有 main 方法的情况下运行，而不是你如何这样做。有关如何将小程序作为小程序和应用程序运行的更用户友好的指南，请阅读[本教程](http://www.dreamincode.net/forums/topic/28410-application-to-japplet-and-reverse/)，它非常用户友好，并且很好地解释了小程序。

# interface - 如何多播发送到所有网络接口？

> ID：10702870
> 
> 赞同：1
> 
> 时间：2012-05-22T13:19:22.983
> 
> 标签：interface, udp, send, multicast

假设我有 N 个支持多播的网络接口。我打算绑定 N 个 UDP 套接字，每个接口一个，并发送到同一个多播 ip/端口。还有比这更直接/更有效的方法吗？

接收时，我知道您可以使用同一个套接字侦听多个接口，但是不能使用单个套接字完成发送，或者可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-19T22:07:23.660

另一种方法是使用[IP_MULTICAST_IF](http://www.tldp.org/HOWTO/Multicast-HOWTO-6.html)更改用于在套接字上发送多播的接口。使用这种方法，您将调用 send N 次并在每次发送之前更改发送接口。这将允许您减少正在使用的套接字数量，但不会减少发送调用的数量。

多播发送行为符合并引导网络应用程序程序员遵循[鲁棒性原则/Postel 定律](https://en.wikipedia.org/wiki/Robustness_principle)：

> 在你所做的事情上保持保守，在你从别人那里接受的事情上保持自由（通常被改写为“在你发送的事情上保持保守，在你接受的事情上保持自由”）。

我的意思是套接字 API 和行为使得从单个套接字上的多个接口接收（自由接收）变得非常容易，但不允许从单个套接字发送**多播和广播**所有接口，从而迫使程序员非常有意识地编写应用程序发送多个接口（保守发送）

# json - as3corelib 序列化出错

> ID：10702884
> 
> 赞同：0
> 
> 时间：2012-05-22T13:19:57.720
> 
> 标签：json, actionscript-3, flash

我收到错误

> 错误 #2099：加载对象未充分加载以提供此信息

当我尝试使用 as3corelib 将对象编码为 JSON 时。我成功地编码了一些没有父或子的值对象，所以我知道库可以工作，并且该问题可能与 addChild 或类似的东西有关。那只是猜测。

板像这样添加到阶段：

```
stage.addChild(board); 
```

当我不将板添加到舞台并尝试对其进行序列化时，我会收到不同的错误：

```
undefined
at XML/http://adobe.com/AS3/2006/builtin::copy()
at global/describeTraits()
at global/avmplus::describeType()
at global/flash.utils::describeType()
    ... 
```

板级：

```
public class Board extends Sprite
{
    public var board:Array;
    public var blockColor:uint = 0xE3E3E3;
    public var blockLength:uint

    public function Board(blockLength:uint)
    {
        super();
        x = 0;
        y = 0;
        this.blockLength = blockLength;
        //buttonMode = true;
        // Setting up two dim array
        board = new Array(10);
        for (var k:int = 0; k < board.length; k++) 
        {
            board[k] = new Array(10);
        }

        for (var i:int = 0; i < 10; ++i) 
        { 
            for(var j:int = 0; j < 10; ++j)
            {
                var block:Block = new Block(i*blockLength, j*blockLength);  
                board[i][j] = block;
                this.addChild(block); // here I add children
                block.drawBlock(blockLength, blockColor);
                block.addEventListener(MouseEvent.CLICK, blockClicked);
            }
        }           
    }

    ....

} 
```

}

这是 Block 的代码，实际上什么都没有。

```
public class Block extends Sprite
{

    public var cos:int = 5; // test

    public function Block(x:uint, y:uint)
    {
        ...
    }

    public function drawBlock(length:uint, color:uint):void
    {
        ...
    }
} 
```

任何线索为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:37:34.903

我建议您不要尝试序列化任何形式的`DisplayObject`; 相反，您应该只序列化视图使用的基础数据（属性）；很难从上面的代码中给你一个准确的答案，但请考虑以下几点：

```
// Simple Model object which represents the BlockView's underlying data.
public class BlockViewModel {
    public var x : Number;
    public var y : Number;
}

// Renders the BlockViewModel on screen.
public class BlockView extends Sprite {
    public var position : BlockViewModel;

    // Constructor requires a BlockViewModel object.
    public function BlockView(position : BlockViewModel) {
        this.position = position;
        draw();
        reposition();
    }

    private function draw() : void {
        // Omitted...
    }

    // Update the block's position based on the model.
    private function reposition() : void {
        this.x = this.position.x;
        this.y = this.position.y;
    }

    // Setter for the block's current position.
    public function setX(value : Number) : void {
        this.position.x = value;
        reposition();
    }
} 
```

对于上面的示例，您只需`BlockViewModel`在要保存状态时序列化对象，例如：

```
var serailizedBlockData : String = JSON.encode(blockView.position); 
```

然后，您可以通过反序列化数据重新创建一个新的 BlockView：

```
// Convert from JSON -> Object.
var blockData : Object = JSON.decode(serializedBlockData);

// Create and populate a BlockViewModel with the deserialized data.
var position : BlockViewModel = new BlockViewModel();
position.x = blockData.x;
position.y = blockData.y;

// Create a new view using the serialized data.
var blockView = new BlockView(position); 
```

您可以通过将对象构造/填充逻辑移动到[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)中来进一步扩展它，以帮助分离逻辑。

# winforms - 遍历 Windows 窗体/VC++ 中的单选按钮

> ID：10702886
> 
> 赞同：0
> 
> 时间：2012-05-22T13:19:58.670
> 
> 标签：winforms, visual-c++, radio-button, iteration

我在 Windows 窗体中有 10 个单选按钮，其设计名称`temp1RadioButton`为. 我想遍历所有这些并更改它们的每个外观名称。如何在 VC++ 中实现这一点？请注意，我以拖放样式创建了它们。此外，我所拥有的只是本机生成的 Windows 窗体代码，所以我不把它放在这里。`temp10RadioButton``temp1``temp10`

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:33:40.010

您指的是 Windows 窗体。您的应用程序是用 C++ 编写的还是 C++ 的托管扩展？

# java - SWIG - 使用 cygwin 包含现有的静态 C++ 库 (.lib)

> ID：10702890
> 
> 赞同：0
> 
> 时间：2012-05-22T13:20:06.470
> 
> 标签：java, c++, cygwin, swig

我目前正在开发一个 Java 项目，该项目将被添加到现有的更大系统中。与系统的通信是基于 XML 通过网络连接进行的。

问题是这个系统是用 C++ 编写的，并且他们提供给我们以便与系统通信的库是一个基于 C++ 的静态库 ( `.lib`)。我们有该库的头文件，因此我能够`.java`使用 SWIG 生成相应的包装文件。

现在我面临的问题是如何在我的中包含这个静态库`.dll`，它将用于接收来自 Java 程序的 JNI 调用。

我需要如何调用 gcc 来生成工作的 dll？甚至可以在不访问图书馆资源的情​​况下做到这一点吗？

在此先感谢您提供任何有用的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T09:18:53.247

这绝对是可能的 - 当您使用 SWIG 生成的包装器编译和链接 DLL 时，您需要执行以下操作：

```
g++ -Wall -Wextra -shared -o test.dll test_wrap.cxx -Wl,--whole-archive some.lib 
```

这里的关键是您将 SWIG 包装代码生成的 DLL 与您拥有的 .lib 链接起来。（我没有太多使用 cygwin，但您可能还想`-mno-cygwin`在此实例中添加编译器标志，具体取决于 .lib 的构建方式）

# ruby - 如何正确写入 CSV 文件

> ID：10702895
> 
> 赞同：18
> 
> 时间：2012-05-22T13:20:12.327
> 
> 标签：ruby, csv

我正在使用 ruby​​ 1.9.2 并且还使用它的 csv 库。我想正确地写在 csv 中

像这样

```
name,country_code,destination,code
Afghanistan,93,Bamain,51
Afghanistan,93,Bamain,52
Afghanistan,93,Bamain,53
Afghanistan,93,Parwan,91 
```

我的代码是这个

```
def export_data
  @coun = Country.all(:limit => 10)
  header = "name,country_code,destination,code"
  file = "my_file.csv"
  File.open(file, "w") do |csv|
    csv << header
    @coun.each do |c|
      csv << [c.name, c.country_code, c.user_id, c.subscriber_id]       
      # How puts line break here
    end
  end
  send_file(file)
end 
```

我在上面提到了如何在 CSV 文件中将换行符放在那里并且也省略了这个叹息

覆盖 CSV"[]" 中的每一行

```
 Like   ["Finland",1,1,2334] 
```

提前致谢..

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-05-22T13:49:18.797

我认为一般的 CSV 编写器对你来说已经足够了：

```
require 'csv'
file = "my_file.csv"
CSV.open( file, 'w' ) do |writer|
  @coun.each do |c|
    writer << [c.name, c.country_code, c.user_id, c.subscriber_id]
  end
end 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-05-22T13:46:29.703

```
csv << "\n" 
```

Stackoverflow 要求答案中包含 30 个字符，但我不知道该说些什么。

# c# - ItemChecked 事件处理程序

> ID：10702897
> 
> 赞同：2
> 
> 时间：2012-05-22T13:20:24.807
> 
> 标签：c#, events, checkedlistbox

我正在使用以下代码将 CheckedListBox 中的选中项目数限制为 1：

```
 private void checkedListBox1_ItemCheck(object sender, ItemCheckEventArgs e)
    {
        if (checkedListBox1.CheckedItems.Count == 1)
        {
            Boolean isCheckedItemBeingUnchecked = (e.CurrentValue == CheckState.Checked);
            if (isCheckedItemBeingUnchecked)
            {
                e.NewValue = CheckState.Checked;
            }
            else
            {
                Int32 checkedItemIndex = checkedListBox1.CheckedIndices[0];
                checkedListBox1.ItemCheck -= checkedListBox1_ItemCheck;
                checkedListBox1.SetItemChecked(checkedItemIndex, false);
                checkedListBox1.ItemCheck += checkedListBox1_ItemCheck;
            }
            return;
        }
    } 
```

但有时我需要清除所有检查项目。我正在使用下面的代码来尝试这样做，但之前的事件阻止了它的工作。我怎样才能做到这一点？谢谢。

```
 public void ClearChecked()
    {
        foreach (int checkedItemIndex in checkedListBox1.CheckedIndices)
        {
            checkedListBox1.SetItemChecked(checkedItemIndex, false);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:24:35.633

您可以创建一个新变量来指示何时应忽略 ItemCheck 事件：

```
private shouldIgnoreCheckEvent;

public void ClearChecked()
{
    this.shouldIgnoreCheckEvent = true;

    foreach (int checkedItemIndex in checkedListBox1.CheckedIndices)
    {
        checkedListBox1.SetItemChecked(checkedItemIndex, false);
    }

    this.shouldIgnoreCheckEvent = false;
} 
```

并更新您的 ItemCheck 方法以检查它是否应该被忽略：

```
private void checkedListBox1_ItemCheck(object sender, ItemCheckEventArgs e)
{
    if (!this.shouldIgnoreCheckEvent && checkedListBox1.CheckedItems.Count == 1)
    {
        Boolean isCheckedItemBeingUnchecked = (e.CurrentValue == CheckState.Checked);
        if (isCheckedItemBeingUnchecked)
        {
            e.NewValue = CheckState.Checked;
        }
        else
        {
            Int32 checkedItemIndex = checkedListBox1.CheckedIndices[0];
            checkedListBox1.ItemCheck -= checkedListBox1_ItemCheck;
            checkedListBox1.SetItemChecked(checkedItemIndex, false);
            checkedListBox1.ItemCheck += checkedListBox1_ItemCheck;
        }
        return;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T13:28:17.913

这应该清除所有选中的项目：

```
 public void UncheckCheckBoxItems(CheckBoxList cbl)
 {
     foreach (ListItem item in cbl.Items)
     {
         item.Selected = false;
     }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T13:34:56.310

最简单的方法是断开 ItemChecked 事件处理程序，执行取消检查，然后重新连接事件处理程序。这样，当您调用 SetItemChecked 时，不会触发任何 ItemChecked 事件，并且您不需要任何额外的代码来控制您的事件处理程序。刚刚注意到您已经在 ItemCheck 事件中使用了这种模式。

```
public void ClearChecked()     
{         
     try
     {
         checkedListBox1.ItemCheck -= checkedListBox1_ItemCheck;
         foreach (int checkedItemIndex in checkedListBox1.CheckedIndices)         
         {             
             checkedListBox1.SetItemChecked(checkedItemIndex, false);         
         }
     }
     finally
     {
         checkedListBox1.ItemCheck += checkedListBox1_ItemCheck;

     }     
} 
```

try/finally 很重要，因为如果出现异常，您的事件处理程序将重新连接。

# android - 应用内计费应用程序的测试

> ID：10702900
> 
> 赞同：0
> 
> 时间：2012-05-22T13:20:50.063
> 
> 标签：android, in-app-billing

我已经为应用内计费做了一个测试应用程序，为了测试应用内计费的功能，我必须在市场上上传应用程序（而不是发布）还是我可以直接测试它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:46:03.680

1.  如果您正在使用，`android.test.purchased`则无需上传您的 APK。

2.  如果您使用自己的产品 ID，那么您必须上传 APK，还必须添加与您在代码中提到的名称相同的产品。您必须只发布产品（而不是应用程序）。请注意，您将无法从您的市场资料 ID 购买产品。您必须设置一个测试帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:55:25.050

这里有一个很好的分步指南来实现应用内计费：http: [//developer.android.com/guide/market/billing/billing_integrate.html](http://developer.android.com/guide/market/billing/billing_integrate.html)但实际上你必须寻找一些答案来回答你的问题.

您必须将应用程序上传到市场，但您不必发布它。您还必须创建应用程序附加功能（购买的），并且必须发布它们。

# c# - 自定义文本框更改了 Windows 7 的位置

> ID：10702907
> 
> 赞同：0
> 
> 时间：2012-05-22T13:21:24.520
> 
> 标签：c#, .net, winforms, windows-7, custom-controls

我在 win 7 .net 3.5 中制作了 windows 窗体应用程序，所有自定义文本框都提供了硬编码的位置，在所有 xp 系统中一切顺利，甚至在具有 .net 4（仅限客户端配置文件）的 win 7 系统中，但对于具有.net 4.0（客户端配置文件和扩展）所有自定义文本框都位于其标签的上方和左侧，显示出一种模式，就好像它们没有与表单锚定一样。

但是，当我在 .net 3.5 中调整表单大小时，文本框和标签不会移动，因为它们没有按预期锚定在它们的位置。

任何想法发生了什么？

![在此处输入图像描述](../Images/8ba9f21ae82a6c313213f24e5c61bd2d.png)

`Edit 1:`我刚刚在具有 .Net 4 Client Profile & Extended 的系统上尝试了该程序，它运行良好，所以在拍摄上述图像的系统中肯定存在错误，也许是一些屏幕分辨率问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:05:00.263

/facepalm 对不起，我的系统上的 windows 字体设置为中等，我的应用程序希望它很小。

# wpf - WPF ContextMenu 访问选定的行

> ID：10702908
> 
> 赞同：1
> 
> 时间：2012-05-22T13:21:26.070
> 
> 标签：wpf, contextmenu

我有一个 WPF 应用程序，其中有`ListView`一个`GridView`。`ContextMenu`当您右键单击网格中的项目时，它有一个。我想知道如何访问从中选择的行`ContextMenu`并以编程方式访问该行。我的目标是删除那行数据。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:37:27.103

这将使用[WPF 命令绑定](http://msdn.microsoft.com/en-us/library/ms752308.aspx)工作......

```
 <ListView>
        <!-- .... -->
        <ListView.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Remove Item" Command="{Binding RemoveItem}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}},Path=PlacementTarget.SelectedItem}" Icon="{StaticResource deleteIcon}"/>
            </DataGrid.ContextMenu>
        </ListView.ContextMenu>
    </ListView> 
```

要创建*自定义命令绑定*，请参阅[此 SO 帖子](https://stackoverflow.com/a/601415/175679)。

# sql - 在文本和数字列中排序 vb.net 自然排序

> ID：10702910
> 
> 赞同：1
> 
> 时间：2012-05-22T13:21:28.607
> 
> 标签：sql, vb.net, sorting, natural-sort

我在一列excel中有一个文本和数字数据。数据为 1,2,3,A,B,C,D,10,11,12。我想通过 SQL 对这些进行排序。我想按以下顺序获取数据 1,2,3,10,11,12,A,B,C,D。

所以请任何人建议我如何做到这一点。 ![在此处输入图像描述](../Images/c50c599f0fffd8d4eb89fd0bf3d82d2f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:03:21.443

因为 SQL 不以任何顺序存储项目，所以 order by 子句可用于以所需的特定顺序返回项目。

如果您已经在使用 order_by 子句，但顺序错误，则返回的顺序取决于排序规则：http: [//msdn.microsoft.com/en-us/library/ms184391.aspx](http://msdn.microsoft.com/en-us/library/ms184391.aspx)

您希望您的列表按升序排序，因此您可以使用以下内容：

```
Select * from table ORDER BY order_by_expression
COLLATE SQL_Latin1_General_Cp437_BIN Asc 
```

希望这有效！

# asp.net-mvc-3 - 在 mvc 中对远程验证的成功响应做一些事情

> ID：10702914
> 
> 赞同：10
> 
> 时间：2012-05-22T13:21:45.610
> 
> 标签：asp.net-mvc-3, model-view-controller

我在注册我的 asp.net mvc 3 应用程序（C#）时使用远程验证来检查用户名的可用性。

我将 MVC 远程属性验证用作：

```
[Remote("IsUserNameAvailable", "User")]
public string UserName { get; set; } 
```

当我返回这个时：

```
return Json(true, JsonRequestBehavior.AllowGet); 
```

然后我想执行诸如设置隐藏字段值之类的操作，该值是从操作返回或显示绿色图标图像。而且我还想返回真实的ID。

如何实现这个东西？

总之，我想做一些关于成功的事情。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-22T16:59:25.337

实现此目的的一种方法是从验证操作中添加自定义 HTTP 响应标头：

```
public ActionResult IsUserNameAvailable(string username)
{
    if (IsValid(username))
    {
        // add the id that you want to communicate to the client
        // in case of validation success as a custom HTTP header
        Response.AddHeader("X-ID", "123");
        return Json(true, JsonRequestBehavior.AllowGet);
    }

    return Json("The username is invalid", JsonRequestBehavior.AllowGet);
} 
```

现在在客户端上，我们显然有一个标准表单和一个用户名输入字段：

```
@model MyViewModel
@using (Html.BeginForm())
{
    @Html.EditorFor(x => x.UserName)
    @Html.ValidationMessageFor(x => x.UserName)
    <button type="submit">OK</button>
} 
```

现在拼图的最后一块是将`complete`处理程序附加到`remote`用户名字段上的规则：

```
$(function () {
    $('#UserName').rules().remote.complete = function (xhr) {
        if (xhr.status == 200 && xhr.responseText === 'true') {
            // validation succeeded => we fetch the id that
            // was sent from the server
            var id = xhr.getResponseHeader('X-ID');

            // and of course we do something useful with this id
            alert(id);
        }
    };
}); 
```

# ruby - 红宝石的持续时间

> ID：10702915
> 
> 赞同：1
> 
> 时间：2012-05-22T13:21:48.237
> 
> 标签：ruby, ruby-on-rails-3

在 Ruby 中表示持续时间的最佳类是什么？

我正在编写一个具有`distance`和`duration`属性的运行模型。

如果我想使用分钟和秒，最指示的类是`time`. 然而，它不仅有分钟和秒，还有日、月等。在 Ruby 中存储持续时间的正确方法是什么？

稍后我需要对其进行计算，例如，平均速度 = 持续时间/距离，结果应该是分钟格式，即 5'30"，而不是 5.50 分钟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:27:28.713

我使用这样的东西来计算`Resque`作业运行的时间：

```
start = Time.now
#code goes here
finish = Time.now
seconds = sprintf("%0.02f", (finish - start) % 60)
minutes = (((finish - start) / 60) % 60).to_i 
```

在这个例子中，我会达到百分之一秒，但如果需要，你可以调整它，如果你愿意，可能会`sprintf`一起摆脱所有这些。那基本上会给你留下`seconds = (finish - start) % 60` 那么一个简单的`puts #{minutes}'#{seconds}"`东西会给你你想要的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:59:52.197

`Time.now.to_f`, `Time.now.to_i`, `Time.now.to_r`给您自 Epoch (1970) 以来的秒数，因此您只需减去两个值即可找到持续时间。

**更新**如果您需要纳秒级分辨率，显式转换和@Eugene 的建议之间的唯一区别可能是精确控制。

# objective-c - Objective-C - 生成源代码报告

> ID：10702919
> 
> 赞同：0
> 
> 时间：2012-05-22T13:21:58.410
> 
> 标签：objective-c, ios, parsing

我面临以下问题：我需要为 Objective-C 源代码（为 iOS 编写）生成详细报告。我需要能够显示以下内容：

**班级报告：**
班级名称 | 文件位置 | 方法数
ClassA | /my/path/ClassA.m | 7
B 类 | /my/path/ClassB.m | 12
....

**方法报告：**
方法名称 | 班级名称 | 文件定位
方法1 | 甲级 | /my/path/ClassA.m
方法2 | 甲级 | /my/path/ClassA.m
....

而且我还需要能够显示一些其他报告，但此时我有兴趣从某个地方开始。

*请注意：*
- 目前我不需要显示行数/复杂性/等。
- 与上述类似的报告就足够了（只要它包含上述信息，我会非常高兴；我可以解析信息并创建所需的报告）
- 我已经查看了 Doxygen 及其 xml 输出，但样本很少我运行的项目我没有得到 xml 文档中列出的所有方法（即使它们在文件中）。我必须调查为什么这些方法没有出现。

提前感谢所有答案/提示/评论....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:35:17.000

根据您对 Java 的熟练程度，您可能想看看[JavaCC](http://javacc.java.net/)。它还具有用于解析 Objective-C 2.0 的语法。

[http://lists.apple.com/archives/java-dev/2010/Sep/msg00097.html](http://lists.apple.com/archives/java-dev/2010/Sep/msg00097.html)

我承认我几乎没有打开语法来看看它有多复杂/简单。它看起来井井有条，但我自己没有尝试过。一般来说，JavaCC 乍一看有点陡峭，但经过几个小时的玩弄，您应该很快就能找到自己的分数。一旦你得到它，解析任何语言都变得非常容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:12:13.013

我们的[源代码搜索引擎](http://www.semanticdesigns.com/Products/SearchEngine)可能会帮助您很好地做到这一点。

SCSE 通常以交互方式用于搜索大型源代码并检查代码。它理解它正在搜索的语言的元素，并且它有一个针对 Objective C 的选项。因为它理解语言语法，所以它不会被空白、注释或带有有趣内容的字符串所迷惑。它还可以将搜索结果记录为文本日志和/或命中和位置（文件、行）的 XML 文件。

可以在批处理脚本中使用它来进行搜索和捕获结果。

为了做你想做的事，你会给 SCSE 提供以下查询并将结果记录到 XML 中（请原谅我的 ObjectiveC 语法，我不是这样的程序员）：

```
 '@implementation' I     -- this would find class declarations, bind I and capture line #
    '@interface' I  -- if you wanted these, too
    '@end'   -- would find end-of-class declarations
    '+' '(' I ')' '{'  -- find method declations and bind name
    '-' '(' I ')' '{'  -- find static method declarations 
```

现在您有了一组描述这些元素所在位置的 XML 文件。整合命中为您提供了类和内容的大纲模型，并且根据这些信息计算您的值应该非常简单。

如果您想要更准确的答案，我们的[DMS 软件再造工具包](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)有一个[完整的 Objective C 解析器](http://www.semanticdesigns.com/Products/FrontEnds/ObjectiveCFrontEnd.html)。此信息很容易从解析器生成的 AST 中提取。

# asp.net - 检查页面上的帖子

> ID：10702921
> 
> 赞同：1
> 
> 时间：2012-05-22T13:22:00.010
> 
> 标签：asp.net

我有页面和几个按钮。其中一个应该在此页面上发布数据，另一个具有也重新加载页面但不发布数据的事件。问题：如何检查事件页面加载是否已发布数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:28:42.500

这是一种检查导致回发的控件的方法

```
string ctrlname = page.Request.Params.Get("__EVENTTARGET");
if (ctrlname != null && ctrlname != string.Empty)
{
    return this.Page.FindControl(ctrlname);
} 
```

[http://ryanfarley.com/blog/archive/2005/03/11/1886.aspx](http://ryanfarley.com/blog/archive/2005/03/11/1886.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:26:22.020

您可以使用[Page.IsPostBack](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback%28v=vs.100%29.aspx)属性：

```
if (IsPostBack) { ... } 
```

# c++ - c++二维数组定义

> ID：10702933
> 
> 赞同：1
> 
> 时间：2012-05-22T13:22:24.213
> 
> 标签：c++

下面有什么问题

```
int data[2][2] = { {1,1}, {2,2}};
int sum = sum(data, 2); 
```

总和定义为

```
int sum(int **data, int rows); 
```

data 包含 的地址`data[0]`，因此可以将其视为指针。将`*data`我引向值，它是另一个类型的数组`int`。这个另一个数组应该被视为指向第一个元素的指针。因此，为什么编译器会抱怨 int 的参数`**data`？

我收到如下所示的编译器错误。我理解这个错误，但我的问题是为什么`**data`不可接受。

```
error: cannot convert int (*)[2] to int** for argument 1 to int sum(int**, int) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:33:58.177

无论数组是一维还是多维，都只能转换为指向第一个元素的指针，而*不能*转换为指向指针数组的指针。

要了解原因，请分析数组在内存中的布局方式。

```
int data[3]
0.......4.......8...... (assume sizeof(int)==4)
data[0] data[1] data[2]
^ &data[0]

int data[3][2]
0..........4..........8..........12.........16.........20........
data[0][0] data[0][1] data[1][0] data[1][1] data[2][0] data[2][1]
^ &data[0][0] 
```

所有元素总是线性布局，因此每个数组（一维或多维）都可以表示为指向第一个元素 ( `arr[0][0]...[0]`) 的指针，只有这样。多维数组不能表示为指向指针数组的指针，因为这些指针数组在任何地方都不存在。

维度只是用于转换为地址（`arr[i][j]`变成`*(array_memory + i*H + j)`）的编译时提示。指向指针的指针与数组的结构完全不同；索引它在语法上看起来相同，但它会导致完全不同的事情发生（`ppi[i][j]`变成`*(*(ppi + i) + j)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T13:27:50.570

您应该在参数定义中包含数组的大小。

```
 int sum(int data[2][2], int rows); 
```

注意：如果它是一个动态数组，那么你之前所做的就是对的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T13:40:02.420

可能这有帮助：

```
int sum(int *i, int rows) {
    cout << *i << *(i+1) << *(i+2) << *(i+3);
    return 0;
}

int main() {
    int data[2][2] = { {1,1}, {2,2}};
    int sum1 = sum(data[0], 2);

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T13:33:48.153

`int ** data`是一个指向一个指针的指针`int`。

将数据传递给 sums 第一个参数实际上只是将 a 传递`int*`给它，这与`int **`.

此外，一旦您进入`sum()`，它不知道`int **data`指向二维数组，它只知道它是指向指向`int`...的指针的指针

第一次取消引用数据会给你一个指向`int`. 第二次取消引用数据会为您提供`int`.

您需要将接口更改为`sum()`函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T13:33:59.257

int data[2][2] // 它基本上是 4 个值的数组。它不是数组数组。
维度只是解释编译器如何访问一个值。

假设你有：

```
data[R][C]  
data[X][Y] == *(&data)[X*C + Y] 
```

按照这个解释，你应该定义你的功能：

```
int sum(int *data, int rows); 
```

如果你想展示它的作用，我可以帮助你正确使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T16:09:13.503

数组名到指针的衰减只发生一次，所以你得到的是一个指针，而不是一个指向指针的指针。

AC/C++ 数组是数据元素的连续分配。数组数组仍然是元素的连续分配——只是元素更大。这就是您的错误消息“ `cannot convert int (*)[2] to int**`”所说的。

另一种看待它的方式：双重取消引用仅在它指向某处的指针数组时才有效。但是，C/C++ 不会为您做到这一点。您需要自己分配和填写一份。

该`int (*)[2]`类型允许您以`data[i][j]`. 如果您想以这种方式访问​​数组，则需要将该类型传播到任何使用它的地方。

# graphics - W. Mathematica--图形--制作球体

> ID：10702938
> 
> 赞同：0
> 
> 时间：2012-05-22T13:22:37.973
> 
> 标签：graphics, 3d, wolfram-mathematica

我想在 Wolfram Mathematica 中编写一个程序 我们有两个列表：

```
list1 = {Sphere[{x1}],Sphere[{x2}],Sphere[{x3}],Sphere[{x4}],Sphere[{x5}]}
list2 = {Sphere[{y1}],Sphere[{y2}],Sphere[{y3}],Sphere[{y4}],Sphere[{y5}]} 
```

而且我需要通过圆柱体在它们之间“绘制”键，因此我们必须有

```
list3={Cylinder[{x1,y1}],Cylinder[{x2,y2}],Cylinder[{x3,y3}],Cylinder[{x4,y4}],Cylinder[{x5,y5}]} 
```

如何使用任何列表自动执行此操作： list1 和 list2 此类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:01:09.343

[GraphPlot3D](http://reference.wolfram.com/mathematica/ref/GraphPlot3D.html)的文档中有一个很好的例子，它看起来好像在做你想做的事情，尽管不完全是你解决问题的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T14:09:39.283

您没有指定圆柱的半径，我使用的是相对于第一个列表的半径。

```
centers1 = {{1, 1, 1}, {2, 2, 2}, {3, 3, 3}};
radii1 = {0.2, 0.3, 0.4};
centers2 = {{1, -1, 1}, {2, -2, 2}, {3, -3, 3}};
radii2 = {0.3, 0.3, 0.3};

list1 = Sphere[Sequence @@ #] & /@ Transpose[{centers1, radii1};
list2 = Sphere[Sequence @@ #] & /@ Transpose[{centers2, radii2}];

Show[Graphics3D[{list1, list2, Cylinder[Sequence @@ #] & /@ Transpose[{Transpose[{centers1, centers2}], radii1}]}]] 
```

![图形3d](../Images/a63ec51d817926839c98684a64f08d7e.png)

# audio - 音符合成、谐波（小提琴、钢琴、吉他、贝司）、频率、MIDI

> ID：10702942
> 
> 赞同：7
> 
> 时间：2012-05-22T13:22:50.450
> 
> 标签：audio, instruments, time-frequency

我想知道，笔记是如何构建的。以乐器（小提琴或钢琴）为例，Note LA4 (A4) 具有 440Hz 的主（或中心）频率 FC，具有特定幅度 AC，但它还必须具有其他频率（谐波？） FH，具有其他幅度 AH。

谐波具有取决于主频率的其他频率，其幅度（几乎）小于主频率的幅度。

**成型（建筑）注释**

我想知道笔记是如何形成（建立）的（不考虑时间）。

示例：A4 = AC(FC) + AH1(FH1)+ AH2(FH2) + AH3(FH3) + AH4(FH4)....AHn(FHn) 也许，FH1 = 2*FC，FH2 = 3*FC， FH3 = 4*FC，以此类推....

**乐器之间的比较（小提琴和钢琴）**

对于钢琴，The Note LA4 (A4) 的主频 FC 为 440Hz，并且 Maybe，FC(Piano) = FC(Violin), FH1(Piano) = FH1(Violin), FH2(Piano) = FH2(Violin), and很快....

但是，AC（钢琴）！= AC（小提琴），AH1（钢琴）！= AH1（小提琴），AH2（钢琴）！= AH2（小提琴），等等......

我的问题的例子是： [http ://www.phys.unsw.edu.au/jw/sound.spectrum.html](http://www.phys.unsw.edu.au/jw/sound.spectrum.html)

我想演奏这个音符避免 MIDI 格式，这可以在 Java/C#（或其他语言编程）中实现，然后更多地控制我的声音。

谢谢你。

安娜

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-16T20:26:53.217

我有这个...

```
 int iTone = 40;   //Tone to be interpreted
    iSmplRate = 32000;  //Sample Rate
    int NumBytesPerSample = 16;  // 8 or 16
    int NumChannels = 2;  //1 Mono, 2 Stereo
    double Duration = 6.5; //Seconds performing
    Short sAmplit = 1200;
    int iNumSmpl = (int)(SampleRate*Duration);
    NumTotalBytes = (int)(SampleRate*Duration*NumBytesPerSample*NumChannels);
    ByteBuffer bbWav = ByteBuffer.allocate(NumTotalBytes);

    double dMaxInstr = (double)Short.MIN_VALUE;
    double dMinInstr = (double)Short.MAX_VALUE;

    //Amplitude for violin's armonics 
    double[] violAmps = {1.0, 0.286699025, 0.150079537, 0.042909002, 
                        0.203797365, 0.229228698, 0.156931925, 
                        0.115470898, 0.0, 0.097401803, 0.087653465, 
                        0.052331036, 0.052922462, 0.038850593, 
                        0.053554676, 0.053697434, 0.022270261, 
                        0.013072562, 0.008585879, 0.005771505,
                        0.004343925, 0.002141371, 0.005343231, 
                        0.000530244, 0.004711017, 0.009014153};

    //Amplitude for piano's armonics 
    double[] pianAmps = {1.0, 0.399064778, 0.229404484, 0.151836061,
                        0.196754229, 0.093742264, 0.060871957,
                        0.138605419, 0.010535002, 0.071021868,
                        0.029954614, 0.051299684, 0.055948288,
                        0.066208224, 0.010067391, 0.00753679,
                        0.008196947, 0.012955577, 0.007316738,
                        0.006216476, 0.005116215, 0.006243983,
                        0.002860679, 0.002558108, 0.0, 0.001650392};
    double[] operator = {1.0};
    if (instrument.equals("violin")) {
      operator = violAmps;
    }
    if (instrument.equals("piano")) {
      operator = pianAmps;
    }
    double dFreq = 440.0*Math.pow(2.0, (iTone-69)/12.0;

    double dFreqRel = iSmplRate/dFreq;
    Integer iSampleInstrument = null;
    double PI2 = 2*Math.PI;

    int[] iSamplesInstr = new int[iNumSmpl];
    for (int i = 0;i < iNumSmpl; i++) {
      Double Angle = i*PI2/dFreqRel;
      Double dInstrument = 0.0;
      for (int a = 1; a <=operator.length; a++) {
        dInstrument += operator[a-1]*Math.sin((double)a*Angle);
      }

      dMaxInstr = (dInstrument>dMaxInstr)?dInstrument:dMaxInstr;
      dMinInstr = (dInstrument<dMinInstr)?dInstrument:dMinInstr;

      iSampleInstrument = (int)(sAmplit*dInstrument);

      if (instrument.equals("violin")) {
        double FreqEnvV = iSmplRate/6.0;
        double FracEnvV = 35.0;
        double dEnvViolin = sAmplit*DStepperExt(Math.sin(1.0*i*PI2/FreqEnvV),4)/FracEnvV;
        iSampleInstrument = (int)(iSampleInstrument+dEnvViolin);
      }
      if (instrument.equals("piano")) {
        double FracEnvP = 8.0/10.0;
        double AngP = (double)i/(iSmplRate*FracEnvP);
        double EnvPiano = 1.0/Math.exp(AngP);
        iSampleInstrument = (int)(iSampleInstrument*EnvPiano);
      }
      dMxSmplInstr = (iSampleInstrument>dMxSmplInstr)?iSampleInstrument:dMxSmplInstr;
      dMnSmplInstr = (iSampleInstrument<dMnSmplInstr)?iSampleInstrument:dMnSmplInstr;
      iSamplesInstr[i] = iSampleInstrument;
    }

    double dMaxAbs = 
            (Math.abs(dMaxInstr)>Math.abs(dMinInstr))?Math.abs(dMaxInstr):Math.abs(dMinInstr);
    double dMxAbsSmpl = 
            (Math.abs(dMxSmplInstr)>Math.abs(dMnSmplInstr))?Math.abs(dMxSmplInstr):Math.abs(dMnSmplInstr);
    double dNormal = 1.0;
    if (dMxAbsSmpl > 32768.0) {
      dNormal = 32768.0/dMxAbsSmpl;
    }

    for (int i = 0;i < iNumSmpl; i++) {
      short sSampleInst = (short)(iSamplesInstr[i]*dNormal);
      try {
        if (iNumByteSmpl == 2) {
          bbWav.put((byte)((sSampleInst >> 0) & 0xFF));
          bbWav.put((byte)((sSampleInst >> 8) & 0xFF));
          if (iNumChnnls == 2) {
            bbWav.put((byte)((sSampleInst >> 0) & 0xFF));
            bbWav.put((byte)((sSampleInst >> 8) & 0xFF));
          }
        } else {
          byte ByteSample = (byte)((sSampleInst >> 8) & 0xFF);
          short ShrtSample = (short)(ByteSample & 0xFF);
          ShrtSample += 128;
          bbWav.put((byte)(ShrtSample & 0xFF));
          if (iNumChnnls == 2) {
            bbWav.put((byte)(ShrtSample & 0xFF));
          }
        }
      } catch (Exception e) {
        System.out.println(e.getMessage());
      } 
```

此代码用于小提琴乐器：

```
 private Double DStepperExt(Double Val, Integer Steps) {
    //Return a value inside in range defined by step
    //Divide [-1.0,1.0]/(Steps-1), retorning the value according to the range
    //The value must be between 0.0 and 1.0
    if (Steps <= 0.0) { 
      return 0.0;
    }
    if (Val != -1.0 && Val != 1.0) {
      Val = Val - Val.intValue();
    }
    Double sDouble = new Double(Steps-1);
    Double bdStep = 2.0/sDouble;
    Double bdRef = bdStep/2.0;
    bdRef = bdRef - 1.0;
    Double bdInit = -1.0;

    Double bdRet = null;
    for (int c = 0; c<=sDouble;c++) {
      if (Val < bdRef) {
        bdRet = bdInit;
        break;
      } else {
        bdInit = bdInit+bdStep;
        bdRef = bdRef+bdStep;
      }
    }
    return Math.min(bdRet.doubleValue(),1.0);
  } 
```

试试这段代码，我的声音并不完美，但非常相似。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T15:18:43.680

请注意，您正在从事的是一项**艰巨**的任务。如果您的目标是创建自己的合成器，通过将具有特定幅度的谐波相加来听起来像钢琴、小提琴等，那么创建一个以任何方式逼真的声音都是非常困难的。声学乐器的谐波以复杂的方式随时间变化。正如 guidot 所指出的，声音的起音和延迟部分会有很大的不同。如果您尝试随时间在多个点测量真实乐器的相对幅度，然后合成正弦曲线，那么您将获得的最佳效果就是听起来像孩子的玩具。

如果这就是您想要做的，那么您将需要分析您想要模拟的声音随时间变化的频谱。我建议的最简单的方法是使用 Matlab、Octave 或 Scipy 之类的东西。如果您想要可视化，请尝试 Sonic Visualiser 或 Marsyas。

但是，如果您想创建逼真的播放，那么您有两个选择。一种是使用[Wavetable 合成器](http://en.wikipedia.org/wiki/Wavetable_synthesis)，这是有多少便宜的合成器（尤其是 PC 声卡上的合成器）工作的。另一种是研究[物理建模合成](http://en.wikipedia.org/wiki/Physical_modelling_synthesis)，它模拟乐器的物理特性以创建逼真的声音。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:13:47.833

如果我理解正确，您正在尝试进行傅立叶合成，希望得到与原始仪器相似的结果。我认为成功的机会非常渺茫：

*   它不能使用 MIDI，因为这需要纯正弦波来组合（标准 MIDI GS 乐器不可用）
*   需要海量数据来之不易；请注意，您的系数不仅仅特定于“钢琴”，还随音高而变化，因此“钢琴 a5”的值与“钢琴 a6”不同
    *   该模型假设音调的稳定状态（通过添加正弦波无法实现不同的目标）；然而，乐器的特性更多地取决于它的起音阶段

我会推荐约翰·皮尔斯，音乐声音的科学作为介绍。

# objective-c - 访问 SDK 内部本地化，如“完成”、“搜索”等

> ID：10702943
> 
> 赞同：1
> 
> 时间：2012-05-22T13:22:52.883
> 
> 标签：objective-c, ios, cocoa-touch

当我在 iOS 中构建 UI 时，我想让它尽可能地熟悉。所以想象一下我制作了一个非标准按钮，它仍然应该有标题“完成”（多种语言）。

我现在可以通过更改设备语言来繁琐地尝试找出所有这些语言中“完成按钮”的名称。

我想知道是否有办法在我的代码中访问这种“内部翻译”。

# eclipse - 选择取消选择事件日食

> ID：10702945
> 
> 赞同：1
> 
> 时间：2012-05-22T13:23:02.117
> 
> 标签：eclipse

当我在 eclipse treeviewer 中更改选择时，它似乎有两个选择事件，一个用于取消选中的项目，另一个用于选中的项目，按此顺序。这在某些时候是完全不可取的，尤其是当它涉及到服务器调用时。有没有办法避免第一次选择事件，即取消选择事件？

# sitecore - Sitecore 效果图可以放在单独的项目中吗？

> ID：10702948
> 
> 赞同：0
> 
> 时间：2012-05-22T13:23:09.000
> 
> 标签：sitecore

目前，我们的 Web 应用程序项目中有所有 Sitecore 渲染 XSLT 和用户控件。我们想将他们转移到他们自己的项目中，但其他一切都一样。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:43:08.667

只要物理文件最终到达它们应该作为构建过程的一部分的位置，我看不出有什么理由不能将它们移动到它们自己的项目中。您会遇到的唯一问题是 Sitecore 是否正在查找文件但找不到它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T02:29:16.993

这是我用来执行此操作的方法，请注意，它确实需要修改您的 csproj 文件，以确保将文件放置在构建的适当目录中。我基于 SharedSource 示例，例如，[Shared Source 的 Language Fallback 项目室中](http://trac.sitecore.net/LanguageFallback)的 Partial Language Fallback 模块使用了这种技术。

在您的项目目录中，创建一个名为`deploydirectory.txt`并放置您最终 Web 位置的路径的文件。

在新项目的 csproj 文件中，在 之前添加此代码块`</project>`（假设此处未进行其他自定义更改）

```
<Target Name="AfterBuild">
  <CallTarget Targets="DeployToWeb" Condition="Exists('deploydirectory.txt')" />
</Target>
<Target Name="DeployToWeb">
  <ReadLinesFromFile File="deploydirectory.txt">
    <Output PropertyName="DeployPath" TaskParameter="Lines" />
  </ReadLinesFromFile>
  <CreateItem Include="App_Config\**\*.*;bin\*.dll;layouts\**\*.ascx" Exclude="**\.svn\**\*.*">
    <Output ItemName="DeployFiles" TaskParameter="Include" />
  </CreateItem>
  <Copy SourceFiles="@(DeployFiles)" DestinationFiles="@(DeployFiles->'$(DeployPath)\%(RelativeDir)%(Filename)%(Extension)')" SkipUnchangedFiles="true" />
</Target> 
```

这个代码块就目前而言，将 app_config 中的所有文件、bin 中的所有 dll 文件以及布局目录和子目录中的所有 ascx 文件复制到 deploydirectory.txt 文件的路径中。定义它们将`**`被放置到目标的适当子目录中。

当前设置为排除找到的任何 .svn 目录。

最后，只有在项目目录中有 deploydirectory.txt 文件时才会运行，否则它会完全忽略此指令。

**编辑：**如果需要，您还可以在单​​独的文件中包含要移动的目录/文件列表，这样每次添加更多需要移动的文件时都不需要修改 csproj 文件（比如你开始使用用户控件，然后稍后添加 xslt 渲染等）

```
<Target Name="AfterBuild">
  <CallTarget Targets="DeployToWeb" Condition="Exists('deploydirectory.txt')" />
</Target>
<Target Name="DeployToWeb">
  <ReadLinesFromFile File="deploydirectory.txt">
    <Output PropertyName="DeployPath" TaskParameter="Lines" />
  </ReadLinesFromFile>
  <ReadLinesFromFile File="SourceFilePaths.txt">
    <Output ItemName="SourceFilePaths" TaskParameter="Lines" />
  </ReadLinesFromFile>
  <CreateItem Include="@(SourceFilePaths)" Exclude="**\.svn\**\*.*">
    <Output ItemName="DeployFiles" TaskParameter="Include" />
  </CreateItem>
  <Copy SourceFiles="@(DeployFiles)" DestinationFiles="@(DeployFiles->'$(DeployPath)\%(RelativeDir)%(Filename)%(Extension)')" SkipUnchangedFiles="true" />
</Target> 
```

其中`SourceFilePaths.txt`包含以下内容

```
App_Config\**\*.*
bin\*.dll
layouts\**\*.ascx 
```

# jquery - 如何将按钮文本传递到另一个页面？

> ID：10702952
> 
> 赞同：0
> 
> 时间：2012-05-22T13:23:22.693
> 
> 标签：jquery, html, blackberry, jquery-mobile

我正在使用 jQuery Mobile 为 BlackBerry PlayBook 制作应用程序，并且在一个页面（实际上是一个`div`with `data-role='page'`）中，我有很多（比如 125 个）按钮，每个按钮都有一个独特的文本。我已经为此使用了`a`标签`data-role='page'`。

有一个与上面类似的单独页面，但在同一个 HTML 文件中有不同的内容。此页面中的内容取决于页面 1 中单击的按钮。

所以我的问题是，如何根据第 1 页中单击的按钮加载第 2 页以及相关内容？我需要将中间的文本`<a>`和`</a>`标签传递到第 2 页并相应地加载内容。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:37:22.953

例如，您可以使用 url 本身使用查询字符串传递数据，然后在被调用页面的 pageshow 事件中检查并显示适当的内容。

按钮标记

```
<a href="#page2?btn=Hello">Button 1</a> 
```

在调用它之前的一段时间绑定到 pageShow（它实际上不需要在文档中准备好，因为它已被委派，但假设这是您启动应用程序的地方，您可以将其放置在那里）。

```
$(function() {
     $(document).delegate('#page2', 'pageshow', function (event, ui) {
                var qryStringResult = getParameterByName('btn'); //hello                     
        });  
}); 
```

Artem Barger 的功能 - [https://stackoverflow.com/a/901144/384985](https://stackoverflow.com/a/901144/384985)

```
 function getParameterByName(name) 
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:28:14.550

好吧，您可能有一个与每个按钮相关联的唯一值，然后单击在每个按钮上触发相同的功能，在该功能中根据页面直接检查值。否则您可以使用 html5 的 localStorage/sessionStorage 来存储页面之间传递的值。欲了解更多详情，请访问[此处](http://diveintohtml5.info/storage.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:20:52.467

您可以为此使用全局变量。

```
<a href="#" onclikc="some_function('Button 1')">Button 1</a>

function some_function(data){

global_varible = data; 
```

}

在第 2 页

```
$( document ).delegate("#page2", "pagecreate", function() { 
       var page2_varible = global_varible;
} 
```

# c# - 回发时如何防止页面刷新？

> ID：10702955
> 
> 赞同：0
> 
> 时间：2012-05-22T13:23:37.553
> 
> 标签：c#, javascript, jquery

我想在每个 div 点击时显示一个弹出窗口。div 将动态创建，每个都是框。我想在弹出窗口中显示一些数据库值。我使用隐藏字段（获取 id）作为 sql 数据源中的控制参数.为了从c#中获取每次点击的隐藏字段值，我在弹出插件的javascript中使用了一些_dopostback。这会导致每次刷新时页面加载，因此每次点击时我都无法在弹出窗口中显示正确的值。如何避免页面刷新？我的 JavaScript 代码：

在我调用的弹出函数中

```
__doPostBack('TestFunctionPostBack', comp_id); 
```

页面加载中的c#代码

```
 this.GetPostBackEventReference(this, string.Empty);

        if (this.IsPostBack)
        {
            string eventTarget = (this.Request["__EVENTTARGET"] == null) ? string.Empty : this.Request["__EVENTTARGET"];
            string eventArgument = (this.Request["__EVENTARGUMENT"] == null) ? string.Empty : this.Request["__EVENTARGUMENT"];

            if (eventTarget == "TestFunctionPostBack")
            {               
                HiddenField1.Value = eventArgument;

            }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:28:00.820

您可以使用 AJAX 来避免整页回发。

您可以轻松地[`UpdatePanel`](http://msdn.microsoft.com/en-us/library/bb386454.aspx)为部分回帖添加一个。或者，更好的是，使用[jQuery](http://encosia.com/simplify-calling-asp-net-ajax-services-from-jquery/)等 javascript 框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:53:22.933

使用Ajax调用服务器端方法，然后在UI上渲染内容看下面的例子[http://weblogs.asp.net/craigshoemaker/archive/2008/09/29/using-jquery-to-call-asp-net- ajax-page-methods.aspx](http://weblogs.asp.net/craigshoemaker/archive/2008/09/29/using-jquery-to-call-asp-net-ajax-page-methods.aspx)

# java - 监控已部署的 java 应用程序使用情况

> ID：10702960
> 
> 赞同：3
> 
> 时间：2012-05-22T13:23:49.950
> 
> 标签：java, deployment, monitoring

用 Java 编写一个基于 GUI 的大型应用程序，想知道是否有任何框架可以监视部署给许多最终用户的应用程序。有点像 Eclipse 定期发送您的使用信息等。我认为 Apple 在 iOS 上也会做这种事情。

我希望能够知道

```
1\. which features and resources of the application are being used the most 
2\. crash reports 
3\. cpu and memory usage 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:53:22.947

如果你想保持简单，你可以使用日志框架。[Logback](http://logback.qos.ch/manual/appenders.html)是一个 SL4J 实现，可以使用 SMTP 发送日志（用户可以读取密码！）。

> SMTPAppender 在一个或多个固定大小的缓冲区中累积日志记录事件，并在用户指定的事件发生后将相应缓冲区的内容发送到电子邮件中。SMTP 电子邮件传输（发送）是异步执行的。

它也可以使用[Loggly](https://github.com/qos-ch/logback-extensions/wiki/Loggly)。

这应该是一个好的开始。在 Java 中收集有意义的 CPU 和内存使用信息并非易事。[SLF4J 可以通过为穷人开设的几门课程为](http://www.slf4j.org/api/org/slf4j/profiler/package-summary.html)您提供一点帮助 :)

# c# - 从 Office 加载项中的线程显示 WPF 弹出窗口

> ID：10702963
> 
> 赞同：1
> 
> 时间：2012-05-22T13:24:06.710
> 
> 标签：c#, wpf, multithreading, vsto

我正在尝试显示一个 WPF 弹出窗口，它将指示一些进展：

问题是在 Thread.Sleep 完成之前没有显示弹出窗口，这只是一个示例，在我的程序中，我有复杂的 IO 和 DB 逻辑需要同步执行，并且需要在弹出窗口上显示进度。

这是我的示例代码：

```
 private ProgressBar m_ProgressBar;

    private void buttonDoWork_Click(object sender, RoutedEventArgs e)
    {
        var progressPopup = new Popup { PopupAnimation = PopupAnimation.Fade, StaysOpen = true, Height = 150, Width = 260 };
        m_ProgressBar = new ProgressBar
                              {
                                  HorizontalAlignment = HorizontalAlignment.Stretch,
                                  VerticalAlignment = VerticalAlignment.Stretch
                              };

        progressPopup.Child = m_ProgressBar;

        progressPopup.IsOpen = true;

        Thread.Sleep(5000);
        this.m_ProgressBar.Value = 25;
        Thread.Sleep(5000);
        this.m_ProgressBar.Value = 50;
        Thread.Sleep(5000);
        this.m_ProgressBar.Value = 75;
        Thread.Sleep(5000);
        this.m_ProgressBar.Value = 100;
    } 
```

**更新**

问题是阻塞主线程的逻辑需要留在主线程上，我无能为力。有没有办法在单独的线程上运行弹出窗口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T13:27:36.350

采用

```
Dispather.BeginInvoke(new Action(()=>{ this.m_ProgressBar.Value = progress; }); 
```

更新 UI 线程上的进度条。

一般来说，你不应该像这样编织你的代码（用户界面和逻辑混在一起）

您可以使用 BackgroundWorker 或通过引发事件来报告进度的任务。

**编辑**

澄清一下：公开从您的 ViewModel/代码更改的数据并引发事件 (PropertyChanged)，以便您可以将 UI 绑定到这些值。这将允许您保持 UI 和代码分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:41:34.930

我会`BackgroundWorker`在 UI 线程和后台线程的拆分非常清晰的地方使用。

例如，使用它，您可以签署`ProgressChanged`事件（属于 UI 线程）并执行任何您想要告知用户您的后台进程的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T14:00:17.997

问题是 WPF 要求消息循环旋转，以便它可以调度消息以显示、绘制、响应事件等。您必须构建代码以便`buttonDoWork_Click`尽快退出。如果你不这样做，那么整个 UI 将冻结。

此外，在该单一方法中增加进度值基本上没有任何作用。从消息循环的角度来看，进度值仅包含一个值...100。`ProgressBar`这是您在单击事件结束之前写入的最后一个值。这是进度条知道的唯一值，当它最终被允许刷新时。

您需要从 UI 线程中获取长时间运行的操作。这是我的建议。

*   使用`Task`该类在工作线程上开始您的操作。
*   让您的工作线程将进度信息发布到一个简单的变量。
*   让您的 UI 线程在您选择的时间间隔内通过计时器轮询进度信息。相应地更新`ProgressBar`。

# c# - WP 7.5 获取 MAC 地址

> ID：10702965
> 
> 赞同：0
> 
> 时间：2012-05-22T13:24:14.277
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我已经被困了一段时间了。我应该很简单。我想读取我的 WP7 设备的 MAC 地址。这是运行 WP 7.5 的诺基亚 Lumia 800。

我可以通过执行以下操作找到活动的网络接口：

```
var current = new NetworkInterfaceList().Current; 
```

但是如何读取 MAC 地址呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:03:27.280

正如 vcsjones 在评论中所说，在 7.5 版中是不可能的。

# jquery - JQuery - IE中的HTML元素中出现奇怪的数字

> ID：10702967
> 
> 赞同：3
> 
> 时间：2012-05-22T13:24:18.810
> 
> 标签：jquery, internet-explorer

我的网络应用程序遇到了麻烦。我期待呈现的形式，但我得到一个白屏。如果我查看 InternetExplorer-source 我会读到奇怪的 HTML 标签，例如：

```
<body jQuery1337692490330="9" onload="showSubform(false,''); ...> 
```

这是什么意思？提前致谢。在 Firefox 中，它看起来像这样：

```
<body onload="showSubform(false,''); ...> 
```

一个基于 JSF 的 webapp 生成了基于框架的代码。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:27:07.867

jQuery将`jQuery1337692490330="9"`属性添加到一些 HTML 元素中，以满足其内部实现的需要。

这些属性不应该是您的问题的根源，除非您正在迭代属性并依赖它们的确切顺序，但情况并非如此。

如果您的页面上更有可能出现其他问题，导致页面无法正常显示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T13:31:17.620

它是`expando`属性，它是表示 jquery 缓存中该元素的键。缓存中的索引名称由字符串 Jquery + 时间戳组成。这不会是您页面上任何问题的原因。

# ios - iOS - 在启动时在 splitviewcontroller 上显示模态弹出视图控制器

> ID：10702969
> 
> 赞同：0
> 
> 时间：2012-05-22T13:24:25.147
> 
> 标签：ios, ipad, modal-dialog, uisplitviewcontroller, uipopovercontroller

我正在开发一个需要登录屏幕的 iPad 应用程序。我希望登录屏幕显示为屏幕中心的模式弹出框，位于由 UISplitViewController 控制的底层屏幕顶部。理想情况下，我希望隐藏“主”视图，然后在成功登录后出现。我知道我的 UISplitViewController 必须是根控制器，所以我需要在适当的事件中从主视图或详细视图启动弹出窗口。对于这应该发生在哪里，以及 UIPopoverController 是否应该是主视图或详细视图的属性，我有点困惑。

非常感谢任何帮助，

乔纳森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:06:47.950

以下是您要实现的目标的一些线索：

**显示/隐藏主视图：** 默认情况下，主视图在纵向模式下可见。如[苹果文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UISplitViewControllerDelegate_protocol/Reference/Reference.html#//apple_ref/occ/intfm/UISplitViewControllerDelegate/splitViewController:shouldHideViewController:inOrientation:)中所述，您可以从 ios5 开始更改此行为。您可以使用此方法来实现任何方向的主视图的显示或不显示。

```
 - (BOOL)splitViewController:(UISplitViewController *)svc shouldHideViewController:(UIViewController *)vc  inOrientation:(UIInterfaceOrientation)orientation 
```

**在屏幕中央显示一个模态弹出** 框 当应用程序启动时，您的模态弹出框视图需要从 SplitViewController 中呈现出来。我在这篇[文章](https://stackoverflow.com/questions/4750813/problems-with-modal-view-launched-over-a-split-view-controller)中看到了一种可能的方式来做到这一点，`didFinishLaunchingWithOptions`你不应该从主控制器或细节控制器启动弹出窗口。

# tridion - Tridion 2009 模板发布失败

> ID：10702972
> 
> 赞同：5
> 
> 时间：2012-05-22T13:24:36.040
> 
> 标签：tridion

在 Tridion 2009 中尝试发布页面 (.NET) 时，我们刚刚开始遇到一些错误。它从间歇性的经典“RenderComponentPresentation 超出最大渲染失败次数 0”错误开始，然后进展为完全失败。

我们可以正确预览页面，所以我不愿意相信它与实际的模板代码有关。

不幸的是，我无法控制正在运行的盒子，所以我将无法运行任何调试代码等......所以这是在黑暗中的一个镜头！

堆栈跟踪如下：

```
Event Type:        Error 
Event Source:        Publishing 
Event Category:        None 
Event ID:        100 
Date:                22/05/2012 
Time:                14:28:22 
User:                N/A 
Computer:        XXXXXXXXXX
Description: 
Exception has been thrown by the target of an invocation. 
Old format or invalid type library. (Exception from HRESULT: 0x80028019 (TYPE_E_UNSUPFORMAT)) 

Component: Tridion.ContentManager.Publishing 
Errorcode: 0 
User: NT AUTHORITY\SYSTEM 

StackTrace Information Details: 
   at System.RuntimeMethodHandle._InvokeConstructor(Object[] args, SignatureStruct& signature, IntPtr declaringType) 
   at System.RuntimeMethodHandle.InvokeConstructor(Object[] args, SignatureStruct signature, RuntimeTypeHandle declaringType) 
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture) 
   at System.RuntimeType.CreateInstanceImpl(BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes) 
   at System.Activator.CreateInstance(Type type, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes) 
   at Tridion.ContentManager.Session.GetObject(String uri) 
   at Tridion.ContentManager.Publishing.Publisher.QueueMessageHandler.HandleMessage() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T13:28:58.557

看起来您在该系统的某个地方有一个旧的 DLL。检查您在盒子上的所有依赖项（因此您放入 GAC 或 Tridion*\bin 目录的 DLL）是否是最新的，并让它们重新启动 Tridion 相关服务、COM+ 应用程序和 IIS 应用程序池。

编辑：实际上如果模板生成器工作，看起来 DLL 可能已经是最新的，你只需要重新启动服务+COM+应用程序池。如果您的团队不知道如何做到这一点，只需让他们重新启动机器或查看[此脚本](http://code.google.com/p/tridion-practice/wiki/ProgrammaticallyRestartTridionContentManager)，该脚本会蛮力重新启动所有与 Tridion 相关的内容。

# asp.net-mvc-3 - 实体框架 - URL 的动态递归查找

> ID：10702976
> 
> 赞同：0
> 
> 时间：2012-05-22T13:24:37.687
> 
> 标签：asp.net-mvc-3, entity-framework-4

我正在做一个项目，我需要在数据库中创建分层页面结构，并检索 mydomain.com/firstpage/secondpage/thirdpage 等页面。

我有以下，精简，模型：

```
[DatabaseGenerated(DatabaseGeneratedOption.Identity)]
public Guid PageId { get; set; }
public string Name { get; set; }
public string Url { get; set; }

public Guid? ParentId { get; set; }
[ForeignKey("ParentId")]
public virtual Page Parent { get; set; }
public virtual ICollection<Page> Children { get; set; } 
```

然后我有一个查找PageId的函数，如下：

```
private Guid GetPageByUrl(string slug)
{
    var pages = pageService.GetPages();
    var urlArray = slug.Split('/');

    var page = new Page();

    switch (urlArray.Count())
    {
        case 1:
            page = pages.Where(p => p.Url == urlArray[0] 
                && p.ParentId == null)
                .FirstOrDefault();
            break;
        case 2:
            page = pages.Where(p => p.Url == urlArray[1] 
                && p.Parent.Url == urlArray[0] 
                && p.Parent.ParentId == null)
                .FirstOrDefault();
            break;
        case 3:
            page = pages.Where(p => p.Url == urlArray[2]
                && p.Parent.Url == urlArray[1]
                && p.Parent.Parent.Url == urlArray[0]
                && p.Parent.Parent.ParentId == null)
                .FirstOrDefault();
            break;
        case 4:
            page = pages.Where(p => p.Url == urlArray[3]
                && p.Parent.Url == urlArray[2]
                && p.Parent.Parent.Url == urlArray[1]
                && p.Parent.Parent.Parent.Url == urlArray[0]
                && p.Parent.Parent.Parent.ParentId == null)
                .FirstOrDefault();
            break;
    }

    return page.PageId;
} 
```

有没有更好的方法来做到这一点？

从现在开始，我必须定义如何通过我的 switch 语句查找 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:41:04.500

您可以进行循环以从根端构建查询：

```
var pageQuery = pageService.GetPages();
foreach( Int32 i = 0; i < urlArray.Count(); i++){
    var url = urlArray[i];
    if (i == 0) // first url must match root page
        pageQuery = pageQuery.Where(p => p.ParentId == null);
    else        // next urls must match next level children
        pageQuery = pageQuery.SelectMany(p => p.Children);
    pageQuery = pageQuery.Where(p => p.Url == url);      
}
return pageQuery.FirstOrDefault(); 
```

# c# - ASPX 网站中奇怪的 ID 变量

> ID：10702978
> 
> 赞同：0
> 
> 时间：2012-05-22T13:24:44.650
> 
> 标签：c#, .net, sql, sql-server

我希望从 ASPX 站点获取数据并自己使用它。我是一名 PHP 开发人员，习惯于将漂亮的 ID 变量发布回服务器。然后我可以用我想要的 ID 形成 url，解析 html，我很高兴。

该站点的 ID 变量为：33ED6E44C6F8D71AA7F00641C0650842，但现在为 276D4D104D1E4E342BAF6C7DC20DCB6A。我以为它是数据库中的 GUID，但如果它正在改变，它可以吗？也许它是使用 session_State 变量进行散列或加密的（根据我问的开发人员）？

有没有人知道这个 ID 变量是如何工作的？我不打算发布该网站，但希望 ID 变量足以了解更多信息。我知道这不是太多的信息，但任何帮助将不胜感激。

谢谢！

编辑**这是表格的来源

```
<body>

<form name="form1" method="post" action="details.aspx?id=2E8ECBC20B98DDF6033848ACD889A9F0&amp;lang=fr" id="form1"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:28:42.237

`ID`以下是有关您可能会发现有用的标签 的一些信息： [http ://www.asp.net/web-forms/tutorials/master-pages/control-id-naming-in-content-pages-cs](http://www.asp.net/web-forms/tutorials/master-pages/control-id-naming-in-content-pages-cs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:39:09.597

据我所知，只要继续使用相同的 SessionID 值发出请求，会话就被认为是活动的。如果对特定会话的请求之间的时间超过指定的超时值（以分钟为单位），则认为会话已过期。使用过期 SessionID 值发出的请求会产生一个新会话和一个新 ID。此 ID 实际上是一个加密唯一 ID，但我不确定它是使用 session_State 变量进行散列还是加密。

**编辑**：

根据你的最后一个问题

> 你知道是否有任何常见的方法可以做到这一点？任何内置的.net散列函数？

好吧，SessionID 是在**SessionStateModule**中创建的。要在 ASP.NET 下扩展会话状态，您需要编写*自己的 HTTP 模块*并替换 machine.config 中的 SessionStateModule。SessionStateModule 是为 ASP.NET 提供所有会话状态功能的模块。SessionStateModule 是密封的，因此您无法扩展它。也许他们想告诉我们一些事情？您可以更换它；但是，除了如何创建 HTTP 模块来帮助您完成此任务之外，没有任何文档。除非您有一个非常好的论据来滚动自己的 sessionid，否则我会坚持为您提供的内容。

# ios - UIImagePickerController 在 alloc/init 上崩溃

> ID：10702979
> 
> 赞同：3
> 
> 时间：2012-05-22T13:24:45.960
> 
> 标签：ios, ipad, uiimagepickercontroller

我有一个 UIImagePickerController，当用户按下按钮时，它会在弹出窗口中显示。这在 iPad 模拟器中完全正常，但是当我尝试在实际测试设备上做同样的事情时，我`NSRangeException`在图像选择器的 alloc/init 行上得到一个！

```
 imagePicker = [[UIImagePickerController alloc] init];//Crashes here on device
    imagePicker.delegate = self;
    imagePicker.allowsEditing = YES;
    imagePicker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    imagePicker.mediaTypes = [[NSArray alloc] initWithObjects: (NSString *) (kUTTypeImage), nil]; 
```

这是崩溃消息：

> *** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[NSOrderedSet initWithOrderedSet:range:copyItems:]: range {8, 1} 超出范围 [0 .. 0]”

我通过尝试在调试模式下跨过该行来确定它是该行，并且跨过该特定行是引发异常的原因。

编辑：

我能够制作一个 100% 重现此问题的基本项目，这让我相信这是一个 iOS 错误，而不是我的代码。

1.  做一个新项目。选择单视图应用程序。不管是故事板还是基于 xib
2.  打开 iPad xib/storyboard，在视图中添加一个圆形矩形按钮
3.  将以下 IBAction 添加到视图控制器。 `pickerPopoverController`是一个`__strong`伊瓦尔

    ```
    -(void)iMakeItCrash:(UIButton*)sender
    {
        UIImagePickerController* ip = [[UIImagePickerController alloc] init];
        ip.delegate = self;
        ip.allowsEditing = YES;
        ip.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
        ip.mediaTypes = [[NSArray alloc] initWithObjects: (NSString *) (kUTTypeImage), nil];

        pickerPopoverController = [[UIPopoverController alloc] initWithContentViewController:ip];
        [pickerPopoverController presentPopoverFromRect:sender.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    } 
    ```

4.  将此 IBAction 连接到按钮的 Touch Up Inside 事件。

5.  在模拟器上工作，在 iPad 上崩溃

编辑2：

如果我尝试使用`presentPopoverFromBarButtonItem:`. 但是，如果我根本不提供图像选择器，也不会崩溃......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T21:44:49.670

当我的应用程序在我的任何设备或模拟器上的一个空的“保存的照片”相册上崩溃时，我注意到了这一点。如果“已保存的照片”中有照片，则该错误不会发生。如果您在模拟器上使用“重置数据和设置”并将相册留空，则很容易复制。

我花了很长时间试图找到一种解决方法，但我一直没能找到。我认为提交 iOS 错误报告是一个非常好的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:56:58.267

我曾经遇到过同样的问题并使用以下代码修复：

```
-(IBAction)actionOpenPhotoLibrary:(id)sender
{
if (![UIImagePickerController isSourceTypeAvailable: UIImagePickerControllerSourceTypeSavedPhotosAlbum]){
    return;
}

if ([popover isPopoverVisible]) {
    [popover dismissPopoverAnimated:YES];
    return;
}

UIImagePickerController *imagePicker = [[[UIImagePickerController alloc] init]autorelease];
imagePicker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
imagePicker.delegate = self;

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad){

    popover = [[UIPopoverController alloc] initWithContentViewController:imagePicker];              
    popover.delegate = self;
    [popover setPopoverContentSize:CGSizeMake(320, 460)];
    [popover presentPopoverFromBarButtonItem:[[[UIBarButtonItem alloc]initWithCustomView:(UIButton*)sender] autorelease] permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
}

imagePicker.navigationBar.tintColor = APP_THEME_COLOR;
[self presentModalViewController:imagePicker animated:YES];
} 
```

祝你好运......

# c++ - atexit() 函数

> ID：10702980
> 
> 赞同：2
> 
> 时间：2012-05-22T13:24:47.607
> 
> 标签：c++, linux, shared-libraries

有几个教程解释了`atexit()`函数的用法，例如：

[http://linux.die.net/man/3/atexit](http://linux.die.net/man/3/atexit)

示例在易于理解的 main 函数中给出。但是，我在我的程序中创建了一个共享库，并提供了一些要从其他程序导出的函数。当另一个程序卸载我的共享库时，我想停止共享库中的一些线程。如何`atexit()`在不强制用户调用某些函数的情况下在我的共享库实现中使用，例如`destroy()`最后？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T13:29:18.167

该[文档](http://www.kernel.org/doc/man-pages/online/pages/man3/atexit.3.html)指出：

> 从 glibc 2.2.3 开始，atexit()（和 on_exit(3)）可以在共享库中用于建立卸载共享库时调用的函数。

另一方面，为什么不直接创建一个全局范围的对象并在其析构函数中执行整理代码呢？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T13:36:57.540

你应该避免这样做（除非你真的因为某些非常强烈的理由必须这样做）。

该库应该只提供功能并让应用程序自由使用它。如果您的库导出了一个启动一些帮助线程的函数，请还提供一个函数来停止它并适当地记录它。继续履行应用程序释放其分配的资源的责任。

如果您的想法是修复确实调用了一些 lib_init() 但忘记了 lib_uninit() 的错误程序，那么请忘记它。它会让你的 lib 变得更加复杂，而且你永远无法修复应用程序的所有潜在错误。程序员可以创建和调试这样的应用程序将更加困难。

恕我直言，库应该（尽可能）避免更改一些全局过程的东西，因为这样的库会限制应用程序的设计方式。这样的库是一场噩梦，特别是如果您链接多个库并且它们对应用程序的编写方式有相互矛盾的假设。

# r - R 中的设施，用于根据单元均值、SE 和 n 验证已发布的 ANOVA

> ID：10702987
> 
> 赞同：5
> 
> 时间：2012-05-19T14:45:34.043
> 
> 标签：r, data-visualization, anova

我希望能够从期刊文章中获取具有标准误差和样本量的双向单元格均值表，并计算 ANOVA 表，创建交互图和其他可能的东西。

我可以手动执行此操作，我只是想知道是否已经有一些方法（例如，一个包）可以在 R 中自动执行此操作。

即使只是一些更好的搜索词也可能会有所帮助，因为搜索方差分析、单元均值和标准误差显然不是很有选择性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:37:33.673

看看包装 HH。它似乎提供了您正在寻找的东西。

# joomla1.5 - 提交优惠券代码时，如何自定义多张优惠券[逗号分隔]的优惠券代码流程？

> ID：10702988
> 
> 赞同：0
> 
> 时间：2012-05-22T13:25:12.733
> 
> 标签：joomla1.5, virtuemart

我是 joomla 中的新开发者。我们有一个购物车网站，客户希望当用户从该网站购买任何产品时，他可以一次输入多张优惠券，并从使用的总优惠券中获得总折扣。所以我可以从哪里开始做这件事。我正在使用 joomla 1.5.22 版和美德玛特 1.1.3 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:10:02.487

查看[awocoupon](http://awodev.com/)。它允许使用多种优惠券，以及强大的优惠券系统所缺少的大量其他功能。

# css - 为 QSpinBox/QComboBox 设置边框半径对上/下控件有意想不到的副作用

> ID：10702989
> 
> 赞同：2
> 
> 时间：2012-05-22T13:25:19.167
> 
> 标签：css, qt4, pyqt4, qcombobox, qspinbox

我正在使用 PyQt4 与许多 QLineEdit 和 QSpinBox 输入创建接口。我想给两者一个漂亮的圆形外观，但这在旋转框的情况下会出现问题。

样式表的相关位如下所示：

```
QDialog {
    background-color: #444;
}

QLabel, QLineEdit, {
    background-color: #eee;
    border-radius: 8px;
}

QSpinBox{
    background-color: #eee;
} 
```

给出一个如下所示的界面：

[![界面截图](../Images/a37ee0ec95b8b45ecefc1be48d928f2f.png)](https://i.stack.imgur.com/RLacj.jpg)

现在，当我`border-radius`为 QSpinBox 和 QComboBox 包含一个（即使值为 0）时，我得到了这个

[![有问题的用户界面截图](../Images/765f75633987d6e373c1cc1e6a506ae5.png)](https://i.stack.imgur.com/eYdBd.jpg)

请注意箭头如何从 Windows XP/vista 主题变为普通的默认外观。

为什么会发生这种情况，我该如何预防？

我想看到的是旋转框和组合框的主要形状像线条编辑一样。我没有尝试设置自定义箭头图像，因为我更喜欢使用本机默认值。或者这真的是我最好/唯一的选择吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T18:21:09.920

当您更改小部件的样式表时，它会使用 QCssStyle 设置样式。它将每个未设置样式的子控件退回到默认样式。您必须设置整个控件的样式以获得所需的外观。它不会混合

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T18:21:55.723

通过这个[QStyle](http://qt-project.org/doc/qt-4.8/qstyle.html)，您可以将小部件的样式更改为[QWindowsStyle](http://qt-project.org/doc/qt-4.8/qwindowsstyle.html)、[QMacStyle](http://qt-project.org/doc/qt-4.8/qmacstyle.html)或[QMotifStyle](http://qt-project.org/doc/qt-4.8/qmotifstyle.html)。而且，如果您设置特定小部件的样式表，则只会`set`更新您的值，其余属性`inherited`来自其`parent`小部件。所以尝试`widget style`在设置时也像我上面所说的那样指定`stylesheet`.

# sed - 使用 awk 从矩阵中提取字段

> ID：10702990
> 
> 赞同：0
> 
> 时间：2012-05-22T13:25:24.133
> 
> 标签：sed, awk

我正在尝试使用 awk 从文件“input.dat”中的矩形矩阵中提取字段，如下所示

```
Name value1 value2 value3
A 0 100 200
B 100 0 200
C 0 0 0
D 50 50 50
E 0 90 90 
```

得到输出

```
A.value1=0
A.value2=100
A.value3=200
B.value1=100
.
.
.
. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:33:53.810

```
awk 'NR==1 { split( $0, a); next } 
    { for( i=2; i <= NF; i++ )
        print $1 "." a[i] "=" $i
    }' input.dat 
```

或者：

```
awk 'NR==1 { split( $0, a); next }
    { for( i=2; i <= NF; i++ ) 
        printf "%s.%s=%s\n", $1, a[i], $i
    }' input.dat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:37:01.097

这是我的小脏 awk ：

```
awk '{ 
    print $1 ".value1=" $2; 
    print $1 ".value2=" $3; 
    print $1 ".value3=" $4;  
    }' data 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:17:44.427

这可能对您有用（GNU sed）：

```
 sed '1{s/\S*\s*//;h;d};G;s/^/\n/;:a;s/\n\(\S*\) \(\S\+\)\([^\n]*\)\n\(\S*\) */\1.\4=\2\n\n\1\3\n/;ta;s/\n\n\S* *\n$//' file 
```

# wpf - WPF 米勒列

> ID：10702994
> 
> 赞同：1
> 
> 时间：2012-05-22T13:25:41.763
> 
> 标签：wpf, user-interface

我很难在 WPF 中实现[Miller Column](http://en.wikipedia.org/wiki/Miller_columns)接口，并且想知道是否有人看过我可以借鉴的实现。我已经进行了一些搜索，但自己找不到任何东西。

目前，我将数据组织在层次结构中，以便可以将其放置在 TreeView 中，但我想在我的程序中添加 Miller Column 视图作为选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:44:35.717

Miller Columns 的 UI 看起来像多个链接的 ListBox 控件。

这是一个示例：[WPF MVVM 层次结构选定项](https://stackoverflow.com/questions/9827961/wpf-mvvm-hierarchy-selected-item/9830412#9830412)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:14:37.897

> **更新** 我在几篇博文中增强了我的解决方案，可以在[此处](https://codingforsmarties.wordpress.com/2015/11/14/wpf-miller-columns/)和[此处](https://codingforsmarties.wordpress.com/2015/11/17/wpf-miller-columns-part-2/)找到。新版本允许使用 MVVM 的更通用的方法。

我想到了一个可能的解决方案，Phil 证实这是正确的方法。我必须使用带有水平 StackPanel 的 ItemsControl 作为 ItemsPanel。然后，我为我的数据类型创建了一个 DataTemplate，并将它用于我的 ItemsControl 上的 ItemTemplate。

数据模板：

```
<DataTemplate x:Key="DataNodeStackedDataTemplate" DataType="my:DataNode">
    <ListBox ItemsSource="{Binding Children}"
             Style="{StaticResource StackedListBoxStyle}"/>
</DataTemplate> 
```

项目控制：

```
<ItemsControl x:Name="MillerColumnsView" VerticalContentAlignment="Stretch"
              ItemTemplate="{StaticResource DataNodeStackedDataTemplate}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel Orientation="Horizontal"/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
</ItemsControl> 
```

代码隐藏：

```
private void StackedListBox_SelectionChanged(object sender,
                                             SelectionChangedEventArgs e)
{
    var lb = sender as ListBox;
    if (lb == null) return;
    var dn = lb.DataContext as DataNode;
    if (dn == null) return;
    int index = MillerColumnsView.Items.IndexOf(dn);
    if (index == -1) return;
    index++;
    while (MillerColumnsView.Items.Count > index)
        MillerColumnsView.Items.RemoveAt(index);
    if (dn.Children == null) return;
    // this Select() call performs some restructuring of the tree to 
    // appropriate display the correct nodes in the next ListBox
    dn.Select(dn.AvailableItems.ElementAt(lb.SelectedIndex));
    if (dn.Children.Count() == 0) return;
    MillerColumnsView.Items.Add(dn.Children.ElementAt(0));
} 
```

这会自动删除并为每个选择级别创建列表框。一点syling，它也可以看起来很漂亮！

# sql-server-2008 - 如果数据库中不存在表，则引发错误

> ID：10702997
> 
> 赞同：3
> 
> 时间：2012-05-22T13:25:49.390
> 
> 标签：sql-server-2008

如果从数据库中删除任何表，我想处理错误情况就像 -

```
ALTER procedure ABC as 
begin tran tansinsert
insert into table1 values (1,2,3)
if @@error <> 0
begin
rollback tran tansinsert
end
else
begin
commit tran tansinsert
end 
```

如果我正在运行这个 proc 并且表 'table1' 不在数据库中，那么我将如何收到错误消息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:28:25.943

单程

```
IF NOT  EXISTS (SELECT * FROM sys.objects 
WHERE object_id = OBJECT_ID(N'[dbo].[table1 ]') AND type in (N'U'))
BEGIN
       RAISERROR(......)
END
ELSE
BEGIN
--rest of flow
END
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:28:30.683

捕获错误的示例代码

```
BEGIN TRY
     EXECUTE Abc
END TRY

BEGIN CATCH
     print 'Error got'
     SELECT 
          ERROR_NUMBER() as ErrorNumber,
          ERROR_MESSAGE() as ErrorMessage;
END CATCH; 
```

如果您执行以下操作，这将不起作用。

```
CREATE PROC test
AS
BEGIN TRY
  SELECT * FROM NonexistentTable
END TRY

BEGIN CATCH
   -- some code
END CATCH 
```

唯一可行的方法是，如果您有一个存储过程调用另一个存储过程，例如：

```
CREATE PROC Test
AS
SELECT * FROM NonexistentTable
GO

CREATE PROC test2
AS
BEGIN TRY
  EXECUTE Test
END TRY

BEGIN CATCH
   -- some code
END CATCH
GO 
```

TRY...CATCH 构造不会捕获以下条件：

1.  严重性为 10 或更低的警告或信息性消息。

2.  严重性为 20 或更高的错误会停止会话的 SQL Server 数据库引擎任务处理。如果发生严重程度为 20 或更高的错误并且数据库连接未中断，则 TRY...CATCH 将处理该错误。

3.  注意，例如客户端中断请求或断开的客户端连接。

4.  当系统管理员使用 KILL 语句结束会话时。

以下类型的错误发生在与 TRY...CATCH 构造相同的执行级别时，不会由 CATCH 块处理：

1.  编译错误，例如语法错误，阻止批处理运行。
2.  在语句级重新编译期间发生的错误，例如由于延迟名称解析而在编译后发生的对象名称解析错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T13:37:27.087

你可以试试这个...

```
IF OBJECT_ID('DBNAME..TABLENAME') IS NOT NULL
BEGIN
//YOUR CODE FLOW HERE
END

ELSE
BEGIN
//RAISE ERROR HERE
END
GO 
```

# java - 使用特定子类查找行的条件查询

> ID：10702998
> 
> 赞同：3
> 
> 时间：2012-05-22T13:25:51.750
> 
> 标签：java, hibernate, criteria, table-per-subclass

我将从一个经过消毒的示例开始。

在我的系统中，我有 Car 类。Car 有很多字段，其中有 GearShift 类的 gearShift 实例。

```
public class Car {
    private GearShift gearShift;

    // Snip
} 
```

GearShift 是一个抽象类，AutomaticShift 和 StickShift 继承自该类。这在 Hibernate 中被映射为每个子类的表。

现在，假设我想获得具有自动换档功能的汽车。我更喜欢通过 Hibernate 标准来做到这一点，所以我想像我可以添加一个“ofType”限制，如下所示。

```
getSession().createCriteria(Car.class)
    .add(Restrictions.ofType(AutomaticShift.class)
    .list(); 
```

这有可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T13:48:17.650

**OLD:**

How about this?

```
getSession().createCriteria(AutomaticShift.class).list() 
```

**EDIT:**

This should do the trick;

```
getSession().createCriteria(Car.class).createAlias("gearShift", "gs").add(Restrictions.eq("gs.class", AutomaticShift.class)).list(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:11:24.450

也许这听起来有点像开销，但你可以分两步完成：

1.  检索自动齿轮的所有 id：

    ```
    List<Long> automaticGearIds = getSession().createCriteria(AutomaticShift.class)
                                            .setProjection(Projections.distinct(Property.forName("id")))
                                            .list(); 
    ```

2.  获取所有带自动齿轮的汽车：

    ```
    return getSession().createCriteria(Car.class).add(Restrictions.in("gearShift.id", automaticGearIds)).list(); 
    ```