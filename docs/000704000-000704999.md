# StackOverflow 问答 000704000-000704999

# silverlight - 在服务和 silverlight 之间共享 WCF 合同。ServiceModel 版本不同

> ID：704015
> 
> 赞同：1
> 
> 时间：2009-04-01T04:02:51.823
> 
> 标签：silverlight, wcf

如果你有

```
interface IServiceA 
{
    string GetString();
} 
```

有没有办法在 WCF Web 服务项目和 Silverlight 项目之间共享这个界面？

问题：两者都使用不同版本的`System.ServiceModel`.

我不想生成和使用代理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T22:26:32.610

您可以尝试在接口上使用继承。创建一个基本接口（您可以使用 Resharper 从现有接口中提取接口）并将其放入单独的类库中。然后从基本接口继承您的服务合同接口（用属性标记的接口）。在 Silverlight 项目中使用带有基本接口的程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T15:00:51.853

将合同（IXyz）放在他们自己的项目中并在那里引用它。部署时，请务必添加适当程序集的引用路径。

# database-design - 基于数据结构的数据库设计

> ID：704021
> 
> 赞同：1
> 
> 时间：2009-04-01T04:06:25.700
> 
> 标签：database-design, data-structures

我有一个类似这样的数据结构：

```
typedef struct tagSUB_DATA
{
    double measuredValue;
    double standardDeviation;
    double calculatedValue;
    double weightedError;

} SUB_DATA;

typedef struct tagALL_THE_DATA
{
    int aNumber;
    double aDouble;
    SUB_DATA measurements1;
    SUB_DATA measurements2;

} ALL_THE_DATA; 
```

我需要将其存储在关系数据库中。

我的查询与两个字段`measurements1`和`measurements2`. 显然，它们是同一类型，所以我的第一个想法是“让我们创建一个`SUB_DATA`表并在它们之间创建一个外键链接”。

```
Table: ALL_THE_DATA
Field: ID (int, Primary Key)
Field: aNumber (int)
Field: aDouble (double)
Field: measurements1 (int, Foreign Key referencing SUB_DATA)
Field: measurements2 (int, Foreign Key referincing SUB_DATA)

Table: SUB_DATA
Field: ID (int, Primary Key)
Field: measuredValue (double)
Field: standardDeviation (double)
Field: calculatedValue (double)
Field: weightedError (double) 
```

但是，数据的实际上下文是这样的，`measurements1`并且`measurements2`是对不同事物（例如，苹果和~~橙子~~火箭）的测量，它们都恰好需要测量值、标准偏差等。那么，存储它是否仍然合适测量的苹果和测量的火箭的数据在同一个表中，即使它们使用相同的数据，还是设计它让火箭和苹果有自己的（设计相同的）表会更谨慎？

```
Table: ALL_THE_DATA
Field: ID (int, Primary Key)
Field: aNumber (int)
Field: aDouble (double)
Field: appleMeasurements (int, Foreign Key referencing APPLE_MEASUREMENTS)
Field: rocketMeasurements (int, Foreign Key referencing ROCKET_MEASUREMENTS)

Table: APPLE_MEASUREMENTS
Field: ID (int, Primary Key)
Field: measuredValue (double)
Field: standardDeviation (double)
Field: calculatedValue (double)
Field: weightedError (double)

Table: ROCKET_MEASUREMENTS
Field: ID (int, Primary Key)
Field: measuredValue (double)
Field: standardDeviation (double)
Field: calculatedValue (double)
Field: weightedError (double) 
```

您认为这两种解决方案中哪个最好？第一个似乎不太冗余，但可能存在更大的不一致数据的可能性。或者也许有比我想象的更好的方法来解决这个问题？

干杯!

（请原谅我的 Apples/Rockets 伪数据——我不能在这里发布实际代码）

**额外信息：**
在这种情况下，我们可以确定火箭和苹果以后不会改变它们的字段，所以我不太担心“如果火箭或苹果的字段稍后改变”的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T04:12:41.877

如果您的 SUB_DATA 真的是 Apples 和 Rockets（并且总是 Apples 和 Rockets），那么它们都是相同数据结构的实例可能是一个设计问题，并且可能使您的代码使用起来风险更大。您可能想要使用子类（即使结构没有不同）只是为了区分类型。

如果您将两者混合到同一个表中，您会冒着想要更改其中一个结构而不是另一个结构的风险，就像您使用同一个类一样。如果将来有这种可能性，那么显然不要在同一张桌子上分享它们。或者，如果他们有一些共同点并且将来可能会有所不同，您可以使用多个表。

这听起来可能需要做很多工作，但是一个体面的对象关系映射（例如，Hibernate）实际上可以很好地为您处理类层次结构并拆分需要拆分的内容。

但是无论你做什么，在你 100% 确定什么会保持共同点和什么会改变之前，不要启动你的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T04:13:35.760

你总是有两个测量值吗？如果是这样，您根本不需要打破表格（只需一张表格，其中包含两组用于两次测量的列）。

```
Table: ALL_THE_DATA
Field: ID (int, Primary Key)
Field: aNumber (int)
Field: aDouble (double)
Field: measuredValue1 (double)
Field: standardDeviation1 (double)
Field: calculatedValue1 (double)
Field: weightedError1 (double)
Field: measuredValue2 (double)
Field: standardDeviation2 (double)
Field: calculatedValue2 (double)
Field: weightedError2 (double) 
```

对于结构之间的非可选 1:1 关系，将子结构嵌入到父表中是可以接受的设计和有效的。

但是，这使得添加第三种测量类型变得更加困难。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-01T04:11:50.880

为什么不创建这两个表，而是让它们继承自一个公共测量表？

# .htaccess - 记事本++中的.htaccess

> ID：704025
> 
> 赞同：19
> 
> 时间：2009-04-01T04:09:33.930
> 
> 标签：.htaccess, notepad++

我正在使用记事本和 FTP 插件。.htaccess 文件不会显示在服务器的文件夹树中。其他人遇到过这个并知道修复吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2011-04-16T19:53:54.560

我知道这是一个老问题，但我也遇到了这个问题。

在 Notepad++ (v5.9) 的当前版本中，NppFTP 插件 (v0.23) 对每个连接都有一个称为“LIST 参数”的设置。可通过 访问`Settings/Profile settings/FTP Misc`。在那里输入“-al”，隐藏文件应该是可见的。请记住为每个配置文件设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T04:13:29.973

该文件在那里，它只是隐藏。如果您可以输入要下载的文件名，您可能会得到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T04:19:40.707

我不使用记事本加，但如果 ftp 插件有显示隐藏文件的设置，那么您应该能够更改它，以便您可以看到 .htaccess 文件。服务器可能是 unix，所以任何以点开头的文件都是隐藏文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-14T12:08:52.607

这是正常行为。在您的 FTP 客户端插件的选项中找到选项“显示隐藏和隐藏文件。例如在 Total Commander 中它是：

> 网络 -> FTP 显示隐藏文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-10T13:06:24.000

在 FTP 页面配置文件设置中，选择`FTP misc.`并键入`-al`. 它解决了我的问题

# php - 将PHP中字符串的每个单词都大写？

> ID：704035
> 
> 赞同：2
> 
> 时间：2009-04-01T04:13:50.190
> 
> 标签：php, string

据我所知， strtolower 使字符串全部小写，而 ucfirst 使字符串的第一个字母大写。

我在问，是否可以将字符串中的每个单词都大写？

示例 $string = "hello world" - 我怎样才能让它显示为“Hello World”？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-01T04:15:08.563

您正在寻找该[`ucwords`](http://www.php.net/ucwords)功能。直接来自 PHP 文档的示例：

```
$foo = 'hello world!';
$foo = ucwords($foo);             // Hello World!

$bar = 'HELLO WORLD!';
$bar = ucwords($bar);             // HELLO WORLD!
$bar = ucwords(strtolower($bar)); // Hello World! 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-01T04:18:57.247

为了确保一致性，首先将整个字符串设为小写是一种很好的做法。

```
$foo = ucwords(strtolower($string)); 
```

# vb.net - 错误：System.Data.Linq.Binary' 无法转换为 '一维字节数组'

> ID：704042
> 
> 赞同：1
> 
> 时间：2009-04-01T04:15:40.483
> 
> 标签：vb.net, arrays, binary, n-dimensional

我正在尝试使用 linq 从数据库返回二进制文件以在浏览器中显示。下面使用 ado.net 的方法有效，但我正在尝试 ypgrade 到 linq，但 linq 版本返回了错误。

```
 Public Sub ProcessRequest(ByVal context As System.Web.HttpContext) 
    Dim imageId As String = context.Request.QueryString("id")
    Dim ret As DataTable = Nothing
    ret = DPGetImageData.GetImageById(Convert.ToInt64(imageId))

        For Each dt As DataRow In ret.Rows
            For Each c As DataColumn In ret.Columns
                If Not (dt(c) Is Nothing) Then
                    context.Response.Clear()
                    context.Response.BufferOutput = False
                    context.Response.OutputStream.Write(CType(dt.Table.Rows(0).Item("imageData"), Byte()), 0, CInt(dt.Table.Rows(0).Item("imageSize")))
                    context.Response.End()
                End If

            Next
        Next

End Sub 
```

工作 Linq 版本：

```
Public Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest
    If Not String.IsNullOrEmpty(Current.Request.QueryString("Id")) Then
        Dim imageId = HttpContext.Current.Request.QueryString("Id")
        Dim result = repository.FindById(Convert.ToInt64(imageId)).imageData.ToArray
        HttpContext.Current.Response.BinaryWrite(result)
        context.Response.End()

    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T05:02:51.227

您应该可以只调用 Response.BinaryWrite(result.ToArray())。注意括号，ToArray 是一个方法调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T04:43:25.987

您应该不需要强制转换为 Binary.ToArray，已经返回一个字节数组。

另一种方法是直接使用字节数组。您可以在设计器中对其进行修改。

更新：

我不完全确定，但可能是您的 DataContext 已经被处理了。我认为 Binary 类型使用延迟加载。

如果您添加堆栈跟踪，我们可以查看是否是这种情况。

# html - 文件上传 mojibake

> ID：704055
> 
> 赞同：0
> 
> 时间：2009-04-01T04:19:46.743
> 
> 标签：html, file, file-upload, character-encoding, cjk

如何在不遇到[mojibake](http://en.wikipedia.org/wiki/Mojibake)的情况下以 HTML 形式上传文件？

我有一个包含三个字段的表单：

1.  文件字段
2.  必需的文本字段
3.  接受日文字符的文本字段

我已经使用属性设置了我的 HTML 表单`enctype='multipart/form-data'`。但是，当由于缺少必填字段而导致表单提交失败时，我会被重定向到同一页面，但我的第二个文本字段（接受日本字符的那个）已经被 mojibaked。

但是，如果我删除`enctype`或将其更改为其他任何内容，并且当表单提交失败时，我会看到日文字符（没有 mojibake）。问题是，如果成功，我将无法读取上传的文件。

任何想法如何解决这一问题？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T04:38:11.380

Mojibake（日文字符显示错误）可能有两个原因：

1.  页面上的数据采用正确的字符编码，但浏览器无法识别。

2.  页面上的某些字符使用了错误的编码（服务器以错误的编码写入它们）。

如果页面上的其他字符（在您的表单之外）正确显示，则您在服务器上产生了损坏的输出。

如果一切都被破坏了，并且您可以通过从浏览器的菜单中手动设置不同的编码来修复它，那么页面编码没有正确指定。

您使用哪种内容类型的标头和 HTML 元标记？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T12:29:42.327

我已经弄清楚了（通过反向工程 appfuse (appfuse.org) 似乎不受 mojibake 及其文件上传表单的影响）。

它通过在服务器端将字符集编码设置为 UTF-8 来解决这个问题（使用 spring 的 org.springframework.web.filter.CharacterEncodingFilter ）。因此，我猜 multipart-/form-data 确实搞砸了字符编码（或至少对于 java ）。

# java - 在 Web 浏览器的页面中加载小程序

> ID：704059
> 
> 赞同：1
> 
> 时间：2009-04-01T04:21:21.700
> 
> 标签：java, browser, applet

```
import java.applet.Applet;
import java.awt.Color;
public class sampleapp extends Applet {
    public void init() {
        this.setBackground(Color.BLACK);        
    }
} 
```

我正在尝试在 mozilla 浏览器中加载上述小程序。

```
<applet code="sampleapp.class" width="100" height="100"></applet> 
```

在托管该网页（我嵌入小程序的 index.HTML 文件）后，我一直在*Applet sampleapp 启动*时获取网页中的状态信息，但我没有在该托管网页中获取小程序的内容（在我的示例中） ，我没有将小程序的背景设为黑色，而只是得到一个空白网页）。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-12-16T04:14:55.963

您必须通过覆盖该`paint(Graphics g)`方法来实际绘制一些东西。您可能还想覆盖其他一些小程序生命周期方法。查看[关于 Applet 生命周期的 Sun 教程，](http://java.sun.com/docs/books/tutorial/deployment/applet/lifeCycle.html)其中包括顶部附近的基本小程序的工作示例。

# java - 是否有任何开源命令行工具来重构 java 代码？

> ID：704062
> 
> 赞同：19
> 
> 时间：2009-04-01T04:22:48.157
> 
> 标签：java, command-line, refactoring, automated-refactoring

我使用 vim 作为我的编辑器，但我希望在重构方面获得与 Java IDE 相同的功能。是否有任何用于重构 Java 的命令行工具？我可能可以使用 perl 或 vim 脚本编写一些东西，但如果已经有一些东西，我宁愿使用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-01-19T16:07:13.220

你可以试试[Eclim](http://eclim.org/)。Eclim 的目标是在 Vim 中公开 Eclipse 的功能。特别是，有一些支持[重构的命令](http://eclim.org/vim/java/refactor.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-01T04:45:54.670

查看[jrefactory](http://jrefactory.sourceforge.net/csrefactory.html)及其[命令行选项](http://jrefactory.sourceforge.net/csr-commandline.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T05:12:07.553

代码重构是一个对上下文非常敏感且交互繁重的过程，它不适合命令行界面。您可以对特定文件（或一组文件）进行数十种类型的重构，并且提出一个 vim 接口来集成所有这些将是一个重大挑战。

如果您想要 IDE 功能，为什么不使用 IDE？尤其是 Java，它非常适合由 Eclipse 等复杂软件自动重构。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T10:08:34.893

我强烈建议您在 IDE 中使用 VIM（例如[VIMPlugin](http://vimplugin.org/)和 Eclipse - 这是我使用的组合，效果很好）。

我曾经是一个 VIM 顽固分子。然而，现代 IDE 中的重构和代码分析将远远超过 VIM 将提供的任何功能（使用插件等）。

不要误会我的意思。我喜欢 VIM，并且仍然将它用于各种事情。然而，现代 IDE 是最高效的前进路线。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-17T15:07:51.520

我知道这是一个较老的问题，但我问自己这个问题有点回过头来决定写一个。它是新的，还不是“超级棒”，但它是用 GOLANG 编写的，并且是开源的。免责声明，这是我的项目，但我不是自我推销。我只是想我会与其他关心这种性质的东西的人分享。

[https://github.com/asharif/ref](https://github.com/asharif/ref)

# sql-server - 将 XML 数据保存到 SQL Server 的最佳方法是什么？

> ID：704064
> 
> 赞同：10
> 
> 时间：2009-04-01T04:24:28.730
> 
> 标签：sql-server, xml, ado.net, etl, bcp

有没有一条非常直接的直接路线？（即SQL Server可以读取XML）

或者，最好解析 XML 并通过 ADO.Net 以通常的方式将其作为单独的行或批量更新进行传输？

我意识到可能存在涉及大型复杂存储过程的解决方案——虽然我并不完全反对这一点，但我倾向于将我的大部分业务逻辑放在 C# 代码中。我见过使用 SQLXMLBulkLoad 的解决方案，但它似乎需要相当复杂的 SQL 代码。

作为参考，我将一次处理大约 100 行，每行大约有 50 个小数据（字符串和整数）。这最终将成为每天的批处理作业。

您可以提供的任何代码片段将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-01T04:47:24.463

SQL Server 2005 及更高版本有一个名为“XML”的数据类型，您可以将 XML 存储在其中 - 无类型或使用 XSD 模式键入。

您基本上可以从 XML 文字字符串中填充 XML 类型的列，因此您可以轻松地使用普通的 INSERT 语句并将 XML 内容填充到该字段中。

马克

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-01T04:45:09.727

您可以使用函数 OPENXML 和存储过程 sp_xml_preparedocument 轻松地将 XML 转换为行集。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-01T04:47:39.143

如果您使用的是 SQL Server 2008（或 2005），则它具有本`xml`机数据类型。您可以将 XSD 架构与`xml`变量相关联，并直接插入到类型为 的列中`xml`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-01T06:20:44.300

是的，SQL Server 2005 及更高版本可以开箱即用地解析 XML。

您使用节点、值和查询方法来分解它，无论是值还是属性

一些无耻的插播：

*   [将 XML 导入 SQL Server](https://stackoverflow.com/questions/688015/importing-xml-into-sql-server/688790#688790)
*   [在 SQL 中搜索 XML 列](https://stackoverflow.com/questions/697256/697379#697379)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-25T07:26:25.943

Xml 数据和 Xml 文档可能有不同的含义。当 xml 类型适合数据时，它不会保存格式（删除空格），因此在某些情况下（例如配置文件）最好的选择是 nvarchar。

# c# - .net 2.0 应用程序在 64 位处理器中？

> ID：704066
> 
> 赞同：0
> 
> 时间：2009-04-01T04:25:55.077
> 
> 标签：c#, .net-2.0, 64-bit

我们将编写一个针对 64 位服务器的 C# 2.0 (VS2005) 应用程序。

我通过 ms [http://support.microsoft.com/kb/912891#appliesto找到了这个链接](http://support.microsoft.com/kb/912891#appliesto)

“当您运行使用 .NET Framework 构建的 64 位应用程序时，您可能会注意到该应用程序比类似的 32 位应用程序使用更多内存”

我只想知道这个问题解决了吗？？或者有新的SP可以使用？？

提前致谢 ！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T04:51:26.527

这是可以预料的。x64 中的指针比 x32 中的大。这是它的工作方式。

从好的方面来说，你会得到 x64 架构，它伴随着速度、寄存器数量、物理内存大小等方面的提升。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T05:00:48.940

这与.NET 无关。为 64 位处理器构建的每个应用程序都比为 32 位处理器构建的应用程序占用更多内存。

如果您能想出一种将 64 位信息压缩到 32 位寄存器中的方法，我相信我们都很想听听如何做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-09T19:53:07.187

只是别担心。使用 x64 系统，您最多可以安装 16 EB 的 RAM =)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-09T20:03:48.647

This is fixed in .NET 2.0 [Service Pack 1](http://support.microsoft.com/kb/945757/en-us).

# audio - 我在哪里可以学习如何使用音频数据格式？

> ID：704069
> 
> 赞同：0
> 
> 时间：2009-04-01T04:28:46.537
> 
> 标签：audio, mp3, pcm

我正在开发一个涉及说话卡通脸的 openGL 项目。我希望播放语音（编码为 mp3）并使用音频数据为其嘴巴设置动画。我以前从未真正使用过音频，所以我不确定从哪里开始，但一些谷歌搜索让我相信我的第一步是将 mp3 转换为 pcm。

我并不真正预计需要任何傅立叶变换，尽管这可能很好。当有音频时，嘴巴真的只需要四处移动（我想根据音量来做）。

任何有关实现此类功能的提示或资源指针都将不胜感激。谢谢！

-S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T05:08:16.767

无论您做什么，您都需要先将 MP3 解码为 PCM 数据。有许多第三方库可以为您做到这一点。然后，您需要分析 PCM 数据并对其进行一些信号处理。

从音频中自动生成逼真的口型同步数据是一个非常困难的问题，明智的做法是不要尝试解决它。我喜欢你简单地基于音量的想法。计算当前音量的一种方法是使用某种大小（例如 1/16 秒）的滚动窗口，并计算该窗口上声波的平均功率。也就是说，在第 T 帧，您计算帧 [TN, T] 的平均功率，其中 N 是窗口中的帧数。

由于[Parseval 定理](http://en.wikipedia.org/wiki/Parseval%27s_theorem)，我们可以轻松计算波的功率，而无需进行傅里叶变换或任何复杂的操作——平均功率只是窗口中 PCM 值的平方和除以帧数在窗口中。然后，您可以通过将功率除以某个基本功率（为简单起见可以为 1）、取对数并乘以 10来将功率转换为[分贝等级。](http://en.wikipedia.org/wiki/Decibel)

# performance - 紧急编程

> ID：704078
> 
> 赞同：5
> 
> 时间：2009-04-01T04:33:26.850
> 
> 标签：performance, coding-style

理想情况下，您需要一个灵活的日程安排，但是在支付账单和在企业中工作时，程序员很少有这样的奢侈。

我很幸运有史蒂夫·麦康奈尔和弗雷德里克·布鲁克斯的恩典告诉我如果我想搞砸我的项目该怎么办，我认真对待他们的工作。

然而，仍然有一些时候你的背靠墙，你需要加快工作速度。您用来在不牺牲质量的情况下加快交付速度的流程有哪些“调整”？这甚至可能吗？

我认为学习良好实践比学习实际代码更有价值，因此没有“成为更好的编码员”的答案。这是给定的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T04:37:52.347

jpg 比 html 页面快

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T04:41:29.610

在不牺牲质量的情况下，您的最佳选择与您在非关键时间时的最佳选择几乎相同：消除不必要的干扰，首先专注于最重要的工作，获得更好的硬件，并卸载您可以合理卸载的任何工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-01T04:38:09.400

通常，切割特征和工作项目是满足紧迫期限的最佳方式。

您可以尝试加急编码，但您几乎总是会在以后为此付出代价——您将花费更多的时间来调试和稳定加急的代码，而不是一开始节省的时间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-01T04:41:42.947

将我的任务安排在某种小型独立任务列表中（或者，已按顺序处理依赖关系的任务）。然后，就坐下来，一个接一个地从我的盘子里完成一项任务。任何我必须与其他人协调、提出问题等的事情都会向前推进；我只是坐着写代码，没有分心，直到我到达需要某种外部交互的地方。然后我在一批中处理我与其他人的所有协调、重新计划等等，然后再次开始直接编码。

此外，优先考虑并削减所有可选的内容。如果你及时完成了所需的工作，那么就回到可选的工作，但首先做绝对需要的事情。如果您在正确的上下文中更容易完成任务，这可能会稍微放松，但总的来说，尽量将可选部分保持在最低限度。

哦，不要在编码时做出这些判断。编码时，只需从列表中删除一项任务，执行它，然后继续下一项。正如我所说，将所有非编码工作分批成块，这样就不会减慢您的编码速度。

无论如何，这就是我在靠墙时所做的。不确定它对其他人的效果如何。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-01T04:38:28.057

实际上，我认为很多程序员和组织都有很多唾手可得的果实。确保您有效地利用您的时间，知道如何适当地权衡速度与质量，不要“镀金”超出客户要求的东西，等等。

描述您组织的流程。什么是让你慢下来的瓶颈？上下文切换（即多任务处理）通常是真正的生产力杀手。

我想这样做的问题是，当你背对着墙时，像这样的组织改进对自己来说似乎是奢侈品，尽管它们确实可以帮助你加快工作速度。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-01T05:12:58.830

（对我来说）最大的帮助是强迫自己完成每一项任务，然后再进行另一项任务。如果我需要从 libfoo 中找出一些错误，或者甚至编写 libfoo 以继续下一步，我会强迫自己继续完成该任务，然后是下一个，然后是下一个。

大多数时候，我发现自己处于紧缩状态，这是因为我太像一只蚱蜢，从一个事物跳到另一个事物。

今天早上我坐下来强迫自己写一堆单元测试，而不是在被测试的库上工作。这很糟糕，但现在他们已经完成了，我**真的**可以完成我的图书馆了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-01T05:16:08.870

我建议在你进入紧缩*之前学习*[GTD](http://en.wikipedia.org/wiki/Getting_Things_Done)或类似的东西，如果可能的话，使用它来避免紧缩，然后，如果你必须这样做，就可以通过紧缩来度过难关。进入该区域并坚持下去。

 *# .net - 应用部署

> ID：704086
> 
> 赞同：2
> 
> 时间：2009-04-01T04:39:00.177
> 
> 标签：.net

我想将我的应用程序部署到其他机器上。我已经使用 .NET 3.5 使用 Release 版本构建了这个应用程序。部署这个应用程序还需要什么，它可以在其他没有 .NET 框架的机器上工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T04:43:04.583

另一台机器将需要 .NET Framework 以一种或另一种方式。您可以将它与您的安装程序捆绑在一起，您可以让您的安装程序检测到它并在必要时下载并安装它，或者您可以要求您的用户通过 Windows 更新安装框架（如果他们还没有）。

一旦框架在机器上，在最简单的情况下，只需复制 bin\Release 文件夹的内容即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T06:14:45.097

在 Visual Studio 中，将“设置项目”（在“设置和部署”或“其他项目类型”下）添加到当前解决方案。大约最低限度将涉及到设置项目中的“文件系统”，在“应用程序文件夹”下，您要右键单击并“添加项目输出”。只需选择您的应用程序的发布版本。值得您花时间阅读[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms235317.aspx)以熟悉各种选项和设置。安装项目应自动检测您的应用程序依赖项（.NET、DLL 等）

请注意，当您构建安装项目时，您将获得两个安装选项（Setup.exe 和 MySetupProject.msi）。如果您使用 setup.exe，它将运行依赖项检查并通知用户是否需要更新的 .NET 框架或其他库。使用 .msi 无需检查即可轻松安装。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T04:44:21.880

这是一篇不错的[文章](http://www.developer.com/net/net/article.php/3352511)，供您了解如何部署 Windows 应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T07:07:06.720

作为旁白; 如果您不想部署完整的框架；对于 3.5 SP1，有[客户端配置文件](http://weblogs.asp.net/scottgu/archive/2008/05/12/visual-studio-2008-and-net-framework-3-5-service-pack-1-beta.aspx)- 这比“完整的”3.5 SP1 小很多，但省略了一系列（通常是服务器端）的东西，如 web 和 DAL 类。

IMO，更容易支持完整的框架，仅仅是因为它删除了一个额外的变量......

另一种选择是将应用程序开发为 Silverlight；这可能为时已晚，但 Silverlight 提供了非常小的客户端占用空间（并且易于安装）。

有一些程序可以将运行时引导到您的代码中，但我不推荐它们。

# time - 如何计算日出/日落时间？

> ID：704088
> 
> 赞同：23
> 
> 时间：2009-04-01T04:40:52.730
> 
> 标签：time, astronomy

我喜欢跟踪日出和日落时间。在过去的几年里，我一直在用一个用我最喜欢的编程语言的流行库编写的小程序来做这件事。在过去的两个月里，我比平时更经常地跟踪这些时间，我碰巧注意到，在春分那天，日出时间比前一天增加了 8 分钟！我知道这是不可能的，并与[NOAA](http://aa.usno.navy.mil)进行比较，发现我的起落时间已经中断了几天，实际上一年中的大部分时间似乎都偏离了大约一分钟。

在这一点上，我想自己实现计算。有哪些算法或公式可用于进行此计算？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-01T04:52:21.797

您可以考虑阅读维基百科关于[日出方程式](http://en.wikipedia.org/wiki/Sunrise_equation)的文章。开头段落给出了等式：

![](https://upload.wikimedia.org/math/1/c/7/1c7e6d828fd4db1cd6596043daad1c53.png)

在哪里：

*   ω [o]是日出（取负值时）或日落（取正值时）时的[小时角，单位为度 (°)](http://en.wikipedia.org/wiki/Hour_angle)
*   φ 是地球上观察者的纬度，以度为单位
*   δ 是以度为单位的太阳[偏角](http://en.wikipedia.org/wiki/Declination)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2011-03-08T22:00:52.980

如果你想匹配 NOAA，你必须参考 Jean Meeus 的*天文算法*（主要是第 15 章）。而且很复杂！马丁贝克特是正确的，你必须定义日落。通常这是太阳上肢的明显上升或落下，这使您的“标准”海拔高度为 -5/6 度（不是零）。而且你不能用 NOAA 的精度直接计算日出或日落。您必须为所讨论的那一天创建一组明显的赤经和赤纬控制方程，然后随着时间的推移对表观赤经和赤纬进行插值，以找到标准高度的准确上升和落下时间。

希望这可以帮助。当我遇到同样的事情时，我花了大约一个月的时间来消化*AA*并重写我们所有的太阳能代码，但我仍然花了一年多的时间来整理我的代码崩溃的一些极端情况。所以需要一些时间来弄清楚。我不知道该算法的任何公共代码示例，目前也没有任何可分享的内容，但如果可以的话，我很乐意帮助您解决一些令人头疼的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-01T18:48:34.937

对于 5 分钟范围内的准确性，您必须考虑[“哪个”日落](http://en.wikipedia.org/wiki/Twilight)。
你想要太阳底部接触地平线的时间还是太阳顶部经过地平线以下的时间？

太阳穿过地平线需要2分钟。
在 1 分钟以下，您还需要考虑大气折射。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-03-29T21:34:22.043

日出/日落的定义可能会有所不同。例如，在[`ephem`](http://rhodesmill.org/pyephem/)“上升和下降定义为身体上肢接触地平线的时刻（即身体的 alt 加半径等于 0 时）” [[PyEphem 快速参考]](http://rhodesmill.org/pyephem/quick.html#transit-rising-setting)。

```
#!/usr/bin/env python
import datetime
import ephem # to install, run `pip install pyephem`

o = ephem.Observer()
o.lat, o.long, o.date = '34:3', '-118:15', datetime.datetime.utcnow()
sun = ephem.Sun(o)
print "Los Angeles"
print "sunrise:", o.next_rising(sun), "UTC"
print "sunset:",o.next_setting(sun), "UTC" 
```

### 输出

```
Los Angeles, CA
sunrise: 2010/3/30 13:42:43 UTC
sunset: 2010/3/30 02:11:50 UTC 
```

如果它是开源库，那么您可以修复它，而不是创建一个带有新错误的新库。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-06-01T18:36:39.063

看看这本书：
Peter Duffett-Smith 的“用计算器进行实用天文学（平装本）”。
它很旧，但仍在印刷中... [链接](https://rads.stackoverflow.com/amzn/click/com/0521356997)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-02-23T19:25:38.123

在 Ruby 中，我为时间等式写了这个。

```
include Math

# degrees to radians = PI/180
to_r = PI/180.0

#radians to degrees = 180/PI
to_d = 180.0/PI

puts "Day, Declination, EofT"

# test a celestial year worth of values.
for jday in 1..366

  et = -7.633 * sin(jday * (2 * PI)/365.24) + 9.65 * sin((jday - 78) * 180/92 * to_r)
  a_sin = sin(23.433 * to_r) * sin((2 * PI/366) * (jday - 81))
  declination = asin(a_sin) * to_d
  puts "#{jday}, #{declination}, #{et}"

end 
```

那么对于上面的等式：

```
# center disk and refraction factor have been considered.
cos_omega = sin(-0.83 * to_r) - tan(latitude * to_r) * tan(declination * to_r)
semi_diurnal_arc = acos(cos_omega) 
```

[在http://www.analemma.com/](http://www.analemma.com/)上有一个专门的网站

*   这些计算的关键是好的库，比如上面的 python 库。
*   还使用日期和时间类。我会在 ruby​​forge 上寻找类似 ehem 的东西。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-01T04:50:18.060

我确实在[这个 NOAA 页面上](http://aa.usno.navy.mil/faq/docs/RST_defs.php)的技术定义和计算详细信息标题下看到了一些有趣的东西，但我相信您已经阅读过。

SO问题“[给定一天中的太阳位置和纬度/经度](https://stackoverflow.com/questions/257717/position-of-the-sun-given-time-of-day-and-lat-long)”的答案实际上可能就是您所需要的。

作为旁注（它不直接回答您的问题），您是否有理由不能提取 NOAA 数据并将其用作查找表而不是计算它？如今，存储往往相对便宜。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-01T04:55:48.903

[您可能想查看有关计算太阳位置的较早条目。](https://stackoverflow.com/questions/257717/position-of-the-sun-given-time-of-day-and-lat-long/257984#257984 "计算太阳的位置") 具体来说，我指出的 Solpos 程序支持日出/日落。

# .htaccess - RewriteBase 如何在 .htaccess 中工作

> ID：704102
> 
> 赞同：244
> 
> 时间：2009-04-01T04:45:41.813
> 
> 标签：.htaccess, mod-rewrite

我在几个`.htaccess`例子中看到了这一点

```
RewriteBase / 
```

它在功能上似乎与`<base href="">`HTML 有点相似。

我相信它可能会自动将其值添加到`RewriteRule`语句的开头（可能是没有前导斜杠的语句）？

我无法让它正常工作。我认为它的使用对于站点可移植性非常方便，因为我经常有一个与生产服务器不同的开发服务器。我目前的方法让我从我的`RewriteRule`陈述中删除部分内容。

谁能简单地向我解释一下如何实现它？

谢谢

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2009-04-01T05:28:47.717

用我自己的话来说，在阅读了文档并进行了实验之后：

您可以使用为您的重写`RewriteBase`提供*基础*。考虑这个

```
# invoke rewrite engine
    RewriteEngine On
    RewriteBase /~new/

# add trailing slash if missing
    rewriteRule ^(([a-z0-9\-]+/)*[a-z0-9\-]+)$ $1/ [NC,R=301,L] 
```

这是我用来确保 URL 尾部有斜杠的真实规则。这将转换

```
http://www.example.com/~new/page 
```

到

```
http://www.example.com/~new/page/ 
```

通过`RewriteBase`那里，您可以使相对路径脱离`RewriteBase`参数。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2015-01-13T00:36:28.523

`RewriteBase`仅适用于***相对***重写规则的***目标。***

 **   像这样使用 RewriteBase ...

    ```
    RewriteBase /folder/
    RewriteRule a\.html b.html 
    ```

*   本质上与...相同

    ```
    RewriteRule a\.html /folder/b.html 
    ```

*   但是当 .htaccess 文件在里面时，`/folder/`它也指向同一个目标：

    ```
    RewriteRule a\.html b.html 
    ```

尽管文档暗示始终使用 a `RewriteBase`，但 Apache 通常会正确检测 DocumentRoot 下的路径，除非：

*   您正在使用`Alias`指令

*   您正在使用 .htaccess 重写规则对*相对 URL执行**HTTP 重定向*（而不仅仅是静默重写）

 *在这些情况下，您可能会发现需要指定 RewriteBase。

但是，由于它是一个令人困惑的指令，通常最好在重写目标中简单地指定绝对（也称为“根相对”）URI。其他阅读您的规则的开发人员会更容易掌握这些规则。

* * *

*在这里引用[Jon Lin 出色的深入回答](https://stackoverflow.com/a/21348047/195835)：*

在 htaccess 文件中，mod_rewrite 的工作方式类似于 a`<Directory>`或`<Location>`容器。并且[`RewriteBase`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritebase)用于提供相对路径基础。

例如，假设您有以下文件夹结构：

```
DocumentRoot
|-- subdir1
`-- subdir2
    `-- subsubdir 
```

所以你可以访问：

*   `http://example.com/` （根）
*   `http://example.com/subdir1` （子目录1）
*   `http://example.com/subdir2` (子目录2)
*   `http://example.com/subdir2/subsubdir` （子目录）

通过 a 发送的 URI`RewriteRule`相对于包含 htaccess 文件的目录。因此，如果您有：

```
RewriteRule ^(.*)$ - 
```

*   在根 htaccess 中，请求是`/a/b/c/d`，那么捕获的 URI ( `$1`) 是`a/b/c/d`。
*   如果规则在`subdir2`且请求在，`/subdir2/e/f/g`则捕获的 URI 为`e/f/g`.
*   如果规则在 中`subsubdir`，并且请求在 中`/subdir2/subsubdir/x/y/z`，则捕获的 URI 是`x/y/z`。

**规则所在的目录已从 URI 中剥离了该部分。重写基础对此没有影响，这只是每个目录的工作方式。**

rewrite base*所做的是为***规则的 target**中的任何相对路径提供 URL-path base（*而不是*file-path base）。所以说你有这个规则：

 **```
RewriteRule ^foo$ bar.php [L] 
```

这`bar.php`是一个相对路径，而不是：

```
RewriteRule ^foo$ /bar.php [L] 
```

其中`/bar.php`是绝对路径。绝对路径将*始终*是“根”（在上面的目录结构中）。这意味着无论规则是否在“root”、“subdir1”、“subsubdir”等中，`/bar.php`路径始终映射到`http://example.com/bar.php`.

但是另一条规则，使用相对路径，它基于规则所在的目录。所以如果

```
RewriteRule ^foo$ bar.php [L] 
```

在“根”中，你去`http://example.com/foo`，你得到服务`http://example.com/bar.php`。但是，如果该规则在“subdir1”目录中，并且您转到`http://example.com/subdir1/foo`，您将得到服务`http://example.com/subdir1/bar.php`。等等。这有时有效，有时无效，正如文档所说，它应该是相对路径所*必需*的，但大多数时候它似乎有效。除非您正在重定向（使用`R`标志，或者因为您`http://host`在规则的目标中有隐含）。这意味着这条规则：

```
RewriteRule ^foo$ bar.php [L,R] 
```

如果它在“subdir2”目录中，并且您转到`http://example.com/subdir2/foo`，则 mod_rewrite 会将相对路径误认为是文件路径而不是 URL 路径，并且由于该`R`标志，您最终会被重定向到类似的内容：`http://example.com/var/www/localhost/htdocs/subdir1`。这显然不是你想要的。

**这就是`RewriteBase`进来的地方。该指令告诉 mod_rewrite 将什么附加到每个相对路径的开头。**所以如果我有：

```
RewriteBase /blah/
RewriteRule ^foo$ bar.php [L] 
```

在“subsubdir”中，去`http://example.com/subdir2/subsubdir/foo`实际上会为我服务`http://example.com/blah/bar.php`。“bar.php”被添加到基数的末尾。在实践中，这个例子通常不是你想要的，因为你不能在同一个目录容器或 htaccess 文件中有多个碱基。

在大多数情况下，它是这样使用的：

```
RewriteBase /subdir1/
RewriteRule ^foo$ bar.php [L] 
```

这些规则将在“subdir1”目录中，并且

```
RewriteBase /subdir2/subsubdir/
RewriteRule ^foo$ bar.php [L] 
```

将在“subsubdir”目录中。

这部分地允许您使您的规则可移植，因此您可以将它们放在任何目录中，并且只需要更改基础而不是一堆规则。例如，如果您有：

```
RewriteEngine On
RewriteRule ^foo$ /subdir1/bar.php [L]
RewriteRule ^blah1$ /subdir1/blah.php?id=1 [L]
RewriteRule ^blah2$ /subdir1/blah2.php [L]
... 
```

这样`http://example.com/subdir1/foo`将服务`http://example.com/subdir1/bar.php`等。假设您决定将所有这些文件和规则移动到“subsubdir”目录。而不是改变`/subdir1/`to的每个实例`/subdir2/subsubdir/`，你可以有一个基础：

```
RewriteEngine On
RewriteBase /subdir1/
RewriteRule ^foo$ bar.php [L]
RewriteRule ^blah1$ blah.php?id=1 [L]
RewriteRule ^blah2$ blah2.php [L]
... 
```

然后当您需要将这些文件和规则移动到另一个目录时，只需更改基础：

```
RewriteBase /subdir2/subsubdir/ 
```

就是这样。

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2012-01-20T13:41:54.627

AFAIK，RewriteBase 仅用于修复 mod_rewrite 在`.htaccess`不在站点根目录的文件中运行的情况，并且它猜测它正在运行的文件夹的错误 Web 路径（而不是文件系统路径）。所以如果你有映射到`http://example.com/myfolder`您的文件夹中的 .htaccess 中的 RewriteRule 可以使用：

```
RewriteBase myfolder 
```

如果 mod_rewrite 不能正常工作。

试图用它来实现一些不寻常的事情，而不是解决这个问题，这听起来像是一个让你非常困惑的秘诀。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2010-12-13T20:28:36.957

RewriteBase 仅在您只能将 .htaccess 放在站点根目录的情况下才有用。否则，您最好将不同的 .htaccess 文件放在站点的不同目录中并完全省略 RewriteBase 指令。

最近，对于复杂的站点，我一直在将它们删除，因为它使得从测试部署文件到实际运行变得更加复杂。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2012-11-30T20:32:48.977

当我开发时，它位于文件夹中的不同域上。当我上线一个网站时，该文件夹不再存在。使用 RewriteBase 允许我在两种环境中使用相同的 .htaccess 文件。

直播时：

```
RewriteBase /
# RewriteBase /dev_folder/ 
```

开发时：

```
# RewriteBase /
RewriteBase /dev_folder/ 
```

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2013-03-24T14:39:02.870

我发现的最清楚的解释不在当前的 2.4 apache 文档中，而是在[2.0 版本](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewritebase)中。

```
#  /abc/def/.htaccess -- per-dir config file for directory /abc/def
#  Remember: /abc/def is the physical path of /xyz, i.e., the server
#            has a 'Alias /xyz /abc/def' directive e.g.

RewriteEngine On

#  let the server know that we were reached via /xyz and not
#  via the physical path prefix /abc/def
RewriteBase   /xyz 
```

它是如何工作的？对于 apache 黑客，这个 2.0 文档继续提供“有关内部处理步骤的详细信息”。

经验教训：虽然我们需要熟悉“当前”，但可以在编年史中找到宝石。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2011-10-16T14:10:55.557

此命令可以显式设置重写的基本 URL。如果您希望从域的根目录开始，您将在 RewriteRule 之前包含以下行：

```
RewriteBase / 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-02-13T01:39:23.517

我相信 Apache 文档的这段摘录很好地补充了之前的答案：

> 当您在每个目录 (htaccess) 上下文中的替换中使用相对路径时，需要此指令，除非以下任一条件为真：
> 
> *   原始请求和替换位于 DocumentRoot 下（与通过其他方式（例如别名）可访问相反）。
>     
>     
> *   包含 RewriteRule 的目录的文件系统路径（以相对替换为后缀）作为服务器上的 URL 路径也是有效的（这种情况很少见）。
>     
>     
> 
> 如前所述，在其他情况下，只有使您的规则更短才有用。此外，同样如前所述，您可以通过将 htaccess 文件放在子目录中来实现相同的目的。

# iis - NAnt Web 应用程序部署

> ID：704104
> 
> 赞同：3
> 
> 时间：2009-04-01T04:46:31.250
> 
> 标签：iis, nant, web-deployment-project

再会。

我正在尝试使用 NAnt 部署 Web 应用程序。它是当前使用 NAnt ZIP 任务压缩的。

我可以尝试从 NAnt 调用 MSDeploy，但我不认为 MSDeploy 是为此类部署编写的。

我也可以尝试使用 NAnt 任务。

有人对哪种方法可以节省我最多的时间有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T05:46:59.890

使用 aspnet 编译器是最简单的方法，它可以让您访问所有在 nant 任务上不可用的 cl 参数。不知道为什么会这样。

这就是我所做的

```
<property name="aspnetcomplier" value="C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_compiler.exe" />
  <target name="deploy">
    <mkdir dir="${output.dir}" />
    <exec program="${aspnetcomplier}">
      <arg value="-v" />
      <arg value="/trunk" />
      <arg value="-p" />
      <arg value="${source.dir}\Root" />
      <arg value="-f" />
      <arg value="${output.dir}" />
    </exec>
  </target 
```

没什么复杂的。像魅力一样工作。
PS*不要忘记执行 iisreset /stop 和 /start*

```
 <target name="stop.iis" >
    <servicecontroller action="Stop" service="w3svc" timeout="10000" verbose="true" />
  </target>

  <target name="start.iis" >
    <servicecontroller action="Start" service="w3svc" timeout="10000" verbose="true" />
  </target> 
```

# equinox - 如何计算春分/至日时刻？

> ID：704108
> 
> 赞同：10
> 
> 时间：2009-04-01T04:49:36.657
> 
> 标签：equinox, astronomy

有哪些算法或公式可用于计算分点和至点？几年前我找到了其中一个并实施了它，但精度不是很好：一天中的时间似乎假定为 00:00、06:00、12:00 和 18:00 UTC，具体取决于哪个春分或计算至日。维基百科将这些计算结果精确到分钟，因此必须有更精确的结果。我最喜欢的编程语言的库也出现在那些硬编码的时代，所以我假设它们使用的算法与我实现的算法相同或相似。

我也曾经尝试使用一个库，该库提供了太阳经度，并在 0、90、180 和 270 度的确切时刻执行了一个搜索程序来归零；这一直有效，但与 Wikipedia 中的时间不一致，所以我认为这种方法有问题。然而，我惊喜地发现迈蒙尼德（中世纪的犹太学者）在一千年前使用完全相同的想法提出了一种算法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-12-22T22:47:39.573

（复杂！）基础公式和算法的一个重要来源是Jean Meeus 的[Astronomical Algorithms](https://rads.stackoverflow.com/amzn/click/com/0943396611)。

使用这些算法的[PyMeeus](https://pymeeus.readthedocs.io/en/latest/index.html)实现和下面的代码，您可以获得 2018 年冬至的以下值（其中“冬天”是指北半球）。

```
winter solstice for 2018 in Terrestrial Time is at:
 (2018, 12, 21, 22, 23, 52.493725419044495)

winter solstice for 2018 in UTC, if last leap second was (2016, 12):
 (2018, 12, 21, 22, 22, 43.30972542127711)

winter solstice for 2018 in local time, if last leap second was (2016, 12)
 and local time offset is -7.00 hours:
 (2018, 12, 21, 15, 22, 43.30973883232218)

i.e. 2018-12-21T15:22:43.309725-07:00 
```

当然，答案并不精确到微秒，但我也想展示如何使用`arrow`.

**代码：**

```
from pymeeus.Sun import Sun
from pymeeus.Epoch import Epoch

year = 2018  # datetime.datetime.now().year
target="winter"

# Get terrestrial time of given solstice for given year
solstice_epoch = Sun.get_equinox_solstice(year, target=target)

print("%s solstice for %d in Terrestrial Time is at:\n %s" %
      (target, year, solstice_epoch.get_full_date()))

print("%s solstice for %d in UTC, if last leap second was %s:\n %s" %
 (target, year, Epoch.get_last_leap_second()[:2], solstice_epoch.get_full_date(utc=True)))

solstice_local = (solstice_epoch + Epoch.utc2local()/(24*60*60))
print("%s solstice for %d in local time, if last leap second was %s\n"
 " and local time offset is %.2f hours:\n %s" %
 (target, year, Epoch.get_last_leap_second()[:2],
  Epoch.utc2local() / 3600., solstice_local.get_full_date(utc=True))) 
```

使用更酷的 ISO 和 TZ 感知模块[Arrow: Better dates and times for Python](https://arrow.readthedocs.io/en/latest/)，可以更好地打印：

```
import arrow
import math

slutc = solstice_epoch.get_full_date(utc=True)
frac, whole = math.modf(slutc[5])

print("i.e. %s" % arrow.get(*slutc[:5], int(whole), round(frac * 1e6)).to('local')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T05:14:40.997

我知道您正在寻找可以粘贴到此处的答案的内容，但我不得不提一下[SPICE](http://naif.jpl.nasa.gov/naif/)，这是一个由 JPL 的 NAIF 制作的工具包，由 NASA 资助。对于 Farmer's Almanac 的东西来说，这可能有点矫枉过正，但你提到了对精确度的兴趣，而且这个工具包经常用于行星科学。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T05:01:39.967

我不确定这是否对您来说是一个足够准确的解决方案，但我发现了一个[NASA 网站](http://aom.giss.nasa.gov/srvernal.html)，其中包含一些用于计算春分点的代码片段以及一些其他天文类型的信息。我还找到了一些对名为《[天文算法](https://rads.stackoverflow.com/amzn/click/com/0943396611)》的书的参考，如果网上无法获得相关信息，它可能会提供您需要的答案。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-05-28T17:29:19.077

如果您有兴趣，我已经用 C 和 Java 实现了 Jean Meeus（上面提到的天文算法的作者）的春分和至日算法。

# animation - 编程 3D 动画？

> ID：704115
> 
> 赞同：8
> 
> 时间：2009-04-01T04:58:50.800
> 
> 标签：animation, 3d

处理 3D 游戏动画的不同方法有哪些？您是否以某种方式在建模器中对动画进行编程，从而对文件进行编程，而不是在游戏中读取和实现它们，或者您是否创建动画函数来为您的静止向量设置动画？

哪里有一些关于编程方面的好教程？谷歌只给了我建模者的一面。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-04-01T05:20:37.580

在生产环境中，动画师使用 Autodesk 的 3DS Max 等专用工具来生成 3D 模型的关键帧动画。对于每个模型的每个动画，动画师都会为模型构建一些称为*关键帧*的姿势，然后将其导出为游戏的数据格式。

游戏然后加载这些关键帧，并在特定时间为模型设置动画，它选择两个最近的关键帧并在它们之间进行插值以提供平滑的动画，即使是少量的关键帧。

动画模型通常使用骨骼层次结构构建。有一个根骨，它控制着模型在游戏世界中的位置和方向。所有其他骨骼都相对于某些父骨骼定义以创建树。模型的每个顶点都与特定的骨骼相关联，因此可以使用更少的参数来控制模型：每个骨骼的相对位置、方向和比例。

平滑蒙皮是一种用于提高动画质量的技术。使用平滑蒙皮，一个顶点不只绑定到一个骨骼，而是可以绑定到多个具有相应权重的骨骼（通常设置硬限制，例如 4；顶点很少需要超过 3 个）。这使得动画师的工作更加困难，因为他必须在关节附近的顶点上做更多的工作，但结果是动画更平滑，关节周围的失真更少。

或者，一些游戏使用*程序动画*，其中动画数据是在运行时构建的。骨骼位置和方向是根据一些算法计算的，例如[逆运动学](http://en.wikipedia.org/wiki/Inverse_kinematics)或[布娃娃物理学](http://en.wikipedia.org/wiki/Ragdoll_physics)。其他选项当然是可用的，但它们必须由程序员编写。

与程序性地为骨骼设置动画并使用正向运动学来确定模型所有顶点的位置不同，另一种选择是仅程序性地自行生成每个顶点的位置。这允许不受骨骼层次结构约束的更复杂的动画，但当然它要复杂得多，也更难做好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-15T05:22:37.243

**在游戏中处理动画的不同方法？**

对于字符，通常：

1.  骨骼变形
2.  混合形状
3.  有时甚至是完全动画的网格（LA. Noire 做到了）
4.  在最近的《古墓丽影》中，我们使用计算作业来模拟头发的数千条样条线，并且顶点由这些带有顶点着色器的样条线控制。

通常这些是由在运行时插入的关键帧动画驱动的，有时我们会添加代码以程序方式驱动影响（骨骼、混合形状权重等）。

对于一些刚性移动的简单对象，有时设计会对整个对象进行动画控制，而不必对其进行变形。有时，可以通过使用类似于 blendshapes 的东西来使灌木等简单的东西移动，在这种情况下，您可以在一些极端情况下拥有完整的网格姿势，并且在这些极端情况之间进行混合。

**至于教程**……嗯……您是对自己编写动画数学感兴趣，还是对在游戏中获得一些动画角色并专注于游戏玩法更感兴趣？

仅仅为了玩游戏，Unity 是一个非常棒的平台。

但是，如果您有兴趣了解动画或游戏的一般数学知识，那么这是我作为入门读到的内容：

*   用于 3d 变换的矩阵（确保您了解交换律、结合律和分配律，并了解每一行和每一列代表什么——它们比看起来更简单）
*   用于旋转的四元数（不太直观，但与轴和旋转紧密耦合）

并且不要遗漏基础知识：

*   矢量点积
*   向量叉积

就像 10 年前一样，我写了一个简单的动画库，它非常简单，没有大多数更高级的概念，所以如果你想了解它是如何工作的，这不是一个坏地方：[http:// animadead.sf.net](http://animadead.sf.net)

祝你好运！

# algorithm - 谷歌使用什么搜索算法/概念？

> ID：704120
> 
> 赞同：6
> 
> 时间：2009-04-01T05:01:49.590
> 
> 标签：algorithm, full-text-search, scalability

谷歌使用什么搜索算法/概念？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-01T05:04:21.253

[大型超文本 Web 搜索引擎剖析](http://infolab.stanford.edu/~backrub/google.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-01T05:39:02.450

# 索引

## 如果您想了解基础知识：

谷歌使用互联网的倒排索引。这意味着谷歌有一个基于每个页面中的术语的所有页面的索引。例如，*Google*一词映射到此页面、Google 主页和 Google 的 Wikipedia 文章等。

因此，当您访问 Google 并在搜索框中键入“Google”时，Google 会检查其对 Internet 上所有可用术语的索引，并找到术语“Google”的条目以及包含该术语的所有页面的列表其中引用。

## 对于资深用户：

但是，Google 的索引超出了您简单的倒排索引。这就是为什么谷歌是最好的。谷歌的爬虫（蜘蛛）很聪明。很聪明。除了跟踪任何给定网页上的术语之外，它们还跟踪相关页面上的单词并将它们链接到给定文档。

换句话说，如果一个页面中包含*Google*一词，并且该页面有一个链接到另一个网页或从另一个网页链接，则另一个页面也可能在索引中以*Google*一词引用。所有这些以及更多内容都涉及为给定查询返回给定页面的原因。

如果您想了解为什么页面按照它们在搜索结果中的顺序排列，那就会涉及到更有趣的东西。

# 排行

## 回到基础：

搜索引擎可以用来对结果进行排序的最基本算法之一可能被称为词频逆文档频率 (tf-idf)。简而言之，这意味着您的结果将按照搜索词在文档中的相对重要性进行排序。换句话说，一份有 10 页并列出一次*Google*一词的文档不如一份只有 1 页并列出十次*Google一词的文档重要。*

## 对于资深用户：

同样，在排名结果方面，谷歌比您的基本搜索引擎做得更多。谷歌已经实施了上述专利的 PageRank 算法。简而言之，PageRank 通过考虑给定页面的人口/重要性来增强 tf-idf 算法。在这一点上，流行度/重要性可以通过谷歌不会告诉我们的许多因素来判断。然而，在最基本的层面上，谷歌可以判断一个页面比另一个更重要，因为其他页面的加载和加载链接到它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-01T05:21:21.527

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-01T05:04:47.277

[PageRank](http://en.wikipedia.org/wiki/PageRank)是**Google**用于搜索引擎的**链接分析算法，但该专利已转让给***斯坦福大学*。

 **** * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-15T17:01:47.837

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T05:18:45.603

[倒排索引](http://en.wikipedia.org/wiki/Inverted_index)和[MapReduce](http://en.wikipedia.org/wiki/MapReduce)是大多数搜索引擎的基础（我相信）。您在内容上创建索引并针对该索引运行查询以显示相关性。然而，谷歌所做的不仅仅是一个简单的索引每个单词出现的位置，他们还做了它出现了多少次，它出现在哪里，它与其他单词的关系出现在哪里，排序等等。另一个使用的简单概念是“停用词”，其中可能包括“and”、“the”等（基本上是“简单”的词，经常出现，通常不是查询的重点）。此外，他们使用诸如 Page Rank（由 TStamper 提到）之类的东西来按相关性和重要性对页面进行排序。

MapReduce 基本上是把一项工作分成更小的工作，然后让这些更小的工作在许多系统上运行（部分是为了可扩展性，部分是为了速度）。如果我没记错的话，谷歌能够利用“普通”计算机将工作分配给服务器级计算机而不是服务器级计算机。由于一台计算机的处理能力正在达到顶峰，许多技术正朝着云计算发展，其中一项工作由许多物理机器完成。

我不确定谷歌做了多少搜索，它更准确地抓取。不同之处在于它们只是从特定点开始，然后爬到任何可以到达的地方并重复，直到遇到某种死胡同。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-02-16T09:42:39.513

在对页面排名算法和类似算法感兴趣的同时，我发现在年初引入个人搜索（没有被广泛评论）似乎发生了很大变化 - 请参阅 [Google 黄金标准的失败](http://www.i-programmer.info/the-stone-tapes/590-the-failure-of-the-google-gold-standard.html://)和 [Google 的个性化结果](http://searchengineland.com/googles-personalized-results-the-new-normal-31290)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-03T08:42:34.417

这个问题不能规范地回答。谷歌（和其他搜索引擎）使用的算法是他们最严密的机密，并且不断变化。每个正确答案都可能在一个月或一年后无效。

[（我知道这并不能真正回答问题，但这就是重点，没有可能的答案。）]

# vbscript - 开始了，有什么建议吗？

> ID：704124
> 
> 赞同：0
> 
> 时间：2009-04-01T05:04:15.530
> 
> 标签：vbscript

我已经开始使用 C# 工作了将近几个月，我正在寻找更具挑战性和趣味性的东西。我使用了一个名为 media monkey 的媒体播放器，它支持自定义 vb 脚本，我制作了一个将文件写入播放当前歌曲的目录，并且每次播放新歌曲时都会通过重写之前的内容来更新。

现在我想将此信息添加到数据库并记录下来，并可能在我的主页上添加信息。我知道我可以破解它的工作方式，但我想知道做事的“专业方式”是什么。

我想出了以下内容并被卡住了。我需要一个 ODBC 驱动程序来连接一个看起来很乱的数据库，Web 服务可以工作吗？那将如何运作？VbScript 可以调用 dll 文件来调用 Web 服务来修改单独服务器上的数据吗？这样做安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T05:54:51.647

许多专业的 C# 应用程序都是 n 层的。在您的情况下，您可能会像这样分层：

在服务器上： -数据库存储 -数据库访问/业务层（有时是两个不同的组件，取决于应用程序的复杂程度）
-Web 服务

在客户端：
-Web 服务客户端
-支持客户端功能的任何其他层。

因此，数据库存储类似于 Oracle 或 Microsoft SQL Server 中的某些表，并且会在您的服务器上。

数据库访问/业务层将是您的代码，用于在数据库中检索和存储数据。它还可能包含业务对象，它们基本上是具有代表数据库中数据的属性的类。数据访问层的好处是有时读取和写入数据库可能需要专门的代码，而您不希望这些代码散布在您的应用程序中。因此，您可以在数据访问层中调用将所需数据加载到对象中的函数，因此应用程序的其余部分只是与常规的旧 .NET 对象/类进行交互。这些被称为 POCO，代表类似于 Plan Old CLR Object 的东西。当然，这有很多变化，因为人们对隔离数据库访问的问题采取了不同的方法。它还用于在数据库更改时最小化中断更改。由于数据库访问逻辑并没有散布在整个应用程序中，因此如果数据库发生更改（例如向表中添加新列或更改名称），需要更新的地方就更少了。

有时业务层将是它自己的层，并且将包含应用程序的大部分“逻辑”。它将位于数据访问层和 Web 服务层之间。使用面向服务架构 (SOA) 的概念，您可能拥有一个身份验证服务和一个 Web 请求处理服务。这些服务很像一个总是被实例化的类，在那里等待处理请求。您的 Web 请求处理服务将接受一个请求，并且可能首先调用身份验证服务来验证凭据，然后再接受该请求。SOA 是我认为只有在适当的时候才应该使用的东西之一。在某些情况下，仅使用面向对象技术会给您带来相同的好处。但并非总是如此。SOA，如果做得好，更具可扩展性，

Webservice 将负责接收来自 Web 的请求，解析/解释它们，并通过调用业务层来更新或检索数据来处理这些请求。

因此，这里的概念是，您可以让您的服务的许多用户通过您的服务发布他们的歌曲更新。

您的客户端将有一个“Web 服务客户端”层，负责将请求格式化为消息、将它们发送到 Web 服务以及从 Web 服务中检索消息。您将在 Web 服务层中放置很少的应用程序“逻辑”。

现在所有这些对于您想要做的事情来说可能是多余的和低效的，因为您只是想要自己的东西，但它是许多 Web 服务应用程序的基本剖析，并且将是一个很好的学习练习。这些层的全部目的是解耦和简单。虽然更多的层/组件使应用程序整体更复杂，但这意味着每个组件都更简单。这意味着当您只处理一个只与其他几个组件（环绕层）交互的组件时，更容易解决问题。因此，在少数组件和许多组件之间存在谨慎的平衡。太少了，它们变得单一且难以管理。太多了，它们以复杂的方式交织在一起。我听说它说了类似“ 在决定是否要拆分组件之前，先评估组件的复杂程度。有时对于简单的情况，您有一个用于多个目的的层，以便更快地完成它并使整体设计更简单。关键是，在适当的地方应用这些概念。你会通过经验学会什么是合适的，你显然明白通过“做”可以学到最多的东西。在决定是否要拆分组件之前，先评估组件的复杂程度。有时对于简单的情况，您有一个用于多个目的的层，以便更快地完成它并使整体设计更简单。关键是，在适当的地方应用这些概念。你会通过经验学会什么是合适的，你显然明白通过“做”可以学到最多的东西。

“vbscript 可以调用 COM 组件吗？” 您可以编译具有 COM 支持的 .NET DLL。许多旧的东西可以调用 COM dll。

我用谷歌搜索：vbscript dll 得到了这个：[VB Script and DLLs](http://www.ssuet.edu.pk/taimoor/books/1-57521-124-6/ch19.htm#VBScriptandDLLs)

“这样做安全吗？” 您的网络服务将是您最关心安全性的地方。只有在设计时考虑到安全性并且不要搞砸，它才是安全的。不过，有时我们都会搞砸，这意味着不能保证它是完全安全的。

# oracle - Oracle 的客户端工具？

> ID：704127
> 
> 赞同：0
> 
> 时间：2009-04-01T05:06:58.550
> 
> 标签：oracle

我有一个使用现有 oracle 数据库的新项目。我一直是 SQLServer 人，所以第一次接触 Oracle。

对于 Oracle的[SQLServer Management Studio](http://www.microsoft.com/en-us/download/details.aspx?id=8961)类型应用程序有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-01T05:51:37.570

我将从[Oracle SQL Developer](http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html)开始。它是一个客户端应用程序，因此您可以查看您的表、运行查询等。它免费、快速并且可以帮助您入门。

（当然，它不如蟾蜍）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T05:13:21.717

[蟾蜍](http://www.toadsoft.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T11:23:37.773

您还可以使用 pl/sql 开发人员：[http ://www.allroundautomations.com/plsqldev.html?gclid=CJLCqNrIz5kCFYQ-3godM3Pmug](http://www.allroundautomations.com/plsqldev.html?gclid=CJLCqNrIz5kCFYQ-3godM3Pmug)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-01-26T03:52:42.150

我个人最喜欢 Toad，但我知道很多人更喜欢 SQL Developer。两者都有明确的优点和缺点，但就像很多事情一样，它归结为你习惯的东西。我没有太多使用 Toad 的免费软件版本，但我听说它有点缺乏。在我看来，如果您有钱可以使用 Toad，如果您正在寻找免费的东西，请使用 SQL Developer。

# python - 如何在 Vim 中转置文件中行和列的内容？

> ID：704130
> 
> 赞同：14
> 
> 时间：2009-04-01T05:09:10.120
> 
> 标签：python, vim, text-files, text-parsing

我知道我可以使用 Awk，但我在 Windows 机器上，并且我正在为可能没有 Awk 的其他人创建一个函数。我也知道我可以编写一个 C 程序，但我不希望为我正在制作的一个小 Vim 实用程序提供需要编译和维护的东西。

原始文件可能是：

```
THE DAY WAS LONG 
THE WAY WAS FAST 
```

在转置之后，它应该变成：

```
TT
HH
EE

DW
AA
YY

WW
AA
SS

LF
OA
NS
GT 
```

### 更新

*   高尔夫规则适用于选择正确答案。
*   Python 爱好者应该在下面查看[Charles Duffy 的答案](https://stackoverflow.com/a/704139/254635)。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-01T09:42:24.583

这是 Vim 语言的命令。所以你不必编译带有 +python 支持的 Vim。

```
function! s:transpose()
    let maxcol = 0
    let lines = getline(1, line('$'))

    for line in lines
        let len = len(line)
        if len > maxcol 
            let maxcol = len
        endif
    endfor

    let newlines = []
    for col in range(0, maxcol - 1)
        let newline = ''
        for line in lines
            let line_with_extra_spaces = printf('%-'.maxcol.'s', line)
            let newline .= line_with_extra_spaces[col]
        endfor
        call add(newlines, newline)
    endfor

    1,$"_d
    call setline(1, newlines)
endfunction

command! TransposeBuffer call s:transpose() 
```

把它放在 vim/plugin 目录中新创建的 .vim 文件中，或者把它放到你的 [._]vimrc 中。
执行`:TransposeBuffer`转置当前缓冲区

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-01T05:13:33.073

Vim 支持多种内置脚本语言——[以 Python 接口](http://www.vim.org/htmldoc/if_pyth.html)为例。

只需`vim.current.buffer`适当修改即可。

更具体一点：

```
function! Rotate()
python <<EOF
import vim, itertools
max_len = max((len(n) for n in vim.current.buffer))

vim.current.buffer[:] = [
    ''.join(n) for n in itertools.izip(
        *( n + ' ' * (max_len - len(n))
           for n in vim.current.buffer))]
EOF
endfunction 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-01T10:01:20.153

如果脚本不为您执行此操作，您可以将操作记录到寄存器中（添加回车是为了便于阅读）：

```
qa
1G0
xGo<Esc>p
1G0j
xGp
q 
```

这将为您提供一个可以针对上述示例运行的宏，或任何相同长度的 2 行字符串。您只需要知道字符串的长度，就可以将操作迭代正确的次数

```
16@a 
```

一个相当基本的解决方案，但它有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-09-06T13:23:13.030

以下函数执行所需的编辑操作以“转置”当前缓冲区的内容，而不管其中的行数。

```
fu!T()
let[m,n,@s]=[0,line('$'),"lDG:pu\r``j@s"]
g/^/let m=max([m,col('$')])
exe'%norm!'.m."A \e".m.'|D'
sil1norm!@s
exe'%norm!'.n.'gJ'
endf 
```

为了“打高尔夫球”，这里是它的单行版本：

```
let[m,n,@s]=[0,line('$'),"lDG:pu\r``j@s"]|exe'g/^/let m=max([m,col("$")])'|exe'%norm!'.m."A \e".m.'|D'|exe'sil1norm!@s'|exe'%norm!'.n.'gJ' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-09-06T09:58:16.900

[查尔斯达菲的代码](https://stackoverflow.com/questions/704130/can-i-transpose-a-file-in-vim#704139)可以缩短/改进使用`izip_longest`而不是`izip`：

```
function! Rotate()
    :py import vim, itertools
    :py vim.current.buffer[:] = [''.join(c) for c in itertools.izip_longest(*vim.current.buffer, fillvalue=" ")]
endfunction 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-06T12:18:38.533

我开发了一个 vim 插件来做到这一点。你可以在[这里](https://github.com/salsifis/vim-transpose)找到它。运行`:Transpose`转置整个文件。

# jdedwards - JD Edwards 的发展学习曲线是什么？

> ID：704131
> 
> 赞同：2
> 
> 时间：2009-04-01T05:09:34.177
> 
> 标签：jdedwards

平均而言，使用 JD Edwards 精通开发需要多长时间？容易学吗？有什么先决条件吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-29T17:30:38.073

我假设您对学习 JD Edwards 的开发技能感兴趣，而不是系统实际实现的业务流程。

JDE 有 2 个版本。一个运行在 AS/400 平台、DB2 数据库上并使用 RPG（语言）来实现报告和功能。我不熟悉那个版本（接口工作很少，而且由于 DB2 与我通常使用的数据库（Oracle 或 SQL Server）不同，它们都很复杂）。

另一个版本是 EnterpriseOne（以前称为 OneWorld）。我从 2000 年开始为这个版本进行开发，并一直活跃到 2006 年。很容易达到基本的开发水平，然后你会面对来自系统的奇怪和已知问题以及如何躲避它们，这就是你变得有经验的时候。

所有开发工具都是 JDE 内部的。有一个表设计器、一个查询设计器（具有类似于任何可视查询设计器的网格界面）、一个交互式程序设计器（表单）、一个报表设计器和一个业务规则设计器。

如果您有任何 RDA 工具（例如 Visual Studio）和数据库开发的经验，您将能够使用这些知识来简化学习曲线。就我而言，我是一名 SQL 程序员，并且在 Visual Basic 和 Microsoft Access 方面拥有丰富的经验。通过理解系统的基本概念并适应它们，我能够利用这种经验。我花了大约 25 个小时与一位经验更丰富的程序员进行培训，让我准备好至少对真实客户做一些基本的事情。显然，这个小时数因人而异。

但是，我可以说，在我为第一个客户工作了 6 个月后，我才开始觉得自己理解了这些工具和流程。大约 12 到 18 个月后，我为自己写的第一个应用程序感到羞耻，所以我实际上回去重写了一些应用程序...... :-)

JDE 的问题是：在数据库方面几乎没有编码/功能（因为它过去在数据库选择上很灵活）。所有的表格和报告都是由设计人员在实际系统中编写的。

所有“编码”都是通过一个简单的（有时是愚蠢的）点击界面完成的。例如：你不写赋值语句，比如 var = value。您选择分配按钮，然后在列表中选择变量，然后在列表中选择值（或输入值，如果它是固定的）。

表单、报告和业务规则背后的所有规则都是以这种方式创建的。一个例外：当您编写业务规则时，您可以选择使用这种方法（称为命名事件规则 - NER）或使用 C 语言（称为业务功能）。

如果您选择 NER，则在您完成后，系统实际上会将其转换为 C。

有表单、报告和业务规则的调试功能。

这是基本的发展。还有其他通常分配给开发人员的工具和功能，因此您将能够做更多的事情。我在界面、互操作性、工作流程等方面做了很多工作。

另外值得注意的是，JDE 有一个内部工具，用于管理对象、版本控制、签入、签出以及将对象从一个环境转移到另一个环境以完成开发循环。

作为开发人员，您对正在实施的业务流程了解得越多越好。您可以了解功能的内部（代码、规范）和外部（流程），这有助于您作为开发人员并帮助您的职业生涯（和薪酬等级）。

现在，关于我的回答，我唯一需要注意的是：正如我所提到的，我离开 JD Edwards 开发已经有一段时间了。据我所知，事情几乎是一样的，但我不能肯定地说。

我能提供的最佳建议：请访问 www.jdelist.com 了解具体问题并帮助解决问题。要有礼貌，试着问一些关于具体问题而不是一般问题的问题（我的意思是：如果你问那些人学习 JDE 需要多长时间，他们可能会忽略你，但如果你问诸如“在你看来，什么是 JDE 开发人员要掌握的最复杂的任务吗？”您可能会得到一些很好的答案）。

希望它对您有所帮助，并祝您使用 JDE 好运。在最初的颠簸之后，我非常喜欢骑它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-04T20:37:21.853

您可以从 JD Edwards EntepriseOne 开发人员指南开始，了解对象管理工作台、表格、表单和报告的设计工具以及业务功能的 API。

[https://docs.oracle.com/cd/E53430_01/nav/development.htm](https://docs.oracle.com/cd/E53430_01/nav/development.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-20T22:34:28.167

据我所知，这取决于 JDE 的版本。有很多不同的组件和不同的版本（据我所知）。例如，我们的姐妹公司正在通过终端到 AS/400 运行 JDE。这都是“绿屏”基于文本的屏幕，在命令提示符下键入三个字母命令，然后使用光标在屏幕上移动。

我还没有尝试深入学习它，但是尝试学习足够的知识来提供基本支持已经花费了我几个月的时间，每周只花几个小时。将 JDE 视为 SAP 的婴儿版本，它可以让您了解问题的范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-09T18:57:58.837

我教了一些关于 JDEdwards EnterpriseOne 开发的课程。

我的一位以前从未编程过的学生接受了大约 320 小时的培训，以便能够在 JDEdwards 上进行一些开发。如今，他是一名同事和一名优秀的程序员。

他的 320 小时训练是：

*   在 5 个月的时间里，我在星期六教了 8 个小时
*   然后他接受了另一次培训，每周 4 小时，周六 8 小时，持续 5 周

正如我在这一切之后所说的那样，他已经能够执行 JDEdwards 开发人员的所有任务。

我对谁将要学习这个的建议是对 SQL 有很好的了解，并且以前用任何编译语言进行过编程，这很有帮助。

# asp.net - 如何以简单的方式获取 ContentPlaceHolder 的客户端 ID？

> ID：704132
> 
> 赞同：1
> 
> 时间：2009-04-01T05:09:44.907
> 
> 标签：asp.net, master-pages, contentplaceholder, clientid

我需要在一些控件属性中添加 JavaScript 调用，我正在使用母版页，但为了获取 contentplaceholder 客户端 ID，我正在遍历表单控件。在内容页面的服务器端代码中是否有另一种获取方式？

```
 foreach (Control control in this.Form.Controls)
                {
                    if (control is ContentPlaceHolder)
                    {
                        contentPlaceHolderID = control.ClientID;
                        break;
                    }
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T05:21:56.190

如果只有几个这样的控件，您可以设置一个全局变量：

```
var contentPlaceholderId = '<%= this.ContentPlaceholder1.ClientId %>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T05:16:35.797

我在 jQuery 中执行以下操作：

```
$("*[id$='DivFullWarning']").each(function() {
  // do whatever in here
}); 
```

这将搜索其 ID 中包含 DivFullWarning 的任何控件，因此您可以将 ContentPlaceHolder 命名为“contentPlaceHolder”，然后无论您的 id 有多少 asp.net 垃圾，您仍然可以在客户端获取它。

您可以在某处公开内容 placeHolder，这样您就不必遍历所有控件。

# qt - Qt 创建可执行文件

> ID：704137
> 
> 赞同：8
> 
> 时间：2009-04-01T05:13:17.053
> 
> 标签：qt, deployment, executable

有没有一种快速、直接的方法可以将 Qt 应用程序变成可执行文件？我尝试按照[http://doc.qt.digia.com/4.1/deployment-windows.html](http://doc.qt.digia.com/4.1/deployment-windows.html)上的说明进行操作，但到目前为止还没有成功；我无法提供任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T06:19:33.163

我一直使用[CMake](http://www.cmake.org/)来构建 Qt 项目，它简单、免费且跨平台。指南：[使用 CMake 编译 Qt4 应用程序](http://wiki.qtcentre.org/index.php?title=Compiling_Qt4_apps_with_CMake)。CMake 还附带 CPack 以轻松制作适用于 Windows、Mac 和 Linux 的安装程序。

我同意 chmod700 关于 Qt Creator 的建议，它不是我最喜欢的 IDE，但它仍然非常好用且简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T05:39:36.210

你是说安装包吗？我假设您能够编译、链接和运行您的应用程序，您的意思是如何为其他人打包它。

[http://installbuilder.bitrock.com/](http://installbuilder.bitrock.com/) <-- 对基于 Qt 的项目的特殊处理，但要花费 $ [http://www.jrsoftware.org/isinfo.php](http://www.jrsoftware.org/isinfo.php) <-- 我个人最喜欢的，它是免费的（可能很难学高级功能虽然）

虽然如果您的意思是如何构建您的应用程序，您可能想尝试新的 Qt Creator（[http://www.qtsoftware.com/products/appdev/developer-tools/developer-tools#qt-tools-at-a](http://www.qtsoftware.com/products/appdev/developer-tools/developer-tools#qt-tools-at-a) ) 这将为您设置构建目标，并真正使桌面 Qt 开发变得轻而易举。此外，如果您仍在使用 4.1，您现在可以在所有平台上使用 LGPL 下的 4.5，这几乎可以轻松升级。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-04T14:43:27.433

我不确定我是否理解你的问题。假设您使用的是 MinGW，这真的很简单：

*   获取 Qt 源并将它们解压缩到某个文件夹（fe `c:\Qt\4.5.0-static`）
*   安装 MinGW。确保 MinGW 可执行文件夹在`%PATH%`变量中。
*   打开一个 cmd 窗口，转到 Qt 源并运行`configure -static`. 如果您愿意，可以添加其他配置选项，但通常不需要。
*   构建 Qt 完成后，转到您的应用程序源，打开一个 cmd 窗口并运行您构建的 Qt 安装的 qmake - 即`c:\Qt\4.5.0-static\bin\qmake`在上面给出的示例中。
*   跑`make`
*   最后你会得到一个静态链接的二进制文件（你可能想用[Dependency Walker](http://www.dependencywalker.com/)检查它）。

使用 Visual Studio 做同样的事情非常相似。

还是您想动态构建并创建安装程序包？

# domain-driven-design - 为什么我不能使用 ERD 为我的域建模？

> ID：704142
> 
> 赞同：4
> 
> 时间：2009-04-01T05:14:58.373
> 
> 标签：domain-driven-design, data-modeling, modeling

我对这个讨论相当陌生，但即使冒着听起来“无知”的风险，我也必须提出这个问题。为什么我们现在对'DDD'如此强调。我对“DDD”的研究越多，我的应用程序似乎就越复杂。而使用数据库对我的域进行建模有助于使我的应用程序跨层保持一致。然后我可以使用 DAL Helpers（如 SubSonic 或 L2S）轻松访问该模型。这有什么不好？即使在企业应用程序中？

当我们有一个经过尝试和测试的方法时，为什么我们要努力创建一种新的域建模方法？

我愿意听取这里纯粹主义者的意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T05:28:00.607

你不能出售旧的方法论，因为太多的项目失败了，而且有太多人知道​​旧的方法论。必须有一个新的上市。

如果您对旧方法做得很好，那么请使用有效的方法。一定要注意新事物，因为会出现一些非常好的想法。但这并不意味着旧的一切都是坏的和愚蠢的。通常你可以在很大程度上将新想法融入到旧模型中。

*确实*是时候采取行动了。就像我不会用结构和函数指针做 OOP。;-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-01T05:28:07.390

这实际上是一个非常好的问题，简短的回答是“你可以”。我们过去是这样做的，并且有整个企业（数据）建模领域。事实上，常见的 OOD 符号是从 ERD 演变而来的。

然而，我们发现，像这样的数据驱动设计有一些困难，其中最大的困难是数据库的自然结构不一定与代码的自然结构很好地匹配。

在很大程度上，OOD 源于希望更容易找到具有几个理想属性的代码结构：

*   应该很容易想到设计
*   它在变化下应该是健壮的。

易于思考的设计最初来自 Simula，它专门使用了我们现在认为的“对象”进行模拟；在模拟中拥有与您正在模拟的事物相对应的软件实体很方便。直到后来，施乐的 Alan kay 等人才将其视为一种更通用的结构化方法。

关于变化下的鲁棒性的部分有很多父母，但其中最重要的一位是 Dave Parnas，你写了几篇论文，确定了模块化的基本规则，我称之为帕纳斯定律：每个模块都应该保密，并且这个秘密是一个可能会改变的要求。

事实证明，通过将 Parnas 定律与 Simula 的“对象”概念相结合，将“对象”对应于可以在现实世界中识别的事物，您*往往*会获得在需求变化下比我们所做的旧方法更健壮的系统设计事物。（并非总是如此，有时你必须狡猾，就像*命令*模式一样。大多数对象是名词，具有持久存在的东西。在命令模式中，理想的对象是*动词*，你*做*的事情。）

然而，事实证明，这种结构不一定是表示关系数据库中底层数据的好方法，所以我们最终会遇到“对象关系阻抗不匹配”问题：如何表示从对象域到数据库的转换——土地。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-09-24T03:40:50.870

简短的回答：如果您只需要一个允许用户编辑数据的 CRUD 系统，只需为您的后端数据库构建一个 Access 前端（或使用您提到的脚手架框架）并收工。与域驱动系统相比，您应该能够削减 70% 的预算。

长答案：使用数据驱动的设计，业务模型的实现是什么样的？通常在为您的应用程序构建新功能几年后，您会发现它无处不在：表、视图、存储过程、各种应用程序服务、代码隐藏文件、演示者/视图模型等，到处都是重复的. 当您与领域专家就他们要求的新功能进行对话时，您一直在尝试将业务语言翻译成围绕您的实施的语言，但它只是无法翻译。

通常最终发生的情况是，您被迫在系统的实现方面与业务进行通信，而实现成为业务和开发人员在通信时被迫使用的“无处不在的语言”。这会产生广泛的后果。业务领域的专家开始相信他们是实现领域的专家，他们开始从实现的角度来要求特性，而不是他们试图解决的业务需求。

此外，您会发现大多数数据驱动的实现不遵循领域的“概念轮廓”，并且系统的组件在如何将它们组合在一起来解决问题方面不是很灵活，因为它们不不要与业务模型中的概念一一对应。当代码没有凝聚力时，更改和新功能可能需要在整个实现中进行修改。

领域驱动设计提供了使您的实施与业务模型非常相似的工具，以至于每个人都可以轻松地使用业务语言。它允许您编写“可执行规范”来测试您的实现，但您的领域专家实际上可以理解。

# apache-flex - 在后台同步时处理 mx.data.DataService 中的故障事件？

> ID：704143
> 
> 赞同：0
> 
> 时间：2009-04-01T05:15:10.637
> 
> 标签：apache-flex, flex3, dataservice

我们使用的对象有时需要通过 mx.data.DataService 与服务器同步，问题是在对 dataservice 对象进行显式方法调用的情况下，我们能够使用故障处理程序捕获故障事件。

当数据服务在后台同步对象时会出现问题。如果发生故障事件（例如会话超时或服务器关闭），则不会通过使用 addEventListener(FaultEvent.FAULT) 在数据服务上添加的故障处理程序捕获错误。

有关如何捕获通过 DataService 的后台同步调用生成的故障事件的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-05T03:20:50.643

尝试 DataServiceFaultEvent.FAULT 而不是 FaultEvent.FAULT

# python - 如何在 Python 中将字符转换为整数，反之亦然？

> ID：704152
> 
> 赞同：387
> 
> 时间：2009-04-01T05:19:15.930
> 
> 标签：python, integer, char, type-conversion

我想得到，给定一个角色，它的`ASCII`价值。

例如，对于角色`a`，我想得到`97`，反之亦然。

* * *

## 回答 #1

> 赞同：653
> 
> 时间：2009-04-01T05:22:00.400

使用[`chr()`](http://docs.python.org/library/functions.html#chr)和[`ord()`](http://docs.python.org/library/functions.html#ord)：

```
>>> chr(97)
'a'
>>> ord('a')
97 
```

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2009-04-01T05:21:39.543

```
>>> ord('a')
97
>>> chr(97)
'a' 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2009-04-01T05:21:22.603

ord 和 chr

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-07T13:38:19.960

对于长字符串，您可以使用它。

```
 ''.join(map(str, map(ord, 'pantente'))) 
```

# c# - 可以在 ASP.NET MVC 中使用数据源控件吗？

> ID：704167
> 
> 赞同：1
> 
> 时间：2009-04-01T05:25:36.257
> 
> 标签：c#, asp.net, asp.net-mvc, data-binding

我想将 LinqDataSource 或 ObjectDataSource 与 ViewData.Model 一起使用，其中 ViewData.Model 是一个字符串数组。

我不想在视图的 PageLoad 事件上绑定数据源。

是否可以？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T05:45:39.127

您不应该**将**实际数据源返回到您的视图中，因为这会破坏整个 MVC 概念。相反，您应该通过控制器从源返回数据对象，以便清晰地分离模型内部和视图。

然而，如果你真的想返回你的数据源，你就是这样做的，它与你想要的任何类型的对象都是一样的：在你的控制器中，你返回一个以对象作为参数的新视图。该对象将通过视图的 Model 属性变得可用。

即在您的控制器操作中有以下内容：

```
public ActionResult YourAction() {
    var yourDataSource = GetYourDataSourceMethod();
    return View(yourDataSource);
}

private LinqDataSource GetYourDataSourceMethod() { 
    // Return your datasource ... 
} 
```

在您看来，您可以`Model`直接调用该属性并访问`yourDataSource`. 如果您没有像这样输入视图，则需要输入强制转换：

```
<%= var myDataSource = (LinqDataSource) Model %> 
```

# django - 如何使用电子邮件而不是用户名进行用户身份验证？

> ID：704168
> 
> 赞同：15
> 
> 时间：2009-04-01T05:26:28.923
> 
> 标签：django

> **可能重复：**
> [在 Django 中接受电子邮件地址作为用户名](https://stackoverflow.com/questions/778382/accepting-email-address-as-username-in-django)

与 Django 一起提供的身份验证模型是基于用户名的。

如何更改基于电子邮件而不是用户名的身份验证？

**更具体地说**：

使用用户名身份验证，要登录用户，我们执行以下操作：

```
 user = authenticate(name,password)
 .......
 login(request,user) 
```

如果我们使用电子邮件进行身份验证，上述陈述应该写什么？

**对于表格**：

我打算编写自己的表单，其中显示字段电子邮件、密码和验证。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-22T19:45:14.267

我在阅读一个重复的问题时发现[了这个片段。](http://www.davidcramer.net/code/224/logging-in-with-email-addresses-in-django.html)还要检查[此代码](https://stackoverflow.com/questions/778382/accepting-email-address-as-username-in-django/778399#778399)：

```
class UserForm( forms.ModelForm ):
    class Meta:
        model= User
        exclude= ('email',)
    username = forms.EmailField(max_length=64,
        help_text = "The person's email address.")
    def clean_email( self ):
        email= self.cleaned_data['username']
        return email

class UserAdmin( admin.ModelAdmin ):
    form= UserForm
    list_display = ( 'email', 'first_name', 'last_name', 'is_staff' )
    list_filter = ( 'is_staff', )
    search_fields = ( 'email', )

admin.site.unregister( User )
admin.site.register( User, UserAdmin ) 
```

* * *

*这两个答案最初都不是我的。在另一个线程上投票给所有者以提升业力。我只是将它们复制到这里以使该线程尽可能完整。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-01T05:38:14.760

查看[此代码段](http://www.djangosnippets.org/snippets/74/)，并阅读评论以获取更新。

对于表单，为什么不直接继承（或直接使用）auth login 表单。见 django/contrib/auth/forms.py

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-01T12:29:34.917

请参阅下面的链接，该链接说明了我们应该解决问题的方式。

[http://groups.google.com/group/django-users/browse_thread/thread/c943ede66e6807c](http://groups.google.com/group/django-users/browse_thread/thread/c943ede66e6807c)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T05:30:08.680

听起来您可以用“电子邮件”一词来掩盖用户名，而所有用户名只会显示电子邮件。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-04T15:42:27.213

除非我错过了什么，否则解决方案应该非常简单；只需制作一个带有文本字段和密码字段的普通表单。当 HTTP 请求方法为 POST 时，尝试获取具有给定电子邮件地址的用户。如果这样的用户不存在，则会出现错误。如果用户确实存在，请尝试验证用户并让她登录。

# php - 如何在酒店预订系统中实现检查可用性

> ID：704176
> 
> 赞同：0
> 
> 时间：2009-04-01T05:30:16.293
> 
> 标签：php, mysql

我正在为我朋友的小型度假村开发网站，请参阅 www.shivgangaresorts.com/dev

这个度假村共有8间客房，所有房间都是同一类型的，所以每个房间的价格都是一样的。

我只需要代码或逻辑来检查给定编号的可用性。在给定的入住和退房日期的房间。

当有人进行预订时，预订表中的详细信息是：

*   预订编号
*   顾客姓名
*   电子邮件
*   登记日期
*   离开日期
*   不。房间数

请帮忙。这是非常关键的，因为我也将集成 PayPal，所以应该没有混淆......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T05:36:33.283

如果所有房间每周 7 天、每天 24 小时都可用，那么您的预订应该有 start_time（时间戳）和 end_time（时间戳），而不仅仅是日期。

标准预订可能具有特定的开始时间（~下午 6 点）和结束时间（~上午 11 点），但您可能需要具体以提供提前到达或延迟退房。

这是我要使用的逻辑：

1.  用户选择入住日期和退房日期。

2.  您的程序抓取入住日期下午 6 点和退房日期上午 11 点，并根据当前预订选择在这些时间内未预订的房间。（返回房间）

这听起来是一种相当简单的方法，但您可能需要考虑女佣时间，在房间、保留房间等之间分配预订。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T05:47:17.877

我想如果您在每次页面刷新时检查可用性，我会通过获取当前有效的预订数量来计算有多少空闲房间：

```
select sum(number_of_rooms) from reservations where
  check_in_date <= now() and
  check_out_date >= now() 
```

这将为您提供当前已占用的房间。然后简单地从硬编码的“房间总数”值中减去这个值。

通过让客户和个人房间表具有与预订表的链接表，可能有助于规范化数据库。但是我不知道你的限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T05:38:37.303

您需要一个程序来确定有多少房间可用。对于少数房间，最简单的答案是遍历每个房间并在此期间检查可用性。也就是说，如果在此期间给定房间存在预订，则该预订不可用。

如果您想考虑在房间之间拆分预订，这将变得更加困难，但您应该检查该期间每一天的每个房间的空房情况，然后汇总结果。

# java - 有没有办法在从 NetBeans 启动的应用程序中增加虚拟内存？

> ID：704181
> 
> 赞同：2
> 
> 时间：2009-04-01T05:34:30.760
> 
> 标签：java, netbeans, virtual-memory, out-of-memory

在我的项目中，我经常遇到Java堆空间错误，即没有足够的空间来运行程序。有什么办法可以增加虚拟内存？

我没有使用命令行。我正在使用 Net Beans。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T05:55:50.070

在 NetBeans 中，您可以使用项目的属性、运行选项来添加命令行选项。那里有一个 JVM 命令行选项。查看 -Xms 和 -Xmx 选项。

顺便说一下，这也适用于 JRuby 项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T07:14:35.047

在 Netbeans 下，您可以在项目属性中设置项目的 VM 选项。在属性 > 运行下最后一个框应该是 VM 选项。Netbeans 将在运行应用程序时使用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T05:36:49.070

Java -X，了解 java -Xms 和 -Xmx

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T05:38:00.067

调用 JVM 时使用命令行参数，

java -Xms -Xmx

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T05:51:10.580

建议直接运行 JAR（来自 Sun）（可能有人不同意）。

建议您使用 WebStart/JNLP、applet 或 exe/batch 包装器，您可以控制 JVM 的启动行为。

您可以做的另一种方法是在 Java 中实现您自己的包装器。即在你的 main() 函数中用 -Xmx fork 真正的 java.exe。

# c - 使用 unput 错误

> ID：704184
> 
> 赞同：2
> 
> 时间：2009-04-01T05:36:20.053
> 
> 标签：c, parsing, lex, flex-lexer

我创建了 test.l，输入到 flex，它以 main 函数结束。

当 main 函数实现为：

```
int
main(void)
{
    yylex();
    return 0;
} 
```

我没有问题。

我想诱使解析器相信第一个字符始终是分号，所以我将 main 实现为

```
int
main(void)
{
    unput(';');
    yylex();
    return 0;
} 
```

以上导致段故障。

为什么使用 unput 会导致段错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-01T06:27:44.097

它导致段错误，因为 yylex() 尚未初始化 unput() 所需的输入缓冲区等。

可能有一种更好的方法来设计您的扫描仪，而无需将其引入前导分号，但如果您必须这样做，那么一种解决方案可能是使用开始条件。像这样的东西：

```
%x SPECIAL
%%
    BEGIN(SPECIAL); /* Go to SPECIAL state when yylex first called */

<SPECIAL>.  { unput(*yytext); unput(';'); BEGIN(INITIAL); }

... rest of rules ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-07-16T03:56:07.473

下面的代码意思没有错。

```
int main(void) { unput(';'); yylex(); return 0; } 
```

问题来自声明`unput`宏的 flex，当然您之前应该初始化 lex。

但是如果你把你的 main 放在外面`.l file`，你的代码就不会出现段错误。

# .net - 编译的 LinQ 查询

> ID：704188
> 
> 赞同：0
> 
> 时间：2009-04-01T05:37:02.643
> 
> 标签：.net, linq-to-sql

我想看一个关于如何编译 LinQ to SQL 查询的基本而清晰的示例。我已经搜索过它，尽管有几个实现示例，但通常博客海报强调编译和非编译查询之间的时间响应差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T06:05:48.050

LINQ To SQL 编译查询基本上允许将 LinqToSQL 查询转换为普通 SQL，在编译时只发生一次，因此可以在不执行任何转换的情况下重复使用查询。

它们表示为静态[Func](http://msdn.microsoft.com/en-us/library/bb549151.aspx)委托，接收将在查询中使用的 DataContext 实例和参数：

```
public static Func<MyDataContext, string, IQueryable<Entity>>
    TestQuery =
        CompiledQuery.Compile((MyDataContext ctx, string param) =>
            from e in ctx.Entities where e.Field == param select e); 
```

通常的做法是，编译后的查询可以作为静态成员存储在扩展 DataContext 生成类的部分类上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T05:56:02.393

这个问题有一个：[CompiledQuery vs. Plain Linq SQL Generation](https://stackoverflow.com/questions/701946/compiledquery-vs-plain-linq-sql-generation/702066#702066)

# mysql - 如何在 MySQL 中对密码进行哈希处理？

> ID：704194
> 
> 赞同：11
> 
> 时间：2009-04-01T05:39:15.257
> 
> 标签：mysql, encryption

如何使用单个查询对用户表中的每个密码进行加密（md5（）），除了一个特定行？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-01T05:41:45.143

```
UPDATE table SET Password = MD5(Password) 
```

我会说，虽然 MD5 不是一个很好的加密级别，你应该考虑一些更强大的东西，比如使用自定义盐的 ENCRYPT。[在这里](http://dev.mysql.com/doc/refman/5.1/en/encryption-functions.html#function_md5)阅读

编辑：看起来原来的问题改变了。这是更改后的查询以适应

```
UPDATE table SET Password = MD5(Password) WHERE ID!=[specified index] 
```

编辑：值得注意

[MD5 加密被黑](http://www.gearfuse.com/md5-algorithm-hacked-by-playstation-3-cluster/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-01T08:23:17.347

## MySQL中的哈希函数

有比 MD5 更多的散列函数用于在 MySQL 数据库中存储密码。
您可以在[MySQL :: 11.10.2 上找到它们的列表。加密和压缩功能](http://dev.mysql.com/doc/refman/5.0/en/encryption-functions.html)。

## 保存密码（哈希）：

```
UPDATE users SET password = SHA('secret_password') WHERE ....; 
```

## 检查密码：

```
SELECT COUNT(*) FROM users WHERE name = 'username' && password = SHA('typed_password'); 
```

如果结果 > 0，则用户提供了正确的密码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-01T15:58:34.197

When hashing passwords, do not forget to salt them, so that same passwords do not yield same hashes:

```
SET @salt := CONV(FLOOR(RAND() * 0x100000000), 10, 16)

UPDATE  passwords
SET     password = CONCAT(@salt, SHA(CONCAT(@salt, @typed_password)))

SELECT  1
FROM    passwords
WHERE   SHA(CONCAT(SUBSTRING(password, 1, 8), @typed_password)) = SUBSTRING(password, 9, 40) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-01T05:42:52.503

编辑以响应 OP 中的编辑。

```
UPDATE userTable
SET password = MD5(password)
WHERE NOT (<criteria to identify row to exclude>) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-01T08:13:44.593

关于您的编辑：您是否有标识此行的 ID 或用户名？

```
UPDATE mytable
SET password = MD5(password)
WHERE id <> 123 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-01-15T09:53:21.527

我认为这是一个多一点的更新

```
SET PASSWORD FOR 'existinguser'@'localhost' = PASSWORD('newpass'); 
```

或者

```
UPDATE user SET  password = PASSWORD('newpass'); 
```

希望这有帮助

# c# - WPF 图像处理

> ID：704195
> 
> 赞同：3
> 
> 时间：2009-04-01T05:39:27.723
> 
> 标签：c#, wpf, image, brightness

我对改变对比度的亮度有一些想法，但我想知道有一个简单的解决方案来改变亮度和对比度

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T05:44:51.250

如果您只想修改屏幕上显示的图像，这里有一个关于在 WPF中使用[HLSL（像素着色器）的教程，以及一个专门针对](http://khason.net/blog/hlsl-pixel-shader-effects-tutorial/)[亮度和对比度的教程](http://khason.net/blog/brightness-and-contrast-manipulation-in-wpf-35-sp1/)

如果您正在寻找如何操作内存中的图像并将它们保存到磁盘，我需要更加努力地寻找，但我相信我能想出一些东西。:)

# inversion-of-control - 在没有公共构造函数的情况下解析外部创建的对象实例

> ID：704199
> 
> 赞同：0
> 
> 时间：2009-04-01T05:41:52.180
> 
> 标签：inversion-of-control, unity-container

使用适配器模式，结合 IoC（特别是 Unity），我想创建一个对象的新实例，其属性指向适配器的属性（基本上将适配器映射到目标对象）。

例如，我有以下类结构：

```
public class Adaptee
{
    private Adaptee() { }

    public int MyProperty { get; set; }

    public static Adaptee New()
    {
        return new Adaptee();
    }
}

public class Target
{
    public int MyProperty { get; set; }
}

public class Adapter : Target
{
    public Adapter(Adaptee adaptee)
    {
        this.MyProperty = adaptee.MyProperty;
    }
}

public class MyTestClass
{
    public Target MyTarget { get; set; }
} 
```

问题是 Adaptee 不在我的控制之下，并且它没有公共构造函数，因此使用了适配器。所以 Adaptee 被创建如下

```
Adaptee adaptee = Adaptee.New();
adaptee.MyProperty = 5; 
```

在实际代码中，上述代码将在外部控制的程序集中执行，然后传递给以下代码：

```
using (UnityContainer container = new UnityContainer())
{
    container
        .RegisterType<MyTestClass>(
            new InjectionProperty("MyTarget"));

    container.RegisterInstance<Adaptee>(adaptee, new ExternallyControlledLifetimeManager());

    MyTestClass myTestClass = container.Resolve<MyTestClass>();
} 
```

我希望代码的执行结果如下：

```
Debug.Assert(myTestClass != null);
Debug.Assert(myTestClass.MyTarget != null);
Debug.Assert(myTestClass.MyTarget.MyProperty == adaptee.MyProperty); 
```

这意味着应将已解析的 Adapter 实例注入 myTestClass 实例的 MyTarget 属性。Adapter 的实例应该是用外部创建的 Adaptee 实例创建的。

以下代码：

```
container
    .RegisterType<MyTestClass>(
        new InjectionProperty("MyTarget")); 
```

实际上应该导致：

```
container
    .RegisterType<MyTestClass>(
        new InjectionProperty("MyTarget", container.Resolve<Adapter>())); 
```

这似乎是不可能的，因为还没有 Adapter 的实例存在并且它有一个私有构造函数。

我应该使用拦截或其他东西来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-09T06:36:09.247

我很接近这个*`container.Resolve<Adapter>()`*想法，但最终的答案只是在使用***InjectionProperty***类配置要注入的属性时使用***ResolvedParameter***类：

 *```
new InjectionProperty(
  "MyTarget", 
  new ResolvedParameter<Adapter>())); 
```

所以调用代码如下所示：

```
Adaptee adaptee = Adaptee.New();
adaptee.MyProperty = 5;

using (UnityContainer container = new UnityContainer())
{
    container
        .RegisterType<MyTestClass>(
            new InjectionProperty(
              "MyTarget",
              new ResolvedParameter<Adapter>()));

    container.RegisterInstance<Adaptee>(adaptee, new ExternallyControlledLifetimeManager());

    MyTestClass myTestClass = container.Resolve<MyTestClass>();
} 
```

我在以下帖子中找到了解决方案： [Unity中的Setter / property injection without attributes](https://stackoverflow.com/questions/515028/setter-property-injection-in-unity-without-attributes)

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T06:09:25.303

那是一个Doh！片刻。

解决方法是在配置unity的时候添加如下：

```
.RegisterType<Target, Adapter>() 
```

我不敢相信我错过了，这样一个解决问题的简单解决方案（我认为）。

因此，MyTestClass 上的 MyTarget 属性将解析为 Adapter 的一个实例，因为它继承自 Target。适配器显然将使用 Adaptee 类的外部创建实例来启动。

# python - 如何安排进程的终止？

> ID：704203
> 
> 赞同：0
> 
> 时间：2009-04-01T05:44:36.447
> 
> 标签：python, bash, unix, process, kill

我需要运行一个进程，等待几个小时，杀死它，然后重新启动它。有没有一种简单的方法可以使用 Python 或 Bash 完成此任务？我可以在后台运行它，但是如何识别它以使用 kill 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T05:55:10.650

这是在 Perl 中的，但您应该能够将其转换为 Python。

```
#!/usr/bin/perl

use strict;
use warnings;

#set times to 0 for infinite times
my ($times, $wait, $program, @args) = @ARGV;

$times = -1 unless $times;
while ($times--) {
    $times = -1 if $times < 0; #catch -2 and turn it back into -1
    die "could not fork" unless defined(my $pid = fork);

    #replace child with the program we want to launch
    unless ($pid) {
        exec $program, @args;
    }

    #parent waits and kills the child if it isn't done yet
    sleep $wait;

    kill $pid;
    waitpid $pid, 0; #clean up child
} 
```

因为我想自学 Python，所以这里是 Python（我不相信这段代码）：

```
#!/usr/bin/python

import os
import sys
import time

times    = int(sys.argv[1])
wait     = int(sys.argv[2])
program  = sys.argv[3]
args     = []
if len(sys.argv) >= 4:
    args = sys.argv[3:]

if times == 0:
    times = -1

while times:
    times = times - 1
    if times < 0:
        times = -1

    pid = os.fork()

    if not pid:
        os.execvp(program, args)

    time.sleep(wait)

    os.kill(pid, 15)
    os.waitpid(pid, 0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T06:16:21.427

使用 bash：

```
while true ; do
    run_proc &
    PID=$!
    sleep 3600
    kill $PID
    sleep 30
done 
```

`$!`bash 变量扩展为最近启动的后台进程的 PID 。`sleep`只需等待一个小时，然后`kill`关闭该过程。

`while`循环只是一遍又一遍地做它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-01T10:12:16.803

在蟒蛇中：

```
import subprocess
import time

while True:    
    p = subprocess.Popen(['/path/to/program', 'param1', 'param2'])
    time.sleep(2 * 60 * 60) # wait time in seconds - 2 hours
    p.kill() 
```

`p.kill()`是蟒蛇> = 2.6。

在 python <= 2.5 你可以使用它来代替：

```
os.kill(p.pid, signal.SIGTERM) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T05:52:05.993

一个想法：将进程的 PID（由`fork()`您的子进程返回）保存到文件中，然后安排一个`cron`作业来终止它或手动终止它，从文件中读取 PID。

另一种选择：创建一个自动终止并重新启动进程的 shell 脚本包装器。与上面相同，但您可以将 PID 保存在内存中，根据需要休眠，终止进程，然后循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T05:52:52.167

看看[start-stop-daemon](http://olympus.het.brown.edu/cgi-bin/man/man2html?start-stop-daemon)实用程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T05:53:16.583

您总是可以编写一个脚本来搜索这些进程并在找到时杀死它们。然后添加一个cronjob来执行脚本。

[查找具有已知名称的进程的进程 ID](http://www.faqs.org/faqs/unix-faq/faq/part3/section-10.html)

[杀死具有已知 ID 的进程](http://www.unix.com/unix-dummies-questions-answers/5245-script-kill-all-child-process-given-pid.html)

在 python[中，os.kill()](http://docs.python.org/library/os.html#os.kill)可用于杀死给定 id 的进程。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-03T13:26:36.877

这不是一个理想的方法，但如果您知道程序的名称并且您知道它是系统上运行的唯一进程，您可以在 cron 中使用它：

```
0 */2 * * * kill `ps -ax | grep programName | grep -v grep | awk '{ print $1 }'` && ./scriptToStartProcess 
```

这将在整点每两个小时运行一次并杀死 programName 然后再次启动该过程。

# c - 在 c 中使用套接字时，FD_SET 和 FD_ISSET 背后的数据结构是什么？

> ID：704204
> 
> 赞同：4
> 
> 时间：2009-04-01T05:44:43.903
> 
> 标签：c, sockets, select

使用套接字时，FD_SET 和 FD_ISSET 宏背后的数据结构是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-01T06:06:08.050

原型：

```
void FD_SET(int fd, fd_set* fdset);
int FD_ISSET(int fd, fd_set* fdset); 
```

从 sys/select.h

```
typedef struct fd_set {
  u_int  fd_count;
  SOCKET fd_array[FD_SETSIZE];
} fd_set; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-01T06:04:16.960

我似乎记得它只是一个位掩码。一个字符数组（或其他一些基本类型），其中字符的每一位代表每个文件描述符的状态。

一些实现也有一个限制变量，如果它们允许可变大小的结构，但我见过的大多数（这些通常是较旧的）只允许最大数量的文件描述符。

但是，只要提供 FD_* 宏或函数来正确初始化和更改它们，实现就可以自由地使用它想要的任何数据结构。

# c# - 在 c# 和 WCF 中具有存储库模式的 web 服务？

> ID：704216
> 
> 赞同：4
> 
> 时间：2009-04-01T05:49:23.517
> 
> 标签：c#, wpf, asp.net-mvc, web-services, repository-pattern

任何人都可以确认将存储库模式与 web 服务集成的最佳方法......实际上我的存储库模式现在在 c# 中工作。我有 3 个项目，DataAccess、Services 和我的表示层。

问题是我的表示层有很多东西......我有一个 ASP.NET MVC 站点，我有一个 WPF 应用程序，我们即将创建另一个站点 + 外部公司也需要访问我们的存储库。

目前我刚刚添加了服务层作为对每个站点的引用...但是通过 Web 服务提供数据访问的正常方式不是吗？(WCF) - 如果是这种情况，这会破坏服务层吗？还是我应该将服务层转换为 Web 服务？

有谁知道这个速度的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-24T10:05:49.680

我想我理解你的困境。如果我理解正确，那么您的服务层由纯虚构组成。[http://en.wikipedia.org/wiki/GRASP_(Object_Oriented_Design)](http://en.wikipedia.org/wiki/GRASP_(Object_Oriented_Design))。

如果我在上面假设正确，那么您的服务层不应该受到 WCF 的引入的影响。WCF 本质上是一个提供互操作性的附加表示层，位于 UI 表示层和任何业务逻辑层之间。因此，您的 WCF 服务将调用您的服务层，该层可以根据需要访问存储库。

WCF 提供了高度的互操作性，所以我认为它是一个很好的选择。不过，如果您打算与不同的编程语言互操作，我会使用 basicHttp 绑定，因为这是最灵活的。不用担心速度。有很多解决方案可以缓解 WCF 导致的任何瓶颈。

祝你好运，如果我能以其他方式提供帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T06:30:18.333

也许 web 服务不是最好的方法，如果我可以完全访问服务程序集，那么我认为程序集与我的应用程序共享服务层总是更好。

我的应用程序做类似的事情，但它们都需要访问服务层 - 以及业务逻辑并获取信息......

在这种情况下——它总是最好使用与服务层的程序集共享，而不是使用 HTTP 协议或在 wcf 上使用 TCP 提供 WCF Web 服务——例如？

再次感谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T06:17:15.340

首先，并非所有调用者都必须使用相同的存储库 API；对于外部公司尤其如此。

WCF 是基于接口的。这意味着*如果*您需要重用一些逻辑代码，可以使用 IoC/DI 来注入 WCF 而不是 DAL（但使用相同的接口）——通过使用程序集共享。听起来这就是你正在做的事情。这在许多情况下都有效，但不是全部；从根本上讲，基于 Web 服务的 API 通常需要进行不同的设计才能达到最佳效果。从 SOA 的角度来看，它也不是 100% 纯的，但它可以完成工作，并允许更智能的域实体，因此在 Intranet（等）场景中（IMO）是完全合理的。

外部调用者*通常*只使用基于 wsdl/mex 的 API（而不是程序集共享），但一切皆有可能......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T01:16:34.797

是否与您的客户端应用程序共享您的服务/API 程序集是相当主观的。如果您是一家完整的 Microsoft 商店，并且在整个应用程序堆栈中使用 .NET，那么我会说共享 API 是获得代码重用的好方法（您必须小心设计 API 以免流血域问题，例如存储库，到您的演示文稿中。）如果您没有任何计划将您的客户端应用程序迁移到其他平台（即您计划在可预见的未来继续使用 .NET），那么我认为分享它是完全可以接受的您的服务/API 程序集（即便如此，在多平台客户端环境中，与 .NET 客户端共享服务/API 仍然应该是可以接受的。）“架构理想”和“实用且可实现”之间总是存在权衡在预算之内'。您可以花费大量时间、金钱和精力来尝试实现架构上的理想，而实际上与实际之间的差距通常并没有那么大。选择不共享 API 并从本质上重新创建它以维护“正确”的 SOA，只使用合同，实际上会增加工作量并引入维护麻烦，这在特定时间对于您的特定项目很可能不值得。鉴于您通常已经是“面向服务的”，如果在未来某个时间点您需要客户端上的仅合同消费可以提供的好处，那么您已经准备好去那里了。但不要过早地推得太远。选择不共享 API 并从本质上重新创建它以维护“正确”的 SOA，只使用合同，实际上会增加工作量并引入维护麻烦，这在特定时间对于您的特定项目很可能不值得。鉴于您通常已经是“面向服务的”，如果在未来某个时间点您需要客户端上的仅合同消费可以提供的好处，那么您已经准备好去那里了。但不要过早地推得太远。选择不共享 API 并从本质上重新创建它以维护“正确”的 SOA，只使用合同，实际上会增加工作量并引入维护麻烦，这在特定时间对于您的特定项目很可能不值得。鉴于您通常已经是“面向服务的”，如果在未来某个时间点您需要客户端上的仅合同消费可以提供的好处，那么您已经准备好去那里了。但不要过早地推得太远。如果在未来的某个时间点，您需要客户端上的仅合同消费可以提供的好处，那么您已经准备好去那里了。但不要过早地推得太远。如果在未来的某个时间点，您需要客户端上的仅合同消费可以提供的好处，那么您已经准备好去那里了。但不要过早地推得太远。

鉴于您的需求，从到目前为止我从这些帖子中收集到的信息来看，我认为您的服务也走在了正确的轨道上。存储库（a la Evans，DDD）绝对是一个领域问题，因此，从表示层的角度来看，您真的不必担心它。您的服务是您的域的网关，它是您的业务逻辑的所在地。存储库只是一种支持工具，可以帮助您实现与数据存储的域隔离（它们确实是美化的集合，坦率地说......它们在动态和复杂的域中可能有点痛苦。简单的数据映射器， （Fowler，PofEAA）从长远来看通常更容易处理且不那么复杂，并且允许围绕数据检索逻辑的更具适应性的行为集中在域服务中。) 除了大量使用对 REST 服务的 AJAX 调用之外，如果您在域周围公开了足够的服务/API，那是您的客户唯一应该担心的事情。将所有其余的业务逻辑完全封装在您的域范围内，并使您的客户尽可能轻量级，并从“存储库”或“数据映射器”等概念中抽象出来。

以我的经验，唯一需要跨客户端到域边界共享的非服务或 API 概念是上下文……而众所周知，在面向服务的应用程序中跨越该边界可能非常困难。

# c++ - PPP状态机中关闭和停止状态之间的确切区别是什么

> ID：704230
> 
> 赞同：1
> 
> 时间：2009-04-01T05:55:46.403
> 
> 标签：c++, networking, ppp, pppoe

我想知道 PPP 状态机中的关闭状态和停止状态之间的确切区别是什么。

如果有人详细解释，那就太好了。

我正在使用 C++ 设计 ppp 堆栈。

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T04:34:52.410

“关闭”表示该链路的 PPP 状态机已通过某些用户干预（链路关闭）或底层物理层关闭（警报检测等）关闭（关闭）。

“已停止”是指 1) PPP 状态机协商不成功，因此停止，并在一段时间后重试，或 2) 对端终止会话，本地端将在一段时间后重新发起协商。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T07:05:29.827

如果我没记错的话，区别在于进入 Closed 状态是因为类似于管理操作（即用户正在停止 PPP）。

停止状态发生在链路被对方终止时。

[RFC 1661](http://www.faqs.org/rfcs/rfc1661.html)有详细信息，即使它不是最容易阅读的 - 只要按照那里定义的状态机，你应该没问题。

# algorithm - 我可以使用任意指标来搜索 KD-Trees 吗？

> ID：704234
> 
> 赞同：11
> 
> 时间：2009-04-01T05:56:47.977
> 
> 标签：algorithm, math, search, data-structures, machine-learning

我刚刚完成了一个用于进行快速最近邻搜索的[kd-tree 。](http://en.wikipedia.org/wiki/Kd-tree)[除了欧几里得距离](http://en.wikipedia.org/wiki/Euclidean_distance)之外，我对使用不同的距离度量很感兴趣。我对 kd-tree 的理解是，如果度量标准是非欧几里得，则不能保证快速的 kd-tree 搜索提供准确的搜索，这意味着如果我想尝试，我可能需要实现新的数据结构和搜索算法为我的搜索提供新的指标。

我有两个问题：

1.  使用[kd-tree](http://en.wikipedia.org/wiki/Kd-tree)是否会永久地将我与[欧几里得距离](http://en.wikipedia.org/wiki/Euclidean_distance)联系起来？
2.  如果是这样，我应该尝试哪些其他类型的算法来处理任意[指标](http://en.wikipedia.org/wiki/Metric_(mathematics))？我没有太多时间来实现许多不同的数据结构，但我正在考虑的其他结构包括[覆盖树](http://en.wikipedia.org/wiki/Cover_tree)和[vp-trees](http://pnylab.com/pny/papers/vptree/vptree/)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-01T10:15:35.893

您链接到的维基百科页面上描述的最近邻搜索过程当然可以推广到其他距离度量，前提是您将“超球体”替换为给定度量的等效几何对象，并测试每个超平面与该对象的交叉。

示例：如果您改用曼哈顿距离（即向量分量中所有差异的绝对值之和），您的超球面将变成（多维）菱形。（这在 2D 中最容易可视化——如果您当前的最近邻距查询点*p的距离为**x ，那么不同超平面后面的任何更近的邻域必须与宽度和高度为 2x 且以**p*为中心的菱形相交） . 这可能会使超平面交叉测试更难编码或运行更慢，但一般原则仍然适用。

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-01T10:44:35.103

我不认为您与欧几里得距离有关-正如 j_random_hacker 所说，您可能可以使用曼哈顿距离-但我很确定您与可以用笛卡尔坐标表示的几何形状有关。因此，例如，您不能使用 kd-tree 来索引度量空间。

# java - 如何在没有 instanceOf 的情况下实现我的 LayoutManager？

> ID：704246
> 
> 赞同：1
> 
> 时间：2009-04-01T06:01:34.470
> 
> 标签：java, oop, instanceof, layout-manager

对于我正在处理的某个布局，我需要制作自己的`LayoutManager`.

它将根据它们的类型来布置不同的组件：`Label`s 以一种方式，Separators 以另一种方式，以及其他所有方式以第三种方式。

如果我制定一个方法，我可以轻松实现这一点并确定不同类型组件的不同位置：

```
private Dimension calculatePositionForComponent(Component component) {
  if (component instanceOf JLabel)
     ...
  if (component instanceOf JSeparator)
     ...
} 
```

有没有更好的方法来做到这一点，而不使用`instanceOf`？

（不，我不必自己做`LayoutManager`，但如果我这样做的话，事情会变得非常容易；））

提前致谢

/乙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T07:18:47.627

我还建议使用某种接口/子类解决方案来封装不同组件的不同布局计算。我还将添加一些注册机制以便灵活地用于将来的添加（如果您想为新组件类型实现另一种单独的行为）

```
public interface PositionCalculator {
  Dimension calculatePositionForComponent(MyLayoutManager manager, Component component);
}

class JLabelCalculator implements PositionCalculator {
  public Dimension calculatePositionForComponent(MyLayoutManager manager, Component component) {
    // ...
  }
}

class JRadioButtonPosCalculator impements PositionCalculator {
  public Dimension calculatePositionForComponent(MyLayoutManager manager, Component component) {
    // ...
  }
}

// More classes ...

class MyLayoutManager extends LayoutManager {
  private static HashMap<Class, PositionCalculator> calculators = new HashMap<Class, PositionCalculator>();
  public static registerPositionCalculator(Class c, PositionCalculator p) {
    calculators.put(c, p);
  }
  private static PositionCalculator defaultCalculator = new DefaultPositionCalculator(); // Not shown here ...
  // ...
  private Dimension calculatePositionForComponent(Component c) {
    PositionCalculator calc = calculators.get(c.getClass());
    if (calc == null)
      calc = defaultCalculator;
    return calc.calculatePositionForComponent(this, c);
  }
} 
```

现在，您可以为所有组件注册单独的 PositionCalculators，方法是：

```
MyLayoutManager.registerPositionCalculator(JLabel.class, new JLabelCalculator());
MyLayoutManager.registerPositionCalculator(JRadioButton.class, new JRadioButtonCalculator());
// ... 
```

当然，这种解决方案可能存在以下缺点：

*   它可能比原来的慢。
*   它不适用于继承的类：如果您有 JLabel 的子类，则必须单独注册它。该解决方案可以适应这一点，但这将以另一次性能损失为代价......

另一方面，该解决方案具有很好的可扩展性：您可以定义不同的布局行为，而无需触及 MyLayoutManager 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T09:26:40.487

您可能希望将信息添加到约束对象。作为奖励/惩罚，您可以获得额外的间接层。

我的偏好是布局管理器接口将组件添加到容器，而不是让容器将组件添加到布局管理器的默认方式。这允许您以更自然的方式构造约束对象。在您的情况下，您可以使用单独的方法来添加`JLabel`,`JSeparator`等，这样您就不必重复信息并且可以有不同的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T06:11:30.063

唯一的其他实用方法是使用多态性并将函数 calculatePositionForComponent() 推送到组件接口/抽象类。这可以反过来使用来自实际布局管理器的数据，然后返回维度。根据 calculatePositionForComponent() 方法需要访问的数据类型，在您的特定情况下使用此方法可能不切实际。

使用多个 instanceof if 子句时的提示是使用 if-else if-else if-else 样式。然后根据实际情况将比较层次结构中最明显的选择向上移动，以使 if 块更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T06:18:28.423

看起来`instanceOf`可能是最直接的方法。您不能使用方法重载，因为方法重载是在编译时决定的。这意味着您不能只使用以下方法：

```
private Dimension calculatePositionForComponent(JLabel component) {
    ....
}
private Dimension calculatePositionForComponent(JSeparator component) {
    ....
}
.... 
```

因为您仍然必须使用`instanceOf`和强制转换才能在运行时调用正确的方法。

是的，使用`instanceOf`通常是一种代码味道，并且可能有更多的 OOP 方式来执行此操作。但是，对于这种特定类型的代码，我见过许多高级开发人员使用`instanceOf`. 它出现在语言中是有原因的，而不仅仅是作为拐杖。有时它是工作的最佳工具。恕我直言，这是其中之一。

# mysql - null 与逻辑运算符一起使用

> ID：704250
> 
> 赞同：3
> 
> 时间：2009-04-01T06:05:29.593
> 
> 标签：mysql, null

我有一个包含姓名、年龄和地址的表。表中共有五行数据。对于某些行，年龄为空。我必须显示年龄不为空的所有数据。

select * from sample_table where (age !=null);

但是没有显示输出，也没有给出错误。请解释一下。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T06:10:04.700

使用 NULL 你必须使用`IS`or `IS NOT`。以下查询应该有效：

```
SELECT * FROM sample_table WHERE (age IS NOT NULL) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T06:10:42.360

MySQL的解释

> NULL 值的概念对于 SQL 新手来说是一个常见的混淆来源，他们经常认为 NULL 与空字符串 '' 是一回事。不是这种情况。
> 
> 在 SQL 中，与任何其他值相比，NULL 值永远不会为真，即使是 NULL。包含 NULL 的表达式总是产生一个 NULL 值，除非在操作符和文档中另有说明
> 
> 如果要搜索为 NULL 的列值，则不能使用 expr = NULL 测试。
> 
> 要查找 NULL 值，您必须使用 IS NULL 测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T06:11:30.877

您必须使用 IS NULL 或 IS NOT NULL。

您不能直接与 NULL 进行比较，因为它不是价值（请不要学究！）

[维基百科上的 NULL](http://en.wikipedia.org/wiki/Null_(SQL))

MySQL、Sybase、SQL Server……都一样

# wpf - Changing which DependencyProperty I bind to at run time

> ID：704257
> 
> 赞同：0
> 
> 时间：2009-04-01T06:09:44.810
> 
> 标签：wpf, binding

I'm using WPF and have a data class which I bind to a control's DependencyProperties. I need to change the binding at run time under the control of a user. Ideally I'd like to be able to do something like this

```
myControl.SetBinding(UserControl.GetDependencyProperty("HeightProperty")
    , myBinding); 
```

Of course GetDependencyProperty taking a string doesn't work, I've got around this by creating my own static class

```
 public static DependencyProperty GetDP(string Name)
        {
            switch (Name)
            {
                case "Height": return UserControl.HeightProperty;
                case "Width": return UserControl.WidthProperty;
....
            } 
```

Is there a better way?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T08:27:19.507

You haven't described how the user changes the target dependency property. Can you just store the `DependencyProperty`s themselves rather than `string`s? That way you don't have to do any conversion at all. Pseudo-code:

```
//just an array of all allowable properties
public DependencyProperty[] AllowedProperties { get; }

//the property the user has chosen
public DependencyProperty ChosenProperty { get; set; }

//called whenever ChosenProperty changes
private void OnChosenPropertyChanged()
{
    //redo binding here, using ChosenProperty as the target
} 
```

**Edit after comments**: You can use DependencyPropertyDescriptor.FromName to get a DependencyProperty from its name, assuming you know the type of the owner:

```
var descriptor = DepedencyPropertyDescriptor.FromName(nameFromExcel, typeof(YourUserControl), typeof(YourUserControl));
var dependencyProperty = descriptor.DependencyProperty; 
```

# soa - SOA“启用”软件产品的示例？

> ID：704264
> 
> 赞同：-1
> 
> 时间：2009-04-01T06:12:02.417
> 
> 标签：soa

有人可以提供其中包含 SOA 的软件产品或应用程序（商业或开源）的真实示例吗？

例如，一些 X 公司声称其软件产品的最新发布版本现在与 SOA 兼容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T06:23:37.600

SOA 并不是一个软件产品可以声称与 SOA 兼容的规范。[在http://en.wikipedia.org/wiki/Service-oriented_architecture](http://en.wikipedia.org/wiki/Service-oriented_architecture)上阅读更多关于 SOA 的内容

SOA 基本上是一种架构/实现技术，旨在实现表示层与数据层*的松散耦合*。因此，多个服务/模块/应用程序可以访问相同的数据并根据需要使用它。这种*松耦合*可以导致更多的分布式编程。当您发现某个特定服务的需求量更大时，您可以将节点添加到您的集群中以获取该特定服务。

示例本身就是使用 SOA 架构构建的应用程序。Liferay（一种开源 Java CMS）是一个基于服务的应用程序。所有公开某种 API 的应用（参见

**但是是的，可以肯定的是，SOA 不是一个规范。**

# java - 为什么Java的GUI平台命名为“Swing”？

> ID：704267
> 
> 赞同：7
> 
> 时间：2009-04-01T06:13:40.870
> 
> 标签：java, swing

为什么Java的GUI开发平台叫“Swing”？这是什么意思？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-01T06:25:54.460

[这](http://blogs.oracle.com/thejavatutorials/entry/why_is_swing_called_swing)就是我目前所发现的——它的代号卡住了，它是以摇摆舞命名的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-01T14:02:14.723

Sun 的许多从事 Java 工作的人都喜欢 Swing 音乐和 Swing 舞蹈。

例如，Java 吉祥物 Duke 就是以艾灵顿公爵的名字命名的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T06:17:31.890

> Swing 不是首字母缩略词。该名称代表了其设计者在 1996 年末启动该项目时的协作选择。Swing 实际上是称为 Java 基础类 (JFC) 的更大 Java 产品系列的一部分，它包含了 Netscape 的 Internet Foundation 的许多特性课程 (IFC)，以及来自 IBM 的 Taligent 部门和 Lighthouse Design 的设计方面。

[在这里](http://my.safaribooksonline.com/156592455X/SWING-CH-1)找到

这是“摇摆”[的历史](http://www.mail-archive.com/jug-discussion@tucson-jug.org/msg00355.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-21T14:00:56.017

它实际上来自摇摆舞:)

[https://blogs.oracle.com/thejavatutorials/entry/why_is_swing_called_swing](https://blogs.oracle.com/thejavatutorials/entry/why_is_swing_called_swing)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T06:18:05.680

我不确定我是否理解您的问题，但**Swing**是 Java UI 库和 API 的名称。（旧的、过时的 GUI 称为 AWT。）

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-21T12:56:57.567

它代表Something WINdowing Graphics。不要相信异端。没有人知道某物是什么。

# postgresql - 如何判断 PostgreSQL 中是否启用了触发器？

> ID：704270
> 
> 赞同：16
> 
> 时间：2009-04-01T06:15:11.507
> 
> 标签：postgresql, triggers, status

我的谷歌搜索让我失望了。如何知道 PostgreSQL 触发器是否被禁用？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-04-14T08:37:58.080

下面的 SQL 将完成这项工作。它显示当前数据库中的所有触发器。

```
SELECT pg_namespace.nspname, pg_class.relname, pg_trigger.*
FROM pg_trigger
JOIN pg_class ON pg_trigger.tgrelid = pg_class.oid
JOIN pg_namespace ON pg_namespace.oid = pg_class.relnamespace 
```

如果*tgenabled*为“D”，则禁用触发器。所有其他值（[在此处](https://www.postgresql.org/docs/current/static/catalog-pg-trigger.html)记录）表明它以某种方式启用。

顺便提一句。如果要检查特定表的触发器，查询会短一些：

```
SELECT * FROM pg_trigger
WHERE tgrelid = 'your_schema.your_table'::regclass 
```

*转换*为[*regclass*](https://www.postgresql.org/docs/current/static/datatype-oid.html)类型让您以简单的方式从限定*表名*转换为 OID（对象 ID）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-04-01T07:32:13.007

这是我使用 postresql 的第一天，但​​我认为您可以通过 pg_trigger 系统表检查触发器状态：[http ://www.postgresql.org/docs/current/static/catalog-pg-trigger.html](http://www.postgresql.org/docs/current/static/catalog-pg-trigger.html)

您需要的列是`tgrelid`和`tgenabled`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-01-20T12:19:51.717

```
SELECT EXISTS (
    SELECT  tgenabled
    FROM    pg_trigger
    WHERE   tgname='your_unique_trigger_name' AND
            tgenabled != 'D'
); 
```

*如果您知道触发器名称是唯一的，并且启用了your_unique_trigger_name*触发器，则上述将返回 true (t) ：

```
 exists
--------
 t
(1 row) 
```

如果禁用，它将返回 false (f)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-15T16:18:44.903

从@tolgayilmaz 回复开始，我创建了一个简单的函数以在我的项目中使用

```
CREATE OR REPLACE FUNCTION trigger_exists_on_table(schema_name text, table_name text, trigger_name text)
RETURNS boolean AS
$body$
declare
    _sql text;
    _boolean_exists boolean;
begin
    _sql := format('
        SELECT EXISTS (
            SELECT 1
            FROM pg_trigger
            WHERE tgrelid = ''%s.%s''::regclass AND tgname = ''%s'' AND tgenabled != ''D''
        )
    ', schema_name, table_name, trigger_name);

    execute _sql into _boolean_exists;

    return _boolean_exists;
end
$body$
LANGUAGE plpgsql; 
```

# iphone - 适用于 iPhone 的 3D 游戏所见即所得

> ID：704274
> 
> 赞同：1
> 
> 时间：2009-04-01T06:17:00.957
> 
> 标签：iphone

我不是图形或游戏设计师，但想在我的 iPhone 应用程序中构建更多交互性并最终开始开发游戏应用程序。诸如 Blender 之类的工具似乎会在未来用于我将从它们中产生的任何有用的东西。我需要类似于游戏开发人员的 FrontPage 的东西。300 美元，用于 iPhone 的 Torgue 似乎是一个不错的一体化包装：[http](http://www.garagegames.com/products/torque-3D) ://www.garagegames.com/products/torque-3D 。有没有人使用过这个或类似的东西并且可以评论它有多好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T06:27:10.603

迄今为止我见过的最酷的端到端解决方案之一是[Unity3D](http://unity3d.com/)，它现在允许您将游戏直接发布为[iPhone 应用程序](http://unity3d.com/unity/features/iphone-publishing)。它并不便宜，但你可以花 598 美元获得独立许可证。有很好的支持和大量的社区示例和东西可以让你继续前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T09:43:49.650

Torque 和 Blender 没有可比性：Torque 主要是一个游戏引擎，而 Blender 主要是一个 3D 建模应用程序。您将使用后者为前者创建内容。

# security - Openssl 的 BIO 包装器和 SSL 调用有什么区别？

> ID：704275
> 
> 赞同：1
> 
> 时间：2009-04-01T06:17:06.073
> 
> 标签：security, openssl

如果使用 BIO_* 方式比原始 SSL_* 调用具有明显优势，我一直很困惑。

我总是使用非生物，因为我认为我有更多的控制权。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T15:19:28.673

BIO 把我逼到了墙角，但它可以让你透明地放入压缩和其他过滤器。您确实需要压缩，因为它 1) 使密码分析更难，2) 使用更少的带宽，以及 3) 压缩 + 加密所需的 CPU 比加密原始数据流要少。

# c - 在生产环境中捕获返回码？

> ID：704281
> 
> 赞同：2
> 
> 时间：2009-04-01T06:18:59.937
> 
> 标签：c, error-handling, return-value

我想知道是否检查我们为生产环境编写的所有函数的返回码。例如，我经常使用 C，你是否也捕获了标准库的返回码，不仅仅是你编写的函数，还有第 3 方 API/标准库/任何其他库。

我在生产中看到的大多数代码都没有这样做。所以我的问题是针对那些在生产环境中工作并且已经编写生产代码大约 20 年的经验丰富的人。您是否捕获了来自 3rd 方 API/标准库/任何其他库的返回代码，而不仅仅是您实现的功能？只是为了举例说明我的意思，你是否捕获了 C 标准库的 C 标准库函数（snprintf/sprintf、strncat/strcat 等等..、..）的返回码。

感谢你的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T14:10:59.710

我花了很长时间才知道这一点，但除非有少数例外，否则您应该**始终**检查函数的返回码。

我见过太多的代码调用`malloc`（例如），只是愉快地使用它返回的指针。99.9% 的情况下，这不是问题，但偶尔`malloc`会失败，并且当您尝试取消引用 NULL 指针时程序会崩溃。现在，有人可能会争辩说，如果无论如何都返回 NULL，您想退出`malloc`——这可能是真的，但您应该始终努力优雅地退出，即使出现致命错误也是如此。

所以，是的：检查返回码。不要仅仅因为它在过去一直有效，就认为它有效。事情总是失败**。**`errno`通过防御性编码、检查错误、检查、输出`strerror`和优雅地失败，您将节省大量时间和痛苦。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T06:27:46.577

我认为您不应该对此采取全有或全无的方法。*当您预计*函数调用会出现问题时（或者，当然，如果您的后续计算取决于函数返回的内容）捕获返回/错误代码。但是，如果您非常确定调用不会导致错误（或者即使在其他情况下您也没有使用返回值），*请*跳过捕获返回值。

这是需要依赖个人工程判断而非某些规定的“最佳实践”的领域之一。此外，我相信同样的想法也适用于异常处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-01T23:03:05.390

是的，除了极少数例外，您的程序应该始终检查和处理错误返回值，即使（尤其是）您不希望出现任何错误。毕竟，我们软件的环境通常不如我们希望的那么可靠。

顺便说一句，这就是大多数现代语言都有例外的原因：除此之外，它们为您没有明确处理（即捕获）的错误提供“默认错误处理程序”（中止和堆栈跟踪）。它们还允许集中错误处理，而不是检查每个函数调用的返回值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-01T07:57:58.873

如果函数可能返回错误代码 - 始终检查并处理它，就这么简单。这条规则可以在寻找 bug 期间为您节省大量时间。

如果函数总是返回无法指示错误的代码并且您不需要结果（如`printf`）当然您可以忽略它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-01T17:15:55.850

如果函数返回错误代码，您的调用代码*应*决定如何处理错误。对于某些程序，忽略错误可能是可以的；例如，这往往是人们在写入标准错误时对标准 I/O 库中的错误所做的事情。（如果消息失败了怎么办？退出？你还在这样做吗？）

令人讨厌的一个来源是记录返回值但始终返回相同值（通常为 0）的函数。通常，这些函数最初是在`void`返回之前用 K&R C 编写的。它们被转换为`int`，然后`return(0);`添加了一个“”以平息有关“函数不返回值”的警告，而不是将其转换`void`为应有的状态。此类功能应修改为`void`；在此期间，可以忽略它们的错误返回值。

我不同意另一个答案“当您预期函数调用出现问题时捕获返回/错误代码”中的观察结果。问题恰恰是出乎意料的事情会杀死你。即使是最稳定的操作也可能会意外失败（可能 DBMS 已经崩溃，所以即使您有连接，但您不再连接），您的软件必须识别并处理此类问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T07:47:21.677

`snprintf`很有用，因为您可能希望分配一个更大的缓冲区然后重试，或者您可能按顺序调用它：

```
// cons lists as [a,b,c, ...]
if ( type == kin_cons_class() ) {
    size_t offs = snprintf ( buf, max, "[" );

    if ( offs >= max )
        return nul_terminate ( buf, offs, max );

    size_t count = depth;

    kin_cons_ref_t empty = kin_cons_nil();
    kin_cons_ref_t cons;

    for ( cons = ref; cons != empty; cons = kin_cons_tail ( cons ) ) {
        if ( count > 15 ) {
            offs += snprintf ( buf + offs, max - offs, ", ..." );

            break;
        }

        if ( cons != ref ) {
            offs += snprintf ( buf + offs, max - offs, "," );

            if ( offs >= max )
                return nul_terminate ( buf, offs, max );
        }

        offs += string_repr ( buf + offs, max - offs, kin_cons_head ( cons ), depth, escape_strings );

        if ( offs >= max )
            return nul_terminate ( buf, offs, max );

        ++count;
    }

    if ( offs >= max )
        return nul_terminate ( buf, offs, max );

    offs += snprintf ( buf + offs, max - offs, "]" );

    return nul_terminate ( buf, offs, max );
} 
```

如果你继续没有所有的`offs >= max`测试，你会得到一个缓冲区溢出，它会出现段错误。

不会发生这种情况`printf`，因此检查退货不太常见。

如果您需要根据函数是否有效来更改您的行为，请检查返回。许多标准库函数可能会失败，或者稍后会导致未定义的行为，因此您需要检查这些返回。

如果您不需要根据返回值更改行为，那么检查它是没有意义的。

# vim - 以相反顺序完成文件名

> ID：704282
> 
> 赞同：3
> 
> 时间：2009-04-01T06:19:18.937
> 
> 标签：vim, autocomplete, tabs, filenames

要在 vim 中打开文件，我通常键入 ":e"，然后按 tab 直到出现我想要的文件。

但是，我总是有节奏，不经意间超过了所需的文件。在不知道如何向后移动的情况下，我最终一直跳到最后并重复整个过程。

有没有办法以相反的顺序执行文件名完成？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-01T06:22:10.553

`Shift-Tab`倒退。

`set wildmenu`当您使用`Tab`. 然后，您可以使用该列表中的箭头键选择文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T07:30:57.520

`Shift`+`Tab`和`Ctrl`+`P`都向后退。

但是`Shift`+`Tab`仅适用于 GUI [1]。因为我使用的是 vim 而不是 gvim，所以`Shift`+`Tab`不起作用。 `Ctrl`+`P`完美运行。

[1] 在 Amiga 和 MS-DOS 上。更多信息参见“:help cmdline-completion”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-18T13:52:04.607

如果您来到这里是因为您的 vim 自动完成从您使用“Tab”时的最后一项开始，从那里向后循环并且您正在使用 Supertab 插件，这是您的解决方案：[https ://stackoverflow.com/a/17105393/ 332451](https://stackoverflow.com/a/17105393/332451)

```
let g:SuperTabDefaultCompletionType = "<c-n>" 
```

# mod-rewrite - 简单的mod重写问题

> ID：704284
> 
> 赞同：1
> 
> 时间：2009-04-01T06:20:02.227
> 
> 标签：mod-rewrite

这是我当前的 .htaccess 文件：

```
RewriteRule ^$ index.html [QSA]
RewriteRule ^([^.]+)$ $1.html [QSA]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ dispatch.fcgi [QSA,L] 
```

如您所见，对[http://domain.com](http://domain.com/index.html)的请求转到[http://domain.com/index.html](http://domain.com)。我想更改它以便他们转到[http://domain.com/foo](http://domain.com/foo)，请注意它不作为文件或文件夹存在，它由 rails 处理。我该怎么做呢？请注意，我尝试了以下方法，但它不起作用：

```
RewriteRule ^$ foo [QSA]
RewriteRule ^([^.]+)$ $1.html [QSA]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ dispatch.fcgi [QSA,L] 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T06:28:17.467

将第一行更改为以下内容可能是安全的：

```
RewriteRule ^$ foo [QSA,L] 
```

该`L`标志告诉 mod-rewrite 它不应该在该规则之后应用任何其他规则。现在的问题是第二个规则在第一个规则之后应用，你最终在“foo.html”，而不是“foo”，对吧？

您尝试发送到“foo”和原始重定向到“index.html”之间的区别在于，第二条规则适用于不包含句点的请求。因此，当第一条规则重定向到“index.html”时，在使用后，第二条规则不再有效。但是，既然您没有重定向到带有句点的位置，那么第二个规则将在第一个规则之后应用，因此您将获得双重重定向。

此外，您也许可以`QSA`从第一行删除标志，但这取决于您的站点。如果有人访问该站点`http://domain.com/?user=fred`，您想将他们发送到`http://domain.com/foo?user=fred`，还是只是`http://domain.com/foo`？如果您不需要附加**的 Query S 字符串 A**，**则**可以**删除**该标志，并且只需：****`QSA`****

 ****```
RewriteRule ^$ foo [L] 
```

# c++ - 寻找跨平台抓包库

> ID：704286
> 
> 赞同：0
> 
> 时间：2009-04-01T06:20:55.937
> 
> 标签：c++, networking, cross-platform, packet-capture

除了 wincap 之外，是否有任何推荐的跨平台数据包捕获库与 c/c++ 一起使用？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T19:03:46.777

您可以使用“pcap”接口。类 Unix 系统在 windows 上用 libpcap 和 Winpcap 实现了这个接口。

[http://en.wikipedia.org/wiki/Pcap](http://en.wikipedia.org/wiki/Pcap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-25T19:13:16.877

数据包捕获工具： [http ://www.hunch.com/performance-troubleshooting-with-packet-captures/](http://www.hunch.com/performance-troubleshooting-with-packet-captures/)

# c++ - 在 Visual Studio C++ 2008 Express 中使用 Boost Asio 构建应用程序时出现链接器错误

> ID：704294
> 
> 赞同：0
> 
> 时间：2009-04-01T06:23:43.513
> 
> 标签：c++, visual-studio, boost, linker

我刚开始使用 Visual Studio C++ 2008 Express 用 C++ 编写一个小型应用程序。我使用 Windows 安装程序安装了 Boost Library。编译程序时出现以下错误：

> 正在编译...
> stdafx.cpp正在
> 编译...
> websave.cpp
> GoogleAuthenticate.cpp 正在
> 生成代码...
> 将清单编译到资源...
> Microsoft (R) Windows (R) Resource Compiler Version 6.1.6723.1
> 版权所有 (C) Microsoft Corporation。版权所有。
> 链接...
> 链接：致命错误 LNK1104：无法打开文件“libboost_system-vc90-mt-gd-1_38.lib”

// GoogleAuthenticate.h

```
#pragma once
#include <boost/asio.hpp>

class GoogleAuthenticate
{
  public:
        GoogleAuthenticate(void);
        virtual ~GoogleAuthenticate(void);
}; 
```

// GoogleAuthenticate.cpp

```
#include "StdAfx.h"
#include "GoogleAuthenticate.h"

GoogleAuthenticate::GoogleAuthenticate(void)
{
}

GoogleAuthenticate::~GoogleAuthenticate(void)
{
} 
```

// websave.cpp

```
#include "stdafx.h"
#include <iostream>
using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{ 
    cout << "hello" << endl; 
return 0;
} 
```

我检查了 boost/boost-1.38/lib 文件夹，并且 libboost_system-vc90-mt-gd-1_38.lib 在那里。还在项目的配置属性中的“其他包含目录”中添加了路径。

这里有什么遗漏的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T11:41:53.180

您还可以将其添加到该特定项目的库目录中。右键单击项目，属性 -> 链接器 -> 常规 -> 附加库目录。

We do this because we can have different versions of boost with different projects in our configuration management structure. If you just want to use whatever version is installed on your PC, use the setting from the tools menu: Tools -> Options -> Projects and Solutions -> VC++ Directories -> Library Files.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T06:27:12.443

您还需要将该目录添加到库目录列表中。

```
Tools | Options | Projects | VC++ Directories 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T14:27:38.610

忘记添加了：在 Configuration Properties > Linker > Additional Library Directories 中，输入 Boost 二进制文件的路径，例如 C:\Program Files\boost\boost_1_38_0\lib。

应该有 RTFM。[http://www.boost.org/doc/libs/1_36_0/more/getting_started/windows.html#link-from-within-the-visual-studio-ide](http://www.boost.org/doc/libs/1_36_0/more/getting_started/windows.html#link-from-within-the-visual-studio-ide)

固定的。

# android - Android - 在没有对话框的情况下显示不确定的进度条

> ID：704295
> 
> 赞同：20
> 
> 时间：2009-04-01T06:23:58.910
> 
> 标签：android

当单击按钮进行处理时，我想在屏幕中央显示我的进度条。但我只想要没有对话框的进度条..

有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-04-01T10:22:39.853

在 SDK 内的 ApiDemos 中有完整的解释。您想要的示例名为：ProgressBar3.java，可以在 \ApiDemos\src\com\example\android\apis\view\ 中找到

此外，如果您想删除对话框的边框以便只显示进度条，您可以将对话框本身定义为透明视图/叠加层（示例中也有说明）。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2011-05-03T01:07:44.107

如果您不需要对话框，只需像任何其他视图项一样将进度条放入您的布局中，并将可见性设置为“不可见”，甚至默认设置为“消失”。

然后只需在您需要时通过在代码中使用 setVisibility 将其更改为“可见”来显示它，并在任务完成时通过再次将其设置为“不可见”或“消失”来重新隐藏它。

例如

```
MyTask {

// get handle on ProgressBar ViewItem defined in XML (id:progressBar)

ProgressBar progressBar = findViewById(R.id.progressBar);

//starting task, show progress bar

progressBar.setVisibility(View.VISIBLE);

// Do some stuff... 

//task done, hide it again

progressBar.setVisibility(View.GONE);

} 
```

这是一个简单的版本，全部在 UI 线程中完成，但如果您使用异步任务或线程处理程序，这应该很容易适应。只需在 UI 线程中显示、隐藏和发布对对话框的任何更新，并在后台执行长时间运行的任务。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-09-09T07:35:12.940

@reflog：我猜这不是需要的。

@lostInTransit：

实现这一点的正确方法如下：

1.  创建自己的对话框
2.  将进度条作为对话框上的唯一视图
3.  设置对话框窗口背景透明
4.  显示对话框。

就是这样。它适用于 1.5 到 2.1 的设备。2.2没试过。

- 约格什

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-06-25T14:59:32.780

@Jesse Finnerty 的回答解决了我的问题。我所做的是：

```
private ProgressBar mprogressBar; 
```

内部 oncreate() 就像我做的其他按钮和文本视图一样， mprogressBar = (ProgressBar) findViewById(R.id.progressBar);

然后在我想让纺车出现的时候，我发出命令

```
mprogressBar.setVisibility(View.VISIBLE); 
```

在我希望它消失的地方。

```
mprogressBar.setVisibility(View.INVISIBLE); 
```

这实际上是在切换。这样当我程序中的状态发生变化时，进度条就会出现和消失

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-10-06T22:03:02.287

有一个很好的例子可以做 Yogesh 建议的事情：

[如何轻松地在 ProgressDialog 中居中进度指示器（当没有标题/文本传递时）](https://stackoverflow.com/questions/3225889)

归功于 Macarse 的发布。

# java - 使用 FLEX + JAVA 是否值得

> ID：704303
> 
> 赞同：4
> 
> 时间：2009-04-01T06:26:33.193
> 
> 标签：java, apache-flex, frameworks

我的小组即将开始做一个基于 Web 的大型项目/应用程序。该应用程序。它本身不会被很多人使用，它基本上只供管理人员和应用程序开发人员使用。我们的老板希望我们的程序员使用以下技术。stack: **FLEX -> Cairngorm -> BLAZEDS -> JAVA (EJB3 + POJO) -> ORACLE DB** 一些开发人员说很难使用 FLEX 的东西（因为他们需要学习 FLEX 和 Action Script）但其他人说FLEX 是唯一最好的解决方案（只是因为他们喜欢 flex 的工作方式并且他们看到了很多示例）。

您认为使用 flex 是否值得，或者我们应该使用一些框架（例如：JSF）来代替。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T07:22:04.030

Flex 有一个标记部分 (MXML) 和一个编程语言部分 (ActionScript)。MXML 部分没有太多的学习曲线。这很简单。ActionScript 是一个不同的故事，但我想我很难认真对待 Java 开发人员（我自己）会发现 Flex 或 ActionScript 特别“困难”的想法。我和一个由大约五六个其他 Java 开发人员组成的团队在第一天就创建了基本的 UI，一周之内我们就做了一些非常实用的东西。

我知道完全主观的意见，但完全值得一试。Flex 真的很有趣。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-01T16:51:20.840

基于看到一些例子，我不会跳入一项全新的技术。这听起来像是您项目的主要风险因素，至少基于您的（肯定是公正的）描述。

然而，有一个普遍接受的行动方针。你的团队至少应该从概念验证微型项目开始，并根据你的发现、你的技能和项目得出你自己的结论。

（如果老板说我必须这样做，我可能会这样做。虽然这本身就是一种有害的气味。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-01T06:33:37.063

Flex 是一种非常强大的 UI 呈现技术。从您的问题看来，您将在 UI 层中呈现大量数据，其中 Flex 似乎是完美的选择（除非您想通过 JSP 处理所有痛苦等）。

Caringorm 帮助您将 MVC 模式应用到 Flex UI 层——类似于 Struts/Spring MVC 对 JSP 层所做的。

对于 JAVA，我会推荐使用 Spring-enabled services 和 POJO 而不是 EJB3 来实现效果。使用支持 spring 的服务和/或 web 服务将帮助您更好地扩展并降低维护成本，因为您的业务逻辑在 POJO 中。

*同样，这是基于我自己的经验的个人意见。*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-01T12:36:32.620

查看[Tour de Flex](http://flex.org/tour)以了解 Flex 可以做什么以及如何做的示例。它也有一些 Java 集成示例。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-01T14:12:10.597

学习 MXML 和 Actionscript 并不难。但是数据绑定以及所有各种类和组件有时可能有点晦涩难懂。此外，学习定制组件和做更高级的事情可能会有一个学习曲线。

不建议同时学习 Flex 和 Cairngorm，即使是 Cairngorm 人自己也是如此。这绝对是部署应用程序的一种非常快速和简单的方法，但是学习使用 Flex 的最佳方法已经够难的了，而且当您不知道 flex 的工作原理时，将 Cairngorm 混入其中可能会令人沮丧，但非常有益。我在我的最新项目中使用 Cairngorm，我希望我在以前的一些应用程序中使用过它。

以下是一些资源：

[帮助决定是否使用 Cairngorm 的好文章](http://weblogs.macromedia.com/swebster/archives/2006/08/why_i_think_you.html)

[Adobe Customer Training 撰写的“Cairngorm 简介”](http://www.adobe.com/devnet/flex/articles/introducing_cairngorm.html)

[Adobe 的 6 部分系列介绍 Cairngorm 并以示例演练](http://www.adobe.com/devnet/flex/articles/cairngorm_pt1.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-04T08:06:56.480

我会推荐带有 Granite-DS 和 Flex 的 SEAM 框架。

唯一的问题是陡峭的学习曲线，但从技术上讲，从我的角度来看，它是最好的组合。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-01T07:38:28.907

请记住，有一个非常大的 Flex 用户社区可供依赖，如果您正在考虑使用 Flex，您不妨看看 Air，它可以让您摆脱浏览器部署

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-01T08:30:43.880

你应该看看[Exadel Flamingo](http://exadel.com/web/portal/flamingo)。它允许您轻松地将 Flex 连接到 Java 后端（例如 Spring、Seam 等）

我会为 EJB3+POJO 推荐[Jboss Seam](http://seamframework.org)。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-01T16:35:11.907

您可能还希望将 Grails 视为一个集成点。最近有很多工作在这里完成，它可以为您节省大量时间。特别看一下Grails的graniteDS插件和Flex Scaffold Plugin

[http://www.grails.org/plugin/flex-scaffold](http://www.grails.org/plugin/flex-scaffold) [http://www.grails.org/GraniteDS+Flex+Plugin](http://www.grails.org/GraniteDS+Flex+Plugin)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-10-29T13:19:50.417

我认为您会发现在用户界面中使用 Java Applet 而不是 Flex 的方式得到了更多支持。我所说的支持是指图书馆、论坛和教程。到目前为止，我只关注 Flex 一段时间，我发现的搜索结果不太面向开发人员，而更多地面向试图制作漂亮东西的非开发人员。我认为 Java 小程序作为前端没有什么问题，而且我认为一旦 Java 缩短了 VM 的启动时间（下一个版本的当前优先事项），将会有更多的人出现。

如果 Java 小程序是一个争论点，那么就有了 Google Web Toolkit (GWT)。它允许在您的 Java 开发环境中进行全面的开发、测试和调试，然后自动部署到 HTML / JavaScript。绝对精彩。他们的第三方组件确实取得了长足的进步，他们的用户支持使选择变得容易。

更少的语言 = 更少的思维堆栈交换。

# apache - 为什么这个 .htaccess 会跳过我的 RewriteBase？

> ID：704307
> 
> 赞同：1
> 
> 时间：2009-04-01T06:27:44.503
> 
> 标签：apache, .htaccess, mod-rewrite

这是我的 .htaccess 的开头

```
 # invoke rewrite engine
        RewriteEngine On
        RewriteBase /~new

    # force non domain.com to www.domain.com

    RewriteCond %{HTTP_HOST} !^www\.
    RewriteRule ^(.*) http://www.%{HTTP_HOST}/$1 [R=301,L,NC] 
```

每次我请求[http://www.example.com/~new/whatever](http://www.example.com/~new/whatever)我被发送到[http://www.example.com/whatever](http://www.example.com/whatever)。我在 $1 周围放置了括号，然后得到[http://www.example.com/[whatever]](http://www.example.com/[whatever])。

为什么要剥离我的 RewriteBase var ？

或者，有没有办法在 .htaccess 中设置一个环境变量，我可以将 RewriteBase 设置为并放在 $1 前面以使重定向工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T07:04:39.377

嗯，这就是 RewriteBase 的工作方式：它会从您的请求中清除所有前导路径信息，然后重新插入 RewriteBase。但是在您的示例中，它无法执行重新插入，因为您将其重定向到完全限定的 URL。

我认为你应该备份并准确定义你正在尝试做的事情，并且可能会提出一个新问题，而不是假设 RewriteBase 是你需要使用的并专注于“为什么 RewriteBase 不做我想”。RewriteBase 可能与它无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T06:36:48.897

做某事。像这样在文件的开头，稍后设置重写基础

```
RewriteCond %{HTTP_HOST} ^webmaster-eye\.de$
RewriteRule ^(.*)$ http://www.webmaster-eye.de/$1 [L,R=301] 
```

# android - Android - 我如何调查 ANR？

> ID：704311
> 
> 赞同：167
> 
> 时间：2009-04-01T06:28:25.763
> 
> 标签：android, performance, android-anr-dialog

有没有办法找出我的应用程序在哪里抛出了 ANR（应用程序无响应）。我查看了 /data 中的 traces.txt 文件，并看到了我的应用程序的跟踪。这就是我在跟踪中看到的。

```
DALVIK THREADS:
"main" prio=5 tid=3 TIMED_WAIT
  | group="main" sCount=1 dsCount=0 s=0 obj=0x400143a8
  | sysTid=691 nice=0 sched=0/0 handle=-1091117924
  at java.lang.Object.wait(Native Method)
  - waiting on <0x1cd570> (a android.os.MessageQueue)
  at java.lang.Object.wait(Object.java:195)
  at android.os.MessageQueue.next(MessageQueue.java:144)
  at android.os.Looper.loop(Looper.java:110)
  at android.app.ActivityThread.main(ActivityThread.java:3742)
  at java.lang.reflect.Method.invokeNative(Native Method)
  at java.lang.reflect.Method.invoke(Method.java:515)
  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:739)
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:497)
  at dalvik.system.NativeStart.main(Native Method)

"Binder Thread #3" prio=5 tid=15 NATIVE
  | group="main" sCount=1 dsCount=0 s=0 obj=0x434e7758
  | sysTid=734 nice=0 sched=0/0 handle=1733632
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #2" prio=5 tid=13 NATIVE
  | group="main" sCount=1 dsCount=0 s=0 obj=0x433af808
  | sysTid=696 nice=0 sched=0/0 handle=1369840
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #1" prio=5 tid=11 NATIVE
  | group="main" sCount=1 dsCount=0 s=0 obj=0x433aca10
  | sysTid=695 nice=0 sched=0/0 handle=1367448
  at dalvik.system.NativeStart.run(Native Method)

"JDWP" daemon prio=5 tid=9 VMWAIT
  | group="system" sCount=1 dsCount=0 s=0 obj=0x433ac2a0
  | sysTid=694 nice=0 sched=0/0 handle=1367136
  at dalvik.system.NativeStart.run(Native Method)

"Signal Catcher" daemon prio=5 tid=7 RUNNABLE
  | group="system" sCount=0 dsCount=0 s=0 obj=0x433ac1e8
  | sysTid=693 nice=0 sched=0/0 handle=1366712
  at dalvik.system.NativeStart.run(Native Method)

"HeapWorker" daemon prio=5 tid=5 VMWAIT
  | group="system" sCount=1 dsCount=0 s=0 obj=0x4253ef88
  | sysTid=692 nice=0 sched=0/0 handle=1366472
  at dalvik.system.NativeStart.run(Native Method)

----- end 691 ----- 
```

我怎样才能找出问题出在哪里？trace 中的方法都是 SDK 方法。

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2009-04-01T20:59:06.267

当“主”线程中发生一些长时间的操作时，就会发生 ANR。这是事件循环线程，如果它很忙，Android 将无法在应用程序中处理任何进一步的 GUI 事件，从而引发 ANR 对话框。

现在，在您发布的跟踪中，主线程似乎运行良好，没有问题。它在 MessageQueue 中空闲，等待另一条消息进来。在您的情况下，ANR 可能是一个更长的操作，而不是永久阻塞线程的东西，因此事件线程在操作完成后恢复，并且您的跟踪通过了在 ANR 之后。

如果 ANR 是永久阻塞（例如死锁获取一些锁），则检测 ANR 发生的位置很容易，但如果只是暂时的延迟，则更难。首先，检查您的代码并寻找易受攻击的地方和长时间运行的操作。示例可能包括在事件线程内使用套接字、锁、线程休眠和其他阻塞操作。您应该确保这些都发生在单独的线程中。如果没有问题，请使用 DDMS 并启用线程视图。这将显示应用程序中的所有线程，类似于您拥有的跟踪。重现ANR，同时刷新主线程。这应该准确地向您展示 ANR 时发生的事情

* * *

## 回答 #2

> 赞同：107
> 
> 时间：2011-07-29T09:00:19.987

您可以在 API 级别 9 及更高级别启用[StrictMode 。](http://developer.android.com/reference/android/os/StrictMode.html)

> StrictMode 最常用于捕获应用程序主线程上的意外磁盘或网络访问，其中接收 UI 操作并发生动画。通过保持应用程序的主线程响应，您还可以防止向用户显示**ANR 对话框。**

```
public void onCreate() {
    StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()
                           .detectAll()
                           .penaltyLog()
                           .penaltyDeath()
                           .build());
    super.onCreate();
} 
```

> 使用`penaltyLog()`您可以查看 adb logcat 的输出，同时使用您的应用程序查看发生的违规行为。

* * *

## 回答 #3

> 赞同：84
> 
> 时间：2014-07-15T15:03:37.917

您想知道哪个任务拥有一个 UI 线程。跟踪文件为您提供查找任务的提示。您需要调查每个线程的状态

# 线程状态

*   running - 执行应用程序代码
*   睡眠 - 称为 Thread.sleep()
*   监视器 - 等待获取监视器锁
*   等待 - 在 Object.wait()
*   native - 执行本地代码
*   vmwait - 等待 VM 资源
*   僵尸 - 线程处于死亡过程中
*   init - 线程正在初始化（你不应该看到这个）
*   开始 - 线程即将开始（你也不应该看到这个）

专注于 SUSPENDED、MONITOR 状态。监视器状态指示正在调查哪个线程，线程的 SUSPENDED 状态可能是死锁的主要原因。

# 基本调查步骤

1.  找到“等待锁定”
    *   你可以找到监控状态**“Binder Thread #15”prio=5 tid=75 MONITOR**
    *   如果发现“等待锁定”你很幸运
    *   示例：等待锁定 threadid=74 持有的 <0xblahblah> (a com.foo.A)
2.  您可以注意到“tid=74”现在持有一个任务。所以去 tid=74
3.  tid=74 可能是 SUSPENDED 状态！找到主要原因！

跟踪并不总是包含“等待锁定”。在这种情况下，很难找到主要原因。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-08-08T07:14:57.177

过去几个月我一直在学习 android，所以我远非专家，但我对 ANR 的文档感到非常失望。

大多数建议似乎都是为了避免它们或通过盲目地查看代码来修复它们，这很好，但我在分析跟踪时找不到任何东西。

对于 ANR 日志，您确实需要寻找三件事。

1）死锁：当一个线程处于WAIT状态时，你可以通过查看细节来找到它的“heldby=”。大多数时候，它会被自己持有，但如果它被另一个线程持有，那很可能是一个危险信号。去看看那个线程，看看它是由什么持有的。您可能会发现一个循环，这是出现问题的明显迹象。这是非常罕见的，但这是第一点，因为当它发生时，这是一场噩梦

2）主线程等待：如果你的主线程处于WAIT状态，检查它是否被另一个线程持有。这不应该发生，因为您的 UI 线程不应该由后台线程持有。

这两种情况都意味着您需要大量修改代码。

3) 主线程上的繁重操作：这是 ANR 最常见的原因，但有时也是更难找到和修复的原因之一。查看主线程详细信息。向下滚动堆栈跟踪，直到看到您识别的类（来自您的应用程序）。查看跟踪中的方法并确定您是否在这些地方进行网络调用、数据库调用等。

最后，我为无耻插入自己的代码道歉，你可以使用我在[https://github.com/HarshEvilGeek/Android-Log-Analyzer](https://github.com/HarshEvilGeek/Android-Log-Analyzer)写的 python 日志分析器这将遍历你的日志文件，打开 ANR 文件，找到死锁，查找等待的主线程，在代理日志中查找未捕获的异常，并以相对易于阅读的方式将其全部打印在屏幕上。阅读自述文件（我将要添加）以了解如何使用它。它在上周帮助了我很多！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-02-18T20:26:54.617

每当您分析时序问题时，调试通常无济于事，因为在断点处冻结应用程序会使问题消失。

最好的办法是在应用程序的不同线程和回调中插入大量日志调用 (Log.XXX())，然后查看延迟在哪里。如果您需要堆栈跟踪，请创建一个新异常（只需实例化一个）并记录它。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-04-25T09:14:13.227

## 什么触发 ANR？

通常，如果应用程序无法响应用户输入，系统会显示 ANR。

在任何情况下，您的应用程序可能执行冗长的操作，您不应在 UI 线程上执行工作，而应创建一个工作线程并在那里完成大部分工作。这使 UI 线程（驱动用户界面事件循环）保持运行，并防止系统断定您的代码已冻结。

## 如何避免 ANR

默认情况下，Android 应用程序通常完全在单个线程上运行，即“UI 线程”或“主线程”）。这意味着您的应用程序在 UI 线程中执行的任何需要很长时间才能完成的操作都可能触发 ANR 对话框，因为您的应用程序没有给自己机会来处理输入事件或意图广播。

因此，在 UI 线程中运行的任何方法都应该在该线程上做尽可能少的工作。特别是，活动应该尽可能少地设置关键生命周期方法，例如 onCreate() 和 onResume()。可能长时间运行的操作（例如网络或数据库操作）或计算量大的计算（例如调整位图大小）应该在工作线程中完成（或者在数据库操作的情况下，通过异步请求）。

## 代码：具有 AsyncTask 类的工作线程

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
    // Do the long-running work in here
    protected Long doInBackground(URL... urls) {
        int count = urls.length;
        long totalSize = 0;
        for (int i = 0; i < count; i++) {
            totalSize += Downloader.downloadFile(urls[i]);
            publishProgress((int) ((i / (float) count) * 100));
            // Escape early if cancel() is called
            if (isCancelled()) break;
        }
        return totalSize;
    }

    // This is called each time you call publishProgress()
    protected void onProgressUpdate(Integer... progress) {
        setProgressPercent(progress[0]);
    }

    // This is called when doInBackground() is finished
    protected void onPostExecute(Long result) {
        showNotification("Downloaded " + result + " bytes");
    }
} 
```

## 代码：执行工作线程

要执行此工作线程，只需创建一个实例并调用 execute()：

```
new DownloadFilesTask().execute(url1, url2, url3); 
```

## 来源

[http://developer.android.com/training/articles/perf-anr.html](http://developer.android.com/training/articles/perf-anr.html)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-05-18T07:27:50.547

**您需要在/data/anr/traces.txt**文件中查找“等待锁定”

[![在此处输入图像描述](https://i.stack.imgur.com/Py2CQ.png)](https://i.stack.imgur.com/Py2CQ.png)

更多详细信息：[使用 Android 和 Play 工具实现高性能工程师 (Google I/O '17)](https://www.youtube.com/watch?v=ySxCrzsKSGI)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-05-07T06:01:14.867

不确定这是否会有所帮助。我的问题是应用程序崩溃并冻结了我的设备，然后强制它在具有 android 10 的设备上重新启动，但在 android 6 上运行良好，logcat 中没有显示任何内容。崩溃不容易重现并且非常不可预测。

我花了将近 2 周的时间对 ANR 进行搜索和故障排除，但无济于事。最后同步 gradle 解决了所有问题.....菜鸟错误。

希望这会对某人有所帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-06T08:15:53.427

我的 ANR 问题，经过大量工作后，我发现一个线程正在调用布局中不存在的资源，而不是返回异常，我得到了 ANR ...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-11T10:10:22.087

基于@Horyun Lee 的回答，我编写了一个小的 python[脚本](https://github.com/WanghongLin/miscellaneous/blob/master/tools/anr.py)来帮助调查来自`traces.txt`.

`graphviz`如果您已在系统上安装， ANR 将作为图形输出`grapvhviz`。

```
$ ./anr.py --format png ./traces.txt 
```

如果在 file 中检测到 ANR，则 png 将输出如下所示`traces.txt`。它更直观。

[![在此处输入图像描述](https://i.stack.imgur.com/OFWkb.png)](https://i.stack.imgur.com/OFWkb.png)

上面使用的示例`traces.txt`文件是从[这里](https://redmine.replicant.us/attachments/1400/traces.txt)获取的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-07T09:38:16.303

考虑使用[ANR-Watchdog](https://github.com/SalomonBrys/ANR-WatchDog)库来准确跟踪和捕获 ANR 堆栈跟踪的详细信息。然后，您可以将它们发送到您的崩溃报告库。我建议`setReportMainThreadOnly()`在这种情况下使用。您可以让应用程序抛出一个非致命的冻结点异常，或者让应用程序在 ANR 发生时强制退出。

请注意，发送到您的 Google Play 开发者控制台的标准 ANR 报告通常不够准确，无法查明确切的问题。这就是需要第三方库的原因。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-08-26T05:56:44.887

对于已发布的应用程序，Google Play 控制台本身会显示 Exact ANR 报告，如崩溃报告。它将向您显示导致 ANR 的类或线程的所有信息、发生次数和所有其他详细信息。

> 您的应用仪表板-> 探索 Android Vitals 选项卡 -> 查看核心 Vitals 详细信息（ANR 部分）-> 选择您的 apk 或工件 vesrion -> 崩溃和 ANR 页面只需从下拉列表中选择 ANR。它将列出所有 ANR。

您可以导航到特定的 ANR 并查看详细信息。

# java - servlet 简介

> ID：704313
> 
> 赞同：4
> 
> 时间：2009-04-01T06:28:50.880
> 
> 标签：java, servlets

我在哪里可以获得有关 servlet 的知识？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-01T06:30:18.240

大多数人会从 Sun 关于 servlet 的官方教程开始。

[http://java.sun.com/javaee/5/docs/tutorial/doc/bnafd.html](http://java.sun.com/javaee/5/docs/tutorial/doc/bnafd.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-01T06:36:16.090

背景 [来自雅各布]：

Servlet 是服务器端的 Java 程序。例如，当您提交购买某些东西的订单时，servlet 可以处理您的订单并向您发送电子邮件确认。

Servlet 比 CGI 和大多数其他技术更好地处理请求。

Servlet 需要 Web 容器或 J2EE 容器才能部署，普通的 http 服务器是不够的。

Servlet 由 Java 编程语言支持，因此此类编程语言理论上在交付功能方面没有限制，其他一些语言则不然

一般信息

*   [Java/Sun 的相关信息](http://java.sun.com/products/servlet/)
*   [维基百科文章](http://en.wikipedia.org/wiki/Java_Servlet)

Sun的教程

*   [教程 1](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/Servlets.html)
*   [教程 2](http://java.sun.com/javaee/5/docs/tutorial/doc/bnafd.html)

图书

*   [头部优先 Servlet](https://rads.stackoverflow.com/amzn/click/com/0596516681)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-01T08:07:25.887

看完官方教程。[考虑获取Head First Servlet 和 JSP](https://rads.stackoverflow.com/amzn/click/com/0596516681)的副本。阅读本文后，Servlet 和相关技术会变得很方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T22:58:22.440

Servlet 是服务器端的 Java 程序。例如，当您提交购买某些东西的订单时，servlet 可以处理您的订单并向您发送电子邮件确认。

Servlet 比 CGI 和大多数其他技术更好地处理请求。

Servlet 需要 Web 容器或 J2EE 容器才能部署，普通的 http 服务器是不够的。

Servlet 由 java 编程语言提供支持，因此这种编程语言在理论上对交付功能没有任何限制，而其他一些语言则并非如此。

# c# - 在 C# 中查找设备

> ID：704314
> 
> 赞同：0
> 
> 时间：2009-04-01T06:28:53.487
> 
> 标签：c#

当我的系统发现像 USB 这样的新硬件时，我需要我的代码来响应事件。我该如何在 C# 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T06:35:32.423

我认为没有任何 .Net 类可以帮助您做到这一点。因此，您必须退回到直接调用 Windows API。

当设备发生变化时，Windows 会发送 WM_DEVICECHANGE 消息。编写代码以响应此消息。

请参阅有关 WM_DEVICECHANGE 的[MSDN 页面。](http://msdn.microsoft.com/en-us/library/aa363480(VS.85).aspx)此外，有关如何编写代码来响应它的详细信息，请参阅[此 pdf](http://www.codemiles.com/download/file.php?id=719)。

要了解如何从 C# 程序调用 Windows API，请参阅[这篇文章](http://www.codeproject.com/KB/cs/c__and_api.aspx)。

# java - string 类的 subString() 函数是如何工作的

> ID：704319
> 
> 赞同：1
> 
> 时间：2009-04-01T06:30:20.517
> 
> 标签：java, string

请看下面的代码。

```
String s = "Monday";
if(s.subString(0,3).equals("Mon"){}

String s2 = new String(s.subString(0,3));
String s3 = s.subString(0,3); 
```

我知道第 2 行仍将指向“星期一”，并且有一个新的 String 对象，其偏移量和计数设置为 0,3。

第 4 行将在字符串池中创建一个新的字符串“Mon”并指向它。

但不确定第 5 行是否会像第 2 行或第 4 行一样。

如果我对第 2 行或第 4 行的错误也请更正..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-01T06:34:09.823

**正如 Pete Kirkham 所指出的，这是特定于实现的。我的回答仅适用于 Sun JRE，并且仅在 Java 7 update 6 之前。**

您对正常`substring`调用的正确调用只是创建一个新字符串，该字符串引用与原始字符串相同的字符数组。这也是第 5 行发生的情况。新的字符串对象引用恰好被分配给一个变量这一事实不会改变该方法的行为。

为了清楚起见，您说在第 2 行中，新字符串仍将指向“Monday”——字符串中的 char 数组引用将指向与“Monday”使用的相同的 char 数组。但是“星期一”本身就是一个字符串，而不是一个字符数组。换句话说，到第 2 行完成（并忽略 GC）时，有两个字符串对象，它们都引用同一个 char 数组。一个计数为 6，另一个计数为 3；两者的偏移量均为 0。

但是，您对使用“字符串池”的第 4 行是错误的-那里没有进行池化。但是，它与其他线路不同。当您调用`String(String)`构造函数时，新字符串会获取原始字符数据的*副本*，因此它是完全独立的。如果您只需要一个包含非常大原始字符串的一小部分的字符串，这将非常有用；它允许在您保留一小部分的副本时对原始的大型 char 数组进行垃圾收集（假设没有其他需要它）。根据我自己的经验，一个很好的例子是从一行中读取行。默认情况下，`BufferedLineReader`将使用 80 个字符的缓冲区读取行，因此返回的每个字符串都将使用至少 80 个字符的 char 数组。如果您正在阅读大量非常短的行（单个单词），那么仅通过使用奇怪的外观就可以看出内存消耗方面的差异

```
line = new String(line); 
```

可能非常重要。

这有帮助吗？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-01T08:25:23.910

> 我知道第 2 行仍将指向“星期一”，并且有一个新的 String 对象，其偏移量和计数设置为 0,3。

Sun JRE 实现目前就是这样。我似乎记得过去的 Sun 实现不是这样，JVM 的其他实现也不是这样。不要依赖未指定的行为。GNU 类路径可能会复制数组（我不记得使用什么比率来决定何时复制，但如果副本是原始数据的足够小部分，它确实会复制，这将一个不错的 O(N) 算法转变为O(N^2))。

> 第 4 行将在字符串池中创建一个新的字符串“Mon”并指向它。

不，它会在堆中创建一个新的字符串对象，并遵守与任何其他对象相同的垃圾收集规则。它是否共享相同的底层字符数组取决于实现。不要依赖未指定的行为。

构造[`String(String)`](http://java.sun.com/javase/6/docs/api/java/lang/String.html#String(java.lang.String))函数说：

> 初始化一个新创建的 String 对象，使其**表示与参数相同的字符序列**；换句话说，新创建的字符串是参数字符串的副本。

构造[`String(char[])`](http://java.sun.com/javase/6/docs/api/java/lang/String.html#String(char[]))函数说：

> 分配一个新的 String 以便它表示当前包含在字符数组参数中的字符序列。**字符数组**的内容被复制；随后对字符数组的修改不会影响新创建的字符串。

遵循良好的 OO 原则，`String`实际上没有任何方法需要使用字符数组来实现，因此规范的任何部分都不`String`需要对字符数组进行操作。将数组作为输入的那些操作指定将数组的**内容**复制到字符串中使用的任何内部存储。字符串可以在内部使用 UTF-8 或 LZ 压缩并符合 API。

但是，如果您的 JVM 没有进行小比率子字符串优化，那么当您使用 时，它有可能只复制相关部分`new String(String)`，因此可以尝试看看它是否可以改善内存使用。并非所有影响 Java 运行时的东西都由 Java 定义。

要在字符串池中获取一个字符串，它是`equal`一个字符串，使用[`intern()`](http://java.sun.com/javase/6/docs/api/java/lang/String.html#intern())方法。如果具有该值的字符串已经被实习，这将从池中检索一个字符串，或者创建一个新字符串并将其放入池中。请注意，池化字符串具有不同的（同样取决于实现）垃圾收集行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T19:54:23.187

**注意**：从 Sun/Oracle 的 Java 中的 Java 7 update 6 开始，String.substring 创建的 String 不再共享父级的 char 数组。决定这种优化很少有好处，并且不能证明`offset`和`count`字段的成本和复杂性是合理的。

一些链接：

*   基本原理： http: [//mail.openjdk.java.net/pipermail/core-libs-dev/2012-May/010257.html](http://mail.openjdk.java.net/pipermail/core-libs-dev/2012-May/010257.html)
*   正式的错误报告：[http ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6924259](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6924259)
*   String.java 差异：[http ://hg.openjdk.java.net/jdk7u/jdk7u/jdk/diff/e1c679a00712/src/share/classes/java/lang/String.java](http://hg.openjdk.java.net/jdk7u/jdk7u/jdk/diff/e1c679a00712/src/share/classes/java/lang/String.java)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T06:37:31.390

在第 5 行---->s3=Mon 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T08:39:35.950

在 Sun 的实现中，String 对象有一个`private final char value[]`字段。通过调用 substring() 创建新字符串时，不会创建新的 char 数组，新实例使用`value`原始对象的。第 2 行和第 5 行就是这种情况，新的 String 对象将使用 s 的 char 数组。

如果字符串长度小于 char 数组的总长度，构造函数 String(String) 会创建一个新的 char 数组`value`。所以在第 4 行创建的 String 将使用一个新的 char 数组。

你应该看看构造函数 public String(String original) 的[源代码](http://www.docjar.com/html/api/java/lang/String.java.html#151)，真的很简单。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-26T19:38:12.533

**“子字符串通过获取原始字符串的一部分从源字符串中创建一个新对象”。**

在 Java 1.7 之前，substring 持有原始字符数组的引用，这意味着即使是 5 个字符长的子字符串，也可以通过持有强引用来防止 1GB 字符数组被垃圾回收。

这个问题在 Java 1.7 中得到修复，其中不再引用原始字符数组，但这种更改也使得创建子字符串在时间上有点昂贵。早些时候它在 O(1) 的范围内，在 Java 7 上最坏的情况可能是 O(n)。

[![在此处输入图像描述](https://i.stack.imgur.com/cQy2f.png)](https://i.stack.imgur.com/cQy2f.png)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-04-01T06:33:08.983

阅读此[https://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html](https://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)

> “返回一个新字符串……”

# sharepoint - SharePoint 2007：格式化表单域

> ID：704332
> 
> 赞同：1
> 
> 时间：2009-04-01T06:36:10.927
> 
> 标签：sharepoint, date, formatting, formfield

我正在尝试在发布网站的 SharePoint 母版页的页脚上显示页面所有者和上次修改日期。在我的母版页上，我目前有：

```
<SharePoint:FormattedString FormatText="Page owner: {0} Last updated: {1:dd/MM/yyyy}" runat="server">
<SharePoint:FormField ControlMode="Display" FieldName="PublishingContact" DisableInputFieldLabel="true" runat="server"/>
<SharePoint:FormField ControlMode="Display" FieldName="Modified" DisableInputFieldLabel="true" runat="server" />
</SharePoint:FormattedString> 
```

这很好用，但它不会修改日期格式：

> 页面所有者：litwareinc\treesj 最后更新时间：2009 年 3 月 31 日晚上 10:32

我猜日期是作为字符串返回的，所以 dd/MM/yyyy 的格式没有任何作用。我意识到修改 Web 应用程序上的区域设置可能会解决此问题，但我更感兴趣的是如何使用与默认格式不同的格式来实现这一点。

提前致谢！

强尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T20:38:01.543

你真的想放置一个`<SharePointWebControls:DateTimeField/>`See [here](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.webcontrols.datetimefield.aspx)。但这是 SharePoint，因此也请参见[此处](http://sharepointers.blogspot.com/2008/09/publishing-page-layout-datetimefield.html)添加一些代码，以便以不同的格式呈现，并在后面添加一些代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T13:20:02.560

您是对的 - FormField 控件已经将输出呈现为字符串，因此将其包装在 FormattedString 内将不起作用。

[Nat](https://stackoverflow.com/users/13813/nat)答案的替代方法是编写您自己的控件并将 FormFields 包装在其中。然后，您可以捕获渲染的输出并根据需要进行转换。

# svn - 忽略来自 SVN 提交的一些文件

> ID：704334
> 
> 赞同：2
> 
> 时间：2009-04-01T06:36:21.860
> 
> 标签：svn

必须从 svn 中删除日志和 schema.rb，因为这取决于机器。我的模式在更新后没有迁移，因为不同机器上的模式修订具有不同的顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T07:09:24.310

我假设您在添加/提交时需要忽略文件。要治愈这种情况，首先将不需要的文件/模式添加到[svn:ignore](http://svnbook.red-bean.com/en/1.1/ch07s02.html "svn：忽略")关键字。

然后为自己备份这些文件并将它们从 SVN 存储库中删除并提交删除。接下来，将备份复制回工作副本。这些文件将不再被 SVN 看到，因为您已将它们添加为“忽略”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T07:09:25.387

这是通过添加 svn:ignore 属性来完成的。CD 到您的文件所在的位置，然后尝试以下命令：

```
svn propset svn:ignore schema.rb . 
```

注意命令末尾的点。

检查文件是否被忽略：

```
svn status --no-ignore 
```

然后提交。

# c# - 使用 MVVM 为 WPF 搭建脚手架？

> ID：704337
> 
> 赞同：9
> 
> 时间：2009-04-01T06:37:30.313
> 
> 标签：c#, wpf, mvvm, scaffolding

谁能告诉我是否有可能（如果存在某些实用程序？？）考虑到带有 WPF 的 MVVM 来创建脚手架。

我的想法是我似乎有很多数据访问表单，当然我想自定义它们，但最初我想要一种快速提供表单的方法，即放置在它们上并绑定到 mvvm 的所有控件？

也许我问了很多？

基本上这些表格会为我自动创建，后来我可以自定义它们并移动它们，但最初它们只是可以工作。

脚手架 - 我从 Web 开发中窃取了这个术语，但我认为它仍然存在于 wpf 中？

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-27T09:05:01.360

有一家名为[DevExpress](http://www.devexpress.com/)的公司的产品。他们拥有您所描述的产品。[在此处](http://www.youtube.com/watch?v=ILWdnTsIDfc)查看产品视频

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T18:20:58.637

脚手架是一种为数据库中的每个表自动生成 UI 的方法。它允许您创建一个功能 UI，用于根据数据的模式查看和编辑数据。以下是 WPF 脚手架的一些资源。

Code Project 网站上有一篇 WPF 脚手架文章：[WPF CRUD Generator (Scaffolding)](http://www.codeproject.com/Articles/36975/WPF-CRUD-Generator-Scaffolding)

还有一个 Codeplex 项目可能会有所帮助：[WPF Scaffolder](http://wpfscaffolder.codeplex.com)

享受！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T08:23:30.967

我不确定对视图有什么帮助，但[这个工具](http://clarius.codeplex.com/Wiki/View.aspx?title=ViewModel%20Tool&referringTitle=Home)应该有助于视图模型。我从未使用过它，因此无法保证它的效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T09:04:29.277

谢谢..那会派上用场..我还发现了这个[http://karlshifflett.wordpress.com/xaml-power-toys/](http://karlshifflett.wordpress.com/xaml-power-toys/) 它允许您从模型中连接表格..

再次感谢

# c# - 在 C# 中等待线程池

> ID：704343
> 
> 赞同：1
> 
> 时间：2009-04-01T07:06:05.880
> 
> 标签：c#, threadpool, time-wait

### 重复

> [等待池线程完成。](https://stackoverflow.com/questions/540078/wait-for-pooled-threads-to-complete)

我有 X 个函数等待分配给线程池，线程池的最大线程数为 5。我需要找到一种解决方案，让主线程等待所有 X 个函数执行完毕。

代码如下所示：

```
 for(int i=0;i<Rulecnt;i++)
              {
                  int copy = count;
                  ds[copy] = dba.geData(ru[copy]);
                  dcont[copy] = new DataContainer(ru[copy], ds[copy], copy);
                  ThreadPool.QueueUserWorkItem(new WaitCallback(runRule[copy].performTask),dcont[count]);
              } 
```

我希望主线程等到所有函数都执行完毕。

一个简单的解决方案是创建 Rulecnt no of ManualResetEvents 并将它们传递给线程，并等待所有信号到达。

但是由于任何时候运行的最大线程数是 5，我们可以只使用 5 个 ManualResetEvents 吗？，如果可能的话怎么办？

或者如果有任何解决方案请解释一下？

# delphi - 在 Delphi 中，如何从接口类型数据初始化 TGUID 的 const 数组？

> ID：704346
> 
> 赞同：7
> 
> 时间：2009-04-01T07:07:47.480
> 
> 标签：delphi, interface, guid, array-initialize

我想像这样初始化一个数组 -

```
Const MyArray : Array[0..0] Of TGUID = (IInterface); 
```

但它导致 -

```
[DCC Error] Test.pas(10): E2010 Incompatible types: 'TGUID' and 'string' 
```

所以为了看看会发生什么，我尝试了这个 -

```
Const MyArray : Array[0..0] Of String = (IInterface); 
```

这导致了这个！

```
[DCC Error] Test.pas(10): E2010 Incompatible types: 'string' and 'TGUID' 
```

多奇怪！当然 IInterface 是其中之一，但它似乎顽固地转换为错误的类型。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-01T08:50:31.667

您可以从接口声明中提取 GUID，并将它们声明为（字符串）常量。然后，您可以在接口声明和数组常量声明中使用这些常量。编译器接受需要 TGUID 的有效 GUID 字符串。无效的字符串会导致 E2204“不正确的 GUID 语法”编译错误。

```
const
  MyGuid1 = '{99BDAB12-B1B6-41B0-9BF1-2C1DB3D8EC70}';
  MyGuid2 = '{8C7CD303-8D81-469B-99ED-E1F163E9036F}';

type
  IMyInterface1 = interface
    [MyGuid1]
  end;

  IMyInterface2 = interface
    [MyGuid2]
  end;

const
  MyArray: array[0..1] of TGUID = (MyGuid1, MyGuid2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T07:48:26.103

如果您使用 const 数组，则必须使用 const 值设置它，如下所示：

```
const GuidArray: array[0..0] of TGuid=
  ('{84DBCC66-72AA-4806-AE28-B55FC5B83FC8}'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T08:29:12.637

我刚刚在 C++Builder 中尝试过：

```
const TGUID g = __uuidof(IInterface);
const TGUID MyArray[] = {__uuidof(IInterface)}; 
```

我怀疑显式关键字 __uuidof 可能会避免您遇到的问题，但它只是用非常相似的东西替换它。虽然第一行工作正常，但第二行产生：

```
[C++ Fehler] Unit1.cpp(9): E2034 Konvertierung von 'const _GUID' nach 'unsigned long' nicht möglich 
```

（英文：[C++ error] Unit1.cpp(9): E2034 Conversion from 'const _GUID' to 'unsigned long' not possible）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-02T07:31:51.003

另一个想法：以下编译：

```
procedure Blah(const MyArray: array of TGUID);
begin
  //...
end;

Blah([IInterface, IDispatch]); 
```

也许你可以使用这种方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-09T16:58:53.593

您可以编写一个函数来返回您的 GUID 数组。（我将这种技术用于恒定日期值。）

*   它不是“真正的”常量，但应该可以在您通常使用该常量的任何地方使用。
*   但它也不能使用“可分配类型常量”选项进行修改。*不允许作弊:)*
*   **因此，与在初始化**部分设置全局相比，它具有微小的优势。
*   此外，与将接口使用的 GUID 移动到它们自己的常量中相比，它的手动工作更少。

您可以选择返回动态或固定大小的数组。

**选项1**

```
type
  TGUIDArray = array of TGUID;

function GetMyInterfaces: TGUIDArray;
begin
  SetLength(Result, 2);
  Result[0] := IMyInterface1;
  Result[1] := IMyInterface2;
end; 
```

**选项 2**

```
type
  TGUIDArray = array[0..1] of TGUID;

function GetMyInterfaces: TGUIDArray;
begin
  Result[0] := IMyInterface1;
  Result[1] := IMyInterface2;
end; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T07:13:13.957

您可以创建一个 IInterface 数组。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-02T00:17:19.800

这是我发现的一种方法，即传统上 const 在 delphi 中并不是真正的 const。需要编译器开关才能返回此行为（在 D2007 中）

```
{$J+}
Const MyArray : Array[0..0] Of TGUID = (());
{$J-} 
```

在初始化部分 -

```
MyArray[0] := IInterface; 
```

# c# - 为什么我不能利用计算机中的 4GB RAM 来处理 C# 中少于 2GB 的信息？

> ID：704350
> 
> 赞同：6
> 
> 时间：2009-04-01T07:10:11.143
> 
> 标签：c#, performance, memory, string, garbage-collection

场景：超过 1.5GB 的文本和 csv 文件，我需要进行数学处理。我尝试使用 SQL Server Express，但加载信息，即使使用 BULK 导入也需要很长时间，理想情况下我需要将整个数据集放在内存中，以减少硬盘 IO。

有超过 120,000,000 条记录，但即使我尝试将信息过滤到一列（内存中），我的 C# 控制台应用程序也消耗约 3.5GB 的内存来处理仅 125MB（700MB 实际读入）的文本。

GC 似乎没有收集对字符串和字符串数组的引用，即使在将所有引用设置为 null 并使用 using 关键字封装 IDisposables 之后也是如此。

我认为罪魁祸首是 String.Split() 方法，它为每个逗号分隔值创建一个新字符串。

您可能会建议我什至不应该将不需要的* 列读入字符串数组，但这没有抓住重点：如何将*整个*数据集放在内存中，以便在 C# 中并行处理它？

我可以优化统计算法并使用复杂的调度算法协调任务，但这是我在遇到内存问题之前希望做的事情，而不是因为。

我已经包含了一个完整的控制台应用程序，它可以模拟我的环境并且应该有助于重现问题。

任何帮助表示赞赏。提前致谢。

```
using System;
using System.Collections.Generic;
using System.Text;
using System.IO;

namespace InMemProcessingLeak
{
    class Program
    {
        static void Main(string[] args)
        {
            //Setup Test Environment. Uncomment Once
            //15000-20000 files would be more realistic
            //InMemoryProcessingLeak.GenerateTestDirectoryFilesAndColumns(3000, 3);
            //GC
            GC.Collect();
            //Demostrate Large Object Memory Allocation Problem (LOMAP)
            InMemoryProcessingLeak.SelectColumnFromAllFiles(3000, 2);
        }
    }

    class InMemoryProcessingLeak
    {
        public static List<string> SelectColumnFromAllFiles(int filesToSelect, int column)
        {
            List<string> allItems = new List<string>();
            int fileCount = filesToSelect;
            long fileSize, totalReadSize = 0;

            for (int i = 1; i <= fileCount; i++)
            {
                allItems.AddRange(SelectColumn(i, column, out fileSize));
                totalReadSize += fileSize;
                Console.Clear();
                Console.Out.WriteLine("Reading file {0:00000} of {1}", i, fileCount);
                Console.Out.WriteLine("Memory = {0}MB", GC.GetTotalMemory(false) / 1048576);
                Console.Out.WriteLine("Total Read = {0}MB", totalReadSize / 1048576);
            }
            Console.ReadLine();
            return allItems;

        }

        //reads a csv file and returns the values for a selected column
        private static List<string> SelectColumn(int fileNumber, int column, out long fileSize)
        {
            string fileIn;
            FileInfo file = new FileInfo(string.Format(@"MemLeakTestFiles/File{0:00000}.txt", fileNumber));
            fileSize = file.Length;
            using (System.IO.FileStream fs = file.Open(FileMode.Open, FileAccess.Read, FileShare.Read))
            {
                using (System.IO.StreamReader sr = new System.IO.StreamReader(fs))
                {
                    fileIn = sr.ReadToEnd();
                }
            }

            string[] lineDelimiter = { "\n" };
            string[] allLines = fileIn.Split(lineDelimiter, StringSplitOptions.None);

            List<string> processedColumn = new List<string>();

            string current;
            for (int i = 0; i < allLines.Length - 1; i++)
            {
                current = GetColumnFromProcessedRow(allLines[i], column);
                processedColumn.Add(current);
            }

            for (int i = 0; i < lineDelimiter.Length; i++) //GC
            {
                lineDelimiter[i] = null;
            }
            lineDelimiter = null;

            for (int i = 0; i < allLines.Length; i++) //GC
            {
                allLines[i] = null;
            }
            allLines = null;
            current = null;

            return processedColumn;
        }

        //returns a row value from the selected comma separated string and column position
        private static string GetColumnFromProcessedRow(string line, int columnPosition)
        {
            string[] entireRow = line.Split(",".ToCharArray());
            string currentColumn = entireRow[columnPosition];
            //GC
            for (int i = 0; i < entireRow.Length; i++)
            {
                entireRow[i] = null;
            }
            entireRow = null;
            return currentColumn;
        }

        #region Generators
        public static void GenerateTestDirectoryFilesAndColumns(int filesToGenerate, int columnsToGenerate)
        {
            DirectoryInfo dirInfo = new DirectoryInfo("MemLeakTestFiles");
            if (!dirInfo.Exists)
            {
                dirInfo.Create();
            }
            Random seed = new Random();

            string[] columns = new string[columnsToGenerate];

            StringBuilder sb = new StringBuilder();
            for (int i = 1; i <= filesToGenerate; i++)
            {
                int rows = seed.Next(10, 8000);
                for (int j = 0; j < rows; j++)
                {
                    sb.Append(GenerateRow(seed, columnsToGenerate));
                }
                using (TextWriter tw = new StreamWriter(String.Format(@"{0}/File{1:00000}.txt", dirInfo, i)))
                {
                    tw.Write(sb.ToString());
                    tw.Flush();
                }
                sb.Remove(0, sb.Length);
                Console.Clear();
                Console.Out.WriteLine("Generating file {0:00000} of {1}", i, filesToGenerate);
            }
        }

        private static string GenerateString(Random seed)
        {
            StringBuilder sb = new StringBuilder();
            int characters = seed.Next(4, 12);
            for (int i = 0; i < characters; i++)
            {
                sb.Append(Convert.ToChar(Convert.ToInt32(Math.Floor(26 * seed.NextDouble() + 65))));
            }
            return sb.ToString();
        }

        private static string GenerateRow(Random seed, int columnsToGenerate)
        {
            StringBuilder sb = new StringBuilder();

            sb.Append(seed.Next());
            for (int i = 0; i < columnsToGenerate - 1; i++)
            {
                sb.Append(",");
                sb.Append(GenerateString(seed));
            }
            sb.Append("\n");

            return sb.ToString();
        }
        #endregion
    }
} 
```

*这些其他列将在程序的整个生命周期中按顺序和随机访问和访问，因此每次从磁盘读取都是非常繁重的开销。

**环境说明：4GB DDR2 SDRAM 800、Core 2 Duo 2.5Ghz、.NET Runtime 3.5 SP1、Vista 64。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-01T07:18:39.950

是的，String.Split 为每个“片段”创建一个新的 String 对象——这就是它的本意。

现在，请记住 .NET 中的字符串是 Unicode（实际上是 UTF-16），加上对象开销，字符串的字节成本大约`20 + 2*n`是`n`字符数。

这意味着如果您有很多小字符串，与所涉及的文本数据的大小相比，它将占用大量内存。例如，将 80 个字符的行拆分为 10 x 8 个字符串将占用文件中的 80 个字节，但是 10 * (20 + 2*8) = 360 个字节的内存 - 4.5 倍的爆炸！

我怀疑这是一个 GC 问题 - 我建议您在不需要时删除将变量设置为 null 的额外语句 - 只是数据过多的问题。

我*建议*您逐行阅读文件（使用`TextReader.ReadLine()`而不是`TextReader.ReadToEnd()`）。如果不需要，显然将整个文件放在内存中是浪费的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T07:23:29.330

我建议逐行阅读而不是整个文件，或者最多 1-2mb 的块。

**更新：**
从乔恩的评论中，我很好奇并尝试了 4 种方法：

*   StreamReader.ReadLine（默认和自定义缓冲区大小），
*   StreamReader.ReadToEnd
*   我上面列出的方法。

读取 180mb 的日志文件：

*   读取线毫秒：1937
*   ReadLine 更大的缓冲区，ascii ms：1926
*   ReadToEnd 毫秒：2151
*   自定义毫秒：1415

自定义 StreamReader 是：

```
StreamReader streamReader = new StreamReader(fileStream, Encoding.Default, false, 16384) 
```

StreamReader 的缓冲区默认为 1024。

对于内存消耗（实际问题！） - 使用了约 800mb。而且我给出的方法仍然使用 StringBuilder （使用字符串），因此不会减少内存消耗。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-01T07:26:17.157

现代 GC 语言利用大量廉价 RAM 来卸载内存管理任务。这会带来一定的开销，但您的典型业务应用程序实际上并不需要那么多信息。许多程序只使用不到一千个对象。手动管理这么多是一件苦差事，甚至每个对象的一千字节开销都无关紧要。

在您的情况下，每个对象的开销正在成为一个问题。例如，您可以考虑将每一列表示为一个对象，使用单个字符串和整数偏移量数组实现。要返回单个字段，请返回一个子字符串（可能作为 shim）

# c# - c#中的内存分析

> ID：704352
> 
> 赞同：1
> 
> 时间：2009-04-01T07:11:22.153
> 
> 标签：c#, .net

我正在从我的 C# 代码运行一个 exe，我想从我的 C# 代码监视 exe 的私有字节......谁能帮忙？请......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T07:20:00.493

看看这个关于分析器的线程......[那里有任何体面的 C# 分析器](https://stackoverflow.com/questions/10644/any-decent-c-profilers-out-there)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T07:16:23.217

看一下[Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)类。它有几个内存属性。

# perl - 如何从 Perl 处理 Google Mail 中的二级身份验证？

> ID：704361
> 
> 赞同：1
> 
> 时间：2009-04-01T07:15:42.407
> 
> 标签：perl, authentication, smtp, gmail

这是一个纯 Google Mail 问题。我正在通过 Perl 的 Net::SMTP::SSL 模块访问 Google Mail。有时验证失败不是因为密码错误，而是因为一些额外的密码检查。解锁它的唯一方法是通过 Web 界面，并以图像形式显示额外的文本条目。有没有人见过类似的问题并知道解决方法。我查看了谷歌论坛，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T07:26:38.263

您遇到此问题是因为 Google 不支持您用于访问 Gmail 的方法，而且我相当确定这违反了他们的[TOS](http://www.google.com/accounts/TOS?hl=en)（参见 5.3）。如果您希望从程序内部访问 Gmail，我建议您将其[IMAP](http://search.cpan.org/dist/Mail-IMAPClient/lib/Mail/IMAPClient.pod)或[POP3](http://search.cpan.org/dist/Mail-POP3Client/POP3Client.pm)接口与适当的 Perl 模块一起使用。

由于您似乎正在发送邮件，因此您应该将他们的[SMTP](http://lifehacker.com/software/email-apps/how-to-use-gmail-as-your-smtp-server-111166.php)接口与[Perl 的 SMTP 模块](http://search.cpan.org/dist/Net-SMTP-TLS/lib/Net/SMTP/TLS.pm)之一一起使用。您可能会发现 Google 有关设置[IMAP 客户端](http://mail.google.com/support/bin/answer.py?answer=78799)的信息很有帮助。

# django - Django 在 IIS7 下工作

> ID：704368
> 
> 赞同：3
> 
> 时间：2009-04-01T07:16:54.090
> 
> 标签：django, iis, iis-7

有人详细描述（如果有的话）在 IIS7 下的 Windows 上的 Django 工作安装吗？已经看过 PyISAPIe 等（以及相关网站、群组、论坛），但所有描述都有些不准确，直到现在我都没有成功。显然最快的解决方案（PyISAPIe）似乎有一些来自他们的谷歌组主页的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T18:22:45.507

看看 PyISAPIe 的最新版本，那里有一个带有 WSGI 的 Django 设置示例。

# c# - .Net：从线程中检索数据

> ID：704380
> 
> 赞同：1
> 
> 时间：2009-04-01T07:18:58.093
> 
> 标签：c#, .net, multithreading

这是一个 Easy Q，但很有帮助：

在标题“*从线程中检索数据*MSDN（[此处](http://msdn.microsoft.com/en-us/library/ts553s52(VS.71).aspx)）介绍了一种通过使用回调方法从子线程获取数据的方法，该方法由从主线程传递到子线程的委托封装 - 谁拥有数据。

您可以清楚地看到（MSDN[页面](http://msdn.microsoft.com/en-us/library/ts553s52(VS.71).aspx)中的最后一个示例）

我的问题是，因为我们正在检索数据（从子线程到主线程），所以回调方法应该由主线程而不是子线程执行......

我稍微更改了代码（以验证这一点），所以我在每个输出之前附加了线程的名称：

```
 public static void ResultCallback(int lineCount) {
    Console.WriteLine(Thread.CurrentThread.Name + ":Independent task printed {0} lines.", lineCount);  
} 
```

我将子线程命名为：“Method2”，而主线程“System”......

我得到了这个输出：**Method2** : Independent task 打印了 1 行。

正确的输出应该是：**系统**：独立任务打印1行..

谁在这里喝醉了？MSDN、我还是 .NET？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T07:21:41.457

“你”;-p

回调仍然在工作线程上执行；它们将数据提供回调用**代码**- 但它们没有中断调用**线程**的内置方式。如有必要，您的代码有责任将该工作推回主线程。例如，在一个 winforms 应用程序中，您可能有：

```
public static void ResultCallback(int lineCount) {
  // runs on worker thread
  Invoke((MethodInvoker)delegate {
      // runs on UI thread
      Console.WriteLine(Thread.CurrentThread.Name +
         ":Independent task printed {0} lines.", lineCount);
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T10:46:57.830

如果您不想/不需要使用回调并且数据相当小，您始终可以使用共享内存和 C# lock 关键字。

马切伊。

# .net - 请描述您使用 Microsoft C++/CLI 的经验

> ID：704388
> 
> 赞同：8
> 
> 时间：2009-04-01T07:21:11.600
> 
> 标签：.net, c++-cli, clr

C++/CLI 是非常强大的语言。它是唯一可以无缝组合托管和非托管代码的 CLR 语言。有多少软件开发人员（在这个网站上）使用这种语言？你在什么样的项目中使用它？是改编遗留代码还是创建原始软件？您能否将旧的托管 C++ 与新的 C++/CLI 进行比较？您如何看待 C++/CLI 的当前质量和未来？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-01T07:42:28.910

我用它来编写托管代码和本机代码之间的薄集成层。仅此而已。

它最著名的独特功能是能够无缝深入研究非托管代码并在整个过程中修改（或意外损坏）任何可写内存 - 这在一般编程中不是优势，但是当您需要它时，它很棒。但我想我会越来越少地需要它。您可以使用 /pure 标志编译 C++/CLI，但它真的变成了一种全新的语言。

不过，还有另外两个很大的独特功能：

*   做一些有用的事情的析构函数。在 C# 中，析构函数是终结器。在 C++ 中，它是一个适当的确定性称为析构函数。这意味着 C++/CLI 拥有最完整的基础架构来处理`IDisposable`. C# 仅帮助客户端（通过**using**语句），但只有 C++/CLI 也帮助实现者。我希望有一天 C# 会吸收这一特性。

*   Duck 类型模板，可与 CLI 泛型一起使用。另一件在 C# 中非常有用的东西，尽管它可以在没有历史包袱的情况下更加无缝地制作。

但是 C# 已经足够好了，没有最后两件事，我一般不想使用 C++/CLI。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-01T07:30:34.713

我已经将 C++/CLI 用于模拟项目。我进行实际计算的模拟引擎是一个用 C++ 编写的现有代码库。我需要有一个 GUI 前端，我成功地用 C++/CLI 进行了编码。

在我看来，该语言与 C# 一样易于编写代码，尽管在语法上有一点笨拙。也就是说，语法比微软早先提出的托管扩展要简单得多。

C++/CLI 最强大的特性之一就是能够简单地将现有的本机 C++ 代码重新编译为 MSIL。当然可能会有打嗝，但对于大多数应用程序来说，这应该是一个无故障的练习。

至于 C++/CLI 的适用性，我认为它将严格地保留为与 C++ 互操作性的语言。如果您正在编写一个全新的应用程序，那么选择 C++/CLI 而非 C# 的理由绝对为零。正如我所说，它*比*后者使用起来有点尴尬。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-22T09:48:21.813

我们广泛使用 C++/CLI。我们已经使用它将老化的 MFC 应用程序拖入 .Net 时代，因此我们现在可以用 C# 编写大多数新功能，并使用 C++/CLI 将其与遗留 MFC 代码集成，方法是包装本机类并编写新的托管业务对象. 在我们的旧程序集中，我们仍在用 C++/CLI 编写新功能。

我没有使用“托管 C++”的经验，但与 MFC 和 Visual C++ 相比，使用 C++/CLI 是一种乐趣。.它的语法比托管 C++ 或 Visual C++ 更简洁，即使是初级开发人员也能快速上手。

C++/CLI 中有一些有趣的行为，例如当您将本机对象传递给托管类的方法时，它会在本机对象周围放置一个瘦托管包装器（开发人员不可见），只是为了进行调用，但该垫片是组件私有的，因此不能从外部调用。与往常一样，有很多方法可以解决这个问题，但它很早就让我们出局了几次。

我们使用 Visual Assist X 进行重构支持（可接受），使用 MbUnit/Gallio 对托管类进行单元测试，使用 NMock 或 RhinoMocks 进行模拟框架。

总的来说，我想说这种语言拯救了我们的产品，让我们能够利用开发世界中所有令人兴奋的新事物。如果我们仍然只使用 Visual C++/MFC，那么我们将很难招募开发人员，并且在 COTS 的选择上比我们使用 .Net 时受到的限制要大得多。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-01T07:31:47.893

C++/CLI 非常简单地将[CLR 带入 FreeSWITCH](http://wiki.freeswitch.org/wiki/Mod_managed)。比处理托管 API 或使用 Mono 要容易得多。

在此之前我最后一次使用托管 C++ 是在 2003 年左右。我记得这有点痛苦，而且工作不顺畅。

# matlab - 如何将变量传递给通过指南创建的函数

> ID：704391
> 
> 赞同：2
> 
> 时间：2009-04-01T07:22:30.147
> 
> 标签：matlab, matlab-guide

我在 MATLAB GUIDE 中开发了一个 GUI。使外部函数或类中的数据可用于 GUIDE 创建的函数的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T13:53:24.370

[ymihere](https://stackoverflow.com/questions/704391/how-to-pass-variable-to-a-function-created-through-the-guide/705267#705267)提供的链接看起来很有帮助。此外，在这些链接中讨论的一些选项（嵌套函数和使用[GUIDATA ）在 SO：](http://www.mathworks.com/access/helpdesk/help/techdoc/ref/guidata.html)[如何在 MATLAB 中的函数内创建 GUI？](https://stackoverflow.com/questions/272511/how-to-create-a-gui-inside-a-function-in-matlab)那里有几个例子说明代码在每种情况下的外观。

我个人偏爱使用嵌套函数，因为我觉得在大多数情况下它会创建更短、更简洁的代码。但是，如果您是新的 MATLAB 用户（可能需要一点时间来适应），共享应用程序数据的方法可能会更加困难。对您来说最简单的选择可能是在调用函数时设置“UserData”属性（如[ymihere](https://stackoverflow.com/questions/704391/how-to-pass-variable-to-a-function-created-through-the-guide/705267#705267)建议的那样）。如果您将 GUIDE GUI 保存到“myGUI.m”，那么您将调用：

```
>> hGUI = myGUI('UserData','hello'); 
```

其中**hGUI**是您的 GUI 对象的句柄。然后，您可以获取“UserData”属性以查看它是否包含字符串“hello”：

```
>> get(hGUI,'UserData')

ans =

hello 
```

除了“你好”，你可以放任何你想要的东西，比如数据结构。您应该能够从 GUIDE m 文件的回调中访问图形的“UserData”字段。您必须从传递给回调的**handles参数中获取图形句柄。**

**编辑：**使用“UserData”属性或将数据附加到对象的其他一些方法的一个缺点是数据可能被用户或其他应用程序意外（或有意）覆盖或以其他方式损坏。使用嵌套函数在 GUI 回调之间共享数据的好处是，它将您的代码与用户或其他应用程序可能执行的任何操作隔离开来。相反，使用[全局变量](http://www.mathworks.com/access/helpdesk/help/techdoc/ref/global.html)可能相当危险。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T12:28:29.800

我不知道你到底想做什么，但你可能想使用该图的 UserData 属性：

打开表单 myfig 时传递 somevar：

```
h = myfig('UserData', somevar); 
```

或以后：

```
h = myfig();
[...]
set(h, 'UserData', somevar); 
```

在图中，您可以通过以下方式访问该属性：

```
function some_Callback(hObject, eventdata, handles)
    somevar = get(hObject, 'UserData'); 
```

查看[链接文本](http://www.mathworks.com/access/helpdesk/help/techdoc/index.html?/access/helpdesk/help/techdoc/creating_guis/f13-998449.html)和[链接文本](http://www.mathworks.com/access/helpdesk/help/techdoc/index.html?/access/helpdesk/help/techdoc/creating_guis/f5-998352.html)

# php - 解析 PHP 的基本文本输出

> ID：704393
> 
> 赞同：0
> 
> 时间：2009-04-01T07:23:06.010
> 
> 标签：php, javascript, jquery, css

```
var req = function () {
    $.ajax({
       url: "out.php",
       cache: false,
       success: function(html) {
          $("#stuff").empty().append(html);
       },
       complete: function() {
          req();
       }
    });
};

req(); 
```

上面的这段代码以以下格式获取输出：`0,0`

如何解析它并将一个数字放在 CSS 选择器顶部，另一个放在左边？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T07:44:43.260

好吧，如果我理解你的 PHP 输出，它就像`x,y`你需要 x 是 CSS 属性 top 和 y 元素左侧的 CSS 属性。在我的示例中，我将使用 id 调用将包含这些属性的元素`elem`。

所以这里是：

```
var css_attr = req.split(",");
$('#elem').css('top', css_attr[0]).css('left', css_attr[1]); 
```

如果您只想在`success`AJAX 调用中执行此操作，只需更改`var css_attr`为`var css_attr = html.split(",");`，其余部分保持不变。

这应该就是全部了。该`split()`功能几乎等同于 PHP 的`explode()`.

享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T17:55:10.343

```
var css_attr = req.split(",");
$('#elem').css({
  top: css_attr[0]+'px',
  left: css_attr[1]+'px'
}); 
```

# c# - C++ 河豚可以使用更少的字母，但 C# 河豚不能

> ID：704402
> 
> 赞同：0
> 
> 时间：2009-04-01T07:26:31.557
> 
> 标签：c#, c++, blowfish

C++ 河豚支持加密少于 8 个字母的块，而 .NET 不支持。为什么？

[-->C# NET Blowfish<--](http://pastebin.com/m2ee6e21e) [-->C++ Blowfish<--](http://pastebin.com/m16226103)

在 C++ 和 C# 应用程序中，我加密了以下数组

```
 byte response[6] = 
    {
        0x00, 0x80, 0x01, 0x61, 0x05, 0x06
    }; 
```

在 C++ 和 C# 应用程序中，我使用相同的参数调用 Encrypt 函数。

```
C++
Blowfish.Encrypt((LPBYTE)responce + 2,(LPBYTE)responce + 2, 4);

C#
Blowfish.Encrypt(responce, 2, responce, 2, responce.Length - 2); 
```

但是，在 C++ 中，我得到了加密的数据，但不是在 C# 中。

[C# NET Blowfish](http://pastebin.com/m2ee6e21e)中的第 45,47 和 49行是有问题的行，在第 45 行计算后 - 结果变为 0。第 47 行变为 2 + 0 = 2 并且第 49 行 2 不小于 2，因此没有循环。

C ++河豚中有一些填充，但是当我尝试理解它时我迷路了。

我的问题是，在 C# 中，填充必须与 C++ 中的完全相同，所以我得到了一个有效的答案。我不能使用随机填充然后在解密后删除无用的字节，**因为我发送加密数组的服务器是不是我的。**

您能否指出 C++ 河豚中使用了哪些填充以及如何在 C# NET 中实现它。

//注意我不需要多次发送这个数据包，只需一次。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T07:33:08.013

您粘贴的代码（顺便说一下，不推荐用于 SO，因为如果一段时间内没有人阅读它，您的粘贴将被删除，从而使这个问题被打破）在其标题评论中说：

```
/// Note that the number of bytes must be adjusted to the block size of the algorithm. 
```

（第 3 行和第 4 行）。因此，如果它忽略您的数据不足，它似乎表现得符合规范。

C++ 代码似乎用空字节填充，评论说：

```
// pad end of data with null bytes to complete encryption 
```

`GetOutputLength()`查看 C++ 函数，了解它如何处理尺寸过小的输入会很有帮助。我猜它向上舍入，但很高兴验证。

# asp.net-mvc - ASP.NET MVC。实现持久排序的干净方法？

> ID：704415
> 
> 赞同：2
> 
> 时间：2009-04-01T07:33:34.097
> 
> 标签：asp.net-mvc, sorting, paging, jquery-ui-sortable

我仍然没有找到任何通过 ASP.NET MVC 中的分页实现排序的示例
（按名称排序->按第 2 页->第 2 页仍然按名称排序）。

我可以“破解”它，让它变脏，但我确信必须有很好的“操作方法”指南。

按两列排序呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T08:05:03.850

只需将排序表达式保留在模型视图中并将其写入分页路由链接即可。
例如像：

```
/MyEntity/Page/2?sort=Name 
```

或使用自定义路由，例如：

```
/MyEntity/Page/2/Name 
```

对于后者，路由映射如下所示：

```
{controller}/Page/{pageIndex}/{sortExpression} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T11:05:33.727

我完全按照 aleris 的方式进行操作，只是我在模型上使用枚举字段作为排序值，这样，如果他们输入不存在的排序参数，它将退回到默认值。

```
public enum SortArticle
{
   Title,
   Published
}

public enum SortOrder
{
   Asc,
   Desc
}

articles/{sort}/{order}/{page}
articles/published/desc/1 
```

# c# - 如何读取跨不同域的第三方 cookie？

> ID：704420
> 
> 赞同：1
> 
> 时间：2009-04-01T07:36:01.627
> 
> 标签：c#, asp.net, c#-2.0, cookies

我知道以前有人问过这个问题，但是许多答案都没有给出明确的示例，其中包含有关如何使用 ASP.NET 2.0 执行此操作的代码。首选简单的 C#，但我也可以接受 VB.NET 或 F#。

此[第三方 cookie 问题](https://stackoverflow.com/questions/390219/why-wont-asp-net-create-cookies-in-localhost)是具有相同主题的自我回答问题的示例，但它没有提供有关阅读/获取第三方 cookie 的任何线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T07:42:51.640

这基本上是一个[跨站点脚本](http://en.wikipedia.org/wiki/Cross-site_scripting)“功能”。您需要做的是在客户端上运行代码，读取 cookie 并以某种方式将内容传输到其他地方。这通常通过查询来完成。

但在你这样做之前，请考虑一下。首先，您不应该能够从第三方读取 cookie，这是有原因的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-04T00:32:20.677

这是一项安全功能，即只能从创建 cookie 的同一域中读取 cookie。试图读取“外来”cookies 是恶意的迹象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-04T01:13:45.040

正如其他人已经说过的那样，出于明显的安全原因，浏览器不会将在一个域中设置的 cookie 提供给其他域。如果您按照您在其中一个评论中声明的那样在两个域中创建页面，我相信您可以使用`<iframe>`html 元素访问另一个域上的 cookie 信息，但我自己从未尝试过。

# django - 如何使用 pinax (django) 更改项目中加载的默认语言

> ID：704426
> 
> 赞同：1
> 
> 时间：2009-04-01T07:37:52.870
> 
> 标签：django, pinax

我正在使用 Pinax 的 basic_project，我需要将应用程序的默认语言从英语更改为法语或西班牙语

我试过改变变量

LANGUAGE_CODE = 'es',

但它仍然是英文的，甚至是管理员，所以我猜这个改变根本没有任何影响。

我在哪里可以继续寻找有关此的更多信息？

过去，在 Django 应用程序（不使用 pinax）中，我更改了该参数并且它确实有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-29T08:43:31.493

似乎只有[social_project](http://github.com/pinax/pinax/tree/969264eec8d9a85dd59585070c6b3dec865fc464/pinax/projects/social_project/locale)有可用的本地化文件。尝试将“es”目录复制到 basic_project/locale 看看是否可行！

# iis - 在远程计算机上重新启动 IIS

> ID：704429
> 
> 赞同：38
> 
> 时间：2009-04-01T07:38:32.197
> 
> 标签：iis

如何`IIS`在远程机器上重新启动？

我知道 IP 地址和管理员用户的用户名和密码信息。

我正在使用`C#`和`ASP .NET 2.0`。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-26T17:22:32.687

最简单的将是`iisreset <servername>`

以管理员身份运行命令提示符并执行命令。

示例：如果服务器名称为 SRVAPP，则命令为`iisreset SRVAPP`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-09-18T00:22:26.217

我尝试了基于 PowerShell 的方法，但一直收到以下错误：

`Connecting to remote server <TARGET-HOST> failed with the following error message : The WinRM client cannot process the request.`

我终于发现我需要将目标节点添加为`TrustedHosts`源节点中的a，反之亦然。如果您遇到同样的问题，您可以通过打开提升的**命令提示符**并键入以下命令来修复它：

**从您将用来发出命令的 PC 上：**

```
powershell
winrm set winrm/config/client '@{TrustedHosts="TARGET-HOST"}' 
```

**从目标 PC**（带有 IIS 的 PC）：

```
powershell
winrm set winrm/config/client '@{TrustedHosts="SOURCE-HOST"}' 
```

（替换`TARGET-HOST`并`SOURCE-HOST`使用您的服务器*主机名*或 IP 地址）。执行此操作后，您可以发出任何远程**PowerShell**命令，例如：

**IIS 停止：**

```
powershell invoke-command -computername "TARGET-HOST" -scriptblock {iisreset /STOP} 
```

**IIS 启动：**

```
powershell invoke-command -computername "TARGET-HOST" -scriptblock {iisreset /START} 
```

**IIS重启：**

```
powershell invoke-command -computername "TARGET-HOST" -scriptblock {iisreset /RESTART} 
```

... 和更多。

对于这个问题的广泛评论，你也可以在我的博客上[阅读这篇文章。](http://www.ryadel.com/en/start-stop-and-restart-iis-from-a-remote-pc/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-01T08:13:17.777

正如 Thomas Franke 建议的那样，您可以使用 sc：

```
sc \\RemoteServer stop iisadmin
sc \\RemoteServer start w3svc 
```

或 SysInternals 的[psexec](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)。PsTools[套件](http://technet.microsoft.com/en-us/sysinternals/bb896649.aspx)对这些场景很有用。

```
psexec \\RemoteServer iisreset 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-01T07:57:57.313

您可以使用“sc”命令来控制远程机器上的 iis 服务。

```
sc \\RemoteServer stop [iis-service-name] 
```

利用

```
sc help 
```

为了获得可能的参数列表。

另请查看[有关您的主题的 microsoft kb 文章](http://support.microsoft.com/?scid=kb%3Ben-us%3B166819&x=7&y=12)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-12T04:49:14.020

以下 POSH 脚本将允许您远程异步重置一组机器（在使用大型机器时非常方便）：

```
$a = Get-Content "c:\OneMachineNamePerLine.txt"

foreach($line in $a)
{

    Start-Job -ScriptBlock {
        iisreset $line
    }
} 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2009-04-01T07:46:33.347

# c++ - qt 4.5.0 与 Visual Studio 2008 的集成有什么问题？

> ID：704430
> 
> 赞同：1
> 
> 时间：2009-04-01T07:38:37.250
> 
> 标签：c++, visual-studio-2008, qt, qt4

我下载并安装了vs2008的qt评估，并希望它与VS集成，但事实并非如此。它是试用 30 天的商业许可证。它有什么问题或者可能是我弄错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T09:28:08.610

Visual Studio 集成需要单独下载： [http ://www.qtsoftware.com/downloads/visual-studio-add-in](http://www.qtsoftware.com/downloads/visual-studio-add-in)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T08:21:45.743

您是否只安装了 Qt 或 Visual Studio 集成，这是一个单独的下载？

# open-source - 开放公司：你会给什么建议？

> ID：704431
> 
> 赞同：9
> 
> 时间：2009-04-01T07:38:48.483
> 
> 标签：open-source, project-management

[E Text Editor](http://e-texteditor.com/)的作者 Alexander Stigsen正在启动一个名为 Open Company 的雄心勃勃的项目，试图将开源软件的文化与商业报酬结合起来。

**[阅读宣布开放公司的博文](http://e-texteditor.com/blog/2009/opencompany)。**

就像我说的，它雄心勃勃，但值得称赞，我相信你会同意的。

**我向社区提出的问题是：您会给出什么建议？**我认为了解一下紧迫的问题和陷阱是什么会很有趣。此外，建议的阅读、资源和研究可能是有用的。我已经建议阅读[Producing Open Source Software](http://producingoss.com/)。

编辑：关于 E Text Editor 的代码是否开源存在一些争论。要回答这个问题，是的[，**它将**向所有人开放](http://e-texteditor.com/forum/viewtopic.php?p=12764#12764)下载和修改，因此它将是开源的。但它仍然是版权，并且产品本身不能自由分发，因此它不会是[OSI 定义的](http://en.wikipedia.org/wiki/Open_Source_Definition)“开源” 。

**更新：**如果你有兴趣，源[代码现在可以在 Github 上找到。](http://github.com/blog/401-e-text-editor-on-github)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-07T00:03:33.637

首先，让我说我认为这是一个好主意，我为亚历克斯的飞跃鼓掌。我刚开始使用 e，我喜欢它。我希望我能以某种方式为这个“实验”做出贡献，帮助它取得成功。

话虽如此，这是我的一些担忧：

像大多数人一样，我也认为 Trust Metric 系统将是其中最难的部分。不仅因为人们会试图玩弄这个系统，还因为人们会想知道公司赚了多少钱，“运营成本”是多少，以及他们有权获得多少。没有完全的透明度可能会导致许多人认为他们没有得到他们的“公平份额”。

另外，我不明白工作是如何分配的。有项目经理吗？他们的评分方式相同吗？事实上，在一个普通的软件项目中，有很多不同的角色，他们的评价方式都一样吗？

信任指标也需要以某种方式标准化。例如，Person 1 实现了一个广受欢迎的功能。第 2 个人实现了用户看不到但必要的东西。在那种情况下，我认为第 1 个人的评分会更高，因为更多人知道那个人的工作。当工作质量相同时，它们如何平衡？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T07:47:08.853

一个明显的陷阱是，由于涉及到真钱，因此玩信任系统可能会提供更高的收益，并且更有可能因此而受益。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-01T11:46:14.347

障碍是开发这种所谓的信任度量系统。当涉及金钱时，您不能有错误，因此必须做到完美。如果要发现错误并说；有人因此获得了更多的钱，贡献者会离开，项目会立即死亡。

所以第一个建议是大力投资这个信任度量系统。

此外，有人在博客中提到了这一点。随着时代的变化，它必须不断调整并保持最新。

此外，这不是开源的，所以你为什么在你的主要帖子中标记它是我无法理解的。这是完全不同的共享源。微软有一个共享源程序，类似于 Alex 提议的，除了人们必须签署 NDA（保密协议）并且只报告错误。也许亚历克斯可以研究微软所做的事情并从中获得一些提示。

我真的希望这对亚历克斯和他的公司有用，因为他现在有很多眼睛在注视着他，如果他成功了，我可以看到开放公司的爆炸式增长，这只会是一件好事。

# vim - 有没有办法突出显示 (g)Vim 中的多个搜索？

> ID：704434
> 
> 赞同：92
> 
> 时间：2009-04-01T07:40:10.617
> 
> 标签：vim, highlighting

我想在 Vim/gVim 中搜索多个字符串，并用不同的颜色突出显示它们。有没有办法用开箱即用的 Vim 或插件来做到这一点？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2015-03-05T10:29:37.713

在 vim 编辑器中突出显示多个单词有两种简单的方法。

1.  进入搜索模式，即输入' **/** '，然后输入**\v**，后跟要搜索的单词，用' **|分隔。**' （管道）。
    例如：`/\vword1|word2|word3`

2.  进入搜索模式并键入您要搜索的单词，以' **\|分隔** '。
    例如：`/word1\|word2\|word3`

基本上，第一种方法将您置于正则表达式模式，这样您就不需要在用于搜索的每个管道或其他分隔符之前放置任何额外的反斜杠。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2010-07-30T06:56:11.670

这可以针对两种搜索模式手动完成，无需任何脚本。

```
:match Search /pattern/
:match Search /<CTRL-R>/   # highlight the current search pattern 
```

搜索是高亮组的名称，使用完成选择另一个组以不同的颜色突出显示。

```
 :match <TAB>
 :match <TAB>    # completion will list all highlight group 
```

当您无法使用自己的 vim 配置时，这很方便。

```
:match none      # clear the match pattern to stop highlighting 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2014-12-04T22:15:55.280

要在 vim 中搜索多个字符串，您可以这样做：

```
/search1\|search2 
```

这有效，并将突出显示`search1`和`search2`，但颜色相同。您必须在 vim 编辑器中执行此操作。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2009-04-01T07:44:24.320

尝试“[突出显示多个单词](http://vim.wikia.com/wiki/Highlight_multiple_words)”，它使用`matchadd()`.

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-15T04:23:56.810

是的，您可以开箱即用地使用[`matchadd()`](http://vimdoc.sourceforge.net/htmldoc/eval.html#matchadd%28%29).

添加一个亮点，例如。对于尾随空格：

```
:highlight ExtraWhitespace ctermbg=grey guibg=grey
:call matchadd('ExtraWhitespace', '\s\+$', 11) 
```

查看所有比赛：

```
:echo getmatches() 
```

要删除匹配项，请使用[`matchdelete()`](http://vimdoc.sourceforge.net/htmldoc/eval.html#matchdelete%28%29). 例如。：

```
:call matchdelete(7) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-07-01T19:32:33.133

**MultipleSearch**：同时突出显示多个搜索，每个搜索具有不同的颜色。

[http://www.vim.org/scripts/script.php?script_id=479](http://www.vim.org/scripts/script.php?script_id=479)

```
:Search <pattern1> //will highlight all occurences of <pattern1> in the current buffer.
A subsequent :Search <pattern2> will highlight all occurences of <pattern2> in the current buffer. 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-07-06T22:11:32.717

```
:%s /red\|green\|blue/ 
```

我不确定如何为不同的关键字保留不同的颜色。谢谢。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-03-28T14:40:56.267

My [Mark 插件](http://www.vim.org/scripts/script.php?script_id=2666)可以同时以不同颜色突出显示多个单词，例如内置搜索。它带有许多映射和命令，允许保留模式，并支持多种调色板。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-03T13:57:04.937

MultipleSearch2 是另一个与 vim 的搜索集成的脚本：http: [//www.vim.org/scripts/script.php? script_id=1183](http://www.vim.org/scripts/script.php?script_id=1183)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-04-19T02:53:07.227

我更喜欢高亮插件，简单又够用，可以自动用不同的颜色高亮不同的单词。

[http://www.vim.org/scripts/script.php?script_id=1599](http://www.vim.org/scripts/script.php?script_id=1599)

# javascript - 甚至在onclick上从全局函数调用javascript变量参数

> ID：704446
> 
> 赞同：1
> 
> 时间：2009-04-01T07:43:33.510
> 
> 标签：javascript

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T07:49:31.670

你试过“document.xmldoc”吗？

变量定义在哪些范围内？如果它们是私有的（在函数内），它们将不会从该函数外部可见。在这种情况下，您需要使它们成为全局的（将它们放入文档的范围内），或者为您的 onclick 处理程序创建闭包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T17:26:27.573

您也可以尝试观察点击事件（在此处选择最喜欢的框架）。

原型： `$(ele).observe('click').newsdatainfo()`重构事物的范围可能会使代码更简洁，更易于维护。

如果您混合使用 HTML 和 Javascript，那么您通常会走错路。

# c - 有没有办法在 C 中使函数原子化？

> ID：704454
> 
> 赞同：8
> 
> 时间：2009-04-01T07:45:34.567
> 
> 标签：c, atomic, operations

有没有办法在 C 中使函数原子化。

我不是在寻找便携式解决方案。（寻找平台 - Win，Linux）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-01T08:09:35.087

也许。

这完全取决于您对“原子”的定义。

*   在不涉及操作系统的单核、深度嵌入式环境中，您通常可以禁用和启用中断。这可用于允许函数对中断处理程序代码具有原子性。但是，如果您有一个多主总线、一个 DMA 引擎或其他可以独立写入内存的硬件设备，那么在某些情况下，即使屏蔽中断也可能无法提供足够强大的保证。

*   在 RTOS（实时操作系统）环境中，OS 内核通常提供低级同步原语，例如临界区。临界区是一个代码块，其行为“本质上”是原子的，至少相对于所有其他临界区而言。它通常是操作系统实现其他同步原语的基础。

*   在多核环境中，通常可以使用称为自旋锁的低级原语。它用于防止进入相对于同一个自旋锁对象的其他用户而言必须是原子的代码块，并通过在一个紧密的循环中阻塞等待的 CPU 内核直到锁被释放（因此得名）来操作。

*   在许多线程环境中，线程框架提供了更复杂的原语，例如事件、信号量、互斥体和队列。它们与线程调度程序合作，使得等待某事发生的线程在满足条件之前根本不会运行。这些可用于使函数的操作相对于共享同一同步对象的其他线程具有原子性。

一般规则是使用环境中适合任务的最高级别功能。在最好的情况下，可以使用现有的线程安全对象（例如消息队列）来完全避免需要在代码中执行任何特殊操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T07:49:40.640

如果您想确保您的函数不会被信号中断，请使用`sigprocmask()`屏蔽和取消屏蔽信号，尽管某些信号不能被阻止（如`SIGKILL`）并且阻止某些信号的行为（如`SIGSEGV`）未定义。

详情请参阅`man sigprocmask`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T07:47:24.967

至少不是便携的。对于某些系统，您可能可以通过执行诸如关闭机器中断之类的操作来接近它，以防止内核抢占您的功能。但这将非常困难，尤其是对于非嵌入式系统。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T07:49:44.963

您将需要特定于平台的支持来做到这一点 - 通过使用特殊的编译器内在函数来执行硬件指令，或者通过使用操作系统支持。C 和 C++ 都没有标准化的同步内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-01T13:58:26.667

定义“原子”的含义。您的意思是“原子”是指在您运行函数时不会选择其他进程或线程进行调度吗？或者你的意思是你的函数中引用的任何共享对象在你的函数运行时不会被任何其他线程修改？

对于前者，您无法真正从用户空间控制它。如果您在单 CPU 机器上，则可以通过将进程优先级提高到**可能**的最高优先级（来自用户空间）来保证原子性。但即使这样也不能保证，因为您的调度算法可能仍然允许另一个进程运行。唯一可靠的方法是通过操作系统。对于单 CPU 机器，您将禁用中断。对于多核机器，您需要锁定总线并等待其他 CPU 上运行的所有进程被关闭。

这里的问题是：**为什么要保证原子性？**一般来说，用户空间中不应该存在只有您的进程可以运行而其他进程不能运行的要求。如果你想确保某些数据结构一次只能被一个线程访问，那么你应该使用一个可移植的线程库（`pthread`例如），并将你的函数作为一个关键部分来隔离。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-01T15:48:55.140

如果通过原子您的意思是“一次只有一个线程”，那么您可以使用关键部分块（在 Windows 中）来保护该函数。在 Linux 中，我使用互斥锁/解锁来或多或少地模拟关键部分。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-18T17:11:52.817

您可能想要研究 POSIX 信号量、互斥锁等，它们可能在 Windows 和 Linux 上都可以工作。

Using e.g. cygwin or minGW it's even possible to write portable code between Linux and Windows.

Even better you can create windows libs on Linux: [http://cdtdoug.blogspot.com/2009/05/mingw-cross-for-linux.html](http://cdtdoug.blogspot.com/2009/05/mingw-cross-for-linux.html)

# c# - 在 Silverlight/WPF 中绑定复杂属性

> ID：704456
> 
> 赞同：9
> 
> 时间：2009-04-01T07:46:00.790
> 
> 标签：c#, silverlight, data-binding, xaml, silverlight-2.0

假设我有一个看起来像这样的自定义数据类型：

```
public class MyDataType
{
  public string SimpleProp1;
  public string SimpleProp2;
  public List<SomeType> ComplexProp;
} 
```

现在我有一个动态创建的数据绑定控件（即 ItemsControl 或 DataGrid）。xaml 代码中定义的绑定如何访问复杂属性的子属性？我认为它应该看起来像这样：

```
<TextBox Text="{Binding simpleSubProp, path=ComplexProp[0]}" /> 
```

或者

```
<TextBox Text="{Binding path=ComplexProp[0].simpleSubProp}" /> 
```

但是这两个都给了我 xml 解析错误。它应该如何正确显示？甚至可以以这种方式引用集合属性的特定项目吗？如果不是，我还有什么其他选择？

编辑，场景似乎不够清楚：

我有一个

```
IEnumberable<MyDataType> 
```

绑定到 ItemsControl，在 DataTemplate 内我有多个 TextBoxes，需要引用复杂属性列表中对象的子属性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-01T09:58:32.720

看起来像属性路径中的属性路径中的属性路径中的属性路径已损坏的 Silverlight[中的属性路径索引器已损坏](http://silverlight.net/forums/p/44151/120984.aspx)。绕过它的方法是在帖子中建议并使用 IValueConverter。

XAML

```
<UserControl x:Class="Silverlight.Mine.Page"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
  xmlns:sys="System"
  xmlns:sm="clr-namespace:Silverlight.Mine;assembly=Silverlight.Mine"
  Width="400" Height="300">
    <UserControl.Resources> 
       <sm:SomeTypeConverter x:Key="MySomeTypeConverter" />
    </UserControl.Resources>    
    <Grid x:Name="LayoutRoot" Background="White">
        <TextBlock x:Name="myTextBlock" Text="{Binding Path=SomeDates, Converter={StaticResource MySomeTypeConverter}}" />
    </Grid>
</UserControl> 
```

C# 页面.xaml.cs

```
namespace Silverlight.Mine
{
    public partial class Page : UserControl
    {
        private SomeType m_mySomeType = new SomeType();

        public Page()
        {
            InitializeComponent();
            myTextBlock.DataContext = m_mySomeType;
        }
    }
} 
```

C# SomeType.cs

```
namespace Silverlight.Mine
{
    public class SomeType
    {
        public List<DateTime> SomeDates { get; set; }

        public SomeType()
        {
            SomeDates = new List<DateTime>();
            SomeDates.Add(DateTime.Now.AddDays(-1));
            SomeDates.Add(DateTime.Now);
            SomeDates.Add(DateTime.Now.AddDays(1));
        }
    }

    public class SomeTypeConverter : IValueConverter
    {
        public object Convert(object value,
                       Type targetType,
                       object parameter,
                       CultureInfo culture)
        {
            if (value != null)
            {
                List<DateTime> myList = (List<DateTime>)value;
                return myList[0].ToString("dd MMM yyyy");
            }
            else
            {
                 return String.Empty;
            }
        }

        public object ConvertBack(object value,
                              Type targetType,
                              object parameter,
                              CultureInfo culture)
        {
            if (value != null)
            {
                return (List<DateTime>)value;
            }
            return null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-11-24T22:26:10.070

我一直在做这种事情，有两种方法可以解决这个问题，具体取决于你想要什么。

如果您真的只想要列表中的一个特定成员，您可以使用转换器。XAML 看起来像这样：

```
<TextBox Text="{Binding MyDataTypeInstance, Converter={StatacResources SpecificInstanceConverter}}" /> 
```

不过，这通常不是我需要的，通常我需要一个控件来显示整个复杂对象，如果是这种情况，则执行方式更像如下：

```
<StackPanel>
     <Textblock Text="{Binding SimpleProp1}"/>
     <TextBlock Text="{Bidning SimpleProp2}"/>
     <ItemsControl ItemsSource="{Binding ComplexProp}>
          <ItemsControl.ItemsTemplate>
               <DataTemplate>
                    <StackPanel>
                         <TextBlock Text="{Binding ComplexPropertyName}/>
                         <InputToolkit:NumericUpDown Value="{Binding ComplexPropertyValue}/>
                    </StackPanel>
               </DataTemplate>
          </ItemsControl.ItemsTemplate>
     </ItemsControl>
</StackPanel> 
```

我喜欢这种方法，因为我的 GUI 与我的业务对象匹配，因此它通常比我在代码隐藏中检查特定索引时干净得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-01T07:54:31.207

试试 {Binding ComplexProp(0).simpleSubProp}。如果这不起作用，您也可以编写一个简单的转换器来执行此操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-07-03T15:14:21.520

这现在在 Silverlight 4 中可以正常工作。

需要注意的一点是，该类具有三个公共字段。将它们更改为属性（并且也是实现 INotifyPropertyChanged 的​​一个想法），然后下面的代码就可以工作了。

```
<StackPanel>
    <TextBlock Text="{Binding Path=SimpleProp1}" />
    <TextBox Text="{Binding Path=ComplexProp[0].SimpleSubProp, Mode=TwoWay}" Width="200" Height="60"/>
</StackPanel> 
```

大小写也很重要，因为绑定区分大小写。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-01T07:50:32.060

我不确定你能做到这一点。通常，您会将列表绑定到列表框（或另一个“重复”控件）之类的东西，然后其中的每个项目都将能够绑定到列表中的相关元素。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-01T08:12:52.007

根据[MSDN 上的路径语法](http://msdn.microsoft.com/en-us/library/ms752300.aspx#Path_Syntax)，您可以这样做：

```
<TextBox Text="{Binding ComplexProp[0].simpleSubProp}" /> 
```

可能是小写的“path=”给了你错误？试试“路径=”。另外，不确定这是否适用于 Silverlight ......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-02-05T10:01:16.963

为了概括这一点，我建议您使用其他人提到的值转换器，并使用 ConverterParam 选项来传递索引。

# locking - 在表格行上调用 Dibs

> ID：704464
> 
> 赞同：1
> 
> 时间：2009-04-01T07:47:49.430
> 
> 标签：locking, row, serializable

我遇到的问题是：

我有一个包含以下字段的表（只是一个示例）：

```
ID int
Value int 
```

我有一个名为IncreaseByFive() 的方法，它执行以下操作：

```
method IncreaseByFive(int ID)
{    
    int value = GetValueFromDB(ID);
    value = value + 5;
    SaveValueToDB(value, ID);    
} 
```

我要避免的是以下情况：

1.  用户 A 调用方法并获取值（当前为 5）
2.  用户 B 调用方法并获取值（当前为 5）
3.  用户 A 将值增加 5（现在为 10）
4.  用户 B 将值增加 5（现在为 10）
5.  用户 A 保存价值 (10)
6.  用户 B 保存价值 (10)

现在记录的值是 10，而应该是 15。

我要强制执行以下操作：

1.  用户 A 调用方法并获取值（当前为 5）
2.  用户 B 调用方法但必须等待，因为 A 已经调用它。（迪布斯！）
3.  用户 A 增加值（现在是 10）
4.  用户 B 仍在等待
5.  用户 A 保存值（记录值为 10）
6.  用户 B 现在可以读取值 (10)
7.  用户 B 增加值 (15)
8.  用户 B 保存值

现在记录的值为 15，这是我正在寻找的结果。

我过去使用静态类解决了这个问题，并在该类的构造函数中创建的静态对象上加了锁，从而通过一个静态方法集中所有工作，这迫使其他调用排队等待。然而，我担心这是不可扩展的。

我还认为事务的最高隔离级别（可序列化）也不会起作用，因为它将允许在上面不需要的示例的步骤 2 中读取。

我想另一种解决方案是创建我自己的锁表并在那里记录锁，但这似乎不是必需的。

我正在使用 C# (3.5) 和 SQL server 2008 开发这个项目。

蜂巢的头脑在想什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T08:04:24.710

也许我想太多~~了~~，但是您不只是包装整个逻辑块吗？

*   读取值
*   写值

在[适当级别的数据库事务中？](http://technet.microsoft.com/en-us/library/ms173763.aspx)

```
SET TRANSACTION ISOLATION LEVEL
    { READ UNCOMMITTED
    | READ COMMITTED
    | REPEATABLE READ
    | SNAPSHOT
    | SERIALIZABLE
    }
[ ; ] 
```

# c++ - 为什么 delete 不将指针设置为 NULL？

> ID：704466
> 
> 赞同：137
> 
> 时间：2009-04-01T07:48:50.067
> 
> 标签：c++, memory-management, delete-operator

*我一直想知道为什么删除*后将指针自动设置为 NULL不是标准的一部分。如果这得到照顾，那么由于指针无效而导致的许多崩溃都不会发生。但是话虽如此，我可以想到标准会限制这一点的几个原因：

> 1.  表现：
>     
>     
>     
>     额外的指令可能会降低`delete`性能。
>     
>     
> 2.  可能是因为`const`指针。
>     
>     
>     
>     然后我想标准可以为这种特殊情况做点什么。

有谁知道不允许这样做的确切原因？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2009-04-01T08:23:00.000

[Stroustrup 自己](http://www.stroustrup.com/bs_faq2.html#delete-zero)回答。摘录：

> C++ 明确允许删除的实现将左值操作数清零，我曾希望实现能够做到这一点，但这个想法似乎并没有在实现者中流行。

但他提出的主要问题是 delete 的参数不必是左值。

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2009-04-01T07:56:19.907

首先，设置为 null 需要一个内存存储变量。确实，您通常在变量中有一个指针，但有时您可能想在刚刚计算的地址处*删除*一个对象。“取消”删除是不可能的。

然后是表演。您可能以这样一种方式编写代码，即在*删除*完成后指针将立即超出范围。用 null 填充它只是浪费时间。而 C++ 是一种具有“不需要它？那么你就不必为此付费”意识形态的语言。

如果您需要安全，可以使用各种智能指针为您服务，或者您可以自己编写——更好、更智能。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2009-04-01T07:58:03.693

您可以有多个指向该内存的指针。如果您为删除指定的指针设置为空，但所有其他指针都没有设置，则会产生错误的安全感。指针只不过是一个地址，一个数字。它也可能是一个带有取消引用操作的 int。我的观点是，您还必须扫描每个指针以找到那些引用您刚刚删除的相同内存的指针，并将它们也清空。扫描该地址的所有指针并将它们清空将是计算密集型的，因为该语言不是为此而设计的。（尽管其他一些语言构建它们的引用以以不同的方式实现类似的目标。）

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2009-04-01T08:00:37.277

一个指针可以保存在多个变量中，将其中一个设置为 NULL 仍然会在其他变量中留下无效指针。所以你并没有真正获得太多，你更有可能创造一种虚假的安全感。

除此之外，您可以创建自己的函数来执行您想要的操作：

```
template<typename T>
void deleten(T *&ptr) {
  delete ptr;
  ptr = NULL;
} 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2009-04-01T07:50:52.447

因为实际上没有任何必要，并且因为它需要删除指针到指针，而不仅仅是指针。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-04-02T08:25:16.600

`delete`主要用于析构函数，在这种情况下将成员设置为 NULL 是没有意义的。几行之后，在结束时`}`，该成员不再存在。在赋值运算符中，删除通常后跟赋值。

此外，它会使以下代码非法：

```
T* const foo = new T;
delete foo; 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2010-10-01T03:22:16.040

这是另一个原因；假设 delete 确实将其参数设置为 NULL：

```
int *foo = new int;
int *bar = foo;
delete foo; 
```

bar应该设置为NULL吗？你能概括一下吗？

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-04-01T07:52:35.737

如果您有一个指针数组，并且您的第二个操作是删除空数组，那么在即将释放内存时将每个值设置为 null 是没有意义的。如果您希望它为 null .. 将 null 写入它:)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-04-01T08:09:49.640

C++ 允许您定义自己的运算符 new 和 delete，以便它们使用您自己的池分配器。如果您这样做，则可以将 new 和 delete 用于不是严格地址但表示池数组中的索引的东西。在这种情况下，NULL (0) 的值可能具有法律意义（指池中的第一项）。
因此，将 delete 设置为 NULL 自动为其参数设置并不总是具有以下含义 - 将值设置为无效值。无效值可能并不总是 NULL。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-04-01T08:26:12.473

C++ 的哲学是“只有在使用时才付费”。我想它可以回答你的问题。

此外，有时您可以拥有自己的堆来恢复已删除的内存..或者有时指针不属于任何变量。或存储在少数变量中的指针 - 可能只有其中一个变量为零。
如您所见，它有很多问题和可能的问题。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2009-04-01T08:18:14.020

自动将指针设置为 NULL 并不能解决大多数指针使用错误的问题。它可以避免的唯一崩溃是如果您尝试将其删除两次。如果你在这样的指针上调用成员函数怎么办？它仍然会崩溃（假设它访问成员变量）。C++ 不限制您在 NULL 指针上调用任何函数，从性能的角度来看也不应该这样做。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2016-04-05T05:36:03.887

我看到人们对这个问题给出了奇怪的答案。

指针=空；这么简单的语句怎么会导致性能延迟？

另一个答案是说我们可以有多个指针指向同一个内存位置。我们当然可以。在这种情况下，对一个指针的删除操作只会使该指针为 NULL（如果 delete 使指针为 NULL），而另一个指针将是非 NULL 并指向空闲的内存位置。

对此的解决方案应该是用户应该删除所有指向同一位置的指针。在内部，它应该检查内存是否已经释放而不是不释放。只使指针为 NULL。

Stroustrup 可以设计删除以这种方式工作。他认为程序员会解决这个问题。所以他忽略了。

# sql-server - 如何从 sql server 2008 management studio 连接提示中清除登录下拉列表？

> ID：704471
> 
> 赞同：5
> 
> 时间：2009-04-01T07:50:01.700
> 
> 标签：sql-server, sql-server-2008

我已经连接到几个数据库一次且仅一次，并且永远不需要再次连接，但是它们使可供选择的登录名下拉列表变得混乱。

如何从 SQL Server Management Studio Express 2008 的连接提示中重置服务器和登录列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2011-05-11T23:43:08.637

在 SSMS 2008 中，如果您将`SqlStudio.bin`文件重命名为`SqlStudio.BAK`，则 SSMS 将在重新打开应用程序时重新创建此文件。所有服务器和登录名都将被遗忘。

[参考](http://blog.sqlauthority.com/2008/11/05/sql-server-clear-drop-down-list-of-recent-connection-from-sql-server-management-studio/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-11T22:31:44.323

对于 SQL Server Management Studio 2008，此数据显然存储在...

**%SYSTEMDRIVE%\Documents and Settings\%USERNAME%\Application Data\Microsoft\Microsoft SQL Server\100\Tools\Shell\SqlStudio.bin**

请注意，这是一个二进制文件。**这些值与名为Microsoft.SqlServer.Management.UserSettings.ServerConnectionSettings**的对象相关联，该对象是某种托管集合对象。

那是他们住的地方。我会修改此文件，后果自负，并进行备份以防万一。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T08:09:30.453

您可以非常小心地删除（或者 - 甚至更好地 - 重命名）文件**mru.dat**：

> %home%\Application Data\Microsoft\Microsoft SQL Server\90\Tools\Shell\

**注意**：我的版本 il 2005，所以您可能会发现您的路径略有不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T16:05:37.453

Vista user can update the DialogSettings.xml. This file can avilable in the following location

C:\Users[UserName]\AppData\Roaming\Microsoft\Microsoft SQL Server\90\Tools\Shell

# c#-2.0 - 与 Access2007 的数据库连接

> ID：704479
> 
> 赞同：0
> 
> 时间：2009-04-01T07:53:25.157
> 
> 标签：c#-2.0

我想知道如何使用 C#.net2005 连接 Access 2007 数据库并从中检索数据。我对数据库连接一无所知。请帮助我，我是新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-10T11:18:29.857

If you want to connect to Access Database.

You have to follow the following steps:-

1) First add "using System.Data.OleDb;" at to top of the CS file.

2) Create connection string and open connection.

For access 2007

```
string ConnStr = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\abc.mdb;Jet OLEDB:Database Password=password";

OleDbConnection MyConn = new OleDbConnection(ConnStr); 
```

3) Open this connection.

```
MyConn.Open(); 
```

4) Create object for command and reader to get the data from access database.

```
OleDbCommand Cmd =  new OleDbCommand(StrCmd, MyConn);;
OleDbDataReader ObjReader = Cmd.ExecuteReader(); 
```

5) Now look through the reader object to get the data

```
if (ObjReader != null)
{

} 
```

6) After completing the processing

```
ObjReader.Close();
MyConn.Close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T08:06:24.750

使用 OleDbConnection，并学习[ADO.NET：http://msdn.microsoft.com/en-us/data/aa937699.aspx](http://msdn.microsoft.com/en-us/data/aa937699.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-13T06:20:17.677

[C# 如何连接到 MS Access 2007](https://stackoverflow.com/questions/508345/c-how-to-connect-to-ms-access-2007) - 您可以在此处找到代码示例。

您还可以执行以下操作。

创建一个新的 winforms 应用程序。

*   转到服务器资源管理器（查看->服务器资源管理器，Ctrl + Alt + S）

    在服务器资源管理器中，右键单击数据连接并添加数据连接。

    选择添加连接选项。

    将数据源更改为访问数据库。

    打开要附加的 mdb 文件。它将自动生成其连接字符串。

    然后您可以选择要插入的表和要使用的查询。

    只需选择表格并单击所有字段。

    连接完成后，将其拖放到表单上。Visual Studio 会自动为你生成代码。

# ios - 如何创建数据库：

> ID：704481
> 
> 赞同：0
> 
> 时间：2009-04-01T07:54:21.083
> 
> 标签：ios, objective-c, xcode, sqlite, core-data

我是 Objective-C 语言的新手。所以我需要像你这样熟悉的人的一些指导。特别是我需要知道如何使用 sqlite3 在 Objective-C 中创建数据库。如果你们中的任何人有兴趣提供帮助，请继续。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T08:03:36.287

虽然不是真正的数据库系统，但您可以使用[CoreData](http://developer.apple.com/macosx/coredata.html)框架。它允许您将数据保存在 sqlite3 数据库中。

对于第三方框架，可以跳转到[这个问题](https://stackoverflow.com/questions/640885/best-cocoa-objective-c-wrapper-library-for-sqlite-on-iphone)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T16:44:05.270

另一种选择是使用我自己创建的 SimpleDB。它是一个易于使用的键/值数据库类，不需要 SQL 知识。可以在这里找到：http: [//github.com/AaronBratcher/SimpleDB](http://github.com/AaronBratcher/SimpleDB)

# css - 保持图像水平对齐而没有间隙的最简单方法？

> ID：704483
> 
> 赞同：1
> 
> 时间：2009-04-01T07:54:35.870
> 
> 标签：css, image, layout

在 div 内水平对齐**没有间隙**的图像的最简单正确方法是什么？

如果可能的话，我不想将每个图像都包装在一个 div 中，我也不想使用一个列表。我宁愿寻找合适的 CSS 以最少的标记来实现这一点。

最大的问题是我可以通过将字体大小设置为 0 来消除图像之间的差距，这很丑陋并且仅适用于 Firefox。

```
<div class="images"><img1><img2><img3></div>

.images {
display: inline;
...???
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T08:05:01.667

一个很好的方法是浮动图像。

但是，一定要为它们的父容器添加一个溢出属性，以确保它一直围绕它们，

添加边距也会使它们整齐。

```
.images {
    overflow: hidden;
}

.images img {
    float: left;
    margin: 0px;
} 
```

# svn - 如何从一个位置更新多个工作副本？

> ID：704485
> 
> 赞同：0
> 
> 时间：2009-04-01T07:55:12.720
> 
> 标签：svn

我们即将超越我们的 Web 服务器，并将主页部署在两个负载平衡的 Web 服务器上。我们目前有一个工作副本签出，并且每当（每天）我们更改任何内容时，我们都会更新副本。在两台服务器上运行的问题当然是增加了在任一服务器上未完成更新的机会，从而导致奇怪的行为。

我们还有一个单独的网络服务器供内部使用，以及一个单独的数据库服务器。问题是，如果可能的话，如何运行一个命令（可能在管理服务器上）来更新两个工作副本？

我们通过 SSH 使用颠覆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T08:10:17.317

这是我们所做的：

我们的 rails-app 路径包含一个符号链接。更新我们的应用程序时，我们将所有服务器上的 repo 完全检查到一个新位置并运行单元测试。当所有更新进程都成功完成它们的工作时，我们几乎同时更新符号链接。

查看[http://www.capify.org](http://www.capify.org)了解此类部署策略

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-03T19:58:45.343

只需将服务器工作目录符号链接到两个服务器指向的公共位置即可。您只有 1 个工作副本，并且两个服务器都指向它。然后您只需更新 1 个位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-03T16:02:14.880

蛮力,,,

为什么不在您的服务器上有一个脚本，例如：

```
svn up /var/html/myapp
ssh user@host2 'svn up /var/html/myapp' 
```

然后每个人（或项目经理）都必须（远程）执行这个脚本来更新生产服务器。

但我确信那里有更优雅的解决方案

# java - SWT/JFace：删除小部件

> ID：704486
> 
> 赞同：13
> 
> 时间：2009-04-01T07:55:41.173
> 
> 标签：java, swt, jface

```
Group group = new Group(parent, SWT.NONE);
StyledText comment = new StyledText(group, SWT.BORDER_DASH); 
```

这将创建一个内部带有文本区域的组。

我以后如何删除文本（将其从屏幕上删除，以便我可以用其他内容替换它）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-01T09:56:37.560

使用 Widget.dispose。

```
public class DisposeDemo {
  private static void addControls(final Shell shell) {
    shell.setLayout(new GridLayout());
    Button button = new Button(shell, SWT.PUSH);
    button.setText("Click to remove all controls from shell");
    button.addSelectionListener(new SelectionListener() {
      @Override public void widgetDefaultSelected(SelectionEvent event) {}
      @Override public void widgetSelected(SelectionEvent event) {
        for (Control kid : shell.getChildren()) {
          kid.dispose();
        }
      }
    });
    for (int i = 0; i < 5; i++) {
      Label label = new Label(shell, SWT.NONE);
      label.setText("Hello, World!");
    }
    shell.pack();
  }

  public static void main(String[] args) {
    Display display = new Display();
    Shell shell = new Shell(display);
    addControls(shell);
    shell.open();
    while (!shell.isDisposed()) {
      if (!display.readAndDispatch()) {
        display.sleep();
      }
    }
    display.dispose();
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-17T18:35:10.780

另一种选择是使用[StackLayout](http://www.java2s.com/Tutorial/Java/0280__SWT/UseaStackLayouttoswitchbetweenComposites.htm)在底层控件之间切换。这可以防止您遇到“小部件已处置”错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T08:35:11.407

您必须调用`comment.changeParent(newParent)`或`comment.setVisible(false)`从组中删除/隐藏它。我不确定是否`comment.changeParent(null)`可行，但我会尝试一下。

我们这样做是因为 SWT 使用[Composite Pattern](http://en.wikipedia.org/wiki/Composite_pattern)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-22T12:07:38.107

`group.getChildren()[0].dispose()`将删除第一个孩子。您需要找到一种方法来识别您要删除的确切孩子。可能是比较id。您可以通过在该控件上使用 setData / getData 来做到这一点：

例如：

```
StyledText comment = new StyledText(group, SWT.BORDER_DASH);
comment.setData("ID","commentEditBox"); 
```

进而：

```
for (Control ctrl : group.getChildren()) {
 if (control.getData("ID").equals("commentEditBox")) {
   ctrl.dispose();
   break;
 }
} 
```

# c# - 为什么 Excel VSTO 插件在更高规格的机器上运行速度较慢？

> ID：704491
> 
> 赞同：4
> 
> 时间：2009-04-01T07:56:40.343
> 
> 标签：c#, performance, excel, vsto

我使用 VSTO 和 VS 2008 在 C# 中开发了一个 Excel 2003 插件。插件在我的机器（HP NC6320 笔记本电脑，3gb RAM T5600 1.8ghz Core2 cpu）上运行良好，但是当它在另一台用户机器上测试时（HP nc6710b 笔记本电脑 2gb RAM，T7200 2ghz Core2 cpu），它的速度要慢得多。我也在另一台与我相同类型的笔记本电脑上尝试过，速度也很快

我已经经历了一些显而易见的事情，比如运行的应用程序、防病毒软件等等。这些机器都打了完整的补丁，并且是最新的。

基本上，插件的作用是： 1\. 从 SQL Server 2005 数据库中读取数据 2\. 对其进行一些操作 3\. 将其显示在工作表上，并适当地格式化

慢位是工作表上的显示。

我很困惑为什么它在较新的机器上会更慢。只是让我自己感到困惑，我在具有 256mb RAM 和 1 个 cpu、运行 xp 且只有 Office 2003 的 VM（VMware Workstation v6.5）上进行了尝试安装在上面，它比新笔记本电脑快得多。

因此，总而言之，Excel 插件在低规格 VM 和较旧的笔记本电脑上运行速度很快，但在较新规格的笔记本电脑上运行速度较慢。

任何建议将不胜感激？

非常感谢

缺口

**编辑：**

好的，我检查了打印机驱动程序，它们是相同的......我检查了碎片级别，如果有的话，速度更快的机器比速度慢的机器碎片更少......

正在看活动设置。。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-07T15:49:21.400

您还可以添加

```
Application.EnableEvents = False 
```

在开始将数据转储到电子表格以停止任何其他 Excel 加载项或任何等待应用级别更改/更新事件的 VBA 代码之前，将数据转储到您的代码中。完成后不要忘记重新启用事件！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-07T15:37:17.543

检查慢速机器是否没有安装任何 XLA 或 COM 插件（即 Google Office 插件）或 Personal.XLS 等中的任何其他潜在事件捕获代码

大概您已经在执行所有标准加速操作，例如： - 在写入 XL 之前关闭自动计算和屏幕更新 - 在单个大块中写入和格式化单元格，而不是逐个单元格 - ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-09T15:22:19.080

将 office 更新到最新版本（请参阅 Microsoft 网站/Microsoft Update）。

检查已安装 VSTO/PIA 的版本...

检查已安装的 office/excel 插件。

使用分析器查看哪个调用很慢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-11T02:26:22.363

我注意到较快的计算机和较慢的计算机之间的一件事是 1GB 的 RAM。您是否在应用程序运行时检查了机器上的内存使用情况？我知道 1GB 的 RAM 在计算机执行某些操作的速度方面取得了一些重大进展（至少在我看来）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T08:03:19.533

我遇到过更新的更高规格的笔记本电脑，它们的硬盘性能很糟糕。你也可能有碎片。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-09T11:43:55.107

检查您在两台机器上配置的打印机驱动程序。事实上，要排除这种情况，请切换到“基于文件”的驱动程序之一（例如 Microsoft XPS）。我遇到了一些问题，Word 需要很长时间才能完成基于打印机驱动程序的工作，并且 Word 需要检查打印机在某些情况下的功能。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-13T21:29:52.423

如果机器运行的是 Vista，您可以进入系统信息（到达那里的最快方法是 Windows 键 + 暂停；不知道如何通过控制面板慢速到达那里）。它将显示一组五个性能数字：内存性能、硬盘驱动器性能、图形性能等。比较两台机器上的这些数字；可能是“较新”机器的 RAM 较慢或硬盘驱动器较慢。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-13T22:02:45.013

检查每台机器上 %temp% 中有多少个文件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-14T00:34:18.003

一些机器运行 32 位操作系统而其他机器运行 64 位操作系统吗？混合 32 位和 64 位代码会增加开销吗？

# c# - 使用泛型来转换不同的用户输入类型

> ID：704514
> 
> 赞同：2
> 
> 时间：2009-04-01T08:04:36.487
> 
> 标签：c#, generics

我有一个 Windows 应用程序，它允许从平板电脑上的笔输入进行输入。

需要时，表单 (A) 将打开另一个表单 (B) 以允许用户输入。

在表格（B）中，我有以下函数来返回用户用笔输入的解码值。

```
private object decodedValue;

public T GetDecodedValue<T>()
{
    return (T)decodedValue;
} 
```

当用户输入一个值时，在表单 B 中，我将结果存储如下

```
string sResult = myInkCollector.Ink.Strokes.ToString();
decodedValue = (object)sResult; 
```

现在在表格 A 中需要两个字段来允许数据输入，一个是数量 (int)，另一个是价格 (double)。我想让表单 B 适应不同的类型，因此这就是我使用泛型的原因。

所以当表单B被接受时，它将返回表单A并使用以下代码

```
int qty = formB.GetDecodedValue<int>(); 
```

或者

```
double price = formB.GetDecodedValue<double>(); 
```

这是发生错误的地方，当调用函数“formB.GetDecodedValue”时，它会在以下位置引发 InvalidCastException

```
return (T)decodedValue; 
```

关于我做错了什么的任何想法？我使用泛型使事情复杂化了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T08:09:10.610

`TypeConverter`可能是你最好的选择：

```
return (T)TypeDescriptor.GetConverter(typeof(T)).ConvertFrom(decodedValue); 
```

这通常适用于`string`价值观 - 除此之外...... hit'n'miss。

还有：

```
return (T)Convert.ChangeType(decodedValue, typeof(T)); 
```

工作方式不同；两个都试试；-p

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T08:08:49.987

我认为在这里使用泛型并不比从表单 A 进行强制转换更干净，但这不是问题。问题是返回的值不是正确的类型。这是一个字符串，你不能从`string`to`int`或`double`。假设你真的想解析它，你应该从表单 B 返回一个字符串，表单 A 应该使用[`int.TryParse`](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)or [`double.TryParse`](http://msdn.microsoft.com/en-us/library/system.double.tryparse.aspx)，适当地处理用户输入错误。

（这是假设`Ink.Strokes.ToString()`返回诸如“5”或“10.50”之类的文本 - 我并不清楚情况是否如此。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T08:06:39.790

您不能将字符串转换为 int 或 double，您需要使用 int.Parse 或 double.Parse。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T08:09:13.403

尝试这个：

```
return (T)Convert.ChangeType(decodedValue, typeof(T)); 
```

您不能将 int 隐式转换为字符串，例如必须转换。这个工具很方便，我已经用它做了一些事情。

试试看。

安德鲁

# objective-c - 如何从一个 ViewController 访问对象到另一个 ViewController

> ID：704524
> 
> 赞同：3
> 
> 时间：2009-04-01T08:06:41.287
> 
> 标签：objective-c

提供一些提示以摆脱以下情况。

描述：

我有两个视图控制器，即*ViewController1*和*ViewController2*，所以很明显我们有*ViewController1.h*、*ViewController1.m*和*ViewController2.h*、*ViewController2.m*。现在我宣布了一个

```
NSString *string1; 
```

在*ViewController1.h*中并将其声明为属性

```
@property(nonatomic,retain) NSString *string1; 
```

并在*ViewController1.m*中合成为

```
@synthesize string1; 
```

在*ViewController1.m*中，我将 string1 值设置为

```
string1=@"Hello Every One"; 
```

同样我声明

```
NSString *string2; 
```

在*ViewController2.h*中并将其声明为属性

```
@property(nonatomic,retain)NSString *string2; 
```

并在*ViewController2.m*中合成为

```
@synthesize string2; 
```

如果我想将`string1`值（在*ViewController1.m*中）设置为`string2`（在*ViewController2.m*中），我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T21:07:30.537

这取决于您要在其中设置 string1 的代码正在运行的位置。如果它在某个外部类中可以访问两个视图控制器对象，那么这很简单。如果您有 ViewController1 对象 vc1 和 ViewController2 对象 vc2，那么您要做的就是：

```
[vc1 setString1:[vc2 string2]]; 
```

如果要从 ViewController2 中运行的代码设置 string1，则使用通知机制。在 ViewController1 的初始化例程中，您输入：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(aChangeStringMethod:) name:@"anyStringJustMakeItUnique" object:nil]; 
```

并定义：

```
-(void)aChangeStringMethod:(NSNotification)notification{
     string1 = [((ViewController2 *)[notification object]) string2];
} 
```

然后，在 ViewController2 中，当您要更改字符串时：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"anyStringJustMakeItUnique" withObject:self]; 
```

当您从可以访问 vc2 但不能访问 vc1 的某个第三类更改字符串时，使用相同的技术。ViewController1 代码同上，当你想改变字符串时：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"anyStringJustMakeItUnique" withObject:vc2]; 
```

最棘手的部分是如果您想从 ViewController1 中更改字符串（假设您无权访问对象 vc2）。您必须使用两个通知：上面的一个，以及 ViewController2：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(launchTheOtherNotificationMethod:) name:@"anotherNotificationName" object:nil];

-(void)launchTheOtherNotificationMethod:(NSNotification)notification{
     [[NSNotificationCenter defaultCenter] postNotificationName:@"anyStringJustMakeItUnique" withObject:self];
} 
```

然后，当您要更改字符串时：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"anotherNotificationName" withObject:nil]; 
```

如果您认为这太复杂或导致太多开销，更简单的解决方案是让 ViewController1 和 ViewController2 中的字段相互指向。然后，在 ViewController1 中：

```
string1 = [myVC2 string2]; 
```

如果您将这些字段设置为属性，那么，从外部：

```
[vc1 setString1:[[vc1 myVC2] string2]]; 
```

乃至：

```
[[vc2 myVC1] setString1:[vc2 string2]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-06-23T13:46:49.347

viewControllers 是一个堆栈，所以最后调用的那个在堆栈的顶部，调用它的那个是它的父级。因此，假设首先调用 viewController1，然后从其中调用 viewController2，那么在 viewController2.m 中您所要做的就是：

```
[[self parentViewController] setString1:string2] 
```

:D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T08:22:48.567

您可以使用包含两个字符串并且两个控制器都知道的模型对象。

如果您希望在另一个控制器更新字符串值时通知每个控制器，您可以使用[通知机制](http://developer.apple.com/documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html)。这允许您的模型让其他对象知道其更改并保持独立于这些对象。

# python - python：从列表中查找字母表中缺少的字母-最少的代码行

> ID：704526
> 
> 赞同：2
> 
> 时间：2009-04-01T08:08:19.503
> 
> 标签：python

我试图用最少的代码行从列表中找到字母表中丢失的字母。

如果列表已经排序（使用 list.sort()），找到丢失字母的最快或最少的代码行是什么。

如果我知道只有一封丢失的信。

（这不是任何类型的面试问题。我实际上需要在我的脚本中这样做，因为我想在这个过程中投入最少的工作，因为它会不确定地一遍又一遍地重复）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-01T08:25:40.493

一些问题：

*   所有的字母都是大写还是小写？（一/一）
*   这是您要检查的唯一字母吗？
*   你为什么经常这样做？

最少的代码行数：

```
# do this once, outside the loop
alphabet=set(string.ascii_lowercase)
# inside the loop, just 1 line:
missingletter=(alphabet-set(yourlist)).pop() 
```

上面的好处是你可以做到这一点，而不必先对列表进行排序。但是，如果列表*始终*是排序的，则可以使用二分法更快地到达那里。不过，在一个简单的 26 个字母的字母表上，有什么意义吗？

二等分（在 ~4 次查找中完成）：

```
frompos, topos = 0, len(str)
for i in range(1,100):  #never say forever with bisection...
    trypos = (frompos+topos+1)/2
    print "try:",frompos,trypos,topos
    if alphabet[trypos] != str[trypos]:
        topos = trypos
    else:
        frompos = trypos
    if topos-frompos==1:
        if alphabet[topos] != str[topos]:
            print alphabet[frompos]
        else:
            print alphabet[topos]
        break 
```

这段代码需要更少的查找，因此到目前为止更好的缩放版本 O(log n)，但通过 python 解释器执行时可能仍然较慢，因为它通过 python `if`s 而不是`set`用 C 编写的操作。

（感谢 JFSebastian 和 Kylotan 的评论）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-01T08:32:13.957

使用列表推导：

```
>>> import string
>>> sourcelist = 'abcdefghijklmnopqrstuvwx'
>>> [letter for letter in string.ascii_lowercase if letter not in sourcelist]
['y', 'z']
>>> 
```

[字符串](http://docs.python.org/library/string.html)模块有一些有用的预定义常量。

```
>>> string.ascii_lowercase
'abcdefghijklmnopqrstuvwxyz'

>>> string.letters
'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'

>>> string.hexdigits
'0123456789abcdefABCDEF'

>>> string.octdigits
'01234567'

>>> string.digits
'0123456789'

>>> string.printable
'0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!"#$%&\'()*+,-./:;<=>?@[\\]^_`{|}~ \t\n\r\x0b\x0c'
>>> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-01T09:06:28.007

在它自己的好类别中太聪明了，并假设在小写字母中恰好缺少一个字母：

```
print chr(2847 - sum(map(ord, theString))) 
```

**[编辑]** 我对各种解决方案进行了一些计时，看看哪个更快。事实证明，我的在实践中相当慢（如果我使用 itertools.imap 会稍微快一点）。

令人惊讶的是，monkut 的[listcomp 解决方案](https://stackoverflow.com/questions/704526/python-finding-a-missing-letter-in-the-alphabet-from-a-list-least-lines-of-cod/704595#704595)结果是最快的 - 我预计 set 解决方案会做得更好，因为它每次都必须扫描列表以找到丢失的字母。我尝试在成员检查之前先将测试列表转换为一组，期望这会加快它的速度，但实际上它让它变慢了。看起来创建集合的常数因子延迟使对如此短的字符串使用 O(n**2) 算法的成本相形见绌。

这表明，利用提前退出的更基本的方法可以表现得更好。以下是我认为目前表现最好的：

```
def missing_letter_basic(s):
    for letter in string.ascii_lowercase:
        if letter not in s: return letter
    raise Exception("No missing letter") 
```

然而，在处理较大的字符串时，二分法可能是最好的。它只是在这里被 listcomp 淘汰，并且具有更好的渐近复杂性，因此对于大于字母的字符串，它显然会获胜。

**[编辑2]**

实际上，稍微作弊，我可以做得更好，滥用只有 26 个字符串要检查的事实，看看最终的 O(1) 丢失字母查找器！

```
find_missing_letter = dict((string.ascii_lowercase[:i]+string.ascii_lowercase[i+1:],
                            string.ascii_lowercase[i]) for i in range(26)).get

>>> find_missing_letter('abcdefghijklmnoprstuvwxyz')
'q' 
```

这是我的计时（500000 次运行，测试时在字符串的开头、中间和结尾附近缺少字母（b、m 和 y）

```
 "b"    "m"     "y"
               bisect : 2.762   2.872   2.922  (Phil H)
             find_gap : 3.388   4.533   5.642  (unwind)
             listcomp : 2.832   2.858   2.822  (monkut)
         listcomp_set : 4.770   4.746   4.700  As above, with sourcelist=set(sourcelist) first
       set_difference : 2.924   2.945   2.880  (Phil H)
                  sum : 3.815   3.806   3.868
             sum_imap : 3.284   3.280   3.260
                basic : 0.544   1.379   2.359 
          dict_lookup : 0.135   0.133   0.134 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T08:20:13.737

这是一种方法，假设您的“字母”是整数，并且列表至少有两个项目：

```
for i in xrange(1, len(a)):
  if a[i] != a[i - 1] + 1:
    print a[i - 1] + 1, "is missing" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T08:21:18.427

对于排序列表，二进制搜索通常是最快的算法。您能否提供一个示例列表和一个示例“缺少字母”？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T08:33:25.403

如果您将字母表视为字母：

```
letterSet = set()
for word in wordList:
  letterSet.update(set(word.lower()))

import string
alphabet = set(string.lowercase)
missingLetters = alphabet.difference(letterSet) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-10-26T20:13:32.247

```
class MissingFinder(object):
    "A simplified missing items locator"
    def __init__(self, alphabet):
        "Store a set from our alphabet"
        self.alphabet= set(alphabet)
    def missing(self, sequence):
        "Return set of missing letters; sequence not necessarily set"
        return self.alphabet.difference(sequence)

>>> import string
>>> finder= MissingFinder(string.ascii_lowercase)

>>> finder.missing(string.ascii_lowercase[:5] + string.ascii_lowercase[6:])
>>> set(['f'])
>>> # rinse, repeat calling finder.missing 
```

我确信类和实例名称可以改进:)

# c++ - 如何在 C++ 中进行 Latin1-UTF8 编码更改（可能使用 Boost）？

> ID：704527
> 
> 赞同：4
> 
> 时间：2009-04-01T08:08:42.123
> 
> 标签：c++, character-encoding

我的源代码库主要使用 UTF8，但一些较旧的库中包含硬编码的 Windows Latin1 编码字符串。

我希望 Boost 有一个清晰的转换功能，但我没有找到。我真的需要手动编写这样一个司空见惯的解决方案吗？

寻找可移植的解决方案，在 Linux 上运行。

（[这个Q](https://stackoverflow.com/questions/148403/utf8-to-from-wide-char-conversion-in-stl)类似，但不完全相同）

**编辑：** ICU 似乎是正确的答案，但对我的需求来说有点过分了。我最终对已知的几个使用的扩展字符进行了字符串替换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T09:37:01.490

[International Components for Unicode](http://www.icu-project.org) (ICU) 确实有您正在寻找的解决方案。Boost 可以在支持 ICU 的情况下进行编译，例如 Boost 正则表达式，但 Boost 的预编译版本通常不包含它。

# macos - 在 Mac OS X 10.4.11 上安装 mechanize gem 会出现“无法构建 gem 原生扩展”

> ID：704544
> 
> 赞同：1
> 
> 时间：2009-04-01T08:14:26.137
> 
> 标签：macos, gem, mechanize-ruby

我正在尝试在 MAC OS X 上安装 mechanize gem，但我不断收到以下错误：

> 错误：安装 mechanize 时出错：
> 错误：无法构建 gem 原生扩展。
> 
> /usr/local/bin/ruby extconf.rb install mechanize
> 检查#include
> ...是
> 检查#include
> ...是
> 检查#include
> ...是
> 检查#include
> ...是
> 检查xmlParseDoc()在 -lxml2... 是
> 检查 xsltParseStylesheetDoc() 在 -lxslt... 是
> 检查 exsltFuncRegister() 在 -lexslt... 是
> 创建 Makefile
> 
> ** 制作 gcc -I。-我。-I/usr/local/lib/ruby/1.8/i686-darwin8.9.1 -I. -I/opt/local/include/ -I/opt/local/include/libxml2 -fno-common -g -O2 -pipe -fno-common -g -DXP_UNIX -O3 -Wall -Wcast-qual -Wwrite-strings - Wconversion -Wmissing-noreturn -Winline -c html_document.c
> 在来自 ./html_document.h:4 的文件中，
> 来自 html_document.c:1:
> ./native.h:11:28: 错误: libxml/xmlsave.h: 否这样的文件或目录
> make: * ** [html_document.o] 错误 1**

所以在 /opt/local/include/ 或 /opt/local/include/libxml2 中找不到 xmlsave.h 事情是 libxml2 作为框架安装在 /Library/Frameworks/libxml2.framework/

然后我决定创建一个从 libxml 头目录到 /opt/local/include/xml2 的符号链接，所以我做了

```
ln -s /Library/Frameworks/libxml2.framework/Headers/libxml/ libxml2 
```

但我仍然无法安装 gem。

非常感谢任何指针或想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T10:53:54.757

我遇到了同样的问题，不是安装 mechanize 而是 webrat。这对我有用：

```
sudo ln -s /usr/include/libxml2 /opt/local/include/libxml2 
```

# unix - 使用 IP 获取主机名

> ID：704553
> 
> 赞同：0
> 
> 时间：2009-04-01T08:19:58.103
> 
> 标签：unix, host

如何在不登录主机的情况下获取带有 IP 的主机名

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T08:21:18.523

*   对于 Win32 `[getnameinfo()](http://msdn.microsoft.com/en-us/library/ms738532%28VS.85%29.aspx)`，.
*   对于 POSIX `[gethostbyaddr()](http://linux.die.net/man/3/gethostbyaddr)`，.

制作便携式包装纸作为练习。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T08:58:01.257

[nslookup](http://en.wikipedia.org/wiki/Nslookup)

它在 Windows 和 Linux 上都有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T08:29:57.707

如果您没有在代码中使用它（根据您发布的答案，您没有使用它，这应该是对您的问题的编辑:-)，这不是一个编程问题。

但答案是使用nslookup。

```
Microsoft Windows XP [Version 5.1.2600]
(C) Copyright 1985-2001 Microsoft Corp.

C:\Documents and Settings\Administrator>nslookup www.company.com
Server:  bhadns01.company.com
Address:  9.190.234.35

Non-authoritative answer:
Name:    www-int.company.com.cs186.net
Address:  129.42.58.216
Aliases:  www.company.com

C:\Documents and Settings\Administrator>nslookup 129.42.58.216
Server:  bhadns01.company.com
Address:  9.190.234.35

Non-authoritative answer:
Name:    www-int.company.com.cs186.net
Address:  129.42.58.216
Aliases:  www.company.com

C:\Documents and Settings\Administrator> 
```

# iphone - 自定义 UINavigationBar 背景

> ID：704558
> 
> 赞同：50
> 
> 时间：2009-04-01T08:20:40.100
> 
> 标签：iphone, objective-c

我一直在尝试为我的整个 NavigationBar（不仅仅是 titleView）设置自定义背景，但一直在苦苦挣扎。

我找到了这个线程

[http://discussions.apple.com/thread.jspa?threadID=1649012&tstart=0](http://discussions.apple.com/thread.jspa?threadID=1649012&tstart=0)

但我不确定如何实现给出的代码片段。代码是否作为新类实现？另外，我在哪里设置，`UINavigationController`因为我有一个使用 NavigationView 模板构建的应用程序，所以它没有按照示例在我的根控制器中完成

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2011-08-05T16:15:20.057

Uddhav 和 leflaw 是对的。此代码运行良好：

```
@interface CustomNavigationBar : UINavigationBar
@end

@implementation CustomNavigationBar
-(void) drawRect:(CGRect)rect 
{
    UIImage *image = [UIImage imageNamed: @"myNavBarImage"];
    [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
}
@end

// this can go anywhere
+(UINavigationController*) myCustomNavigationController
{
  MyViewController *vc = [[[MyViewController alloc] init] autorelease];
  UINavigationController *nav = [[[NSBundle mainBundle] loadNibNamed:@"CustomNavigationController" owner:self options:nil] objectAtIndex:0];
  nav.viewControllers = [NSArray arrayWithObject:vc];
  return nav;
} 
```

您必须创建 CustomNavigationController.xib 并在其中放置一个 UINavigationController 并将 navigationBar 类更改为“CustomNavigationBar”。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2011-10-19T15:08:13.703

在 iOS 5.xx中`UINavigationBar`，您必须使用“外观”代理来更改控件的背景和其他样式属性，例如等。`UIToolBar`但是，这些不适用于 iOS 4.xx，因此为了向后兼容，您需要一个混合解决方案。

如果您想同时支持 iOS 4.xx 和 iOS 5.xx 设备（即您的设备`DeploymentTarget`是 4.xx），您必须小心包装对外观代理的调用，方法是在运行时检查“外观”选择器是否存在或不是。

你可以这样做：

```
//Customize the look of the UINavBar for iOS5 devices
if ([[UINavigationBar class]respondsToSelector:@selector(appearance)]) {
    [[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"NavigationBar.png"] forBarMetrics:UIBarMetricsDefault];
} 
```

您还应该离开您可能已经实施的 iOS 4.xx 解决方法。如果您已经`drawRect`为 iOS 4.xx 设备实现了解决方法，如 @ludwigschubert 所述，您应该将其保留在：

```
@implementation UINavigationBar (BackgroundImage)
//This overridden implementation will patch up the NavBar with a custom Image instead of the title
- (void)drawRect:(CGRect)rect {
     UIImage *image = [UIImage imageNamed: @"NavigationBar.png"];
     [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
}
@end 
```

这将`NavBar`在 iOS 4 和 iOS 5 设备中获得相同的外观。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2010-04-27T09:55:58.500

你只需要像这样重载drawRect：

```
@implementation UINavigationBar (CustomImage)
- (void)drawRect:(CGRect)rect {
    UIImage *image = [UIImage imageNamed: @"NavigationBar.png"];
    [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
}
@end 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2011-07-25T17:55:14.910

不建议实施类别。iOS5 可能会缓解这个问题。但对于旧 API，您可以 -

1.  从 Lithium 的答案`UINavigationBar`中说和实现自定义 drawRect 的子类。`CustomNavBar`
2.  对于所有基于 IB 的`UINavigationControllers`，为其提供`CustomNavBar`自定义类`UINavigationBar`。
3.  对于所有基于代码的`UINavigationControllers`. 使用 a 创建一个 XIB`UINavigationController`并执行第二步。然后在代码中提供一个工厂方法，该方法从 nib 加载`UINavigationController`并提供`IBOutlet`.

例如。

```
[[NSBundle mainBundle] loadNibNamed:@"CustomNavigationController" owner:self options:nil];
UINavigationController *navController = self.customNavigationController;
navController.viewControllers = [NSArray arrayWithObject:controller] 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2011-02-13T09:46:02.017

您还可以覆盖类别类`drawLayer:inContext:`中的方法。`UINavigationBar`在该`drawLayer:inContext:`方法中，您可以绘制要使用的背景图像。

```
- (void) drawLayer:(CALayer *)layer inContext:(CGContextRef)context
{
    if ([self isMemberOfClass:[UINavigationBar class]] == NO) {
        return;
    }

    UIImage *image = (self.frame.size.width > 320) ?
                        [UINavigationBar bgImageLandscape] : [UINavigationBar bgImagePortrait];
    CGContextClip(context);
    CGContextTranslateCTM(context, 0, image.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);
    CGContextDrawImage(context, CGRectMake(0, 0, self.frame.size.width, self.frame.size.height), image.CGImage);
} 
```

作为一个关于自定义外观的完整演示 Xcode 项目，这`UINavigationBar` [可能](http://www.ardalahmet.com/2011/02/11/ios-development/customizing-the-appearance-of-uinavigationbar/)[会](https://github.com/ardalahmet/CustomizingNavigationBarBackground)有所帮助。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2010-08-17T20:30:22.807

我刚刚发现这个博客条目，描述这个主题很简单：[http ://web0.at/blog/?p=38](http://web0.at/blog/?p=38)

它对我帮助很大，他们使用“drawRect”方法来自定义背景。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2011-08-04T01:48:09.373

实现类别在 iOS5 中不起作用，您应该使用 Uddhav Kambli 的建议，在 iOS ≤ 5 上使用 CustomNavbar。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2011-11-26T21:15:25.397

对于所有在 iOS5 中遇到 UINavigationBar 自定义背景问题的人，请在相应的 viewDidLoad 方法中执行此操作：

```
#if defined(__IPHONE_5_0) && __IPHONE_OS_VERSION_MAX_ALLOWED >= __IPHONE_5_0
if ([self.navigationController.navigationBar respondsToSelector:@selector( setBackgroundImage:forBarMetrics:)]){
    [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"TitleBar"] forBarMetrics:UIBarMetricsDefault];
}
#endif 
```

请注意，在我的例子中，背景图像被命名为“TitleBar”。您可以输入任何自定义背景图像名称。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2011-04-14T07:25:13.310

您将遇到的问题是，如果您使用导航控制器，每个页面的标题将覆盖您的自定义导航栏。如果您的导航栏包含徽标或应用名称，这显然是不可接受的。

您可以将导航堆栈中每个视图的标题设置为空白，但某些视图会强制使用您无能为力的标题（例如照片选择器）。因此，您可能希望创建一个与您的徽标导航栏颜色或设计相同的替代导航栏图像，但有一个空白区域为重叠的标题腾出空间。

要随意切换导航栏图像，请向您的应用程序委托添加一个属性以保存导航栏图像的名称，并将上面第一个示例的第一行替换为以下两个：

```
 YourAppDelegate* theApp = (YourAppDelegate*)[[UIApplication sharedApplication] delegate];
    UIImage* image = [UIImage imageNamed:theApp.navBarName]; 
```

然后在您将推送到导航堆栈的第一个视图控制器中，执行以下操作：

```
- (void)viewWillAppear:(BOOL)animated
{
    YourAppDelegate* theApp = (YourAppDelegate*)[[UIApplication sharedApplication] delegate];
    theApp.navBarName = @"navBar_plain";
} 
```

然后在根视图控制器中，执行相同的操作，但指定带有徽标的导航栏图像，因此当用户导航回它并且没有冲突的标题时它会被恢复。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2011-08-31T17:43:35.017

另一种方法是使用 UINavigationController 的委托。它不需要子类化/覆盖 UINavigationBar 类：

```
/*
 in the place where you init the navigationController:
 fixer = [[AENavigationControllerDelegate alloc] init];
 navigationController.delegate = fixer;
*/

@interface AENavigationControllerDelegate : NSObject <UINavigationControllerDelegate>
@end

@implementation AENavigationControllerDelegate

#define bgImageTag 143

- (void)navigationController:(UINavigationController *)navigationController 
   didShowViewController:(UIViewController *)viewController 
                animated:(BOOL)animated
{
     //this is for the future for implementing with the appearance api:

    if ([[navigationController navigationBar] respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)])
    {
        static dispatch_once_t onceToken;
        dispatch_once(&onceToken, ^{
            [[navigationController navigationBar] setBackgroundImage:[UIImage imageNamed:@"header-logo-bg.png"]
                                                   forBarMetrics:UIBarMetricsDefault];
        });
 }
    else
        {
        UIImageView* imageView = (UIImageView*)[navigationController.navigationBar viewWithTag:bgImageTag];
        if(!imageView)
        {
            UIImage *image = [UIImage imageNamed:@"header-logo-bg.png"];
            imageView = [[[UIImageView alloc] initWithImage:image] autorelease];
            imageView.tag = bgImageTag;
        }

        [navigationController.navigationBar insertSubview:imageView atIndex:0];        
    }
}

@end 
```

[https://gist.github.com/1184147](https://gist.github.com/1184147)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2011-10-14T03:54:32.773

在 iOS5 中，`zPosition`（`UINavigationBar's`最深度层的）值发生了变化。因此，如果您更改它`zPosition`，则旧方法有效。

例如。

```
UINavigationBar *_bar = navigationController.navigationBar;

// Insert ImageView    
UIImage *_img = [UIImage imageNamed:@"navibar.png"];
UIImageView *_imgv = [[[UIImageView alloc] initWithImage:_img] autorelease];
_imgv.frame = _bar.bounds;

UIView *v = [[_bar subviews] objectAtIndex:0];
v.layer.zPosition = -FLT_MAX;

_imgv.layer.zPosition = -FLT_MAX+1;
[_bar insertSubview:_imgv atIndex:1]; 
```

这个脚本处理视图层，所以你应该导入`QuartzCore`.

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2011-09-30T14:00:23.863

这是一个替代解决方案，可让您使用自己的 UINavigationBar 自定义子类：

[https://gist.github.com/1253807](https://gist.github.com/1253807)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-04-01T12:10:17.573

正如苹果自己所说，在类别中覆盖方法是不正确的。所以自定义背景的最好方法`UINavigarionBar`是子类化和覆盖`-(void)drawInRect:`方法。

```
@implementation AppNavigationBar
- (void)drawRect:(CGRect)rect
{
    UIImage *patternImage = [UIImage imageNamed:@"image_name.png"];
    [patternImage drawInRect:rect];
} 
```

要使用这个定制的`UINavigationBar`，它应该被设置为`navigationBar`你的属性`UINavigationBarController`。如您所知，此属性是只读的。所以应该做的是：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    AppNavigationBar *nav = [AppNavigationBar new];
    [self setValue:nav forKey:@"navigationBar"];
} 
```

它适用于 iOS 5 和 4.3。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-08-13T16:16:54.197

您可以继承 UINavigationBar 并像这样启用它，因为 drawRect 的类别不再适用于 iOS5

```
 navigationController = [[((^ {
    NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:[NSKeyedArchiver archivedDataWithRootObject:navigationController]];
    [unarchiver setClass:[SAPHUINavigationBar class] forClassName:@"UINavigationBar"];
    [unarchiver setClass:[UIViewController class] forClassName:NSStringFromClass([navigationController.topViewController class])];
    return unarchiver;
})()) decodeObjectForKey:@"root"] initWithRootViewController:navigationController.topViewController]; 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-02-19T22:00:01.977

对于静态视图（根本没有动画），我使用默认的 iOS [setBackgroundImage](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationBar_Class/Reference/UINavigationBar.html)

但是当我有一个动画视图（最有可能调整大小）时，我创建了一个自定义 UIImageView 并将其添加到导航栏，以便我有更多的灵活性

问题是，如果您只是添加它，它将位于按钮和 titleView 之上，因此我手动保存大多数子视图的副本，将它们从父视图中删除，添加我的 imageView，然后将所有子视图添加回来

这对我有用

```
 UIImageView *navBackground = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"navigationBackgroundSample.jpg"]];
    UIView *tempTitleView = [[self.navigationBar.subviews objectAtIndex:1] autorelease];
    [[self.navigationBar.subviews objectAtIndex:1] removeFromSuperview];
    [self.navigationBar addSubview:navBackground];
    [self.navigationBar addSubview:tempTitleView];
    self.navigationBar.clipsToBounds = YES;
    [navBackground release]; 
```

在这种情况下，我没有按钮，我发现我的 titleView 位于索引 1，如果你有按钮，它们应该在 navigationBar 的 subviews 数组中的某个位置

我不知道索引 0 是什么，我不知道这是否可以解决您也没有文本标题的情况......

# firefox - NS_BINDING_ABORTED 在带有 HttpFox 的 Firefox 中显示

> ID：704561
> 
> 赞同：57
> 
> 时间：2009-04-01T08:21:13.967
> 
> 标签：firefox

我在浏览 HttpFox 时看到我的站点中的一些服务器调用（用于跟踪目的）在 Firefox 中中止。当单击在同一窗口中加载另一个页面的某个链接时会发生这种情况。它适用于弹出窗口。显示的错误类型是 NS_BINDING_ABORTED。我需要知道跟踪呼叫是否正在访问服务器。它与 Internet Explorer 完美配合。工具有问题吗？在这种情况下，您能否推荐任何可以在 Firefox 中使用的内容。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-02-25T11:35:09.890

因为您的服务器没有发送 HTTP Expires 标头，所以浏览器正在检查其缓存中的内容是否是最新的。

它这样做的方式是向服务器发送一个请求，说明它在缓存中的日期是什么，并且服务器正在发送 304 状态，告诉客户端它所拥有的内容是最新的。换句话说，服务器不会再次发送整个内容，而是仅发送一个短标头来说明现有缓存内容是最新的。

**您可能需要修复**的是将 Expires 标头添加到您所服务的内容中。然后您将看到 NS_BINDING_ABORTED 消息更改为 (cache)，这意味着浏览器只是从其缓存中获取内容，知道它还没有过期。

我应该补充一点，当您执行 FireFox 强制刷新时，它假定您要仔细检查缓存中的内容，因此它会暂时忽略 Expires。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-10-29T09:28:05.623

您不应该仅仅因为看到一些看起来像故障代码 ( `NS_BINDING_ABORTED`) 的东西而担心。

在[http://markmail.org/message/m6z77uoixf3qu7u6](http://markmail.org/message/m6z77uoixf3qu7u6)中，Firefox 开发人员确认这`NS_BINDING_ABORTED`只是页面加载已停止的指示。

在加载另一个页面的同时打开一个页面会取消第一页上的加载，这似乎是完全正常的。这并不意味着在请求被发送到服务器之前负载被中止，这似乎是你关心的。

[编辑：改写并删除了关于我不熟悉 HttpFox 的部分，因为在 2022 年看到这一点的人可能无论如何都不会使用它。]

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-31T11:26:54.413

NS_BINDING_ABORTED 错误 - 最佳方法 - 使用 JavaScript “setInterval” 方法，根据页面加载时间延迟从 Min '0' 到 max '100' 毫秒，我们可以在处理默认页面提交请求后执行我们的跟踪链接请求。

世界最佳解决方案：

```
var el = document.getElementById("t");
el.addEventListener("click", avoidNSError, false); //Firefox

function avoidNSError(){
  ElementInterval = setInterval(function () {
 /* Tracking or other request code goes here */
  clearInterval(ElementInterval);
 },0);

}; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-07-29T22:15:51.413

您在页面上还有哪些其他 javascript？某些 javascript 可能会触发导致请求中止。

我在我的应用程序中注意到了同样的事情。我在 javascript (window.location = '/some/page.html') 中重定向页面，但在代码块的下方，我调用了'window.reload()'。先前的重定向被中止，因为 window.reload 被调用。

我不知道您正在使用什么跟踪，但有可能请求正在发送到您的服务器，但请求被中止，因为随后发出了另一个请求。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-11-09T15:40:28.580

我遇到了类似的问题，但已经确定了原因。

我在表格行的第一个单元格中有一个链接，以及一些复制该链接的 Javascript 跨行的其他 TD。当我点击“真实”链接（在第一个单元格中）时，我得到了这种不需要的副作用；当我单击该行中的其他单元格时，一切都很好。我觉得这是因为脚本正在向第一个单元格添加第二个链接，而它已经有一个。

因此，对同一页面的两个瞬时请求，第一个被第二个中止。

这种技术相当普遍，因此需要注意。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-17T15:43:55.450

该错误`NS_BINDING_ABORTED`可能有多种原因。

在我的情况下，它是从服务器收到的响应标头中的垃圾，基本上是 HTTP 协议违规。

使用诸如[Fiddler](https://www.telerik.com/fiddler)之类的 Web 调试代理有时可能会比浏览器自己的调试控制台更好地揭示此类问题（我认为，今天它的功能与 HttpFox 一样，只是更好），或者至少显示更详细的信息或更清晰的错误消息。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-05-12T02:05:46.860

就我而言，同样`NS_BINDING_ABORTED`的错误，但这是因为我单击以触发事件的“按钮”元素缺少属性“类型”值“提交”=[如何防止按钮提交表单](https://stackoverflow.com/questions/932653/how-to-prevent-buttons-from-submitting-forms)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-16T15:56:54.063

我知道这是一个非常古老的问题，但最近在 Firefox 95 上发生了这种情况。由于这段代码，我的一位同事制作的一个古老应用程序的图像没有加载（或随机加载）：

```
window.addEventListener('focus', function() {
   // omit other code...
   location.reload();
} 
```

一旦将此代码嵌套到“加载”侦听器中，问题就完全消失了。

# javascript - 在 HTML 元素上禁用拖放？

> ID：704564
> 
> 赞同：126
> 
> 时间：2009-04-01T08:21:30.410
> 
> 标签：javascript, css

我正在开发一个 Web 应用程序，我正在尝试为其实现一个功能齐全的窗口系统。现在一切都很顺利，我只遇到了一个小问题。有时当我去拖动我的应用程序的一部分（通常是我的窗口的角落 div，它应该触发调整大小操作）时，Web 浏览器会变得很聪明，并认为我的意思是拖放一些东西。最终结果是，当浏览器执行拖放操作时，我的操作被搁置。

有没有一种简单的方法可以禁用浏览器的拖放功能？理想情况下，我希望能够在用户单击某些元素时将其关闭，但重新启用它，以便用户仍然可以在我的窗口内容上使用浏览器的正常功能。我正在使用 jQuery，虽然我无法在浏览文档时找到它，但如果您知道纯 jQuery 解决方案，那就太好了。

简而言之：当我的用户按下鼠标按钮时，我需要禁用浏览器文本选择和拖放功能，并在用户释放鼠标时恢复该功能。

* * *

## 回答 #1

> 赞同：245
> 
> 时间：2012-12-06T14:00:52.593

这行得通。尝试一下。

```
<BODY ondragstart="return false;" ondrop="return false;"> 
```

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2009-04-01T08:27:30.957

尝试阻止 mousedown 事件的默认设置：

```
<div onmousedown="event.preventDefault ? event.preventDefault() : event.returnValue = false">asd</div> 
```

或者

```
<div onmousedown="return false">asd</div> 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2017-02-12T09:15:40.453

`draggable="false"`您可以简单地通过使用属性来禁用拖动。

[https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/draggable](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/draggable) [http://www.w3schools.com/tags/att_global_draggable.asp](http://www.w3schools.com/tags/att_global_draggable.asp)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-09-01T21:46:38.057

这可能有效：您可以禁用使用 css3 选择文本、图像和基本上所有内容。

```
.unselectable {
   -moz-user-select: -moz-none;
   -khtml-user-select: none;
   -webkit-user-select: none;

   /*
     Introduced in IE 10.
     See http://ie.microsoft.com/testdrive/HTML5/msUserSelect/
   */
   -ms-user-select: none;
   user-select: none;
} 
```

当然只适用于较新的浏览器。更多详情请查看：

[如何使用 CSS 禁用文本选择突出显示？](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-12-27T10:40:49.557

使用 jQuery，它将是这样的：

```
$(document).ready(function() {
  $('#yourDiv').on('mousedown', function(e) {
      e.preventDefault();
  });
}); 
```

在我的情况下，我想禁止用户在输入中放置文本，所以我使用“drop”而不是“mousedown”。

```
$(document).ready(function() {
  $('input').on('drop', function(event) {
    event.preventDefault();
  });
}); 
```

相反 event.preventDefault() 你可以返回 false。[这就是区别。](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)

和代码：

```
$(document).ready(function() {
  $('input').on('drop', function() {
    return false;
  });
}); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-10-29T10:30:41.150

这是我经常在我的 Web 应用程序中使用的小提琴：

```
$('body').on('dragstart drop', function(e){
    e.preventDefault();
    return false;
}); 
```

它将防止您的应用程序上的任何内容被拖放。根据游览需要，您可以将*主体*选择器替换为任何不应拖动儿童的容器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-17T07:47:44.940

试试这个

```
$('#id').on('mousedown', function(event){
    event.preventDefault();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-29T09:49:29.357

对于`input`元素，[这个答案](https://bertrandg.github.io/html5-disable-drop-on-input/)对我有用。

我在 Angular 4 的自定义输入组件上实现了它，但我认为它可以用纯 JS 实现。

HTML

```
<input type="text" [(ngModel)]="value" (ondragenter)="disableEvent($event)" 
(dragover)="disableEvent($event)" (ondrop)="disableEvent($event)"/> 
```

组件定义（JS）：

```
export class CustomInputComponent { 

  //component construction and attribute definitions

  disableEvent(event) {
    event.preventDefault();
    return false;
  }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-26T14:16:49.827

使用@SyntaxError 的答案，[https: //stackoverflow.com/a/13745199/5134043](https://stackoverflow.com/a/13745199/5134043)

我已经在 React 中做到了这一点；我能想到的唯一方法是将 ondragstart 和 ondrop 方法附加到 ref，如下所示：

```
 const panelManagerBody = React.createRef<HTMLDivElement>();
  useEffect(() => {
    if (panelManagerBody.current) {
      panelManagerBody.current.ondragstart = () => false;
      panelManagerBody.current.ondrop = () => false;
    }
  }, [panelManagerBody]);

  return (
    <div ref={panelManagerBody}> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-09-30T10:02:35.260

我就把它留在这里。在我尝试了一切之后帮助了我。

```
 $(document.body).bind("dragover", function(e) {
        e.preventDefault();
        return false;
   });

   $(document.body).bind("drop", function(e){
        e.preventDefault();
        return false;
   }); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-03T13:20:12.880

问题很老，但回答永远不会太晚。

```
$(document).ready(function() {
  //prevent drag and drop
  const yourInput = document.getElementById('inputid');
  yourInput.ondrop = e => e.preventDefault();

  //prevent paste
  const Input = document.getElementById('inputid');
  Input.onpaste = e => e.preventDefault();
}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-21T10:44:12.970

您可以简单地在元素本身上使用 draggable="false" ，否则您可以放置

```
on-mousedown="preventDefaultDrag"
...
preventDefaultDrag: function(ev) {
   ev.preventDefault();
}, 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2015-08-27T05:04:31.180

这个 JQuery 为我工作：-

```
$(document).ready(function() {
  $('#con_image').on('mousedown', function(e) {
      e.preventDefault();
  });
}); 
```

# excel - 需要 Excel VBA 的最佳简短示例

> ID：704572
> 
> 赞同：8
> 
> 时间：2009-04-01T08:24:22.663
> 
> 标签：excel, vba

这是给乔尔的……

我正在寻找向 Excel 用户（没有编程经验）演示如何学习一些 Excel VBA 可以使他们使用 Excel 的生活更轻松的方法。

首先的想法是使用一个复制电子表格手动调整的示例，例如所有数据的单击条件格式。例如：根据用户输入阈值加上一些其他派生数据（例如当前工作周），将所有数字突出显示为红色、橙色或绿色。

我希望这样一个简短的 VBA 示例对于以前从未编写过一行代码的人来说应该不会太难掌握，并希望为尝试学习一点 Excel VBA 提供一个案例。

但是，在此示例中，编写代码所花费的时间并不比在 Excel 中手动应用条件格式快得多。所以我很想知道社区中是否有人有更优雅的例子来展示使用 Excel VBA 的优势。

理想的示例应具有以下特征：

1.  显着节省时间（大 T，其中 T = 手动程序时间/编码时间）。
2.  非抽象的日常电子表格示例。
3.  手动无法*轻松实现的最终结果。*
4.  可通过简短的基本 VBA 代码实现。

请记住，目标受众正在迈出编程的第一步。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-01T14:20:50.343

如果可以的话，看他们使用 Excel 1/2 小时，你会找到绝佳的机会。当他们打开那个电子表格时，自动调整所有列，将 col A 格式化为日期，将 col J 右对齐，删除第 2 到 5 行，并将打印方向更改为横向，然后您就找到了赢家。让他们再做一次，但要打开宏记录器。然后重播宏记录器。

通过使用他们在现实生活中使用的东西，它会产生更大的影响。

第一次拍摄时，您不必每天为他们节省 1/2 小时。为他们将使用的东西节省 30 秒的苦差事，他们就会开始考虑他们想要自动化的所有东西。根据我的经验，他们很快就会过火。很快，他们就会希望 Excel 填写 Web 表单、导入信息并为他们提供咖啡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T08:55:33.323

使用 VBA 创建您自己的“函数”，您可以像使用工作表中的另一个函数一样使用它。

您可以做一些在普通 Excel 中无法实现的事情，或者很难实现或重用的事情。

一个例子：

在 VBA 中创建一个新模块，添加如下代码：

```
Public Function SizeOfFile(a As String)
   SizeOfFile = VBA.FileLen(a)
End Function 
```

您现在可以在单元格的公式中使用 SizeOfFile。

如果单元格 A1 包含文件名，则 B1 填充`=SizeOfFile(A1)`以获取大小。

**还**

您可以显示录制（和编辑）宏，以重复您经常执行的步骤。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-10-04T02:00:17.567

**目标受众中的人是超级用户吗？**

如果是这样，如何使用外部引用组合来自多个工作簿的数据？我不确定外部引用是否是最好的方法，我不确定这对于 VBA 新手来说会有多困难，但这就是我过去最终做的事情。

**示例 1**

有许多遵循命名约定的 excel 文件：

```
 c:\data1.xls
  c:\data2.xls
  c:\data3.xls 
```

我希望能够在一列中输入 ID 号，并有一个 VBA 为我获取所有其他列的数据。我选择使用*外部引用*来执行此操作，因为这样我就不必担心打开和关闭文件以及担心这些文件是否存在。

我希望结果看起来像这样：

```
 id     data      hyperlink
  1      extRefA1  c:\data1.xls
  3      extRefA1  c:\data3.xls
  500    extRefA1  c:\data500.xls 
```

我不需要 VBA 来制作超链接，但我找不到一种简单的方法来制作没有 VBA 的外部引用。我尝试使用 INDIRECT，但必须打开引用的工作簿才能使 INDIRECT 工作。因此，我使用 VBA 创建外部引用。

**示例 2**

这一个类似于示例 1，但我必须组合不同的图表数据。

每个 excel 文件中的数据在列中：

```
 X    Y
  1    5
  2    10
  3    5
  4    60 
```

我想要行中的组合图表数据：

```
 1    2     3    4
  data1    5    10    5    60
  data3    30   60    4    2
  data500  25   45    20   5 
```

因此，我制作了一个 VBA，将包含*外部引用的**公式数组*放入TRANSPOSE 中。

 *data1 公式数组看起来像这样：

```
 =TRANSPOSE('c:\[data1.xls]Sheet1'!$B$2:$B$5) 
```

我不知道其他人如何使用 Excel 和 VBA，但事实证明这些对我非常有用。

弗朗西斯

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T12:28:47.867

在我加入一家公司后，我第一次尝试 VBA 并看到我的一个新团队每天早上花费 30 分钟从大约 1,000 项需要以不同方式自动过滤以产生所需计数的项目列表中编制一份报告。使用 VBA 混了几个小时后，只需单击按钮和大约一秒钟即可完成任务。

像这样涉及循环的任何事情都将满足您节省大量时间的第一个标准。也许是一项涉及从 200 个电话号码或地址列表中提取区号或门牌号的任务？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-12-16T04:33:19.513

这是这个问题的一个很棒的 msdn 链接。 [http://msdn.microsoft.com/en-us/library/aa203714(office.11​​).aspx](http://msdn.microsoft.com/en-us/library/aa203714(office.11).aspx)

拥有短片所需的一切。

# iphone - 在 Web 应用程序上唯一标识 iPhone

> ID：704591
> 
> 赞同：3
> 
> 时间：2009-04-01T08:31:11.447
> 
> 标签：iphone, language-agnostic, identification

我有一个网站，我想向我们的一些公司 iPhone 用户开放它，但没有他们的干预：

*   我在我们的 webapp 中输入他们的 iPhone “序列号”
*   当他们连接到 webapp 时，如果他们的“序列号”被识别，他们可以通过，否则，访问被拒绝。

有这样的“序列号”吗？

我曾考虑过一条带有唯一链接的短信，该链接将放置一个 cookie。如果 cookie 存在，他们可以进入。但如果他们删除 cookie，则需要致电我们以获取新的唯一链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T22:22:29.013

查看 UIDevice 类的 uniqueIdentifier 属性。这可能是你最好的选择。

# java-me - 如何使用 j2me 在手机中保存数据？

> ID：704593
> 
> 赞同：2
> 
> 时间：2009-04-01T08:31:43.130
> 
> 标签：java-me

如何使用j2me将数据保存在手机中？
我想要描述如何使用 j2me 在手机中存储数据的代码示例。
进一步如何授予手机读/写的访问权限？

我正在使用 netbeans 6.5 和摩托罗拉 L6 手机。
谁能告诉我一个代码示例，说明如何存储、授予读/写权限？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-01T08:57:18.967

您可以将数据保存在[记录管理存储](https://web.archive.org/web/20111108172857/http://www.ibm.com/developerworks/library/wi-rms/)中。虽然有一些限制。最大的一个是只有您的应用程序才能读取数据。

另一种方法是使用 FileConnection API，它提供对设备文件系统的访问。所有现代手机都应该支持它。但是，除非 Midlet 被签名，否则用户将被唠叨以授予访问文件的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-04T12:50:42.117

使用 Sun Wireless Toolkit 中的 PDAPDemo 示例代码。

上次我检查它有一些错误处理错误，但它很容易修改。

它将告诉您应用程序可以在手机和任何最终存储卡上读取和写入的手机文件系统的哪些部分。

# c# - 在代码后面的 ASP.net 中为 GridView 创建排序的代码？

> ID：704600
> 
> 赞同：0
> 
> 时间：2009-04-01T08:33:05.593
> 
> 标签：c#, asp.net, gridview, sorting

这是我的 Page_Load 事件代码

```
 OdbcConnection myConnection;
            DataSet dataSet = new DataSet();
            OdbcDataAdapter adapter;

            //making my connection
            myConnection = new OdbcConnection(ConfigurationManager.ConnectionStrings  ["ODBC_ConnectionString"].ConnectionString);

            adapter = new OdbcDataAdapter("SELECT * from Company", myConnection);

            adapter.Fill(dataSet, "MyData");

            GridView1.DataSource = dataSet;
            Session["DataSource"] = dataSet;
            GridView1.DataBind(); 
```

这是我的 PageIndexChanging 事件代码，一切正常。

```
 DataSet ds = new DataSet();

            if (Session["DataSource"] != null)
                ds = ((DataSet)Session["DataSource"]);

            GridView1.DataSource = ds;
            GridView1.PageIndex = e.NewPageIndex;
            this.GridView1.DataBind(); 
```

现在我需要什么代码来创建排序事件？

```
protected void GridView1_Sorting(object sender, GridViewSortEventArgs e)
    {
        ?????????????????????????
    } 
```

艾蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T15:42:12.800

我通常这样做：

```
 public string SortField {
            get {
                return (string) ViewState["_sortField"];
            }
            set {
                ViewState["_sortField"] = value;
            }
        }
        public string SortDir {
            get {
                return (string) ViewState["_sortDir"];
            }
            set {
                ViewState["_sortDir"] = value;
            }
        } 
```

将您的代码进行数据绑定放入另一个方法，因为您必须在排序、分页和页面首次加载时调用它。例如，将其称为 DoDataBind()。然后你在 DoDataBind()

```
DataTable dt = yourDataSet.Tables[0];
dt.DefaultView.Sort = SortField + " " + SortDir;

GridView1.DataSource = dt.DefaultView;
GridView1.DataBind(); 
```

然后您的活动如下所示：

```
protected void GridView1_Sorting(object sender, GridViewSortEventArgs e) {

            if (e.SortExpression == SortField && SortDir != "desc") {
                SortDir = "desc";
            }
            else {
                SortDir = "asc";
            }

            SortField = e.SortExpression;

            DoDataBind();
        } 
```

然后在您的 aspx 页面中，您需要指定 SortExpression 是什么。例如这样的：

```
<asp:BoundField DataField="FIRSTNAME" 
HeaderText="First Name" SortExpression="FIRSTNAME" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T08:53:05.823

您可以使用以下方法过滤和排序数据集：

```
ds.Tables[0].Select(filterExp, sortExp, etc...); 
```

# c++ - 我正在尝试返回一个字符数组，但是我只返回了第一个字母

> ID：704602
> 
> 赞同：2
> 
> 时间：2009-04-01T08:33:43.593
> 
> 标签：c++, arrays, string, pointers, return-value

我正在为学校做一件小事。经过数小时的研究，以及大量的错误和逻辑返工，我几乎完成了我的小程序。

我正在尝试获取用户输入，将其存储到字符串中，从字符串中获取一个字符数组（不要问为什么，我只需要将它放入一个字符数组中），然后获取用户输入的短语的相反顺序进入。这是我的代码：

```
#include "stdafx.h"
#include <iostream>
#include <String>
#include <cstring>

using namespace std;
using namespace System;
#pragma hdrstop

char* getCharArray(string);

string reversePhrase( int, char* );

void main(void)
{
    string sPhrase = "";
    int sSize = 0;
    string sReversed = "";
    char* cPhrase = NULL;

    cout << "Welcome to the You Type It & We'll Reverse it! [Version 1.0] " << endl;
    cout << "This program will reverse your phrase, and count how many characters are in it!" << endl;
    cout << "To begin just enter a phrase." << endl;
    cout << "Enter a phrase: ";

    getline( cin, sPhrase);

    sSize = sPhrase.length();

    cout << endl;

    cPhrase = getCharArray(sPhrase);

    sReversed = reversePhrase( sSize, cPhrase );

    cout << sReversed;

    system("pause");

}

string reversePhrase(int size , char* cPhrase)
{
    string sReversed = "";
    int place = size;

    for ( int i = 0; i < size ; i ++ )
    {
        sReversed.append(1, cPhrase[place]);
        cout << "Current string: " << sReversed << endl;
        cout << "Current character: " << cPhrase[place] << endl;
        place--;
    }

    return sReversed;
}

char* getCharArray(string sPhrase)
{
    int size = 1;
    size = sPhrase.length();

    char* cArray = NULL;
    cArray = new char[size];

    for (int i = 0 ; i < size ; i++)
    {
        cArray[size] = sPhrase.at(i);
    }

    return cArray;
} 
```

当我在程序中输入“所有权”时，这就是我得到的返回：

![错误截图](https://i.stack.imgur.com/tJOHZ.jpg)

这几乎就像我的字符数组在使用所有字符之前就被垃圾收集了。这可能是一个简单的解决方法，但我只是不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T08:43:13.897

尝试像这样重写 getCharArray

```
 char* getCharArray(string sPhrase)
    {
        int size = 1;
        size = sPhrase.length();

        char* cArray = NULL;
        cArray = new char[size+1]; // NOTE

        for (int i = 0 ; i < size ; i++)
        {
            cArray[i] = sPhrase.at(i); // NOTE
        }

    }

    cArray[size]=0;  // NOTE

   return cArray;
  } 
```

请注意，循环中的赋值现在使用索引变量。此外，您需要在数组中分配一个额外的字符来设置字符串的空终止符，然后您需要在最后设置它。

您还需要考虑在某个时候释放数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T08:37:22.913

错误在这一行：

```
cArray[size] = sPhrase.at(i); 
```

那`size`应该是你的循环索引。

您可能应该考虑使用`std::string`更多，而不是在不需要时使用字符数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T08:42:47.753

为什么要使用`char`数组？它不仅没用——它使代码大大复杂化（你的函数的使用更加困难，而且你忘记了释放由`new`! 分配的内存）。为什么不只具有以下功能：

```
string reverse(string const& input); 
```

（通过 const 引用而不是按值传递参数可以为您节省一份副本！）

事实上，实现这个函数只需要一行使用`string`类的特性（它的一个构造函数需要两个迭代器）：

```
string reverse(string const& input) {
    return string(input.rbegin(), input.rend());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T08:52:12.270

reversePhrase 也不正确。尝试这样的事情：

```
string reversePhrase(int size , char* cPhrase)
{
    string sReversed = "";
    sReversed.resize(size);
    int place = size - 1;

    for ( int i = 0; i < size ; i ++ )
    {
        sReversed [i] = cPhrase[place];
        cout << "Current string: " << sReversed << endl;
        cout << "Current character: " << cPhrase[place] << endl;
        place--;
    }

    return sReversed;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T10:19:22.747

首先，以 -1 开始数组。之后，使用`for`带有 -1 的循环并在循环内递增。然后，您可以获得数组的第一个元素。

# .net - 错误记录 FoxPro 与 .Net

> ID：704604
> 
> 赞同：1
> 
> 时间：2009-04-01T08:33:53.733
> 
> 标签：.net, logging

过去——Fred Flintstone 还穿着短裤——在 FoxPro 中，您可以通过一个命令将内存中的所有内容存储到表中的 MEMO 字段中。我不知道其他实际用途，也不知道它的智慧，但我喜欢在 'AirdisplacementDevice Implements ManureSpreader' 时使用它：当发生错误时，您会将内存存储在备忘录字段中。然后，您可以使用 RESTORE FROM，加载存储的内存并以所有血腥细节重新制定事件并开始调试。我想知道，在 .Net 中是否有一种“简单”的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-10-06T22:02:02.440

Net 完全一样，但是您可以使用反射来获取有关属性等的详细信息，并且您可以从堆栈跟踪中获取访问权限。我不知道有什么方法可以隐藏当前状态，然后在调试时如何加载这些值。

# ruby - 如何使用不同的模板生成 Ruby 文档？

> ID：704606
> 
> 赞同：4
> 
> 时间：2009-04-01T08:34:17.697
> 
> 标签：ruby, documentation-generation, rdoc

我想用[Hanna](http://github.com/mislav/hanna/tree/master)模板生成[Ruby 文档。](http://www.ruby-doc.org/core-1.8.7/index.html)

怎么做？或者如果有的话我在哪里可以下载？

使用

`rdoc -o ~/doc --inline-source --line-numbers --format=html --template=hanna`

给我缺少方法的文档。似乎它不会生成用 C 编写的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-28T09:28:54.870

在您的 ruby​​ 源目录中，运行

汉娜 -o --inline-source --line-numbers --format=html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-08T00:00:06.897

宝石安装米斯拉夫汉娜

然后只需按照自述文件中的步骤操作：

[http://github.com/mislav/hanna/blob/8eaeb062fae276b19eb86fa302e9ee446a06eef8/README.markdown](http://github.com/mislav/hanna/blob/8eaeb062fae276b19eb86fa302e9ee446a06eef8/README.markdown)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-04-22T00:17:02.237

如果您使用的是 rvm，则此方法有效：

```
$ gem install hanna
$ cd ~/.rvm/src/ruby-1.8.6-p383
$ hanna -o doc/api --inline-source --line-numbers --fmt=html
$ open doc/api/index.html 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-20T02:57:11.570

原来你只需要获取[Ruby 源代码](ftp://ftp.ruby-lang.org/pub/ruby/)，解压它，然后在源目录中，运行如下代码：

```
rdoc -o <output path> --inline-source --line-numbers --format=html --template=hanna 
```

# php - 如何将 nuSOAP 用于具有多个命名空间的消息

> ID：704608
> 
> 赞同：7
> 
> 时间：2009-04-01T08:34:26.977
> 
> 标签：php, soap, php4, nusoap

我正在尝试使用在消息中使用超过 1 个命名空间的 nuSOAP（因为我在这里绑定到 PHP4）访问 WebService。那可能吗？

示例请求消息如下所示：

```
<soapenv:Envelope ...
  xmlns:ns1="http://domain.tld/namespace1"
  xmlns:ns2="http://domain.tld/namespace2">
  <soapenv:Header/>
  <soapenv:Body>
    <ns1:myOperation>
      <ns2:Person>
        <ns2:Firstname>..</ns2:Firstname>
        ..
      </ns2:Person>
      <ns1:Attribute>..</ns1:Attribute>
    </ns1:myOperation>
  </soapenv:Body>
</soapenv:Envelope> 
```

我试图遵循：

```
$client = new nusoap_client("my.wsdl", true);
$params = array(
  'Person' => array(
    'FirstName'  => 'Thomas',
    ..
   ),
   'Attribute' => 'foo'
 );

 $result = $client->call('myOperation', $params, '', 'soapAction'); 
```

希望 nuSOAP 会尝试将这些名称与正确的名称空间和节点匹配。然后我尝试使用soapval() 来生成元素及其命名空间——但如果我调用一个操作，nuSOAP 会创建以下请求：

```
<SOAP-ENV:Envelope ...>
  <SOAP-ENV:Body>
    <queryCCApplicationDataRequest xmlns="http://domain.tld/namespace1"/>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

所以在“匹配”阶段出现了问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-09T12:49:11.690

在尝试了匹配之后，我找到了两种可能的解决方案：

1) 不要使用 WSDL 创建 nusoap_client 和 soapval() 来创建消息 这样做的缺点是消息包含大量开销（命名空间在每个元素中定义）。不太好。

2) 不要依赖参数的匹配，而是在 xml 中构造您的回复并将前缀的所有定义放在第一个元素中 - 例如

```
$params = "<ns1:myOperation xmlns:ns1="..." xmlns:ns2="...">
      <ns2:Person>
        <ns2:Firstname>..</ns2:Firstname>
        ..
      </ns2:Person>
      <ns1:Attribute>..</ns1:Attribute>
    </ns1:myOperation>"; 
```

仍然不是一个很好的解决方案，但它有效:-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-06-08T21:41:11.237

在 Irwin 的帖子的基础上，我手动创建了 xml，然后让 nusoap 完成其余的工作。我的虚拟主机没有 php soap 扩展，所以我不得不使用 nusoap，而我尝试使用的 Web 服务需要每个标签上的命名空间（例如，在我的示例中的用户名和密码）。

```
require_once('lib/nusoap.php');

$client = new nusoap_client('https://service.somesite.com/ClientService.asmx');
$client->soap_defencoding = 'utf-8';
$client->useHTTPPersistentConnection(); // Uses http 1.1 instead of 1.0
$soapaction = "https://service.somesite.com/GetFoods";

$request_xml = '<?xml version="1.0" encoding="utf-8" ?>
<env:Envelope xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:env="http://schemas.xmlsoap.org/soap/envelope/">
  <env:Body>
    <n1:GetFoods xmlns:n1="https://service.somesite.com">
      <n1:username>banjer</n1:username>
      <n1:password>theleftorium</n1:password>
    </n1:GetFoods>
  </env:Body>
</env:Envelope>
';

$response = $client->send($request_xml, $soapaction, ''); 

echo '<h2>Request</h2><pre>' . htmlspecialchars($client->request, ENT_QUOTES) . '</pre>';
echo '<h2>Response</h2><pre>' . htmlspecialchars($client->response, ENT_QUOTES) . '</pre>';
echo '<h2>Debug</h2><pre>' . htmlspecialchars($client->getDebug(), ENT_QUOTES) . '</pre>'; 
```

然后我有一个错误说：

```
Notice: Undefined property: nusoap_client::$operation in ./lib/nusoap.php  on line 7674 
```

所以我走的是懒惰的路线，进入了 nusoap.php 并在第 7674 行之前添加了这段代码以使其满意：

```
 if(empty($this->operation)) {
        $this->operation = "";
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-12-14T01:06:35.660

另一个绕过这个问题的方法是修改 nusoap_client::call() 函数。在 nusoap.php 中的这一行（版本 1.123 中的 7359）旁边：

`$nsPrefix = $this->wsdl->getPrefixFromNamespace($namespace);`

我添加了这个：

```
$nsPrefix = $this->wsdl->getPrefixFromNamespace("other_ns_name"); 
```

它奏效了！因为我只需要这个库用于一个项目，所以我可以硬编码这个 hack。否则，我会挖掘更多并修改函数以接受数组而不是字符串作为命名空间参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-05T11:20:28.223

是的，我一直有同样的问题（通过谷歌找到你的 q！）我遇到了这个： [http ://www.heidisoft.com/blog/using-nusoap-consume-net-web-service- 10-min](http://www.heidisoft.com/blog/using-nusoap-consume-net-web-service-10-min) 这里，开发者在coe中创建消息的xml正文，然后使用nusoap提交。

# iphone - 如果可能，通过 XML 或 SQLite db 文件更新？

> ID：704610
> 
> 赞同：0
> 
> 时间：2009-04-01T08:34:59.847
> 
> 标签：iphone

我正在使用 UITableView 驱动的内容开发应用程序。

当前测试是使用大小为 100kb 的本地 XML 完成的。此信息应大约每 2 个月更新一次。流程正在读取预排序的 XML -> 转换为 NSDictionary -> UITableView

由于每次加载时解析 XML 都需要一些工作，加上表索引，排序和搜索看起来很笨拙。所以我有这个想法，将这些信息存储在 sqlite DB 文件中

我真正的问题是是否可以通过 http(s) 而不是 XML 下载整个 sqlite DB 文件来更新信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T13:05:37.247

我不明白这个问题...您在某处的服务器上有一个 sqlite 数据库，您想知道是否可以通过 http 下载？是的，当然，只需打开一个 NSURLConnection 并获取数据。

如果您想以某种方式**将**XML 从 http 源转换为 sqlite 数据库，那么您必须编写自己的自定义转换代码来获得正确的 SQL 语句——在 Cocoa 中没有自动的方法来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T22:09:26.037

你有几个选择...

*   您可以将这些内容保存在服务器 XML 上并即时构建数据库。
*   您可以使用预先设置的插入语句在服务器上发布文本文件。
*   你可以在服务器上有一个现成的数据库文件并下载它。

任何都可以...有些代码比其他代码多。

# c++ - 将文本文件读入类对象类型数组（C++）

> ID：704612
> 
> 赞同：0
> 
> 时间：2009-04-01T08:35:29.267
> 
> 标签：c++, class

所以我有一个类对象类型，myClass classType 作为一个全局对象。没有发生的是，宁愿拥有

```
// MyClass.h
{
  private:
    char FirstName;
    char LastName;
    char MiddleName;
    int ID;
    int Age;
};

// Globals
const int myIndex = 256;
myClass classType[ myIndex ];

int main()
{

   // assume preprocessors are included

   cout << "Enter File: ";
   cin  >> cArray;
   if ( !inFile.good() ) 
   {
     cout << "Wrong?" << endl;
   }
   inFile.open( cArray );
   while ( !inFile.eof() )
   {
     linecount++ // giving me 1 and not counting the file lines

 inFile.read( ( char * ) &myType[linecount], sizeof( myClass ) );

   }
} 
```

这就是我今天对 main 的大致印象。我还没有使用 myClass.cpp ！我的文本文件是这种格式：

名字姓氏身份证号码年龄...

调试后，我注意到没有检测到换行符，现在所有内容都在同一个索引上！就像我的增量没有工作或什么的..

我想增加文件中的行数。（不止一个）我试图修复行数（idx），希望能完全解决这个问题。

我上面写的我的私人成员、名字姓氏等在调试和拖动 myclasstype 时出现。我只需要使用适当的变量来获取它们。我只是希望 ifstream::read() 函数不会把我引向错误的方向。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-19T21:53:58.850

```
// MyClass.h
{
  private:
    char FirstName;
    char LastName;
    char MiddleName;
    int ID;
    int Age;
}; 
```

这个结构/类是什么？我猜它是myClass。无论如何 myClass 是没有意义的名字。

1.  FirstName/LastName/MiddleName 八字是首字母 - 这意味着名称是错误的 - 或者输入错误。您正在寻找的是八位 std::string 或 char *。
2.  传统上，ID 是第一个字段 - 如果需要的话。

``

```
// Globals
const int myIndex = 256;
myClass classType[ myIndex ]; 
```

根据经验 - 永远不要使用全局变量。你**会有**问题。

```
int main()
{

   // assume preprocessors are included

   cout << "Enter File: ";
   cin  >> cArray; 
```

什么是 cArray？

```
 if ( !inFile.good() ) 
```

inFile 在哪里定义？为什么要在对该流进行任何 IO 操作之前检查 IO 状态？

```
 {
     cout << "Wrong?" << endl;
   }
   inFile.open( cArray ); 
```

出色地。写起来不简单`ifstream inFile(cArray)`吗？

while ( !inFile.eof() ) { linecount++ // 给我 1 并且不计算文件行数

你要求溢出。如果文件有更多的 256 行怎么办？最糟糕的程序不会崩溃——它可能会写在一些未指定的地方。

```
 inFile.read( ( char * ) &myType[linecount], sizeof( myClass ) ); 
```

1.  除非必须，否则切勿使用二进制格式。它们很难调试。如果你有一个漂亮、简单的文本格式，你只需要一个文本编辑器来编辑测试输入文件。使用二进制你不能保证错误在程序中而不是在测试用例中。
2.  如果您*确实*使用二进制格式，请**不要**以这种方式阅读。实际上，您无法确定编译器是否没有更改偏移量。例如`ID`，通常会有 4 个字节的偏移量。但是编译器可以自由地对其进行优化。

    另外，您无法确定 and 的大小，`ID`除非`Age`它们大于 2 个字节。它们通常是 4，但在某些 64 位编译器上（恕我直言，这种方式在`int`== 单个字的情况下是正确的）可能是 8。将来可能是 16（如果有 128 位计算机）。您可能会认为永远不会有“768 K 对每个人都足够”（当时很多）。

如果您尝试以这种方式阅读文本

```
 }
} 
```

除非您需要验证输入（在这种情况下 iostreams 不是最好的工具）：

```
class person
{
public:
  person (const std::string &first_name,
          const std::string &last_name,
          const std::string &middle_name,
          int                id,
          int                age)
          : m_first_name(first_name),
            m_last_name(last_name),
            m_middle_name(middle_name,
            m_id(id),
            m_age(age) {}
private:
  std::string m_first_name, m_last_name, m_middle_name;
  int m_id, m_age;
};
// Lots of other code
std::vector<person> people;
while(...)
  {
    std::string first_name, last_name, middle_name;
    int id, age;
    in_file >> first_name >> last_name >> middle_name >> id >> age;
    person p(first_name, last_name, middle_name, id, age);
    people.push_back(p);
  } 
```

它可以缩短并且必须填充，但是： 1\. 使用漂亮的 C++ 功能，例如 STL（您不必记住索引或不必担心向量溢出） 2\. 它使用文本格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T08:45:07.513

*   我建议使用 boost::serialization 来实现相同的目标。
*   为什么在读取一行之前增加行数？您未初始化 myType 的第一个元素。
*   如果您使用的是文本文件格式，为什么要使用读取功能？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T08:52:00.633

几点；

*   什么是 cArray？
*   您必须测试使用 is_open() 打开的文件
*   eof() 函数只会在您阅读完某些内容后检测文件的结尾
*   您应该使用 std::getline() 来读取行
*   正如评论中指出的那样，您班级中的名称是单个字符，它们应该是 std::strings

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T12:54:05.277

如果您的数据来自文本文件，则使用 read(buf, size) 方法将不起作用。它将用从输入中读取的任何字节填充 buf。您不能以这种方式“填充”内存中某处的对象。read(buf, size) 仅适用于二进制数据。

我会重载流操作符 >> 来进行文本数据的实际解析。输出将存储在作为引用传递的对象中：

`istream& operator>> (istream& in, MyClass& val );`

# c++ - 编译错误：cpumask.h：“and”可能不会出现在宏参数列表中

> ID：704614
> 
> 赞同：3
> 
> 时间：2009-04-01T08:38:48.463
> 
> 标签：c++, gcc

我正在尝试将项目从旧的 linux 平台移动到 kubunutu 9.04。现在使用 gcc 4.3.3 编译时出现此错误：

```
/usr/src/linux-headers-2.6.28-11-generic/include/linux/cpumask.h:600:37: error: "and" may not appear in macro parameter list 
```

如果我理解该消息正确，则不允许使用“and”作为宏参数，因为它是“保留命令”。关于这个的两个问题：

1.  这怎么可能？我无法想象linux头文件中有这样的错误......我之前做错了什么吗？我尝试了#undef，但这无济于事。
2.  如何修复此错误？我必须更改 linux 头文件是不可能的，可以吗？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T08:42:37.113

linux 头文件是 C 头文件，而不是 C++。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-03T20:59:15.167

我相信问题在于它`and`是[C++ 中的关键字，而不是 C](http://www.georgehernandez.com/h/xComputers/Cs/ReservedKeywords.asp)（他们使用`&&`）。

内核人员有时将宏作为内联函数的替代方案。然而，有时他们需要宏，因为他们想做的事情必须在调用函数的范围内完成，而定义一个函数来做这件事是行不通的（例如，一个宏来找出当前函数的名称）。

假设所讨论的宏确实是假的内联函数，则可以编写自己的 .c 文件，其中只包含调用这些宏的函数，编译它，并通过`extern "C"`标头引用这些函数。您将获得相同的行为，但性能稍差（这不太可能成为问题）。

如果宏实际上必须是宏，那么最好的办法是手动编辑它们以符合 C++。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-06T02:16:22.287

# 定义 for_each_cpu_and(cpu, mask, and) - #define for_each_cpu_and(cpu, mask, and_deb)

找到了这个解决方案@ [http://www.linux.org.ru/forum/development/4797542](http://www.linux.org.ru/forum/development/4797542)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T08:43:28.483

如果您还显示有问题的行，这将有所帮助。也许这完全取决于上下文，如果您在包含标头之前做了一些疯狂的事情，编译器可能会感到困惑并生成不明显的错误消息。

在某些情况下，“and”确实是一个保留字，如果它是 C++——只有内核开发人员不会太在意，因为内核专注于 C。

# emacs - Emacs shell 出了点问题

> ID：704616
> 
> 赞同：31
> 
> 时间：2009-04-01T08:39:11.397
> 
> 标签：emacs

我使用 Ubuntu8.10 和 emacs-snapshot。在 emacs 上运行 shell-mode 并输入“ls”会显示转义码：

[截图 http://lh3.ggpht.com/_os_zrveP8Ns/SdMmohKNjmI/AAAAAAADB4/VlKpr5H_7ZA/s512/screen.png](http://lh3.ggpht.com/_os_zrveP8Ns/SdMmohKNjmI/AAAAAAAADB4/VlKpr5H_7ZA/s512/screen.png)

我怎样才能得到我期望的输出？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-04-01T09:45:41.830

您可以使用支持颜色的[AnsiTerm](http://www.emacswiki.org/emacs/AnsiTerm)，也可以为普通 shell启用[AnsiColor ：](http://www.emacswiki.org/emacs/AnsiColor)

```
(autoload 'ansi-color-for-comint-mode-on "ansi-color" nil t)
(add-hook 'shell-mode-hook 'ansi-color-for-comint-mode-on) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-01T09:44:02.457

此外，您可以选择另一个 shell： `M-x term`或`M-x eshell`. 前者提供了一个更接近于真实终端仿真器的界面，而不是`shell-mode`（一旦你启动它，你可以退出模式`C-c C-j`并再次进入`C-c C-k`）。后者是用 Elisp 编写的 shell 实现（您可以使用常见的 shell 命令以及评估 Lisp 代码）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-01T15:47:42.130

扩展[vatine](https://stackoverflow.com/users/34771/vatine)的答案，您可以在 .cshrc (.tcshrc/.bashrc) 中添加它，并检查环境变量[INSIDE_EMACS](http://www.gnu.org/software/emacs/manual/html_node/emacs/Interactive-Shell.html)。

例如（来自我的 .tcshrc）：

```
if ( $?INSIDE_EMACS ) then
   alias l 'ls --color=never'
endif 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-08-10T19:57:56.737

Mx ansi-color-for-comint-mode-on

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-01T09:03:00.777

问题是“l”正在尝试为输出着色，而 emacs 没有任何输出。尝试以下操作：

```
$ unalias l
$ 别名 l ls --color=never

```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-11-21T14:56:04.380

我将我的包裹`alias ls ='ls --color=auto'`在 ~/.bashrc 中：

```
case "$TERM" in
xterm*|rxvt*)
    if [ -x /usr/bin/dircolors ]; then
        alias ls='ls --color=auto'
        ...
    fi
    ;;
*)
    ;;
esac 
```

这将禁用`color=auto`在 emacs 中的使用。

# jquery - SharePoint 页面中的选项卡式内容

> ID：704618
> 
> 赞同：1
> 
> 时间：2009-04-01T08:40:20.240
> 
> 标签：jquery, sharepoint

我需要为网页上显示的内容创建选项卡，这样用户就不必垂直滚动来阅读所有内容。

jQuery 有没有办法自动将页面内容分成块并将其包装到选项卡中？我确定我曾经在某个地方看到过什么……</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T08:50:27.797

jQuery UI[选项卡](http://docs.jquery.com/UI/Tabs)插件是您所需要的。

例子：

```
<script>
$(document).ready(function() {
    $('#example').tabs();
});
</script>

<div id="example">
     <ul>
         <li><a href="ahah_1.html"><span>Content 1</span></a></li>
         <li><a href="ahah_2.html"><span>Content 2</span></a></li>
         <li><a href="ahah_3.html"><span>Content 3</span></a></li>
     </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T13:35:41.153

我正在尝试添加 WebPartZone，以便每个选项卡中可以有多个 WebPart。

# java - org.eclipse.swt.widgets.Composite 上的字体在 Linux 上被弄乱了

> ID：704621
> 
> 赞同：2
> 
> 时间：2009-04-01T08:41:37.850
> 
> 标签：java, linux, fonts, eclipse-plugin, swt

我扩展了 org.eclipse.swt.widgets.Composite 并在其上创建了许多小部件（标签、表格、文本等）。我面临的问题是标签的文本在 Linux 上被截断，而在 Windows 上看起来很好。当我将 linux 的字体更改为 gothic 时，截断会少一些，但仍然存在。有没有办法使 windows 和 linux 显示同质化。在这种情况下，在 linux 中使用的最佳字体可能是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T20:56:25.260

更有可能与我刚刚游说重新打开的这个 Eclipse 错误有关：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=151322](https://bugs.eclipse.org/bugs/show_bug.cgi?id=151322)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T10:24:19.443

听起来您使用的是绝对定位而不是[动态布局](http://www.eclipse.org/articles/article.php?file=Article-Understanding-Layouts/index.html)。*（如果不是这种情况，也许您可​​以发布代码来演示问题）。*使用动态布局应确保调整控件的大小以适应其内容。*（如果您曾经翻译过产品，它们也很棒，因为这样您就不必为每种语言重新调整每个对话。）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T10:36:07.417

为了完成 McDowel 的回答，还有一个与 Linux 检查包装标签的方式相关的**[错误：](https://bugs.eclipse.org/bugs/show_bug.cgi?id=192365&x=0&y=0&query_format=specific&order=relevance+desc&bug_status=__open__)**

![替代文字](https://bugs.eclipse.org/bugs/attachment.cgi?id=90275)

自 3.4M7 起已修复。

即使它可能与您的情况无关，但了解您正在使用的 eclipse 版本以及是否可以使用最新版本（如 3.5M6）重现您的错误会很有用

# sql-server - 从 Solaris 访问 SQL Server

> ID：704631
> 
> 赞同：0
> 
> 时间：2009-04-01T08:44:13.037
> 
> 标签：sql-server, odbc, solaris

我发现了可以在这里使用的freeTDS，但是对其在生产环境中的稳定性存在疑问。除了使用 ODBC 驱动程序之外，还有其他方法可以与 Solaris 中的 MSSQL Server 交互吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T16:16:34.137

不知道还有什么办法。

我们在生产环境中使用 unixODBC + freeTDS + DBD::Sybase。设置它可能很繁琐，但我们在稳定性方面没有问题。

可以直接使用 FreeTDS 并绕过 unixODBC。

# fluent-nhibernate - 如何在流利的 nhibernate 中覆盖约定的级联规则

> ID：704635
> 
> 赞同：5
> 
> 时间：2009-04-01T08:45:35.780
> 
> 标签：fluent-nhibernate

我有两节课

```
public class Document 
{ 
    public virtual int Id { get; set; } 
    public virtual IList<File> Files { get; set; } 
} 
public class File 
{ 
    public virtual int Id { get; protected set; } 
    public virtual Document Document { get; set; } 
} 
```

遵循以下约定：

```
public class HasManyConvention : IHasManyConvention 
{ 
    public bool Accept(IOneToManyPart target) 
    { 
        return true; 
    } 
    public void Apply(IOneToManyPart target) 
    { 
        target.Cascade.All(); 
    } 
} 
```

和这些映射覆盖

```
public class DocumentMappingOverride : IAutoMappingOverride<Document> 
{ 
    public void Override(AutoMap<Document> mapping) 
    { 
        mapping.HasMany(x => x.Files) 
            .Inverse() 
            // this line has no effect
            .Cascade.AllDeleteOrphan(); 
    } 
} 

public class FileMappingOverride : IAutoMappingOverride<File> 
{ 
    public void Override(AutoMap<File> mapping) 
    { 
        mapping.References(x => x.Document).Not.Nullable(); 
    } 
} 
```

我知道我需要为 Document 制作一个 IClassConvention 来更改级联行为，但是我无法让它工作！如果我这样做：

```
public class DocumentConvention : IClassConvention 
{ 
    public bool Accept(IClassMap target) 
    { 
        return target.EntityType == typeof(Document); 
    } 
    public void Apply(IClassMap target) 
    { 
        target.SetAttribute("cascade", "all-delete-orphan"); 
    } 
} 
```

我得到：“未声明'级联'属性。”

如果我这样做：

```
public class DocumentConvention : IClassConvention 
{ 
    public bool Accept(IClassMap target) 
    { 
        return target.EntityType == typeof(Document); 
    } 
    public void Apply(IClassMap target) 
    { 
        target.HasMany<Document, File>(x => x.Files) 
            .Inverse() 
            .Cascade.AllDeleteOrphan(); 
    } 
} 
```

然后我得到：

```
"Duplicate collection role mapping Document.Files" 
```

所以我补充说：

```
mapping.IgnoreProperty(x => x.Files); 
```

到我的文档映射，但文件总是空的。我究竟做错了什么？如何覆盖单个 HasMany 关系的级联规则？谢谢安德鲁

[Ps 很抱歉这个](http://groups.google.com/group/fluent-nhibernate/browse_thread/thread/2decca3efff52225)交叉帖子，但我需要尽快解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-07T16:59:26.587

我知道这是很久以前的事了（在计算机时代），你可能已经解决了这个问题。如果您没有或有类似问题的其他人看到这个，这里是：

我认为您需要创建一个实现`IHasManyConvention`. `IClassConvention`修改`IClassMap`（`<class>`元素）目标。`cascade`不是有效的属性，`<class>`因此可以解释第一个错误。在您第二次尝试时，您正在重新映射集合，从而导致“重复集合”错误。

`IHasManyConvention`目标 an `IOneToManyPart`，您应该可以调用它，`Cascade.AllDeleteOrphan()`或者`SetAttribute("cascade", "all-delete-orphan")`如果前者由于某种原因不起作用。

**编辑**

对不起，我错过了你已经有一个 IHasManyConvention。由于您只想覆盖一种类型的约定，因此您应该只更改该`Accept`类型的约定中的方法。取而代之的是`return true;`，拉入您的`DocumentConvention`:

```
return target.EntityType == typeof(Document); 
```

我相信`OneToManyPart.EntityType`引用包含实体类型（即`Document`）。

# c# - 使用 C# 通过 Gmail SMTP 服务器发送电子邮件

> ID：704636
> 
> 赞同：259
> 
> 时间：2009-04-01T08:45:39.273
> 
> 标签：c#, .net, email, smtp, gmail

[出于某种原因，对于“通过 Gmail 在 .NET 中发送电子邮件](https://stackoverflow.com/questions/32260/sending-email-in-c-net-through-gmail)”，接受的答案和任何其他答案都不适合我。为什么他们不工作？

更新：我已经尝试了另一个问题中的所有答案（接受的和其他的），但它们都不起作用。

我只想知道它是否适用于其他任何人，否则谷歌可能已经改变了一些东西（以前发生过）。

当我尝试使用的代码时`SmtpDeliveryMethod.Network`，我很快在 Send(message) 上收到一个 SmtpException。消息是

> SMTP 服务器需要安全连接或客户端未通过身份验证。

服务器响应是：

> 5.5.1 需要验证。了解更多信息”<——说真的，到此为止。

**更新：**

这是我很久以前提出的一个问题，公认的答案是我在不同项目中多次使用过的代码。

我采用了这篇文章和其他 EmailSender 项目中的一些想法，[在 Codeplex 创建了一个 EmailSender 项目](http://emailsender.codeplex.com/)。它专为可测试性而设计，并支持我最喜欢的 SMTP 服务，例如 GoDaddy 和 Gmail。

* * *

## 回答 #1

> 赞同：308
> 
> 时间：2009-04-02T00:41:36.620

CVertex，请务必检查您的代码，如果没有发现任何内容，请将其发布。我只是在我正在处理的一个测试 ASP.NET 站点上启用它，它可以工作。

实际上，在某些时候我的代码有问题。我没有发现它，直到我在控制台程序上有一个更简单的版本并看到它工作正常（你担心的 Gmail 端没有变化）。下面的代码就像您提到的示例一样工作：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net.Mail;
using System.Net;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            var client = new SmtpClient("smtp.gmail.com", 587)
            {
                Credentials = new NetworkCredential("myusername@gmail.com", "mypwd"),
                EnableSsl = true
            };
            client.Send("myusername@gmail.com", "myusername@gmail.com", "test", "testbody");
            Console.WriteLine("Sent");
            Console.ReadLine();
        }
    }
} 
```

我还结合使用了 web.config、 http: [//msdn.microsoft.com/en-us/library/w355a94k.aspx](http://msdn.microsoft.com/en-us/library/w355a94k.aspx)和代码（因为配置文件中没有匹配项`EnableSsl`：（））。

### 2021 更新

默认情况下，您还需要在 gmail 设置页面中启用“不太安全的应用程序”的访问权限：google.com/settings/security/lesssecureapps。如果您遇到异常“`服务器响应是：5.5.1 Authentication Required. - 感谢@Ravendarksky，这是必要的

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2011-02-08T09:51:49.623

**如果所有其他方法都失败**了，以下几乎可以肯定是您问题**的答案**：

 **我得到了完全相同的错误，事实证明谷歌的新密码强度测量算法已经改变，认为我当前的密码太弱，并且没有告诉我任何关于它的事情（甚至没有消息或警告）......我是如何发现这个的? 好吧，我选择更改密码以查看是否有帮助（尝试了其他所有方法均无济于事），当我更改密码时，它起作用了！

然后，作为一个实验，我尝试将我的密码改回我以前的密码，看看会发生什么，Gmail 实际上并没有允许我这样做，理由是“对不起，我们不能让你按照你的选择保存这个更改密码太弱”，不会让我回到我的旧密码。我从中发现它出错了，因为a）您需要每x个月更改一次密码或b）。正如我之前所说，他们的密码强度算法发生了变化，因此我的弱密码不被接受，即使他们在尝试登录任何地方时都没有说明这一点！这（第 2 号）是最有可能的情况，因为我的弱密码大约有 4 个月的历史，它让我可以在 Gmail 中使用它。

他们对此只字未提，这很糟糕，但这是有道理的。因为大多数被劫持的电子邮件都是使用 gmail 之外的软件登录的，我猜如果你想在 Gmail 环境之外使用 Gmail，你需要有一个更强的密码。

* * *

## 回答 #3

> 赞同：72
> 
> 时间：2012-03-05T19:48:48.247

除了上述其他故障排除步骤之外，我还想补充一点，如果您在您的 GMail 帐户上启用了双因素身份验证（也称为[两步验证），则](http://googleblog.blogspot.com/2011/02/advanced-sign-in-security-for-your.html)**必须生成一个应用程序专用密码并重新使用该密码生成的密码通过 SMTP 进行身份验证**。

要创建一个，请访问：[https](https://www.google.com/settings/) ://www.google.com/settings/并选择*授权应用程序和站点*以生成密码。

* * *

## 回答 #4

> 赞同：59
> 
> 时间：2015-02-19T09:18:21.340

```
Turn On Access For Less Secure Apps and it will work for all no need to change password. 
```

[链接到 Gmail 设置](https://www.google.com/settings/security/lesssecureapps)

![在此处输入图像描述](https://i.stack.imgur.com/2k0Wg.png)

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2011-05-22T14:35:41.547

我在从我的 gmail 帐户发送电子邮件时也遇到了一些问题，这是由于上述几种情况造成的。以下是我如何让它工作的摘要，同时保持它的灵活性：

*   首先设置您的 GMail 帐户：
    *   启用 IMAP 并声明正确的最大消息数[（您可以在此处执行此操作）](https://mail.google.com/mail/u/0/?shva=1#settings/fwdandpop)
    *   确保您的密码至少包含 7 个字符且强度高（根据 Google 的说法）
    *   确保您不必先输入验证码。您可以通过从浏览器发送测试电子邮件来完成此操作。
*   在 web.config（或 app.config，我还没有尝试过，但我认为让它在 Windows 应用程序中工作同样容易）中进行更改：

```
<configuration>
    <appSettings>
        <add key="EnableSSLOnMail" value="True"/>   
    </appSettings>

    <!-- other settings --> 

    ...

    <!-- system.net settings -->
    <system.net>
        <mailSettings>
            <smtp from="yourusername@gmail.com" deliveryMethod="Network">
                <network 
                    defaultCredentials="false" 
                    host="smtp.gmail.com" 
                    port="587" 
                    password="stR0ngPassW0rd" 
                    userName="yourusername@gmail.com"
                    />
                <!-- When using .Net 4.0 (or later) add attribute: enableSsl="true" and you're all set-->
            </smtp>
        </mailSettings>
    </system.net>
</configuration> 
```

```
Add a Class to your project:

Imports System.Net.Mail

Public Class SSLMail

    Public Shared Sub SendMail(ByVal e As System.Web.UI.WebControls.MailMessageEventArgs)

        GetSmtpClient.Send(e.Message)

        'Since the message is sent here, set cancel=true so the original SmtpClient will not try to send the message too:
        e.Cancel = True

    End Sub

    Public Shared Sub SendMail(ByVal Msg As MailMessage)
        GetSmtpClient.Send(Msg)
    End Sub

    Public Shared Function GetSmtpClient() As SmtpClient

        Dim smtp As New Net.Mail.SmtpClient
        'Read EnableSSL setting from web.config
        smtp.EnableSsl = CBool(ConfigurationManager.AppSettings("EnableSSLOnMail"))
        Return smtp
    End Function

End Class 
```

现在，每当您想发送电子邮件时，您只需致电`SSLMail.SendMail`：

例如在带有 PasswordRecovery 控件的页面中：

```
Partial Class RecoverPassword
Inherits System.Web.UI.Page

Protected Sub RecoverPwd_SendingMail(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.MailMessageEventArgs) Handles RecoverPwd.SendingMail
    e.Message.Bcc.Add("webmaster@example.com")
    SSLMail.SendMail(e)
End Sub

End Class 
```

或者您可以在代码中的任何位置调用：

```
SSLMail.SendMail(New system.Net.Mail.MailMessage("from@from.com","to@to.com", "Subject", "Body"}) 
```

我希望这对遇到这篇文章的人有所帮助！（我使用过 VB.NET，但我认为将其转换为任何 .NET 语言都很简单。）

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2011-06-05T09:54:52.373

哦...太神奇了...首先我无法发送电子邮件，因为任何原因。但是在我如下改变这两行的顺序之后，它就可以完美地工作了。

```
//(1)
client.UseDefaultCredentials = true;
//(2)
client.Credentials = new System.Net.NetworkCredential("username@gmail.com", "password"); 
```

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2010-09-26T09:04:47.257

```
Dim SMTPClientObj As New Net.Mail.SmtpClient
SMTPClientObj.UseDefaultCredentials = False
SMTPClientObj.Credentials = New System.Net.NetworkCredential("myusername@gmail.com", "mypwd")
SMTPClientObj.Host = "smtp.gmail.com"
SMTPClientObj.Port = 587
SMTPClientObj.EnableSsl = True
SMTPClientObj.Send("myusername@gmail.com","yourusername@gmail.com","test","testbody") 
```

如果您收到类似“SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应为：5.5.1 需要身份验证。了解更多信息”之类的错误，因为我在此之前得到，请确保`SMTPClientObj.UseDefaultCredentials = False`包含该行和该行应该在`SMTPClientObj.Credentials`.

我确实尝试以相反的方式切换这两行，并返回了*5.5.1 Authentication Required 错误*。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2009-08-26T06:28:58.137

问题不在于通过 gmail 发送的技术能力之一。这适用于大多数情况。如果您无法让机器发送，这通常是由于该机器没有至少一次通过控制人员的身份验证。

大多数用户面临的问题是谷歌决定一直更改出站限制。您应该始终将防御性代码添加到您的解决方案中。如果您开始看到错误，请降低发送速度并停止发送一段时间。如果您继续尝试发送，Google 有时会在您再次发送之前增加额外的延迟时间。

我在当前系统中所做的是在每条消息之间延迟 1.5 秒发送。然后，如果我遇到任何错误，请停止 5 分钟，然后重新开始。这通常有效，并且允许您发送到帐户的限制（最后我检查它是每天 2,000 的主要客户登录）。

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2016-04-11T03:56:30.047

解决此问题的简单步骤：

1) 登录您的 Gmail

2）导航到此页面[https://www.google.com/settings/security/lesssecureapps](https://www.google.com/settings/security/lesssecureapps)并设置为“打开”

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2010-10-01T23:50:15.153

我遇到了同样的问题，但事实证明是我的病毒防护阻止了传出的“垃圾邮件”电子邮件。关闭它允许我使用端口 587 通过 GMail 发送 SMTP 电子邮件

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2015-05-02T17:45:34.727

如果这里没有其他方法对您有用，您可能需要允许从第三方应用程序访问您的 gmail 帐户。这是我的问题。要允许访问，请执行以下操作：

1.  登录您的 gmail 帐户。
2.  访问此页面[https://accounts.google.com/DisplayUnlockCaptcha](https://accounts.google.com/DisplayUnlockCaptcha)并单击按钮以允许访问。
3.  访问此页面[https://www.google.com/settings/security/lesssecureapps](https://www.google.com/settings/security/lesssecureapps)并为不太安全的应用程序启用访问权限。

这对我有用，希望对其他人有用！

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2010-09-15T12:12:23.313

我不确定这需要哪个 .NET 版本，因为 eglasius 提到没有匹配的`enableSsl`设置（我使用的是 .NET 4.0，但我怀疑它可以在 .NET 2.0 或更高版本中工作），但这个配置正好适用于我（并且不需要您使用任何编程配置）：

```
<system.net>
  <mailSettings>
    <smtp from="myusername@gmail.com" deliveryMethod="Network">
      <network defaultCredentials="false" enableSsl="true" host="smtp.gmail.com" port="587" password="password" userName="myusername@gmail.com"/>
    </smtp>
  </mailSettings>
</system.net> 
```

您可能必须先在您的 Gmail 帐户上启用 POP 或 IMAP： [https ://mail.google.com/mail/?shva=1#settings/fwdandpop](https://mail.google.com/mail/?shva=1#settings/fwdandpop)

我建议先用普通的邮件客户端试试...

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2010-11-25T04:03:58.653

@Andres Pompiglio：是的，您必须至少更改一次密码。此代码可以正常工作：

```
//Satrt Send Email Function
public string SendMail(string toList, string from, string ccList,
    string subject, string body)
{

    MailMessage message = new MailMessage();
    SmtpClient smtpClient = new SmtpClient();
    string msg = string.Empty;
    try
    {
        MailAddress fromAddress = new MailAddress(from);
        message.From = fromAddress;
        message.To.Add(toList);
        if (ccList != null && ccList != string.Empty)
            message.CC.Add(ccList);
        message.Subject = subject;
        message.IsBodyHtml = true;
        message.Body = body;
        // We use gmail as our smtp client
        smtpClient.Host = "smtp.gmail.com";   
        smtpClient.Port = 587;
        smtpClient.EnableSsl = true;
        smtpClient.UseDefaultCredentials = true;
        smtpClient.Credentials = new System.Net.NetworkCredential(
            "Your Gmail User Name", "Your Gmail Password");

        smtpClient.Send(message);
        msg = "Successful<BR>";
    }
    catch (Exception ex)
    {
        msg = ex.Message;
    }
    return msg;
}
//End Send Email Function 
```

并且您可以使用以下方法调用该函数：

```
Response.Write(SendMail(recipient Address, "UserName@gmail.com", "ccList if any", "subject", "body")) 
```

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2013-07-08T00:03:35.323

我使用的是企业 VPN 连接。这就是我无法从我的应用程序发送电子邮件的原因。如果我断开与 VPN 的连接，它会起作用。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2010-08-03T22:34:40.980

我遇到了同样的错误（*“SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应为：5.5.1 需要身份验证。了解更多信息”*）并发现我使用了错误的密码。我修复了登录凭据，并正确发送。

我知道这已经晚了，但也许这会对其他人有所帮助。

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2011-02-03T21:58:43.180

我还发现我用来登录的帐户由于某种原因被谷歌停用了。一旦我重置了我的密码（和以前一样），我就可以发送电子邮件了。我也收到了 5.5.1 消息。

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2011-05-14T13:55:02.007

我也尝试了很多解决方案，但做了一些改变它会起作用

```
host = smtp.gmail.com
port = 587
username = email@gmail.com
password = password
enabledssl = true 
```

使用 smtpclient 上面的参数在 gmail 中工作

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2013-08-19T20:56:37.910

我遇到了同样的错误，上述解决方案都没有帮助。

我的问题是我从远程服务器运行代码，该服务器从未用于登录 gmail 帐户。

我在远程服务器上打开了一个浏览器并从那里登录到 gmail。它询问了一个安全问题来验证它是我，因为这是一个新位置。完成安全检查后，我能够通过代码进行身份验证。

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2015-12-27T00:39:01.697

为您的帐户打开不太安全的应用程序：https: [//www.google.com/settings/security/lesssecureapps](https://www.google.com/settings/security/lesssecureapps)

* * *

## 回答 #20

> 赞同：5
> 
> 时间：2016-02-27T11:53:56.023

1.  首先检查您的 gmail 帐户设置并从“访问不太安全的应用程序”中打开 [![在此处输入图像描述](https://i.stack.imgur.com/xX7Hk.png)](https://i.stack.imgur.com/xX7Hk.png)

> 我们强烈建议您使用安全的应用程序（例如 Gmail）来访问您的帐户。Google 制作的所有应用都符合这些安全标准。另一方面，使用安全性较低的应用程序可能会使您的帐户容易受到攻击。学到更多。

2.  放

    ```
    smtp.UseDefaultCredentials = false; 
    ```

    前

    ```
    smtp.Credentials = new NetworkCredential(fromAddress, fromPassword); 
    ```

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2009-09-22T14:20:51.283

我发现的另一件事是您必须至少更改一次密码。并尽量使用安全级别的密码（不要使用与密码相同的用户，123456等）

* * *

## 回答 #22

> 赞同：4
> 
> 时间：2015-01-16T15:36:33.407

为您提供另一种可能的解决方案。我在通过 IMAP 连接到 gmail 时遇到了类似的问题。在尝试了我遇到的所有解决方案之后，您将在此处和其他地方阅读 SO（例如，启用 IMAP，启用对您的邮件的不太安全的访问，使用[https://accounts.google.com/b/0/displayunlockcaptcha](https://accounts.google.com/b/0/displayunlockcaptcha)和以此类推），我实际上再次设置了一个新的gmail帐户。

在我最初的测试中，我创建的第一个 gmail 帐户已连接到我的主 gmail 帐户。这导致了谷歌引用错误帐户的不稳定行为。例如，运行[https://accounts.google.com/b/0/displayunlockcaptcha](https://accounts.google.com/b/0/displayunlockcaptcha)打开了我的主帐户，而不是我为此目的创建的帐户。

因此，当我创建了一个新帐户并且没有将其连接到我的主帐户时，按照上述所有适当的步骤进行操作后，我发现它工作正常！

我还没有证实这一点（即转载），但它显然是为我做的......希望它有所帮助。

* * *

## 回答 #23

> 赞同：4
> 
> 时间：2017-01-04T06:25:17.400

这些错误有一个或多个原因。

*   在本地系统中使用您的 Gmail（或任何其他 if ）登录。

*   还要检查不太安全的应用程序并将其设置为“打开”这里是 GMAIL 的链接。 [https://www.google.com/settings/security/lesssecureapps](https://www.google.com/settings/security/lesssecureapps)

*   检查您的电子邮件代码中的 EnableSsl，并将其设置为 true。

    ```
    smtp.EnableSsl = true; 
    ```

*   还要检查您当前使用的端口。25 是全球性的，但您也可以为其他人检查它，例如 587。检查这里。[是否所有 SMTP 通信都发生在 25 岁以上？](https://stackoverflow.com/questions/664758/does-all-smtp-communication-happen-over-25)

*   **如果您在远程**：检查上面**Vlad Tamas**的答案。

* * *

## 回答 #24

> 赞同：3
> 
> 时间：2010-10-03T13:23:22.017

您也可以通过端口 465 进行连接，但由于 System.Net.Mail 命名空间的一些限制，您可能必须更改您的代码。这是因为命名空间不提供建立隐式 SSL 连接的能力。这在[http://blogs.msdn.com/b/webdav_101/archive/2008/06/02/system-net-mail-with-ssl-to-authenticate-against-port-465.aspx](http://blogs.msdn.com/b/webdav_101/archive/2008/06/02/system-net-mail-with-ssl-to-authenticate-against-port-465.aspx)进行了讨论，我在另一个讨论中提供了如何使用 CDO（协作数据对象）的示例（[GMail SMTP via C# .Net error on all ports](https://stackoverflow.com/questions/1082216/gmail-smtp-via-c-net-errors-on-all-ports/3845907#3845907)）。

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2011-04-20T19:02:53.100

我已经解决了这个问题。显然，该消息用于多种错误类型。我的问题是我已达到最多 500 封已发送邮件。

登录帐户并手动尝试发送邮件。如果已达到限制，它将通知您

* * *

## 回答 #26

> 赞同：3
> 
> 时间：2019-04-08T15:57:39.383

如果您的 Gmail 帐户已升级两步验证，则需要生成应用密码。 [https://support.google.com/accounts/answer/185833?p=app_passwords_sa&hl=en&visit_id=636903322072234863-1319515789&rd=1](https://support.google.com/accounts/answer/185833?p=app_passwords_sa&hl=en&visit_id=636903322072234863-1319515789&rd=1) 选择如何生成应用密码选项并按照提供的步骤操作。将生成的应用程序密码复制并粘贴到某处，因为单击完成后您将无法恢复它。

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2013-11-26T08:31:51.427

```
smtp.Host = "smtp.gmail.com"; //host name
smtp.Port = 587; //port number
smtp.EnableSsl = true; //whether your smtp server requires SSL
smtp.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network;
smtp.Credentials = new NetworkCredential(fromAddress, fromPassword);
smtp.Timeout = 20000; 
```

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2016-07-09T20:54:50.613

更改您的 gmail 密码并重试，之后应该可以使用。

不知道为什么，但是每次您更改主机时，您都必须更改密码。

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2020-07-12T22:27:06.553

此代码适用于我，还允许从不安全的应用程序中进行 gmail 访问，并通过 2 个步骤删除身份验证：

```
Host = "smtp.gmail.com",
Port = 587,
EnableSsl = true,
DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network,
UseDefaultCredentials = false,
Credentials = new NetworkCredential(MailAddress, Password) 
```

# multithreading - ThreadPool、QueueUserWorkItem 和关机时的死锁

> ID：704638
> 
> 赞同：2
> 
> 时间：2009-04-01T08:46:53.250
> 
> 标签：multithreading, delphi, delphi-2009, deadlock, threadpool

我刚刚实现了一个如此处所述的线程池

[Allen Bauer 谈线程池](http://blogs.embarcadero.com/abauer/2007/09/19/38822)

非常简单的实现，工作正常，但我的应用程序不再关闭。似乎有两个工作线程（和另一个线程，我猜是排队线程）卡在函数中

```
ntdll.ZwRemoveIoCompletion 
```

我记得在 QueueUserWorkItem（线程池实现中使用的 WinAPI 函数）的帮助条目中读过一些关于 IO 完成的内容，但我无法正确理解。我将 WT_EXECUTELONGFUNCTION 用于我的工作线程，因为执行可能需要一段时间，我希望创建一个新的工作线程而不是等待现有的工作线程完成。分配给工作线程的一些任务执行一些 I/O 工作。我尝试使用 WT_EXECUTEINIOTHREAD 但它似乎没有帮助。

我应该提到，主线程等待进入关键部分，调用堆栈为

```
System.Halt0, System.FinalizeUnits, Classes.Finalization, TThread.Destroy,
RtlEnterCriticalSection, RtlpWaitForCriticalSection 
```

有什么想法我在这里做错了吗？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T08:55:56.893

为了确保工作线程关闭，如果它们在空的 IO 完成端口上等待，您需要有某种方法来唤醒它们。最简单的方法似乎是向端口发布某种 NULL 消息 - 然后他们应该将此视为有序停止的信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T11:38:37.477

您必须先离开临界区，然后才能再次进入。所以问题出在锁里面。

在某些线程中：

```
EnterCriticalSection(SomeCriticalSection);
sort code...
LeaveCriticalSection(SomeCriticalSection); 
```

在其他一些线程中：

```
EnterCriticalSection(SomeCriticalSection);
clean up code...
LeaveCriticalSection(SomeCriticalSection); 
```

如果排序代码在第一个线程中运行并且第二个线程尝试运行清理代码，则第二个线程将等待直到排序代码完成并且您离开临界区。只有离开临界区后，才能进入相同的临界区。我希望这将帮助您缩小死锁代码的范围，因为它位于关键部分内。

要获取完成端口句柄，您可以在创建完成端口时保存它的句柄：

```
FIoCPHandle := CreateIoCompletionPort(INVALID_HANDLE_VALUE, 0 , 0, FNumberOfConcurrentThreads); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-12-11T07:33:39.420

使用`QueueUserWorkItem`时，只要工作线程已经返回到线程池，就不需要做任何事情来关闭它们。线程池的`WT_EXECUTEDEFAULT`组件将工作项排队到 I/O 完成端口。此端口是线程池内部实现的一部分，您无法访问。

您能否为似乎被卡住的线程提供一些更详细的调用堆栈？这将使这个问题更容易诊断。

# java - 如何修复 Struts DispatchAction 上的 StackOverflowError？

> ID：704639
> 
> 赞同：2
> 
> 时间：2009-04-01T08:47:36.307
> 
> 标签：java, jakarta-ee, struts

情况如下：我练习了创建一个迷你博客应用程序。我使用 Strut 的 EventDispatchAction 来处理所有与帖子相关的方法，例如更新和列出帖子。

我有一个 update() 方法（[http://mywebsite/post?update](http://mywebsite/post?update)），它更新数据库，然后如果它成功转发到同一个动作类，但我使用了不同的方法来处理它， list() 方法（[http://mywebsite/post?list](http://mywebsite/post?list) ) 列出当前用户的所有帖子。问题是它不起作用并抛出：

> javax.servlet.ServletException：
> 
> HTTP 监视器的服务器端组件检测到 java.lang.StackOverflowError。当 web 模块中存在无限循环时，就会发生这种情况。在再次运行 Web 模块之前更正死循环的原因。

你们对如何解决这个问题有任何想法吗？任何帮助将不胜感激！

编辑：我解决了伙计们。我只需要在我的转发参数中输入值，就我而言，我必须这样做： post?list=list 而不是 post?list （正常方式）。我猜如果它没有值，该方法将被忽略。Struts 为什么会这样，真的很奇怪。也许有人可以对此有所了解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T09:02:04.663

是否没有更多异常信息，例如堆栈跟踪？

你有该`list()`方法的单元测试吗？堆栈溢出几乎总是由递归方法（或方法循环）引起的，但如果没有有关堆栈跟踪的更多信息，则很难进一步诊断它。

如果在抛出异常后无法获得完整的堆栈跟踪，则可能需要添加更多日志记录`list()`及其调用的方法，以显示递归发生的位置。

编辑：好的，看看堆栈跟踪，看起来你有一个动作转发给它自己，或者另一个动作转发回第一个动作。看起来*您的代码*没有涉及，因为它没有出现在堆栈跟踪中。检查您的 Struts 配置是否有周期。

堆栈跟踪中另一个有趣的部分是“org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter”——这个应用程序是否在您的 IDE 中运行？*如果不在*IDE 中运行它还会失败吗？

# .net - 如何将 oracle 数据库与 dbml 文件连接起来？

> ID：704642
> 
> 赞同：4
> 
> 时间：2009-04-01T08:48:36.443
> 
> 标签：.net, linq, oracle, linq-to-sql

我认为将 Oracle 与 LINQ 结合使用的最佳方法是手动将数据库表映射到 dbml 文件中。我对吗？

当我做到了，然后呢？如何将数据库与 dbml 文件连接起来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T08:58:30.477

除了 MSSQL 之外，还有用于数据库的 3rd 方 Linq 提供程序：

[LinqToOracle](http://www.codeplex.com/LinqToOracle)和[DBLinq](http://code.google.com/p/dblinq2007/)。后者也适用于 SqlLite、MySql 等。所以不，您不必手动创建 dbml 文件。

[这里](http://www.mikeborozdin.com/post/LINQ-To-MySQL.aspx)还有一个很好且清晰的教程，解释了如何为 DBLinq 做好准备。尽管它使用 MySql 数据库作为示例，但这并不重要，因为您可以将任何 MySql 特定信息替换为 Oracle。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T05:59:45.187

这是另一个支持实体框架（不是 LinqToSQL）的 Oracle 提供程序：http: [//www.devart.com/dotconnect/oracle/](http://www.devart.com/dotconnect/oracle/)。

# c# - 文件路径检查

> ID：704647
> 
> 赞同：1
> 
> 时间：2009-04-01T08:51:06.797
> 
> 标签：c#, file

我想用 UNC 路径检查文件是否存在。

但我认为 UNC 在检查 file.exist 方法时会变慢。

所以我想映射那个 UNC 路径，然后检查文件存在情况..

我如何使用 C# 代码映射驱动器..

并且任何人都对使用 UNC 路径和映射驱动器路径检查文件存在的时间有确切的了解。

在我的测试中，我发现与地图驱动器相比，UNC 检查文件存在性的速度更快。但想知道这怎么可能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T09:11:00.430

速度缺陷实际上不应该与使用 UNC 路径而不是“常规”路径有关，而是您正在访问远程数据。换句话说，花费时间的是网络延迟、会话管理和权限检查，而不是字符串解析。

此外，映射（和取消映射）操作需要一些时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T09:03:42.243

使用[MapNetworkDrive](http://msdn.microsoft.com/en-us/library/8kst88h6(VS.85).aspx)方法。

首先在“添加引用”COM 选项卡上添加对“Windows 脚本宿主对象模型”的引用。

# windows - 基于 OpenGL ES 的桌面硬件加速 OpenVG 实现

> ID：704649
> 
> 赞同：22
> 
> 时间：2009-04-01T08:51:40.040
> 
> 标签：windows, opengl-es, desktop, openvg

我目前正在尝试在我的桌面上启动并运行 OpenVG。问题来了：我正在/将要为 Windows CE 设备（使用 .NET 紧凑框架）开发一个应用程序，该设备具有硬件加速的 OpenGL ES 2.0 和 OpenVG 1.0.1（基于 TI OMAP35x，如果您有兴趣）。应用程序肯定会使用 OpenVG 进行绘图，如果 OpenVG 不提供某些效果（即模糊），则可能会使用 OpenGL 进行某些效果。

现在我想在没有模拟器的情况下在我的桌面上开发（见[这个问题](https://stackoverflow.com/questions/653577/debug-net-compact-framework-app-locally-without-emulator-or-device)）。所以我想我只是用 P/Invoke 导入 OpenVG，这很容易，因为 OpenVG 人把他们的常量变成了真正的枚举，虽然是一个过程 C API，它很好地转换成一个面向对象的形式（带有一个 Graphics 类用于绘图和 Path、Paint、Stroke 和 Image 对象）。我还设法使用[不同名称的 DLL 和入口点](https://stackoverflow.com/questions/654089/dllimport-with-different-entry-points-different-dlls-for-the-same-import-in-diff)。哦，我导入了 EGL 1.3，也很容易转换为面向对象的 API。

直到此时，它听起来还不错。我以为我会使用 Khronos 的 OpenVG 参考实现，但速度很慢。真的很慢。你知道，就像清理表面需要一*秒钟*！所以我想，好吧，OpenVG 是一个标准，我将采用其他实现之一。它们中的大多数都是基于 OpenGL 的，这正是我想要的。或者不是吗？

不，这不对。使用 EGL 1.3（随用于 OpenGL ES 2.0 的 PowerVR Windows Emulation SDK 提供）创建 OpenGL ES 2.0 表面与我尝试的任何 OpenVG 实现都不兼容。其中一些需要传统的 OpenGL (AmanithVG GLE)，PowerVR 提供的 EGL 版本不支持 OpenVG。大多数实现甚至没有 EGL，并使用一些奇怪的函数来初始化上下文——所有这些都假设已经创建了 OpenGL 上下文。OpenGL，而不是 OpenGL ES。叹。

我唯一可以开始工作的是 AmanithVG SRE，它对于软件实现来说非常快，并且不依赖于 OpenGL 或 EGL。它可以工作，但对于实时动画来说仍然太慢了。

我不敢相信这些事情感觉如此不对劲。我真的很想只使用 WindowsMo​​bile.DirectX.Direct3D，PowerVR 为桌面 Windows 提供了一个仿真层，希望最终的 Board Support Package 将 Direct3D 作为 OpenGL ES 包装器提供，就像它似乎在许多设备。

所以，最后的问题是：

是否有任何适用于 OpenGL ES 2.0 的 Windows 桌面系统的 OpenVG 实现？如果它与 PowerVR 的 OpenGL ES 2.0 仿真和提供的 EGL 1.3 一起顺利运行，则可以加分。

还是我应该尝试在桌面上使用传统的 OpenGL 2.0 实现？但他们通常也不提供 EGL。我不想有两个初始化层（EGL 和 WGL）。还是我应该？

注意：这不是 .NET 的问题，因为没有 .NET 的问题是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-01-24T07:28:35.577

在寻找解决我遇到的另一个问题的方法时，我从该站点找到了一个用于 OpenGLES 2.0 和其他版本的闭源 OpenGL ES 模拟器：

[http://www.malideveloper.com/developer-resources/tools/opengl-es-20-emulator.php](http://www.malideveloper.com/developer-resources/tools/opengl-es-20-emulator.php)

它是封闭源代码，但您似乎可以将其用于您的开发目的。

除此之外，您可以编写自己的抽象层，可以在 OpenGL 和 OpenGL ES 之间切换——我在搜索中找不到可用的抽象层。如果你找到了，请告诉我，因为这就是我想要做的。

# internet-explorer - 如何从 iframe 访问父窗口中的 JavaScript 对象

> ID：704656
> 
> 赞同：4
> 
> 时间：2009-04-01T08:55:05.400
> 
> 标签：internet-explorer, firefox, iframe

我有一个网页，其中包含一个名为“myVariable”的 JavaScript 变量。

在这个网页中有一个指向第二个网页的 iframe。

两个页面都在同一个域中。

iframe 中的页面需要访问父网页中定义的“myVariable”。

我已使用以下代码通过 Firefox 成功访问了此变量：

```
document.defaultView.parent.myVariable 
```

但是，这在 Internet Explorer 中不起作用......

如何在 Internet Explorer 中执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T09:08:32.277

如果两个页面都来自同一个域（如您所说），*则 window.top*或*window.parent*应该可以到达父框架。

```
window.top.document.myVariable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-28T13:12:14.923

Firefox 26.0、Internet Explorer 11、Chrome 32.0：

```
window.top.myVariable 
```

窗口.顶部。*文档*.myVariable 不起作用。

# excel - 矢量化

> ID：704660
> 
> 赞同：0
> 
> 时间：2009-04-01T08:56:24.583
> 
> 标签：excel

我对 Excel (2003) 中的图表有疑问。我有几个矩阵：

abcd efgh

ijkl mnop

qrst uvwx

我想绘制向量 z = (a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t)，所以我使用 Ctrl 在图表下的“系列”中一次选择一行，但是当行数达到一定限制时，Excel 无法将它们全部包含在内。

因此，我将所有行一个接一个（如 z）手动堆叠到 Excel 中的行向量中。当行数变大时，需要时间。

您是否知道一种无需先创建向量（如 z）即可解决 Excel 停止问题的方法。如果没有，您是否知道非手动制作（行）向量的方法（可能是 VBA 脚本）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T09:00:10.380

对于这种具有简单意图（绘制图形）和简单格式化数据的数值任务，您最好使用像 Gnuplot 这样的绘图程序。Excel 专为更少的值和更复杂的任务而设计，因此您遇到了它的局限性。

特别是 Gnuplot 是可编写脚本的，并且可以从脚本文件生成图形，如果您不止一次这样做，这将节省您的工作量！

# php - PHP DB 密码：管理“管理员”和“只读”用户

> ID：704674
> 
> 赞同：0
> 
> 时间：2009-04-01T09:00:12.967
> 
> 标签：php

我已经阅读了[“how-to-secure-database-passwords-in-php”](https://stackoverflow.com/questions/97984/how-to-secure-database-passwords-in-php)，它建议将密码保存在应用程序 Web 根目录之外的配置文件中，但是如果我想控制，我应该使用什么模式“我网站的管理员”和“只读”用户。当管理员登录时，我需要能够加载管理员配置密码文件，反之亦然。我想为两个用户使用相同的域模型。我应该为“角色”对象建模并让它管理使用的密码吗？还是有更简单的解决方案。我还应该创建两个单独的密码配置文件，还是将两个帐户详细信息捆绑到一个文件中？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-29T17:00:23.593

除数据库密码外的所有密码都应存储在数据库中并进行单向哈希处理。这是最简单、最常用的方法，而且非常安全。是的，将 db 密码存储在 Web 根目录上方的配置文件中也是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T09:08:37.800

好吧，对此没有单一的“正确”答案。这取决于项目的复杂性和范围——但更重要的是，它取决于项目**不断变化**的性质。

如果您预计需要具有管理员访问权限或只读访问权限的不同人员进行大量更改和添加，那么是的，您将需要使用模型层来存储和访问密码。如果您需要在应用程序的不同部分访问更精细的权限/特权，角色对象可能会很有用。否则，在角色字段中有一个布尔 isAdmin 字段或整数/枚举可能是可以的。

在配置文件中设置面向用户的密码可能会起作用的唯一情况是管理员很少被访问，并且只有一两个人访问。否则，您希望将密码视为应用程序模型的成熟部分。

# c - 如何纵向遍历 trie？

> ID：704675
> 
> 赞同：1
> 
> 时间：2009-04-01T09:00:43.717
> 
> 标签：c, printing, trie

我有一个[Trie](http://en.wikipedia.org/wiki/Trie)和几个修改它的函数。

```
typedef struct node *pnode;

typedef struct node
{
    int element;
    pnode next;//same level, other element
    pnode subtree;//next level
} node; 
```

现在，为了调试和/或测试我的功能，我需要打印出尝试。

我递归地尝试过，但我无法获得第一级，而不是第二级......

有什么好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T09:05:57.667

您必须使用队列，而不是使用堆栈（或通过重复来模拟它）。

[http://en.wikipedia.org/wiki/Breadth-first_search](http://en.wikipedia.org/wiki/Breadth-first_search)

# jquery - 用jquery解析html字符串

> ID：704679
> 
> 赞同：60
> 
> 时间：2009-04-01T09:03:25.707
> 
> 标签：jquery

我有一个来自 Ajax 加载源的 HTML 字符串。在将 HTML 放入文档之前，我想从该字符串中的对象（图像）中获取一些属性。

我有类似的东西：

```
$.ajax({  
        url: uri+'?js',  
        success: function(data) { 
            var htmlCode = $(data).html();  

            $('#otherObject').html(data);
        }  
    }); 
```

如何`src`从此 HTML 字符串中获取属性（例如）？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2009-04-01T09:08:50.653

我不是100%肯定，但不会

```
$(data) 
```

为该数据生成一个带有 DOM 的 jquery 对象，而不是在任何地方连接？或者，如果它已经被解析为 DOM，您可以直接使用 $("#myImg", data)，或者任何适合您需要的选择器。

**编辑**
重新阅读您的问题，您的“数据”似乎已经是一个 DOM，这意味着您可以去（假设您的 DOM 中只有一个 img，否则您需要更精确的选择器）

```
$("img", data).attr ("src") 
```

如果你想访问 src 属性。如果您的数据只是文本，它可能会起作用

```
$("img", $(data)).attr ("src") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-07-01T20:12:32.303

马文S.-

尝试：

```
$.ajax({  
        url: uri+'?js',  
        success: function(data) {  
                var imgAttr = $("img", data).attr('src'); 
                var htmlCode = $(data).html();
                $('#imgSrc').html(imgAttr);
                $('#fullHtmlOutput').html(htmlCode);
        }  
    }); 
```

这应该将整个 html 块从数据加载到#fullHtmlOutput，并将图像的 src 加载到 #imgSrc。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-11T21:16:48.333

只需在您的 img 元素之前添加容器元素，以确保您的 intersted 元素不是第一个，在 ie,ff 中测试

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-03-31T05:58:11.687

需要注意的一件事 - 正如我今天遇到的这个问题，取决于你的 HTML jQuery 可能会也可能不会很好地解析它。jQuery 不会将我的 HTML 解析为正确的 DOM - 在较小的 XML 兼容文件上它可以正常工作，但我拥有的 HTML（将在页面中呈现）在传递回 Ajax 回调时不会解析。

最后，我只是在字符串中手动搜索了我想要的标签，虽然不理想但确实有效。

# c# - 使用 LINQ2SQL 进行延迟加载的最简单方法

> ID：704681
> 
> 赞同：2
> 
> 时间：2009-04-01T09:04:04.067
> 
> 标签：c#, linq-to-sql, optimization, lazy-loading

我有一个只读数据库，所以我关闭了 ObjectTracking（因此隐式关闭了 DeferredLoading）。

我希望做延迟加载而不是使用 LoadWith<>。

在我需要数据本身之前，明确告诉 Linq 去惰性获取关系的最简单方法是什么。

例如：一个简单的 dbml ![替代文字](https://i.stack.imgur.com/bvyxV.jpg)

如果我有以下代码：

```
 TestDbDataContext context = new TestDbDataContext(Settings.Default.TestersConnectionString);
  context.ObjectTrackingEnabled = false;

  var result = context.Employees.ToList();
  foreach (var employee in result)
  {
    // HERE Should load gift list
    foreach (var gift in employee.Gifts)
    {
      Console.WriteLine(gift.Name);
    }
  } 
```

我知道我可以再次编写完整的查询，但我希望我们能一起找到更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T09:09:46.080

您正在与系统作斗争... 2个想法：

*   如果您知道您需要其他数据（嵌套`foreach`），为什么不想使用`LoadWith`？这几乎是教科书的用例
*   既然您（从帖子中）知道延迟加载需要对象跟踪，为什么不只启用对象跟踪；数据上下文通常应被视为“工作单元”（即短暂的），因此这在现实中不太可能造成太大伤害。

[请参阅此处](http://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=295753)的官方回复，了解为什么链接这两个选项（对象跟踪和延迟加载）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T12:06:30.837

使用 LazyList： [http ://blog.wekeroad.com/blog/lazy-loading-with-the-lazylist/](http://blog.wekeroad.com/blog/lazy-loading-with-the-lazylist/)

# sql-server - SQL Server 2008 远程连接只能工作一次

> ID：704683
> 
> 赞同：0
> 
> 时间：2009-04-01T09:04:47.293
> 
> 标签：sql-server, configuration, remote-connection

当我远程连接到 SQL Server 2008 时，它只工作一次，之后服务器挂起。该服务无法停止或重新启动，并且在尝试再次连接时会出现“超时”错误。

服务器启用了 TCP/IP 连接。默认端口设置为 1433，我从动态端口中清除了 0。我启用了 127.0.0.1 IP 和公共 IP，并将 1433 IP 设置为它们。命名管道和其他协议（共享内存或其他东西）被禁用。

我使用“sa”用户和强密码从远程机器连接。服务器设置为接受两种身份验证模式。

第一次从远程机器连接工作完美。可以从数据库中检索查询工作和数据。断开连接并尝试再次连接后，它会出现超时错误。生成此错误是因为 SQL Server 在某处挂起。此时，无法从服务计算机停止或重新启动 SQL Server 服务。唯一的解决方案是重新启动计算机。但是，从 SQL Management Studio 本地连接到服务器仍然有效。

我认为这与在某处进入无限循环有关，或者在与远程计算机断开连接后它不会断开 1433 端口上的连接并且它仍在等待来自它的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T11:39:10.903

您是否排除了网络层的任何东西，例如软件或硬件防火墙、NAT'ing、代理等？

您是作为默认实例还是命名实例运行 SQL Server？

如果您在工作正常时执行 netstat，然后当您暂停时，您会看到什么？

尝试在服务器上运行网络监视器或wireshark，以查看请求是否通过&如果是，服务器是否响应？

**编辑：** 当 sql server 未运行时，您可以连接到端口 1433 上的服务器，这有点令人担忧，您应该得到连接被拒绝（无防火墙）或超时（有防火墙）

在服务器上运行分析器并审核登录/注销您应该能够看到客户端连接吗？它可以帮助您解决问题吗？

尝试使用钝器，例如重新安装 sql server 连接驱动程序。mdac，客户端上的 sql 本机。

# .net - 每个堆栈跟踪行末尾的 + 符号是什么？

> ID：704684
> 
> 赞同：8
> 
> 时间：2009-04-01T09:05:45.687
> 
> 标签：.net, asp.net, debugging, stack-trace

我想知道：在查看带有堆栈跟踪的 ASP.NET 错误页面时，您可以在每行的末尾看到一个 + 号和一个数字。

例如： [替代文本 http://employees.claritycon.com/spoov/SharepointDebuggingwithWSSV3_100BD/NiceStackTrace.jpg](http://employees.claritycon.com/spoov/SharepointDebuggingwithWSSV3_100BD/NiceStackTrace.jpg)

同样在此问题中粘贴的跟踪中： [“/”应用程序中的服务器错误](https://stackoverflow.com/questions/680434)

这些数字不是源文件中的行号，所以我怀疑它们类似于堆栈（或参数）大小。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-01T09:20:22.407

*   如果它处于**发布**模式，则它是 DLL 中该函数的 CIL 偏移量。
*   如果它处于**调试**模式，则它是源代码中的行号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T09:19:44.527

在其他语言中（因此，可能也是这种语言），它表示代码中的当前位置，作为从它所在的函数偏移的字节数或指令数。所以在这种情况下，它得到了 173 个字节/指令/任何内容到 Validate然后引发异常。

但是我无法解释 2049947 的值...

# ruby-on-rails - Rails 子控制器？

> ID：704687
> 
> 赞同：1
> 
> 时间：2009-04-01T09:06:43.483
> 
> 标签：ruby-on-rails

我对 Rails 很陌生，并且有一个问题，我无法完全理解架构上“正确”的做法。

问题与我所谓的子控制器有关。场景是这样的：

我有一系列页面，其中是包含一些信息的某种形式的面板（想想 gitHub 右上角的用户面板）。

所以，在我的应用程序中，我有一些控制器可以为页面生成数据并呈现出很好的响应，但是当涉及到这个面板时，在我看来你会想要某种专门用于生成这个的控制器操作面板和它的视图。

问题是，你如何去做这件事？如何从视图中渲染“子控制器”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T14:27:47.407

我会将逻辑放在帮助程序或模块中。（[http://api.rubyonrails.org/classes/ActionController/Helpers/ClassMethods.html](http://api.rubyonrails.org/classes/ActionController/Helpers/ClassMethods.html)）

然后在你希望这些东西显示的地方渲染局部。( [http://api.rubyonrails.org/classes/ActionView/Partials.html](http://api.rubyonrails.org/classes/ActionView/Partials.html) )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T15:56:02.717

就像 Herman 所说，如果您需要在控制器移交给视图之后生成逻辑（即，Pages 控制器生成页面视图，但您需要自定义面板），那么将其放入帮助程序中。或者，在传递给视图之前在 Pages 控制器中调用一个单独的方法。或者，如果它有很多逻辑，请创建一个模块并将其粘贴到您的 /lib 文件夹中。因此，您可以拥有一个完整的 Panel 模块，其中包含生成 Panel 不同部分并由控制器调用的方法。但是如果你想从视图中调用这些方法，那么你应该使用一个助手来代替。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-07-10T11:45:53.433

我不认为这里需要一个模块，模块是跨一小部分类的共享行为所必需的。

我认为这里需要的是理解 ApplicationController 的继承以及布局

因此，例如，我的布局可能如下所示：

```
<html>
<head><title>Foo</title></head>
<body>
  <%= render :partial => (current_user ? "/shared/user_widget_bar" : "/shared/login_bar") %>
  <%= yield %>
</body>
</html> 
```

我想用于它的任何代码都将放在我的 ApplicationController 中，因为它将在我的大部分应用程序中共享：

```
 before_filter :generate_user_widget
 def generate_user_widget
   if current_user
     @avatar = ...
     @unread_messages = ...
   end
 end 
```

我知道它可能会更干净，因为它属于一个单独的控制器，但老实说，除非代码很大，否则没关系，甚至仍然可以放在一个模块中，然后由 ActionController 包含。但是，如果您考虑它的范围，它确实需要在 ApplicationController 内部。

如果有更多相关页面，例如，您有一个管理多个站点的 Rails 应用程序，并且您希望跨特定站点共享行为，请尝试创建一个没有操作且只有私有方法的父控制器，任何需要的控制器访问这些方法可以继承它。这样，您可以将过滤器应用于所有继承它的控制器，从而避免忘记在非父控制器中添加过滤器的痛苦。

例如：

```
class SiteA::SiteAParentController < ApplicationController
   before_filter :generate_user_widget
   ...
end

class SiteA::ProductController < SiteA::SiteAParentController
  def index
    ...
  end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T14:15:17.190

好吧，如果你真的需要从视图中调用控制器动作，你可以使用组件。它们是框架的一部分，现在它们只作为插件存在。一个这样的插件似乎维护得很好：http: [//github.com/cainlevy/components/tree/master](http://github.com/cainlevy/components/tree/master)

从它的文档：

== 用法

请注意，这些示例非常简单，最好使用 Rails 部分实现。

=== 发电机

运行`script/generator users details`将创建一个带有“详细信息”视图的 UsersComponent。然后，您可能会像这样充实模板：

```
class UsersComponent < Components::Base
  def details(user_or_id)
    @user = user_or_id.is_a?(User) ? user_or_id : User.find(user_or_id)
    render
  end
end 
```

=== 来自 ActionController

```
class UsersController < ApplicationController
  def show
    return :text => component("users/detail", params[:id])
  end
end 
```

=== 来自 ActionView

```
<%= component "users/detail", @user %> 
```

# asp.net - 除了回发之外，如何维护我的 gridview 中的数据？

> ID：704694
> 
> 赞同：1
> 
> 时间：2009-04-01T09:10:26.110
> 
> 标签：asp.net, database, gridview, datatable

我正在编写一个用于查找信用检查的内部 Web 应用程序。我正在为这个网站使用 ASP.NET。

我有一个 SQL 查询，我必须查询信用检查数据库并返回结果数据表。用户单击搜索后，我每次用户单击搜索按钮时都会运行查询并将返回的数据表绑定到 Gridview。

这很好用，它会像它应该的那样填充我的网格视图。

除了回发之外，如何维护绑定到我的 gridview 的数据？例如，假设一个人点击了分页 gridview 的第 2 页......我如何避免在回发期间丢失 gridview 的数据？

目前我将数据表存储在 session[] 但我认为我不应该这样做，因为这个表的大小非常大（有时有数十万个结果！）

我是否需要为每个回发重新查询数据库？该查询需要一些不错的时间，如果我能提供帮助，我宁愿不这样做。

这里的常见解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T15:45:35.240

如果您将数据存储在会话中，我将确保关闭视图状态并且您在每次回发时重新绑定它，因此至少您不会将所有数据存储在 2 个位置。

您还可以考虑让视图状态保持打开状态并更改获取会话数据的逻辑以一次带回一页数据？您将获取当前页面并仅返回该页面的数据，以便您可以首先获取所有数据并将其存储在会话中。然后，如果在该页面视图期间发生任何其他回发操作，而网格实际上没有发生任何事情，您就不必每次都重新绑定。

我发现过去由于网格中显示的数据过多而遇到的大多数问题更多是设计问题，我会退后一步，看看试图解决的整体问题并实施另一个解决方案不必显示这么多数据。通常客户/用户要求一切，因为他们不考虑任何替代方案或他们的要求的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T09:13:58.583

几件事：

*   单击“第 2 页”*不应*导致回发 - 它应该是一个简单的 GET 请求。
*   不允许 GridView 将其数据存储在`ViewState`：手动缓存数据并在每个请求上“重新绑定”数据源
*   使用 ASP.NET MVC

# ruby-on-rails - 将 Ruby on Rails 应用程序中的数据导入 Excel 电子表格的最佳方法是什么？

> ID：704699
> 
> 赞同：3
> 
> 时间：2009-04-01T09:12:49.757
> 
> 标签：ruby-on-rails, export-to-excel

我知道你在想什么，只需将数据下载为 CSV 文件并导入 Excel。

不幸的是，我们需要用户从 Rails 应用程序中选择一些数据，然后轻松（即尽可能少的用户干预 - 理想情况下按下一个按钮）将其导出，并在包含各种公式的现有 Excel 电子表格中打开它和宏等，将应用于数据。

我理想的解决方案将涉及 Rails 端的大部分繁重工作，因为这就是我的技能所在，但我想可能会有某种 Excel Web 集成的东西可能会有所帮助。

无论如何，我可以就解决这个问题的好方法提出一些建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T10:28:44.393

axlsx 可能是深度 excel 工作最完整的实现。 [https://github.com/randym/axlsx](https://github.com/randym/axlsx)

下面是一个构建 microsoft skydrive 模板的示例： ![在此处输入图像描述](https://i.stack.imgur.com/eYktg.png)

```
require 'axlsx'

Axlsx::Package.new do |p|
  p.workbook do |wb|
    styles = wb.styles
    header = styles.add_style :bg_color => "DD", :sz => 16, :b => true, :alignment => {:horizontal => :center}
    tbl_header = styles.add_style :b => true, :alignment => { :horizontal => :center }
    ind_header = styles.add_style :bg_color => "FFDFDEDF", :b => true, :alignment => {:indent => 1}
    col_header  = styles.add_style :bg_color => "FFDFDEDF", :b => true, :alignment => { :horizontal => :center }
    label       = styles.add_style :alignment => { :indent => 1 }
    money       = styles.add_style :num_fmt => 5
    t_label       = styles.add_style :b => true, :bg_color => "FFDFDEDF"
    t_money = styles.add_style :b => true, :num_fmt => 5, :bg_color => "FFDFDEDF"

    wb.add_worksheet do |sheet|
      sheet.add_row
      sheet.add_row [nil, "College Budget"], :style => [nil, header]
      sheet.add_row
      sheet.add_row [nil, "What's coming in this month.", nil, nil, "How am I doing"], :style => tbl_header
      sheet.add_row [nil, "Item", "Amount", nil, "Item", "Amount"], :style => [nil, ind_header, col_header, nil, ind_header, col_header]
      sheet.add_row [nil, "Estimated monthly net income", 500, nil, "Monthly income", "=C9"], :style => [nil, label, money, nil, label, money]
      sheet.add_row [nil, "Financial aid", 100, nil, "Monthly expenses", "=C27"], :style =>  [nil, label, money, nil, label, money]
      sheet.add_row [nil, "Allowance from mom & dad", 20000, nil, "Semester expenses", "=F19"], :style =>  [nil, label, money, nil, label, money]
      sheet.add_row [nil, "Total", "=SUM(C6:C8)", nil, "Difference", "=F6 - SUM(F7:F8)"], :style => [nil, t_label, t_money, nil, t_label, t_money]
      sheet.add_row
      sheet.add_row [nil, "What's going out this month.", nil, nil, "Semester Costs"], :style => tbl_header
      sheet.add_row [nil, "Item", "Amount", nil, "Item", "Amount"], :style => [nil, ind_header, col_header, nil, ind_header, col_header]
      sheet.add_row [nil, "Rent", 650, nil, "Tuition", 200], :style =>  [nil, label, money, nil, label, money]
      sheet.add_row [nil, "Utilities", 120, nil, "Lab fees", 50], :style =>  [nil, label, money, nil, label, money]
      sheet.add_row [nil, "Cell phone", 100, nil, "Other fees", 10], :style =>  [nil, label, money, nil, label, money]
      sheet.add_row [nil, "Groceries", 75, nil, "Books", 150], :style =>  [nil, label, money, nil, label, money]
      sheet.add_row [nil, "Auto expenses", 0, nil, "Deposits", 0], :style =>  [nil, label, money, nil, label, money]
      sheet.add_row [nil, "Student loans", 0, nil, "Transportation", 30], :style =>  [nil, label, money, nil, label, money]
      sheet.add_row [nil, "Other loans", 350, nil, "Total", "=SUM(F13:F18)"], :style => [nil, label, money, nil, t_label, t_money]
      sheet.add_row [nil, "Credit cards", 450], :style => [nil, label, money]
      sheet.add_row [nil, "Insurance", 0], :style => [nil, label, money]
      sheet.add_row [nil, "Laundry", 10], :style => [nil, label, money]
      sheet.add_row [nil, "Haircuts", 0], :style => [nil, label, money]
      sheet.add_row [nil, "Medical expenses", 0], :style => [nil, label, money]
      sheet.add_row [nil, "Entertainment", 500], :style => [nil, label, money]
      sheet.add_row [nil, "Miscellaneous", 0], :style => [nil, label, money]
      sheet.add_row [nil, "Total", "=SUM(C13:C26)"], :style => [nil, t_label, t_money]
      sheet.add_chart(Axlsx::Pie3DChart) do |chart|
        chart.title = sheet["B11"]
        chart.add_series :data => sheet["C13:C26"], :labels => sheet["B13:B26"]
        chart.start_at 7, 2
        chart.end_at 12, 15
      end
      sheet.add_chart(Axlsx::Bar3DChart, :barDir => :col) do |chart|
        chart.title = sheet["E11"]
        chart.add_series :labels => sheet["E13:E18"], :data => sheet["F13:F18"]
        chart.start_at 7, 16
        chart.end_at 12, 31
      end
      sheet.merged_cells.concat ["B4:C4","E4:F4","B11:C11","E11:F11","B2:F2"]
      sheet.column_widths 2, nil, nil, 2, nil, nil, 2
    end
 end
 p.use_shared_strings = true
 p.serialize 'axlsx.xlsx'
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T11:46:28.450

出口部分至少得到了相当好的覆盖——这里有几个候选宝石：

*   [电子表格](http://spreadsheet.rubyforge.org/)
*   [袋鼠](http://roo.rubyforge.org/)

我怀疑（希望！）一旦你有你的 XLS 形式的数据，其余的应该在客户端进行管道连接。

查看 Excel 的 Web 查询工具有什么价值吗？如果用户可以定义他们的选择标准以便不经常更改，那么自定义页面（可能只是提供一个表格）可以将数据直接放入他们的 Excel 会话中。只是一个想法...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T02:59:51.800

Ryan Bates 刚刚在 railscasts.com 上发布了关于 [导出 CSV 和 Excel的免费短截屏视频](http://railscasts.com/episodes/362-exporting-csv-and-excel)

# c# - 这个部门有什么问题？

> ID：704702
> 
> 赞同：3
> 
> 时间：2009-04-01T09:13:20.317
> 
> 标签：c#, double, division

我认为我有很多关于数据类型的知识。为什么会发生这种情况

```
double result = ((3/8)*100).ToString(); 
```

它给出零..应该是37,5 ... :(

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-01T09:15:31.793

3/8 进行整数除法，结果为0

```
double result = ((3.0/8)*100); 
```

应该这样做。

顺便说一句，如果你这样做 ((3.0/8)*100).ToString() 你会得到一个字符串而不是双精度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-01T09:15:18.253

您需要说服编译器执行浮点除法：

```
double result = (((double)3/8)*100); 
```

否则它执行整数除法，然后 3/8 为零。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-01T09:15:32.057

```
double result = ((3.0/8.0)*100); 
```

应该这样做。您正在执行整数除法，而不是浮点除法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-01T09:15:59.437

3 和 8 是整数，所以 3/8 = 0。

利用：

```
string result = ((3d/8d)*100d).ToString(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-01T09:17:24.440

您的表达式仅涉及整数，并且 3/8 为 0。

如果您想要一个浮点表达式，则表达式的至少一个元素必须是浮点数。

最简单的解决方案如下：

```
double result = (100.0 * 3/8) 
```

请注意，我将百个因子放在首位，因为它有助于在除法之前进行乘法运算的精度更高。

另外， toString() 很奇怪？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-01T09:17:16.640

整数除法 (3/8) 产生 0。如果您想使用浮点值，请明确您的编程语言（3.0/8.0 或 3f/8f 或 3d/8d 或您的语言允许的任何其他内容）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-01T09:17:16.717

3 & 8 是整数，所以 3/8 的结果也是一个整数，除非你以不同的方式转换它。

所以，3/8 = 0。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-01T09:17:18.823

独角兽把 3 拿走了，换成了 0。

如果这是一个真正的问题... 3/8 向下舍入为 0。0 * 100 = 0。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-01T09:18:46.403

因为使用了整数数学，而不是浮点数。

您编写了`((3/8)*100)`但该表达式中的所有常量都没有非整数类型。因此编译器（正确地）将其解释为整数算术。由于 3/8 小于 1，因此表达式的计算结果为 0。

一个简单的解决方法是改写`((3./8.)*100.)`。实际上，由于混合类型表达式的规则，将 3 或 8 设为浮点值就足够了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-01T09:16:16.457

除法中的 3 和 8 是整数文字，因此会执行整数除法，并且 3 / 8 的计算结果为零。如果您将它们替换为 3.0 和 8.0，或者使用适当的数据类型后缀（您没有说明您使用的是哪种语言），那么计算将起作用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-01T09:18:20.663

3/8 = 0

3.0/8.0 = 0.375

# c# - 具有 2 个服务和 2 个数据访问层的存储库模式 - C# DDD？

> ID：704705
> 
> 赞同：1
> 
> 时间：2009-04-01T09:14:03.653
> 
> 标签：c#, frameworks, entity, repository-pattern

谁能帮忙，我有 2 个应用程序，它们几乎相同。它们具有完全不同的表示层（Web），业务逻辑和数据库几乎相同。基本上，一个应用程序有一些其他应用程序没有的东西。

所以我想知道我是否可以在不违反任何规则等的情况下执行以下操作

每个应用程序都有自己的表示层。
每个应用程序都有自己的服务层。
每个应用程序都有自己的数据访问层。
每个应用程序共享另一个服务层。

因此，两个应用程序都可以访问共享服务层，因为业务逻辑是相同的，但它们都有另一个服务层，其中有 5 或 6 个特定于该实际应用程序的方法

数据访问层-无论如何我都看不到共享它，因为实体框架有2个不同的数据库，因此它在那里有EDM，因此它不是动态的-并且表格略有不同。

我想我可以在共享数据访问层上使用 IOC

任何人都可以帮助或评论天气，这是一个很好的做法。我不想做的是只有一个单独的服务层，而其中很多是共享的。

这是一个好主意吗？也许我错了，有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-13T07:09:36.253

如果业务逻辑基本相同，那么您应该首先关注这一点。如果你想做 DDD，那么你应该首先识别你的实体和（业务）服务，并将它们放在一个库中。

这些实体和业务服务应该与您的基础设施层（您的 DAL）对话。如果这两个应用程序中的基础设施层非常不同，那么请尝试使用接口。所以用接口包装基础设施层，只通过这些接口从领域层到基础设施层。

要将您的业务逻辑绑定到您的基础设施的实现，您可以使用 IoC/DI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T12:42:21.880

正如 Arjen de Blok 所说，您的业务实体应该使用存储库，存储库是具有查询、更新或插入域实体的方法的对象。

描述您的存储库的接口属于您的领域层，但实现属于基础设施层 (DAL)。

您可以在两个项目之间共享域和基础设施库。如果这两个项目应该通过共享 Web 服务或共享数据库检索它们的数据，您只需要选择（即注入）您的存储库的正确实现（您的域对象只知道您的存储库的接口，而不是具体的类型）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T15:36:01.003

您可以将 DAL 与存储库接口统一起来。然后，您可以跨项目实现接口。您可能最终也会得到一个 EF Repository 基类。您可以将类似的技术应用于服务，利用通用接口，然后专门化服务实现。

# asp.net-mvc - 试图在 asp.net mvc 中提交富文本编辑器内容并获得“检测到潜在危险的 Request.Form 值”

> ID：704708
> 
> 赞同：5
> 
> 时间：2009-04-01T09:15:13.727
> 
> 标签：asp.net-mvc, validation, tinymce

我在 asp.net mvc 中使用 TinyMCE 并在尝试从 TinyMCE 编辑器保存文本时收到错误消息“检测到潜在危险的 Request.Form 值”。我在 web.config 和页面上都设置了 ValidateRequest="false" 。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-02T08:33:02.587

只需将 ValidateInput 属性添加到您的操作并将其设置为 false。

像这样。

```
[ValidateInput(false)]
public ActionResult Submit(string FormContent)
{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-07-20T21:46:36.310

为了让它在 ASP.NET MVC 2.0 中工作，我还必须添加

```
<httpRuntime requestValidationMode="2.0" /> 
```

到

```
<system.web> 
```

我的 web.config 文件的一部分

# .net - 如何将代码标记为生成

> ID：704717
> 
> 赞同：2
> 
> 时间：2009-04-01T09:16:40.573
> 
> 标签：.net, code-generation

标记.net生成的代码是否有最佳实践？

我想要达到的目标如下：

*   默认情况下，调试器步骤不在属性或方法内
*   不会为这些类/成员计算指标

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T09:22:17.563

好吧，对于第一个 - 属性（`[DebuggerStepThrough]`对你的问题来说是最重要的）；这里有一些有用的：

```
[DebuggerStepThrough, DebuggerHidden, DebuggerNonUserCode]
[CompilerGenerated] // arguably untrue... 
```

不确定第二个问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-01T09:26:27.257

您可能会考虑在编译代码后使用[Postsharp](http://www.postsharp.org/)来操作代码。

# c# - 以编程方式将列和行添加到 WPF Datagrid

> ID：704724
> 
> 赞同：78
> 
> 时间：2009-04-01T09:17:27.403
> 
> 标签：c#, wpf, datagrid, wpf-controls, silverlight-2.0

我是 WPF 的新手。我只想知道我们应该如何以编程方式将列和行添加到 WPF 中的 DataGrid。我们过去在 Windows 窗体中执行此操作的方式。创建表列和行，并将其绑定到 DataGrid。

我相信 WPF DataGrid 与 ASP.net 和 Windows 表单中使用的有点不同（如果我错了，请纠正我）。

我有我需要在 DataGrid 中绘制的行数和列数，以便用户可以编辑单元格中的数据。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2009-04-01T19:57:30.283

以编程方式添加一行：

```
DataGrid.Items.Add(new DataItem()); 
```

以编程方式添加列：

```
DataGridTextColumn textColumn = new DataGridTextColumn(); 
textColumn.Header = "First Name"; 
textColumn.Binding = new Binding("FirstName"); 
dataGrid.Columns.Add(textColumn); 
```

查看WPF DataGrid 讨论板上的[这篇文章以获取更多信息。](https://web.archive.org/web/20160619021003/http://wpf.codeplex.com/discussions/34065)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-07-05T07:34:41.447

试试这个，它可以 100% 工作：以编程方式添加列和行：您首先需要创建项目类：

```
public class Item
        {
            public int Num { get; set; }
            public string Start { get; set; }
            public string Finich { get; set; }
        }

        private void generate_columns()
        {
            DataGridTextColumn c1 = new DataGridTextColumn();
            c1.Header = "Num";
            c1.Binding = new Binding("Num");
            c1.Width = 110;
            dataGrid1.Columns.Add(c1);
            DataGridTextColumn c2 = new DataGridTextColumn();
            c2.Header = "Start";
            c2.Width = 110;
            c2.Binding = new Binding("Start");
            dataGrid1.Columns.Add(c2);
            DataGridTextColumn c3 = new DataGridTextColumn();
            c3.Header = "Finich";
            c3.Width = 110;
            c3.Binding = new Binding("Finich");
            dataGrid1.Columns.Add(c3);

            dataGrid1.Items.Add(new Item() { Num = 1, Start = "2012, 8, 15", Finich = "2012, 9, 15" });
            dataGrid1.Items.Add(new Item() { Num = 2, Start = "2012, 12, 15", Finich = "2013, 2, 1" });
            dataGrid1.Items.Add(new Item() { Num = 3, Start = "2012, 8, 1", Finich = "2012, 11, 15" });

        } 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-11-21T23:18:50.110

我有同样的问题。向 WPF 添加新行`DataGrid`需要一个技巧。`DataGrid`依赖于项目对象的属性字段。`ExpandoObject`允许动态添加新属性。下面的代码解释了如何做到这一点：

```
// using System.Dynamic;

DataGrid dataGrid;

string[] labels = new string[] { "Column 0", "Column 1", "Column 2" };

foreach (string label in labels)
{
    DataGridTextColumn column = new DataGridTextColumn();
    column.Header = label;
    column.Binding = new Binding(label.Replace(' ', '_'));

    dataGrid.Columns.Add(column);
}

int[] values = new int[] { 0, 1, 2 };

dynamic row = new ExpandoObject();

for (int i = 0; i < labels.Length; i++)
    ((IDictionary<String, Object>)row)[labels[i].Replace(' ', '_')] = values[i];

dataGrid.Items.Add(row); 
```

//编辑：

请注意，这不是组件的使用方式，但是，如果您只有以编程方式生成的数据（例如，在我的例子中：一系列特征和神经网络输出），它会大大简化。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2011-01-19T06:05:40.900

我找到了一个在运行时添加列并绑定到`DataTable`.

*   [如何将 WPF DataGrid 绑定到可变数量的列？](https://stackoverflow.com/questions/320089/how-do-i-bind-a-wpf-datagrid-to-a-variable-number-of-columns)

*不幸的是，以这种方式定义了 47 列，它绑定到数据的速度对我来说不够快。有什么建议么？*

**xml**

```
<DataGrid
  Name="dataGrid"
  AutoGenerateColumns="False"
  ItemsSource="{Binding}">
</DataGrid> 
```

**xaml.cs** 使用 System.Windows.Data；

```
if (table != null) // table is a DataTable
{
  foreach (DataColumn col in table.Columns)
  {
    dataGrid.Columns.Add(
      new DataGridTextColumn
      {
        Header = col.ColumnName,
        Binding = new Binding(string.Format("[{0}]", col.ColumnName))
      });
  }

  dataGrid.DataContext = table;
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-01-17T09:38:33.220

**编辑**：对不起，我不再有下面提到的代码。这是一个巧妙的解决方案，虽然很复杂。

* * *

我发布了一个示例项目，描述了如何将 PropertyDescriptor 和 lambda 委托与动态 ObservableCollection 和 DynamicObject 一起使用来填充具有**强类型**列定义的网格。

列可以在运行时**动态**添加/删除。如果您的数据不是具有已知类型的对象，您可以创建一个数据结构，该结构可以通过任意数量的列进行访问，并为每个“列”指定一个 PropertyDescriptor。

例如：

```
IList<string> ColumnNames { get; set; }
//dict.key is column name, dict.value is value
Dictionary<string, string> Rows { get; set; } 
```

您可以这样定义列：

```
var descriptors= new List<PropertyDescriptor>();
//retrieve column name from preprepared list or retrieve from one of the items in dictionary
foreach(var columnName in ColumnNames)
    descriptors.Add(new DynamicPropertyDescriptor<Dictionary, string>(ColumnName, x => x[columnName]))
MyItemsCollection = new DynamicDataGridSource(Rows, descriptors) 
```

甚至更好，如果是一些真实的物体

```
public class User 
{
    public string FirstName { get; set; }
    public string LastName{ get; set; }
    ...
} 
```

您可以指定强类型的列（与您的数据模型相关）：

```
var propertyDescriptors = new List<PropertyDescriptor>
{
    new DynamicPropertyDescriptor<User, string>("First name", x => x.FirstName ),
    new DynamicPropertyDescriptor<User, string>("Last name", x => x.LastName ),
    ...
}

var users = retrieve some users

Users = new DynamicDataGridSource<User>(users, propertyDescriptors, PropertyChangedListeningMode.Handler); 
```

然后，您只需绑定到用户集合，并在您指定它们时自动生成列。传递给属性描述符的字符串是列标题的名称。在运行时，您可以向“用户”添加更多 PropertyDescriptor，向网格添加另一列。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2011-05-19T11:58:26.087

如果您已经有了数据绑定，John Myczek 的回答就完成了。
如果没有，如果您想指定数据源，我知道您至少有 2 个选项。（但是我不确定这是否符合大多数准则，例如 MVVM）

**选项1：**就像JohnB说的那样。但我认为你应该使用自己定义的集合而不是弱类型的 DataTable（没有冒犯，但你不能从代码中看出每列代表什么）

**xml.cs**

```
DataContext = myCollection;

//myCollection is a `ICollection<YourType>` preferably
`ObservableCollection<YourType>

 - option 2) Declare the name of the Datagrid in xaml

        <WpfToolkit:DataGrid Name=dataGrid}> 
```

在**xaml.cs中**

```
CollectionView myCollectionView = 
      (CollectionView)CollectionViewSource.GetDefaultView(yourCollection);
dataGrid.ItemsSource = myCollectionView; 
```

如果您的类型定义了属性**FirstName**，那么您可以执行 John Myczek 指出的操作。

```
DataGridTextColumn textColumn = new DataGridTextColumn(); 
dataColumn.Header = "First Name"; 
dataColumn.Binding = new Binding("FirstName"); 
dataGrid.Columns.Add(textColumn); 
```

如果您不知道需要在 dataGrid 中显示的属性，这显然不起作用，但如果是这种情况，您将有更多问题需要处理，我相信这超出了这里的范围。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-17T13:18:28.817

**将 DataTable 绑定到 CodeBehind** **xaml中的 DataGridTextColumn**

```
<DataGrid
  Name="TrkDataGrid"
  AutoGenerateColumns="False"
  ItemsSource="{Binding}">
</DataGrid> 
```

**xml.cs**

```
 foreach (DataColumn col in dt.Columns)
  {
    TrkDataGrid.Columns.Add(
      new DataGridTextColumn
      {
        Header = col.ColumnName,
        Binding = new Binding(string.Format("[{0}]", col.ColumnName))
      });
  }

  TrkDataGrid.ItemsSource= dt.DefaultView; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-02T12:27:40.463

如果您已经有了数据绑定，John Myczek 的回答就完成了。如果没有，如果您想指定数据源，我知道您至少有 2 个选项。（但是我不确定这是否符合大多数准则，例如 MVVM）

****然后，您只需绑定到用户集合，并在您指定它们时自动生成列。传递给属性描述符的字符串是列标题的名称。在运行时，您可以向“用户”添加更多 PropertyDescriptor，向网格添加另一列。** **# asp.net - 找出代码的 asp.net 版本？

> ID：704732
> 
> 赞同：0
> 
> 时间：2009-04-01T09:19:50.440
> 
> 标签：asp.net

通常，您如何确定应用程序是用哪个版本的 asp.net 编写的？有问题的应用程序是[VP-ASP 6.5](http://www.vpasp.com/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T15:37:48.677

我只是提交一个请求并询问。

通读设置指南，它看起来像是用经典的 ASP 而不是 ASP.NET 编写的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-09-10T13:11:17.103

是的，没错，VP-ASP 6.5 是用 ASP 编写的。事实上所有版本（通过当前的 7.0）都在 ASP 中。出版商表示下一个版本将在 ASP.NET 中

# c++ - 从 C++ 源代码创建类图？

> ID：704738
> 
> 赞同：19
> 
> 时间：2009-04-01T09:22:18.687
> 
> 标签：c++, class-design

是否有任何免费工具可用于从 c++ 源文件生成类图，如果可能的话也可用于 mfc 源文件。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-04-01T09:25:54.873

我们使用带有[graphviz](http://www.graphviz.org/)支持的[doxygen](http://www.doxygen.nl)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T18:50:25.950

你可以试试 SourceNavigator。我不确定项目的当前状态是什么，但这[是一个开始的地方](http://sourcenav.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T04:57:15.513

我在[Umbrello](http://uml.sourceforge.net/)（一个基于 KDE 的应用程序）上取得了一些成功。它允许您导入代码以创建模型，然后可以使用该模型生成 UML 图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-08-06T15:54:07.443

Umbrello 可能适用于类数量有限的项目，并且肯定需要手动干预进行调整。我想 doxygen/graphviz 更适合大型项目。

# windows - 带有 Windows7 外观的 RibbonBar？

> ID：704739
> 
> 赞同：1
> 
> 时间：2009-04-01T09:22:24.303
> 
> 标签：windows, ribbon

你知道任何具有 Windows 7 外观和感觉的功能区吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-01T13:01:01.047

[Windows SDK v7.0](http://www.microsoft.com/downloads/details.aspx?FamilyID=a91dc12a-fc94-4027-b67e-46bab7c5226c&DisplayLang=en)支持“Scenic”功能区：http [://code.msdn.microsoft.com/ScenicRibbon](http://code.msdn.microsoft.com/ScenicRibbon)。[这里](http://www.microsoft.com/downloads/details.aspx?familyid=141e13e8-b10b-4356-aaa5-609b2981574a&displaylang=en)有一个 C++ 示例。

最新版BGCSoft ControlBarPro也支持同款风格：[http ://www.bcgsoft.com/featuretour/tour256.htm](http://www.bcgsoft.com/featuretour/tour256.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T18:14:20.517

[WPF 功能区预览](http://www.codeplex.com/wpf/Wiki/View.aspx?title=WPF%20Ribbon%20Preview)默认具有 Windows 7的外观。

# c# - 拦截方法调用时获取 ContextBoundObject 的类型

> ID：704743
> 
> 赞同：0
> 
> 时间：2009-04-01T09:25:05.810
> 
> 标签：c#, .net

我正在将方法调用截获到 ContextBoundObject 中。有没有办法在消息接收器中获取我正在调用的对象的类型？

说我有课

```
 [Intercept]
 [Synchronization]
 public class Test : ContextBoundObject
 {
    [Timeout(10010)]
    public void Method()
    {
        // Do something
    }
 } 
```

在调用之前的消息接收器中`Method`是否有某种方式可以获取`Test`类型以便我可以查询自定义属性`Timeout`？例如

```
public IMessage SyncProcessMessage(IMessage msg)
{
      Type type = GetType(); // << Need to get hold of Test type here
      object[] custom = type.GetMethod("Method").GetCustomAttributes(false);;
      TimeoutAttribute ta = custom[0] as TimeoutAttribute;
      int time = ta.Ticks;

      IMessage returnedMessage = _nextSink.SyncProcessMessage(msg);
      return returnedMessage;
} 
```

ta

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T10:04:06.933

经过一番折腾，我找到了它。

类型名称被传递到 IMessage 的 Properties 字典中的 SyncProcessMessage。

所以上面的代码就变成了

```
public IMessage SyncProcessMessage(IMessage msg)
{
      Type type = Type.GetType(msg.Properties["__TypeName"].ToString());

      object[] custom = type.GetMethod("Method").GetCustomAttributes(false);
      TimeoutAttribute ta = custom[0] as TimeoutAttribute;
      int time = ta.Ticks;

      IMessage returnedMessage = _nextSink.SyncProcessMessage(msg);
      return returnedMessage;
} 
```

# ssis - 查看未输出到目标的结果

> ID：704744
> 
> 赞同：1
> 
> 时间：2009-04-01T09:25:09.693
> 
> 标签：ssis, ssis-data-flow

在开发数据流时，我并不总是想将结果输出到目的地——但我想查看数据。

有没有办法将数据查看器附加到输出而不必有目的地？

文件和原始目标对它们接受的数据类型有限制——我不想仅仅为了测试/构建代码而附加转换。

是否有某种输出到 null ？然后我可以获得结果集的数据视图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T14:57:01.097

第三方提供了一个（免费的）自定义“垃圾”目的地：

[http://www.sqlis.com/post/Trash-Destination-Adapter.aspx](http://www.sqlis.com/post/Trash-Destination-Adapter.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-12T01:55:33.223

我通常使用导出列转换 - 如果保留默认配置，它什么也不做，所以它相当于 Ed 提到的自定义“垃圾箱”目的地，但你不必安装任何东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-03-23T12:09:19.107

当调试并想要查看缓冲区中的数据时，我通常会抛出一个 Union All 并将其连接到我想要查看的输出的组件下方。然后在连接器上添加一个数据查看器，瞧，就是这样！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T11:53:52.817

真的没有。您可以改用 RecordSet Destination 或 Row Count 转换。

# asp.net - 母版页编译和绝对 URL

> ID：704746
> 
> 赞同：1
> 
> 时间：2009-04-01T09:26:02.767
> 
> 标签：asp.net, dns, master-pages

***2009 年 3 月 4 日更新***

作为对一些评论的回应，母版页中的示例如下所示。这不是 asp.net 控件，这是硬编码的 html

```
<a href="http://www.MYDOMAIN.com/about_us.asp" accesskey="u"><span class="topleft"><span class="bottomleft">About us</span></span></a> 
```

这在生产服务器上呈现为

```
<a href="http://www.NEWDOMAIN.com/about_us.asp" accesskey="u"><span class="topleft"><span class="bottomleft">About us</span></span></a> 
```

MYDOMAIN 是我们主站点的真实域名，NEWDOMAIN 是指向同一站点的完全有效的 DNS 条目。

***2009 年 2 月 4 日更新***

所有的 URL 都是绝对的，因为它们以 http:// 开头

我不认为这可能是浏览器问题，因为实际呈现的源代码（通过查看源代码查看）已更改。检查了 IE7/8 和 Firefox 3 并见证了相同的行为。

***原始问题***

我有一个 ASP.Net 2.0 应用程序，它有几个母版页。这基本上被模拟成看起来与我们的主网站完全一样，但是因为它在不同的服务器上运行，所以菜单项等的所有 URL 都被赋予了我们主站点的绝对 URL。

这在我的开发机器上工作正常，但在生产服务器上，所有绝对的 URL 在运行时都会发生变化，但单击时它们仍然会出现在相同的页面上。

这是DNS问题吗？当母版页和内容合并时，ASP.Net 是否会对 URL 进行一些 DNS 解析？如果是这样，那么为什么它对我的本地机器没有相同的效果，它们在同一个域上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T11:49:37.210

不，这不是 DNS 问题，ASP.net 不进行任何 DNS 解析。这是您正在查看页面的浏览器的全部责任。

但是，有几种情况会导致页面标记中提供的 URL 不一致，客户端的浏览器可能会对此做出不同的解释。

浏览器将始终以相同的方式解释以“http://”开头的 URL - 它是一个绝对 URL，因此目标将始终解析为相同的内容。确保所有指向主站点的 URL 都以“http://”开头。

以“www.”开头的 URL。（没有 http://）将被视为相对 URL - 即，如果包含 URL 的页面位于[http://www.google.com](http://www.google.com)，那么您实际上是在请求[http://www.google.com/YourUrl](http://www.google.com/YourUrl) . 你会发现这几乎肯定不是你正在寻找的行为。

以斜杠 (/) 开头的 URL 在当前域中将被视为绝对 URL。例如“/Tools”，在 Google 内将导致对“ [http://www.google.com/Tools](http://www.google.com/Tools) ”的请求。如果没有前导斜杠，浏览器会将 URL 视为相对于当前正在查看的页面（即，当您查看“en”文件夹中的页面时，“Tools”的 URL 将导致对“en”的请求/工具”。

我认为这是您的问题出现的地方。对于一致的行为，我发现确保所有 URL 都以斜杠开头是一个很好的经验法则。如果要确保 ASP 代码生成的所有超链接都是正确的，请使用波浪号（ASP 将替换为应用程序根文件夹的路径）：

```
<asp:Hyperlink id="Test1" runat="server" NavigateUrl="~/Tools/Default.aspx">Tools</asp:Hyperlink> 
```

这样，无论您使用 Cassini、IIS 中的网站还是 IIS 中的虚拟目录，您的页面在站点结构中的哪个位置都无关紧要 - URL 将始终解析为正确的地址。

如果要输出不是服务器控件属性的 URL，请使用 ResolveUrl 方法：

```
<a href="<%= ResolveUrl("~/Tools/Default.aspx")%>">Tools</a> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T10:57:40.440

“绝对”我假设您的意思是它们以“/”而不是文件夹名称开头？

如果您使用的是 ASP.NET[超链接](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlink.aspx)控件，那么这些将倾向于从应用程序根目录开始修改。

**编辑评论**

你能给我们举个例子来说明 URL 是如何改变的吗？即从[http://www.example.com/](http://www.example.com/) *somepage.aspx*到[http://www.example.com/](http://www.example.com/) *trackingpage.aspx?somequerysting* - 或者域正在改变？或者是其他东西？

你说“他们仍然在相同的页面上”——很明显，事情正在发挥作用。您是否在生产服务器上的 web.config 中注册了任何 HttpHandler，它们可以为您修改 URL，以便它们都通过一些日志记录系统？即从服务器获取响应，处理生成的 HTML，修改所有链接 - 它是否发生在简单的锚标记以及超链接控件中？

您是否正在使用在 PreRender 中执行附加步骤的自定义基本页面，或者在生产环境中使用与正在更改 URL 的开发人员机器不同的 Render？

# sql-server - 基于链接到维度表之一的事实表中的键添加新维度

> ID：704751
> 
> 赞同：1
> 
> 时间：2009-04-01T09:27:10.533
> 
> 标签：sql-server, sql-server-2005, ssas

我有一个事实表，其中包含所有日期和时间属性作为链接到实际日期和时间维度的键。当我使用 SSAS 2005 在其上创建多维数据集时，这些日期时间属性被拆分为多维数据集的各个维度，这没关系。

问题是当我向事实表添加新的日期时间属性时，我的多维数据集不接受该属性，并且不会像其他维度一样创建新的日期时间维度，除非我从头开始重新创建多维数据集。

任何人都可以建议，如何将这个新属性单独添加为维度，而无需重新创建多维数据集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T10:22:12.477

我很难理解你的问题。

听起来好像您正在尝试向事实表添加一个新的日期时间列（事实）（引用您的适当 Dimension/s 属性）。如果是这样，这会改变多维数据集的结构，因此需要重新处理多维数据集。

为了限定术语的正确使用，维度包含属性。事实表包含事实而不是属性。

以下参考资料可能有用。

[http://msdn.microsoft.com/en-us/library/aa905984(SQL.80).aspx](http://msdn.microsoft.com/en-us/library/aa905984(SQL.80).aspx)

## 回复：评论

在处理多维数据集之前，任何结构更改都需要在 Business Intelligence Development Studio (BIDS) 的数据源视图 (DSV) 中应用/注册。单击 DSV 上的刷新按钮，应该会提示您选择将任何发现的更改应用于您的表。此外，如果您对Dimensions 的基础表进行任何添加/修改，那么您可能还需要在重新处理多维数据集之前将相关属性添加到适当的Dimension .dim 文件中。

希望这是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T11:27:10.430

问题通常是由于未知成员和空处理选项设置以及雪花模式（如果您的多维数据集中有它）。我弄清楚问题实际上是什么。如果您有提到的案例，那么当您刷新数据源视图时，SSAS 不会自行提出结构更改。在我的例子中，因为它是日期和时间维度，我必须手动添加新维度（多维数据集维度）并正确设置它们的 NULL 处理选项（在我的例子中是 UnknownMember 而不是自动）。

由于对添加到基础事实表的所有此类新列进行这些更改可能有点困难，因此您可以尝试使用精心设计的 Find & Replace 方法更新 XMLA 脚本。

# c# - C# OnclientClick 不呈现 asp 标签？

> ID：704753
> 
> 赞同：1
> 
> 时间：2009-04-01T09:27:35.367
> 
> 标签：c#, onclientclick

我有一个看起来像这样的 ASP 按钮：

```
<asp:Button 
  ID="btnReset" 
  runat="server" 
  OnClientClick = "hideOverlay('<%=pnlOverlay.ClientID %>', '<%=pnlAddComment.ClientID  %>');"
  CssClass ="btnCancel PopUpButton"
/> 
```

问题是 de hideOverlay 部分中的 asp 标签。我无法正常工作。为什么不工作？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-08-05T14:59:12.403

试试下面的例子

第一个例子

在 aspx 中

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Button ID="btnReset" runat="server" CssClass="btnCancel PopUpButton" />
        <asp:Panel ID="pnlOverlay" runat="server">
        </asp:Panel>
        <asp:Panel ID="pnlAddComment" runat="server">
        </asp:Panel>        
    </div>
    </form>
</body>
</html> 
```

在代码隐藏中

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class Default10 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
       btnReset.Attributes.Add("onclick", string.Format("hideOverlay('{0}','{1}')", pnlOverlay.ClientID, pnlAddComment.ClientID));

    }
} 
```

它将为按钮生成以下源

```
<input type="submit" name="btnReset" value="" onclick="hideOverlay('pnlOverlay','pnlAddComment');" id="btnReset" class="btnCancel PopUpButton" /> 
```

第二个例子

在 Aspx 中

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Button ID="btnReset" runat="server" CssClass="btnCancel PopUpButton" OnClientClick=<%# "hideOverlay('" + pnlOverlay.ClientID + "', '" + pnlAddComment.ClientID +"');" %> />
        <asp:Panel ID="pnlOverlay" runat="server">
        </asp:Panel>
        <asp:Panel ID="pnlAddComment" runat="server">
        </asp:Panel>        
    </div>
    </form>
</body>
</html> 
```

在代码隐藏中

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class Default10 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        btnReset.DataBind(); 
    }
} 
```

它将为按钮生成以下源

```
<input type="submit" name="btnReset" value="" onclick="hideOverlay('pnlOverlay', 'pnlAddComment');" id="btnReset" class="btnCancel PopUpButton" /> 
```

第三个例子

在 aspx 中

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Button ID="btnReset" runat="server" CssClass="btnCancel PopUpButton" OnClientClick="hideOverlay();" />
        <asp:Panel ID="pnlOverlay" runat="server">
        </asp:Panel>
        <asp:Panel ID="pnlAddComment" runat="server">
        </asp:Panel>        
    </div>
    </form>
</body>
<script type="text/javascript" >
    function hideOverlay()
    {
        var pnlOverlayID = '<%= pnlOverlay.ClientID %>';
        var pnlAddCommentID = '<%= pnlAddComment.ClientID %>';

        //Do your stuff
    }
</script> 
</html> 
```

它将为脚本部分生成以下源

```
<script type="text/javascript" >
    function hideOverlay()
    {
        var pnlOverlayID = 'pnlOverlay';
        var pnlAddCommentID = 'pnlAddComment';

        //Do your stuff
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T10:16:03.520

尝试在您的内联代码中将“=”替换为“#”。例如**<%=pnlOverlay.ClientID %>** => **<%#pnlOverlay.ClientID %>**，以便在编译时实例化**ClientId 。**

[OnClientClick](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.onclientclick.aspx)仅用于调用 javascript 代码等客户端脚本。如果您尝试在代码中调用方法，则应使用**OnClick**事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T11:53:17.297

将您的代码更改为：

```
<asp:Button 
  ID="btnReset" 
  runat="server" 
  OnClientClick=<%# "hideOverlay('" + pnlOverlay.ClientID + "', '" + pnlAddComment.ClientID +"');" %>
  CssClass ="btnCancel PopUpButton"
/> 
```

甚至更好，如果你使用`string.Format()`

```
OnClientClick=<%# string.Format("hideOverlay('{0}', '{1}');", pnlOverlay.ClientID,pnlAddComment.ClientID) %> 
```

并且不要忘记对链接进行数据绑定，是的`onclientclick`，没有`"`，因为它们在`<%# %>`标签内使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T13:51:07.543

你可以试试这个。

一世。在后面的代码中

```
btnReset.OnClientClick = "hideOverlay'"+pnlOverlay.ClientID+"','"+pnlAddComment.ClientID+"')"; 
```

ii. 第二种方法是使用内联 javascript。

```
<asp:Button ID="btnReset" runat="server" OnClientClick = "newhideOverlay()" CssClass
="btnCancel PopUpButton"/>

<script type="text/javascript">

function newhideOverlay() 

{    
      hideOverlay('<%=pnlOverlay.ClientID %>', '<%=pnlAddComment.ClientID  %>');

} 

</script> 
```

还要确保 pnlOverlay 和 pnlAddComment 在按钮之前加载。

# c# - Lucene 和正斜杠

> ID：704757
> 
> 赞同：2
> 
> 时间：2009-04-01T09:28:39.967
> 
> 标签：c#, .net, lucene, special-characters

在我的索引中有一个值 companyName:opel/vauxhall
搜索“opel/vauxhall”会返回正确的结果。
搜索“opel/*”不会返回任何结果。

目前我正在用空格替换“/”。但这确实让我的代码有点味道。

有更好的想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-05T20:21:00.780

这种问题几乎总是由用于索引和搜索（解析查询）的分析器引起的。

尝试使用不同的分析器，例如 StopAnalyzer。

# javascript - 如何检查一个元素在 JavaScript 中是否真的可见？

> ID：704758
> 
> 赞同：127
> 
> 时间：2009-04-01T09:28:46.223
> 
> 标签：javascript, dom, visibility

在 JavaScript 中，您将如何检查元素是否实际可见？

我不仅仅意味着检查`visibility`and`display`属性。我的意思是，检查元素不是

*   `visibility: hidden`或者`display: none`
*   在另一个元素下方
*   滚动到屏幕边缘

由于技术原因，我不能包含任何脚本。但是，我可以使用[Prototype](http://en.wikipedia.org/wiki/Prototype_JavaScript_Framework)，因为它已经在页面上。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2009-05-25T04:41:21.953

对于第 2 点。

我看到没有人建议使用`document.elementFromPoint(x,y)`，对我来说，这是测试一个元素是否被另一个元素嵌套或隐藏的最快方法。您可以将目标元素的偏移量传递给函数。

[这是elementFromPoint](http://www.quirksmode.org/dom/tests/elementfrompoint.html)上的 PPK 测试页面。

来自[MDN 的文档](https://developer.mozilla.org/en-US/docs/Web/API/DocumentOrShadowRoot/elementFromPoint)：

> 该`elementFromPoint()`方法（可用于 Document 和 ShadowRoot 对象）返回指定坐标（相对于视口）处的最顶层元素。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2009-10-09T10:00:07.307

我不知道在旧的或不太现代的浏览器中支持多少，但我正在使用这样的东西（不需要任何库）：

```
function visible(element) {
  if (element.offsetWidth === 0 || element.offsetHeight === 0) return false;
  var height = document.documentElement.clientHeight,
      rects = element.getClientRects(),
      on_top = function(r) {
        var x = (r.left + r.right)/2, y = (r.top + r.bottom)/2;
        return document.elementFromPoint(x, y) === element;
      };
  for (var i = 0, l = rects.length; i < l; i++) {
    var r = rects[i],
        in_viewport = r.top > 0 ? r.top <= height : (r.bottom > 0 && r.bottom <= height);
    if (in_viewport && on_top(r)) return true;
  }
  return false;
} 
```

它检查元素的面积 > 0，然后检查元素的任何部分是否在视口内，并且它没有隐藏在另一个元素的“下方”（实际上我只检查元素中心的一个点，所以它不是 100% 保证的——但是如果你真的需要的话，你可以修改脚本来迭代元素的所有点......）。

*更新*

修改了检查每个像素的 on_top 函数：

```
on_top = function(r) {
  for (var x = Math.floor(r.left), x_max = Math.ceil(r.right); x <= x_max; x++)
  for (var y = Math.floor(r.top), y_max = Math.ceil(r.bottom); y <= y_max; y++) {
    if (document.elementFromPoint(x, y) === element) return true;
  }
  return false;
}; 
```

不知道性能如何：）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2010-05-17T06:39:19.867

正如 jkl 指出的那样，检查元素的可见性或显示是不够的。你必须检查它的祖先。Selenium 在验证元素的可见性时会执行此操作。

查看 selenium-api.js 文件中的 Selenium.prototype.isVisible 方法。

[http://svn.openqa.org/svn/selenium-on-rails/selenium-on-rails/selenium-core/scripts/selenium-api.js](http://svn.openqa.org/svn/selenium-on-rails/selenium-on-rails/selenium-core/scripts/selenium-api.js)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-24T18:33:39.683

有趣的问题。

这将是我的方法。

1.  首先检查 element.style.visibility !== 'hidden' && element.style.display !== 'none'
2.  然后用 document.elementFromPoint(element.offsetLeft, element.offsetTop) 测试返回的元素是否是我期望的元素，这很难检测一个元素是否与另一个元素完全重叠。
3.  最后测试 offsetTop 和 offsetLeft 是否位于视口中，并考虑滚动偏移。

希望能帮助到你。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-24T15:47:18.703

这就是我到目前为止所拥有的。它涵盖了 1 和 3。但是我仍然在为 2 苦苦挣扎，因为我对 Prototype 不太熟悉（我更像是一个 jQuery 类型的人）。

```
function isVisible( elem ) {
    var $elem = $(elem);

    // First check if elem is hidden through css as this is not very costly:
    if ($elem.getStyle('display') == 'none' || $elem.getStyle('visibility') == 'hidden' ) {
        //elem is set through CSS stylesheet or inline to invisible
        return false;
    }

    //Now check for the elem being outside of the viewport
    var $elemOffset = $elem.viewportOffset();
    if ($elemOffset.left < 0 || $elemOffset.top < 0) {
        //elem is left of or above viewport
        return false;
    }
    var vp = document.viewport.getDimensions();
    if ($elemOffset.left > vp.width || $elemOffset.top > vp.height) {
        //elem is below or right of vp
        return false;
    }

    //Now check for elements positioned on top:
    //TODO: Build check for this using Prototype...
    //Neither of these was true, so the elem was visible:
    return true;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-23T19:47:41.380

Prototype 的[Element 库](http://prototypejs.org/api/element)在方法方面是最强大的查询库之一。我建议您查看 API。

一些提示：

1.  检查可见性可能很痛苦，但您可以使用`Element.getStyle()`方法和`Element.visible()`方法组合到自定义函数中。`getStyle()`您可以检查实际计算的样式。

2.  我不知道你所说的“下面”是什么意思 :) 如果你的意思是它有一个特定的祖先，例如，一个包装 div，你可以使用`Element.up(cssRule)`：

    ```
    var child = $("myparagraph");
    if(!child.up("mywrapper")){
      // I lost my mom!
    }
    else {
      // I found my mom!
    } 
    ```

    如果您想检查子元素的兄弟姐妹，您也可以这样做：

    ```
    var child = $("myparagraph");
    if(!child.previous("mywrapper")){
      // I lost my bro!
    } 
    else {
      // I found my bro!
    } 
    ```

3.  同样，如果我正确理解您的意思，Element lib 可以帮助您:) 您可以检查[视口的实际尺寸](http://prototypejs.org/api/document/viewport)和元素的[偏移量，](http://prototypejs.org/api/element/cumulativeoffset)以便计算您的元素是否“离屏”。

祝你好运！

[我在http://gist.github.com/117125](http://gist.github.com/117125)上粘贴了prototypejs 的测试用例。在您的情况下，我们似乎根本无法信任`getStyle()`。为了最大限度地提高 isMyElementReallyVisible 函数的可靠性，您应该结合以下内容：

*   检查计算的样式（dojo 有一个很好的[实现](https://github.com/dojo/dojo/blob/master/dom-style.js#L23)，你可以借用）
*   检查 viewportoffset（原型原生方法）
*   检查 z-index 是否存在“下方”问题（在 Internet Explorer 下可能有问题）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-09-12T06:54:55.207

一种方法是：

```
isVisible(elm) {
    while(elm.tagName != 'BODY') {
        if(!$(elm).visible()) return false;
        elm = elm.parentNode;
    }
    return true;
} 
```

学分：[https ://github.com/atetlaw/Really-Easy-Field-Validation/blob/master/validation.js#L178](https://github.com/atetlaw/Really-Easy-Field-Validation/blob/master/validation.js#L178)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-11T16:07:18.517

```
/**
 * Checks display and visibility of elements and it's parents
 * @param  DomElement  el
 * @param  boolean isDeep Watch parents? Default is true
 * @return {Boolean}
 *
 * @author Oleksandr Knyga <oleksandrknyga@gmail.com>
 */
function isVisible(el, isDeep) {
    var elIsVisible = true;

    if("undefined" === typeof isDeep) {
        isDeep = true;
    }

    elIsVisible = elIsVisible && el.offsetWidth > 0 && el.offsetHeight > 0;

    if(isDeep && elIsVisible) {

        while('BODY' != el.tagName && elIsVisible) {
            elIsVisible = elIsVisible && 'hidden' != window.getComputedStyle(el).visibility;
            el = el.parentElement;
        }
    }

    return elIsVisible;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-02-13T14:33:44.627

您可以使用 clientHeight 或 clientWidth 属性

```
function isViewable(element){
  return (element.clientHeight > 0);
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-06-05T05:13:12.103

试试`element.getBoundingClientRect()`。它将返回一个具有属性的对象

*   底部
*   最佳
*   对
*   剩下
*   宽度——取决于浏览器
*   高度——取决于浏览器

检查元素的宽度和高度`BoundingClientRect`是否不为零，这是隐藏或不可见元素的值。如果值大于零，则元素应该在正文中可见。然后检查该`bottom`属性是否小于`screen.height`这意味着该元素在视口中。（从技术上讲，您还必须考虑浏览器窗口的顶部，包括搜索栏、按钮等）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-24T14:13:56.450

捕捉鼠标拖动和视口事件（onmouseup、onresize、onscroll）。

当拖动结束时，将拖动的项目边界与所有“感兴趣的元素”（即具有类“dont_hide”的元素或 ids 数组）进行比较。对 window.onscroll 和 window.onresize 执行相同的操作。用特殊的属性或类名标记任何隐藏的元素，或者简单地执行您想要的任何操作。

隐藏测试非常简单。对于“完全隐藏”，您想知道所有角是在拖动项目边界内还是在视口外。对于部分隐藏，您正在寻找与相同测试匹配的单个角。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-09-21T16:16:05.597

我认为检查元素自身的可见性和显示属性对于要求 #1 来说不够好，即使您使用 currentStyle/getComputedStyle。您还必须检查元素的祖先。如果祖先是隐藏的，那么元素也是如此。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2009-04-01T09:34:15.007

检查元素的 offsetHeight 属性。如果大于 0，则可见。注意：此方法不涵盖设置可见性：隐藏样式的情况。但无论如何，这种风格很奇怪。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2009-05-25T15:45:19.083

这是一个示例脚本和测试用例。涵盖定位元素，可见性：隐藏，显示：无。没有测试 z-index，假设它有效。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <title></title>
    <style type="text/css">
    div {
      width: 200px;
      border: 1px solid red;
    }
    p {
      border: 2px solid green;
    }
    .r {
      border: 1px solid #BB3333;
      background: #EE9999;
      position: relative;
      top: -50px;
      height: 2em;
    }
    .of {
      overflow: hidden;
      height: 2em;
      word-wrap: none; 
    }
    .of p {
      width: 100%;
    }

    .of pre {
      display: inline;
    }
    .iv {
      visibility: hidden;
    }
    .dn {
      display: none;
    }
    </style>
    <script src="http://www.prototypejs.org/assets/2008/9/29/prototype-1.6.0.3.js"></script>
    <script>
      function isVisible(elem){
        if (Element.getStyle(elem, 'visibility') == 'hidden' || Element.getStyle(elem, 'display') == 'none') {
          return false;
        }
        var topx, topy, botx, boty;
        var offset = Element.positionedOffset(elem);
        topx = offset.left;
        topy = offset.top;
        botx = Element.getWidth(elem) + topx;
        boty = Element.getHeight(elem) + topy;
        var v = false;
        for (var x = topx; x <= botx; x++) {
          for(var y = topy; y <= boty; y++) {
            if (document.elementFromPoint(x,y) == elem) {
              // item is visible
              v = true;
              break;
            }
          }
          if (v == true) {
            break;
          }
        }
        return v;
      }

      window.onload=function() {
        var es = Element.descendants('body');
        for (var i = 0; i < es.length; i++ ) {
          if (!isVisible(es[i])) {
            alert(es[i].tagName);
          }
        }
      }
    </script>
  </head>
  <body id='body'>
    <div class="s"><p>This is text</p><p>More text</p></div>
    <div class="r">This is relative</div>
    <div class="of"><p>This is too wide...</p><pre>hidden</pre>
    <div class="iv">This is invisible</div>
    <div class="dn">This is display none</div>
  </body>
</html> 
```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2014-08-26T07:56:51.913

这是响应的一部分，它告诉您元素是否在视口中。您可能需要使用 elementFromPoint 检查它上面是否没有任何东西，但它有点长。

```
function isInViewport(element) {
  var rect = element.getBoundingClientRect();
  var windowHeight = window.innerHeight || document.documentElement.clientHeight;
  var windowWidth = window.innerWidth || document.documentElement.clientWidth;

  return rect.bottom > 0 && rect.top < windowHeight && rect.right > 0 && rect.left < windowWidth;
} 
```

# vba - Excel VBA代码模块的源代码控制

> ID：704759
> 
> 赞同：26
> 
> 时间：2009-04-01T09:28:53.023
> 
> 标签：vba, excel

我希望能够对我的 Excel 电子表格的 VBA 模块（当前使用 Excel 2003 SP3）进行源代码控制，以便我可以共享和管理一堆不同电子表格使用的代码 - 因此我想重新加载它们从打开电子表格时的文件。

我有一个名为 Loader.bas 的模块，我用它来完成大部分工作（加载和卸载所需的任何其他模块）——我希望能够尽快从文件中加载它随着电子表格的打开。

我已将以下代码附加到 Workbook_Open 事件（在 ThisWorkbook 类中）。

```
Private Sub Workbook_Open()
    Call RemoveLoader
    Call LoadLoader
End Sub 
```

其中 RemoveLoader（也在 ThisWorkbook 类中）包含以下代码：

```
Private Sub RemoveLoader()
    Dim y As Integer
    Dim OldModules, NumModules As Integer
    Dim CompName As String

    With ThisWorkbook.VBProject
        NumModules = ThisWorkbook.VBProject.VBComponents.Count
        y = 1
        While y <= NumModules
            If .VBComponents.Item(y).Type = 1 Then
                CompName = .VBComponents.Item(y).Name
                If VBA.Strings.InStr(CompName, "Loader") > 0 Then
                    OldModules = ThisWorkbook.VBProject.VBComponents.Count
                    .VBComponents.Remove .VBComponents(CompName)
                    NumModules = ThisWorkbook.VBProject.VBComponents.Count
                    If OldModules - NumModules = 1 Then
                        y = 1
                    Else
                        MsgBox ("Failed to remove " & CompName & " module from VBA project")
                    End If
                End If
            End If
            y = y + 1
        Wend
    End With
End Sub 
```

这可能有点过于复杂且略显粗糙——但我正在尽我所能找到它来加载外部模块！

通常，当我打开电子表格时，RemoveLoader 函数会发现 VBA 项目中已经包含一个无法删除的“Loader1”模块，并且它也无法从文件中加载新的 Loader 模块。

如果我想做的事情是可能的，有什么想法吗？Excel 似乎非常喜欢将 1 附加到这些模块名称 - 无论是在加载还是删除时（我不确定是哪个）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-09-22T23:47:55.213

这里有一个很好的解决vba版本控制问题的方法：[https ://github.com/hilkoc/vbaDeveloper](https://github.com/hilkoc/vbaDeveloper)

这样做的好处是它会在您保存工作簿后立即*自动导出您的代码。*此外，当您打开工作簿时，它会导入代码。

您不需要运行任何构建脚本或 maven 命令，也不需要对工作簿进行任何更改。它适用于所有人。

它还解决了将 ModName 等模块作为 ModName1 导入到重复模块中的导入问题。导入工作正常，即使多次执行。

作为奖励，它带有一个简单的代码格式化程序，允许您在 VBA 编辑器中编写您的 vba 代码时对其进行格式化。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-09-09T21:48:31.950

查看 VBAMaven 页面。我有一个使用相同概念的本土解决方案。我有一个包含一堆源代码、一个 ant 构建和一个“导入”VB 脚本的通用库。Ant 控制构建，它采用一个空白的 excel 文件并将所需的代码推入其中。@Mike 是绝对正确的——任何重复的模块定义都会自动在模块名称后面附加一个数字。此外，类模块（如 Sheet 和 ThisWorkbook 中的）类需要特殊处理。您无法创建这些模块，您必须读取输入文件并将缓冲区写入适当的模块。这是我目前用来执行此操作的 VB 脚本。包含@分隔文本的部分（即@build file@）是占位符——ant build 用有意义的内容替换这些标签。它并不完美，但对我有用。

```
''
' Imports VB Basic module and class files from the src folder
' into the excel file stored in the bin folder. 
'

Option Explicit

Dim pFileSystem, pFolder,  pPath
Dim pShell
Dim pApp, book

Dim pFileName

pFileName = "@build file@"

Set pFileSystem = CreateObject("Scripting.FileSystemObject")

Set pShell = CreateObject("WScript.Shell")
pPath = pShell.CurrentDirectory

If IsExcelFile (pFileName) Then
    Set pApp = WScript.CreateObject ("Excel.Application")
    pApp.Visible = False
    Set book = pApp.Workbooks.Open(pPath & "\build\" & pFileName)
Else
    Set pApp = WScript.CreateObject ("Word.Application")
    pApp.Visible = False
    Set book = pApp.Documents.Open(pPath & "\build\" & pFileName)
End If

'Include root source folder code if no args set
If Wscript.Arguments.Count = 0 Then
    Set pFolder = pFileSystem.GetFolder(pPath & "\src")
    ImportFiles pFolder, book
    '
    ' Get selected modules from the Common Library, if any
    @common path@@common file@
Else
    'Add code from subdirectories of src . . .
    If Wscript.Arguments(0) <> "" Then
        Set pFolder = pFileSystem.GetFolder(pPath & "\src\" & Wscript.Arguments(0))
        ImportFiles pFolder, book
    End If
End If

Set pFolder = Nothing
Set pFileSystem = Nothing
Set pShell = Nothing

If IsExcelFile (pFileName) Then
    pApp.ActiveWorkbook.Save
Else
    pApp.ActiveDocument.Save
End If

pApp.Quit
Set book = Nothing
Set pApp = Nothing

'' Loops through all the .bas or .cls files in srcFolder
' and calls InsertVBComponent to insert it into the workbook wb.
'
Sub ImportFiles(ByVal srcFolder, ByVal obj)
    Dim fileCollection, pFile
    Set fileCollection = srcFolder.Files
    For Each pFile in fileCollection
        If Right(pFile, 3) = "bas _
          Or Right(pFile, 3) = "cls _
          Or Right(pFile, 3) = "frm Then
            InsertVBComponent obj, pFile
        End If
    Next
    Set fileCollection = Nothing
End Sub

'' Inserts the contents of CompFileName as a new component in 
'  a Workbook or Document object.
'
'  If a class file begins with "Sheet", then the code is
'  copied into the appropriate code module 1 painful line at a time.
'
'  CompFileName must be a valid VBA component (class or module) 
Sub InsertVBComponent(ByVal obj, ByVal CompFileName)
    Dim t, mName
    t = Split(CompFileName, "\")
    mName = Split(t(UBound(t)), ".")
    If IsSheetCodeModule(mName(0), CompFileName) = True Then
        ImportCodeModule obj.VBProject.VBComponents(mName(0)).CodeModule, _
                         CompFileName
    Else
        If Not obj Is Nothing Then
            obj.VBProject.VBComponents.Import CompFileName
        Else
            WScript.Echo  "Failed to import " & CompFileName
        End If
    End If 
End Sub

''
' Imports the code in the file fName into the workbook object
' referenced by mName.
' @param target destination CodeModule object in the excel file
' @param fName file system file containing code to be imported
Sub ImportCodeModule (ByVal target, ByVal fName)
    Dim shtModule, code, buf    
    Dim fso
    Set fso = CreateObject("Scripting.FileSystemObject") 
    Const ForReading = 1, ForWriting = 2, ForAppending = 3
    Const TristateUseDefault = -2, TristateTrue = -1, TristateFalse = 0

    Set buf = fso.OpenTextFile(fName, ForReading, False, TristateUseDefault)
    buf.SkipLine
    code = buf.ReadAll

    target.InsertLines 1, code
    Set fso = Nothing
End Sub

''
' Returns true if the code module in the file fName
' appears to be a code module for a worksheet.
Function IsSheetCodeModule (ByVal mName, ByVal fName)
    IsSheetCodeModule = False
    If mName = "ThisWorkbook" Then
       IsSheetCodeModule = False
    ElseIf Left(mName, 5) = "Sheet" And _
       IsNumeric(Mid (mName, 6, 1)) And _
       Right(fName, 3) = "cls Then
       IsSheetCodeModule = True
    End If
End Function

''
' Returns true if fName has a xls file extension
Function IsExcelFile (ByVal fName)
    If Right(fName, 3) = "xls" Then
        IsExcelFile = True
    Else
        IsExcelFile = False
    End If 
End Function 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-11-29T15:52:49.470

我已经为此工作了几个月。我想我想通了。

如果 VB 项目试图删除调用堆栈中包含某些内容的模块，它会延迟删除，直到调用堆栈弹出被替换的模块。

为避免模块位于调用堆栈中，请使用 Application.OnTime 启动您的代码

```
Private Sub Workbook_Open()

    'WAS: module_library (1)

    Application.OnTime (Now + TimeValue("00:00:01")), "load_library_kicker_firstiter"

End Sub 
```

如果您像我一样自我修复您的代码，您还必须使用相同的策略启动覆盖“调用”代码的代码。

我还没有进行广泛的测试，我处于完全庆祝模式，但这让我非常接近独立 .xls 文件中简单的 99.9% 自我修复代码，没有任何其他技巧

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-01T11:41:14.237

通常，当要求 Excel 导入模块并且已经存在同名的模块时，会发生“Loader1”的情况。因此，如果您导入“Loader”，然后再次加载它，您将获得“Loader1”。这是因为 Excel 不知道（或者可能只是不关心）它是否真的是同一件事，或者刚刚发生的新功能块是否具有相同的模块名称，所以无论如何它都会导入它。

我想不出一个完美的解决方案，但我想我会倾向于尝试将加载/卸载逻辑放在加载项中 - Workbook_Open 的东西看起来有点脆弱，并且在所有工作簿中都有它会是一个如果代码需要更改（永远不要说永远），将会非常痛苦。XLA 逻辑可能更复杂（一方面，捕获必要的事件更棘手），但至少它只会存在于一个地方。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-13T04:54:29.030

无法发表评论以发表评论

> 这里有一个很好的解决vba版本控制问题的方法：[https ://github.com/hilkoc/vbaDeveloper](https://github.com/hilkoc/vbaDeveloper)

关于使用此 XLAM 保存自定义 VBAProject。在 Build.bas 中试试这个：

```
'===============
Public Sub testImport()
    Dim proj_name As String
    Dim vbaProject As Object

    'proj_name = "VBAProject"
    'Set vbaProject = Application.VBE.VBProjects(proj_name)

    Set vbaProject = Application.VBE.ActiveVBProject
    proj_name = vbaProject.name

    Build.importVbaCode vbaProject
End Sub
'===============
Public Sub testExport()
    Dim proj_name As String
    Dim vbaProject As Object

    'proj_name = "VBAProject"
    'Set vbaProject = Application.VBE.VBProjects(proj_name)

    Set vbaProject = Application.VBE.ActiveVBProject
    proj_name = vbaProject.name

    Build.exportVbaCode vbaProject
End Sub
'=============== 
```

这将导出/导入活动 VBA 项目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-23T14:40:07.023

如果您不需要自动导出 VBA 代码，以下是一个易于实现的答案。只需调用以下子程序，它将在名为“VC_nameOfTheWorkBook”的子文件夹中导出（作为文本）当前活动工作簿的 VBA 代码。如果您的项目是 .xlam，则需要临时将 IsAddin 属性设置为 false。然后您可以轻松地将新的子文件夹添加到 Git。这是对 Steve Jansen[在此处](https://gist.github.com/steve-jansen/7589478)找到的代码的轻微修改。有关更完整的解决方案，请参阅 Ron de Bruin[帖子](http://www.rondebruin.nl/win/s9/win002.htm)。

您需要在 VBE 编辑器中设置对“Microsoft Visual Basic For Applications Extensibility 5.3”和“Microsoft Scripting Runtime”的引用。

```
Public Sub ExportVisualBasicCode()
    Const Module = 1
    Const ClassModule = 2
    Const Form = 3
    Const Document = 100
    Const Padding = 24
    Dim VBComponent As Object
    Dim path As String
    Dim directory As String
    Dim extension As String
    Dim fso As New FileSystemObject
    directory = ActiveWorkbook.path & "\VC_" & fso.GetBaseName(ActiveWorkbook.Name)
    If Not fso.FolderExists(directory) Then
        Call fso.CreateFolder(directory)
    End If
    Set fso = Nothing
    For Each VBComponent In ActiveWorkbook.VBProject.VBComponents
        Select Case VBComponent.Type
            Case ClassModule, Document
                extension = ".cls"
            Case Form
                extension = ".frm"
            Case Module
                extension = ".bas"
            Case Else
                extension = ".txt"
        End Select

        On Error Resume Next
        Err.Clear

        path = directory & "\" & VBComponent.Name & extension
        Call VBComponent.Export(path)

        If Err.Number <> 0 Then
            Call MsgBox("Failed to export " & VBComponent.Name & " to " & path, vbCritical)
        Else
            Debug.Print "Exported " & Left$(VBComponent.Name & ":" & Space(Padding), Padding) & path
        End If

        On Error GoTo 0
    Next
End Sub 
```

# .net - .net 中的日期格式

> ID：704764
> 
> 赞同：0
> 
> 时间：2009-04-01T09:30:15.597
> 
> 标签：.net, vb.net

我的日期是 2009 年 4 月 1 日。我想格式化日期，以便月份显示为 4。不仅适用于上面给出的日期，而且适用于给出的任何日期。任何人都可以提供适当的代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T09:47:30.390

使用 DateTime DataType 的**ToShortDateString**函数以您指定的格式获取日期的字符串表示形式。

```
 date.ToShortDateString() 
```

这是MSDN 文档的[链接。](http://msdn.microsoft.com/en-us/library/system.datetime.toshortdatestring.aspx)DateTime DataType 有许多预定义的 ToString 函数，以使显示的格式更容易。该链接还解释了函数的文化敏感性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T14:27:36.957

要将月份作为整数获取，您可以使用它。

```
 Dim inputDate As String = "April 1, 2009"
    Dim outputDate As Date = Date.Parse(inputDate)
    Dim month As Integer = outputDate.Month 
```

当然，您需要确保 inputDate 有效。为此，您可以使用 DateTime.TryParse 而不是 DateTime.Parse。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-12T10:37:26.757

与 thedate.Month 一样，thedate.ToString("format string") 也很有效。“MM”代表月份，可以任意组合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-12T11:27:09.277

如果您打算在将月份转换为 int 后使用整个日期，我还建议使用 .ToString()

```
 Dim strDate As String = "April,1,2009"
        Dim [date] As DateTime = DateTime.Parse(strDate)
        Dim sDate As String = [date].ToString("M,d,yyyy") 
```

抱歉，如果格式很奇怪，但我是 C# 开发人员并使用了在线转换器。

# asp.net - 从缓存中删除特定项目 (ASP.NET)

> ID：704765
> 
> 赞同：11
> 
> 时间：2009-04-01T09:30:21.587
> 
> 标签：asp.net, caching

我正在向具有特定前缀的 ASP.NET 缓存中添加一堆项目。我希望能够遍历缓存并删除这些项目。

我尝试这样做的方式是这样的：

```
 foreach (DictionaryEntry CachedItem in Cache)
    {
        string CacheKey = CachedItem.Key.ToString();
        if(CacheKey.StartsWith(CACHE_PREFIX){
            Cache.Remove(CacheKey);
        }
    } 
```

我可以更有效地做到这一点吗？

我曾考虑创建一个临时文件并添加依赖于该文件的项目，然后删除该文件。杀完了吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-04-01T09:39:10.707

在迭代集合时，您无法从集合中删除项目，因此您需要执行以下操作：

```
List<string> itemsToRemove = new List<string>();

IDictionaryEnumerator enumerator = Cache.GetEnumerator();
while (enumerator.MoveNext())
{
    if (enumerator.Key.ToString().ToLower().StartsWith(prefix))
    {
        itemsToRemove.Add(enumerator.Key.ToString());
    }
}

foreach (string itemToRemove in itemsToRemove)
{
    Cache.Remove(itemToRemove);
} 
```

这种方法很好，比缓存依赖项更快更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T09:35:21.917

您可以编写一个子类来`CacheDependency`适当地进行失效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-09T17:01:47.587

仅出于此目的，您应该在缓存中保留另一个项目。假设您使用以下键缓存 10.000 个项目：cache_prefix_XXX。因此，添加一个仅以 cache_prefix 作为其键的项目并添加其余项目并依赖于此键，您可以控制所有项目的删除。要考虑的一件事是优先事项。将该特定项设置为比实际数据项更高的优先级。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T09:36:15.207

这实际上取决于您的缓存项目的数量以及您进行清理的频率。只有当它实际上是一个性能问题时，我才会担心它 - 即测量它。

除非您做一些极端的事情，否则您的解决方案对我来说很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-15T20:12:51.750

对于缓存清理，我假设您需要在发现缓存项过多时手动运行它。使用 MS lib 缓存块，它可以自动为您完成这项工作。在缓存配置中；您可以设置属性 maximumElementsInCacheBeforeScaveging；一旦缓存项的数量超过限制，缓存管理器将自动清理缓存。

# firefox - 为什么 Firefox 允许拖拽图片而不是丢弃图片？

> ID：704766
> 
> 赞同：3
> 
> 时间：2009-04-01T09:30:24.377
> 
> 标签：firefox, user-interface, drag-and-drop

如果您通过 Firefox 浏览网页，则页面上的任何图像都可以拖动到屏幕上的任何位置，但不能拖放。其他浏览器如 IE 或 Chrome 不允许拖动图像。

这是一个问题吗？为什么 Firefox 允许拖动？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-01T09:34:47.473

您可以将图像（如您最喜欢的独角兽图片，我假设）拖动到资源管理器窗口，它将被保存在那里。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-01T09:38:02.347

它确实允许你放弃。拖放到资源管理器/桌面并粘贴图片，拖放到输入字段或地址栏并删除图像 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T09:34:41.730

html 不支持拖放。RIA 和一些 AJAX/javascript 页面可能允许拖动图像……例如购物车。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-04-01T09:55:03.070

您可以在 firefox 配置中禁用此功能。

[http://www.google.com/search?q=firefox+image+drag](http://www.google.com/search?q=firefox+image+drag)

# c#-2.0 - 在 C# 中为标签分配双精度值

> ID：704770
> 
> 赞同：2
> 
> 时间：2009-04-01T09:31:47.697
> 
> 标签：c#-2.0

如何为字符串分配双精度值？

例子 ：

双a = 5.5，b = 6.0；
双倍总和 = a + b ;

Lable1.Text = sum.ToString();

结果：
11.5

但是在标签中我只得到 11 ......我如何在标签中显示 11.5 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-01T09:33:41.407

```
Label1.Text = sum.ToString("#0.0"); 
```

一般来说，“0”是零占位符，“#”是数字占位符。[你可以在这里](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)找到更多信息。你也可以试试

```
Label1.Text = sum.ToString("F1"); 
```

其中 1 代表小数点后一位。

# .net - .net 中的 Windows 服务无法解析 tns 服务名称

> ID：704772
> 
> 赞同：3
> 
> 时间：2009-04-01T09:32:32.047
> 
> 标签：.net, oracle, windows-services, windows-server-2003

我已将我们应用程序的一个组件从 Web 服务移至 Windows 服务。它从 web 服务完美地连接到 oracle，但拒绝从 Windows 服务中看到 Tns 名称。我已经完全控制了运行该服务的帐户的 ORAHOME 目录。

我还通过使用 runas regedit 作为服务帐户检查了注册表的服务帐户权限，它可以看到 HKLM\SOFTWARE\ORACLE\HOME0 详细信息和 HKLM\SOFTWARE\ORACLE\ALL_HOMES。所有的 ORACLE_HOME 键都指向同一个目录。

我可以以服务帐户身份登录并 TNSPing sid 'UAT' 没有问题：

```
'OK (70 msec)'
```

我已将进程监视器附加到进程，并且服务帐户（最终在扫描了大部分注册表之后）看到了 tnsnames.ora，甚至读取了它。

你在键盘后面偷笑吗？你能帮我吗！

```
Cause: OracleException

Source: System.Data.OracleClient
Message: ORA-12154: TNS:could not resolve service name
   at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.OracleClient.OracleConnection.Open() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-24T11:25:45.453

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T23:05:03.203

尝试将 Windows 环境变量 TNS_ADMIN 设置为 tnsnames.ora 文件所在的路径并重新启动服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T04:44:12.840

运行进程监视器以​​查看它是否正在加载 TNSNAMES.ORA 文件。我怀疑是这样，但是您作为该用户的名称解析被破坏了。

如果可以使用服务帐号交互登录，尝试使用 tnsping 看看是否可以连接到该名称。

Oracle 按以下顺序解析文件（根据 Metalink 文章 114085.1）：

1.  当前工作目录中的 Oracle Net 文件
2.  TNS_ADMIN 定义为用户/会话环境变量
3.  TNS_ADMIN 定义为全局环境变量
4.  注册表中定义的 TNS_ADMIN
5.  %ORACLE_HOME%\network\admin（Oracle 默认位置）中的 Oracle Net 文件

查看哪些（如果有）正在使用 Process Monitor 读取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T10:46:47.970

检查该服务是否可以通过告诉 oracle tnsnames.ora 文件所在的位置来访问注册表项。从内存中，它是带有 TNS_NAMES 注册表字符串的 HKLM\SOFTWARE\ORACLE\Key_Client，它是保存 tnsnames.ora 文件的文件夹。您也可以在 HKCU 树中创建相同的内容。

哎呀！现在我在工作，我可以看到字符串名称应该是 TNS_ADMIN。还可以尝试环境变量 TNS_ADMIN 并确保 HKCU 中没有任何内容。

还注意到您需要与 tnsnames.ora 位于同一文件夹中的 sqlnet.ora 文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T16:07:39.090

First of all check your operating system is it 32bit or 64bit. If it is 64bit then install oracle express edition 64bit then it will not generate any error and run successfully....

visit [http://behindfutureworld.weebly.com](http://behindfutureworld.weebly.com) for more detail.....

# python - 使用 python ctypes 将共享库中的浮点缓冲区转换为 python 字符串

> ID：704777
> 
> 赞同：4
> 
> 时间：2009-04-01T09:34:40.827
> 
> 标签：python, pointers, return-value, ctypes

我正在尝试使用 python ctypes 来使用共享库中的这两个 C 函数：

```
bool decompress_rgb(unsigned char *data, long dataLen, int scale)
float* getRgbBuffer()
```

第一个功能工作正常。我可以通过将一些调试代码放入共享库并检查输入来判断。

问题是把数据拿出来。RGB 缓冲区是一个指向浮点数的指针（显然），并且该指针在应用程序的生命周期内保持不变。因此，每当我想解压缩图像时，我都会调用`decompress_rgb`然后需要查看`getRgbBuffer`. 我知道缓冲区大小是 (720 * 288 * sizeof(float)) 所以我想这必须在某个地方发挥作用。

没有`c_float_p`类型所以我想我会试试这个：

```
getRgbBuffer.restype = c_char_p
```

然后我做：

```
ptr = getRgbBuffer()
print "ptr is ", ptr
```

仅输出：

```
ptr = 3078746120
```

我猜这是实际地址而不是内容，但即使我成功取消引用指针并获取内容，它也只是第一个字符。

如何将整个缓冲区的内容转换为 python 字符串？

**编辑：**不得不改变：

```
getRgbBuffer.restype = c_char_p
```

到

```
getRgbBuffer.restype = c_void_p
```

但后来 BastardSaint 的回答奏效了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T10:39:03.153

没有完全测试，但我认为这是沿着这条线的东西：

```
buffer_size = 720 * 288 * ctypes.sizeof(ctypes.c_float)
rgb_buffer = ctypes.create_string_buffer(buffer_size) 
ctypes.memmove(rgb_buffer, getRgbBuffer(), buffer_size) 
```

关键是`ctypes.memmove()`功能。从[ctypes 文档](http://python.net/crew/theller/ctypes/reference.html)：

> **`memmove(dst, src, count)`**
> 与标准 C memmove 库函数相同：将`count`字节从复制`src`到`dst`. `dst`并且`src`必须是可以转换为指针的整数或 ctypes 实例。

运行上述代码段后，`rgb_buffer.value`将返回内容直到第一个`'\0'`. 要将所有字节作为 python 字符串获取，您可以对整个内容进行切片：`buffer_contents = rgb_buffer[:]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T14:18:53.640

自从我使用 ctypes 已经有一段时间了，我没有返回“双 *”的东西，足以方便地测试它，但如果你想要一个 c_float_p：

```
c_float_p = ctypes.POINTER(ctypes.c_float) 
```

阅读 BastardSaint 的答案，您只需要原始数据，但我不确定您是否将其作为没有 c_float_p 的解决方法。

# c++ - 包含存储在向量中的 auto_ptr 的类

> ID：704780
> 
> 赞同：3
> 
> 时间：2009-04-01T09:35:09.763
> 
> 标签：c++, stl

在对将具有 std::auto_ptr 作为其成员变量的类的对象存储在 std::vector 中是否安全的回答中[？](https://stackoverflow.com/questions/700588/is-it-safe-to-store-objects-of-a-class-which-has-an-stdautoptr-as-its-member-v)我说过包含 auto_ptr 的类可以存储在向量中**，前提是该类具有用户定义的复制构造函数**。

有几条评论表明情况并非如此，所以这个问题是为了解决这个问题。考虑以下代码：

```
#include <memory>
#include <vector>
using namespace std;

struct Z {};

struct A {

    A( Z z ) 
        : p( new Z(z) ) {} 

    A( const A & a ) 
        : p( a.p.get() ? new Z( *a.p.get()) : 0 ) {}

    // no assigment op or dtor defined by intent

    auto_ptr <Z> p;
};

int main() {
    vector <A> av;              
    Z z;                    
    A a(z);
    av.push_back( a );      
    av.push_back( A(z) );   
    av.clear();             
} 
```

请检查上述内容，并在您的回复中指出 C++ 标准含义中的未定义行为可能会出现在以这种特定方式使用的特定类中。我对这个类是否有用、表现良好、可排序或它在异常情况下的表现不感兴趣。

**另请注意，这不是关于创建 auto_ptrs 向量的有效性的问题——我很清楚与此相关的问题。**

> 感谢大家对回想起来可能是一个相当愚蠢的问题的投入。我想我太专注于复制 ctor 而忘记了分配。我的接受分数的幸运赢家（分数意味着奖品！）是一个典型的详尽解释（对不起earwicker **）**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T13:43:42.087

存储在容器中的对象必须是“CopyConstructable”和“Assignable”（C++2008 23.1/3）。

您的班级试图处理 CopyConstructable 要求（尽管我认为它仍然不满足它 - 我编辑了该参数，因为它不是必需的，因为我认为它是有争议的），但它不处理 Assignable 要求. 要可分配 (C++2008 23.1/4)，以下条件必须为真，其中`t`是 的 值`T`并且`u`是 (可能`const`)的值`T`：

> `t = u` 返回 a`T&` 并且`t`等价于`u`

该标准还在注释 (20.4.5/3) 中说：“`auto_ptr`不满足标准库容器元素的 CopyConstructible 和 Assignable 要求，因此实例化标准库容器`auto_ptr`会导致未定义的行为。”

由于您没有声明或定义赋值运算符，因此将提供一个使用 的赋值运算符的隐式`auto_ptr`运算符，这绝对`t`不等同于`u`，更不用说它根本不适用于 " `const T u`" 值（是[Earwicker 的回答](https://stackoverflow.com/questions/704780/class-containing-autoptr-stored-in-vector/705153#705153)所指出的——我只是指出标准的确切部分）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T11:51:44.100

我认为上面的代码不一定会编译。当然， 的实现者`std::vector`可以自由地要求赋值运算符可用，从`const A&`？

刚刚尝试过，它无法在 Visual Studio C++ 2008 Service Pack 1 上编译：

> 二进制 '=' ：没有找到采用 'const A' 类型的右手操作数的运算符（或者没有可接受的转换）

我的猜测是，在 Herb Sutter 的指导下，VC++ 中的容器类尽一切努力对其类型参数施加标准要求，特别是使其难以`auto_ptr`与它们一起使用。当然，他们可能已经超越了标准设定的界限，但我似乎记得它要求真正的分配和真正的复制构造。

但是，它确实在 g++ 3.4.5 中编译。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-01T13:57:15.250

试图将位置列表放在一起，使示例未定义行为。

```
#include <memory>
#include <vector>
using namespace std;

struct Z {};

struct A {

    A( Z z ) 
        : p( new Z(z) ) {} 

    A( const A & a ) 
        : p( a.p.get() ? new Z( *a.p.get()) : 0 ) {}

    // no assigment op or dtor defined by intent

    auto_ptr <Z> p;
};

int main() {
    vector <A> av;  
    ...
} 
```

我将检查直到您使用您的 type 实例化向量的行`A`。标准不得不说

在`23.1/3`：

> 这些组件中存储的对象类型必须满足 CopyConstructible 类型 (20.1.3) 的要求，以及 Assignable 类型的附加要求。

在`23.1/4`（强调我的）：

> 在表 64 中，T 是用于实例化容器的类型，t 是 T 的值，u 是（*可能是 const*）T的值。
> 
> ```
> +-----------+---------------+---------------------+
> |expression |return type    |postcondition        |
> +-----------+---------------+---------------------+
> |t = u      |T&             |t is equivalent to u |
> +-----------+---------------+---------------------+ 
> ```
> 
> 表 64

在`12.8/10`：

> 如果类定义没有显式声明复制赋值运算符，则隐式声明一个。类 X 的隐式声明的复制赋值运算符将具有以下形式
> 
> ```
> X& X::operator=(const X&) 
> ```
> 
> 如果
> 
> *   X 的每个直接基类 B 都有一个复制赋值运算符，其参数类型为 const B&、const volatile B& 或 B，并且
> *   对于 X 的所有属于类类型 M（或其数组）的非静态数据成员，每个此类类型都有一个复制赋值运算符，其参数类型为 const M&、const volatile M& 或 M。
> 
> 否则，隐式声明的复制赋值运算符将具有以下形式
> 
> ```
> X& X::operator=(X&) 
> ```

（注意最后一句和倒数第二句）

在`17.4.3.6/1 and /2`：

> 在某些情况下（替换函数、处理函数、对用于实例化标准库模板组件的类型的操作），C++ 标准库依赖于 C++ 程序提供的组件。如果这些组件不满足其要求，则标准对实施没有要求。
> 
> 特别是，在以下情况下效果是不确定的：
> 
> *   对于在实例化模板组件时用作模板参数的类型，如果对该类型的操作未实现适用的要求子条款（20.1.5、23.1、24.1、26.1）的语义。除非另有说明，否则对此类类型的操作可以通过抛出异常来报告失败。

现在，如果您查看规范，`auto_ptr`您会注意到它有一个带有非 const 的复制赋值运算符`auto_ptr`。因此，您的类的隐式声明的复制赋值运算符*也*将采用非常量类型作为其参数。如果你仔细阅读上面的地方，你会看到它说用你写的类型实例化一个向量是未定义的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T10:05:20.643

由于常规`auto_ptr`语义可能表明在复制过程中传递了所有权，因此我宁愿在此处使用`boost::scoped_ptr`. 当然缺少赋值运算符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T11:57:13.963

下面的呢？

```
cout << av[ 0 ] << endl; 
```

此外，从概念上讲，副本应该使所复制的项目保持不变。这在您的实施中被违反。

`g++ -pedantic ...`（你的原始代码可以用Comeau 编译，但不能用 VS2005编译，这是另一回事。）

# iphone - 只要我不关闭 iPhone，applicationWillTerminate 就可以工作

> ID：704789
> 
> 赞同：0
> 
> 时间：2009-04-01T09:38:27.493
> 
> 标签：iphone

保存我使用的应用程序的一些变量：

-(void)applicationWillTerminate:(UIApplication *)application {

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
[prefs setFloat: self.viewController.sLabel.contentOffset.y forKey:@"floatKey"];    
[prefs setObject:self.viewController.newText forKey:@"stringVal"];
[prefs synchronize]; 
```

}

并通过按钮检索它们，我执行以下操作：

-（IBAction）riprendi：（id）发件人{

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];  
float myFloat = [prefs floatForKey:@"floatKey"]; 
```

//这里的一些动作

}

一切都在模拟器上工作。但是，在真正的 iPhone 上使用它时，变量的保存和检索仅在您按下 Home 按钮、退出应用程序并再次打开时才有效，但在您关闭/打开 iPhone 时则无效。在这种情况下，一旦您重新打开应用程序，变量就会丢失......

我错过了什么？？这实际上让我发疯:(

非常感谢；）法比奥

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-04T11:10:56.710

如果您的意思是通过说“打开/关闭”来点击手机顶部的锁定按钮，那么它不会起作用，因为锁定手机不会导致应用程序退出。`applicationWillTerminate:`只有当您将应用程序退出到主屏幕或其他应用程序时，才会调用您的方法。当用户按下睡眠按钮时，`applicationWillResignActive:`将发送到您的应用程序委托。

[Apple 的 iPhone OS 编程指南](http://developer.apple.com/iphone/library/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ApplicationEnvironment/ApplicationEnvironment.html#//apple_ref/doc/uid/TP40007072-CH7-SW14)中有一节是关于处理中断的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-03-31T01:14:58.560

根据苹果的文档

“NSUserDefaults 缓存信息以避免每次需要默认值时都必须打开用户的默认数据库。”

如果你想确保事情被保存，你应该在你的偏好上调用“同步”。

# c# - 存储过程中的企业库缓存参数？

> ID：704794
> 
> 赞同：3
> 
> 时间：2009-04-01T09:39:19.957
> 
> 标签：c#, stored-procedures, data-access-layer, enterprise-library

我正在尝试与我的同事标准化一些数据访问代码。上述一位同事断言 EntLib 数据访问块试图缓存存储过程调用上的参数。

我看过反射器，有一些证据表明它可能正在缓存它们。但我*认为*在以下情况下不会。

```
 public Dictionary<long, string> GetQueue(int maxItems)
    {
        var sq = new SqlDatabase(_connString.ConnectionString);

        var result = new Dictionary<long, string>();

        using (var cmd = (SqlCommand)sq.GetStoredProcCommand("dbo.GetQueue"))
        {
            sq.AddInParameter(cmd, "maxItems", DbType.Int32, maxItems);

            var reader =  cmd.ExecuteReader(CommandBehavior.CloseConnection);

            while (reader.Read())
            {
                long id = reader.GetInt64(reader.GetOrdinal("id"));
                string fileName = reader.GetString(reader.GetOrdinal("meta_data_filename"));

                result.Add(id, fileName);
            }
        }

        return result;
    } 
```

任何人都可以确认或否认这一点吗？

我正在使用 EntLib 4.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T13:50:17.163

它确实习惯了，我把代码撕掉并扔进了我的图书馆。

它使用`sp_help`并解析输出以确定数据类型。

这些天，我撕掉了代码，.Net 在添加参数方面要好得多。

```
cmd.Parameters.AddWithValue("@name",somevalue) 
```

在你的例子中，你一直在反射......你会发现它是沿着这条路径完成的 GetStoredProcCommand()

您将得到一个 Command 对象，该对象已经填充了参数

ent lib代码是有版权的，但是代码和这个几乎一模一样

[http://code.google.com/p/dbdotnet/source/browse/trunk/ParameterCache.cs](http://code.google.com/p/dbdotnet/source/browse/trunk/ParameterCache.cs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-08-21T15:13:30.387

据我所知，它不会缓存参数。使用相同的数据库对象实例，我在运行跟踪时多次调用 DiscoverParameters。每次我调用 DiscoverParameters 时，我都可以看到 [sys].[sp_procedure_params_100_managed]，所以看起来它每次都在进行往返。

这是一个如何自己做的例子，看起来可能没问题：

[http://davidhayden.com/blog/dave/archive/2006/11/03/CachingStoredProcedureParameters.aspx](http://davidhayden.com/blog/dave/archive/2006/11/03/CachingStoredProcedureParameters.aspx)

# c# - SHA 哈希的最佳临时密码长度

> ID：704798
> 
> 赞同：2
> 
> 时间：2009-04-01T09:42:40.447
> 
> 标签：c#, sha1, change-password

在创建“忘记密码”机制时，我们可能希望为使用 SHA1 存储的用户创建一个临时密码（请随意建议其他 C# Cryptography 机制）。

我们应该设置多长时间的临时密码？太短了，可能会被暴力破解。太长并且不必要的长度是多余的，因为字符串无论如何都是散列的？（因为 20 个字符和 50 个字符的字符串无论如何都会产生相同长度的哈希）

**更新**
对不起，如果这是误导。当然我们可以从空中选择一个数字，但我想知道是否有一个很好的数学理由选择 13 而不是 12。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T09:45:05.980

我一般用10个字符。没有特别的原因，只是我猜测用户选择的密码长度高于平均长度。

仅仅因为它是随机生成的，它可能比用户选择的任何东西更安全，更难暴力破解。人们选择愚蠢的密码，例如 myspace1、stackoverflow1、12341234 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T09:57:03.690

我认为这是关于临时密码的好建议：

[基于表单的网站身份验证权威指南](https://stackoverflow.com/questions/549/the-definitive-guide-to-website-authentication-beta/477583#477583)

它谈到避免生成它们以支持用户想要的实际操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T09:45:41.563

如果密码是字母数字字符，则每个字符只有大约 6 位可用数据，因此您错误地认为密码长度超过 20 个字符是没有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T09:46:54.103

似乎您担心使临时密码比用户的密码更强大...而实际上，诸如 10 个字符的 base-64（或类似的标点符号等）之类的东西将很难破解并且要强大得多比用户生成的密码....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T09:48:58.453

也将其设置为可变大小（例如 8-12 个字符），这将使暴力破解变得更加困难……如果攻击者知道您返回 X 字符密码，他们所要做的就是尝试所有带有 N 的密码……假设N 很大，这将是不切实际的，但改变 N 的大小至少会使他们更难。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T09:49:58.417

Steve Gibson 创建了一个“[超高安全性密码生成器](https://www.grc.com/passwords.htm)”。
在该页面上，他在每个页面显示上生成 3 个不同的密码：

*   64 个随机十六进制字符（0-9 和 AF）
*   63 个随机可打印 ASCII 字符
*   63 个随机字母数字字符（az、AZ、0-9）

他还解释了这背后的原因。这是一个很好的阅读。希望这可以帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-01T09:50:24.797

选择您的网站为用户推荐的任何长度。当生成一个随机的 base64 字符字符串时，我会在晚上使用 8 字符密码安全地入睡。但当然我会限制登录尝试每 X 秒一次，并在 Y 次尝试失败后暂时禁用帐户。

并且记住在散列之前添加每个用户唯一的**盐**，以阻止基于数据库的攻击。

# linux - 在linux平台使用dll win32

> ID：704802
> 
> 赞同：3
> 
> 时间：2009-04-01T09:43:53.330
> 
> 标签：linux, dll, wine

我想在 Linux 中为 Win32 使用 DLL 库。

我可以使用 Wine 库来做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-06T02:11:40.953

您应该可以使用[winelib](https://wiki.winehq.org/Winelib)来做到这一点。 [以下](https://web.archive.org/web/20110507055055/http://www.linux.ie/articles/interviews/weigand.php)是对著名 WINE 开发人员 Ulrich Weigand 的采访：

> *   我设法让 WineLIB 使用 Windows dll 进行 VQF 播放。您是否预见到人们使用 WineLIB 在 Linux 中编写需要闭源 Windows dll 的应用程序？
>     **当然。IMO 这是 WineLib 的主要功能之一：您可以使用它将本机 Windows DLL 链接到 Linux 应用程序。我认为这有很多有用的例子；想想 ODBC 驱动程序、视频编解码器等。（这就是为什么我最近添加了对在 WineLib 应用程序中执行甚至 16 位 DLL 的支持，因为 Win95 驱动程序倾向于降低到 16 位......）**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T10:59:29.593

只有当您的调用应用程序也是 win32 可执行文件时，您才能在 WINE 子系统中使用 win32 dll。否则，您应该拥有 dll 源并尝试将它们改编为相应编程语言的 linux 编译器。

# c# - 你如何在 UML 中为 c# 属性建模？

> ID：704806
> 
> 赞同：1
> 
> 时间：2009-04-01T09:44:28.087
> 
> 标签：c#, attributes, uml

我想在 UML 中对 c# 类属性和变量属性（不是 UML 属性）进行建模，但不知道该怎么做。

```
[AttributeForTheClass]
class SomeClass
{
    [AttributeForTheField]
    int SomeField;

    [AttributeForTheMethod]
    int SomeMethod(
        [AttributeForTheParameter]int someParam)
    {
        ...
    }
} 
```

你如何建模：

[AttributeForTheClass] 和 [AttributeForTheField] 和 [AttributeForTheMethod]

目前我们使用 Sparx Enterprise Architect。

我知道 c# 属性是 ac# 语言功能，但我不确定它们是否在 UML 中定义。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T09:52:59.660

当您对某些具有属性的 C# 代码进行逆向工程时会发生什么？你有刻板印象或标记值吗？

从建模的角度来看，它们应该是原型，属性的任何参数都应该是标记值，但如果可以的话，使用工具支持的东西会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T11:47:40.977

EA 将属性导入为名称为“Attribute”的标记值，并将属性文本连接起来作为值：

`[WebService(Namespace = "http://dataservice/")];[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)];[System.ComponentModel.ToolboxItem(false)]`

# c# - 如果我在 using 语句中返回，对象是否仍然被释放？

> ID：704814
> 
> 赞同：4
> 
> 时间：2009-04-01T09:47:21.933
> 
> 标签：c#, idisposable, using-statement

**[在使用块中间返回的](https://stackoverflow.com/questions/662773/returning-in-the-middle-of-a-using-block)错误**

我认为问题标题相当明显，因此如果返回 true，则考虑以下代码是否会处理 SecurityDisabler？

```
public bool CreateProxyItem(string name, Sitecore.Data.ID sourceID, Sitecore.Data.ID targetID)
{
    // create an instance of the master database
    Sitecore.Data.Database master = Sitecore.Configuration.Factory.GetDatabase("master");

    // get the proxy item template
    Sitecore.Data.Items.TemplateItem proxyTemplate = master.Templates[Sitecore.TemplateIDs.Proxy];

    using (new Sitecore.SecurityModel.SecurityDisabler())
    {
        // get a reference to the proxy container item
        Item proxyContainer = master.Items["/sitecore/system/proxies/"];

        if (proxyTemplate != null && proxyContainer != null)
        {
            Item proxyItem = proxyContainer.Add(name, proxyTemplate);

            if (proxyItem != null)
            {
                proxyItem.Editing.BeginEdit();
                // editing here
                proxyItem.Editing.EndEdit();

                return true;
            }
        }
    }

    return false;
} 
```

# c# - C# 简单问题，如何循环遍历数组并内联显示值？

> ID：704815
> 
> 赞同：1
> 
> 时间：2009-04-01T09:47:29.250
> 
> 标签：c#

基本上我有这个，我知道它不会起作用，但它说明了我正在尝试做的事情：

MessageBox.Show("找到这些：" + 关键字[i] + " 关键字。");

我需要看到这个：

找到这些：Item1、Item2 关键字。

可能有1个关键字可能有4个，我该怎么做？

非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-01T09:49:18.390

您可以使用[string.Join](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)：

```
MessageBox.Show("Found these: " + string.Join(", ", keywords) 
                + " keywords."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T09:54:24.787

Jon Skeet 对 string.Join 有一个很好的回答。对于更复杂的格式，您的另一个选择是使用字符串生成器

```
StringBuilder sb = new StringBuilder();
seperator = "";
foreach(string current in keywords){
 sb.Append(seperator);
 sb.Append(current);
 seperator = ", ";
}

MessageBox.Show("Found these: " + sb.ToString() + " keywords."); 
```

# c# - HttpRuntime..cctor 需要永远执行

> ID：704818
> 
> 赞同：0
> 
> 时间：2009-04-01T09:48:39.467
> 
> 标签：c#, httpruntime, typeinitializer

死的简单代码：

```
using System;
using System.Diagnostics;
using System.Web;
using System.Web.Caching;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            Stopwatch sw = Stopwatch.StartNew();
            Cache cache = HttpRuntime.Cache;
            Console.WriteLine(sw.Elapsed.ToString());
            Console.ReadLine();
        }
    }
} 
```

而且我已经等待输出超过 5 分钟。这个问题大约在一周前开始出现（可能会更少），另外三台计算机（我同事的盒子）经历了相同的行为，除了其中一些设法`HttpRuntime`在一分钟内完成初始化，这仍然很奇怪。

有人经历过吗？我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T10:23:34.047

如果更简单的步骤没有显示任何内容，请查看[Mark "SysInternals" Russinovich 的博客，了解可能的方法。](http://blogs.technet.com/markrussinovich/default.aspx)有趣的条目包括“[延迟 Windows Vista 文件打开对话框](http://blogs.technet.com/markrussinovich/archive/2006/11/27/532465.aspx)的案例”和“ [Slooooow 系统的案例](http://blogs.technet.com/markrussinovich/archive/2008/09/24/3126858.aspx)”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T09:58:08.227

我会使用一些[SysInternals 工具](http://technet.microsoft.com/en-us/sysinternals/0e18b180-9b7a-4c49-8120-c47c5a693683.aspx)来确定它在做什么 - 无论是尝试建立网络连接等。Process Monitor 将向您显示文件和注册表访问；TCPView 将向您显示它打开了哪些端口。（您可能也想使用[WireShark](http://wireshark.org)来监控它在做什么。）

这是在本地运行，还是在 UNC 路径上运行？

# java - 获取html文件Java

> ID：704821
> 
> 赞同：1
> 
> 时间：2009-04-01T09:49:07.937
> 
> 标签：java

### 复制：

> [您如何以编程方式在 Java 中下载网页？](https://stackoverflow.com/questions/238547/how-do-you-programmatically-download-a-webpage-in-java)
> 
> [如何在 Java 中获取 html](https://stackoverflow.com/questions/31462/how-to-fetch-html-in-java)

我正在开发一个包含以下内容的应用程序：用户输入某个网站的 URL，然后应用程序必须分析该 URL。

如何使用 Java 访问 HTML 文件？我需要使用 HttpRequest 吗？这是怎么回事？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T10:00:36.847

URLConnection 适用于简单的情况。当涉及重定向之类的事情时，最好使用 Apache 的[HTTPClient](http://hc.apache.org/httpclient-3.x/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-01T09:57:08.417

您可以只使用 URLConnection。请参阅Sun 的此[Java 教程](http://java.sun.com/docs/books/tutorial/networking/urls/readingWriting.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T10:12:47.660

此代码从 URL 下载数据，将其视为二进制内容：

```
public class Download {

  private static void download(URL input, File output)
      throws IOException {
    InputStream in = input.openStream();
    try {
      OutputStream out = new FileOutputStream(output);
      try {
        copy(in, out);
      } finally {
        out.close();
      }
    } finally {
      in.close();
    }
  }

  private static void copy(InputStream in, OutputStream out)
      throws IOException {
    byte[] buffer = new byte[1024];
    while (true) {
      int readCount = in.read(buffer);
      if (readCount == -1) {
        break;
      }
      out.write(buffer, 0, readCount);
    }
  }

  public static void main(String[] args) {
    try {
      URL url = new URL("http://stackoverflow.com");
      File file = new File("data");
      download(url, file);
    } catch (IOException e) {
      e.printStackTrace();
    }
  }

} 
```

这种方法的缺点是它忽略了任何元数据，例如[Content-Type](http://en.wikipedia.org/wiki/MIME)，您可以通过使用[HttpURLConnection](http://java.sun.com/javase/6/docs/api/java/net/HttpURLConnection.html)（或更复杂的 API，如 Apache 的 API）获得。

为了解析 HTML 数据，您需要一个专门的 HTML 解析器来处理格式不正确的标记，或者在使用 XML 解析器进行解析之前先对其进行[整理。](http://jtidy.sourceforge.net/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T09:59:37.507

您可以使用 java.net.URL 然后打开输入流以从服务器读取 HTML。[请参阅此处](http://www.exampledepot.com/egs/java.net/ReadFromURL.html)的示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T13:05:47.887

有趣的是，我在前一周写了一个实用方法

```
/**
 * Retrieves the file specified by <code>fileUrl</code> and writes it to 
 * <code>out</code>.
 * <p>
 * Does not close <code>out</code>, but does flush.
 * @param fileUrl The URL of the file.
 * @param out An output stream to capture the contents of the file
 * @param batchWriteSize The number of bytes to write to <code>out</code>
 *                       at once (larger files than this will be written
 *                       in several batches)
 * @throws IOException If call to web server fails
 * @throws FileNotFoundException If the call to the web server does not
 *                               return status code 200\. 
 */
public static void getFileStream(String fileURL, OutputStream out, int batchWriteSize)
                            throws IOException{
    GetMethod get = new GetMethod(fileURL);
    HttpClient client = new HttpClient();
    HttpClientParams params = client.getParams();
    params.setSoTimeout(2000);
    client.setParams(params);
    try {
        client.executeMethod(get);
    } catch(ConnectException e){
        // Add some context to the exception and rethrow
        throw new IOException("ConnectionException trying to GET " + 
                fileURL,e);
    }

    if(get.getStatusCode()!=200){
        throw new FileNotFoundException(
                "Server returned " + get.getStatusCode());
    }

    // Get the input stream
    BufferedInputStream bis = 
        new BufferedInputStream(get.getResponseBodyAsStream());

    // Read the file and stream it out
    byte[] b = new byte[batchWriteSize];
    int bytesRead = bis.read(b,0,batchWriteSize);
    long bytesTotal = 0;
    while(bytesRead!=-1) {
        bytesTotal += bytesRead;
        out.write(b, 0, bytesRead);
        bytesRead = bis.read(b,0,batchWriteSize);;
    } 
    bis.close(); // Release the input stream.
    out.flush();        
} 
```

使用 Apache Commons 库，即

```
import org.apache.commons.httpclient.HttpClient;
import org.apache.commons.httpclient.methods.GetMethod;
import org.apache.commons.httpclient.params.HttpClientParams; 
```

# nhibernate - 如何最好地为以下 SQL Schema 设计实体数据类？

> ID：704822
> 
> 赞同：0
> 
> 时间：2009-04-01T09:49:11.277
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping

我有以下数据库架构：

[http://lh4.ggpht.com/_SDci0Pf3tzU/SdM3XnAmmxI/AAAAAAAEps/Ie3xW3ZVNfQ/styleerror.png](http://picasaweb.google.com/lh/photo/vbmcmlVEERL2NU159Sb_Vg?feat=embedwebsite)

问题是如何在 Nhibernate 中创建实体数据类？

这是否更好：

```
public class Store
{
    public virtual int Id { get; private set; }
    public virtual string Name { get; set; }
    public virtual IList<Product> Products { get; set; }
    public virtual IList<Employee> Staff { get; set; } 
```

}

```
public class Employee
{
    public virtual int Id { get; private set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
    public virtual Store Store { get; set; }
} 

public class Product
{
    public virtual int Id { get; private set; }
    public virtual string Name { get; set; }
    public virtual double Price { get; set; }
    public virtual IList<Store> StoresStockedIn { get; private set; }
} 
```

还是这样更好？公共类商店 { 公共虚拟 int Id { 获取；私人套装；} 公共虚拟字符串名称 { 获取；放; }

}

```
public class Employee
{
    public virtual int Id { get; private set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
    public virtual Store Store { get; set; }
} 

public class Product
{
    public virtual int Id { get; private set; }
    public virtual string Name { get; set; }
    public virtual double Price { get; set; }

}

public class StoreProduct
{
   public virtual List<Product> Products{get;set;}
   public virtual List<Store> Stores{get;set;};
} 
```

我认为第一个比第二个更容易理解，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T12:21:13.907

如果您修改“StoreProduct”表，使其没有代理主键，但存在 2 个外键列（ProductId 和 StoreId）的主键，那么您可以简单地将自己限制为 3 个实体：-员工-产品- 店铺

然后，您的 Store 类可以有一组产品，可以简单地将其映射为多对多关系。

```
public class Store
{
   public int Id {get;set;}
   public string Name {get;set;}

   public ISet<Product> Products = new HashedSet<Product>();
} 
```

在 Store.hbm.xml 映射中：

```
<set name="Products" table="StoreProducts">
   <key column="Store_Id" />
   <many-to-many class="Product" column="Product_Id" />
</set> 
```

所以，回答你的问题：第一个选择更好。

# security - Gmail 安全架构

> ID：704831
> 
> 赞同：2
> 
> 时间：2009-04-01T09:53:20.097
> 
> 标签：security, https

我正在尝试了解 gmail 的身份验证机制。我知道它在登录期间使用 https 传输用户凭据，然后其余的通信通过 http 进行。这是如何实现的？是否在初始会话期间通过 https 交换了某种密钥并在后续请求中使用？如果是，那么某种密钥协商协议（例如 Diffie-Hellman）是否更适合交换共享密钥而不是 https？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T09:57:55.340

https 使用非对称加密来获取对称密钥。在使用 https 设置 cookie 后，它们是通过 http 进行身份验证的来源。除非用户已将 https 设置为始终使用

# .net - 从 HTML 标签汤生成 .NET XmlDocument 的库

> ID：704832
> 
> 赞同：2
> 
> 时间：2009-04-01T09:53:21.670
> 
> 标签：.net, clr, html-parsing, xmldocument, html-agility-pack

我正在寻找一个 .NET 库，它可以从无效的 HTML 代码生成干净的 Xml 树，最好是 System.Xml.XmlDocument。IE 在遇到这种情况时应该尽最大努力猜测、修复和替换浏览器，并生成一个伪装的 XmlDocument。图书馆也应该得到很好的维护。:)

我意识到这有很多（太多了？）要问，我会很感激任何有用的线索。对于 Java，似乎有相当多的实现，但我宁愿不生成自己的绑定。到目前为止，对于 .NET，我发现[http://www.majestic12.co.uk/projects/html_parser.php](http://users.rcn.com/creitzel/tidy.html#dotnet)和[http://users.rcn.com/creitzel/tidy.html#dotnet](http://users.rcn.com/creitzel/tidy.html#dotnet)和[http://sourceforge .net/projects/tidyfornet](http://sourceforge.net/projects/tidyfornet)。

我还没有构建或测试任何这些，但是从（稀疏的）文档和罕见的更新来看，它们似乎没有我想要的东西。那么你有什么建议，无论是在这些选择中，还是从你过去的经验中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-01T09:59:19.970

[HTML Agility Pack 获得](http://www.codeplex.com/htmlagilitypack)了很高的评价。它肯定会进行解析/最佳猜测等。

该模型有意类似于 XmlDocument，包括用于查询的 SelectNodes 等。

如果需要xhtml输出，有`OptionOutputAsXml`flag；我假设将其设置为 true 并`Save`在 xhtml 中调用结果。

# linq - Linq 计数返回的结果

> ID：704833
> 
> 赞同：1
> 
> 时间：2009-04-01T09:53:28.677
> 
> 标签：linq

```
//Feedback Check
var generalFeedbackQuery = from feedbackElements in xml.Elements("feedback")
                           select new
                           {
                               Feedback = feedbackElements.Element("general").Value,
                               PostiveFeedback = feedbackElements.Element("positive").Value,
                               NegativeFeedback = feedbackElements.Element("negative").Value
                           };

Assert.AreEqual(actual.feedback, generalFeedbackQuery.ElementAt(0).Feedback);
Assert.AreEqual(actual.positiveFeedback, generalFeedbackQuery.ElementAt(0).PostiveFeedback);
Assert.AreEqual(actual.negativeFeedback, generalFeedbackQuery.ElementAt(0).NegativeFeedback); 
```

是否可以检查查询是否返回任何内容？

像

```
if(generalFeedbackQuery.Count()).... 
```

这似乎可行，但如果您在 Count 上添加手表，它似乎不存在......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T09:59:08.317

查看是否返回*任何东西*的最佳方法是使用[`Any()`](http://msdn.microsoft.com/en-us/library/bb337697.aspx). 一旦得到任何结果，它将停止并返回 true，而不是遍历所有结果。

（如果您真的想要计数，那么`Count()`确实是正确的方法。我的猜测是 Watch 窗口被它作为扩展方法而感到困惑。您可以显式调用`System.Linq.Enumerable.Count(generalFeedbackQuery)`which 可能有效。）

# python - 有人知道 Python 中的工作流框架/库吗？

> ID：704834
> 
> 赞同：19
> 
> 时间：2009-04-01T09:54:00.233
> 
> 标签：python, django, workflow

我正在寻找 Python 的工作流库/框架。我很惊讶在那里我找不到任何简单且不依赖于 Zope/Plone 的东西。

有谁知道一个开源的、简单的工作流库/框架。最好支持 Django，但不是必需的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-01T10:31:10.380

试试[GoFlow](http://code.djangoproject.com/wiki/GoFlow)，一个 Django 的工作流引擎。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-08-05T20:07:49.353

不幸的是，这里列出的大多数/所有项目似乎都不再活跃。这是一个目前正在进行的新项目：

[http://packages.python.org/django-workflows/overview.html](http://packages.python.org/django-workflows/overview.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-02T03:51:35.760

我最近看到的另一个工作流项目是 repoze.workflow，它是一个基于状态机的工作流引擎，它的灵感来自 plone，但它是一个干净的重新实现。

[http://svn.repoze.org/repoze.workflow/trunk/docs/index.rst](http://svn.repoze.org/repoze.workflow/trunk/docs/index.rst)

不完全确定它的生产准备情况如何，但我确实知道有些人正在使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-07-11T15:56:41.163

我使用了 hurry.workflow：[http](http://pypi.python.org/pypi/hurry.workflow) ://pypi.python.org/pypi/hurry.workflow 它有很多功能，但不幸的是有一些 zope 依赖项，因此它可能不适用于其他框架。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-01T11:22:36.183

我们正在积极开发基于 Spiff 的 Zops Workflow Engine。您可以检查它是否适合您的需求。

[https://github.com/zetaops/zengine](https://github.com/zetaops/zengine)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T09:56:26.373

我知道有一个 openerp，但它不是工作流.....

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-01T19:48:23.690

除了 GoFlow（在 Oli 的答案中链接）之外，我所知道的唯一其他 Django 工作流程是[Pinax](http://www.pinaxproject.com)项目的一部分。

更一般地，对于基于 Python 的工作流，有[spiff 工作流](http://code.google.com/p/spiff-workflow/)和 Dave Kuhlman 的[工作流和 REST How-to](http://www.rexx.com/~dkuhlman/workflow_howto.html)可能会从 Quixote 转换为 Django。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-10-03T06:31:16.400

ntoll 的django[工作流程](http://github.com/ntoll/workflow)是 alpha 版，但正在积极开发中

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-20T12:28:54.867

还有 Xworkflows ( [https://github.com/rbarrois/xworkflows/](https://github.com/rbarrois/xworkflows/) )，它可以通过 django-xworkflofws ( [https://github.com/rbarrois/django_xworkflows](https://github.com/rbarrois/django_xworkflows) )插入 django

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-09-27T20:51:21.227

您是否考虑过使用规则构建工作流？您可以查看[http://nebrios.com](http://nebrios.com)，这是一个基于规则的工作流工具。它内置于 Python/Django 并执行完整的 Python 和 Django。虽然它不是 FOSS，但由于它是平台，因此它不作为库集成。

完全披露：我们在去年建立了这个，因为我们找不到任何满足我们需求的工作流/流程工具。

# asp.net - DataList - 你可以停止最后一个换行符，以便控件将在最后流动

> ID：704837
> 
> 赞同：0
> 
> 时间：2009-04-01T09:55:45.237
> 
> 标签：asp.net, rendering, datalist

我有一个 DataList，它设置为水平流，它呈现一组复选框。我还有一个下拉列表，我想在数据列表的末尾呈现它，与数据列表中的最后一次位于同一行。

是否可以摆脱数据列表末尾的最后一个换行符，以便下拉列表不会呈现在数据列表下方的行上？

```
[] i1 [] i2 [] i3 [] i4
[] i5 [] i6 DropDownList 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T17:00:00.570

恐怕不是。当布局设置为水平流且项目位于列边界或列表中的最后一个时，RepeatInfo（用于呈现 DataList）的呈现代码显式写入换行符。这里的那部分代码：

```
private void RenderHorizontalRepeater(HtmlTextWriter writer, IRepeatInfoUser user, Style controlStyle, WebControl baseControl)
{
    ...
    if (indexInColumn == repeatColumns || itemIndex == repeatedItemCount - 1)
    {
        if (isTableLayout)
        {
            writer.RenderEndTag();
        }
        else if (repeatColumns < repeatedItemCount)
        {
            if (this.EnableLegacyRendering)
            {
                writer.WriteObsoleteBreak();
            }
            else
            {
                writer.WriteBreak();
            }
        }
        indexInColumn = 0;
    }
} 
```

我想您可以尝试在创建或绑定项目时将下拉列表注入控件集合，但是您必须知道它是最后一个。这需要在进行数据绑定之前预先知道总计数。

# java - 您对 ARM Jazelle 有何体验？

> ID：704840
> 
> 赞同：16
> 
> 时间：2009-04-01T09:56:48.730
> 
> 标签：java, embedded, jvm, arm, jazelle

我正在评估 ARM 的开源和闭源 JVM。特别是，闭源 JVM 可以利用 Jazelle（用于较新 ARM 的 Java 加速）。

您对这项技术有任何经验吗？

（顺便说一句，您使用哪个操作系统？）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-04-13T02:55:07.173

我为一家大型无线手机制造商工作。我们的团队正在将 J2ME 移植到基于 ARM 的手机上。我们有两个人在使用 Jazelle；没有操作系统，只是在原始 ARM9 芯片上。遗憾的是，它一直在研究中，因为 JIT 获得了我们需要的性能，而无需支付 Jazelle 的许可费。

如果您接受在没有 JIT 的情况下运行 Hotspot JVM 以编译 C 的 1/10 运行的经验法则。那么，JIT 返回您丢失的 50%，Jazelle 返回您丢失的 60%。这些是非常粗略的估计。这完全取决于正在运行的代码类型。Jazelle 对我们的测试用例的性能稍好一些，因为它处理的情况比 JIT 多。而在少数情况下，JIT 编译为 C-fast。

之前的海报似乎误解了 Jazelle。Jazelle 对 Java 字节码产生类似陷阱的操作。用户必须提供代码片段来处理每个字节码。如果没有这样的片段和查找表，您将获得未实现的异常。

# iphone - InterfaceBuilder的混乱

> ID：704845
> 
> 赞同：0
> 
> 时间：2009-04-01T09:58:19.617
> 
> 标签：iphone, objective-c, interface-builder

请清除此场景。

我创建了一个名为 RootViewController 的 viewController，所以很明显我们会得到 RootViewController.h 和 RootViewController.m

然后我通过选择一个名为 viewXib 的新文件创建了一个名为 ViewScreen.xib 的 nibfile，因此我们将自动在 xibfile 中获得一个视图。我将 FilesOwner 类链接到 RootViewController。

所以如果我想将视图的背景颜色设置为“groupTableViewBackgroundColor”，我不能在属性检查器中设置它吗，将颜色设置为视图的唯一方法是在 RootViewController.m 中手动执行（声明一个视图并设置 view.backgroundColor=[UIColor groupTableViewBackgroundColor]; 我们不能通过使用 interfaceBuilder 来做同样的事情吗？

如果有人有兴趣解决这个问题，请继续。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T10:16:46.030

如果您将调色板更改为“开发人员”，您将找到系统颜色列表，包括表格的背景颜色。

# flash - 尝试捕捉不起作用？

> ID：704850
> 
> 赞同：2
> 
> 时间：2009-04-01T09:59:29.690
> 
> 标签：flash, actionscript-3, error-handling, try-catch

我在以下 Actionscript 3 代码中使用了 try-catch 块：

```
try {
    this._subtitle = new SubtitleController(subtitlePath, _framerate);
    this._subtitle.addEventListener(Event.COMPLETE, subtitleLoaded);
}
catch (e:Error) {
    trace('subtitle not found');
} 
```

然后`SubtitleController`构造函数尝试加载`subtitlePath`并抛出一个`Error #2044: Unhandled ioError`，但该`try`语句没有捕获到错误。`try`就像不存在任何语句一样简单地抛出错误。

当然，我可以用

```
this._subtitle.addEventListener(IOErrorEvent.IO_ERROR, function (ev:Event) { trace('subtitle not loaded'); });
this._subtitle = new SubtitleController(subtitlePath, _framerate);
this._subtitle.addEventListener(Event.COMPLETE, subtitleLoaded); 
```

它几乎可以工作，它停止抛出该错误，而是抛出另一个错误。

但是，块的全部意义`try-catch`不在于做到这一点吗？为什么它不能与 . 一起使用`try-catch`，但它可以与常规事件侦听器一起使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-01T10:25:27.490

IOErrors/NetworkErrors 是异步错误。当导致它们的方法被称为正常运行时错误时，它们不会被抛出。否则执行将不得不完全停止，直到（例如）一个文件完全加载......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-01T19:31:23.933

> 基本上，由于调用是异步的，try..catch..finally 块不会对你有一点好处。加载程序需要一段时间才能确定 url 错误，然后调度 IO_ERROR 事件。- [http://www.mattmaher.net/flexible_code/index.php/2008/01/10/urlloader-stream-error-handling/](http://www.mattmaher.net/flexible_code/index.php/2008/01/10/urlloader-stream-error-handling/)

西奥是正确的；我只会添加使用包的`IOErrorEvent`类`flash.events`来为不知道该方法的任何人处理这个问题。

```
var loader:URLLoader = new URLLoader();
loader.load(new URLRequest("test.mp3"));
loader.addEventListener(IOErrorEvent.IO_ERROR, onIOError);
function onIOError(e:IOErrorEvent):void
{
    trace("An IO Error has occured.\n\n", e);
} 
```

如果您使用的是 Loader 对象而不是 URLLoader，请记住您需要监听 Loader 对象的 contentLoaderInfo 属性，如下所示。

```
var loader:Loader = new Loader();
addChild(loader);

loader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, onIOError);
loader.load(new URLRequest("path/to/asset"));

function onIOError(e:IOErrorEvent):void
{
    trace("An IO Error has occured.\n\n", e);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-11T18:04:02.303

今天我发现有一个名为**log.as**的类是个坏主意。此类抛出的错误不会在 try-catch 中捕获。

我认为他们以前很好。我一直在使用带有预期错误的单元测试的 FlexUnit。我安装了 AIR SDK 2.7，最近添加了可能引发冲突的 AIR SDK 2.01（用于另一个项目）。

可能是旧 SDK 的一个极端案例，或者是关于我的构建环境的某些特定情况。

重命名课程为我解决了这个问题。

# sharepoint - 一个 Sharepoint 功能或许多相互依赖的功能

> ID：704853
> 
> 赞同：1
> 
> 时间：2009-04-01T10:00:28.753
> 
> 标签：sharepoint, sharepoint-2007, moss

我在 VS2008 中有一个带有 STSDev 2008 的小型 Sharepoint Feature 项目，它由一个 WebPart、一个列表和一个列表实例（上述列表的）组成。WebPart 依赖于列表的存在，就像列表实例一样。

我会更好地创建一个部署所有三个组件的功能，还是将三个组件打包为单独的功能并在 WebPart 和列表上的列表实例中创建功能依赖关系？

我可以看到几个优点和缺点：

**临：**

*   简化测试，因为列表可以与 WebPart 和实例分开测试
*   更可扩展，因为可以添加更多依赖于上层特性的特性
*   更高效，只激活你需要的功能

**缺点：**

*   增加开发时间来创建功能
*   开发环境实际上并不允许您将功能拆分为不同的项目
*   可能会使站点设置中的站点功能页面混乱

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T13:56:12.540

我可能会将它们拆分为多个功能，以便您可以在需要时单独更新 ethem。您始终可以创建在子功能上具有 ActivationDependencies 的父功能。如果您将子功能标记为隐藏，则父功能将自动激活子功能，它们不会使您的功能页面混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T13:54:35.367

还要考虑功能的管理。如果您在一个部署了许多功能的大型公司环境中，您将需要考虑拆分。它将有助于部署，如果其中一个功能变得非常流行，而另外两个只是有点流行，它将为您节省大量时间来处理增强请求和错误修复。

# architecture - 软件设计与软件架构

> ID：704855
> 
> 赞同：342
> 
> 时间：2009-04-01T10:00:50.640
> 
> 标签：architecture, definition

有人可以解释软件设计和软件架构之间的区别吗？

进一步来说; 如果您告诉某人向您展示“设计”-您希望他们展示什么？“架构”也是如此。

我目前的理解是：

*   设计：用于特定模块/系统部分的 UML 图/流程图/简单线框（用于 UI）
*   架构：组件图（显示系统的不同模块如何相互通信以及与其他系统通信），要使用什么语言，模式......？

如我错了请纠正我。我已经提到 Wikipedia 在[http://en.wikipedia.org/wiki/Software_design](http://en.wikipedia.org/wiki/Software_design)和[http://en.wikipedia.org/wiki/Software_architecture](http://en.wikipedia.org/wiki/Software_architecture)上有文章，但我不确定我是否理解正确。

* * *

## 回答 #1

> 赞同：327
> 
> 时间：2009-04-01T10:19:42.653

你是对的。系统的架构是它的“骨架”。它是系统的最高抽象级别。存在什么样的数据存储，模块之间如何交互，有哪些恢复系统。就像设计模式一样，也有架构模式：MVC、3 层分层设计等。

软件设计是关于设计单个模块/组件。模块 x 的职责和功能是什么？Y班的？它能做什么，不能做什么？可以使用哪些设计模式？

所以简而言之，软件架构更多的是关于整个系统的设计，而软件设计则强调模块/组件/类级别。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2009-12-24T15:39:40.507

在[SDLC（软件开发生命周期）](http://en.wikipedia.org/wiki/Systems_Development_Life_Cycle)的某些描述中，它们是可互换的，但共识是它们是不同的。它们同时是：不同的 (1)*阶段*，(2)*责任范围*，以及 (3)*决策级别*。

*   [架构](http://en.wikipedia.org/wiki/Software_architecture)是更大的图景：框架、语言、范围、目标和高级方法（[Rational](http://en.wikipedia.org/wiki/IBM_Rational_Unified_Process)、[瀑布](http://en.wikipedia.org/wiki/Waterfall_model)、[敏捷](http://en.wikipedia.org/wiki/Agile_software_development)等）的选择。
*   [设计](http://en.wikipedia.org/wiki/Software_design)是更小的图景：如何组织代码的计划；系统不同部分之间的合同看起来如何；项目方法和目标的持续*实施*。规范是在这个阶段编写的。

由于不同的原因， 这两个阶段*似乎融合在一起。*

1.  较小的项目通常没有足够的空间将计划分成这些阶段。
2.  一个项目可能是一个更大项目的一部分，因此两个阶段的部分内容已经确定。（已经有现有的数据库、约定、标准、协议、框架、可重用代码等）
3.  考虑 SDLC 的新方法（请参阅[敏捷方法](http://en.wikipedia.org/wiki/Agile_software_development)）在某种程度上重新排列了这种传统方法。设计（架构在较小程度上）是有目的地在整个 SDLC*中进行*的。通常有更多的[迭代](http://en.wikipedia.org/wiki/Iterative_and_incremental_development)，整个过程一遍又一遍地发生。
4.  无论如何，软件开发都是复杂且难以计划的，但客户/经理/销售人员通常会通过在中途改变目标和要求来使其变得更加困难。无论计划与否，都*必须*在项目后期做出设计甚至架构决策。

即使责任的阶段或领域混合在一起并发生在所有地方，知道正在发生的决策级别总是很好的。（我们可以一直这样下去。我试图将其保留为摘要。）我将结束：即使您的项目似乎没有正式的架构或设计阶段/AOR/文档，无论是否有人在，它都在发生有意识地做或不做。如果没有人决定做架构，那么就会发生一个可能很糟糕的默认架构。设计同上。如果没有代表它们的正式阶段，这些概念几乎**更重要。**

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2009-12-24T15:44:22.807

建筑是战略性的，而设计是战术性的。

架构包括框架、工具、编程范式、基于组件的软件工程标准、高级原则……

而设计是一项关注局部约束的活动，例如设计模式、编程习惯和重构。

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2012-03-28T17:36:51.753

当我自己在寻找建筑和设计之间的简单区别时，我发现了这一点；
您如何看待这种看待它们的方式：

*   建筑是我们正在建造的“什么”；
*   设计是我们正在建造的“方式”；

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2013-12-19T04:56:46.507

1.  体系结构是指计算机或基于计算机的系统的概念结构和逻辑组织。

    设计是指为显示系统或对象在制造之前的外观和功能或工作原理而制作的计划或图纸。

2.  如果您正在“构建”一个组件，那么您就是在定义它在更大系统中的行为方式。

    如果您正在“设计”相同的组件，那么您就是在定义它在内部的行为方式。

> 所有架构都是设计，但并非所有设计都是架构。

`What`部分是设计，`How`是具体实现，是架构的`What`交集`How`。

**用于区分建筑和设计的图像**：

![设计与建筑](https://i.stack.imgur.com/SeqZ6.png)

还有一些设计决策，在架构上并不重要，即不属于设计的架构分支。例如，某些组件的内部设计决策，如算法的选择、数据结构的选择等。

任何在其组件边界之外不可见的设计决策都是组件的内部设计，并且是非架构的。这些是系统架构师将留给模块设计人员或实施团队的设计决策，只要他们的设计不破坏系统级架构施加的架构约束。

给出[很好类比的链接](http://iankoenig.com/blog/2009/03/21/the-difference-between-architecture-and-design/)

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2011-03-16T10:03:49.797

用我自己的话来说，我会说你是对的；

**架构**是将系统需求分配给系统元素。关于架构的四个陈述：

1.  它可以引入非功能性需求，如语言或模式。
2.  它定义了组件、接口、时序等之间的交互。
3.  它不应引入新功能，
4.  它将系统打算执行的（设计的）功能分配给元素。

当系统的复杂性被细分时，架构是**必不可少的工程步骤。**

*示例：想想你的房子，你的厨房不需要建筑师（只涉及一个元素），但整个建筑需要一些交互定义，比如门和屋顶*。

**设计**是功能（提议的）实现的信息表示。它旨在征求反馈并与利益相关者进行讨论。这可能是一种很好的做法，但**不是必不可少的工程步骤**。

*很高兴在安装厨房之前看到厨房设计，但这对于烹饪要求并不是必需的*：

如果我考虑一下，您可以说：

*   架构适用于更详细抽象级别的公共/工程师
*   设计的目的是在不太详细的抽象级别上面向公众

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2012-11-23T23:31:10.613

我的提醒：

*   我们可以在不问任何人的情况下更改设计
*   如果我们更改架构，我们需要将其传达给某人（团队、客户、利益相关者……）

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2011-07-14T02:58:21.750

我认为我们应该使用以下规则来确定何时谈论设计与架构：如果您创建的软件图片的元素可以一对一地映射到编程语言的句法结构，那么就是设计，否则就是架构。

因此，例如，如果您正在查看类图或序列图，则可以使用类语法结构将类及其关系映射到面向对象的编程语言。这显然是设计。此外，这可能会导致本次讨论与您将用于实现软件系统的编程语言有关。如果您使用 Java，则适用前面的示例，因为 Java 是一种面向对象的编程语言。如果你想出一个显示包及其依赖关系的图表，那也是设计。您可以将元素（在本例中为包）映射到 Java 语法结构。

现在，假设你的 Java 应用程序被划分为模块，每个模块是一组包（表示为一个 jar 文件部署单元），并且呈现给你一个包含模块及其依赖关系的图表，那就是架构。在 Java 中（至少在 Java 7 之前）没有办法将模块（一组包）映射到语法结构。您可能还会注意到，此图代表了您的软件模型抽象级别更高的一步。上面的任何图（粗粒度）都是包图，表示使用 Java 编程语言进行开发时的架构视图。另一方面，如果您在 Modula-2 中进行开发，那么，模块图代表一个设计。

（来自[http://www.copypasteisforword.com/notes/software-architecture-vs-software-design](http://www.copypasteisforword.com/notes/software-architecture-vs-software-design)的片段）

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2010-04-12T17:04:38.593

就个人而言，我喜欢这个：

“设计师关心的是用户按下按钮时会发生什么，而架构师关心的是一万用户按下按钮时会发生什么。”

*SCEA for Java™ EE 学习指南*，作者 Mark Cade 和 Humphrey Sheil

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2012-06-16T21:54:09.297

我同意许多解释；本质上，我们正在认识到软件系统的架构设计和详细设计之间的区别。

虽然设计者的目标是在规范中尽可能精确和具体，因为这将是开发所必需的；架构师的主要目标是指定系统的结构和全局行为，这与详细设计开始时的要求一样多。

一个好的架构师会防止超规范——架构不能被过度指定，但足够了，（架构）决策仅针对存在处理成本最高风险的方面建立，并有效地提供一个框架（“共性”），其中可以进行详细设计，即局部功能的可变性。

事实上，架构过程或生命周期只是遵循这个主题——足够的抽象级别来概述（架构上）重要业务需求的结构，并将更多细节留给设计阶段以获得更具体的可交付成果。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2013-04-24T18:34:40.147

**建筑就是设计，但并非所有设计都是建筑。**因此，严格来说，尝试区分*建筑设计*和*非建筑设计*会更有意义。有什么区别？这取决于！每个软件架构师可能有不同的答案（ymmv！）。我们开发我们的启发式方法来得出一个答案，例如“类图是架构，序列图是设计”。有关更多信息，请参阅[DSA 书](http://www.informit.com/store/documenting-software-architectures-views-and-beyond-9780321552686)。

通常说架构比设计处于更高的抽象级别，或者架构是逻辑的而设计是物理的。但是这个概念，尽管被普遍接受，在实践中是无用的。你在哪里划清高抽象或低抽象，逻辑和物理之间的界限？这取决于！

所以，我的建议是：

*   创建一个单一的设计文档。
*   以您想要的方式命名此设计文档，或者更好的是，以读者更习惯的方式命名。示例：“软件架构”、“软件设计规范”。
*   将此文档分解为视图并记住您可以创建一个视图作为另一个视图的细化。
*   通过添加交叉引用或超链接使文档中的视图可导航
*   然后，您将获得更高级别的视图，显示设计的广泛但肤浅的概述，以及更接近实现的视图，显示狭窄但更深入的设计细节。
*   您可能想看一下多视图架构文档的示例（[此处](https://wiki.sei.cmu.edu/sad/index.php/The_Adventure_Builder_SAD)）。

说了这么多……**我们需要问的一个更相关的问题是：多少设计才足够？**也就是说，我什么时候应该停止描述设计（在图表或散文中）并应该继续编码？

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2009-04-01T10:05:04.857

是的，这听起来对我来说是正确的。设计就是你要做的事情，而架构是将设计的点点滴滴结合在一起的方式。它可能与语言无关，但通常会指定要使用的技术，即 LAMP v Windows、Web Service v RPC。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2009-12-24T15:42:44.010

好问题......虽然它们之间的界限几乎不是一条清晰的界限，恕我直言，如果你同时使用这两个术语，那么架构包含更多关于如何构建或构建某些东西的技术或结构决策，尤其是那些将很难做出的决定（或更难）一旦实现就改变，而设计包含那些以后容易改变的决定（如方法名称、类<->文件组织结构、设计模式、是否使用单例或静态类来解决某些特定问题等）和/或影响系统或应用程序的外观或美学方面的那些（人机界面、易用性、外观和感觉等）

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2009-12-24T15:45:07.390

程序或计算系统的软件架构是系统的一个或多个结构，它包括软件组件、这些组件的外部可见属性以及它们之间的关系。

（来自维基百科，[http](http://en.wikipedia.org/wiki/Software_architecture) ://en.wikipedia.org/wiki/Software_architecture ）

软件设计是解决问题和规划软件解决方案的过程。在确定了软件的用途和规格后，软件开发人员将设计或聘请设计人员制定解决方案的计划。它包括低级组件和算法实现问题以及架构视图。

（来自维基百科，[http](http://en.wikipedia.org/wiki/Software_design) ://en.wikipedia.org/wiki/Software_design ）

我自己不能说得更好:)

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2009-12-24T15:45:20.407

我像 Patrick Karcher 一样看待建筑——大局观。例如，您可以为建筑物提供架构，查看其结构支撑、窗户、出入口、排水等。但您尚未“设计”楼层布局、隔间位置等。

因此，虽然您已经设计了建筑物，但您还没有设计每个办公室的布局。我认为软件也是如此。

您可以将设计布局视为“设计布局”...

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2009-12-24T15:46:25.177

相当主观，但我的看法：

**架构** 系统的整体设计，包括与其他系统的交互、硬件要求、整体组件设计和数据流。

**设计** 整个系统中组件的组织和流程。这还将包括用于与其他组件交互的组件 API。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2009-12-24T15:50:34.213

软件**架构**“关心的问题……超出了计算的算法和数据结构。

架构特别不是关于......实现的细节（例如，算法和数据结构）。架构设计涉及比OOD“（面向对象设计）通常提供的更丰富的抽象集合。

**设计**关注设计元素的模块化和详细接口、它们的算法和过程，以及支持架构和满足需求所需的数据类型。

“架构”通常仅用作“设计”的同义词（有时前面带有形容词“高级”）。许多人将“架构模式”一词用作“设计模式”的同义词。</p>

看看这个链接。

[定义术语架构、设计和实现](http://www.sei.cmu.edu/library/abstracts/news-at-sei/architect1q03.cfm)

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2009-12-24T15:55:47.297

**架构：**
结构设计工作在更高的抽象层次，实现对系统的技术上重要的要求。该架构为进一步的设计奠定了基础。

**设计：**
通过每个抽象层的迭代过程来填充架构所没有的东西的艺术。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2012-01-23T04:58:27.373

我真的很喜欢这篇论文，因为它是关于将架构与设计分开的经验法则：

[http://www.eden-study.org/articles/2006/abstraction-classes-sw-design_ieesw.pdf](http://www.eden-study.org/articles/2006/abstraction-classes-sw-design_ieesw.pdf)

它被称为内涵/局部性假设。关于非本地和内涵的软件性质的陈述是架构性的。局部的和内涵的陈述是设计的。

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2012-04-05T15:44:52.573

...很久以前，在一个遥远的地方，哲学家们担心一与多之间的区别。建筑是关于关系的，这需要很多。建筑有组件。设计是关于内容的，这需要内容。设计具有属性、品质、特征。我们通常认为设计是在架构中。二元思维赋予了许多原始的东西。但建筑也在设计之中。这就是我们如何选择看待我们面前的事物——一个或多个。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2009-04-01T11:00:29.763

当您需要将更高架构级别识别的业务和功能投射到应用程序中时，最好在系统级别使用软件架构。

例如，您的业务是关于交易者的“盈亏”，您的主要职能涉及“投资组合评估”和“风险计算”。

但是当[软件架构师](http://en.wikipedia.org/wiki/Software_architect)详细介绍他的解决方案时，他会意识到：

“投资组合评估”不能只是一种应用。它需要在可管理的项目中进行改进，例如：

*   图形用户界面
*   启动器
*   调度员
*   ...

（因为涉及的操作非常庞大，需要在多台计算机之间拆分，同时仍然通过一个通用的 GUI 随时进行监控）

a 软件设计将检查不同的应用程序、它们的技术关系和它们的内部子组件。
它将生成最后一个**[架构层](https://stackoverflow.com/questions/212270#212362)**（“技术架构”）工作所需的规范（在技术框架或横向组件方面），并为项目团队（更面向*业务*功能的实现）开始他们各自的项目。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2012-10-21T14:59:46.900

如果有人建造了一艘船，那么发动机、船体、电路等将是他的“建筑元素”。对他来说，发动机制造将是“设计工作”。

如果他随后将引擎的构建委托给另一个团队，他们将创建一个“引擎架构”......

所以 - 这取决于抽象或细节的水平。一个人的建筑可能是另一个人的设计！

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2013-03-24T16:17:39.930

架构是**“难以改变的设计决策”。**

在使用 TDD 之后，这实际上意味着您的设计一直在变化，我经常发现自己在这个问题上苦苦挣扎。上述定义摘自Martin Fowler*的企业应用程序架构模式*

这意味着架构取决于系统的语言、框架和领域。如果您可以在 5 分钟内从 Java 类中提取一个接口，那么它不再是架构决策。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2009-12-24T15:43:16.397

悬崖笔记版本：

设计：根据所需产品的规格实施解决方案。

架构：支持您的设计的基础/工具/基础设施/组件。

这是一个相当广泛的问题，会引起很多回应。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2009-12-24T15:43:27.193

架构是用于构建系统的设计模式的集合。

我猜设计是用来把所有这些结合在一起的创造力？

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2009-12-29T13:03:39.313

软件设计的历史更长，而软件架构这个术语只有 20 年的历史。因此，它现在正在经历成长的痛苦。

学者们倾向于将架构视为更大的软件设计领域的一部分。尽管人们越来越认识到 Arch 是它自己的一个领域。

从业者倾向于将 Arch 视为具有战略意义的高级设计决策，并且在项目中撤消成本可能很高。

Arch 和设计之间的确切界限取决于软件领域。例如，在 Web 应用程序领域，分层架构目前最流行（业务逻辑层、数据访问层等）。该 Arch 的较低级别部分被认为是设计（类图、方法签名等）。 ) 这在嵌入式系统、操作系统、编译器等领域会有不同的定义。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2011-02-24T05:32:51.117

架构是高级、抽象和逻辑设计，而软件设计是低级、详细和物理设计。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2011-07-04T06:39:08.503

另外，请参阅： [http ://en.wikipedia.org/wiki/4%2B1_Architectural_View_Model](http://en.wikipedia.org/wiki/4%2B1_Architectural_View_Model)

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2013-01-12T14:14:30.250

我喜欢 Roy Thomas Fielding 在他的论文中关于什么是软件架构的定义和解释： [架构风格和基于网络的软件架构的设计](https://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm)

> 软件架构是软件系统在其运行的某个阶段的运行时元素的抽象。一个系统可能由许多抽象层次和许多操作阶段组成，每个阶段都有自己的软件架构。

他强调“运行时元素”和“抽象级别”。

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2013-06-17T05:57:47.367

**设计：**了解模块，模块之间的关系，每个模块的功能，类及其成员函数，每个模块相互通信的接口。

**架构：**架构是软件系统的整体结构。所有模块、类和组件都执行不同的任务，并会给出独特的结果。

例如：有一个房子有 5 个房间。还有连接浴室。厨房也在家里。所以家里有不同的东西，这些东西之间有不同的关系。所以这都是关于一个家的“设计”。

当你从房子外面看时，你看到的整个结构都是关于建筑的。

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2013-10-13T21:49:31.793

对此没有明确的答案，因为“软件架构”和“软件设计”有很多定义，而且都没有规范的定义。

一个很好的思考方式是 Len Bass、Paul Clements 和 Rick Kazman 的声明“所有架构都是设计，但并非所有设计都是架构”[实践中的软件架构]。我不确定我是否完全同意这一点（因为架构可以包括其他活动），但它抓住了架构是处理关键设计子集的设计活动的本质。

我稍微轻率的定义（在[SEI 定义页面](http://www.sei.cmu.edu/architecture/start/glossary/community.cfm "SEI 定义页面")上找到）是一组决策，如果做出错误的决定，会导致您的项目被取消。

几年前，Amnon Eden 和 Rick Kazman 在题为“架构、设计、实现”的研究论文中进行了将架构、设计和实现作为概念分离的有用尝试，该论文可在此处找到：[http://www.sei.cmu .edu/library/assets/ICSE03-1.pdf](http://www.sei.cmu.edu/library/assets/ICSE03-1.pdf)。他们的语言非常抽象，但简单地说，*架构*是可以在许多情况下使用的设计，并且旨在应用于整个系统，*设计*是（错误）设计，可以在许多情况下使用但应用于特定部分系统，*实现*是特定于上下文的设计并应用于该上下文。

因此，架构决策可能是通过消息传递而不是 RPC 来集成系统的决策（因此它是可以应用于许多地方并旨在应用于整个系统的一般原则），设计决策可能是使用主/slave 系统的输入请求处理模块中的线程结构（可以在任何地方使用但在这种情况下仅在一个模块中使用的一般原则），最后，实现决策可能是将安全责任从请求路由器转移到请求管理器模块中的请求处理程序（仅与该上下文相关的决策，在该上下文中使用）。

我希望这有帮助！

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2013-11-06T14:33:08.113

建筑与设计密切相关；它们之间的主要区别实际上在于我们面对的方式。建筑面向战略、结构和目的，面向抽象。设计面向实施和实践，面向具体。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2010-05-14T10:16:37.967

我认为架构是关于人类和/或系统的接口。例如，Web 服务合约，包括协议等，就是架构。屏幕是如何组成的，不是颜色等，而是那里有什么领域，是建筑。

设计是如何建造事物。什么框架、语言、技术等。这当然必须与考虑平台、安全性等的企业准则和限制保持一致。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2011-06-16T21:19:59.237

[http://jinwolf.tumblr.com/post/6591954772/architectural-patterns-vs-design-patterns](http://jinwolf.tumblr.com/post/6591954772/architectural-patterns-vs-design-patterns)

该架构告诉您系统的布局方式。一个传统的架构模式示例是 3 层系统，您的系统被分解为表示层、业务层和数据层。

领域驱动设计促进了 4 层架构。表示层、应用层、领域层和基础设施层。存储库模式位于领域层和基础设施层之间。你的领域模型不应该对基础设施有任何了解，也应该保持纯粹和独立于它。这就是为什么我们有存储库来调解这两个层。

存储库模式仍然是一种模式，因为它是一个可重用的解决方案并处理重复的问题。然而，只有当我们谈论架构时，存储库模式才变得相关。它在领域驱动的设计架构中有自己的角色和职责。它不是数学类型的通用解决方案，例如可以在系统的任何地方应用的抽象工厂模式。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2012-11-23T00:19:53.460

架构是具有来自各种因素的基本原理的设计，其中最重要的是非功能性要求，例如可扩展性，当然最重要的是经验。没有理由，你就剩下简单的模式，或者怎么做。无论是在更高级别还是在班级级别进行设计，它仍然是设计。

或者换一种方式

建筑是元设计，即设计设计。您有一些已知适合特定解决方案空间的模式，您会选择哪些模式，为什么？架构是当你回答“哪个”和“为什么”时（“如何”已经由设计给出）。它当然不依赖于抽象级别，例如实现分布式会话不是类级别的任务，但是对于给定的架构，有一些设计可供选择。

同样，架构甚至反映在类级设计中。在可扩展架构下，如果您在没有考虑可扩展性因素的情况下进行类设计，通常会有所不同。为什么你必须有一个方法“BeginAsyncUpload”而不是“Upload”是一个架构决定。

有趣的是，当我们将注意力转移到更高级别的系统元素时，“哪个和为什么”的问题变得更加重要，而“如何”变得不那么相关。在另一个方向上，“如何”部分变得更加重要，也因为重复使用使其变得显而易见，例如，在抽象工厂或原型之间进行选择。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2013-01-04T21:44:04.020

架构识别系统的基本组件，描述它们的组织以及它们如何相关以创建系统框架。

设计描述了各种组件以及如何开发它们以在系统架构提供的框架中提供所需的功能。

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2013-02-27T08:47:38.523

在我看来，架构只不过是一个愿景，收集需求并以正确的方式构建构建块

其中作为设计，构建特定块可能有 100 种解决方案，但要满足确切要求，我们需要选择正确的方法，因此选择正确的方法或算法无非是设计

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2013-05-29T22:24:08.317

架构更像是集成系统的各种功能以实现整个系统的一个目标，而设计则解决每个功能需求。

例如，以 MVVM 为例，这是一种架构模式。对于通知功能，MVVM 使用观察者模式，这又是一种设计模式，

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2013-07-10T07:17:09.173

建筑：- 建筑根据规范在建筑的各个阶段创建平面布局。

设计者：- 设计者是一种活动，它通过功能、美学和布局的外观来满足建筑计划的所有基本要求。

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2013-11-21T19:44:20.980

正如其他人也指出的那样，布置一个软件的架构实际上是做出对软件开发或执行生命周期有整体影响的主要设计决策；所以简单的架构只是高级设计。

即使架构决策不影响所有组件（因此是本地的），它仍然必须是全局相关的，即它以某种方式影响整个系统；否则只是一个本地设计决策。

不过我想指出的是，与架构相关的一个更相关的问题可能是 Hennessy & Patterson 在计算机架构中定义的架构与组织。基于此，我们可以将架构视为系统的数据模型（输入/输出、状态）抽象，将组织视为在实施（软件开发）过程中做出的典型设计决策。

* * *

## 回答 #41

> 赞同：-1
> 
> 时间：2012-01-30T06:07:54.960

以下是可以更详细地解释体系结构的参考资料和软件体系结构的 UML 图列表。（我找不到用于软件设计的 UML 图列表）

[格雷迪·布奇](https://docs.google.com/viewer?a=v&q=cache:bxTFXeZMi_oJ:www.apl.jhu.edu/%7Edoug/arch.ppt%20uml%20diagrams%20for%20software%20architecture&hl=en&gl=pk&pid=bl&srcid=ADGEEShovTzOuRznzT7QoqYgwDmhZUi9Mj8JL4ysrmHhQ1g8T-qhJtSRbg3-NOy6zNW0DbHnD_VY3usPTRp4vptrL8gQ4IDXil9s16mzQqmd_6dy4GKzQ1Rg2o7S_SyG0FkpZNMUb-eF&sig=AHIEtbSECMgeshcdP_CYhVy05O-fV7d4yA)

[UML 2 图用于架构模型](http://conferences.embarcadero.com/article/32216)

[UML图的分类](http://www.techrepublic.com/article/the-unified-modeling-language-simplifies-software-design/1050789)

[UML图的分类](http://www.uml-diagrams.org/uml-22-diagrams.html)

即使在发布了这个答案之后，我自己也不清楚哪个图表用于架构，哪个图表用于设计:)。Grady Booch 在他的幻灯片 #58 中指出，类、接口和协作是设计视图的一部分，而这个设计视图是架构视图之一！！！

# python - 在三个或更多文件之间导入 Python 不起作用

> ID：704856
> 
> 赞同：-2
> 
> 时间：2009-04-01T10:01:13.337
> 
> 标签：python, import

我有代码 eg1.py ， eg2.py ， eg3.py eg3.py 进口 eg2.py 又进口 eg1.py

当我第一次运行 eg3.py 时，一切都很好如果我一次又一次地导入它，只有 eg3.py 运行

我需要一个解决方案。

我将以如下方式编写 eg3.py 代码：

```
while(1):
    import eg2.py 
```

我哪里出错了。请给我一个解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-01T10:08:21.323

eg2.py 中的代码在导入的时候要执行吗？这不是一个好的解决方案。你应该在 eg2.py 中有一个包含你的代码的函数，然后在你的 while 循环中执行这个函数。

在 eg2.py 中：

```
def my_func():
    # do useful stuff
    pass 
```

在 eg3.py

```
import eg2
while True:
    eg2.my_func() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T10:03:36.577

嗯？您不能循环 a `import`，它们被缓存，因此在第一次迭代之后，除了浪费循环之外，它实际上并没有做任何事情。

你怎么知道“只有eg3.py”运行？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T10:09:14.597

如果您导入一个已经导入的模块，该模块中的可执行代码将不会重新运行。

例如：

```
>>> import this
The Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Flat is better than nested.
Sparse is better than dense.
Readability counts.
Special cases aren't special enough to break the rules.
Although practicality beats purity.
Errors should never pass silently.
Unless explicitly silenced.
In the face of ambiguity, refuse the temptation to guess.
There should be one-- and preferably only one --obvious way to do it.
Although that way may not be obvious at first unless you're Dutch.
Now is better than never.
Although never is often better than *right* now.
If the implementation is hard to explain, it's a bad idea.
If the implementation is easy to explain, it may be a good idea.
Namespaces are one honking great idea -- let's do more of those!
>>> import this
>>> 
```

从 sys.modules 中删除模块将强制重新加载：

例如：

```
>>> import sys
>>> import this
The Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Flat is better than nested.
Sparse is better than dense.
Readability counts.
Special cases aren't special enough to break the rules.
Although practicality beats purity.
Errors should never pass silently.
Unless explicitly silenced.
In the face of ambiguity, refuse the temptation to guess.
There should be one-- and preferably only one --obvious way to do it.
Although that way may not be obvious at first unless you're Dutch.
Now is better than never.
Although never is often better than *right* now.
If the implementation is hard to explain, it's a bad idea.
If the implementation is easy to explain, it may be a good idea.
Namespaces are one honking great idea -- let's do more of those!
>>> del(sys.modules["this"])
>>> import this
The Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Flat is better than nested.
Sparse is better than dense.
Readability counts.
Special cases aren't special enough to break the rules.
Although practicality beats purity.
Errors should never pass silently.
Unless explicitly silenced.
In the face of ambiguity, refuse the temptation to guess.
There should be one-- and preferably only one --obvious way to do it.
Although that way may not be obvious at first unless you're Dutch.
Now is better than never.
Although never is often better than *right* now.
If the implementation is hard to explain, it's a bad idea.
If the implementation is easy to explain, it may be a good idea.
Namespaces are one honking great idea -- let's do more of those!
>>> 
```

编辑：另外，heikogerlach 说：你最好在已经导入的模块中调用函数，而不是大部分时间删除/重新加载它们。

# jquery - 为什么 jQuery Append 不适用于 HTML 列表项的末尾？

> ID：704858
> 
> 赞同：1
> 
> 时间：2009-04-01T10:01:21.120
> 
> 标签：jquery, dom, list, append

我正在尝试克隆一个列表项，然后将其附加到该克隆的列表项的底部，注意它应该在被克隆的列表项下方，而不是在列表的底部，因为我自己可以这样做。目的是将它与可排序的 jQuery.ui 一起使用。

一切正常，事实上我什至可以正确克隆和追加。但是，它将它附加在结束标签**之前**`</li>`，并且对于我的生活，我不能强迫它附加**在**这个标签之后。

这是 HTML 标记：

```
<ul id="column-2" class="connectedSortable">
    <li class="ui-state-default">
        <div class="label">feature</div>
        <div class="action">
            <div class="delete"></div>
            <div class="other"></div>
        </div>
    </li>
</ul> 
```

我们关心的部分是`class="other"`点击后会复制列表项。

这是到目前为止的jQuery：

```
// This works fine
$(".other").click(function() {

    // This needs to be set (global) to be used later on in some future code.
    actionTarget = this;        

    // This grabs the whole list item
    var targetStory = $(actionTarget).parent().parent();

    // This clones the list item, as well as appending 
    // that clone to the cloned list item
    $(targetStory).clone().appendTo(targetStory);

}) 
```

这很好用，它抓取列表项，克隆它，然后将其转储到屏幕上 - 但在错误的位置:(

```
<ul id="column-2" class="connectedSortable">
    <li class="ui-state-default">
        <div class="label">feature</div>
        <div class="action">
            <div class="delete"></div>
            <div class="other"></div>
        </div>
        <li class="ui-state-default">
            <div class="label">feature</div>
            <div class="action">
                <div class="delete"></div>
                <div class="other"></div>
            </div>
        </li>
    </li>
</ul> 
```

任何人都知道为什么它没有附加到被克隆的列表项的末尾，以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T10:10:55.810

也许您想使用[after](http://docs.jquery.com/Manipulation/after)而不是 appendTo

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T10:09:58.603

我想你想要的是这样的：

```
$(targetStory).clone().appendTo(targetStory.parent()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T14:15:21.633

我认为[insertAfter](http://docs.jquery.com/Manipulation/insertAfter "插入之后")是您正在寻找的。after 将在克隆之后插入原始节点，而不是在原始节点之后插入克隆。像这样的东西应该工作：

```
$(targetStory).clone().inserAfter(targetStory); 
```

# sharepoint - SharePoint 2007 横幅点击计数器

> ID：704859
> 
> 赞同：1
> 
> 时间：2009-04-01T10:02:05.160
> 
> 标签：sharepoint, moss, counter

在 SharePoint 发布站点中，我将有一些作为 Web 部件的横幅，其中可以包含任何 HTML 内容。我需要计算该横幅的点击次数。横幅将有一些指向外部网站的链接。

我不知道在哪里存放个人横幅的柜台。自定义列表是我想到的第一件事，但我不确定它在并发访问中的表现如何。我可以锁定列表（列表项）并增加计数器吗？如果处于锁定状态，其他列表访问会发生什么？它会失败还是只是等待？

有没有其他方法可以将计数器存储在其他地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T18:25:01.957

有很多地方，这里有两个最受欢迎的：

1.  财产袋（最有可能在网络上），这是您增加的数字
2.  在列表内

其中，我已经通过我们的博客解决方案列表成功地完成了它，你可以在这里看到它：http: [//community.zevenseas.com/blogs](http://community.zevenseas.com/blogs)，我正在跟踪每个帖子的视图。我采用这种方法是因为我喜欢看到的不仅仅是数字，例如。推荐人，ip等

要记住的事情：

1.  您需要密切关注您存储的物品数量。SharePoint 不喜欢列表中的大量项目。要管理它们，请将它们放在文件夹中，每个横幅都有一个文件夹，然后是每个月的子文件夹。

2.  我会保留一个列表，其中包含每个横幅（只是他们的名字或更多），然后创建第二个列表来存储视图。在您存储视图的列表中，可以查找回存储横幅的列表。然后，您可以在原始横幅列表中创建一个新列，以“计算”与每个横幅项目相关的查看次数。

同样，要非常小心您期望的项目数量，但这对我们来说非常有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T20:49:51.797

不要忘记一个小型数据库将允许您存储任何您想要的页面点击。然后，您可以调用存储过程，而该数据库“只负责处理它”。您不必担心访问和并发性（因为您使用了正确的事务！）。

SharePoint 列表很简单，因为它们是开箱即用的，但考虑到它们在添加值甚至读取时有很多开销。它们也可以由站点管理员编辑，这取决于您拥有的管理员数量。列表比新数据库更容易配置，因此最终您确实需要仔细考虑这两个选项。

仅仅因为 SharePoint 有一把锤子并不意味着一切都是钉子 :)

# c - 如何在不使用c中的算术运算符的情况下将给定数字乘以2？

> ID：704878
> 
> 赞同：3
> 
> 时间：2009-04-01T10:09:18.263
> 
> 标签：c

如何在不使用 C 语言中的算术运算符的情况下将给定数字乘以 2？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-04-01T10:11:27.307

使用按位 << 运算符：

```
x = x << 1; 
```

这适用于整数和长数（不是浮点数）。

它基本上将二进制内容向左移动一位，相当于乘以2

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-01T10:11:39.990

左移。

[但是你为什么要这样做](http://c2.com/cgi/wiki?PrematureOptimization)呢？将这种优化留给编译器。

[运营商列表和维基百科](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B)上的大量示例。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-02T00:00:57.407

只是为了扩展 kgiannakakis 帖子：

移位运算符`<<`之所以起作用，是因为它在二进制级别上移动 - 有效地以 2 为底。就像将一个数字向左移动一位十进制（以 10 为底）与乘以 10 相同。例如：

```
23 (move to left one digit) = 230 = 23 * 10 
```

例如（使用前缀 0b 表示二进制数）：

```
 3 * 2 = 6
0b11 << 1 = 0b110 
```

移动其他数字相当于乘以 2 'n' 次，或乘以 2 的 n 次方 (2^n)

```
 3 * 8 =    3 * 2^3    = 24
0b11 * 8 =   0b11 << 3   = 0b11000 (note the trailing zeros) 
```

还有一个十进制示例来完成它：

```
23 (move to left 3 places) = 23 * 1000 = 23 * 10^3 = 23000 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-02T04:59:21.573

**注意：**移位可能不适用于有符号变量，

```
int x;
int tmp;

if (x < 0) {

   tmp = -x;
   tmp = tmp << 1;
   x = -tmp;
}
else {

   x = x << 1;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-25T18:21:49.393

只是为了确保我们都清楚，按照每个人的建议执行此操作，按位左移 (<<)

每次您向左移动时，您实际上是乘以两倍。

```
int x;
int result;
x = 5;

// result = 10 (multiply by a factor of 2 or 2^1=2)
result = 5<<1;

//result = 20 (multiply by a factor of 4 or 2^2=4)
result = 5<<2;

//result = 40 (multiply by a factor of 8 or 2^3=8)
result = 5<<3; 
```

# windows - osx & windows 开发——新手

> ID：704883
> 
> 赞同：6
> 
> 时间：2009-04-01T10:11:02.407
> 
> 标签：windows, macos, cross-platform

我的背景：在过去的十年里，我一直在使用 php 和 javascript 开发 Web 应用程序。在此之前，我使用 turbo pascal 为 DOS 开发了应用程序。在我看来，应用程序和 Web 应用程序开发是两种不同类型的开发（至少当我回想起 DOS 应用程序开发的旧时光时，我是这么想的）。

现在由于各种原因，我需要回到“正常”的应用程序开发。我想要构建的应用程序需要一个 GUI，它必须在 osx 和 windows 上运行。作为 mac os 用户，如果我能得到一个应用程序，那真是太好了，感觉就像一个 osx 应用程序。我不需要任何特殊的 UI 组件：像树这样的资源管理器/查找器、数据网格和一些表单元素就足以满足我的需要。

现在的问题是，我不知道从哪里开始：我会将我归类为新手，因为距离我上次开发 Web 应用程序以外的任何东西已经有很长时间了。有没有学习曲线不陡峭的编程语言和 gui 工具包的建议？或者你能推荐任何我应该读的书来进入跨平台的 osx/windows 应用程序开发吗？

非常感谢！

**谢谢大家！**我想我会看看realbasic！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-01T11:09:13.860

**编辑 2011 年 11 月 - 撤回**

我在下面所说的大部分内容仍然正确，但是我现在对向任何试图发布商业质量应用程序的人推荐 REALbasic 持严重保留意见。为了让我记住以后编辑这篇文章，看看 RealSoftware 是否已经设法使用他们的框架的 Cocoa 版本发布了一个健壮的 IDE 版本。如果没有，请非常谨慎。

我怀着沉重的心情写这篇文章，因为我仍然非常喜欢这种语言，并且认为框架和 IDE 做得很好。问题显然是资本不足之一，也可能是公司内部的软件开发文化始终未能处理错误回归问题。每个版本都修复了许多错误，但在引入错误的数量方面似乎对开发人员产生了巨大的影响。由于产品的复杂性，他们有一个非常小的团队，特别是考虑到新发布的网络版，它实际上是一个全新的平台。

从理论上讲，它仍然是一款很棒的产品，但要利用试用期，在您计划针对的每个平台上对其进行彻底测试，并确定您是否可以忍受发现的任何错误，因为它们可能会存在一段时间。

* * *

[基本的。](http://www.realsoftware.com)

该语言是一种功能强大的现代 OO 语言，您从模糊记得的 Pascal 或当前的 JavaScript 中适应它并不难。它具有 C++ 的大部分功能，但没有使调试成为噩梦的危险部分。您还会发现 IDE 比 Visual Studio 更简单、更容易处理。

IDE 使得将 GUI 组合在一起并让它在多个平台上工作变得非常容易。Pro 版拥有我用过的最好的跨平台调试器之一，它很容易在 Mac 上工作（比如说）并为 Windows 和 Linux 开发，一键编译和测试。

还有一个蓬勃发展的社区，其中包括许多具有您专业水平的人，因此您不会因为*新手*而受到嘲笑。

我是一名拥有超过 25 年经验的专业软件开发人员，目前主要从事 REALbasic、C++、C#、Objective-C 和一些 Ruby 方面的工作。对于您提到的应用程序，REALbasic 是我的首选工具。

**编辑：**我不敢相信有人对此投了反对票，但没有勇气添加评论来解释原因。我听说过对 REALbasic 的偏见，但这是我第一次遇到它。我的回答在哪些方面不适合这个问题？

只是为了增加我的信誉，我已经**实现** 了部署到数以万计最终用户的系统使用的[跨平台框架](http://www.oofile.com.au/crossplat.html)——我有 C++ 跨平台经验来为其他人做得很好而鼓掌，REALbasic 框架非常好.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-01T14:43:15.453

我用相对较小的学习曲线涉足的最好的跨平台工具......特别是如果你熟悉 Visual Basic......是 REALbasic。使用 REALbasic Pro，您可以从相同的代码库编译程序以针对 Win32、Linux 和 OS X，只要您不使用特定于操作系统的调用和功能（可以使用插件或直接调用）。他们的支持对我的问题非常敏感，个人版（仅编译到您下载 IDE 的单一目标平台）对于 Linux 是免费的，对于其他平台来说价格低廉，但实际上您可能想下载并尝试一下出去。一个 IDE，相对便宜，并且可以在 OS X、Windows 和 Linux 上编译本机应用程序......它不那么麻烦，对我来说，当你想要完成工作时，这很重要。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-01T14:48:44.020

我建议不要使用 C 和 Qt，也会推荐 REALbasic。

凭借您在 Pascal 和可能的 JavaScript 方面的背景，您会对 REALbasic 感到更加自在。我用 Pascal 和 C/C++ 编写了很多代码——Pascal 指导您避免编程错误，C 让您直接介入，甚至邀请您，然后您将很难弄清楚为什么会出错. Qt 是一个非常抽象的框架，需要您学习很多才能让某些东西工作，就像使用 C 一样。与我们过去使用 TP 的简单性相比。

RB 在这方面更像帕斯卡。它的 IDE 在支持您的编程方面非常现代，具有易于使用的 GUI 设计器、直接的编辑器来填补处理 UI 事件、代码完成等方面的空白。

只有当你进入庞大的程序规模时，RB 才会失去一些吸引力，因为它缺少可以让你很好地了解复杂类交互等的工具。

另一件事是 Qt 比 RB 更可能导致丑陋的 Mac 应用程序。RB 直观地引导您将其全部对齐——在 Qt 中，您必须使用数字、偏移量等来定位您的对象（至少在 2 年前我使用 Qt 时就是这样）。

我已经在 RB 中编写了很多 x 平台应用程序，并且对结果非常满意。

您可能不会编写那些与开放的小型企业市场上最好的应用程序竞争的超级漂亮的应用程序，但如果您只是想让一些可靠的代码工作，并且具有易于设计的 UI 并且对于普通用户来说是可以接受的，试试RB。

不过，它不是免费的。但它相当小的社区站在你这边——他们渴望提供帮助，而不是抨击所有试图讲道理的人:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-01T15:21:21.087

我是新来的，但通过 REALbasic 用户组了解了这个线程。我想我的立场和你相似。我为我的工作做了网站设计，主要使用 javascript（有一点 php，不多）。我有 Pascal 和 BASIC 背景。我曾涉足 C，但不喜欢监控它所需的详细程度。它让我想起了太多的集会（高中/大学时代我仍然做噩梦）。

我一直在寻找一种跨平台的语言，对它有一种熟悉的感觉，但最初是从 VB 开始的，因为它是免费的。然而，我更喜欢在 MacOS 中编程，所以我尝试了 REALbasic。我发现 REALbasic 的 UI builder 比 VB 更容易使用。我会回应其他评论，即社区是我参与过的所有用户组中反应最快的。从那以后，我使用 REALbasic 和我的 Mac 制作了几个程序，超过 100 位用户每天在我的工作中使用这些程序（在 PC 上，主要是 XP 和 2000）。我收到了对这些程序的优美和易用性的赞美。你*愿意*必须记住调整“小”的东西以使它看起来正确跨平台（即：默认按钮位置在 PC 和 Mac 上是相反的，在 Linux 上的按钮大小不同等）。许多人捐赠了自定义类来为你做这些事情。

人们似乎认为“BASIC”语言对于他们的目的来说不够强大。虽然它的核心是 BASIC（使用 For..Next、Do..While 和 If..Then 命令），但它不是你爸爸的 BASIC。它比我用过的任何其他东西都更 OOP，它基于事件驱动的结构，对我来说很容易上手。他们有免费试用版，因此请获取演示并完成教程。如果您遇到困难，请在网站上的 NUG 或论坛上提问，您可能会很快得到答案。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-01T10:30:32.080

您可能对以下问题和答案感兴趣：

*   [跨平台开发 - 使用跨平台 UI 工具包还是在多个平台上原生？](https://stackoverflow.com/questions/633537/cross-platform-development-go-with-a-cross-platform-ui-toolkit-or-native-on-mul)
*   [最简单的跨平台小部件工具包？](https://stackoverflow.com/questions/91616/easiest-cross-platform-widget-toolkit)
*   [我应该使用跨平台的 GUI 工具包还是依赖本机工具包？](https://stackoverflow.com/questions/34325/should-i-use-a-cross-platform-gui-toolkit-or-rely-on-the-native-ones)
*   [使用 Mac 进行跨平台开发？](https://stackoverflow.com/questions/215099/using-a-mac-for-cross-platform-development)

和许多其他人在这些问题的**相关侧边栏中提出了建议。**

一些答案建议使用[gtk](http://www.gtk.org/)（由跨平台[gimp](http://www.gimp.org/)使用）。其他人建议使用本地方法。有人认为 Mac 是为 Mac OS X、Windows、Unix 和 Linux 开发的一个很好的平台。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-01T15:31:06.913

正如这里的 Andy Dent 和其他人所指出的，对于创建跨平台应用程序的新手来说，很难击败 REALbasic（现在的[Xojo](http://www.xojo.com)）。

当然，还有很多其他跨平台解决方案，例如 QT (C++)、Java、.NET（在某种程度上）和 wxWidgets，但它们并不是初学者能够有效使用的东西。

我在各种语言和技术方面拥有多年的专业开发经验，并且我更喜欢大多数时间使用 REALbasic。

话虽如此，您还可以考虑 Runtime Revolution 或 Adob​​e Air。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-04-01T15:56:15.917

我也全心全意地推荐 RealBasic。我已经使用 RB 大约 8 年了，发现它是满足我公司开发需求的完美工具，从小型应用程序到大型多用户系统。

它非常适合初学者和重新开始编程的人，也适合专业开发人员。

强烈推荐。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-01T10:43:18.930

虽然使用独立于平台的语言并允许您编写一次应用程序并在任何地方使用似乎很诱人，但毫无疑问，您会在每个方面都牺牲一些东西，特别是在 UI 和用户体验方面。如果您可以最好地使用本机 API 创建一些东西，它可以让您充分利用操作系统的功能来使您的应用程序大放异彩。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-01T10:49:06.980

我肯定会选择 C++ 和 Qt，你编写的代码将在 Windows、Mac 和 Linux 上编译和运行而不会出现问题。Qt 附带的新 IDE - Qt Creator 非常出色，在 Windows、Mac 和 Linux 上工作和看起来都一样，你不需要任何其他东西来开始编写跨平台应用程序。

我尝试了 WxWidgets，但没有找到好的 IDE，最好的一个是 Code Blocks，但 GUI Designer 并不完美，在不同的系统上存在不同的问题，IDE 本身仍在大力开发中。

其他选项是 Java 和 C#，但它们不是跨平台语言，它们本身就是平台。尽管您不需要为每个平台编译代码，但在此过程中会有很多不同的问题......

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-01T12:00:31.583

如果您的 GUI 足够简单，为什么不创建一个通用的 GUI 层，然后对其进行编程呢？使用本机小部件为每个操作系统编译一个版本。这是在多个平台上确保原生 L&F 的最佳方式。

Qt 和 REALbasic 的建议都很好，尽管它们将您与特定的技术联系在一起（我无法想象在这种特殊情况下会成为问题）。

就个人而言，我会使用 Java，因为它以前对我有用（我有一个可以在我的 PDA、手机和桌面上运行的应用程序），但它不使用本机小部件。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-14T06:25:31.217

在此处添加迟到的评论：

看看[革命](http://www.runrev.com/home/product-family/)。它有点像 roids 上的现代 Hyper-card。它是跨平台的（Mac、Linux 和 Windows）。这是 RealBasic 的重要竞争对手，并且正在强劲发展。虽然我仍然使用 RB（并且喜欢它），但我正在认真看待革命。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-20T03:01:06.583

我也会研究 Realbasic 或 Revolution。他们都创建了跨平台的原生应用程序。我个人认为 Realbasic 会是一个更好的选择，因为它在语言方面与 VB 非常相似。您可以通过 RB 学习一些有价值的技能，并且可以随着您的经验而成长。我已经使用 VB 和 RB 超过 10 年了，我想你会很高兴的。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2009-04-01T10:38:56.710

如果您需要您的代码是跨平台的，则必须使用[QT](http://en.wikipedia.org/wiki/Qt_(toolkit))之类的东西。

虽然，我建议对每一个都使用本机 API（Mac OS X 的 Cocoa、.NET 或 Windows 的 Win32 API）。用户体验会好很多。但是，当然，就开发人员的工作时间而言，这将花费您更多的钱。

# http - 带有重定向的 HTTP 响应，但没有往返？

> ID：704888
> 
> 赞同：4
> 
> 时间：2009-04-01T10:12:14.527
> 
> 标签：http, redirect

我希望浏览器反映一些其他 URL，而不是用于创建请求的 URL，但不往返于服务器。

我可能会这样做：

```
POST /form HTTP/1.1
... 
```

...然后返回：

```
HTTP/1.1 200 OK
Location: /hello 
```

但这会导致重定向，浏览器将再次请求 URL /hello。

我想告诉浏览器，虽然您刚刚发送的请求是 POST /some_url，但我现在返回的实际资源实际上称为 GET /hello/1，但没有进行往返。即位置：...

有没有办法用 JavaScript 或 base="" 属性来做到这一点？这将告诉浏览器在我按 F5（刷新）而不是那个时请求 /hello/1，发布提交警告？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T14:18:11.877

```
HTTP/1.1 200 OK
Location: /hello 
```

实际上这可能行不通。它应该是 30x 状态而不是 200（“303 See Other”最适合对 POST 的响应），并且“Location”应该是完整的绝对 URL。

（如果您的脚本只是说 'Location: /relativeurl' 而没有 30x 状态，CGI 服务器通常会通过获取新 URL 并返回它而不告诉浏览器发生任何有趣的事情来执行内部重定向。这可能听起来像你想要的，但它不是真的，因为从浏览器的角度来看，它与返回 200 和直接页面的原始脚本没有什么不同。）

> 但这会导致重定向，浏览器将再次请求 URL /hello。

在实践中，这可能没有你想象的那么糟糕，这要归功于 HTTP/1.1 keep-alives。只要它在同一台服务器上，客户端就应该能够立即（在下一个数据包中）响应重定向。

> 有没有什么办法[...]当我点击 F5（刷新）而不是那个，发布提交警告时，它会告诉浏览器请求 /hello/1 吗？

没有。坚持使用 POST-Redirect-GET 模型来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T20:55:11.673

不，Http 是无状态的，每个请求都有一个答案。当您发布时，您需要立即重定向到获取页面以防止重复发布 - 您不希望它位于该帖子网址上。重定向是告诉浏览器它在一个新页面上。这就是它的工作方式。

# windows - Windows 用户名最大长度

> ID：704891
> 
> 赞同：32
> 
> 时间：2009-04-01T10:13:10.140
> 
> 标签：windows, authentication

Windows 域 + 用户名的最大长度是多少？也就是说，Windows 中域/用户名的法律限制是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2010-01-28T14:33:57.550

最大长度是在[lmcons.h](http://doc.ddart.net/msdn/header/include/lmcons.h.html)中定义的哈希值。DNLEN 是最大域长度，UNLEN 是最大用户名长度。

在我的 XP 机器上的这个文件的版本中（作为 Visual Studio 8 的一部分安装），DNLEN = 15 和 UNLEN = 256。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-01T10:22:19.590

读这个

对于 Windows 2000：[http ://technet.microsoft.com/it-it/library/bb726984(en-us).aspx](http://technet.microsoft.com/it-it/library/bb726984(en-us).aspx)

对于 Windows 2003：[http ://technet.microsoft.com/en-us/library/cc783323.aspx](http://technet.microsoft.com/en-us/library/cc783323.aspx)

> ## 登录名规则
> 
> 登录名必须遵循以下规则：
> 
> *   本地登录名在工作站上必须是唯一的，而全局登录名在整个域中必须是唯一的。
> *   登录名**最多可包含 104 个字符**。但是，使用长度超过 64 个字符的登录名是不切实际的。
> *   为所有帐户提供 Microsoft Windows NT 4.0 或更早版本的登录名，默认设置为 Windows 2000 登录名的前 20 个字符。Windows NT 4.0 或更早版本的登录名在整个域中必须是唯一的。
> *   从 Windows 2000 计算机登录到域的用户可以使用其 Windows 2000 登录名或 Windows NT 4.0 或更早版本的登录名，而不管域操作模式如何。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-05-10T11:06:29.667

在 Lmcons.h 中定义了一个常量 UNLEN，它定义了用户名的最大长度

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-05T12:19:04.770

compmgmt.msc 允许本地帐户的用户名最多包含 20 个字符。dsa.msc 允许域用户名是 256。

# c++ - 我应该去创建一个程序以将信息存储到文件中，编辑该文件中的信息并添加新信息的最佳方法是什么

> ID：704892
> 
> 赞同：1
> 
> 时间：2009-04-01T10:13:46.520
> 
> 标签：c++, xml, file, save, inventory

我即将开始一个我正在尝试做的小项目，我创建一个 C++ 程序来将库存数据存储到一个文件中（我猜一个 .txt 会做）

*   • 项目描述 • 现有数量 • 批发成本 • 零售成本 • 添加到库存的日期

我需要能够：

• 向文件中添加新记录 • 显示文件中的任何记录 • 更改文件中的任何记录

在我开始之前有什么我应该知道的可以使这变得更加简单和高效......

例如，我应该尝试使用 XML 还是通过 C++ 难以使用的东西？

我从来没有真正理解过这样做的最有效方法。

就像我会在文件中搜索并查找括号内的东西吗？

*编辑*

数据大小不应该太大。我想你可以说这是作业。我想将结构的内容写入文件的路径，我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T10:43:17.043

有很多方法。这是做功课还是实际使用？如果是用于家庭作业，则可能对您可以使用的内容有一些限制。

否则，我建议使用一些嵌入式 DBMS，例如[SQLite](http://www.sqlite.org/)。还有其他的，但这将是最强大的解决方案，也将有最简单的实现。

XML 也是可以接受的，并且有许多可重用的实现可用，但是一旦您进入数千条记录，它就会开始失去性能。JSON 也是如此。人们可能仍在争论哪一个更简单——JSON 或 XML。

另一种可能性是创建一个`struct`并将其内容直接写入文件。如果记录大小不是恒定的，则会变得棘手。而且，如果记录格式发生变化，则需要重建文件。否则，如果仔细实施，此解决方案可能是性能最佳的解决方案之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T10:36:17.807

您能否启发我们为什么不想使用数据库引擎呢？

如果只是为了学习，那么......请给我们该文件中存储数据的估计大小和访问模式（有多少用户，他们多久执行一次等）？

挑战将是创建有效的搜索和修改代码。

对于搜索，它与数据结构和组织有关。对于修改，您将如何将更新写入文件而不将其完全读入内存，在那里对其进行更新，然后将其再次完全写回文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T13:11:37.577

如果这是一个将实际使用的项目，并且有可能随着时间的推移添加功能，那么从一开始就选择数据库解决方案，即使它看起来有点矫枉过正。我以前一直在这条路上，随着时间的推移添加了一些小功能，在你意识到之前你已经实现了一个数据库。不良。咬紧牙关，使用数据库。

如果这是一个学习练习，则取决于您要存储的数据量。如果它很小，最简单的做法是将整个文件读入内存并在那里对其进行操作。进行更改后，将整个文件写回磁盘。如果数据太大而无法做到这一点，那么下一个最好的办法是拥有固定大小的记录。创建一个包含所有数据的 POD 结构（即，没有指针、stl 容器等）。然后，您可以重写单个记录，而无需重写整个文件。如果这些都不起作用，那么最好的选择是数据库解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T10:29:38.637

如果您坚持手动进行，我建议使用 JSON 而不是 XML。

另外，考虑 sqlite。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T10:56:55.153

[这听起来像是SQLite](http://www.sqlite.org)的完美工作。体积小、速度快、灵活且易于使用。

# sharepoint - Sharepoint 解决方案打包：如何为我的功能获取自定义图标？

> ID：704893
> 
> 赞同：6
> 
> 时间：2009-04-01T10:13:59.937
> 
> 标签：sharepoint, deployment, sharepoint-2007, solution

我不知道我在这里有多愚蠢！

我有一个解决方案，它打包了一些母版页和布局等，我可以很好地部署它们，并且该功能很好地出现在“网站集功能”列表中。但是我想在我的功能旁边放一个自定义图标。我希望该图标位于解决方案包中，因此需要在部署解决方案时将图像放入列表或文件夹中（而不是激活功能）。

这可能吗？简单的？

关于所有这些共享点解决方案/feature.xml/element.xml，我还没有搞清楚！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-01T12:52:57.073

这是可能且简单的。

1.  在 Feature.xml 文件中，只需包含 ImageUrl="" 属性并指定图像的位置。最佳做法是在 Template\Images 文件夹下使用您的图像创建一个文件夹，然后引用此位置
2.  在解决方案 ddf 文件中包含包含图像的文件夹
3.  部署后，您应该有一个 %12HIVE%\Templates\Images\ACMEImages 文件夹，其中包含您的图像

Feature.xml 示例：

```
<Feature 
    Id="21F724AE-9C1C-4F4D-AAE9-7789CA01A7E3"
    Title="ACME Lists"
    Description="List definitions for the ACME"  
    Version="1.0.0.0"
    Hidden="false"
    Scope="Web"
    ImageUrl="ACMEImages\acmelogo.png"
    xmlns="http://schemas.microsoft.com/sharepoint/">
    <!-- other feature file info omitted --> 
```

DDF 文件示例：

```
.Set DestinationDir=IMAGES\AcmeImagesRootFiles\TEMPLATE\IMAGES\ACMEIMages\acmelogo.png 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2010-06-02T20:25:06.967

在 SharePoint 2010 中，Microsoft 默认图标为：GenericFeature.gif - 31 x 22 图像。使用 VS 2010 和 SP 2010，您可以将 SharePoint“图像”映射文件夹添加到您的 SharePoint 项目。然后将您的图像放在此文件夹中。请务必在 *.feature 对象的“属性”面板中提供图像 URL。如上所述使用图像的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-10-12T21:06:27.317

尽管我完全按照他的建议做了，但皮特的解决方案对我不起作用。我的问题是 SharePoint 在 /_Layouts 文件夹而不是 Templates/Images 文件夹中查找图像。

# svn - 滥用版本控制

> ID：704897
> 
> 赞同：4
> 
> 时间：2009-04-01T10:15:14.007
> 
> 标签：svn, version-control, binary-diff

版本控制是否适合内容本质上是二进制数据文件的项目？我正在考虑重量为 10 giga 的包装，其中包含大量 BMP 和 TGA 文件。

颠覆可以处理这样的事情吗？是否可以生成某种二进制补丁，允许用户只下载修改过的内容。Rsync 可能是一种选择，但没有回头路。我真的很希望能够轻松地回到早期版本。

我也看了这个[问题](https://stackoverflow.com/questions/58520/version-control-of-deliverables)，但对答案不满意

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T10:28:35.017

您的问题是发布管理问题，其中包括：

*   构建：您如何以及以多快的速度重新生成部分或全部交付内容？
*   包装：该交付中有多少文件？
    如果您的内容包含*太多*文件，那么在任何远程环境中部署（即复制或 rsync）都不容易，这与其说是因为全局大小，不如说是因为所需的事务数量。
*   发布：您将交付的内容存储在哪里以及如何将其链接到生成它的初始开发环境？

我认为如此大规模的交付不是为了在 VCS 中发布，而是存储在基于文件系统的存储库中，具有适当的名称（或 version.txt），以便能够识别其版本并将其链接回开发内容（在颠覆中存储和标记）。
Maven 就是这样一个 repo 的一个例子。

我还要指出，要交付的内容应包含有限数量的文件，这意味着：

*   将大量相关文件压缩成一个压缩文件
*   运行一个脚本，它不仅可以 rsynch，还可以解压缩这些文件

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T10:29:32.787

Subversion 使用[xdelta](http://code.google.com/p/xdelta/)处理二进制文件。

[http://subversion.tigris.org/faq.html#binary-files](http://subversion.tigris.org/faq.html#binary-files)

顺便提一句。相关问题：[Subversion 在存储大量二进制文件方面有多好？](https://stackoverflow.com/questions/538643/how-good-is-subversion-at-storing-lots-of-binary-files)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-01T10:20:40.857

在进行更新时，Subversion 只发送差异，而不是整个文件。但是，文件的初始签出确实需要下载所有文件。这基本上意味着下载10GB。合并二进制文件也是一场噩梦，只要您在只有一个人可以提交而其他人是只更新文件的奴隶的主/从环境中工作，这将非常有效。否则你很可能会在一次又一次的冲突中结束。

是否不可能将 10GB 拆分到多个存储库中？他们真的需要作为一个整体进行版本控制吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-01T22:06:19.007

简短的回答是肯定的。

我们将颠覆用于一个相对较大（40GB 结帐）的游戏开发项目。我会说它处理二进制文件出奇的好。缺点是现在您只能获得更改的文本信息，即：“更改纹理以适应更新的主角模型。” 但是，当您寻找性能问题并确保每个人都使用相同的二进制文件进行开发时，即使是这一点信息也可以为您节省开支。据我所知，修补需要完整的文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-01T10:55:18.730

您可能想查看一些专用的**资产**管理系统，而不是试图将源版本控制系统猛烈地弯曲到您的需求中。我听说过的唯一一个（但没有经验也没有从属关系）是[http://www.alienbrain.com/](http://www.alienbrain.com/) - 它是 co$t$。

# svn - 在 SVN 存储库中搜索文件名

> ID：704901
> 
> 赞同：86
> 
> 时间：2009-04-01T10:16:27.420
> 
> 标签：svn, search, text, base

我们有一个包含数千个文件夹和子文件夹的代码批量存储库，我想在这个存储库下搜索文件名或一些单词。

```
Root folder
    a\
    b\
    c\
    d\
    e\
    f\ab\
    f\ab\cd.txt 
```

我想搜索 cd.txt 但不知道它在 SVN 存储库中的位置，因为我想在 SVN 的根文件夹上执行搜索，我将在其中放置文件名 cd.txt 并运行命令，将签入每个文件夹，并将显示文件详细信息结果....

希望要求很明确。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2011-09-20T12:08:19.570

以下对我有用（svn 版本 1.4.6）

```
svn list -R <URL> | grep "<file_pattern>" 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2009-04-01T10:30:28.337

如果文件在您的工作副本中，那么如果您使用的是 svn 1.5：

```
svn list --depth infinity | grep <filename> 
```

或较早版本的 svn：

```
find . -name <filename> -not -path '*.svn*' 
```

如果您需要在历史记录中查找文件（已删除或移动）：

```
svn log -v | less 
```

并通过以下方式搜索：

```
\<filename><return> 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-09-02T13:35:42.930

通过访问 repo 本身使用（即在您的 svn 主机文件系统上）

```
svnlook tree [path_to_repo] | grep [file_name] 
```

或搜索所有存储库（如果您有多个存储库设置）。

```
for i in \`ls [path_to_repos_dir]`; do echo $i; svnlook tree [path_to_repos_dir]/$i | grep -i [file_or_folder_name]; done 
```

选项 --full-paths 将在 repo 中提供文件的完整路径（如果找到）

例子：

```
for i in `ls /u01/svn-1.6.17/repos`; do echo $i; svnlook tree --full-paths /u01/svn- 1.6.17/repos/$i | grep -i somefile.txt; done 
```

如果需要静态副本，则将输出重定向到文件。
假设使用 nix OS。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2009-04-01T10:24:13.470

`svn list --depth infinity <your-repo-here>`获取 repo 中的文件列表，然后`svn cat`获取内容。您可以将`--xml`键添加到`list`命令以使解析更简单。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-03-18T13:55:04.797

最近我发布了我的[实用程序](https://sourceforge.net/projects/fastsvncrawler/)来列出存储库，这比“svn ls --depth infinity”方法快得多。这是[基准](http://vcs.atspace.co.uk/2013/03/16/fast-listing-of-svn-repository-with-svn-crawler/)。它只是调用 Subversion 内部 API 中可用的函数，但现在可以通过命令行访问。

所以你可以运行

```
$ svn-crawler <URL> | grep "<file_pattern>" 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-15T21:54:49.747

如果您使用的是 TortoiseSVN，如果您愿意逐个项目地查看项目，则可以试试这个 - 对我有用：

1.  在您的存储库顶级 URL 下创建一个空白项目，将其命名为 BLANK
2.  单击左侧窗格中的 Repo URL
3.  在右侧窗格中选择您的 BLANK 项目和您想要的项目 - 比如树干
4.  右键单击以弹出浏览器菜单并选择“比较 URL”，具体取决于您的存储库的大小，加载可能需要一分钟。但是您基本上可以将整个项目列表放在“准备搜索”列表中。
5.  在搜索过滤器中输入您的文件名或其他字符串

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-02T04:08:48.163

不确定使用其他工具过滤搜索结果是否是个好主意，例如`svn+grep`. 此类工具在 Windows`grep`或`svn-crawler`其他操作系统上可能不可用/不可用，您需要安装/升级它们。

`--search`您可以使用 1 个带有支持[glob](https://en.wikipedia.org/wiki/Glob_(programming))模式的标志的单个 svn 命令来解决此任务：

```
> svn ls -R --search "readme.md"
branches/0.13.x/readme.md
trunk/readme.md

> svn ls -R --search "*.md"
branches/0.13.x/189.md
branches/0.13.x/readme.md
trunk/189.md
trunk/readme.md 
```

更多关于`svn ls --search`选项：

```
> svn ls -h                                
list (ls): List directory entries in the repository.
usage: list [TARGET[@REV]...]

  List each TARGET file and the contents of each TARGET directory as
  they exist in the repository.  If TARGET is a working copy path, the
  corresponding repository URL will be used. If specified, REV determines
  in which revision the target is first looked up.

...

Valid options:
  ...
  --search ARG             : use ARG as search pattern (glob syntax, case-
                             and accent-insensitive, may require quotation marks
                             to prevent shell expansion) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-30T12:38:32.477

VisualSVN Server 4.2 支持在 Web 界面中按名称查找文件。[在演示服务器](https://demo-server.visualsvn.com/!/#)上试用新功能。

[您可以在https://www.visualsvn.com/server/download/pre-release/](https://www.visualsvn.com/server/download/pre-release/)下载 VisualSVN Server 4.2.0 。[请参阅https://www.visualsvn.com/server/download/](https://www.visualsvn.com/server/download/)上的发行说明。

[![在此处输入图像描述](https://i.stack.imgur.com/5qgrE.png)](https://i.stack.imgur.com/5qgrE.png)

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2016-03-02T07:10:31.540

如果您的远程存储库不是很大，那么一个简单的方法是：您可以进行“签出”以获取本地存储库。如果您在 Windows 机器上使用“搜索”或 Linux 机器使用“查找”命令。

# c++ - 编译器和负数表示

> ID：704908
> 
> 赞同：5
> 
> 时间：2009-04-01T10:19:35.163
> 
> 标签：c++, c, compiler-construction, representation, negative-number

最近我被[这个问题](https://stackoverflow.com/questions/700410/subtraction-without-minus-sign/700487#700487)弄糊涂了。也许是因为我没有阅读语言规范（这是我的错，我知道）。

C99 标准没有说明编译器应该使用哪种负数表示。我一直认为存储负数的唯一正确方法是二进制补码（在大多数情况下）。

所以这是我的问题：你知道任何现代编译器默认实现一个补码或符号幅度表示吗？我们可以用一些编译器标志来改变默认表示吗？

确定使用哪种表示的最简单方法是什么？

那么 C++ 标准呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T10:25:27.787

我认为这不是编译器使用什么表示的问题，而是底层机器使用什么表示的问题。编译器选择目标机器不支持的表示是非常愚蠢的，因为这会引入大量开销而没有任何好处。

IP 协议套件中的某些校验和字段使用反码，因此也许专用的“网络加速器”型 CPU：s 实现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T10:52:59.810

虽然[二进制补码](http://en.wikipedia.org/wiki/Twos-complement)表示是迄今为止最常见的，但它并不是唯一的（[见一些](http://en.wikipedia.org/wiki/Signed_number_representations)）。C 和 C++ 标准化委员会不想要求非二进制补码机器模拟非本地表示。因此，C 和 C++ 都不需要特定的负整数格式。

这导致对有符号类型的按位运算的未定义行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-14T04:42:44.087

实现补码数学的[UNISYS 2200 系列](http://en.wikipedia.org/wiki/UNIVAC_1100/2200_series#UNISYS_2200_series)仍在与一些相当更新的编译器一起使用。您可以在以下问题中了解更多信息

*   [标准委员会关心的异乎寻常的架构](https://stackoverflow.com/a/6972551/995714)
*   [是否有任何 C 的非二进制补码实现？](https://stackoverflow.com/a/12277974/995714)

# sql - SQL Server - 执行批处理时出错。错误信息是：目录名无效

> ID：704914
> 
> 赞同：42
> 
> 时间：2009-04-01T10:21:25.380
> 
> 标签：sql, sql-server-2005

我们的数据库服务器磁盘空间不足，在释放一些磁盘空间后，在 sql server management studio 中运行任何查询，并将结果发送到网格视图，导致此错误：
执行批处理时发生错误。错误信息是：目录名无效。

当结果发送到文本视图时，查询工作正常。

有谁知道为什么会发生此错误以及如何摆脱它？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2017-03-14T15:31:38.863

您需要做的就是打开命令提示符并输入： `mkdir %temp%`然后按 Enter。

就那么简单。无需注销/登录。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-08-01T12:56:41.523

收到消息：

> SQL Server - 执行批处理时出错。错误信息是：目录名无效

删除临时文件后尝试在 Management Studio 中执行查询时`c:\documents and settings\administrator\local settings\temp`

# 注销服务器会话并重新登录时已解决。

此解决方案修复了以下环境中的此错误：

*   视窗服务器 2003
*   视窗服务器 2008
*   视窗服务器 2012
*   数据库服务器 2005
*   数据库服务器 2008
*   Sql Server 2008 R2
*   数据库服务器 2012
*   数据库服务器 2014
*   SQL Server 2016

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-03-05T08:49:43.850

我在 SQL Server 2012 上遇到了类似的问题。我检查了 %TEMP% 变量中的文件夹值（从命令提示符回显 %TEMP% ）并注意到该文件夹​​不存在。我创建了文件夹，它成功了！

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-06-09T07:14:57.250

我在我的网络服务器上遇到了这个问题（运行 SQL Server 2012 的 Windows 服务器 r2）

```
The directory name is invalid.
(mscore lib) 
```

注销（终止我的远程会话）并重新登录为我解决了这个问题。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-01T18:04:52.333

“保存查询结果的默认位置”是否设置为工具/选项/查询结果/SQL Server/常规中的有效路径？

TMP/TEMP 环境变量是否指向有效目录？

重新安装客户端工具可能会解决问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-24T14:30:10.123

我在我的 Windows 7 机器上遇到了同样的问题。我实际上在 SQL Server Management Studio 和 Visual Studio 2012 中都遇到了这个错误。我检查了我的临时目录，发现了超过 66,000 个文件。值得注意的是，有大量名为 tmpXXXX.tmp 的文件，其中 XXXX 是一个十六进制数字。问题是文件一直到 tmpFFFF.tmp。因此，创建临时文件的任何内容都没有正确清理它们，最终只是用完了文件。解决方案是删除该文件夹中的所有文件。毫不奇怪，这也大大提高了性能。

临时文件夹位于：%TEMP%，这对于 XP 和 Win7 都是正确的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-24T07:07:26.617

I was facing this problem for a long time.....simple answer for this problem `An error occurred while executing batch. Error message is: The directory name is invalid` is just free up the disk drive space ....my problem resloved by this may be this will be helpful for many more...

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-25T11:23:14.863

如果 DB 是在 SQL Server 2008 中创建的并且它是由 SQL Server 2005 打开的，我会遇到同样的问题。只需在 2008 年重新打开它。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-01-06T04:07:09.283

我遇到了同样的问题，所以为了检查这个我输入了 %temp% 并且它给出了一个找不到文件夹的错误 .../temp/2 所以我在临时文件夹中创建了一个文件夹名称 2 并重新启动 sql server。

这对我有用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-01T10:50:20.037

我知道这听起来像是一个笑话，但是您是否尝试过重新启动 SQL Server 实例？

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-06-11T04:35:34.477

昨天，当我尝试在 SQL Management Studio 2014 中打开新查询窗口时，我遇到了同样的错误“目录名称无效”。它发生在清理（删除）%temp% 文件夹文件之后。

我重新启动了 SQL 服务，但没有运气！重启服务器后我的问题解决了。

# linux - unix/linux 中的 cron 表达式是否允许指定确切的开始和结束日期

> ID：704927
> 
> 赞同：17
> 
> 时间：2009-04-01T10:25:36.570
> 
> 标签：linux, unix, cron, crontab

我希望能够配置这样的东西。

1.  我想从 2009 年 6 月 29 日到 2009 年 12 月 30 日每天早上 7 点运行工作“X”。将当前日期视为 2009 年 4 月 4 日。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-04-01T11:09:18.290

它*可以*以一种棘手的方式完成。

对于该范围，您需要三个单独`cron`的作业，它们都运行相同的代码（`X`在本例中）：

*   一个用于 6 月 29 日和 30 日 ( `"0 7 29,30 6 * X"`)。
*   7 月至 11 月期间的每一天 ( `"0 7 * 7-11 * X"`)。
*   除了 12 月的最后一天 ( `"0 7 1-30 12 * X"`)

这给了你：

```
# Min   Hr   DayOfMonth   Month   DayOfWeek   Command
# ---   --   ----------   -----   ---------   -------
   0     7      29,30        6        *          X
   0     7          *     7-11        *          X
   0     7       1-30       12        *          X 
```

然后确保在 2010 年 6 月 29 日之前将它们注释掉。您可以在 12 月 31 日添加最终`cron`作业，以通过电子邮件向您发送需要禁用它的电子邮件。

`X`或者，如果年份不是 2009 年，您可以修改为立即退出。

```
if [[ "$(date +%Y)" != "2009" ]] ; then
    exit
fi 
```

然后，如果您忘记禁用作业也没关系。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-02T22:53:12.857

是的，主要是。有些 cron 实现支持多年，有些不支持，所以我们假设你的不支持。另外，我假设该作业仅由 cron 守护程序运行，因此我们可以使用执行位来确定 cron 是否应该运行该作业。

请注意，您需要将脚本保留为不可执行，直到您希望它运行为止。

以下 cron 表达式将执行您想要的操作（每天，包括周末）。根据需要进行调整：

```
# Make the job executable on 29 June.
0 6 29 6 * chmod +x /path/to/my/job/script

# Run the job between June and December, only if it's executable.
0 7 * 6-12 * test -x /path/to/my/job/script && /path/to/my/job/script

# Disable execution after 30 December.
0 8 30 12 * chmod -x /path/to/my/job/script 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T03:16:47.630

我通常喜欢将逻辑与正在运行的程序保持一致。您可能会考虑设置一个每天运行脚本的 cron 作业，然后让脚本自行决定它是否应该做任何有用的事情。当最后一个有用的日子（12 月 30 日）过去后，您的脚本可以将自己从 crontab 中删除。在脚本中，您可以使用所有必要的注释来设置逻辑，以描述您在做什么以及为什么。

如果你的工作是一个二进制程序，你可以设置一个 run_script 在调用程序之前执行这个调度过滤工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-01T10:32:49.750

您可以使用它来生成以特定时间间隔运行的 crontab：

[http://www.robertplank.com/cron/](http://www.robertplank.com/cron/)

或这个

[http://www.webmaster-toolkit.com/cron-generator.shtml](http://www.webmaster-toolkit.com/cron-generator.shtml)

一种解决方案是设置 6 个 crons，每个月 1 个，每个将在该月每天早上 7 点运行。

这可能是最简单的方法，下一个是编写脚本。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-01T10:37:16.010

不，afaik，你不能那样做。

cron 字段分别保存分钟、小时、月中的某天、月和周中的某天的值。

```
10 5 10 * * means run at 5:10 on every 10th of every month.

10 5 * 12 * means run at 5:10 on every day in december

10 5 * * 1  means run at 5:10 every Monday 
```

您可以让它在一系列特定月份运行，因为 crontab 格式确实接受范围。在这种情况下，对于月份字段，4 月到 12 月将是 4-12。但这并没有考虑到您希望将其限制在 2009 年。

没有设置 cronjob 的开始和停止日期的机制。当然，您总是可以编写脚本。每天运行一个 cronjob 并检查当前日期是否在 30/12 之前。如果是 31/12，请自行移除。或者更深思熟虑的东西。

一个 crontab

```
0 7 * * 6-12 command_X 
```

会做你想做的部分，但它会从 6 月 1 日开始，一直持续到 12 月 31 日。跳过 6 月上半部分和 12 月 31 日必须在 X 命令中编写脚本。

# html - 邮件客户端中的html表单

> ID：704930
> 
> 赞同：1
> 
> 时间：2009-04-01T10:27:29.950
> 
> 标签：html, email, forms

好的，得到这个。

我被指派编写一个 html 表单以通过电子邮件发送给客户，以便他们填写并从电子邮件客户端提交！显然，通过电子邮件发送指向我们网站上现有表格的链接是不够的。

我仍在努力解决这个问题，因为它似乎几乎没有常识，但无论如何，我的猜测是我无法验证数据，如果真的有效，用户怎么知道？怎么回事？？？？

得到这个，他们将通过电子邮件向客户发送 pdf 和 html 文档，我尝试提出我的案例，但显然营销专家说这是可能的并且必须完成，周五工作！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T10:33:25.817

这在许多方面都不是一个好主意：

1.  并非所有电子邮件客户端都支持来自 HTML 的表单发布，请参阅： http: [//www.campaignmonitor.com/blog/post/2435/how-forms-perform-in-html-emai/](http://www.campaignmonitor.com/blog/post/2435/how-forms-perform-in-html-emai/)

2.  没有客户端验证

3.  链接到底有什么问题？
4.  您如何从 PDF 表单提交中获取数据？您可以从 Adob​​e 获得昂贵的表单工具：http: [//www.adobe.com/government/forms.html](http://www.adobe.com/government/forms.html)

5.  一些垃圾邮件/反病毒检查器会处理基于表单的电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T10:35:52.660

只有两种可能性：第一种是邮件客户端必须有一个 php 运行时环境才能在本地运行 php 脚本，还有一个嵌入式邮件服务器 - 大多数情况并非如此。第二个是您的邮件客户端就像一个浏览器并在他的邮件查看窗口中显示表单（仍然位于互联网上）（这可能是可能的，但我不知道有任何常见的邮件客户端这样做）。

因此，您要么提交表单链接，要么以这种方式构建邮件，这样就可以像普通邮件回复一样填写和提交占位符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T10:42:07.933

这通常是个坏主意。大多数电子邮件客户端只允许有限的 HTML、有限的 CSS 和根本没有任何 JavaScript。请参阅：[http ://www.sitepoint.com/code-html-email-newsletters/](http://www.sitepoint.com/code-html-email-newsletters/)

许多邮件客户端不允许提交任何表单（至少使用标准安全设置）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-02T15:18:59.750

这个想法显然是错误的。您正在为您的公司创建一个网络钓鱼向量，这可能会使他们承担巨大的法律责任。只需问他们将投入多少资金到法律辩护基金中，以支付他们将要输掉的诉讼。

adobe pdf 服务器是唯一合理的方法，但这需要大量现金并在您的网络上工作以支持新型服务器。

# asp.net - 下拉框索引问题

> ID：704939
> 
> 赞同：0
> 
> 时间：2009-04-01T10:31:34.747
> 
> 标签：asp.net, drop-down-menu

我有一个包含所有国家/地区的下拉框（ddlCountry），如果我选择美国，它将显示显示与美国相关的税收信息的网格。如果我在网格中编辑信息，并且如果我们在 ddlCountry 的下拉框中将国家/地区更改为英国（不是下拉框来在网格的编辑窗口中，没有问题）它显示错误，如

指定的参数超出了有效值的范围。参数名称：ItemHierarchicalIndex 描述：当前Web请求执行过程中发生了未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.ArgumentOutOfRangeException：指定的参数超出了有效值的范围。参数名称：ItemHierarchicalIndex

源错误：

第 86 行：} 第 87 行：第 88 行：if(rgStateTax.EditItems.Count > 0) 第 89 行：{ 第 90 行：foreach( rgStateTax.Items 中的 GridDataItem 项)

源文件：c:\Projects\ACS\sample.Acs.Administration\UserControls\TaxManager.ascx.cs 行：88

堆栈跟踪：

[ArgumentOutOfRangeException：指定的参数超出了有效值的范围。参数名称：ItemHierarchicalIndex] Telerik.WebControls.GridItemCollection.get_Item(String hierarchyIndex) +323 Telerik.WebControls.GridDataItemCollection.get_Item(String hierarchyIndex) +37 Telerik.WebControls.RadGrid.get_EditItems() +215 sample.Acs.Administration.TaxManager。 c:\Projects\ACS\sample.Acs.Administration\UserControls\TaxManager.ascx.cs:88 System.Web.UI.Control.OnPreRender(EventArgs e) +8682870 System.Web 中的 rgStateTax_PreRender(Object sender, EventArgs e)。 UI.WebControls.BaseDataBoundControl.OnPreRender(EventArgs e) +31 Telerik.RadGridUtils.RadControl.OnPreRender(EventArgs e) +36 Telerik.RadGridUtils.RadAJAXControl.OnPreRender(EventArgs e) +37 Telerik.WebControls.RadGrid.OnPreRender(EventArgs e) +40 系统.Web。

这是 grid(rgstatetax) 预渲染事件

```
protected void rgStateTax_PreRender( object sender, EventArgs e )
    {
        if( rgStateTax.MasterTableView.IsItemInserted )
        {
            foreach( GridItem item in rgStateTax.Items )
            {
                item.Visible = false;
            }
        }

        if( rgStateTax.EditItems.Count > 0 )
        {
            foreach( GridDataItem item in rgStateTax.Items )
            {
                if( item != rgStateTax.EditItems[0] )
                {
                    item.Visible = false;
                }
            }
        } 
```

UI中的代码

protected void ddlCountryTax_SelectedIndexChanged（对象发送者，EventArgs e）{ long locationId = ddlCountryTax.SelectedItem.Value.AsLong();

```
 ContentAdministrationServiceClient client = null;
        List<DCTaxRate> taxRate = null;
        try
        {
            client = new ContentAdministrationServiceClient();
            taxRate = client.GetTaxRatesByCountryIdAndLocationTypeName( locationId, "State" );
            client.Close();
        }
        catch( FaultException )
        {
            AbortClient(client);
            throw;
        }

        rgStateTax.DataSource = taxRate;
        rgStateTax.Rebind();

    } 
```

包装层中的代码

公共列表 GetTaxRatesByCountryIdAndLocationTypeName(long countryId, string locationTypeName) { DCTaxRateCollection taxRates = new DCTaxRateCollection(); taxRates.GetByCountryIdAndLoactionTypeName(countryId, locationTypeName);

```
 return taxRates.ToList();
    }

    public void GetByCountryIdAndLoactionTypeName( long countryId, string locationTypeName )
    {
        IBOTaxRateCollection iboTaxRates = new BOTaxRateCollection();
        iboTaxRates.GetByCountryIdAndLocationTypeName( countryId, locationTypeName );

        SetItems( iboTaxRates );
    } 
```

在博层

```
 public void GetByCountryIdAndLocationTypeName( long countryId, string locationTypeName )
    {
        ISingleResult<TaxRate> taxRates = Database.TaxRateReadByCountryIdAndLocationTypeName( countryId, locationTypeName );
        PopulateCollection( taxRates );
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T10:40:17.533

当下拉列表中的值列表不包括绑定到 SelectedValue 属性的值时，会发生这种情况。如果这是因为您有一个空值，您可以让数据适配器在字段为空时返回一个空字符串（如果这是问题所在），然后在下拉列表中插入一个值以匹配：

```
<asp:DropDownList ID="dd_bound" runat="server" AppendDataBoundItems="True">
    <asp:ListItem Value="" Text="Select one..." />
</asp:DropDownList> 
```

请注意 AppendDataBoundItems 值。

# python - check permissions of directories in python

> ID：704945
> 
> 赞同：3
> 
> 时间：2009-04-01T10:35:37.577
> 
> 标签：python, chmod

i want a python program that given a directory, it will return all directories within that directory that have 775 (`rwxrwxr-x`) permissions

thanks!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-01T11:31:27.520

Neither answer recurses, though it's not entirely clear that that's what the OP wants. Here's a recursive approach (untested, but you get the idea):

```
import os
import stat
import sys

MODE = "775"

def mode_matches(mode, file):
    """Return True if 'file' matches 'mode'.

    'mode' should be an integer representing an octal mode (eg
    int("755", 8) -> 493).
    """
    # Extract the permissions bits from the file's (or
    # directory's) stat info.
    filemode = stat.S_IMODE(os.stat(file).st_mode)

    return filemode == mode

try:
    top = sys.argv[1]
except IndexError:
    top = '.'

try:
    mode = int(sys.argv[2], 8)
except IndexError:
    mode = MODE

# Convert mode to octal.
mode = int(mode, 8)

for dirpath, dirnames, filenames in os.walk(top):
    dirs = [os.path.join(dirpath, x) for x in dirnames]
    for dirname in dirs:
        if mode_matches(mode, dirname):
            print dirname 
```

Something similar is described in the stdlib documentation for [stat](http://docs.python.org/library/stat.html).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-01T10:40:15.630

Take a look at the [os](http://docs.python.org/library/os.html) module. In particular [os.stat](http://docs.python.org/library/os.html#os.stat) to look at the permission bits.

```
import  os

for filename in os.listdir(dirname):
   path=os.path.join(dirname, filename)
   if os.path.isdir(path):
       if (os.stat(path).st_mode & 0777) == 0775:
           print path 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-01T12:06:14.643

Compact generator based on Brian's answer:

```
import os

(fpath for fpath 
   in (os.path.join(dirname,fname) for fname in os.listdir(dirname)) 
   if (os.path.isdir(fpath) and (os.stat(fpath).st_mode & 0777) == 0775)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T10:39:07.147

Does it have to be python?

You can also use find to do that :

"find . -perm 775"

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-01T18:08:42.440

You can check 775 permission for files and directories using below command

```
path="location of file or directory"
if (oct(os.stat(path).st_mode)[-3:]=="775"):
    print(path) 
```

# c# - 从原始 URL 获取重定向 URL

> ID：704956
> 
> 赞同：20
> 
> 时间：2009-04-01T10:40:32.213
> 
> 标签：c#, .net

我的数据库中有一个表，其中包含一些网站的 URL。我必须打开这些 URL 并验证这些页面上的一些链接。问题是某些 URL 被重定向到其他 URL。对于此类 URL，我的逻辑是失败的。

有什么方法可以传递我的原始 URL 字符串并返回重定向的 URL？

示例：我正在尝试使用此 URL：http: [//individual.troweprice.com/public/Retail/xStaticFiles/FormsAndLiterature/CollegeSavings/trp529Disclosure.pdf](http://individual.troweprice.com/public/Retail/xStaticFiles/FormsAndLiterature/CollegeSavings/trp529Disclosure.pdf)

它被重定向到这个：http: [//individual.troweprice.com/staticFiles/Retail/Shared/PDFs/trp529Disclosure.pdf](http://individual.troweprice.com/staticFiles/Retail/Shared/PDFs/trp529Disclosure.pdf)

我尝试使用以下代码：

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(Uris);
req.Proxy = proxy;
req.Method = "HEAD";
req.AllowAutoRedirect = false;

HttpWebResponse myResp = (HttpWebResponse)req.GetResponse();
if (myResp.StatusCode == HttpStatusCode.Redirect)
{
  MessageBox.Show("redirected to:" + myResp.GetResponseHeader("Location"));
} 
```

当我执行上面的代码时，它给了我`HttpStatusCodeOk`. 我很惊讶为什么它不认为它是重定向。如果我在 Internet Explorer 中打开链接，它将重定向到另一个 URL 并打开 PDF 文件。

有人可以帮我理解为什么示例 URL 不能正常工作吗？

顺便说一句，我检查了 Hotmail 的 URL ( [http://www.hotmail.com](http://www.hotmail.com) )，它正确地返回了重定向的 URL。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-02-10T05:45:53.327

此函数将返回链接的最终目的地——即使有多个重定向。它不考虑基于 JavaScript 的重定向或 META 重定向。请注意，之前的解决方案没有处理绝对和相对 URL，因为 LOCATION 标头可能返回类似“/newhome”的内容，您需要结合提供该响应的 URL 来识别完整的 URL 目标。

```
 public static string GetFinalRedirect(string url)
    {
        if(string.IsNullOrWhiteSpace(url))
            return url;

        int maxRedirCount = 8;  // prevent infinite loops
        string newUrl = url;
        do
        {
            HttpWebRequest req = null;
            HttpWebResponse resp = null;
            try
            {
                req = (HttpWebRequest) HttpWebRequest.Create(url);
                req.Method = "HEAD";
                req.AllowAutoRedirect = false;
                resp = (HttpWebResponse)req.GetResponse();
                switch (resp.StatusCode)
                {
                    case HttpStatusCode.OK:
                        return newUrl;
                    case HttpStatusCode.Redirect:
                    case HttpStatusCode.MovedPermanently:
                    case HttpStatusCode.RedirectKeepVerb:
                    case HttpStatusCode.RedirectMethod:
                        newUrl = resp.Headers["Location"];
                        if (newUrl == null)
                            return url;

                        if (newUrl.IndexOf("://", System.StringComparison.Ordinal) == -1)
                        {
                            // Doesn't have a URL Schema, meaning it's a relative or absolute URL
                            Uri u = new Uri(new Uri(url), newUrl);
                            newUrl = u.ToString();
                        }
                        break;
                    default:
                        return newUrl;
                }
                url = newUrl;
            }
            catch (WebException)
            {
                // Return the last known good URL
                return newUrl;
            }
            catch (Exception ex)
            {
                return null;
            }
            finally
            {
                if (resp != null)
                    resp.Close();
            }
        } while (maxRedirCount-- > 0);

        return newUrl;
    } 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-04-01T10:42:50.803

您提到的 URL 使用 JavaScript 重定向，它只会重定向浏览器。所以没有简单的方法来检测重定向。

对于正确的（HTTP 状态代码和位置：）重定向，您可能需要删除

```
req.AllowAutoRedirect = false; 
```

并使用获取最终 URL

```
myResp.ResponseUri 
```

因为可以有多个重定向。

**更新：有关重定向的更多说明：**

将浏览器重定向到另一个 URL 的方法不止一种。

第一种方法是使用 3xx HTTP 状态码和 Location: 标头。这是众神希望HTTP重定向起作用的方式，也被称为“一真道”。此方法适用于所有浏览器和爬虫。

然后是魔鬼的方式。其中包括[meta refresh](http://en.wikipedia.org/wiki/Meta_refresh)、 Refresh: 标头和 JavaScript。尽管这些方法在大多数浏览器中都有效，但它们绝对不能保证有效，并且偶尔会导致奇怪的行为（也就是[破坏后退按钮](http://www.w3.org/QA/Tips/reback)）。

大多数网络爬虫，包括 Googlebot，都会忽略这些重定向方法，您也应该如此。如果您绝对*必须*检测所有重定向，那么您必须解析 HTML 的 META 标记，在响应中查找 Refresh: 标头，并评估 Javascript。最后一个祝你好运。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-06-27T06:58:19.950

使用此代码获取重定向 URL

```
public void GrtUrl(string url)
{
    HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(url);
    webRequest.AllowAutoRedirect = false;  // IMPORTANT

    webRequest.Timeout = 10000;           // timeout 10s
    webRequest.Method = "HEAD";
    // Get the response ...
    HttpWebResponse webResponse;
    using (webResponse = (HttpWebResponse)webRequest.GetResponse())
    {
        // Now look to see if it's a redirect
        if ((int)webResponse.StatusCode >= 300 && 
            (int)webResponse.StatusCode <= 399)
        {
            string uriString = webResponse.Headers["Location"];
            Console.WriteLine("Redirect to " + uriString ?? "NULL");
            webResponse.Close(); // don't forget to close it - or bad things happen
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-20T00:04:35.243

这段代码对我有用

```
var request = (HttpWebRequest)HttpWebRequest.Create(url);
request.Method = "POST";
request.AllowAutoRedirect = true;
request.ContentType = "application/x-www-form-urlencoded";
var response = request.GetResponse(); 
```

//发送请求后，请求将重定向到您网站的某个页面，response.ResponseUri.AbsoluteUri 包含包含查询字符串的 url //(www.yourwebsite.com/returnulr?r="".. 。 等等）

```
Redirect(response.ResponseUri.AbsoluteUri); //then just do your own redirect. 
```

希望这可以帮助

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-18T23:02:59.377

异步`HttpClient`版本：

```
// works in .Net Framework and .Net Core
public static async Task<Uri> GetRedirectedUrlAsync(Uri uri, CancellationToken cancellationToken = default)
{
    using var client = new HttpClient(new HttpClientHandler
    {
        AllowAutoRedirect = false,
    }, true);
    using var response = await client.GetAsync(uri, cancellationToken);

    return new Uri(response.Headers.GetValues("Location").First();
}

// works in .Net Core
public static async Task<Uri> GetRedirectedUrlAsync(Uri uri, CancellationToken cancellationToken = default)
{
    using var client = new HttpClient();
    using var response = await client.GetAsync(uri, cancellationToken);

    return response.RequestMessage.RequestUri;
} 
```

`handler.MaxAutomaticRedirections = 1`如果需要限制尝试次数，可以使用PS 。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-05-26T20:59:28.507

在查看了每个人的建议后，我至少在我的情况下发现了这一点，它基本上做了 3 次循环到 https，第二次循环到实际结束位置。这是一个递归函数调用：

```
public static string GrtUrl(string url, int counter)
{
    ServicePointManager.SecurityProtocol = SecurityProtocolType.Tls
    | SecurityProtocolType.Tls11
    | SecurityProtocolType.Tls12
    | SecurityProtocolType.Ssl3;
    string ReturnURL = url;
    HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(url);
    webRequest.AllowAutoRedirect = false;  // IMPORTANT

    webRequest.Timeout = 10000;           // timeout 10s
    webRequest.Method = "HEAD";
    // Get the response ...
    HttpWebResponse webResponse;
    using (webResponse = (HttpWebResponse)webRequest.GetResponse())
    {
        // Now look to see if it's a redirect
        if ((int)webResponse.StatusCode >= 300 && (int)webResponse.StatusCode <= 399)
        {
            string uriString = webResponse.Headers["Location"];
            ReturnURL = uriString;
            if (ReturnURL == url)

            {
                webResponse.Close(); // don't forget to close it - or bad things happen!
                return ReturnURL;

            }
            else
            {
                webResponse.Close(); // don't forget to close it - or bad things happen!
                if (counter > 50)
                    return ReturnURL;
                else
                    return GrtUrl(ReturnURL, counter++);
            }

        }

    }
    return ReturnURL; 

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-01T11:17:38.537

你可以检查 Request.UrlReferrer.AbsoluteUri 看看我来自哪里。如果这不起作用，您可以将旧 url 作为查询字符串参数传递吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-25T16:28:47.117

我遇到了同样的问题，在尝试了很多之后，我无法使用 HttpWebRequest 获得我想要的东西，所以我使用 Web 浏览器类导航到第一个 url，然后我可以获得重定向的 url！

```
WebBrowser browser = new WebBrowser();
browser.Navigating += new System.Windows.Forms.WebBrowserNavigatingEventHandler(this.browser_Navigating);
string urlToNavigate = "your url";
browser.Navigate(new Uri(urlToNavigate)); 
```

然后在导航时，您可以获得重定向的 url。请注意，第一次发生 browser_Navigating 事件处理程序时，e.url 与您开始浏览时使用的 url 相同，因此您可以在第二次调用时获得重定向 url

```
private void browser_Navigating(object sender, WebBrowserNavigatingEventArgs e)
{
    Uri uri = e.Url;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-23T15:56:56.767

这段代码在 Unicode 支持下对我有用：

```
 public static string GetFinalRedirect(string url)
    {
        try
        {
            var request = (HttpWebRequest)HttpWebRequest.Create(url);
            request.Method = "POST";
            request.AllowAutoRedirect = true;
            request.ContentType = "application/x-www-form-urlencoded";
            var response = request.GetResponse();
            return response.ResponseUri.AbsoluteUri.ToString();
        }
        catch(Exception ax)
        {
            return "";
        }
    } 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-10-26T05:25:22.023

```
string url = ".......";
var request = (HttpWebRequest)WebRequest.Create(url);
var response = (HttpWebResponse)request.GetResponse();

string redirectUrl = response.ResponseUri.ToString(); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-12-29T03:58:39.137

处理 javascript 重定向的一种方法是查看将加载的初始域页面的源代码，然后直接从源代码中提取一个新域，即最终域。因为它是一个 javascript 重定向，所以应该有新的域，也就是最终域。干杯

从页面源中提取 URL 地址的代码：

```
string href = "";
string pageSrc = "get page source using web client download string method and place output here";
Match m = Regex.Match(pageSrc, @"href=\""(.*?)\""", RegexOptions.Singleline);
if (m2.Success){
    href = m.Groups[1].Value; /* will result in http://finalurl.com */
} 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2013-02-12T04:54:38.140

我使用您的代码创建了这个方法，它返回最终重定向的 URL。

```
 public string GetFinalRedirectedUrl(string url)
    {
        string result = string.Empty;

        Uri Uris = new Uri(url);

        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(Uris);
        //req3.Proxy = proxy;
        req.Method = "HEAD";
        req.AllowAutoRedirect = false;

        HttpWebResponse myResp = (HttpWebResponse)req.GetResponse();
        if (myResp.StatusCode == HttpStatusCode.Redirect)
        {
            string temp = myResp.GetResponseHeader("Location");
            //Recursive call
            result = GetFinalRedirectedUrl(temp);
        }
        else
        {
            result = url;
        }

        return result;
    } 
```

注意：myResp.ResponseUri 不返回最终 URL

# delphi - 将接口的方法作为参数传递

> ID：704980
> 
> 赞同：11
> 
> 时间：2009-04-01T10:47:03.210
> 
> 标签：delphi, oop, interface, callback

是否可以将接口的方法作为参数传递？

我正在尝试这样的事情：

```
interface

type
  TMoveProc = procedure of object;
  // also tested with TMoveProc = procedure;
  // procedure of interface is not working ;)

  ISomeInterface = interface
    procedure Pred;
    procedure Next;
  end;

  TSomeObject = class(TObject)
  public
    procedure Move(MoveProc: TMoveProc);
  end;

implementation

procedure TSomeObject.Move(MoveProc: TMoveProc);
begin
  while True do
  begin
    // Some common code that works for both procedures
    MoveProc;
    // More code...
  end;
end;

procedure Usage;
var
  o: TSomeObject;
  i: ISomeInterface;
begin
  o := TSomeObject.Create;
  i := GetSomeInterface;
  o.Move(i.Next);
  // somewhere else: o.Move(i.Prev);
  // tested with o.Move(@i.Next), @@... with no luck
  o.Free;
end; 
```

但它不起作用，因为：

> E2010 不兼容的类型：“TMoveProc”和“过程、无类型指针或无类型参数”

当然我可以为每个调用做私有方法，但这很难看。有没有更好的办法？

德尔福 2006

* * *

编辑：我知道我可以通过整个界面，但是我必须指定使用哪个函数。我不想要两个完全相同的程序和一个不同的调用。

我可以使用第二个参数，但这也很难看。

```
type
  SomeInterfaceMethod = (siPred, siNext)

procedure Move(SomeInt: ISomeInterface; Direction: SomeInterfaceMethod)
begin
  case Direction of:
    siPred: SomeInt.Pred;
    siNext: SomeInt.Next
  end;
end; 
```

* * *

感谢大家的帮助和想法。干净的解决方案（对于我的 Delphi 2006）是 Diego's Visitor。现在我正在使用简单的（“丑陋”）包装器（我自己的，由 TOndrej 和 Aikislave 提供的相同解决方案）。

但真正的答案是“没有某种提供者，就没有（直接）方法可以将接口的方法作为参数传递。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-01T12:26:53.003

如果您使用的是 Delphi 2009，您可以使用匿名方法执行此操作：

```
TSomeObject = class(TObject)
public
  procedure Move(MoveProc: TProc);
end;

procedure Usage;
var
  o: TSomeObject;
  i: ISomeInterface;
begin
  o := TSomeObject.Create;
  i := GetSomeInterface;
  o.Move(procedure() begin i.Next end); 
```

尝试仅传递对接口方法的引用的问题在于，您没有传递对接口本身的引用，因此无法对接口进行引用计数。但是匿名方法本身是引用计数的，所以这里匿名方法内部的接口引用也可以引用计数。这就是这种方法有效的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-01T11:13:10.310

我不知道您需要这样做的确切原因，但就个人而言，我认为传递整个“Mover”对象而不是它的一种方法会更好。我过去使用过这种方法，它被称为“访客”模式。tiOPF 是一个对象持久性框架，广泛使用它并为您提供了一个很好的例子来说明它是如何工作[的：访问者模式和 tiOPF](http://tiopf.sourceforge.net/Doc/Concepts/2_TheVisitorFramework.shtml)。

它相对较长，但事实证明它对我非常有用，即使我没有使用 tiOPF。请注意文档中的第 3 步，标题为“*第 3 步。我们将传递一个对象，而不是传递方法指针*”。

DiGi，回答您的评论：如果您使用访问者模式，那么您没有实现多个方法的接口，而只有一个（执行）。然后，每个动作都有一个类，例如 TPred、TNext、TSomething，然后将这些类的实例传递给要处理的对象。这样，您不必知道该调用什么，只需调用“Visitor.Execute”，它就可以完成工作。

在这里您可以找到一个基本示例：

```
interface

type
TVisited = class;

TVisitor = class
  procedure Execute(Visited: TVisited); virtual; abstract;
end;

TNext = class(TVisitor)
  procedure Execute (Visited: TVisited); override;
end;

TPred = class(TVisitor)
  procedure Execute (Visited: TVisited); override;
end;

TVisited = class(TPersistent)
public
  procedure Iterate(pVisitor: TVisitor); virtual;
end;

implementation

procedure TVisited.Iterate(pVisitor: TVisitor);
begin
  pVisitor.Execute(self);
end;

procedure TNext.Execute(Visited: TVisited);
begin
  // Implement action "NEXT"
end; 

procedure TPred.Execute(Visited: TVisited);
begin
  // Implement action "PRED"
end;

procedure Usage;
var
  Visited: TVisited;
  Visitor: TVisitor;
begin
  Visited := TVisited.Create;
  Visitor := TNext.Create;

  Visited.Iterate(Visitor);
  Visited.Free;
end; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T02:02:25.063

尽管包装类解决方案有效，但我认为这是一种矫枉过正。代码太多，你必须手动管理新对象的生命周期。

也许更简单的解决方案是在返回的接口中创建方法`TMoveProc`

```
ISomeInterface = interface
  ...
  function GetPredMeth: TMoveProc;
  function GetNextMeth: TMoveProc;
  ...
end; 
```

实现接口的类可以提供，`procedure of object`并且可以通过接口访问。

```
TImplementation = class(TInterfaceObject, ISomeInterface)
  procedure Pred;
  procedure Next;

  function GetPredMeth: TMoveProc;
  function GetNextMeth: TMoveProc;
end;

...

function TImplementation.GetPredMeth: TMoveProc;
begin
  Result := Self.Pred;
end;

function TImplementation.GetNextMeth: TMoveProc;
begin
  Result := Self.Next;
end; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-01T11:32:58.327

这个怎么样：

```
type
  TMoveProc = procedure(const SomeIntf: ISomeInterface);

  TSomeObject = class
  public
    procedure Move(const SomeIntf: ISomeInterface; MoveProc: TMoveProc);
  end;

procedure TSomeObject.Move(const SomeIntf: ISomeInterface; MoveProc: TMoveProc);
begin
  MoveProc(SomeIntf);
end;

procedure MoveProcNext(const SomeIntf: ISomeInterface);
begin
  SomeIntf.Next;
end;

procedure MoveProcPred(const SomeIntf: ISomeInterface);
begin
  SomeIntf.Pred;
end;

procedure Usage;
var
  SomeObj: TSomeObject;
  SomeIntf: ISomeInterface;
begin
  SomeIntf := GetSomeInterface;
  SomeObj := TSomeObject.Create;
  try
    SomeObj.Move(SomeIntf, MoveProcNext);
    SomeObj.Move(SomeIntf, MoveProcPred);
  finally
    SomeObj.Free;
  end;
end; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-01T11:03:17.853

你不能。由于接口的作用域，有可能（也许？）在调用 .Next 函数之前释放接口。如果你想这样做，你应该将整个接口传递给你的方法，而不仅仅是一个方法。

已编辑...对不起，下一位，特别是“接口”位是开玩笑的。

另外，我在这里可能是错的，i.Next 不是 Object 的方法，根据您的类型 def，它将是 Interface 的方法！

重新定义你的功能

```
 TSomeObject = class(TObject)
  public
        procedure Move(Const AMoveIntf: ISomeInterface);
  end;

  Procedure TSomeObject.Move(Const AMoveIntf : ISomeInterface);
  Begin
       ....;
       AMoveIntf.Next;
  end;

  O.Move(I); 
```

希望这可以帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-24T17:34:24.967

这是在 Delphi 20006 中运行的另一个解决方案。它类似于 @Rafael 的想法，但使用接口：

```
interface 

type
  ISomeInterface = interface
    //...
  end;

  IMoveProc = interface
    procedure Move;
  end;

  IMoveProcPred = interface(IMoveProc)
  ['{4A9A14DD-ED01-4903-B625-67C36692E158}']
  end;

  IMoveProcNext = interface(IMoveProc)
  ['{D9FDDFF9-E74E-4F33-9CB7-401C51E7FF1F}']
  end;

  TSomeObject = class(TObject)
  public
    procedure Move(MoveProc: IMoveProc);
  end;

  TImplementation = class(TInterfacedObject, 
      ISomeInterface, IMoveProcNext, IMoveProcPred)
    procedure IMoveProcNext.Move = Next;
    procedure IMoveProcPred.Move = Pred;
    procedure Pred;
    procedure Next;
  end;

implementation

procedure TSomeObject.Move(MoveProc: IMoveProc);
begin
  while True do
  begin
    // Some common code that works for both procedures
    MoveProc.Move;
    // More code...
  end;
end;

procedure Usage;
var
  o: TSomeObject;
  i: ISomeInterface;
begin
  o := TSomeObject.Create;
  i := TImplementation.Create;
  o.Move(i as IMoveProcPred);
  // somewhere else: o.Move(i as IMoveProcNext);
  o.Free;
end; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-04-01T11:13:54.083

您当前将 TMoveProc 定义为

```
TMoveProc = procedure of object; 
```

尝试取出“对象”，这意味着隐藏的“this”指针作为第一个参数。

```
TMoveProc = procedure; 
```

这应该允许调用一个正常的过程。

# objective-c - 带有 Cookie 的 Objective-C 异步 Web 请求

> ID：704985
> 
> 赞同：9
> 
> 时间：2009-04-01T10:49:04.593
> 
> 标签：objective-c, multithreading, macos, asynchronous

我正在用 Objective-C 编写一个程序，我需要向 web 服务器发出 web 请求，但是异步的，我在 mac 上相当新，我非常擅长 windows 技术，但我需要知道如果我使用 NSOperation（介绍在 10.5 中，我假设它不会在 10.4 MAC 中运行？），或者如果它被实现为使用 10.4 上可用的系统线程？

或者我应该创建一个新线程并创建一个新的runloop，以及如何使用cookie等，如果有人能给我一个小例子，那将有很大帮助。如果可能的话，我希望这个示例也能在 mac 10.4 上运行。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-07-17T16:09:30.627

有一个很好的例子，使用 NSURLRequest 和 NSHTTPCookies 来做一个完整的 web 应用程序示例，登录到一个网站，存储 SessionID cookie 并在以后的请求中重新提交它。

[NSURLConnection, NSHTTPCookie](http://idevkit.com/forums/general-sdk/299-nsurlconnection-nshttpcookie.html)

**通过 logix812：**

```
 NSHTTPURLResponse   * response;
    NSError             * error;
    NSMutableURLRequest * request;
    request = [[[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://temp/gomh/authenticate.py?setCookie=1"]
                                            cachePolicy:NSURLRequestReloadIgnoringCacheData 
                                        timeoutInterval:60] autorelease];

    [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];  
    NSLog(@"RESPONSE HEADERS: \n%@", [response allHeaderFields]);

    // If you want to get all of the cookies:
    NSArray * all = [NSHTTPCookie cookiesWithResponseHeaderFields:[response allHeaderFields] forURL:[NSURL URLWithString:@"http://temp"]];
    NSLog(@"How many Cookies: %d", all.count);
    // Store the cookies:
    // NSHTTPCookieStorage is a Singleton.
    [[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookies:all forURL:[NSURL URLWithString:@"http://temp"] mainDocumentURL:nil];

    // Now we can print all of the cookies we have:
    for (NSHTTPCookie *cookie in all)
        NSLog(@"Name: %@ : Value: %@, Expires: %@", cookie.name, cookie.value, cookie.expiresDate); 

    // Now lets go back the other way.  We want the server to know we have some cookies available:
    // this availableCookies array is going to be the same as the 'all' array above.  We could 
    // have just used the 'all' array, but this shows you how to get the cookies back from the singleton.
    NSArray * availableCookies = [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookiesForURL:[NSURL URLWithString:@"http://temp"]];
    NSDictionary * headers = [NSHTTPCookie requestHeaderFieldsWithCookies:availableCookies];

    // we are just recycling the original request
    [request setAllHTTPHeaderFields:headers];

    request.URL = [NSURL URLWithString:@"http://temp/gomh/authenticate.py"];
    error       = nil;
    response    = nil;

    NSData * data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
    NSLog(@"The server saw:\n%@", [[[NSString alloc] initWithData:data encoding: NSASCIIStringEncoding] autorelease]); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-04-01T11:07:57.187

对于异步请求，您需要使用[`NSURLConnection`](http://developer.apple.com/documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html).

对于 cookie，请参阅[`NSHTTPCookie`](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSHTTPCookie_Class/Reference/Reference.html)和[`NSHTTPCookieStorage`](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSHTTPCookieStorage_Class/Reference/Reference.html)。

**更新：**

下面的代码是来自我的一个应用程序的真实有效代码。在类接口`responseData`中定义。`NSMutableData*`

```
- (void)load {
    NSURL *myURL = [NSURL URLWithString:@"http://stackoverflow.com/"];
    NSURLRequest *request = [NSURLRequest requestWithURL:myURL
                                             cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
                                         timeoutInterval:60];
    [[NSURLConnection alloc] initWithRequest:request delegate:self];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    responseData = [[NSMutableData alloc] init];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [responseData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    [responseData release];
    [connection release];
    // Show error message
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    // Use responseData
    [responseData release];
    [connection release];
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-08-10T11:21:34.663

我能够以这种方式获取cookie：

```
NSArray* arr = [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookiesForURL:[NSURL URLWithString: @"http://google.com" ]]; 
```

这也适用于异步请求。

# .net - 如何在服务停止时停止多线程 Windows 服务中的工作线程

> ID：704991
> 
> 赞同：10
> 
> 时间：2009-04-01T10:51:00.957
> 
> 标签：.net, multithreading, windows-services

我有一个 Windows 服务，它使用生产者/消费者队列模型和多个工作线程处理队列外的任务。这些任务可以运行很长时间，如果不是几小时，也可能是几分钟，并且*不涉及循环*。

我的问题是关于处理服务停止以优雅地结束这些工作线程上的处理的最佳方法。我在另一个[SO question](https://stackoverflow.com/questions/353270/how-can-i-detect-a-threadabortexception-in-a-finally-block-net)中读到，使用 thread.Abort() 是设计不佳的标志，但似乎服务 OnStop() 方法在服务终止之前只给了有限的时间来完成。我可以在 ThreadAbortException 的捕获中进行足够的清理（不存在状态不一致的危险），因此在工作线程上调用 thread.Abort() 对我来说似乎没问题。是吗？有哪些替代方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-01T10:55:27.043

确实，`Abort`应该避免。最好给他们一些时间来优雅地退出 - 然后也许在超时后，**也许**考虑中止它们 - 但最终，服务停止可以通过终止进程来做到这一点。

我会尝试在我的队列中显示“刷新并退出”的信号 - 很像[这里](https://stackoverflow.com/questions/530211/creating-a-blocking-queuet-in-net/530228#530228)`Close`的方法，但在完成时会发出某种信号。

如果你诉诸`Abort`- 考虑致命伤的过程。尽快杀死它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-01T10:56:29.617

为“关闭”创建一个任务类型，并为每个工作线程将其注入您的生产者/消费者队列一次。

然后使用 Thread.Join（有超时）来确保关闭已完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-08-13T01:31:39.393

使用 .NET 4.0，您可以利用`System.Threading.Tasks`命名空间来利用`Task`对象。简而言之，您可以分配 a`CancellationToken`以更优雅地处理任务中的取消/中止，无论是长期运行还是短期运行。

有关 MSDN 的更多详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/system.threading.tasks.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T12:06:54.110

修改后的问题实际上与线程无关，而与如何停止长时间运行的操作有关。就我个人而言，我总是将 APM 用于冗长的流和通信活动，例如大文件传输。每个回调在 IO 完成池线程上运行并快速完成，处理适度的块并安排下一次传递。挂起的操作可以简单地通过调用`Close()`套接字对象来取消。这比 DIY 线程管理更便宜、更高效。

* * *

如前所述，`Abort()`是恶业，应该避免。

下面的材料是在从问题中排除循环案例之前编写的。

当长时间运行的进程循环时，它们都应该*在*循环条件中包含一个退出标志，以便您可以向它们发出退出信号。

```
bool _run; //member of service class

//in OnStart
_run = true;

//in a method on some other thread
while ((yourLoopCondition) & _run) 
{ 
  //do stuff
  foreach (thing in things) 
  {
    //do more stuff
    if (!_run) break;
  }
}
if (!_run) CleanUp();

//in OnStop
_run = false; 
```

严格来说，您应该使用 volatiles，但由于只有控制逻辑会设置标志，所以这无关紧要。从技术上讲，存在竞争条件，但这仅意味着您可能会再转一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T11:41:12.583

使用 ManualResetEvent 检查事件是否已发出信号，请参阅[Thread Synchronization (C# Programming Guide)中的示例](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent(VS.80).aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T12:07:47.870

这是我用于停止 Windows 服务中的线程的代码（请注意，我直接使用线程而不使用线程池）：

```
// signal all threads to stop
this.AllThreadsStopSignal.Set();

if (logThreads.IsDebugEnabled)
    logThreads.Debug ("Stop workers");

// remember the time of the signal
DateTime signalTime = DateTime.Now;

// create an array of workers to be stopped
List<IServiceWorker> workersToBeStopped = new List<IServiceWorker> (workers);

while (true)
{
    // wait for some time
    Thread.Sleep (1000);

    // go through the list and see if any workers have stopped
    int i = 0;
    while (i < workersToBeStopped.Count)
    {
        IServiceWorker workerToBeStopped = workersToBeStopped [i];

        if (log.IsDebugEnabled)
            log.Debug (String.Format (System.Globalization.CultureInfo.InvariantCulture,
                "Stopping worker '{0}'. Worker state={1}",
                workerToBeStopped.WorkerDescription,
                workerToBeStopped.WorkerState));

        bool stopped = workerToBeStopped.JoinThread (TimeSpan.Zero);

        // if stopped, remove it from the list
        if (stopped)
        {
            workersToBeStopped.RemoveAt (i);
            if (log.IsDebugEnabled)
                log.Debug (String.Format (System.Globalization.CultureInfo.InvariantCulture,
                    "Worker '{0}' was stopped.", workerToBeStopped.WorkerDescription));
        }
        else
        {
            i++;
            if (log.IsDebugEnabled)
                log.Debug (String.Format (System.Globalization.CultureInfo.InvariantCulture,
                    "Worker '{0}' could not be stopped, will try again later. Worker state={1}",
                    workerToBeStopped.WorkerDescription,
                    workerToBeStopped.WorkerState));
        }
    }

    // if all workers were stopped, exit from the loop
    if (workersToBeStopped.Count == 0)
        break;

    // check if the duration of stopping has exceeded maximum time
    DateTime nowTime = DateTime.Now;
    TimeSpan duration = nowTime - signalTime;

    if (duration > serviceCustomization.ThreadTerminationMaxDuration)
    {
        // execute forced abortion of all workers which have not stopped
        foreach (IServiceWorker worker in workersToBeStopped)
        {
            try
            {
                log.Warn (String.Format (System.Globalization.CultureInfo.InvariantCulture,
                    "Aborting worker '{0}.", worker.WorkerDescription));
                worker.Abort ();
                log.Warn (String.Format (System.Globalization.CultureInfo.InvariantCulture,
                    "Worker '{0}' aborted.", worker.WorkerDescription));
            }
            catch (ThreadStateException ex)
            {
                log.Warn (String.Format (System.Globalization.CultureInfo.InvariantCulture,
                    "Worker '{0}' could not be aborted.", worker.WorkerDescription), ex);
            }
        }
        break;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-01T19:33:18.297

如果您的进程无论如何都被关闭，我个人认为使用 Abort() 没有问题。我会尝试寻找另一种方法，但最后，不管**你**是否要在主线程中进行清理都没关系。

另一种选择是将您的工作线程标记为[后台](http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground.aspx)线程。这样，它们会在进程关闭时自动关闭。您也许可以在退出之前使用 AppDomain.ProcessExit 事件进行清理。

# c++ - 链接时C++多次声明函数错误

> ID：704995
> 
> 赞同：1
> 
> 时间：2009-04-01T10:52:12.467
> 
> 标签：c++, function, declaration

我似乎忘记了我的 C++ ...

我试图在不同的源代码中声明 C 中的一些函数，并在`.h`必要时包括适当的函数。它编译好；但问题出在链接期间，链接器抱怨已经定义了函数。

我什至尝试将函数定义为`extern`, （徒劳地）尝试仅声明函数并让实现仅在`.c`.

这是我的代码的简短描述：

**常见的.h**

```
#include <stdio.h> 
```

**模块1.h**

```
#include "common.h"
#ifndef MODULE1_H_
#define MODULE1_H_
int init(int option);
int open(char* db, char* username, char* password);
int get(int handler, int date[2], int time[2], int* data, int& rowsize, int& numrows);
int put(int handler, int* data, int& datasize, int& numrows);
int close(int handler);
int finalize();
#endif /* MODULE1_H_ */ 
```

**模块2.h**

```
#include "common.h"
#ifndef MODULE2_H_
#define MODULE2_H_
int get1(int handler, int date, int time, int *data, int& datasize, int& rowsize);
int put1(int handler, int* data, int datasize);
#endif /*MODULE2_H_*/ 
```

**模块1.cpp**

```
#include "module1.h"
int init(int option) { ... }
int finalize() { ... }
int get(int handler, int date[2], int time[2], int* data, int& rowsize, int& numrows) {
    ....
}
... 
```

**模块2.cpp**

```
#include "module1.h"
#include "module2.h"
int get1(int handler, int date, int time, int* data, int rowsize) {
  int daterange[2]={date,date};
  int timerange[2]={time,time};
  int rsize, numrows, result;
  result=get(handler, daterange,timerange, data, rsize, numrows);
  rowsize=rsize; 
  if(numrows!=1) printf("Uh oh...\n");
  return result;
}
... 
```

**编译与链接：**

```
g++ -o module1.o -c module1.cpp
g++ -o module2.o -c module2.cpp
g++ -fPIC -shared -o library.so module1.o module2.o 
```

正如我所说，它编译正常。问题出在链接期间，链接器“看到”有两个已实现的功能来自`module1.h`：一个来自`module1.h`in的包含`module1.cpp`；另一个来自`module1.h`与`module2.h`in的包含`module2.cpp`。

我知道函数应该被声明，但我显然在做一个失礼。有人可以指出它在哪里吗？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T11:01:10.697

您的函数名称需要更改。已经有一些你提到的名字的函数（例如：[open](http://www.manpagez.com/man/2/open/)），它们可能被你链接到的东西所包含。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T11:09:08.697

天，

您不需要使用 extern dec 告诉编译器和链接器这是 C 而不是 C++ 吗？

```
extern "C" {
    #include "my_bits_of_C.h"
} 
```

让链接器知道没有进行名称修改？

高温高压

干杯，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T12:25:33.553

谢谢大家的回复和评论。我发现了问题（结果证明这是一件非常愚蠢的事情）并且接近解决它（希望如此）。

事实证明，它来自另一个包含文件 ( [cfortran.h](http://www-zeus.desy.de/~burow/cfortran/) )，该文件实现了一个在 Fortran 中使用 C 函数调用的层（反之亦然）。它非常有用，到目前为止我一直在成功使用它，但是我被错误“蒙蔽了”；该包含的文档指出，在 C++ 上下文（而不是 C）中使用它时应该小心，但这是该警告实际产生影响的第一个实例。

再次感谢您的帮助。

# c++ - 如何在 CListCtrl 中为单个项目加下划线

> ID：704998
> 
> 赞同：0
> 
> 时间：2009-04-01T10:54:23.413
> 
> 标签：c++, visual-c++, mfc

我们希望 CListView 中的某些项目看起来像超文本链接。

在调用 SetFont 之前，我可以通过在 LOGFONT 中设置 lfUnderline 标志并从中创建字体来使所有内容加下划线 - 但这适用于整个 CListView。

有谁知道如何使 CListView 中的单个项目显示为下划线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T12:47:58.763

您可以通过使用自定义绘制通知并在自定义绘制处理程序中修改您想要的特定项目的字体来做到这一点。

有关详细信息，请参阅[此链接](http://msdn.microsoft.com/en-us/library/bb761817(VS.85).aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T11:00:27.080

试试这个：

```
oMyCListView.SetExtendedStyle(LVS_EX_ONECLICKACTIVATE) 
```**********************