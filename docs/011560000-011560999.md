# StackOverflow 问答 11560000-11560999

# google-fusion-tables - 使用 php Login 的 Fusion Tables 插入时需要错误 401

> ID：11560001
> 
> 赞同：2
> 
> 时间：2012-07-19T11:35:12.543
> 
> 标签：google-fusion-tables

这就是我尝试做的。选择命令工作，但是当尝试插入它时会生成错误“需要登录错误 401”任何插入、更新和删除的示例都没有此类错误或任何其他对我有帮助的建议

查询（SQLBuilder::insert(44444, array('grefid'=>3000, 'distname' => 'xxxx', 'tehsilname' => 'bob'))); ?>

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-20T19:12:04.150

我认为您需要获取 API 密钥...访问以下链接以获得相同的信息：

[获取 Google API 密钥](https://code.google.com/apis/console/)

# javascript - jQuery on() 方法 - 使用哪种方式对性能更好？

> ID：11560002
> 
> 赞同：0
> 
> 时间：2012-07-19T11:35:16.090
> 
> 标签：javascript, click, jquery

**将 on() 事件附加到文档还是更接近的父级更好？**

*注意*：最初这个问题有另一个方面和不同的主题。它很快就过时了（源代码中的错字）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:18:20.327

使用 jQuery 的最佳性能关键是使用 an`id`作为初始标识符。例如：

```
$('#my_id').on('click', 'tag.my_class', function () {
    ...
}); 
```

这允许 jQuery 直接进入容器，然后从那里开始拖网。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:07:23.013

如果您将“on”事件绑定到最近的父项将产生您正在寻找的内容，即使将其附加到文档，click 功能也将正常工作，但将来如果您附加任何具有“可点击”类的元素也将获得绑定。因此，将“on”事件附加到最近的父级而不是整个文档始终是一种好习惯。

如果你想要更具体，你可以使用

```
$("ul.media-grid").on('click', 'li.clickable', function () {
  alert("works")
}); 
```

因为它将获得带有“media-grid”类的ul，并将事件附加到带有“clickable”类的li

# optimization - 强化学习的双重优化

> ID：11560011
> 
> 赞同：1
> 
> 时间：2012-07-19T11:35:51.393
> 
> 标签：optimization, machine-learning, reinforcement-learning

我有一个具有功耗（*p*）和延迟（*d*）参数的目标函数。在给定延迟约束（秒）的情况下，我想最小化功耗。优化问题可以用拉格朗日函数表示如下：

```
f(p,d) = p + L*d 
```

其中*L*是拉格朗日变量。由于功耗和延迟成反比，减少前者会导致后者增加，因此目标函数也可以用相对权重写成：

```
f(p,d) = L*p + (1-L)*d 
```

问题是， “给定***d*****秒的延迟约束，我如何找到可以最小化变量*p的适当**L*值？”** ***. 我想为此目的使用强化学习，在每个状态下，系统都会根据上述功能做出决定并为下一个状态下的前一个动作分配一个成本。每个动作都会在处理请求时导致一定的功耗和延迟。目标是在给定延迟约束的情况下最小化功耗。在这方面的任何建议/提示将不胜感激。***

# javascript - 内存泄漏、垃圾收集和引用

> ID：11560016
> 
> 赞同：1
> 
> 时间：2012-07-19T11:36:02.323
> 
> 标签：javascript, memory-leaks, garbage-collection

上次我在 Google 研究内存泄漏、循环引用以及垃圾收集的工作原理。但一切都有些混乱。我知道垃圾收集以这种方式工作：

```
var a = {}; // a is only reference to this object
a = 5 /* now variable a is reference to "number" (other js object)
and now the first empty object has no reference,
so it is cleaned from the memory. */ 
```

那看起来很酷。但我看到在 IE 中有一个 JScript 对象和 COM 对象。如果 COM 和 JScript 中的对象之间存在循环引用，则存在内存泄漏（未清理的内存）。所以现在我很困惑，并做了一些简单的例子来展示我的理解，或者不理解：

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
    <div style="width: 30px;" id='myDiv'></div>
    <script language='javascript'>
    "use strict";
     var a = 4,
     i,
     div = document.createElement('div');

     //no leaks
     function noLeaks(b) {
         this.a = a;
         a = this.b;
     }
     var obj = new noLeaks(5);

     //leak pattern
    function makeLeaks(func) {
        div.badAttachToCOMObject = func; // the problem is here
    }
    makeLeaks(function(){}); //attach reference to JScript objcet/function?

    //no leaks
    function size() {
        return '30px'; //just a value
    }
    function noStyleLeaks() {
        div.style.width = size();
        /* DOM (COM in IE) element just get a value,
        not a reference, only if I put a object or
        function to the value is a problem? */
    }
    noStyleLeaks();

    //leaks or not
    function styleLeaks() {
        div.style.width = document.getElementById('myDiv').style.width;/* this
        is cycle reference, but maybe only between COM and COM objects?
        And do not make leaks? */
    }
    styleLeaks();
    </script>
</body>
</html> 
```

我是否理解主要思想？最后一个问题，Chrome 有一个任务管理器，当我从[http://www.javascriptkit.com/javatutors/closuresleak/index.shtml](http://www.javascriptkit.com/javatutors/closuresleak/index.shtml)使用它时，Windows 任务管理器会在每次刷新时显示内存使用量跳跃约 1mb ：

```
function LeakMemory(){
    for(i = 0; i < 50000; i++){
        var parentDiv = 
        document.createElement("div");
    }
} 
```

Chrome(21) 泄漏？我认为这不正常。所以我对 JS 垃圾回收的工作原理越来越感到困惑。

# capture - 自动影片剪辑记录

> ID：11560018
> 
> 赞同：1
> 
> 时间：2012-07-19T11:36:08.460
> 
> 标签：capture, movie, avi, recorder

我需要在运行超过 12 小时的自动化测试期间捕获视频剪辑。我的问题是电影太大了，如果发生错误，我只想要小电影剪辑。所以我的想法是编写 c# 工具——它只缓冲一些例如 3 分钟的电影，并在 3 分钟之前丢弃捕获的帧，以找出错误的原因是什么。如果发生错误，我想保存错误发生前的 3 分钟。如果这以压缩的方式发生，那就太好了。重新编码会话继续，如果发生下一个错误，我想保存下一个 3 分钟的剪辑，依此类推。这意味着我必须捕获一个流并确保仅捕获最后 x 分钟以找出错误的来源。捕获视频时支持双显示器也很重要。应该可以设置帧率。触发器将通过 C# 代码完成。

最好的方法是什么？如何使用 c# 实现这一点？

伯恩哈德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:51:33.390

我使用[带有 Service Pack 2 (SP2) 的 Microsoft Expression Encoder 4](http://www.microsoft.com/en-us/download/details.aspx?id=27870)来记录我的自动化测试。在测试开始和停止命令的每个主要功能的开头和结尾处插入。在下一个主要功能中删除文件。这样，只有最后一个视频存储在硬盘上，您可以在脚本因错误终止后对其进行检查。

# html - 如何将图像对齐到中心？

> ID：11560025
> 
> 赞同：-6
> 
> 时间：2012-07-19T11:36:46.963
> 
> 标签：html, css, wordpress, alignment, nextgen-gallery

为什么[此网址中的图像](http://www.101greatgoals.com/gallery/gimages/image/101com-logofits/)向左对齐？

当您在 chrome 上加载它时，它会出现在左侧。你知道为什么吗？

与 CSS 相关的东西，但不知道是什么。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:49:17.580

这可能会有所帮助

```
.main-image
{
    text-align:center;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:07:57.303

一开始很难知道你在说什么——毕竟这是一个充满图像的页面。我假设您指的是中间的“100 个最伟大的进球”图像，它被放大到正常大小的 10 倍。

如果您将 wp-content/plugins/nextgen-gallery/css/nggallery.css 第 215 行更改为以下内容，则它将图像居中并阻止其拉伸到 yee-ha。

```
.ngg-imagebrowser img {
border:1px solid #A9A9A9;
margin: 10px auto; 
display:block !important;
padding:5px;
} 
```

希望有点帮助。

编辑：只是我应该提出的一点 - 每当您对下一代 CSS 进行任何更改时，请确保将其添加到主题的样式表而不是插件的样式表中（如果需要，使用更具体的选择器）。如果不是，您的 CSS 将在您升级插件后全部重置。

# javascript - 在页面调整大小时更改 CSS

> ID：11560026
> 
> 赞同：1
> 
> 时间：2012-07-19T11:36:47.440
> 
> 标签：javascript, css, mobile, resize

我把这段代码放在一起......

```
<title>Style Change on Resize</title>
<script type="text/javascript">

function resize() {

if (screen.width <= 640)

{document.write("<link href='style1.css' rel='stylesheet' type='text/css'>")}

else

{document.write("<link href='style2.css' rel='stylesheet' type='text/css'>")}
}

</script>
</head>

<body onResize="resize();">

<div id="styleMe">This is a test of a resize javascirpt that will change its CSS sheet    
when the browser window is resized, or when being viewed on a mobile device, such as     
iOS, etc. Hello.</div>

</body>

</html> 
```

并且CSS文件中只有这个（只有不同​​的背景颜色，所以我可以看到它是否改变了CSS表）......

```
#styleMe {
background-color:#309;
height:200px;
width:100%;
} 
```

问题是当我运行页面时，单词上没有样式，然后当我调整页面大小时它就变黑了，有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T11:40:43.400

您可以仅使用 CSS对[媒体查询执行此操作。](http://www.w3.org/TR/css3-mediaqueries/)

```
#styleMe {
  background-color:#309;
  height:200px;
  width:100%;
}

@media only screen and (max-width: 640px) {

  #styleMe {
    background-color: magenta;
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:40:33.947

我认为你应该学习如何做响应式网页设计，css3媒体查询很有用

# javascript - 在特定元素之后获取具有特定类的下一个元素

> ID：11560028
> 
> 赞同：7
> 
> 时间：2012-07-19T11:37:03.027
> 
> 标签：javascript, jquery, traversal

我有一个这样的 HTML 标记：

```
<p>
  <label>Arrive</label>
  <input id="from-date1" class="from-date calender" type="text" />
</p>

<p>
  <label>Depart</label>
  <input id="to-date1" class="to-date calender" type="text" />
</p>

<p>
  <label>Arrive</label>
  <input id="from-date2" class="from-date calender" type="text" />
</p>

<p>
  <label>Depart</label>
  <input id="to-date2" class="to-date calender" type="text" />
</p> 
```

我想从日期之后获取下一个元素以获取对应的日期。（布局稍微复杂一点，但从日期开始有开始日期类，到日期有迄今为止的类）。

这是我正在尝试做的，我想从日期元素中获取一个并在 dom 中找到下一个具有 to-date 类的元素。我试过这个：

```
$('#from-date1').next('.to-date') 
```

但它给了我空的 jQuery 元素。我认为这是因为`next`给出了匹配选择器的下一个兄弟。我怎样才能得到对应的`to-date`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T12:00:36.837

找不到直接的方法，所以为此写了一个小递归算法。

**演示：http:** [//jsfiddle.net/sHGDP/](http://jsfiddle.net/sHGDP/)

`nextInDOM()`函数接受 2 个参数，即开始查找的元素和要匹配的选择器。

代替

```
$('#from-date1').next('.to-date') 
```

您可以使用：

```
nextInDOM('.to-date', $('#from-date1')) 
```

**代码**

```
function nextInDOM(_selector, _subject) {
    var next = getNext(_subject);
    while(next.length != 0) {
        var found = searchFor(_selector, next);
        if(found != null) return found;
        next = getNext(next);
    }
    return null;
}
function getNext(_subject) {
    if(_subject.next().length > 0) return _subject.next();
    return getNext(_subject.parent());
}
function searchFor(_selector, _subject) {
    if(_subject.is(_selector)) return _subject;
    else {
        var found = null;
        _subject.children().each(function() {
            found = searchFor(_selector, $(this));
            if(found != null) return false;
        });
        return found;
    }
    return null; // will/should never get here
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T11:42:45.723

`.next('.to-date')`不返回任何东西，因为您`p`之间还有一个额外的

你需要`.parent().next().find('.to-date')`.

如果您的 dom 比您的示例更复杂，您可能需要对此进行调整。但基本上它归结为这样的事情：

```
$(".from-date").each(function(){
    // for each "from-date" input
    console.log($(this));
    // find the according "to-date" input
    console.log($(this).parent().next().find(".to-date"));
}); 
```

编辑：仅查找 ID 会更好更快。以下代码搜索所有起始日期并获取相应日期：

```
function getDeparture(el){
    var toId = "#to-date"+el.attr("id").replace("from-date","");
    //do something with the value here
    console.log($(toId).val());
}

var id = "#from-date",
    i = 0;

while($(id+(++i)).length){
    getDeparture($(id+i));
} 
```

看看这个[例子](http://jsfiddle.net/pUQyy/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:41:13.287

尝试

```
var flag = false;
var requiredElement = null;
$.each($("*"),function(i,obj){
    if(!flag){
        if($(obj).attr("id")=="from-date1"){
            flag = true;
        }
    }
    else{
        if($(obj).hasClass("to-date")){
            requiredElement = obj;
            return false;
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-09T10:31:22.303

```
 var item_html = document.getElementById('from-date1');
    var str_number = item_html.attributes.getNamedItem("id").value;
    // Get id's value.
    var data_number = showIntFromString(str_number);

    // Get to-date this class
    // Select by JQ. $('.to-date'+data_number)
    console.log('to-date'+data_number);

    function showIntFromString(text){
       var num_g = text.match(/\d+/);
       if(num_g != null){
          console.log("Your number:"+num_g[0]);
          var num = num_g[0];
          return num;
       }else{
          return;
       }
    } 
```

使用 JS。从您的 id 中获取密钥号。分析它而不是输出数字。使用 JQ。选择器将字符串与您想要的组合在一起，而不是 + 这个数字。希望这也可以帮助你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-08T18:34:06.240

我知道这是一个老问题，但我想我会添加一个免费的 jQuery 替代解决方案:)

我试图通过避免遍历 DOM 来保持代码简单。

```
let inputArray = document.querySelectorAll(".calender");

function nextInput(currentInput, inputClass) {
    for (i = 0; i < inputArray.length - 1; i++) {
        if(currentInput == inputArray[i]) {
            for (j = 1; j < inputArray.length - i; j++) {
                //Check if the next element exists and if it has the desired class
                if(inputArray[i + j] && (inputArray[i + j].className == inputClass)) {
                    return inputArray[i + j];
                    break;
                }
            }
        }
    }   
}

let currentInput = document.getElementById('from-date1');

console.log(nextInput(currentInput, 'to-date calender')); 
```

如果您知道到日期将始终是具有“日历”类的下一个输入元素，那么您不需要第二个循环。

# django - 在 django admin 中，是否可以根据先前的字段选择动态过滤可用的选项

> ID：11560029
> 
> 赞同：0
> 
> 时间：2012-07-19T11:37:05.620
> 
> 标签：django, django-models, django-forms, django-admin

> **可能重复：**
> [Django 动态表单 - 动态字段填充？](https://stackoverflow.com/questions/8998428/django-dynamic-forms-on-the-fly-field-population)

我的第一个模型叫做 Company。当通过管理员创建公司时，其中一个字段是 Horizo​​ntal_filter，它允许我将用户添加到该公司。

我的第二个模型叫做 Team。当我创建一个新团队时，我的管理表单中的第一个字段是公司，然后我有一个 Horizo​​ntal_filter 允许我选择用户。

有什么办法让我只在这个horizo​​ntal_filter字段中显示作为所选公司成员的用户？

为清楚起见，这里是我的模型和管理表单：

公司型号：

```
class Company(models.Model):
    users = models.ManyToManyField(User)
    company_name = models.CharField(max_length=200)

def __unicode__(self):
    return self.company_nam 
```

公司管理表格：

```
class CompanyAdmin(admin.ModelAdmin):
    filter_horizontal = ("users",)

admin.site.register(Company, CompanyAdmin) 
```

团队模型：

```
class Team(models.Model):
    company = models.ForeignKey(Company)
    team_title = models.CharField(max_length=200)
    users = models.ManyToManyField(User, related_name="members")

def __unicode__(self):
    return self.team_title 
```

团队管理表格：

```
class TeamAdmin(admin.ModelAdmin):
    filter_horizontal = ("users",)

admin.site.register(Team, TeamAdmin) 
```

# objective-c - 在Objective C中打印具有多个字符的文本

> ID：11560031
> 
> 赞同：0
> 
> 时间：2012-07-19T11:37:12.513
> 
> 标签：objective-c

我发现这有点违反直觉。如果我想做等效的 scanf 并将该输入分配给变量或数组，我该怎么做，然后在 Objective-c 中打印它。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-19T11:41:30.650

您可以使用 NSMutableArray 并循环 NSString 测试中的每个字符，然后使用我已经测试过它..

```
NSMutableArray *arr = [[NSMutableArray alloc] init];
NSString *str = [NSString stringWithFormat:@"masdasdada"];
int length = [str length];

for (int i = 0 ; i < length; i++) {
    NSLog(@"%hu",[str characterAtIndex:i]);

    unichar utf8char = [str characterAtIndex:i]; 
    char chars[2];
    int len = 1;

    if (utf8char > 127) {
        chars[0] = (utf8char >> 8) & (1 << 8) - 1;
        chars[1] = utf8char & (1 << 8) - 1; 
        len = 2;
    } else {
        chars[0] = utf8char;
    }

    NSString *string = [[NSString alloc] initWithBytes:chars
                                                length:len 
                                              encoding:NSUTF8StringEncoding];

    NSLog(@"%@",string);
    [arr addObject:[NSString stringWithFormat:@"%@",string]];
}

for (NSMutableString *s in arr) {
    NSLog(@"%@",s);
} 
```

# tridion - 无法在 MMC 管理单元中添加 SDL Tridion Content Manager

> ID：11560032
> 
> 赞同：1
> 
> 时间：2012-07-19T11:37:13.260
> 
> 标签：tridion

我们使用的是 SDL Tridion 5.3。

在 MMC 管理单元中，我正在尝试添加“SDL Tridion Content Manager”，如下所述

开始-运行-mmc-在cosole File->Add remove snap in-点击add-Add Standalone snap in window。

我在这里看不到 SDL Tridion Content Manager 卡扣，谁能帮我解决这个问题。

我这样做是为了查看/更改我的 CMS 数据库。我们正在使用 SQL Server。有没有其他方法可以找到 Conent Manager Server 指向的数据库（CMS）？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T11:42:17.600

如果您在 x64 系统上，则必须键入`mmc /32`，否则您将看不到它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:44:23.377

您可以从开始菜单启动 Tridion Content Manager 配置工具。这不适合你吗？

# jquery - 我正在使用 JQuery DataTable Column Filter plugin..select 过滤器没有被填充？

> ID：11560033
> 
> 赞同：1
> 
> 时间：2012-07-19T11:37:13.467
> 
> 标签：jquery

我正在使用 JQuery DataTable Column Filter 插件......它工作正常，但唯一的问题是选择下拉列表没有被填充......我正在使用服务器端获取......如何做到这一点，即自动填充？

```
$(document).ready(function() {
    $('#example').dataTable().columnFilter({
        aoColumns: [{
            type: "select",
            values: ['Gecko', 'Trident', 'KHTML', 'Misc', 'Presto', 'Webkit', 'Tasman']
        }, {
            type: "text"
        },
        null, {
            type: "number"
        }, {
            type: "select"
        }]
    });
}); 
```

如果我指定 { type: "select"} 没有值它不起作用..但是文档说它会自动填充...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:24:19.470

根据问题 34：在服务器中处理数据时自动构建不起作用（bServerSide = true）

[https://code.google.com/p/jquery-datatables-column-filter/issues/detail?id=34](https://code.google.com/p/jquery-datatables-column-filter/issues/detail?id=34)

# android - 如何将此数据转换为 JSON 格式并将此数据 POST 到服务器？

> ID：11560034
> 
> 赞同：1
> 
> 时间：2012-07-19T11:37:13.497
> 
> 标签：android, json, string

我有以下字符串，

字符串操作="创建用户"; 字符串公司="公司名称";

但是如何将上面的字符串转换为下面的json字符串并将这个字符串传递给服务器

```
{"action":"CreateUser","user":{"company":{"solutionname":"","createdon":"","companyguid":"","nextinvoicenumber":"1000","companystatus":"Active","companyname":"","solutioncode":"InvoiceASAP"},"createdon":"","userstatus":"Active","companyguid":"","addressguid":"","guid":"","firstname":"Renuka","lastname":"Shah","email":"ren40@vprex.com","username":"","password":"renuka","cellphone":"","homephone":"","officephone":"","officeextension":"","faxnumber":"","phoneid":"1","sourceid":"1","primarycontact":"Y","permissioncode":"COMPANYADMIN","address":{"addr1":"","addr2":"","addr3":"","addr4":"","addr5":"","city":"","state":"","postalcode":"","country":"","note":""}}} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:41:19.140

执行以下操作：[http ://snipplr.com/view/53225/](http://snipplr.com/view/53225/)

```
String Action="CreateUser"; String company="company name";
try
    {
        JSONObject action=new JSONObject();
        JSONObject user=new JSONObject();
        action.put("action", Action);
        action.put("user", user);

        JSONObject company=new JSONObject();
        user.put("company", company);
        user.put("userstatus", "Active");

        company.put("solutionname", "");
        company.put("nextinvoicenumber", "1000");
        //.... 
    }
    catch (Exception je)
    {

    } 
```

然后将`JSONObject`( `action`) 传递给服务器..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:40:51.210

您将把值以名称-值对的形式放入 JSONObject 中。

像这样：

```
public void writeJSON() {
    JSONObject user = new JSONObject();
    JSONObject user2;
    user2 = new JSONObject();
    try {
        user.put("dish_id", "1");
        user.put("dish_custom", "2");
        user.put("quantity", "2");
        user.put("shared", "2");

        user2.put("dish_id", "2");
        user2.put("dish_custom", "2");
        user2.put("quantity", "4");
        user2.put("shared", "3");
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

# c# - 在 WPF 中读取 Web 浏览器的内容

> ID：11560038
> 
> 赞同：4
> 
> 时间：2012-07-19T11:37:27.380
> 
> 标签：c#, wpf

您好开发人员我想从网站读取外部内容，例如标签之间的元素。我正在使用 Web 浏览器控件，这是我的代码，但是此代码只是用网页填充了我的 Web 浏览器控件

```
public MainWindow()
{
    InitializeComponent();

    wbMain.Navigate(new Uri("http://www.annonymous.com", UriKind.RelativeOrAbsolute));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T15:27:26.630

正如我从您的问题中了解到的那样，您只是在尝试解析 HTML 数据，而不需要显示实际的网页。如果是这种情况，您可以采取一种非常简单的方法并使用 HttpWebRequest：

```
 var _plainText = string.Empty;
    var _request = (HttpWebRequest)WebRequest.Create("http://www.google.com");
    _request.Timeout = 5000;
    _request.Method = "GET";
    _request.ContentType = "text/plain";
    using (var _webResponse = (HttpWebResponse)_request.GetResponse())
    {
        var _webResponseStatus = _webResponse.StatusCode;
        var _stream = _webResponse.GetResponseStream();
        using (var _streamReader = new StreamReader(_stream))
        {
            _plainText = _streamReader.ReadToEnd();
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T11:53:43.220

您可以使用[Html Agility Pack](http://htmlagilitypack.codeplex.com/)库来解析任何 HTML 格式的数据。

```
HtmlDocument doc = new HtmlDocument();
doc.Load(wbMain.DocumentText);

var nodes = doc.SelectNodes("//a[@href"]); 
```

注意：该方法`SelectNode`接受[XPath](http://www.w3schools.com/xpath/default.asp)，而不是 CSS 或 jQuery 选择器。

```
var node = doc.SelectNodes("id('my_element_id')"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T11:44:37.497

尝试这个：

```
dynamic doc = wbMain.Document;
var htmlText = doc.documentElement.InnerHtml; 
```

编辑：取自[这里](https://stackoverflow.com/questions/3914970/wpf-save-webbrowser-html)。

# php - .htaccess 更改图像 src

> ID：11560039
> 
> 赞同：1
> 
> 时间：2012-07-19T11:37:29.243
> 
> 标签：php, image, .htaccess

我有`<img src="img/test.png">`

我想通过**.htaccess**文件更改图像 src

我希望它改变 `<img src="files/image/test.png">`

请建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T11:39:03.700

一个简单的重定向应该可以完成这项工作。

```
Redirect 301 /img/text.png http://example.com/files/image/text.png 
```

它不会更改 HTML 源代码中的值，但这需要的不仅仅是简单的服务器配置指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:49:34.263

使用 URL 重定向

您的 .htaccess 文件将是

```
 <IfModule mod_rewrite.c> 
    RewriteRule ^img/(.*)$ files/image/$1
 </IfModule> 
```

# sql - SQL 查询以如下所示格式显示日历

> ID：11560049
> 
> 赞同：1
> 
> 时间：2012-07-19T11:38:34.963
> 
> 标签：sql, sql-server-2008, tsql, calendar

在使用 SQL 查询显示 2012 年日历时，我需要帮助。显示格式如下所示。在显示表中应该有 12 行所有 12 个月的数据。

```
**Month    sun mon tue  wed  thu  fri  sat......................sun mon tue .. sat**
Jan         1   2   3   4     5   6................................28  29  30  31 
Feb                     1     2   3    4   5.......................................29
Mar                           1   2    3   4 .........................................31
...
...
Dec                                   1   2   3   5................................31 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:44:47.910

创建将执行以下操作的 Store 过程或脚本：

创建包含列的表

月 varchar(10), 01, 02 。. . 31

然后根据您的需要填写日期

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:02:49.227

我不知道您为什么要在 SQL 中而不是在客户端执行此操作。但这里有：

```
SET DATEFIRST 7;

DECLARE @Date DATETIME = '20120101';
DECLARE @Dates TABLE 
(   Date DATE, MonthNum INT, 
    MonthName VARCHAR(15), 
    DayNum INT, 
    MonthStart DATE, 
    Day VARCHAR(2)
);

WITH Dates AS
(   SELECT  [Date] = DATEADD(DAY, ROW_NUMBER() OVER(ORDER BY Object_ID) - 8, @Date)
    FROM    sys.All_Objects
)
INSERT @Dates (Date, MonthNum, MonthName, DayNum, MonthStart, Day)
SELECT  Date,
        [MonthNum] = DATEPART(MONTH, Date),
        [MonthName] = LEFT(DATENAME(MONTH, Date), 3), 
        [DayNum] = DATEPART(WEEKDAY, Date),
        [MonthStart] = DATEADD(MONTH, DATEDIFF(MONTH, 0, d1.Date), 0),
        [Day] = CONVERT(VARCHAR(2), DATEPART(DAY, Date))
FROM    Dates d1
WHERE   Date < DATEADD(YEAR, 1, @Date);

WITH Calendar AS
(   SELECT  MonthName, 
            MonthNum, 
            [Identifier] = CONVERT(VARCHAR(1),  DayNum) + 
                            CONVERT(VARCHAR(1),  Occurance), 
            [Day]
    FROM    @Dates d1
            CROSS APPLY
            (   SELECT  [Occurance] = COUNT(*) 
                FROM    @Dates d2
                WHERE   d2.Date >= DATEADD(DAY, 1 - DATEPART(WEEKDAY, d1.MonthStart), d1.MonthStart) 
                AND     d2.Date <= d1.Date
                AND     d1.DayNum = d2.DayNum
            ) o
    WHERE   d1.Date >= @Date
    UNION ALL
    SELECT  [MonthName] = LEFT(DATENAME(MONTH, '2012' + 
                                                RIGHT('0' + CONVERT(VARCHAR(2), MonthNumber), 2) + 
                                                '01'), 3), 
            MonthNumber, 
            [ID] = DayNumber + Occurance, 
            [Day] = ''
    FROM    (VALUES ('1'), ('2'), ('3'), ('4'), ('5'), ('6'), ('7')) AS d (DayNumber)
            CROSS JOIN (VALUES ('1'), ('2'), ('3'), ('4'), ('5'), ('6')) AS o (Occurance)
            CROSS JOIN (VALUES (1), (2), (3), (4), (5), (6), (7), (8), (9), (10), (11), (12)) AS m (MonthNumber)
)
SELECT  [MonthName],
        [Sun] = [11], [Mon] = [21], [Tues] = [31], [Wed] = [41], [Thu] = [51], [Friday] = [61], [Sat] = [71],
        [Sun] = [12], [Mon] = [22], [Tues] = [32], [Wed] = [42], [Thu] = [52], [Friday] = [62], [Sat] = [72],
        [Sun] = [13], [Mon] = [23], [Tues] = [33], [Wed] = [43], [Thu] = [53], [Friday] = [63], [Sat] = [73],
        [Sun] = [14], [Mon] = [24], [Tues] = [34], [Wed] = [44], [Thu] = [54], [Friday] = [64], [Sat] = [74],
        [Sun] = [15], [Mon] = [25], [Tues] = [35], [Wed] = [45], [Thu] = [55], [Friday] = [65], [Sat] = [75],
        [Sun] = [16], [Mon] = [26], [Tues] = [36], [Wed] = [46], [Thu] = [56], [Friday] = [66], [Sat] = [76]
FROM    Calendar
        PIVOT
        (   MAX([Day])
            FOR [Identifier] IN
            (   [11], [21], [31], [41], [51], [61], [71],
                [12], [22], [32], [42], [52], [62], [72],
                [13], [23], [33], [43], [53], [63], [73],
                [14], [24], [34], [44], [54], [64], [74],
                [15], [25], [35], [45], [55], [65], [75],
                [16], [26], [36], [46], [56], [66], [76]
            )
        ) AS pvt
ORDER BY MonthNum; 
```

# python - Pip freeze 不显示需求文件的存储库路径

> ID：11560056
> 
> 赞同：21
> 
> 时间：2012-07-19T11:39:02.043
> 
> 标签：python, pip, dependency-management

我创建了一个环境并通过 git 添加了一个包 django-paramfield：

```
$ pip install git+https://bitbucket.org/DataGreed/django-paramfield.git
Downloading/unpacking git+https://bitbucket.org/DataGreed/django-paramfield.git
  Cloning https://bitbucket.org/DataGreed/django-paramfield.git to /var/folders/9Z/9ZQZ1Q3WGMOW+JguzcBKNU+++TI/-Tmp-/pip-49Eokm-build
Unpacking objects: 100% (29/29), done.
  Running setup.py egg_info for package from git+https://bitbucket.org/DataGreed/django-paramfield.git
Installing collected packages: paramfield
  Running setup.py install for paramfield
Successfully installed paramfield
Cleaning up... 
```

但是当我想创建一个需求文件时，我只看到包名：

```
$ pip freeze
paramfield==0.1
wsgiref==0.1.2 
```

我怎样才能让它输出整个字符串`git+https://bitbucket.org/DataGreed/django-paramfield.git`而不仅仅是一个包名？该软件包不在 PyPi 中。

**UPD**：也许，它必须与 setup.py 做点什么？我应该以某种方式更改它以反映回购网址吗？

**UPD2**：我在stackoverflow中发现了一个非常相似的[问题](https://stackoverflow.com/questions/6645676/pip-freeze-captures-the-package-name-as-if-it-was-on-python-index-site-but-it-i)，但是作者不确定他是如何解决问题的，不幸的是，接受的答案并没有给出很好的提示，尽管从作者的评论来看，它与setup.py 文件。

**UPD3**：我尝试`download_url`使用此 url 通过 pip 传入 setup.py 并安装包，但他的问题仍然存在。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-24T11:25:09.243

`-e`一个简单但可行的解决方法是安装带有`pip install -e git+https://bitbucket.org/DataGreed/django-paramfield.git#egg=django-paramfield`.

然后`pip freeze`显示包的完整源路径。这不是应该在 pip 中修复的最佳方法，但它正在工作。权衡`-e`（编辑标志）是 pip 将 git/hg 存储库克隆到`/path/to/venv/src/packagename`并运行，`python setup.py deploy`而不是将其克隆到临时目录并`python setup.py install`在设置包后运行并删除临时目录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T17:21:30.143

这是一个可以做到这一点的脚本：

```
#!/usr/bin/env python

from subprocess import check_output
from pkg_resources import get_distribution

def download_url(package):
    dist = get_distribution(package)
    for line in dist._get_metadata('PKG-INFO'):
        if line.startswith('Download-URL:'):
            return line.split(':', 1)[1]

def main(argv=None):
    import sys
    from argparse import ArgumentParser

    argv = argv or sys.argv

    parser = ArgumentParser(
        description='show download urls for installed packages')
    parser.parse_args(argv[1:])

    for package in check_output(['pip', 'freeze']).splitlines():
        print('{}: {}'.format(package, download_url(package) or 'UNKNOWN'))

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-20T18:16:34.273

这是一个老问题，但我刚刚解决了同样的问题和解决方案只需将存储库的路径（在我的情况下为 git）添加到需求文件而不是包名称

IE

```
...
celery==3.0.19
# chunkdata isn't available on PyPi
https://github.com/aaronmccall/chunkdata/zipball/master
distribute==0.6.34
... 
```

像对heroku的魅力一样工作

# java - 将 HTML 表的选择行传递到下一个 JSP 页面

> ID：11560057
> 
> 赞同：0
> 
> 时间：2012-07-19T11:39:02.713
> 
> 标签：java, javascript, jsp, jstl, el

我通过Java脚本`HTML`在页面中创建了一个数据表`DATABROWSER.JSP`（包括它的所有行以及点击功能`JS`）。我想将选中的（*突出显示*的）行值传递给*另一个 JSP*页面（选择后我打开的新页面）**而不提交**第一页。！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:49:19.087

如果不返回服务器，就无法访​​问另一个 JSP。

我会将您选择的项目放在隐藏的表单字段中，然后提交表单。这将允许您带回一个新的 JSP。

# git - 如何获取 git 命令列表及其引入的版本？

> ID：11560061
> 
> 赞同：1
> 
> 时间：2012-07-19T11:39:05.103
> 
> 标签：git, msysgit, changelog

谁能给我 git 命令的列表和它们引入的版本？

我要升级到 git 版本 1.7.11

我的同事正在使用 1.7.3 版本

我需要告诉他们自 1.7.3 版以来添加/改进了什么。

**注意：**我们使用的是 Windows。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:45:49.133

利用：

```
git help -a 
```

这将为您提供所有 git 命令的列表。

可以在以下位置找到包含有关引入的新命令和对现有命令所做更改的信息的更改日志：http: [//github.com/git/git/tree/master/Documentation/RelNotes](http://github.com/git/git/tree/master/Documentation/RelNotes) 只需选择您需要的版本即可。这些列表包含有关从发布到发布的所有更改的详尽信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:47:50.253

转到这个位置： [git / Documentation / RelNotes](https://github.com/git/git/tree/master/Documentation/RelNotes)

将 1.7.3 中的所有发行说明下载到您想要使用的任何版本。

**重要提示：**这些将包含所有详细信息，而不仅仅是新命令，还包括错误修复和不兼容性（如果有）。*在您可以安全地决定您可以实际进行升级之前，您将需要所有这些。*

例如

```
Git v1.7.11 Release Notes
=========================

Updates since v1.7.10
---------------------

UI, Workflows & Features

 * A new mode for push, "simple", which is a cross between "current"
   and "upstream", has been introduced. "git push" without any refspec
   will push the current branch out to the same name at the remote
   repository only when it is set to track the branch with the same
   name over there.  The plan is to make this mode the new default
   value when push.default is not configured.

 * A couple of commands learned the "--column" option to produce
   columnar output.

 * A third-party tool "git subtree" is distributed in contrib/

 * A remote helper that acts as a proxy and caches ssl session for the
   https:// transport is added to the contrib/ area.

 * Error messages given when @{u} is used for a branch without its
   upstream configured have been clarified.
...
...
... 
```

希望这可以帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:49:16.403

每个版本的[发行说明](https://github.com/git/git/tree/master/Documentation/RelNotes)都会为您提供在该版本中引入的更改。您可以从这里找出您感兴趣的两个版本之间添加了哪些命令。

# cucumber - 在 IronRuby 上安装 Cucumber（原生 json 问题）

> ID：11560065
> 
> 赞同：1
> 
> 时间：2012-07-19T11:39:39.420
> 
> 标签：cucumber, ironruby

我正在尝试使用 gem install cucumber 在 IronRuby 1.1.3 上安装 Cucumber，但我不断收到以下错误：

```
构建原生扩展。这可能需要一段时间...
错误：安装黄瓜时出错：
        错误：无法构建 gem 原生扩展。

"d:/Program Files (x86)/IronRuby 1.1/bin/ir.exe" extconf.rb
d:/Program Files (x86)/IronRuby 1.1/Lib/ruby/1.9.1/mkmf.rb:9:in `const_missing':
 未初始化的常量 RbConfig::MAKEFILE_CONFIG (NameError)
        来自 d:/Program Files (x86)/IronRuby 1.1/Lib/ruby/1.9.1/mkmf.rb:9
        来自 d:/Program Files (x86)/IronRuby 1.1/Lib/ruby/1.9.1/rubygems/custom_
require.rb:29:in `require'
        来自 d:/Program Files (x86)/IronRuby 1.1/Lib/ruby/1.9.1/rubygems/custom_
require.rb:29:in `require'
        来自 extconf.rb:1

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T22:00:12.457

这是问题所在：

`Failed to build gem native extension`

一些 gem 在安装时会编译 C 扩展作为过程的一部分；上面的库就是其中之一。其他例子是 Nokogiri 和 Gherkin。生成的库不是基于 .net 的，因此 IronRuby 不能使用。IronRuby 仅处理托管代码，因此您只能使用“纯”ruby gem 或 .net DLL。

# c++ - 如果 void() 不返回值，我们为什么要使用它？

> ID：11560068
> 
> 赞同：17
> 
> 时间：2012-07-19T11:39:59.123
> 
> 标签：c++, types, void

`void f()`意味着`f`什么都不返回。如果`void`什么都不返回，那我们为什么要使用它呢？的主要目的是`void`什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-19T11:43:03.223

发明 C 时的约定是，如果您没有指定返回类型，编译器会自动推断您想要返回一个`int`（对于参数也是如此）。

但是通常你编写的函数可以做一些事情并且不需要返回任何东西（例如，考虑一个只在屏幕上打印一些东西的函数）；出于这个原因，决定，要指定你根本不想返回任何东西，你必须使用`void`关键字作为“返回类型”。

* * *

请记住，这`void`也有其他用途；尤其：

*   如果将其指定为函数的参数列表，则意味着该函数不带参数；这在 C 中是必需的，因为没有参数的函数声明对编译器意味着参数列表只是未指定。在 C++ 中，这不再需要，因为空参数列表意味着该函数不允许任何参数；

*   `void`在指针中也有重要作用；`void *`（及其变体）表示“指向未指定内容的指针”。如果您必须编写必须存储/传递指针而不实际使用它们的函数，这很有用（仅在最后，要实际使用指针，需要转换为适当的类型）。

*   此外，强制转换`(void)`通常用于将值标记为故意未使用，从而抑制编译器警告。

    ```
    int somefunction(int a, int b, int c)
    {
        (void)c; // c is reserved for future usage, kill the "unused parameter" warning
        return a+b;
    } 
    ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-19T11:44:12.323

在诸如 C、C++、Java 等命令式编程语言中，函数和类型`void`的方法用于它们的副作用。它们不会产生有意义的返回值，但它们会以多种可能的方式之一影响程序状态。例如，`exit`C 中的函数不返回任何值，但它具有中止应用程序的副作用。另一个例子，一个 C++ 类可能有一个 void 方法来改变它的实例变量的值。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-19T11:45:02.513

> void() 表示什么都不返回。

`void`并不意味着*什么*。`void`是一种*不代表*什么的*类型。*这是一个微妙的区别：仍然需要*表示*，即使它不代表任何内容。

 **此*类型* 用作函数的*返回类型*，不返回任何内容。这也用于表示通用数据，当它用作`void*`. 所以这听起来很有趣，虽然`void`代表*什么*，但`void*`代表*一切*！

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-19T11:48:30.540

这个问题与语言的历史有关：C++ 从 C 中借用，而 C 曾经隐式地将所有未类型化的内容键入为`int`（事实证明，这是一个可怕的想法）。这包括旨在作为过程的函数（回想一下，函数和过程之间的区别在于函数调用是表达式，而过程调用是语句）。如果我从阅读早期的 C 书籍中没记错的话，程序员过去常常用一个来修补这个缺点`#define`：

```
#define void int 
```

这个约定后来在 C 标准中被采用，并且`void`引入了关键字来表示打算作为过程的函数。这非常有帮助，因为编译器现在可以检查您的代码是否使用了一个不打算返回任何内容的函数的返回值，并警告您应该返回但让控件运行结束的函数。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-19T11:42:03.103

因为有时您不需要返回值。这就是我们使用它的原因。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-19T11:43:31.133

如果你没有`void`，你将如何告诉编译器一个函数没有返回值？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-19T11:51:47.560

原因考虑某些情况，您可能必须对全局变量进行一些计算并将结果放入全局变量中，或者您想根据参数打印一些东西等。在这些情况下，您可以使用不返回值的方法..即。空白

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-08-30T20:07:10.047

这是一个示例函数：

```
struct SVeryBigStruct
{
    // a lot of data here
};

SVeryBigStruct foo()
{
    SVeryBigStruct bar;
    // calculate something here

    return bar;
} 
```

现在这是另一个功能：

```
void foo2(SVeryBigStruct& bar) // or SVeryBigStruct* pBar
{
    bar.member1 = ...
    bar.member2 = ...
} 
```

第二个函数更快，它不必复制整个结构。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-19T11:41:11.040

可能是告诉编译器“您不需要推送和弹出所有 cpu 寄存器！”

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-19T11:45:29.290

有时它可以用来打印某些东西，而不是返回它。有关示例，请参见[http://en.wikipedia.org/wiki/Mutator_method#C_example](http://en.wikipedia.org/wiki/Mutator_method#C_example)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-26T02:31:31.303

函数不需要返回值。为了告诉编译器函数不返回值，返回类型为 void。**

# gnuplot - 带有 gnuplot 的堆叠图

> ID：11560069
> 
> 赞同：1
> 
> 时间：2012-07-19T11:40:00.513
> 
> 标签：gnuplot

我的数据文件看起来像这样

```
A 20120301 4
A 20120302 3
B 20120301 5
B 20120302 6
C 20120303 5 
```

除了 A、B、C 之外还有很多，我想用 gnuplot 创建一个堆叠图（类似于[gnuplot 演示](http://gnuplot.sourceforge.net/demo/histograms.html)中的“堆叠直方图” ）

```
20120301 = (A:4 + B:5)
20120302 = (A:3 + B:6)
20120303 = (C:5) 
```

到目前为止，我无法说服 plot 以这种格式读取数据。我是否为此重新安排了数据文件？或者有没有办法让 gnuplot 以这种格式读取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:22:03.577

我想我已经设法将它打造成一种可行的形式（你至少需要 gnuplot 4.3）：

```
set boxwidth 0.75 absolute
set style fill   solid 1.00 border lt -1
set datafile missing '-'
set style histogram rowstacked
set style data histograms
set yrange [0:]
plot for [i=2:4] 'test.dat' u i,'' u (0.0):xtic(1) notitle 
```

这是数据文件`test.dat`

```
#date     A B C
#missing data is marked by a minus sign
20120301  4 5 -   
20120302  3 6 -
20120303  - - 5 
```

呸！在直方图方面，我对 gnuplot 的使用从来都不是很好。希望这对您有用（对您的数据文件的更改感到抱歉）。

# php - 为空输入设置条件

> ID：11560076
> 
> 赞同：0
> 
> 时间：2012-07-19T11:40:25.133
> 
> 标签：php

我正在尝试设置一个条件，如果未填写所有字段，则会回显错误。我写的代码似乎总是输出真。

我究竟做错了什么？

```
if (empty($oldpassword)||empty($newpassword)||empty($repatnewpassword)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:41:47.910

您正在检查其中之一，这意味着，如果其中一个字段为空，则结果为`true`。将其更改为**and**，因此`true`只有在**所有**字段都为空时才会得到：

```
if ( empty($oldpassword) && empty($newpassword) && empty($repatnewpassword) ) 
```

如果您需要确保所有字段都已填写，并且您需要知道未填写女巫，请执行更长的代码：

```
# check first if old password is filled
if ( $oldpassword )  {

    # now, if that works, check if new passwords are filled ( and match too )
    if ( $newpassword && ( $newpassword == $repatnewpassword) ) {

        // do whatever password checks here, now you know that oldpassword is
        // filled and newpassord is filled and matches repatnewpassword

    } else {
        // new password is not filled or passwords don't match
    }

} else {
    // old password is not filled out
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:45:21.403

如果 $oldpassword 为空而 $newpassword 不为空，您的代码将返回 true。将所有 ¦¦ 更改为 &&。

# api - LinkedIn 群组：在标题中发布带有链接的帖子？

> ID：11560079
> 
> 赞同：0
> 
> 时间：2012-07-19T11:40:41.747
> 
> 标签：api, linkedin

我正在尝试找出是否可以通过linkedin API向群组发布新帖子并在帖子标题中有链接？

我在此处的文档的标题中找不到任何关于允许或不允许的文档： [https ://developer.linkedin.com/documents/groups-api](https://developer.linkedin.com/documents/groups-api)

你知道这是否可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:36:54.657

我已经看到这是可能的。

一个例子在这里：[http ://www.linkedin.com/groups/Now-new-website-FoodBarcelona-Restaurants-1446917.S.136723085?qid=90c4aa0a-fc9a-4934-b7e5-3d555133b8e5&trk=group_most_popular-0-b -ttl&goback=%2Egmp_1446917](http://www.linkedin.com/groups/Now-new-website-FoodBarcelona-Restaurants-1446917.S.136723085?qid=90c4aa0a-fc9a-4934-b7e5-3d555133b8e5&trk=group_most_popular-0-b-ttl&goback=%2Egmp_1446917)（不确定它是否在没有成为成员的情况下可见）。

在问题列表中，标题是指向详细信息页面的链接，但在详细信息页面上，标题末尾会显示一个链接。不确定是作为html传递还是linkedin自动解析链接并将它们转换为html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T01:53:12.697

看起来不像；您可以通过尝试在此处创建帖子进行测试：

[http://simplelinkedin.fiftymission.net/demo/groups.php#groupCreatePost](http://simplelinkedin.fiftymission.net/demo/groups.php#groupCreatePost)

当您向磁贴添加任何 HTML 时，API 会以 400 错误响应：

```
com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected character '\' (code 92) in start tag Expected a quote
 at [row,col {unknown-source}]: [3,34] 
```

从逻辑上讲，我不确定它会如何，因为当您通过 API 创建帖子时，它会发布到 LinkedIn.com 上的一个组，并且每个组帖子标题本身就是该组内完整帖子本身的链接。

# android - 如何仅选择 ListView 中选中的一个复选框

> ID：11560082
> 
> 赞同：0
> 
> 时间：2012-07-19T11:40:52.333
> 
> 标签：android, listview, android-arrayadapter

我正在开发一个带有`ListView`. 这里面的每个项目`ListView`都会有一个`checkbox`.

当用户单击其中一个时，我试图取消选中每个项目。例如 a`ListView`有两个项目，**0, 1**。

此时选择了 0 并且用户点击了第 1 项。我想取消选择第 0 项。

这是我的代码。它在一个`ArrayAdapter`.

```
@Override
public View getView(final int position, View convertView, ViewGroup parent)
{
    View row = convertView;
    if (row == null)
    {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(itemLayoutId, parent, false);
    }

    Gate gate = gates.get(position);
    if (gate != null)
    {
        TextView itemText = (TextView)row.findViewById(R.id.gateNameText);
        if (itemText != null)
            itemText.setText(gate.getName());

        ImageView imageView = 
                (ImageView)row.findViewById(R.id.gateTypeImage);
        int resId;

        switch (gate.getSelTypeOperation())
        {
            case 0:
                resId = R.drawable.garage;
                break;
            case 1:
                resId = R.drawable.pulse;
                break;
            case 2:
                resId = R.drawable.onoff;
                break;
            default:
                resId = R.drawable.garage;
                break;
        }
        imageView.setImageResource(resId);

        CheckBox checkBox = 
                (CheckBox)row.findViewById(R.id.gateSelectedCheck);
        if (checkBox != null)
        {
            checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener()
            {
                public void onCheckedChanged(CompoundButton buttonView,
                        boolean isChecked)
                {
                    // Solo hago algo si el nuevo estado es marcado.
                    if (isChecked)
                        for(int i = 0; i < gates.size(); i++)
                        {
                            if (i != position)
                            {
                                Log.v("GatesAdapter", "uncheck: " + position);
                                View view = getView(i, null, null);
                                CheckBox checkBox = 
                                        (CheckBox)view.findViewById(R.id.gateSelectedCheck);
                                checkBox.setChecked(false);
                            }
                        }
                }
            });
            checkBox.setChecked(selectedGateIndex == position);
        }
    }

    return row;
} 
```

但是，它不起作用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:38:36.280

只需更改您的`getview()`方法，如下所示：

```
@Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        View vi = convertView;
        final Holder holder;
        if (vi == null) {
            vi = inflater.inflate(R.layout.raw_customelabel_list, null);
            holder = new Holder();

            holder.txtname = (TextView) vi
                    .findViewById(R.id.raw_customlabel_txt_name);
            holder.checkbox = (CheckBox) vi
                    .findViewById(R.id.raw_customlabel_checkbox);
            vi.setTag(holder);

        } else {
            holder = (Holder) vi.getTag();
        }

        vi.setTag(holder);
        holder.txtname.setText(strarry[position]);

        holder.checkbox.setId(position);
        holder.checkbox.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                for (int i = 0; i < strarry.length; i++) {
                    if (v.getId() == i) {
                        checkarry[i] = true;
                        Log.v("check", ""+position);
                    } else {
                        checkarry[i] = false;
                    }
                }
                notifyDataSetChanged();
            }
        });

        if (checkarry[position]) {
            holder.checkbox.setChecked(true);
        } else {
            holder.checkbox.setChecked(false);
        }

        return vi;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:47:49.913

您需要使用 listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE) 并且您需要使自定义视图的行实现可检查。. 另一个 SO 问题已经存在 - soln is [here](https://stackoverflow.com/a/5612808/735675)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-16T11:24:52.827

使用下面的这些代码它会为你工作得很好

```
int selected_position =-1
public View getView(final int position, View convertView, ViewGroup parent)
{

if(selected_position==position)
        {
            CHECKBOX.setChecked(true);

        }
        else
        {
            CHECKBOX.setChecked(false);

        }

            CHECKBOX.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View view) {

                    if (((CheckBox) view).isChecked())
                    {
                        selected_position= position;

                    }
                    else
                    {
                        selected_position=-1;
                    }

                    notifyDataSetChanged();

                }
            });
      return view;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T12:50:59.613

使用单选按钮。如果我看到复选框，我想我可以选择任意多个。

如果您只是在代码中用 RadioButton 替换 CheckBox 对象，是否不能解决您的问题？

# jquery - 如何在子域之间进行 jQuery ajax 调用？

> ID：11560086
> 
> 赞同：3
> 
> 时间：2012-07-19T11:41:12.933
> 
> 标签：jquery, ajax

我有一个像下面这样的域。

我有两个子域，如下所示。

[http://foo.jayshit.info](http://foo.jayshit.info)

[http://bar.jayshit.info](http://bar.jayshit.info)

我想从 foo.jayshit.info 到 bar.jayshit.info 进行 jQuery ajax 调用，以获取一些 html 或将一些数据更新回服务器。

我知道由于**相同的原产地政策**，这并不容易。而且我也不想使用**JSONP**。因为我希望我的 ajax 调用具有**async: false**如下所示。

```
$.ajax({
    type: "POST",
    cache: false,
    url: tURL,
    data: tData,
    async: false
}); 
```

请让我知道是否有人遇到了一些解决方法。

提前致谢。

问候，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T11:44:30.717

由于您控制着另一个子域，因此您可以从 bar.jayshit.info发送[此标头：](https://developer.mozilla.org/en/http_access_control)

```
Access-Control-Allow-Origin: http://foo.jayshit.info
Access-Control-Allow-Methods: GET, POST 
```

现代浏览器尊重这些标头并允许您发出请求。对于 IE8，您需要使用[`XDomainRequest`](http://msdn.microsoft.com/en-us/library/ie/cc288060%28v=vs.85%29.aspx)jQuery 不支持的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:47:40.123

[http://foo.jayshit.info](http://foo.jayshit.info)和[http://bar.jayshit.info](http://bar.jayshit.info)是 2 个不同的域，所以你需要跨域请求，第一个来自 google 的链接：http: [//james.padolsey.com/javascript/cross-域请求与 jquery/](http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:48:11.990

采用

```
dataType: "jsonp" 
```

...

```
$.ajax({
    type: "POST",
    dataType: "jsonp",
    cache: false,
    url: tURL,
    data: tData,
    async: false
}); 
```

更多信息：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T11:48:41.443

我建议您在代码中添加以下内容：

```
jQuery.support.cors = true; 
```

有关更多信息，请参阅[此链接](http://bugs.jquery.com/ticket/8122)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T13:00:44.323

答案是 CORS 和 JSONP。IE 还不支持 CORS，你必须等待 IE10 才能获得。JSONP 只允许您进行跨域 GET 而不是 POST、PUT 和 DELETE。CORS 确实解决了这些问题，并且所有其他浏览器都支持它。

您可以解决此问题的另一种方法是在您的网站中构建一个代理，该代理将为您从服务器进行调用。这将帮助您解决浏览器中的跨域问题。这些是作为安全预防措施的，以防您想知道。

# php - 没有 C2DM 的网络服务的 Android 实时更新？

> ID：11560091
> 
> 赞同：0
> 
> 时间：2012-07-19T11:41:19.323
> 
> 标签：php, android, real-time, push

我试图让 100 台 Android 设备根据服务器参数显示文本字符串。当服务器将文本从“Hello World”更改为“Everything Changed”时，我希望所有 100 个 android 设备同时更新，最好是在更改发生后立即更新。

它在隔离的 LAN 上运行，因此 C2DM 不可行，并且每秒轮询似乎相当大的流量（特别是如果以后有 1000 台设备）。关于如何从轮询转向推送或至少使其可扩展，是否有任何建议？

我一直在考虑只保持连接打开，服务器仅在内容发生变化时才返回内容，但担心超时问题和 PHP 处理 100 个并发连接的能力......有什么要尝试的指针或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:52:34.463

你不应该拉。如果您在私有网络中，并且设备数量有限，则最好保持 tcp 套接字打开，并通过打开的套接字将数据从服务器发送到客户端。

但是你必须明白你在做什么。

所以阅读以下内容：

1）了解可以打开多少个连接以及是否足以满足您的需求 [可能有多少个套接字连接？](https://stackoverflow.com/questions/651665/how-many-socket-connections-possible)

2）如果你有很多设备，我的意思是超过一千台，你可能会在服务器端失败。为了不失败，您必须阅读有关 async io [http://en.wikipedia.org/wiki/Asynchronous_I/O](http://en.wikipedia.org/wiki/Asynchronous_I/O)和其他一些在网络中找到的内容。和 php 中的 async io PHP[可以异步使用套接字吗？](https://stackoverflow.com/questions/1432477/can-php-asynchronously-use-sockets)

# asp.net - Sys.Webforms 仅在 Firefox 14.0.1 上未定义

> ID：11560093
> 
> 赞同：1
> 
> 时间：2012-07-19T11:41:25.020
> 
> 标签：asp.net

自最新的 Firefox 更新以来，我们在网站上收到 Sys.Webforms is undefined 错误。

Asp.net、.Net 3.5、包含 ascx 控件和 javascripts 的 Asp.net 页面附加在带有 ScriptManager.RegisterStartupScript 的 ascx OnPreRender 中。

Sys 已定义，但 Sys.Webforms 在 Sys.Application.add_load 和 $(document).ready 中仍未定义。

看起来，但不是 100% 肯定，这只发生在 https 上。

没有其他浏览器会重现此错误。

错误发生在附加脚本的这一部分：

```
Sys.Application.add_init(AppInit);

function AppInit(sender) {
    Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(that.onBeginRequest);
} 
```

任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:36:27.967

事实证明，51degrees.mobi 高级设备数据文件是罪魁祸首。删除文件，因此不从中加载定义，解决了这个问题。看起来我们的版本不能很好地处理 firefox 14.0.1 用户代理字符串。

# ruby-on-rails - 如何在设计 gem 的更新控制器（编辑用户）中添加调用操作？

> ID：11560094
> 
> 赞同：0
> 
> 时间：2012-07-19T11:41:24.610
> 
> 标签：ruby-on-rails, devise

当用户编辑他的页面时，我需要调用函数。

这是我的 settings_controller.rb：

```
class SettingsController < ApplicationController
  def update
    @user = User.find(current_user.id)
    email_changed = @user.email != params[:user][:email]
    password_changed = !params[:user][:password].empty?
    successfully_updated = if email_changed or password_changed
      @user.update_with_password(params[:user])
    else
      @user.update_without_password(params[:user])
    end

    if successfully_updated
      # Sign in the user bypassing validation in case his password changed
      sign_in @user, :bypass => true
      //need to call action here
    else
      render "edit"
    end
  end
end 
```

如果更新成功，我需要重定向用户。

在我的 routes.rb 中：

```
devise_for :users, :controllers => {:registrations => 'registrations', :settings => 'settings'} 
```

还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:17:26.843

中没有`settings`路线`devise_for`。

[在设计中](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb)查看。[`RegistrationController`](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb)

你可以覆盖这个：

```
class SettingsController < Devise::RegistrationsController
 def update
  @user = User.find(current_user.id)
  email_changed = @user.email != params[:user][:email]
  password_changed = !params[:user][:password].empty?
  successfully_updated = if email_changed or password_changed
    @user.update_with_password(params[:user])
  else
    @user.update_without_password(params[:user])
  end

  if successfully_updated
    # Sign in the user bypassing validation in case his password changed
    sign_in @user, :bypass => true
    //need to call action here
  else
    render "edit"
  end
 end
end 
```

在路由中：

```
devise_for :users, :controllers => {:registrations => 'settings'} 
```

# c++ - 将模板类作为参数传递给类方法并使用模板类作为向量模板类型

> ID：11560098
> 
> 赞同：0
> 
> 时间：2012-07-19T11:41:30.403
> 
> 标签：c++

自从我在 C++ 中使用模板已经有一段时间了，但现在我真的需要它们。

我重现了我遇到的问题，但我不记得解决方案实际上是如何进行的。

```
#include <iostream>
#include <vector>

namespace problem {
    template <typename T>
    class data {
        public:
            inline data(T var) {
                this->var = var;
            }
        private:
            T var;
    };

    class storage {
        public:
            inline void push(problem::data<T> * data) {
                this->VData.push_back(data);
            }
        private:
            std::vector<problem::data<T> *> VData;
    };
};

int main() {
    problem::storage * testStorage = new problem::storage();
    problem::data<int> * testData = new problem::data<int>(256);

    testStorage->push(testData);

    delete testData;
    delete testStorage;
    return 0;
} 
```

g++ -Wall problem.cpp 给了我以下错误。

```
problem.cpp:17:35: error: ‘T’ was not declared in this scope
problem.cpp:17:36: error: template argument 1 is invalid
problem.cpp:21:30: error: ‘T’ was not declared in this scope
problem.cpp:21:31: error: template argument 1 is invalid
problem.cpp:21:34: error: template argument 1 is invalid
problem.cpp:21:34: error: template argument 2 is invalid
problem.cpp: In member function ‘void problem::storage::push(int*)’:
problem.cpp:18:17: error: request for member ‘push_back’ in ‘((problem::storage*)this)->problem::storage::VData’, which is of non-class type ‘int’
problem.cpp: In function ‘int main()’:
problem.cpp:29:28: error: no matching function for call to ‘problem::storage::push(problem::data<int>*&)’
problem.cpp:29:28: note: candidate is:
problem.cpp:17:16: note: void problem::storage::push(int*)
problem.cpp:17:16: note:   no known conversion for argument 1 from ‘problem::data<int>*’ to ‘int*’ 
```

我知道我可以使用成员模板，但是我如何处理向量？

```
template <typename T>
inline void push(problem::data<T> * data) {
    this->VData.push_back(data);
} 
```

如果我使用成员模板，那么向量定义将留下这些错误。

```
problem.cpp:22:30: error: ‘T’ was not declared in this scope
problem.cpp:22:31: error: template argument 1 is invalid
problem.cpp:22:34: error: template argument 1 is invalid
problem.cpp:22:34: error: template argument 2 is invalid
problem.cpp: In member function ‘void problem::storage::push(problem::data<T>*)’:
problem.cpp:19:17: error: request for member ‘push_back’ in ‘this->.VData’, which is of non-class type ‘int’ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:16:23.453

也许尝试使用 boost::any？

```
#include <iostream>
#include <vector>
#include <boost/any.hpp>

namespace problem {
    template <typename T>
    class data {
        public:
            inline data(T var) {
                this->var = var;
            }
        private:
            T var;
    };

    class storage {
        public:
            template<class T>
            inline void push(problem::data<T> * data) {
                this->VData.push_back(data);
            }
        private:
            std::vector<boost::any> VData;
    };
};

int main() {
    problem::storage * testStorage = new problem::storage();
    problem::data<int> * testData = new problem::data<int>(256);

    testStorage->push<int>(testData);

    problem::data<float> * testData1 = new problem::data<float>(1.);
    testStorage->push<float>(testData1);

    delete testData;
    delete testData1;
    delete testStorage;
    return 0;
} 
```

但是在使用向量中的数据之前，您需要从 boost::any 转换为您的类型

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T12:22:39.357

如果您想要可以存储多种类型的值的存储，您可以尝试以下操作：http: [//ideone.com/jjuVq](http://ideone.com/jjuVq)

```
class storage {
    struct data_base {};

    template <class K> 
    struct data: data_base {
        data(K value): value_(value) {}
        K value_;
    };

    typedef std::vector<data_base*> container_type;

public:
    ~storage() {
        while(!this->VData.empty()) {
            delete this->VData.back();
            this->VData.pop_back();
        }
    }
    template <class P>
    inline void push(P v) {
        this->VData.push_back(new data<P>(v));
    }
    template <class P>
    P &get(int i) { return static_cast<data<P>*>(this->VData[i])->value_; }
private:
    container_type VData;
}; 
```

或者只使用 boost::any 作为容器的值类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T11:50:43.850

您的存储类有一个依赖于模板参数的数据成员，因此您应该将其设为类模板：

```
template <typename T>
class storage {
    public:
        inline void push(problem::data<T> * data) {
            this->VData.push_back(data);
        }
    private:
        std::vector<problem::data<T> *> VData;
}; 
```

否则，您可以`storage`为特定类型工作`T`：

```
class storage {
    public:
        inline void push(problem::data<int> * data) {
            this->VData.push_back(data);
        }
    private:
        std::vector<problem::data<int> *> VData;
}; 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-19T12:28:01.457

我找到了一个我正在寻找的解决方案，但我不确定这是否是好的做法。:P

```
class storage {
    public:
        template <typename T>
        inline void push(problem::data<T> * data) {
            this->VData.push_back(reinterpret_cast<char*>(data));
        }
        template <typename T>
        inline problem::data<T> * draw() {
            problem::data<T> * data = reinterpret_cast<problem::data<T>*>(VData.back());
            return data;
        }
    private:
        std::vector<char*> VData;
}; 
```

# cloudflare - 使用 Cloudflare 缓存 JSON

> ID：11560101
> 
> 赞同：10
> 
> 时间：2012-07-19T11:41:40.757
> 
> 标签：cloudflare

我正在为我在 Google App Engine 上的应用程序开发一个后端系统。

我的应用程序和后端服务器与 json 通信。像[http://server.example.com/api/check_status/3838373.json](http://server.example.com/api/check_status/3838373.json)或只有[http://server.example.com/api/check_status/3838373/](http://server.example.com/api/check_status/3838373/)

我打算使用 CloudFlare 来缓存 JSON 页面。

我应该在标题上使用哪一个？：

```
Content-type: application/json
Content-type: text/html 
```

CloudFlare 是否缓存我的服务器响应以降低我的成本？因为我不会使用 CSS、图像等。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-19T23:26:54.747

标准 Cloudflare 缓存级别（在您的域的性能设置下）设置为 Standard/Aggressive，这意味着它默认仅缓存某些类型的[脚本、样式表、图像](https://support.cloudflare.com/hc/en-us/articles/200172516-Which-file-extensions-does-CloudFlare-cache-for-static-content-)。积极缓存不会缓存普通网页（即在目录位置或 *.html），也不会缓存 JSON。所有这些都基于 URL 模式（例如，它是否以 .jpg 结尾？）并且与 Content-Type 标头无关。

全局设置只能变得不那么激进，而不是更多，因此您需要设置一个或多个页面规则来匹配这些 URL，使用 Cache Everything 作为自定义缓存规则。

[http://blog.cloudflare.com/introducing-pagerules-advanced-caching](http://blog.cloudflare.com/introducing-pagerules-advanced-caching)

顺便说一句，我不建议对 JSON 响应使用 HTML Content-Type。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2020-09-11T10:44:00.203

默认情况下，Cloudflare 不缓存 JSON 文件。我最终配置了一个新的页面规则：

```
https:/domain.com/sub-directiory/*.json*
```

*   缓存级别：缓存所有内容
*   浏览器缓存 TTL：设置超时
*   边缘缓存 TTL：设置超时

[![json 的 Cloudflare 页面规则](../Images/f717a01828f37b5918dd0e9d189799e7.png)](https://i.stack.imgur.com/VkqlK.jpg)

希望它能拯救某人的一天。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-05-10T00:06:45.307

新的[工人](https://developers.cloudflare.com/workers/)功能（额外 5 美元）可以促进这一点：

**要点：** Cloudflare 通常将普通静态文件视为几乎永不过期（或者可能是一个月 - 我完全忘记了）。

所以一开始你可能会想`"I just want to add .json to the list of static extensions"`。这可能不希望您使用 JSON - 除非它真的很少更改 - 或者按文件名进行版本控制。您可能需要 60 秒或 5 分钟，这样如果您更新文件，它将在这段时间内更新，但您的服务器不会受到来自每个最终用户的单独请求的轰炸。

以下是我与工作人员一起拦截所有`.json`扩展文件的方法：

```
// Note: there could be tiny cut and paste bugs in here - please fix if you find!
addEventListener('fetch', event => {
  event.respondWith(handleRequest(event));
});

async function handleRequest(event)
{
  let request = event.request;
  let ttl = undefined;
  let cache = caches.default;      
  let url = new URL(event.request.url);

  let shouldCache = false;

  // cache JSON files with custom max age
  if (url.pathname.endsWith('.json'))
  {
    shouldCache = true;
    ttl = 60;
  }

  // look in cache for existing item
  let response = await cache.match(request);

  if (!response) 
  {       
    // fetch URL
    response = await fetch(request);

    // if the resource should be cached then put it in cache using the cache key
    if (shouldCache)
    {
      // clone response to be able to edit headers
      response = new Response(response.body, response);

      if (ttl) 
      {
        // https://developers.cloudflare.com/workers/recipes/vcl-conversion/controlling-the-cache/
        response.headers.append('Cache-Control', 'max-age=' + ttl);
      }

      // put into cache (need to clone again)
      event.waitUntil(cache.put(request, response.clone()));
    }

    return response;
  }

  else {
    return response;
  }
} 
```

您可以使用 mime-type 而不是扩展名来执行此操作——但这​​会非常危险，因为您最终可能会过度缓存 API 响应。

此外，如果您按文件名进行版本控制 - 例如。`products-1.json`/`products-2.json`那么你就不需要设置`max-age`过期的标头了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-31T13:25:52.190

您可以在 Cloudflare 上缓存 JSON 响应，类似于缓存任何其他页面的方式 - 通过设置`Cache-Control`标头。因此，如果您想在边缘 ( `s-maxage`) 和浏览器 ( `max-age`) 上缓存 JSON 60 秒，只需在响应中设置以下标头：

`Cache-Control: max-age=60, s-maxage=60`

您可以在此处阅读有关不同缓存控制标头选项的更多信息：

[https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control)

请注意，不同的 Cloudflare 计划对它们允许的最小边缘缓存 TTL 具有不同的值（企业计划允许低至 1 秒）。如果您的标头的值低于此值，那么我想它们可能会被忽略。您可以在此处查看限制：

[https://support.cloudflare.com/hc/en-us/articles/218411427-What-does-edge-cache-expire-TTL-mean-#summary-of-page-rules-settings](https://support.cloudflare.com/hc/en-us/articles/218411427-What-does-edge-cache-expire-TTL-mean-#summary-of-page-rules-settings)

# android - 在eclipse中安装android后模拟器无法打开的原因

> ID：11560112
> 
> 赞同：0
> 
> 时间：2012-07-19T11:42:13.230
> 
> 标签：android, eclipse

我在eclipse中安装了android，一切都很好，但是启动AVD后，模拟器没有打开。在什么情况下会发生？它显示错误，例如

```
[2012-07-19 17:09:04 - DeviceMonitor] Adb connection Error:An existing connection was forcibly closed by the remote host 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:52:31.393

```
Check out this - 
```

[“与 adb 的连接已断开，出现严重错误。”](https://stackoverflow.com/questions/4072706/the-connection-to-adb-is-down-and-a-severe-error-has-occured)

以及

[错误：“Adb 连接错误：现有连接被远程主机强行关闭”](https://stackoverflow.com/questions/7411295/error-adb-connection-erroran-existing-connection-was-forcibly-closed-by-the-r)

或者你可以做一件事给出正确的 android-sdk-windows 路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:00:40.390

eclipse中的模拟器按钮也有一些问题。有时它只是不会启动模拟器。我实际上不知道为什么会这样（也许它会在您看不到的另一个维度中打开：P）。我只是不使用按钮来解决这个问题；）。我手动启动模拟器。在 linux 上创建模拟器配置后，您可以从命令行启动模拟器。

在您的 Android SDK 文件夹中有一个子文件夹“工具”。您可以运行“模拟器”程序并将 AVD 配置的名称作为第一个参数。

模拟器@My_AVD_Configuration_Name

您必须将 @ 标记放在名称前面。然后您可以使用“adb”程序安装您的 APK 文件。“adb”程序位于 Android SDK 的“platform-tools”子文件夹中。写吧。

adb install -r MyAndroidApp.apk

我希望这能有所帮助 ：）

# bash - 根据文件中的日期字符串设置 mtime

> ID：11560116
> 
> 赞同：0
> 
> 时间：2012-07-19T11:42:25.563
> 
> 标签：bash, touch

这是一个与此类似的[问题](https://stackoverflow.com/questions/1066690/set-mtime-based-on-date-string-in-filename)。

但是我不擅长shell脚本，所以还是想请你帮忙……

我的情况有点不同：日期字符串在文件中。

这些文件（超过 700 个）被命名为 msg00000.html 到 msg00721.html。每个都有这样的一行：

```
<li><em>Date</em>: Thu, 22 Jul 2010 00:44:57 +0800</li> 
```

经过大量的谷歌搜索，我终于用这个找到了它们：

```
grep "<li><em>Date" msg00000.html | cut -d' ' -f2-7 | tr -d "</li>" 
```

输出正是我想要的：

```
Thu, 22 Ju 2010 00:44:57 +0800 
```

而且我知道使用`touch -md "Thu, 22 Ju 2010 00:44:57 +0800" msg00000.html`可以修改mtime。

但是，有人可以帮我将它们组合在一起吗？并为 723 个文件执行此操作...

谢谢...

**编辑**

好吧，我终于想出了如何：

```
for f in *.html; do touch -md "$(grep '<li><em>Date' $f | cut -d' ' -f2-7 | sed 's/<\/li>//')" "$f"; done 
```

这是一个很长的命令...

实际上问题出在`tr`命令中。它在使用时删除所有字符`-d`，而不是模式。所以日期`Thu, 22 Ju 2010 00:44:57 +0800`是错误的。应该是`Thu, 22 Jul 2010 00:44:57 +0800`。是的，缺少一个“l”，已被`tr -d`. 哈哈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:08:50.397

```
for i in {0..721}; do touch -md "`grep '<li><em>Date' $(printf 'msg%05d.html' $i) | sed -e 's#<[^>]*>##g' | cut -d' ' -f2-7`" $(printf 'msg%05d.html' $i); done 
```

我敢肯定 awk 大师很快就会向我们展示如何用 20 个字符来做这件事，但这应该可以解决问题。

编辑：记住，孩子们，重要的是要睡一觉，而不是试图在互联网上回答问题。你不想最终发布这样荒谬的答案，是吗？

# .htaccess - .htacces 子文件夹的好网址

> ID：11560119
> 
> 赞同：0
> 
> 时间：2012-07-19T11:42:49.767
> 
> 标签：.htaccess, url-rewriting

我的根文件夹中有 1 个子文件夹：/root/task6/index.php

我需要将网址更改`www.andriussulcas.prinusprojects.lt/task6/index.php?p=naujienos&title=title`为`www.andriussulcas.prinusprojects.lt/task6/naujienos/title`

我一直在尝试这样做一段时间，但我所有的努力都没有成功。在寻找答案时，我开始想也许我的 mod_rewrite 没有被激活。但后来我发现如何将我的网站根目录重定向到我所有文件所在的子目录。所以 mod_rewrite 有效。

我在stackoverflow上找到了一些类似的答案，比如[如何为子目录“重写规则”？.htaccess/php](https://stackoverflow.com/questions/1018383/how-to-rewrite-rule-for-a-sub-sub-directory-htaccess-php)但由于某种原因它对我不起作用。

这是我的 .htaccess 文件：

```
Options +FollowSymLinks
RewriteEngine On 

RewriteCond %{HTTP_HOST} ^(www.)?andriussulcas.akademija.prinusprojects.lt$
RewriteCond %{REQUEST_URI} !^/task6/
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /task6/$1
RewriteCond %{HTTP_HOST} ^(www.)?andriussulcas.akademija.prinusprojects.lt$ 
RewriteRule ^(/)?$ task6/index.php?p=naujienos [L]

RewriteRule ^naujienos/([A-Za-z0-9-]+)?$ index.php?p=naujienos&title=$1 [L] 
```

.htaccess 文件位于我的根目录中，并且子目录中没有其他 .htaccess 文件。

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:08:52.080

尝试用这个替换你的最后一条规则：

```
RewriteCond %{HTTP_HOST} ^(www.)?andriussulcas.akademija.prinusprojects.lt$ 
RewriteRule ^naujienos/([A-Za-z0-9-]+)$ /task6/index.php?p=naujienos&title=$1 [L] 
```

# java - 将图标添加到 JList 项

> ID：11560124
> 
> 赞同：0
> 
> 时间：2012-07-19T11:42:59.000
> 
> 标签：java, swing, jlist, imageicon, renderer

> **可能重复：**
> [Java：将图像添加到 JList 项](https://stackoverflow.com/questions/5807463/javaadd-an-image-to-a-jlist-item)

```
public class ClientUserPanel extends JPanel {

    private JList userlist;
    private JScrollPane scrollist;
    private DefaultListModel listmodel;

    public ClientUserPanel() {
        super();
        init();
    }

    private void init() {
        this.setLayout(new BorderLayout());
        this.setSize(100, 200);
        listmodel = new DefaultListModel();
        userlist = new JList(listmodel);
        scrollist = new JScrollPane(userlist);
        listmodel.addElement("uday");
        listmodel.addElement("ravi");
        listmodel.addElement("uday");
        this.add(scrollist, BorderLayout.CENTER);
    }
} 
```

在这里，我有一个 JList 并且我已将项目添加到列表中并且它工作正常，但我想在每个项目旁边的 JList 中添加一个图标。例如显示用户的状态，无论是离线还是在线。谁能帮帮我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T19:22:28.823

您需要实现自己的[ListCellRenderer](http://docs.oracle.com/javase/6/docs/api/javax/swing/ListCellRenderer.html)。这将允许您定义每个元素的绘制方式。您还可以参考[此处](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)以获取更多信息和如何实现它的示例。

# html - 用户友好的表单输入，始终总计 100

> ID：11560126
> 
> 赞同：1
> 
> 时间：2012-07-19T03:17:18.153
> 
> 标签：html, jquery, widget

我有一个动态生成的表单，需要从用户那里收集几个总计 100 (%) 的数值。我考虑编写一个脚本/算法来调整几个文本字段的剩余值 - 这样当用户更改一个值时，剩余值会动态变化（因此这些值总是总计 100）。

然而，比起文本字段，我真的更喜欢用户友好的东西，比如在调整一个滑块时移动的滑块或其他一些用户友好的小部件（如总和为 100% 的可调整饼图（？））。

该脚本需要在最新版本的 Firefox、Chrome 和 IE 中运行。我在某处读到 HTML5 滑块在 Firefox 中不起作用。

我对不同的解决方案持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:34:45.777

我没有清楚地了解您的问题，假设您需要一个人会滑动的值滑块，并且该条会自动每次增加 1，因此请尝试使用 jQuery 和 Ajax，将满足您的要求，您可以在[这里](http://www.noupe.com/javascript/30-javascriptajax-techniques-for-sliders-scrollers-and-scrollbars.html)查看一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:44:16.307

滑块在 FireFox 中工作正常 - 试试[http://www.colorpicker.com/](http://www.colorpicker.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:35:22.913

如果您愿意，可以使用[jQuery UI 滑块。](http://jqueryui.com/demos/slider/)`change`您可以在事件上注册自定义功能，轻松调整其他滑块。

所以最后你得到了这样的东西（里面有一些伪代码）：

```
$( "#slider1" ).slider({
   change: function(event, ui) { 
        var i = 100 - value_of_slider1 / number_of_sliders_remaining;
        $("#slider2).setValue(i);
        $("#slider3).setValue(i);
   }
}); 
```

当然，这可以实现得更加复杂。只是给你一个基本的想法。取决于你的标记。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T21:04:18.003

FireFox 中的滑块没有问题。

您可以让各种滑块/输入设备相互计算以通过除法或其他方式获得输出，然后减去最后一个/最小的数字，而不是从总数中除。这样，您的其他计算将准确无误，而最不重要的值可以弥补其余部分。

# windows - 如何在 gnuplot 图表上显示特定值 a(col#,row#)？

> ID：11560130
> 
> 赞同：0
> 
> 时间：2012-07-19T11:43:07.637
> 
> 标签：windows, windows-xp, gnuplot

我意识到 gnuplot 4.6 没有特定的数据点寻址能力，我必须使用脚本来提取给定值并将其存储为变量（例如，从第 4 行的第 7 列中提取一个值）最后，我可以简单地使用`'tail -4 data.out | head -1 | awk '{print $7}'`）。我如何将该值存储/分配为 gnuplot 变量，然后使用`set label 1 sprintf("a = %3.4f",a) at x,y`命令将其显示在图表上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:34:35.230

Gnuplot 理解 backtics 和你的 shell 一样。因此，要获取数据文件中的特定值：

```
a=`tail -4 data.dat | head -1 | awk '{print $7}'`
set label 1 sprintf("a=%3.4f",a) at x,y 
```

# ruby-on-rails - Rails i18n has_one 翻译

> ID：11560131
> 
> 赞同：1
> 
> 时间：2012-07-19T11:43:08.247
> 
> 标签：ruby-on-rails, internationalization

模型：

```
has_one :small_image, :class_name => 'Image', :foreign_key => :sub_category_id, :dependent => :destroy 
```

yml：

```
ua:
  activerecord:
    attributes:
      sub_category:
        top_category_id: "Головна категорія"
        name: "Назва"
        description: "Опис"
        small_image:
          attributes:
            file_name: "Ім’я файлу" 
```

看法：

```
<%= f.fields_for :small_image do |image| %>
      <div class="control-group">
        <%= image.label(:file_name, :class => "control-label") %>
.... 
```

问题：为什么它在浏览器中显示“文件名”而不是“Ім'я файлу”，其余标签都是正确的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:55:34.120

感谢这篇文章：[http ://www.unixgods.org/~tilo/Rails/which_l10n_strings_is_rails_trying_to_lookup.html](http://www.unixgods.org/~tilo/Rails/which_l10n_strings_is_rails_trying_to_lookup.html)

就我而言，标签应该是：

```
ua:
  helpers:
    label:
      sub_category[small_image_attributes]:
        file_name: "Ім’я файлу" 
```

对于错误消息：

```
ua:
  activerecord:
    attributes:
      sub_category:
        top_category_id: "Головна категорія"
        name: "Назва"
        description: "Опис"
      sub_category/small_image:
        file_name: "Ім’я файлу" 
```

# php - 无法使用 Python 读写标准输入/标准输出

> ID：11560134
> 
> 赞同：1
> 
> 时间：2012-07-19T11:43:18.340
> 
> 标签：php, python

我在 MacOS 10.7.4 上使用 Python 2.7。这是一个较长的脚本（不是我写的）的一部分，它本质上为 PHP 提供了一些配置选项，将它们写入 PHP 的标准输入，然后从标准输出中读取它们。

在实践中，我似乎根本无法从标准输出中读取。下面的脚本应该写“hello world”，但它写的只是一个空行。

谁能建议出了什么问题？我不太熟悉 Python 或 PHP 的工作方式`stdin`和`stdout`工作方式，所以我正在努力调试它。

```
php_path = '/usr/bin/php'
args = [php_path]
child = subprocess.Popen(args,
      stdin=subprocess.PIPE,
      stdout=subprocess.PIPE,
      universal_newlines=True)
# Write to PHP stdin
print >>child.stdin, """
<?php
print "hello world\n";
# In reality we'd write some configuration options here,
# but in practice we can't even write 'hello world'. 
}
?>"""
child.stdin.close()
# Read from PHP stdout
line = True
while line:
    print 'line', line
    line = child.stdout.readline()
    print 'line from stdout', line
    if line == "hello world\n":
        break
else:
    raise Exception, "%s: failed to read options" % (php_path) 
```

输出是：

```
line True
line from stdout 

line 

line from stdout Parse error: parse error in - on line 5

line Parse error: parse error in - on line 5

line from stdout 
Traceback (most recent call last):
  File "test.py", line 25, in <module>
    raise Exception, "%s: failed to read options" % (php_path)
Exception: /usr/bin/php: failed to read options 
```

肯定有一个 PHP 在`/usr/bin/php`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:48:42.873

php 脚本末尾似乎有一个额外的大括号，这可能会导致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:48:51.043

你在调试错误的东西。您将该字符串发送到 PHP，然后您会收到一个 PHP 错误。PHP 在第 5 行向我抱怨*解析错误。*

现在 - 是一个特殊的文件名，意思是标准输入，所以它抱怨你发送它的第 5 行，这似乎是一个悬空的`}`.

# forms - 表达式引擎阻止单个成员的其他条目

> ID：11560136
> 
> 赞同：0
> 
> 时间：2012-07-19T11:43:20.327
> 
> 标签：forms, expressionengine, member, safecracker

我有一个安全的破解表格，允许登录的会员提交一个条目（实际上是一个投票）。当他们提交投票时，我想阻止他们再次向该频道提交条目。那可能吗？如果是这样，怎么做？自动设置成员变量或搜索某个字段以查看成员是否已提交或其他内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:56:35.743

你不能把这样的东西包起来吗

```
{exp:channel:entries channel='votes' author_id='{logged_in_member_id}' dynamic='off'}
  {if total_results == 0}
    {!-- allow a new entry --}
  {/if}
{/exp:channel:entries} 
```

围绕你们中的一些或全部投票表格？

# php - 带有 (:any) 重复项的 Codeigniter 2 路由

> ID：11560137
> 
> 赞同：0
> 
> 时间：2012-07-19T11:43:21.413
> 
> 标签：php, routing, duplicates, codeigniter-2

当您只希望第一段有效时，刚刚收到关于 codeigniters 路由的问题。谷歌搜索时似乎找不到一个好的答案。

因此，我的一般页面有一条基本路线：

```
$route['(:any)'] = 'common/pages/view/$1'; 
```

Pages 是类，view 是方法以及作为变量的页面名称（非常像 ci 手册上的示例）。

当我去：

```
www.mysite.com/mypage/ 
```

但是，当我然后去：

```
www.mysite.com/mypage/randomstring/ 
```

这也会加载本质上是重复的 mypage。

他们是否可以告诉任何路线仅适用于第一段，如果存在更多路线，则执行 404？

如果情况变得更糟，我将在方法中添加一个检查以查看第二段是否存在，如果存在则显示_404，但只是好奇它是否可以纯粹在路线中完成。

感谢阅读，我希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:23:02.283

尝试这个：

```
$route['(:any)/(:any)'] = "none_existent_controller";
$route['(:any)'] = "common/pages/view/$1"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:59:55.793

你可以只使用正则表达式吗？

```
$route['([^/]+)'] = 'common/pages/view/$1'; 
```

这将阻止您的域之后的 URL 包含 /，如果包含 /，它将调用默认的 404 页面。

我没有对此进行测试，但它“应该”工作;）

# xml - XSLT 模板匹配和 XPath

> ID：11560140
> 
> 赞同：1
> 
> 时间：2012-07-19T11:43:35.520
> 
> 标签：xml, xslt, xpath

我有 XML 文件：

```
...
    <Chart id="c01">
      <expires>2012-07-19 12:20:00</expires>
      <data><![CDATA[...]]></data>
    </Chart>
... 
```

其中 CDATA 是 B64 编码的 PNG 图像，需要将 XML 转换为 HTML 以查看图像。

为此，我将 XSL 设置为输出文本并转储 CDATA：

```
<xsl:output method="text"/>

<xsl:template match="//data/text()">
  <xsl:value-of select="."/>
</xsl:template> 
```

*在同一个模板中，我包装了基本的 HTML 结构，我在此将其排除在外。*

问题是这样的：如果我在 XML 文件上使用 XPath，我只会得到 CDATA 文本，但使用上面的 XSL，我还会在输出中从 XML 元素中`//data/text()`得到“2012-07-19 12:20:00” 。`<expires>`

我想这是我缺少的一些基本内容，但是为什么还要输出日期以及如何在输出中避免它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:00:33.033

**实现这一目标的最短方法可能是**：

```
 <xsl:template match="*[not(self::data)]/text()"/> 
```

**完整的转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="*[not(self::data)]/text()"/>
</xsl:stylesheet> 
```

**当此转换应用于 XML 文档时**：

```
<t>
    <Chart id="c01">
        <expires>2012-07-19 12:20:00</expires>
        <data><![CDATA[ImageBlob]]></data>
    </Chart>
</t> 
```

**产生了想要的正确结果：**

```
ImageBlob 
```

# asp.net-membership - SqlMembershipProvider.GetPasswordWithFormat 中的错误

> ID：11560141
> 
> 赞同：0
> 
> 时间：2012-07-19T11:43:39.297
> 
> 标签：asp.net-membership

我的 asp.net 登录页面出现以下错误：

```
Unable to cast object of type 'System.Int32' to type 'System.String' 
```

带有堆栈跟踪：

```
at System.Data.SqlClient.SqlBuffer.get_String()     
   at System.Web.Security.SqlMembershipProvider.GetPasswordWithFormat(String username, Boolean updateLastLoginActivityDate, Int32& status, String& password, Int32& passwordFormat, String& passwordSalt, Int32& failedPasswordAttemptCount, Int32& failedPasswordAnswerAttemptCount, Boolean& isApproved, DateTime& lastLoginDate, DateTime& lastActivityDate)     
   at System.Web.Security.SqlMembershipProvider.CheckPassword(String username, String password, Boolean updateLastLoginActivityDate, Boolean failIfNotApproved, String& salt, Int32& passwordFormat)     
   at System.Web.Security.SqlMembershipProvider.ValidateUser(String username, String password)     
   at System.Web.UI.WebControls.Login.AuthenticateUsingMembershipProvider(AuthenticateEventArgs e)     
   at System.Web.UI.WebControls.Login.AttemptLogin()     
   at System.Web.UI.WebControls.Login.OnBubbleEvent(Object source, EventArgs e)     
   at System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args)     
   at System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument)     
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

错误不是每次都发生。

有任何想法吗？

# java - 休眠尝试更新视图

> ID：11560143
> 
> 赞同：1
> 
> 时间：2012-07-19T11:43:40.600
> 
> 标签：java, hibernate

由于复杂的原因，我在我的数据库中定义了一个视图，我希望 hibernate 能够读取这个视图，所以我将它映射为一个常规表。这一切似乎在生产中运行良好。

现在我正在运行一个测试，它正在爆炸。我打开了休眠显示 sql 和 sql 注释，这就是我发现的：

```
Hibernate: /* FROM PostponeDateLimit WHERE postponeDate>=? AND postponeDate <=? AND controlCode = ? ORDER BY postponeDate ASC */ select postponeda0_.REQUEST_DATE as REQUEST1_5_, postponeda0_.COURTLOCATION as COURTLOC2_5_, postponeda0_.ALLOWED as ALLOWED5_, postponeda0_.POSTPONED as POSTPONED5_, postponeda0_.DATECAP as DATECAP5_ from POSTPONE_DATE_VIEW postponeda0_ where postponeda0_.REQUEST_DATE>=? and postponeda0_.REQUEST_DATE<=? and postponeda0_.COURTLOCATION=? order by postponeda0_.REQUEST_DATE ASC    
Hibernate: /* update com.acs.gs.juror.pojo.PostponeDateLimit */ update POSTPONE_DATE_VIEW set ALLOWED=?, POSTPONED=?, DATECAP=? where REQUEST_DATE=? and COURTLOCATION=?    
Hibernate: /* update com.acs.gs.juror.pojo.PostponeDateLimit */ update POSTPONE_DATE_VIEW set ALLOWED=?, POSTPONED=?, DATECAP=? where REQUEST_DATE=? and COURTLOCATION=?    
Hibernate: /* update com.acs.gs.juror.pojo.PostponeDateLimit */ update POSTPONE_DATE_VIEW set ALLOWED=?, POSTPONED=?, DATECAP=? where REQUEST_DATE=? and COURTLOCATION=?    
Hibernate: /* update com.acs.gs.juror.pojo.PostponeDateLimit */ update POSTPONE_DATE_VIEW set ALLOWED=?, POSTPONED=?, DATECAP=? where REQUEST_DATE=? and COURTLOCATION=?    
Hibernate: /* update com.acs.gs.juror.pojo.PostponeDateLimit */ update POSTPONE_DATE_VIEW set ALLOWED=?, POSTPONED=?, DATECAP=? where REQUEST_DATE=? and COURTLOCATION=?    
Hibernate: /* update com.acs.gs.juror.pojo.PostponeDateLimit */ update POSTPONE_DATE_VIEW set ALLOWED=?, POSTPONED=?, DATECAP=? where REQUEST_DATE=? and COURTLOCATION=?    
Hibernate: /* update com.acs.gs.juror.pojo.PostponeDateLimit */ update POSTPONE_DATE_VIEW set ALLOWED=?, POSTPONED=?, DATECAP=? where REQUEST_DATE=? and COURTLOCATION=?    
Hibernate: /* update com.acs.gs.juror.pojo.PostponeDateLimit */ update POSTPONE_DATE_VIEW set ALLOWED=?, POSTPONED=?, DATECAP=? where REQUEST_DATE=? and COURTLOCATION=?    
Hibernate: /* update com.acs.gs.juror.pojo.PostponeDateLimit */ update POSTPONE_DATE_VIEW set ALLOWED=?, POSTPONED=?, DATECAP=? where REQUEST_DATE=? and COURTLOCATION=?
Hibernate: /* update com.acs.gs.juror.pojo.PostponeDateLimit */ update POSTPONE_DATE_VIEW set ALLOWED=?, POSTPONED=?, DATECAP=? where REQUEST_DATE=? and COURTLOCATION=?
2012-07-18 16:07:44,503 35529 WARN  org.hibernate.util.JDBCExceptionReporter | SQL Error: 4406, SQLState: S1000
2012-07-18 16:07:44,503 35529 ERROR org.hibernate.util.JDBCExceptionReporter | Update or insert of view or function 'EJUROR_POSTPONE_DATE_VIEW' failed because it contains a derived or constant field. 
```

所以更新视图会导致异常。

只有第一个查询是由我发起的。由于某些奇怪的原因，这些更新似乎是由休眠创建的。我一生都无法弄清楚为什么以及为什么它在我的本地测试盒上而不是在我们的现场盒上这样做。

这是我的休眠映射：

```
<class name="com.pojo.PostponeDateLimit" table="POSTPONE_DATE_VIEW">
    <composite-id class="com.acs.gs.juror.pojo.PostponeDateLimitKey" mapped="true">
        <key-property name="postponeDate" type="calendar" column="REQUEST_DATE"/>
        <key-property name="controlCode" column="COURTLOCATION"/>
    </composite-id>
    <property name="maxCount" column="ALLOWED"/>
    <property name="postponedCount" column="POSTPONED"/>
    <property name="dateCap" column="DATECAP"/>
</class> 
```

有没有人有洞察力？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:56:22.573

[您可以根据Hibernate 文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch12.html#readonly-api)将实体设为只读

在这种情况下，最好使 com.pojo.PostponeDateLimit 类不可变。这也将捕获任何试图更改数据的代码 - 我怀疑这是正在发生的事情而不是 Hibernate 做某事

# php - 多重条件语句

> ID：11560144
> 
> 赞同：0
> 
> 时间：2012-07-19T11:43:46.080
> 
> 标签：php, conditional-operator

用 PHP 编写它的最佳方法是什么，所以我知道哪个条件失败并且易于维护？无需诉诸多个 if else 语句...

```
if ((!$titleBlockPresent || !$leadBlock || ($allDoubleBlockCount !=2 || $allDoubleBlockCount!=1) ||$countFirstSmallShowBlocks !=2 ||$countSecondSmallShowBlocks !=2 ) && !$contentNotAvailableMessage)
{
    $this->fail("Block missing in the horizontal list of blocks on the non live carousel");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:54:38.803

试试这个

```
$shouldFail = FALSE;
switch(TRUE){
 case !titleBlockPresent:
    echo "No title block present<br/>";
    $shouldFail = TRUE;
 case !$leadBlock:
    echo "No lead block<br/>";

  // the rest of the code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:50:25.390

如果您将该检查移到该函数中，那么您和其他任何查看您的代码的人都会很清楚，并且非常易于维护，例如：

```
function tester($var1, $var2, $var3)
{
    if (!$var1) 
    {
        $this->fail("error1");
        return FALSE;
    }
    if (!$var2) 
    {
        $this->fail("error2");
        return FALSE;
    }
    if (!$var3) 
    {
        $this->fail("error3");
        return FALSE;
    }
    return TRUE;
} 
```

您还可以为每个`if`需要进一步澄清的评论添加评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:03:24.843

我只是想出了这个，但注意到它与 GeoPhoenix 的答案非常相似，相反，可能也值得一试：

```
$bFail = false;

if(!$bFail && $contentNotAvailableMessage) $bFail = true;
if(!$bFail && !$titleBlockPresent ) $bFail = true;
if(!$bFail && !$leadBlock ) $bFail = true;

if(!$bFail && $allDoubleBlockCount != 2) $bFail = true;
if(!$bFail && $allDoubleBlockCount != 1) $bFail = true;
if(!$bFail && $countFirstSmallShowBlocks != 2) $bFail = true;
if(!$bFail && $countSecondSmallShowBlocks != 2) $bFail = true;

if($bFail) $this->fail("Block missing in the horizontal list of blocks on the non live carousel"); 
```

# qt - 在 gdb 中打印 QUrl 的值

> ID：11560145
> 
> 赞同：2
> 
> 时间：2012-07-19T11:43:54.237
> 
> 标签：qt, gdb, qstring

我想查找 QUrl 类型的值。QUrl 有一个 toString 方法，它返回一个 QString。使用这样的东西应该会产生预期的结果

```
printq4string urlvar.toString() 
```

如何在 gdb 中打印 QString 的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:26:34.390

Qt 类型有 GDB 漂亮的打印机：http: [//nikosams.blogspot.ru/2009/10/gdb-qt-pretty-printers.html](http://nikosams.blogspot.ru/2009/10/gdb-qt-pretty-printers.html)

# spring - Spring JDBC 框架条件准备语句

> ID：11560146
> 
> 赞同：0
> 
> 时间：2012-07-19T11:44:02.653
> 
> 标签：spring, jdbc, conditional-statements

```
public ResultSet getAdCampaignDetailsbyName(ADCampaignDetails Obj,
            Connection conn, ResultSet rs, PreparedStatement pstmt) throws SQLException {

        String query = "select adCampaignName,adCampaignId from AdCampaignDetails";
        query += " where 1=1 ";

        if (Obj.getAdCamapignName() != null)
            query += " and adCampaignName = ?";
        if (Obj.userId != "")
            query += " and userId = ?";

        pstmt = conn.prepareStatement(query);

        int i = 0;

        if (Obj.getAdCamapignName() != null)
            pstmt.setString(++i, Obj.getAdCamapignName());
        if (Obj.userId != "")
            pstmt.setString(++i, Obj.userId);

        System.out.println(" Q : " + query);

        rs = pstmt.executeQuery();

        return rs;
    } 
```

我是 Spring 新手，在上面的查询中，我使用了两个条件，如何在 Spring JDBC 框架中使用条件执行查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:49:34.700

您可以使用[SimpleJDBCTemplate](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jdbc/core/simple/SimpleJdbcTemplate.html)。

```
 // SQL query
    String query = "select adCampaignName,adCampaignId from AdCampaignDetails where 1=1";

    // Map with parameter value
    Map<String, Object> parameters = new HashMap<String, Object>();
    if (adCampaignName!=null){
        parameters.put("adCampaignName ", adCampaignName );
        query += " AND adCampaignName = :adCampaignName"; 
    }
    if (userId!=null){
        parameters.put("userId", 1);
        query += " AND userId= :userId"; 
    }

    // Execute query using simpleJDBC Template
    List<AdCampaignDetails> resultList = getSimpleJdbcTemplate().query(query, new customRowMapper(), parameters); 
```

您可以相应地构建查询字符串，只需在地图中添加相应的条目。
检查此[链接](http://www.mkyong.com/spring/spring-simplejdbctemplate-querying-examples/)以获取详细信息。

# sql - 在 postgreSQL 正则表达式文本中允许括号

> ID：11560148
> 
> 赞同：1
> 
> 时间：2012-07-19T11:44:04.947
> 
> 标签：sql, regex, postgresql

这些句子有效

```
SELECT (regexp_matches('Euroschinus Hoff+300'::text, E'(Euroschinus Hoff[\+])([0- 9]+)'::text)::text[])[1]::text as counter 
select array_scientificname from simple_cal where array_scientificname ~ 'Semecarpus' 
```

但是，如果有一些括号，不管在文本中的哪个位置，两者都不起作用

```
SELECT (regexp_matches('Euroschinus (testing) Hoff+300'::text, E'(Euroschinus (testing)  Hoff[\+])([0-9]+)'::text)::text[])[1]::text as counter 
select array_scientificname from simple_cal where array_scientificname ~  'Semecarpus(test)' 
```

我只想得到，文本。() 没有定义的模式，可以在文本的任何地方。

我注意到在括号之前使用 \ 它可以解决问题（见下文），但这根本不实用。我想我应该在字符串中包含允许 () 的地方......

```
SELECT (regexp_matches('Euroschinus (testing) Hoff+300'::text, E'(Euroschinus jaffrei \\(testing\\) Hoff[\+])([0-9]+)'::text)::text[])[1]::text as counter 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:30:27.253

这不会返回任何东西：

```
SELECT (regexp_matches(
         'Euroschinus (testing) Hoff+300'::text
     , E'(Euroschinus jaffrei \\(testing\\) Hoff[\\+])([0-9]+)')::text[])[1]::text; 
```

从模式中删除字符串后，这将`jaffrei`：

```
SELECT (regexp_matches(
         'Euroschinus (testing) Hoff+300'::text
     , E'(Euroschinus \\(testing\\) Hoff[\\+])([0-9]+)')::text[]);[1]::text 
```

简化正则表达式，松开无意义的字符类：

```
SELECT (regexp_matches(
         'Euroschinus (testing) Hoff+300'::text
     , E'(Euroschinus \\(testing\\) Hoff\\+)([0-9]+)')::text[])[1]::text; 
```

如果您对必须添加反斜杠感到困扰，请尝试设置[`standard_conforming_strings`](http://www.postgresql.org/docs/9.1/static/runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS)（自 PostgreSQL 9.1 起默认）并使用纯字符串而不是 Posix 转义序列：

```
SELECT (regexp_matches(
         'Euroschinus (testing) Hoff+300'::text
     , '(Euroschinus \(testing\) Hoff\+)([0-9]+)')::text[])[1]::text; 
```

但如果你只对第一次点击感兴趣，你宁愿使用`substring()`开始。捕获括号选择您想要的字符串：

```
SELECT substring('Euroschinus (testing) Hoff+300'
              , '(Euroschinus \(testing\) Hoff\+)[0-9]+'); 
```

`()`最后，如果您对 string 中的存在感到困扰`(??)`，请删除它们：

```
SELECT substring(translate('Euroschinus (testing) Hoff+300', '()', '')
                        , '(Euroschinus testing Hoff\+)[0-9]+'); 
```

# javascript - javascript jQuery 获取对象键

> ID：11560152
> 
> 赞同：1
> 
> 时间：2012-07-19T11:44:14.143
> 
> 标签：javascript, jquery

我有以下代码：

```
!function($){

    $.keys = {
        backspace: 8,
        tab: 9,
        enter: 13,
        escape: 27,
        space: 32,
        pageUp: 33,
        pageDown: 34,
        end: 35,
        home: 36,
        left: 37,
        up: 38,
        right: 39,
        down: 40,
        delete: 46,
        numpadEnter: 108,
        comma: 188
    };

}(window.jQuery); 
```

我想构建一个返回关键代码字符串的函数，例如：

```
$.keys.toString = function(key){
  switch(key){
    case $.keys.backspace:
      return 'backspace';
  }
}; 
```

该列表当然会更大，并且支持 $.keys 对象的所有键。但是是否有可能 $.keys.toString 函数实际上使用 $.keys 数组将 int 转换为字符串，所以我不必进行 switch 语句。

getKeyFromObjectValue 之类的东西？

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T11:47:05.913

由于键列表是恒定的，您可以通过迭代和反转来简单地创建另一个列表：

```
$.keysReversed = {};
$.each($.keys, function(key, value) {
  $.keysReversed[value] = key;  // value as key, key as value
}); 
```

现在，`$.keysReversed`包含数字/名称对。这比每次打电话都变魔术要快`.toString`——你可以直接返回`$.keysReversed[key]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:55:39.477

```
$.keys.toString = function(key){
    $.each($.keys, function(key, value){
        if(value === key){
            return key;
        }
    });
}; 
```

感谢帮助 ：）

# facebook - 我可以做些什么来链接我在 Facebook 和我的网站中的照片评论？

> ID：11560154
> 
> 赞同：0
> 
> 时间：2012-07-16T05:42:56.853
> 
> 标签：facebook, facebook-sharer, data-synchronization

现在我正计划再次重建我的网站。但我想让它同步我在 facebook/我的网站上发布的内容。我想要的是当我将照片发布到我的网站时，我希望它直接同步到我的 Facebook，而没有 Facebook 分享功能，我可以这样做吗？由于可以评论照片，如果有人在我的 facebook 上评论了我的照片，我希望我网站上该照片的评论也更新。我可以这样做吗？我该怎么做？我也可以反过来吗？当我网站上的照片被评论时，我想在我的 Facebook 上也更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:09:40.220

如果您想在 Facebook 上分享您网站的更新照片，那么您只需在 Facebook 上发布图片并将状态设为我网站的新图片或徽标。根据我的观点，您不应该只上传一张照片，而是必须分享网站链接，该链接将自动包含您网站上的照片，也有助于增加流量。这是分享您更新的网站的简单方法。

# mysql - 为什么从左连接视图创建视图并不快？

> ID：11560159
> 
> 赞同：0
> 
> 时间：2012-07-19T11:44:42.523
> 
> 标签：mysql, phpmyadmin

我在表上创建了视图，每个表有大约 46299 行我在 phpMyadmin 中成功创建了它们，之后我创建了这两个视图的连接，它本身就是一个视图。在 mysql 中在一毫秒内我得到了`Query OK, 0 rows affected (0.01 sec)` 但我无法访问我的 phpMyAdmin 所以我决定在 mysql 中**删除**视图它需要大约 20 分钟才能再次删除我尝试了我的方式现在我无法访问 phpMyadmin 我不知道是否正在处理中？！我应该等多久？以及为什么 mysql 向我显示快速查询正常但 phpmyAdmin 仍在处理，如果它真的在处理中

```
+-----+------+-----------------+-------+---------+------+--------------+--------
------------------------------------+
| Id  | User | Host            | db    | Command | Time | State        | Info
                                    |
+-----+------+-----------------+-------+---------+------+--------------+--------
------------------------------------+
|   7 | root | localhost:38993 | week1 | Sleep   | 2188 |              | NULL
                                    |
|  20 | root | localhost:39223 | week1 | Query   |    0 | NULL         | SHOW PR
OCESSLIST                           |
| 104 | root | localhost:39526 | NULL  | Query   |  800 | Sending data | SELECT
1 FROM `week1`.`alarm` LIMIT 100000 |
| 105 | root | localhost:39527 | week1 | Query   |  800 | Sending data | SELECT
1 FROM `week1`.`alarm` LIMIT 100000 |
+-----+------+-----------------+-------+---------+------+--------------+--------
------------------------------------+
4 rows in set (0.00 sec)

mysql> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:47:49.690

您可以通过发出[`SHOW PROCESSLIST`](http://dev.mysql.com/doc/refman/5.5/en/show-processlist.html)命令查看是否有东西锁定了表。

# php - PHP preg_match，通知用户哪个字符是不允许的

> ID：11560162
> 
> 赞同：0
> 
> 时间：2012-07-19T11:44:54.510
> 
> 标签：php, regex, utf-8

我想告知用户哪些字符不符合正则表达式。但是当我尝试将它打印到屏幕上时，它呈现为一个带有问号的三角形。

这是我的代码...

```
$matches = array();
$pattern = '"[^@?0¡Pp£_!1AQaq\$F\"2RBbr3¥G#\s\.\,\:\'3CScsè?¤4DTdtéO%5EUeuù?&6FVfvì?7GWgwòS\(8HXhxÇT\)9IYiy?\*:JZjzØ\+\;KÄkäøÆ\,\<LÖlöæ\-\=MÑmñÅ\.\>NÜnüåÉ\/\?O§oà\{\}]"';
$text = "Flight Vol {FN} vol est retardé d'au moins 1 heure, s'il vous plaît consulter les écrans de l'aéroport pour les mises à jour. Service à la clientèle de AIRLINE";  

if(preg_match($pattern, $text, $matches)){

    $output =  '<p>This Text contains invalid character(s) ';
    $output .= '<span style="color:#000; border-bottom:1px dashed #F33; padding:0px 5px 0px 5px; "><strong>'.implode(" ",$matches).'</strong></span>';
    $output .= ' is not allowed.</p>';
    $output .= "<p><strong>".$text."</strong></p><br />";
    print $output;
} 
```

我认为这与拉丁编码或 UTF-8 有关，但我在站点的其余部分使用 UTF-8。在 $matches 数组中呈现字符的最佳方法是什么，以便用户可以更正他们的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:03:44.280

使用 UTF-8 正则表达式修饰符：

```
/.../u 
```

# azure - 网站与新 Azure 门户中的 webrole 应用程序有何不同

> ID：11560163
> 
> 赞同：1
> 
> 时间：2012-07-19T11:44:59.230
> 
> 标签：azure, azure-web-roles, azure-web-app-service

我已经使用了 Window Azure 的新门户，以及名为网站的新功能，该功能用于 Azure 数据中心共享 VM 上的小型 Web 应用程序。

**我想知道除了部署之外它与 webrole 应用程序有何不同？**（在网站我们不需要添加云项目。我已经用 Git 试过了。）

**在 Webrole 应用程序中，我在 .csdef 和.cscfg**文件中进行了一些启动任务配置和一些自定义应用程序设置。

**是否可以在 Azure 网站中添加启动任务和其他自定义配置设置？如果是，那怎么办？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T12:05:58.660

您可能会发现这篇博文很有用： http: [//davidpallmann.blogspot.in/2012/07/windows-azure-is-3-lane-highway-how-to.html](http://davidpallmann.blogspot.in/2012/07/windows-azure-is-3-lane-highway-how-to.html)

简而言之，将 Windows Azure 网站视为共享主机的等价物。你没有太多的自由和灵活性。Windows Azure 云服务（Web 角色/工作者角色）是 Windows Azure PaaS 产品，为您提供更多控制权，同时仍然不必担心管理虚拟机，但是您需要遵守 Windows Azure 设置的规则（即以某种方式部署应用程序） ）。然后是 Windows Azure 虚拟机，它是 Windows Azure IaaS 产品，可为您提供最大的灵活性，但管理虚拟机的责任是您的。

要回答您的问题，您不能使用 Azure 网站添加启动任务，因为您没有对 VM 的独占访问权限。为此，您需要走 PaaS 或 IaaS 路线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T19:07:03.600

上面您有大量信息可以了解有关 Windows Azure 网站的更多信息。关于 Windows Azure 网站和 Web 角色比较，我想补充的一件事是，Windows Azure 网站在作为 Web 应用程序方面可能与 Web 角色一样强大，但是你在控制基础设施方面非常有限Web 角色或 Windows Azure VM。如果您不想专注于此，那么 Windows Azure 网站是您可以在应用程序中整合全部能量的最佳选择。

您可以在保留模式下构建完整的 Windows Azure 网站（保留模式让您的应用程序在 1/2/4 核心的专用 VM 中运行），并且通过多个实例，您的网站将变得非常强大。对于网站，您只需使用 git（或任何其他可用方法）进行应用程序部署，更新将立即可用。因此，总体而言，与 web/worker 角色相比，您的开发/部署周期开销较小，但您仅限于您可以做的事情。

使用网站，您可以直接从端口配置监控并配置有限监控，如下所示： ![在此处输入图像描述](../Images/2dd46d0282f61dca765841b09f9bb3f2.png)

配置监控后，您可以在门户上实时查看监控，也可以通过 FTP 访问 LogFiles 文件夹直接收集日志，如预览门户中所示。

因此，您无法直接从 VM 中挖掘出很多关于诊断的信息。此外，如果您有保留实例，您可以在您的 ASP.NET 应用程序中编写一些代码，以直接在您的 Web 应用程序中写入一些系统特定的详细信息（如果适用）。

# websphere-7 - 在 Websphere 7 中解析 ddm 文件 DOMParser 时出现 java.lang.LinkegeError

> ID：11560166
> 
> 赞同：1
> 
> 时间：2012-07-19T11:45:02.837
> 
> 标签：websphere-7, domparser, ibm-jdk

我正在使用 websphere 7\. 来部署我的应用程序。部署时需要解析 *.ddm 文件来读取属性。我们正在使用 DOMParser 来解析文件。以下是代码。同样工作正常的是Tomcat。

```
InputStream iStream = new BufferedInputStream(new FileInputStream(file));
InputSource iSource = new InputSource(iStream );
DOMParser.parse(iSource); 
```

得到以下异常。

```
[7/19/12 12:42:00:218 IST] 00000022 SystemErr     R Caused by: java.lang.LinkageError:     loading constraint violation: loader "com/ibm/ws/classloader /CompoundClassLoader@2de92de9" previously initiated loading for a different type with name  "org/apache/xml/resolver/helpers/Debug" defined by loader "org/eclipse/osgi/internal/baseadaptor/DefaultClassLoader@602c602c"
[7/19/12 12:42:00:218 IST] 00000022 SystemErr     R     at java.lang.ClassLoader.defineClassImpl(Native Method)
[7/19/12 12:42:00:218 IST] 00000022 SystemErr     R     at java.lang.ClassLoader.defineClass(ClassLoader.java:274)
[7/19/12 12:42:00:218 IST] 00000022 SystemErr     R     at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:69)
[7/19/12 12:42:00:218 IST] 00000022 SystemErr     R     at com.ibm.ws.classloader.CompoundClassLoader._defineClass(CompoundClassLoader.java:768)
[7/19/12 12:42:00:218 IST] 00000022 SystemErr     R     at com.ibm.ws.classloader.CompoundClassLoader.localFindClass(CompoundClassLoader.java:687)
[7/19/12 12:42:00:218 IST] 00000022 SystemErr     R     at com.ibm.ws.classloader.CompoundClassLoader.loadClass(CompoundClassLoader.java:510)
[7/19/12 12:42:00:218 IST] 00000022 SystemErr     R     at java.lang.ClassLoader.loadClass(ClassLoader.java:618)
[7/19/12 12:42:00:218 IST] 00000022 SystemErr     R     at org.apache.xml.resolver.tools.CatalogResolver.getResolvedEntity(Unknown Source)
[7/19/12 12:42:00:218 IST] 00000022 SystemErr     R     at org.apache.xml.resolver.tools.CatalogResolver.resolveEntity(Unknown Source)
[7/19/12 12:42:00:218 IST] 00000022 SystemErr     R     at org.apache.xerces.util.EntityResolverWrapper.resolveEntity(Unknown Source)
[7/19/12 12:42:00:218 IST] 00000022 SystemErr     R     at org.apache.xerces.impl.XMLEntityManager.resolveEntity(Unknown Source)
[7/19/12 12:42:00:218 IST] 00000022 SystemErr     R     at org.apache.xerces.impl.XMLDocumentScannerImpl$DTDDispatcher.dispatch(Unknown Source)
[7/19/12 12:42:00:218 IST] 00000022 SystemErr     R     at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
[7/19/12 12:42:00:218 IST] 00000022 SystemErr     R     at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
[7/19/12 12:42:00:218 IST] 00000022 SystemErr     R     at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
[7/19/12 12:42:00:218 IST] 00000022 SystemErr     R     at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
[7/19/12 12:42:00:218 IST] 00000022 SystemErr     R     at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
[7/19/12 12:42:00:218 IST] 00000022 SystemErr     R     at 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:21:41.293

问题正在通过在 WAS 中创建共享参考库得到解决。

为内容管理创建共享库

1.  启动 WebSphere 集成解决方案控制台。

    有关控制台的更多信息，请参阅 WebSphere 文档。

2.  展开应用程序-> 应用程序类型，然后单击 WebSphere 企业应用程序。

3.  在企业应用程序窗口中，选择内容管理应用程序名称。

4.  在配置页面上，单击共享库引用。

5.  在共享库引用窗格中，选择 Content Management 应用程序，然后单击引用共享库。

6 单击新建。

1.  在 Configuration 页面上，将 Name 框中的名称更改为 jars

2.  在 Classpath 框中，添加这三行，将路径更改为您提取 WAR 文件的位置。

注意：这些文件中的每一个都必须在单独的行中输入。

D:\Temp\org.eclipse.osgi_3.3.2.R33x_v20080105.jar D:\Temp\org.apache.xml.resolver_1.1.jar D:\Temp\resource

1.  选中类加载复选框。

2.  单击应用。

3.  单击保存链接以更新主配置。

4.  在共享库引用页面中，选择部署的应用程序，然后单击引用共享库。

5.  在共享库映射页面中，您创建的共享库出现在可用列表中。使用箭头按钮将其移动到选定列表，然后单击确定。

6.  在共享库引用页面中，选择DocCenterServer模块，然后单击引用共享库。

7.  在共享库映射页面中，您创建的共享库出现在可用列表中。使用箭头按钮将其移动到选定列表，然后单击确定。

8.  单击保存链接以更新主配置。

9.  重新启动部署的应用程序以应用更改：

10.  在 Enterprise Application 窗口中，选择 WAR 文件并单击 Start。

11.  启动应用程序后，“应用程序状态”列中会出现一个绿色箭头。

# django - Django 管理员：使用“editable=False”编辑模型字段

> ID：11560169
> 
> 赞同：5
> 
> 时间：2012-07-19T11:45:12.653
> 
> 标签：django, django-forms, django-admin

我希望管理员能够编辑普通用户无法编辑的字段。例如作者或订阅者等。

我试过这个：[Django admin：如何在模型中显示一个标记为 editable=False' 的字段？](https://stackoverflow.com/questions/3967644/django-admin-how-to-display-a-field-that-is-marked-as-editable-false-in-the-mo)

（答案中给出的可编辑部分）

但是该字段仍然无法出现在管理页面上。

供参考，这里有一些信息：

```
#models.py
class MyModel(models.Model):
    myfield = models.ManyToManyField(User, blank=True, editable=False)

#admin.py
class MyModelAdminForm(forms.ModelForm):
    myfield = models.ManyToManyField(User, blank=True, editable=True)

    class Meta(object):
        model = MyModel

class MyModelAdmin(admin.ModelAdmin):
    form = MyModelAdminForm

admin.site.register(MyModel, MyModelAdmin) 
```

如果我将模型更改为状态 editable=True ，那么我会在管理页面上看到该字段。（如预期）

我正在使用 Django 1.3、Python 2.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-23T11:22:42.630

您应该通过权限来处理这个用例：只有拥有模型更改权限的用户才能真正更改它。这些权限默认存在于 Django 中。您只需要在显示表单之前检查它们。

它们还可以用于更细粒度的控制，例如仅显示某些字段。但是这个逻辑必须由你在你的视图和模板中实现。

看看：[https ://docs.djangoproject.com/en/1.11/topics/auth/default/#default-permissions](https://docs.djangoproject.com/en/1.11/topics/auth/default/#default-permissions)

如果您仍需要编辑不可编辑的字段，请查看：[https ://stackoverflow.com/a/44720169/621690](https://stackoverflow.com/a/44720169/621690)

# java - 如何使用 Java 读取 Xml 属性？

> ID：11560173
> 
> 赞同：2
> 
> 时间：2012-07-19T11:45:28.530
> 
> 标签：java, xml

给定一个如下所示的 xml 文档：

```
 <?xml version="1.0"?>
     <xml_api_reply version="1">
      <weather section="0" row="0" mobile_zipped="1" mobile_row="0"     tab_id="0" module_id="0">
        <forecast_information>
            <city data="Cordova, Andalusia"/>
            <postal_code data="cordoba"/>
            <latitude_e6 data=""/>
            <longitude_e6 data=""/>
            <forecast_date data="2012-07-18"/>
            <current_date_time data="1970-01-01 00:00:00 +0000"/>
            <unit_system data="SI"/>
         </forecast_information> 
```

我想在 的帮助下显示**城市数据**、**邮政编码**和**日期**属性`System.out.println()`。

任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T21:02:41.280

我有解决办法。我从未在此博客或任何其他博客中看到过此解决方案。我希望它对其他人有用。

```
package Main;

import java.io.File;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;
import org.w3c.dom.Document;

public class XmlTest
{

    public static void main(String argv[]) 
    {

        try 
        {
            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
            Document doc = dBuilder.parse(new File("xmlPrueba.xml"));
            doc.getDocumentElement().normalize();

            System.out.println("City: " +
                    documento.getDocumentElement().getChildNodes().item(0).getFirstChild().getChildNodes().item(0).getAttributes().getNamedItem("data").getNodeValue());

            System.out.println("Postal Code: " +
                    documento.getDocumentElement().getChildNodes().item(0).getFirstChild().getChildNodes().item(1).getAttributes().getNamedItem("data").getNodeValue());

            System.out.println("Date: " +
                    documento.getDocumentElement().getChildNodes().item(0).getFirstChild().getChildNodes().item(4).getAttributes().getNamedItem("data").getNodeValue());

        } catch (Exception e) 
        {
            e.printStackTrace();
        }

    }
} 
```

或者更容易......

```
 System.out.println("City: " +
                doc.getDocumentElement().getElementsByTagName("forecast_information").item(0).getChildNodes().item(0).getAttributes().getNamedItem("data").getNodeValue());

            System.out.println("Postal Code: " +
                doc.getDocumentElement().getElementsByTagName("forecast_information").item(0).getChildNodes().item(1).getAttributes().getNamedItem("data").getNodeValue());

            System.out.println("Date: " +
                doc.getDocumentElement().getElementsByTagName("forecast_information").item(0).getChildNodes().item(4).getAttributes().getNamedItem("data").getNodeValue());

..... 
```

谢谢您的帮助！！！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-12T23:29:38.007

只需稍微清理一下类型声明，基本的空检查：

从 'dom' 值中的任何节点开始

```
NodeList l = dom.getElementsByTagName("tagname");

for (int j=0; j<l.getLength(); ++j) {
    Node prop = l.item(j);
    NamedNodeMap attr = prop.getAttributes();
    if (null != attr) {
        Node p = attr.getNamedItem("data");
        log.debug(p.getNodeValue());
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T11:49:19.507

Java 有几个用于 XML 解析的特性[——SAX](http://en.wikipedia.org/wiki/Simple_API_for_XML)、[StAX](http://en.wikipedia.org/wiki/StAX)和[DOM](http://en.wikipedia.org/wiki/Java_API_for_XML_Processing#DOM_interface) API。**DOM** API 对初学者来说是最舒服的。看看[这个不错的教程](http://tutorials.jenkov.com/java-xml/dom.html)。

我必须在 XSLT 上反驳 Thom。虽然是一个强大的 API，但它相当复杂，可能会让初学者感到害怕和沮丧。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T12:16:34.867

DOM 和 SAX 都是低级 API，很难使用它们。这个问题是关于

Java中的XML解析

所以这可以通过 SAX 和 DOM 来实现，但是使用[Apache Digester](http://commons.apache.org/digester/)会更容易。这也称为[数据绑定](http://en.wikipedia.org/wiki/XML_data_binding)。

希望这会帮助你。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T11:49:37.090

你应该看看这个：

JDOM：[http ://www.javaworld.com/jw-05-2000/jw-0518-jdom.html](http://www.javaworld.com/jw-05-2000/jw-0518-jdom.html)

和

SAX：[http ://en.wikipedia.org/wiki/Simple_API_for_XML](http://en.wikipedia.org/wiki/Simple_API_for_XML)

Java XML 的简单解析器

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T11:48:16.200

查找 XSLT。我从未使用过它，但它可以格式化 XML 文档。

# php - 从html页面中提取描述

> ID：11560177
> 
> 赞同：0
> 
> 时间：2012-07-19T11:45:42.070
> 
> 标签：php, dom, domdocument, html-content-extraction

我正在尝试使用 DOMdocument() 从网页中提取标题和描述，我成功地提取了这样的标题

```
$d=new DOMDocument();
$d->loadHTML($html);
$title=$d->getElementsByTagName("title")->item(0)->textContent; 
```

我可以通过遍历所有内容`meta tags`并检查`name="desctiption"`属性来提取描述，但是循环会使过程变慢所以想知道是否可以使用php DOMdocument中的某些属性选择器来提取内容的直接方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:09:00.787

使用 php 的[get_meta_tags()](http://php.net/manual/en/function.get-meta-tags.php)函数。

你可以这样做：

```
$d=new DOMDocument();
$d->loadHTML($html);
$title=$d->getElementsByTagName("title")->item(0)->textContent;
$meta = get_meta_tags($html);
$description = $meta["description"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:13:43.450

我认为这不能单独使用 DOMDocument 来完成，但可以与 DOMXPath 结合使用：

```
$html = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Dom - Xpath test</title>
<meta name="description" content="The first description meta tag" />
<meta name="keywords" content="none, no-keywords" />
<meta name="description" content="the second description tag" />
</head>
<body>
<p>This is the test HTML</p>
</body>
</html>
';

$dom = new DOMDocument();
$dom->loadHTML($html);
$domx = new DOMXPath($dom);
$desc = $domx->query("//meta[@name='description']");

$i = 0;
while ($item = $desc->item($i++)) {
    echo '<p>'.$item->getAttribute('content').'</p>';
} 
```

# android - 滚动视图不在 viewpager 中刷新

> ID：11560182
> 
> 赞同：0
> 
> 时间：2012-07-19T11:46:08.877
> 
> 标签：android, scrollview, page-refresh, viewpage

我有一个 PagerAdapter，它包括一个 10 元素数组。

```
private Object[] pageViewerList; 
```

我填充它 ArrayList

```
ArrayList<View> array = new ArrayList<View>();
pageViewerList[y] = new ArrayList<View>(); 
```

每个页面都包含一个滚动视图。滚动视图包括一个线性布局。线性布局包含许多不同的元素，它们的引用存储在前面提到的 ArrayList 中。

```
@Override
    public void startUpdate(ViewGroup arg0) {
        Log.v(Constans.TAG, "currentCikkElementsPosition: "+FMFramework.currentCikkElementsPosition);

        ArrayList<View> viewList = (ArrayList<View>) pageViewerList[FMFramework.currentCikkElementsPosition];
        if (viewList!=null){
            setFontSizeAndColor(viewList);
        }
    }

private void setFontSizeAndColor(ArrayList<View> viewList){
        double rate = 1.5;
        if (Constans.READ_MODE_DAY.equals(readMode)){
            for (int i = 0; i < viewList.size(); i++) {
                if (viewList.get(i).getTag().equals(TAG_TITLE)){((TextView)viewList.get(i)).setTextColor(Color.BLACK);((TextView)viewList.get(i)).setTextSize((int)(rate*CIKK_CIM_TEXT_SIZE));continue;}
                if (viewList.get(i).getTag().equals(TAG_LEAD)){((TextView)viewList.get(i)).setTextColor(Color.BLACK);((TextView)viewList.get(i)).setTextSize((int)(rate*CIKK_LEAD_TEXT_SIZE));continue;}
                if (viewList.get(i).getTag().equals(TAG_DATE)){((TextView)viewList.get(i)).setTextSize((int)(rate*CIKK_DATUM_TEXT_SIZE));continue;}
            }
        } else {
            for (int i = 0; i < viewList.size(); i++) {
                if (viewList.get(i).getTag().equals(TAG_TITLE)){((TextView)viewList.get(i)).setTextColor(Color.WHITE);((TextView)viewList.get(i)).setTextSize((int)(rate*CIKK_CIM_TEXT_SIZE));continue;}
                if (viewList.get(i).getTag().equals(TAG_LEAD)){((TextView)viewList.get(i)).setTextColor(Color.WHITE);((TextView)viewList.get(i)).setTextSize((int)(rate*CIKK_LEAD_TEXT_SIZE));continue;}

            }
        }
    } 
```

当我更改视图背景（在 LinearLayout 中）时，屏幕正在刷新，因为我使用了 startUpdate PagerAdapter 方法。

但只有第一个和最后一个滚动视图。如果我向适配器调用 notifyDataSetChanged() 方法，当我停留在中间页面时，刷新不工作。但是，如果我滚动顶部或底部刷新完成。当我调用 notifyDataSetChanged() 时，为什么不立即刷新屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:03:08.980

我忘记了一件事。我使用自己的滚动视图：

```
public class LimitScrollView extends ScrollView{

    Context mContext;
    private ImageView bottonImage;
    private ImageView topImage;

    public LimitScrollView(Context context, AttributeSet attrs) {
        super(context,attrs);
        this.mContext = context;
    }

    @Override
    protected void onScrollChanged(int l, int t, int oldl, int oldt) {
        View view = (View) getChildAt(getChildCount()-1);

        int diff = (view.getBottom()-(getHeight()+getScrollY()));

        if( diff == 0 ){
            bottonImage.setVisibility(ImageView.GONE);
        } else {
            bottonImage.setVisibility(ImageView.VISIBLE);
        }
        if( getScrollY() == 0 ){
            topImage.setVisibility(ImageView.GONE);
        } else {
            topImage.setVisibility(ImageView.VISIBLE);
        }

    super.onScrollChanged(l, t, oldl, oldt);
    }

} 
```

# java - 在管理应用程序中禁用强制停止按钮

> ID：11560185
> 
> 赞同：3
> 
> 时间：2012-07-19T11:46:22.103
> 
> 标签：java, android, forceclose

我正在尝试禁用 Android 设置中管理应用程序页面中的强制停止按钮。某些应用程序即使在其服务处于运行状态时也能够做到这一点，强制停止按钮进入禁用状态。请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-30T12:24:05.587

I am finding since last 1 week and finally I found that how to disable the Force Stop button.

You should apply Device Administrator Policy to your application. Below url will help you.

[http://prashantandroid.blogspot.in/2013/07/disable-force-stop-in-manage.html](http://prashantandroid.blogspot.in/2013/07/disable-force-stop-in-manage.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T12:00:19.990

> 我正在尝试禁用 Android 设置中管理应用程序页面中的强制停止按钮。

幸运的是，出于明显的安全原因，这对于普通的 SDK 应用程序是不可能的。

> 某些应用程序即使在其服务处于运行状态时也能够做到这一点，强制停止按钮处于禁用状态

我相信一些系统应用程序可以做到这一点。欢迎您制作自己的自定义 ROM，并尝试防止您的应用程序被强制停止。

# timer - 哪个 CPU 增加 SMP 中的 jiffies？

> ID：11560189
> 
> 赞同：5
> 
> 时间：2012-07-19T11:46:41.127
> 
> 标签：timer, linux-kernel, linux-device-driver

正如我所读到的，计时器 ISR 在每个计时器滴答声中都会增加 jiffies。但是在 SMP 中，所有 CPU 都有自己的定时器中断，因此也有自己的定时器 ISR。所以我的问题是：

jiffies 在所有 CPU 上都是全局的吗？如果是这样，哪个 CPU 如何在其定时器 ISR 中增加它？

根据我的理解，jiffies 不能针对每个 CPU，否则在不同 CPU 上调度的同一进程会看到不同的 jiffy 值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T13:26:36.197

有两个定时器中断：
本地定时器中断 ( `LOC`in `/proc/interrupts`) 在每个 CPU 上每 jiffy 触发一次。
全局定时器中断（中断 0）每瞬间触发一次，在任何 CPU 上。它递增`jiffies`。

请注意，“Tickless Kernel”配置选项（在 Linux 2.6.21 中引入`CONFIG_NO_HZ`）删除了这些中断。使用无滴答内核，不再有周期性中断。相反，当一个进程开始它的量程时，Linux 会在硬件中设置一个“闹钟”，以便在量程结束时触发中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-05T14:01:26.050

请参阅此帖子[链接](https://stackoverflow.com/questions/32819011/is-do-timer-supposed-to-be-called-on-only-one-core-in-smp-systems)。

基本上，`tick_do_timer_cpu`变量保存 CPU ID，它应该运行管理 jiffies 的代码。jiffies 管理函数执行可以从一个核跳转到另一个核，但显然不能同时在不同核上进行更新。

也可以看看[`kernel/time/tick-common.c`](http://lxr.free-electrons.com/source/kernel/time/tick-common.c#L79)

# optimization - Java HashMap：使用字节与引用键的内存优势？

> ID：11560190
> 
> 赞同：1
> 
> 时间：2012-07-19T11:46:47.667
> 
> 标签：optimization, memory, memory-management

这似乎很明显，但我只想确认这和我认为的一样明确：

一个对象引用（在 32 位 Java 下）占用 4 个字节。一个字节（盒装原语）占用 1 个字节。

那么，一个具有许多条目的 HashMap 使用 Bytes 的内存占用会比使用其键的引用要小得多吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T11:48:44.080

> `HashMap`那么，与使用其键的引用相比，具有许多条目的 A使用字节的内存占用会小得多？

您*不能*用作`byte`a 中的键`HashMap`。Java 泛型不允许类型参数的原始类型。你可以使用`Byte`，但你只是在拳击。

如果您*真的*想`byte`用作键类型，那么无论如何我都会很想拥有一个大小为 256 的数组...

# symfony - 符号链接 Symfony 的参数太多

> ID：11560192
> 
> 赞同：1
> 
> 时间：2012-07-19T11:47:03.220
> 
> 标签：symfony

我正在关注 Symfony 之书，当我尝试在捆绑的资产之间创建符号链接并执行时：

```
 php app/console assets:install target [--symlink] 
```

我得到：

```
 [RuntimeException]   
 Too many arguments.  
 assets:install [--symlink] target 
```

为什么会这样？我从书中复制命令，我的应用程序太小，我没有做任何大的改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T12:10:37.307

你的命令不正确。

**[--symlink]**它是可选的，这就是它在括号中的原因。目标是指文件夹应该去的目标。

所以你可以试试：

```
php app/console assets:install web
php app/console assets:install web --symlink 
```

例如。然后将资产安装到 Web。

# ruby-on-rails - rails：在单行中使用多个端口启动服务器

> ID：11560199
> 
> 赞同：0
> 
> 时间：2012-07-19T11:47:43.790
> 
> 标签：ruby-on-rails, port

是否有可能在单个命令中运行具有多个端口的 Rails 服务器？

我知道以下命令有助于启动端口号为 3001 的服务器

```
rails s -p 3001 
```

但是，我期待下面的命令......需要在单行中启动具有多个端口的服务器

```
rails s -p 3001..3006 
or
rails s -p 3001 3002 3003 
```

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:58:54.733

您可以为每个端口运行 2 个或多个 rails 服务器实例。您的另一个选择可能是让您的防火墙或路由器将流量从这些端口中的每一个转发到机器上的单个端口。

# vim - 退格键在 Vim/vi 中不起作用

> ID：11560201
> 
> 赞同：120
> 
> 时间：2012-07-19T11:47:46.280
> 
> 标签：vim

我只是对`.vimrc`文件和`.bash_aliases`文件进行了一些更改，从那时起我无法使用退格键删除单词。

我的`.vimrc`文件有：

```
set nocompatible

set number
set incsearch
set autoindent
set ruler
set autowrite
set smarttab
set linebreak
set spell
set et
set title

set mouse=v
set history=50
set tabstop=4
set matchtime=2
set matchpairs+=<:>

syntax enable
filetype plugin indent on
filetype indent on
set sw=4

map <f2> :w\|!python %

hi SpellBad ctermfg=000 guifg=#000 
```

我的`.bash_aliases`文件有两行用于 Vim：

```
alias vim="vim -c 'startinsert' -u ~/.vim/.vimrc"
alias vi="vi -c 'startinsert' -u ~/.vim/.vimrc" 
```

我的`~/.vim`目录没有单个插件或脚本，因此插件不可能导致这种情况。

`~/.vim/.vimrc`是一个符号链接。实际`.vimrc`文件位于`~/vimrc/`git 存储库的目录中。

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2012-07-19T11:59:53.330

要在插入模式下允许对所有内容进行退格（包括自动插入缩进、换行和插入开始），您可以设置以下[`backspace`](http://vimhelp.appspot.com/options.txt.html#%27backspace%27)选项：

```
:set backspace=indent,eol,start 
```

或者

```
:set backspace=2  "compatible with version 5.4 and earlier 
```

默认情况下，此选项为空，不允许您在上述内容上退格。这是标准的 Vi 行为。

你可以把这一行放到你的`vimrc`文件中，让它在 Vim 启动时自动设置：

```
set backspace=indent,eol,start  " more powerful backspacing 
```

另外，从 Vim 8.0 开始，如果没有找到用户 vimrc 文件，Vim 将通过加载脚本`backspace`来设置这个值。[`defaults.vim`](https://vimhelp.appspot.com/starting.txt.html#defaults.vim)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2020-01-18T17:42:38.190

就像 linux-newb 一样，我安装了全新的 Ubuntu 18.04，我的 vim 编辑器的行为与我在使用的其他机器上的行为不同（包括你所描述的退格行为）。我没有意识到我实际上是在使用**vi**而不是**vim**（两者都是用 执行的`vi`）。

安装**vim**然后编辑文件恢复了我习惯的行为，包括我所期望的退格。

```
sudo apt install vim 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-01-06T15:40:52.577

我的`~/.vimrc`文件有内容`set nocompatible`。在同一个文件中添加了另一行以使退格起作用 -

```
set backspace=indent,eol,start 
```

就跑

```
source ~/.vimrc 
```

在同一终端中进行更改以在同一外壳中立即生效。无需打开vi运行

```
:set backspace=indent,eol,start 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-03T08:07:32.073

我在 urxvt + tmux 上通过 SSH 在 Debian 7.8 上遇到了同样的问题。我安装了 vim 和 vim-tiny。

删除 vim-tiny 解决了这个问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-25T00:48:57.080

对我来说，我有下面的设置，但是退格仍然不起作用。

> `set backspace=indent,eol,start`

最后，我发现以下行导致了这个问题。

> `inoremap <expr><C-h> neocomplete#smart_close_popup()`

删除此设置后，退格键在插入模式下效果很好。

`Reason`: 那是因为 Vim 将 CTRL-H 视为退格，并且这一行在插入模式下重新映射到 neocomplete#smart_close_popup()。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-05T04:03:23.620

对我来说（Debian 服务器，与其他 linux 的“Konsole”连接），在卸载 vim-tiny 包并安装 vim 包后，退格键和箭头键的问题得到解决。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-17T06:41:14.090

很多时候，如果使用像 Putty 之类的 SSH 客户端，它也是所选 getty 类型的功能。最可取的是使用 vt100+，因为它是最标准的仿真。

我已经有`:fixdel`哪个不工作了。我必须删除它并用第一个建议替换它才能让它工作

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-10-07T02:29:25.880

我已经从源代码编译了vim8.2。然后我遇到了这个问题。插入`source $VIMRUNTIME/defaults.vim`后`.vimrc`。`BackSpace`作品。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-21T06:25:14.537

上面没有任何东西对我有用。试过`CTRL+backspace`它救了我

# jquery - jquery自动完成取消焦点事件

> ID：11560207
> 
> 赞同：1
> 
> 时间：2012-07-19T11:47:59.900
> 
> 标签：jquery, jquery-ui, jquery-autocomplete

我有一个自动完成功能，但是当我键入文本进行搜索并将鼠标移到自动完成的结果上时，自动完成中的文本会更改为上一个（删除）。有谁知道如何改善这种行为。

我在 jQuery.com 上阅读

> 焦点类型：自动完成焦点
> 
> 在焦点移动到一个项目（不是选择）之前， ui.item 指的是焦点项目。焦点的默认操作是将文本字段的值替换为焦点项的值，但前提是焦点事件是由键盘交互触发的。取消此事件会阻止更新值，但不会阻止菜单项获得焦点。

但我不知道如何取消焦点事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-26T00:04:58.533

正如您在问题中所述，可以取消 jQuery Autocomplete 上的[焦点事件。](http://api.jqueryui.com/autocomplete/#event-focus)Focus是一个函数，它的第一个参数是一个[jQuery Event](http://api.jquery.com/Types/#Event)对象。根据事件文档：

> # 事件
> 
> ...它将目标、relatedTarget、metaKey 和 pageX/Y 属性标准化，并提供 stopPropagation() 和 preventDefault() 方法。

然后，您可以`preventDefault()`像这样使用该方法：

```
$( ".selector" ).autocomplete({
  focus: function( event, ui ) {
    event.preventDefault();
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:12:12.447

默认情况下，jquery-ui 的自动完成小部件不会替换鼠标悬停时的输入文本。[但是，如果您复制了在http://jqueryui.com/demos/autocomplete/#custom-data](http://jqueryui.com/demos/autocomplete/#custom-data)找到的以下代码：

```
1 $( "#project" ).autocomplete({
2     minLength: 0,
3     source: projects,
4     focus: function( event, ui ) {
5       $( "#project" ).val( ui.item.label );
6       return false;
7     }, 
```

这正是你得到的。如果您不想要这种行为，只需从第 4-7 行中删除焦点选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T05:52:38.577

你是对的，jquery autocpmplete 在他们自己的 [demo page][1] 上有这个错误。
如果您输入了一些文本并且自动完成显示了一些答案，则可以得到它；然后您添加一些额外的文本，同时您将鼠标悬停在其中一个答案上，程序将剪切您的额外文本。
您可以在自动完成小部件中检查源代码

```
blur: function (event, ui) {
           // don't set the value of the text field if it's already correct
           // this prevents moving the cursor unnecessarily
           if (self.menu.element.is(":visible") && (self.element.val() !== self.term)){
               self.element.val(self.term);
           }
       } 
```

你可以通过注释掉这一行来找出你的问题`self.element.val(self.term);` 但这不是一个好主意。您可以将错误发布到 jquery！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T11:54:48.307

通过调用`event.preventDefault()`来取消事件（并非所有事件都可以取消，检查`event.cancelable`）。 [https://developer.mozilla.org/en/DOM/event.preventDefault](https://developer.mozilla.org/en/DOM/event.preventDefault)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-28T15:40:59.833

这会将值设置为输入，移除焦点

```
 $( "#to" ).autocomplete({
    source: availableTags,
    select: function (event, ui) {
    $( "#to" ).val( ui.item.label );
        $('#to').blur();
       return false ;
    }
}); 
```

# javascript - javascript函数调用的语法差异？

> ID：11560208
> 
> 赞同：5
> 
> 时间：2012-07-19T11:48:00.587
> 
> 标签：javascript, html, function, syntax

有什么区别：

```
<div onclick="return function()"></div> 
```

对比

```
<div onclick="function()"></div> 
```

他们似乎在为我做同样的事情，我不确定该使用哪一个。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T11:50:53.373

例如`<form onsubmit="return validate();">...`，如果 validate() 返回 false，则提交将被取消。

与`<form onsubmit="validate();">...`validate() 的返回值无关，提交将继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T11:54:17.090

### 文字解释..

> 一个会将值**返回**给属性所在的元素，另一个则不会。

当您使用元素的默认点击方法时，只有在评估为隐式转换为*true*`return function ()`的值时才会执行。`function ()`

 *如果它产生*false*，则单击事件的评估将在运行*onclick*属性后停止。

* * *

如果`onclick="function ()"`元素的默认点击属性将**始终**执行，无论函数返回什么。

* * *

### 包含正在发生的事情的详细信息的示例片段。

```
function some_func () { return false; } 
```

```
<a href="http://google.com" onclick="return some_func()">
  link #1
</a> <!-- user will never end up at google --> 
```

^(如果在浏览器中启用了javascript，当然..)

```
<a href="http://google.com" onclick="some_func()">
  link #1
</a> <!-- user will always end up at google --> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T11:52:03.377

有一个区别，如果你写return，它会检查return是true还是false，只有return是true才会执行。否则它只会处理。*

# ruby-on-rails - 如何在rails和rspec中模拟链式关联？

> ID：11560215
> 
> 赞同：0
> 
> 时间：2012-07-19T11:48:27.700
> 
> 标签：ruby-on-rails, rspec2, rspec-rails

在我的`SubscriptionsController`我有：

```
 # DELETE /subscription # {{{
  def destroy
    @subscription = current_user.subscriptions.find params[:id]
    @subscription.cancel!
    redirect_to subscriptions_path, :notice => "Abonnement beendet." 
  end# }}} 
```

`current_user.subscriptions.find params[:id]`在我的 Controller-Specs中模拟的正确方法是什么？

目前我正在我的前块中尝试这个。

```
 double(Subscription)
  controller.current_user.stub!(:subscriptions).and_return(Subscription)
  Subscription.stub!(:find).and_return(subscription) 
```

但这似乎没有按预期工作，因为我的 RSpec-Expectations 不起作用。

```
it "updates the status to canceled" do
  sub = Subscription.stub!(:find).and_return(subscription)
  sub.stub!(:cancel!)
  sub.should_receive :cancel!
  delete :destroy, :id => 1
end 
```

这个块总是失败，因为`should_receive`期望没有得到满足：

```
1) SubscriptionsController DELETE /subscription/:id updates the status to canceled
  Failure/Error: sub.should_receive :cancel!
    (#<Proc:0x007fbdec0a2650@/Users/nilsriedemann/.rvm/gems/ruby-1.9.3-p125-perf@bloomy-days/gems/rspec-mocks-2.6.0/lib/rspec/mocks/message_expectation.rb:63 (lambda)>).cancel!(any args)
     expected: 1 time
     received: 0 times
     # ./spec/controllers/subscriptions_controller_spec.rb:38:in
     # `block (3 levels) in <top (required)>'
     # ' 
```

此外，如果有人在评论中删除有关存根、嘲笑的详尽文章的好链接，我会非常高兴。仍然（显然）没有掌握这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T12:17:48.017

您正在设置`should_receive`on Subscription，而不是在`find`将返回的对象上。

就像是

```
Subscription.stub!(:find).and_return(subscription)
subscription.should_receive :cancel! 
```

是你所追求的。

您可能还对以下内容感兴趣`stub_chain`：

```
some_user.stub_chain(:subscriptions, :find => some_result) 
```

设置的东西，以便

```
some_user.subscriptions.find 
```

返回`some_result`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:18:04.367

有几种方法可以做到这一点。如果你想要一个简单的解决方案，你可以使用 stub_chain 并传递任意数量的方法：

```
let(:subscription) { mock(:subscription) }
current_user.stub_chain(:subscriptions, :find) { subscription } 
```

还有一个是不直接使用活动记录，而是在用户模型上有一个 finder 方法：

```
let(:subscription) { mock(:subscription) }
current_user.stub(:find_subscription) { subscription } 
```

这真的是一个意见问题，归结为你觉得最舒服的任何东西。我个人会选择选项一。

# python - Apache 指向托管在另一个盒子上的后端代码

> ID：11560217
> 
> 赞同：0
> 
> 时间：2012-07-19T11:48:31.050
> 
> 标签：python, apache

我正在尝试为我的同事提供一个 Python 应用程序项目，该同事由于一些紧急情况正在休假。他通过我们的办公网络在另一个盒子上开发/托管了一个不完整的应用程序。现在我正在尝试分析，我想添加一些调试语句，但讨厌使用原始代码，因为有数百行代码。但是我有后端应用程序所需的模块列表。由于某些问题，在我的盒子中本地安装这些模块经常失败。

但是我在本地机器上安装了 Apache。是否有可能在将代码复制到另一个盒子上的单独位置后，我可以将 Apache 从我的盒子指向新位置的代码 [记住它会在另一个盒子里]

为了说明我的本地盒子 IP 是 ABCD 而另一个盒子 IP 是 XYZA

两者都是我可以访问的。该代码在 IP XYZA 的框中，例如 /x/tool/test

我会复制整个文件夹 /x/tool/test 说 /x/tool/test-my 并现在在 IP ABCD 设置我的 Apache 以指向 XYZA /x/tool/test-my 路径上的应用程序？

一样可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:59:58.383

你看过[ProxyPass](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypass)指令吗？您可以使用它将本地 URI 指向远程 URL。例子：

```
ProxyPass /x/tool/text http://X.Y.Z.A/x/tool/test-my
ProxyPassReverse /x/tool/text http://X.Y.Z.A/x/tool/test-my 
```

（`ProxyPassReverse`可能没有必要）。此外，如果正在使用 cookie 并且需要翻译 cookie 域，您可以使用`ProxyPassReverseCookieDomain`并`ProxyPassReverseCookiePath`修复它。

请注意，您不需要打开`ProxyRequests`. 这适用于**正向**代理，而不是反向代理。它将把你的 apache 网络服务器变成一个开放的代理。

# wpf - 右对齐时控件未到达右边框

> ID：11560219
> 
> 赞同：1
> 
> 时间：2012-07-19T11:48:36.937
> 
> 标签：wpf, alignment

右对齐标签未到达右边框：

```
<StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch">
    <Label Content="Left Align" HorizontalAlignment="Left"/>
    <Label Content="Right Align" HorizontalAlignment="Right" />
</StackPanel> 
```

即使我指定了 Horizo​​ntalAlignment="Stretch" ，这两个标签似乎都没有占用全部可用宽度。它的原因是什么？

![在此处输入图像描述](../Images/3b583c83cfb0013e19f3446c2acc0d16.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:52:56.717

你应该使用 a`DockPanel`而不是 a `StackPanel`。

另请参阅[对齐堆栈面板中的项目？](https://stackoverflow.com/q/2023201/314334)或者

```
<DockPanel LastChildFill="False">
    <Label Content="Left Align" DockPanel.Dock="Left"/>
    <Label Content="Right Align" DockPanel.Dock="Right" />
</DockPanel> 
```

@santosc在[这里](https://stackoverflow.com/users/232551/santosc)描述[了](https://stackoverflow.com/a/1918982/314334)为什么与 StackPanel 的对齐不能按预期工作：

> 一个堆叠面板，无论你如何拉伸它，都会在孩子们周围塌陷。你不能让它增长得更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:59:31.753

`StackPanel`如果没有提供宽度，则缩小以适应内容。

`DockPanel`正如斯蒂芬鲍尔所说，使用 a ，或者可能使用`Grid`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-17T11:56:30.127

尝试一下 ：

```
 <Grid>
       <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
       </Grid.ColumnDefinitions>
       <Label Grid.Column="0" Content="Left Align" />
       <Label Grid.Column="2" Content="Right Align"  />
    </Grid> 
```

# java - 带有 URL 和按钮的 Android 虚拟设备问题

> ID：11560223
> 
> 赞同：0
> 
> 时间：2012-07-19T11:48:43.360
> 
> 标签：java, android, xml, avd

我对这个 android 的东西相当陌生，但我正在构建一个小应用程序，当你按下一个按钮时，你可以转到一个特定的 URL（转到一个优化版本的网站）。然而我遇到了一个问题。应用程序符合并加载到 AVD 上，但提供任何响应的唯一按钮是第一个按钮，它产生的响应是弹出错误消息说（不幸的是，MyApplication 已停止。）并关闭应用程序。其他按钮不响应点击。请参阅下面的代码。

```
package wag.cymal.libraryportal.welshlibraries;

import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.LinearLayout;
import android.graphics.*;
import android.graphics.drawable.Drawable;

/**
 * Main Activity will deal with all possible functionality 
 * @author Daniel Drave
 *
 */
@SuppressWarnings("unused")
public class MainActivity extends Activity implements OnClickListener 
{
@Override 
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button libButton1 = (Button) findViewById(R.id.button1); //giving buttons onClickListener will track for user touches
    libButton1.setOnClickListener(this);

    Button libButton2 = (Button) findViewById(R.id.button2); // ""
    libButton2.setOnClickListener(this);

    Button libButton3 = (Button) findViewById(R.id.button3); // ""
    libButton3.setOnClickListener(this);

    Button libButton4 = (Button) findViewById(R.id.button4); // ""
    libButton4.setOnClickListener(this);

    Button libButton5 = (Button) findViewById(R.id.button5); // ""
    libButton5.setOnClickListener(this);        
}  

/**
 * onClick is a required method of OnClickListener and deals with the switch case statement governing what happens depending on 
 * what button you click.
 */
public void onClick(View v) {
    switch (v.getId()) 
    {
        case R.id.button1: method1();
        break;

        case R.id.button2: method2();
        break;

        case R.id.button3: method3();
        break;

        case R.id.button4: method4();
        break;

        case R.id.button5: method5();
        break;

        default: break; 
    }
}    

/**
 * 
 */
 public void method1() {
     Uri uri = Uri.parse("http://.....");
     Intent intent = new Intent(Intent.ACTION_VIEW, uri);
     startActivity(intent);
}

 /**
  * 
  */
 public void method2(){
     Uri uri = Uri.parse("http://.....");
     Intent intent = new Intent(Intent.ACTION_VIEW, uri);
     startActivity(intent);
 }

 /**
  *
  */
 public void method3(){
     Uri uri = Uri.parse("http://....");
     Intent intent = new Intent(Intent.ACTION_VIEW, uri);
     startActivity(intent);
 }

 /**
  * 
  */
 public void method4(){
     Uri uri = Uri.parse("http://.....");
     Intent intent = new Intent(Intent.ACTION_VIEW, uri);
     startActivity(intent);
 }

 /**
  * 
  */
 public void method5(){
     Uri uri = Uri.parse("http://.....");
     Intent intent = new Intent(Intent.ACTION_VIEW, uri);
     startActivity(intent);
 }

 @Override
public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    } 
```

}

这就是 MainActivity.java 类，下面是 activity_main XML 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/natlib"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_marginLeft="-8dp"
        android:padding="@dimen/padding_medium"
        android:text="@string/welsh_libs"
        android:textColor="#79438F"
        android:textSize="27dip"
        android:textStyle="bold"
        tools:context=".MainActivity" />

</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <Button
        android:id="@id/button1"
        android:layout_width="137dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="25dp"
        android:background="#A4C81C"
        android:text="@string/ask_lib"  />

    <Button
        android:id="@id/button2"
        android:layout_width="137dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="25dp"
        android:background="#FF0066"
        android:text="@string/find_book" />

    <Button
        android:id="@id/button3"
        android:layout_width="137dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="25dp"
        android:background="#3F83F1"
        android:text="@string/find_lib" />

    <Button
        android:id="@id/button4"
        android:layout_width="137dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="25dp"
        android:background="#FE0002"
        android:text="@string/register" />

    <Button
        android:id="@id/button5"
        android:layout_width="137dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:background="#FBFC3F"
        android:text="@string/login" />

</LinearLayout>

<ImageView
    android:id="@id/image1"
    android:layout_width="wrap_content"
    android:layout_height="0dip"
    android:layout_marginBottom="5dp"
    android:layout_marginLeft="165dp"
    android:layout_weight="0.34"
    android:contentDescription="@string/desc"
    android:src="@drawable/waglogo"
    android:visibility="visible" /> 
```

这就是代码，我只是想知道它为什么会产生那个弹出框。我在代码本身中看不到任何逻辑错误。

PS 我已经修改了 URL，所以你看不到它们的实际去向。项目非常安静；）![单击按钮时弹出错误消息](../Images/0f2e033445b4207f6015cb145de0e4f9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:57:10.687

我现在已经解决了这个问题。清理了项目并摆脱了一些冲突的导入，一切都运行良好。谢谢大家的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:52:05.357

声明新 ID 时，您需要在布局中使用“@+id”：

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:layout_marginLeft="-8dp"
    android:padding="@dimen/padding_medium"
    android:text="@string/welsh_libs"
    android:textColor="#79438F"
    android:textSize="27dip"
    android:textStyle="bold"
    tools:context=".MainActivity" /> 
```

```
<Button
    android:id="@+id/button1"
    android:layout_width="137dp"
    android:layout_height="wrap_content"
    android:layout_marginBottom="25dp"
    android:background="#A4C81C"
    android:text="@string/ask_lib"  />

<Button
    android:id="@+id/button2"
    android:layout_width="137dp"
    android:layout_height="wrap_content"
    android:layout_marginBottom="25dp"
    android:background="#FF0066"
    android:text="@string/find_book" />

<Button
    android:id="@+id/button3"
    android:layout_width="137dp"
    android:layout_height="wrap_content"
    android:layout_marginBottom="25dp"
    android:background="#3F83F1"
    android:text="@string/find_lib" />

<Button
    android:id="@+id/button4"
    android:layout_width="137dp"
    android:layout_height="wrap_content"
    android:layout_marginBottom="25dp"
    android:background="#FE0002"
    android:text="@string/register" />

<Button
    android:id="@+id/button5"
    android:layout_width="137dp"
    android:layout_height="wrap_content"
    android:layout_marginBottom="10dp"
    android:background="#FBFC3F"
    android:text="@string/login" /> 
```

# php - 如何让 glob() 返回与 opendir() 相同的文件顺序？

> ID：11560229
> 
> 赞同：0
> 
> 时间：2012-07-19T11:49:09.263
> 
> 标签：php, opendir

我想`glob`返回相同的文件顺序（排序）`opendir`

例如：

```
$files = glob('/home/web/public_html/audio/*.mp3');
foreach($files as $file) {
 echo $file;
 break;
}

if ($handle = opendir('/home/web/public_html/audio/')) {
    while (false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != "..") {
            echo "$entry\n";
            break;
        }
    }
    closedir($handle);
}
?> 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:58:22.500

您可以使用该`GLOB_NOSORT`标志，这将使[`glob()`](http://php.net/glob)文件在目录中出现时返回。

[`readdir`](http://php.net/readdir)不对文件进行排序，因此`GLOB_NOSORT`会复制此行为。从文档：

> 这些条目按照文件系统存储它们的顺序返回。

# java - Quartz Scheduler 开始上一个作业

> ID：11560243
> 
> 赞同：2
> 
> 时间：2012-07-19T11:49:40.317
> 
> 标签：java, quartz-scheduler

我在 Web 应用程序中使用 Quartz 集群。在安排了一些作业后，其中一些作业没有启动，因为石英无法获取到数据库的连接。

解决数据库问题后，没有清除石英表，我重新启动了 Web 应用程序并且作业没有开始。我们在没有安排工作的情况下使用了该系统几天，一切似乎都很好。

今天我们刚刚安排了一个正确启动的作业，问题是这似乎触发了由于数据库问题而没有启动的所有其他作业。

**注意：**我们已经配置

财产`name="autoStartup" value="false"`

财产`name="misfireInstructionName" value="MISFIRE_INSTRUCTION_DO_NOTHING"`

**NOTE2：**我不知道这是否会改变任何事情，但上述工作在同一组中

有人遇到过这种行为吗？

# delphi - 无法在 OnShow 或 OnHide 中更改 Visible

> ID：11560244
> 
> 赞同：-1
> 
> 时间：2012-07-19T11:49:42.070
> 
> 标签：delphi, delphi-7

我正在使用 Delphi 7。当系统超时，或者如果您的计算机进入睡眠状态然后重新启动，系统会给出错误：“无法在 OnShow 或 OnHide 中更改 Visible。” 你能说一下这个错误的一般原因吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:23:40.707

发生此错误的原因很可能是您显示或隐藏控件以响应其`OnShow`或`OnHide`事件。解决方案是更改您的代码，以便您不再尝试在此类事件中更改控件的可见性。

# php - 通过选中复选框提交表单，并在指定的 div 中显示结果

> ID：11560245
> 
> 赞同：2
> 
> 时间：2012-07-19T11:49:42.507
> 
> 标签：php, forms, jquery, checkbox

I'm trying to produce a form whereby when a check box is selected, the form is instantly submitted and results are displayed into a div located on the same page.

这是我到目前为止正在尝试的代码，但没有任何运气：

```
<form action="end.php" method="get">
<input name="yourcheckbox" id="yourcheckbox" value="ten" type="checkbox"  onClick="testResults(this.form)"/>
    </form>

<script type="text/javascript">
function(form) {
    $.post($(this).attr("action"), $(this).serialize(), function(html) {
        $("#someDiv").html(html);
    });
    return false; // prevent normal submit
};
</script>

<div id="someDiv">The results from the submitted form appears here</div> 
```

我还需要使用具有不同值的多个复选框

关于如何去的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:12:45.997

您的问题的第一部分：

您的原始`onClick`处理程序试图调用一个不存在的函数，`testResults()`. 我建议不要在输入标记中使用`onClick`处理程序，而是通过类或 div id 注册单击处理程序：

```
$('#yourcheckbox').click(function(eventObj) {
    // grab the form element by traversing the eventObj parent elements
    var form = eventObj.parent(':form');
    var actionUrl = form.attrs('action');

    // now submit your form here
    $.post(actionUrl, form.serialize(), 
        function (responseData) {
              $("#someDiv").html(responseData);            
        }
    );
}); 
```

你的问题的第二部分：

您在这里有几个选择：

1.  每个复选框都有自己唯一的 ID（这不是一个好主意，因为每个复选框都需要注册一个点击事件。
2.  将每个复选框命名为相同的名称，如下所示：`name="mycheckbox[]"`. 不错的解决方案，但如果您不需要数组中所有复选框的值，那么您就不需要这个。
3.  为所有复选框类使用一个类：`class="mycheckboxes`然后您的 jquery 点击寄存器如下所示：`$('.mycheckboxes).click(function (....`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T11:55:33.753

目前，您的函数没有名称，并希望将参数传递给它，但是您再次没有从任何地方调用您的函数

函数应采用以下格式

```
function functionName(param1, param2, ...) {
    //body of function
} 
```

要调用一个函数，您需要使用

```
functionName(param1, param2, ...); 
```

*您可以拥有与您所拥有的类似的匿名函数，但是这些需要传递给另一个函数，否则它们将无法使用，例如，您可以将匿名函数用作某些请求的回调函数或用作更改处理程序等等*

现在您需要绑定到复选框上的某种事件，这可能是某种更改事件，然后您可以调用该函数。

最后，`$(this)`在函数内部使用目前没有任何意义，如果您实际上将表单作为参数传递给函数，您应该使用参数的名称而不是`$(this)`, 在您的情况下`form`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:12:27.927

您需要实际传递表单

```
<form action="end.php" method="get" id="FooForm">
<input name="yourcheckbox" id="yourcheckbox" value="ten" type="checkbox" />
</form>

<script type="text/javascript">
function testResults(form) {
    $.post(form.attr("action"), form.serialize(), function(html) {
        $("#someDiv").html(html);
    });
    return false; // prevent normal submit
}
$("yourcheckbox").click(function() {
    testResults($("#FooForm"));
});
</script>

<div id="someDiv">The results from the submitted form appears here</div> 
```

# android - 从类型现有帐户服务创建电子邮件帐户

> ID：11560247
> 
> 赞同：34
> 
> 时间：2012-07-19T11:49:44.190
> 
> 标签：android, accountmanager, google-account

我已经浏览了 Android 文档提供的***SampleSyncAdapter***示例项目，但据我了解，我们需要添加一个自定义帐户服务的帐户。 *但我需要从设备上现有的帐户服务创建一个电子邮件帐户。*

* * *

***为了更清楚我的问题，我举一个例子***

以下是我的设备上可用的帐户服务 ![在此处输入图像描述](../Images/411bc3695f4a314416966b0115033817.png)

我猜每个 Android 设备上都可以使用“谷歌”和“电子邮件”帐户服务。

现在我想配置一个“电子邮件”帐户，所以我必须按照以下步骤操作：

***第 1 步：***输入现有的电子邮件 ID 和密码

***Step 2: [a]*** General Settings Attributes : - (账户名, 真实姓名, 电子邮件地址)

***Step 2: [b]*** Incoming server Attributes : - (POP or IMAP mail server, Server Address, user name, password)

***Step 2: [c]*** Outgoing server Attributes : - (SMTP server, user name, password)

***第 3 步：***通过选择高级设置，我们可以配置端口和证书选项。

我们需要手动完成上述步骤， *但我想*使用上述所有设置以编程方式创建一个电子邮件帐户。

* * *

***那么如何以编程方式从现有的帐户服务创建新的电子邮件帐户？***我需要 MDM 的这个功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:46:49.180

出于安全原因，您不得这样做。

想象一下，账户被配置了用户不知道的设置——用户甚至可能根本不知道账户正在被创建！这将是恶意软件、垃圾邮件等的主要目标点，因为不涉及验证码、用户许可或任何其他身份验证。

所以这是一种安全措施……而且是一个很好的措施。

# c++ - 迭代器问题

> ID：11560249
> 
> 赞同：0
> 
> 时间：2012-07-19T11:49:47.190
> 
> 标签：c++, boost, iterator

我有这个代码：

```
 if (((boost::get< 1>(*i)) == node1) || ((boost::get< 2>(i*)) == node2))
    {
        cout << "on this tuple "<< boost::get<1>(*i) << "we found it" << endl;

    } 
```

并且给了我这个错误，知道它在说什么：

```
 main.cpp:172: error: expected primary-expression before ‘)’ token 
```

这是检查元组向量以了解哪个具有值，如下所示：

```
 void threaded_function(Model_factory &mf, ppa::Node *root)
{
  boost::mutex::scoped_lock lock(result_mutex);   
  if(!running_jobs.empty())
  {
    boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool>  tuple = running_jobs.front();
    cout << "getting the lock for " << running_jobs.front() << " on " 
            << lock.owns_lock() << endl;
    running_jobs.pop();

    lock.unlock();
    ppa::Node *n = boost::get<0>(tuple);
    ppa::Node *n1 = boost::get<1>(tuple);
    ppa::Node *n2 = boost::get<2>(tuple);
    bool check = boost::get<3>(tuple);
   // n2->start_alignment_new(&mf);
    //n1->start_alignment_new(&mf);
     cout << " name " << n->get_name() << " has seq" << n->node_has_sequence_object<< " " << n->left_child->get_distance_to_parent()
             << " " << n->right_child->get_distance_to_parent() << " this done = " << check << endl;    
    n->start_alignment_new(&mf);

  cout << " name " << n->get_name() << " has seq " << n->node_has_sequence_object<< " " << " lock " << lock.owns_lock() << endl; 

  boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool>  tuple2 = wait.front();
 ppa::Node *node = boost::get<0>(tuple2);
    ppa::Node *node1 = boost::get<1>(tuple2);
    ppa::Node *node2 = boost::get<2>(tuple2);
    bool check2 = boost::get<3>(tuple);

     typedef vector<boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool> >::iterator vec_iter;

    for (vec_iter i = wait.begin(); i != wait.end(); ++i)
    {
    if (((boost::get< 1>(*i)) == node1) || ((boost::get< 2>(i*)) == node2))
    {
        cout << "on this tuple "<< boost::get<1>(*i) << "we found it" << endl;

    }
    else 
    {
        cout << "false found" << endl;
    }
    }

  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:51:38.740

您键入`i*`而不是`*i`在您的第二个条件：

```
if (((boost::get< 1>(*i)) == node1) || ((boost::get< 2>(i*)) == node2)) 
                                                       ^^^^ 
```

# spring - DBUNIT 和 Spring .. 无法加载数据集文件

> ID：11560252
> 
> 赞同：3
> 
> 时间：2012-07-19T11:50:00.430
> 
> 标签：spring, junit, dbunit, spring-test

我正在尝试测试我的 dao 层。所以我创建了一个嵌入式数据库。在我的 junit 测试中，我正在努力加载数据：

所以我的创建脚本是：

CREATE SCHEMA test_schema AUTHORIZATION DBA；

创建表 test_schema.tableOne (....)

创建数据库后..我尝试使用加载数据

```
@Test
public void testFind() throws Exception {

    IDataSet dataSet = new FlatXmlDataSetBuilder().build(new File(
            "./src/test/resources/sampleData.xml"
            ));
            IDatabaseConnection dbConn = new   DatabaseDataSourceConnection(dataSource);
            DatabaseOperation.INSERT.execute(dbConn, dataSet);  

} 
```

我的数据集文件看起来：

```
<?xml version="1.0" encoding="UTF-8"?>
  <dataset>
<tableOne state_id="0" previous_state_id="0" player_uid="222222" /> 
  </dataset> 
```

在尝试执行上述操作后，我得到用户缺少权限或找不到 TABLEONE 对象...

（顺便说一句，我的数据库是使用 spring 3 嵌入式 hsql 创建的）

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:57:22.960

好的，整理好了。。

IDatabaseConnection dbConn = new DatabaseDataSourceConnection(dataSource, "TEST_SCHEMA");
dbConn.getConfig().setProperty(DatabaseConfig.FEATURE_QUALIFIED_TABLE_NAMES, true);

显然，当我创建连接时，我必须如上所述指定架构名称，但也要使用 CAPS！

然后可以按如下方式设置数据集

```
<test_schema.tableone..... etc 
```

# jquery - 如何在 Play!2 中使用数据库创建自动完成搜索栏

> ID：11560264
> 
> 赞同：0
> 
> 时间：2012-07-19T11:51:08.263
> 
> 标签：jquery, jquery-ui, playframework

我假设有人会使用 jquery 中的自动完成小部件并将源设置为数据库。

怎么做呢？小部件如何从数据库中检索数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:59:24.627

请参阅[jQuery UI Autocomplete](http://jqueryui.com/demos/autocomplete/)文档和示例，然后选择您要使用的那个。它们演示了所需的数据格式，因此您只需使用自定义数据在模板中构建类似的内容。

# java - 嵌入式码头 IllegalStateException：已提交

> ID：11560265
> 
> 赞同：2
> 
> 时间：2012-07-19T11:51:25.527
> 
> 标签：java, jersey, embedded-jetty

我正在使用嵌入球衣的码头。我的独立码头运行良好，但一段时间后它开始闲置。我在 2 毫秒内给出响应。但是它开始响应 8000 毫秒。和闲置。我对其进行了分析，但找不到任何东西。我得到那个错误：

```
java.lang.IllegalStateException: Committed
        at org.eclipse.jetty.server.Response.resetBuffer(Response.java:1056)
        at org.eclipse.jetty.server.Response.sendError(Response.java:273)
        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:509)
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:225)
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:937)
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:406)
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:183)
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:871)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:110)
        at org.eclipse.jetty.server.Server.handle(Server.java:346)
        at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:589)
        at org.eclipse.jetty.server.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:1048)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:601)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:214)
        at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:241)
        at org.eclipse.jetty.server.ssl.SslSocketConnector$SslConnectorEndPoint.run(SslSocketConnector.java:664)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:636) 
```

我厌倦了更改线程池设置并做到了：

```
 server.setThreadPool(new ExecutorThreadPool(64,256,10)); 
```

**PS 1：** [https](https://groups.google.com/forum/#!msg/cometd-users/5yhMwIlRVbg/fL7V3mwWKyoJ) ://groups.google.com/forum/#!msg/cometd-users/5yhMwIlRVbg/ fL7V3mwWKyoJ 这里说执行器不如码头的线程池，但我不确定。

我使用：jetty-servlet 和 jetty-security 的*7.4.5.v20110725 。*

**PS 2：**我发现： http: [//grepcode.com/file/repo1.maven.org/maven2/org.eclipse.jetty/jetty-server/8.0.0.M0/org/eclipse/jetty/server/Response .java#1103](http://grepcode.com/file/repo1.maven.org/maven2/org.eclipse.jetty/jetty-server/8.0.0.M0/org/eclipse/jetty/server/Response.java#1103)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:54:42.447

我知道可能为时已晚，但我自己也遇到了这个问题，使用 JPOS 下嵌入的 Jetty 8.x。
写了一个测试处理程序，并在HandlerCollection下快速配置：
HandlerCollection
...ContextHandler
...RequestLogHandler
... **FunkyHandler**

，也就是说，它是最后一个被执行的。这让人大吃一惊：
java.lang。**非法状态异常**：在 org.eclipse.jetty.server.handler 的 com.acs.test.jetty.FunkyHandler.handle(FunkyHandler.java:26) 的 org.eclipse.jetty.server.Response.getWriter(Response.java:699) 的 STREAM .HandlerCollection.handle(HandlerCollection.java:154) 在 org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) 在 org.eclipse.jetty.server.Server.handle(Server.java:365) )

用 OutputStream 尝试过，它给了我提交状态错误，与 OP 相同。
所以，在这里的某个地方读到这些处理程序按照它们配置的顺序被调用之后，修复很容易{当你在代码中设置处理程序时这可能也有效}：
HandlerCollection
... **FunkyHandler**
...ContextHandler
...请求日志处理程序

由于我没有费心阅读 Jetty 文档，因此我很确定在某处提到了这一点，但在这里。希望它可以帮助某人。

# html - 如何在 Erlang 中通过 ID/Class 获取 HTML 元素？

> ID：11560270
> 
> 赞同：1
> 
> 时间：2012-07-19T11:51:39.287
> 
> 标签：html, class, parsing, erlang

我想替换 html 元素中的内容。

在 JS 中可以使用`document.getElementById(id)`. 并且使用`getElementsByTagName()`函数编写相同的函数来通过类获取元素并不难。

我不想重新发明轮子。这就是为什么我真的很感兴趣是否有任何库可以帮助在 Erlang 中解析（通过 id/class 获取/设置）HTML。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:06:59.263

如果您正在解析 xhtml，那么您可以使用[xmerl_xpath](http://www.erlang.org/doc/man/xmerl_xpath.html)来选择元素。如果不是 xhtml，我不知道有什么工具可以做你想做的事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T07:11:59.787

*Webmachine*不是真正的“Web 框架”。它更像是一个 REST 工具包，它的工作做得非常好。话虽如此，我强烈反对您直接在 Webmachine 资源中进行 HTML 操作，将 Erlang 和 HTML 混为一团。相反，使用模板语言（例如[ErlyDTL](http://code.google.com/p/erlydtl/) ）将控制器（webmachine 资源）与视图（HTML 页面）分开，并继续使用 JS 进行 HTML 操作。为正确的工作使用正确的工具。

# c# - 从图像c#中选择不同的颜色阴影

> ID：11560271
> 
> 赞同：0
> 
> 时间：2012-07-19T11:51:39.873
> 
> 标签：c#, gdi

我们如何`Color`通过它的色调来区分。意思是假设图像中有20种颜色。10个颜色是蓝色`shade`包括蓝色和10个绿色`shade`包括绿色。然后我想从它们中选择 2 个蓝色和绿色，过滤相同的阴影颜色。我怎么能在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:54:56.950

如果您对 3 种原色使用色标（0-255），并为每种原色设置范围以考虑阴影，那么您可以扫描图像的像素，并将每个像素分配到一个颜色类别中在您指定的范围内的多种颜色阴影。

# spring - 休眠“身份”生成器

> ID：11560273
> 
> 赞同：0
> 
> 时间：2012-07-19T11:51:48.290
> 
> 标签：spring, hibernate

如果在hbm文件中将id指定为“ **Identity** ”，是否可以在hibernate中手动设置id ？即我可以在休眠 hbm 文件中将 id 设置为“ **Identity ”时调用****.setId()方法吗？**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:04:12.080

你当然可以调用方法，但它会在以后引起问题。这样的属性被持久化到数据库中的标识列。通常，此类列中的值也不能通过 SQL 更新。

如果您想自己设置值，请不要在数据库中使用标识列。还使用*分配*的（默认）作为生成器。**

# objective-c - 在 xcode 的公式中使用 sin()

> ID：11560279
> 
> 赞同：3
> 
> 时间：2012-07-19T11:52:16.923
> 
> 标签：objective-c, xcode

目前我正在尝试`pi = n*(sin(180/n));`在 xcode 中实现这个公式。但是像这样写它会给我很大的数字，比如 -12425553 或 23082083。我该如何解决？

我用过`int n; double pi;`。

**更新：**

我尝试使用`M_PI/180`转换为度数，但它仍然不起作用。有什么建议么？？

```
pi = n*sin((180/n) * (M_PI/180)); 
```

顺便说一句，我删除了星号！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T11:56:21.547

您的代码存在三个问题：

*   您将原语定义为指针（您需要删除星号）
*   您假设`sin`需要度数（需要弧度）
*   你使用整数除法（如果`sin`确实取了度数，它没有，你应该用它`180.0`来代替`180`）

要将度数转换为弧度，请使用以下公式：

```
(degrees*M_PI)/180.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:56:17.183

'180/n' 部分很可能是整数除法。尝试：

```
sin(180.0/n); 
```

**像@sosborn 正确指出的那样进行编辑**，您正在“指向 int 的指针”中进行算术运算，而不是 int 本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T12:07:05.493

***“像 -12425553 或 23082083 这样的巨大数字。”***

**pi** = n*(sin(180/ **n** ));
*诠释* n; 双 *pi;*

* * *

请记住，您正在尝试在指针上执行此操作！;)
如果您使用值，它只会起作用，请检查您的“*”。

# mp4 - 检测 mp4 视频的基线/配置文件

> ID：11560285
> 
> 赞同：1
> 
> 时间：2012-07-19T11:52:44.787
> 
> 标签：mp4

如何找出 mp4 视频文件的基线/配置文件？

unix 工具`file`只说 ISO Media, MPEG v4 system, version 2 但是mp4s有区别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T23:02:06.537

您可以对文件使用[mediainfo](http://mediainfo.sourceforge.net/)工具。输出是这样的：

```
...
Codec/CC                                 : avc1
Codec profile                            : Main@L3.0 
Codec settings                           : 2 Ref Frames
Codec settings, CABAC                    : No
... 
```

或者，如果您想在没有外部工具的情况下进行查找，则需要将 MP4 解析为 /moov/trak/mdia/minf/stbl/stsd/avc1/avcC 。在 avcC 框中，您可以找到 SPS（序列参数集），该数据结构包含字段 profile_idc 和 level_idc。然后，14496-10 规范的附件 A 允许您将这两个字段转换为实际级别和配置文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T23:53:22.440

[FFprobe](http://ffmpeg.org/ffprobe.html)是获取视频信息（包括配置文件）的绝佳工具，并且可以输出各种易于解析的格式。

# javascript - jQuery on() 方法跨浏览器兼容性？

> ID：11560287
> 
> 赞同：1
> 
> 时间：2012-07-19T11:52:52.837
> 
> 标签：javascript, jquery

`on()`使用 jQuery 的跨浏览器方法附加事件侦听器是否兼容？

我想我记得祖先`live()`并没有始终如一地工作——如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:56:34.380

是的，`.on`跨浏览器兼容。`.live()`已被弃用，如此[处](http://api.jquery.com/live/)所述。的页面`.on`是[here](http://api.jquery.com/on/)。[可以在此处](http://docs.jquery.com/Browser_Compatibility)找到 jQuery 自己的关于它们积极支持的浏览器的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:56:25.533

`.live`它与`.on`您自己的代码以及它如何使用它们无关。一个并不比另一个更跨浏览器。

# c# - 进行异步调用

> ID：11560290
> 
> 赞同：0
> 
> 时间：2012-07-19T11:53:07.403
> 
> 标签：c#, web-services

我有一个清单`rms.PositiveResponse`，还有另一个清单`rms.NegativeResponses`。列表包含 a`RecruitID`和 a `Timestamp`。我有超过 10,000 条记录。

我正在从 Web 服务获取这些数据。

```
RMSDataService.RMS rms = new RMSDataService.RMS();
var negList = rms.NegativeResponse.Where(d => d.RLMSTimeStamp != null && d.RLMSTimeStamp > new DateTime(2012, 02, 22));
var posList = rms.PositiveResponse.Where(d => d.RLMSTimeStamp != null && d.RLMSTimeStamp > new DateTime(2012, 02, 22)); 
```

我想进行异步调用，因为招聘 ID 可以从负面列表变为正面列表。我怎样才能做到这一点？我不想在两者之间等待 I/O。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:33:54.760

您可以使用`CallBacks`和`WaitHandles`异步调用您的服务。也许[这篇](http://ondotnet.com/pub/a/dotnet/2005/08/01/async_webservices.html)文章可以提供帮助。

# iphone - ARC 和可变参数导致 BAD_ACCESS

> ID：11560291
> 
> 赞同：4
> 
> 时间：2012-07-19T11:53:08.073
> 
> 标签：iphone, objective-c, ios, nsstring, variadic-functions

我正在浏览一个可变参数列表，当我到达列表中的最后一个对象时，我总是会`BAD_ACCESS`出错。我强烈认为这是与[ARC](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)相关的问题。

这就是我所做的：

```
-(NSString *)replaceTokensWithStrings:(NSString *)firstKey, ... {

        va_list _arguments;
        va_start(_arguments, firstKey);

        for (NSString *_currentArgument = firstKey; _currentArgument != nil; _currentArgument = va_arg(_arguments, NSString*)) {
            NSLog(@"%@", _currentArgument);
        }

        va_end(_arguments);

    return nil;
} 
```

我必须以某种方式告诉编译器保留返回的结果，`va_arg`但我似乎无法弄清楚在哪里以及如何应用这个范例。

**更新 1：**这就是我调用我的方法的方式：

```
[@"Hello <firstname> <lastname>" replaceTokensWithStrings:
  @"firstname", @"Peter",
  @"lastname", "Smith", 
  nil]; 
```

**更新 2：**我更新了我的问题并添加了一个错误，以揭示我实际上做错了什么。请看下面我的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:39:42.673

我完全走错了路。问题根本不是函数，而是我如何调用函数（其他参与者不可能知道这一点，因为我没有在我的问题的示例中犯错误）。

我已经更新了我的问题，实际问题是我没有传递 NSStrings 列表，而是传递了 5 个 NSStrings，**最后**一个是普通的 C 字符串。

最后一个 C 字符串导致`BAD_ACCESS`：

**坏的：**

```
"Smith" 
```

**好的：**

```
@"Smith" 
```

现在我很尴尬:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T16:20:16.273

我也在使用`ARC`，我正在使用以下模式，它对我来说很好，我从来没有遇到过任何问题，它可能会对你有所帮助：

```
- (void)workingWithDictionaries:(NSDictionary *)dictionary, ... {

    va_list _arguments;
    va_start(_arguments, dictionary);

    for (NSDictionary *_currentArgument = dictionary; _currentArgument != nil; _currentArgument = va_arg(_arguments, NSDictionary*)) {
        NSLog(@"%@", _currentArgument);
    }

    va_end(_arguments);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T12:29:25.623

每当您在 C 中有一个可变参数列表时，您都需要以某种方式指定列表中的项目数或标识最后一项——该语言不会为您做这件事。这可以通过格式声明——参数的数量与格式项的数量相匹配——或其他一些方案。默认方案是用`nil`or结束调用语句中的参数列表`NULL`。

如果您查看诸如 之类的定义`NSArray arrayWithObjects`，则列表必须始终以 . 结尾`nil`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-02T22:00:20.717

我今天遇到了同样的问题，并且可以从技术上告诉你它与 ARC 或保留无关，但你的方法声明/原型应该是

```
-(NSString *)replaceTokensWithStrings:(NSString *)firstKey, ... 
    NS_REQUIRES_NIL_TERMINATION; 
```

这样你就告诉 Xcode 和 C 预处理器使用 MACRO 并要求总是以 'nil' 结束，所以它会阻止 va_arg() 访问错误的位置 (BAD_ACCESS)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-30T23:26:13.817

如果您期望 va_arg 返回的 id 类型（在此示例中为 NSString*）并且它返回 nil 值，则会发生崩溃。这是因为 arc 试图保留返回的 nil。

为避免这种情况，请将 __unsafe_unretained 添加到您要分配的变量中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T12:21:53.007

它与ARC无关。va_arg 不检查它是否到达了列表的末尾，所以会返回一个指向列表后面的内存块的指针，它可以是任何东西。因此 EXC_BAD_ACCESS。通常，您将参数的数量作为额外参数给出，例如：

```
-(void *)replaceTokensWithNumberOfStrings:(int)numStrings strings:(NSString *)str1, ... { 
```

然后`numStrings`在你的`while`循环中使用。

# iphone - 在 ios 5.0 或 ios 6.0 中访问 c all_history.db

> ID：11560293
> 
> 赞同：1
> 
> 时间：2012-07-19T11:53:10.910
> 
> 标签：iphone, database

我知道我在问什么，这是不可能的。但我在 ios 4.3 之前已经看到了这一点。所以我想访问 call_history 数据库的应用程序。我的要求是我想拿起最后拨打或传入的号码，如果不存在，则保存在地址簿中。

因此，如果有人有任何信息，请与我分享。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:26:05.797

您可以使用以下代码段获取上次拨打的号码：

```
NSString *path = @"/var/mobile/Library/Preferences/com.apple.mobilephone.plist";
NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path];
NSString *lastDialed = [NSString stringWithFormat:@"%@", [dict valueForKey:@"DialerSavedNumber"]]; 
```

# vim - Vim：领导不工作

> ID：11560294
> 
> 赞同：7
> 
> 时间：2012-07-19T11:53:15.660
> 
> 标签：vim, leader

尝试使用`vim-latexsuite`的映射时，使用的映射`Leader`不起作用：

```
:nmap
----------------------------------------
n  <Leader>rf   @<Plug>Tex_RefreshFolds
n  <Leader>ls   @<Plug>Tex_ForwardSearch
n  <Leader>lv   @<Plug>Tex_View
n  <Leader>ll   @<Plug>Tex_Compile 
```

此插件的所有其他映射都正常工作，因此插件已正确加载。没有`mapleader`设置，`Leader`应该默认为`\`（反斜杠）。

在命令模式下键入`\ll`时，光标会向右移动 2 个字符，就像只需键入`ll`. 所以反斜杠似乎被忽略了。Vim 不会发出哔哔声或显示任何错误，并且在`ll`1000 毫秒之前出现以下错误，这是我的`timeoutlen`.

我也尝试了以下设置`.vimrc`和`/etc/vimrc`（虽然我假设只`mapleader`需要在这里设置）：

```
let mapleader = ","
let maplocalleader = "," 
```

此后，Vim 的行为方式相同：没有哔声，没有错误，并且在键入`,ll`光标后向右移动 2 个字符。

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-11-01T23:07:03.620

如果您缩短`timeoutlen`了 ，您将无法足够快地打字。如果您查看`:help 'ttimeoutlen'`，您会看到它表明：

```
:set timeout timeoutlen=3000 ttimeoutlen=100 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-05T11:33:21.023

尝试清除 ~/.viminfo 文件的内容，如果您正在使用会话插件 -- 清除生成文件中的会话数据。然后重新启动 Vim。当我尝试不同的设置、映射等时，它有时会帮助我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T16:13:30.527

卸载 Vim，删除所有插件和配置文件并重新安装后，Leader 工作正常。不幸的是，我不知道究竟是什么导致 Vim 忽略了领导者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-18T20:42:47.100

如果您的 , 中有这样的映射`.vimrc`，

```
nmap <Leader>rf @<Plug>Tex_RefreshFolds 
```

那么`nmap`（不带参数）的输出应该是这样的：

```
n  \rf   @<Plug>Tex_RefreshFolds 
```

换句话说，“<Leader>”应该扩展为“\”。由于您的情况并非如此，因此您的映射出现了问题。这可能是由于您的 cpoptions 中有“<”造成的。尝试`set cpoptions?`检查。

# c# - 使用c#计算excel中的行数

> ID：11560297
> 
> 赞同：0
> 
> 时间：2012-07-19T11:53:31.347
> 
> 标签：c#, asp.net, excel

我有带有代码的excel表

```
VPUDB001
VPUDB002
VPUDB003
VPUDB004
VPUDB005
VPUDB006
VPUDB007
VPUDB008
VPUDB009
VPUDB010
VPUDB011

VPULN001
VPULN002
VPULN003
VPULN004
VPULN005
VPULN006
VPULN007
VPULN008
VPULN009 
```

我想在excel中显示以`VPUDB`和开头的行数。`VPULN`

```
private void browse_Click(object sender, EventArgs e)
{
    DialogResult fileopen = openFileDialog1.ShowDialog();
    string filename = openFileDialog1.FileName;
    textBox1.Text = filename;
    try
    {
        olecon = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source='" + filename + "';Extended Properties=Excel 12.0");
        olecon.Open();
        DataTable dt = new DataTable();
        dt = olecon.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
        string[] excelsheetnames = new string[dt.Rows.Count];
        int i = 0;
        foreach (DataRow row in dt.Rows)
        {
            excelsheetnames[i] = row["TABLE_NAME"].ToString();
            string sheetnamealone = excelsheetnames[i].Remove(excelsheetnames[i].IndexOf('$'));
            comboBox1.Items.Add(sheetnamealone);
            i++;
        }
        //comboBox1.SelectedIndex = 1;

    }
    catch
    {

    }
    finally
    {
        olecon.Close();
    }
}

private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    OleDbCommand cmd = new OleDbCommand("Select [code] FROM ["+comboBox1.SelectedItem+"$] ", olecon);
    olecon.Open();
    OleDbDataReader dReader;
    dReader = cmd.ExecuteReader();
    while (dReader.Read())
    {
        string s = dReader[0].ToString();

    }
    olecon.Close();
} 
```

在这里，我浏览 excel 表，并在组合框中进行计数并显示，然后在组合选择事件中，我需要如上所述计算特定的表行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:01:03.050

使用字符串比较来查看它是否包含`VPUDB`或`VPULN`何时开始为组合框计数，如果包含，则增加一个计数器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T10:28:25.860

像这样尝试linq将解决您的问题

```
 var query = from row in dTable.AsEnumerable()
             where ((row.Field<string>("columnname")).contains("VPUDB")
                   || (row.Field<string>("columnname")).contains("VPULN"))

      select row; 
```

# c# - 带实例参数的静态方法还是不带参数的实例方法？

> ID：11560299
> 
> 赞同：0
> 
> 时间：2012-07-19T11:53:33.327
> 
> 标签：c#, performance, types, clr, jit

略有可能重复：

> [实例方法与带有 ref 参数的静态方法](https://stackoverflow.com/questions/9754337/instance-method-vs-static-method-with-ref-parameter)

如果我有一个类`Employee`，并且有一种方法`AddEmployee`可以将员工添加到数据库中。我可以采用的方法有很多，一个是这样的，

```
protected void AddEmployee(SQLConnection con)
{
    // this is an instance method, 
    // connection is passed in parameter
    // add this class to database, using the connection
} 
```

我会这样称呼它

```
 var emp = new Employee();
   // set its properties
   emp.AddEmployee(theSQLConnectionObject); 
```

另一种方法是，我创建一个静态方法，然后传递一个`Employee`类的实例和一个 SQLConnecion，然后将该雇员类的**实例**添加到数据库中，就像这样

```
static protected void AddEmployee(Employee emp, SQLConnection Con)
{
    // this is static method
    // connection again in parameter
    // add emp class to database, using the connection
} 
```

这可以添加为，

```
var emp = new Employee();
// set its properties
Employee.AddEmployee(emp, theSQLConnectionObject); 
```

我想知道哪种方法好，您更喜欢哪种方法，为什么？另外，我想知道 C# 特定的，相关问题不是特定于语言的。

现在，在开始时，由于这部分，我说可能会重复。
我正在*通过 C# 阅读 CLR*，在*第 8 章 Section Type Constructors*中，它就像

> 编译方法时，JIT 编译器确定它必须发出调用以在方法中执行类型构造函数。如果 JIT 编译器决定发出调用，它必须决定它应该在哪里发出调用。有两种可能
> 
> *   精确的语义，在创建第一个实例的代码之前或在访问类成员的非继承字段的代码之前立即发出调用。
>     
>     
> *   Before-field-init 语义，在代码首先访问静态字段或静态或实例方法或调用实例构造函数之前的某个时间发出代码。

更多的描述，然后给出了一个性能比较的例子，性能上有很大的差异，为了简洁起见，我不包括在内，但如果有人想要，评论，我会更新问题.
在示例之后，他继续

> 当 C# 编译器看到具有使用内联初始化的静态字段的类时，编译器会在元数据的类型定义表中发出 before-field-init。当它看到一个具有显式构造函数的类时，它不会将 before-field-into 发送到元数据中。

现在，如果我的`Employee`班级中有一个静态字段，情况会有什么不同？据我所知，会有4种不同的情况

*   AddEmployee 是实例，类没有静态构造函数

*   AddEmployee 是实例，类有一个静态构造函数

*   AddEmployee 是静态的，类没有静态构造函数

*   AddEmployee 是静态的，类有一个静态构造函数

在所有这些情况下，性能会有什么不同，假设每次`AddEmployee`调用方法`buttonClick`时都会创建一个员工实例（在这两种情况下，无论是否静态方法，因为它们都需要一个实例），因此每次都会创建一个新的创建实例。另外，如果这`AddEmployee`被称为有所不同，这有关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:22:35.817

抛开性能不谈，我更愿意将保存 Employee 的责任转移到另一个类。符合 SRP，也许还有一点 OCP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T02:02:01.217

我建议你在这种情况下不要使用静态方法。在许多情况下，静态方法是非常丑陋的解决方案。更好的方法是如果您使用实例方法创建数据映射器类，例如，当您决定需要使用继承来扩展数据映射器类的行为以获得不同的保存操作时，它可以帮助您。不要一开始就考虑性能，尤其是在这个时刻，优秀程序员的经验告诉我们，当你面对它时，我们需要用性能来解决问题。如果您优化应用程序的每一行代码，您将根本无法完成您的应用程序。通常，有时有 2-3 个地方需要我们提高代码的性能，但有时根本没有这种地方。所以，首先试着考虑你的设计，

# tridion - 如何在 Tridion 的功能区中创建自定义按钮

> ID：11560300
> 
> 赞同：-10
> 
> 时间：2012-07-19T11:53:33.213
> 
> 标签：tridion, tridion-2011

请任何人帮助我理解，

如何在 Tridion 的功能区中创建自定义按钮。稍后单击该按钮时，我需要具有功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T12:14:23.887

关于开始创建 Tridion GUI 扩展的一些很好的教程：

*   [http://yoavniran.wordpress.com/2011/03/03/setting-up-a-tridion-gui-2011-extension-in-8-steps/](http://yoavniran.wordpress.com/2011/03/03/setting-up-a-tridion-gui-2011-extension-in-8-steps/)
*   [http://www.curlette.com/?p=279](http://www.curlette.com/?p=279)
*   [http://code.google.com/p/tridion-2011-power-tools/wiki/nononsenseguide](http://code.google.com/p/tridion-2011-power-tools/wiki/nononsenseguide)
*   [http://tridionfanboy.wordpress.com/category/javascript/](http://tridionfanboy.wordpress.com/category/javascript/)
*   [http://www.curlette.com/?p=401](http://www.curlette.com/?p=401)

在[SDL Tridion World](http://sdltridionworld.com/community/2011_extensions/index.aspx)上还可以找到许多现有的扩展，它们可作为很好的学习材料。最后：永远不要低估自己研究 Tridion 的 GUI 源代码的力量。JavaScript 部分在您的磁盘上很容易读取，并且（如果您[禁用默认的 JavaScript 缩小](http://code.google.com/p/tridion-2011-power-tools/wiki/DeactivateJSMinifier)）也可以在您的浏览器中读取。

# android - Android 测试项目 - 从正在测试的活动接收事件？

> ID：11560304
> 
> 赞同：0
> 
> 时间：2012-07-19T11:53:42.197
> 
> 标签：android, junit, android-testing

是否可以使用从主要活动生成的 android 项目接收事件？

所以我可以测试事件？

这是测试事件的最佳方式吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:07:35.527

See [Activity Testing Tutorial](http://developer.android.com/tools/testing/activity_test.html) how to test activities in Android. To test activity's events [Instrumentation](http://developer.android.com/reference/android/app/Instrumentation.html) class is used. [TouchUtils](http://developer.android.com/reference/android/test/TouchUtils.html) class is useful to generate touch events.

# c# - 在不重新加载页面的情况下读取 XML 的最快方法是什么？

> ID：11560305
> 
> 赞同：2
> 
> 时间：2012-07-19T11:53:46.883
> 
> 标签：c#, jquery, asp.net, ajax

我需要读取 XML 值，它会在每 10 秒后动态变化。我需要在 20 秒后重新加载它而不重新加载页面（即：使用 Ajax 或 Jquery）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:15:01.560

你可以在这里走两条路：

1.  **客户轮询。**您的客户端每隔一段时间就会发出一个 Ajax 请求，例如[JQuery get](http://api.jquery.com/jQuery.get/)。这会从某种缓存中获取 XML 文档的当前值。缓存由另一个服务独立更新，如 Windows 服务或生成此 XML 的其他应用程序。

2.  **发布/订阅。**您的客户端注册更新，一旦服务器确定文件已更改，它就会向客户端发送一个新的 XML 文档。所以它是一种发布-订阅模式。我不确定在 JQuery 和 C# 中是否有任何实现，但我相信您可以快速找到它们。（也许*Comet*、*Web Socket*或*SignalR.NET*（见评论）可以获得相关结果，但我不确定。）

# facebook - 在 FB.init 中设置用户（访问令牌）

> ID：11560306
> 
> 赞同：7
> 
> 时间：2012-07-19T11:53:48.930
> 
> 标签：facebook, facebook-opengraph, facebook-access-token, facebook-javascript-sdk

我想将故事发布到用户时间轴，即使他们没有使用 Facebook 登录。实际上我将用户访问令牌存储在数据库中，如果用户使用电子邮件登录，我将为她检索访问令牌。它在 php 中运行良好（例如在 setAccessToken(token_from_database) 之后获取好友列表，但是当我发布故事时，它总是发布到当前 fb 登录帐户的时间线。

我认为问题是由 fb.init 引起的：

```
window.fbAsyncInit = function() {
        FB.init({
            appId      : 'XXX', // App ID
            status     : true, // check login status
            cookie     : true // enable cookies to allow the server to access the session
            xfbml      : true  // parse XFBML
        });
    }; 
```

然后：

```
FB.api('/me/... 
```

将登录帐户作为“我”，而不是我通过 setAccessToken 在 php 中设置的帐户。我如何发布到该帐户（使用 token_from_database 指定）的时间线？任何想法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-30T13:19:39.647

尝试将您想要使用的访问令牌作为`params`您提供给的对象的一部分传递`FB.api`——它的工作方式应该与访问 API 服务器端时的工作方式相同。

```
FB.api(
  '/me/feed',
  'post',
  {
    access_token : 'access_token_for_some_user_fetched_from_your_database',
    additional_parameter_foo : 'bar'
  }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:11:07.963

我对 PHP SDK 有更多的了解，但在 PHP 中，您可以将“我”替换为用户 ID，我想它也适用于您：

```
FB.api('/'+fbuserid+'/...'); 
```

但是您应该知道，在更改密码并从 Facebook 登录和注销后，用户的访问令牌会发生变化。

# php - 在没有布局的情况下接收来自控制器的回声回答

> ID：11560312
> 
> 赞同：0
> 
> 时间：2012-07-19T11:54:16.107
> 
> 标签：php, ajax, zend-framework

我有这样的事情：

```
$.ajax({
    type: "POST",
    url: "index/test",
    data: { from: from, to: to }
}).done(function(res) {
    alert(res);
}); 
```

控制器的答案是：

```
public function testAction()
{
    echo 555;
} 
```

但问题是，这会返回带有答案 echo 555 的布局；

我怎样才能拒绝渲染布局而只留下回声答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:02:08.117

在您不想呈现任何视图或布局的操作中，请酌情使用以下代码行：-

```
//To disable view rendering
$this->_helper->viewRenderer->setNoRender(true);
//To disable layout
$this->_helper->layout->disableLayout(); 
```

例如：-

```
public function testAction()
{
    $this->_helper->layout->disableLayout();
    $this->_helper->viewRenderer->setNoRender(true);
    echo 555;
} 
```

您可能也不想看上下文[切换](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.contextswitch)，尤其是[ajaxContext](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.contextswitch.ajaxcontext)。这是一种更“ZF”的做法，会自动禁用布局并设置正确的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:02:06.707

您可以通过在控制器操作方法中添加这行代码来禁用布局

`$this->_helper->layout->disableLayout();`

```
 public function testAction()
 {
     $this->_helper->layout->disableLayout();
     echo 555;
 } 
```

# android - 使用 JSON 从 api 获取信息

> ID：11560313
> 
> 赞同：2
> 
> 时间：2012-07-19T11:54:21.313
> 
> 标签：android, json

我在阅读这个 api 时遇到问题

[http://api.xhanch.com/islamic-get-prayer-time.php?lng=67&lat=24&yy=2012&mm=7&gmt=5&m=json](http://api.xhanch.com/islamic-get-prayer-time.php?lng=67&lat=24&yy=2012&mm=7&gmt=5&m=json)

这是我的代码：

```
new Read().execute("sunrise");

public JSONObject retrieveInfo(String user) throws ClientProtocolException,IOException, JSONException {
        StringBuilder url = new StringBuilder(URL);
        url.append(user);

        HttpGet get = new HttpGet(url.toString());
        HttpResponse r = client.execute(get);
        HttpEntity e = r.getEntity();
        String data = EntityUtils.toString(e);
        JSONArray timeline = new JSONArray(data);
        JSONObject last = timeline.getJSONObject(1);
        return last;
    }

    public class Read extends AsyncTask<String, Integer, String> {

        protected String doInBackground(String... arg0) {
            // TODO Auto-generated method stub
            try {
                json = retrieveInfo("");
                return json.getString(arg0[0]);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return null;
        } 
```

这个方法总是返回一个空白字符串而不是我需要的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:08:11.657

这是一个适合您的工作示例

```
import java.io.IOException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.DialogInterface;
import android.os.AsyncTask;
import android.os.Bundle;

public class GetPrayerTime extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.custom_component);

        new Read().execute("sunrise");

    }

    public JSONObject retrieveInfo(String user) throws ClientProtocolException,
            IOException, JSONException {
        StringBuilder url = new StringBuilder(
                "http://api.xhanch.com/islamic-get-prayer-time.php?lng=67&lat=24&yy=2012&mm=7&gmt=5&m=json");
        url.append(user);

        HttpClient httpclient = new DefaultHttpClient();
        HttpGet get = new HttpGet(url.toString());
        HttpResponse r = httpclient.execute(get);
        HttpEntity e = r.getEntity();
        String data = EntityUtils.toString(e);
        JSONObject timeline = new JSONObject(data);
        return timeline.getJSONObject("1");
    }

    private class Read extends AsyncTask<String, Integer, String> {

        ProgressDialog pd = null;

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pd = new ProgressDialog(GetPrayerTime.this);
            pd.setTitle("Downloading...");
            pd.setMessage("Please wait...");
            pd.setCancelable(false);
            pd.show();

        }

        protected String doInBackground(String... arg0) {
            // TODO Auto-generated method stub
            try {
                JSONObject json = retrieveInfo("");
                return json.getString(arg0[0]);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(String status) {
            super.onPostExecute(status);
            pd.dismiss();

            AlertDialog alertDialog = new AlertDialog.Builder(
                    GetPrayerTime.this).create();
            alertDialog.setTitle("Prayer time");
            alertDialog.setMessage(status);
            alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    GetPrayerTime.this.finish();
                    dialog.cancel();
                }
            });
            alertDialog.setIcon(android.R.drawable.ic_dialog_info);
            alertDialog.show();

        }

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:58:09.930

JSON 响应中没有数组，您可能需要：

```
JSONObject timeline = new JSONObject (data);
JSONObject last = timeline.getJSONObject("1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:12:03.447

[这个链接](http://www.vogella.com/articles/AndroidJSON/article.html)可能会帮助你......非常简单但有效地解释了。

```
public class ParseJSON extends Activity {

/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    String readTwitterFeed = readTwitterFeed();
    try {
        JSONArray jsonArray = new JSONArray(readTwitterFeed);
        Log.i(ParseJSON.class.getName(),
                "Number of entries " + jsonArray.length());
        for (int i = 0; i < jsonArray.length(); i++) {
            JSONObject jsonObject = jsonArray.getJSONObject(i);
            Log.i(ParseJSON.class.getName(), jsonObject.getString("your_text"));
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public String readTwitterFeed() {
    StringBuilder builder = new StringBuilder();
    HttpClient client = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet("http://xhanch.com/api/islamic-get-prayer-time.php?lng=67&lat=24&yy=2012&mm=7&gmt=5&m=json");
    try {
        HttpResponse response = client.execute(httpGet);
        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        if (statusCode == 200) {
            HttpEntity entity = response.getEntity();
            InputStream content = entity.getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(content));
            String line;
            while ((line = reader.readLine()) != null) {
                builder.append(line);
            }
        } else {
            Log.e(ParseJSON.class.toString(), "Failed to download file.");
        }
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return builder.toString();
}
} 
```

试试这个...

# c# - 为什么我不需要引用“System.dll”来使用“System”命名空间？

> ID：11560315
> 
> 赞同：10
> 
> 时间：2012-07-19T11:54:32.277
> 
> 标签：c#, visual-studio-2010

我正在处理一项指定“不要使用任何外部库”的任务。所以我创建了 ac# 应用程序，我做的第一件事是默认删除所有 dll 的引用......包括“System.dll”。

但是，我仍然可以将其添加到我的代码中：

```
using System;
using System.IO; 
```

我只是好奇为什么我不需要在我的项目中使用 System.dll 作为参考来执行此操作。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T11:56:50.303

`mscorlib.dll`包括这两个命名空间中的项目。

您需要右键单击您的项目 > 属性 > 构建 > 高级...并选中“不引用 mscorlib.dll”以删除此引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T11:58:11.513

不同的程序集可以贡献给同一个命名空间。

即使您不引用 System.dll，您仍然在引用（隐式）mscorlib.dll，它为`System`命名空间提供了许多类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:56:16.093

这些引用可能在您`Web.config`或`Machine.config`文件中定义，因此默认情况下包含它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T11:59:11.457

这些是默认库。我认为您的问题是“不要使用第三方 dll”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T17:00:03.573

另一件需要考虑的事情是，如果您直接通过命令行进行编译，则编译器会通过默认响应文件 (csc.rsp) 解析一组默认开关，包括默认库引用，该文件位于与编译器。您能够从基类库导入命名空间而无需在编译时显式引用它们的事实是因为它们包含的程序集默认包含在您的程序中。要在命令行更改此行为，您可以使用 /nostdlib 开关强制它不包含 mscorlib.dll，或者您可以使用 /noconfig 让它完全忽略整个默认响应文件。另外，我不太确定您所说的 system.dll 是什么意思，因为您提到的命名空间包含在 mscorlib.dll 中。另外，我认为“

# php - 为什么这个 ajax 脚本不能在 wamp localhost 上工作

> ID：11560324
> 
> 赞同：0
> 
> 时间：2012-07-19T11:54:51.510
> 
> 标签：php, javascript, mysql, ajax, apache

我在运行 windows 7 home premium、apache、php 和 mysql 的本地机器上尝试了这个 ajax 示例，但它不会向浏览器返回任何结果。在这里阅读了几篇文章后，我下载了firebug，并从firebug控制台->我得到的是：

```
GET http://localhost/dev/ajax/ajax-example.php?age=100&wpm=100&sex=m 200 OK 1.01s 
```

回复

```
Query: SELECT * FROM ajax_example WHERE sex = 'm' AND age <= 100 AND wpm <= 100
<br /><table><tr><th>Name</th><th>Age</th><th>Sex</th><th>WPM</th>
</tr><tr>td>Frank</td><td>45</td><td>m</td><td>87</td></tr><tr><td>Regis</td>
<td>75</td><td>m</td><td>44</td></tr></table> 
```

上面的这个东西应该是去浏览器的。该脚本似乎工作正常，除了 div 不会刷新新内容。

这是 broswer 问题还是 windows/javascript 问题。我需要做什么才能使它正常工作？能否请你帮忙。

这是我从中获得所有这些的教程页面。

```
http://www.tutorialspoint.com/ajax/ajax_database.htm 
```

这个页面是ajax.html

```
<html>
<body>
<script language="javascript" type="text/javascript">
<!-- 
//Browser Support Code
function ajaxFunction(){
 var ajaxRequest;  // The variable that makes Ajax possible!

 try{
   // Opera 8.0+, Firefox, Safari
   ajaxRequest = new XMLHttpRequest();
 }catch (e){
   // Internet Explorer Browsers
   try{
      ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
   }catch (e) {
      try{
         ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
      }catch (e){
         // Something went wrong
         alert("Your browser broke!");
         return false;
      }
   }
 }
 // Create a function that will receive data 
 // sent from the server and will update
 // div section in the same page.
 ajaxRequest.onreadystatechange = function(){
   if(ajaxRequest.readyState == 4){
      var ajaxDisplay = document.getElementById('ajaxDiv');
      ajaxDisplay.value = ajaxRequest.responseText;
   }
 }
 // Now get the value from user and pass it to
 // server script.
 var age = document.getElementById('age').value;
 var wpm = document.getElementById('wpm').value;
 var sex = document.getElementById('sex').value;
 var queryString = "?age=" + age ;
 queryString +=  "&wpm=" + wpm + "&sex=" + sex;
 ajaxRequest.open("GET", "ajax-example.php" + queryString, true);
 ajaxRequest.send(null); 
}
//-->
</script>
<form name="myForm">
Max Age: <input type="text" id="age" /> <br />
Max WPM: <input type="text" id="wpm" />
<br />
Sex: <select id="sex">
<option value="m">m</option>
<option value="f">f</option>
</select>
<input type="button" onclick="ajaxFunction()" value="Query MySQL"/>
</form>
<div id="ajaxDiv">Your result will display here</div>
</body>
</html> 
```

这个页面是ajax-example.php

```
<?php
$dbhost = "localhost";
$dbuser = "root";
$dbpass = "norman";
$dbname = "test";
    //Connect to MySQL Server
mysql_connect($dbhost, $dbuser, $dbpass);
    //Select Database
mysql_select_db($dbname) or die(mysql_error());
    // Retrieve data from Query String
$age = $_GET['age'];
$sex = $_GET['sex'];
$wpm = $_GET['wpm'];
    // Escape User Input to help prevent SQL Injection
$age = mysql_real_escape_string($age);
$sex = mysql_real_escape_string($sex);
$wpm = mysql_real_escape_string($wpm);
    //build query
$query = "SELECT * FROM ajax_example WHERE sex = '$sex'";
if(is_numeric($age))
    $query .= " AND age <= $age";
if(is_numeric($wpm))
    $query .= " AND wpm <= $wpm";
    //Execute query
$qry_result = mysql_query($query) or die(mysql_error());

    //Build Result String
$display_string = "<table>";
$display_string .= "<tr>";
$display_string .= "<th>Name</th>";
$display_string .= "<th>Age</th>";
$display_string .= "<th>Sex</th>";
$display_string .= "<th>WPM</th>";
$display_string .= "</tr>";

// Insert a new row in the table for each person returned
while($row = mysql_fetch_array($qry_result)){
    $display_string .= "<tr>";
    $display_string .= "<td>$row[name]</td>";
    $display_string .= "<td>$row[age]</td>";
    $display_string .= "<td>$row[sex]</td>";
    $display_string .= "<td>$row[wpm]</td>";
    $display_string .= "</tr>";

}
echo "Query: " . $query . "<br />";
$display_string .= "</table>";
echo $display_string;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:03:19.210

`ajaxDisplay.value = ajaxRequest.responseText;`这是错误，例如将其更改为`ajaxDisplay.innerHTML = ajaxRequest.responseText`; 和 mb 使用 jquery 或其他框架来完成这样的琐碎任务？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:21:47.403

在回调函数中

```
ajaxRequest.onreadystatechange = function(){
   if(ajaxRequest.readyState == 4){
      var ajaxDisplay = document.getElementById('ajaxDiv');
      ajaxDisplay.value = ajaxRequest.responseText;
   }
} 
```

我不认为 ajaxDisplay.value 会起作用！

改为使用

**ajaxDisplay.innerHTML = ajaxRequest.responseText;**

# python - 从另一个函数调用一个函数时，在 pycassaShell 中出现意外的 NameError

> ID：11560327
> 
> 赞同：13
> 
> 时间：2012-07-19T11:55:15.733
> 
> 标签：python, cassandra, pycassa

我正在玩[pycassaShell](http://pycassa.github.com/pycassa/assorted/pycassa_shell.html)（作为[Cassandra](http://wiki.apache.org/cassandra/GettingStarted)和[Twissandra](https://github.com/twissandra/twissandra/)教程的一部分）。当尝试在 shell 中添加两个函数并从另一个调用一个函数时，我收到一个错误，即名称无法识别。

这可能是非常简单的事情，但我没有找到如何做到这一点。

pycassaShell 看起来像：

```
In [3]: def aaa(): print 5
In [4]: aaa()
5

In [5]: def bbb(): aaa()

In [6]: bbb()
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
...
NameError: global name 'aaa' is not defined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:52:23.773

这是 Pycassa 嵌入 IPython 的方式的一个问题。这是@Benjamin White 关于 Django 的 IPython 使用[的相同问题。](https://github.com/ipython/ipython/issues/62)Django通过[接受来自 IPython 核心 dev 的拉取请求](https://github.com/django/django/pull/512)[修复了该错误](https://code.djangoproject.com/ticket/17078)。

我冒昧地向[Pycassa 提出问题](https://github.com/pycassa/pycassa/issues/193)。希望他们能够调查为什么类似的修复对他们不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:17:18.190

关于什么：

```
def aaa(self): print 5 
def bbb(): self.aaa 
```

当我收到名称错误时，这就是我所做的......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T20:34:16.230

这很奇怪。我不知道为什么会这样，但试试这个：

```
def aaa(): print 5

def bbb():
    global aaa
    aaa() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T20:16:11.500

您是否有可能使用 Python 3？如果您是，请访问[http://docs.python.org/release/3.0.1/whatsnew/3.0.html](http://docs.python.org/release/3.0.1/whatsnew/3.0.html)以获取更改列表。

它适用于 IPython 和常规 python v2.7。

# bash - Makefile - shell 命令不考虑“$”

> ID：11560328
> 
> 赞同：0
> 
> 时间：2012-07-19T11:55:17.163
> 
> 标签：bash, makefile, grep

我有一个具有以下规则的 Makefle

```
bash -c "find . |grep -E '\.c$|\.h$|\.cpp$|\.hpp$|Makefile' | xargs cat | wc -l" 
```

我期待 make 运行引用的 bash 脚本并返回我的项目中的行数。

在终端中直接运行命令可以完成工作，但在 makefile 中不起作用。如果我`$`从脚本中删除，它确实可以工作......但不像预期的那样（因为我只想要`*.{c,cpp,h,hpp,Makefile}`.

为什么`bash -c`我的脚本不能正确运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:22:04.970

如果您编写如下规则，它应该会产生您想要的结果：

```
target:
    @echo $(shell find . | grep -E '\.c$$|\.h$$|\.cpp$$|\.hpp$$|Makefile' | xargs cat | wc -l) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-31T15:11:40.443

在 Makefiles 中，$ 用于 make 变量，例如 $(HEADERS)，其中 HEADERS 之前使用 = 定义。

要在内联 bash 中使用 $，您必须将它们加倍以转义它们。$$VAR 将引用一个 shell 变量，而 .c$$ 等应该为您正在使用的正则表达式转义 $。

以下内容应该足以逃避 $'s 你想要完成的事情

```
bash -c "find . |grep -E '\.c$$|\.h$$|\.cpp$$|\.hpp$$|Makefile' | xargs cat | wc -l" 
```

此外，如果添加此声明，您可以在 Makefile 中全局使用 bash，而不是默认的 /bin/sh：

```
SHELL = /bin/bash 
```

有了以上内容，您应该能够使用 find 命令而无需 bash -c 和引号。如果 SHELL 定义如上：

```
find . |grep -E '\.c$$|\.h$$|\.cpp$$|\.hpp$$|Makefile' | xargs cat | wc -l 
```

另外，请注意，您可以并且经常会看到用于此目的的 SubShell。这些是用 () 创建的。这将使内壳定义的任何变量都成为该壳及其命令组的本地变量。

# html - 在不破坏 IE 的情况下防止在 https 上缓存

> ID：11560330
> 
> 赞同：0
> 
> 时间：2012-07-19T11:55:24.577
> 
> 标签：html, internet-explorer, https, http-caching

我们在 web 应用程序中的一些下载是生成的，不应该被浏览器缓存。

使用 HTTP:// 时，我们可以通过标头来防止这种情况： Cache-Control : no-cache

但是这个中断是 IE：

[http://support.microsoft.com/kb/2549423](http://support.microsoft.com/kb/2549423)

[http://support.microsoft.com/kb/812935](http://support.microsoft.com/kb/812935)

[http://support.microsoft.com/kb/316431（相关问题）](http://support.microsoft.com/kb/316431)

IE 问题的常见解决方案是不发送这些标头。但是删除这些标头打开了浏览器再次缓存这些资源的可能性（这是不需要的）。

是否有一种干净的（最好是不知道内容的）方法来防止在所有常见浏览器中缓存但又不会破坏 IE 的下载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:23:14.280

如果您的 Web 应用程序的服务器部分忽略了额外的请求参数，如何更改

```
http://mywebapplication/service?param=value 
```

至

```
http://mywebapplication/service?param=value&garbage=889jsdakd8932hd 
```

即，在客户端：

```
url = 'http://mywebapplication/service';
url += '?garbage=';

for (var i = 0; i < 20; i++)
    url += Math.floor(10 * Math.random()); 
```

这将使浏览器相信您每次都在下载新资源。

# r - read.table() 更改列名

> ID：11560331
> 
> 赞同：0
> 
> 时间：2012-07-19T11:55:27.557
> 
> 标签：r

> **可能重复：**
> [当我在 R 中读取文件时，标题的变化？](https://stackoverflow.com/questions/11365424/changes-in-the-headers-when-i-read-files-in-r)

我遇到了奇怪的行为 - 我有一个包含列名的表`P(A|AA)`，`P(A|AC)`...。当我使用 write.table() 写入表，然后使用 read.table() 读取它时，列名更改为`P.A.AA.`，`P.A.AA.`-似乎 read.table 不支持带有特殊字符的列名。（从文件中可以看出，写表工作正常，而且前面的列名`write.table()`也正常，所以这一定是 read.table 的问题）。

有没有其他人遇到过这个并且知道解决方法？

# git - Magit：如何在编辑提交日志之前查看预提交挂钩？

> ID：11560336
> 
> 赞同：2
> 
> 时间：2012-07-19T11:55:48.040
> 
> 标签：git, emacs, magit

使用命令行上的**git**，您可以在输入提交的日志消息之前看到预提交挂钩的结果。如果你的 pre-commit 钩子导致提交失败，你会收到警告并且不要写任何东西。

但是使用**magit**，您会被要求输入您的日志评论，*然后*它会评估您的钩子，如果它失败了*，您将不明白为什么*。你刚刚读到：

`git exited abnormally with code 1.` 我知道这是正常的，因为当您完成编辑日志消息时，magit 会运行 git 命令。

**那么，在询问日志之前，您**将如何让 magit评估您的钩子？如何让 magit 显示钩子的结果？

一个相关的问题是，你如何为你的 pre-commit 钩子提供参数，以便只为隐藏的文件而不是存储库中的所有文件运行它？

我主要使用预提交挂钩来检查我是否没有忘记调试内容，例如剩余的“ipdb”和一些个人痕迹。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:32:08.017

在打开日志消息缓冲区之前，我已经编写了运行钩子的代码：

[https://github.com/vanicat/magit/commit/87ec17c46b156c8508a47aa6c9ba982ef8a61b4c](https://github.com/vanicat/magit/commit/87ec17c46b156c8508a47aa6c9ba982ef8a61b4c)

您可以对其进行测试，它错过了忽略钩子的可能性，并且暂时不要运行其他钩子而不是预先提交。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:55:56.480

在 git 被 magit 调用失败后，你应该可以通过使用来了解原因`$`

对于评估预提交钩子，现在 magit 中没有任何内容。您可以尝试为此添加一些内容`magit-log-edit-mode-hook`：

```
(add-hook 'magit-log-edit-mode-hook
          '(lambda ()
                (shell-command "shell command to run git's hook"))) 
```

当然，这里缺少shell命令...

对于预提交中的相关问题，您需要使用 git 来了解将要提交的文件。就像是

```
git diff --name-only --cached 
```

# javascript - 阻止人们复制 JavaScript 代码

> ID：11560338
> 
> 赞同：2
> 
> 时间：2012-07-19T11:55:59.340
> 
> 标签：javascript, html, security

我正在开发一个 JavaScript/HTML5 游戏，显然任何人都将能够阅读代码，我宁愿不要发生这种情况。我很感激我无法阻止人们阅读 JavaScript；我可以通过掩盖它来使其变得更加困难，但不能阻止它。

我可以将它转换为 Java 小程序（我怀疑这些仍然可以进行逆向工程，但我认为这会更难）只需要一个薄的 JavaScript 包装器（如果需要）。

有人还提到可能使用 jQuery 和 JSON，但我怀疑客户端/服务器交互可能有点慢，无法实现。

有谁知道阻止人们抄袭我的工作的其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:58:00.307

如果是 javascript，其他人都可以读取，无论您使用**JQuery**还是**AJAX**，因为它必须由客户端计算机处理，因此需要将其传输给它。

如果您坚持使用 JavaScript，最好的办法是[混淆您的代码。](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)这样，人们就很难窃取您的代码。

如果您将其转换为 Java Applet，它只会稍微好一点，因为客户端可以检索您的 Applet，并且有[JD](http://java.decompiler.free.fr/)之类的 Java 反编译器可以帮助他至少部分了解源代码。您必须通过类似[ProGuard](http://proguard.sourceforge.net/)的东西来运行它，以混淆该代码。

**如果它必须在客户端运行，无论您选择哪种语言，您的代码源都至少有很小的可能性被查看。您所能做的就是使用混淆使您的代码更难阅读、理解和逆向工程。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:05:56.980

> 我apreciate我不能阻止人们阅读javascript，我可以通过掩盖它来使其变得更加困难，但不能阻止它。

没错，尽管高级模式下的[Closure 编译](https://developers.google.com/closure/compiler/)器使人类几乎完全无法阅读代码。（它还对其进行了优化，在适当的地方内联 [以防以后运行它的 JavaScript 引擎没有]，删除死代码，并使标识符尽可能短，以及其他一些事情。）

> 我可以将它转换为 Java 小程序（我怀疑逆向工程这些仍然是可能的，但我认为这会更难）......

是的，这完全有可能。有一些工具可以将 Java 字节码（将交付给客户端的内容）转换回可读源代码。变量名和其他一些东西丢失了，代码可能看起来有点奇怪，但工具就在那里。不过，坦率地说，我完全不确定这会比处理 Closure 编译器的高级优化版本更难。

> 有人还提到可能使用 JQuery 和 JSON ......

他们一定不明白，客户也完全可以阅读这些内容。

> 有谁知道阻止人们抄袭我的工作的其他方法？

我最好的建议是 Closure 编译器。如果做不到这一点，如果您愿意走专有路线，请使用 Flash——但 Flash 应用程序，如 Java 小程序，可以进行逆向工程。我的*印象*是它比对 Java 小程序进行逆向工程更难，但我对 Flash 知之甚少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:01:27.633

我会说你最好的选择是不要尝试。如果您通过网络传递源代码，人们将能够阅读它。混淆可能会使事情变得更加困难，但不会阻止某人下定决心。你可能最想阻止的是那些坚定的人。我建议您简单地接受它：干净清晰地编写代码，使用缩小器来缩小下载大小，并接受其他人如果愿意也可以阅读的事实。

* * *

如果你真的想把它移植到另一种语言，那很好。但是 Java 小程序几乎同样容易解码，因此您必须在服务器端进行解码，或者以不同于浏览器的其他方式进行解码。如果这种权衡对您来说是值得的，那么有很多可用的编译语言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T12:03:47.220

混淆是你最好的选择。目标不是阻止他们阅读您的源代码，而是让他们更容易/更便宜地手动重新创建它，从而阻止他们窃取您的工作。

# c++ - 返回临时对象并绑定到 const 引用

> ID：11560339
> 
> 赞同：69
> 
> 时间：2012-07-19T11:56:02.160
> 
> 标签：c++, reference, constants

> **可能重复：**
> [const 引用是否会延长临时对象的寿命？](https://stackoverflow.com/questions/2784262/does-a-const-reference-prolong-the-life-of-a-temporary)

我的编译器不会抱怨将临时分配给 const 引用：

```
string foo() {
  return string("123");
};

int main() {
  const string& val = foo();
  printf("%s\n", val.c_str());
  return 0;
} 
```

为什么？我认为从返回的字符串`foo`是临时的，并且 val 可以指向生命周期已经结束的对象。C++ 标准是否允许这样做并延长返回对象的生命周期？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-07-19T12:03:38.680

这是一个 C++ 功能。该代码是有效的，并且完全按照它看起来要做的事情。

通常，临时对象只持续到它出现的完整表达式的结尾。但是，C++ 特意指定将临时对象绑定到堆栈上的 const 引用会将临时对象的生命周期延长到引用本身的生命周期，从而避免常见的悬空引用错误。`foo()`在上面的示例中，由结束的花括号返回的临时值一直存在。

**PS：**这只适用于基于堆栈的引用。它不适用于作为对象成员的引用。

全文：[GotW #88：Herb Sutter 的“最重要常量”的候选者](http://herbsutter.com/2008/01/01/gotw-88-a-candidate-for-the-most-important-const/)。

# jquery - 通过Jquery Ajax调用调用自定义控件（非用户控件）中的WebMethod？

> ID：11560340
> 
> 赞同：3
> 
> 时间：2012-07-19T11:56:14.297
> 
> 标签：jquery, asp.net, custom-controls

我有一个场景，我必须在多个 Asp.net 应用程序中使用自定义控件（文本框）。

在应用程序中添加自定义控件的引用后，我想对`Onblur`自定义文本框的事件进行 Ajax 调用，该事件应该调用自定义控件类中的 Web 方法。

我必须做什么。

1：在 Asp.net 应用程序中添加自定义控件的引用。第二：自定义控件文本框的Onblur事件调用一个js文件，其中包含Jquery的$.ajax方法。第三：$.ajax 应该调用自定义控件类中的 WebMethod。

# android - 单击轮播适配器上的任何图像时如何添加意图？

> ID：11560351
> 
> 赞同：0
> 
> 时间：2012-07-19T11:56:44.237
> 
> 标签：android

我有一个显示图像的 3d CarouselAdapter。如何在此代码中添加意图方法，以便在单击图像时打开 Activity？我正在关注以下教程[http://www.codeproject.com/Articles/146145/Android-3D-Carousel](http://www.codeproject.com/Articles/146145/Android-3D-Carousel)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:06:17.973

`Carousel`是一个类似于 Gallery 的自定义视图，它有一个名为`CarouselAdapter`. 所以只需实现`OnItemClickListener`轮播。

是的，这样做，

```
Carousel carousel = (Carousel)findViewById(R.id.carousel);
carousel.setOnItemClickListener(new OnItemClickListener(){
@Override
public void onItemClick(CarouselAdapter<?> parent, View view,
                    int position, long id) {    

// Your Activity starting code goes here...

Toast.makeText(MainActivity.this, String.format("%s has been clicked",((CarouselItem)parent.getChildAt(position)).getName()),Toast.LENGTH_SHORT).show();    
  }         
}); 
```

# forms - 使用 CodeIgniter 从数据库中检索特定列并显示在屏幕上

> ID：11560353
> 
> 赞同：1
> 
> 时间：2012-07-19T11:56:52.690
> 
> 标签：forms, codeigniter, form-fields

我有一个名为 input_types 的数据库表，其中包含各种输入类型：

```
[id]  [input_type_Name]
 1    text
 2    radio
 3    checkbox
 4    select
 ...  ... 
```

我想从表中检索名称并将它们放入一个数组中，以便我可以使用 form_dropdown 在下拉列表中将它们显示给用户。

我现在这样做的问题是我创建了选项组。

我现在怎么做：

# 模型

```
function get_inputTypes() {
    $this->db->select('input_type_name');
    $query = $this->db->get('input_types');

    if($query->num_rows() > 0) {
        return $query->result_array();
    }

    else {
        return false;
    }
} 
```

# 控制器

```
$results = $this->survey_model->get_inputTypes();
$data['inputTypes'] = $results; 
```

# 看法

```
<label for="inputType">Input type:</label>
<?php echo form_dropdown('inputType', $inputTypes); ?> 
```

然而，这不会产生预期的效果。我的下拉列表被填充，但因为我有一个多维数组，所以下拉列表有 optgroups。

我只想将我选择的数据放在一个简单的数组中。为什么这在 CodeIgniter 和 php 中通常如此困难。

C# 更容易：/

# 解决方案

解决方法很简单，使用一个foreach循环遍历模型中的多维数组：

```
foreach($query->result() as $input_type) {
    $data[] = $input_type->input_type_name;
}

return $data; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:16:06.537

“但这并没有产生预期的效果”是什么意思？

确保将 传递`$data`给您的视图：

```
$this->load->view('viewname', $data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:34:35.940

解决方法很简单，使用一个foreach循环遍历模型中的多维数组：

```
foreach($query->result() as $input_type) {
    $data[] = $input_type->input_type_name;
}

return $data; 
```

# php - CodeIgniter“form_validation.php”没有按预期工作？

> ID：11560355
> 
> 赞同：1
> 
> 时间：2012-07-19T11:57:07.480
> 
> 标签：php, codeigniter, validation

我遇到了一个问题，我看不到为什么 codeIgniter 忽略了我在使用以下代码的“form_validation.php”中设置的规则。

```
$config = array(
'racedetails' => array(
    array(
        'field' => 'race_memberno',
        'label' => 'MembershipNumber',
        'rules' => 'required' 
    ),
    array(
        'field' => 'race_penalties',
        'label' => 'Penalties',
        'rules' => 'required' 
    )
); 
```

然后我使用以下方法调用我的控制器上的验证集：

```
$this->form_validation->run('racedetails'); 
```

但是它在运行时总是显示为假，表单运行正常并且没有返回错误，还有什么我可能错过的吗？

**上述验证运行功能在以下范围内运行（Dale 要求）**

```
public function index($id){
    $this->load->library('form_validation');
    if($this->form_validation->run('racedetails')){$validated++;} 

    if($validated != 1){
        $this->process_template_build('entries/entry',$data);
    }else {
      echo "Validation Passed";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-04T20:20:23.417

我遇到了同样的问题，原因是我使用自己的 Form_validation 类来全局设置错误输出。

在那里我忘了将规则传递给父构造函数。所以这就是它与自己的 MY_Form_Validation 类一起工作的方式：

```
class MY_Form_validation extends CI_Form_validation {

public function __construct($rules = array())
{
    parent::__construct($rules);

    $this->_error_prefix = '<div class="alert alert-danger" role="alert"><span class="title"><i class="icon-remove-sign"></i> ERROR</span>';
    $this->_error_suffix = '</div>';

}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:12:16.650

您没有忘记`$config`在运行验证之前实际使用该文件吗？

```
$this->form_validation->set_rules($config); 
```

# java - 替代 Quartz 2.1 中 StdScheduler 的 rescheduleJob？

> ID：11560356
> 
> 赞同：0
> 
> 时间：2012-07-19T11:57:14.620
> 
> 标签：java, quartz-scheduler

我正在迁移我的项目`Quartz 1.8.x to Quartz 2.1.`

```
List<CronTriggerImpl> cronTriggerList;
private StdScheduler scheduler;
///
/// Other Code

for (CronTriggerImpl cronTrigger : cronTriggerList) {
  if (null == scheduler.rescheduleJob(cronTrigger.getName(),cronTrigger.getGroup(), cronTrigger)) {
        scheduler.scheduleJob(cronTrigger);
     }
  } 
```

但是这段代码给了我错误，因为 StdScheduler 没有`rescheduleJob()`功能。

在 Quartz 2.1 中，`rescheduleJob(TriggerKey, Trigger)`需要 2 个参数。

我如何在 Quartz 2.1 中做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:03:30.860

迁移到 2.X 的详尽指南

[http://quartz-scheduler.org/documentation/quartz-2.x/migration-guide](http://quartz-scheduler.org/documentation/quartz-2.x/migration-guide)

使用构造一个`TriggerKey`from`cronTrigger.getName(),cronTrigger.getGroup()`是微不足道的`TriggerKeyBuilder`。使用等效的[TriggerBuilder](http://quartz-scheduler.org/api/2.1.0/org/quartz/TriggerBuilder.html)`Trigger`的第二个参数也可以实现相同的效果。从您的旧值中提取一组相关值并将其转换为重新安排之前的值。`rescheduleJob(TriggerKey, Trigger)``CronTriggerImpl cronTrigger``Trigger`

# c# - 修改字典中的项目而不影响原始对象

> ID：11560358
> 
> 赞同：2
> 
> 时间：2012-07-19T11:57:18.697
> 
> 标签：c#, .net, .net-4.0, dictionary

我有以下代码：

```
 Dictionary<int, int> test = new Dictionary<int, int>();
    test.Add(1,1);
    test.Add(2, 2);

    Dictionary<int, int> test2 = test;
    test2.Remove(1); 
```

从*test2*中删除项目也是从*测试*对象中删除项目。你能告诉我如何在不影响*test的情况下修改**test2*中的项目吗？

 ** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T11:59:35.747

test2 和 test 是对同一个对象（字典）的相同引用。为 test2 实例化一个新字典。

```
Dictionary<int, int> test2 = new Dictionary<int, int>(test); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T12:00:28.030

当您分配`test`给`test2`via时，`test2 = test`您正在分配对该对象的*引用*，这意味着它们都指向内存中的相同位置。上的任何更改`test2`都将在 上生效`test`。您需要使用`new`关键字，例如：

```
Dictionary<int,int> test2 = new Dictionary<int,int>(test); 
```*

# php - Apache 镜像文件夹

> ID：11560359
> 
> 赞同：0
> 
> 时间：2012-07-19T11:57:23.827
> 
> 标签：php, apache, webserver

所以我在 Window SO 上运行的 Apache 服务器上有一个 PHP 系统。我想创建某种镜像来进行测试，而无需复制源代码。例如： 实际场景：

> `http://192.168.1.1/finantial`位于 C:\EasyPHP\www\finantial

我想创建这个：

> `http://192.168.1.1/finantial_test`指向与上面地址相同的源代码。

当这个配置没问题时，我可以让应用程序使用不同的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:01:23.097

这样做很容易。只需添加一个`Alias`到您的`VirtualHost`喜欢...

```
<VirtualHost *:80>
Alias /finantial_test "C:/EasyPHP/www/finantial"
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:35:35.303

在真实服务器上，配置应该是这样的

test_financial.conf

```
<VirtualHost *:80>
DocumentRoot /var/www/financial
ServerName test.financial.com
</VirtualHost> 
```

财务.conf

```
<VirtualHost *:80>
DocumentRoot /var/www/financial
ServerName financial.com
</VirtualHost> 
```

# html - 将 lang 属性与语音发音（如果有的话）一起使用的正确方法是什么？

> ID：11560362
> 
> 赞同：9
> 
> 时间：2012-07-19T11:57:29.543
> 
> 标签：html, localization

某些语言已接受对拉丁字符的音译，例如印地语、俄语或日语。例如，用梵文书写的“男人在吃东西”的印地语是“आदमी खा रहा है।”。音译为“Aadmi kha raha hai”。（或类似的东西；这种方法经常在网上使用，特别是如果人们无法使用印地语键盘。）

在这种情况下，我们使用拉丁文脚本，但仍在编写印地语，因此使用`lang`属性标记任一变体都是可以接受的：

`<span lang="hi">आदमी खा रहा है।&lt;/span>` **或者** `<span lang="hi">Aadmi kha raha hai.</span>`

那么我的问题是关于通常用拉丁字母本身编写的语言，但可能有针对非演讲者/学习者的语音指南——IPA 或临时发音——在赋予它语义方面是否有任何最佳实践？

例如，在爱尔兰语中，如果我说“那个人在吃东西”，我会说“Tá an fear ag ithe”。我可以将其标记为：

`<span lang="ga">Tá an fear ag ithe.</span>`

如果我要为非演讲者提供发音指南，我可能会说*“Taw on far eg ih-he”*。这句话不是毫无意义的，（如“lorem ipsum”文本）但英语或爱尔兰语的句子也不是。

在这种情况下，HTML 中与语言相关的属性的正确用法是什么，或者这个用例目前没有被规范所涵盖？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T12:23:23.410

简短版本：如果您想明确地说它是用拉丁字母写的，请为您提供的示例选择“hi-Latn”或“ga-Latn”。

长版：

[lang 属性的 W3C 规范](http://www.w3.org/TR/html4/struct/dirlang.html)没有特别提到这一点 - 它建议了一些依赖于正字法的 this 用途（例如使用它来呈现所用字符的高质量版本），但有些则没有（例如搜索引擎）。

[RFC1766](http://www.ietf.org/rfc/rfc1766.txt)指定语言标签的格式，建议标签的特殊化可用于表示“脚本变体，例如 az-arabic 和 az-cyrillic”。[在 W3C 站点上的这篇文章中](http://www.w3.org/International/articles/language-tags/#script)有更多关于脚本子标签的内容，[在后来的 RFC5646](http://www.inter-locale.com/ID/rfc5646.html#script)中还有一些额外内容。那个指向[脚本名称的 ISO 标准列表](http://unicode.org/iso15924/iso15924-codes.html)，在该列表中，您想要的脚本是“Latn”，因为它们是其他脚本的罗马化形式。

（不过，这不包括诸如指定您如何进行音译之类的事情，对于可能具有多个标准的语言，例如使用 Wade-Giles 与拼音的拉丁文中的中文。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T12:21:54.630

对于大多数实际目的而言，这并不重要，因为浏览器、搜索引擎和其他相关程序通常会忽略`lang`属性。属性可能会影响字体的选择，但仅限于页面本身不建议字体时（这种情况很少见）。一些语音浏览器识别一些值`lang`并相应地调整它们的功能。如果您在 MS Word 中打开 HTML 文档，它会识别`lang`标记并应用特定语言的拼写工具。但所有这些都是相当有限的，很少有什么关系。此外，在这些情况下，仅识别最简单类型的语言代码。

原则上，可以指明书写系统（“脚本”），例如拉丁文与天城文，以及已使用的音译或转录系统。这已在[BCP 47](http://www.w3.org/International/core/langtags/rfc3066bis.html)中进行了描述。但在大多数情况下，它是实施者的指导方针，而不是你现在可以使用的东西。

例如，您可以写`<span lang="hi-Latn">Aadmi kha raha hai.</span>`以表明内容是印地语但用拉丁字母书写。至少在原则上，有一种方法可以指示使用了哪些竞争罗马化系统。我认为任何与网络相关的软件都无法识别`lang="hi-Latn"`；程序即使识别它也可能无法识别它`lang="hi"`。

所以你可以对 使用详细的值`lang`，但它没有多大用处。`lang="hi"`对另一种语言的任何*主要*片段（例如，一个句子或更多）使用简单的标记是一种很好的做法，尽管不多。在花费太多时间之前，请考虑一下您可以期待哪些实际好处。例如，如果您考虑使用像[hyphenate.js](http://code.google.com/p/hyphenator/)这样的客户端连字符，那么`lang`标记就变得必不可少；但是您需要检查该软件的期望，而不仅仅是一般规范。

一句警告：我在用`lang="ru"`拉丁字母写的俄语时看到了奇怪的结果。原因是浏览器可能会切换到他们的“俄语字体”的想法，导致字体混合。但简单的补救措施是为所有文本进行一些一致的字体设置，在这种情况下覆盖浏览器默认设置。

像“Taw on far eg ih-he”这样的字符串不能被有意义地归类为某种语言。如果您使用语言标记，请使用`lang=""`（以空字符串作为值），因为这是明确指示未指示语言的定义方式！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:02:38.023

您可能想考虑将其标记为[`<ruby>`](http://www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-ruby-element).

例如：

```
<ruby lang="hi">आदमी<rt>Aadmi</rt> खा<rt>kha</rt> रहा&lt;rt>raha</rt> है।&lt;rt>hai</rt></ruby> 
```

# android - 是否可以在 android 活动中调用 setContentView() 之前显示进度条对话框？

> ID：11560364
> 
> 赞同：4
> 
> 时间：2012-07-19T11:57:34.077
> 
> 标签：android, android-activity

在我的 android 应用程序中，加载 Activity 需要超过 10 秒（它包含许多带有冗长文本值的 TextView），现在我想在加载 Activity 期间显示进度条对话框窗口？是否可以使用“AsyncTask”？如果可能的话，那么我如何暂停 UI 线程直到 AsyncTask 完成。当我尝试在 setContentView() 调用之前显示一个对话框时，我收到一个错误，如 **android.view.WindowManager$BadTokenException: Unable to add window -- token null 是不是为了申请**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:13:26.783

您可以使用`AsyncTask`and`Viewswitcher`在两个布局之间切换（每个布局都是一个视图）。首先设置您的`contentView`和在`onPostExecute`（加载后）切换您的布局。
编辑：
有关更多详细信息，请参阅[此页面](http://www.ctctlabs.com/index.php/blog/detail/android_dont_overlook_viewswitcher/)。

# c# - 一系列浮点数的约束行为？

> ID：11560365
> 
> 赞同：0
> 
> 时间：2012-07-19T11:57:36.310
> 
> 标签：c#, math, range

我正在查看[这个](https://stackoverflow.com/questions/5304423/most-succinct-implementation-of-a-floating-point-constraint-function-with-wrap-a)问题以获取有关为给定范围实施约束/换行的想法。

从中我可以确定以下内容

**[n1, n2)**

```
float Wrap(float x, float lo, float hi)
{
    return x % Math.Abs(lo - hi);
} 
```

仅适用于正数，因此建议这样做

```
float Constrain(float x, float lo, float hi)
{
    float t = (x - lo) % (hi - lo);

    return t < 0 ? t + hi : t + lo;
} 
```

我仍然不确定如何从上面的代码中获得以下范围约束并需要一些帮助？

**[n1, n2]**

**(n1, n2]**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:49:37.270

**(n1, n2]**

```
float constrainExclusiveInclusive(float x, float lo, float hi){
    float result = Constrain(x, lo, hi);
    if (result == lo){result = hi;}
    return result;
} 
```

**[n1, n2]**

```
float constrainInclusiveInclusive(float x, float lo, float hi){
    float result = Constrain(x, lo, hi);
    if (result == lo){
        //somehow decide whether you want x to wrap to lo or hi
        if (moonIsInTheSeventhHouse()){
            result = lo;
        }
        else{
            result = hi;
        }
    }
    return result;
} 
```

**(n1, n2)**

```
float constrainExclusiveExclusive(float x, float lo, float hi){
    float result = Constrain(x, lo, hi);
    if (result == lo){
        throw new ArgumentException("No answer exists for the given inputs");
    }
    return result;
} 
```

# apache-poi - Excel 2010同时设置自动过滤poi

> ID：11560368
> 
> 赞同：0
> 
> 时间：2012-07-19T11:57:43.240
> 
> 标签：apache-poi

```
HSSFWorkbook wb = new HSSFWorkbook(); 
HSSFSheet sheet = wb.createSheet("Excel"); 
sheet.setAutoFilter(CellRangeAddress.valueOf("A1:P1")); //As I am using excel 2010 version 
```

打开 Excel 工作表时，我收到以下警报：

![在 Excel 2007 中使用自动过滤器时，它可以正确打开](../Images/f120e06fae7c0a1f118ae5d80473d37d.png)

# c# - 如何在每个级别的 wcf 扩展点上识别相同的请求？

> ID：11560370
> 
> 赞同：1
> 
> 时间：2012-07-19T11:57:46.927
> 
> 标签：c#, wcf, wcf-extensions

**主要目标：**我想关联在我的 wcf 扩展点的每个级别计算的信息。

**我的方法：**为此，我需要在每个扩展点级别识别相同的请求，并合并与相同请求相关的信息。

**问题：** 有没有办法在不同的扩展点上识别相同的请求？

感谢帮助

# linq-to-xml - 使用 LINQ to XML -- 如何提取元素中的属性值

> ID：11560373
> 
> 赞同：0
> 
> 时间：2012-07-19T11:57:53.547
> 
> 标签：linq-to-xml

我有一个来自 Gmail 的 xml 提要：

```
<feed version="0.3">
    <title>Gmail - Inbox for bagee18@gmail.com</title>
    <tagline>New messages in your Gmail Inbox</tagline>
    <fullcount>9</fullcount>
    <link rel="alternate" href="http://mail.google.com/mail" type="text/html"/>
    <modified>2012-07-19T02:43:55Z</modified>
    <entry>
      <title>$50 or $100 Nightly Resort Credit and Room Upgrade</title>
      <summary>Add to Address Book | Update email address Marriott® FIND A HOTEL EXPLORE  PLAN MARRIOTT REWARDS</summary>
      <link rel="alternate" href="http://.google.com" type="text/html"/><modified>2012-07-19T01:23:00Z</modified>
      <issued>2012-07-19T01:23:00Z</issued>
      <id>tag:gmail.google.com,2004:1407882080256681207</id>
      <author>
          <name>Marriott</name>
          <email>Marriott@marriott-email.com</email>
      </author>
    </entry>
    <entry>
      <title>Tim Anderson's ITWriting » Blog Archive Resort » Moving a database from on-premise SQL Server to SQL Azure: some hassle</title>
      <summary>Tim Anderson's ITWriting Tech writing blog Home Articles Reviews Gadget Writing Forthcoming</summary>
      <link rel="alternate" href="http://google.comen" type="text/html"/><modified>2012-07-19T00:55:25Z</modified>
      <issued>2012-07-19T00:55:25Z</issued>
      <id>tag:gmail.google.com,2004:1407880344364808586</id>
        <author>
          <name>me</name>
          <email>bagee18@gmail.com</email>
        </author>
    </entry> 
```

我这样创建了一个 LinqPad 查询：

```
XDocument xmlDoc = XDocument.Load(@"C:\Users\Brad Agee\Documents\feeds.xml");

var q = from c in xmlDoc.Descendants("entry")
where c.Element("title").Value.ToLower().Contains("resort")
select new {
name = c.Element("title").Value,
url = ??,
email ??
};

q.Dump(); 
```

如何将标签的属性值提取到`href`属性中，并将属性值提取到属性中？`link``url``email``email`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:06:36.880

好。Href 是元素链接的一个属性。所以

```
c.Element("link").Attribute("href") 
```

email 是元素作者的一个元素

所以

```
c.Element("auhtor").Element("email").Value 
```

最后

```
select new
{
    name = c.Element("title").Value,
    url = c.Element("link").Attribute("href").Value,
    email = c.Element("author").Element("email").Value 
}; 
```

# web-applications - SessionState 子应用程序

> ID：11560374
> 
> 赞同：1
> 
> 时间：2012-07-19T11:57:58.867
> 
> 标签：web-applications, session-variables

我有 2 个网站

```
WebsiteRoot - MVC Website (c#) 
```

在这个网站下我有一个孩子申请

```
UI - Webforms (VB) 
```

所以看起来像

```
WebsiteRoot
WebsiteRoot/UI 
```

我在 WebsiteRoot 项目中进行`web.config`了`Global.asax`设置，并且所有设置都正确继承，因此我可以阅读它们。

我的问题是会话具有相同的机器密钥（继承）和相同的会话名称（继承），并且两个站点都使用相同的 sessionID（通过查看运行时验证）但是在子应用程序中会话没有项目。

有什么解释为什么会这样

# ruby-on-rails - 没有 ID 错误就找不到用户

> ID：11560382
> 
> 赞同：0
> 
> 时间：2012-07-19T11:58:14.540
> 
> 标签：ruby-on-rails

我正在尝试使用 amistad 作为友谊宝石。但我无法让它正常工作。我使用设计作为身份验证系统，当我添加点击添加好友链接时我的问题：

```
 <% unless current_user == @user  %>
   <%= link_to "Arkadaşlarıma Ekle", friends_path(:friend_id => @user), :method => :post,class: "btn btn-large btn-primary" %>
   <%end %> 
```

我找不到没有 ID 错误的用户。我找不到正确的链接。Friendships_controller.rb:

```
class FriendshipsController < ApplicationController
  before_filter :authenticate_user!

  def index
    @friends = current_user.friends
    @pending_invited_by = current_user.pending_invited_by
    @pending_invited = current_user.pending_invited
  end

  def create
    @Friend = User.find(params[:user_id])
    @friendship_created = current_user.invite(@Friend)
    if @friendship_created
      flash.now[:notice] = "Une demande d'amiti a t envoye  #{@friend.fullname}"
    end
  end

  def approve
    @Friend = User.find(params[:user_id])
    @friendship_approved = current_user.approve(@Friend)
    @friends = current_user.friends
    @pending_invited_by = current_user.pending_invited_by
    flash.now[:notice] = "La demande d'amiti de #{@friend.fullname} a t approuve"
  end

  def remove
    @Friend = User.find(params[:user_id])
    @friendship = current_user.send(:find_any_friendship_with, @Friend)
    if @friendship
      @friendship.delete
      @removed = true
      flash.now[:notice] = "Artık  #{@friend.fullname} ile arkadaşsınız"
    end
  end
end 
```

谢谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:06:29.273

您不能通过普通链接发送 HTTP POST 请求（不触发 AJAX 请求）。将链接替换为表单，可以通过`form_for`等手动创建，也可以使用[`button_to`](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:27:14.670

我修好了它。我不得不使用`friends_path(:user_id => @user),`而不是`friends_path(:friend_id => @user),`

我仍然需要一种解决错误观点的好方法。

# matlab - 求曲线 MATLAB 中的递增和递减趋势

> ID：11560383
> 
> 赞同：4
> 
> 时间：2012-07-19T11:58:20.957
> 
> 标签：matlab

```
a=[2 3 6 7 2 1 0.01 6 8 10 12 15 18 9 6 5 4 2]. 
```

这是一个数组，我需要提取增加和减少趋势开始的确切值。

数组的输出`a`将是`[2(first element) 2 6 9]`

```
a=[2 3 6 7 2 1 0.01 6 8 10 12 15 18 9 6 5 4 2].
   ^       ^        ^               ^
   |       |        |               | 
```

请帮助我在 MATLAB 中为任何类似类型的数组获取结果..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T12:17:14.163

您只需要找到连续数字之间差异的符号在哪里变化。有了一些常识和功能[diff](http://www.mathworks.nl/help/techdoc/ref/diff.html)，[sign](http://www.mathworks.nl/help/techdoc/ref/sign.html)和[find](http://www.mathworks.nl/help/techdoc/ref/find.html)，你会得到这个解决方案：

```
a = [2 3 6 7 2 1 0.01 6 8 10 12 15 18 9 6 5 4 2];
sda = sign(diff(a));
idx = [1 find(sda(1:end-1)~=sda(2:end))+2 ];
result = a(idx); 
```

## 编辑：

当有两个相同的连续数字时，符号函数会搞砸事情，因为`sign(0) = 0`，这被错误地识别为趋势变化。你必须过滤掉这些。您可以通过首先从原始数据中删除连续重复来做到这一点。由于您只需要趋势变化开始的值，而不是实际开始的位置，因此这是最简单的：

```
a(diff(a)==0) = []; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:19:48.093

这是使用该`diff`功能的好地方。

您的第一步将是执行以下操作： `B = [0 diff(a)]`

我们添加 0 的原因是为了保持矩阵相同的长度，因为`diff`函数的工作方式。它将从矩阵中的第一个元素开始，然后报告该元素与下一个元素之间的差异。在第一个元素之前没有前导元素，因此只是将矩阵截断一个元素。我们添加一个零，因为那里没有变化，因为它是起始元素。

如果您现在查看结果，`B`很明显拐点在哪里（从正数到负数的位置）。

要以编程方式将其拉出来，您可以做很多事情。我倾向于使用一点乘法和`find`命令。

`Result = find(B(1:end-1).*B(2:end)<0)`

这将返回您在拐点处的索引。在这种情况下，它将是：

```
ans =

     4     7    13 
```

# lotus-notes - Lotus Notes 数据文件夹内容被删除

> ID：11560385
> 
> 赞同：1
> 
> 时间：2012-07-19T11:58:25.390
> 
> 标签：lotus-notes

Lotus Notes 8.5.1（多用户）标准版安装在运行 Windows Server 2003 Enterprise Edition Service Pack 的服务器上。

多个用户使用 Citrix(Presentation Server) 访问 Lotus Notes。所有用户数据文件夹都保存在 d:\ drive 的根目录中。

一切都按预期工作，但有一天我突然发现除了特定用户的 notes\data 文件夹下的 IBM_TECHNICAL_SUPPORT 文件夹之外的所有文件夹都已删除。

我不知道这些文件夹是如何被删除的。我在谷歌上搜索了很多解决这个问题的方法，但没有提出任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T12:35:22.747

禁用“多用户清理服务”。您的管理员可能有一个漫游策略，该策略设置为在给定时间后删除用户数据目录。

# sql - 如何在不使用任何工具或断点的情况下调试存储过程

> ID：11560386
> 
> 赞同：1
> 
> 时间：2012-07-19T11:58:28.120
> 
> 标签：sql, sql-server-2008, database-design, oracle10g

有人可以分享调试存储过程的方法吗？这是一个面试问题，面试官询问如何在不使用工具的情况下调试 SP。最后他说，在 Oracle 中，包中有一些东西可以调试。我不明白，他也没有完全解释:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:04:06.383

好吧，如果您使用的是 SSMS，最简单的方法是使用打印功能。您想查看 ti 是否已“到达”的每一行，只需添加打印“行 X”并检查您的消息选项卡。

如果您不在 SSMS 上，您可以创建一个全局临时表（创建表 ##debug_table....）并按照与打印相同的逻辑在您的 proc 中添加插入语句。

当然，所有这些“解决方案”都考虑到您有权更新 proc。如果你不知道，我真的不知道怎么做。

# html - JS Cycle 插件中的 HTML5 视频

> ID：11560391
> 
> 赞同：0
> 
> 时间：2012-07-19T11:58:42.463
> 
> 标签：html, video, slideshow, cycle

我正在使用 Cycle 插件（具有全屏背景）在网站上工作。我可以嵌入图像和 YouTube/Vimeo，但我真的很想使用 HTML5`<video>`标签。
目前，当我使用 HTML5 标记放入视频时，它会显示为空。

我正在使用这个插件：
[http ://blog.aaronvanderzwan.com/2012/07/maximage-2-0/#demo](http://blog.aaronvanderzwan.com/2012/07/maximage-2-0/#demo)

最终，我想要这样的东西：
[http](http://www.p2media.de/)
://www.p2media.de/ 但在全屏视频和图像之间交替（并且仅水平滚动）。

太感谢了！

# jquery-ui - Jquery 用于 MVC4 中的对话框

> ID：11560393
> 
> 赞同：0
> 
> 时间：2012-07-19T11:58:48.703
> 
> 标签：jquery-ui

[我从这个链接http://jqueryui.com/demos/dialog/#animated](http://jqueryui.com/demos/dialog/#animated)使用 jquery ui用于在 MVC4 应用程序中不起作用的对话框

这是我的视图@{ ViewBag.Title = "Dialog";

```
}
<link href="../../Content/themes/base/jquery.ui.all.css" rel="stylesheet" type="text/css" />
<link href="../../Content/themes/base/jquery.ui.dialog.css" rel="stylesheet" type="text/css" />
<script src="../../Scripts/jquery-ui-1.8.11.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-ui-1.8.11.min.js" type="text/javascript"></script>
<script type="text/javascript">
    // increase the default animation speed to exaggerate the effect
    $.fx.speeds._default = 1000;
    $(function () {
        $("#dialog").dialog({
            autoOpen: false,
            show: "blind",
            hide: "explode"
        });

        $("#opener").click(function () {
            $("#dialog").dialog("open");
            return false;
        });
    });
</script>
<div class="demo">
    <div id="dialog" title="Basic dialog">
        <p>
            This is an animated dialog which is useful for displaying information. The dialog
            window can be moved, resized and closed with the 'x' icon.</p>
    </div>
    <button id="opener">Open Dialog</button>
</div>
<!-- End demo -->
<div class="demo-description">
    <p>
        Dialogs may be animated by specifying an effect for the show and/or hide properties.
        You must include the individual effects file for any effects you would like to use.</p>
</div>
<!-- End demo-description -->
<div class="demo-description">
    <p>
        A modal dialog prevents the user from interacting with the rest of the page until
        it is closed.</p>
</div>
<!-- End demo-description --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:20:46.537

你没有连接你的javascript。尝试这个：

```
$('#dialog').dialog({
     autoOpen: false,
     show: "blind",
     hide: "explode"
});

$(document).ready(function(){
     $('#opener').click(function () {
          $('#dialog').dialog("open");
          return false;
     });
}); 
```

（删除开头的“ `$(function () {`”和结尾的“ `});`”对 - 您的代码希望看起来像上面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T06:55:22.540

添加 `$(documnet).ready`然后在其中定义您的函数。. ..

```
 $(document).ready(function () {

    code goes here  . . 
    });` 
```

# firefox-addon-sdk - 如何在 pageMod 中同时指定包含和排除 url 模式？

> ID：11560397
> 
> 赞同：1
> 
> 时间：2012-07-19T11:58:56.237
> 
> 标签：firefox-addon-sdk

我希望我的 pageMod 加载除特定域之外的所有页面。

目前我已经指定

`include:['*']`在为所有 url 加载它的 pageMod 中。

我怎样才能让它避免特定的域，如 www.example.com 并为其余的加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:46:50.897

page-mod 没有“排除”属性（经过一番摆弄后，我无法让负面的前瞻断言正常工作），所以我希望最好的方法是使用 tabs 模块：

```
var tabs = require('tabs');

tabs.on('open', function(tab) {
    // some url exclusion logic?
    if (tab.url.indexOf('http://example.com') !== -1) {
        tab.on('ready', function(tab) {
            let worker = tab.attach({
                contentScriptfile: data.url('somefile.js')
            });

            worker.on('event', function(message) {
                //...
            });
        });
    }
}); 
```

# android - 从服务调用活动 onCallStateChange

> ID：11560399
> 
> 赞同：2
> 
> 时间：2012-07-19T11:59:01.670
> 
> 标签：android, android-intent, call

我`PhoneStateListener`在一个`Service`. `Toast`消息工作正常，但我想`Activity`在来电时运行另一个。但它不会开始。这堂课有什么问题？这是 main 的代码`Activity`，`DialogAct`是一个空`Activity`的布局。

```
public class GSMListenerService extends Service {
private TelephonyManager tm;

 @Override
 public void onCreate() {
  super.onCreate();

  tm = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);
  tm.listen(mPhoneListener, PhoneStateListener.LISTEN_CALL_STATE);
 }

 private PhoneStateListener mPhoneListener = new PhoneStateListener() {
     public void onCallStateChanged(int state, String incomingNumber) {
         try {
             switch (state) {
             case TelephonyManager.CALL_STATE_RINGING:
                 Intent i = new Intent(GSMListenerService.this,DialogAct.class);
                 startActivity(i);
                 Toast.makeText(GSMListenerService.this, "CALL_STATE_RINGING: ", Toast.LENGTH_SHORT).show();

                 break;
             case TelephonyManager.CALL_STATE_OFFHOOK:
                 Toast.makeText(GSMListenerService.this, "CALL_STATE_OFFHOOK", Toast.LENGTH_SHORT).show();
                 break;
             case TelephonyManager.CALL_STATE_IDLE:
                 Toast.makeText(GSMListenerService.this, "CALL_STATE_IDLE", Toast.LENGTH_SHORT).show();
                 break;
             default:
                 Toast.makeText(GSMListenerService.this, "default", Toast.LENGTH_SHORT).show();
                 Log.i("Default", "Unknown phone state=" + state);
             }
        } catch (Exception e) {
            Log.i("Exception", "PhoneStateListener() e = " + e);
        }
    }
};

@Override
public void onDestroy() {
    super.onDestroy();
}

@Override
public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId);
}

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:29:33.547

使用[FLAG_ACTIVITY_NEW_TASK](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK)标志。

```
Intent intent = new Intent(GSMListenerService.this, DialogAct.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

# ruby-on-rails - 如何正确设置路线

> ID：11560409
> 
> 赞同：0
> 
> 时间：2012-07-19T11:59:30.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view, path, routes

我可以毫无问题地清除索引视图中检查的所有消息。
但在显示视图中，生成的链接显示指向 /messages/discard.3 的链接，这 3 可能是 ID。

我怎样才能让它工作？它应该链接到messages/discard/3

我的文件是这样的

路线.rb

```
 get "messages/received"
  get "messages/sent"
  get "messages/trash"
  get 'messages/:id' => 'messages#show', :as => :show_messages

  match 'messages/new/:username', :to => 'messages#new', :as => :new_messages
  match 'messages/deliver' => 'messages#deliver', :via => :post
  match 'messages/discard' => 'messages#discard', :via => :post, :as => :discard_messages
  match 'messages/untrash' => 'messages#untrash', :via => :post 
```

查看 1 (index.html.erb)

```
 <%= form_tag(:action=> discard) do %>   
   <% @messages.each do |m| %>
      <tr>
       <td><%= check_box_tag "checked_items[#{m.id}]",m.id %></td>
       <td><%= m.last_message.id %></td>
       <td><%= 'unread' if m.is_unread?(current_user) %></td>
       <td><%= m.last_message.created_at %></td>
       <td><%= m.last_sender.username %></td>
       <td><%= link_to m.subject, show_messages_path(m) %></td>
      </tr>
   <% end %> 
```

查看 2 (show.html.erb)

```
<%= link_to 'Trash', discard_messages_path(@messages)  %> 
```

消息控制器.rb

```
 def discard
      conversation = Conversation.find_all_by_id(params[:checked_items].keys)
    if conversation
      current_user.trash(conversation)
      flash[:notice] = "Message sent to trash."
    else
      conversations = Conversation.find(params[:conversations])
      conversations.each { |c| current_user.trash(c) }
      flash[:notice] = "Messages sent to trash."
    end
       redirect_to :back 
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:14:36.800

您可以尝试将其更改为：

```
match 'messages/discard/:id' => 'messages#discard', :via => :post, :as => :discard_messages 
```

但是我认为您*应该*做的是将所有路线更改为：

```
resource :messages do
  member do
    #code
  end

  collection do
    #code
  end
end 
```

更易于阅读和维护

# oracle - Oracle 错误：列表中的最大表达式数为 1000

> ID：11560410
> 
> 赞同：0
> 
> 时间：2012-07-19T11:59:31.680
> 
> 标签：oracle, c#-4.0, oracle11g

我在 C#.Net 和 Oracle 工作。我正在将字符串传递给查询。我曾使用此代码连接所有项目 ID

```
List<string> listRetID = new List<string>();
                foreach (DataRow row in dtNew.Rows)
                {
                    listRetID.Add(row[3].ToString());
                } 
```

这种连接超过 10,000。所以我收到这样的错误消息..

```
ORA-01795: maximum number of expressions in a list is 1000 
```

如何解决这个..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T12:15:04.973

该[文档](http://docs.oracle.com/cd/E11882_01/server.112/e17118/expressions015.htm)指出：

> 以逗号分隔的表达式列表最多可以包含 1000 个表达式。以逗号分隔的表达式集合列表可以包含任意数量的集合，但每个集合最多可以包含 1000 个表达式。

大概你正在使用这个字符串作为 in`IN (...)`限制的内容，在这种情况下，你真的无能为力 - 这只是行不通。解决此问题的一种常见方法是生成一个虚拟表作为子查询或公用表表达式 (CTE) 并加入该表，但我不确定您将如何翻译您的列表 - 可能类似于您正在做的任何事情用你的`IN`条款。您最终希望查询看起来像：

```
with tmp_tab as (
    select <val1 from list> as val from dual
    union all select <val2 from list from dual
    union all select <val3 from list from dual
    ...
)
select <something>
from <your table> yt
join tmp_tab tt on yt.<field> = tt.val 
```

但这需要在每次运行时生成包括 CTE 在内的整个（巨大）查询，并且没有机会使用绑定变量。

您可能会发现[这种方法](http://my-tech-talk.blogspot.co.uk/2010/01/how-to-pass-arrays-from-net-c-to-oracle.html)更可口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:52:36.740

您可以拥有 10 个包含 1000 个项目的列表，而不是 1 个包含 10000 个项目的列表。

```
WHERE some_column IN (1,2,...,1000)
   OR some_column IN (1001,1002,...2000) -- etc. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:08:55.437

不是 C# 人，但我只会将列表拆分为`listRetID`多个列表或创建[列表列表](https://stackoverflow.com/a/4104566/335523)

然后遍历该列表列表并对列表的每个元素执行查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T13:21:56.237

您查询的目的是什么？

看起来您正在选择某些列等于某个查询的记录之一的第 3 列的行。

执行此操作的正确方法是 SQL 连接或子查询。绝对没有必要将它带入 C# 代码。例如，使用子查询，您可以编写如下内容：

```
SELECT *
FROM atable
WHERE afield IN (
    SELECT field3
    FROM someothertable) 
```

# magento - 如何在不影响其他类别的产品列表模板的情况下更改一个类别的产品列表模板

> ID：11560414
> 
> 赞同：0
> 
> 时间：2012-07-19T11:59:48.863
> 
> 标签：magento

我想仅将一个子类别产品显示为列表。该类别的产品列表仅显示产品名称、价格和重量。但其他类别和子类别产品仍保持默认布局（有图像.产品标题/简要说明）。

有没有人可以帮助我？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T12:10:53.927

您可以`Custom Layout Update`在 category 的值中添加这样的内容：

```
<reference name="product_list">
    <action method="setTemplate"><template>your_custom_template.phtml</template></action>
</reference> 
```

# jquery - Div html代码未从html代码中提取

> ID：11560416
> 
> 赞同：0
> 
> 时间：2012-07-19T11:59:56.967
> 
> 标签：jquery, html, ajax

**java脚本代码**

```
 $("#category select").change(function(){
 var category = $('select option:selected').html();

 $.ajax({
    type:"Post",
    url:"collectiepost.php",
    data:"category="+category,
    cache:"false",
    success:function(html){

 $("select").html($(html).find("option.category"));
 $("#test").html($(html).find("#testdata"));
    }
    });
  });
 }); 
```

该页面上的 html 输出 collectiepost.php

```
 <select id="ontwerper">
 <option class="desinger">vikas</option>
 </select>

 <select id="category">
 <option class="category">cloth1</option>
 <option class="category">cloth2</option>
 </select>

 <div id="testdata">test data</div> 
```

**需要输出**

```
<select>
<option class="category">cloth1</option>
<option class="category">cloth2</option>
</select>

 <div id="test">
 <div id="testdata">test data</div>   
 </div> 
```

**问题**

但我得到那些没有 div 标签的输出

```
<select>
<option class="category">cloth1</option>
<option class="category">cloth2</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:22:25.157

删除以下行中“”中的空格`div #test`：

```
$("div #test").html($(html).find("div #testdata")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:26:30.133

我认为你可以得到这个：

```
<div id="test">
 <div id="testdata">test data</div>   
</div> 
```

是因为在您的 html 输出中您没有“测试” div：

```
<select id="ontwerper">
 <option class="desinger">vikas</option>
 </select>

 <select id="category">
 <option class="category">cloth1</option>
 <option class="category">cloth2</option>
 </select>

 <div id="testdata">test data</div>
No test div here 
```

`$("div #test").html($(html).find("div #testdata"));`失败了

像这样包装它：

```
$('#testdata').wrap('<div id="test" />'); 
```

# visual-studio-2010 - 如何将大型 VS 解决方案分解为更小的解决方案

> ID：11560418
> 
> 赞同：5
> 
> 时间：2012-07-19T12:00:08.273
> 
> 标签：visual-studio-2010, visual-studio, projects-and-solutions

我们有一个 VS2008 解决方案文件，其中包含大约 80 个项目（是的，我知道它很烂）。

这些项目排列在各种文件夹中，有些可能依赖于顶级“Libs”文件夹中的其他第 3 方 DLL。

我们想将其重构为几个较小的 .sln 文件，每个文件都包含合理数量的项目。

问题是，当移动项目文件时，存储在其中的相对路径会中断，因此我们将不得不进行大量手动“修补”来修复它。

是否有任何工具或任何经过验证的技术可以做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:45:11.987

我们做了类似的事情，为了修复引用，我们编写了一个快速实用程序来解析 .csproj 或 .vbproj 文件（基本上是 xml 文件）并根据 .proj 文件本身在重构。这比手动更改项目 xml 或添加删除引用以避免人为错误要好。

一旦您知道 proj 文件在哪里以及公共文件（或其他文件）将在哪里，您就可以使用相对路径修改项目文件中的 Reference 节点。因此，例如，您*可能*必须更改原始文件

```
<Reference Include="NHibernate">
      <HintPath>..\..\ServicesShared\Library\NHibernate.dll</HintPath>
</Reference> 
```

在 .proj 文件中

```
<Reference Include="NHibernate">
      <HintPath>..\Common\ServicesShared\Library\NHibernate.dll</HintPath>
</Reference> 
```

如果那是 NHibernate.dll 现在所在的位置。

希望这对你们有用。

# c++ - 如果它是父类的一部分，则无法创建成员对象

> ID：11560419
> 
> 赞同：-1
> 
> 时间：2012-07-19T12:00:12.843
> 
> 标签：c++, class, object, member, derived

我试图创建一个成员对象（希望这个终点是正确的）并且它有效。但是，如果我派生对象的类，它就会失败。为什么会这样，我该如何解决这个问题？

```
 class test 
{
protected:
    int         id;
public:
    test(){};
    ~test() {};
    test(int a){};
};
/* Without Comments it doesn't work
class derivtest : public test
{

protected:
    int         id;

public:
    derivtest(){};
    ~derivtest() {};
    derivtest(int a){};
}
*/

class test2 
{

public:
    test2():teil(){};
private:
    test teil;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:04:56.993

你忘`;`了最后`derivtest`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:06:03.843

它可能是声明后缺少的分号`derivtest`：

```
class derivtest : public test
{

protected:
    int         id;

public:
    derivtest(){};
    ~derivtest() {};
    derivtest(int a){};
};
 ^ here 
```

# javascript - 表单属性目标是否与 asp.net 跨页回发相同？

> ID：11560421
> 
> 赞同：0
> 
> 时间：2012-07-19T12:00:19.560
> 
> 标签：javascript, asp.net, postback

设置表单时我会得到相同的行为吗

```
<form target="_parent"> 
```

或通过执行 asp.net 跨页回发

```
<asp:button postbackurl="some.aspx" /> 
```

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:03:38.930

不，目标是打开页面的*位置*，而 URL 是打开*的*页面。

# mysql - DELETE 查询卡住/耗时太长

> ID：11560423
> 
> 赞同：1
> 
> 时间：2012-07-19T12:00:26.423
> 
> 标签：mysql, database, sql-delete, ibatis, delete-row

我有一个有 4 列的大表（几乎 200 万条记录）。它们都是十进制的。

```
FIELD1 DECIMAL,
FIELD2 DECIMAL,
FIELD3 DECIMAL,
FIELD4 DECIMAL 
```

`FIELD1`是我的PK。 `FIELD3`上面有一个索引。

我有删除查询的问题。

```
DELETE FROM MY_TABLE where FIELD1= <const>; 
```

当我用 ssh 连接到服务器机器并运行命令时——它成功了！但是，我有一个带有 iBatis 命令的 java 进程，并且在运行相同的删除命令时 - 它在状态更新时卡在 MySQL 服务器上。

```
mysql> show processlist;

| Query   |   278 | updating | delete from MYTABLE where FIELD1 = 'D' | 
```

我尝试运行优化表和分析表，但没有帮助。我试图重新创建表格 - 但同样没有帮助。

可能是什么问题？为什么删除命令直接在服务器上成功？而不是在使用 iBatis 执行时？

我有另一个表，有类似的问题 - 那里 - 服务器上的删除需要很短的时间，但是从 iBatis 执行时需要 7 秒。去完成！！

可能是什么问题？我怎样才能改进那些删除命令？？？

**更新：**

我编写了一个简单的 java 进程（打开 jdbc 连接并执行语句），它在没有 iBatis 的情况下执行相同的“删除”命令 - 它运行完美！！

这意味着它与 iBatis 相关……它可能是什么？

# c# - 在 C# 中手动信任 SSL 证书

> ID：11560427
> 
> 赞同：4
> 
> 时间：2012-07-19T12:00:34.413
> 
> 标签：c#, ssl

我正在用 C# 开发一个应用程序，它将通过 HTTP 和 SSL 与服务器通信。有什么方法可以让程序信任服务器提供的证书？该证书将与软件一起分发，因此它可以在不涉及外部 CA 的情况下识别服务器。

澄清：我希望我的客户端应用程序信任已在客户端中硬编码的单个证书，以便它只会信任我自己的服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:26:33.037

您可以使用 BouncyCastle。

1.  使用该函数将您的 CA 证书加载到 BC ussign`DotNetUtilities`类中`FromX509Certificate(X509Certificate)`
2.  将服务器证书中的公钥加载到 BC。
3.  调用`Verify`服务器证书公钥

这样您就可以检查证书的签名。哪种方式最安全。并且还使您可以在不更新客户端的情况下更新服务器证书。（只要 CA 在课程外有效）

验证来源：http: [//www.bouncycastle.org/viewcvs/viewcvs.cgi/csharp/crypto/src/x509/X509Certificate.cs](http://www.bouncycastle.org/viewcvs/viewcvs.cgi/csharp/crypto/src/x509/X509Certificate.cs?view=markup) ?view= markup Line:540

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:39:50.240

在我看来，我认为您无法做到这一点并相信您拥有安全的渠道。如果我错了，请有人纠正我，但 SSL 中的 CA 信任链不仅仅是为了验证指纹是否是特定值（或证书的其他部分）。它证明客户端正在与*正确*的服务器通信（由于共享 CA 密钥）。[这个插图](http://publib.boulder.ibm.com/infocenter/tivihelp/v5r1/topic/com.ibm.itim.infocenter.doc/cpt/cpt_ic_security_ssl_authent.html)是一个很好的参考。跳过第 3 步，将不允许服务器向客户端证明其身份（抛出证书验证）。

`so that it will only ever trust my own server`

SSL 通过使用共享 CA 证书（如威瑞信等）来保证这一点。也许我不明白为什么您会*选择*不按预期使用 SSL。

**编辑：** 正如**the_ajp**在他的回答中指出的那样，有一些库（如充气城堡）将对证书链进行全面验证。这些可以手动调用。

# java - 在 JSP 中设置 javascript 变量值：UseBean 使用 Set 属性

> ID：11560430
> 
> 赞同：0
> 
> 时间：2012-07-19T12:00:42.120
> 
> 标签：java, javascript, jsp, jsf, jstl

我是 Java 新手，不知道是否可行：

如何使用 JavaScript 中现有的 JavaScript 变量填充 JSP:bean 的变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:14:53.453

您必须将 js 变量的值发布到服务器端，然后将该值设置为所需的 java bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:44:24.120

首先，**JSP**只不过是一个运行在服务器上生成 html 页面的 servlet，而**Javascript**是一种客户端脚本语言，因此两者之间没有直接的交互。

但是，如果您想在 JSP 中从 javascript 设置一些变量，那么您必须通过 GET 或 POST 请求或使用 Ajax 请求将该变量值发送到服务器。

我建议阅读解释 JSP 概念的教程，我们有一个很好的 JSP [wiki](https://stackoverflow.com/tags/jsp/info)以及一些非常有用的链接。

# user-management - 用户管理

> ID：11560431
> 
> 赞同：1
> 
> 时间：2012-07-19T12:00:43.413
> 
> 标签：user-management

我需要构建一个管理用户的应用程序，我认为遵循现有的管理模型会很好，比如 Windows 或 linux 使用的具有用户、组、权限等的管理模型。

我在 Internet 上找不到任何地方来获得有关如何实现此功能的解释。

我的应用程序是一个 Web 应用程序，可能是管理用户的 asp.Net（不太重要的技术）。我的级别很少，目前是系统管理员、高级用户、组管理员和简单用户。

每个级别都提供特权，例如高级用户可以查看所有用户，可以将用户提升为组管理员，可以降级用户（权限低于他的权限）等。

有什么地方可以阅读有关如何实施此类系统的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:15:37.300

可能使用[ASP.NET 成员资格提供程序](http://msdn.microsoft.com/en-us/library/ms731049.aspx)对您有用。您可以使用将安全信息存储在 Sql Server 数据库中的[SqlMembershipProvider 。](http://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider.aspx)如果您需要更高级的功能（并且可能更安全），您可以将 Active Directory 或[ADAM](http://www.microsoft.com/en-us/download/details.aspx?id=4201)与[ActiveDirectoryMembershipProvider](http://msdn.microsoft.com/en-us/library/system.web.security.activedirectorymembershipprovider.aspx)一起使用。ASP.NET 成员提供程序模型是可定制的，您可以实现自己的提供程序，但现有的提供程序非常强大。

# asp.net - 如何在 Sharepoint 中使用 ASP.NET 母版页

> ID：11560434
> 
> 赞同：0
> 
> 时间：2012-07-19T12:01:17.163
> 
> 标签：asp.net, sharepoint-2010, master-pages

我对 Sharepoint 知之甚少，但我对 ASP.NET 非常熟悉。现在我需要为sharepoint 站点开发一个母版页。我相信，为此我可以使用 Sharepoint 设计器或 Visual Studio。作为一个基本的 ASP.NET 开发人员，我可以设计一个页面

.. 等标签，而不是 Sharepoint 特定的设计功能。

有什么方法可以在 SharePoint 中使用 ASP.NET 应用程序的母版页作为母版页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:29:00.780

查看[Heather Solomon 的博客](http://blog.sharepointexperience.com/2011/09/09/just-the-essentials-sharepoint-master-pages/)，她提供了有关处理母版页和 SharePoint 品牌/设计的绝佳信息，并提供了一些基本母版页文件来帮助您入门。

# java - Java 域异常

> ID：11560441
> 
> 赞同：0
> 
> 时间：2012-07-19T12:01:35.980
> 
> 标签：java, exception

我写了一个宁静的网络服务。RESTful Web 服务的契约是接收参数，通过 SSL 与外部服务通信并响应客户端。服务合同和服务没有问题。服务设计很好，所有已检查的异常都已在 catch 块中捕获，但经过几次服务测试后，似乎未正确处理未检查的异常。有没有办法使用域异常来封装这些未经检查的异常。简单地说，如何处理或预测未经检查的异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:08:59.780

您应该在代码中始终有一个位置来处理所有异常，并且您所描述的内容听起来像是在处理代码的混乱，无论在哪里调用声明检查异常的方法。在遇到检查异常的较低级别代码中使用此代码：

```
try { 
  ...
catch (RuntimeException e) { throw e;} 
catch (Exception e) { throw new RuntimeException(e); } 
```

并在异常屏障（提到的中心位置）使用

```
try {
  ...
catch (Throwable t) { // logging, returning error response, whatever
}
finally { // global resource cleanup
} 
```

仅在特殊情况下才需要做更多的事情，您会发现这在代码库中并不常见，即当您的较低级别的方法获取资源时，除了已为每个请求获取的资源之外。一个例子可能是文件 I/O。在这种情况下，当然必须使用 a`try-finally`来处理额外的资源，但您仍然不能`catch`吞下异常：主要的异常屏障仍然需要知道存在问题并进行清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:45:53.963

在 RESTful Web 服务的特定情况下，该框架有一个“包罗万象”的处理程序，它会做一些你不喜欢的事情。因此，与这里的其他一些答案相反，添加更多或不同的处理并没有什么坏处。框架的处理程序当然不会为你清理，所以你只能通过自己清理来让事情变得更好。因此，您有两个选择。

1.  您可以根据 JAX-RS 标准将异常映射器添加到您的提供者列表中。

2.  您可以将代码包装在 Throwable 的 try/catch 中，然后在 catch 处理程序中构造一个吸引您的响应。

在不知道您为 JAX-RS 使用什么工具包的情况下，我无法更详细地了解 (1)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T12:35:45.990

RuntimeExceptions 应该指示**编码错误**，因此理想情况下您应该修复错误而不是尝试处理它们。不幸的是，一些库开发人员将 RTE 滥用于非 bug 并强迫您捕获它们。您可以将 RuntimeException 包装在 Exception 中。

```
....
catch (RuntimeException e) {
    throw new MyCheckedException("Failed to...", e);
} 
```

编辑：这些天来，这似乎是一个有争议的观点。我知道糟糕的检查异常可能会很痛苦。但是很好地使用受检异常有助于客户和实施者理解合同。当您不关心异常时，将 RuntimeExceptions 用于非错误可能会使在“快乐情况”下使用 API 变得更容易，但当您这样做时，更难知道“悲伤情况”会发生什么。这也使接口的实现者更难知道对它们的期望——它们允许或不允许抛出哪些 RuntimeExceptions 等。

# html - 从 Asp.net MVC 控制器返回 Pdf 文档

> ID：11560442
> 
> 赞同：6
> 
> 时间：2012-07-19T12:01:45.380
> 
> 标签：html, asp.net-mvc, pdf, razor

从视图中的数据生成 html 页面的最佳方法是什么？我有一个包含所有表格等的 html 模板。不想使用任何模板，如 JqueryTemplate。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T02:43:13.933

Try this approach using the hiqpdf [html to pdf converter](http://www.hiqpdf.com), a commercial product:

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        ViewBag.Message = "Welcome to ASP.NET MVC!";
        Session["MySessionVariable"] = "My Session Variable Value assigned in Index"; 

        return View();
    }

    public ActionResult About()
    {
        return View();
    }

    public string RenderViewAsString(string viewName, object model)
    {
        // create a string writer to receive the HTML code
        StringWriter stringWriter = new StringWriter();

        // get the view to render
        ViewEngineResult viewResult = ViewEngines.Engines.FindView(ControllerContext, viewName, null);
        // create a context to render a view based on a model
        ViewContext viewContext = new ViewContext(
                ControllerContext,
                viewResult.View,
                new ViewDataDictionary(model),
                new TempDataDictionary(),
                stringWriter
                );

        // render the view to a HTML code
        viewResult.View.Render(viewContext, stringWriter);

        // return the HTML code
        return stringWriter.ToString();
    }

    [HttpPost]
    public ActionResult ConvertThisPageToPdf()
    {
        // get the HTML code of this view
        string htmlToConvert = RenderViewAsString("Index", null);

        // the base URL to resolve relative images and css
        String thisPageUrl = this.ControllerContext.HttpContext.Request.Url.AbsoluteUri;
        String baseUrl = thisPageUrl.Substring(0, thisPageUrl.Length - "Home/ConvertThisPageToPdf".Length);

        // instantiate the HiQPdf HTML to PDF converter
        HtmlToPdf htmlToPdfConverter = new HtmlToPdf();

        // hide the button in the created PDF
        htmlToPdfConverter.HiddenHtmlElements = new string[] { "#convertThisPageButtonDiv" };

        // render the HTML code as PDF in memory
        byte[] pdfBuffer = htmlToPdfConverter.ConvertHtmlToMemory(htmlToConvert, baseUrl);

        // send the PDF file to browser
        FileResult fileResult = new FileContentResult(pdfBuffer, "application/pdf");
        fileResult.FileDownloadName = "ThisMvcViewToPdf.pdf";

        return fileResult;
    }

    [HttpPost]
    public ActionResult ConvertAboutPageToPdf()
    {
        // get the About view HTML code
        string htmlToConvert = RenderViewAsString("About", null);

        // the base URL to resolve relative images and css
        String thisPageUrl = this.ControllerContext.HttpContext.Request.Url.AbsoluteUri;
        String baseUrl = thisPageUrl.Substring(0, thisPageUrl.Length - "Home/ConvertAboutPageToPdf".Length);

        // instantiate the HiQPdf HTML to PDF converter
        HtmlToPdf htmlToPdfConverter = new HtmlToPdf();

        // render the HTML code as PDF in memory
        byte[] pdfBuffer = htmlToPdfConverter.ConvertHtmlToMemory(htmlToConvert, baseUrl);

        // send the PDF file to browser
        FileResult fileResult = new FileContentResult(pdfBuffer, "application/pdf");
        fileResult.FileDownloadName = "AboutMvcViewToPdf.pdf";

        return fileResult;
    }
} 
```

Source of this sample code: [How to convert HTML to PDF using HiQPDF](http://www.c-sharpcorner.com/Blogs/9666/convert-html-to-pdf-in-Asp-Net-mvc-razor.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T12:41:03.587

只需创建 pdf 服务器端并返回 File 而不是 html 视图。我不知道您使用哪种 pdf 提供程序，但这是 iTextSharp 的解决方案：

[如何在 MVC 中将 PDF 返回到浏览器？](https://stackoverflow.com/questions/1510451/how-to-return-pdf-to-browser-in-mvc)

# android - 在 android 4.0.3 中向 facebook 墙发布消息时出错

> ID：11560444
> 
> 赞同：3
> 
> 时间：2012-07-19T12:01:53.353
> 
> 标签：android, facebook, facebook-graph-api, http-post

我尝试在用户 facebook 墙上发布消息。它适用于以前的平台版本，但在 Android 4.0.3 上我有错误：

```
 07-19 14:53:02.945: W/System.err(29740): java.net.UnknownHostException: Unable to resolve host "graph.facebook.com": No address associated with hostname
07-19 14:53:02.965: W/System.err(29740):    at java.net.InetAddress.lookupHostByName(InetAddress.java:436)
07-19 14:53:02.965: W/System.err(29740):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:245)
07-19 14:53:02.965: W/System.err(29740):    at java.net.InetAddress.getAllByName(InetAddress.java:220)
07-19 14:53:02.965: W/System.err(29740):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
07-19 14:53:02.965: W/System.err(29740):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
07-19 14:53:02.965: W/System.err(29740):    at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
07-19 14:53:02.965: W/System.err(29740):    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
07-19 14:53:02.965: W/System.err(29740):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
07-19 14:53:02.965: W/System.err(29740):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
07-19 14:53:02.965: W/System.err(29740):    at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:460)
07-19 14:53:02.965: W/System.err(29740):    at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:441)
07-19 14:53:02.965: W/System.err(29740):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
07-19 14:53:02.965: W/System.err(29740):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
07-19 14:53:02.975: W/System.err(29740):    at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
07-19 14:53:02.975: W/System.err(29740):    at libcore.net.http.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:164)
07-19 14:53:02.975: W/System.err(29740):    at com.facebook.android.Util.openUrl(Util.java:193)
07-19 14:53:02.975: W/System.err(29740):    at com.facebook.android.Facebook.request(Facebook.java:751)
07-19 14:53:02.975: W/System.err(29740):    at com.koloneme.socialnetworking.FacebookUtility.postOnWall(FacebookUtility.java:115)
07-19 14:53:02.975: W/System.err(29740):    at com.koloneme.socialnetworking.FacebookUtility.facebookAuthorization(FacebookUtility.java:65)
07-19 14:53:02.975: W/System.err(29740):    at com.koloneme.socialnetworking.FacebookActivity.onCreate(FacebookActivity.java:33)
07-19 14:53:02.975: W/System.err(29740):    at android.app.Activity.performCreate(Activity.java:4538)
07-19 14:53:02.975: W/System.err(29740):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
07-19 14:53:02.975: W/System.err(29740):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2158)
07-19 14:53:02.975: W/System.err(29740):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2237)
07-19 14:53:02.975: W/System.err(29740):    at android.app.ActivityThread.access$600(ActivityThread.java:139)
07-19 14:53:02.975: W/System.err(29740):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1262)
07-19 14:53:02.975: W/System.err(29740):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-19 14:53:02.975: W/System.err(29740):    at android.os.Looper.loop(Looper.java:154)
07-19 14:53:02.975: W/System.err(29740):    at android.app.ActivityThread.main(ActivityThread.java:4974)
07-19 14:53:02.975: W/System.err(29740):    at java.lang.reflect.Method.invokeNative(Native Method)
07-19 14:53:02.975: W/System.err(29740):    at java.lang.reflect.Method.invoke(Method.java:511)
07-19 14:53:02.975: W/System.err(29740):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-19 14:53:02.975: W/System.err(29740):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-19 14:53:02.975: W/System.err(29740):    at dalvik.system.NativeStart.main(Native Method)
07-19 14:53:02.975: W/System.err(29740): Caused by: libcore.io.GaiException: getaddrinfo failed: EAI_NODATA (No address associated with hostname)
07-19 14:53:02.975: W/System.err(29740):    at libcore.io.Posix.getaddrinfo(Native Method)
07-19 14:53:02.975: W/System.err(29740):    at libcore.io.ForwardingOs.getaddrinfo(ForwardingOs.java:55)
07-19 14:53:02.975: W/System.err(29740):    at java.net.InetAddress.lookupHostByName(InetAddress.java:421)
07-19 14:53:02.975: W/System.err(29740):    ... 33 more
07-19 14:53:03.075: W/webcore(29740): java.lang.Throwable: EventHub.removeMessages(int what = 105) is not supported before the WebViewCore is set up.
07-19 14:53:03.075: W/webcore(29740):   at android.webkit.WebViewCore$EventHub.removeMessages(WebViewCore.java:1889)
07-19 14:53:03.075: W/webcore(29740):   at android.webkit.WebViewCore$EventHub.access$8500(WebViewCore.java:973)
07-19 14:53:03.075: W/webcore(29740):   at android.webkit.WebViewCore.removeMessages(WebViewCore.java:2088)
07-19 14:53:03.075: W/webcore(29740):   at android.webkit.WebView.sendViewSizeZoom(WebView.java:3450)
07-19 14:53:03.075: W/webcore(29740):   at android.webkit.ZoomManager.setZoomScale(ZoomManager.java:679)
07-19 14:53:03.075: W/webcore(29740):   at android.webkit.ZoomManager.access$1900(ZoomManager.java:59)
07-19 14:53:03.075: W/webcore(29740):   at android.webkit.ZoomManager$PostScale.run(ZoomManager.java:1174)
07-19 14:53:03.075: W/webcore(29740):   at android.os.Handler.handleCallback(Handler.java:607)
07-19 14:53:03.075: W/webcore(29740):   at android.os.Handler.dispatchMessage(Handler.java:92)
07-19 14:53:03.075: W/webcore(29740):   at android.os.Looper.loop(Looper.java:154)
07-19 14:53:03.075: W/webcore(29740):   at android.app.ActivityThread.main(ActivityThread.java:4974)
07-19 14:53:03.075: W/webcore(29740):   at java.lang.reflect.Method.invokeNative(Native Method)
07-19 14:53:03.075: W/webcore(29740):   at java.lang.reflect.Method.invoke(Method.java:511)
07-19 14:53:03.075: W/webcore(29740):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-19 14:53:03.075: W/webcore(29740):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-19 14:53:03.075: W/webcore(29740):   at dalvik.system.NativeStart.main(Native Method) 
```

我正在使用这个 facebook sdk - [https://github.com/facebook/facebook-android-sdk/](https://github.com/facebook/facebook-android-sdk/)

这是我在墙上发布消息的代码：

```
 private static void postOnWall(String msg) {
            Log.d(LOGTAG, "Testing graph API wall post");
             try {
                 //   String response = facebook.request("me");
                    Bundle parameters = new Bundle();
                    parameters.putString("message", msg);
                    parameters.putString("description", "test test test");
                    String response = facebook.request("me/feed", parameters, 
                            "POST");
                    Log.d(LOGTAG, "got response: " + response);
                    if (response == null || response.equals("") || 
                            response.equals("false")) {
                       Log.v(LOGTAG, " error Blank response");
                    }
             } catch(Exception e) {
                 e.printStackTrace();
             }
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T12:07:10.467

出现此异常的原因有以下三个：

1.  您尚未在清单中声明互联网权限
2.  该设备没有互联网连接，或者有一个在 DNS 级别阻止 facebook 访问的设备。如果您使用公司代理，请尝试使用家庭网络。
3.  Facebook 的服务器暂时无法工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:23:52.110

我明白了

得到响应：{“错误”：{“消息”：“必须使用活动访问令牌来查询有关当前用户的信息。”，“类型”：“OAuthException”，“代码”：2500}}

# android - 如何依次播放视频？

> ID：11560445
> 
> 赞同：1
> 
> 时间：2012-07-19T12:02:04.297
> 
> 标签：android, video

我需要一个接一个地播放视频。我尝试在谷歌搜索，但没有得到任何答案。请帮忙。有点紧急。

这是我的代码

```
public class PlayThisVideo extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        mediaController=new MediaController(PlayThisVideo.this);
        Uri videoURI=Uri.parse("android.resource://com.VideoAppProject/"+R.raw.baa_baaa_blacksheep);
        videoview.setMediaController(mediaController);
        videoview.setVideoURI(videoURI);
        videoview.requestFocus();
        videoview.start();

        videoview.setOnCompletionListener(new OnCompletionListener() {

            public void onCompletion(MediaPlayer mp) {
                // TODO Auto-generated method stub

                Uri videoURI=Uri.parse("android.resource://com.VideoAppProject/"+R.raw.ding_dong_bell);
                videoview.setMediaController(mediaController);
                videoview.setVideoURI(videoURI);
                videoview.requestFocus();
                videoview.start(); 

            }
        }); 
    }
} 
```

我需要循环播放视频，以便它们一个接一个地播放

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:16:50.407

尝试这个：

```
videoView = (VideoView) findViewById(R.id.v);
setup();
videoView.setOnCompletionListener(completionListener); 
```

设置功能：

```
public void setup() {
        Uri uri = Uri.parse("android.resource://" + getPackageName() + "/"
                + R.raw.test);
        videoView.setVideoURI(uri);
        videoView.start();
    } 
```

将 onCompletionListener 实现为：

```
OnCompletionListener completionListener=new OnCompletionListener() {

        public void onCompletion(MediaPlayer mp) {
            mp.stop();
            setup();
        }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-26T07:23:34.740

```
private int[] ids = {R.raw.vid1, R.raw.vid2, R.raw.vid3, R.raw.vid4, R.raw.vid5};
private int index = 1;
private VideoView myVideo1; 
```

创建时

```
//Video Field
    myVideo1 = (VideoView) findViewById(R.id.myvideoview);
    myVideo1.requestFocus();
    myVideo1.setVideoURI(getPath(index));
    index++;

    myVideo1.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
        @Override
        public void onPrepared(MediaPlayer mp) {
            myVideo1.start();
        }
    });

    myVideo1.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
        @Override
        public void onCompletion(MediaPlayer mediaPlayer) {
            if (index == ids.length) index = 1;
            index++;
            myVideo1.setVideoURI(getPath(index));
        }
    });

    private Uri getPath(int id) {
    return Uri.parse("android.resource://" + getPackageName() + "/raw/vid" + id);
} 
```

我们假设您的视频位于 raw 文件夹中，名称为 vid1 vid2 等。

# javascript - Javascript,getTime()

> ID：11560448
> 
> 赞同：5
> 
> 时间：2012-07-19T12:02:11.983
> 
> 标签：javascript, gettime

我试图了解一些关于`getTime()`，我的问题是，我正在设置一个**新的 Date**，让我们说：**23,07,2012**。当我使用`getTime()`它时，我应该得到自**01,01,1970 以来的毫秒数。** 当我将得到的值除以`getTime()`( **1000*60*60*24)**时，我应该得到从**01,01,1970**到**05,07,2012**的天数，但不知何故我得到了一个带小数点的数字**(15543.875 )**我不明白为什么，我的意思是从**01,01,1970**和**23,07,2012**我应该得到一个整数（我的想法），我知道我真的错了，如果有人可以帮我理解为什么结果中的小数点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T12:07:20.723

如果您正在设置一个日期`new Date(2012, 06, 23)`，它将根据客户端的时区设置，其中 as `.getTime()`is `UTC`。你想要[`Date.UTC`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/UTC)：

```
Date.UTC(2012,6,23) / (1000*60*60*24)
//15544 For any computer

new Date(2012, 06, 23) / (1000*60*60*24)
//15543.875 For my computer, I am coincidentally in  the same timezone as Israel. This result will depend on what timezone the client is. 
```

# linux - 输入波特率与输出波特率

> ID：11560450
> 
> 赞同：1
> 
> 时间：2012-07-19T12:02:22.237
> 
> 标签：linux, serial-port

操作系统是 Ubuntu 10.04 32 位。

这些年来，我一直在不知不觉中假设输入和输出波特率是对称的，输入 == 输出。然而，我刚刚注意到，Linux termios 结构包含输入和输出波特率的字段。并且有“输入”和“输出”版本的 buadrate setter/getter -- cfsetospeed/cfsetispeed、cfgetospeed/cfsgetispeed 它们实际上是独立的控件，我可以以不同的速度说话和听吗？我会想要吗？

我在谷歌上能找到的一点是，将输入速度设置为 0 会告诉输入速度与输出速度相匹配。正确的？如果我将输出速度设置为 9600，然后将输入速度设置为零，则输入速度应为 9600。如果我将输出速度更改为 19200，会发生什么情况？输入速度也会变成19200吗？

对不起，我应该去尝试一些更简单的问题。我的串行连接硬件处于未知状态，我不确定它的行为如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:00:59.157

并非所有的串行端口都支持单独配置这些，但 termios API 确实为您提供了单独的控件来支持那些做的。

您想要不对称速率的情况将非常明显（您正在与之交谈的设备的手册列出了输入和输出的不同速率，并且您同时需要两者）。

没有充分的理由使用“零表示输入和输出相同”。只需明确地将它们设置为相同，然后您就不必担心极端情况。

# java - 难以从字符串列表中播放真值

> ID：11560452
> 
> 赞同：2
> 
> 时间：2012-07-19T12:02:33.280
> 
> 标签：java, list, csv, iterator

我编写了一个测试程序，使用 openCSV 库从 csv 文件中获取值。

我的问题在于从文件中读取值，然后将它们显示为输出。我可以遍历列表，但不断给出机器代码作为值，而不是预期的字符串值。

以下是测试代码，任何建议将不胜感激。

```
public class TestParse{

public static void main(String[] args){

    try{
        CSVReader reader = new CSVReader(new FileReader("weightMeasurements2.rtf"));

        List<String[]> myEntries = reader.readAll();

        Iterator<String[]> flavoursIter = myEntries.iterator();
        while ( flavoursIter.hasNext() ){
            System.out.println( flavoursIter.next() );
        }

        for (int i = 0; i<myEntries.size();i++) {
            System.out.println(myEntries.get(i));
        }

    }catch(IOException e){
        e.printStackTrace();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:04:17.993

您的每个元素`List`都是一个数组。要打印这个，你需要一个循环在另一个循环中。例如：

```
while (flavoursIter.hasNext()) {
    String[] entries = flavoursIter.next();
    for (String str : entries) {
        System.out.println(str);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:06:06.993

您正在打印代表整个数组的字符串值。您将需要遍历元素本身的字符串元素，或者调用[Arrays.toString()](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5B%5D%29)

# ruby - 虾 - 从 URL 导入图像

> ID：11560455
> 
> 赞同：14
> 
> 时间：2012-07-19T12:02:36.920
> 
> 标签：ruby, image, relative-path, prawn

我似乎无法弄清楚如何从 url 导入图像

要从我的本地主机导入图像，我使用：

```
image"./assets/images/img.png" 
```

当我用 URL 替换路径时，它说

```
`image' : URL not found 
```

有没有解决方案，或者我应该创建一个下载图像并使用它返回的路径的def？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-20T04:56:14.863

您需要执行以下操作 -

```
require "open-uri"

Prawn::Document.generate(INSERT_YOUR_PDF_FILENAME_HERE) do 
   image open(INSERT_YOUR_URL_HERE)
end 
```

有关详细信息，请参阅[http://rubydoc.info/gems/prawn/0.12.0/frames](http://rubydoc.info/gems/prawn/0.12.0/frames)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-16T09:46:53.297

我得到了这个为我工作：

```
image open("https://driver.mbpgroup.eu/images/mbp_logo.jpg"), position: :right, width: 250 
```

我无法让它为我工作（Prawn 文档）：

```
image "https://driver.mbpgroup.eu/images/mbp_logo.jpg", position: :right, width: 250 
```

# linux - 接收不需要的多播流量的应用程序

> ID：11560460
> 
> 赞同：4
> 
> 时间：2012-07-19T12:03:01.610
> 
> 标签：linux, kernel, multicast

我有以下情况；主机 HostRec：

1) 主机的 NIC 绑定 0 已加入多播组 multicast1 和多播2 - 因为应用程序已请求此。2) 我在同一主机 HostRec 上启动了一个多播侦听应用程序，它侦听多播 3 和 UDP 端口 3 上的流量。3) 我在另一台主机 HostSend 上启动多播发送应用程序。

此时我有以下3种情况：

a) 如果 step3 的发送应用程序在多播地址 multicast3 和 udp port3 上发布，则消息被上面 step2 启动的侦听应用程序正确接收。这是预期的行为。

b) 如果多播发送应用程序在多播2 和端口3 上发布消息，则这些消息仍会被在步骤2 上启动的侦听应用程序接收。如果多播发送应用程序在多播 1 和端口 3 上发布消息，则行为相同。这种行为是错误的。

c) 如果发送应用程序（步骤 3）开始在多播地址 multicast4 和 udp 端口​​ 3 上发布（HostRec 上的 NIC bond0 没有加入该多播组），则在步骤 2 上启动的侦听应用程序没有正确接收到消息。这又是预期的行为。

您能否建议主机的多播内核配置是否有任何问题？

uname -a Linux HostRec 2.6.18-164.2.1.el5 #1 SMP Mon Sep 21 04:37:42 EDT 2009 x86_64 x86_64 x86_64 GNU/Linux

谢谢，索马里奥

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T07:06:38.120

这是预期的行为，尽管起初看起来确实有点奇怪。尽管您认为您正在绑定到多播组/端口，但您真正在做的是：

1.  绑定到接口上的 UDP 端口。
2.  将此接口订阅到给定的多播组。

这两个动作是相当独立的。第一个的结果是您的进程将接收所有的 UDP 数据包（无论是否多播）并且发往您的端口/接口。第二个的结果是确保发送到给定多播地址的数据包（由网络路由器）发送到您的接口。

大多数人不希望这样，事实上他们只想接收单个多播组的数据，不想担心网络上发生的其他事情。实现这一点的最佳方法是确保一个端口仅用于一个多播组。一种常见的做法是使用多播组的最后一个八位字节作为端口的最低有效八位字节。例如 224.0.0.22/端口 19022 和 224.0.0.150/19150。这样你就永远不会得到错误的数据（只要没有人通过 UDP 将数据单播到这些端口）。

# php - 使用 RMySQL 包将 R 中的回归结果存储在 MySQL 中

> ID：11560461
> 
> 赞同：1
> 
> 时间：2012-07-19T12:03:06.807
> 
> 标签：php, r, linear-regression, lm, rmysql

我是 R 新手，遇到了一个问题。我将通过一个例子来解释它。

我正在使用 R 和 php。我有一个计算线性回归的 R 脚本：

```
reg_result <- lm( Y ~ A1 + A2 + A3, data=query_result) 
```

我正在使用回归结果`reg_result`：`prediction`

```
predict(reg_result, another_dataframe, interval="predict", level = 0.20) 
```

它工作得很好。

但我的问题是我需要在某些时间间隔内使用`predict`with `reg_result`，比如说每 1 小时一次。

那么有什么方法可以保留回归的结果`reg_result`以供以后使用。

我使用过 RMySQL，但我不知道如何将回归结果存储在 mysql 中。

任何帮助将不胜感激。

如果需要，我可以提供更多详细信息。

**编辑：**是否可以将 R 对象存储在`MySQL blob`RMySQL 中？正如我用谷歌搜索发现的那样`Currently there are no facilities to import/export BLOBs. in RMySQL`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T06:22:07.623

ROLO 提供的解决方案非常好，并且与我需要的一样工作。

但我采用了其他方法来降低复杂性。

1) 将结果存储在二进制文件中

```
reg_result <- lm( Y ~ A1 + A2 + A3, data=query_result)
saveRDS(reg_result,"example.dat"); 
```

2）并在需要时加载

```
reg_result <- readRDS("example.dat", refhook = NULL);
predict(reg_result, another_dataframe, interval="predict", level = 0.20) 
```

希望它可以帮助其他人了解如何将回归结果存储在二进制文件中并在需要时进行检索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T10:34:19.423

我所做的（使用 RODBC，但这是一个小细节）是从 lm 对象中提取回归系数，如下所示（对于 y~x）：

```
intercept = lm$coefficients[["(Intercept)"]]
slope = lm$coefficients[["x"]]) 
```

然后将这些系数存储在数据库表中，稍后只需使用线性函数与表中的值进行预测，而不是使用预测方法（如`f <- function(x) { intercept + slope*x }`）。

# java - StringTokenizer 不工作

> ID：11560463
> 
> 赞同：-2
> 
> 时间：2012-07-19T12:03:17.773
> 
> 标签：java, android

我有一个字符串

`str=123|apple|apple|apple|dog$`

我喜欢用“|”分隔字符串 特点。

```
 String str = "123|apple|apple|apple|dog$";
    StringTokenizer strString = new StringTokenizer(str..nextToken(), "|");
    int i;
    while (strString.hasMoreElements()) {
        if (i == 0)
            str1 = Loginstring.nextToken();
        else if (i == 1)
            str2 = Integer.Loginstring.nextToken();
        else if (i == 2) {
            str3 = Loginstring.nextToken();
            break;
        }
        i = i + 1;
    } 
```

但它在第一个循环开始时退出（这意味着如果我超过 1 则它从循环中退出），我真的不知道它发生了什么，它有什么问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T12:24:49.133

这就是您要实现的目标

```
String str1 = "", str2 = "", str3 = "", str4 = "", str5 = "";
String str = "123|apple|apple|apple|dog$";
StringTokenizer strString = new StringTokenizer(str, "|");
int k = 0;
while (strString.hasMoreElements()) {
    if (k == 0)
        str1 = strString.nextToken();
    else if (k == 1)
        str2 = strString.nextToken();
    else if (k == 2) {
        str3 = strString.nextToken();
    } else if (k == 3) {
        str4 = strString.nextToken();
    } else if (k == 4) {
        str5 = strString.nextToken();
        break;
    }
    k = k + 1;
}
System.out.println(str1);
System.out.println(str2);
System.out.println(str3);
System.out.println(str4);
System.out.println(str5); 
```

但这可以很容易地在一个语句中完成

```
String[] tokens = str.split("\\|"); // this is that single statment
for (String token : tokens)
    System.out.println(token);

str1 = tokens[0];
str2 = tokens[1];
str3 = tokens[2];
str4 = tokens[3];
str5 = tokens[4];

System.out.println(str1);
System.out.println(str2);
System.out.println(str3);
System.out.println(str4);
System.out.println(str5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:10:38.780

用于`String.split("\\|")`分割字符串。

# c# - 用逗号和点解析字符串以加倍

> ID：11560465
> 
> 赞同：82
> 
> 时间：2012-07-19T12:03:20.880
> 
> 标签：c#

我正在尝试编写一个函数，该函数基本上将字符串数组转换为字符串数组，其中数组中的所有双精度数都舍入到我设置的小数位数。数组中也可以有根本不是双精度值的字符串。

```
string[,] values = new string[1, 3];

values[0, 0] = "hello";
values[0, 1] = "0.123";
values[0, 2] = "0,123";

int decimalPlaces = 2;

double tmp;
string format = "F" + decimalPlaces.ToString();
IFormatProvider provider = CultureInfo.InvariantCulture;
for (int i = 0; i < values.GetLength(0); i++)
{
    for (int j = 0; j < values.GetLength(1); j++)
    {
        if (double.TryParse(values[i, j], out tmp))
        {
            values[i, j] = tmp.ToString(format, provider);
        }
    }
}

Console.ReadLine(); 
```

结果必须是： "hello" , "0.12", "0.12" 但它是 "hello", "123.00", "0.12" 会以错误的方式处理逗号。有没有人对此有一个简单有效的解决方案？

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2013-10-30T09:38:34.920

同时处理 , 和 。作为小数点，您不仅必须用另一个替换一个，而且还要确保使用的文化解析将其解释为小数点。

```
text = text.Replace(',', '.');
return double.TryParse(text, NumberStyles.Any, CultureInfo.InvariantCulture, out value); 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2015-02-24T09:32:45.030

您不需要替换逗号和点..

我遇到了同样的问题。原因很简单，转换文化在解释逗号或点时起着很大的作用。我使用德国文化，其中逗号区分分数，而在其他地方，点就可以了。

这里我做了一个完整的例子来说明区别。

```
string[] doubleStrings = {"hello", "0.123", "0,123"};
double localCultreResult;
foreach (var doubleString in doubleStrings)
{
    double.TryParse(doubleString, NumberStyles.Any, CultureInfo.CurrentCulture, out localCultreResult);
    Console.WriteLine(string.Format("Local culture results for the parsing of {0} is {1}", doubleString, localCultreResult));
}

double invariantCultureResult;
foreach (var doubleString in doubleStrings)
{
    double.TryParse(doubleString, NumberStyles.Any, CultureInfo.InvariantCulture, out invariantCultureResult);
    Console.WriteLine(string.Format("Invariant culture results for the parsing of {0} is {1}", doubleString, invariantCultureResult));
} 
```

结果如下： ![在此处输入图像描述](../Images/c638f1269584e8cf335eac5c0b6f3315.png)

玩弄文化，你会得到你需要的结果。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-07-19T12:13:01.910

您希望将点 ( `.`) 视为逗号 ( `,`)。所以，更换

```
if (double.TryParse(values[i, j], out tmp)) 
```

和

```
if (double.TryParse(values[i, j].Replace('.', ','), out tmp)) 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-07-19T12:06:24.737

问题是您（或系统）无法区分小数分隔符和千位分隔符，因为它们可以是逗号或点。例如：

> 在我的文化中，
> 
> `1.123`是 1000 以上数字的正常表示法；然而
> 
> `1,123`是接近 1 的数字。

使用不变区域性默认使用点作为小数分隔符。一般来说，您应该确保在所有系统上使用相同的常量文化（例如，不变文化）编写所有数字。

如果您确定您的数字从不包含逗号或小数点分隔符（即没有千位分隔符）以外的任何内容，那么我会`String.Replace()`使用带点的逗号，然后像您一样执行其余操作。

否则，您将很难在不了解文化的情况下编写可以区分`1.123`的东西。`1,123`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-02-05T17:30:53.233

制作两种静态文化，一种用于逗号，一种用于点。

```
 var commaCulture = new CultureInfo("en")
    {
        NumberFormat =
        {
            NumberDecimalSeparator = ","
        }
    };

    var pointCulture = new CultureInfo("en")
    {
        NumberFormat =
        {
            NumberDecimalSeparator = "."
        }
    }; 
```

然后根据输入（使用函数）分别使用每一个：

```
 public double ConvertToDouble(string input)
    {
        input = input.Trim();

        if (input == "0") {
            return 0;
        }

        if (input.Contains(",") && input.Split(',').Length == 2)
        {
            return Convert.ToDouble(input, commaCulture);
        }

        if (input.Contains(".") && input.Split('.').Length == 2)
        {
            return Convert.ToDouble(input, pointCulture);
        }

        throw new Exception("Invalid input!");
    } 
```

然后遍历你的数组

```
 var strings = new List<string> {"0,12", "0.122", "1,23", "00,0", "0.00", "12.5000", "0.002", "0,001"};
    var doubles = new List<double>();

    foreach (var value in strings) {
        doubles.Add(ConvertToDouble(value));
    } 
```

即使宿主环境和文化发生变化，这也应该有效。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-03-30T10:00:28.833

简单使用：

```
double.Parse("3.5", CultureInfo.InvariantCulture) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-19T12:06:11.287

使用这个 double.TryParse 的重载来指定允许的格式：

[Double.TryParse 方法（字符串、NumberStyles、IFormatProvider、Double%）](http://msdn.microsoft.com/en-us/library/3s27fasw)

默认情况下，double.TryParse 将根据当前的文化特定格式进行解析。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-11-08T03:23:28.163

从字符串解析十进制数的扩展。

*   无论数字是在字符串的开头、结尾还是中间。
*   无论是否只有数量或大量的“垃圾”字母。
*   无论在 PC 的文化设置中配置什么分隔符：它都会正确解析点和逗号。
*   能够手动设置十进制符号。

    ```
    public static class StringExtension
    {
        public static double DoubleParseAdvanced(this string strToParse, char decimalSymbol = ',')
        {
            string tmp = Regex.Match(strToParse, @"([-]?[0-9]+)([\s])?([0-9]+)?[." + decimalSymbol + "]?([0-9 ]+)?([0-9]+)?").Value;

            if (tmp.Length > 0 && strToParse.Contains(tmp))
            {
                var currDecSeparator = System.Windows.Forms.Application.CurrentCulture.NumberFormat.NumberDecimalSeparator;

                tmp = tmp.Replace(".", currDecSeparator).Replace(decimalSymbol.ToString(), currDecSeparator);

                return double.Parse(tmp);
            }

            return 0;
        }
    } 
    ```

如何使用：

```
"It's 4.45 O'clock now".DoubleParseAdvanced(); // will return 4.45
"It's 4,45 O'clock now".DoubleParseAdvanced(); // will return 4.45
"It's 4:45 O'clock now".DoubleParseAdvanced(':'); // will return 4.45 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-19T12:09:11.957

您可以使用检查字符串是否包含小数点

`string s="";`

```
 if (s.Contains(','))
        { 
        //treat as double how you wish
        } 
```

然后将其视为小数，否则只需传递非双精度值。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-08T07:34:48.450

如果我想解析一个带小数点分隔符的数字，我将使用以下代码段：

```
public bool TryParseDecimal(string value, out decimal result) {
    const string your_separator = ",";

    var numberFormat = new NumberFormatInfo {
            NumberDecimalSeparator = your_separator
    };

    return decimal.TryParse(value, NumberStyles.AllowDecimalPoint, numberFormat, out result);
} 
```

我不认为使用文化或字符串操作表达了用非“。”转换数字的意图。小数点。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-03-03T10:41:15.037

对我来说，使用文化信息不是一种选择，因为该应用程序在具有不同文化的系统上运行，但输入字符串要在未知文化的位置进行解析。

所以我提到规范化字符串表示，然后使用 CultureInfo.InvariantCulture 对其进行转换：

```
 private static double NormalizeAndParse(string strDouble)
    {
        string strDoubleNormalized;

        if (strDouble.Contains(","))
        {
            var strReplaced = strDouble.Replace(",", ".");
            var decimalSeparatorPos = strReplaced.LastIndexOf('.');
            var strInteger = strReplaced.Substring(0, decimalSeparatorPos);
            var strFractional = strReplaced.Substring(decimalSeparatorPos);

            strInteger = strInteger.Replace(".", string.Empty);
            strDoubleNormalized = strInteger + strFractional;
        }
        else
        {
            strDoubleNormalized = strDouble;
        }

        return Double.Parse(strDoubleNormalized, NumberStyles.Any, CultureInfo.InvariantCulture);
    } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-03-31T22:05:48.583

另一种选择是使用 CultureInfo 类中小数点分隔符的信息。知道我们可以用“。”替换“，”。需要时反之亦然。如果需要对 1,000,000.23 之类的数字进行处理，则此类中还提供了数字分组符号。

```
string decimalSeparator = CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator;
        string value = "";

        if (decimalSeparator == ".")
        {
            value = rateLimitTextBox.Text.Replace(",", ".");
        }
        else if (decimalSeparator == ",")
        {
            value = rateLimitTextBox.Text.Replace(".", ",");
        }

        bool LimitAcceptable = decimal.TryParse(value, NumberStyles.Any, CultureInfo.CurrentCulture, out decimal limit); 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2015-05-27T15:27:07.213

试试这个……它对我有用。

```
double vdouble = 0;
string sparam = "2,1";

if ( !Double.TryParse( sparam, NumberStyles.Float, CultureInfo.InvariantCulture, out vdouble ) )
{
    if ( sparam.IndexOf( '.' ) != -1 )
    {
        sparam = sparam.Replace( '.', ',' );
    }
    else
    {
        sparam = sparam.Replace( ',', '.' );
    }

    if ( !Double.TryParse( sparam, NumberStyles.Float, CultureInfo.InvariantCulture, out vdouble ) )
    {
        vdouble = 0;
    }
} 
```

# iphone - XCode - 动态创建的按钮的文本标签不是垂直居中

> ID：11560466
> 
> 赞同：0
> 
> 时间：2012-07-19T12:03:21.900
> 
> 标签：iphone, objective-c, xcode, cocoa

我为我的 Iphone 应用程序动态创建了一个按钮..

一切都很顺利，直到我向按钮添加了图像，突然按钮的文本标签不再垂直居中..

下图中的蓝线代表按钮的中间。

[我的问题](http://www.pardio.net/xcode/stackoverflow/stackoverflow1.jpg)

有人对我能做些什么来解决这个问题有任何想法吗？我已经尝试将垂直对齐设置为居中，但它什么也没做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:08:54.170

`UIButton`试图将其内容居中。所以在这种情况下，图像和文本居中。但是，您需要围绕图像和文本的内容插图进行播放，以使其成为现实的中心。

您可以查看这篇文章以获得进一步的指导。

[UIButton：如何使用 imageEdgeInsets 和 titleEdgeInsets 使图像和文本居中？](https://stackoverflow.com/q/2451223/593709)

# security - 如何防止钓鱼网站被上传到共享服务器？

> ID：11560470
> 
> 赞同：1
> 
> 时间：2012-07-19T12:03:31.813
> 
> 标签：security, cpanel, phishing

我们有超过 1000 多个客户正在使用各种 CMS 建立网站。主要使用 Wordpress 和 Joomla，这些网站被黑客入侵，钓鱼网站被上传。请让我们知道我们将如何防止它。

我们已经在服务器上运行了 maldet。但它没有检测到很多网络钓鱼文件夹，因为它主要是 html 格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:50:39.203

你采取了哪些措施，安全方面？我不认为，作为主机商，您可以 100% 防止客户端站点的黑客攻击/网络钓鱼/Xss，因为这些攻击利用客户端级别的漏洞（即，如果客户端使用[一些有漏洞的 WP 插件](http://packetstormsecurity.org/files/111319/wpdeans-shell.txt)，那么您几乎无能为力关于它）。

你可以做的是：

A.) 尝试隔离每个客户端以消除溢出。这意味着 - 尽可能多地分离所有内容（用户数据/站点资源等）

B.) 提供某种形式的客户端级别保护（作为附加服务）以提供解决方案，至少对于某些人而言。我在一家安全公司（Incapsula）工作，我们与此类托管合作伙伴/转售商合作，我知道许多其他人也这样做。

C.) 提高意识，如果您的客户使用 Joomla 和 WP，请找出常见的威胁并告知您的客户。通知新的补丁/版本并提供更新的链接等等......

希望这能帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-28T10:18:33.380

结果显示的可能不是网络钓鱼，但我注意到网络钓鱼站点的一件事是有许多 32 个字符长的文件夹，而且这些文件夹很多。在每个文件夹中，您可能会发现网络钓鱼内容。使用以下命令查找具有 32 个字符长名称的文件夹并手动扫描以检查它是否是网络钓鱼。

```
#find /home*/*/public_html/* -type d -name "????????????????????????????????" > phishing.txt 
```

您可以自由使用其他技术，如果您愿意，可以分享。

# fragment-identifier - 片段 ID 问题，第二次加载布局时应用程序崩溃

> ID：11560476
> 
> 赞同：1
> 
> 时间：2012-07-19T12:03:44.193
> 
> 标签：fragment-identifier

[为同一问题充气片段时出错](https://stackoverflow.com/questions/11532361/error-inflating-fragment) ，当我第二次单击列表项时，应用程序崩溃了，这也应该第二次加载相同的布局。任何人都可以在这里帮忙。

# php - PHP 端口 80 重定向 + 'argv'

> ID：11560478
> 
> 赞同：4
> 
> 时间：2012-07-19T12:03:45.483
> 
> 标签：php, redirect

这是 Live Http Headers 的输出：

```
http://www.sitename.com/loginapplet.ws?mod=main&dest=maintenance.php

GET /loginapplet.ws?mod=main&dest=maintenance.php HTTP/1.1
Host: www.sitename.com
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:14.0) Gecko/20100101 Firefox/14.0.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Referer: http://www.sitename.com/maintenance.php?COLLCC=3673562052&
Cookie: __utma=101585024.21651761.1342192562.1342694644.1342697578.76;     __utmz=101585024.1342192562.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none);     PHPSESSID=83ce1589fb215697fb3cba35531f133f; __utmc=101585024;     __utmb=101585024.2.10.1342697578
DNT: 1
Connection: keep-alive

HTTP/1.1 302 OK
Connection: Keep-Alive
Location: http://www.sitename.com/loginapplet.ws?COLLCC=3673562052&mod=main&        dest=maintenance.php
X-Antivirus: avast! 4
X-Antivirus-Status: Clean 
```

为清楚起见，问题在于`?COLLCC=`在查询字符串中添加了 on。我做了一些谷歌搜索，发现其他 URL 附加了这个字符串，但它们都没有任何帮助。

有谁知道是什么原因造成的？我的服务器甚至不使用 Avast，而且，我的应用程序中没有任何东西在内部导致此重定向..

问题似乎已经自行解决了。我不确定为什么 apache 没有像 nginx 那样遭受这个问题，但我会继续猜测这是需要审查的 nginx 问题。

# c# - ThreadStateException c#

> ID：11560479
> 
> 赞同：3
> 
> 时间：2012-07-19T12:03:46.497
> 
> 标签：c#, multithreading, thread-safety, thread-state

我有一个 ThreadStateException ，我需要 STAThread ......问题昨天出现了，我什至从我的 git repo 中检查了以前的版本（它们是 100% 工作的） - 现在它们不是。

主要代码：

```
[STAThread]
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new ClientList());
} 
```

和ClientList表单方法：

```
private void button2_Click(object sender, EventArgs e)
{
    [...]
    OpenFileDialog ofd = new OpenFileDialog();
    DialogResult result = ofd.ShowDialog();
    [...]
} 
```

知道为什么 STA 不起作用吗？

**编辑：**在新的（测试）应用程序中一切正常。只有这个项目会在 OpenFileDialog 上引发异常。

**编辑 2：** getAppartmentState 从 Main 的第一行显示应用程序位于 MTA 中。[STAThread] 是否被忽略？

# git - 推送到 Heroku 时超时

> ID：11560481
> 
> 赞同：1
> 
> 时间：2012-07-19T12:03:48.857
> 
> 标签：git, compiler-construction, heroku, timeout, push

嗨，我在推送到 heroku 时遇到编译器超时....我真的不明白为什么，因为我的 gem 没有任何更改，并且之前已成功推送到 heroku....

这是日志：

```
-----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Using Ruby version: ruby-1.9.3
-----> Installing dependencies using Bundler version 1.2.0.pre
       Running: bundle install --without development:test --path vendor/bundle --binstubs bin/
       Fetching gem metadata from https://rubygems.org/........
/app/slug-compiler/lib/utils.rb:65:in `block (2 levels) in spawn': command='/app/slug-compiler/lib/../buildpacks/ruby/bin/compile /tmp
/build_2z19s0hxp0vh2 /app/tmp/repo.git/.cache' exit_status=0 out='' at=timeout elapsed=578.1850752830505 (Utils::TimeoutError)
        from /app/slug-compiler/lib/utils.rb:51:in `loop'
        from /app/slug-compiler/lib/utils.rb:51:in `block in spawn'
        from /app/slug-compiler/lib/utils.rb:47:in `popen'
        from /app/slug-compiler/lib/utils.rb:47:in `spawn'
        from /app/slug-compiler/lib/buildpack.rb:38:in `block in compile'
        from /app/slug-compiler/lib/buildpack.rb:36:in `fork'
        from /app/slug-compiler/lib/buildpack.rb:36:in `compile'
        from /app/slug-compiler/lib/slug.rb:451:in `block in run_buildpack'
        from /app/slug-compiler/lib/utils.rb:120:in `log'
        from /app/slug-compiler/lib/slug.rb:689:in `log'
        from /app/slug-compiler/lib/slug.rb:450:in `run_buildpack'
        from /app/slug-compiler/lib/slug.rb:110:in `block (2 levels) in compile'
        from /app/slug-compiler/lib/utils.rb:101:in `block in timeout'
        from /usr/local/lib/ruby/1.9.1/timeout.rb:58:in `timeout'
        from /app/slug-compiler/lib/utils.rb:101:in `rescue in timeout'
        from /app/slug-compiler/lib/utils.rb:96:in `timeout'
        from /app/slug-compiler/lib/slug.rb:99:in `block in compile'
        from /app/slug-compiler/lib/utils.rb:120:in `log'
        from /app/slug-compiler/lib/slug.rb:689:in `log'
        from /app/slug-compiler/lib/slug.rb:98:in `compile'
        from /app/slug-compiler/bin/slugc:85:in `block in <main>'
        from /app/slug-compiler/lib/slug.rb:459:in `block in lock'
        from /app/slug-compiler/lib/repo_lock.rb:44:in `call'
        from /app/slug-compiler/lib/repo_lock.rb:44:in `run'
        from /app/slug-compiler/lib/slug.rb:459:in `lock'
        from /app/slug-compiler/bin/slugc:66:in `<main>'
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:mysite.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:mysite.git' 
```

似乎这与我的 gems 文件有些相关，因为如果我运行`heroku run bundle update`它也会停止

我的 gem 文件源“ [https://rubygems.org](https://rubygems.org) ”

```
ruby '1.9.3'
gem 'rails', '3.2.5'
gem 'heroku', '~> 2.26.6'
gem "paperclip", " ~> 3.0"

gem 'jquery-rails', '2.0.1'
gem 'bootstrap-sass', '2.0.0'
gem 'bcrypt-ruby', '3.0.1'
gem 'faker', '1.0.1'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.6'
gem 'prototype-rails'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.10.0'
  gem 'guard-rspec', '0.5.5'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.4'
end

group :test do
  gem 'capybara', '1.1.2'
  gem 'factory_girl_rails', '1.4.0'
  gem 'cucumber-rails', '1.2.1', :require => false
  gem 'database_cleaner', '0.7.0'
  gem 'guard-spork', '0.3.2'  
  gem 'spork', '0.9.0'
  gem 'launchy', '2.1.0'
  # gem 'rb-fsevent', '0.9.1', :require => false
  # gem 'growl', '1.0.3'
end

group :production do
  gem 'pg'
  gem 'thin'
end 
```

这里有一个非常相似的帖子：[Heroku push failed，也许是 ruby​​gems 超时](https://stackoverflow.com/questions/8623042/heroku-push-failing-perhaps-timeout-from-rubygems)，它指向一个单一的宝石......但它没有说明我们如何找到破碎的宝石......有什么想法吗？

**编辑**

这似乎是 pg Gem 的问题。我通过一一评论我的非静态（未指定版本）发现了它。如果我不包括 pg gem，则推送完成。

我应该用命令检查我以前的 gems 版本是什么

```
heroku run gem query --local > heroku_gems.txt 
```

但是因为我现在没有，我注定要手动找到破解版：-S

**编辑 2**

我尝试安装一些以前版本的 pg，例如 0.12.2 版，但这仍然无法正常工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:25:51.823

一整天后，注意到 Heroku 服务器存在一些 SSL 问题，我注意到`config.force_ssl = true`我的 production.rb 文件中有配置。

所以我只是试了一下，然后放了`config.force_ssl = false`，瞧，我又活过来了！

好吧，后来我又把它变成了真的，仍然设法再次发布......

猜猜这是heroku的事情

# c++ - 将 CComBSTR 与 wcscmp 函数一起使用而不进行强制转换是否安全？

> ID：11560488
> 
> 赞同：3
> 
> 时间：2012-07-19T12:04:13.633
> 
> 标签：c++, com

我有以下问题考虑以下 C++ 代码片段

```
CComBSTR bs1=L"str1";
if (wcscmp(bs1,L"str2"))
{ 
 ....
} 
```

**问题是：在 wcscmp 函数中使用 CComBSTR 而不进行强制转换是否安全？**

正如我从 MSDN 知道的那样，CComBSTR 没有显式转换运算符（而 _bstr_t 存在）提前谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T12:34:25.750

从技术上讲不是，一个`BSTR`罐头店`L"str2\0foo"`。这将`wcscmp()`决定匹配，您还必须比较字符串长度以避免这种故障模式。

`CComBSTR`覆盖做正确事情的 operator==() ，不妨使用它：

```
CComBSTR bs1=L"str1";
if (bs1 == L"str2"))
{ 
    // etc..
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T12:58:58.780

依靠自动转换 from `CComBSTR`to是安全`const WCHAR*`的，唯一的例外`NULL`是 的有效值`BSTR`，并且`NULL`参数**不是**`wcscmp` [导致](http://msdn.microsoft.com/en-us/library/e0z9k731%28v=vs.80%29.aspx#remarksToggle)运行时调用无效参数处理程序的有效参数。

只要您确定您的`BSTR`原始/包装值是非 NULL 的，您就可以安全地进行转换。

正如其他人指出的那样，请注意作为终止符`WCHAR*`字符串的嵌入零字符，但是由于存在显式字符串长度（在值前缀中），它可能是 BSTR 有效负载的一部分。

仅供参考，这`CComBSTR`是`operator ==`在内部使用[`VarBstrCmp`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221038%28v=vs.85%29.aspx)API 进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T12:10:49.257

是的，除了以长度为前缀之外，BSTR 还以空结尾，并且[存在从 CComBSTR 到 BSTR 的转换](http://msdn.microsoft.com/en-US/library/dbyydwx6%28v=vs.80%29)（通过`m_str`成员）。

因此，您可以使用`wcscmp(bs1, L"str2")`或`wcscmp(bs1.m_str, L"str2")`，它们是等效的。

但是，BSTR 可能会嵌入空字符，请注意。如果字符串仅等于第一个空字符，则使用`wcscmp(bstr1, bstr2)`可能无法满足您的要求。

# qt - 从 QWidget 继承并使类成为模板

> ID：11560489
> 
> 赞同：4
> 
> 时间：2012-07-19T12:04:16.363
> 
> 标签：qt, templates, qt-designer

我希望这不是一个愚蠢的问题，但是我对模板非常缺乏经验，这个问题超出了我的想象。我在一个严重依赖 QT Designer 的 GUI 设计项目上工作，我想提供一个特殊的 QWidget 子类，它允许抽象与复杂服务机制的交互。此小部件需要特定于类的信息，以解析服务。编码本身是在 Visual Studio 2008 中完成的。

所以我想要创建的是一个模板化的 QWidget 子类。以我有限的知识，我尝试在课堂前拍下通常的模板语句：

```
template <class T>
class QmitkMyWidget :public QWidget 
```

不出所料，这并不容易。生成的 moc 类起作用。

```
error PRJ0019: A tool returned an error code from "Generating Qmitk/moc_QmitkMyWidget.cxx" 
```

这对我来说似乎是合乎逻辑的，因为我“没有告诉他们该做什么”。我想我必须在 QT Designer 中指定模板，但我真的不知道如何，不幸的是，搜索在 QT Designer 中找到了大量代码模板的结果，但没有关于通用编程概念。我真的很感激任何提示 && || 有用的资源/文章。谢谢你的时间！

编辑：第一个代码中的愚蠢错字=/

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T14:17:42.553

我已经确认这是不可能的。资料来源：[moc 概念的局限性](http://qt-project.org/doc/qt-4.8/moc.html#limitations)

要点是，mocs 是经过预处理的，但模板仅在编译时翻译成实际代码。

编辑：我可以补充一点，而不是使类本身模板化，我现在只模板化公共函数，到目前为止效果很好，尽管它当然需要消费者在每次调用函数时输入声明。

# c++ - 为什么 std::cout 不打印联合中的值，但 printf 呢？

> ID：11560497
> 
> 赞同：2
> 
> 时间：2012-07-19T12:04:59.240
> 
> 标签：c++, printf, cout

在下面的代码`std::cout`中不会打印值，但`printf`会打印。为什么是这样？

```
#include <iostream>
#include <cstdio>

struct bits
{
    union
    {
        unsigned char b;
        struct
        {
            unsigned char b0:1, b1:1, b2:1, b3:1, b4:1, b5:1, b6:1, b7:1;
        };
    };
};

const union
{
    bits b[3];
    char c[3];
} CU = { .c = { -1, 0, 1 }};

int main()
{
    std::cout << "----- chars:\n";

    std::cout << "\tstd::cout (c): " << CU.c[0]
                 << ", " << CU.c[1]
                 << ", " << CU.c[2] 
                             << "\n";

    printf("\tprintf (c): %d, %d, %d\n", CU.c[0],
                             CU.c[1],
                             CU.c[2]);

    std::cout << "\n----- bits:\n";

    for (int i=0;i<3;i++)
    {
        std::cout << "\tstd::cout\n\t\t(bits): [" << i << "] = "
            << CU.b[i].b0 << CU.b[i].b1 << CU.b[i].b2
            << CU.b[i].b3 << CU.b[i].b4 << CU.b[i].b5
            << CU.b[i].b6 << CU.b[i].b7 << "\n";
        std::cout << "\t\t(b): [" << i << "] = " << CU.b[i].b << "\n";

        printf("\tprintf\n\t\t(bits): [%d] = %d%d%d%d%d%d%d%d\n",
            i, CU.b[i].b0, CU.b[i].b1, CU.b[i].b2,
            CU.b[i].b3, CU.b[i].b4, CU.b[i].b5,
            CU.b[i].b6, CU.b[i].b7);
        printf("\t\t(b): [%d] = %d\n\n", i, CU.b[i].b);
    }

    return 0;
} 
```

输出：

```
----- chars:
        std::cout (c): �, , 
        printf (c): -1, 0, 1

----- bits:
        std::cout
                (bits): [0] = 
                (b): [0] = �
        printf
                (bits): [0] = 11111111
                (b): [0] = 255

        std::cout
                (bits): [1] = 
                (b): [1] = 
        printf
                (bits): [1] = 00000000
                (b): [1] = 0

        std::cout
                (bits): [2] = 
                (b): [2] = 
        printf
                (bits): [2] = 10000000
                (b): [2] = 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T12:09:00.537

您将参数传递`%d`给`printf`，告诉它将值读取为`int`，但对 没有执行相同的操作`std::cout`，因此它将值解释为`char`' 并输出字符本身，而不是它们的整数值。

转换为`int`第一个：

```
std::cout << "\tstd::cout (c): " << int(CU.c[0])
          << ", " << int(CU.c[1]) << ", " << int(CU.c[2])
          << "\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T12:10:19.507

这与他们是否加入工会无关。

流式传输`char`to`cout`会将其输出为字符，而不是其数值；就像`printf`您指定`%c`而不是`%d`.

`char`打印通孔数值的最简单方法`cout`是将其转换为`int`.

# mysql - MySQL 正则表达式：如何使用子表达式替换字符串？

> ID：11560498
> 
> 赞同：0
> 
> 时间：2012-07-19T12:05:02.140
> 
> 标签：mysql, regex

在我的表中，我有这样的字符串：

```
Quisque scelerisque, odio ut ornare faucibus - IR:5443_XP
Maecenas eleifend felis in - IR:2077_XP 
```

在上面的字符串中，我只需要提取数字 (5443, 2077) 并将数据转换为如下内容：

```
Quisque scelerisque, odio ut ornare faucibus - Model ID = 5443
Maecenas eleifend felis in - Model ID = 2077 
```

我在数据库中有大量这些需要更改。我怎样才能在 MySQL 中做到这一点？我不认为 MySQL 的“REGEXP”功能强大到足以做到这一点。我想我需要使用子表达式来存储数字，然后将它们取回以将文本更新为第二种格式。

我看过这个：[http](http://www.mysqludf.org/lib_mysqludf_preg/) ://www.mysqludf.org/lib_mysqludf_preg/但我无法让它在我的 xampp 环境中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:50:17.617

如果没有 UDF，我可能会做这样的事情。

```
SELECT
    `text` AS 'original_text',
    IF(`text` REGEXP '[[:<:]]IR:[0-9]+_XP$',
        CONCAT(
            SUBSTRING_INDEX(`text`,CONCAT('IR:',SUBSTRING_INDEX(`text`,'IR:',-1)),1),
            'Model ID = ',
            SUBSTRING_INDEX(SUBSTRING_INDEX(`text`,'IR:',-1),'_',1
        )
     ),`text`) AS 'modified_text'
FROM `example_table` 
```

具有如下表结构：

```
CREATE TABLE `example_table` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `text` text,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8; 
```

不过，我不确定这会有多快或多有效。

**编辑：**

对不起`SELECT`版本。这是`UPDATE`一个：

```
UPDATE `example_table`
SET `text` = CONCAT(
    SUBSTRING_INDEX(`text`,CONCAT('IR:',SUBSTRING_INDEX(`text`,'IR:',-1)),1),
    'Model ID = ',
    SUBSTRING_INDEX(SUBSTRING_INDEX(`text`,'IR:',-1),'_',1)
)
WHERE `text` REGEXP '[[:<:]]IR:[0-9]+_XP$'; 
```

# visual-studio-2010 - 在自己的编辑器中打开 TFS 工作项

> ID：11560499
> 
> 赞同：0
> 
> 时间：2012-07-19T12:05:09.130
> 
> 标签：visual-studio-2010

我正在尝试创建一个将显示 TFS 工作项的 VS2010 自定义起始页 - 这部分很简单。我试图让这些工作项在双击时在 Visual Studio 中的普通编辑器中打开，但我看不到如何做到这一点。

我尝试使用`VsShellUtilities.OpenDocument`工作项的 URI（它以 vstfs:/// 开头），但找不到。我使用了工作项的 http 地址`http://tfs-server:8080/WorkItemTracking/Workitem.aspx?artifactMoniker=id`——但这会在文本编辑器中打开页面，并显示为文本。在浏览器中查看它，我仍然不确定这是否是我想要的 - 但在我可以在正确的编辑器中打开它之前，我不确定。

网上有很多引用`IServiceProvider`和引用，[这个页面](http://social.msdn.microsoft.com/Forums/en-US/tfsworkitemtracking/thread/16a67089-b117-474d-b32b-c096148cb428/)看起来很有希望，但它引用的对象似乎在 TFS2010 中不存在。查看 MSDN 确认它们在 2005、2008 和 2012 年，但*不是*2010 年。整个命名空间似乎不存在于 TFS2010 中，这很遗憾，因为我认为这可能是我需要的。`DocumentService`*`Microsoft.TeamFoundation.WorkItemTracking.Controls`*

 *那么我是否使用正确的路径在它自己的编辑器中打开一个工作项，如果我是，我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:16:15.953

尝试使用免费的 tfs 插件，tfs 扩展工具包。

它运行良好，vs2010 是免费软件。看[这里](http://www.tektfs.com)*

# jquery - 随机插入和随机旋转

> ID：11560500
> 
> 赞同：0
> 
> 时间：2012-07-19T12:05:11.380
> 
> 标签：jquery

我以随机顺序在 div 中插入图像。

我还想随机旋转图像。我有 Jquery 和一个用于 jquery 的旋转插件，只需键入类似 $("#img").rotate(45);

这是我的图像随机顺序代码：

```
var contents=new Array (

'<img class="karkki" class="omenalaku" src="images/omenalaku01.png"      onclick="image_control001();" alt="omenalaku" />',

'<img class="karkki" class="omenalaku" src="images/omenalaku02.png" onclick="image_control002();" alt="omenalaku" />',

'<img class="karkki" class="omenalaku" src="images/omenalaku03.png" onclick="image_control003();" alt="omenalaku" />',

'<img class="karkki" class="omenalaku" src="images/omenalaku04.png" onclick="image_control004();" alt="omenalaku" />',

'<img class="karkki" class="omenalaku" src="images/omenalaku05.png" onclick="image_control005();" alt="omenalaku" />',

'<img class="karkki" class="omenalaku" src="images/omenalaku06.png" onclick="image_control006();" alt="omenalaku" />',

'<img class="karkki" class="omenalaku" src="images/omenalaku07.png" onclick="image_control007();" alt="omenalaku" />',

'<img class="karkki" class="omenalaku" src="images/omenalaku08.png" onclick="image_control008();" alt="omenalaku" />',

'<img class="karkki" class="omenalaku" src="images/omenalaku09.png" onclick="image_control009();" alt="omenalaku" />',

'<img class="karkki" class="omenalaku" src="images/omenalaku10.png" onclick="image_control010();" alt="omenalaku" />'
);

// insert elements in random order inside the candybox div
var i=0
//variable used to contain controlled random number 
var random

//while all of array elements haven't been cycled thru
while (i<contents.length){
    //generate random num between 0 and arraylength-1
    random = Math.floor(Math.random()*contents.length)
        //if element hasn't been marked as "selected"
    if (contents[random]!="selected"){
        $(".candybox").append(contents[random]);
        //mark element as selected
        contents[random]="selected"
        i++
    }
} 
```

是否可以将随机旋转插入同一个while循环？我的尝试导致每张图像都具有相同的旋转量。我希望每个图像都有不同的旋转值。

编辑：

这是我微弱的尝试：

```
// insert elements in random order inside the candybox div
var i=0
//variable used to contain controlled random number 
var random

//while all of array elements haven't been cycled thru
while (i<contents.length){
    //generate random num between 0 and arraylength-1
    random = Math.floor(Math.random()*contents.length);
    randomrot = Math.floor(Math.random()*360);
    //if element hasn't been marked as "selected"
    if (contents[random]!="selected"){
        $(".candybox").append(contents[random]);
        contents[random].rotate(randomrot);
        //mark element as selected
        contents[random]="selected"
        i++
    }
} 
```

这会导致控制台错误`Object <img class="karkki" class="omenalaku src="images/omenalaku03.png" onclick="image_control003();" alt="omenalaku" /> has no method 'rotate'`。好像我试图错误地访问 DOM 元素的旋转插件，但如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T23:44:50.050

替换这两行：

```
$(".candybox").append(contents[random]);
contents[random].rotate(randomrot); 
```

有了这个：

```
contents[random].appendTo(".candyBox").rotate(randomrot); 
```

# c# - 椭圆的 MouseDown 不起作用

> ID：11560502
> 
> 赞同：0
> 
> 时间：2012-07-19T12:05:15.713
> 
> 标签：c#, wpf, wpf-controls, ellipse

我有个问题。我有一个 Ellipse: ellipse1 在 Canvas: canvas1 内。当我点击 ellipse1 时，它的填充从 White 变为 PaleVioletRed。当我单击 canvas1 的另一部分时，椭圆将移到那里。这行得通。

当我再次单击 ellipse1 时，它的填充颜色不会改变。

**怎么了？...**

我有这个 ellipse1 的 XAML 代码：

```
<Ellipse Height="35" HorizontalAlignment="Left" Name="ellipse1" Stroke="Black" VerticalAlignment="Top" Width="70" Fill="White" StrokeThickness="3" Canvas.Left="71" Canvas.Top="70" MouseDown="pion_alb1_md"/> 
```

这是 C# 部分：

```
private void pion_alb1_md(object sender, EventArgs e)
{
    if (ellipse1.Fill == Brushes.White)
    {
        ellipse1.Fill = Brushes.PaleVioletRed;
    }
    else
    {
        ellipse1.Fill = Brushes.White;
    }
} 
```

这是 canvas1 的 XAML 代码：

```
<Canvas Name="piese_canvas" MouseDown="mouse_down_canvas_piese" Background="#43FCFFEB">
.......
</Canvas> 
```

...这是 canvas1 的 C# 部分：

```
private void mouse_down_canvas_piese(object sender, EventArgs e)
{
    if (ellipse1.Fill == Brushes.PaleVioletRed)
    {            
        Point c = Mouse.GetPosition(piese_canvas);

        if ((c.X > 81) && (c.Y < 311) && (c.X <160) && (c.Y >191))
        {
            Canvas.SetLeft(ellipse1, 72);
            Canvas.SetTop(ellipse1, 241);
            ellipse1.Fill = Brushes.White;
            Canvas.SetLeft(ellipse5, -12);
            Canvas.SetTop(ellipse5, 241);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:37:31.520

更改椭圆鼠标向下手柄，如下所示。如果您不设置`e.Handled = true`鼠标事件也将由画布处理并`mouse_down_canvas_piese`在之后立即调用。并且由于在移动椭圆后几乎完全位于“活动区域”，`Fill`因此将重置为`White`。

您可以通过调试发现这一点。另请注意，您的椭圆永远不会移动到另一个位置，因为新的`Top`和`Left`值被硬编码为 241 和 72。

```
private void pion_alb1_md(object sender, RoutedEventArgs e)
{
    if (ellipse1.Fill == Brushes.White)
    {
        ellipse1.Fill = Brushes.PaleVioletRed;
    }
    else
    {
        ellipse1.Fill = Brushes.White;
    }
    e.Handled = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:22:48.217

我已将您的代码复制到一个新项目中，它的工作方式与您的描述不同。

当我单击椭圆时，它会改变颜色。当我单击画布时，该线`if ((c.X > 81) && (c.Y < 311) && (c.X < 160) && (c.Y > 191))`返回 false，因此椭圆永远不会移动。这可能是因为我在窗口上只有一个带有椭圆的画布，而画布没有设置位置。

~~所以我无法重现你的问题。您能否提供有关画布或窗口中内容的更多信息？~~

**编辑：**

好的，我现在看到了问题。尝试在这两种方法中添加断点。椭圆上的任何点击也由画布处理（WPF 路由事件的一部分）。当椭圆移动时，任何点击都在画布特殊区域的范围内，所以它变成了PaleVioletRed（因为椭圆被点击了），然后立即变成了白色（因为画布在右边被点击了）地方）。

尝试将您的椭圆单击处理程序更改为：

```
private void pion_alb1_md(object sender, RoutedEventArgs e)
{
    if (ellipse1.Fill == Brushes.White)
    {
        ellipse1.Fill = Brushes.PaleVioletRed;
    }
    else
    {
        ellipse1.Fill = Brushes.White;
    }
    e.Handled = true;
} 
```

关键点是：

*   EventArgs 现在是 RoutedEventArgs。这暴露了 IsHandled 属性...
*   e.IsHandled = true。这会阻止其他事件处理程序（例如画布单击处理程序）触发。

# ruby-on-rails - 有没有更清洁的方法来实现这一目标？

> ID：11560503
> 
> 赞同：2
> 
> 时间：2012-07-19T12:05:17.650
> 
> 标签：ruby-on-rails

我试图根据传递的不同信息仅显示表中的某些记录，如果不满足任何要求，它将重定向到主页。代码一切正常，只是想看看其他人会如何解决这个问题

```
if current_user.admin?
  @schedules = Schedule.all
elsif current_user.team_id?
  @schedules = Schedule.find_all_by_team_id(current_user[:team_id])
else
  redirect_to root_path, :status => 301, :alert => "Please contact your club administrator to be assigned to a team."
  return
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T12:19:49.653

您应该始终将复杂的逻辑从控制器中移开。

```
class Schedule
  def self.for(user)
    case user.role #you should define the role method in User
      when User::ADMIN
        scoped
      when User::TEAM
        where(team_id: user[:team_id])
    end
  end
end 
```

在您的控制器中：

```
@schedules = Schedule.for(current_user)

redirect_to root_path, :status => 301, :alert => "Please contact your club administrator to be assigned to a team." unless @schedules 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:18:27.270

解决您的问题的方法。

```
@schedules = Schedule.all if current_user.admin?
@schedules = Schedule.find_all_by_team_id(current_user[:team_id]) if current_user.team_id?
if @schedules.nil?
  redirect_to root_path, :status => 301, :alert => "Please contact your club administrator 
    to be assigned to a team."
else
  #Your normal redirect
end 
```

# c# - 以 2 种形式使用 ref ..？

> ID：11560505
> 
> 赞同：1
> 
> 时间：2012-07-19T12:05:29.270
> 
> 标签：c#, .net, winforms

我有2个表格..

从第一种形式我调用第二种形式......在第二种形式中我做了一些计算，我想在关闭第二种形式后得到第一种形式的结果。

## 第一种形式代码

```
public partial class XtraForm1 : DevExpress.XtraEditors.XtraForm
{
    String s = "";
    public XtraForm1()
    {
        InitializeComponent();
    }

    private void simpleButton1_Click(object sender, EventArgs e)
    {
        s = textEdit1.Text;
        XtraForm2 x = new XtraForm2(ref s);

        x.ShowDialog();
        MessageBox.Show(s); // Here I want to get the data from 2nd form.
    }
} 
```

## 第二种形式代码

```
public partial class XtraForm2 : DevExpress.XtraEditors.XtraForm
{
    string s2 = "";
    public XtraForm2(ref string s1)
    {
        InitializeComponent();
        s2 = "hai";
        s1 = s2;
    }

    private void simpleButton1_Click(object sender, EventArgs e)
    {
        // here i do some operations and i want to store it in variable s1 so that i will get the result in 1st form.
        this.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:55:40.693

您可以创建类似于模型的类并声明所有变量并使用 set 来编辑数据并获取它。

```
Public class cs1
{
   private int m_id=0;

public int ID
{
    get
    {
        return m_id;
    }
    set
    {
        m_id = value;
    }
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:21:36.187

另一种可能性是使用静态变量：

```
public static string _form2Data = null;

private void simpleButton1_Click(object sender, EventArgs e)   
{   
    _form2Data = "something";     
    this.Close();   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:08:18.787

你可以做很多事情。

但最简单的方法是在您的第二个表单上创建一个属性，将结果放在那里，然后从您的第一个表单中调用`ShowDialog()`它`MessageBox.Show(x.MyProperty);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T12:17:13.257

在 2nd Form 中创建一个公共字段/属性。

```
//public property
public string Data { get;set;}

private void simpleButton1_Click(object sender, EventArgs e)
{
   Data="Something you want to return back to 1st Form";
   this.Close();
} 
```

在第一种形式中，

```
private void simpleButton1_Click(object sender, EventArgs e)
{
  s = textEdit1.Text;
  XtraForm2 x = new XtraForm2(ref s);

  x.ShowDialog();
  MessageBox.Show(x.Data); 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T12:11:24.367

你可以使用属性，对吧？为什么要通过Ref传递参数？

```
Button_click(){
    using(var form2 = new Form2())
    {
        form2.Property = initialValue;
        form2.ShowDialog();
        MessageBox.Show(form2.Property);
    }
} 
```

而不是使用 get set 属性`you can pass the value using constructor`和`get the value from property`.

# scala - Scala collection.mutable.Cloneable 目的

> ID：11560506
> 
> 赞同：2
> 
> 时间：2012-07-19T12:05:37.853
> 
> 标签：scala, mutable, cloneable

在尝试克隆可变集合时，我最初的方法是在 mutable.Cloneable 特征上使用 clone() 方法。但是，这取决于创建引用副本而不是深层副本的 java.Object.clone 实现。通过测试，我可以确认 mutable.{Queue,Seq,Set} 都是浅拷贝。

我采用了粗略的新 xxx(copy:_*) 方法来创建深层副本，但我的问题是 mutable.Cloneable 特征如果没有实现的目的是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T12:07:29.873

该`mutable.Cloneable`特征已在许多集合类上实现。这里有一些例子：

[https://github.com/scala/scala/blob/master/src/library/scala/collection/mutable/ArrayBuffer.scala#L176](https://github.com/scala/scala/blob/master/src/library/scala/collection/mutable/ArrayBuffer.scala#L176)

[https://github.com/scala/scala/blob/master/src/library/scala/collection/mutable/HashSet.scala#L82](https://github.com/scala/scala/blob/master/src/library/scala/collection/mutable/HashSet.scala#L82)

[https://github.com/scala/scala/blob/master/src/library/scala/collection/mutable/WrappedArray.scala#L78](https://github.com/scala/scala/blob/master/src/library/scala/collection/mutable/WrappedArray.scala#L78)

只是`clone`没有定义为返回深层副本。这样做的原因是您通常只想复制一个可变集合，以便您可以在不更改原始集合的情况下以某种方式修改它 - 保存在其中的实际元素可能希望保持不变。

如果你想要一个深拷贝，你必须要么使用自定义的深拷贝库，要么自己实现它。

# html - 无法为网页上的元素添加边框

> ID：11560508
> 
> 赞同：0
> 
> 时间：2012-07-19T12:05:40.223
> 
> 标签：html, css

我正在试验`float`CSS 的属性。

我试图编码匹配两个浮动 div 的高度。

两个代码

**方法一。**

```
<div style="overflow: hidden;">
    <div style="background: blue;float: left;width: 65%;padding-bottom: 500px;
       margin-bottom: -500px;border:1px solid White;">column a<br />column a</div>
    <div style="background: red;float: right;width: 35%;
      padding-bottom: 500px;margin-bottom: -500px;border:1px solid White;">column b</div>
</div> 
```

**方法2。**

```
<div style="background-color: yellow;">
    <div style="float: left;width: 65%; border:1px solid White;">column a</div>
    <div style="float: right;width: 35%;border:1px solid White;">column b</div>
    <div style="clear: both;"></div>
</div> 
```

这两个代码都有效，但我想跨列创建边框。我应用了边框属性但它不起作用。上面的代码是否有解决方案来添加边框并与所有浏览器兼容。

**编辑代码**

**方法3。**

```
<div style="background-color: yellow;">
    <div style="float: left;width: 65%; border-right:1px solid White;">
        column acolumn acolumn acolumn acolumn acolumn acolumn acolumn 
        acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn 
        acolumn   acolumn acolumn acolumn acolumn acolumn acolumn acolumn acolumn 
    </div>
    <div style="float: right;width: 35%;border-right:1px solid White;">column b</div>
    <div style="clear: both;"></div>
</div> 
```

[请参阅 jsfiddle](http://jsfiddle.net/NcgFf/4/)

b 列的**div**未显示全长边框

在**方法 1**中，我无法应用边框。任何人都可以为这两个问题提供解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:09:52.433

是的，您可以在 columnA 和 columnB 内创建另一个 div，宽度为 100% 和边框。

如果直接在列 div 中添加边框，则 35% + 2px 大于 35%，因此您的总与将大于 100%。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:18:45.497

这可能是解决方案：

```
<div style="overflow: hidden;position: absolute;right: 5px;left: 5px;">
   <div style="background: blue; float: left;width: 65%; border: 1px solid #ccc;">column a</div>
   <div style="background: red; border: 1px solid #ccc;">column b</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:07:56.380

这应该只是工作：

```
border: 2px solid red; 
```

你得到什么错误？？？

# e-commerce - 如何在不离开我的网站的情况下接受信用卡付款？

> ID：11560518
> 
> 赞同：1
> 
> 时间：2012-07-19T12:06:07.820
> 
> 标签：e-commerce, payment-gateway, payment

我正在创建一个电子商务网站，并且正在研究如何在我的网站上接受信用卡。我遇到了很多支付网关，但他们在他们的网站上进行处理，我不希望我的访问者离开我的 URL。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:12:30.157

将第三方支付页面嵌入到应用程序页面内的 DIV 或 IFRAME 元素中是否适合您？可能使用[模式对话框](http://jqueryui.com/demos/dialog/)来包含它？

它不会让您完全控制布局，但您的页眉、页脚、导航栏等将保持不变。

请注意，由于 JavaScript 沙盒，您的应用程序页面上的 JS 代码无法与第三方页面交互，反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T15:23:48.893

在您的网站上处理交易时要考虑的一件事是，您需要成为符合 PCI 的供应商来处理信用卡数据。如果信用卡数据触及您的服务器，您的要求可能会非常昂贵且耗时。

有许多公司旨在在客户留在您的站点时处理异地信用卡处理。这大大缩小了您的 PCI 合规范围。

看看 Recurly.js (js.recurly.com) 或 Stripe。如果您计划处理定期计费，则 Recurly 非常适合，Stripe 用于一次性交易。

免责声明，我为 Recurly 工作，所以我有偏见，但也见多识广:) 如果您还有其他问题，请大声告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T20:49:22.700

如果您有一个透明的重定向，客户可以在留在您的网站上时使用信用卡付款。一些支付处理器，如 Braintree，将其包含在他们的支付网关中。您可以在此处了解有关透明重定向如何工作的更多信息：[https ://www.braintreepayments.com/tour/pci-compliance](https://www.braintreepayments.com/tour/pci-compliance)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T21:20:08.727

那里有多种解决方案，在这个线程中已经提到了很多。

这是来自 Google 的另一种应用内支付解决方案（即应用内体验，让客户留在您的页面上）。它特别适用于数字和虚拟商品、订阅和微交易。

[https://developers.google.com/in-app-payments/docs/tutorial](https://developers.google.com/in-app-payments/docs/tutorial)

[https://developers.google.com/academy/apis/commerce/digital-goods/getting-started/](https://developers.google.com/academy/apis/commerce/digital-goods/getting-started/)

# c# - 在不使用 WinForms 的情况下更改 DataVisualization.Chart 大小

> ID：11560521
> 
> 赞同：3
> 
> 时间：2012-07-19T12:06:15.060
> 
> 标签：c#, web-services, charts, resize, data-visualization

我有一个生成不同类型图表的 Web 服务。图表是使用编程方式生成的`System.Windows.Forms.DataVisualization.Charting`，并保存为 .png 文件。但无论我做什么，图表的尺寸都是 300x300 像素。

在互联网上，我找到了许多关于更改图表大小的解决方案，但它们仅适用于将图表放入 WinForm 然后保存到文件的情况。

如果我的应用程序中没有 WinForms，如何更改图表的大小？

这是我在代码中所做的一个虚拟示例

```
int[] yVal = { 1, 1, 1, 1, 1, 1, 1 };
string[] xName = { "a", "b", "b", "b", "b", "b", "b" };

System.Windows.Forms.DataVisualization.Charting.Chart Chart1 = new Chart();
Chart1.Titles.Add("Title");
Chart1.Series.Add(new Series());

Chart1.Series[0].XValueType = ChartValueType.String;
Chart1.Series[0].YValueType = ChartValueType.Int32;
Chart1.Series[0].Points.DataBindXY(xName, yVal);

Chart1.Palette = ChartColorPalette.EarthTones;

Chart1.Legends.Add(new Legend());
Chart1.Legends[0].Enabled = false;

ChartArea chartArea = new ChartArea();
chartArea.AxisX.Title = "X";
chartArea.AxisY.Title = "Y";
Chart1.ChartAreas.Add(chartArea);

Chart1.SaveImage("chart.png", ChartImageFormat.Png); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T12:59:11.210

要获得 1000px x 1000px 的大图像，请在图表初始化后添加以下行：

```
Chart1.Size = new Size(1000, 1000); 
```

# javascript - 有没有办法在画布中拖放文本或图像？

> ID：11560525
> 
> 赞同：0
> 
> 时间：2012-07-19T12:06:29.557
> 
> 标签：javascript, html, drag-and-drop, html5-canvas

我正在尝试一些 HTML5 画布示例，但我对如何拖放文本、图像或矩形有一些疑问。

如何使用画布实现拖放功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:25:37.970

如果您不熟悉画布，正如您所提到的，您是否尝试过使用像[kineticJs](http://www.kineticjs.com)这样的框架？

除其他事项外，它会处理您的拖放操作，并且有很多教程可以进一步帮助您。

例如，这是一个使用 KineticJs[拖放的教程。](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-tutorial/)

# java - 如何在 Hibernate 中编写此查询？

> ID：11560530
> 
> 赞同：-2
> 
> 时间：2012-07-19T12:06:39.880
> 
> 标签：java, hibernate, distinct

我在 SQL Server 2005 中有以下查询：

```
SELECT distinct(user.id_user), user.name, user.familyname from tbl_users users 
inner join tbl_notes notes on users.id_user = notes.id_user 
where notes.id_book = 1 
```

我已经映射了所有必要的类，我需要使用 hibernate API 来编写它。到目前为止，我已经编写了以下代码，但它返回 null：

```
hibernateSession = HibernateUtil.getSessionFactory().openSession();
criteria = hibernateSession.createCriteria(TblUsers.class, "users")
        .createCriteria("users.id_user", "tblNotes")
        .add(Restrictions.eq("tblNotes.idBook", idBook));

criteria.setProjection(Projections.projectionList()
                .add(Projections.distinct(Projections.property("users.idUser")))
                .add(Projections.property("users.name"))
                .add(Projections.property("users.familyName")));

ret = criteria.list(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:46:57.067

```
Criteria c = session.createCriteria(User.class);
Criteria nc = c.createCriteria("notes", "note");
nc.add("bookId", 1);

ProjectionList pl = Projections.projectionList();
pl.add(Projections.distinct(Projections.property("userId")));
pl.add(Projections.property("name"));
pl.add(Projections.property("familyName"));
c.setProjection(pl);

List<Object[]> result = (List<Object[]>) c.list(); 
```

或者这种性质的东西。第二个“createCriteria”使用您定义的关系强制与 notes 表连接。由于您的 notes 表似乎与 User 有关系（通过 user_id 列），我假设您已经映射了它，以便 hibernate 可以弄清楚如何从 User 到 Note。此外，生成的 Criteria 对象允许您在要连接的音符上设置条件。

最后，我们简单地创建一个 ProjectionList 来枚举我们想要的投影。在这种情况下，我们需要 1 个不同的列以及 2 个其他列。

你会得到一个 Object[] 的列表。

我没有测试过这段代码，而且由于你没有发布你的课程，我不能 100% 确定所有内容都以这样的方式映射，你可以像这样进行连接。

# shell - 使用作为参数传递的日期扫描文件夹

> ID：11560533
> 
> 赞同：0
> 
> 时间：2012-07-19T12:06:50.990
> 
> 标签：shell

我该如何做一个shell脚本来做到这一点：脚本的调用将看到“/DataFolder”以列出所有文件*.INI，并将日期作为参数传递。如果可能，结果应仅保留文件名和文件更改时间，并且列表必须按升序排序。如果不传参数，我们取当前日期

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:04:02.393

我建议使用`find`这个：

```
find /DataFolder -type f -iname '*.ini*'  \
  -mtime +MINIMUM_DAYS_SINCE_MODIFICATION \
  -printf "%TY%Tm%Td %f\n"                \
| sort -n 
```

这将输出修改时间与 YEAR MONTH DAY 连接，因此可以直接通过管道传输 info `sort`。

# sql-server-2008 - 如何查找表中最近修改的行？

> ID：11560534
> 
> 赞同：0
> 
> 时间：2012-07-19T12:06:56.553
> 
> 标签：sql-server-2008

我有一个表 A 有列`Family ID, Name, Addr`。如何在表中找到最近修改的行？这可以在表格中不添加任何列的情况下完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:16:25.607

不，SQL Server 不会跟踪何时将行添加到表或修改。您需要通过添加一列来做到这一点：

```
ALTER TABLE dbo.A ADD RowAdded DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP; 
```

当然，这会将所有现有行设置为现在，因此它仅适用于未来的新行。如果您还想修改时间，可以添加一个附加列：

```
ALTER TABLE dbo.A ADD RowChanged DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP; 
```

并通过触发器使其保持最新状态：

```
CREATE TRIGGER dbo.A_modified
ON dbo.A
FOR UPDATE 
AS
BEGIN
  UPDATE A SET RowChanged = CURRENT_TIMESTAMP
    FROM dbo.A as A INNER JOIN inserted AS i
    ON A.ID = i.ID;
END
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:12:58.523

除非您还没有编写修改时间（或时间戳），否则您无法找到这些行。

您还可以添加记录修改 ID 的触发器，但这听起来不是更好的解决方案。

如果要查找由 DML 语句修改的数据，可以使用 OUTPUT 子句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:15:49.127

最简单的方法是添加一个“lastUpdated”列。除此之外，没有真正简单的方法可以实现这一目标。

# iphone - 如何使用 NFC Reader 硬件在 iOS App 中读取 RFID 标签数据

> ID：11560535
> 
> 赞同：0
> 
> 时间：2012-07-19T12:07:04.277
> 
> 标签：iphone, objective-c, bluetooth, nfc, rfid

[这里](http://www.youtube.com/watch?v=-hLJOXAZulA&feature=relmfu)有NFC阅读器硬件的小插图

在此视频下，只要用户扫描 RFID 标签，它就会直接在记事本/Safari 上打印标签编号。

我的问题是我们如何使用 NFC 阅读器硬件在 iOS 应用程序中读取 RFID 标签数据。我们是否必须完成一些编程，如相关的 API 集成，或者可以通过 BluetoothManager 类或根本不需要编程？

我们如何捕获该 id 字符串？

我将使用[这个设备](http://serialio.com/products/RFID/Mobile/idChamp/idChampRS2ProxBT.php)。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T12:09:23.900

这个 RFID 阅读器只是模拟蓝牙键盘，因此对于 iOS 设备就像有人输入已扫描的 RFID 代码一样。

# ios - 提交新应用程序时如何更新我的 Database.sqlite

> ID：11560537
> 
> 赞同：1
> 
> 时间：2012-07-19T12:07:05.033
> 
> 标签：ios, database, sqlite, core-data

在我的应用程序中，我使用的是 coredata 数据库。我在数据库文件中手动填写了新条目，但是当从 Appstore 更新我的应用程序时，旧数据库仍在使用中。当我在我的设备上再次卸载并安装该应用程序时，正在使用新的应用程序。

如何确保在提交新应用程序时正在使用新数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:18:11.863

确保您使用的是内置数据库的本地副本。然后将诸如版本号之类的内容添加到数据库中。

添加实体：

```
Version
- version: double 
```

检查每个数据库的版本，如果版本不匹配，请将本地副本替换为内置数据库的副本。

# wcf - 使用 IErrorHandler 处理异常

> ID：11560542
> 
> 赞同：1
> 
> 时间：2012-07-19T12:07:52.517
> 
> 标签：wcf, ierrorhandler

我有几个关于 IErrorHandler 的问题。

1）如果我在我的服务方法中显式抛出异常，它会被实现接口的类型捕获吗？

2）如何在两个不同的服务之间共享类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:27:00.073

1）是的，当它被标记为错误处理的属性时

2）是的，当为此配置服务时

您可以在服务之间共享您的错误处理程序 了解更多信息的最佳地点在这里：

[http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ierrorhandler.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ierrorhandler.aspx)

还要考虑 HandleError 是多个线程可以执行的方法

# bash - 如何处理bash中的每一行

> ID：11560544
> 
> 赞同：16
> 
> 时间：2012-07-19T12:07:53.373
> 
> 标签：bash, awk

我想打印奇数行（1,3,5,7..）而不做任何更改，但偶数行（2,4,6,8）处理以grep开头的管道。我想将所有内容写入新文件（奇数行没有任何更改，偶数行的新值）。

我知道如何在 awk 中打印每一行：

```
awk ' NR % 2 == 1 { print; } NR % 2 ==0 {print; }' file.fasta 
```

但是，对于偶数行，我不想使用`{print; }`，但我想使用我的 grep 管道。

建议将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-19T12:19:16.880

如果您打算做一个简单的`grep`，您可以取消额外的步骤并在 awk 本身内进行过滤，例如：

```
awk 'NR % 2 {print} !(NR % 2) && /pattern/ {print}' file.fasta 
```

但是，如果您打算做更多事情，正如[chepner 已经指出的那样](https://stackoverflow.com/questions/11560544/how-to-process-every-other-line-in-bash/11560638#11560638)，您确实可以从 awk 内部进行管道传输。例如：

```
awk 'NR % 2 {print} !(NR % 2) {print | "grep pattern | rev" }' file.fasta 
```

这会打开一个到命令的管道`"grep pattern | rev"`（注意周围的引号）并将打印输出重定向到它。请注意，这种情况下的输出可能与您预期的不同；您最终将首先输出所有奇数行，然后是管道命令的输出（消耗偶数行）。

* * *

（响应您的评论）要计算每个偶数行中的字符数，请尝试：

```
awk 'NR % 2 {print} !(NR % 2) {print length($0)}' file.fasta 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-19T12:13:12.300

您可以直接从内部管道`awk`：

```
awk ' NR % 2 == 1 { print; } NR % 2 ==0 {print | "grep -o [actgnACTGN] | wc -l"; }' file.fasta 
```

但是请注意，这不会保留输入文件的顺序。

（选择的答案更适合手头的任务，但我将把这个答案留在这里作为将 print 语句传递给外部命令的示例。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T13:58:33.487

为了让您的管道输出与 AWK 输出按顺序显示，您需要在每次迭代时关闭管道。当然，这是非常低效的。

```
awk 'BEGIN{ cmd = "grep -io \047[actgn]\047 | wc -l" } NR % 2 { print } NR % 2 == 0 { print | cmd; close(cmd) }' file.fasta 
```

您显然不想计算不在指定列表中的字符，所以`length($0)`不会起作用。这将起作用，并且应该比管道方法快得多：

```
awk 'NR % 2 { print } NR % 2 == 0 {n = split($0, a, /[^actgnACTGN]/); print length($0) - n + 1}' file.fasta 
```

它的工作原理是使用您*不*希望作为分隔符的字符分割行，并从行的长度中减去子字符串的计数并加 1。本质上，它从离开的行的长度中减去不需要的字符数结果是想要的字符数。

# jquery - jquery自动完成由于某种原因不起作用

> ID：11560545
> 
> 赞同：0
> 
> 时间：2012-07-19T12:07:54.453
> 
> 标签：jquery

您好，我正在制作一个可以自动完成的搜索栏，但我不明白为什么我的复制/粘贴代码不起作用，而 jQuery 网站上的示例确实起作用。

我忘了导入什么东西吗？我找不到我的错误

[我的网站](http://www.nugenre.net/test.html)

[演示网站](http://jqueryui.com/demos/autocomplete/default.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:14:10.873

将js文件的顺序更改为

```
<script type="text/javascript" src="js/jquery-1.7.2.js"></script>
<script type="text/javascript" src="js/jquery.ui.core.js"></script>
<script type="text/javascript" src="js/jquery.ui.widget.js"></script>
<script type="text/javascript" src="js/jquery.ui.position.js"></script>
<script type="text/javascript" src="js/jquery.ui.autocomplete.js"></script> 
```

希望这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:14:54.807

更改顺序包括：

```
<script type="text/javascript" src="js/jquery-1.7.2.js"></script>
<script type="text/javascript" src="js/jquery.ui.core.js"></script>
<script type="text/javascript" src="js/jquery.ui.widget.js"></script>    
<script type="text/javascript" src="js/jquery.ui.autocomplete.js"></script> 
<script type="text/javascript" src="js/jquery.ui.position.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:15:35.383

可能是一些 jquery 库没有为你加载悬停器这对我来说很好用

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>jQuery UI Autocomplete - Default functionality</title>
    <link rel="stylesheet" href="http://jqueryui.com/themes/base/jquery.ui.all.css">
    <script src="http://jqueryui.com/jquery-1.7.2.js"></script>
    <script src="http://jqueryui.com/ui/jquery.ui.core.js"></script>
    <script src="http://jqueryui.com/ui/jquery.ui.widget.js"></script>
    <script src="http://jqueryui.com/ui/jquery.ui.position.js"></script>
    <script src="http://jqueryui.com/ui/jquery.ui.autocomplete.js"></script>
    <link rel="stylesheet" href="http://jqueryui.com/demos/demos.css">
    <script>
    $(function() {
        var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];
        $( "#tags" ).autocomplete({
            source: availableTags
        });
    });
    </script>
</head>
<body>

<div class="demo">

<div class="ui-widget">
    <label for="tags">Tags: </label>
    <input id="tags" />
</div>

</div><!-- End demo -->

<div class="demo-description">
<p>The Autocomplete widgets provides suggestions while you type into the field. Here the suggestions are tags for programming languages, give "ja" (for Java or JavaScript) a try.</p>
<p>The datasource is a simple JavaScript array, provided to the widget using the source-option.</p>
</div><!-- End demo-description -->

</body>
</html> 
```

# apache-flex - Flex：显示/隐藏 VBoxes 使用 HDividedBox 划分

> ID：11560549
> 
> 赞同：0
> 
> 时间：2012-07-19T12:08:07.197
> 
> 标签：apache-flex

我有两个 VBoxes 通过 HDdividedBox 划分。是否可以通过双击 HDvidedBox 来显示或隐藏其中一个 VBox？
我知道`moveDivider()`and`getDividerAt()`方法的使用，但是对于这类问题是否有任何 HDividedBox 功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:20:12.573

所以，我建议使用自定义组件而不是 HDIVvidedBox ;)。

特别适合您 - 基于事件的组件，它处理双击分隔线（200ms - doubleClick 间隔）：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:HDividedBox xmlns:mx="http://www.adobe.com/2006/mxml" initialize="hdividedbox1_initializeHandler(event)">
    <mx:Metadata>
        [Event(name="dividerDoubleClick", type="mx.containers.DividerDblClickEvent")]
    </mx:Metadata>
    <mx:Script>
        <![CDATA[
            import mx.controls.Alert;
            import mx.events.DividerEvent;
            import mx.events.FlexEvent;

            private var _timer:Timer = new Timer(200,1);                        

            protected function hdividedbox1_initializeHandler(event:FlexEvent):void{
                this.addEventListener(DividerEvent.DIVIDER_PRESS, divider_press);
            }           
            protected function divider_press(event:DividerEvent):void{
                if(_timer.running){
                    event.preventDefault();
                    event.stopPropagation(); // not sure what of it use

                    dispatchEvent(new DividerDblClickEvent(DividerDblClickEvent.DOUBLE_CLICK, event.dividerIndex));
                }else{
                    _timer.start();
                }
            }           
        ]]>
    </mx:Script>
</mx:HDividedBox> 
```

和自定义事件

```
package mx.containers
{
    import flash.events.Event;

    public class DividerDblClickEvent extends Event{

        // Define static constant.
        public static const DOUBLE_CLICK:String = "dividerDoubleClick";

        public var dividerIndex:int = -1; // not set

        public function DividerDblClickEvent(type:String, dividerIndex:int = -1, bubbles:Boolean=false, cancelable:Boolean=false){
            super(type, bubbles, cancelable);// Call the constructor of the superclass.

            this.dividerIndex = dividerIndex;// Set the new property.
        }

        // Override the inherited clone() method.
        override public function clone():Event {
            return new DividerDblClickEvent(type, dividerIndex);
        }
    }
} 
```

使用示例：

```
 <?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" xmlns:local="*" xmlns:c="mx.containers.*">

    <mx:Script>
        <![CDATA[
            import mx.effects.easing.Cubic;
        ]]>
    </mx:Script>

    <mx:AnimateProperty id="hide" easingFunction="{Cubic.easeIn}" target="{to_hide}" property="width" toValue="0" duration="700" />

<c:HDividedBoxD height="100%" width="100%" dividerDoubleClick="hide.play();" >
    <mx:VBox height="100%" width="50%" backgroundColor="#00FF00">
        <mx:Label text=" some text left 1"/>
        <mx:Label text=" some text left 2"/>
    </mx:VBox>
    <mx:VBox id="to_hide" height="100%" width="50%" backgroundColor="#0000FF">
        <mx:Label text=" some text right 3"/>
        <mx:Label text=" some text right 4"/>       
    </mx:VBox>      
</c:HDividedBoxD>       
</mx:Application> 
```

您可以根据需要修改该模块。我只想谢谢:)

# qt - 如何在 Qt 中获取当前语言？

> ID：11560557
> 
> 赞同：2
> 
> 时间：2012-07-19T12:08:43.453
> 
> 标签：qt, keyboard

请告诉我如何在 Qt 中获取当前键盘语言？如果我使用这个：

```
QLocale loc = QApplication::keyboardInputLocale();
QString keyBoardLang = loc.languageToString(loc.language());
qDebug()<<keyBoardLang; 
```

我总是得到与所选语言无关的相同结果。我更喜欢跨平台的答案。

# c# - 无法使用 wsdl.exe 编译的接口生成 Web Service 代理

> ID：11560561
> 
> 赞同：3
> 
> 时间：2012-07-19T12:08:54.297
> 
> 标签：c#, web-services, spring.net

我正在构建一个调用多个后端服务（当前为 2 个）的代理服务。所有服务都具有相同的接口。下面的幻灯片虽然不是英文的，但显示了部署

![图表](../Images/f4cd17df1f397c3ba2a982e788d1469f.png)

该接口是使用 wsdl.exe 从 WSDL 编译的。该接口显然包含所有 C# 属性

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("wsdl", "4.0.30319.1")]
[System.Web.Services.WebServiceBindingAttribute(Name="ServizioSanitario", Namespace="http://innovazione-ict.unina.it/WSDLSanita")]
public interface IServizioSanitario {

    /// <remarks/>
    [System.Web.Services.WebMethodAttribute()]
    [System.Web.Services.Protocols.SoapDocumentMethodAttribute("http://innovazione-ict.unina.it/WSDLSanita/InserisciDocumento", Use=System.Web.Services.Description.SoapBindingUse.Literal, ParameterStyle=System.Web.Services.Protocols.SoapParameterStyle.Bare)]
    [return: XmlElement("idDocumento", Namespace="http://innovazione-ict.unina.it/WSDLSanita", DataType="ID")]
    string InserisciDocumento([XmlElement(Namespace="http://innovazione-ict.unina.it/WSDLSanita")] Documento documento);

    /// <remarks/>
    [System.Web.Services.WebMethodAttribute()]
    [System.Web.Services.Protocols.SoapDocumentMethodAttribute("http://innovazione-ict.unina.it/WSDLSanita/OttieniListaDocumenti", Use=System.Web.Services.Description.SoapBindingUse.Literal, ParameterStyle=System.Web.Services.Protocols.SoapParameterStyle.Bare)]
    [return: XmlArray("listaMetadati", Namespace="http://innovazione-ict.unina.it/WSDLSanita")]
    [return: XmlArrayItem("metadatiDocumento", IsNullable=false)]
    MetadatiDocumentoTrovato[] OttieniListaDocumenti([XmlElement(Namespace="http://innovazione-ict.unina.it/WSDLSanita")] string codiceFiscale);

    /// <remarks/>
    [System.Web.Services.WebMethodAttribute()]
    [System.Web.Services.Protocols.SoapDocumentMethodAttribute("http://innovazione-ict.unina.it/WSDLSanita/RecuperaDocumento", Use=System.Web.Services.Description.SoapBindingUse.Literal, ParameterStyle=System.Web.Services.Protocols.SoapParameterStyle.Bare)]
    [return: XmlElement("documento", Namespace="http://innovazione-ict.unina.it/WSDLSanita")]
    Documento RecuperaDocumento([XmlElement(Namespace="http://innovazione-ict.unina.it/WSDLSanita", DataType="ID")] string idDocumento);
} 
```

代理建立在 Spring.net 上，具有动态代理和骨架实例化。它由一个空的 webapp 组成，它公开了在另一个程序集中实现的 Web 服务。

代理通过自己的接口包含对其他服务的引用：

```
class Broker : IServizioSanitario
{
        public IServizioSanitario[] ServiziConcreti { private get; set; }
} 
```

我想为代理调用的每个服务实例化动态代理。为此，我使用了 Spring.net 依赖注入片段：

```
 <object id="ServizioSanitarioNetProxy" type="Spring.Web.Services.WebServiceProxyFactory, Spring.Services">
        <property name="ServiceUri" value="http://localhost:2263/ServizioSanitario2.asmx"/>
        <property name="ServiceInterface" value="It.Unina.MasterICT.ServizioSanitarioReference.IServizioSanitario, ServizioSanitarioReference"/>
      </object>

  <object id="BrokerConcrete" type="It.Unina.MasterICT.ServizioSanitario.Broker.Broker, BrokerImpl">
    <property name="ServiziConcreti">
      <list>
        <ref object="ServizioSanitarioDummyProxy"/>
        <ref object="ServizioSanitarioNetProxy"/>
      </list>
    </property>
  </object> 
```

当我尝试运行 webapp 时，出现以下错误

```
System.InvalidOperationException: Element idDocument, belonging to namespace http://innovazione-ict.unina.it/WSDLSanita, imported in two different contexts: PrimitiveMapping, MembersMapping.

[InvalidOperationException: Elemento idDocumento, appartenente allo spazio dei nomi http://innovazione-ict.unina.it/WSDLSanita, importato in due diversi contesti: PrimitiveMapping, MembersMapping.]
   System.Xml.Serialization.XmlSchemaImporter.ImportElementType(XmlSchemaElement element, String identifier, Type desiredMappingType, Type baseType, String ns) +813951
   System.Xml.Serialization.XmlSchemaImporter.ImportElement(XmlSchemaElement element, String identifier, Type desiredMappingType, Type baseType, String ns, Boolean topLevelElement) +284
   System.Xml.Serialization.XmlSchemaImporter.ImportElement(XmlQualifiedName name, Type desiredMappingType, Type baseType) +207
   System.Xml.Serialization.XmlSchemaImporter.ImportMembersMapping(XmlQualifiedName name) +82
   Spring.Web.Services.SoapHttpClientProxyTypeBuilder.GetMembersMapping(String messageName, MessagePartCollection messageParts, SoapBodyBinding soapBodyBinding, SoapBindingStyle soapBindingStyle) +376
   Spring.Web.Services.SoapHttpClientProxyTypeBuilder.MoveToMethod(MethodInfo targetMethod) +1481
   Spring.Web.Services.SoapHttpClientProxyTypeBuilder.ApplyMethodAttributes(MethodBuilder methodBuilder, MethodInfo targetMethod) +37
   Spring.Proxy.AbstractProxyTypeBuilder.ImplementInterface(TypeBuilder typeBuilder, IProxyMethodBuilder proxyMethodBuilder, Type intf, Type targetType, Boolean proxyVirtualMethods) +423
   Spring.Proxy.AbstractProxyTypeBuilder.ImplementInterface(TypeBuilder typeBuilder, IProxyMethodBuilder proxyMethodBuilder, Type intf, Type targetType) +50
   Spring.Web.Services.SoapHttpClientProxyTypeBuilder.BuildProxyType() +367
   Spring.Web.Services.WebServiceProxyFactory.GenerateProxy() +379
   Spring.Web.Services.WebServiceProxyFactory.GetObject() +55
   Spring.Objects.Factory.Support.AbstractObjectFactory.GetObjectFromFactoryObject(IFactoryObject factory, String objectName, RootObjectDefinition rod) +84

[ObjectCreationException: Error thrown by a dependency of object 'BrokerConcrete' defined in 'config [C:\Users\DJ Echelon\documents\visual studio 2010\Projects\MasterICT\BrokenSanitario\WebappBroker\web.config#spring/objects] line 1' : FactoryObject threw exception on object creation.
 while resolving 'ServiziConcreti[0]' to 'ServizioSanitarioNetProxy' defined in 'config [C:\Users\DJ Echelon\documents\visual studio 2010\Projects\MasterICT\BrokenSanitario\WebappBroker\web.config#spring/objects] line 1']
   Spring.Objects.Factory.Support.ObjectDefinitionValueResolver.ResolveReference(IObjectDefinition definition, String name, String argumentName, RuntimeObjectReference reference) +644
   Spring.Objects.Factory.Support.ObjectDefinitionValueResolver.ResolvePropertyValue(String name, IObjectDefinition definition, String argumentName, Object argumentValue) +672
   Spring.Objects.Factory.Support.ObjectDefinitionValueResolver.ResolveValueIfNecessary(String name, IObjectDefinition definition, String argumentName, Object argumentValue) +56
   Spring.Objects.Factory.Config.ManagedList.Resolve(String objectName, IObjectDefinition definition, String propertyName, ManagedCollectionElementResolver resolver) +599
   Spring.Objects.Factory.Support.ObjectDefinitionValueResolver.ResolvePropertyValue(String name, IObjectDefinition definition, String argumentName, Object argumentValue) +1478
   Spring.Objects.Factory.Support.ObjectDefinitionValueResolver.ResolveValueIfNecessary(String name, IObjectDefinition definition, String argumentName, Object argumentValue) +56
   Spring.Objects.Factory.Support.AbstractAutowireCapableObjectFactory.ApplyPropertyValues(String name, RootObjectDefinition definition, IObjectWrapper wrapper, IPropertyValues properties) +299
   Spring.Objects.Factory.Support.AbstractAutowireCapableObjectFactory.PopulateObject(String name, RootObjectDefinition definition, IObjectWrapper wrapper) +1218
   Spring.Objects.Factory.Support.AbstractAutowireCapableObjectFactory.ConfigureObject(String name, RootObjectDefinition definition, IObjectWrapper wrapper) +146
   Spring.Objects.Factory.Support.AbstractAutowireCapableObjectFactory.InstantiateObject(String name, RootObjectDefinition definition, Object[] arguments, Boolean allowEagerCaching, Boolean suppressConfigure) +970
   Spring.Objects.Factory.Support.AbstractObjectFactory.CreateAndCacheSingletonInstance(String objectName, RootObjectDefinition objectDefinition, Object[] arguments) +228
   Spring.Objects.Factory.Support.AbstractObjectFactory.GetObjectInternal(String name, Type requiredType, Object[] arguments, Boolean suppressConfigure) +1563
   Spring.Objects.Factory.Support.AbstractObjectFactory.GetObject(String name) +43
   Spring.Objects.Factory.Support.DefaultListableObjectFactory.PreInstantiateSingletons() +720
   Spring.Context.Support.AbstractApplicationContext.Refresh() +1356
   Spring.Context.Support.XmlApplicationContext..ctor(XmlApplicationContextArgs args) +334
   Spring.Context.Support.XmlApplicationContext..ctor(String name, Boolean caseSensitive, String[] configurationLocations) +76
   _dynamic_Spring.Context.Support.XmlApplicationContext..ctor(Object[] ) +238
   Spring.Reflection.Dynamic.SafeConstructor.Invoke(Object[] arguments) +42
   Spring.Context.Support.RootContextInstantiator.InvokeContextConstructor(ConstructorInfo ctor) +241
   Spring.Context.Support.ContextInstantiator.InstantiateContext() +190
   Spring.Context.Support.ContextHandler.InstantiateContext(IApplicationContext parentContext, Object configContext, String contextName, Type contextType, Boolean caseSensitive, String[] resources) +152
   Spring.Context.Support.ContextHandler.Create(Object parent, Object configContext, XmlNode section) +536

[ConfigurationErrorsException: Error creating context 'spring.root': Elemento idDocumento, appartenente allo spazio dei nomi http://innovazione-ict.unina.it/WSDLSanita, importato in due diversi contesti: PrimitiveMapping, MembersMapping.]
   System.Configuration.BaseConfigurationRecord.EvaluateOne(String[] keys, SectionInput input, Boolean isTrusted, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult) +199
   System.Configuration.BaseConfigurationRecord.Evaluate(FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult, Boolean getLkg, Boolean getRuntimeObject, Object& result, Object& resultRuntimeObject) +1153
   System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject) +1468
   System.Configuration.BaseConfigurationRecord.GetSection(String configKey) +41
   System.Web.HttpContext.GetSection(String sectionName) +52
   System.Web.Configuration.HttpConfigurationSystem.GetSection(String sectionName) +57
   System.Web.Configuration.HttpConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection(String configKey) +6
   System.Configuration.ConfigurationManager.GetSection(String sectionName) +78
   Spring.Util.ConfigurationUtils.GetSection(String sectionName) +151
   Spring.Context.Support.WebApplicationContext.GetContextInternal(String virtualPath) +1181
   Spring.Context.Support.WebApplicationContext.GetContext(String virtualPath) +31
   Spring.Web.Services.WebServiceHandlerFactory.System.Web.IHttpHandlerFactory.GetHandler(HttpContext context, String requestType, String url, String path) +130
   System.Web.HttpApplication.MapHttpHandler(HttpContext context, String requestType, VirtualPath path, String pathTranslated, Boolean useAppConfig) +203
   System.Web.MapHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +128
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

按照 Spring 教程，它们使用手工创建的接口，而不是从 wsdl.exe 编译的。在**[http://localhost:2263/ServizioSanitario2.asmx](http://localhost:2263/ServizioSanitario2.asmx)**我有另一个项目，来自另一个解决方案，运行一个定义如下的 Web 服务：**public class ServizioSanitario2 : System.Web.Services.WebService, IServizioSanitario**其中**IServizioSanitario**再次来自 wsdl .exe 编译。

在我目前的作业中，重要的是清楚地显示接口的使用（= 相同的接口）以允许实现类的可互换性（我将基本上表明可以随时使用远程或本地对象更改提供程序）。

所以我想克服这个错误**，而**不必手工制作一个基本上是上面显示的没有属性的新界面。

可能吗？考虑到要在**SOAP**消息中交换的复杂数据类型，因此具有“**清除属性**”接口实际上并不可行，因为数据对象具有自己的 XML 序列化属性。

谢谢你。

# javascript - 使用javascript根据值将项目分为两个级别

> ID：11560562
> 
> 赞同：0
> 
> 时间：2012-07-19T12:08:54.370
> 
> 标签：javascript, jquery, json, sorting

我有以下情况：

我得到了项目信息的 JSON 数据。我解析它并在 HTML 中使用它。
数据格式如下：

```
{"classification": "books","category": "comics","Code": "ITBCBAT08","Title": ...}, ... 
```

但是，现在我需要根据各自的分类和类别组合将它们放在部分下。

在解析结果时，我尝试在一个数组中获取一组唯一的分类，并在另一个数组中获取类别：

```
if ( $.inArray(this.classification, rO.classification) == -1 )
     rO.classification.push(this.classification);

if ( $.inArray(this.category, rO.category) == -1 )
     rO.category.push(this.category); 
```

上面我在打印 HTML 时检查过，但是不能用于组合。

这是上面的一个示例小提琴：http: [//jsfiddle.net/ZGp2z/2/](http://jsfiddle.net/ZGp2z/2/)

输出就像

```
<div class="ClassificationName">

    <h2>Classification Name</h2>

    <div class="categoryName">
       <h3>Category Name</h3>
           <!-- Items that have the above Classification and Category -->
    </div>

    <div class="categoryName2">
       <h3>Category Name2</h3>
           <!-- Items that have the above Classification and Category2 -->
    </div>

</div>
... 
```

有人可以帮我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:15:08.390

我看到了两种可能的解决方法：

1：将数据传递一次并将其组织成多维对象，然后循环输出结果。

2：对于每个项目，如果还没有分类和类别，则创建并附加到DOM，然后将项目名称附加到特定位置。但这将是大量的 DOM 操作，并且可能效率较低。

这是一个可能的解决方案，首先重新格式化数据 (1)。

小提琴：http: [//jsfiddle.net/ZGp2z/17/](http://jsfiddle.net/ZGp2z/17/)

```
sO = [
        {
            "classification": "books",
            "category": "comics",
            "Code": "ITBCBAT08",
            "Title": "Dark Knight"
        },
        {
            "classification": "cds",
            "category": "comics",
            "Code": "ITCCCSUP02",
            "Title": "Superman"
        },
        {
            "classification": "books",
            "category": "literature",
            "Code": "ITBLII01",
            "Title": "To Kill a Mockingbird"
        }
    ];

     // Result = $.parseJSON(sO);
     Result = sO;

var html = "", data = {}, cls, cat;

for(var i in sO) {
    cls = sO[i].classification;
    cat = sO[i].category;

    if(typeof data[cls] === "undefined") {
        data[cls] = [];
    }

    if(typeof data[cls][cat] === "undefined") {
        data[cls][cat] = [];
    }

    data[cls][cat].push(sO[i]);
}

for(var cls in data) {
    html += "<div class=\"main\" style='display:block' >";
    html += "<h2>" + cls  + "</h2>";

    for(var cat in data[cls]) {
        html += "<h3>" + cat  + "</h3>"

        for(var item in data[cls][cat]) {
            html += "<p>" + data[cls][cat][item].Title + "</p>";   
        }
    }

    html += "</div>";
    html += "<div class=\"clr\"></div>";
}
$('#test').append(html); 
```

改进点：

1.  在 for-in 循环中使用 hasOwnProperty

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:11:39.643

给你一个算法！

1.  首先，您必须对对象列表进行排序

2.  有一个名为 PreviousClassification 的变量。

3.  遍历对象

4.如果`previousClassification`为空或等于`currentClassification`。然后只需附加类别名称，然后分配`currentClassification`给`previousClassification`

1.  如果没有，请关闭`classification`Div 并为新的 Div 打开一个新的`Classification`Div`Classification`

2.  如果索引值等于 length-1 ，则关闭`classificationDiv`

# keyboard - 尖括号崇高文本 2

> ID：11560567
> 
> 赞同：0
> 
> 时间：2012-07-19T12:09:03.703
> 
> 标签：keyboard, sublimetext2

我对 Sublime Text 中的尖括号有疑问。我曾经`alt+keysNextToM`插入`<`and `>`，但现在它不起作用，它仅在我将文档语法设置为“纯文本”时才起作用。请帮帮我，没有这些钥匙我不能工作。

在 CSS 或 HTML 源代码中`Alt+>`或`Alt+<`跳转代码，但我想插入`<`或`>`而不是在文档中导航。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T06:53:24.450

我有同样的问题。上次更新后，我无法制作尖括号。删除 ZenCoding 解决了这个问题。我并没有真正使用它，所以摆脱它不是问题。

我的情况是你有同样的问题，需要 ZenCoding 完成键绑定，可能有一些东西要解绑:)

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T08:52:24.413

`Alt`我在另一个模块杀死权+`F`插入括号时遇到了类似的问题`[`...您可以恢复此默认键绑定，或间接重置键绑定。

通过在其中将您的用户键绑定重新定义为插入所需字符的命令：（修改模块键绑定文件将在更新时被覆盖）

`{ "keys": ["ctrl+alt+f"], "command": "insert", "args": {"characters": "["} },`

你的可能是

```
{ "keys": ["ctrl+alt+,"], "command": "insert", "args": {"characters": "<"}  },
{ "keys": ["ctrl+alt+."], "command": "insert", "args": {"characters": ">"}  }, 
```

# java - 如何使用 Java 命令行应用程序对 https://tfspreview.com（MIcrosoft 托管的 TFS）进行身份验证？

> ID：11560568
> 
> 赞同：4
> 
> 时间：2012-07-19T12:09:03.463
> 
> 标签：java, soap, tfs, oauth-2.0, azure-devops

我正在尝试从我的命令行 Java 应用程序访问[https://tfspreview.com SOAP 界面。](https://tfspreview.com)与本地 TFS 服务不同，此服务使用 Live ID 身份验证，这会导致通信失败，并通过 302 重定向到其身份验证服务。我不知道如何在那里进行身份验证。

任何指针？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T15:11:20.213

**<tl;博士>**

您可以使用[基本身份验证](http://tfspreview.com/en-us/home/news/2012/aug-27/)为[Team Foundation Service](http://tfspreview.com)提供无头体验。此外，如果您没有使用[TFS SDK for Java](http://www.microsoft.com/en-us/download/details.aspx?id=22616)，它可能会对您有所帮助。

**< /tl;博士 >**

一般来说，您可以使用三种类型的凭据进行身份验证，这决定了您用于身份验证的机制：

1.  活体身份证。如您所述，这需要您使用 Web 浏览器登录到 Windows Live 并使用生成的 OAuth 令牌进行身份验证。

2.  映射到您的 Live ID 的附加密码，该密码用于基本身份验证。[8 月 27 日有关此功能的公告](http://tfspreview.com/en-us/home/news/2012/aug-27/)中提供了有关设置此附加映射的说明。

3.  服务帐户。除了用户列表（由 Live ID 指定）之外，您的 Team Foundation Service 帐户还有一个特殊的用户帐户，用于构建自动化等。每个 Team Foundation Service 帐户都有一个服务帐户，顾名思义，这是一个管理员帐户。

让我们来看看每个选项：

**Live ID**：使用 OAuth 使用 Live ID 进行身份验证对于您的命令行应用程序来说会很困难。Visual Studio 在这里所做的是将 Internet Explorer 打开到[tfspreview.com](http://tfspreview.com)，这最终会提示您输入您的 Live ID 凭据。此时，各种 OAuth cookie 将被设置到您的 Web 浏览器中。由于 Visual Studio 和 Internet Explorer 共享相同的底层 HTTP 连接机制，因此它可以使用这些相同的 cookie。使用 Java 命令行客户端，您就没有那么奢侈了（除非您专门为 Windows 编写此程序并且想要编写一些 JNI 来调用系统的 HTTP 库。）

那么你有什么选择呢？我想您有可能遵循给定的重定向-此时您最终将获得一个登录页面，您可以将凭据发布到该页面，并最终将 OAuth cookie 发送回给您，然后您可以将其用于身份验证。但我怀疑这可能不是你想走的路。我强烈怀疑让您登录需要健康剂量的 JavaScript。

**基本身份验证**：这些需要额外的设置步骤，但简单明了。没有理由不使用这些。

**服务帐户**：虽然缺少 Web 浏览器，但您*可以*使用您的服务凭证提供[WRAP 令牌。](http://wiki.oauth.net/w/page/12238537/OAuth%20WRAP)您可以使用非常有用的[TFS Service Credential Viewer 查看](http://blog.hinshelwood.com/tfs-service-credential-viewer/)您帐户的服务凭证。使用您的服务帐户用户名和密码，您可以创建一个 WRAP cookie 进行身份验证。但此时，您作为服务帐户进行身份验证，而不是您的用户帐户之一。

如果您不想自己创建 WRAP 令牌，您还可以使用[Team Foundation Server SDK for Java](http://www.microsoft.com/en-us/download/details.aspx?id=29933)来构建连接。只需像`UsernamePasswordCredentials`创建`TFSTeamProjectCollection`. 即使您不想对服务器使用 API 方法，您也可以`HTTPClient`从该连接中获取原始数据，并且它将具有所有必要的配置集。如果我们将来向 Team Foundation Service 添加新的身份验证机制，那么依赖 SDK 也会使您受益，因为 SDK 的 API 不会发生显着变化。

# iphone - 在 iOS 设备上运行但不在模拟器中运行时出现 SIGABRT 错误

> ID：11560572
> 
> 赞同：1
> 
> 时间：2012-07-19T12:09:15.217
> 
> 标签：iphone, ios, xcode, ios-simulator

该应用程序最初加载了一个本地网页，我可以在日志中看到以下错误。我是否认为这意味着网页没有被复制到设备上？

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSURL initFileURLWithPath:]: nil string parameter'
*** First throw call stack:
(0x3572088f 0x33344259 0x35720789 0x357207ab 0x34abd05f 0x34abcffb 0x79145 0x32e59c8b 0x32eb963d 0x32eb95db 0x32eb8f15 0x32eb8c49 0x78bd5 0x32e58cab 0x32e527dd 0x32e20ac3 0x32e20567 0x32e1ff3b 0x3341222b 0x356f4523 0x356f44c5 0x356f3313 0x356764a5 0x3567636d 0x32e5186b 0x32e4ecd5 0x78a25 0x78628)
terminate called throwing an exception(lldb) 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:19:32.587

如果您还发布了创建文件 url 的代码会更容易。

只需查看错误检查您在创建 URL 时是否正确写入了文件名。模拟器对按键不敏感，但设备对按键敏感。所以在模拟器上 x.png 和 X.png 是同一件事，但在设备上它们是不同的

# html - 使用 line-height 垂直居中

> ID：11560575
> 
> 赞同：2
> 
> 时间：2012-07-19T12:09:18.330
> 
> 标签：html, vertical-alignment, css

```
<div style="line-height:100px; height:100px;">
    <span style="vertical-align:middle;">test</span>
</div> 
```

只有`vertical-align:middle`在跨度中指定时，上面的 html 才会产生与下面不同的结果。

```
<div style="height:100px;">
    <span style="line-height:100px; vertical-align:middle;">test</span>
</div> 
```

它在 chrome 和 firefox 上下降了 1px，在 ie8 上下降了 2px。

为什么不一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:15:43.570

问题是 div 标签的默认`border-width`设置`0px`，然后查看更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:03:23.363

SPAN 和 DIV 元素之间的主要区别在于 SPAN 不对其自己进行任何格式化。DIV 元素包括一个段落分隔符。SPAN 元素只是告诉浏览器将样式规则应用于 SPAN 中的任何内容。

而且我在想，由于 div 的一点点格式化可能会有所不同。

# ios - 在 iOS 上，UIButton 可以使用 addTarget —— UILabel 呢？

> ID：11560576
> 
> 赞同：1
> 
> 时间：2012-07-19T12:09:18.587
> 
> 标签：ios, uilabel

在 iOS 上， a`UIButton`可以`addTarget`用来指定在点击按钮时调用的方法，但是`UILabel`，是否有类似的东西，或者是唯一的选项使用`UITapGestureRecognizer`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:12:52.777

`addTarget:action:forControlEvents:`是 UIControl 类的一个方法。UIButton 是 UIControl 的子类，但不是 UILabel。所以是的，点击手势是更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:16:51.447

请参阅[此问题](https://stackoverflow.com/questions/3169798/handling-touch-event-in-uilabel-and-hooking-it-up-to-an-ibaction)以获取答案。

> UILabel 继承自 UIView，而 UIView 继承自 UIResponder。所有 UIresponder 对象都可以处理触摸事件。

# mysql - 在复制的 MySQL 数据库上进行 Solr 搜索

> ID：11560580
> 
> 赞同：0
> 
> 时间：2012-07-19T12:09:35.273
> 
> 标签：mysql, database, solr, full-text-search, faceted-search

我想创建一个数据库网络发布者。

Solr 搜索功能非常适合我的需求（分面搜索、全文搜索等）。

我的问题是我需要在网络上同步数据。

我读到 MySQL 数据库必须在 Solr 中导入。

我计划使用一个源 MSSQL 数据库，复制到 Web 服务器上的 MySQL 数据库上。我需要在这个数据库上使用 Solr。

是否有解决方案可以使复制的 SQL 数据库上的更改可以自动回显到 Solr 索引上？我不想每次修改时都导入整个数据库，这会使我的产品使用起来很复杂。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:35:52.277

您不需要每次都索引完整的数据库，这就是[Delta 导入](http://wiki.apache.org/solr/DataImportHandler#Using_delta-import_command)的用途。您只需将其配置为在需要时导入增量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T16:22:12.913

您可以使用[DataImportScheduler](http://wiki.apache.org/solr/DataImportHandler#Scheduling)来保持数据同步。这是保持 Solr 索引同步的最常用方法。

还有其他方法，您可以在数据库中设置触发器来触发 Solr 的 REST 服务，该服务将反映所有插入/更新/删除文档的更改。

此外，由于 db （通常）用于处理某些应用程序，您可以设置一个过滤器（Java Web 应用程序的 javax.servlet）来拦截请求并将它们推送到 Solr，甚至在它们到达数据库之前。

# objective-c - 在堆栈上切换当前 UIVIewController

> ID：11560582
> 
> 赞同：0
> 
> 时间：2012-07-19T12:09:41.960
> 
> 标签：objective-c, uiviewcontroller, modalviewcontroller

我有我的根视图 (A) 和模态呈现的视图 (B)。在 BI 上想要显示一个新视图 (C) 来替换堆栈上的 B，这样当我调用 removeModalViewController 或任何它返回到 A 时。

所以堆栈首先看起来像这样`A->B`

然后在 B 中，点击一个按钮将堆栈更改为`A->C`

我该怎么做？我已经尝试了一百万种不同的东西但没有成功

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:22:34.857

很容易解决，只需告诉 B `dismissModalViewController`with `animated`= `NO`。执行此操作时，将 C 呈现为模态视图控制器，也不是动画。

# javascript - ExtJS文件上传表单方法

> ID：11560584
> 
> 赞同：1
> 
> 时间：2012-07-19T12:09:48.617
> 
> 标签：javascript, post, extjs, put

如何使用带有 PUT 方法而不是 POST 的文件上传表单？这是我的表单代码：

```
this.personEditForm = new Ext.FormPanel({
  xtype:"form",
  fileUpload:true,
  frame:true,
  autoScroll:true,
  layout:{
    type:"vbox",
    flex:"even"
  },
  items:[
    {
      xtype:'fileuploadfield',
      emptyText:'Выберите файл...',
      name:'avatar',
      width:300,
      fieldLabel:'Фото пользователя',
      buttonText:'Обзор'
    }
  buttons:[
    {
      text:'Сохранить',
      handler:function () {
        if (self.personEditForm.getForm().isValid()) {
          method = "PUT";
          url = PERSONS_URL + personID;
          self.personEditForm.getForm().submit({
            method:method,
            url:url,
            success:function (form, action) {}
          });
        }
      }
    }
  ]
 }); 
```

当我删除文件字段时，PUT 方法有效。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:08:16.480

文档指定仅使用 GET 或 POST 方法。[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-cfg-method](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-cfg-method)

# java - 在 DraggableGridView 中显示布局

> ID：11560587
> 
> 赞同：1
> 
> 时间：2012-07-19T12:10:00.523
> 
> 标签：java, android, android-layout

我正在尝试制作一个图像+标题对的网格，用户将能够通过拖放重新排列。为此，我使用 DraggableGridView - [https://github.com/thquinn/DraggableGridView](https://github.com/thquinn/DraggableGridView)。

虽然我可以显示 TextViews 和 ImageViews 并重新排列它们，但当我尝试将它们连接到一个布局中时，一切都会停止显示。

因此，在使用图像和标题解析 XML 之后，它可以工作：

```
for(ImagePair pair : pairs){
    tv = new TextView(this);
    tv.setText(pair.getText());

    URL imageURL = new URL(pair.getURL());
    Bitmap bmp = BitmapFactory.decodeStream(imageURL.openConnection().getInputStream());
    imv = new ImageView(this);
    imv.setImageBitmap(bmp);

    dgv.addView(tv);
    dgv.addView(imv); 
```

它显示一个文本和图像网格，但它们没有配对 - 您可以用图像等切换文本的位置。

当我尝试插入包含 Image+ 文本的布局时：

```
for(ImagePair pair : pairs){

    Bitmap bmp = BitmapFactory.decodeStream(imageURL.openConnection().getInputStream());

    LayoutInflater li = getLayoutInflater();
    View v = li.inflate(R.layout.image, null);

    TextView txtv = (TextView)v.findViewById(R.id.ltext);  

    txtv.setText(pair.getText());

    ImageView iv = (ImageView)v.findViewById(R.id.limage);
    iv.setImageBitmap(bmp);

    dgv.addView(v); 
```

什么都没有显示。我可以通过执行显示任何单个视图

```
this.setContentView(v); 
```

它将正确显示图像+标题对，但尝试将它们插入网格会导致黑屏，尽管网格报告存在 9 个孩子。

我正在使用的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
    <TableRow android:layout_width="wrap_content"
        android:layout_height="wrap_content">    

    <ImageView
        android:id="@+id/limage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
    </ImageView>

    </TableRow>

    <TableRow android:layout_width="wrap_content"
        android:layout_height="wrap_content">  

    <TextView
        android:id="@+id/ltext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView"
        android:gravity="center_horizontal"
        android:textColorHighlight="#656565">
    </TextView>
    </TableRow>   

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T20:45:46.093

**编辑**

可以在[这里](https://github.com/mrKlar/PagedDragDropGrid)找到更好的版本。它基于 DraggableGridView 并具有更多功能，正在积极开发中并且相当稳定。

原始帖子：
我一直在研究图书馆，我目前正在按照您希望它使用数据库的方式工作，我正在努力将它移动到 ArrayAdapter。[你可以在这里](https://github.com/lkorth/DraggableGridView)找到我的叉子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-04T12:43:35.063

在 DraggableGridView.java 中添加一行代码解决了这个问题。打开 DraggableGridView.java 并添加以下行

```
getChildAt(i).measure(MeasureSpec.makeMeasureSpec(childSize, MeasureSpec.EXACTLY), MeasureSpec.makeMeasureSpec(childSize, MeasureSpec.EXACTLY)); 
```

前

```
getChildAt(i).layout(xy.x, xy.y, xy.x + childSize, xy.y + childSize); 
```

希望有帮助。从另一个帖子链接找到解决方案：[Imageview and textview not display in view?](https://stackoverflow.com/questions/13699426/imageview-and-textview-not-displaying-in-view)

# c# - 将 xml 节点加载到可以编辑的列表中？

> ID：11560588
> 
> 赞同：0
> 
> 时间：2012-07-19T12:10:00.977
> 
> 标签：c#, xml

我正在寻找一种将数据从我的 xml 加载到列表的方法，我可以编辑这些项目，然后将更改加载回 xml 文件；

```
<game id="1" name="animals" instruction=" instruction here ">
<words>
  <word wordName="Weasel" categoryCode="1" categoryName="Mammals" />
  <word wordName="Dog" categoryCode="1" categoryName="Mammals" />
  <word wordName="Cat" categoryCode="1" categoryName="Mammals" />
  <word wordName="Snake" categoryCode="2" categoryName="Reptiles" />
  <word wordName="Chameleon" categoryCode="2" categoryName="Reptiles" />
  <word wordName="agama" categoryCode="2" categoryName="Reptiles" />
  <word wordName="Chicken" categoryCode="3" categoryName="Birds" />
  <word wordName="Peacock" categoryCode="3" categoryName="Birds" />
  <word wordName="Pigeon" categoryCode="3" categoryName="Birds" />
</words>` 
```

例如：然后我加载我的页面，将有 5 个列表，（其中 2 个目前为空），另外 3 个将是“哺乳动物”“爬行动物”和“鸟类”。在其中的每一个下将是该列表以外的所有项目的列表。下哺乳动物：黄鼠狼、狗、猫等。

我正在寻找一种方法让我的用户更改所有内容，再添加 2 个节点（用于额外的空列表），更改 wordName 值，更改 categoryName 值，添加更多值等...

有人对如何制作清单有任何建议吗？我可以使用哪个组件？

我在 c# 和 Visual Studio 2010 上编程。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:02:01.470

你可以从：

```
XElement root = XElement.Load(file); 
```

使用根节点，您可以找到单词 children：

```
IEnumerable<XElement> wordList = root.Decendants("word"); 
```

然后遍历每个 wordList 视图`XElement word`以获取数据（这里和其他地方有很多示例，只需搜索即可）。您可以使用其`.Add()`方法向任何 XElement 添加更多内容。如果要将其添加到`"words"`元素中，可以使用以下命令进行搜索：

```
XElement words = root.Element("words"); // if it is a first rank child or
XElement words = root.XPathSelectElement("//words[word]"); // if it is burried deeper 
```

`//words[word]`in的`XPathSelectElement`意思`.Descendants("words") that has a child word`。要使用`XPathSelectElement`，您需要将以下 using 添加到您的 csharp 文件中：

```
using System.Xml.XPath; 
```

根据您的需要，显然还有其他技巧、方法和手段。祝你好运！

# c - 设置 GTK+ 以在 MinGW 中显示 GUI

> ID：11560589
> 
> 赞同：0
> 
> 时间：2012-07-19T12:10:01.237
> 
> 标签：c, gtk, cygwin, mingw

这是在 C 中制作 GUI 的大学作业 - 我使用的是 Windows 7

我已经遵循了几个教程，但似乎没有任何效果。让你知道我做了什么

我已经安装了 gtk、msys 和 minGW。

我相信我拥有所有必要的 cygwin 软件包（这相关吗？？）

当我尝试使用 cygwin 中包含的 gtk 东西编译 C 程序时，只是为了看看我是否安装了我需要的任何东西

```
$ gcc base.c -o base `gtk-config --cflags --libs`

Sunny@Sunny-Brain ~
$ ./base

Gtk-WARNING **: cannot open display: 
```

我不确定这是什么意思。它似乎编译然后运行失败。

我使用[https://mail.gnome.org/archives/gtk-list/2008-May/msg00116.html](https://mail.gnome.org/archives/gtk-list/2008-May/msg00116.html)作为设置 gtk 的方法，但它要求我解压缩并解压缩一个不起作用的 pixman 文件。我下载了 gtk 作为一个捆绑包，它在我的 C: 驱动器中，渴望为我制作 GUI。

如果它有帮助 - 我有一个 pixman-0.26.2 和内部，一个 pixman-0.26.2.tar.gz - 也在我的 C: 驱动器中。

在这一点上，我愿意尝试任何事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T12:18:57.003

您似乎已经使用 Cygwin 安装了 GTK 的 X11 版本。GTK 的 X11 版本需要运行 X 服务器才能使用它。错误消息告诉您，告诉 GTK 要连接到哪个 X 服务器的环境变量未设置。这可能意味着没有 X 服务器在运行。

我建议您安装 GTK 的**Windows**版本（它不需要 X 服务器，并且默认情况下还使用本机 Windows 外观）并使用它和 MinGW 进行编译。您根本不需要使用 Cygwin。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T12:41:55.403

我找到了解决方案。

我已经安装了cygwin。我使用了 mingw 和 msys，因为：

1）我是新手

2）作为一个新手，我上网，找到了一些关于设置 GTK 的教程，然后天真地跟着他们。

如果您已经安装了 cygwin，则不需要 mingw 或 msys。但是您确实需要以下内容：

a) 安装了相应的 cygwin 包：使用 cygwin 安装程序时，不要使用默认安装。找出您特别需要的软件包或安装所有软件包并在您知道自己在做什么的情况下酌情删除。

b) 为了显示 GUI，需要有一个环境路径变量来显示它。使用这个设置它：

```
export DISPLAY=:0 
```

然后使用

```
echo $display 
```

它应该回声 -

```
:0 
```

检查您是否可以使用以下命令显示 GUI：

```
xclock& 
```

如果这显示了一个时钟，那么您将准备做一些 GTK 教程。

# php - 使用 MVC PHP 保存图像

> ID：11560593
> 
> 赞同：2
> 
> 时间：2012-07-19T12:10:18.430
> 
> 标签：php, file-upload

我正在尝试在 MVC 系统上处理表单，但无法将图像保存在服务器上。我得到的错误是：

```
Warning: move_uploaded_file(/xcomplete/xtyre/public/images/products/brunofitasHD.jpg) [function.move-uploaded-file]: failed to open stream: No such file or directory in /home/gbengmux/public_html/xcomplete/xtyre/models/insert_model.php on line 120

Warning: move_uploaded_file() [function.move-uploaded-file]: Unable to move '/tmp/phpFHXzmh' to '/xcomplete/xtyre/public/images/products/brunofitasHD.jpg' in /home/gbengmux/public_html/xcomplete/xtyre/models/insert_model.php on line 120 
```

这是我的代码

视图类显示的表单：

```
<form action="<?php echo DOC_ROOT;?>/insert" class="mainForm" id="tyreForm"    method="POST" enctype="multipart/form-data">

<!-- Dropdowns and selects -->
        <fieldset>
            <div class="widget">

                //OTHER FIELDS HERE...

                <div class="rowElem">
                    <label>Photo:</label> 
                    <div class="formRight">
                        <input type="file" name="file" id="file" class="fileInput"  />

                         <input id="submitButton" type="button" value="Insert" class="greyishBtn submitForm" />

                    </div>
                    <div class="fix"></div> 
                </div>
            </div>     
    </fieldset>
</form> 
```

控制器：@/插入

```
 class Insert extends XController{

             public function __construct(){
            parent::__construct();
            if(XSession::get(APP_NAME.'/loggedIn')){

                $this->view->pageTitle = "Insert Tyres";
                $this->loadModel("insert_model");

            }
            else{
                header('location: '.DOC_ROOT.DS.'login');
            }

        }
         //THIS FUNCTION IS CALLED AFTER THE CONSTRUCTOR

        public function index(){

            //CALLING THE FUNCTION TO PROCESS FORM

            $this->model->run();

            //GETTING MODEL VARS
            $this->view->pars = $this->model->getPars();
            //LOADING MODULES
            $this->loadModule("mod_top_nav");
            $this->runModules();
            //RENDER VIEW   
            $this->view->render("insert");
        }
...
} 
```

处理表单的模型：

```
class Insert_Model extends XModel{

function __construct(){
    parent::__construct();
    $this->xdb->open();
    $this->getBrands();
    $this->getWidth();
    $this->getDiameter();
    $this->getRatio();
    $this->getLoadIndex();

}

function run(){
    //OTHER POST 's...

            //processing data

            if (($_FILES["file"]["type"] == "image/gif")
            || ($_FILES["file"]["type"] == "image/jpeg")
            || ($_FILES["file"]["type"] == "image/png")
            || ($_FILES["file"]["type"] == "image/pjpeg"))
            {
                if($_FILES["file"]["size"] < 100000){
                    if ($_FILES["file"]["error"] > 0){
                        array_push($this->pars['error'], 'File Error');
                        return false;
                    }
                    else{
                        //THE ERROR IS HERE

                        if(move_uploaded_file($_FILES["file"]["tmp_name"],
                                   DOC_ROOT."/public/images/products/" . $_FILES["file"]["name"])){
                                return true;
                        }
                        else{
                            array_push($this->pars['error'], 'Could not save file');

                        }
                    }
                }
                else{
                    array_push($this->pars['error'], 'File is too big');
                    return false;
                }

            }
            else{
                array_push($this->pars['error'], 'Invalid File');
                return false;
            }

            //PROCESS DATA ETC... 
```

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:14:26.340

查看此错误：

```
Warning: move_uploaded_file() [function.move-uploaded-file]:
Unable to move '/tmp/phpFHXzmh' 
to 
'/xcomplete/xtyre/public/images/products/brunofitasHD.jpg' 
in /home/gbengmux/public_html/xcomplete/xtyre/models/insert_model.php on line 120 
```

看起来好像路径是错误的 IE 从一开始就丢失了一些东西。它不应该尝试将文件写入此文件吗？

```
/home/gbengmux/public_html/xcomplete/xtyre/public/images/products/brunofitasHD.jpg 
```

# asp.net-mvc-4 - 没有 DbDataController 的结果

> ID：11560597
> 
> 赞同：0
> 
> 时间：2012-07-19T12:10:24.340
> 
> 标签：asp.net-mvc-4, upshot

我正在浏览 MVC4 的单页应用程序，我可以看到 upshot.js 与 WebApi 交互，这真的很酷。但是通过控制器代码，我发现控制器派生自 DbDataController，它直接使用我的 EntityFramework DbContext 来执行数据库操作。但是如果我想做这些操作，比如说我的模型不是实体，而是我需要存储到像 RavenDb 这样的 NoSql 数据库中的普通模型。我应该怎么做才能获得 Upshot 的所有这些功能，但我应该能够做到的数据库操作？我将如何将模型的这些元数据提供给结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T01:37:41.890

经过大量研究，我遇到了同样的问题；我得出一个结论：Microsoft Single Page App 不成熟，这个 MVC 模板从 VS 2012 中删除。

看到 JayData 的这个视频......那东西让我流口水 [http://www.youtube.com/watch?v=LlJHgj1y0CU](http://www.youtube.com/watch?v=LlJHgj1y0CU)

对于应用中页面之间的客户端导航，请使用 Sammy JS。似乎 John Papa 在 Pluralight.com [http://johnpapa.net/spapost2的下一个视频中推荐了这个库](http://johnpapa.net/spapost2)

# android - Android：如何通过帐户管理器进行 Twitter oAuth

> ID：11560609
> 
> 赞同：2
> 
> 时间：2012-07-19T12:11:04.463
> 
> 标签：android, twitter-oauth, accountmanager

在我的应用程序中，我想`oAuth`在 Twitter、Facebook 等多个网站的登录过程中使用协议。我有一些关于 Twitter oAuth 的问题。

我使用这些行来访问令牌和秘密数据：

```
AccountManager am = AccountManager.get(MyActivity.this);
Account[] accounts = am.getAccountsByType("com.twitter.android.auth.login");

if(accounts.length > 0) {
    Account acct = accounts[0];
    am.getAuthToken(acct, "com.twitter.android.oauth.token", null, MyActivity.this, new AccountManagerCallback<Bundle>() {
        public void run(AccountManagerFuture<Bundle> arg0) {
            // Accessing token
        }
    }, null);               
} else {
    Toast.makeText(getApplicationContext(), "There is no defined account", Toast.LENGTH_SHORT).show();
} 
```

所以我成功了。但我很好奇这些问题：

*   我需要任何 Twitter 应用程序吗？
*   我将如何检查这些令牌还是必须检查？我的意思是我将如何获得像 twitter_id 这样的用户信息？

任何信息都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T17:08:36.787

> 我需要任何 Twitter 应用程序吗？

是的，您将需要一个 Twitter 应用程序来使用 Twitter 帐户进行身份验证。为此，请转到[Twitter 开发人员](https://dev.twitter.com)以创建您的应用程序。

> 我将如何检查这些令牌还是必须检查？我的意思是我将如何获得像 twitter_id 这样的用户信息？

当您在 Twitter 开发者网站上注册您的 Twitter 应用程序时，Twitter 将生成您的应用程序的使用者密钥和使用者密码。如果需要，您可以重置它们。它们写在您的应用程序的专用部分中。您可以通过转到`<your Twitter Developers account>`（您可以使用自己的 Twitter 凭据进行身份验证）>`My Applications`并单击您的应用来访问此部分。

对于 OAuth 令牌和 OAuth 密钥，Twitter 开发人员将在创建最后一个时为应用程序的所有者生成它们。对于其他用户，您必须执行 OAuth 身份验证流程才能获取他们的 (OAuth) 令牌和密码。您也可以使用此过程检索所有者 OAuth 令牌。在流程结束时，Twitter API 将为您提供最终用户的令牌（OAuth 令牌和 OAuth 密钥）、经过身份验证的用户的 Twitter id 和屏幕名称（用户名）。有了这些信息，您将能够获得您想要的所有信息。

# ruby-on-rails - 如何测试带有重音日期的邮件？

> ID：11560610
> 
> 赞同：1
> 
> 时间：2012-07-19T12:11:09.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer, testunit

在我的邮件中，我有一个西班牙语格式的日期：

> 萨巴多，2012 年 7 月 21 日

我在我的 config/locales/es.yml 中配置了一个自定义格式化程序

```
my_date_format: ! '%A, %-d de %B del %Y, %k:%M' 
```

我正在尝试以这种方式对其进行测试：

```
test "date with accent" do
  mail = MyMailer.my_template

  assert_match I18n.l(@object.date, format: :my_date_format), mail.body.encoded
end 
```

但它失败了：

> # 运行测试：
> 
> F
> 
> 在 0.438078 秒、2.2827 次测试/秒、15.9789 次断言/秒内完成测试。
> 
> 1) 失败：test_date_with_accent(MyMailerTest) [test/unit/mailers/my_mailer_test.rb:12]: Expected /sábado,\ 21\ de\ julio\ del\ 2012,\ 14:10/ to match "..... . ........s=C3=A1bado，2012 年 7 月 21 日，14:10\r\n ........"。

（我省略了其余的电子邮件内容）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:26:17.767

由于编码的正文是“引用可打印的”，让我们对测试日期进行编码。

首先我们为 String 创建一个自定义方法：

```
class String
  def to_quoted_printable(*args)
    [self].pack("M").gsub(/\=\n/, "")
  end
end 
```

这可以放在 test_helper.rb 中

接下来我们只是使用该自定义方法来准备日期值，因此可以完成匹配：

```
assert_match I18n.l(@object.date, format: :my_date_format).to_quoted_printable, mail.body.encoded 
```

现在日期已正确编码，测试将通过。

**甚至更简单**，不需要对电子邮件正文进行编码，因此也可以这样做：

```
assert_match I18n.l(@object.date, format: :my_date_format), mail.text_part.body.to_s 
```

# c - 没有为守护进程生成 coredump

> ID：11560611
> 
> 赞同：1
> 
> 时间：2012-07-19T12:11:11.103
> 
> 标签：c, gcc, gdb, coredump, cc

我有一个作为守护进程运行的 C 进程。由于出现错误，它会出现段错误并终止。

为了找到问题，我启用`ulimit -c unlimited`了 coredump 进行分析。但不会生成 coredump 文件。如果我在没有守护进程的情况下运行该进程，则会生成 coredump。该问题仅在守护进程时发生。

为守护进程生成 coredump 的方法是什么？

# jquery - 使用 jQuery 提交表单后停留在当前选项卡上

> ID：11560613
> 
> 赞同：6
> 
> 时间：2012-07-19T12:11:25.137
> 
> 标签：jquery

我试图留在一个特定的选项卡上（在本例中为 tab2 ），但在单击提交按钮后，选项卡将恢复为选项卡 1，该选项卡具有默认的活动类。我用这个撞了一堵砖墙。

这是我的示例**[[jsfiddle]](http://jsfiddle.net/cwHQA/1/)**：

HTML：

```
<ul class='tabs'>
            <li><a href='#tab1'>Tab 1</a></li>
            <li><a href='#tab2'>Tab 2</a></li>
        </ul>
<div id='tab1'>
            <h3>Section 1</h3>
            <p>Lorem ipsum dolor sit amet, consssectetur adipiscing elit. Donec lobortis placerat dolor id aliquet. Sed a orci in justo blandit commodo. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae.</p>
                <form id="form1" action="" method="post">            
      <input id="button-1" name="" type="submit" />
</form>
        </div>
<div id='tab2'>
<a name="tab2"></a>
            <h3>Section 2</h3>
            <p>Aenean et est tortor. In pharetra pretium convallis. Mauris sollicitudin ligula non mi hendrerit varius. Fusce convallis hendrerit mauris, eu accumsan nisl aliquam eu.</p>

    <form id="form2" action="" method="post">            
      <input id="button-2" name="" type="submit" />
</form>
        </div>
<div>
  <h2>RESULTS </h2>
</div> 
```

JavaScript：

```
$(document).ready(function(){
    $('ul.tabs').each(function(){
        var $active, $content, $links = $(this).find('a');
        $active = $links.first().addClass('active');
        $content = $($active.attr('href'));
        $links.not(':first').each(function () {
            $($(this).attr('href')).hide();
        });

        $(this).on('click', 'a', function(e){
            $active.removeClass('active');
            $content.hide();
            $active = $(this);
            $content = $($(this).attr('href'));
            $active.addClass('active');
            $content.show();
            e.preventDefault();
        });
    });
}); 
```

​ CSS：

```
*         {padding:0; margin:0;}
html      {padding:15px 15px 0;font-family:sans-serif;font-size:14px;}
p, h3     {margin-bottom:15px;}
div       {padding:10px;width:600px;background:#fff;}
ul.tabs   {margin-left:2px;}
#tab1, #tab2 {border-top: solid 1px #ccc;margin-top: -1px; }
#tab2      {display:none;}a
ul.tabs li  {list-style:none;display:inline;}
ul.tabs li a   {padding:5px 10px;display:inline-block;background:#666;color:#fff;text-decoration:none;}
ul.tabs li a.active {background:#fff;color:#000;border: solid 1px #ccc; border-width: 1px 1px 0 1px;} 
```

​</p>

您的帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:40:27.447

```
<div id="tab">
<ul>
            <li><a href='#tab1'>Tab 1</a></li>
            <li><a href='#tab2'>Tab 2</a></li>
        </ul>
</div>
<form id="form1" action="?tab=tab1" method="post"> 

The jQuery function:
$(document).ready(function(){
        $("#tab").tabs();
        var param = $(document).getUrlParam('tab');
        if (param !=null)
            $("#tab").tabs('select',param);
        else 
            $("#tab").tabs();
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T04:40:53.013

> 尝试这个

```
<asp:HiddenField ID="hidAccordionIndex" runat="server" Value="0" /> 
```

将其放入您的编码中并按如下方式更改脚本

```
$("#accordion").accordion({
header: "h3",
autoHeight: false,
event: "mousedown",
active: activeIndex,
ui: "PageName.aspx",
change: function (event, ui) {
var index = $(this).accordion("option", "active");
$('#<% =hidAccordionIndex.ClientID %>').val(index);
}
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-07T07:37:33.033

您可以在 URL 中指定选项卡。选项卡是 URL 中的锚点，例如：yourURL/#tab

```
<form id="form2" action="#tab2" method="post">            

</form> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-11T10:50:32.167

它是如此容易。提交表单后，您必须自动单击所需的选项卡。首先像这样将 ID 放入您的标签 `<a href='#tab1' id=idtab1 > <a href='#tab2' id=idtab2 >` 中，然后在正文关闭之前使用 Javascript

`<script> document.getElementById('idtab2').click(); </script>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T12:15:04.323

在提交按钮的事件中使用[JQuery.ajax()](http://api.jquery.com/jQuery.ajax/)`onclick()`以异步回发值。这样，不会有窗口重新加载，因为回发将在后台发生。

**HTML**

```
<form id="form2">            
      <input id="button-2" type="button" onclick="submit();" value="submit"/>
</form> 
```

**JavaScript**

```
​function submit(){
   $.ajax({
  type: "POST",
  url: "submit.php",
  data: { param1: "param1", param2: "param2" }
  }).done(function() {
      alert( "Submitted" );
  });
  }​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T12:16:01.950

添加 e.preventDefault(); 到提交按钮。

工作示例：http: [//jsfiddle.net/Widmore/cwHQA/2/](http://jsfiddle.net/Widmore/cwHQA/2/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-19T12:16:39.517

当用户单击发送按钮时，您可以将所选选项卡的“id”存储在变量中，并在表单发布到服务器后恢复它。查看表单事件以获取更多信息

[http://api.jquery.com/category/events/form-events/](http://api.jquery.com/category/events/form-events/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-19T12:17:53.990

尝试使用 jquery Form Plugin 通过 ajax 而不是整页刷新提交表单：http: [//www.malsup.com/jquery/form/](http://www.malsup.com/jquery/form/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-03-02T06:35:52.090

这就是标签的 HTML 的样子——

```
<div class="tab">
   <input type="button"  class="tablinks" onclick="openTab(event, 'NewSummaries')" value="New Summaries" id="NewSummariesTab">
   <input type="button"  class="tablinks" onclick="openTab(event, 'EditedSummaries')" value="Edited Summaries" id="EditedSummariesTab">
</div> 
```

您可以使用 Javascript 将先前单击的选项卡的 ID 保存在会话变量中。就像是 -

```
function openTab(evt, categoryName) {

  {....Your onclick functionality....}

  localStorage.setItem('CurTab',categoryName)
  var activeTab = localStorage.getItem('CurTab');
  console.log(activeTab);
} 
```

因此，会话变量 'curTab' 将具有您上次单击的选项卡 ID。然后您可以在标签的最开始添加以下脚本。默认情况下，这将单击最后一个活动选项卡-

```
<script>
document.getElementById(localStorage.getItem('CurTab')).click();
</script> 
```

# ios - 如何使 viewController 始终保持纵向模式，iOS？

> ID：11560614
> 
> 赞同：0
> 
> 时间：2012-07-19T12:11:33.400
> 
> 标签：ios, navigation, rotation

我有一个可以旋转到纵向和横向模式的 mainController。我在屏幕上有一些按钮可以将我导航到其他控制器。问题是我希望我的 mainController 旋转，但其他控制器始终保持纵向模式。问题是，当我将 mainController 旋转到横向并导航到另一个控制器时，在横向模式下，另一个控制器也进入横向模式！我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:15:19.077

覆盖应该保持纵向的每个 viewController 中的 shoudlAutorotateToInterfaceOrientation: 方法。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return toInterfaceOrientation == UIInterfaceOrientationPortrait;
} 
```

在 iOS 6 中，有新的方法。但 iOS 6 仍处于保密协议下，因此如果您有开发者帐户，您可以在 developer.apple.com 上查看更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:15:48.660

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsPortrait(interfaceOrientation);
} 
```

在您只想成为纵向的视图控制器中实现这一点

# clojure - Clojure：只返回值

> ID：11560616
> 
> 赞同：5
> 
> 时间：2012-07-19T12:11:55.193
> 
> 标签：clojure

是否有任何 Clojure 内置函数只返回传递给它的值？相当于

```
(defn just-val [x] x) 
```

?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T12:13:22.783

是的，有身份功能： [http ://clojuredocs.org/clojure_core/clojure.core/identity](http://clojuredocs.org/clojure_core/clojure.core/identity)

```
user=> (identity 4)
4 
```

# nhibernate - 如何按层次结构查询表存在哪些子类

> ID：11560617
> 
> 赞同：0
> 
> 时间：2012-07-19T12:12:04.557
> 
> 标签：nhibernate, linq-to-nhibernate, queryover

一个简单的例子

```
abstract class Car
{
    public virtual long SerialNumber { get; set; }
}

class Mercedes : Car { }

class Fiat : Car { }

class Toyota : Car { } 
```

现在我想查询从 car 继承的哪些类型有货。这个怎么做？还是我的设计有缺陷。

例子

```
session.Save(new Mercedes() { SerialNumber = 1 });
session.Save(new Mercedes() { SerialNumber = 2 });
session.Save(new Toyota() { SerialNumber = 1 });

// later
var models = session2.Query<Car>().SelectDistinct(car => car.GetType().Name);

showModelComboBox.Items = models; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:47:54.000

据我所知，以下工作：

```
var models = session.Query<Car>().Select(x => x.GetType().Name).ToList(); 
```

...您可以`Distinct`稍后申请...但它实际上是在获取整个实体。不好。

看起来`Distinct`无法应用于`GetType`表达式。

现在，您可以执行以下操作：

```
var models = session.CreateQuery("select c.class from Car c").List(); 
```

它将返回原始鉴别器，这并不理想，但它有效。

# ajax - PhoneGap/Cordova 1.9.0 Windows Phone 7 AJAX 不工作

> ID：11560618
> 
> 赞同：1
> 
> 时间：2012-07-19T12:12:04.803
> 
> 标签：ajax, jquery, cordova

我似乎在通过函数检索数据时遇到问题，并且不知道为什么它不能与 Windows Phone 7 一起使用。下面的代码是我为 iOS 和 Android 提供的代码，它工作正常 - 请注意我确实必须添加iOS 白名单的 URL。

有什么理由不能在 Windows Phone 7 上运行吗？我正在使用 PhoneGap/Cordova 1.9.0。

```
 $( '#customerOverview' ).live( 'pagebeforeshow',function(){
                customerBanner();
            });         

function customerBanner() {
            $.ajax({
            url: "http://10.1.1.11:8080/WebPortal/data",
            data: {functionID:"CustomerBanner",custID:100},
            dataType: "xml",
            success: function(data){
                                    $(".customerid").html(data.getElementsByTagName("ID")[0].childNodes[0].nodeValue);
                                    $(".customerfname").html(data.getElementsByTagName("FName")[0].childNodes[0].nodeValue);
                                    $(".customerlname").html(data.getElementsByTagName("LName")[0].childNodes[0].nodeValue);

                                    var balance = data.getElementsByTagName("Balance")[0].childNodes[0].nodeValue;
                                    if(balance > 0) {
                                    $(".customerbalance").html("<font color=008000>" + balance + "</font>");
                                    } else {
                                                $(".customerbalance").html("<font color=800000>" + balance + "</font>");
                                            }
                                    }
                 });
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:58:48.097

我认为您将不得不进行 JSONP 调用，因为这是一个跨域调用。我认为这就是我解决这些问题的方法。当然，您可以发布、放置和删除。无论如何，我会先尝试一下，看看会发生什么。

# c++ - Char 和 int 放到同一个数组中

> ID：11560621
> 
> 赞同：0
> 
> 时间：2012-07-19T12:12:18.897
> 
> 标签：c++, arrays, string

我想将整数和字符存储在同一个数组中。像：EA1001 或 EB1254 它们应该是身份代码。它不一定是一个数组，只是我可以用来将这些字符串存储在一起的东西，否则我很难冗余地使用它们。谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:16:33.917

你不能将它们存储为字符串吗？例如

```
std::vector<std::string> my_codes;
my_codes.push_back("EA1001");
my_codes.push_back("EB1254"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:14:26.927

答案是工会数组。但这可能很危险。

```
union
{
    char char_var;
    int int_var;
}same_array; 
```

并做声明：

```
same_array my_array[1000]; 
```

因为 int 是 16 或 32 位，而 char 是 8 位。这是为 int 和 char 表示 32 位区域的唯一方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:15:43.200

最合理的解决方案是使用`std::string`. 从您的问题看来，您似乎只需要保存可以包含数字的字符串：

```
std::string a = "EA112312"; 
```

如果你想要一组，使用`std::vector`它的元素是字符串：

```
std::vector< std::string >vec;
vec.push_back(a);//adding an element to the vector, where a is a string. 
```

好吧，实际上，您甚至可以执行以下操作：

```
int a = 'm';
std::cout << (char)a; 
```

所以从技术上讲，可以将数字和字符都存储在 s 数组中`int`，但这会是……呃……很奇怪。

# ruby-on-rails - 迁移中的 attr_accessible

> ID：11560625
> 
> 赞同：2
> 
> 时间：2012-07-19T12:12:30.583
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用 rails 4th edition (rails 3.2+) 进行敏捷 Web 开发，并且有一个关于 migraitons 的问题。有一个练习，我必须在现有表中添加一列，然后用值更新该新列。我需要在 'line_items' 表中添加一个 'price' 列。首先我生成了迁移：

```
rails generate migration add_price_to_line_items price:decimal 
```

然后我编辑了迁移文件：

```
class AddPriceToLineItems < ActiveRecord::Migration
  def change
    add_column :line_items, :price, :decimal

    LineItem.all.each do |li|
      li.price = li.product.price
    end
  end

  def down 
    remove_column :line_items, :price
  end
end 
```

一切都按计划进行，但是，我有一个关于 attr_accessible 的问题。据我了解，对象的所有属性都需要在 attr_accessible 中指定才能进行编辑。如果没有，您通常会收到此错误：

```
ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: product 
```

因此，所有属性都必须在关联模型中设置为 attr_accessible 的参数：

```
class LineItem < ActiveRecord::Base
  **attr_accessible :cart_id, :product_id, :quantity**
  belongs_to :cart
  belongs_to :product

  def total_price
    product.price * quantity
  end

end 
```

如果这是真的，那么我的迁移如何能够更新新生成的列？如果该列刚刚生成，则该新属性尚未在关联模型的 attr_accessible 中指定。任何和所有输入将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:33:02.357

基本上这是因为在 Rails 表单中，您可以将任何字段添加到表单中。如果用户向表单添加新参数并将其提交到您的服务器，它会给您带来很大的问题。

像这样：

你的控制器：

```
LineItem.create(params[:line_item) 
```

如果这是您的控制器，则用户插入（通过 javascript 或通过 chrome 上的控制台编辑）一个新的文本字段，他可以修改受保护的字段。

这就是为什么我们`attr_accessible`过去只允许定义字段。

所以不在的`attr_accessible`属性仍然可以访问，只是无法进行质量分配。

你仍然可以做这样的事情：

模型有名称、时间和日期：

```
attr_accessible :name, :time 
```

控制器或任何类：

你可以：

```
m = Model.new(:name => "name", :time => "time")
m.date = "date"
m.save 
```

你不能：

```
m = Model.new(:name => "name", :time => "time", :date = "date")
m.save 
```

如果您仍然不明白，请查看此链接[http://ruby.railstutorial.org/chapters/modeling-users#sec:accessible_attributes](http://ruby.railstutorial.org/chapters/modeling-users#sec:accessible_attributes)它有一个很好的解释

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T12:19:25.160

`attr_accessible`控制你做事情的能力，比如

```
LineItem.create(:foo => bar)
some_line_item.update_attributes(:foo => bar) 
```

这是控制器更新/创建方法通常所做的。

它对

```
some_line_item.foo = bar 
```

# objective-c - isMemberOfClass 作为管理对象的一种方式

> ID：11560627
> 
> 赞同：2
> 
> 时间：2012-07-19T12:12:39.753
> 
> 标签：objective-c, ios

我有一个 NSArray 包含`(id)`6 种 UIModel：按钮、图像等。

它们都是我的基本模型的子类。例如：

```
MyButtonModel : MyUIModel : NSObject 
```

所以我想在我的视图中以不同的方式线程它。

```
for(int i = 0 ; i < [_screenModel.MUIElements count] ; i++)
{
    id UIElement = [_screenModel.MUIElements objectAtIndex:i];
    [self checkWhatKindOfUIElement:UIElement];

}

-(void)checkWhatKindOfUIElement:(id)MUIElement;
{
    if([MUIElement isMemberOfClass:[ButtonModel class]])
        NSLog(@"button");
} 
```

所以我当然可以那样做，但是我必须检查 6 个 ifs 吗？有没有别的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:32:42.907

是的，您必须使用*6 个 ifs*检查每个派生类，但是我认为您没有使用已经建立的继承模型的强大功能。为什么不以任何你喜欢的方式使用对象，也许添加方法来公开功能；例如：

```
for (int i = 0 ; i < [_screenModel.MUIElements count] ; i++)
{
    MyUIModel *UIElement = [_screenModel.MUIElements objectAtIndex:i];

    [UIElement doThingWithString:@"string"];

    if ([UIElement respondsToSelector:@selector(optionalMethod:)])
    {
        [UIElement optionalMethod:12];
    }

    if ([UIElement isCapableOfAnything])
    {
        [UIElement doAnything];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:17:14.147

这也适用于派生类：

```
-(void)checkWhatKindOfUIElement:(id)MUIElement;
{
    if([MUIElement isKindOfClass:[MyUIModel class]])
        NSLog(@"MyUIModel or derived");
} 
```

# java - 在单个 Java 语句中创建其对象时设置 JTextField

> ID：11560633
> 
> 赞同：0
> 
> 时间：2012-07-19T12:13:00.797
> 
> 标签：java, swing

我正在创建一个 JPanel 并设置如下布局：

> JPanel jpObj= 新 JPanel();
> jpObj.setLayout(new BoxLayout(jpObj, BoxLayout.Y_AXIS));

然后将 JTextField 添加到我的 JPanel 中，如下所示：

> jpObj.add(new JTextField("300000"));

我想指定 JTextField 的高度，而不必编写单独的代码行。例如，

> JTextField textField = new JTextField("600000");
> textField.setMaximumSize(new Dimension(1000,50) );
> jpObj.add(textField);

有没有办法在创建对象时指定我的 JTextField 的高度？以下尝试似乎对我不起作用。

> jpObj.add(new JTextField("300000").setMaximumSize(new Dimension(1000,50)));

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:16:46.480

否，因为[setMaximumSize](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#setMaximumSize%28java.awt.Dimension%29)返回 void。

你应该按照你已经描述的那样去做。

```
JTextField textField = new JTextField("600000");
textField.setMaximumSize(new Dimension(1000,50) );
jpObj.add(textField); 
```

可能我猜您可以创建自己的方法，该方法可以创建、设置高度并返回一个 JTextField 对象，如下所示，然后这可以在一行中完成。

```
private JTextField createJTextField(String text, Dimension dimenstion) {
    JTextField textField = new JTextField(text);
    textField.setMaximumSize(dimenstion);
    return textField;
} 
```

然后你可以这样称呼它：

```
jpObj.add(createJTextField("item1",new Dimension(200,300)));
jpObj.add(createJTextField("item2",new Dimension(500,100))); 
```

# java - 解组错误：来自具有旧 WSDL 的旧请求的意外元素

> ID：11560636
> 
> 赞同：1
> 
> 时间：2012-07-19T12:13:03.313
> 
> 标签：java, xml, soap, wsdl, jax-ws

我从一些遗留代码接收 SOAP 请求，并使用来自遗留代码使用的相同 WSDL 的 JAX-WS 生成的对象来处理它，但我收到 Unmarshalling Error：在处理请求时出现意外元素错误。

此请求的 WSDL 部分如下：（请注意，“模式”已替换我们 WSDL 的所有实际模式位置）

```
 <xsd:complexType name="Administrate">
        <xsd:sequence>
            <xsd:element name="AdminOperation" type="typens:AdminOperation" maxOccurs="unbounded" minOccurs="0"/>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="Administrate" type="typens:Administrate"/>
    <xsd:complexType name="AdministrateResponse">
        <xsd:sequence>
        <xsd:element name="Status" type="typens:SoapResponseStatus"/>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="AdministrateResponse" type="typens:AdministrateResponse"/>
    <xsd:complexType name="AdminOperation">
        <xsd:sequence>
            <xsd:choice>
                <xsd:element name="Transaction" type="typens:Transaction" minOccurs="0"/>
                <xsd:element name="CreateUser" type="typens:CreateUser" minOccurs="0"/>
                <xsd:element name="DeleteUser" type="typens:DeleteUser" minOccurs="0"/>
                <xsd:element name="UpdateUser" type="typens:UpdateUser" minOccurs="0"/>
                <xsd:element name="CreateGroup" type="typens:CreateGroup" minOccurs="0"/>
                <xsd:element name="DeleteGroup" type="typens:DeleteGroup" minOccurs="0"/>
                <xsd:element name="UpdateGroup" type="typens:UpdateGroup" minOccurs="0"/>
                <xsd:element name="CreateChannel" type="typens:CreateChannel" minOccurs="0"/>
                <xsd:element name="DeleteChannel" type="typens:DeleteChannel" minOccurs="0"/>
                <xsd:element name="UpdateChannel" type="typens:UpdateChannel" minOccurs="0"/>
                <xsd:element name="CreateRole" type="typens:CreateRole" minOccurs="0"/>
                <xsd:element name="DeleteRole" type="typens:DeleteRole" minOccurs="0"/>
                <xsd:element name="UpdateRole" type="typens:UpdateRole" minOccurs="0"/>
                <xsd:element name="CreateFileType" type="typens:CreateFileType" minOccurs="0"/>
                <xsd:element name="DeleteFileType" type="typens:DeleteFileType" minOccurs="0"/>
                <xsd:element name="UpdateFileType" type="typens:UpdateFileType" minOccurs="0"/>
                <xsd:element name="CreateFolder" type="typens:CreateFolder" minOccurs="0"/>
                <xsd:element name="DeleteFile" type="typens:DeleteFile" minOccurs="0"/>
                <xsd:element name="MoveFile" type="typens:MoveFile" minOccurs="0"/>
                <xsd:element name="CopyFile" type="typens:CopyFile" minOccurs="0"/>
                <xsd:element name="UpdateFile" type="typens:UpdateFile" minOccurs="0"/>
                <xsd:element name="DeleteJob" type="typens:DeleteJob" minOccurs="0"/>
                <xsd:element name="DeleteJobNotices" type="typens:DeleteJobNotices" minOccurs="0"/>
                <xsd:element name="UpdateJobSchedule" type="typens:UpdateJobSchedule" minOccurs="0"/>
                <xsd:element name="UpdateVolumeProperties" type="typens:UpdateVolumeProperties" minOccurs="0"/>
                <xsd:element name="UpdateOpenSecurityCache" type="typens:UpdateOpenSecurityCache" minOccurs="0"/>
            </xsd:choice>
        </xsd:sequence>
    </xsd:complexType> 
```

并发送请求：

```
 <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
        SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
        xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/"
        xmlns:xsd="http://www.w3.org/2000/10/XMLSchema" xmlns="schema">
        <SOAP-ENV:Header>
            <AuthId>7</AuthId>
        </SOAP-ENV:Header>
        <SOAP-ENV:Body>
            <Administrate>
                <UpdateFile>
                    <SetPermissions>
                        <Permission SOAP-ENC:arrayType="Permission[1]">
                            <UserName>username</UserName>
                            <AccessRight>rights</AccessRight>
                        </Permission>
                    </SetPermissions>
                    <NameList>
                        <String>folder1</String>
                        <String>folder1/folder2</String>
                        <String>folder1/folder2/file.ext</String>
                    </NameList>
                </UpdateFile>
            </Administrate>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope> 
```

但我从我的代码中得到以下错误：

```
 <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
                <soap:Body>
                    <soap:Fault>
                        <faultcode>soap:Client</faultcode>
                        <faultstring>Unmarshalling Error: unexpected element
                            (uri:"schema", local:"UpdateFile"). Expected elements
                            are &lt;{schema}AdminOperation> </faultstring>
                    </soap:Fault>
                </soap:Body>
            </soap:Envelope> 
```

Administrate JAX-WS 生成的对象只包含一个带有 getter 的 AdminOperations ArrayList，

```
 @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "Administrate", propOrder = {
        "adminOperation"
    })
    public class Administrate {

        @XmlElement(name = "AdminOperation")
        protected List<AdminOperation> adminOperation;

        /**
         * Gets the value of the adminOperation property.
         * 
         * <p>
         * This accessor method returns a reference to the live list,
         * not a snapshot. Therefore any modification you make to the
         * returned list will be present inside the JAXB object.
         * This is why there is not a <CODE>set</CODE> method for the adminOperation property.
         * 
         * <p>
         * For example, to add a new item, do as follows:
         * <pre>
         *    getAdminOperation().add(newItem);
         * </pre>
         * 
         * 
         * <p>
         * Objects of the following type(s) are allowed in the list
         * {@link AdminOperation }
         * 
         * 
         */
        public List<AdminOperation> getAdminOperation() {
            if (adminOperation == null) {
                adminOperation = new ArrayList<AdminOperation>();
            }
            return this.adminOperation;
        }

    } 
```

但是从发送的遗留请求和来自 WSDL 的判断来看，这个操作标签被替换为操作选择，例如 updatefile 等，对吗？

由于我无法更改旧版请求或旧版 WSDL，因此我不确定如何继续。任何帮助将不胜感激，因此在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T05:07:29.380

你的怀疑是正确的。在这种情况下，客户端实际上正在发送一个不符合提供的模式的请求。

由于您无法控制客户端代码并且显然必须适应客户端，我希望它是此服务的唯一客户端。最简单的前进路径是将服务调整为实际构建客户端的合同。您可以手动调整架构以指示 UpdateFile 是 Administrate 的子级，然后重新生成相关对象或（不打扰对象的重新生成）调整 Administrate java 对象注释以将 FileUpdate 反映为第一级子级：... @ XmlType(name = "Administrate", propOrder = { "updateFile" }) 公共类 Administrate {

```
 @XmlElement(name = "UpdateFile")
    protected UpdateFileType updateFile; 
```

...

尽职调查也将识别其他形式的请求（它们是否符合合同），以确保在调整服务端点时不会进一步破坏。

# c# - 如何在 C# 中的 WebBrowser 控件中加载本地 HTML 页面

> ID：11560639
> 
> 赞同：7
> 
> 时间：2012-07-19T12:13:12.967
> 
> 标签：c#, winforms, browser, c#-2.0

我有许多本地 HTML 页面。我想在 Web 浏览器控件中显示这些本地 HTML 页面。当我添加新页面时，它应该附加到上一页。

这是设置 Url 的示例代码

```
for( int i=0; i<=filecount; i++)
    web-browser.Url = new Uri(filepath[i]); 
```

但在运行时它显示文件下载弹出和网络浏览器是空的。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-19T12:24:47.533

您可以将单个页面加载为

```
FileStream source = new FileStream(filepath, FileMode.Open, FileAccess.Read);
webBrowser1.DocumentStream = source; 
```

甚至喜欢

```
string html = File.ReadAllText(filepath);
webBrowser1.DocumentText = html; 
```

但如果你在相对路径中有图片、css 或 js，请使用

```
Uri uri = new Uri(filepath);
webBrowser1.Navigate(uri); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:15:13.290

```
webrowser.Navigate(filepath[i]); 
```

类似的事情我记得... ;)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-12-06T16:01:15.290

我试过了：

```
FileStream source = new FileStream(filepath, FileMode.Open, FileAccess.Read);
webBrowser1.DocumentStream = source; 
```

我还必须添加这个：

```
webBrowser1.DocumentStream.Close(); 
```

# php - 使用 PHP 从 facebook 获取活动

> ID：11560647
> 
> 赞同：0
> 
> 时间：2012-07-19T12:13:53.497
> 
> 标签：php, facebook

在 JavaScript 中是[http://developers.facebook.com/docs/reference/plugins/like-box/](http://developers.facebook.com/docs/reference/plugins/like-box/)

以下是 Facebook 粉丝专页的活动。是否可以使用 PHP 获得这些活动？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:17:16.557

是的，有可能，您必须调用 Graph API 并抓取您的粉丝专页。这是官方工具的示例：http: [//developers.facebook.com/tools/explorer/ ?method=GET&path=104958162837%2Fposts](http://developers.facebook.com/tools/explorer/?method=GET&path=104958162837%2Fposts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:50:52.203

是的你可以。您的步骤将是：

在此处创建一个 Facebook 应用程序以用作连接器：[https](https://developers.facebook.com/apps) ://developers.facebook.com/apps 。您将需要应用 ID 和密码。

从此处下载 PHP SDK [https://developers.facebook.com/docs/reference/php/](https://developers.facebook.com/docs/reference/php/)并将其放在您的程序可以访问的地方。

使用这样的代码。ALL_CAPS 中的所有内容都应替换为您的特定值：

```
 <?php
 require('/PATH_TO_SDK/facebook.php');

 $config = array(
  'appId' => 'YOUR_APP_ID',
  'secret' => 'YOUR_APP_SECRET',
 );

 $facebook = new Facebook($config);
 $ret_obj = $facebook->api('/YOUR_PAGE_NAME_OR_ID/feed', 'GET);

 sprintf('<pre>%s</pre>', print_r($ret_obj, true)); 
```

# ruby-on-rails - 有没有办法覆盖设计会话控制器创建操作？

> ID：11560650
> 
> 赞同：1
> 
> 时间：2012-07-19T12:14:13.153
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise, before-filter

我想知道是否有办法覆盖应用程序控制器中的设计会话控制器创建操作。所以我有这个代码

```
 def check_concurrent_session
    if is_already_logged_in?
      flash[:error] = "We're sorry, you can't login to two places concurrently."
      sign_out_and_redirect(current_user)
    end
  end 
```

我需要它在网站上的任何地方运行，然后在设计会话控制器中创建操作..

所以我在应用程序控制器上有一个 before_filter，但我可以排除一个像这样的控制器吗

```
before_filter :check_concurrent_session, :except => ["somecontoller"] 
```

显然这是错误的，但你明白了。我知道我可以创建自己的会话控制器并从设计继承，但我想知道这是否可以从应用程序控制器中做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:30:26.993

```
before_filter :check_concurrent_session

def check_concurrent_session
  return if controller_name == 'some_controller'
  if is_already_logged_in?
    flash[:error] = "We're sorry, you can't login to two places concurrently."
    sign_out_and_redirect(current_user)
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:40:24.097

在`application.rb`

```
module XXX
  class Application < Rails::Application
    ...

    config.to_prepare do
      Devise::SessionsController.skip_before_filter :check_concurrent_session
    end
  end
end 
```

# crash - 什么会导致 IE7 崩溃？

> ID：11560653
> 
> 赞同：0
> 
> 时间：2012-07-19T12:14:24.073
> 
> 标签：crash, internet-explorer-7

我找不到可能导致 IE7 崩溃的 HTML 和 JS 代码片段的权威列表。

我目前正在尝试调试一个问题，并想要一份要测试和尝试的清单。

我建议如果人们知道这样的列表，请在评论中链接到它。

否则，每个答案使用一种技术 - 包括重现它的最少代码，希望最常见的技术应该冒泡到顶部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:14:24.073

**原因：**

样式、表格和 ID 的组合，最终形成一个未封闭的形式（仅限 HTML）

**效果：** IE 死机，通常可以关闭浏览器。

**代码：**

```
<html><head>
<style type="text/css">
#a {
        margin:0 10px 10px;
}
#b {
        width:100%;
}
</style>
<title>IE Crasher</title>
</head>
<body>
<table><tr><td>
<div id="a">
<form id="b">
<input type="text" name="test"/>
</div>
</td><td width="1"></td></tr></table>
</body></html> 
```

**也可以看看：**

更多信息：[https ://groups.google.com/forum/?fromgroups#!topic/microsoft.public.internetexplorer.general/gKJkXcWYpLI](https://groups.google.com/forum/?fromgroups#!topic/microsoft.public.internetexplorer.general/gKJkXcWYpLI)

不要在 IE 中访问： http: [//crashie8.com/](http://crashie8.com/)，

**其他受影响的浏览器：**几乎所有现代 Internet Explorer

# dependency-injection - 如何在 Unity 中覆盖命名依赖项

> ID：11560667
> 
> 赞同：0
> 
> 时间：2012-07-19T12:15:00.597
> 
> 标签：dependency-injection, inversion-of-control, overriding, unity-container

请建议我如何解决以下问题：

我有一堂课：

```
public class Module
{
   public Module(Uri param1, Uri param2)
   {
   }
} 
```

此类型在 Unity Container 中注册：

```
container.RegisterInstance<Uri>("uri1", new Uri("http://sample-1.com"));
container.RegisterInstance<Uri>("uri2", new Uri("http://sample-2.com"));

container.RegisterType<Module>(
       new InjectionConstructor(
             new ResolvedParameter<Uri>("uri1"), 
             new ResolvedParameter<Uri>("uri2"))); 
```

通过这种方式，我建立了对 Uri 不同实例的不同构造函数参数的依赖。

我想在解析模块实例时覆盖这个值。

我可以按类型覆盖：

```
container.Resolve<Module>(
             new DependencyOverride(typeof(Uri), new Uri("http://overriden.com"))) 
```

我也可以通过 custructor 参数覆盖。

```
container.Resolve<Module>(
   new ParameterOverride("param1", new Uri("http://param1.org"))
   new ParameterOverride("param2", new Uri("http://param2.com"))) 
```

但是：我不知道如何根据类型注册的名称按类型覆盖。因此，DependencyOverride 没有任何额外的参数来覆盖并非所有类型，也不能使用命名注册。

因此，我想要以下内容：

```
container.Resolve<Module>(
    new DependencyOverride("uri1", typeof(Uri), new Uri("http://overriden-1.com")),
    new DependencyOverride("uri2", typeof(Uri), new Uri("http://overriden-2.com"))); 
```

其中第一个参数 (uri1 & uri2) 是在初始注册时使用 ResolvedParameter("uri1") 和 ResolvedParameter("uri2") 注册类型时用于构建依赖项的名称。

请建议我，如何在不定义构造函数参数名称的情况下从容器解析模块时覆盖。

PS我为什么要走这条路？因为我不想依赖于参数的名称，所以有人可以重命名它们，并且依赖关系树会损坏。另外，我不想依赖于 Module 的注册方式，如果 Module 有多个构造函数，则选择哪种构造函数。

UPD：我找到了临时解决方案，但这只是一种解决方法，因为它破坏了生命周期管理器，例如 PerResolveLifetimeManager，因为我们将 Module1 和 Module2 与控制器分开解析，它们依赖于 Module1 和 Module2。

```
 var m1 = _container.Resolve<IModule1>(
            new DependencyOverride(typeof(HttpControllerContext), context),
            new DependencyOverride(typeof(Uri), new Uri("http://module-1.com/")));

        var m2 = _container.Resolve<IModule2>(
            new DependencyOverride(typeof(HttpControllerContext), context),
            new DependencyOverride(typeof(Uri), new Uri("http://m-2.com/")));

        var dependency = new ResolverOverride[] 
        {
            new DependencyOverride(typeof(HttpControllerContext), context),
            new DependencyOverride(typeof(IModule1), m1),
            new DependencyOverride(typeof(IModule2), m2)
        };

        var controller = _container.Resolve(controllerType, dependency) as IHttpController;
        return controller; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:34:52.510

您是否尝试过儿童容器？代替

```
container.Resolve<Module>(
    new DependencyOverride("uri1", typeof(Uri), new Uri("http://overriden-1.com")),
    new DependencyOverride("uri2", typeof(Uri), new Uri("http://overriden-2.com"))); 
```

您可以使用您的 URI 创建一个子容器，并让它解析您的模块：

```
container.CreateChildContainer()
    .RegisterInstance<Uri>("uri1", new Uri("http://overriden-1.com"))
    .RegisterInstance<Uri>("uri2", new Uri("http://overriden-2.com"))
    .Resolve<Module>(); 
```

# java - 集中配置管理

> ID：11560680
> 
> 赞同：5
> 
> 时间：2012-07-19T12:15:37.160
> 
> 标签：java, configuration, osgi

我正在查看`Apache Felix`，尤其是`Configuration Admin Service`允许管理多个组件的配置的子项目。在文档中，它说：

> 配置管理服务就像一个中央集线器，它负责持久化此配置并将配置分发给相关方。一类这样的参与方是要配置的组件。

有没有办法管理在不同`Apache Felix`平台实例上运行的多个组件的配置？

为了说明我的问题，假设有 5 个模块化应用程序服务器。每个服务器由安装在单个`OSGi`平台实例上的多个捆绑包组成。在两个平台实例上，类似的包可能以不同的配置运行。我想集中配置所有平台实例的所有捆绑包，使用`Configuration Admin Service`.

你知道我在哪里可以找到关于配置管理的好资源`OSGi`吗`Apache Felix`？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:18:49.880

我建议您看看 Apache Karaf，尤其是在[Karaf Cellar](http://karaf.apache.org/index/subprojects/cellar.html)，我认为这可以满足您的需求。Apache Karaf 运行在 Felix 或 Equinox 之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T16:18:55.117

你有两个选择。

**选项 1：**您可以在框架之间使用分布式配置管理服务。其中一个框架将托管“中央”配置管理，而对于其他平台，它将是一个远程服务。请注意，这对于框架上的捆绑包是透明的——它们将以相同的方式查看和使用本地和远程服务。但是，您必须自己实现一些钩子才能实现这一点。查看 OSGi Compendium 规范版本 4.2 中的“13 远程服务”一章。

**选项 2：**所有框架都有本地 Config Admin 服务，您可以使用 OSGi 的远程管理系统管理所有这些服务。一种可能性是 Karaf，如上所述；另一个是[mPRM-mPower 远程管理器](http://www.prosyst.com/index.php/de/html/content/98/Other-FOU-%7C-Products-%7C-Remote-Management-Server/)。他们既可以管理多个 Fe​​lix 框架，也可以集中控制配置。

# macos - 如何让 Safari（在 Mac 上）在我的网站上播放 MPEG 文件？

> ID：11560681
> 
> 赞同：0
> 
> 时间：2012-07-19T12:15:37.337
> 
> 标签：macos, safari, safari-extension

我们有很多媒体文件，我想在 Safari（在 Mac 上）使用 QuickTime 插件或 VLC Web 插件或其他任何东西播放这些文件......

这些文件的属性：

*   扩展名：mpg
*   视频编解码器：MPEG 视频 (PAL)（版本 1）
*   音频编解码器：MPEG Audio（第 1 版）（第 2 层）
*   多路复用（muxed）

我尝试了 QuickTime 插件，但它不支持 auido 编解码器，因此媒体文件显示时没有声音。经过一番研究，我找到了支持 MPEG Audio Layer 2 的“QuickTime MPEG-2 Playback Component”。但它不是免费的......（我没有尝试过，也许它不会工作......）

之后我想尝试“英特尔 Mac 的 VLC Web 插件”，但它在我的 Safari 上不起作用。听说这个项目已经3年没有开发了...

有没有办法让 Safari 播放 MPEG 文件？

注意：不，我不能更改媒体文件的编解码器...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:27:31.790

试试这个`http://perian.org/`

在页面上向下滚动一点并找到`Perian extends QuickTime support for many popular types of media`.

它应该为您的 quicktime 播放器添加对 mpeg 文件的支持。

# jsp - 如何在刷新或重新加载页面时禁用重新提交数据

> ID：11560685
> 
> 赞同：0
> 
> 时间：2012-07-19T12:15:45.247
> 
> 标签：jsp, url, struts2, action

我有一个 JSP 页面，它有一个按钮，单击此按钮时会执行一个操作，该操作会执行一些数据库更新，并且在成功更新后，用户将导航到另一个带有结束 url 的页面`...\resultpage.action`。

当我重新加载导航页面`resultpage.jsp`时，再次调用该操作再次更新数据库，这是不可取的。

我希望如果用户重新加载此页面，则应刷新页面并且不应调用任何更新数据库的操作类。

如何实现？另外，如果有任何方法可以在加载页面后更改其 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:09:34.640

通常情况下，我会创建标准“成功”以外的结果类型，以避免通过页面刷新重新提交表单的情况。可能还有其他方法可以做到这一点，但我发现最简单的方法是结果类型 redirectAction ，它在成功的数据库更新时返回到相同的操作。

如果您使用注释，它看起来像这样：

```
@Results({
    @Result(name = "success", location = "/WEB-INF/content/registration/index.jsp"),
    @Result(name = "refresh", type = "redirectAction", location = "register")
}) 
```

“刷新”结果将在成功（数据库更新）发布操作时返回，而“成功”用于显示类型操作。

# mysql - 如何编写一个更新查询，将一列设置为其他两个类型为 varchar 的列的总和？

> ID：11560690
> 
> 赞同：0
> 
> 时间：2012-07-19T12:15:51.280
> 
> 标签：mysql

这是我所拥有的，要添加的两列默认情况下可以为 NULL：

```
UPDATE house SET TOTALTAX=IFNULL(MUNTAX,0)+IFNULL(SCHTAX,0) WHERE NNS_NO=542 
```

这给了我 0 行受影响。我验证了 NNS 号码是正确的，我真的不知道接下来要尝试什么。

好的，我发现 MUNTAX 和 SCHTAX 列是 varchar 类型而不是整数。例如，在这种情况下，MUNTAX = "$7,725.00"，SCHTAX = NULL。
所以现在的问题是如何在计算总和并将其更新为 varchar（TOTALTAX 也是 varchar）之前将美元值提取为整数？我需要存储过程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:19:44.693

尝试以下查询以检查记录是否正确更新。如果它已经更新，您的查询将显示受影响的 0 行。

```
SELECT  TOTALTAX, MUNTAX, SCHTAX FROM house WHERE NNS_NO=542 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:27:58.170

编辑：啊，我看到您还想将结果转换回 VARCHAR。使用 CONCAT() 将 $ 符号添加回前面应该很容易，但是如果不编写自定义函数，将逗号重新添加会很棘手。我可能不需要告诉你，但是将像这样的值作为 VARCHAR 存储在数据库中并不是一个好主意。

它不漂亮，但像这样？

```
mysql> SELECT * FROM sum2;
+--------+--------+-------+
| a      | b      | total |
+--------+--------+-------+
| $1,000 | $2,000 |  NULL |
| $1,500 | NULL   |  NULL |
+--------+--------+-------+
2 rows in set (0.02 sec)

mysql> UPDATE sum2 SET total= IFNULL(REPLACE(REPLACE(a, '$', ''), ',', ''), 0) + IFNULL((REPLACE(REPLACE(b, '$', ''), ',', '')), 0);
Query OK, 2 row affected (0.02 sec)
Rows matched: 2  Changed: 2  Warnings: 0

mysql> SELECT * FROM sum2;
+--------+--------+-------+
| a      | b      | total |
+--------+--------+-------+
| $1,000 | $2,000 |  3000 |
| $1,500 | NULL   |  1500 |
+--------+--------+-------+
2 rows in set (0.02 sec) 
```

# c++ - 具有四个迭代器的类复制算法

> ID：11560692
> 
> 赞同：6
> 
> 时间：2012-07-19T12:15:55.760
> 
> 标签：c++, algorithm, stl, iterator, copy

是否有一个类似`std::copy`的算法接受四个迭代器，表示两个范围？

基本上，只要任一范围用完，它就应该停止复制：

```
template<typename Iter>
void copy_range(Iter begin1, Iter end1, Iter begin2, Iter end2)
{
    for (; (begin1 != end1) && (begin2 != end2); ++begin1, ++begin2)
    {
         *begin2 = *begin1;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T12:20:11.647

不，可悲的是没有这样的事情。最接近的是`std::copy_n`.

当然还有你刚刚写的算法。

根据使用的迭代器类型（随机或非随机），使用它比您的算法更有效（因为每次迭代只需进行一次检查）：

```
std::copy_n(begin1,
            std::min(std::distance(begin1, end1), std::distance(begin2, end2)),
            begin2); 
```

* * *

另一种选择是检查输出迭代器，类似于此（粗略草图，未检查代码）：

```
template<class Iter>
class CheckedOutputIter {
public:
    // exception used for breaking loops
    class Sentinel { }

    CheckedOutputIter()
        : begin(), end() { }

    CheckedOutputIter(Iter begin, Iter end)
        : begin(begin), end(end) { }

    CheckedOutputIter& operator++() {
        // increment pas end?
        if (begin == end) {
            throw Sentinel();
        }

        ++begin;
        return *this;
    }

    CheckedOutputIter operator++(int) {
        // increment past end?
        if (begin == end) {
            throw Sentinel();
        }

        CheckedOutputIter tmp(*this);

        ++begin;

        return tmp;
    }

    typename iterator_traits<Iter>::value_type operator*() {
        return *begin;
    }

private:
    Iter begin, end;
}; 
```

用法：

```
try {
    std::copy(begin1, end1, CheckedOutputIter(begin2, end2));
} catch(const CheckedOutputIter::Sentinel&) { } 
```

这与您的解决方案具有大致相同的性能，但它的使用范围更广。

# java - 用户定义的 java.sql.ResultSet

> ID：11560702
> 
> 赞同：0
> 
> 时间：2012-07-19T12:16:23.127
> 
> 标签：java, connection-pooling, resultset

我有一个旧应用程序，我需要在其中优化我的方法返回`java.sql.ResultSet`并且我有单个连接所以现在我需要实现连接池现在问题是如果我关闭连接而不是结果集会在这样做时给出异常`rs.next()`我想要这样一个类似于 ResultSet 的类，我们可以说它也与 Connection 分离，这样我就不必在我使用过`ResultSet`对象的 JSP 上进行更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:21:04.293

以下是我的建议：

编写您的持久性方法，以便将连接传入。让另一个对象（例如服务）管理从池中取出连接、事务和清理。

您的持久性类应该在方法范围内创建`PreparedStatement`和关闭对象。`ResultSet`不要绕过；*_* `ResultSet`将其映射到某种对象或数据结构中并将其返回给调用者。

您的 JSP*不*应该处理`ResultSets`. `ResultSet`当您调用持久层时，它们应该遍历您映射到的对象或数据结构。

让我猜猜：您的 JSP 充满了 scriptlet。你也必须把它扔掉。是时候学习JSTL了。

阅读有关 Model-2 MVC 的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:17:04.173

得到了我用过的解决方案`CachedRowSet`

```
package taher.connection;
import com.sun.rowset.CachedRowSetImpl;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import javax.sql.rowset.CachedRowSet;
import org.apache.commons.dbcp.BasicDataSource;

/**
 *
 * @author taher_JAVAHUNTER
 */

public class DataTransaction {

private final static String username = "test";
private final static String password = "test";
private final static String url = "jdbc:mysql://127.0.0.1:3309/test";
public Connection connection = null;
public Statement statement = null;
ResultSet rs = null;
public static int connectionCount = 0;

public DataTransaction(boolean setCon) {
    try {
        setConnection();
    } catch (Exception e) {
        System.out.println("Error in Connection:" + e.toString());
    }
}
public static BasicDataSource dataSource;

public void setConnection() throws SQLException {
    try {
        if (dataSource == null) {
            dataSource = new BasicDataSource();
            String driver = "com.mysql.jdbc.Driver";
            try {
                dataSource.setDriverClassName(driver);
                dataSource.setUrl(url);
                dataSource.setUsername(username);
                dataSource.setPassword(password);
                dataSource.setMaxActive(100);
                dataSource.setMaxWait(10000);
                dataSource.setMaxIdle(10);
                if (connection == null || connection.isClosed()) {
                    System.out.println(" requeition CONNECTION WITH FIRST SERVER.");
                    connection = dataSource.getConnection();
                    connectionCount++;
                }
            } catch (SQLException e) {
                System.out.println("***Connection Requisition*** Could not connect to the database msg :" + e.getMessage());
            }
        } else {
            System.out.println("NumActive : "+dataSource.getNumActive());
            System.out.println("NumIdle : "+dataSource.getNumIdle());
            System.out.println("NumTestsPerEvictionRun : "+dataSource.getNumTestsPerEvictionRun());
            if (connection == null || connection.isClosed()) {
                connection = dataSource.getConnection();
                connectionCount++;
            }
        }
    } catch (Exception e) {
        System.out.println("open connection exception" + e);
    }
}

public CachedRowSet viewQuery(String query) throws SQLException, Exception {
    //query = query;
    CachedRowSetImpl crs = new CachedRowSetImpl();
    CachedRowSet crs2 = null;

    try {
        if (connection.isClosed()) {
            setConnection();
        }
    System.out.println("Connection count 1 : " + connectionCount);

        statement = connection.createStatement();
        rs = statement.executeQuery(query);

        crs.populate(rs);
        crs2 = crs.createCopy();
        closeConnection();
        System.out.println("Connection count 2 : " + connectionCount);

    } catch (Exception e) {
        e.printStackTrace();
    }

    return crs2;
}

public void closeConnection() throws SQLException {
    try {
        if (statement != null) {
            statement.close();
        } else {
        }
        if (connection != null) {
            connection.close();                
        }
    } catch (Exception e) {
    }

}

public static void main(String[] args) throws SQLException, Exception {
    DataTransaction dt = new DataTransaction(true);
    for (int i = 0; i < 10; i++) {
        ResultSet rs = dt.viewQuery("select * from tbl_test");
        //ResultSet rs = dt.viewQuery("select * from tbl_test",0);
        System.out.println("Connection closed : " + dt.connection.isClosed());
        while (rs.next()) {
            System.out.println("testId : " + rs.getString(1));
            System.out.println("testName : " + rs.getString(2));
        }
    }

}
} 
```

# android - 使用 Sencha Touch 2 在 Android 应用程序中单击按钮，在模拟器上运行良好，但在 Android 设备上不工作

> ID：11560705
> 
> 赞同：1
> 
> 时间：2012-07-19T12:16:28.633
> 
> 标签：android, touch, extjs, sencha-touch-2

使用 Sencha Touch 2 在 Android 应用程序中单击按钮，在模拟器上运行良好，但在 Android 设备上产生问题。当我单击模拟器中的按钮时，它会显示正确的警报消息，但是当我单击设备中的按钮时，它什么也不显示。如果情况下，它不会进入内部。我的按钮代码如下： -

```
{ xtype: 'button',
            text: 'Save',
         handler: function(){
         val3 = Ext.getCmp('na').getValue();
         console.log(val3);
         val = Ext.getCmp('ea').getValue();          
         console.log(val);
         val4 = val.indexOf("@");
         console.log(val4);
         val5 = val.lastIndexOf(".");
         console.log(val5);
         val2 = Ext.getCmp('pa').getValue();
         console.log(val2); 
         val1 = Ext.getCmp('ra').getValue();    
         console.log(val1); 
            var isValid = true;
            Ext.Msg.alert("Info", "123");
            var errors = new Array();
            Ext.Msg.alert("Info", "456");
           //validate the name                        
            if (val3.search(/[0-9]/) > -1) {
            Ext.Msg.alert("Info", "789");
              isValid = false;
              errors.push({field : 'name',
              reason : 'Name must not contain numbers'});
                }
             if (val3.length <= 0) {

              isValid = false;
              errors.push({field : 'name',
              reason : 'Name should not be blank'});
                }

                if (val3.search(/[@]/) > -1) {
              isValid = false;
              errors.push({field : 'name',
              reason : 'Name must not contain special characters'});
                }
             //validate e-mail                        
              if (val4<1 || val5<val4+2 || val5+2>=val.length)
             {
             isValid = false;
                errors.push({field : 'email',
                reason : 'Invalid email id'});
             }
            if (val.search("/^([a-zA-Z0-9_\.\-])+(@[a-z])+([.][a-z])+$+") > -1){
                isValid = false;
                errors.push({field : 'email',
                reason : 'Invalid Email address'});
              }
            if (val.length <= 0){
                isValid = false;
                errors.push({field : 'email',
                reason : 'Email address should not be blank'});
              }                   
            //validate Password                        
            if (val1 != val2) {
                isValid = false;
                errors.push({field : 'reenter',
                reason : 'Password do not match'});
                 } 
            if(val2 <= 0){
               isValid = false;
               errors.push({field : 'password',
               reason : 'Password should not be blank'});
                 }  
            if(val1 <= 0){
               isValid = false;
               errors.push({field : 'reenter',
               reason : 'Re-enter Password should not be blank'});
                 }  
            if(val1.length > 4){
               isValid = false;
               errors.push({field : 'reenter',
               reason : 'Re-enter Password should not be more than 4 characters'});
               }  
            if(val2.length > 4){
               isValid = false;
               errors.push({field : 'password',
               reason : 'Password should not be more than 4 characters'});
              }  
            //show error if the validation failed                        
            if (!isValid) {
               var errStr = "";
               Ext.each(errors, function(error, index){
               errStr += "[" + (index+1) + "] - " + error.reason + "\n";
               });
               Ext.Msg.alert("Error", errStr);
              } else {
                Ext.Msg.alert("Info", "Success");
               }
             } 
```

# php - Heroku 上的 Amazon S3 和 PHP

> ID：11560709
> 
> 赞同：13
> 
> 时间：2012-07-19T12:16:34.287
> 
> 标签：php, file-upload, heroku, amazon-s3

我想为我的 Heroku 应用程序启用我的 Amazon S3 存储桶。

在 Heroku 之前，我是使用[s3fs](http://code.google.com/p/s3fs/)直接挂载目录的。现在这在 Heroku 上是不可能的，有没有其他方法可以将它们“链接”在一起，可能仍然保持上传（和调整大小）脚本仍然有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T01:09:19.560

根据您的脚本所做的事情，您可能需要对它们进行一些更改。

我应该首先声明我从未这样做过，所以我可能会遗漏一些细节，但根据我对 PHP、Heroku 和 S3 的经验，它应该像接受上传的文件一样简单（将存储在一个临时文件中） Heroku 服务器上的某个目录），调整它的大小，最后将它上传到 S3。

如果您已经有一个上传工作流工作，唯一的区别应该是不是将文件保存到服务器中的目录（根据您的说法，这实际上是一种指向 S3 存储桶的符号链接），您现在将将其上传到 S3。您可以使用此库轻松完成此操作：[https ://github.com/tpyo/amazon-s3-php-class](https://github.com/tpyo/amazon-s3-php-class)

像这样的东西：

```
// Ink is expensive, let's write less
$file = $_FILES['uploadedfile']['tmp_name'];
$name = $_FILES['pictures']['name'];

// Resize the image
resize($file);

// Normally you would do this for storing the file locally
// move_uploaded_file($file, "$destinationdir/$name");

// Now you want to upload to S3
$s3 = new S3($awsAccessKey, $awsSecretKey);
$s3->putObject($s3->inputFile($file, false), $bucketName, $uploadName, S3::ACL_PUBLIC_READ) 
```

根据您组织上传的方式，您可能还希望记录存储桶名称和文件名，可能在数据库表中，您可以在其中搜索文件名并获取存储桶名称，因为您将需要两者检索文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T17:48:00.073

我想应该还是可以的。您是否看过[*使用 AWS S3 存储静态资产和文件上传*](https://devcenter.heroku.com/articles/s3)？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-01T13:46:02.253

您需要手动获取上传的文件并上传到 S3，请记住，Heroku 具有**只读文件系统**，因此您无法在 Heroku 应用程序上创建临时文件，每个操作都需要在内存中完成。

这是[S3 php api](http://undesigned.org.za/files/s3-class-documentation/index.html)

# 一个例子：

```
// get uploaded file
$file = $_FILES['uploadedfile']['tmp_name'];

// do whatever manipulation on the file in memory
// $file = resize($file)

// upload file to S3, note, S3->putObjectFile won't work, as it require $file parameter to be string
if (S3::putObject(S3::inputFile($file), $bucket, $uri, S3::ACL_PRIVATE)) {
    echo "File uploaded.";
} else {
    echo "Failed to upload file.";
} 
```

## 更新

看起来 S3 php lib 没有用于从内存上传资源的 api，S3::inputFile 需要一个字符串作为输入，而不是在内存资源中。所以结论是：在 Heroku 上使用 S3 PHP 客户端是不可能的

# iphone - 全屏 UIImageView 中的横向模式图像

> ID：11560711
> 
> 赞同：2
> 
> 时间：2012-07-19T12:16:39.333
> 
> 标签：iphone, objective-c, uiimageview, uiimage, landscape

是否可以让 UIImageView 以不同于纵向图像的方式处理横向图像？

我会试着解释一下，我有`ImageViewController`一个`UIImageView`填满整个屏幕的。
在某些时候，用户启动 a`UIImagePickerController`并从相机胶卷中选择一张图片。
然后我用那张图片创建一个实例`ImageViewController`并推送它

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

    ImageViewController *ivc = [[ImageViewController alloc] initWithImage:image];
    [picker pushViewController:ivc animated:YES];
    [ivc release];
} 
```

问题是，如果图像处于横向模式，它仍然会填满整个屏幕。
我希望它看起来像 iPhone 照片应用程序呈现横向图像的方式（在屏幕中央，黑色背景）。

是否有在 UIImageView 中显示横向模式图像的内置方式？还是我需要根据图像方向设置 imageView 框架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:43:20.337

只需设置：

```
imageView.contentMode = UIViewContentModeAspectFit; 
```

它会保持比例**并**适合屏幕，而不是填充它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T16:29:13.303

您可能希望根据图片的比例更改`UIImageView`'属性。`contentMode`

所以在`viewDidLoad`：

```
if (imageView.image.size.height > imageView.image.size.width) { 
    imageView.contentMode = UIViewContentModeAspectFill;
} else { 
    imageView.contentMode = UIViewContentModeAspectFit; 
} 
```

并在用户切换到横向时更改该模式，例如在`willAnimateRotationToInterfaceOrientation:duration:`：

```
if (UIInterfaceOrientationIsLandscape(toIntefaceOrientation)){
   if (imageView.image.size.height > imageView.image.size.width) { 
       imageView.contentMode = UIViewContentModeAspectFit;
   } else { 
       imageView.contentMode = UIViewContentModeAspectFill; 
   }
} else {
   if (imageView.image.size.height > imageView.image.size.width) { 
       imageView.contentMode = UIViewContentModeAspectFill;
   } else { 
       imageView.contentMode = UIViewContentModeAspectFit; 
   }
} 
```

注意：注意测试，但可能有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:33:51.260

```
UIImageView *imgView;
imgView.contentMode = UIViewContentModeCenter; 
```

# sql - 为选定的记录生成插入脚本？

> ID：11560713
> 
> 赞同：55
> 
> 时间：2012-07-19T12:16:43.243
> 
> 标签：sql, database, sql-server-2008

我有一个包含以下数据的表：

```
Pk_Id  ProductName           Fk_CompanyId       Price
------------------------------------------------------
1      AMX                   1                  10.00
2      ABC                   1                  11.00
3      APEX                  1                  12.00
4      AMX                   1                  10.00
5      ABC                   1                  11.00
6      APEX                  1                  12.00
7      AMX                   2                  10.00
8      ABC                   2                  11.00
9      APEX                  2                  12.00 
```

我想为迁移 Fk_CompanyId 为 1 的记录生成插入脚本。

有一个插入脚本选项可以为所有记录生成脚本，但我想过滤一些记录以迁移到另一个数据库。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-19T12:20:44.223

如果您使用的是 SQL Management Studio，您可以右键单击您的数据库名称并选择任务 > 导入/导出数据并按照向导进行操作。
其中一个步骤称为“指定表副本或查询”，其中可以选择编写查询以指定要传输的数据，因此您可以简单地指定以下查询：

```
select * from [Table] where Fk_CompanyId = 1 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2018-07-05T08:35:56.340

如果可能，请使用 Visual Studio。自 2014 年 3 月发布以来，Microsoft SQL Server Data Tools (SSDT) 为此带来了内置功能：

1.  打开 Visual Studio
2.  打开“查看”→“SQL Server 对象资源管理器”
3.  添加到您的服务器的连接
4.  展开相关数据库
5.  展开“表格”文件夹
6.  右键单击相关表
7.  从上下文菜单中选择“查看数据”
8.  在新窗口中，查看数据使用工具栏中的“排序和过滤数据集”功能来应用您的过滤器。请注意，此功能是有限的，您不能编写显式 SQL 查询。
9.  应用过滤器并仅查看所需数据后，单击工具栏中的“脚本”或“脚本到文件”
10.  Voilà - 在这里你有你的过滤数据的插入脚本

注意：请注意，“查看数据”窗口就像 SSMS“编辑前 200 行”一样 - 您可以立即编辑数据

*（使用 Visual Studio 2015 和 Microsoft SQL Server Data Tools (SSDT) 版本 14.0.60812.0 和 Microsoft SQL Server 2012 进行测试）*

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2016-04-06T09:30:58.337

```
CREATE PROCEDURE sp_generate_insertscripts
(
    @TABLENAME VARCHAR(MAX),
    @FILTER_CONDITION VARCHAR(MAX)=''   -- where TableId = 5 or some value
)
AS
BEGIN

SET NOCOUNT ON

DECLARE @TABLE_NAME VARCHAR(MAX),
        @CSV_COLUMN VARCHAR(MAX),
        @QUOTED_DATA VARCHAR(MAX),
        @TEXT VARCHAR(MAX),
        @FILTER VARCHAR(MAX) 

SET @TABLE_NAME=@TABLENAME

SELECT @FILTER=@FILTER_CONDITION

SELECT @CSV_COLUMN=STUFF
(
    (
     SELECT ',['+ NAME +']' FROM sys.all_columns 
     WHERE OBJECT_ID=OBJECT_ID(@TABLE_NAME) AND 
     is_identity!=1 FOR XML PATH('')
    ),1,1,''
)

SELECT @QUOTED_DATA=STUFF
(
    (
     SELECT ' ISNULL(QUOTENAME('+NAME+','+QUOTENAME('''','''''')+'),'+'''NULL'''+')+'','''+'+' FROM sys.all_columns 
     WHERE OBJECT_ID=OBJECT_ID(@TABLE_NAME) AND 
     is_identity!=1 FOR XML PATH('')
    ),1,1,''
)

SELECT @TEXT='SELECT ''INSERT INTO '+@TABLE_NAME+'('+@CSV_COLUMN+')VALUES('''+'+'+SUBSTRING(@QUOTED_DATA,1,LEN(@QUOTED_DATA)-5)+'+'+''')'''+' Insert_Scripts FROM '+@TABLE_NAME + @FILTER

--SELECT @CSV_COLUMN AS CSV_COLUMN,@QUOTED_DATA AS QUOTED_DATA,@TEXT TEXT

EXECUTE (@TEXT)

SET NOCOUNT OFF

END 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-07-19T12:22:54.003

```
SELECT 'INSERT SomeOtherDB.dbo.table(column1,column2,etc.)
  SELECT ' + CONVERT(VARCHAR(12), Pk_Id) + ','
       + '''' + REPLACE(ProductName, '''', '''''') + ''','
       + CONVERT(VARCHAR(12), Fk_CompanyId) + ','
       + CONVERT(VARCHAR(12), Price) + ';'
FROM dbo.unspecified_table_name
WHERE Fk_CompanyId = 1; 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-05-04T15:48:17.483

实际上，我只需几个步骤即可在 SSMS 中完成此操作，而无需添加插件或过程。1）如果您不想要整个表，请选择需要的列和记录到数据库中的新表中：`SELECT col1, col2 ... INTO TempRecs` 2）使用 SSMS 的生成脚本功能通过右键单击数据库来生成 INSERT 语句（任务 > 生成脚本> 选择对象 > 选择临时表 > 单击高级按钮 > 将“脚本的数据类型”更改为“仅数据”> 完成）。3) 对临时表名上的结果 INSERT 语句进行查找并替换为所需的导入表名。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-11-08T09:46:27.937

在 SSMS 中执行您的 sql 查询。从结果窗口中选择所有单元格并复制值。转到[下面的网站](http://www.convertcsv.com/csv-to-sql.htm "下面的网站")，您可以在那里粘贴复制的数据并生成 sql 脚本。您还可以将 SSMS 的查询结果保存为 CSV 文件，并将 csv 文件导入[本](http://www.convertcsv.com/csv-to-sql.htm "这")网站。

[http://www.convertcsv.com/csv-to-sql.htm](http://www.convertcsv.com/csv-to-sql.htm)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-07-19T12:20:37.030

您可以使用您的标准创建一个视图，然后导出该视图吗？

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2021-06-02T15:09:55.707

使用**DBeaver**客户端（支持 SQL Server），您可以使用所需的记录执行 SELECT 查询，然后选择结果行，右键单击并复制为 SQL，您将在剪贴板中拥有 INSERT 语句：

[![在此处输入图像描述](../Images/1c45ef8a520f0ccc669ec8c18592d1b0.png)](https://i.stack.imgur.com/UNnj6.png)

**HeidiSQL**还支持连接到 SQL Server 并导出选定的行（您可以在 SQL 查询本身中过滤行，或者检索所有行并在数据网格中选择它们）：

[![在此处输入图像描述](../Images/c30a96a9fd7e84fafcb16089666d6431.png)](https://i.stack.imgur.com/PgzVY.png)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-04-07T13:25:15.983

我创建了以下内容`procedure`：

```
if object_id('tool.create_insert', 'P') is null
begin
  exec('create procedure tool.create_insert as');
end;
go

alter procedure tool.create_insert(@schema    varchar(200) = 'dbo',
                                   @table     varchar(200),
                                   @where     varchar(max) = null,
                                   @top       int = null,
                                   @insert    varchar(max) output)
as
begin
  declare @insert_fields varchar(max),
          @select        varchar(max),
          @error         varchar(500),
          @query         varchar(max);

  declare @values table(description varchar(max));

  set nocount on;

  -- Get columns
  select @insert_fields = isnull(@insert_fields + ', ', '') + c.name,
         @select = case type_name(c.system_type_id)
                      when 'varchar' then isnull(@select + ' + '', '' + ', '') + ' isnull('''''''' + cast(' + c.name + ' as varchar) + '''''''', ''null'')'
                      when 'datetime' then isnull(@select + ' + '', '' + ', '') + ' isnull('''''''' + convert(varchar, ' + c.name + ', 121) + '''''''', ''null'')'
                      else isnull(@select + ' + '', '' + ', '') + 'isnull(cast(' + c.name + ' as varchar), ''null'')'
                    end
    from sys.columns c with(nolock)
         inner join sys.tables t with(nolock) on t.object_id = c.object_id
         inner join sys.schemas s with(nolock) on s.schema_id = t.schema_id
   where s.name = @schema
     and t.name = @table;

  -- If there's no columns...
  if @insert_fields is null or @select is null
  begin
    set @error = 'There''s no ' + @schema + '.' + @table + ' inside the target database.';
    raiserror(@error, 16, 1);
    return;
  end;

  set @insert_fields = 'insert into ' + @schema + '.' + @table + '(' + @insert_fields + ')';

  if isnull(@where, '') <> '' and charindex('where', ltrim(rtrim(@where))) < 1
  begin
    set @where = 'where ' + @where;
  end
  else
  begin
    set @where = '';
  end;

  set @query = 'select ' + isnull('top(' + cast(@top as varchar) + ')', '') + @select + ' from ' + @schema + '.' + @table + ' with (nolock) ' + @where;

  insert into @values(description)
  exec(@query);

  set @insert = isnull(@insert + char(10), '') + '--' + upper(@schema + '.' + @table);

  select @insert = @insert + char(10) + @insert_fields + char(10) + 'values(' + v.description + ');' + char(10) + 'go' + char(10)
    from @values v
   where isnull(v.description, '') <> '';
end;
go 
```

然后你可以这样使用它：

```
declare @insert varchar(max),
        @part   varchar(max),
        @start  int,
        @end    int;

set @start = 1;

exec tool.create_insert @schema = 'dbo',
                        @table = 'myTable',
                        @where  = 'Fk_CompanyId = 1',
                        @insert = @insert output;

-- Print one line to avoid the maximum 8000 characters problem
while len(@insert) > 0
begin
  set @end = charindex(char(10), @insert);

  if @end = 0
  begin
    set @end = len(@insert) + 1;
  end;

  print substring(@insert, @start, @end - 1);
  set @insert = substring(@insert, @end + 1, len(@insert) - @end + 1);
end; 
```

输出将是这样的：

```
--DBO.MYTABLE
insert into dbo.myTable(Pk_Id, ProductName, Fk_CompanyId, Price)
values(1, 'AMX', 1, 10.00);
go

insert into dbo.myTable(Pk_Id, ProductName, Fk_CompanyId, Price)
values(2, 'ABC', 1, 11.00);
go

insert into dbo.myTable(Pk_Id, ProductName, Fk_CompanyId, Price)
values(3, 'APEX', 1, 12.00);
go

insert into dbo.myTable(Pk_Id, ProductName, Fk_CompanyId, Price)
values(4, 'AMX', 1, 10.00);
go

insert into dbo.myTable(Pk_Id, ProductName, Fk_CompanyId, Price)
values(5, 'ABC', 1, 11.00);
go

insert into dbo.myTable(Pk_Id, ProductName, Fk_CompanyId, Price)
values(6, 'APEX', 1, 12.00);
go

insert into dbo.myTable(Pk_Id, ProductName, Fk_CompanyId, Price)
values(7, 'AMX', 2, 10.00);
go

insert into dbo.myTable(Pk_Id, ProductName, Fk_CompanyId, Price)
values(8, 'ABC', 2, 11.00);
go

insert into dbo.myTable(Pk_Id, ProductName, Fk_CompanyId, Price)
values(9, 'APEX', 2, 12.00);
go 
```

如果您只想获取一系列行，请使用以下`@top`参数：

```
declare @insert varchar(max),
        @part   varchar(max),
        @start  int,
        @end    int;

set @start = 1;

exec tool.create_insert @schema = 'dbo',
                        @table = 'myTable',
                        @top    = 100,
                        @insert = @insert output;

-- Print one line to avoid the maximum 8000 characters problem
while len(@insert) > 0
begin
  set @end = charindex(char(10), @insert);

  if @end = 0
  begin
    set @end = len(@insert) + 1;
  end;

  print substring(@insert, @start, @end - 1);
  set @insert = substring(@insert, @end + 1, len(@insert) - @end + 1);
end; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-11-30T05:09:57.027

如果您使用的是 Oracle SQL Developer，那么它将是

```
select /*insert*/ * from TABLE_NAME where COLUMN_NAME = 'VALUE'; 
```

将此作为脚本运行

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-10T12:34:20.900

如果您使用的是 MySql 和 MySql 工作台。这是一个不错的选择。

1.  编写您的选择查询并执行它
2.  您将看到“导出”按钮
3.  [![项目清单](../Images/70491773336194ba60e0ec88672ebc51.png)](https://i.stack.imgur.com/LotYQ.png)
4.  单击它并提供文件名，然后在“另存为类型”中，您将看到“SQL 插入语句”

这将为您提供插入语句

[![在此处输入图像描述](../Images/f535b9e12be2b08e2c33e4bb76288105.png)](https://i.stack.imgur.com/RZndR.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-22T10:32:35.700

使用 Navicat

1.  过滤表中的数据或编写查询

[![第一步](../Images/089d721cabb5a0dcfb54c21cae8bfbf5.png)](https://i.stack.imgur.com/gOJ5y.png)

2.  选择行并右键单击它>复制AS>选择“插入语句”或“更新语句”

[![第二步](../Images/01c5e6840bf7d95f838f4b1b1fef1fdb.png)](https://i.stack.imgur.com/76y56.png)

3.  在 MS SQL Server Management Studio 或其他 IDE 中粘贴新查询

[![第三步](../Images/24c44094f01db31d267c002ea86603b8.png)](https://i.stack.imgur.com/0YkuW.png)

# internationalization - Birt 报告查看器和国际化

> ID：11560719
> 
> 赞同：1
> 
> 时间：2012-07-19T12:17:04.600
> 
> 标签：internationalization, viewer, birt

我正在尝试将 Birt 中的一些标题国际化。我正在使用 Birt 报告查看器，只是在我的 jsp 中使用 birt 标记来显示我的报告。

在我尝试将某些标题国际化之前，它运行良好。我用我的 key=value 关联创建了一个 resource.properties 文件。一旦我引用了我的密钥，我的 rptdesign 将设置为版本 3.2.23 而不是 3.2。

接下来，当我的 jsp 加载时出现以下错误：

```
The file reporting.rptdesign has error and can not be run. 
```

因此，我想知道使用报告查看器进行国际化是否需要一些特定的 jar。

编辑：问题似乎与国际化本身无关。只需将版本更改为 3.2.23 就会出错。我尝试放置一个更高版本，如 3.2.6，但每次我引用一个密钥时，版本都会设置回 3.2.23，就好像它是唯一考虑国际化的版本一样！

编辑 2：我部署了 Birt Runtime 4.2 的 WebViewerExample，并且可以在其中使用 3.2.23 版本的 rptdesign。国际化似乎暂时不起作用，但我想现在不是同一个错误......一旦我使用 birt 标签让一切正常工作，我会添加一个答案。

编辑 3：它可以在 Eclipse 预览版中使用，但不能在 tomcat 中部署一次。我尝试了对 web.xml 和资源位置的一些更改，但没有更改。然而，web.xml 被读取，因为我可以更改其中的语言环境并查看 birt 核心的国际化消息。但是我的特定键/值关联没有考虑在内。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:54:00.880

您可以在 BIRT 中进行国际化，

您必须在“.rptdesign”中将“.properties”文件添加到资源中，然后选择要国际化的任何标题（例如：标签）单击本地化属性从.properties文件中添加键值，我已经这样做了3.7 和 4.2 运行良好，

但是当我们导出为 PDF 格式时出现问题，我仍然找不到解决方案

希望对你有帮助

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:57:12.630

我终于解决了我的问题并在另一篇文章中添加了一些信息：

[Birt 国际化不起作用](https://stackoverflow.com/questions/11613450/birt-internationalization-doesnt-work)

# java-me - 如何在lwuit中强制打开树文件夹？

> ID：11560720
> 
> 赞同：1
> 
> 时间：2012-07-19T12:17:06.333
> 
> 标签：java-me, lwuit

我使用了 lwuit 的树组件，它工作正常。现在我需要在任何 keyevent 上强制打开树文件夹/父节点。我找不到强制打开文件夹的方法？

任何抬头将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T18:24:12.223

找到代表您想要的节点的按钮，然后调用`pressed()`它的方法。

曾经有一个问题要求在 LWUIT 问题跟踪器中使用更优雅的方法来解决此问题，但如果我们对此进行处理，它只会出现在[Codename One](http://www.codenameone.com/)之前。

# python - 使用 Python 远程控制（轻量级）浏览器

> ID：11560726
> 
> 赞同：4
> 
> 时间：2012-07-19T12:17:16.503
> 
> 标签：python, linux, browser, raspberry-pi

过去，Netscape 有一个功能，允许您从命令行远程控制浏览器会话（使用“-remote”标志）。我正在寻找类似的功能，但在现代浏览器中。

我想要完成的一个更现代的例子，但在不同的应用程序中是 Mplayer's [slave mode](http://www.mplayerhq.hu/DOCS/tech/slave.txt)。

我的想法是我希望能够从 Python 脚本远程控制浏览器，并执行诸如加载页面和重新加载当前页面之类的操作。

理想情况下，它应该是一个轻量级浏览器（例如 Midori），原因是它可以在[Raspberry Pi](http://www.raspberrypi.org/)上运行。出于同样的原因，像使用 Selenium 的浏览器控制之类的东西也不起作用。

许多浏览器已经能够接受来自命令行变量的 URL 和各种设置，但是一旦浏览器启动并运行，您就无法控制它。

我确实意识到可以基于现有的库编写一个简单的浏览器，但我希望有一个可以利用的现有解决方案。

此外，仅抓取页面并将其呈现为图像是不够的，因为页面可以是动态的（例如幻灯片）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:30:16.677

你可能想要[Uzbl](http://uzbl.org/)。它通过套接字/FIFOs/等进行检测，没有自己的铬等。

我们在我的工作场所使用它作为办公室周围的仪表板。

# python - 对于 django 模型上的任何查询，仅对活动集为 true 的元素执行查询

> ID：11560730
> 
> 赞同：2
> 
> 时间：2012-07-19T12:17:40.810
> 
> 标签：python, django

由于缺乏计划，我发现自己不得不在模型的后期引入一个名为“Active”的布尔字段。这个想法是只返回对于 Db 上的任何查询具有活动的元素。一种可能的方法是编辑我对模型的所有查询以添加类似

```
Q(active==true) 
```

这需要很多改变。是否有可能使用“类元”我可以设置排序，以便对 Db 的任何查询仅在活动集为 true 的元素上执行。

```
class Db(models.Model):
   url = models.TextField()
   description = models.TextField(blank=True, null=True)
   active = models.BooleanField()(initial=True)

   class Meta:
       ordering = ['-id'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:27:46.360

您可以实施自定义默认对象管理器并根据您的条件进行过滤。

请参阅[自定义管理器](https://docs.djangoproject.com/en/dev/topics/db/managers/#custom-managers)，但请记住，[不要过滤掉此类管理器子类中的任何结果，](https://docs.djangoproject.com/en/dev/topics/db/managers/#do-not-filter-away-any-results-in-this-type-of-manager-subclass)因为 django 警告覆盖默认对象管理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:36:40.777

我认为你可以为你的模型添加新的 QuerySet 方法作为这个[片段](http://djangosnippets.org/snippets/734/)。

```
from django.db import models

class QuerySetManager(models.Manager):
    def get_query_set(self):
        return self.model.QuerySet(self.model)

# Using it in a model:

from django.db.models.query import QuerySet    

class Entry(models.Model):
   ...
   objects = QuerySetManager()
   ...
   class QuerySet(QuerySet):
        def chckactive(self):            
            return self.filter(active=True)

#   Entry.objects.all().chckactive() 
```

# bing - 以编程方式获取 bing 中缓存网页的链接

> ID：11560732
> 
> 赞同：6
> 
> 时间：2012-07-19T12:17:48.600
> 
> 标签：bing

好吧，我正在尝试从 google/bing 缓存中恢复网站。我可以用谷歌做到这一点，但它限制了每天 400 个这样的请求，所以试试 bing。在谷歌中，如果我搜索“缓存：站点链接”，它会重定向到

> [http://webcache.googleusercontent.com/search?q=cache%3A](http://webcache.googleusercontent.com/search?q=cache%3A)***附加链接***&oq=cache%3A***附加链接***&aqs=chrome.0.57l2j58j60l2j61&sugexp=chrome,mod=9&sourceid=chrome&ie=UTF-8

然后我可以使用像 www.example.com/post$i.html 这样的循环来操作*附加链接URL，其中 $i = 20000 到 24000*

但是当我尝试对 bing 缓存做同样的事情时，我看到[http://cc.bingj.com/cache.aspx?q=........d=[A](http://cc.bingj.com/cache.aspx?q=........d=[A) BIG ID]...... .所以该网站的网址不在链接中，所以我无法操纵它。“缓存：站点链接”快捷方式在 bing 中也不起作用。是否有像 google 这样的 bing 或快捷方式？

# java - Hibernate 合并不适用于作为集合的属性

> ID：11560733
> 
> 赞同：1
> 
> 时间：2012-07-19T12:17:49.980
> 
> 标签：java, hibernate, collections, merge

我是 Hibernate 的新手，并尝试保留一个包含集合的实体。

我有我的类 User，其中包含一个 Set 属性。

```
class User{

@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)
   @JoinColumn(name = "user_id", referencedColumnName = "id")
   @Valid
   @Nullable
   public Set<Permission> getPermissions()
   {
      return permissions;
   }
} 
```

当我用一组新的权限更新用户并尝试保存它时，权限再次重置为原始值，所有其他值都被更新，只有没有的权限。

```
@Transactional(readOnly = false)
   @Override
   public User update(User user)
      entityManager.merge(user);
      entityManager.flush(); 
      entityManager.refresh(user); 
      return user; 
```

我已经阅读了有关传递持久性和分离对象的信息，但我仍然没有让它工作。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:27:03.363

尝试

```
@Transactional(readOnly = false)
@Override
public User update(User user)
    return entityManager.merge(user);
} 
```

其他调用是不必要的，并且会使您的代码混乱。并且您忽略 的结果`merge()`，它是作为参数传递的分离的、保持不变的用户的更新、附加版本。

另外，请注意，由于您在关联上有级联 ALL，因此上述内容不仅会更新用户字段以及与用户关联的权限。它还将合并权限。因此，作为参数传递的用户权限状态将被复制到这些权限的附加版本并保存在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:35:00.707

也许您要替换整个系列？我发现最好获取现有集合，并在其上调用 .add() 和 .remove() 以更新其内容，而不是替换整个内容。

此外，您可以尝试改用 @ElementCollection

```
@ElementCollection
@CollectionTable(name="PERMISSION",
        joinColumns={@JoinColumn(name="USER_ID")}
)
private Set<Permission> permissions; 
```

唯一需要注意的是 Permission 类必须用@Embeddable 标记，我不相信您可以直接查询权限作为顶级对象（您必须通过用户）。此外，Permission 对象不会有指向其用户的指针。

这是您如何查询它的示例 hql：

```
 select p from User u join u.permissions p where p.name=? 
```

# ruby-on-rails - Ruby on Rails：未定义的方法，控制器方法错误

> ID：11560737
> 
> 赞同：1
> 
> 时间：2012-07-19T12:18:09.613
> 
> 标签：ruby-on-rails, ruby, methods, controller

我正在制作一个网站，用户可以在其中将数据输入数据库，然后可以在另一个页面上搜索数据库。目前，创建新条目表单工作正常，用于显示表格的搜索页面也是如此，因为我还没有实现搜索。

控制器：

```
def search
 @project_search = Project.order(sort_column + " " + sort_direction)
end

  private

   def sort_column
    Project.column_names.include?(params[:sort]) ? params[:sort] : "project_name"
   end

   def sort_direction
    %w[asc desc].include?(params[:direction]) ? params[:direction] : "asc"
   end

def create
@project = Project.new(params[:project])

@project.client = params[:new_client] unless params[:new_client].blank?
@project.exception_pm = params[:new_exception_pm] unless params[:new_exception_pm].blank?
@project.project_owner = params[:new_project_owner] unless params[:new_project_owner].blank?
@project.role = params[:new_role] unless params[:new_role].blank?
@project.industry = params[:new_industry] unless params[:new_industry].blank?
@project.business_div = params[:new_business_div] unless params[:new_business_div].blank?

respond_to do |format|
  if @project.save
    format.html { redirect_to @project, notice: 'Project was successfully created.' }
    format.json { render json: @project, status: :created, location: @project }
  else
    format.html { render action: "new" }
    format.json { render json: @project.errors, status: :unprocessable_entity }
  end
end
end 
```

当我注释掉搜索方法时，我的输入表单就可以工作了，但是当它们都在那里时，我得到了这个错误。

NilClass:Class 的未定义方法“model_name”

从第 1 行的表单视图中提取的源代码：

```
<%= form_for(@project) do |f| %> 
```

我认为这只是一个小问题，但我不知道如何解决它。我是 ruby​​ on rails 的新手，所以放轻松:)。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:28:24.123

不是 100% 肯定，但我认为这是因为它的`private`位置。在 Ruby 中，调用之后的所有内容都是私有的。Rails 可能会忽略您对 create 的定义并使用它自己的定义。`private`当您说“注释掉搜索方法”时，您是否有机会注释掉？

# javascript - 添加和更改复选框名称+更改标签

> ID：11560741
> 
> 赞同：1
> 
> 时间：2012-07-19T12:18:23.463
> 
> 标签：javascript, jquery

这就是我正在使用的：

[http://jsfiddle.net/VkYnQ/](http://jsfiddle.net/VkYnQ/)

目标是选择你想要的次数，然后选择什么时间，然后它应该添加并显示时间`'Copy to more dates?'`。

目前它有 1 个静态复选框，只是为了演示它应该如何工作。

因此，当每个工作日有 1 个静态复选框 0800 时，表示您选择了 1 个时间，并且该时间当前是 08:00。

如果您将此时间更改为 16:00，则复选框名称和标签应更改为 1600。

如果选择2次，并选择第二次到20:00，它应该在每个工作日在其他复选框旁边添加一个复选框，标签为“2000”

这是我为使更改工作而尝试的方法，因此如果您从例如 08:00 更改为 16:00，则复选框如下所示：http: [//jsfiddle.net/epCbv/1/](http://jsfiddle.net/epCbv/1/)

哪个有效，但我想不出一种方法让它与我的代码一起工作。

希望那里的任何人都可以帮助我，如果可能（2天），我会奖励+300声望/赏金。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:38:08.090

我并不打算完成所有工作，但我更新了您的代码以使其接近您正在寻找的目标。代码很脏，我没有花很多时间，但它仍然可以理解。

让我知道这是否真的很好:)

查看结果：http: [//jsfiddle.net/adrieng/VkYnQ/3/](http://jsfiddle.net/adrieng/VkYnQ/3/)

Nota Bene：更新的东西没有链接到第一个`select.timeclock`. 所以选择了，例如，至少显示2次，并在第二次，第三次，第四次改变时间，......选择输入^^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:52:20.870

根据您的代码：

采用：

```
$('.timeSelect').on('change', function(){

    var ind = parseInt($(this).attr('id')) +2;
    var newVal = $(this).val().replace(':', '');
    $("input:checkbox").eq(ind).attr('name', 'copyTime[1]['+newVal+']');
    $("input:checkbox").eq(ind).next('span').html(newVal);

    console.log(ind);

}); 
```

但是改变： `clone()`用`.clone(true)`//ADDED

```
.attr('name', function() { // changing the name
                    return 'seats_timeclock[' + randnr + ']';
                }).attr('id', (parseInt($('select[name^=seats_timeclock]:last').attr('id')))+2) //ADDED 
```

并添加一个 id 来选择：

```
<td class="borderRight">
<select class="timeSelect" id="0" name="seats_timeclock[]"> 
```

这是[小提琴](http://jsfiddle.net/KZadT/)。

# php - 如果目录之一是符号链接，则无法在 php 中打开文件

> ID：11560747
> 
> 赞同：1
> 
> 时间：2012-07-19T12:18:53.297
> 
> 标签：php, path, symlink

我有 3 个实时、暂存和开发站点，开发站点具有实时和数据库副本中所有文件的副本，但暂存不是因为它们都在同一物理服务器上（暂存和开发）我想将文件从开发同步链接到实时（它是 30GB）但我的 php 脚本无法打开路径中的一个目录是符号链接的文件。

我有符号链接

`/srv/www/staging.server.com/htdocs/people/ to /srv/www/dev.server.com/htdocs/people/`

我有示例文件，我可以从命令行和浏览器`/srv/www/dev.server.com/htdocs/people/gnokii/zuluwarrior.svg`访问它（通过），但 php 无法打开该文件。`/srv/www/staging.server.com/htdocs/people/zuluwarrior.svg`

`file_exists`返回 false 并`file`返回空数组。（我有将 svg 转换为 png 的代码，该代码可在实时服务器和开发服务器上运行，但因此无法在暂存服务器上运行）。

是否有一些禁用同步链接的 php 配置？我找到`suhosin.executor.allow_symlink = Off`了，但我认为它是用于执行脚本的。任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T21:20:27.797

我找到了将 base_dir 设置为 '/srv/www/staging.server.com' 并`suhosin.executor.allow_symlink`设置为 Off的原因

> 此标志在使用 open_basedir 时重新激活 symlink()，在 Suhosin >= 0.9.6 中默认禁用。在使用 open_basedir 时允许 symlink() 实际上存在安全风险。

# powershell - Powershell：检查计算机是否已注销

> ID：11560748
> 
> 赞同：3
> 
> 时间：2012-07-19T12:18:56.503
> 
> 标签：powershell

我需要一种我希望在 Powershell 中执行此操作的非常简单的方法（我正在使用 Absolute Manage 远程运行 Powershell 脚本）：

```
if ( computer is logged out )
 {
    <run script>
 }
 else
 {
    exit
 } 
```

我在搜索时发现的大部分内容都围绕着做一些与用户登录/注销相关的更复杂的事情。我基本上只需要知道计算机当前是否处于登录提示符处。

感谢您提供的所有帮助——你们太棒了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:48:38.660

尽可能使用 WMI：

```
$info = gwmi -class win32_computerSystem -computer sist002ws -ea silentlycontinue | Select-Object username

if ($info.username.Length -gt 0)

{$Message = $info.username}
else
{ $Message = "No user is logged in locally"}

$message 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:28:21.723

根据您的环境，这可能是此处讨论的雷区：

[脚本专家文章](http://blogs.technet.com/b/heyscriptingguy/archive/2011/03/17/use-powershell-to-detect-if-a-workstation-is-in-use.aspx "脚本专家文章")

总之，使用 SysInternals [Suite](http://technet.microsoft.com/en-us/sysinternals/bb842062.aspx "系统内部套件")提供的 PSLoggedOn 工具，同时小心过滤掉任何可能返回的服务帐户。为了防止链接失效，这里是上面 Scripting Guy 文章中的使用示例：

```
$Computers = @( 
,   "PC001" 
,   "PC002" 
,   "PC003" 
,   "PC004" 
)

Foreach ($Computer in $Computers) 
{ 
    [object[]]$sessions = Invoke-Expression ".\PsLoggedon.exe -x -l \\$Computer" | 
        Where-Object {$_ -match '^\s{2,}((?<domain>\w+)\\(?<user>\S+))|(?<user>\S+)'} | 
        Select-Object @{ 
            Name='Computer' 
            Expression={$Computer} 
        }, 
        @{ 
            Name='Domain' 
            Expression={$matches.Domain} 
        }, 
        @{ 
             Name='User' 
             Expression={$Matches.User} 
         } 
    IF ($Sessions.count -ge 1) 
    { 
        Write-Host ("{0} Users Logged into {1}" –f $Sessions.count,     
            $Computer) -ForegroundColor 'Red' 
    } 
    Else 
    { 
        Write-Host ("{0} can be rebooted!" -f $Computer) ` 
            -ForegroundColor 'Green' 
    } 
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:41:26.913

[如此处](http://www.peetersonline.nl/?p=98)所述，您可以使用下面的代码片段来获取所有登录用户。请注意，这将包含 SYSTEM、LOCAL SERVICE 和 NETWORK SERVICE 等用户。

```
Get-WmiObject Win32_LoggedOnUser -ComputerName "myMachine" | 
    Select Antecedent -Unique | 
    % { 
        "{0}\{1}" -f $_.Antecedent.Split('"')[1], $_.Antecedent.Split('"')[3]
    } 
```

如果您只想查找某些域中的人，您可以像这样稍微修改它：

```
Get-WmiObject Win32_LoggedOnUser -ComputerName "myMachine" | 
    Select Antecedent -Unique | 
    % { 
        $domain = $_.Antecedent.Split('"')[1]
        if($domain -eq "myDomain") {
            "{0}\{1}" -f $domain, $_.Antecedent.Split('"')[3]
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T12:56:20.090

这将使您所有的 Interactive/RemoteInteractive（终端服务会话）登录用户。您可能希望向过滤器添加更多 LogonType。没有结果意味着没有人登录。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa394189(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394189%28v=vs.85%29.aspx)

```
Get-WmiObject Win32_LogonSession -ComputerName Server1 -Filter 'LogonType=2 OR LogonType=10' | 
Foreach-Object { $_.GetRelated('Win32_UserAccount') } |
Select-Object Caption -Unique 
```

# ios - Xcode 无法归档项目

> ID：11560750
> 
> 赞同：1
> 
> 时间：2012-07-19T12:19:06.173
> 
> 标签：ios, xcode4

当我尝试归档我的 iOS 应用程序时，我收到一条失败的消息，没有任何问题。如下面的屏幕所示*（编辑：由于声誉低，不得不删除图像。它只显示 Xcode 在工具栏中失败，并且问题侧边栏为空）*。

我的包标识符中没有下划线、空格或类似的东西。此外，我没有通过错误的扩展名导入任何文件。就像在另一个问题中提到的那样。当我尝试在模拟器中运行它时，一切都运行良好。

有任何想法吗？这个项目相当大，我还不够熟练，无法在新项目中重用所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:26:05.843

我发现了错误。我删除了旧的配置文件并导入了更新的配置文件（只有更多设备）。XCode 只是无法识别新的配置文件，我不得不再次更改设置“代码签名身份”。昨天无法回答。也是因为我的名声xD

# ios - 电影播放器 控件可见/隐藏时的通知？

> ID：11560753
> 
> 赞同：6
> 
> 时间：2012-07-19T12:19:12.590
> 
> 标签：ios, uikit, mpmovieplayercontroller, nsnotifications

我只想知道当播放控件可见或隐藏时是否有可能收到通知？

例如，我想展示一个具有以下风格的视频：

```
self.moviePlayerController.controlStyle = MPMovieControlStyleEmbedded; 
```

当视频开始播放时，播放控件变得可见并自动消失。如果用户只是在视频上按标签，则会出现控件。

我需要一个通知，以便我可以调整我的视图（在`MPMoviePlayerController`视图下重新定位一些额外的按钮。这可能吗？因为不幸的是我在文档中什么也没找到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T17:04:50.400

恐怕这些事件没有记录在案的通知。

您可能很幸运并通过嗅探所有已发布的通知来找到一些东西，如下面的答案：

[捕获和跟踪所有通知](https://stackoverflow.com/questions/3725234/nsnotificationcenter-trapping-and-tracing-all-nsnotifications/3738387#3738387)

[如何从 UIWebView 嵌入式 YouTube 视频播放接收 NSNotifications](https://stackoverflow.com/questions/8518719/how-to-receive-nsnotifications-from-uiwebview-embedded-youtube-video-playback/8554040#8554040)

* * *

然而，有一种方法可以简单地将您的控件与`MPMoviePlayerControler`'s 的控件链接起来。这种方式绝对是无证的，并且在尝试在 iTunes 上销售您的应用程序时确实存在被拒绝的很大风险。

首先，您需要在 中定位界面视图`MPMoviePlayerController`，直到今天，它仍由`MPInlineVideoOverlay`使用嵌入式界面时调用的类表示。再一次，请注意他的这带来了很大的机会或破坏，因为苹果可能会决定在任何一天使用不同的命名。

```
/**
 * This quirky hack tried to locate the interface view within the supposingly opaque MPMoviePlayerController
 * view hierachy.
 * @note This has a fat chance of breaking and/or getting rejected by Apple
 *
 * @return interface view reference or nil if none was found
 */
- (UIView *)interfaceViewWithPlayer:(MPMoviePlayerController *)player
{
    for (UIView *views in [player.view subviews])
    {
        for (UIView *subViews in [views subviews])
        {
            for (UIView *controlView in [subViews subviews])
            {
                if ([controlView isKindOfClass:NSClassFromString(@"MPInlineVideoOverlay")])
                {
                    return controlView;
                }
            }
        }
    }
    return nil;
} 
```

如果返回正确的视图，您只需将自己的添加添加到界面`UIView addSubview:` 上.)。

# php - 用 PHP 或 javascript 点击按钮？

> ID：11560758
> 
> 赞同：0
> 
> 时间：2012-07-19T12:19:35.280
> 
> 标签：php, javascript

我想在我的计算机上运行一个 PHP 脚本并每半小时更新一次我的 IP。我可以通过浏览`http://192.168.1.1/`并单击断开连接按钮来做到这一点。（这对你来说可能不同，我猜这取决于你的路由器）

现在我正在考虑将网站加载`http://192.168.1.1/`到 iFrame 中，然后 PHP 或 javascript 可以单击该按钮。

我很好奇这些事情是否可以通过 PHP 或 javascript 实现？我在源代码中看到按钮后面有一个javascript函数。我可以在不实际单击按钮的情况下运行该功能吗？

我认为重要的一点是，我无法编辑`http://192.168.1.1/`.

我希望有人能指出我正确的方向！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:45:08.787

您可以使用 PHP 和 curl lib [http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)来执行此操作，因为我们需要为调制解调器提供用户名和密码。

首先，通过 curl 使用用户名和密码发送请求。然后，发出与断开连接按钮相同的请求（或者我们也可以在此处提供用户名和密码）。

试试这个，可能对你有用！

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $disconnectButtonActionURL);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
echo $output = curl_exec($ch);
curl_close($ch); 
```

# winapi - win 32 中的 OSC 数据包实现

> ID：11560763
> 
> 赞同：0
> 
> 时间：2012-07-19T12:19:48.813
> 
> 标签：winapi, packet, osc

需要有关 Visual Studio 2008 中 win 32 中 OSC 数据包实现的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:00:55.407

我将[oscpack](http://code.google.com/p/oscpack/)与 c++ 一起使用。它是可移植的源代码，我将它与 win32/MacOSX/Linux 一起使用。

# python - scrapy python中的ssl握手失败错误

> ID：11560766
> 
> 赞同：1
> 
> 时间：2012-07-19T12:19:51.923
> 
> 标签：python, url, response, scrapy

目前我正在研究scrapy，下面是我的spider.py代码

```
class Example(BaseSpider):
    name = "example"
    allowed_domains = {"http://www.example.com"}

    start_urls = [
        "https://www.example.com/rwjhamilton/index.cfm?&ijobcatid=100&ijobrowset=1&cjobattr1=All&template=dsp_job_list.cfm"
    ]

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        href_tags = hxs.select('//font[@class="bannertext"]/u/a/@href').extract()
        print href_tags,">>>>>>>>>>>>>>>>" 
```

**结果 ：**

```
2012-07-19 17:32:20+0530 [example] ERROR: Error downloading <GET https://www.example.com/rwjhamilton/index.cfm?&ijobcatid=100&ijobrowset=1&cjobattr1=All&template=dsp_job_list.cfm>: [('SSL routines', 'SSL23_READ', 'ssl handshake failure')] 
```

这个错误对scrapy来说似乎很新，我真的不知道如何解决这个问题，谁能告诉我为什么会出现这个错误以及如何解决它。实际上我正在尝试收集上述 url 中的 href 标签，似乎总共有 40 个 href 标签

有时响应正在下载，有时正在显示

```
2012-07-19 17:39:15+0530 [example] DEBUG: Retrying <GET https://www.example.com/rwjhamilton/index.cfm?&ijobcatid=100&ijobrowset=1&cjobattr1=All&template=dsp_job_list.cfm> (failed 1 times): Connection to the other side was lost in a non-clean fashion 
```

请让我知道如何解决这个问题。提前致谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:07:51.190

我认为这个问题已经在这里解决了

[https://github.com/scrapy/scrapy/pull/186](https://github.com/scrapy/scrapy/pull/186)

`0.15`在scrapy发布后已修复

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T03:20:28.793

我也遇到了这个错误：

```
2013-03-07 06:58:01+0800 [CrawlSpider] ERROR: Error downloading <GET a_website_url>: Connection to the other side was lost in a non-clean fashion. 
```

我的scrapy版本是0.16.3。原因是它是我国的受限网站。

# json - 在 JsonValueProviderFactory 中修改 ModelState

> ID：11560767
> 
> 赞同：1
> 
> 时间：2012-07-19T12:19:54.817
> 
> 标签：json, asp.net-mvc-3

在 JsonValueProviderFactory 的默认实现中，使用了 JavaScriptSerializer.DeserializeObject() 方法。如果 json 字符串格式错误，此方法将引发异常。然后服务器向浏览器抛出一个 500 黄页。我想抑制异常并通过我的控制器操作显示自定义错误消息。

这是我尝试过的。我删除了默认的 JsonValueProviderFactory 并引入了一个具有基本相同代码的自定义 JsonValueProviderFactory。唯一的区别在于我在 GetDeserializedObject 方法中引入了一个 try-catch 块。

```
private static object GetDeserializedObject(ControllerContext controllerContext)
    {
        if (!controllerContext.HttpContext.Request.ContentType.StartsWith("application/json", StringComparison.OrdinalIgnoreCase))
        {
            // not JSON request
            return null;
        }

        StreamReader reader = new StreamReader(controllerContext.HttpContext.Request.InputStream);
        string bodyText = reader.ReadToEnd();
        if (String.IsNullOrEmpty(bodyText))
        {
            // no JSON data
            return null;
        }

        JavaScriptSerializer serializer = new JavaScriptSerializer();
        object jsonData = null;
        try
        {
            jsonData = serializer.DeserializeObject(bodyText);
        }
        catch (Exception ex) {
            ex.Data["jsonString"] = bodyText;
            throw;
        }
        return jsonData;
    } 
```

我不想简单地抛出异常，而是想将异常错误消息传递给模型绑定器，并最终将其设置在模型状态字典中。然后我可以在控制器操作中读取模型状态字典并自定义发送到浏览器的错误消息。这可以做到吗？如果做不到，是否有其他方法可以实现相同的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:10:02.683

这个我没试过，你可以试试

```
controllerContext.ParentActionViewContext.ViewData.ModelState.AddModelError 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:41:28.317

我终于找到了正确的方法。我正在记录它以供其他人将来参考。

```
controllerContext.Controller.ViewData.ModelState.AddModelError("improper json", ex) 
```

这正是modelbinder的modelbindingContext中的modelstate是如何设置的。我从 MVC3 源代码中复制了相关的代码片段。该方法存在于 ControllerActionInvoker.cs 中。

```
 protected virtual object GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor) {
        // collect all of the necessary binding properties
        Type parameterType = parameterDescriptor.ParameterType;
        IModelBinder binder = GetModelBinder(parameterDescriptor);
        IValueProvider valueProvider = controllerContext.Controller.ValueProvider;
        string parameterName = parameterDescriptor.BindingInfo.Prefix ?? parameterDescriptor.ParameterName;
        Predicate<string> propertyFilter = GetPropertyFilter(parameterDescriptor);

        // finally, call into the binder
        ModelBindingContext bindingContext = new ModelBindingContext() {
            FallbackToEmptyPrefix = (parameterDescriptor.BindingInfo.Prefix == null), // only fall back if prefix not specified
            ModelMetadata = ModelMetadataProviders.Current.GetMetadataForType(null, parameterType),
            ModelName = parameterName,
            ModelState = controllerContext.Controller.ViewData.ModelState,
            PropertyFilter = propertyFilter,
            ValueProvider = valueProvider
        };

        object result = binder.BindModel(controllerContext, bindingContext);
        return result ?? parameterDescriptor.DefaultValue;
    } 
```

# java - 如何使用户输入与变量相关？

> ID：11560768
> 
> 赞同：0
> 
> 时间：2012-07-19T12:20:06.063
> 
> 标签：java, variables, input, user-input

我不知道如何准确地表达这个问题，但这就是我想要实现的（我正在使用堆栈实现河内塔的插图：

这是在`main()`函数内部：

```
System.out.println("Type the source pole number and the destination pole number");
int a = reader.nextInt();
int b = reader.nextInt();
boolean move = moveDics(a, b); 
```

这些是代表 3 个极点的堆栈：

```
 Stack<Integer> pole1 = new Stack<Integer>();
    Stack<Integer> pole2 = new Stack<Integer>();
    Stack<Integer> pole3 = new Stack<Integer>(); 
```

我想根据用户输入更改堆栈，为此我需要与变量pole1、pole2、pole3 相关（以执行任何操作，例如`pole1.pop()`）。

这是我的问题：除了多个 if() 语句或 switch case 语句之外，我如何使用用户输入 - 一个整数 - 与极点相关？像`pole + "x".pop()`什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:23:03.863

**很好的解决方案**

不要像那样做很多变量。

您可以将它们全部放在一个数组中：

```
Stack[] poles = new Stack[3];
for (int i=0; i<poles.length; i++) poles[i] = new Stack<Integer>(); 
```

然后您可以使用 访问您的电线杆`poles[yourInteger]`。

一个变体（基于杰弗里的评论）：

```
List<Stack<Integer>> poles = new ArrayList<Stack<Integer>>();
for (int i=0; i<poles.size(); i++) poles[i] = new Stack<Integer>(); 
```

然后您可以使用 访问您的电线杆`poles.get(yourInteger)`。

请注意，一旦您开始在这些杆上做更复杂的事情，您就必须考虑将它们嵌入到一个类中。我个人尽量避免集合集合或集合数组，因为它们往往会令人困惑。

**不是很好的解决方案**

您可以使用开关：

```
public Stack<Integer> getPole(int i) {
    switch(myInteger) {
    case 1:
        return pole1;
    case 2:
        return pole2;
    case 3:
        return pole3
    }
    return null;
} 
```

与它一起使用

```
Stack<Integer> pole = getPole(yourInteger); 
```

**疯狂的解决方案**

如果需要，您可以使用反射按名称访问变量。

为此，您首先获取类的 Field 实例：

```
Field stackField = MyClass.class.getField("pole"+myInteger); 
```

然后您必须获取该字段值的方法，并调用它们。这会很慢，很多 LOC 和很多 try/catch。

# asp.net-mvc - 定长菜单

> ID：11560772
> 
> 赞同：0
> 
> 时间：2012-07-19T12:20:20.403
> 
> 标签：asp.net-mvc, mvcsitemapprovider

我想要两级菜单，如下所示：

项目1 | **项目2** | 第 3 项

**项目2.1** | 项目 2.2 | 项目 2.3

如何编写站点地图文件和 MenuHelperModel 以获得类似上述的效果？

编辑：我创建了这样的站点地图文件：

```
<mvcSiteMapNode title="MyApp" clickable="false">
   <mvcSiteMapNode title="Item1" controller="Item11">
      <mvcSiteMapNode title="Item1.1" controller="Item11" />
      <mvcSiteMapNode title="Item1.2" controller="Item12" />
   </mvcSiteMapNode>
   ...
</mvcSiteMapNode> 
```

不幸的是 IsInCurrentPath 仅适用于 MyApp 节点，因此我无法突出显示正确的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T06:10:26.947

正如 Xharze 指出的那样，您必须指定控制器操作才能使 MvcSiteMapProvider 节点与 MVC 一起运行。

```
<mvcSiteMapNode title="MyApp" clickable="false">
   <mvcSiteMapNode title="Item1" controller="Item11" action="Index">
      <mvcSiteMapNode title="Item1.1" controller="Item11" action="Decimal1" />
      <mvcSiteMapNode title="Item1.2" controller="Item12" action="Decimal2" />
   </mvcSiteMapNode>
   ...
</mvcSiteMapNode> 
```

MyApp 节点不可点击的事实只是意味着它将是不可点击的分组节点，在这种情况下不需要提供控制器或操作。

对于其他节点，控制器和动作参数必须对应于 MVC 控制器和动作。

```
public class Item1Controller : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    public ActionResult Decimal1()
    {
        return View();
    }

    public ActionResult Decimal2()
    {
        return View();
    }
} 
```

例如，该`<mvcSiteMapNode title="Item1.1" controller="Item11" action="Decimal1" />`节点将与上面的 Decimal1 操作方法相对应，因为控制器名称和操作名称都匹配。

# c++ - 如何使用 Cocos2D-X 画线？

> ID：11560777
> 
> 赞同：11
> 
> 时间：2012-07-19T12:20:27.330
> 
> 标签：c++, cocos2d-x, cocos2d-x-2.x

我一直在我的电脑上玩 Cocos2D-X，我已经得到它来在我希望能够构建它的所有设备上构建 hello world 程序。

我知道如何让程序显示一个精灵，并显示一个标签，但我无法让程序画一条线。如何在 Cocos2D-X 中画线？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T12:23:54.987

使用`void ccDrawLine(const CCPoint& origin, const CCPoint& destination)`声明的函数`CCDrawingPrimitives.h`

**编辑**

我自己从未尝试过使用原语。但据我所知，其中的所有内容`cocos2d`都呈现为可见`CCNode`或它的子类。所以你必须把你的代码放在`draw`一些方法`CCNode`或它的子类中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-11T06:25:32.997

您必须`ccDrawLine`在 draw() 中使用函数

例子

```
void GameLayer::draw()
{
    //red line from bottom left to top right corner
    cocos2d::ccDrawColor4F(1.0f, 0.0f, 0.0f, 1.0f);
    cocos2d::ccDrawLine(ccp(0,0), ccp(100, 100));
} 
```

记住 layer 必须是空的，因为它调用 first draw next 它会绘制孩子，所以如果你有孩子，它会重叠你绘制的内容。

Z订单:)

所以在你的代码中你有课

```
class MyLayer : public CCLayer
{
    ... //your code
    init()
    {
         CCLayer* pLayer = new GameLayer(); //It will be debug layer :)
     addChild(pLayer);//Alse you can set here Z order.
     pLayer->release();
    }
    virtual void draw()
    {
         //red line from bottom left to top right corner
         ccDrawColor4F(1.0f, 0.0f, 0.0f, 1.0f);
         ccDrawLine(ccp(0,0), ccp(100, 100));
    }
} 
```

上面的代码会画出你想要的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-11-26T13:31:25.813

我发现了另一种在 CCLayer 中画线的简单方法。Cocos2d-x 有一个名为 CCDrawNode 的类。您可以[在此处](http://www.cocos2d-x.org/reference/native-cpp/V2.2/index.html)查看参考。并且非常容易使用该功能：

```
void drawSegment(const CCPoint & from,
    const CCPoint & to,
    float   radius,
    const ccColor4F & color 
) 
```

小例子：

```
CCDrawNode* node = CCDrawNode::create();
addChild(node,10);//Make sure your z-order is large enough
node->drawSegment(fromPoint,toPoint,5.0,ccc4f(180,180,180,100)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-18T11:11:50.153

```
auto node = DrawNode::create();
node->drawLine(Vec2(200, 200), Vec2(200, 500), Color4F(1.0, 1.0, 1.0, 1.0));
this->addChild(node); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-24T09:54:57.383

在`cocos2d-x 3.0`alpha 中，您可以使用

```
DrawPrimitives::drawLine(const cocos2d::Point &origin, const cocos2d::Point &destination); 
```

# c++ - 根据文本动态调整控件大小

> ID：11560778
> 
> 赞同：0
> 
> 时间：2012-07-19T12:20:30.940
> 
> 标签：c++, windows

使用 C++ 和 Windows，我想根据内容调整按钮宽度。

例如，如果按钮文本为“OK”，则按钮的宽度变为 10，如果内容为“取消”，则宽度变为 20。我知道如何调整控件的大小，但我无法计算多少我们需要调整大小。

任何想法，我们该怎么做？

谢谢

-潘卡伊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:40:08.063

使用 GetTextExtentPoint32[获取](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144938%28v=vs.85%29.aspx)文本的尺寸，然后使用[SetWindowPos](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545%28v=vs.85%29.aspx)调整控件的大小。

希望这将帮助并解决您的问题...

# php - 修改数组中的空值

> ID：11560785
> 
> 赞同：1
> 
> 时间：2012-07-19T12:20:56.567
> 
> 标签：php, arrays

我想修改数组（）中的空值。我只想修改，而不是清理它们。

```
$arr = array ( 'a' => '', 'b' => 'Apple', 'C' => 'Banana'); 
```

我想修改并获得这个：

```
array(a => 'N', b => Apple, C => 'Banana'); 
```

我尝试 array_walk() 和 array_filter()。但空值被删除。

我得到：

```
array('b' => 'Apple', 'C' => 'Banana'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:23:43.177

```
array_walk($arr, function(&$val)
{
    if($val == null)
    {
        $val = 'N';
    }
}); 
```

这段代码在我的机器上运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:25:59.167

你也可以这样做：

```
$arr = array ( 'a' => '', 'b' => 'Apple', 'C' => 'Banana' );

foreach ( $arr as $key => $value ) {
    if ( !$value ) $value = 'N';
    $new_arr[ $key ] = $value;
}

print_r( $new_arr ); 
```

输出：

```
Array
(
    [a] => N
    [b] => Apple
    [C] => Banana
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:26:12.057

```
foreach ($yourArray as $k=>&$v) {
    if (empty($v)) {
        $v = 'N';
    }
} 
```

# android - 片段基础

> ID：11560788
> 
> 赞同：0
> 
> 时间：2012-07-19T12:21:05.267
> 
> 标签：android, android-fragments

我正在开发一个应用程序，我的片段有一些问题。首先，我想知道是否可以在另一个片段中制作一个片段。第二个是何时调用 onCreateView() 和 onActivityCreated() 哪个最好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T21:11:22.040

根据 Android 来源：
`onCreateView`在构建视图层次结构期间由 Activity 调用。这是 Fragment 有机会实例化自己的用户界面视图的地方。
`onActivityCreated`当 Activity 完全创建并完成实例化视图层次结构时调用。此时，Fragment 可以安全地访问其视图并从某个已保存的状态中恢复自身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:52:43.367

1.  您不能在另一个片段中创建片段。您应该通过活动在片段之间进行通信。请参阅[http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)

2.  我没有清楚地理解你的第二个问题。但我通常将 onActivityCreated() 留空而不更改它。并以与 onCreate() 类似的方式使用 onCreateView()。

# c# - 在 C# 中创建 Json

> ID：11560789
> 
> 赞同：1
> 
> 时间：2012-07-19T12:21:14.987
> 
> 标签：c#, json

> **可能重复：**
> [如何在 C# 中创建 JSON 字符串](https://stackoverflow.com/questions/1056121/how-to-create-json-string-in-c-sharp)

我想在 mt ASP.NET MVC 应用程序中使用谷歌图表。那里没有 mvc 示例和数据表结构。我以前从未使用过 Json，我必须像下面的代码一样创建一个 json。

如何在 C# 中创建这样的内容

```
{"cols":[
  {"id":"","label":"Month","pattern":"","type":"string"},
  {"id":"","label":"Sales","pattern":"","type":"number"},
  {"id":"","label":"Expenses","pattern":"","type":"number"}],
"rows":[
  {"c":[
    {"v":"April","f":null},
    {"v":1000,"f":null},
    {"v":900,"f":null},
  {"c":[
    {"v":"July","f":null},
    {"v":1030,"f":null},
    {"v":null,"f":null},
"p":null
} 
```

我找不到有关在 C# 中创建 json 的简单示例。请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:26:47.493

[试试](http://james.newtonking.com/projects/json-net.aspx)Json.NET 。我认为它会给你你所需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T12:24:05.173

将其创建为具有属性的普通类，然后：

```
var json = new JavaScriptSerializer().Serialize(myObject) 
```

或动态对象：

```
var json = new JavaScriptSerializer().Serialize(new { property = "string" }) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T12:25:49.823

在代码项目上关注一篇关于这个的好文章

[http://www.codeproject.com/Articles/78928/Create-JSON-from-C-using-JSON-Library](http://www.codeproject.com/Articles/78928/Create-JSON-from-C-using-JSON-Library)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T12:25:47.813

那么您可以使用**DataContractJsonSerializer 类**将对象序列化为 JavaScript 对象表示法 (JSON) 并将 JSON 数据反序列化为对象。在.net 4.0 中。

我希望你已经检查了[如何在 C# 中创建 JSON 字符串，](https://stackoverflow.com/questions/1056121/how-to-create-json-string-in-c-sharp)这不是重复的。

除此之外，您可以选择使用生成 RESTful 服务和 JSON 数据的 WCF 服务。您可以查看此示例，这是最适合您在 WCF 中的需求的[示例。](http://www.codeproject.com/Articles/167159/How-to-create-a-JSON-WCF-RESTful-Service-in-60-sec)

另一种方法是，如果您喜欢一些内置库，那么[Json.Net](http://james.newtonking.com/projects/json-net.aspx)是 codeplex 上的优秀库之一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T12:25:52.880

我会尝试[JSON.NET 库](http://james.newtonking.com/projects/json-net.aspx)。在功能和性能方面，它具有 .NET 中内置的大多数序列化程序的优势。我相信微软会因此将 JSON.NET 库与 ASP.NET 4.5 捆绑在一起。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T12:26:13.913

看看这段代码。

```
 var oSerializer = new System.Web.Script.Serialization.JavaScriptSerializer();
    oSerializer.MaxJsonLength = int.MaxValue;
    string sa = oSerializer.Serialize(p); // where p is your object to serialize.

    sa = "{ \"Result\": " + sa + " }"; 
```

# jsf - Primefaces 图表在 JSF 页面中不起作用

> ID：11560797
> 
> 赞同：2
> 
> 时间：2012-07-19T12:21:52.070
> 
> 标签：jsf, jsf-2, primefaces

我正在尝试在 JSF 页面中实现 Primefaces 图表。不幸的是，代码不起作用。我只得到没有图表的简单 JSF 页面：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <ui:insert name="header">           
            <ui:include src="header.xhtml"/>         
        </ui:insert>
    </h:head>
    <h:body>
        <h1><img src="resources/css/images/icon.png" alt="DX-57" /> Account Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:100%; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ui:insert name="Navigation">           
                <ui:include src="Navigation.xhtml"/>         
            </ui:insert>
        </div>  
        <div id="logodiv" style="position:relative; top:35px; left:0px;"> 
            <h:graphicImage alt="Dashboard"  style="position:relative; top:-20px; left:9px;"  value="resources/images/logo_dashboard.png" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="settingsHashMap" style="width:350px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">
                    <h:panelGrid columns="2">
                        <p:lineChart value="#{DashboardController.linearModel}" legendPosition="e" zoom="true" animate="true"
                                     title="Linear Chart" minY="0" maxY="10" style="width:400px;" widgetVar="chart"/>

                        <p:barChart id="basic" value="#{DashboardController.categoryModel}" legendPosition="ne"
                                    title="Basic Bar Chart" min="0" max="200" style="width:400px" animate="true"/>
                    </h:panelGrid>

                </div>   

                <div id="settingsdiva" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:400px">

                </div>   

                <div id="settingsdivb" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:800px">

                </div>  
            </div>  
        </div>
    </h:body>
</html> 
```

这是托管 bean：

```
import java.io.Serializable;
import javax.enterprise.context.SessionScoped;
// or import javax.faces.bean.SessionScoped;
import javax.inject.Named;
/* include SQL Packages */
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.HashMap;
import javax.annotation.PostConstruct;
import javax.sql.DataSource;
import javax.annotation.Resource;
import javax.faces.context.FacesContext;
import javax.inject.Inject;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;
// or import javax.faces.bean.ManagedBean; 

import org.primefaces.model.chart.CartesianChartModel;  
import org.primefaces.model.chart.ChartSeries;  
import org.primefaces.model.chart.LineChartSeries;

import org.glassfish.osgicdi.OSGiService;

@Named("DashboardController")
@SessionScoped
public class Dashboard implements Serializable {

    /* Call the Oracle JDBC Connection driver */
    @Resource(name = "jdbc/Oracle")
    private DataSource ds;

    private CartesianChartModel linearModel;

    private CartesianChartModel categoryModel;

    public Dashboard() {
        createLinearModel();
        createCategoryModel();
    }

    public CartesianChartModel getLinearModel() {
        return linearModel;
    }

    public CartesianChartModel getCategoryModel() {
        return categoryModel;
    }

    private void createLinearModel() {
        linearModel = new CartesianChartModel();

        LineChartSeries series1 = new LineChartSeries();
        series1.setLabel("Series 1");

        series1.set(1, 2);
        series1.set(2, 1);
        series1.set(3, 3);
        series1.set(4, 6);
        series1.set(5, 8);

        LineChartSeries series2 = new LineChartSeries();
        series2.setLabel("Series 2");
        series2.setMarkerStyle("diamond");

        series2.set(1, 6);
        series2.set(2, 3);
        series2.set(3, 2);
        series2.set(4, 7);
        series2.set(5, 9);

        linearModel.addSeries(series1);
        linearModel.addSeries(series2);
    }

    private void createCategoryModel() {
        categoryModel = new CartesianChartModel();

        ChartSeries boys = new ChartSeries();
        boys.setLabel("Boys");

        boys.set("2004", 120);
        boys.set("2005", 100);
        boys.set("2006", 44);
        boys.set("2007", 150);
        boys.set("2008", 25);

        ChartSeries girls = new ChartSeries();
        girls.setLabel("Girls");

        girls.set("2004", 52);
        girls.set("2005", 60);
        girls.set("2006", 110);
        girls.set("2007", 135);
        girls.set("2008", 120);

        categoryModel.addSeries(boys);
        categoryModel.addSeries(girls);
    }
} 
```

我实现了 Primefaces 网站示例中的示例。我在 Glassfish 日志中没有发现任何错误消息。你能帮我解决问题吗？

PS 我成功可以使用 Primefaces 咆哮成束。也许这是 Primefaces 的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T20:23:45.267

只是为了回答这个老问题：

如果您想将 Primefaces Dashboard 与 cdi 一起使用，则必须使用：

```
@Named // from javax.inject.Named

@ViewScoped // from javax.faces.view.ViewScoped 
```

希望这可以帮助。

# c# - 如何在 c# (WPF) 中与“动态创建的对象”进行交互

> ID：11560800
> 
> 赞同：0
> 
> 时间：2012-07-19T12:21:54.940
> 
> 标签：c#, wpf

我对 C# 很陌生，并且遇到了以下问题：我的程序在运行时创建了一个对象字典（大小未知），数据不足。对于每个对象，我想创建一个 StackPanel 元素，里面有两个 TextBox，我这样做如下：

```
foreach (string name in a.Keys){
    StackPanel SP = new StackPanel();
    TextBox TB1 = new TextBox();
    TextBox TB2 = new TextBox();
    SP.Children.Add(TB1);
    SP.Children.Add(TB2);
    // ... Content to TextBoxes 
    TB2.Name = name;
} 
```

现在，我在程序的其他地方放置了一个复选框，如果上面每个 StackPanel 中的第二个文本框可见，它应该切换，例如，通过以下方式：

```
void MainCheckBox_Clicked(object sender, RoutedEventArgs e){
    if (MainCheckBox.IsChecked == true){XXX.Height = 300;}
    else {XXX.Height = 0;}
} 
```

这里的 XXX 应该是对名为“TB2”的 TextBox 的引用。但是使用列表中的任何“名称”（应该对应于 TB2 的名称）都不起作用，编译器会说“名称”不存在，即使我从字面上使用列表中的具体名称，例如 ' John'（假设他在列表中）。

我假设我在概念上做错了什么，那么根据数据创建这些东西的更好方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:26:59.133

您将需要保留对`TextBox`您创建的对象的引用。例如，您可以创建一个`Dictionary<string, TextBox>`来存储引用：

```
private Dictionary<string, TextBox> myTextBoxes = new Dictionary<string, TextBox>(); 
```

创建`TextBox`对象时，您会将它们添加到字典中：

```
myTextBoxes.Add(name, TB2); 
```

然后你会`TextBox`像这样访问你的：

```
myTextBoxes["TextBoxName"].Height = 300; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:26:47.687

一种简单的方法是遍历所有控件，然后检查类型和名称（或您提供给控件的标签）。然后你可以正常处理控制。对于迭代，我将使用以下内容：

```
 foreach(TextBox tb in this.Controls.OfType<TextBox>().Where(t => t.Name.Equals("SEARCHEDNAME")))
        {
            //Do something with the control and then u can break
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T12:39:49.200

您可以搜索 WPF 的 VisualTree 以查找具有您的名字的对象（我[`VisualTreeHelpers`的博客上](http://rachel53461.wordpress.com/2011/10/09/navigating-wpfs-visual-tree/)有一些您可能会觉得有用，它们显示了一些 Visual Tree Navigation 示例）

```
var tb = VisualTreeHelpers.FindChild<TextBox>(this, tbName);
if (tb != null)
    tb.Height = (MainCheckBox.IsChecked ? 300 : 0); 
```

或者您可以利用 WPF 的绑定系统为您执行此操作。如果您在代码隐藏中制作控件，我个人会使用 Style

```
<Style x:Key="SecondTextBoxStyle" TargetType="{x:Type TextBox}">
    <Setter Property="Height" Value="0" />
    <Style.Triggers>
        <DataTrigger Binding="{Binding ElementName=MainCheckBox, Path=IsChecked}" Value="True">
            <Setter Property="Height" Value="300" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

然后当你创建你的文本框时：

```
TB2.Style = this.FindResource("SecondTextBoxStyle") as Style; 
```

在理想的世界中，我什至不会使用代码隐藏来制作对象。相反，我会使用`ItemsControl`绑定到您的`Keys`ObservableCollection，并将其设置`ItemTemplate`为您想要的任何内容。

```
<ItemsControl ItemsSource="{Binding Keys}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <TextBox ... />
                <TextBox Style="{StaticResource SecondTextBoxStyle}" ... />
            </StackPanel>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T12:46:35.650

简单的方法是获取动态创建的对象 - 将它们放入集合中 - 创建数据模板，以便 wpf 知道如何呈现 - 并将这些集合放入 itemscontrol。有些人首先用 viewmodel 调用这个 mvvm ;)

你的动态对象包装器

```
public class MyObject //should implement INotifyPropertyChanged
{ 
  //your public properties goes here
} 
```

您的视图模型，它处理集合和检索集合的数据

```
public class MyViewmodelWithDynamicCollection //should implement INotifyPropertyChanged
{
   public ObservableCollection<MyObject> MyItems {get;set;}//just init once and add, remove, clear like you want

} 
```

在你看来资源

```
<DataTemplate DataType="{x:Type local:MyObject}">
    <StackPanel>
        <TextBlock Text="{Binding MyReadonlyProperty}"/>
        <TextBox Text="{Binding MyEditableProperty}"/>
    </StackPanel>
 </DataTemplate> 
```

在你看来

```
 <ItemsControl ItemsSource="{Binding MyItems}"/> 
```

就这样

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T12:25:58.467

一旦将对象存储在字典中，名称就只是字典中的键。这对编译器没有影响；该名称对于编译器来说是未知的标识符。

这同样适用于您分配给`Name`控件属性的值。对于编译器来说，这只是一个普通的字符串，也可以是帮助文本；编译器不会仅仅因为调用了该属性就认为它有任何特殊性`Name`。

您可以使用表达式从字典中检索对象，例如`a["myName"]`; `Name`您可以通过遍历所有控件并比较其属性的值来找到具有特定名称（根据属性）的控件`Name`。

如果您必须经常访问这些控件，则可能值得设置一个额外的字典，您可以在其中按名称存储控件（例如`Dictionary<string, TextBox>`）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T12:31:41.330

其他答案中提供了很多解决方法；他们或多或少地解决了你的问题。另一种解决方法：

```
foreach (string name in a.Keys){
    StackPanel SP = new StackPanel();
    TextBox TB1 = new TextBox();
    TextBox TB2 = new TextBox();
    SP.Children.Add(TB1);
    SP.Children.Add(TB2);
    // ... Content to TextBoxes
    TB2.Name = name;
    MainCheckBox.Clicked += (sender, e) => {
        TB2.Height = MainCheckBox.IsChecked ? 300 : 0;
    }
} 
```

但是，让我们看看正确的方法应该是什么。

首先，您需要以可绑定的形式呈现数据项。这意味着要么派生自`DependencyObject`要么实现`INotifyPropertyChanged`。其次，您需要将对象放入`ObservableCollection`. 然后，您可以使用不同的容器，例如`ListView`或`ListBox`用于显示数据集合。对于表示数据项的类型，您需要创建一个`DataTemplate`，您可以在其中放置您需要的任何自定义逻辑。

您会发现这是一项相当多的工作，因此我不建议将这种方法用于非常小的应用程序；但是，随着您的应用程序的增长，这种方法将显示出它的好处。

# linux - Porting a Unix program from one host to another

> ID：11560803
> 
> 赞同：0
> 
> 时间：2012-07-19T12:22:17.217
> 
> 标签：linux

I have a remote Unix server that I want to run various programs on. I can easily set up a local virtual machine running some flavour of Unix, on which I can compile my programs. The trouble is, it seems that moving a Unix program from one host to another always fails spectacularly. :-(

For example, I compiled `test` on an OpenSUSE 11.4 system, and tried to run it. It worked perfectly. But then I copied the compiled binary to a Debian 6.0.3 system, and now it refuses to run. Instead, I just get

> test: error while loading shared libraries: libgmp.so.10: cannot open shared object file: No such file or directory

Presumably installing the compiler also installs all the dependencies - but only on the local machine. I would presumably have to somehow *guess* what dependencies I need to put on the remote machine.

On top of that, I don't have shell access to the remote machine. I only have FTP. So I can't *install* anything. I can only copy files to it. So I'm wondering whether I can just *copy* the necessary shared libraries to the same folder as the compiled binary. Would that work? Or would I have to do something more complex?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:49:48.520

I think your best bet, given the circumstances, is to compile a static binary; see the `-static` option of `gcc`. However, this has downsides and might not always work.

You could also try to copy the shared libraries, but then you need to instruct the dynamic loader to search for the libraries in the location where you added them (your binary will have to be linked with the `-Wl,-rpath,/path/to/libs` switch.

Try the `-static` first. It should be easier.

If you wanna take a deeper look into the issues of binary portability, check out sources like:

*   [http://www.evanjones.ca/portable-linux-binaries.html](http://www.evanjones.ca/portable-linux-binaries.html)
*   [http://freegamedev.net/wiki/Portable_binaries](http://freegamedev.net/wiki/Portable_binaries)
*   [Compiling C++ into portable linux binaries](https://stackoverflow.com/questions/5563906/compiling-c-into-portable-linux-binaries)
*   google "linux binary portability"

# sms - 如何在印度获得短代码？

> ID：11560807
> 
> 赞同：0
> 
> 时间：2012-07-19T12:22:32.473
> 
> 标签：sms

我正在开发一个需要使用短代码的应用程序，但我似乎不知道从哪里得到一个。我在印度需要一个，但是当我寻找一个时，有很多公司租用关键字在他们的短代码中使用，但我无论如何都找不到我自己的短代码。再一次，我想要我自己的短代码，而不是别人的关键字。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:29:41.977

最好联系沃达丰、Airtel、relance 等服务提供商...

只是通过谷歌搜索我遇到了这个，也许[这](http://www.indiasms.com/products/product-display/8)会有所帮助

# ruby-on-rails - 如何在 Ruby on Rails 3 中计算未读消息

> ID：11560811
> 
> 赞同：2
> 
> 时间：2012-07-19T12:22:43.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, messaging

我正在使用 gem[邮箱](https://github.com/ging/mailboxer)。
谁能告诉我如何计算收件箱中未读邮件的数量？

我试过：

```
<%= current_user.mailbox.inbox.unread.count %> 
```

但我明白了

```
'ArgumentError in Messages#received wrong number of arguments (0 for 1)' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-29T10:32:00.797

使用 0.10 版：

```
@user.mailbox.receipts.where(read:false).count 
```

使用 0.11 版，我认为会是（我还没有测试过）

```
@user.mailbox.receipts.where(is_read:false).count 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-05T12:08:22.197

查看@MurifoX 提供的源代码链接，我发现有关未读方法的信息：

```
current_user.unread_inbox_count 
```

为您提供未读邮件收件箱计数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T12:29:17.370

看了一下源代码，我发现了这个`unread`方法：

```
#Mark the object as unread for messageable.
def unread(obj)
  ...
end 
```

所有这些方法都将消息/邮件标记为未读，而不是检索所有未读消息。
在课堂上，我发现这种`def search_messages(query)`方法可能与您的问题有关。

链接到班级。 [https://github.com/ging/mailboxer/blob/master/lib/mailboxer/models/messageable.rb](https://github.com/ging/mailboxer/blob/master/lib/mailboxer/models/messageable.rb)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T14:51:28.460

我正在`0.9.x`使用`mailboxer`. 他们将相应的数据库字段从 重命名`read`为`is_read`。要计算用户的未读消息，只需使用：

```
@user.mailbox.receipts.where(:is_read => false).count 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-05T19:08:30.623

对我来说，这个效果最好：

```
current_user.mailbox.inbox(:unread => true).count(:id, :distinct => true) 
```

# prolog - 从 gerrit 评论中排除作者

> ID：11560812
> 
> 赞同：16
> 
> 时间：2012-07-19T12:22:43.570
> 
> 标签：gerrit, prolog, prolog, gerrit

我想禁止更改的作者查看他/她自己在[gerrit](/questions/tagged/gerrit "显示标记为“gerrit”的问题")中的更改。我知道[这个建议的 hack](https://stackoverflow.com/questions/6254739/excluding-author-from-peer-reviewer-list-in-gerrit)，但这并不能真正解决问题。

现在我[从 gerrit 问题](http://code.google.com/p/gerrit/issues/detail?id=308)中了解到，gerrit 的硬编码规则可以通过[自定义 prolog 代码](http://gerrit-documentation.googlecode.com/svn/ReleaseNotes/ReleaseNotes-2.2.2.html#_prolog)进行修改，因此应该可以根据需要修改工作流。但是，我之前从未修改过 gerrit 的工作流程，而且我对[prolog](/questions/tagged/prolog "显示标记为“序言”的问题")了解不多。

有没有人有一个使用这个 prolog 引擎**的 gerrit 自定义规则**的小工作示例？

我很乐意接受如何禁止作者进行自我审查的其他替代方案，因为它们不需要我的团队更改当前的工作流程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-12-19T13:05:35.467

我在这个 google 组中找到了一个非常简单的答案：[groups.google.com/disable-self-review](https://groups.google.com/forum/#!topic/repo-discuss/_TVvO1uP-R8)

在父项目（默认为 All-Projects 项目）中，将其添加到 refs/meta/config 分支的 project.config 文件中：

```
[access "refs/*"]
label-Code-Review = block -2..+2 group Change Owner 
```

并在同一分支的组文件中添加此行

```
global:Change-Owner Change Owner 
```

然后将允许权限的语句放入子项目的project.config中：

```
label-Code-Review = -2..+2 group Developers 
```

**确保在父项目中编写块语句并在子项目中赋予权限。如果允许和阻止在同一个文件中，则允许将否决**（请参阅[this](https://dev.vaadin.com/review/Documentation/access-control.html#__em_block_em_and_em_allow_em_rules_in_the_same_access_section)）。这将阻止更改的所有者给予 -2 或 +2。它将保持 -1 和 +1 选项不变。您可以为可能使用的任何其他自定义标签添加类似的声明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T08:43:19.683

我不确定这是否是您正在寻找的东西，但它可能会给您一些启发。根据[此讨论](https://groups.google.com/forum/?fromgroups#!topic/repo-discuss/_XQvXjBt00o)，以下片段仅在审阅者和更改所有者不是同一个人时才批准更改。

```
 % If a reviewer approved the change, its OK.
  submit_rule(submit(CR)) :-
    change_owner(Owner),
    max_with_block('Code-Review', -2, 2, ok(Reviewer)),
    not_same(Owner, Reviewer),
    CR = label('Code-Review', ok(Reviewer)),
    !. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-07T13:32:11.767

如果您还没有找到它，这里是有关如何使用 prolog 执行此操作的官方说明：

[https://gerrit-review.googlesource.com/Documentation/prolog-cookbook.html#_example_8_make_change_submittable_only_if_tt_code_review_2_tt_is_given_by_a_non_author](https://gerrit-review.googlesource.com/Documentation/prolog-cookbook.html#_example_8_make_change_submittable_only_if_tt_code_review_2_tt_is_given_by_a_non_author)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-16T17:03:49.917

我发布了对您链接到的问题的[答案，但它可能会引导您朝着正确的方向前进：](https://stackoverflow.com/a/37865282/971691)

我为我们的 Gerrit 安装编写了这个 prolog 过滤器。我在父项目中将其作为 submit_filter 进行，因为我希望它适用于我们系统中的所有项目。

```
%filter to require all projects to have a code-reviewer other than the owner
submit_filter(In, Out) :-
    %unpack the submit rule into a list of code reviews
    In =.. [submit | Ls],
    %add the non-owner code review requiremet
    reject_self_review(Ls, R),
    %pack the list back up and return it (kinda)
    Out =.. [submit | R].

reject_self_review(S1, S2) :-
    %set O to be the change owner
    gerrit:change_owner(O),
    %find a +2 code review, if it exists, and set R to be the reviewer
    gerrit:commit_label(label('Code-Review', 2), R), 
    %if there is a +2 review from someone other than the owner, then the filter has no work to do, assign S2 to S1
    R \= O, !,
    %the cut (!) predicate prevents further rules from being consulted
    S2 = S1.
reject_self_review(S1, S2) :-
    %set O to be the change owner
    gerrit:change_owner(O),
    %find a +2 code review, if it exists, and set R to be the reviewer - comment sign was missing
    gerrit:commit_label(label('Code-Review', 2), R), 
    R = O, !,
    %if there isn't a +2 from someone else (above rule), and there is a +2 from the owner, reject with a self-reviewed label
    S2 = [label('Self-Reviewed', reject(O))|S1].
%if the above two rules didn't make it to the ! predicate, there aren't any +2s so let the default rules through unfiltered
reject_self_review(S1, S1). 
```

[这条规则相对于食谱中的规则 #8](https://gerrit-review.googlesource.com/Documentation/prolog-cookbook.html#NonAuthorCodeReview)的好处 (IMO)是：

*   标签仅在`Self-Reviewed`更改被阻止时显示，而不是为*每个*更改添加`Non-Author-Code-Review`标签
**   通过使用`reject(O)`该规则，`Self-Reviewed`标签实际上是一个危险信号*   作为 a`submit_filter`而不是 a `submit_rule`，此规则安装在父项目中并适用于所有子项目*

 ***请注意：**创建此规则是为了防止`Owner`自我审查更改，而食谱中的示例与`Author`. 根据您的工作流程，您可能希望将 2 个`gerrit:change_owner(O)`谓词替换为`gerrit:commit_author(O)`or`gerrit:commit_committer(O)`*

# mysql - ORDER BY FIELD 不起作用 - 错误消息

> ID：11560815
> 
> 赞同：1
> 
> 时间：2012-07-19T12:22:51.710
> 
> 标签：mysql

我有这个选择：

```
SELECT pts_name
FROM   products_tecspecs
WHERE  pts_id IN ( 5275, 21, 5276, 5277,
                   5278, 49, 5279 )
ORDER  BY FIELD (pts_id, 5275, 21, 5276, 5277, 5278, 49, 5279) 
```

我试图得到结果并按照我想要的方式订购它。我找到了[这个](http://lists.mysql.com/mysql/209784)答案，但得到了这个错误：#1305 - FUNCTION database_name.FIELD 不存在

我正在尝试使用 IN 获得具体结果（这是有效的），但是按照我想要的方式进行排序。

帮助你得到赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T12:24:46.557

删除函数和括号之间的空格：`FIELD (`
MySQL 解析器不喜欢那里的空格。采用：

```
FIELD(pts_id, ...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T12:27:49.170

您还可以尝试子查询以自定义顺序按记录排序

```
SELECT pts_name
FROM (SELECT pts_name,
             CASE pts_id 
                 WHEN 5275 THEN 1
                 WHEN 21 THEN 2
                 WHEN 5276 THEN 3
                 WHEN 5277 THEN 4
                 WHEN 5278 THEN 5
                 WHEN 49 THEN 6
                 WHEN 5279 THEN 7
             END AS sort_order
      FROM products_tecspecs 
      WHERE pts_id IN ( 5275, 21, 5276, 5277, 5278, 49, 5279)
    ) a
ORDER BY a.sort_order ASC ; 
```

# iphone - iOS Objective-C：多次使用 URLConnection

> ID：11560822
> 
> 赞同：1
> 
> 时间：2012-07-19T12:23:13.923
> 
> 标签：iphone, objective-c, ios

我有一个对象数组。我的对象包含一个 URL( `NSString`) 和一个图像 ( `UIImage`)。我调用一个网络服务来填充图像的所有 url，然后我想异步获取图像并用图像更新对象。

当我试图确定从 URLConnection 接收到数据时需要更新的数组索引时，我被卡住了。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:32:58.613

您需要将 NSURLConnection 映射到您的数组。您可以将 NSURLConnection 子类化以添加成员，从而允许存储标签标识符，例如索引。

可能创建一个 NSDictionary 会更简单，其中每个 NSURLConnection 充当键，NSNumber 中的 arrayIndex 将作为值存储。

在您使用的回调方法中，您可以使用相应的 NSURLConnection 作为其键来访问您的字典。

```
int arrayIndex = [[myDictionary objectForKey:urlConnection] intValue] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:31:57.150

要从网络获取 UIImage，请多次使用它而不是 URLConnection。

```
 UIImage *image=[[UIImage alloc]initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"URL of the image"]]]; 
```

然后在 UIImageView 中异步加载您的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:43:29.750

我建议您使用 GCD 在后台下载图像。如果您想参考，这里是教程：- [http://blog.slaunchaman.com/2011/02/28/cocoa-touch-tutorial-using-grand-central-dispatch-for-asynchronous-table-view-cells /](http://blog.slaunchaman.com/2011/02/28/cocoa-touch-tutorial-using-grand-central-dispatch-for-asynchronous-table-view-cells/)

以下是您可以使用的代码：-

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

dispatch_async(queue, ^{
    UIImage *image = [UIImage imageWithContentsOfFile:imagePath];

    dispatch_sync(dispatch_get_main_queue(), ^{
        [yourImageView setImage:image];
    });
}); 
```

# objective-c - 如何将静态库嵌入到 iOS 框架中？

> ID：11560824
> 
> 赞同：5
> 
> 时间：2012-07-19T12:23:17.610
> 
> 标签：objective-c, frameworks

我正在使用[iOS-Universal-Framework XCode](https://github.com/kstenerud/iOS-Universal-Framework)模板来创建 MyFramework。它工作正常，当我将 MyFramework 添加到 MyApplication 时，我可以按预期访问 MyFramework 的公共对象。

我遇到的问题是我现在将 MyFramework 与其他静态库链接：[MailCore](https://github.com/mronge/MailCore)本身与 iOSPorts 中的一些库[链接](https://github.com/bindle/iOSPorts)。当我编译 MyProject 时，它失败了，因为链接器找不到 MailCore 静态库。

我*可以*将所有 MailCore 库导入 MyApplication 但这不是我想要的。如何将这些库嵌入 MyFramework？

编辑：重新提出问题。如果 MyApplication 使用 MyFramework 而 MyFramework 使用 libCrypto.a，我是否必须将 MyApplication 与 libCrypto 链接？[iOS-Universal-Framework XCode](https://github.com/kstenerud/iOS-Universal-Framework)声称 I MyFramework 应该嵌入库，而 MyApplication 确实只需要链接到 MyFramework 但它对我不起作用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:50:41.063

确保您以“正确”的方式将库添加到您的项目中。这个其他答案可能会有所帮助。

[如何在 Xcode 4 中“添加现有框架”？](https://stackoverflow.com/questions/3352664/how-to-add-existing-frameworks-in-xcode-4)

# c - 以下 C 代码有什么问题 - 结构和指针

> ID：11560828
> 
> 赞同：0
> 
> 时间：2012-07-19T12:23:34.857
> 
> 标签：c, pointers, struct

以下函数有问题：

```
typedef struct Data1{
float result;
struct Data1* next;

} Data; 

Data* f(Data* info){
    Data item;
    item.result=info->result;
    item.next=info->next;

    return &item; 

} 
```

我在这里注意到两件事：

1.  返回值是一个本地值的指针。然而它仍然是一个指针——编译器给出一个警告：函数返回局部变量的地址。但这真的有问题吗？（我本身不返回本地值）
2.  我相信这里的主要问题是这个函数假设复制数据结构。结果值可以，但是关于“下一个”指针，我相信在函数调用结束时指针不会改变，对吗？这就像在外部函数中均衡两个整数，应该`*(item.next)=*(info->next);`解决问题吗？

那么这里的主要问题是什么？是1和2吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T12:26:54.987

> 返回值是一个本地值的指针。然而它仍然是一个指针——编译器给出一个警告：函数返回局部变量的地址。但这真的有问题吗？（我本身不返回本地值）

这是主要问题。函数返回后，局部变量不再存在。它占用的空间可能会立即或稍后被覆盖，但您不能指望从该地址读取有意义的数据。

如果你想复制东西，你必须返回一个指向`malloc`ed 内存的指针。

```
Data* f(Data* info){
    Data *item = malloc(sizeof *item);
    item->result=info->result;
    item->next=info->next;

    return item; 

} 
```

但这有一个缺点，现在调用者必须`free`使用 分配的内存`f`，所以

```
Data* f(Data* info, Data* item){
    item->result=info->result;
    item->next=info->next;

    return item; 

} 
```

调用者分配的指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T12:26:39.337

返回局部变量指针的问题在于，局部变量占用的空间会在函数返回时被回收，所以指针不再指向有效内存，甚至不再指向后面调用的其他函数使用的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T12:27:56.837

1.  是的，这将是一个问题，因为返回的指针是无用的：它指向一个不再存在的对象。因此发出警告。
2.  不确定我是否遵循您的推理......您没有更改`Data`传入的任何内容，所以如果您期望它会出现问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T12:29:26.977

1) 是的，这是个问题，因为你的指针现在指向你的堆栈上的内容，但不再是托管内存，这意味着另一个函数调用（或中断）将几乎 100% 确定地开始修改那个记忆。

2）我不知道你在这里问什么。

主要问题是您不清楚 C 程序中的内存是如何工作的，这导致了这样的构造；不是叮当，只是一个诚实的观察：[http](http://www.geeksforgeeks.org/archives/14268) ://www.geeksforgeeks.org/archives/14268提供了一个相对较好的概述，应该为您服务。

# android - onTap 如何在 android mapview 中工作

> ID：11560837
> 
> 赞同：1
> 
> 时间：2012-07-19T12:23:58.777
> 
> 标签：android, map

即使地图视图被移动，onTap 监听器如何在 android 地图视图中工作。实际上我正在根据用户方向旋转地图视图。

我从 sesor 经理那里得到了方位角。

如果角度为 0，则 onTap 可以在 Pin 上正常工作。如果角度改变说 20 onTap 不能完全在 pin 上工作，它会在一段时间后在 pin 旁边工作。

我在里面拍摄了旋转视图，我拍摄了地图视图。现在我在轴承更改后旋转旋转视图。

RotateView 设置方位代码

```
 @Override
    protected void dispatchDraw(Canvas canvas) {

        canvas.save(Canvas.MATRIX_SAVE_FLAG);

    //if mHeading is zero its work otherwise onTap position is changing 
        canvas.rotate(mHeading, getWidth()/2, getHeight());

        mCanvas.delegate = canvas;
        super.dispatchDraw(mCanvas);
        canvas.restore();
    } 
```

覆盖类

```
public class SonarOverlay1 extends ItemizedOverlay<OverlayItem>
{
    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
    private Context mContext;
public SonarOverlay1(Drawable defaultMarker,Context context) {
    super(boundCenter(defaultMarker));
    this.mContext=context;

    populate();
}

@Override
protected OverlayItem createItem(int arg0) {

    return  mOverlays.get(arg0);
}
public void addOverlay(OverlayItem item) {
    mOverlays.add(item);
    populate();

}

@Override
public int size() {
//Log.e("overlay size..",""+mOverlays.size());
    return mOverlays.size();
}

@Override
protected boolean onTap(int index) {
    // TODO Auto-generated method stub

      OverlayItem item = mOverlays.get(index);
      AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
      dialog.setTitle(item.getTitle());
      dialog.setMessage(item.getSnippet());
      dialog.show();
      return true;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:41:07.863

看看 MapsDemo 的例子

ANDROID_SDK\add-ons\addon-google_apis-google_inc_-7\samples\MapsDemo。

它有旋转地图演示。

旋转 MapView 的最简单方法

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:31:21.183

在这里，在旋转地图时，我们还必须使用 onDispatchTouch 方法与地图一起旋转触摸事件

见下面的代码

```
@Override
    public boolean dispatchTouchEvent(MotionEvent event) {
        float[] coords = new float[] {
                event.getX(), event.getY()
        };
        adjustCoords(coords, getRotation());
        MotionEvent evt = MotionEvent.obtain(event.getDownTime(), event.getEventTime(), event
                .getAction(), coords[0], coords[1], event.getPressure(), event.getSize(), event
                .getMetaState(), event.getXPrecision(), event.getYPrecision(), event.getDeviceId(),
                event.getEdgeFlags());
        return super.dispatchTouchEvent(evt);
    }
    protected void adjustCoords(float[] coords, float deg) {
        float x = coords[0];
        float y = coords[1];
        int centerX = getWidth() / 2;
        int centerY = getHeight() / 2;
        // convert to radians
        float rad = (float) ((deg * Math.PI) / 180F);
        float s = (float) Math.sin(rad);
        float c = (float) Math.cos(rad);
        // translate point back to origin:
        x -= centerX;
        y -= centerY;
        // apply rotation
        float tmpX = x * c - y * s;
        float tmpY = x * s + y * c;
        x = tmpX;
        y = tmpY;
        // translate point back:
        x += centerX;
        y += centerY;
        coords[0] = x;
        coords[1] = y;
    } 
```

请参考以下链接

[如何在 android sdk 示例中管理 MapViewCompassDemo 中的叠加层](https://stackoverflow.com/questions/11579707/how-to-manage-overlays-in-mapviewcompassdemo-in-android-sdk-samples/11581355#11581355)

# data-visualization - 数据流可视化

> ID：11560838
> 
> 赞同：2
> 
> 时间：2012-07-19T12:24:04.567
> 
> 标签：data-visualization, dataflow

我正在寻找一个可以可视化所有数据流的程序。我做了一个简单的例子： ![在此处输入图像描述](../Images/dfbfc00e57d867a47120db59a509922b.png)

有没有办法可以可视化所有数据。我找到了“Prefuse”和“Flare”的例子。但是要添加到示例中的内容太多了。不是有一个很好的程序吗？

*   当我可以将数据连接到数据库时，它是首选。所以整个过程将是自动化的。
*   当我可以折叠/取消折叠系统和应用程序流程时（例如，当我单击应用程序时，会出现箭头），它是首选。

我希望有人能帮帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:36:39.307

您可以使用 Graphviz (http://www.graphviz.org/) 创建可视化。对于数据库连接，您可以使用编程语言生成 graphviz 程序的输入。我遇到了同样的问题，并结合使用 SAS 和 Graphviz 来解决它。希望有帮助。

# php - 在php中切换到另一个页面时暂停音乐

> ID：11560841
> 
> 赞同：-1
> 
> 时间：2012-07-19T12:24:20.013
> 
> 标签：php, flash

我喜欢在从主页切换到另一个页面时暂停音乐，返回时我们应该像以前一样恢复音乐。当我回到主页时，它应该不需要再次重新启动音乐。

我们正在使用从这个站点找到的 flashplayer：http: [//flashnifties.com/products/nifty-audio-player/documentation/](http://flashnifties.com/products/nifty-audio-player/documentation/)

但是，我们还没有找到任何满足我们需求的脚本。

如果有人有这个问题的解决方案，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:47:30.037

这个问题的关键部分是您正在重新加载页面，这完全重置了其中的 Flash 播放器。你有两个选择：

将您的站点实现为单页应用程序并使用 ajax 刷新内容。这意味着当用户需要更多内容时不会重新加载 Flash 播放器（这是我们在网站上所做的）。

-或者-

使用框架集，在一个框架中加载播放器，在另一个框架中加载网站的其余部分。这是一个糟糕的架构选择......[框架是邪恶的](http://www.google.com/search?q=frames%20evil&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-GB%3aofficial&client=firefox-a)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:41:15.997

看起来你可以暂停一下：

```
audioPlayer.pauseAudio() 
```

我会将此 javascript 添加到更改为新 url（页面）的按钮或对象中。这会监听一个动作并执行

```
document.getElementById('newPageButton').onclick = function() {
    //interact with the flash "audioPlayer.pauseAudio();", cache song time location.
    //go to next page code
} 
```

您可能需要编写自己的动作脚本来保存歌曲暂停的位置。查看文档没有办法确切地看到这首歌是被暂停的。

弄清楚之后，将位置存储在某种缓存中。返回页面时加载该缓存。尽管再次查看文档，但您似乎需要编写一些动作脚本才能在特定时间恢复工作。

这可能不是您希望实现的最佳 Flash 播放器。

# session - Magento 外部脚本和会话

> ID：11560843
> 
> 赞同：0
> 
> 时间：2012-07-19T12:24:42.033
> 
> 标签：session, magento

我想添加一个外部脚本，该脚本通过 GET 检查 ID 获取 sku，然后如果可用则重定向到购物车，否则它会设置错误并重定向到购物车。该脚本是从产品页面调用的：

```
 http://myhost/scripts/addto.php?sku=12345 
```

这是完整的代码

```
 <?php
    include_once '../../../../../app/Mage.php';
    Mage::app();
    $session = Mage::getSingleton('core/session', array('name' => 'frontend'));      
    $sku = $_GET['sku']; 
    if (!isset($_GET['qty'])) { $qty = '1'; } else { $qty = $_GET['qty']; }
    $id = Mage::getModel('catalog/product')->getIdBySku($sku);
    if ($id == '') {
        $id = $sku;
        Mage::getSingleton('checkout/session')->addError("Product not found!");
    } 
```

工作正常，但注销并重新登录后，错误消息丢失。我发现这是因为设置了一个 cookie。删除该 cookie 后，错误消息在重新登录后再次起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:57:03.567

使用`Mage::getSingleton('core/session')->addError("Product not found!");`，也许结帐/会话是用户特定的......

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:34:16.273

什么不起作用？

您注销并登录，然后脚本停止工作？所以找不到会话？找不到产品？产品未加载？用户没有转发？:-)

当然不是。该消息是一个通知。如果显示一次，则将其删除。

你想要什么行为？

# jquery - 计算具有相同 id 的多个 div 位置

> ID：11560851
> 
> 赞同：0
> 
> 时间：2012-07-19T12:25:10.993
> 
> 标签：jquery, position

我有一个小问题。
我有多个具有相同 id 的 div，我想要做的是当我将鼠标悬停在 div 上时，它会扩展高度。但是当它出现时我遇到了问题，它会将其下方的其他 div 向下推。

所以我想到了一个使用 jquery 的解决方案，如果我可以在我将鼠标悬停在它上面时计算当前元素的位置，那么我可以使用这些值并将 div 更改为 position: absolute 与这些值。并在鼠标离开时恢复正常状态。现在的问题是，当我将鼠标悬停在它上面时，它只计算标记中第一个 div 的位置。当我将鼠标悬停在其他人身上时，它不会计算。

我不想为具有不同 ID/类的 div 编号，因为它将是一个自动化系统，其中添加了新的 div 等。

也许可以用另一种方式完成？我对 jquery 很陌生，所以这就是我想出的。

文字墙对不起 D：任何帮助表示赞赏！

标记`

```
<div id="content-element">
        <div class="element-container">
            <div class="top-info">
                <img src="phone-placeholder.png" alt="placeholder" width="65px" height="58px"/>
                <div class="bg-circle"></div>
                <h3>eerste maand</h3>
                <span><h4>&#8364;12.5</h4></span>
                <h3>Daarna</h3>
                <span><h4>&#8364;12.5</h4></span>
            </div>
            <p>Telefoon abonemment met Telefoon</p>
            <p><span>100</span> Bel & SMS <span>500mb</span></p>
            <p><span> Jr</span> telefoon abonnement</p>
            <p>Prijs Telefoon: <span>Gratis</span></p>
            <p>Telefoon abonemment met Telefoon</p>
            <p><span>100</span> Bel & SMS <span>500mb</span></p>
            <p><span> Jr</span> telefoon abonnement</p>
            <p>Prijs Telefoon: <span>Gratis</span></p>
            <p>Telefoon abonemment met Telefoon</p>
            <p><span>100</span> Bel & SMS <span>500mb</span></p>
            <p><span> Jr</span> telefoon abonnement</p>
            <p>Prijs Telefoon: <span>Gratis</span></p>
        </div>
    </div><!-- end content-element-->   
</div><!-- end content-container -->` 
```

jQuery

```
$('#content-element').mouseenter(function () {
        var $positionTop =  $(this).children('.element-container').position().top;
        var $positionLeft = $(this).children('.element-container').position().left;
        console.log($positionTop);
        console.log($positionLeft);
});
$('#content-element').mouseleave(function () {
        var $positionTop =  $(this).children('.element-container').position().top;
        var $positionLeft = $(this).children('.element-container').position().left;
        console.log($positionTop);
        console.log($positionLeft);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:27:42.520

使用 CSS 并设置 position: absolute; 在 div 上

```
#yourDIVid { 
```

位置：绝对；

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:18:42.997

首先，不应有多个具有相同 id 的块。

但是，如果您想选择具有相同 id 的多个 div，您可以使用

```
$('div#content-element') 
OR
$('body').find('#content-element') 
```

# android - ListView onClick 和 onItemSelected

> ID：11560858
> 
> 赞同：3
> 
> 时间：2012-07-19T12:25:38.513
> 
> 标签：android, listview

我通过此[链接](https://stackoverflow.com/questions/2454337/why-is-my-onitemselectedlistener-not-called-in-a-listview)为我的 listView 触发事件。我理解了 的概念`OnItemClickListener`。但我有一个问题。我的 ListView 有一个可绘制的 listSelector。但是，每当我`OnItemClickListener`在单击时将其附加到列表视图时，drawable 就会消失。但是当我附加时`OnItemSelectedListener`，drawable 会保留在相应的选定行中，而`onItemSelected(AdapterView<?> adapter, View view, int position, long id)`不会触发。

关于如何解决这个问题的任何建议？

# xcode - 未找到包含任何钥匙串签名证书的未过期配置文件

> ID：11560862
> 
> 赞同：0
> 
> 时间：2012-07-19T12:25:50.243
> 
> 标签：xcode, certificate, ios-provisioning

我正在制作第二台计算机来开发我的应用程序（2 台具有不同的 IOS 开发人员帐户）。

我 ：

*   从钥匙串中导出人的证书
*   将它们安装在新计算机上
*   将文件从 /Users/old/Library/MobileDevice/Provisioning Profiles 复制粘贴到 /Users/new/Library/MobileDevice/Provisioning Profiles

当我尝试归档应用程序时，

“未找到包含任何钥匙串签名证书的未过期配置文件”

编辑：我看到我没有公钥，所以我已经通过终端（[这个网站](http://www.arlt.eu/blog/2009/12/01/importing-iphone-keys-p12-and-pem-into-snow-leopards-keychain/)）导入了它

但仍然是同样的错误信息！

# android - 获取对象和线的交点？

> ID：11560863
> 
> 赞同：0
> 
> 时间：2012-07-19T12:25:51.600
> 
> 标签：android, opengl-es-2.0, intersection

有谁知道如何在opengl es 2.0中获取线和对象的交点（x，y，z）。我需要基本的算法或链接。我一直在寻找这个答案 2 天，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:50:16.023

为了在嵌入式设备上更快地渲染，请避免使用对象的所有顶点。

最终你必须使用技巧：

1）检测碰撞时，根据您的方便方法开发来近似对象

2）用单点表示物体，检查是否

```
foreach(LINEPOINTS)
  if (MVP * LINEPOINTS).x or .y or .z equals (MVP * objectCentre).x or .y or .z 
```

3）使用单独的方式（你知道的任何其他语言，比如我使用 Perl）来寻找中心，就像

```
count = numofvertices
foreach vertices
    sumx += x;
    sumy += y;
    sumz += z;
centreofmass = {sumx/count, sumy/count, sumz/count} 
```

直接使用这个值作为 private float[] final objectCentre = centerofmass

4）当这可行时，使用更多的顶点（如边缘中心或形状的角），在其他语言中预先计算过，然后如前所述在java应用程序中使用，因为对象将具有大量顶点并且近似并不意味着它看起来不不错，看起来不错，但要花更多时间寻找适合您应用的方式

# r - R 中 CRAN 中所有包的列表和描述

> ID：11560865
> 
> 赞同：8
> 
> 时间：2012-07-19T12:25:53.563
> 
> 标签：r

我可以使用以下功能获取所有可用软件包的列表：

```
ap <- available.packages() 
```

但是我怎样才能从 R 中获取这些包的描述，所以我可以有`data.frame`两列：包和描述？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-19T13:21:26.760

*编辑*一个近十年的公认答案。您可能想要的*不是*刮（除非您想练习刮），而是使用现有界面：`tools::CRAN_package_db()`. 例子：

```
> db <- tools::CRAN_package_db()[, c("Package", "Description")]
> dim(db)
[1] 18978     2
> 
```

该函数带来（当前）66 列，这里感兴趣的是其中的一部分。

* * *

我实际上认为你想要“包”和“标题”作为“描述”可以运行到几行。所以这是前者，如果你*真的*想要“描述”，只需将“描述”放在最后的子集中：

```
R> ## from http://developer.r-project.org/CRAN/Scripts/depends.R and adapted
R>
R> require("tools")
R>
R> getPackagesWithTitle <- function() {
+     contrib.url(getOption("repos")["CRAN"], "source") 
+     description <- sprintf("%s/web/packages/packages.rds", 
+                            getOption("repos")["CRAN"])
+     con <- if(substring(description, 1L, 7L) == "file://") {
+         file(description, "rb")
+     } else {
+         url(description, "rb")
+     }
+     on.exit(close(con))
+     db <- readRDS(gzcon(con))
+     rownames(db) <- NULL
+
+     db[, c("Package", "Title")]
+ }
R>
R>
R> head(getPackagesWithTitle())               # I shortened one Title here...
     Package              Title
[1,] "abc"                "Tools for Approximate Bayesian Computation (ABC)"
[2,] "abcdeFBA"           "ABCDE_FBA: A-Biologist-Can-Do-Everything of Flux ..."
[3,] "abd"                "The Analysis of Biological Data"
[4,] "abind"              "Combine multi-dimensional arrays"
[5,] "abn"                "Data Modelling with Additive Bayesian Networks"
[6,] "AcceptanceSampling" "Creation and evaluation of Acceptance Sampling Plans"
R> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-19T15:24:48.990

Dirk 提供了一个非常棒的答案，在完成我的解决方案然后看到他的解决方案后，我辩论了一段时间发布我的解决方案，因为害怕看起来很傻。但我还是决定发布它，原因有两个：

1.  这对像我这样的新手来说很有帮助
2.  我花了一段时间才做，所以为什么不呢:)

我接近这个想法我需要做一些网络抓取并选择 crantastic 作为要抓取的网站。首先，我将提供代码，然后提供两个对我学习非常有帮助的抓取资源：

```
library(RCurl)
library(XML)

URL <- "http://cran.r-project.org/web/checks/check_summary.html#summary_by_package"
packs <- na.omit(XML::readHTMLTable(doc = URL, which = 2, header = T, 
    strip.white = T, as.is = FALSE, sep = ",", na.strings = c("999", 
        "NA", " "))[, 1])
Trim <- function(x) {
    gsub("^\\s+|\\s+$", "", x)
}
packs <- unique(Trim(packs))
u1 <- "http://crantastic.org/packages/"
len.samps <- 10 #for demo purpose; use:
#len.samps <- length(packs) # for all of them
URL2 <- paste0(u1, packs[seq_len(len.samps)]) 
scraper <- function(urls){ #function to grab description
    doc   <- htmlTreeParse(urls, useInternalNodes=TRUE)
    nodes <- getNodeSet(doc, "//p")[[3]]
    return(nodes)
}
info <- sapply(seq_along(URL2), function(i) try(scraper(URL2[i]), TRUE))
info2 <- sapply(info, function(x) { #replace errors with NA
        if(class(x)[1] != "XMLInternalElementNode"){
            NA
        } else {
            Trim(gsub("\\s+", " ", xmlValue(x)))
        }
    }
)
pack_n_desc <- data.frame(package=packs[seq_len(len.samps)], 
    description=info2) #make a dataframe of it all 
```

**资源：**

1.  [talkstats.com 关于网络抓取的帖子（很好的初学者示例）](http://www.talkstats.com/showthread.php/26153-Still-trying-to-learn-to-scrape)
2.  [w3schools.com 网站上的 html 内容（非常有帮助）](http://www.w3schools.com/xpath/xpath_nodes.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-07T17:42:26.950

我想尝试使用 HTML 刮板（[rvest](https://cran.r-project.org/web/packages/rvest/index.html)）作为练习，因为`available.packages()`in OP 不包含包*Descriptions*。

```
library('rvest')
url <- 'https://cloud.r-project.org/web/packages/available_packages_by_name.html'
webpage <- read_html(url)
data_html <- html_nodes(webpage,'tr td')
length(data_html)

P1 <- html_nodes(webpage,'td:nth-child(1)') %>% html_text(trim=TRUE)  # XML: The Package Name
P2 <- html_nodes(webpage,'td:nth-child(2)') %>% html_text(trim=TRUE)  # XML: The Description
P1 <- P1[lengths(P1) > 0 & P1 != ""]  # Remove NULL and empty ("") items
length(P1); length(P2);

mdf <- data.frame(P1, P2, row.names=NULL)
colnames(mdf) <- c("PackageName", "Description")

# This is the problem! It lists large sets column-by-column,
# instead of row-by-row. Try with the full list to see what happens.
print(mdf, right=FALSE, row.names=FALSE)

# PackageName Description                                                             
# A3          Accurate, Adaptable, and Accessible Error Metrics for Predictive\nModels
# abbyyR      Access to Abbyy Optical Character Recognition (OCR) API                 
# abc         Tools for Approximate Bayesian Computation (ABC)                        
# abc.data    Data Only: Tools for Approximate Bayesian Computation (ABC)             
# ABC.RAP     Array Based CpG Region Analysis Pipeline                                
# ABCanalysis Computed ABC Analysis

# For small sets we can use either:
# mdf[1:6,] #or# head(mdf, 6) 
```

但是，尽管对于小型数组/数据框列表（子集）工作得很好，但我遇到了完整列表的显示问题，其中数据将*逐列*显示或未对齐。如果能以某种方式在新窗口中*分页*并正确格式化，我会很高兴。我尝试使用*page*，但我无法让它很好地工作。

* * *

**编辑：** 推荐的方法不是上面的，而是使用 Dirk 的建议（来自下面的评论）：

```
db <- tools::CRAN_package_db()
colnames(db)
mdf <- data.frame(db[,1], db[,52])
colnames(mdf) <- c("Package", "Description")
print(mdf, right=FALSE, row.names=FALSE) 
```

但是，这仍然受到提到的显示问题的影响......

# windows-phone-7 - 在 Application_Deactivated 上更新 LiveTile 是一个好习惯吗？

> ID：11560866
> 
> 赞同：0
> 
> 时间：2012-07-19T12:25:53.940
> 
> 标签：windows-phone-7, comexception, live-tile

我没有使用后台代理来更新 LiveTiles。我在退出应用程序时更新磁贴并在`Application_Deactivated`.

```
private void Application_Deactivated(object sender, DeactivatedEventArgs e)
    {
        CycleManager pCycMan = CycleManager.Instance;
        pCycMan.WriteToIsolatedStorage();

        ResourceManager resMan = new ResourceManager("xxx.AppResources", Assembly.GetExecutingAssembly());

        ShellTile PrimaryTile = ShellTile.ActiveTiles.First();
        StandardTileData tile = new StandardTileData();

        try
        {
            if (PrimaryTile != null)
            {
                tile.BackTitle = resMan.GetString("liveTileTitle");
                tile.BackBackgroundImage = new Uri("/Background.png", UriKind.Relative);

                if (pCycMan.GetStartDate() == pCycMan.GetDefaultDate())
                {
                    tile.Title = resMan.GetString("liveTileNotTrackingStatus");
                }
                else
                {
                    tile.Title = m_liveTileText;
                }

                PrimaryTile.Update(tile);
            }
        }
        catch(Exception)
        {
        }
    } 
```

这样做是一个好习惯吗？该应用程序已发布，并且我收到了带有 COMException 的 StackTrace。它表明在执行`Microsoft.Phone.Shell.ShellTile.Update`之后引发了异常`XXX.App.Application_Deactivated`

有谁知道这个例外或面临这种情况？如果有人可以指导我这将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:23:03.863

引发[`Application_Deactivated`](http://msdn.microsoft.com/en-us/library/ff967547%28v=vs.92%29.aspx)事件后，您有 10 秒的时间完成任务。之后，您的申请将被终止。

因此，崩溃的发生可能是因为您的代码需要 10 多秒才能完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-27T01:08:28.810

我曾经在 Application_Deactivated 中更新 livetile，但这会导致恢复问题，因此我删除了该功能。

其他人在不同的区域发现了相同的问题和更新： [http ://www.japf.fr/2012/12/updating-the-live-tiles-when-the-exits-wp8-weirdness/](http://www.japf.fr/2012/12/updating-the-live-tiles-when-the-exits-wp8-weirdness/)

# php - PHP将“未定义”变量返回到闪存

> ID：11560872
> 
> 赞同：1
> 
> 时间：2012-07-19T12:26:01.633
> 
> 标签：php, flash, variables, undefined

我不知道出了什么问题，但是在我登录的那一刻，我希望它显示我登录时使用的 hello + 用户名。但目前它只显示 Helloundefined

这是我的闪存代码：

```
var myurl2:String = "http://localhost:8888/storyboards/check_auth.php";

var scriptLoader2:URLLoader = new URLLoader();
var scriptRequest2:URLRequest = new URLRequest();

scriptRequest2.url = myurl2+"?ck=" + new Date().getTime();

scriptLoader2.addEventListener(Event.COMPLETE, handleLoadSuccess2);
scriptLoader2.addEventListener(IOErrorEvent.IO_ERROR, handleError2);

// turn off right click so that user cannot control the movie
stage.showDefaultContextMenu = false;

scriptRequest2.method = URLRequestMethod.POST;
scriptLoader2.load(scriptRequest2);

function handleLoadSuccess2(evt:Event):void
{

    var variables2:URLVariables = new URLVariables( evt.target.data );

    for (var prop in variables2) {

        trace(prop+" is: "+variables2[prop]);
    }

    if (variables2.authenticated == "y") {
    // if login details OK, load protected page
        nextFrame();

        display_txt.text ="Hello" + variables2.username;
    } else {
    // if login details OK, load protected page
        var url:String = "http://localhost:8888/storyboards/login.html";
        var request2:URLRequest = new URLRequest(url);

        try {
            navigateToURL(request2, '_self'); // second argument is target
            } catch (e:Error) {
            trace("Error occurred!");
            }
}

}

function handleError2(evt:IOErrorEvent):void
{
} 
```

停止（）;

//-----------------这是我的 process_login.php 的 php 代码------------------ -//

```
<?php

$host = 'localhost';
$user = 'root';
$password = 'root';

// check correct variables have been received through the POST array
if (isset($_POST['username']) && isset($_POST['pwd'])){

session_start();

// base url
$baseURL = 'http://localhost:8888/storyboards/';

// include info for db connection
//require_once("connection.php");

// escape quotes
if (!get_magic_quotes_gpc()) {
    foreach($_POST as $key => $value) {
        $temp = addslashes($value);
        $_POST[$key] = $temp;
    }
}

// connect to mysql
$connection = mysql_connect($host, $user, $password) ;

if (!$connection) {
    echo '&error=' . mysql_error() . '&';
    die('Could not connect ' . mysql_error());
}

//echo 'Connected successfully.';

// connect to db
$database = 'registerform';

$db = mysql_select_db($database, $connection);

if (!$db) {
    echo '&error=' . mysql_error() . '&';
    die ('Not connected : ' . mysql_error());
}

//echo 'Selected successfully.';

// query
$query = 'SELECT user_name, pwd FROM users WHERE user_name = "' . $_POST['username'] . '" AND pwd = "' . sha1($_POST['pwd']) . '"';

$result = mysql_query($query, $connection);

if (!$result) {
    echo '&error=' . mysql_error() . '&';
    die ('Invalid query: ' . mysql_error());
}

// count the number of records
$numrows = mysql_num_rows($result);

if ($numrows > 0) {

    $_SESSION['authenticated'] = $_POST['username'];

    echo 'authenticated=y' . '&page=' .'pass.php&user_name='.$_SESSION['authenticated'];
} else {
    echo 'authenticated=n&error=' . urlencode('Sorry, access denied.');
}

}

?>

//-----------and my php code for check_auth.php----//

<?php
    // access to the current session
    session_start();

    $_SESSION['username'] = $_POST['username'];

// if session variable authenticated is not set
if (!isset($_SESSION['authenticated'])) {
    echo 'authenticated=n';
} else {
    echo 'authenticated=y';
}
?> 
```

上面的代码中是否有我出错的地方？有人可以帮我吗:(

# javascript - ExtJS FormPanel 与文件上传旁边的图像缩略图

> ID：11560873
> 
> 赞同：2
> 
> 时间：2012-07-19T12:26:02.177
> 
> 标签：javascript, extjs

我有一个 FormPanel，它基本上由 FileUpload 组成。我要做的是：编辑时，在文件上传字段的右侧显示已上传图像的缩略图。我的物品如下所示：

```
items = [
{
    allowBlank: false,
    fieldLabel: 'Icon',
    hidden: true,
    name: 'Icon',
    ref: 'IconField',
    xtype: 'Ext.ux.form.FileUploadField'
},
{
    ref: 'PreviewImage',
}; 
```

我需要做两件事：

*   将图像加载到“PreviewImage”组件中，我会通过类似`this['PreviewImage'].update('<img src="image.png" />');`这样的方法来做到这一点这是最好的方法吗？

*   让图像浮动到上传字段的右侧。我不确定最好的方法是什么？我曾想过将这两个元素都放在一个面板中，但同样，我不知道最好的方法是什么？

任何想法都非常受欢迎！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T17:04:19.820

您需要决定是否要支持旧浏览器。

如果这样做，您必须将表单提交到服务器（上传图像），并让服务器返回图像的 url，然后将其设置为图像的 src。这是通过隐藏的 IFrame 完成的，因此不会刷新页面。

现代的 HTML5 方法是在上传之前使用 FileReader api 读取图像并将其设置为图像的 src（作为 dataurl），然后使用 XmlHttpRequest Level 2 上传。使用 FormData 类。

要获取文件字段旁边的图像，您可以使用列或 hbox 布局。这为你做漂浮。

# android - 启用滚动时调用 `getDrawingCache` 返回 null

> ID：11560882
> 
> 赞同：6
> 
> 时间：2012-07-19T12:26:34.297
> 
> 标签：android, view, drawingcache

这段代码缺少什么？相同的代码适用于 ICS。在 API 8 上会出现滚动，并且某些内容会超出屏幕。在这种情况下如何获取绘图缓存？

代码：

```
TableLayout page = (TableLayout) findViewById(R.id.page);
page.setDrawingCacheEnabled(true);
page.buildDrawingCache();

// getDrawingCache returns null...
Bitmap pageBmp = Bitmap.createBitmap(page.getDrawingCache(true));
page.destroyDrawingCache();
page.setDrawingCacheEnabled(false); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-19T13:05:50.600

我解决了。创建视图大小的位图并将视图绘制到其中。

```
TableLayout page = (TableLayout) findViewById(R.id.page);
Bitmap pageBmp = Bitmap.createBitmap(page.getWidth(), page.getHeight(), 
                                       Config.ARGB_8888);
Canvas canvas = new Canvas(pageBmp);
page.draw(canvas); 
```

用了`pageBmp`位图。。

# javascript - Drupal 7 jQuery drupal 行为问题

> ID：11560883
> 
> 赞同：1
> 
> 时间：2012-07-19T12:26:36.547
> 
> 标签：javascript, jquery, drupal-7

我一直试图将在 d6 中完美运行的 javascript 文件转换为 d7，我一直在搜索有关 drupal 行为的信息，但似乎找不到解决此问题的正确方法。

以下脚本为 (jQuery) 之前的右括号返回了一个意外的标记错误 )。

```
(function($){

var VAT = 0.2;
var QUANTITY_SUFFIX = "field-po-quantity";
var PRICE_SUFFIX = "field-po-price";
var SUBTOTAL_SUFFIX = "field-po-item-st";
var VAT_SUFFIX = "field-po-item-vat";
var TOTAL_SUFFIX = "field-po-item-total";

var quantityFields;
var priceFields;
var fieldsValid = false;

function isNumber(value) {
  return    !isNaN(parseFloat(value)) &&
        isFinite(value);
}

function validValue(value) {
  return    isNumber(value) &&
      parseFloat(value) > 0;
}

function addCommas(nStr) {
  nStr += '';
  var x = nStr.split('.');
  var x1 = x[0];
  var x2 = x.length > 1 ? '.' + x[1] : '';
  var rgx = /(\d+)(\d{3})/;
  while (rgx.test(x1)) {
    x1 = x1.replace(rgx, '$1' + ',' + '$2');
  }
return x1 + x2;
}   

function decimalise(value) {
  if (isNumber(value)) {
    var numericValue = parseFloat(value);
    return numericValue.toFixed(2);
  }
}

function validateFields() {
  var fieldsValid = true;
  var allFields = new Array();

  quantityFields = jQuery('input[id*="' + QUANTITY_SUFFIX + '"]');
  priceFields = jQuery('input[id*="' + PRICE_SUFFIX + '"]');

  allFields.push.apply(allFields, quantityFields);
  allFields.push.apply(allFields, priceFields);

  for (i=0; i<allFields.length; i++) {
    var field = allFields[i];
    var valueString = field.value;
    if (!validValue(valueString)) {
      field.style.borderStyle="solid";
      field.style.border="inset 1px red";
      fieldsValid = false;
    } else {
      field.style.borderStyle="none";
    }
  }
  this.fieldsValid = fieldsValid;
}

jQuery(document).click(function() {
  validateFields();
  if (fieldsValid) {
    var subTotalSum = 0;
    var vatSum = 0;
    var totalSum = 0;
    jQuery('#field-po-items-values tbody tr:not(.content-multiple-removed-row)').each(function(){
      var quantityString = jQuery(this).find('input[id*="' + QUANTITY_SUFFIX + '"]').val();
      var numericQuantity = decimalise(quantityString);
      var priceString = jQuery(this).find('input[id*="' + PRICE_SUFFIX + '"]').val();
      var numericPrice = decimalise(priceString);
      var subtotal = parseFloat(numericPrice * numericQuantity);
      jQuery(this).find('input[id*="' + SUBTOTAL_SUFFIX + '"]').val(addCommas(decimalise(subtotal)));
      var vat = subtotal * VAT;
      jQuery(this).find('input[id*="' + VAT_SUFFIX + '"]').val(addCommas(decimalise(vat)));
      var total = subtotal + vat;
      jQuery(this).find('input[id*="' + TOTAL_SUFFIX + '"]').val(addCommas(decimalise(total)));
      subTotalSum += subtotal;
      vatSum += vat;
      totalSum += parseFloat(total);
    });
    jQuery('input[id*="edit-field-po-subtotal"]').val(addCommas(decimalise(subTotalSum)));
    jQuery('input[id*="edit-field-po-vat"]').val(addCommas(decimalise(vatSum)));
    jQuery('input[id*="edit-field-po-total"]').val(addCommas(decimalise(totalSum)));
  }
}

})(jQuery); 
```

该文件是从 template.php 调用的，使用插入文件顶部的 drupal_add_js，而不是在预处理或任何东西下。

我知道 jQuery(document).click(function() { 也可能导致问题，最终可能是意外令牌错误的原因？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:02:23.733

我不知道你的代码是否正确，但强烈建议在 Drupal>7 中这样使用 JavaScript：

```
(function ($) {
    Drupal.behaviors.yourFunction = {
        attach: function(context, settings) {

            var VAT = 0.2;
            var QUANTITY_SUFFIX = "field-po-quantity";
            var PRICE_SUFFIX = "field-po-price";
            var SUBTOTAL_SUFFIX = "field-po-item-st";
            var VAT_SUFFIX = "field-po-item-vat";
            var TOTAL_SUFFIX = "field-po-item-total";

            var quantityFields;
            var priceFields;
            var fieldsValid = false;

            function isNumber(value) {
                return    !isNaN(parseFloat(value)) &&
                    isFinite(value);
            }

            function validValue(value) {
                return    isNumber(value) &&
                    parseFloat(value) > 0;
            }

            function addCommas(nStr) {
                nStr += '';
                var x = nStr.split('.');
                var x1 = x[0];
                var x2 = x.length > 1 ? '.' + x[1] : '';
                var rgx = /(\d+)(\d{3})/;
                while (rgx.test(x1)) {
                    x1 = x1.replace(rgx, '$1' + ',' + '$2');
                }
                return x1 + x2;
            }

            function decimalise(value) {
                if (isNumber(value)) {
                    var numericValue = parseFloat(value);
                    return numericValue.toFixed(2);
                }
            }

            function validateFields() {
                var fieldsValid = true;
                var allFields = new Array();

                quantityFields = $('input[id*="' + QUANTITY_SUFFIX + '"]');
                priceFields = $('input[id*="' + PRICE_SUFFIX + '"]');

                allFields.push.apply(allFields, quantityFields);
                allFields.push.apply(allFields, priceFields);

                for (i=0; i<allFields.length; i++) {
                    var field = allFields[i];
                    var valueString = field.value;
                    if (!validValue(valueString)) {
                        field.style.borderStyle="solid";
                        field.style.border="inset 1px red";
                        fieldsValid = false;
                    } else {
                        field.style.borderStyle="none";
                    }
                }
                this.fieldsValid = fieldsValid;
            }

            $(document).click(function() {
                validateFields();
                if (fieldsValid) {
                    var subTotalSum = 0;
                    var vatSum = 0;
                    var totalSum = 0;
                    $('#field-po-items-values tbody tr:not(.content-multiple-removed-row)').each(function(){
                        var quantityString = $(this).find('input[id*="' + QUANTITY_SUFFIX + '"]').val();
                        var numericQuantity = decimalise(quantityString);
                        var priceString = $(this).find('input[id*="' + PRICE_SUFFIX + '"]').val();
                        var numericPrice = decimalise(priceString);
                        var subtotal = parseFloat(numericPrice * numericQuantity);
                        $(this).find('input[id*="' + SUBTOTAL_SUFFIX + '"]').val(addCommas(decimalise(subtotal)));
                        var vat = subtotal * VAT;
                        $(this).find('input[id*="' + VAT_SUFFIX + '"]').val(addCommas(decimalise(vat)));
                        var total = subtotal + vat;
                        $(this).find('input[id*="' + TOTAL_SUFFIX + '"]').val(addCommas(decimalise(total)));
                        subTotalSum += subtotal;
                        vatSum += vat;
                        totalSum += parseFloat(total);
                    });
                    $('input[id*="edit-field-po-subtotal"]').val(addCommas(decimalise(subTotalSum)));
                    $('input[id*="edit-field-po-vat"]').val(addCommas(decimalise(vatSum)));
                    $('input[id*="edit-field-po-total"]').val(addCommas(decimalise(totalSum)));
                }
            }

        }
    };
})(jQuery); 
```

有关 Drupal 行为的更多信息：

*   [Drupal 行为](https://stackoverflow.com/questions/3941426/drupal-behaviours)

*   [主题、jQuery、DRupal 行为](http://mydrupalblog.lhmdesign.com/drupal-theming-jquery-basics-inc-drupal-behaviors)

# c# - 将文本文件拆分为较小的文件

> ID：11560888
> 
> 赞同：0
> 
> 时间：2012-07-19T12:26:50.930
> 
> 标签：c#

我有一个 1000 000 条记录的文本文件，所以我想将文件分成许多文件，每个文件有 100 条记录。这是我使用 listbox1 来控制文件的代码。该代码正在运行，但丢失的记录较少。

```
private void WriteToFile()
    {
        int RowCount = listBox1.Items.Count;
        string FileName = "C:\\Users\\bbdnet0986\\Documents\\MyExpotedQADATA";
        StreamWriter sw = new StreamWriter(FileName + ".txt");
        int inc = 0;
        int counter = 0;
        //StreamWriter sw = new StreamWriter(FileName+inc + ".txt");
        for (int i = 0; i < listBox1.Items.Count; i++)
        {
             sw.WriteLine(listBox1.Items[i].ToString());
             string me = listBox1.Items[i].ToString();

             if (RowCount > 100)
             {

                 listBox2.Items.Add(listBox1.Items[counter].ToString());
                 counter++;
                 if (counter == 100)
                 {

                     inc++;
                     sw = new StreamWriter(FileName + inc + ".txt");

                     RowCount = RowCount - counter;
                     counter = 0;

                 }
             }

             else
             {
                  sw.WriteLine(listBox1.Items[i].ToString());
             }

         }
         sw.Close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:45:41.457

在这一行：

```
sw = new StreamWriter(FileName + inc + ".txt"); 
```

您需要 .Flush() 前一个 sw。写入器已缓冲，这就是缺少某些记录的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:46:22.060

我不确定您的问题与您的问题有何关系`ListBox`，因此我将向您展示一个解决方案，该解决方案每 100 行从一个大文件创建文件。

`Linq`使用and很容易[`Enumerable.GroupBy`](http://msdn.microsoft.com/en-us/library/bb534501.aspx)：

```
int maxLineCount = 100;
FileInfo file = new FileInfo(hugeFilePath);

var fileGroups = File.ReadLines(file.FullName)
    .Select((l, i) => new { Line = l, Index = i })
    .GroupBy(x => x.Index / maxLineCount)
    .Select(grp => new { FileIndex = grp.Key, Lines = grp.Select(x => x.Line)});

foreach (var grp in fileGroups)
{
    var fileName = "File" + grp.FileIndex;
    var path = Path.Combine(@"C:\Temp\Test", fileName + file.Extension).ToString();
    File.WriteAllLines(path, grp.Lines);
} 
```

请注意，`File.ReadLines`流式传输行而不是将所有行加载到内存中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:55:50.737

这是一个更简单的方法：

```
private void WriteToFile() 
{ 
    // get an array of strings - you'll find out way :)
    string[] items = listBox1.Items.Cast<string>().ToArray();

    // this would also work with ReadAllLines()
    string[] items = File.ReadAllLines("Your original file");

    // path + filename prefix
    string fileNamePattern = "C:\\Users\\bbdnet0986\\Documents\\MyExpotedQADATA{0}.txt"; 

    // blocks of 100
    string[] buffer;
    for(int i = 0; i < items.Length; i += 100)
    {
        // slice the string array into 100 string blocks
        buffer = items.Slice(i, 100);

        // output the block of strings
        File.WriteAllLines(string.Format(fileNamePattern, i), buffer);
    }
} 
```

切片扩展：

```
 public static T[] Slice<T>(this T[] source, int index, int length)
    {
        T[] slice = new T[length];
        Array.Copy(source, index, slice, 0, length);
        return slice;
    } 
```

# quickfix - FIX 协议序号

> ID：11560895
> 
> 赞同：1
> 
> 时间：2012-07-19T12:27:01.487
> 
> 标签：quickfix, fix-protocol

我对 FIX 协议序列号有几个问题：

1.  设置 ResetOnLogon=N 有什么好处？
2.  发起者和接受者都可以发送重发请求吗？
3.  消息序列如何帮助会话恢复/错误处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:43:11.153

1.  *ResetOnLogon*确定在接收登录请求时是否应重置序列号。（请在此处查找文档：[http](http://www.quickfixengine.org/quickfix/doc/html/configuration.html) ://www.quickfixengine.org/quickfix/doc/html/configuration.html ）

2.  是的，双方都可以发送重新发送请求，但您必须遵守您方和对方之间的规范。

3.  消息序列号表明在当前会话期间没有丢失任何消息。如果存在不匹配，则必须采取措施以在两侧之间建立正确的同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T12:36:35.070

1.  这意味着序列号由登录消息上的协议重置。这使序列号保持在较低水平，这很有用。卖方通常定义是否应该这样做。
2.  是的，只要引擎认为，由于序列号不同步，消息可能已经丢失，它可能会请求重新发送。
3.  如果消息与其前身之间的序列号不同步，并且序列号高于预期，那么引擎可能会假设某些消息在连接中丢失。这意味着它需要恢复这些测量值。

如果您还有任何问题或想了解更多信息，我很乐意回复。

# iphone - 滚动表格视图时出现异常

> ID：11560900
> 
> 赞同：0
> 
> 时间：2012-07-19T12:27:14.410
> 
> 标签：iphone, objective-c, ios

我有自定义单元格的表格视图。我在表格视图上有 100 张图像。当我运行应用程序时，所有图像都会加载到表格视图中。我也可以从上到下滚动到第 100 个元素。但是在从底部滚动到固定元素中间某处得到以下异常时：

```
 *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle </Users/bc/Library/Application Support/iPhone Simulator/5.1/Applications/B5090983-ACC0-4428-9741-255B7D72F674/ImageCaching.app> (loaded)' with name 'CustomCell''
*** First throw call stack:
(0x159b022 0x172ccd6 0x1543a48 0x15439b9 0x2fd638 0x2feeb7 0x33b7 0x176c54 0x1773ce 0x162c04 0x1716f1 0x11ad42 0x159ce42 0x1f53679 0x1f5d579 0x1ee24f7 0x1ee43f6 0x1f7f1ce 0x1f7f003 0x156f936 0x156f3d7 0x14d2790 0x14d1d84 0x14d1c9b 0x14847d8 0x148488a 0xdc626 0x298d 0x28f5)
terminate called throwing an exception(lldb) 
```

我有以下表格视图代码：

```
 NSArray *objects=[[NSBundle mainBundle]loadNibNamed:@"CustomCell" owner:self options:nil];
    NSLog(@"count =%d" ,[objects count]);
    CustomCell *cell=[objects objectAtIndex:0];
    Resource *r=[setUpArray objectAtIndex:indexPath.row];
       cell.cellImage.image=[UIImage imageWithContentsOfFile:[library getResource:r.key]]; 
```

我正在准确加载自定义单元格的笔尖名称。请给我一些解决方案。

# android - 选择设备后 Android DDMS 工具挂起

> ID：11560901
> 
> 赞同：5
> 
> 时间：2012-07-19T12:27:29.523
> 
> 标签：android, ddms

在 linux 上，我运行了一个 Android ARM 模拟器。我想查看日志输出，所以我在命令行上启动了 ddms。ddms 打开后，我选择了设备。然后在两三秒后 DDMS 冻结。只有在我选择设备后它才会冻结。

有人知道这里有什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:39:43.930

DDMS 现在已弃用，因为它的输出显示：

> DDMS 的独立版本已弃用。请改用 Android 设备监视器（工具/监视器）。

改用`monitor`工具。而且，正如@Chris Stratton 所说，您始终可以将 logcat 作为独立工具或作为 IDE 的一部分使用（Eclipse 和 IntelliJ Idea 支持它）。

# c - 将模块移植到较新的 Linux 内核：无法分配内存

> ID：11560902
> 
> 赞同：5
> 
> 时间：2012-07-19T12:27:29.740
> 
> 标签：c, linux-kernel, kernel, vmalloc, insmod

我有一个相当大的驱动程序模块，我正在尝试为最近的 Linux 内核（3.4.4）编译。我可以`insmod`使用 2.6.27.25 内核成功编译和相同的模块。GCC 版本也不同，4.7.0 和 4.3.0。请注意，这个模块非常复杂，我不能简单地浏览所有代码和所有 makefile。

当“插入”模块时，我得到一个`Cannot allocate memory`带有以下痕迹的：

```
vmap allocation for size 30248960 failed: use vmalloc=<size> to increase size.
vmalloc: allocation failure: 30243566 bytes
insmod: page allocation failure: order:0, mode:0xd2
Pid: 5840, comm: insmod Tainted: G           O 3.4.4-5.fc17.i686 #1
Call Trace:
 [<c092702a>] ? printk+0x2d/0x2f
 [<c04eff8d>] warn_alloc_failed+0xad/0xf0
 [<c05178d9>] __vmalloc_node_range+0x169/0x1d0
 [<c0517994>] __vmalloc_node+0x54/0x60
 [<c0490825>] ? sys_init_module+0x65/0x1d80
 [<c0517a60>] vmalloc+0x30/0x40
 [<c0490825>] ? sys_init_module+0x65/0x1d80
 [<c0490825>] sys_init_module+0x65/0x1d80
 [<c050cda6>] ? handle_mm_fault+0xf6/0x1d0
 [<c0932b30>] ? spurious_fault+0xae/0xae
 [<c0932ce7>] ? do_page_fault+0x1b7/0x450
 [<c093665f>] sysenter_do_call+0x12/0x28
-- clip -- 
```

显而易见的答案似乎是该模块分配了太多内存，但是：

*   我对旧内核版本没有问题，这个模块的大小是多少
*   如果我修剪该模块的某些部分以获得更低的内存消耗，我将始终收到与新内核相同的错误消息
*   我可以卸载许多其他模块，但它没有影响（它是否仍然相关？Linux 是否存在关于模块总内存使用量的全局限制）

因此，我怀疑新内核的问题与有限的内存没有直接关系。

新内核抱怨 a`vmalloc()`为 30,000 KB，但对于旧内核，lsmod 给我的大小为 4,800 KB。这些数字应该直接相关吗？是否有可能在构建过程中出现问题并且请求的 RAM 过多？当我编译两者的部分大小时`.ko`，我看不出有很大的差异。

所以我试图了解问题出在哪里。当我检查转储堆栈时，我找不到匹配的代码。似乎故障`vmalloc()`是由 完成的`sys_init_module()`，它`init_module()`来自`kernel/module.c`。但是代码不匹配。当我检查我的目标代码时`.ko`，`init_module()`代码也不匹配。

我或多或少被阻塞了，因为我对内核不够了解，而且所有的构建系统和模块加载都很难理解。该错误发生在模块加载之前，因为我怀疑某些功能丢失并且`insmod`此时不报告这些错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T13:14:09.903

我相信分配是在 中完成的[`layout_and_allocate`](http://lxr.linux.no/linux+v3.4.5/+code=layout_and_allocate)，由`load_module`. 两者都是静态函数，因此它们可能是内联的，因此不在堆栈中。
因此，这不是由您的代码完成的分配，而是由 Linux 为加载您的代码而完成的分配。

如果你的旧内核是 4.8MB，而新内核是 30MB，就可以解释为什么会失败。
所以问题是为什么它这么大。

大小可能是由于代码量（不太可能增长这么多）或静态分配的数据。
一个可能的解释是你有一个很大的静态分配数组，它的大小在 Linux 中定义。如果大小显着增长，您的数组将会增长。
一个猜测 - 一个大小为 的数组`NR_CPUS`。

您应该能够使用诸如`nm`或之类的命令`objdump`来查找这样的数组。但是，我不确定该怎么做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T11:58:29.100

问题实际上是由于模块中的调试部分造成的。旧内核能够忽略这些部分，但新内核将它们计入要分配的总大小。但是，当`pr_debug()`在加载时启用来自 module.c 的跟踪时，这些部分不会与其他部分一起转储。

如何摆脱它们并解决问题：

```
objcopy -R .debug_aranges \
    -R .debug_info \
    -R .debug_abbrev \
    -R .debug_line \
    -R .debug_frame \
    -R .debug_str \
    -R .debug_loc \
    -R .debug_ranges \
    orignal.ko new.ko 
```

该项目的特定构建文件也可能为旧内核版本添加了“量身定制”的调试信息，但是在尝试使用虚拟模块时，我发现附加了完全相同类型的调试部分，所以我宁愿怀疑一些关于内核或 Fedora 中模块管理的政策变更。

欢迎提供有关这些更改的任何信息。

# c++ - 向量内存分配策略

> ID：11560904
> 
> 赞同：11
> 
> 时间：2012-07-19T12:27:31.720
> 
> 标签：c++, memory-management, vector

我写了一小段代码来确定如何在向量中分配内存。

```
#include <iostream>
#include <vector>
using namespace std;
int main ()
{
  vector<unsigned int> myvector;
  unsigned int capacity = myvector.capacity();

  for(unsigned int i = 0; i <  100000; ++i) {
    myvector.push_back(i);
    if(capacity != myvector.capacity())
    {
      capacity = myvector.capacity();
      cout << myvector.capacity() << endl;
    }
  }
  return 0;
} 
```

我在 Ubuntu 上使用 Visual Studio 2008 和 g++ 4.5.2 进行了编译，得到了以下结果：

**视觉工作室：**

1 2 3 4 6 9 13 19 28 42 63 94 141 211 316 474 711 1066 1599 2398 3597 5395 8092 12138 18207 27310 40965 61447 92170 138255

```
capacity = capacity * 1.5; 
```

**克++：**

1 2 4 8 16 32 64 128 256 512 1024 2048 4096 8192 16384 32768 65536 131072

```
capacity = capacity * 2; 
```

如您所见，这是两个截然不同的结果。为什么会这样？它仅取决于编译器还是沉迷于其他因素？

即使对于大量元素，继续将容量翻倍真的有意义吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T12:28:56.573

增长的方式`vector`是由实现定义的。因此可以使用不同的策略，从而在插入相同数量的元素后产生不同的容量

如果您需要依赖分配了多少项目，您应该使用`reserve`和/或`resize`方法`vector`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T12:31:29.190

正如你所看到的，VS 用更小的块添加额外的空间，而 G++ 我是通过 2 的幂来实现的。这只是相同基本思想的实现：你添加的元素越多，下次分配的空间就越多（因为您更有可能添加其他数据）。

想象一下，您向向量添加了 1 个元素，而我添加了 1000。很有可能会再添加 1000，而您不太可能会添加。这就是这种空间分配策略的原因。

确切的数字肯定取决于某些东西，但这是编译器制造商的推理，因为他们可以以任何他们想要的方式实现它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T12:34:26.103

该标准仅定义向量的行为。内部真正发生的事情取决于实现。将容量加倍会导致推/弹出 n 个元素的摊销 O(n) 成本，我猜这是向量所必需的。[在这里](http://en.wikipedia.org/wiki/Dynamic_array)查看更多详细信息。

# asp.net-mvc - 如何将 Select 添加到现有的 Linq 表达式

> ID：11560905
> 
> 赞同：0
> 
> 时间：2012-07-19T12:27:34.530
> 
> 标签：asp.net-mvc, linq, linq-expressions

我正在尝试制作一个可编辑的表格。我有一个动态表，可以使列可见或不可见。我有一个带有编辑按钮的额外列。当我点击它时，我会进行 Ajax 调用以获取该行的可编辑版本。

我的视图模型：

```
public class List: IDynamicGridDataModel<View>
{
    public List()
    {
        ColumnOptions = new ColumnOptions();
        ColumnOptions.SelectedColumns = new List<string>() { "Address", "ZipCode", "City", "Country" };
        ColumnOptions.DisabledColumns = new List<string>() { "Id" };

        Items = new List<View>();
    }

    #region IDynamicGridDataModel<View> Members

    public ColumnOptions ColumnOptions { get; set; }
    public GridModel<View> GridModel { get; set; }
    public IEnumerable<View> Items { get; set; }

    #endregion
} 
```

物品在哪里：

```
public class View
{
    public long Id { get; set; }
    public string Address { get; set; }
    public string ZipCode { get; set; }
    public string City { get; set; }
    public string Country { get; set; }
} 
```

我有以下扩展来创建表格行：

```
public static MvcHtmlString EditorRowFor<TModel, TRow>(this HtmlHelper<TModel> html, Expression<Func<TModel,TRow>> expression, IEnumerable<string> selectedColumns)
{
    var metadataProvider = new DataAnnotationsModelMetadataProvider();
    var stringBuilder = new StringBuilder();

    stringBuilder.Append("<tr>");

    foreach (var column in selectedColumns)
    {
        var entityParam = Expression.Parameter(expression.ReturnType);

        var columnLambda = Expression.Lambda(Expression.Property(entityParam, typeof(TRow), column));

        var selectCall = Expression.Call(typeof(Queryable),
                                         "Select",
                                         new Type[] { typeof(TModel), columnLambda.Body.Type },
                                         expression,
                                         columnLambda);

       html.EditorCellFor(selectCall);

        stringBuilder.AppendLine("</td>");
    }

    stringBuilder.AppendLine("</tr>");
    return new MvcHtmlString(stringBuilder.ToString());
} 
```

从我的角度来看，这个函数是这样调用的：

```
@Html.EditorRowFor(m => m.Items.Single(), Model.ColumnOptions.SelectedColumns); 
```

EditorCellFor 方法签名：

```
public static MvcHtmlString EditorCellFor<TModel, TItem>(this HtmlHelper<TModel> html, Expression<Func<TModel, TItem>> expression) 
```

我目前的问题是创建 selectCall。我想为 Lambda 表达式创建一个表达式：

```
m => m.Items.Single().Select(i => i.Address) 
```

我收到以下错误：

```
No generic method 'Select' on type 'System.Linq.Queryable' is compatible with 
the supplied type arguments and arguments. No type arguments should be 
provided if the method is non-generic. 
```

[我在http://www.hanselman.com/blog/TheWeeklySourceCode47ASPNET35DynamicDataFilterRepeatersAndDynamicLinqQueryGeneration.aspx](http://www.hanselman.com/blog/TheWeeklySourceCode47ASPNET35DynamicDataFilterRepeatersAndDynamicLinqQueryGeneration.aspx)上看到的大部分代码。

我整个早上都在寻找这个问题，但到目前为止还没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:32:51.610

一旦你调用`Single`了 ，无论如何你只会得到一个值 - 的重点`Select`是投影*一系列*值。

所以要么使用：

```
m => m.Items.Single().Address 
```

或者

```
m => m.Items.Select(i => i.Address).Single() 
```

# javascript - 强制排序，然后使用 jQuery Tablesorter 禁用排序

> ID：11560914
> 
> 赞同：1
> 
> 时间：2012-07-19T12:28:07.790
> 
> 标签：javascript, jquery, tablesorter

我有这张表，我正在使用[tablsorter](http://tablesorter.com/docs/)进行排序。我想强制对 C 进行排序，但我也想让该行不能被用户点击。（意味着 tablesorter 强制在这一行上排序，然后用户不能触摸它。）

```
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
<th>C</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
</tbody>
</table> 
```

这是我的表格排序器代码：

```
params = {
          sortList: [[2, 0]]
          , headers: {
              0: { sorter: false },
              1: { sorter: 'text' },
              2: { sorter: 'text' },
          }
          }
          , sortForce: [[2,0]] 
}; 
```

当我将第 2 行设置为 :`2: { sorter: false }`时，出现异常。我认为这个例外是因为 my`sortList`设置为`[[2,0]]`，我的 sortFroce 设置为`[[2,0]]`，但将第 2 行设置为 ，`'false'`。 - 有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:27:45.653

我似乎记得一个`sortForce`无法正常工作的问题，但我似乎无法在[更改日志](https://github.com/Mottie/tablesorter/wiki/Change)中找到它，除非回到版本 2.0.2。

无论哪种方式，它都应该在我在 github 上的[tablesorter分支中修复。](https://github.com/Mottie/tablesorter)[这是我放在一起的演示](http://jsfiddle.net/Mottie/eY8uH/32/)（我省略了该`sortList`选项，因此您可以看到最后一列排序。

# jquery - 选择 XML 标签 使用 jquery 进行标记

> ID：11560915
> 
> 赞同：1
> 
> 时间：2012-07-19T12:28:08.543
> 
> 标签：jquery, dom, xml-parsing

我已经搜索了几个小时的解决方案，但没有找到针对我的特定问题的解决方案。

我一直在试验这段代码：

```
$.ajax({
    url: 'https://gdata.youtube.com/feeds/api/users/profinsights/uploads',
    dataType: "xml",
    success: parseXml    
});

function parseXml(xml) {
    var entrynode = xml.getElementsByTagName("entry");
    $(entrynode).each(function() {
        //console.log($(this));
        console.log($('id',this)); //matches <id successfully
        console.log($('media:group',this)); // no match
    });
} 
```

**XML 片段：**

```
...

<entry>
  <id>​http://gdata.youtube.com/feeds/api/videos/870MupRJhmU​&lt;/id>​
  <title type=​"text">​PIMS Humble Beginnings​&lt;/title>​
  <author>​…​&lt;/author>​
  <gd:comments>​…​&lt;/gd:comments>​
  <media:group>​
    <media:category label=​"Education" scheme=​"http:​/​/​gdata.youtube.com/​schemas/​2007/​categories.cat">​Education​&lt;/media:category>​
    <media:content url=​"https:​/​/​www.youtube.com/​v/​870MupRJhmU?version=3&f=user_uploads&app=youtube_gdata" type=​"application/​x-shockwave-flash" medium=​"video" isDefault=​"true" expression=​"full" duration=​"561" yt:format=​"5">​&lt;/media:content>​
    <media:content url=​"rtsp:​/​/​v3.cache3.c.youtube.com/​CigLENy73wIaHwllhkmUugy98xMYDSANFEgGUgx1c2VyX3VwbG9hZHMM/​0/​0/​0/​video.3gp" type=​"video/​3gpp" medium=​"video" expression=​"full" duration=​"561" yt:format=​"1">​&lt;/media:content>​
    <media:content url=​"rtsp:​/​/​v1.cache7.c.youtube.com/​CigLENy73wIaHwllhkmUugy98xMYESARFEgGUgx1c2VyX3VwbG9hZHMM/​0/​0/​0/​video.3gp" type=​"video/​3gpp" medium=​"video" expression=​"full" duration=​"561" yt:format=​"6">​&lt;/media:content>​
    <media:description type=​"plain">​…​&lt;/media:description>​
    <media:keywords>​…​&lt;/media:keywords>​
    <media:player url=​"https:​/​/​www.youtube.com/​watch?v=870MupRJhmU&feature=youtube_gdata_player">​&lt;/media:player>​
    <media:thumbnail url=​"http:​/​/​i.ytimg.com/​vi/​870MupRJhmU/​0.jpg" height=​"360" width=​"480" time=​"00:​04:​40.500">​&lt;/media:thumbnail>​
    <media:thumbnail url=​"http:​/​/​i.ytimg.com/​vi/​870MupRJhmU/​1.jpg" height=​"90" width=​"120" time=​"00:​02:​20.250">​&lt;/media:thumbnail>​
    <media:thumbnail url=​"http:​/​/​i.ytimg.com/​vi/​870MupRJhmU/​2.jpg" height=​"90" width=​"120" time=​"00:​04:​40.500">​&lt;/media:thumbnail>​
    <media:thumbnail url=​"http:​/​/​i.ytimg.com/​vi/​870MupRJhmU/​3.jpg" height=​"90" width=​"120" time=​"00:​07:​00.750">​&lt;/media:thumbnail>​
    <media:title type=​"plain">​PIMS Humble Beginnings​&lt;/media:title>​
    <yt:duration seconds=​"561">​&lt;/yt:duration>​
  </media:group>
​&lt;/entry>

... 
```

*   我的目标是从每个节点获取文本节点和属性，例如`<media:foo>`
*   我知道我用于匹配节点 **media:group**的选择器是错误的，希望 xml 选择器方面的专家可以就如何处理这个问题给我一个建议。

先感谢您。

编辑：顺便说一句，这里是上述代码的小提琴：http: [//jsfiddle.net/vYJwm/](http://jsfiddle.net/vYJwm/)

**更新**：

*   我在这里按照 Rob 的建议应用了代码修订：http: [//jsfiddle.net/vYJwm/1/](http://jsfiddle.net/vYJwm/1/)但控制台日志给出了一个空的结果。
*   我猜控制台记录器没有给我正确的结果。
*   antwarpes 在这里实现了一个解决方案：[$(xml).find('someElement') : pull values with jquery from xml with Namespaces](https://stackoverflow.com/q/10181087)

**问题解决了**。多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:03:13.160

尝试这个：

[http://jsfiddle.net/gRoberts/vYJwm/3/](http://jsfiddle.net/gRoberts/vYJwm/3/)

jQuery 不会将它们解析为`media:foo`更多`foo`.

希望有帮助吗？

# spring - Spring-MVC 3.1：如何映射带有斜杠的 URL？

> ID：11560916
> 
> 赞同：6
> 
> 时间：2012-07-19T12:28:16.767
> 
> 标签：spring, spring-mvc

我正在将旧 servlet 应用程序转换为 Spring 3.1。在此过程中，一些 URL 现在已过时。我们的网络出现了一些问题，这些问题不会很快得到解决。我的老板不想相信他们的重定向将始终有效。所以，她让我把自己的重定向放到 webapp 中。

一切都很好，除了如果 URL 有一个尾部斜杠 Spring 3.1 将找不到处理它的 Controller 类函数。

[http://blah.blah.blah/acme/makedonation](http://blah.blah.blah/acme/makedonation) 被找到、映射和处理

[http://blah.blah.blah/acme/makedonation](http://blah.blah.blah/acme/makedonation) **/ 没有**

这是我用来处理旧 URL 的控制器类

```
import org.springframework.stereotype.Controller;
import org.springframework.validation.*;
import org.springframework.ui.ModelMap;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.SessionAttributes;

import org.apache.log4j.Logger;

@Controller
public class LegacyServletController {

    private static final Logger logger = Logger.getLogger(LegacyServletController.class);

    // Redirect these legacy screns "home", the login screen via the logout process
    @RequestMapping({"makeadonation","contact","complain"})
    public String home() {
        logger.debug("started...");
        return "redirect:logout";

    }// end home()  

}// end class LegacyServletController 
```

我在 Google 上四处搜索，发现这篇 Stack Overflow[帖子](https://stackoverflow.com/questions/8711392/spring-mvc-urls-with-trailing-slash-redirection)提供了一些建议，但我是 Spring 新手，对它的理解还不够，无法实施其中的一些建议。这听起来特别适合我的需求：

> spring 3.1 RequestMappingHandlerMapping 允许您设置“useTrailingSlashMatch”属性。默认情况下为真。我认为将其切换为 false 可以解决您的问题，

谁能给我一个基本的例子，引用我一个有这样一个例子的 URL（我在谷歌上没有运气）或者给我一个更好的主意？

非常感谢史蒂夫

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T15:10:34.730

您应该在 context.xml 中配置您的 bean，并设置属性。或者您可以参考[链接](http://forum.springsource.org/showthread.php?120192)或弹簧文档第[16.4节](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-handlermapping)

示例配置

```
<bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping">
    <property name="useTrailingSlashMatch" value="true">
    </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-05T08:18:34.247

如果您使用的是 Spring 的 Java `@Configuration`，您也可以`@Bean`像这样声明：

```
@Bean
public RequestMappingHandlerMapping useTrailingSlash() {
    return new RequestMappingHandlerMapping() {{ setUseTrailingSlashMatch(true); }};
} 
```

# php - CodeIgniter 中的递归函数失败

> ID：11560919
> 
> 赞同：0
> 
> 时间：2012-07-19T12:28:24.723
> 
> 标签：php, codeigniter, recursion, anonymous-recursion

我正在使用递归函数在树中转换我的菜单。我从数据库中得到的数组是：

```
array ( 
  [0] => stdClass Object ( 
    [nav_group_id] => 1 
    [entity_id] => 1 
    [parent] => 0 
    [name] => Meter Reading 
    [link] => # ) 
  [1] => stdClass Object ( 
    [nav_group_id] => 1 
    [entity_id] => 2 
    [parent] => 0 
    [name] => Parameterization 
    [link] => # ) 
  [2] => stdClass Object ( 
    [nav_group_id] => 1 
    [entity_id] => 3 
    [parent] => 0 
    [name] => View Reports 
    [link] => # ) 
  [3] => stdClass Object ( 
    [nav_group_id] => 1 
    [entity_id] => 4 
    [parent] => 0 
    [name] => Management & Control 
    [link] => # ) 
  [4] => stdClass Object ( 
    [nav_group_id] => 1 
    [entity_id] => 5 
    [parent] => 1 
    [name] => Billing Data 
    [link] => # ) 
  [5] => stdClass Object ( 
    [nav_group_id] => 1 
    [entity_id] => 6 
    [parent] => 1 
    [name] => MDI Billing Data
    [link] => # ) 
```

我通过将上述数组传递给该函数来调用递归函数：

```
$this->parseAndPrintTree('0',$navigation_all);
//die();   (issue here) 
```

现在，如果我`die();`在此功能之后使用它会显示正确的菜单，并且如果不使用`die();`页面将无法加载并给出此错误：

> 内容编码错误您尝试查看的页面无法显示，因为它使用了无效或不受支持的压缩形式。”

...并且没有显示输出。这是我的递归函数：

```
function parseAndPrintTree($root, $tree) 
{
    $return = array();
    if(!is_null($tree) && count($tree) > 0) 
    {
        echo '<ul>';
        foreach($tree as $child => $parent) 
        {
            if($parent->parent == $root) 
            {                    
                unset($tree[$child]);
                echo '<li>'.$parent->name;
                $this->parseAndPrintTree($parent->entity_id, $tree);
                echo '</li>';
            }
        }
        echo '</ul>';
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:22:47.637

因为我似乎正在做某事，所以我会将其发布为答案。

When you have gzip compression enabled, you cannot output anything to the browser before the compression functions have a chance to output, which Codeigniter automatically does near the end of its execution stack. In your recursion function you have an echo which is what is doing this output.

The best way to fix this is to convert this function in to a [helper](http://codeigniter.com/user_guide/general/helpers.html) function, and then put the call to this function inside a view file rather than a controller or library which is where I assume it is now.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T01:00:40.700

For posterity's sake, I ran into this error message while working on Code 2.1.0 in Firefox, and I landed here. My problem was that my code had an error or warning which was generated in a sub view. Because my /application/config/config.php file had this line

```
$config['compress_output'] = TRUE; 
```

I received the same error message as the question author. I changed that line

```
$config['compress_output'] = FALSE; 
```

Then, I was able to see the **real** error I was dealing with. Hope this helps someone!

# c# - Web 服务使用 android ksoap2 方法从应用程序接收空参数

> ID：11560920
> 
> 赞同：1
> 
> 时间：2012-07-19T12:28:30.620
> 
> 标签：c#, android, web-services, soap, android-ksoap2

所以我在 IIS 上用 C# 设置了一个 Web 服务。我有3种方法。2个工作，1个包含布尔值作为参数不。

似乎android ksoap2对布尔值和.net的定义不同。如此之多，以至于当我联系网络服务时，所有参数都是默认值（0 表示 int，false 表示 bool）。

我只是更改了我的android代码以传递整数而不是布尔值，并且网络服务接受整数并将它们转换为布尔值。

但是有没有聪明的解决方案？

```
[WebService(Namespace = "http://myNameSpace/")]
....
    [WebMethod] //This works fine!
    public List<myCustomClass> GetData()
    {
        myEntities db = new myEntities();
        return db.myCustomClassTable.ToList();
    }

    [WebMethod] //This works fine!
    public List<myCustomClass> GetDataByID(int id)
    {
        myEntities db = new myEntities();
        var res = from p in db.myCustomClassTable where p.id == id select p;
        return res.ToList();
    }

    [WebMethod] //This DOESNT work with android ksoap2
    public List<myCustomClass> GetDataBySomeBool(int id, boolean someBool)
    {
        ..... // I set up some logging here to check incoming params

        myEntities db = new myEntities();
        var res = from p in db.myCustomClassTable 
            where p.id == id && p.SomeBool == someBool 
            select p;
        return res.ToList();
    } 
```

我的安卓代码：

```
public static String Get_Data(int id, bool someBool) {

    try {
        SoapObject request = new SoapObject("http://myNameSpace/", "GetDataBySomeBool");

        // Use this to add parameters
        PropertyInfo pi1 = new PropertyInfo(), pi2 = new PropertyInfo();
        pi1.setName("id");
        pi1.setValue(id);
        pi1.setType(int.class);
        request.addProperty(pi1);
        pi2.setName("someBool");
        pi2.setValue(someBool);
        pi2.setType(boolean.class);
        request.addProperty(pi2);

        // Declare the version of the SOAP request
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        try {
            String SOAP_ACTION = "http://myNameSpace/GetDataBySomeBool";
            androidHttpTransport.call(SOAP_ACTION, envelope);
        } catch (Exception e) {
            e.printStackTrace();
        }

        SoapObject result = (SoapObject) envelope.bodyIn;

        if (result != null) {
            .....
        }
    } catch (Exception err) {
        err.printStackTrace();
        return null;
    }
    return null;
} 
```

# c# - LINQ 查询以匹配多个单词

> ID：11560921
> 
> 赞同：8
> 
> 时间：2012-07-19T12:28:31.427
> 
> 标签：c#, linq

我整天都在尝试解决这个问题，但还没有找到真正有效的解决方案。当我搜索一些数据时，我想根据多个单词过滤掉数据。

我的输入值是使用标准的 .Split 函数拆分的。

```
string[] searchstrings = MessageResult.Split(' '); 
```

我做了一个查询（显然不能正常工作），试图过滤掉与搜索字符串中的每个字符串匹配的所有条目。

```
 var suggestions = (from a in query
                               from w in searchstrings
                               where a.Message.ToLower().Contains(w.ToLower())
                               select a).Distinct(); 
```

查询是我的变量，它包含所有数据。我怎样才能使这个查询实际上只匹配包含搜索字符串中每个字符串的条目？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-19T12:38:13.057

```
var query = new string[]
{
    "abc foo bar xyz john doe",
    "abc foo bar xyz doe",
    "hello world",
    "abc foo bar john doe",
};

var searchstrings = new string[]
{
    "abc",
    "foo",
    "john",
    "xyz",
};

searchstrings = searchstrings.Select(x => x.ToLower()).ToArray();

var results = query.Select(x => x.ToLower())
                   .Where(x => searchstrings.All(y => x.Contains(y))); 
```

注意：
`ToLower()`是在`Where`子句之外执行的，以节省对该方法的大量调用。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-19T12:36:50.920

我认为下面的代码应该可以解决您的问题。它检查 searchstring 中的所有单词是否都在查询 (a) 中。

```
var suggestions = (from a in query
                   where searchstrings.All(word => a.ToLower().Contains(word.ToLower()))
                   select a); 
```

# xml - 如何根据标签的值从xml中删除节点

> ID：11560924
> 
> 赞同：1
> 
> 时间：2012-07-19T12:28:58.930
> 
> 标签：xml, xslt, xslt-2.0

使用 xml 和 xsl，我想解析特定节点和标签的输入 xml。如果标签值以“z”开头，那么我想删除该节点。（或创建没有此节点的新文件 xml 文件）

已附上示例 xml 文件以供参考。由于最后一个节点显示名称以“z *”开头，我希望应该删除最后一个节点。

“海鲜”

提前致谢。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<ItemSet xmlns:ns1="urn:/Items/data">
   <ns1:ObjectName>com</ns1:ObjectName>
   <ListOfItems>
      <Item>
         <ns1:Name>name1</ns1:Name>
         <ns1:ListOfItemDesc>
            <ItemTranslation>
               <ns1:DisplayName>fruits</ns1:DisplayName>
               <ns1:ValidationErrorMsg>120</ns1:ValidationErrorMsg>
            </ItemTranslation>
         </ns1:ListOfItemDesc>
      </Item>
      <Item>
         <ns1:Name>name2</ns1:Name>
         <ns1:ListOfItemDesc>
            <ItemTranslation>
               <ns1:DisplayName>vegetables</ns1:DisplayName>
               <ns1:ValidationErrorMsg>24.</ns1:ValidationErrorMsg>
            </ItemTranslation>
         </ns1:ListOfItemDesc>
      </Item>
      <Item>
         <ns1:Name>name3</ns1:Name>
         <ns1:ListOfItemDesc>
            <ItemTranslation>
               <ns1:DisplayName>meat</ns1:DisplayName>
               <ns1:ValidationErrorMsg>12.</ns1:ValidationErrorMsg>
            </ItemTranslation>
         </ns1:ListOfItemDesc>
      </Item>
      <Item>
         <ns1:Name>name4</ns1:Name>
         <ns1:ListOfItemDesc>
            <ItemTranslation>
               <ns1:DisplayName>zseafood</ns1:DisplayName>
               <ns1:ValidationErrorMsg>12.</ns1:ValidationErrorMsg>
            </ItemTranslation>
         </ns1:ListOfItemDesc>
      </Item>
   </ListOfItems>
</ItemSet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:42:44.777

**这种转换**（覆盖**[身份规则](http://dpawson.co.uk/xsl/sect2/identity.html)**）：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:ns1="urn:/Items/data">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="Item[.//ns1:DisplayName[starts-with(., 'z')]]"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<ItemSet xmlns:ns1="urn:/Items/data">
    <ns1:ObjectName>com</ns1:ObjectName>
    <ListOfItems>
        <Item>
            <ns1:Name>name1</ns1:Name>
            <ns1:ListOfItemDesc>
                <ItemTranslation>
                    <ns1:DisplayName>fruits</ns1:DisplayName>
                    <ns1:ValidationErrorMsg>120</ns1:ValidationErrorMsg>
                </ItemTranslation>
            </ns1:ListOfItemDesc>
        </Item>
        <Item>
            <ns1:Name>name2</ns1:Name>
            <ns1:ListOfItemDesc>
                <ItemTranslation>
                    <ns1:DisplayName>vegetables</ns1:DisplayName>
                    <ns1:ValidationErrorMsg>24.</ns1:ValidationErrorMsg>
                </ItemTranslation>
            </ns1:ListOfItemDesc>
        </Item>
        <Item>
            <ns1:Name>name3</ns1:Name>
            <ns1:ListOfItemDesc>
                <ItemTranslation>
                    <ns1:DisplayName>meat</ns1:DisplayName>
                    <ns1:ValidationErrorMsg>12.</ns1:ValidationErrorMsg>
                </ItemTranslation>
            </ns1:ListOfItemDesc>
        </Item>
        <Item>
            <ns1:Name>name4</ns1:Name>
            <ns1:ListOfItemDesc>
                <ItemTranslation>
                    <ns1:DisplayName>zseafood</ns1:DisplayName>
                    <ns1:ValidationErrorMsg>12.</ns1:ValidationErrorMsg>
                </ItemTranslation>
            </ns1:ListOfItemDesc>
        </Item>
    </ListOfItems>
</ItemSet> 
```

**产生想要的正确结果**：

```
<ItemSet xmlns:ns1="urn:/Items/data">
   <ns1:ObjectName>com</ns1:ObjectName>
   <ListOfItems>
      <Item>
         <ns1:Name>name1</ns1:Name>
         <ns1:ListOfItemDesc>
            <ItemTranslation>
               <ns1:DisplayName>fruits</ns1:DisplayName>
               <ns1:ValidationErrorMsg>120</ns1:ValidationErrorMsg>
            </ItemTranslation>
         </ns1:ListOfItemDesc>
      </Item>
      <Item>
         <ns1:Name>name2</ns1:Name>
         <ns1:ListOfItemDesc>
            <ItemTranslation>
               <ns1:DisplayName>vegetables</ns1:DisplayName>
               <ns1:ValidationErrorMsg>24.</ns1:ValidationErrorMsg>
            </ItemTranslation>
         </ns1:ListOfItemDesc>
      </Item>
      <Item>
         <ns1:Name>name3</ns1:Name>
         <ns1:ListOfItemDesc>
            <ItemTranslation>
               <ns1:DisplayName>meat</ns1:DisplayName>
               <ns1:ValidationErrorMsg>12.</ns1:ValidationErrorMsg>
            </ItemTranslation>
         </ns1:ListOfItemDesc>
      </Item>
   </ListOfItems>
</ItemSet> 
```

# php - 从 php system() 函数是如何工作的？

> ID：11560929
> 
> 赞同：2
> 
> 时间：2012-07-19T12:29:22.803
> 
> 标签：php, linux, system

我正在一个项目中工作，脚本将在 Linux 下运行。它有许多用 C++ 编写的模块。我需要从 PHP 调用这些模块。

我的问题如下：

1.  我的模块是软件包中的模块之一。
2.  我们的软件有 PHP 层来获取用户输入并将其存储在数据库中，并在需要时调用 C++ 引擎。
3.  所有模块都在运行并使用一些由基本模块设置的环境变量。
4.  通过我们获取 C++ 引擎的用户输入，有一层 PHP。
5.  我需要从 PHP 调用一个应用程序（abc.out），它将填充数据库。

问题是我必须在应用程序运行之前设置一个新的环境变量。

我正在使用旧的环境变量，`getenv()`然后将路径附加到它并再次设置。我习惯于`putenv()`设置新的环境变量。

设置环境变量后，我使用`system()`从 PHP 调用该应用程序并且它正在工作。

我怀疑此环境变量更改是否会影响正在运行的其他模块。

一件事是，如果我们`system()`用于多个操作，我可以设置环境变量并从同一个`system()`调用中调用我的应用程序。在这里我怀疑这是否也会影响正在运行的其他应用程序，或者只影响被调用的特定应用程序`system()`。

那就是`system()`为我们所称的每个程序创建一个新会话？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:49:28.333

好吧，php 是开源的 :-) 您需要查看文件[ext/standard/exec.c](https://github.com/php/php-src/blob/master/ext/standard/exec.c)。system 被实现为对 php_exec_ex 的调用，它通过 php_exec 使用名为[VCWD_POPEN](https://github.com/php/php-src/blob/master/TSRM/tsrm_virtual_cwd.h)的宏，在 Linux 系统上使用[popen()](http://linux.die.net/man/3/popen)系统调用。

[因此，在 Linux 系统上对PHP system()](http://php.net/manual/en/function.system.php)的每次调用都将通过新的[popen()](http://linux.die.net/man/3/popen)系统调用执行，所以是的，单独的调用是隔离的。我没有检查Windows。

# vba - 编辑 Microsoft Office VBA 时，如何禁用弹出“编译错误”消息？

> ID：11560934
> 
> 赞同：149
> 
> 时间：2012-07-19T12:29:28.977
> 
> 标签：vba, editor

在编辑 Microsoft Office VBA 宏或函数时，您通常会将光标从尚未完成的行上移开。例如，要复制要粘贴到该行的内容。但是，如果该部分行在语法上无效，VBA 编辑器会通过弹出“编译错误”消息来中断您的工作，该消息必须被关闭。

有什么方法可以禁用消息框吗？我觉得很烦人...

（这发生在 Excel Visual Basic for Applications、Outlook VBA、Word VBA 等）

* * *

## 回答 #1

> 赞同：210
> 
> 时间：2012-07-19T13:29:59.640

在您的 VBA 编辑器窗口（标题为“Microsoft Visual Basic for Applications”）中执行以下操作：

单击菜单“**工具**”，然后单击“**选项**”。

在选项的“编辑器”选项卡中，取消选中“**自动语法检查**”框。（见下面的截图。）

此更改不会使编辑器在后台停止编译并将语法错误标记为红色（或“选项”选项卡“编辑器格式”中指定的任何格式）。

MS Office 程序共享这个通用的 VBA 编辑器，因此如果您在为 Excel 编辑 VBA 时更改了一个选项，那么您已经为 Outlook、Word 等更改了它。

![MS VBA 编辑器的工具选项对话框](../Images/cac46ab499670c2fa8cfb7adba653247.png)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-07-19T13:30:35.227

在 VBE 中，工具 - 选项 - 编辑器并取消选中自动语法检查。它会将坏代码变成红色，但不会给你弹出窗口。

# php - texarea 的搜索查询（带有新行....）

> ID：11560937
> 
> 赞同：0
> 
> 时间：2012-07-19T12:29:40.620
> 
> 标签：php, mysql

我有一个包含一些字段的表格。地址就是其中之一。我使用 textarea 标签作为地址。现在的问题是，当我根据一个地址搜索某些东西时，它只适用于一行地址。我的意思是，如果我在地址中输入了换行符（段落格式），它不会显示结果。所有其他搜索查询都运行良好。这是我的代码，

地址下拉列表代码：

```
<input type="hidden" name="category_address" value="address"/>
<select name='criteria_address' style="width:100px;">
    <option selected="selected"></option>
    <?php
    $order = "SELECT DISTINCT address FROM lh_clients ORDER BY clientname" or die (mysql_error());
    $result = mysql_query($order);
    while ($data = mysql_fetch_array($result)) {
        echo ("<option>$data[address]</option>");
    }
    ?>
</select> 
```

搜索查询代码：

```
if (isset($_POST['criteria_address']))
{
$category_address = $_POST['category_address'];
$criteria_address = $_POST['criteria_address'];
$query = "SELECT * FROM lh_clients WHERE $category_address = '$criteria_address' ORDER BY clientname";
$result   = mysql_query($query) or die(mysql_error());
$num_rows = mysql_num_rows($result);

while ($data = mysql_fetch_array($result)) { ?>
<tr>
<td style="vertical-align:top;"><? echo $data['clientname']; ?></td>
<td style="vertical-align:top;"><? echo $data['clienttype']; ?></td>
<td style="vertical-align:top;"><? echo nl2br($data['address']); ?></td>
<td style="vertical-align:top;"><? echo $data['contacts']; ?></td>
<td style="vertical-align:top;"><? echo $data['sensitivity']; ?></td>
<td style="vertical-align:top;"><? echo $data['acountmanager']; ?></td>
<td style="vertical-align:top;"><? echo $data['responsibleexecutive']; ?></td>
<td></td>
</tr>
<?php
} 
```

}

我认为搜索查询不适用于地址中的换行符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:33:23.920

您可以尝试`LIKE`像这样使用运算符：

```
WHERE $category_address LIKE '{$criteria_address}%' 
```

这将找到以 $criteria 地址开头的所有记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:34:43.893

出色地...

```
$order = "SELECT DISTINCT address FROM lh_clients ORDER BY clientname" or die (mysql_error());
$result = mysql_query($order);
while ($data = mysql_fetch_array($result)) {
    foreach (explode("\n", $data[address]) as $line) {
        echo ("<option value='".htmlentities($line)."'>{$line}</option>");
    }
} 
```

尝试使用 LIKE 在文本列中进行搜索

```
$address = trim(html_entity_decode($criteria_address));
$query = "SELECT * FROM lh_clients WHERE $category_address like '%{$address}%' or $category_address like '{$address}%' or $category_address like '%{$address}' ORDER BY clientname"; 
```

# excel - 复制工作表在图表中移动图例

> ID：11560939
> 
> 赞同：0
> 
> 时间：2012-07-19T12:29:47.587
> 
> 标签：excel, vba

我正在使用 Excel VBA 创建“主”表的副本，并用不同的设置（和数据）填充每个副本。

我在主表上有几个图表，在复制它时，（只有）其中一个被错误地复制 - 它的图例四处移动。在我的原始图表中，它是自定义定位的（没有 xlBottom 或类似的），当复制时，图例移动到另一个位置（总是相同的位置，仅显示左侧属性被更改）。

由于我后来将图表导出为标准化的演示文稿，这会带来问题。

我没有找到任何建议，实际上也没有找到任何有类似问题的人。

我用来复制工作表的代码（在此之前，我删除了以前出现的具有相同名称的工作表）：

```
astrSheetName = "SomeName" 'This is actually an input into the function

Set wsMaster = ActiveWorkbook.Sheets("MASTER")
wsMaster.Copy After:=wsMaster
ActiveSheet.Name = astrSheetName
ActiveSheet.Tab.ColorIndex = -4142 
```

我将不胜感激任何帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:15:03.207

如果您在自定义位置有图例，我认为这是 Excel 中的一个错误。要解决此问题，您需要在代码中定义图例的位置。下面的简介是如何执行此操作的示例。

```
ActiveSheet.ChartObjects("Chart 1").Activate
ActiveChart.Legend.Select
Selection.Left = 32.016
Selection.Top = 190.917 
```

# c# - 删除功能停用时的自定义母版页错误

> ID：11560940
> 
> 赞同：2
> 
> 时间：2012-07-19T12:29:50.887
> 
> 标签：c#, sharepoint, sharepoint-2010, master-pages

我有一项功能，可在激活时将自定义母版页部署到网站集中的所有网站，并希望在停用时删除自定义母版页的所有痕迹。在停用时，将站点的母版页设置回 v4.master 后，尝试删除以前设置为默认值的自定义母版页时出现错误（无法删除文件“custom.master”。错误代码：158。）。该功能在出现错误后并未完成停用，但大部分文件已被删除，并且品牌已设置回 v4.master。当尝试再次停用该功能时，它会删除最终文件 custom.master 而不会出错。

我不明白缺少什么。为什么 FeatureDeactivating() 必须在 custom.master 被删除之前完成？

```
public override void FeatureActivated(SPFeatureReceiverProperties properties)
{
    using (SPSite sitecollection = (SPSite)properties.Feature.Parent)
    {
        using (SPWeb web = sitecollection.RootWeb)
        {
            string WebAppRelativePath = sitecollection.ServerRelativeUrl;
            if (!WebAppRelativePath.EndsWith("/"))
            {
                WebAppRelativePath += "/";
            }

            foreach (SPWeb site in sitecollection.AllWebs)
            {
                site.CustomMasterUrl = WebAppRelativePath + "_catalogs/masterpage/custom.master";
                site.MasterUrl = WebAppRelativePath + "_catalogs/masterpage/custom.master";
                site.UIVersion = 4;
                site.Update();
            }
        }
    }
}

public override void FeatureDeactivating(SPFeatureReceiverProperties properties)
{
    using (SPSite sitecollection = (SPSite)properties.Feature.Parent)
    {
        using (SPWeb web = sitecollection.RootWeb)
        {
            string WebAppRelativePath = sitecollection.ServerRelativeUrl;
            if (!WebAppRelativePath.EndsWith("/"))
            {
                WebAppRelativePath += "/";
            }

            foreach (SPWeb site in sitecollection.AllWebs)
            {
                site.CustomMasterUrl = WebAppRelativePath + "_catalogs/masterpage/v4.master";
                site.MasterUrl = WebAppRelativePath + "_catalogs/masterpage/v4.master";
                site.UIVersion = 4;
                site.Update();

                WebAppRelativePath = site.Url;
                if (!WebAppRelativePath.EndsWith("/"))
                {
                    WebAppRelativePath += "/";
                }
                SPFolder folder = web.GetFolder(site.Url + "_catalogs/masterpage/images/");
                if (folder.Exists)
                    folder.Delete();
                folder.Update();

                SPFile file = web.GetFile(site.Url + "_catalogs/masterpage/custom.css");
                if(file.Exists)
                    file.Delete();
                file.Update();

                file = web.GetFile(WebAppRelativePath + "_catalogs/masterpage/html5.master");
                if(file.Exists)
                    file.Delete();
                file.Update();

                file = web.GetFile(WebAppRelativePath + "_catalogs/masterpage/custom.master");
                if (file.Exists)
                {
                    file.Delete();  // ERROR HAPPENS HERE
                }
                file.Update();

                /*file = web.GetFile(WebAppRelativePath + "_catalogs/masterpage/minimal.master");
                if(file.Exists)
                    file.Delete();
                file = web.GetFile("/_layouts/minimal.master");
                if(file.Exists)
                    file.CopyTo(WebAppRelativePath + "_catalogs/masterpage/");

                file = web.GetFile(WebAppRelativePath + "_catalogs/masterpage/default.master");
                if(file.Exists)
                    file.Delete();
                file = web.GetFile("/_layouts/default.master");
                if(file.Exists)
                    file.CopyTo(WebAppRelativePath + "_catalogs/masterpage/");*/
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:18:32.397

您可能需要获取对 的新引用`SPWeb`并使用它来调用`SPWeb.GetFile()`.

`SPWeb`from块可能仍然有对 custom.master的`using`引用，并且需要刷新。

# command-line - 用于循环的批处理文件以解压缩文件并获取 zip 文件内容的时间戳

> ID：11560941
> 
> 赞同：2
> 
> 时间：2012-07-19T12:29:51.923
> 
> 标签：command-line, batch-file

我有一个日常进程，它会从其他进程创建的文件中生成一些 zip 文件。我需要创建一个每日日志文件，该文件指示找到的每个 zip 文件的一个特定文件的内容的时间戳。

我创建了以下批处理脚本，它昨天似乎在我的测试系统上工作，但今天不再，不知道为什么......

```
set VersionDirectory=C:\Test\VersionX\
set ResultOutputFile=C:\Test\LogFile.txt

for /f %%f in ('dir /b %VersionDirectory%\Installable\Packages\pattern*.zip') do (
    mkdir %temp%\%%f\
    unzip -extract -dir %VersionDirectory%\Installable\Packages\%%f %temp%\%%f\ > nul
    for %%a in (%temp%\%%f\InstallScript.xml) do set InstallScriptXMLDate=%%~ta
    rmdir /s /q %temp%\%%f\
    echo       %%f [package from %InstallScriptXMLDate%] >> %ResultOutputFile%
) 
```

该文件应该做什么的简短摘要：

1.  循环遍历 C:\Test\VersionX\ 目录中的每个 pattern*.zip 文件
2.  将此文件解压缩到 %temp%\%%f 目录（其中 %%f 是文件名）
3.  获取 %temp%\%%f\InstallScript.xml 的时间戳并将其放入 %InstallScriptXMLDate% 变量中
4.  删除 %temp%\%%f 目录
5.  将文件名 (%%f) 和时间戳 (%InstallScriptXMLDate%) 回显到日志文件中

截至目前，日志文件只包含文件名，后跟字符串 '[package from ]' 字符串，但缺少实际的日期时间戳

zip文件的解压缩和删除工作完美无缺，只是没有设置时间戳。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:32:10.473

您正在设置一个变量并在同一个块中使用它。这是行不通的，`cmd`因为环境变量是在*解析*语句时扩展的，而不是在执行语句时扩展的。因此，当循环运行时，*所有*变量都已被替换为循环*之前*的值。

放

```
setlocal enabledelayedexpansion 
```

在批次开始时使用，`!InstallScriptXmlDate!`而不是`%InstallScriptXmlDate%`.

另一个注意事项：`for`完全能够自行迭代文件，您几乎不需要`dir /b`使用`for /f`. 事实上，它可以引入可以避免的问题

```
for %%f in (%VersionDirectory%\Installable\Packages\pattern*.zip) 
```

# winforms - 排序组合框

> ID：11560943
> 
> 赞同：2
> 
> 时间：2012-07-19T12:30:18.727
> 
> 标签：winforms, sorting, data-binding, combobox

我正在使用带有组合框的数据绑定来在下拉列表中显示我的对象。数据绑定后，组合框需要自动按字母顺序对其中的数据进行排序。如何才能做到这一点？我希望逻辑是通用的并直接应用于组合框，而不是绑定到它的对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T20:11:40.187

数据绑定组合框不能直接排序。您必须对基础数据源进行排序。这是来自 MSDN：

```
Attempting to set the Sorted property on a data-bound control raises an
ArgumentException. You must sort the data using the underlying data model. 
```

因此，您也许可以使用 SortedList 作为绑定源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-09T14:44:04.970

尝试使用它，它对我来说很好用。仅更改控件的名称

```
private void sellingTableDataGridView_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
     if (sellingTableDataGridView.CurrentCell.ColumnIndex == 5) {
         mainItemsDataBindingSource.Sort = "ItemCodeID";
     }
} 
```

# javascript - 在文档中搜索文本以删除比它所在的标签更多的内容

> ID：11560953
> 
> 赞同：-3
> 
> 时间：2012-07-19T12:31:16.187
> 
> 标签：javascript

想象一下，你有这样的 html 代码：

```
<div id="2761421" class="..." data-attributionline="testtext wrote at..." data-created-at="1342689802000" data-updated-at="1342689802000" data-user-id="36847" >                             
  <div class="subject">    <strong>                                      
      <a name="2761421" href="#2761421">wee</a></strong>                             
  </div>                                             
  <div class="info">                                     
    <div class="author">      author:                                              
      <span class="name">        testtext         (                                             
        <a href="">we</a>)                                                                     
      </span>                                     
    </div>                                     
    <div class="date">      date:                                        
      <time datetime="dfgdf">dfgdfg                                      
      </time>                                     
    </div>                                
  </div>                             
  <hr style="clear: both;" />                             
  <div class="text gainlayout">        some text                            
  </div>                             
  <div class="foot gainlayout unselectable">                                     
    <span class="menuitem postmenuitem-report">                                      
      <a href="dfgdfg" data-remote="true" class="nav" data-confirm="dgdfg" rel="nofollow">cvbcvb</a>                                
    </span>        
  </div>                    
</div> 
```

在整个文档中搜索带有 data-attributionline= 的 div 包含 testtext 以用“已过滤”替换整个引用的 div 的部分的 javascript 代码会是什么样子？

**或者**

搜索整个文档的 javascript 代码会是什么样子

```
<span class="name"> 
```

其中名称包含 testtext 以替换从开始的整个 div

```
<div id="<someid>" class="..." data-attributionline="testtext<some text>" data-created-at="<somedate>" data-updated-at="<somedate>" data-user-id="<someid>" > 
```

到最后一个div，即

```
 </span>        
  </div>                    
</div> 
```

用“过滤”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T19:53:25.143

有一大堆[属性选择器](http://dev.w3.org/csswg/selectors4/#attribute-selectors)（另见[CSS](http://www.w3.org/TR/css3-selectors/#attribute-selectors)），它们将匹配具有以开头或包含的属性的元素`testtext`。

在 javascript 中，您可以使用[`document.querySelector`](https://developer.mozilla.org/en/DOM/Document.querySelector)[ [`All`](https://developer.mozilla.org/en/DOM/Document.querySelectorAll)]`()`或支持这些的库函数来获取元素，然后[删除](https://developer.mozilla.org/En/DOM/Node.removeChild)它们。

# javascript - 如何只为 div 标签内的表维护滚动

> ID：11560955
> 
> 赞同：1
> 
> 时间：2012-07-19T12:31:27.447
> 
> 标签：javascript, asp.net, html, web, scrollbar

我必须只为 div 标签内的表格维护滚动。表中有 500 个条目，因此滚动到页面是一种坏习惯。所以我将垂直滚动到只有 div 而没有滚动页面。对于任何分辨率，我都使用 javascript 代码。我必须保持表格底部对齐。意味着在整个页面中我将只滚动 div 内容。我使用下面的代码它让我滚动到 div 标签，但也滚动到页面。我正在使用母版页。

```
 <div id="divScroll" style="width: 100%;">
        <table id="tableWorkList" class="csstablelist" cellspacing="1" cellpadding="1">
        <tr>
            <td></td>
    ....</tr>//**500 rows in table**
    </table>
    </div>

function resolutionIndependent()
        {
            var myHeight;
            if (document.body && document.body.offsetWidth)
            {
                myHeight = document.body.offsetHeight;
            }
            if (document.compatMode == 'CSS1Compat' && document.documentElement && document.documentElement.offsetWidth)
            {
                myHeight = document.documentElement.offsetHeight;
            }
            if (window.innerWidth && window.innerHeight)
            {
                myHeight = window.innerHeight;
            }
            var divScroll = document.getElementById('divScroll');
            divScroll.style.height = parseFloat(myHeight) + 'px';
            divScroll.style.overflow = "auto";
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:34:04.237

用这个：

```
overflow: auto; 
```

在 div 的样式标签中，并设置一些div 的`height`和`width`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T12:35:40.270

```
#divScroll{ overflow:auto; height : 200px; width : 600px; } 
```

会为你工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:34:52.903

让它....例如

```
 <div id="divScroll" style="width: 100px; height: 100px;overflow : auto;"> 
```

# java - 在 Java 模型-视图-控制器设计中访问模型

> ID：11560965
> 
> 赞同：4
> 
> 时间：2012-07-19T12:31:57.950
> 
> 标签：java, model-view-controller, design-patterns

我正在开发一个遵循通用 MVC 设计的编辑器：模型保存数据，控制器知道如何更改它，视图问题调用控制器来查询和修改模型。为了论证，让我们使用

```
public class Model {
    public Object getStuff(String id);
    public void setStuff(String id, Object value);    
}    

public interface Controller {
    public void execute(Command command);
    public void redo();
    public void undo();     
    public void save();
    public void load(File f);
} 
```

实际实现控制器的类持有对模型的引用；命令也需要访问它，因此它们都必须提供一个`void execute(Model m);`接口，仅在需要时才实际授予它们此访问权限。

然而，视图通常需要访问模型——在构建它们自己时，以及稍后监听更改并相应地刷新它们自己。**恐怕在Controller中添加“Model getModel()”调用会导致绕过`execute()`机制**的巨大诱惑；而且我不是唯一从事该项目的开发人员。鉴于这种情况，**您将如何执行“所有更改都通过控制器”策略？**

我正在考虑的两种选择：

*   一个名为“ReadOnlyModel”的接口，由 getModel() 调用而不是真实模型返回，它会捕获任何此类尝试。
*   大量评论提示即将到来的开发人员正确的做事方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:41:31.133

我建议将模型的访问建模为一组类。例如，如果视图需要修改客户的属性，就会有一个 ModifyCustomerCommand 类，该类将具有执行更新所需的所有信息作为属性。视图将构造一个具有值的类的实例并将其传递回控制器，而控制器又会将命令传递回模型以进行实际更新。

这种方法的一个好处是这些模型访问命令中的每一个都可以实现撤消行为。如果控制器在将这些命令发送回模型时保持这些命令的有序集合，则控制器可以通过在最近执行的命令上调用 undo 方法来取消更改，一次一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T18:36:24.003

如果您查看观察者模式[http://en.wikipedia.org/wiki/Observer_pattern](http://en.wikipedia.org/wiki/Observer_pattern)会怎样，您的视图只会监听来自模型的事件。希望能帮助到你。

# c# - 无法访问从 Windows Workflow 4.0 中的 RecieveRequest 传入的字符串 []

> ID：11560966
> 
> 赞同：0
> 
> 时间：2012-07-19T12:32:03.157
> 
> 标签：c#, workflow-foundation-4

我的工作流程是用`String[]`参数设计的。我正在使用 Windows 工作流服务项目。

我有：

*   一个序列
*   接收请求
*   发送响应

我已设置接收请求以获取`String[]`. 我传递了值，但是我尝试了很多方法来尝试访问 this `String[]`。我尝试了分配并获取无效的语法消息。接收请求中的参数好像不是全局的，真的很反直觉。

如何让我的序列成员访问`String[]`传入的这个参数？

我在过去一个小时里用谷歌搜索了这个问题，但没有找到任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:01:37.387

在变量部分选项卡的序列级别声明一个字符串数组类型的变量，并将其分配给接收活动内容-内容定义-消息。然后，您将能够在整个工作流程中使用请求参数。

# android - 在屏幕之间传递字符串

> ID：11560967
> 
> 赞同：0
> 
> 时间：2012-07-19T12:32:04.590
> 
> 标签：android, string

考虑 3 个屏幕 1、2、3。我想在第一个屏幕的第二个屏幕中显示字符串（价格）。所以在第一个屏幕上我做了 putextra 并在第二个屏幕上得到了它。现在我正在导航到第三个屏幕并单击第三个屏幕中的后退按钮我回到第二个屏幕。现在字符串（价格）显示为空。请纠正我。

我的代码：

屏幕1：

```
Intent intent=new Intent(getApplicationContext(),IncomeDetails.class);
          intent.putExtra("grpsdb", grp1);
          startActivityForResult(intent,1); 
```

屏幕 2：

```
System.out.println("string="+intent.getStringExtra("grpsdb"));
           Cursor c = db.getIncometitle(intent.getStringExtra("grpsdb"));
           startManagingCursor(c); 
```

屏幕 3：

```
back.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    // TODO Auto-generated method stub
                    Intent intent=new Intent(getApplicationContext(),IncomeDetails.class);
                    startActivity(intent);

                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:41:11.727

你得到**空**值是因为你从你的 3rd Activity 再次`String price`开始 2nd Activity **(IncomeDetails.class) 。**

如我所见，`IncomeDetails.class`是您的第二个活动

并且您正在尝试从 3rd Activity 开始新的 2nd Activity，

使用代码，

```
back.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent intent=new Intent(getApplicationContext(),IncomeDetails.class);
                startActivity(intent);
            } 
```

因此，只需将`finish()`您的第三个活动放在按钮的点击中即可。而不是再次开始第二个新活动。

就像是，

```
back.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                <Your_3rd_Activity_Name>.finish();
            } 
```

还有一件事，从第二个活动开始第三个活动，当你开始第三个活动时`stratActivityForResult()`不要使用`finish()`第二个活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:49:39.940

您应该`startActivityForResult()`在第二个活动中使用并从那里调用活动 3。然后在活动 2 中还使用 `onActivityResult(int requestCode, int resultCode, Intent data) 方法。看看这个例子：[http ://rahulonblog.blogspot.co.uk/2010/05/android-startactivityforresult-example.html](http://rahulonblog.blogspot.co.uk/2010/05/android-startactivityforresult-example.html)

祝你好运 ：）

# android - 如何更改行onTouch而不是onScroll的背景颜色？

> ID：11560970
> 
> 赞同：0
> 
> 时间：2012-07-19T12:32:16.960
> 
> 标签：android, listview, android-listview, android-arrayadapter

我有一个列表视图，我只想在触摸它时更改行（项目）的背景颜色（MotionEvent.ACTION_DOWN），但在滚动列表视图时防止这种情况发生。我怎样才能做到这一点 ？

这是我的 ListView 的 BaseAdapter

```
 @Override
public View getView(final int position, View convertView, ViewGroup parent) {
    View row = convertView;
    DataHolder holder = null;

    if (row == null) {
        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new DataHolder();
        holder.newAppsLayout = (LinearLayout) row.findViewById(R.id.new_apps_layout);             
        holder.imageView1 = (ImageView) row.findViewById(R.id.imageView1);             
        row.setTag(holder);
    } else {
        holder = (DataHolder) row.getTag();
    }

    Data data = data.get(position);
    ImageCacheManager.loadImage(holder.imageView1, item.getIconUrl());

    final DataHolder finalHolder = holder;
    row.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent motionEvent) {
                  if (motionEvent.getAction() == MotionEvent.ACTION_DOWN) {
                    finalHolder.newAppsLayout.setBackgroundColor(Color.GRAY);
                } else {   
                 finalHolder.newAppsLayout.setBackgroundDrawable(context.getResources().getDrawable(R.drawable.content_bg));                    }

            return false;
        }
    });
    return row;

static class DataHolder {
    LinearLayout newAppsLayout;
    ImageView imageView1;
 } 
```

它可以工作，但也可以在触摸滚动时工作。怎样才能防止这种情况？我的意思是，仅适用于触摸事件但不适用于滚动？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:51:54.820

每当您触摸屏幕时，您都会收到 MotionEvent.ACTION_DOWN。防止滚动事件颜色改变的一种方法是实现一个 SimpleOnGestureListener，如果检测到滚动手势，它将使颜色返回其原始状态。

```
simpleOnGestureListener = new SimpleOnGestureListener(){    
    public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY){
            //put color code here
            return super.onScroll(e1, e2, distanceX, distanceY);
        }
    }; 
```

您必须实例化一个 GestureDetector 以注意 simpleOnGestureListener。我通常有一个 TouchSetup() 方法来创建 simpleOnGestureListener 然后分配 mGestureDetector。

```
mGestureDetector = new GestureDetector(context, simpleOnGestureListener); 
```

最后，在 OnTouchEvent(MotionEvent ev) 函数调用结束时

```
return mGestureDetector.onTouchEvent(event); 
```

所有这些都需要您将 onTouchListener 更改为 GestureDetector，但您仍然可以从 MotionEvent 中提取有关触摸事件所需的任何信息。此外，GestureDetector 可让您轻松检测轻击或双击，并以您认为合适的任何方式做出响应。

[http://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html](http://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html)

# python - 在启动 bash 脚本的远程机器上启动 python 脚本

> ID：11560974
> 
> 赞同：3
> 
> 时间：2012-07-19T12:32:27.200
> 
> 标签：python, parent-child

对于我用来在远程机器上建立网络服务器的脚本，我认为这是一个相当独特的问题。

我有一个控制器脚本，它在检查分类帐后会在远程机器上启动一个“构建器”脚本。此构建器脚本的一部分调用了一个 bash 脚本，该脚本启动了一个我想在两个脚本完成后继续运行的进程。

我唯一的问题是构建器脚本似乎完成（到达最后一行），但似乎没有将控制权返回给控制器脚本。

作为记录，我在控制器脚本中使用 subprocess.call（启动 ssh 调用）来启动远程机器上的构建器脚本。我玩弄了在构建器脚本中启动 bash 脚本的各种方法，但似乎构建器不会将控制权返回给控制器，直到终止由 bash 脚本生成的进程。

我尝试过的事情：

```
pid=os.spawnl(os.P_NOWAIT,dest+'/start_background_script.sh')
pid=subprocess.Popen([dest+'/start_background_script.sh'])
os.system(dest+'/start_background_script.sh &')
pid=os.spawnl(os.P_NOWAIT,dest+'/start_background_script.sh') 
```

bash 脚本被写入您执行它的位置，它使两个进程在后台运行，然后返回控制权。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:44:27.897

对我来说，这听起来像是一份[织物](http://docs.fabfile.org/en/1.4.3/index.html)工作。

Fabric 为您包装了远程（以及本地）机器上的 shell 调用处理。

# apache - 在 vagrant box 上创建虚拟主机

> ID：11560975
> 
> 赞同：4
> 
> 时间：2012-07-19T12:32:29.997
> 
> 标签：apache, virtualhost, chef-infra, vagrant

我正在尝试基于使用 Chef 配置的 vagrant 设置开发环境。我使用 Apache（使用 Chef）创建了一个环境，并且可以通过端口转发从我的主机访问 Web 服务器。

我想让我的 vagrant box 包含几个虚拟主机，并使用共享文件夹定义不同的项目，指出同一个盒子和相关的虚拟主机。

我需要学习的是是否有一种厨师方法可以在 vagrant box 下为 apache（它可能是其他 Web 服务器，例如 nginx）创建虚拟主机。或者在 vagrant+chef 设置之后，我应该通过 ssh 手动配置虚拟主机吗？如果两个选项都可用，哪个更适合应用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:40:26.293

答案是肯定的，您可以使用 Chef 来做到这一点。您必须选择使用[Opscode 的 Apache2 标准社区配方](https://github.com/opscode-cookbooks/apache2)或其中的一部分。您可能还想在[此处](https://serverfault.com/questions/342058/create-update-apache-virtualhost-on-the-same-node-for-diff-subdomains-using-chef)和[此处查看讨论](https://serverfault.com/questions/286366/configuring-virtual-hosts-with-chef-best-practice)

好的做法当然是使用配方/编写您自己的配方来创建虚拟主机并启用它们。您希望使用 Chef 实现的一件事是自动执行此操作，这样您就不必手动执行此操作。您的场景的复杂性可能要求您以不同于下面链接中尝试的方式进行操作。如果您计划在本地计算机以外的地方部署此位置，您当然可能必须进行 DNS 配置。

# facebook - 不支持的范围“代理电子邮件” - Facebook SDK

> ID：11560977
> 
> 赞同：1
> 
> 时间：2012-07-19T12:32:35.393
> 
> 标签：facebook

我想使用 FQL 获取我朋友的电子邮件，所以我将权限“proxied_email”传递给 Facebook SDK。它在 FB 对话框中显示错误：

```
"Invalid parameter. Error message: Unsupported scrop: "proxied_email".
I think this is a bug 
```

显然[这个链接](https://developers.facebook.com/docs/reference/fql/user/)说我需要权限“proxied_email”

是bug吗？？？

顺便说一句，我无法[收到电子邮件](https://developers.facebook.com/tools/explorer/?fql=select%20uid,%20name,%20email,%20current_location,%20pic_square%20from%20user%20where%20uid%20in%20%28select%20uid2%20from%20friend%20where%20uid1=me%28%29%29%20order%20by%20name%20limit%200,%2015)，它总是返回 null。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:36:06.717

`proxied_email`不是权限，而是`User`FQL 表中的一个字段。这就是您收到错误的原因。

您必须请求`email`获得该电子邮件的许可。

以下是获取方法`email`：

```
SELECT email FROM user WHERE uid=USER_ID 
```

# java - 在泛型参数上使用扩展的多级 Java 泛型继承

> ID：11560980
> 
> 赞同：18
> 
> 时间：2012-07-19T12:32:43.077
> 
> 标签：java, generics

我有

```
public class First<T> {}

public class Second<T extends SomeConcreteClass> extends First<T> {}

public class Third<T> extends Second<T> {} //Compile-time error 
```

我收到编译时错误

```
Type argument T is not with bounds of type-variable T. 
```

当我构造 a`Third`时，我希望能够将泛型参数作为`SomeConcreteClass`（或其派生类），并且如果我提供的类型不是`SomeConcreteClass`的继承层次结构的一部分，则会引发运行时错误.

我认为`Second`' 的声明中的规范只会向下传播，即它应该隐含在 . 的声明（和任何实例化）中`Third`。

错误是怎么回事？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-19T12:34:29.987

所有你需要的是

```
public class Third<T extends SomeConcreteClass> extends Second<T> 
```

您只需要重新指定界限。它不会像你想象的那样传播。

（我不肯定这个原因，但我有一些猜测——如果是这样`Third<T> extends Second<Foo<T>>`呢？适当的界限`T`并不明显，即使有一个。所以相反，它只是不会自动传播；你必须指定它。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-05T14:45:46.517

在我们的例子中，您可能可以替换它：

```
public class Third<T> extends Second<T> {} 
```

有了这个：

```
public class Third extends Second<SomeConcreteClass> {} 
```

要在构造函数中使用 T 或在代码中使用 T 类型的成员字段，例如 T 类型的成员字段，则可以这样做：

```
VB2 extends VB1<Frag2>
...
public VB2(Frag2 frag){...

VB1<T extends Frag1> extends CommonVB<T>
...
public V1(T frag){... /// notice the T

CommonV<T extends CommonFragBase> extends BaseVB<T>
...
public CommonVB(T controller) {...

BaseVB<T extends CommonFragBase> 
```

这样可行。重要的是具体类上的泛型必须指定实际的具体片段类，以便 VB 类中的其他代码访问其方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T13:10:52.607

您有边界限制的向下传播。

如果您将代码放在通用术语中，您将清楚地看到受限声明。此外，任何进一步的继承也需要保留或进一步缩小该限制。例如：

```
public class First<T> {}

public class Second<U, T1 extends U> extends First<T1> {}

public class Third<V, T2 extends V> extends Second<V,T2> {} 
```

请注意，现在很明显您不能拥有

```
public class Third<T> extends Second<T> {} 
```

由于您缺少`T2`. `Second<V,T2>`当你使用一个具体的类时，这个限制就变得隐含了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T12:37:45.197

`public class Third<T> extends Second<T> {}`

这是一个绑定不匹配。当您刚刚指定 second 的类型为 T 而不是扩展 SomeConcreteClass 时，您不能使用泛型 T 扩展 Second。当你扩展 Second 时，你需要使用 SomeConcreteClass 范围内的东西。

`public class Third<T> extends Second<ClassThatExtendsSomeConcreteClass> {}`

要不就

`public class Third<T> extends Second<SomeConcreteClass> {}`

# events - WMI 事件观察器任务命名空间

> ID：11560981
> 
> 赞同：1
> 
> 时间：2012-07-19T12:32:45.333
> 
> 标签：events, namespaces, ssis, wmi

在 SSIS 2008 中，创建新的 WMI 连接管理器时的“WMI 命名空间”是什么？我发现的教程一直假设本地数据库，并且对服务器名称和 WMI 命名空间不做任何事情。但是，我正在连接到服务器。

任何帮助深表感谢。

谢谢！

# rest - REST Webservices - GET 但用于多个对象

> ID：11560982
> 
> 赞同：2
> 
> 时间：2012-07-19T12:32:49.207
> 
> 标签：rest

我已经完成了 [如何最好地设计具有多个过滤器的 REST API？](https://stackoverflow.com/questions/8806844/how-best-to-design-a-rest-api-with-multiple-filters)

当您说 3 或 4 个过滤条件并且您可以在查询字符串中容纳它时，这确实会有所帮助。

但是，让我们以这个例子为例，您想获取有关 20 个电话号码的通话详细信息，在某个开始日期和结束日期之间。现在我确实同意理想情况下应该建议对每个数字进行单独查询，然后在客户端整理所有数据。

但是对于某些 Live 系统，这意味着在交换机或 cdr 数据库上进行 20 轮查询。那是 20 个请求-响应周期加上客户必须根据时间再次整理和订购它们。而在数据库级别，这将是一个简单的单个查询，可以返回有序数据并转换回客户端可以嵌入到其系统中的 REST xml 响应。

如果我们要使用 GET 查询字符串会变得非常混乱并且也有限制。解决此问题的任何建议。当然，我们可以发送一个包含所有数字的 xml 的 POST 请求，但这违反了 REST Get 原则。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:55:32.743

如果是 GET，请使用 OData 查询。例如，当您的开始日期和结束日期表示为数字（unix 时间）时，URI 可能如下所示：

GET [http://operatorcalls.com/Calls/Details](http://operatorcalls.com/Calls/Details) ?$filter=Date le 1342699200 和 Date gt 1342526400

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:23:41.523

您似乎缺少的是 REST 的一个重要概念，即[缓存](http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm#fig_5_7)。例如，这可以在浏览器中为单个客户端完成。或者它可以作为所有客户端和实时生产系统之间的[共享缓存](http://cseweb.ucsd.edu/~voelker/pubs/org-sharing-usits99.pdf)来完成（无论它是什么）。从而减少对实时生产系统的查询，或者在您的示例中，实际交换机。

您真的应该花一些时间阅读[Fieldings 的论文](http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm)，并了解 REST 是一种***架构风格***。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T08:37:03.400

我在这里找到了一个解决方案，[在 Java 中处理 URI (RESTfully) 中的多个参数，](https://stackoverflow.com/questions/6127507/handling-multiple-parameters-in-a-uri-restfully-in-java) 但对它不太满意。所以实际上我们最终会使用 /cdr?numbers=number1,number2,number3 ... 但是不太满意，因为 url 中的查询字符串有限制，而且似乎也不是一个优雅的解决方案. 有人在自己的实现中找到了解决方案吗？基本上不使用 POST 处理这种 Fetch 请求，也不使用繁琐冗长的查询字符串。我们正在使用 Jersey，但也可以使用 CXF 或 Spring REST

# php - 为什么我的应用程序仅在使用 ob_start() 方法时才运行

> ID：11560988
> 
> 赞同：0
> 
> 时间：2012-07-19T12:33:06.963
> 
> 标签：php

我写了一个简单的应用程序，它有登录页面。登录后搜索插入按钮在那里。我构建了这个简单的应用程序并在上个月成功运行。但是现在当我现在使用它时，我的页面不会重定向到下一页。我仔细检查了我的语法。

我搜索了答案并找到了 ob_start() 方法。现在我的应用程序正在成功运行。

当我第一次使用这个应用程序时，我没有使用 ob_start。但是为什么没有 ob_start(); 它现在不能工作？方法。

请解释。

搜索功能：

```
 $email = $_POST['search'];
    $sql = "select * from employee_details where ";
    if($email){
    $sql .= " email = '$email' ";
    }

    $rv = mysql_query($sql);
    if(mysql_num_rows($rv) == 0){
    $errmsg_arr[] = "Employee records are not found.";
    $page = "HomePage.php";
    $errflag = true;    
    errors($page,$errmsg_arr, $errflag );
    }
    while( $row = mysql_fetch_array($rv)){
     $var['employee_id'] = $row['employee_id'];
     $var['employeename'] = $row['employee_name'];
     $var['email'] = $row['email'];
     $var['phone'] = $row['phone'];
     $var['address1'] = $row['address1'];
     $var['state'] = $row['state'];
     $var['country'] = $row['country'];
    }
    addvars($var);
    header("location: EmployeeDetails.php"); 
```

addvars 函数：

```
function addvars($vars) {
    session_start();
$_SESSION[] = array();  

    foreach($vars as $keys => $vals) {  

$_SESSION[$keys] = $vals;   

}
 } 
```

错误功能：

```
function errors($page,$errmsg_arr, $errflag){
if($errflag) {
    session_start();
    $_SESSION['ERRMSG_ARR'] = $errmsg_arr;
    session_write_close();
    header("location: $page");
    exit();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:38:36.540

很可能是因为您尝试在已发送标头时设置标头。（你可以尝试调整输出缓冲而不是使用它，`ob_start`如果它打扰你）。

# html - 无法在 MVC3 中加载外部图像列表

> ID：11560989
> 
> 赞同：0
> 
> 时间：2012-07-19T12:33:11.417
> 
> 标签：html, asp.net-mvc-3, image

我正在尝试在我的硬盘中加载图像列表。但图像不显示。

.cshtml

```
@foreach (var item in Model)
            {

  <img src="@item.FilePath" class="image0" style="width:100px; height:100px" alt="" />

            } 
```

控制器：

```
List<PageModel> filePath = documentManager.GetPageModels(DocId);
            return View(filePath); 
```

模型：

```
public List<PageModel> GetPageModels(int documentId)
        {
            List<PageModel> modelList = new List<PageModel>();
            foreach (var page in db.Pages.Where(model=>model.DocumentId == documentId).ToList())
            {
                PageModel model = new PageModel();

                model.FilePath = page.FilePath;

                modelList.Add(model);
            }
            return modelList;
        } 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:07:07.147

You really want to load your local files? This is just a Web site for you, yeah, cos no one else will be able to see them.

If that's the case a browser needs the following to open a local file:

```
file:///C|/somepath/mylocalfile.html 
```

Here's more detail: [Django: how to open local html files directly in the browser with links like href="file:///C:/path/file.html"](https://stackoverflow.com/questions/5788316/django-how-to-open-local-html-files-directly-in-the-browser-with-links-like-hre)

In more detail then given the comment on my original answer (which finished above):

```
@foreach (var item in Model)
{
    <img src="@Html.ConvertLocalFilePathToBrowserPath(item.FilePath)" class="image0" style="width:100px; height:100px" alt="" />
} 
```

And then you would have a helper in a static class somewhere:

```
public static class MyHtmlHelpers
{
    public static string ConvertLocalFilePathToBrowserPath(this HtmlHelper htmlHelper, string filePath)
    {
        return string.Format("file:///{0}", filePath.Replace(Path.PathSeparator.ToString(CultureInfo.InvariantCulture), "/"));
    }
} 
```

# jenkins - 一个詹金斯可以在远程詹金斯上触发工作吗

> ID：11560992
> 
> 赞同：10
> 
> 时间：2012-07-19T12:33:17.567
> 
> 标签：jenkins

我有 2 台 Jenkins 主机，并希望 First Jenkins 根据第一个主机上的“SUCCESS”结果触发远程 Jenkins 上的工作。我查看了各种插件，但它们似乎都表示一个 Jenkins 主机，可以以这种方式链接多个作业。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-03-04T13:23:46.190

同时，一个 jenkins 插件变得可用，这使它变得更容易：

[https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Remote+Trigger+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Remote+Trigger+Plugin)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-27T11:28:55.547

It's very easy to do using cURL requests, no need for plugins or master>slave relations. It took me 5 minutes from beginning to start. Use the following manual:

[https://www.nczonline.net/blog/2015/10/triggering-jenkins-builds-by-url/](https://www.nczonline.net/blog/2015/10/triggering-jenkins-builds-by-url/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T12:43:26.037

您可以在 host1 上设置一个下游作业，该作业仅在 host1 上的第一个作业成功时才构建。在这项工作中，您将触发远程构建，就像我在此[答案中描述的那样](https://stackoverflow.com/a/11557932/1529272)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-11T10:15:32.993

**第 1 步：在两个 Jenkins 中安装以下插件。**

1.  通用 Webhook 触发器：可以从 http 请求触发作业。
2.  HTTP 请求插件：发送 http 请求作为构建步骤
3.  任何构建步骤插件：在构建后操作中使用任何构建步骤。

**第 2 步：配置要触发的作业（Jenkins B）。**

*   在构建触发器中选择通用 webhook 触发器并生成令牌并粘贴。

*   [保存此作业后，可以通过向http://JENKINS_B_URL/generic-webhook-trigger/invoke?token=TOKEN_VALUE](http://JENKINS_B_URL/generic-webhook-trigger/invoke?token=TOKEN_VALUE)发送 http 请求来 触发

**第 3 步：在主 Jenkins(Jenkins A) 中，在配置系统中配置灵活的发布设置，以允许将所有构建步骤用作构建后操作。**

**第 4 步：在后期构建操作中添加另一个步骤“灵活发布”。** 使用此任何构建操作都可以用作构建后操作。添加 HTTP 请求操作。在 url 字段中提供 Jenkins B webhook url 并保存。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-19T12:43:35.657

是的。配置您的 Jenkins 节点并标记它们，比如`master`和`slave`（管理 Jenkins -> 管理节点）。

1）配置`Job A`并指定它只能运行在`master`（“限制这个项目可以运行的地方”和标签字段中`master`）。

2）配置`Job B`成只有`Job A`成功才会触发：

“构建后操作”->“仅在构建成功时触发”

3)与步骤 1 类似`Job B`。`slave`

# java - 尝试从 ObjectInputStream 读取时 Android 中的 ClassCastException

> ID：11560993
> 
> 赞同：0
> 
> 时间：2012-07-19T12:33:19.117
> 
> 标签：java, android, classcastexception, objectoutputstream, objectinputstream

我正在处理的 android 应用程序有问题。我通过 Wi-Fi 连接了两部手机，并使用`ObjectOutputStream`/将自定义序列化类从一部手机传递到另一部手机`ObjectInputStream`。两部手机上的课程是相同的，但是当我尝试在一部手机上阅读时，我得到了`ClassCastException`.

```
07-19 08:19:41.636: E/ClientActivity(1775): java.lang.ClassCastException: sMessage
07-19 08:19:41.636: E/ClientActivity(1775):     at     com.example.nfcclientv2.ClientService.runService(ClientService.java:87)
07-19 08:19:41.636: E/ClientActivity(1775):     at com.example.nfcclientv2.ClientService.onStartCommand(ClientService.java:66)
07-19 08:19:41.636: E/ClientActivity(1775):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2043)
07-19 08:19:41.636: E/ClientActivity(1775):     at android.app.ActivityThread.access$2800(ActivityThread.java:117)
07-19 08:19:41.636: E/ClientActivity(1775):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:998)
07-19 08:19:41.636: E/ClientActivity(1775):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-19 08:19:41.636: E/ClientActivity(1775):     at android.os.Looper.loop(Looper.java:130)
07-19 08:19:41.636: E/ClientActivity(1775):     at android.app.ActivityThread.main(ActivityThread.java:3691)
07-19 08:19:41.636: E/ClientActivity(1775):     at java.lang.reflect.Method.invokeNative(Native Method)
07-19 08:19:41.636: E/ClientActivity(1775):     at java.lang.reflect.Method.invoke(Method.java:507)
07-19 08:19:41.636: E/ClientActivity(1775):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
07-19 08:19:41.636: E/ClientActivity(1775):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
07-19 08:19:41.636: E/ClientActivity(1775):     at dalvik.system.NativeStart.main(Native Method) 
```

我读入了对象和发生错误的行：

```
sMessage sMsg = (sMessage)ois.readObject(); 
```

这是我写出的方式`sMessage`：

```
oos = new ObjectOutputStream(client.getOutputStream());
oos.writeObject(sMsg);
oos.flush();
oos.close(); 
```

这是我的`sMessage`课：

```
import java.io.Serializable;

public class sMessage implements Serializable {
    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    public String type = null;
    public byte[] data = null;
}; 
```

我在两部手机上都有这门课，正如我所说的，它们是相同的，所以我不太清楚为什么我会得到一个`ClassCastException`.

如果有更多信息会有所帮助，我很乐意发布并感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T03:28:23.753

好吧，我不完全确定确切的问题是什么，但在我的情况下，我检查了来自 ObjectInputStream 的对象的类，它包括我的类的完整包名，所以我将我的演员从“（sMessage )oid.readObject()”到“(packageName + sMessage)oid.readObject()”。还应注意，这些类位于不同的应用程序中，但具有相同的包名。

希望对某人有所帮助。

# android - 在我的列表视图中看不到来自 db 的数据

> ID：11560996
> 
> 赞同：0
> 
> 时间：2012-07-19T12:33:36.250
> 
> 标签：android, sqlite, listview

我试图在列表视图中动态显示我的数据。我首先将数据插入数据库，然后在列表视图中显示它们。我不明白为什么，但我创建了 db 和 listview，当我尝试显示它时它不显示数据。

我正在从`EditText`字段中获取数据，但我将数据插入并显示在另一个`activity`. 我最初以为我没有从第一个活动中获取数据，但我确信我编写了正确的代码。

列表视图中的数据字段始终为空。当我按下“添加”按钮时，我应该创建一个新条目。我可以看到它在列表中创建了一个具有新 id 的新行，但其余为空。

为什么我在那里看不到数据？这就是我获取数据并放入数据库和列表的方式：

```
 public void onCreate(Bundle savedInstanceState) {

   super.onCreate(savedInstanceState);
   setContentView(R.layout.activity_main2);

   String name = "";
   String email = ""; 
   String phone = "";
   String address = "";

   Bundle extras = getIntent().getExtras();
   if (extras != null) {
        name = extras.getString("name");
        email = extras.getString("email");
        phone = extras.getString("phone");
        address = extras.getString("address");
   }

   listContent = (ListView)findViewById(R.id.contentlist);

   mySQLiteAdapter = new SQLiteAdapter(this);
   mySQLiteAdapter.openToWrite();

   cursor = mySQLiteAdapter.queueAll();

   String[] from = new String[]{SQLiteAdapter.KEY_ID, SQLiteAdapter.COLUMN_NAME, SQLiteAdapter.COLUMN_EMAIL,SQLiteAdapter.COLUMN_PHONE, SQLiteAdapter.COLUMN_ADDRESS};

   int[] to = new int[]{R.id.id, R.id.text1, R.id.text2,R.id.text3, R.id.text4};

   cursorAdapter = new SimpleCursorAdapter(this, R.layout.row, cursor, from, to);

   listContent.setAdapter(cursorAdapter);
   mySQLiteAdapter.insert(name,email,phone,address);
   updateList();

 } 
```

这是我的主要活动

```
 Button next = (Button) findViewById(R.id.add);
      EditText nametext = (EditText) this.findViewById(R.id.NameText);
      final String nt = nametext.getText().toString();
      EditText emailtext = (EditText) this.findViewById(R.id.MailText);
      final String et = emailtext.getText().toString();
      EditText phonetext = (EditText) this.findViewById(R.id.PhoneText);
      final String pt = phonetext.getText().toString();
      EditText addresstext = (EditText) this.findViewById(R.id.AddressText);
      final String at = addresstext.getText().toString();

        next.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

                Intent myIntent = new Intent(getApplicationContext(), Activity2.class);
                myIntent.putExtra("name",nt);
                myIntent.putExtra("email",et);
                myIntent.putExtra("phone",pt);
                myIntent.putExtra("address",at);
                startActivity(myIntent);
            }

          }); 
```

这是我的 queueAll 函数：

```
 public Cursor queueAll(){
 String[] columns = new String[]{KEY_ID, COLUMN_NAME,
 COLUMN_EMAIL,COLUMN_PHONE,COLUMN_ADDRESS};

Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns,

null, null, null, null, null);

return cursor;

} 
```